# StackOverflow 问答 12331000-12331999

# android - 如何在不使用相机应用程序的情况下从相机中检索图像（通过服务）

> ID：12331006
> 
> 赞同：6
> 
> 时间：2012-09-08T13:11:14.587
> 
> 标签：android, android-intent, android-camera

我需要创建一个服务应用程序，如果从内置相机应用程序中获取任何新图像，它总是查找和检索图像文件。

1）如果新图像是从内置相机应用程序中拍摄的，我的服务需要观看和拍摄图像

我们如何在我的服务中获取图像路径或图像数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:34:43.140

清单代码：

```
 <receiver android:name=".pictureReceiver" >
        <intent-filter android:priority="10000" >
           <action android:name="com.android.camera.NEW_PICTURE"/>
      <data android:mimeType="image/*"/>
        </intent-filter>
</receiver> 
```

接收代码：

```
@Override
    public void onReceive(Context arg0, Intent arg1) {
           String selectedImageUri = arg1.getData().getPath();
           Log.d("TAG", "Received new photo:::"+selectedImageUri );
               Log.d("TAG","file Path"+getRealPathFromURI(arg1.getData(),arg0));
    }
 public String getRealPathFromURI(Uri contentUri,Context context)
        {
            try
            {
                String[] proj = {MediaStore.Images.Media.DATA};

                Cursor cursor =  context.getContentResolver().query(contentUri, proj, null, null, null);
                int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                cursor.moveToFirst();
                return cursor.getString(column_index);
            }
            catch (Exception e)
            {
                return contentUri.getPath();
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-19T00:48:53.807

仅供参考，建议从 ICS API 级别 14 开始收听官方广播：http: [//developer.android.com/reference/android/hardware/Camera.html#ACTION_NEW_PICTURE](http://developer.android.com/reference/android/hardware/Camera.html#ACTION_NEW_PICTURE)。所以过滤“android.hardware.action.NEW_PICTURE”，并且仅当您还需要支持 pre-ICS 时才使用“com.android.camera.NEW_PICTURE”。

# mysql - 获取每个班级人数最多的学生列表

> ID：12331008
> 
> 赞同：2
> 
> 时间：2012-09-08T13:11:19.603
> 
> 标签：mysql, sql

我想从 db 中获取学生列表，他们在每个班级中获得最大数量的学生姓名。使用 MySQL 数据库。

我有以下表格，例如学生，班级，结果（不同年份的结果）

表结构 student(student_id,student_name,class_id,address), class(class_id,class_name), results(result_id,student_id,year,marks)

我需要像这样的清单

```
Student Name   class   Marks
Jon            A-1      800
Steve          B-1      789 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T13:49:17.903

**编辑**更正的代码，注释正确

试试这个[SQL Fiddle 链接上的代码](http://sqlfiddle.com/#!2/6102d/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T13:57:16.443

您可以使用子查询来过滤每个班级得分最高的学生：

```
select  s.student_name
,       c.class_name
,       r.marks
from    results r
join    student s
on      r.student_id = s.student_id
join    class c
on      c.class_id = s.class_id
where   r.result_id =
        (
        select  r2.result_id
        from    student s2
        join    results r2
        on      s2.student_id = r2.student_id
        where   c.class_id = s2.class_id
        order by
                r2.marks desc
        limit   1
        ) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/731a9/2/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T14:08:16.407

```
select s1.student_name, c1.class_name, r1.marks 
from student s1, class c1, results r1,
  (select s2.class_id, max(r2.marks) marks 
   from results r2, student s2
   where r2.student_id = s2.student_id 
   group by s2.class_id) agg
where r1.marks      = agg.marks 
  and r1.student_id = s1.student_id
  and s1.class_id   = c1.class_id
  and s1.class_id   = agg.class_id 
```

# linq - LINQ - 按 lambda 表达式分组

> ID：12331010
> 
> 赞同：1
> 
> 时间：2012-09-08T13:11:30.357
> 
> 标签：linq

说我有以下内容：

```
var OrderCounts = from o in Orders
                  group o by o.CustomerID into g
                  select new {
                         CustomerID = g.Key,
                         TotalOrders = g.Count()
                  }; 
```

如何将其转换为 Lambda 表达式

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T13:16:16.500

```
var OrderCounts = customers
        .GroupBy (o => o.CustomerID)
        .Select (o => new { CustomerID = o.Key, TotalOrders = o.Count () }) 
```

# r - 为矩阵列的每个可能排列计算线性回归

> ID：12331011
> 
> 赞同：1
> 
> 时间：2012-09-08T13:11:31.707
> 
> 标签：r

我有一个（kxn）矩阵。我最初设法将第 1 列与其他列进行线性回归（使用 lm 函数），并仅提取系数。

```
fore.choose <- matrix(0, 1, NCOL(assets))
for(i in seq(1, NCOL(assets), 1))
{

  abc <- lm(assets[,1]~assets[,i])$coefficients
  fore.choose[1,i] <- abc[2:length(abc)]

} 
```

系数被放置在`fore.choose`矩阵中。

我现在需要做的是将第 2 列与其他列进行线性回归，然后将第 3 列等以此类推，并仅提取系数。

输出将是 OLS 单变量系数的方阵。有点类似于相关矩阵，但它是我感兴趣的 beta 系数。

```
fore.choose <- matrix(0, 1, NCOL(assets)) 
```

最初需要成为

```
fore.choose <- matrix(0, NCOL(assets), NCOL(assets)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T13:33:44.657

我只需使用 直接从相关矩阵计算系数`beta = cor(x,y)*sd(x)/sd(y)`，如下所示：

```
# set up some sample data
set.seed(1)
d <- matrix(rnorm(50), ncol=5)

# get the coefficients
s <- apply(d, 2, sd)
cor(d)*outer(s, s, "/") 
```

您还可以使用`lsfit`一次获取所有其他项的系数，然后只需执行一个循环：

```
sapply(1:ncol(d), function(i) {
  coef(lsfit(d[,i], d))[2,]
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T13:35:11.133

我确信一定有比嵌套循环更优雅的方式。

```
fore.choose <- matrix(NA, NCOL(assets), NCOL(assets))
abc <- NULL

for(i in seq_len(ncol(assets))){ # loop over "dependant" columns
  for(j in seq_len(ncol(assets))){ # loop over "independant" columns
     abc <- lm(assets[,i]~assets[,j])$coefficients 
     fore.choose[i,j] <- abc[-1]
  }
} 
```

# algorithm - 具有不同初始值的 Tribonacci 级数

> ID：12331013
> 
> 赞同：6
> 
> 时间：2012-09-08T13:11:35.247
> 
> 标签：algorithm, math

如果初始值是一些任意数字，例如 1、2 3 即 T(1) = 1、T(2) =2 和 T(3) = 3，如何用矩阵乘法方法找到第 n 个 tribonacci 数。

如果 T(n) = T(n-1) + T(n-2) + T(n-3) 那么如果 n 非常非常大，如何找到 T(n)，如果有人能用矩阵解释，我将不胜感激乘法。如何构造初始矩阵。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T13:27:38.517

矩阵乘法方法涉及使用矩阵递归关系。

对于斐波那契数列，我们可以定义一个长度为 2 的向量来表示相邻的斐波那契数。使用这个向量，我们可以定义一个矩阵乘法的递归关系：

![在此处输入图像描述](../Images/91212d02c433ff58e8e68144b723bfc7.png)

类似地，Tribonacci 级数递推关系可以这样写：

![在此处输入图像描述](../Images/1d6814d31d64e0e13da476ebeb942213.png)

唯一的区别是向量和矩阵的大小不同。

现在，为了计算一个大的 Tribonacci 数，我们只需应用矩阵乘法 n 次，我们得到：

![在此处输入图像描述](../Images/d110600a8e5dafa56cb4302684fa2020.png)

可以有效地计算`n`(M ^n )的矩阵，因为我们可以使用求幂算法。

[Wikipedia 在Exponentiation by Squaring](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)中描述了许多有效的标量求幂算法。我们可以对矩阵求幂使用相同的想法。

我将描述一个简单的方法来做到这一点。首先我们写成`n`二进制数，例如：

```
n = 37 = 100101 
```

然后，通过对 2 的前一个幂进行平方来计算 M 的每个 2 的幂： M ¹ , M ² = M ¹ M ¹ , M ⁴ = M ² M ² , M ⁸ = M ⁴ M ⁴ , M ^(16) = M ⁸ M ⁸ , M ^(32) = M ^(16) M ^(16) , ...

最后，乘以 的二进制数对应的 M 的幂`n`。在这种情况下，M ^n = M ¹ M ⁴ M ^(32)。

在计算之后，我们可以将矩阵与前 3 个值的 Tribonacci 向量相乘，即。

![在此处输入图像描述](../Images/d110600a8e5dafa56cb4302684fa2020.png)

因为矩阵的大小是固定的，所以每次矩阵乘法需要固定的时间。我们必须做`O(log n)`矩阵乘法。因此，我们可以及时计算出第 n^个Tribonacci 数`O(log n)`。

将此与通常的动态规划方法进行比较，后者需要`O(n)`时间，通过计算每个 Tribonacci 数直到第 n^个Tribonacci 数（即`for (i = 3 to n) {T[i] = T[i-1]+T[i-2]+T[i-3];} return T[n];`）。

* * *

我假设您知道如何用您选择的语言编写矩阵乘法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T13:25:21.473

考虑：

```
 | a1 b1 c1 |
[f(n) f(n - 1) f(n - 2)] * | a2 b2 c2 | = [f(n + 1) f(n) f(n - 1)]
                           | a3 b3 c3 | 
```

在此基础上找到矩阵中的未知数，这将是您想要的矩阵。

在这种情况下，答案是：

```
1 1 0
1 0 1
1 0 0 
```

但是，该方法是通用的，即使您将`k`先前的项相加，即使它们前面有常数等，它也有效。

# authentication - 如何使用用户名和密码连接到 mscrm？

> ID：12331014
> 
> 赞同：-1
> 
> 时间：2012-09-08T13:11:38.093
> 
> 标签：authentication, dynamics-crm, credentials

如何替换和扩展此代码以在身份验证凭据中使用密码和用户名。我试图通过分析 mscrm sdk 中的示例来解决这个问题，但没有运气，因为我不是 c# 程序员。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using System.ServiceModel.Description;
using Microsoft.Xrm.Sdk.Client;
using System.Net;
using Microsoft.Xrm.Sdk;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void id_Click(object sender, EventArgs e)
    {

        AuthenticationCredentials authCredentials = new AuthenticationCredentials();

        //Authenticate using credentials of the logged in user;       
        ClientCredentials Credentials = new ClientCredentials();

        Uri OrganizationUri = new Uri("http://Crm/Contoso/XRMServices/2011/Organization.svc");
        Uri HomeRealmUri = null;

        //OrganizationServiceProxy serviceProxy;       
        using (OrganizationServiceProxy serviceProxy = new OrganizationServiceProxy(OrganizationUri, HomeRealmUri, Credentials, null))
        {
            IOrganizationService service = (IOrganizationService)serviceProxy;

            //Instantiate the contact object and populate the attributes.
            Entity contact = new Entity("contact");
            contact["firstname"] = txtFirstName.Text.ToString();
            contact["lastname"] = txtLastName.Text.ToString();
            Guid newContactId = service.Create(contact);
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:34:06.180

我将假设您在这里使用 Active Directory 身份验证。[MSDN](http://msdn.microsoft.com/en-us/library/hh675404.aspx)上有一个相当冗长的示例，它展示了如何为所有身份验证方法创建连接。

我相信你只需要改变：

```
ClientCredentials Credentials = new ClientCredentials(); 
```

至：

```
ClientCredentials Credentials = new ClientCredentials();
Credentials.UserName.UserName = "domain\username";
Credentials.UserName.Password = "password"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:11:36.860

如果可能的话，我建议使用默认凭据，如果不可能，那么我们使用这样的东西：

```
ClientCredentials creds = new ClientCredentials();
creds.Windows.ClientCredential = new System.Net.NetworkCredential(ConfigurationManager.AppSettings["username"], ConfigurationManager.AppSettings["password"], ConfigurationManager.AppSettings["domain"]); 
```

这种方法的明显缺点是密码是明文的，但优点是您不需要重新编译来更改密码或用户。

# php - 如何在数组中设置默认值？

> ID：12331015
> 
> 赞同：0
> 
> 时间：2012-09-08T13:11:58.857
> 
> 标签：php, regex

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我有一个数组，其中包含来自正则表达式格式的所有扫描链接。但在正则表达式中，对于 www.apple.com，它只有 /macbookair/ 和 /osx/ 等链接，而不是[http://www.apple.com/macbookair/](http://www.apple.com/macbookair/)。有没有办法让我在值之前设置默认值，例如“ [http://www.apple.com/](http://www.apple.com/) ”？这样他们就是工作链接。我的正则表达式是

```
 /<a(?:[^>]*)href=\"([^\"]*)\"(?:[^>]*)>(?:[^<]*)<\/a>/is 
```

值得我纠正上面的正则表达式吗？或者有没有办法为数组设置默认值？我宁愿人们不要提及使用“html dom”或类似的东西，因为我宁愿只使用我建议的一种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:01:37.677

```
<?php

$default_value = 'http://www.apple.com'; // without slash

foreach( $results as &$link )
{
    if( $link[0] == '/' )
    {
        $link = $default_value. $link;
    }
} 
```

# php - swig 没有重载的匹配函数

> ID：12331017
> 
> 赞同：1
> 
> 时间：2012-09-08T13:12:08.307
> 
> 标签：php, function, swig

我在使用 SWIG 将我的 c++ 代码包装在 PHP 中时遇到问题：我在 C++ 中有一个类，其方法声明如下：

```
int hexDump(string &dmpstr,bool space=true)const; 
```

我还在我的接口文件中包含 std_string.i 并且我可以很好地传递字符串参数。但是当我在我的 PHP 代码中调用我的方法时，如下所示：

```
$bf->hexDump('12',true); 
```

我收到了这个错误：

```
Fatal error: No matching function for overloaded 'PKI_Buf_hexDump' 
```

PKI_Buf 是我的班级名称。任何想法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:01:48.790

这里的问题似乎是缺少非常量字符串引用的类型检查，因此在重载解决方案期间 SWIG 拒绝了真正适合调用的对象。

您可以通过添加自己的类型检查来解决它，我举了一个例子：

```
%module test

%include <std_string.i>

%typemap(typecheck,precedence=141) std::string& str {
  $1 = Z_TYPE_PP($input) == IS_STRING;
}

%{
#include <iostream>
%}

%inline %{
  void func(std::string& str, bool b=false) {
    std::cout << "In C++: " << str << "\n";
    str = "output";
  }
%} 
```

我不太确定正确的[优先级值](http://www.swig.org/Doc1.3/Typemaps.html#Typemaps_overloading)是多少。我选择 141 是因为它低于默认字符串值。

我检查了它是否可以正常工作：

```
<?php
include('test.php');
echo "testing\n";
$str = "input";
test::func($str, true);
echo "In PHP: " . $str . "\n";
?> 
```

哪个按预期工作。

我认为默认情况下类型检查类型映射不起作用的事实是一个错误，因为它使用的类型检查永远不会起作用。您可能想在邮件列表中提出这个问题。

# excel - 打印和 print.preview 时 excel 2010 崩溃

> ID：12331021
> 
> 赞同：0
> 
> 时间：2012-09-08T13:12:28.380
> 
> 标签：excel, vba

**Excel 在使用此宏进行打印预览和打印机窗口时崩溃，所以我在 Google 上搜索了很多以了解如何解决此问题，但我失败了。** 这是我用于 PrintPreview 的代码

```
Sub Print_TimeSht()
Application.ScreenUpdating = False

  With ActiveSheet.PageSetup
  .PrintArea = "$A$1:$Q$599"           ' set print area
        .PrintHeadings = False
        .PrintGridlines = False
        .PrintComments = xlPrintNoComments

        .CenterHorizontally = False
        .CenterVertically = False
        .Orientation = xlPortrait
        .Draft = False
       '.PaperSize = xlPaperA4
        .FirstPageNumber = xlAutomatic
        .Order = xlDownThenOver
        .BlackAndWhite = True
        .Zoom = False
        .PrintErrors = xlPrintErrorsDisplayed

     End With
         Application.ScreenUpdating = True
        With ActiveWindow
         .Zoom = 80
         .SelectedSheets.PrintPreview

        End With
Application.Dialogs(xlDialogPrint).Show
Application.ScreenUpdating = True
End Sub 
```

那么如何解决这些问题我使用 Excel 2010 32 位和 Win7 32 位 >>??????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-15T12:27:07.257

The answer is a little late, but for someone who has the same problem it is good to have a solution. Sometimes you might not be connected to a printer, to prevent Excel from freezing use:

```
Application.PrintCommunication = False 'above:
    With Activesheet.PageSetup 
```

and below

```
End With
Application.PrintCommunication = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:06:50.063

首先，尝试将以下行更改为“true”

```
Application.ScreenUpdating = False 
```

这可能会产生一条错误消息，用于您的 google 搜索问题解决。

除此之外，也许检查以下项目：

1）macrosecurity设置为低（测试这个，测试后改回原来的设置） 2）进入**控制面板**，选择**卸载程序**，单击一次**Microsoft office** 并选择**更改**然后**修复**，让程序检查自己是否丢失。 dll 文件等。问题可能只是缺少 .dll 3) 如果这不能解决问题，请返回控制面板/卸载/更改，这次选择**添加/删除功能**。
a) 确保安装了所有的 excel（没有灰显） b) 确保在*办公室共享功能*中，*应用程序的 Visual Basic*已安装。此外，在共享功能部分，安装了校对工具。我保留所有已安装的 excel 和所有办公室共享功能，以确保涵盖所有基础。

# mysql - 如何根据条件对结果进行分组？

> ID：12331022
> 
> 赞同：3
> 
> 时间：2012-09-08T13:12:28.740
> 
> 标签：mysql

我无法解决这个问题好几个小时。
这是我的桌子

```
t1:

–––––––––––––––––––––––––––––––––––
| id | text   |  lang | transl_id |
–––––––––––––––––––––––––––––––––––
| 1  | first  |  en   |  222      |
–––––––––––––––––––––––––––––––––––
| 2  | second |  de   |  222      |
–––––––––––––––––––––––––––––––––––
| 3  |   jkj  |  de   |  234      |
–––––––––––––––––––––––––––––––––––
| 4  |  89080 |  de   |  235      |
––––––––––––––––––––––––––––––––––– 
```

这是我的查询：

```
SELECT
    transl_id AS property,
    (SELECT text FROM t1 WHERE lang='en') AS value1,
    (SELECT text FROM t1 WHERE lang='de') AS value2,

FROM t1 
```

它返回下表：

```
–––––––––––––––––––––––––––––––––––
| property  |  value1  |  value2  |
–––––––––––––––––––––––––––––––––––
|    222    |  first   |          |
–––––––––––––––––––––––––––––––––––
|    222    |          |  second  |
–––––––––––––––––––––––––––––––––––
|    234    |  jkj     |          |
–––––––––––––––––––––––––––––––––––
|    235    |  89080   |          |
––––––––––––––––––––––––––––––––––– 
```

每行都有一个`value1`或`value2`，从不兼有。有没有办法对结果进行分组，以便`property`字段值相等的行在一行中？我的意思是这样的：

```
–––––––––––––––––––––––––––––––––––
| property  |  value1  |  value2  |
–––––––––––––––––––––––––––––––––––
|    222    |  first   |  second  |
–––––––––––––––––––––––––––––––––––
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T13:57:00.043

试试这个查询：

```
SELECT
    property,
    max(value1) as Value1,
    max(value2) as Value2
FROM 
(
SELECT transl_id AS property,
    CASE when lang = 'en' then text else null end as value1,
    CASE when lang = 'de' then text else null end as value2
FROM t1
) t
GROUP BY property 
```

[看到这个 SQLFiddle](http://sqlfiddle.com/#!2/fbabe/14)

[尝试在表中添加更多值并在此 SQLFiddle 中](http://sqlfiddle.com/#!2/a8a81/1)获得所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:16:25.637

也许是这样的：

```
select t1.property, t1.value1, t2.value2 from
( select property, value1 from table1 where value1 is not null ) t1,
( select property, value2 from table1 where value2 is not null ) t2
where t1.property = t2.property 
```

# php - 捕获随机重复次数

> ID：12331027
> 
> 赞同：0
> 
> 时间：2012-09-08T13:13:26.240
> 
> 标签：php, pcre

我希望从 html 字符串中捕获随机数的 isbn 数字。一个这样的字符串可能是

```
978-2-7560<br />978-2-84055<br />978-2-84789<br />978-2-906187<br /> 
```

理想情况下，我会使用一个正则表达式，用 preg_match_all 分别捕获每个重复。当然，我可以像这样捕获整个字符串：

```
(([\d-]{7,}<br />)+) 
```

然后将其拆分为

```
"<br />", 
```

但我宁愿只使用一个正则表达式。那可能吗？

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:16:42.740

使用第二个捕获组和一些非捕获魔法：

```
(?:([\d-]{7,})<br />)+
   ^--inner  ^--inner
^--outer            ^--outer 
```

使`?:`外部组不捕获，因此您将只捕获 isbn 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:35:40.713

我相信这是做不到的。例如，我想做的是使用简单的正则表达式从字符串“aaaaa”中捕获数组（a，a，a，a，a），并带有随机数的“a”。我会关闭它，对不起大家的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T13:16:43.217

你可以`explode()`。

```
explode("<br />", $string); 
```

请注意，假设`<br />`标签的格式更改（`<br>`, `<br/>`），这可能会中断。

# objective-c - 由于类 CCScrollLayer 而导致的 mach-o-linker 错误？

> ID：12331032
> 
> 赞同：0
> 
> 时间：2012-09-08T13:14:05.930
> 
> 标签：objective-c, cocos2d-iphone, ccscrolllayer

我搞不清楚了 。

我以前经常使用 CCScrollLayer，它是一个 cocos2d 类，但现在我遇到了一个奇怪的错误- `mach-o-linker`。

1.  我已将课程添加到我的项目中（`CCScrollLayer.h+m`）
2.  我已经进口了它们
3.  我已经定义： `CCScrollLayer *scroller`;

然后，当我输入这行代码时：

```
 scroller = [[CCScrollLayer alloc] initWithLayers:[NSArray arrayWithObjects:page1,page2,nil] widthOffset:100]; 
```

我有 mach-o-linker 错误！

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_CCScrollLayer", referenced from:
      objc-class-ref in mainScene.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我在项目设置中定义了 armv6 和 7。

那是什么 ？？我知道这不是代码错误，而是有些不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:11:01.817

检查以确保您的编译源中有 CCScrollLayer。如果它不存在，添加它：Target > Build Phases > Compile Sources

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:17:15.850

可能您应该将 CCScrollLayer 的实现文件添加到目标的 BuildPhases 中的 CompileSources 中，如果它还没有的话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T13:18:00.940

它们是否添加到正确的目标中？我不确定，但我认为很多 mach-o-linker 错误都有相同的解决方案。

查看这篇文章：[为设备编译时出现 Apple Mach-O 链接器错误](https://stackoverflow.com/questions/5329001/apple-mach-o-linker-error-when-compiling-for-device)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T13:18:31.953

确保它`CCScrollLayer.m`列在项目的*编译源*阶段。

该错误意味着链接器未能在它拥有的所有对象中找到命名类。链接器的任务是构建一个最终的可执行文件，其中所有文件间链接都正确绑定，如果它不能完成其中一个链接，它就会失败。

这样做的常见原因是“忘记”将其中一个编译文件添加为链接器的源文件。由于 Xcode 会根据所有已编译的文件自动执行此操作——您很可能根本忘记将其添加为可编译文件。

# haskell - 抽象数据类型的平等

> ID：12331036
> 
> 赞同：1
> 
> 时间：2012-09-08T13:15:04.363
> 
> 标签：haskell

如果我有：

```
data Container a = Node a | End a | Container a 
```

如果我想编写一个可以查看 Container a 元素列表并执行列表差异的函数，我该怎么做才能明确告诉编译器这个抽象数据类型允许相等？

我以为会是：

```
compare::Eq (Container a) => Container a -> Container a -> Bool
compare a b
           | a == b = True
           | a /= b = False 
```

但它抱怨 Eq 语句不正确，因为它无法推断 (Eq (Container a)) 因使用 '=='

编辑它似乎在我的抽象数据类型中派生 (Eq) 是允许这样做的唯一方法。有人可以确认吗？

EDIT2 包括推导 (Eq) 后：

```
test:: [Container a] -> Container a -> Bool
test list element = elem element list 
```

> “没有 (Eq a) 的实例”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T13:43:30.193

通知编译器此类实例的最简单方法是[使用`deriving`子句](https://en.wikibooks.org/wiki/Haskell/Classes_and_types#Deriving)。在这种情况下，

```
data Container a = Node a | End a | Container a deriving (Eq) 
```

也可以`Eq`手动给出一个实例，例如下面说如果 a`Container`包含可以测试相等性的元素，那么`Container`也可以测试相等性。

```
instance Eq a => Eq (Container a) where
    (Node a)      == (Node b)      = a == b
    (End a)       == (End b)       = a == b
    (Container a) == (Container b) = a == b
    _             == _             = False 
```

这与给出的定义相同`deriving`，因此不必像以前那样输入定义，但是如果想要更复杂的定义，`Eq`则必须做类似的事情。

一旦你有了`Eq`容器的实例，你就可以写：

```
compare :: Eq a => Container a -> Container a -> Bool
compare a b | a == b = True
            | a /= b = False 
```

（关于这个函数的两件事：它实际上完全没有意义，因为它与 相同`(==)`，并且应该`otherwise`用作警卫中的最后一个替代方案。）

这些基本上是仅有的两个选择。虽然还有第三种方法，本质上是两者的结合：使用 GHC 扩展[`StandaloneDeriving`](http://www.haskell.org/haskellwiki/GHC/StandAloneDeriving)。

```
deriving instance Eq a => Eq (Container a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:30:33.537

至于“没有（Eq a）的实例” - 你的类型是错误的。

```
test:: [Container a] -> Container a -> Bool 
```

该类型表示您可以比较*任何*错误的容器。您当前的实例仅适用于具有可比较元素的容器。所以你应该写

```
test:: Eq a => [Container a] -> Container a -> Bool 
```

# jquery - 如何使用 SVG 绘制路径？

> ID：12331037
> 
> 赞同：3
> 
> 时间：2012-09-08T13:15:11.750
> 
> 标签：jquery, html, svg, raphael

我想从左到右为下面的草书设置动画。![在此处输入图像描述](../Images/235d31052db1d872409188cf210b4d99.png)

可以在 slaveryfootprint.org 网站上找到我想要实现的示例。在下面的链接中选择一个电子产品，然后观看电缆动画； [http://slaveryfootprint.org/survey/#gadgets](http://slaveryfootprint.org/survey/#gadgets)

我不熟悉 SVG 和像 Raphaël js 这样的 SVG 库，所以我不知道从哪里开始。我用谷歌搜索，但没有找到教程。

**编辑**：找到下面的第一个标签，从 illustrator 中保存，描绘了`d`第一个字符：

```
<g>
<path fill="none" stroke="#8C3939" stroke-linecap="round" d="M216.615,297.73c9.509,10.697,24.563-12.282,18.444-15.658
    c-6.074-3.351-10.125,5.753-10.125,5.753s-4.297,8.542,2.08,13.137c8.42,6.673,15.817-3.188,15.947-3.43"/>
</g> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T21:40:06.530

如果你有路径，你几乎可以做任何事情。另一种选择是将路径交给javascript中的增量路径扩展器。这是我通常使用的代码（我已将其作为其他答案的一部分发布，它并不完全独特，但这个化身是我的）：

```
function drawpath( canvas, pathstr, duration, attr, callback )
{
    var guide_path;
    if ( typeof( pathstr ) == "string" )
        guide_path = canvas.path( pathstr ).attr( { stroke: "none", fill: "none" } );
    else
        guide_path = pathstr;
    var path = canvas.path( guide_path.getSubpath( 0, 1 ) ).attr( attr );
    var total_length = guide_path.getTotalLength( guide_path );
    var last_point = guide_path.getPointAtLength( 0 );
    var start_time = new Date().getTime();
    var interval_length = 50;
    var result = path;        

    var interval_id = setInterval( function()
    {
        var elapsed_time = new Date().getTime() - start_time;
        var this_length = elapsed_time / duration * total_length;
        var subpathstr = guide_path.getSubpath( 0, this_length );            
        attr.path = subpathstr;

        path.animate( attr, interval_length );
        if ( elapsed_time >= duration )
        {
             clearInterval( interval_id );
             if ( callback != undefined ) callback();
             guide_path.remove();
        }                                       
    }, interval_length );  
    return result;
} 
```

然后，您将输入文本的路径到此函数。理想情况下，我一次只写一个字母——复杂的路径似乎在 Firefox 中陷入困境，尽管 Chrome 似乎可以很好地处理它们。

这是我网站上的[模型。](http://voidblossom.com/tests/cursive.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T15:47:00.447

如果您将草书文本作为一个笔画，您可以轻松地使用 stroke-dashoffset + stroke-dasharray 属性对其进行动画处理。这种技术的一个例子可以在[这里](http://xn--dahlstrm-t4a.net/svg/smil/pen-stroke-animation.svg)看到。

解决方案是为路径设置一个 dasharray，一个与路径长度相同的破折号，一个与路径长度相同的 dash-gap（这个长度很容易在运行时通过调用`getTotalLength()`方法找到路径元素）。`stroke-dashoffset`然后，您可以通过为属性设置动画来推动破折号。

该技术也应该可以应用于 raphaël 和其他 svg 框架。请注意，该[示例](http://xn--dahlstrm-t4a.net/svg/smil/pen-stroke-animation.svg)显示了具有预定值的 svg 动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T13:26:57.780

一个好的起点：[如何在 HTML 5 中使用可缩放矢量图形 (SVG)](http://mrbool.com/how-to-work-with-scalable-vector-graphics-svg-in-html-5/25183)

# c++ - 删除存储了多个引用的指针

> ID：12331038
> 
> 赞同：0
> 
> 时间：2012-09-08T13:15:17.553
> 
> 标签：c++, pointers

我在程序的一个地方通过 new 创建对象（我们称它们为演员）。这些对象通过它们的指针传递给另一个对象（我们称之为弹丸）。在任何时候，演员对象都可以在射弹之外被删除。删除并设置为 NULL 会发生这种情况。然而，它的一个指针仍在弹丸中。我确实检查了 if != NULL 但它通过了这些检查。类中的值都是伪造的，但指针本身不是 NULL。

我需要做一个指向指针的指针吗？我只是想如果我传递一个指针并在某个时候删除并将该指针设置为NULL，我传递的所有其他地方也会显示NULL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T13:18:10.810

您可能应该研究智能指针，例如[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T13:41:59.140

您是否考虑过双重间接？

1.  使用以下地图`Actors`：`std::map<unsigned, Actor>`
2.  仅将`Actor`ID 存储在射弹中

现在，假设一个单调递增的 ID（您有大约 40 亿个可用的 ID，应该让您继续使用一段时间），地图中缺少的 ID 意味着`Actor`消失（被删除）。

# regex - 使用正则表达式解析过滤条件

> ID：12331045
> 
> 赞同：1
> 
> 时间：2012-09-08T13:15:52.157
> 
> 标签：regex, scala, regex-greedy

我正在尝试使用正则表达式解析一个简单的过滤条件

过滤器应具有以下语法：

```
field=value
field:value
field!=value
field<>value
etc... (you get the idea) 
```

我想出了以下（在scala中）

```
val FilterEntry = """^(\w+)(!?)(=|:|<=|>=|<>|<|>)(.*)$""".r
val FilterEntry(v1, v2, v3, v4) = "field!<>value"
v1: String = field
v2: String = !
v3: String = <>
v4: String = value 
```

所以这是一个好的开始

现在我希望正则表达式在没有传递值时捕获（引发错误）

我试过这个（我把最后一组设为非可选）

```
val FilterEntry = """^(\w+)(!?)(=|:|<=|>=|<>|<|>)(.+)$""".r
val FilterEntry(v1, v2, v3, v4) = "field!<>"
v1: String = field
v2: String = !
v3: String = <
v4: String = > 
```

所以问题在于它将运算符识别为“<”，将值识别为“>”，而不是正确地将运算符识别为“<>”并将值识别为“”（如果我用最火的 reg exp 对其进行测试，它正确将运算符识别为 <> 并将值识别为 "")

我想我应该告诉正则表达式贪婪地匹配运算符，但我认为默认情况下是这样的......

- 编辑

我刚刚在网上找到了这个 scala 控制台，为你测试正则表达式 [http://www.simplyscala.com/](http://www.simplyscala.com/)

--

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T13:35:00.543

他们很贪婪，是的，但这并不意味着他们可能不会回头。为此，您需要一个[所有格量词](http://www.regular-expressions.info/possessive.html)。

试试这个：`^(\w+)(!?)(=|:|<=|>=|<>|<|>){1}+(.+)$`

请注意，运算符中的交替顺序开始很重要......如果`<`替代出现在之前`<=`，`<>`然后匹配引擎将始终`<`首先贪婪地匹配，然后甚至不尝试匹配更长的`<=`或`<>`选项。如果您只是按长度从最长到最短对备选方案进行排序，那么您永远不会遇到这个问题。

# java - 定义异常类列表 - 类型不匹配错误

> ID：12331049
> 
> 赞同：2
> 
> 时间：2012-09-08T13:16:10.110
> 
> 标签：java, list, exception, generics, type-conversion

我正在尝试定义一个异常类列表，如下所示：

```
private static final List<Class<? extends Exception>> SOME_ERRORS = Arrays.asList(NumberFormatException.class, NullPointerException.class); 
```

我从 Eclipse 得到的错误是这样的：

```
Type mismatch: cannot convert from List<Class<? extends RuntimeException>> to List<Class<? extends Exception>> 
```

您能否提一些建议？我不明白为什么它不能将异常列表转换为异常列表......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T13:20:39.550

你应该使用：

```
List<Class<? extends RuntimeException>> SOME_ERRORS = Arrays.asList(NumberFormatException.class, NullPointerException.class); 
```

从返回的泛型类型`Arrays.asList`将始终使用最具体的类型，即`RuntimeException`. 如果您在列表中添加了检查异常，则此语句将变为：

```
List<Class<? extends Exception>> SOME_ERRORS = Arrays.asList(IOException.class, NumberFormatException.class, NullPointerException.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T13:22:49.947

+1 为[Reimeus 的回答](https://stackoverflow.com/a/12331079/751158)。但是，如果您希望保留使用父`Exception`类型声明的列表，这是我能想到的最好的方法（使用 Java 7 语法）：

```
private static final List<Class<? extends Exception>> SOME_ERRORS = new ArrayList<>();
static{
    SOME_ERRORS.add(NumberFormatException.class);
    SOME_ERRORS.add(NullPointerException.class);
} 
```

您的问题是由于`Arrays.asList`自动为您确定正确的列表类型。比较一下，这也可以正常工作：

```
private static final List<Class<? extends Exception>> SOME_ERRORS = Arrays.asList(NumberFormatException.class, NullPointerException.class, Exception.class); 
```

特别是在处理“常量”（`static final`s）时，通常最好建议您确保此类数组/集合不能被修改。在最坏的情况下，这可以避免遇到一些困难的问题。例如：

```
private static final List<Class<? extends Exception>> SOME_ERRORS;
static{
    List<Class< ? extends Exception>> errors = new ArrayList<>();
    errors.add(NumberFormatException.class);
    errors.add(NullPointerException.class);

    SOME_ERRORS = Collections.unmodifiableList(errors);
} 
```

# java - Android 模拟器“启动器没有响应您要关闭它吗？

> ID：12331053
> 
> 赞同：5
> 
> 时间：2012-09-08T13:16:25.837
> 
> 标签：java, android, eclipse, android-emulator

我正在尝试在 Eclipse 上启动我的模拟器，但每次等待一段时间后我都会收到此消息

> “启动器没有响应要关闭它吗？”

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-15T15:30:42.417

尝试使用 genymotion 模拟器而不是 android sdk 模拟器。它的启动速度非常快，使用更少的内存。它是作为 android sdk 模拟器的替代品而构建的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T23:29:47.850

此解决方案效果很好：
1- 从以下网址下载和安装英特尔硬件加速执行管理器：
[https](https://software.intel.com/en-us/android/articles/intel-hardware-accelerated-execution-manager)
://software.intel.com/en-us/android/articles/intel-hardware-accelerated-execution-manager 2- 从 SDK Manger 中选择并下载Intel x86 System image
![在此处输入图像描述](../Images/bdbe6b756e9326ac75a368a7927110d6.png)
3- 创建一个新的 AVD 并选择 CPU/ABI 为：intel atom x86
![在此处输入图像描述](../Images/e009c8a72cde90e87027aedc287a90c8.png)
4- 检查使用主机 GPU
现在保存并启动您的新 AVD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T22:06:51.737

这可能是因为您的虚拟设备正在尝试使用您尚未安装的资源。例如，您很可能在未正确配置的情况下将 GPU 加速设置为 ON（“选中使用主机 GPU”）。如果您想了解它是如何完成的，请查看 Vika 对这个问题的回答：[为什么 Android 模拟器这么慢？我们如何加快Android模拟器的速度？](https://stackoverflow.com/questions/1554099/why-is-the-android-emulator-so-slow?rq=1)

# xcode - UISegmentedController 下推视图

> ID：12331054
> 
> 赞同：1
> 
> 时间：2012-09-08T13:16:41.153
> 
> 标签：xcode, uitableview, uiview, uisegmentedcontrol

每次按下同一段后，我的表格视图控制器都会从视图中向下推，大约一个单元格的大小。任何人有想法为什么会发生？其他不包含任何表视图的视图工作正常。这是它的样子![在此处输入图像描述](../Images/415d49ef4b3be923a36d4cf0bf1024d1.png)

**编辑：**评论中的代码：

```
- (void)indexDidChangeForSegmentedControl:(UISegmentedControl *)aSegmentedControl {
    NSUInteger index = aSegmentedControl.selectedSegmentIndex;
    UIViewController * incomingViewController = [self.viewControllers objectAtIndex:index];
    NSArray * theViewControllers = [NSArray arrayWithObject:incomingViewController];
    [self.navigationController setViewControllers:theViewControllers animated:NO];
    incomingViewController.navigationItem.titleView = aSegmentedControl;
}

- (void)tableView: (UITableView*)tableView willDisplayCell: (UITableViewCell*)cell forRowAtIndexPath: (NSIndexPath*)indexPath {
    cell.backgroundColor = indexPath.row % 2 ? [UIColor colorWithRed:216.0f/255.0f green:235.0f/255.0f blue:213.0f/255.0f alpha:1.0f] : [UIColor colorWithRed:178.0f/255.0f green:107.0f/255.0f blue:146.0f/255.0f alpha:1.0f];
    cell.textLabel.font = [UIFont fontWithName:@"CaviarDreams" size:23];
    cell.textLabel.textColor = indexPath.row % 2 ?[UIColor colorWithRed:178.0f/255.0f green:107.0f/255.0f blue:146.0f/255.0f alpha:1.0f] :[UIColor colorWithRed:216.0f/255.0f green:235.0f/255.0f blue:213.0f/255.0f alpha:1.0f];
    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.detailTextLabel.backgroundColor = [UIColor clearColor];
} 
```

# android - android Google Map 无法在 TabHost 中加载

> ID：12331063
> 
> 赞同：0
> 
> 时间：2012-09-08T13:17:26.940
> 
> 标签：android, google-maps

经过几天的惊慌和沮丧，我认为我的 API 密钥是错误的，我发现只有当它是屏幕的主要内容时，我的 MapView 才会加载到我的应用程序中。

每次我尝试将其附加到 TabHost 或尝试`getDecorView()`在已存在的视图中加载它时，地图都不会加载，我只会得到一张空白地图。

在 TabHost 中使用对我来说非常重要。

有人知道如何解决它或为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T13:34:52.853

最后，托管 a 的活动`MapView` *必须*是 a `MapActivity`，至少在 Android 地图插件的当前版本中是这样。

这可能会导致混乱或彻底的问题，您试图让活动成为其他东西。

例如，有些人尝试使用`TabActivity`, 并使用活动作为选项卡的内容。现在正式弃用了，恕我直言，从一开始就不是一个特别好的模型。当涉及到地图时，即使您尝试加载到选项卡中的活动是 a `MapActivity`，这并不重要 -*包含选项卡*的活动必须是 a `MapActivity`。常见的解决方法`TabHost`是`TabWidget`在`MapActivity`. 虽然这确实需要调用`setup()`on `TabHost`，并且您丢失了一些辅助方法，但它解决了这个问题。

# php - 拒绝访问 php 文件，但允许子目录中的一些其他 php 文件

> ID：12331065
> 
> 赞同：0
> 
> 时间：2012-09-08T13:17:35.650
> 
> 标签：php, apache, .htaccess, subdirectory

我有一个名为“模板”的目录。有一些 php 文件我不希望人们直接访问它们，所以我在 htaccess 中写了这个：

```
<Files *.php>
    Order Deny,Allow
    Deny from all
</Files> 
```

还有一些文件我希望人们可以直接访问它们，这些文件被命名为：

> switcher.php、switcher1.php、switcher2.php、switcher3.php、switcher4.php、switcher5.php

并且位于`template/styles/theme/`

所以我在那个位置创建了一个新的 htaccess 文件并写了这个：

```
<FilesMatch "^switcher[1-5]?\.php$">
    Order Allow,Deny
    Allow from all
</FilesMatch> 
```

这在我的本地主机上效果很好，但是当我在 cPanel 共享主机上上传脚本时，它在那里不起作用。拒绝访问所有 php 文件。

我能做些什么来解决这个问题？

我不能要求主机进行更改，因为这个脚本应该安装在至少 30 台不同配置的共享主机上！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:31:47.120

如果您有一个包含 PHP 包含的目录，并且您不希望直接从浏览器访问，则可以使用`Mod_Rewrite`.

要启用此功能，请按照主要说明和指导创建一个`.htaccess`文件，并包含以下文本：

```
## Enable Mod Rewrite, this is only required once in each .htaccess file
RewriteEngine On
RewriteBase /
## Test for access to includes directory
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /includes/ .*$ [NC]
## Test that file requested has php extension
RewriteCond %{REQUEST_FILENAME} ^.+\.php$
## Forbid Access
RewriteRule .* - [F,NS,L] 
```

其中 /includes/ 是您的包含目录。

*注意：我强烈建议将您不想被用户直接访问的文件存储在单独的目录/文件夹中。不用担心，您可以使用`include`方法访问这些文件。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:21:17.570

检查`REQUEST_URI`每个文件：

```
$file = basename(__FILE__);
if(preg_match("/$file/", $_SERVER['REQUEST_URI'])){
    die('This file cannot be accessed directly!');
} 
```

# c++ - 仅当 T 具有该方法时才调用 T 的方法

> ID：12331073
> 
> 赞同：0
> 
> 时间：2012-09-08T13:18:46.440
> 
> 标签：c++, templates, c++11

> **可能重复：**
> [是否可以编写 C++ 模板来检查函数是否存在？](https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-c-template-to-check-for-a-functions-existence)

我正在尝试做一种编译时的鸭子类型。如果 T 有它，我想调用该方法，否则什么也不做。这可以实现为什么都不做的模板函数，并具有调用该方法的特化。但是只有当 T 有一个 foo() 时如何选择专业化？

# php - 无法使用 htaccess 删除 index.php

> ID：12331074
> 
> 赞同：0
> 
> 时间：2012-09-08T13:18:49.280
> 
> 标签：php, apache, .htaccess, codeigniter

当我尝试删除 index.php 和访问控制器时：mysite.com/admin 我不断收到内部服务器错误。我不知道为什么它不起作用。

.htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /code/

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

站点配置

```
<Directory /home/mysite.com/public_html/>
Options Indexes Includes FollowSymLinks MultiViews
AllowOverride AuthConfig FileInfo
Order allow,deny
Allow from all
</Directory> 
```

阿帕奇错误日志

```
[Sat Sep 08 15:24:30 2012] [error] [client 176.106.162.240] 
Request exceeded the limit of 10 internal redirects 
due to probable configuration error. Use 'LimitInternalRecursion' 
to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:31:26.153

更改 .htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /code/

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

进入这个：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php [L,NC] 
```

我不相信你需要别的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:39:43.867

没有详细查看它，我发现了一个问题`RewriteBase /code/`

尝试`RewriteBase /`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T12:00:53.703

```
You just need to create .htaccess file in project folder and write:

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL 
RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 

</IfModule>
<IfModule !mod_rewrite.c>
   #ErrorDocument 404 index.php
</IfModule>

 #And You don't need to define in base_url in config file:

 $config['base_url'] = '';// blank it.

 I hope it will work perfectly ... 
```

# oop - 对于 DSL 的传统编译器开发，Eclipse 建模框架有哪些附加功能？

> ID：12331076
> 
> 赞同：0
> 
> 时间：2012-09-08T13:19:00.817
> 
> 标签：oop, compiler-construction, abstract-syntax-tree, eclipse-emf

我想了解 Eclipse 建模框架 ( [EMF](http://www.eclipse.org/modeling/emf/) ) 相对于 DSL 的传统编译器开发的补充功能。

我清楚地理解 EMF 开发流程通常始于元模型的定义（或标准化模型的重用；如 UML），但这似乎与编译器中 AST 定义（例如 00 语言）的活动没有太大区别民俗学。由于异构技术，这甚至增加了补充工作。

然而我猜想，元模型通常可能比 AST 类具有更多的信息，因为它们显示为图形，因此 EMF 工具可以利用这些信息进行上下文检查。这就是区别吗？值得付出努力吗？

我也明白像 Xtext 这样的工具可能会以某种方式填补两个社区之间的空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:53:38.227

抽象语法树是一种纯数据结构。与此相反，EMF 模型由 EClassifiers 表示的数据及其 EAttributes 和 EReferences 以及由 EOperations 表示的行为组成。

> 然而，我猜想元模型通常比 AST 类具有更多的信息

所以，是的，你是对的。EMF 元模型包含的更多信息是操作。

> 值得努力吗？

这在很大程度上取决于您的用例。定义行为及其操作的数据通常被认为是良好的 OO 实践。

# handlebars.js - handlebars.js 是否将换行符替换为 ?

> ID：12331077
> 
> 赞同：44
> 
> 时间：2012-09-08T13:19:56.073
> 
> 标签：handlebars.js, client-side-templating

尝试使用 handlebars.js 进行模板化，但该库似乎忽略了换行符。

处理换行符的正确方法是什么？是否应该在模板操作之后手动替换它们？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-12T23:51:23.423

它不会自动这样做，但使用助手功能可以实现：

JS：

```
Handlebars.registerHelper('breaklines', function(text) {
    text = Handlebars.Utils.escapeExpression(text);
    text = text.replace(/(\r\n|\n|\r)/gm, '<br>');
    return new Handlebars.SafeString(text);
}); 
```

HTML 模板：

```
<div>
    {{breaklines description}}
</div> 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-08-02T21:10:40.183

通过插入三个大括号而不是传统的两个大括号，您可以指示把手停止其转义 html 表达式的常规技术，例如`<br>`and `<p>`;

例如，来自车把网站：

“Handlebars HTML 转义 a 返回的值`{{expression}}`。如果您不希望 Handlebars 转义值，请使用“triple-stash”，。`{{{`”

```
 <div class="entry">
      <h1>{{title}}</h1>
      <div class="body">
        {{{body}}}
      </div>
    </div> 
```

在这种情况下：

```
 {
      title: "All about <p> Tags",
      body: "<p>This is a post about &lt;p&gt; tags</p>"
    } 
```

结果是：

```
 <div class="entry">
      <h1>All About &lt;p&gt; Tags</h1>
      <div class="body">
        <p>This is a post about &lt;p&gt; tags</p>
      </div>
    </div> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-11-08T13:46:08.647

与当前接受的答案相比，我更喜欢以下两种方法：

1.  在要保留换行符的元素上使用`white-space: pre-wrap;`或（分别允许或抑制自然换行）。`white-space: pre;`如果您希望折叠空白序列，这是 HTML 中的文本通常呈现的方式，请使用`white-space: pre-line;`但请注意 IE8 及以下版本不支持此功能。[https://developer.mozilla.org/en-US/docs/Web/CSS/white-space](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)
2.  或者这里有一个不需要复制和粘贴外部代码的模板助手版本：

    ```
    Template.registerHelper('breaklines', function (text) {
      text = Blaze._escape(text);
      text = text.replace(/(\r\n|\n|\r)/gm, '<br>');
      return new Spacebars.SafeString(text);
    }); 
    ```

    请参阅[https://github.com/meteor/meteor/blob/devel/packages/blaze/preamble.js](https://github.com/meteor/meteor/blob/devel/packages/blaze/preamble.js)了解`Blaze._escape`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-26T14:05:48.827

任何使用三重连接的解决方案都会使您的应用程序遭受 XSS 攻击，除非您实施某种措施来清理 HTML。

我建议使用`<pre>`标签而不是创建自定义助手。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T14:56:21.403

我使用了@Uri 发布的代码，它非常有用。

但是我意识到，当我注册 helper 时，它接收的函数参数不是文本，而是在 Handlebars 模板中调用的函数。所以首先我必须调用它来获取文本。

为了澄清，我必须这样做：

```
Handlebars.registerHelper('breaklines', function(descriptionFunction) {
    text = descriptionFunction();
    text = Handlebars.Utils.escapeExpression(text);
    text = text.toString();
    text = text.replace(/(\r\n|\n|\r)/gm, '<br>');
    return new Handlebars.SafeString(text);
}); 
```

这是我让它工作的唯一方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-20T11:34:16.037

对于像我这样遵循入门代码并且不知道为什么没有显示 HTML 的其他人。

在[车把表达式文档](https://handlebarsjs.com/expressions.html)中 它指出

> Handlebars HTML 转义 {{expression}} 返回的值。如果您不希望 Handlebars 转义值，请使用“triple-stash”，{{{

# parsing - Yacc 中定义了减少的顺序吗？

> ID：12331080
> 
> 赞同：6
> 
> 时间：2012-09-08T13:20:42.663
> 
> 标签：parsing, bison, yacc, parser-generator, lalr

这更像是一个“原则上”的问题，而不是一个实际的问题。是 Yacc 减少产生式并从定义的词法分析器中读取新标记的顺序。也就是说，如果我有以下一组令牌：

```
INTEGER_BEGIN
INTEGER_VALUE
LESS_THAN
INTEGER_BEGIN
INTEGER_VALUE 
```

Yacc 是否可以在其语义范围内`LESS_THAN`从词法分析器中读取标记，然后再将其简化`INTEGER BEGIN INTEGER_VALUE`为单个事物，给定一组产生式，例如：

```
expr : expr LESS_THAN expr
     | integer

integer : INTEGER_BEGIN INTEGER_VALUE 
```

如果这些规则是用语义动作定义的，这些规则会改变吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T20:48:33.273

是的，它可以。Yacc 创建了一个 LALR(1) 解析器——(1) 表示前瞻的 1 个标记——因此它可以在减少规则之前提前读取 1 个标记超出规则的标记末尾。语义动作的存在是无关紧要的，因为语义动作只是在减少规则之前运行的一些 C 代码。

请注意，不能保证它总是会提前读取令牌。由 yacc 或 bison 创建的解析器有时会使用“默认归约”——表明它可以归约规则而不必先读取下一个标记。只要规则的减少与下一个标记无关，就会发生这种情况。

在这个特定的例子中，可以对`integer`规则使用默认缩减，因此它可能会在没有前瞻的情况下缩减它，但同样不能保证——默认缩减是 yacc 的某些（但不是全部）实现使用的优化。

# vim - 我可以将当 前搜索词设置为视觉块吗？

> ID：12331081
> 
> 赞同：7
> 
> 时间：2012-09-08T13:20:45.333
> 
> 标签：vim

假设我想在文件中搜索一些文本块。有没有办法对该文本进行视觉块选择，然后使其成为当前搜索词？这样我就可以 s//replacementText/g 而不在替换命令的左侧输入整个内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T13:42:22.280

制作一个可视块并将其拉到未命名的寄存器`""`：选择可视块后，键入`y`要拉。`/`以- 或开始搜索，然后`:s/`键入`Ctrl-r`then`"`以插入未命名寄存器的内容作为搜索词。

这不会使该块成为当前搜索，但它几乎一样容易。

`Ctrl-r`可以在命令行中的任何地方使用，因此您也可以使用它来填充替换或替换文本，或在插入模式下使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T13:47:10.347

你必须原谅我，我不记得我在哪里找到的，但它很有效。只需添加到您的`.vimrc`. 使用您的典型`*`并`#`在视觉选择后：

```
" Search for selected text, forwards or backwards.
vnoremap <silent> * :<C-U>
  \let old_reg=getreg('"')<Bar>let old_regtype=getregtype('"')<CR>
  \gvy/<C-R><C-R>=substitute(
  \escape(@", '/\.*$^~['), '\_s\+', '\\_s\\+', 'g')<CR><CR>
  \gV:call setreg('"', old_reg, old_regtype)<CR>
vnoremap <silent> # :<C-U>
  \let old_reg=getreg('"')<Bar>let old_regtype=getregtype('"')<CR>
  \gvy?<C-R><C-R>=substitute(
  \escape(@", '?\.*$^~['), '\_s\+', '\\_s\\+', 'g')<CR><CR>
  \gV:call setreg('"', old_reg, old_regtype)<CR> 
```

这里真正的优势在于它可以转义任何特殊字符，而不是仅仅粘贴到搜索命令中。它还减少了击键次数，从而最大限度地提高了您的任务的活力。

# r - ggplot2 使用 scale_colour_manual 访问默认颜色？

> ID：12331083
> 
> 赞同：3
> 
> 时间：2012-09-08T13:21:06.413
> 
> 标签：r, colors, ggplot2

我`scale_colour_manual`用来指定我需要的可能颜色。但是，如果我选择`red`我会得到令人眼花缭乱的红色，而不是我一开始不使用时会出现的较温和的 ggplot2 默认红色`scale_colour_manual`。访问 ggplot2 默认调色板的标签或常量是什么？

```
 ggplot(data=df, aes(x=n, y=rt, group=kernel, shape=kernel, colour=kernel)) + 
     geom_point(fill="white", size=3) + geom_line() + xlab("n") + ylab("Runtime (s)") + 
     opts(title=title,plot.title=theme_text(size=font.size)) + 
     scale_colour_manual(values=c("grey30", "red")) + 
     opts(legend.position = c(x_shift,0.87),legend.background=theme_rect(fill = "transparent",colour=NA)) 
```

请注意，使用 'red30' 不起作用，它只适用于灰色，出于某种我不知道的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T01:30:54.773

`red30`不起作用，因为没有只有 30% 的*颜色*的概念，尽管有 30% 的灰色阴影的概念（即黑色和白色之间的 30%。）

如果你想要一个不刺眼的红色，`scale_color_manual`你需要在[RGB](http://en.wikipedia.org/wiki/RGB_color_model)中指定颜色，即。通过使用三个字节来表示十六进制的红色绿色和蓝色。像这样的东西应该工作

```
ggplot(data=df, aes(x=n, y=rt, group=kernel, shape=kernel, colour=kernel)) + 
 geom_point(fill="white", size=3) + geom_line() + xlab("n") + ylab("Runtime (s)") + 
 opts(title=title,plot.title=theme_text(size=font.size)) + 
 scale_colour_manual(values=c("grey30", "#EF8A62")) + 
 opts(legend.position = c(x_shift,0.87),legend.background=theme_rect(fill =  "transparent",colour=NA)) 
```

如果您不知道如何使用这种颜色编码，请参阅[此](http://www.w3schools.com/html/html_colors.asp)。我不知道如何以编程方式提取 ggplot 使用的颜色，但您始终可以将使用标准颜色生成的绘图加载到某些图像编辑器（例如 Gimp）中，然后找出确切的颜色代码是什么。[您可以在colorbrewer](http://colorbrewer2.org/)上找到很好的配色方案，但请注意，它`ggplot2`已经为那些提供了功能：[`scale_brewer`](http://had.co.nz/ggplot2/scale_brewer.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-31T10:49:10.207

ggplot2 中使用的默认“淡红色”和“淡蓝色”分别具有 和 的十六进制代码，以及 RGB 代码`#f8766d`和分别。要指定这些：`#00b0f6``248,118,109``0,176,246``scale_colour_manual`

```
scale_colour_manual(values=c("#f8766d", "#00b0f6")) 
```

# objective-c - 带有全局变量和属性变量的意外输出

> ID：12331090
> 
> 赞同：0
> 
> 时间：2012-09-08T13:22:05.400
> 
> 标签：objective-c, xcode

如果我运行以下程序，我会得到`Sum = 0`. 但是如果我移动 he 语句`int a = 5`和`int b = 6 inside -(int)sum {...}`，我得到的输出是 11。我当然明白为什么我在第二种情况下得到了正确的解决方案。`Sum = 0`但是当我定义与变量同名的全局变量时，为什么会得到`@property`呢？编译器是否赋予`@property`变量高于全局变量的优先级？

// 新函数.h:

```
@interface newFunction : NSObject

@property int a,b;
-(int)sum;

@end 
```

// 新函数.m

```
@implementation newFunction

@synthesize a,b;

int a = 5;
int b = 6;

-(int)sum
{
    return (a+b);
}

@end 
```

//main.m

```
@autoreleasepool {

        newFunction *var1 = [[newFunction alloc] init];
        NSLog(@"Sum = %i", [var1 sum]);       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:00:22.083

首先，这些不是全局变量。这些是实例变量。第二 - 是的，编译器给@synthesize 定义的变量更高的优先级。

# javascript - processing.js 如何检测浏览器的大小？

> ID：12331094
> 
> 赞同：8
> 
> 时间：2012-09-08T13:22:26.057
> 
> 标签：javascript, browser, responsive-design, processing.js

如前所述，processing.js 如何响应浏览器的大小？（响应式设计）我尝试过 screen.width 和 screen.height 但效果不佳。它似乎只检测计算机屏幕大小的大小。

**更重要的是，我想在拖动和更改浏览器大小时跟上窗口大小**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T13:29:24.847

```
 size(window.innerWidth, window.innerHeight); 
```

根据[https://groups.google.com/forum/?fromgroups=#!topic/processingjs/2-U_P7_BHlY](https://groups.google.com/forum/?fromgroups=#!topic/processingjs/2-U_P7_BHlY)

或者

```
void setup() {
size( $(window).width(),
    $(window).height() );
...
} 
```

根据[Get Viewport Width With JQuery and Use In Processing JS](https://stackoverflow.com/questions/4631933/get-viewport-width-with-jquery-and-use-in-processing-js)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T22:49:23.123

以下是我使用 Zerb Foundation 3 响应式 Web 框架、Javascript、jQuery 和 Processing.js 解决此问题的方法。如果您想深入了解源代码，可以查看[Living Map Project 。](http://www.livingmapproject.com/)

在 javascript/jquery 中：

```
// handle page resizing
$(window).resize(function() {
var pjs = Processing.getInstanceById('livingmap');
pjs.resizeSketch(document.getElementById('div_p5canvas').offsetWidth,  document.getElementById('div_p5canvas').offsetHeight);
} ); 
```

在您的 .pde 处理 js 代码中（注意：使用 zurb 的基础 3、我定义的网格以及如何将其转换为像素，我觉得计算效果很好：

```
void resizeSketch(int w, int h) {
  if (w < 680) {
    size(w, floor(float(w)/680*610) - 30);
    } else size(680, 610 - 30);
} 
```

在您的 html 中：

```
<div class="flex-video widescreen" id="div_p5canvas"
<canvas id="livingmap" data-processing-sources="livingmap_2.pde" style="height:auto; width:auto; focus { outline: 0; }" tabindex="1"></canvas>
</div> 
```

# javascript - jquery，在 html() 调用后继续阅读

> ID：12331099
> 
> 赞同：0
> 
> 时间：2012-09-08T13:22:56.897
> 
> 标签：javascript, jquery

以下 Javascript 代码：

```
o_value.html(); 
```

给我吗

```
<span id="legaloffice_city_value">some text</span> 
```

我现在想要的只是修改 javascript 代码，以获得：`legaloffice_city_value`. 我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T13:25:51.933

```
o_value.find("span")[0].id 
```

工作示例：http: [//jsfiddle.net/6wUsT/](http://jsfiddle.net/6wUsT/)

我们在这里使用该`[0]`部分的原因是 jquery`find()`函数将根据提供的选择器（在我们的例子中为`span`标签名称）返回所有匹配元素的集合。

所以我们应该使用索引器来访问我们在集合中的项目。试一试，让我知道

# c# - 设置日期选择器上选择的日期值

> ID：12331100
> 
> 赞同：0
> 
> 时间：2012-09-08T13:23:07.303
> 
> 标签：c#, javascript, asp.net

我正在尝试在我的 asp.net 网页上获取日期选择器。我已经能够使用母版页运行相同的代码并且它可以工作，但现在我试图让它在没有母版页的情况下工作，我收到错误消息：错误：无法获取属性的值'aspnetForm.ctl00_txtDOB': 对象为空或未定义

在我的 Default.aspx 页面上......

```
<script language="javascript" type="text/javascript">
    function calendarPicker(strField) {
        window.open('date_picker.aspx?field=' + strField, 'calendarPopup', 'width=250,height=190,resizable=yes');
    } 

        <label>DOB:</label><asp:TextBox ID="txtDOB" runat="server"></asp:TextBox>
       <img src="images/calendar.gif" alt="Pick To Date" onclick="calendarPicker('aspnetForm.ctl00_txtDOB');"/>

      I already tried onclick="calendarPicker('txtDOB');"/>

My date_picker.aspx.cs
        private void Calendar1_DayRender(object sender, System.Web.UI.WebControls.DayRenderEventArgs e)
        {

            // Clear the link from this day
            e.Cell.Controls.Clear();

            // Add the custom link
            System.Web.UI.HtmlControls.HtmlGenericControl Link = new System.Web.UI.HtmlControls.HtmlGenericControl();
            Link.TagName = "a";
            Link.InnerText = e.Day.DayNumberText;
            Link.Attributes.Add("href", String.Format("JavaScript:window.opener.document.{0}.value = \'{1:d}\'; window.close();", Request.QueryString["field"], e.Day.Date));

            // By default, this will highlight today's date.
            if (e.Day.IsSelected)
            {
                Link.Attributes.Add("style", this.Calendar1.SelectedDayStyle.ToString());
            }

            // Now add our custom link to the page
            e.Cell.Controls.Add(Link);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:38:53.170

尝试改变这个：

```
onclick="calendarPicker('aspnetForm.ctl00_txtDOB');" 
```

对此：

```
onclick="calendarPicker('<%=txtDOB.ClientID %>');" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:46:27.243

我通过这样做使它工作：

添加表单[0].... window.opener.document.forms[0].{0}.value..........

Link.Attributes.Add("href", String.Format("JavaScript:window.opener.document.forms[0].{0}.value = \'{1:d}\'; window.close(); ", Request.QueryString["field"], e.Day.Date));

# android - 带有 IntelliJ Idea ClassNotFoundException 的 Android 上的 Scala

> ID：12331101
> 
> 赞同：1
> 
> 时间：2012-09-08T13:23:33.607
> 
> 标签：android, scala, intellij-idea, classnotfoundexception

我尝试将 sbt 和 maven 用于 android-scala，我非常喜欢 maven 来完成整个发布工作（ProGuard-ing scala 标准库等）。但我想要在我的 IDE - IntelliJ IDEA 中进行轻量级的重新编译循环进行开发。

问题是 scala 文件无法编译。我这样配置我的项目：

*   创建安卓项目
*   添加了scala方面
*   将 Scala 编译器设置为全局
*   添加了对 scala 库（全局）的依赖并将其设置为“提供”

我添加了一个 scala 对象并从 java Activity 中引用它。ClassNotFoundException 并强制关闭。它编译干净（而且非常快）。

我以相同的方式创建了一个普通的旧 java 项目，并使用相同的全局库，它工作正常。对 apk 的检查显示它包含 scala 源（！）文件。所以显然它没有尝试编译。

哦，我的手机已经预装了来自 Play 商店的 scala 安装程序。

我使用 IntelliJ IDEA 11 社区。几个月前我第一次尝试这个，它奏效了。

**更新**它可以在不同的机器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:34:01.803

您可能不得不摆弄您的“proguard.cfg”文件。

这是我在使用 Scala 2.10 和 Android 以及 IntelliJ IDE 的项目中使用的一个（更改第一个选项以匹配您的包名称）：

```
##
## Keep classes of named package
##
-keep public class **.keithpinson.**
## ## ## ## ## ## ## ## ## ## ## ## ##

##
## RELEASE ONLY
##
##-optimizationpasses 3
##-overloadaggressively
##-repackageclasses ''
##-allowaccessmodification
##-optimizations !code/simplification/arithmetic
##         ,!field/*,!class/merging/*,!code/allocation/variable
##-keepattributes *Annotation*

##
## DEBUG ONLY
##
-dontobfuscate
-dontoptimize
-keepattributes Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,*Annotation*,EnclosingMethod
## -printmapping mapping.txt

##
## ALL VERSIONS
##
-dontpreverify
-dontskipnonpubliclibraryclasses
-dontskipnonpubliclibraryclassmembers
-dontusemixedcaseclassnames

## Keep Limited Serializable Capability
##-keepclassmembers class * implements java.io.Serializable {
##    static long serialVersionUID;
##    private void writeObject(java.io.ObjectOutputStream);
##    private void readObject(java.io.ObjectInputStream);
##    java.lang.Object writeReplace();
##    java.lang.Object readResolve();
##}

## Keep All Serializable Capability
##-keep class * implements java.io.Serializable { *; }"

##
## ANDROID SETTINGS
##
-dontwarn com.google.common.collect.MinMaxPriorityQueue
-dontwarn com.google.common.primitives.UnsignedBytes$*

-dontnote android.app.backup.BackupAgentHelper
-dontnote com.android.vending.licensing.ILicensingService

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

# R classes may be built out of sequence so don't proguard them
-keep public class **.R { *; }
-keepclassmembers class **.R$* {
    public static <fields>;
}

# Removes all calls to Log. Delete the methods you want to keep.
-assumenosideeffects class android.util.Log {
    public static int v(...);
    #public static int d(...);
    public static int i(...);
    #public static int w(...);
    #public static int e(...);
    #public static int wtf(...);
}

## Fixes ==> Warning: ... can't find referenced class javax.xml.stream.events.XMLEvent
## -dontwarn javax.xml.**

## If using Guice
## -keep class com.google.common.base.Finalizable* {
##   <fields>;
##   <methods>;
## }
##
## -keep class com.google.common.base.internal.Finalizer {
##   <fields>;
##   <methods>;
## }

##
## SCALA SETTINGS
##
-dontwarn **$$anonfun$*
-dontwarn scala.android.**
-dontwarn scala.beans.ScalaBeanInfo
-dontwarn scala.collection.generic.GenTraversableFactory
-dontwarn scala.collection.immutable.RedBlack$Empty
-dontwarn scala.concurrent.forkjoin.**
-dontwarn scala.reflect.**
-dontwarn scala.sys.process.**
-dontwarn scala.tools.**,plugintemplate.**

#(org.xml.sax.EntityResolver)Class.forName(variable).newInstance()
-dontnote org.xml.sax.EntityResolver

#(org.apache.james.mime4j.storage.StorageProvider)Class.forName(variable).newInstance()
-dontnote org.apache.james.mime4j.storage.DefaultStorageProvider

-dontnote scala.android.app.Activity

## Keep All Scala Classes
##-keep class scala.** { *; }

-keep class scala.android.package**
-keep class * extends scala.android.app.Activity

## Fixes ==> Warning: ... can't find referenced class sun.misc.Unsafe
-libraryjars libs/jsr305-2.0.1.jar
-dontwarn sun.misc.Unsafe

-keep class * extends scala.runtime.MethodCache {
    public <methods>;
}

-keepclassmembers class * {
    ** MODULE$;
}

-keepclassmembernames class scala.concurrent.forkjoin.ForkJoinPool {
    long eventCount;
    int workerCounts;
    int runControl;
    scala.concurrent.forkjoin.ForkJoinPool$WaitQueueNode syncStack;
    scala.concurrent.forkjoin.ForkJoinPool$WaitQueueNode spareStack;
}

-keepclassmembernames class scala.concurrent.forkjoin.ForkJoinWorkerThread {
    int base;
    int sp;
    int runState;
}

-keepclassmembernames class scala.concurrent.forkjoin.ForkJoinTask {
    int status;
}

-keepclassmembernames class scala.concurrent.forkjoin.LinkedTransferQueue {
    scala.concurrent.forkjoin.LinkedTransferQueue$PaddedAtomicReference head;
    scala.concurrent.forkjoin.LinkedTransferQueue$PaddedAtomicReference tail;
    scala.concurrent.forkjoin.LinkedTransferQueue$PaddedAtomicReference cleanMe;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:14:32.197

似乎想法会在取消选中 Run ProGuard on Android facet 时使用系统 proguard 配置来优化 jar，简单取消选中它似乎不起作用，所以你需要为 proguard 使用一些自定义配置，试试这个，它对我有用，拜托用你的包裹替换 REPLACE WITH YOUR PACKAGE

当然，你可以试试 Keith 的配置。

```
-dontobfuscate
-dontoptimize
-dontpreverify

-dontskipnonpubliclibraryclasses
-dontskipnonpubliclibraryclassmembers

-dontwarn

#scala.Enumeration accesses a field 'MODULE$' dynamically
-dontnote scala.Enumeration

#(org.xml.sax.EntityResolver)Class.forName(variable).newInstance()
-dontnote org.xml.sax.EntityResolver

#(org.apache.james.mime4j.storage.StorageProvider)Class.forName(variable).newInstance()
-dontnote org.apache.james.mime4j.storage.DefaultStorageProvider

-keepattributes Exceptions,InnerClasses,Signature,Deprecated,
            SourceFile,LineNumberTable,Annotation,EnclosingMethod

-keep public class REPLACE WITH YOUR PACKAGE 
```

[https://plus.google.com/106066742926663025812/posts/41XoDPeDEqc](https://plus.google.com/106066742926663025812/posts/41XoDPeDEqc)

# spring - 搜索带有注释的scala缓存框架（spring + ehcache）

> ID：12331102
> 
> 赞同：1
> 
> 时间：2012-09-08T13:23:42.413
> 
> 标签：spring, scala, caching, guava, ehcache

我目前正在为我们的 scala 应用程序使用 spring AOP + Ehcache。我真的很喜欢将它与注释一起使用的简单性，但不是使用像 spring 这样的大框架来执行缓存的一部分。

你知道 scala 缓存解决方案而不必使用像 spring 这样的大框架吗？

没有春天的东西：

```
 @Cacheable(cacheName = "users")
 def getByUserName(userName: String): User = {
   val userEntityFound = dao.findOne(dao.createQuery.field("email").equal(userName))
   userEntityMapper mapToDomainObject userEntityFound
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T14:47:01.177

我认为您必须区分缓存库和访问它的 API。我见过的在 Scala 环境中使用的缓存库与在 Java 环境中使用的缓存库相同。对于（可能）分布式缓存，使用 Ehcache 或 memcached 之类的东西。对于本地缓存，通常使用 guava 库的缓存实用程序。

为本地缓存 API 编写一个包装器是很容易的，以便有一种更符合 scala 习惯的方式来访问缓存。您在示例中使用的注解是访问 Java 中库抽象的常用方法，但在 Scala 世界中并不常见。表演！例如，框架有一个缓存抽象，默认情况下，它绑定到 Ehcache。[它](http://www.playframework.org/documentation/2.0.1/ScalaCache)允许以下构造：

```
val user: User = Cache.getOrElseAs[User]("item.key") {
  User.findById(connectedUser)
} 
```

Twitter 在他们的 scala 实用程序中有一个 guava 缓存的包装器，但删除了它们。我认为是这样，因为在当前的番石榴版本中，直接访问它非常简单/实用。

```
val cache = 
 CacheBuilder.newBuilder().
  maximumSize(1000).
   build((key:String) => q(key)) 
```

例如，如果您在范围内有以下隐式转换，这将正常工作：

```
implicit def functionToCacheLoader[F, T](f: F => T) = {
 new CacheLoader[F, T] {
  def load(key: F) = f(key)
 }
} 
```

最后，向番石榴缓存本身添加一些糖也很容易：

```
implicit def pimpCache[F, T](cache: Cache[F, T]) = {
 new PimpedCache(cache)
}

class PimpedCache[F, T](cache: Cache[F, T]) {
 def getOption(key: F) = {
  val value = cache.getIfPresent(key)
  if(value == null) None else Some(value)
 }    
} 
```

这些是我使用的缓存的主要抽象。这是一个包含我需要的所有代码的[要点的链接。](https://gist.github.com/3675523)我也有一个播放插件！缓存抽象，它在引擎盖下使用番石榴，如果您需要使用它，我可以分享。

# ruby-on-rails - 创建后如何将用户重定向到编辑页面？

> ID：12331105
> 
> 赞同：0
> 
> 时间：2012-09-08T13:23:55.147
> 
> 标签：ruby-on-rails, routing

我有点困惑 - 当用户创建成功时。

我可以打电话（工作）

```
if @wibiya_user.save
 render :edit
end 
```

但是为什么当我写

```
 if @wibiya_user.save
       format.html { redirect_to edit_wibiya_user_path(@wibiya_user) }
   end 
```

我收到路由错误：

```
No route matches {:action=>"edit", :controller=>"wibiya_users"} 
```

但是我的路线确实有：

```
 resources :wibiya_users
 ...
rake routes
  edit_wibiya_user GET    /wibiya_users/:id/edit(.:format) wibiya_users#edit 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:28:27.073

将您的用户控制器（文件名、类名、重定向等）更改为 WibiyaUsersController。

说明：文件`resources :wilibya_user`中的`routes.rb`设置该资源的各种路由。它假设控制器被调用`wibiya_users_controller`

# drupal - Drupal 7：训练轮子还是严肃的开发解决方案？

> ID：12331108
> 
> 赞同：1
> 
> 时间：2012-09-08T13:24:06.317
> 
> 标签：drupal

我正在考虑离开 Drupal，并对其他人的见解感兴趣。

几年前我开始使用 Drupal 进行 Web 开发。我喜欢它的地方在于，我可以使用贡献的模块非常快速地组合一些高级功能，而对 php 或 mysql 知之甚少。

但是我很快意识到，如果我想在一个 drupal 站点中自定义任何东西，如果我想让它看起来很专业，就必须编写代码（除非对于像博客这样非常简单的东西）。在我的第一个 drupal 站点上，我花了 90% 的时间来完成我想做的最后 10% 的事情。当网站看起来像我想要的那样时，由于加载模块、自定义模板和各种 hack，它是如此缓慢，以至于它在共享主机上实际上无法使用。所以我搬到了这个爱好网站的专用服务器。

今天我在一个给定的站点上，我使用的自定义模块比我贡献的模块要多。我真的只使用视图，也许还有 5 个核心模块。我意识到很多模块可以用 3 行 php 替换。问题是很多时候我发现由于某种原因，drupal 以自己的方式做事，php.net 上的文档不起作用，但 drupal.org 上的文档很少，经常搜索直到发现某人的评论“in the know”可以让你解决一个基本问题。我发现 Drupal 阻碍了我的工作流程，而不是加快了我的工作流程。

我的收获是 Drupal 非常适合原型设计，或者如果您从事为客户（而不是为自己）制作大量网站的业务，并且并不真正关心网站是否可扩展。当然，一些大型组织可以将 drupal 变成他们想要的任何东西（whitehouse.gov 等），因为他们可以将工时投入到 mysql 查询优化、服务器集群等等。

但我今天的观点是，一个拥有一台服务器和 php/jquery 平均水平的开发人员最好使用其他东西而不是 drupal 来构建他的 Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T13:33:16.647

如果你问我，这听起来很像缺乏经验。

我想每个人都会同意 Drupal 的学习曲线非常陡峭，但那是因为一旦你知道自己在做什么，它就会非常强大，尤其是在用作多站点时，听起来它可能对你更好。

我会说坚持下去，你很可能正处于这场艰苦斗争的边缘！

当我几年前开始使用它时，我对术语以及有上百万种方法可以做所有事情的事实感到困惑。你知道吗，我很高兴我坚持使用它，这是一个很棒的系统，可以非常好。

如果您想学得更快，请在 drupal.org 上花更多时间帮助他人，这是最快的学习方式！

# c# - 如何将子菜单“绑定”到主菜单？

> ID：12331109
> 
> 赞同：0
> 
> 时间：2012-09-08T13:24:11.343
> 
> 标签：c#, wpf, controls

我知道我的主题的标题选择得不是很好，但我不知道如何描述我的问题。好的返回2主题：

我的应用程序有三个菜单。其中两个相互依赖。在这个例子中，我有三个类别`Cars`：`Trees`和`Students`

在主菜单中有三个按钮，每个按钮处理三个类别之一。在子菜单中还有另外三个控件`Add`：`Remove`和`Print`。

现在，如果我单击`Cars`我希望应用程序激活子菜单中的所有三个按钮，以便用户能够管理他/她的汽车。因此将有一个包含所有现有数据的表，但目前这并不重要。

我现在的问题是如何知道用户按下了哪个类别按钮？只有一个子菜单，如果用户点击`Add`-Button，应用程序必须知道它应该向哪个类别添加新条目。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:40:40.793

您是否尝试使用 3 个不同的命令，但想知道它是从哪个类别中选择的。

如果是这样，那么您可以使用 CommandParameter 来指示类别 - 命令参数数据将在调用时传递到`CanExecute()`/`Execute()`中。

（忽略下面重复的 ApplicationCommands.Cut……我只是将它们用于在 KAXAML 中进行测试……只需将其替换为您定义的添加、删除或打印命令）。

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Menu>
       <MenuItem Header="Cars">
        <MenuItem Header="Add" Command="ApplicationCommands.Cut" CommandParameter="Cars"/>
        <MenuItem Header="Remove" Command="ApplicationCommands.Cut" CommandParameter="Cars"/>
        <MenuItem Header="Print" Command="ApplicationCommands.Cut" CommandParameter="Cars"/>
      </MenuItem>
       <MenuItem Header="Trees">
        <MenuItem Header="Add" Command="ApplicationCommands.Cut" CommandParameter="Trees"/>
        <MenuItem Header="Remove" Command="ApplicationCommands.Cut" CommandParameter="Trees"/>
        <MenuItem Header="Print" Command="ApplicationCommands.Cut" CommandParameter="Trees"/>
      </MenuItem>
       <MenuItem Header="Students">
        <MenuItem Header="Add" Command="ApplicationCommands.Cut" CommandParameter="Students"/>
        <MenuItem Header="Remove" Command="ApplicationCommands.Cut" CommandParameter="Students"/>
        <MenuItem Header="Print" Command="ApplicationCommands.Cut" CommandParameter="Students"/>
      </MenuItem>
  </Menu>
</Page> 
```

# css - GZIP CSS 完全打破页面

> ID：12331110
> 
> 赞同：6
> 
> 时间：2012-09-08T13:24:13.307
> 
> 标签：css, .htaccess, compression, gzip, zlib

感谢您的光临。我真的自己尝试过，但又一次对我来说似乎太多了。

## 情况...

* * *

我在共享主机上使用自己的网站。当我想要压缩大量 cms 生成的 js 和 css 以使 PageSpeedInsights 和我自己开心时，我读了进去，最后发现**我的主机既没有 mod_gzip 也没有 mod_deflate 安装**。安装的是ZLIB。所以我搜索了一下。找到了典型的 php append 解决方案并且不喜欢它。为 htaccess 找到了几行简洁的代码，这让我很高兴，因为它们可以立即工作：

```
AddHandler application/x-httpd-php .html .htm .php .js
php_flag output_buffering On
php_value output_handler ob_gzhandler
php_flag zlib.output_compression Off 
```

我通过使用[GIDZipTest](http://www.gidnetwork.com/tools/gzip-test.php "在线 GZIP 压缩测试")确认它正在工作。这一切都很好，我喜欢它。

**但是，一旦我将 .css 放入 AddHandler 列表，我的页面就完全崩溃了。**
我尝试将[带有 ob_gzhandler 的 php 解决方案](http://viralpatel.net/blogs/compress-php-css-js-javascript-optimize-website-performance/ "条件 php 压缩")仅用于 css 文件，但它最终根本不起作用。只是什么都不做。

## 解决方法？（并不真地）

* * *

我手动缩小了所有 css 并上传了每个文件的 css.gz 版本，并提供给它

```
RewriteCond %{HTTP:Accept-encoding} gzip
RewriteCond %{REQUEST_FILENAME}\.gz -s
RewriteRule ^(.*)\.css $1\.css\.gz [QSA]
RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1] 
```

这也很好。

## 问题！

* * *

1.  我需要为 css 压缩工作定义/指定什么？我觉得我只是缺少一些转换的东西......

3.  当我将手动缩小的 .css.gz 文件提供给客户端时，它们还会被额外压缩吗？

5.  这在文件大小方面是否有任何进一步的优势，还是我应该坚持手动提供的版本并给出关于 Google PageSpeed 的**？
    （GIDZipTest 仍然显示“假设”场景，即使是缩小的文件，老实说，这是令人印象深刻的数字。我希望......）

预先感谢您提供的任何评论。
此致

玛丽安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:52:49.710

PHP+zlib 解决方案自动压缩从网络服务器提供的每个 PHP 文件。这意味着您放入 php 处理程序中的每个文件都将被压缩发送到客户端浏览器。无论如何， AddHandler 指令告诉网络服务器将 css 文件作为 php 脚本处理，这就是我认为它们“损坏”的原因。Css 文件应该有自己的处理程序（text/css）。

另一个（未经测试的）解决方案可能是保留您最初定义的处理程序：

```
AddHandler application/x-httpd-php .html .htm .php .js .css 
```

并在您的 css 文件顶部添加此 php 代码：

```
<?php header('Content-Type: text/css'); ?> 
```

但我不确定这是否可行。这应该告诉浏览器他们实际上正在接收 css 文件。

在这些情况下，最好的解决方案是您提到的 mod_deflate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:18:44.487

您以压缩的形式交付内容，但不仅仅是为了传输，这将通过[*Content-Encoding*](https://www.rfc-editor.org/rfc/rfc2616#section-14.11)完成。因此客户端在解释内容之前不会对其进行解压缩。

您可以启用[*MultiViews以允许使用*](http://httpd.apache.org/docs/current/mod/core.html#options)[*mod_negotiation*](http://httpd.apache.org/docs/current/content-negotiation.html)进行自动[内容协商](http://httpd.apache.org/docs/current/content-negotiation.html)*：*

 *```
<FilesMatch "\.css$">
    Options MultiViews
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:10:46.637

因此，如果您遇到类似的问题，我建议您阅读[本文](http://viralpatel.net/blogs/compress-php-css-js-javascript-optimize-website-performance/)并正确设置[完整的 Web 目录路径](http://www.brmecham.com/how-to-find-the-absolute-path-on-your-web-server/)！

创建一个 php 脚本（例如：“gzip-css.php”）

```
<?php
ob_start("ob_gzhandler");
header("content-type: text/css; charset: UTF-8");
?> 
```

并在前面加上 .htaccess

```
<FilesMatch "\.css$">
ForceType application/x-httpd-php
php_value auto_prepend_file "/full/path/to/that/file/see/link/above/gzip-css.php"
</FilesMatch> 
```

到所有 .css 文件。到目前为止，这似乎是我唯一的解决方案。如果我之前找到了完整的路径，我会在不问这里的情况下做到这一点。也许有人仍然对如何将 AddHandler 版本与 css tho 结合起来有更好的想法。

不起作用的事情（完全禁用所有 css）：
- 将 .css 添加到 AddHandler 和上述**任何**（包括我的）解决方案。
- 提供手动 gzip 压缩的 css 文件并预先添加内容类型脚本
- 两者的结合

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T01:15:16.867

老问题，但我找到了一个对我有用的 .htaccess 解决方案，无需修改任何代码。

```
AddHandler application/x-httpd-php .html .htm .php .js .css
<Files *.css>
    Header set Content-type "text/css"
</Files>
php_flag zlib.output_compression On
php_value zlib.output_compression_level 5 
```*

# sql-server - 无法插入 SQL Server 表

> ID：12331111
> 
> 赞同：0
> 
> 时间：2012-09-08T13:24:42.387
> 
> 标签：sql-server, sql-insert, sql-delete

我想在客户数据库中的一张表中插入几行。我不能这样做。

我可以在除此之外的其他表上执行插入、更新、删除操作。当我尝试执行插入、更新或删除时，它不会给出错误但需要无限时间来执行。

我什至尝试禁用所有触发器和约束。

任何人都可以帮忙吗？

```
if not exists(select '' from table_name where col1='val1' and col2='Val2')
begin   
    insert into lw_code_group_ext(col1,col2,col3) values(val1,val2,val3);
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T13:29:54.053

那张桌子可能被锁定了。这意味着它正在被其他进程读取。尝试找出可以阅读此表的内容，如果找到，请使用：

```
... from lw_code_group_ext with (nolock) ... 
```

# iphone - 根据方向变化在 UIWindow 上添加正确的偏移量旋转 UIView

> ID：12331116
> 
> 赞同：1
> 
> 时间：2012-09-08T13:25:25.583
> 
> 标签：iphone, objective-c, orientation

所以我有一个`UIView`，它被添加到我的应用程序的主窗口中。`UIView`不一定覆盖整个屏幕。改变方向后，我`UIView`会根据新的方向使用新的 xy 偏移值进行调整。代码工作正常，直到我开始在 iPad 上进行测试。现在的问题是，`UIView`旋转时不能正确保持偏移，并且在新旋转时似乎在屏幕上反弹。有人解决了“旋转时保持正确偏移`UIView`”的问题吗？我可以分享当前正在使用的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:49:00.637

如果你想保持一个特定的偏移量，你需要定义当它的父视图框架发生变化时你的视图应该如何表现。这是通过`autoresizingMask`正确指定 UIView 的属性来完成的。看看你可以[在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)应用的不同面具。

# iphone - 当我使用 UIImagePicker 从 iPad 中的照片库中选择图像时，模拟器崩溃了

> ID：12331118
> 
> 赞同：0
> 
> 时间：2012-09-08T13:25:53.220
> 
> 标签：iphone

```
-(void) pickImage{
 UIImagePickerController *picker = [[UIImagePickerController alloc] init];
  picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
  picker.delegate = self;
   [self presentModalViewController:picker animated:YES];

}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo{
   UIImage *myImage =image;
} 
```

当`pickImage`方法调用模拟器崩溃并在终端中显示如下消息时：

```
2012-09-08 18:53:50.953 NewExample[4645:207] UIStatusBarStyleBlackTranslucent is not available on this device. 
```

任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T04:12:34.260

我的理解是您无法从模拟器中显示图像选择器。验证相机是否可用于设备并显示图像选择器视图。

# android - 我需要有关将 matlab 代码与 android 集成的帮助

> ID：12331122
> 
> 赞同：0
> 
> 时间：2012-09-08T13:26:06.197
> 
> 标签：android, matlab, image-processing

我正在做一个图像处理项目（小）。我在 matlab 中编码算法并在 MCR 中测试它们。但我的想法是将这个算法移植到我的 android 设备上构建一个不错的应用程序并在主机设备上实现我的概念，这样应用程序就可以移植并且可以在任何地方使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:20:03.087

我认为您需要更具体一点，因为有一些 MATLAB 产品可以让您将 MATLAB 的一个子集转换为您以后可以使用的 C 代码。

例如[MATLAB 编码器](http://www.mathworks.com/products/matlab-coder/)：

> “从 MATLAB® 代码生成独立的 C 和 C++ 代码 生成的源代码具有可移植性和可读性。MATLAB Coder 支持部分核心 MATLAB 语言功能，包括程序控制结构、函数和矩阵运算。它可以生成 MEX 函数，让您加速 MATLAB 代码的计算密集部分并验证生成代码的行为”。

但是，请注意，并非 Image Processing Toolbox 中可用的每个函数都可以在 MATLAB 编码器中使用：

> “支持从 Aerospace Toolbox、Image Processing Toolbox™ 和 Signal Processing Toolbox™ 生成代码的有限功能集”

因此，您需要使用该子集构建算法，以便能够从中生成 C 或 C++ 代码。

希望这可以帮助。

# jquery - 使用 jquery 创建主题标签 url

> ID：12331132
> 
> 赞同：0
> 
> 时间：2012-09-08T13:27:33.740
> 
> 标签：jquery, hashtag

这是我的[JSFiddle](http://jsfiddle.net/sureshmonster/ZUZXg/3/)。我希望网址为[http://example.com/#content-1](http://example.com/#content-1)并在我单击下一步时更新到下一个 h2 标题。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T13:48:05.307

这是一个非常快速的解决方案，无需更改太多代码：

**Javascript**

```
$(".next").click(function(){
    var current = $('ul li.selected').index(),
        maxIndex = $('ul li').length - 1,
        next = (current + 1) >  maxIndex ? 0 : (current + 1);

    setActive(next);

    // gets text content wrapped in selected div's h2
    var titleText = $(".selected .sl-title").text(); 

    // replaces the space between "Content" and number with a "-" (dash)
    var hashTag = titleText.replace(/ /g, '-');

    // update url
    window.location.hash = hashTag;
}); 
```

**~UPDATE01 090912~**

*OP 问道：“你能告诉我如何在刷新页面后获得相同的内容吗？ – user1619228 1 小时前”*

您可以通过在以下之后添加它来做到这一点`function setActive(i) { // codes }`：

```
 // apply the following only if the word "Content" is present in URL
    if(url.indexOf('Content') != -1){ 

         // gets current hash value (fragment identifier) of URL
         var url = window.location.hash; 

         // removes the "#" symbol
         var currentHash = window.location.hash.substring(1).split("#"); 

         // replaces the "-" with a space
         var contentTitle = currentHash.toString().replace(/-/g, ' '); 

         // set text string in variable (to be used later)
         var actualContent = "This is " + contentTitle; 

         // remove "selected" class from all "myclass" divs
         $(".myclass").removeClass("selected"); 

         // add "selected" class to div that has the string stored in "actualContent" variable  
         $("div:contains('" + actualContent + "')").addClass('selected'); 
     } 
```

上面的附加脚本很简单：

1.  检查 URL 以查看是否存在“内容”一词，如果存在，请继续：
2.  获取 URL 的哈希标签（片段标识符）
3.  删除符号（# 和 -）
4.  将其作为文本字符串放入变量中
5.  遍历整个文档以查找包含与变量相同内容的 div，或以间接方式查找 URL 的主题标签
6.  首先从所有 div 中删除“选定”类，然后将其添加回包含与变量相同内容的 div，或者以间接方式，URL 的哈希标记（片段标识符）

我还没有解决图像背景颜色的更新问题，但我相信如果您应用上面演示的基础知识，您也可以将“选定”类添加到正确的图像中。您当然需要通过向保存图像的列表项添加一些额外的 ID 或类来稍微调整代码，以便通过 jQuery 操作它们。

我知道以上可能不是最漂亮或最好的解决方案，但是当我对自己施加限制以不改变太多 HTML 结构或 jQuery 时，我想到的只有它。

希望这有助于进一步！

**更新02 090912**

*OP的进一步参考*

以下是整个文档的外观：

**整个文档**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script type="text/javascript" src=" https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js "></script>
</head>
<style>
    .myclass {
        display:none;
    }

    ul li {
        display: inline-block;
    }

    img {
        height: 20px;
        width: 20px;
        padding: 20px;
    }

    .myclass.selected {
        display: block;
    }

    ul li.selected {
        background-color: yellow;
    }

    ul li, .next {
        cursor: pointer;
    }
</style>
<body>
    <div class="myclass">
        <h2 class="sl-title">#Content 1</h2>
        This is Content 1
    </div>
    <div class="myclass">
        <h2 class="sl-title">#Content 2</h2>
        This is Content 2
    </div>
    <div class="myclass">
        <h2 class="sl-title">#Content 3</h2>
        This is Content 3
    </div>
    <ul>
      <li><img src="http://www.lillehammer.com/ImageVault/Images/id_2122/scope_66/ImageVaultHandler.aspx" /></li>
      <li><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Valued_image_seal.svg/40px-Valued_image_seal.svg.png" /></li>
      <li><img src="http://www.iconico.com/i/icoImageFilterPro100.gif" /></li>
    </ul>
    <a class="next">next</a>
</body>
<script type="text/javascript">
    $(document).ready(function(){

        setActive(0);

        $('li').click(function() {
            setActive($(this).index());
        });

        $(".next").click(function(){
            var current = $('ul li.selected').index(),
                maxIndex = $('ul li').length - 1,
                next = (current + 1) >  maxIndex ? 0 : (current + 1);

            setActive(next);

            // gets text content wrapped in selected div's h2
            var titleText = $(".selected .sl-title").text(); 

            // replaces the space between "Content" and number with a "-" (dash)
            var hashTag = titleText.replace(/ /g, '-');

            // update url
            window.location.hash = hashTag;

        });

        function setActive(i) {
            var li = $('ul li').eq(i);

            $('ul li').removeClass('selected');
            li.addClass('selected');
            $('.myclass').removeClass('selected');
            $('.myclass').eq(i).addClass('selected');
        }

        var url = window.location.hash; // retrieve current hash value (fragment identifier)
        if(url.indexOf('Content') != -1){ // do the following if URL's hash contains "Content"
            // remove "#" symbol from retrieved hash value (fragment identifier)
            var currentHash = window.location.hash.substring(1).split("#");
            // remove "-" symbol from retrieved hash value (fragment identifier)
            var contentTitle = currentHash.toString().replace(/-/g, ' ');
            // store hash value in "actualContent" variable
            var actualContent = "This is " + contentTitle;
            // remove "selected" for every instance of "myclass" to hide content first
            $(".myclass").removeClass("selected");
            // find div that contains retrieved hash value's (fragment identifier's) text stored in "actualContent" variable and add "selected" class to that div to display the correct content
            $("div:contains('" + actualContent + "')").addClass("selected");
        }

    });
</script>
</html> 
```

只需将所有内容复制并粘贴到一个新的 HTML 文件中，然后在您选择的浏览器中打开它，单击下一步并刷新。显示的页面内容应保持不变。复制新 URL，打开一个新选项卡并将复制的 URL 放入地址栏中 - 页面加载并根据哈希标签显示正确的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T13:51:15.227

这应该有效，对吧？

```
function setActive(i) {
    var li = $('ul li').eq(i);

    $('ul li').removeClass('selected');
    li.addClass('selected');
    $('.myclass').removeClass('selected');
    $('.myclass').eq(i).addClass('selected');

    // add hashtag
    var selectedText = $('.myclass.selected h2').text();
    window.location.hash = selectedText;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T13:31:54.733

您可以使用 jQuery 历史/哈希更改插件来做到这一点。[喜欢这个](https://github.com/cowboy/jquery-hashchange)。去谷歌上查询。你会发现更多。

或查看此 StackOverflow 帖子：[在 JQuery 中执行 URL 哈希/历史记录的最佳库是什么？](https://stackoverflow.com/questions/2358928/whats-the-best-library-to-do-a-url-hash-history-in-jquery)

# java - java.lang.UnsupportedClassVersionError: myApp : Unsupported major.minor version 51.0 (unable to load class myApp) 在 Linux 上

> ID：12331138
> 
> 赞同：8
> 
> 时间：2012-09-08T13:28:28.727
> 
> 标签：java, linux, tomcat

最近我在 Linux Centos 上遇到了 Apache Tomcat 6.0.35 的问题。我收到错误消息-

```
java.lang.UnsupportedClassVersionError: myApp : Unsupported major.minor version 51.0 (unable to load class myApp) 
```

当我发出命令时——

```
java -version 
```

表明

```
java version "1.6.0_22"
OpenJDK Runtime Environment (IcedTea6 1.10.9) (rhel-1.28.1.10.9.el5_8-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b11, mixed mode) 
```

同样，当我发出命令时-

```
javac -version 
```

表明 -

```
javac 1.6.0_22 
```

要找到 Java，我给出命令 -

```
whereis java 
```

输出是 -

```
java: /usr/bin/java /etc/java /usr/lib/java /usr/share/java /usr/share/man/man1/java.1.gz 
```

而对于

```
which java 
```

它显示 -

```
/usr/bin/java 
```

也为

```
which javac 
```

输出是

```
/usr/bin/javac 
```

其中**myApp是在 Windows 中开发的 java 项目，并在****Linux**上的 Tomcats 的**webapp**目录中上传了 WAR 文件。

 **我不明白发生了什么？请问有人可以帮我解决问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T13:31:39.710

您需要 Java 7 运行时，而不是 Java 6。有关此的一些详细信息，请参见[http://en.wikipedia.org/wiki/Java_class_file#General_layout](http://en.wikipedia.org/wiki/Java_class_file#General_layout)。

或者，您需要查找和/或重新编译您的代码以与 Java 6 兼容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T16:24:11.940

例外是因为您的代码是使用比您尝试运行它的版本更高的版本编译的。在您的 Windows 机器中，您可能正在使用 Windows 7 来构建战争。检查`javac -version`你的 Windows 机器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T13:32:25.443

看起来你的代码是用 jdk7 编译的？**

# primefaces - 如何防止在 h:head 中加载 PrimeFaces theme.css

> ID：12331141
> 
> 赞同：2
> 
> 时间：2012-09-08T13:28:46.330
> 
> 标签：primefaces

我使用 PrimeFaces 作为主要的 JSF 组件库。但我只需要在一个网页上。其他网页不使用 PrimeFaces 库。我正在使用模板，这是模板中很重要的一部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:fn="http://java.sun.com/jsp/jstl/functions">  
<h:head>
    <f:facet name="first">
        <title>
            <ui:insert name="titleOfPage">Insert title</ui:insert>
        </title>
    </f:facet>
    <h:outputStylesheet name="basic.css" library="css" />
    <h:outputStylesheet name="template.css" library="css" />
    <f:facet name="last">
        <ui:insert name="scriptOfPage" />
        <h:outputScript name="mainScript.js" library="javascript" />
        <ui:insert name="styleOfPage" />
    </f:facet>
</h:head>   
<h:body> 
```

我发现定义了 h:head 后，它会自动加载 PrimeFaces theme.css。加载页面的源代码部分如下所示：

```
<link href="/javax.faces.resource/theme.css.xhtml?ln=primefaces-aristo" rel="stylesheet" type="text/css"> 
```

我没有在模板或页面中使用任何实现模板的primefaces。但是 h:head 仍然会加载 theme.cs。是否可以仅在需要时加载此主题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T23:07:22.223

您可以阻止在 web.xml 中加载主题：

```
<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>none</param-value>
</context-param> 
```

在您想要拥有主题的网站上，只需添加 css：

```
<link href="/javax.faces.resource/theme.css.xhtml?ln=primefaces-aristo" rel="stylesheet" type="text/css"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:42:54.620

也许覆盖headrenderer？我只会删除对其进行编码的部分，然后在一页上手动进行。

我可以想到许多其他方法来做到这一点，如果您需要更具体的帮助，请告诉我。

我认为您可以使用此[http://code.google.com/p/primefaces-extensions/source/browse/primefaces-extensions/trunk/src/main/java/org/primefaces/extensions/component/head/HeadRenderer。 java?r=1353](http://code.google.com/p/primefaces-extensions/source/browse/primefaces-extensions/trunk/src/main/java/org/primefaces/extensions/component/head/HeadRenderer.java?r=1353)

# google-app-engine - 在 GAE 上使用延迟库时如何访问请求标头？

> ID：12331142
> 
> 赞同：1
> 
> 时间：2012-09-08T13:28:54.767
> 
> 标签：google-app-engine, task-queue

我想访问`X-Appengine-*`标题。使用延迟库时这些是否完全隐藏？

[实际上我正在使用烧瓶和werkzeug，如果这很重要的话。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:45:32.253

似乎就这么简单：

```
from google.appengine.ext import webapp
req = webapp.get_request() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:50:58.980

我怀疑 OP 想要从运行延迟处理程序的任务中的*原始*请求（调用 defer() 的请求）访问标头。鉴于延迟处理程序作为单独的请求运行，这些标头会丢失 - 如果您想要它们，您必须在原始请求中获取它们并以某种方式将它们作为参数传递给延迟函数。

# .net - 检查网站是否在 FB 或 VB 中的 FB Like 按钮上被喜欢。网络应用程序

> ID：12331143
> 
> 赞同：-2
> 
> 时间：2012-09-08T13:29:04.517
> 
> 标签：.net, facebook, visual-studio-2010, button, facebook-like

-大家好，我想制作一个应用程序，如果 fb 太复杂，可以检查该人是否已经喜欢我在 facebook 或 google + 上的网站作为替代方案。

- 另一件事是制作一个按钮，单击时会喜欢特定的 URL，或者如果未登录则提示 Fb 登录。现在我不知道这在 VB 2010 中是否可行。

任何人都可以发布是否以及如何在 VB 中完成这两件事。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:41:13.020

为了与 Facebook 通信，您需要他们的图形 API：http: [//developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

这可以使用标准 HTML 和 Javascript 调用。您需要在 VB 中做的是集成一个 Web 界面，您可以在其中调用图形 API。

上面给出的 Facebook 的 Graph API 文档的链接是非常不言自明的。如果您对此主题还有其他问题，请告诉我。

# android - 在android中创建自定义布局

> ID：12331144
> 
> 赞同：1
> 
> 时间：2012-09-08T13:29:15.897
> 
> 标签：android, android-layout

我想在我的 android 应用程序中创建一个类似于图像的布局。我想我可以通过编程应用逻辑。但我对如何创建相同的布局没有太多想法/知识。

有人可以就我应该如何创建布局提出一些建议。

![在此处输入图像描述](../Images/987d572af2dd776575f8796fc66ea40b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T13:38:33.737

首先阅读有关[在 Android 中绘制形状的信息。](http://androidresearch.wordpress.com/2012/03/24/drawing-shapes-in-android/)

一旦你弄清楚它是如何工作的，你就可以定义 2 种形状：一种具有蓝色背景和圆形黑色边框，另一种具有透明背景和圆形灰色边框的形状。

然后将这些形状设置为 2 个 RelativeLayout 的背景资源。星星很可能需要 jpg 图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T13:45:29.140

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout
android:id="@+id/widget32"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
xmlns:android="http://schemas.android.com/apk/res/android">
<TextView
android:id="@+id/widget33"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginTop="10dp"
android:text="TextView"
android:gravity="center"
android:layout_gravity="center_horizontal" />
    <LinearLayout
android:id="@+id/widget34"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginTop="10dp"
android:orientation="vertical"
android:gravity="center"
android:layout_gravity="center_horizontal">
</LinearLayout>
  <TextView
android:id="@+id/widget35"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginTop="10dp"
android:text="TextView"
android:gravity="center"
android:layout_gravity="center_horizontal" />
 <RatingBar
    android:id="@+id/ratingBar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:numStars="4"
    android:stepSize="1.0"
    android:rating="2.0" />
  </LinearLayout> 
```

这只是布局草稿。你必须为它添加背景。你可以使用安卓形状。你也可以添加椭圆形png图片

# excel - 删除重复项并根据另一列中的值对一列进行计数

> ID：12331145
> 
> 赞同：1
> 
> 时间：2012-09-08T13:29:17.373
> 
> 标签：excel, excel-formula

```
Column A Column B
A    PASS
A    PASS
B    PASS
C    PASS
D    PASS
E   
F    PASS
E    PASS 
```

我想要一个返回以下计数的公式：按 B 列过滤是否通过。删除重复项后计算 A 列中的所有元素。我是 Excel 公式的新手。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:53:46.533

试试这个公式

`=SUM(IF(FREQUENCY(IF(B2:B100="Pass",IF(A2:A100<>"",MATCH(A2:A100,A2:A100,0))),ROW(A2:A100)-ROW(A2)+1),1))`

用 CTRL+SHIFT+ENTER 确认

....对于 Excel 2007 或更高版本，版本较短，但效率可能较低

`=SUMPRODUCT(((B2:B100="Pass")*(A2:A100<>""))/COUNTIFS(B2:B100,B2:B100&"",A2:A100,A2:A100&""))`

假设第 2 到 100 行中的数据（允许空白），根据需要进行调整

# image - 图像叠加层上的图像（替代代码）

> ID：12331148
> 
> 赞同：1
> 
> 时间：2012-09-08T13:29:24.800
> 
> 标签：image, overlay, alt

我有一个问题......我已经生成了 Youtube 缩略图，我想添加一个带有 alt 代码的“播放按钮”，这与这个相同：►</p>

但是，无论我做什么，这个按钮都不会出现。

PS：问题是它是一个脚本，我似乎无法在缩略图上添加这个按钮。我为图像制作了一个类，按钮必须出现在该类上，但即便如此，按钮也没有出现。不透明度之类的东西已经完成了，我唯一想要的就是这个按钮，但正如前面所说，它不起作用。

img.className = 'but'（这是我在脚本中创建的类）。脚本就是这个 -->

[http://www.yvoschaap.com/ytpage/ytembed.js](http://www.yvoschaap.com/ytpage/ytembed.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:36:19.980

Alt 代码图像仅在图像不可用时出现。它不会覆盖图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:20:35.870

您可以为此使用 css 和 div

```
#OverlayImage1
{
position: absolute;
left: 20px;
top: 20px;
width: 56px;
height: 45px;
background: url(underimage.jpg) no-repeat top left;
opacity: .80;
filter: alpha(opacity=80);
-moz-opacity: 0.8;
}

#OverlayImage2
{
position: absolute;
left: 40px;
top: 20px;
width: 56px;
height: 45px;
background: url(play.image) no-repeat top left;
opacity: .80;
filter: alpha(opacity=80);
-moz-opacity: 0.8;
} 
```

您也可以根据您的图像修改左：，上：，宽度：和高度：希望这能解决您的问题

# iphone - iPhone UI 定制的最佳方法是什么？

> ID：12331149
> 
> 赞同：0
> 
> 时间：2012-09-08T13:29:26.070
> 
> 标签：iphone, ios

我正在创建一个使用标准 UI 组件的 iPhone 应用程序...我想自定义纹理和按钮，但我不确定哪个是最好的方法...

我应该**在开发过程中**还是**在应用程序准备好并正常运行后**进行组件定制？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T13:57:14.617

我总是在应用程序完全正常运行后这样做。一旦您测试了一个工作原型，您就可以决定是否要使用滑动或触摸来代替按钮。这样，您无需自定义按钮并决定它应该是不同的 UI 元素。

但是，我确实认为您应该在工作时自定义 UITableViewCells，也许不是一开始就使用渐变和自定义图形，但如果您想要一个非标准的 tableViewCell，您应该从一开始就设计它。

希望这会有所帮助

# uinavigationbar - applicationdidenterbackground 后自定义 UINavigationBar 失败

> ID：12331156
> 
> 赞同：1
> 
> 时间：2012-09-08T13:30:27.170
> 
> 标签：uinavigationbar, customization

我有我在应用程序委托中创建的自定义导航栏，如下所示

```
- (void) customAppearance
{
    UIImage *customNav = [UIImage imageNamed:@"02_header2.png"];
    [[UINavigationBar appearance] setBackgroundImage:customNav forBarMetrics:UIBarMetricsDefault];
    CGRect frame = CGRectMake(0.0f, 0.0f, 320.0f, 50);
    [[UINavigationBar appearance] setFrame:frame];  
} 
```

它工作得很好。但是，在应用程序确实进入后台之后，稍后将进入前台，它无法加载自定义导航栏。它给了我导航栏的大小（320,44）。

这是`appwillenterforeground`方法

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{

    UIImage *customNav = [UIImage imageNamed:@"02_header2.png"];
    [[UINavigationBar appearance] setBackgroundImage:customNav forBarMetrics:UIBarMetricsDefault];
    CGRect frame = CGRectMake(0.0f, 0.0f, 320.0f, 50);
    [[UINavigationBar appearance] setFrame:frame];
} 
```

它不加载我的自定义 nav.bar 有人知道如何解决这个问题吗？

# php - codeigniter .htaccess 网址问题

> ID：12331160
> 
> 赞同：1
> 
> 时间：2012-09-08T13:30:50.043
> 
> 标签：php, .htaccess, codeigniter

我想这样做：（首先，ci 是我的 codeigniter 文件夹）
如果用户调用 ci/2012.htm 我想重定向 ci/oyna/oyun/2012.htm 我正在尝试使用它，但它没有运行。

```
 RewriteEngine on
    RewriteCond $1 !^(index\.php|resources|robots\.txt)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L,QSA]
    RewriteRule ^(.*)$ index.php/oyna/oyun/$1 [L,QSA] 
```

当我调用 ci/2012.htm 时，它返回 codeigniter 404 not found 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:31:05.537

第一的; 你有两个重写规则与你正在做的重写冲突；

```
RewriteRule ^(.*)$ index.php/$1 [L,QSA]
RewriteRule ^(.*)$ index.php/oyna/oyun/$1 [L,QSA] 
```

该`L`标志表示如果规则匹配，则不会使用下一个规则。由于`2012.htm`匹配第一条规则（两条规则都匹配所有内容），它将被重写`index.php/2012.htm`并停在那里，甚至不会进入您的 oyna/oyun 重写。

解决方案是交换规则并使 .htm 重写更具体，因此它只重写 .htm 文件。将规则更改为；

```
RewriteRule ^(.*\.htm)$ index.php/oyna/oyun/$1 [L,QSA] 
```

应该工作得更好。

结果，在把最具选择性的规则放在第一位之后，应该看起来像（未经测试，这里没有 apache）

**编辑：添加了缺少的 RewriteCond，每个 RewriteRule 都需要一个**

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*\.htm)$ index.php/oyna/oyun/$1 [L,QSA]
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

# google-maps - Google Maps api，地点搜索和标记信息小部件

> ID：12331161
> 
> 赞同：1
> 
> 时间：2012-09-08T13:30:50.710
> 
> 标签：google-maps

我正在使用谷歌地图和谷歌地方搜索，我有两个问题。

1-我希望信息小部件在我们远离标记时保持打开状态。这意味着如果该标记已悬停，所有信息窗口将保持打开状态，现在当另一个标记的窗口打开时，它会关闭前一个标记窗口。

2-我得到的地方搜索结果很少。例如，在给定堪萨斯城纬度的情况下寻找麦当劳时，它只给了我一个结果。代码在这里。

```
function initialize() 
{
    var lat;
    var longitude;
    var zoom;
    var radius_hidden=document.getElementById("hidden_radius").value;
    var searchname=document.getElementById("hidden_searchname").value;
    if(trim(document.getElementById("longitude").value)!="")
    {
        zoom=11; 
        lat=document.getElementById("latitude").value;
        longitude=document.getElementById("longitude").value;
    }
    else
    {
        zoom=11;
        longitude="-88";
        lat="42";
    }
    latlng = new google.maps.LatLng(lat,longitude);
    var myOptions = {
      zoom: zoom,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById("map"), myOptions);

    //alert("Radius:"+radius_hidden);
    var requestsearch = {
        location: latlng,

        name: searchname,
        types: ['store'],
        bound:latlngbounds,
        rankBy: google.maps.places.RankBy.DISTANCE
    };
    // keyword: searchname,//name: searchname, to get like pages and name to get exact
    service = new google.maps.places.PlacesService(map);
    //service.textSearch(requestsearch, callback);
    service.search(requestsearch, callback);

    if(map != null) {
        google.maps.event.addListener(map, 'drag', function(event) {
            calculateCenter();  
        });
    }
}
google.maps.event.addDomListener(window, 'load', initialize);

google.maps.event.addDomListener(window, 'resize', function() {
  map.setCenter(center);
  //google.maps.event.trigger(map, 'resize');
});
function calculateCenter() {
    var latlngbounds = new google.maps.LatLngBounds();

for (var i = 0 ; i < markersArray.length ; i++) {
     latlngbounds.extend(markersArray[i].getPosition());
}

//map.setCenter(latlngbounds.getCenter(), map.getBoundsZoomLevel(latlngbounds));
map.setCenter(latlngbounds.getCenter());
map.fitBounds(latlngbounds);
 center = map.getCenter();
}
    function callAfterMarker(){
  alert("Market Clicked");
}
function callback(results, status)
{
    var listing='<table width="100%" border="0">';
    var num=5;
    markersArray = new Array();
    if (status == google.maps.places.PlacesServiceStatus.OK) 
    {
      for (var i = 0; i < results.length; i++) 
      {
        var pincode='';
        var address='';
        geocoder = new google.maps.Geocoder();
        geocoder.geocode({
          'address': results[i].vicinity,
          'partialmatch': true},function(resultsp, status)
          {
            if (status == 'OK' && resultsp.length > 0) 
            {
                address=resultsp[0].formatted_address;
                var len=resultsp[0].address_components.length-1;
                var res=resultsp[0].address_components[len].short_name;
                if(res!=undefined)
                {
                    //address+="<br>Pincode:"+res.toString();
                }
                //listing+='<tr><td>Zip Code: '+res.toString()+'</td></tr>';
            } 
        });

        marker = new google.maps.Marker({
            position: results[i].geometry.location,
            title: results[i].name,
            zIndex: 2,
            icon: gicons["blue"]
        });
        infowindow = new google.maps.InfoWindow();
        google.maps.event.addListener(marker, 'click', (function (marker, i) {
            return function () {
                var contentString = '<div id="infowindow' + i + '"><table width="100%"><tr><td>'+results[i].name+'</td></tr><tr><td style="word-wrap: break-word;">'+getaddress(results[i].vicinity)+'</td></tr><?php if(trim($finalURL)){ echo "<tr><td align=\"center\"><a target=\"_blank\" class=\"sty-action-buttn\" href=\"".$finalURL."\">".trim(getFieldFromDB('user_config','BubbleText'))."</a></td></tr>"; }else if(trim(getFieldFromDB('user_config','ActionLink'))){ echo "<tr><td align=\"center\"><a target=\"_blank\" class=\"sty-action-buttn\" href=\"".trim(getFieldFromDB('user_config','ActionLink'))."\">".trim(getFieldFromDB('user_config','BubbleText'))."</a></td></tr>"; }?></table></div>';
                infowindow.setContent(contentString);
                infowindow.open(map, marker);
            }
        })(marker, i));

        google.maps.event.addListener(marker, 'mouseover', (function (marker, i) {
            return function () {
            var contentString = '<div id="infowindow' + i + '"><table width="100%"><tr><td>'+results[i].name+'</td></tr><tr><td style="word-wrap: break-word;">'+getaddress(results[i].vicinity)+'</td></tr><?php if(trim($finalURL)){ echo "<tr><td align=\"center\"><a target=\"_blank\" class=\"sty-action-buttn\" href=\"".$finalURL."\">".trim(getFieldFromDB('user_config','BubbleText'))."</a></td></tr>"; }else if(trim(getFieldFromDB('user_config','ActionLink'))){ echo "<tr><td align=\"center\"><a target=\"_blank\" class=\"sty-action-buttn\" href=\"".trim(getFieldFromDB('user_config','ActionLink'))."\">".trim(getFieldFromDB('user_config','BubbleText'))."</a></td></tr>"; }?></table></div>';
            var listItem = document.getElementById("item-" + i);
            listItem.className = "grey";
               infowindow.setContent(contentString);
                infowindow.open(map, marker);

            }

        })(marker, i));

              google.maps.event.addListener(marker, 'mouseout', (function (marker, i) {
            return function () {

        /*var contentString = '<div id="infowindow' + i + '"><table width="100%"><tr><td>'+results[i].name+'</td></tr><tr><td style="word-wrap: break-word;">'+getaddress(results[i].vicinity)+'</td></tr><?php if(trim($finalURL)){ echo "<tr><td align=\"center\"><a target=\"_blank\" class=\"sty-action-buttn\" href=\"".$finalURL."\">".trim(getFieldFromDB('user_config','BubbleText'))."</a></td></tr>"; }else if(trim(getFieldFromDB('user_config','ActionLink'))){ echo "<tr><td align=\"center\"><a target=\"_blank\" class=\"sty-action-buttn\" href=\"".trim(getFieldFromDB('user_config','ActionLink'))."\">".trim(getFieldFromDB('user_config','BubbleText'))."</a></td></tr>"; }?></table></div>';*/
            var listItem = document.getElementById("item-" + i);
            listItem.className = "change";
             marker.setIcon(gicons["blue"]);
             /* infowindow.setContent(contentString);
                infowindow.open(map, marker);*/

            }

        })(marker, i));

        markersArray.push(marker);
        calculateCenter();
        listing+='<tr><td>';

        var address_link=results[i].vicinity.replace(" ","+");
        if(i==0)
        {
            listing+='<table id="div5" width="100%" >'; 
        }
        else if(i%5==0)
        {
            num+=5;
            listing+='<table id="div'+num+'" class="myclass" style="display:none;" width="100%">';  
        }
        //'+results[i].name+'
        listing +='<tr id="searchadd"><td ><input type="hidden" value="'+results[i].name+'" name="end'+i+'" id="end'+i+'"></td></tr><tr><td style="word-wrap: break-word;border-bottom:1px solid #cccccc;" onmouseout="markersArray['+i+'].setIcon(gicons.blue)" onmouseover="markersArray['+i+'].setIcon(gicons.yellow);openInfoWindow('+i+')"      class="" id="item-'+i+'">'+getaddress(results[i].vicinity)+'<div id="spacer" style="width:120px;height:1px;float:left;"></div><a   style="width:100px;height: 20px;" class="sty-hyperlink" target="_blank" href="https://maps.google.com/maps?daddr='+address_link+'"><b><?php echo getFieldFromDB('user_config','DirectionText'); ?></b></a><br></td></tr>';

        if(i ==(results.length-1))
        {
            listing+='</table>';
            listing+='<span id="largerwindowlink"><br><a  target="_blank" class="sty-action-buttn" href="http://www.franchiseportals.com/contact.php?id=<?php echo $finalURL; ?>"><?php echo trim(getFieldFromDB('user_config','ActionButtonText')); ?></a></span>';
        }
        else if(i>0 &&(i+1)%5==0)
        {
            listing+='<tr><td align="right"><a class="sty-hyperlink" style="width:100px;height: 20px;" href="javascript:void(0);" onclick="javascript:show_hide_table('+num+');" ><b><?php echo getFieldFromDB('user_config','MoreResultText'); ?></b></a></td></tr></table>';
        }
        listing+='</td></tr>';
      }
      showOverlays(5);
      listing +='</table>';
      if(results.length<=0)
      {
            listing='<br><br><span style="color:green;">Sorry! No stores found.<br>Please try another franchise name</span><br><br>';
      }
    }
    else
    {
        listing='<br><br><span style="color:green;">Sorry! No stores found.<br>Please try another franchise name</span><br><br>';
    }
    document.getElementById("listingAddress").innerHTML=listing;
}
function showOverlays(no) 
{
    if (markersArray) 
    {
        for (i in markersArray) 
        { 
            if(i<no && i>=no-5)
                markersArray[i].setMap(map);
        }
    }
}
function clearOverlays() 
{
    if (markersArray) 
    {
        for (i in markersArray) 
        {
                markersArray[i].setMap(null);
        }
    }
}
function openInfoWindow(loopID)
{
    google.maps.event.trigger(markersArray[(parseInt(loopID))], "click");
}     
function show_hide_table(tablid)
{
    var showid=tablid+5;
    clearOverlays();
    showOverlays(showid);
    if(document.getElementById("div"+showid))
    {
        document.getElementById("div"+showid).style.display="block";
    }
    if(document.getElementById("div"+tablid))
    {
        document.getElementById("div"+tablid).style.display="none"; 
    }
}
function checkPin()
{
    if(document.getElementById("pincode").value=="" || trim(document.getElementById("pincode").value)=="" )
    {
    alert("Please fill the Zip Code");
    document.getElementById("pincode").focus();
    return false;
    }
}
function checkMobPin()
{
    if(document.getElementById("zipcode").value=="" || trim(document.getElementById("zipcode").value)=="Choose other zip code" )
    {
        alert("Please fill the Zip Code");
        document.getElementById("zipcode").focus();
        return false;
    }
    else
    {
        document.getElementById("pincode").value=document.getElementById("zipcode").value;
    }
}
function show_table()
{
    if (document.getElementById("viewOption").value == "list") 
    {
        document.getElementById("maptd").className = "list-map-td-change";
        document.getElementById("addresstd").className="list-address-td-change";
    }
    else
    {
        document.getElementById("maptd").className="list-map-td";
        document.getElementById("addresstd").className="list-address-td";
    }
}
function getaddress(address)
{
    var part=address.split(',');
    var result='';
    for(var i=0; i<part.length; i++)
    {
        result+=part[i]+'<br>'  ;
    }
    return result;
}
//alert($(window).width());
/*$(window).resize(function() {
    if($(window).width()<=600)
        map.setZoom(10);
    if($(window).width()>600)
        map.setZoom(11);
        google.maps.event.trigger(map, 'resize');
});*/

</script>
<script>
$(function() {
    function log( message ) {
        $( "<div/>" ).text( message ).prependTo( "#log" );
        $( "#log" ).attr( "scrollTop", 0 );
    }
        $( "#address" ).autocomplete({              //here you have to write the name of search box, no need to call function from textbox
            source: "jquery4dd/search_content.php",
            minLength: 1,
            selectFirst:true,
            select: function(event, ui) {
                    $('#business_url').val(ui.item.url);
                    $('#address').val(ui.item.value);
               }
        });

});
function checkAddress()
{
  if(document.getElementById("address").value=="" || trim(document.getElementById("address").value)=="Type Name Here" )
  {
    alert("Please fill the Business Name");
    document.getElementById("address").focus();
    return false;
  }
} 
```

[编辑：您可以在我的网站上](http://tinyurl.com/cyns9jt)查看搜索麦当劳的结果。您还可以在 url 中检查传递给查询的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:40:29.997

1.  Actually you have only 1 infoWindow-object for all markers, you need 1 for every single marker. replace the mouseover-and-click-part of the `callback`-function with the following:

    ```
    window.zIndex= window.zIndex||100;
    google.maps.event.addListener(marker, 'mouseover', (function (marker, i,infowindow) {
        return function () {
            var contentString = '<div id="infowindow' + i + '"><table width="100%"><tr><td>'+results[i].name+'</td></tr><tr><td style="word-wrap: break-word;">'+getaddress(results[i].vicinity)+'</td></tr><tr><td align="center"><a target="_blank" class="sty-action-buttn" href=" http://www.franchiseopportunities.com/franchisefbo.asp?fboid=">Get More Information</a></td></tr></table></div>';
            infowindow.setContent(contentString);
                 //brings the infoWindow into front
            infowindow.setZIndex(window.zIndex++);
            infowindow.open(map, marker);
        }
    })(marker, i, new google.maps.InfoWindow())); 
    ```

2.  It may be disputed :D, but McDonalds is rather a restaurant than a store, you should change the type to "restaurant"

# javascript - 使用数组进行 javascript 验证

> ID：12331162
> 
> 赞同：1
> 
> 时间：2012-09-08T13:30:52.830
> 
> 标签：javascript, html, forms, jsp, validation

我编写了一个 javascript 函数来验证用户输入数据是否为空。名为“isNotEmpty()”的函数标识文本框为空。但是，main 函数向 JSP 页面返回了一个 true 语句。因此表单被提交。

根据表单的输入触发第 2 和 3 号警报。但是警报 No1 在任何情况下都不会触发。

请检查并帮助我。谢谢你。

```
var firstName;
var data  = new Array(); 

function formEntryValidationTest() {
    firstName = document.forms["regForm"]["firstName"];
    data[0] = isNotEmpty(firstName);//check the first name is empty

    for(var i=0;i<data.length;i++) {
        if(data[i]=="false")
        {
            alert("Check"); //alert No-1
            return false;
        }
    }
}

// this is the function to check whether the input is not empty
function isNotEmpty(obj) {
    if(obj.value!="") {
        alert("true"); //alert No-2
        return "true";
    }
    else
    {
        alert("false");//alert No-3
        return "false";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T13:33:46.293

您返回的是字符串`"false"`而不是布尔值`false`，它在 JavaScript 中计算为“真实”值。

将 return 语句更改`isNotEmpty`为`return true;`和`return false;`并将条件更改`formEntryValidationTest`为`if (!data[i])`。

另外，你入住的条件`isNotEmpty`太严格了。它将返回 true for `undefined`and `null`，这可能是您的代码无法正常工作的原因。把它改成这样：

```
function isNotEmpty(value){
  return value ? value.length > 0 : false;
} 
```

然后直接传递输入值而不是传递输入对象本身：

```
data[0] = isNotEmpty(firstName.value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T13:46:47.470

您正在使用字符串“true”和“false”而不是布尔值 true 和 false。删除引号，如下所示：

```
 return true

instead of 

   return "true" 
```

在你的 if 语句中做同样的事情：

```
 if(data[i]==false)
instead of
    if(data[i]=="false") 
```

（注意没有引号）

# javascript - Uploadify - 随机 ID 返回表单问题

> ID：12331171
> 
> 赞同：0
> 
> 时间：2012-09-08T13:31:55.817
> 
> 标签：javascript, jquery, uploadify

我有以下代码，一旦上传文件，它应该会向表单返回一个随机字符串。之前添加`onUploadSuccess`代码，它工作正常，但如果我尝试上传多个文件，每个文件将具有相同的 ID。我使用 PHP 来生成随机 ID 修复了这个问题，但现在我在更新表单时遇到了问题。

我要更新的 ID 是“数据”，但是当我上传文件时，出现`Uncaught TypeError: Object [object Object] has no method 'call'`错误。

如果有人能指出我正确的方向，将不胜感激。如果您需要更多信息，请告诉我。

Javascript：

```
<script>
        var sessid = ''; 
        $(document).ready(function() {

            $('#myModal').modal({show: false});
            $('#mm').modal({show: false});

                $('#file_upload').uploadify({
                    'fileObjName': 'file',
                    'fileSizeLimit': '8MB',
                    'buttonText': 'BROWSE FILE(S)...',
                    'fileTypeExts': '*.JPEG; *.GIF; *.PNG; *.APNG; *.TIFF; *.BMP; *.PDF; *.XCF',
                    'cancelImg': 'uploadify-cancel.png',
                    'swf': 'uploadify.swf',
                    'uploader': 'uploadify.php',
                    'auto': false,
                    'onUploadSuccess': $("data").livequery(function(file, data, response){
                            document.getElementById("data").innerHTML=data;
                    })
                });
          });
    </script> 
```

PHP：

```
<?php
if ( is_uploaded_file( $_FILES['file']['tmp_name'])) {

$tempFile = $_FILES['file']['tmp_name'];
$fileParts = pathinfo($_FILES['file']['name']);
$randName = substr(sha1_file($_FILES['file']['tmp_name']), rand(0,30), 7);
$targetFile = 'uploads/'.$randName.'.' . $fileParts['extension'];

move_uploaded_file($tempFile,$targetFile);
echo $randName;
} else {
echo 'Malformed data';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:16:40.550

我认为您的问题是您需要将函数**定义**提供给“onUploadSuccess”选项；摆脱**$("data").livequery( )**。

采用：

```
'onUploadSuccess': function(file, data, response){ 
                            document.getElementById("data").innerHTML=data; 
                    } 
```

# mysql - PHP/MySQL - 无法更新表单

> ID：12331172
> 
> 赞同：0
> 
> 时间：2012-09-08T13:32:12.520
> 
> 标签：mysql

我一直在尝试更新包含复选框的表单，这比我预期的要难一些。

现在我认为我做的一切都是正确的，它只是没有更新。我现在不知道为什么。

这是带有表单的页面：

```
<?php 

include "style.css";
include "connect.php";
include "header.php";

//This code runs if the form has been submitted

$id = htmlspecialchars($_GET["id"]);
$query  = "SELECT * FROM draaiboek_users WHERE id = '$id'";
$result = mysql_query($query);
$data=mysql_fetch_array($result);

?>

<table>
<p align="right"><button onclick="history.go(-1);">Terug</button></p>
</table>

<form action="users-update.php" method="post">
<input type="hidden" name=ud_id" value="<? echo $id; ?>">

<table border="0">
<br>
<tr><td>Gebruikersnaam:</td><td>

<input type="text" name="ud_username" maxlength="60" value="<? echo ($data['username']); ?>">

</td></tr>

<tr><td>Module Basisgegevens:</td><td>

<input type="checkbox" name="ud_mod_basisgegevens" value="1"<?php if($data['mod_basisgegevens'] == '1') echo 'checked'; ?>>

</td></tr>

<tr><td>Module Personeel:</td><td>

<input type="checkbox" name="ud_mod_personeel" value="1"<?php if($data['mod_personeel'] == '1') echo 'checked'; ?>>

</td></tr>

<tr><td>Module Vrijwilligers:</td><td>

<input type="checkbox" name="ud_mod_vrijwilligers" value="1"<?php if($data['mod_vrijwilligers'] == '1') echo 'checked'; ?>>

</td></tr>

<tr><td>Module Gasten:</td><td>

<input type="checkbox" name="ud_mod_gasten" value="1"<?php if($data['mod_gasten'] == '1') echo 'checked'; ?>>

</td></tr>

<tr><td>Module Artistiek:</td><td>

<input type="checkbox" name="ud_mod_artistiek" value="1"<?php if($data['mod_artistiek'] == '1') echo 'checked'; ?>>

</td></tr>

<tr><td>Module Publiekswerking:</td><td>

<input type="checkbox" name="ud_mod_publiekswerking" value="1"<?php if($data['mod_publiekswerking'] == '1') echo 'checked'; ?>>

</td></tr>

<tr><td>Module Techniek:</td><td>

<input type="checkbox" name="ud_mod_techniek" value="1"<?php if($data['mod_techniek'] == '1') echo 'checked'; ?>>

</td></tr>

<tr><td>Module Financien:</td><td>

<input type="checkbox" name="ud_mod_financien" value="1"<?php if($data['mod_financien'] == '1') echo 'checked'; ?>>

</td></tr>
<tr><th colspan=2><br><input type="submit" name="submit" 
value="Update"></th></tr> </table>

</form> 
```

这是更新页面：

```
<html>
<head>
<?php

include 'style.css';
include 'connect.php';
include 'security.php';
include 'header.php';

?>
</head>

<body>

<table>

<?php 
  $ud_id = $_POST['ud_id'];
  $ud_username = $_POST['ud_username'];
  $ud_mod_basisgegevens = ($_POST['ud_mod_basisgegevens'] == '1') ? "1" : "0";
  $ud_mod_personeel = ($_POST['ud_mod_personeel'] == '1') ? "1" : "0";
  $ud_mod_vrijwilligers = ($_POST['ud_mod_vrijwilligers'] == '1') ? "1" : "0";
  $ud_mod_gasten = ($_POST['ud_mod_gasten'] == '1') ? "1" : "0";
  $ud_mod_artistiek = ($_POST['ud_mod_artistiek'] == '1') ? "1" : "0";
  $ud_mod_publiekswerking = ($_POST['ud_mod_publiekswerking'] == '1') ? "1" : "0";
  $ud_mod_techniek = ($_POST['ud_mod_techniek'] == '1') ? "1" : "0";
  $ud_mod_financien = ($_POST['ud_mod_financien'] == '1') ? "1" : "0";

  $query = "UPDATE draaiboek_users SET username = '$ud_username' mod_basisgegevens = '$ud_mod_basisgegevens' mod_personeel = '$ud_mod_personeel' mod_vrijwilligers = '$ud_mod_vrijwilligers' mod_gasten = '$ud_mod_gasten' mod_artistiek = '$ud_mod_artistiek' mod_publiekswerking = '$ud_mod_publiekswerking' mod_techniek = '$ud_mod_techniek' mod_financien = '$ud_mod_financien' WHERE id = '$ud_id'";

  mysql_query($query);
  echo "Record updated";
  mysql_close();
?>

</table>
</body>
</html> 
```

任何想法这是怎么来的？

谢谢，
大安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T11:45:22.713

您的表单中缺少某些内容

您还没有为 ud_id 添加双引号

```
<input type="hidden" name=ud_id" value="<? echo $id; ?>"> 
```

您尚未为输入添加 id 并设置值 id 您必须在更新之前获取行的 id 实现为

```
<input type="hidden" name="ud_id" value="<?php echo $data['id'];?>" id="<?php echo $data['id'];?>"> 
```

所以只有当 id 通过 POST 正确传递时，才会对属于该行 id 的特定列进行更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:54:50.467

Daan，您在 SQL 查询中使用了不正确的语法 - 您忘记了逗号，您还必须正确使用引号并`mysql_real_escape_string`至少添加，以使您的代码免受[SQL 注入](https://stackoverflow.com/questions/11939226/sql-injections-and-adodb-library-general-php-website-security-with-examples/12123649)的影响。

### 您的代码的正确示例应该是：

```
$query = "
UPDATE 
    draaiboek_users 
SET 
    username = '".mysql_real_escape_string($ud_username)."',
    mod_basisgegevens = '".mysql_real_escape_string($ud_mod_basisgegevens)."',
    mod_personeel = '".mysql_real_escape_string($ud_mod_personeel)."',
    mod_vrijwilligers = '".mysql_real_escape_string($ud_mod_vrijwilligers)."',
    mod_gasten = '".mysql_real_escape_string($ud_mod_gasten)."',
    mod_artistiek = '".mysql_real_escape_string($ud_mod_artistiek)."',
    mod_publiekswerking = '".mysql_real_escape_string($ud_mod_publiekswerking)."',
    mod_techniek = '".mysql_real_escape_string($ud_mod_techniek)."',
    mod_financien = '".mysql_real_escape_string($ud_mod_financien)."' 
WHERE 
    id = '".mysql_real_escape_string($ud_id)."'";

mysql_query($query);
echo "Record updated";
mysql_close(); 
```

您的代码易受 SQL 注入攻击。我强烈建议您在将数据插入数据库时​​使用[mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php)以防止[SQL 注入](https://stackoverflow.com/questions/11939226/sql-injections-and-adodb-library-general-php-website-security-with-examples/11941396)，作为一种快速解决方案或更好地使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

在`mysql_*`函数的 PHP 手册章节的介绍中指出，不建议使用此扩展来编写新代码。相反，您应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或应该使用[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展。

### 除了在您的 HTML 中，您必须在 之前使用一个空格`checked="checked"`，例如：

`<input type="checkbox" name="ud_mod_techniek" value="1"<?php if($data['mod_techniek'] == '1') echo ' checked="checked"'; ?>>`

否则，在输出中，属性`value`和`checked`可能会一起打印出来，结果您的 HTML 将变为非[W3C 有效](http://validator.w3.org/)返回`No space between attributes`错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T13:49:56.443

列/值分配之间没有逗号

```
$query = "UPDATE draaiboek_users SET username = '$ud_username', mod_basisgegevens = '$ud_mod_basisgegevens', mod_personeel = '$ud_mod_personeel', mod_vrijwilligers = '$ud_mod_vrijwilligers', mod_gasten = '$ud_mod_gasten', mod_artistiek = '$ud_mod_artistiek', mod_publiekswerking = '$ud_mod_publiekswerking', mod_techniek = '$ud_mod_techniek', mod_financien = '$ud_mod_financien' WHERE id = '$ud_id'"; 
```

参考：[更新语法](http://dev.mysql.com/doc/refman/5.0/en/update.html)。

`or die`执行查询时考虑添加

```
$result = mysql_query($query) or die ("Error in query: $query. ".mysql_error()); 
```

# python - Python 3.3 的产量来自

> ID：12331174
> 
> 赞同：6
> 
> 时间：2012-09-08T13:32:53.837
> 
> 标签：python, functional-programming, yield

Python 3 带来了[`yield from`](http://docs.python.org/dev/whatsnew/3.3.html#pep-380)语义。据我了解，它应该屈服于最外层的生成器，在这种情况下，我希望这段代码在`N`.

```
from collections import Iterable

def flatten(L):
  for e in L:
    if isinstance(e, Iterable):
      yield from flatten(e)
    else:
      yield e 

N = 100
L = [-1]
for i in range(N):
  L = [i, [L], i]
for i in range(100):
  f = list(flatten(L))
print(len(f)) 
```

但是，如果我设置`N=200`计算时间大约是四倍，这表明 flatten 在 的长度上是二次的`L`。我不明白为什么会这样，因为代码只访问每个元素一次，并且`yield from`关键字应该直接从内部生成器将值发送到将术语收集到列表中的位置。

这是一个错误，根本不是故意的，还是我用错了？有没有一种在 Python 中进行 O(N) 展平的好方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-08T14:40:03.103

`yield from`，就像`for item in x: yield x`，*是*线性的。但是，函数调用很慢，并且由于嵌套在您的 中`l`，当您将 N 加倍时，您不仅将术语数加倍，而且将所需的调用次数加倍。任何与调用次数有关的东西，比如函数开销本身，尤其是。由于递归，任何`yield from`开销、`for`循环初始化开销等都会导致问题。如果这是正确的，那么我们会期望具有相同数量的元素且没有嵌套的列表将是线性的，中间嵌套将介于两者之间，并且大量嵌套将是超慢的。这就是我们所看到的：

```
import timeit

s = """

from collections import Iterable

def flatten(l):
   for e in l:
       if isinstance(e, Iterable):
           yield from flatten(e)
       else:
           yield e 

def build_lots(N):
    l = [-1]
    for i in range(N):
        l = [i, [l], i]
    return l

def build_some(N):
    l = [-1]
    for i in range(N):
        l = [i]+l+[i] if i % 2 else [i,[l],i]
    return l

def build_none(N):
    return range(2*N+1)

"""

def get_time(size, which_build, n=100):
    setup = s + "l = build_{}({});".format(which_build, size)
    ans = timeit.Timer(setup=setup, stmt="z=list(flatten(l))").timeit(n)
    return ans

print('length', 'none','some','lots')
for w in range(0, 500, 50):
    print(2*w+1, 
          get_time(w, 'none'), 
          get_time(w, 'some'),
          get_time(w, 'lots')) 
```

生产

```
length none some lots
1 0.0012789969332516193 0.0006600483320653439 0.000653265044093132
101 0.030214487109333277 0.06863495009019971 0.10554128512740135
201 0.05980244372040033 0.188231083098799 0.3237948380410671
301 0.08960435865446925 0.3752179825678468 0.6493003228679299
401 0.11986956000328064 0.6066137161105871 1.147628225851804
501 0.14737469609826803 0.9323012446984649 1.7087256000377238
601 0.18555369088426232 1.2575508910231292 2.2957410947419703
701 0.20820995513349771 1.712264522910118 3.094764341134578
801 0.23618148919194937 2.100640726275742 4.079551971051842
901 0.26863432209938765 2.617169467266649 4.858607416041195 
```

![时间与嵌套的简单图](../Images/ee78e2d6652dcfcaea98f6565502e7bd.png)

# c++ - Mac 上的 Qt::Sheet 和 QMessageBox::show()

> ID：12331175
> 
> 赞同：4
> 
> 时间：2012-09-08T13:32:54.080
> 
> 标签：c++, macos, qt, qmessagebox

我有一个应用程序，我想在其中向用户提出问题`QMessageBox`，然后做出相应的回应。问题是在 Mac 上我希望对话框显示为工作表，但使用该`open()`方法会立即返回。

```
QMessageBox* msgBox = new QMessageBox(
    QMessageBox::Question,
    "Delete Record?",
    "Are you sure you want to delete this record?"
    QMessageBox::Yes | QMessageBox::No,
    this,
    Qt::Sheet);

int ret = msgBox->exec(); // does not show up as a sheet on Mac
msgBox->open(); // shows up as a sheet but returns immediately 
```

无论如何我可以得到用户在一张纸上按下的哪个按钮而不必实现我自己的`QDialog`？`msgBox`我连接有任何信号吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T22:45:31.907

该文件[建议](http://qt-project.org/doc/qt-4.8/qt.html#WindowType-enum)改用`setWindowModality()`。以下代码适用于我：

```
auto m = new QMessageBox(&window);
m->setText("some text here");
m->setWindowModality(Qt::WindowModal);
m->exec(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:01:00.367

这是我的应用程序中的 PyQt 示例，但您会明白的：

```
reply = QtGui.QMessageBox.question(self, 'Delete',
            "Are you sure?", QtGui.QMessageBox.Yes |
                QtGui.QMessageBox.No, QtGui.QMessageBox.No)
    if reply == QtGui.QMessageBox.Yes:
         #some action if YES clicked 
```

# java - 适用于 Android 的 IntBuffer、ByteBuffer、ByteOrder 和 GLES20

> ID：12331178
> 
> 赞同：1
> 
> 时间：2012-09-08T13:33:27.557
> 
> 标签：java, android

我有三个代码片段，它们的行为应该相似，或者可能不相似，我仍在研究 OpenGL ES 如何绑定到 Java for Android。但是我真的很想知道为什么片段 B 和 C 的行为不同：

以下（A）的作品：

```
 ByteBuffer bb = ByteBuffer.allocateDirect(8);
        bb.order(ByteOrder.nativeOrder());
        IntBuffer ib = bb.asIntBuffer();
        Log.d("Info", "Generating buffers...");
        GLES20.glGenBuffers(2, ib);
        Log.d("Info", "Done!");
        int buff1 = ib.get();
        int buff2 = ib.get();
        Log.d("A) buff1", String.format("%d", buff1));
        Log.d("A) buff2", String.format("%d", buff2)); 
```

以下 (B) 不起作用，并导致 glGenBuffers 上的 SIGSEGV；请注意，与前一个的唯一区别在于 allocate 调用而不是 allocateDirect：

```
 ByteBuffer bb = ByteBuffer.allocate(8);
        bb.order(ByteOrder.nativeOrder());
        IntBuffer ib = bb.asIntBuffer();
        Log.d("Info", "Generating buffers...");
        GLES20.glGenBuffers(2, ib);
        Log.d("Info", "Done!");
        int buff1 = ib.get();
        int buff2 = ib.get();
        Log.d("B) buff1", String.format("%d", buff1));
        Log.d("B) buff2", String.format("%d", buff2)); 
```

以下 (C) 有效，这真的让我感到惊讶，因为它再次调用 allocate 而不是 allocateDirect：

```
 IntBuffer ib = IntBuffer.allocate(2);
        Log.d("Info", "Generating buffers...");
        GLES20.glGenBuffers(2, ib);
        Log.d("Info", "Done!");
        int buff1 = ib.get();
        int buff2 = ib.get();
        Log.d("C) buff1", String.format("%d", buff1));
        Log.d("C) buff2", String.format("%d", buff2)); 
```

使用“工作”一词，我的意思是日志中没有出现错误，并且 buff1 和 buff2 得到正的“合理”值，例如 70001、140002 或 210004，它们看起来可能是名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:35:08.160

答案似乎在[JOGL Javadoc page](http://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/)，在接口 GL 的文档中，方法：

```
void glGenBuffers(int n, IntBuffer buffers) 
```

这里说缓冲区应该是*直接* **OR** *数组支持的*IntBuffer，并且在 (B) 中创建的缓冲区都不是这些，而 (A) 是直接的但它没有支持，并且 (C) 不是直接的但它是支持。

现在我想知道是否有官方的谷歌文档将 OpenGL 绑定到 Dalvik 系统，或者我应该假设它完全是 JOGL？它不应该相同，因为接口名称不同（例如 JOGL 的 GLES2 与 Android GLES20）。

# delphi - 是否可以在 Windows Vista 或更高版本中从服务应用程序创建托盘图标？

> ID：12331185
> 
> 赞同：2
> 
> 时间：2012-09-08T13:34:32.513
> 
> 标签：delphi, windows-services, tray

是否可以在 Windows Vista 或更高版本下从 Delphi 服务应用程序创建托盘图标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T13:42:07.483

不它不是。服务在会话 0 中运行。您的交互式进程、您的桌面都在不同的会话中运行，每个登录用户一个。

这种隔离很重要，旨在增强安全性。即使在 Windows XP 中，您也不打算在服务和桌面之间进行直接交互。无论如何，开发人员都这样做了，所以微软在 Vista 中禁止了它。

标准做法是通过其他方式创建托盘图标进程，例如 HKLM\Software...\Run。然后，该交互式进程可以使用 IPC 与服务进行通信。例如命名管道。

现在，在某些极其有限的情况下，服务可以在桌面上启动进程，这在技术上是可行的。在这里阅读：http: [//blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later .aspx](http://blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later.aspx)

如果你还想尝试，读完之后，祝你在世界上一切顺利！

# c++ - 静态字符数组和指针内存

> ID：12331186
> 
> 赞同：0
> 
> 时间：2012-09-08T13:34:36.077
> 
> 标签：c++, arrays, static

一个 C++ 程序由两个 .cpp 文件组成，main.cpp 和 f.cpp。main.cpp文件的代码如下：

```
//main.cpp
#include <iostream>
using namespace std;

void f(char* s,int n);

const int N=10;
static char s[N];
static char a[N];

int main ()
{
    int i;  
    for (i=0; i<N; i++)
        a[i]='0'+i;

    for (i=0; i<N; i++)
        cout<<a[i]; 
    cout<<'\n';

    f(s,N);

    for (i=0; i<N; i++)
        cout<<a[i]; 

    cout<<'\n';
} 
```

该函数`f`在文件 f.cpp 中定义。该程序编译没有错误和警告。执行时，程序会定期结束，并保留以下内容`cout`：

```
0123456789
!123456789 
```

您对该程序的有效性和行为有何评论？详细解释。

*我想 f 函数正在以某种方式非法访问 a 的内存，可能是因为 s 就在内存中的 a 之前，所以会发生带有索引的事情……但是，我真的不确定，因为我想`static`也会以某种方式改变事情……*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:45:27.583

我猜的代码`f`是：

```
void f(char* arr, int len)
{
    arr[len + 2] = '!';
} 
```

它经过长度`s`并进入存储的内存，在第一个位置`a`写入 a 。`!`至少在 Windows 上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T13:48:46.850

这*取决于*编译器。，`gcc-4.3.4`如果您可以定义`f`为：

```
void f(char* s,int n) { s[-n] = '!' ; } //danger! 
```

生成您发布的输出。这是在线演示：http: [//ideone.com/8YT7k](http://ideone.com/8YT7k)

但请**注意**，这样的编码*真的很*糟糕，你不应该这样编码，因为实际行为取决于编译器、它的版本、设置和选项。

静态数组是否*彼此靠近*取决于编译器，您的程序不应该这样假设。然而，在这种情况下，它们被相邻放置，但这似乎取决于其他因素。例如，如果我在代码的末尾打印 和 的地址，而不从代码中删除任何内容，则`s`地址高于，但如果我删除了代码，则地址高于. 看看自己：`a``s``a``a``s`

*   [http://ideone.com/HTtKn](http://ideone.com/HTtKn) （`s`地址高于`a`）
*   [http://ideone.com/ZVSjk](http://ideone.com/ZVSjk) （`a`地址高于`s`）

第一个打印：

```
0x804a0df   //address of s
0x804a0d5   //address of a
0xa         //difference of s and a i.e (s-a) 
```

但是第二个打印了这个：

```
0x804a0d5   //address of s
0x804a0df   //address of a
0xa         //difference of a and s i.e (a-s) [reversed!] 
```

所以这取决于编译器放置静态数组的心情！

# java - 未找到 WebApplicationContext：没有 ContextLoaderListener

> ID：12331187
> 
> 赞同：2
> 
> 时间：2012-09-08T13:34:46.050
> 
> 标签：java, spring, spring-mvc

我是 Spring MVC 的新手。所以我从非常简单的 MVC 应用程序开始。在这个应用程序中，我正在尝试提交登录表单，但它给出了下面提到的错误：

```
SEVERE: Servlet.service() for servlet [jsp] in context with path [/My-project] threw exception [An exception occurred processing JSP page /profile/logon.jsp at line 8

    5: </head>
    6: <body>
    7: <h2>USER Login</h2>
    8: <form:form method="post" action="addlogon.jsp">
    9: 
    10:     <table>
    11:     <tr>

    Stacktrace:] with root cause
    java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered?
        at org.springframework.web.context.support.WebApplicationContextUtils.getRequiredWebApplicationContext(WebApplicationContextUtils.java:81)
        at org.springframework.web.servlet.support.RequestContextUtils.getWebApplicationContext(RequestContextUtils.java:81)
        at org.springframework.web.servlet.support.RequestContext.initContext(RequestContext.java:219)
        at org.springframework.web.servlet.support.JspAwareRequestContext.initContext(JspAwareRequestContext.java:74)
        at org.springframework.web.servlet.support.JspAwareRequestContext.<init>(JspAwareRequestContext.java:48)
        at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:75)
        at org.apache.jsp.profile.logon_jsp._jspx_meth_form_005fform_005f0(logon_jsp.java:110)
        at org.apache.jsp.profile.logon_jsp._jspService(logon_jsp.java:79)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
        at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1815)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source) 
```

以下是我的代码详细信息：

网页.xml：

```
 <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

spring-servlet.xml

```
<context:component-scan
    base-package="com.paradigamatic.marchent.web.controller" />
<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/profile/"
      p:suffix=".jsp" p:viewClass="org.springframework.web.servlet.view.JstlView"/> 
```

控制器类：

```
 @Controller
@SessionAttributes
public class LogonController  {

    @RequestMapping(value="/profile/addlogon", method = RequestMethod.POST)
    public String addlogon(@ModelAttribute("userlogon") UserLogon userlogon, BindingResult result){

        String user=userlogon.getUsername();
        String user1=userlogon.getPassword();
            return "redirect:logon.jsp";
        }

@RequestMapping(value="/profile/logon", method = RequestMethod.GET)
public ModelAndView handalRequestInternal(HttpServletRequest req,HttpServletResponse res)
{

    System.out.println("I am in controller");
    return new ModelAndView("logon", "command", new UserLogon());

} 
```

请告诉我为什么我得到那个例外？任何帮助都将是可观的。提前致谢。

问候，戈帕尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:29:22.190

您需要在 web.xml 中添加一个上下文加载侦听器：

```
<context-param>
    <param-name>contextConfigLocation</param-name>        
<param-value>/WEB-INF/yourApplicationContext.xml</param-value>
</context-param> 
```

听者：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T02:34:56.263

您使用的是什么版本的 Spring MVC？使用源代码检查堆栈跟踪。如果您使用 Maven，您的 IDE 应该能够将堆栈跟踪行与 jar 源代码链接起来。

# susy-compass - 6 列网格中的 5 列

> ID：12331193
> 
> 赞同：1
> 
> 时间：2012-09-08T13:35:21.533
> 
> 标签：susy-compass

我有一个 6 列的固定宽度网格，但我希望一个特定的“行”有 5 列，这可能吗？

```
@import "susy";
@include border-box-sizing;

// The 1000px grid
$total-columns: 6;
$column-width: 150px;
$gutter-width: 20px;
$grid-padding: 0;

$container-style: static;
$container-width: 1000px;

$show-grid-backgrounds  : true; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:58:06.840

当然是。所有 Susy 数学都简单地基于`columns / context`，因此您可以通过向 Susy 谎报上下文来获得任意数量的列。

```
$total-columns: 6;

.container {
  @include container;
  .tricky {
    @include span-columns(1,5); // tell Susy there are 5 columns, and suddenly there are.
  }
} 
```

如果您想更诚实一点，或者将 5 作为更大代码块的默认上下文，您可以简单地将代码包装在该块中`layout(5) { ... }`或中。`with-grid-settings(5) { ... }``$total-columns == 5`

# javascript - 如何以编程方式让字符串的所有 unicode 实体自行解析？

> ID：12331195
> 
> 赞同：3
> 
> 时间：2012-09-08T13:35:39.560
> 
> 标签：javascript, regex, security, unicode, xss

我正在尝试缓解 XSS。我怎样才能避免这种情况：

```
j&#X41vascript:alert('test2') 
```

在`href`一个链接？

我尝试了以下方法，但它只是将上述字符串的文字、未解析值分配为 href 的相对路径，而不是`javascript:`能够触发代码执行的正确 href。我想知道攻击者如何能够利用它。

我尝试了以下方法：

```
a = document.createElement('a'); 
```

然后这两个：

```
a.href = 'j&#X41vascript:alert('test2')'; 
```

还有这个：

```
a.setAttribute('href', "j&#X41vascript:alert('test2')"); 
```

但是两者都`"j&#X41vascript:alert('test2')"`在查询时返回`a.href`，而不是期望的（或不期望的，取决于您的观点）`javascript:alert('test2');`

如果我可以让所有实体解析，那么我可以解析出`javascript:`结果字符串中所有出现的 ，并且是安全的——对吗？

我在想的另一件事是，如果有人这样做怎么办`j&#&#X58;1;vascript:steal_cookie();`。我的意思是，从理论上讲，它们可以具有无限的递归级别，并且最终都会解决，对吗？

* * *

# 编辑：这段代码看起来如何？

```
function resolve_entities(str) {
  var s = document.createElement('span')
    , nestTally = str.match(/&/) ? 0 : 1
    , limit = 5
    , limitReached = false;

  s.innerHTML = str;
  while (s.textContent.match(/&/)) {
    s.innerHTML = s.textContent;
    if(nestTally++ >= limit) {
      limitReached = true;
      break;
    }
  }

  return s.textContent;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T15:12:19.303

*当包含它们的字符串被解析为 XML 或 HTML 时，* XML/HTML 字符实体类似于`&#x41;`或`&amp;`被解码。通常，当它们作为 HTML 页面的一部分从服务器发送到浏览器时会发生这种情况，尽管还有其他情况（例如在 JavaScript 中分配给）可能导致字符串被解析为 XML 或 HTML。*`element.innerHTML`*

 *在 JavaScript 中读取或写入元素属性*不会*触发 XML/HTML 解析，因此不会扩展字符实体。如果你写

```
a.href = "j&#x41;vascript:alert('test')"; 
```

那么该元素的`href`属性`a`将是`j&#x41;vascript:alert('test')`, & 和所有。

需要注意的重要一点是，每当将字符串解析为 XML 或 HTML 时，字符实体都会被解码*一次*。因此，`&x41;`变为`a`，而`&amp;#x41;`变为`&#x41;`。它*不会*“最终全部解决”，除非您正在做一些愚蠢的事情，例如反复阅读`.textContent`和分配给。`.innerHTML`

解析完成后，输出中的任何字符序列是否看起来像 XML/HTML 字符实体*完全无关紧要——也就是说，**除非您随后获取输出并**再次*通过 XML/HTML 解析器提供它。（这样做很少有用，而且通常只是由于诸如分配给`.innerHTML`何时应该分配给之类的错误而发生`.textContent`。）

* * *

无论如何，看看评论，你说你正在编写一些客户端 JavaScript 代码，这些代码从你无法控制的服务器获取一些不受信任的数据，并且你担心简单地将数据分配给`.innerHTML`可能允许 XSS 攻击。如果是这样，有两种情况：

1.  您收到的数据是纯文本。在这种情况下，您应该将其分配给它`.textContent`并完成它。

2.  实际上，您收到的数据是 HTML。在这种情况下，您确实需要承担对其进行消毒的艰巨而费力的工作。 [这个来自 Caja 项目的 JavaScript HTML sanitizer](http://code.google.com/p/google-caja/wiki/JsHtmlSanitizer)可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T13:58:50.107

只要内容格式正确，就可以使用 XML 安全地解析它。像这样的东西，至少作为一个起点（[小提琴](http://jsfiddle.net/7GEFQ/)）：

```
function getXmlDoc(s) {
    var parser;
    if(DOMParser){
        parser = new DOMParser();
        xmlDoc = parser.parseFromString(s, "text/xml");
    } else {
        // IE
        xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = false;
        xmlDoc.loadXML(s); 
    }
    return xmlDoc;
}

var xml = getXmlDoc("<root>j&#x0061;vascript:alert('test2')</root>");
alert(xml.documentElement.firstChild.nodeValue); 
```

​</p>

但是，我可能只是逃避不安全的字符：

```
function safeEscape(s) {
    return s.replace(/[\&\<\>]/g, function($0) {
        switch($0) {
            case '&': return '&amp;';
            case '<': return '&lt;';
            case '>': return '&gt;';
        }
    });
} 
```

您不应该遇到递归转义字符的任何问题，因为这是不允许的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T14:03:40.487

缓解 XSS 的最佳方法是使用适合输出所在上下文（HTML、HTML 属性、CSS、JS 等）的适当编码方法对呈现到屏幕的所有不受信任的输出进行编码。

即使您设法解决了这个问题，也可能存在其他使用您没有想到的编码的攻击媒介。黑名单过滤器很少（如果有的话）是保护您的网站的最有效方法。

~~我不确定您使用的是哪种服务器端语言，但可能有它的编码库。[ESAPI](https://www.owasp.org/index.php/Category%3aOWASP_Enterprise_Security_API)可用于多种语言，并且是为此目的而构建的（以及许多其他语言）。~~

更新：由于您需要为此使用 JavaScript，您可能需要查看[ESAPI Encoding Project (Reform)。](http://code.google.com/p/reform/source/browse/#svn/trunk/src/javascript)它有一个 JS 版本，看起来可以满足您的需求。我没有测试过它，但如果它像 ESAPI 一样工作，那么它可能会解决你的问题。

要了解有关每个上下文正确编码的更多信息，请查看[OWASP XSS 预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)*

# mysql - 我如何根据字段值执行查询作为更新或插入

> ID：12331197
> 
> 赞同：0
> 
> 时间：2012-09-08T13:35:53.783
> 
> 标签：mysql

我有字段表

```
name quantity  expiry
a     2        14/12/2012    
b     3        13/2/2013 
```

如果名称存在且数量为 0，则查询将用作更新查询，否则将用作插入查询。可以存在多个具有相同名称的行，但具有不同的到期时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:37:40.650

你正在寻找`INSERT ... ON DUPLICATE KEY UPDATE`. 请参阅[文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

编辑：不过，我不确定“如果数量为 0”部分是否可以完成，所以这可能无法完全回答您的问题。

# iphone - didSelectRowAtIndexPath 不起作用

> ID：12331199
> 
> 赞同：0
> 
> 时间：2012-09-08T13:36:15.490
> 
> 标签：iphone, objective-c, ios, uitableview, delegates

在我的应用程序中，我想从我的 UITableView 中捕捉反应，但我不知道为什么它不起作用：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 NSLog(@"touched!");
} 
```

我定义了委托

```
@interface TableViewController : UIViewController <UITableViewDelegate> 
```

我从 nib 文件中勾选了“用户交互启用”，向文件所有者显示了委托。

我还写信`tableView.delegate = self;`给 viewDidLoad。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T06:49:14.377

尝试在 IB 中建立代表连接。并检查您是否声明了这个：UITableViewDataSource

连同`UITableViewDelegate`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T13:55:10.077

确保您`UITableViewDataSource`的标题中也有委托。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T15:48:14.683

为您的桌子设置`datasource`。将一些数据放入表 n 中，然后查看是否调用了委托。如果它仍然没有，通常代表没有被调用的问题是它没有被正确设置。！所以，仔细检查你的代码.. :)

# c# - 在 C# 中比较两个 PDF 文件

> ID：12331205
> 
> 赞同：2
> 
> 时间：2012-09-08T13:37:24.907
> 
> 标签：c#

我有两个 pdf 文件，我想比较这两个 pdf 文件并在消息框中打印差异。

到目前为止，我有这个（但它没有像我预期的那样工作）：

```
 private void button1_Click(object sender, EventArgs e)
    {
        string str1 = this.textBox1.Text;
        string str2 = this.textBox2.Text;

        string comparison = str1.Replace(str2,"");
        MessageBox.Show(comparison);
    }

 private void ParsePDF(string filePath)
    {
        string text = string.Empty;

        PdfReader reader = new iTextSharp.text.pdf.PdfReader(filePath);
        byte[] streamBytes = reader.GetPageContent(1);
        PRTokeniser tokenizer = new PRTokeniser(streamBytes);

        while (tokenizer.NextToken())
        {
            if (tokenizer.TokenType == PRTokeniser.TokType.STRING)
            {
                text += tokenizer.StringValue;
            }
        }
        this.textBox1.Text = text.ToString();
        this.textBox2.Text = text.ToString();
    }

} 
```

就在下面我称之为方法： ParsePDF("C://Users//lf222aw//Desktop//file1.pdf");

我的程序是这样工作的：假设我有一个带有文本“我爱 stackoverflow”的文本框和另一个文本框“我 stackoverflow”，我的程序打印结果是：“我爱 stackoverflow”，我想要打印的是“爱”作为两个文件之间的区别

任何想法？？问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-27T11:45:31.207

检查下面链接中的 Github 存储库。

[谷歌差异匹配补丁](https://github.com/lqc/google-diff-match-patch)

它是一个用于字符串比较的开源库。它是用包括 C# 在内的多种语言编写的。您可以计算两个字符串值或文本文档之间的差异差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:00:31.383

如果将文件拆分为单词，则可以使用以下内容：

```
 Dim str1 = New String() {"I", "love", "stackoverflow"}
    Dim str2 = New String() {"I", "stackoverflow"}
    Dim Diff = str1.Where(Function(x) Not str2.Contains(x)).ToArray() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T13:53:27.333

您使用`String.Replace`不正确。它应该在字符串 1 中找到所有出现的字符串 2 并将其替换为给定的文本。在您的示例中，您试图查找 all `I stackoverflow`in`I love stackoverflow`但没有匹配项，这就是您的程序仍在打印的原因`I love stackoverflow`。查看这篇关于字符串比较的 SO 帖子。[如何找到两个字符串之间的差异？](https://stackoverflow.com/questions/208094/how-to-find-difference-between-two-strings)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T13:55:00.317

如果我正确阅读了您的代码，那么您正在将 1 页的内容写入两个文本框。

同样使用您的替换语句，它永远不会起作用，因为“我爱 stackoverflow”中不存在“我 stackoverflow”。

如果你有“ab c”和“a c”。

您会看到“ab c”中不存在“a c”

[如何找到两个字符串之间的差异？](https://stackoverflow.com/questions/208094/how-to-find-difference-between-two-string)

# c# - 在 VS2010 中为 x86 和 x64 处理器编译一个 C# 项目

> ID：12331217
> 
> 赞同：2
> 
> 时间：2012-09-08T13:39:18.340
> 
> 标签：c#, visual-studio-2010, compilation, x86, 64-bit

我有一个在 Visual Studio 2010 中由 C# 语言编写的 Windows 窗体项目。我必须为 x86 和 x64 处理器运行我的 exe。每次我更改配置以编译两种处理器类型时。对于 x86 和 x64 处理器类型一次编译源代码是否有任何更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T13:43:17.697

您应该选择`AnyCPU`配置，如果您的操作系统是 32 位，您的应用程序将以 32 位运行，如果操作系统是 64 位，您的应用程序将以 64 位运行。您应该感谢`JIT`编译器将您的`MSIL`代码转换为托管环境所需的适当位数。

话虽如此，但您应该记住，如果您使用驱动程序或其他未以相同模式编译的库，您会在部署中发现问题。您将需要这两个库 (64/32)，并且需要为目标机器安装/部署正确的库。（想到最初与`ACE/Jet OleDB`供应商的混乱）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T13:41:46.223

您不需要这样做，除非您在某处使用本机代码。一切都编译为[CIL/MSIL](http://en.wikipedia.org/wiki/Common_Intermediate_Language)，它与架构/平台无关。

如上面和最近的评论中所述，使用“任何 CPU”选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T13:43:01.777

您可以使用 AnyCPU 配置。但是，x86 和 x64 程序集都应该在这两种类型的处理器上工作，除非您调用本机代码库（例如 C、C++、Delphi）。这意味着，您可以在 x86 CPU 和操作系统上使用 x64 .NET 程序集。

有关更多信息，您应该阅读[有关平台定位的这篇（或类似）文章](http://www.dottodotnet.com/2010/04/compiling-net-for-specific-target.html)。

# php - 如何在 PHP 的 cURL POST HTTP 请求中包含授权标头？

> ID：12331224
> 
> 赞同：73
> 
> 时间：2012-09-08T13:40:11.710
> 
> 标签：php, http, curl, oauth

我正在尝试通过 Gmails OAuth 2.0 访问用户的邮件，我正在通过 Google 的 OAuth 2.0 Playground 解决这个问题

在这里，他们指定我需要将其作为 HTTP 请求发送：

```
POST /mail/feed/atom/ HTTP/1.1
Host: mail.google.com
Content-length: 0
Content-type: application/json
Authorization: OAuth SomeHugeOAuthaccess_tokenThatIReceivedAsAString 
```

我尝试编写代码来发送此请求，如下所示：

```
$crl = curl_init();
$header[] = 'Content-length: 0 
Content-type: application/json';

curl_setopt($crl, CURLOPT_HTTPHEADER, $header);
curl_setopt($crl, CURLOPT_POST,       true);
curl_setopt($crl, CURLOPT_POSTFIELDS, urlencode($accesstoken));

$rest = curl_exec($crl);

print_r($rest); 
```

不工作，请帮助。:)

**更新：**我接受了*Jason McCreary*的建议，现在我的代码如下所示：

```
$crl = curl_init();

$headr = array();
$headr[] = 'Content-length: 0';
$headr[] = 'Content-type: application/json';
$headr[] = 'Authorization: OAuth '.$accesstoken;

curl_setopt($crl, CURLOPT_HTTPHEADER,$headr);
curl_setopt($crl, CURLOPT_POST,true);
$rest = curl_exec($crl);

curl_close($crl);

print_r($rest); 
```

但我没有得到任何输出。我认为 cURL 在某处默默地失败了。请帮忙。:)

**更新 2：** *NomikOS*的伎俩为我做到了。：） ：） ：） 谢谢！！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-08T13:46:55.710

您拥有大部分代码……</p>

`CURLOPT_HTTPHEADER`for[`curl_setopt()`](http://php.net/manual/en/function.curl-setopt.php)将每个标头作为一个元素的数组。您有一个带有多个标题的元素。

您还需要将*Authorization*标头添加到您的`$header`数组中。

```
$header = array();
$header[] = 'Content-length: 0';
$header[] = 'Content-type: application/json';
$header[] = 'Authorization: OAuth SomeHugeOAuthaccess_tokenThatIReceivedAsAString'; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-08T14:03:31.273

@jason-mccreary 是完全正确的。此外，我建议您使用此代码以在出现故障时获取更多信息：

```
$rest = curl_exec($crl);

if ($rest === false)
{
    // throw new Exception('Curl error: ' . curl_error($crl));
    print_r('Curl error: ' . curl_error($crl));
}

curl_close($crl);
print_r($rest); 
```

编辑 1

要调试，您可以设置`CURLOPT_HEADER`为 true 以使用[firebug::net](https://getfirebug.com/network)或类似方法检查 HTTP 响应。

```
curl_setopt($crl, CURLOPT_HEADER, true); 
```

编辑 2

关于`Curl error: SSL certificate problem, verify that the CA cert is OK`尝试添加此标头（只是为了调试，在生产环境中您应该保留这些选项`true`）：

```
curl_setopt($crl, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($crl, CURLOPT_SSL_VERIFYPEER, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-22T07:29:34.047

使用“内容类型：应用程序/x-www-form-urlencoded”而不是“应用程序/json”

# cuda - CUDA 线程、SMX、SP 和块，它们是如何工作的？

> ID：12331225
> 
> 赞同：6
> 
> 时间：2012-09-08T13:40:18.693
> 
> 标签：cuda, gpgpu, nvidia

我对 CUDA 的工作原理有点困惑，线程是否执行每个相同的指令（SIMT）但使用通过不同索引访问的单个数据？或者它被认为是“不同的数据”（所以它也是 SIMD）？

SMX 是整个 GPU 芯片吗？一个 SMX 应该由多个 SP 组成，每个 SP 一次执行一个线程，是否只分配给一个 SP 的线程块？

我现在有点困惑

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T15:07:03.350

网格启动是线程块的 1-3 维启动。线程块是 1-3 维的线程组。CUDA 工作分配器将线程块分配给 SMX 单元。低端设备可能有 1 个 SMX 单元。一个高端设备可能有 > 10 个 SMX 单元。

SMX 单元将线程块分解为 32 个线程组，称为 warp。SMX 单元一次最多可以分配 64 个 warp 或 16 个块。由于资源限制（块、扭曲、每个线程的寄存器、每个块的共享内存或屏障），数量可能会更少。

每个 SMX 单元有 4 个 warp 调度器，每个调度器负责一个 warp 的子集。在每个周期，warp 调度程序将选择一个合格的 warp 并发出 1 或 2 条指令。为了双重发布，两条指令必须是独立的并且使用不同的执行单元。例如，可以将一条指令分派到浮点单元，将第二条指令分派到加载存储单元。

除了双重发布之外，warp 调度程序还可以向 warp 发布背靠背的独立指令。当检测到依赖关系，或者下一条指令的执行单元很忙，或者 warp 没有指令（等待取指）时，如果一个符合条件的 warp 调度程序将选择一个不同的 warp。

每个线程都有自己的一组通用寄存器、条件代码、谓词代码和本地内存。每个线程都是线程块的成员。所有线程都可以访问线程块资源，包括共享内存和屏障。网格启动中的所有线程都可以访问网格资源，包括常量内存、纹理绑定和表面绑定。所有线程都可以访问全局内存。

# python - 替换位置参数 - 调用带有或不带有元组参数的函数

> ID：12331226
> 
> 赞同：0
> 
> 时间：2012-09-08T13:40:39.183
> 
> 标签：python, arguments, tuples

```
def withPositionalArgs(*args):
    print args, type(args)

def withTupleAsArgument(tupleArg):
    print tupleArg, type(tupleArg)

a=1
b=2
c=[10,20]

print withPositionalArgs(a,b,c)
print withTupleAsArgument(tuple([a,b,c])) 
```

当我运行此代码时：

```
(1, 2, [10, 20]) <type 'tuple'>
None
(1, 2, [10, 20]) <type 'tuple'>
None 
```

疑点：

由于位置参数作为元组传递，这两个函数调用在技术上是否有区别？如果我在打电话时已经可以制作一个元组，是否需要使用位置参数？没有它们也可以工作，不是吗？或者有什么我没有理解或忽略的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:43:33.920

不，两者没有区别。在第一个中，您的 args 最终出现在一个元组中，第二个您正在发送一个元组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:38:19.283

您需要问自己将如何使用您的功能。将参数视为一组不相关的值是否更自然，在这种情况下，位置参数更有意义。或者这些值是否形成一个相关组，在这种情况下，元组更有意义。

您还需要考虑如何使用您的函数。假设您有一个返回值元组的函数：

```
def foo():
    return 1,2,3 
```

并且您想编写一个函数`bar`，其参数是`foo`. 你的两个选择是

```
# Take a sequence of values and store them in a tuple called args
def bar1(*args):
    print args[0]

# Take a tuple of values and store it in t
def bar2(t):
    print t[0] 
```

这里有一些你可以调用这两个函数的方法，`foo`直接使用返回值作为你的参数：

```
>>> bar1(foo())  # Receives a single tuple-valued argument
(1, 2, 3)
>>> bar1(*foo()) # Receives 3 integer arguments
1
>>> bar2(foo())  # Receives a single tuple-valued argument
1
>>> bar2(*foo()) # Receives 3 arguments, but only expected 1!
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: bar2() takes exactly 1 argument (3 given) 
```

因此，在和之间的选择`bar1`实际上`bar2`取决于您期望如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T14:41:40.480

最大的区别是位置参​​数“*args”方式允许一个人在运行时调用一个他不知道参数数量的函数，并且仍然具有与其他调用的“普通”函数相同的函数.

当一个函数作为参数发送到另一段代码时，它最常用（但不是唯一）使用，或者，编写一个函数包装器，它将接收“N”个参数并将这些“N”个参数传递给原始函数，而不关心关于他们。

它是在 Python 中编写动态代码如此出色的重要组成部分。

例如：

```
def MySum(a,b):
    return a + b

def logger(func):
   def wrapper(*args):
       print args
       return func(*args)
   return wrapper

MySum = logger(MySum) 
```

这个代码片段创建了一个装饰器来打印出传递给函数的arguemtns，它仍然可以与任何仅使用位置参数调用的函数一起工作。（添加关键字参数将使其对任何可调用函数都有效）。

仍然任何使用原始版本的代码都`MySun`可以继续这样做而不改变。如果使用普通元组将参数传递给装饰器，则必须相应地修改调用代码。

# php - PHP base64_encode 无法正常工作

> ID：12331227
> 
> 赞同：0
> 
> 时间：2012-09-08T13:40:46.643
> 
> 标签：php, base64

我在 php 中将我的数据编码为 base64 时遇到问题。我想使用 base64_encode 函数对波斯语的邮件主题进行编码。但我没有得到预期的结果。我开始测试我的 base64_encode 函数。
当我用 PHP 转换 'سلام' 时，结果是 '0+HH4w=='，而当我在[http://www.base64encode.org/](http://www.base64encode.org/)网站上测试相同的东西时，结果是 '2LPZhNin2YU='。我试过 base64_decode('2LPZhNin2YU=') 并且输出是 'سلام'
有人知道为什么会这样吗？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:44:56.650

'0+HH4w==' 是 CP1256（又名 Windows-1256 [http://en.wikipedia.org/wiki/Windows-1256](http://en.wikipedia.org/wiki/Windows-1256)），而 '2LPZhNin2YU=' 是 UTF8。

只需将脚本的字符集设置为 windows-1256 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:45:49.747

很可能不是`base64_encode()`函数造成了您的问题，而是之前的处理：请记住，字符串需要**2 个**成分来保存有意义的文本：**encoding 和 bytestream**。从 base64 编码的值来看，您丢失了字符串上的 UTF8 编码，将其转换为一些 Windows 代码页编码。

# linq - LINQ 和计算列：它们的值何时更新？

> ID：12331229
> 
> 赞同：1
> 
> 时间：2012-09-08T13:41:02.303
> 
> 标签：linq, calculated-columns

我有一个名为“MyTable”的 SQL Server 表，其中包含 3 个整数列：column1、column2 和 column3。column3 是计算列，计算表达式：

```
case
when column1>column2 then 1
else 2
end 
```

假设我的表只有一行的值 (300, 50, 1)

现在假设我有以下 LINQ 代码：

```
MyTable t = db.MyTables.First();
t.column1=5;
Console.Write("Computed Value = " + t.comlumn3);
db.SubmitChanges(); 
```

书面输出是什么？1 还是 2？换句话说，计算列的值是否在我的代码中自动更新，甚至在我“提交更改”之前；

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:47:23.670

不，计算列（当您在数据库中声明时）仅由数据库评估（即它只会在保存/重新加载后具有正确的值）。

如果您希望立即在代码中对其进行评估，并且不希望将计算列存储在数据库中，则可以将数据类型中的 column3 更改为计算 getter 中值的属性。

```
[NotMapped]
public int column3 { get { return column1>column2 ? 1 : 2 } } 
```

如果您使用的是 EF，则需要将其添加`[NotMapped]`到添加的属性中，以避免 EF 尝试将其存储在数据库中。

# emacs - 如何在 Emacs Lisp 中评估引用表达式的一部分

> ID：12331230
> 
> 赞同：4
> 
> 时间：2012-09-08T13:41:04.303
> 
> 标签：emacs, elisp

假设我有一个返回引用列表的函数，如下所示：

```
(defun create-structure (n l)
  '(structure (name . n)(label . l))) 
```

我希望函数返回：

```
(create-structure foo bar)
-> '(structure (name . foo)(label . bar)) 
```

相反，我得到了预期：

```
-> '(structure (name . n)(label . l)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T14:02:41.507

至少有两种方法可以实现这一点，使用反引号语法或显式调用列表。

```
(defun create-structure-1 (n l)
  `(structure (name . ,n) (label . ,l)))

(defun create-structure-2 (n l)
  (list 'structure (cons 'name n) (cons 'label l))) 
```

GNU Emacs Lisp 参考提供了一个很好的阅读主题： - [http://www.gnu.org/software/emacs/manual/html_node/elisp/Backquote.html#Backquote](http://www.gnu.org/software/emacs/manual/html_node/elisp/Backquote.html#Backquote)

# c# - 组合框：更改项目名称，保留值

> ID：12331233
> 
> 赞同：0
> 
> 时间：2012-09-08T13:41:15.820
> 
> 标签：c#, combobox

是否可以在不更改实际值的情况下更改组合框项目的名称？我目前在我的组合框中显示一些 ID，但我想显示一个“占位符”名称而不是实际值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:15:28.237

我假设您在询问 System.Windows.Forms.ComboBox。

ComboBox.Item 属性的 MSDN 文档指出： 虽然 ComboBox 通常用于显示文本项，但您可以将任何对象添加到 ComboBox。通常，ComboBox 中对象的表示形式是该对象的 ToString 方法返回的字符串。如果您希望显示对象的成员，请通过将 DisplayMember 属性设置为相应成员的名称来选择将显示的成员。您还可以通过设置 ValueMember 属性来选择将表示对象返回的值的对象成员。

您可以将具有 ID 和 DisplayName 属性的自定义对象添加到组合框，然后重写 ToString() 方法以返回 DisplayName。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:09:05.903

是的，您可以更改`Text`复选框的属性，而无需更改`Value`属性。（CheckBox 有很多属性：Name、Text、Value ......），但不能更改`Name`CheckBox 的属性。

```
YouCheckBox.Text = "set your new text, this text will be print in your screen, but it's not your value and it's not your name"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T05:44:18.853

尝试

```
Combo box.item.text = xyz;<br>
Combo box.item.value = zyx; 
```

# c# - 使用 foreach 循环遍历一个通用列表

> ID：12331246
> 
> 赞同：2
> 
> 时间：2012-09-08T13:43:11.653
> 
> 标签：c#, foreach

我正在尝试学习泛型，并且正在尝试创建自己的泛型列表类。

问题是我不知道如何绕过 default(T);

```
 public IEnumerator<T> GetEnumerator()
    {
        T current = data[forIndex];
        while (!current.Equals(default(T)))
        {     
            yield return current;
            forIndex++;
            current = data[forIndex];                
        }
        forIndex = 0;
    } 
```

这种构造意味着如果它包含值 0，它将停止遍历我的列表，因为 default(T) 为 0。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:07:26.547

假设您将数据保存在数组中，只需对其进行迭代并产生每次迭代：

```
for(int i=0; i < data.Length; ++i)
{
  yield return data[i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:28:28.547

我认为你的错误是你依赖于内部数组最后只有默认值，而不是在有效数据范围内的事实。这个假设对于任何元素类型都可能是错误的（0 表示整数，null 表示 ref 类型。例如，您可以将空值存储在 a`List<string>`中）。

所以你不能使用这种技术。

相反，我建议您将当前项目计数保留在整数字段中。这样你就可以正确地实现你的迭代器。像这样：

```
for(int i=0; i < this.count; ++i) //iterating over this.count elements
  yield return data[i]; 
```

（一些代码取自另一个答案）。

现在，如果你坚持按照自己的方式去做，你可以这样做：

```
while (current != null) 
```

即使电流是 T 类型并且 T 不受约束，这仍然有效。如果 T 是值类型，则条件始终为真（因为值类型将首先被装箱，并且任何装箱的值都是 != null）。

# facebook - Facebook C# SDK 和 asp.NET 成员资格。如果用户更改电子邮件怎么办？

> ID：12331254
> 
> 赞同：0
> 
> 时间：2012-09-08T13:44:15.307
> 
> 标签：facebook, asp.net-mvc-3, membership

我有用户通过 Facebook connect 连接到我的应用程序。据我所知，我应该使用电子邮件和姓名等 facebook 数据向 asp.NET 会员提供商注册。

这我应该可以做到，但是如果用户在 facebook 上更改他的姓名或电子邮件会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T13:49:38.077

由于我使用过这种类型的集成，因此这是我们解决方案的结论。

您应该构建解决方案以从 Facebook 读取用户数据，但不要依赖它们作为用户名或任何唯一字段，因为用户可以更改这些数据，从而导致丢失他们的旧帐户。

您应该始终将用户数据与他们的 FacebookID 相关联。

这样，您将确保您可以在登录时识别它们，然后您可以更改关联的电子邮件、姓名或任何其他类型的数据。

还有一件事，如果您被迫使用用户的电子邮件作为登录名，您仍然可以依赖来自 Facebook 的电子邮件，但**您需要实施一个额外的步骤**，即检查与他的关联的用户数据每次他登录您的服务/网站时的 FacebookID。然后，每当您检测到修改时，您都可以通知他您将使用新数据而不是旧数据。

# php - 使用 android 访问数据库时出现 400 错误请求

> ID：12331256
> 
> 赞同：0
> 
> 时间：2012-09-08T13:44:27.863
> 
> 标签：php, android, database

我编写了一个 Android 应用程序来从本地数据库中检索一些数据。我创建了我的 php 文件来进行查询和一个类来将查询发送到 db。

这是php文件：

```
<?php
    $db_host = "10.0.2.2";
    $db_name = " name";
    $db_user = " usr";
    $db_password = " pwd";

    //connessione al database
    $db = mysql_connect($db_host, $db_user, $db_password);

    if ($db == FALSE) die ("Errore nella connessione. Verificare i parametri nel file onnection.php");

    mysql_select_db($db_name, $db)
        or die ("Errore nella selezione del database. Verificare i parametri nel file onnection.php");

    //preleviamo la query passataci dall’applicazione
    $query = $_REQUEST['querySend'];

    //eseguiamo la query
    $result = mysql_query ($query);
    while($e=mysql_fetch_assoc($result))
    $output[]=$e;

    //stampiamo il risultato in formato json
    print(json_encode($output));
    ?> 
```

和我的班级发送查询：

```
String result = "0";
InputStream is = null;

      //the query to send
      ArrayList<NameValuePair> querySend = new ArrayList<NameValuePair>();

      querySend.add(new BasicNameValuePair("querySend",query));

      //http post
      try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/query.php");
        httppost.setEntity(new UrlEncodedFormEntity(querySend));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
      }catch(Exception e){
        Log.e("log_tag", "Error in http connection "+e.toString());
      }

  //convert response to string
      try{
        BufferedReader reader = new BufferedReader(
                   new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
          while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
          }
        is.close();
        result=sb.toString();

      }catch(Exception e){
        Log.e("log_tag", "Error converting result: "+e.toString());
      }

      return result; 
```

我收到 400 错误。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:12:07.423

如果您的数据库位于本地计算机上，您可以尝试使用其本地地址。将您的 android 设备连接到同一网络并更改 ip 地址。我在使用环回（10.0.2.2）时遇到了连接问题。

您可能还需要在本地计算机上打开端口（mysql 默认端口为 3306）。

对于其他可能有效的建议，请在此处查看接受的答案：

[如何将Android模拟器与本地mysql数据库连接起来](https://stackoverflow.com/questions/8693665/how-to-connect-android-emulator-with-local-mysql-database)

# c# - 在 mvc 应用程序中上传 Ajax 文件

> ID：12331257
> 
> 赞同：1
> 
> 时间：2012-09-08T13:44:29.747
> 
> 标签：c#, asp.net-mvc, jquery, ajax-upload

在我的 MVC 应用程序中，我在这部分代码中使用了 Ajax 上传（版本 3.5 (23.06.2009)）：

```
<div id="userPhotosUpload">
   <span class="tabs_fieldDesc">@Html.Label("txtPhotoDescription", "Desc")</span>
    @Html.TextBox("txtPhotoDescription", "", new { @maxlength = "30", @class = "tabs_fullLength" })              
    <div class="buttonLine">
       <button id="btnAddUserPhoto">Add picture</button>
    </div>
    <input id="txtSelectedPhotoFolderId" type="hidden" value="" />
</div>
<script type="text/javascript">
$(document).ready(function () {
//photo upload
var photoUpload = new AjaxUpload($('#btnAddUserPhoto'), {
    action: '/Profile/ProcessPhoto',
    name: 'uploadfile',
    responseType: 'json',
    autoSubmit: true,
    onSubmit: function (file, ext) {
        showProgressBar();
        photoUpload.setData({
            photoDescription: $('#txtPhotoDescription').val(),
            idPhotoFolder: $('#txtSelectedPhotoFolderId').val()
        });
    },
    onComplete: function (file, response) {
        hideProgressBar();
        $('#txtPhotoDescription').val('');
        var currentSelectedFolderId = getSelectedFolder();
        LoadPhotoFolders();
        SelectPhotoFolder(currentSelectedFolderId);
    }
});
</script> 
```

如果我上传大于 1MB 的文件，AjaxUpload 不会在控制器中调用方法：

```
[Authorize]
[HttpPost]
[AcceptVerbs(HttpVerbs.Post)]
[ValidateInput(false)]
public JsonResult ProcessPhoto(string photoDescription, Int64 idPhotoFolder)
{
    //process request with file
} 
```

和[Fiddler2](http://www.fiddler2.com/fiddler2/)给我看这个：

> POST /Profile/AddUserPhoto HTTP/1.1 主机：localhost:55538 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0 Accept: text/html,application/xhtml+xml,application /xml;q=0.9,/ *_*;q=0.8 Accept-Language: cs,en-us;q=0.7,en;q=0.3 Accept-Encoding: gzip, deflate Connection: keep-alive Referer: Cookie: AspxAutoDetectCookieSupport=1; .ASPXAUTH = AB45C67E90AD19402C47818CC4BC78504C96F6BB063E07F89E918F22D3A42B441B14B57818448BAAD3ABEEED48C1EA41431C89F149B3BA53D59950694F33C447462EE56AC33CFB54F1ADAC7B7A4F5D69F6ED3855A649F217EDC56B2250E6BFC87052C0640C1C191F212A76B3A9D9973609F6E537992BBADBC1A3F97853A8B90485DE9C11819D54D1F0D0F9838EDAE73E; ASP.NET_SessionId=gflyfmea2ty2gm3i4rea2adx 内容类型：multipart/form-data；边界=---------------481414423196 内容长度：6046387
> 
> --------------------------481414423196 内容处置：表单数据；名称="照片描述"
> 
> --------------------------481414423196 内容处置：表单数据；名称="idPhotoFolder"
> 
> 136 -----------------481414423196 内容处置：表单数据；名称="上传文件"; 文件名="sam_1103.jpg" 内容类型：图像/jpeg
> 
> HTTP/1.1 504 Fiddler - 接收失败 Content-Type: text/html; charset=UTF-8 连接：关闭时间戳：15:30:34.321
> 
> [Fiddler] ReadResponse() 失败：服务器没有返回对此请求的响应。

一些想法哪里有问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:07:26.500

服务器似乎没有响应（Http 504）。

该方法是否`ProcessPhoto`被调用？

如果没有，那么您可能应该查看您的 .config 设置。您还可以在没有启用提琴手的情况下检查 ajax onComplete 方法中的服务器响应。

如果您的服务器`ProcessPhoto`方法确实被调用，错误是否同时发生在本地 Web 服务器和远程 Web 服务器上（最好消除任何其他可能的超时来源）。

最后，如果您的方法被调用，是否可能是您的照片处理而不是 Web 服务器通信实际上很慢？最后一个是我最初的猜测，但如果有更多信息会很好:-)

无论如何，只是一些想法:-)

# android - 我可以在基于 Android 操作系统的手机显示屏上创建虚拟触摸吗？

> ID：12331258
> 
> 赞同：0
> 
> 时间：2012-09-08T13:44:37.443
> 
> 标签：android, events

我可以让手机的显示屏有触感吗？清楚地说，我有一个`Point(x,y)`，我想以编程方式触摸那里而不用手指。是否有任何事件可以作为参数 touch 引发和发送`Point`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:31:40.903

出于明显的安全原因，这是不可能的。

# c - 从 C 调用期望文件

> ID：12331259
> 
> 赞同：0
> 
> 时间：2012-09-08T13:44:44.587
> 
> 标签：c, linux, ubuntu, expect, ubuntu-12.04

我编写了一个**ftp.exp**文件，它将 C 应用程序的日志文件发送到服务器。

```
#!/usr/bin/expect
set timeout -1
spawn ftp xxx.xxx.xxx 21
match_max 100000
expect -re {[2]{2,}[0]{1,}}
send -- "usrxxxx"
expect -exact "usrxxxxx"
send -- "\r"
expect -re {[3]{2,}[1]{1,}}
send -- "xxxx\r"
expect -exact "\r
230 Access granted for xxxxxxxxxx !\r
Remote system type is UNIX.\r
Using binary mode to transfer files.\r
ftp> "
send -- "put /home/User/test.txt test2.txt\r"
expect -exact "put /home/User/test.txt test2.txt\r"
send -- "\r"
expect -re {[2]{2,}[6]{1,}}
send -- "quit\r"
expect eof 
```

该脚本工作正常，但如何从**C Application**执行文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T13:52:36.703

您需要使用[libexpect](http://cims.nyu.edu/cgi-systems/man.cgi?section=3&topic=libexpect)并从其 api 调用您的脚本。

我只找到了它的 php 绑定，但我这里没有 Debian 来告诉你什么包提供了基本包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T13:53:08.673

您可以使用[system(3)](http://linux.die.net/man/3/system)或[popen(3)](http://linux.die.net/man/3/popen)库函数从 C 代码运行期望脚本。这些函数使用[系统调用](http://en.wikipedia.org/wiki/System_call)，如[fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)、[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)、[pipe(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)、[dup(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/dup.2.html)、[waitpid(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/waitpid.2.html)，您也可以自己使用。

我强烈建议学习更多关于[高级 unix 编程](http://basepath.com/aup/)和[高级 linux 编程](http://www.advancedlinuxprogramming.com/)的知识；有一些概念和技巧需要学习。

我相信您会更好地使用`ssh`(with `scp`)，而不是期望脚本通过网络将纯密码发送到远程远程 FTP 服务器（您的方法存在一些安全问题）。

# php - 使用 MySQLi 和 ArrayObjects 输出数据

> ID：12331266
> 
> 赞同：0
> 
> 时间：2012-09-08T13:45:31.237
> 
> 标签：php, arrays, mysqli, arrayobject

在使用 MySQLi 和 ArrayObjects 时，这对我来说不是一个问题，而是一个学习路径。如果这对您来说是旧帽子，请随时为以下内容添加任何其他改进。如果是 MySQLi 和 ArrayObject 的新手，这是整个过程的一个简短示例。这比程序风格更有效。

查询：

```
//constants for mysqli credentials, DB_HOST,DB_UNAME etc.
include('dbase');

//zip code to seach
$zipcode = 10003;

//instantiate the object variable
$mysqli = new mysqli(DB_HOST,DB_UNAME,DB_UPWORD,DB_NAME);

//run the query searching for matching records using a regular expression
$result = $mysqli->query("SELECT corg_id, corg_name, corg_city FROM sometable WHERE corg_zip REGEXP '^$zipcode';");

//using fetch_object() returns an ArrayObject
while ($row = $result->fetch_object()){
       $zipmatch[] = $row;
}

//assign to session var for later use, in another script
$_SESSION['queryresult'] = $zipmatch; 
```

所以此时查询返回了一个结果。生成的 ArrayObject 如下所示：

```
Array
(
   [0] => stdClass Object
    (
        [corg_id] => 1
        [corg_name] => Acme Home Improvement
        [corg_city] => New York
    )

   [1] => stdClass Object
    (
        [corg_id] => 2
        [corg_name] => ABC Handy Work
        [corg_city] => New York
    )

   [2] => stdClass Object
    (
        [corg_id] => 3
        [corg_name] => Wile E Coyote Repairs
        [corg_city] => New York
    )
) 
```

输出：假设我们想要上面数据切片中的一条记录。由于这是一个数组对象，一些循环结构会返回错误，因为它们需要字符串而不是对象引用。foreach 将采用对象引用或数组。

```
function selected($arrObject,$searchString,$result){
    foreach($arrObject as $v){
       if ($v->corg_id==$searchString){
        $result[] = $v->corg_name; //string, would be index 0
        $result[] = $v->corg_city; //string, would be index 1
       }
    }     
    return $result;
  } //close selected function

$result = array(); //array of returned search data
$haystack = $_SESSION['queryresult']; //arrayObject to search
$needle = 3; //look for a matching id in the arrayObject

//instantiate an output array with the result of the selected function
$outputArray=selected($haystack,$needle,$result);
   $comName = $outputArray[0]; //string
   $comCity = $outputArray[1]; //string

echo $comName; //outputs "Wile E Coyote Repairs"
echo $comCity; //outputs "New York" 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-08T14:02:33.380

那么你“喜欢”改进什么？

我可以将整个 PHP 搜索方法等换成一个 SQL 查询

```
SELECT corg_name, corg_city FROM sometable WHERE corg_id = '$corg_id'; 
```

如果您可以通过选择 SQL 数据库中的 ID 轻松地返回一个结果，那么在 PHP 中搜索整个数组会容易得多。

# java - 更改 SWT 标签中某些单词的颜色？

> ID：12331271
> 
> 赞同：2
> 
> 时间：2012-09-08T13:46:23.093
> 
> 标签：java, swt, label

在 Swing 中，可以使用 HTML 来设置标签上的文字样式。例如，如果我想将标签上的某个单词加粗或使用不同的颜色，我可以使用 HTML 来实现。

SWT 是否有等效的功能？假设我有“一只敏捷的棕色狐狸跳过一只懒狗”作为标签的文字，并且我想将“狐狸”的颜色更改为棕色，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T14:03:52.260

如果你真的需要一个`Label`，你可以使用下面的代码。否则我会建议一个[`StyledText`](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fcustom%2FStyledText.html)（如评论中所述）：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    Label label = new Label(shell, SWT.NONE);
    label.setText("Blue and not blue");

    Color blue = display.getSystemColor(SWT.COLOR_BLUE);

    final TextLayout layout = new TextLayout(display);
    layout.setText("Blue and not blue");
    final TextStyle style = new TextStyle(display.getSystemFont(), blue, null);

    label.addListener(SWT.Paint, new Listener() {
        @Override
        public void handleEvent(Event event) {
            layout.setStyle(style, 0, 3);
            layout.draw(event.gc, event.x, event.y);
        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();

} 
```

它`StyledText`看起来像这样：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    StyledText text = new StyledText(shell, SWT.NONE);
    text.setEditable(false);
    text.setEnabled(false);
    text.setText("Blue and not blue");

    Color blue = display.getSystemColor(SWT.COLOR_BLUE);

    StyleRange range = new StyleRange(0, 4, blue, null);

    text.setStyleRange(range);

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
} 
```

# c++ - 在 Cocoa/Objective-C 项目中包含 C++ 代码时的未知类型名称“类”

> ID：12331279
> 
> 赞同：1
> 
> 时间：2012-09-08T13:47:32.103
> 
> 标签：c++, objective-c, xcode, cocoa

所以，基本上就是这个（我想我过去以某种方式解决了它，但我不记得如何......）：

*   我有一个 - 几乎是空的 - Objective-C/Cocoa 项目
*   导入一些 .c/.cpp 文件
*   得到以下错误

> 未知类型名称“类”；您指的是 'Class' 吗？

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:51:20.943

刚刚将我的`.cpp`文件重命名为`.mm`. :-)

那成功了！

# php - 如果其他在开关错误内

> ID：12331283
> 
> 赞同：1
> 
> 时间：2012-09-08T13:48:19.813
> 
> 标签：php

您好我正在使用这行代码：

```
 case "3rd Year":
                 $lbl="4th Year";
**This is the line**       if( $get_display->gpa => "88" ) {
                                $section_name = 'A';
                            }
                            elseif( $get_display->gpa => "80" ) {
                                $section_name = 'B';
                            }
                            elseif( $get_display->gpa => "75" ) {
                                $section_name = 'C';                      
                            }
                 break; 
```

目前正在吐出这行错误：希望有任何帮助。

```
 Parse error: syntax error, unexpected T_DOUBLE_ARROW in C:\xampp\htdocs\Thesis\enrollpage.php on line 293 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T13:49:48.380

你应该替换`=>`为`>=`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T13:50:40.963

您正在尝试检查是否大于或等于应该使用：

```
if( $get_display->gpa >= "88" ) 
```

或者如果它是一个数组，你错过了 if 语句中的实际比较：

```
if( $get_display->gpa['88'] == "something" ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T13:50:31.807

你把运营商混在一起了！你想使用 >=

# macos - mac上的程序键盘组合

> ID：12331287
> 
> 赞同：-3
> 
> 时间：2012-09-08T13:49:17.520
> 
> 标签：macos, macros, keyboard, hotkeys

每当我快速键入“qs”键时，我都希望我的 mac 类型为“|#”。Windows 上有一个名为 AutoHotKey 的程序。我想知道是否有Mac等价物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:43:04.323

1.  打开系统偏好设置
2.  单击语言和文本
3.  单击文本选项卡
4.  在左列中添加“|#”，在右列中添加“qs”。

确保选中顶部的复选框。

# html - 在html5中将复选框设置为选中，我应该简单地使用checked（作为属性）还是checked="checked"（作为属性）？

> ID：12331290
> 
> 赞同：44
> 
> 时间：2012-09-08T13:49:20.937
> 
> 标签：html, xhtml

目前在我们的插件中，我们将复选框设置为通过设置检查

```
<input type="checkbox" checked="checked" /> 
```

这是为了保持 xhtml 兼容性。我更习惯将检查设置为属性

```
<input type="checkbox" checked /> 
```

在html5中进行的正确方法是什么？我们还应该关心xhtml兼容性吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-08T14:19:02.433

无论哪种情况，它都是一个属性。`true`无论哪种情况，它都会在元素节点的 DOM 属性上设置一个值（相同的值， ）。

对于大多数目的，您使用哪种语法并不重要。但是，有几点需要注意：

*   如果您在 XML 序列化（“XHTML5”）中使用 HTML5，则必须使用`checked="checked"`.
*   在样式中，使用属性选择器时的语法并不完全相同（较短的形式不匹配`[checked=checked]`），但这在实践中并不重要：`[checked]`在任何一种情况下都匹配选中的复选框。
*   笨拙的语法`checked="checked"`是 SGML 的保留，只是为了兼容性而包含在内，因此它可能会使您的代码看起来过时（这很少重要）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-08T13:54:07.717

```
<!-- Default to unchecked -->
<input type="checkbox">

<!-- Default to checked, XHTML -->
<input type="checkbox" checked="checked" />

<!-- Default to checked, HTML5 -->
<input type="checkbox" checked> 
```

来源：[http ://css-tricks.com/indeterminate-checkboxes/](http://css-tricks.com/indeterminate-checkboxes/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-08T14:01:10.327

`Checked`是 HTML 5 中的布尔属性。属性存在表示真值，属性不存在表示假值。如果存在，则其值应为空或设置为属性名称`checked="checked"`。这些形式中的任何一种都是正确的：

```
<input type="checkbox" checked="checked" />
<input type="checkbox" checked> 
```

[https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes](https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-08T14:33:07.950

您关心 HTML5 中的 XHTML 兼容性，如果您正在创建使用 HTML5 的 XHTML 序列化的文档，或者仅通过提供具有`application/xhtml+xml`mime 类型的文档，或者创建可以作为`application/xhtml+xml`或作为`text/html`（'普通' html mime 类型）。

如果您只使用`text/html`，那么您不需要关心 XHTML 语法。但是，在您的页面中嵌入 SVG 或 MathML 时，您*可以*使用 XML 样式的自关闭语法。（SVG 在最新的浏览器中得到广泛支持，MathML 则不那么支持。）您也可以使用`/>`来结束*void* HTML 元素，例如 meta、link、input、img 等，但这与使用`>`结束这些元素没有区别。

对术语的小评论。在标记中，通常的说法是`checked`or`checked="checked"`是一个“属性”。“财产”是另一回事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T13:55:35.507

根据[http://www.w3.org/TR/html-markup/input.checkbox.html](http://www.w3.org/TR/html-markup/input.checkbox.html)这是一个属性

# sql - 如何提高查询的性能

> ID：12331300
> 
> 赞同：1
> 
> 时间：2012-09-08T13:50:44.100
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

假期（表）

```
dates

2012-08-02 
2012-08-19 
2012-08-20 
```

表格1

```
id dates time

001 01/08/2012 00:00
001 02/08/2012 00:00
001 03/08/2012 00:00
001 04/08/2012 12:00
...
...
001 17/04/2012 11:00
001 18/08/2012 00:00
001 19/08/2012 00:00
001 20/08/2012 00:00
001 21/08/2012 12:00
... 
```

我想检查每列的上一个日期和下一个日期，然后我想更新现在或缺席或假期。

条件

*   如果当前行时间不等于 00:00，则状态应为`P`（当前）
*   如果上一个日期时间列是 00:00 并且下一个日期时间列是 00:00 那么自动当前行状态应该是`AB`（缺席），
*   如果日期等于假期表日期，则自动当前行状态应为`H`

注意：这个查询运行没有任何失败，唯一的问题是耗时......

询问

```
Select 
    t2.id, 
    t2.dates, 
    case 
        when t2.time <> '00:00' 
            then 'P' 
        when t4.dates = t2.dates and t1.intime = '00:00' and t3.intime = '00:00' 
            then 'AB' 
        else 'H' 
    end as attn 
from
    (
        Select id, dates, time from table1 
        where t1.dates = Cast('18/08/2012' as datetime)
    ) t1 
    left outer join
    (
        Select id, dates, time from table1 
        where t2.dates = Cast('19/08/2012' as datetime)
    ) t2 
    on t1.id = t2.id
    left outer join 
    (
        Select id, dates, time from table1 
        where t2.dates = Cast('20/08/2012' as datetime)
    ) t3 
    on t2.id = t3.id
    left outer join 
    (
        select dates from holiday
    ) t4 
    on t4.dates = t2.dates 
```

上面的查询工作正常，但显示需要更多时间，因为我想查看每个的数据`01/09/2012`，我有 n 个 id，系统正在检查每个 id 的上一个日期和下一个日期并显示结果。 `30/09/2012``id`

任何其他替代查询或解决方案都可用于显示数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:48:20.333

正如 Gordon 所说，您的结构很好，但我可以向您推荐另一种方法，以提高此查询（或任何其他重型查询）的性能，即使用**Database Engine Tuning Advisor**。

使用此工具，SQL Server 将尝试创建额外的索引、统计信息以及任何其他可以提高所提供查询性能的内容。

要启动它，请从查询窗口中选择您的查询文本，右键单击，然后选择**Analyze Query in Database Engine Tuning Advisor**。

![在此处输入图像描述](../Images/d5fb8beb086eb39699a8116ec1692802.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:40:35.530

您的基本查询结构很好。就个人而言，我不会硬编码子查询中的日期，而是将日期添加到“on”子句中。

您可以通过在 (id, date) 上创建索引来加快运行速度：

```
create index table1_id_date on table1(id, date) 
```

假期索引也可能有所帮助：

```
create index holiday_date on holiday(date) 
```

您还可以升级到更新版本的 SQL Server。由于 lag() 和 lead() 函数，您的查询在 SQL Server 2012 中表达起来会更快、更容易。

# java - 用另一个字符java交换char数组中的特定字符

> ID：12331310
> 
> 赞同：0
> 
> 时间：2012-09-08T13:52:12.277
> 
> 标签：java, swap, arrays

我上次编程已经 8 年了，那时它只是网络学位的基础知识。我正在编写一个基本程序，以开始重新进入 java 编程。该程序正在处理存储为字符串的二进制数。

例如`01101110010`

我已经完成了所有其他工作，但现在我想将所有“1”换成“0”，将所有“0”换成“1”

要得到`10010001101`

问题是我知道交换字符的唯一方法是创建一个替换字符的新字符串，但我一次只能做一个字符，然后我最终得到一个所有`1`s 或`0`s的字符串

所以我考虑过使用 char 数组并尝试交换数组中的每个 char，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T13:57:39.833

```
String s = "01101110010".replace("0", "*").replace("1", "0").replace("*", "1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T13:56:50.160

如果您使用的方法是开放的，您可以使用[String.replace()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28char,%20char%29)：

```
String str = "01101110010";
System.out.println(str.replace("1", "X").replace("0", "1").replace("X", "0")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T13:57:22.680

```
String str = "0101010101110";
char[] cs = str.toCharArray();
for (int i = 0; i < cs.length; i++)
{
    if (cs[i] == '1')
        cs[i] = '0';
    else if (cs[i] == '0')
        cs[i] = '1';
}
str = new String(cs); 
```

# excel - 删除重复项并根据另一列中的值对一列进行计数

> ID：12331311
> 
> 赞同：0
> 
> 时间：2012-09-08T13:52:15.630
> 
> 标签：excel, excel-formula

上校 | B栏|

一个 | 通过 |

一个 | 通过 |

乙| 通过 |

C | 通过 |

D | 通过 |

E | 通过 |

F

E | 通过 |

我想要一个返回以下计数的公式：按 B 列过滤是否通过。删除重复项后计算 A 列中的所有元素。我是 Excel 公式的新手。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:48:01.273

我不确定您是否尝试让公式首先删除重复项，但假设“不是”，请尝试以下操作：

首先尝试使用自动过滤器，以便能够按 B 列过滤：

**autofilter** 在 Excel 2010（我认为也是 2007）中，单击单元格 A1（仅一次）。然后，在菜单上单击数据，然后单击过滤器（看起来像一个灰色漏斗）。这应该为跨列（a、b、c、d 等）的第 1 行中的所有数据标题输入一个自动过滤器。

现在，单击 B 列的下拉箭头并选择 PASS。现在，您按 B 列中包含“PASS”的单元格进行排序。

在列末尾的空白单元格中，键入：=counta（*所有要计算的单元格*）。只需突出显示您希望包含在公式中的*单元格，以便计算所有单元格*。按回车。

计数应显示。

如果，您只想计算“PASS”而不先排序，然后在空白单元格中使用 =countif（*突出显示的单元格要计数/分析*，“pass”）

这将汇总列中包含“通过”一词的单元格。

# android - Android：扩展 BaseAdapter，列表不更新

> ID：12331314
> 
> 赞同：2
> 
> 时间：2012-09-08T13:52:24.397
> 
> 标签：android, android-listview

我有两个列表`BaseAdapter`在相同的活动布局中使用相同的扩展，但是当我调用时只有一个更新`notifyDataSetChanged`（我当然都调用它）。我一直在寻找几天，找不到问题。

该活动获取已配对且可用的蓝牙设备并分别列出它们，我使用了`BluetoothChat`示例，但我需要自定义行并且必须对其进行一些更改。

主要问题是用“*这只在另一个（就在下面）被评论时才有效*”，*Ctrl+F*可以更快地到达那里。

这是我的特辑`BaseAdapter`（可能没用，但我还是把它贴出来了）：

```
/**
 * Device list base adapter to show the devices in a custom ListView.
 */
public class DeviceListBaseAdapter extends BaseAdapter
{
    private static ArrayList<Device> deviceArrayList;

    private LayoutInflater mInflater;

    public DeviceListBaseAdapter(Context context, ArrayList<Device> results)
    {
        deviceArrayList = results;
        mInflater = LayoutInflater.from(context);
    }

    public int getCount()
    {
        return deviceArrayList.size();
    }

    public Object getItem(int position)
    {
        return deviceArrayList.get(position);
    }

    public long getItemId(int position)
    {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent)
    {
        ViewHolder holder;

        if(convertView == null)
        {
            convertView = mInflater.inflate(R.layout.device_row_view, null);
            holder = new ViewHolder();
            holder.tvName = (TextView) convertView.findViewById(R.id.tvName);
            holder.tvAddress = (TextView) convertView.findViewById(R.id.tvAddress);
            holder.tvSignal = (TextView) convertView.findViewById(R.id.tvSignal);

            convertView.setTag(holder);
        }
        else
        {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.tvName.setText(deviceArrayList.get(position).getName());
        holder.tvAddress.setText(deviceArrayList.get(position).getAddress());
        if(!deviceArrayList.get(position).getSignal().equals("0"))
        {
            holder.tvSignal.setText(deviceArrayList.get(position).getSignal() + "dBm");
        }

        return convertView;
    }

    static class ViewHolder
    {
        TextView tvName;
        TextView tvAddress;
        TextView tvSignal;
    }
} 
```

以及使用它的活动：

```
public class DeviceSelectActivity extends Activity
{
    private ArrayList<Device> devAvailableList, devPairedList;
    private DeviceListBaseAdapter devAvailableListAdapter, devPairedListAdapter;
    private ListView devAvailableListView, devPairedListView;

    private Button bFindDevices;
    private BluetoothAdapter bluetoothAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.device_select);

        // Setup Bluetooth devices lists with custom rows
        devPairedListView = (ListView) findViewById(R.id.lvPairedDevices);
        devPairedList = new ArrayList<Device>();
        devPairedListAdapter = new DeviceListBaseAdapter(this, devPairedList);
        devPairedListView.setAdapter(devPairedListAdapter);

        // I commented this to see the behavior with only the first list    
//      devAvailableListView = (ListView) findViewById(R.id.lvAvailableDevices);
//      devAvailableList = new ArrayList<Device>();
//      devAvailableListAdapter = new DeviceListBaseAdapter(this, devAvailableList);
//      devAvailableListView.setAdapter(devAvailableListAdapter);

        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

        // Register a receiver to handle Bluetooth actions
        registerReceiver(Receiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));
        registerReceiver(Receiver, new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED));

        startDiscovery();
    }

    public void startDiscovery()
    {
        // Show search progress
        bFindDevices.setText(R.string.searching);
        bFindDevices.setEnabled(false);

        // Remove title for available devices
        findViewById(R.id.tvAvailableDevices).setVisibility(View.GONE);

        // Get a set of currently paired devices
        devPairedList.clear();
        devPairedListAdapter.notifyDataSetChanged();

        Set<BluetoothDevice> pairedDevices = bluetoothAdapter.getBondedDevices();
        if(pairedDevices.size() > 0)
        {
            findViewById(R.id.tvPairedDevices).setVisibility(View.VISIBLE);
            for(BluetoothDevice device : pairedDevices)
            {
                devPairedList.add(new Device(device.getName(), device.getAddress(), (short) 0));
                // This only works when the other (just below) is commented
                devPairedListAdapter.notifyDataSetChanged();
            }
        }

//      devAvailableList.clear();
//      devAvailableListAdapter.notifyDataSetChanged();

        bluetoothAdapter.startDiscovery();
    }

    // add found device to the devices list
    private final BroadcastReceiver Receiver = new BroadcastReceiver()
    {
        @Override
        public void onReceive(Context context, Intent intent)
        {
            String action = intent.getAction();
            if(BluetoothDevice.ACTION_FOUND.equals(action))
            {
                // Found a device in range
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                Device foundDevice = new Device(device.getName(), device.getAddress(), intent.getShortExtra(BluetoothDevice.EXTRA_RSSI, Short.MIN_VALUE));
                // If it's not a paired device add it to the list
                if(device.getBondState() != BluetoothDevice.BOND_BONDED)
                {
//                  devAvailableList.add(foundDevice);
                    // Signal list content change
//                  devAvailableListAdapter.notifyDataSetChanged();
                    // Make the available devices title visible
                    findViewById(R.id.tvAvailableDevices).setVisibility(View.VISIBLE);
                }
            }
            else if(BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action))
            {
                // When finished (timeout) remove the progress indicator
                bFindDevices.setText(R.string.search);
                bFindDevices.setEnabled(true);
            }
        }
    };
} 
```

我评论了可用设备列表中的所有内容，以确保已填充配对设备列表。猜测我会说可能有一些丢失的参考资料，但由于我不完全了解列表的工作原理，但我找不到它。

问题是，当我尝试填充两个灯并调用`.add()`设备时，它们实际上被添加到列表中（`.size()`返回正确的数字），但第一个没有被刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:50:11.387

# 解决方案

在制作此类可重用类时，`DeviceListBaseAdapter`请记住*永远不要*将局部变量设置为`static`. 什么`static`是在该对象的所有实例之间共享这个特定变量，因此我有 2 个实例`DeviceListBaseAdapter`，但只有一个`deviceArrayList`，这就是为什么一次只有一个列表有效。当心快速复制粘贴。

# haskell - 测试树是否存在叶子的功能

> ID：12331319
> 
> 赞同：0
> 
> 时间：2012-09-08T13:52:54.820
> 
> 标签：haskell

假设我们有一个具有以下定义的类型：

```
data Tree a = Leaf a | Branch [Tree a] deriving (Show,Eq) 
```

我想做的是一个返回布尔值的函数。 `False`如果我的二叉树包含叶子，`True`如果没有。

这是我的代码：

```
tester :: Tree a -> Bool
tester (Leaf x) = False
tester (Branch y) = if (Branch (map tester y)) then True else False 
```

我知道这个的主要问题是没有办法评估`(Branch (map tester y))`，但我真的不知道如何解决它。

我可以添加一个新子句，例如类似这样`tester (Branch y) = True`的内容，但我认为这不是一个好主意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T14:04:16.847

`tester`不是一个描述性的名字，所以我叫它`leafless`，思考`leafy`起来容易得多。

```
leafy :: Tree a -> Bool
leafy (Leaf x) = True              -- yup - there's a leafy
leafy (Branch ts) = any leafy ts   -- yes if there are any leaves (recursive) 
```

我们只需要否定结果就可以得到我们想要的。

```
leafless :: Tree a -> Bool
leafless = not.leafy 
```

（`any :: (a -> Bool) -> [a] -> Bool`并`any f xs`检查列表中的任何元素是否满足测试（谓词）`f`。它的工作方式类似于`or (map f xs)`。）

你不能`(Branch (map tester y))`因为构造函数`Branch`有 type`[Tree a] -> Tree a`但是`map tester y`是 type `[Bool]`， not `[Tree a]`。你不需要写`Branch`在右手边；您已经在左侧正确使用它来对分支进行模式匹配 - 不再需要它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T15:01:10.690

有一种`leafless`比自己写递归更惯用的写法：

```
{-# LANGUAGE DeriveFoldable #-}
import qualified Data.Foldable as F

data Tree a = Leaf a | Branch [Tree a] deriving (Show,Eq,F.Foldable)

leafless :: Tree a -> Bool
leafless = F.foldl (\x y -> False) True 
```

甚至更短：

```
leafless :: Tree a -> Bool
leafless = null . F.toList 
```

此外，您的树类型称为“玫瑰树”并且已经在`Data.Tree`

# jquery - 箭头在 smoothDivScroll 中消失了

> ID：12331323
> 
> 赞同：0
> 
> 时间：2012-09-08T13:53:33.833
> 
> 标签：jquery, smooth-scrolling

我正在使用smoothDivScroll 处理具有相当大图像的页面。我想制作一个带有额外按钮的页面，并为此制作了一个 html，如您在[http://www.festifood.nl/index-permanent-autoscrolling-kevin3a.html](http://www.festifood.nl/index-permanent-autoscrolling-kevin3a.html)中所见。但是在这个页面中，滚动图像左右的大箭头，滚动更快等已经完全消失了。而且我不知道为什么以及如何。在我之前使用的 html 中，它们仍然存在：[http](http://www.festifood.nl/indexmetarrows.html) ://www.festifood.nl/indexmetarrows.html 。

任何人都可以帮助在第一个 html 中恢复滚动箭头吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:46:44.937

您有以下 JS 错误：

```
Uncaught RangeError: Maximum call stack size exceeded 
```

这是由于第 136 - 158 行 (X)limitReached 函数的递归。由于您已经在默认选项中将“来回”设置为默认滚动选项，因此无需每次重置选项并重新开始滚动.

尝试删除/注释掉第 136 - 158 行之间的所有事件：

```
$("div#makeMeScrollable").smoothDivScroll("option", "autoScrollingDirection", "backandforth");
startAutoScroll(); 
```

我希望这有帮助！

# c++ - 标准输出到变量 c/c++

> ID：12331324
> 
> 赞同：1
> 
> 时间：2012-09-08T13:53:37.067
> 
> 标签：c++, c, linux, system, stdout

我`int res = system("uname -p");`在我的 C++ 代码中使用。

它将通过使用在标准输出中给出结果

`fprintf(stdout,"execution returned %d.\n",res);`

我想将此结果字符串存储在变量中，但无法存储。

我用谷歌搜索但找不到合适的解决方案，谁能告诉我正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:04:45.757

首先，您不需要以`uname`编程方式运行命令来获取您的处理器。您可以简单地运行[uname(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/uname.2.html) [系统调用](http://en.wikipedia.org/wiki/System_call)（`uname`命令调用）。你也可以`/proc/cpuinfo`从你的程序中读取和解析。

如果您想读取某些命令的输出，请使用[popen(3)](http://linux.die.net/man/3/popen)库函数。

另请参阅[我](https://stackoverflow.com/a/12331321/841108)对相关问题的回答。

# xcode - Xcode 代码使用什么字体

> ID：12331326
> 
> 赞同：9
> 
> 时间：2012-09-08T13:53:54.207
> 
> 标签：xcode, fonts

当我在 Xcode 中输入代码时，我真的很喜欢那种字体。我有兴趣使用它。是分类字体吗？只是想知道...

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-08T13:55:17.830

字体名称是`Menlo`OS X 附带的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T13:56:05.223

首选项 -> 字体和颜色 :))

# c - 不使用运算符将 两个数字相加

> ID：12331328
> 
> 赞同：9
> 
> 时间：2012-09-08T13:54:20.700
> 
> 标签：c

我发现以下代码可以在不使用`+`运算符的情况下添加两个数字。

添加 3 和 4 的代码：

```
printf("%d",printf("%*c%*c",3,' ',4,' ')); 
```

现在`printf()`返回结果中的字符数并`%*c`忽略它遇到的下一个字符。但是，我仍然无法理解这段代码。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T13:58:15.403

`printf("%*c", n, c)`打印字符`c`，`n`次。所以代码打印了 3 个空格，后跟 4 个空格，并`printf`返回打印的字符数，显然是 3 + 4，完成了问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T13:57:19.500

内部`printf`输出 3 然后 4 个空格并返回字符数，即 7，外部`printf`正在打印该结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-27T08:31:37.347

我正在添加这个答案来指定标准的规则。

这是利用 的返回值`printf`。分别是`3-1`空格（`' '`），然后是空格（如您所指定）和 `4-1`空格，然后再打印 1 个空格。然后返回写入的字符总数。这就是总和的方式。

我只记得这个规则

```
printf("%*c",X,C) prints the char C in a field of size X 
```

所有这些行为都在 C11 标准中进行了解释。

从标准**[§7.21.6.1p4](http://port70.net/~nsz/c/c11/n1570.html#7.21.6.1p4)**

> 可选的最小字段宽度。***如果转换后的值的字符数少于字段宽度，则在字段宽度*** 的左侧（或右侧，如果已给出稍后描述的左侧调整标志）用空格（默认情况下）填充。*字段宽度采用星号`*`（稍后描述）或非负十进制整数的形式。*

在同一节**[§7.21.6.1p5](http://port70.net/~nsz/c/c11/n1570.html#7.21.6.1p5)**

> 如上所述，***字段宽度或精度或两者都可以由星号指示。在这种情况下，int 参数提供字段宽度或精度***

最后[**§7.21.6.1.p14**](http://port70.net/~nsz/c/c11/n1570.html#7.21.6.1p14)

> ***该`fprintf`函数返回传输的字符数，***如果发生输出或编码错误，则返回负值。

* * *

为了清楚你的想法，这个例子已经足够好了（我在`%d`这里使用，以便你了解该领域的想法）。

如果`x = 10`然后`y=2`它将是

```
printf("%*d%*d",  x, x,  y, y); 
```

更清楚

```
| | | | | | | | |1|0| |2|
 1 2 3 4 5 6 7 8 9 10 \ \
                      11 12

That's how 12 characters are printed. 
```

# android - 从位图中删除特定像素

> ID：12331333
> 
> 赞同：0
> 
> 时间：2012-09-08T13:55:04.800
> 
> 标签：android, bitmap, pixel

我想从位图中删除像素。这是我的 for 循环，它遍历 Bitmap 中的所有像素：

输入和输出都是位图。

```
for(int x = 0; x<input.getWidth(); x++){
            for(int y = 0; y<input.getHeight(); y++){               
                if(output.getPixel(x, y) == input.getPixel(x, y)){
                    output.setPixel(x, y, Color.WHITE); // changes color to white
                }
            }
        } 
```

但我想删除像素，而不仅仅是改变它的颜色。那可能吗？我稍后会根据其形状向该位图添加阴影，因此在这种情况下使其透明对我没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:34:08.510

你的意思是让它透明？写一个 alpha 值为零的颜色。setPixel(x,y,0) 应该做得很好。

# node.js - 在 Node.js 中，如何让父对象发出所有子对象的事件？

> ID：12331338
> 
> 赞同：1
> 
> 时间：2012-09-08T13:55:17.887
> 
> 标签：node.js, events, coffeescript, socket.io, eventemitter

假设我有一个像这样的对象（使用coffeescript）：

```
class Client
  constructor: (socket) ->
    @id     = socket.id
    @socket = socket
    # some other initialization here... 
```

现在，每当@socket 发出某些东西时，我希望客户端对象通过发出相同的事件来模仿它。我想不出更好的方法来做到这一点，而不是只监视@socket 发出的每个事件并在 Client 类中手动发出它，即：

```
class Client
  constructor: (socket) ->
    # ...
    @socket.on('disconnection', onDisconnect)
    @socket.on('message', onMessage)

  onDisconnect: ->
    this.emit('disconnection')

  onMessage: (data) ->
    this.emit('message', data) 
```

我知道必须有更好的方法，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:03:50.423

猴子补丁`@socket`对象发出：

```
class Client
  constructor: (socket) ->
    @reEmit(socket)

  reEmit: (ee)->
    oldEmit = ee.emit
    ee.emit = (args...)=>
      @emit(args)       
      oldEmit.apply(ee, args) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:06:06.540

像这样的东西？（未经测试。）

```
class Client

  constructor: (socket) ->
    # ...
    for event in ['disconnect', 'message']
      @socket.on(event, => @emit(event, arguments)) 
```

# javascript - 事件的 ExtJS 控制器选择器

> ID：12331339
> 
> 赞同：1
> 
> 时间：2012-09-08T13:55:30.730
> 
> 标签：javascript, controller, extjs4, extjs

我有一个视图和一个控制器。该视图在按钮下有菜单，单击时将由控制器处理哪些项目。如果我放置类选择器，控制器永远不会捕获该事件，但如果我删除类选择器，它会起作用。

看看我的代码。

看法

```
Ext.create('Ext.Button', {
    text: 'Add Tab',
    cls: 'button',
    menu: Ext.create('Ext.menu.Menu', {
        cls: 'addMenu',
        items: [{
            text: 'One'
        }, {
            text: 'Two'
        }]
    })
}); 
```

和控制器

```
Ext.define('MyApp.controller.TabController', {
    extend : 'Ext.app.Controller',

    init : function() {
        this.control({
            'menu[cls=addMenu]' : {
                'click' : this.addTab
            }
        });
    },

    addTab : function(a, b, c, d) {
        console.log(a, b, c, d);
    }
}); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:13:19.220

也许您应该将类​​名包含在引号中，例如

```
'menu[cls="addMenu"]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T12:04:58.143

我用另一种方式解决了我的问题。

看法

```
Ext.create('Ext.Button', {
    text: 'Add Tab',
    cls: 'button addTab',
    menu: Ext.create('Ext.menu.Menu', {
        cls: 'addMenu',
        items: [{
            text: 'One'
        }, {
            text: 'Two'
        }]
    })
}); 
```

和控制器

```
Ext.define('MyApp.controller.TabController', {
    extend : 'Ext.app.Controller',

    init : function() {
        this.control({
            'button[cls=button addTab] > menu' : {
                'click' : this.addTab
            }
        });
    },

    addTab : function(a, b, c, d) {
        console.log(a, b, c, d);
    }
}); 
```

这很好用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T09:36:59.117

通常，'=' 运算符更适合 CSS 类以外的对象属性，而 '~=' 运算符最适用于保存以空格分隔的 CSS 类列表的属性。

# r - R使用strsplit分割字符向量？

> ID：12331342
> 
> 赞同：-2
> 
> 时间：2012-09-08T13:55:36.907
> 
> 标签：r, split, statistics, dataframe, strsplit

作为 R 中的新手，如何正确处理具有多个值的变量：

```
x = c("1","1","1/2","2","2/3","1/3") 
```

如您所见，值 3 仅与其他值一起出现。

为了`x`进一步计算，最好的方法是获得 3 个向量，例如：

```
X[1] = c(1,1,1,NA,NA,1) 
```

因为“1”出现在第 1、第 2、第 3 和第 6 位。`X[2]`与和同上`X[3]`

这样做似乎保留了所有信息：我错了吗？

我已经测试了 strsplit 但它没有保留`NA`我的向量中还没有的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-23T11:22:40.057

另一种方法是`cSplit_e`从我的“splitstackshape”包中使用。

```
x = c("1","1","1/2","2","2/3","1/3")
library(splitstackshape)
cSplit_e(data.frame(x), "x", "/")
#     x x_1 x_2 x_3
# 1   1   1  NA  NA
# 2   1   1  NA  NA
# 3 1/2   1   1  NA
# 4   2  NA   1  NA
# 5 2/3  NA   1   1
# 6 1/3   1  NA   1 
```

（请注意，与接受的答案中的结果相比，此处的结果是转置的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:13:01.223

这似乎有效：

```
x = c("1","1","1/2","2","2/3","1/3")

#Split on your character. This may not be inclusive of all characters that 
#need to be split on.
xsplit <- strsplit(x, "\\/")
#Find the unique items
xunique <- unique(unlist(xsplit))

#Iterate over each xsplit for all unique values
out <- sapply(xsplit, function(z)  
  sapply(xunique, function(zz) zz %in% z)
)
#convert FALSE to NA
out[out == FALSE] <- NA

#Results in
> out
  [,1] [,2] [,3] [,4] [,5] [,6]
1 TRUE TRUE TRUE   NA   NA TRUE
2   NA   NA TRUE TRUE TRUE   NA
3   NA   NA   NA   NA TRUE TRUE 
```

# java - 在 Graphics2D 对象 JAVA 中使用图片的文本属性

> ID：12331343
> 
> 赞同：2
> 
> 时间：2012-09-08T13:55:45.083
> 
> 标签：java, image, rendering, awt, drawstring

我有一个奇怪的问题 - 我试图在透明的 GIF 图片上写一个文本字符串。我正在使用 awt Graphics2D 对象，出于某种原因，我无法影响文本的外观——它的颜色、对齐方式等等。每次我将 drawString 与字符串一起使用时，它都是白色且居中的。这是我的jre的问题吗？用GIF格式？或者图片是透明的事实？

我试过这样做：（TextAttributes 只是我创建的一些容器类）

```
Map<TextAttribute, Object> fontAtts = new Hashtable<TextAttribute, Object>();

fontAtts.put(TextAttribute.RUN_DIRECTION, TextAttribute.RUN_DIRECTION_RTL);
fontAtts.put(TextAttribute.FAMILY, TextAttributes.type);
fontAtts.put(TextAttribute.FOREGROUND, TextAttributes.color);
fontAtts.put(TextAttribute.SIZE, TextAttributes.size);

Font font = new Font(fontAtts);
BufferedImage image = getImage(picturePath, pictureName, format);\\just gives me the buffered image
Graphics2D g2 = image.createGraphics();

//first way:    
g2.setFont(font);
g2.drawString("bla blah", 200,150)

//second way
g2.setPaint(TextAttributes.color);
g2.drawString("bla blah", 200,150)

//third way
g2.setColor(Color.RED);
g2.drawString("bla blah", 200,150)

//fourth way
AttributedString x = new AttributedString("blah blah", fontAtts);
g2.drawString(x.getIterator(),200,150) 
```

但没有任何效果:(

# c - Opencl全局变量在线程中具有不同的值，OpenCL KERNEL

> ID：12331350
> 
> 赞同：0
> 
> 时间：2012-09-08T13:56:29.560
> 
> 标签：c, global-variables, opencl

所以我正在处理以下情况。我希望我的所有线程都执行一个循环，直到它们都没有达到某个“if”，所以我使用一个存储 0 的全局变量，当到达 if 语句时，该变量变为 1。

问题是，在循环结束时，我做了一个屏障来同步所有线程（在我的情况下我只有 4 个），并且只有达到 if 的值具有全局变量 1，其他线程的值为 0。

这个怎么可能？全局变量如何在不同的线程中具有不同的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:09:57.540

我认为全局变量设置为一些缓冲区和缓存，你们中的一个线程将此变量写入 1 但不写入物理内存，而是写入缓存行。在这种情况下，其他线程没有获得更新的值。

# c# - 测试 Windows 服务项目花费的时间太长

> ID：12331356
> 
> 赞同：2
> 
> 时间：2012-09-08T13:57:06.470
> 
> 标签：c#, .net, visual-studio-2010, testing, service

我在 Visual Studio 中有一个 Windos 服务项目，因为如果不安装它就无法启动服务，如果我想测试我的代码的一些更改，我必须一次又一次地编译 + 卸载旧服务 + 安装新服务。这是永远的。

有没有更简单的方法来测试 Windows 服务？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:11:36.707

从 VS 将服务作为控制台应用程序运行。其实，如果你很聪明，你可以测试是否

Environment.UserInteractive

这样，通过一个简单的“如果”，您可以让您的服务正常运行，如果您以交互模式运行它，则无需 windows 服务的东西，或者如果它作为服务运行，则执行正常的服务启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:15:39.677

在测试服务时，我通常建议将功能与托管分开。并以独立的方式测试功能。

这意味着您可能会在 OnStart 中生成一个工作线程，该线程实例化并调用一些代表服务实际工作的类方法。从技术上讲，这段逻辑不应该明确关心它在哪里运行，控制台应用程序、Windows 服务或 Web 服务等。

II 建议您直接测试此逻辑，例如在单元测试中，其中逻辑由 Visual Studio 本身托管。这并不是建议您不应该测试服务，但这可以手动或自动完成，尤其是在 QA 或健全性测试期间，运行需要很长时间才能执行的测试是可以的。

# android - 如何通过从图像视图中获取 x、y 坐标在可缩放位图上绘制一个点

> ID：12331357
> 
> 赞同：0
> 
> 时间：2012-09-08T13:57:09.453
> 
> 标签：android, bitmap, imageview, draw

请帮我

我正在开发一个 android 应用程序以在图像视图中显示可缩放和可拖动的位图（图像视图的边界与设备屏幕大小相同）。我只是缩放位图并将其显示在图像视图中

我想要的是

当单击设备屏幕上的某个位置时，获取 X 和 Y 位置并在我单击位图的位置准确绘制一个点就像在位图上标记您的位置

这是一张描述性图片（抱歉，我的声誉很低，无法上传到这里）

[http://www4.picturepush.com/photo/a/9321682/img/9321682.jpg](http://www4.picturepush.com/photo/a/9321682/img/9321682.jpg)

当图像显示时，我想获取图像视图的 x2、y2 位置并在位图上的 x1、y1 位置绘制红点

如果您能给我一些代码或建议，这对我很有帮助

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T06:53:09.837

我遇到了同样的问题并得到了解决。

试试这个，

1.  **获取接触点 x, y **

    ```
     int x = (int) event.getX();
       int y = (int) event.getY(); 
    ```

**2.计算逆矩阵**

```
 // calculate inverse matrix
            Matrix inverse = new Matrix(); 
```

**3\. 获取你的 ImageView 矩阵** getImageMatrix().invert(inverse);

**4\. 将您的坐标映射到实际图像**

```
 // map touch point from ImageView to image
        float[] touchPoint = new float[] { event.getX(), event.getY() };
        inverse.mapPoints(touchPoint); 
```

* *4\. 获取图像的实际 x、y **

```
 x = (int) touchPoint[0];
        y = (int) touchPoint[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:42:19.090

为了捕捉触摸的坐标，使用`onTouch`imageView 的事件：

```
imageView.setOnTouchListener(this);

@Override
    public boolean onTouch(View view, MotionEvent me) {
        int x = me.getX();
        int y = me.getY();
        yourbitmap.setPixel(x + dx, y + dy, COLOR.RED);

        return true;

} 
```

`dx, dy`imageView中位图的位移在哪里。

**编辑**

`dx`和的值`dy`取决于您自己设置的图像视图的设置。如果位图始终居中而不是屏幕填充，`dy= (imageview_height - bitmap_height) / 2`并且`dx= (imageview_width - bitmap_width) / 2`. 如果图像被缩放以适合图像视图，则必须确定比例因子。[您可以在此处](https://stackoverflow.com/a/4934840/314784)阅读有关这些计算的信息。

# c# - 如何在 C# 中监听 windows 事件？

> ID：12331362
> 
> 赞同：6
> 
> 时间：2012-09-08T13:57:18.843
> 
> 标签：c#, com-interop, winapi, wmp

我正在开发一个与歌词相关的应用程序，我需要收听 Windows Media Player 事件。我在“Accessible event watcher”中观看了windows事件，我发现WMP在状态或当前位置发生变化时会发送一些事件。我在 MSDN 上搜索并找到这篇文章[如何在 Visual C# .NET 中设置 Windows 挂钩，](http://support.microsoft.com/?kbid=318804)但我无法使其工作。

如何从我的 C# 应用程序中收听该事件或有关使用其他方法获取当前歌曲和 WMP 播放状态的任何建议？\

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:07:53.987

本文介绍如何使用`AxWindowsMediaPlayer`windows 媒体播放器系统的底层根获取事件。你会看到各种状态变化事件都可以正常拾取。

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd562388(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562388(v=vs.85).aspx)

您应该能够从 Windows ROT（运行对象表）中获取正在运行的实例吗？

[http://www.darinhiggins.com/the-running-instance-of-windows-media-player/](http://www.darinhiggins.com/the-running-instance-of-windows-media-player/)

编辑：

这是另一种方式...

[http://www.darinhiggins.com/gaining-access-to-a-running-instance-of-windows-media-player-in-vb-net/](http://www.darinhiggins.com/gaining-access-to-a-running-instance-of-windows-media-player-in-vb-net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:01:49.310

这对你有帮助吗？[http://forums.msdn.microsoft.com/en-US/clr/thread/dbd43d7e-f3a6-4087-be06-df17e76b635d](http://forums.msdn.microsoft.com/en-US/clr/thread/dbd43d7e-f3a6-4087-be06-df17e76b635d)。这里还有这篇文章[让 windows 媒体播放器当前正在播放的歌曲](https://stackoverflow.com/questions/3681576/getting-windows-media-player-currently-playing-song)可能会回答你的问题。

# php - 在 Kohana PHP 框架中启用 PECL HTTP

> ID：12331365
> 
> 赞同：2
> 
> 时间：2012-09-08T13:57:47.903
> 
> 标签：php, http, kohana, kohana-3, kohana-3.2

我对 kohana 框架完全陌生，我下载并安装了 kohana 3.2.2 版本，这是最新的稳定版本。但是当我运行 install.php 时，它通过了所有要求，但没有通过这个要求。

PECL HTTP Enabled Kohana 可以使用 Request_Client_External 类的 http 扩展。

我想要 PECL HTTP Enabled Pass ，因为在我的网站中会有更多来自其他网站的 http 请求。

谁能帮我安装启用此 PECL HTTP 的 Kohana。我正在使用 Windows 并将 kohana 安装在 WAMP 服务器 www/kohana 文件夹中。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:20:07.390

您不需要启用 PECL（实际上没有针对 Windows 的官方版本），只要确保您启用了 cURL 并且 Kohana 无论如何都可以发出请求。

# iphone - 架构 i386 未定义符号的原因？

> ID：12331367
> 
> 赞同：0
> 
> 时间：2012-09-08T13:58:03.167
> 
> 标签：iphone, objective-c, xcode

发生“架构 i386 的未定义符号：”错误的真正原因是什么？

它经常出现在各种库中......

问候米尔扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:16:33.297

有时您需要链接到包含在 iOS sdk 中的框架（例如 QuartzCore 或 CoreData）。当您尝试使用该框架的类或对象并且尚未链接它时，您会收到未定义符号错误。

# c++ - 在 scanf 中引用 int

> ID：12331372
> 
> 赞同：2
> 
> 时间：2012-09-08T13:58:22.093
> 
> 标签：c++, c, scanf

这个问题可能看起来很愚蠢，但这就是人们学习的方式:)。我学习了 C++，您不必担心在 cin>> 中引用 int 变量。今天我正在学习 C 中的文件处理以用于学校工作，但是当我尝试使用这种语法运行程序时，我得到了错误。

```
scanf("%d\n %s\n",id, name); 
```

但是当我在scanf中引用id时，错误消失了。

```
scanf("%d\n %s\n",&id, name); 
```

为什么会这样？我将非常感谢您回答这个菜鸟问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:00:29.853

`scanf`需要的地址，`id`因此它会扫描将值存储在那里。它对您在第一个案例中给出的当前值不感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:00:39.543

[`scanf`](http://linux.die.net/man/3/scanf)是一个函数，它需要一个指向变量的指针，以便它可以将读取的值存储到指针指向的位置。

`name`大概是某种 ( `char`?) 数组，因此该变量的标识符已经引用了一个地址，因此`&`不需要运算符。然而，对于`int`变量（我假设`id`是某种`int`），您需要获取要`scanf`在调用中传递的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T14:02:18.860

scanf 是一个 C 函数。C 没有引用，因此要更改变量 scanf 需要传递一个指向该变量位置的指针。C++ 有引用，所以它不需要指针，尽管它也可以使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T14:10:23.643

**scanf()**需要变量的地址来存储数据。

如果是整数，则需要“ **&** ”符号来引用整数变量的地址。但在字符串的情况下，不需要使用“ **&** ”，因为字符串已经是指向字符数组的指针。

# php - 从字符串中删除信息

> ID：12331376
> 
> 赞同：2
> 
> 时间：2012-09-08T13:59:10.843
> 
> 标签：php, regex, string

我正在使用一个 API，它使用用户 IP 地址来找出用户的国家位置和城市，但是我以前从未使用过正则表达式，我不知道如何提取我想要的其他信息。

```
 $location=file_get_contents('http://api.hostip.info/get_html.php?ip='.$ip); 
```

此行返回“**国家：英国（GB）城市：爱丁堡 IP：80.192.82.75** ”我已设法使用正则表达式提取 IP 地址，但不知道如何将国家和城市删除为单独的变量（$country = , $城市=）。这是我到目前为止的代码。

```
 $ip=$_SERVER['REMOTE_ADDR'];
 $location=file_get_contents('http://api.hostip.info/get_html.php?ip='.$ip);
 preg_match("/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/", $location, $matches); 
 $ip = $matches[0]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:06:32.897

[接受millimoose](https://stackoverflow.com/users/41655/millimoose)的建议，它看起来像这样：

```
$jstring = file_get_contents('http://api.hostip.info/get_json.php?ip='.$ip);
$ipinfo = json_decode($jstring); 
```

这给出了：

```
stdClass Object
(
    [country_name] => NETHERLANDS
    [country_code] => NL
    [city] => (Unknown city)
    [ip] => xx.xx.10.9
) 
```

这可以用作：

```
echo $ipinfo->city; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:14:18.027

使用正则表达式模式`/Country: ([^\(]+) \(([^\)]+)\) City: ([^:]+) IP: ([\d.]+)/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T14:20:17.463

一种方法是使用 Country:、City: 和 IP: 作为分隔符。如果 API 总是返回所有三个字段，您可以一次性检索所有字段：

```
/^Country: (.*?) City: (.*?) IP: (.*?)$/ 
```

或者，如果没有，您可能需要一一提取它们：

```
/Country: (.*?)(?: \w+?:)?/
/City: (.*?)(?: \w+?:)?/
/IP: (.*?)(?: \w+?:)?/ 
```

就 PHP 部分而言，括号中模式的匹配项根据文档在匹配数组中返回（除了 (?: 和 ) 之间的模式）。因此，对于我上面列出的第一个给定表达式，应该在 $matches[2] 中返回 Edinburgh。

请注意，我相信上述字符串可能需要额外的转义，特别是如果它们放在双引号中。

# php - Jquery切换..修复对齐

> ID：12331377
> 
> 赞同：0
> 
> 时间：2012-09-08T13:59:13.133
> 
> 标签：php, javascript, jquery, html, css

大家好，我有这个脚本

```
<a class="clickMe" toggle="first">Text 1</a>
</br>
<div id="first" class="text"> - This text will be toggled</div>

<a class="clickMe" toggle="second">Text 2</a>
</br>
<div id="second" class="text"> - This text will be toggled 2</div> 
```

和jQuery

```
 $('a.clickMe').click(function () {
   id = $(this).attr('toggle');
   $('.text').not('#' + id).hide();
   $('#' + id).show();
 }); 
```

上面的代码通过切换`This text will be toggled`或`This text will be toggled 2`当我们点击`Text 1`或被`Text 2`点击时可以正常工作，请查看[演示](http://jsfiddle.net/LTYa2/53/)

但现在我要做的是为切换的文本设置固定的位置/对齐方式，现在它在文本 1 或文本 2 下方切换，但我需要把它放在右侧，这样当任何一个 TEXT1 或TEXT2 被点击切换声明应该显示在同一个地方（右侧不在下方）...请帮我解决这个问题....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:04:57.240

您可以使用非块元素，如`span`and`toggle`方法。

```
<a class="clickMe">Text 1</a>
<span class="text"> - This text will be toggled</span>
<br/>
<a class="clickMe">Text 2</a>
<span class="text"> - This text will be toggled 2</span> 
```

```
$('a.clickMe').click(function () {
   $(this).next().toggle()
}); 
```

[http://jsfiddle.net/LTYa2/66/](http://jsfiddle.net/LTYa2/66/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:16:00.550

你可以试试这个：

```
div {
    display: inline-block;
} 
```

**[这](http://jsfiddle.net/blasteralfred/LTYa2/68/)**是更正的工作现场演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T15:12:18.823

为什么不使用 jQuery 的`.text()`特性来试试这个：

> [http://jsfiddle.net/FlameTrap/pe8xV/2/](http://jsfiddle.net/FlameTrap/pe8xV/2/)

# javascript - jQuery加载完成事件不起作用？

> ID：12331381
> 
> 赞同：1
> 
> 时间：2012-09-08T13:59:44.003
> 
> 标签：javascript, jquery, html, ajax

我想用应该从另一台服务器加载的数据来扩展一个部门。

问题是如果我开始扩展分区（切换滑动）并且加载方法完成高度跳跃并且效果被破坏。

我想要的是 jquery 在数据传输完成后开始扩展，但我的以下代码不起作用：

```
// divison name = details
details.load("index.php", expandLastResultDetails3(details));

function expandLastResultDetails3(details) {
    $(details).slideToggle('slow', function () {
        ready();
    });
} 
```

盒子正在跳跃，因为（我猜）slidetoggle 开始得很早。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T14:01:32.130

[`.load()`](http://api.jquery.com/load/)期望在请求完成时调用*函数回调。*但是，您**执行**的是函数，而不是传递回调。尝试以下操作：

```
details.load("index.php", function () {
  expandLastResultDetails3(details);
}); 
```

# html - 使 HTML5 页面在浏览器中看起来相同的最佳实践是什么？

> ID：12331385
> 
> 赞同：0
> 
> 时间：2012-09-08T14:00:22.023
> 
> 标签：html, cross-browser, backwards-compatibility

HTML5 带有许多新功能，例如新标签，其中许多功能都受到最新一代浏览器的支持。

使 HTML5 页面在所有版本的流行浏览器（Chrome、Firefox、IE、Opera、Safari）中看起来相同的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:05:46.657

[最好的做法](http://www.alistapart.com/articles/responsive-web-design/)是[不要试图](http://www.noupe.com/design/websites-shouldnt-look-the-same-across-different-browsers%E2%80%A6here-is-why.html)让它[在所有浏览器中看起来都一样](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)。网页设计[不像印刷设计那样工作](http://www.zeldman.com/2010/07/05/an-indesign-for-html-and-css/)，您无法控制最终输出，用户可以。这是网络的优势，而不是限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T18:28:40.243

测试。拥有每个副本并再次测试。如果它在 IE 中有效，但在现代浏览器中无效，那么您的标记是错误的。因此，请选择您认为始终正确的浏览器并先在那里进行测试。很有可能，如果它在现代浏览器中工作，那么它可以在任何地方工作，除了 IE，几乎总是例外。

# android - 将 marginleft 设置为 imageview 不起作用

> ID：12331397
> 
> 赞同：1
> 
> 时间：2012-09-08T14:01:46.423
> 
> 标签：android, android-layout

我有这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="90dip"
            android:background="@drawable/roundededges"                        
            android:layout_marginTop="1dip"
            android:id="@+id/articleBoxLayout">
<TextView 
       android:id="@+id/articleTitle"
       android:layout_width="fill_parent"
       android:layout_height="30sp"               
       android:text="Test Test Title"
       android:typeface="sans"
       android:gravity="right"
       android:ellipsize="end"
       android:singleLine="true" 
       android:paddingRight="4dip"
       android:textSize="20sp"  
       android:textColor="#C98E04"
       android:textStyle="bold"                         
       android:clickable="true"/>

<ImageView
    android:id="@+id/articleImage"
    android:layout_width="65dip"
    android:layout_height="50dip"
    android:layout_below="@+id/articleTitle"
    android:marginBottom="18dip"
    android:marginLeft="18dip"
    android:scaleType="fitXY"
    android:src="@drawable/aaa" />

<TextView 
       android:id="@+id/articleSubTitle"
       android:layout_toRightOf="@+id/articleImage" 
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_below="@+id/articleTitle"
       android:gravity="right"           
       android:inputType="textMultiLine"        
       android:text="blablablabla"
       android:ellipsize="end"
       android:textSize="10sp"
       android:textColor="#FFFFFF"                
       android:clickable="true"/>
</RelativeLayout> 
```

由于某种原因，marginLeft 不会影响 ImageView 的位置。

ImageView 保持在左侧（左对齐）。

可能是什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T14:29:11.980

设置`android:layout_marginLeft`而不是`android:marginLeft`

所以 ImageView 的正确 xml 应该是：

```
<ImageView
android:id="@+id/articleImage"
android:layout_width="65dip"
android:layout_height="50dip"
android:layout_below="@+id/articleTitle"
android:layout_marginLeft="18dip"
android:layout_marginBottom="18dip"
android:scaleType="fitXY"
android:src="@drawable/aaa" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:24:37.883

只需输入此代码即可使您的 android imageview 在任何位置都有边距

```
android:layout_marginLeft="18dp"
android:layout_marginBottom="18dp" 
```

有关 android 布局的更多详细信息，请浏览此处[http://grabcodes.blogspot.in/](http://grabcodes.blogspot.in/)

# r - 规范化ggplot中覆盖密度图的x比例

> ID：12331399
> 
> 赞同：3
> 
> 时间：2012-09-08T14:01:56.553
> 
> 标签：r, ggplot2

当覆盖具有相同长度但不同比例的特征数据的 ggplot 密度图时，是否可以标准化图的 x 比例以使密度匹配？或者有没有办法标准化密度y尺度？

![在此处输入图像描述](../Images/9beedf9766716ae31291091a708d4f02.png)

```
library(ggplot2)

data <- data.frame(x = c('A','B','C','D','E'), y1 = rnorm(100, mean = 0, sd = 1), 
               y2 = rnorm(100, mean = 0, sd = 50))
p <- ggplot(data)

# Overlaying the density plots is a fail
p + geom_density(aes(x=y1), fill=NA) + geom_density(aes(x=y2), alpha=0.3,col=NA,fill='red')

# You can compress the xscale in the aes() argument:
y1max <- max(data$y1)
y2max <- max(data$y2)
p + geom_density(aes(x=y1), fill=NA) + geom_density(aes(x=y2*y1max/y2max), alpha=0.3,col=NA,fill='red')
# But it doesn't fix the density scale. Any solution?

# And will it work with facet_wrap?
p + geom_density(aes(x=y1), col=NA,fill='grey30') + facet_wrap(~ x, ncol=2) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:41:57.377

这是否符合您的期望？

```
p + geom_density(aes(x=scale(y1)), fill=NA) + 
    geom_density(aes(x=scale(y2)), alpha=0.3,col=NA,fill='red') 
```

仅具有单个数据参数的`scale`函数将以 0 为中心的经验分布，然后将结果值除以样本标准差，因此结果的标准差为 1。您可以更改“压缩”的位置和程度的默认值”或“扩展”。您可能需要调查为 y1 和 y2 设置适当的 x_scales。这可能需要一些规模的预处理。缩放因子记录在返回对象的属性中。

```
 attr(scale(data$y2), "scaled:scale")
#[1] 53.21863 
```

# node.js - CMD批处理文件：如何使用文本文件输入命令

> ID：12331400
> 
> 赞同：1
> 
> 时间：2012-09-08T14:01:56.473
> 
> 标签：node.js, batch-file, windows-xp, cmd

我正在创建一个批处理文件以在 Windows XP 机器上静默安装 nodejs。

我正在尝试自动安装节点模块依赖项（npm install）。

我通常会从目标安装目录中的 cmd 提示符发出 npm install 。

我正在努力自动化与批处理文件中的命令提示符的交互。

我的批处理脚本中的以下行似乎使我可以将命令的文本文件通过管道传输到 cmd：

```
for /F "usebackq delims=," %%i in ("c:\foo\source\npm_install.txt") do echo %%i | "c:\windows\system32\cmd.exe" 
```

批处理文件位于 c:\foo\source 中。我需要从 c:\foo\bin 发出“npm install”。

如果我的 npm_install.txt 文件是这样的：

```
 cd /d c:\foo\bin,     
  npm install 
```

cmd 提示符将执行第一个命令，将目录从 c:\ 更改为 c:\foo\bin。

然后它将执行第二个命令，但再次从 c:\ 开始。先前更改目录的命令不会持续存在。似乎文本文件中的每个命令都将从 c:\ 发出。

接下来我尝试从一个组合语句中发出这两个命令：

```
 cd /d c:\foo\bin && npm install 
```

似乎这种方法可以让我克服之前的路径问题，但是我遇到了 npm 和 install 之间的空间问题。

cmd 提示符执行 c:\foo\bin>npm 并导致 npm 在空间上跳闸。

我试过封闭命令但没有成功：'npm install'，“npm install”，（npm install）。

谁能告诉我我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:56:59.943

问题是您的批处理脚本正在创建一个新的子shell 来处理安装文件中的每一行。因此，您的`cd`命令在子shell 中执行，更改其工作目录，但随后子shell 退出，您又回到父shell 的工作目录。

您的主脚本可以只是`call`您的安装脚本（其扩展名必须更改为“.bat”）吗？`call`允许您在同一个 shell 中运行另一个批处理文件，然后继续运行您的原始脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:00:36.960

你不需要这个： `do echo %%i | "c:\windows\system32\cmd.exe"`. 只需将您的命令放在一个块中。

```
do (
  command
  command
  ...
) 
```

使用您之前的语句，您启动新的 cmd 解释器，要求它为您执行命令并退出 - 这就是您失去`cd`.

如果您没有在 for 循环中指定标记，则仅读取第一个。另外，所有标记必须在同一行（我不确定您显示的内容是否不是格式化的副产品）`"delims="`用于阅读整行。

如果不需要，请勿将命令与参数混合：仅将目录放入文件中：

> c:\foo\bin
> c:\bar\bin

所以最后它变成了（我用 pushd/popd 替换了 cd 所以你最终会在你开始的同一个目录中）：

```
for /F "usebackq delims=" %%i in ("c:\foo\source\npm_install.txt") do (
      pushd %%i 
      npm install
      popd 
    ) 
```

编辑：如果`npm install`是批处理本身，您将需要使用调用，如**ebohlman**所述

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T22:12:20.200

**注意：**这三个示例*不需要*您将`CALL`任何批处理文件放在前面，每个批处理文件都内置了该功能。

最小和最简单的，它只是执行**带有**参数的命令：

```
@echo off
for /f "tokens=*" %%x in (c:\foo\source\npm_install.txt) do (
  call %%x
) 
```

要模仿一个人在键盘上键入命令：

```
@echo off
for /f "tokens=*" %%x in (c:\foo\source\npm_install.txt) do (
  setlocal enabledelayedexpansion
    :: Mimic commandline
    call set "cmd=%%cd%%"
    echo !cmd!^>%%x
  endlocal
  :: Preform command
  call %%x
  echo.
) 
```

无论脚本在哪里结束，都要在您开始时所在的同一目录中结束：

```
@echo off
setlocal enabledelayedexpansion
for /f "tokens=*" %%x in (c:\foo\source\npm_install.txt) do (
    :: Mimic commandline
    call set "cmd=%%cd%%"
    echo !cmd!^>%%x
  :: Preform command
  call %%x
  echo.
)
endlocal 
```

# asp.net - 自定义 asp.net 控件的许可证信息

> ID：12331401
> 
> 赞同：0
> 
> 时间：2012-09-08T14:02:04.960
> 
> 标签：asp.net, .net, drop-down-menu, web, custom-controls

我创建了时尚的 asp.net 控件，并将源代码和 dll 放在 sourceforge 中。我想知道，如果我创建 asp.net 控件并在某个地方免费上传 dll 会不会有任何问题。据我所知，.NET 框架是免费的，我们可以毫无问题地创建和发布 dll。另外，我应该使用哪个许可证来保护我的工作，我不想要任何钱，但我希望其他开发人员对这个项目感兴趣并致力于它。项目的源锻造位置是：[https ://sourceforge.net/p/aspnetcontrols/](https://sourceforge.net/p/aspnetcontrols/)

您能否查看[此位置](http://kp.bumbleb.in/Controls.aspx)的示例控件，如果它是一个好的开始，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:17:00.183

**执照**

GNU 库通用公共许可证 (LGPL) 似乎很受欢迎，但有一些可供选择。

或者

本网站使用创作共用许可证，这也是一个很好的[http://creativecommons.org/licenses/by-sa/3.0/](http://creativecommons.org/licenses/by-sa/3.0/)

**广汽**

如果您想轻松地将您的 dll 添加到 GAC 以便它只需要在每台计算机上安装一次，则创建一个安装 (msi) 项目并单击解决方案资源管理器上的“文件系统编辑器”按钮。

在文件系统资源管理器中，您将看到“全局程序集缓存文件夹”。将您的 dll 添加到“全局程序集缓存文件夹”，当用户运行您的 msi 时，它将自动安装到正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:05:37.250

是的，您可以共享您的 dll，您可以使用`Gacutil.Exe`此工具允许您共享有关不同项目或应用程序的程序集。

这允许在 GAC 中安装您的 dll。

链接：http: [//msdn.microsoft.com/fr-fr/library/ex0ss12c%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/ex0ss12c%28v=vs.80%29.aspx)

许可证：http: [//jena.sourceforge.net/license.html](http://jena.sourceforge.net/license.html)

# iphone - iphone/ipad游戏开发

> ID：12331402
> 
> 赞同：1
> 
> 时间：2012-09-08T14:02:11.920
> 
> 标签：iphone, ios, ipad, game-engine

我是一名 iOS 开发人员。我为 iPhone 和 iPad 开发了许多应用程序。现在计划从游戏开发开始。在开始之前我需要一些细节？

1.  游戏开发与应用程序有多么不同。发展？
2.  游戏需要额外的培训吗？
3.  仅使用 Objective C 是否可以进行 2D 游戏？
4.  我应该为 2D/3D 游戏使用哪些搜索引擎或库？
5.  任何游戏开发的教程或书籍？
6.  游戏会完全在 Objective C 上运行吗？还是需要使用 C/C++ 等其他语言？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:13:05.473

那里有很多答案，而 StackOverflow 并不是回答这些问题的最佳场所，你需要学习很多关于它的知识，直到你能做出一些好的东西（但如果你足够努力的话，你会的）。要回答您的观点，从来没有一个真正的答案，但无论如何：

1.  游戏是视觉的（除非您正在编写基于文本的游戏），您需要良好的面向对象编程技能和将代码级别的对象与屏幕上的实际对象相关联的思维。大多数游戏都有循环处理许多帧每秒的物理/绘制对象。

2.  对于专业游戏，您将需要一个框架/工具来开发。很难编写准系统 Objective-C 代码并用它制作游戏。

3.  是的，这是可能的，但很难。

4.  对于 2D，看看 Cocos2D 和 Flash，使用 Box2D 物理引擎是个好主意。对于 3D，我推荐 Unity。

5.  我想不出一个具体的，只是在网上搜索，有大量的资源。每个人对概念的理解不同，因此某人的一个“超级教程”可能是另一个人的“更差”教程。只需搜索，直到找到您清楚了解的内容。

6.  从理论上讲，是的，游戏可以纯粹使用 Objective-C 运行，但大多数帮助创建游戏的工具也使用其他语言。

# java - 如何使用 jdbc 将 mysql 数据库连接到桌面 java 应用程序？

> ID：12331405
> 
> 赞同：1
> 
> 时间：2012-09-08T14:02:31.193
> 
> 标签：java, mysql, jdbc

如何使用 jdbc 将 mysql 数据库连接到桌面 java 应用程序？环境是 ubuntu 12.04 Lts 我尝试了很多方法，但它们都在执行时抛出异常

```
 Class.forName("com.mysql.jdbc.Driver"); 
```

例外说：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 
```

完整的代码是：

```
import java.sql.*;

public class CRUDForGoods {
    private Connection connection ;
    public Vector<GoodsStore> goods ;

    public CRUDForGoods(){
        try{
           DriverManager.registerDriver(new JdbcOdbcDriver());
            connection = DriverManager.getConnection("jdbc:odbc:dbName","root", "root");

        }
           catch(Exception ex) {
            System.out.println("##connection");
            ex.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:15:13.260

`com.mysql.jdbc.Driver`执行代码时找不到。

您需要 mysql 连接器才能运行它（jar 包括`com.mysql.jdbc.Driver`）。你可以在[这里找到](http://dev.mysql.com/downloads/connector/j/)

下载 jar 文件并将其包含在您的类路径中。

# drupal - 根据另一个块中的更改更改块内容

> ID：12331411
> 
> 赞同：1
> 
> 时间：2012-09-08T14:02:55.567
> 
> 标签：drupal, drupal-7, partial-page-refresh, drupal-blocks

我是经验丰富的 Java/C++ 程序员，但对 Drupal/PHP 完全陌生。

**简短的问题：**

如何根据特定块的输入刷新页面中的所有块？

**确切的场景：**

我希望创建一个显示和行为类似于[http://www.google.com/finance](http://www.google.com/finance)的网站。我已经开始在 Drupal 7 中为此创建一个自定义模块，所以我们想要：

1.  顶部**输入块**，用户可以在其中输入特定公司的名称。
2.  一个以一般内容开头的**主要块（例如表格加上有关经济的最新消息等）。**一旦在块 1 中选择了一家公司，这将更改为有关所选公司的新闻和表格。
3.  a side **graph block** displaying some relevant graphs etc. Again, when no company is chosen, this could display the general graphs (eg S&P, Dow Jones, NASDAQ), and when a company is chosen, this displays the details for the chosen company.

在我看来，该网站在用户的“当前环境”中工作。那么，也许我可以在 Drupal 中设置一个会话级变量，并根据该变量的当前值刷新所有块？

但是，我不确定如何实现这一点，最好的方法是什么？（AJAX？分类法？）

欢迎任何指针、提示、建议、示例、示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:10:22.980

这就是我根据您的描述来解决这个问题的方法。Views 模块处理的大部分功能。

我假设你有以下设置：

*   称为“公司”的分类词汇，其中公司名称作为术语。
*   一种名为“新闻”的内容类型，其中包含有关公司的新闻信息。最重要的是，它需要一个分类字段，您可以在其中选择与其相关的公司（让我们将此字段称为“company_reference”）
*   称为“表格”（？）的内容类型。我不确定您在“表格”中想要什么信息，但最重要的是有一个分类领域来参考公司。（可以是同一字段“company_reference”）

您正在寻找的大部分功能都可以使用 Views 模块构建。

我会创建一个视图（我们称之为“公司数据”）。该视图将具有三个不同的显示，每个显示类型为“块”。

显示 1：**输入块**

*   将显示名称设置为有意义的名称，例如“user_input_block”
*   对于此块，请保持**FORMAT**设置不变。
*   对于**FIELDS**设置，只需要“内容：标题”（对于这个块并不重要）。
*   对于**FILTER CRITERIA**设置，添加一个过滤器并选择您的“company_reference”字段，将其设置为自动完成，向访问者公开过滤器并（在“更多”部分下）将其过滤器标识更改为“公司”。
*   对于**PAGER**设置，将其设置为显示特定数量的项目并将其设置为“1”。（这将限制此块检索的数据）
*   在“**高级**”部分下更改“机器名称”以便有意义，例如“user_input_block”
*   仍然在**高级**部分单击“主题：信息”。这将显示您可以为此视图拥有的不同自定义模板文件的列表。对于“显示输出”，写下列表中的最后一个模板建议，它将类似于“views-view--company-data--user-input-block.tpl.php”（“views-view--{your查看名称}--{您的显示名称}.tpl.php")。单击“显示输出”并复制它列出的 PHP。（这是视图的默认 PHP 视图）。
*   在文本编辑器/IDE（无论您使用什么）中，粘贴复制的 PHP 代码并将其保存在您的自定义主题中，并使用您记下的模板名称。编辑 PHP 并注释掉或删除“ `<?php if ($rows): ?>...<?php endif; ?>`”部分（这将从显示中删除返回的内容）

因此，要查看刚刚创建的视图显示，将（使用自定义模板）显示一个只有一个字段的块，当用户输入公司名称时，它将自动完成。然后它将提交表单并将其作为 GET 变量传递给当前 url (www.yoursite.com/yourpage?company=users company")。

显示 2：** 主块**

*   将显示名称设置为有意义的名称，例如“company_news”。
*   设置您喜欢的**格式**设置（或保持原样）
*   对于**FILTER CRITERIA** ，添加“Content:type”过滤器并选择“News”和“Tables”内容类型。
*   在“**高级**”部分中，单击“上下文过滤器”旁边的“添加”。）在 URL 中传递了一个上下文过滤器，我们将获取从输入块传递的值。）选择“内容：field_company_reference”作为字段，然后单击“应用”
*   对于“当过滤器值不可用时”部分选择“提供默认值”
*   对于“类型”选择“PHP 代码”，PHP 代码将是这样的“ `return isset($_GET['company']) ? $_GET['company']:false;`”
*   对于“提供默认值的过滤器可用时”，选中“指定验证条件”，将“验证器”设置为“分类术语”，检查“公司”词汇表，并为“过滤器值类型选择”转换为的术语名称术语 ID"
*   对于“如果过滤器值未验证要采取的措施”，请选择“显示所有结果”

回顾一下，这个视图显示将显示一个列出“新闻”和“表格”内容的块。如果（从输入块）传递了 GET 变量“company”，则该块的内容将被过滤以仅显示与该块关联的内容。

显示 3：** 图形块**

我不确定你想在这个块中显示什么数据（或者更确切地说它来自哪里），但是如果你按照我描述的设置**主块**的方式设置它，它将按公司过滤（使用相同的上下文过滤器和具有公司分类参考字段的内容）。

这种方法的一个区别是，当用户在输入块中输入公司时，它需要重新加载页面。如果您想避免这种情况，则可以进行以下更改；

*   对于**主块**和**图形块**，而不是使用上下文过滤器，对公司参考字段使用常规过滤器（与输入块中设置的设置相同）。**对于“高级**”部分下的这两个块，将“使用 AJAX”设置为“是”，并使用自定义 CSS 将暴露的过滤器隐藏起来。
*   使用自定义模块（或使用您的自定义主题）向页面添加额外的 JS。让 JS 由**输入块**中的字段触发，当用户在其中输入一个值时，JS 将该值复制到其他块的公开（但隐藏）字段中，触发 Drupal 通过 AJAX 使用传递的过滤器重新加载它们.

我还没有测试过这些，它只是基于我对 Drupal 的了解的理论，但它应该让你走上正确的道路。

# cocoa - 在 Cocoa 中修改一个大文件

> ID：12331412
> 
> 赞同：0
> 
> 时间：2012-09-08T14:02:58.937
> 
> 标签：cocoa, file-io, nsdata

我正在尝试修改大（数百 MB）.wav 音频文件的小块（32 字节）。目前我使用加载文件

```
[NSData dataWithContentsOfURL:] 
```

修改字节，并使用保存文件

```
[data writeToURL:]. 
```

有没有一种方便的方法来修改二进制文件而不将其加载到 RAM 中？

编辑：以下stdio函数对我有用：

```
NSUInteger myOffset = 8;
const char *myBytes = myData.bytes;
NSUInteger myLength = myData.length;            
FILE *file = fopen([[url path] cStringUsingEncoding:NSASCIIStringEncoding], "rb+");
assert(file);       
fseek(file, myOffset, SEEK_CUR);
fwrite(myBytes, 1, myLength, file);
fclose(file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:01:25.080

是的，您将使用较低级别的方法，例如`fopen`避免通过重复加载/重新加载文件`NSData`（正如您在更新中找到并提到的那样）。这是我为音频文件 I/O 工作的级别。

如果您想要 Foundation 类型，您可能想尝试`NSFileHandle`.

# regex - 改进正则表达式以匹配 javascript 注释

> ID：12331414
> 
> 赞同：0
> 
> 时间：2012-09-08T14:03:27.020
> 
> 标签：regex, perl, segmentation-fault

我使用[perlfaq6](http://perldoc.perl.org/perlfaq6.html#How-do-I-use-a-regular-expression-to-strip-C-style-comments-from-a-file?)中给出的正则表达式来匹配和删除 javascript 注释，但是当字符串太长时会导致分段错误。正则表达式是 -

```
s#/\*[^*]*\*+([^/*][^*]*\*+)*/|//([^\\]|[^\n][\n]?)*?\n|("(\\.|[^"\\])*"|'(\\.|[^'\\])*'|.[^/"'\\]*)#defined $3 ? $3 : ""#gse; 
```

可以改进以避免分段错误吗？

[编辑]

长输入：

```
<ent r=\"6\" t=\"259\" w=\"252\" /><ent r=\"6\" t=\"257\" w=\"219\" /> 
```

重复了大约 1000 次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T15:07:58.087

我怀疑问题的部分原因在于您的“C 代码”与 C 代码不太一样。例如，在 C 中，您不能将序列`\"`放在一对引号之外，例如单引号或双引号。

我调整了正则表达式以使其可读并将其包装到一个简单的脚本中，该脚本会破坏其输入并将正则表达式应用于它：

```
#!/usr/bin/env perl

### Original regex from PerlFAQ6.
### s#/\*[^*]*\*+([^/*][^*]*\*+)*/|//([^\\]|[^\n][\n]?)*?\n|("(\\.|[^"\\])*"|'(\\.|[^'\\])*'|.[^/"'\\]*)#defined $3 ? $3 : ""#gse;

undef $/;  # Slurp input

while (<>)
{
    print "raw: $_";

    s%
        /\*[^*]*\*+([^/*][^*]*\*+)*/    # Simple C comments
     |  //([^\\]|[^\n][\n]?)*?\n        # C++ comments, allowing for backslash-newline continuation
     |  (
            "(\\.|[^"\\])*"             # Double-quoted strings
        |   '(\\.|[^'\\])*'             # Single-quoted characters
        |   .[^/"'\\]*                  # Anything else
        )
     %    defined $3 ? $3 : ""
     %egsx;

    print "out: $_";
} 
```

我采用了您的非 C 代码行，并创建了文件 data.1、data.2、data.4、data.8、...、data.1024，每个文件都有适当的行数。然后我运行了一个计时循环。

```
$ for x in 1 2 4 8 16 32 64 128 256 512 1024
> do
>     echo
>     echo $x
>     time perl xx.pl data.$x > /dev/null
> done
$ 
```

我已经调整了输出以提供不同文件大小的实时时间：

```
 1    0m0.022s
   2    0m0.005s
   4    0m0.007s
   8    0m0.013s
  16    0m0.035s
  32    0m0.130s
  64    0m0.523s
 128    0m2.035s
 256    0m6.756s
 512    0m28.062s
1024    1m36.134s 
```

我没有得到核心转储（Mac OS X 10.7.4 上的 Perl 5.16.0；8 GiB 主内存）。它确实开始花费大量时间。当它运行时，它并没有增长；在 1024 行运行期间，它使用了大约 13 MiB 的“真实”内存和 23 MiB 的“虚拟”内存。

我尝试了 Perl 5.10.0（我在我的机器上编译的最旧版本），它使用的“真实”内存略少，基本上相同的“虚拟”内存，而且速度明显较慢（512 行 33.3s；1m 53.9s 1024 行）。

出于比较的目的，我收集了一些放在测试目录中的 C 代码来创建一个大约 88 KiB 的文件，有 3100 行，其中大约 200 行是注释行。相比之下，data.1024 文件的大小约为 77 KiB。处理时间在 10 到 20 毫秒之间。

### 概括

您拥有的非 C 源代码构成了一个非常讨厌的测试用例。Perl 不应该崩溃。

您使用的是哪个版本的 Perl，在哪个平台上？你的机器有多少内存。但是，内存总量不太可能成为问题（在大多数运行 Perl 的机器上，24 MiB 不是问题）。如果您有一个非常旧的 Perl 版本，结果可能会有所不同。

* * *

我还注意到，正则表达式不处理 C 编译器必须处理的一些病态 C 注释，例如：

```
/\
\
* Yes, this is a comment *\
\
/
/\
\
/ And so is this 
```

是的，您可以拒绝任何提交审查的包含此类评论的代码。

# mysql - Mysql COUNT 和 IF 用法

> ID：12331423
> 
> 赞同：0
> 
> 时间：2012-09-08T14:04:06.720
> 
> 标签：mysql, sql

我有结构的 MySQL 表：

```
| uid     |   itemid
| -------------------
| 1001    |   9999
| 1001    |   8888
| 2002    |   8888
| ...     |   ... 
```

**uid**和**itemid**不是唯一的列。Bun uid+itemid 是独特的组合。

我需要按 itemid 计算行数。我使用下一个查询：

```
SELECT itemid, COUNT(*) 
FROM unlikes 
WHERE itemid IN ('9999', '8888') GROUP BY itemid; 
```

这行得通！

接下来，我需要知道哪一行有具体的 uid。我用：

```
SELECT itemid, COUNT(*), IF (uid = '1001', TRUE, FALSE) toggled 
FROM unlikes 
WHERE itemid IN ('9999', '8888') GROUP BY itemid;' 
```

不行。如果我有不止一行 itemid = 8888，则切换 = FALSE。如果组中有一个 uid = 1001，我需要 toggled = TRUE;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:12:09.320

```
SELECT itemid, COUNT(*), 
CASE WHEN uid = 1001 THEN TRUE ELSE FALSE end AS toggled 
FROM unlikes 
WHERE itemid IN ('9999', '8888') GROUP BY itemid; 
```

# android - Android - 从选项卡/片段中读取数据

> ID：12331424
> 
> 赞同：0
> 
> 时间：2012-09-08T14:04:13.553
> 
> 标签：android, android-fragments, android-tabhost

我正在开发一个 Android 应用程序，它只将数据存储在 SQLite 数据库中并显示它。

由于我有 .NET 背景，我开始使用 MonoDroid (C#) 开发应用程序。在使用 MonoDroid 开发应用程序后，我认为使用 Java 重新开发它并沿途学习会很有趣。

在原始应用程序中，我使用了 TabActivity 并创建了 4 个选项卡来结构化我想要保存在单个表中的数据。在标签下方，我放置了一个按钮。单击按钮会收集 4 个选项卡上的所有数据以存储它，并且效果很好。

现在用 Java 开发，我注意到 TabActivity 已被弃用，我发现我必须使用片段。我能够在[本文](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)之后创建选项卡。但是，我不再能够读取选项卡上的数据。我在网上搜索并连续几天尝试了最荒谬的“解决方案”，我开始怀疑我寻找的功能是否可行。

请告诉我该怎么做！是否可以使用片段重新创建此功能？如果是这样，任何人都可以给我一些指示吗？如果没有，解决此问题的最佳方法是什么？

提前致谢！

# if-statement - 如何在超时的情况下请求批处理文件用户输入

> ID：12331428
> 
> 赞同：8
> 
> 时间：2012-09-08T14:04:26.537
> 
> 标签：if-statement, batch-file, timer, shutdown, restart

所以我试图在 set 命令下的一个 if 语句中添加一个计时器，但我不确定该命令是什么。该脚本将启动并等待三十分钟，然后重新启动 PC 或等待用户输入以在那时输入或取消它。所以我设置了“立即重启”和“取消”的两个 if 语句，但现在我需要一个 if 语句让它从执行我的重启命令前的 30 分钟开始倒计时。此外，如果有人知道如何在那里添加一个可视计时器，显示还剩多少时间，那将是一个加号。多谢你们！！！

```
@Echo off

:START

set /p answer=PC WILL RESTART IN 30 MINUTES, PRESS N TO RESTART NOW OR C TO CANCEL

if "%answer%"=="n" (GOTO Label1)
if "%answer%"=="c" (GOTO Label2)
if "TIMER GOES HERE" "==" (GOTO Label1)

:Label1

shutdown -r -t 60 -f

:Label2 

exit 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T20:38:04.670

我建议使用`CHOICE.EXE`，它是大多数 Windows 版本的标准配置（Windows NT、2000 和 XP 除外，它曾经可以从 Microsoft 的网站下载，但他们似乎在他们的 ftp 网站上忽略[了这个](ftp://ftp.microsoft.com/Services/TechNet/samples/PS/Win98/Reskit/SCRPTING/choice.exe)*。）并且是使用简单。

```
@Echo off
:START
set waitMins=30

echo PC WILL RESTART IN %waitMins% MINUTES: Press N to restart [N]ow or C to [C]ancel
:: Calculate Seconds
set /a waitMins=waitMins*60
:: Choices are n and c, default choice is n, timeout = 1800 seconds
choice /c nc /d n /t %waitMins%

:: [N]ow = 1; [C]ancel = 2
goto Label%errorlevel%

:Label1

shutdown -r -t 60 -f
:: Make sure that the process doesn't fall through to Lable2
goto :eof

:Label2 
exit 
```

* * *

就像`CHOICE.EXE`这样工作......

```
choice 
```

……和……一样

```
choice /c yn 
```

...两者都将显示...

```
[Y,N]? 
```

...并且两者都将等待用户按 a`Y`或`N`。

Choice 将结果存储在 %errorlevel% 中。Y=1，N=2。

我提供的代码利用了默认`/D <choice>`和超时`/T <seconds>`选项。

例如...

```
choice /c yn /d y /t 5 
```

...让用户选择 Y 或 N，等待 5 秒然后自动选择默认选项 Y，导致 %ERRORLEVEL%==1。

另一个例子是……

```
choice /c abcdef /m "Make a choice. " 
```

...它显示...

```
Make a choice. [A,B,C,D,E,F]? 
```

...和...

```
A = %ERRORLEVEL% = 1
B = %ERRORLEVEL% = 2
C = %ERRORLEVEL% = 3
D = %ERRORLEVEL% = 4
E = %ERRORLEVEL% = 5
F = %ERRORLEVEL% = 6 
```

没有错误级别 0。

有关使用的更多信息`choice`，请`CHOICE /?`在命令提示符处键入。

* * *

***注意**I的版本`CHOICE.EXE`提供了一个使用略有不同的命令的链接，但提供了相同的功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-08T19:06:02.210

类似的休眠。

```
@echo off
setlocal enableDelayedExpansion
for /l %%N in (600 -1 1) do (
  set /a "min=%%N/60, sec=%%N%%60, n-=1"
  if !sec! lss 10 set sec=0!sec!
  cls
  choice /c:CN1 /n /m "HIBERNATE in !min!:!sec! - Press N to hibernate Now, or C to Cancel. " /t:1 /d:1
  if not errorlevel 3 goto :break
)
cls
echo HIBERNATE in 0:00 - Press N to hibernate Now, or C to Cancel.
:break
if errorlevel 2 (%windir%\System32\rundll32.exe powrprof.dll,SetSuspendState Hibernate) else echo Hibernate Canceled 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T17:43:05.873

这是一个非常简单的 Vista 和 Windows 7 解决方案，它提供了超时功能，但不提供视觉倒计时。

```
@echo off
choice /c:CN /n /m "PC will restart in 30 minutes. Press N to restart Now, or C to Cancel" /t:1800 /d:N
if errorlevel 2 (shutdown -r -t 60 -f) else echo Restart Canceled 
```

这是一个针对 Vista 和 Windows 7 的更复杂的解决方案，它提供了视觉倒计时，但它每秒都会清除控制台窗口。另外，时间可能有点不对。

```
@echo off
setlocal enableDelayedExpansion
for /l %%N in (1800 -1 1) do (
  set /a "min=%%N/60, sec=%%N%%60, n-=1"
  if !sec! lss 10 set sec=0!sec!
  cls
  choice /c:CN1 /n /m "PC will restart in !min!:!sec! - Press N to restart Now, or C to Cancel. " /t:1 /d:1
  if not errorlevel 3 goto :break
)
cls
echo PC will restart in 0:00 - Press N to restart Now, or C to Cancel.
:break
if errorlevel 2 (shutdown -r -t 60 -f) else echo Restart Canceled 
```

如果您需要 XP 解决方案，那么我认为您需要下载一个非本地命令行工具，该工具要求输入具有超时功能，或者切换到 VBScript 或 JScript。

**编辑**

通过使用James K 在其回答中提供[的 Microsoft FTP 站点下载的 CHOICE.EXE](ftp://ftp.microsoft.com/Services/TechNet/samples/PS/Win98/Reskit/SCRPTING/choice.exe)，可以调整上述两个脚本以在 XP 上运行。

该版本的 CHOICE 语法略有不同。

要改编我的第一个脚本，请使用：

```
choice /c:CN /n /t:N,1800 "PC will restart in 30 minutes. Press N to restart Now, or C to Cancel" 
```

要调整我的第二个脚本，请使用：

```
choice /c:CN1 /n /t:1,1 "PC will restart in !min!:!sec! - Press N to restart Now, or C to Cancel. " 
```

**编辑 - 这是与 XP 兼容的粗略 VBS 解决方案**

```
Set objShell = CreateObject("WScript.Shell")
for i = 30 to 1 step -1
  if i=1 then unit=" minute" else unit=" minutes"
  rtn = objShell.Popup ( _
    "The machine would like to Restart."&VbCrLf&VbCrLf& _
    "Click OK to restart now"&VbCrLf& _
    "Click Cancel or the [X] close button to abort the restart"&VbCrLf& _
    "Do nothing and the machine will restart in "&i&unit, _
    60, "Restart in "&i&unit, 1+48 _
  )
  if rtn <> -1 then exit for
next
if rtn <> 2 then objShell.Run "shutdown -r -f" 
```

我认为您可以使用 HTA 提供更优雅的 VBS 解决方案，但这需要做更多的工作，而且我对这项技术知之甚少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T14:12:23.017

我将使用此代码使脚本暂停指定的毫秒数：

```
PING 1.1.1.1 -n 1 -w <milliseconds> >NUL 
```

这将在过去`1.1.1.1`后向 IP 地址发送 1 个 ping 。`<milliseconds>`并且`ping`命令的输出将被忽略为 NUL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-13T04:10:21.673

我通过 SPC_75 推荐这个脚本，它是一个 .vbs 文件，并且用于休眠，但它很容易修改为休眠或关机。

```
'//*******************************************
'//hibernate.vbs
'//Purpose: Count Down to action (Hibernate)
'//Tested on Server 2008, Win 7 64bit, and XP
'//Author: SPC_75 
'//Revision 1.3
'//Date: 1/09/2011
'//*******************************************

Option Explicit
Dim timeout, objShell, intReturn
Const wshOk = 1
Const wshOkDialog = 0
'Const wshIcon = 16 '/critical
'Const wshIcon = 32 '/question
Const wshIcon = 48 '/exclamation
'Const wshIcon = 64 '/information

timeout = 30 '/Timeout in seconds

Set objShell = CreateObject("Wscript.Shell")
  Do Until timeout = 0
    timeout = timeout - 1
    intReturn = objShell.Popup(vbCrlf &"Hibernation about to initiate. Abort?"&vbCrlf & vbCrlf & vbCrlf & vbCrlf & "Time until hibernation : " & timeout, 1, "Hibernation", wshOkDialog + wshIcon + 4096)
    If intReturn = wshOk Then
        Wscript.Quit
    End If
  loop
  objShell.Run "powercfg /hibernate on"
  objShell.Run "shutdown -h"
  objShell.Run "rundll32 powrprof.dll,SetSuspendState Hibernate"  '/XP specific Hibernation command
set objShell = nothing

'//EOF 
```

与警告和超时完美配合。

# c++ - QTreeview子指标重绘

> ID：12331435
> 
> 赞同：1
> 
> 时间：2012-09-08T14:05:57.320
> 
> 标签：c++, qt, signals-slots, qtreeview

美好的一天，我有 QTreeView 和一些后台线程，而不是 GUI 线程在模型项中添加，问题是当显示我的视图子指示器时不重新绘制但它们存在（如果你按下它们放置展开节点的位置），我发出信号`dataChange`，但我的孩子指示器没有重绘。

我究竟做错了什么？这是我调用的后台线程中的代码：

```
void notify()
    {
        if (file_item_type::parent())
        {
            file_item_type::parent()->notify(this);
        }
        file_item_type::filesystem_type::s_notify.dataChange(this);
    } 
```

然后在模型中

```
void FileItemModel::dataChangeItem(void *it)
{
    file_item_type *item = static_cast<file_item_type*>(it);
    if(item&&isWatchedDir(item))
    {
        int row = indexOfChild(item);
        if (row>=0)
        {
            QModelIndex indexT = createIndex(row, eDC_Name, item);
            QModelIndex indexL = createIndex(row, eDC_Size, item);
            emit dataChanged(indexT,indexL);
        }
    }
} 
```

`dataChanged`然后我在代理模型中捕捉到我的信号

```
void FileProxyTreeModel::sourceDataChanged( const QModelIndex& from, 
                                            const QModelIndex& to )
{
    emit dataChanged( mapFromSource( from ), mapFromSource( to ) );
} 
```

# c - 仅搜索目录

> ID：12331439
> 
> 赞同：1
> 
> 时间：2012-09-08T14:06:19.613
> 
> 标签：c, winapi, windows-7

```
int main(void) 
{   

    HANDLE hFoundFile;
    WIN32_FIND_DATA foundFileData;

    SetCurrentDirectory(TEXT("C:\\"));

    hFoundFile = FindFirstFileEx(TEXT("*"),FINDEX_INFO_LEVELS::FindExInfoBasic,&foundFileData ,FINDEX_SEARCH_OPS::FindExSearchLimitToDirectories ,NULL , NULL);

    do
    {
        wprintf(TEXT("%s\n"),foundFileData.cFileName);

    }
    while(FindNextFile(hFoundFile,&foundFileData));

    system("Pause");
    return 0;
} 
```

为什么它也输出“常规”文件，尽管`FINDEX_SEARCH_OPS::FindExSearchLimitToDirectories`选项被显式传递给函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:16:12.703

[如何在 Windows 上递归遍历 C 中的目录](https://stackoverflow.com/questions/2038912/how-to-recursively-traverse-directories-in-c-on-windows)

*   注意：由于该标志是在 2001 年添加的，在此之前的任何系统（例如 Windows 2000，基于旧版 Samba 构建的 NAS 设备）都将不支持该标志。– 雷蒙德陈

    ```
    WIN32_FIND_DATA FindFileData;
    do {

    if (FindFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)

    }
    while(FindNextFile(hFindFile, &FindFileData)); 
    ```

并在您的代码中：

```
int main(void) 
{   

    HANDLE hFoundFile;
    WIN32_FIND_DATA foundFileData;

    SetCurrentDirectory(TEXT("C:\\"));

    hFoundFile = FindFirstFileEx(TEXT("*"),FINDEX_INFO_LEVELS::FindExInfoBasic,&foundFileData ,FINDEX_SEARCH_OPS::FindExSearchLimitToDirectories ,NULL , NULL);

    do
    {
    if (foundFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
        wprintf(TEXT("%s\n"),foundFileData.cFileName);

    }
    while(FindNextFile(hFoundFile,&foundFileData));

    system("Pause");
    return 0;
} 
```

# algorithm - 经典数值计算 MATLAB 代码

> ID：12331440
> 
> 赞同：1
> 
> 时间：2012-09-08T14:06:22.187
> 
> 标签：algorithm, matlab, numerical-computing

```
f(x) = (exp(x)-1)/x; 
g(x) = (exp(x)-1)/log(exp(x)) 
```

从分析上讲，`f(x) = g(x)`对于所有`x`.

当 x 接近 0 时，`f(x)`和都`g(x)`接近 1。

```
% Compute y against x
for k = 1:15
    x(k) = 10^(-k);
    f(k) =(exp(x(k))-1)/x(k); 
    De(k) = log(exp(x(k)));
    g(k)= (exp(x(k))-1)/De(k);
end
% Plot y
plot(1:15,f,'r',1:15,g,'b'); 
```

但是，`g(x)`效果比`f(x)`. `f(x)`当接近 0 时实际上是发散的。`x`为什么`g(x)`优于`f(x)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T16:44:30.523

很难不给出答案，所以我只指出一些提示

1.  看看德......我的意思是真的看看它。注意随着 x 变小，De 不再等于 x。

2.  现在看看 exp(x) - 1。注意一个模式。

3.  问问自己，什么是 eps(1)，它为什么重要？

4.  在 Matlab 中，exp(10^-16) -1 = 0。为什么？

# javascript - JavaScript 中的逻辑或 (||)

> ID：12331442
> 
> 赞同：0
> 
> 时间：2012-09-08T14:06:54.720
> 
> 标签：javascript

一本书规定了以下 OR 规则：

*   如果第一个操作数是对象，则返回第一个操作数。
*   如果第一个操作数的计算结果为 false，则返回第二个操作数。
*   如果两个操作数都是对象，则返回第一个操作数。
*   如果两个操作数都为 null，则返回 null。
*   如果两个操作数都是 NaN，则返回 NaN。
*   如果两个操作数都未定义，则返回未定义。

但是，我在编码时观察到以下行为：

```
 var result18 = (NaNVar || undefinedVar);  //undefined
        var result19 = (NaNVar || nullVar);  //null
        var result20 = (undefinedVar || NaNVar);  //NaN
        var result21 = (undefinedVar || nullVar); //null
        var result22 = (nullVar || NaNVar); //NaN
        var result23 = (nullVar || undefined);   //undefined 
```

我怎样才能证明这些规则的这种行为是合理的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T14:09:39.300

这条规则是关键：

> 如果第一个操作数的计算结果为 false，则返回第二个操作数。

您的所有左侧值都评估为 false，因此返回右侧。

如果对您有帮助，这是 MDN 的一个很好的定义：

> expr1 || expr2
> 
> 如果可以转换为 true，则返回 expr1；否则，返回 expr2。因此，当与布尔值一起使用时，|| 如果任一操作数为真，则返回真；如果两者都为假，则返回假。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T16:21:06.520

对书中描述的混乱感到抱歉。我试图列举边缘情况，我看到这会引起一些混乱。

您可以仅使用两条规则准确地描述该操作：如果第一个参数为真，则返回第一个参数；如果第一个参数是假的，则返回第二个参数。您的第三条规则不仅适用于此运算符，当您尝试使用它时，未声明的变量总是会导致她被抛出。尝试将它用于什么并不重要（typeof 和 delete 除外，它们在未声明的变量中工作正常）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T14:23:08.487

您的书选择了一种糟糕的方式来描述逻辑 OR 运算符。

例如，这条规则太局限了。

> 如果第一个操作数是对象，则返回第一个操作数。

操作员不做任何类型的检查。它不关心第一个或第二个操作数是“对象”。它只关心他们如何强制转换为布尔值。

举这个例子。

```
"foobar" || false 
```

第一个操作数是字符串，而不是对象，但它会强制转换为 boolean `true`，因此返回第一个操作数。

```
Boolean("foobar"); // true 
```

您的书正在遍历要点，就好像它遵循某种指定的算法一样。没有这样的算法。比较严格基于布尔强制。

简而言之，

*   它从左到右评估操作数，直到找到将强制`true`执行的操作数或直到它用完操作数。
*   返回评估的最后一个操作数（非强制）

> **[11.11 二元逻辑运算符](http://es5.github.com/#x11.11)**
> 
> 1.  让`lref`是评估 LogicalORExpression 的结果。
>     
>     
> 2.  让。`lval`_`GetValue(lref)`
>     
>     
> 3.  如果`ToBoolean(lval)`是`true`，则返回`lval`。
>     
>     
> 4.  让`rref`是评估 LogicalANDExpression 的结果。
>     
>     
> 5.  返回`GetValue(rref)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T20:38:42.773

是的，观察结果后，我总结了两个简单的规则：

```
 //1: if the first operand evaluates to true then it is returned (here it means actual //value of operand is returned but not the evaluated value that is true)
        //following values evaluates to ture: non-empty string, non-zero number and //none of these values- NaN, null, undefined

        var result = ("Mahesh" || false) //"Mahesh"
        var result = ("Mahesh" || true) //"Mahesh"
        var result = ("Mahesh" || undefined) //"Mahesh"
        var result = ("Mahesh" || null) //"Mahesh"
        var result = ("Mahesh" || NaN) //"Mahesh"
        var result = (5 || false) //5
        var result = (5 || true) //5
        var result = (5 || null) //5
        var result = (5 || NaN) //5
        var result = (5 || undefined) //5

        //2: if first operand evaluates to false then the value of second operand is //returned, again without evaluating it
        //following values evaluate to false: empty string (""), number zero (0),  null, //NaN, undefined or false)

        var result = (false || NaN);  //NaN
        var result = (false || null);  //null
        var result = (false || undefined);  //undefined
        var result = (false || "Mahesh");  //Mahesh
        var result = (false || 5);  //5

        var result = (NaN || false);   //false
        var result = (NaN || true);   //true
        var result = (NaN || NaN);   //NaN
        var result = (NaN || null);  //null
        var result = (NaN || undefined);  //undefined
        var result = (NaN || "Mahesh");   //Mahesh
        var result = (NaN || 5);   //5

        var result = (null || false);  //false
        var result = (null || true);  //true
        var result = (null || NaN); //NaN
        var result = (null || null);  //null
        var result = (null || undefined);   //undefined
        var result = (null || "Mahesh");  //Mahesh
        var result = (null || 5);  //5

        var result = (undefined || false);  //false    
        var result = (undefined || true);  //true
        var result = (undefined || NaN);  //NaN
        var result = (undefined || null); //null
        var result = (undefined || undefined);  //undefined
        var result = (undefined || "Mahesh");  //Mahesh
        var result = (undefined || 5);  //5

        var result = (0 || false); //false
        var result = (0 || true); //true
        var result = (0 || NaN); //NaN
        var result = (0 || null);  //null
        var result = (0 || undefined);   //undefined
        var result = (0 || "Mahesh"); //Mahesh
        var result = (0 || 5); //5

        var result = ("" || false); //false
        var result = ("" || true); //true
        var result = ("" || NaN); //NaN
        var result = (""|| null);  //null
        var result = (""|| undefined);   //undefined
        var result = ("" || "Mahesh"); //Mahesh
        var result = ("" || 5); //5

        //Note: if the first operand evaluates to false and if the second operand is undeclared 
        //variable then it will cause an error
        var result = (false || undeclaredVar);    //error 
```

我认为这一切都在简单的话。这里的任何人都可以确认我是否理解正确吗？我在 IE10 中尝试过这个，希望在其他浏览器中保持一致。

# ruby - 尝试使用 Rubberband 连接到挂起的 ElasticSearch 服务器会永远挂起并且永远不会返回

> ID：12331444
> 
> 赞同：0
> 
> 时间：2012-09-08T14:07:16.077
> 
> 标签：ruby, http, sockets, timeout, elasticsearch

我正在尝试调试我们的环境中发生的一个非常奇怪的问题。

我有一个正在运行的 Rails 应用程序，当它连接的服务器由于某种原因被挂起`ree-1.8.7-2011.12`时表现出奇怪的行为（要挂起它，然后在前台启动 ES 服务器），Ruby 进程永远挂起并且不会超时或类似的东西。**如果 ES 服务器在 Rails 应用程序第一次连接之前**挂起，则不会发生这种情况，只有当 Rails 应用程序运行一些查询然后 ES 服务器决定停止响应请求时才会发生这种情况。`ElasticSearch``CTRL-Z`

 **由于我对本机代码不是很好，我什至不知道从哪里开始尝试解决这个问题（是的，不幸的是，由于许多原因，我们现在无法升级我们的 Ruby）。进入活动监视器并获取进程示例，我得到了这个线程转储：

![在此处输入图像描述](../Images/d0a945754e42247071771a0b46a91bd4.png)

所以它似乎在这个`curl_wait_for_resolv`电话上被锁定了。

我正在为 Ruby 使用最新的 ElasticSearch 和 Rubberband ES 适配器。这可以在 Mac OS 和 Linux 上重现。

关于如何调试或正确超时服务器的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:26:44.257

问题出在 Rubberband，我已经[提交了拉取请求](https://github.com/grantr/rubberband/pull/40)。**

# java - 如何将热键链接到java中的按钮？

> ID：12331448
> 
> 赞同：1
> 
> 时间：2012-09-08T14:07:52.983
> 
> 标签：java, swing, hotkeys, jradiobutton

我有四个单选按钮，它们都是 radioGroup 的一部分。如何将热键链接到每个按钮？我想要做的是将键“1”、“2”、“3”和“4”链接到每个相应的单选按钮。

```
buttonGroup1 = new javax.swing.ButtonGroup();
quizBut1 = new javax.swing.JRadioButton();
quizBut2 = new javax.swing.JRadioButton();
quizBut4 = new javax.swing.JRadioButton();
quizBut3 = new javax.swing.JRadioButton(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:18:01.797

使用[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html) - 您可以将它们附加到 Swing 中的任何组件。

您可能要做的是将 KeyListener 附加到应用程序中的主 JFrame 以捕获所有按键，然后根据按下的键，您将相应地触发 UI 中的更改（例如，选择给定的单选按钮）。

将 KeyListener 附加到几乎始终具有键盘焦点的容器非常重要。在这种情况下，您不能将 KeyListener 附加到单选按钮本身，因为 KeyListener 只能看到它们关注的事件。当给定对象没有吸收 KeyEvent 时，然后将 KeyEvent 传递给其父组件，以查看它是否要对事件执行任何操作，并一直持续到应用程序的窗口。如果没有 KeyListener 对事件执行任何操作，并且您一直到组件层次结构的根，那么响应按键没有任何反应，并且事件基本上被丢弃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T14:52:01.687

同样，您可以使用[ActionMap](http://docs.oracle.com/javase/7/docs/api/javax/swing/ActionMap.html "动作地图")和[KeyStroke](http://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html "击键")。一些粗略的片段，修改它：

```
 class KeyAction extends AbstractAction {
        JRadioButton b;
        KeyAction(JRadioButton b) {
            super();
            this.b = b;
        }
        @Override
        public void actionPerformed(ActionEvent e) {
            b.setSelected(true);
        }
    }

    b1.setAction(new KeyAction(b1));
    b2.setAction(new KeyAction(b2));
    b3.setAction(new KeyAction(b3));

    bindHotkey('1', "1", b1.getAction());
    bindHotkey('2', "2", b2.getAction());
    bindHotkey('3', "3", b3.getAction());
            ..............

void bindHotkey(char keyChar, String name, Action action) {
    KeyStroke ks = KeyStroke.getKeyStroke(keyChar);
    container.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(ks, name);
    container.getActionMap().put(name, action);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T15:03:31.537

您也可以使用它 [http://pastebin.com/UvkjD0g5](http://pastebin.com/UvkjD0g5)

# google-drive-api - 谷歌文档 API

> ID：12331451
> 
> 赞同：0
> 
> 时间：2012-09-08T14:08:08.763
> 
> 标签：google-drive-api, google-docs-api

我正在使用 Google 文档 API。

```
DocsService service = new DocsService(APP_NAME);
service.query(qry, DocumentListFeed.class);
List<DocumentListEntry> docEntries = docFeed.getEntries();
for(DocumentListEntry entry : docEntries)
{
   System.out.println(entry.getQuotaBytesUsed());
} 
```

我正在使用上面的代码来获取文档的大小。

如果我将文档上传到 Google，我会得到大小。如果我创建一个文档/电子表格/绘图/演示文稿/表格，我的尺寸为零。

我需要以下问题的解决方案。1.如何获得创建的谷歌文档的适当文件大小 2.如何区分电子表格和表格。？我都将 entry.getType() 作为电子表格。

请任何人帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:30:08.900

1) Google 文档不使用用户帐户的任何存储配额，因此报告的大小将始终为零

2) 请求表单时，文档列表 API 将`<docs:hasForm value='true'/>`在 xml 响应中包含该元素，但是 Java 客户端库不会公开该值。您应该更新到较新的[Drive API](http://developers.google.com/drive)，然后检查项目的 MIME 类型，这将`application/vnd.google-apps.form`用于表单和`application/vnd.google-apps.spreadsheet`电子表格。

# c++ - 定义预处理器宏

> ID：12331455
> 
> 赞同：5
> 
> 时间：2012-09-08T14:08:46.530
> 
> 标签：c++, macros, c-preprocessor

我对 C++ 比较陌生，我正在学习它。我们班被分配了一个实验室，我的老师说实验室的文章有点难以理解；然而，他并没有对实验室的文章做任何修改。所以，我遇到了实验室的这一部分：

> **定义预处理器宏**
> 
> 长期以来的约定是宏名大写，这个宏名必须是TRACE_FUNC。宏有一个参数，当您将宏应用于代码时，该参数将被函数名替换。宏的开头如下所示：
> 
> ```
> #define TRACE_FUNC( symbol )  replacement-text` 
> ```
> 
> 并且预处理器将在源代码中存在 TRACE_FUNC(sym) 字符串的任何地方替换替换文本，并将符号输入到该替换中。
> 
> 注意：#define 语句必须全部位于单个逻辑行上。为了保持长度可控，您可以在行尾使用反斜杠转义换行符；这将使预处理器保持满意，同时允许您跨越多行定义。
> 
> 对于本练习，替换文本必须是完整的语句，包括终止分号。
> 
> 替换文本必须是输出语句，该语句打印符号后跟调用的文本 ()。和标准输出的换行符。您可以从 warning.cpp 源文件复制和修改其中一个输出语句。

`warning.cpp`只是我们正在使用的一个文件，`TRACE_FUNC`它被放置在一个头文件中。

所以，我读了几次，我不是 100% 确定它在问什么。从某种角度来看，它似乎要求我创建一个名为 TRACE_FUNC 的宏。如果换个角度看，它要求我使用宏 TRACE_FUNC。所有这些都很好，但我根本不知道如何使用 TRACE_FUNC，我在任何地方都找不到任何文档，也不知道如何创建宏。当我寻求帮助时，我的老师只是说。单词而不是那些非常有用的单词，因为它是一个非常曲折、令人困惑的答案，没有解释 TRACE_FUNC 实际上是什么。

基本上，我的老师所说的只是其中的符号`TRACE_FUNC`需要是源代码中的一个函数的名称。例如，假设我们`foo()`在警告中有一个函数，那么根据他的解释，该符号应该是`foo()`（或 foo，我也不确定）。此外，在替换文本中，如果我将名称放在`#`符号前面，显然名称本身将被替换。我认为这应该表示预处理器指令。为什么我应该在这里使用它？

无论如何，照我老师说的做几乎没有任何用处。这条线也没有

`#define TRACE_FUNC( foo() ) #foo() called. ;`

也不是这条线

`#define TRACE_FUNC( foo ) #foo () called. ;`

替换任何文本，我很确定这是#define 指令的操作。所以我一定是以错误的方式应用我的老师所说的，但我真的不知道为什么它是错误的或如何解决它。

**所以，我的问题。实际上是`TRACE_FUNC`一个宏，如果是，是否有任何我可以阅读的文档？或者我应该创造`TRACE_FUNC`，如果是这样，我应该怎么做？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T14:16:01.330

哇，真垃圾！您应该正确学习 C++，而不是复杂的预处理器。

这就是你应该做的事情，但为什么有人猜测。

```
#define TRACE_FUNC(sym) std::cout << #sym << "() called\n"

void foo()
{
  TRACE_FUNC(foo);
  ...
} 
```

我假设有来自warning.cpp的示例，`std::cout`如果没有使用，那么您必须将上述内容调整为您在warning.cpp中找到的任何内容。

这个想法是每个函数都从使用 TRACE_FUNC 宏开始，因此您可以跟踪代码的执行。为什么教授认为这对新手来说是个好主意，这超出了我的理解。即使这是一个好主意，但期望你自己弄清楚细节是更愚蠢的。

我可以改进上面的宏，但这可能会更加混乱，所以我不会。现在我只会照教授说的去做，但忽略它。希望他以后能学到一些值得学习的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-08T14:24:28.350

这是一个示例：在您的库中使用输出打印功能来替换此处的标准功能 printf

```
 #define TRACE_FUNC(sym) printf("%s() called", #sym); 
```

将其用作

```
TRACE_FUNC(printf) 
```

输出应该是

```
printf() called 
```

您的实际任务是以定义的格式打印出一个符号。所以你需要在你的#define 中使用 printf 或类似的函数。

# database-design - 用户偏好数据库设计

> ID：12331456
> 
> 赞同：0
> 
> 时间：2012-09-08T14:08:50.133
> 
> 标签：database-design

我无法决定如何解决以下情况：我有一个`users`具有基本属性的表，如`id`、`username`、`email`等，我想记录用户选择的类别。在阅读了关于 SO 的类似问题和广泛的谷歌搜索之后，我想出了几个选项：

**a)**创建`user_categories`包含以下字段的表：

```
+----+---------+-------+-------+-------+
| id | user_id | sport | music | books |
+----+---------+-------+-------+-------+
|  1 |     123 |     0 |     1 |     1 |
|  2 |     543 |     1 |     0 |     0 |
|  3 |     645 |     1 |     1 |     0 |
+----+---------+-------+-------+-------+ 
```

在我的例子中，“类别”（运动、音乐、书籍）只是一个布尔类型——是/否（1/0），它表示用户是否选择了这个类别。此外，这些“类别”中不会超过 20 个（现在在我的设计中我有 12 个 - 它们都不会被删除，只是有可能会添加一些新的（更细粒度的））。

**b)**创建`categories`例如如下所示的表：

```
+----+----------+
| id | category |
+----+----------+
|  1 | sport    |
|  2 | music    |
|  3 | books    |
+----+----------+ 
```

然后`user_categories`表格看起来像这样：

```
+----+---------+-------------+----------------+
| id | user_id | category_id | category_value |
+----+---------+-------------+----------------+
|  1 |     123 |           1 |              0 |
|  2 |     123 |           2 |              1 |
|  3 |     123 |           3 |              1 |
+----+---------+-------------+----------------+ 
```

你能告诉我你会用这两个中的哪一个吗？（或者如果我完全错了，你能提出更好的解决方案吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:14:41.410

我个人更喜欢第二种方法，它足够通用，可以在插入和查询方面实际添加应用层变化为零的类别。第一种方法需要模式更改，这是最昂贵的，并且需要传播到所有层。

我们在我们的一个企业项目中采用了类似的方法，向业务对象添加属性。这种情况有点复杂，属性的数据类型不相同，所以我们为每种数据类型添加了一列（attr_id、bit_attr_value、int_attr_value ...）。这为在运行时通过管理 UI 定义属性提供了极大的灵活性，应用层代码更改为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:16:22.483

两种方式都是可能的并且OK。

一般来说，如果您知道您永远不需要在“运动”、“音乐”、“书籍”旁边添加额外的类别，那么您可以简单地使用 1 表解决方案。

如果您认为类别（因此字段）的数量会增加 - 然后选择第二个。添加记录总是比字段更容易。您永远不需要更改表的结构。

在您的情况下，当您知道将来可能会添加一些字段时，您最好选择第二种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T22:01:42.730

**a)**在以下情况下可能是可行的：

*   您绝对必须避免加入（出于性能原因）
*   并且类别是静态的，因此您不必不断地添加新列`user_categories`（这很昂贵，并且取决于 DBMS 可能需要对整个表进行排他锁，从而有效地使其在更改期间不可用）。

**我会修改b)**的原始设计并删除`category_value`. 因此，如果相应的行存在，则用户在类别中，如果`user_categories`不存在，则用户不在类别中。这允许：

*   轻松添加新类别
*   如果大多数用户属于所有类别中的少数，实际上可以节省空间（并因此缓存性能），
*   但*可能*需要更多的 JOINing（然后可能不需要 - 取决于您实际需要查询的内容）。

我怀疑**b)**会更适合您的需求。

# sql - Sql server 2008 在视图中加入查询

> ID：12331457
> 
> 赞同：1
> 
> 时间：2012-09-08T14:09:03.287
> 
> 标签：sql, sql-server-2008, jointable

请帮忙。我有以下 SQL 代码，它不断收到错误：

```
create view vwUpcoming
as 
    Select a.Auction_ID, b.item_name, b.Item_Description, 
        b.Item_value, a.Expected_Start_time
    from  Auction_schedule a 
    join Item b 
        on Auction.Item_ID= Item.Item_ID 
    where a.Expected_Start_Time < CURRENT_TIMESTAMP 
```

错误信息是：

> 消息 4104，级别 16，状态 1，行 2
> 无法绑定多部分标识符“Item.Item_ID”。
> 消息 4104，级别 16，状态 1，行 2
> 无法绑定多部分标识符“Auction.Item_ID”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:11:12.143

您在这一行使用了错误的别名：

```
on Auction.Item_ID= Item.Item_ID 
```

您已经调用了这些表，`a`或者`b`您需要引用这些名称，将行更改为：

```
on a.Item_ID= b.Item_ID 
```

因此，您的完整查询将是：

```
create view vwUpcoming
as 
    Select a.Auction_ID, b.item_name, b.Item_Description, 
        b.Item_value, a.Expected_Start_time
    from  Auction_schedule a
    join Item b 
        on a.Item_ID= b.Item_ID 
    where a.Expected_Start_Time < CURRENT_TIMESTAMP 
```

# android - Android SQLite 数据库未使用预填充的 sqlite 数据库进行更新必须卸载并重新安装

> ID：12331459
> 
> 赞同：0
> 
> 时间：2012-09-08T14:09:30.257
> 
> 标签：android, sqlite

这是我的问题。我有一个已上传到 Google Play 商店的应用程序。该应用程序运行良好，直到它到达我为我在预填充的 sqlite 数据库中创建的级别添加新记录到我的数据库的部分，当我到达这个特定级别时它崩溃。就像没有创建新信息一样。代码如下。我已经读到我需要在 onupgrade() 方法中创建一个版本变量并增加它。但我是这个 sqlite 学习的新手。如果我创建一个版本变量，代码会跟踪它吗？我是否必须用版本号重命名数据库，请帮忙。

[我已尝试在此处](https://stackoverflow.com/questions/9727137/updating-sqlite-database-android)遵循以下此示例，这似乎是我正在寻找的内容，但我的问题是该示例是所有在代码中完成的版本控制，还是我必须将版本号附加到我的 *. db 文件。

```
package com.xtremeware.straighthoodtrivia.db;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

import com.xtremeware.straighthoodtrivia.quiz.Question;

public class DBHelper extends SQLiteOpenHelper
{   
// The androids's default system path of the application database.
private static String DB_PATH = "/data/data/com.xtremeware.straighthoodtrivia    /databases/";
private static String DB_NAME = "QuestionsDb";
private SQLiteDatabase myDataBase;
private final Context myContext;

// Constructor
// Takes and keeps a reference of the passed context in order to access to the 
// applications assets and resources.
// @ context

public DBHelper(Context context)
{
    super(context, DB_NAME, null, 1);
    this.myContext = context;
}

// Creates a empty database on the system and rewrites it with my own database
public void createDataBase() throws IOException
{
    boolean dbExist = checkDataBase();
    if(!dbExist)
    {
        // By calling this method an empty database will be created into the default system path
        // of my application so I am gonna be able to overwrite the database with my database.
        this.getReadableDatabase();
         try 
         {
             copyDataBase();
         }
         catch (IOException e)
         {
             throw new Error("Error copying database");
         }
    }
}

// Check if the database already exists to avoid re-copying the file each time you open the application.
// @return true if it exists, false if it doesn't

private boolean checkDataBase()
{
    SQLiteDatabase checkDB = null;
    try
    {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }
    catch (SQLiteException e)
    {
        // Database doesn't exist yet.
    }
    if(checkDB != null)
    {
        checkDB.close();
    }

    return checkDB != null ? true : false;
}

// Copies the database from your local assets-folder to the just created empty database in 
// the system folder, from where it can be accessed and handled.
// This is done by transferring bytestreams.

private void copyDataBase() throws IOException
{
    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the empty db just created
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // Transfer bytes from the inputfile to the output file
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0)
    {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public void openDataBase() throws SQLException
{
    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

}

@Override
public synchronized void close()
{
    if(myDataBase != null)
        myDataBase.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase db)
{
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:41:23.547

你把类似的东西：

```
private static final int DATABASE_VERSION = 2; 
```

在您的 DBHelper 类中。

然后是构造函数的实现，以及 onCreate 和 onUpgrade 方法，例如：

```
 DBHelper(Context context) {
      super(context, DATABASE_NAME, null, DATABASE_VERSION);
   }

   @Override
   public void onCreate(SQLiteDatabase db) {
      db.execSQL("create table existing_table...");
      db.execSQL("create table new_table...");
   }

   @Override
   public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
      Log.w(TAG, "Upgrading database from version " + oldVersion + " to " + newVersion + ".");
      //db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
      if (oldVersion == 1 && newVersion >= 2){
         db.execSQL("alter table existing_table add column new_column integer not null default -1;");
         db.execSQL("create table new_table (...)");
      }
   } 
```

版本控制在代码中完成，但版本代码在 DBHelper 构造函数的 super(...) 调用中传递，该构造函数负责确保数据库知道其当前版本。您不必自己将版本号附加到“*.db”文件中。

基本上，通过比较 oldVersion 和 newVersion，您可以决定在升级时运行哪些脚本。但是，对于新的应用程序安装，您只需确保 onCreate 版本立即创建最新表。

下次要发布需要更新表结构的应用版本时，增加 DATABASE_VERSION 字段的值，并根据需要更改 onUpgrade。

# ajax - 单击命令按钮时要更新的 Primefaces 组件

> ID：12331462
> 
> 赞同：2
> 
> 时间：2012-09-08T14:10:14.937
> 
> 标签：ajax, jsf-2, primefaces

假设我们有按钮

```
<h:form>
<p:commandButton id="refreshButton" value="refresh all depending components"/>
</h:form> 
```

在此过程中，我将添加在单击按钮时应更新的组件。所以使用 update="text1,text2" 是不够的，因为 text3 可能会在以后添加，并且不需要更改刷新按钮。

```
<h:outputText id="text1" value="{bean.someValue1}></h:outputText>
<h:outputText id="text2" value="{bean.someValue2}></h:outputText> 
```

... 然后 ...

```
<h:outputText id="text3" value="{bean.someValue3}></h:outputText> 
```

我想要做的是将组件绑定到按钮，而不是按钮依赖于组件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T14:15:32.443

你问的是不可能的。至少，不要在视图中使用标准方式。

但是有可能的是引用一个共同的父母。

```
<p:commandButton ... update="texts" />

...

<h:panelGroup id="texts">
    <h:outputText id="text1" ... />
    <h:outputText id="text2" ... />
    ...
    <h:outputText id="text3" ... />
</h:panelGroup> 
```

根据问题中不清楚的具体功能要求，可能会有更好的解决方案。但是，如果归结为懒惰和/或避免“忘记”更改按钮，那么恐怕没有神奇的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T11:18:05.047

我通过使用做了一个临时的快速修复

```
<p:outputPanel autoUpdate="true">
    <h:outputText id="text3" ... />
<p:outputPanel /> 
```

猜猜它的性能并不完美，因为它将在所有 ajax 事件上更新，而不仅仅是我感兴趣的事件。但幸运的是，这个组件对所有这些事件都感兴趣，所以它不是问题 atm。

# parallel-processing - 现代 GPU（例如 Fermi/Evergreen）是否支持乱序执行？

> ID：12331468
> 
> 赞同：6
> 
> 时间：2012-09-08T14:10:43.917
> 
> 标签：parallel-processing, cpu, gpu

我正在编写一个 OpenCL 内核，它在循环中涉及一些障碍。我已经在 CPU（8 核 FX8150）上测试了内核，结果显示这些障碍将运行速度降低了 50~100 倍（我通过使用多线程 + CyclicBarrier 在 Java 上重新实现内核进一步验证了这一点） . 我怀疑原因是屏障基本上阻止了 CPU 利用乱序执行，所以我有点担心我是否会在 GPU 上观察到同样幅度的速度下降。我检查了一些官方文件并在谷歌上搜索了一下，但关于这个主题的信息很少。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T12:32:47.053

当前最先进的 GPU 是有序流水线处理器。GPU 通过交错来自不同扭曲（波前）的指令来有效地填充管道。相比之下，CPU 使用乱序推测执行来填充管道。有不同的功能单元，如 ALU 和 SFU，它们具有独立的管道。但请注意，指令依赖性会使扭曲停止。有关在 GPU 上解决指令依赖性的更多信息，请参阅[此 NVIDIA 专利](http://www.google.com/patents/US7676657)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T05:49:46.080

**NVIDIA 的下一代
CUDA 计算和图形架构，代号为“Fermi”：**

[Nvidia GigaThread 引擎](http://www.nvidia.com/content/PDF/fermi_white_papers/NVIDIA_Fermi_Compute_Architecture_Whitepaper.pdf)具有以下功能（第 5 页）

*   应用程序上下文切换速度提高 10 倍
*   并发内核执行
*   乱序线程块执行:)
*   双重叠内存传输引擎

[Evergreen 具有 SIMD 功能，并且有机会胜过一些 fermi，但我不知道它的 oooe。与 GTX 600 系列相比，HD 7000 系列还有“局部原子添加”优势（快近 10 倍）](http://www.cse.scitech.ac.uk/events/GPU_2010/13_Harvey.pdf)

# c# - 用于 Web 服务安全的 SSL 上的加密 JSON 字符串

> ID：12331469
> 
> 赞同：1
> 
> 时间：2012-09-08T14:11:01.170
> 
> 标签：c#, .net, web-services, ssl, asmx

我有一个场景，用户通过 ASMX Webservice 将事务日志上传到主服务器。该应用程序是 clickonce .Net winforms 应用程序

目前我正在这样做将对象列表转换为 Json 并在服务上反序列化它。通过 SSL。

```
string data = JsonConvert.SerializeObject(Values_Static.logitems); 
```

我的代码受 SmartAssembly 保护。而且我仍然得到一些漏洞，攻击者可以访问网络连接并可以对数据进行反序列化。

现在我在想一个场景，我用一些私有字符串密钥加密 Json 字符串，然后在服务器上解密它。

例如

```
private string salt = "$e7?8f@l4";
return ByteArrToString(Encrypt(TextValue + salt)); 
```

在应用程序中硬编码密钥并在服务器中对其进行解码。

它会起作用吗？用户每分钟将日志上传到服务器，每次上传可能有 20-30 个条目。是否有任何破坏数据或仍然黑客攻击的机会？

更新：根据下面的讨论。我了解我的代码存在一些问题。该代码正在接受无效的证书。我如何防止只接受来自我的 https:// Web 服务的有效证书。ATM上，每个人都可以通过开启HTTPS解密的fiddler看到代码。

我在我的 IIS 7 上安装了一个有效的证书。它工作正常，问题出在代码上。及其在 Visual Studio 中的标准自动生成的 Web 参考。

**更新 2：最终结果是，Post 数据没有加密，它的纯 XML 并且可以被任何可以嗅探的软件读取，但是 GET 数据是安全的。我已经搜索了一下，没有找到一些有效的答案。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:15:14.643

你在使用 SSL 吗？如果是这样，任何应用程序级加密都是多余的。而且，密钥必须嵌入代码中，因此任何攻击者都可以读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:25:07.727

Fiddler（或其他 HTTPS 代理）可以解密*任何*HTTPS 流量。

您可以通过在客户端代码中要求特定的服务器证书（而不是信任系统本身信任的任何证书）来阻止简单地使用 Fiddler。然而，这只是一个微弱的威慑，因为用户可以反编译您的代码并对其进行更改，以便您的新证书检查被绝育。

这被称为“不受信任的客户端”问题，这与使数字版权管理 (DRM) 软件成为“尽力而为”的事情而不是铁定的保护是一样的。

# android - 测量应用程序加载时间

> ID：12331471
> 
> 赞同：0
> 
> 时间：2012-09-08T14:11:09.647
> 
> 标签：android, iphone, ios, performance

我正在为我的期末论文做一个 iPhone（可能还有安卓）旅行应用的基准测试。我将分析用户友好性、内容等。但我还想测量应用程序的页面加载时间。我知道这种工具适用于网站或移动网站，但有人知道它是否适用于应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:52:35.297

[这个](https://stackoverflow.com/questions/1128171/measuring-iphone-application-load-time)答案可能有助于第一个想法。另一种方法可能是使用 Instruments Time Profiler。这应该为您提供详细的分析。

# python - python：更改二维列表中特定列的值

> ID：12331474
> 
> 赞同：0
> 
> 时间：2012-09-08T14:11:31.973
> 
> 标签：python

我有一个二维列表（2 元组列表）：

```
results = [("a", 0.1234), ("b", 0.32345), ("c", 0.54321)] 
```

我想把它改成：

```
>> [('a', '12.34'), ('b', '32.34'), ('c', '54.32')] 
```

我的想法是做这样的事情：

```
results = [(x[0], "%.2f" % (x[1] * 100)) for x in results] 
```

它有效，有没有更好的方法（根据`import this`指南），因为似乎访问该值`x[0]`并不~~高效~~丑陋。顺便说一句 - 我可以将其更改为列表列表而不是元组，如果这会改变任何内容，例如：

```
results = [["a", 0.1234], ["b", 0.32345], ["c", 0.54321]] 
```

并分别：

```
>> [['a', '12.34'], ['b', '32.34'], ['c', '54.32']] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:13:48.763

您可以使用[元组解包](http://en.wikibooks.org/wiki/Python_Programming/Tuples#Packing_and_Unpacking)：

```
[(a, "%.2f" % (b * 100.0)) for a, b in results] 
```

# c# - 绑定到 dependencyProperty 时遇到问题

> ID：12331475
> 
> 赞同：0
> 
> 时间：2012-09-08T14:11:35.737
> 
> 标签：c#, silverlight, binding, dependency-properties

**MyControl.xaml.cs**

```
public string achName
{
    get { return (string)this.GetValue(achNameProperty); }
    set { this.SetValue(achNameProperty, value); }
}
public static readonly DependencyProperty achNameProperty = DependencyProperty.Register("achName", typeof(string), typeof(MyControl), new PropertyMetadata(null)); 
```

**主页.xaml**

```
 <My:MyControl achName="{Binding Name}"/> 
```

name 有一个值，但它似乎没有发送到dependendcy (achName) 属性。我怎样才能解决这个问题？

**视图模型**

```
public string Name { get { return "some random test value"; } } 
```

viewmodel 的其他绑定确实有效，所以问题不在于那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:22:11.877

我能看到的唯一原因是`Binding`to`Name`失败了。您可以调试绑定以查看它是否没有失败。请参阅此 -[调试数据绑定](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspx "调试数据绑定")

# c++ - 找出 Linux 中任务栏的大小 (C/C++/gtkmm/other)

> ID：12331486
> 
> 赞同：2
> 
> 时间：2012-09-08T14:13:01.453
> 
> 标签：c++, c, linux, user-interface, gtkmm

如何找到我的 Linux 桌面的有效工作（我的意思是：屏幕的高度 - 任务栏的高度）？

我的程序需要这个，我用 c++/gtkmm 编写。我想将窗口定位在屏幕右下角，任务栏上方。

起初我试图最大化窗口，检查它的高度并从屏幕的高度中减去它。出于某种原因，它给了我最大化之前的高度，所以它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:55:31.263

您不太可能可靠地确定这一点，尤其是当用户不使用同一个桌面时（例如，KDE 与 GNOME 与 Unity）。您最好使用[libnotify](http://developer-next.gnome.org/libnotify/0.7/)在任务栏旁边显示通知。您可以在通知中添加按钮以触发程序中的回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:33:14.613

`map-event`在检查窗口大小之前，您需要等待事件。

与 apmasell 和 senshikaze 所说的不同，您可以使用 GTK+ 非常可靠地做到这一点。但是，您应该连接到相关信号（`map-event`、`configure-event`、和可能），因此当屏幕分辨率或工具栏发生变化时，您的小窗口将正确移动/调整大小`screen-changed`。`visibility-notify-event``window-state-event`

例如，我个人在 XFCE4 上使用了两个自动隐藏栏。如果有一个小工具窗口“停靠”在右下角，我希望它在显示我的底栏时移开。

如果该窗口是纯通知窗口，那么我同意 apmasell 的观点，即您最好使用`libnotify`（例如，`notify-send ...`作为子进程运行）来生成正常的通知窗口。

作为概念证明，这里有一个小 C 程序 ，`size.c`它使用完全透明的未装饰窗口获取信息：

```
#include <gtk/gtk.h>
#include <gdk/gdk.h>
#include <stdio.h>

int screen_width = -1;
int screen_height = -1;

int window_left = -1;
int window_top = -1;
int window_width = -1;
int window_height = -1;

void done(GtkWidget *widget, void *payload)
{
    GdkScreen *screen = gtk_widget_get_screen(widget);

    screen_width = gdk_screen_get_width(screen);
    screen_height = gdk_screen_get_height(screen);

    gtk_window_get_position((GtkWindow *)widget, &window_left, &window_top);
    gtk_window_get_size((GtkWindow *)widget, &window_width, &window_height);

    gtk_widget_destroy(widget);
    gtk_main_quit();
}

int main(int argc, char *argv[])
{
    GtkWidget *window;

    gtk_init(&argc, &argv);
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_opacity((GtkWindow *)window, 0.0);
    gtk_window_set_decorated((GtkWindow *)window, (gboolean)FALSE);
    gtk_window_maximize((GtkWindow *)window);
    gtk_widget_show(window);

    g_signal_connect(window, "map-event", G_CALLBACK(done), NULL);
    gtk_main();

    if (screen_width > 0 && screen_height > 0)
        printf("Screen is %d x %d pixels\n", screen_width, screen_height);

    if (window_width > 0 && window_height > 0)
        printf("Window is %d x %d pixels\n", window_width, window_height);

    if (window_left > 0)
        printf("There is a %d pixel wide left bar\n", window_left);

    if (window_left >= 0 && window_width > 0 && screen_width > 0 && window_width + window_left < screen_width)
        printf("There is a %d pixel wide right bar\n", screen_width - (window_width + window_left));

    if (window_top > 0)
        printf("There is a %d pixel tall top bar\n", window_top);

    if (window_top >= 0 && window_height > 0 && screen_height > 0 && window_height + window_top < screen_height)
        printf("There is a %d pixel tall bottom bar\n", screen_height - (window_height + window_top));

    return 0;
} 
```

编译使用

```
gcc -W -Wall size.c `pkg-config --cflags --libs gtk+-3.0` -o size 
```

或者，如果仍在使用 GTK+ 2，

```
gcc -W -Wall size.c `pkg-config --cflags --libs gtk+-2.0` -o size 
```

使用`./size`. 请注意，测试程序仅提供快照；一个真实的程序应该连接到上述信号以检测屏幕或工具栏的变化，并相应地更新窗口大小/位置。

希望您觉得这个有帮助。

# jquery - 带有悬停的JS画廊以显示大图像-如何删除超链接

> ID：12331490
> 
> 赞同：0
> 
> 时间：2012-09-08T14:13:29.273
> 
> 标签：jquery

我有一个 js 库，当我将鼠标悬停在缩略图上时，页面上会显示一个大图像。但是，如果我单击拇指，它将在新页面中打开大图像。

谁能告诉我如何删除点击功能，只保留悬停效果？

这是我的js：

```
$(document).ready(function(){
  $('#thumbs ul li a').hover(
    function() {
      var currentBigImage = $('#bigpic img').attr('src');
      var newBigImage = $(this).attr('href');
      var currentThumbSrc = $(this).attr('rel');
      switchImage(newBigImage, currentBigImage, currentThumbSrc);
    },
    function() {}
  );
  function switchImage(imageHref, currentBigImage, currentThumbSrc) {
    var theBigImage = $('#bigpic img');
    if (imageHref != currentBigImage) {
      theBigImage.fadeOut(250, function(){
        theBigImage.attr('src', imageHref).fadeIn(250);
        var newImageDesc = $("#thumbs ul li a img[src='"+currentThumbSrc+"']")
          .attr('alt');
        $('p#desc').empty().html(newImageDesc);
      });
    }
  }
}); 
```

还有我的 HTML：

```
<body>
  <div id="thumbs">
    <ul>
      <li>
        <a rel="http://..." href="http://...">
          <img src="http://..." alt="Ring 1" />
        </a>
      </li>
      <li>
        <a rel="http://..." href="http://...">
          <img src="http://..." alt="Ring 2" />
        </a>
      </li>
    </ul>
    <ul>
      <li>
        <a rel="http://..." href="http://...">
          <img src="http://..." alt="Ring 7" />
        </a>
      </li>
      <li>
        <a rel="http://..." href="http://...">
          <img src="http://..." alt="Ring 8" />
        </a>
      </li>
    </ul>
  </div>
  <div id="bigpic"><img src="http://..." alt="First Main Image" />
    <p id="desc">Move your mouse over the images on the left to view here...</p>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:16:25.907

您可以使用以下命令阻止单击超链接的默认`<a>`操作[`preventDefault()`](https://developer.mozilla.org/pt-PT/docs/DOM/event.preventDefault)：

```
$('#thumbs ul li a').click(function (e) {
  e.preventDefault();
}); 
```

**[演示](http://jsfiddle.net/ub8GT/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T14:15:59.557

试试这个

```
$('#thumbs ul li a').click(function(){return false;}); 
```

# sql-server-2008 - 优化 SSIS 2008 包

> ID：12331497
> 
> 赞同：2
> 
> 时间：2012-09-08T14:14:19.803
> 
> 标签：sql-server-2008, ssis, execution-time

我们正在处理 SQL Server 数据库中的大数据，
现在包执行需要几个小时才能执行。
有什么方法/技术可以优化包的执行时间吗？
我知道[SSIS Parallelism](http://www.simple-talk.com/sql/ssis/ssis-and-parallelism-the-unseen-minions/)。
还有其他最好的方法吗？

**编辑：**
我们正在处理超过 2 千万条记录。
SQL 服务器数据库是数据源和目标（在同一台服务器中），我使用了诸如派生列、条件拆分、多播、数据转换、查找、OLEDB 命令、OLEDB 目标、OLEDB 源、合并、合并等转换加入、排序、聚合转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:54:59.447

优化 SSIS 的一些很好的例子：

1.  [SSIS优化1](http://www.simple-talk.com/sql/ssis/sql-server-2005-ssis-tuning-the-dataflow-task/)

2.  [SSIS优化2](http://www.slideshare.net/varunragul/ssis-optimization-better-designs)

3.  [SSIS优化3](http://sqlcat.com/sqlcat/b/top10lists/archive/2008/10/01/top-10-sql-server-integration-services-best-practices.aspx)

4.  [SSIS优化4](http://siddhumehta.blogspot.com/2010/11/how-ssis-performance-can-be-optimized.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:57:59.253

查看任何需要您对数据进行排序的任务，这些任务通常会减慢速度。例如，不要使用合并连接，而是使用作为带有连接的查询的数据源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:23:01.233

关于在 SSIS 中使用不同类型转换的影响的一篇非常好的文章：SSIS 中 [的非阻塞、半阻塞和完全阻塞组件](http://sqlblog.com/blogs/jorg_klein/archive/2008/02/12/ssis-lookup-transformation-is-case-sensitive.aspx)

基本上，如果您在包中使用排序或聚合，您将完全停止这些组件，直到每一行都被它们消耗，然后任何行被传递给下一个组件。仅当您在数据流中没有其他选择时才使用这些。

像 Merge 和 Merge Join 这样的半阻塞组件会为正在通过的行创建一个新的缓冲区，因此在内存中创建缓冲区时会产生开销。在您的代码中谨慎使用它。

非阻塞将允许您最大化您的吞吐量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T09:02:28.913

避免半阻塞组件。

使用 SQL 任务组件进行合并、排序、聚合功能

在 OLE DB Destination 中将 Row per batch 和 commit size 设置为 10000。

在 OLE DB 目标中设置数据访问模式（表或视图快速加载）。

# c# - 如何在 C++ 中读取 .proto 格式的二进制文件？

> ID：12331500
> 
> 赞同：1
> 
> 时间：2012-09-08T14:14:54.347
> 
> 标签：c#, c++, protocol-buffers

我有一个使用 C# 创建的 .bin 文件，带有一个 protobuf 库和以下类：

```
[ProtoContract]
class TextureAtlasEntry
{
    [ProtoMember(1)]
    public int Height { get; set; }

    [ProtoMember(2)]
    public string Name { get; set; }

    [ProtoMember(3)]
    public int Width { get; set; }

    [ProtoMember(4)]
    public int X { get; set; }

    [ProtoMember(5)]
    public int Y { get; set; }
} 
```

关联的 .proto 文件看起来像

```
package TextureAtlasSettings;           // Namespace equivalent

message TextureAtlasEntry               
{
    required int32 Height = 1;
    required string Name = 2;
    required int32 Width = 3;
    required int32 X = 4;
    required int32 Y = 5;
} 
```

通过protoc.exe解析生成TextureAtlasSettings.pb.cc和TextureAtlasSettings.pb.h。对于 C++。

我想用 C++ 读取生成的二进制文件，所以我尝试了以下代码

```
TextureAtlasSettings::TextureAtlasEntry taSettings;

ifstream::pos_type size;
char *memblock;

ifstream file("Content\\Protobuf\\TextureAtlas0.bin", ios::in | ios::binary);

if (file.is_open())
{
    size = file.tellg();
    memblock = new char[size];
    file.seekg(0, ios::beg);
    file.read(memblock, size);
    file.close();

    fstream input(&memblock[0], ios::in | ios::binary);

    if (!taSettings.ParseFromIstream(&file)) 
    {
        printf("Failed to parse TextureAtlasEntry");
    }

    delete[] memblock;
} 
```

上面的代码总是会触发 printf。如何正确读取文件以便对其进行反序列化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:06:32.173

您显示的模型实际上代表 protobuf-net 的*可选*字段（几个默认为零）。因此，可能会省略任何零，这将导致 c++ 阅读器拒绝该消息（因为您的 .proto 根据需要将其列出）。

获取代表 .proto：

```
string proto = Serializer.GetProto<YourType>(); 
```

或者在 c# 中使它们成为“必需”：

```
[ProtoMember(3, IsRequired = true)] 
```

（ETC）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:33:06.730

这样做就足够了：

```
TextureAtlasSettings::TextureAtlasEntry taSettings;

ifstream file("Content\\Protobuf\\TextureAtlas0.bin", ios::in | ios::binary);

if (file.is_open())
{
    if (!taSettings.ParseFromIstream(&file)) 
    {
        printf("Failed to parse TextureAtlasEntry");
    }
} 
```

# php - 请解释这个 php 表达式 "!$variable"

> ID：12331506
> 
> 赞同：1
> 
> 时间：2012-09-08T14:15:24.093
> 
> 标签：php, operators

变量前面的感叹号是什么意思？它是如何在这段代码中使用的？

编辑：从目前的答案来看，我怀疑我还应该提到这段代码在一个函数中，其中一个参数是 $mytype ....这是否是一种检查 $mytype 是否通过的方法？- 感谢到目前为止所有的响应者。

```
 $myclass = null;

    if ($mytype == null && ($PAGE->pagetype <> 'site-index' && $PAGE->pagetype <>'admin-index')) {
        return $myclass;
    }
    elseif ($mytype == null && ($PAGE->pagetype == 'site-index' || $PAGE->pagetype =='admin-index')) {
        $myclass = ' active_tree_node';
        return $myclass;
    }
    elseif (!$mytype == null && ($PAGE->pagetype == 'site-index' || $PAGE->pagetype =='admin-index')) {
        return $myclass;
    }` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:17:16.110

PHP中的感叹号表示`not`：

```
if($var) 
```

表示 if`$var`不为 null 或零或 false while

```
if(!$var) 
```

表示如果`$var`是空或零或假。

将其视为如下查询：

```
select someColumn where id = 3 
```

和

```
select someColumn where id != 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T14:18:08.580

`!`否定它放在前面的任何东西的价值。因此，您发布的代码会检查是否否定值`$mytype`是`==`to `null`。

```
return true; //true
return !true; //false

return false; //false
return !false; //true

return (4 > 10); //false
return !(4 < 10); //true

return true == false; //false
return !true == false; //true

return true XOR true; //false
return !true XOR true; //true
return !true XOR true; //false 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T14:26:10.120

`!`在变量否定它的值之前

这个陈述实际上和`!$mytype`since一样`FALSE == NULL`

```
!$mytype == null 
```

`TRUE`如果`$mytype`包含以下之一，则语句将返回：

*   `TRUE`
*   零以外的数字
*   非空字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T14:20:05.827

```
elseif (!$mytype == null && ($PAGE->pagetype == 'site-index' || $PAGE->pagetype =='admin-index')) {
    return $myclass;
} 
```

楼上`!$mytype == null`说的太不对了。`!$mytype`表示如果变量的计算结果为假或为空，则条件将执行。

然而，额外的`== null`是不必要的，基本上是说`if (false == null)`或`if (null == null)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T14:22:48.290

`!$variable`与`If`条件一起使用来检查变量是`Nul`l 还是 Not

例如

```
if(!$var) 
```

表示如果`$var`IS 为空。

# javascript - 在灯箱弹出窗口中使用 javascript 预览表单

> ID：12331514
> 
> 赞同：0
> 
> 时间：2012-09-08T14:16:08.587
> 
> 标签：javascript, forms, popup, lightbox, preview

请在弹出窗口中预览表单时需要一些帮助。我有一个很大的表格，所以我添加了预览选项以显示为弹出窗口。灯箱表单弹出窗口效果很好，但我现在遇到的问题是函数 passform() 将输入（文本字段、选择、复选框、单选）传递到弹出页面以在 Click() 上进行预览。以下是我的 javascript 和 html 代码。我留下了css和一些html，因为我认为它们没有必要。我会感谢你的帮助。谢谢

Javascript

```
function gradient(id, level)
 {
var box = document.getElementById(id);
box.style.opacity = level;
box.style.MozOpacity = level;
box.style.KhtmlOpacity = level;
box.style.filter = "alpha(opacity=" + level * 100 + ")";
box.style.display="block";
return;
}

function fadein(id) 
 {
var level = 0;
while(level <= 1)
{
    setTimeout( "gradient('" + id + "'," + level + ")", (level* 1000) + 10);
    level += 0.01;
}
   }

     // Open the lightbox

  function openbox(formtitle, fadin)
   {
    var box = document.getElementById('box'); 
    document.getElementById('shadowing').style.display='block';

    var btitle = document.getElementById('boxtitle');
    btitle.innerHTML = formtitle;

    if(fadin)
     {
 gradient("box", 0);
 fadein("box");
     }
    else
     {  
     box.style.display='block';
     }      
     }

      // Close the lightbox

     function closebox()
     {
      document.getElementById('box').style.display='none';
      document.getElementById('shadowing').style.display='none';
     }

     //pass form fields into variables
     var divexugsotherugsexams1 = document.getElementById('divexugsotherugsexams1');
     var exugsotherugsexams1 = document.form4.exugsotherugsexams1.value;

     function passform()
     {
      divexugsotherugsexams1.innerHTML = document.form4.exugsotherugsexams1.value;
     } 
```

HTML（仅尝试一个文本字段）：

```
 <p><input name="submit4" type="submit" class="button2" id="submit4" value="Preview Note" onClick="openbox('Preview Note', 1)"/>
  </p>
  <div id="shadowing"></div>

   <div id="box">
  <span id="boxtitle"></span>
  <div id="divexugsotherugsexams1"></div>

  <script>document.write('<PARAM name="SRC" VALUE="'+exugsotherugsexams1+'">')</script> 
      <a href="#" onClick="closebox()">Close</a>

   </div> 
```

# javascript - 为什么 i^=j^=i^=j 不等于 *i^=*j^=*i^=*j

> ID：12331518
> 
> 赞同：4
> 
> 时间：2012-09-08T14:16:15.417
> 
> 标签：javascript, c, pointers, logical-operators

在 C 中，当有变量（假设两者都为`int`）`i`小于`j`时，我们可以使用等式

```
i^=j^=i^=j 
```

交换两个变量的值。例如，让`int i = 3`, `j = 5`; 计算后`i^=j^=i^=j`，我有`i = 5`, `j = 3`。

但是，如果我使用两个 int 指针重新执行此操作，`*i^=*j^=*i^=*j`使用上面的示例，我所拥有的将是`i = 0`and `j = 3`。

* * *

**在 C 中**

## 1

```
 int i=3, j=5;
    i^=j^=i^=j; // after this i = 5, j=3 
```

## 2

```
 int i = 3, j= 5;
    int *pi = &i, *pj = &j;
    *pi^=*pj^=*pi^=*pj; // after this, $pi = 0, *pj = 5 
```

**在 JavaScript 中**

```
 var i=3, j=5;
    i^=j^=i^=j; // after this, i = 0, j= 3 
```

***JavaScript 中的结果让我更感兴趣***

我的示例代码，在 ubuntu 服务器 11.0 和 gcc 上

```
 #include <stdio.h>
    int main(){
        int i=7, j=9;
        int *pi=&i, *pj=&j;
        i^=j^=i^=j;
        printf("i=%d j=%d\n", i, j);
        i=7, j=9;
        *pi^=*pj^=*pi^=*pj
        printf("i=%d j=%d\n", *pi, *pj);
    } 
```

* * *

# c中未定义的行为

c 中未定义的行为会是导致这个问题的真正原因吗？

### 1

***在 Windows 7 上***使用 Visual Studio 2005 编译的代码会产生预期的结果（输出 i = 7，j = 9 两次。）

### 2

***在 ubuntu*** ( **gcc test.c** ) 上使用 gcc 编译的代码会产生意想不到的结果 ( Output i = 7, j = 9 then i = 0, j = 9 )

### 3

***在 ubuntu 上***使用 gcc 编译的代码（**gcc -O test.c**）产生预期的结果（输出 i = 7,j = 9 两次。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T16:25:13.580

`i^=j^=i^=j`是 C 中未定义的行为。

`i`通过在两个序列点之间修改两次，您违反了序列点规则。

这意味着实现可以自由分配任何值，甚至使您的程序崩溃。

出于同样的原因，`*i^=*j^=*i^=*j`也是未定义的行为。

> （C99，6.5p2）“在前一个和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T14:18:45.337

考虑以下代码：

```
 #include <stdio.h>

    int main() {
        int i=7, j=9;
        int *pi=&i, *pj=&j;
        i^=j^=i^=j;
        printf("i=%d j=%d\n", i, j);
        i=7, j=9;
        *pi^=*pj^=*pi^=*pj;
        printf("i=%d j=%d\n", *pi, *pj);

        return 0;
    } 
```

如果您尝试编译它，您将`warning: unsequenced modification`在第一行看到一个。正如@ouath 所说，它的定义并不明确。根据[C11 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)，赋值表达式以[读-修改-写](https://en.wikipedia.org/wiki/Read-modify-write)方式工作。此操作在所有 CPU 架构上都不是原子操作。[您可以在此处](http://www.bionoren.com/blog/2013/07/unsequenced-modification-and-access/)阅读有关警告的更多信息。

有趣的`*pi^=*pj^=*pi^=*pj;`是，我的 LLVM 编译器中没有警告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T20:23:00.237

至于 Javascript 结果添加的“更有趣”方面：

虽然表达式在 C 中未定义，[如 ouah 的回答中所述](https://stackoverflow.com/a/12332454/12711)，但它在 Javascript 中定义良好。但是，在 Javascript 中如何计算表达式的规则可能不是您所期望的。

ECMAscript 规范说复合赋值运算符的评估方式如下（ECMA-262 11.13.2）：

> 产生式 AssignmentExpression : LeftHandSideExpression `@=` AssignmentExpression，其中`@`表示上述运算符之一，计算如下：
> 
> 1.  评估 LeftHandSideExpression。
> 2.  调用 GetValue(Result(1))。
> 3.  评估 AssignmentExpression。
> 4.  调用 GetValue(Result(3))。
> 5.  将运算符 @ 应用于 Result(2) 和 Result(4)。
> 6.  调用 PutValue(Result(1), Result(5))。
> 7.  返回结果（5）。

因此，表达式`i ^= j ^= i ^= j`将按以下步骤进行评估：

```
i = (3 ^ (j ^= i ^= j))

i = (3 ^ (j = (5 ^ i ^= j)))

i = (3 ^ (j = (5 ^ (i = 3 ^ j)))))

i = (3 ^ (j = (5 ^ (i = 3 ^ 5)))))

i = (3 ^ (j = (5 ^ (i = 6)))))

i = (3 ^ (j = (5 ^ 6))))

i = (3 ^ (j = 3))   // j is set to 3

i = (3 ^ 3)

i = 0               // i is set to 0 
```

避免使用 xor 操作来交换值的技巧的另一个原因。

# assembly - 换行 (0AH) 与视频中断 INT 10H 混淆

> ID：12331528
> 
> 赞同：0
> 
> 时间：2012-09-08T14:17:43.830
> 
> 标签：assembly, x86, interrupt

我正在尝试编写一个使用嵌套循环的简单代码，以以下模式打印字符，

```
XXXXXXXXXX
XXXXXXXXX
XXXXXXXX
XXXXXXX
XXXXXX
XXXXX
XXXX
XXX
XX
X 
```

这是代码，代码工作得很好

```
 MOV AX, @DATA                ; INITIALIZE DS
    MOV DS, AX

    ; PRINT X

    MOV CX,10
    MOV BX,10

    L2:
        PUSH CX
        MOV CX,BX
            L1:
                MOV DX, OFFSET HW            ; LOAD THE STRING
                MOV AH,09H
                INT 21H
            Loop L1
        SUB BX,01
        POP CX

        MOV DX,0AH
        MOV AH,02H
        INT 21H
    Loop L2

    MOV AH, 4CH                  ; RETURN CONTROL TO DOS
    INT 21H 
```

但是一旦我使用视频中断使用清晰屏幕，输出就会完全混乱，

这是输出，

```
XXXXXXXXXX
          XXXXXXXXX
                   XXXXXXXX
                           XXXXXXX
                                  XXXXXX
                                        XXXXX
                                             XXXX
                                                 XXX
                                                    XX
                                                      X 
```

这是它的代码，

```
.MODEL SMALL
 .STACK 100H

 .DATA
    HW  DB  "X$"

 .CODE
   MAIN PROC

    MOV AX, @DATA                ; INITIALIZE DS
    MOV DS, AX

    ; CLEAR SCREEN

    MOV AH, 06H
    MOV AL, 00H
    MOV CX, 00H
    MOV DH, 25
    MOV DL, 80
    MOV BH, 0FH 
    INT 10H

    ; PRINT X

    MOV CX,10
    MOV BX,10

    L2:
        PUSH CX
        MOV CX,BX
            L1:
                MOV DX, OFFSET HW            ; LOAD THE STRING
                MOV AH,09H
                INT 21H
            Loop L1
        SUB BX,01
        POP CX

        MOV DX,0AH
        MOV AH,02H
        INT 21H
    Loop L2

    MOV AH, 4CH                  ; RETURN CONTROL TO DOS
    INT 21H

   MAIN ENDP
 END MAIN 
```

但是当我删除每次迭代后留下一行的换行符时，即

```
MOV DX,0AH
MOV AH,02H
INT 21H 
```

输出符合预期，

```
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

我不明白清除屏幕代码与换行代码有什么关系？为什么他们互相搞砸了。?

当我使用光标位置设置代码而不是清除屏幕时，也会出现同样的问题，

```
MOV AH, 02H
MOV BH, 00H
MOV CX, 0000H
MOV DX, 0C22H    
INT 10H 
```

输出假设在我的屏幕中间如下，

```
XXXXXXXXXX
XXXXXXXXX
XXXXXXXX
XXXXXXX
XXXXXX
XXXXX
XXXX
XXX
XX
X 
```

但它显示如下，

```
 XXXXXXXXXX
                                           XXXXXXXXX
                                                    XXXXXXXX
                                                            XXXXXXX
                                                                   XXXXXX
                                                                         XXXXX
                                                                              X
XX
  XXX
     XX
       X 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:32:30.990

您的部分代码：

```
MOV AH, 02H
MOV BH, 00H  ----> this is page number
MOV CX, 0000H
MOV DX, 0C22H   --->why such big number for column number?
INT 10H 
```

为什么要使用第 0h 页？确定您正在使用该页面？如何？我知道它完成了：

视频 - 获取当前视频模式

```
AH = 0Fh
int 10h
Return:
AH = number of character columns
AL = display mode (see #00010 at AH=00h)
BH = active page (see AH=05h) ---------------->you will need this 
```

视频 - 设置光标位置

```
AH = 02h
BH = page number  <--------------now you know what to put here
0-3 in modes 2&3
0-7 in modes 0&1
0 in graphics modes
DH = row (00h is top)
DL = column (00h is left)
int 10h

Return:
Nothing 
```

资料来源：[拉尔夫布朗的中断页面](http://www.ctyme.com/intr/int.htm)。

**显示页面**

图形适配器可以存储多屏文本数据（这是因为显示一屏图形需要比文本多得多的内存）。为了充分利用显示内存，它被划分为显示页面。一个显示页面可以保存一个屏幕的数据。页面从 0 开始编号；可用页数取决于适配器和选择的显示模式。

对于 80 x 25 文本模式，每个显示页面为 4 KB。文本模式的显示页面 0 从地址 B800:0000h 开始。

活动显示页面是当前正在显示的页面。对于 80 x 25 文本模式，内存要求为 80 x 25 = 2000 字 = 4000 字节（即，显示器不会使用显示页面内存中的全部 4 KB 或 4096 字节）。

视频控制器在屏幕左上角 (0,0) 显示活动显示页面中的第一个 WORD，然后在 (1,0) 处显示下一个 WORD，依此类推，逐行显示屏幕。屏幕显示可以看作是二维阵列的图像。

```
INT 10h Video Functions

00h: Set Video Mode.  Selects the video mode and clears the screen automatically.
Input:
    AH = 0
    AL = 3        ; mode 3 = 80 cols   x 25 rows color text
                  ; to avoid clearing the screen use mode 83h to set high bit
    AL = 6        ; sets medium resolution (640 x 200) graphics mode

When BIOS sets the display mode, it also clears the screen.

01h: Change Cursor Size
Input:
   AH = 1
   CH = starting scan line
   CL = ending scan line

The text mode cursor is displayed as a small dot array at a screen position. For the MDA and EGA, the dot array is 14 rows (0-13). For the CGA, the array is 8 rows (0-7). Normally rows 6 and 7 are lit for the CGA and rows 11 and 12 for the MDA/EGA cursor.

02h: Set Cursor Position.  Move cursor to specified position.
Input:
    AH = 2
    DH = row  (0-24)
    DL = col  (0-79 for 80x25 display)
    BH = video page number (usually 0)

03h: Get Cursor Position.   Return row and column position of cursor.
Input:
    AH = 3
    BH = video page number (usually 0)

Output:
    DH = row                     ; position
    DL = col
    CH = starting scan line     ; size
    CL = ending scan line

06h: Scroll the Screen or a Window Up
Input:
    AH = 6
    AL = number of lines to scroll (0 => whole screen)
    BH = attribute for blank lines
    CH, CL = row, column for upper left corner
    DH, DL = row, column for lower right window

Scrolling the screen up one line means to move each display line UP one row and insert a blank line at the bottom of the screen. The previous top row disappears from the screen.

The whole screen or any rectangular area (window) may be scrolled. AL contains the number of lines to scroll. If AL = 0, all the lines are scrolled and this clears the screen or window.

Example: Clear the screen to black for the 80x25 display.

MOV AH, 6      ; scroll up function
XOR AL, AL     ; clear entire screen
XOR CX, CX     ; upper left corner is (0,0)
MOV DX, 184FH  ; lower right corner is (4Fh, 18H)
MOV BH, 7      ; normal video attribute
INT 10H        ; clear screen

07h: Scroll the Screen/Window down
Input:
    AH = 7
    AL = number of lines to scroll (0 => whole screen)
    BH = attribute for blank lines
    CH, CL = row, column for upper left corner 
    DH, DL = row, column for lower right corner

Same as function 6, but lines are scrolled down instead of up.

08h: Read character at cursor. Can be used in either text or graphics mode.
Input:   AH = 8
         BH = page number
Output:  AH = attribute
         AL = ASCII code of character

09h: Write character and attribute.   Display any ASCII character at current position and set desired attribute.   Can be used in graphics or video mode.
Input:
    AH = 09
    AL = ASCII character code
    BH = video page number (usually 0)
    BL = attribute to be used. (In video mode, sets foreground (pixel) color)
    CX = repetition count

Note: cursor will not be moved beyond the last character displayed.

Also, if AL contains the ASCII code of a control character, a control function is not performed --- a display symbol is shown instead.

Example: change the attribute of the character under the cursor to reverse video for monochrome display.

        MOV AH, 8     ; read character
        XOR BH, BH    ; on page 0
        INT 10H       ; character in AL, attribute in AH

        MOV AH, 9     ; display character
        MOV CX, 1     ; display 1 character
        MOV BL, 70H   ; reverse video attribute
        INT 10H       ; display character  

0Ah: Write character.  Display any ASCII character at current position without changing the current attribute.  Can be used in text or video mode.
Input:
    AH = 0Ah
    AL = ASCII character code
    BH = video page number (usually 0)
    CX = repetition count

0Eh: Display Character and Advance Cursor
Input:   AH = 0Eh
         AL = ASCII code of character
         BH = page number
         BL = foreground color (graphics mode only)

This function displays the character in AL and advances the cursor to the next position in the row, or if at the end of a row, it sends it to the beginning of the next row. If the cursor is in the lower right corner, the screen is scrolled up and the cursor is set to the beginning of the last row. This is the BIOS function used by INT 21h, function 2, to display a character. The control characters bell (07h), backspace (08h), line feed (0Ah), and carriage return (0Dh) cause control functions to be performed. 
```

[来源在这里](http://fleder44.net/312/notes/18Graphics/index.html)。

# php - 5.4 版中的 get_object_vars 是否已更改？

> ID：12331534
> 
> 赞同：1
> 
> 时间：2012-09-08T14:19:35.377
> 
> 标签：php

我曾经使用像这样的闭包从一个类中的一个类中获取所有公共变量：

```
Class myClass
{
  public $foo;
  private $bar;

  private function GetFields()
  {
    $lambda = function( $obj ) { return get_object_vars( $obj ); };
    return $lambda( $this );
  }

  public function SomeFunction()
  {
    $fields = $this->GetFields();
  }
} 
```

这很完美，并且在课堂上给了我所有的公共变​​量。

现在，我将我的服务器升级到 PHP 5.4，并获得了所有私有和受保护的变量。这是一个新的“功能”还是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:26:24.203

从`[get_object_vars()](http://us2.php.net/get_object_vars)`.

> 返回范围内指定对象的已定义对象可访问非静态属性的关联数组。

我假设，当您使用`$this`上下文时，`get_object_vars()`会为您提供所有可访问的属性。其中将包括`private`和`protected`。

* * *

在 PHP 5.4 中，您现在可以`$this`在匿名函数内部使用。向下滚动并查看更改日志。[http://php.net/manual/en/functions.anonymous.php](http://php.net/manual/en/functions.anonymous.php)

> ## 变更日志
> 
> 5.4.0 | $this 可用于匿名函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:28:06.187

看手册中这个函数的用例：http: [//php.net/manual/en/function.get-object-vars.php](http://php.net/manual/en/function.get-object-vars.php)

你必须在那里，第一个是在对象上创建实例时，第二个是在类中。这两种情况有不同的结果。第一个仅显示公共属性，第二个显示所有属性。

不同之处在于`get_object_vars()`返回对象的所有可访问属性这一事实。当您创建对象的实例并将其作为参数传递给函数时，它只能访问公共属性，但是当您在类内部并且`$this`作为参数传递时，它可以访问所有属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T14:46:43.017

要回答我自己的问题，将闭包移动到类的范围内会产生不希望的副作用。

看看：[https ://wiki.php.net/rfc/closures/object-extension](https://wiki.php.net/rfc/closures/object-extension)

最后，我认为它是一个**错误**或至少是一个不需要的“功能”。

我必须考虑另一种策略来查找类的所有公共属性，同时在类中。

**更新：**

这就是我想出的：

```
Class myClass
{
  public  $foo;
  private $bar;

  private function GetFields()
  {
    $fields = [];
    $ref = (new ReflectionObject($this))->getProperties(ReflectionProperty::IS_PUBLIC);
    foreach ( $ref as $value )
      $fields[$value->name] = $this->{$value->name};

    return $fields;
  }

  public function SomeFunction()
  {
    $fields = $this->GetFields();
  }
} 
```

# coding-style - 让和构造与让顺序

> ID：12331538
> 
> 赞同：3
> 
> 时间：2012-09-08T14:20:05.840
> 
> 标签：coding-style, f#, ocaml

考虑这个 OCaml 代码：

```
let coupe_inter i j cases =
  let lcases = Array.length cases in
  let low,_,_ = cases.(i)
  and _,high,_ = cases.(j) in
  low,high,
  Array.sub cases i (j-i+1),
  case_append (Array.sub cases 0 i) (Array.sub cases (j+1) (lcases-(j+1))) 
```

为什么使用表达式`let ... and ... in`代替`let ... in let ... in`序列（如 F# 强制您这样做）？这种结构在 OCaml 代码中似乎很常见。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:34:49.350

`let x = a and y = b in c`具有定义`x`和`y`“同时”的效果。这意味着评估的顺序（`a`之后或之前`b`）是未指定的（您*不能*假设`a`将在之前评估），并且不受约束`x`，也不受约束，它们仅在 中可用。`b``y``a``c`

我很少使用这种结构，因为我过去被评估顺序的东西咬过。但是，我经常使用它的递归变体`let rec ... and ... in ...`（所有变量绑定在任何地方都可用）来定义相互递归的函数。

```
let rec even n = (n = 0) || odd (n - 1)
and odd n = (n <> 0) && even (n - 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T14:42:54.237

在 F#`let ... and ...`中是禁止的，但您仍然可以编写：

```
let rec low,_,_ = cases.[i]
and _,high,_ = cases.[j] 
```

正如@gasche 所说，`let rec ... and ...`主要用于定义相互递归的函数/类型。我认为使用一系列`let`更直观，更不容易出错，因此应该首选。

# iphone - NSArray removeObjectAtIndex 错误

> ID：12331542
> 
> 赞同：0
> 
> 时间：2012-09-08T14:20:50.300
> 
> 标签：iphone, objective-c, ios, xcode, nsarray

我正在使用以下代码检查对象是否存在，然后再将其删除：

```
if(titlescopy.count >= i)
{
   if([[titlescopy objectAtIndex:i] isKindOfClass:[NSString class]])
   {
       [titlescopy removeObjectAtIndex:i];
   }
} 
```

但是，我收到此错误：

> ***由于未捕获的异常'nsrangeexception'而终止应用程序，原因：'*** - [__ nsarraym objectatIndex：]：索引2超出界限[0 .1]' ***首次投掷呼叫堆栈:( 0x365A56C3 0x3885155 0x364f1055 0x494b 0x37f 0x37fe7a81 0x38001ddd 0x172bd 0x3805f8e5 0x3805f897 0x3805f875 0x3805f12b 0x3805f621 0x37f87d29 0x37f74f29 0x37f74843 0x34ea25d3 0x34ea2203 0x3657a593 0x3657a537 0x365793b9 0x364ec39d 0x364ec229 0x34ea131b 0x37fc88f9 0x283b 0x2798）的libc ++ abi.dylib：终止称为抛出异常（LLDB）

为什么会这样？我正在使用的代码应该在尝试删除它之前检查对象是否存在，它显然不存在。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T14:23:48.207

Objective-C 中的数组索引从 0 开始，因此 i =titlescopy.count 超出范围。将您的 if 语句更改为：

```
if(titlescopy.count > i) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T14:26:09.510

答案在您的日志中......

```
* Terminating app due to uncaught exception 'NSRangeException', reason: '* -[_**_NSArrayM objectAtIndex:]: index 2 beyond bounds [0 .. 1]'** 
```

您指的是超出范围的索引...例如，考虑您的数组大小为 3，但您指的是第 4 个对象。所以最好检查下面的索引是否计数。如果是这样，请继续您想要的。

```
// mistake is "i" should not be equal to count...
if(i < titlescopy. count)
{
     if([[titlescopy objectAtIndex:i] isKindOfClass:[NSString class]])
     {
         [titlescopy removeObjectAtIndex:i];
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T17:49:34.897

//if(titlescopy.count >= i) ">=" 是错误的。把它变成“>”

"i" 应该小于数组的计数 a=

```
if(titlescopy.count > i)
{
    if([[titlescopy objectAtIndex:i] isKindOfClass:[NSString class]])
    {
        [titlescopy removeObjectAtIndex:i];
    }
} 
```

# java - 在特定位置的 JTextArea 中插入字符串

> ID：12331544
> 
> 赞同：1
> 
> 时间：2012-09-08T14:21:06.803
> 
> 标签：java, string, swing, document, jtextarea

Java 中是否有任何函数可以在指定的 JTextArea 列号处插入字符串。

例如，

```
String str = "This is a sample text"

String => column Number

This => at 0

is => at 10

a => at 14

sample => at 20

text => at 25 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:33:56.280

请看一下这个例子，它使用了**JTextComponent 的** `viewToModel()`方法。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TextAreaExample extends JFrame
{
    private JTextArea tarea =  new JTextArea(10, 10);
    private JTextField tfield = new JTextField(10);
    private Object[] possibleValues = { "First", "Second", "Third" };

    private void createAndDisplayGUI()
    {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        tarea.setText("Hello there\n");
        tarea.append("Hello student://");
        JScrollPane scroll = new JScrollPane(tarea);

        tfield.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                tarea.append(tfield.getText() + "\n");
            }
        });

        tarea.addMouseListener(new MouseAdapter()
        {
            public void mouseClicked(MouseEvent me)
            {
                int x = me.getX();
                int y = me.getY();
                System.out.println("X : " + x);
                System.out.println("Y : " + y);
                int startOffset = tarea.viewToModel(new Point(x, y));
                System.out.println("Start Offset : " + startOffset);
                String text = tarea.getText();
                String firstPart = text.substring(0, startOffset);
                String secondPart = text.substring(startOffset, text.length());

                Object selectedValue = JOptionPane.showInputDialog(null,
                                                  "Choose one", "Input",
                                                  JOptionPane.INFORMATION_MESSAGE, null,
                                                  possibleValues, possibleValues[0]);

                if (selectedValue != null)  
                {
                    String newText = firstPart + " " 
                                               + (String) selectedValue
                                               + " "
                                               + secondPart;
                    tarea.setText(newText);                        
                }
            }
        });

        getContentPane().add(scroll, BorderLayout.CENTER);
        getContentPane().add(tfield, BorderLayout.PAGE_END);
        pack();
        setLocationByPlatform(true);
        setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new TextAreaExample().createAndDisplayGUI();
            }
        });
    }
} 
```

# java - 将文件从客户端发送到服务器并且不会丢失连接，这可能吗？

> ID：12331545
> 
> 赞同：0
> 
> 时间：2012-09-08T14:21:18.073
> 
> 标签：java, sockets, client-server

我想将文件从客户端发送到服务器，并且将来能够再次发送。

所以我的客户端连接到服务器并上传文件，好的 - 它可以工作，但它在最后挂起..

所以这是我在客户端的代码，服务器端非常相似。

```
private void SenderFile(File file) {

    try {

            FileInputStream fis = new FileInputStream(file);
            OutputStream os = socket.getOutputStream();

            IoUtil.copy(fis, os);

        } catch (Exception ex) {
            ex.printStackTrace();
        }
    } 
```

在 Stack 上找到的 IoUtils :)

```
public static class IoUtil {

    private final static int bufferSize = 8192;

    public static void copy(InputStream in, OutputStream out)
            throws IOException {
        byte[] buffer = new byte[bufferSize];
        int read;

        while ((read = in.read(buffer, 0, bufferSize)) != -1) {
            out.write(buffer, 0, read);
        }
        out.flush();
    }
} 
```

解释：我的客户端有一个连接到服务器的套接字，我向他发送任何文件。我的服务器下载了它，但最后挂起，因为他正在监听更多信息。如果我选择另一个文件，我的服务器会将新数据下载到现有文件中。

如何将任何文件上传到服务器，使我的服务器正常工作并能够正确下载另一个文件？

附言。如果我在函数结束时添加到 ioutil.copy，`out.close`我的服务器将继续工作，但连接将丢失。我不知道该怎么办 ：{

* * *

更新后：客户端：

```
private void SenderFile(File file) {
    try {

        FileInputStream fis = new FileInputStream(file);
        OutputStream os = socket.getOutputStream();

        DataOutputStream wrapper = new DataOutputStream(os);
        wrapper.writeLong(file.length());
        IoUtil.copy(fis, wrapper);

    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

服务器端（线程监听来自客户端的任何消息）：

```
public void run() {
    String msg;
    File newfile;

    try {
        //Nothing special code here

        while ((msg = reader.readLine()) != null) {

            String[] message = msg.split("\\|");
            if (message[0].equals("file")) {//file|filename|size

                String filename = message[1];
                //int filesize = Integer.parseInt(message[2]);

                newfile = new File("server" + filename);

                InputStream is = socket.getInputStream();
                OutputStream os = new FileOutputStream(newfile);

                DataInputStream wrapper = new DataInputStream(is);

                long fileSize = wrapper.readLong();
                byte[] fileData = new byte[(int) fileSize];
                is.read(fileData, 0, (int) fileSize);
                os.write(fileData, 0, (int) fileSize);

                System.out.println("Downloaded file");
            } else

                //Nothing special here too
        }

    } catch (Exception ex) {
        ex.printStackTrace();
    }

} 
```

好的，现在我可以下载文件了 - 仍然有一次，另一个已下载但无法读取。例如，第二次我想由客户端发送一个 file.png。我在服务器上得到了它，但是无法查看此文件。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:24:44.847

您需要使您的服务器能够区分文件。最简单的方法是提前告诉接收端应该对单个文件有多少字节；这样，它就知道何时停止阅读并等待下一个。

这就是该`SenderFile`方法的样子：

```
private void SenderFile(File file)
{
    try
    {
        FileInputStream fis = new FileInputStream(file);
        OutputStream os = socket.getOutputStream();

        DataOutputStream wrapper = new DataOutputStream(os);
        wrapper.writeLong(file.length());
        IoUtil.copy(fis, wrapper);
    }
    catch (Exception ex)
    {
        ex.printStackTrace();
    }
} 
```

这就是该`ReceiveFile`方法的样子：

```
// the signature of the method is complete speculation, adapt it to your needs
private void ReceiveFile(File file)
{
    FileOutputStream fos = new File(file);
    InputStream is = socket.getInputStream();
    DataInputStream wrapper = new DataInputStream(is);

    // will not work for very big files, adapt to your needs too
    long fileSize = wrapper.readLong();
    byte[] fileData = new byte[fileSize];
    is.read(fileData, 0, fileSize);
    fos.write(fileData, 0, fileSize);
} 
```

然后不要关闭套接字。

# javascript - Onclick 一个按钮在后面运行代码并且不回发页面（刷新）asp.net

> ID：12331550
> 
> 赞同：0
> 
> 时间：2012-09-08T14:21:31.300
> 
> 标签：javascript, asp.net

![在此处输入图像描述](../Images/aecf72a37f66efc766c3fec896f49140.png)![在此处输入图像描述](../Images/1c8f09a6356911aa34673c41a3927fff.png)

我有一个登录下拉菜单的问题。当我按下登录链接时，下拉菜单会向下滑动。我想要的是当给出**错误的凭据时****不要回发（刷新）**，这样下拉菜单将保持打开状态，让用户输入正确的密码！

我试过 OnClientClick="return false;" 但这会禁用我的 asp:button 的 onclick 事件。

我背后的代码：

```
string insCmd = "SELECT ID_USER FROM users WHERE username = @LoginEmail AND password = @passwd;";
        SqlCommand Login = new SqlCommand(insCmd, con);

        Login.Parameters.AddWithValue("@LoginEmail", txtLoginEmail.Text);
        Login.Parameters.AddWithValue("@passwd", txtLoginPassword.Text);

        try
        {
            SqlDataReader dr = Login.ExecuteReader();
            SqlDataReader dr2;

            if (dr == null || !dr.HasRows)
            {
                litErrorLogin.Text = "<span>Error:Wrong Credentials</span>";

                //btnLogin.OnClientClick = "return false;";
                return;
            }

            while (dr.Read())
            {
                Session["UserID"] = dr.GetInt32(0);
            } 
```

我的html代码：

```
<div id="bb_loginForm">
    <div class="bg_loginForm">
        <span style="font-size:11.5px;font-weight:bold">Log in to Account</span> <a class="bb_linkLoginHeaderHide" href="#" title="Hide">
            Hide</a>
        <br />
        <div class="f_username">
            <label for="txtLoginEmail" id="labelUser">
                Email
            </label>
            <br />
            <asp:TextBox class="text-input" ID="txtLoginEmail" runat="server" Height="15px" Width="130px"></asp:TextBox>
        </div>

        <div class="f_password">
            <label for="txtLoginPassoword" id="labelPassword">
                Password
            </label>
            <br />
            <asp:TextBox class="text-input" ID="txtLoginPassword" runat="server" Height="15px" Width="130px" 
                TextMode="Password"></asp:TextBox>
        </div>
        <br />
        <div class="f_login">

            <!--src="../images/GreyButton.png"   class="submit btn primary-btn" onclick="btnLogin_Click"-->
            <asp:Button class="submit google-button" ID="btnLogin" onclick="btnLogin_Click" runat="server" Text="Log in" />                                       

            <br />

            <asp:CheckBox ID="chkRememberLogin" runat="server" />
            &nbsp;
            <label class="smaller" for="chkRememberLogin" id="labelrememberusername">Remember me
            </label>
            <br />
            <a title="Forgot your login info?" href="#" class="underlineHover">Forgot your login
                info? </a>
            <br />
            <asp:Literal ID="litErrorLogin" runat="server"></asp:Literal>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:52:55.537

您可以在此基础上`Ajax`进行开发，以便不发布您的所有页面，但您只发布您的页面的一部分。（更新部分页面）

```
 <asp:ScriptManager ID="ScriptManager1" runat="server" />
        <asp:UpdatePanel runat="server" id="UpdatePanel" updatemode="Conditional">
        <Triggers>
            <asp:AsyncPostBackTrigger controlid="btnLogin" eventname="Click" />
        </Triggers>
            <ContentTemplate>
                <asp:Literal ID="litErrorLogin" runat="server"></asp:Literal>   
                <asp:Button class="submit google-button" ID="btnLogin" onclick="btnLogin_Click" runat="server" Text="Log in" />                                       

            </ContentTemplate>
        </asp:UpdatePanel> 
```

您设置了所有不想发布到外部的控件`ContentTemplate`

注意：我固定`updatemode="Conditional"`和`<asp:AsyncPostBackTrigger controlid="btnLogin" eventname="Click" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T18:00:25.027

@Andreas Lympouras

在标签中写下这段代码

```
function show() {`enter code here`
            var Errormsg = document.getElementById("Error");
            Errormsg.style.color = "red";
            Errormsg.innerHTML = "incorrect login";
        } 
```

在后面的代码中复制此代码

```
 string script = string.Format(@"show()");

                ScriptManager.RegisterClientScriptBlock(this, typeof(Page), UniqueID, script, true); 
```

现在它将调用客户端并向您显示消息。

# php - Codeigniter 产品路由

> ID：12331554
> 
> 赞同：1
> 
> 时间：2012-09-08T14:21:55.103
> 
> 标签：php, codeigniter, url, routes

我有一个控制器产品和数据库表类别。

产品具有索引功能，可确定应从哪个类别加载产品。

但是 URL 看起来像这样：`products/index/(category-name)`

我希望它看起来像这样：`products/(category-name)`

有人可以帮我吗？我将非常感谢。

注意：我确实打开了 RewriteEngine

解决方案：`$route['^(en|sk)/products/(:any)'] = "/products/index/$1";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:29:48.137

做这样的事情；

```
$route['products/(:any)'] = "products/index/$1"; 
```

这对你有用。

# php - 在 CodeIgniter FTP 类中强制文件下载

> ID：12331563
> 
> 赞同：1
> 
> 时间：2012-09-08T14:23:08.713
> 
> 标签：php, codeigniter

我在 CodeIgniter 中使用 FTP 类，它们具有从 FTP 下载文件的功能，但是，它只能下载到服务器本身。我试图让它直接下载给用户。

我知道我可以将其保存到服务器然后强制下载然后删除。但是如果文件很大并且速度很慢，那就有点麻烦了。

所以我想知道这段代码，是否有任何方法只是使用 force_download CI 函数？

例子;

```
$this->ftp->download('/public_html/myfile.html', '/local/path/to/myfile.html', 'ascii'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:18:04.593

您只需将文件下载到 PHP 的标准输出流，而不是像这样的文件 [stream]：

```
<?php

header('Content-type: text/plain');
header('Content-Disposition: attachment; filename="test.txt"');
$this->ftp->download('/public_html/test.txt', 'php://output', 'ascii'); 
```

（注意：标题用于强制下载，否则浏览器会简单地打印内容）

别客气！

# php - 如何在我的 PHP 中检索多个回声以取得成功：函数

> ID：12331565
> 
> 赞同：-1
> 
> 时间：2012-09-08T14:23:39.303
> 
> 标签：php, html, jquery

在我的 php 中，我回应了

```
 //sql query here
        foreach($user as $values){
            echo $values['id'];
            echo $values['name'];
            echo $values['email'];
            echo $values['loc'];
        } 
```

在我的 $.post

```
success:function(msg){
//what to put here to be able to retrieve the values?
} 
```

在我的 html 中

```
 <td id="idField"></td><td id="nameField"></td><td id="emailField"></td><td id="locField"></td> 
```

应该如何以正确的方式进行？输出应显示表中的指定列，并且应显示取决于查询结果的行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:30:34.570

PHP

```
echo json_encode($user); 
```

jQuery

```
success:function(msg){
  $('#idField').html(msg.id);
  $('#nameField').html(msg.name;
  // etc      
} 
```

你真的应该学习如何使用文档、谷歌、SO 和在线帮助。有成千上万的教程，文档，帮助如何做到这一点。在寻求帮助之前先做一些研究。

> [从 php 数组中获取数据 - AJAX - jQuery](https://stackoverflow.com/questions/6395720/get-data-from-php-array-ajax-jquery)

# python - 如何装饰类方法

> ID：12331570
> 
> 赞同：-1
> 
> 时间：2012-09-08T14:24:12.470
> 
> 标签：python, class, decorator

好的，我已经阅读了有关类方法装饰的所有问题，但我的情况不喜欢它们。

```
def safe_db(foo):
    def _inner(*args, **kwargs):
        try:
            foo(args, kwargs)
            return True
        except Exception as e:
            log.error(e.message)
            print e.message
            return False
    return _inner

class BaseDB(object):
    def __init__(self):
        self.connection = Connection()
        self.db = self.connection.goobi
        self.table = None

    @safe_db
    def create(self, **data):
        self.table.insert(data)

    def update(self, where, **data):
        try:
            self.table.update(where, {'$set': data})
            return True
        except Exception as e:
           log.error(e.message)
           print e.message
           return False 
```

然后我尝试从继承的类用户调用方法创建：

```
u = User()
u.create(email='i@example.com', password='secrete') 
```

我得到例外：

```
2012-09-08 18:17:18,230 ERROR [hairs.model.user][worker 2] create() takes exactly 1      argument (2 given)
    create() takes exactly 1 argument (2 given) 
```

我无法理解如何装饰 BaseDB 的类方法，或者如何使异常捕获和记录不那么痛苦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:05:56.427

你的装饰器有一个错误：

```
def safe_db(foo):
    def _inner(*args, **kwargs):
        try:
            foo(*args, **kwargs)   # fixed line
            return True
        except Exception as e:
            log.error(e.message)
            print e.message
            return False
    return _inner 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-08T14:32:03.303

您希望将您的函数称为`create(email='i@example.com', password='secret')`. 您正在调用包装函数 as `u._inner(email='i@example.com', password='secret')`，它会自动翻译（因为您正在调用方法）为`_inner(u, email='i@example.com', password='secret')`.

您应该添加`self`到`_inner`的参数，例如`_inner(self, ...`

但是，鉴于您的错误和其中出现的数字，您向我们展示的任何代码中都可能没有出现您的错误；它可能发生在某些子调用中（您可以通过在输入/退出函数时添加打印语句来检查）。

# ruby - 如何在两个六进制字符串之间进行异或运算？

> ID：12331579
> 
> 赞同：7
> 
> 时间：2012-09-08T14:24:57.717
> 
> 标签：ruby, xor

我有两个十六进制字符串。我需要`XOR`在它们之间进行操作。

我的六弦琴就像，

```
 a = "1A6F2D31567C80644A5BEF2D50B986B";
 b = "EF737F481FC7CDAE7C8B40837C80644"; 
```

如何进行它们之间的异或运算？你能给出一些指导方针吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T14:35:03.987

这适用于任何基础：

```
>> (a.to_i(16) ^ b.to_i(16)).to_s(16) 
=> "f51c527949bb4dca36d0afae2c39e2f" 
```

但是您可以将[String#hex](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-hex)用于十六进制字符串。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-08T14:56:32.887

```
a = "1A6F2D31567C80644A5BEF2D50B986B"
b = "EF737F481FC7CDAE7C8B40837C80644"
a.hex ^ b.hex
#or (a.hex ^ b.hex).to_s(16) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-21T22:00:33.273

您没有特别询问，但您可能希望输出 String 的长度与输入 Strings 的长度相同，方法是**填充前导零**。因此，以 steenslag 的巧妙答案为基础（并调整输入值以说明潜在问题）：

```
a = "14ef"
b = "1ca3"
(a.hex ^ b.hex).to_s(16)
# "84c"
(a.hex ^ b.hex).to_s(16).rjust(a.length, '0')
# "084c" 
```

# javascript - 使用 knockout.js 将数组绑定到视图模型

> ID：12331582
> 
> 赞同：3
> 
> 时间：2012-09-08T14:25:09.500
> 
> 标签：javascript, knockout.js

有没有办法定义一个数组并将其绑定到视图模型？还是必须将其定义为对象？：

---- js ----

```
var arr = [{"id":"1","desc":"1","enabled":true,"tabStr":"/2 * * * * * *"},
            {"id":"2","desc":"2","enabled":true,"tabStr":"1-60/2 * * * * * *"},
            {"id":"3","desc":"3","enabled":false,"tabStr":"/5 * * * * * *"}];

$(文档).ready(函数(){
  ko.applyBindings(arr);
});

```

----- html ----

```
 <tbody data-bind="foreach: ???">
      <tr>
        <td data-bind="text: id"></td>
        <td data-bind="text: desc"></td>
        <td data-bind="text: tabStr"></td>
        <td data-bind="text: enabled"></td>
      </tr> 
    </tbody> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:50:31.160

如果您不想将数组包装在对象中，则可以使用特殊的上下文变量`$data`（或者`$root`因为这是顶级视图模型）来绑定当前数据。因此，您的绑定将如下所示：

```
<tbody data-bind="foreach: $data">
  <tr>
    <td data-bind="text: id"></td>
    <td data-bind="text: desc"></td>
    <td data-bind="text: tabStr"></td>
    <td data-bind="text: enabled"></td>
  </tr> 
</tbody> 
```

您可以在此处找到有关上下文变量的更多信息：http: [//knockoutjs.com/documentation/binding-context.html](http://knockoutjs.com/documentation/binding-context.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-14T06:03:03.577

我使用 MVC 而不是“arr”，所以我使用`Model`（我将我的版本保留为“arr”），并`@using IEnumerable<MyViewModel>`在我的视图顶部有一个，我让控制器执行以下操作：

```
public ActionResult Index() {
     var data = myDataContext.SomeTable.Where(e => e.blah == "Foo"); 
     return View(data);
} 
```

这会返回类似于 your 的`arr`内容，所以我认为下面的代码应该适合您：

```
<table border="1" width="100%" data-bind="foreach: mainArray">
    <tr>
        <td width="25%">ID</td>
        <td width="25%">Desc</td>
        <td width="25%">Enabled</td>
        <td width="25%">TabStr</td>
    </tr>
    <tr>
        <td width="25%" data-bind="text: id"></td>
        <td width="25%" data-bind="text: desc"></td>
        <td width="25%" data-bind="text: tabStr"></td>
        <td width="25%" data-bind="text: enabled"></td>
    </tr> 
</table>
<script language="type/Javascript">
    var arr = [{"id":"1","desc":"1","enabled":true,"tabStr":"2"},
        {"id":"2","desc":"2","enabled":true,"tabStr":"1-60"},
        {"id":"3","desc":"3","enabled":false,"tabStr":"5"}];
    //var arr = [@Html.Raw(Json.Encode(Model))][0];

    $(function () {

         var myViewModel = new MyViewModel(arr);
         ko.applyBindings(myViewModel);

         function MyViewModel(arr) {
             var self = this;
             self.mainArray = ko.observableArray([]);

             if (arr.length > 0) {
                 for (var i=0; i<arr.length; i++) {
                     var myDataViewModel = new MyDataViewModel(arr[i]);
                     self.mainArray.push(myDataViewModel);
                 } 
             }
         }

         function MyDataViewModel(vm) {
            //alert(vm.id);
            var self = this;
            if (vm != null) {                     
               self.id = ko.observable(vm.id);
               self.desc = ko.observable(vm.desc);
               self.enabled = ko.observable(vm.enabled);
               self.tabStr = ko.observable(vm.tabStr);
           } else {
              self.id = 0;
              self.desc = 0;
              self.enabled = true;
              self.tabStr = 0;
           }
        }
     });

</script> 
```

在这里工作 JSFiddle：http: [//jsfiddle.net/navyjax2/y75hcr2L/](http://jsfiddle.net/navyjax2/y75hcr2L/)

# php - 如何将正确的数据格式从 SQL 传递到 PHP

> ID：12331583
> 
> 赞同：0
> 
> 时间：2012-09-08T14:25:11.407
> 
> 标签：php, javascript, ajax, json, highcharts

我需要使用 highcharts创建一个[基本的柱形图。](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/)这是我的 PHP 代码：

```
$query = "SELECT campaign_id, kpi, label, val FROM table WHERE id = $1";

$result = pg_prepare($db, "report", $query);
$result = pg_execute($db, "report", array($campaignID));

while ($row = pg_fetch_array($result, NULL, PGSQL_ASSOC))
{
    $response['xlabels'][] = $row['label'];
    $response['xdata'][] = (float)$row['val'];
}

pg_free_result($result);
pg_close($db);

echo json_encode($response); 
```

PostgreSQL 查询返回数据如下（例如，campaign_id = 5）：

```
 id |    kpi    | label | val  
----+-----------+-------+------
  5 | Voter     | East  | 0.18 
  5 | Non-Voter | East  | 0.12 
  5 | Voter     | West  | 0.82 
  5 | Non-Voter | West  | 0.88 
```

我的 API 保存`xlabels`并保存`xdata`到`xAxis.categories`和`series`：

```
$.get('vote_api.php', {'id' : id}, function(data) {

    options.chart.type = 'column';

    options.xAxis.categories = data.xlabels;
    options.series = data.xdata;   

    chart = new Highcharts.Chart(options);

    }, "json"); 
```

`kpi`(Voter vs. Non-Voter) 作为我的系列和(East vs West) 作为我的 xAxis的正确数据格式`label`应该是（请参阅[JSFiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/)）：

```
xAxis.categories = ['East', 'West'];
series = [{name: 'Voter',
            data: [0.18, 0.82]},
          {name: 'Non-Voter',
            data: [0.12, 0.88]}] 
```

但是我的`while loop`部分`$response['xlabels'][] = $row['label']; $response['xdata'][] = (float)$row['val'];`给了我这样的东西：

```
[xlabels] => Array
    (
        [0] => East
        [1] => East
        [2] => West
        [3] => West
    )

[xdata] => Array
    (
        [0] => 0.18
        [1] => 0.12
        [2] => 0.82
        [3] => 0.88
    ) 
```

有人会给出一些提示如何做到这一点？我真的很感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:48:19.197

您可以尝试：

```
$query = "SELECT campaign_id, kpi, label, val FROM table WHERE id = $1";

$result = pg_prepare($db, "report", $query);
$result = pg_execute($db, "report", array($campaignID));

while ($row = pg_fetch_array($result, NULL, PGSQL_ASSOC))
{
    if (!in_array($row['label'], $response['xlabels']))
    {
        $response['xlabels'][] = $row['label'];
    }
    $response['xdata'][ $row['kpi'] ][] = (float)$row['val'];
}

pg_free_result($result);
pg_close($db); 
```

第一个变化：

```
 if (!in_array($row['label'], $response['xlabels']))
    {
        $response['xlabels'][] = $row['label'];
    } 
```

避免将“East”和“West”多次保存到您的 xlabels 数组中。

第二个变化：

```
 $response['xdata'][ $row['kpi'] ][] = (float)$row['val']; 
```

将向 xdata 数组添加一个维度：根据它们的“kpi”将值分配给不同的数组。

# mysql - 数据库行数最大插入到继续行

> ID：12331588
> 
> 赞同：0
> 
> 时间：2012-09-08T14:25:49.877
> 
> 标签：mysql, sql

您好，我有这种情况，目前我有 3 个默认部分。**A**，**B**和**C**，我想做的是每次我添加一个新学生时，它应该检查该**部分**是否已满，如果是的话，它应该进入下一个部分。例如。当**A**已满时，学生会自动插入**B**相同的**B**和**C**。到目前为止，我的**tbl_section**结构如下：

```
 tbl_section:
     section_id
     section_name
     school_year
     adviser_id
     year_level 
```

这种结构够用吗？我是否需要在**tbl_secion**上添加一个字段，例如数量？这样每次我在该**部分**添加一个新学生都会增加数量。将不胜感激任何帮助。关于我如何执行此操作。

编辑：或者我应该将我的**SELECT**与我的**tbl_students**链接以检查一个**部分**中有多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:30:40.153

你怎么知道一个部分是否已满？你也需要一个容量。

您还需要另一个表 SectionStudent，它告诉您学生和部分之间的分配。

使用此信息，您可以编写查询以确定第一个“非完整”部分。这是一种方法：

```
select s.Section
from section s join
     SectionStudent ss
     on s.section_id = ss.section_id
group by Section
having count(*) < max(s.capacity) 
```

# mysql - Mysql count() with group by 给出重复项

> ID：12331589
> 
> 赞同：0
> 
> 时间：2012-09-08T14:25:56.133
> 
> 标签：mysql, count, group-by, duplicates

我有这个条款：

```
SELECT count(*) FROM imagetags 
INNER JOIN userimages ON imagetags.imageid = userimages.id        
WHERE privacy='public' 
&& (tag='cars' || description LIKE '%cars%' || title LIKE '%cars%')     
GROUP BY imageid 
```

我想从两个表（imagetags、userimages）中搜索所有可能的位置（标签、描述、标题）以查找“汽车”，并返回产生它们的图像数量（基本上是行）。

问题是，如果在其中两个或多个地方成功，count 会返回重复的结果。例如。如果同一图片的标签和描述中有汽车，则计数 = 2 而不是 1。如果我执行 SELECT imageid(...)，则不会发生这种情况。在我看来，GROUP BY 并没有像 count 那样工作，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:42:03.943

`DISTINCT`在您的查询中使用：

```
SELECT COUNT(DISTINCT userimages.id) FROM imagetags 
INNER JOIN userimages ON imagetags.imageid = userimages.id        
WHERE privacy='public' 
&& (tag='cars' || description LIKE '%cars%' || title LIKE '%cars%') 
```

[文档`COUNT`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_count-distinct)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:33:45.940

你试过用`SELECT COUNT(imageid) FROM imagetags ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T14:36:21.663

尝试这个：

```
SELECT COUNT(userimages.id) ... 
```

# c - scanf 行为怪异

> ID：12331592
> 
> 赞同：1
> 
> 时间：2012-09-08T14:26:11.710
> 
> 标签：c, scanf, file-handling

我正在学习 C 文件处理。我编写了以下程序，以便用户可以输入学生的 ID 和姓名。但问题不是要求用户输入 2 个输入，而是希望我输入 3 次......这是代码。问题是什么？

```
 do
  {
    printf("Enter ID and Name of the student\n");
    scanf("%d\n %s\n",&id, name);
    fprintf(myfile,"%d %s", id, name);
    printf("Are there any more students [y/n]");
  }while(getch()=='y'); 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:28:45.640

你不应该在 scanf 字符串中有 \n 。

# javascript - 有一个更好的方法吗？（递归解析 HTML unicode 实体）

> ID：12331595
> 
> 赞同：1
> 
> 时间：2012-09-08T14:27:20.070
> 
> 标签：javascript, html, security, unicode, xss

我正在解析一个不受信任的 URI，但它的 URI-hood 必须得到尊重。我试图防止`javascript:`链接，但我觉得我需要递归它，因为你可以：

`javascriptjavascript::`

并在删除所有实例后再次`javascript:`找回我们的老朋友。`javascript:`

我的另一个问题是类似嵌套的 unicode 实体。例如，我们可以有：

```
"j&#X41vascript:alert('pwnt')" 
```

...但我们也可以有：

```
"j&#&#X5841vascript:alert('pwnt')" 
```

...尽管我似乎做错了（而成功的攻击者显然不会。）

```
function resolveEntities(uri) {
  var s = document.createElement('span')
    , nestTally = uri.match(/&/) ? 0 : 1
    , limitReached = false;

  s.innerHTML = uri;
  while (s.textContent.match(/&/)) {
    s.innerHTML = s.textContent;
    if(nestTally++ >= 5) {
      limitReached = true;
      break;
    }
  }

  return encodeURI(s.textContent);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T15:58:31.080

你之前不是已经问过[几乎同样的问题](https://stackoverflow.com/questions/12331195/how-can-i-programmatically-get-all-of-a-strings-unicode-entities-to-resolve-the)了吗？无论如何，我的建议保持不变：使用[适当的 HTML sanitizer](http://code.google.com/p/google-caja/wiki/JsHtmlSanitizer)。

我链接到的特定清理程序会`javascript:`自动删除 URL，但您也可以将其设置为仅允许某些列入白名单的 URL 方案，如 Thomas 建议的。正如他所指出的，这是一个好主意，因为只允许您*知道*`http`安全的方案更安全。`https`

 *（特别是，给定的模糊 URL 方案是否安全可能不仅取决于用户的浏览器，还取决于他们的操作系统以及他们可能安装的第三方软件——许多程序喜欢将自己注册为处理程序用于他们自己的 URL 方案。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T14:44:40.083

与其指定您想要列入黑名单的内容（例如`javascript:`URI），不如指定您想要列入白名单的内容（例如`http`并且`https`仅）。像这样的东西怎么样：

```
function sanitizeUri(uri) {
  if (!uri.match(/^https?:\/\//)) {
    uri = "http://" + uri;
  }
  return uri;
} 
```*

# r - 用 ggplot2 绘制多列

> ID：12331597
> 
> 赞同：3
> 
> 时间：2012-09-08T14:27:26.873
> 
> 标签：r, plot, ggplot2

我需要在同一张图中绘制以下数据集。

```
Bin1,Bin2,Bin3,Cat
4,3,5,S
6,4,5,M
3,5,4,M
1,4,5,M
 ,5, ,M 
```

在每个 bin 中，第一个数据点与其他数据点属于不同的类别。（所以我添加了 Cat 列）

我需要将这些绘制为点（不同类别的不同颜色）

以下代码行实现了我对单个 bin 的需求

```
p <- ggplot(data,aes(Bin1,1))
p + geom_point(aes(color=Cat, size=Cat)) 
```

如何对整个数据集执行此操作？

* * *

这是一个相关的问题？

如果我需要使用一堆列来为点着色怎么办。颜色 Bin1 点根据 Cat1 等等..

```
Bin1,Cat1,Bin2,Cat2
4,S,5,S
6,L,5,M
3,M,4,L
1,M,5,L
    3,M 
```

我该怎么做呢？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T17:29:40.983

```
library(reshape2)
library(ggplot2)
ggplot(melt(df, id.vars = "Cat"), aes(value, variable, colour = Cat)) + 
geom_point(size = 4) 
```

![在此处输入图像描述](../Images/2d71e7029fa3fcbe75d10e8e30726b10.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:52:29.610

只需融化 data.frame 并绘制它。

```
library(reshape2)

dataM <- melt(data, id.vars = "Cat")

p <- ggplot(dataM, aes(value, variable, colour = Cat, size  = Cat) + geom_point() 
```

# javascript - 在 JavaScript 中调用函数时自定义 this

> ID：12331600
> 
> 赞同：1
> 
> 时间：2012-09-08T14:28:07.503
> 
> 标签：javascript, this

这是我到目前为止所拥有的：http: [//jsfiddle.net/nxCFn/](http://jsfiddle.net/nxCFn/)

```
var il = new ImageLoader();

function ImageLoader() {
    this.n = 2;

    this.load = function() {
        //obviously, the this = the image and not the original instance of ImageLoader :(
        this.n++;
        console.log(this.n);
    }

    this.imgnam = "http://www.google.com/images/errors/logo_sm.gif";

    this.img = new Image();
    this.img.src = this.imgnam;
    this.img.onload = this.load;
}​ 
```

因为图像是`.load()` `this`从`load`点调用图像。我想`this`从加载点到`ImageLoader`它“属于”的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:31:27.877

复制对`this`局部变量的引用，并使事件处理程序成为匿名函数，以便在函数的闭包中捕获局部变量：

```
var that = this;

this.img.onload = function() { that.load() }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:31:44.517

```
var that = this;
this.img.onload = function () { that.load();} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T14:33:48.920

利用`Function.prototype.bind`

```
this.img.onload = this.load.bind(this); 
```

或者您可以在此处使用它，因为您为每个实例创建了一个新函数。

```
this.load = function() {
    this.n++;
    console.log(this.n);
}.bind(this);

this.img.onload = this.load; 
```

要支持旧浏览器，您可以制作自己的活页夹功能。

```
function _binder(func, ctx /*, arg1, argn */) {
    var _slice = Array.prototype.slice,
        bound_args = _slice.call(arguments, 2);
    return function() {
        return func.apply(ctx, bound_args.concat(_slice.call(arguments)));
    }
} 
```

然后这样做。

```
this.img.onload = _binder(this.load, this); 
```

# https - 我们为什么要使用 HTTPS？

> ID：12331601
> 
> 赞同：0
> 
> 时间：2012-09-08T14:28:22.130
> 
> 标签：https

我对https有所了解，但不清楚为什么需要它。

如果我使用最强大的算法（如 RSA）而不是通过 HTTPS 区域发送数据，会怎样？有人可以解释为什么我们需要 https 的几个原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:18:25.793

在[维基百科的文章中](http://en.wikipedia.org/wiki/Https)它说

> 从技术上讲，它本身并不是一个协议。相反，它是在 SSL/TLS 协议之上简单地分层超文本传输​​协议 (HTTP) 的结果

在 Wikipeida 上的[SSL/TLS](http://en.wikipedia.org/wiki/Transport_Layer_Security)文章中，

> TLS 和 SSL 对传输层应用层的网络连接段进行加密，使用非对称加密进行密钥交换，使用对称加密实现机密性，并使用消息验证码实现消息完整性。

所以密钥交换**确实**使用了[非对称加密](http://en.wikipedia.org/wiki/Public-key_cryptography)，而 RSA 是一种非对称加密算法。

在以安全方式执行密钥交换之后，可以通过对称密码算法进行进一步的通信。可以在[此处](https://crypto.stackexchange.com/questions/1824/why-do-we-need-asymmetric-algorithms-for-key-exchange)找到同时使用对称和非对称算法的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:37:01.953

> 如果我使用最强大的算法（如 RSA）而不是通过 HTTPS 区域发送数据，会怎样？

您必须自己实现所有功能，即重新发明轮子。默认情况下，每个浏览器都支持 HTTPS。

> 有人可以解释为什么我们需要 https 的几个原因吗？

广泛支持的安全通信。如果您正在与某人使用 Wireshark 之类的嗅探器工具进行通信，他/她将能够看到您和您的对等方交换的所有数据包。尝试捕获 HTTPS 通信，您将无法在请求正文中看到任何有意义的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:18:52.717

您确实可以自己加密数据，但是您将面临一个大问题：加密代码必须在服务器和客户端（通常是浏览器）上都可用。

在服务器上实施加密可以安全地完成。在客户端，您可以安装软件（插件），也可以将 JavaScript 发送到客户端。问题是：**如何将加密代码发送给客户端？**每个窃听的人也会得到 javascript 代码，因此他可以做与客户端可以做的事情相同的事情。

您可以使用对 SSL 的内置支持，而不是强制用户安装插件，每个浏览器都已经理解这个协议。您可以将其视为已安装的加密插件。

# odbc - 未安装 Office 的 ODBC Microsoft dBase 驱动程序

> ID：12331605
> 
> 赞同：2
> 
> 时间：2012-09-08T14:29:02.760
> 
> 标签：odbc, dbase

是否有一些解决方案如何在未安装 Office 的 Windows 上使用 32/64 位 ODBC Microsoft dBase 驱动程序？

感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:41:18.110

在最近的 Windows 版本之前，Jet 驱动程序一直与 Windows 一起安装。您可以免费下载 ACE 驱动程序 ( [http://www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255) ) 下面是一个使用示例：[How to read/write dBase III files using C#/ .NET ODBC 还是 OLE？](https://stackoverflow.com/questions/75705/how-to-read-write-dbase-iii-files-using-c-net-odbc-or-ole/75915#75915)

# drupal-7 - Drupal 7：如何在特定视图中显示特定块

> ID：12331611
> 
> 赞同：1
> 
> 时间：2012-09-08T14:29:31.320
> 
> 标签：drupal-7, drupal-views

我想在视图页面上显示特定的块。我已添加列表以**将特定块中的特定视图显示**为`<viewpagename>`，但它不起作用。如何在 Drupal 7 的特定视图页面上显示特定块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:36:16.140

很久没有接触 Drupal，不过，如果我没记错的话，在你为视图选择路径后，你可以将该路径添加到块的设置中。

因此，如果视图在 /view-page 上可用，请在“include”部分添加到块设置“view-page”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T00:23:20.663

我相信为此专门制作了一个 block_views 模块。它处于测试阶段，但适用于 Drupal 7：

[https://drupal.org/project/block_views](https://drupal.org/project/block_views)

干杯，-cs

# r - 为什么会出现乱码？

> ID：12331612
> 
> 赞同：-4
> 
> 时间：2012-09-08T14:29:38.437
> 
> 标签：r, parsing, encode

为什么我在解析网页时会出现乱码？

我曾经`encoding="big-5\\IGNORE"`得到正常的字符，但它不起作用。

```
require(XML)
url="http://www.hkex.com.hk/chi/market/sec_tradinfo/stockcode/eisdeqty_c.htm"
options(encoding="big-5")
data=htmlParse(url,isURL=TRUE,encoding="big-5\\IGNORE")
tdata=xpathApply(data,"//table[@class='table_grey_border']")
stock <- readHTMLTable(tdata[[1]], header=TRUE, stringsAsFactors=FALSE) 
```

![在此处输入图像描述](../Images/543e4003742bba233190a703d4550f9f.png)

我应该如何修改我的代码以将乱码变为正常字符？

![在此处输入图像描述](../Images/72eda7e167b9b2bc24d048a5069b4962.png)

@MartinMorgan（下）建议使用

`htmlParse(url,isURL=TRUE,encoding="big-5")`

这是正在发生的事情的一个例子：

```
require(XML)
url="http://www.hkex.com.hk/chi/market/sec_tradinfo/stockcode/eisdeqty_c.htm"
options(encoding="big-5")
data=htmlParse(url,isURL=TRUE,encoding="big-5")
tdata=xpathApply(data,"//table[@class='table_grey_border']")
stock <- readHTMLTable(tdata[[1]], header=TRUE, stringsAsFactors=FALSE)
stock 
```

![在此处输入图像描述](../Images/d47c62acc7ea198bfb0a86c5bb286915.png)

总记录应为 1335。在上述情况下为 309 - 许多记录似乎已丢失

这是一个复杂的问题。有很多问题：

*   格式错误的 html 文件

网络不是标准网络，不是格式良好的 html 文件，让我证明我的观点。
请运行：

```
url="http://www.hkex.com.hk/chi/market/sec_tradinfo/stockcode/eisdeqty_c.htm"
txt=download.file(url,destfile="stockbig-5",quiet = TRUE) 
```

`stockbig-5`用firefox 打开下载的文件怎么样？![在此处输入图像描述](../Images/cbdc6de1b9db3008930a2d94153af558.png)

*   如果 html 文件格式正确，R 中的 Iconv 函数错误
    ，您可以使用

    data=readLines(file)
    datachange=iconv(data,from="source encode",to="target encode\IGNORE")

当 html 文件格式不正确时，您可以这样做，在此示例中，
请运行，

```
data=readLines(stockbig-5) 
```

将发生错误。

```
1: In readLines("stockbig-5") :  
  invalid input found on input connection 'stockbig-5' 
```

您不能在 R 中使用 iconv 函数来更改格式错误的 html 文件中的编码。

但是，您可以在 shell 中执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T00:52:13.080

我自己解决了一个晚上，很难。
系统：debian6(locale utf-8)+R2.15(locale utf-8)+gnome terminal(locale utf-8)。
这是代码：

```
require(XML)
url="http://www.hkex.com.hk/chi/market/sec_tradinfo/stockcode/eisdeqty_c.htm"
txt=download.file(url,destfile="stockbig-5",quiet = TRUE)
system('iconv -f big-5  -t  UTF-8//IGNORE    stockbig-5  > stockutf-8')
data=htmlParse("stockutf-8",isURL=FALSE,encoding="utf-8\\IGNORE")
tdata=xpathApply(data,"//table[@class='table_grey_border']")
stock <- readHTMLTable(tdata[[1]], header=TRUE, stringsAsFactors=FALSE)
stock 
```

![在此处输入图像描述](../Images/0b236318f0c554f2cfdeac3708cf8ac8.png)

我希望我的代码更优雅，R 代码中的 shell 命令可能很难看，

system('iconv -f big5 -t UTF-8//忽略 stockgb2312 > stockutf-8')

我尝试用纯R代码替换它，失败了，如何用纯R代码替换它？您可以使用代码在计算机中复制结果。完成了一半，成功了一半，继续尝试。

# php - 登录页面错误

> ID：12331617
> 
> 赞同：0
> 
> 时间：2012-09-08T14:30:03.850
> 
> 标签：php, login

我用php做了一个登录页面。当我使用用户名和密码作为数字时，没有问题。但如果我使用字母作为用户名和密码，则会导致问题，并出现以下错误：

**“Where 子句”中的未知列“列名”**

任何帮助将不胜感激

更新 ：

我使用dreamweaver，并通过以下步骤制作登录页面：

插入->数据对象->用户验证->登录用户

更新 2：

```
 <?php
// *** Validate request to login to this site.
if (!isset($_SESSION)) {
  session_start();
}

$loginFormAction = $_SERVER['PHP_SELF'];
if (isset($_GET['accesscheck'])) {
  $_SESSION['PrevUrl'] = $_GET['accesscheck'];
}

if (isset($_POST['user'])) {
  $loginUsername=$_POST['user'];
  $password=$_POST['pass'];
  $MM_fldUserAuthorization = "";
  $MM_redirectLoginSuccess = "ok.php";
  $MM_redirectLoginFailed = "login.php";
  $MM_redirecttoReferrer = false;
  mysql_select_db($database_cn3, $cn3);

  $LoginRS__query=sprintf("SELECT * FROM users WHERE `user`=%s AND pass=%s",
    GetSQLValueString($loginUsername, "-1"), GetSQLValueString($password, "text")); 

  $LoginRS = mysql_query($LoginRS__query, $cn3) or die(mysql_error());
  $loginFoundUser = mysql_num_rows($LoginRS);
  if ($loginFoundUser) {
     $loginStrGroup = "";

    if (PHP_VERSION >= 5.1) {session_regenerate_id(true);} else {session_regenerate_id();}
    //declare two session variables and assign them
    $_SESSION['MM_Username'] = $loginUsername;
    $_SESSION['MM_UserGroup'] = $loginStrGroup;       

    if (isset($_SESSION['PrevUrl']) && false) {
      $MM_redirectLoginSuccess = $_SESSION['PrevUrl'];  
    }
    header("Location: " . $MM_redirectLoginSuccess );
  }
  else {
    header("Location: ". $MM_redirectLoginFailed );
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:32:04.033

检查您的 mysql 语句，确保数据库名称、表名称和列名称拼写正确。

我确信`column name`您的 db 表，正如错误所说的拼写错误。核实。但要确认它，请向我们展示 sql 语句。

试试看；

```
$LoginRS__query="SELECT * FROM users WHERE user = '$loginUsername' AND pass = '$password'";
$LoginRS = mysql_query($LoginRS__query) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T14:32:31.317

听起来好像您需要将变量封装在查询本身的引号中：

```
$var=3;
$sql="select someColumn from someTableName where userID=$var"; 
```

会工作但

```
$var=bobby;
$sql="select someColumn from someTableName where userID=$var"; 
```

不管用。它需要是：

```
$var=3;
$sql="select someColumn from someTableName where userID='$var'"; 
```

尽管如此，如果您在使用 SQL 查询时遇到问题，请发布它和相关的 PHP 代码 - 否则我们将被迫猜测发生了什么。*在这种情况下，你的问题编号*的第一部分似乎暗示了变量的引号，而*未知的列名*部分暗示你有一个错字。

# ruby-on-rails - Rails 在登录重定向循环时设计 Gem 重定向

> ID：12331622
> 
> 赞同：0
> 
> 时间：2012-09-08T14:31:08.983
> 
> 标签：ruby-on-rails, ruby, gem

我在尝试让[Devise](https://github.com/plataformatec/devise)在登录后重定向到用户的上一页时遇到了巨大的麻烦。

我试图按照[Wiki 上的指南进行操作，](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-in)但是当我实现此代码时，它建议：

```
def after_sign_in_path_for(resource)                                                                                                                      
  sign_in_url = url_for(:action => 'new', :controller => 'sessions', :only_path => false, :protocol => 'http')                                            
  if request.referer == sign_in_url                                                                                                                    
    super                                                                                                                                                 
  else                                                                                                                                                    
    request.referer || "/"                                                                                      
  end                                                                                                                                                     
end 
```

它只是总是重定向到根目录，而不是前一页。

我发现[以前的问题](https://stackoverflow.com/questions/4330588/redirect-loop-with-devise-after-sign-in-path-for)具有相同的问题，但其中的解决方案没有奏效。

然后我想我会简化它，只通过获取引用 URL 的路径将用户返回到以前的 URL，因为我认为这可能会有所帮助，但是我得到了同样的错误：

```
def after_sign_in_path_for(resource)
  URI(request.referer).path
end 
```

如果我简单地将静态路径放入：

```
def after_sign_in_path_for(resource)
  "/somepath"
end 
```

这绝对没问题。我确定我在这里遗漏了一些明显的东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:18:32.620

看看这个答案：[https](https://stackoverflow.com/a/3104799/1657142) ://stackoverflow.com/a/3104799/1657142 。如链接中所述，request.referer 返回 HTTP 标头中设置的 HTTP_REFERER 值。可能缺少此值。

# visual-studio-2010 - 创建 ADO.NET 实体数据模型时，Entity Framework 4.1 使用 DbContext 自动生成

> ID：12331624
> 
> 赞同：5
> 
> 时间：2012-09-08T14:31:25.643
> 
> 标签：visual-studio-2010, entity-framework-4.1, dbcontext

我想使用 DbContext 而不是 ObjectContext。我更新了 EF，所以现在我有了 DbContext，但我想基于 DbContext 而不是 ObjectContext 生成我的强类型上下文。当我添加新的 ADO.NET 实体数据模型时，它仍然基于 ObjectContext。是否不可能在带有 EF 4.1 的 Visual Studio 2010 中基于 DbContext？

**更新：**

好的，我按照此[链接](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-model-amp-database-first-walkthrough.aspx)中的说明生成了 DbContext 模板对象。但是，现在它说模板实体和我的 .edmx 文件中的实体之间存在歧义。我该如何解决这个问题？我会吹走 .edmx 文件中的那些吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T15:34:09.053

好的，我通过在 .edmx 图表视图中右键单击并选择“添加代码生成项...”然后从选项中选择“EF 4.x DbContext Generator”来实现此目的。它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T12:46:47.053

您可以从现有的 edmx 文件生成 ObjectContext，只需转到 edmx 的属性将“代码生成策略”更改为默认值，然后它会自动生成 ObjectContext。

# linux - 如何在bash中将所有子目录中的所有文件gzip到一个压缩文件中

> ID：12331633
> 
> 赞同：215
> 
> 时间：2012-09-08T14:32:35.440
> 
> 标签：linux, bash, shell, gzip

> **可能重复：**
> [压缩一组目录并创建一个 tar 压缩文件](https://stackoverflow.com/questions/3341131/gzipping-up-a-set-of-directories-and-creating-a-tar-compressed-file)

[这篇文章](https://stackoverflow.com/questions/10363921/how-to-gzip-all-files-in-all-sub-directories-in-bash)描述了如何在一个目录结构中单独压缩每个文件。但是，我需要做一些稍微不同的事情。我需要为某个目录下的所有文件生成一个大的 gzip 文件。我还需要能够为压缩文件（例如files.gz）指定输出文件名并覆盖旧的压缩文件文件（如果已经存在）。

* * *

## 回答 #1

> 赞同：410
> 
> 时间：2012-09-08T14:40:20.523

```
tar -zcvf compressFileName.tar.gz folderToCompress 
```

folderToCompress 中的所有内容都将转到 compressFileName

编辑：经过审查和评论，我意识到人们可能会对没有扩展名的 compressFileName 感到困惑。如果你愿意，你可以使用 .tar.gz 扩展名（如建议）和 compressFileName

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-09-08T17:22:55.387

有很多压缩方法可以在命令行中递归工作，很高兴知道最终受众是谁。

即，如果要将其发送给运行 Windows 的人，那么 zip 可能是最好的：

```
zip -r file.zip folder_to_zip

unzip filenname.zip 
```

对于其他 linux 用户或您自己的 tar 非常棒

```
tar -cvzf filename.tar.gz folder

tar -cvjf filename.tar.bz2 folder  # even more compression

#change the -c to -x to above to extract 
```

必须小心 tar 以及事情是如何被焦油化/提取的，例如，如果我运行

```
cd ~
tar -cvzf passwd.tar.gz /etc/passwd
tar: Removing leading `/' from member names
/etc/passwd

pwd 
```

/home/我的用户名

```
tar -xvzf passwd.tar.gz 
```

这将创建 /home/myusername/etc/passwd

不确定是否所有版本的 tar 都这样做：

```
 Removing leading `/' from member names 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-08T17:22:28.230

@amitchhajer 的帖子适用于 GNU tar。如果有人发现这篇文章并需要它在 NON`GNU`系统上工作，他们可以这样做：

```
tar cvf - folderToCompress | gzip > compressFileName 
```

要扩展存档：

```
zcat compressFileName | tar xvf - 
```

# php - 运行 sql DELETE 查询但不在 DB 中执行的 php 命令

> ID：12331634
> 
> 赞同：1
> 
> 时间：2012-09-08T14:32:38.670
> 
> 标签：php, mysql, html

我在 php 中编写了这个 MYsql DELETE 函数

```
function DeleteProduct($thisCatalog) {

    $connB = new ProductDAO();
    $connB->Connect();
    $pro_query = "DELETE * FROM Ikea WHERE `CatalogNumber` = $thisCatalog";
    $db_result = $connB->ExecSQL($pro_query);

    $html_result = 'Your Product Has Been Deleted! ';

    $connB->Disconnect();
    return $html_result;
} 
```

这是执行表扬

```
DeleteProduct($CatalogNumber); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:36:44.110

删除语法与选择语法不同（您根本不选择列名或`*`在其中使用 a ）：

```
"DELETE FROM Ikea WHERE `CatalogNumber` = $thisCatalog"; 
```

应该做的伎俩。

以及我的测试数据库中的一些示例：

```
mysql> select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    6 | gggg  |
+------+-------+
5 rows in set (0.00 sec)

mysql> insert into first values (7, 'cccc');
Query OK, 1 row affected (0.01 sec)

mysql> select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    6 | gggg  |
|    7 | cccc  |
+------+-------+
6 rows in set (0.00 sec)

mysql> delete from first where id=7;
Query OK, 1 row affected (0.01 sec)

mysql> select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    6 | gggg  |
+------+-------+
5 rows in set (0.00 sec) 
```

# python - 在 django 模板中将分类列表分成几部分

> ID：12331636
> 
> 赞同：0
> 
> 时间：2012-09-08T14:32:51.463
> 
> 标签：python, django

我有这个模型：

```
class Event_Category(models.Model):
    event=models.ForeignKey(Event,related_name='event_category')
    category=models.ForeignKey(Category,related_name='events')
    user=models.ForeignKey(User) 
```

在视图中：

```
magazie_cats=Event_Category.objects.filter(event=instance).order_by('category').distinct()
return render_to_response('CompanyHub/Company/index.html', {'magazie_cats':magazie_cats},context_instance=RequestContext(request)) 
```

在模板中：

```
{% regroup magazie_cats by category as service_list %} 
```

我想将此分类列表分为 3 个部分并对其进行迭代。我试图通过变量索引访问每个类别：

```
 {% for i in range(0,3) %}
       {% for item in service_list.i.list %}
           {{item.event.title}}
       {% endfor %}
    {% endfor %}
    {% for i in range(3,6) %}
       {% for item in service_list.i.list %}
           {{item.event.title}}
       {% endfor %}
    {% endfor %}
    {% for i in range(6,9) %}
       {% for item in service_list.i.list %}
           {{item.event.title}}
       {% endfor %}
    {% endfor %} 
```

**注意：**每个循环的范围是由一些基于 service_list length 的自定义过滤器计算的。我没有包含完整的代码以避免复杂性。

问题是列表变量索引不起作用，我不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:39:32.300

您想使用[切片](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#slice)过滤器：

```
{% regroup magazie_cats by category as service_list %}

{% for cat in service_list|slice:":3" %}
    {% for item in cat.list %}
        {{item.event.title}}
    {% endfor %}
{% endfor %}
{% for cat in service_list|slice:"3:6" %}
    {% for item in cat.list %}
        {{item.event.title}}
    {% endfor %}
{% endfor %}
{% for cat in service_list|slice:"6:9" %}
    {% for item in cat.list %}
        {{item.event.title}}
    {% endfor %}
{% endfor %} 
```

# c# - WriteableBitmapEx Windows Phone dll

> ID：12331641
> 
> 赞同：2
> 
> 时间：2012-09-08T14:33:43.397
> 
> 标签：c#, windows-phone-7, writeablebitmapex

我目前正在尝试使用文档中的此方法使用[WriteableBitmapEx覆盖两个位图：](http://writeablebitmapex.codeplex.com/)

```
writeableBmp.Blit(new Point(10, 10), bitmap, sourceRect, 
        Colors.White,WriteableBitmapExtensions.BlendMode.Additive); 
```

我通过 NuGet 安装了该软件包，它添加了 ...WinPhone.dll 和 WinPhoneXnaDependant.dll 这似乎导致了问题。这是我目前正在编写的代码：

```
WriteableBitmap result = new WriteableBitmap(results, null);
WriteableBitmap overlay = new WriteableBitmap(0, 0).FromResource("Images/VizageOverlay.png");
var cropped = result.Crop(96, 0, 480, 728);
cropped.Blit(new Point(0, 0), overlay, new Point(0,0), 
        WriteableBitmapExtensions.BlendMode.Additive); 
```

但是，错误指出**WriteableBitmapExtensions.BlendMode.Additive** **存在于*上述两个 dll 中。我已经尝试摆脱两者并保留一个，但我需要两者都出现在上面的代码中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:10:17.663

`WinPhoneXnaDependant`如果您没有创建 XNA 项目，请删除对 的引用。

[如果问题仍然存在，请在 Twitter 上](http://twitter.com/rschu)联系作者 René Schulte 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:34:29.980

从来没有见过。重建可能会有所帮助，您只需删除对 XNA 项目的引用即可。WriteableBitmapExWinPhoneXnaDependant.dll 包含与 XNA 相关的代码，例如写入 MediaLibrary。它是分开的，因此 WBX 库可以在禁止使用此类 XNA 代码的后台代理中使用。

# actionscript-3 - 着色器混合模式 + 过滤器 = 透明度问题

> ID：12331642
> 
> 赞同：1
> 
> 时间：2012-09-08T14:33:44.563
> 
> 标签：actionscript-3, flash, shader, pixel-bender

当我使用自定义着色器作为混合模式并应用 BlurFilter 时，会出现黑色边框。没有过滤器它工作正常。

这是一个着色器代码。

```
kernel NewFilter
<   namespace : "my.test";
    vendor : "Im";
    version : 1;
    description : "Invert Luminance Blend Mode";
>
{
    input image4 background;
    input image4 foreground;
    output pixel4 dst;

    void
    evaluatePixel()
    {
        pixel4 bg = sampleNearest(background, outCoord());
        pixel4 fg = sampleNearest(foreground, outCoord());

        float lum = bg.r * 0.299 + bg.g * 0.587 + bg.b * 0.114;

        dst.rgb = fg.rgb + 1.0 - lum;
        dst.a = fg.a;
    }
} 
```

我如何应用着色器和过滤器

```
[Embed(source = "InvertLuminance.pbj", mimeType = "application/octet-stream")]
    var InvertLuminanceClass:Class; 
```

...

```
highlighter = new Sprite();
highlighter.mouseEnabled = false;
highlighter.mouseChildren = false;

var shader:Shader = new Shader(new InvertLuminanceClass());

highlighter.blendShader = shader;
highlighter.blendMode = BlendMode.SHADER;
highlighter.filters = [new BlurFilter(1.9, 1.9, BitmapFilterQuality.HIGH)];

addChild(highlighter); 
```

任何着色器作为混合模式都会出现此问题。有人可以帮我修复这个黑色像素吗？

谢谢！

# android - button.setColorFilter 不起作用

> ID：12331649
> 
> 赞同：2
> 
> 时间：2012-09-08T14:34:08.530
> 
> 标签：android, imagebutton

我有一个代码可以在单击时更改图像按钮的色调。

这是java代码

```
 button.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent me) 
        {
            if (me.getAction() == MotionEvent.ACTION_DOWN) 
            {

                button.setColorFilter(Color.argb(150, 155, 155, 155));

            } 

            else if (me.getAction() == MotionEvent.ACTION_UP) 

            {
                button.setColorFilter(Color.argb(0, 155, 155, 155)); 
                }
            return false;
        }

    }); 
```

该代码在此 xml 上运行良好，单击时按钮变暗。

```
 <ImageButton
    android:id="@+id/schedule"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="138dp"
    android:layout_y="169dp"
    android:src="@drawable/schedule"
    /> 
```

但它不适用于此 xml，单击时按钮不会变暗。

```
 <ImageButton
    android:id="@+id/schedule"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="138dp"
    android:layout_y="169dp"
    android:background="@drawable/schedule"
    /> 
```

为什么如果我使用 android:background setColorFilter 不起作用？但如果我使用 android:src 它工作正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T16:27:52.827

简单的答案是：

*   属性引用View类的`android:background`一个方法，
*   `android:src`指的是ImageView的一个方法，

并且每个类都维护自己的后台资源。因此，当您调用 ImageView 方法时`setColorFilter()`，它会将过滤器应用于其本地背景资源（由 设置的那个`src`），`setColorFilter()`并且不知道由设置的 View 资源`background`。

# python - Python dateutils 根据 iCalendar 格式打印重复规则（参见 RFC 5545）

> ID：12331652
> 
> 赞同：9
> 
> 时间：2012-09-08T14:34:43.263
> 
> 标签：python, python-dateutil, rrule, rfc5545

我正在尝试将重复规则打印为 iCalendar 格式指定的字符串（请参阅[RFC 5545](https://www.rfc-editor.org/rfc/rfc5545)）。我使用 python dateutils，特别是 dateutil.rrule 来创建重复规则，我想将其打印为字符串，如：

```
 "RRULE:FREQ=DAILY;COUNT=5" 
```

谁能告诉我是否有一种方法可以实现这一目标？

我想我正在使用 labix dateutils 顺便说一句。

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T16:25:36.627

包中没有执行此操作的方法或函数`python-dateutil`。请参阅此错误以获取可能有帮助的补丁：[https](https://bugs.launchpad.net/dateutil/+bug/943512) ://bugs.launchpad.net/dateutil/+bug/943512 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-02T17:48:39.627

尽管这是在提出问题四年后编写的，但`dateutil`现在有一种`__str__`方法（参见[源代码](http://dateutil.readthedocs.io/en/stable/_modules/dateutil/rrule.html#rrule)）允许以`print`这种形式访问其对象：

```
In [1]: from dateutil.rrule import *

In [2]: my_rrule = rrule(DAILY, count=5)

In [3]: print(my_rrule)
DTSTART:20161202T184513
FREQ=DAILY;COUNT=5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-04T09:04:26.333

这是一个`rrule`包含两个建议的`python-dateutil`补丁的子类，可以`rrule`输出。请注意，补丁未被接受可能有充分的理由，我仅针对最简单的情况进行了测试。不处理线折叠。

请参阅错误跟踪器进行讨论： [https ://bugs.launchpad.net/dateutil/+bug/943512](https://bugs.launchpad.net/dateutil/+bug/943512)
[https://bugs.launchpad.net/dateutil/+bug/943509](https://bugs.launchpad.net/dateutil/+bug/943509)

```
FREQNAMES = ['YEARLY', 'MONTHLY', 'WEEKLY', 'DAILY', 'HOURLY', 'MINUTELY', 'SECONDLY']

class ConvertibleRRule(rrule.rrule):
    # Subclass of the `rrule class that provides a sensible __str__()
    # method, outputting ical formatted rrules.
    # Combined from the patches in these dateutil issues:
    #  https://bugs.launchpad.net/dateutil/+bug/943512
    #  https://bugs.launchpad.net/dateutil/+bug/943509
    _bysecond_internal = False
    _byminute_internal = False
    _byhour = False
    _bymonth_internal = False
    _bymonthday_internal = False
    _byweekday_internal = False

    def __init__(self, freq, dtstart=None,
                 interval=1, wkst=None, count=None, until=None, bysetpos=None,
                 bymonth=None, bymonthday=None, byyearday=None, byeaster=None,
                 byweekno=None, byweekday=None,
                 byhour=None, byminute=None, bysecond=None,
                 cache=False):
        super(ConvertibleRRule, self).__init__(
            freq, dtstart=dtstart,
            interval=interval, wkst=wkst, count=count, until=until, bysetpos=bysetpos,
            bymonth=bymonth, bymonthday=bymonthday, byyearday=byyearday, byeaster=byeaster,
            byweekno=byweekno, byweekday=byweekday,
            byhour=byhour, byminute=byminute, bysecond=bysecond,
            cache=cache)

        if (byweekno is None and byyearday is None and bymonthday is None and
                    byweekday is None and byeaster is None):
            if freq == rrule.YEARLY:
                if not bymonth:
                    self._bymonth_internal = True
                self._bymonthday_internal = True
            elif freq == rrule.MONTHLY:
                self._bymonthday_internal = True
            elif freq == rrule.WEEKLY:
                self._byweekday_internal = True

        # byhour
        if byhour is None:
            if freq < rrule.HOURLY:
                self._byhour_internal = True

        # byminute
        if byminute is None:
            if freq < rrule.MINUTELY:
                self._byminute_internal = True

        # bysecond
        if bysecond is None:
            if freq < rrule.SECONDLY:
                self._bysecond_internal = True

    freq = property(lambda s: s._freq)
    dtstart = property(lambda s: s._dtstart)
    interval = property(lambda s: s._interval)

    @property
    def wkst(self):
        if self._wkst == rrule.calendar.firstweekday():
            return None
        return rrule.weekday(self._wkst)

    count = property(lambda s: s._count)
    until = property(lambda s: s._until)
    bysetpos = property(lambda s: s._bysetpos)

    @property
    def bymonth(self):
        if self._bymonth_internal:
            return None
        return self._bymonth

    @property
    def bymonthday(self):
        if self._bymonthday_internal:
            return None
        return self._bymonthday + self._bynmonthday

    byyearday = property(lambda s: s._byyearday)
    byeaster = property(lambda s: s._byeaster)
    byweekno = property(lambda s: s._byweekno)

    @property
    def byweekday(self):
        if self._byweekday_internal:
            return None
        bynweekday, byweekday = (), ()
        if self._bynweekday:
            bynweekday = tuple(rrule.weekday(d, n) for d, n in self._bynweekday)
        if self._byweekday:
            byweekday = tuple(rrule.weekday(d) for d in self._byweekday)
        return bynweekday + byweekday

    @property
    def byhour(self):
        if self._byhour_internal:
            return None
        return self._byhour

    @property
    def byminute(self):
        if self._byminute_internal:
            return None
        return self._byminute

    @property
    def bysecond(self):
        if self._bysecond_internal:
            return None
        return self._bysecond

    def __str__(self):
        parts = ['FREQ=' + FREQNAMES[self.freq]]

        if self.interval != 1:
            parts.append('INTERVAL=' + str(self.interval))
        if self.wkst:
            parts.append('WKST=' + str(self.wkst))
        if self.count:
            parts.append('COUNT=' + str(self.count))

        for name, value in [
            ('BYSETPOS', self.bysetpos),
            ('BYMONTH', self.bymonth),
            ('BYMONTHDAY', self.bymonthday),
            ('BYYEARDAY', self.byyearday),
            ('BYWEEKNO', self.byweekno),
            ('BYWEEKDAY', self.byweekday),
            ('BYHOUR', self.byhour),
            ('BYMINUTE', self.byminute),
            ('BYSECOND', self.bysecond),
        ]:
            if value:
                parts.append(name + '=' + ','.join(str(v) for v in value))

        return ';'.join(parts) 
```

# c++ - 函数重载与函数模板 - C++

> ID：12331655
> 
> 赞同：35
> 
> 时间：2012-09-08T14:34:52.177
> 
> 标签：c++, templates, overloading

在有关 C++ 的书籍中，当我们在 C++ 中有可供使用的**模板**时，为什么要教我们使用**函数重载**？

 **展示模板的有效（和正确）使用不是更好吗？与大多数 C++ 书籍中教授函数重载的地方相反？

或者，是否有充分的理由使用其中一个而不是另一个？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-08T14:39:08.733

当您想要对可能不同的类型执行相同的操作时，模板提供了一个优势。一个简单的例子：

```
template <typename T>
T foo(const T& a, const T& b) { return a + b; } 
```

当您想根据类型应用不同的操作时，可以使用重载：

```
struct Foo{ void foo() const {} };

void foo(int i) { std::cout << "i = " << i << "\n"; }
void foo(const Foo& f) { f.foo(); } 
```

您可以使用模板和模板特化来实现上述目的，但是这种特化应该代表一般情况的一些例外情况。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-08T14:46:18.430

模板不能接受不同数量的参数。重载可以。此外，模板表明您可以对任何数据类型进行操作，但实际上，绝大多数模板只是专门化的（在您的系统中），表示这一点是没有意义的。此外，重载可以`virtual`，模板特化不能。专业化的特征也不能与基础不同。

```
template<typename T> void foo(T& t);
template<> void foo<std::string>(std::string* ptr); // Illegal
void foo(std::string* ptr); // Legal 
```

与当前系统相比，这将严重限制您可能产生的过载类型。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-08T14:36:58.697

当您想要对许多不同的数据类型执行相同的操作时，通常会使用模板。

当您想对某些数据集执行不同的操作时，通常会使用函数重载。

在您想要对许多不同的数据类型执行相同的操作集的情况下，模板的优势在于编译器将在编译时为您处理您将来可能创建的使用模板化函数的任何可能的新类型。如果要使用函数重载，则每次创建要传递给特定函数的新类型时都必须创建新的函数重载。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-08T14:52:06.130

只是对 juanchopanza 的回答的补充：

使用函数重载，您还可以改变参数的数量，这很方便。

一个简单的例子，如果你有一些具有以下声明的函数：

```
void foo(int i, int j); 
```

但是您经常使用第一个参数 0 调用 foo，您可以编写以下函数来节省一些输入。

```
void foo(int j) {
  foo(0, j);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-08T14:46:21.270

模板（通常）要求您使用相同的*语法*来对所有（支持的）类型执行操作。

函数重载（或应该）类似地使用，但允许您使用*不同*的语法来执行不同类型的操作。也就是说（尽管您不必这样做）您可以用不同的方式表示这些值。一个明显的例子是在 C 库中被调用`atan`的内容。`atan2`使用`atan`，我们传递“上升到“运行”的比率，并返回该比率所代表的角度。`atan2`我们传递上升的值并分别运行（计算大致相同的结果，但因为它稍微给出更多的输入数据，也可以产生更完整的结果）。

尽管这些在 C 中实现为完全独立的函数，但如果它们从一开始就用 C++ 编写，则完全适合对`atan`一个参数和两个参数使用重载的单个名称（例如，）：

```
double atan(double);           // equivalent to current atan
double atan(double, double);   // equivalent to current atan2 
```

模板（缺乏专业化，几乎只是覆盖模板本身提供的内容）不提供这样的调用语法差异。

重载也受到更多限制——您为要支持的每种特定类型提供一个重载（尽管如果您采用指针或引用，它们也可以支持派生类型）。使用模板，单个模板可以（至少可能）适用于*任何*类型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-30T08:23:11.220

所以两者**`overloading`**各有千秋**`template`**。

关于它们的一行**`difference`**是：

**`overloading`**当我们有各种功能，做**`SIMILAR`**操作时使用。

**`template`**当我们有各种功能，做**`IDENTICAL`** 操作时使用。

**`There is very big differnce between "SIMILAR" and "IDENTICAL".`****

# java - 将电话号码存储为字符串时如何防止输入错误？

> ID：12331656
> 
> 赞同：4
> 
> 时间：2012-09-08T14:35:00.510
> 
> 标签：java, string, validation, integer, vcf-vcard

我正在创建一个可以读取 VCard 的电话簿程序。问题在于电话号码。通常，他们在美国会是这样的：

`0771234560`

但如果电话号码来自国外，它看起来像这样。

`+94771234560`或许`(22)772324000`

现在有`+`和`()`迹象要处理！我目前正在将电话号码（VCards 包含它们作为字符串）转换为数字。但是，如果我将允许电话号码作为字符串，那么用户可能会做一些疯狂的事情，例如在联系表单中插入姓名作为电话号码。

如何将电话号码存储为字符串但防止出现有问题的条目？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T14:37:20.557

绝对使用字符串，但要验证它。仅仅因为它是一个字符串并不意味着您必须接受*任何*数据。您应该考虑使用正则表达式（或者可能是一系列正则表达式）来验证数据。

不要只将其限制为特定字符 - 例如，您不想接受“）0（”作为电话号码 - 使用合理的模式。[关于电话号码本地约定的维基百科页面](http://en.wikipedia.org/wiki/Local_conventions_for_writing_telephone_numbers)可能在这方面有所帮助 -或者您可以寻找其他来源。您可能还需要*考虑*宽容一些，因为并非每个人都会遵循确切的模式。不过需要达到一个微妙的平衡。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T14:37:26.303

不要对电话号码使用数字类型，坚持使用`String`.

进行某种形式的输入验证。为您的电话号码定义一些限制，并在读取卡片时检查`String`您的格式：如果电话号码不符合您的限制，则拒绝它。

在此站点周围搜索有关电话号码验证的问题/答案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-08T14:38:52.160

添加两个电话号码意味着什么？所以，IMO，不是一个数字。

您仍然应该尝试验证，但如果您想接受任何和所有任意的国际号码，包括当地的书写方式约定，那将是令人沮丧的。

# iphone - 如何忽略@2x 图像

> ID：12331657
> 
> 赞同：0
> 
> 时间：2012-09-08T14:35:00.723
> 
> 标签：iphone, objective-c, ios, ipad

我有以下代码来用图像填充数组：

```
NSString *fileName;
    myArray = [[NSMutableArray alloc] init];
    for(int i = 1; i < 285; i++) {
        fileName = [NSString stringWithFormat:@"Animation HD1.2 png sequence/HD1.2_%d.png", i];
        [myArray addObject:[UIImage imageNamed:fileName]];
        NSLog(@"Loaded image: %d", i);
    } 
```

在我的资源文件夹中，我有每个这些图像的@2x 版本。有没有办法（以编程方式）我可以忽略视网膜设备上的@2x 图像并用非@2x 图像填充阵列？

**编辑1：**

我编辑了我的代码以使用`NSData`：

```
 myArray = [[NSMutableArray alloc] init];
    for(int i = 1; i < 285; i++) {
        fileName = [NSString stringWithFormat:@"Animation HD1.2 png sequence/HD1.2_%d.png", i];
        NSData *fileData = [NSData dataWithContentsOfFile:fileName];
        UIImage *regularImage = [UIImage imageWithData:fileData];
        [myArray addObject:regularImage];
    }

falling.animationImages = MYArray; 
```

这使我的应用程序因错误而崩溃：`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'`。我使用 NSData 对象错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:51:48.543

我相信这个问题相当于“我如何绕过自动@2x 图像加载？”

你需要走一条它无法走的路。`NSData dataWithContentsOfFile:options:error:`您可以使用to传递每个文件的内容`UIImage imageWithData:`这样，`imageWithData`不知道数据来自哪里，更不用说有 2x 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:03:54.280

我认为 NSData 技术应该可以工作，但你需要从你的包中获取路径，你不能只将文件名作为这样的字符串给出。

尝试：

```
filename = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"Animation HD1.2 png sequence/HD1.2_%d.png", i] ofType:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T14:47:50.733

尝试这个...

```
//This string will have @"@2x.png"

NSString *verificationString = [myString substringFromIndex:[myString length] - 7];
if(![verificationString isEqualToString:@"@2x.png"]) 
{
    //NOT EQUAL...
} 
```

# c# - 如何修复此 IndexOutOfBoundsException

> ID：12331662
> 
> 赞同：0
> 
> 时间：2012-09-08T14:36:05.457
> 
> 标签：c#

我的程序运行良好，但有一个小问题。当我将新曲目以前存在的文件添加到 ListBox 时，程序遇到错误。代码似乎不愿意在不同时间添加的新文件中循环。请帮我。谢谢 ....

```
public partial class Form1 : Form
{
    //...

    string[] files, paths;

    private void button1_Click(object sender, EventArgs e)
    {
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            files = openFileDialog1.SafeFileNames;
            paths = openFileDialog1.FileNames;
            for (int i = 0; i < files.Length - 1; i++)
            {
                listBox1.Items.Add(files[i]);
            }
        }
    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        axWindowsMediaPlayer1.URL = paths[listBox1.SelectedIndex];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:40:03.100

Adil 已经找到了问题的原因，但有一个更清洁的解决方案：

```
foreach (string file in files)
{
    listBox1.Items.Add(file);
} 
```

...甚至更好：

```
listBox1.Items.AddRange(files); 
```

`files`事实上，我会更进一步，彻底摆脱实例变量`paths`。`Tuple<string, string>`我会为文件/类对使用或创建一个类。然后您可以将每个*完整的数据项*添加到`listBox1.Items`，设置`DisplayMember`以便`file`显示部分，但是当所选索引更改时，从所选项目中获取*路径。*那么根本就没有必要搞乱索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T14:38:49.940

您添加的文件少于文件的存在，当您访问最后一个文件时

改变

```
for (int i = 0; i < files.Length - 1; i++)
{
     listBox1.Items.Add(files[i]);
} 
```

至

```
for (int i = 0; i < files.Length; i++)
{
     listBox1.Items.Add(files[i]);
} 
```

**根据OP的评论进行编辑**

您可能会通过单击 button1 在列表框中多次添加文件。这将在列表框中添加新文件，但数组将丢失数组中以前的项目，并且数组中的计数将变得少于列表框中的项目。

```
private void button1_Click(object sender, EventArgs e)
{
     listBox1.Items.Clear(); //Clear the items of list box to keep the same items in both listbox and in array paths. 
     if (openFileDialog1.ShowDialog() == DialogResult.OK)
     {
         files = openFileDialog1.SafeFileNames;
         paths = openFileDialog1.FileNames;
         for (int i = 0; i < files.Length ; i++)
         {
              listBox1.Items.Add(files[i]);
         }
      }          
} 
```

如果要保留先前的选择，请使用列表而不是数组，因为列表比数组更容易增长。

```
string[] files;
List<string>  paths = new List<string>() ;
private void button1_Click(object sender, EventArgs e)
{          
     if (openFileDialog1.ShowDialog() == DialogResult.OK)
     {
         files = openFileDialog1.SafeFileNames;
         paths.AddRange(openFileDialog1.FileNames.ToList());
         for (int i = 0; i < files.Length; i++)
         {
             listBox1.Items.Add(files[i]);
         }
     }          
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T15:34:55.160

我认为 Jon 和 Adil 都是绝对正确的，您绝对可以使用他们的代码来解决部分问题。但是，我的猜测是您没有任何元素`paths`，因此当您尝试从中获取元素时，它会抛出异常。你可以试试下面的代码：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (paths.Length >= listBox1.SelectedIndex)
        axWindowsMediaPlayer1.URL = paths[listBox1.SelectedIndex];
} 
```

看看你是否仍然抛出异常，如果没有，那么你还有另一个问题，为什么你的`paths`变量没有被设置，或者为什么列表框选择的索引大于变量中的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T15:38:15.580

我认为问题不在于向数组中添加项目。更可能的原因是 SelectedIndexChanged 事件处理程序。您应该检查 SelectedIndex 以确保它有效。

```
int idx = listBox1.SelectedIndex;
if (paths != null && idx > 0 && idx < paths.Length)
{
    axWindowsMediaPlayer1.URL = paths[idx]; 
} 
```

# node.js - node-postgres：如何在不执行查询的情况下准备语句？

> ID：12331668
> 
> 赞同：7
> 
> 时间：2012-09-08T14:36:41.827
> 
> 标签：node.js, node-postgres

我想使用 node-postgres 模块在 postgres 中创建一个“准备好的语句”。我想创建它而不将其绑定到参数，因为绑定将在循环中进行。

在我阅读的[文档中：](https://github.com/brianc/node-postgres/wiki/Client#method-query-prepared)

```
query(object config, optional function callback) : Query
If _text_ and _name_ are provided within the config, the query will result in the creation of a prepared statement. 
```

我试过

```
client.query({"name":"mystatement", "text":"select id from mytable where id=$1"}); 
```

但是当我尝试只传递配置对象中的文本和名称键时，我得到一个异常：

（翻译）消息绑定 0 个参数，但准备好的语句需要 1

有什么我想念的吗？如何在不将其绑定到特定值的情况下创建/准备语句以避免在循环的每个步骤中重新准备语句？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T18:54:23.673

我刚刚找到了node-postgres 的作者[关于这个问题的答案。](https://github.com/brianc/node-postgres/issues/24)

> 使用 node-postgres 第一次发出命名查询时，它会被一次性解析、绑定和执行。在同一连接上发出的具有相同名称的每个后续查询将自动跳过“解析”步骤，仅重新绑定并执行已计划的查询。
> 
> 目前 node-postgres 不支持创建命名的、准备好的查询而不执行查询的方法。此功能在 libpq 和客户端/服务器协议（由纯 javascript 绑定使用）中受支持，但我没有直接在 API 中公开它。我认为这会增加 API 的复杂性而没有任何真正的好处。由于命名语句绑定到创建它们的客户端，因此如果客户端断开连接并重新连接或从客户端池返回不同的客户端，则命名语句将不再起作用（它需要重新解析）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-28T22:29:59.893

您可以为此使用[pg-prepared](https://www.npmjs.com/package/pg-prepared)：

```
var prep = require('pg-prepared')

// First prepare statement without binding parameters
var item = prep('select id from mytable where id=${id}')

// Then execute the query and bind parameters in loop
for (i in [1,2,3]) {
  client.query(item({id: i}), function(err, result) {...})
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T15:56:28.903

更新：再次阅读您的问题，这就是我认为您需要做的。您还需要传递一个“值”数组。

只是为了澄清；您通常会“准备”您的查询，只需准备您传递给它的对象，而不需要值数组。然后在您通常“执行”查询的地方，在对象中设置值数组并将其传递给查询。如果是第一次，驱动程序将在第一时间为您做实际的准备，并为其余的迭代做简单的绑定和执行。

# mysql - 在休眠中查询

> ID：12331671
> 
> 赞同：0
> 
> 时间：2012-09-08T14:36:59.947
> 
> 标签：mysql, sql, hibernate, jax-rs

我正在使用休眠将数据映射到我在 Restful Web 服务中的 mysql 数据库（使用球衣）。

这是我的活动课：

```
@Entity
public class Activity {

    private static final long serialVersionUID = 4937176332500551910L;

    @Id
    @GeneratedValue
    private long id;

    @Column(name = "short", unique = true, nullable = false)
    private String key;

    private String name;

    private String description;

    private float cost;

    private int orderIndex = 0;

    @ManyToOne(fetch = FetchType.LAZY)
    private Activity parent;

    @OneToMany(targetEntity = Activity.class, mappedBy = "parent", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JsonIgnore
    private Collection<Activity> children;

    @OneToMany(targetEntity = Project.class, mappedBy = "category", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JsonIgnore
    private Collection<Project> projects;

    @OneToMany(targetEntity = Task.class, mappedBy = "activity",  fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JsonIgnore
    private Collection<Task> tasks; 
```

此查询完美运行：

```
activities = session.createQuery("from Activity").list(); 
```

Json 数组的结果是：

```
[{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null},{"id":101,"key":"c","name":"Consulting","description":"Just in special cases, authorized by Rüdiger after discussion with customer.","cost":990.0,"orderIndex":3,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},{"id":102,"key":"d","name":"Development","description":"Usually this.","cost":690.0,"orderIndex":2,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},{"id":103,"key":"sales","name":"Sales","description":"Sales related activities","cost":0.0,"orderIndex":2,"parent":null},{"id":104,"key":"doit","name":"Genomför arbeten","description":"","cost":690.0,"orderIndex":1,"parent":{"id":103,"key":"sales","name":"Sales","description":"Sales related activities","cost":0.0,"orderIndex":2,"parent":null}},{"id":105,"key":"t","name":"Traveling","description":"Travel time","cost":300.0,"orderIndex":4,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}},{"id":106,"key":"uni","name":"University Job","description":"Activities at university","cost":690.0,"orderIndex":3,"parent":null},{"id":107,"key":"work","name":"work","description":"One rate for everything: teaching, preparing, administration, meetings, etc.","cost":690.0,"orderIndex":1,"parent":{"id":106,"key":"uni","name":"University Job","description":"Activities at university","cost":690.0,"orderIndex":3,"parent":null}},{"id":108,"key":"v","name":"Vacation/Holidays","description":"Planned vacation (counting agains the 25 days)","cost":300.0,"orderIndex":5,"parent":{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}}] 
```

此查询也有效：

```
activities = session.createQuery("from Activity where id=100").list(); 
```

结果是：

```
[{"id":100,"key":"scrum","name":"Scrum","description":"","cost":0.0,"orderIndex":1,"parent":null}] 
```

`scrum`如您所见，活动是父母。

但此查询不起作用：

```
activities = session.createQuery("from Activity where id=101").list(); 
```

因为 id=101 的 Activity 是一种 Child Activity。

我收到了这个错误：

```
<html><head><title>Apache Tomcat/7.0.23 - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 500 - </h1><HR size="1" noshade="noshade"><p><b>type</b> Exception report</p><p><b>message</b> <u></u></p><p><b>description</b> <u>The server encountered an internal error () that prevented it from fulfilling this request.</u></p><p><b>exception</b> <pre>org.codehaus.jackson.map.JsonMappingException: could not initialize proxy - no Session (through reference chain: java.util.ArrayList[0]-&gt;se.softwerk.timelog.model.Activity[&quot;parent&quot;]-&gt;se.softwerk.timelog.model.Activity_$$_javassist_3[&quot;id&quot;])
    org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:218)
    org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:183)
    org.codehaus.jackson.map.ser.std.SerializerBase.wrapAndThrow(SerializerBase.java:140)
    org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:158)
    org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
    org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446)
    org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
    org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
    org.codehaus.jackson.map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:122)
    org.codehaus.jackson.map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:71)
    org.codehaus.jackson.map.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:86)
    org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:610)
    org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:256)
    org.codehaus.jackson.map.ObjectMapper.writeValue(ObjectMapper.java:1604)
    org.codehaus.jackson.jaxrs.JacksonJsonProvider.writeTo(JacksonJsonProvider.java:558)
    com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.writeTo(JacksonProviderProxy.java:160)
    com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
</pre></p><p><b>root cause</b> <pre>org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:149)
    org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:195)
    org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185)
    se.softwerk.timelog.model.Activity_$$_javassist_3.getId(Activity_$$_javassist_3.java)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    org.codehaus.jackson.map.ser.BeanPropertyWriter.get(BeanPropertyWriter.java:483)
    org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:418)
    org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
    org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
    org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446)
    org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
    org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
    org.codehaus.jackson.map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:122)
    org.codehaus.jackson.map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:71)
    org.codehaus.jackson.map.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:86)
    org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:610)
    org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:256)
    org.codehaus.jackson.map.ObjectMapper.writeValue(ObjectMapper.java:1604)
    org.codehaus.jackson.jaxrs.JacksonJsonProvider.writeTo(JacksonJsonProvider.java:558)
    com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.writeTo(JacksonProviderProxy.java:160)
    com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
</pre></p><p><b>note</b> <u>The full stack trace of the root cause is available in the Apache Tomcat/7.0.23 logs.</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/7.0.23</h3></body></html> 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:42:30.403

这

```
PermGen space 
```

说：重新启动你的Tomcat。您可能经常重新部署您的 WAR。这会导致 PermGen 空间被用完。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:01:20.700

我找到了答案。问题在这里：

```
@ManyToOne(fetch = FetchType.LAZY)
private Activity parent; 
```

我只是需要使用`FetchType.EAGER`或删除它。

# opencv - 用于视频的免费人脸检测算法

> ID：12331674
> 
> 赞同：3
> 
> 时间：2012-09-08T14:37:46.610
> 
> 标签：opencv, machine-learning

我正在开发一个需要检测视频流中人脸位置的应用程序，该应用程序使用放置在桌面高度的网络摄像头（稍微偏离用户一侧）。

我已经实现了一个版本的[OpenCV](http://opencv.org/)（使用他们的 Haar 检测），它工作正常......问题是如果用户将头转向一边（或抬头），它往往会丢失面部的位置。

由于网络摄像头位于桌面上，因此它以 30 度角向上倾斜。OpenCV 检测算法是使用完全正面的图像进行训练的，而不是像我使用的那样的上角图像。我知道 OpenCV 也有一个可以使用的配置文件 Haar 文件。但从我的研究看来，配置文件检测的结果参差不齐。此外，我并不能真正控制图像的背景或照明......所以这有时也会影响 OpenCV 检测算法的功效。

所以，我想我要问的是......是否有其他人脸检测算法（希望是免费的，因为这是我大学研究的一部分）更适合检测这种设置的人脸？似乎某些内置网络摄像头（用于 Mac 和 PC）实际上具有相当强大的算法来检测面部（然后在面部上覆盖俗气的卡通图像）......但无论背景或照明如何，它们似乎都能正常工作。你有什么建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:30:11.880

出于研究目的，您可以在 OpenCV 中使用 Haar 级联，如果您想商业化，情况会有所不同（在这种情况下，您需要考虑 LBP 级联）。请务必在参考文献中引用 Viola-Jones 的论文。

要改善人脸检测的结果，您有几种途径：

*   单个图像检测：您可以将旋转图像发送到正面级联以解决一些可变性，而无需训练自己的级联
*   单个图像检测但更多工作）：在更接近应用程序的操作条件下训练您自己的级联
*   视频流的稳定性（如网络摄像头等）：这是通过在人脸检测周围添加一层跟踪来实现的。根据您对该主题的了解，您可以使用自己的过滤器，享受 OpenCV 的粒子或卡尔曼过滤器的乐趣，在人脸位置上实现简单的一阶或二阶低通滤波器或在检测到的人脸上实现 PID 跟踪器......

在处理视频流时，这些跟踪过滤器中的任何一个都会大大增强您的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T13:12:27.873

使用[CLM 框架](https://github.com/TadasBaltrusaitis/CLM-framework)进行准确的实时人脸检测和人脸地标检测。系统运行示例：http: [//youtu.be/V7rV0uy7heQ](http://youtu.be/V7rV0uy7heQ)

您可能会发现它很有用。

# c# - 如何在动态 CSharpCodeProvider 脚本中添加对 Outlook VSTO 的引用

> ID：12331678
> 
> 赞同：2
> 
> 时间：2012-09-08T14:38:29.563
> 
> 标签：c#, reference, outlook, vsto, csharpcodeprovider

我正在尝试使用 xml 文件来确定应将哪些 Outlook 属性包含在通过 VSTO 插件代码执行的工作流中。

例子

xml 可能会声明工作流需要`Subject`当前`Outlook.MailItem`的。我无法使用反射来`Subject`使用其字符串名称“Subject”获取属性，因为它`MailItem`是一个接口而不是一个类。

我认为解决方案可能是创建和编译动态 C# 代码，按名称返回所需的属性......

**问题**：我一直无法弄清楚如何找到正在运行的 Microsoft.Office.Interop.Outlook.dll 的位置，以便将其添加为对动态编译器的引用。我尝试了许多组合，最后的努力如下所示。

```
CodeDomProvider provider = new Microsoft.CSharp.CSharpCodeProvider();
CompilerParameters parameters = new CompilerParameters();
parameters.GenerateExecutable = false;
parameters.GenerateInMemory = true;
parameters.IncludeDebugInformation = false;
parameters.ReferencedAssemblies.Add(Assembly.GetAssembly(typeof(Outlook.MailItem)).Location); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:20:43.283

```
parameters.ReferencedAssemblies.Add("Microsoft.Office.Interop.Outlook.dll"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:39:05.923

我现在有了答案。abatishchev 让我有信心知道应该做什么，所以我尝试将 office dll 的编译器包含路径设置为`CompilerOptions`.

我仍然需要弄清楚如何为当前版本的 Outlook 获取这条路径，但这听起来并不难，否则我可能会为此提出一个新问题:)

这是有效的代码。

```
 parameters.ReferencedAssemblies.Add("Microsoft.Office.Interop.Outlook.dll"); 
  parameters.CompilerOptions = "/lib:\"C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Visual Studio Tools for Office\\PIA\\Office14\"";` 
```

感谢 abatishchev 的所有帮助

**更新： Outlook 插件使用导致此问题的嵌入式互操作程序集。所以不可能从加载的程序集中确定 office dll 的位置。/lib 路径需要通过其他方式解析。**

# android - 安卓admob id

> ID：12331679
> 
> 赞同：2
> 
> 时间：2012-09-08T14:38:33.610
> 
> 标签：android, admob

我对 android 应用程序开发非常陌生，最后我几乎完成了一个应用程序，现在我正在尝试将 admob 添加到应用程序中，以便在下方显示广告。

我已经安装了 GoogleAdMobAdsSdkAndroid.zip 版本 6.1.0 并从谷歌下载了示例[https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals?hl=zh-CN](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals?hl=zh-CN)并且有一个线

```
adView = new AdView(this, AdSize.BANNER, AD_UNIT_ID_GOES_HERE); 
```

突出显示了错误 AD_UNIT_ID_GOES_HERE。

1.  是我必须通过注册并获得一个 admob 帐户来替换上述 AD_UNIT_ID_GOES_HERE 吗？我还没有注册任何admob帐户。
2.  如果我没有真正的 admob 帐户，那是不是就无法测试和预览广告？在我真正注册一个真实的 ID 之前，是否有任何 ID 仅用于测试目的？

java代码完全从上述谷歌网站复制并粘贴如下。android manifest 和 xml 也与 google 示例中的相同。

```
package com.google.example.ads.fundamentals;

import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;

/**
 * A simple {@link Activity} that embeds an AdView.
 */
public class BannerSample extends Activity {
/** The view to show the ad. */
  private AdView adView;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create an ad.
    adView = new AdView(this, AdSize.BANNER, AD_UNIT_ID_GOES_HERE);

    // Add the AdView to the view hierarchy. The view will have no size
    // until the ad is loaded.
    LinearLayout layout = (LinearLayout) findViewById(R.id.linearLayout);
    layout.addView(adView);

    // Create an ad request. Check logcat output for the hashed device ID to
    // get test ads on a physical device.
    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

    // Start loading the ad in the background.
    adView.loadAd(adRequest);
  }

  /** Called before the activity is destroyed. */
  @Override
  public void onDestroy() {
    // Destroy the AdView.
    if (adView != null) {
      adView.destroy();
    }

    super.onDestroy();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:01:12.877

自己开个账号就行了。免费！

如果没有发布商 ID，您将无法展示广告。

![在此处输入图像描述](../Images/37c956e09946b8b2c4f8a7c0d31b5cb2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T11:44:57.347

使用此 adunit id 测试广告：adUnitId="a15391a0507f390"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-27T06:26:37.877

对于**AppID**在新的 Admob 设计中。你可以进去`View setup instructions`。

[![在此处输入图像描述](../Images/7994b1dd5b05bc305b83fe7d8ff7fc88.png)](https://i.stack.imgur.com/QPkSB.png)

# transactions - 确保 riak 的正确性？

> ID：12331686
> 
> 赞同：5
> 
> 时间：2012-09-08T14:39:27.267
> 
> 标签：transactions, riak

看来您不能在 riak 中进行交易。如何确保数据正确？

假设我们要插入评论。在redis我会做

```
commentId=incr commentCount
multi
SET comment_post:commentId postId //for later use when we flag comments. We'll need to know where in the db it is
RPUSH post_comment:postId binaryValue //contains commentId in it + comment body
exec 
```

在 sql 中，我会在带有文本和帖子 ID 的评论表中插入一个新行。两者都使用不止一个语句。我如何插入评论正文并将帖子与 riak 中的评论相关联，因为它没有交易？

另一个问题是如果我修改帖子。如何更新帖子并使用该标签更新帖子的标签列表

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T17:56:09.243

Riak 是一个最终一致的系统，设计为可写，没有原子性的概念；没有~~原子计数器或~~事务。

**编辑：**我们在 Riak 1.4 中发布了使用 CRDT 的计数器。有关详细信息，请参阅[Riak 1.4 中的计数器](http://basho.com/counters-in-riak-1-4/)

Riak 使用的方法基于 Amazon Dynamo 论文，并使用矢量时钟来解决冲突；这是一个读取/修改/写入周期，在后续读取期间执行任何冲突解决。在任何给定时间，您都可以为给定键设置多个值，这些值在进行提取时都会返回。

听起来您想查看我们的*二级*[索引](http://wiki.basho.com/Secondary-Indexes.html)（如果我理解您的情况；您需要一个新`commentId`的“喜欢”这一事实在不了解更多信息的情况下有点令人困惑）。您将创建一个二级索引，指向您的评论正文，当您进行存储时，该索引与正文本身一起发送。这至少解决了一半的问题。

你如何得到你`commentId`的有点棘手。您不能使用全局原子计数器，因为我们没有它们。您的设计需要不依赖于顺序 ID（可能生成 UUID？）并且可能使用我们的[链接](http://wiki.basho.com/Links.html)？

如果您有兴趣并想讨论可能的设计方法，请在[riak-users 邮件列表](http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com)上联系我们 - 我们所有的工程师都阅读了它并且总是很乐意回答问题。

# html - 验证编码的 facebook url

> ID：12331687
> 
> 赞同：0
> 
> 时间：2012-09-08T14:39:28.697
> 
> 标签：html, facebook, xhtml, w3c-validation, xhtml-transitional

DTD XHTML 1.0 过渡文档包含以下链接到 facebook 页面的编码 URL 示例

`https://www.facebook.com/login.php?api_key=//////////////&skip_api_login=1&display=popup&social_plugin=like&external_page_url=http%3A%2F%2Fwww.facebook.com%2Fpages%2FSome-Name%2F237492089634567&next=http%3A%2F%2Fwww.facebook.com%2Fconnect%2Fuiserver.php%3F ethod%3Dopt.inlike%26app_id%3D127760087287645%26display%3Dpopup%26social_plugin%3Dlike%26secure%3Dfalse%26protocol%3Dhttp%253A%26external_page_url%3Dhttp%253A%252F%252Fwww.facebook.com%252Fpages%252FSome-Name%252F567892089644210%26from_login%3D1%26client_id%3D12773257237610&rcount=1`

未经 W3C 等服务提供商提供的 html 验证工具验证

我在[验证 Facebook 页面 URL 上阅读了一篇文章](https://stackoverflow.com/questions/4175081/validate-a-facebook-page-url)

我是否应该遵循此指南来验证链接？

是否有其他替代方案可用于相同目的？

# java - 在Java中，如何区分实现相同接口的类？

> ID：12331689
> 
> 赞同：3
> 
> 时间：2012-09-08T14:39:39.227
> 
> 标签：java, generics, interface

假设我们有以下界面：

```
interface Addable {
    Addable add (Addable element);
} 
```

现在我想声明两个类，比如说`MyList`实现`MyArray`上面的接口。我该如何做到这一点，但要防止将`MyArray`对象添加到 a 中`MyList`，反之亦然？

有没有办法在没有`if`声明的情况下做到这一点`instanceof`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:50:56.340

如何将您的接口定义更改为以下内容：

```
 interface Addable<T extends Addable.Element> {
        interface Element { }

        Element add(T element); // OR T add(T element);
    }

    class MyList implements Addable<MyList.MyListElement> {

        static class MyListElement implements Addable.Element { }

        @Override
        public Element add(MyListElement element) {
            return null;
        }
    }

    class MyArray implements Addable<MyArray.MyArrayElement> {
        static class MyArrayElement implements Addable.Element { }

        @Override
        public Element add(MyArrayElement element) {
            return null;
        }
    }

    public static void main(String[] arg) {
        MyArray myArray = new MyArray();
        MyArrayElement a = new MyArrayElement();
        myArray.add(a);

        MyList myList = new MyList();
        MyListElement l = new MyListElement();
        myList.add(l);

        //try to add a MyArrayElement to a MyList
        // Error The method add(MyListElement) in the type MyList
        // is not applicable for the arguments (MyArrayElement)
        myList.add(e);

        //try to add a MyListElement to a MyArray
        // Error The method add(MyArrayElement) in the type MyArray
        // is not applicable for the arguments (MyListElement)
        myArray.add(l);
    } 
```

下面引用的[维基百科条目](http://en.wikipedia.org/wiki/Generics_in_Java)解释了为什么这样做：

> 泛型是一种泛型编程工具，于 2004 年作为 J2SE 5.0 的一部分添加到 Java 编程语言中。它们允许“一种类型或方法在提供编译时类型安全的同时对各种类型的对象进行操作”。[1](http://en.wikipedia.org/wiki/Generics_in_Java)此功能的一个常见用途是在使用可以保存任何类型对象的 Java 集合时，指定存储在其中的对象的特定类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T14:54:23.220

```
interface Addable<T extends Addable<T>> {
    T add (T element);
}

class MyList  implements Addable<MyList> {
    public MyList add(MyList element) {
        return null;
    }
}

class MyArray   implements Addable<MyArray> {
    public MyArray add(MyArray element) {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T15:04:07.753

您确实需要了解**Java 泛型**。

问：对于 Java，您如何防止这种情况发生`ArrayList`？

答：通过使用`ArrayList<MyArray>`vs. `ArrayList<MyList>`。

这与您希望在这里拥有的*相同：*

```
interface Addable<T> {
    T add (T element);
} 
```

然后让你的类实现`Addable<MyList>`和`Addable<MyArray>`.

对于 MyList 您必须实现该方法

```
MyList add(MyList element); 
```

而对于 MyArray 它看起来像这样：

```
MyArray add(MyArray element); 
```

如您所见，您不能将 MyList 添加到 MyArray，反之亦然。

# html - 当内容为动态时，将页脚粘贴到页面底部

> ID：12331690
> 
> 赞同：2
> 
> 时间：2012-09-08T14:39:39.673
> 
> 标签：html, css

我有两页包含页脚的 html。我想在两个页面中将页脚粘贴到页面底部。当页面没有垂直滚动但内容很多并且页面有滚动页脚站在我的内容上时，它可以正常工作。这是我的页面布局：

```
<body>
    <div id="container">
        <div id="header"> Header </div>
        <div id="menu"> Menu </div>        
        <div id="content"> Content </div>
        <div id="footer"> Footer </div>                
    </div>
</body> 
```

这是我的CSS：

```
html, body
{
    width:100%;
    margin:0;
} 

#header, #menu, #content, #footer
{
    border:thin solid #000;
}

#content
{
    width:70%;
    margin: 0 auto;
    height:100%;
}

#footer
{
    position:absolute;
    bottom:0;
    width:100%;
    background-color:#06F;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:02:14.230

更改您的 CSS，例如；

```
#footer{
    width:100%;
    background-color:#06F;
} 
```

**[这](http://jsfiddle.net/blasteralfred/FwenF/)**是一个有效的现场演示。

如果您希望页脚粘在底部，无论内容是什么，都可以尝试；

```
#footer{
    width:100%;
    background-color:#06F;
    bottom:0;
    position: fixed;
} 
```

但是为您的页脚定义 a`height`并在您的内容中添加相同数量的`padding-bottom`，否则某些文本可能会被页脚隐藏

**[这](http://jsfiddle.net/blasteralfred/FwenF/1/)**是一个有效的现场演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:45:55.273

你可以试试这个

```
#footer {
   background-color: #0066FF;
   width: 100%;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T14:58:50.500

```
#footer {background-color: #0066FF;bottom: 0;position: absolute;width: 100%;bottom:0px;}
        body,html {height:100%} 
```

通过这种方式，您将获得输出

# asp.net - FormView 中的多个实体

> ID：12331692
> 
> 赞同：0
> 
> 时间：2012-09-08T14:39:58.647
> 
> 标签：asp.net, entity-framework, formview

使用 ASP.net 实体框架。我的数据库中的两个实体之间存在关联（一个-> 多个）。现在我只使用此代码将第一个实体数据返回到网页。我怎样才能返回实体和它的关联？

服务器端

```
public IQueryable<Exercise> GetExercise([QueryString("exerciseID")]int? exerciseID)
    {

        IQueryable<Exercise> query = null;

        var context = new TrainingModelContainer();
        if (exerciseID.HasValue && exerciseID > 0)
        { 
        query = from e in context.ExerciseSet where e.Id == exerciseID select e;  
        }

        return query;
    } 
```

网络

```
<asp:FormView ID="exerciseView" runat="server" ItemType="WebApplication1.Exercise" SelectMethod="GetExercise" RenderOuterTable="false">
        <ItemTemplate>
            <div>
                <p><%#:Item.Description %></p>
                <p><%#:Item.Date%></p>
            </div>
        </ItemTemplate>
    </asp:FormView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:38:26.243

简短的回答是您可能需要以下[`Include`](http://msdn.microsoft.com/en-us/library/bb738708.aspx)方法：

```
 context.ExerciseSet.Include("Associatives") where e.Id .... 
```

更长的答案（对您而言）是最好使用视图模型，它使您能够准确定义发送给客户端的内容。在大多数情况下，这样的模型可以简单地由 linq 查询的投影填充：

```
 ... select new ExerciseSetModel { Property1 = e.Property1, Property2 = ... } 
```

# javascript - 如何将权限/授权数据传递给客户端 Javascript？

> ID：12331693
> 
> 赞同：5
> 
> 时间：2012-09-08T14:39:59.823
> 
> 标签：javascript, ajax, rest, authorization

我有一个几乎完全呈现客户端的 javascript Web 应用程序。数据通过 REST 接口使用模型在客户端和服务器之间交换，然后使用客户端模板呈现。

我现在需要根据用户角色/权限（授权是基于服务器端模型的 ACL）有条件地渲染 UI 的某些部分（或执行某些操作）。

考虑到以下几点，将**权限数据从服务器传送到客户端**的最佳方式是什么：

1.  交换的模型可能有其他嵌入式模型，并获得他们的特定许可
2.  我还需要知道不同模型的 READ 和 CREATE 权限（因此模型对象在客户端尚不可用）
3.  应尽量减少 REST 调用和 DB 调用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:19:57.480

您的客户端应根据服务器基于每个请求返回的信息向用户提供控件。如果来自服务器的响应包含一些旨在用于执行操作的信息，则客户端应该接受该提示并可能启用按钮或使其可见或其他东西。

使用这种方法，您可以根据资源/权限来定义您的 ACL——这个模型 + 那个 HTTP 方法。当服务器即将返回资源的表示时，它可以包括用户应该看到的任何选项，方法是轮询 ACL 以获取用户对该资源（或其他资源，如子/后代资源）拥有的所有权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:37:08.853

我不确定您的应用程序要求是什么，或者您当前是否正在使用任何 javascript 框架。我会看[这里](https://github.com/addyosmani/aura)。Addy Osmani 在 javascript 社区中非常有名，并帮助创建了这个 javascript 框架。看起来它有能力处理你的问题。这是主要自述文件的引述

> 沙盒包含一个权限层，允许您为小部件配置权限，例如特定小部件是否有权呈现到页面等。

还有许多其他的 javascript 框架，您可以研究这些框架，这将使处理页面级别的安全性更加清晰，并且意味着您不必重写大量代码。另一个例子是[Backbone Marionette](https://github.com/marionettejs/backbone.marionette) 它具有复合视图的概念，可以直接实现页面级安全性。

最后，另一种选择是根本不传输您的安全信息。您的 REST API 只能提供他们也有权访问的模型信息。您需要以可以适当处理“丢失”数据的方式编写客户端模板。

# java - 控制台输入和输出的 JUnit 测试

> ID：12331696
> 
> 赞同：3
> 
> 时间：2012-09-08T14:40:05.210
> 
> 标签：java, junit, io, console, user-input

我只有一种方法主要。如何检查 System.out.println() 并替换 Scanner 以使用 JUnit 自动输入值？

PS请提供一些解决方案...

```
public static void main(String[] args) {
    Scanner scanner = new Scanner(System.in);
    int[] arr = new int[4];

    for (int i = 0; i < arr.length; i++) {
        arr[i] = scanner.nextInt();
    }

    for (int i = 0; i < arr.length; i++) {
        int res = 0;
        int k = 0;
        int num = arr[i];
        /*.....*/
        System.out.println(num);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T14:45:03.150

理想情况下，提取笨拙的依赖项，以便您可以在没有它们的情况下进行测试。改为`main`简单：

```
public static void main(String[] args) {
  doWork(new Scanner(System.in), System.out);
}

// TODO: Rename to something meaningful
public static void doWork(Scanner input, PrintStream output) {
  // Remainder of code
} 
```

（考虑使用 a`Writer`而不是`PrintStream`for `output`。）

然后，您实际上并不需要进行单元测试`main`- 但您可以`doWork`使用`Scanner`基于 a 的 a`StringReader`和基于 a 的输出进行测试`StringWriter`，提供您想要的任何输入并检查输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-08T23:16:20.140

我遇到了类似的问题，这就是我最终要做的。

首先，我建议按照@Jon-Skeet 的建议做，而不是使用`main(String[])`类的方法，而是创建一个单独的方法。

然后，您可以让该方法将 an`InputStream`作为参数，然后`Scanner`在使用传递`InputStream`的作为其源的方法中创建一个对象。这样，您可以在调用方法时将任何`InputStream`，例如传递给方法（下文详述）。`System.in`

```
package my.package;

import ...;

public class MyClass
{
    public static void myMethod(InputStream inputStream)
    {
        Scanner inputScanner = new Scanner(inputStream);

        // Do stuff with the Scanner such as...
        String input = inputScanner.nextLine();

        System.out.println("You inputted " + input);
    }
} 
```

现在，在您的生产源代码中，您可以调用`myMethod`它并将其`System.in`作为参数传递，`myMethod(System.in);`

然后在您的单元测试中，您可以通过以下方式创建模拟输入值`ByteArrayInputStream`：

```
package my.package;

import ...;

public class MyClassTest
{
    @Test
    void testMyMethod()
    {
        // Simulates a user inputting the string "Mock input" and hitting enter
        assertDoesNotThrow(myMethod(new ByteArrayInputStream("Mock input\n".getBytes())));
    }
} 
```

瞧，您现在有了一种方法来传递您的方法模拟输入，并且它整体上更加模块化。

我只想指出，但不要过多介绍，当使用 时`System.in`，需要小心关闭它，在使用输入流时的单元测试中，需要小心重用与其相同的`InputStream`引用状态可以跨用途持续存在。

# emacs - 如何设置带有 Cx 8 前缀的密钥？

> ID：12331699
> 
> 赞同：5
> 
> 时间：2012-09-08T14:40:21.237
> 
> 标签：emacs

说我想重新绑定`C-x 8 x`到`ξ`. 所以我这样做：

```
(global-set-key (kbd "C-x 8 x") (lambda () (interactive) (insert "ξ"))) 
```

但它不起作用：它仍然插入默认的 x 符号。然后我尝试了两个：

```
(global-unset-key (kbd "C-x 8 x"))
(global-set-key (kbd "C-x 8 x") nil) 
```

没有任何效果。

**编辑**：

这是我现在为希腊人使用的：

```
(define-key 'iso-transl-ctl-x-8-map "a" [?α])
(define-key 'iso-transl-ctl-x-8-map "b" [?β])
(define-key 'iso-transl-ctl-x-8-map "g" [?γ])
(define-key 'iso-transl-ctl-x-8-map "d" [?δ])
(define-key 'iso-transl-ctl-x-8-map "e" [?ε])
(define-key 'iso-transl-ctl-x-8-map "z" [?ζ])
(define-key 'iso-transl-ctl-x-8-map "h" [?η])
(define-key 'iso-transl-ctl-x-8-map "o" [?θ])
(define-key 'iso-transl-ctl-x-8-map "i" [?ι])
(define-key 'iso-transl-ctl-x-8-map "k" [?κ])
(define-key 'iso-transl-ctl-x-8-map "l" [?λ])
(define-key 'iso-transl-ctl-x-8-map "m" [?μ])
(define-key 'iso-transl-ctl-x-8-map "n" [?ν])
(define-key 'iso-transl-ctl-x-8-map "x" [?ξ])
(define-key 'iso-transl-ctl-x-8-map "p" [?π])
(define-key 'iso-transl-ctl-x-8-map "r" [?ρ])
(define-key 'iso-transl-ctl-x-8-map "s" [?σ])
(define-key 'iso-transl-ctl-x-8-map (kbd "M-s") [?ς])
(define-key 'iso-transl-ctl-x-8-map "x" [?ξ])
(define-key 'iso-transl-ctl-x-8-map "t" [?τ])
(define-key 'iso-transl-ctl-x-8-map "y" [?υ])
(define-key 'iso-transl-ctl-x-8-map "f" [?φ])
(define-key 'iso-transl-ctl-x-8-map "v" [?χ])
(define-key 'iso-transl-ctl-x-8-map "j" [?ψ])
(define-key 'iso-transl-ctl-x-8-map "w" [?ω])
(define-key 'iso-transl-ctl-x-8-map "A" [?Α])
(define-key 'iso-transl-ctl-x-8-map "B" [?Β])
(define-key 'iso-transl-ctl-x-8-map "G" [?Γ])
(define-key 'iso-transl-ctl-x-8-map "D" [?Δ])
(define-key 'iso-transl-ctl-x-8-map "E" [?Ε])
(define-key 'iso-transl-ctl-x-8-map "Z" [?Ζ])
(define-key 'iso-transl-ctl-x-8-map "H" [?Η])
(define-key 'iso-transl-ctl-x-8-map "O" [?Θ])
(define-key 'iso-transl-ctl-x-8-map "I" [?Ι])
(define-key 'iso-transl-ctl-x-8-map "K" [?Κ])
(define-key 'iso-transl-ctl-x-8-map "L" [?Λ])
(define-key 'iso-transl-ctl-x-8-map "M" [?Μ])
(define-key 'iso-transl-ctl-x-8-map "N" [?Ν])
(define-key 'iso-transl-ctl-x-8-map "X" [?Ξ])
(define-key 'iso-transl-ctl-x-8-map "P" [?Π])
(define-key 'iso-transl-ctl-x-8-map "R" [?Ρ])
(define-key 'iso-transl-ctl-x-8-map "S" [?Σ])
(define-key 'iso-transl-ctl-x-8-map "T" [?Τ])
(define-key 'iso-transl-ctl-x-8-map "Y" [?Υ])
(define-key 'iso-transl-ctl-x-8-map "F" [?Φ])
(define-key 'iso-transl-ctl-x-8-map "V" [?Χ])
(define-key 'iso-transl-ctl-x-8-map "J" [?Ψ])
(define-key 'iso-transl-ctl-x-8-map "W" [?Ω]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T15:24:17.460

您必须将密钥设置为`iso-transl-ctl-x-8-map`. 如：

```
(eval-after-load 'iso-transl
  '(define-key iso-transl-ctl-x-8-map "x" "ξ")) 
```

那是因为`C-x 8`实际上是在 中定义的`key-translation-map`，它覆盖了全局映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:36:15.630

哦，我找到了另一种方法：

```
(define-key 'iso-transl-ctl-x-8-map "x" [?ξ]) 
```

[参考](http://www.emacswiki.org/emacs/PrefixKey#toc2)。

# java - 适用于 android 的 Google 自定义搜索 API，找不到类

> ID：12331701
> 
> 赞同：1
> 
> 时间：2012-09-08T14:40:32.947
> 
> 标签：java, android, api, google-custom-search, buildpath

我需要使用我的 android 应用搜索谷歌并返回结果。我尝试使用 Google 自定义搜索 API。它在我桌面上的java中运行良好。但是相同的代码给出了

> 09-07 02:03:25.101: E/dalvikvm(959): 找不到类 'com.google.api.services.customsearch.Customsearch'，从方法中引用

LogCat 中的错误。但是我已经在构建路径中包含了这个类。任何人都可以请提出一种克服这一点的方法。我在下面包含了我的完整代码

```
package customSearchAPI.searchTest;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.customsearch.Customsearch;
import com.google.api.services.customsearch.model.Result;
import com.google.api.services.customsearch.model.Search;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class CustomSearchActivity extends Activity implements OnClickListener{

    /** Called when the activity is first created. */
    ListView display;
    ArrayList<String> links=new ArrayList<String>();
    Button searchButton;
    TextView searchBox,output;
    ListAdapter adapter;
    WebView webPage;
    final static  String searchURL = "https://www.googleapis.com/customsearch/v1?";
    // This is Important : 

    final static String apiKey = "My API key";
    final static String customSearchEngineKey = "My cx id";

    public String makeSearchString(String qSearch){
        String toSearch = searchURL + "key=" + apiKey + "&cx=" + customSearchEngineKey;
        toSearch += "&q=" + qSearch + "&alt=json";
        return toSearch;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        searchBox=(TextView)findViewById(R.id.editText1);
        searchButton=(Button)findViewById(R.id.button1);
        //display=(ListView)findViewById(R.id.listView1);
        webPage=(WebView)findViewById(R.id.webView1);
        output=(TextView)findViewById(R.id.editText2);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Customsearch customsearch = new Customsearch(new NetHttpTransport(), new JacksonFactory());

        try {
            com.google.api.services.customsearch.Customsearch.Cse.List list =   customsearch.cse().list(searchBox.getText().toString());
            list.setKey("my api key");
            list.setCx("my cx id ");
            Search results = list.execute();
            List<Result> items = results.getItems();

            for(Result result:items)
            {
                //System.out.println("Title:"+result.getHtmlTitle());
                links.add(result.getHtmlTitle());
            }
            webPage.loadUrl(items.get(0).getLink());
            display.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,links));

        } catch (IOException e) {
            // TODO Auto-generated catch block
            searchBox.setText("Error"+e.getMessage());
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:30:03.063

您必须包括

1.  不仅要构建路径，还要部署。
2.  不仅是一个班级，而是整个图书馆。

# entity-framework - 让 EF 在各种错误后自动重新发送查询

> ID：12331703
> 
> 赞同：0
> 
> 时间：2012-09-08T14:40:38.880
> 
> 标签：entity-framework, entity-framework-4, azure-sql-database, entity-framework-5

当我针对冗余 SQL 配置（例如 SQL Azure）执行命令时，有时会出现超时和其他杂项。由于服务器关闭或失败而导致的错误。在 Azure 上这不是问题，因为冗余是内置的。正确的操作是使用新连接重新尝试查询，并且负载平衡器（或其他任何东西）很可能会将您转移到运行正常的服务器。

我的问题是是否有办法让实体框架（v4 或 v5）自动执行此操作？用 try/catch 块包装每个查询（如果收到某些错误，则重新尝试查询）是不切实际的，我相信我忽略了这个问题的解决方案。

有关 SQL Azure 随机关闭连接的相关信息，请参阅：http: [//msdn.microsoft.com/en-us/library/ee336245.aspx#cc](http://msdn.microsoft.com/en-us/library/ee336245.aspx#cc)。但是，最近，我根本没有从 Azure 收到这个错误……我只是偶尔遇到零星的 SQL 超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:29:17.307

看看 SQL CAT 的瞬态故障处理框架：

[http://windowsazurecat.com/2010/12/sql-azure-and-entity-framework-connection-fault-handling/](http://windowsazurecat.com/2010/12/sql-azure-and-entity-framework-connection-fault-handling/)

=== 由@pbarranis 添加 ===

根据同一个站点，但页面不同：

> 瞬态故障处理框架已被 Patterns & Practices 团队的一个更新的交付物所取代。它现在被称为瞬态故障处理应用程序块，有 3 种风格：
> 
> •开发者指南： http: [//msdn.microsoft.com/en-us/library/hh680934 (v=PandP.50).aspx](http://msdn.microsoft.com/en-us/library/hh680934(v=PandP.50).aspx)
> 
> •NuGet 包： http: [//nuget.org/List/Packages/EnterpriseLibrary.WindowsAzure.TransientFaultHandling](http://nuget.org/List/Packages/EnterpriseLibrary.WindowsAzure.TransientFaultHandling)
> 
> •源代码： http: [//nuget.org/List/Packages/EnterpriseLibrary.Source.WindowsAzure](http://nuget.org/List/Packages/EnterpriseLibrary.Source.WindowsAzure)
> 
> 新的瞬态故障处理应用程序块现在是我们官方推荐的处理在 Windows Azure 平台上运行的应用程序中的瞬态故障的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T16:46:35.633

如果您使用 Entity Framework 6（目前处于 alpha 阶段），那么有一些新的内置支持 Azure SQL 数据库的瞬时重试（带有一点配置）：[http ://entityframework.codeplex.com/wikipage?title=连接%20Resiliency%20Spec](http://entityframework.codeplex.com/wikipage?title=Connection%20Resiliency%20Spec)

我创建了一个库，它允许您配置 Entity Framework 以使用故障处理块重试，而无需更改每个数据库调用 - 通常您只需要更改配置文件和可能的一两行代码。

这允许您将它用于 Entity Framework 或 Linq To Sql。

[https://github.com/robdmoore/ReliableDbProvider](https://github.com/robdmoore/ReliableDbProvider)

# c++ - STL 映射如何知道该映射包含给定元素？

> ID：12331708
> 
> 赞同：0
> 
> 时间：2012-09-08T14:41:11.183
> 
> 标签：c++, stl, map

有问题[在 stdmap](https://stackoverflow.com/questions/4157687/using-char-as-a-key-in-stdmap)中使用 char 作为键，建议使用自定义比较函数/函子：

```
struct cmp_str
{
   bool operator()(char const *a, char const *b)
   {
      return std::strcmp(a, b) < 0;
   }
};

map<char *, int, cmp_str> BlahBlah; 
```

这允许 map 检测 key A 是否**小于**key B。但是例如 **map<>::find()**如果未找到元素则返回**end**，如果找到则返回它的迭代器。所以 map 知道等价，而不仅仅是小于。如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T14:43:31.760

两个键的相等条件`a`and `b`are that `a<b`and`b<a`都是假的。map 本身通常实现为平衡二叉树^*，因此使用小于比较从根节点遍历 map 直到找到匹配元素。搜索 key`k`时，将使用小于比较，直到找到比较为假的第一个元素。如果逆比较也是假的，`k`已经找到了。否则，`k`不在地图中。该地图仅使用小于比较来达到此目的。

另请注意，它`std::set`使用完全相同的机制，唯一的区别是每个元素都是它自己的键。

^*严格来说，C++ 标准没有指定它`std::map`是平衡二叉树，但它对插入和查找等操作的复杂性限制意味着实现选择了红黑树等结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T14:44:33.830

等价/`operator==`可以表示为 的函数`operator<`：

```
bool operator==(T left, T right) {
  return !(left < right) && !(right < left);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T15:00:41.313

这是因为 map 的比较器必须实现严格的弱排序，例如`<`.

这种关系的数学属性之一是[**反对称**](http://en.wikipedia.org/wiki/Antisymmetric_relation)，它表明对于任何`x`and `y`，然后`not (x < y)`and`not (y < x)`意味着`x == y`。

因此，在找到第一个不比较小于您正在搜索的键的元素后，实现只是检查该元素是否比较大，并且它既不小也不大于，那么它必须相等。

# glsl - 赋值中的左值太复杂

> ID：12331711
> 
> 赞同：1
> 
> 时间：2012-09-08T14:41:49.663
> 
> 标签：glsl

以下代码导致 glsl 错误：lvalue in assignment too complex

```
for(int i = 0; i < 4; i++)
{
    if(Lgt.lights[i].position.w == 0.0)
    {
        LightDir[i] = normalize(vec3(Lgt.lights[i].position));
        ViewDir[i] = normalize(cameraWorldPosition - worldPosition);
    }
    else
    {
        LightDir[i] = normalize(vec3(Lgt.lights[i].position) - worldPosition);
        ViewDir[i] = normalize(cameraWorldPosition - worldPosition);
    }
} 
```

但是在另一个着色器程序中，一段相同的代码可以正常工作。当代码不包含 if 语句时，例如

```
for(int i = 0; i < 4; i++)
{
    LightDir[i] = normalize(vec3(Lgt.lights[i].position) - worldPosition);
    ViewDir[i] = normalize(cameraWorldPosition - worldPosition);
} 
```

一切都很好，但是当我使用乘法时：

```
for(int i = 0; i < 4; i++)
{
     LightDir[i] = LocalMat * normalize(vec3(Lgt.lights[i].position) - worldPosition);
     ViewDir[i] = LocalMat * normalize(cameraWorldPosition - worldPosition);
} 
```

我再次收到该错误。谁能告诉发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T22:14:30.640

我猜您是在不允许索引分配的 GPU/驱动程序组合上运行的。因此，为了编译代码，需要完全展开循环，将左值中的所有索引更改为常量。这显然发生在某些情况下，但不是全部。

如果您使用的是 Nvidia GPU/驱动程序，您可能会尝试将`#pragma optionNV unroll all`着色器程序放在顶部以强制完全展开所有循环 - 但如果您有其他不应该展开的循环，这可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T00:38:59.723

我也有这个错误，但我的原因不同。

事实证明，我的 for 循环中有一个硬编码的最大索引，它比我试图分配的数组大。我的猜测是编译器在尝试展开时感到困惑，并且左值没有足够的索引。

# wcf - WCF 与回调合约的互操作性

> ID：12331715
> 
> 赞同：1
> 
> 时间：2012-09-08T14:42:21.330
> 
> 标签：wcf, interop, wcf-callbacks

我需要实现一个支持与非 WCF 客户端（python、Java、Ruby 等）进行双工通信的服务。但是，默认绑定似乎都不支持这种情况（wsDualHttpBinding 并不是真正的互操作：[https](https://blogs.oracle.com/arungupta/entry/wshttpdualbinding_a_non_interoperable_binding) ://blogs.oracle.com/arungupta/entry/wshttpdualbinding_a_non_interoperable_binding ）

是否有自定义绑定可以为非 WCF 客户端提供回调功能？或者，我正在考虑使用 CORBA 来实现相同的功能，但使用 WSDL 来传达接口定义的能力将会丢失。

# python - 向多人发送附件时使用的带宽

> ID：12331720
> 
> 赞同：0
> 
> 时间：2012-09-08T14:43:14.230
> 
> 标签：python, smtp, gmail, attachment, bandwidth

这可能是一个愚蠢的问题，但我找不到答案......

我正在使用 python 向多个人发送附件：

```
sendMail( ['person1@mail.com', 'person2@mail.com'], 
    "Your Mail","", 
    ["letter.pdf"]
) 
```

我将使用 Gmail 和 SMTP 发送邮件。将有 50 到 5,000 名收件人。这些文件应该是大约 2 MB。

我的问题 - 附件会为每个收件人重新发送到 Gmail，还是只发送一次？我想弄清楚我的带宽会是什么样子 - 2 MB 或（2MB * 500 人）1000 MB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:55:50.223

您上传文件一次。我不确定他们如何将该文件分发给所有收件人。但这是他们为您处理的事情，因此您无需担心。希望这可以帮助。

[https://webapps.stackexchange.com/questions/5639/how-does-an-app-like-gmail-handle-attachments](https://webapps.stackexchange.com/questions/5639/how-does-an-app-like-gmail-handle-attachments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:51:53.240

这取决于您的 MTA，但如果您首先发送一条消息（使用多个 To: / CC: / BCC: 等标头指定收件人），则正确编写的 MTA 将只为每个目标域发送一条消息。

# visual-c++ - 遵循教程的 Opengl 访问冲突

> ID：12331721
> 
> 赞同：3
> 
> 时间：2012-09-08T14:43:20.680
> 
> 标签：visual-c++, opengl, access-violation, glew, glfw

我目前正在学习如何在 Windows 上使用 OpenGL。为了检查我是否正确设置了库，我正在编译一组应该可以工作的教程。

现在我正在关注这个集合： [http ://www.opengl-tutorial.org/beginners-tutorials/tutorial-2-the-first-triangle/](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-2-the-first-triangle/)

上一个教程编译得很好，所以我确定我已经正确设置了所有内容，但是第二个教程一直让我感到困惑，我也找不到我的设置有任何问题。我正在使用 Visual Express c++ 2010。

# 在源文件中我有：

主.cpp：

```
// Include standard headers
  #include <stdio.h>
  #include <stdlib.h>

// Include GLEW
#include <GL/glew.h>

// Include GLFW
#include <GL/glfw.h>

// Include GLM
#include <glm/glm.hpp>
using namespace glm;

#include "shader.h"

int main( void )
{
// Initialise GLFW
if( !glfwInit() )
{
    fprintf( stderr, "Failed to initialize GLFW\n" );
    return -1;
}

glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4);
glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 3);
glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

// Open a window and create its OpenGL context
if( !glfwOpenWindow( 1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW ) )
{
    fprintf( stderr, "Failed to open GLFW window. If you have an Intel GPU, they are not 3.3 compatible. Try the 2.1 version of the tutorials.\n" );
    glfwTerminate();
    return -1;
}

// Initialize GLEW
if (glewInit() != GLEW_OK) {
    fprintf(stderr, "Failed to initialize GLEW\n");
    return -1;
}

glfwSetWindowTitle( "Tutorial 02" );

// Ensure we can capture the escape key being pressed below
glfwEnable( GLFW_STICKY_KEYS );

// Dark blue background
glClearColor(0.0f, 0.0f, 0.3f, 0.0f);

GLuint VertexArrayID;
glGenVertexArrays(1, &VertexArrayID);
glBindVertexArray(VertexArrayID);

// Create and compile our GLSL program from the shaders
GLuint programID = LoadShaders( "SimpleVertexShader.vertexshader", "SimpleFragmentShader.fragmentshader" );

static const GLfloat g_vertex_buffer_data[] = { 
    -1.0f, -1.0f, 0.0f,
     1.0f, -1.0f, 0.0f,
     0.0f,  1.0f, 0.0f,
};

GLuint vertexbuffer;
glGenBuffers(1, &vertexbuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);

do{

    // Clear the screen
    glClear( GL_COLOR_BUFFER_BIT );

    // Use our shader
    glUseProgram(programID);

    // 1rst attribute buffer : vertices
    glEnableVertexAttribArray(0);
    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
    glVertexAttribPointer(
        0,                  // attribute 0\. No particular reason for 0, but must match the layout in the shader.
        3,                  // size
        GL_FLOAT,           // type
        GL_FALSE,           // normalized?
        0,                  // stride
        (void*)0            // array buffer offset
    );

    // Draw the triangle !
    glDrawArrays(GL_TRIANGLES, 0, 3); // From index 0 to 3 -> 1 triangle

    glDisableVertexAttribArray(0);

    // Swap buffers
    glfwSwapBuffers();

} // Check if the ESC key was pressed or the window was closed
while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS &&
       glfwGetWindowParam( GLFW_OPENED ) );

// Close OpenGL window and terminate GLFW
glfwTerminate();

// Cleanup VBO
glDeleteBuffers(1, &vertexbuffer);
glDeleteVertexArrays(1, &VertexArrayID);

return 0;
} 
```

着色器.cpp：

```
#include <stdio.h>
#include <string>
#include <vector>
#include <iostream>
#include <fstream>
#include <algorithm>
using namespace std;

#include <stdlib.h>
#include <string.h>

#include <GL/glew.h>

#include "shader.h"

GLuint LoadShaders(const char * vertex_file_path,const char * fragment_file_path){

// Create the shaders
GLuint VertexShaderID = glCreateShader(GL_VERTEX_SHADER);
GLuint FragmentShaderID = glCreateShader(GL_FRAGMENT_SHADER);

// Read the Vertex Shader code from the file
std::string VertexShaderCode;
std::ifstream VertexShaderStream(vertex_file_path, std::ios::in);
if(VertexShaderStream.is_open()){
    std::string Line = "";
    while(getline(VertexShaderStream, Line))
        VertexShaderCode += "\n" + Line;
    VertexShaderStream.close();
}

// Read the Fragment Shader code from the file
std::string FragmentShaderCode;
std::ifstream FragmentShaderStream(fragment_file_path, std::ios::in);
if(FragmentShaderStream.is_open()){
    std::string Line = "";
    while(getline(FragmentShaderStream, Line))
        FragmentShaderCode += "\n" + Line;
    FragmentShaderStream.close();
}

GLint Result = GL_FALSE;
int InfoLogLength;

// Compile Vertex Shader
printf("Compiling shader : %s\n", vertex_file_path);
char const * VertexSourcePointer = VertexShaderCode.c_str();
glShaderSource(VertexShaderID, 1, &VertexSourcePointer , NULL);
glCompileShader(VertexShaderID);

// Check Vertex Shader
glGetShaderiv(VertexShaderID, GL_COMPILE_STATUS, &Result);
glGetShaderiv(VertexShaderID, GL_INFO_LOG_LENGTH, &InfoLogLength);
std::vector<char> VertexShaderErrorMessage(InfoLogLength);
glGetShaderInfoLog(VertexShaderID, InfoLogLength, NULL, &VertexShaderErrorMessage[0]);
fprintf(stdout, "%s\n", &VertexShaderErrorMessage[0]);

// Compile Fragment Shader
printf("Compiling shader : %s\n", fragment_file_path);
char const * FragmentSourcePointer = FragmentShaderCode.c_str();
glShaderSource(FragmentShaderID, 1, &FragmentSourcePointer , NULL);
glCompileShader(FragmentShaderID);

// Check Fragment Shader
glGetShaderiv(FragmentShaderID, GL_COMPILE_STATUS, &Result);
glGetShaderiv(FragmentShaderID, GL_INFO_LOG_LENGTH, &InfoLogLength);
std::vector<char> FragmentShaderErrorMessage(InfoLogLength);
glGetShaderInfoLog(FragmentShaderID, InfoLogLength, NULL, &FragmentShaderErrorMessage[0]);
fprintf(stdout, "%s\n", &FragmentShaderErrorMessage[0]);

// Link the program
fprintf(stdout, "Linking program\n");
GLuint ProgramID = glCreateProgram();
glAttachShader(ProgramID, VertexShaderID);
glAttachShader(ProgramID, FragmentShaderID);
glLinkProgram(ProgramID);

// Check the program
glGetProgramiv(ProgramID, GL_LINK_STATUS, &Result);
glGetProgramiv(ProgramID, GL_INFO_LOG_LENGTH, &InfoLogLength);
std::vector<char> ProgramErrorMessage( max(InfoLogLength, int(1)) );
glGetProgramInfoLog(ProgramID, InfoLogLength, NULL, &ProgramErrorMessage[0]);
fprintf(stdout, "%s\n", &ProgramErrorMessage[0]);

glDeleteShader(VertexShaderID);
glDeleteShader(FragmentShaderID);

return ProgramID;
} 
```

# 在标题中我有：

着色器.h：

```
#ifndef SHADER_H
#define SHADER_H

GLuint LoadShaders(const char * vertex_file_path,const char * fragment_file_path);

#endif 
```

# 在资源文件中我有：

SimpleFragmentShader.fragmentshader：

```
 #version 330 core

// Ouput data
out vec3 color;

void main()
{

// Output color = red 
color = vec3(1,0,0);

} 
```

SimpleVertexShader.vertexshader：

```
 #version 330 core

// Input vertex data, different for all executions of this shader.
layout(location = 0) in vec3 vertexPosition_modelspace;

void main(){

gl_Position.xyz = vertexPosition_modelspace;

} 
```

# 调试：

链接器：kernel32.lib;glu32.lib;glew32.lib;GLFW.lib;openGL32.lib;user32.lib;gdi32.lib;winspool.lib;comdlg32.lib;advapi32.lib;shell32.lib;ole32.lib; oleaut32.lib;uuid.lib;odbc32.lib;odbccp32.lib;%(AdditionalDependencies)

最后，调试输出：

```
'Spacecraft.exe': Loaded 'C:\Users\Leif Andreas\Documents\Visual Studio 2010\Projects\Spacecraft\Debug\Spacecraft.exe', Symbols loaded.
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\glew32.dll', Binary was not built with debug information.
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\opengl32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\user32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\lpk.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\usp10.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\glu32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\ddraw.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\dciman32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\setupapi.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\cfgmgr32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Symbols loaded.
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\devobj.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\dwmapi.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\msvcp100d.dll', Cannot find or open the PDB file
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\msvcr100d.dll', Cannot find or open the PDB file
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\nvinit.dll', Cannot find or open the PDB file
'Spacecraft.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\detoured.dll', Cannot find or open the PDB file
'Spacecraft.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\Nvd3d9wrap.dll', Cannot find or open the PDB file
'Spacecraft.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\nvdxgiwrap.dll', Cannot find or open the PDB file
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\uxtheme.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\winmm.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\nvoglv32.dll', Cannot find or open the PDB file
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\shell32.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\shlwapi.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\version.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\ntmarta.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\Wldap32.dll', Symbols loaded (source information stripped).
The thread 'Win32 Thread' (0x690) has exited with code 0 (0x0).
'Spacecraft.exe': Loaded 'C:\Windows\SysWOW64\powrprof.dll', Symbols loaded (source information stripped).
'Spacecraft.exe': Unloaded 'C:\Windows\SysWOW64\powrprof.dll'
The thread 'Win32 Thread' (0x1e7c) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x1f38) has exited with code 0 (0x0).
First-chance exception at 0x00000000 in Spacecraft.exe: 0xC0000005: Access violation.
Unhandled exception at 0x76fb15de (ntdll.dll) in Spacecraft.exe: 0xC0000005: Access violation.
The program '[7988] Spacecraft.exe: Native' has exited with code -1073741819 (0xc0000005). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:47:52.767

[http://www.opengl-tutorial.org/miscellaneous/faq/#header-3](http://www.opengl-tutorial.org/miscellaneous/faq/#header-3)

从教程 1 开始：

> 您也可以从 Visual Studio 中启动任何教程，但您需要先设置工作目录：右键单击 Playground，选择调试、工作目录、浏览，然后导航到 C:\Users\XYZ\Projects\OpenGLTutorials\操场。证实。再次右键单击 Playground，“选择为启动项目”。您现在可以通过按 F5 来调试代码。

![在此处输入图像描述](../Images/967c81b0dc1035a49d0c60c902c5f4c1.png)

我刚刚修改了教程，因为很多人都陷入了困境。

此外，如果您使用 GLEW 的标准版本而不是与教程捆绑在一起的版本，由于 GLEW 错误，您将无法使用核心配置文件。利用

```
glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_COMPAT_PROFILE); 
```

代替

```
glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); 
```

# spring-mvc - OSGi Spring MVC Bundle Nightmare - java.lang.ClassNotFoundException: org.springframework.context.config.ContextNamespaceHandler not found from bundle

> ID：12331722
> 
> 赞同：2
> 
> 时间：2012-09-08T14:43:29.300
> 
> 标签：spring-mvc, osgi

我无法让我的 Spring MVC 应用程序作为 OSGi 包运行。这个完全把我难住了。

我正在尝试运行 Spring 3 MVC 包，但在启动时找不到使用 Spring 所需的命名空间处理程序。我已经为 org.springframework.context 包含了必要的导入包。我检查了 org.springframework.context.config.ContextNamespaceHandler 是否安装在 Virgo 服务器上。在服务器中启动捆绑包没有错误 - 所以我很确定必须满足依赖关系。

这是我尝试向 MVC 调度程序 servlet 发出请求时遇到的异常；-

```
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/mvc-dispatcher-servlet.xml]; nested exception is org.springframework.beans.FatalBeanException: NamespaceHandler class [org.springframework.context.config.ContextNamespaceHandler] for namespace [http://www.springframework.org/schema/context] not found; nested exception is java.lang.ClassNotFoundException: org.springframework.context.config.ContextNamespaceHandler not found from bundle [com.osgi-test.spring-mvc-bundle]
org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
org.eclipse.gemini.blueprint.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:170)
org.eclipse.gemini.blueprint.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:140)
org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.access$301(AbstractDelegatedExecutionApplicationContext.java:60)
org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext$1.run(AbstractDelegatedExecutionApplicationContext.java:168)
org.eclipse.gemini.blueprint.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)
org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.normalRefresh(AbstractDelegatedExecutionApplicationContext.java:164)
org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext$NoDependenciesWaitRefreshExecutor.refresh(AbstractDelegatedExecutionApplicationContext.java:78)
org.eclipse.gemini.blueprint.context.support.AbstractDelegatedExecutionApplicationContext.refresh(AbstractDelegatedExecutionApplicationContext.java:157)
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
javax.servlet.GenericServlet.init(GenericServlet.java:244)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
  org.eclipse.virgo.web.tomcat.support.ApplicationNameTrackingValve.invoke(ApplicationNameTrackingValve.java:33)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
java.lang.Thread.run(Thread.java:722) 
```

捆绑包中的清单文件如下所示；-

```
Manifest-Version: 1.0
Export-Package: com.osgi-test.external;version="0.0.1.SNAPSHOT"
Bundle-ClassPath: .,WEB-INF/classes
Built-By: seth
Tool: Bnd-1.50.0
Bundle-Name: spring-mvc-bundle
Created-By: Apache Maven Bundle Plugin
Build-Jdk: 1.7.0_06
Bundle-Version: 0.0.1.SNAPSHOT
Bnd-LastModified: 1347110247719
Bundle-ManifestVersion: 2
Bundle-SymbolicName: com.osgi-test.spring-mvc-bundle
Import-Package: com.osgi-test.external,javax.servlet.http;version="
[2.4,3)",org.eclipse.virgo.web.dm;version="[3.0,4)",org.springfram
ework.context;version="[3.0,4)",org.springframework.stereotype;ver
sion="[3.0,4)",org.springframework.validation;version="[3.0,4)",or
g.springframework.web;version="[3.0,4)",org.springframework.web.bi
nd.annotation;version="[3.0,4) ",org.springframework.web.servlet;v
ersion="[3.0,4)"
Archiver-Version: Plexus Archiver 
```

我读了一篇文章，建议使用

```
org.eclipse.virgo.web.dm.ServerOsgiBundleXmlWebApplicationContext 
```

（[http://www.eclipse.org/forums/index.php/m/635463/](http://www.eclipse.org/forums/index.php/m/635463/)）

可能会有所帮助-但是对我没有任何影响。

我也尝试过删除 web.xml 中的 ContextLoaderListener - 但同样没有帮助。

在这一点上，我迷失了想法。任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:39:42.473

[http://thomaskratz.blogspot.in/2012/03/osgi-spring-dispatcherservlet.html](http://thomaskratz.blogspot.in/2012/03/osgi-spring-dispatcherservlet.html)

请检查此站点，我认为 spring 直接注册调度程序 servlet 存在问题。但是，如果您使用上述博客中提到的解决方法，它应该可以工作。

我实际上是在添加我在这里尝试过的代码片段以供参考：

将以下内容添加到插件的 Activator 中：

```
Activator.context = bundleContext;

ServiceReference ref = context.getServiceReference(HttpService.class.getName());
HttpService service = (HttpService) context.getService(ref);

DispatcherServlet servlet = new DispatcherServlet();

Dictionary<String, String> initparam = new Hashtable<String, String>();
initparam.put("contextConfigLocation", "/WebContent/WEB-INF/spring-servlet.xml");
initparam.put("contextClass", "spring3osgi.BAC");

ClassLoader loader = Thread.currentThread().getContextClassLoader();
Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());

// this is to register the controller
service.registerServlet("/Spring3OSGi",  servlet, initparam, null);

// provide alias to the WebContent folder
service.registerResources("/Spring3OSGiWebContent", "/WebContent", service.createDefaultHttpContext()); 
```

创建班级 BAC

```
import org.springframework.osgi.web.context.support.OsgiBundleXmlWebApplicationContext;

public class BAC extends OsgiBundleXmlWebApplicationContext {

    public BAC() {
        super();
        setBundleContext(Activator.getContext());

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T11:58:19.337

我对 Spring MVC 了解不多，但对于 Spring，我知道有专门用于 OSGi 环境的 SpringDM。也许你可以看看[http://static.springsource.org/osgi/docs/1.2.1/reference/html/web.html#web:spring-mvc](http://static.springsource.org/osgi/docs/1.2.1/reference/html/web.html#web:spring-mvc)。希望它会对你有所帮助。

# cocoa - NSLog 但显示原始 unicode 字符串

> ID：12331725
> 
> 赞同：0
> 
> 时间：2012-09-08T14:43:54.507
> 
> 标签：cocoa, nslog

例如，它打印以下字符串：

"user_description" = "\U5efa\U5b50\Uff0c\U6b4c\U540e\Uff0c\U5c0f\U5e86\Uff0c\U5c0fKen\Uff0c\U8fd9\U4e9b\U90fd\U662f\U6211\U3002\U6211\U60f3\U531\U60f3\U531\U77a\ U662f\Uff0c\U6253\U5f00\U53cc\U624b\Uff0c\U62e5\U62b1\U4f60\U3002";

有人知道如何打印实际的字符串而不是这些不可读的字符吗？

或者你知道为什么会发生这个问题吗？如何避免？编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:44:10.843

我不确定你是如何打印出来的，或者它是什么类型的字符串，但你玩过不同类型的格式说明符吗？[苹果文档](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)

# sql-server - 如何在 SQL Server 中获取具有最大 id 的行以及表的条件

> ID：12331726
> 
> 赞同：0
> 
> 时间：2012-09-08T14:44:02.630
> 
> 标签：sql-server, max

我有一张类似的桌子

```
id-value-RowInid
1-xy-1
1-xx-2
1-xz-3
2-xx-1
2-xr-2
3-xq-1
4-xa-1
4-xc-2
...

```

我需要一个具有相似输出的表的函数来获得分离 id 组中的最大 RowInid

```
1-xz-3
2-xr-2
3-xq-1
4-xc-2
...

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:45:05.247

~~你只需要`MAX(RowInid)`使用`GROUP BY Id, value`~~

 ~~```
SELECT ID, VALUE, MAX(RowInid) FROM myTable GROUP BY ID, VALUE 
```~~  ~~**编辑：**
当您更新您的问题时，您可以`value`使用这样的子查询获取字段：

```
SELECT ID, VALUE, RowInid
FROM myTable t1 WHERE RowInid = 
(
    SELECT MAX(RowInid) FROM myTable WHERE id = t1.id GROUP BY id
)
ORDER BY id ASC; 
```

您也可以使用以下方法实现此`INNER JOIN`目的：

```
SELECT t2.ID, VALUE, t2.RowInid FROM myTable t1
INNER JOIN 
(
    SELECT ID, MAX(RowInid) AS RowIniD FROM myTable GROUP BY ID
) AS t2
ON t1.ID = t2.ID AND t1.RowInid = t2.RowInid
ORDER BY t1.ID ASC; 
```

[看到这个 SQLFiddle](http://sqlfiddle.com/#!3/f8e74/8)

查看有关SQL Server 的[`GROUP BY`](http://msdn.microsoft.com/en-us/library/ms177673.aspx)更多信息。[`MAX`](http://msdn.microsoft.com/en-us/library/ms187751.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T06:19:17.620

根本不需要 group by 或 max

```
select id, value, rowinid from
( select *, row_number() over (partition by id, order by rowinid desc) rn from yourtable ) v
where rn = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T14:59:10.890

尝试，

使用 Sub Query 获取 Id、Value 和 Max RowInid，

```
 SELECT m1.[Id],m1.Value, m1.RowInid
  FROM [Practice].[dbo].[myTable] m1 WHERE RowInid = (SELECT MAX(m2.RowInid) FROM [Practice].[dbo].[myTable] m2 WHERE M1.Id = m2.Id GROUP BY Id) 
```

以上查询返回结果如：4-xx-2 3-xx-1 2-xx-2 1-xx-3

为了提升这种用途，

```
SELECT  m1.[id],m1.Value, m1.RowInid
FROM [Practice].[dbo].[myTable] m1 WHERE m1.RowInid = (SELECT MAX(m2.RowInid) FROM [Practice].[dbo].[myTable] m2 WHERE M2.id = m1.id GROUP BY id)  ORDER BY m1.id ASC 
```~~

# android - 如何在远程视图布局中使用开关/切换？

> ID：12331727
> 
> 赞同：0
> 
> 时间：2012-09-08T14:44:04.227
> 
> 标签：android, toggle, switch-statement

我想在removteviews 中使用switch(view) 或toggle(view)，但是当我放入layout.xml 时它会得到一个RemoteServiceException。

在 android 开发网页 ( [appwidgets](http://developer.android.com/guide/topics/appwidgets/index.html) ) 中，开关/切换不在支持的列表中。

那么，如何在远程视图布局中使用开关/切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:02:42.770

你没有。您可以尝试使用`Button`or `ImageButton`，您可以在其中调整按钮正面的内容以表示“切换”状态，因为应用小部件支持这些状态。不`CompoundButton`支持的子类，可能是因为无法从应用小部件中读取按钮的值。

# java - 单例方法线程安全

> ID：12331730
> 
> 赞同：0
> 
> 时间：2012-09-08T14:44:21.480
> 
> 标签：java, multithreading, design-patterns, singleton

我有一个问题单例模式和线程。实现是这样的。

```
public class Singleton {
    private static final Singleton instance = new Singleton();

    private SomeClass someField;
    // and  another private fields

    private Singleton() {
        someField = new SomeClass(some args);
        // init another private fields
    }

    public Singleton getInstance() {
        return instance;
    }

    public void operation() {
        //some operations
        someField.method();
    }
} 
```

（对不起，我不能提供真实的例子。）接下来的问题是：方法 operation() 线程安全吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T14:47:21.467

我们不知道它是否安全——我们不知道什么是安全的`someField.method()`。

我强烈建议您创建`someField`一个`final`字段，就好像单例需要改变状态一样，如果没有额外的同步，它*绝对*不是线程安全的。如果`SomeClass`它本身是不可变的并且是线程安全的，那么你不应该需要任何其他同步 - 但否则，你会的。

基本上，单例没有什么“神奇的线程安全”。它只是一个实例，多个线程可以通过静态`getInstance()`方法访问它。如果该类是线程安全的，那么无论它是否是单例，它都是线程安全的——如果它不是线程安全的，那么将其设为单例将无济于事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T14:47:57.533

的线程安全`someField.method();`取决于它实际在做什么。如果它正在修改在多个线程之间共享的状态，那么它不是线程安全的。如果不是，它可能是线程安全的。但通常不应假定它是线程安全的。没有代码我不能说更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T03:45:56.050

正如上面回答的那样，答案不是线程安全的。这可以作为下面的代码进行测试！

* * *

```
public class TestSingleton {
public static void main(String[] args) throws Exception {
    ExecutorService pool = Executors.newFixedThreadPool(10);
    for (int j = 0; j < 100000; j++) {
        pool.submit(new Thread() {
            public void run() {

                Singleton.get().add();
            }
        });
    }
    pool.shutdownNow();
    System.out.println(Singleton.get().getcnt());
} 
```

}

```
class Singleton {
private static Singleton singleton = new Singleton();

int cnt = 0;

private Singleton() {}

public static Singleton get() {
    return singleton;
}

public void add() {
    cnt++;
}

public int getcnt() {
    return cnt;
} 
```

}

# php - 重建 PHP 后 Preg_match 失败

> ID：12331739
> 
> 赞同：1
> 
> 时间：2012-09-08T14:45:50.740
> 
> 标签：php, compilation, preg-match

我只是尝试用 php-soap 编译我的 PHP。它似乎构建得很好，但现在我的网站显示以下错误：

```
Warning: preg_match() [function.preg-match]: Internal pcre_fullinfo() error -3 
```

我不确定在没有 php-soap 的情况下重建我的 PHP 是否会起作用，因为通过查看错误，这似乎不是问题。这是我的 php 版本：

```
PHP 5.2.17 (cli) (built: Sep  8 2012 16:09:36) 
Copyright (c) 1997-2010 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2010 Zend Technologies 
```

这是我的配置：

```
Configure Command =>  './configure'  '--with-apxs2' '--with-curl=/usr/local/lib' 
'--with-gd' '--enable-gd-native-ttf' '--with-ttf' '--with-gettext' '--with-jpeg-dir=/usr/local/lib' 
'--with-freetype-dir=/usr/local/lib' '--with-kerberos' '--with-openssl' 
'--with-mcrypt' '--with-mhash' '--with-mysql=/usr' 
'--with-mysqli=/usr/bin/mysql_config' '--with-pcre-regex=/usr/local' 
'--with-pdo-mysql=/usr' '--with-pear' '--with-png-dir=/usr/local/lib' 
'--with-zlib' '--with-zlib-dir=/usr/local/lib' '--enable-zip' 
'--with-iconv=/usr/local' '--enable-bcmath' '--enable-calendar' 
'--enable-ftp' '--enable-magic-quotes' '--enable-sockets' '--enable-soap' 
'--enable-mbstring' 
```

操作系统是带有 DirectAdmin 的 CentOS 5

我真的希望有人可以帮助我。我在 Google 上找不到有关此错误的任何信息。并提前非常感谢您。

# c++ - c ++注册表没有获得第二个值

> ID：12331742
> 
> 赞同：0
> 
> 时间：2012-09-08T14:46:00.863
> 
> 标签：c++, windows, visual-c++

为什么这不起作用？第一个 RegGetValue 将正确的值放入 value 变量中，第二个没有，但是如果我评论第一个 RegGetValue，第二个将起作用并将正确的内容放入 value2 变量中。在第一次 RegGetValue 函数调用之后，我尝试使用 RegOpenKeyEx 关闭并重新打开注册表项，但没有成功。我做错了什么

```
HKEY hKey = NULL;
LSTATUS res;

res=RegOpenKeyEx(HKEY_CLASSES_ROOT, "", 0, KEY_READ|KEY_WOW64_64KEY, &hKey);
if(res!=ERROR_SUCCESS)
         printf("insucces\n");
else {
    char value[255], value2[255];
    memset(value,0,255);
    memset(value2,0,255);
DWORD BufferSize = BUFFER;
RegGetValue(hKey,"\\.jpeg","",RRF_RT_ANY,NULL,(PVOID)&value, &BufferSize);
strcat(value,"\\DefaultIcon");
RegGetValue(hKey,"jpegfile\\DefaultIcon","",RRF_RT_ANY,NULL,(PVOID)&value2, &BufferSize);

printf("succes %s\n",value2);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:53:10.627

从关于你的最后一个参数的[RegGetValue 手册；](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724868(v=vs.85).aspx)

> pcbData [输入，输出，可选]
> 
> 指向变量的指针，该变量指定 pvData 参数指向的缓冲区的大小，以字节为单位。当函数返回时，此变量包含复制到 pvData 的数据的大小。

换句话说，`BufferSize`第一次调用将变量的内容更改为返回的第一个值的大小，并且需要在第二次调用之前重置。

# c++ - 接口，隐藏 C++ 中的具体实现细节

> ID：12331752
> 
> 赞同：1
> 
> 时间：2012-09-08T14:46:59.400
> 
> 标签：c++, oop, design-patterns

我有一个关于在 C++ 库中隐藏接口细节的问题。下面的例子说明了这个问题：

假设 w 有一个名为***ISystem***的类，它公开了*Init、Run、Tick、Shutdown、GetXXXSubSystem 等方法。* 其中 X 是各种接口的指针，例如：*ISoundSystem、IInputSystem*

我们还有 ISystem 的具体实现，例如： ***Win32System、OSXSystem***等。

这些特定的实现使用 pimpl idiom 来隐藏内部结构，例如 Win32System 将 Win32RawInputSystem 实例**化为** 输入系统管理器。

所有这些管理器都有自己的*Init、Run、Tick 和 Shutdown*方法，它们不是接口的一部分（仅具体实现），它们由具体的系统实现运行和管理。

调用 GetXXXSubSystem 的用户在没有这些方法（Init 等）的情况下获得了接口指针，但他仍然可以将获得的指针转换为具体实现并触发他不应该访问的 Init Run Tick 等方法。

问题是，是否有可能以某种方式隐藏具体类？我试图在具体实现中保护这些方法，并将最终成为朋友的类型的类模板化，但这似乎是被禁止的，现有的 hack 不适用于 VC11。

我能想到的唯一方法是将具体的实现声明从头文件转移到 Win32System 类的 cpp 文件中，但我看到这样做的巨大缺点（甚至不确定这是否可行），因为这样每个子系统都会有成为这个 cpp 文件的一部分，这将成为可维护性的噩梦。

我正在考虑的另一个解决方案是使用工厂方法，例如

```
(RawInput.h) 
IInputSystem* CreateRawInputSystem();

(RawInput.cpp)
class RawInput : public IInputSystem {}; ... 
```

并将类的定义移动到 cpp 文件，但是，我将如何从我的库的其他部分（即在 Win32System impl 中）访问这种类型？

是否可以从其他 .cpp 文件中包含 .cpp 文件？

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:23:56.173

如果您在这里开发一个库，那么您可以简单地选择不导出您不想公开的具体类的头文件。您不能强制转换为您没有定义的类。

示例：
**MyProjectFolder/Src/Export/ISystem.h**

```
#ifndef ISYSTEM_H
#define ISYSTEM_H

#include "IInputSystem.h"

class ISystem
{
public:
    virtual ~ISystem() {};
    virtual void Run()=0;
    virtual IInputSystem* GetInputSystem()=0;
};

#endif 
```

**MyProjectFolder/Src/Export/IInputSystem.h**

```
#ifndef IINPUTSYSTEM_H
#define IINPUTSYSTEM_H

class IInputSystem
{
public:
    virtual ~IInputSystem() {};
    virtual void Foo()=0;
    virtual void Bar()=0;
};

#endif 
```

**MyProjectFolder/Src/Export/Win32System.h**

```
#ifndef WIN32SYSTEM_H
#define WIN32SYSTEM_H

#include "ISystem.h"

class Win32System : public ISystem
{
public:
    Win32System();
    virtual void Run();
    virtual IInputSystem* GetInputSystem();

private:
    struct impl;
    impl* m_pImpl;
};

#endif 
```

**MyProjectFolder/Src/Win32RawInputSystem.h**

```
#ifndef WIN32RAWINPUTSYSTEM_H
#define WIN32RAWINPUTSYSTEM_H

#include "IInputSystem.h"

class Win32RawInputSystem : public IInputSystem
{
public:
    virtual void Foo();
    virtual void Bar();

    virtual void Run(); // you do not want to expose that function
};

#endif 
```

**MyProjectFolder/Src/Win32System.cpp**

```
#include "Win32System.h"

#include "Win32RawInputSystem.h"

struct Win32System::impl
{
    Win32RawInputSystem inputSys;
};

Win32System::Win32System()
 : m_pImpl(new impl)
{
}

void Win32System::Run()
{ // run run run
}

IInputSystem* Win32System::GetInputSystem()
{
    return &m_pImpl->inputSys;
} 
```

因此，在构建项目时，它的包含搜索路径不仅是*Src/*也是*Src/Export/*。在您的库项目中，您可以使用所有类，包括 Win32RawInputSystem。在部署你的库时，你只会放弃那些位于*Src/Export/*文件夹中的头文件。客户仍然可以使用该库，但他们永远无法`IInputSystem*`转换为，`Win32RawInputSystem*`因为他们没有那个标题。因此，该库的用户可以调用`Foo()`和`Bar()`，`IInputSystem*`但他们永远无法调用`Run()`.

# java - 简单的 DAWG 创建算法？

> ID：12331755
> 
> 赞同：4
> 
> 时间：2012-09-08T14:47:31.987
> 
> 标签：java, arrays, algorithm, graph

给定文件中的单词列表，我需要为我的拼字游戏播放器创建一个 DAWG ( [http://en.wikipedia.org/wiki/Directed_acyclic_word_graph ) 结构。](http://en.wikipedia.org/wiki/Directed_acyclic_word_graph)我正在使用 Java。我只需要执行一次，然后将其存储在一个或多个文件中。到目前为止，我已经看到了 2 种方法：1）构建一个 Trie 并将其简化为 DAWG 或 2）立即构建一个 DAWG。因为我只需要做一次，我想我只想要最简单的算法来实现它。速度和内存要求无关紧要。

另外我想知道我应该如何在运行时将结构存储在内存中，以及我应该如何将它保存在文件中？DAWG 基本上是一个图表，它建议使用我编写的一些非常简单的类的一些节点和边/指针，但我看到使用数组和偏移量（在这个数组中）的实现，这看起来很复杂且难以辨认。这次我关心内存大小（在运行时和保存的文件）和加载 DAWG/使用 DAWG 的速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-01T21:28:51.353

[本文](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.37.7600)定义了最简单、最有效的 DAWG 构建算法，并且要求对 DAWG 要表示的词集进行排序。鉴于您计划从预先存在的单词列表构建 DAWG，该列表可能已经排序，或者可以用于此目的。

我已经以比论文中给出的更“程序员友好”的格式粗略地转录了算法的伪代码（免责声明：我可能犯了一些转录错误；你可能应该看看原文确定是否有）：

```
Given:
        startState is the state from which traversal of the DAWG is to start
        register is a map of representations (hint: hashes) OF graphs which extend 
        from states in the DAWG TO said states

While there is newWord in wordList
    Get newWord from wordList
    Determine longestPrefix of newWord, starting from startState, which already exists in DAWG
    Get longestPrefixEndState, the state which the sequence of transitions defined by longestPrefix leads to
    Get suffix of newWord, the substring of newWord after longestPrefix
    if longestPrefixEndState has children 
        replace_or_register(longestPrefixEndState)
    endIf
    Create the sequence of transitions and states defined by suffix, starting from longestPrefixEndState
endWhile
replace_or_register(startState)

function replace_or_register(argState)
    Get greatestCharEndState of argState, the state which the lexicographically-greatest-char-labelled-transition in the outgoing transition set of argState leads to
    if greatestCharEndState has children
        replace_or_register(greatestCharEndState)
    endIf
    if there exists state in DAWG that is in the register and is equivalent (has an identical graph extending from it) to greatestCharEndState
        Redefine the transition that extends from argState to greatestCharEndState, as one that extends from argState to state
        Delete greatestCharEndState
    endIf
    else 
        add greatestCharEndState to the register
    endElse 
```

鉴于您使用的是 Java，您可以利用[Serializable](https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)接口来处理您所有的序列化和反序列化需求。

如果您对实现上述算法的 Java 中现有的 DAWG 实现感兴趣，请查看[MDAG](https://github.com/klawson88/MDAG)，它还提供了其他实现不具备的几个漂亮功能（包括即时添加和删除字符串），并由我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:47:32.333

我曾经为我的一个客户用 C 语言实现过这样的结构。最终结构是从描述字符集和 dawg 的 xml 文件加载的，另一个进程从单词列表创建 xml 文件。

## 第 1 步：构建第一个 dawg 序列化为 xml 文件的结构

我们用了 ：

```
typedef struct _s_build_node build_node_t;
struct _s_build_node {
  char_t letter;
  build_node_t* first_child;
  build_node_t* right_sibling;

  hash_t hash;
  size_t depth;
  size_t ID;
};
typedef struct _s_build_dawg {
  charset_t charset;
  node_t* all_nodes; // an array of all the created nodes
  node_t* root;
} build_dawg_t; 
```

siblibgs 按升序排列，词尾特殊字符小于任何其他字符。该算法非常简单：

```
// create the build dawg
foreach word in wordlist
  insert(dawg, word)
// compact the dawg
compact(dawg)
// generate the xml file
xml_dump(dawg) 
```

为了压缩 dawg，我们为每个节点计算了一个哈希值。可以*分解*具有相同散列的两个节点。这部分可能很棘手。只有深度最低的节点被保留，其他节点被删除，它们的父节点现在指向保留的节点。
压缩后，我们为每个节点分配一个唯一的 ID（通过 bfs，ID 介于 0 和 N-1 之间，N 是压缩后的 dawg 中的节点数）。xml 文件简单地描述了 trie ：

```
<dawg>
  <charset ....>
    ...
  </charset>

  <node ID="node_id" letter="letter" fist_child="first_child_ID" next_sibling="next_sibling_id" />
  <node .... />
  <node .... />
  <node .... />
</dawg> 
```

## 第 2 步：最后的 dagw

结构稍微简单一点

```
typedef struct {
  char_t letter;
  size_t first_child;
  size_t next_sibling;
} node_t;

typedef struct {
  node_t nodes[];
  ... whatever you need ...
} dawg_t; 
```

这里 root 是 dawg.nodes[0]，first_child/next_sibling 是节点数组中的索引。从 xml 文件创建这样的结构很容易。主要缺点是任何词表修改都会触发新 xml 文件的生成。

# ios - URL 未在 Webview 中加载（重定向）

> ID：12331756
> 
> 赞同：0
> 
> 时间：2012-09-08T14:47:38.960
> 
> 标签：ios, uiwebview, webview, url-redirection

当我试图`http://feeds.feedblitz.com/~/33712999/0/technicallypersonal~Top-Biking-Apps-for-Android-and-iOS-iPhoneiPad/`在 UIWebView 中加载这种 url 并且它们没有加载时（我相信这是因为重定向）

我能做些什么来让它们工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:31:42.337

你说你得到一个空白页，但它对我来说很好。我有一个`UIWebView`连接到一个`IBOutlet`named `webview`，然后我有一个`viewDidLoad`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://feeds.feedblitz.com/~/33712999/0/technicallypersonal~Top-Biking-Apps-for-Android-and-iOS-iPhoneiPad/"]]];
} 
```

我已经做到了，而且效果很好。所以，你说你只是得到一个空白页，所以我想知道你`IBOutlet`的工作是否正常。尝试一个简单的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.webview loadHTMLString:@"<html><body>Hello, World!</body></html>" baseURL:nil];
} 
```

如果可行，则问题出在从网络加载，在这种情况下，我建议使用该`loadRequest`方法尝试不同的 URL，以查看它是所有 URL，还是只是您的特定 URL。如果这`loadHTMLString`不起作用，那么它必须是一些简单的东西，比如你`IBOutlet`的设置不正确，或者类似的东西。

# php - restler php中的POST请求

> ID：12331761
> 
> 赞同：2
> 
> 时间：2012-09-08T14:48:13.390
> 
> 标签：php, mysql, api, rest, post

我是 REST 架构的新用户，现在我正在尝试使用我的 API 进行测试。我喜欢在 url 中调用这个方法，但我不知道正确的格式。

我担心的是我有两个参数要通过 post 请求发送。

```
public function CreateExemple ($name, $libelle)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:01:32.390

如果可用，使用即用型软件包始终是一个好习惯。有很多 RESTful API 可供使用。看起来您正在使用 PHP 进行开发。你可以从：

[Zend REST](http://framework.zend.com/manual/en/zend.rest.html)

# php - PHP date strtotime - 各种输出

> ID：12331764
> 
> 赞同：0
> 
> 时间：2012-09-08T14:48:43.937
> 
> 标签：php, date, time, strtotime

> **可能重复：**
> [PHP：从时间戳生成相对日期/时间](https://stackoverflow.com/questions/2690504/php-producing-relative-date-time-from-timestamps)

请看PHP代码示例：

```
<?php

$now = date("Y-m-d H:i:s");  
$comment_added = date("2012-05-25 22:10:00");  

?> 
```

作为输出，我想得到这样的东西（取决于何时添加评论）：

```
Comment has been added 21 minutes ago.
Comment has been added 15 hours ago.
Comment has been added 2 days ago.
Comment has been added 3 months ago.
Comment has been added 4 years ago. 
```

我想获得一个功能，它将被自动选择。任何示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:54:22.087

你用过谷歌吗？

[http://css-tricks.com/snippets/php/time-ago-function/](http://css-tricks.com/snippets/php/time-ago-function/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:00:14.927

这应该有效。

```
<?php

$now = date("Y-m-d H:i:s");  
$comment_added = date("2012-05-25 22:10:00");

$diff = strtotime($now) - strtotime($comment_added);
if ($diff > (365*24*3600)) {
    $type = 'year';
    $value = floor($diff / (365*24*3600));
} else if ($diff > (30*24*3600)) {
    $type = 'month';
    $value = floor($diff / (30*24*3600));
} else if ($diff > (24*3600)) {
    $type = 'day';
    $value = floor($diff / (24*3600));
} else if ($diff > 3600) {
    $type = 'hour';
    $value = floor($diff / 3600);
} else if ($diff > 60) {
    $type = 'min';
    $value = floor($diff / 60);
} else {
    $type = 'sec';
    $value = $diff;
}

$plurial = '';
if ($value > 1)
{
    $plurial .= 's';
}
echo "Comment added {$value} {$type}{$plurial} ago.";

?> 
```

# list - Magento：在 php 块中获取产品 id 以在 list.phtml 中可用

> ID：12331768
> 
> 赞同：1
> 
> 时间：2012-09-08T14:49:28.413
> 
> 标签：list, magento, attributes

我正在尝试获取要在 list.phtml 上列出的属性，正在制作的表单如下：我在 Block 上创建了一个模块并创建了一个捕获该属性的函数：

```
 protected function getPreOrder()
{
    $productId = $this->getRequest()->getParam('id');
    $product = Mage::getModel('catalog/product')->load($productId);
    $preOrder = $product->getNewsFromDate();

    $preOrder = substr($preOrder, 0, 10);

    return $preOrder;
}
public function getViewList() 
{
    if(strtotime(date('Y-m-d')) <= strtotime($this->getPreOrder()))
    {
        return true;
    } else {
        return false;
    }

} 
```

但是，没有返回任何内容。我也对 view.phtml 做了同样的方法，效果很好。这适用于函数 getChildHtml() phtml 之前的文件，未编辑 list.phtml

创建循环是有意义的，但循环已经是 list.phtml 了！

会有什么办法？我谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:32:56.877

您是否调试过您的块功能以查看产品 ID 是否正确以及是否正确加载模型？还要调试模板 list.phtml 以检查它是否正确加载了块类型？

> get_class($this);

看看它是什么类类型。

# java - 使用 iText 在 Java 程序中嵌入字体

> ID：12331776
> 
> 赞同：1
> 
> 时间：2012-09-08T14:50:56.180
> 
> 标签：java, fonts, itext, truetype

我想将字体嵌入到我的 Java 程序中，并且我知道如何使用标准 Java 库来做到这一点。但是，我该如何使用 iText 呢？

如果不是绝对必要的话，我不希望我的项目（或以后的 jar 文件）之外的任何东西被篡改（我希望我的程序在所有 Java 支持平台上工作）。

我正在使用`*.ttf`文件导入字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:40:20.607

定义字体

```
public static String[] FONT = 
    {"path/to/fonts/xxx.ttf", BaseFont.WINANSI}; 
```

然后使用

```
BaseFont bf = BaseFont.createFont(FONT[0], FONT[1], BaseFont.EMBEDDED);
Font font = new Font(bf, 24); 
```

与文件。

# ruby - 如何在 Ruby 中创建简单的计时器方法？

> ID：12331778
> 
> 赞同：1
> 
> 时间：2012-09-08T14:51:39.273
> 
> 标签：ruby

如何在 Ruby 中创建一个接受任意函数调用的简单计时器方法？

例如： `time rspec`或`time get_primes(54784637)`

它仍应返回 ( `get_primes`) 中传递的函数的结果。

以下内容并不完全有效：

```
def time block
  t = Time.now
  result = eval(block)
  puts "\nCompleted in #{(Time.now - t).format} seconds"
  result
end 
```

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T14:56:42.643

使用块更 Rubyesque：

```
def time
  t = Time.now
  result = yield
  puts "\nCompleted in #{Time.now - t} seconds"
  result
end

time { rspec } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T15:02:21.127

此功能已在 Ruby 标准库的[Benchmark](http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html#method-c-realtime)模块中提供：

```
require 'benchmark'

time = Benchmark.realtime { 10_000.times { print "a" } } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T14:59:06.963

试试这样：

```
def time(&block)
  t = Time.now
  result = block.call
  puts "\nCompleted in #{(Time.now - t)} seconds"
  result
end 
```

# ember.js - 在 Ember.js #each 中生成循环计数器

> ID：12331780
> 
> 赞同：2
> 
> 时间：2012-09-08T14:51:44.333
> 
> 标签：ember.js, handlebars.js

我发现 Ember.js 中车把模板的限制绝对是严重的。您不能执行任意 javascript。你得到的只是一组固定的能力（if/else、each、action、view、outlet）和输出当前上下文对象的属性值的能力。

这意味着我无法弄清楚如何做一些像使用循环计数器这样简单的事情，以便例如根据我正在迭代的集合中的位置在循环内的 html 元素上拍打位置 ID。

将其添加为模型的计算属性是没有意义的，因为这不是模型级别的知识（同一模型可能在不同视图中的两个不同位置）。

仅供参考 - 在 PostgreSQL 上使用 Ember-1.0-pre、Ember-Data 和 Rails 和 ActiveModel::Serializers。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T09:55:10.490

使用 handlebars.js (v. 1.0.rc1) 我可以这样做：

```
 {{#each links}}
   <li>{{@index}} - {{url}}</li>
 {{/each}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T23:37:17.590

我建议编写一个车把助手，您可以在其中执行任意 javascript。有关一些示例，请参见 [http://handlebarsjs.com](http://handlebarsjs.com)。

或者，您可以在子视图（而不是模型）中包含位置 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T16:51:15.957

事实证明，提供循环计数器是本页最后一个示例的确切主题：

[http://handlebarsjs.com/block_helpers.html](http://handlebarsjs.com/block_helpers.html)

（Dan G 已经在他的回答中指出了“编写助手”解决方案，但由于已经有一个已发布的示例，我想创建一个新的答案以使链接更加突出。）

# c# - SilverLight：如何从网络摄像头录制视频

> ID：12331783
> 
> 赞同：-1
> 
> 时间：2012-09-08T14:51:55.610
> 
> 标签：c#, silverlight

我已经搜索了几天**如何使用 SILVERLIGHT 录制视频**，但没有运气。大多数与 SL 相关的文章只讨论如何录制音频或拍照，而不是录制视频文件并将其保存在某个地方。

而且我发现互联网上没有关于它的资源（我很惊讶！！！）！

那么你能给我一个带有适当解释的示例代码吗？

我正在等待它。

PS：我不想使用 Flesh，因为 iPhone 和 iPAD 都不支持它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T11:11:50.730

幸运的是，[Mike Taulty 的源代码](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2009/12/30/silverlight-4-webcams-oncemorewithaudio.aspx)可以*轻松*更新以与 Silverlight 5 一起使用。您可以[下载](http://www.filehosting.org/file/details/373706/SL4WebCamAviSaving.zip)固定的源代码并试用*（**免责声明：**所有代码均由 Mike Taulty 提供，我只是修复了 SL5 的兼容性并进行了清理）*。使用您最喜欢的[差异工具](http://en.wikipedia.org/wiki/Comparison_of_file_comparison_tools)查看我所做的更改。

我已经对其进行了测试，它会生成可以在 VLC 媒体播放器中查看的视频文件（在选择*构建索引*以修复损坏的索引之后）。由于文件格式不是 100% 正确，因此无法在 Windows Media Player 等中打开文件……但我确信可以修复。

但是，您应该注意，iPhone、iPad、Android 和 Windows Phone**不支持 Silverlight（Windows Phone***应用程序*是在特殊版本的 Silverlight 上创建的，但不能在浏览器中运行 Silverlight 应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:33:13.997

不幸的是，在对可能的解决方案进行了数百小时的研究之后，我终于在一本书中找到了答案：Pro Silverlight 4 in C# (Matthew MacDonale, APress)。

根据第 436 页上所说的内容，尽管您可以使用 Silverlight 4 来完成（您必须编写自己的文件头帮助程序，将行数据存储为字节数组，然后您必须将它们转换为原始视频数据以及什么更糟糕的是音频和视频是分开的。），这样做不实用也不值得。因为它需要大量复杂的手写代码来转换它，而且转换过程的计算量很大，这使得实时进行非常困难。

所以我想这将是我的问题的结论。现在对我来说似乎仍然有意义的是找出为什么微软不支持它以及将使用/已用于替换 SL 的新技术是什么。

是 HTML5 吗？但据我所知，HTML中只有一个video标签，只能用作视频播放器，但没有标签支持访问网络摄像头并同时保存捕获的视频+音频一个文件到某个地方，可以是本地硬盘驱动器或网络存储。

我希望所有亲爱的你能想出一些深思熟虑的建议。

我打算几天不回答这个问题，看看是否有人能想出一些绝妙的解决方案。

再次感谢。

# java - 保存片段对象

> ID：12331787
> 
> 赞同：0
> 
> 时间：2012-09-08T14:52:45.477
> 
> 标签：java, android, fragment

我有一个一次显示一个片段的活动，现在每个片段都从服务器加载数据并继续在列表中获取数据，用户可以通过选择显示在 ActonBar 中的 Spinner 中的项目来在活动中显示另一个片段。

这是活动的代码

```
public class HomeActivity  extends SherlockFragmentActivity .....{

        private class ListInfo {

                private String tag;
        private Class<?> clss;
        private Bundle bundle;
        private Fragment fragment;

    public ListInfo(String tag, Class<?> clss, Bundle bundle) {
        this.tag = tag;
        this.clss = clss;
        this.bundle = bundle;
    }

}

String[] naviStrings;
private HashMap<String, ListInfo> listMap = new HashMap<String, HomeActivity.ListInfo>();

private ListInfo mLastListInfo = null;

private int currentSelectedOptionInSpinner;
ChannelFragment fr;

@SuppressWarnings("unchecked")
@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
    Log.d("HomeActivity", "onCreate");
    Log.d("onCreate bundle", "" + arg0);
    setContentView(R.layout.test);
    naviStrings = getResources().getStringArray(
            R.array.action_bar_spinner_entries);

    initializeList(arg0);

    Context context = getSupportActionBar().getThemedContext();
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            context, R.array.action_bar_spinner_entries,
            R.layout.sherlock_spinner_item);

    adapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(adapter, this);
    getSupportActionBar().setSelectedNavigationItem(
            currentSelectedOptionInSpinner);

}

private void initializeList(Bundle args) {

    ListInfo listInfo = null;

    // add first Fragment

    listMap.put(naviStrings[5], (listInfo = new ListInfo(naviStrings[5],
            AboutUsActivity.class, args)));
    addFragmentToList(this, listInfo);

    listMap.put(naviStrings[3], (listInfo = new ListInfo(naviStrings[3],
            Fragment1.class, args)));
    addFragmentToList(this, listInfo);

    listMap.put(naviStrings[2], (listInfo = new ListInfo(naviStrings[2],
            Fragment2.class, args)));
    addFragmentToList(this, listInfo);

    listMap.put(naviStrings[1], (listInfo = new ListInfo(naviStrings[1],
            Fragment3.class, args)));
    addFragmentToList(this, listInfo);

    listMap.put(naviStrings[4], (listInfo = new ListInfo(naviStrings[4],
            Fragment4.class, args)));
    addFragmentToList(this, listInfo);

    if (args != null) {
        Toast.makeText(this, "args is not null", Toast.LENGTH_SHORT).show();
        // set the current selected index in the ActionBar spinner
        if (args.getInt(
                ApplicationMetaData.IntentData.LAST_SELECTED_ITEM_SPINNER,
                -1) > -1
                && args.getInt(
                        ApplicationMetaData.IntentData.LAST_SELECTED_ITEM_SPINNER,
                        -1) < naviStrings.length) {
            Toast.makeText(this, "selected  is not null",
                    Toast.LENGTH_SHORT).show();

            currentSelectedOptionInSpinner = args
                    .getInt(ApplicationMetaData.IntentData.LAST_SELECTED_ITEM_SPINNER);
        } else {
            currentSelectedOptionInSpinner = 2;
        }
    } else {
        currentSelectedOptionInSpinner = 2;
    }

    onNavigationItemSelected(currentSelectedOptionInSpinner, 0);
}

private static void addFragmentToList(SherlockFragmentActivity activity,
        ListInfo instanse) {
    // check to see if we already have a fragment for this tab , probably
    // from a previously save state.
    // if so deactivated it ,because our initial state is that a tab is not
    // shown.
    String tag = instanse.tag;

    instanse.fragment = activity.getSupportFragmentManager()
            .findFragmentByTag(tag);

    if (instanse.fragment != null && !instanse.fragment.isDetached()) {
        FragmentTransaction ft = activity.getSupportFragmentManager()
                .beginTransaction();
        ft.detach(instanse.fragment);
        ft.commit();
        activity.getSupportFragmentManager().executePendingTransactions();
    }

}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt(
            ApplicationMetaData.IntentData.LAST_SELECTED_ITEM_SPINNER,
            currentSelectedOptionInSpinner);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    Log.d("onNavigationItemSelected", "" + itemPosition);
    if (itemPosition == 5) {
        Intent i = new Intent(this, AboutUsActivity.class);
        startActivity(i);
        return true;
    }
    Log.d("fragment data", listMap.get(naviStrings[itemPosition]) + "");
    ListInfo newtItem = listMap.get(naviStrings[itemPosition]);
    if (newtItem != mLastListInfo) {
        FragmentTransaction ft = this.getSupportFragmentManager()
                .beginTransaction();

        if (mLastListInfo != null) {
            if (mLastListInfo.fragment != null) {
                ft.detach(mLastListInfo.fragment);
            }
        }
        if (newtItem != null) {
            if (newtItem.fragment == null) {
                // create and add
                newtItem.fragment = Fragment.instantiate(this,
                        newtItem.clss.getName(), newtItem.bundle);

                ft.add(android.R.id.content, newtItem.fragment,
                        newtItem.tag);
            } else {
                ft.attach(newtItem.fragment);
            }
        }
        mLastListInfo = newtItem;
        ft.commit();
        this.getSupportFragmentManager().executePendingTransactions();
        return true;
    }

    return false;

}} 
```

现在，当我从一个片段导航到另一个片段时，可以说从片段 1 到片段 2，当我返回片段 1 时，它会保留它的状态并且不必从头开始加载数据，但是如果我从主 Activity 启动一个新的 Activity 系统销毁 Activity 和其中的 Fragments，有没有办法在我旋转 Home Activity 时保留这些 Fragment 注释，没有发生任何事情，只有当我开始一个新的 Activity 时？？？？？？

**更新** 我在`onCreate`setRetaineInstance(true) 中制作的所有四个片段；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:59:40.997

一种选择是在您的和/或中覆盖[saveInstanceState](http://developer.android.com/reference/android/app/Fragment.html#onSaveInstanceState%28android.os.Bundle%29)以保留数据，然后从传递到/的数据中检索它。 `Fragments``Activites``Bundle``onActivityCreated``onCreate`

如果您正在处理大量数据，则最好使用另一种持久性机制，例如 SQLite 数据库

# css - 弹出框隐藏在 Twitter Bootstrap 的导航栏下

> ID：12331791
> 
> 赞同：10
> 
> 时间：2012-09-08T14:53:55.997
> 
> 标签：css, twitter-bootstrap

我的导航栏中有一个帮助按钮，具有弹出功能。

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
           <div class="nav pull-right">
               <div class="cb_inline_block">               
                   <a class="btn btn-small cb_inline_block icon timezone_help" data-content="{% trans 'hahaha' %}" rel="popover" href="#" data-original-title="{% trans 'Time Zone' %}"><i class="icon-question-sign icon-large"></i></a> 
```

Javascript：

```
$(document).ready(function () { $('.timezone_help').click(show_timezone_help); };

function show_timezone_help(event){
    event.preventDefault();
    $('.timezone_help').popover('show');
} 
```

但是当我点击它时，弹出框隐藏在导航栏后面。

我真的必须手动设置 z-index 吗？那会很痛苦。我肯定做错了什么。谢谢。

![在此处输入图像描述](../Images/90703b94c908a440ea9f6f10c14113f4.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-09T17:25:13.223

首先，您的问题的答案是弹出框不打算在固定导航栏中使用。在**variables.less**中，您将找到以下 z-index 列表：

```
// Z-index master list
// -------------------------
// Used for a bird's eye view of components dependent on the z-axis
// Try to avoid customizing these :)
@zindexDropdown:          1000;
@zindexPopover:           1010;
@zindexTooltip:           1030;
@zindexFixedNavbar:       1030;
@zindexModalBackdrop:     1040;
@zindexModal:             1050; 
```

如您所见，Popovers 旨在滑到固定导航栏下方。但是，您会注意到 Tooltips 不会，您也可以`trigger: 'click'`在 tooltips 上使用。

否则，如果您对弹出框不满意，您将不得不手动更改它的 z-index。以下将激活它并永久更改它的 z-index，因此您不必担心每次显示时都这样做，或者类似的事情：

```
$('.timezone_help')
  .popover({placement: "bottom"})
  .data('popover').tip()
    .css('z-index', 1030);​​​​​​​​​​​​​​​​​​​​​​​​ 
```

## [JSFiddle](http://jsfiddle.net/mmfansler/qZFhC/)

* * *

其次，只是解释为什么我的示例*似乎*有效，而您的示例无效。

[我们的两个示例（ mmfansler JSFiddle](http://jsfiddle.net/mmfansler/Lwpzp/)和[houmie JSFiddle](http://jsfiddle.net/houmie/XRSFr/1/) ）之间的显着差异点实际上不是 2.1.0 和 2.1.1 之间的差异。他们都有`z-index: 1030`固定`z-index: 1010`的导航栏和弹出框（这是你抱怨的）。

真正的区别在于我的 2.1.0 示例也加载了响应式代码。出于某种原因，BootstrapCDN 更改了命名约定：

*   2.1.0 中的 bootstrap.min.css 是一个组合版本
*   2.1.1 中的 bootstrap.min.css 仅在非响应式中

我怀疑这是一个错误，因为在我写这个**bootstrap-combined.min.css**时也只是无响应的！

无论如何，影响弹出显示的两者之间的唯一区别是：

```
.navbar-fixed-top, .navbar-fixed-bottom {
  position: static;
} 
```

然而，这条规则只适用于某些媒体查询（当然在 JSFiddle 中会被激活，因为渲染的视口很小）。

否则，当导航栏不是静态的时，您将继续看到导航栏下方的弹出框。

您可能需要关注[BootstrapCDN 问题 #41](https://github.com/netdna/bootstrap-cdn/issues/41)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-09T11:46:10.963

就我而言，我决定如下：

```
.navbar-fixed-top {
  z-index:1061;
} 
```

弹出框默认为索引 1060，因此任何高于 1060 的内容都位于弹出框上方

对不起，我是巴西人，我用的是谷歌翻译

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-19T03:31:09.540

设置这些属性：

```
data-container="body" style="z-index:1000; position:relative" 
```

z-index 应该是最大限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-03T12:22:39.620

对我来说，我需要将弹出框的容器设置为**body**和 z-index

```
$().popover({container: 'body'}) 
```

# visual-studio-2010 - 如何在 Visual Studio 中为 Arduino 编译？

> ID：12331796
> 
> 赞同：4
> 
> 时间：2012-09-08T14:54:46.590
> 
> 标签：visual-studio-2010, compilation, upload, arduino

我正在使用 Visual Studio 创建一个小的 Arduino[草图](http://www.arduino.cc/en/Tutorial/Sketch)。我想将草图上传到我的[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)板上。如何使用 Visual Studio 编译并上传到 Uno？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T15:01:57.770

您需要安装一个 Arduino 插件（称为[Visual Micro](http://www.visualmicro.com)）。

他们[的入门指南](http://www.visualmicro.com/page/arduino-visual-studio-getting-started.aspx)说构建选项将编译代码并将其上传到 Arduino。

检查此[链接](http://arduino.cc/playground/Code/VisualMicro)也寻求帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T15:09:23.207

巴什是对的。如果您安装了[Visual Micro](http://www.visualmicro.com)，那么只需按下`F5`或单击任何正常的 Visual Studio“开始/开始调试”菜单或工具栏命令。

工具栏上指向右侧的绿色小箭头也可以使用。

# processing - 处理跟随控制

> ID：12331798
> 
> 赞同：1
> 
> 时间：2012-09-08T14:55:00.027
> 
> 标签：processing

处理代码如下：

```
int maxCircle = 200;
float minDistance=2;
float distance;
Circle [] circles= new Circle[maxCircle];

void setup(){
  size(800,800);
  smooth();
  for(int i=0;i<maxCircle;i++){
   circles[i] = new Circle(random(width),random(height),random(2,20));
  }
 }

 void draw(){
   background(255,255);
   for(int i=0;i<maxCircle;i++){
   circles[i].update(width,height);

 for(int j=0;j<maxCircle;j++){
  distance = dist(circles[i].x,circles[i].y,circles[j].x,circles[j].y);
  if(distance<minDistance){
    stroke(0,50);
    noFill();
    line(circles[i].x,circles[i].y,circles[j].x,circles[j].y);}}

circles[i].display();

 }

}

 void mouseMoved(){
   for(int i = 0; i<maxCircle;i++){
    circles[i].x+=(mouseX-circles[i].x)*.2;
    circles[i].y+=(mouseX-circles[i].y)*.2;}}

  class Circle{
      float x,y,vx,vy,r,speed;

  Circle(float tempx, float tempy, float tempr){  
     x=tempx;
     y=tempy;
     vx=random(-1,1);
     vy=random(-1,1);
     r=tempr;
    }

  void update(int w,int h){
   x+=vx;
   y+=vy;

   if(x<r || x>w-r){
     vx*=-1;};
   if(y<r || y>h-r){
     vy*=-1;};
    }

   void display(){
      fill(0,50);
      noStroke();
      ellipse(x,y,r,r);
    }  

    } 
```

两个问题：

1.  为什么线功能不起作用？

2.  我怎样才能使圆圈跟随我的鼠标平滑移动（分别）而不是突然挤压到一个点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:40:03.090

看起来像是凯西的作品——你在加州大学洛杉矶分校吗？

无论如何—— line() 函数*确实*有效。尝试将 minDistance 增加到 20 左右，您会看到线条。

回复：鼠标跟随，您是在告诉*每个*圆圈每帧移动 20% 到鼠标的距离。我不确定你到底想要什么；您是否只希望鼠标附近的圆圈随鼠标移动？如果是这样，请为每个圆圈对鼠标应用距离检查，如果圆圈在该距离内，则仅将其移向鼠标。就像是：

```
void mouseMoved() {
  float distance;
  for(int i = 0; i<maxCircle;i++){
    float mouseDist = dist(circles[i].x,circles[i].y,mouseX,mouseY);

    // move toward mouse only if < 100px from mouse
    if (mouseDist < 100) {
      circles[i].x+=(mouseX-circles[i].x)*.05;
      circles[i].y+=(mouseY-circles[i].y)*.05;
    }
  }
} 
```

# uitabbarcontroller - 在情节提要内的 TabBar 中多次呈现相同的 ViewController

> ID：12331799
> 
> 赞同：2
> 
> 时间：2012-09-08T14:55:28.940
> 
> 标签：uitabbarcontroller, storyboard

你好，

我想使用相同的视图控制器来呈现来自 tabbarcontroller 的各种信息。视图控制器的数量将以编程方式建立。我找到了一种方法，通过使用它们的 nib 启动其他 viewController，但是通过使用 StoryBoarding，我不知道如何获取 viewController 的 nib 标识符。是否可以使用这种技术，或者 Segues 提供替代方法？

谢谢，法布里齐奥

# sql - 对组的子组应用 COUNT 函数

> ID：12331800
> 
> 赞同：4
> 
> 时间：2012-09-08T14:55:47.113
> 
> 标签：sql, oracle, group-by, analytic-functions

我编了一个奇怪的例子来说明我想要做什么（这有点愚蠢，但请耐心等待）：

考虑下表：

**雇员**
![员工表数据](../Images/94e364b37a914f94ceccd27ffc65a146.png)

*已婚*、*认证*和*宗教*只是布尔字段（在 Oracle 的情况下，它们的类型为 NUMBER(1,0)）。

我需要提出 SQL 来显示每个hire_year、已婚、持证和宗教雇员在以下工资类别中的数量：

*   **一个** `SALARY > 2000`
*   **乙** `SALARY BETWEEN 1000 AND 2000`
*   **C** `SALARY < 1000`

基于上面的数据集，这是我期望得到的：

![预期结果](../Images/db6afc5bbe33f03133a478509466c403.png)

到目前为止，我只提出了以下 SQL：

```
SELECT
COUNT(CASE WHEN married = 1 THEN 1 END) as MARRIED,
COUNT(CASE WHEN certified = 1 THEN 1 END) as certified,
COUNT(CASE WHEN religious = 1 THEN 1 END) as religious,
hire_year
FROM employees
GROUP BY hire_year; 
```

执行此 SQL 的结果是：

![实际结果](../Images/699297bf1162886d420de4f494237ee1.png)

这几乎是我所需要的，但我还需要根据工资范围将这些计数器进一步细分。

我想一些*分析*函数，根据一些 SQL 表达式将组划分为桶会有所帮助，但我不知道是哪一个。我尝试使用**NTILE**，但它需要一个正常量作为参数，而不是 SQL 表达式（例如`SALARY BETWEEN X and Y`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T15:02:30.290

不，不需要分析函数；无论如何，它们很难在同一个查询中作为聚合函数。

您要[`case`](http://www.techonthenet.com/oracle/functions/case.php)再次查找该语句，只需将其放入 GROUP BY 中。

```
select hire_year
     , sum(married) as married
     , sum(certified) as certified
     , sum(religious) as religious
     , case when salary > 2000 then 'A'
            when salary >= 1000 then 'B'
            else 'C' end as salary_class
  from employees
 group by hire_year
     , case when salary > 2000 then 'A'
            when salary >= 1000 then 'B'
            else 'C' end 
```

请注意，我已将您更改`count(case when...)`为`sum()`. 这是因为您使用的是布尔值 1/0，所以这将以相同的方式工作，但它更清洁。

出于同样的原因，我`between`在你的工资计算中忽略了你；没有特别需要，好像工资大于2000第一个CASE已经完成了。

# asp.net - mvc3 中的网络摄像头集成

> ID：12331801
> 
> 赞同：0
> 
> 时间：2012-09-08T14:55:47.430
> 
> 标签：asp.net, .net, asp.net-mvc-3

请帮助我在 asp.net 中的 mvc 3.0 中使用代码集成网络摄像头。这是我的**C#**代码体。

```
public ActionResult UploadWebCamPic(string ImageData)
{
    byte[] upImg = null;
    WebImage wi = new WebImage(Convert.FromBase64String(ImageData));
    upImg = wi.GetBytes("png");
    //Get a data Context and you now have the image in PNG format
    //in the upImg byte[] that you can store in your DB.
    return Json("OK");
} 
```

这是我的**JavaScript**代码。
[Javascript代码](http://pastie.org/4685628)

未找到命名空间 webimage 错误即将到来

帮助将不胜感激。谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:24:50.760

您的项目正在引用一个名为的类，`WebImage`但您尚未导入该类的命名空间，或者您缺少程序集引用。

# objective-c - XCode - 检查我的程序是否在模拟器或设备中运行

> ID：12331803
> 
> 赞同：0
> 
> 时间：2012-09-08T14:55:51.353
> 
> 标签：objective-c, xcode4

> **可能重复：**
> [如何以编程方式确定我的应用程序是否在 iphone 模拟器中运行？](https://stackoverflow.com/questions/458304/how-can-i-programmatically-determine-if-my-app-is-running-in-the-iphone-simulato)

如果我的程序在模拟器或设备中运行，我如何以常量签入 XCode 4？像这样的东西：

```
#ifdef RUNING_ON_DEVICE
#else
#endif 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T17:45:52.093

有几个选项

预处理器宏：

```
#if TARGET_IPHONE_SIMULATOR
//is sim
#elif TARGET_OS_IPHONE
//is real device
#else
//unknown target
#endif 
```

或者，如果您宁愿以某种任意方法进行操作：

```
if ([[[UIDevice currentDevice] model] isEqualToString:@"iPhone Simulator"]) {
    //device is simulator
} 
```

# ios - 仍然收到无效的产品标识符... iOS

> ID：12331804
> 
> 赞同：5
> 
> 时间：2012-09-08T14:56:06.900
> 
> 标签：ios, in-app-purchase

我不断收到无效的产品标识符作为应用购买产品请求的回报。

我检查了以下内容：

1.  检查配置文件，删除并重新制作了几次......

2.  根据 itunesconnect (uk.co.companyname.appname.product_name) 中的产品检查产品标识符。

3.  从手机中删除应用程序和规定并重新安装。

4.  退出手机应用商店。

5.  检查了我的代码签名（以 iPhone 开发者身份签名（以 uk.co.companyname.appname 作为标识符）

6.  确保应用标识符正确位于 info.plist 中。

7.  提交和拒绝的应用程序二进制文件。

8.  在手机上运行，​​而不是模拟器。

这是我获取产品的代码：

```
- (void)loadProducts
{
    NSSet *productIdentifiers = [NSSet setWithObjects:uk.co.companyname.appname.product_name, uk.co.companyname.appname.product_name2, uk.co.companyname.appname.product_name3, nil];

    for(NSString *pk in productIdentifiers) NSLog(@"%@", pk);

    SKProductsRequest *productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
    productsRequest.delegate = self;
    [productsRequest start];
}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSLog(@"products: %d", [response.products count]);
    NSLog(@"invalidProductIdentifiers: %d", [response.invalidProductIdentifiers count]);
} 
```

我得到：

```
products: 0
invalidProductIdentifiers: 9 
```

# google-maps - 您如何在 GAS 独立应用程序中嵌入交互式 Google 地图？

> ID：12331809
> 
> 赞同：1
> 
> 时间：2012-09-08T14:57:13.140
> 
> 标签：google-maps, gwt, google-maps-api-3, google-apps-script

我想创建一个嵌入谷歌地图的 GAS 独立网络应用程序。访问者将看到他们的位置，四处拖动，并将能够固定其他用户可以看到的详细信息。用户点击一个点，弹出一个自定义表单，他们填写并提交给管理员批准。我们能做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T16:23:58.467

不幸的是，现在既不使用[Ui](https://developers.google.com/apps-script/uiapp)也不使用[Html](https://developers.google.com/apps-script/html_service)服务无法实现您所需的应用程序。`Ui Service`只能生成静态地图位图，无法拖动/滚动、缩放、标记选择等。并且无法`Html Service`正确处理[Google Maps Javascript API](https://developers.google.com/maps/documentation/javascript/)，因为[Caja sanitizer](https://developers.google.com/apps-script/html_service#Caja)至少会在尝试通过输出编译任何[Maps API 示例](https://developers.google.com/maps/documentation/javascript/examples/)`FATAL_ERROR js?sensor=false:13+3 - 15+4: Properties cannot end in "__": Rule "setBadSuffix",...`时抱怨消息。问题跟踪器上有[适当的功能请求。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1447)请为它加注星标以向开发人员推广此主题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T01:10:11.897

地图支持计划用于 HTML 服务。敬请关注。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T03:31:58.383

这仍然不受支持。html 服务返回相同的错误。一旦您尝试将 Maps API 包含在以下内容中，就会出现此问题：

```
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false">
</script> 
```

# sql - 更改此查询以对行进行分组并过滤掉除具有最小值的行之外的所有行

> ID：12331810
> 
> 赞同：1
> 
> 时间：2012-09-08T14:57:35.357
> 
> 标签：sql, oracle, oracle11g

我有以下结果集：

```
275     72.87368055555555555555555555555555555556   foo
275     72.87390046296296296296296296296296296296   foo
113     77.06431712962962962962962962962962962963   foo
113     77.07185185185185185185185185185185185185   foo 
```

我从这个查询中得到：

```
SELECT id, (tbl2.date_modified - tbl1.date_submitted)/86400, some_value
FROM tbl1, tbl2, tbl3
WHERE tbl1.id = tbl2.fid 
AND tbl1.id = tbl3.fid 
```

我怎样才能改变它来得到这个：

```
275     72.87368055555555555555555555555555555556   foo
113     77.06431712962962962962962962962962962963   foo 
```

即**只得到最小的行** `some_number`

子查询什么的？

非常感谢 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T15:00:18.520

如果`some_value`是字段名称：

```
SELECT id, min((tbl2.date_modified - tbl1.date_submitted)/86400), max(some_value)
FROM tbl1, tbl2, tbl3
WHERE tbl1.id = tbl2.fid 
AND tbl1.id = tbl3.fid
GROUP BY tbl1.id 
```

if`some_value`是一个常量字符串：

```
SELECT id, min((tbl2.date_modified - tbl1.date_submitted)/86400), 'some_value'
FROM tbl1, tbl2, tbl3
WHERE tbl1.id = tbl2.fid 
AND tbl1.id = tbl3.fid
GROUP BY tbl1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:10:43.730

您可以将其包装在子查询中：

```
SELECT x.id,
  min(result),
  x.some_value
FROM
(
  SELECT id, 
    (tbl2.date_modified - tbl1.date_submitted)/86400 result, 
    some_value
  FROM tbl1, tbl2, tbl3
  WHERE tbl1.id = tbl2.fid 
    AND tbl1.id = tbl3.fid
) x
group by x.id, x.some_value 
```

作为一个建议，我可能会重写查询以使用 ANSI 连接语法而不是表之间的逗号，类似于：

```
SELECT x.id,
  min(result),
  x.some_value
FROM
(
  SELECT id, 
    (tbl2.date_modified - tbl1.date_submitted)/86400 result, 
    some_value
  FROM tbl1
  INNER JOIN tbl2
    ON tbl1.id = tbl2.fid
  INNER JOIN tbl3
     ON tbl1.id = tbl3.fid
) x
group by x.id, x.some_value 
```

或者，您可以在`MIN()`没有子查询的情况下将函数添加到原始函数并添加`GROUP BY`

```
 SELECT id, 
    MIN((tbl2.date_modified - tbl1.date_submitted)/86400) result, 
    some_value
  FROM tbl1, tbl2, tbl3
  WHERE tbl1.id = tbl2.fid 
    AND tbl1.id = tbl3.fid
  GROUP BY id, some_value 
```

# vim - 有没有办法将 :nmap 的输出通过管道传输到 vim 中的文件？

> ID：12331813
> 
> 赞同：2
> 
> 时间：2012-09-08T14:57:54.027
> 
> 标签：vim

当我`:nmap<cr>`在正常模式下键入时，我只得到所有键映射的可滚动缓冲区。我想把它保存到一个文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T15:01:53.827

使用[`:redir`](http://vimdoc.sourceforge.net/htmldoc/various.html#%3aredir)：

```
:redir > nmap.txt
:silent nmap
:redir END 
```

然后`nmap.txt`将包含 的输出`:nmap`。

# javascript - Google Maps API v3：根据“邮政编码”设置标记？

> ID：12331818
> 
> 赞同：1
> 
> 时间：2012-09-08T14:58:42.323
> 
> 标签：javascript, google-maps

我知道 Google Maps API v3 中的标记是这样创建的：

```
var myMarker=new google.maps.LatLng(45.776374,12.043793);
var marker=new google.maps.Marker({
  position:myMarker,
  });

marker.setMap(map); 
```

对应：[https ://maps.google.it/maps?q=45.776374,12.043793&ll=45.776486,12.045524&spn=0.008396,0.021136&num=1&t=v&z=16](https://maps.google.it/maps?q=45.776374,12.043793&ll=45.776486,12.045524&spn=0.008396,0.021136&num=1&t=v&z=16)

现在假设我想根据**国家和邮政编码创建标记**

示例：**31044,Italy**（与上面代码标记的点大致相同）

对应：[https ://maps.google.it/maps?q=31044,Italy&hl=it&sll=45.776486,12.045524&sspn=0.008396,0.021136&t=v&hnear=31044&z=12](https://maps.google.it/maps?q=31044,Italy&hl=it&sll=45.776486,12.045524&sspn=0.008396,0.021136&t=v&hnear=31044&z=12)

我的目标是在不知道**确切坐标**但知道**国家（意大利）和邮政编码（31044）**的情况下创建一个标记（假设用户加入我的网站，我想用每个城市的位置填写地图用户。当然，对于每个加入新标记的新用户，都会添加一个）。

我该怎么做？我试图查看整个 API 参考，但我没有找到方法。据我所知，唯一的方法是根据坐标创建一个 LatLng 对象，但我看到的网站只需要邮政编码。

提前感谢您的任何提示

# jsp - 如何根据数据大小在 JSP 中动态呈现具有固定行和可变列的 HTML 表？

> ID：12331831
> 
> 赞同：2
> 
> 时间：2012-09-08T15:00:24.013
> 
> 标签：jsp, html-table

我必须动态显示一个表格，如下所示：

如果有3个名字：

```
╔══════╗
║      ║
║ Jack ║
║ Jill ║
║ John ║
╚══════╝ 
```

但如果名称超过 3 个：

```
╔════════╦══════╦═══════╗
║        ║       ║       ║
║ Jack   ║ Jill  ║ Jabar ║
║ John   ║ Joe   ║ Jabio ║
║ Jordan ║ Juan  ║       ║
╚════════╩══════╩═══════╝ 
```

行数不应超过 3，但列数会动态增加。

最好的方法是什么？名称作为名称列表来到 JSP，目前我使用 JSTL`<c:for each..`来显示表格。

NB[表创建工具](http://www.sensefulsolutions.com/2010/10/format-text-as-table.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:09:31.017

您需要应用一些基本的算术逻辑。检查以下实现。

由于我没有足够的 JSTL 经验，我不得不使用 JSP Scriptlets。

***在控制器中创建示例输入***

```
// number of students
final int numStudents = 17;
String array[] = new String[s];
for (int i = 0; i < numStudents; i++) {
    array[i] = "Student " + (i + 1);
}

List<String> students = Arrays.asList(array); 
```

***视图中的表创建代码***

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
    <c:if test="${not empty students}">
        <c:set var="numStudents" value="${fn:length(students)}" />

        <%-- Variable initialization, arithmetic operations --%>
        <%
            int numStds = Integer.valueOf("" + pageContext.getAttribute("numStudents"));

            int numStdCol1, numStdCol2, numStdCol3;
            numStdCol1 = numStdCol2 = numStdCol3 = numStds / 3;
            if (numStds % 3 == 1) {
                numStdCol1 ++;          
            } else if (numStds % 3 == 2) {
                numStdCol1 ++;
                numStdCol2 ++;
            }

            pageContext.setAttribute("numCol1", numStdCol1);
            pageContext.setAttribute("numCol2", numStdCol2);
            pageContext.setAttribute("numCol3", numStdCol3);
        %>

        <%-- Table creation --%>
        <table border="1" cellspacing="0" cellpadding="0">
            <tr>
                <c:forEach var="student" begin="0" end="${numCol1 - 1}" items="${students}">
                    <td>${student}</td>                 
                </c:forEach>
            </tr>
            <tr>
                <c:forEach var="student" begin="${numCol1}" end="${numCol1 + numCol2 - 1}" items="${students}">
                    <td>${student}</td> 
                </c:forEach>
            </tr>
                <c:forEach var="student" begin="${numCol1 + numCol2}" end="${numStudents - 1}" items="${students}">
                    <td>${student}</td>     
                </c:forEach>
            </tr>
        </table>
    </c:if>
</body>
</html> 
```

***样本输入的输出***

```
<table border="1" cellspacing="0" cellpadding="0">
    <tr>
            <td>Student 1</td>                  
            <td>Student 2</td>                  
            <td>Student 3</td>                  
            <td>Student 4</td>                  
            <td>Student 5</td>                  
            <td>Student 6</td>                  
    </tr>
    <tr>
            <td>Student 7</td>  
            <td>Student 8</td>  
            <td>Student 9</td>  
            <td>Student 10</td> 
            <td>Student 11</td> 
            <td>Student 12</td> 
    </tr>
            <td>Student 13</td>     
            <td>Student 14</td>     
            <td>Student 15</td>     
            <td>Student 16</td>     
            <td>Student 17</td>     
    </tr>
</table> 
```

# css - css - 页脚没有扩展

> ID：12331836
> 
> 赞同：1
> 
> 时间：2012-09-08T15:00:47.657
> 
> 标签：css, footer

我对 css 很陌生，我仍然很难理解一些概念，尤其是定位。无论如何，我的问题是当我设置`position: relative;`容器和页脚`position: absolute; bottom: 0;` 时，页脚变小了。它与我放置这些代码之前的容器具有相同的宽度。我这样做是因为我希望我的页脚位于容器的最底部。

下面是屏幕截图：

![在此处输入图像描述](../Images/5cac70d407b10b0a84fbc378eb5a22d9.png)

栗色是页脚。

在我的页脚中，我不使用 div 而是使用 html element `<footer>`。

我的CSS代码：

```
div#container {
    height: 100%;
    width: 1000px;
    margin: auto;
    background-color: #C9C9C9;
    position: relative;
}

footer {
    background-color: #340B09;
    height: 50px;
    position: absolute; 
    bottom: 0;
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T15:08:14.160

添加宽度：1000px；到你的页脚

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T15:06:24.780

检查这个，如果这可以帮助你 [https://developer.mozilla.org/samples/cssref/css-positioning.html](https://developer.mozilla.org/samples/cssref/css-positioning.html)

我也会鼓励你在浏览器中安装 firebug

同样在页脚上方，添加一些 div 容器，给它一些高度.. 这样页脚就会留在底部。不要明确使用定位...因为您是新手。

给自己一些时间，你会在它上面..with CSS position :-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T15:39:50.057

你有必要使用相对定位和绝对定位吗？我之所以问，是因为它有一个缺点，即对于所有不同尺寸的屏幕，页面的布局将与往常不同。

由于您想在容器底部显示页脚，所以这里可以通过这种方式完成。

```
<style type='text/css'>

body{
  margin: 0px;
  padding: 0px;
  background-color: black;
}

#inbody{           /* main page */
  padding-top: 10px;
  margin-top: 0px;
  margin-left: 0px;
  margin-right: 0px;
  margin-bottom: 0px;
  padding-bottom: 10px;
  height: 1170px;
}

#container{         /*container */
  padding: 10px;        
  margin-top: 10px;
  margin-left: 30px;
  margin-right: 30px;       
  height: 1130px;   
  background-color: orange;         
}

#header{            /* header */
  margin-left: 168px;
  height: 51px;
}

#midbody{           /* middle body */
  margin: 10px;
  padding: 0px;
  height: 999px;
}

#footer{            /* footer */
  padding: 10px;
  height: 30px;
  background-color: black;
}

</style> 
```

此外，您可以更改每个部分的颜色以查看更改。还使用显示网页的 HTML 和 CSS 的检查元素。同样对于盒子模型概念，尝试在检查元素中试验指标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T15:21:52.380

您正在使用;

```
footer {
    background-color: #340B09;
    height: 50px;
    position: absolute; 
    bottom: 0;
} 
```

如果是某个 ID或`footer`Class，它应该在 CSS 中定义，如果您使用的是 html5 元素，则没有问题。`#footer``.footer``footer`

如果要拉伸元素以填充容器，请使用`width: 100%`. 如果页脚在您的`container`. 否则它会伸展到屏幕上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T10:05:12.237

我通过将页脚的宽度声明为 980px 来正确解决它；当我尝试 1000px 时，它变得比容器更宽，因为经过研究我发现 mozilla 和 webkit 不包括宽度中的填充。

# python - 如何在 Python 的 while 测试中增加一个计数器

> ID：12331837
> 
> 赞同：3
> 
> 时间：2012-09-08T15:00:55.027
> 
> 标签：python, while-loop, increment

您如何将以下 Java 习语翻译成 Python？

```
Comparable[] a, int lo, int hi;
int i = lo, j = hi+1;
Comparable v = a[lo];

while (a[++i] < v) if (i == hi) break; 
```

我的问题是在 while 测试中我不能有`++i`or `i += 1`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T15:09:18.513

在 Python 中你不能这样做的问题是 Python 语法的限制。让我们`while`从文档中了解一下：

```
while_stmt ::=  "while" expression ":" suite
                ["else" ":" suite] 
```

如您所见，您必须将**表达式**放在“ **：** ”之前，while`x += 1`是一个语句（*并且语句不返回任何值，因此不能用作条件*）。

这是这段代码在 Python 中的样子：

```
i += 1
while a[i] < v:
    if i == hi:
        break
    i += 1 
```

尽管它有效，但它很可能不是解决您问题的 Python 方法。当你有一个集合并且你想使用索引时，你必须期待使用`for`循环和[`enumerate`](http://docs.python.org/library/functions.html#enumerate)内置函数重新设计你的代码。

**附言**

无论如何，在具有完全不同哲学的语言之间直接移植代码并不是一个好方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T15:28:45.727

Java 代码将 i 设置为第一个元素的索引 >= a[lo]，或者设置为 hi，以先出现的为准。所以：

```
v = a[lo]
for i in range(lo+1, hi+1):
    if a[i] >= v:
        break 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-09T14:22:25.273

如果要遍历列表中的所有对象或任何“可迭代”事物，请使用“for item in list”。如果您还需要计数器，请使用枚举。如果您想要一个数字范围，请使用 range 或 xrange。

但有时你确实想要一个带有一个计数器的循环，它刚刚上升，你将用 break 或 return 来打破它，就像在原始海报的例子中一样。

对于这些情况，我定义了一个简单的生成器，以确保我不会忘记增加计数器。

```
def forever(start=0):
    count = start
    while True:
        yield count
        count += 1 
```

然后你可以写这样的东西：

```
for count in forever():
    if do_something() == some_value:
        break
return count 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T16:53:00.900

该类`list`有一个内置方法可以进行这种搜索，但无论出于何种原因，它只比较是否相等。当然，我们可以破解它：

```
class hax:
  def __init__(self, value): self.value = value
  def __eq__(self, other): return other >= self.value

a.index(hax(a[lo]), lo + 1, hi + 1) 
```

...但请不要:)

无论如何，您不仅不应该尝试直接移植代码，正如@Rostyslav 建议的那样 - 您不应该真的尝试直接移植*问题*。一个 Python 程序有一些非常奇怪的地方，它使用列表的方式会允许出现这样的问题。

# java - 通过公开的 URL 监听数据

> ID：12331839
> 
> 赞同：0
> 
> 时间：2012-09-08T15:00:59.830
> 
> 标签：java, http

对于这个问题，我非常感谢一些帮助。
因此，我有一个设备将使用 http 协议以 XML 格式推送一些数据。我给设备一个 URL，它将数据推送到我的程序。我为含糊而道歉，但我很好奇如何开始？我想实现这个等式的服务器端，设备是客户端！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:13:00.680

方法有很多，这里有点泄露信息和混淆的欲望。

XML 没有针对移动通信进行优化，使用 JSON，因为开销较小。

如果设备想向服务器发送数据，我喜欢使用 HTTP POST 并在服务器端实现一些东西来接收它，也就是 web 服务，或者只是一个 java servlet，或者一个简单的 php 文件......

如果服务器想向设备发送一些东西，那么服务器应该使用推送通知，但有效负载不存在（xml），只是一个通知，设备将从服务器中提取 xml，例如通过 HTTP GET。

还有许多其他案例和实现：RMI、SOAP、...sockets、...很多

# python - Cofigure ipdb for eclipse PyDev

> ID：12331848
> 
> 赞同：3
> 
> 时间：2012-09-08T15:01:58.437
> 
> 标签：python, eclipse, pydev, pdb

基本版的 pdb 工作得很好，但我真的很喜欢 iPython，所以我也想自己弄个 ipdb，但是在 PyDev 项目中运行时遇到了一些问题。

我在我的程序中加入了以下行：

```
...
import ipdb;ipdb.set_trace()
... 
```

我得到以下输出：

```
import ipdb;ipdb.set_trace()
ImportError: No module named ipdb 
```

我已经通过 pip 安装了 ipdb（我更喜欢 pip 而不是 easy_install，因为卸载选项）。

```
Jakubs-MacBook-Pro:experiments Kuba$ pip install ipdb
Downloading/unpacking ipdb
  Downloading ipdb-0.7.tar.gz
  Running setup.py egg_info for package ipdb

Requirement already satisfied (use --upgrade to upgrade): ipython>=0.10 in /usr/local/lib/python2.7/site-packages (from ipdb)
Installing collected packages: ipdb
  Running setup.py install for ipdb

Installing ipdb script to /usr/local/share/python
Successfully installed ipdb
Cleaning up...
Jakubs-MacBook-Pro:experiments Kuba$ cd /usr/local/lib/python2.7/site-packages
Jakubs-MacBook-Pro:site-packages Kuba$ cd ipdb
Jakubs-MacBook-Pro:ipdb Kuba$ ls
__init__.py  __init__.pyc __main__.py  __main__.pyc 
```

在 Eclipse 中，我将此路径添加到 python 解释器的 System PYTHONPATH：

```
System libs -> /usr/local/lib/python2.7/site-packages/ipdb 
```

然后我重新启动了 Eclipse 并期望它可以工作，但它没有。

当我去 Project->Properties-> PyDev -> Interpreter -> “点击这里配置解释器” -> 然后我选择了我要使用的，这个路径包括：

```
/usr/local/lib/python2.7/site-packages/ipdb 
```

在系统 PYTHONPATH 中。

![项目属性](../Images/6272075f847b064a9b0db0b6725a750e.png)

但是，如果我在这个项目中的单个 python 模块上打开属性窗口，它看起来有点不同：

某些模块的属性 -> 运行/调试设置 -> 启动配置 -> 编辑 -> “主”选项卡

将在运行中使用的 PYTHONPATH：

```
...
/usr/local/lib/python2.7/site-packages/ipdb 
```

但是在“解释器”选项卡中 - 选择了默认解释器而不是我想要使用的解释器，即使我在运行后更改它仍然无法正常工作，它会切换回默认解释器。

![模块属性](../Images/936b99702687d9c9c4d1dbf3376acc2c.png)

这里出了点问题，但我不知道是什么..

谁能帮助并说出如何让 ipdb 与 PyDev 一起工作？

编辑：

sys.path 的内容：

[http://imageshack.us/photo/my-images/560/syspathscreen.png/](http://imageshack.us/photo/my-images/560/syspathscreen.png/)

# e-commerce - Verisign/Authorize.Net 可以将交易拆分为多个账户吗？

> ID：12331850
> 
> 赞同：1
> 
> 时间：2012-09-08T15:01:59.910
> 
> 标签：e-commerce, payment-gateway, authorize.net, verisign, merchant-account

我想知道是否有可能有逻辑，每笔交易 10% 进入不同的账户。它不必是 Verisign 或 Authorize.Net，但无论它是什么都必须是一个好的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:01:22.690

截至目前，您唯一可以拆分付款的付款方式是[Paypal Adaptive Payments](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)。Verisign、Authorize.Net 和其他类似的支付网关不提供此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:22:21.163

看看我们专为此任务设计的产品[Balanced 。](https://www.balancedpayments.com)

核心概念是借方（买家的钱）和贷方（卖家的钱）分为两个独立的交易，这意味着您可以借记一个买家，然后创建两个（或一个，或三个......）单独的学分来支付由此产生的钱。这通常是两个积分，一个给您的卖家，另一个给您自己收取费用，但是您可以进一步拆分。

# sharepoint-2010 - Sharepoint 工作流任务时间限制

> ID：12331856
> 
> 赞同：0
> 
> 时间：2012-09-08T15:03:06.573
> 
> 标签：sharepoint-2010, workflow

我正在构建共享点工作流我希望其中一个任务在时间 IE 之后结束：如果用户在 30 分钟内没有批准此任务，则任务结束并且下一个任务开始是否有可能在共享中进行类似的事情点工作流 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:02:42.640

检查这些帖子：

*   [http://amarkeev.wordpress.com/2011/11/11/item-expiration-reminders-in-sharepoint-using-workflow/](http://amarkeev.wordpress.com/2011/11/11/item-expiration-reminders-in-sharepoint-using-workflow/)
*   [http://thingsivefoundout.blogspot.co.uk/2012/07/triggering-workflow-when-expiry-date-is.html](http://thingsivefoundout.blogspot.co.uk/2012/07/triggering-workflow-when-expiry-date-is.html)

尝试在日期和存储日期中使用添加分钟，检查存储的日期时间与当前时间。

# c# - MVC LINQ 动态排序通过获取列类型

> ID：12331860
> 
> 赞同：2
> 
> 时间：2012-09-08T15:03:48.690
> 
> 标签：c#, asp.net-mvc, linq, dynamic-typing

我正在尝试动态订购产品列表。

```
Product:
price (int)
name (string) 
```

到目前为止，我已经设法获得以下内容：

```
string columnToOrderBy = "price";
ParameterExpression param = Expression.Parameter(typeof(Product), "p");
var ordering = Expression.Lambda<Func<Product, double>>(Expression.Property(param, columnToOrderBy), param); 
```

这适用于按价格排序，但是由于列类型，它在按名称排序时不起作用。

```
Expression.Lambda<Func<Product, double>> 
```

无论如何要获取列的类型以在 Func 方法中设置它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T15:07:16.377

看看动态 LINQ，Scott Gu 在这里做了一篇很棒的文章[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-动态查询库.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

它使它变得如此简单

```
query = query.OrderBy(columnName); 
```

或者

```
//orderby descending
query = query.OrderBy(columnName + " DESC"); 
```

当您不需要时，无需手动操作表达式树。使用动态 LINQ 将使您的代码更易于理解和维护。

* * *

## 编辑

您现在可以将其安装为 Nuget 包，但它们似乎都不是来自官方来源（在撰写本文时）。

这是一个[香草包](https://www.nuget.org/packages/System.Linq.Dynamic/)，其中包含 Scott Gu 提供的代码。

这是[Scott 代码的一个分支，](https://www.nuget.org/packages/System.Linq.Dynamic.Library/)它已被扩展以包含更多功能。它似乎正在积极开发中，看起来很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T05:00:33.423

1.  PM> Install-Package System.Linq.Dynamic

2.  query = query.OrderBy(columnName);

# java - 从 JTextArea 获取插入符号位置

> ID：12331861
> 
> 赞同：1
> 
> 时间：2012-09-08T15:03:51.027
> 
> 标签：java, swing, document, jtextarea, caret

我可以通过使用从 Jtextarea 获取行号和列号，

```
 int caretpos = textArea.getCaretPosition();
   int row = textArea.getLineOfOffset(caretpos);

   int column = caretpos - textArea.getLineStartOffset(row); 
```

如何从行号和列号中获取插入符号的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:56:24.433

对于您的两个问题，可以删除答案

*   [文档是 JTextComponents 的模型](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Document.html)

*   您可以确定每一行的 int start / end

*   `Caret`您可以通过以下方式确定 int 开始/结束`CaretListener`

*   用于从视图中收听变化`DocumentListener`

*   用于防止/修改输入`DocumentFilter`

# android - 在 TextView 中设置 RTL 语言

> ID：12331862
> 
> 赞同：1
> 
> 时间：2012-09-08T15:03:52.580
> 
> 标签：android, android-layout

我正在尝试在我的 TextView 中设置从右到左的语言。我在这里读过： [在 android 模拟器中使用希伯来语](https://stackoverflow.com/questions/2593503/using-hebrew-with-the-android-emulator)

我应该使用“\u200F”字符模式。所以我试图在我的列表视图适配器中设置它：

```
holder.tvTitle.setText("\u200F" + articleRow.title); 
```

但它似乎没有任何影响。我的文字设置为正确的重力。可能是什么问题？

提前致谢。

# javascript - Javascript中的css标签“-webkit-min-device-pixel-ratio”是如何实现的？

> ID：12331863
> 
> 赞同：0
> 
> 时间：2012-09-08T15:04:05.540
> 
> 标签：javascript, css, html

`-webkit-min-device-pixel-ratio`JavaScript 中的 css 标签是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:03:55.233

如果我正确理解了您的问题，您可以使用对象的以下属性在 JavaScript 中访问此属性`window`：

```
window.devicePixelRatio 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:14:34.657

任何 CSS 属性都有对应的`style`对象属性。这包括供应商扩展。

```
elem.style.WebkitMinDevicePixelRatio = "..."; 
```

# windows - 如何将长参数粘贴到 Windows 的调试器中？

> ID：12331866
> 
> 赞同：1
> 
> 时间：2012-09-08T15:04:21.640
> 
> 标签：windows, haskell, cmd, ghci

我正在尝试在文本编辑器中编写函数的参数并将它们粘贴到控制台中，但控制台不允许我这样做。（我的参数列表很长，格式开始变得疯狂。）

我正在使用在`cmd.exe`窗口中运行的 ghci。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:32:31.847

正如评论中指出的那样，在 Windows 控制台中，您可以右键单击标题栏并执行`Edit > Paste`.

如果您只想在窗口中单击鼠标右键立即粘贴，您可以打开`QuickEdit`模式：

*   右键单击窗口的标题栏，然后选择`Properties`。
*   选择`Options`选项卡
*   在`Edit Options`, 打勾`QuickEdit Mode`
*   单击确定，当它询问您时，选择
*   保存具有相同标题的未来窗口的属性。这意味着每次运行 ghci 时都会发生这种情况。

在 XP 下工作，据我通过谷歌得知，同样的技巧在 Vista 和 Windows 7 中也能工作。

这也具有您不需要选择`Edit > Mark`选择文本的效果。（选择复制后按回车，当然也可以右键粘贴。）

# java - 为什么不推荐在子类中声明与超类中的字段同名的字段？

> ID：12331868
> 
> 赞同：0
> 
> 时间：2012-09-08T15:04:34.263
> 
> 标签：java

为什么不推荐在子类中声明与超类中的字段同名的字段？[这里](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)有说明。这种*隐藏*会导致什么？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T15:09:11.440

好吧，这里有两个问题：

*   一个领域隐藏另一个领域的混乱
*   有两个状态可能意味着非常相似的事情的混乱

第一点很容易通过简单地保持字段私有来缓解，这通常是一个好主意。然而，可以说第二点更重要。如果您`name`在同一个对象中有两个字段都被调用（例如），即使没有一段代码知道这两个字段，这表明该对象中确实存在*两种*名称，在这种情况下它至少有一个字段名称更具体会有所帮助，*或者*您有两个字段代表同一状态，这非常脆弱且效率低下。（例如，更改一个而不更改另一个太容易了。）

# android - Android：每个应用程序都会在一段时间后关闭

> ID：12331871
> 
> 赞同：0
> 
> 时间：2012-09-08T15:05:03.040
> 
> 标签：android, memory, ram

我有一个应用程序在一段时间后关闭。该应用程序消耗大约 20MB 的 RAM。我确实有超过 120MB 的内存可用。我不确定这是操作系统行为还是我的应用程序有问题。即使使用像 Opera mini 这样的应用程序，它也会在一段时间后重新启动。有没有办法避免这个问题？

我的应用程序存在问题：我需要在 SD 卡中搜索具有某些特定扩展名（如 mp3、jpg 和其他一些扩展名）的文件，并将其存储在本地变量中。当应用程序再次重新启动时，它需要再次执行该工作。我需要避免这种情况。我正在使用 sharedPreferences 处理一些应用程序级别的设置。但庞大的数据是问题所在。

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:21:30.250

这是完全正常的行为。Android 会在后台运行一段时间后终止进程。一般来说，大多数编写良好的应用程序都没有“问题”，它们`SharedPreferences`会在活动停止等时将用户数据保存到持久存储（文件、数据库等）。

如果您认为您的流程应该更长寿，请编辑您的问题以提供此声明的理由，因为这可能有助于我们就如何组织您的应用程序提供建议。

# c++ - 写入文件原始磁盘扇区

> ID：12331879
> 
> 赞同：0
> 
> 时间：2012-09-08T15:06:15.567
> 
> 标签：c++, c, database

我正在使用 OS 便携式数据库服务器，我想知道在不锁定整个文件的情况下读取/写入索引文件磁盘扇区的最佳方法是什么。我的数据库磁盘管理器有一个位图，用于跟踪索引文件中所有已使用/未使用的扇区的位置。另外，是否有一种操作系统可移植的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:55:31.103

> ...在不锁定整个文件的情况下读取/写入索引文件磁盘扇区。

您可以只锁定您正在写入的（文件的）部分。在 Windows 下，这将使用[LockFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365202%28v=vs.85%29.aspx)来完成。顺便说一句，为什么不锁定整个文件很重要？无论如何，您的服务器将拥有对它的独占访问权限，并且它可以在内部管理锁定（除非您想要一个无服务器/嵌入式数据库，同时仍允许多个客户端连接到它）。

为了实现事务[持久性](http://en.wikipedia.org/wiki/Durability_%28database_systems%29)，您还需要确保您写入的数据不会在缓存/缓冲区中逗留，并且在正确的时间物理写入磁盘。在 Windows 下，考虑将 FILE_FLAG_WRITE_THROUGH（可能还有 FILE_FLAG_NO_BUFFERING，假设您自己进行缓存管理）传递给[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)。

我不认为有任何独立于操作系统的 APIs ——你需要在每个支持的操作系统下以特殊的方式来做。当然，没有什么能阻止您封装特定于操作系统的代码并向系统的其余部分提供统一的接口。

# android - 带有javascript函数的href

> ID：12331882
> 
> 赞同：0
> 
> 时间：2012-09-08T15:06:52.227
> 
> 标签：android

我正在开发一个应用程序，该应用程序通过 HTTP 请求将网页的源代码（以 aspx 格式）作为 html 字符串返回给我。

我有问题。

在此页面中，我有一个带有上述 3 个按钮的表格，其 href 如下所示：

```
<a href="javascript:some_function()"></a> 
```

修改表值。

我不打算使用 WebView。

我需要打开那个链接。

有没有办法在 href 中调用该函数来更新我的表值？

# php - 简单的 PHP if 语句不起作用

> ID：12331883
> 
> 赞同：-1
> 
> 时间：2012-09-08T15:06:55.393
> 
> 标签：php, if-statement

我需要一个简单的 php if 语句来检查是否有任何内容分配给变量。如果变量为空，我不希望显示任何内容，但如果有分配给变量的内容，我希望显示一行 html。

现在，无论变量是否赋值，都会显示 html。这是 if 语句：

```
if(!isset($twitter)) {
    echo '';
} else {
    echo '<li><a href="http://twitter.com/' . $twitter . '"><span class="ss-twitter ss-icon" style="background-color:' . $iconbgcolor . '; color:' . $iconcolor . '">L</span></a>';
    } 
```

如果您想查看项目的其余代码，请在[此处](https://github.com/ThisIsDallas/WP-Simple-Social/blob/master/wp-simple-social.php)找到。

我也尝试过使用空函数，但这也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T15:12:01.220

您设置`$twitter`如下：

```
$twitter = empty( $instance['twitter'] ) ? '&nbsp;' : $instance['twitter']; 
```

所以`$twitter`总是设置并且不会为空。`'&nbsp;'`不是空字符串。

改为使用`null`。

```
$twitter = empty( $instance['twitter'] ) ? null  : $instance['twitter']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:11:07.290

```
 $twitter = empty( $instance['twitter'] ) ? '&nbsp;' : $instance['twitter']; 
```

变量始终存在
尝试：

```
 $twitter = empty( $instance['twitter'] ) ? '' : $instance['twitter']; 

if(!empty($twitter)) {
    echo '';
} else {
    echo '<li><a href="http://twitter.com/' . $twitter . '"><span class="ss-twitter ss-icon" style="background-color:' . $iconbgcolor . '; color:' . $iconcolor . '">L</span></a>';
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T15:11:08.837

看起来这条线是你的问题：

```
$twitter = empty( $instance['twitter'] ) ? '&nbsp;' : $instance['twitter']; 
```

不管数组中的索引是否为空，`$twitter`都会设置。如果为空：.`'twitter'``$instance``'&nbsp;'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T15:08:27.867

代码有点令人费解：

在第 175 行，它这样做：

```
$twitter = empty( $instance['twitter'] ) ? '&nbsp;' : $instance['twitter']; 
```

将其设置为 the`$instance['twitter']`或 ' ' - 两者都不为空。

和 on 201 在相同的功能：

```
if(!isset($twitter)) 
```

这意味着`$twitter`无论如何都会设置。如果它在 175 上是空的，它现在包含`&nbsp;`这意味着它*已*设置。

我建议将第 175 行更改为：

```
$twitter = empty( $instance['twitter'] ) ? '' : $instance['twitter']; 
```

和第 201 行到：

```
if(empty($twitter)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T15:43:28.080

更正你的行

```
$twitter = empty( $instance['twitter'] ) ? '&nbsp;' : $instance['twitter']; 
```

至

```
$twitter = empty( $instance['twitter'] ) ? '' : $instance['twitter']; 
```

在那之后，你的`if`条件就会起作用。

干杯。

# php - TCPDF 未格式化

> ID：12331884
> 
> 赞同：2
> 
> 时间：2012-09-08T15:06:57.727
> 
> 标签：php, javascript, jquery, tcpdf

我正在使用 ajax 调用打印 pdf 并将其通过电子邮件发送给用户，但问题是 pdf 中的数据未格式化。

**这是我的ajax调用**

```
$(document).ready(function() {
$(function() {
    $(".submit").click(function() {
      $('.simpleCart_items').css({'position:':'relative'});
      $('.headerRow div').css({'display':'none'});
      $('.item-remove').css({'display':'none'});
       $('.itemRow').css({'position':'absolute'}, {'left':'0px'}, {'top':'50px'});
      $('.item-name').css({'position':'absolute'}, {'left':'50px'}, {'top':'0px'});
      $('item-price').css({'position':'absolute'}, {'left':'150px'}, {'top':'0px'});
      $('.item-total').css({'position':'absolute'}, {'left':'250px'}, {'top':'0px'});
      var data = $('#yhteystiedot').serializeArray();
      data.push( { name: 'cartContent', value: $('#emailedcart').html()});
      //alert (data);return false;
     $.ajax({
    type: "POST",
    data: data,
    url: "order/order.php",
    dataType: "html",
    error: function(){ alert("Jotakin meni pahasti pieleen! Yritä uudelleen?");
 },
    success: function() {
 alert("Onnistui");
        }

  });
  return false;

    });
  });        
}); 
```

它为推送到脚本的数据添加了样式，但它看起来并不应该如此。这是有关它的屏幕截图： ![pdf](../Images/7d182eaf63093561cde0cf79d1505570.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:12:38.133

抱歉，这里是正确答案。

仅使用**INLINE CSS**来处理 TCPDF 之类的；

```
<table style="width: 100px;" cellspacing="0" cellpadding="0">
  <tr>
    <td style="border: 1px solid #000000; height: 20px; text-align:center; font-weight: bold; font-size: x-large;" colspan=11>
        REPORT
    </td>
  </tr> 
```

或者像这样包装在你的代码中`<style>p{color:red;}</style>`

TCPDF 有类问题。使用 AJAX 发送此 HTML 数据。尝试这样并在此处发表评论。

# c# - 并行使用多个 Stream.BeginWrite 是否线程安全？

> ID：12331894
> 
> 赞同：1
> 
> 时间：2012-09-08T15:08:22.127
> 
> 标签：c#, stream

我有一个文件要填满，所以我觉得最好同时做。

**笔记：**

1.  我同时从多台计算机获取文件。
2.  每次调用 StartWrite 之前，我都会设置位置。-> 每次使用前都必须锁定吗？

是不是很好？你有更好的吗？

顺便说一句， Stream.Flush() 是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:55:03.510

原则上这是不安全的，因为即使您的流是线程安全的，您仍然必须非原子地设置位置并写入。

本机 Windows 文件 API 支持这一点，.NET 不支持。Windows 完全能够对同一文件进行并发 IO（如果 Windows 不支持，SQL Server 将如何工作？）。

`FileStream`我建议你每个线程只使用一个写作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T15:55:52.997

不，这在概念上是错误的。Stream（我假设您的意思是[System.IO.Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)类）是一个抽象类。当您实例化一个对象时，您正在使用许多子类之一。

假设关于子类的任何事情都是错误的方法，因为：

a) 有人可能会在您之后对您的代码进行修改，但看不到实际的子类实现是做什么的。b) 不太可能，但实施可能会改变。例如，如果有人在 Mono 框架上安装您的代码怎么办。

[如果您使用 FileStream 类，请考虑在FileShare](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)参数设置为 Write的同一个基础文件上创建两个（或更多）FileStream 对象。通过这种方式，您可以指定可能同时写入，但每个流都有自己的位置指针。

更新：直到现在我才看到您的评论“每台计算机都向我发送带有起始索引、结束索引和字节 [] 的部分”。实际上，对于这种情况，多个 FileStream 应该可以正常工作。

```
 void DataReceived(int start, byte[] data)
    {
        System.IO.FileStream f = new System.IO.FileStream("file.dat", System.IO.FileMode.Open, System.IO.FileAccess.Write, System.IO.FileShare.ReadWrite);
        f.Seek(start, System.IO.SeekOrigin.Begin);
        f.Write(data, start, data.Length);
        f.Close();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T15:42:32.260

尝试同时对同一个流执行多个写入操作是没有意义的。

底层系统一次只能写入文件中的一个位置，因此即使异步写入方法支持多线程，写入仍然会被阻塞。

只需定期写入文件，并使用锁定，以便一次只有一个线程写入文件。

# xmpp - 在 Metro 风格的应用程序中使用 agsXMPP

> ID：12331905
> 
> 赞同：1
> 
> 时间：2012-09-08T15:09:52.070
> 
> 标签：xmpp, microsoft-metro

我试图在适用于 Windows 8 的 Metro 风格应用程序中使用 agsXMPP 参考，但出现此错误：

```
Cannot find type System.Collections.CollectionBase in module mscorlib.dll 
```

我认为我需要整个 .NET 才能使用 agsXMPP，而 Metro 没有完整的。我能做些什么？有没有办法在 Metro 中使用 agsXMPP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:17:46.543

我建议调查 Matrix for WinRT (Metro)，它是 agsXMPP 的继任者。虽然它不是免费的，但它受到支持（或很快将支持）。

根据他们的[论坛](http://forum.ag-software.de/)，他们正在努力使 Matrix 为 Metro/WinRT 工作。鉴于他们的评论表明他们需要重写大量代码，因此 agsXMPP 能否轻松移植是值得怀疑的。

# c# - C# 中的列表集合，内部表示只会增长？

> ID：12331908
> 
> 赞同：0
> 
> 时间：2012-09-08T15:10:28.357
> 
> 标签：c#, arrays, collections

List 通常适用于添加和删除项目的原因之一是分配的内部数据表示比减少重新分配次数所需的要大。

有没有办法让这个类（或另一个类似的类）的实例根据需要增长一个像样的块大小，但防止减小内部数组的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T15:15:54.583

我不知道内部数组会自动减小大小（您可以使用`TrimExcess`手动减小它）。 `List<T>`每当空间不足时，总是将内部阵列的容量增加一倍。`Capacity`如果你不喜欢内置策略，你可以编写一个包装类来增加你想要的。

# image - 图像点击时显示文本框

> ID：12331909
> 
> 赞同：2
> 
> 时间：2012-09-08T15:10:30.960
> 
> 标签：image, textbox, onclick, show

当用户单击图像时，我想显示一个文本框。

这是我的代码：

```
 print "<img src=\"../resources/pictures/pages/edit-button.png\" height=\"18px\" onClick=\"document.getElementById('#$txtboxName').style.display=\"block\">";

 print "<input type=\"text\" name=\"$txtboxName\" size=\"20\" title=\"State Permission Here\" style=\"display:none\"    />"; 
```

我的代码不起作用，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:13:07.837

替换为 getElementByName

```
 print "<img src=\"../resources/pictures/pages/edit-button.png\" height=\"18px\" onClick=\"document.getElementByName('#$txtboxName').style.display=\"block\">";

 print "<input type=\"text\" name=\"$txtboxName\" size=\"20\" title=\"State Permission Here\" style=\"display:none\"    />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:16:15.410

看到这个[链接](http://jsfiddle.net/TKMjE/)

```
$('img').on('click',function(){
    $('#inputField').show();
});​ 
```

# .net - 我可以在同一个 Visual Studio 解决方案中定位 .NET 4 和 .NET 4.5（使用实体框架时）吗？

> ID：12331912
> 
> 赞同：2
> 
> 时间：2012-09-08T15:10:40.977
> 
> 标签：.net, .net-4.0, visual-studio-2012, .net-4.5, entity-framework-5

我有一个包含 Web 应用程序和一些客户端代码的 Visual Studio 2012 解决方案。应用程序的结构方式，有一个用于数据访问的共享类库。

客户端代码需要以 .NET 4 为目标，因为我将把它部署到可能没有 .NET 4.5 的机器上。由于我控制 Web 服务器端，因此我可以为此假设 .NET 4.5。

现在，客户端和服务器端都需要使用数据访问库，因此它只需要使用.NET 4。但是，这给我带来了意想不到的问题。

数据访问库使用实体框架。作为 .NET 4，它使用 EF 4.4 版。但是，Web 应用程序还需要引用实体框架，并且是 .NET 4.5，它使用 EF 版本 5.0。

当我尝试运行应用程序时，这会导致（间歇性）错误。（我在同一台机器上从 VS2012 启动网站和客户端代码）。

如果我只是在浏览器的地址栏中输入一个 URL，该网站就可以正常工作 - 它能够使用数据访问库毫无问题地获取数据。但是，当我使用客户端应用程序时，它（通常，并非总是如此！）从 Web 端返回一个服务器错误，说它（Web 端）无法加载实体框架程序集：

> 无法加载文件或程序集 'EntityFramework, Version=5.0.0.0, ... 找到的程序集的清单定义与程序集引用不匹配。

我不确定这是否只是一个问题，因为我在调试器中运行，在同一台机器上，或者这是否会在部署后影响我的应用程序。

我在这里做了什么疯狂的事情，还是应该可以正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:00:09.577

对于尝试此操作的任何人：只要您在点击“运行”之前执行“构建解决方案”（在我的情况下以调试模式启动客户端应用程序，但在不调试的情况下启动 Web 应用程序），它就可以工作。要调试 Web 应用程序，我需要显式启动它（右键单击，调试），然后启动客户端应用程序（右键单击，调试）。同样，每次都需要“构建解决方案”（偶尔需要“重建”）。

**编辑**：aaaannnndd ......突然它停止工作了。但是，我发现当我在 VS 中运行客户端应用程序时，它会使用客户端应用程序使用的那个构建/更新 Web 项目 bin 目录中的 EF DLL，这会导致网站的版本不匹配被访问，因为该网站期待更高版本。为了解决这个问题，我现在有一个批处理文件，它将正确版本的 EF DLL 复制到网站 bin 目录中。所以，我可以启动客户端应用程序，然后执行我的批处理文件，然后启动网站。很痛苦，但至少它现在可以可靠地工作。

# javascript - 为什么我可以引用尚未在 Javascript 中定义的变量？

> ID：12331919
> 
> 赞同：1
> 
> 时间：2012-09-08T15:11:28.213
> 
> 标签：javascript

在这里创建函数`foo`时，我引用了一个`fromTheFuture`尚未声明的变量。这**实际上**按预期工作，但**为什么**呢？它被认为是危险的还是不好的做法？

```
var foo = function(x) {
  return fromTheFuture * x;
};

var fromTheFuture = 5;

console.log(foo(10)); 
```

我可以看到这非常方便，如果您有几个想要以循环方式相互使用的函数 - 而不必`var`在方法的开头声明它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T15:13:11.333

由时间`foo`被调用，`fromTheFuture`被定义。更准确地说，由于提升，您的代码本质上是：

```
var foo, fromTheFuture;
foo = function(x) {return fromTheFuture*x;};
fromTheFuture = 5;
console.log(foo(10)); 
```

`foo(10)`如果你以前打电话`fromTheFuture=5`，你会得到`NaN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:27:36.423

是的，首先**处理**整个脚本，将变量添加到“数据存储”中，然后才执行执行。

但是，不鼓励这样做，因为它会使代码难以阅读。如果您想了解更多关于 javascript 代码质量的信息，请查看[jslint](http://www.jslint.com/)。这是 js 的一种 FxCop。尝试在那里复制粘贴您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T15:27:53.637

在javascript中隐藏它的原因它首先定义所有变量，然后开始初始化，然后如果某个地方需要它的初始化点，它会尝试先初始化调用一个

# f# - kendoui websharper 并且无法从另一个模型访问方法

> ID：12331921
> 
> 赞同：1
> 
> 时间：2012-09-08T15:11:38.807
> 
> 标签：f#, websharper

学习新事物总是追随已经存在的事物。所以我重新配置了这个例子（http://www.websharper.com/samples/KendoChart），它工作得很好。（只有第 12 行的图表。我将系列保存到某个变量中，它看起来像这样。所以第 12 行应该是。

```
let Chart chartType stack = 
        let  data =  [|

                        chart.SeriesConfiguration (
                            Name = "World",
                            Data = [|15.7 ; 16.7 ; 20\. ; 23.5; 26.6|]
                        )

                        chart.SeriesConfiguration (
                            Name = "United States",
                            Data = [|67.96 ; 68.93 ; 75\. ; 74\. ; 78.|]
                        )
                    |] 
```

数据在第 36 行系列 = 数据... 并且工作正常。但是，如果我希望我的数据...

```
 let Chart chartType stack = 
        let techs = StoneMiner.Charts.technologies()
        let  data = seq { for i in techs do 
                        yield  chart.SeriesConfiguration (
                                 Name = fst i ,
                            Data =[|snd i|]//; 16.7 ; 20\. ; 23.5; 26.6|]
                        ) }
                   |> Seq.toArray 
```

其中 let techs = StoneMiner.Charts.technologies() 是技术在另一个命名空间和模块中......

我收到一些奇怪的错误... 错误 1 ​​无法翻译方法调用：技术（..）[StoneMiner.Charts]。因为它在另一个模块中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T13:50:49.133

您的函数`StomeMiner.Charts.technologies`似乎没有`[<JavaScript>]`注释。这可以防止它被翻译成 JavaScript 并因此在客户端使用。

根据经验，您从客户端使用的任何内容都需要使用其中的一个属性进行注释`IntelliFactory.WebSharper.Core.Attributes`（当您打开时可以直接访问这些属性`IntelliFactory.WebSharper`）。视情况而定，它可以是`[<JavaScript>]`（用于翻译成 JS）、`[<Inline "...">]`（内联一些 JS 代码）、`[<Remote>]`（用于对服务器的 Ajax RPC 调用）或不太常见的，如`[<Stub>]`或`[<Direct>]`.

# vb.net - vb.net file.encrypt 不支持的解决方法

> ID：12331925
> 
> 赞同：0
> 
> 时间：2012-09-08T15:11:58.020
> 
> 标签：vb.net, encryption

其他线程已经涵盖了 W7HE 不支持 vb 上的 file.encrypt 。但是我找不到一个简单的解决方法，我知道的唯一其他加密功能是使用：

```
Imports system.security.Cryptography 
```

然后按照

```
Dim rsa As New RSACryptoServiceProvider
Dim encoder As New UTF8Encoding 
```

等等等等

但是，这只适用于字符串，我需要将文件作为一个整体进行加密。任何想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T04:14:31.500

file.encrypt 使用 EFS，实际上是*透明的*加密; 用户帐户存储主证书，因此使用该帐户登录的任何人都可以访问任何应用程序中的文件内容。根据您的需要，这可能根本不是您想要的。如果您想单独为您的应用程序复制 EFS 行为，只需将主密码存储在用户的私有文件中的某个位置，将您的数据文件拆分为“密钥”和“数据”部分，然后使用主密码加密密钥。（Real EFS 有一些微妙之处：它可以为许多不同的用户分别加密密码，因此它允许不同的用户访问每个文件，在主用户密码丢失的情况下提供恢复选项。它还使用用户的密码来加密主密码，因此如果有人更改密码，他们将无法打开文件。）

基本方法只是提示用户输入密码并使用它一次加密或解密整个文件，而不是一次一个字符串。序列化你的文件，但是你会不加密，然后将整个字节数组传递给类似于[EncryptStringToBytes_Aes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider.aspx)的东西。如果你写的是字节而不是字符串，唯一的区别是改变：

```
using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
    {
        swEncrypt.Write(plainText);
    } 
```

至

```
csEncrypt.Write(plainText); 
```

无论哪种方式，对于您将使用的实际加密`AesCryptoServiceProvider`，而不是`RSACryptoServiceProvider`用于传递给 AES 和类似算法的密钥/密码的顶级身份验证和加密。它很少用于加密整个文件，而且当你这样做时速度非常慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-27T00:06:37.917

我附上了我写的一个程序来帮助你。它非常有效，可以加密任何你想要的东西。我在里面留下了笔记来回答你所有的问题。在底部，您将看到一个添加的类以减少程序的内存使用量。它工作得相当好，（8％-10％）享受。所需物品：*3 个按钮（浏览）（加密）（解密）*1 个文本框项目视频见我的链接：

第 1 部分：[https ://www.youtube.com/watch?v=sVaA2q8ttzQ](https://www.youtube.com/watch?v=sVaA2q8ttzQ)

第 2 部分：[https ://www.youtube.com/watch?v=TyafeBJ53YU](https://www.youtube.com/watch?v=TyafeBJ53YU)

```
'Created by: Rythorian77 | github.com/rythorian77
Imports System.IO
Imports System.Security.Cryptography
Imports System.Text

Public Class Form1

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim ramClass As New AESRam()
    End Sub

    Private Sub Browse_Click(sender As Object, e As EventArgs) Handles Browse.Click

        'Allows you to access files from folders
        Dim fetchCryptDialog As New OpenFileDialog With {
            .CheckFileExists = True,
            .InitialDirectory = "C:\",
        .Multiselect = False
        }

        If fetchCryptDialog.ShowDialog = DialogResult.OK Then
            TextBox1.Text = fetchCryptDialog.FileName
        End If

    End Sub

    Private Sub Encrypt_Click(sender As Object, e As EventArgs) Handles Encrypt.Click

        'File path goes to textbox
        Dim Rythorian77 As String = TextBox1.Text

        'This password can be whater you want.
        Dim password As String = "123456789ABCDEFG!@#$%^&*()_+"

        'A data type is the characteristic of a variable that determines what kind of data it can hold.
        'Data types include those in the following table as well as user-defined types and specific types of objects.
        Dim key As Byte() = New Byte(31) {}

        'When overridden in a derived class, encodes a set of characters into a sequence of bytes.
        Encoding.Default.GetBytes(password).CopyTo(key, 0)

        'RijndaelManaged still works but is considered obsolete in todays world so we use AES
        'Represents the abstract base class from which all implementations of the Advanced Encryption Standard (AES) must inherit.
        'https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.aes?view=net-6.0
        Dim aes As New RijndaelManaged() With
            {
                .Mode = CipherMode.CBC,
                .KeySize = 256,
                .BlockSize = 256,
                .Padding = PaddingMode.Zeros
            }

        'Reads a sequence of bytes from the current memory stream and advances the position within the memory stream by the number of bytes read. 
        Using mnemonicData As New MemoryStream

            'Defines a stream that links data streams to cryptographic transformations.
            Using cStream As New CryptoStream(mnemonicData, aes.CreateEncryptor(key, key), CryptoStreamMode.Write)
                Dim buffer As Byte() = File.ReadAllBytes(Rythorian77)
                cStream.Write(buffer, 0, buffer.Length)
                Dim appendBuffer As Byte() = mnemonicData.ToArray()
                Dim finalBuffer As Byte() = New Byte(appendBuffer.Length - 1) {}
                appendBuffer.CopyTo(finalBuffer, 0)
                File.WriteAllBytes(Rythorian77, finalBuffer)

            End Using
        End Using

    End Sub
 'The above code notes compliment the same
    Private Sub Decrypt_Click(sender As Object, e As EventArgs) Handles Decrypt.Click
        Dim Rythorian77 As String = TextBox1.Text

        Dim password As String = "123456789ABCDEFG!@#$%^&*()_+"

        Dim key As Byte() = New Byte(31) {}

        Encoding.Default.GetBytes(password).CopyTo(key, 0)

        Dim aes As New RijndaelManaged() With
            {
                .Mode = CipherMode.CBC,
                .KeySize = 256,
                .BlockSize = 256,
                .Padding = PaddingMode.Zeros
            }

        Using mnemonicData As New MemoryStream
            '>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>    < aes.CreateDecryptor > is the only change from above aes.CreateEncryptor
            Using cStream As New CryptoStream(mnemonicData, aes.CreateDecryptor(key, key), CryptoStreamMode.Write)
                Dim buffer As Byte() = File.ReadAllBytes(Rythorian77)
                cStream.Write(buffer, 0, buffer.Length)
                Dim appendBuffer As Byte() = mnemonicData.ToArray()
                Dim finalBuffer As Byte() = New Byte(appendBuffer.Length - 1) {}
                appendBuffer.CopyTo(finalBuffer, 0)
                File.WriteAllBytes(Rythorian77, finalBuffer)

            End Using
        End Using

    End Sub

End Class

**Add this separate Class:**

Imports System.Runtime.InteropServices

Public Class AESRam

    'This controls the amount of RAM that your process uses, it doesn't otherwise have any affect on the virtual memory size of your process. 
    'Sets the minimum and maximum working set sizes for the specified process.
    'This will cut memory usage in half.
    <DllImport("KERNEL32.DLL", EntryPoint:="SetProcessWorkingSetSize", SetLastError:=True, CallingConvention:=CallingConvention.StdCall)>
    Friend Shared Function SetProcessWorkingSetSize(pProcess As IntPtr, dwMinimumWorkingSetSize As Integer, dwMaximumWorkingSetSize As Integer) As Boolean
    End Function

    'Retrieves a pseudo handle for the current process.
    <DllImport("KERNEL32.DLL", EntryPoint:="GetCurrentProcess", SetLastError:=True, CallingConvention:=CallingConvention.StdCall)>
    Friend Shared Function GetCurrentProcess() As IntPtr
    End Function

    'See Above
    Public Sub New()
        Dim pHandle As IntPtr = GetCurrentProcess()
        SetProcessWorkingSetSize(pHandle, -1, -1)
    End Sub

End Class 
```

# asp.net - 在无网络环境中调试 ASP.NET 应用程序

> ID：12331927
> 
> 赞同：1
> 
> 时间：2012-09-08T15:12:13.707
> 
> 标签：asp.net, visual-studio-2010, dns

我得到一个

```
Stack Trace:

[SocketException (0x2af9): No such host is known]
   System.Net.Dns.GetAddrInfo(String name) +471 
```

尝试在未连接网络接口的笔记本电脑上调试 ASP.NET 网站时。

这是合乎逻辑的，因为没有 DNS 服务器来解析 localhost GetAddrInfo 调用。如何解决此问题并允许自己在断开连接的环境中调试网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:20:21.127

我是一个非常敬业的“在长途飞行中破解伟大的东西”的人。长期的答案是您将应用程序设计为在断开连接的环境中工作。对于当今倾向于依赖公共互联网服务运行的应用程序来说，这更加困难。然后他们又在飞机上放了wifi。

无论如何，很难给出具体的建议，因为重要的问题是“你为什么首先要访问外部主机”。如果您只能访问有限数量的站点，并且它可以处理无法与相关外部服务通信的问题，您可以使用[Windows 主机文件](http://en.wikipedia.org/wiki/Hosts_%28file%29)来提供您自己的本地 DNS 服务。你可能会在这背后伪造更多的东西。但这通常不能很好地扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:21:21.257

您可以添加一个虚拟网卡。那应该绕过DNS的问题。以下是执行此操作的几个选项：

[如何在 Windows 上创建虚拟网络接口？](https://stackoverflow.com/questions/47854/how-do-you-create-a-virtual-network-interface-on-windows)

# java - 我如何学习如何使用 slf4j？

> ID：12331931
> 
> 赞同：4
> 
> 时间：2012-09-08T15:12:33.113
> 
> 标签：java, logging, slf4j

今天早些时候我问了一个关于 log4j 的问题，并被告知它现在是“遗留的”，我应该使用 slf4j 和 logback。所以现在我将使用它，但我不明白从哪里开始？在我阅读之后，slf4j 是其他日志框架的抽象层，但除了非常基本的 hello world 日志教程之外，我找不到任何东西？如何配置 slf4j 并使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T15:27:19.957

Slf4j 是 API，是的 logback 可能是您想要的实现。只需在您的代码中使用 slf4j 记录器类并将 logback.jar 和 logback.xml 添加到您的类路径。logback 主页包含很多入门所需的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T15:51:23.343

您将 slf4j 与 log4j（或任何其他日志记录实现）一起使用。因此，如果您将 log4j 与 slf4j 一起使用，则必须在 log4j.properties 中提供 log4j 的配置。所以好处是如果你想稍后更改为 Logback，你只需`slf4j-log4j12-1.6.6.jar`要用新的绑定 jar 替换绑定 jar 文件（对于 log4j 可能是）并添加 Logback 的配置。代码没有变化。

这个[线程](https://softwareengineering.stackexchange.com/questions/108683/slf4j-vs-log4j-which-one-to-prefer)应该可以帮助你。
SLF4J[手册](http://www.slf4j.org/manual.html)

# php - 我需要在 json 数组上应用 htmlspecialchars / htmlentites 吗？

> ID：12331933
> 
> 赞同：2
> 
> 时间：2012-09-08T15:12:43.547
> 
> 标签：php, jquery, html-entities, htmlspecialchars

我想问在我通过ajax请求访问的我的php脚本中，我正在返回json数据（从数组转换）

```
 echo json_encode($row_array); 
```

我在 jquery 中获取这些数据并以表格形式显示它。在返回数据之前我需要应用 htmlspecialchars / htmlentites 吗？

那么这样做的正确方法是什么？以下代码给了我一个错误：

```
echo htmlentities(json_encode($row_array)); 
```

谢谢伊姆兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:42:30.700

上下文很重要。

`value`如果您使用 jQuery 的`val()`函数来填充数据，那么如果数据进入表单输入，则根本不需要在服务器端转义数据。

示例：http: [//jsfiddle.net/Y6TWv/1/](http://jsfiddle.net/Y6TWv/1/)

```
var data = '<strong>STRONG TEXT</strong>';

$('input').val(data); // output is escaped
$('p').text(data);    // output is escaped
$('p').html(data);   ​ // output is not escaped 
```

此外，如果您要转义数据，请*不*要这样做：

```
// escapes the entire json string, not good - quotes will be broken
echo htmlentities(json_encode($row_array)); 
```

在构建数组之后，或者在构建数组时，您必须在`$row_array`对其进行 json 编码之前对 first 的每个项目进行转义。[`array_map`](http://php.net/manual/en/function.array-map.php)

一般来说，你应该更喜欢`htmlspecialchars`，`htmlentities`但你不太可能需要任何一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:36:39.597

不要以这种方式应用 htmlentities。您应该在 json 编码之前遍历数组并转义每个元素，然后 json 编码安全显示值的数组。在您的使用中，json 只是数组的传输层。您没有显示 json 数组，只是显示元素数据。不要逃避传输层——它可能会使 json 字符串无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T18:01:22.817

我只是在 JSON 数组中遇到了单引号问题。Chrome 不喜欢通过 ajax 返回的 JSON 响应中的单引号。我用 htmlspecialchars(, ENT_QUOTES) 转义了每个值。

```
$theoptions['MemberList'] = array();
while($row = mssql_fetch_assoc($result)) {
   $memberelement = array(
                       'Display'=> htmlspecialchars($row['FullName'], ENT_QUOTES),
                       'Value'      =>  $row['ID']);
   $theoptions['MemberList'][] = $memberelement;
}

header('Content-Type: application/json');
echo json_encode($theoptions); 
```

# hadoop - 在 Windows 7 上运行 Hadoop

> ID：12331944
> 
> 赞同：1
> 
> 时间：2012-09-08T15:14:34.907
> 
> 标签：hadoop, windows-7-x64

我在 Windows 7 64 位上运行 Hadoop 1.0.3 时遇到问题。

我正在按照[此链接](http://blog.sqltrainer.com/2012/01/installing-and-configuring-apache.html)的指示进行操作。我已经下载了 Cygwin 并成功启动了 SSH 守护进程。`/usr/local`我使用 Win-Zip 16.5将 Hadoop 解压到 Cygwin文件夹中。[我使用MetaPad](http://liquidninja.com/metapad/)编辑了 hadoop-env.sh 以指向我的 JDK ：

```
export JAVA_HOME="C:\\Program Files\\Java\\jdk1.7.0_02" 
```

我运行了 dos2unix 以确保我没有任何字符问题。

但是当我在 Cygwin 终端中运行 hadoop 命令来获取版本时，我看到了这个：

```
$ bin/hadoop version
bin/hadoop: line 2: $'\r': command not found
bin/hadoop: line 17: $'\r': command not found
bin/hadoop: line 18: $'\r': command not found
bin/hadoop: line 49: $'\r': command not found
: No such file or directoryn
bin/hadoop: line 52: $'\r': command not found
bin/hadoop: line 60: syntax error near unexpected token `$'in\r''
'in/hadoop: line 60: `case "`uname`" in

Michael@Michael-PC /usr/local/hadoop
$ 
```

有人见过这个吗？我错过了一个简单的更正吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:26:14.440

似乎 unix 和 windows 之间的回车差异导致了问题。尝试在 shell 脚本上运行 dos2unix

转到 hadoop bin 目录并尝试：

```
dos2unix.exe hadoop.sh 
```

然后试试 hadoop 命令。

# c# - C# ASP.Net WebForm Membership Extra User Details (Profile)

> ID：12331947
> 
> 赞同：4
> 
> 时间：2012-09-08T15:15:16.987
> 
> 标签：c#, asp.net

我正在学习如何使用 ASP.net 会员资格，当用户注册时，他们只需创建用户名和密码，但是我想在我的网站上创建一个名为“个人资料”的页面，他们可以在其中填写额外的详细信息，例如名字，姓氏，出生日期等。但是我看不到我可以将它放在 asp.net 会员数据库中的哪个位置。有一个 asp.net_profile 表，但是我不确定它是如何工作的。

有人可以解释一下我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T15:24:48.473

您可能必须首先使用 Membership.CreateUser 创建 MembershipUser，获取新创建的用户的 id，然后将他的额外配置文件信息插入单独的表（如 ExtendedUserInfo 等），并将其与 aspnet_Users 表和外键链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T15:35:49.873

您应该将内置的会员资格视为一个黑匣子——扩展股票会员模式通常是一个非常糟糕的主意。

老实说，这些配置文件非常难看——如果方便存储杂项设置，那就太好了，但我不想存储我关心在某个时候提取的数据。主要问题是它将内容存储在不透明的序列化字段中，因此很难提取数据。开销可能很糟糕，因为它会在每个请求上反序列化这些东西，所以如果你有一个广泛的配置文件，它可能会变得昂贵。在大多数情况下，每次请求都提取某人的额外个人资料信息是不值得的。

至于用法，我将从[MSDN page](http://msdn.microsoft.com/en-us/library/2y3fs9xs%28v=vs.100%29.aspx)开始。另请注意，MVC 中还有其他挑战——它没有直接连接到该堆栈，尽管仍然可以使用它。

话虽如此，您可能想在这里建立自己的某种成员资料表。您可能会使用内置的成员资格位双重预订一些数据，但这没关系。您将希望将此表设置为与成员资格有某种关系——我更喜欢使用“所有者帐户 ID”结构，而不是将其直接键入帐户，因为这会使事情更加灵活。例如，如果有必要，它允许用户拥有多个配置文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T15:36:24.357

因此，由于您已经配置了成员资格和角色部分，因此您对配置文件部分执行相同操作。但在这里您可以提供如下属性：

```
<profile defaultProvider="AspNetSqlProfileProvider">
  <properties>
     <add name="Name" />
     <add name="Weight" type="System.Int32" />
     <add name="BirthDate" 
          type="System.DateTime" />
  </properties>
</profile> 
```

在您的代码中，您可以调用 Profile.Name 并分配一个值，ASP.Membership 框架管理存储这些值。

有关如何使用它的更多信息，请访问[http://msdn.microsoft.com/en-us/library/d8b58y5d(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/d8b58y5d(v=vs.100).aspx)它有点旧，但显示了基础知识。

# ruby - Ruby 可以使用哪些分析器？

> ID：12331955
> 
> 赞同：0
> 
> 时间：2012-09-08T15:16:16.633
> 
> 标签：ruby, profiling

我发现这个提到 GC 分析器的 SO 问题：[Is there a way to profile ruby​​ 1.9.2 scripts with memory allocation reports?](https://stackoverflow.com/questions/5156907/is-there-a-way-to-profile-ruby-1-9-2-scripts-with-memory-allocation-reports)

还有其他分析器吗？最好是免费的、易于使用的，并且可以使用 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:44:49.253

“-r profile”有一个[内置的分析器](http://www.ibm.com/developerworks/opensource/tutorials/os-ruby2/section3.html)，我用得很愉快。还有一个叫做[ruby​​-prof](http://ruby-prof.rubyforge.org/)的宝石。

# java - java.lang.OutOfMemoryError：Java 堆空间使用 -Xmx1024m

> ID：12331957
> 
> 赞同：0
> 
> 时间：2012-09-08T15:16:20.437
> 
> 标签：java, out-of-memory, xuggle, xuggler

当我尝试使用 Xuggler 解码和播放视频文件时遇到问题。我尝试使用 avi 和 mkv，从大文件 (2gb) 到小文件 (20mb)，它们都给了我相同的结果：它在窗口中显示来自视频的随机图像并给我一个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: Java heap space
at com.xuggle.xuggler.video.BgrConverter.toImage(BgrConverter.java:182)
at com.xuggle.xuggler.Utils.videoPictureToImage(Utils.java:322)
at testxuggler.VideoWindow.showVideo(VideoWindow.java:324)
at testxuggler.MenuBarre$4.actionPerformed(MenuBarre.java:263)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.AbstractButton.doClick(AbstractButton.java:357)
at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:1223)
at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:1264)
at java.awt.Component.processMouseEvent(Component.java:6267)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6032)
at java.awt.Container.processEvent(Container.java:2041)
at java.awt.Component.dispatchEventImpl(Component.java:4630)
at java.awt.Container.dispatchEventImpl(Container.java:2099)
at java.awt.Component.dispatchEvent(Component.java:4460)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
at java.awt.Container.dispatchEventImpl(Container.java:2085)
at java.awt.Window.dispatchEventImpl(Window.java:2478)
at java.awt.Component.dispatchEvent(Component.java:4460)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

该行： BufferedImage javaImage = Utils.videoPictureToImage(newPic); 触发错误

我尝试通过在运行命令行中添加以下行来更改内存大小： -Xms128m -Xmx1024m。

我使用的代码是此处提供的教程中的代码：[DecodeAndPlayVideo.java](http://code.google.com/p/xuggle/source/browse/trunk/java/xuggle-xuggler/src/com/xuggle/xuggler/demos/DecodeAndPlayVideo.java)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:21:47.027

OOM 意味着 JVM 中没有更多内存可用于新对象的分配。伴随 OOM 异常的 Stacktrace 指向请求这些分配的位置。它通常没有说明谁以及为什么消耗了所有内存。

OOM 有两个最常见的原因：

1.  算法尝试处理的数据量内存不足
2.  内存泄漏

第一个问题可以通过使用 Xmx 启动参数（简单的）增加堆大小或通过更改算法（困难的）来解决。

第二个问题可以通过多种方式解决。我推荐的一种方法是使用[Plumbr](http://plumbr.eu)，内存泄漏监控工具。

# java - Java中多维数组的遍历性能

> ID：12331959
> 
> 赞同：3
> 
> 时间：2012-09-08T15:16:25.230
> 
> 标签：java, performance, traversal

在下面的代码和结果中，我们可以看到“Traverse2”比“Traverse1”快得多，实际上它们只是遍历相同数量的元素。

1.这种差异是怎么发生的？

2.将较长的交互放入较短的交互中会有更好的性能吗？

```
public class TraverseTest {

    public static void main(String[] args)
    {
        int a[][] = new int[100][10];
        System.out.println(System.currentTimeMillis());

        //Traverse1
        for(int i = 0; i < 100; i++)
        {
            for(int j = 0; j < 10; j++)
                a[i][j] = 1;
        }

        System.out.println(System.currentTimeMillis());

        //Traverse2
        for(int i = 0; i < 10; i++)
        {
            for(int j = 0; j < 100; j++)
                a[j][i] = 2;
        }

        System.out.println(System.currentTimeMillis());
    }
} 
```

结果：

1347116569345

1347116569360

1347116569360

如果我将其更改为

```
System.out.println(System.nanoTime()); 
```

结果将是：

4888285195629

4888285846760

4888285914219

这意味着如果我们在里面放更长的interaction会有更好的性能。而且它似乎与缓存命中理论有一些冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:42:54.490

我怀疑你在这个微基准测试中看到的任何奇怪结果都是由于基准测试本身的缺陷造成的。

例如：

*   您的基准测试没有考虑“JVM 预热”效应，例如 JIT 编译器不会立即编译为本机代码这一事实。（这只会在代码执行一段时间后发生，并且 JVM 已经测量了一些使用次数以帮助优化。）处理这个问题的正确方法是将整个代码放在一个运行几次的循环中，然后丢弃任何看起来“奇怪”的初始时间集合......由于热身效应。

*   *理论上*可以优化基准中的循环。JIT 编译器可能能够推断出它们不做任何影响程序输出的工作。

最后，我想提醒您，像这样的手动优化通常是一个坏主意……除非您有令人信服的证据表明手动优化是值得的，并且此代码确实是应用程序所在的位置花费大量时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:41:52.997

首先，始终循环运行多次微基准测试。然后你会看到两个时间都是 0，因为数组大小太小了。要获得非零次，请将数组大小增加 100 倍。Traverse1 的时间约为 32 毫秒，Traverse2 的时间约为 250 毫秒。不同之处在于处理器使用高速缓存。访问顺序内存地址要快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T16:56:18.173

在我看来，数组的大小也会影响结果。喜欢：

```
public class TraverseTest {

    public static void main(String[] args)
    {
        int a[][] = new int[10000][2];
        System.out.println(System.currentTimeMillis());

        //Traverse1
        for(int i = 0; i < 10000; i++)
        {
            for(int j = 0; j < 2; j++)
                a[i][j] = 1;
        }

        System.out.println(System.currentTimeMillis());

        //Traverse2
        for(int i = 0; i < 2; i++)
        {
            for(int j = 0; j < 10000; j++)
                a[j][i] = 2;
        }

        System.out.println(System.currentTimeMillis());
    }
} 
```

Traverse1 需要**10000*3+1 = 30001**次比较来决定是否退出迭代，而 Traverse2 只需要**2*10001+1 = 20003**次比较。

Traverse1 需要 1.5 倍于 Traverse2 的比较次数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T15:29:06.833

我的输出（与您的原始代码 100i/10j 与 10i/100j ）：

```
1347118083906
1347118083906
1347118083906 
```

您正在使用非常糟糕的时间分辨率进行非常快速的计算。

我将 i 和 j 限制都更改为 1000。

```
 int a[][] = new int[1000][1000];
    System.out.println(System.currentTimeMillis());

    //Traverse1
    for(int i = 0; i < 1000; i++)
    {
        for(int j = 0; j < 1000; j++)
            a[i][j] = 1;
    }

    System.out.println(System.currentTimeMillis());

    //Traverse2
    for(int i = 0; i < 1000; i++)
    {
        for(int j = 0; j < 1000; j++)
            a[j][i] = 2;
    }

    System.out.println(System.currentTimeMillis()); 
```

输出：

```
1347118210671
1347118210687 //difference is 16 ms
1347118210703 //difference is 16 ms again -_- 
```

两种可能：

*   Java 热点将第二个循环更改为第一个循环或通过交换 i 和 j 进行优化。
*   时间分辨率仍然不够。

所以我将输出更改为 System.nanoTime()

```
 int a[][] = new int[1000][1000];
    System.out.println(System.nanoTime());

    //Traverse1
    for(int i = 0; i < 1000; i++)
    {
        for(int j = 0; j < 1000; j++)
            a[i][j] = 1;
    }

    System.out.println(System.nanoTime());

    //Traverse2
    for(int i = 0; i < 1000; i++)
    {
        for(int j = 0; j < 1000; j++)
            a[j][i] = 2;
    }

    System.out.println(System.nanoTime()); 
```

输出：

```
16151040043078
16151047859993 //difference is 7800000 nanoseconds
16151061346623 //difference is 13500000 nanoseconds --->this is half speed 
```

> 1.这种差异是怎么发生的？

请注意，即使忽略您只是使用了错误的时间分辨率，您也正在对不相等的情况进行错误的比较。第一个是连续访问，第二个不是。

可以说第一个嵌套循环只是为第二个循环做加热准备，那么它会使您对“第二个更快”的假设更加错误。

不要忘记二维数组是java中的“数组数组”。因此，最右边的索引将显示一个连续区域。第一个版本更快。

> 2.将较长的交互放入较短的交互中会有更好的性能吗？

```
for(int i = 0; i < 10; i++)
    {
        for(int j = 0; j < 100; j++)
            a[j][i] = 2;
    } 
```

增加第一个索引会更慢，因为下一次迭代会消失千字节，因此您不能再使用缓存行。

> 绝对不！

# java - 我应该将时区与 Postgres 和 JDBC 的时间戳分开存储吗？

> ID：12331962
> 
> 赞同：9
> 
> 时间：2012-09-08T15:16:52.660
> 
> 标签：java, postgresql, jpa, jdbc

似乎（也许我错了）如果您想保留 JDBC 和 Postgres 发生某些事情时的时区，您需要将时区与时间戳分开存储。

那就是我宁愿给我的 ORM/JDBC/JPA 一个 Java `Calendar`（或 Joda `DataTime`）说时区`America/New_York`到 Postgres`timestampz`字段。并且无论服务器时区（或默认为 UTC）如何，我都希望在检索时给我一个`Calendar`with timezone `America/New_York`。但是只看大多数 JDBC 代码（以及不会发生的依赖它的事情）。

**它是否正确？**

当 postgres 支持它时，我需要将 tz 存储在另一个字段中，这似乎很荒谬。

因此，似乎只有两个选项：

1.  选择`timestampz`Postgres 列作为 a`java.util.String`并解析它。
2.  将时区存储为单独的字段。

选项一和二需要某种类型的转换拦截器用于我的 SQL 映射/ORM 库。

*   什么是 JDBC 的最佳解决方案？
*   JPA 的最佳解决方案是什么（如果与 JDBC 不同）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T11:40:01.847

当您存储`timestamp with time zone`( `timestamptz`) 时，它会转换为 UTC 以存储在数据库中。检索到时，它会转换为客户端的当前时区，而不是它最初所在的时区。基本上，它是一个时间点。

还有`timestamp without time zone`（`timestamp`）。这不受转换的影响，但不*带有*时间戳。如果您`timestamp`在客户端时区设置为 UTC 的情况下存储 a，然后在客户端时区为“+08:00”时检索它，您将获得相同的值。这是您想要的一半，因为它保留了原始时间值。

名称和行为非常糟糕且令人困惑，但由 SQL 标准设置。

如果您希望在特定时区记录时间点，则必须单独存储时区。我建议将其存储为`INTERVAL`带有`CHECK`约束的`colname BETWEEN INTERVAL '-12' HOUR + INTERVAL '1' SECOND AND INTERVAL '12' HOUR`. 该定义拒绝 -12:00 并接受 +12:00；我不完全确定这是对的，所以检查一下。

您可以存储该`timestamp`时区的本地时间（我可能会这样做），或者存储`timestamptz`事件发生时的 UTC 时间加上一个偏移量，以便您将其转换为本地时间。

两者都适用于 JDBC。对于 JPA，这将取决于您的提供者对间隔类型的理解和映射程度。理想情况下，您希望在您的实体中使用临时生成的字段来重建您想要使用`timestamp`并`interval`存储在数据库中的日历实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:42:30.797

EclipseLink 支持将时区存储在 Oracle 中，如果您自定义 PostgreSQLPlatform，我认为您也可以将其存储在 Postgres 中。

# java - 使用外部类访问静态类成员

> ID：12331968
> 
> 赞同：0
> 
> 时间：2012-09-08T15:17:53.463
> 
> 标签：java, inner-classes, static-classes

`mysample`我有这样的代码，我需要`InnerClass`在. 我尝试通过创建一个新对象来访问它，但我得到了.`getInnerS()``NestedClass``InnerClass``java.lang.StackOverflowError`

```
public class NestedClass{
    private String outer = "Outer Class"; //NestedClass instance variable
    NestedClass.InnerClass innerClass = new NestedClass.InnerClass();

    void getOuterS(){
        System.out.println(outer); 
    }
    void getInnerS(){
        System.out.println(innerClass.mysample);
    }
    static class InnerClass{
        private String mysample = "Inner Class"; //InnerClass instance variable,
        NestedClass a = new NestedClass();
        void getIn(){
            System.out.println(mysample);
        }
        void getOut(){
            System.out.println(a.outer);
        }
    }
    public static void main(String[] args){
         NestedClass nestedClass = new NestedClass();
         NestedClass.InnerClass nestedInner = new NestedClass.InnerClass(); 
         nestedClass.getOuterS();
         nestedClass.getInnerS();
         nestedInner.getIn();
         nestedInner.getOut();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T15:25:32.063

在`InnerClass`构造函数中：

```
NestedClass a = new NestedClass(); 
```

因此，您创建了一个 new `NestedClass`，它创建了一个 new `InnerClass`，它创建了自己的自己`NestedClass`，并具有相应的`InnerClass`.... 难怪stackoverflow。

如果你想访问封闭类，你应该使用（内部`InnerClass`方法）

```
NestedClass.this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:26:23.173

```
NestedClass a = new NestedClass(); 
```

在静态 InnerClass 类中创建 NestedClass 的实例，并且 InnerClass 是静态的，这是一个循环。

InnerClass 不需要是静态的，这应该可以

```
public class NestedClass {
private String outer = "Outer Class"; //NestedClass instance variable
NestedClass.InnerClass innerClass = new NestedClass.InnerClass();

void getOuterS(){
    System.out.println(outer); 
}
void getInnerS(){
    System.out.println(innerClass.mysample);
}
class InnerClass{
    private String mysample = "Inner Class"; //InnerClass instance variable,
    NestedClass a = NestedClass.this;
    void getIn(){
        System.out.println(mysample);
    }
    void getOut(){
        System.out.println(a.outer);
    }
}
public static void main(String[] args){
     NestedClass nestedClass = new NestedClass();
     NestedClass.InnerClass nestedInner = nestedClass.innerClass; 
     nestedClass.getOuterS();
     nestedClass.getInnerS();
     nestedInner.getIn();
     nestedInner.getOut();
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T15:44:33.040

有了这个解决方案，成员类是`static`. 为了更好的比较，您可以阅读 [静态类声明](http://www.javaworld.com/javaqa/1999-08/01-qa-static2.html)

*静态嵌套类（描述）*

静态嵌套类不能访问外部类的非静态字段和方法，这在某些方面类似于类中定义的静态方法。只能通过外部类的实例引用来访问非静态字段和方法。在这方面，静态嵌套类与任何其他顶级类非常相似。

此外，静态嵌套类可以访问外部类的任何静态方法，包括私有方法。

这些类的好处主要在于实体的逻辑分组以改进封装，以及节省类空间。

```
public class NestedClass{
  private static String outer = "Outer Class"; //NestedClass instance variable
  InnerClass innerClass = new InnerClass();

  void getOuterS(){
    System.out.println(outer);
  }
  void getInnerS(){
    System.out.println(InnerClass.mysample);
  }
  InnerClass getInner(){
    return innerClass;
  }
  static class InnerClass{
    private static String mysample = "Inner Class"; //InnerClass instance variable,
     void getIn(){
      System.out.println(mysample);
    }
    void getOut(){
      System.out.println(outer); //access a static member
    }
  }
  public static void main(String[] args){
    NestedClass nestedClass = new NestedClass();
    NestedClass.InnerClass nestedInner = nestedClass.getInner();
    nestedClass.getOuterS();
    nestedClass.getInnerS();
    nestedInner.getIn();
    nestedInner.getOut();
  }
} 
```

# php - 如何使用ajax将变量发送到php？

> ID：12331969
> 
> 赞同：0
> 
> 时间：2012-09-08T15:17:54.560
> 
> 标签：php, ajax, variables

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <script type="text/javascript">
    function load(thediv, thefile)
    {
        if (window.XMLHttpRequest)
        {
        xmlhttp = new XMLHttpRequest(); 
        }
            else
            {
            xmlhttp = new ActiveXObject('Microsoft.XMLHTTP)');  
            }

                xmlhttp.onreadystatechange = function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                    document.getElementById(thediv) .innerHTML = xmlhttp.responseText;  
                    }
                }

                xmlhttp.open('GET', thefile, true);
                xmlhttp.send();

    }
    </script>
</head>

    <body>

<?php 

//connection to db and mysql query

    $result = mysql_query($query) or die(mysql_error());

$options=""; 

while ($row=mysql_fetch_array($result)) { 

$id=$row["idProducts"]; 
$thing=$row["country"]; 
$options.="<OPTION VALUE=\"$id\">".$thing.'</option>'; 
}
mysql_close();
?> 

<SELECT id="countrySearch" NAME=countrySearch onchange="load('divtest',   'step2.search.php')";>
<OPTION VALUE=0>Choose 
<?=$options?> 
</SELECT> 

<div id="divtest">
test
</div>

</body> 
```

step2.search.php 包括：

```
<?php
echo "I want it to store the users selection as a variable for php to use";
?> 
```

我遇到的问题是我想存储用户从下拉框中选择的内容，并在 php 中使用它来使用用户选择表单中的变量来执行 mysql 查询，以形成 mysql 语句的 WHERE 部分。然后使用ajax将新数据放入“divtest”中。

如何将用户选择存储到变量中，然后将其发送到 step2.search.php 中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:35:46.430

```
See Code Below 
```

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <script type="text/javascript">
    function load(thediv, thefile,selectvalue)
    {
        if (window.XMLHttpRequest)
        {
        xmlhttp = new XMLHttpRequest(); 
        }
            else
            {
            xmlhttp = new ActiveXObject('Microsoft.XMLHTTP)');  
            }

                xmlhttp.onreadystatechange = function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                    document.getElementById(thediv) .innerHTML = xmlhttp.responseText;  
                    }
                }

                xmlhttp.open("GET",thefile+"?q="+selectvalue,true);
                xmlhttp.send();

    }
    </script>
</head>

    <body>
    <form>

<?php 

//connection to db and mysql query

    $result = mysql_query($query) or die(mysql_error());

$options=""; 

while ($row=mysql_fetch_array($result)) { 

$id=$row["idProducts"]; 
$thing=$row["country"]; 
$options.="<OPTION VALUE=\"$id\">".$thing.'</option>'; 
}
mysql_close();
?> 

<SELECT id="countrySearch" NAME=countrySearch onchange="load('divtest',   'step2.search.php', this.value)";>
<OPTION VALUE=0>Choose 
<?=$options?> 
</SELECT> 

<div id="divtest">
test
</div>
</form> 
```

step2.search.php

```
<?php
    Simple grab this variable
    $id = $_GET['q'];

    //do your query stuffhere
?> 
```

# java - JSF 页面的最大大小

> ID：12331977
> 
> 赞同：0
> 
> 时间：2012-09-08T15:20:15.797
> 
> 标签：java, jsf, jsf-2

我创建了带有 51 个插入字段的 JSF 页面。当我测试 JSF 页面时，我得到了这个错误：

```
malformedXML: XML Parsing Error: unclosed CDATA section
Location: http://188.254.222.137:8080/DX-57/RMC-57/DatacenterProfile.jsf
Line Number 222, Column 52:
                    <script type="text/javascript">
---------------------------------------------------^ 
```

据我了解，我已经达到了 JSF 页面的最大大小。如何增加 Mojarra 缓冲区的大小？我使用版本 2.1.10。解决问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T10:33:20.283

在我们公司，我们使用 JSF 和顶级的 primefaces。我们有很大的 .xhtml 页面，这样的问题似乎与页面大小无关。好像您错过了一些结束标记，并且 jsf 页面抱怨 XML 格式错误。重新检查您自己编写的代码。试着弄清楚你是否错过了什么。这可能会有所帮助。BR，本

# database - 错误：函数 addgeometrycolumn 不是唯一的

> ID：12331981
> 
> 赞同：6
> 
> 时间：2012-09-08T15:20:42.890
> 
> 标签：database, postgresql, postgis, pgrouting

我正在尝试使用以下功能；

```
SELECT Assign_vertex_id('ways', 0.00001, 'the_geom', 'gid') 
```

但由于某种原因，它给了我以下错误；

```
NOTICE:  CREATE TABLE will create implicit sequence "vertices_tmp_id_seq" for serial column "vertices_tmp.id"
CONTEXT:  SQL statement "CREATE TABLE vertices_tmp (id serial)"
PL/pgSQL function "assign_vertex_id" line 15 at EXECUTE statement
ERROR:  function addgeometrycolumn(unknown, unknown, integer, unknown, integer) is not unique
LINE 1: SELECT addGeometryColumn('vertices_tmp', 'the_geom', 4326, '...
               ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts.
QUERY:  SELECT addGeometryColumn('vertices_tmp', 'the_geom', 4326, 'POINT', 2)
CONTEXT:  PL/pgSQL function "assign_vertex_id" line 24 at EXECUTE statement

********** Error **********

ERROR: function addgeometrycolumn(unknown, unknown, integer, unknown, integer) is not unique
SQL state: 42725
Hint: Could not choose a best candidate function. You might need to add explicit type casts.
Context: PL/pgSQL function "assign_vertex_id" line 24 at EXECUTE statement 
```

现在从我发现它必须是带有旧 PostGIS 签名的东西。当我运行以下命令时感染；

```
select proname, proargnames from pg_proc where proname = 'addgeometrycolumn'; 
```

结果是这样的；

```
pg_proc returns 6 rows.

Three rows with column proargnames  returning a blank or (null) value 
```

有人能帮我吗？这与旧的 postgis 签名有关吗？如果是这样，我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-23T19:05:23.343

我也遇到了这个问题，我认为 OP 可能没有正确解决它。首先， AddGeometryColumn 确实是重载的。这三个原型是：

```
 AddGeometryColumn(table_name, column_name, srid, type, dimension,
use_typmod=true)
    AddGeometryColumn(schema_name, table_name, column_name, srid, type, dimension, use_typmod=true)
    AddGeometryColumn(catalog_name, schema_name, table_name, column_name, srid, type, dimension, use_typmod=true) 
```

就我而言，更改以下查询：

```
SELECT AddGeometryColumn('public', 'facilities', 'walk_area', 4326, 'POLYGON', 2); 
```

（使用第二种形式）到这个：

```
SELECT AddGeometryColumn('public', 'facilities', 'walk_area', 4326, 'POLYGON', 2, true); 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T16:14:10.320

PostgreSQL 支持[**函数重载**](http://www.postgresql.org/docs/current/interactive/xfunc-overload.html)。

使用重载函数（就像您显然拥有的那样），仅使用文本文字（并且没有显式类型转换）的调用可能会模棱两可。

通常，向参数文字添加显式类型转换可以解决问题[**。**](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-SYNTAX-TYPE-CASTS)任意示例：

```
SELECT my_fuc('foo'**::text**, 0.001**::numeric**, 123**::int**);
```

在你的情况下，这个调用是模棱两可的：

```
addGeometryColumn('vertices_tmp', 'the_geom', 4326, 'POINT', 2) 
```

请注意以下几点：

*   在 Postgres 中 ，所有未加引号的标识符都转换为**小写。**`addGeometryColumn(...)`实际上与 相同`addgeometrycolumn(...)`。

*   您可能需要对函数名称进行**模式限定**以使其明确。（也许你最近改变了[`search_path`](https://stackoverflow.com/questions/9067335/how-to-create-table-inside-specific-schema-by-default-in-postgres/9067777#9067777)导致出人意料的结果。

*   如果您确实有**重载函数**（并不少见），请添加类型转换以使您的调用明确。

*   为重载函数定义[**参数默认值**](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)会使以前唯一的调用变得不明确。

# xcode - Core Data Saves 工具中“保存持续时间”的单位是什么？

> ID：12331986
> 
> 赞同：4
> 
> 时间：2012-09-08T15:21:43.790
> 
> 标签：xcode, core-data, xcode-instruments

在 XCode Instruments 应用程序中有一个 Core Data Saves 工具。它可以显示每个 Core Data 保存的“保存持续时间”。保存持续时间使用什么单位？没有人类可察觉的滞后时间，我看到的读数范围从 67 到 6343。

这是计数微秒，与处理器周期或仪器采样时间的倍数有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T17:57:55.143

> 保存持续时间：保存操作的持续时间（以微秒为单位）。

有关详细信息，请参阅[Apple 文档](http://developer.apple.com/library/ios/#recipes/instruments_help-core-data-instruments-help/AbouttheCoreDataSavesInstrument/AbouttheCoreDataSavesInstrument.html)。

此外，如果您启用 Core Data 的调试功能

> -com.apple.CoreData.SQLDebug 1

您还可以在控制台中查看持续时间。在这种情况下，它们以秒表示。要启用它，请参阅[XCode4 和核心数据：如何启用 SQL 调试](https://stackoverflow.com/questions/6428630/xcode4-and-core-data-how-to-enable-sql-debugging)。

# c++ - 如何绘制网格或二维四叉树（C，OpenCV）

> ID：12331987
> 
> 赞同：4
> 
> 时间：2012-09-08T15:21:44.153
> 
> 标签：c++, grid, draw, point, quadtree

我可以知道如何绘制网格或二维四叉树（C++，OpenCV）吗？我只需要在受影响区域上的四叉树内的每个交点处定义点以进行反馈或输出。所以输出应该能够告诉我任何形状的点的最大范围。

有可能做到吗？

谢谢！

# ruby-on-rails - Ruby on Rails - 模型的渲染表单

> ID：12331992
> 
> 赞同：0
> 
> 时间：2012-09-08T15:22:17.793
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, renderpartial

当我为我正在使用的模型渲染部分内容时：

```
<%= partial @my_model %> 
```

它会自动查找文件 ..view/my_models/_my_model.html.erb 我真的很喜欢这个符号，因为它感觉正确！

我的问题：现在我想要一个符号来自动查找编辑部分。有办法吗？直到现在我用

```
<%= partial 'edit' %> 
```

这没关系，但我的模型有很多子类，我喜欢它自动在模板的正确子类视图文件夹中查找的方式。直到知道我必须为我的模型寻找课程然后打电话

```
<% if @my_model.class == FirstSubClass %>
    <%= partial 'firstsubclasses/_edit.html.erb' %>
<% elsif @my_model.class == SecondSubClass %>
    <%= partial 'secondsubclasses/_edit.html.erb' %>
<% end %> 
```

我更喜欢一行:) 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:31:08.690

尝试：

```
<%= partial '#{@my_model.class.name.tableize}/_edit.html.erb' %> 
```

tableize 是[ActiveSupport::Inflector](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html)的一个方法，其中包括一些其他很酷的命名操作方法。

# caching - 如何在 Vaadin 中禁用浏览器缓存

> ID：12331993
> 
> 赞同：6
> 
> 时间：2012-09-08T15:22:20.477
> 
> 标签：caching, pdf, http-headers, vaadin, browser-cache

我的问题很简短（希望很容易解决！）：如何在**使用 vaadin 实现的 Web 服务**中完全禁用浏览器缓存？

我想完全禁用缓存，因为当我尝试进行一些 PDF 流式传输并在我的浏览器中显示它们时遇到问题。

我已经阅读了关于我的问题的解决方案，例如这里：

[使用 <meta> 标签关闭所有浏览器中的缓存？](https://stackoverflow.com/questions/1341089/using-meta-tags-to-turn-off-caching-in-all-browsers)

他们谈论向 Web 应用程序添加一些标头以禁用浏览器缓存。但是如何将它们添加到我的**Vaadin**应用程序中？

一个简短的代码片段将非常受欢迎（并且很有帮助！）

再次感谢您的每一个答案，并认为您正在与我分享。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T09:51:38.580

在我看来，您想在下载 PDF 文件时禁用缓存。假设您正在使用 a`DownloadStream`来流式传输内容，那么按如下方式设置`Content-Disposition`和标头应该可以工作。`Cache-Control`

```
 DownloadStream stream = new DownloadStream(getStreamSource().getStream(), contentType, filename);
stream.setParameter("Content-Disposition", "attachment;filename=" + filename);
// This magic incantation should prevent anyone from caching the data
stream.setParameter("Cache-Control", "private,no-cache,no-store");    
// In theory <=0 disables caching. In practice Chrome, Safari (and, apparently, IE) all ignore <=0\. Set to 1s 
stream.setCacheTime(1000); 
```

如果要禁用*所有*Vaadin 请求的缓存，则必须查看 AbstractApplicationServlet 的源代码，并扩展诸如`#serveStaticResourcesInVAADIN`和其他方法之类的方法-这很快就很棘手，因为其中很多都是私有方法。

更简单的方法可能是使用 Http Servlet 过滤器将适当的参数添加到响应中，而根本无需修改您的应用程序。您可以自己编写 - 应该很容易 - 尽管快速搜索会找到 Apache2 许可的 Cache-Filter ：[http ://code.google.com/p/cache-filter/wiki/NoCacheFilter](http://code.google.com/p/cache-filter/wiki/NoCacheFilter)

我没有使用过 Cache-Filter，但快速浏览一下它就可以很好地为您工作。

# c# - 为每个唯一的长字符串创建一个短的唯一字符串

> ID：12331994
> 
> 赞同：-1
> 
> 时间：2012-09-08T15:22:24.853
> 
> 标签：c#, asp.net-mvc, hash, md5

我正在尝试在 c# 和 asp.net mvc 中创建一个 url 缩短系统。我知道哈希表，我知道如何创建重定向系统等。问题是在数据库中索引长 url。一些 url 可能有多达 4000 个字符长度，索引这种字符串似乎是个坏主意。问题是：如何为每个 url 创建一个唯一的短字符串？例如 MD5 可以帮助我吗？MD5 对于每个字符串真的是唯一的吗？

注意：我看到 Gravatar 对电子邮件使用 MD5，所以如果每个电子邮件地址都是唯一的，那么它的 MD5 哈希值也是唯一的。这样对吗？我可以对网址使用相同的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:38:39.767

您可以将 MD5 或 SHA1 用于您描述的目的。

哈希并不是完全唯一的。例如，如果您有 4000 字节数组，这意味着您可能有 256^4000 组合。而 MD5 将有 256^16 组合。所以，有碰撞的可能。但是，出于所有实际目的（密码学除外），您不必担心冲突。

如果您对 MD5 的碰撞漏洞（与加密使用相关）感兴趣，可以在[这里进行](http://en.wikipedia.org/wiki/MD5#Collision_vulnerabilities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:43:41.263

已经提到的散列方法可以很好地创建可能唯一标识您的 URL 的唯一短字符串。但是，我想提出一种替代方法。

创建一个包含两列 ID（整数）和 URL（字符串）的数据库表。在表格中为您要跟踪的每个 URL 创建一行。然后，通过 ID 引用每个 URL。使 ID 自动递增，这将确保唯一性。

这解决了如何从缩短版本转换为更长版本的问题：只需连接数据库中的表。使用散列，这将成为一个问题，因为散列是单向的。生成的页面标识符也将比 MD5 哈希值短，并且仅包含数字，因此它们很容易包含在 URL 查询字符串等中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:24:33.217

[完美的散列函数](http://en.wikipedia.org/wiki/Perfect_hash_function)是保证没有冲突的函数。由于您的应用程序无法容纳散列链，因此完美的散列是要走的路。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-08T15:44:21.447

我认为你可以尝试从 url 字符串中创建一个字节（每个字符可以是一个字节）数组，然后使用编码（例如 Base64，或者如果你想走那么远你可以自己创建一个），然后如果你想要要解码，您只需使用 base 64 解码并再次从字节（在数组中）制作字符。但是我不确定这是否会是一个长字符串，但我很确定它会是独一无二的。

（PS 你应该先应用一些逻辑，比如总是删除 http://，然后在解码时再次添加）

# iphone - iOS XML解析许多文档

> ID：12331996
> 
> 赞同：1
> 
> 时间：2012-09-08T15:23:17.773
> 
> 标签：iphone, objective-c, ios, xml, nsxmlparser

在我的应用程序中，我需要执行几个 HTTP 请求。所有这些请求都返回需要解析的 XML 文档，然后进入表格视图或其他任何内容……整个应用程序中大约有 10-20 个文档。具有相同名称的属性可以出现在不同的文档中，所以我需要在我的委托方法中区分它们。

我的方法是只有 1 个具有 NSXMLParserDelegate 方法的类，每个文档使用不同的解析器（但具有相同的委托），并使用委托方法中的解析器参数区分解析器（又名文档）。但这变得相当复杂，我不想以大量不同的解析器实例变量和 if 子句告终。没有更简单的方法可以做到这一点吗？我想每个解析操作有 1 个类（=> 不同的代表），但我想那更糟..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:53:31.110

一种选择是将 XML 委托回调和/或数据构造方法放在将通过解析该特定 xml 类型创建的对象上。这会将对象的定义以及如何从 xml 或数据块创建它的知识放在一个地方。通过尝试将所有类型的所有解析逻辑放在一个委托方法中，这会使一个委托类复杂化，并拆分您正在使用的每种类型的知识。

这种方法的一个挑战是复合对象。例如，如果您有一个艺术家对象、一个包含艺术家的专辑对象，以及一个获取艺术家列表的调用。一种方法是让正在解析的复合对象遵循其他对象类（可能使用您自己的协议）。例如，专辑对象正在解析并点击“艺术家”元素。所以它知道分配一个艺术家，并且当它从委托回调中命中数据块（直到它命中关闭艺术家元素） - 它会继续调用你的协议方法将数据填充到其中。这推迟了如何处理该块的知识数据到定义该对象的类。对于一个正在处理艺术家列表的类，它会这样做 n 次来建立一个列表。

最后，在解析 XML 时构造对象，如果操作正确，可以降低内存并提高执行速度。相比之下，缓冲完整的 xml 字符串，创建完整的 XML DOM 可以使用更多的内存，这对用户来说也可能更慢。因此，还要考虑性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:44:51.497

如果您的 XML 只是为一堆记录编写代码，请查看[https://github.com/ZaBlanc/RaptureXML](https://github.com/ZaBlanc/RaptureXML)在 RaptureXML 中，您使用块进行解析，因此您不必担心创建新对象。您可以将文档的名称作为参数传递给解析块。它也比使用 NSXMLParser 简洁一百万倍。

# html - 从 HTML 到 DOM 再到 HTML 的转换是否标准化？

> ID：12331997
> 
> 赞同：0
> 
> 时间：2012-09-08T15:23:28.507
> 
> 标签：html, dom, cross-browser, html-parsing, rich-text-editor

我正在开发一个将使用 ContentEditable 的富文本编辑器。加载到浏览器（从 Web 服务器）中的文档必须不会因转换为 DOM 而以任何方式更改，然后再单独返回 HTML（假设用户没有进行任何更改）。

如果 HTML 文档在浏览器第一次创建和保存时被修改是可以的，但随后不应该再次发生，这只是要求所有浏览器将基于等效的 HTML 生成相同的 DOM，并基于等效的 HTML 输出相同的 HTML 文档DOM。这是我可以依靠的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:31:29.767

当使用innerHTML 或outerHTML 执行序列化时，很容易证明标记不会往返。

采用以 开头的标记`<div id='mydiv'></div>`。在 IE9 中变成`<div id="mydiv"></div>`. 在 IE8 中，它变成`<DIV id=mydiv></DIV>`