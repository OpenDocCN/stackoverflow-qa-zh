# StackOverflow 问答 11497000-11497999

# uiscrollview - 带有 UIScrollViews 的 iCarousel

> ID：11497006
> 
> 赞同：0
> 
> 时间：2012-07-16T01:01:22.050
> 
> 标签：uiscrollview, icarousel

有人知道如何将 uiscrollviews 对象放入 iCarousel 中吗？我的意思是 IBOutlet 对象。

所以我尝试了这种方式：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index 
{
UIScrollView *scroll = [UIScrollView alloc] initWithFrame...
scroll.contentSize =..
scroll.backgroundColor = ..
return scroll;
} 
```

它可以工作，但我需要在轮播中放入我用 IBuilder 制作的 uiscrollviews 数组（带有很多按钮）。

我也做了这样的：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index 
{
UIScrollView *scroll = [scrollArray objectAtIndex:index];
return scroll;
} 
```

但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:24:01.680

这是正确的方法：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view

    NSString *nibName = [NSString stringWithFormat:@"scroll%i", index + 1];
    NSArray *nibContents = [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:nil];
    view = [nibContents objectAtIndex:0];
    return view;
} 
```

# php - 将 SQL 转换为 cakephp ORM

> ID：11497009
> 
> 赞同：2
> 
> 时间：2012-07-16T01:02:40.320
> 
> 标签：php, sql, cakephp, orm

所以我有这个查询，我正在尝试转换为 cake ORM，但我不知道该怎么做。

我有一个用户表和一个单词表。用户有很多词（这就是关系）。我想写一个查询，它会给我在系统中添加最多单词的用户。这是我写的当前查询，但我无法将其转换为 cakephp ORM 语法，有什么想法吗？

```
SELECT 
    users.username, 
    COUNT(word) AS n 
FROM 
    users AS users 
        INNER JOIN words AS words 
            ON users.userid=words.userid 
GROUP BY 
    users.username 
ORDER BY 
    n DESC 
LIMIT 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:46:23.577

有很多方法可以编写查询：- 在控制器中，您可以写为 -

```
 $options = array(
             'fields' => array(
                  'User.name',
                  'COUNT(Word.id) as word_count',
                 ),
          'group'  => 'Word.user_id',
          'order'  => 'word_count DESC',
        );           

$users = $this->User->Word->find('first', $options);
debug($users); 
```

在用户模型中，您必须编写：

```
public $hasMany = 'Word'; 
```

在 Word 模型中，您必须编写：

```
public $belongsTo = 'User'; 
```

# asp.net-mvc - 为什么我的代码无法更新数据库？

> ID：11497015
> 
> 赞同：1
> 
> 时间：2012-07-16T01:03:50.933
> 
> 标签：asp.net-mvc

我在更新实体后无法保存它们。我可以像这样添加新实体：add(student); 但如果我尝试这个：

```
if (ModelState.IsValid)
{
   db.Entry(student).State = EntityState.Modified;
   db.SaveChanges();
   return RedirectToAction("someView");
} 
```

我收到此错误消息：

> System.Data.Entity.Infrastructure.DbUpdateConcurrencyException 未由用户代码处理
> Message=Store 更新、插入或删除语句影响了意外的行数 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

这是我的控制器方法：

```
[HttpPost]
public ActionResult ClassAttendance(InstructorIndexData viewModel, FormCollection frmcol)
{
     var instructorData = new InstructorIndexData();

     string[] AllFstMNames = frmcol["item.Student.FirstMidName"].Split(',');
     string[] AllLstNames = frmcol["item.Student.LastName"].Split(',');
     string[] AllAddresses = frmcol["item.Student.Address"].Split(',');
     string[] AllEnrollmentDates = frmcol["item.Student.EnrollmentDate"].Split(',');
     //more of the same code…

     var student = new Student();
     var enrollment = new Enrollment();

     for ( int i = 0; i < AllFstMNames.Count(); i++)
     {
         student.FirstMidName = AllFstMNames[i];
         student.LastName = AllLstNames[i];
         student.Address = AllAddresses[i];
         student.EnrollmentDate = Convert.ToDateTime(AllEnrollmentDates[i]);

         if (!string.IsNullOrEmpty(frmcol["item.Grade"]))
         {
            enrollment.Grade = Convert.ToInt32(AllGrades[i]);
         }

         enrollment.StudentID = Convert.ToInt32(AllStudentIds[i]);
         enrollment.attendanceCode = Convert.ToInt32(AllAttendanceCodes[i]);
         enrollment.classDays = AllclassDays[i];
         enrollment.CourseID = Convert.ToInt32 (AllCourseIds[i]);
         //update rows
      }

      if (ModelState.IsValid)
      {
         db.Entry(student).State = EntityState.Modified;
         db.SaveChanges();
         return RedirectToAction("someView");
      } 
```

你能帮我更新数据库中的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:50:48.210

`for`当我在这里查看代码时，我最初的想法是，让一个循环多次更新a​​nd 对象`student`然后`enrollment`只调用一次`db.SaveChanges`循环外部似乎不太正确。这是令人担忧的，因为`for`当数据保存到数据库时，只会应用循环的最后一次迭代。（您在循环结束时有“更新行”的注释`for`- 也许某些代码丢失或放错了位置？）

然后，我开始思考为什么需要手动设置`Entry(...).State`属性。不会`db`自动知道对象已修改并需要保存吗？这让我想到了这个问题：在哪里`db`定义？那里正在使用什么技术堆栈？

最后，在假设该`db`对象可能像 MS LINQ-to-SQL 功能一样工作之后，我注意到该对象是在循环`student`之前新实例化的。`for`这对于插入新数据来说很好，但是如果您想更新现有数据，我相信您需要先从数据库中获取对象的副本，然后再更新属性。这允许`db`对象监视更改（再次假设它具有此功能）。（如果不是这种情况，那么它让我想知道如何知道数据库中的哪条记录要更新，因为您没有在循环中的对象上`db`设置任何看起来是主键的东西，例如。）`StudentId``student`

# java - Java 泛型通配符：vs

> ID：11497020
> 
> 赞同：84
> 
> 时间：2012-07-16T01:05:14.763
> 
> 标签：java, generics

这两个功能有什么区别？

```
static void gPrint(List<? extends Number> l) {
    for (Number n : l) {
        System.out.println(n);
    }
}

static <T extends Number> void gPrintA(List<T> l) {
    for (Number n : l) {
        System.out.println(n);
    }
} 
```

我看到相同的输出。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-16T01:08:34.227

在这种情况下没有区别，因为`T`不再使用。

声明 a 的原因`T`是为了可以再次引用它，从而将两个参数类型，或者一个返回类型绑定在一起。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-07-16T01:15:43.660

`T`不同之处在于您在使用通配符时无法引用。

您现在不在，所以“没有区别”，但您可以通过`T`以下方式有所作为：

```
static <T extends Number> T getElement(List<T> l) {
    for (T t : l) {
        if (some condition)
            return t;
    }
    return null;
} 
```

这将返回与传入的任何内容*相同的类型*。例如，它们都将编译：

```
Integer x = getElement(integerList);
Float y = getElement(floatList); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-08-17T05:06:06.520

`T`是有界类型，即无论您使用什么类型，都必须坚持使用 extends 的特定类型`Number`，例如，如果您将`Double`类型传递给列表，则不能将`Short`类型按原样传递给它，并且列表已经受该类型的`T`限制`Double`类型。相反，如果使用`?`( `wildcard`)，则可以使用扩展的“任何”类型`Number`（将`Short`和都添加`Double`到该列表中）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-04-21T13:07:37.730

当您使用 T 时，您可以对 List 执行所有类型的操作。但是当你使用时你不能执行添加。

T - 与具有完全访问权限的对象引用相同
？- 提供部分访问权限

```
static void gPrint(List<? extends Number> l) {
 l.add(1); //Will give error
for (Number n : l) {
    System.out.println(n);
}

static <T extends Number> void gPrintA(List<T> l) {
l.add((T)1); //We can add
for (Number n : l) {
    System.out.println(n);
} 
```

# xml - perl cgi 服务器响应一个 PL 文件而不是一个 xml 文件

> ID：11497022
> 
> 赞同：2
> 
> 时间：2012-07-16T01:05:55.027
> 
> 标签：xml, perl, cgi, httpresponse

我将内容类型设置为 text/xml 并想要获取一个 xml 文件，但 cgi 程序的响应是一个 PL 文件，它会强制浏览器打开下载对话框。我下载文件并用文本编辑器打开它。在文件的开头它显示了 http 标头，我认为这很奇怪。这是文件的 URL：“http://23.23.123.93/watergrid/dma/j796/hydro” 谁能帮帮我？

```
if(defined($result)) {
#imitate nph- cgi for IIS
my $status = defined($ENV{'SERVER_SOFTWARE'}) && $ENV{'SERVER_SOFTWARE'}=~/IIS/ ? $ENV{SERVER_PROTOCOL} || 'HTTP/1.0' : 'Status:';
my $code = $result->code;
binmode(STDOUT);

print STDOUT "$status $code ", HTTP::Status::status_message($code),
"\015\012", $result->headers_as_string, "\015\012", $result->content;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:51:58.267

在标头输出之前，您有一个“o 检索网络数据”字符串。所以尝试在 perl 源中搜索这个字符串并将其删除。

# javascript - 寻找围绕一个点的旋转

> ID：11497023
> 
> 赞同：1
> 
> 时间：2012-07-16T01:06:13.933
> 
> 标签：javascript, trigonometry

我设法让一个函数工作，它将计算并返回一个点与另一个点之间的角度。我称它为`lookAt`函数，因为它基本上会导致一个变换查看另一个变换。这里是：

```
this.lookAt = function(target) {
    var d = target.subtract(this.position)
    this.rotation = Math.atan2(d.y, d.x) + Math.PI/2;
    return this.rotation;
} 
```

在此函数的上下文中，`this`指的是具有变量`rotation`（以弧度为单位的旋转）的周围对象，以及具有一些基本数学函数以及存储和值`position`的类。是通过在变量上调用辅助函数创建的，该函数从另一个中减去一个。`Vector2``x``y``d``Vector2``target``Vector2`

这按预期工作——如果我在一个对象上调用这个函数，旋转正确地“看着”目标。但是，我想知道为什么我必须添加`π / 2`（这是 1 弧度，对吗？）。我从[这个问题](https://stackoverflow.com/questions/4684195/calculating-in-radians-the-rotation-of-one-point-around-another)中得到了原始方程，但答案并没有添加`π / 2`到方程中，而我必须添加。

有人可以解释这背后的数学原理吗？另外，我还没有学那么多三角学（除了我的代数课程向我介绍的），所以请解释一下，就好像你在和一个很小的孩子说话一样。:-)

# javascript - 为什么这不会阻止默认链接？

> ID：11497025
> 
> 赞同：0
> 
> 时间：2012-07-16T01:06:54.717
> 
> 标签：javascript, jquery, ajax, menu, hyperlink

我试图阻止默认链接，因为我正在使用 jQuery 将页面动态加载到 div 中，并且每个 like 的 href 只是页面之前的名称（例如`href=home`，并在下面的代码中修复加载到 home.php）。

```
//initialize home page as active on load up and deactivate link
var activePage = $('a[href$="home"]');
var activePageHref = activePage.attr('href');
activePage.attr('href', '#');

$('a').click(function(e) {
    e.preventDefault();
    //set the page clicked on
    var page = $(this).attr('href');
    //check to see if there are any extras to url for php
    var pageCheck = page.split('?');   
    //sort page type
    if (pageType == null) {
        //dynamically load the page in div bodycontent
        $('#bodycontent').load(page + '.php');
    } else {
        $('#bodycontent').load(page + '.php?' + pageCheck[1]);
    }
    //pull up last disabled link for navigation
    var setOld = $('a[href$="' + activePageHref + '"]');
    setOld.attr('href', '' + activePageHref + '');
    //set the new disabled link for navigation
    activePage = page;
    //make link inactive
    $(this).attr('href', '#');
}); 
```

最后返回 false 是可以的，直到我在点击事件函数中添加了更多我需要发生的事情，但确切地说，这部分：

```
//pull up last disabled link for navigation
    var setOld = $('a[href$="' + activePageHref + '"]');
    setOld.attr('href', '' + activePageHref + '');
    //set the new disabled link for navigation
    activePage = page;
    //make link inactive
    $(this).attr('href', '#'); 
```

现在 e.preventDefault(); ，这是我理解的正确的做我需要发生的事情的方法，它正在阻止整个事情在任何链接上触发。我被困住了。我只需要停止默认操作，并使用我在最后添加的附加功能构建的功能来使我的导航更漂亮。

另外要补充一点，我确实有一个与此导航的 ul 相关联的悬停功能，但没有包含它，因为它不应该引起问题，但如果需要我可以将它放在这里。这是本文档就绪功能中唯一的另一件事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T01:19:01.097

**更新：**

由于您最初更改了禁用链接的 href，因此属性包含选择器稍后将无法再次找到它来激活它。我建议这样做有点不同。

您可以使用类来捕获整个“禁用链接”功能。如果您将一个类添加到应该“禁用”的链接，您可以阻止浏览器仅关注具有该指定类的链接。

当您单击“启用的链接”时，请按照它然后将其禁用。然后，启用所有其他链接。

```
$('a').click(function() {
    $(this).addClass('disabledLink');
    $('a').not(this).removeClass('disabledLink');
} 
```

然后，为整个文档设置一个事件侦听器，以防止对某个类的链接进行默认操作。

```
$(document).on('click', 'a.disabledLink', function(e) {
    e.preventDefault();
} 
```

这应该可以实现您想要的（即它将替换您上面的整个“点击”处理程序）。请注意，href 永远不会更改为“#”。

* * *

**否则：只需缓存链接本身及其href**

```
//pull up last disabled link for navigation
activePage.attr('href', '' + activePageHref + '');

//set the new disabled link for navigation
activePage = $(this);
activePageHref = $(this).attr('href');

//make link inactive
$(this).attr('href', '#'); 
```

* * *

您有一个语法错误导致 JS 引擎停止：

```
//pull up last disabled link for navigation
$('a[href$="' + activePageHref + '"]').attr('href', '' + activePageHref + '');

//set the new disabled link for navigation
activePage = page.attr('href');
/* THIS HERE RETURNS A STRING SO YOU CHANGE activePage to a string. */

// Should probably be:
activePageHref = page.attr('href');

//make link inactive
activePage.attr('href', '#'); 
```

在您调用此方法之前，您将 activePage 设置为一个字符串，它没有方法`.attr()`，因此它会引发错误并且函数的执行会停止。

# mysql - 带有大型 InnoDB 存档表的 innodb_buffer_pool_size

> ID：11497026
> 
> 赞同：1
> 
> 时间：2012-07-16T01:07:06.523
> 
> 标签：mysql, optimization, innodb

我已经阅读了大量有关各种 MySQL 配置的内容，但我仍然对我的 innodb_buffer_pool_size 有点不确定，希望有人能提供帮助。

我有一些大型 InnoDB 表，最大的是（18gb 有一些 INT 列，两个 TEXT 列[一个是“描述”，可能很大”]，还有一些小的 VARCHARS - 大约 23m 行）。我为 PK、一个 TINYINT 列、一个产品 ID 列和一个日期时间列创建了几个索引。

我并没有从表中进行过多的阅读，主要是写给它，偶尔把它的大块带到 Solr。

无论如何，很多人一直建议制作一个与数据大小差不多的大 innodb_buffer_pool_size。现在我确实有一个专门的实例，但它只有 2gb 内存之类的东西。

我在这里遗漏了什么，还是这个表不是他们推荐这些类型设置的典型表？因为在我看来，在需要这么多内存的任何地方都需要相当多的东西。该表上的索引大小约为 1.6Gb。

感谢您的帮助 - 很想消除这种困惑干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:11:23.723

Derr .. 它最终成为我所假设的那样 - 你希望你的 innodb_buffer_pool_size 足够大以包含你的 InnnoDB 索引..

# javascript - 如何强制为javascript打开新标签/窗口？

> ID：11497035
> 
> 赞同：0
> 
> 时间：2012-07-16T01:08:36.230
> 
> 标签：javascript, counter, visitor-pattern, new-window, visitor-statistic

我想在页面中安装超级计数器：

```
< !-- BEGIN: Powered by Supercounters.com -->
<script type="text/javascript" src="http://widget.supercounters.com/online_t.js">
</script>
<script type="text/javascript">sc_online_t(244858,"Users Online","170ddb");</script>
< !-- END: Powered by Supercounters.com -->` 
```

那么，如何在新选项卡或窗口中打开统计页面，而不是在同一个窗口中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:38:24.430

如果有统计页面使用的链接，您可以使用[window.open](http://www.w3schools.com/jsref/met_win_open.asp)

*`window.open(URL,name,specs,replace)`*

```
window.open('http://www.URL.com', _blank); 
```

这将在新窗口中打开页面

# php - 嵌套短代码不起作用（第二级嵌套）

> ID：11497037
> 
> 赞同：0
> 
> 时间：2012-07-16T01:08:45.617
> 
> 标签：php, wordpress, shortcode

```
[row]
[column size="eight"]
    [row]<h5>HELLO<strong>WORLD</strong></h5>[/row]
    [row]<h5>CATEGORIES: <strong>WEB / CREATIONS / INTERACTIVE DESIGN</strong></h5>[/row]
[/column]
[column size="four"]Insert your content here[/column]
[/row] 
```

这是我使用的简码。但由于某种原因， [row]...[/row] 短代码似乎不起作用。这是简码功能：

```
function su_column_shortcode( $atts, $content = null ) {
    extract( shortcode_atts( array(
            'size' => 'six'
            ), $atts ) );
    return '<div class="' . $size . ' columns">' . su_do_shortcode( $content, 'c' ) . '</div>';
}
function su_row_shortcode($atta = null, $content = null ) {
    return '<div class="row">'.su_do_shortcode( $content, 'r').'</div>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:17:30.343

你描述的不是问题，而是事实。

Wordpress 短代码不能嵌套。如果您需要嵌套，您需要自己进行“嵌套”，方法是在您自己的简码内的“内部”部分应用*所有**简*码。

请参阅[*简码 API 限制：嵌套简码*^(*Codex*)](http://codex.wordpress.org/Shortcode_API#Nested_Shortcodes)

# apache - 在它指向的同一 IP 下查看域上的服务。

> ID：11497047
> 
> 赞同：0
> 
> 时间：2012-07-16T01:11:36.080
> 
> 标签：apache, networking, redirect, dns, ip

我为我的项目托管各种东西，就在我家的服务器上。我的问题是，例如，假设我有一个从我的家庭服务器托管的网页。我已将该页面包含在托管在其他地方的外部网站中。为了查看从我所在位置托管的任何内容，我需要使用服务器的本地 IP ( 192.168.0.102 )。所以，如果我有这个页面托管在我家，嵌入到外部网页中，我看不到它，除非它指向我的本地 IP。如果我将它指向我的本地 IP，那么我网络之外的每个人都看不到它。

所以，总结一下。我如何让我的 apache 服务为我（我与网络服务器在同一个网络中）和外部世界工作？是否可以设置某种重定向，所以当我点击我的外部 IP（通过域名）时，它也会显示为我的内部 IP？

我希望这是有道理的。

# python - 有没有办法从实时 Python 解释器会话或动态创建的对象中检索源代码？

> ID：11497049
> 
> 赞同：3
> 
> 时间：2012-07-16T01:11:57.347
> 
> 标签：python, metaprogramming, inspect

当 Python 对象被动态创建时，无论是在实时解释器会话中，通过解组腌制对象或其他方式，该`inspect`模块不能再用于检索其源代码（因为`inspect`依赖于源已被从磁盘上的某个文件编译）。

如果我有这样一个简单的类：

```
>>> class Foo(object):
...     def __init__(self):
...             self.a = 100
...     def bar(self):
...             print 'hello'
... 
>>> f = Foo()
>>> 
```

是否有一些直接的方法来获取`Foo`类或`f`对象的源代码？

我知道至少有一些方法可以解决这个问题的一部分。例如，可以使用`inspect.getmembers`查找 的所有成员`f`，遍历成员以查找可调用和不可调用，使用`inspect.getargspec`确定方法签名等。从所有这些来看，至少可以重新生成一些源代码，但不能重新生成每个方法中的代码。模块可以生成每个方法的字节码版本`dis`，但仍需要将其反编译成源代码。

有没有更好的方法来做到这一点，我错过了？可以用 的结果做些`sys._getframe()`什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:14:30.103

您无法获得源代码，但您可以获得字节码，并且可以使用 stdlib[`dis`](http://docs.python.org/library/dis.html)模块进行反汇编。有一点经验的人通常可以很容易地读取字节码。

# php - 将同一id中的行合并到数组中

> ID：11497051
> 
> 赞同：-1
> 
> 时间：2012-07-16T01:12:24.087
> 
> 标签：php, mysql

我有句子表：

```
======================================================================
|  id_row  |  id_document |   id_sentence   |       sentence         | 
======================================================================
|     1    |       1      |       0         | Example sentences A    |
|     2    |       1      |       1         | Example sentences B    |
|     3    |       2      |       0         | Example sentences C    |
|     4    |       2      |       1         | Example sentences D    |
====================================================================== 
```

我想将具有相同 id_document 的句子合并到数组中，例如 =>`Array( [1] => Array ( [0] => Example sentences A [1] => Example sentences B ) [2] => Array ( [0] => Example sentences C [1] => Example sentences D ))`

这是代码：

```
<?php
require_once 'conf.php';
$sql = mysql_query('SELECT sentence FROM sentence group by id_document') or die(mysql_error());
while ($row = mysql_fetch_array($sql)) {
    $sentence[] = $row['sentence'];
}
print_r($sentence);
?> 
```

但是，我只在每个不同的 id_document 中得到一个句子。帮我。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T01:16:35.080

索引数组`id_document`，并像这样向数组中添加新条目：

```
while ($row = mysql_fetch_array($sql)) {
    $sentence[ $row['id_document'] ][] = $row['sentence'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:17:13.387

你可以写：

```
while ($row = mysql_fetch_array($sql))
{
   $sentence[$row['id_document']][] = $row['sentence'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T01:17:31.817

```
while ($row = mysql_fetch_array($sql))
  $sentence[$row['id_document']][] = $row['sentence']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T04:01:28.760

这是我的最终代码：

```
<?php

require_once 'conf.php';
$sql = mysql_query('SELECT sentence, id_document FROM sentence ') or die(mysql_error());
while ($row = mysql_fetch_array($sql)) {
   $sentence[$row['id_document']][] = $row['sentence'];
}
print_r($sentence);

?> 
```

# orm - ORM 的实体定义不是容易出错吗？

> ID：11497052
> 
> 赞同：0
> 
> 时间：2012-07-16T01:12:48.927
> 
> 标签：orm, doctrine-orm, syntax-error

我在我正在从事的项目中使用 Doctrine ORM。尽管为数据库提供对象接口的想法很好，但我对实体类的实现有疑问。

让我们考虑这个用户实体的例子：

```
<?php

/**
 * @Entity @Table(name="users")
 **/
class User
{
    /**
     * @Id @GeneratedValue @Column(type="integer")
     * @var int
     **/
    protected $id;

    /**
     * @Column(type="string")
     * @var string
     **/
    protected $name;

    /**
     * @OneToMany(targetEntity="Bug", mappedBy="reporter")
     * @var Bug[]
     **/
    protected $reportedBugs = null;

    /**
     * @OneToMany(targetEntity="Bug", mappedBy="engineer")
     * @var Bug[]
     **/
    protected $assignedBugs = null;

    // .. (other code)
} 
```

现在，一切都很好，花花公子，但我想知道如果我在其中一个评论中犯了拼写错误会发生什么，例如我写道：

```
@Table(name="users) 
```

代替

```
@Table(name="users") 
```

IDE 不会因为它的注释而抱怨，并且当我运行“生成实体”命令时我只会得到一个错误（它在生成代码、创建表、列和关系的背景中发挥了魔力）。

**所以我的问题是：** ORM 的实体定义是否容易出错？因为确实没有检查语法是否有效，并且仅在“生成”时间生成错误。有没有办法在开发过程中更早地自动化/检查错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:55:13.087

IMO，您强调的问题可以与在 PHP 中使用错误的变量（$var1 而不是 $var2）进行比较。就此而言，在所有动态语言中。

但是，如果您编写单元测试，则可以避免您突出显示的问题。

# javascript - jQuery嵌套每个/ Ajax问题

> ID：11497056
> 
> 赞同：0
> 
> 时间：2012-07-16T01:13:38.223
> 
> 标签：javascript, html, ajax, jquery

我有嵌套`each`循环，但第二个循环中的 Ajax 请求似乎没有添加到我在第一个循环中声明的变量中。

这是我正在使用的示例（不包括“个人”信息）：

```
var pages = [["Page Title 1", ["Page URL 1", "Page URL 2", "Page URL 3"]], ["Page Title 2", ["Page URL 1", "Page URL 2", "Page URL 3"]], ["Page Title 3", ["Page URL 1", "Page URL 2", "Page URL 3"]]];

function loadFeeds() {
$.each(pages, function(index, page) {
    $(".pages").append("<a class=\"pagename\" href=\"#" + page[0] + "\">" + page[0] + "</a>");
    html = "<div class=\"page\" id=\"" + page[0] + "\">";
    $.each(page[1], function(index, feedUrl) {

    $.ajax({
    type: "GET",
    url: feedUrl,
    processData : true,
    data: {
        tagmode: "any"
        },
    jsonp: "jsonp",
    dataType: "jsonp",
    success: function(data) {
        html += "Some header HTML";

        $.each(data.responseData.feed.entries, function(i,entry) {
            if (entry.image_urls.length === 0) {
                html += "HTML from the data";
            }
            else {
                html += "More HTML";
            }

            if ( i == 34 ) return false;
        });
        html += "Closing tags from the header";
        afterAjax();
        // console.log(html); returns correct information here
    },
            error: function(x,y,z) {
                alert(x.responseText);
            }
        });
    // console.log(html); returns everything declared to html OUTSIDE of the ajax request
    });
        $("body").append(html + "</div>");
    // Also tried: $("body").ajaxStop(function(){ $(this).append(html + "</div>"); }); because Ajax is asynchronous
});
}​ 
```

关于发生了什么的任何想法？

**编辑：**

完整的非工作演示，WIP 页面功能：http: [//jsfiddle.net/SO_AMK/u42uy/](http://jsfiddle.net/SO_AMK/u42uy/)

完整的工作演示，没有页面功能：

全屏： http: [//jsfiddle.net/SO_AMK/LXkaN/embedded/result/](http://jsfiddle.net/SO_AMK/LXkaN/embedded/result/)
正常：http: [//jsfiddle.net/SO_AMK/LXkaN/](http://jsfiddle.net/SO_AMK/LXkaN/)

请注意，这些没有图像，不是完整的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:24:14.863

**问题**

看起来像一个[比赛条件](http://en.wikipedia.org/wiki/Race_condition)。请记住，AJAX 是异步运行的，因此，在`success`成功接收到 AJAX 响应后，处理程序将在将来的某个时间运行。在分派 AJAX 请求时，脚本的其余部分正在执行。具体来说：

```
$("body").append(html + "</div>"); 
```

在成功处理程序被触发之前运行；意味着您的`html`变量还没有更新。

**解决方案 1**

移动

```
$("body").append(html + "</div>"); 
```

在您的`success`处理程序中。

```
 html += "Closing tags from the header";
    afterAjax();
    // console.log(html); returns correct information here
    $("body").append(html + "</div>");
}, 
```

**解决方案 2 ($.ajaxStop)**

确保在拨打电话之前注册您的处理程序`$.ajax()`。这将确保您的 AJAX 请求不会在您为`.ajaxStop`.

```
function loadFeeds() {
    html = "";
    $.ajaxStop(function(){$(document.body).append(html + "</div>);

    $.each(pages, function(index, page) {
        $(".pages").append("<a class=\"pagename\" href=\"#" + page[0] + "\">" + page[0] + "</a>");
        html = "<div class=\"page\" id=\"" + page[0] + "\">";
    ...
} 
```

**解决方案 3（来自您的 jsLint+Deffereds）**

此示例取自您完全正常工作的 jsLint 链接。此代码获取`$.ajax`循环中创建的所有请求，并将它们存储在一个数组中，以便稍后应用于`$.when().done()`调用。`$.when()`将检查`$.ajax`应用到它的每个请求，并在完成后调用`$.done()`. 每个`$.ajax`请求都将其响应存储在`html = []`定义在开头的数组中`$.ready()`。当延迟检查 ( `$.when()`) 看到所有`$.ajax`请求都已完成时，我们然后加入数组 ( `array.join('')`) 以创建 1 个大 HTML 块并将其附加到文档中。然后我们调用你的`afterAjax()`函数。

```
$(document).ready(function () {
    var html = [];
    var feeds = ["http://pulsesubscriber.appspot.com/items?feed=http://feeds.gawker.com/lifehacker/vip&jsonp=?",
                 "http://pulsesubscriber.appspot.com/items?feed=http://allthingsd.com/feed&jsonp=?",
                 "http://pulsesubscriber.appspot.com/items?feed=http://feeds.cnet.com/latestnews/pulse&jsonp=?"];
    loadFeeds(feeds);

    function loadFeeds(feeds) {
        var requests = [];

        $.each(feeds, function(index, feedUrl) {
            requests.push($.ajax({
                type: "GET",
                url: feedUrl,
                processData : true,
                data: {
                    tagmode: "any"
                    },
                jsonp: "jsonp",
                dataType: "jsonp",
                success: function(data) {
                    var feedElements = "<header class=\"feed-title\"><div class=\"feed-title-content\"><span class=\"feed-title-text\">" +
                        data.responseData.feed.title +
                        "</span></div></header><section class=\"row\"><div class=\"scroll-left\"></div><div class=\"row-scroll\">";

                    $.each(data.responseData.feed.entries, function(index,entry) {
                        var feedElements = '';
                        if (entry.image_urls.length === 0) {
                            feedElements += "<div class=\"tile no-img\"><title class=\"tile-title no-img\">" +
                                entry.title +
                                "</title><hr class=\"no-img hr\" /><span class=\"no-img excerpt\">" +
                                entry.contentSnippet +
                                "</span><div class=\"tile-modal\"><div class=\"article-wrapper\">\r\n<div class=\"article-header\">\r\n<a class=\"article-title-link\" target=\"_blank\" href=\"" +
                                entry.link +
                                "\">\r\n<h1 class=\"article-title\">" +
                                entry.title +
                                "</h1>\r\n</a>\r\n<h2 class=\"article-byline\">By " +
                                entry.author +
                                ": " +
                                data.responseData.feed.title +
                                "</h2>\r\n</div>\r\n<hr class=\"article-hr\"/>\r\n<div class=\"article-content\">" +
                                entry.content +
                                "\r\n<a class=\"read-more\" target=\"_blank\" href=\"" +
                                entry.link +
                                "\">Read More...</a>\r\n</div>\r\n</div></div></div>\r\n";
                        }
                        else {
                                feedElements += "<div class=\"tile\"><img class=\"tile-image\" src=\"" +
                                entry.image_urls[0] +
                                "\" /><title class=\"tile-title\">" +
                                entry.title +
                                "</title><div class=\"tile-modal\"><div class=\"article-wrapper\">\r\n<div class=\"article-header\">\r\n<a class=\"article-title-link\" target=\"_blank\" href=\"" +
                                entry.link +
                                "\">\r\n<h1 class=\"article-title\">" +
                                entry.title +
                                "</h1>\r\n</a>\r\n<h2 class=\"article-byline\">By " +
                                entry.author +
                                ": " +
                                data.responseData.feed.title +
                                "</h2>\r\n</div>\r\n<hr class=\"article-hr\"/>\r\n<div class=\"article-content\">" +
                                entry.content +
                                "\r\n<a class=\"read-more\" target=\"_blank\" href=\"" +
                                entry.link +
                                "\">Read More...</a>\r\n</div>\r\n</div></div></div>\r\n";
                        }
                        html.push(feedElements);
                        console.log('updated elements');
                        if(index == 34 ){
                            return false;
                        }
                    });
                },
                error: function(x,y,z) {
                    console.log(x.responseText);
                }
            }));
        });

        $.when.apply(this,requests).done(function(){
            console.log('when!');
            console.log(html);
            $(document.body).append($(html.join('')));
            afterAjax();
        });

    }

    $("#refresh-all").click(function(){
        $("body > header, body > section").remove();
        $("body").removeClass("active");
        loadFeeds();
    });

    function afterAjax() {
            $(".page:first").addClass("active");
            $(".tile").click(function(){
            if ($(".tile-modal.tile-modal-active").length) {
                $(".tile-modal.tile-modal-active").removeClass("tile-modal-active");
                $(this).children(".tile-modal").addClass("tile-modal-active");
            }
            else {
                $(this).children(".tile-modal").addClass("tile-modal-active");
                $("body").addClass("active");
            }
        });

        $(".scroll-left").hover(function(){
            $(this).parent().animate({scrollLeft: 0}, 7000);
        }, function() {
            $(this).parent().stop();
        });

        $(".scroll-right").hover(function(){
            $(this).parent().animate({scrollLeft: $(this).siblings(".row-scroll").width()}, 7000);
        }, function() {
            $(this).parent().stop();
        });
    }
}); 
```

如果您想执行一系列请求，并且在它们全部执行后执行另一个操作，您可以使用[Futures & Promises Pattern](http://en.wikipedia.org/wiki/Futures_and_promises)或 defereds。在 jQuery 中，这是通过[`.promise()`](http://api.jquery.com/promise/)(Futures/Promises) 或[`.when()`](http://api.jquery.com/jQuery.when/)(Deffered) 完成的。

**关于全局变量的说明**

还值得注意的是，不使用`var html = ...`会使您的变量成为全局变量；这通常是不受欢迎的。最好`$("body").append(html+"</div>")`在成功处理程序中移动后也声明`html`为`var html`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:23:57.023

除非您的 ajax 调用是同步的（而且我没有看到它们是同步的迹象），否则您的每个循环将在 ajax 调用成功函数运行之前完成并返回。您不能以这种方式构造您的代码。这意味着`$("body").append(html + "</div>");`它将在 ajax 调用有机会将任何内容添加到您的`html`变量之前运行。

您需要将 ajax 响应回调视为独立的代码片段，它们在循环完成后的某个时间按自己的时间运行，`.each()`并在考虑该假设的情况下设计响应的处理。还要记住，多个 ajax 调用甚至不能保证按照它们发送的顺序完成。

您可以通过发送一个而不发送下一个来订购ajax调用，直到该调用完成，将组合的html保存在一个字符串变量中，然后在最后一个ajax调用的完成函数中，将最终累积的html字符串附加到身体。

这是另一个问题。在你的第一个`.each()`循环开始时，你有这个；

```
html = "<div class=\"page\" id=\"" + page[0] + "\">"; 
```

这会重新初始化`html`变量，覆盖可能已经存在的任何结果。您需要在任何 .each() 循环之前对其进行一次初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T02:22:44.573

ajaxStop 没有触发，因为 jsonp 请求默认不是全局的。看[这里](http://bugs.jquery.com/ticket/8338)

我已经更新了你的小提琴，它强制将 jsonp 请求作为全局请求。[http://jsfiddle.net/u42uy/3/](http://jsfiddle.net/u42uy/3/)

*编辑错字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T01:19:36.307

执行以下操作：

*   `var html = ''`在（第 1 行）之后添加`var pages`；
*   更改`html =`为`html +=`（第 6 行）；
*   在（第 41 行）`html = ''`之后添加。`$("body").append(html + "</div>");`

结果：

```
var pages = [["Page Title 1", ["Page URL 1", "Page URL 2", "Page URL 3"]], ["Page Title 2", ["Page URL 1", "Page URL 2", "Page URL 3"]], ["Page Title 3", ["Page URL 1", "Page URL 2", "Page URL 3"]]];
var html = ''; // ADD THIS

function loadFeeds() {
$.each(pages, function(index, page) {
    $(".pages").append("<a class=\"pagename\" href=\"#" + page[0] + "\">" + page[0] + "</a>");
    html += "<div class=\"page\" id=\"" + page[0] + "\">"; //ADD THE +

    $.each(page[1], function(index, feedUrl) {

    $.ajax({
    type: "GET",
    url: feedUrl,
    processData : true,
    data: {
        tagmode: "any"
        },
    jsonp: "jsonp",
    dataType: "jsonp",
    success: function(data) {
        html += "Some header HTML";

        $.each(data.responseData.feed.entries, function(i,entry) {
            if (entry.image_urls.length === 0) {
                html += "HTML from the data";
            }
            else {
                html += "More HTML";
            }

            if ( i == 34 ) return false;
        });
        html += "Closing tags from the header";
        afterAjax();
    },
            error: function(x,y,z) {
                alert(x.responseText);
            }
        });
    });
        $("body").append(html + "</div>");
        html = ''; // RESET HTML TO NEXT Each
}); 
```

# c++ - 是否应该从头文件声明中排除辅助函数？(C++)

> ID：11497062
> 
> 赞同：2
> 
> 时间：2012-07-16T01:14:46.570
> 
> 标签：c++, coding-style

是否应该从头文件声明中排除仅在实现文件中使用的辅助函数？

辅助函数是指与类密切相关的便利函数，但不代表对类的操作，不需要访问成员变量，因此不是方法。

一方面，将它们包含在头文件中使头文件成为相应c++实现的综合参考。另一方面，它又引入了一段代码来维护一致性。更重要的是，包含辅助函数会鼓励对抽象层的轻微违反，因为该函数并不意味着在其他上下文中运行，尽管不是以严重的方式，因为只要不存在破坏类状态的风险辅助函数本身并没有破坏它所使用的类的封装。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T01:16:31.320

> 一方面，将它们包含在头文件中使头文件成为相应c++实现的综合参考。

这不是头文件的目的。头文件应该是*接口*的参考，而不是*实现*。一些实现细节有时会泄漏，但应尽可能避免这种情况。

所以回答你的标题问题：是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:18:44.533

如果它们仅用于实现的一部分，则应将它们从主头文件中排除。但是，如果您想测试这些功能，您需要将它们的引用添加到单独的头文件中。

如果它们在实现的多个部分中使用，它们将属于它们自己的内部头文件，以便可以共享它们。

# dart - 我更改后内容被包装了

> ID：11497063
> 
> 赞同：1
> 
> 时间：2012-07-16T01:15:08.823
> 
> 标签：dart, rikulo

我更改了 TextView 的内容，但它显示为已包装。我做错了吗？

```
textView.text = “a new content”; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:57:07.697

一旦你改变了内容，你必须通过调用 textView.requestLayout() 来通知布局管理器。[有关详细信息，请参阅布局概述](http://docs.rikulo.org/rikulo/latest/Layouts/Fundamentals/Layout_Overview.html)中的“强制重做视图的布局” 。基本上，布局管理器只检测浏览器的大小调整和视图可见性的变化。

当然，你可以自己设置宽度。那么，是否换行就看你设置的宽度和内容了。

# iphone - 目标 C：如何在四边形曲线中绘制带有 alpha 的线

> ID：11497069
> 
> 赞同：1
> 
> 时间：2012-07-16T01:17:07.630
> 
> 标签：iphone, objective-c, ios, xcode

当我使用四边形曲线点时，我在点上遇到问题。我想将不透明度设置为我的线条，但我也在这里看到了点。这是我的代码。

```
CGPoint midPoint(CGPoint p1,CGPoint p2)
{
    return CGPointMake ((p1.x + p2.x) * 0.5,(p1.y + p2.y) * 0.5);
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event//upon touches
{
    UITouch *touch = [touches anyObject];

    previousPoint1 = [touch locationInView:self.view];
    previousPoint2 = [touch locationInView:self.view];
    currentTouch = [touch locationInView:self.view];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event//upon moving
{
    UITouch *touch = [touches anyObject];

    previousPoint2 = previousPoint1;
    previousPoint1 = currentTouch;
    currentTouch = [touch locationInView:self.view];

    CGPoint mid1 = midPoint(previousPoint2, previousPoint1); 
    CGPoint mid2 = midPoint(currentTouch, previousPoint1);

    UIGraphicsBeginImageContext(CGSizeMake(1024, 768));
    [imgDraw.image drawInRect:CGRectMake(0, 0, 1024, 768)];
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineCap(context,kCGLineCapRound);
    CGContextSetLineWidth(context, slider.value);
    CGContextSetBlendMode(context, blendMode);
    CGContextSetRGBStrokeColor(context,red, green, blue, 0.5);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGContextStrokePath(context);

    imgDraw.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsGetCurrentContext();
    endingPoint=currentTouch;
} 
```

任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:59:06.650

您需要做的是保留用户到目前为止输入的所有点的列表，并始终将所有点重新绘制为同一路径的一部分。

你需要一个数组来存储点。像

```
CGPoint points[kMaxNumPoints]; 
```

而不是 previousPoint1/2 等。然后在 中`touchesMoved:`，您将遍历循环中的点。像这样的东西：

```
CGContextBeginPath (context);
CGContextMoveToPoint (context, points [ 0 ].x, point [ 0 ].y);
for (int i = 1; i < currNumPoints; i++) 
{
    // I wasn't sure from your example if you wanted the mid point here instead of the 
    // previous point. But you get the idea.
    CGContextAddQuadCurveToPoint (context, points [ i - 1 ].x, points [ i - 1 ].y, point [ i ].x, point [ i ].y);
}
CGContextStrokePath (context); 
```

# java - 为什么这段代码不关闭 JDBC 连接？（Java 7 Autocloseable 意外行为）

> ID：11497070
> 
> 赞同：13
> 
> 时间：2012-07-16T01:17:08.663
> 
> 标签：java, jdbc, try-with-resources, connection-leaks

使用带有 try-with-resources 构造的 Java 7u5，以下代码**似乎会泄漏 jdbc 连接**：

```
try (Connection connection = ..; PreparedStatement stmt = ..) {
    stmt.setString(..);
    return stmt.executeUpdate() > 0;
} 
```

下一段代码按预期工作：

```
int ret = 0;

try (Connection connection = ..; PreparedStatement stmt = ..) {
    stmt.setString(..);
    ret = stmt.executeUpdate();
}

return ret > 0; 
```

似乎在第一种情况下，该`Connection.close()`方法没有被调用。

我正在使用最新的 mysql 连接器。这是出乎意料的行为，对吗？

## 测试

以下测试**不会**打印`CLOSED`：

```
public class Test implements AutoCloseable {

public static void main(String[] args) throws Exception {
    System.out.println(doTest());
}

private static boolean doTest() throws Exception {
    try (Test test = new Test()) {
        return test.execute() > 0;
    }

}

private int execute() {
    return 1;
}

@Override
public void close() throws Exception {
    System.out.println("CLOSED");
}
} 
```

奇怪的是，如果`execute()`修改为`return 0;`then`CLOSED` **将**被打印。

### javap -p -c Test.class 输出

```
 Compiled from "Test.java"
public class Test implements java.lang.AutoCloseable {
  public Test();
    Code:
       0: aload_0
       1: invokespecial #10                 // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]) throws java.lang.Exception;
    Code:
       0: getstatic     #21                 // Field java/lang/System.out:Ljava/io/PrintStream;
       3: invokestatic  #27                 // Method doTest:()Z
       6: invokevirtual #31                 // Method java/io/PrintStream.println:(Z)V
       9: return

  private static boolean doTest() throws java.lang.Exception;
    Code:
       0: aconst_null
       1: astore_0
       2: aconst_null
       3: astore_1
       4: new           #1                  // class Test
       7: dup
       8: invokespecial #39                 // Method "<init>":()V
      11: astore_2
      12: aload_2
      13: invokespecial #40                 // Method execute:()I
      16: ifle          21
      19: iconst_1
      20: ireturn
      21: iconst_0
      22: aload_2
      23: ifnull        30
      26: aload_2
      27: invokevirtual #44                 // Method close:()V
      30: ireturn
      31: astore_0
      32: aload_2
      33: ifnull        40
      36: aload_2
      37: invokevirtual #44                 // Method close:()V
      40: aload_0
      41: athrow
      42: astore_1
      43: aload_0
      44: ifnonnull     52
      47: aload_1
      48: astore_0
      49: goto          62
      52: aload_0
      53: aload_1
      54: if_acmpeq     62
      57: aload_0
      58: aload_1
      59: invokevirtual #47                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
      62: aload_0
      63: athrow
    Exception table:
       from    to  target type
          12    22    31   any
          30    31    31   any
           4    42    42   any

  private int execute();
    Code:
       0: iconst_1
       1: ireturn

  public void close() throws java.lang.Exception;
    Code:
       0: getstatic     #21                 // Field java/lang/System.out:Ljava/io/PrintStream;
       3: ldc           #55                 // String CLOSED
       5: invokevirtual #57                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
       8: return
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:36:05.443

升级到最新版本的 eclipse (Juno) 后，这种奇怪的行为不再发生。

使用命令行编译和运行它也可以正常工作。

我怀疑 Eclipse Indigo 正在使用旧版本`javac`进行编译，并且没有抱怨任何合规性违规。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:05:39.723

我在使用 JDK 1.7.0_17 时遇到了同样的问题。经过仔细排除，结果证明我的 IntelliJ 使用的是 AspectJ 编译器。一旦我使用 JDK 的 javac 显式编译了该类，它就会按预期工作。

我的同事已向AspectJ 人员提交[了错误报告。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=404054)他们已经安排了 1.7.3 版的修复

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:16:42.880

这是一个 java 7u5 错误；**去注册一个错误。** Java 7u4 工作。

```
return test.execute() > 0; 
```

给出 > 0 的错误代码：

```
 13: invokespecial #40                 // Method execute:()I
  16: ifle          21
  19: iconst_1
  20: ireturn 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:06:18.650

## 编辑

1.  `Eclipse Juno`它工作得很好。我不认为这是一个 java 7 错误。从 运行时它不起作用`Eclipse Indigo`。

2.  它也适用于`Command Line`.

## 上一个答案

在以下情况下，我运行您的程序并且它有效，我正在检查您的情况

情况1 ：

```
public class Test implements AutoCloseable {

    public int execute() {
        return 1;
    }

    @Override
    public void close() throws Exception {
        System.out.println("CLOSED");
    }
}

public class Test1 {

    public static void main(String[] args) throws Exception {

        try (Test test = new Test()) {
            System.out.println(test.execute() > 0);
        }

    }

} 
```

输出 ：

```
true
CLOSED 
```

案例2：

```
public class Test implements AutoCloseable {

    public static void main(String[] args) throws Exception {
        System.out.println(doTest());
    }

    private static boolean doTest() throws Exception {
        try (Test test = new Test()) {
            throw new ArrayIndexOutOfBoundsException("exc"); // just for testing
            //return test.execute() > 0;
        }

    }

    private int execute() {
        return 1;
    }

    @Override
    public void close() throws Exception {
        System.out.println("CLOSED");
    }
} 
```

输出 ：

```
CLOSED
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: exc
    at com.aquent.rambo.auth.Test.doTest(Test.java:11)
    at com.aquent.rambo.auth.Test.main(Test.java:6) 
```

案例3：`Here this is wierd, and it works`

```
public class Test implements AutoCloseable {

    public static void main(String[] args) throws Exception {
        System.out.println(doTest());
    }

    private static boolean doTest() throws Exception {
        try (Test test = new Test()) {
            boolean result = test.execute() > 0; // Change : result variable declared
            return result;
        }

    }

    private int execute() {
        return 1;
    }

    @Override
    public void close() throws Exception {
        System.out.println("CLOSED");
    }
} 
```

输出 ：

```
CLOSED
true 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-16T01:53:55.283

完成后您是否尝试关闭语句和/或连接。

*还要确保在 finally 块中执行此操作：*

# html - 推特引导程序的日期选择器

> ID：11497080
> 
> 赞同：0
> 
> 时间：2012-07-16T01:19:46.327
> 
> 标签：html, twitter, twitter-bootstrap

我没有在 github 或 twitter 引导程序中找到现有的日期选择器。

我有 twitter bootstrap 的修改版本，按钮/主题带有橙色样式的图标。

当我尝试使用 eyecon 中的[datepicker](http://www.eyecon.ro/bootstrap-datepicker/)时，它会将我的引导网站上的图标改造成蓝色。我想将此日期选择器设置为与我的主题相同。但我不确定是否应该从 eyecon 版本复制粘贴到我的版本中？

有人知道如何从 eyecon 重新设计日期选择器的更好方法吗？我的主题？我目前没有使用任何其他插件。

* * *

编辑 2012 年 9 月 4 日

我在这个问题中的意思是使用诸如[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)之类的插件我正在研究的主题是基于橙色主题的。

eyecon 有一个蓝色主题。我的方法是根据我的橙色主题获得相同的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:53:12.007

eyecon 的 Datepicker 使用它自己的 css 文件[datepicker.css](http://www.eyecon.ro/bootstrap-datepicker/css/datepicker.css)。您应该将此 css 文件中的颜色更改为您需要的颜色。

# c# - 更新存储在文件中的 JSON

> ID：11497081
> 
> 赞同：0
> 
> 时间：2012-07-16T01:19:59.320
> 
> 标签：c#, windows-phone-7, serialization, json.net

我有一些 JSON 存储在一个文件中，如下所示。我想要做的是找到`Task2`，将其状态从`complete`to更改`deleted`，然后将其保存回我从中获取的文本文件中。但是对于我的一生，我无法弄清楚这一点。

这是我的 JSON：

```
{
    "tasks": [
        {
            "task"     : "Task1",
            "quantity" : "(1)",
            "state"    : "incomplete",
            "changed"  : "never"    
        },
        {
            "task"     : "Task2",
            "quantity" : "(1)",                             
            "state"    : "complete",
            "changed"  : "never"                    
        },
        {
            "task"     : "Task3",
            "quantity" : "(1)",             
            "state"    : "deleted",
            "changed"  : "never"                    
        }
    ]
} 
```

这是我到目前为止的代码（使用 Json.Net）

```
using (StreamReader reader = new StreamReader(fileStream))
{
    string txt = reader.ReadToEnd();

    JObject jObject = JObject.Parse(txt);
    JArray tasks = (JArray) jObject["tasks"];

    ....

    reader.Close();
} 
```

为了更新 JSON，我需要什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-21T22:52:46.767

你可以像这样很容易地完成你想要的：

```
// Read the JSON file 
string json = File.ReadAllText(fileName);

// Parse the JSON
JObject jObject = JObject.Parse(json);
JArray tasks = (JArray)jObject["tasks"];

// Find the first JObject in tasks having a "task" property with a value of "Task2"
// If such an object exists, set its "state" property to "deleted"
JObject task2 = (JObject)tasks.FirstOrDefault(a => a["task"].ToString() == "Task2");
if (task2 != null)
{
    task2["state"] = "deleted";
}

// Write the JSON back to the file
File.WriteAllText(fileName, jObject.ToString()); 
```

请注意，您需要`using System.Linq;`在代码顶部包含才能访问该`FirstOrDefault()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:44:34.407

您可以使用 Json.Net (http://json.codeplex.com/releases/view/89222) 并将其引用添加到您的项目中，然后您可以执行类似的操作...

```
 [DataContract]
        public class TaskClass
        {
            [DataMember(Name="task")]
            public string task { get; set; }

            [DataMember(Name="quantity")]
            public string quantity { get; set; }

            [DataMember(Name="state")]
            public string state { get; set; }

            [DataMember(Name = "changed")]
            public string changed { get; set; }
        }

        [DataContract]
        public class Tasks
        {
            [DataMember(Name = "tasks")]
            public IEnumerable<TaskClass> tasks { get; set; }
        }

//and you can deserialize json :

    string json = "{\"tasks\":[{\"task\": \"Task1\",\"quantity\": \"(1)\",\"state\": \"incomplete\",\"changed\": \"never\"},{\"task\": \"Task2\",\"quantity\": \"(1)\",\"state\": \"complete\",\"changed\": \"never\"},{\"task\":\"Task3\",\"quantity\": \"(1)\",\"state\": \"deleted\",\"changed\": \"never\" }]}";

            Tasks allTasks = new Tasks();
            allTasks = JsonConvert.DeserializeObject<Tasks>(json);

            foreach (TaskClass task in allTasks.tasks)
            {
                if (task.task.ToLower() == "task2")
                {
                    task.state = "deleted";
                }
            }

//and serialize it again as :

string value = JsonConvert.SerializeObject(objTasks); 
```

# php - 如何根据键从表中选择一组随机行？

> ID：11497082
> 
> 赞同：0
> 
> 时间：2012-07-16T01:19:58.620
> 
> 标签：php, mysql, sql, random, rows

我知道`RAND()`SQL 中从表中选择随机行的函数，但问题是我不希望它在每次刷新浏览器时选择不同的随机行。我想要相同的一组随机行，它是基于一个键选择的。

例如，假设这是我的表：

```
----------------------
| id | word | literal|
----------------------
|  1 | say  |   YAS  |
----------------------
|  2 | eat  |   TAE  |
----------------------
|  3 | hit  |   TIH  |
----------------------
|  4 | bad  |   DAB  |
----------------------
|  5 |delve | EVLED  |
---------------------- 
```

也许如果键是 6，它每次都会选择第 4 行和第 5 行。但也许如果键是 3，它会选择第 2 行和第 5 行。所以它每次都会根据一个键选择一组随机行。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T01:25:24.613

您可以使用 MySQL 函数的 : Rand(N) 形式，并注意每次需要相同的生成随机数序列时传递相同的 N。N 可以在特定会话期间保持不变，也可以存储在 cookie 中以供更长时间使用。这取决于您需要多长时间保持序列不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:22:40.887

使用 md5 哈希的想法很好，但是有一种更简单的方法可以做到这一点。根据需要生成随机数，并使用[`$_SESSION`](http://php.net/manual/en/reserved.variables.session.php)超全局来存储数字。

例子：

```
session_start();
if(!isset($_SESSION["randomNumber"])){
    $_SESSION["randomNumber"] = generateRandomQuery();
} 
```

然后，您就可以在构建查询时使用该号码。使用 PDO，它会是这样的：

```
$number = $_SESSION["randomNumber"];
$query = $database->prepare("SELECT id FROM *databaseName* where id = :id");
$query->execute(array(":id" => $number)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T01:25:07.087

一个想法..

将行 ID 保存在 SESSION/cookie 中，

```
$var = value from $_SESSION/cookie
if (isset($var)){

   $sql = select RAND...

} else {

   $sql = select ..... where row = $var

} 
```

# c# - 在 Unity 3D 中使用触摸输入在地形上移动相机

> ID：11497085
> 
> 赞同：6
> 
> 时间：2012-07-16T01:20:40.160
> 
> 标签：c#, ios, 3d, touch, unity3d

我是 Unity 的新手，我正在尝试弄清楚如何使用触摸输入在地图/地形上移动相机。相机将以 (90,0,0) 的旋转向下看地形。地形在第 8 层。我用键盘移动它没有问题，现在我试图移动到触摸，如果你想在 iOS 上保持预期的使用，这是非常不同的。

我能想到的内置 iOS 应用程序的最佳示例是地图，其中用户将触摸屏幕，只要手指停留在屏幕上，地图上的那个点就会停留在手指下方。因此，当用户移动他们的手指时，地图似乎也随着手指移动。我无法找到展示如何以这种方式进行操作的示例。我见过很多用鼠标移动相机或角色的例子，但它们似乎不能很好地转化为这种风格。

还张贴在 Unity3D 答案上：

[http://answers.unity3d.com/questions/283159/move-camera-over-terrain-using-touch-input.html](http://answers.unity3d.com/questions/283159/move-camera-over-terrain-using-touch-input.html)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T03:07:40.853

下面应该是你需要的。请注意，在使用透视相机时，很难在手指/光标和地形之间获得 1 对 1 的对应关系。如果您将相机更改为正交，下面的脚本应该为您提供手指/光标位置和地图移动之间的完美地图。通过透视，您会注意到轻微的偏移。

你也可以用光线追踪来做到这一点，但我发现这条路线很草率而且不够直观。

用于测试的相机设置（值是从检查器中提取的，因此在此处应用它们）：

1.  位置：0,20,0
2.  方向：90,0,0
3.  投影：透视/正交

* * *

```
using UnityEngine;
using System.Collections;

public class ViewDrag : MonoBehaviour {
    Vector3 hit_position = Vector3.zero;
    Vector3 current_position = Vector3.zero;
    Vector3 camera_position = Vector3.zero;
    float z = 0.0f;

    // Use this for initialization
    void Start () {

    }

    void Update(){
        if(Input.GetMouseButtonDown(0)){
            hit_position = Input.mousePosition;
            camera_position = transform.position;

        }
        if(Input.GetMouseButton(0)){
            current_position = Input.mousePosition;
            LeftMouseDrag();        
        }
    }

    void LeftMouseDrag(){
        // From the Unity3D docs: "The z position is in world units from the camera."  In my case I'm using the y-axis as height
        // with my camera facing back down the y-axis.  You can ignore this when the camera is orthograhic.
        current_position.z = hit_position.z = camera_position.y;

        // Get direction of movement.  (Note: Don't normalize, the magnitude of change is going to be Vector3.Distance(current_position-hit_position)
        // anyways.  
        Vector3 direction = Camera.main.ScreenToWorldPoint(current_position) - Camera.main.ScreenToWorldPoint(hit_position);

        // Invert direction to that terrain appears to move with the mouse.
        direction = direction * -1;

        Vector3 position = camera_position + direction;

        transform.position = position;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-08T09:27:38.310

我想出了这个脚本（我已经把它附加到相机上）：

```
private Vector2 worldStartPoint;

void Update () {

    // only work with one touch
    if (Input.touchCount == 1) {
        Touch currentTouch = Input.GetTouch(0);

        if (currentTouch.phase == TouchPhase.Began) {
            this.worldStartPoint = this.getWorldPoint(currentTouch.position);
        }

        if (currentTouch.phase == TouchPhase.Moved) {
            Vector2 worldDelta = this.getWorldPoint(currentTouch.position) - this.worldStartPoint;

            Camera.main.transform.Translate(
                -worldDelta.x,
                -worldDelta.y,
                0
            );
        }
    }
}

// convert screen point to world point
private Vector2 getWorldPoint (Vector2 screenPoint) {
    RaycastHit hit;
    Physics.Raycast(Camera.main.ScreenPointToRay(screenPoint), out hit);
    return hit.point;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-14T02:33:47.873

Pavel 的回答对我帮助很大，所以想与社区分享我的解决方案，以防它帮助其他人。我的场景是一个带有正交相机的 3D 世界。我正在研究的自上而下风格的 RTS。我希望平移和缩放像 Google 地图一样工作，当您平移和缩放时，鼠标始终停留在地图上的同一位置。这个脚本为我实现了这一点，并希望它足够强大，可以满足其他人的需求。我还没有对其进行大量测试，但我对它进行了评论，供初学者学习。

```
using UnityEngine;

// I usually attach this to my main camera, but in theory you can attach it to any object in scene, since it uses Camera.main instead of "this".
public class CameraMovement : MonoBehaviour
{
    private Vector3 MouseDownPosition;

    void Update()
    {
        // If mouse wheel scrolled vertically, apply zoom...
        // TODO: Add pinch to zoom support (touch input)
        if (Input.mouseScrollDelta.y != 0)
        {
            // Save location of mouse prior to zoom
            var preZoomPosition = getWorldPoint(Input.mousePosition);

            // Apply zoom (might want to multiply Input.mouseScrollDelta.y by some speed factor if you want faster/slower zooming
            Camera.main.orthographicSize = Mathf.Clamp(Camera.main.orthographicSize + Input.mouseScrollDelta.y, 5, 80);

            // How much did mouse move when we zoomed?
            var delta = getWorldPoint(Input.mousePosition) - preZoomPosition;

            // Rotate camera to top-down (right angle = 90) before applying adjustment (otherwise we get "slide" in direction of camera angle).
            // TODO: If we allow camera to rotate on other axis we probably need to adjust that also.  At any rate, you want camera pointing "straight down" for this part to work.
            var rot = Camera.main.transform.localEulerAngles;
            Camera.main.transform.localEulerAngles = new Vector3(90, rot.y, rot.z);

            // Move the camera by the amount mouse moved, so that mouse is back in same position now.
            Camera.main.transform.Translate(delta.x, delta.z, 0);

            // Restore camera rotation
            Camera.main.transform.localEulerAngles = rot;
        }

        // When mouse is first pressed, just save location of mouse/finger.
        if (Input.GetMouseButtonDown(0))
        {
            MouseDownPosition = getWorldPoint(Input.mousePosition);
        }

        // While mouse button/finger is down...
        if (Input.GetMouseButton(0))
        {
            // Total distance finger/mouse has moved while button is down
            var delta = getWorldPoint(Input.mousePosition) - MouseDownPosition;

            // Adjust camera by distance moved, so mouse/finger stays at exact location (in world, since we are using getWorldPoint for everything).
            Camera.main.transform.Translate(delta.x, delta.z, 0);
        }
    }

    // This works by casting a ray.  For this to work well, this ray should always hit your "ground".  Setup ignore layers if you need to ignore other colliders.
    // Only tested this with a simple box collider as ground (just one flat ground).
    private Vector3 getWorldPoint(Vector2 screenPoint)
    {
        RaycastHit hit;
        Physics.Raycast(Camera.main.ScreenPointToRay(screenPoint), out hit);
        return hit.point;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-22T20:58:14.707

根据 Pavel 的回答，我简化了脚本并删除了当用一个以上的手指触摸并释放第二个手指时不可爱的“跳跃”：

```
private bool moreThenOneTouch = false;
private Vector3 worldStartPoint;

void Update() {

    Touch currentTouch;
    // only work with one touch
    if (Input.touchCount == 1 && !moreThenOneTouch) {
        currentTouch = Input.GetTouch(0);

        if (currentTouch.phase == TouchPhase.Began) {
            this.worldStartPoint = Camera.main.ScreenToWorldPoint(currentTouch.position);
        }

        if (currentTouch.phase == TouchPhase.Moved) {
            Vector3 worldDelta = Camera.main.ScreenToWorldPoint(currentTouch.position) - this.worldStartPoint;

            Camera.main.transform.Translate(
                -worldDelta.x,
                -worldDelta.y,
                0
            );
        }

    }

    if (Input.touchCount > 1) {
        moreThenOneTouch = true;
    } else {
        moreThenOneTouch = false;
        if(Input.touchCount == 1)
            this.worldStartPoint = Camera.main.ScreenToWorldPoint(Input.GetTouch(0).position);
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-03-15T10:58:13.807

```
using UnityEngine;

// I usually attach this to my main camera, but in theory you can attach it to any object in scene, since it uses Camera.main instead of "this".
public class CameraMovement : MonoBehaviour
{
    private Vector3 MouseDownPosition;

    void Update()
    {
        // If mouse wheel scrolled vertically, apply zoom...
        // TODO: Add pinch to zoom support (touch input)
        if (Input.mouseScrollDelta.y != 0)
        {
            // Save location of mouse prior to zoom
            var preZoomPosition = getWorldPoint(Input.mousePosition);

            // Apply zoom (might want to multiply Input.mouseScrollDelta.y by some speed factor if you want faster/slower zooming
            Camera.main.orthographicSize = Mathf.Clamp(Camera.main.orthographicSize + Input.mouseScrollDelta.y, 5, 80);

            // How much did mouse move when we zoomed?
            var delta = getWorldPoint(Input.mousePosition) - preZoomPosition;

            // Rotate camera to top-down (right angle = 90) before applying adjustment (otherwise we get "slide" in direction of camera angle).
            // TODO: If we allow camera to rotate on other axis we probably need to adjust that also.  At any rate, you want camera pointing "straight down" for this part to work.
            var rot = Camera.main.transform.localEulerAngles;
            Camera.main.transform.localEulerAngles = new Vector3(90, rot.y, rot.z);

            // Move the camera by the amount mouse moved, so that mouse is back in same position now.
            Camera.main.transform.Translate(delta.x, delta.z, 0);

            // Restore camera rotation
            Camera.main.transform.localEulerAngles = rot;
        }

        // When mouse is first pressed, just save location of mouse/finger.
        if (Input.GetMouseButtonDown(0))
        {
            MouseDownPosition = getWorldPoint(Input.mousePosition);
        }

        // While mouse button/finger is down...
        if (Input.GetMouseButton(0))
        {
            // Total distance finger/mouse has moved while button is down
            var delta = getWorldPoint(Input.mousePosition) - MouseDownPosition;

           // Adjust camera by distance moved, so mouse/finger stays at exact location (in world, since we are using getWorldPoint for everything).
           Camera.main.transform.Translate(delta.x, delta.z, 0);
        }
    }

    // This works by casting a ray.  For this to work well, this ray should always hit your "ground".  Setup ignore layers if you need to ignore other colliders.
    // Only tested this with a simple box collider as ground (just one flat ground).
    private Vector3 getWorldPoint(Vector2 screenPoint)
    {
        RaycastHit hit;
        Physics.Raycast(Camera.main.ScreenPointToRay(screenPoint), out hit);
        return hit.point;
    }
} 
```

# android - Android Intent 导致 NoClassDefFoundError

> ID：11497088
> 
> 赞同：3
> 
> 时间：2012-07-16T01:21:40.643
> 
> 标签：android, android-intent, noclassdeffounderror

我在尝试创建新的 Intent 以启动服务时遇到了 NoClassDefFoundError。我已经检查了几个建议的解决方案，例如在 /libs 路径中包含库，我相信我已经正确设置了这些。我在下面包含了我的清单和来源。任何帮助将非常感激。

这是我在 Eclipse 中的文件结构的屏幕截图 ![在此处输入图像描述](../Images/cca391eb16e3deec3e76b51f380ec97a.png)

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ajinex.easysave"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="11" />
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".CouponsActivity"
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"
        android:label="@string/title_activity_coupons" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
        <!--  service  -->
        <service android:enabled="true" android:name=".LocationCheckService" >
    </service>
</application> 
```

这是我在 MainActivity 中的调用代码：

```
Intent LocationCheck = new Intent(this, LocationCheckService.class);
    this.startService(LocationCheck); 
```

这是我的 LocationCheckService.class

```
public class LocationCheckService extends Service {
    public class LocalBinder extends Binder {
        LocationCheckService getService() {
            return LocationCheckService.this;
        }
    }

    public final IBinder mBinder = new LocalBinder();

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        if(checkNetworkRechability()){
            Toast.makeText(this, "EasySave Service Started", Toast.LENGTH_LONG).show();
            getSysLocation();
        }
        return START_STICKY;
    }
    @Override
    public void onCreate() {

    }

    @Override
    public void onDestroy() {

    }
} 
```

以下是与该问题相关的一些 LogCat 输出：

```
07-16 00:09:36.712: I/AndroidRuntime(312): NOTE: attach of thread 'Binder Thread #3' failed
07-16 00:09:37.702: W/ActivityManager(59): Unable to start service Intent { act=com.ajinex.easysave.location.LocationCheckService }: not found
07-16 00:09:38.162: I/ActivityManager(59): Displayed activity   com.ajinex.easysave/.MainActivity: 1568 ms (total 1568 ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:37:53.873

尝试：

```
 Intent LocationCheck = new Intent();
    LocationCheck.setComponent(new ComponentName("com.ajinex.easysave", 
    "com.ajinex.easysave.LocationCheckService"));
    this.startService(LocationCheck); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:40:35.313

根据错误消息 (com.ajinex.easysave.location.LocationCheckService) 和包名 (com.ajinex.easysave)，您需要在清单文件中将服务声明为 .location.LocationCheckService。

# php - 为什么 15.5 mod 5 = 0？

> ID：11497089
> 
> 赞同：5
> 
> 时间：2012-07-16T01:21:43.400
> 
> 标签：php, modulus

我理解 15 mod 5 = 0 因为除法没有余数。

但是为什么 15.5 mod 5 == 0 呢？剩下的不是0.5吗？

```
$time = "15.5";
$interval = 5.0;
if($time % $interval == 0)
    echo "it's time!";
else
    echo "not time";

//Outputs: it's time! 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-16T01:24:29.473

来自[PHP 文档](http://php.net/manual/en/language.operators.arithmetic.php)：

> 模数的操作数在处理之前被转换为整数（通过去除小数部分）。

[`fmod`](http://www.php.net/manual/en/function.fmod.php)如果要保留小数余数，请使用。（感谢**Oli Charlesworth**的链接，他不知道存在这样的功能。）

# c# - 重写抽象方法时，我再次设置抽象是否正确？

> ID：11497090
> 
> 赞同：3
> 
> 时间：2012-07-16T01:21:54.997
> 
> 标签：c#, class, abstract-class, abstract

也许标题令人困惑。

让我给你举个例子：

```
public abstract class Base
{
    protected abstract void DoSomething();
}

public abstract class BaseA : Base
{
    protected abstract void DoSomething();
}

public class ClassA1 : BaseA
{
    protected override void DoSomething()
    {
        // do something!
    }
}

public class ClassA2 : BaseA
{
    protected override void DoSomething()
    {
        // do something!
    }
} 
```

使用此代码，这是与我的真实项目类似的场景。我有一个基类。但我意识到基类需要再次抽象，所以方法 DoSomething 需要再次抽象，当我有具体类时我想重写它。

是一个好习惯吗？还是因为我将方法设置为抽象两次而出现问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T01:23:55.607

你真的不需要在`BaseA`;上声明方法。它的所有子类都将通过其父类继承它。

当您想在子类上将具体方法重新定义为抽象时，An`abstract override` [很有用。](https://stackoverflow.com/questions/8905432/what-is-the-use-of-abstract-override-in-c)

# jquery - 用 jQuery 替换 img src 属性不起作用

> ID：11497092
> 
> 赞同：0
> 
> 时间：2012-07-16T01:22:13.733
> 
> 标签：jquery, replace, slideshow, src, attr

我正在尝试创建简单的幻灯片，如果我单击图像，它将变成下一个图像。到目前为止，我在一个名为 1-4 的子文件夹中有四个图像（例如：1.jpg、2.jpg、3.jpg、4.jpg）。我设置了一个计数器（变量 imgcounter），如果它大于 4，它将重置为 1，我使用此计数器轻松更改 img 元素的 src 名称。

简单版：

```
$(document).ready(function() {
var imgcounter = 1; 
$('#slide img').each(function() {
    $(this).click(function() {
        if(imgcounter <= 4 ) {
            imgcounter++;
            $(this).attr('src', 'images/' + imgcounter + '.JPG');
        } // end if
        else {
            var imgcounter = 1;
            $(this).attr('src', 'images/' + imgcounter + '.JPG');
        } // end else
    }); // end click    
}); // end each
});  // end ready 
```

在这个版本中，如果我点击它，图像甚至不会改变。

我也尝试过这种更复杂的方法，我在其中放置一个变量来定义我想用什么替换源。我不确定我是否正确使用了 replace() 函数，尤其是在我使用双撇号 '' 表示我要替换整个 src 的部分。我也不确定我是否合法地写出了 replace() 函数的第二部分——'images/' + imgcounter + '.JPG'。

```
$(document).ready(function() {
var imgcounter = 1; 
$('#slide img').each(function() {
    var imgFile = $(this).attr('src');
    var preloadImg = new Image();
    $(this).click(function() {
        if(imgcounter <= 4 ) {
            imgcounter++;
            preloadImg.src = imgFile.replace('', 'images/' + imgcounter + '.JPG');
            $(this).attr('src', preloadImg.src);
        } // end if
        else {
            var imgcounter = 1;
            preloadImg.src = imgFile.replace('', 'images/' + imgcounter + '.JPG');
            $(this).attr('src', preloadImg.src);
        } // end else
    }); // end click    
}); // end each
});  // end ready 
```

在这个版本中，图像发生了变化，但我得到了一个损坏的图像符号，错误控制台显示：无法加载资源文件：///..（取出完整路径）../images/1.JPGimages/1.JPG I'我不确定为什么它无法替换整个源代码，而是似乎只是在末尾附加了源名称的副本......

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:33:26.783

我会做类似的事情：

```
var imgcounter = 1;

$("#slide img").click(function(e){
    if(imgcounter < 4){
        imgcounter++;
    }else{
        imgcounter = 1;
    }
    $(this).attr("src", "images/"+imgcounter+".jpg");
}); 
```

无论如何，它将处理程序添加到每个`img`内部`#slide`，因此不需要该`each()`函数，并且看起来更干净。此外，删除了对`$(this).attr()`.

# html - 从按钮中删除边框

> ID：11497094
> 
> 赞同：151
> 
> 时间：2012-07-16T01:23:05.400
> 
> 标签：html, css, button

我尝试创建按钮并插入我自己的图像而不是标准按钮图像。但是，标准按钮的灰色边框仍然存在，显示在我的黑色按钮图像的外部。

有谁知道如何从按钮上删除这个灰色边框，所以它只是图像本身？谢谢你。

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-07-16T01:27:02.823

添加

```
padding: 0;
border: none;
background: none; 
```

到您的按钮。

演示：

[https://jsfiddle.net/Vestride/dkr9b/](https://jsfiddle.net/Vestride/dkr9b/)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2016-01-04T05:31:27.237

这似乎对我很有效。

```
button:focus { outline: none; } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-04T16:08:23.290

我遇到了同样的问题，即使我在 CSS 中设置了按钮的样式，它也永远不会拾取，`border:none`但有效的是直接在输入按钮上添加样式，如下所示：

```
<div style="text-align:center;">
    <input type="submit" class="SubmitButtonClass" style="border:none;" value="" />
</div> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-10-01T00:13:11.030

```
input[type="button"] {
border: none;
outline:none;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-08-12T09:03:58.587

你可以很容易地给它这种风格：

```
MyButton {
border: none;
outline: none;
background: none;
} 
```

也将`border: none;`在不提供轮廓的情况下单独为您完成工作（因为：轮廓是在元素边框之外绘制的一条线。所以当没有边框时，outline 属性本身没有任何意义）。

背景速记 CSS 属性一次设置所有背景样式属性，例如颜色、图像、原点和大小，或重复方法。因此，当您将其值设置为 时`none`，它会阻止您的按钮具有任何颜色、图像等......

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-02-27T15:09:02.380

从按钮焦点上的按钮中删除默认的“蓝色边框”：

在 HTML 中：

```
<button class="new-button">New Button...</button> 
```

在 CSS 中

```
button.new-button:focus {
    outline: none;
} 
```

希望能帮助到你 ：）

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-16T01:27:58.037

尝试使用：`border:0;`或`border:none;`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-16T01:31:04.137

你也可以试试`background:none;border:0px`按钮。

css 选择器也是`div#yes button{..}`and `div#no button{..}`。希望它有帮助

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-06-04T05:59:27.350

将此添加为css，

```
button[type=submit]{border:none;} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-06-13T11:05:15.190

只需使用： `button{border:none; outline:none;}`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-07-16T01:30:50.050

通常的技巧是使图像本身成为链接而不是按钮的一部分。然后，将“click”事件与自定义处理程序绑定。

Jquery-UI 或 Bootstrap 等框架开箱即用。顺便说一句，使用其中之一可能会大大简化整个应用程序的概念。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-04-11T00:35:35.923

您可以像这样在 CSS 样式中定位按钮：

```
 div button {
    border: none;
 } 
```

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2019-03-06T19:40:47.360

```
$(".myButtonClass").css(["border:none; background-color:white; padding:0"]); 
```

# c# - 如何测试 C# ref 参数是否引用相同的项目

> ID：11497095
> 
> 赞同：10
> 
> 时间：2012-07-16T01:23:09.973
> 
> 标签：c#

在 C# 中，给定一个具有以下签名的函数

```
public static void Foo(ref int x, ref int y) 
```

如果函数是使用

```
int A = 10;
Foo(ref A, ref A) 
```

在函数 Foo 内部是否可以测试 x 和 y 参数引用相同的变量？x 和 y 的简单等效测试是不够的，因为在两个不同变量具有相同值的情况下也是如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T01:50:31.243

如果你愿意使用不安全的代码，你可以比较底层的变量地址：

```
public static bool Foo(ref int a, ref int b)
{
    unsafe
    {
        fixed (int* pa = &a, pb = &b)
        {
            // return true iff a and b are references to the same variable
            return pa == pb; 
        }
    }
} 
```

（编辑以`unsafe`从方法签名中删除，基于@Michael Graczyk 的评论。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T01:27:14.010

您可以使用`Object.ReferenceEquals(x, y)`来确定是否`x`和`y`是对同一对象的引用。

编辑：正如 Kirk Woll 所指出的（在[MSDN](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)上的这篇文章中确认），此方法不适用于值类型（由于装箱）。您可以通过将方法上的参数类型从更改为来解决此问题`int`（`object`当然，这意味着您还必须将`object`变量传递给方法 - 这仍然可以是`int`）。

即方法变为：

```
public static void Foo(ref object x, ref object y) {
    Console.WriteLine("x and y the same ref: {0}", Object.ReferenceEquals(x, y));
} 
```

并调用它：

```
object A = 10;
Foo(ref A, ref A); 
```

将导致`"x and y are the same ref: True"`

# c++ - 在不事先了解特定成员函数的情况下从另一个类访问成员函数

> ID：11497100
> 
> 赞同：1
> 
> 时间：2012-07-16T01:24:04.043
> 
> 标签：c++, oop, function-pointers

我想创建一个类来访问一系列类的成员函数。更详细地说，我有类 ControlChaos 声明如下：

```
#define CALL_MEMBER_FN(object, ptrToMember) ((object)->*(ptrToMember))

typedef double (MultiMaps::*mapsGetPtr)();
typedef void (MultiMaps::*mapsSetPtr)(double para);

class ControlChaos
{
public:
    ControlChaos(MultiMaps* _map,
                 mat orbitPoints,
                 colvec initCond,
                 mapsGetPtr getPtr,
                 mapsSetPtr setPtr,
                 double deltaMax,
                 double epsilonNeighborhood,
                 int controlIterations,
                 int maxIterations);

/* Other stuff here. */
}; 
```

具有类型为 mapsGetPtr 和 mapsSetPtr 等的受保护成员变量。在实现中，我使用

```
 CALL_MEMBER_FN(map,setPtr)(someParameter); 
```

调用我在 ControlChaos 的构造函数中使用函数指针指定的函数。我要访问的成员函数是从 MultiMaps 派生的类的成员。这段代码本身可以很好地编译。当我尝试使用指向从 MultiMaps 派生的类中的成员函数的函数指针来实例化 ControlChaos 对象时，编译器会抱怨我给了它错误的参数类型。

此外，这篇[文章](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)似乎暗示静态演员可以完成这项工作，但我还没有发现这是真的。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:04:56.470

*static_cast*确实是将*指针类型的成员*`Child::*`转换为type所需的全部`Base::*`内容，请参见以下代码段：

```
struct ChildOfMultiMap : MultiMap { 
   ...
};

...

void(ChildOfMultiMap::* child_mem_ptr)(double) = &ChildOfMultiMap::set;

mapsSetPtr ptr = static_cast<mapsSetPtr> (child_mem_ptr); 
```

^(*请记住，如果您不小心在（而不是相关）的实例上使用*指向成员的指针，这可能会很危险。*`Base``Child`*)

* * *

### 这在什么方面可能是危险的？

在下面的代码片段中，我们使用与前面描述的完全相同的方法，尽管调用`Child::func`类型的对象`Base`会导致*未定义的行为*，因为我们正在访问函数内部*不存在*的 Base 成员。

```
struct Base {
  /* ... */
};

struct Child : Base {

  void func () {
    this->x = 123;
  }

  int x;
}; 
```

```
int
main (int argc, char *argv[])
{
  typedef void (Base::*BaseFuncPtr) (); 

  BaseFuncPtr ptr_to_child_func = static_cast<BaseFuncPtr> (&Child::func);

  Base b;

  (b.*ptr_to_child_func) (); /* undefined-behavior */
} 
```

# java - 将arraylist分成多个arraylist

> ID：11497103
> 
> 赞同：0
> 
> 时间：2012-07-16T01:24:18.593
> 
> 标签：java

我的程序根据一天中的时间创建一个包含 5000 到 60000 条记录的数组列表。我想将它拆分为尽可能多的数组列表，每个数组列表将有 1000 条记录。我在网上查看了许多示例并尝试了一些方法，但遇到了奇怪的问题。你能给我看一个例子吗？

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:42:20.923

```
 public static <T> Collection<Collection<T>> split(Collection<T> bigCollection, int maxBatchSize) {
    Collection<Collection<T>> result = new ArrayList<Collection<T>>();

    ArrayList<T> currentBatch = null;
    for (T t : bigCollection) {
      if (currentBatch == null) {
        currentBatch = new ArrayList<T>();
      } else if (currentBatch.size() >= maxBatchSize) {
        result.add(currentBatch);
        currentBatch = new ArrayList<T>();
      }

      currentBatch.add(t);
    }

    if (currentBatch != null) {
      result.add(currentBatch);
    }

    return result;
  } 
```

下面是我们如何使用它（假设电子邮件是一个大的电子邮件地址数组列表：

```
Collection<Collection<String>> emailBatches = Helper.split(emails, 500);
    for (Collection<String> emailBatch : emailBatches) {
        sendEmails(emailBatch);
        // do something else...
        // and something else ...
    }
} 
```

emailBatch 将像这样遍历集合：

```
private static void sendEmails(Collection<String> emailBatch){
    for(String email: emailBatch){
        // send email code here.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:27:31.720

您可以使用`subList` [http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList) 来`List`拆分您的`ArrayList`. 子列表将为您提供原始列表的视图。如果您真的想创建一个与旧列表分开的新列表，您可以执行以下操作：

```
int index = 0;
int increment = 1000;
while ( index < bigList.size() ) {
   newLists.add(new ArrayList<Record>(bigList.subList(index,index+increment));
   index += increment;
} 
```

请注意，您必须在此处检查一个错误。这只是一个快速的伪代码示例。

# php - PHP/CSS - 检测 nl2br 中断

> ID：11497105
> 
> 赞同：0
> 
> 时间：2012-07-16T01:25:01.550
> 
> 标签：php, javascript, mysql, sql, css

我有一系列不同的输入框，填充后会用信息填充数据库。然后，我从另一个文件中获取信息并将其打印到屏幕上。

我想要做的是在每行前面放一个符号，但是使用类似 .style br {}; 似乎不起作用。

从 MySQL 读取，如果重要的话，使用 Wordpress。

编辑：

我被要求发布我想要的样子。我认为这很简单，但无论如何：

```
@ Entry1
@ Entry2
@ Entry3 
```

编辑＃2：

我更喜欢它在 CSS 中，如果那是不可能的，那么 PHP。Javascript 将是我想要的最后一个解决方案。

我尝试了以下方法，但它根本不起作用：

```
.myform.lines br {
    border-bottom: 1px dashed #000000;
    background-color: #ffffff;
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:20:00.987

嗨，看看[你能用 css 定位 <br /> 吗？](https://stackoverflow.com/questions/899252/can-you-target-br-with-css)

我尝试了以下html页面：

```
<html><head><title>Test</title>
</head><body>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('br').replaceWith('<br>@ ');
});
</script>
hi<br>
there<br>
testing<p>
again<p>
</body></html> 
```

这导致

```
hi
@ there
@ testing

again 
```

这里还有一些基本相同的代码 - 它在每行的开头添加一个符号 (@)（假设新行跟在 br 后面）。

```
<html><head><title>test2</title>
<script type="text/javascript">
function replaceLineBreaksWithHorizontalRulesInElement(element)
{
    elems = element.getElementsByTagName( 'br' );
    for ( var i = 0; i < elems.length; i ++ )
    {
        br = elems.item( i );
        txt = document.createTextNode("@ ");
        br.parentNode.insertBefore(txt, br.nextSibling);
    }
}
</script>
</head>
<body onload="replaceLineBreaksWithHorizontalRulesInElement(document)">
testing<br>
one<br>
two<br>
three<br>
four<br>
five<p>
six<p>
</body></html> 
```

请注意，这在 Firefox 和 Internet Explorer 中都有效，结果相同。但是，如果您删除了空格，则 Firefox 无论如何都会显示空格，而 Internet Explorer 则不会显示空格。我认为这对你来说不是问题，因为你想要空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:15:47.343

怎么样

```
.mySelector:before { content: '@'; } 
```

# android - Android平板电脑：连接到wifi时自动安装/更新应用程序

> ID：11497107
> 
> 赞同：1
> 
> 时间：2012-07-16T01:25:06.870
> 
> 标签：android, wifi, tablet

我们有大量的通用安卓平板电脑即将发货，我们只有足够的时间在工厂安装一个小应用程序才能发货。我们希望此应用程序能够自动检查我们应用程序的最新版本（如果您愿意，可以选择“呼叫主页”），并在启动并连接到 wifi 时自动安装我们的新应用程序或更新现有应用程序。

这可能吗，是否已经有一个应用程序可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:47:22.123

The best that you can do is download the new apk from a server and prompt the user to install it.

The stock build of Android OS does not allow for installing 3rd party applications without user interaction.

# objective-c - 我无法运行我的简单测试应用 Xcode

> ID：11497110
> 
> 赞同：0
> 
> 时间：2012-07-16T01:25:17.163
> 
> 标签：objective-c, ios, xcode

在阅读了一本书的一些章节后，我决定尝试重新创建一些主题。只是为了练习目的。

当我尝试运行它时，Xcode 给了我一个错误

```
 Thread1: signal SIGABRT
and the console shows: 2012-07-16 11:19:46.401 MyProject[595:11303] (null)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我只是想用表格显示一个视图。这是我的 appDelegate 代码：

```
#import "MyProjectAppDelegate.h"
#import "MyProjectViewController.h"

@implementation MyProjectAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    MyProjectViewController *myProjectViewController = [[MyProjectViewController alloc] init];

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:myProjectViewController];

    [[self window] setBackgroundColor:[UIColor whiteColor]];
    [[self window] setRootViewController:navController];
    [[self window] makeKeyAndVisible];

    return YES;
} 
```

还有我的另一个视图控制器：

```
#import "MyProjectViewController.h"

@interface MyProjectViewController ()

@end

@implementation MyProjectViewController

- (id)init{

    self = [super initWithStyle:UITableViewStyleGrouped];

    if(self){

        UINavigationItem *n = [self navigationItem];
        n.title = @"MyProject";

        UIBarButtonItem *addBarButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addNewItems:)];

        self.navigationItem.rightBarButtonItem = addBarButton;
        self.navigationItem.leftBarButtonItem = self.editButtonItem;
    }

    return self;
}

- (id)initWithStyle:(UITableViewStyle)style
{
    return [self init];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 10;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"tableCell"];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"tableCell"];
    }

    cell.textLabel.text = @"OI";

    return cell;
}

@end 
```

我已经尝试重置我的模拟器并重新启动我的 Mac。提前致谢。

# cakephp - Cakephp 到谷歌图表

> ID：11497114
> 
> 赞同：1
> 
> 时间：2012-07-16T01:25:50.777
> 
> 标签：cakephp, google-visualization

在我的控制器中，我创建了要绘制的数组

```
function chart() {  
    $results = $this->Visit->query(
        "SELECT date(visits.created) as visit_date, 
            Count(visits.id) AS count_visits
            FROM visits
            GROUP BY date(visits.created)"
    );

    foreach($results AS $result) {
        $row = array(
            $result[0]['visit_date'],
            $result[0]['count_visits']          
        );
        $chartData[] = json_encode($row);
    }

    pr($chartData);

} 
```

pr($chartData) 给出以下数组

```
Array
 (
    [0] => ["2012-07-11","5"]
    [1] => ["2012-07-13","1"]
    [2] => ["2012-07-14","1"]
) 
```

在图表视图中我有

```
google.load('visualization', '1.0', {'packages':['corechart']});

google.setOnLoadCallback(drawChart);

function drawChart() {
    // Create the data table.

    var data = google.visualization.arrayToDataTable($chartData);

    var options = {
      title: 'Visits by Date',
      hAxis: {title: 'Date', titleTextStyle: {color: 'black'}}
    };

    var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

但这并没有给我一个图表..没有错误......只是没有图表..

如果我手动输入一个数组来测试我的视图，它工作正常......例如，如果我替换..

```
var data = google.visualization.arrayToDataTable($chartData); 
```

使用 Google Chart 示例中的以下格式，它会生成一个漂亮的柱形图

```
 var data = google.visualization.arrayToDataTable([
              ['Date',  'Count'],  
      ['2012-07-11',  5],
      ['2012-07-13',  1],
      ['2012-07-14',  1]
    ]); 
```

几个问题： - 我如何获得 var 数据数组中的标题？- 数组中的双引号或单引号会有所不同吗？- 我是否将数组 $chartData 从 php 正确传递到 Google 图表 javascript？- 谷歌示例在数组周围有“[]”，我如何在我的数组周围也有这些？

（顺便说一句，我知道所有关于 cakephp 的 Find(all) 的信息，但我只是迷失在关于如何获得我想要的东西的文档中，而且 sql 更容易）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:12:17.750

您在控制器中使用 json_encode，但在您看来，您正在使用 -

```
google.visualization.arrayToDataTable($chartData); 
```

json_encode 创建 json 对象，而不是 javascript 数组。

在控制器功能 chart() 中使用 json_encode 尝试：

```
$chartData['cols'] = array(
    array('id' => 'visit_date', 'label' => 'Visit date', 'type' => 'date'),
    array('id' => 'count_visits', 'label' => 'Count', 'type' => 'number')
);
foreach($results AS $result) {
    $time = strtotime($result[0]['visit_date']);
    $dateJs = 'Date('.date("Y", $time).', '.(date('n', $time) - 1).', '.date('j', $time).')';
    $row = array(
        'c' => array(
            array('v' => $dateJs),
            array('v' => $result[0]['count_visits']),
         )
    );
    $chartData['rows'][] = $row;
}
//make the data available for view
$this->set('chartData', json_encode($chartData); 
```

在您看来使用：

```
var data = new google.visualization.DataTable($chartData); 
```

# jquery - jQuery 数组问题

> ID：11497116
> 
> 赞同：0
> 
> 时间：2012-07-16T01:26:56.117
> 
> 标签：jquery, arrays, multidimensional-array, hashmap, hashtable

我有一个我认为是关于 jQuery 中数组的一些基本问题，但我很难过 - 我想做的是创建许多 DOM 元素数组，每个数组的索引号相等，访问它们索引，然后根据该索引执行 jQuery 方法。

例如，我想对第一个数组的成员 i 执行单击操作，并且 i 将针对其他数组成员的相应 i。所以，在下面的例子中，点击arrayOne[1]只会影响arrayTwo[1]和arrayThree[1]，点击arrayOne[2]只会影响arrayTwo[2]、arrayThree[2]等等。

我尝试使用“for 循环”、.each() 方法、.map() 并使用 jQuery.each() 方法，但没有任何效果。要么所有键/值成员都受到影响，要么只有一个键/值成员受到影响。因为我已经尝试了很多东西，所以我给出了一个有代表性的问题集，而不是一个特定的问题集，希望这足以解决我的问题。

```
var arrayOne=['.selectorOne_a', '.selectorOne_b', '.selectorOne_c'];

var arrayTwo=['.selectorTwo_a', '.selectorTwo_b', '.selectorTwo_c'];

var arrayThree=['.selectorThree_a', '.selectorThree_b', '.selectorThree_c'];

for(i=0; i<=arrayOne.length-1; i++){ 
     $(arrayOne[i]).click(function(){
          $(arrayTwo[i]).show();
          $(arrayThree[i]).hide();
     });//click
} 
```

我意识到 for 循环不是这样做的正确方法，但它是我尝试过的代表性方法......应该很简单，对吧？我不知道这是否属于多维数组、散列、what-have-you 的范畴，因此任何关于导航这些概念的建议或教程链接也将不胜感激。我希望这是有道理的，我将不胜感激任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:52:04.893

在您正在创建的单击处理程序中，您正在引用`i`在函数外部定义的变量，并且在响应单击调用处理程序时`i`将是循环结束时的任何内容，`for`而不是引用适当的相关元素。您可以通过引入闭包来解决此问题：

```
for(i=0; i < arrayOne.length; i++){
   (function(i){
      $(arrayOne[i]).click(function(){
          $(arrayTwo[i]).show();
          $(arrayThree[i]).hide();
      });
   })(i);
} 
```

当一个 JS 函数运行时，它可以访问其包含范围内的变量，*即使该包含范围是一个已经完成执行的函数*。因此，我在上面介绍的匿名函数在`for`循环的每次迭代中都会被调用，并且它的`i`参数仍然可供您传递给的函数访问`.click()`。

（另请注意，您的`for`条件应该是`i < arrayOne.length`，而不是`i<=arrayOne-1`- 您不能从数组中减去 1。）

由于您使用的是 jQuery，因此您可以以更整洁的方式执行此操作：

```
$.each(arrayOne, function(i,val) {
     $(arrayOne[i]).click(function(){
          $(arrayTwo[i]).show();
          $(arrayThree[i]).hide();
     });
}); 
```

在我看来，一个更好的整体解决方案是放弃使用数组的想法。以某种方式关联 html 结构中的元素，然后在单击处理程序中使用 DOM 遍历方法来查找要显示和隐藏的相关元素。如果您更新了您的问题以显示您的近似 html 结构，我可以就此提供进一步的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:54:06.440

在遵循 nnnnnn 的建议之后，这是我用来解决问题的最终代码 - 它运行良好，我可以根据需要修改它以在我的标记中创建类似的部分，这是为流畅的响应而构建的。需要注意的一点是我不能使用 css sprites 来创建翻转状态，因为这会涉及到一些不利的绝对定位，所以我决定在 jQuery/javascript 中创建交换图像效果。

```
 function createClick2(){

    // clickElements are the clickable images which trigger all subsequent actions
    var clickElements= ['.subheader_li_header1 img','.subheader_li_header2 img','.subheader_li_header3 img'];

    //once clickElements are clicked, a specific list appears underneath each clickElement member. These lists are class members of the listShow array
    var listShow= ['.subheader_ul_anim1','.subheader_ul_anim2','.subheader_ul_anim3'];

    // when clickElements are hovered over, an image is swapped- this is the imgSwapOver array
    var imgSwapOver=['img/sidebar_create_over.png','img/sidebar_develop_over.png','img/sidebar_design_over.png'];

    //on mouse out, or double tap, (depending on the device) the image is swapped back in.
    var imgSwapUp=['img/sidebar_create_up.png','img/sidebar_develop_up.png', 'img/sidebar_design_up.png'];

    // counter for holding click information
    var clickCount=0;

    $.each(clickElements, function(i,val) {

        $(clickElements[i]).click(function(){ 
            clickCount++;
            if(clickCount==1){          
                $(listShow[i]).show('slow', function(){
                    $(this).css("display","block");
                    $(clickElements[i]).attr("src", imgSwapOver[i]);//concession for mobile browser

                });//show
            }//if
            else if(clickCount==2){
                $(listShow[i]).hide('slow', function(){
                    $(this).css("display","none");
                    });//hide
                $(clickElements[i]).attr("src", imgSwapUp[i]);//concession for mobile browser
                    clickCount=0;
            }//else if
                }).hover(function(){$(clickElements[i]).attr("src", imgSwapOver[i]); },function(){$(clickElements[i]).attr("src", imgSwapUp[i]); 

                });//hover          
    });//each
}//createClick2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T01:57:45.513

我认为在这种情况下，您还可以使用其他方式来实现您的目标。您可以找出它们的索引值并使用它来定位对应的 div。

看一个[简单的演示](http://jsfiddle.net/nGm22/1/)

```
<div class="Array1">
    <div class="selectorOne_a">Array1 a</div>
    <div class="selectorOne_b">Array1 b</div>
    <div class="selectorOne_c">Array1 c</div>
</div>
<div class="Array2">
    <div class="selectorTwo_a">Array2 a</div>
    <div class="selectorTwo_b">Array2 b</div>
    <div class="selectorTwo_c">Array2 c</div>
</div>
<div class="Array3">
    <div class="selectorThree_a">Array2 a</div>
    <div class="selectorThree_b">Array2 b</div>
    <div class="selectorThree_c">Array2 c</div>
</div> 
```

jquery ccode

```
$(".Array1 div").click(function() {
   index = $(this).index();
   $(".Array2 div:eq("+ index +")").css('background-color','red');//You can do show/hide or add class etc.
   $(".Array3 div:eq("+ index +")").css('background-color','green');
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T02:56:39.753

这是一件很奇怪的事情，但如果有必要，那么您的循环方法肯定是可行的。但是，您需要采取措施确保事件处理程序获取正确的`i`. 如您所写，`i`每个处理程序触发时的值不一定是`i`处理程序到位时的值。

有多种方法可以解决此问题。

## 闭包

在循环的每次迭代中，形成一个“闭包”，它 (a) 捕获 的值`i`并 (b) 返回一个成为实际事件处理程序的函数。

```
var arrayOne = ['.selectorOne_a', '.selectorOne_b', '.selectorOne_c'];
var arrayTwo = ['.selectorTwo_a', '.selectorTwo_b', '.selectorTwo_c'];
var arrayThree = ['.selectorThree_a', '.selectorThree_b', '.selectorThree_c'];
for(i=0; i<=arrayOne.length-1; i++) {
     $(arrayOne[i]).on('click', function(n) {
          return function() {
              $(arrayTwo[n]).show();
              $(arrayThree[n]).hide();
          }
     })(i);
} 
```

为了清楚起见，我`n`在闭包中使用了“i”。它可能更典型，虽然不是很清楚，可以`i`全部使用。

## 。数据（）

您可以使用 jQuery 的`.data()`方法让 DOM 元素“意识到”它们的`i`值。

```
var arrayOne = ['.selectorOne_a', '.selectorOne_b', '.selectorOne_c'];
var arrayTwo = ['.selectorTwo_a', '.selectorTwo_b', '.selectorTwo_c'];
var arrayThree = ['.selectorThree_a', '.selectorThree_b', '.selectorThree_c'];
for(i=0; i<=arrayOne.length-1; i++) {
     $(arrayOne[i]).data('index', i).on('click', function() {
        var i = $(this).data('index');
        $(arrayTwo[i]).show();
        $(arrayThree[i]).hide();
     });
} 
```

## 。每个（）

您可以使用该`jQuery.each()`方法来形成循环。

```
var arrayOne = ['.selectorOne_a', '.selectorOne_b', '.selectorOne_c'];
var arrayTwo = ['.selectorTwo_a', '.selectorTwo_b', '.selectorTwo_c'];
var arrayThree = ['.selectorThree_a', '.selectorThree_b', '.selectorThree_c'];
$.each(arrayOne, function(i) {
     $(this).on('click', function() {
        $(arrayTwo[i]).show();
        $(arrayThree[i]).hide();
     });
}); 
```

这可能是最简单的方法。虽然看起来不一样，但实际上和形成闭包非常相似，只是细节由 jQuery 处理。

# splunk - 用于 UI 事件和活动的 Splunk

> ID：11497123
> 
> 赞同：0
> 
> 时间：2012-07-16T01:27:26.727
> 
> 标签：splunk

我们试图填充的主要功能之一是记录/可视化来自用户的应用程序 UI 事件。

目前，我们将 iPhone 应用程序上的事件记录到自定义构建的“后端”，我们可以在其中看到每个用户所做的事情，即 start_activity、add_option、take_photo 等，就像他们所做的一样。对于我们正在构建的 google appengine 应用程序，我们需要相同的客户端和服务器端事件。

我想知道 splunk 是否可以用于此，或者我们是否应该首先使用另一个工具（例如使用 nagios 进行基础设施的东西然后转发）？否则我们应该只使用 Mixpanel 或其他应用程序来记录事件吗？还是我们可以直接注入 splunk 并以此为基础？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:36:12.563

使用 Splunk，您可以轻松计算在不同时间段内发生的日志数据中“事件”（文字数据）的出现次数。例如，如果您想计算一张照片的拍摄次数，您可以在 Splunk 中执行以下 SEARCH 命令：

```
'take_photo' | timechart span=1h count 
```

这将计算每小时包含“take_photo”的日志记录数，并绘制结果图表。

# android - 如何正确配置 IntelliJ IDEA 以处理 Android 注释？

> ID：11497124
> 
> 赞同：4
> 
> 时间：2012-07-16T01:27:30.440
> 
> 标签：android, intellij-idea, android-annotations

如何正确配置 IntelliJ IDEA 以处理注释？

使用 maven 目标`processor:process`可以正常工作，但是如何在不使用 IntelliJ IDEA 中的 maven 目标的情况下进行处理（使用它的注释处理首选项）？

在 IntelliJ 的首选项/注释处理器下，我有以下设置：“ `Enable annotation processing`”被选中，带有选项“ `Obtain processors from project classpath`”

我将“ `Annotation Processors`”部分留空，因为我假设它应该通过类路径自动找到。在已处理的模块下，我选择我的 Android 模块和“ `target/generated-sources/apt`”作为“ `Generated Sources Directory Name`”。

在我的项目结构中，我设置了模块依赖项“ `Maven: com.googlecode.androidannotations:androidannotations:2.6`”和“ `Maven: com.googlecode.androidannotations:androidannotations:api:2.6`”，以便在我的类路径中拥有处理器。

但是构建项目不会处理注释，而是收到警告' `Annotation processing without compilation requested but no processors were found.`'

如果我尝试手动将 Annotation Processor 设置为 ' `com.googlecode.androidannotations.AndroidAnnotationProcessor`' 并选择 ' `/path/to/libs/androidannotations-2.6-api.jar`' 作为处理器的路径，我会`com.googlecode.androidannotations.AndroidAnnotationProcessor`在尝试构建项目时收到错误“Annotation processor ' ' not found”。

这是我在屏幕截图中的配置：http: [//imageshack.us/photo/my-images/841/intellijaa.png/](http://imageshack.us/photo/my-images/841/intellijaa.png/)

![在此处输入图像描述](../Images/56bc43359b6233d1930d31349385a4a5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T16:12:24.067

我仍然没有使用它来工作`"Obtain processors from project classpath"`，但是当手动选择处理器的路径/jar时它现在可以工作了。

实际上我之前曾尝试过，但我的错误是我选择了 AA-api.jar 而不是常规的 AA.jar。

感谢 Dave，他通过 AA google 群组的截图给出了提示：

[https://groups.google.com/forum/?fromgroups#!topic/androidannotations/PnAWuSQHkhg](https://groups.google.com/forum/?fromgroups#!topic/androidannotations/PnAWuSQHkhg)

# python - Django flatpages：排序列表

> ID：11497129
> 
> 赞同：1
> 
> 时间：2012-07-16T01:28:17.960
> 
> 标签：python, django, django-flatpages

```
{% load flatpages %}
{% get_flatpages as flatpages %}
<ul>
{% for page in flatpages %}
    <li><a href="{{ page.url }}">{{ page.title }}</a></li>
{% endfor %}
</ul> 
```

上面的代码将呈现一个包含平面页面的简单无序列表。我想使用每个平面页面的“索引”属性对它们进行排序，而不是按“url”属性的字母顺序（默认情况下）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:04:36.907

由于您不能（*不应该*）更改平面页面的核心模型，您*可以*继承它：

```
CustomFlatpage(Flatpage)
    # Possible extra fields, add methods or your own object manager
    class Meta:
         ordering = ['somefield'] 
```

如果您想要一种简化的方法，可以只编写一个模板标签来（重新）对您的查询集进行排序。这可能会导致一些开销，但除非您的网站流量很大或包含数千个平面页面，否则这应该没问题。

```
{% load flatpages %}
{% get_flatpages as flatpages %}
<ul>
{% for page in flatpages|your_pre_iteration_shuffle %}
    <li><a href="{{ page.url }}">{{ page.title }}</a></li>
{% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T09:39:48.113

您应该尝试编写排序过滤器，或尝试使用

[字典排序](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#std%3atemplatefilter-dictsort)

或者写django赋值标签。

# r - 正确使用转义字符

> ID：11497132
> 
> 赞同：1
> 
> 时间：2012-07-16T01:28:54.357
> 
> 标签：r, escaping

我发现很难创建字符：
当我在 R 中输入时，“输入为 \”：

> " 输入为 \"

`+`

> " 输入为 \ "

[1] "输入为 "

```
>" is entered as \\ " 
```

[1] "输入为\"

```
>" is entered as \\" 
```

[1] "输入为\"

我怎样才能让字符“输入为\”？

* * *

我还是很困惑

> cat("输入为 \" )

输入为 >

```
> "is entered as \\" 
```

[1] "输入为\"

```
> print ("is entered as \\") 
```

[1] "输入为\"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T01:43:29.447

`"hoge \\"`实际上是`hoge \`

`print`显示`\`为`\\`，因此您找到`\\`for `\`。

尝试`cat`：

```
> cat("is entered as \\" )
is entered as \ 
```

并且可能`nchar`会表现出来：

```
> nchar("\\" )
[1] 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T02:01:04.623

这是你想要达到的目标吗？：

```
> x <- "START \" is entered as \\\" END"
> cat(x) 
```

给出：

> START " 输入为 \" END

您必须同时转义双引号`"`和反斜杠`\`，才能使它们正常显示。

为了消除在输出中打印的双引号是字符串的一部分还是只是环绕字符串的符号之间的任何混淆，我在字符串`START`的开头和`END`结尾添加了。

# android - android：如何在另一个应用程序中加载类

> ID：11497133
> 
> 赞同：0
> 
> 时间：2012-07-16T01:28:57.997
> 
> 标签：android, class, loader, android-ndk

问题描述：我正在为一个android应用程序（命名应用程序）编写一个插件（命名插件）。pulgin 有一些本机代码，应该由应用程序调用。也就是原生代码的app启动插件

应用启动 -> 加载插件的 .so 库（.so 在应用中加载） -> 应用在 so 中调用 ac 函数。所有这些工作正常。

当 .so 尝试在插件中加载类时，它返回 classNotDef 异常。但是这个类是存在的。如果我单独运行插件，则不会出现异常，我想这是因为so加载在应用程序的进程中，并且插件在另一个包中。

有人可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:41:45.057

为它所在的类别定义类`AndroidManifest.xml`。

# c# - VS 08 上的 VS C# 10 是否有相当于 CTRL+D、E 的功能？

> ID：11497134
> 
> 赞同：1
> 
> 时间：2012-07-16T01:29:43.343
> 
> 标签：c#, visual-studio-2010, visual-studio-2008, keyboard-shortcuts

组合键`CTRL`+ , `D`+`E`打开窗口：`VS C# 10``Exception control`

![在此处输入图像描述](../Images/507013346924346423ce125ae9a8d867.png)

但它不适用于`VS 08`. 有没有等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T01:47:30.623

在我安装的 VS2008 中，它是 CTRL+ALT+E。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T07:14:55.617

您可以通过以下方式添加`CTRL   `++或任何您喜欢的快捷方式`D`：`E`

1.  转到工具-> 选项-> 键盘。

2.  在“显示包含的命令”中，在“显示包含的命令”下方键入“例外”

3.  输入“例外”后，VS 将显示您输入的命令的快捷方式

4.  在“按下快捷键”输入你想要的快捷键，如果没有使用快捷键，列表“当前使用的快捷键”将被禁用，否则“当前使用的快捷键”将显示该快捷键的命令。

5.  如果快捷方式未使用按分配然后确定

# android - 将手机连接到计算机会使 Eclipse 挂起（更新到 ICS 后更糟）

> ID：11497135
> 
> 赞同：3
> 
> 时间：2012-07-16T01:29:59.083
> 
> 标签：android, eclipse, logging, mobile, ubuntu

当我在开发人员 USB 模式下将手机连接到笔记本电脑时，Eclipse 冻结（变暗），它似乎必须从我的手机下载 10,000 条日志消息。（？）

自从从姜饼更新到 ICS 后，这种行为变得更糟了。

和想法？一定有一些我没有意识到的简单设置。

Eclipse 因（？）试图从我的手机中读取每条不相关的日志消息而陷入瘫痪。（银河注）（ubuntu 12）

谢谢

PS Eclipse 有时会在启动后立即挂起 - 所以这并不总是手机的错。但今天它工作正常 - 直到我连接我的手机。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T21:33:01.443

我有同样的问题，这似乎有帮助：

1.  连接手机
2.  `adb logcat -c`在 adb 文件夹的终端中执行（通常是平台工具）
3.  开始日食

`logcat -c`清除日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T10:03:18.750

我有类似的问题。事实上，我不知道这个问题是否是由阅读日志消息引起的......但 simptoms 是一样的：每次我连接我的 Android 设备时，Eclipse 都会立即永远挂起。

我在 64 位 Debian 7.0 (Wheezy) 上运行 Eclipse Juno 64 位。

我最终通过在 32 位 Java 1.7 下运行 32 位 Eclipse Juno (4.2.2) 解决了这个问题。

# mysql - 出现错误 - 每个派生表都必须有自己的别名错误

> ID：11497138
> 
> 赞同：0
> 
> 时间：2012-07-16T01:30:53.967
> 
> 标签：mysql, sql, mysql-error-1248

查询是获取每个表的日期，我已经检查了我的代码，但它仍然是错误的“每个派生表必须有自己的别名错误”

```
 SELECT T.* 
    FROM (
     SELECT DISTINCT(DATE_FORMAT(p.deliverDate, '%M')) as PDate
     FROM piglet_po p 
     WHERE p.raiserID = '0025' AND p.rotationNo = '3' 

        AND p.deliverDate NOT IN 
        ( SELECT DISTINCT(DATE_FORMAT(f.issuedDate, '%M')) as FDate
           FROM feed_slip f             
           WHERE f.raiserID = '0025' AND f.issuedDate BETWEEN '2012-06-01' AND '2012-11-01'                

           AND f.issuedDate NOT IN 
           ( SELECT DISTINCT(DATE_FORMAT(v.issuedDate, '%M')) as VDate
              FROM vet_slip
              WHERE v.raiserID = '0025' AND v.issuedDate BETWEEN '2012-06-01' AND '2012-11-01'

            AND v.issuedDate NOT IN 
             ( SELECT DISTINCT(DATE_FORMAT(w.issuedDate, '%M')) as WDate
                FROM weight_slip w  
                WHERE w.raiserID = '0025' AND w.issuedDate BETWEEN '2012-06-01' AND '2012-11-01'                                     
              ) 
          ) 

      ) T 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:55:24.387

您忘记了别名`v`：

```
 SELECT DISTINCT(DATE_FORMAT(v.issuedDate, '%M')) as VDate
          FROM vet_slip
         WHERE v.raiserID = '0025' AND 
               v.issuedDate BETWEEN '2012-06-01' AND '2012-11-01' 
```

还缺少一个右括号，AFAICT。如果您只是删除了最后一个，则别名`T`位于错误的位置。我假设这是被删除的“内括号”之一。

因此，更正后的查询是：

```
SELECT T.* 
  FROM (SELECT DISTINCT(DATE_FORMAT(p.deliverDate, '%M')) as PDate
          FROM piglet_po p 
         WHERE p.raiserID = '0025' AND p.rotationNo = '3'
           AND p.deliverDate NOT IN 
               (SELECT DISTINCT(DATE_FORMAT(f.issuedDate, '%M')) as FDate
                  FROM feed_slip f             
                 WHERE f.raiserID = '0025'
                   AND f.issuedDate BETWEEN '2012-06-01' AND '2012-11-01'
                   AND f.issuedDate NOT IN 
                       (SELECT DISTINCT(DATE_FORMAT(v.issuedDate, '%M')) as VDate
                          FROM vet_slip v
                         WHERE v.raiserID = '0025'
                           AND v.issuedDate BETWEEN '2012-06-01' AND '2012-11-01'
                           AND v.issuedDate NOT IN
                               (SELECT DISTINCT(DATE_FORMAT(w.issuedDate, '%M')) as WDate
                                  FROM weight_slip w
                                 WHERE w.raiserID = '0025'
                                   AND w.issuedDate BETWEEN '2012-06-01' AND '2012-11-01'
                               ) 
                       ) 
               )
       ) T 
```

# java - java中的递归

> ID：11497140
> 
> 赞同：0
> 
> 时间：2012-07-16T01:31:21.307
> 
> 标签：java, recursion

鉴于此方法调用：

```
public class MainClass {

public static void main(String[] args) {
    System.out.println(fib(3));
}

private static int fib(int i) {
     System.out.println("Into fib with i = " + i);

    if (i < 2) {
        System.out.println("We got here");
        return i;
    }
    return fib(i-1) + fib(i-2); 
}

 } 
```

我期望：

```
* fib(i-1) to return 2
* fib(i-2) to return 1
* return 2 + 1 to return 3 
```

结果：

```
2 
```

这是控制台的输出：

```
Into fib with i = 3
Into fib with i = 2
Into fib with i = 1
We got here
Into fib with i = 0
We got here 
```

我了解这部分的所有内容：

```
Into fib with i = 0 
```

我什么时候可以是0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T01:32:45.837

`fib(3)`来电`fib(2)`。当你调用 时`fib(2)`，它会调用`fib(i-1)`and `fib(i-2)`，也就是`fib(1)`and `fib(0)`。

# jquery - 在 Rails cookie 中存储 jQuery 变量

> ID：11497141
> 
> 赞同：0
> 
> 时间：2012-07-16T01:31:46.533
> 
> 标签：jquery, ruby-on-rails, ajax, cookies

我在尝试将 jQuery 变量发布到 Rails cookie 时遇到了一些麻烦。

当任何用户访问页面时，我想存储两个 jQuery 变量。

我有一些 Ajax 的帖子，因此：

```
/$.post('/where', {var1: one, var2: two}); 
```

我只是不完全确定如何设置“/ where”部分。

任何帮助都会很棒！

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T16:56:23.387

与其直接发布到 Rails cookie，不如发布到调用控制器操作的“/where” url。在操作中，您可以设置 cookie。

例如，

在您的路线中，声明：

```
post "/where", :to => "whatever#where" 
```

在您的控制器中：

```
class WhateverController < ApplicationController

  def where

    session[:var1] = params[:var1]
    session[:var2] = params[:var2]

    ...
    render :nothing => true //if you don't want to render anything
  end

 end 
```

如果这不是你要找的，你能在你的问题中详细说明吗？

# networking - 如何让我的游戏连接到没有真实 IP 地址的服务器？

> ID：11497146
> 
> 赞同：1
> 
> 时间：2012-07-16T01:32:48.793
> 
> 标签：networking, xna, nat

我正在制作 XNA 游戏。当我开始时，我有一个带有真实 IP 的宽带连接，所以我可以毫无问题地托管任何类型的服务器，但现在我不再有那个连接了，我希望能够让来自本地网络之外的玩家再次连接到我的服务器。我怎么做？工作室的大佬们是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:52:30.813

便宜的选择：

*   配置您的家庭路由器（它确实具有真实的但可能是动态的 IP 地址）以将您喜欢的某个端口上的连接转发到本地网络上的服务器。阅读[网络地址转换](http://en.wikipedia.org/wiki/Network_address_translation)- 这是路由器用来将网络隐藏在单个可路由 IP 后面的技巧。
*   在某个地方设置一个[DDNS](http://en.wikipedia.org/wiki/Dynamic_dns)帐户，这样人们就可以通过名称找到您的游戏服务器，而不是更改 IP 地址。

昂贵的选择：

*   从您的 ISP 购买静态 IP 包（并非总是可用）。
*   [在托管服务](http://en.wikipedia.org/wiki/Internet_hosting_service)中部署您的游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:27:36.137

一般有两种方式连接两个客户端：

1.  为每个客户端提供其他客户端的 IP 地址并让它们相互连接。
2.  给每个客户端一个中间服务器的 IP 地址并通过它隧道传输流量。

第一种方式假设每个客户端都有一个真实的 IP 地址，并且它们都可以成为彼此的服务器。第二种方法是当一个或两个客户端没有真实 IP 地址时。

# java - 在 Android 的一个 textView 上使用两个字符串

> ID：11497148
> 
> 赞同：-1
> 
> 时间：2012-07-16T01:33:06.310
> 
> 标签：java, android, string

我正在开发一个项目，用户在一系列屏幕中导航，在最后一个屏幕上，来自前一个屏幕的数据被组合在一起形成一条消息。截至目前，我有 3 个字符串（未在 xml 中定义），我想合并它们。我最初的想法是做这样的事情：

```
TextView.setText(string1, string2, string3); 
```

虽然那没有用。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T01:34:45.760

您需要使用连接运算符`+`：

```
TextView.setText(string1 + string2 + string3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:12:33.550

您的问题只是一个普通的 Java 问题。在 Java 中，当您想要连接多个字符串时，可以使用以下语法：

`String result = StringA + StringB + StringC`

你使用`Android小部件来设置它：

`textView.setText(stringD)`

所以，答案是：

`textView.setText(StringA + StringB + StringC)`

希望这有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T03:04:34.673

如果需要合并 3 个字符串，那么**在 Java 中只使用重载运算符，即“+”**

换句话说，串联。

```
String s = string1 + string2 + string3;

TextView.setText(s); 
```

# mysql - 如何在单表继承上强制执行参照完整性？

> ID：11497149
> 
> 赞同：14
> 
> 时间：2012-07-16T01:33:06.823
> 
> 标签：mysql, polymorphic-associations, single-table-inheritance, cascading-deletes, referential-integrity

我已经阅读了[Bill Karwin](https://stackoverflow.com/users/20860/bill-karwin)关于[单表继承](https://stackoverflow.com/questions/441001/possible-to-do-a-mysql-foreign-key-to-one-of-two-possible-tables)的一些答案，并认为这种方法对我正在考虑的设置很有用：

```
Playlist
--------
id AUTO_INCREMENT
title

TeamPlaylist
------------
id REFERENCES Playlist.id
teamId REFERENCES Team.id

UserPlaylist
------------
id REFERENCES Playlist.id
userId REFERENCES User.id

PlaylistVideo
-------------
id
playlistId REFERENCES Playlist.id
videoId REFERENCES Video.id 
```

所有`CASCADE`选项都设置为在删除`DELETE`a 时可以正常工作`Playlist`，但是，如果 a `User`or`Team`被删除会发生什么？

IE。如果 a`User`被删除，则 in 中的行将被删除，但 in和`UserPlaylist`中的引用行将保留。我考虑过强制执行此操作，但无法知道删除请求是因为被删除还是被删除而产生的。`Playlist``PlaylistVideo``TRIGGER AFTER DELETE``Playlist``User`

在这种情况下执行完整性的最佳方法是什么？

编辑（提供 ERD）

![在此处输入图像描述](../Images/7b829f14a19ecf7cd032b8a2ea1107f5.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T01:51:29.503

您可以做的是在您的表`Users`和`Team`表上实现触发器，只要从以下任一表中删除行，该触发器就会执行：

**用户表：**

```
DELIMITER $$
CREATE TRIGGER user_playlist_delete 
BEFORE DELETE ON User FOR EACH ROW
BEGIN
    DELETE a FROM Playlist a
    INNER JOIN UserPlaylist b ON a.id = b.id AND b.userId = OLD.id;
END$$
DELIMITER ; 
```

**团队表：**

```
DELIMITER $$
CREATE TRIGGER team_playlist_delete 
BEFORE DELETE ON Team FOR EACH ROW
BEGIN
    DELETE a FROM Playlist a
    INNER JOIN TeamPlaylist b ON a.id = b.id AND b.teamId = OLD.id;
END$$
DELIMITER ; 
```

这些触发器的作用是每次从这些表之一中删除记录时，将使用即将删除`DELETE`的表自动执行操作（通过内部连接）。`Playlists``id`

我已经对此进行了测试，并且效果很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T05:17:18.420

好的，我在这里看到你想要的......你想要做的是运行一个查询

```
DELETE FROM playlist
WHERE       id 
NOT IN      (
    SELECT  id
    FROM    UserPlayList
    UNION
    SELECT  id
    FROM    TeamPlayList
) 
```

从用户或团队中删除任何一行之后

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T23:47:55.773

在我看来，问题在于你的`User`和`Team`表应该有一个超类型表（例如`Party`），而不是播放列表表。

正如您所指出的，在尝试找出要删除的内容时，对播放列表进行“表继承”会受到惩罚。当您将继承提升到用户/团队级别时，所有这些问题都会消失。

您可以查看[此答案以获取有关超类型/子类型的更多详细信息](https://stackoverflow.com/questions/2112882/designing-a-conditional-database-relationship-in-sql-server/2113129#2113129)。

很抱歉没有提供代码，因为我不知道 MySQL 的语法。

基本概念是超类型表允许您实现一种数据库类型的多态性。当您正在使用的表需要链接到一组子类型中的*任何一个*时，您只需将 FK 指向超类型，这会自动为您提供所需的“一次只有一个”业务约束. 超类型与每个子类型表具有“一对零或一”的关系，并且每个子类型表在其 PK 中使用与超类型表中的 PK 相同的值。

在您的数据库中，通过只有一个`Playlist`带有 FK to 的表`Party (PartyID)`，您可以轻松地在数据库级别执行您的业务规则，而无需触发器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T09:51:09.367

Zane Bien 的答案非常明显和精湛。但我有一个不使用触发器的想法，因为触发器有很多问题。

你在使用任何编程语言吗？如果是的话，

使用单个`transaction`并使您的数据库`auto commit false`

为 Playlist 和 PlaylistVideo 中的引用行编写删除查询。您必须先手动使用该引用 ID（带有 where 条件）编写此查询并运行它。

现在为您的主要任务准备另一个查询，即删除用户，并且 UserPlaylist 中的行将被自动删除（由于`CASCADE DELETE`选项）。现在运行您的第二个查询和`commit`。

最后进行交易`auto commit true`。

它工作成功，希望它会有所帮助。

# node.js - 在移动设备上使用 SSL 通配符的 Node.js

> ID：11497151
> 
> 赞同：3
> 
> 时间：2012-07-16T01:33:28.540
> 
> 标签：node.js, ssl, ssl-certificate

我有一个使用 SSL 在 sub.domain.com 上运行的 Node.js 服务器。它在桌面浏览器上运行了几个月，但我只是注意到它在移动浏览器上不起作用。

我做了一些研究，很多人认为我的证书链有问题。我已将代码更改为看起来有但仍然没有运气。

这是我的代码：

```
var httpsOptions = {
    ca: [fs.readFileSync("certrequest.csr")],
    key: fs.readFileSync("privatekey.pem"),
    cert: fs.readFileSync("certificate.pem")
};

var app = http.createServer(httpsOptions, function(req, res) {
    log.cnsl.write("HTTP Request received from " + req.connection.remoteAddress);
        //Do stuff
}); 
```

我正在运行这个命令来查看一些调试信息（我的服务器在端口 5673 上运行）：

```
openssl s_client -connect sub.domain.com:5673 -showcerts | grep "^ " 
```

以下是该输出的重要部分

```
depth=0 O = *.domain.com, OU = Domain Control Validated, CN = *.domain.com
verify error:num=20:unable to get local issuer certificate
verify return:1
depth=0 O = *.domain.com, OU = Domain Control Validated, CN = *.domain.com
verify error:num=27:certificate not trusted
verify return:1
depth=0 O = *.domain.com, OU = Domain Control Validated, CN = *domain.com
verify error:num=21:unable to verify the first certificate
verify return:1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T01:53:03.840

您将证书请求文件“certrequest.csr”作为 CA 听起来很奇怪。

CA 字段应包含从您的个人证书到根证书的证书链。在我的配置中，它包含 2 个条目。一个作为根证书本身，第二个作为中间证书，因为我的颁发者提供了多个级别的证书。

顺便说一句，您的认证公司肯定会在他们的常见问题解答中为您提供此类信息。

例如，这是我的配置的摘录：

```
var httpsOptions = {
    key:fs.readFileSync('/etc/ssl/private/ssl-main.key'),
    cert:fs.readFileSync('/etc/ssl/private/ssl-main.crt'),
    ca:[fs.readFileSync('/etc/ssl/private/ca.pem'),
        fs.readFileSync('/etc/ssl/private/sub.class2.server.ca.pem')]
}; 
```

无论如何，这并不能解释为什么它适用于非移动浏览器。我唯一的猜测是，他们将自己嵌入了链的一部分，而手机不会出于磁盘空间的原因。

希望这可以帮助。

# python - 从 FITS 文件头制作 Ascii 表

> ID：11497158
> 
> 赞同：1
> 
> 时间：2012-07-16T01:35:06.373
> 
> 标签：python, ascii, astronomy, fits

我想学习如何从 FITS 文件头中获取信息并将该信息传输到 ascii 表。例如，这就是我获取信息的方式：

```
import pyfits
a = pyfits.open('data.fits')
header = a[0].header # Which should return something like this (It is  BinHDUlist)
SIMPLE  =                T / conforms to FITS standards                    
                               / institution responsible for creating this file 
TELESCOP= 'Kepler  '           / telescope                                      
INSTRUME= 'Kepler Photometer'  / detector type                                  
OBJECT  = 'KIC 8631743'        / string version of KEPLERID                     
RA_OBJ  =           294.466516 / [deg] right ascension                          
DEC_OBJ =            44.751131 / [deg] declination 
```

如何创建包含 RA_OBJ 和 DEC_OBJ 的 ASCII 表？

编辑：我想创建一个 .dat 文件，其中包含标题中的两列（RA 和 DEC）。这是我正在尝试的示例：

```
import asciitable
import asciidata
import pyfits
import numpy as np

# Here I have taken all the fits files in my current directory and did the following:
# ls > z.txt so that all the fits files are in one place.

a = asciidata.open('z.txt')
i = 0 #There are 371 fits files in z.txt
while i<=370:
    b = pyfits.open(a[0][i])
    h = b[0].header
    RA = np.array([h['RA_OBJ']])
    DEC = np.array(h['DEC_OBJ']])
    asciitable.write({'RA': RA, 'DEC': DEC}, 'coordinates.dat', names=['RA', 'DEC'])
    i = i+1 
```

我想为此编写一个 .dat 文件，其中包含以下内容：

```
RA    DEC
###   ###
...   ...
...   ...
...   ... 
```

相反，我的代码只是覆盖了以前文件的键。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:57:32.120

我认为您可能会从更仔细地阅读[pyfits 文档中](http://stsdas.stsci.edu/download/docs/The_PyFITS_Handbook.pdf)受益。header 属性是一个`pyfits.header.Header`对象，它是一个类似字典的对象。因此，您可以执行以下操作：

```
import pyfits

keys = ['SIMPLE', 'TELESCOP', 'INSTRUME', 'OBJECTS', 'RA_OBJ', 'DEV_OBJ']

hdulist = pyfits.open("data.fits")
header = hdulist[0].header
for k in keys:
    print k, "=", header[k] 
```

您可以添加更多花哨的输出，将生成的字符串放入变量中，检查丢失的键等。

**编辑**：

这是如何与`asciitable`and结合使用的`numpy`：

```
import asciitable
import numpy as np

keys = ['RA', 'DEC']
data = {}

# Initialize "data" with empty lists for each key
for k in keys:
    data[k] = []

# Collect all data in the "data" dictionary
for i in range(0, 50):
    data['RA'].append(np.array(i))
    data['DEC'].append(np.array(i+1))

asciitable.write(data, "coords.dat", names=keys) 
```

# c++ - MiniDumpWriteDump 使用 MiniDumpNormal 失败，但可以使用 MiniDumpWithFullMemory

> ID：11497159
> 
> 赞同：2
> 
> 时间：2012-07-16T01:35:16.497
> 
> 标签：c++, debugging, winapi, minidump, minidumpwritedump

我从运行在 Windows XP SP3 上的本地服务应用程序的顶级异常处理程序调用[MiniDumpWriteDump API，如下所示：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)

```
_MINIDUMP_EXCEPTION_INFORMATION ExInfo;
DWORD dwProcID = ::GetCurrentProcessId();
DWORD dwThreadID = ::GetCurrentThreadId();

ExInfo.ThreadId = dwThreadID;
ExInfo.ExceptionPointers = pExceptionInfo;   //Receive it from the exception handler
ExInfo.ClientPointers = NULL;

if(!pfnMiniDumpWriteDump(GetCurrentProcess(), dwProcID, hFile, MiniDumpNormal, &ExInfo, NULL, NULL))
{
    int nOSError = ::GetLastError();    //I receive 0x80070057
} 
```

以上失败，错误代码为 0x80070057，但如果我将转储类型更改为 MiniDumpWithFullMemory，它就可以正常工作。知道为什么吗？

# c++ - Code::Blocks 和 Boost Asio。它只是行不通

> ID：11497160
> 
> 赞同：2
> 
> 时间：2012-07-16T01:35:32.100
> 
> 标签：c++, windows, boost-asio, codeblocks

我无法让 Boost.Asio 在 Code::Blocks 中编译。我安装并编译了 Boost C++ 库并运行了两个给定的测试示例。现在我正在尝试让 Boost.Asio 运行。

这是编译器调用：

`mingw32-g++.exe -L"C:\Program Files (x86)\boost\boost_1_49_0" -o bin\Debug\server.exe obj\Debug\server.o D:\CodeBlocksIDE\CodeBlocks\lib\libboost_filesystem-mgw44-mt-1_49.a D:\CodeBlocksIDE\CodeBlocks\lib\libboost_system-mgw44-mt-1_49.a`

这是输出（有关更多信息，请参见此[链接](http://imageshack.us/f/267/cdbideboost1.png/)）：

```
boost/asio/detail/impl/winsock_init.ipp:39: undefined reference to 'WSAStartup@8'
boost/asio/detail/impl/winsock_init.ipp:48: undefined reference to 'WSAStartup@0'
boost/asio/detail/impl/socket_ops.ipps:50: undefined reference to 'WSASetLastError@4'
boost/asio/detail/impl/socket_ops.ipps:178: undefined reference to 'GetAcceptExSockaddrs@32'
boost/asio/detail/impl/socket_ops.ipps:296: undefined reference to 'closesocket@4' 
```

这是代码：

```
//
// server.cpp
// ~~~~~~~~~~
//
// Copyright (c) 2003-2012 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0\. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#include <cstdlib>
#include <iostream>
#include <boost/aligned_storage.hpp>
#include <boost/array.hpp>
#include <boost/bind.hpp>
#include <boost/enable_shared_from_this.hpp>
#include <boost/noncopyable.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

// Class to manage the memory to be used for handler-based custom allocation.
// It contains a single block of memory which may be returned for allocation
// requests. If the memory is in use when an allocation request is made, the
// allocator delegates allocation to the global heap.
class handler_allocator
  : private boost::noncopyable
{
public:
  handler_allocator()
    : in_use_(false)
  {
  }

  void* allocate(std::size_t size)
  {
    if (!in_use_ && size < storage_.size)
    {
      in_use_ = true;
      return storage_.address();
    }
    else
    {
      return ::operator new(size);
    }
  }

  void deallocate(void* pointer)
  {
    if (pointer == storage_.address())
    {
      in_use_ = false;
    }
    else
    {
      ::operator delete(pointer);
    }
  }

private:
  // Storage space used for handler-based custom memory allocation.
  boost::aligned_storage<1024> storage_;

  // Whether the handler-based custom allocation storage has been used.
  bool in_use_;
};

// Wrapper class template for handler objects to allow handler memory
// allocation to be customised. Calls to operator() are forwarded to the
// encapsulated handler.
template <typename Handler>
class custom_alloc_handler
{
public:
  custom_alloc_handler(handler_allocator& a, Handler h)
    : allocator_(a),
      handler_(h)
  {
  }

  template <typename Arg1>
  void operator()(Arg1 arg1)
  {
    handler_(arg1);
  }

  template <typename Arg1, typename Arg2>
  void operator()(Arg1 arg1, Arg2 arg2)
  {
    handler_(arg1, arg2);
  }

  friend void* asio_handler_allocate(std::size_t size,
      custom_alloc_handler<Handler>* this_handler)
  {
    return this_handler->allocator_.allocate(size);
  }

  friend void asio_handler_deallocate(void* pointer, std::size_t /*size*/,
      custom_alloc_handler<Handler>* this_handler)
  {
    this_handler->allocator_.deallocate(pointer);
  }

private:
  handler_allocator& allocator_;
  Handler handler_;
};

// Helper function to wrap a handler object to add custom allocation.
template <typename Handler>
inline custom_alloc_handler<Handler> make_custom_alloc_handler(
    handler_allocator& a, Handler h)
{
  return custom_alloc_handler<Handler>(a, h);
}

class session
  : public boost::enable_shared_from_this<session>
{
public:
  session(boost::asio::io_service& io_service)
    : socket_(io_service)
  {
  }

  tcp::socket& socket()
  {
    return socket_;
  }

  void start()
  {
    socket_.async_read_some(boost::asio::buffer(data_),
        make_custom_alloc_handler(allocator_,
          boost::bind(&session::handle_read,
            shared_from_this(),
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred)));
  }

  void handle_read(const boost::system::error_code& error,
      size_t bytes_transferred)
  {
    if (!error)
    {
      boost::asio::async_write(socket_,
          boost::asio::buffer(data_, bytes_transferred),
          make_custom_alloc_handler(allocator_,
            boost::bind(&session::handle_write,
              shared_from_this(),
              boost::asio::placeholders::error)));
    }
  }

  void handle_write(const boost::system::error_code& error)
  {
    if (!error)
    {
      socket_.async_read_some(boost::asio::buffer(data_),
          make_custom_alloc_handler(allocator_,
            boost::bind(&session::handle_read,
              shared_from_this(),
              boost::asio::placeholders::error,
              boost::asio::placeholders::bytes_transferred)));
    }
  }

private:
  // The socket used to communicate with the client.
  tcp::socket socket_;

  // Buffer used to store data received from the client.
  boost::array<char, 1024> data_;

  // The allocator to use for handler-based custom memory allocation.
  handler_allocator allocator_;
};

typedef boost::shared_ptr<session> session_ptr;

class server
{
public:
  server(boost::asio::io_service& io_service, short port)
    : io_service_(io_service),
      acceptor_(io_service, tcp::endpoint(tcp::v4(), port))
  {
    session_ptr new_session(new session(io_service_));
    acceptor_.async_accept(new_session->socket(),
        boost::bind(&server::handle_accept, this, new_session,
          boost::asio::placeholders::error));
  }

  void handle_accept(session_ptr new_session,
      const boost::system::error_code& error)
  {
    if (!error)
    {
      new_session->start();
    }

    new_session.reset(new session(io_service_));
    acceptor_.async_accept(new_session->socket(),
        boost::bind(&server::handle_accept, this, new_session,
          boost::asio::placeholders::error));
  }

private:
  boost::asio::io_service& io_service_;
  tcp::acceptor acceptor_;
};

int main(int argc, char* argv[])
{
  try
  {
    if (argc != 2)
    {
      std::cerr << "Usage: server <port>\n";
      return 1;
    }

    boost::asio::io_service io_service;

    using namespace std; // For atoi.
    server s(io_service, atoi(argv[1]));

    io_service.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

这里有一些关于我的问题的图片。

[http://imageshack.us/f/267/cdbideboost1.png](http://imageshack.us/f/267/cdbideboost1.png)

[http://imageshack.us/f/833/cdbideboost3.png](http://imageshack.us/f/833/cdbideboost3.png)

[http://imageshack.us/f/31/cdbideboost4.png](http://imageshack.us/f/31/cdbideboost4.png)

[http://imageshack.us/f/525/cdbideboost5.png](http://imageshack.us/f/525/cdbideboost5.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-25T14:16:48.783

链接到库 wsock32 以及 ws2_32

![在此处输入图像描述](../Images/77eae013443f280c6b8a5a9fd0eeb73f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T02:42:25.630

链接器错误消息表明您需要链接到 WinSock 库。Boost.Asio 是一个只有头文件的库；因此，将没有`boost_asio`要链接的库。

* * *

下面的示例程序旨在引入对 WinSock 库的依赖关系。

`example.cpp`：

```
#include <iostream>
#include <winsock2.h>

int main()
{
  WSAStartup(WORD(), LPWSADATA());
  WSACleanup();
  return 0;
} 
```

编译时`example.cpp`，但未链接到 WinSock 库时，会出现以下错误：

```
C:\example>mingw32-g++.exe example.cpp
example.cpp:(.text+0x26): undefined reference to `WSAStartup@8'
example.cpp:(.text+0x2e): undefined reference to `WSACleanup@0'
collect2: ld returned 1 exit status 
```

但是，当我链接到 时`ws2_32`，引用已解决：

```
C:\example>mingw32-g++.exe example.cpp -lws2_32

C:\example>dir /B
a.exe
example.cpp 
```

另请注意，指定文件的顺序很重要。必须在所有依赖模块的名称之后指定库。在这种情况下，`example.cpp`取决于`ws2_32`; 因此，`ws2_32`必须出现在 之后`example.cpp`。

```
C:\example>mingw32-g++.exe -lws2_32 example.cpp
example.cpp:(.text+0x26): undefined reference to `WSAStartup@8'
example.cpp:(.text+0x2e): undefined reference to `WSACleanup@0'
collect2: ld returned 1 exit status 
```

# objective-c - iOS应用程序中的UIKit（不是我的代码）中的内存泄漏？

> ID：11497166
> 
> 赞同：0
> 
> 时间：2012-07-16T01:36:53.050
> 
> 标签：objective-c, ios, uikit

我正在尝试解决我的 iOS 应用程序中的内存泄漏并苦苦挣扎。我正在使用泄漏工具来尝试隔离问题。令我惊讶的是，泄漏似乎 100% 发生在 UITableView 手势识别器代码中。具体来说，每次我停止滚动（释放）UITableView 时，泄漏计数都会增加。更奇怪的是，这也发生在 UIWebView 上。并带有 UIScrollView。

因此，每次我对这些 UIKit 对象中的任何一个释放拖动操作时，都会发生内存泄漏。UI 部分位于我的应用程序周围不同的不同位置，因此它不仅仅是本地化到一个屏幕上。

想法？

![在此处输入图像描述](../Images/8d252c2803228b15f549a2fadeb55b27.png)

# asp.net-mvc-4 - Unity.WebAPI - 注册组件

> ID：11497168
> 
> 赞同：1
> 
> 时间：2012-07-16T01:37:22.593
> 
> 标签：asp.net-mvc-4, asp.net-web-api

***问题：***

我正在使用 MVC4 和 WebAPI。我已经安装了 Unity.WebAPI 包并且卡住了。

不知道bootstrapper.cs的Initialise()中需要注册什么？**接口和类还是我的控制器？**

```
using System.Web.Http;
using Microsoft.Practices.Unity;
using unitywapi4.Models;

namespace unitywapi4
{
    public static class Bootstrapper
    {
        public static void Initialise()
        {
            var container = BuildUnityContainer();

            GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container);
        }

        private static IUnityContainer BuildUnityContainer()
        {
            var container = new UnityContainer();

            // register all your components with the container here
            // e.g. container.RegisterType<ITestService, TestService>();       

            container.RegisterType<IProductRepository, Product>();

            return container;
        }
    }
} 
```

**错误：**

不能用作泛型类型或方法“Microsoft.Practices.Unity.UnityContainerExtensions.RegisterType(Microsoft.Practices.Unity.IUnityContainer, params Microsoft.Practices.Unity.InjectionMember[])”中的类型参数“TTo”。**

**没有从“unitywapi4.Models.Product”到“unitywapi4.Models.IProductRepository”的隐式引用转换。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:32:09.223

显然...

*映射类型对于检索实现相同指定接口或从相同指定基类继承的不同对象的实例很有用。映射的目标类型必须继承或实现源的基类型或接口。您可以使用容器方法的泛型重载为类型注册生成默认映射和命名映射。*

[http://msdn.microsoft.com/en-us/library/ff660923%28v=PandP.20%29.aspx#registertype_simple](http://msdn.microsoft.com/en-us/library/ff660923%28v=PandP.20%29.aspx#registertype_simple)

# html - 无法显示 fb-login-button

> ID：11497170
> 
> 赞同：1
> 
> 时间：2012-07-16T01:37:35.073
> 
> 标签：html, css, facebook-social-plugins

我可能做错了几件事，因为我是网络编程的新手，但这里尝试解决我遇到的一些问题，然后在下面编写代码。

仅供参考，我在 Dreamweaver 中完全在本地工作，只需按 f11 或在浏览器中进行测试。除了频道文件，我没有上传任何内容到服务器，所以如果这是主要问题，请告诉我。

对于频道文件，我只有一个完全空的文件（不包括 html、body 等），就在下面一行。

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

这就是我所需要的吗？为了显示此按钮，我是否必须将所有 index.html 和 .css 等与频道文件放在同一位置？

下面是我正在使用的代码，下面是用于放置的 css。当我在浏览器中运行测试时，没有出现蓝色 FB 按钮。

```
<html>
    <head>
      <title>My Facebook Login Page</title>
    <link href="fbstyle.css" rel="stylesheet" type="text/css">
    </head>
    <body>

      <div id="fb-root"></div>
      <script>
        window.fbAsyncInit = function() {
          FB.init({
            appId      : '[hidden]', // App ID
            channelUrl : 'http://mysite/channel.html', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
          });
        };
        // Load the SDK Asynchronously
        (function(d){
           var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
           if (d.getElementById(id)) {return;}
           js = d.createElement('script'); js.id = id; js.async = true;
           js.src = "//connect.facebook.net/en_US/all.js";
           ref.parentNode.insertBefore(js, ref);
         }(document));
      </script>

      <div class="fb-login-button">Login with Facebook</div>

    </body>
 </html> 
```

这里的 CSS 对在屏幕上移动上面的“用 facebook 登录”文本没有任何作用。我所看到的只是在左上角上面写着上述内容的常规文本。没有蓝色 fb 按钮

```
@charset "utf-8";
/* CSS Document */

*
{
    margin: 0;
}

body
{
    background-color: #FFF
}

#fb-login-button
{
    position: relative;
    float: right;
} 
```

***再次从 Purusottam 的评论中编辑下面的新代码*** ，请原谅我的错误，因为我是一个非常新的程序员。

蓝色的 facebook 登录按钮仍然没有显示左上角的“使用 facebook 登录”文本：见附图。

再次，我在这里完全在本地工作..我是否需要将所有文件都放在服务器上才能显示此按钮？

```
<html>
<head>
  <title>My Facebook Login Page</title>
<link href="fbstyle.css" rel="stylesheet" type="text/css">
</head>
<body>

  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : 'hidden', // App ID
        channelUrl : 'http://mysite.net/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true, // parse XFBML
        oauth      : true});
        };
    // Load the SDK Asynchronously
    (function() {
            var e = document.createElement('script');
            e.type = 'text/javascript';
            e.src = document.location.protocol +
                '//connect.facebook.net/en_US/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
            }());
        </script>

    <div class="fb-login-button" show-faces="true" width="200" max-rows="5">Login with Facebook</div>
    <script>
        FB.login(function(response) 
        {
          if (response.authResponse) 
        {
          //login success
         } 
         else 
         {
         alert('User cancelled login or did not fully authorize.');
         }

        }, {scope: 'permissions that app needs'})
    </script>

</body> 
```

这是当前的结果：

[http://s17.postimage.org/y8oz0htq7/help.jpg](http://s17.postimage.org/y8oz0htq7/help.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T20:16:14.443

事实证明，这个按钮没有出现的原因是因为你需要把所有东西都放在服务器上。您无法在本地测试 facebook 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:27:35.490

当我看到您的代码时，缺少几件事。首先，您需要使用 FB 初始化 oauth。下面是代码的参考。

```
window.fbAsyncInit = function() {
    FB.init({appId: "hidden", 
        channelUrl : "Channel File",
        status: true, 
        cookie: true, 
        xfbml: true, 
        oauth:true}); 
```

SDK 的加载将很简单，如下所示。

```
(function() {
    var e = document.createElement('script');
    e.type = 'text/javascript';
    e.src = document.location.protocol +
        '//connect.facebook.net/en_US/all.js';
    e.async = true;
    document.getElementById('fb-root').appendChild(e);
}()); 
```

完成此操作后，单击您的登录 DIV 按钮即可使用以下代码调用 javascript 函数。

```
FB.login(function(response) 
{
    if (response.authResponse) 
    {
        //login success
    } 
    else 
    {
        alert('User cancelled login or did not fully authorize.');
    }

}, {scope: 'permissions that app needs'}) 
```

希望这对您有所帮助。

# java - 在生产代码中，验证请求参数或格式失败时的日志级别是多少

> ID：11497171
> 
> 赞同：5
> 
> 时间：2012-07-16T01:37:35.413
> 
> 标签：java, logging

如题。在生产代码中，无法验证请求参数或格式时的日志级别是多少？

我混淆了这个谜题基于两点：

(1) 如果我将其记录到错误中。我担心如果一个黑客发送太多错误请求会导致我们的APP log 两个很多错误日志。

(2) 但如果我将其记录到调试或更低级别。我担心由于在生产应用程序中无法有效跟踪问题，日志将设置为警告。

那我的选择是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T01:57:26.300

如果由于没有系统错误但输入数据无效而导致验证失败，我将记录为信息或警告。如果您遇到系统异常等问题，例如数据库连接失败或空指针，则记录错误。否则，输入验证不一定构成错误，并且是一种照常发生的类型，因此是信息级别。

在黑客反复运行脚本发送“太多请求”的情况下，这可能被归类为拒绝服务攻击。在这种情况下，您需要确保您的防火墙软件设置为过滤这些，我不会在应用程序日志中担心它。

最后，如果黑客没有在拒绝服务阈值下完全轰炸您的系统，那么您可能需要编写一些逻辑来捕捉这种“错误验证”并记录一个带有明确错误消息的错误会知道去寻找，即一种特殊的错误。一个这样的例子是 sql 注入攻击，表单验证可能会捕获（并且您的应用程序中的某些层必须肯定捕获）。

根据您使用的日志记录框架的类型，您可能能够为此场景定义自己的错误级别或错误类别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:12:07.740

[在我的程序](https://stackoverflow.com/a/4874474/545127)中，我使用错误日志级别（或消息中的“错误”一词）来指示程序未能执行“它被指示执行的操作”。那么，这是没有“按指示”做的吗？我使用警告日志级别来报告可能（但不确定）表明某处存在问题的异常情况。

这些“请求参数”从何而来？如果这是一个客户端-服务器系统（Web 应用程序？），并且请求来自客户端，则服务器已被指示“为客户端服务”。如果客户端发送无效请求，服务器意味着（指定/设计）做什么？可能是拒绝请求并向客户端返回拒绝消息。在这种情况下，服务器只有在拒绝请求或返回消息失败时才会出错。也就是说，只有服务器中的错误才会算作“错误”。我会在警告级别报告无效的请求参数吗？如果我还提供了客户端程序，那么无效请求将表明客户端程序中存在错误，因此我将其记录为警告。如果客户端不受控制（例如 Web 浏览器），我不会将其报告为警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T01:48:17.707

我都不会说。我会将请求写入数据库，这样我就可以一直查询它们。日志往往是倾倒场，当出现问题时很难破译。我总是想在他们进来时看到请求和响应。

至于黑客和拒绝服务，你必须建立逻辑来检测和阻止它。您的规则必须区分来自随机来源的高流量（一件好事）和一个或多个协同作用的恶意来源。你觉得你能做到吗？

# css - twitter bootstrapper css中的中心行项目

> ID：11497174
> 
> 赞同：0
> 
> 时间：2012-07-16T01:38:14.640
> 
> 标签：css, twitter-bootstrap

我正在为这个项目使用 twitter 引导程序，

如何水平集中页面中的项目？如果你调整框架的大小，你会看到行 div 中的项目没有集中，向左倾斜并且右侧有很多空白空间。

我尝试定义一个新的类 centerdiv，但它没有帮助

[http://jsfiddle.net/VuaYz/6/](http://jsfiddle.net/VuaYz/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:50:43.013

使用偏移 css 类。示例类="span6 offset2"

# php - 致命错误：调用成员函数 getUserID()

> ID：11497176
> 
> 赞同：0
> 
> 时间：2012-07-16T01:38:31.300
> 
> 标签：php

检查我的网站时出现以下错误：

```
Fatal error: Call to a member function getUserID() on a non-object in /home/clientwo/public_html/main/registry/authenticate.php on line 104 
```

这是代码：

```
<?php
class Authenticate {

    private $user;
    private $status;
    private $loggedIn = false;

    public function __construct(Registry $registry) {
        $this->registry = $registry;
        $this->status = 'User is logged out';
    }

    private function checkForAuthentication() {
        if (isset($_SESSION['sn_auth_session_uid']) && $_SESSION['sn_auth_session_uid'] > 0) {
            $this->sessionAuthenticate(intval($_SESSION['sn_auth_session_uid']));
        }
    }

    private function sessionAuthenticate($id) {
        //build a user model
        require_once FRAMEWORK_PATH . 'model/user.php';
        $this->user = new UserModel($this->registry, $id);
        //check if user is valid etc
        if ($this->user->isValid()) {
            if (!$this->user->isActive()) {
                $this->loggedIn = false;
                $this->status = 'User has been deleted';
            } else {
                $this->loggedIn = true;
                $this->status = 'User is logged in';
            }
        } else {
            $this->loggedIn = false;
            $this->status = 'User could not be found';
        }
        //make sure sessions are not set if user is not logged in
        if (!$this->loggedIn) {
            $this->logout();
        }
    }

    public function login($username, $password) {
        //first log out
        $this->logout();
        //execute query
        $this->registry->getObject('mysql')->executeQuery("SELECT UserID FROM user WHERE Username='". $username . "' AND password='" . md5($password) . "'");
        //check if query returned one row
        if ($this->registry->getObject('mysql')->numRows() == 1) {
            //get user row
            $UserData = $this->registry->getObject('mysql')->getRow();
            //build a user model
            require_once FRAMEWORK_PATH . 'model/user.php';
            $this->user = new UserModel($this->registry, $UserData['UserID']);
            //check if user is valid and active etc
            if ($this->user->isValid()) {
                if ($this->user->isActive() == false) {
                    $this->loggedIn = false;
                    $this->status = 'User has been deleted';
                } else {
                    $this->loggedIn = true;
                    $this->status = 'User is logged in';
                    $this->user->increaseLogins();
                    $this->user->update();
                    $_SESSION['sn_auth_session_uid'] = $this->user->getUserID();
                }
            } else {
                $this->loggedIn = false;
                $this->status = 'Authentication failed';
            }
        } else {
            $this->loggedIn = false;
            $this->status = 'Authentication failed';
        }
    }

    function logout() {
        //if such a session is set, unset it
        if (isset($_SESSION['sn_auth_session_uid'])) {
            unset($_SESSION['sn_auth_session_uid']);
        }
        //reset to logged out
        $this->loggedIn = false;
        //reset to null
        $this->user = null;
    }

    public function isLoggedIn() {
        $this->checkForAuthentication();
        return $this->loggedIn;
    }

    public function isAdmin() {
        $this->checkForAuthentication();
        return $this->user->isAdmin();
    }

    public function getUser() {
        $this->checkForAuthentication();
        return $this->user;
    }

    public function getUserID() {
        $this->checkForAuthentication();
        return $this->user->getUserID();
    }

    public function getStatus() {
        $this->checkForAuthentication();
        return $this->status;
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:43:19.090

This line is not returning the user object

```
$this->user = new UserModel($this->registry, $UserData['UserID']); 
```

# c# - C# HttpWebRequest 日期标头格式

> ID：11497177
> 
> 赞同：8
> 
> 时间：2012-07-16T01:38:33.827
> 
> 标签：c#, amazon-s3

我正在向 S3 发出 HttpWebRequest，并且正在尝试将 Date 标头设置为如下所示：

> “2012 年 7 月 16 日星期一 01:16:18 -0000”

这是我尝试过的：

```
string pattern = "ddd, dd MMM yyyy HH:mm:ss -0000";
request.Date = DateTime.ParseExact("Mon, 16 Jul 2012 01:16:18 -0000", pattern, null); 
```

但是，当我查看请求的标头时，我得到了以下信息：

```
request.Headers.Get("Date");
// "Mon, 16 Jul 2012 07:16:18 GMT" 
```

我相信这可能是请求上出现 403 的原因。AWS 错误文档提到：

> 403 Forbidden - 请求时间与服务器时间相差太大。

任何有关整理此日期的建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T04:22:35.323

**有几点需要澄清：**

*   您的日期模式不正确。

*   HttpWebRequest`request.Date`标头只能在 .NET Framework 4 中进行修改，根据文档，`System.Net`命名空间将始终将此标头写为使用**GMT (UTC) 格式的标准格式**。所以，无论你做什么来格式化你想要的日期，都行不通！

*   在其他 .NET 框架版本中，您将无法修改 HttpWebRequest`request.Date`标头，因为它将使用正确的 GMT (UTC) 格式的实际日期，除非您使用某种技巧来设置您自己的日期和格式（见下文）。

* * *

**您的问题的解决方案（经过测试和工作）：**

*您的进口：*

```
using System.Net;
using System.Reflection; 
```

*获取今天的日期格式：Mon, 16 Jul 2012 01:16:18 -0000*

```
string today = String.Format("{0:ddd,' 'dd' 'MMM' 'yyyy' 'HH':'mm':'ss' 'K}", DateTime.Now); 
```

*棘手的事情来了，您可以通过执行以下操作来破解 HttpWebRequest 日期标头：*

*（不再做`request.Date = something;`，换成下面的）*

```
MethodInfo priMethod = request.Headers.GetType().GetMethod("AddWithoutValidate", BindingFlags.Instance | BindingFlags.NonPublic);
priMethod.Invoke(request.Headers, new[] { "Date", today }); 
```

*从您的请求中获取日期（只是为了测试）：*

```
// "myDate" will output the same date as the first moment: 
// Mon, 16 Jul 2012 01:16:18 -0000
// As you can see, you will never get this again:
// Mon, 16 Jul 2012 07:16:18 GMT
string myDate = request.Headers.Get("Date"); 
```

* * *

**至此，您已经成功地将自己的格式和日期值设置为 HttpWebRequest 日期标头！**

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:01:29.173

HttpWebRequest 将自行正确格式化 Date。您的问题是您必须提交一个有效的当前日期。您必须检查计算机的时钟是否准确，然后您要发送有关时区以及 UTC 和 GMT 问题的正确日期...

尝试两者：

```
request.Date = DateTime.Now;
request.Date = DateTime.UtcNow; 
```

其中之一需要工作（如果正确实施 HttpWebRequest ，两者都应该工作）。

如果这不起作用，请使用[fiddler](http://www.fiddler2.com/fiddler2/)查看发生了什么，并手动修复请求，直到它正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T18:13:36.827

假设您要设置 Date 标头以使 Authorization 标头起作用。

Amazon 提供了另一个自定义标头，它将代替 Date（如果提供）。如果您无法设置 Date 标头，则可以使用自定义标头 x-amz-date。

这是亚马逊文档的[链接](http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#ConstructingTheAuthenticationHeader)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-14T09:15:00.300

您应该使用“X-Amz-Date”标题。

```
public void GetObject(string AccessKeyID, string SecretKey){           
        /*objectKey = folder/folder/filename.zzz*/
        var url = "http://somehost/bucket/objectkey"

        HttpWebRequest request = (HttpWebRequest) WebRequest.Create(url);
        /*Fiddler proxy*/
        /*request.Proxy = new WebProxy("http://127.0.0.1:8888");*/

        request.Headers.Add("X-Amz-Date",String.Format("{0:ddd,' 'dd' 'MMM' 'yyyy' 'HH':'mm':'ss' 'K}", DateTime.Now));
        request.Headers.Add("Authorization", $"AWS {AccessKeyID}:{SignAuthorizationString(request, SecretKey)}");

        WebResponse response = request.GetResponse();
        }
private string SignAuthorizationString(HttpWebRequest request, string SecretKey){
        //TODO: DOCS - http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html

        string canonicalizedResource = request.RequestUri.PathAndQuery;
        string canonicalizedAmzHeaders  = ComposeSignatureAmzHeadersForSigning(request);
        string stringToSign = request.Method + "\n"
                              + request.Headers.Get("Content-MD5") + "\n"
                              + request.ContentType + "\n"
                              + request.Headers.Get("Date") + "\n" /*Here the date will be blank*/
                              + canonicalizedAmzHeaders + canonicalizedResource;

        return GetSignedMessage(SecretKey, stringToSign);
        }
 private string ComposeSignatureAmzHeadersForSigning(HttpWebRequest request){
        SortedDictionary<string, string> headersDictionary = new SortedDictionary<string, string>(StringComparer.OrdinalIgnoreCase);
        foreach (string _key in request.Headers.Keys)
        {
            key = _key.ToLower(); 
            if (key.StartsWith("x-amz"))
            {
                if ("x-amz-meta-reviewedby".Equals(key))
                {
                    if (headersDictionary.ContainsKey(key))
                        headersDictionary[key] = headersDictionary[key] + "," + request.Headers[key];
                    else
                        headersDictionary[key] = request.Headers[key];
                }
                else
                    headersDictionary[key] = request.Headers.Get(key);
            }
        }
        StringBuilder stringBuilder = new StringBuilder();
        foreach (var pair in headersDictionary)
        {
            stringBuilder.Append(pair.Key)
                .Append(":")
                .Append(pair.Value)
                .Append("\n");

        }
        return stringBuilder.ToString();
        }
private static string GetSignedMessage(string key, string message){
        var crypt = HMACSHA1.Create();
        crypt.Key = Encoding.ASCII.GetBytes(key);
        crypt.ComputeHash(Encoding.UTF8.GetBytes(message));

        return Convert.ToBase64String(crypt.Hash);
        } 
```

# c# - 电子邮件地址不会从 C# 中的存储过程返回

> ID：11497178
> 
> 赞同：-4
> 
> 时间：2012-07-16T01:38:57.993
> 
> 标签：c#, asp.net, stored-procedures

这些值不会传入`EmailTO`和传出`EmailFrom`存储过程，它显示为 NULL。所以我无法发送电子邮件。如果我手动输入电子邮件地址`To`，`From`然后电子邮件以 smtp 形式发送，但它不是从存储过程中读取的。

请帮助我检索值：

这是我的存储过程，数据存储在表中：

```
 Set @EmailFrom =(SELECT EmailFrom FROM tblEmailDesign where EmailID = @EmailID )
    Set @EmailTo =(SELECT EmailTo FROM tblEmailDesign where EmailId = @EmailID )

    Insert into tblEmailsend([EmailID][EmailSubject],[EmailTo],[EmailFrom],[EmailBody],[EmailComment])
select @EmailID @EmailFrom,@EmailTo,[EmailSubject],[EmailBody],@EmailComment from tblEmaildesign
where EmailID=@EmailID

END 
```

这是我在 C# 中的调用代码：

```
protected void submit(object sender, EventArgs e)

        SqlParameter EmailTo = new SqlParameter("@EmailTo", SqlDbType.NVarChar, 200);
        EmailTo.Direction = ParameterDirection.Output;
        scom.Parameters.Add(EmailTo);

        SqlParameter EmailFrom = new SqlParameter("@EmailFrom", SqlDbType.NVarChar, 200);
        EmailFrom.Direction = ParameterDirection.Output;
        string To = EmailTo;

        String FRom = EmailFrom;
        scom.Parameters.Add(EmailFrom);

        mail message = new mail();

        mailsystem.Esendmail(To,From);

        try {
            scom.Connection.Open();
            scom.ExecuteNonQuery();
            scom.ExecuteReader(CommandBehavior.CloseConnection);
        } finally {
            scom.Connection.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:10:26.773

执行后，您需要从存储过程中获取输出参数值：

```
protected void submit(object sender, EventArgs e)

    using (SqlCommand scom = new SqlCommand("spx_Send_Status_Mail", new SqlConnection(ConfigurationManager.ConnectionStrings["EPOCHSConnectionString"].ConnectionString))) {

        scom.CommandType =CommandType.StoredProcedure;    
        SqlParameter EmailTo = new SqlParameter("@EmailTo", SqlDbType.NVarChar, 200);
        EmailTo.Direction = ParameterDirection.Output;
        scom.Parameters.Add(EmailTo);    
        SqlParameter EmailFrom = new SqlParameter("@EmailFrom", SqlDbType.NVarChar, 200);
        EmailFrom.Direction = ParameterDirection.Output;
        scom.Parameters.Add(EmailFrom);

        try {
            scom.Connection.Open();
            scom.ExecuteNonQuery();
            scom.ExecuteReader(CommandBehavior.CloseConnection);
        } finally {
            scom.Connection.Close();
        }

        mail message = new mail();

        //Get output parameters after executing query
        string to = EmailTo.Value.ToString();
        string from = EmailFrom.Value.ToString();
        //Pass To and From email addresses to the ESendmail function
        mailsystem.Esendmail(to,from);
    }
} 
```

# git - Git - 我的 css 文件显示为一行

> ID：11497180
> 
> 赞同：0
> 
> 时间：2012-07-16T01:39:34.203
> 
> 标签：git, github

我有一个正常的 CSS 文件。但是，当我进行更改时，在 git 中它显示好像整个文件是一行。真的很烦人，因为我不能做太多的比较或与之合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:33:25.857

问题似乎出在您的编辑器中。它可能使用自动格式化，但没有引入换行或回车。在这种情况下，您应该检查您的编辑器选项以引入换行符 (\n) 或自己手动引入它们。

为了检查它，请尝试使用其他编辑器或可以显示测试原样的工具打开有问题的文件，例如，使用`more`或`less`在终端中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T01:44:41.913

You could try using gitk to view commit history and try meld to merge files

# ios - 是否有一些用于创建瓷砖地图的开源工具（带有 cocos2d 的 IOS）？

> ID：11497182
> 
> 赞同：-1
> 
> 时间：2012-07-16T01:40:35.573
> 
> 标签：ios, cocos2d-iphone, map-edit

我知道 tile-map java 或 QT 版本可以通过 GUI 工具创建地图。但我问的是我想在我的游戏中创建地图。就像星际游戏中的星际地图编辑器一样，war3也是如此。有一些有用的地图编辑器引擎吗？如果 tile-map 可以提供 tile-map 编辑器引擎 (API) 很棒，我会自己编写 GUI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:38:37.030

tmx文件是xml文件+层用zlib压缩并用base64编写。那么你没有 tmx 文件的二进制版本。

与格式兼容的库列于： [https ://github.com/bjorn/tiled/wiki/Support-for-TMX-maps](https://github.com/bjorn/tiled/wiki/Support-for-TMX-maps)

# encryption - 可以在 web.config 中加密凭据

> ID：11497184
> 
> 赞同：1
> 
> 时间：2012-07-16T01:41:28.683
> 
> 标签：encryption, credentials

我有我的 web.config 文件的这一部分。

```
<system.web>
  <authentication mode="Forms">
    <forms loginUrl="~/Login.aspx">
      <credentials passwordFormat="Clear">
        <user name="test@hotmail.com" password="12345" />
      </credentials>
    </forms>
  </authentication>
</system.web> 
```

我已尝试加密此部分，但我得到对象未设置为对象错误的实例。这是我在加密类中调用的路径：system.web/authentication/forms/credentials

请问有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-16T17:48:05.180

如果您使用的是 IIS，请确保您在 IIS 中的站点 ID 设置为 1（高级设置）。

# jquery - jquery 过渡效果

> ID：11497185
> 
> 赞同：1
> 
> 时间：2012-07-16T01:41:45.333
> 
> 标签：jquery, jquery-ui, jquery-effects

当用户单击“关闭”时，我试图让该[网站](http://gloucestercountykarate.com/?page_id=2)上的“告诉朋友按钮”返回其原始位置。我现在开始工作了，但是过渡很糟糕。当您单击关闭时，该按钮会出现在父 div 下方，然后再占据其原始位置。功能如下图：

```
$(document).ready(function() {
    $(".tell").click(function () {
        $("DIV#tellform").show("slide", { direction: 'left' }, 2000);
         $(".tell").hide("fade", {}, 1);
    });

    $(".closer").click(function () {
        $("DIV#tellform").hide("slide", { direction: 'left' }, 2000);
        $(".tell").show("fade", {}, 1);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:51:45.983

您还应该在第一次单击它时隐藏按钮而不褪色，因为这对我来说也很奇怪。

也许在一个单独的函数中声明更改，然后延迟？

```
 $(".closer").click(function () {

  $("DIV#tellform").hide("slide", { direction: 'left' }, 2000);

 setTimeout(delay,2000);

  function delay() {
  $(".tell").show("fade", {}, 1);
  }
  });

}); 
```

至少应该有类似的东西。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T20:32:07.407

我确实将它设置为如下所示，它让父 DIV 有时间在它完全显示之前进行介词，因为它会慢慢淡出。

```
 $(document).ready(function() {

   $(".tell").click(function () {

      $("DIV#tellform").show("slide", { direction: 'left' }, 2000);

      $(".tell").hide("", {} );

});

   $(".closer").click(function () {

      $("DIV#tellform").hide("slide", { direction: 'left' }, 2000);
      $(".tell").show("fade", {}, 45000);

      });

  });

</script> 
```

# sql - SQL - 获取下一组 xx 项

> ID：11497186
> 
> 赞同：0
> 
> 时间：2012-07-16T01:41:56.650
> 
> 标签：sql, sqlite

我有一个 Web API，它根据收到的最后一个项目的 ID 返回下一组 x 个项目。所以，如果我的最后一个项目 ID 是 30，我还想要 50 个，那么我应该得到 31 - 81 的 ID。

如果我实现了一个 SQL 查询，`SELECT * FROM table WHERE ID > 30 LIMIT 50`我能保证得到 31 - 81 的 ID 吗？或者，有没有办法做到这一点？ID 列是 AUTOINCREMENT。

此外，这是 SQLite，特别是。我不确定这是否重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:44:36.070

You should also order them by id before limiting the number of results

```
SELECT * FROM table WHERE ID > 30 
order by ID
LIMIT 50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:48:16.647

通常在 SQLite 中你会做这样的事情：

```
SELECT * FROM table LIMIT 50 OFFSET 30; 
```

有关文档，请参见[http://www.sqlite.org/lang_select.html](http://www.sqlite.org/lang_select.html)。

# textmate - Textmate 的 HTML 和 CSS 包

> ID：11497187
> 
> 赞同：0
> 
> 时间：2012-07-16T01:42:01.710
> 
> 标签：textmate, textmatebundles

是否有任何`html`和`css`捆绑`textmate`用于自动完成。跟踪每一个`div`在某些时候变得痛苦。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:16:39.370

TextMate 的杀手级功能一直是其片段扩展机制。即使现在它已被太阳下的每个编辑器/IDE 复制。

如果您不了解它或不使用它，那么在任何免费文本编辑器上选择 TextMate 几乎没有意义。

只需键入`div`然后点击`Tab`以将其扩展为

```
<div id="">

</div> 
```

对于最常见的 HTML 标签，有类似这样的片段，请查看*Bundles*菜单。

您还可以键入`div`或任何标签名称，然后按`Ctrl`+`<`将其转换为适当的标签。

您还可以选择一些文本并点击`Ctrl`++以使用标签将其包装起来`Shift`。`W`

你为什么不阅读[文档](http://manual.macromates.com/en/)？或者打印出[这个备忘单](http://www.g-design.net/textmate.pdf)？或者只是在 TextMate 的菜单中四处看看？TextMate 需要花钱，如果你不付出一些努力，你就浪费了 45.63 欧元。

# python - How could I get regex to start when it has reached a specific point within a string?

> ID：11497192
> 
> 赞同：0
> 
> 时间：2012-07-16T01:42:42.407
> 
> 标签：python, regex, string

Say I have a string like `{{ComputersRule}}` and a regex like: `[^\}]+`. How would I get regular expressions to start at a specified point in the string, i.e. Once it has reached the third character in the string. If it's relevant, and I doubt it is, I'm working in Python version 2.7.3\. Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:45:52.057

I'd recommend using Python to grab the substring from the third character onwards, and then apply the regex to the rest.

Otherwise, you could just use the regex `.` (any character except newline) to gobble up the first `n` characters:

```
^.{3}([^\}]+) 
```

Notice the `^.{3}` which forces the `[^\}]+` to not include the first three characters of the string (the `^` anchors to the start of the string/line). The brackets capture the bit you want to extract (so get capturing group 1).

In your *particular* case, if it's just a case of "I want the text inside the `{{` and `}}`" you could do `\{\{([^\}]+)\}\}` or `[^\{\}]+`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:45:29.357

It appears that what you want to do is to match text within the double braces.

The trick is to specify the braces in the regex but *capture* the part within. In this case try

```
\{\{([^}]+)\}\} 
```

# html - HTML 搜索栏

> ID：11497197
> 
> 赞同：0
> 
> 时间：2012-07-16T01:43:33.380
> 
> 标签：html, search

我不知道如何准确地表达它，所以就这样吧。

我在我的网页上创建了一个搜索栏，它使用您的输入文本来搜索另一个网站。这就是我所拥有的（事情已被审查）：

```
<form name="search" class="form-search" method="get" action="http://www.nameofwebsite.com/search.php?">  
<input name="searchbynum" type="text" class="search-query input-large" onkeypress="return submitenter(this,event)">  
<button type="submit" class="btn btn-primary">Search</button>  
</form> 
```

在实际网站上搜索时，搜索 URL 如下所示：

```
http://www.nameofwebsite.com/search.php?searchbynum=search+phrase&searchbydesc=&Submit=Go 
```

其中“搜索+短语”是搜索的内容。说到重点，
**我需要做什么才能在搜索末尾添加“&searchbydesc=&Submit=Go”？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:52:34.957

将隐藏字段添加到您的页面。

```
<form ...>
    <div>
        <input type="hidden" name="searchbydesc" value="" />
        <input type="hidden" name="Submit" value="Go" />
    </div>
</form> 
```

请注意，您的 HTML 是无效的。一个`<form>`元素不能有`<input />`直接子元素，它们必须被包裹在一个`<div>`或`<fieldset>`其他类似的元素中。

# php - Get all child, grandchild etc nodes under parent using php with mysql query results

> ID：11497202
> 
> 赞同：11
> 
> 时间：2012-07-16T01:44:38.847
> 
> 标签：php, mysql, database, tree, nodes

I've been trying to figure this out but I haven't gotten anywhere.Hopefully someone can come to my rescue.

My problem is I'm using adjacency list data model to produce my hierarchy data in mysql.I can retrieve the table (see below) into a multidimension array with associative array for each item. What I want to do is once I get this array , I want to get another array with all the nodes (child, grandchild etc) under a parent id (including the parent item).I just can't workout how to code tihs in php.

In MySQL my table appears like this:

```
id     name       parent_id
1  Electronics          0
2  Televisions          1
3  Portable Electronics 1
4  Tube                 2
5  LCD                  2
6  Plasma               2
7  Mp3 Players          3
8  CD Players           3
9  2 Way Radios         3
10 Flash                7 
```

I can retrive all rows with this code into an associative array with this.

```
$r = mysql_query("SELECT * FROM test ");
        $data = array();
        while($row = mysql_fetch_assoc($r)) {
         $data[] = $row;
         } 
```

Gets Results:

```
Array 
( 
    [0] => Array 
    ( 
        [id] => 1 
        [name] => Electronics 
        [parent_id] => 0 
    ) 
    [1] => Array 
    ( 
        [id] => 2 
        [name] => Televisions 
        [parent_id] => 1 
    ) 
    [2] => Array 
    ( 
        [id] => 3 
        [name] => Portable Electronics 
        [parent_id] => 1 
    )
    [3] => Array 
    (
        [id] => 4 
        [name] => Tube 
        [parent_id] => 2 
    )
    [4] => Array 
    (
        [id] => 5 
        [name] => LCD 
        [parent_id] => 2
    )
    [5] => Array
    (
        [id] => 6 
        [name] => Plasma 
        [parent_id] => 2
    )
    [6] => Array
    (
        [id] => 7 
        [name] => Mp3 Players 
        [parent_id] => 3 
    )
    [7] => Array 
    (
        [id] => 8 
        [name] => CD Players 
        [parent_id] => 3
    )
    [8] => Array 
    (
        [id] => 9 
        [name] => 2 Way Radios 
        [parent_id] => 3
    )
    [9] => Array
    (
        [id] => 10 
        [name] => Flash 
        [parent_id] => 7 
    ) 
) 
```

With those result I want to filter it down with an id.

Say for example I wanted an associative array of every node under Portable Electronics with the id of 3.(Use id for code)

It would return an array with rows with ids:

*   3 Portable Electronics (Selected parent has to be included)
*   7 Mp3 Players (Child)
*   8 CD Players (Child)
*   9 2 way Radios (Child)
*   10 Flash (Grand Child)

if Flash had children it would return those as well.

So the end result would return an array like the one above however only with those items.

**Please note: I'm not after a function that creates a multidimension array of the tree structure (Already got a solution for that) .I want to build a function: fetch_recursive($id) which receives an ID and returns all the items in that level and in the levels below etc etc.**

Hope this helps

Thanks in advance

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-16T03:16:27.467

## 编辑：

我之前发布了一个解决方案，可以从您提供的输出中构建一个多维数组，以及一种`id`从该特定数组中获取特定元素的所有子元素的方法。我现在已经弄清楚如何直接从您的输出中检索子元素（无需先通过`buildtree()`函数：

```
function fetch_recursive($src_arr, $currentid, $parentfound = false, $cats = array())
{
    foreach($src_arr as $row)
    {
        if((!$parentfound && $row['id'] == $currentid) || $row['parent_id'] == $currentid)
        {
            $rowdata = array();
            foreach($row as $k => $v)
                $rowdata[$k] = $v;
            $cats[] = $rowdata;
            if($row['parent_id'] == $currentid)
                $cats = array_merge($cats, fetch_recursive($src_arr, $row['id'], true));
        }
    }
    return $cats;
} 
```

要使用上面的函数，只需将输出数组传递`$data`给第一个参数，然后`id`您想从第二个参数中检索子元素：

前任。：

```
$list = fetch_recursive($data, 3); 
```

哪个应该为您提供正确的数组结构`id` `3`（如本答案最后一个代码框中的示例所示）。

* * *

***原答案：***

直到现在，我才开始编写递归函数来根据这种设计构建嵌套树。我敢肯定还有很多其他人写过类似的功能，但这个绝对适合你：

```
function buildtree($src_arr, $parent_id = 0, $tree = array())
{
    foreach($src_arr as $idx => $row)
    {
        if($row['parent_id'] == $parent_id)
        {
            foreach($row as $k => $v)
                $tree[$row['id']][$k] = $v;
            unset($src_arr[$idx]);
            $tree[$row['id']]['children'] = buildtree($src_arr, $row['id']);
        }
    }
    ksort($tree);
    return $tree;
} 
```

该函数将递归地从邻接列表中构建一棵树，并保持 id 的升序排列。这也使得`id`每个父/子的 's 成为每个信息数组的键。

这段代码：

```
$r = mysql_query("SELECT * FROM test ");
$data = array();
while($row = mysql_fetch_assoc($r)) {
    $data[] = $row;
}
echo '<pre>';
print_r(buildtree($data));
echo '</pre>'; 
```

将输出如下内容：

```
Array 
(
    [1] => Array 
    (
        [id] => 1
        [name] => Electronics 
        [parent_id] => 0 
        [children] => Array
        (
            [2] => Array 
            ( 
                [id] => 2
                [name] => Televisions 
                [parent_id] => 1 
                [children] => Array
                (
                    [4] => Array 
                    (
                        [id] => 4
                        [name] => Tube 
                        [parent_id] => 2
                        [children] => Array()
                    )
                    [5] => Array 
                    (
                        [id] => 5
                        [name] => LCD 
                        [parent_id] => 2
                        [children] => Array()
                    )
                    [6] => Array
                    (
                        [id] => 6
                        [name] => Plasma 
                        [parent_id] => 2
                        [children] => Array()
                    )
                )
            )
            [3] => Array 
            (
                [id] => 3
                [name] => Portable Electronics 
                [parent_id] => 1
                [children] => Array
                (
                    [7] => Array
                    (
                        [id] => 7
                        [name] => Mp3 Players 
                        [parent_id] => 3 
                        [children] => Array
                        (
                            [10] => Array
                            (
                                [id] => 10
                                [name] => Flash 
                                [parent_id] => 7
                                [children] => Array()
                            ) 
                        )
                    )
                    [8] => Array 
                    (
                        [id] => 8
                        [name] => CD Players 
                        [parent_id] => 3
                        [children] => Array()
                    )
                    [9] => Array 
                    (
                        [id] => 9
                        [name] => 2 Way Radios 
                        [parent_id] => 3
                        [children] => Array()
                    )
                )
            )
        )
    )
) 
```

要将特定的所有子节点`id`放到一维数组中，可以使用此函数：

```
function fetch_recursive($tree, $parent_id, $parentfound = false, $list = array())
{
    foreach($tree as $k => $v)
    {
        if($parentfound || $k == $parent_id)
        {
            $rowdata = array();
            foreach($v as $field => $value)
                if($field != 'children')
                    $rowdata[$field] = $value;
            $list[] = $rowdata;
            if($v['children'])
                $list = array_merge($list, fetch_recursive($v['children'], $parent_id, true));
        }
        elseif($v['children'])
            $list = array_merge($list, fetch_recursive($v['children'], $parent_id));
    }
    return $list;
} 
```

基于上面的`buildtree()`函数，假设我们想要获取`id`3 的所有子节点：

```
echo '<pre>';
print_r(fetch_recursive(buildtree($a), 3));
echo '</pre>'; 
```

这将输出：

```
Array
(
    [0] => Array
        (
            [id] => 3
            [name] => Portable Electronics
            [parent_id] => 1
        )

    [1] => Array
        (
            [id] => 7
            [name] => Mp3 Players
            [parent_id] => 3
        )

    [2] => Array
        (
            [id] => 10
            [name] => Flash
            [parent_id] => 7
        )

    [3] => Array
        (
            [id] => 8
            [name] => CD Players
            [parent_id] => 3
        )

    [4] => Array
        (
            [id] => 9
            [name] => 2 Way Radios
            [parent_id] => 3
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:12:10.270

这是一种让您更进一步的方法，您可以决定如何构建结果数组以及选择包含哪些字段。这未经测试，但您应该看到逻辑。

```
// connect to db

// set id counter
$ids = 0;

// declare array
$categories = new Array();

// determine max ids
$query = mysql_query("SELECT COUNT(1) AS ids FROM test");
$result = mysql_fetch_array(query); // get result
$count = $result['ids'];

// loop through ids for parents
for($ids = 0; $ids <= $count; $ids++) {
  $query1 = mysql_query("SELECT * FROM test WHERE id = '" . $ids . "'");
  $query2 = mysql_query("SELECT id, name, parent_id FROM test WHERE parent_id = '" . $ids . "'");
  // check if has children
  if(mysql_num_rows($query2) > 0) {
    // iterate through children and add to array
    while (mysql_fetch_array($query2) as $row) {
      $categories[$ids]['child'][$row['id']] = $row['name'];
    }
  }
  // check if has siblings
  if(mysql_num_rows($query1) > 0) {
    // iterate through children and add to array
    while (mysql_fetch_array($query2) as $row) {
      $categories[$ids]['sibling'][$row['id']] = $row['name'];
    }
  }
} 
```

# python - Python: Have gifs animate with TKinter while a thread is running

> ID：11497204
> 
> 赞同：3
> 
> 时间：2012-07-16T01:44:52.193
> 
> 标签：python, tkinter, python-2.7, animated-gif

So, as I'm sure you can tell from my rather long subject what I'm asking but to reiterate. I am trying to have a gif animate while a thread in the background is running a calculation with in TKinter. For simplicities sake, I am using this gif: [http://i.imgur.com/4Y9UJ.gif](http://i.imgur.com/4Y9UJ.gif)

The gif animation is currently working as you can see if you run the script. But as soon as the Generate button is pressed and the thread initiates, the gif pauses until it finishes. I'm using time.sleep() to simulate the large amount of calculations that I will be doing in the background (though I am unsure if this is what is actually causing the issue).

I'm sure it has something to do with not understanding exactly how the animation is functioning. Any advice?

Code as follows:

```
from Tkinter import *
import tkMessageBox
import time
import os
import threading
from PIL import Image, ImageTk

class Gif(Label):
    def __init__(self, master, filename):
        evanGif = Image.open(filename)
        gifSeq = []
        try:
            while 1:
                gifSeq.append(evanGif.copy())
                evanGif.seek(len(gifSeq)) # skip to next frame
        except EOFError:
            pass # we're done
        try:
            #Special case for the evangalion gif
            if evanGif.info['duration'] == 0:
                self.delay = 100
            else:
                self.delay = evanGif.info['duration']
        except KeyError:
            self.delay = 100
        gifFirst =gifSeq[0].convert('RGBA')
        self.gifFrames = [ImageTk.PhotoImage(gifFirst)]

        Label.__init__(self, master, image=self.gifFrames[0])

        temp =gifSeq[0]
        for image in gifSeq[1:]:
            temp.paste(image)
            frame = temp.convert('RGBA')
            self.gifFrames.append(ImageTk.PhotoImage(frame))

        self.gifIdx = 0
        self.cancel = self.after(self.delay, self.play)

    def play(self):
        self.config(image=self.gifFrames[self.gifIdx])
        self.gifIdx += 1
        if self.gifIdx == len(self.gifFrames):
            self.gifIdx = 0
        self.cancel = self.after(self.delay, self.play)

class App:
    generating = False
    def __init__(self, master):
        self.master=master

        #Initializing frames
        self.buttonFrame = Frame(master, background='light gray')
        self.loadingFrame = Frame(master, background='light gray')
        self.loadingFrame.grid(row=0)
        self.buttonFrame.grid(row=1)
        self.anim = Gif(self.loadingFrame, '4Y9UJ.gif').pack()
        self.update_Thread = threading.Thread(target=time.sleep, args=(5,))
        self.buttonSetup()

    def buttonSetup(self):
        #ALL THE BUTTONS
        self.generateBt = Button(self.buttonFrame, text="Generate!", command=self.generate, background='light gray', highlightbackground='light gray')
        self.generateBt.pack(side=LEFT)
        self.quitBt = Button(self.buttonFrame, text="Quit!", fg="red", command=self.buttonFrame.quit, background='light gray', highlightbackground='light gray')
        self.quitBt.pack(side=LEFT)

    def generate(self):
        self.hideForGen()
        self.update_Thread.start()
        while(self.update_Thread.isAlive()):
            self.master.update_idletasks()
        self.reset()
        self.master.update_idletasks()
        tkMessageBox.showinfo("Complete", "Report generation completed!")

    def hideForGen(self):
        self.buttonFrame.grid_forget()

    def reset(self):
        self.buttonFrame.grid(row=1)

root = Tk()
root.title('Test')
root.configure(background='light gray')
app = App(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:26:18.093

问题在于您的 generate() 方法。那个while循环是不必要的。

请记住，您无法重新启动线程。如果您想多次使用生成按钮，则每次都需要创建一个新线程。

```
class App:
    generating = False
    def __init__(self, master):
        self.master=master

        #Initializing frames
        self.buttonFrame = Frame(master, background='light gray')
        self.loadingFrame = Frame(master, background='light gray')
        self.loadingFrame.grid(row=0)
        self.buttonFrame.grid(row=1)
        self.anim = Gif(self.loadingFrame, '4Y9UJ.gif')
        self.anim.pack()
##        self.update_Thread = threading.Thread(target=time.sleep, args=(5,))

        self.buttonSetup()

    def buttonSetup(self):
        #ALL THE BUTTONS
        self.generateBt = Button(self.buttonFrame, text="Generate!", command=self.generate, background='light gray', highlightbackground='light gray')
        self.generateBt.pack(side=LEFT)
        self.quitBt = Button(self.buttonFrame, text="Quit!", fg="red", command=self.buttonFrame.quit, background='light gray', highlightbackground='light gray')
        self.quitBt.pack(side=LEFT)

    def wait_generate(self):
        if self.update_Thread.isAlive():
            self.master.after(500, self.wait_generate)
        else:
            tkMessageBox.showinfo("Complete", "Report generation completed!")
            self.reset()

    def generate(self):
        self.hideForGen()
        self.update_Thread = threading.Thread(target=time.sleep, args=(5,))
        self.update_Thread.start()
##        while(self.update_Thread.isAlive()):
##            self.master.update_idletasks()
##        self.reset()
##        self.master.update_idletasks()
##        tkMessageBox.showinfo("Complete", "Report generation completed!")
        self.wait_generate()

    def hideForGen(self):
        self.buttonFrame.grid_forget()

    def reset(self):
        self.buttonFrame.grid(row=1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:37:20.013

在下面的方法中：

```
 def generate(self):
        self.hideForGen()
        self.update_Thread.start()
        while(self.update_Thread.isAlive()):
            self.master.update_idletasks()
        self.reset()
        self.master.update_idletasks()
        tkMessageBox.showinfo("Complete", "Report generation completed!") 
```

如果你把

```
 self.master.update() 
```

代替

```
 self.master.update_idletasks() 
```

它应该工作。至少它对我有用。

# python - Regular expression for letters, dash, underscore, numbers, and space

> ID：11497206
> 
> 赞同：3
> 
> 时间：2012-07-16T01:45:02.473
> 
> 标签：python, regex

This is my attempt

```
def matcher(ex):
    if re.match(r'^[\w|\d][A-Za-z0-9_-]+$', ex):
        print 'yes' 
```

My goal is to match only submission that satisfy all the followings

1.  begins with only a letter or a numeric digit, and
2.  only letter, space, dash, underscore and numeric digit are allowed
3.  all ending spaces are stripped

In my regex, `matcher('__')` is considered valid. How can I modify to achieve what I want really want? I believe `\w` also includes underscore. But `matcher('_')` is not matched...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T01:49:09.540

```
def matcher(ex):
    ex = ex.rstrip()
    if re.match(r'^[a-zA-Z0-9][ A-Za-z0-9_-]*$', ex):
        print 'yes' 
```

原始正则表达式中的问题：

1.  `|`并不意味着字符类中的交替，而是字面上的管道字符。

2.  您用于`+`以下字符，表示一个或多个，因此一个字符的字符串`'_'`不匹配。

3.  你`\w`在你的第一个字符中使用了，它接受下划线。

# javascript - With JQuery, how do I select all elements with no class

> ID：11497207
> 
> 赞同：1
> 
> 时间：2012-07-16T01:45:17.810
> 
> 标签：javascript, jquery

> **Possible Duplicate:**
> [jQuery get all divs which do not have class attribute](https://stackoverflow.com/questions/1962247/jquery-get-all-divs-which-do-not-have-class-attribute)

I need to select all elements that have no class defined. How do I do that with JQuery?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T01:50:03.050

```
$(':not([class])') 
```

`html, body, head`但是，请注意，如果他们没有课程，这也会选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T01:49:12.163

此查询将选择所有元素，然后过滤那些没有 class 属性的元素：`$('*').not('[class]')`

# google-maps - 获取或创建基于 LatLong 的多边形

> ID：11497210
> 
> 赞同：0
> 
> 时间：2012-07-16T01:46:37.720
> 
> 标签：google-maps, google-maps-api-3

我对谷歌地图真的很陌生，需要一些帮助。

我正在调用需要多边形来返回标记的第 3 方 api。

我不知道该怎么做。基本上我希望能够传入一个 LatLong 并根据窗口大小和缩放级别返回一个多边形。

这可能吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:55:27.400

听起来应用程序需要地图视口的边界。

查看google.maps.Map 类[的 getBounds 方法的文档。](https://developers.google.com/maps/documentation/javascript/reference#Map)

# postgresql - HEROKU: What to do with my dump file (PGBACKUPS)

> ID：11497212
> 
> 赞同：3
> 
> 时间：2012-07-16T01:46:41.047
> 
> 标签：postgresql, heroku

I'm done with the pgbackups process.

First, I installed the pgbackups addon (HEROKU) via command: heroku addons:add pgbackups

Second, I login using heroku auth:login command

Third, I capture the backup by running the command: heroku pgbackups:capture --app myapp

Fourth, I get the url of the backup by heroku pgbackups:url b002

So I accessed the url that I saw after running the command: heroku pgbackups: url b002

in this format: [https://s3.amazonaws.com/hkpgbackups/app2955630@heroku.com/b002.dump?AWSAccessKeyId=](https://s3.amazonaws.com/hkpgbackups/app2955630@heroku.com/b002.dump?AWSAccessKeyId=).......

something like that.

After that, I downloaded the file in .dump format

So now, I have the dump file and dont know what to do where to specifically use it...

Can somebody give me an advise to how to use the .dump file?

Please help me. I'm in trouble right now. I've to get a copy of our existing database from heroku.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:52:54.543

您的`.dump`文件应该是一个[`pg_dump`](http://www.postgresql.org/docs/current/static/app-pgdump.html)文件，因此您需要在某处设置 PostgreSQL，然后使用该文件[`pg_restore`](http://www.postgresql.org/docs/current/static/app-pgrestore.html)将文件加载`.dump`到本地数据库中。

# asp.net-mvc - asp.net mvc Webgrid 官方文档

> ID：11497218
> 
> 赞同：6
> 
> 时间：2012-07-16T01:47:11.430
> 
> 标签：asp.net-mvc

我正在尝试查找 WebGrid 的文档。我找到了教程和视频，但是否有包含文档的官方网站？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T06:29:58.853

`WebGrid`这是MSDN上该类的官方文档：http: [//msdn.microsoft.com/en-us/library/system.web.helpers.webgrid.aspx](http://msdn.microsoft.com/en-us/library/system.web.helpers.webgrid.aspx)

[http://asp.net](http://asp.net)站点上的教程和视频以及 MSDN 上的[以下文章](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)应该可以帮助您快速入门。

# jquery - JQuery: AJAX "get" response has jumbled HTML tags

> ID：11497224
> 
> 赞同：1
> 
> 时间：2012-07-16T01:47:35.697
> 
> 标签：jquery, html, get

I'm setting up my web page to use JQuery to update the page without refreshing when the user clicks on the navigation links. The basic structure of my pages looks like:

```
<!DOCTYPE html >
<html>
<head>
  <title><?php if(x($page,'title')) echo $page['title'] ?></title>
  <script>var baseurl="<?php echo $a->get_baseurl() ?>";</script>
  <?php if(x($page,'htmlhead')) echo $page['htmlhead'] ?>
</head>
<body>
    <div class='main-container'>
        <?php if(x($page,'nav')) echo $page['nav']; ?>
        <div class='main-content-loading'><img src="/view/theme/zp/ajax-loader.gif" alt="Please wait..."></div>
        <div class='main-content-container'>
        <aside><?php if(x($page,'aside')) echo $page['aside']; ?></aside>
        <section><?php if(x($page,'content')) echo $page['content']; ?>
            <div id="page-footer"></div>
        </section>
        <right_aside><?php if(x($page,'right_aside')) echo $page['right_aside']; ?></right_aside>
        <footer><?php if(x($page,'footer')) echo $page['footer']; ?></footer>
        </div>
    </div>
</body>
</html> 
```

The main sections are filled in using PHP scripts.

The JQuery functions I'm using to update the page are

```
$(document).ready(function() {

    $('.nav-load-page-link').click(function() {
        getPageContent( $(this).attr('href') );
        hideNavMenu( '#' + $(this).closest('ul').attr('id') );
        return false;
    });
}

function getPageContent(url) {

    var pos = $('.main-container').position();

    $('.main-container').css('margin-left', pos.left);  
    $('.main-content-container').hide(0, function () {
        $('.main-content-loading').show(0);
    });

    $.get(url, function(html) {
        console.log($('.main-content-container').html());
        $('.main-content-container').html( $('.main-content-container', html).html() );
        console.log($('.main-content-container').html());
        $('.main-content-loading').hide(function() {
            $('.main-content-container').fadeIn(800,function() {
                $('.main-container').css('margin-left', 'auto'); 
            });
        });
    });
} 
```

I have console logging commands as shown, which allow me to see what the HTML is before and after applying the results of the GET request.

So the weird thing that's happening is that for one page in particular, if I load it by entering the URL into the browser address bar, it loads as expected. But if I load it using my JQuery functions, the HTML tags show up garbled. For example, a form that looks like the following when I load by typing the URL into the address bar

```
<div id="connect-desc">Enter address or web location</div> 
<form action="follow" method="post"> 
<input id="side-follow-url" name="url" size="24" title="Example: bob@example.com, http://example.com/barbara" type="text">
<input id="side-follow-submit" name="submit" value="Connect" type="submit"> 
</form> 
</div> 
```

comes out like the following when I use the JQuery function

```
<div id="connect-desc">Enter address or web location</div> 
<form action="follow" method="post">
</form> 
<input id="side-follow-url" name="url" size="24" title="Example: bob@example.com, http://example.com/barbara" type="text">
<input id="side-follow-submit" name="submit" value="Connect" type="submit"> 
</div> 
```

Or an image link that looks like the following when I type the URL into the address bar

```
<a href="https://some-place" title="some-title">
<img src="https://img-loc" alt="">
</a> 
```

comes out like the following with the JQuery function

```
<a href="https://some-place" title="some-title">
</a>
<img src="https://img-loc" alt=""> 
```

Does anyone have any ideas why this is happening?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:43:44.077

解决方案是确保您从服务器发回的 html 是有效的。Jquery 1.4+ 将强制使用有效的 html。例子：

```
<table>
  <tr>
     <td>generated html from server</td>
  </tr>
   <tr>
     <td>generated html from server</td>
  </tr>
 <div>
     <form>
        <input type="text">
     </form> 
```

由于缺少`</table>`标签，上述内容将无法验证。Jquery 会尝试修复它并且经常会混淆它

# c# - 调用 this.hide() 退出应用程序

> ID：11497225
> 
> 赞同：0
> 
> 时间：2012-07-16T01:47:48.247
> 
> 标签：c#, winforms, windows-mobile

我有一个在应用程序运行时启动的主窗体：

```
Application.Run(new MainMenu()); 
```

我的主要形式是这样的：

```
public partial class MainMenu : Form
{
    Authentication auth;
    public MainMenu()
    {
        InitializeComponent();
        this.auth = new Authentication();
    }

    private void MainMenu_Load(object sender, EventArgs e)
    {
        if (!auth.IsLoggedIn)
        {
            auth.ShowDialog();
        }
    } 
```

验证身份验证后，我的身份验证方法运行以下内容：

```
this.Hide(); 
```

但这会导致应用程序完全退出。知道为什么吗？我认为因为我已经运行了 auth.ShowDialog()，所以这是一个模态表单，在运行 this.Hide() 时应该关闭此表单以再次发布主表单？

# php - 我的代码上的 PHP 面向对象问题

> ID：11497228
> 
> 赞同：0
> 
> 时间：2012-07-16T01:48:14.317
> 
> 标签：php, oop, class, inheritance, extend

嗨，请看一下下面的代码。

```
<?php
class A
{
    public $name;

    public function getName()
    {
        return $this->name;
    }
}

class B extends A
{
    public function setName()
    {
        $this->name = 'Prasad';
    }
}

$obj = new B();

echo $obj->getName();

?> 
```

在这里，当我回显名称时，它什么也不显示。与 A 类中的 $name 相关。这个问题是 getName 还是 setName 的问题？如何从扩展类 B 中设置类 A 中的 $name 变量。如何从类 B 对象中获取它。感谢我错过的任何提示或解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:53:38.533

您之前没有设置名称（使用`$obj->setName()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:55:54.693

`setName()`你的代码大部分都在那里，事实上，如果你添加一行告诉代码调用函数，你会有一个工作示例：

```
$obj = new B();
$obj->setName();
echo $obj->getName(); 
```

More typically you would use a `set` function with a parameter, then pass the value you want to set. You would also set the `$name` property to `protected`, which means the value must be accessed via the set & get methods (more on [visibility](http://php.net/manual/en/language.oop5.visibility.php) in the manual):

```
<?php
class A
{
    protected $name;

    public function getName()
    {
        return $this->name;
    }
}

class B extends A
{
    public function setName($name)
    {
        $this->name = $name;
    }
}

$obj = new B();
$obj->setName('Prasad');
echo $obj->getName();

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T01:57:28.750

Technically, it's echoing the `$name` variable (which is undefined at that point). Unfortunately, it hasn't been set yet. Try using `$obj->setName()` to set the name.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T01:58:21.577

Yes, as SomeKittens suggested you need to call setName() first.

```
class A
{
    public $name;

    public function getName()
    {
        return $this->name;
    }
}

class B extends A
{
    public function setName()
    {
        $this->name = 'Prasad';
    }
}

$obj = new B();
$obj->setName();
echo $obj->getName(); 
```

However, it might be better to perform the setting of the name in the constructor of `B`, as:

```
class A
{
    public $name;

    public function getName()
    {
        return $this->name;
    }
}

class B extends A
{
    public function B()
    {
        $this->name = 'Prasad';
    }
}

$obj = new B();

echo $obj->getName(); 
```

This printed `Prasad` for me using [http://writecodeonline.com/php/](http://writecodeonline.com/php/) to test the code.

Even better, pass the name 'Prasad' when creating the new `B` object, as:

```
class A
{
    public $name;

    public function getName()
    {
        return $this->name;
    }
}

class B extends A
{
    public function B( $value = 'Prasad' )
    { 
        $this->name = $value;
    }
}

$obj = new B();

echo $obj->getName(), "<br>";

$obj = new B( 'John' );

echo $obj->getName(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T01:54:03.333

这是因为您没有先设置 name 属性。呼叫`B->setName()`，然后您可以通过呼叫获得名称`B->getName()`。

# ruby-on-rails - 如何使用 ActiveAdmin 创建 STI 子类的对象

> ID：11497230
> 
> 赞同：4
> 
> 时间：2012-07-16T01:48:16.287
> 
> 标签：ruby-on-rails, activeadmin

鉴于以下设置（目前不工作）

```
class Employee < ActiveRecord::Base
end

class Manager < Employee
end

ActiveAdmin.register Employee do
  form do |f|
    f.input :name
    f.input :joining_date
    f.input :salary
    f.input :type, as: select, collection: Employee.descendants.map(&:name)
  end
end 
```

我想为所有员工提供一个单一的“新”表格，并能够在表格中选择员工的 STI 类型。我能够按预期看到“类型”的选择框，但是当我点击“创建”按钮时，出现以下错误：

```
ActiveModel::MassAssignmentSecurity::Error in Admin::EmployeesController#create

Can't mass-assign protected attributes: type 
```

现在，我知道受保护的属性在 Rails 中的工作方式，并且我有一些解决方法，例如定义`Employee.attributes_protected_by_default`，但这会降低安全性并且过于 hack-y。

我希望能够使用 ActiveAdmin 中的某些功能来做到这一点，但我找不到。我不想创建自定义控制器操作，因为我展示的示例高度简化和做作。

我希望 ActiveAdmin 生成的控制器能够以某种方式识别`type`并执行，`Manager.create`而不是`Employee.create`

有谁知道解决方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T16:39:41.823

You can customize the controller yourself. Read [ActiveAdmin Doc on Customizing Controllers](http://activeadmin.info/docs/8-custom-actions.html#modify_the_controller). Here is a quick example:

```
controller do
  alias_method :create_user, :create
  def create
    # do what you need to here
    # then call create_user alias
    # which calls the original create
    create_user
    # or do the create yourself and don't
    # call create_user
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-25T01:01:39.273

较新版本的`inherited_resources`gem 有一个[BaseHelpers](https://github.com/activeadmin/inherited_resources/blob/master/lib/inherited_resources/base_helpers.rb)模块。您可以覆盖其方法以更改模型的更改方式，同时仍保留所有周围的控制器代码。它比 干净一点`alias_method`，并且它们具有所有标准 REST 操作的挂钩：

```
controller do
  # overrides InheritedResources::BaseHelpers#create_resource
  def create_resource(object)
    object.do_some_cool_stuff_and_save
  end

  # overrides InheritedResources::BaseHelpers#destroy_resource
  def destroy_resource(object)
    object.soft_delete
  end
end 
```

# c# - 查找 n 元图树的分支

> ID：11497232
> 
> 赞同：0
> 
> 时间：2012-07-16T01:48:17.707
> 
> 标签：c#, algorithm, graph, graph-algorithm

给定一个 n-ary 树[http://en.wikipedia.org/wiki/Tree_%28graph_theory%29](http://en.wikipedia.org/wiki/Tree_%28graph_theory%29)，由一个带有顶点和边的图描述，我想将树分成子图。每个子图都是 n 叉树的一个分支。子图将包含顶点度为 2 的相邻边。开始条件是度数大于 2 的顶点。如果非终止，则结束条件也将是度数大于 2 的顶点。如果分支正在终止（叶子），则结束条件将是度数为 1 的顶点。

什么算法可以做到这一点？还有一个图形库可以支持这个吗？c# 实现将是理想的。

```
public class VoronoiGraph
{
    public HashSet Vertizes = new HashSet();
    public HashSet Edges = new HashSet();
} 
```

有关我要分解的典型中轴，请参阅此链接。 [http://spacesymmetrystructure.files.wordpress.com/2009/10/medialax.gif?w=510&h=360](http://spacesymmetrystructure.files.wordpress.com/2009/10/medialax.gif?w=510&h=360)

# python - TypeError:exceptions 必须是旧式类或派生自 BaseException，而不是 str

> ID：11497234
> 
> 赞同：50
> 
> 时间：2012-07-16T01:48:55.143
> 
> 标签：python, typeerror, raise

以下是我的代码：

```
test = 'abc'
if True:
    raise test + 'def' 
```

当我运行它时，它给了我`TypeError`

```
TypeError: exceptions must be old-style classes or derived from BaseException, not str 
```

那么应该是什么样的类型`test`呢？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-17T03:25:59.723

raise 的唯一参数表示要引发的异常。这必须是异常实例或异常类（从 Exception 派生的类）。

试试这个：

```
test = 'abc'
if True:
    raise Exception(test + 'def') 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-16T01:52:17.987

你不能`raise`一个`str`. 只有`Exception`s 可以是`raise`d。

所以，你最好用那个字符串构造一个异常并引发它。例如，您可以这样做：

```
test = 'abc'
if True:
    raise Exception(test + 'def') 
```

或者

```
test = 'abc'
if True:
    raise ValueError(test + 'def') 
```

希望有帮助

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-16T01:50:22.383

应该是个例外。

你想做这样的事情：

```
raise RuntimeError(test + 'def') 
```

在 Python 2.5 及更低版本中，您的代码可以工作，因为它允许将字符串作为异常引发。这是一个非常糟糕的决定，因此在 2.6 中被删除。

# jquery - 在漂亮照片中输入。无法输入文字。可以粘贴或自动填充

> ID：11497238
> 
> 赞同：0
> 
> 时间：2012-07-16T01:49:12.867
> 
> 标签：jquery, html, css, prettyphoto

我正在使用 prettyPhoto 在内联叠加层中显示表单。

看起来不错，但是，我无法在输入中输入任何文本。

我可以通过鼠标单击来聚焦它们，但不能通过标签进入它们。

集中注意力时，我得到一个闪烁的光标，但我无法输入任何内容。我可以通过右键单击>粘贴来粘贴它们，但不能通过 cmd+v 粘贴。我还可以通过从自动填充菜单中进行选择来填充用户名字段。

就好像 prettyPhoto 覆盖正在禁用键盘一样。

HTML：

```
<form id="MemberLoginForm_LoginForm" action="/home/LoginForm" method="post" enctype="application/x-www-form-urlencoded">

    <p id="MemberLoginForm_LoginForm_error" class="message " style="display: none;"></p>

    <fieldset>

            <input class="hidden" id="MemberLoginForm_LoginForm_AuthenticationMethod" name="AuthenticationMethod" value="MemberAuthenticator" type="hidden">

            <div id="Email" class="field text "><label class="left" for="MemberLoginForm_LoginForm_Email">Email</label><div class="middleColumn"><input class="text" id="MemberLoginForm_LoginForm_Email" name="Email" value="" type="text"></div></div>

            <div id="Password" class="field password "><label class="left" for="MemberLoginForm_LoginForm_Password">Password</label><div class="middleColumn"><input class="text" id="MemberLoginForm_LoginForm_Password" name="Password" value="" type="password"></div></div>

            <p id="Remember" class="field checkbox ">
    <input id="MemberLoginForm_LoginForm_Remember" name="Remember" value="1" type="checkbox">
    <label class="right" for="MemberLoginForm_LoginForm_Remember">Remember me next time?</label>

</p>

        <div class="clear"><!-- --></div>
    </fieldset>

    <div class="Actions">

            <input class="action " id="MemberLoginForm_LoginForm_action_dologin" name="action_dologin" value="Log in" title="Log in" type="submit">

            <p id="ForgotPassword"><a href="Security/lostpassword">I've lost my password</a></p>

    </div>

</form> 
```

CSS：

```
input[type="text"], input[type="password"], textarea, select, .uneditable-input {
    border: 1px solid #E3E4E5;
    border-radius: 0 0 0 0;
    color: #FFFFFF;
    display: inline-block;
    font-size: 13px;
    height: 32px;
    line-height: 16px;
    padding: 4px;
    width: 197px;
} 
```

直接在其他页面中显示的相同表单可以完美运行。只有在 prettyPhoto 弹出时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:22:49.937

通过关闭键盘快捷键解决：

```
$("a[rel^='prettyPhoto']").prettyPhoto({
      keyboard_shortcuts: false
}); 
```

# android - 以字符为单位获取 textview 的宽度

> ID：11497241
> 
> 赞同：3
> 
> 时间：2012-07-16T01:49:27.733
> 
> 标签：android, layout

我认为这与 [Set width of TextView 在字符方面相反](https://stackoverflow.com/questions/6162315/set-width-of-textview-in-terms-of-characters)

我有一个 TextView，我在其中显示一些报告数据。我对其中的一部分使用等宽的 TypefaceSpan，因为我希望列对齐。

我使用我的测试 Android 设备来计算我可以容纳多少列，但 Android 模拟器似乎正好少了一列，这使得在纵向模式下以一种丑陋的方式包装。

有没有办法找出一行应该有多少个字符？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T04:33:06.047

答案是使用 textView 的 Paint Object 的 breakText()。这是一个示例，

```
int totalCharstoFit= textView.getPaint().breakText(fullString,  0, fullString.length(), 
 true, textView.getWidth(), null); 
```

现在`totalCharstoFit`包含可以放入一行的确切字符。现在您可以制作完整字符串的子字符串并将其附加到 TextView 中，如下所示，

```
String subString=fullString.substring(0,totalCharstoFit);
textView.append(substring); 
```

并计算剩余的字符串，你可以这样做，

```
fullString=fullString.substring(subString.length(),fullString.length()); 
```

现在完整的代码，

在while循环中执行此操作，

```
while(fullstirng.length>0)
{
int totalCharstoFit= textView.getPaint().breakText(fullString,  0, fullString.length(), 
     true, textView.getWidth(), null);
 String subString=fullString.substring(0,totalCharstoFit);
    textView.append(substring);
 fullString=fullString.substring(subString.length(),fullString.length());

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:58:36.150

好吧，你可以做数学来找出这个，找到字符的宽度，将屏幕的宽度除以这个，你就会得到你想要的东西。

但是就不能设计得更好吗？有没有可以组合在一起的列？显示为图形，甚至完全排除？

另一种可能的解决方案是使用类似 viewpager 的东西。（找出有多少列的宽度适合第一页，然后将剩余的表格拆分到第二页）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-13T10:01:27.463

您可以通过以下代码获取 Textview 的总行并获取每个字符的字符串。然后您可以根据需要为每一行设置样式。

我将第一行设置为粗体。

```
private void setLayoutListner( final TextView textView ) {
    textView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            textView.getViewTreeObserver().removeGlobalOnLayoutListener(this);

            final Layout layout = textView.getLayout();

            // Loop over all the lines and do whatever you need with
            // the width of the line
            for (int i = 0; i < layout.getLineCount(); i++) {
                int end = layout.getLineEnd(0);
                SpannableString content = new SpannableString( textView.getText().toString() );
                content.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), 0, end, 0);
                content.setSpan(new StyleSpan(android.graphics.Typeface.NORMAL), end, content.length(), 0);
                textView.setText( content );
            }
        }
    });
} 
```

试试这种方式。您可以通过这种方式应用多种样式。

您还可以通过以下方式获取 textview 的宽度：

```
for (int i = 0; i < layout.getLineCount(); i++) {
        maxLineWidth = Math.max(maxLineWidth, layout.getLineWidth(i));
} 
```

# java - JDBC：如何处理 Java PreparedStatement 中的通配符

> ID：11497245
> 
> 赞同：1
> 
> 时间：2012-07-16T01:50:02.693
> 
> 标签：java, sql, jdbc

例如，如果我有：

```
connection.prepareStatement("SELECT * FROM users 
                                   WHERE status=? AND otherAttribute=?"); 
```

在某些情况下，我可能想要一个特定的状态，而在其他情况下，我想要所有的状态。我怎么能基本上做类似的事情：

```
preparedStatement.setInt(1, mySpecificRequestedStatus); 
```

在其他情况下：

```
preparedStatement.setInt(1, allStatuses); // wildcard 
```

这样我就不必有多个 PreparedStatements，尤其是对于 SELECT 语句中更复杂的 WHERE 子句，其中排列可能更高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:53:52.880

你可以这样做：

```
connection.prepareStatement("SELECT * FROM users 
                               WHERE (status=? OR ?=1) AND otherAttribute=?"); 
```

第二个`?`是“所有状态”属性：`1`如果要忽略状态，请将其设置为；如果您希望`status`考虑具体情况，请将其设置为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:23:12.767

*你没有选择，你必须像我最初怀疑和问的那样选择一个或另一个。*

您可以：

1.  使用 if 子句创建复杂的预准备语句
2.  创建一个没有最佳性能的复杂 SQL 语句

这个真的没有很好的解决办法。这就是 ORM 存在的原因，将其抽象出来。问题是 ORM 引入了其他问题/复杂性以换取简化其他事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:07:32.260

斯蒂芬·格雷尼尔，

为什么不创建一个`function or procedure`in 数据库并调用`function or procedure`from `java`？这将解决许多麻烦，使您的 java 代码保持整洁，当然也没有 sql 查询的硬编码。

问候

# c++ - 默认析构函数 nothrow

> ID：11497252
> 
> 赞同：33
> 
> 时间：2012-07-16T01:50:46.110
> 
> 标签：c++, c++11

以下代码在 gcc-4.7.1 下不编译，而是在 clang-3.2 下编译。哪一个遵循 C++11 标准？

```
struct X {
  virtual ~X() = default;
};

struct Y : X {
  virtual ~Y() = default;
}; 
```

gcc-4.7.1 抱怨说：

```
looser throw specifier for 'virtual Y::~Y()'
error: overriding 'virtual X::~X() noexcept(true)' 
```

显然，gcc-4.7.1 认为 X 的默认析构函数不是 nothrow，但 Y 的默认析构函数不是 nothrow。为什么是这样？任何人都可以参考标准中的正确位置吗？谢谢。

我在stackoverflow上看到了类似的问题，但我没有看到参考标准的答案。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-16T03:27:51.303

**编译器在这里陷入两难境地**，原因如下：

(1)在函数声明中**不指定任何异常**`throw`（即不使用也不`noexcept`（相当于`noexcept(true)`））意味着允许该函数抛出**所有可能的异常**：

> （第 15.4/12 节，强调我的）**没有异常规范或具有****允许所有异常**的形式的异常`noexcept(constant-expression)`规范`constant-expression`的函数。[...]`false`

 **(2)**默认析构函数**必须完全允许由其隐式定义直接调用的函数所允许的异常：

> （§15.4/14，强调我的）隐式声明的特殊成员函数（第 12 条）应具有异常规范。**如果 f 是隐式声明的**默认构造函数、复制构造函数、移动构造函数、**析构函数**、复制赋值运算符或移动赋值运算符，**则当且仅当 T 被f 的隐式定义直接调用的函数**；如果 f 直接调用的任何函数允许所有异常，则 f 应允许所有异常；如果 f 直接调用的每个函数都不允许异常，则 f 应不允许异常。

（3）当一个特殊成员（比如析构函数）被*显式默认*时，即当你使用 时`= default`，异常规范是**可选**的（见下文“*可能*有”的使用）：

> （8.4.2/2，强调我的）一个**显式默认的函数**[...]只有当它与隐式声明的异常规范兼容（15.4）时才**可能有一个显式的异常规范。**[...]

标准中没有声明需要在显式默认析构函数中指定异常。

**结论：**因此，**不指定显式默认析构函数的异常**可以用两种方式解释：

*   表示*允许所有例外情况*（根据上述（1））
*   或者，或者，意味着*允许与析构函数的隐式默认定义所允许的完全相同的异常*（根据上面的（3）），这在您的情况下意味着不允许*异常*（根据上面的（2）） .

不幸的是，在基类声明的情况下，GCC 以一种方式（支持“无例外”）解决了这个困境，而在派生类的情况下，GCC 以不同的方式解决了这个困境（支持那里的“所有例外”）。

**我相信对这种公认的模棱两可的情况最自然的解释是假设 (2) 和 (3) 覆盖 (1)。**标准没有这样说，但应该这样说。在这种解释下，Clang 似乎就在这里。**

# php - PHPWebsocket 客户端立即断开连接

> ID：11497253
> 
> 赞同：0
> 
> 时间：2012-07-16T01:50:47.063
> 
> 标签：php, websocket, phpwebsocket

我正在玩在`phpwebsocket`这里找到的课程[http://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)，但我的客户端在页面加载后立即断开连接。

我在本地 php WAMP 服务器中启用了套接字，并确保硬编码到代码中的 URL 指向正确的位置。

我已经尝试过 Chrome 20 和 IE 10。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:43:38.537

我已经确定我在这个特定示例中遇到的问题是因为服务器是使用旧版本的协议编写的（对源的最后一次更新是在 2010 年）。对于那些对当前工作感兴趣的人，请查看[https://github.com/Flynsarmy/PHPWebSocket-Chat](https://github.com/Flynsarmy/PHPWebSocket-Chat)。

# dojo - FilteringSelect 和 JsonRest 的错误处理

> ID：11497255
> 
> 赞同：0
> 
> 时间：2012-07-16T01:50:57.320
> 
> 标签：dojo, dijit.form

我有一个使用 dojo.store.JsonRest 实例作为存储的 dijit.form.FilteringSelect。

我的商店后端服务从其他需要身份验证的地方获取数据。有时，此身份验证可能会失败，我想将其报告给浏览器。

返回的错误是 JSON，响应是 404，所以我可以在控制台中看到这个记录。但是，我似乎找不到与之挂钩的方法，因此我可以通过 FilteringSelect 实例或通过 JsonRest 实例对它做一些有用的事情。

给定以下代码，我可以在哪里添加错误处理函数？

```
var store = new JsonRest({
    target: "/json/store/",
    idProperty: "InternalID"
});

var widget = new FilteringSelect({
    id: 'widgetId',
    store: store,
    searchAttr: 'name'
}, 'widgetId'
}); 
```

正在使用的 Dojo 版本是 1.7.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:45:46.690

我最终拦截了 store.query 返回的 QueryResults，并使用适当的错误处理程序创建了我自己的 Deferred。与 FilteringSelect 类似，我也必须捕获取消。

生成的代码部分位于存储定义之后，FilteringSelect 之前。

```
aspect.after(store, 'query', function(QueryResults) {
    Deferred.when(QueryResults, function() {}, function(err) {
        if (err.dojoType && err.dojoType == 'cancel') {
            return; // ignore cancellations
        }
        // Do custom error handling here
    });
    return QueryResults;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:03:23.110

手动调用`datastore.fetch()`或。`objectstore.query()`默认情况下，一旦它附加到选择 -`.fetch()`一旦选择打开/启动，它将触发。在手动执行此操作的同时，由于数据被缓存，您还将获得更快的响应 UI。

由于未定义，查询将是通配符 - 尽管也可以在 fetch 配置对象中指定（如果需要最小片段，仅用于验证成功的身份验证）。

两个api略有不同

### 使用数据存储

```
var store = new DataStore({
    url: "/json/store/datastore"
});
store.fetch({
   onBegin: function(size, request) { },
   onItem:  function(item, request){ },
   onComplete: function(items, request) { },

   // youre looking for this hook
   onError: function(error, request) { }
}); 
```

### 或使用 JsonRest（OP 的请求）

```
var store = new JsonRest({
    target: "/json/store/",
    idProperty: "InternalID"
});

store.query(/* url query parameters, none = all */).addBoth(
  function(result) {
    console.log('success', result);
  },
  function(status) {
    console.log('error', status);
  }
);
var widget = new FilteringSelect({
    id: 'widgetId',
    store: store,
    searchAttr: 'name'
}, 'widgetId'
}); 
```

# c# - C# 模式匹配失败

> ID：11497256
> 
> 赞同：1
> 
> 时间：2012-07-16T01:50:58.030
> 
> 标签：c#, regex, pattern-matching

这是我用来查找 RB\d{4}、SW\d{4} 和 S\d{4} 形式的公交号码的代码：

```
Regex transitRegex = new Regex("^(RB|SW?)(<?transit>\\d{4}).*");
Match m1 = transitRegex.Match(transitNumber);
if (m1.Success)
{
    Regex transitRegexNoZeroes = new Regex("0+(<?transitNoZeroes>\\d+)");
    Match m2 = transitRegexNoZeroes.Match(m1.Groups["transit"].Value);
    if (m2.Success)
    {
        transitNumber = m2.Groups["transitNoZeroes"].Value.ToString();
        MessageBox.Show(transitNumber, "Transit Number", MessageBoxButtons.OK);
    }
    else
    {
        transitNumber = m1.Groups["transit"].Value.ToString();
    }
}
else
{
    MessageBox.Show("Could not find transit number in " + transitNumber, "Parsing Error", MessageBoxButtons.OK);
} 
```

但是我没有匹配任何行。这是失败的行的示例：

```
RB80720C1XX -  Intermittent COMM lOSS ****CHRONIC**** 
```

对于我的一生，我无法弄清楚正则表达式有什么问题。任何建议表示赞赏。

问候。

编辑：编辑内部匹配以允许带前导零的数字仍包含零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:00:09.847

你的第一个模式有点偏离。试试这个：

```
@"^(RB|SW?)(?<transit>\d{4})" 
```

注意，问号的位置。您可以在[此处](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)测试模式。

# python - 错误 django/core/handlers/wsgi.py"，第 219 行，在 __call__

> ID：11497257
> 
> 赞同：0
> 
> 时间：2012-07-16T01:51:24.067
> 
> 标签：python, django, django-admin, django-cms

我有一个新安装的 django-cms。我可以访问带有 django-cms 徽标的起始页（django 1.4，django-cms 2.3rc2.post0）。第一页有两个超链接，“admin”`http://v11.python.centos/zh-cn/admin/`和“adding” `http://v11.python.centos/zh-cn/admin/cms/page/add/`。当我访问它们时出现错误 404。当我`http://v11.python.centos/admin/`直接输入地址栏时，我也得到了错误 404。当我检查 apache 日志时，我得到了很多错误，第一个是`File "/usr/lib/python2.6/site-packages/django/core/handlers/wsgi.py", line 219, in __call__`. 有没有人有类似的经历？任何话都将不胜感激。有关错误的更多详细信息，apache的错误日志和我`urls.py`的如下，感谢您的时间。

关于 v11.python.centos-error_log 的详细信息：

```
[Sun Jul 15 16:56:24 2012] [info] mod_wsgi (pid=7762): Shutdown requested 'v11.python.centos'.
[Sun Jul 15 16:56:24 2012] [info] mod_wsgi (pid=7762): Stopping process 'v11.python.centos'.
[Sun Jul 15 16:56:24 2012] [info] mod_wsgi (pid=7762): Destroying interpreters.
[Sun Jul 15 16:56:24 2012] [info] mod_wsgi (pid=7762): Cleanup interpreter ''.
[Sun Jul 15 16:56:24 2012] [info] mod_wsgi (pid=7762): Terminating Python.
[Sun Jul 15 16:56:24 2012] [info] mod_wsgi (pid=7762): Python has shutdown.
[Sun Jul 15 16:56:27 2012] [info] mod_wsgi (pid=7831): Attach interpreter ''.
[Sun Jul 15 16:56:31 2012] [info] mod_wsgi (pid=7831): Create interpreter 'v11.python.centos|'.
[Sun Jul 15 16:56:31 2012] [info] [client 10.7.6.186] mod_wsgi (pid=7831, process='v11.python.centos', application='v11.python.centos|'): Loading WSGI script '/var/www/vhost11/tdjcms/tdjcms/wsgi.py'.
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186] mod_wsgi (pid=7831): Exception occurred processing WSGI script '/var/www/vhost11/tdjcms/tdjcms/wsgi.py'.
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186] Traceback (most recent call last):
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/core/handlers/wsgi.py", line 219, in __call__
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     self.load_middleware()
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py", line 45, in load_middleware
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     mod = import_module(mw_module)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/utils/importlib.py", line 35, in import_module
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     __import__(name)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django_cms-2.3rc2.post0-py2.6.egg/cms/__init__.py", line 9, in <module>
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     patch_settings()
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django_cms-2.3rc2.post0-py2.6.egg/cms/conf/__init__.py", line 36, in patch_settings
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     post_patch_check()
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django_cms-2.3rc2.post0-py2.6.egg/cms/conf/patch.py", line 56, in post_patch_check
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     if not validate_template(template[0], ['js', 'css']):
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/sekizai/helpers.py", line 97, in validate_template
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     found = get_namespaces(template)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/sekizai/helpers.py", line 88, in get_namespaces
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     return _scan_namespaces(compiled_template.nodelist)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/sekizai/helpers.py", line 78, in _scan_namespaces
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     found += _extend_nodelist(node)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/sekizai/helpers.py", line 51, in _extend_nodelist
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     _extend_blocks(extend_node, blocks)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/sekizai/helpers.py", line 24, in _extend_blocks
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     parent = extend_node.get_parent(None)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/loader_tags.py", line 98, in get_parent
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     return get_template(parent)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/loader.py", line 145, in get_template
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     template, origin = find_template(template_name)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/loader.py", line 134, in find_template
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     source, display_name = loader(name, dirs)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/loader.py", line 42, in __call__
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     return self.load_template(template_name, template_dirs)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/loader.py", line 48, in load_template
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     template = get_template_from_string(source, origin, template_name)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/loader.py", line 156, in get_template_from_string
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     return Template(source, origin, name)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/base.py", line 125, in __init__
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     self.nodelist = compile_string(template_string, origin)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/base.py", line 153, in compile_string
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     return parser.parse()
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/base.py", line 265, in parse
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     self.invalid_block_tag(token, command, parse_until)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]   File "/usr/lib/python2.6/site-packages/django/template/base.py", line 321, in invalid_block_tag
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186]     raise self.error(token, "Invalid block tag: '%s'" % command)
[Sun Jul 15 16:56:31 2012] [error] [client 10.7.6.186] TemplateSyntaxError: Invalid block tag: 'render_block'
[Sun Jul 15 03:56:34 2012] [error] /usr/lib/python2.6/site-packages/django_mptt-0.5.2-py2.6.egg/mptt/models.py:305: DeprecationWarning: Implicit manager CMSPlugin.tree will be removed in django-mptt 0.6\.  Explicitly define a TreeManager() on your model to remove this warning.
[Sun Jul 15 03:56:34 2012] [error]   DeprecationWarning
[Sun Jul 15 03:56:34 2012] [error] /usr/lib/python2.6/site-packages/django/template/defaulttags.py:1235: DeprecationWarning: The syntax for the url template tag is changing. Load the `url` tag from the `future` tag library to start using the new behavior.
[Sun Jul 15 03:56:34 2012] [error]   category=DeprecationWarning) 
```

我的网址.py

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
from django.conf import settings

admin.autodiscover()

urlpatterns = patterns('',
    url(r'^', include('cms.urls')),
    url(r'^admin/', admin.site.urls),
)

if settings.DEBUG:
    urlpatterns = patterns('',
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve',
        {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
    url(r'', include('django.contrib.staticfiles.urls')),
) + urlpatterns 
```

附录：settings.py

```
# Django settings for tdjcms project.
import os
gettext = lambda s: s
SETTINGS_PATH = os.path.abspath(os.path.dirname(__file__))

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'djcms',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': 'python',                  # Not used with sqlite3.
        'HOST': 'python.centos',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '3306',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'zh-cn'
LANGUAGES = [
    ('zh-cn', 'Chinese'),
]

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = os.path.join(SETTINGS_PATH,"../media")

# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = os.path.join(SETTINGS_PATH, "../static")

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

#ADMIN_MEDIA_PREFIX = '/static/admin/"

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = 's*)(xzab)=ijji8ho%6q)s=r^f8&amp;pb6z)sp3uc90a_&amp;=0iy5kw'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'cms.middleware.multilingual.MultilingualURLMiddleware',
    'cms.middleware.page.CurrentPageMiddleware',
    'cms.middleware.user.CurrentUserMiddleware',
    'cms.middleware.toolbar.ToolbarMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.i18n',
    'django.core.context_processors.request',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'cms.context_processors.media',
    'sekizai.context_processors.sekizai',
)

ROOT_URLCONF = 'tdjcms.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'tdjcms.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(SETTINGS_PATH, "../templates"),
)

CMS_TEMPLATES = (
    ('template_1.html', 'Template One'),
    ('template_2.html', 'Template Two'),
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'cms',
    'menus',
    'mptt',
    'south',
    'sekizai',
    'filer',
    'cmsplugin_filer_file',
    'cmsplugin_filer_folder',
    'cmsplugin_filer_image',
    'cmsplugin_filer_teaser',
    'cmsplugin_filer_video',
    'cms.plugins.flash',
    'cms.plugins.googlemap',
    'cms.plugins.link',
    'cms.plugins.picture',
    'cms.plugins.snippet',
    'cms.plugins.text',
    'cms.plugins.twitter',
    'reversion',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
        'class': 'django.utils.log.AdminEmailHandler'    
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

Apache配置文件：http-vhost11.conf

```
<VirtualHost *:80>
    ServerAdmin python@v11.python.centos
    DocumentRoot "/var/www/vhost11"
    ServerName v11.python.centos
    ServerAlias www.v11.python.centos.com

    ErrorLog "logs/v11.python.centos-error_log"
    CustomLog "logs/v11.python.centos-access_log" common

    <Directory /var/www/vhost11>
        Order allow,deny
        Allow from all
    </Directory>  

    WSGIDaemonProcess v11.python.centos processes=1 threads=1 display-name=%{GROUP}
    WSGIProcessGroup v11.python.centos

    WSGIScriptAlias /app /var/www/vhost11/wsgi-scripts/myapp.wsgi

   <Directory /var/www/vhost11/wsgi-scripts>
        Order allow,deny
        Allow from all
    </Directory>   

Include conf/extra/tdjcms-vhosts.conf
</VirtualHost> 
```

tdjcms-vhosts.conf

```
WSGIScriptAlias / /var/www/vhost11/tdjcms/tdjcms/wsgi.py
<Directory /var/www/vhost11/tdjcms>
    Allow from all
</Directory>
<Directory /var/www/vhost11/tdjcms/tdjcms>
    Order allow,deny
    Allow from all
</Directory>

Alias /static/ /var/www/vhost11/tdjcms/static/    
Alias /media/ /var/www/vhost11/tdjcms/media/ 
```

项目树：

```
tdjcms
|-- manage.py
|-- media
|-- static
|   `-- cms -> /usr/lib/python2.6/site-packages/django_cms-2.3rc2.post0-py2.6.egg/cms/static/cms
|-- tdjcms
|   |-- __init__.py
|   |-- __init__.pyc
|   |-- settings.py
|   |-- settings.pyc
|   |-- urls.py
|   |-- urls.pyc
|   |-- wsgi.py
|   `-- wsgi.pyc
`-- templates
    |-- base.html
    |-- template_1.html
    `-- template_2.html 
```

# c# - 如何让项目的父母拥有项目 ID 和父母最大容量？

> ID：11497258
> 
> 赞同：1
> 
> 时间：2012-07-16T01:51:31.473
> 
> 标签：c#, algorithm, list, tree

所以我们有一个 List `0`.. `N`，以及`W`每个父母可以持有的项目数量（所有项目都相同）：

假设我们有 0..12 个项目的列表。我们知道每个项目最多可以容纳 3 个项目，因此可以形成这样的树：

![平面列表 => 带帽的树 == 3](../Images/c57104fb021a794d43d4c9f4f6dcd138.png)

或者说4个项目：

![平面列表 => 带帽的树 == 4](../Images/1f4c378e661bd66c2f5387a56d17560a.png)

我们希望列表中的项目编号获取其父编号（包含它的项目）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:11:16.837

父 id = floor((id - 1) / w)

# jquery - 使用 jquery 对选择选项进行排序

> ID：11497261
> 
> 赞同：1
> 
> 时间：2012-07-16T01:52:05.290
> 
> 标签：jquery, sorting

我在这里资助了一个非常好的排序功能 [如何使用 jQuery 按字母顺序对列表进行排序？](https://stackoverflow.com/questions/1134976/how-may-i-sort-a-list-alphabetically-using-jquery) 工作几乎完美，除了它看起来像只按第一个字符排序，例如，如果你有类似的东西

```
0-5000
5001-10000
10001-15000
15001-20000 
```

订单看起来像

```
0-5000
10001-15000
15001-20000
5001-10000 
```

反而

```
0-5000
5001-10000
10001-15000
15001-20000 
```

我为表单中的每个选择重做了函数

```
var mylist = $('#myformid select');

$(mylist).each(function (sorter, elm) { 
  var listitems = $(this).children('option.myoptionclass').get();
   listitems.sort(function(a, b) {
      var compA = $(a).text().toUpperCase();
      var compB = $(b).text().toUpperCase();
      return (compA < compB) ? -1 : (compA > compB) ? 1 : 0;
   })
     $.each(listitems, function(idx, itm) { 
          $(this).parent().append(itm); 
      });

}); 
```

这是现场示例

[http://jsfiddle.net/sQsZQ/6/](http://jsfiddle.net/sQsZQ/6/)

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:14:15.777

我编辑了你的小提琴： http: [//jsfiddle.net/CBD33/2/](http://jsfiddle.net/CBD33/2/) 我正在使用`parseInt`所以比较现在看起来像这样：

```
listitems.sort(function(a, b) {
  var compA = $(a).text().toUpperCase();
  var compB = $(b).text().toUpperCase();
  compA = (parseInt(compA,10) || compA)
  compB = (parseInt(compB,10) || compB)              

  return (compA < compB) ? -1 : (compA > compB) ? 1 : 0;
}) 
```

如果给定的字符串值的第一个字符`parseInt`是数字，它将解析所有内容，直到第一个非数字字符。如果第一个字符不是数字，它将返回 NaN。我对`||`there的使用比较懒惰，但我相信你可以想出一个更好的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:13:54.240

您需要在这样排序之前将字符串转换为数字

```
 var compA = parseInt($(a).text().split('-')[0]);
   var compB = parseInt($(b).text().split('-')[0]); 
```

见[http://jsfiddle.net/sQsZQ/8/](http://jsfiddle.net/sQsZQ/8/)

# ruby-on-rails - 将本地数据库 windows phone 与数据库服务器同步

> ID：11497262
> 
> 赞同：0
> 
> 时间：2012-07-16T01:52:07.757
> 
> 标签：ruby-on-rails, sqlite, windows-phone-7, sync, local-database

如何将 Windows Phone 的本地数据库与服务器上的数据库同步，对于这种情况，Rails 服务器使用 sqlite ......知道吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:50:00.877

您将不得不手动实现同步层。目前没有内置工具可以做到这一点。考虑构建一个能够接受传入数据推送/拉取请求并对数据库进行相应操作的 Web 服务。

# regex - 正则表达式匹配连字符和逗号

> ID：11497265
> 
> 赞同：1
> 
> 时间：2012-07-16T01:52:19.917
> 
> 标签：regex

我正在尝试使用正则表达式匹配数字：

1.  中间可以包含连字符
2.  可以同时包含连字符和逗号

试过：

```
[0-9-]+    
[0-9]+[-]?:[-N]?[0-9] 
```

样本有效输入：

```
60-55-1
79-0,2,4,6,8,10,12,14,16,18,20,22,24,26 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T01:54:51.317

所以你的意思是，比如，`[0-9,-]+`例如？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T03:17:29.590

基于 Kolink 的回答（就问题而言这是正确的），并假设`,23`并且`79-`无效：

```
^[0-9][0-9,-]*-[0-9,-]*[0-9]$ 
```

这要求字符串以数字开头，包含任意数量的有效字符，后跟连字符，然后是任意其他数量的有效字符，以数字结尾。请注意，这是简单的 BRE（不是 ERE 或 PREG），因此它适用于每个正则表达式解析器。

如果我提到的样本*实际上*是有效的，请说出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T02:07:40.530

这将匹配您正在寻找的内容

```
[0-9]+(?:[-,]?[0-9]+)* 
```

它将获得任何数字模式，后跟一个带有破折号和逗号的可选字符串，后跟更多数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T02:36:07.040

```
(-)?[0-9]+((,|-)[0-9]+)* 
```

我认为这可以满足您的需求。

# java - 应用程序在 2.2 而不是 2.3+ 上崩溃

> ID：11497270
> 
> 赞同：1
> 
> 时间：2012-07-16T01:53:14.270
> 
> 标签：java, android, spinner

所有 - 我有一个应用程序可以在我的实际设备（Android 4.0.4）和我的大多数模拟器（2.3.3、3.0、3.1、3.2、4.0、4.0.3 等）上正常运行。当我尝试通过 onClick 方法从活动 A 更改为活动 B 时，在我的 2.2 模拟器上它强制关闭。我在 logcat 中得到了这个：

```
 07-16 01:01:10.487: E/AndroidRuntime(277): FATAL EXCEPTION: main
07-16 01:01:10.487: E/AndroidRuntime(277): java.lang.VerifyError: flatirons.applications.monopoly.Properties
07-16 01:01:10.487: E/AndroidRuntime(277):  at java.lang.Class.newInstanceImpl(Native Method)
07-16 01:01:10.487: E/AndroidRuntime(277):  at java.lang.Class.newInstance(Class.java:1429)
07-16 01:01:10.487: E/AndroidRuntime(277):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-16 01:01:10.487: E/AndroidRuntime(277):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
07-16 01:01:10.487: E/AndroidRuntime(277):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-16 01:01:10.487: E/AndroidRuntime(277):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-16 01:01:10.487: E/AndroidRuntime(277):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-16 01:01:10.487: E/AndroidRuntime(277):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-16 01:01:10.487: E/AndroidRuntime(277):  at android.os.Looper.loop(Looper.java:123)
07-16 01:01:10.487: E/AndroidRuntime(277):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-16 01:01:10.487: E/AndroidRuntime(277):  at java.lang.reflect.Method.invokeNative(Native Method)
07-16 01:01:10.487: E/AndroidRuntime(277):  at java.lang.reflect.Method.invoke(Method.java:521)
07-16 01:01:10.487: E/AndroidRuntime(277):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-16 01:01:10.487: E/AndroidRuntime(277):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-16 01:01:10.487: E/AndroidRuntime(277):  at dalvik.system.NativeStart.main(Native Method) 
```

我做了一些研究，发现原因`java.lang.VerifyError`是缺少该 API 不支持的功能（即在 android 1.6 中使用 NFC），或者使用不兼容的外部库。我没有使用外部库，所以我想我必须使用仅在 android 2.3.3+ 中可用的高级功能。我去了问题行，即 1429，发现了这个`spinner1.getSelectedItem().toString();`。然后我去了 android 网站，发现这个方法从 API 1 开始就存在了。应用程序的其他功能包括：微调器、按钮、4 个活动、edittext、textview 和一个菜单。`java.lang.VerifyError`问题：除了不兼容的外部库和 android 功能之外，还有什么可能导致的？我会根据您的要求从特定行发布代码。谢谢你的时间！

# c - 如何在 C 中初始化任务控制块堆栈？

> ID：11497276
> 
> 赞同：1
> 
> 时间：2012-07-16T01:53:55.923
> 
> 标签：c, pointers, scheduled-tasks, rtos, freertos

我想将给定任务的初始程序计数器放入任务自己的堆栈中。这样我就可以恢复堆栈上下文以开始运行任务。

有没有人有很好的资源或知道如何在 C 中做到这一点？

到目前为止，我已经为给定任务分配了一个堆栈。

这是我在汇编中找到的一个示例：

```
;program counter initialization for task2
    ldi r16, LOW(TASK2)
    sts TASK2_STACK_BEGIN, r16
    ldi r16, HIGH(TASK2)
    sts TASK2_STACK_BEGIN-1, r16 
```

低字节首先被压入 TASK2 的堆栈，然后是高字节。

# r - R：如何从一个向量中删除另一个向量中的项？

> ID：11497277
> 
> 赞同：0
> 
> 时间：2012-07-16T01:53:59.543
> 
> 标签：r, vector, comparison

在我的一个玩具问题中，我有一个`a`由整数组成的向量，我想有效地从`a`向量中的项中删除`b`。我写了代码

```
newa=NULL
for (j in 1:length(a))
   if (min(abs(a[i]-b))>0) newa=c(newa,a[i]) 
```

但这太可怕了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T01:56:08.913

您可以只使用`intersect`,`setdiff`等（请参阅`?setdiff`）：

```
a <- 1:10
b <- c(2, 3, 5, 7)

setdiff(a, b)
# [1]  1  4  6  8  9 10 
```

甚至只是使用`%in%`：

```
a[!(a %in% b)] # (a %in% b) is TRUE in index i if a[i] is in b. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T02:03:51.343

像mathical.coffee这样可以减轻手指的负担，所以我永远无法回答问题：P

我经常使用 %in% 来做这件事。我从 Stephen Turner 那里获得了一些很棒的代码，这使它变得更加容易！

```
## Returns a logical vector TRUE for elements of X not in Y
"%nin%" <- function(x, y) !(x %in% y) 
```

# c - 带有calloc的C段错误

> ID：11497279
> 
> 赞同：1
> 
> 时间：2012-07-16T01:54:27.043
> 
> 标签：c, segmentation-fault, calloc

这两行给了我一个段错误，我无法弄清楚：

```
int** input;
*input = (int*)calloc(5, sizeof(int)); 
```

而已。我理解这一点的方式是，请求等于 5 个整数的内存并返回内存地址。将内存地址存储在输入指向的值中。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T02:12:50.030

你永远不会初始化`input`所以引用发生在那里的任何东西，也许这就是你想要的

```
int** input;
input = malloc(sizeof(int*));
*input = calloc(5, sizeof(int)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:57:32.117

问题是您正在尝试分配一个尚未分配的地址。如果您将值直接分配给输入，那么它应该可以工作。

```
input = (int *) calloc(5, sizeof(int)); 
```

编辑：我忘了更新演员表，我认为需要更多解释。

分配应该是这样的：

```
input = calloc(5, sizeof(int *)); 
```

这样做是分配一个由 5 个整数指针组成的数组。一旦你有了它，你就可以分配整数数组来存储在这些整数指针中。（注意：我假设这里支持 C99。

```
for (int i = 0; i < 5; i++) {
    input[i] = calloc(5, sizeof(int));
} 
```

它的作用是分配一个 5×5 的整数矩阵，它与如下声明输入基本相同：

```
int input[5][5]; 
```

不同之处在于，在此声明中，编译器为您管理分配，这可能是您想要的，也可能不是您想要的。例如，如果此代码在一个函数中，并且您想返回一个指向您已分配的矩阵的指针，那么您将需要自己分配内存。如果您只在当前函数中使用数据结构，那么让编译器管理内存就可以了。

# php - 如何使用javascript（和AJAX？）调用外部对象

> ID：11497280
> 
> 赞同：0
> 
> 时间：2012-07-16T01:54:32.167
> 
> 标签：php, javascript, html, ajax, ashx

首先，感谢这个社区。我慢慢开始理解这些东西，我感谢所有的反馈。也就是说，我提出了另一个问题。

情况：我正在尝试建立一个新站点，并且正在尝试将其用作学习经验来使用一些 php 并自学 javascript（注意，我现在想坚持使用 js 而不是跳到 jquery直到我更好地处理 js）。我创建了一个画廊，顶部有一系列缩略图，点击后会在下面的 div 中填充艺术品、标题和描述。

设置：因为我希望通过名称而不是数字（例如数组）来调用它们，所以它们可以互换，我将每个构建为包含所有组件的 id 的 div，然后我通过调用它到目标位置剧本：

```
function changeDiv(id) {
var target = document.getElementById('generic');
var id = document.getElementById(id);
target.innerHTML = id.innerHTML; 
} 
```

在正文中，它看起来像：

```
<img src="images/thumbs/digital-art/thumb-space-oddity.jpg" id="thumb-space-odity" onclick="callDiv('space-oddity')"/>
...
<div class="gallery-frame" id="generic"></div> 
```

目前这是可行的，但由于我必须有一个位置来调用所有 div，因此我在页脚中添加了一个 php 包含，因此它最后加载但包含我可能需要的所有图像：

```
<div style="display:none;">
<?php include("gallery.php"); ?>
</div> 
```

...但据我了解，这仍然意味着页面将加载所有会真正减慢页面速度的内容。所以我需要一个新的解决方案。

我的挑战：首先，有没有办法专门在javascript中做到这一点？如果是这样，我很乐意这样做！

假设我不能，我已经开始研究 AJAX 以了解它是如何工作的，虽然它开始具有名义意义（对 javascript 来说仍然是新的，所以我只得到了一半）并且在 w3schools.com 和[stackoverflow 主题](https://stackoverflow.com/questions/5092352/relative-path-problems-in-javasvript-ajax-call)之间我认为我有一个大致了解我需要做什么，但它仍然无法正常工作。

问题：根据上面的stackoverflow评论，我尝试在我自己的实例中重新创建示例函数，并将其设置如下：

```
<script type="text/javascript">
function createXMLHttpRequest() {
    try {
        return new XMLHttpRequest();
    }
    catch (e)
    { alert('XMLHttpRequest not working'); }
    try {
        return new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch (e)
    { alert('Msxml2.XMLHTT not working'); }
    try {
        return new ActiveXObject("Microsoft.XMLHTTP");
    }
    catch (e)
    { alert('Microsoft.XMLHTTP not working'); }
    alert("XMLHttpRequest not supported");
    return null;
}
function callDiv(id) {
    var xmlHttpReq = createXMLHttpRequest();
    var url = "gallery.asp?ID=" + id;
    xmlHttpReq.open("GET", url, true);
    xmlHttpReq.send();
}
</script> 
```

根据我所读到的内容，我只保留了第一部分，因为它设置了函数（删除 null 和提示，因为我不需要它们）并尝试让 callDiv 函数运行与我之前使用的脚本相同。我还将gallery.php 页面保存为.asp 页面，但我应该将其保留为php 吗？

它必须是.ashx吗？

而且由于我不知道调用它的文件，所以我不知道原始示例中使用的“？REASON”是什么意思。我试过 ?ID 以为我在告诉它寻找一个 ID。这是错误的，还是不必要的？

谢谢！

-克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:19:07.903

好的，很好（而且确实很勇敢）想在纯 JS 中做到这一点。老实说，这是一种古怪但有趣的语言。实现目标的最简单方法是使用 ajax 调用，尽管这不是必需的。
查看您的代码，您的调用可能会正常工作，但您忽略了其中最重要的部分：`onreadystatechange`事件的回调

当您的脚本向服务器发送请求时，会检查该请求的状态。一旦服务器完成处理发送的请求并完成响应，readyState 应该是 4。（可以在[此处](http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml)找到更多信息）。
基本上，尝试将其添加到您的 ajax 对象：

```
function callDiv(id)
{
    var xmlHttpReq = createXMLHttpRequest();
    xmlHttpReq.onreadystatechange = function()
    {
        if (this.readyState === 4 && this.status === 200)
        {
            //this === xmlHttpReq, "this" can be tricky, it refers to the calling obj.
            console.log(this.responseText);//check your console, see what that tells you
        }
    };
    var url = "gallery.asp?ID=" + id;
    xmlHttpReq.open("GET", url, true);
    xmlHttpReq.send();
} 
```

就个人而言，鉴于您是 JS 新手，我还建议您以常规方式预加载图像：

```
var nextImg = document.createElement('img');
nextImg.src = 'images/nextImage.jpg';
nextImg.onload = function()
{
    //targetId
    document.getElementById('wherever').appendChild(this);//this === nextImg
}; 
```

最后一个场景创建一个新的 DOM 元素 img，设置源，以便加载图像，当加载完成时，有一个事件处理程序将新图像附加到任何容器元素（也可能是文档.body 元素）您的选择。
这里的好处是您不必与 AJAX 搏斗。它的异步性质可能很棘手。在小规模上，这也很容易实现和调试。缺点：维护是一场噩梦，并将所有功能转移到客户端。还有几个问题，但我有点生气和疲倦。[在这里阅读更多](http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317)。如果需要，我明天再看看这个。

哦，是的：欢迎来到 SO BTW。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:20:27.440

好的，看下面的代码，你在里面执行请求`callDiv`，结果进入`.foo`元素里面：

```
function callDiv(id) {
    var request;  // Store AJAX request

    // Here you verify browsers support, to create new Ajax request
    try { // Opera, Firefox and Safari support
        request = new XMLHttpRequest();
    } catch (e) { // IE support
        try {
            request = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                request = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
                // Hide error, something goes wrong
            }
        }
    }

    // Show result inside .foo div
    request.onreadystatechange = function() {
        if(request.readyState == 4) { // Success
            var element = document.getElementByClass('foo');
            element.innerHTML = request.responseText;
        }
    }

    // Here you send the request
    request.open("GET", "gallery.php?id=" + id, true);
    request.send(null); 
}

<div class='foo'><!-- HERE WILL SHOW THE AJAX RESULT --></div> 
```

# objective-c - 为什么我不能跳转到 UIPageView 中的特定页面？

> ID：11497281
> 
> 赞同：1
> 
> 时间：2012-07-16T01:54:43.347
> 
> 标签：objective-c, ios, uibutton, uipageviewcontroller

我正在使用 X-code 4.3.2。我创建了一个新的基于页面的应用程序项目。然后我在 dataViewController 类中创建一个 UIButton，以便在单击该按钮时跳转到特定页面。

这是我添加的简单代码。

```
 //Create a button in dataViewController.h
 @property (strong, nonatomic) IBOutlet UIButton *btn;

//Add button action
-(IBAction)jump:(id)sender{
    RootViewController *root = [[RootViewController alloc]init];
    [root jump2page];
} 
```

在 RootViewController 类中

```
-(void)jump2page
{
    DataViewController *targetViewController = [self.modelController viewControllerAtIndex:2 storyboard:self.storyboard];

    NSArray *viewControllers = [NSArray arrayWithObjects:targetViewController,nil];
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];
} 
```

当我点击一个按钮时，方法 jump2page 被调用。它应该转到三月的页面，但是当我点击它时没有任何反应

我是否忘记或错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:04:55.757

我在弄清楚如何进行页面跳转时也遇到了问题。我所做的一切对我来说都是死路一条，即使是聊天中建议的所有事情。使用您的方法，我能够看到对该函数的调用已经发生，并且它也从模态视图控制器中提取了数据。但它给了我一个空对象错误。当要设置视图时。所以我输入了一些更多的诊断信息来看看发生了什么，因为我已经把应该发生的事情拼凑起来了。我输入的所有数据都很好。问题是情节提要对象由于某种原因为空，这导致它无法从情节提要中加载项目，即使它知道要加载哪个项目，据它所知情节提要上没有任何内容，因此模态视图传回一个空对象。然后它又撞回了主要的。所以这导致我试图弄清楚为什么故事板对象为空。怎么早被dealloc'ed了？这是我的第一个问题，我想我会尝试制作它的副本，这样我们就可以从那里使用副本，但仍然没有骰子。然后一个想法在我们使用 alloc 和 init 的顶视图控制器中击中了我（感谢上帝），这就是您创建新对象的方式。难道不是创建一个链接回到实际的根控制器，该命令创建了第二个根控制器，然后创建了一个第二个模态控制器，该控制器偏向于程序对这些类类型具有的相同类模板，并且正在传递函数调用到那个。如果是这样，那么新的根视图控制器将没有第一个的情节提要。它也没有任何影响它的能力，因为它们实际上是独立的对象。所以继续这个假设，我意识到我因为无法使用你的方法而重新开始。但是另一位上帝灵光一现，如果我将指向实际根视图控制器的指针沿链向上发送到顶视图控制器并使用指向回调的指针会怎样？所以我试过了，你瞧，我终于让它工作了。

所以我最终做的是在顶部视图控制器中设置一个新属性 .h 类型的 id 像这样

```
@property (weak,nonatomic) id homebase; 
```

然后将其放入顶视图控制器 .m 文件中

```
@synthesize homebase; 
```

然后回到根视图控制器，我修改了 **viewdidload**和旋转观察器的处理程序，以便在它创建**DataViewController之后添加到这一行**

```
startingViewController.homebase=self; 
```

它将我在顶视图控制器中定义的属性设置为实际根视图控制器的地址。我做的最后一件事是修改按钮点击事件

```
- (IBAction)pushedbutton:(UIButton *)sender 
{
   if (homebase==nil)
   {
      NSLog(@"no homebase");
      return;
   }
   [homebase jumpto:1];
} 
```

现在我发现如果我在第一页上使用它（并将值设置为 1 以外的页面），那么它将跳转到该页面。如果我在任何其他页面上使用它，它会吐出“no homebse”，除非我旋转设备然后它会工作。

我尝试修改**didFinishAnimating**以查看是否可以在完成加载后将引用插入其中，因为在单击按钮之前不需要它，直到此函数运行后才会发生这种情况，但是我无法从那里访问该属性可以看到。

经过更多工作后，我发现这里的最后一步是修改**viewControllerAtIndex**以获取指针并存储它，并将其设置在 DataView 控制器上，然后再将其放回。然后当它被一个空指针调用时，它会使用它存储的那个。这样，在这两种类型的调用中，它都有要切换的指针，然后一切正常。即使您现在翻页并且不先旋转它。

# python - Python (django) 通用模块开发 - 在数据库中存储动态查询集？模型继承

> ID：11497286
> 
> 赞同：0
> 
> 时间：2012-07-16T01:55:38.883
> 
> 标签：python, django, database-design, model, downcast

我有一个有趣的设计决定要在我计划最终发布的 Python Django 模型的上下文中做出。

这些类对 ApprovalRequest 进行建模，它表示用户提出的问题/请求，可以由另一个用户组投票，也可以上诉，然后可以由“更高级别”组再次投票，等等。

我有什么相当于以下模型树：

*   ApprovalRequest（单个请求）
    *   用户请求操作
    *   行动类型* / 附加数据
*   ApprovalStage（可能是多个投票阶段，按时间顺序排列）
    *   相关的批准请求
    *   投票类型（简单多数，需要一票等）
    *   可以投票的用户*
*   ApprovalVote（单票，由单个选民投票）
    *   相关审批阶段

我的第一个问题与“动作类型”有关。因为我的意图是让它成为一个任何人都可以使用的可重用模块，所以我希望它在事件发生时发出信号。但是，此模型适用于许多事情 - 审核、用户提升、用户禁令上诉决定等。因此，需要某种“类型”参数。在 OOP 设计中解决此问题的经典方法是允许创建子类并具有自定义操作，这很好，但 Django（特别是）没有简单的方法从数据库中获取“正确”子类。例如，使用内置模型继承，将有一个主 ApprovalRequest db 表和 N 个附加 db 表，用于每个孩子的数据。

我最初的想法是创建一个子类“registry”，它会为我的类型字段分配一个唯一的 id，这样当我需要采取特定类型的操作时，我可以可靠地向下转换为注册类型。这将迫使子类为其子类选择一个（项目范围的）id，并且通常看起来不优雅。

我的第二个问题与“可以投票的用户”有关。我希望这些 ApprovalRequest 对象中的大多数实际上是由代码创建的，而不是通过例如 Django 管理员。假设发生以下动作：

1.  用户请求促销（或其他操作）
2.  创建 ApprovalRequest 对象，指定匹配某个代码相关组（即复杂查询集）的所有用户都可以投票
3.  时间过去了，没有对 ApprovalRequest 采取任何行动
4.  十个新用户现在满足复杂查询集的条件（也就是说，如果现在创建 ApprovalRequest，这些用户也将成为投票组的一部分）
5.  我希望这些新用户能够投票

问题或多或少是，我如何以安全的方式存储这个复杂的查询集？我可以根据类型将这项工作委托给子类，但这似乎不优雅。我可以尝试[以某种方式将查询集存储在数据库中](https://github.com/CBWhiz/django_qspickle/blob/master/qspickle/__init__.py)，但这似乎有点 hacky。选择的标准路线是什么？

感谢您对这些问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:50:32.957

Django 中已经有为模型分配唯一 ID 的机制：[https ://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)

# java - 使用 FileInputStream 时出现 Java UnsupportedAudioFileException

> ID：11497291
> 
> 赞同：2
> 
> 时间：2012-07-16T01:56:16.560
> 
> 标签：java, audio, byte, wav, javasound

尝试使用 Java 播放声音时遇到问题；如果我使用

```
AudioInputStream soundIn = AudioSystem.getAudioInputStream(new File("./sound.wav")); 
```

要获取 AudioInputStream，它可以正常工作并且文件可以正确播放。但是，如果我使用

```
AudioInputStream soundIn = AudioSystem.getAudioInputStream(new BufferedInputStream(new FileInputStream("./sound.wav"))); 
```

我明白了

```
javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input stream 
```

我想要做的是播放我从麦克风录制的音频，并将它保存为内存中字节数组中的 WAV 文件，但我无法播放它。但是，如果我将它保存到文件并直接使用 File 对象，它就会播放。但是，如果我使用任何类型的 InputStream，它会因该异常而失败，包括当我使用此代码时：

```
AudioInputStream soundIn = AudioSystem.getAudioInputStream(new BufferedInputStream(new ByteArrayInputStream(recorder.getLastRecording()))); 
```

其中 recorder.getLastRecording() 返回一个字节数组。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:14:14.643

```
// lose the BufferedInputStream
AudioInputStream soundIn = AudioSystem.getAudioInputStream(
    new ByteArrayInputStream(recorder.getLastRecording())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:52:29.847

这个错误实际上以各种形式出现了无数次。

我认为正在发生的事情是，每当您尝试使用 InputStream 或使用需要 InputStream 作为中间步骤之一的代码时，Java 都会测试文件是否作为 InputStream 有效：它是否支持“标记”就是这样的测试，以及文件是否“可重置”。

请注意，您的错误消息表明它无法从 InputStream 获取有效文件。这可能是因为 Java 无法对文件执行一个或其他命令，因此不会认为它是有效的 InputStream。

如果您从文件位置或更好的 URL（恕我直言）打开文件，则 AudioSystem.getAudioInputStream 不会通过测试文件是否可以用作有效 InputStream 的中间步骤。

实际上，下面的 javadef 非常清楚地支持我所说的。

[http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream(java.io.InputStream](http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream(java.io.InputStream) )

请注意，如果您比较“getAudioInputStream”的各种形式，您会发现与 URL 和 File 参数版本相比，InputStream 参数版本中的文件有哪些额外要求。

我最喜欢使用 URL，因为 URL 可以很好地定位 jar 中的文件，并且可以根据代码或类的根目录指定资源。

# javascript - 覆盖集合的获取

> ID：11497292
> 
> 赞同：0
> 
> 时间：2012-07-16T01:56:25.160
> 
> 标签：javascript, backbone.js

当我创建一个新集合、获取响应并覆盖解析时，我看到集合中记录了模型数组，但在获取返回后我无法访问它。是因为我没有在`fetch`方法中正确指定一些东西吗？

```
class MyCollection extends Backbone.Collection

      model: MyModel

      fetch: () ->

        $.ajax
          type: 'GET'
          url: '/customurl'
          success: (data) =>
            @parse data

      parse: (resp) ->

        if !resp
          return []

        things = []

        # parse that shit and things.push new MyModel()

        console.log 'things: ' + JSON.stringify things # this logs correctly

        things

window.myCollection = new MyCollection()
window.myCollection.fetch()

# wait some time, see it logged inside collection parse method...
console.log JSON.stringify window.myCollection # logs as [] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:14:04.070

尝试`async: false`作为选项传递给 fetch 方法：

`window.myCollection.fetch({async: false})`

您可能看不到任何内容，`console.log`因为它是在结果返回*之前被调用的。*`parse`仅在结果返回*后调用。***您最好在函数中执行任何自定义逻辑`foo()`，**然后在 fetch 发生时使用更新的集合调用该函数：

`window.myCollection.on("reset", foo)`

您可以定义函数，例如：`foo(updatedCollection)`并对集合执行任何操作。这种方法更接近于 Backbone 的事件驱动强调。

另外，作为旁注，只要您在集合中[指定`url: '/customurl'`为属性](http://backbonejs.org/#Collection-url)，就可以摆脱对该`fetch`方法的覆盖。默认情况下，主干将使用 ，`GET`并且默认情况下会将成功的结果发送到`parse`。

只是一个建议。希望以上工作。

# android - AutoCompleteTextView 下拉菜单上的样式

> ID：11497295
> 
> 赞同：3
> 
> 时间：2012-07-16T01:57:25.690
> 
> 标签：android, autocompletetextview

一段时间以来，我一直在尝试为自动完成设置下拉菜单的样式。目前它看起来像这样：

![在此处输入图像描述](../Images/21e9fe3386b3a2af16a8c09ac09e7e30.png)

绿色区域是带有备选方案的下拉菜单。我想让那个盒子更小，因为我的圆角矩形现在看起来不太好。

我如何实现这一目标？到目前为止，我只能调整其中的每一行..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T02:03:36.313

把问题放在这里 5 分钟后发现自己。我会继续为可能遇到此问题的人提出问题。

您可以在创建自动完成文本视图时简单地放置下拉属性。

```
android:dropDownWidth="yourWidth" 
```

找不到用于设置下拉背景资源的任何 xml 属性，但编程方式工作正常：

```
autoTextView.setDropDownBackgroundDrawable(this.getResources().getDrawable(R.drawable.rounded_rectangle)); 
```

通过这种方式，您可以使用自己的可绘制对象定义下拉列表的外观。如果您想使用资源中的 xml 更改它，这是一种方法：

```
android:completionHintView="@layout/your_layout" 
```

# unit-testing - node.js 异步子进程测试

> ID：11497298
> 
> 赞同：2
> 
> 时间：2012-07-16T01:57:30.497
> 
> 标签：unit-testing, node.js, qunit, gnupg

我在 node.js 中迈出了第一步，想测试我的代码，但我被卡住了。我使用[node-qunit](https://github.com/kof/node-qunit)库作为测试工具。

这是我的代码：

```
var spawn = require('child_process').spawn;
var ok = require('assert').ok;

function _call_gpg(stdin_pass, passphrase, decrypt, callback) {
    ok(stdin_pass);
    ok(passphrase);

    var buffers = []; 
    var gpg = spawn('gpg', ['--passphrase', passphrase, decrypt ? '-d' : '-c', '--no-use-agent']);

    gpg.stdout.on('data', function(data) {
        buffers.push(data);
    }); 

    gpg.on('exit', function(return_code) {
        callback(return_code === 0 ? Buffer.concat(buffers) : undefined);
    }); 

    gpg.stdin.write(stdin_pass);
    gpg.stdin.end();
}

function encrypt(string, passphrase, callback) {
    ok(typeof callback === 'function');

    _call_gpg(string, passphrase, false, function(buf) {
        callback(buf && buf.toString('base64'));
    }); 
}

function decrypt(encoded_string, passphrase, callback) {
    ok(typeof callback === 'function');

    raw_encoded_string = new Buffer(encoded_string, 'base64');
    _call_gpg(raw_encoded_string, passphrase, true, function(buf) {
        callback(buf && buf.toString('utf8'));
    }); 
}

exports.encrypt = encrypt;
exports.decrypt = decrypt; 
```

当我从交互式控制台调用此函数时，它们按预期工作。但是当我尝试使用下面的代码异步测试它们时，第二个`strictEqual`有时会起作用，有时会失败。

```
asyncTest('encrypting and decrypting', function() {

    encrypt('foo', 'pass', function(encoded_string) {
        decrypt(encoded_string, 'pass', function(decoded_string) {
            strictEqual('foo', decoded_string, 'encryption and decryption work');
        });
    });

    decrypt('jA0EAwMCNiwPDFiMxvFgyRmB4axFyanuy2DZmB0ZIUfpXcASCKT8pwFm', 'pass', function(decoded_string) {
        strictEqual('foo', decoded_string, 'only decryption works');
    });

    setTimeout(function() { start(); }, 10000);
}); 
```

看起来问题出在异步上，因为当我单独测试这个函数时，它们都可以工作。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T21:04:49.403

使用惰性求值代替`setTimeout`：

```
asyncTest('encrypting and decrypting', function() {

encrypt('foo', 'pass', function(encoded_string) 
   {
   decrypt(encoded_string, 'pass', function(decoded_string) 
     {
     /* Call start() as part of the output */
     strictEqual('foo', decoded_string, 'encryption and decryption work' && start() );
     });
   });

decrypt('jA0EAwMCNiwPDFiMxvFgyRmB4axFyanuy2DZmB0ZIUfpXcASCKT8pwFm', 'pass', function(decoded_string) 
    {
    /* Do not call start() */
    strictEqual('foo', decoded_string, 'only decryption works');
    });

}); 
```

# php - jquery 检查或匹配 url 字符串中的文本？

> ID：11497306
> 
> 赞同：-1
> 
> 时间：2012-07-16T01:59:08.243
> 
> 标签：php, jquery, regex, preg-match, match

有没有办法在 url 字符串中获取特定的文本字符串？

例子：

我想看看这个网址是否有 clear.jpg 或只是简单的词 clear

如果`http://www.somesite.com/clear.jpg`或`http://www.clearsomething.com/`

我想看看这些 url 是否可以通过检查是否有明确的内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T02:03:34.137

使用 javascript 函数 substr() 检查它是否以“jpg”结尾。喜欢：

```
if (url.substr(-3) == "jpg") {} 
```

或者，如果您想检查字符串中的存在：

```
var pattern = /clear.jpg/g
pattern.test(url); 
```

# facebook - 可以安排 Facebook 问题吗？

> ID：11497308
> 
> 赞同：0
> 
> 时间：2012-07-16T01:59:21.243
> 
> 标签：facebook

是否可以安排发布 Facebook 问题的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:08:03.137

是的，您可以，例如使用 PHP。以下是有关发布问题的信息：http: [//developers.facebook.com/docs/reference/api/question/](http://developers.facebook.com/docs/reference/api/question/)

您可以编写一个发布问题的 PHP 文件并`cron online service`使用 Google 查找免费的。Cron 服务允许您在特定日期和时间获取特定页面/脚本，它们甚至可以重复此操作。您只需输入脚本的日期和 URL。

# ocr - 是否有一个 OCR 可以将它看到的内容与我给它的可能单词列表进行比较？

> ID：11497318
> 
> 赞同：1
> 
> 时间：2012-07-16T02:01:41.403
> 
> 标签：ocr

我正在寻找一种开源 OCR，但我可以告诉程序我希望它查找哪些字母。例如，如果只有字母和逗号是可能的，那么我不希望 OCR 浪费资源来查找它是否是数字。另外，我希望 OCR 输出它所看到的“认为”的可能性。例如，如果有一个“I”，那么 OCR 可能会认为它是一个小写的“L”，但它也应该有一个紧随其后的“I”。基本上，我希望 OCR 给我一个可能性列表，也许还有一个数字来表明它有多确定。例如，它可能会说“l”：55%，“I”：40%，其他：5%。

另一件事是我会知道字母是什么文本类型，即 Ariel，因此让 OCR 比较和对比不同类型的文本没有意义。

基本上，我正在编写一个只存在一定数量可能性的程序。例如，假设我正在使用 OCR 从元素周期表中读取元素。只有有限数量的元素，所以 OCR 应该可以猜到“HeIeun”实际上是“Helium”。

有没有这样的事情，或者我必须自己做大量的编码工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:17:39.813

你可能想看看google开发的开源项目[tesseract](http://code.google.com/p/tesseract-ocr/)，它给出了非常好的结果并且对OCR有很多支持。

为了提供您自己的单词列表来识别文本，只需将 tessdata/eng.user-words 替换为您自己的单词列表，格式相同 - UTF8 文本，每行一个单词。

要获得非常高的准确性，请检查[这个](https://stackoverflow.com/questions/11301343/how-do-i-improve-the-accuracy-of-the-ocr-text-from-tesseract)问题。

# android - 如何查询android设备硬件信息

> ID：11497319
> 
> 赞同：1
> 
> 时间：2012-07-16T02:02:00.680
> 
> 标签：android, hardware, android-ndk

我如何获取 android 设备硬件信息，如 CPU 拱门、速度、霓虹灯、GPU、名称、制造商、RAM 大小。我希望有一种方法可以在本地使用 ndk 来做到这一点，但如果只能通过 java 代码来实现，而不是如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:10:12.373

您需要根据您的要求使用[Build](http://developer.android.com/reference/android/os/Build.html)类。Build 类将为您提供 Android 版本、显示、制造等信息。

```
Build.BOARD
Build.BRAND
Build.CPU_ABI
Build.DEVICE
Build.DISPLAY
Build.HOST
Build.ID
Build.MANUFACTURER
Build.MODEL
Build.PRODUCT
Build.TAGS
Build.TYPE
Build.USER 
```

另请访问此[示例](http://www.pocketmagic.net/?p=1662)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:20:39.390

对于 android 方法，您可以从导入 android.os.Build 开始，然后使用库中的众多常量之一。本质上，这使用了 build.prop 文件中的数据。因此对于 ndk，您可以尝试读取 /system/build.prop 文件。

请注意，并非所有制造商都允许您读取此值。

检查这个网站：http: [//developer.android.com/reference/android/os/Build.html](http://developer.android.com/reference/android/os/Build.html)

编辑：像下面的答案......

# javascript - JavaScript 设计模式，一个函数被覆盖

> ID：11497320
> 
> 赞同：0
> 
> 时间：2012-07-16T02:02:26.430
> 
> 标签：javascript, jquery

我不熟悉js设计模式。现在我遇到了一个问题。希望你们能帮帮我。先谢谢了。

代码在这里：http: [//jsfiddle.net/nNdna/](http://jsfiddle.net/nNdna/) 实时页面在这里：[http ://www.sumsy.com/demos/socialFeeds/](http://www.sumsy.com/demos/socialFeeds/)

请转到实时页面并检查您的调试器。您应该会在日志中看到“pinterest init”。但我期待“twitter init”会出现在日志中，因为我正在从主函数调用 Twitter.init。

我的设置是：有 2 个匿名自执行函数，里面都有 init 函数

```
var Twitter = (function($, window){ ... init = function ... 
var Pinterest = (function($, window){ ... init = function ... 
```

然后从我的主要功能中，我调用了 Twitter.init(user_twitter_options);

但似乎 Pinterest.init 实际上被调用了。看起来 Pinterest.init 覆盖了 Twitter.init 函数。

谁能告诉我出了什么问题？我不应该有 2 个匿名自执行功能吗？

先谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:21:12.717

小提琴中的代码有很多问题。

两者`Twitter`和`Pinterest`都被分配给调用匿名函数的结果，这些函数返回`this`where`this`将等于，`window`因为您实际上并没有创建新对象`new`或以其他方式做任何事情来设置`this`某些东西。

在您分配的两个匿名函数中，`init = ...`没有声明它`var`是`init`全局变量。因此，该部分中的代码`Pinterest`将覆盖该部分中`init`最初创建的全局`Twitter`。

鉴于全局变量本质上是`window`对象的属性，`Twitter`并且`Pinterest`都被分配给`window`这意味着调用两者`Twitter.init()`和`Pinterest.init()`与调用相同`window.init()`。所以这就是为什么他们都做同样的事情。

不幸的是，您的代码太长，我无法提供工作版本，所以我建议您阅读部分或全部这些参考资料：

*   [使用对象 - MDN](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)
*   [深入了解 JavaScript 模块模式 - 足够好](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth/)
*   [JavaScript 闭包和模块模式](http://www.joezimjs.com/javascript/javascript-closures-and-the-module-pattern/)
*   [JavaScript 模块模式的一种变体](http://web20boom.com/web/blog/?a=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:07:31.307

你需要`var`在前面添加`init`，否则你把它放在全局范围内。这意味着 init 将等于最后一个分配，在这种情况下是 Pinterest 版本。

# php - 在 cakephp 的 xml 帮助器中找不到 xml 类

> ID：11497321
> 
> 赞同：3
> 
> 时间：2012-07-16T02:02:37.553
> 
> 标签：php, xml, cakephp

我收到此错误：

```
Fatal error: Class 'Xml' not found in C:\xampp\htdocs\wifidrivescanportal\app\View\Helper\XmlHelper.php on line 88 
```

我所做的是通过以下代码行在我的 XML 助手中导入了库 XML 类：

XmlHelper.php

```
App::import('Core', array('Xml', 'Set')); 
```

但我仍然得到同样的错误。我将我的 xml 库存储在此路径中：

```
C:\xampp\htdocs\wifidrivescanportal\app\Lib\xml.php 
```

顺便说一句，在我的 xml.php 中，我检查了它是否存在这个类：

```
class XmlNode extends Object {
// ....
} 
```

好吧，长话短说，我需要在 cakephp 中使用 xml 的“序列化”。不知道如果我一开始就做对了。感谢您的帮助。

** 编辑 **

我还尝试在我的控制器中导入 XML：

```
App::import('Xml'); 
```

仍然处于同样的境地

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T11:24:06.023

添加`App::uses('Xml', 'Utility');`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:41:58.960

在您的 XmlHelper 中尝试以下操作：

```
App::uses('Xml', 'Lib'); 
```

# php - 使用 PHP 保存包含输入标签值的 HTML 文件

> ID：11497325
> 
> 赞同：0
> 
> 时间：2012-07-16T02:03:28.957
> 
> 标签：php, html, file, save, using

如何将输入标签（文本、收音机、文本区域等）的所有值保存到 HTML 文件中？当用户设置输入标签的值并单击保存按钮时，代码会将当前网页保存为 HTML 文件并包含输入标签的值。我尝试使用以下代码，但没有奏效。我只得到一个带有空输入标签的 HTML 文件。

```
<?php
ob_start();
?>
<!DOCTYPE HTML>
<head>
<title>Test</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){

$('#full_name').change(function(){
     $('#full_name').attr('value',$(this).val());
});
$('#comment').change(function(){
      $('#comment').html($(this).val());
});

})
</script>
</head>
<body>
<form action="handle_form.php" method="post">
<input name="full_name" id="name"/>
<textarea id="comment"></textarea>
</form>
</body>
</html>
<?php
$content = ob_get_contents();
ob_end_flush();
file_put_contents('test.html',$content);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:33:38.750

PHP 代码在用户输入任何输入之前在服务器端运行。为了保存用户输入的数据，您应该`submit`（使用 HTML `form`）将其保存到您的服务器，或者用于`AJAX`更新您的服务器。

# php - 为 png 文件设置 R 图形的大小

> ID：11497333
> 
> 赞同：1
> 
> 时间：2012-07-16T02:04:49.230
> 
> 标签：php, r

我正在尝试使用 R 来构建数据可视化 Web 应用程序的原型。我的计划是创建一个 png 文件，该文件现在将插入到页面中。我的问题是我找不到控制由 R 创建的图形的实际大小的方法。这是我的 html 文件：

```
<!DOCTYPE html>
<html>
    <head>...</head>
    <body>
        <div id="viz1">
            <?php
            exec('Rscript index.r');
            echo ('<img src="temp.png" />');
            unlink('temp2.png');
            ?>
        </div>
    </body>
</html> 
```

这是我用于创建直方图的简单 R 脚本：

```
png(
  filename = 'temp2.png'
  , width = 200
  , height = 200
  , units = 'px'
  , res = NA
)

hist(rnorm(100), col = 'red')
dev.off() 
```

png() 函数指定的宽度和高度不会改变图形的大小。

可能重复，但有些不同：[如何使用 R 更改 png 文件的大小](https://stackoverflow.com/questions/6190064/how-can-i-change-the-size-of-a-png-file-with-r)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:15:12.313

正如 math.coffee 指出的那样，我实际上是在问*错误*的问题。png 文件的大小已创建。只是 HTML 中 img 元素的大小导致了我的问题。

快速破解解决了我的问题：

```
<img src="temp2.png" style="width: 200px; height: 200px" /> 
```

# ios - 如何将展平的对象序列化回服务器，在 RestKit 中未展平

> ID：11497335
> 
> 赞同：2
> 
> 时间：2012-07-16T02:05:02.950
> 
> 标签：ios, restkit

使用 RestKit 0.10.1，我提供了类似于这种 json 格式的对象：

```
{"objects": [
    {"owner": 1, 
     "_id": 823, 
     "data": {
         "diam": 5.0, 
         "plant_date": "10/02/2008"}
    }, 
     ...   ] } 
```

在客户端，我不需要子对象或关系，所以我将对象的属性展平：

```
[myMapping mapKeyPathsToAttibutes: 
    @"_id", @"id", 
    @"owner", @"owner", 
    @"data.diam", @"diam", //here is what I mean by flatten; notice data.diam -> diam
    @"data.plant_date", @"plant_date", nil]; 
```

我读取这些数据没有问题，但是当我想序列化它时，只有顶级属性被发送到服务器。当我序列化时，这是服务器得到的：

```
{"_id":0,"owner":1} 
```

请注意，我已经正确（我认为）使用上述的 inverseMapping 注册了序列化映射：

```
[objectManager.mappingProvider setSerializationMapping:[myMapping inverseMapping] forClass:[MyClass class]]; 
```

**当**我像这样发布对象时：

```
myObject = [MyClass object];
myObject.diam = [NSNumber numberWithInt:5];
myObject.plant_date = myDate;

[[RKObjectManager sharedManager] postObject:myObject delegate:self]; 
```

**我想要**一个完整的、不扁平的结构：

```
{"_id":0,"owner":1, "data": {"diam": 5.0, "plant_date": "10/02/2008"} } 
```

如何使用 RestKit 实现将注册对象映射到服务器的键路径（即“data.diam”）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:04:58.923

这看起来像是 RestKit 中的一个错误。您可以使用以下代码段重现它：

```
RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelTrace);

NSDictionary* src = [NSDictionary dictionaryWithObjectsAndKeys: @"cat", @"animal", nil];
NSMutableDictionary* dst = [NSMutableDictionary dictionary];

RKObjectMapping* mapping = [RKObjectMapping mappingForClass: [NSDictionary class]];
[mapping mapKeyPath: @"type.animal" toAttribute: @"animal"];

RKObjectMappingOperation* op = [[RKObjectMappingOperation alloc] initWithSourceObject: src
                                                                    destinationObject: dst 
                                                                              mapping: [mapping inverseMapping]];

NSError* error = nil;
[op performMapping: &error]; 
```

如果您查看日志，您将看到这一行：

> restkit.object_mapping:RKObjectMappingOperation.m:258 目标对象 {} 拒绝 keyPath type.animal 的属性值 cat。跳过...

失败的方法是 -validateValue:forKeyPath:error: 因为关系组件不存在。我建议您在 RestKit github 上打开错误/问题报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T02:01:41.050

请注意，此错误已在 RestKit 中修复，以便在 0.20 中发布。查看变更集@ [https://github.com/RestKit/RestKit/commit/64e9c7cb6d04dd8750e9f663fc998bbe738945e9](https://github.com/RestKit/RestKit/commit/64e9c7cb6d04dd8750e9f663fc998bbe738945e9)

# c - C函数输入字符串

> ID：11497338
> 
> 赞同：2
> 
> 时间：2012-07-16T02:07:25.580
> 
> 标签：c, string, function

我想知道为什么下面的代码如下所示。我第一次打印变量“account_name”时它工作正常。第二次和第三次，它根本不起作用，而是打印乱码。我是C的初学者。

```
const char * get_account_name(){

    char loc_account_name[255];

    printf ("Please enter the ledger Account name: ");
    scanf ("%[^\n]", &loc_account_name);
    fflush(stdin);
    printf ("\n");
    return ( loc_account_name );
}

void main (void)
{

    /* Declare variables. We use the predefined "MAX_ENTRIES" definition to define how large the arrays will be */

    float   credits[MAX_ENTRIES], debits [MAX_ENTRIES], starting_balance, ending_balance;
    int     debit_amount, credit_amount, x;
    char    * account_name;

    printf ("Welcome to the Sears Ledger System\n\n");

    /* Prompt the user to enter the name of the account, we allow for up to 255 characters and account for names with spaces as well */ 
    account_name = get_account_name();
    printf("%s",account_name);
    printf("%s",account_name);
    printf("%s",account_name);

} /* end main*/ 
```

***更新

我已经删除了 get_account_name 函数的 scanf 中的 & 符号。然后我发现它会多次打印出正确的值，但是此后程序永远挂起。不幸的是，我被迫使用的编译器没有调试器，所以我仍然对正在发生的事情感到困惑。

```
char * get_account_name(){

    char * loc_account_name;
    printf ("Please enter the ledger Account name: ");
    scanf ("%[^\n]", loc_account_name);
    fflush(stdin);
    printf ("\n");

    return loc_account_name;

} 
```

***** *更新2

```
char *get_account_name() {

    char loc_account_name[255];
    char *r;

    printf ("Please enter the ledger Account name: ");
    scanf ("%[^\n]", &loc_account_name);
    fflush(stdin);
    printf("%s\n", loc_account_name);

    *r = malloc(strlen(loc_account_name) + 1);
    strcpy(r, loc_account_name);
    return r;
}

void main (void)
{

    char     * account_name;

    /* Prompt the user to enter the name of the account, we allow for up to 255 characters and account for names with spaces as well */ 
    account_name = get_account_name();
    printf("%s\n", account_name);
    printf("%s\n", account_name);
    printf("%s\n", account_name);
    free(account_name);

} /* end main*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T02:08:34.343

您正在从 中返回局部变量的`loc_account_name`地址`get_account_name()`。函数返回后，此内存*不存在。*（嗯，它看起来在短时间内仍然包含相同的数据，但不是第二次或第三次使用它。）

要解决此问题，您可以：

*   为函数内的字符串分配空间（使用`malloc()`或类似）`get_account_name()`，并返回指向该空间的指针。调用者将负责释放内存。

    ```
    char *get_account_name() {
        char loc_account_name[255];
        // get user input into loc_account_name
        char *r = malloc(strlen(loc_account_name) + 1);
        strcpy(r, loc_account_name);
        return r;
    }

    account_name = get_account_name();
    // use account_name
    free(account_name); 
    ```

    请注意，如果您的运行时库有其中之一，您可以使用`strdup()`而不是`malloc()`/ 。`strcpy()`

*   让调用者为字符串的最大长度分配一些空间，并将该缓冲区（和缓冲区长度）传递给`get_account_name()`函数以供其填充。

    ```
    void get_account_name(char *buffer, int buffer_size) {
        // get user input into buffer
        // but make sure the user can't type more than buffer_size characters!
    }

    char account_name[255];
    get_account_name(account_name, sizeof(account_name));
    // use account_name 
    ```

从函数返回字符串在 C 语言中既尴尬又烦人。这就是为什么大多数现代语言（包括 C++）都有更好的内置方法来处理字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:29:31.277

在单线程环境中，您可以简单地使用静态缓冲区，例如：

```
const char *get_account_name(void) {

    static char loc_account_name[255];
    int c;

    printf ("Please enter the ledger Account name: ");
    scanf ("%254[^\n]", loc_account_name);
    while( (c=getchar())!=EOF && c!='\n' );
    printf("%s\n", loc_account_name);

    return loc_account_name;
} 
```

要清除输入缓冲区，您应该**使用**符合标准的方式。

# ruby-on-rails - Ruby 日期数学：为什么要提前一天

> ID：11497345
> 
> 赞同：4
> 
> 时间：2012-07-16T02:08:16.600
> 
> 标签：ruby-on-rails, ruby, datetime

`Date`我试图找出一个对象是多少天前。

```
(Date.today - start_time).to_i 
```

当我这样做时，`(Date.today - 30.days.ago.to_date).to_i`我得到`29`. 想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T02:41:05.357

听起来像是一个四舍五入的问题？`to_i`不适合进行舍入，因为它会截断浮点数或有理数。

因此，如果您的表达式返回 29.999999，基本上是 30，但您`to_i`在上面运行，您最终会得到 29。

你应该做的是 use `round`，它会进行适当的数学舍入：

```
(Date.today - 30.days.ago.to_date).round
=> 30 
```

**编辑**

其实我错了。原因是 Rails`ago`方法返回 UTC 时区的时间，而不是本地时间。而`Date.today`似乎在当地时间返回。

因此，如果您（不）幸运的话，如果当地时间和 UTC 时差恰好穿过午夜，您将获得 1 天的偏移量。

正确的解决方法是调用将返回的时间转换为本地时区`localtime`：`ago`

```
30.days.ago
=> Sat, 16 Jun 2012 03:17:44 UTC +00:00

30.days.ago.localtime
=> Sat Jun 16 06:21:47 +0300 2012

(Date.today - 30.days.ago.localtime.to_date).to_i
=> 30 
```

# xml - 错误 #1034：类型强制失败：无法将“”转换为数组

> ID：11497348
> 
> 赞同：0
> 
> 时间：2012-07-16T02:08:56.770
> 
> 标签：xml, arrays, actionscript-3, flash

难以从 XML 中获取数据并将其放入数组中。

在我的文档开头，我的数组如下所示：

```
// MC's in library with exported for AS with class names "page1", "page2", etc.
var pageArray:Array = [new page1(), new page2(), new page3(), new page4(), new page5()]; 
```

当我浏览数组时，这一切都很好。

然后，当我尝试用来自 MovieClip 的 XML 文件中的新数组替换该数组时，我的问题就来了。

```
/..xml details etc../
var pages_xml:String = xmlData.account.(@code == String(codeField.text)).pages;
MovieClip(root).pageArray = pages_xml; 
```

我的 XML 中的一行示例如下所示。

```
<account code="1"><accountName>Account1</accountName><pages>new page1(), new page2()</pages></account> 
```

所以从我上面的例子中你可以看到我只是想用 new page1(), new page2() 替换new **page1(), new page2(), new page3** **()** 但是这样做会导致这个错误：

> TypeError：错误 #1034：类型强制失败：无法将“new page1(), new page2()”转换为数组。

我知道最好的方法可能是拼接或其他方式，但数组稍后会变得混乱，我可能会超过 50 页（每个帐户代码的页面选择不同）。

将不胜感激任何关于我能做什么或我做错了什么的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T02:12:02.917

您做错了什么是获取一个字符串并将其分配为一个数组...相反，您似乎想根据字符串创建类的实例，因为您说您必须解析字符串然后创建新实例使用类似的东西

```
var parsedString:Array = pages_xml.split(",");
MovieClip(root).pageArray=[];
for(var i:int=0;i<parsedString.length;i++)
{
    var clazz:Class = getDefinitionByName(parsedString[i]) as Class;
    MovieClip(root).pageArray.push(new clazz());
} 
```

# c - c 通过前向声明相互包含

> ID：11497350
> 
> 赞同：0
> 
> 时间：2012-07-16T02:09:37.953
> 
> 标签：c

反编译TestApplication_Program.h

```
#ifndef _DecompileTestApplication_Program_
#define _DecompileTestApplication_Program_
struct DecompileTestApplication_MyAnotherProgram;
#include <stdio.h>
typedef struct {
    //Variables
    int ind;
    int a;
    int b;
    int __refs__;
} DecompileTestApplication_Program;
void DecompileTestApplication_Program_Plan( DecompileTestApplication_MyAnotherProgram* );
//error: expected ')' before '*' token
#endif 
```

反编译TestApplication_MyAnotherProgram.h

```
#ifndef _DecompileTestApplication_MyAnotherProgram_
#define _DecompileTestApplication_MyAnotherProgram_
struct DecompileTestApplication_Program;
#include <stdio.h>
typedef struct {
    //Variables
    DecompileTestApplication_Program* program;
    int __refs__;
} DecompileTestApplication_MyAnotherProgram;
#endif 
```

这又是我对 C 反编译器的 IL（C#\VB 编译代码）。我尝试了几种方法来做到这一点，但没有得到任何成功的编译。顺便说一句，我使用 Dev-Cpp 用原始 C 编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:21:51.607

在 C 中，使用标签声明结构类型不会将裸标签声明为类型（与 C++ 不同）。你所要做的：

```
typedef struct DecompileTestApplication_MyAnotherProgram DecompileTestApplication_MyAnotherProgram; 
```

如果没有水平滚动条，这不适合 SO 上的一行。

或者，您必须`struct`每次都为标签添加前缀：

```
void DecompileTestApplication_Program_Plan(struct DecompileTestApplication_MyAnotherProgram*); 
```

* * *

## 扩展答案

除了确保单个单词是`struct`using的别名`typedef`外，您还必须确保每种类型只有一个`typedef`。

作为旁注，您的标头保护名称侵入了为实现保留的名称空间（这意味着，对于编写 C 编译器的人）。不要那样做。一般不要使用以下划线开头的名称，尤其不要使用以下划线或一个下划线和一个大写字母开头的名称。

在上下文中，这意味着：

### 反编译TestApplication_Program.h

```
#ifndef DecompileTestApplication_Program_header
#define DecompileTestApplication_Program_header
typedef struct DecompileTestApplication_MyAnotherProgram DecompileTestApplication_MyAnotherProgram;
typedef struct DecompileTestApplication_Program DecompileTestApplication_Program;
struct DecompileTestApplication_Program
{
    //Variables
    int ind;
    int a;
    int b;
    int __refs__;  // This is not safe either!
};
// Why is this function declared here and not in the other header?
void DecompileTestApplication_Program_Plan(DecompileTestApplication_MyAnotherProgram *prog);
#endif 
```

### 反编译TestApplication_MyAnotherProgram.h

```
#ifndef DecompileTestApplication_MyAnotherProgram_header
#define DecompileTestApplication_MyAnotherProgram_header
#include "DecompileTestApplication_Program.h"
struct DecompileTestApplication_MyAnotherProgram
{
    //Variables
    DecompileTestApplication_Program* program;
    int __refs__;  // Dangerous
};
#endif 
```

显然不需要标头`<stdio.h>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:25:18.963

这是 C，不是 C++。声明/定义结构不会创建新的类型名称。因此，您在第一个文件中的函数声明应该是

```
void DecompileTestApplication_Program_Plan(struct DecompileTestApplication_MyAnotherProgram); 
```

或者你应该使用 typedef：

```
typedef struct DecompileTestApplication_MyAnotherProgram DecompileTestApplication_MyAnotherProgram; 
```

在这种情况下，您必须省略`typedef`第二个文件中的关键字，只留下

```
struct XXX.... {
}; 
```

# javascript - 添加并应用带有按钮/链接的新 CSS 样式表

> ID：11497354
> 
> 赞同：2
> 
> 时间：2012-07-16T02:10:36.257
> 
> 标签：javascript, html, css

我有一个浮动在我的页面中的项目（div）画廊，我的主 CSS 文档允许三个 DIVS 在开始填充下一行之前并排出现（我在我的主 CSS 中定义了宽度）。现在我正在尝试创建一个允许五个 DIVS 并排出现的链接。我创建了另一个 CSS 文档（我已将其包含在主 CSS 下方），它将不同的宽度应用于 DIVS，并允许更多并排显示。

我正在寻找的是一个 JS 函数，它允许我在 3 个 DIVS 和 5 个 DIVS 之间切换，例如“放大/缩小”按钮。但是，就我而言，这不仅仅是改变一个类的宽度的问题。该按钮还需要在其中隐藏其他 DIVS，更改字体大小等。我已经弄清楚了 CSS，它可以工作，我只是在寻找一种使用我的函数加载和应用/取消应用 CSS 文档的方法可以使用链接标签 (a) 激活。

我的JS知识很少，所以如果你能帮我一个功能，你能告诉我如何使用HTML创建/激活按钮吗？（我需要知道在*a href="*后面放什么）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:21:31.600

试试这个代码：

**JS：**

```
function init() {
    document.getElementById('toggle-button').addEventListener('click', toggle_style, false);
}
function toggle_style() {
    if(document.getElementById('dynamic-style').href == window.location.href.substring(0, window.location.href.lastIndexOf('/')) + '/style1.css') {
        document.getElementById('dynamic-style').href = 'style2.css';
    } else {
        document.getElementById('dynamic-style').href = 'style1.css';
    }
}
window.addEventListener('load', init, false); 
```

**HTML：**

```
<input id="toggle-button" type="button" value="Toggle Style" /> 
```

要查看示例和完整源代码，请参阅[http://shaquin.tk/experiments/togglestyle.html](http://shaquin.tk/experiments/togglestyle.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T09:09:12.670

```
$(document).ready(function () {

  $("a").click(function () {

    $('head').append('<link rel="stylesheet" href="style2.css" type="text/css" />');

  });

}); 
```

# ruby-on-rails - 耙分贝：创建错误

> ID：11497355
> 
> 赞同：2
> 
> 时间：2012-07-16T02:10:52.703
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3

我使用 ruby​​1.8.7、rails3.0.7 和 mysql2(0.2.11)。当我运行`rake db:create`新应用程序时，我收到以下消息。以前有人解决过这个问题吗？你可以帮帮我吗？

```
rake db:create --trace
WARNING: 'require 'rake/rdoctask'' is deprecated.  Please use 'require 'rdoc/task' (in RDoc 2.4.2+)' instead.
    at /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rdoctask.rb
WARNING: Global access to Rake DSL methods is deprecated.  Please include
    ...  Rake::DSL into classes and modules which use the Rake DSL methods.
WARNING: DSL method ApfSubsystem::Application#task called at /usr/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/application.rb:215:in `initialize_tasks'
** Invoke db:create (first_time)
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:create
rake aborted!
can't convert Fixnum into String
/usr/lib/ruby/gems/1.8/gems/mysql2-0.2.18/lib/mysql2/client.rb:44:in `connect'
/usr/lib/ruby/gems/1.8/gems/mysql2-0.2.18/lib/mysql2/client.rb:44:in `initialize'
/usr/lib/ruby/gems/1.8/gems/mysql2-0.2.18/lib/active_record/connection_adapters/mysql2_adapter.rb:14:in `new'
/usr/lib/ruby/gems/1.8/gems/mysql2-0.2.18/lib/active_record/connection_adapters/mysql2_adapter.rb:14:in `mysql2_connection'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `send'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `new_connection'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:237:in `checkout_new_connection'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:191:in `checkout'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `loop'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `checkout'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:186:in `checkout'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:94:in `connection'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_pool.rb:317:in `retrieve_connection'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_specification.rb:97:in `retrieve_connection'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/railties/databases.rake:68:in `create_database'
/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.7/lib/active_record/railties/databases.rake:33
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/bin/rake:33
/usr/bin/rake:23:in `load'
/usr/bin/rake:23
Tasks: TOP => db:create 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:03:24.360

您可能在 database.yml 中有一个整数集作为您的用户名或密码 - 尝试用引号括起来

# html - 维基百科公共页面的备用 URL？看起来像一个图像文件 - 打破灯箱

> ID：11497361
> 
> 赞同：5
> 
> 时间：2012-07-16T02:12:05.413
> 
> 标签：html, http, lightbox

是否有其他方法可以链接到具有更传统 URL 的维基百科公共页面？

当我将灯箱图像上的 href 链接设置为外部网站页面时，它会很高兴，除非该外部页面的 URL 看起来像图像（以“.jpg”结尾）——在这种情况下，灯箱会尝试加载图像并休息。

维基百科公共图像页面充当页面，而不是图像。我想链接到该页面，但页面 URL 以“.jpg”结尾，因此 lightbox 正在尝试将页面加载为图像。

例如：[http ://commons.wikimedia.org/wiki/File:Giant_Haasts_eagle_attacking_New_Zealand_moa.jpg](http://commons.wikimedia.org/wiki/File:Giant_Haasts_eagle_attacking_New_Zealand_moa.jpg)

我已经搜索但找不到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:58:26.853

我对该页面上的链接进行了一些愚弄，以查看它们链接到的内容...

单击顶部的“讨论”选项卡将我带到此 URL...

[http://commons.wikimedia.org/w/index.php?title=File_talk:Giant_Haasts_eagle_attacking_New_Zealand_moa.jpg&action=edit&redlink=1](http://commons.wikimedia.org/w/index.php?title=File_talk:Giant_Haasts_eagle_attacking_New_Zealand_moa.jpg&action=edit&redlink=1)

我试着玩弄一下这个网址......

*   我将“File_talk”字符串更改为“File”
*   我删除了“action”和“redlink”参数

瞧！似乎适用于您想要的页面的备用 URL...

[http://commons.wikimedia.org/w/index.php?title=文件：Giant_Haasts_eagle_attacking_New_Zealand_moa.jpg](http://commons.wikimedia.org/w/index.php?title=File:Giant_Haasts_eagle_attacking_New_Zealand_moa.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:31:44.563

在末尾添加一个#file： [http ://en.wikipedia.org/wiki/File:Giant_Haasts_eagle_attacking_New_Zealand_moa.jpg#file](http://en.wikipedia.org/wiki/File:Giant_Haasts_eagle_attacking_New_Zealand_moa.jpg#file)

@Jesse 的回答也可能对某些人有用。

# php - 在phpmyadmin中查询成功但在php中失败

> ID：11497362
> 
> 赞同：0
> 
> 时间：2012-07-16T02:12:09.650
> 
> 标签：php, mysql, phpmyadmin

我想询问查询以选择表中可以匹配特定条件的最后一条记录。

以下代码可以成功执行并在phpmyadmin中给出正确的记录

```
SELECT TYPE FROM log WHERE TechID=4 ORDER By LogTime DESC LIMIT 1 
```

但是，当我在我的 php 文件中形成查询并执行时，它会给出错误。

```
$query2 = "SELECT Type FROM Log WHERE TechID=".$row1['TechID']."ORDER BY LogTime DESC LIMIT 1" 
```

这是错误消息：

> 错误！您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“BY LogTime DESC LIMIT 1”附近使用正确的语法。

谁能告诉我发生了什么，myquery 应该和我在 phpmyadmin 中使用的一样

以下是我为测试文件而创建的示例记录。

```
LogID TechID ClientID SiteID Type     LogTime
1     2      5        1      Checkin  2012/07/04 09:00
2     4      5        1      Checkin  2012/07/04 09:00
3     2      5        1      Checkout 2012/07/04 10:00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:19:53.543

我会在订单声明之前放一个空格。

```
" ORDER" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-27T02:06:16.803

另一件事可能是一个问题（虽然不是在这里）：字符串必须在 PHP 中用双引号转义，而不是单引号（请不要问我为什么）。因此，

```
mysqli_query("select * from tabel where name = 'peter'"); 
```

将是错误的，并且

```
mysqli_query("select * from tabel where name = \"peter\""); 
```

或者

```
mysqli_query('select * from tabel where name = "peter"'); 
```

将会成功。

# python - python 使用文件的字典帮助

> ID：11497364
> 
> 赞同：0
> 
> 时间：2012-07-16T02:12:26.083
> 
> 标签：python, dictionary

我有一个关于给定文件编写字典的问题。我已经完成了编码，但我真的很困惑。参数名称为“ `load_words: (file)`”，预期输出为“ `dict of {str: list of strs}`”。

给出的问题描述如下：

> “打开的文件每行包含一个小写单词。返回一个字典，其中每个键都是一个小写字母，每个值都是文件中以该字母开头的单词列表。只有一个或多个单词来自以开头的文件在字典中显示为键。"

我正在尝试编写我的代码

```
def load_words(file1): 
```

我真的不知道如何解决这个问题，任何帮助将不胜感激任何提示甚至完整的解决方案，我可以向后工作。

注意：不是作业问题。我有 2 天的期中考试，我正在尝试过去的期中考试，所以请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T02:19:27.680

只需用伪代码写出你需要做的逻辑，然后再回过头来填写真实代码：

*感谢@mhawke 指出我误读了问题*

```
function load_words(file)
  for each line in the file
    get the first letter of the line (word)
    lowercase the letter
    if dict[letter] does not yet exist
        create an empty list at this key
    add word to list in dict with first letter as key
  return the dict 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:18:20.547

最简单的方法是使用[`collections.defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)如下：

```
def load_words(file1):
    answer = collections.defaultdict(list)
    for line in file1:
        line = line.strip()
        if line not in answer[line[0]]:
            answer[line[0]].append(line)
    return answer 
```

但是，对于您的期中考试，您的教授可能会期待这个答案：

```
def load_words(file1):
    answer = {}
    for line in file1:
        line = line.strip()
        if line[0] in answer: # or in answer.keys() or in answer.iterkeys()
            if line not in answer[line[0]]:
                answer[line[0]].append(line)
        else:
            answer[line[0]] = [line] # or answer[line[0]] = []; answer[line[0]].append(line)
    return answer 
```

希望有帮助

# php - 如何使用 DOMDocument 创建比率或复选框选择？

> ID：11497367
> 
> 赞同：0
> 
> 时间：2012-07-16T02:12:51.243
> 
> 标签：php, html

使用 DOMDocument，我可以像这样创建一个单选输入：

```
$html = new DOMDocument;
$radio = $html->createElement ( 'input' );
$radio->setAttribute ( 'type', 'radio' );
$radio->setAttribute ( 'name', 'test-ratio' );
$fieldset->appendChild ( $radio); 
```

这将创建一个单一的无线电输入。当我有一个选择列表时，我应该重复上面的代码来创建一个无线电输入列表，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:26:51.707

您不需要创建新的 DomDocument 来创建单选按钮，只需重用已有的。

您也可以制作一个无线电输入并使用[cloneNode](http://php.net/manual/en/domnode.clonenode.php)制作它们的副本。

```
$radio = $html->createElement ( 'input' );
$radio->setAttribute ( 'name', 'test-ratio' );
$fieldset->appendChild ( $radio);
$fieldset->appendChild ( $radio->cloneNode()); 
```

# cmd - 如何让命令提示符 (cmd) 停止打开相关程序？

> ID：11497369
> 
> 赞同：0
> 
> 时间：2012-07-16T02:13:05.863
> 
> 标签：cmd, less, command-prompt, twitter-recess

我在 Windows 7 上，我使用了一个简单的本地构建过程，该过程涉及使用 Twitter RECESS 和 less.js 运行节点来即时将 LESS 编译为 css。

通常我只是打开 cmd 并输入：`lessc --compile stylesheet.less > stylesheet.css`它编译 css 没问题。有时我使用`recess --compile`，有时我使用 --watch，但它的工作原理几乎相同。几个月来我一直在做这个变化没有问题。

今天，我所做的某件事导致 cmd 每次运行命令时都开始打开与 .less 文件关联的程序。因此，当我键入`lessc --compile stylesheet.less > stylesheet.css`它不会编译 .css 文件时，它会打开 Sublime Text。我对 Windows 命令提示符一无所知，尽管过去两个小时我一直在 google 和 SO 上寻找答案，但我什至不确定我是否知道正确的术语来寻找正确的答案。

编辑：我首先尝试删除与 .js 文件的任何关联，但这没有用。Windows 自动将 .js 文件与 Visual Studio 关联，并且根本不允许我选择任何程序，即使通过命令提示符也是如此。然后我尝试将 .js 文件的默认程序从更改为记事本只是为了它，现在当我运行命令时记事本打开。所以至少它失败得更快，但它仍然失败。

在任何情况下，*文件关联都不是问题*，我（任何人）都应该能够将 cmd 与 node 一起使用，而不管存在任何文件关联 - 因为毕竟您需要 node 和文件关联才能正常工作。在我看来，Windows 现在似乎只是忽略了 node.js。我什至尝试重新安装它以查看是否有效。

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:22:56.333

尝试使用`assoc`命令检查文件关联并在必要时取消关联。使用`assoc /?`来查看使用情况。

`assoc .less=`

将解除关联。

或者您已经更改了现在启动 GUI 程序的二进制文件（或在 PATH 中添加了另一个具有相同名称的二进制文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:23:24.383

查看命令`ftype`和`assoc`.

在这种情况下，我想你想要`assoc <.yourfileext>=`

这将删除文件扩展名`.yourfileext`和任何关联程序之间的任何关联。确保在删除之前先检查，以便知道如果出现错误如何恢复关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:41:45.793

这实际上是已知问题：

见这里：[https](https://github.com/gruntjs/grunt#installing-grunt) ://github.com/gruntjs/grunt#installing-grunt 这里：[https](https://github.com/gruntjs/grunt/blob/master/docs/faq.md) ://github.com/gruntjs/grunt/blob/master/docs/faq.md 和这里：[GruntJs 'grunt' cmd 打开视觉工作室？](https://stackoverflow.com/questions/10933111/gruntjs-grunt-cmd-opens-visual-studio)

# android - Android - 如何让两个视图接收并执行相同的触摸事件？

> ID：11497370
> 
> 赞同：4
> 
> 时间：2012-07-16T02:13:06.003
> 
> 标签：android, events, views, touch, touch-event

我有一个看起来像这样的 RelativeLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#65ffffff" >

<com.sonyericsson.zoom.ImageZoomView
    android:id="@+id/zoomview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</RelativeLayout> 
```

我为该RelativeLayout 设置了一堆触摸事件。但是，com.sonyericsson.zoom.ImageZoomView 也有自己的逻辑来处理触摸事件。

当我在屏幕上执行任何触摸事件时，首先调用 com.sonyericsson.zoom.ImageZoomView 类的触摸侦听器（这是我所期望的）。问题是，如果我在该触摸事件中返回“true”，则**不会调用**RelativeLayout 的触摸侦听器。而如果我返回“false”，它们会被调用，但是 ImageZoomView 类所做的触摸处理**根本不会发生**！（我猜是因为我最后返回了“false”，所以 Android 只是忽略了 com.sonyericsson.zoom.ImageZoomView 类的触摸事件之前所做的任何 UI 更新）。

简而言之，我希望能够在我的 com.sonyericsson.zoom.ImageZoomView 和我的 RelativeLayout 中处理相同的触摸事件。

有没有办法做到这一点？

我使用的是安卓 2.2+。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:14:26.510

我建议您将 ImageZoomView 的 OnTouchListener 中的逻辑**移至**dispatchTouchEvent**方法**。

在我之前遇到的问题中，我发现 dispatchTouchEvent/dispatchKeyEvent 通常可以正常工作，而 onTouchListener/onKeyListener 不能按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:53:12.027

我最终使用了*onInterceptTouchEvent*方法，如下所示：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {

        return onTouchEvent(ev);
} 
```

我必须实现*onTouchEvent*方法以返回“false”：

```
@Override
public boolean onTouchEvent(MotionEvent event) {

      gesturedetector.onTouchEvent(event);      
   return false;
} 
```

这样我就能够在事件发送给孩子之前拦截它们。所以，在那之前我做了我想要的de处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T02:26:19.140

从`ImageZoomView`类继承。

这个继承的类有一个对您的 RelativeLayout 的引用。

覆盖触摸处理方法并放入以下伪代码：

```
bool result = super.onTouch();
referencedRelativeLayout.onTouch();
return result; 
```

这样，两个小部件都可以获取事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T02:26:54.070

以免说您的`ImageZoomView`课程 extends `View`，在您的主要活动中，您可以执行以下操作：

```
ImageZoomView mView;    

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);       

    mView = (ImageZoomView) findViewById(R.id.zoomview);         
    mView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

        //Do whatever
        return false;
    });        

} 
```

`ImageZoomView`就像它是一个按钮（从视图扩展）一样对待。

希望有帮助。

# php - 在前一个函数完成运行后执行一个函数

> ID：11497372
> 
> 赞同：0
> 
> 时间：2012-07-16T02:13:18.277
> 
> 标签：php

我有一个`my_function()`需要运行 10 次的功能。现在所有 10 个函数都在同时运行（异步？）。前一个函数完成后如何执行下一个函数？

*`my_function`包含`CURL`对数据库表的调用和读/写。我想知道其中是否有任何异步运行*

```
$repetitions = 10;

for($i = 0; $i < $repetitions; $i++) {
    my_function($param);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:23:01.560

您可以使用 while 循环并在参数中调用该函数以及计数器检查。然后确保您的函数在处理时返回 true 或 false。

```
$repetitions = 10;
$count = 0;

while (my_function($param) && $count < $repetitions) {
    $count++;
} 
```

循环应该阻塞，直到您的函数返回 true 并在计数条件不返回 true 时退出。

# vb.net - 十进制字符串错误

> ID：11497373
> 
> 赞同：-3
> 
> 时间：2012-07-16T02:13:18.627
> 
> 标签：vb.net, visual-studio-2010, sql-server-2008, vb.net-2010

我有一个值为 0.00 的文本框，然后我在转换时出错...但是我做了一个 0.00 的示例，而不是来自文本框，它正在工作。我该如何解决这个问题？

```
 Dim _Total, _Deduct, _Charges As String
    Dim _sss, _tax, _pf, _ph, _loan, _others, _hdmf, _cola, _allowance As Decimal 
```

此行如果文本框和注释此行有效.. 但我使用此行不工作..

```
 _sss = txtSSS.Text : _ph = txtPH.Text : _tax = txtInTax.Text : _pf = txtPF.Text
    _loan = txtLoan.Text : _hdmf = txtHDMF.Text : _others = txtOther.Text
    _cola = txtCola.ToString : _allowance = txtAllowance.ToString 
```

这一行是我给定的示例值...相同的值但文本框不起作用..这是有效的

```
 'This code when I uncomment.. this work..
    '_sss = "0.00": _ph = "0.00" : _tax = "0.00" : _pf = "0.00"
    '_loan = "0.00" : _hdmf = "50.00" : _others = "0.00"
    '_cola = "0.00" : _allowance = "0.00"

    _Charges = CDec(_cola) + CDec(_allowance)
    _Deduct = CDec(_sss) + CDec(_tax) + CDec(_pf) + CDec(_ph) + CDec(_loan) + CDec(_hdmf) + CDec(_others)

    _Total = CDec(_Charges) - CDec(_Deduct)

    lblDeduct.Text = Format((_Deduct), "currency")
    lblTotal.Text = FormatCurrency((_Total), 2, TriState.True, TriState.False, TriState.True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:23:43.510

使用[Decimal.TryParse](http://msdn.microsoft.com/en-us/library/9zbda557.aspx)：

```
<!-- language : lang-vb -->
If Not Decimal.TryParse(txtSSS.Text, _sss) Then
    ' do something if the value doesn't convert
End If 
```

* * *

根据您的评论并使用您的代码，看看这是否适合您（我使用 0 作为默认值）。如果您还没有[`Option Strict`](http://msdn.microsoft.com/en-US/library/zcd4xwzs%28v=vs.100%29.aspx)打开，请帮自己一个忙，然后这样做。

从上面的`Option Strict`链接：

> 将隐式数据类型转换限制为仅扩大转换，禁止后期绑定，并禁止导致 Object 类型的隐式类型。

```
Private Sub CalculateCurrency()
    If Not Decimal.TryParse(txtSSS.Text, _sss) Then _sss = 0D
    If Not Decimal.TryParse(txtPH.Text, _ph) Then _ph = 0D
    If Not Decimal.TryParse(txtInTax.Text, _tax) Then _tax = 0D
    If Not Decimal.TryParse(txtPF.Text, _pf) Then _pf = 0D
    If Not Decimal.TryParse(txtLoan.Text, _loan) Then _loan = 0D
    If Not Decimal.TryParse(txtHDMF.Text, _hdmf) Then _hdmf = 0D
    If Not Decimal.TryParse(txtOther.Text, _others) Then _others = 0D
    If Not Decimal.TryParse(txtCola.Text, _cola) Then _cola = 0D
    If Not Decimal.TryParse(txtAllowance.Text, _allowance) Then _allowance = 0D

    _Charges = CStr(_cola + _allowance)

    _Deduct = CStr(_sss + _tax + _pf + _ph + _loan + _hdmf + _others)

    _Total = CStr(CDec(_Charges) - CDec(_Deduct))

    lblDeduct.Text = Format((_Deduct), "currency")
    lblTotal.Text = FormatCurrency((_Total), 2, TriState.True, TriState.False, TriState.True)
End Sub 
```

# python - 在写入文件时，如何在 Python 上指定新行？

> ID：11497376
> 
> 赞同：404
> 
> 时间：2012-07-16T02:14:11.033
> 
> 标签：python, line-breaks, file-writing

与 Java（在字符串中）相比，您会执行类似`"First Line\r\nSecond Line"`.

那么，为了将多行写入常规文件，您将如何在 Python 中执行此操作？

* * *

## 回答 #1

> 赞同：447
> 
> 时间：2012-07-16T02:16:23.320

这取决于你想要的正确程度。`\n`通常会完成这项工作。[`os`如果你真的想把它弄对，你可以在package](http://docs.python.org/library/os.html)中查找换行符。（它实际上被称为`linesep`。）

注意：使用 Python API 写入文件时，不要使用`os.linesep`. 只需使用`\n`; Python 会自动将其转换为适合您平台的换行符。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-09-26T15:42:27.357

换行符是`\n`. 它在字符串中使用。

例子：

```
 print('First line \n Second line') 
```

`\n`换行符在哪里。

这将产生结果：

```
First line
 Second line 
```

如果您使用 Python 2，则不要在 print 函数上使用括号。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-01-04T11:13:02.563

您可以单独写入新行，也可以在单个字符串中写入，这更容易。

# 示例 1

## 输入

```
line1 = "hello how are you"
line2 = "I am testing the new line escape sequence"
line3 = "this seems to work" 
```

您可以单独编写 '\n'：

```
file.write(line1)
file.write("\n")
file.write(line2)
file.write("\n")
file.write(line3)
file.write("\n") 
```

## 输出

```
hello how are you
I am testing the new line escape sequence
this seems to work 
```

# 示例 2

## 输入

正如其他人在前面的答案中指出的那样，将 \n 放在字符串中的相关点：

```
line = "hello how are you\nI am testing the new line escape sequence\nthis seems to work"

file.write(line) 
```

## 输出

```
hello how are you
I am testing the new line escape sequence
this seems to work 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2019-10-26T18:55:45.737

**独立于平台的断线器：Linux,windows & IOS**

```
import os
keyword = 'physical'+ os.linesep + 'distancing'
print(keyword) 
```

**输出：**

```
physical
distancing 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-02-10T16:31:55.023

**编辑：**我现在年纪大了，也更聪明了。这是一个更具可读性的解决方案，即使您不是顶级缩进（例如在函数定义中），它也能正常工作。

```
import textwrap
file.write(textwrap.dedent("""
    Life's but a walking shadow, a poor player
    That struts and frets his hour upon the stage
    And then is heard no more: it is a tale
    Told by an idiot, full of sound and fury,
    Signifying nothing.
""")) 
```

**原始答案**

如果您一次输入多行文本，我发现这是最易读的格式。

```
file.write("\
Life's but a walking shadow, a poor player\n\
That struts and frets his hour upon the stage\n\
And then is heard no more: it is a tale\n\
Told by an idiot, full of sound and fury,\n\
Signifying nothing.\n\
") 
```

每行末尾的 \ 转义新行（这会导致错误）。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-01-04T12:37:21.017

# 最简单的解决方案

如果只调用`print`不带任何参数，它将输出一个空行。

```
print 
```

您可以将输出通过管道传输到这样的文件（考虑您的示例）：

```
f = open('out.txt', 'w')
print 'First line' >> f
print >> f
print 'Second line' >> f
f.close() 
```

它不仅与操作系统无关（甚至不必使用`os`包），而且比放入`\n`字符串更具可读性。

# 解释

该`print()`函数有一个用于字符串结尾的可选关键字参数，称为`end`，默认为操作系统的换行符，例如。`\n`. 因此，当您调用 时`print('hello')`，Python 实际上是在打印`'hello' + '\n'`. 这意味着当您在`print`没有任何参数的情况下调用时，它实际上是正在打印`'' + '\n'`，这会导致换行。

# 选择

使用多行字符串。

```
s = """First line
    Second line
    Third line"""
f = open('out.txt', 'w')
print s >> f
f.close() 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-07-16T02:15:51.503

在 Python 中，您可以只使用换行符，即`\n`

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-11-28T13:43:34.923

正如其他答案中提到的：“换行符是 \n。它在字符串中使用”。

我发现最简单易读的方法是使用“格式”函数，使用 nl 作为新行的名称，并将要打印的字符串分解为要打印的确切格式：

蟒蛇2：

```
print("line1{nl}"
      "line2{nl}"
      "line3".format(nl="\n")) 
```

蟒蛇3：

```
nl = "\n"
print(f"line1{nl}"
      f"line2{nl}"
      f"line3") 
```

这将输出：

```
line1
line2
line3 
```

这样它执行任务，并且还提供了代码的高可读性:)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-07-16T02:15:49.703

与 相同的方式`'\n'`，尽管您可能不需要`'\r'`. 你的Java版本中有它的原因吗？如果你确实需要/想要它，你也可以在 Python 中以同样的方式使用它。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-07-16T02:17:31.793

Java 字符串文字中的大多数转义字符在 Python 中也是有效的，例如“\r”和“\n”。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-12-18T21:46:59.643

\n - 简单的换行符插入工作：

```
# Here's the test example - string with newline char:
In [36]: test_line = "Hi!!!\n testing first line.. \n testing second line.. \n and third line....."

# Output:
In [37]: print(test_line)

Hi!!!
 testing first line..
 testing second line..
 and third line..... 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-06-16T00:06:09.067

值得注意的是，当您使用交互式 python shell 或 Jupyter 笔记本检查字符串时，`\n`和其他反斜杠字符串如**字面意思**`\t`呈现：

 **```
>>> gotcha = 'Here is some random message...'
>>> gotcha += '\nAdditional content:\n\t{}'.format('Yet even more great stuff!')
>>> gotcha
'Here is some random message...\nAdditional content:\n\tYet even more great stuff!' 
```

换行符、制表符和其他特殊的非打印字符**仅在打印**或写入文件时呈现为空白：

```
>>> print('{}'.format(gotcha))
Here is some random message...
Additional content:
    Yet even more great stuff! 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-03-23T05:45:11.987

在 Python 3 中，该语言会在平台的本机表示中为您编码换行符。这意味着`\r\n`在 Windows 上，并且只是`\n`在成熟的系统上。

即使在 U*x 系统上，以文本模式读取具有 Windows 行结尾的文件也会返回正确的文本结果，即在字符被静默删除`\r`之前的任何字符。`\n`

如果您需要完全控制文件中的字节，您可以使用二进制模式。然后每个字节正好对应一个字节，Python 不执行翻译。

```
>>> # Write a file with different line endings, using binary mode for full control
>>> with open('/tmp/demo.txt', 'wb') as wf:
...     wf.write(b'DOS line\r\n')
...     wf.write(b'U*x line\n')
...     wf.write(b'no line')
10
9
7

>>> # Read the file as text
>>> with open('/tmp/demo.txt', 'r') as text:
...     for line in text:
...         print(line, end='')
DOS line
U*x line
no line

>>> # Or more demonstrably
>>> with open('/tmp/demo.txt', 'r') as text:
...     for line in text:
...         print(repr(line))
'DOS line\n'
'U*x line\n'
'no line'

>>> # Back to bytes!
>>> with open('/tmp/demo.txt', 'rb') as binary:
...     for line in binary:
...         print(line)
b'DOS line\r\n'
b'U*x line\n'
b'no line'

>>> # Open in binary, but convert back to text
>>> with open('/tmp/demo.txt', 'rb') as binary:
...     for line in binary:
...         print(line.decode('utf-8'), end='')
DOS line
U*x line
no line

>>> # Or again in more detail, with repr()
>>> with open('/tmp/demo.txt', 'rb') as binary:
...     for line in binary:
...         print(repr(line.decode('utf-8')))
'DOS line\r\n'
'U*x line\n'
'no line' 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-10-16T09:45:44.377

\n 分隔字符串的行。在下面的示例中，我一直在循环中写入记录。每条记录由 . 分隔`\n`。

```
f = open("jsonFile.txt", "w")

for row_index in range(2, sheet.nrows):

  mydict1 = {
    "PowerMeterId" : row_index + 1,
    "Service": "Electricity",
    "Building": "JTC FoodHub",
    "Floor": str(Floor),
    "Location": Location,
    "ReportType": "Electricity",
    "System": System,
    "SubSystem": "",
    "Incomer": "",
    "Category": "",
    "DisplayName": DisplayName,
    "Description": Description,
    "Tag": tag,
    "IsActive": 1,
    "DataProviderType": int(0),
    "DataTable": ""
  }
  mydict1.pop("_id", None)
  f.write(str(mydict1) + '\n')

f.close() 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-11-16T17:36:31.203

```
"{}\n{}\n{}".format(
    "line1",
    "line2",
    "line3"
) 
```

个人比较喜欢这种格式**

# c++ - C++ 确保浮点大小为 4 个字节

> ID：11497378
> 
> 赞同：7
> 
> 时间：2012-07-16T02:14:33.257
> 
> 标签：c++, floating-point, cross-platform, size, consistency

我需要一种跨架构方式来确保浮点数为 4 个字节（就像在 32 位窗口上一样）。例如，在我创建的结构中，我使用`__int32`not`int`来确保一个 4 字节长的整数值。

我怎么能用浮点数做到这一点？我知道我可以将值替换为`__int32`类型；但是，在 64 位系统上转换为浮点数时，我不会有问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T02:17:28.737

> 我需要一种跨架构方式来确保浮点数为 4 个字节

`int32_t`浮点值没有类似物。

实现您想要的唯一跨平台方法是使用运行时或静态断言对其进行测试。

```
#include <cassert>
int main () {
    assert(sizeof(float) == 4);
    // If control reaches this line, then you've 
    // ensured that float is 4 bytes.

    // rest of your program goes here
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T02:16:23.710

由于浮点数据大小与 CPU 相关，因此没有标准兼容的方式来执行此操作。该`IEEE-754`标准（据我所知，所有支持浮点的处理器都使用该标准）将单精度浮点值定义为 4 字节。

没有标准提及的原因是因为 C 的编写者不想将自己绑定到浮点的特定实现，以防标准更改或更新。而且因为 CPU 决定了单精度和双精度浮点数的大小和实现，所以编译器本身并不关心它。

如果您对此感到担心，可以使用 a`static_assert`来确保`sizeof(float) == 4`; 但是，这不是您会遇到的问题，我无法想象。如果是这样，您应该逐个处理它（这实际上将是逐个架构的基础。）

# ios - 在 iOS 上加载 obj 文件的最佳方法

> ID：11497380
> 
> 赞同：9
> 
> 时间：2012-07-16T02:14:51.473
> 
> 标签：ios, opengl-es, 3d

由于 OpenGL 没有像 GLLoadObjFile('myModel.obj'); 这样的功能，在 iOS 应用程序中加载像 .obj 这样的 3d 模型文件的最佳教程是什么？

我试过波前加载器，但它似乎没有工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T03:59:51.917

[https://github.com/jlamarche/iOS-OpenGLES-Stuff/tree/master/Wavefront%20OBJ%20Loader](https://github.com/jlamarche/iOS-OpenGLES-Stuff/tree/master/Wavefront%20OBJ%20Loader)

它的加载器看起来相当不错，甚至支持来自搅拌机的材料，虽然它使用 OpenGL ES 1，加载器类应该在 ES 2 中完美运行

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T15:00:41.317

我使用了一个名为 Ninevegl 的库。它非常好，支持 .obj 和 .dae 等文件格式。它非常易于使用，并且他们有很好的解释文档。链接在这里。

[http://nineveh.gl/downloads/](http://nineveh.gl/downloads/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:11:14.300

我构建了一个 Perl/Xcode 项目，用于将**.obj**和**.mtl**文件加载到 iOS 上的 OpenGL ES 2.0 中，可[在此处](https://github.com/ricardo-rendoncepeda/mtl2opengl)获得。它被调用`mtl2opengl`，您可以在这些类似问题中看到其他 SO 用户的评论/结果：

1.  [opengles在iphone中显示人脸](https://stackoverflow.com/questions/15344430/opengles-display-human-face-in-iphone/15394405#15394405)
2.  [ios : 使用 GLEssentials 示例代码显示一个简单的 3D 模型](https://stackoverflow.com/questions/15029300/ios-displaying-a-simple-3d-model-with-glessentials-sample-code/15030198#15030198)
3.  [如何将 Blender blend（或 obj）文件转换为 Qualcom Vuforia .h 文件](https://stackoverflow.com/questions/14508930/how-to-convert-blender-blend-or-obj-file-to-qualcom-vuforia-h-file/14509789#14509789)

# ravendb - RavenDB 的引用完整性

> ID：11497381
> 
> 赞同：3
> 
> 时间：2012-07-16T02:15:11.677
> 
> 标签：ravendb

我知道这篇文章的标题必须让一些人畏缩。自 2011 年 12 月以来，我一直在使用 RavenDB，并且我开始意识到我以不适合使用文档数据库的方式对数据进行建模。首先，我完全明白。其次，鉴于我目前的情况，我希望有一种方法可以使下面的场景正常工作。

场景：我想删除数据库中的某个 Foo 文档。但是，如果该文档被另一个文档引用，我不想删除它。所以，我这样做了：

```
public void Delete(Foo foo)
{
    VerifyFooNotUsedByBar(foo);  // Make sure no bars reference this foo

    VerifyFooNotUsedBySnuh(foo);  // Make sure no snuhs reference this foo

    // What happens if some other user causes this foo to be referenced
    // by a bar, right now?

    new GenericData().Delete(foo);
} 
```

但是，这可行……在我对它们进行检查*之后*，它有可能被其他东西引用。有没有办法在整个方法完成之前锁定其他更改？

我明白答案是否是：“不。你用这种方式使用文档数据库搞砸了自己。” 我只是希望有办法解决我当前的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:04:52.877

鲍勃，不是真的，不。即使您对此进行了交易，它也不会锁定。您可以做的是确保引用将保留在元数据中。所以当我引用 Foo 时，我需要更新 Foo 的元数据来告诉它我正在这样做。这将导致单点交易真相。

# javascript - 在画廊中滚动可变宽度图像块

> ID：11497383
> 
> 赞同：0
> 
> 时间：2012-07-16T02:15:16.863
> 
> 标签：javascript, jquery, html, css

**任务详情：**

1.  页面上有画廊，所有图像预览都加载在页面上。

2.  图像由图像块显示（页面上 1 个块，固定块宽度和高度）。

3.  所有图像的宽度都是可变的，但高度相同（因此块中的图像数量可以不同）。

**问题：**

按下页面上的导航按钮时按块滚动

```
 =======================
<-  =  xx  sss  dd  qqqq  =  ->
    ======================= 
```

`xx` 等等 - 画廊中的不同图像

`===`图像块的边框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:15:16.863

我没有计算块中图像的宽度并为每个块形成图像数组，而是我的第一个想法，突然间我为此类任务找到了更简单和更好的解决方案：

## 带有模式的一般想法描述：

所有图像页面架构：

```
 -----------------------
    -  ff  ll  mmmm  aa   -
    -=====================-
<-  -  eeee  bbb  dd  ppp -  ->
    -=====================-        
    -  xx  sss  kk  qqqq  -
    ----------------------- 
```

`ff` 依此类推-图库中的不同图像（`float: left`; 对于每个 img）

`---`***#all_images*** ( `overflow: hidden; possition: absolute; top: ***`)的标记块

`===`***#visible_frame*** ( `position: absolute;`)的标记块

当按下页面上的导航按钮时，我们将 +/- 设置为***#all_images***`top`的值，结果**#visible_frame**将显示不同的图像集。

# php - 旋转以工作日名称为键的数组以从明天开始

> ID：11497385
> 
> 赞同：9
> 
> 时间：2012-07-16T02:15:19.460
> 
> 标签：php, arrays, algorithm, rotation

我有以下数组：

```
[
     [
         'schedules' => [
             'monday' => 1,
             'tuesday' => 1,
             'wednesday' => 1,
             'thursday' => 1,
             'friday' => 1,
             'saturday' => 0,
             'sunday' => 1,
         ]
    ]
] 
```

我想旋转这个数组的元素，第一个键是明天。假设今天是星期三，我希望我的数组看起来像这样：

```
[
     [
         'schedules' => [
             'thursday' => 1,
             'friday' => 1,
             'saturday' => 0,
             'sunday' => 1,
             'monday' => 1,
             'tuesday' => 1,
             'wednesday' => 1,
         ]
    ]
] 
```

我已经有可用的工作日（例如字符串'thursday'）。它被传递到我正在使用的函数中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T02:24:24.227

如果将日期转换为数字 0-6，则可以`array_shift`多次`array_push`将前几天移动到数组的末尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T02:25:55.793

尝试使用[`uksort()`](http://php.net/manual/en/function.uksort.php). 您可以在链接中描述的回调函数中比较日期。

例如：

```
function compare($a, $b) { 
  date(strtotime($a)) - date(strtotime($b)); 
}

uksort($array, "compare"); 
```

这[是它工作的证明](http://codepad.viper-7.com/C9ACD6)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T02:32:16.590

[您可以通过日期](http://php.net/manual/en/function.date.php)函数获取星期几。星期日为 0，星期一为 1，以此类推。

```
$weekday = date("w"); 
```

然后，我建议使用[uksort](http://php.net/manual/en/function.uksort.php)函数相对于其键对数组进行排序，该函数以回调函数作为排序准则。

```
uksort($schedules, function ($a, $b) use ($weekday) {
    // convert each day to a number 0-6 and compare to $weekday
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-04T08:02:09.907

你可以这样做来实现这一点

```
$week = [
    'sunday',
    'monday',
    'tuesday',
    'wednesday',
    'thursday',
    'friday',
    'saturday',
];

  $day = date('w'); // weekday as integer(3 for Wednesday)

  for ($i=0; $i <= $day ; $i++) {
    array_push($week, array_shift($week));
  }

  $result = $week; 
```

结果（如果今天是星期三）：

```
 Array
    (
        [0] => thursday
        [1] => friday
        [2] => saturday
        [3] => sunday
        [4] => monday
        [5] => tuesday
        [6] => wednesday
    ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T03:46:30.530

如果您将[uksort](http://php.net/manual/en/function.uksort.php)与一个简单的函数结合起来，这是一个非常简单的解决方案。

显然需要将日期名称字符串转换为整数，但如果这一天在当前工作日之前，只需将 7 添加到变量中，这将保证数组排序为“之后”，即使星期几意味着否则。

```
<?php

    $a='sunday'; // Example Input
    $b='saturday'; // Example Input

    function funnyDateCompare($a, $b)
    {
        $a=date('w',strtotime($a));
        $b=date('w',strtotime($b));
        if($a<=date('w'))
        {
            $a+=7;
            // First value is less than or equal to today. 
            // Adding 7 to the answer.
        }
        return ($a - $b);
    }

    uksort($array, "funnyDateCompare")
?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T02:26:51.180

首先，您需要一个正确顺序的列表，您可以通过 DateTime 类获取该列表。然后，当您遍历旧数组时，使用正确的顺序作为对数组进行排序的键，如下所示：

```
function sort_by_weekday( $input_array) {
    $now = new DateTime( "tomorrow", new DateTimeZone('America/New_York'));
    $interval = new DateInterval( 'P1D'); // 1 Day interval
    $period = new DatePeriod( $now, $interval, 7); // 7 Days

    $sorted_array = array();
    foreach( $period as $day) {
        $weekday = strtolower( $day->format( 'l'));

        foreach( $input_array as $key => $value) { 
            $sorted_array[ $key ][ $weekday ] = $value[ $weekday ]; 
        }
    }
    return $sorted_array;
} 
```

[您可以在演示](http://viper-7.com/mdVv2f)中看到它的工作原理。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-05T03:22:04.670

此答案允许从一周中的哪一天开始，并动态处理如何标记日期。

这只是使用[uksort()](http://php.net/manual/en/function.uksort.php)、[date()](http://php.net/manual/en/function.date.php)和[strtotime()](http://php.net/manual/en/function.strtotime.php)的改进解决方案。

```
function sort_days( $term1, $term2 ) {
    $weekdays = array( 'sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat' );
    foreach ( $weekdays as $key => $value ) {
        $weekdays[ $key ] = date( 'N', strtotime( $value ) );
    }

    $term1_time = date( 'N', strtotime( strtolower( $term1 ) ) );
    $term2_time = date( 'N', strtotime( strtolower( $term2 ) ) );

    return array_search( $term1_time, $weekdays ) - array_search( $term2_time, $weekdays );
} 
```

[使用uksort()](http://php.net/manual/en/function.uksort.php)对键进行排序

```
$uk_days = array(
    'thursday'  => 1,
    'monday'    => 1,
    'saturday'  => 1,
    'wednesday' => 1,
    'sunday'    => 1,
    'friday'    => 1,
    'tuesday'   => 1,
);
uksort($uk_days, "sort_days");
var_dump($uk_days); 
```

[使用usort()](http://php.net/manual/en/function.usort.php)对键进行排序

```
$u_days = array(
    'thursday',
    'monday',
    'saturday',
    'wednesday',
    'sunday',
    'friday',
    'tuesday',
);
usort($u_days, "sort_days");
var_dump($u_days); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-16T02:40:23.127

我写了一个解决方案，它不会将日期转换为日期/时间类型，而是使用闭包和 uksort。本质上，传递给 uksort 的每个键都与“明天”键的位置进行比较，如果是“明天”，则将其“提升”到未来（`+= 7`），然后使用简单的比较结果。

# 编辑性能：

由@nickb 的评论引起的编辑（谢谢！）

```
<?php

function sortedWithNext($days, $tomorrow) {
    $index_dictionary = array_combine(array_keys($days), range(0,6));
    $index_of_tomorrow = $index_dictionary[$tomorrow];
    $compare_function = function($k1, $k2) use ($index_dictionary, $index_of_tomorrow) {
         $index_of_k1 = $index_dictionary[$k1];
         $index_of_k2 = $index_dictionary[$k2];
         if($index_of_k1 < $index_of_tomorrow) 
           $index_of_k1 += 7;
        if($index_of_k2 < $index_of_tomorrow) 
           $index_of_k2 += 7;
        return $index_of_k1 - $index_of_k2;
    };
    uksort($days, $compare_function);
    return $days;
}

$daysPool = array(
'monday'=>1,
'tuesday'=>1,
'wednesday'=>1,
'thursday'=>1,
'friday'=>0,
'saturday'=>1,
'sunday'=>1,
);

$tomorrow = 'thursday';

$sortedDays = sortedWithNext($daysPool, $tomorrow);

var_dump($sortedDays); 
```

# 性能说明

我使用 100,000 次迭代进行了测试，这种方法大约花费 2.2e-5 秒来对数组进行排序。好奇的人会检查这个答案的第一个版本，以找到一个性能较低的版本，它花费了大约两倍的时间，5.5e-5 秒。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-28T13:35:24.393

子数组数据中已经存在循环顺序，因此不需要通过将每个条目相互比较来进行排序。

最直接的解决方案（据我所知）是：

1.  找到正确的位置将数组分成两部分，然后
2.  取下第一部分并在第二部分后重新连接。

代码：（[演示](https://3v4l.org/TUPEn)）

```
$newStart = 'thursday';
foreach ($array as &$entry) {
    $position = array_search(
        $newStart,
        array_keys($entry['schedules'])
    );
    if ($position) {
        $entry['schedules'] += array_splice(
            $entry['schedules'],
            0,
            $position
        );
    }
}
var_export($array); 
```

`false`如果未找到目标键 ( ) 或已在第一个位置 ( ) ，则该条件确保不执行元素旋转`0`。

`array_search()`是有效的，因为它在找到第一个匹配项后立即停止迭代。

我不认可任何建议的早期答案：

*   `uksort()`-- 这具有更大的计算复杂度，更不用说自定义函数体中函数调用的额外开销。
*   循环——迭代的函数调用不必要地昂贵，并且代表了一种不太优雅/蛮力的技术。具有中断条件且没有迭代函数调用的循环不会那么糟糕。
*   更改 OP 的输入数据以更好地适应替代解决方案——这是不必要的承认失败。

我的解决方案恰好适合作为实用功能，因为它不依赖于任何与日期相关的数据/逻辑。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-14T14:24:51.333

`array_slice`和的组合`array_merge`可以解决问题。

```
'week' => [
   'monday' => 1,
   'tuesday' => 1,
   'wednesday' => 1,
   'thursday' => 1,
   'friday' => 1,
   'saturday' => 0,
   'sunday' => 1,
         ]
// get today's index, like Wednesday will be 3
$day = date('w')

// Get the days until today
$previous = array_slice($week, 0, $day); // ["mon","tue","wed"]

// Get remaining days in week
$coming = array_slice($week, $day); //  ["thu","fri","sat","sun",]

array_merge($coming, $previous);//["thu","fri","sat","sun","mon","tue","wed"] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-24T13:45:48.140

试试下面的代码。它将根据当前日期对日期进行排序。

```
 $days = array("Friday","Thursday","Wednesday","Tuesday");
    $days = array_combine($days,$days);

    //loop the days and check the next day
    foreach($days as $k => $dd){

        //check next day name & increment current date with +1
        $current_dt = date("Y-m-d",strtotime("next day", strtotime($current_dt)));
        $days_name = date("l", strtotime($current_dt));    

        // if day name exists in array, push in seperate array
        if(!empty($days[$days_name])){
            $arrSortedDays[] = $days_name;
        }
    }

    //check if currnet day fall today, push it in array to last element.
    if(!empty($days[date("l")])){
        $arrSortedDays[] = date("l");
    } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-05-27T10:30:16.437

这对我有用，只是一个简单的循环：

```
$array = array();

$month = date('m');
$day = date('d');
$year = date('Y');

for($i=1; $i<=7; $i++){
    $array[] = date('l',mktime(0,0,0,$month,($day+$i),$year));
} 
```

输出数组如下所示：（如果今天是星期二）

```
array(
    (int) 0 => 'Wednesday',
    (int) 1 => 'Thursday',
    (int) 2 => 'Friday',
    (int) 3 => 'Saturday',
    (int) 4 => 'Sunday',
    (int) 5 => 'Monday',
    (int) 6 => 'Tuesday'
) 
```

# javascript - v8 关于对象生命周期的混淆

> ID：11497388
> 
> 赞同：3
> 
> 时间：2012-07-16T02:15:47.197
> 
> 标签：javascript, c++, node.js, v8

背景：我正在尝试创建一个 node.js 克隆用于演示目的和作为学习练习。

尝试调用我已从 c++ 附加到 javascript 中的对象的回调时，我遇到了段错误。我正在使用`obj->Set(xxx, callback)`. 每当发生 http 请求时，我都会返回该对象并使用该对象`obj->Get(xxx)`获取该回调并尝试调用它。但是，我在使用指针时遇到了段错误。

这是代码：

```
#include "HttpWrap.h"
#include <cstdlib>
#include "v8/include/v8.h"
#include "libuv/include/uv.h"

using namespace v8;

HttpWrap::HttpWrap(const Arguments& args)
{
   Local<ObjectTemplate> serverTemplate = ObjectTemplate::New();
   serverTemplate->SetInternalFieldCount(1);
   serverTemplate->Set(String::New("listen"), FunctionTemplate::New(Listen));

   Local<Object> localServer = serverTemplate->NewInstance();
   localServer->SetInternalField(0, External::New(this));

   String::AsciiValue ip_address(args[0]);
   int port = args[1]->Int32Value();

   handle = (uv_tcp_t*) malloc(sizeof(uv_tcp_t));
   uv_tcp_init(uv_default_loop(), handle);
   handle->data = this;
   uv_tcp_bind(handle, uv_ip4_addr(*ip_address, port));

   server = Persistent<Object>::New(localServer);
}

Handle<Value> HttpWrap::Listen(const Arguments& args)
{
   puts("HttpWrap::Listen");

   HandleScope scope;

   Local<External> wrap = Local<External>::Cast(args.Holder()->GetInternalField(0));
   HttpWrap* httpWrap = static_cast<HttpWrap*>(wrap->Value());
   httpWrap->server->Set(String::New("onrequest"), args[0]);
   uv_listen((uv_stream_t*) httpWrap->handle, 128, OnConnection);

   return scope.Close(Undefined());
}

void HttpWrap::OnConnection(uv_stream_t* handle, int status)
{
   puts("HttpWrap::OnConnection");
   uv_tcp_t* client = (uv_tcp_t*) malloc(sizeof(uv_tcp_t));
   uv_tcp_init(uv_default_loop(), client);
   client->data = handle->data;
   uv_accept(handle, (uv_stream_t*) client);
   uv_read_start((uv_stream_t*) client, AllocConnection, OnRead);
}

uv_buf_t HttpWrap::AllocConnection(uv_handle_t* handle, size_t suggested_size)
{
   puts("HttpWrap::AllocConnection");
   return uv_buf_init((char*) malloc(suggested_size), suggested_size);
}

void HttpWrap::OnRead(uv_stream_t* server, ssize_t nread, uv_buf_t buf)
{
   HandleScope scope;
   puts("HttpWrap::OnRead");

   HttpWrap* httpWrap = static_cast<HttpWrap*>(server->data);
   Local<String> callbackSym = String::New("onrequest");
   Local<Value> value = httpWrap->server->Get(callbackSym);

   if (!value->IsFunction())
   {
      puts("Value is not a function");
   }
   else 
   {
      puts("Value is a function");
      Local<Function> callback = Local<Function>::Cast(value);
      Local<Value>* argv = new Local<Value>[1];
      argv[0] = String::New("test");
      puts("Invoking callback");
      callback->Call(Context::GetCurrent()->Global(), 1, argv);
      puts("invoked callback");
   }

   free(buf.base);
   uv_close((uv_handle_t*) server, OnClose);
}

void HttpWrap::OnClose(uv_handle_t* handle)
{
   puts("HttpWrap::OnClose");
} 
```

*也[可以在 Github 上找到](https://github.com/joeandaverde/joed/blob/c4d632cb060346406463020ccd1574a59117a7be/HttpWrap.cpp)。*

感兴趣的行是 36 和 65。每当尝试调用`callback->Call`.

非常感谢您提出的任何想法或良好做法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:26:13.173

不幸的是，在解决这个问题时，我有点狭隘。主要问题是我在尝试调用回调之前处理了主要上下文。由于上下文被处理，试图调用 js 空间中的代码失败。

# jquery - 多个加载事件共享同一个监视器

> ID：11497401
> 
> 赞同：1
> 
> 时间：2012-07-16T02:17:48.310
> 
> 标签：jquery, jquery-load

我想创建一个使用 HTML5 的 CMS，当索引执行时，它会加载页眉、容器和页脚。我使用以下代码来执行此操作

```
$('#header').load("header.html");
$('#container').load("container.html");
$('#footer').load("footer.html)"); 
```

它可以工作，但是，我想将一些事件处理程序绑定到任何页眉、容器或页脚中，当然，对于页眉、容器中的每个 a 标签，同样的处理程序如 $('a').click(...)和页脚。而且我当然可以为每个loader绑定三个成功函数，但我认为这不是一个好办法。有没有办法检查每个加载事件是否完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:44:09.690

有很多方法可以解决这个问题：

## 对容器的委托

这是迄今为止最简单的方法。容器中的任何现有或未来`<a>`代码都将获得指定点击处理程序的功能。

```
$(function(){
    $('#header, #container, #footer').on('click', 'a', function() {
        //...
    });

    $('#header').load("header.html");
    $('#container').load("container.html");
    $('#footer').load("footer.html");
}); 
```

任何一个动作的失败`.load()`都不会影响其他动作。

## 命名函数

使用这种方法，同名函数被指定为所有三个`.load()`调用的“完成”回调。

```
$(function() {
    function bindHandler() {
        $(this).find("a").on('click', function() {
            //...
        });
    }

    $('#header').load("header.html", bindHandler);
    $('#container').load("container.html", bindHandler);
    $('#footer').load("footer.html", bindHandler);
}); 
```

同样，任何`.load()`操作的失败都不会影响其他操作。

## .when(promises).done()

在这种方法中，`.load()`被替换为`$.ajax`，它返回一个非常方便的 'jqXHR'（promise）对象。`.load()`不能以这种方式使用，因为它返回一个标准的 jQuery 对象；它的承诺对象是不可访问的。

```
function load(url, selector) {
    //make ajax request and return jqXHR (promise) object
    return $.ajax(url, {
        success: function(data){
            $(selector).html(data);
        }
    });
}

$.when(
    load("header.html", '#header'),
    load("container.html", '#container'),
    load("footer.html)", '#footer')
).done(function() {
    // All three ajax requests have successfully completed
    $("#header, #container, #footer").find("a").on('click', function() {
        //...
    });
}); 
```

**仅当所有三个**加载操作都成功时要放置单击处理程序时，才应使用最后一种方法。任何一项`.load()`操作的失败都将完全禁止点击处理程序的附加。

# php - 由于负载过重，PHP 脚本停止运行

> ID：11497402
> 
> 赞同：-2
> 
> 时间：2012-07-16T02:18:01.747
> 
> 标签：php

我有两个 while 循环正在显示数据库中的数据，但由于负载过重而停止工作。

请让我知道如何销毁/清除每个 while 循环上的先前负载。

```
**Code Example: this is not an exact code, but take it as example**

for ($aw = 1; $aw <= 150000; $aw++) {

$sql="INSERT INTO say (cname,cno,clocation,email) VALUES ('Fin','0743208899','London','fin1991@live.com')"; 
$result=mysql_query($sql);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:25:35.157

构建一个查询，而不是运行 50,000 个查询：

```
$rows = Array();
for( $aw=1; $aw<=50000; $aw++) $rows[] = "('Fin','0743208899','London','fin1991@live.com')";
mysql_query("INSERT INTO say (cname,cno,clocation.email) VALUES ".implode(",",$rows)); 
```

# javascript - 如何使用 JavaScript 将 HTML 节点拖到另一个节点中？

> ID：11497403
> 
> 赞同：-1
> 
> 时间：2012-07-16T02:18:13.370
> 
> 标签：javascript, html

我需要能够将 HTML 节点拖放到其他节点中。例如，如果我从这个 HTML 结构开始：

```
<div class="first">
  <h1>Title</h1>
  <p>Some content</p>
</div>
<div class="second">
  <h2>Subtitle</h2>
</div> 
```

我需要能够选择`<h1>`或`<p>`标记并将其中的任何一个拖动到`div.second`. 所以结果是：

```
<div class="first">
  <h1>Title</h1>
</div>
<div class="second">
  <h2>Subtitle</h2>
  <p>Some content</p>
</div> 
```

作为（可选）加号，我需要在放置区域中放置一个占位符。在将`<p>`标签放入目的地之前，放置它的副本以查看它的外观。

如何用 JavaScript 完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:28:45.450

如果您对了解 HTML5 拖放 API 不够感兴趣（我建议您继续阅读，尽管它有点错误），只需使用 jQuery UI 的拖放：http: [//jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)

# git - 将 --hard git remote branch 重置为远程 reflog 中的 SHA，但不在本地 repo 中

> ID：11497405
> 
> 赞同：3
> 
> 时间：2012-07-16T02:18:34.133
> 
> 标签：git, github, branch, reset

有没有办法将远程分支指针重置为您知道在远程 reflog 中但在本地存储库中没有的 SHA？

我非常熟悉重置（软/混合/硬）在本地存储库上的工作方式，但这对我没有帮助。

这是我要解决的情况。我已经有一段时间没有进行 fetch 了，远程 master 已经更新了一个我在本地还没有的合并。

我搞砸了，`git push --force`只更新了远程功能分支，但忘记了一个参数，最终强制功能分支和主控到我在本地的修订。

这意味着 master 现在缺少自我上次获取以来发生的合并提交。我们使用的是 github，所以我收到了一封电子邮件，告诉我 master 之前所在的 SHA。我还能够访问 url 并看到提交仍然存在（尚未收集垃圾）。

我能够通过重做我丢失的合并并再次将其推出来“修复”它（最终改变了 SHA，因为它是不同的提交者和时间）。这不是最优的，如果我在 master 上丢失了多个合并提交，情况可能会更糟。

我想做的只是`reset --hard`它应该位于的 SHA 的远程 master 分支。如果没有对 repo 的 SSH 访问权限，有什么方法可以做到这一点？

这是在 github 上，所以我没有直接访问 repo 的权限，无法直接 ssh 并重置它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:46:22.783

~~我不认为您可以直接访问/重置 GitHub 上的任何内容，而无需询问他们~~.
即，无需[联系 GitHub 支持](https://github.com/contact)，让他们查看您的 GitHub 存储库的 reflog。
他们将能够通过创建新分支或将其重置为现有分支来使丢失的 SHA1 可见。

**实际上，repo 所有者可以查询 GitHub Event API**。
请参阅“ [github 是否记得提交 ID？](https://stackoverflow.com/a/28958418/6309) ”。

* * *

[OP Ted Naleid](https://stackoverflow.com/users/8912/ted-naleid)确认，提到这个[线程](http://git.661346.n2.nabble.com/Fetch-by-SHA-missing-td5604552.html)（和[这个](http://thread.gmane.org/gmane.comp.version-control.git/73368/focus=73994)）作为一个原因：

> 这是设计使然。
> 也就是说，当你不小心推送了秘密数据时，你可以在服务器上回滚你的 refs。
> 即使这些对象仍然存在于服务器上（直到它们被垃圾收集），即使他们碰巧知道 SHA1，也没有人能够获取您的秘密资料。

[Dan Molding在他](https://stackoverflow.com/users/95706/dan-moulding)[自己的回答](https://stackoverflow.com/a/11504124/6309)的评论中确认如下：

> 我做了更多测试，发现克隆行为因使用的协议而异。
> 
> *   通过 SSH 克隆（可能是通过 git 协议）的行为与您描述的一样；即无法访问的提交不会转移到克隆。
>     现在我也用 HTTPS 测试了它（使用 GitHub 本身）。而且看起来不太好；克隆不会获得无法访问的对象。
>     
>     
> *   但是，在本地克隆时，所有提交（无论是否无法访问）都会被转移。

（但 OP 澄清说，这仅仅是因为使用本地克隆，*默认情况*下，目录下的文件`.git/objects/`是硬链接以尽可能节省空间。
`git clone --no-hardlinks file:///Users/yourUser/your/full/repo/path repo-clone-name`不会传输无法访问的提交）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T17:14:12.727

你试过`git push --force origin <sha>:master`吗？这应该在原点上设置 master 指向你给它的任何 SHA，不问任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:16:15.287

您是否尝试过将 GitHub 存储库克隆到新的本地存储库？我相信克隆可能包括“丢失”的对象。然后，您将在新克隆的存储库中拥有“丢失”的对象。您可以在本地进行重置，然后将固定的 refs 推送回 GitHub。

# hadoop - 多个地图更新日志文件同步问题

> ID：11497409
> 
> 赞同：1
> 
> 时间：2012-07-16T02:19:05.190
> 
> 标签：hadoop, hdfs

我正在更新 HDFS 上的文件。

我如何确保所有地图所做的更改都存在于文件中，即文件上的写入操作是否同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:24:23.807

根据[Hadoop - 权威指南](http://shop.oreilly.com/product/0636920021773.do)

> **多个写入者，任意文件修改**
> HDFS 中的文件可以由单个写入者写入。写入始终在文件末尾进行。不支持多个写入者或文件中任意偏移处的修改。（将来可能会支持这些，但它们可能效率相对较低。）

由于 Hadoop 的性质（多节点/映射器/减速器等），应用程序级同步实际上是不可能的。

Apache Hadoop的[MapR 发行版](http://www.mapr.com/Download-document/9-NFS-Technical-Brief)支持随机读取和写入，同时支持多个读取器和写入器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:14:00.687

HDFS 文件是不可变的。所以你只能附加到它们。这里讨论了并发追加的问题：[是否可以从多个客户端并行追加到 HDFS 文件？](https://stackoverflow.com/questions/6389594/is-it-possible-to-append-to-hdfs-file-from-multiple-clients-in-parallel) 简而言之 - 你不应该。
我还要指出，这不是“先生精神”。如果您想从映射器收集一些数据并将其聚合在一起 - 这正是减速器的作用。

# javascript - MVC 4 仅刷新 PartialView

> ID：11497411
> 
> 赞同：3
> 
> 时间：2012-07-16T02:19:14.010
> 
> 标签：javascript, jquery, asp.net-mvc, refresh, partial-views

我目前正在开发一个具有 CRUD 功能的网站。在添加、编辑或删除成功完成后，我正在使用下面的 javascript 代码显示一条消息。

```
function addSuccess(data) {
    if (data.Success == true) {
        $('#addDialog').dialog('close');
        $('#commonMessage').html("Process Complete");
        $('#commonMessage').delay(400).slideDown(400).delay(3000).slideUp(400);
    }
    else {
        $("#add-message").html(data.ErrorMessage);
        $("#add-message").show();
    }
} 
```

但是，我在包含 webGrid 的局部视图上呈现结果。在这种情况下，产品的表格列表位于此部分视图中。在（假设）编辑过程完成后，我希望编辑的字段在编辑对话框关闭后反映。我的问题是，我不知道如何在不影响整个页面的情况下刷新局部视图。

有人可以指出我这样做的好方法吗？非常感谢你！

* * *

**编辑：**

下面是我如何将项目添加到我的网格。请注意，整个代码都在我的 PartialView 中。谢谢！

```
@{
    MyStore.Business.Manager.ProductsManager repository = new MyStore.Business.Manager.ProductsManager ();

    List<MyStore.Data.Products> ProductsList = repository.GetAllProducts(ViewData["StoreCode"].ToString());

    var grid = new WebGrid(ProductsList );

    grid.Pager(WebGridPagerModes.All);
            @grid.GetHtml(tableStyle: "webGrid",
                htmlAttributes: new { id = "DataTable" },
                headerStyle: "header",
                alternatingRowStyle: "alt",
                columns: grid.Columns(
                    grid.Column("ProductCode", style: "width: 400px;"),
                    grid.Column("Name", style: "width: 400px"),
                    grid.Column("Price", style: "width: 100px;"),
                    grid.Column("", format: @<text>@Html.ActionLink("Edit", "_Edit", new { RecordID = item.RecordID }, new { @class = "editLink" })</text>, style: "width: 100px"),
                    grid.Column("", format: @<text>@Html.ActionLink("Delete", "_Delete", new { RecordID = item.RecordID }, new { @class = "editLink" })</text>, style: "width: 100px")
                                                 ));                                                      
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:25:41.687

使用 jquery`ajax`重新加载内容

```
if (data.Success == true) {
    $('#addDialog').dialog('close');
    $('#commonMessage').html("Process Complete")
                   .delay(400).slideDown(400).delay(3000).slideUp(400);

    $("#yourContainerDiv").load("Url.Action("GetProducts ","Items")")

} 
```

假设`yourContainerDiv`是您拥有网格标记的 Div /table 并且控制器的`GetProducts`操作方法`Items`返回网格的标记。

如果您在按钮单击事件中执行保存/更新，请确保使用`peventDefault`方法停止默认表单提交行为

```
$("#someButtonId").click(function(e){
  e.preventDefault();
  //Save data or whatever ...
}); 
```

**编辑：** *设置更新的问题后。*

你为什么将你的 UI ( `view`) 与`code`. 保持分开。

获取`action`数据并将其传递给强类型视图

```
public ActionResult GetProducts()
{
   var repository = new MyStore.Business.Manager.ProductsManager ();
   var productList = repository.GetAllProducts(ViewData["StoreCode"].ToString());
   return View(productList);    
} 
```

现在有一个 view( `GetProducts.cshtml`)，它是 Lost of Products 类的强类型。

```
@model MyStore.Data.Products
@{
  Layout=null;
}
<table>
   @foreach(var item in Model)
   {
     <tr>
      <td>@item.ProductCode</td>
      <td>@item.Name</td>
      <td>@item.Price</td>
     </tr>
   }
</table> 
```

就我个人而言，我将我的实体/模型名称保持为单数，例如`Customer`/`Product`

# php - 如何保护 Web 服务器上的私有资源

> ID：11497415
> 
> 赞同：0
> 
> 时间：2012-07-16T02:19:37.403
> 
> 标签：php, encryption, https, web

我有一个通过 Web 访问的资源。

例如，页面[http://example.com/data.php](http://example.com/data.php)提供了一些 JSON 数据，如下所示：

```
{"aa":"ss","aa":"ss"} 
```

我有一个应用程序需要通过读取该网页的响应来获取这些数据。

但问题是我不希望其他人访问该页面。我希望这个页面只能由我的应用程序访问。没有其他人可以访问它。

那么，我该如何处理这个问题呢？有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:23:24.540

不可能。（假设您的意思是您正在使用此 JSON 数据客户端。）

如果您的应用程序可以读取它，那么用户也可以。您对此无能为力。即使您有办法完全保护传输，它仍然可以在应用程序端读取。

# ios - 用两个 CALayer 相互叠加绘制

> ID：11497416
> 
> 赞同：1
> 
> 时间：2012-07-16T02:19:41.183
> 
> 标签：ios, cocoa-touch, core-graphics, calayer

我有 2 个视图，我想使用它们各自的图层进行绘图。我的第一个视图（我将其称为`TextView`）只不过是一个充满文本的页面。另一个视图，我称之为`DrawView`，是绘图发生的地方。在`TextView`中，图层用于将 PDF 的文本绘制到视图中。例如：

![查看显示 PDF 的内容](../Images/0658df85a76963c4835425d1f9caa83f.png)

另一方面，DrawView 的层是进行自定义绘图的地方。（例如自由图形、矩形等）

现在我想要发生的事情是让图纸中的图纸`DrawView`看起来好像是*在*`TextView`. 像这样：

![突出显示的文本](../Images/d9d83c703f1d5360adb99c1e866bfe94.png)

我所做的是将 DrawView 添加为 TextView 的子视图。但这就是发生的事情：

![用颜色覆盖的文本](../Images/2b2d7c631ebd6db988285270bc998313.png)

我尝试使用`kCGBlendModeMultiply`第二张图片中使用的类似内容，但没有任何反应。谁能告诉如何使这项工作？谢谢。

**注意：**第二个图像实现我想要的唯一原因是因为我在同一层内插入了矩形，这是 TextView 的层。我想做同样的效果，但在 DrawView 层内，它是 TextView 的子视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:34:16.747

只是一个想法：

您可以使用 3 层，而不是 2 层。突出显示的区域可以在第 1 层（背面层）上。文本文档可以在第 2 层（中间），而绘图层可以在第 3 层（前层）。

将第 3 层的不透明度设置为某个中间值，这样您仍然可以看到第 2 层上的内容。

当用户绘图时，让第 3 层成为实际接受绘图的视图。由于它是半透明的，您仍然可以看到中间层。当 touchesEnded 被调用时，将绘图复制到第 1 层，它可以保留在那里。从第 3 层删除它，你应该完成你想要的。

你是这么想的吗？

# php - 如何向 URL 发送 PHP cURL POST 请求，接收文件并提供给用户下载？

> ID：11497419
> 
> 赞同：1
> 
> 时间：2012-07-16T02:20:06.397
> 
> 标签：php, sockets, curl

有一个 url，当我传递一些 POST 参数时，它会返回一个文件供我下载。让我的服务器下载该文件并在下载时将其发送给用户的最佳方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:22:28.207

我会为整个事情使用cURL。

目前我没有关于我的参考资料，但至少对于多 cURL，可以有一个回调函数，当一大块数据进入时触发。发生这种情况时，您将数据回显到你的客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:55:23.393

这取决于你想对响应做什么，但最简单的方法是设置 CURLOPT_RETURNTRANSFER 并输出响应：

```
$ch = curl_init("http://stackoverflow.com/");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$resp = curl_exec($ch);
curl_close($ch);

echo $resp; 
```

不要忘记`curl_exec`在失败时返回 FALSE，所以你可能也应该检查一下：

```
if ($resp === false) die('Unable to contact server'); 
```

如果您还想将响应保存在服务器上（而不是上述方法，它基本上只是一个愚蠢的代理），您可以使用 CURLOPT_WRITEFUNCTION 代替。

```
$fp = fopen('my_file', 'w');
$ch = curl_init("http://stackoverflow.com/");
curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'writefunc');
curl_exec($ch);
curl_close($ch);
fclose($fp);

function writefunc($ch, $data) {
    global $fp;
    echo $data;
    return fwrite($fp, $data);
} 
```

write 函数有两个参数（curl 句柄、数据），并且需要一个写入数据量的返回值（在我们的例子中也是输出量）。

# java - 使用 Java 将数据传递到 html POST 表单

> ID：11497424
> 
> 赞同：5
> 
> 时间：2012-07-16T02:20:39.873
> 
> 标签：java

我有一个看起来像这样的 HTML 表单：

```
<form name="form1" method="post" action="/confirm.asp">
    <input type="text" name="data1" size="20" value=""><br>
    <input type="text" name="data2" size="20" value=""><br>
    <input type="Submit" name=submit value="Submit">
</form> 
```

我想使用 Java 将数据传递给`data1`并`data2`在提交表单时读取随后的页面。由于这是一个方法=帖子，我不能使用`http://somesite.com/confirm.asp?data1=foo&data2=foo`.

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T02:34:44.943

```
/* create a new URL and open a connection */
URL url = new URL("http://somesite.com/confirm.asp");
URLConnection con = url.openConnection();
con.setDoOutput(true);

/* wrapper the output stream of the connection with PrintWiter so that we can write plain text to the stream */
PrintWriter wr = new PrintWriter(con.getOutputStream(), true);

/* set up the parameters into a string and send it via the output stream */
StringBuilder parameters = new StringBuilder();
parameters.append("data1=" + URLEncoder.encode("value1", "UTF-8"));
parameters.append("&");
parameters.append("data2=" + URLEncoder.encode("value2", "UTF-8"));
wr.println(parameters);
wr.close();

/* wrapper the input stream of the connection with BufferedReader to read plain text, and print the response to the console */
BufferedReader br = new BufferedReader(new InputStreamReader(con.getInputStream()));
String line;
while((line = br.readLine()) != null) System.out.println(line);
br.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T03:26:59.627

这是来自[Link](http://kspace.in/blog/2008/05/30/submit-html-form-using-java/)的代码。希望这可以帮助你:)

```
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.PrintStream;
import java.net.HttpURLConnection;
import java.net.URL;

public class HttpPostForm
{
  public static void main(String[] args)
  {
    try
    {
      URL url = new URL( "http://www.aaaa.com/xyz.asp" );

      HttpURLConnection hConnection = (HttpURLConnection)
                             url.openConnection();
      HttpURLConnection.setFollowRedirects( true );

      hConnection.setDoOutput( true );
      hConnection.setRequestMethod("POST"); 

      PrintStream ps = new PrintStream( hConnection.getOutputStream() );
      ps.print("param1=abcd&amp;param2=10341");
      ps.close();

      hConnection.connect();

      if( HttpURLConnection.HTTP_OK == hConnection.getResponseCode() )
      {
        InputStream is = hConnection.getInputStream();
        OutputStream os = new FileOutputStream("output.html");
        int data;
        while((data=is.read()) != -1)
        {
          os.write(data);
        }
        is.close();
        os.close();
        hConnection.disconnect();
      }
    }
    catch(Exception ex)
    {
      ex.printStackTrace();
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T03:44:05.263

要在 Java 中编写 POST 请求，您应该通过 URLConnection 连接到目标 URL，然后在其中写入头部边界字节、边界消息（键、值和任何其他请求数据放置的位置）以及结束边界。

我为我的一个应用程序编写了一个 PostProcess 类，它允许异步 POST 请求上传、键值参数、文件参数（即表单中的文件上传输入）和上传进度跟踪。它还记录服务器响应。

为了大小和可读性，我已经将代码外部上传到[http://textu.be/T](http://textu.be/T)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-09T14:53:21.180

尝试以下代码

```
String url="www.somesite.com";     
Document doc = Jsoup.connect(url).data("data1", "foo").data("data2","foo")
                .userAgent("Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6")
                .referrer("http://www.google.com").post(); 
```

# sql - SQL 事务日志因复制而膨胀

> ID：11497427
> 
> 赞同：2
> 
> 时间：2012-07-16T02:21:17.740
> 
> 标签：sql, database-replication, database-mirroring

我正在尝试设置一个具有大量读/写的复制数据库，尽管整体数据库大小约为 35gb。

已经配置了事务复制服务器，但是在一周多的时间里，日志膨胀到 22GB 并使服务器变慢。

我设法阻止了复制和日志的增长，现在日志稳定在使用的 22gb 的 0.1% 处（我还没有缩小整体日志大小，因为我还没有看到需要这样做）。

*   使用 Windows 备份每晚完成完整备份
*   恢复模式很简单
*   使用 8 个 SAS 10K 驱动器在 RAID10 上运行
*   32GB 内存，Win2008 x64 SP1
*   将 SQL 限制为仅使用 24GB，因此服务器拥有 75% 的内存利用率
*   根据资源监视器，平均磁盘活动约为 100KB/s，队列长度为 0.05，没有任何复制
*   Backup Server 运行相同的操作系统，4GB RAM，RAID1 SATA 7.2k 500GB

问题是 - 我做错了什么导致事务日志不断增长？

如果需要更多信息，请告知我应该使用什么工具，我可以相应地发布它们。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T17:27:54.300

您可以尝试阅读事务日志并调查导致增长的操作。有关更多信息，请查看[打开 LDF 文件并](http://solutioncenter.apexsql.com/open-ldf-file-and-view-ldf-file-content/)在线查看 LDF 文件内容一文

*免责声明：我在 ApexSQL 担任产品支持工程师*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:41:37.100

发生这种情况时，您会在 sys.databases ( SELECT * FROM sys.databases ) 中看到什么“log_reuse_wait_desc”

听起来复制引擎可能会保留事务日志，因为数据尚未完全复制 - 您是否有任何离线订阅者？

# google-fusion-tables - Google FusionTable 未返回正确结果 - 隐藏限制？

> ID：11497428
> 
> 赞同：0
> 
> 时间：2012-07-16T02:21:28.970
> 
> 标签：google-fusion-tables

开始学习 FusionTable API。我有一个相当小的“Hello World”示例 Google FusionTable，其中包含约 32,000 条记录。但是简单的查询似乎返回了明显错误的结果，我想知道我是否完全错过了某些东西，或者有一个我不知道的限制？

使用此表 ID使用[Online FusionTable API SQL 客户端](http://simplehomepage.appspot.com/google/google-fusion-table-query-javascript-sql-client.htm)尝试此[Source 表：](https://www.google.com/fusiontables/DataSource?docid=1xxJtCuJ8V7D6nTEOdeNPGS7Q--VdugQqLtjjYgQ)

```
1xxJtCuJ8V7D6nTEOdeNPGS7Q--VdugQqLtjjYgQ 
```

`SELECT COUNT(SEX) FROM 4546155`返回`32,778`

但`SELECT SEX, COUNT() FROM 4546155 GROUP BY SEX`返回：

```
[table] => object
  [cols] => object
     [0] => SEX
     [1] => count()
  [rows] => object
     [0] => object
         [0] => 1
         [1] => 5431
     [1] => object
         [0] => 2
         [1] => 4025 
```

请注意，5431 + 4025 = 9456，而不是 32,778。我本来预计分别为 18,876 和 13,902，总和为 32,778：

系统是否会在源表中的 10,000 条记录处静默停止聚合查询？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:19:57.503

我相信 FT 正在缓存查询结果，如果查询首先在不完整的数据上运行，这些缓存可能是错误的。

我在上传数据后运行测试的字段（例如 SEX、ETHUN）查询 - 但在计数器说“100% 完成”之前 - 立即返回（< 0.1 秒），结果看起来像是基于一半数据。虽然对其他字段（例如 COPD、ASTHMA）的类似查询返回缓慢（10-30 秒或更长时间）并返回正确结果（或超时并出现 503 错误），然后返回正确结果，然后立即返回。

# com - 如何通过 LAN 使用 COM？

> ID：11497430
> 
> 赞同：2
> 
> 时间：2012-07-16T02:22:02.950
> 
> 标签：com, vb.net-2010, lan

救命！我想编写一个 vb.net 应用程序，它将在我的桌面计算机上运行，​​它通过 LAN 访问我在 Windows Server (2003) 上的电子邮件服务器 (hMailServer)。hMailServer 有一个可访问的 COM 接口。我在任何地方都有管理权。

我在其他地方读到这涉及一个称为 DCOM 的过程，这“几乎很难”，但我还是想尝试一下。

*   我已经在我的项目中添加了对 dll 的引用，并且使用对象模型和 hMailServer 的 com 文档，我能够编写函数。
*   我已经保证我正在为 x86 的目标 CPU 进行编译。
*   我已经在[这个线程](http://www.codeproject.com/Questions/257802/VB-NET-Error-Retrieving-the-COM-class-factory-for)、[这个线程](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/88a6ea68-f476-4231-822f-27fabe59f458/)和[这个优秀的线程](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/88a6ea68-f476-4231-822f-27fabe59f458/)中保证了权限。
*   我尝试将 dll 放在我的 bin 文件夹和 system32 中。
*   这是[我](http://www.hmailserver.com/forum/viewtopic.php?f=9&t=22398&p=139793#p139793)在 hMailServer 论坛中的帖子。

我如何让它在局域网上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:15:52.660

嗯！我一定是问过一个顽固的人，因为一整天后，连一点点东西都没有！

不管怎样，我找到了一些线索。

首先，当然，hMailServer 使用 DCOM 通过 LAN 进行通信。hMailServer 的 COM 接口不包含 DCOM 功能——也就是说，它不会为您建立与服务器的连接！这是答案的真正症结所在。如果您想跟进我的 hMailServer 线程，请[点击此处](http://www.hmailserver.com/forum/viewtopic.php?f=9&t=22398&p=139793#p139793)。在您使用 DCOM 连接到另一台计算机（可能是服务器）上的 hMailServer 后，您可以发送您的 COM 命令。

codeproject 上有两篇关于如何尝试的文章。 [D-CM D-Mystified](http://www.codeproject.com/Articles/666/DCOM-D-Mystified-A-DCOM-Tutorial-Step-1) [Com 端口变得简单](http://www.codeproject.com/Articles/5131/COM-port-made-simple-with-VB-NET?msg=4312557#xx4312557xx)

# facebook-fql - 粉丝页面的 Facebook 事件查询未返回任何结果（适用于其他页面）

> ID：11497436
> 
> 赞同：3
> 
> 时间：2012-07-16T02:22:58.237
> 
> 标签：facebook-fql

我使用的代码很大程度上是从[The Code Of Ninja's solution 中](http://www.codeofaninja.com/2012/05/display-facebook-data-to-your-website.html)借用的。该代码运行了几个月，有一天就停止了工作。当我将另一个页面的 id 插入代码时，它工作得很好。我什至不知道如何解决这个问题......

FB 页面的 id 是“149034208446092”。该页面没有即将发生的事件，但过去的事件（其中有很多）也没有显示（它们应该显示，并且与我测试的其他页面 ID 一起显示）。

注意：所有相关代码都在上面的链接上。我的略有不同，但出于测试目的，我一直在使用他的解决方案的精确副本。

过去的查询在这里：

```
SELECT name, pic, start_time, end_time, location, description, eid 
FROM event 
WHERE end_time < now() 
AND eid 
IN ( SELECT eid FROM event_member WHERE uid = 149034208446092 ) 
ORDER BY start_time DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:59:33.710

这似乎是一个已知的[Facebook 错误](https://developers.facebook.com/bugs/165109696955100)。你唯一能做的就是去 bug 并标记两件事：

1.  单击**是**并填写**此再现是否描述您的问题旁边的表格？**
2.  订阅错误。

# c++ - 如何在 c++ 的构造函数中使用 __FILE__ 和 __LINE__ 作为默认参数？

> ID：11497438
> 
> 赞同：7
> 
> 时间：2012-07-16T02:23:07.143
> 
> 标签：c++, c-preprocessor

我试图在构造函数中使用`__FILE__`and`__LINE__`宏作为默认参数，但我似乎无法让宏使用正确的文件。他们不断从我的头文件中扩展。

更详细地说：我希望将对象实例化为我的类成员的文件和行号。但是我不想每次我想使用对象时都必须手动输入参数。我知道有办法做到这一点，但我无法为我的生活弄明白。我目前正在做的事情如下：

在我的头文件中：

```
mnNumber( float x, const char* filename = __FILE__, int linenumber = __LINE__ ): 
          value( x ), mFileName( filename ), mFunctionName( nullptr ), mLineNumber(     linenumber ), mID( 0 ) 
```

但是，**FILE**和**LINE**被扩展，就好像它们来自我的头文件，而不是我使用 mnNumber 的实际位置。

为了回答我为什么要这样做的问题，我想让代码读取它自己的代码页。我使用的特定值正在管理器中注册，并且允许最终用户编辑它们的值。当最终用户完成编辑该值时，该值将被写回到代码页中。所以，我需要知道价值从何而来。我还允许最终用户说他们永远不需要再次编辑此值，当他们单击该按钮时，该值将从 mnNumber 转换回浮点数，并且代码页上的类型被重写为浮点数. 或者，将……希望如此。

对我有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T02:40:13.370

您可以使用预处理器执行此操作。创建一个扩展`__LINE__`并使用它的宏：

```
struct S {
  S(int line, const std::string& file) :
    line(line), file(file) {
  }
  std::string file;
  int line;
};

#define SCons() S(__LINE__, __FILE__)

int main () {

  S s1 = SCons();
  S s2 = SCons();
  std::cout << s1.line << "\n";
  std::cout << s2.line << "\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T02:27:37.977

你不能这样做——这两个宏在遇到它们时被预处理器替换，因此它们将被交换为头文件名和行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T18:33:53.347

OP在编辑中写道：

> 这并不容易，但 R. Martinho Fernandes 让我走上了正确的道路。而且我认为它不是线程安全的，但到目前为止它仍然有效。
> 
> 我想要的是能够通过将类型更改为 mnFloat 来跟踪和更新浮点数。我设置了一个定义，它在我的管理器中调用一个函数来添加文件、行和函数名称，然后将浮点数更改为我的特殊类型。在管理器内部，它们都通过 ID 链接在一起。当我调用 register 函数时，我会在内部创建一个对象来存储。在同一行，我的特殊类型也被创建了，并且它向管理器注册了自己。两个对象都使用相同类型的 ID 系统（ID 是通过从我每次创建新对象时递增的静态数字复制生成的）。由于它们出现在同一代码页上，因此 ID 始终相同，并且永远不会不同步。假设我不去多线程，我想。感觉像是作弊，但它有效:)
> 
> 这是它的工作原理。我拿这个：
> 
> ```
> float test = 0.5; 
> ```
> 
> 我把它改成这样：
> 
> ```
> mnFloat test = 0.5; 
> ```
> 
> 在我的头文件中，mnFloat 的定义如下：
> 
> ```
> #define mnFloat myManager::getInstance()->register(__FILE__,__FUNCTION__,__LINE__);mnNumber 
> ```
> 
> 因此，代码页更改为该行上的两条指令，并且行号不会增加。它有效！

# c# - 是否可以使用大量的 `try`s 而不是更多的 `if`s？

> ID：11497440
> 
> 赞同：4
> 
> 时间：2012-07-16T02:23:18.470
> 
> 标签：c#, visual-studio, exception, try-catch

在我的游戏中，检查了很多东西，而且索引经常超出范围，如果有时没有绘制或检查东西通常是可以的。目前我的代码很容易阅读，但在调试时，由于正在记录的异常，游戏会丢失一两帧。不过，它在 VS 之外也能正常工作。当我尝试使用大量`if`语句来避免异常情况时，它大大降低了代码的可读性并消除了低 fps 损失。我想知道它是否还有其他影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T02:29:51.050

抛出异常是非常耗费资源的——使用 if/then 语句或其他“正常”流控制要快得多。

异常主要是昂贵的，因为生成异常实例需要执行堆栈遍历来确定异常被抛出的位置（堆栈跟踪）。它还为垃圾收集器创建了额外的负载，并且被认为是非常糟糕的设计，无法在异常情况之外使用异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T02:31:38.747

> 可以使用很多`try`s 而不是更多`if`s 吗？

如果您需要其中任何一个来实现功能性应用程序，那么您的设计可能有问题。异常情况通常被认为是*异常*的，而不是司空见惯的。

您描述的情况（索引超出范围）显然不是例外，特别是因为您忽略了例外，因为这没什么大不了的。这是一个很大的暗示，您应该首先投入精力防止异常发生。

> 当我试图使用大量的 if 语句来避免异常情况时......

正如您所发现的，大量`if`语句不是一个好方法——它很难阅读，而且它可能会隐藏逻辑错误，这只会带来更多的麻烦。

相反，请考虑为您的对象赋予更明确定义和离散的职责，以防止它们进入可能一开始就异常的状态。如果您需要“很多很多”`if`语句，那么您的对象正在检查许多条件，这意味着它们的职责可能太大了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T02:30:44.487

通常，您应该编写代码并构建逻辑，以便不使用异常来处理程序逻辑。在某些情况下，可以使用异常来处理*罕见*但*预期*的情况。但是，控制流应该避免异常，因为它们基本上`goto`是可以使控制流非常混乱的语句，并且它们不是高性能的。

在您的情况下，使用异常处理逻辑错误听起来并不合适。事实上，这些例外听起来就像他们正在做他们应该做的事情。也就是说，他们告诉你你的算法是错误的。

我建议仔细查看您的代码，并确定您的代码为什么会抛出`IndexOutOfBoundsException`. 如果它在您自己的参数的内部处理过程中被抛出，您可能遇到了错误或设计不佳的算法。问：“这个索引是从哪里来的？” “有没有办法编写算法，以便在设计中建立界限而不是事后才添加？”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T02:33:12.707

您应该始终编写代码以避免异常。捕获它们的成本非常高。

您还应该避免大量嵌套`if`语句。你是对的，它们使你的代码可读性降低。

您可能会发现`switch`语句会有所帮助，但还有许多其他方法可以避免异常和`if`语句。

例如，您可以编写此扩展方法：

```
public static class Ex
{
    public static void IfBounded<T>(this T[] @this, int index, Action<T> action)
    {
        if (@this == null) throw new System.ArgumentNullException("@this");
        if (action == null) throw new System.ArgumentNullException("action");
        if (index >= @this.GetLowerBound(0) && index <= @this.GetUpperBound(0))
        {
            action(@this[index]);
        }
    }
} 
```

现在您可以编写以下类型的代码：

```
var messages = new []
{
    "Hello",
    "Goodbye",
};

messages.IfBounded(-1, t => Console.WriteLine(t));
messages.IfBounded(0, t => Console.WriteLine(t));
messages.IfBounded(1, t => Console.WriteLine(t));
messages.IfBounded(2, t => Console.WriteLine(t)); 
```

这种特定的扩展方法可能不适合您的情况，但是这样的事情可以使您的代码非常简洁明了。

# javascript - 将图像库块滚动到当前图像的位置

> ID：11497441
> 
> 赞同：0
> 
> 时间：2012-07-16T02:23:19.813
> 
> 标签：javascript, jquery, css

我找到了在画廊中滚动图像块的有趣解决方案，我在这里详细描述了：[在画廊中滚动可变宽度图像块](https://stackoverflow.com/questions/11497383/scrolling-blocks-of-variable-width-images-in-gallery/11497384#11497384)

## 但是我遇到了一个问题：

**例如，我在 img 'sss' 的整页上，如果我只知道当前图像的 name\href，我如何从这个页面链接到所有 imgs 页面，那么将显示该propper 块（滚动到块位置） ，但不知道块的数量（并且不想实现从图像宽度计算块的代码）？**

## 在我的画廊中滚动工作的逻辑：

```
 -----------------------
    -  ff  ll  mmmm  aa   -
    =======================
<-  =  eee  bbb  dd  ppp  =  ->
    =======================        
    -  xx  sss  dd  qqqq  -
    ----------------------- 
```

`ff` 依此类推-图库中的不同图像（`float: left`; 对于每个 img）

`---`***#all_images*** ( `overflow: hidden; possition: absolute; top: ***`)的标记块

`===`***#visible_frame*** ( `possition: absolute;`)的标记块

因此，当按下导航时，我将对***#all_images***`top`的值设置+/- ，结果***#visible_frame***将是不同的图像集

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:35:33.507

如果您知道图像的名称，您应该可以轻松找到它所在的行/块并找到它的偏移 x/y 位置并相应地调整您的画廊。

您必须遍历页面上的所有图像并找到匹配的来源。

此外，我过去曾使用过[这个 jquery 插件](http://demos.flesler.com/jquery/scrollTo/)来滚动到页面上的位置。

希望这可以帮助。**

# c# - 如何确定我的程序集是否可以被 Mono、MonoTouch、MonoDroid 使用？

> ID：11497444
> 
> 赞同：4
> 
> 时间：2012-07-16T02:23:39.017
> 
> 标签：c#, .net, mono, xamarin.ios, xamarin.android

我是 Mono 的新手。我有一个 .NET Framework 3.5 程序集，我想知道是否可以将它与单声道一起使用。具体来说：

1.  我是否需要使用 Mono 编译我的 .NET 项目，或者 Mono 是否会运行我从 Visual Studio 编译的 .NET 程序集？

2.  是否有单独的 MonoDroid 和 MonoTouch 编译器？

3.  单声道是否适用于混淆程序集？

4.  如何在 Mono、MonoDroid 和 MonoTouch 中测试我的程序集？我真的需要购买 Android 和 iPhone 还是有单声道模拟器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T19:47:37.550

1.  Mono 将运行使用 Visual Studio 编译的程序集。MonoTouch 和 Mono for Android 程序集*通常*需要使用提供的 mono 编译器重新编译，以确保它针对*正确*的框架程序集进行编译（因此您不会使用在运行时不可用的功能）；

2.  每个都带有自己的`smcs`编译器，但它们*大多是*相同的（在 MonoTouch 和 Mono for Android 之间），即一个可能比另一个更新一些，具体取决于发布日期；

3.  这取决于如何进行混淆。有些工具会做不符合 ECMA 但 MS JIT 允许的事情。这些*技巧*现在可能适用于 Mono。

4.  MonoTouch 和适用于 Android 的 Mono 都可以试用，并且可以与 iOS 模拟器 (MonoTouch) 或 Android 模拟器 (Android 的 Mono) 一起使用。然而，模拟器和仿真器不是*真实*的东西（例如性能甚至功能），因此您最终需要设备来确保事情按预期工作（但您可以在没有硬件的情况下开始）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T19:55:22.437

您可能希望针对 mono 迁移分析器运行您的代码，以查看哪些失败或不受支持。您可以在此处找到该工具：[http](http://www.mono-project.com/MoMA) ://www.mono-project.com/MoMA 。

您还可以在[http://www.mono-project.com/Compatibility](http://www.mono-project.com/Compatibility)查看当前单声道与各种 .Net 功能的兼容性。

# javascript - 将 variable={} 传递给函数是什么意思？

> ID：11497446
> 
> 赞同：0
> 
> 时间：2012-07-16T02:24:04.330
> 
> 标签：javascript

这样的事情能达到什么目的？

```
function myFunction(foo, bar={}, boo){
//?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:27:26.547

这不是有效的 JS。在其他语言中，如果未指定 bar，这会将参数设置为该值`{}`，但仅当默认值是最后一个参数时才有意义，或者可以在调用函数时命名参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:31:16.510

它实现了，`SyntaxError: Unexpected token =`即它的无效 JavaScript

# asp.net - 使用 webclient 将数据从 url 下载到 div

> ID：11497449
> 
> 赞同：0
> 
> 时间：2012-07-16T02:24:56.397
> 
> 标签：asp.net, vb.net, url

我试图从另一个 url 获取数据并将其发布到我页面中的 div 中。但我遇到了意外的运行时错误。

在 getSource 方法中，当我将 localhost 页面写为 url 时，出现错误。网址写错了吗？

```
Protected Sub populate()
  litComment.Text = getSource("http://localhost:3395/CGH%20Proj/AntibioticRecordManagement.aspx") 'http://localhost:3395/CGH%20Proj/Comments.aspx")

End Sub

Protected Function getSource(ByVal url As String) As String
    Dim r As String = ""
    Using wc As WebClient = New WebClient()
        r = wc.DownloadString(url)
        Return r
    End Using

End Function 
```

# git - 没有 .git 目录的 Git 克隆

> ID：11497457
> 
> 赞同：190
> 
> 时间：2012-07-16T02:26:16.533
> 
> 标签：git, version-control, git-clone

进行克隆时是否有要传递的标志`git`，例如不要克隆`.git`目录？`.git`如果不是，那么在克隆后删除目录的标志怎么样？

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-07-16T04:32:59.567

利用

```
git clone --depth=1 --branch=master git://someserver/somerepo dirformynewrepo
rm -rf ./dirformynewrepo/.git 
```

*   深度选项将确保复制尽可能少的历史记录以获取该存储库。
*   分支选项是可选的，如果未指定，将获得默认分支。
*   第二行将使您的目录`dirformynewrepo`不再是 Git 存储库。
*   如果您正在执行递归子模块克隆，则深度和分支参数不适用于子模块。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-07-16T03:04:30.783

由于您只想要文件，因此不需要将其视为 git repo。

```
rsync -rlp --exclude '.git' user@host:path/to/git/repo/ . 
```

这仅适用于本地路径和远程 ssh/rsync 路径，如果远程服务器仅提供 git:// 或 https:// 访问，则可能无法正常工作。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2020-03-18T22:10:31.453

或者，如果您安装了[Node.js](https://nodejs.org)，则可以使用以下命令：

`npx degit GIT_REPO`

`npx`随 Node 一起提供，它允许您运行基于二进制节点的包而无需先安装它们（或者，您可以先`degit`使用全局安装`npm i -g degit`）。

[Degit](https://www.npmjs.com/package/degit)是由 Svelte 和 Rollup 的创建者 Rich Harris 创建的工具，他使用该工具通过克隆存储库而不保留 git 文件夹来快速创建新项目。但它也可以用来克隆任何回购一次......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-22T16:26:06.387

对于那些怀疑[解决方案的人](https://stackoverflow.com/a/11498124/9157799)[，`--depth 1`](https://stackoverflow.com/a/11498124/9157799)因为它仍然下载`.git`目录并且您需要在之后手动删除它，也许您需要知道[git clone 的实际工作原理](https://stackoverflow.com/a/48889009/9157799)。

当你通常克隆一个 repo 时，git 将你所有的文件（跨越提交）下载到`.git`目录中。当您使用 克隆时`--depth 1`，git 只会将最新版本的文件下载到`.git`. 之后，git 将[`checkout`](https://git-scm.com/docs/git-checkout)或从工作目录中检索这些文件`.git`（不再下载）。

并且通常，因为里面的文件对象是压缩的，你会通过下载文件而不是下载未压缩`.git`的文件来节省更多的带宽。`git clone --depth 1`对于一些网速慢的人来说，这是值得的（需要运行`rm -rf`）。

我个人认为[该`git archive`解决方案](https://stackoverflow.com/a/3946745/9157799)更好，但由于 GitHub 不支持它，因此`--depth 1`是可行的方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-16T02:34:17.787

你总能做到

```
git clone git://repo.org/fossproject.git && rm -rf fossproject/.git 
```

# c++ - 为什么gdb下socket会失败？

> ID：11497465
> 
> 赞同：4
> 
> 时间：2012-07-16T02:27:11.690
> 
> 标签：c++, windows, gdb, winsock

在 gdb 下突然`socket`崩溃（但工作正常）。这只发生在我初始化winsock时。任何帮助深表感谢。

```
#include <stdlib.h>
#include <stdio.h>
#include <locale.h>

#include <winsock2.h>
#include <Iphlpapi.h>
#ifdef _MSC_VER
    #pragma comment(lib, "ws2_32.lib")
    #pragma comment(lib, "IPHLPAPI.lib")
#endif
#include <windows.h>

unsigned char Network_isInitialized_ = 0;

#define SYSTEMINFORMATION_ISNATIVEWINDOWS 1

unsigned char Network_init_(){
#if SYSTEMINFORMATION_ISNATIVEWINDOWS
    if (Network_isInitialized_){
        return Network_isInitialized_;
    }
    WSADATA wsadata;
    int error = WSAStartup(0x0202, &wsadata);
    Network_isInitialized_ = error == 0 ? 1 : 0;
    return Network_isInitialized_;
#else
    return 1;
#endif
}

void Network_shutdown_(){
#if SYSTEMINFORMATION_ISNATIVEWINDOWS
    if (Network_isInitialized_){
        WSACleanup(); //Clean up Winsock
    }
    Network_isInitialized_ = 0;
#else
    //Unix doesnt need to do anything
#endif
}

typedef struct TCP_Connection_s {
    char *name;
    int port;
    unsigned int ip;

    struct sockaddr_in *connection;
    void *ptr;
    unsigned int socket;
} TCP_Connection;

TCP_Connection* TCP_Connection_malloc(){
    TCP_Connection *connection = (TCP_Connection*)malloc(sizeof(TCP_Connection));
    memset(connection, 0, sizeof(*connection));
    connection->connection = (struct sockaddr_in*) malloc (sizeof(struct sockaddr_in));
    memset(connection->connection, 0, sizeof(*connection->connection));
    return connection;
}

TCP_Connection* myconnect(TCP_Connection *connection){
    if (connection == NULL){
        return NULL;
    }
    connection->socket = socket(AF_INET, SOCK_STREAM, 0);
    if (connection->socket+1 == 0){
        return NULL;
    }
    int ret = connect(connection->socket, (struct sockaddr *)connection->connection, sizeof(*connection->connection));
    if (ret != 0){
        return NULL;
    }
    return connection;
}

TCP_Connection* connectToHost(TCP_Connection *connection, char *address, int port){
    if (address == NULL){
        return NULL;
    }

    if (connection == NULL){
        connection = TCP_Connection_malloc();
    }

    struct hostent *he = (struct hostent *) gethostbyname(address);
    int retryCount = 5;
    while (he == NULL && retryCount > 0){
        he = (struct hostent *) gethostbyname(address);
        Sleep(2000);
        retryCount = retryCount - 1;
    }
    if (he == NULL){
        return NULL;
    }
    struct sockaddr_in temp;
    memcpy(&(temp.sin_addr), he->h_addr, he->h_length);

    connection->connection->sin_family = AF_INET;
    connection->connection->sin_addr.s_addr = INADDR_ANY;
    connection->connection->sin_port = htons(port);
    connection->port = port;

    memcpy(&(connection->connection->sin_addr), he->h_addr, he->h_length);
    return myconnect(connection);
}

int main(int argc, char *argv[]){
    //Random_seedCryptographic();
    Network_init_();
    connectToHost(NULL, "localhost", 1337);
    Network_shutdown_();
    printf("Press any key to continue...");
    fflush(0);
    getchar();
    return 0;
} 
```

```
$ gdb test.exe
GNU gdb (GDB) 7.3.50.20111026-cvs (cygwin-special)
版权所有 (C) 2011 Free Software Foundation, Inc.
许可 GPLv3+：GNU GPL 版本 3 或更高版本
这是免费软件：您可以自由更改和重新分发它。
在法律允许的范围内，不提供任何保证。输入“显示复制”
和“显示保修”了解详情。
此 GDB 配置为“i686-cygwin”。
有关错误报告说明，请参阅：
...
从 /cygdrive/c/test.exe 读取符号...完成。
(gdb) 运行
启动程序：/cygdrive/c/test.exe
[新线程201280.0x60b68]
dll路径太长
[新线程 201280.0x304b0]
警告：无法为 //./globalroot/systemroot/syswow64/mswsock.dll 加载共享库符号。
你需要“set solib-search-path”还是“set sysroot”？

程序收到信号 SIGTRAP，跟踪/断点陷阱。
0x3567125a 在?? () 来自 /cygdrive/c/Windows/syswow64/mswsock.dll
(gdb) BT
#0 0x3567125a 在?? () 来自 /cygdrive/c/Windows/syswow64/mswsock.dll
#1 0x753b8b9d inet_ntoa () from /cygdrive/c/Windows/syswow64/WS2_32.dll
#2 0x753b8972 inet_ntoa () from /cygdrive/c/Windows/syswow64/WS2_32.dll
#3 0x753b89da inet_ntoa () from /cygdrive/c/Windows/syswow64/WS2_32.dll
#4 0x753b3d70 在 WSCInstallProvider ()
   从 /cygdrive/c/Windows/syswow64/WS2_32.dll
#5 0x00000002 在?? ()
#6 0x00000001 在?? ()
#7 0x00000000 在 ?? ()
(gdb)
```

更新：我尝试在 mingw 便携式下在不同的系统上编译相同的文件，并且有效。然后我尝试在我的系统上安装 mingw 并卸载了 cygwin ......仍然无法正常工作 XD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T12:43:57.240

这是因为 Cygwin 试图模拟 UNIX 环境，而您不需要调用`WSAStartup()`UNIX。Cygwin 在后台自动执行此操作，因此您正在复制 Winsock 的初始化/清理。例如，[请参](http://cygwin.com/ml/cygwin/2004-11/msg00865.html)见此。

# internationalization - Playframework 2.0.1DateFormatter 接收系统语言环境

> ID：11497470
> 
> 赞同：3
> 
> 时间：2012-07-16T02:28:03.563
> 
> 标签：internationalization, playframework-2.0

我在 Play 2.0 / Java 中编写了一个自定义 DateFormatter，因为默认的似乎是 i18n-unaware （实现细节在这里无关紧要）

```
public class DateFormatter extends Formatters.SimpleFormatter<Date> 
```

我的应用程序配置包含

```
application.langs="pt-br, en" 
```

浏览器选项中定义的语言包含这两种（接受语言）

逻辑上， Lang.preferred(List) 返回 pt-br 作为首选语言，如

```
@Override
public Action onRequest(Request request, Method method) {

    Lang preferred = Lang.preferred(request.acceptLanguages());
    Logger.debug("Preferred language is " + preferred.toLocale());

    return super.onRequest(request, method);
} 
```

但是（可悲的是）

我的自定义 DateFormatter 收到的语言环境

```
@Override
public Date parse(String date, Locale locale)  {
    ...
} 
```

是**系统的 (JVM) 语言环境**，en-US，而不是请求首选的语言环境。

这是正常的吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:02:13.443

我认为您可以使用此解决方法：

对于每个请求，使用[全局拦截器](http://www.playframework.org/documentation/2.0.2/JavaInterceptors)，您可以设置 LocaleContextHolder 以设置请求的语言环境：

```
public class Global extends GlobalSettings {

    @Override
    public Action onRequest(final Request request, Method actionMethod) {
        LocaleContextHolder.setLocaleContext(new LocaleContext() {
            public Locale getLocale() {
                            Lang preferred = Lang.preferred(request.acceptLanguages());
                return preferred.toLocale();
            }
        });
        return super.onRequest(request, actionMethod);
    }

} 
```

我没有测试它，但值得一试:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T22:51:32.340

遗憾的是，nico ekito 提到的全局覆盖在 Play 2.2 中并不是可靠的解决方案，可能是因为线程。我的经验是，语言环境有时不正确，格式化程序的工作无法预测（有时用其他语言格式化，然后在上下文中设置）。

所以基本上约翰史密斯的最终解决方案要可靠得多。不要使用在格式化程序方法参数中传递的语言环境，而是使用那里的上下文语言环境：

```
public Date parse(String date, Locale locale)  {
    Context context = Context.current();
    Lang preferred = Lang.preferred(context.request().acceptLanguages());
    Locale contextLocale = preferred.toLocale()
    ...
} 
```

# vb.net - 从字符串“”到类型“Double”的转换是无效异常

> ID：11497474
> 
> 赞同：0
> 
> 时间：2012-07-16T02:28:55.100
> 
> 标签：vb.net

我不断收到这条烦人的消息（即使这是我的错）：

> 从字符串“”到类型“Double”的转换无效。

当我在 VB 2010 Express 中调试并点击“SLM”按钮时，我收到此消息。这到底是什么意思，我做错了什么？！？！

我的代码：

```
Public Class frmAssignment_5

    Private Sub btnSLM_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSLM.Click
        Dim Description As String
        Dim Year As String
        Dim Life As String
        Dim SLMDepreciation As String
        Dim SLMText As String = "straight-line"

        txtDescription.Clear()
        txtYear.Clear()
        txtCost.Clear()
        txtLife.Clear()
        lstResult.ClearSelected()

        Description = CStr(txtDescription.Text)
        Year = CStr(txtYear.Text)
        Life = CStr(txtLife.Text)
        SLMDepreciation = CStr(SLMD())

        lstResult.Items.Add("Description: " & Description)
        lstResult.Items.Add("Year of purchase: " & Year)
        lstResult.Items.Add("Cost: " & FormatCurrency(CStr(txtCost.Text), 2))
        lstResult.Items.Add("Estimated life: " & Life)
        lstResult.Items.Add("Method of depreciation: " & SLMText)

    End Sub

    Function SLMD() As Double
        Dim Salvage_Value As Integer = 0
        Dim Life As String = CStr(txtLife.Text)
        Dim Cost As String = CStr(txtCost.Text)

        SLMD = (CDbl(txtCost.Text) - Salvage_Value) / CDbl(Life)

        Return SLMD
    End Function
End Class 
```

错误在“SLMD = (CDbl(txtCost.Text) - Salvage_Value) / CDbl(Life)”处不断发生，但是当我改变周围的东西时，它开始指向我用相同错误改变的东西。

如果有人可以帮助我，我将永远欠债......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T02:37:03.160

VB 抱怨是因为您试图将空字符串“”值转换为数字。如果将 VAL() 放在每个字符串周围，它会将其转换为零。

Salvage_Value 也被声明为 Integer，但您将其用作 Double，因此在计算 SLMD 时也需要对其进行转换：

```
SLMD = (Val(txtCost.Text) - CDbl(Salvage_Value)) / Val(Life) 
```

如果“Life”未设置为某个值，您还有被零除的风险，因此您应该添加代码以确保在此处输入了一个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T02:44:26.353

这与我刚刚回答的一个问题非常相似。当您使用 CDbl 转换字符串时，如果无法进行转换，则会出错，我要做的是使用[Double.TryParse](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)并单独设置值，然后如果出现错误，我会处理它。

```
Function SLMD() As Double
    Dim Salvage_Value As Integer = 0
    Dim Life As Double
    Dim Cost As Double
    If Not Double.TryParse(txtLife.Text, Life) Then
        'Do something to handle error
    End If
    If Not Double.TryParse(txtCost.Text, Cost) Then
        'Do something to handle error
    End If

    Return (Cost - Salvage_Value) / Life

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T02:40:37.987

在我看来，您正在尝试将空`String`( `""`) 转换为`Double`at `CDbl(txtCost.Text)`。这不是有效的转换，因为“ `”不是有效值`Double`。`

 `我认为您应该在尝试转换之前检查`txtCost.Text`它是否实际上是`Double`表示为 a 。`String`您可以尝试阻止来自客户端的无效字符/值，或者在收到它之后（但在尝试转换之前）从服务器检查它。另一种选择是在[try+catch+finally](http://msdn.microsoft.com/en-us/library/fk6t46tz%28v=vs.100%29.aspx)语句中处理它。[这篇文章](https://stackoverflow.com/questions/2440339/input-string-was-not-in-a-correct-format-converting-string-to-double)也可能对您遇到的情况有所帮助。`

# github - Github：删除存储库的观察者

> ID：11497476
> 
> 赞同：8
> 
> 时间：2012-07-16T02:29:11.597
> 
> 标签：github, repository

我想在 Github 中删除我的存储库的特定观察者。有没有办法做到这一点？或者我什至可以跟踪谁在看我的存储库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T02:42:22.463

据我所知，没有办法删除存储库的观察者。当您的存储库在 GitHub 上启动时，它会变为公开的（即任何人都可以观看/分叉它），假设您将它作为*公共*存储库。

*您可以通过单击存储库页面右上角的监视/取消监视*图标旁边的数字来查看谁在监视您的存储库。

*如果*由于某种原因删除特定的观察者至关重要（并且您没有那么多观察者，否则这将是一个巨大的痛苦），您可以删除存储库然后重新创建它。这应该会删除所有观察者，并让您重新开始。*不过，这对普通*观众来说是一个巨大的痛苦。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-05-31T14:14:03.750

目前（截至 2019 年 5 月）无法从特定存储库中删除观察者，但您*可以*通过阻止然后解除阻止来从*所有*存储库中删除观察者（有副作用，详情如下）：

1.  导航到[https://github.com/settings/blocked_users](https://github.com/settings/blocked_users)
2.  将有问题的观察者添加到您的阻止用户列表
3.  从您的阻止用户列表中删除他们
4.  他们将不再在您的任何回购中被列为观察者

副作用：

阻止和解除阻止用户还将切断您与他们的任何关注者关联（即，如果您关注他们，则必须重新关注，反之亦然）

# ios - 什么会导致 UITableView 获得清晰的背景？

> ID：11497481
> 
> 赞同：2
> 
> 时间：2012-07-16T02:29:41.030
> 
> 标签：ios, xcode, uitableview

这是给你的。我的应用程序中有几个表格视图，自 4.0 及更高版本以来一直运行良好......到目前为止。由于某种原因，我的应用程序中的一个表格视图决定继承清晰的背景颜色。

XCode 4.3 (5.1 & 6.0) - 很好

XCode 4.4 (5.1) - 清晰的背景

Xcode 4.4 (6.0) - 很好

我只添加了 6.0 有效的事实，因为它在 Lion 的 5.1 的早期版本中有效。升级到`Mountain Lion GM`Xcode 4.4。坚果。我附上了屏幕截图，显示了我启动应用程序或注销时的初始屏幕，从我的导航控制器中窥视应该是推送视图的内容。我没有在我的应用程序中设置任何表格视图的背景颜色。其他视图都不会受到影响，并且会以相同的方式被推送。

也许这只是 ML 和 Xcode 4.4 中的一些愚蠢的东西，但我想我会检查一下是否有可能我错过了一些东西。我可能也会为此提交一份雷达文件。对我来说似乎有点可疑。

![在此处输入图像描述](../Images/aa4d24f4bad35fe4afa5777021f48792.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:56:31.443

在您的 CellForRowAtInedx 方法中尝试此操作

```
cell.backgroundColor = [UIColor clearColor]; 
```

而在 ViewDidLoad

```
UITableView.backgroundColor = [UIColor clearColor]; 
```

这对我有用。

祝你好运和快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:50:29.690

不幸的是，iOS 5 中的背景颜色确实会引起一些问题。尝试以编程方式而不是从 IB 设置 UITableView 背景属性，它应该可以正常工作。

```
UITableView.backgroundColor = [UIColor someCOlor]; OR
UITableView.backgroundView = // Perhaps some UIImageView with image property set. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:43:58.207

尝试在 viewDidLoad 中添加此代码：-

```
 yourTblView.backgroundColor = [UIColor clearColor];
   yourTblView.backgroundView  = nil; 
```

这将使您的背景清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T23:51:21.693

我终于让我的背景使用默认背景。在界面生成器中，我将 tableview 样式分组，并显示为分组。当我选择它并再次选择分组时，背景重置为正常默认值，此后我没有遇到任何问题。

我将把它归结为在生产 Xcode 和 beta 版本之间打开项目。我认为 xib 文件中的某些内容不同步。没有什么花哨的需要来解决这个问题。感谢所有回答的人。

# asp.net - 将 ASP.NET 架构与 Sencha Ext JS MVC 架构混合

> ID：11497483
> 
> 赞同：0
> 
> 时间：2012-07-16T02:29:42.333
> 
> 标签：asp.net, extjs, ascx, extjs-mvc

下面是 JavaScript 文件，它是我的 extjs 4 MVC 应用程序的根应用程序文件。

我完全按照这些说明操作，并使用 IIS 7 作为我的 Web 服务器：
[http ://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)

并按照以下说明为框架配置 IIS：
[http ://www.sencha.com/forum/showthread.php?33266-Some-Problem-with-JSON&p=229858&viewfull=1#post229858](http://www.sencha.com/forum/showthread.php?33266-Some-Problem-with-JSON&p=229858&viewfull=1#post229858)

我想要一个 ASP.NET 用户控件（ascx 文件）并将其添加到我的页面中。它已经注册，但似乎 Sencha 框架接管并忽略了我页面中的内容。我只是把他们在 MVC 教程中的 index.html 文件做成了一个 aspx 页面，并做了一些小的调整。如何使控件显示？如果这不可能，您是否建议我在 ascx 文件中引用此**app.js**文件（并将其重命名为**control_x.js**而不是**app.js**），然后粘贴该用户控件（ascx）和另一个（目前无法正常工作) 进入 ASP.NET (aspx) 页面？本质上，我不想在我的整个应用程序中依赖这个框架，只是我不想自己构建的控件。

**应用程序.js：**

```
Ext.application({
    requires: ['Ext.container.Viewport'],
    name: 'AM',
    appFolder: 'app',

    controllers: [
        'Users'
    ],

    launch: function () {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',

            items: {
                xtype: 'userlist'
            }

        });
    }
}); 
```

**Users.js（控制器）：**

```
Ext.define('AM.controller.Users', {
    extend: 'Ext.app.Controller',

    stores: [
        'Users'
    ],

    models: [
        'User'
    ],

    views: [
        'user.List',
        'user.Edit'
    ],

    init: function () {
        console.log('Initialized Users! This happens before the Application launch function is called');
        this.control({
            'viewport > panel': {
                render: this.onPanelRendered
            },
            'viewport > userlist': {
                itemdblclick: this.editUser
            },
            'useredit button[action=save]': {
                click: this.updateUser
            }
        });
    },

    onPanelRendered: function() {
        //console.log('The panel was rendered');
    },

    editUser: function(grid, record) {
        //console.log('Double clicked on ' + record.get('name'));
        var view = Ext.widget('useredit');
        view.down('form').loadRecord(record);
    },

    updateUser: function(button) {
        //console.log('clicked the Save button');
        var win    = button.up('window'),
            form   = win.down('form'),
            record = form.getRecord(),
            values = form.getValues();

        record.set(values);
        win.close();
        // synchronize the store after editing the record
        this.getUsersStore().sync();
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:16:34.947

这里的答案是性能。如果您在应用程序中使用 JavaScript，请将其全部放在同一页面上。否则，当您切换页面时，您的 JavaScript 将不得不重新加载。

# python - 将矩阵居中

> ID：11497485
> 
> 赞同：1
> 
> 时间：2012-07-16T02:30:43.207
> 
> 标签：python, string-formatting

我正在尝试使这个板居中，这是代码，我尝试使用 %*s，但没有成功。任何想法？

```
board = [["1","2","2"],["8*1","2@3","5*6"],["9","5","8"],["2","2","2"],
     ["5*6","6*8","0@2"],["1","2","8"],["1","9","8"],["2*7","7*5","4@2"],["1","3","3"]]

counter = 0

print("--------------+---------------+-------------------")

for row in board:
    counter += 1
    print("|"      "%s"     "|") % ("       |      ".join(row).center(47))
    if counter == 3 or counter == 6 or counter == 9:
        print("---------------+---------------------+--------------") 
```

每个盒子的输出应该是这样的

```
 +-----------+
        | 1 | 1 | 9 |

        |2@3|1*6|7*2|

        | 4 | 1 | 2 |
        +-----------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T02:58:18.233

这就是你想要的，我相信：

```
board=[["1","2","2"],["8*1","2@3","5*6"],["9","5","8"],["2","2","2"],
["5*6","6*8","0@2"],["1","2","8"],["1","9","8"],["2*7","7*5","4@2"],["1","3","3"]]
counter=0

print ("----------------+---------------+----------------")

for row in board:
        counter+=1
        s="|"
        for column in row:
                s += column.center(15) + "|"
        print(s)
        if counter==3 or counter==6 or counter==9:
                print ("----------------+---------------+----------------") 
```

输出：

```
----------------+---------------+----------------
|       1       |       2       |       2       |
|      8*1      |      2@3      |      5*6      |
|       9       |       5       |       8       |
----------------+---------------+----------------
|       2       |       2       |       2       |
|      5*6      |      6*8      |      0@2      |
|       1       |       2       |       8       |
----------------+---------------+----------------
|       1       |       9       |       8       |
|      2*7      |      7*5      |      4@2      |
|       1       |       3       |       3       |
----------------+---------------+---------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:54:58.547

```
("|"      "%s"     "|") 
```

这是三个字符串文字：`"|"`,`"%s"`和`"|"`, 用空格分隔。Python 将在编译时将它们连接在一起，因为它们是文字（而不是碰巧包含字符串的变量；这种分析不能在编译时完成）。所以整个事情等价于“|%s|”。

如果您希望在字符串中包含空格，则在字符串中包含空格：“| %s |”，每边需要任意数量的空格。或者，使用字符串乘法和加法运算来构造字符串：`"|" + " " * n + "%s" + " " * n + "|"`例如，`n`每边需要多少个空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T02:57:46.143

我修改了您的代码以产生接近您要求的内容：

```
board = [["1","2","2"],["8*1","2@3","5*6"],["9","5","8"],
         ["2","2","2"],["5*6","6*8","0@2"],["1","2","8"],
         ["1","9","8"],["2*7","7*5","4@2"],["1","3","3"]]

counter = 0

print("+-----------+")

for row in board:
    counter += 1
    print("|%s|" % "|".join(c.center(3) for c in row))
    if counter == 3 or counter == 6 or counter == 9:
        print("+-----------+") 
```

产生：

```
+-----------+
| 1 | 2 | 2 |
|8*1|2@3|5*6|
| 9 | 5 | 8 |
+-----------+
| 2 | 2 | 2 |
|5*6|6*8|0@2|
| 1 | 2 | 8 |
+-----------+
| 1 | 9 | 8 |
|2*7|7*5|4@2|
| 1 | 3 | 3 |
+-----------+ 
```

# java - 无法使用 ADT 20 在 Eclipse 中创建 Android 项目

> ID：11497491
> 
> 赞同：1
> 
> 时间：2012-07-16T02:31:41.353
> 
> 标签：java, android, eclipse, adt

我正在尝试使用 Windows 7 上的 ADT 20 和 Eclipse Juno 在[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)上遵循官方的 Android“构建您的第一个应用程序”教程。下载和安装 SDK 似乎成功了太好了，我已经安装了所有工具、Android 4.1 和 Extras。我还通过[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)安装了 Eclipse 插件，这似乎也很好。我配置了插件，它找到了 4.1 SDK。

但是，当我尝试创建 Android 项目时遇到了麻烦。在我按照向导创建一个 Android 应用程序项目后，我的项目完全是空的，除了文件夹结构。没有对 android jar 的引用，没有“Hello World”文件，绝对没有。

我可以手动添加 android.jar 并开始输入我自己的“Hello World”，但我也无法设置构建目标。

我转到项目**属性 - > Android**，我收到一条错误消息，上面写着

```
"The currently displayed page contains invalid values". 
```

属性页面确实打开了，我可以检查 Android 4.1 作为构建目标，但是当我尝试保存它时，它给了我一条错误消息，该消息消失得太快而无法阅读，然后不保存。

老实说，我不确定我需要做什么才能启动和运行一个基本项目。我在安装 SDK 和插件时没有收到任何错误。任何帮助或建议将不胜感激。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:41:54.670

您应该使用 Eclipse indigo 或 Juno 之前的任何版本，因为它有很多问题。您可以查看在此[链接](http://code.google.com/p/android/issues/list?can=2&q=eclipse%20juno&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&cells=tiles)上注册的各种错误。

一旦您更改了 Eclipse 版本，您的问题就会消失。

# jquery - 沿 svg 路径为 div 设置动画

> ID：11497494
> 
> 赞同：0
> 
> 时间：2012-07-16T02:31:56.307
> 
> 标签：jquery, animation, path, svg

有人可以给我一个解决方案我从 phrogz.net 得到这个库，你可以在这里看到（[http://phrogz.net/SVG/animation_on_a_curve.html](http://phrogz.net/SVG/animation_on_a_curve.html)）

```
function CurveAnimator(from,to,c1,c2){
  this.path = document.createElementNS('http://www.w3.org/2000/svg','path');
  if (!c1) c1 = from;
  if (!c2) c2 = to;
  this.path.setAttribute('d','M'+from.join(',')+'C'+c1.join(',')+' '+c2.join(',')+' '+to.join(','));
  this.updatePath();
  CurveAnimator.lastCreated = this;
}
CurveAnimator.prototype.animate = function(duration,callback,delay){
  var curveAnim = this;
  // TODO: Use requestAnimationFrame if a delay isn't passed
  if (!delay) delay = 1/40;
  clearInterval(curveAnim.animTimer);
  var startTime = new Date;
  curveAnim.animTimer = setInterval(function(){
    var now = new Date;
    var elapsed = (now-startTime)/1000;
    var percent = elapsed/duration;
    if (percent>=1){
      percent = 1;
      clearInterval(curveAnim.animTimer);
    }
    var p1 = curveAnim.pointAt(percent-0.01),
        p2 = curveAnim.pointAt(percent+0.01);
    callback(curveAnim.pointAt(percent),Math.atan2(p2.y-p1.y,p2.x-p1.x)*180/Math.PI);
  },delay*1000);
};
CurveAnimator.prototype.stop = function(){
  clearInterval(this.animTimer);
};
CurveAnimator.prototype.pointAt = function(percent){
  return this.path.getPointAtLength(this.len*percent);
};
CurveAnimator.prototype.updatePath = function(){
  this.len = this.path.getTotalLength();
};
CurveAnimator.prototype.setStart = function(x,y){
  var M = this.path.pathSegList.getItem(0);
  M.x = x; M.y = y;
  this.updatePath();
  return this;
};
CurveAnimator.prototype.setEnd = function(x,y){
  var C = this.path.pathSegList.getItem(1);
  C.x = x; C.y = y;
  this.updatePath();
  return this;
};
CurveAnimator.prototype.setStartDirection = function(x,y){
  var C = this.path.pathSegList.getItem(1);
  C.x1 = x; C.y1 = y;
  this.updatePath();
  return this;
};
CurveAnimator.prototype.setEndDirection = function(x,y){
  var C = this.path.pathSegList.getItem(1);
  C.x2 = x; C.y2 = y;
  this.updatePath();
  return this;
}; 
```

以下是我们在 jQuery 中使用它的方式：

```
var ctx = document.querySelector('canvas').getContext('2d');
ctx.fillStyle = 'red';

var curve = new CurveAnimator([50, 300], [350, 300], [445, 39], [1, 106]);

curve.animate(5, function(point, angle) {
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    ctx.fillRect(point.x-10, point.y-10, 20, 20);
});​ 
```

它很棒，但问题是我需要更多的曲线点，所以我想给它一个 SVG 路径。我的问题是，如何将这个库与我的自定义 svg 路径一起使用？我的 svg 路径是这样的：

```
<path class="fil0 str0" d="M-13.5003 40.5c0,0 198,-14.0003 332,106 134,120 326,275 387,296 61.0002,20.9999 162.647,49.157 207,110 234,321 367,-579 -89.9119,-451.912 -82.3825,22.9144 -117.088,216.912 -117.088,216.912"/> 
```

我看到了一些关于将 this.path.setAttribute 更改为 init 然后为其提供 svg 路径的内容，但我不知道如何执行此操作以及之后如何调用该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:01:12.060

您可以替换构造函数，使其接受您的路径：

```
function CurveAnimator(path) {
    this.path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    this.path.setAttribute('d', path);
    this.updatePath();
    CurveAnimator.lastCreated = this;
} 
```

你可以这样称呼它：

```
var ctx = document.querySelector('canvas').getContext('2d');
ctx.fillStyle = 'red';

var path = "M-13.5003 40.5c0,0 198,-14.0003 332,106 134,120 326,275 387,296 61.0002,20.9999 162.647,49.157 207,110 234,321 367,-579 -89.9119,-451.912 -82.3825,22.9144 -117.088,216.912 -117.088,216.912";
var curve = new CurveAnimator(path);

curve.animate(5, function(point, angle) {
ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
ctx.fillRect(point.x-10, point.y-10, 20, 20);
});​ 
```

# hibernate - 使用hibernate和JPA实现一对一外键的正确方法

> ID：11497497
> 
> 赞同：0
> 
> 时间：2012-07-16T02:32:36.623
> 
> 标签：hibernate, exception, annotations, one-to-one

所以我有 2 个对象，用户和 LastFm 帐户。现在用户可能没有 LastFm 帐户，但每个 LastFm 帐户都将映射到一个用户。既然您对问题空间有了一些了解，那么问题来了：每当我保存我的 LastFm 帐户时，都会出现异常。这是一个例外：

```
Hibernate: insert into LAST_FM_ACCOUNT (LAST_FM_PASSWORD, LAST_FM_USERNAME, USER_ID) values (?, ?, ?)
Exception in thread "main" org.hibernate.exception.ConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`mobsterdb`.`LAST_FM_ACCOUNT`, CONSTRAINT `USER_ID_FK` FOREIGN KEY (`USER_ID`) REFERENCES `MOBSTER_USER` (`USER_ID`) ON DELETE NO ACTION ON UPDATE NO ACTION)
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:74)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy17.executeUpdate(Unknown Source)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:96)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:58)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2767)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3278)
    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:203)
    at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:183)
    at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:167)
    at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:320)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
    at org.hibernate.ejb.event.EJB3SaveEventListener.saveWithGeneratedId(EJB3SaveEventListener.java:71)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
    at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:55)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
    at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:757)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:749)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:745)
    at mobster.persistence.dao.generic.MobsterBaseHibernateDAO.create(MobsterBaseHibernateDAO.java:22)
    at cc.main(cc.java:35)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`mobsterdb`.`LAST_FM_ACCOUNT`, CONSTRAINT `USER_ID_FK` FOREIGN KEY (`USER_ID`) REFERENCES `MOBSTER_USER` (`USER_ID`) ON DELETE NO ACTION ON UPDATE NO ACTION)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1040)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2468)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2719)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2450)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2371)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2355)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 26 more 
```

这是两个实体类：

```
@Entity
@Table(name = "LAST_FM_ACCOUNT")
public final class LastFmAccount implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(generator = "system-id")
@GenericGenerator(name = "system-id", strategy = "identity")
@Column(name = "LAST_FM_ACCOUNT_ID", unique = true)
private int id;

@NotNull
@Column(name = "LAST_FM_USERNAME")
@Type(type = "encryptedString")
private String lastFmUserName;

@NotNull
@Column(name = "LAST_FM_PASSWORD")
@Type(type = "encryptedString")
private String lastFmPassword;

@OneToOne
@JoinColumn(name = "USER_ID")
private MobsterUser user;

public LastFmAccount() {
    /* null op */
}

public LastFmAccount(String lastFmUserName, String lastFmPassword,
        MobsterUser user) {
    super();
    this.lastFmUserName = lastFmUserName;
    this.lastFmPassword = lastFmPassword;
    this.user = user;
}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public String getLastFmUserName() {
    return lastFmUserName;
}

public void setLastFmUserName(String lastFmUserName) {
    this.lastFmUserName = lastFmUserName;
}

public String getLastFmPassword() {
    return lastFmPassword;
}

public void setLastFmPassword(String lastFmPassword) {
    this.lastFmPassword = lastFmPassword;
}

public MobsterUser getUser() {
    return user;
}

public void setUser(MobsterUser user) {
    this.user = user;
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + id;
    result = prime * result
            + ((lastFmPassword == null) ? 0 : lastFmPassword.hashCode());
    result = prime * result
            + ((lastFmUserName == null) ? 0 : lastFmUserName.hashCode());
    result = prime * result + ((user == null) ? 0 : user.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    LastFmAccount other = (LastFmAccount) obj;
    if (id != other.id)
        return false;
    if (lastFmPassword == null) {
        if (other.lastFmPassword != null)
            return false;
    } else if (!lastFmPassword.equals(other.lastFmPassword))
        return false;
    if (lastFmUserName == null) {
        if (other.lastFmUserName != null)
            return false;
    } else if (!lastFmUserName.equals(other.lastFmUserName))
        return false;
    if (user == null) {
        if (other.user != null)
            return false;
    } else if (!user.equals(other.user))
        return false;
    return true;
}

@Override
public String toString() {
    return "LastFmAccount [id=" + id + ", lastFmUserName=" + lastFmUserName
            + ", lastFmPassword=" + lastFmPassword + ", user=" + user + "]";
} 
}
//New Table
@Entity @Table(name = "MOBSTER_USER")
public final class MobsterUser implements Serializable {
private static final long serialVersionUID = 1L;
private String userId, email, password, firstName, lastName;
private char gender;
private Date birthday;

public MobsterUser() {

}

public MobsterUser(String email, String password,
        String firstName, String lastName, char gender, Date birthday) {
    this.email = email;
    this.password = password;
    this.firstName = firstName;
    this.lastName = lastName;
    this.gender = gender;
    this.birthday = birthday;
}

@Id
@GeneratedValue(generator="system-uuid")
@GenericGenerator(name="system-uuid", strategy = "uuid")
@Column(name = "USER_ID", unique = true)
public String getUserId() {
    return userId;
}

public void setUserId(String userId) {
    this.userId = userId;
}

@Column(name = "EMAIL", unique = true)
@NotNull
public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

@Column(name = "PASSWORD")
@NotNull
@Type(type="encryptedString")
public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

@Column(name = "FIRST_NAME")    
@NotNull
public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

@Column(name = "LAST_NAME")
@NotNull
public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

@Column(name = "GENDER")
@NotNull
public char getGender() {
    return gender;
}

public void setGender(char gender) {
    this.gender = gender;
}

@Column(name = "BIRTHDATE")
@Temporal(TemporalType.DATE)
public Date getBirthday() {
    return birthday;
}

public void setBirthday(Date birthday) {
    this.birthday = birthday;
}

@Override
public String toString() {
    return "MobsterUser [userId=" + userId + ", email=" + email
            + ", password=" + password + ", firstName=" + firstName
            + ", lastName=" + lastName + ", gender=" + gender
            + ", birthday=" + birthday + "]";
}

} 
```

现在我知道有几篇关于基本相同问题的帖子，但是有人看到我在这里做错了吗？

# unit-testing - 如何使用 Rhino Mocks 模拟采用谓词的方法

> ID：11497498
> 
> 赞同：2
> 
> 时间：2012-07-16T02:32:55.370
> 
> 标签：unit-testing, lambda, rhino-mocks

我有以下 repo 接口，其中 FindBy 方法采用谓词

```
 public interface IRepo<T> where T : class
{
    IList<T> GetAll();
    IList<T> FindBy(Expression<Func<T, bool>> predicate);
    void Add(T entity);
    void Edit(T entity);
} 
```

我正在尝试测试我的控制器是否确实调用了此方法。这是我的控制器代码

```
 // GET:/Assets/EditAssets
    public PartialViewResult EditAsset(Guid id)
    {
        var asset = _assetRepo.FindBy(ass => ass.Id == id).FirstOrDefault();

        if (asset == null)
        {
            return PartialView("NotFound");
        }

        SetUpViewDataForComboBoxes(asset.AttachedDeviceId);
        return PartialView("EditAsset", asset);
    } 
```

这是我的测试方法

```
 [TestMethod]
    public void editAsset_EmptyRepo_CheckRepoCalled()
    {
        //Arrange
        var id = Guid.NewGuid();

        var stubAssetRepo = MockRepository.GenerateStub<IRepo<Asset>>();
        stubAssetRepo.Stub(x => x.FindBy(ass => ass.Id == id)).Return(new List<Asset> {new Asset()});

        var adminAssetsControler = new AdminAssetsController(stubAssetRepo, MockRepository.GenerateStub<IRepo<AssetModel>>(), MockRepository.GenerateStub<IRepo<AssetSize>>(), MockRepository.GenerateStub<IRepo<AssetType>>(), MockRepository.GenerateStub<IRepo<Dept>>(), MockRepository.GenerateStub<IRepo<Device>>());

        //Act
        var result = adminAssetsControler.EditAsset(id);

        //Assert
        stubAssetRepo.AssertWasCalled(rep => rep.FindBy(ass => ass.Id == id));
    } 
```

但我得到一个argumentNullException。我之前在没有谓词的方法上做过这种测试，它工作正常。那么这个是怎么回事呢？

有没有设置这种测试的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:48:15.710

首先，为了避免 Null 引用异常，您可以使用`IgnoreArguments()`：

```
stubAssetRepo.Stub(x => x.FindBy(null)).Return(new List<Asset> {new Asset()}).IgnoreArguments() 
```

问题是您可能想要验证传递给 FindBy 方法的 lambda 以及它的参数。您可以通过使用`WhenCalled()`可以将 lambda 转发到另一种方法的方法来[执行](http://blog.lowendahl.net/?p=214)此操作，如此处所述。
完整的代码如下所示：

```
 ...
                stubAssetRepo.Stub(x => x.FindBy(null)).Return(new List<Asset> {new Asset()}).
    IgnoreArguments().WhenCalled(invocation => FindByVerification((Expression<Func<Asset, bool>>)invocation.Arguments[0]));
        ....

            //Act
            var result = adminAssetsControler.EditAsset(id);

            //Assert
            stubAssetRepo.VerifyAllExpectations();
        }

        public void FindByVerification(Expression<Func<Asset, bool>> predicate)
        {
            // Do your FindBy verification here, by looking into
            // the predicate arguments or even structure
        } 
```

# algorithm - 使用 BIT 计数反转

> ID：11497502
> 
> 赞同：11
> 
> 时间：2012-07-16T02:33:23.080
> 
> 标签：algorithm

我知道这个问题之前已经讨论过，但我有兴趣使用二进制索引树来做这个。我找到[了这个](http://www.quora.com/Algorithms/How-can-I-efficiently-compute-the-number-of-swaps-required-by-slow-sorting-methods-like-insertion-sort-and-bubble-sort-to-sort-a-given-array)链接来展示如何做。我没有完全按照解释。有人可以给我解释一下为什么下面给出的内容是真的。

```
Create a BIT of size greater than n(no of elements). Iterate through array A (
let j be the index of loop),and for each element A[j] do:

1) Add j-sum(A[j]) to the number of inversions
2) add(A[j], 1) (i.e. add 1 to the position A[j] on BIT. This effectively 
counts the number of time value A[j] is seen so far) 
```

我不明白为什么这有效。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-05T05:04:01.620

当一个元素大于数组中跟随它的某个元素时，就会发生反转。

我们可以通过按第二个元素对反转进行分组来计算反转。例如，在数组 [4, 3, 1, 2] 中，元素对 (4, 3), (4, 1), (4, 2), (3, 1) 和 (3, 2) 是倒置。我们按第二个元素对它们进行分组，因此：[[(4, 1), (3, 1)], [(4, 2), (3, 2)], [(4, 3)]]。

我们依次考虑每个元素，并计算它是第二个元素的反转次数。在示例中，元素 4 是 0 反转中的第二个元素，元素 3 是 1 反转中的第二个元素，元素 1 和 2 中的每个反转 2。

为了使任何给定元素成为反转的第二个元素，数组中必须有一个更大的元素在它之前的某个位置。

我们通过从左到右遍历数组来有效地执行计数，并始终使用 BIT 跟踪到目前为止每个值的元素数量。最初我们的频率表将是 [0, 0, 0, 0]，因为我们根本没有看到任何元素。在我们访问 4 之后，我们更新它的频率，给出 [0, 0, 0, 1]。访问3之后，[0,0,1,1]，以此类推。

每次我们访问一个位置时，我们使用 BIT 来找出到目前为止访问过的元素有多少大于它。因此，例如当我们遇到 1 时，BIT 当前包含 [0, 0, 1, 1]，表示到目前为止有 0 个 1 和 2、一个 3 和一个 4。通过添加值 0 + 1 + 1 ，我们计算到目前为止大于 1 的元素的数量。

将*所有*这些单独的计数相加得到反转的总数。

请注意，通常，您必须使用*坐标压缩*才能使其有效。例如，如果您的初始数组包含像 A = [92, 631, 50, 7] 这样的数字，则不应分配具有数百个元素的 BIT。相反，对数组进行排序以确定 7 < 50 < 92 < 631，这允许我们分配等级 7 => 1, 50 => 2, 92 => 3, 631 => 4; 然后用它的等级替换每个元素，得到 B = [3, 4, 2, 1]。该数组的反转次数将与原始数组相同，因为 B[i] > B[j] 当且仅当 A[i] > A[j]。

（注意：真正的程序员可能会使用从零开始的索引。）

# c++ - 基于角度的 C++ SDL 碰撞

> ID：11497504
> 
> 赞同：0
> 
> 时间：2012-07-16T02:33:31.190
> 
> 标签：c++, sdl, collision, angle

我正在使用 c++ 和 SDL 创建 Pong 克隆。

我正在尝试根据角度进行球的碰撞和反弹。我已经成功地创建了这样的方法，但是它在非常接近 90、180、270 或 0 度的角度下失败，这导致它有点滞后并且反弹不那么精确/正确。

这是使球在屏幕的所有边界内反弹的代码：

```
void Ball::wall_collision(SDL_Surface *S){

   //bounds of the screen
    if(x - radius < 0 || x + radius > S->w || y - radius < 0 || y + radius > S->h){

       // add 2*pi rads to current direction      
       direction = direction + d_pi;

    }
 } 
```

这当然不会完全失败，球确实会正确弹跳，但会滞后并且有时会在接近 180,0,90,270 度的角度不正确地弹跳，就像之前声明的那样。

另一件事，我将“方向”（球的方向以弧度为单位）和“d_pi”（pi 加倍）变量声明为浮点数，但是当 d_pi 具有十进制精度（例如 6.28318531 弧度）时，碰撞完全失败，不会发生弹跳但当我将“d_pi”更改为 6.0 或 6.1 时，碰撞会起作用。我不知道为什么会发生该错误，但在计算新方向时会导致不准确。

我想知道一种解决“d_pi”变量问题的方法，或者知道任何其他方法可以根据二维空间中的方向角度进行碰撞/反弹，当然（在简单的乒乓球环境中没有摩擦或重力）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:36:43.717

我的猜测是，在这些角度，由于某种原因，条件被满足了两次（因此更多次）。问题是你只是检查球的位置，而要反弹，它也必须朝着正确的方向前进。

尝试这个

```
if(x - radius < 0 && speed_x < 0 || x + radius > S->w && speed_x > 0 || y - radius < 0 && speed_y < 0 || y + radius > S->h && speed_y > 0) ... 
```

这里 speed_x 和 speed_y 是 sin(direction) 和 cos(direction)，可能交换或使用一些系数。从更新 x 和 y 值的位置获取它们。

# git - 将 RubyMine 与 GitHub for Windows 集成

> ID：11497506
> 
> 赞同：6
> 
> 时间：2012-07-16T02:33:41.600
> 
> 标签：git, rubymine, github-for-windows

我*只是在*学习 Ruby 和 Rails，并在 Windows 上使用 RubyMine 作为我的 IDE。GitHub 刚刚发布[了适用于 Windows 的 GitHub](http://windows.github.com/)。我安装了它，它看起来像一个不错的界面。但是，它似乎没有为 RubyMine 安装 git.exe 之类的东西来获取和使用。所以 RubyMine 抱怨它找不到 git，而 git（以 GitHub for Windows 的形式）坐在那里，轻描淡写地忽略了 RubyMine。

自然，我在 GitHub 站点上查找了信息 - 没有。我是否必须为 RubyMine 安装“旧”的 git 客户端才能使用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T02:59:08.323

**GitHub**发行版与解压后的**PortableGit**捆绑在一起，您可以在 RubyMine`AppData\Local\GitHub`中使用这个**git客户端。**

可以在我系统上的 RubyMine 中使用的**GitHub安装提供的****git**可执行文件的完整路径是：

 **```
c:\Users\<user>\AppData\Local\GitHub\PortableGit_0812189c12ccff4584523d6efce294a33dd2332a\bin\git.exe 
```

请注意，它可能是路径中的一些随机哈希，因此在您的系统上可能会有所不同。

如果不想挖这个可执行文件，直接安装使用[msysgit](http://code.google.com/p/msysgit/)，应该没有什么区别，其实目前**GitHub PortableGit**报的版本是：

`git version 1.7.10.msysgit.1`与撰写此答案时可用`git version 1.7.11.msysgit.1`的最新**msysgit 相比。**所以“旧”命令行客户端比“新”GitHub 提供的客户端更新，至少现在是这样。**

# cakephp - CakePHP 2：使用身份验证的重定向循环

> ID：11497511
> 
> 赞同：2
> 
> 时间：2012-07-16T02:34:32.780
> 
> 标签：cakephp, authentication, redirect, acl

我收到一个重定向循环错误，对于我的一生，我无法弄清楚如何或为什么。这是我的设置：

**路由器**

```
Router::connect('/', array('controller' => 'pages', 'action' => 'display', 'home')); 
```

**应用控制器**

```
class AppController extends Controller {
    public $components = array(
        'DebugKit.Toolbar',
        'Acl',
        'Auth' => array(
            'authorize' => array('Actions' => array('actionPath' => 'controllers')),
            'loginAction' => array('controller' => 'users', 'action' => 'login'),
            'loginRedirect' => array('controller' => 'users', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home')
        ),
        'Session'
    );
    var $helpers = array('Html', 'Form', 'Session');

    public function isAuthorized($user){
        return true;
    }

    function beforeFilter() {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:50:24.320

这可能是因为您没有将 display() 方法设置为 public。这就是为什么它可能会重定向到同一页面并且该网页未经过身份验证。

因此，您可以使用以下代码将您的“display() 方法”放在页面控制器中，以便公众访问：

```
 //Define following method in your controller PagesController.php
 function beforeFilter()
 {
      $this->Auth->allow('display');
 } 
```

希望它对你有用。请询问是否不适合您。

# git - Git致命错误：“找不到参考”

> ID：11497516
> 
> 赞同：2
> 
> 时间：2012-07-16T02:35:28.753
> 
> 标签：git, github, push, fatal-error

我刚才创建并初始化了一个空存储库。我一直在尝试提交并推送它们，但奇怪的事情正在发生。

1）我将在我想要的文件夹中执行“git status”并查看所有未跟踪的文件。然后，我将执行“git add [file]”。然后，我将再次执行“git status”，但我刚刚添加的文件根本不显示 - 不在新文件、跟踪文件或未跟踪文件中 - 它就消失了。

2）当我尝试做'git push origin master'时，我收到消息

```
fatal: "https://github.com/*****/******.git/info/refs not found: did you run git update-server-info on the server?" 
```

到底是怎么回事？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T02:40:06.153

您的存储库已损坏；听起来该`refs`文件夹已被意外删除。幸运的是，如果你没有做出任何提交，那么你并没有真正失去任何东西；只需 delete `.git`，然后`git init`再次，您应该能够提交。

另外，请注意，如果这是一个 GitHub 存储库，并且您在创建存储库和尝试推送之间更改了 GitHub id，这是看到 refs-not-found 错误的另一个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:32:39.243

好吧，所以越来越多的错误不断出现，但我想出了一个解决它的方法......

在我的 git 页面上删除存储库后，我读取了它，然后初始化了存储库，没有

```
git remote add origin3 https://github.com/[user]/[repo].git 
```

然后做了一个

```
git pull origin3 master 
```

（我猜它已经检索了我之前所做的提交？）。我试着做

```
git push origin3 master 
```

但是我遇到了一个致命的 403（HTTP 请求）错误，所以我做了这个小笨蛋：

```
git remote set-url origin ssh://git@github.com/[user]/[repo].git 
```

然后

```
git push origin master 
```

我是金色的。

# objective-c - plist 在字典中写入数据

> ID：11497517
> 
> 赞同：0
> 
> 时间：2012-07-16T02:35:41.613
> 
> 标签：objective-c, ios, ios5, plist

是否可以通过代码编辑我们的 pList 文件中的值或在我们的资源中的值？这意味着我的 plist 文件不是以编程方式创建的，我想以编程方式编辑它的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:39:34.383

在您的应用程序包中，不：您不能在应用程序包中写入文件。

但是，您可以在应用程序首次启动时将该文件复制到应用程序沙箱的 Documents 或 Library 目录，然后从那里编辑 plist 文件——无论它是由代码创建还是手动创建的都不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:27:36.327

我在我的应用程序中做了类似的事情。我创建了一个 plist，它基本上是我游戏的一堆关卡。每个级别都是一个数组，具有一大堆不同的属性，如 NSNumbers 和 NSStrings 等。我将原始 plist 添加到我的应用程序包中，但是当用户第一次启动应用程序时，我创建 plist 的副本并存储它作为带有核心数据的字典。然后我可以将所有数据加载并保存到 plist 的核心数据副本中。

您对 plist 所做的所有更改都保存在 Core Data 中，但原始 plist 没有更改，因此您必须确保一旦您保存了游戏文件，就加载该文件而不是 plist。plist 只会被读取一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T03:47:08.063

试试这个[链接](http://iphonesdevsdk.blogspot.in/2011/04/plist.html)。您可以像添加和删除一样更新 plist 中的值。

# iphone - 使用 UItabbar 提升模态视图控制器仍然存在

> ID：11497519
> 
> 赞同：0
> 
> 时间：2012-07-16T02:35:53.690
> 
> 标签：iphone, ios

我正在使用这个：

[https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar](https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar)

我使用以下方法提出了模态视图：

在 BaseViewController.m 中添加了中心按钮

```
-(void) addCenterButtonWithImage:(UIImage*)buttonImage highlightImage:(UIImage*)highlightImage 
```

只需添加观察者：

```
[button addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后显然实现：

```
-(void)click:(id)sender{
[self presentModalViewController:[[UIViewController alloc] init] animated:YES];
} 
```

当我的视图控制器出现时，我的标签栏消失了，如何将其保留在我的屏幕上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:54:23.370

在你的初始化方法中，（或 viewDidload - 我没有看到你的 github 链接）试试这个：

```
self.hidesBottomBarWhenPushed = NO; 
```

# java - JDBC (JTDS) SQL Server 连接在 SSL 身份验证后关闭

> ID：11497530
> 
> 赞同：6
> 
> 时间：2012-07-16T02:37:33.487
> 
> 标签：java, sql-server, ssl, jtds

我正在使用 jTDS JDBC SQLServer 库连接到 SQL Server 2008 数据库。它总是在没有 SSL 的情况下工作，但是一旦我们启用它，我就无法连接它。我已经跟踪了如下所示的 Java 并检查了数据库端的日志，并且身份验证工作正常，但在尝试执行查询时立即断开连接。有人见过这个问题吗？

```
main, received EOFException: ignored
main, called closeInternal(false)
main, SEND TLSv1 ALERT:  warning, description = close_notify
Padded plaintext before ENCRYPTION:  len = 32
0000: 01 00 DF 4A F1 23 CF E7   6B 62 3D 7D 4D CD C9 AD  ...J.#..kb=.M...
0010: 26 7B 16 59 84 9A 09 09   09 09 09 09 09 09 09 09  &..Y............
main, WRITE: TLSv1 Alert, length = 32
[Raw write]: length = 37
0000: 15 03 01 00 20 12 0A 45   80 96 80 F8 04 62 2F 62  .... ..E.....b/b
0010: E0 35 B9 4D 67 B0 4D D7   AC 9C CF C7 57 CA E1 B2  .5.Mg.M.....W...
0020: 9F DC BA 5E F8                                     ...^.
main, called closeSocket(selfInitiated)
main, called close()
main, called closeInternal(true)
java.sql.SQLException: I/O Error: DB server closed connection.
    at net.sourceforge.jtds.jdbc.TdsCore.executeSQL(TdsCore.java:1053)
    at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQLQuery(JtdsStatement.java:465)
    at net.sourceforge.jtds.jdbc.JtdsStatement.executeQuery(JtdsStatement.java:1304)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:390)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC3.<init>(ConnectionJDBC3.java:50)
    at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at getConnection.main(getConnection.java:25)
Caused by: java.io.IOException: DB server closed connection.
    at net.sourceforge.jtds.jdbc.SharedSocket.readPacket(SharedSocket.java:848)
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:727)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:466)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:103)
    at net.sourceforge.jtds.jdbc.ResponseStream.peek(ResponseStream.java:88)
    at net.sourceforge.jtds.jdbc.TdsCore.wait(TdsCore.java:3932)
    at net.sourceforge.jtds.jdbc.TdsCore.executeSQL(TdsCore.java:1046) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T22:43:56.070

`ssl=request`通过添加或`ssl=require`连接字符串的 URL，我能够绕过相同的基本错误。这要么尝试要么要求加密连接。如果 SQL Server 设置为需要加密连接，则 ssl=require 将强制连接使用 SSL 并满足 SQL Server。

例子：

> jdbc:jtds:sqlserver://[SERVER]/[DATABASE];ssl=require;

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-23T17:29:42.073

Oracle 为已知会干扰 Microsoft JDBC/jTDS 连接的 SSL/TLS BEAST 攻击引入了安全修复程序。

设置`-Djsse.enableCBCProtection=false`系统变量将禁用修复并可能允许连接。

在此 SO 线程中找到的信息：[Java7 sqljdbc4 - getConnection() 上的 SQL 错误 08S01](https://stackoverflow.com/questions/8988945/java7-sqljdbc4-sql-error-08s01-on-getconnection)

# android - 将在后台自动运行和停止的服务

> ID：11497533
> 
> 赞同：0
> 
> 时间：2012-07-16T02:38:06.230
> 
> 标签：android, service

需要一个在后台运行的服务，它会在 30-120 秒后唤醒并找到设备所在的位置，然后将位置发送到数据中心并进入睡眠状态。30-120 秒后再次唤醒服务并确定位置然后去睡觉。我可以手动启动和停止服务。但我需要启动（30 到 120 秒之间）并自动停止服务。我无法保持服务运行，因为它会耗尽电池。

```
So,My question is how can i start and stop the service automatically? 
```

提前感谢您的任何建议。

我的代码是

```
public class Service extends Activity {
   @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button start = (Button)findViewById(R.id.startButton);
        Button stop = (Button)findViewById(R.id.stopButton);

        start.setOnClickListener(startListener);
        stop.setOnClickListener(stopListener);

   }

private OnClickListener startListener = new OnClickListener() {
public void onClick(View v){
    startService(new Intent(Service.this,SimpleService.class));
} 
```

};

```
private OnClickListener stopListener = new OnClickListener() {
    public void onClick(View v){
        stopService(new Intent(Service.this,SimpleService.class));
    }               
};
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:44:46.283

您可以根据`AlarmManager`需要使用 Class。创建一个将`Service`在特定计时器间隔（在您的情况下为 30-120 秒）唤醒的警报。`onDestroy()`唤醒时通过调用它的方法来销毁先前正在运行的服务。

# c++ - 将 cout 值写入文本文件

> ID：11497536
> 
> 赞同：0
> 
> 时间：2012-07-16T02:38:19.377
> 
> 标签：c++, file, ofstream

for 循环是随机化 65 - 90 并使用 (char) 以字母 AZ 显示它们。

我可以在控制台中以字母 AZ 显示，但我无法将它们写入文本文件。

```
for(i = 0; i < 26; i++)
    cout << (char) (letter[i] + 'A' - 1) << " ";

cout << endl;

ofstream output;
output.open("output.txt");
output << (char)letter[i] + 'A' - 1 << endl;
output.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:37:09.537

由于*std::ofstream继承自与 (* *std::ostream*`std::cout` )的实例相同的类型，因此它们的接口相同，因此将一些方法添加到*文件处理*流中，但除此之外它们是可互换的。

 **如上所述，您唯一需要的是，您实际上在两种情况下都**以相同的方式**实现功能，目前：（通过阅读您的代码段）您不是。

1.  *std::ofstream*示例没有任何循环
2.  *std::ofstream*片段中的评估顺序不同（因为您不使用`()`）

 ** * *

为了确保无论您是写入文件还是*标准输出*都使用相同的实现，您可以将代码包装在一个函数中，使其接受对*std::ostream*的引用，如下面的代码片段所示。

```
#include <iostream>                                                           
#include <fstream> 
```

```
void                                                                          
do_whatever (std::ostream& output_stream)                                     
{                                                                             
  int letter[] = {                                                            
    1,2,3,4,5,6,7,8,9,10,11,12,13,14,                                         
    15,16,17,18,19,20,21,22,23,24,25,26                                       
  };                                                                          

  for (int i =0; i < 26; ++i)                                                 
    output_stream << (char) (letter[i] + 'A' - 1) << " ";                     
} 
```

```
int                                                                           
main (int argc, char *argv[])                                                 
{                                                                             
  std::ofstream file_stream;                                                  

  file_stream.open ("file.txt");                                              

  do_whatever (file_stream);                                                  
  do_whatever (std::cout);                                                    
} 
```***

# c# - Linq to Sql SelectMany

> ID：11497539
> 
> 赞同：2
> 
> 时间：2012-07-16T02:39:06.097
> 
> 标签：c#, sql, linq

我试图了解 Sql SelectMany。我想在下面的查询中使用它来查看使用 SelectMany 与 Select 相比如何生成结果。我知道我可以在这里只使用一个选择...我有一个表用户，其 Id 为 int，位置为字符串。当我运行下面的查询时，出现异常“System.String 类型不支持序列运算符”。你能告诉我如何迭代 SelectMany 返回的结果并将结果打印到控制台。

```
UsersDataContext db = new UsersDataContext();

var results = db.Users.Where(u=> u.ID == 5 || u.ID == 6).SelectMany(u => u.Location);

foreach (var c in results)
{
    Console.WriteLine(c);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T02:46:48.107

您应该在此处使用 .Select。

来自 SelectMany 上的 MSDN：

> 将序列的每个元素投影到 IEnumerable 并将生成的序列展平为一个序列。

基本上 SelectMany 的工作是将 lambda 指向一个集合，然后将其展平为单个结果集。您的示例中的位置不是集合

# string - linq 到实体连接字符串

> ID：11497544
> 
> 赞同：0
> 
> 时间：2012-07-16T02:39:50.547
> 
> 标签：string, entity-framework, connection

刚刚完成我的项目。在我的本地机器上测试并完全运行，但是当我部署到我的主机时，我收到以下错误：

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

对于您的信息，我在 Web.Config 中的连接字符串如下所示：

```
 <connectionStrings>
        <add name="TVTMainDatabaseEntities" connectionString="metadata=res://*/App_Code.TVTModel.csdl|res://*/App_Code.TVTModel.ssdl|res://*/App_Code.TVTModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\TVTMainDatabase.mdf;integrated security=True;user instance=True;multipleactiveresultsets=True;App=EntityFramework&quot;"
            providerName="System.Data.EntityClient" />
        <add name="FAQString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\TVTMainDatabase.mdf;Integrated Security=True;User Instance=True"
            providerName="System.Data.SqlClient" />
    </connectionStrings> 
```

如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:17:07.557

您的主机（PC2）中的本地计算机（PC1）不同，这就是发生此错误的原因。

./ 表示您的 ServerName 和 SQLEXPRESS 是您的命名实例。

您应该做的是完成连接字符串并在本地 pc sqlexpres 登录上注册您的主机。（Windows 身份验证）

```
Data Source=yourServerAddress/SQLExpress;Initial Catalog=YourDataBase;Integrated Security=SSPI; 
```

或者如果您在数据库上创建用户名密码（sql server authentication）会更好。

```
Data Source=myServerAddress/SQLExpress;Initial Catalog=yourDataBase;User Id=myUsername;Password=myPassword; 
```

参见：[connectionstring.com](http://www.connectionstrings.com/sql-server-2008)

问候

# mongodb - 如何在 Meteor JS 中对集合进行分组/关联？

> ID：11497545
> 
> 赞同：2
> 
> 时间：2012-07-16T02:39:53.323
> 
> 标签：mongodb, meteor

> **可能重复：**
> [Meteor 中是否可以进行“分组”聚合查询？](https://stackoverflow.com/questions/11266977/are-group-by-aggregation-queries-possible-in-meteor-yet)

我正在尝试建立一个列表，显示组（客户）中的记录（项目）。一个例子是：

客户 A - 项目 1 - 项目 2 - 项目 3

客户 B - 项目 1 - 项目 2 - 项目 3

# objective-c - NSValue/NSNumber 创建给定的 encoding/objCType

> ID：11497552
> 
> 赞同：1
> 
> 时间：2012-07-16T02:40:36.817
> 
> 标签：objective-c, ios, encoding, nsnumber, nsvalue

我正在尝试通过 GameCenter 同步对象，并在两侧使用 KVC 访问它们的值。设置数值 using`setValue:forKey:`要求它们是`NSNumber`对象。
`NSValue initWithBytes:objCType:`给我对象，甚至传递**int**，**float**等`NSValue`的编码。

 ****你们有更好的解决方案而不是手动检查编码吗？

```
- (NSValue*)smartValueWithBytes:(void*)value objCType:(const char*)type
{
    if (0 == strcmp(type, @encode(int)))
    {
        int tmp;
        memcpy(&tmp, value, sizeof(tmp));
        return [NSNumber numberWithInt:tmp];
    }
    if (0 == strcmp(type, @encode(BOOL)))
    {
        BOOL tmp;
        memcpy(&tmp, value, sizeof(tmp));
        return [NSNumber numberWithBool:tmp];
    }
    //etc...
    return [NSValue valueWithBytes:value objCType:type];
} 
```

如果这是要走的路，那么我需要为 KVC 处理`NSNumber`的唯一子类是什么？`NSValue`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:08:02.893

这是我对这个问题的解决方案，只对浮点值进行了专门化（因为它们很奇怪！）

```
NSValue *safeValueForKVC(const void *input, const char *type)
{
    const char numericEncodings[] = { 
        'c',
        'i', 
        's', 
        'l', 
        'q', 
        'C', 
        'I',
        'S',
        'L',
        'Q',
        'f',
        'd',
    };
    const size_t sizeEncodings[] = {
        sizeof(char),
        sizeof(int),
        sizeof(short),
        sizeof(long),
        sizeof(long long),
        sizeof(unsigned char),
        sizeof(unsigned int),
        sizeof(unsigned short),
        sizeof(unsigned long),
        sizeof(unsigned long long),
        sizeof(float),
        sizeof(double),
    };

    int typeLen = strlen(type);

    if (typeLen == 1)
    {
        for (int i = 0; i < sizeof(numericEncodings); i++)
        {
            if (type[0] == numericEncodings[i])
            {
                // we have a numeric type, now do something with it
                if (i == 10)
                {
                    // floating-point value
                    float fValue = 0;

                    memcpy(&fValue, input, sizeEncodings[i]);

                    return [NSNumber numberWithFloat:fValue];
                }
                if (i == 11)
                {
                    // double value
                    double dValue = 0;

                    memcpy(&dValue, input, sizeEncodings[i]);

                    return [NSNumber numberWithDouble:dValue];
                }

                // standard numeric value, simply padding with false bits should work for any reasonable integer represetntation
                long long value = 0;
                memcpy(&value, input, sizeEncodings[i]);

                return [NSNumber numberWithLongLong:value];
            }
        }
    }

    return [[NSValue alloc] initWithBytes:input objCType:type];
} 
```****

# android - 有意发送短信

> ID：11497556
> 
> 赞同：0
> 
> 时间：2012-07-16T02:41:31.357
> 
> 标签：android, android-intent

我已经阅读了之前发布的所有文档和问题，但我找不到自己的答案。通过编写以下代码，我想在附近时发送短信。

首先，我想检查一下意图是否只创建短信而不发送？如果没有，有没有办法可以发送短信以获取接近警报。其次，由于某些原因，proximityalert 没有启动，代码有问题吗？

谢谢。

```
Intent smsintent = new Intent(android.content.Intent.ACTION_VIEW);

smsintent.putExtra("address", "96424127"); 
smsintent.putExtra("sms_body", "child alert");
smsintent.setType("vnd.android-dir/mms-sms"); 

PendingIntent pendintent = PendingIntent.getService(this, 0, smsintent, 0);
lm.addProximityAlert(103.8497215, 1.3630663, 1000, 100000000, pendintent);` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:36:48.630

您应该使用`registerReceiver`带`PendingIntent`类的方法来发送短信。下面我发布我的代码以发送短信： -

```
 private void sendSMS(String phoneNumber, String message)
    {        
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case android.telephony.SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case android.telephony.SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case android.telephony.SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case android.telephony.SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                        
                }
            }
        }, new IntentFilter(DELIVERED));        

        android.telephony.SmsManager sms = android.telephony.SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);        
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:58:30.780

试试这个 smsintent.setData(Uri.parse("sms:"));

# javascript - CSS3 样式复选框

> ID：11497561
> 
> 赞同：0
> 
> 时间：2012-07-16T02:43:26.473
> 
> 标签：javascript, html, jquery-ui, css, jquery-mobile

我正在尝试使用纯 css3 获取下面的这个特定图像， ![在此处输入图像描述](../Images/62e296c4e9ba0f71c7f353a71f78b48d.png)

工作原理：该应用程序的工作方式是，一旦打开页面上的切换按钮，复选框就会被激活，用户可以像下图一样选中或取消选中这些框。功能方面，该应用程序是完成但在对齐 CSS 时遇到问题，因此它看起来像下面的图像。请参考这个作为一个工作示例和我到目前为止的进展[http://jsfiddle.net/YGeZD/](http://jsfiddle.net/YGeZD/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:21:36.760

您可以查看[jquery mobile 文档](http://jquerymobile.com/demos/1.1.1/)并尝试使用它，我认为学习它并不难。稍后我会给你一个演示，加油！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:54:20.680

我对您的唯一解决方案是通过将其不透明度设置为零来隐藏复选框，然后通过具有背景图像的元素处理您的视觉开/关状态，如下所示：

```
<div class="checkbox_frame">
 <input type="checkbox" value="None" />
 <span class="state"></span>
</div> 
```

CSS：

```
.checkbox_frame {
position: relative;
}

input[type="checkbox"] {
width: 30px; height: 30px;
position: absolute;
opacity: 0;
}

input[type="checkbox"] + .state {
display: block;
width: 30px; 
height: 30px;
background: url('http://i153.photobucket.com/albums/s229/fluffyshuffle/error1.png') center center no-repeat;
}

input[type="checkbox"]:checked + .state {
background: url('http://i153.photobucket.com/albums/s229/fluffyshuffle/tick1.png') center center no-repeat;
} 
```

** 修改

​</p>

# assembly - linux x86 64 中 MSR_GS_BASE 的详细信息

> ID：11497563
> 
> 赞同：6
> 
> 时间：2012-07-16T02:44:21.183
> 
> 标签：assembly, linux-kernel, x86-64, memory-segmentation

我试图找出 Linux 内核中当前 MACRO 的详细信息。current的最终汇编代码为：

```
movq %%gs:0xb000,%0 
```

上面的代码可以工作！但是当我打印 %%gs 时，它的值为 0，所以 %%gs 指向 GDT NULL 的第一项！！？？这个怎么运作？

```
mov %%gs, %0 
```

相反，gs 的基数在 MSR_GS_BASE 中，当前可以替换为：

```
/*0xb000 is the offset of per_cpu__current_task*/
cur_task = (unsigned long*)(x86_rdmsr64(MSR_GS_BASE) + 0xb000);
println("cur_task:%p",*cur_task); 
```

我的问题是：

%gs 指向 GDT NULL 的第一项!!?? 从 MSR_GS_BASE 读取它是如何工作的，它是 CPU 特性吗？我需要一些关于此的参考。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T03:19:33.077

来自[AMD 架构程序员手册第 2 卷：系统编程](http://support.amd.com/us/Processor_TechDocs/24593_APM_v2.pdf)，第 4.5.3 节：

> **64 位模式下的 FS 和 GS 寄存器。**与 CS、DS、ES 和 SS 段不同，FS 和 GS 段覆盖可用于 64 位模式。在 64 位模式下使用 FS 和 GS 段覆盖时，它们各自的基地址用于有效地址 (EA) 计算。完整的 EA 计算则变为 (FS 或 GS​​).base + base + (scale * index) + 位移。FS.base 和 GS.base 值也扩展为完整的 64 位虚拟地址大小，如图 4-5 所示。生成的 EA 计算允许跨越正负地址。
> 
> [...]
> 
> 有两种方法可以更新 FS.base 和 GS.base 隐藏描述符字段的内容。第一个专用于特权软件 (CPL = 0)。FS.base 和 GS.base 隐藏描述符寄存器字段映射到 MSR。特权软件可以使用单个 WRMSR 指令将规范形式的 64 位基地址加载到 FS.base 或 GS​​.base 中。FS.base MSR 地址是 C000_0100h，而 GS.base MSR 地址是 C000_0101h。
> 
> 更新 FS 和 GS 基本字段的第二种方法适用于以任何特权级别运行的软件（当实现支持并通过设置 CR4[FSGSBASE] 启用时）。WRFSBASE 和 WRGSBASE 指令分别将 GPR 的内容复制到 FS.base 和 GS.base 字段。当操作数大小为 32 位时，基数的高位双字被清除。WRFSBASE 和 WRGSBASE 仅在 64 位模式下受支持。

# linux - OS X 中等效的 fallocate() 命令？

> ID：11497567
> 
> 赞同：29
> 
> 时间：2012-07-11T14:25:01.563
> 
> 标签：linux, macos

`fallocate()`OS X 中是否有等价物？

我想将 OS X 问题中的所有等价物汇总到一些文档/表格或任何人的任何东西中。有人知道一些熟悉的东西吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-11-02T12:52:50.113

如何使用：

`mkfile -n 1m test.tmp`

它不是相同的命令，但用于相同的目的。

请注意，`fallocate`使用十进制乘法器，而`mkfile`使用二进制乘法器。

[mkfile 人](http://www.manpagez.com/man/8/mkfile/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-11T14:52:39.523

`fallocate()`在 OSX 上不存在。您可以“伪造”它；Mozilla 在他们的 FileUtils 类中伪造了它。请参阅此文件：

[http://hg.mozilla.org/mozilla-central/file/3d846420a907/xpcom/glue/FileUtils.cpp#l61](http://hg.mozilla.org/mozilla-central/file/3d846420a907/xpcom/glue/FileUtils.cpp#l61)

这是代码，以防链接失效：

```
/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-
 * ***** BEGIN LICENSE BLOCK *****
 * Version: MPL 1.1/GPL 2.0/LGPL 2.1
 *
 * The contents of this file are subject to the Mozilla Public License Version
 * 1.1 (the "License"); you may not use this file except in compliance with
 * the License. You may obtain a copy of the License at
 * http://www.mozilla.org/MPL/
 *
 * Software distributed under the License is distributed on an "AS IS" basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 * for the specific language governing rights and limitations under the
 * License.
 *
 * The Original Code is Mozilla code.
 *
 * The Initial Developer of the Original Code is
 * Mozilla Foundation.
 * Portions created by the Initial Developer are Copyright (C) 2010
 * the Initial Developer. All Rights Reserved.
 *
 * Contributor(s):
 *   Taras Glek <tglek@mozilla.com>
 *
 * Alternatively, the contents of this file may be used under the terms of
 * either the GNU General Public License Version 2 or later (the "GPL"), or
 * the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
 * in which case the provisions of the GPL or the LGPL are applicable instead
 * of those above. If you wish to allow use of your version of this file only
 * under the terms of either the GPL or the LGPL, and not to allow others to
 * use your version of this file under the terms of the MPL, indicate your
 * decision by deleting the provisions above and replace them with the notice
 * and other provisions required by the GPL or the LGPL. If you do not delete
 * the provisions above, a recipient may use your version of this file under
 * the terms of any one of the MPL, the GPL or the LGPL.
 *
 * ***** END LICENSE BLOCK ***** */
#if defined(XP_UNIX)
#include <fcntl.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#elif defined(XP_WIN)
#include <windows.h>
#endif

#include "nscore.h"
#include "private/pprio.h"
#include "mozilla/FileUtils.h"

bool 
mozilla::fallocate(PRFileDesc *aFD, PRInt64 aLength) 
{
#if defined(HAVE_POSIX_FALLOCATE)
  return posix_fallocate(PR_FileDesc2NativeHandle(aFD), 0, aLength) == 0;
#elif defined(XP_WIN)
  return PR_Seek64(aFD, aLength, PR_SEEK_SET) == aLength
    && 0 != SetEndOfFile((HANDLE)PR_FileDesc2NativeHandle(aFD));
#elif defined(XP_MACOSX)
  int fd = PR_FileDesc2NativeHandle(aFD);
  fstore_t store = {F_ALLOCATECONTIG, F_PEOFPOSMODE, 0, aLength};
  // Try to get a continous chunk of disk space
  int ret = fcntl(fd, F_PREALLOCATE, &store);
    if(-1 == ret){
    // OK, perhaps we are too fragmented, allocate non-continuous
    store.fst_flags = F_ALLOCATEALL;
    ret = fcntl(fd, F_PREALLOCATE, &store);
    if (-1 == ret)
      return false;
  }
  return 0 == ftruncate(fd, aLength);
#elif defined(XP_UNIX)
  // The following is copied from fcntlSizeHint in sqlite
  /* If the OS does not have posix_fallocate(), fake it. First use
  ** ftruncate() to set the file size, then write a single byte to
  ** the last byte in each block within the extended region. This
  ** is the same technique used by glibc to implement posix_fallocate()
  ** on systems that do not have a real fallocate() system call.
  */
  struct stat buf;
  int fd = PR_FileDesc2NativeHandle(aFD);
  if (fstat(fd, &buf))
    return false;

  if (buf.st_size >= aLength)
    return false;

  const int nBlk = buf.st_blksize;

  if (!nBlk)
    return false;

  if (ftruncate(fd, aLength))
    return false;

  int nWrite; // Return value from write()
  PRInt64 iWrite = ((buf.st_size + 2 * nBlk - 1) / nBlk) * nBlk - 1; // Next offset to write to
  do {
    nWrite = 0;
    if (PR_Seek64(aFD, iWrite, PR_SEEK_SET) == iWrite)
      nWrite = PR_Write(aFD, "", 1);
    iWrite += nBlk;
  } while (nWrite == 1 && iWrite < aLength);
  return nWrite == 1;
#endif
  return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-22T18:09:47.050

对于那些想要创建用于测试的假数据文件的人来说，`mkfile`这是非常优雅的。另一种方法是使用`dd`：

```
dd if=/dev/zero of=zfile count=1024 bs=1024 
```

如您所见`od -b zfile`，它充满了零。如果您想要随机数据（例如，您可能想要使用数据压缩测试工作流），请使用“/dev/random”代替“/dev/zero”：

```
dd if=/dev/random of=randfile count=1024 bs=1024 
```

# asp.net-mvc - 是否有更好的模式来实现使用 profilebase 的类？

> ID：11497570
> 
> 赞同：0
> 
> 时间：2012-07-16T02:46:02.540
> 
> 标签：asp.net-mvc, unit-testing

因此，由于 MS 的所有愚蠢的静态方法，在 MVC 中进行测试是一件很痛苦的事情，但我已经能够解决其中的一些问题——我为成员资格创建了一个接口，以便我可以模拟它，并且大部分工作但我正在使用 ProfileBase在我的自定义 UserProfile 对象中，这当然要困难得多，因为它也有静态方法并且它继承自 ProfileBase。我浪费了整个星期天，不知道如何测试这个。

这是我的 UserPofile 类的样子——它实际上和网上所有的例子一样。

```
namespace TaskBoardAuth.Models
{
    public class UserProfile: ProfileBase
    {
        public static UserProfile GetUserProfile(string username)
        {
            return Create(username) as UserProfile;
        }

        public static UserProfile GetUserProfile()
        {
            return Create(Membership.GetUser().UserName) as UserProfile;
        }

        [SettingsAllowAnonymous(false)]
        public string FirstName
        {
            get { return base["FirstName"] as string; }
            set { base["FirstName"] = value; }
        }

        [SettingsAllowAnonymous(false)]
        public string LastName
        {
            get { return base["LastName"] as string; }
            set { base["LastName"] = value; }
        }

    }
} 
```

问题是我无法测试，因为这两个愚蠢的蹩脚静态方法，别介意 profileBase.Create() 是静态的。呃！太白痴了！

无论如何 - 这是我卡住的地方 - 我需要用一种方法来做到这一点。

```
taskBoardModel.Name = UserProfile.GetUserProfile().FirstName + " " + UserProfile.GetUserProfile().LastName; 
```

我的单元测试当然会失败，因为对 Membership.GetUser() 的调用失败了！呃！！！

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:05:13.823

在处理诸如这个 MVC 之类的任何框架问题时，我通常会围绕我可能需要测试/模拟的内部类创建一个包装类和一个随附的接口。然后我配置我的 IoC 容器以将我的 IUserProfile 接口注入到控制器的构造函数中。所以在我的单元测试中，我只是模拟我的 IUserProfile 并提供我想要的任何数据。

Membership.GetUser() 问题可以通过创建包装类和接口以同样的方式解决。

我曾经担心这样的问题，但现在我什至不费吹灰之力，只需围绕任何 .NET 的疯狂密封类和静态方法等创建包装类。

# javascript - jQuery变量增量++在脚本中不起作用

> ID：11497573
> 
> 赞同：2
> 
> 时间：2012-07-16T02:46:40.917
> 
> 标签：javascript, jquery

我有这个 jQuery 函数，可以在 ID 范围从 status_0 到 status_5 的不同状态消息（p 元素）之间切换：

```
setTimeout(function() {
    var next_status;

    if (current_status < 5) {
        next_status = current_status++;
    } else {
        next_status = 0;
    }

    $(".status_visible").fadeOut("fast", function() {
        $("#status_"+next_status).fadeIn("fast");
    });

    //alert(next_status);

    change_status();
}, 10000); 
```

我的问题是，一开始`current_status`绝对等于 0，但是当它到达我的增量部分时，它仍然是 0！我用一个简单的 01 尝试了这个`next_status = current_status + 1`，它返回 01 而不是 1 （连接它们），所以我尝试`next_status = current_status++`了它仍然返回 0 。

有人可以把我直接放在这里吗:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T02:51:18.747

```
next_status = ++ current_status; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:53:23.737

该表达式的`current_status++`意思是“增加 current_status，并计算出 current_status 的旧值”，即使用 current_status，然后在记下它的值后增加它。

您想要 ，`++current_status`这意味着“增加 current_status，并评估为新值”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T02:50:02.943

您的超时方法“setTimeout”会被多次调用吗？如果是这样，您需要将您的计数器作为具有全局范围的参数传递，否则每次都会重置。

# php - PHP 指向文档根目录

> ID：11497574
> 
> 赞同：0
> 
> 时间：2012-07-16T02:46:43.830
> 
> 标签：php, document-root

不确定我是否以正确的方式使用它...

```
include $_SERVER['DOCUMENT_ROOT']."/includes/overall/header.php" 
```

我的页面位于子目录中，我想包含来自其他目录的元素，其路径基于根目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:48:11.677

$_SERVER 变量在 php 运行时是全局的，使用起来不安全。

代码 `$_SERVER['DOCUMENT_ROOT'] = 'A_BAD_PATH';` 生效。之后的代码无法获得正确的变量。

您应该使用 __FILE__，一个指向当前文件路径的常量，并定义一个指向根目录的常量。

代码示例：

```
define('CURRENT_DIR', dirname(\__FILE__));
define('ROOT_DIR', dirname(CURRENT_DIR + '/..');
require(ROOT_DIR + '/some/path/to/init.php'); 
```

查看更多关于 __FILE__ 和其他魔术常量[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

# c# - 在 O(n) 时间内创建链表的副本

> ID：11497576
> 
> 赞同：6
> 
> 时间：2012-07-16T02:46:48.280
> 
> 标签：c#, c++, c, algorithm

一个链表有两个指针，第一个指向下一个节点，另一个是随机指针。随机指针指向 LinkedList 的任何节点。编写一个完整的程序来创建一个链表（c，c++，c#）的副本，而不改变原始链表，并且在 O(n) 中。

我在一次采访中被问到这个问题，我无法弄清楚解决方案。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-16T03:39:37.193

在线性时间内复制一个普通的链表显然是微不足道的。唯一让这个有趣的部分是“随机”指针。据推测，“随机”实际上是指它指向同一个链表中另一个随机选择的节点。据推测，其意图是链表的副本重新创建完全相同的结构——即，“下一个”指针创建一个线性列表，而其他指针指向相同的相对节点（例如，如果随机指针在原链表的第一个节点指向原链表的第五个节点，那么重复链表中的随机指针也会指向重复链表的第五个节点。

在 N ²时间内完成此操作相当容易。首先正常复制列表，忽略随机指针。然后一次遍历原始列表一个节点，并且对于每个节点再次遍历列表，以找到随机指针所指的列表中的哪个节点（即，您通过`next`指针遍历多少个节点以找到一个`next`指针持有与当前节点的指针地址相同，`random`然后遍历重复链表并反转——找到第N^个节点的地址，并将其放入当前节点的随机指针中。

这是 O(N ² ) 的原因主要是那些对正确节点的线性搜索。为了获得 O(N)，这些搜索需要以恒定复杂度而不是线性复杂度来完成。

显而易见的方法是构建一个哈希表，将原始列表中每个节点的地址映射到列表中该节点的位置。然后我们可以构建一个数组来保存新列表中节点的地址。

有了这些，修复随机指针就很容易了。首先，我们通过指针遍历原始列表`next`，复制节点，并构建通过`next`指针连接的新列表，但不考虑随机指针。当我们这样做时，我们将每个节点的地址和位置插入到哈希表中，并将新列表中每个节点的地址插入到我们的数组中。

完成后，我们会步调一致地遍历旧列表和新列表。对于旧列表中的每个节点，我们查看该节点随机指针中的地址。我们在哈希表中查找与该地址相关联的位置，然后获取新列表中该位置的节点地址，并将其放入新列表当前节点的随机指针中。然后我们前进到旧列表和新列表中的下一个节点。

完成后，我们丢弃/销毁哈希表和数组，因为我们的新列表现在复制了旧列表的结构，我们不再需要额外的数据。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-04T06:42:20.500

**方法概述**
我们不会尝试从 go 一词开始创建新的链表。首先复制原始链表中的项目，然后将链表拆分为 2 个相同的链表。

**详细信息**
**第 1 步**：使用 next 指针遍历链表并创建每个节点的副本。

```
original :: A -> B -> C -> D -> E ->null

updated :: A -> A' -> B -> B' -> C -> C' -> D -> D' ->E -> E' -> null 
```

这可以在一个循环中轻松完成。

**第2步**：再次遍历列表，并像这样修复随机指针

```
Node *current= start;
Node *newListNode, *random;
while (current!= null) {
    // If current node has a random pointer say current = A, A.random = D;
    if ( (*current)->random != null ) {
        // newListNode will point to A'
        newListNode = (*current)->next;
        random = (*current)->random;
        random = (*random)->next;
        // Make A' point to D's next, which is D'
        (*newListNode)->random = random;
    }
    // Here A'.random = D'
    // Current goes to the next node in the original list => B , and not A'
    current= (*newListNode)->next;
} 
```

**第 3 步**:: 将列表拆分为 2 个列表。您只需要在此处修复下一个指针。

```
Original :: A -> A' -> B -> B' -> C -> C' -> D -> D' ->E -> E' -> null
New :: A -> B -> C -> D -> E ->null
       A' -> B' -> C' -> D' -> E' ->null

Node *start1 = head;
Node *start2 = (*head) ->next      // Please check the boundary conditions yourself,
                                   // I'm assuming that input was a valid list
Node *next, *traverse = start2;
while (traverse != null) {
    next = (*traverse)->next;
    if (next == null) {
        (*traverse)->next = null;
        break;
    }
    (*traverse)->next = (*next)->next;
    traverse = next;
} 
```

这样，您已经在 O(n) 时间内创建了原始列表的副本。您遍历列表 3 次，仍然是 n 的顺序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-16T12:37:27.500

澄清编辑：

*正如 BowieOwens 指出的那样，以下仅在“随机”指针是唯一的情况下才有效。*
我只是为了一般的想法而留下答案，但请不要投票，因为它绝对是**错误**的。

* * *

如果我没有完全弄错，您可以在不使用任何额外存储空间的情况下执行此操作。

在复制旧列表时，将`random`旧节点的`random`指针存储在新节点的指针中。
然后，设置`random`旧节点的指针指向新节点。

这将为您提供旧列表和新列表之间的“之字形”结构。

伪代码：

```
Node* old_node = <whatever>;
Node * new_node = new Node;
new_node->random = old_node->random;
old_node->random = new_node; 
```

一旦你像这样复制了旧列表，你重新开始，但是`random`像这样替换指针，恢复旧列表中的`random`指针，同时将新列表中的指针设置到相应的新节点：

```
Node* old_random = old_node->random->random; // old list -> new list -> old list
Node* new_random = new_node->random->random; // new list -> old list -> new list
old_node->random = old_random;
new_node->random = new_random; 
```

它在纸上看起来好多了，但我担心我的 ASCII 艺术技能达不到它。

这*确实会*更改原始列表，但会恢复到原始状态。
我猜这是否允许取决于面试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T02:56:19.357

如您所知，O(n) 表示线性。由于您需要线性数据结构的副本，因此您不会遇到问题，因为您只需要遍历原始列表的节点，并且对于每个访问的节点，您将为新列表创建一个新节点。我认为这个问题没有很好地表述，因为您需要了解一些方面才能完成这项工作：这是循环实现吗？“下一个”节点是什么？节点的下一个节点还是列表的第一个节点？清单如何结束？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-16T03:16:41.363

也许这个问题是一个技巧，用来测试你如何回答奇怪的问题，因为它非常简单：

1）迭代到每个节点

2）为其他链表创建新节点，并复制值。

成本始终为 O(n)：因为您只需迭代整个链表 1 次！！！

或者，您对他的问题理解有误。

# vim - vim tabular 只在第一场比赛就行？

> ID：11497593
> 
> 赞同：16
> 
> 时间：2012-07-16T02:50:52.207
> 
> 标签：vim, formatting, format, tabular

我正在尝试使用 tabular.vim 插件格式化一些 python 代码。它目前是一个 sqlalchemy 声明类，看起来像这样：

```
id     =  db.Column(db.Integer, primary_key=True)
status    =  db.Column(db.Integer, nullable=False, default=3)
...etc... 
```

我希望能够仅对齐列表中的第一个等号。

```
id     =  db.Column(db.Integer, primary_key=True)
status =  db.Column(db.Integer, nullable=False, default=3)
...etc... 
```

只是一个普通的

```
: Tabularize /= 
```

似乎匹配一切，一切都变得疯狂。

首先十分感谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-16T04:03:00.710

你可以使用这个命令：

```
:Tabularize /^[^=]*\zs= 
```

该模式只匹配第一个`=`。

* * *

您可以将这两行添加到`~/.vim/after/plugin/TabularMaps.vim`

```
AddTabularPattern 1=    /^[^=]*\zs=
AddTabularPattern 1==   /^[^=]*\zs=/r0c0l0 
```

* * *

下次，只需运行：

```
:Tabularize 1= 
```

如果您不需要空格`=`，请运行以下命令：

```
:Tabularize 1== 
```

* * *

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-05-24T01:23:57.963

上面的建议很好，但在这种情况下，它们有点太复杂了，需要输入太多。怎么样：

```
:Tab /=.*/ 
```

这很好用——匹配第一个等号和它后面的所有东西，左对齐（默认，很好用！）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-23T14:06:55.117

出色的插件：[vim-easy-align](https://github.com/junegunn/vim-easy-align)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-11T22:23:47.503

根据[这个答案](https://stackoverflow.com/questions/20435920/dynamic-vim-tabular-patterns)，您可以通过设置如下 vim 命令动态地执行此操作，而不是为每种情况创建静态映射：

```
command! -nargs=1 -range TabFirst exec <line1> . ',' . <line2> . 'Tabularize /^[^' . escape(<q-args>, '\^$.[?*~') . ']*\zs' . escape(<q-args>, '\^$.[?*~') 
```

使用此命令，如果您想基于第一个对齐，`=`那么您可以执行以下操作：

```
:TabFirst = 
```

或者，如果你想对齐第一个`{`，你可以这样做：

```
:TabFirst { 
```

这支持范围选择以及 Tabularize 的智能选择。

# iphone - 覆盖从移动 Safari 电话启动的手机应用程序：iOS 上的链接？

> ID：11497598
> 
> 赞同：1
> 
> 时间：2012-07-16T02:52:21.510
> 
> 标签：iphone, ios, mobile-safari, url-scheme, tel

是否可以为`tel:`url 方案注册一个 iOS 本机应用程序，以便移动 Safari 将启动它以响应 HTML`tel:`链接而不是内置的电话应用程序？即覆盖内置的电话应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:00:28.103

不，至少不确定。我记得 Apple 文档说如果两个应用程序注册了相同的 URL 方案，那么在使用该 URL 方案时行为是未指定的。但是，您可以使用 MobileSubstrate 插件（如果可以选择越狱）来执行此操作，该插件会挂接到 SpringBoard 并在遇到该特定 URL 方案时打开不同的应用程序。

# java - SaucelabsVM 中的 Salesforce 登录电子邮件验证

> ID：11497600
> 
> 赞同：0
> 
> 时间：2012-07-16T02:52:39.967
> 
> 标签：java, salesforce, selenium-webdriver, saucelabs

我们想使用 SauceLabs 围绕我们的 SalesForce 实例设置一些测试自动化。我们希望保持它独立于 salesforce 实例本身，因为我们有一个专用的持续集成服务器，它驱动我们跨系统中多个集成点的所有自动化（其中 SalesForce 就是其中之一）。由于这个要求，SauceForce 不能完全满足我们的需要。

我已经成功地设置了一个 Selenium 测试，该测试通过 SauceLabs 访问了我们的 SalesForce 实例，但问题是，因为浏览器是从 SauceLabs 云中 SalesForce 无法识别的 VM 运行的，它会提示输入电子邮件验证码。这对我们来说是一个障碍，因为解决方法太麻烦了。我询问了一些开发人员 - 他们建议将 VM IP 地址添加到例外列表中，但不幸的是，SauceLabs 动态分配 VM IP，因此我们无法在 Salesforce 中为安全例外定义 IP 范围以绕过电子邮件验证提示。

我很好奇 SauceForce 如何解决这个问题 - 有没有人在这方面有见识？请回复如何在 saucelabs 中登录 salesforce？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T13:43:22.090

刚在房子周围试图自己解决这个问题，我想我会在这里发布更新：

首先：Salesforce 不会禁用此功能（暗示他们过去可能会这样做，但现在不会；我们甚至通过高级支持升级并直接与高级客户经理联系，但并不高兴）

尝试使用 SauceLabs Connect：Saucelabs 构建了一种代理隧道服务器，该服务器实际上旨在促进对 Intranet 站点的测试（可能只允许从内部 IP 地址访问服务器）。启动针对您的 Salesforce 组织配置的 Saucelabs 连接代理将意味着所有 Saucelabs 流量都通过此代理，然后您可以将运行此代理的 IP 列入白名单。这当然意味着您需要在某个静态的地方运行代理（我们是云虚拟机）。更多关于 Sauce Connect 的信息：[https](https://saucelabs.com/docs/connect) ://saucelabs.com/docs/connect 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T22:25:29.223

您可以使用 Salesforce 记录案例，他们可以将其关闭。

# android - 如何在 Android 中显示多列 ListView？

> ID：11497602
> 
> 赞同：1
> 
> 时间：2012-07-16T02:52:44.977
> 
> 标签：android, listview

我有一个显示列表视图的 android 应用程序，其中显示：

一

二

三

四

但我想以以下格式显示：

一二

三四

我该怎么办？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:37:43.333

`GridView`是您问题的解决方案。按照本[教程](http://developer.android.com/guide/topics/ui/layout/gridview.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:20:42.350

首先，您应该维护一个单独的 xml 文件以在 Android的**列表视图中显示任何类型的输出。**

对于多列列表视图，xml 文件将是

```
 <?xml version="1.0" encoding="utf-8"?>
 <!-- row.xml -->
 <LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:paddingTop="4dip"
 android:paddingBottom="6dip"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:orientation="horizontal">

 <TextView android:id="@+id/TRAIN_CELL"
     android:layout_width="50dip"
     android:layout_height="wrap_content"/>

 <TextView android:id="@+id/TO_CELL"
     android:layout_width="60dip"
     android:layout_height="wrap_content"  android:layout_weight="1"/>
</LinearLayout> 
```

[这](http://www.heikkitoivonen.net/blog/2009/02/15/multicolumn-listview-in-android/)是您正在寻找的示例。对于实现多列列表视图的完整教程，您可以查看[此](http://www.technotalkative.com/android-multi-column-listview/)

祝你好运

# php - php apc.filters 只允许 4 个目录

> ID：11497604
> 
> 赞同：0
> 
> 时间：2012-07-16T02:52:57.020
> 
> 标签：php, regex, apc

我正在使用 apc 来管理缓存，并且我的目标是只缓存 4 个目录中的文件：

```
/home/user6/public_html/beta/
/home/user6/public_html/beta/controller/
/home/user6/public_html/beta/mode/
/home/user6/public_html/beta/templates/ 
```

我已经尝试了这两个正则表达式，但似乎都不起作用？

```
apc.filters="^(?!/home/user6/public_html/beta/(|controller/|model/|templates/)).*"

apc.filters="^(?!/home/user6/public_html/beta/).*,
            "^(?!/home/user6/public_html/beta/controller/).*,
             ^(?!/home/user6/public_html/beta/model/).*,
             ^(?!/home/user6/public_html/beta/templates/).*" 
```

我的正则表达式是错误的还是其他不正确的？

目前该站点正在运行： index.php - 然后包含控制器/模型/模板文件

**仅** `/home/user6/public_html/beta/index.php`显示为缓存文件，因此问题是否可能是其他文件由于被包含而不是直接访问而从未被 apc 看到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:22:48.173

由于 apc.filters 指定匹配表示不过滤的（列表）正则表达式，因此您正确地使用了否定断言。但是，您的布尔逻辑存在一个简单的缺陷，即旧的 nots 和 ors。

让我们采用第二个过滤规则：

*   如果目录不包含`/home/user6/public_html/beta/`或不缓存，请不要缓存
*   如果目录不包含`/home/user6/public_html/beta/controller/`或不缓存，请不要缓存
*   如果目录不包含`/home/user6/public_html/beta/model`或不缓存，请不要缓存
*   如果目录不包含`/home/user6/public_html/beta/templates`或不缓存，请不要缓存

哎呀。A`.../beta/controller/x.php`匹配 (3) 和 (4)，因此不会被缓存。等等。

如果你想做一个唯一的缓存，那么创建匹配过滤器并翻转它。您也不想缓存 beta 树之外的任何内容，所以为什么不：

```
^(?!public_html/beta/(controller/|model/|templates/)?\w*\.php). 
```

我想这是你的意图。

# linux - OpenGL 像素缓冲区在 Linux 和 Mac OSX 中直接到屏幕

> ID：11497606
> 
> 赞同：2
> 
> 时间：2012-07-16T02:53:12.943
> 
> 标签：linux, macos, opengl, screen, buffer

我正在寻找一种将像素缓冲区直接渲染到屏幕的方法。我需要一种在 OSX 和 Linux 上执行此操作的方法，尽管我知道我可能需要为每个操作系统通过不同的方法来执行此操作（尽管跨平台库会很好。）您从哪里开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T02:57:33.837

您始终可以使用四边形的正交投影到您的后缓冲区/表面。

或者只是在 NDC 空间（-1 到 +1）中发送四边形，而不需要任何矩阵乘法。

**更新**，因为这显然不够清楚：

对于“全屏四边形”方法，发送两个三边形或一个四边形，如下所示：

![在此处输入图像描述](../Images/e3eb30101491b631fab5ba0c346b3bdb.png)

顶点的配置/顺序取决于您的缠绕顺序和原始模式。`Z`值应该在`-1`到之间`1`。你可以选择`-1`。Projection 和 ModelView 矩阵应该是一个单位矩阵（即全为零，然后在主对角线上为 1）

![在此处输入图像描述](../Images/8347c9acef53554399176dba0c95887b.png)

换句话说，您不需要做任何矩阵乘法，因此您实际上不需要在着色器中进行任何矩阵操作，因为坐标已经在标准化设备坐标 (NDC) 中。

即它已经在目标设备间隔内![在此处输入图像描述](../Images/ce2c91169b49cfeea94f0fc32c055138.png)

这是一些代码：

```
glMatrixMode (GL_MODELVIEW); 
glPushMatrix (); 
    glLoadIdentity (); 
    glMatrixMode (GL_PROJECTION); 
    glPushMatrix (); 
        glLoadIdentity ();
        glBegin (GL_QUADS); 
        glVertex3i (-1, -1, -1); 
        glVertex3i (1, -1, -1); 
        glVertex3i (1, 1, -1); 
        glVertex3i (-1, 1, -1); 
        glEnd ();
    glPopMatrix (); 
    glMatrixMode (GL_MODELVIEW); 
glPopMatrix (); 
```

顶点着色器只是直接传递到像素/片段着色器。显然，您会将相关的像素/纹理缓冲区设置为着色器资源/变量，并在像素/片段着色器中对其进行采样。并且不要忘记将顶点的 texcoord UV 设置为其对应的纹理值 ( `0-1`)。

或者，您也可以使用相应的窗口系统将纹理直接粘贴到窗口表面。这在很大程度上取决于您用于窗口管理的内容（例如 SDL），并且可能还需要某种纹理格式/布局才能工作（或转换）。

# php - PHP - 自动刷新页面

> ID：11497611
> 
> 赞同：39
> 
> 时间：2012-07-16T02:54:57.767
> 
> 标签：php

我正在使用以下代码刷新页面，它不会在完成时重新加载。以下代码有时不起作用。

```
 $page = $_SERVER['PHP_SELF'];
 $sec = "10";
 header("Refresh: $sec; url=$page");
 echo "Watch the page reload itself in 10 second!"; 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-16T02:56:26.163

使用`<meta>`重定向而不是标头重定向，如下所示：

```
<?php
$page = $_SERVER['PHP_SELF'];
$sec = "10";
?>
<html>
    <head>
    <meta http-equiv="refresh" content="<?php echo $sec?>;URL='<?php echo $page?>'">
    </head>
    <body>
    <?php
        echo "Watch the page reload itself in 10 second!";
    ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-10-06T06:23:02.613

您可以使用

```
<meta http-equiv="refresh" content="10" > 
```

只需在头部标签之间添加它

其中 10 是您的页面将自行刷新的时间

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-11-22T19:50:43.883

使用此代码，它会在 5 秒后自动刷新，您可以在刷新时更改时间

`<?php $url1=$_SERVER['REQUEST_URI']; header("Refresh: 5; URL=$url1"); ?>`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-12T15:43:39.753

试试这个。您的页面将每 10 秒刷新一次

```
<html>
 <head>

  <meta http-equiv="refresh" content="10; url="<?php echo $_SERVER['PHP_SELF']; ?>">
 </head>
 <body>

 </body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-09T07:02:21.953

也许使用这个代码，

```
<meta http-equiv="refresh" content = "30" /> 
```

放轻松

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-17T18:11:25.040

像这样简单的步骤，

```
<!DOCTYPE html>
<html>
<head>
    <title>Autorefresh Browser using jquery</title>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript">
        $(function() {
            startRefresh();
        });
        function startRefresh() {
            setTimeout(startRefresh,100);
            $.get('text.html', function(data) {
                $('#viewHere').html(data);
            });
        }
    </script>

</head>
<body>
    <div id="viewHere"></div>
</body>
</html> 
```

此视频完整教程 [https://youtu.be/Q907KyXcFHc](https://youtu.be/Q907KyXcFHc)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-29T09:37:55.053

这适用于 Firefox Quantum 60+ 和 Chrome v72 (2019)

```
//set a header to instruct the browser to call the page every 30 sec
header("Refresh: 30;"); 
```

为了（重新）调用同一页面，似乎不需要传递页面 url 以及刷新期。我没有在 Safari/Opera 或 IE/Edge 上尝试过这个。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-10-05T06:36:35.297

`<meta http-equiv="refresh" content="10" >`

这可以工作。尝试一下..！！:-)

# windows-7 - 有什么比 Sikuli 更好的工具用于 Windows 7（或最好是多平台）上的屏幕自动化

> ID：11497613
> 
> 赞同：29
> 
> 时间：2012-07-16T02:54:59.543
> 
> 标签：windows-7, screen, ui-automation, sikuli

我正在使用[Sikuli](http://sikuli.org/)进行屏幕自动化。即根据它们在屏幕上的外观单击 GUI 元素。这很好用，但 Sikuli 对我来说有一个主要缺点：

*   每个脚本启动缓慢（因为每次都会加载整个 JVM）。

自去年以来，关于 Sikuli 的更多信息并没有发生太大的发展，所以我正在寻找替代自动化工具。我需要的大票是*屏幕感知*：该工具必须“寻找”屏幕上的某些 UI 元素，而不是将鼠标移到那里并发出点击。

有什么比 Sikuli 更快、维护得更好的工具的建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T20:05:06.547

如果你想在 Windows 下自动化任何东西，我会推荐你[​​ Automa](http://www.getautoma.com/) - 新的轻量级 GUI 自动化工具。它只是“找到” UI 元素——您需要做的就是提供它们的名称，就像人类用户看到的那样。而且它实际上比 Sikuli 更容易使用 - 你没有截取任何屏幕截图。例如，如果您想自动登录 Windows Live Messenger，您可以运行以下脚本：

```
start("messenger")
write("my.email@domain.com", into="Email address")
write("secret", into="Password")
click("Sign in") 
```

或者，类似地，为了输入凭据并自动登录 Facebook，您只需执行以下命令：

```
start("firefox")
write("facebook.com", into="Location")
press(ENTER)
write("my.email@domain.com", into="Email or Phone")
write("secret", into="Password")
click("Log in") 
```

该工具适用于大多数 Windows 应用程序（包括 Web 浏览器），无论它们是用什么技术编写的。它是用 Python 编写的，可以通过可导入的 api 库在任何 Python 应用程序中使用。

关于 Automa vs Sikuli：Automa 和 Sikuli 一样高级，但不需要截图。这有几个优点：

*   Automa 脚本更容易存储在版本控制系统中。
*   纯文本的 Automa 脚本使它们更易于维护：想象一下标签在某处发生了变化。这个标签可能会出现在几个 Sikuli 屏幕截图中，然后您必须重新拍摄。使用 Automa，您所要做的就是跨文件进行简单的搜索和替换。
*   它在用户界面的变化方面更加稳定 - 想象一下颜色变化或按钮仅移动几个像素。
*   其他不错的功能，例如能够在应用程序存在之前编写脚本/测试 - 您总是可以编写一个脚本说单击“这里”，输入这个，单击“那里”，已经来自功能/程序的规范。使用不可能的屏幕截图。

披露：我在[Automa](http://www.getautoma.com/)工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T16:38:26.717

您是否希望自动化 WinForms 应用程序或 WPF 应用程序？如果您正在查看 WPF，我可以推荐[Telerik 的免费测试框架](http://www.telerik.com/automated-testing-tools/free-testing-framework.aspx)。（披露：我是 Telerik 的测试工作室布道者。）

测试框架（或完整的 Test Studio 产品）与 WPF 配合得非常好，因为脚本/测试是基于元素的，而不是位置的。

# ruby - Sinatra 应用程序 JSON 和路由

> ID：11497615
> 
> 赞同：0
> 
> 时间：2012-07-16T02:56:12.493
> 
> 标签：ruby, json, activerecord, routes, sinatra

**场景**
我有一个 Sinatra 应用程序
我有一个基于某个命名路径获取文章的路由

```
# Get Articles for a certain time period

get '/frontpage/:type' do  
    case params[:type]

    when "today"
      @news = Article.find(...)
    when "yesterday"
      @news = Article.find(...)
    when "week-ago" 
      @news = Article.find(...)
    when "month-ago" 
      @news = Article.find(...)
      else
        not_found
    end

    erb :frontpage

end 
```

**问题**
是否可以保留这条路线`"/frontpage/:type"`并显示 .json 页面，例如，如果有人要求`"/frontpage/:today.json"`而不是`"/frontpage/:type"`？

或者

专门为 JSON 请求创建单独的路由会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:32:08.343

您将不得不创建一条新路线。

不过，您可以像这样考虑您的代码：

```
get '/frontpage/:type' do
  @news = get_articles(params[:type])
  erb :frontpage
end

get '/frontpage/:type.json' do
  get_articles(params[:type]).json
end

def get_articles(type)
  case 
  when "today"
    Article.find(...)
  when "yesterday"
    Article.find(...)
  when "week-ago" 
    Article.find(...)
  when "month-ago" 
    Article.find(...)
  else
    raise "Unsupported type #{type}. Supported types are: today, yesterday, week-ago and month-ago."
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T04:11:59.823

这实际上可以通过一条路线完成：

```
require 'rubygems'
require 'sinatra'

get %r{/frontpage/([^\.]+)\.?(.+)?} do |type, ext|
  'the type is: ' + type + ' and the extension is: ' + "#{ext}"
end 
```

您可以使用 ext var 返回您的 json 内容，如果它不是 nill 并且具有值“json”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-28T14:41:58.867

路线[顺序](http://sinatrarb.com/intro.html "路线顺序")很重要。

比较这个应用程序，.json 首先

```
require "sinatra"
require "sinatra/contrib/all"

get "/greet/:name.json" do |name|
  json ({"greeting" => greeting(name)})
end

get "/greet/:name" do |name|
  greeting name
end

def greeting(name)
  "Hello #{name}"
end 
```

有了这个应用程序，.json 最后

```
require "sinatra"
require "sinatra/contrib/all"

get "/greet/:name" do |name|
  greeting name
end

get "/greet/:name.json" do |name|
  json ({"greeting" => greeting(name)})
end

def greeting(name)
  "Hello #{name}"
end 
```

与第一个：

```
$ curl localhost:4567/greet/frank
Hello frank

$ curl localhost:4567/greet/frank.json
{"greeting": "Hello frank"} 
```

但有了第二个，

```
$ curl localhost:4567/greet/frank
Hello frank

$ curl localhost:4567/greet/frank.json
Hello frank.json 
```

# java - .setBackgroundColor() 在点击事件之外不起作用

> ID：11497621
> 
> 赞同：1
> 
> 时间：2012-07-16T02:56:59.403
> 
> 标签：java, android, events, view

我有一个看似简单的问题。我正在使用滚动视图内的线性布局内的图像按钮。我已经为其中一个按钮设置了一个 onClickListener，它将颜色切换为红色，然后是透明的，然后再返回。我尝试调用 performClick() 并手动编写例程以在满足条件时触发。我遇到的问题是，无论我如何尝试执行此操作，调用 .setBackgroundColor() 的方法都在调用时退出。我什至没有在我的日志中看到返回语句。这是代码。我确信这是一个简单的修复，但我对这些东西并不熟悉。此外，我没有使用任何 XML，并且希望尽可能避免使用它，因此在发布建议时请记住这一点。提前致谢！

我将尝试澄清我要完成的工作。我正在尝试模拟在单击事件期间触发的事件而不发生单击事件。我已经用 performClick() 和我在这里的方式尝试过这个。在这两种情况下，我对 .setBackgroundColor() 的调用都没有触发并过早退出调用它的方法并被调用。

在搞砸了一点之后，我发现该方法将触发 setBackgroundColor() 并在我使用 Color.RED 时继续该方法，而它已经是红色。如果我尝试任何其他颜色，它就不起作用。所以它似乎不想以这种方式改变颜色。有什么想法吗？

这是处理程序：

```
IBFireBall.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Log.d(TAG, "in onClick");
                if (Fireball.activated) {
                    Fireball.activated = false;
                    AbilityWidget.IBFireBall.setBackgroundColor(0);
                    Log.d(TAG, "was activated");
                } else {
                    Level.fireBall = new Fireball(context);
                    Fireball.activated = true;
                    AbilityWidget.IBFireBall.setBackgroundColor(Color.RED);
                    Log.d(TAG, "wasn't activated");
                }

            }

        }); 
```

这是另一种方法 Log 只打印出 1 和 2：

```
public static void resetButton(String id) {

    if (id.equals("Fireball")) {

        if (Fireball.activated) {
            Log.d(TAG,"inside resetbutton 1");
            Fireball.activated = false;
            Log.d(TAG,"inside resetbutton2" );
            AbilityWidget.IBFireBall.setBackgroundColor(0);
            Log.d(TAG,"inside resetbutton4" );

        } else {

            Level.fireBall = new Fireball(context);
            Fireball.activated = true;
            AbilityWidget.IBFireBall.setBackgroundColor(Color.RED);
            Log.d(TAG, "wasn't activated");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:47:48.420

看来问题在于线程。您无法在 UI 线程之外更新 UI。案例已结束 :) 稍后我将链接一些有关该主题的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:13:15.883

**1.**首先永远不要使用`"=="`` to compare Objects, use`.equals()`。

**2.**您没有`resetButton()`从 中调用该方法，如果没有调用该方法，将`onClick()`如何调用该方法。

# mysql - PreparedStatement 是否将空字符串转换为 null？

> ID：11497622
> 
> 赞同：2
> 
> 时间：2012-07-16T02:57:06.940
> 
> 标签：mysql, jdbc, prepared-statement, string

我正在使用 MySQL 和他们最后一个可用的 JDBC 驱动程序，在一个对所有字段`User`都有约束的表上，这些字段是、和.`NOT NULL``id``name``password``email`

在我的 Java EE 应用程序中，我首先以这种方式调用了一个简单的`Statement`方法：

```
statement = connection.createStatement();
statement.executeUpdate( "INSERT INTO User (name, password, email) "
         + "VALUES ('" + paramName + "', '" + paramPassword + "', '" + paramEmail + "');" ); 
```

其中`paramName`和是`paramPassword`字符串`paramEmail`。我向这个请求传递了空字符串，并且在表中成功插入了一个带有空值的新行，因为 MySQL 认为空字符串与空条目不同。

然后，我改用了`PreparedStatement`：

```
preparedStatement = connection.prepareStatement( "INSERT INTO User (name, password, email) VALUES(?, ?, ?);" );
preparedStatement.setString( 1, paramName );
preparedStatement.setString( 2, paramPassword );
preparedStatement.setString( 3, paramEmail );
preparedStatement.executeUpdate(); 
```

但是这一次，当我将空字符串传递给请求时，出现以下错误：

> com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException：列“名称”不能为空

**所以这是我的问题**：`PreparedStatement`或者它的`setString()`方法是否将空字符串转换为空值？我查了一下，并没有在 javadoc 中找到有关此行为的任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:21:17.563

答案是`NO`。请确保您的参数值不为空。也许你的变量`paramName`是`NULL`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T03:11:03.630

java.sql.PreparedStatatement 的文档在方法 setString 中没有说明任何内容。我查看了 MySQL ConnectorJ 的来源，也没有找到任何东西。你确定你的字符串不为空吗？

# asp.net - 在 ASP.NET Web 服务 XML 中隐藏空变量

> ID：11497623
> 
> 赞同：0
> 
> 时间：2012-07-16T02:57:14.817
> 
> 标签：asp.net, xml, web-services, c#-4.0

我有一个具有此类的 ASP.NET 网络服务

```
 public class Contact
    {
        public int type;
        public string data;
    } 
```

问题是有时“类型”变量没有数据，所以默认情况下它会被认为是 0 并且会在 XML 中返回 0，如下所示：

```
<Contact>
    <type>0</type>
    <data>Hello</data>
</Contact> 
```

我怎样才能避免在“类型”变量为 0 时返回它，以便我可以获得以下输出：

```
<Contact>
    <data>Hello</data>
</Contact> 
```

注意：如果将类型更改为字符串，那么问题就解决了，但是我有其他类，我必须设置它们的变量的类型。所以这个解决方案是行不通的。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:50:20.013

搜索后，正如@AVD 在评论中指出的那样，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-23T13:59:57.740

这是一个老问题，但其他人可能会看到我的回答很有用。有可能的。我将使用 .net VB 编写您的请求，您的课程应该如下所示，我相信您可以将其转换为 c#

```
Public Class Contact
    Public Property data As String
    Public Property type As Integer

 <System.Xml.Serialization.XmlIgnoreAttribute()>
    Public ReadOnly Property typeSpecified As Boolean
      Get
        Return type > 0
      End Get
    End Property

End Class 
```

# google-chrome - Windows / Chrome / ATI / 跨多个显示器的浏览器全屏

> ID：11497625
> 
> 赞同：7
> 
> 时间：2012-07-16T02:57:35.873
> 
> 标签：google-chrome, fullscreen, multiple-monitors, kiosk, chromeless

我正在使用以下测试设置（截至 2012 年 7 月 14 日的最新含义）：

*   Core i7 与 ATI FirePro V9800 (Eyefinity)

*   Windows 7 Pro 64 位（最新更新/补丁）

*   最新的催化剂驱动程序

*   最新的谷歌 Chrome 稳定版/金丝雀。

*   6 x 1080p 显示器（连续）产生**11520 像素 x 1080 像素的桌面**。

我尝试了以下方法来获得跨显示器的全屏 Web 视图：

*   在 Catalyst 控制面板中将最大化设置为整个桌面设置。这适用于最大化普通窗口（Chrome除外），但不适用于全屏。

*   尝试了 Chrome Kiosk 模式（这将是理想的），同样的问题，只填满了主显示屏。

*   使用 Chrome 全屏或 HTML5 全屏 API 会产生相同的结果：在 6 台显示器中的一台上全屏。

*   IE9 似乎对 webview 有大约 10000px 的限制，因此我什至无法手动将其拉伸到整个桌面（适用于 Chrome）。

*   试过超蒙。

*   尝试了一些用于信息亭模式的 Chrome 命令行开关 (http://peter.sh/experiments/chromium-command-line-switches/)，以全屏模式启动等，所以现在使用 --app="http: //127.0.0.1/index.html" 切换到至少摆脱大部分 Chrome 的 UI 元素。

*   试图找到 Chrome 的扩展程序，但没有成功。

*   在 IE9 中尝试过 Chrome Frame，也只使用了一个显示器。

我知道这很可能是一个驱动程序问题，向 Chrome 报告了错误的桌面大小（我认为这是 Catalyst Maximize to full desktop size 功能的重点）。Chrome 似乎不像其他“普通”窗口那样从同一位置获取桌面大小（显然对 Windows 窗口不太熟悉）。

我想**在多个显示器上使用全屏 Chrome webview**或可以手动最大化的完全无边框窗口。我的浏览器配置很灵活，甚至操作系统也有些灵活。

我想知道：

*   有没有人在超过 1 个显示器上获得全屏浏览器视图以使用 Chrome（或任何浏览器）？

*   是否有任何工具可以伪造 Chrome 的正确（完整）显示尺寸？

*   这可以在 Windows 8 中使用吗？

*   有什么东西只显示运行最新 Chrome 的 Chromeless Chrome 浏览器吗？（我见过 awesomium，但发现它的价格对于我想要它做的事情来说太高了）。此外，我希望能够理想地使用最新的 Chrome 版本。

欢迎任何评论，对于冗长的细节感到抱歉。

谢谢阅读！-托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-22T15:37:43.877

这对我使用两台显示器有用：

启动 C:\Users\terminal\AppData\Local\Google\Chrome\Application\chrome.exe --app="http://www.domain1.com" --window-position=0,0 --kiosk --用户数据目录=c:/monitor1

启动 C:\Users\terminal\AppData\Local\Google\Chrome\Application\chrome.exe --app="http://www.domain2.com" --window-position=1680,0 --kiosk --用户数据目录=c:/monitor2

我认为参数的顺序是相关的。

# mysql - SQL查询，将表字段移动到列标题

> ID：11497628
> 
> 赞同：1
> 
> 时间：2012-07-16T02:58:01.333
> 
> 标签：mysql, sql

有没有办法像这样检索数据（第一行是列标题）：

```
data   no    answer
data1  1     X1
data1  2     X2
data1  3     X3
data1  5     X5
data2  1     Y1
data2  2     Y2
data2  4     Y4 
```

像这样的格式（同样，第一行是列标题）：

```
data   no1   no2   no3   no4   no5
data1  X1    X2    X3    null  X5
data2  Y1    Y2    null  Y4    null 
```

使用 SQL 查询（在 MySQL 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:11:00.387

不幸的是，MySQL 没有 PIVOT 功能。因此，您将不得不以另一种方式执行此操作。

使用`CASE`语句：

```
select data,
  MIN(CASE WHEN no = 1 THEN answer END) as no1,
  MIN(CASE WHEN no = 2 THEN answer END) as no2,
  MIN(CASE WHEN no = 3 THEN answer END) as no3,
  MIN(CASE WHEN no = 4 THEN answer END) as no4,
  MIN(CASE WHEN no = 5 THEN answer END) as no5
from test
group by data 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/eb5b7/1)

# validation - jsf中输入的单独验证

> ID：11497630
> 
> 赞同：0
> 
> 时间：2012-07-16T02:58:04.103
> 
> 标签：validation, jsf, seam, tabpanel

我有一个丰富的：tabpanel 和几个选项卡。选项卡面板的类型设置为“客户端”。在每个选项卡中，都有一些 h:inputText。

我想做的是显示错误，例如“Tab：Tab1 [，Tab2 [，Tab3 ...]]有错误，请在保存前更正错误。” 如果所有选项卡之间有错误。我试图通过 AjaxListener(Seam) 或 PhaseListener 来实现这一点（两者都可以实现我想要做的）。

问题是当有一些输入被标记为 immediate="true" 时，这些输入首先被验证，并且与那些带有 immediate="false" 的输入分开。除非那些“即时”输入不包含错误，否则“非即时”输入将不会被验证。

有没有办法强制 jsf 验证器验证某个命令按钮上的所有输入？或者有什么方法可以覆盖 jsf 的默认验证器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:32:41.510

JSF 中没有“默认验证器”，每个组件都负责自己的转换和验证（如果有）。组件具有在[JSF 生命周期](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSFIntro10.html)的每个阶段调用的回调，并且这些回调为组件树中的每个组件调用验证和转换逻辑（因此没有集中的转换器或验证器）。

输入组件在*流程验证*阶段（生命周期的第三个阶段）`immediate=false`执行验证和转换，而输入组件在*应用请求值*阶段（生命周期的第二个阶段）执行验证和转换。*`immediate=true`*

 **JSF 生命周期的一个“问题”（实际上是设计约束）是，只要在任何阶段发现错误，框架就会直接跳转到*Render Response*阶段而不执行其余阶段，因此如果在`immediate=true`输入中发现任何错误（第二阶段）第三阶段永远不会被调用。

没有解决方法，您需要进行所有输入`immediate=false`，或者`immediate=true`所有验证都在同一阶段进行。我建议坚持，`immediate=false`除非你有充分的理由不这样做。例如，如果您需要执行某个操作而不管输入的验证状态如何，请创建 commandButton `immediate=true`。**

# datetimepicker - 将 Datepicker 日期值存储到 C# 中的数据库出生日期列（C sharp）

> ID：11497634
> 
> 赞同：-1
> 
> 时间：2012-07-16T02:58:41.450
> 
> 标签：datetimepicker

嘿，我想从日期选择器中获取日期并将该日期添加到我的数据库生日列中，所以请帮助我...

这里表单视图和网格视图

只需告诉我语法如何将日期值存储在数据库生日列中！请仅在 C#.net 中给我解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:04:01.557

WinForms：日期选择器有一个名为“Value”的属性，它是 DateTime 数据类型。用那个。

Web 表单：如果您使用的是 JQuery，只需执行

```
var date = $("#myDateControl").val(); 
```

那么如何存储值取决于您使用的数据库（Sql、Oracle 等）以及您是否使用实体框架（或其他 ORM）......如果您想要更全面的答案，请提供更多详细信息。

**编辑**

根据您的评论，我会做这样的事情：

```
using (var connection - new SqlConnection("my connection string"))
{
    using (var command = connection.CreateCommand())
    {
        command.CommandText = string.Format("INSERT INTO Stu_inf(Enrollno, Firstname, Lastname, Birthdate) VALUES ('{0}', '{1}', '{2}', '{3}')", txtEnrollno.Text, txtFname.Text, txtLname.Text, mtxtBdate.Value.ToString("yyyy-MM-dd"));
        connection.Open();
        command.ExecuteNonQuery();
        connection.Close();
    }
} 
```

我都是凭记忆写的，所以你可能会遇到一个小的语法错误或其他什么......但这就是想法......希望它有所帮助

# smtp - 使用 PHP mail() 函数时出错

> ID：11497635
> 
> 赞同：1
> 
> 时间：2012-07-16T02:58:49.247
> 
> 标签：smtp, php

我想在我的 PHP 文件中开发一个简单的电子邮件函数，所以我正在使用该`mail()`函数。当我尝试向自己发送电子邮件时，它不起作用。

这是我的代码：

```
$subject = "Hi";
$message = "Hello";
$from = "me@hello.com";
$header = "Form:".$from;
mail($from, $subject, $message, $header); 
```

这是错误消息：

```
Warning: mail(): Failed to connect to mailserver at &quot;localhost&quot; port 25, verify your &quot;SMTP&quot; and &quot;smtp_port&quot; setting in php.ini or use ini_set() in C:\wamp\www\NFC\back.php on line 171 
```

我认为可能是因为该端口正在被其他应用程序使用，所以我尝试对 php.ini 文件进行如下更改：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 8080 
```

但是，它仍然给出相同的信息。这个问题的可能原因是什么？

# php - 从 mysql 数据库中获取已排序的数据子集以用于分页

> ID：11497639
> 
> 赞同：0
> 
> 时间：2012-07-16T02:59:54.827
> 
> 标签：php, mysql, sql, codeigniter, pagination

我有一个提交表，用户可以在其中对内容进行投票。我想添加按投票顺序浏览提交的功能。我想限制每个页面上出现的提交数量并实现分页系统。

所以我了解如何使用 LIMIT 和 offset 参数来检索行，但是这会按照数据库中的顺序获取数据。我知道如何在 CI 中实现分页。我也知道如何按投票列排序，但我不确定如何将两者结合起来，以便在多个页面上获得正确的输出。以下是我执行 LIMIT 和 ORDER BY 的方式：

```
$this->db->limit($count);
$this->db->order_by('votes','desc');
$query = $this->db->get('submission', $num, $offset); 
```

它应该如何工作：

如果每个页面有 10 个按投票排序的提交，则第一页应包含前 10 名，第二页应包含投票数从第 11 到第 20 的提交，依此类推。

到目前为止，我所做的只是简单地将提交表中按投票排序的所有数据检索到一个数组中，然后将其用作分页的数据源。但是，随着数据集的增长，这将变得相当低效，我想知道是否有一些我不知道的 SQL 将允许我只为每个页面选择适当的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:04:16.263

这是为您的需求编写查询的有效方式。因为由于您设置了限制和偏移量，因此查询仅获取所需的数据。但是如果提交表上的数据太高，我会建议在提交表上的投票列上创建一个索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T00:27:41.840

所以看起来我可以通过使用 ORDER BY 后跟 LIMIT 和 OFFSET 来构造一个查询。我最初尝试使用嵌套选择，但没有必要过于复杂。

下面是使用 CodeIgniter 的 Active Record 类的 PHP 代码：

```
function get_submission_by_vote_pagination($num, $offset)
{
    $this->db->order_by('votes','desc');
    $query = $this->db->get('submission', $num, $offset);
    return $query->result_array();
} 
```

使用此功能，可以轻松使用 CI 的内置分页功能：

```
 //setup pagination
 $config['base_url'] = base_url() . 'browse/index';
 $config['total_rows'] = $this->Submission_model->count_all();
 $config['per_page'] = '10';
 $config['full_tag_open'] = '<div id="pagination">';
 $config['full_tag_close'] = '</div>';
 $config['first_link'] = 'First';
 $config['last_link'] = 'Last';
 $this->pagination->initialize($config);

 $submissions = $this->Submission_model->get_submission_by_vote_pagination(
    $config['per_page'], $this->uri->segment(3));

 $this->load->view('browse_page',$submissions); 
```

这完全符合我的要求，而无需在排序之前从表中获取所有提交。

# iphone - 在 iPhone App 中缓存/持久化下载图像的策略

> ID：11497644
> 
> 赞同：0
> 
> 时间：2012-07-16T03:01:45.613
> 
> 标签：iphone, objective-c, image, caching, download

我的应用程序需要从我正在维护的在线 MySQL 数据库中下载大约 50 张图像。我知道我可以控制它们的缓存方式（例如）：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:aURL] 
                                         cachePolicy:NSURLRequestReturnCacheDataElseLoad 
                                     timeoutInterval:30.0]; 
```

但是：
1）使用这种缓存策略是否意味着图像在第一次下载后将真正**永远保留在用户的设备上？**或者，
2）我最好自己手动将它们保存到应用程序的 Documents 文件夹（也许同时将数据库写入那里以镜像在线）以确保它们的持久性 - 这样我就可以从那里加载它们（设备的 Documents文件夹）从那时起，在应用程序的所有后续运行中？

基本上只需要建议在初始下载后将图像保存在用户设备上的最佳方式 - 所以用户总是有*一些东西*查看连接问题是否阻止他们获取已添加到在线数据库中的任何新图像。

任何和所有的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:33:35.053

NSURLCache 使用内存和磁盘缓存来下载请求。我记得在 iOS 5 之前存在一些问题，这些问题导致了像 SDURLCache 这样的单独库，但我认为不再需要它们了。

即使有磁盘缓存，当设备上的空间不足时，它仍可能被 iOS 清除。如果您不希望发生这种情况，您可以自己将图像存储在 Documents 文件夹中……但这种情况正是 Caches 目录的用途。您下载图像，除非设备空间不足，否则它们会一直存在，在这种情况下，它们会根据需要被清除并重新下载。如果我是该应用程序的用户，我更喜欢这种行为，而不是永久占用磁盘空间来存储可以轻松从网络恢复的内容。

# javascript - 使用 Phonegap 和 Disqus javascript SDK 问题

> ID：11497645
> 
> 赞同：5
> 
> 时间：2012-07-16T03:02:00.013
> 
> 标签：javascript, cordova, disqus

我正在使用 Phonegap 和 Disqus javascript SDK，并出现以下错误消息：

“无法将消息发布到[http://disqus.com](http://disqus.com)。收件人具有原始文件：//。”

任何帮助将不胜感激。我想要一个适用于 iOS + Android 的解决方案。

科尔多瓦/PhoneGap 1.9

讨论代码：

```
 <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'phonegap-app'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T19:59:53.170

这通常意味着您正在通过 file:// URL 访问该页面。您可以通过从本地网络服务器提供页面来解决此问题。

# android - 使用 Parse Javascript SDK 的 Facebook 登录错误

> ID：11497648
> 
> 赞同：1
> 
> 时间：2012-07-16T03:03:17.873
> 
> 标签：android, facebook, parsing, cordova, login

我正在尝试在为 Android 制作的 PhoneGap 项目中通过 Parse 登录 Facebook。

当我尝试在本地运行 HTML 时，会出现弹出窗口，但我收到一般的“发生错误”消息。当我运行 Android 项目时，Facebook 弹出/重定向甚至不会出现。

```
 <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
    <script src="http://www.parsecdn.com/js/parse-1.0.8.min.js"></script>
    <script>
        Parse.initialize("XXXXXXX", 
        "YYYYYY");

    </script>
</head>

<body>

    <div id="fb-root"></div>
    <script>
    window.fbAsyncInit = function() {
        Parse.FacebookUtils.init({
        appId      : 'ZZZZZZZ', // App ID
        channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
    Parse.FacebookUtils.logIn(null, {
        success: function(user) {
            if (!user.existed()) {
            alert("User signed up and logged in through Facebook!");
        } else {
            alert("User logged in through Facebook!");
        }
    },
        error: function(user, error) {
            alert("User cancelled the Facebook login or did not fully authorize.");
        }
    });
};

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

    <h1>Hello World</h1>
</body>

</html> 
```

所以，我很想让这个工作。提前感谢您的帮助！:)

更新 - 这是我得到的错误信息：

API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:53:05.740

你有没有找到一个完整的解决方案？我可以通过选择带有 Facebook 登录的网站作为我的应用程序与 Facebook 集成的方式，并将网站设置为 [http://localhost] 来解决您的特定问题。然后在运行本地服务器的 Chrome 中运行良好，但在 Parse JS SDK 中出现错误“必须在调用 init 之前加载 Javascript Facebook SDK”时无法在实际设备上运行。

# hardware - 如何获得硬件打印？

> ID：11497658
> 
> 赞同：0
> 
> 时间：2012-07-16T03:04:58.387
> 
> 标签：hardware, visual-studio-express

有人可以告诉我如何在 VB 2010 express 上获取计算机的硬件打印，或者存储在哪里以及如何存储？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:46:46.723

找出连接到计算机的硬件的最佳方法是使用[WMI](http://en.wikipedia.org/wiki/Windows_Management_Instrumentation)来获取信息。Microsoft 创建了一个工具，可以创建 C#、VB.Net 和 VBScript 示例代码，您可以在程序中运行这些代码并查看值是什么，然后您可以将其添加到您的程序中。这个工具被称为[`WMI Code Creator`](http://www.microsoft.com/en-us/download/details.aspx?id=8572). 我将从探索课程开始`Win32_`

* * *

既然我知道您要做什么，我可以更具体一点。您需要的 WMI 命名空间是`root\CIMV2`Class is `Win32_DiskDrive`or`Win32_PhysicalMedia`和 Property is `SerialNumber`。我在 Vb.net 中制作了一个小型控制台测试应用程序。它将在您的 PC 上打印出驱动器序列号，如果您在 c# 中需要它，我可以修改。还有许多关于同一主题的其他[SO Questions 。](https://stackoverflow.com/search?q=hard%20drive%20serial%20number)

```
Imports System
Imports System.Management

Module Module1

    Sub Main()
        For Each sn As String In GetDriveSerialNumber()
            Console.WriteLine(sn.Trim)
        Next
        Console.ReadLine()
    End Sub

    Function GetDriveSerialNumber() As List(Of String)
        Dim snList As List(Of String) = New List(Of String)
        Try
            Dim searcher As New ManagementObjectSearcher("root\CIMV2", "SELECT * FROM Win32_DiskDrive")

            For Each queryObj As ManagementObject In searcher.Get()
                snList.Add(queryObj("SerialNumber").ToString())
            Next
        Catch err As ManagementException
            Throw
        End Try
        Return snList
    End Function

End Module 
```

# android - 将整个文件夹从 Windows 移动到 Android 模拟器

> ID：11497660
> 
> 赞同：6
> 
> 时间：2012-07-16T03:05:24.487
> 
> 标签：android, adb, ddms

是否可以将整个文件夹从 Windows 移动到 android 模拟器？- 我确信这个问题的答案存在于某个地方，但我无法找到它。我可以通过 adb 命令行或通过 ddms 一次移动一个文件，但两者都没有让我选择移动包含多个文件夹和文件的整个文件夹，当我尝试时它给了我这个错误

```
C:\>adb push C:\Users\peng-lp-10\Desktop\ABC\ /mnt/sdcard/ABC/
cannot stat 'C:\Users\peng-lp-10\Desktop\ABC\': No such file or direct
ory 
```

即使该文件夹存在。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T04:31:49.983

看看[这个问题](https://stackoverflow.com/questions/2808632/manually-put-files-to-android-emulator-sd-card)，[furikuretsu](https://stackoverflow.com/users/402534/furikuretsu)说：

> 您可以简单地***将***任何一组***文件***和***文件夹***拖到***文件资源管理器***（DDMS 透视图中的窗口）。无需使用箭头图标。

它工作正常。

# html - 如何在 CSS 中上推文本？

> ID：11497663
> 
> 赞同：6
> 
> 时间：2012-07-16T03:05:31.070
> 
> 标签：html, css

演示：http: [//jsfiddle.net/DerekL/gNkKx/](http://jsfiddle.net/DerekL/gNkKx/)

我试图将文本推高`div`50%，我试过了

```
padding-bottom: 50px; /*div is 100px high*/ 
```

但它不起作用。

```
padding-top: -50px; 
```

这也不起作用。任何解决方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T03:14:27.317

`line-height:0px;`把它推高一些，但我不知道多少，而且显然不是你想要的 50px。

您可以将元素包装在另一个容器中并像这样定位它：

HTML

```
<div class="container">
  <div class="block">龍&lt;/div>
</div> 
```

CSS（仅显示您的样式的修改）

```
.container{
    position: relative;
}
.block {
  position: absolute;
  top: -50px;
} 
```

[**演示**](http://jsfiddle.net/gNkKx/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:14:05.603

如果您尝试将文本置于框中的中心，请尝试以下操作：

```
div.block {
    border: 1px solid black;
    width: 100px;
    height: 100px;
    text-align: center;
   font-size: 80px;
    line-height: 80px;
    overflow: hidden;
    padding-top: 10px;
}
*{
    box-sizing: border-box;
}​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-16T17:08:42.257

尝试使用 inline-block 提升文本。使用边框查看您的位置。通过这样做，您可以看到margin-top 可以向上调整的位置以及它有多大。

```
<div style='display:inline-block;margin-top:-30px; border: 1px solid pink;'>
    <font style='color:green;'>today </font>
</div> 
```

# codeigniter - PyroCMS 干净 URL 的问题

> ID：11497664
> 
> 赞同：1
> 
> 时间：2012-07-16T03:05:40.167
> 
> 标签：codeigniter, uri, pyrocms, pyro

**我需要更改哪些内容才能让我的网站显示 CleanURLS ？**

我安装了带有 Apache Mod ReWrite 选项的 PyroCMS，安装成功，但是当我点击我得到的链接时..

[http://domainname.com.au/index.php/contact](http://domainname.com.au/index.php/contact)

我想得到..

[http://domainname.com.au/contact](http://domainname.com.au/contact)

如果我在地址栏中键入 URL 作为[http://domainname.com.au/contact](http://domainname.com.au/contact) Pyro 仍然可以工作并支持干净的 URL，但是链接将与 index.php 一起显示。我调查了

```
\\mywebsite\system\cms\config\config.php 
```

并确认 index_page 为空白，因此系统应显示干净的 URL，除非我需要修改另一个文件。

```
$config['index_page'] = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:44:34.303

作为记录，如果您选择“Apache (/w mod_rewrite)”，则不会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T21:59:34.523

通过删除位于此处的 navigation_m 模型缓存文件夹来强制重新生成缓存的查询结果：`system/cms/cache/<site>/navigation_m/`

为我工作

# c# - 获取形状（路径）上某个点的纬度经度

> ID：11497668
> 
> 赞同：0
> 
> 时间：2012-07-16T03:06:12.413
> 
> 标签：c#, geolocation, geometry, geocoding, gtfs

我有一个点列表（纬度，经度），这是一条公共汽车路径，在这条路径周围我有一些点（公共汽车站），这些点不在路径上。

我需要在路径上投影公交车站点，以计算每个公交车站从路径起点的行进距离。为此，我需要知道路径上每个站点的纬度和经度。

我可以计算距离，但我无法投影路径上的点并获取公交车站点的新经纬度。

我寻找一个他们没有成功的公式......

有人有一个想法，我使用 C# 4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T16:21:51.907

PostGIS 有一个名为[ST_LineLocatePoint](http://postgis.net/docs/ST_Line_Locate_Point.html)的函数，您可以使用 ST_LineInterpolatePoint 从中获取精确点。

PostGIS 源代码可[在此处获得](https://github.com/postgis/postgis/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:14:26.093

我会说你需要计算线路（巴士路线）和点（巴士站）之间的最小距离。见[http://local.wasp.uwa.edu.au/~pbourke/geometry/pointline/](http://local.wasp.uwa.edu.au/~pbourke/geometry/pointline/)

# java - 安装 JOGL

> ID：11497669
> 
> 赞同：1
> 
> 时间：2012-07-16T03:06:13.473
> 
> 标签：java, jogl

好吧，认为我是一个绝对的傻瓜，但我一生都无法弄清楚如何获得 JOGL 库。我在任何地方都找不到它们。大多数站点似乎链接到404 的[https://jogl.dev.java.net/](https://jogl.dev.java.net/)，或链接到似乎没有托管 .jar 文件的[http://jogamp.org/ 。](http://jogamp.org/)我必须从源代码构建吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:09:21.383

做了一些谷歌搜索后，我找到了这个页面：

*   [jogamp-电流](http://jogamp.org/deployment/jogamp-current/)
*   [jogl 最新版本/存档](http://jogamp.org/deployment/jogamp-current/archive/)（包含最新版本和 7z 格式的 jar）

希望它可以帮助你。

# ios - 使用 MusicSequenceFileCreate() 将 MusicSequence 保存到 .mid 文件

> ID：11497670
> 
> 赞同：2
> 
> 时间：2012-07-16T03:06:14.050
> 
> 标签：ios, midi, audiotoolbox

我目前正在开发一个需要根据用户输入创建 MusicSequence 的应用程序，并且我目前在 MusicSequenceFileCreate() 上遇到 -1 错误。并且 -1 未在 MusicSequence 参考中列为错误 - 我是否使用错误的格式来打印 OSStatus？

任何帮助是极大的赞赏！我无法在网上找到很多将 MusicSequence 保存到 .mid 文件的参考资料...

我在最后得到错误。

```
OSStatus status = 0;

MusicSequence newSeq;
status = NewMusicSequence(&newSeq);
if(status){
    printf("Error new sequence: %ld\n", status);
    status = 0;
} else {
    MusicSequenceSetSequenceType(newSeq, kMusicSequenceType_Seconds);
}

MusicTrack tempoTrack;
status = MusicSequenceGetTempoTrack(newSeq, &tempoTrack);
if(status){
    printf("Error getting tempo track: %ld\n", status);
    status = 0;
}
status = MusicTrackNewExtendedTempoEvent(tempoTrack, 0, 120);
if(status){
    printf("Error adding tempo to track: %ld\n", status);
    status = 0;
}

MusicTrack thisTrack;
status = MusicSequenceNewTrack(newSeq, &thisTrack);
if(status){
    printf("Error adding main track: %ld\n", status);
    status = 0;
}

for(int i = 0; i<convertThis.melodyPoints.count; i++) {
    MIDINoteMessage thisMessage;
    thisMessage.note = thisNote.midiNoteNumber;
    thisMessage.duration = thisNote.duration;
    thisMessage.velocity = 120;
    thisMessage.releaseVelocity = 0;
    thisMessage.channel = 1;
    status = MusicTrackNewMIDINoteEvent(thisTrack, thisNoteBegin, &thisMessage);
    if(status){
        printf("Error adding midi note: %ld\n", status);
        status = 0;
    }
}

NSURL *thisurl = [NSURL URLWithString:[@"~/Documents" stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mid", convertThis.title]]];
status = MusicSequenceFileCreate(newSeq, (__bridge CFURLRef) thisurl, kMusicSequenceFile_MIDIType, kMusicSequenceFileFlags_EraseFile, 0);
if(status != noErr){
    printf("Error on create: %ld\n", status);
    status = 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:33:27.950

像这样访问您的文档目录

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

如果您想在其中创建一个文件夹来存储您的 MIDI，您需要先检查它是否有效或像这样[创建它 在 iOS 应用程序的文档文件夹中创建一个文件夹](https://stackoverflow.com/questions/1762836/create-a-folder-inside-documents-folder-in-ios-apps)

并将字符串添加到 CFURLRef 以直接在 MusicSequenceFileCreate 中使用

```
NSString *midiPath = [documentsDirectory
                               stringByAppendingPathComponent:[NSString stringWithFormat:@"/MIDIs/%@.mid",convertThis.title]];
CFURLRef midiURL = (CFURLRef)[[NSURL alloc] initFileURLWithPath:midiPath]; 
```

那么就

```
status = MusicSequenceFileCreate(newSeq, midiURL, kMusicSequenceFile_MIDIType, kMusicSequenceFileFlags_EraseFile, 0); 
```

# iphone - 如果应用处于审核状态超过 1 周，它将被拒绝。这是真的？

> ID：11497673
> 
> 赞同：0
> 
> 时间：2012-07-16T03:07:38.283
> 
> 标签：iphone, ios, app-store, app-store-connect

有人说如果app处于review状态超过1周就会被拒。我的应用程序处于审核状态 2 周。会被批准吗？可能需要多长时间？

这个应用程序对我们公司非常重要。我很担心。感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T03:10:11.570

苹果可能需要几个小时到几周的时间来审查事情。您无能为力，只能等待，耐心等待，不要惊慌。除非您在应用程序中做了一些非常疯狂的事情，否则您无需担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T03:09:08.723

你被骗得很惨。

**苹果通常会花几周**的时间审核应用程序。不要害怕。

（不过，它可能会被拒绝，但实际上，这根本不取决于您的应用被审查的时间......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T03:09:22.107

我相信这可能需要长达 2 周的时间。在获得批准之前，我们已经在商店中放置了一个多星期的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T03:09:56.430

不，应用程序有时需要长达一周的时间才能获得批准。只要确保您遵循他们的指导方针，它就应该被批准。

# javascript - Onclick(this) 选择第一个元素，而不是当前元素

> ID：11497678
> 
> 赞同：-1
> 
> 时间：2012-07-16T03:08:28.580
> 
> 标签：javascript, jquery, this

所以，我有一个像这样的图像列表..

```
<ul class="image-list">
    <li class="image-icon"><a onclick="showImg(this)"><img src="/gallery/latest/1.jpg"/></a></li>
    <li class="image-icon"><a onclick="showImg(this)"><img src="/gallery/latest/2.jpg"/></a></li>
    <li class="image-icon"><a onclick="showImg(this)"><img src="/gallery/latest/3.jpg"/></a></li>
    <li class="image-icon"><a onclick="showImg(this)"><img src="/gallery/latest/4.jpg"/></a></li>
    <li class="image-icon"><a onclick="showImg(this)"><img src="/gallery/latest/5.jpg"/></a></li>
</ul> 
```

显示图像（）...

```
function showImg(img) {
    document.getElementById("photo").innerHTML = "<img src='"+$(img+" img").attr("src")+"'/>";
    $("#photo").slideDown(500);
} 
```

该函数`showImg()`获取`src`attr`this > img`并将图像放在另一个 div 中。问题是，`this`只选择第一个图像 src。任何想法为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:15:25.383

`this`用作上下文，而不是上下文选择器。

`$("img", img).attr("src")`

此外，您可以简化代码：

```
$("#photo").html('<img src="'+$("img", img).attr("src")+'" />').slideDown(500); 
```

多亏了 Fabrício Matté，进一步简化了：

```
$('#photo').html($('img', img).clone()).hide().slideDown(500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:16:58.983

您正在将`this`[HTMLAnchorElement] 传递给 jQuery

`img+" img"`可能会给你`[HTMLAnchorElement] img`

你想要的是

```
$("img", img) 
```

# jquery - 使用 JQuery 从父级滚动 iframe

> ID：11497679
> 
> 赞同：2
> 
> 时间：2012-07-16T03:08:34.367
> 
> 标签：jquery, iframe, parent, scrolltop

我正在尝试使用 JQuery 从父窗口滚动 iframe。换句话说，在父页面上设置滚动子 iframe 的滚动按钮。它适用于 JavaScript，使用：

```
function scroller(howMuch) 
{
        var myIframe = document.getElementById('iframeid');

        myIframe.contentWindow.scrollBy(0,howMuch);
} 
```

然后从以下位置调用函数：

```
<a href="javascript:scroller(-50)">Scroll Up 50 px</a> 
```

但是尝试使用 JQuery 来使用 animate() 而不是笨重的 scrollBy() 并不容易。我试过了

```
$('#iframeid').contentWindow.animate({scrollTop : 50}); 
```

例如。我相当确定这是如何从 JQuery 访问 iframe 的 contentWindow - 在这个主题上找不到太多。一个问题可能是父页面设置为滚动：无（iframe 设置为默认值）。这可能是破坏交易还是我错过了其他东西？我意识到我可以在 JavaScript 中编写延迟循环，但这激起了我的好奇心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:54:57.460

这里有两个可能的问题，绝对是一个。

jQuery 不理解`contentWindow()`这个字符串，为此你需要使用 `contents()`.

如果您能够操作 iframe（同域）的内容，那么您可以使用

```
$('element').on('mousedown', function(){
  $('iframe').contents().animate({ scrollTop : 50 });
}); 
```

按住它会滚动内容。试试看。

# adobe-illustrator - Adobe Illustrator - 尝试适应画板命令时脚本崩溃

> ID：11497680
> 
> 赞同：2
> 
> 时间：2012-07-16T03:08:44.803
> 
> 标签：adobe-illustrator, extendscript

```
activeDocument.fitArtboardToSelectedArt() 
```

调用此命令时，AI 在 AI 5.1/6 32bit 和 64bit 版本上崩溃。我可以使用菜单中的命令。有没有人遇到过这个？有人知道解决方法吗？

完整的代码。

```
 function exportFileToJPEG (dest) {
    if ( app.documents.length > 0 ) {

        activeDocument.selectObjectsOnActiveArtboard()
        activeDocument.fitArtboardToSelectedArt()//crashes here
        activeDocument.rearrangeArtboards()

        var exportOptions = new ExportOptionsJPEG();
        var type = ExportType.JPEG;
        var fileSpec = new File(dest);
        exportOptions.antiAliasing = true;
        exportOptions.qualitySetting = 70;
        app.activeDocument.exportFile( fileSpec, type, exportOptions );
    }
}
var file_name = 'some eps file.eps'
var eps_file = File(file_name)

var fileRef = eps_file;

if (fileRef != null) {
    var optRef = new OpenOptions();
    optRef.updateLegacyText = true;
    var docRef = open(fileRef, DocumentColorSpace.RGB, optRef);
}

exportFileToJPEG ("output_file.jpg") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T20:14:15.507

我可以用 AI CS5 重现这个错误。

似乎`fitArtboardToSelectedArt()`将画板的索引作为可选参数。设置参数后，Illustrator 不会崩溃。（可能是代码中处理不传参数情况的一个bug）

作为一种解决方法，您可以使用：

```
activeDocument.fitArtboardToSelectedArt(
               activeDocument.artboards.getActiveArtboardIndex()
                                       ); 
```

将活动画板的索引传递给函数。希望这对你也有效。

此外，最好不要在语句末尾省略分号。

# perl - perl 上一个字符？

> ID：11497683
> 
> 赞同：4
> 
> 时间：2012-07-16T03:09:06.277
> 
> 标签：perl

在 Perl 中，假设我在名为 的变量中有字母 A `$character`，我希望它上升到 B，我该怎么做？也可以是数字（0-8），我希望该`$character`方法对它们都有效吗？（类似于二进制移位，但不完全确定它是否是那样的）。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T03:23:46.603

增量运算符可能是您想要的。但是，请确保您需要边界行为。例如：

```
my $character = 'Z';
print ++$character; 
```

产生：

```
AA 
```

这是来自[http://perldoc.perl.org/perlop.html#Auto-increment-and-Auto-decrement](http://perldoc.perl.org/perlop.html#Auto-increment-and-Auto-decrement)的“带进位” 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T03:11:37.443

简单的增量应该做你想要的：

```
my $character = "A";
$character++; 
```

来自[perl-doc](http://perldoc.perl.org/perlop.html#Auto-increment-and-Auto-decrement)：

> 自增运算符有一点额外的内置魔法。如果你增加一个数值变量，或者曾经在数值上下文中使用过的变量，你会得到一个正常的增量。但是，如果该变量自设置以来仅用于字符串上下文，并且其值不是空字符串且与模式匹配 /^a-zA-Z*0-9*\z/ ，则增量以字符串形式完成，将每个字符保留在其范围内，并带有进位

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T18:05:22.140

只是添加到其他回复：

请注意，只有在所讨论的变量从未在数字上下文中使用过时，神奇的自动增量才有效。因此：

```
perl -e '$x = "A"; ++$x; print $x'  # prints "B" 
```

但：

```
perl -e '$x = "A"; $x + 0; ++$x; print $x'  # prints "1" 
```

为了保证始终获得神奇的自动增量，您应该事先明确地对变量进行字符串化：

```
perl -e '$x = "A"; $x + 0; $x = "$x"; ++$x; print $x'  # prints "B" 
```

如果您知道要递增的变量的历史记录并且可以验证它从未在数字上下文中使用过，则可以跳过此步骤。

玩魔法可能很棘手！

# magento - 产品编辑器中属性集选项卡的Magento模板？

> ID：11497690
> 
> 赞同：0
> 
> 时间：2012-07-16T03:10:09.050
> 
> 标签：magento, select

产品编辑器中属性设置页面/标签的模板是什么？

我创建了一些多选属性并将它们分配给属性集。当我编辑分配给此属性集的产品时，在属性集选项卡上，所有多选控件的固定高度为 10 行（大小 =“10”）。

我希望它们不是固定的，而是只要需要就可以，因为在某些选择中有很多选项，我的编辑器不得不向下滚动以找到特定选项，这让我很恼火。

我试图通过这个搜索：

```
find adminhtml -type f -exec grep -l " size=\"10\"" {} \; 
```

但没有运气，也尝试过：

```
find adminhtml -type f -exec grep -l " multiple=\"multiple\"" {} \; 
```

仍然没有运气。我发现的似乎不是我需要的模板。

那么我应该编辑哪个模板以删除产品编辑器中属性集选项卡的所有多选的属性 size="10" ？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:27:56.203

默认大小设置为类，而不是模板：

```
class Varien_Data_Form_Element_Multiselect extends Varien_Data_Form_Element_Abstract
{
    public function __construct($attributes=array())
    {
        parent::__construct($attributes);
        $this->setType('select');
        $this->setExtType('multiple');
        $this->setSize(10);
    }
..................
} 
```

如果你想改变，你应该观察`adminhtml_catalog_product_edit_prepare_form`事件。然后在你的观察者中你可以做这样的事情

```
foreach ($form->getElements() as $element) {
   if ($element instanceof Varien_Data_Form_Element_Multiselect) {
       $element->setSize(/*your value*/);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:49:11.563

您还可以在 adminhtml/default/default/template/catalog/form/renderer/fieldset/element.phtml 中的模板内进行更改

```
<td class="value">
    <?php if ($_element->getSize()==10)$_element->setSize(20);//here the change?>
    <?php echo trim($this->getElementHtml()) ?>
    <?php if ($_element->getNote()) : ?>
        <p class="note"><?php echo $_element->getNote() ?></p>
    <?php endif; ?>
</td> 
```

# python - 烧瓶中的python装饰器

> ID：11497693
> 
> 赞同：7
> 
> 时间：2012-07-16T03:10:48.350
> 
> 标签：python, decorator, flask

这是我的例子：

```
from flask import Flask

app = Flask(__name__)
def add1(f):
    def inner(*args, **kwargs):
        return str(f(*args, **kwargs))+'1'
    return inner

@app.route('/')
@add1
def hello1():
    return "hello1";

@app.route('/hello2')
@add1
def hello2():
    return "hello2";

if(__name__ =='__main__'):
    app.run() 
```

当我运行 127.0.0.1:5000 时，我希望得到“hello11​​”，但我得到“hello21”，为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T04:48:18.237

问题是 Flask 按名称跟踪函数，并且因为传递给的函数`app.route(path)`都被调用`inner`，所以第二个 ( `hello2`) 覆盖了第一个。要解决此问题，您需要将`inner`函数的名称更改为它正在装饰的函数的名称。您可以将装饰器更改为

```
def add1(f):
    def inner(*args, **kwargs):
        return str(f(*args, **kwargs))+'1'
    inner.__name__ = f.__name__
    return inner 
```

这将起作用，但不如标准库解决方案优雅，

```
from functools import wraps

def add1(f):
    @wraps(f)
    def inner(*args, **kwargs):
        return str(f(*args, **kwargs))+'1'
    return inner 
```

`wraps`装饰器不仅修复了名称，还修复了文档字符串、文件和属性字典。

# xcode - 如何限制在 LLDB 中使用“backtrace”命令打印的行数？

> ID：11497696
> 
> 赞同：4
> 
> 时间：2012-07-16T03:11:36.587
> 
> 标签：xcode, lldb

在 GDB 下，您可以通过运行以下命令将回溯中的行数限制为例如最上面的 5 帧：

```
bt 5 
```

在 LLDB 中，同样的命令似乎打印出*线程 5*的完整回溯。我找不到任何有关 LLDB 单个命令的适当文档 - 是否可以只打印回溯的最后 5 行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T06:46:59.297

尝试这个：

`bt -c 5`

我在这里找到了一大堆有趣的 LLDB 信息：http: [//lldb.llvm.org/tutorial.html](http://lldb.llvm.org/tutorial.html)

# javascript - 请，需要帮助循环一个 Javascript 事件

> ID：11497697
> 
> 赞同：3
> 
> 时间：2012-07-16T03:12:04.077
> 
> 标签：javascript, html, xml, loops, dom-events

我编写了一个运行良好的脚本，只是我希望添加一个定时循环。我是 Javascript 的新手，现在已经为此苦恼了几天，我希望专家可以帮助我....

我也只需要这个在 FireFox 中工作！

该脚本正在从 XML 中提取数据。如果在 XML 中找不到任何内容，则页面将正常显示。如果找到某些东西，它会创建一个弹出 div，显示找到的信息并播放音频文件。

如果通过调用外部 CSS 样式表在 XML 集中找不到任何内容，则弹出窗口只是一个可见性设置为隐藏的 div。如果找到某些东西，那么它会引用一个单独的样式表并播放和音频文件，并将 div 设置可见更改为 true。

我需要以某种方式添加一个循环，以便此脚本每 20-30 秒检查一次 XML 文件，如果发现某些内容，它将显示我隐藏的 DIV 并播放音频警报。该脚本功能齐全，除了我无法在不重新加载页面的情况下让脚本循环。

我也想将其保留在`<head>`标签中。

```
 <head>
    <script type="text/javascript">

    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.open("GET","xml/SearchRequest-11988N.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;

    xtotaltickets=xmlDoc.getElementsByTagName("issue")[0].getAttributeNode("total");
    totaltickets=xtotaltickets.nodeValue;
    ytotaltickets=parseInt(totaltickets);

    if (ytotaltickets<1)
    {
    document.write("<link rel='stylesheet' type='text/css' href='notickets.css'>");
    }
    else
    {
      document.write("<link rel='stylesheet' type='text/css' href='newtickets.css'>");
      var audioElement = document.createElement('audio');
      audioElement.setAttribute('src', 'newticket.ogg');
      audioElement.play();
    }

    </script> 
```

同样，我只需要它在 FireFox 中工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:17:30.870

将您的代码放在一个函数中并使用一个间隔：

```
<head>
<script type="text/javascript">

function refreshXml() {

    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.open("GET","xml/SearchRequest-11988N.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;

    xtotaltickets=xmlDoc.getElementsByTagName("issue")[0].getAttributeNode("total");
    totaltickets=xtotaltickets.nodeValue;
    ytotaltickets=parseInt(totaltickets);

    if (ytotaltickets<1)
    {
    document.write("<link rel='stylesheet' type='text/css' href='notickets.css'>");
    }
    else
    {
      document.write("<link rel='stylesheet' type='text/css' href='newtickets.css'>");
      var audioElement = document.createElement('audio');
      audioElement.setAttribute('src', 'newticket.ogg');
      audioElement.play();
    }
}

setInterval(refreshXml, 20000);

</script> 
```

您需要检查的其他一些事项：

*   确保可以多次调用该函数而不会创建重复的内容。特别是，您应该在创建它们之前检查您需要的元素是否已经存在。

*   为了确保代码在正确的时间运行，您可能需要监听 body`onload`事件。还可以考虑使用 jQuery，因为它会使代码更易于编写和维护。

# android - 如何从网站获取图片名称？

> ID：11497699
> 
> 赞同：0
> 
> 时间：2012-07-16T03:12:24.573
> 
> 标签：android, image, blocked

我没有成功搜索这个答案，但基本上，我怎样才能从阻止保存图像的网站上找到图像文件名？通常，url 源将具有图像文件名，并且易于搜索。

但是，有些网站允许您将鼠标悬停在图片上，然后放大到更大的图像。来源显示，例如，

```
http://example.com/pictures.aspx?ImagePath=ABCDEFGHIJ1234567989KLMNOPQRST==..... 
```

eg：一个随机的长串代码，但没有`.jpg`或`.png`指示文件名。右键保存时，显示图像被阻止。

如何使用 Android 代码获取图像？

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:18:44.007

这似乎更像是一个 Web 服务实现问题，而不是任何特定于 Android 的问题。许多网站都有此功能，您并不打算从 url 中检索信息。

但是，应该有一个相应的受支持的 Web 服务接口来获取特定资源的元数据。如果不支持此功能，则应将其阻止。

另一种试错方法是调用 oEmbed （或 Embed.ly ：[http://embed.ly/](http://embed.ly/)）之类的第 3 方 API，它将返回您拥有 URL 的资源的元数据。这些服务涵盖范围广泛的网站及其资源。

您可以在他们的网站上四处搜索，或找到可以为您提供此信息的类似此类服务。Embed.ly 更多的是个人偏好，因为它提供了详尽的支持站点列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:16:08.703

如果不允许从网站上获取它们，那么它可能不应该被获取。话虽如此，如果您是网站的所有者，则有多种选择。

如果它们在数据库中，那么您可以获得它们的 url 地址。此外，右键单击页面上的任意位置以“查看源代码”应该会为您提供某种图像的 URL。

# matlab - matlab中randn的随机变量范围是多少？

> ID：11497703
> 
> 赞同：2
> 
> 时间：2012-07-16T03:13:13.143
> 
> 标签：matlab, normal-distribution

我正在使用 matlab 绘制满足正态分布的随机变量。我将直方图绘制为

```
w = 0.2;
y = randn(1, 1000)*w;
hist(y); 
```

这显示了直方图中的变量范围从 -40 到 40，但那是什么？我认为由于正态分布的宽度是 0.2，我认为变量的范围应该在 -1 到 1 之间，对吧？那么为什么 hist 显示从 -40 到 40 呢？我怎么知道随机变量的实际范围？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:10:32.247

在正态随机变量（有时称为高斯分布）中，范围理论上可以是从 -infinity 到 +infinity。但是，分布具有钟形，这意味着较大的值发生的概率较低，但它们有可能发生。因此，如果您使用 randn(1,1000000) 而不是 randn(1, 1000)，则很有可能您会看到更大的范围。与 randn() 相乘的值 0.2 只会改变这个随机信号的能量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:23:01.367

你能提供更多信息吗？

当我运行您的代码段时，我得到一个带有最小值和最大值的高斯直方图：

```
>> [min(y) max(y)]

ans =

   -0.6464    0.7157 
```

# objective-c - 为什么 UIActionSheet 缓存委托选择器？

> ID：11497708
> 
> 赞同：1
> 
> 时间：2012-07-16T03:14:09.587
> 
> 标签：objective-c, ios, cocoa, uiactionsheet

我最近发现它`UIActionSheet`实际上在它呈现之前缓存了它的可用委托选择器。

为什么不确定委托是否在确实需要知道时响应某个选择器？`[delegate respondsToSelector:@selector()]`执行起来真的很慢吗？我们应该在自己的代码中使用这种设计模式吗？任何想法，将不胜感激！

UIActionSheet.h 中的标志结构如下：

```
struct {
    unsigned int numberOfRows:7;
    unsigned int delegateAlertSheetButtonClicked:1;
    unsigned int delegateDidPresentAlertSheet:1;
    unsigned int delegateDidDismissAlertSheet:1;
    unsigned int hideButtonBar:1;
    unsigned int alertStyle:3;
    unsigned int dontDimBackground:1;
    unsigned int dismissSuspended:1;
    unsigned int dontBlockInteraction:1;
    unsigned int sheetWasPoppedUp:1;
    unsigned int sheetWasShown:1;
    unsigned int animating:1;
    unsigned int hideWhenDoneAnimating:1;
    unsigned int layoutWhenDoneAnimating:1;
    unsigned int titleMaxLineCount:2;
    unsigned int bodyTextMaxLineCount:3;
    unsigned int runsModal:1;
    unsigned int runningModal:1;
    unsigned int addedTextView:1;
    unsigned int addedTableShadows:1;
    unsigned int showOverSBAlerts:1;

    unsigned int showMinTableContent:1;
    unsigned int bodyTextTruncated:1;
    unsigned int orientation:3;
    unsigned int popupFromPoint:1;
    unsigned int inPopover:1;
    unsigned int delegateBodyTextAlignment:1;
    unsigned int delegateClickedButtonAtIndex:1;
    unsigned int delegateClickedButtonAtIndex2:1;
    unsigned int delegateCancel:1;
    unsigned int delegateCancel2:1;
    unsigned int delegateWillPresent:1;
    unsigned int delegateWillPresent2:1;
    unsigned int delegateDidPresent:1;
    unsigned int delegateDidPresent2:1;
    unsigned int delegateWillDismiss:1;
    unsigned int delegateWillDismiss2:1;
    unsigned int delegateDidDismiss:1;
    unsigned int delegateDidDismiss2:1;
    unsigned int dontCallDismissDelegate:1;
    unsigned int useAutomaticKB:1;
    unsigned int twoColumnsLayoutMode:7; // one column || even width (leaves empty space) || first button wider || last button wider
    unsigned int threeColumnsLayoutMode:7; // one column || even width (leaves empty space) || first button wider || last button wider
    unsigned int shouldHandleFirstKeyUpEvent:1; // when presenting with hardware KB we have to handle the first key up event we get so we don't end up repeating the last key
    unsigned int cancelWhenDoneAnimating:1;
    unsigned int useThreePartButtons:1; // phone numbers layout
    unsigned int useTwoPartButtons:1; // doc interaction layout
    unsigned int displaySelectedButtonGlyph:1;
    int indexOfSelectedButton:7; // default -1 (no checkmark) otherwise will display a checkbox (this for the airtunes action sheet)
    unsigned int useCustomSelectedButtonGlyph:1;
} _modalViewFlags; 
```

# c++ - 为日期查找维度表填充加载文件的最佳方法是什么？

> ID：11497714
> 
> 赞同：1
> 
> 时间：2012-07-16T03:14:45.853
> 
> 标签：c++, sql, date, sed, informix

Informix 11.70.TC4：

我有一个 SQL 维度表，用于查找日期（pk_date）并向客户端返回另一个日期（plus1、plus2 或 plus3_months），具体取决于用户选择“1”、“2”还是“3” ”。

表架构如下：

```
TABLE date_lookup
(
    pk_date DATE,
    plus1_months DATE,
    plus2_months DATE,
    plus3_months DATE
);

UNIQUE INDEX on date_lookup(pk_date); 
```

我有一个加载文件（管道分隔），其中包含从 01-28-2012 到 03-31-2014 的日期。

以下是加载文件的示例：

```
01-28-2012|02-28-2012|03-28-2012|04-28-2012|
01-29-2012|02-29-2012|03-29-2012|04-29-2012|
01-30-2012|02-29-2012|03-30-2012|04-30-2012|
01-31-2012|02-29-2012|03-31-2012|04-30-2012|
...
03-31-2014|04-30-2014|05-31-2014|06-30-2014| 
```

..................................................... ...................................................

**编辑：** *乔纳森爵士`DATE(pk_date + n UNITS MONTH`在 11.70.TC5 上使用的 SQL 语句有效！*

![在此处输入图像描述](../Images/d9c58ee5dacb30991ec4f3c230a135db.png)

我生成了一个 pk_date 从 01-28-2012 到 12-31-2020 的加载文件，并且 plus1、plus2 和 plus3_months 为 NULL。将此加载到 date_lookup 表中，然后执行以下更新语句：

```
UPDATE date_lookup
   SET plus1_months = DATE(pk_date + 1 UNITS MONTH),
       plus2_months = DATE(pk_date + 2 UNITS MONTH),
       plus3_months = DATE(pk_date + 3 UNITS MONTH); 
```

显然，DATE() 能够将 pk_date 转换为 DATETIME，使用 TC5 的新算法进行数学运算，并以 DATE 格式返回结果！

..................................................... ……………………………………………………………………………………………………………………………………

这个维度表的规则是：

*   如果 pk_date 在其月份中有 31 天，而 plus1、plus2 或 plus3_months 只有 28、29 或 30 天，则令 plus1、plus2 或 plus3 等于该月的最后一天。
*   如果 pk_date 在其月份中有 30 天，而 plus1、plus2 或 plus3 在其月份中有 28 或 29 天，则让它们等于该月的最后一个有效日期，依此类推。
*   所有其他日期都在下个月的同一天。

我的问题是：按照上述规则自动生成 pk_dates 过去 03-31-2014 的最佳方法是什么？我可以使用 SQL 脚本、“sed”、C 程序来完成这项工作吗？

*编辑：我提到`sed`是因为我已经拥有超过两年的数据，也许可以在这些数据之后对其余的数据进行建模，或者像这样的工具`awk`更好？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:23:48.327

可以用 SQL 完成吗？可能吧，但那会很痛苦。C 同上，我认为“不”是 sed 的答案。

然而，几十行 perl 似乎产生了你需要的东西：

```
#!/usr/bin/perl

use strict;
use warnings;
use DateTime;

my @dates;

# parse arguments
while (my $datep = shift){
    my ($m,$d,$y) = split('-', $datep);
    push(@dates, DateTime->new(year => $y, month => $m, day => $d))
        || die "Cannot parse date $!\n";
}

open(STDOUT, ">", "output.unl") || die "Unable to create output file.";
my ($date, $end) = @dates;
while( $date < $end ){
    my @row = ($date->mdy('-')); # start with pk_date
    for my $mth ( qw[ 1 2 3 ] ){
        my $fut_d = $date->clone->add(months => $mth);
        until   (
                    ($fut_d->month == $date->month + $mth
                       && $fut_d->year == $date->year) ||
                    ($fut_d->month == $date->month + $mth - 12
                       && $fut_d->year > $date->year)
                ){
                    $fut_d->subtract(days => 1); # step back until criteria met
                }
        push(@row, $fut_d->mdy('-'));
    }
    print STDOUT join("|", @row, "\n");
    $date->add(days => 1);
} 
```

将其保存为futuredates.pl，`chmod +x`然后执行如下：

```
$ futuredates.pl 04-01-2014 12-31-2020 
```

这似乎对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T22:09:07.353

最好的技术是升级到 11.70.TC5（在 32 位 Windows 上；通常升级到 11.70.xC5 或更高版本）并使用如下表达式：

```
SELECT DATE(given_date + n UNITS MONTH)
  FROM Wherever
... 
```

DATETIME 代码在 11.70.xC4 和 11.70.xC5 之间进行了修改，以根据您在日期如所述并且使用`+ n UNITS MONTH`或等效表示法时概述的规则生成日期。

这完全消除了对表的需要。不过，很明显，您的所有客户端也必须在 11.70.xC5 上。

也许您可以将您的开发机器更新到 11.70.xC5，然后使用此属性为您的开发机器上的表生成数据，并将数据分发给您的客户端。

如果不能选择至少将某人升级到 11.70.xC5，请考虑 Perl 脚本建议。

# c - C、Sockets: Connection Refused 错误

> ID：11497716
> 
> 赞同：9
> 
> 时间：2012-07-16T03:14:53.513
> 
> 标签：c, sockets

我有一个数据采集模块，我想从以太网端口收集数据。**我正在逐步到达那里**，目前我只想`connect`从客户端服务器。我使用 Beej 的指南来获取基本的 C 代码。但我只是不断收到此连接错误`connect: Connection refused.`

**这就是我所做的：**

1.  这里提到的网络IP是我配置的**STATIC IP 。**

2.  服务器端的端口号设置为 50000，从客户端我连接到端口 50000 上的这个 IP。

3.  我构建并运行服务器端应用程序，然后尝试通过运行客户端应用程序连接到它。

`returns`在我启动客户端应用程序之前对服务器端、服务器端应用程序有一个疑问，所以我应该保持它运行（ `while(1);`）以便我可以从客户端连接到它吗？

怎么了，我在这里忘记了什么？帮助！

我在这里粘贴了稍微修改过的（IP 和端口号不同）Beej 的**服务器端和客户端**的 C 代码：

**服务器.c**

```
/*
** server.c
*/
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <netinet/in.h>

int main(int argc, char *argv[])
{
    // code for a server waiting for connections
    // namely a stream socket on port 3490, on this host's IP
    // either IPv4 or IPv6.
    int sockfd;
    struct addrinfo hints, *servinfo, *p;
    int rv;
    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC; // use AF_INET6 to force IPv6
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE; // use my IP address

    if ((rv = getaddrinfo(NULL, "50000", &hints, &servinfo)) != 0)
    {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        exit(1);
    }

    // loop through all the results and bind to the first we can
    for(p = servinfo; p != NULL; p = p->ai_next) 
    {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,
        p->ai_protocol)) == -1) 
        {
            perror("socket");
            continue;
        }
        if (bind(sockfd, p->ai_addr, p->ai_addrlen) == -1)
        {
            close(sockfd);
            perror("bind");
            continue;
        }
        break; // if we get here, we must have connected successfully
    }

    if (p == NULL) 
    {
        // looped off the end of the list with no successful bind
        fprintf(stderr, "failed to bind socket\n");
        exit(2);
    }

    freeaddrinfo(servinfo); // all done with this structure

} 
```

**客户端.c**

```
/*
** client.c
*/
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <netinet/in.h>

int main(int argc, char *argv[])
{
    // code for a client connecting to a server
    // namely a stream socket to www.example.com on port 80 (http)
    // either IPv4 or IPv6
    int sockfd;
    struct addrinfo hints, *servinfo, *p;
    int rv;
    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC; // use AF_INET6 to force IPv6
    hints.ai_socktype = SOCK_STREAM;
    if ((rv = getaddrinfo("192.168.2.4", "50000", &hints, &servinfo)) != 0) 
    {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        exit(1);
    }
    // loop through all the results and connect to the first we can
    for(p = servinfo; p != NULL; p = p->ai_next)
    {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,
        p->ai_protocol)) == -1) 
        {
            perror("socket");

        continue;
        }
        if (connect(sockfd, p->ai_addr, p->ai_addrlen) == -1) 
        {
            close(sockfd);
            perror("connect");
            continue;
        }
        break; // if we get here, we must have connected successfully
    }

    if (p == NULL)
    {
        // looped off the end of the list with no connection
        fprintf(stderr, "failed to connect\n");
        exit(2);
    }

    freeaddrinfo(servinfo); // all done with this structure

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T03:24:25.453

您的服务器代码丢失`listen()`，`accept()`代码通过调用 listen() 来“等待”连接，然后执行一个`accept()`以接受新连接。您使用的示例没有显示如何做到这一点吗？通常，您还将为每个新连接创建一个新线程。

有关详细信息，请参阅[http://www.linuxhowtos.org/C_C++/socket.htm](http://www.linuxhowtos.org/C_C++/socket.htm)。

这是一个更完整实现的链接：[http ://www.thegeekstuff.com/2011/12/c-socket-programming/](http://www.thegeekstuff.com/2011/12/c-socket-programming/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T03:32:42.550

是的，您需要保持服务器程序运行。`socket()`在您的服务器程序中，您已经创建了使用并绑定到地址的套接字`bind()`，现在您需要开始监听传入的连接。这是通过`listen()`调用完成的。一旦套接字正在侦听传入连接，您必须使用`accept()`调用来实际接受连接并获取套接字以与该特定客户端进行通信。

作为一个简单的示例，`freeaddrinfo`您可以在之后添加以下代码：

```
listen(sockfd, 8); /* allow up to 8 pending connections, i.e. created but not accepted */
while (1) {
  int clientfd;
  struct sockaddr_in client_addr;
  socklen_t client_addr_len = sizeof(struct sockaddr_in);
  clientfd = accept(sockfd, &client_addr, &client_addr_len);
  /* communicate with client by send()/recv() or write()/read() on clientfd */
  close(clientfd);
} 
```

该代码的缺点是一次只能处理一个客户端。有几种方法可以同时处理多个客户端：多进程使用`fork()`、多线程或轮询。在我看来，这些方法中的每一种都超出了这个问题的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T03:25:49.227

请查看您的 Server.c 文件：它根本不调用 listen() ！
如果目标服务器没有监听指定的端口，那么它会在收到来自客户端的 SYN 数据包时返回 RST 数据包，因此 connect() 将返回“连接被拒绝”。

服务器端的正常功能流程是 socket -> bind -> listen -> accept ：

```
getaddrinfo();
socket();
bind();
listen();
/* accept() goes here */ 
```

请参考[https://beej.us/guide/bgnet/html/multi/syscalls.html#listen](https://beej.us/guide/bgnet/html/multi/syscalls.html#listen)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T09:26:51.890

I was getting the error "connection refused" due to not having the entry of remote host in /etc/hosts file. Entry should be present both side. In Client machines /etc/hosts, there should be a entry of server machine and vice versa in below pattern.

`<ip address> <hostname with domain> <alias hostname>`

This solved the error which i was in getaddrinfo() function.

# opencv - 在 Ubuntu 中使用 Rob Hess 的 SIFT 库

> ID：11497719
> 
> 赞同：2
> 
> 时间：2012-07-16T03:15:34.653
> 
> 标签：opencv, gtk, computer-vision, ubuntu-10.10, sift

我正在尝试在 Ubuntu 11.10 中使用 Rob Hess 的 SIFT 库。SIFT 及其依赖项 - OpenCV 和 GTK+ 已安装。现在，当我尝试使用 SIFT 库从终端运行任何示例时，它以“非法指令”终止。有人可以帮忙吗？谢谢。

# ruby - 如何从远程 URL 的长 CSV 的前几行中快速获取字符串？

> ID：11497722
> 
> 赞同：2
> 
> 时间：2012-07-16T03:16:07.863
> 
> 标签：ruby, csv, open-uri

我正在执行一项任务，使用雅虎的股票价格系统从网上检索几个股票价格。不幸的是，我需要使用的[Yahoo API](http://ichart.finance.yahoo.com/table.csv?s=TICKER_SYMBOL)返回一个 .csv 文件，该文件显然包含该股票交易的每一天的一行，这对于我正在使用的股票来说至少有 5000 行，超过 10其中一些有千行（[例如](http://ichart.finance.yahoo.com/table.csv?s=XOM)）。

不过，我只关心*当前*价格，它位于第二行。

我目前正在这样做：

```
require 'open-uri'
def get_ticker_price(stock)
   open("http://ichart.finance.yahoo.com/table.csv?s=#{stock}") do |io|
      io.read.split(',')[10].to_f
   end
end 
```

......但它**真的很**慢。

1.  是所有延迟都来自获取文件，还是我处理它的方式有一些延迟？正在`io.read`读取整个文件吗？

2.  有没有办法只下载 Yahoo CSV 文件的前几行？

3.  如果问题 1 和 2 的答案没有使这个问题变得无关紧要，是否有更好的方法来处理它而不需要查看整个文件（假设这`io.read`是在做什么）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:55:59.013

通过使用日期范围参数，您可以使用查询字符串参数将数据减少到当前日期。

例如 2012 年 7 月 13 日的 MO：（开始/结束月份以零索引开始，{ 00 - 11 } ）。

[http://ichart.finance.yahoo.com/table.csv?s=MO&a=06&b=13&c=2012&d=6&e=13&f=2012&g=d](http://ichart.finance.yahoo.com/table.csv?s=MO&a=06&b=13&c=2012&d=6&e=13&f=2012&g=d)

api description here: [http://etraderzone.com/free-scripts/47-historical-quotes-yahoo.html](http://etraderzone.com/free-scripts/47-historical-quotes-yahoo.html)

# c# - 用于所有二维数组的 linq

> ID：11497723
> 
> 赞同：2
> 
> 时间：2012-07-16T03:16:12.933
> 
> 标签：c#, linq

```
[0,0,0]
[1,1,1]
[2,2,2] 
```

我有上面的二维数组。

我需要检查 3 件事，首先是检查所有单元格是否都像上面一样填充。

第二：

```
[0,0,0]
[1]
[] 
```

对于上面的数组，我需要检查每行是否填充了所有单元格。

第三：

```
[0,]
[1,1]
[2,2,2] 
```

我想查找是否填充了第一列的第一个元素。

我可以用 foreach 循环或 for 循环来做到这一点。但我想`All(predicate)`与 linq 一起使用。

```
 foreach (var ticketValue in ticketValues)
            {
                firstRow = ticketValue.All(x => x == i);

                foreach (var value in ticketValue)
                {

                }
            } 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T16:49:53.590

我假设您正在像这样设置 2D：

```
int?[][] myArrayA = new int?[][] { new int?[] {0,0,0}, new int?[] {1,1,1}, new int?[] {2,2,2} };
int?[][] myArrayB = new int?[][] { new int?[] {0,0,0}, new int?[] {1}, new int?[] {null} };
int?[][] myArrayC = new int?[][] { new int?[] {0,null}, new int?[] {1,1,1}, new int?[] {2,2,2} }; 
```

所以，使用 Linq 我们这样做：

```
bool FirstCheck(int?[][] theArray)
{
    int size = (from arrays in theArray select arrays.GetUpperBound(0)).Max();

    var check = from arrays in theArray
                where theArray.All(sub => sub.GetUpperBound(0) == size)
                select arrays;

    return size + 1 == check.Count<int?[]>();
}

bool SecondCheck(int?[][] theArray)
{
    int size = (from arrays in theArray select arrays.GetUpperBound(0)).Max();

    var check = from arrays in
                    (from subs in theArray
                     where theArray.All(sub => sub.All(value => value != null))
                     select subs)
                where arrays.GetUpperBound(0) == size
                select arrays;

    return size + 1 == check.Count<int?[]>();
}

bool ThirdCheck(int?[][] theArray)
{
   int size = (from arrays in theArray select arrays.GetUpperBound(0)).Max();

   var check = from arrays in theArray
               where theArray.All(array => array[0].HasValue)
               select arrays;

   return size + 1 == check.Count<int?[]>();
} 
```

希望这就是你想要的...

# tcl - 如何在 TCL 中反转数组

> ID：11497726
> 
> 赞同：1
> 
> 时间：2012-07-16T03:16:48.580
> 
> 标签：tcl

我是 TCL 新手，一直在自己练习。现在，我正在阅读 TCL 中的数组，并且正在尝试反转数组。数组 TestArr 是

```
Zero Orange
First Apple
Second Banana 
```

所以，基本上我想成功

```
Zero Banana
First Apple
Second Orange 
```

但是，我找不到找到第一个元素的索引或最后一个元素的索引的方法，因为 using `foreach {index value} [array get TestArr]`将返回无序的索引值。

C++ 代码将是：

```
 for(int i=0;i>end;end--,i++)
 {
    int temp = TestArr[i];
    TestArr[i] = TestArr[j];
    TestArr[j] = temp;
 } 
```

TCL有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:24:54.550

在 TCL 中，“数组”实际上是`hash map`perl 中的 a 或`std::map`C++ 中的 a 或`dict`python 中的 a。因此它们是无序的，因此重新排序它们没有意义。

您真正想要的`list`在 TCL 中称为 a 。并且调用了反转列表的功能`lreverse`。

[TCL清单文件](http://www.tcl.tk/man/tcl8.5/TclCmd/list.htm)

[`lreverse`文件](http://www.tcl.tk/man/tcl8.5/TclCmd/lreverse.htm)

从下面的评论：

`lreverse`在 8.5 中添加。在 8.4 中，自己编写代码如下：`for {set i [llength $lst]} {[incr i -1] >= 0} {} {lappend reversed [lindex $lst $i]}`-- [Donal Fellows](https://stackoverflow.com/users/301832/donal-fellows)

# jquery - 移除 iframe 后使对象在屏幕上居中

> ID：11497740
> 
> 赞同：0
> 
> 时间：2012-07-16T03:18:56.223
> 
> 标签：jquery, html, css

我有一个居中`p`的东西，我用它来保存我的嵌入式实时流对象和一个用于聊天的 iframe，就像这样

![隐藏聊天](../Images/4db2be5b79dc3aafea292c6d526158d8.png)

现在，我有一个`JQuery`隐藏聊天的电话， `<a id="hidechat" onClick="$('#chat_embed').hide();" href="#">[Hide Chat]</a>`

但这最终导致流盒被拉到左边 ![隐藏聊天](../Images/a9ff76222042262cbd2ca4bf64820eda.png)

我希望聊天在屏幕中央重新对齐，而右侧没有丑陋的框。我试过设置 a`float:left;`但是它下面的文本会环绕并且通常会破坏整个布局。

我目前的布局可以做到这一点吗？

CSS：

```
 p
    {
        margin-left:auto;
        margin-right:auto;
        margin-bottom:1%;
        background-color:#121212;
        max-width:53%;
        max-height:75%;
        padding-top:25px;
        padding-left:25px;
        padding-right:25px;
        padding-bottom:25px;
    }
    p.streamblock
    {
        padding-top:25px;
        padding-left:25px;
        padding-right:25px;
        padding-bottom:25px;
        max-width:1000px;
    } 
```

嵌入代码：

```
<object type="application/x-shockwave-flash" height="378" width="620" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel=mychannel" bgcolor="#000000">
    <param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf" />
    <param name="flashvars" value="hostname=www.twitch.tv&channel=mychannel&auto_play=true&start_volume=25" />
</object>
<iframe frameborder="0" scrolling="no" id="chat_embed" src="http://twitch.tv/chat/embed?channel=tronasaurusx&amp;popout_chat=true" height="378" width="350"></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:34:14.070

**新的 HTML 标记**->

```
<div class="streamblock">
  <!-- Twitch.tv embed code -->
<a href="#" onclick="$('#chat_embed').show();$('#showchat').hide();$('#hidechat').show();" id="showchat" style="display: inline;">[Show Chat]</a>
    <a href="#" onclick="$('#chat_embed').hide();$('#hidechat').hide();$('#showchat').show();" id="hidechat" style="display: none;">[Hide Chat]</a><br>
    <p class="objContainer">
  <object width="620" height="378" style="margin: 0px auto;" type="application/x-shockwave-flash" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel=tronasaurusx" bgcolor="#000000">
    <param name="allowFullScreen" value="true">
    <param name="allowScriptAccess" value="always">
    <param name="allowNetworking" value="all">
    <param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf">
        <param name="flashvars" value="hostname=www.twitch.tv&amp;channel=tronasaurusx&amp;auto_play=true&amp;start_volume=25">
      </object>
     <!-- End Twitch.tv embed code -->
 <!-- Twitch.tv chat code -->
 <iframe width="350" scrolling="no" height="378" frameborder="0" style="display: none;" id="chat_embed" src="http://twitch.tv/chat/embed?channel=tronasaurusx&amp;popout_chat=true"></iframe>
 <br>
 <!-- End Twitch.tv chat code -->
  </p>
</div> 
```

**新的 CSS 标记**->

```
div.streamblock{
  margin: 0px auto; 
  text-align: center; 
  max-width:1100px;
}
p{
  background-color: #121212;
  color: #FFFFFF;
  font-family: "Palatino Linotype",Tahoma,Serif;
  margin-bottom: 1%;
  margin-left: auto;
  margin-right: auto;
  max-height: 75%;
  padding: 25px;
  text-indent: 10px;
} 
```

我使用控制台编辑您的 HTML 并即时进行这些更改。以上（当完全按照我给出的使用时）将产生所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:43:35.713

嘿，现在你可以这样做

```
.streamblock > a{
float:right; 
margin-right:xx; // required to your design 
} 
```

# amazon-ec2 - 我在哪里可以找到 amzn repo 的源 rpm？

> ID：11497741
> 
> 赞同：4
> 
> 时间：2012-07-16T03:19:22.540
> 
> 标签：amazon-ec2, rpm

我需要在我的 Centos6 EC2 实例上构建一个 RPM 包，所以我认为最好使用 amzn 的“官方”规范。通常我是这样做的，`yumdownloader --source xxx`但在 EC2 实例上它找不到任何东西。

我查了一下`/etc/yum.repo.d`，似乎没有关于 src 的任何 repo。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-21T20:00:06.853

您可以使用`get_reference_source`Shadow Lau 描述的 python 脚本，但这需要安装软件包。您需要在 Amazon Linux AWS 实例上的 EC2 上运行它。

该脚本从 alami-source-request.amazonaws.com 获取要下载的 URL。以下是如何使用它：

[https://alami-source-request.amazonaws.com/cgi-bin/source_request.cgi?instance_id=i®ion=eu-west-1&version=2011-08-0&srpm_name=stunnel-4.29-3.6.amzn1.src.rpm](https://alami-source-request.amazonaws.com/cgi-bin/source_request.cgi?instance_id=i&region=eu-west-1&version=2011-08-0&srpm_name=stunnel-4.29-3.6.amzn1.src.rpm)

不幸的是，您需要知道确切的包名称。版本与`get_reference_source`脚本中的一样。似乎没有对 instance_id 进行验证。

上述 URL 将返回另一个带有访问密钥的 URL，您可以在此限时下载 SRPM。之后，您必须使用上述 source_request.cgi 生成另一个 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:24:44.800

[在http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/AmazonLinuxAMIBasics.htm](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/AmazonLinuxAMIBasics.htm)中查找访问源包以供参考

# mysql - Django & MySQL unicode 错误

> ID：11497744
> 
> 赞同：4
> 
> 时间：2012-07-16T03:19:55.347
> 
> 标签：mysql, django, utf-8

尝试在 Django 和 MySQL 中保存 unicode 字符串（韩语）时出现错误。我遇到的第一个`Incorrect string value (Exception Value: Incorrect string value: '\xEA\xB0\x95\xED\x95\x98...' for column 'object_repr' at row 1)`问题是数据库表中每一列的“字符串值不正确”错误。但是，我通过更改列排序规则和整个数据库字符集来解决这个问题。

我得到的新错误与models.py中的**unicode**（self）方法有关。我的models.py如下：

```
from django.db import models

# Create your models here.
class User(models.Model):
full_name = models.CharField(max_length=60)
email = models.EmailField(unique=True)
password = models.CharField(max_length=128)
birthday = models.DateField(null=True, blank=True)
gender = models.PositiveIntegerField(null=True, blank=True)
location = models.CharField(max_length=60, null=True, blank=True)
captcha = models.CharField(max_length=60, null=True, blank=True)

register_date = models.DateTimeField()
lastLogin_date = models.DateTimeField(null=True)
num_logins = models.PositiveIntegerField()

def __unicode__(self):
    return self.full_name 
```

当`__unicode__`函数尝试输出 utf8 字符时会产生错误...

有谁知道如何解决这个错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T19:29:23.990

在 MySQL 控制台执行

```
ALTER DATABASE django_db CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE django_admin_log MODIFY object_repr VARCHAR(200) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL; 
```

对我来说有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T09:57:19.463

尝试在此文件的第一行添加一行，如下所示：

```
#-*- encoding=UTF-8 -*- 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-29T04:23:06.163

我通过更改文件解决了这个问题`settings.py`：不要使用`'ENGINE': 'django.db.backends.mysql'`.

# c# - ServiceHost AddServiceEndpoint - 多个连接

> ID：11497745
> 
> 赞同：0
> 
> 时间：2012-07-16T03:20:09.280
> 
> 标签：c#, wcf, network-programming, duplex-channel

我有一个基于[此](http://realfiction.net/go/113)的 Duplex WFC 客户端，与单个客户端一起使用时效果很好。当我尝试将多个客户端连接到服务器时，就会出现问题。当我这样做时，我得到一个例外：`There was no endpoint listening at net.tcp://localhost:9080/MyDataService/1617f081e4b04c288965eea6ae18a39f that could accept the message. This is often caused by an incorrect address or SOAP action.`

我这样定义我的端点：

```
ServiceHost duplex = new ServiceHost(typeof(ServerWCallbackImpl)); 
```

并像这样添加我的客户端端点：

```
duplex.AddServiceEndpoint(typeof(IServerWithCallback), new NetTcpBinding(), uniqueEndpointAddress); 
```

第一次连接没有问题，但是当我尝试以同样的方式连接第二个客户端时，会抛出上述异常。

有谁看到我做错了什么？

感谢进阶！

# jsf - JSF 2.0 + 程序化身份验证 = 403 :)

> ID：11497749
> 
> 赞同：1
> 
> 时间：2012-07-16T03:21:20.800
> 
> 标签：jsf, java-ee-6, glassfish-3, servlet-3.0

我正在过渡到 GlassFish 3.1.2，但似乎无法解决身份验证问题。

议程很简单：我想要一个登录 bean 为用户进行编程身份验证。身份验证似乎有效（代码通过 login() 方法），但服务器最终显示受保护资源的 403 ......请帮助:)

这里有更多细节。有一个带有名称/密码对的纯 JSF 登录页面：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" template="/templates/main.xhtml">

    <ui:define name="body">
        <h:form id="form">
            <p:messages />

            <p:panel>
                <h:panelGrid>
                    <h:outputText value="User Name" />
                    <p:inputText value="#{loginBean.userName}" id="userName"
                        required="true" />
                    <p:message for="userName" />

                    <h:outputText value="Password" />
                    <p:password value="#{loginBean.password}" id="password"
                        required="true" />
                    <p:message for="password" />

                </h:panelGrid>

                <h:panelGrid columns="2">
                    <p:commandButton value="Clear"
                        actionListener="#{loginBean.clear()}" ajax="false" />

                    <p:commandButton value="Login" action="#{loginBean.login()}"
                        ajax="false" />
                </h:panelGrid>
            </p:panel>
        </h:form>
    </ui:define>
</ui:composition> 
```

和一个执行登录的 bean

```
@Named("loginBean")
@SessionScoped
public class LoginBean implements Serializable {

    private static final long serialVersionUID = 1L;

    @Inject
    @Named("dao")
    private Dao dao;

    private String userName;

    private String password;

    @Inject
    private UserBean userBean;

    ...

    public String login() {
        HttpServletRequest request = (HttpServletRequest) FacesContext
                .getCurrentInstance().getExternalContext().getRequest();

        try {
            request.login(getUserName(), getPassword());

            Principal principal = request.getUserPrincipal();

            logger.info("Logged in successfully: " + principal);
        } catch (ServletException e) {
            Messages.addError("Invalid user name or password.");
            return null;
        }

        User user = dao.findSingle("SELECT u FROM User AS u WHERE u.name = ?1",
                getUserName());

        if (user == null) {
            logger.severe("Unable to find user record after successful authentication");

            Messages.addError("Unable to load user record");
            try {
                request.logout();
            } catch (ServletException e) {
                logger.log(Level.SEVERE, "Unable to logout after failed login attempt", e);
            }
            return null;
        }

        getUserBean().setUser(user);

        return "/list/list.xhtml?faces-redirect=true";
    }

    ... 

    accessors

    ...
} 
```

这是我的 web.xml

```
<?xml version='1.0' encoding='UTF-8'?>

<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <display-name>GM</display-name>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <!-- Faces Servlet -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <login-config>
        <realm-name>gmRealm</realm-name>
    </login-config>

    <security-role>
        <role-name>user</role-name>
    </security-role>

    <security-role>
        <role-name>admin</role-name>
    </security-role>

    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Protected Area</web-resource-name>
            <url-pattern>/list/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>user</role-name>
        </auth-constraint>
    </security-constraint>

    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Admin Area</web-resource-name>
            <url-pattern>/admin/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>admin</role-name>
        </auth-constraint>
    </security-constraint>

    <welcome-file-list>
        <welcome-file>login.xhtml</welcome-file>
    </welcome-file-list>

</web-app> 
```

这是项目的文件夹结构：

![文件夹结构](../Images/e3bee16d5c2d808d898c4cd43584c5ea.png)

我还能够按照此处讨论的方式设置领域：http: [//blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html](http://blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html)

没什么特别的，AFAICT。

但是，每当我在成功登录后访问受保护的资源时，我都会得到：

```
HTTP Status 403 - Access to the requested resource has been denied 
```

尽管服务器日志包含以下消息：

```
INFO: Logged in successfully: nick 
```

另请注意，当我从 login() 方法的返回值中删除“？faces-redirect = true”时，初始受保护资源在登录后立即呈现，但所有后续请求都失败并出现 403。

这是它在调试器中显示的内容：

![调试视图](../Images/e51f2dd2a4e7a1142183d30cac7ac7fd.png)

我也认为我已经完成了我的功课：

[使用 j_security_check 在 Java EE / JSF 中执行用户身份验证](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0)

[使用 Servlet 3.0 以编程方式控制登录](https://stackoverflow.com/questions/6189536/programmatically-control-login-with-servlet-3-0)

[JSF 2.0 简单登录页面](https://stackoverflow.com/questions/3752104/jsf-2-0-simple-login-page)

[Glassfish 3 安全性 - 使用 JDBC 领域的基于表单的身份验证](https://stackoverflow.com/questions/7944963/glassfish-3-security-form-based-authentication-using-a-jdbc-realm)

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:26:53.433

Oh, well, I guess this one is too deployment specific. I ended up re-conding the prototype in Spring for Tomcat stack. Works like charm now :).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-24T06:21:13.807

我认为您在 Spring Security 中不允许使用 jsf 资源。在 http 标记的 security.xml 中添加以下行。

```
<http .........>
    <intercept-url pattern="/javax.faces.resource/**" access="permitAll"/>
</http> 
```

# java - 在你的 macbook 上，显示你的 IDEA scala 插件版本，哪个可以工作？

> ID：11497751
> 
> 赞同：0
> 
> 时间：2012-07-16T03:22:03.140
> 
> 标签：java, scala, intellij-idea

我的想法配置：macbook 10.7 想法：11.1.2 build #IU 117.418 scala 插件版本：0.5.907

结果是：scala 无法通过编译。

显示你可以工作的conf，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:57:50.447

我有 IntelliJ IDEA 11.1.2 Build #IC 117.418 和 Scala 插件版本 0.5.913。

我在让插件识别 *.scala 文件时遇到问题。论坛告诉我检查文件类型设置，我不得不手动将 *.scala 添加到 Scala 文件中。

以下是您可以遵循的步骤：

1.  下载[scala-2.9.2.tgz](http://www.scala-lang.org/downloads/distrib/files/scala-2.9.2.tgz)并将其展开为`~/Applications/scala-2.9.2/`.
2.  下载[scala-docs-2.9.2.txz](http://www.scala-lang.org/downloads/distrib/files/scala-docs-2.9.2.txz)并将其展开为`~/Applications/scala-2.9.2/scala-devel-docs/api/`.
3.  从 IntelliJ，文件 > 新项目...
    *   选择*从头开始创建项目*。
    *   输入项目名称。
    *   保持*Create 模块*不变。*Java 模块*很好。
    *   点击*下一步*。
4.  保持选中 *创建源目录。*
    *   点击*下一步*。
5.  检查*斯卡拉*：
    *   保持选中*使用 Scala 发行版。*
    *   浏览到`~/Applications/scala-2.9.2/`您在上面创建的内容。
    *   *将创建编译器库*重命名为`scala-compiler-2.9.2`.
    *   *将创建标准库*重命名为`scala-library-2.9.2`.
    *   保持它们都是*项目级别的*。
    *   打完。
6.  右键单击`src`，然后选择新建... > Scala 类。
    *   键入`Hello`名称。
    *   选择*对象*作为种类。
    *   点击*确定*。
7.  这应该创建`object Hello`.
8.  输入：

    ```
    object Hello extends App {
      println("Hello, world!")
    } 
    ```

9.  右键单击项目树中的*Hello*图标并选择*Run 'Hello.main()'*。这应该打印出以下内容：

    ```
    /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -Didea.launcher.port=7532 ....
    Hello, world!

    Process finished with exit code 0 
    ```

# c# - 按字节数组排序（字节表示 long var 类型）

> ID：11497752
> 
> 赞同：1
> 
> 时间：2012-07-16T03:22:15.877
> 
> 标签：c#, serialization, binary, bytearray, deserialization

我有一个`List<byte[]>`. 每个字节数组的大小为 16 字节。前 8 个字节是 C# long 数据类型的二进制表示，我用它来停止 DateTimeTicks。我想知道是否有一种方法可以按相同的顺序对一堆字节数组进行排序，就像我按长等价物按升序排序一样。显然，如果将每个字节数组反序列化为 long 然后排序，这很容易，但是有没有办法在不反序列化的情况下逃脱？如果不是，是否有可能找到将 DateTimeTick 值转换为二进制表示的逻辑，以便可以直接对二进制执行排序，例如，首先以二进制形式表示年，然后是月、日、小时、分钟，秒，毫秒，.. ? 我的目标是跳过反序列化步骤，因为我需要通过消息传递网络以二进制格式发送已排序的字节数组，并且它目前浪费大量资源必须首先反序列化以进行排序（必须在发送对象之前完成排序通过网络），然后再次序列化它以通过消息传递系统发送它，然后再次反序列化它。

非常欢迎任何想法、提示或解决方案，谢谢。

编辑：我目前使用 Linq OrderBy 函数来排序，这对于我的目的来说足够快，并且看起来沿着这些线，性能明智。我想坚持使用 Linq，除非无法按字节数组排序，即使我提供了 IComparer ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:44:01.990

```
 var rnd = new Random();

        var data = new List<byte[]>();

        //As long as the first 8 bytes are the long, the byte[] can be as long as you want.
        for (int i = 0; i < 10; i++)
            data.Add(BitConverter.GetBytes((ulong)rnd.Next()));

        //Without any 'deserialisation'
        if (BitConverter.IsLittleEndian)
            data = data.OrderBy(x => x[7]).ThenBy(x => x[6]).ThenBy(x => x[5]).ThenBy(x => x[4]).ThenBy(x => x[3]).ThenBy(x => x[2]).ThenBy(x => x[1]).ThenBy(x => x[0]).ToList();
        else  //untested, probably wrong
            data = data.OrderBy(x => x[0]).ThenBy(x => x[1]).ThenBy(x => x[2]).ThenBy(x => x[3]).ThenBy(x => x[4]).ThenBy(x => x[5]).ThenBy(x => x[6]).ThenBy(x => x[7]).ToList();

        //How I'd actually approach it due to simplicity.
        //data = data.OrderBy(x => BitConverter.ToUInt64(x, 0)).ToList();

        data.ForEach(x => Console.WriteLine(BitConverter.ToUInt64(x, 0)));

        Console.ReadLine();

        //There are other approaches of course, but at the fundamental level you're 
        //either going to 'deserialize' the long or test each byte in order. 
```

# android - 处理块外的变量

> ID：11497753
> 
> 赞同：0
> 
> 时间：2012-07-16T03:22:18.000
> 
> 标签：android, variables

我有一个应用程序设置为有十八个按钮。这背后的基本思想是，如果单击其中三个按钮，则会为每个按钮分配一个字符串变量。然后将这些值相加并与字符串进行比较。如果字符串的值匹配，我希望出现一个警告对话框。我尝试将每个按钮变量存储在共享首选项中，但警报对话框仅在您重新启动该活动后才会显示。我希望这立即发生。如果有人能对此有所了解，我将永远感激不尽。此外，如果可以采用更有效的方法来做到这一点，那将很有帮助。

我不确定如何处理按钮等块之外的变量。如果我知道怎么做，我只需将三个变量传递到按钮块之外并在同一个文件中调用它，比较然后设置警报。同样，基本逻辑是：如果选择了三个特定按钮并且选择了所有三个按钮，那么只有在那时才会出现警报对话框。（如果有帮助，选择的任何其他按钮都会重置所有其他按钮）。代码：

```
public class Stage1Level1Activity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.stage1level1);

    ImageButton a1 = (ImageButton) findViewById(R.id.a1);
    ImageButton a3 = (ImageButton) findViewById(R.id.a3);
    ImageButton a4 = (ImageButton) findViewById(R.id.a4);
    ImageButton b1 = (ImageButton) findViewById(R.id.b1);
    final ImageButton b2 = (ImageButton) findViewById(R.id.b2);
    ImageButton b3 = (ImageButton) findViewById(R.id.b3);
    ImageButton b4 = (ImageButton) findViewById(R.id.b4);
    ImageButton c1 = (ImageButton) findViewById(R.id.c1);
    final ImageButton c2 = (ImageButton) findViewById(R.id.c2);
    ImageButton c3 = (ImageButton) findViewById(R.id.c3);
    ImageButton c4 = (ImageButton) findViewById(R.id.c4);
    ImageButton d1 = (ImageButton) findViewById(R.id.d1);
    final ImageButton d2 = (ImageButton) findViewById(R.id.d2);
    ImageButton d3 = (ImageButton) findViewById(R.id.d3);
    ImageButton d4 = (ImageButton) findViewById(R.id.d4);
    ImageButton e1 = (ImageButton) findViewById(R.id.e1);
    ImageButton e3 = (ImageButton) findViewById(R.id.e3);
    ImageButton e4 = (ImageButton) findViewById(R.id.e4);

    a1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });

    a3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    a4.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    b1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });

    b2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_filled);
            SharedPreferences sharedPreferences1 = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
            SharedPreferences.Editor editor = sharedPreferences1.edit();
            editor.putString("part1", "a");
            editor.commit();
        }
        });
    b3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    b4.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    c1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    c2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            c2.setBackgroundResource(R.drawable.green_filled);
            SharedPreferences sharedPreferences2 = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
            SharedPreferences.Editor editor = sharedPreferences2.edit();
            editor.putString("part2", "b");
            editor.commit();
        }
        });
    c3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    c4.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    d1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    d2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            d2.setBackgroundResource(R.drawable.green_filled);
            SharedPreferences sharedPreferences3 = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
            SharedPreferences.Editor editor = sharedPreferences3.edit();
            editor.putString("part3", "c");
            editor.commit();
        }
        });
    d3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    d4.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    e1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });

    e3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });
    e4.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            b2.setBackgroundResource(R.drawable.green_empty);
            c2.setBackgroundResource(R.drawable.green_empty);
            d2.setBackgroundResource(R.drawable.green_empty);

        }
        });

    SharedPreferences sharedPreferences1 = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
    String part1 = sharedPreferences1.getString("part1", "");
    SharedPreferences sharedPreferences2 = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
    String part2 = sharedPreferences2.getString("part2", "");
    SharedPreferences sharedPreferences3 = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
    String part3 = sharedPreferences3.getString("part3", "");

    String added = part1 + part2 + part3;
    String compared = "abc";

    if (added.equalsIgnoreCase(compared) ){

        AlertDialog alertDialog = new AlertDialog.Builder(Stage1Level1Activity.this).create();
        alertDialog.setTitle("Reset...");
        alertDialog.setMessage("R u sure?");
        alertDialog.setButton2("OK", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int which) {

            } });

        alertDialog.show();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:25:49.597

将所有这些局部变量声明为字段：

```
public class Stage1Level1Activity extends Activity {
   //fields  
   private ImageButton a1;
   ....
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.stage1level1);

      a1 = (ImageButton) findViewById(R.id.a1);
      //
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:41:30.227

如果您在包含所有这些处理程序的“类”中创建变量，它们都可以直接访问变量。

所以试试这个：

```
public class Stage1Level1Activity extends Activity {
    private String myVariable; 
```

然后，您应该能够在您定义的任何这些方法中访问 myVariable

（社论如下，不是答案的一部分）问题是这段代码真的应该是 10-15 行，认真的（而且不是密集的难以理解的行！）。我不能完全为你做这件事，因为我没有 GUI 工具，但例如，至少为了让你开始（所以你可以明白我的意思）：

```
b3.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        b2.setBackgroundResource(R.drawable.green_empty);
        c2.setBackgroundResource(R.drawable.green_empty);
        d2.setBackgroundResource(R.drawable.green_empty);
    }
    });
b4.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        b2.setBackgroundResource(R.drawable.green_empty);
        c2.setBackgroundResource(R.drawable.green_empty);
        d2.setBackgroundResource(R.drawable.green_empty);
    } 
```

相当于：

```
OnClickListener ocLictener=new View.OnClickListener() {
    public void onClick(View view) {
        b2.setBackgroundResource(R.drawable.green_empty);
        c2.setBackgroundResource(R.drawable.green_empty);
        d2.setBackgroundResource(R.drawable.green_empty);
    }
    });
b3.setOnClickListener(ocListener);
b4.setOnClickListener(ocListener); 
```

（请注意，我刚刚选择了 2 个遵循完全相同的模式，还有更多。

我并不是要批评（好吧，我想我是，但我并不是以卑鄙的方式，只是有启发性），我只是在想，如果您继续按照这些思路进行编码，您将使自己陷入困境很多心痛。我会将整个剪辑发布在“重构”SO 网站上，看看会发生什么:)

顺便说一句，问题的一部分是 GUI 构建器，他们鼓励这种代码，但他们不需要它......

编辑：实际上我不能不管这个，让我尝试一些重构：

公共类 Stage1Level1Activity 扩展 Activity {

/** 在第一次创建活动时调用。*/ @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.stage1level1);

```
// Here we create a bunch of image buttons.  Instead of having he same line repeated
// let's put them into an array.  I forget the type of Android's resources but let's
// assume they are Strings:

// Need to list all the ids somehow, this is probably the easiest.
private String[] ids=new String[]{R.id.a1, R.id.a2, r.id.a3, ..., r.id.e4}  
private String[] triggerIds=new String[]{R.id.b2, R.id.c2, r.id.d2}    
private ImageButton btns=new ImageButton[ids.length];
private ImageButton triggerBtns=new ImageButton[ids.length];

for(int i=0;i<ids.length;i++)
    btns[i]= (ImageButton) findViewById(ids[i]);
for(int i=0;i<triggerIds.length;i++)
    triggerBtns[i]=(ImageButton) findViewById(ids[i]);

// Now you have two types of buttons, the first type are all the same
for(ImageButton ib:btns) {
    ib.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            for(ImageButton tb:triggerBtns) {
                tb.setBackgroundResource(R.drawable.green_empty);
    }
    });
}

int arrayPtr=0;  // Used to fill out some values in the following loop

for(ImageButton tb:triggerBtns) {
    tb.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            tb.setBackgroundResource(R.drawable.green_filled);
            SharedPreferences sharedPreferences1 = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
            SharedPreferences.Editor editor = sharedPreferences1.edit();
            // Right here is the only place that these three differ.  The pattern is:
            // editor.putString("part1", "a");
            // editor.putString("part2", "b");
            // editor.putString("part3", "c");
            String[] values=new String[]{"part1", "a", "part2","b","part3","c"};
            editor.putString(values[arrayPtr++], values[arrayPtr++]);
            editor.commit();
        }
    });
// I'll leave it here, that replaces at least 4/5 of the original code and in 20
// or so lines.  A lot more could be done, but the array trick is really handy
// for code like this. 
```

# javascript - 设置第一个单选按钮在车把模板中被选中

> ID：11497754
> 
> 赞同：7
> 
> 时间：2012-07-16T03:22:18.513
> 
> 标签：javascript, templates, handlebars.js

如何在 Handlebars 模板中以**简单明了的方式设置第一个单选按钮。**tks

模板：

```
<form>
    {{#each this}}
        <input value="{{value}}" />
     {{/each}}
</form> 
```

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

期待渲染：

```
<form>
    <input value="val 1" checked />
    <input value="val 2" />
    <input value="val 3" />
</form> 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T04:02:24.017

`{{#each}}`在 Handlebars 中不会让您访问迭代编号或类似的东西，因此如果不稍微更改模板和数据就无法做到这一点：

```
<form>
    {{#each this}}
        <input type="radio" value="{{value}}" {{#if sel}}checked="checked"{{/if}} />
    {{/each}}
</form> 
```

然后将`sel`值添加到您的数据中：

```
var tmpl = Handlebars.compile($('#t').html());
var html = tmpl([
    { value: 'val 1', sel: true  },
    { value: 'val 2', sel: false },
    { value: 'val 3', sel: false }
]); 
```

演示：http: [//jsfiddle.net/ambiguous/27Ywu/](http://jsfiddle.net/ambiguous/27Ywu/)

您当然可以只设置`sel: true`数据数组的第一个元素：

```
data = [ ... ];
data[0].sel = true;
var html = tmpl(data); 
```

演示：http: [//jsfiddle.net/ambiguous/yA5WL/](http://jsfiddle.net/ambiguous/yA5WL/)

或者，在获得 HTML 后使用 jQuery 检查第一个：

```
// Add the HTML to the DOM...
$('form input:first').prop('checked', true); // Or whatever selector matches your HTML 
```

演示：http: [//jsfiddle.net/ambiguous/sPV9D/](http://jsfiddle.net/ambiguous/sPV9D/)

* * *

较新版本的 Handlebars 确实[让您可以访问索引](http://handlebarsjs.com/#iteration)：

> 循环访问 中的项目时`each`，您可以选择通过以下方式引用当前循环索引`{{@index}}`
> 
> ```
> {{#each array}}
>   {{@index}}: {{this}}
> {{/each}} 
> ```
> 
> 对于对象迭代，请`{{@key}}`改用：
> 
> ```
> {{#each object}}
>   {{@key}}: {{this}}
> {{/each}} 
> ```

因此，如果您使用的是最新的 Handlebars，您可以使用以下事实来做一些特别的事情：

1.  第一个`@index`将为零。
2.  零在布尔上下文中是错误的。

这让你可以这样做：

```
{{#each this}}
    <input type="radio" value="{{value}}" {{#unless @index}}checked="checked"{{/unless}} />
{{/each}} 
```

演示：http: [//jsfiddle.net/ambiguous/PHKps/1/](http://jsfiddle.net/ambiguous/PHKps/1/)

当然，挑选任何其他索引更难，您要么修改输入数据（如前所述），要么添加某种`{{#if_eq}}`自定义帮助程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-26T01:59:24.450

`index`将作为第二个参数传递，

```
<form>
    {{#each people as |value index|}}
        <input value="{{value}}" type="radio" {{#unless index}}checked="checked"{{/unless}}/>
     {{/each}}
</form> 
```

# php - 我需要在哪个 symfony 文件中创建实体函数

> ID：11497755
> 
> 赞同：0
> 
> 时间：2012-07-16T03:22:33.160
> 
> 标签：php, symfony, doctrine-orm

我很困惑我需要在哪个文件中创建 symfony 函数。

例如

我有类 User.php 和 .

现在我有很多功能

喜欢

`addUser()`, `editUser()`, `sleectUserBySubject()`,`findUserBydate()`

现在我不知道我应该在哪里声明这些

```
Entity\User.php
UserController.php
UserRepository.php
Model\User.php 
```

编辑：现在我可以使用什么目的`UserManager.php`。仍然困惑哪个功能会出现

请指导哪个是最佳实践

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:28:22.157

如果这些方法仅用于在数据库中查询一组`User`实体，请使用一个`UserRepository`类（*如果*它们不依赖任何其他类，`selectUserBySubject()`则它们是`findUserByDate()`存储库方法的良好候选者）。如果方法更复杂，和/或处理业务逻辑，请使用[服务类](http://symfony.com/doc/current/book/service_container.html#what-is-a-service)。

 *请参阅我关于业务逻辑最佳位置的[回答。](https://stackoverflow.com/a/11479286/155175)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:25:57.607

在`UserRepository.php`中，您可以将`Repository`类视为数据管理类。*

# javascript - 通过元素的Javascript，替换表格的单个部分

> ID：11497758
> 
> 赞同：-1
> 
> 时间：2012-07-16T03:23:28.683
> 
> 标签：javascript, html, html-table, greasemonkey, userscripts

长话短说，我正在制作一个greasemonkey 脚本。我工作的页面有这个特定的表，根据页面的不同，它具有不同的值。

```
<table class="billing dead">
    <tbody>
        <tr>
            <th>Index:</th>
            <td>Long alpha numeric value here</td>
        </tr>
        <tr>
            <th>Status:</th>
            <td class="status">This text is red to denote urgency.</td>
        </tr>
    </tbody>
</table><!-- end billing dead --> 
```

我需要做的是根据情况将文本“索引：”更改为其他内容，无论是按钮还是链接。我只是很难通过 Javascript 实际找到该项目。

环顾四周，我发现了这个：[如何在 JavaScript 中按类获取元素？](https://stackoverflow.com/questions/3808808/how-to-get-element-by-class-in-javascript)它为我提供了以下代码：

```
function replaceContentInContainer(matchClass,content)
{
    var elems = document.getElementsByTagName('*'), i;
    for (i in elems)
    {
        if((" " + elems[i].className + " ").indexOf(" " + matchClass + " ") > -1)
        {
            elems[i].innerHTML = content;
        }
    }
} 
```

这取代了整张桌子，但它是最接近我的情况的问题/答案；只是不太对劲。一旦我找到了上面链接的那个方法的表格，有没有办法访问那个特定表格的元素？我试过随意改变

```
elems[i].innerHTML = content; 
```

进入

```
elems[i][0].innerHTML = content; 
```

这很快告诉我这`elems[i]`不是节点的节点。有没有一种简单的方法来做我正在寻找的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:45:58.363

```
document.querySelector('.billing.dead > tbody > tr > th')
        .firstChild
        .data = "new value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:34:17.727

是否有多个“计费”表？每个只有一个“索引”吗？它总是第一行吗？

以下**完整的脚本**显示了如何更改任何/所有“索引”行的 HTML，包括激活生成的按钮。它使用[jQuery](http://jquery.com/)，这将为您节省大量时间和精力。

[**请参阅 jsFiddle 中的基本代码。**](http://jsfiddle.net/qa2Gy/)

```
// ==UserScript==
// @name     _Buttonize the Index cells
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// ==/UserScript==

//--- Find all the "Index" headers.
var indexHdrs   = $("table.billing.dead th:contains(Index)");

//--- Wrap them all in a button, for example.
indexHdrs.each ( function () {
    $(this).wrapInner ('<button class="myButton" />');
} );

/*--- Activate the buttons.  In this case they just display matching
    cell contents.
*/
$("table.billing.dead th button.myButton").click ( function () {
    var jThis           = $(this);  //-- The button that was clicked.
    var matchingCell    = jThis.parent ().next ();
    alert (matchingCell.text () );
} ); 
```

注意：要在 Chrome 上使用此脚本，请安装[Tampermonkey 扩展](https://chrome.google.com/extensions/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo)——无论如何，您都希望这样做，以获取额外功能，并克服 Chrome 对用户脚本安装的未决限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T03:36:03.883

它运作良好。这是[演示](http://jsfiddle.net/534f7/)。

`replaceContentInContainer('status', 'hello');`

# ios - Liferay Webservice JSON 响应类型

> ID：11497762
> 
> 赞同：0
> 
> 时间：2012-07-16T03:24:53.917
> 
> 标签：ios, web-services, liferay

我在 liferay 中有一个网络服务.. 响应将是

```
{"response":{"status":{"code":"200","message":"ok"},"userProfile":  {"screenName":"testUser","userName":"testUser"}}} 
```

从 ios 客户端使用它时出现以下错误：

```
Encountered unexpected response with status code: 200 (MIME Type: text/javascript)
The MIME type must be application/json for json resonse; please change 
```

在 Liferay 中的何处配置以使 MIME 类型为“application:json”

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:02:20.347

我认为它需要在您的**ios 客户端**而不是 Liferay 中进行配置。

由于 Liferay 正在根据需要发送响应，并且您收到的错误出现在客户端。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:55:53.063

*   创建一个小服务程序..
*   从 doGet 方法设置 response.setContentType("application/json");
*   然后在 web.xml 中添加这个 servlet

响应 mime 类型为“application/json”

# null - loadAchievementDescriptionsWithCompletionHandler, NSMutableDictionary 始终为空

> ID：11497769
> 
> 赞同：1
> 
> 时间：2012-07-16T03:25:59.347
> 
> 标签：null, game-center, nsmutabledictionary, gamekit, achievements

我已经尝试了几个小时，但我无法让它工作，在我的 GameCenterManager 课程中，我得到了这个：

```
- (void) retrieveAchievmentMetadata {
self.achievementsDescDictionary = [[NSMutableDictionary alloc] init];

[GKAchievementDescription loadAchievementDescriptionsWithCompletionHandler:
 ^(NSArray *descriptions, NSError *error) {
     if (error != nil) {
         NSLog(@"Error %@", error);

     } else {
         if (descriptions != nil){
             for (GKAchievementDescription* a in descriptions) {
                 [achievementsDescDictionary setObject: a forKey: a.identifier];
                 NSLog(@"identifier %@", a.identifier);
             }
             NSLog(@"count %i", [achievementsDescDictionary count]);
         }
     }
 }]; 
```

}

一切正常，输出很好，计数很好，但是当我尝试调用它以从另一个类获取 GKAchievementDescription 时，它总是返回（null）并且计数为 0。

```
NSLog(@"count %i", [gameCenterManager.achievementsDescDictionary count]);
if (gameCenterManager.achievementsDescDictionary == NULL) {
    NSLog(@"ERROR");
} 
```

我为此发疯了，任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:24:56.980

May be a problem with the self from self.achievementsDescDictionary

Use in the .h

```
@property (retain) NSMutableDictionary* achievementsDescDictionary; 
```

And on the .m

```
@synthesize achievementsDescDictionary;
...
achievementsDescDictionary = [[NSMutableDictionary alloc] init]; 
```

# video - DAR（显示纵横比）和PAR（像素纵横比）不考虑？

> ID：11497774
> 
> 赞同：2
> 
> 时间：2012-07-16T03:26:18.120
> 
> 标签：video, flowplayer

我正在使用 flowplayer 来显示具有各种显示纵横比和像素纵横比的视频。显示播放器的 HTML 元素的大小为 640x320，即纵横比为 16:9。

我的第一个问题是：flowplayer 是否尊重源视频容器（例如 MP4 容器）中的 DAR（显示纵横比）和/或 PAR（像素纵横比）元数据？快速测试表明情况*并非*如此，仅使用视频帧的宽度和高度，忽略 DAR 和 PAR。这是真的？我已经搜索了各种论坛/网络，但无法找到明确的答案。

例如：我有一个帧大小为 480x360（4:3 AR）的视频，PAR 值为 104:59 (1.76)，DAR 为 416:177 (2.35)。因此，我希望该视频在 flowplayer 中显示为 Cinemascope（纵横比为 2.35），并在顶部和底部添加黑条（信箱）。但是，flowplayer 将其显示为 4:3 视频，仅考虑输入视频的帧大小。我也尝试将剪辑选项“比例”更改为不同的值，但这也无济于事。

有人可以确认或否认这一点吗？如果这是真的，你们通常会在这种情况下做什么，即拥有比平常更宽的纵横比？您是否会简单地重新编码视频并相应地更改帧大小以保持纵横比？

问候，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:35:39.727

看来您在 flowplayer 论坛上得到了答案。为了将来的访问者，[相关线程](http://flash.flowplayer.org/forum/7/101880/)：

> **DAR（显示纵横比）和PAR（像素纵横比）不考虑？**
> 
> ...
> 
> Flash 不考虑 PAR（也称为 SAR，样本纵横比），因此也不考虑 DAR。只有宽度和高度。

听起来你被困在转码为 1:1 的纵横比。

# iphone - 在 iPhone 上加密，但绝对不会在 php 中解密

> ID：11497776
> 
> 赞同：1
> 
> 时间：2012-07-16T03:26:49.650
> 
> 标签：iphone, encryption

好的

我正在使用它来加密我在 iPhone 上的数据：

```
- (NSData *)AES128EncryptWithKey:(NSString *)key{

char keyPtr[kCCKeySizeAES128 + 1]; // room for terminator (unused)
bzero( keyPtr, sizeof( keyPtr ) ); // fill with zeroes (for padding)

// fetch key data
[key getCString:keyPtr maxLength:sizeof( keyPtr ) encoding:NSUTF8StringEncoding];

NSUInteger dataLength = [self length];

//See the doc: For block ciphers, the output size will always be less than or 
//equal to the input size plus the size of one block.
//That's why we need to add the size of one block here
size_t bufferSize = dataLength + kCCBlockSizeAES128;
void *buffer = malloc( bufferSize );

size_t numBytesEncrypted = 0;
CCCryptorStatus cryptStatus = CCCrypt( kCCEncrypt, kCCAlgorithmAES128, kCCOptionECBMode /*| kCCOptionPKCS7Padding*/,
                                      keyPtr, kCCKeySizeAES128,
                                      NULL /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesEncrypted );
if( cryptStatus == kCCSuccess )
{
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
}

free( buffer ); //free the buffer
return nil;} 
```

在我的服务器上，我的 php 脚本使用：

```
 $base64encoded_ciphertext = $pass;

    mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, base64_decode($pass), 'ecb');

    $decrypted = $res_non;
    $dec_s2 = strlen($decrypted);

    $padding = ord($decrypted[$dec_s2-1]);
    $decrypted = substr($decrypted, 0, -$padding);
    return  $decrypted; 
```

但是，无论密钥是什么，它都失败了。

密钥的长度始终为 10 个字符。我使用系统时钟构建密码以获取值。

在 php 方面，我复制了密钥构建，根据我的脚本，密钥始终与 iPhone 用于加密的密钥相匹配。

此代码在不同的脚本中工作，来自不同的应用程序......并且仍然有效。我已经对所有相关代码进行了彻底的剪切和粘贴，但仍然一无所获。

我只是不知道我做错了什么......超出我想要做的事情可能是绝对不可能的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:04:37.467

对于 AES 128，您应该使用 16 字节加密密钥，AES 192 它是 24，AES 256 它是 32 字节。对于您的情况，您应该使用像@“1234567890123456”这样的加密密钥。

# html - Twitter Bootstrap nav 折叠下拉菜单是否重叠内容？

> ID：11497780
> 
> 赞同：0
> 
> 时间：2012-07-16T03:27:50.457
> 
> 标签：html, css, twitter-bootstrap, navigation, responsive-design

我正在为我正在构建的网站使用基于 Twitter Bootstrap 的模板（这是链接：[rwphoto](http://goo.gl/0YqZp)），但我在使用移动下拉菜单时遇到了一些问题。如果我将 navbar-inner div 更改为 194px 以适应我正在使用的重复图像的高度，它会重叠而不是向下推内容。我只是不确定为什么这是一个问题。我环顾四周，但似乎无法找到解决此问题的方法。

此外，我如何将 .brand 元素（徽标）在移动设备中居中，而不是将其放在左侧？以及如何使导航链接垂直居中，并在徽标和屏幕右边缘之间水平居中？

*叹息*......对不起，第一次使用Bootstrap，显然......：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:36:54.450

对于居中徽标，将此 css 代码实现到引用的类...

```
.container { position:relative; }    
.brand { text-align: center;    width: 97%;}

.navbar .btn-navbar {
    display: block;
    position: absolute;
    right: 0;
} 
```

对于居中，导航链接，

```
.nav-collapse .nav > li > a {
    margin: 12px 0 !important;
    text-align: center;
} 
```

对于下拉覆盖问题，添加这个，

```
.nav-collapse { padding-top: 1em; } 
```

# javascript - 以下 jquery 和 requireJS 函数之间的区别

> ID：11497788
> 
> 赞同：-2
> 
> 时间：2012-07-16T03:28:44.993
> 
> 标签：javascript, requirejs

我想知道以下 javascript 函数之间的区别。有人可以帮助有什么区别吗？在什么情况下我们需要使用这两个功能？

```
define(function () {

}); 
```

第二个是下面的自执行功能

```
(function() { })(); 
```

**更新**

我正在使用requireJS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:51:48.347

您的问题标题提到了“jQuery 函数”，但您显示的代码中没有 jQuery。

第一段代码：

```
define(function () {

}); 
```

...调用一个名为的函数`define`并将一个匿名函数作为参数传递（某种回调？）

第二：

```
(function() { })(); 
```

定义一个匿名函数并立即调用它。

> *“有什么区别，我们需要在什么情况下使用这两个功能？”*

有关何时使用该`define()`函数的指导，请参阅 RequireJS API 文档。至于第二个示例中的立即调用匿名函数，有许多不同的原因可能导致您使用这种结构，例如，一个常见的原因是创建工作变量和/或嵌套函数而不创建全局变量。

以我的思维方式比较两者（无论如何都没有更多的上下文）与比较（或比较任何其他将函数作为参数的随机函数）相比没有任何`setTimeout(function(){ },1)`意义`(function() { })();`。

# objective-c - 模态视图控制器大小问题

> ID：11497789
> 
> 赞同：0
> 
> 时间：2012-07-16T03:28:53.047
> 
> 标签：objective-c, ios, modalviewcontroller, uimodalpresentationstyle

我有一个视图控制器，我使用以下代码以模态方式呈现：

```
about.modalPresentationStyle = UIModalPresentationFormSheet;             
[self presentModalViewController:about animated:NO];

about.view.superview.frame = CGRectMake( about.view.superview.frame.origin.x+110,
                                         about.view.superview.frame.origin.y-0,
                                         320.0f,
                                         460.0f
                                        ); 
```

现在，如果我以模态方式使用相同的代码和相似的大小呈现另一个视图控制器，一切正常。

但是，如果我以模态方式呈现一个具有全屏大小的视图控制器，那么如果我回击（关闭最后一个视图控制器），原始视图控制器的大小将会增加。增加的大小是 UIModalPresentationFormSheet 的常规大小。

换句话说：如前所述以模态方式呈现 ViewController A，然后以模态方式从 ViewController A 呈现另一个 ViewController B。现在如果 B 是全屏的，我们关闭它以返回 ViewController A，A 现在将被调整为默认帧大小。我不知道如何解决这个问题。任何人都可以提出解决方案吗？

# html - 边栏旁边嵌套 100% 宽度标题的网格系统？

> ID：11497792
> 
> 赞同：0
> 
> 时间：2012-07-16T03:29:28.637
> 
> 标签：html, css, layout, grid

我尝试使用 978.gs 和 Blueprint 创建以下布局：

![所需的 CSS 布局屏幕截图](../Images/10d38255a01406b3eb4790d3464f19ba.png)

我知道如何获得位于侧边栏上方的 100% 页面宽度标题，但我正在努力使用网格系统获得带有侧边栏和嵌套 100% 宽度标题的所需布局？如果网格系统无法实现，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:17:08.600

Michael P，请尝试更具体地回答您的问题（尽管我们大多数人都非常欣赏您简洁的措辞！）。我将尝试回答，希望我能理解你。如果我做到了，那就别担心——这很容易！

*   您的侧边栏有一个固定的 CSS`width`属性并与左侧对齐。
*   您的主要部分（右侧）应该占据剩余的页面宽度，（可能通过`margin-left`设置为与侧边栏相同的值`px`）。
*   您的主要部分包含标题栏，与侧边栏分开，对吗？您的主要部分还包含您的网格系统。

无论如何，主要部分应该是一个 HTML`<div></div>`元素，对吧？

如果您在主要部分内放置另一个 div，则可以将其设置为 100% 宽度。这只填充与其父容器一样宽。看这张照片：![在此处输入图像描述](../Images/bae24bf545b3ddd741028694c51babbb.png)

无论如何，这里是我制作的代码：http: [//jsfiddle.net/Vm7YU/](http://jsfiddle.net/Vm7YU/) 看看。我希望这回答了你的问题。如果没有，请说出来。

# php - jQuery 在 Internet Explorer 中有效，但在 Chrome 和 Firefox 中无效

> ID：11497793
> 
> 赞同：0
> 
> 时间：2012-07-16T03:29:53.660
> 
> 标签：php, firefox, google-chrome

我写了以下非常简单的 jQuery 帖子。它适用于 Internet Explorer，但不适用于 Chrome 或 Firefox：

```
<script>
function showphone(){
    $.post('phonedata.php',{    
        k: document.getElementById('k').value,
        s: document.getElementById('s').value
    },
    function(output){
        $('#showphone').html(output);
    }); 
}
showphone();
</script> 
```

我可以为 Chrome 和 Firefox 做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T19:58:53.033

尝试

```
$(document).ready(function(e) {
showphone();
}); 
```

# android - android 4.0 及更高版本中的 twitter4j 和 singpost lib

> ID：11497796
> 
> 赞同：1
> 
> 时间：2012-07-16T03:31:01.147
> 
> 标签：android, twitter, twitter-oauth

有人可以给我一个关于在 android 4.0 中使用 twitter4j 的教程吗？

我以前可以使用 twitter4j，但现在我不能，它一直抛出这个错误：

“oauth.signpost.exception.OAuthCommunicationException：与服务提供商的通信失败：null”

我在网上发现问题是你不能再访问IU线程上的网络了……我试过了，但我不能解决这个问题。

所以我想知道如何再次在android中实现twitter。有教程吗？？

谢谢！

# javascript - 隐藏在 Javascript 中的信息会牺牲性能吗？

> ID：11497798
> 
> 赞同：0
> 
> 时间：2012-07-16T03:31:11.690
> 
> 标签：javascript, node.js

我的主要问题如下：

> 当您希望人们与之交互的频繁访问功能（返回对象）时，[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)会损害性能（CPU/内存）吗？

或者这是否被认为是微优化，尤其是在使用诸如**node.js(long running process)**之类的平台时。我是否应该考虑性能而不是信息隐藏？

* * *

通过阅读 [Douglas Crockford 关于信息隐藏的文章，](http://www.crockford.com/javascript/private.html)我知道我可以添加私有成员和特权方法。但是根据 Douglas Crockford 的这句话，原型机制可以帮助您节省内存：

> 当一个成员被寻找并且在对象本身中没有找到时，它会从对象的构造函数的原型成员中获取。原型机制用于继承。它还可以节省内存。

当只保存内存时，我想这可能没什么大不了的，因为内存正在变得越来越便宜。但是根据[John Resig 的这篇文章，](http://ejohn.org/blog/simple-class-instantiation/)在原型链中添加许多属性也更快（CPU）。

> 因此，如果您有一个希望人们与之交互的频繁访问的函数（返回一个对象），那么将对象属性放在原型链中并实例化它对您有利。
> 
> 用一堆原型属性实例化一个函数非常非常快。它完全颠覆了模块模式，以及类似的模式。因此，如果您有一个希望人们与之交互的频繁访问的函数（返回一个对象），那么将对象属性放在原型链中并实例化它对您有利。
> 
> ```
> // Very fast
> function User(){}
> User.prototype = { /* Lots of properties ... */ };
> // Very slow
> function User(){
>   return { /* Lots of properties */ };
> } 
> ```

这也可能不是一个大问题，因为 CPU 的速度越来越快（摩尔定律）。此外，由于 Javascript 引擎在性能方面取得了令人难以置信的进步，我想知道我是否应该考虑这一点，或者只是使用信息隐藏。

* * *

我猜我也有这个子问题：

> 我如何使用诸如 node.js 之类的平台有效地测量内存和 CPU？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:47:17.977

在我看来，这听起来确实像是您试图过度优化很少需要优化的东西。首先将您的成本写入可靠，其次是您或其他人可维护，然后在您获得需要优化的证据后仅优化真正需要优化的内容。

首先，让事情真正变得私密会增加复杂性。除非您真的非常需要隐私，否则您可能应该使用成员变量。

其次，实现隐私的闭包确实需要某种内存消耗成本。每次使用的内存量很小，所以如果你真的需要隐私（第一点），那么除非你有很多这样的闭包，否则你可能甚至不会注意到额外的消耗。

第三，如果您有很多这样的对象（例如数千个）并且您怀疑内存消耗实际上可能是一个重要问题，那么您可能应该在几个流行的浏览器中进行快速内存测试（一个带有私有闭包的版本和一个更简单的公共成员变量）来看看有多大的区别。差异是特定于实现的，因此从一个浏览器到下一个浏览器可能会有很大差异。

根据这些测量的结果，您可以决定走哪条路。

如果您没有数千个这样的对象，那么请尽可能以最简单的方式编写代码，以实现您的目标，并花时间处理在您运行应用程序后向您展示它们真正重要的事情。

# java - 关于ActiveMQ中结合授权创建topic

> ID：11497800
> 
> 赞同：1
> 
> 时间：2012-07-16T03:32:00.220
> 
> 标签：java, authorization, activemq

我想将主题的创建和主题的写作分开。也就是说，一个应用程序负责创建主题，我给它主题的“管理员”，另一个应用程序发布者**只**负责写入该主题，因此我只赋予发布者“写入”的权限。

但它似乎不起作用，因为`Topic topic = session.createTopic(topic_name)`要求发布者具有“管理员”授权。

那么有没有办法解决这个问题呢？

# objective-c - Obj-C - 在 ivars 和实例方法上调用和设置值

> ID：11497801
> 
> 赞同：2
> 
> 时间：2012-07-16T03:32:00.127
> 
> 标签：objective-c, class, methods, instance

我不明白我在这里可能做错了什么，因为我正在遵循一本说明书 - 关于设置调用类方法的值。我已经#imported它，一切都应该没问题。但是 Xcode 抱怨：“setWeightInKilos”和“setHeightInMeters”的类方法选择器不知道。这些实例方法是在“Person”类中实现的，所以我不知道为什么会这样。

```
 Person *aPerson = [[Person alloc] init]; 
    [Person setWeightInKilos:96];
    [Person setHeightInMeters:1.8];
    float bmi = [Person bodyMassIndex]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:33:26.070

这些是*实例*方法，而不是*类*方法。因此，您应该使用变量的名称`aPerson`在实例上调用它们，而不是类的名称`Person`：

```
Person *aPerson = [[Person alloc] init];
[aPerson setWeightInKilos:96];
[aPerson setHeightInMeters:1.8];
float bmi = [aPerson bodyMassIndex]; 
```

通常，所有`-`前面用 a 声明的方法都接受一个带有该类实例的变量；用 a 声明的方法采用`+`类名。

如果`heightInMeters`和`weightInKilos`被声明为属性，您还可以使用另一种语法：您可以编写

```
aPerson.weightInKilos = 96;
aPerson.heightInMeters = 1.8; 
```

不过，这只是同一事物的不同语法；在这两种情况下都会调用 setter 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T03:33:59.297

看起来您想设置名为`weight`and的实例变量`height`。因此，要修复它，请执行以下操作：

```
Person *aPerson = [[Person alloc] init]; 
[aPerson setWeightInKilos:96];
[aPerson setHeightInMeters:1.8]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T03:41:39.987

在 Objective C 中，有两种类型的方法。类方法，它们不作用于对象，而是通常执行与该对象类型相关的一些任务。例如，有内置的方法来测试网络连接、设备功能等。这些总是用“+”号表示，不能在对象实例上调用，只能在类本身上调用。

另一种类型，实例方法，更为常见，并且作用于您*实例化*或自己创建的对象。这些是您在实现文件中编写的带有“-”前缀的方法。它们是您自己编写的 getter、setter 或方法之类的东西。

在您的情况下，您需要在 Person 对象的实例上调用这些 setter 方法，而不是在 Person 类本身上。设置整个类的高度或重量是没有意义的（也不可能），因为每个对象都需要有自己独特的高度和重量。

您需要致电：

```
Person *aPerson = [[Person alloc] init]; 
[aPerson setWeightInKilos:96];
[aPerson setHeightInMeters:1.8];
float bmi = [aPerson bodyMassIndex]; 
```

# java - 如何从 jboss 数据库配置中获取密码

> ID：11497802
> 
> 赞同：1
> 
> 时间：2012-07-16T03:32:09.407
> 
> 标签：java, database, configuration, jboss

我的问题是我在 jboss 部署文件夹中配置了一个 oracle-ds.xml。我可以得到dataSource和connection的实例。现在，我想通过 jboss api 从数据库配置中获取密码。此刻我能做什么？

数据库配置：

```
<datasources>
  <xa-datasource>
    <jndi-name>XPCDataSource</jndi-name>
    <track-connection-by-tx/>
    <isSameRM-override-value>false</isSameRM-override-value>
    <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
    <xa-datasource-property name="URL">jdbc:oracle:thin:@172.17.16.49:1521:ora49</xa-datasource-property>
    <xa-datasource-property name="User">workbench_0628</xa-datasource-property>
    <xa-datasource-property name="Password">workbench_0628</xa-datasource-property>
    <min-pool-size>10</min-pool-size>
    <max-pool-size>50</max-pool-size>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter</exception-sorter-class-name>
    <!-- Oracles XA datasource cannot reuse a connection outside a transaction once enlisted in a global transaction and vice-versa -->
    <no-tx-separate-pools/>
    <metadata>
      <type-mapping>Oracle9i</type-mapping>
    </metadata>
  </xa-datasource>
  <mbean code="org.jboss.resource.adapter.jdbc.vendor.OracleXAExceptionFormatter" name="jboss.jca:service=OracleXAExceptionFormatter">
    <depends optional-attribute-name="TransactionManagerService">jboss:service=TransactionManager</depends>
  </mbean>
</datasources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:47:47.617

你有没有尝试过这样的事情？

```
 Connection conn = myJBossDatasource.getConnection();
   WrappedConnection wrappedConn = (WrappedConnection)conn;
   Connection underlyingConn = wrappedConn.getUnderlyingConnection();
   OracleConnection oracleConn = (OracleConnection)underlyingConn; 
```

我主要使用 BEA/Oracle（Weblogic），但很久以前就这样做了……如果您查看 OracleConnection 对象，它有一些常量：

```
 CONNECTION_PROPERTY_PASSWORD
   CONNECTION_PROPERTY_USER_NAME 
```

*   参见：[http](http://docs.oracle.com/cd/E18283_01/appdev.112/e13995/oracle/jdbc/OracleConnection.html) ://docs.oracle.com/cd/E18283_01/appdev.112/e13995/oracle/jdbc/OracleConnection.html （JavaDoc）

# algorithm - 用于空模型的交换算法的 scala 版本

> ID：11497803
> 
> 赞同：3
> 
> 时间：2012-07-16T03:32:35.310
> 
> 标签：algorithm, scala, matrix, scala-2.9

我遇到的问题是试图找到一种有效的方法来查找矩阵中的可交换元素，以便为创建空模型实现交换算法。

该矩阵由 0 和 1 组成，其想法是元素可以在列之间切换，以便矩阵的行和列总数保持不变。

例如，给定以下矩阵：

```
 c1 c2 c3 c4
r1  0  1  0  0 = 1
r2  1  0  0  1 = 2
r3  0  0  0  0 = 0
r4  1  1  1  1 = 4
   ------------
    2  2  1  2 
```

r1 和 r2 中的 c2 和 c4 列都可以以不改变总数的方式交换，即：

```
 c1 c2 c3 c4
r1  0  0  0  1 = 1
r2  1  1  0  0 = 2
r3  0  0  0  0 = 0
r4  1  1  1  1 = 4
   ------------
    2  2  1  2 
```

这一切都需要随机进行，以免引入任何偏见。

我有一个可行的解决方案。我随机选择一行和两列。如果它们产生 10 或 01 模式，那么我随机选择另一行并检查相同的列以查看它们是否产生相反的模式。如果其中任何一个失败，我会重新开始并选择一个新元素。

这种方法有效，但我只有大约 10% 的时间“命中”了正确的模式。在一个大矩阵或行中只有几个 1 的矩阵中，我浪费了很多时间“失踪”。我认为必须有一种更智能的方式来选择矩阵中的元素，但仍然随机进行。

工作方法的代码是：

```
def isSwappable(matrix: Matrix): Tuple2[Tuple2[Int, Int], Tuple2[Int, Int]] = {
  val indices = getRowAndColIndices(matrix)

  (matrix(indices._1._1)(indices._2._1), matrix(indices._1._1)(indices._2._2)) match {
    case (1, 0) => {
      if (matrix(indices._1._2)(indices._2._1) == 0 & matrix(indices._1._2)(indices._2._2) == 1) {
        indices
      }
      else {
        isSwappable(matrix)
      }
    }
    case (0, 1) => {
      if (matrix(indices._1._2)(indices._2._1) == 1 & matrix(indices._1._2)(indices._2._2) == 0) {
        indices
      }
      else {
        isSwappable(matrix)
      }
    }
    case _ => {
      isSwappable(matrix)
    }
  }
}

def getRowAndColIndices(matrix: Matrix): Tuple2[Tuple2[Int, Int], Tuple2[Int, Int]] = {
  (getNextIndex(rnd.nextInt(matrix.size), matrix.size), getNextIndex(rnd.nextInt(matrix(0).size), matrix(0).size))
}

def getNextIndex(i: Int, constraint: Int): Tuple2[Int, Int] = {
  val newIndex = rnd.nextInt(constraint)
  newIndex match {
    case `i` => getNextIndex(i, constraint)
    case _ => (i, newIndex)
  }
} 
```

我想一种更有效的处理方法是删除任何无法使用的行（全 1 或 0），然后随机选择一个元素。从那里我可以过滤掉行中具有相同值的任何列，并从剩余的列中进行选择。

一旦选择了第一行和第一列，我就会过滤掉不能提供所需模式的行，然后从剩余的行中进行选择。

这在大多数情况下都有效，但我不知道如何处理的问题是当没有列或行可供选择时会发生什么？我不想无限循环试图找到我需要的模式，如果我确实得到一个空的行或列列表可供选择，我需要一种重新开始的方法。

到目前为止，我拥有的那种工作的代码（直到我得到一个空列表）是：

```
def getInformativeRowIndices(matrix: Matrix) = (
  matrix
    .zipWithIndex
    .filter(_._1.distinct.size > 1)
    .map(_._2)
    .toList
  )

def getRowsWithOppositeValueInColumn(col: Int, value: Int, matrix: Matrix) = (
  matrix
    .zipWithIndex
    .filter(_._1(col) != value)
    .map(_._2)
    .toList
  )

def getColsWithOppositeValueInSameRow(row: Int, value: Int, matrix: Matrix) = (
  matrix(row)
    .zipWithIndex
    .filter(_._1 != value)
    .map(_._2)
    .toList
  )

def process(matrix: Matrix): Tuple2[Tuple2[Int, Int], Tuple2[Int, Int]] = {
  val row1Indices = getInformativeRowIndices(matrix)
  if (row1Indices.isEmpty) sys.error("No informative rows")

  val row1 = row1Indices(rnd.nextInt(row1Indices.size))
  val col1 = rnd.nextInt(matrix(0).size)
  val colIndices = getColsWithOppositeValueInSameRow(row1, matrix(row1)(col1), matrix)
  if (colIndices.isEmpty) process(matrix)
  val col2 = colIndices(rnd.nextInt(colIndices.size))
  val row2Indices = getRowsWithOppositeValueInColumn(col1, matrix(row1)(col1), matrix)
    .intersect(getRowsWithOppositeValueInColumn(col2, matrix(row1)(col2), matrix))
  println(row2Indices)
  if (row2Indices.isEmpty) process(matrix)

  val row2 = row2Indices(rnd.nextInt(row2Indices.size))
  ((row1, row2), (col1, col2))
} 
```

我认为递归方法是错误的，在这里并没有真正起作用。另外，我真的只是想提高细胞选择的速度，所以任何想法或建议都将不胜感激。

## 编辑：

我有机会多玩一点，并提出了另一种解决方案，但它似乎并没有比随机选择矩阵中的单元快得多。另外，我应该补充一点，矩阵需要连续交换大约 30000 次才能被认为是随机的，并且我需要为每个测试生成 5000 个随机矩阵，我至少还有另外 5000 个可以这样做，所以性能很好的重要。

当前的解决方案（除了随机单元格选择之外是：

1.  从矩阵中随机选择 2 行
2.  从另一行中减去一行并将其放入数组中
3.  如果新数组同时包含 1 和 -1 那么我们可以交换

减法的逻辑如下所示：

```
 0  1  0  0
- 1  0  0  1
---------------
 -1  1  0 -1 
```

执行此操作的方法如下所示：

```
 def findSwaps(matrix: Matrix, iterations: Int): Boolean = {
   var result = false

   val mtxLength = matrix.length

   val row1 = rnd.nextInt(mtxLength)
   val row2 = getNextIndex(row1, mtxLength)

   val difference = subRows(matrix(row1), matrix(row2))

   if (difference.min == -1 & difference.max == 1) {
     val zeroOne = difference.zipWithIndex.filter(_._1 == -1).map(_._2)
     val oneZero = difference.zipWithIndex.filter(_._1 == 1).map(_._2)

     val col1 = zeroOne(rnd.nextInt(zeroOne.length))
     val col2 = oneZero(rnd.nextInt(oneZero.length))

     swap(matrix, row1, row2, col1, col2)
     result = true
   }
   result
 } 
```

矩阵行减法如下所示：

```
 def subRows(a: Array[Int], b: Array[Int]): Array[Int] = (a, b).zipped.map(_ - _) 
```

实际的交换看起来像这样：

```
 def swap(matrix: Matrix, row1: Int, row2: Int, col1: Int, col2: Int) = {

   val temp = (matrix(row1)(col1), matrix(row1)(col2))
   matrix(row1)(col1) = matrix(row2)(col1)
   matrix(row1)(col2) = matrix(row2)(col2)

   matrix(row2)(col1) = temp._1
   matrix(row2)(col2) = temp._2
   matrix
 } 
```

这比以前好得多，因为我尝试交换的成功率在 80% 到 90% 之间（随机单元选择只有大约 10%）但是......它仍然需要大约 2.5 分钟才能生成 1000 个随机矩阵。

关于如何提高速度的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:12:14.293

我将假设矩阵很大，因此（矩阵大小平方）的顺序存储是不可行的（出于速度或内存的原因）。

如果你有一个稀疏矩阵，你可以在一个集合的每一列中输入每个 1 的索引（这里我展示了做事的紧凑方式，但你可能希望使用 while 循环进行迭代以提高速度）：

```
val mtx = Array(Array(0,1,0,0),Array(1,0,0,1),Array(0,0,0,0),Array(1,1,1,1))
val cols = mtx.transpose.map(x => x.zipWithIndex.filter(_._1==1).map(_._2).toSet) 
```

现在对于每一列，当且仅当只有以下两个集合是非空的时，后面的列包含兼容对（至少一个）：

```
def xorish(a: Set[Int], b: Set[Int]) = (a--b, b--a) 
```

所以答案将涉及计算这些集合并测试它们是否都是非空的。

现在的问题是“随机抽样”是什么意思。随机抽样*单个*1,0 对*与随机抽样可能的交换不同*。要看到这一点，请考虑以下事项：

```
1 0       1 0
1 0       1 0
1 0       1 0
0 1       1 0
0 1       1 0
0 1       0 1 
```

左边的两列有九种可能的交换。右边的两个只有五种可能的交换。但是，如果您正在寻找 (1,0) 模式，您将只在左侧采样 3 次，而在右侧采样 5 次；如果您正在寻找 (1,0) 或 (0,1)，您将采样 6 和 6，这再次扭曲了概率。解决这个问题的唯一方法是要么*不*聪明，而是第二次随机采样（在第一种情况下，3/5 的时间可以使用可用的交换，而第二次只有 1/5），或者基本上计算每个可能的交换对（或至少有多少对）并从该预定义集中进行选择。

如果我们想做后者，我们注意到对于每对不同的列，我们可以计算要交换的两个集合，并且我们知道大小和乘积是可能性的总数。为了避免实例化所有的可能性，我们可以创建

```
val poss = {
  for (i<-cols.indices; j <- (i+1) until cols.length) yield 
    (i, j, (cols(i)--cols(j)).toArray, (cols(j)--cols(i)).toArray)
}.filter{ case (_,_,a,b) => a.length>0 && b.length>0 } 
```

然后计算有多少：

```
val cuml = poss.map{ case (_,_,a,b) => a.size*b.size }.scanLeft(0)(_ + _).toArray 
```

现在要随机选择一个数字，我们选择一个介于 0 和 cuml.last 之间的数字，然后选择这是哪个桶以及桶中的哪个项目：

```
def pickItem(cuml: Array[Int], poss: Seq[(Int,Int,Array[Int],Array[Int])]) = {
  val n = util.Random.nextInt(cuml.last)
  val k = {
    val i = java.util.Arrays.binarySearch(cuml,n)
    if (i<0) -i-2 else i
  }
  val j = n - cuml(k)
  val bucket = poss(k)
  (
    bucket._1, bucket._2, 
    bucket._3(j % bucket._3.size), bucket._4(j / bucket._3.size)
  )
} 
```

这最终返回`(c1,c2,r1,r2)`随机选择。

现在您有了坐标，您可以随心所欲地创建新矩阵。（最有效的可能是对条目进行就地交换，然后在您想重试时交换回来。）

*请注意，这仅适用于来自同一起始矩阵*的大量独立交换。如果您想迭代地执行此操作并保持独立性，那么您可能最好还是随机执行此操作，除非矩阵*非常*稀疏，此时只需将矩阵存储为一些标准的稀疏矩阵格式（即通过非零索引）条目）并对其进行操作（可能使用可变集和更新策略，因为单个交换的后果仅限于矩阵`n`中的大约条目）。`n*n`

# objective-c - 以提升的权限运行 OS X 10.7 和 10.8 的进程

> ID：11497806
> 
> 赞同：4
> 
> 时间：2012-07-16T03:32:56.960
> 
> 标签：objective-c, xcode, macos, cocoa, osx-lion

我正在尝试以提升的权限运行一个进程 - 特别是 OpenVPN，它需要 root 权限才能将路由添加到系统。

环顾四周寻找现有示例将我带到`AuthorizationExecuteWithPrivileges`，现在似乎已弃用。

我尝试了新`SMJobBless`方法，但我对它的可行性有一些疑问。据我了解，我可以创建一个单独的特权工具并通过套接字与其通信，以要求该工具执行特权命令。但是，我似乎无法弄清楚如何启动 OpenVPN 进程并以这种方式实时捕获其标准输出，因为主应用程序本身不会启动该进程。

`OpenVPN`另一种选择是在可执行文件上使用 setuid 。我可以使用安装的助手`SMJobBless`在可执行文件上设置文件权限和setuid，然后通过正常运行它`NSTask`吗？

编辑：

最后，有没有办法只运行一个具有特权的命令而无需永久安装任何东西？虽然这种新方法更安全，但看起来非常笨拙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:26:43.043

我设法`SMJobBless`通过使用帮助程序并与 XPC 进行通信来实现该方法（[Nathan de Vries 的博客](http://atnan.com/blog/2012/02/29/modern-privileged-helper-tools-using-smjobbless-plus-xpc/)上显示的方法）。使用这个助手，我将外部进程的权限设置为 04555（setuid，rx）。然后移除 SMJob，因为它不再需要。本质上是在模仿“一次性”的特权工作。

之后，我可以使用 NSTask 启动进程并在我的主应用程序中捕获其输出。

此外，我在开始时检查是否在可执行文件上设置了正确的权限，如果没有，则重新祝福 SMJob 助手并设置权限。

如果有人有更清洁的解决方案，请随时分享。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T14:25:24.163

我和你有同样的问题，需要它用于 MacOs X 的 OpenVPN 管理器应用程序。你的解决方案远非最佳，因为你为每个设置 setuid root 的人打开了 openvpn 二进制文件。这是一个安全漏洞，应该避免，因为当您使用 smjobbless 助手时，这是完全没有必要的。这个助手以 root 身份运行，可以为你做任何你想做的事情，并且具有管理权限，所以你可以通过这个助手启动 openvpn，而无需在 openvpn 二进制文件上设置 setuid root。

Apple 将此过程设计为只有您的应用程序，即主应用程序，才能与此助手通信，因为您的主应用程序和您的助手使用您的开发人员证书进行签名。任何恶意 App 都无法使用此助手。

当您查看 Nathans 代码时，您会看到他设法将消息发送给该助手并从该助手那里获得答案。在他的示例中，有类似“Hey there Helper App”之类的东西，答案是“Hey there Host App”。

因此，要从中获得有用的信息，您只需向帮助应用程序发送命令，在帮助程序端提取这些命令并在帮助应用程序以提升的权限运行时以提升的权限启动它们。

看看 Nathans 代码，有类似的 sty（在 smjobblessappcontroller.m 中）：

```
xpc_object_t message = xpc_dictionary_create(NULL, NULL, 0);
    const char* request = "openvpn --config OpenvpnConnection.ovpn";
    xpc_dictionary_set_string(message, "request", request);

    [self appendLog:[NSString stringWithFormat:@"Sending request: %s", request]];

    xpc_connection_send_message_with_reply(connection, message, dispatch_get_main_queue(), ^(xpc_object_t event) {
        const char* response = xpc_dictionary_get_string(event, "reply");
        [self appendLog:[NSString stringWithFormat:@"Received response: %s.", response]];
    }); 
```

有了这个，您将 openvpn 命令发送到您的助手应用程序。您只需在助手端提取此命令即可以提升的权限启动该进程。

查看 smjobblesshelper.c 并做某事（在 __XPC_Peer_Event_Handler else 分支中）：

```
const char *response = xpc_dictionary_get_string(event, "request"); 
```

在字符串响应中，你有你的 openvpn 命令，现在简单地启动它：

```
system(response); 
```

就是这样，这与提升的特权有关。现在，您可以在您的应用程序中使用它，或者在您的主​​应用程序的 IBAction 按钮中使用它，以便在每次用户单击此按钮时根据需要启动 openvpn 连接。

# android - lm.removeUpdate(ll); 不发布更新

> ID：11497810
> 
> 赞同：0
> 
> 时间：2012-07-16T03:33:41.017
> 
> 标签：android, gps

我已经工作了 2 天来寻找这个错误。我搜索了 stackoverflow 和 Android 文档，但没有成功。

我的 onLocationChanged 代码中有一个计数器，用于计算它被调用的次数，如果我将箭头从手机上的活动屏幕返回并返回，每次更新计数器都会增加 2。如果我返回箭头并更新 GPS，计数器记录 onLocationChanged 仍然被调用，即使屏幕在后台并且 onPause 已被调用。如果我使用后退箭头进出活动，则每次 GPS 输入发送都可以获得两个以上的更新，具体取决于进入活动屏幕的次数。

所有的 GPS 代码都有效，但这些多个实例并不好，它们会弄乱我想做的其他事情，比如两次更新之间的距离。

这是我认为是我的代码的相关部分。显然，我遗漏了主要部分，但重点是，在返回到此屏幕后，在返回到此屏幕后，单次发送 GPS 数据点会使 n 变量增加一个以上，具体取决于我返回屏幕的次数.

我必须做一些明显的事情，但我找不到。

```
public class Data extends Activity {

protected LocationListener ll;
protected LocationManager lm;
static int n = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.data);
    LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener ll = new mylocationlistener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
}

    class mylocationlistener implements LocationListener{
        @Override
        public void onLocationChanged(Location location) {
            if (location != null){
                n = n + 1;
                                    textData.setText("\n" + n);
                            }
     } 
```

和

```
 @Override
    protected void onPause() {
        if(lm != null) {
            lm.removeUpdates(ll);
        }
        ll = null;
        lm = null;
        super.onPause();
    } 
```

我唯一的线索是，如果我将 lm.removeUpdates(ll) 从 if(lm != null) 中取出，那么代码会崩溃，这让我认为 lm 必须为 null 而 lm.removeUpdates(ll) 不能是正确的，但据我所知，它与我能找到的所有示例以及 Android 文档相匹配。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:37:01.007

```
 LocationListener ll = new mylocationlistener(); 
```

这`LocationListener`是您的方法 onCreate() 的本地方法。您的 LocationManager lm 也是如此。因此，当您删除更新时，它不能与您声明为类变量的管理器和侦听器一起使用。写成

```
lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
ll = new mylocationlistener(); in your onCreate(). 
```

# c# - C#重复扩展类

> ID：11497816
> 
> 赞同：-1
> 
> 时间：2012-07-16T03:35:09.233
> 
> 标签：c#, oop

我有以下课程：

```
 Class A {}

 Class B: A {}

 Class C: A {} 
```

现在，我有 2 个用数据填充 B 或 C 的函数。目前，需要 2 个函数，因为一个创建`New B()`，另一个创建`New C()`.

我只想要一个可以告诉使用 B 或 C 的函数。我不能只发送一个类并告诉它被填充，被调用的函数需要能够动态创建类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:44:32.287

您可以编写一个`new`对类型参数有约束的泛型函数：

```
class FillerOfBsAndCs {
    A Fill<T>() where T : new(), A {
        // do the preparations...
        T res = new T();
        // fill res with data
        return res;
    }
} 
```

您现在可以像这样调用此方法：

```
FillerOfBsAndCs filler = new FillerOfBsAndCs();
A a1 = filler.Fill<B>();
A a2 = filler.Fill<C>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:44:33.440

您可以考虑使用通用方法

```
public T FillA<T>() where T : A, new()
{
    T newobj = new T();
    newobj.AProperty1 = valueForProperty1;
    newobj.AProperty2 = valueForProperty2;
    // etc.
    return newobj;
} 
```

# android - LogCat 中的“执行 SSL_Read()”

> ID：11497821
> 
> 赞同：4
> 
> 时间：2012-07-16T03:36:01.013
> 
> 标签：android

在 LogCat 中，我一次收到大量消息，例如数百条消息：

```
07-15 21:24:48.096: D/NativeCrypto(1606): Doing SSL_Read()
07-15 21:24:48.096: D/NativeCrypto(1606): Returned from SSL_Read() with result 1, error code 0 
```

谁能告诉我它们是什么以及是否有办法不得到它们？我知道我可以过滤掉它们，但它们填满了我的日志，以至于我什么也得不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T14:20:48.633

您可以尝试在 logcat 输出上应用“独占”过滤器，如下所示：

```
tag:^(?!(NativeCrypto)) 
```

这将摆脱`NativeCrypto`and `NativeCrypto-jni`。

或者，如果您想排除几个单词，请尝试

```
tag:^(?!(NativeCrypto|System|SomethingElse)) 
```

祝你好运！

编辑：您可能还想查看这篇 SO 帖子[How to filter out a tagname in Eclipse LogCat viewer](https://stackoverflow.com/questions/7889888/how-to-filter-out-a-tagname-in-eclipse-logcat-viewer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:06:52.140

尝试实际过滤特定的日志标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T21:51:18.757

我发现的唯一解决方案是通过 grep 管道 logcat。

似乎所有 Android 4.x 设备都在 DEBUG 级别遭受大量 logcat 垃圾邮件。我不确定这是 Google 做的还是供应商做的，但我用过的所有这些都是垃圾邮件这个 NativeCrypto 垃圾。IMO，操作系统应该使用 VERBOSE 并为应用程序保留 DEBUG 级别。

# actionscript-3 - AS3 - 检查回调函数是否满足某些参数标准？

> ID：11497825
> 
> 赞同：0
> 
> 时间：2012-07-16T03:37:02.070
> 
> 标签：actionscript-3, callback

如果我设置了一个接受回调的函数：

```
function loadSomething(path:String, callback:Function):void; 
```

并且该回调应该接受给定的类型，例如表示一些加载信息的字符串：

```
function onLoaded(response:String):void;

// Load some data into onLoaded.
loadSomething("test.php", onLoaded); 
```

是否可以评估将用于回调的函数并确保它具有给定数量的参数并且参数接受正确的类型？例如

```
function broken(arg:Sprite):void;

// This should throw an error.
loadSomething("test.php", broken); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:50:59.010

我认为您不应该费心进行这种检查，因为它会产生不必要的开销。您可以在执行回调时简单地抛出异常：

```
try {
    doCallback(response);
} catch(e:*) {
    trace('Incompatible callback');
} 
```

如果您真的想进行检查，您可以使用反射来完成。只需调用`describeType(callback)`并`flash.utils`解析 XML。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T09:10:37.913

您可以做的一件简单的事情是通过`length`在方法闭包上调用属性来检查可接受参数的数量，例如：

```
function some ( val1 : int, val2 : int ) : void { return; }

trace(some.length); // traces 2 
```

其他更复杂的方法可能是使用[AS3Commons 字节码库](http://www.as3commons.org/as3-commons-bytecode/)。您可以尝试使用[动态代理](http://www.as3commons.org/as3-commons-bytecode/proxy.html)。

# spring-security - spring security openid身份验证后重定向到原始（未经身份验证的页面）

> ID：11497826
> 
> 赞同：2
> 
> 时间：2012-07-16T03:37:13.130
> 
> 标签：spring-security, openid

我已经使用此处提供的示例实现了 spring security openid 集成：[OpenId+Spring Integration](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/sample-apps.html)

集成工作正常。当我请求受保护的资源时，我会被重定向到登录页面，并且在身份验证后，我会自动重定向到受保护的资源。

但是，如果我在一个不受保护的页面上（类似于这里描述的情况：http: [//forum.springsource.org/showthread.php?95317](http://forum.springsource.org/showthread.php?95317-Redirect-to-original-page-after-login-success-failure) -Redirect-to-original-page-after-login-success-failure ）和我点击登录按钮..登录后我被重定向到主页。我想被重定向到我单击登录按钮的页面。

春季论坛主题建议覆盖 buildReturnToUrl 方法。我已经调试过了。它总是生成一个如下形式的 returnToURL：

```
http://localhost:8080/listocal/j_spring_openid_security_check 
```

op 和 Rob Winch 之间有一些幕后交流，我不确定 op 实际上是如何覆盖它的。

或者，我尝试使用如下代码创建另一个过滤器：

```
public void doFilter(....) {
...
DefaultSavedRequest savedRequest = new DefaultSavedRequest((HttpServletRequest) request, new PortResolverImpl());

((HttpServletRequest)request).getSession().setAttribute("SPRING_SECURITY_SAVED_REQUEST", savedRequest);

} 
```

如果此过滤器在 OpenIDAuthenticationFilter 之前运行，则保存的请求会被 RequestCacheAwareFilter 删除（可能是因为这个问题：[https](https://jira.springsource.org/browse/SEC-1241) ://jira.springsource.org/browse/SEC-1241 ）

如果此过滤器在 OpenIDAuthenticationFilter 之后运行，那么我确实会遇到发布参数在每个请求后连接的问题。

有人可以指出正确的前进方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:00:40.693

spring-security 团队在 spring 论坛上回答了这个问题。看到这个： http: [//forum.springsource.org/showthread.php?128480-Redirecting-to-original- (unauthenticated-page)-after-spring-security-openid-authentic](http://forum.springsource.org/showthread.php?128480-Redirecting-to-original-(unauthenticated-page)-after-spring-security-openid-authentic)

# php - CodeIgniter 图片上传和调整大小失败

> ID：11497827
> 
> 赞同：2
> 
> 时间：2012-07-16T03:37:18.527
> 
> 标签：php, image, codeigniter, file-upload, image-manipulation

我真的在为我的 CodeIgniter 脚本上传、调整大小和裁剪用户的个人资料图像而苦苦挣扎。最后，我想上传带有加密名称的图像，调整大小并保存两次（一次作为缩略图，一次作为中型图像），然后删除原始文件。但是，我想我真的错过了一些东西，因为我无法让第一个上传调整大小过程起作用。我在代码的某个地方肯定有错误（错误跟随代码），但我认为我对这里的逻辑的理解可能存在差距。谁知道？非常感谢任何反馈。

```
public function image() {
    $config['upload_path'] = './temp_images/'; // This directory has 777 access
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '2048';
    $config['max_width']  = '0'; // For unlimited width
    $config['max_height']  = '0'; // For unlimited height
    $config['encrypt_name'] = TRUE;
    $config['remove_spaces'] = TRUE;

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $data['error'] = array('error' => $this->upload->display_errors());
        $this->load->view('upload', $data);
    }
    else
    {
        $image_data_array = array('upload_data' => $this->upload->data());
        foreach ($image_data_array as $image_data){
            $raw_name = $image_data['raw_name'];
            $file_ext = $image_data['file_ext'];
        }

        $file_name = $raw_name . $file_ext;
        $image_path = 'temp_images/' . $file_name;
        $new_path = 'image/profile/'; // This directory has 777 access

        $config['image_library'] = 'gd';
        $config['source_image'] = $image_path;
        $config['new_image'] = $new_path;
        $config['maintain_ratio'] = FALSE;
        $config['width']     = 140;
        $config['height']   = 140;
        $config['quality'] = '80%'; 

        $new_name = $new_path . $raw_name . $file_ext;

        $this->load->library('image_lib', $config); 

        // The following is just to test that it worked:

        if ( ! $this->image_lib->resize()) { 
            echo $this->image_lib->display_errors();
            echo 'source: ' . $config['source_image'] . '<br />';
            echo 'new: ' . $config['new_image'] . '<br />';
        }
        else {
            echo "<img src='" . base_url() . $new_name . "' />";
        }

        $this->image_lib->clear();

    }
} 
```

上传过程正常。当我刚打电话时，即使调整大小也有效`$this->image_lib->resize()`。当我尝试捕捉错误时，它开始对我大喊大叫。我双重验证了 temp_images 和 image/profile 都具有 777 权限（如前所述，上传和调整大小实际上在某一点起作用）。这是产生的错误：

```
Unable to save the image. Please make sure the image and file directory are writable.
source: temp_images/8ee1bab383cf941f34218f7535d5c078.jpg
new: image/profile/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:42:45.637

以前从未真正使用过 CI，也看不到代码的详细信息。

*   首先，检查文件夹上设置的权限 - 您尝试上传到。也尝试使用完整的服务器路径。
*   其次，查看是否启用了 GD、ImageMagick 等 PHP 图像扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:08:44.113

我试过这个[教程](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-file-uploading-and-image-manipulation/)

它适用于图像上传并为调整图像大小创建拇指文件夹...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:03:03.693

请同时包含文件名来更新 new_image 值。

```
$config['new_image'] = 'image/profile/' . $filename; 
```

# iphone - 在手机上使网站高度为 100%，并在从纵向模式切换到横向模式时阻止其放大

> ID：11497828
> 
> 赞同：2
> 
> 时间：2012-07-16T03:37:31.930
> 
> 标签：iphone, height, meta-tags, viewport

我有一个水平站点，我希望在移动设备上查看时该站点的高度始终为 100%。我已将视口元标记设置为 -

```
<meta name="viewport" content="height=device-height, user-scalable=no"> 
```

这在纵向和横向模式下都可以正常工作，但是当我将手机从纵向模式旋转到横向模式时，站点缩放比例大于 100%。除非我重新加载页面（刷新不起作用）。

我找到了这个链接，它解释了它为什么这样做 - [http://filamentgroup.com/examples/iosScaleBug/](http://filamentgroup.com/examples/iosScaleBug/) 并按照那里的说明将元标记更改为

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=no,  maximum-scale=1.0"> 
```

这解决了从纵向模式切换到横向模式时的方向问题，但它不会将站点缩放到 100% 高度。

可以禁用缩放功能，因为我更喜欢关闭缩放功能。

有什么建议可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T14:41:17.610

I know this is an old question but when trying to achieve what you are I tend to use the following code.

```
<meta name = "viewport" content = "user-scalable=no, initial-scale=1.0, maximum-scale=1.0,    width=device-width"/>
<meta name="apple-mobile-web-app-capable" content="yes"/> 
```

Hope that helps

# llblgenpro - LLBLGen 默认变量字段值读取不为空但为空

> ID：11497829
> 
> 赞同：0
> 
> 时间：2012-07-16T03:37:36.080
> 
> 标签：llblgenpro

我有一个 LLBLGen 实体。

```
MyEntity{
    public Decimal Foo;    //Stored in database as a NOT NULL field
}
....
public void SomeMethod(){
    MyEntity entity = new MyEntity();  //on initial inspection Foo reads as "0"

    adapter.SaveEntity(entity);  //will throw exception, "Foo can't be assigned a NULL value"
                                 //but on debug inspection, Foo = 0

    entity.Foo = 14M;
    adapter.SaveEntity(entity);  //will save ok.
} 
```

如果我没有为数字赋值，调试器会将其读取为非空，但是，它会抛出一个异常，告诉我它实际上是 NULL。

我相信 LLBLgen 会自动为所有变量分配默认值，但我现在不能确定。

请任何能够对此有所了解的人。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:00:31.920

LLBLGen Pro 运行时不会自动分配默认值，但是您可以将其指定为数据库中的默认约束。

您可以通过检查实体上的“字段”集合来检查字段是否具有分配的值：

bool isValueAssigned = myEntity.Fields[(int)MyFieldIndex.Foo].CurrentValue!=null;

# ios - CTC运营商名称列表

> ID：11497835
> 
> 赞同：0
> 
> 时间：2012-07-16T03:40:20.820
> 
> 标签：ios, carrier

某处是否有出现在 CTCarrier carrierName 中的所有运营商的列表？我需要确切的字符串。

哦，我正在寻找专门的 AU（KDDI，日本）运营商。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:48:27.707

您可能会发现此[移动网络代码列表及其相应的运营商](http://en.wikipedia.org/wiki/Mobile_Network_Code)很有用。我很确定，如果有运营商名称，就必须有 mobileNetworkCode。

# c++ - glPushMatrix 阻止所有旋转发生

> ID：11497837
> 
> 赞同：2
> 
> 时间：2012-07-16T03:40:47.157
> 
> 标签：c++, opengl, 3d, rotation

我在旋转时遇到了麻烦。我可以让立方体旋转得很好，但我只希望那个立方体旋转。我知道我必须使用 glPushMatrix() 和 glPopMatrix() 但每次我将这两个包裹在我的绘图周围时，它都会停止旋转。

这是我设置 OpenGL 的方式：

```
void initOpenGL()
{
    //these are the current version of OpenGL
    string versions[14] =
    {
        "GL_VERSION_1_1",
        "GL_VERSION_1_2",
        "GL_VERSION_1_3",
        "GL_VERSION_1_4",
        "GL_VERSION_1_5",
        "GL_VERSION_2_0",
        "GL_VERSION_2_1",
        "GL_VERSION_3_0",
        "GL_VERSION_3_1",
        "GL_VERSION_3_2",
        "GL_VERSION_3_3",
        "GL_VERSION_4_0",
        "GL_VERSION_4_1",
        "GL_VERSION_4_2"
    };

    //Determine which versions are safe to use
    cerr << "OpenGL+GLEW Info: " << endl;
    for (int i = 0; i < 14; ++i)
    {
        if (glewIsSupported(versions[i].c_str()))
            cerr << versions[i] << " is supported" << endl;
        else
            cerr << "ERROR: " << versions[i] << " is not supported" << endl;
    }
    cerr << endl << "Open GL " << glGetString (GL_VERSION) << " is the current OpenGL version" << endl << endl;

    glClearColor(0, 0, 0, 0);
    //By setting this option, we can explicityly control how the program terminates to ensure proper cleanup
    glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE, GLUT_ACTION_GLUTMAINLOOP_RETURNS);

    //setup the camera
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(MIN_X, MAX_X, MIN_Y, MAX_Y, MIN_Z, MAX_Z);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    //enable access to the alpha channel
    glEnable (GL_BLEND);
    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

... some more code to load textures...
} 
```

这是我的显示功能：

```
void display()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glPushMatrix();
        glColor3f(1, 0, 0);
        glRotatef(angle, 1, 1, 0);
        glutSolidCube(30);
    glPopMatrix();

    glutSwapBuffers();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T04:26:57.480

您基本上似乎总是旋转到相同的角度，因为弹出矩阵会将其返回到调用 push 时的状态。您可能想尝试在每次显示调用（或代码中的其他位置以使其不断变化）时稍微增加角度变量。

它在没有 push 和 pop 的情况下工作的原因是所有矩阵运算都是累积的，并且由于您没有在每一轮上加载单位矩阵，因此每次调用显示函数时最终都会按可变角度值旋转。顺便说一句，这可能是你想要改变的东西，因为将你的世界状态与显示它分开可能是有意义的。

# mod-rewrite - 使用 mod_rewrite 将旧域文件夹中的所有页面重定向到新域的索引

> ID：11497839
> 
> 赞同：0
> 
> 时间：2012-07-16T03:41:34.143
> 
> 标签：mod-rewrite, redirect

我正在尝试将旧站点 (wellnowwhat.net/nin/*.*) 上的所有页面重定向到新站点 (sykonaut.net/nin_old/) 的索引。我只能访问新站点的 .htaccess （旧站点归朋友所有），所以我正在测试相反的方向。我可以使用 mod_rewrite 将根目录 (sykonaut.net) 重定向到他的根目录 (wellnowwhat.net)，但我无法将 nin_old 目录重定向到他的 nin 目录。我猜我也无法重定向相反的方向。这是我的 .htaccess 中的 [全部] 代码：

```
AddHandler php5_2-wrap .php
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.sykonaut.net$ [NC]
RewriteRule ^/nin_old(.*)$ http://www.wellnowwhat.net/nin [R,NC,L] 
```

这没用。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:54:53.387

将你`.htaccess`的放在`nin_old`目录中。

```
RewriteEngine on
RewriteBase /nin_old
RewriteRule ^.* http://www.wellnowwhat.net/nin/ [R,NC,L] 
```

当您重定向到目录的外部 URL 时，我会添加尾部斜杠，因为这会减少额外的重定向。

此外，当您测试所有内容并且一切正常时，请更改`R`为`R=301`，因为大多数搜索引擎都首选永久重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:43:59.947

在 apache 2.0 和更高版本中，前缀（前导“/”）在通过 .htaccess 文件中的规则的重写引擎放入之前从 URI 中删除。尝试从规则中的正则表达式中删除前导斜杠：

```
RewriteRule ^nin_old(.*)$ http://www.wellnowwhat.net/nin [R,NC,L] 
```

# java - 在 Jboss 5.0.1 的 web 服务中不能返回用户定义的数据类型

> ID：11497841
> 
> 赞同：0
> 
> 时间：2012-07-16T03:42:10.267
> 
> 标签：java, jakarta-ee, web

我正在使用 Jboss 5.0.1、jdk 1.6.0 更新 31 并将 EJB 实现为 Web 服务，并且我在 Web 服务模块中的方法在我的示例 BenefitLevel 数组对象中返回一个 JavaBean 对象数组。在 JBoss 中执行时会抛出以下异常：

```
 08:57:08,552 ERROR [ServiceProxy] Service error
    javax.xml.rpc.ServiceException: Cannot create proxy
          at org.jboss.ws.core.jaxrpc.client.ServiceImpl.getPort(ServiceImpl.java:359)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
           at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
           at java.lang.reflect.Method.invoke(Method.java:597)
           at org.jboss.ws.core.jaxrpc.client.ServiceProxy.invoke(ServiceProxy.java:127)
           at $Proxy105.getCarrierWSSEIPort(Unknown Source)
           at org.apache.jsp.index_jsp._jspService(index_jsp.java:92)
           at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
           at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
            at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
           at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
           at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
           at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
           at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
           at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
           at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
           at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
              at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
           at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
           at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
           at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
           at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
           at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
          at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
          at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
          at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
         at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
           at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
          at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:601)
          at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
          at java.lang.Thread.run(Thread.java:662)
        Caused by: java.lang.IllegalStateException: Cannot synchronize to any of these methods:
      public abstract stubs.BenefitLevel[] stubs.CarrierWSSEI.getActiveBenData() throws java.rmi.RemoteException

    OperationMetaData:
      qname={urn:CarrierWS/wsdl}getActiveBenData
     javaName=getActiveBenData
     style=rpc/literal
     oneWay=false
     soapAction=
     ReturnMetaData:
      xmlName=result
     partName=result
      xmlType={urn:CarrierWS/types/arrays/com/test/cas/carrier/plan/info}BenefitLevelArray
      javaType=com.benefitpartnersinc.cas.carrier.plan.info.BenefitLevel[]
       mode=OUT
      inHeader=false
        index=-1
            at org.jboss.ws.metadata.umdm.OperationMetaData.eagerInitialize(OperationMetaData.java:491)
             at org.jboss.ws.metadata.umdm.EndpointMetaData.eagerInitializeOperations(EndpointMetaData.java:557)
            at org.jboss.ws.metadata.umdm.EndpointMetaData.initializeInternal(EndpointMetaData.java:541)
            at org.jboss.ws.metadata.umdm.EndpointMetaData.setServiceEndpointInterfaceName(EndpointMetaData.java:220)
             at org.jboss.ws.core.jaxrpc.client.ServiceImpl.getPort(ServiceImpl.java:345)
            ... 33 more
            08:57:08,567 ERROR [STDERR] javax.xml.rpc.ServiceException: Cannot create proxy
           08:57:08,567 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.ServiceImpl.getPort(ServiceImpl.java:359)
          08:57:08,567 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
          08:57:08,567 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
         08:57:08,567 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
         08:57:08,567 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:597)
         08:57:08,567 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.ServiceProxy.invoke(ServiceProxy.java:127)
          08:57:08,567 ERROR [STDERR]     at $Proxy105.getCarrierWSSEIPort(Unknown Source)
            08:57:08,567 ERROR [STDERR]     at org.apache.jsp.index_jsp._jspService(index_jsp.java:92)
           08:57:08,567 ERROR [STDERR]     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        08:57:08,567 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
       08:57:08,567 ERROR [STDERR]     at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
      08:57:08,567 ERROR [STDERR]     at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
       08:57:08,567 ERROR [STDERR]     at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
        08:57:08,567 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
      08:57:08,567 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
      08:57:08,567 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        08:57:08,567 ERROR [STDERR]     at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        08:57:08,567 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
       08:57:08,567 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
      08:57:08,567 ERROR [STDERR]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
      08:57:08,567 ERROR [STDERR]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
      08:57:08,567 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
      08:57:08,567 ERROR [STDERR]     at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
      08:57:08,567 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
   08:57:08,567 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
     08:57:08,567 ERROR [STDERR]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    08:57:08,567 ERROR [STDERR]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
     08:57:08,567 ERROR [STDERR]     at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
     08:57:08,567 ERROR [STDERR]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    08:57:08,567 ERROR [STDERR]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
     08:57:08,567 ERROR [STDERR]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    08:57:08,567 ERROR [STDERR]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:601)
    08:57:08,567 ERROR [STDERR]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
     08:57:08,567 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:662)
    08:57:08,567 ERROR [STDERR] Caused by: java.lang.IllegalStateException: Cannot synchronize to any of these methods:
    public abstract stubs.BenefitLevel[] stubs.CarrierWSSEI.getActiveBenData() throws java.rmi.RemoteException

        OperationMetaData:
           qname={urn:CarrierWS/wsdl}getActiveBenData
          javaName=getActiveBenData
          style=rpc/literal
           oneWay=false
          soapAction=
        ReturnMetaData:
       xmlName=result
       partName=result
          xmlType={urn:CarrierWS/types/arrays/com/test/cas/carrier/plan/info}BenefitLevelArray
       javaType=com.test.cas.carrier.plan.info.BenefitLevel[]
       mode=OUT
      inHeader=false
       index=-1
         08:57:08,567 ERROR [STDERR]     at org.jboss.ws.metadata.umdm.OperationMetaData.eagerInitialize(OperationMetaData.java:491)
         08:57:08,567 ERROR [STDERR]     at org.jboss.ws.metadata.umdm.EndpointMetaData.eagerInitializeOperations(EndpointMetaData.java:557)
        08:57:08,567 ERROR [STDERR]     at org.jboss.ws.metadata.umdm.EndpointMetaData.initializeInternal(EndpointMetaData.java:541)
          08:57:08,567 ERROR [STDERR]     at org.jboss.ws.metadata.umdm.EndpointMetaData.setServiceEndpointInterfaceName(EndpointMetaData.java:220)
          08:57:08,567 ERROR [STDERR]     at org.jboss.ws.core.jaxrpc.client.ServiceImpl.getPort(ServiceImpl.java:345)
          08:57:08,567 ERROR [STDERR]     ... 33 more 
```

我的 Web 客户端代码如下：

```
 <%@page import="java.util.Hashtable"%>
      <%@page import="javax.naming.*,com.q4.*,javax.xml.rpc.Stub,stubs.CarrierWS,stubs.CarrierWSSEI,stubs.CarrierWSSEI_Impl"%>
     <%@page contentType="text/html" pageEncoding="UTF-8"%>
      <!DOCTYPE html>
   <html>
     <head>
         <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
          <title>JSP Page</title>
        </head>
       <body>
          <h1>Hello World!</h1>
          <%

         try
                           {
                        InitialContext ic = new InitialContext( );
                        CarrierWS carrierws = (CarrierWS)ic.lookup("java:comp/env/service/CarrierWS");
                out.println("========================" + carrierws);
                 CarrierWSSEI sei = carrierws.getCarrierWSSEIPort();
                  out.println("Invoking the service please wait ............." + carrierws.getCarrierWSSEIPort());
                ((Stub)sei)._setProperty(Stub.ENDPOINT_ADDRESS_PROPERTY,"http://localhost:8080/TestWS3WAR/CarrierWS");
                out.println("Invoking the service please wait ............." + sei.getActiveBenData().length);

             }
               catch(Exception e)
                                  {
                 out.println("Exception occurred : " + e.getMessage());
                  e.printStackTrace();
             }

             %>
        </body>
   </html> 
```

请帮助我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:34:17.917

至少在 Jboss 5.0.1 GA 中，用户定义的数据类型不能在 Web 服务中返回。

用户定义的数据类型必须转换为字符串或字符串数​​组，反之亦然。

# php - 使用 AJAX 和 PHP 添加到 MySQL

> ID：11497842
> 
> 赞同：0
> 
> 时间：2012-07-16T03:42:15.877
> 
> 标签：php, mysql, ajax

我有一个工作代码，它允许用户将 url 插入数据库，并显示数据库的内容。

当我使用 ajax 添加到数据库时遇到的问题是，如果 url 有字符“&”它会在该字符之前剪切 url，例如：

```
1\. http://www.arisroyo.com/wp-content/uploads/2012/07/php.png
2\. http://www.arisroyo.com/wp-content/uploads/2012/07/test&123.png 
```

将 url 1 添加到数据库时我没有问题，但是当将 url 2 添加到数据库时，我将其添加到数据库中：

```
http://www.arisroyo.com/wp-content/uploads/2012/07/test 
```

它忽略“&”符号之后的任何内容。问题是我所有的网址都将使用“&”符号。

这是我在 AJAX 上使用的代码，用于从网站上获取用户的 url：

```
var nocache = 0;
function insert() {
// Optional: Show a waiting message in the layer with ID login_response
document.getElementById('insert_response').innerHTML = "Just a second..."
// Required: verify that all fileds is not empty. Use encodeURI() to solve some issues about character encoding.
var site_url= encodeURI(document.getElementById('site_url').value);

// Set te random number to add to URL request
nocache = Math.random();
// Pass the login variables like URL variable
http.open('get', 'insert.php?site_url='+site_url+'&nocache = '+nocache);
http.onreadystatechange = insertReply;
http.send(null);
}
function insertReply() {
if(http.readyState == 4){
var response = http.responseText;
// else if login is ok show a message: "Site added+ site URL".
document.getElementById('insert_response').innerHTML = 'Site added:'+response;
}
} 
```

我一直在使用没有 ajax 的 addinto mySQL，并且从来没有遇到过 url 和“&”符号的问题。我想知道是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:46:31.647

```
document.getElementById('insert_response').innerHTML = "Just a second..." 
```

那里缺少线路终端？

也可以尝试像这样实例化 site_url： url site_url = @"thesite.com";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:55:38.703

我通过简单地将单词组件添加到 econdeURI 来解决它，如下所示：

var site_url= encodeURIComponent(document.getElementById('site_url').value);

我只有在我完全被踩到的时候才在这里发帖，所以很抱歉浪费了你的时间！但感谢您花时间查看我的问题

# jquery - jQuery RemoveAttr 和 IE8 - 仅在另一个组件具有焦点后才有效

> ID：11497843
> 
> 赞同：0
> 
> 时间：2012-07-16T03:42:29.173
> 
> 标签：jquery

选中复选框时，我使用以下代码隐藏表格的 1-4 行：

```
 for(i = 1; i < 4; i++){
      $(tbProf.rows[i]).attr('style','display:none');

      // same problem with
      // $(tbProf.rows[i]).hide();
    } 
```

并在未勾选时反转：

```
 for(i = 1; i < 4; i++){
      $(tbProf.rows[i]).removeAttr('style');

      // same problem with 
      // $(tbProf.rows[i]).show();

    } 
```

它在 Chrome/Firefox 中运行良好：

然而，在 IE7/8 中，这些行仅在我单击表单中的某处（任何地方）后才隐藏/显示，之后应用样式！任何人都可以建议 IE8 的解决方法吗？[ 我必须支持 IE8 :( ]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:46:41.537

我明白了这个问题，但你需要做什么？显示和隐藏这些行？为什么不使用 show() 和 hide() 函数？

**编辑1：**

所以，尝试使用：

```
$(tbProf.rows[i]).hide(); 
```

和

```
$(tbProf.rows[i]).show(); 
```

**编辑2：**

[这里](http://jsfiddle.net/FCuJx/)有一个更好的例子（使用[:lt](http://api.jquery.com/lt-selector/)选择器）。可能对你有用。

# ios - SystemSoundID 停止声音

> ID：11497846
> 
> 赞同：0
> 
> 时间：2012-07-16T03:43:14.207
> 
> 标签：ios, xcode, audio, system-sounds, crash

在我的应用程序中，我将按钮设置为键盘。每个按钮的作用类似于钢琴键，您触摸按钮，按住时声音会播放，松开时声音会停止。对于这种方法，我使用了两个 IBAction。一种用于 Touch Down（声音播放）和 Touch Up Inside（声音停止）。我正在使用 SystemSoundID 播放声音，因为 AVAudioPlayer 有延迟播放。唯一的问题是，当我按住按钮时，声音播放正常，但一旦我松开触摸，我的应用程序就会崩溃。以下是我的代码：

.h 文件：

```
SystemSoundID *soundID; 
```

.m 文件：

```
- (IBAction)ASoundStart:(id)sender { 
     NSString *soundFile = [[NSBundle mainBundle] pathForResource:@"P1:4t" ofType:@"mp3"];
     AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath:soundFile], &soundID);
     AudioServicesPlaySystemSound(soundID);
     [soundFile release];
 }

 - (IBAction)ASoundStop:(id)sender {
     AudioServicesDisposeSystemSoundID(soundID);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:41:12.287

我相信您将 SystemSoundID 错误地视为对象。它只是一个整数。

如果您查看 AudioServicesPlaySystemSound 的声明，请注意它的参数是`SystemSoundID`而不是`SystemSoundID *`

```
void AudioServicesPlaySystemSound (
   SystemSoundID inSystemSoundID
); 
```

因此，如果您只是`SystemSoundID *soundID`将标题更改为`SystemSoundID soundID`我相信它应该可以工作。

快乐编码。

# vb.net - vb.net图表控制点onclick事件

> ID：11497847
> 
> 赞同：1
> 
> 时间：2012-07-16T03:43:15.547
> 
> 标签：vb.net, events, charts

您好，我正在尝试向图表点添加单击事件，但是当我单击图表“对象引用未设置为对象的实例”时出现以下错误

这是我的代码

```
Private Sub Chart1_Click(sender As Object, e As System.EventArgs) Handles Chart1.Click
    Try
        Dim pointindex As Integer
        If result.ChartElementType = ChartElementType.DataPoint Then
            pointindex = result.PointIndex
        End If
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub

Private Sub Form1_MouseDown(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseDown
    result = Chart1.HitTest(e.X, e.Y)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:35:55.920

如果鼠标光标位于控件上方，则只有控件将接收事件，但不会接收表单（有关解决方法，请参见例如此问题：[Winforms : Intercepting Mouse Event on Main Form first, not on Controls](https://stackoverflow.com/questions/4991044/winforms-intercepting-mouse-event-on-main-form-first-not-on-controls)）。

所以`Form1_MouseDown`不会开火，`result`仍然会`Nothing`在`Chart1_Click`。

解决方法可能如下所示：

```
Private Sub Chart1_Click(sender As Object, e As System.EventArgs) Handles Chart1.Click
    Try
        Dim pointindex As Integer
        Dim result As HitTestResult
        result = Chart1.HitTest(Cursor.Position.X, Cursor.Position.Y)
        If result.ChartElementType = ChartElementType.DataPoint Then
            pointindex = result.PointIndex
        End If
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub 
```

# installation - tfs 2012 错误 TF400534

> ID：11497849
> 
> 赞同：3
> 
> 时间：2012-07-16T03:43:48.667
> 
> 标签：installation

我正在尝试安装 TFS 2012 RC，并且在复制文件时显示以下错误：

```
"Error: TF400534 : Package (tfs_servercoreres_x64) caching failed" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:44:44.423

我有同样的错误并修复它重新安装 tfs express。我的安装程序已损坏。所以，在这里从微软官方网站重新下载：http: [//www.microsoft.com/visualstudio/11/en-us/downloads#tfs](http://www.microsoft.com/visualstudio/11/en-us/downloads#tfs)

另外，请记住安装它的用户帐户应该是管理员组的成员。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T16:07:32.573

有关在 Windows Server 2012 RC 上使用 SQL Server 2012 RC 安装和配置 (TFS) Team Foundation Server 2012 RC，请参阅我的博客[链接。](http://bharathtechupdate.blogspot.com/2012/07/Configuring-TFS-2012-on-Windows-2012.html)

[http://bharathtechupdate.blogspot.com/2012/07/Configuring-TFS-2012-on-Windows-2012.html](http://bharathtechupdate.blogspot.com/2012/07/Configuring-TFS-2012-on-Windows-2012.html)

我有一个 VM 映像，我有一个管理员帐户，我在该帐户上执行了此设置过程并将 TFS 2012 配置为与 SharePoint Server 2013 预览一起使用。

希望博客文章对您有所帮助，或者如果有任何问题/澄清，请告诉我。

# python - Python如何使用filecmp.cmp进行非浅比较？

> ID：11497858
> 
> 赞同：-6
> 
> 时间：2012-07-16T03:44:38.243
> 
> 标签：python, python-2.6

来自[http://docs.python.org/release/2.6.2/library/filecmp](http://docs.python.org/release/2.6.2/library/filecmp)：

> 文件cmp.cmp（f1，f2 [，浅]）
> 
> 比较名为 f1 和 f2 的文件，如果它们看起来相等则返回 True，否则返回 False。
> 
> 除非给定了 shallow 并且是假的，否则具有相同 os.stat() 签名的文件被认为是相等的。

我不想执行浅比较，那么我应该提供什么浅参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:45:49.633

错误的。这就是它所说的。如果您不想进行浅层比较，请给它并使其为假。

# c++ - 如何使用 QTextStream readline 一次，使用计时器

> ID：11497860
> 
> 赞同：0
> 
> 时间：2012-07-16T03:44:58.800
> 
> 标签：c++

我想使用计时器每秒读取一行文件。一旦定时器启动，读取第一行，一秒钟后，读取第二行......

但是在 QTextStream 中没有读取特定行的功能。关于如何实现这一目标的任何想法？

如果我运行以下代码，它将始终返回

> ```
>  QTextStream: no device
>  QTextStream: no device
>  QTextStream: no device
>  QTextStream: no device 
> ```

```
timer = new QTimer(this);
connect(timer, SIGNAL(timeout()), this, SLOT(sendmsg()));

void simulatorwindow::on_simON_clicked()
{ 
    simfile = QFileDialog::getOpenFileName(this, tr("Open"),"", tr("Files (*.txt)"));  
    QFile simfile(simfile);
    if (!simfile.open(QIODevice::ReadOnly | QIODevice::Text))
    return; 

    QTextStream textsim(&simfile); 
    timer->start(1000);
    qDebug("Start simulation");
}

void simulatorwindow::on_simOFF_clicked()
{ 
    timer->stop();
    qDebug("Stop simulation");
}

void simulatorwindow::sendmsg()
{ 

    QString line = textsim.readLine();
    QString title = line.section(',', 0,0);
    QString chopped = line.section(',', 1,1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:37:06.027

在`on_simON_clicked`您定义`textsim`为局部变量，并在`sendmsg`. 但它不是同一个变量！

在`on_simON_clicked`你应该使用（显然）成员变量，因为局部变量在函数之外不可用。如果您在编译器中打开更多警告，您将收到有关将局部变量“遮蔽”成员/全局变量的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:19:52.470

不是每次定时器槽触发时都打开文件，而是让 QFile 成为simulatorwindow 的成员。程序启动时打开它，每当计时器触发时从它读取。

# mysql - 如何使用外键创建sql表

> ID：11497868
> 
> 赞同：2
> 
> 时间：2012-07-16T03:46:50.640
> 
> 标签：mysql, database

我想在我的服务器上创建一个 sqlDB，我对数据库开发非常陌生，几年前只在这里和那里做了一些奇怪的编码。我正在尝试构建一个具有四个相互引用的表的数据库..

这就是创建每个表格的目的，以便让您更好地了解我想要实现的目标。

**组** 此表将存储用户为其他用户创建的集线器。

**用户** 存储创建组和加入组时使用的用户详细信息

//不确定下一个是否是个好主意，但希望有人可以让我知道他们对此 **有何看法 userGroups** 此表存储所有或组和用户连接。当用户加入一个组时，他们的 id 与组 id 一起存储。

**Country 国家** /地区用于帮助限制可以返回的结果数量

这是我创建的我想在我的数据库上运行的代码。我不确定我是否正确地制作了外键，对此的任何建议也将不胜感激。

```
CREATE DATABASE tempDB
USE tempDB

CREATE TABLE Group (groupID UInt32 PRIMARY KEY, userID UInt32 references User(SID), country VARCHAR(20) references Country(SID));

CREATE TABLE User (userID UInt32 PRIMARY KEY, name VARCHAR(20), country VARCHAR(20) references Country(SID));

CREATE TABLE userGroups (userID references User(SID), groupID UInt32 references Group(SID));

CREATE TABLE countries (countryName VARCHAR(20) PRIMARY KEY); 
```

所以三个问题：

1.  表 UserGroups 值得吗？
2.  我是否正确创建了外键？
3.  此代码是否会创建一个包含 4 个表的数据库...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:52:31.400

如果您的用户可以在多个组中，并且多个用户可以在一个组中，则将列和外键引用删除到组表中的 userid 字段。usergroups 表处理这种多对多映射。

如果说每个组还有一个“所有者”用户，您当前的设置才有意义......

另外，您使用的是什么数据库引擎？Innodb 或 myisam ......如果 myisam 外键像任何其他索引一样开玩笑，没有任何强制约束的能力，因此尝试和声明并不是真正有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:47:41.293

*   在创建任何具有外键的表之前，应创建该表。
*   Country(SID) - 没有表 Country 和字段 SID
*   国家表应该有一个 id 字段作为主键。
*   要使用外键，您应该指定引擎 =INNODB
*   检查是否已使用外键创建表

    ```
    mysql> Show tables // Shows all created table
    mysql> desc tableName  // to see the structure of the created table 
    ```

# macos - 在顶点着色器中设置变量时出现空白屏幕

> ID：11497870
> 
> 赞同：-1
> 
> 时间：2012-07-16T03:47:10.323
> 
> 标签：macos, opengl, glsl

我刚刚在 OpenGL 3.2 中创建了一个简单的矩形，现在我想添加光照支持。但是，每当我尝试将法线移动到片段着色器时，什么都不会出现。如果我注释掉那条线，它会再次完美运行。造成这种情况的原因是什么？错误日志中没有显示任何内容。

顶点着色器：

```
#version 150

in vec4 position;
in vec3 inNormal;

out vec3 varNormal;

uniform mat4 modelViewProjectionMatrix;

void main()
{
    //varNormal = inNormal; //If I uncomment this line, nothing shows up    
gl_Position = modelViewProjectionMatrix * position;
} 
```

片段着色器：

```
#version 150

in vec3 varNormal;

out vec4 fragColor;

void main()
{
fragColor = vec4(1, 1, 1, 1);   
} 
```

并通过法线：

```
 GLuint posAttrib = 0;
GLuint normalAttrib = 1;

glBindAttribLocation(program, posAttrib, "position");
glBindAttribLocation(program, normalAttrib, "normalAttrib");

//Building the VAO's/VBO's
GLfloat posCoords[] = 
{
    -10, 0.0, -10,
    -10, 0.0, 10,
    10, 0.0, 10,
    10, 0.0, -10,   
};

GLfloat normalCoords[] = 
{
    0, 0, 1,
    0, 0, 1,
    0, 0, 1,
    0, 0, 1
};

glGenVertexArrays(1, &vaoName);
glBindVertexArray(vaoName);

GLuint posBuffer;
glGenBuffers(1, &posBuffer);
glBindBuffer(GL_ARRAY_BUFFER, posBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(posCoords), posCoords, GL_STATIC_DRAW);
glEnableVertexAttribArray(posAttrib);   
glVertexAttribPointer(posAttrib, 3, GL_FLOAT, GL_FALSE, 0, 0);

GLuint normalBuffer;        
glGenBuffers(1, &normalBuffer);
glBindBuffer(GL_ARRAY_BUFFER, normalBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(normalCoords), normalCoords, GL_STATIC_DRAW);
glEnableVertexAttribArray(normalAttrib);
glVertexAttribPointer(normalAttrib, 3, GL_FLOAT, GL_FALSE, 0, 0); 
```

我没有尝试将我所有的位置和正常坐标放在一个 VBO 中，但我不想使用这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:39:33.283

不确定这是您的实际代码还是剪切和粘贴，但调用 glBindAttribLocation 仅在下次调用 glLinkProgram**后才会生效。**

如果您在调用 glBindAttrib 后没有链接程序，则这些将不会生效，并且您的属性可能会被赋予错误的索引。这可以解释为什么在取消注释正常行后会出现不同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:56:26.003

可能是解决此问题的最奇怪的原因，但它确实有效。

首先，确保您了解 OpenGL Profiler 的工作原理。[Apple Docs](https://developer.apple.com/library/archive/#documentation/GraphicsImaging/Conceptual/OpenGLProfilerUserGuide/Introduction/Introduction.html)提供了一个教程

在 glDrawElements 之前/之后设置断点（或 glDrawArray 取决于您使用的内容）

[![](../Images/e69fa522cc93ea08a4920d446617becf.png)](https://i.stack.imgur.com/okB4x.png)

然后查看程序的顶点属性并确保位置是有序的。

[![](../Images/7d45fa9df37835d40f2a86fee6bfc021.png)](https://i.stack.imgur.com/ALPc1.png)

如果不是，请重新排列它们。

从（或任何其他）：

```
enum
{
POSITION_ATTR = 0,
TEXTURE_ATTR=1,
NORMAL_ATTR=2,
}; 
```

到：

```
enum
{
NORMAL_ATTR = 0,
TEXTURE_ATTR=2,
POSITION_ATTR=1,
}; 
```

不知道如何以及为什么会发生这种情况，但这是解决问题的方法。

# iphone - iPhone 启动屏幕延迟

> ID：11497873
> 
> 赞同：1
> 
> 时间：2012-07-16T03:47:33.277
> 
> 标签：iphone, performance, latency

我在原生应用程序中包装了一个 html5 网站。应用程序启动画面出现一秒钟然后出现一个白色页面，我决定添加一个与启动画面具有相同图像的图像视图来填充这个白色屏幕，一旦网站下载了所有 jquery 和 CSS，我就会隐藏这个中间图像. 但是，这个屏幕持续了很长时间（最多 30 秒），所以我认为这可能是由于 jquery 和 CSS 大批量下载时间的原因。因此，创建一个包含图像和重定向 js（非库）语句的页面，发现重定向如此之快。我不明白为什么，有人解释一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:14:33.790

这是附加 Web 视图时的预期行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:37:14.193

您可能需要考虑您的应用计划可能会违反 App Store 指南：

[Apple 可以拒绝移动 web shell 应用程序。](https://stackoverflow.com/a/5478893/410867)

# java - Java，似乎找不到我的继承问题

> ID：11497879
> 
> 赞同：0
> 
> 时间：2012-07-16T03:49:09.177
> 
> 标签：java

我试图找出我的问题。

出于某种原因，当我尝试设置销售人员的销售额时，它只将第一个 SalesPerson 创建的销售额设置为最后一个 Salesperson 销售集。

这里 EmployeeDatabase 包含和 EmployeeList ，它是员工类型的容器对象。

我有其他类的代码，但我认为这就是所有需要的......抱歉代码中缺少注释

我的输出：

```
John 12000.0
Set sales to: 12000.0
Joan 10000.0
Set sales to: 10000.0
Jack 5000.0
Set sales to: 5000.0
Name: John           Commision: 0.03 Sales: 5000.0
Name: Joan           Commision: 0.04 Sales: 0.0
Name: Jack           Commision: 0.02 Sales: 0.0

Payroll: 150.0 
```

代码：员工数据库

```
public class EmployeeDatabase 
{

public static void main(String[] args) 
{
    EmployeeList emp = new EmployeeList();
    /*emp.enqueue(new SalesManager("Gee", 1000));
    emp.enqueue(new SalesManager("Gal", 1000));
    emp.enqueue(new SalesManager("Gem", 1000));*/
    emp.enqueue(new SalesPerson("John", 0.03));
    emp.enqueue(new SalesPerson("Joan", 0.04));
    emp.enqueue(new SalesPerson("Jack", 0.02));
    /*emp.enqueue(new Manager("Fred", 10000));
    emp.enqueue(new Manager("Frank", 5000));
    emp.enqueue(new Manager("Florence", 3000));
    emp.enqueue(new Programmer("Linda", 7));
    emp.enqueue(new Programmer("Larry", 5));
    emp.enqueue(new Programmer("Lewis", 3));*/

    /*emp.setHours("Linda", 35);
    emp.setHours("Larry", 23);
    emp.setHours("Lewis", 3);*/
    emp.setSales("John", 12000);
    emp.setSales("Joan", 10000);
    emp.setSales("Jack", 5000);
    /*emp.setSales("Gee", 4000);
    emp.setSales("Gal", 3000);
    emp.setSales("Gem", 2000);
    emp.setSalary("Gee", 1000);
    emp.setSalary("Gal", 2000);
    emp.setSalary("Gem", 3000);*/
    emp.display();
}
} 
```

员工名单

```
import java.util.Iterator;
import java.util.LinkedList;
import java.util.Queue;

public class EmployeeList 
{
Queue<Employee> empList = new LinkedList<Employee>();

Employee find(String nm)
{
    Iterator<Employee> it = empList.iterator();
    while(it.hasNext())
    {
        Employee em = (Employee)it.next();
        if(!em.name.equals(nm))
        {
            return em;
        }   
    }
    return null;
}

double payroll()
{
    double payroll = 0.0;
    Iterator<Employee> it = empList.iterator();
    while(it.hasNext())
    {
        Employee em = (Employee)it.next();
        payroll += em.computePay(); 
    }
    return payroll;
}

void display()
{
    Iterator<Employee> it = empList.iterator();
    while(it.hasNext())
    {
        Employee em = (Employee)it.next();
        em.display();   
    }
    System.out.println("\nPayroll: " + payroll());
}

void enqueue(Employee e)
{
    empList.add(e);
}

void setHours(String nm, int hrs)
{
    Employee em = find(nm);
    /*if(em == null)
        return;*/
    em.setHours(hrs);
}

void setSalary(String nm, float salary)
{
    Employee em = find(nm);
    /*if(em == null)
        return;*/
    em.setSalary(salary);
}

void setSales(String nm, double sales)
{
    System.out.println(nm + " " + sales);
    Employee em = find(nm);
    /*if(em == null)
        return;*/
    em.setSales(sales);
}
} 
```

员工

```
abstract class Employee 
{
String name;

Employee() {}
Employee (String nm) { name = nm; }
abstract double computePay();
void display () {}
void setHours(double hrs) {}
void setSales(double sales) {}
void setSalary(double salary) { System.out.println("NO!"); }
 } 
```

工资雇员

```
public class WageEmployee extends Employee 
{
double rate;
double hours;

WageEmployee(String name)
{
    this.name = name;
    if(this.name.length() < 14)
    {
        while(this.name.length() < 14)
        {
            this.name += " ";
        }
    }
}
WageEmployee(String name, double rate)
{
    this.name = name;
    if(this.name.length() < 14)
    {
        while(this.name.length() < 14)
        {
            this.name += " ";
        }
    }
    this.rate = rate;
}

double computePay()
{
    return rate * hours;
}

void setHours(double hrs) 
{
    hours = hrs;
    System.out.println("Set Hours to: " + hours);
}

 void display () 
 {
     System.out.println("Name: " + name + " Hours: " + hours + " Rate: " + rate);
 }
} 
```

销售员

```
public class SalesPerson extends WageEmployee 
{
double comission;
double salesMade;

SalesPerson(String name, double commision) 
{
    super(name);
    this.comission = commision;
}

double computePay()
{
    return comission * salesMade;
}

void setSales(double sales) 
{
    salesMade = sales;
    System.out.println("Set sales to: " + salesMade);
}

void display () 
 {
     System.out.println("Name: " + name + " Commision: " + comission + " Sales: " + salesMade);
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:05:46.650

这段代码有两个问题。

首先，有额外的！在查找方法中。

`if(!em.name.equals(nm))`应该是`if(em.name.equals(nm))`。

第二个问题是在您的工资员工构造函数中创建的填充。

```
if(this.name.length() < 14)
{
    while(this.name.length() < 14)
    {
        this.name += " ";
    }
}` 
```

此代码使`"John"`您正在寻找的实际上是`"John "`. 注意间距。（拍摄，markdown 消除了大部分内容，但你会在最后得到额外间距的想法）。这会导致名称永远不会比较相等，从而在您尝试与不存在的员工一起工作时导致空指针异常。

对此有三种可能的解决方案。`em.name`首先，在比较之前使用 String.trim 方法。其次，在比较之前以与存储搜索名称相同的方式填充您的搜索名称。第三，您也许可以完全删除填充（我不知道您的用例，但 String.format 可能只允许您仅在输出时填充）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:57:07.190

您的`find`方法中有一个错误：

```
Employee find(String nm)
{
    Iterator<Employee> it = empList.iterator();
    while(it.hasNext())
    {
        Employee em = (Employee)it.next();
        if(!em.name.equals(nm)) // should be if(em.name.equals(nm))
        {
            return em;
        }   
    }
    return null;
} 
```

这导致第一个员工在`setSales`为后来的员工调用时返回。

# brainfuck - 在 Brainfuck 中将一个数字乘以 2？

> ID：11497881
> 
> 赞同：1
> 
> 时间：2012-07-16T03:49:17.947
> 
> 标签：brainfuck

给定一个任意长的数字，我怎样才能输出它的双精度数？只要结果小于 10，我就知道如何将小数相乘，但是像 32984335 这样的大整数又如何呢？我不知道处理这种事情的正确方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:31:38.527

这是您需要实现的算法：

1.  当前计数从 0 开始；
2.  将当前计数乘以 10：这可以通过重复 10 次，然后将所有重复值相加来实现；
3.  读一个数字；
4.  如果为空，则继续执行 8；
5.  将其转换为实际数字：这可以通过减去 48 来实现；
6.  将其添加到当前计数；
7.  继续2；
8.  复制当前计数；
9.  把骗子加在一起；
10.  使用重复减法除以十；保持商和余数；
11.  抓住剩下的；
12.  将其设为数字​​（加 48）；
13.  打印它；
14.  从 10 中取商；
15.  如果不为零，则转到 10；
16.  结束。

所有这些步骤都包含[基本的脑筋急转弯](http://esolangs.org/wiki/brainfuck_algorithms)，所以应该很容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:26:36.243

这是一个开始。它会增加一个字节的输入，但我认为您可以构建它以使其适用于任何数字。基本上，您输入一个数字，并将该数字乘以 (2) 存储在下一个指针中。你循环递减第一个数字，然后嵌套一个循环递减第二个数字；在内部循环的每次迭代中，将指针递增到第二个操作数的右侧。这是你的结果。

```
,      take input to ptr 0
  [
     -     decrement first operand (input)
     >++   number to multiply by (2) at ptr 1
     [
        >+   result in ptr 2
        <-   decrement second operand (2)
     ]
     <
  ]
>>     move to result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:30:14.797

这是我的BF代码：http: [//ideone.com/2Y9pk8](http://ideone.com/2Y9pk8)

```
->>+>,+
[
    -----------
    [
        -->++++++[-<------>]<
        [->+<[->+<[->+<[->+<[>----<-<+>[->+<]]]]]]>
        [-<++>]<+
        >,+
        [
            -----------
            [->+<]
        ]
        >[-<+>]<
    ]
    <[<]
    >-[<++++++++[->++++++<]>.[-]]
    >[<++++++++[->++++++<]>-.[-]>]
    ++++++++++.[-]
    <+[-<+]
    ->>+>,+
] 
```

它读取每一行中的每个数字，直到 EOF，并将所有数字乘以 2..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-22T08:33:21.503

这是将数字乘以 2 的代码。

,[>++<-]>。

希望这可以帮助。

# ios - 无法创建 UITableViewDataSource

> ID：11497883
> 
> 赞同：0
> 
> 时间：2012-07-16T03:49:56.957
> 
> 标签：ios, uitableview, nstablecolumn

我正在尝试创建 UITableViewDataSource，但出现以下错误：

```
- (id) tableView:(NSTableView *) aTableView objectValueForTableColumn:(NSTableColumn *) aTableColumn row:(NSInteger) rowIndex 
{
    return nil;
} 
```

我看到的错误是：

```
Expected a type (NSTableColumn) 
```

所以，显然， NSTableColumn 没有定义，但我不知道如何定义它。如果我包含 < NSTableColumn.h >，我会得到“NSTableColumn.h not found”（注意：NSTableColumn.h 来自 Apple 的“Organizer”中的文档）。

创建一个表格视图控制器不会有这么大的问题，但我找不到答案。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:10:05.463

NSTableView 与 UITableView 对我来说应该是一个线索。在搜索和教程的某个地方，我得到了错误的界面。因此，我找不到 NSTableColumn 也就不足为奇了。

# hadoop - Hbase - Hadoop：TableInputFormat 扩展

> ID：11497884
> 
> 赞同：0
> 
> 时间：2012-07-16T03:50:05.743
> 
> 标签：hadoop, hbase

使用 hbase 表作为我的输入，其中的键我已经预处理，以便由与相应行 ID 连接的数字组成，我想放心，所有具有相同数字标题的行都将被处理来自 M/R 工作的同一个映射器。我知道这可以通过扩展 TableInputFormat 来实现，并且我已经看过一两篇关于扩展此类的帖子，但我正在寻找最有效的方法来做这件事。

如果有人有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T05:22:20.733

You can use a PrefixFilter in your scan. [http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/PrefixFilter.html](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/PrefixFilter.html)

And parallelize the launch of your different mappers using Future

```
final Future<Boolean> newJobFuture = executor.submit(new Callable<Boolean>() {
        @Override
        public Boolean call() throws Exception {
            Job mapReduceJob = MyJobBuilder.createJob(args, thePrefix,
                    ...);
            return mapReduceJob.waitForCompletion(true);
        }
    }); 
```

But I believe this is more an approach of a reducer you are looking for.

# php - 脚本结束后PHP进程无法终止

> ID：11497885
> 
> 赞同：0
> 
> 时间：2012-07-16T03:50:20.327
> 
> 标签：php

我在 CRON 作业的命令行中运行 PHP 脚本。一旦完成一个进程，有时 PHP 进程仍然在任务管理器上运行，并且命令提示符在 Windows 中永远处于活动状态，除非我从任务管理器中手动终止进程。我放了日志文件，它显示代码正常工作并且脚本结束。但是，它不会退出进程并消耗服务器的内存。我想知道这是 php 的错误吗？

我在 windows server 2003 中运行应用程序，而 php 在 CLI 中。

# hadoop - Map 和 Reduce 是否在不同的 JVM 中运行？

> ID：11497886
> 
> 赞同：3
> 
> 时间：2012-07-16T03:50:23.600
> 
> 标签：hadoop

嗨，我有一个 Map Reduce 任务，比如 AverageScoreCalculator，它有映射器和减速器。问题是我静态初始化 AverageScoreCalculator 中的几个字段对 mapper 和 reducer 都可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:51:36.923

默认情况下，每个 map 和 reduce 任务在不同的 JVM 中运行，并且可以在节点上的任何特定实例上运行多个 JVM。

设置以下属性

> mapred.job.reuse.jvm.num.tasks = -1
> mapreduce.tasktracker.map.tasks.maximum = 1
> mapreduce.tasktracker.reduce.tasks.maximum = 1
> mapreduce.job.reduce.slowstart.completedmaps = 1

并且只有一个映射器/减速器在给定节点上运行，并具有 JVM 重用，并且在所有映射器完成处理之前，减速器不会启动。

需要注意的几件事

1.  上述方法适用于 MapReduce 1x 版本，**并不是一种有效的方法**。

2.  MapReduce 2x 版本不支持 JVM 重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:05:38.637

如果静态字段在 map 或 reduce 程序中动态更新，则会产生问题。独立和伪分布式模式适用于初学者，只有在学习 Hadoop 时才应使用。这些模式在处理大量数据时无济于事，这是地图的主要目标 - 减少编程实践。

当作业分布在节点上时，静态信息将丢失。重新考虑使用静态变量。

如果可以的话，粘贴map和reduce程序以及需要静态字段，我们可以有更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:45:20.283

您应该首先知道您的工作将在哪种配置/模式下运行。

例如，如果您在本地（独立）模式下运行，那么将只有一个 JVM 运行您的作业。如果您以伪分布式模式运行它，该作业将使用您机器上的多个 JVM 运行。如果您以分布式模式运行它，它们将在不同的机器上运行，当然还有不同的 JVM（使用 JVM 重用）

# java - 为什么我的 Android SDK 源码不完整？

> ID：11497890
> 
> 赞同：6
> 
> 时间：2012-07-16T03:51:13.483
> 
> 标签：java, android, javadoc

最近发现我的Android SDK源码不完整。我只从 SDK Manager 下载了 Android SDK API 16。当我想从源代码生成 javadoc 时，它会警告我找不到某些类。我已经阅读了下面的网站，但我对高级 API 是否包含低级 API 感到困惑。只安装最高的API就够了吗？还是某些 Android SDK 源代码依赖于 JDK 源代码？非常感谢。

[Android API 级别帮助](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

一段 Javadoc 警告：

./java/lang/String.java:31：警告：包 libcore.util 不存在

导入 libcore.util.EmptyArray；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:48:15.737

据我了解，SDK 将仅包含来自 frameworks/base 的来源。由于 libcore 不在此处（它位于源代码树的根目录），因此您会收到此错误。

# visualization - 支持向量机背后的基本理念

> ID：11497898
> 
> 赞同：2
> 
> 时间：2012-07-16T03:53:09.983
> 
> 标签：visualization, multidimensional-array, pca, svm

我正在通过阅读大量材料来研究支持向量机 (SVM)。但是，似乎大部分都集中在如何通过使用线性、多项式、RBF/高斯等多个内核映射输入的 2D 数据来对其进行分类。

我的第一个问题是，SVM 可以处理高维（nD）输入数据吗？

根据我的发现，答案是YES！

如果我的理解是正确的，nD 输入数据将是

1.  在希尔伯特超空间中构造，那么这些数据将是
2.  通过使用某些方法（例如 PCA ？）将其组合在一起/将其投影回 2D 平面来简化，以便
3.  内核方法可以将其映射为适当的形状，例如直线或曲线可以将其分成不同的组。

这意味着大多数指南/教程都集中在步骤 (3) 上。但是如果输入数据大于 2D，我检查过的一些工具箱无法绘制。投影到二维后的数据如何？

如果没有数据的投影，他们如何分类呢？

我的第二个问题是：我的理解正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:29:07.940

`My first question is, does SVM can handle high-dimensional (n-D) input data?`

是的。我在使用 LIBSVM 软件时处理了 n > 2500 的数据：[http](http://www.csie.ntu.edu.tw/~cjlin/libsvm/) ://www.csie.ntu.edu.tw/~cjlin/libsvm/ 。我使用了线性和 RBF 内核。

`My second question is, does it correct my understanding?`

我不完全确定你在这里的意思，所以我会尝试评论你最近所说的话。我相信您的直觉通常是正确的。数据是在某个 n 维空间中“构造”出来的，使用一个 n-1 维的超平面将数据分为两组。但是，通过使用内核方法，可以使用线性方法生成此信息，而不会消耗计算机的所有内存。

我不确定您是否已经看过这个，但如果您还没有看过，您可能会对本文中的一些信息感兴趣：http: [//pyml.sourceforge.net/doc/howto.pdf](http://pyml.sourceforge.net/doc/howto.pdf)。我复制并粘贴了部分可能会引起您的想法的文本：

> 核方法是一种仅通过点积依赖于数据的算法。在这种情况下，点积可以被一个核函数替换，该核函数在一些可能的高维特征空间中计算点积。这有两个优点：首先，能够使用为线性分类器设计的方法生成非线性决策边界。其次，核函数的使用允许用户将分类器应用于没有明显固定维向量空间表示的数据。生物信息学中此类数据的主要例子是序列（DNA 或蛋白质）和蛋白质结构。

如果您可以解释您所指的“指南”，这也会有所帮助。我认为我以前从未必须在二维平面上投影数据，而且对于具有荒谬数量的维度（或称为“特征”的数据）这样做是没有意义的LIBSVM）。使用选定的内核方法应该足以对此类数据进行分类。

# php - SSL 站点上的 PHP 表单邮件程序

> ID：11497899
> 
> 赞同：0
> 
> 时间：2012-07-16T03:53:21.033
> 
> 标签：php, forms, ssl, mailer

我很难找到一个应该有一个非常简单的解决方案的问题的解决方案。

我创建了一个在我的客户网站上工作的 PHP 表单邮件程序。然后他决定获得一个 SSL 证书，从那时起，表单邮件程序就不起作用了。我根本没有收到任何错误。似乎所有内容都已发送，但我没有收到来自表单的任何电子邮件。

然后我创建了一个带有一个字段和一个非常基本的 PHP 表单邮件程序的废话表单，看看我是否可以解决问题，但即使这个基本代码也不起作用。

mail() 函数是否不适用于 SSL？我在想我在某处遗漏了一些相关的东西。这是我第一次使用 SSL，但只要我能得到一些指导，我就有能力创建代码，这就是这篇文章的原因。任何指导、方向或批评将不胜感激。

---我用于测试的废话表格---

```
<form id="form1" name="form1" method="post" action="testFormsub.php">
<input type="text" name="text1" id="text1" />
<input type="submit" name="button" id="button" value="Submit" />
</form> 
```

---我的基本 PHP 表单邮件程序---

```
<?php
$test = $_POST['text1'];
$to="email@email.com";
$subject="Thank you for registering.";
$header="From: TEST EMAIL <email@email.com>";
$message="PLEASE WORK...$test \r\n";
$sentmail = mail($to,$subject,$message,$header);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T08:41:09.920

您是否使用两个单独的页面进行邮寄，如表单页面和结果页面？

如果是这样，您是否对两个页面都使用 SSL？

如果不是，则问题可能在于您的 sendmail 页面使用 SSL，而您的 testFormsub.php 未使用 SSL。

# java - 如何在 Java 中检查字符串的字符集？

> ID：11497902
> 
> 赞同：35
> 
> 时间：2012-07-16T03:53:54.647
> 
> 标签：java, string, character-encoding

在我的应用程序中，我从 LDAP 获取用户信息，有时完整的用户名包含错误的字符集。例如：

```
Ð¢ÐµÑÑ61 Ð¢ÐµÑÑÐ¾Ð²Ð¸Ñ61 
```

它也可以是英文或俄文并正确显示。如果用户名更改，它会在数据库中更新。即使我更改数据库中的值，它也不会解决问题。

我可以通过这样做在保存之前修复它

```
new String(incorrect.getBytes("ISO-8859-1"), "UTF-8"); 
```

但是，如果我将它用于包含俄语字符的字符串（例如，“Тест61 Тестович61”），我会得到类似“????61 ????????61”的内容。

你能建议一些可以确定字符串字符集的东西吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-16T04:54:47.990

java中的字符串AFAIK不保留其原始编码-它们始终以某种Unicode形式在内部存储。您想检测原始流/字节的字符集 - 这就是为什么我认为您的 String.toBytes() 调用为时已晚。

理想情况下，如果您可以获得正在读取的输入流，您可以通过以下方式运行它：[http ://code.google.com/p/juniversalchardet/](http://code.google.com/p/juniversalchardet/)

还有很多其他的字符集检测器

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-12-13T10:07:29.353

我有同样的问题。Tika 太大，juniversalchardet 没有检测到 ISO-8859-1。所以，我自己做了，现在在生产中运行良好：

```
public String convert(String value, String fromEncoding, String toEncoding) {
  return new String(value.getBytes(fromEncoding), toEncoding);
}

public String charset(String value, String charsets[]) {
  String probe = StandardCharsets.UTF_8.name();
  for(String c : charsets) {
    Charset charset = Charset.forName(c);
    if(charset != null) {
      if(value.equals(convert(convert(value, charset.name(), probe), probe, charset.name()))) {
        return c;
      }
    }
  }
  return StandardCharsets.UTF_8.name();
} 
```

此处的完整描述：[Detect the charset in Java strings](http://www.turro.org/publications?item=114&page=0)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-11-01T05:48:47.753

我推荐[Apache.tika CharsetDetector](https://tika.apache.org/0.8/api/org/apache/tika/parser/txt/CharsetDetector.html)，非常友好和强大。

```
CharsetDetector detector = new CharsetDetector();
detector.setText(yourStr.getBytes());
detector.detect();  // <- return the result, you can check by .getName() method 
```

此外，您可以将任何编码字符串转换为您想要的字符串，以 utf-8 为例：

```
detector.getString(yourStr.getBytes(), "utf-8"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-19T12:06:23.430

我非常感谢 Lluís Turró Cutiller 的回答 (+1)，但想在此基础上添加一个变体。

```
private String convert(String value, Charset fromEncoding, Charset toEncoding) throws UnsupportedEncodingException {
    return new String(value.getBytes(fromEncoding), toEncoding);
}

private boolean probe(String value, Charset charset) throws UnsupportedEncodingException {
    Charset probe = StandardCharsets.UTF_8;
    return value.equals(convert(convert(value, charset, probe), probe, charset));
}

public String convert(String value, Charset charsetWanted, List<Charset> charsetsOther) throws UnsupportedEncodingException {
    if (probe(value, charsetWanted)) {
        return value;
    }
    for (Charset other: charsetsOther) {
        if (probe(value, other)) {
            return convert(value, other, charsetWanted);
        }
    }
    System.err.println("WARNING: Could not convert string: " + value);
    return value;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-29T16:27:50.977

您的 LDAP 数据库设置不正确。将数据放入其中的应用程序应转换为已知的字符集编码，在您的情况下，可能是 UTF_16。选择一个标准。所有检测编码的方法都是猜测。

写入值的应用程序是唯一明确知道它正在使用哪种编码并且可以正确转换为另一种编码（例如 UTF_16）的应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T06:10:09.973

在您的网络应用程序中，您可以声明一个编码过滤器，以确保您以正确的编码接收数据。

```
<filter>
    <description>Explicitly set the encoding of the page to UTF-8</description>
    <filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter> 
```

spring 提供的过滤器确保控制器/servlet 接收 UTF-8 格式的参数。

# javascript - 重新分配变量和重新定义之间的性能差异

> ID：11497903
> 
> 赞同：-1
> 
> 时间：2012-07-16T03:53:55.350
> 
> 标签：javascript, variables

哪种风格更适合 Javascript 的性能？

**风格1**

```
var x = ''
for(var i = 0 ; i < arr.length ; i ++){
    x = ....
    //do something with x
 } 
```

**风格2**

```
for(var i = 0 ; i < arr.length ; i ++){
    var x = ....
    //do something with x
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T04:12:51.137

**JavaScript 不像**其他语言那样有块作用域，只有函数作用域。这意味着在实践中 JS 引擎将您的代码的第一个版本解释为：

```
var i, x = '';    
for(i = 0 ; i < arr.length ; i ++){
    x = ....
    //do something with x
} 
```

和第二个版本完全相同，只是没有为 分配默认`''`值`x`：

```
var i, x;    
for(i = 0 ; i < arr.length ; i ++){
    x = ....
    //do something with x
} 
```

因此，在我看来，“样式 1”是不好的做法，因为您分配了一个从未使用过的值。但我认为“样式 2”更糟糕，因为它暗示了不存在的块范围。

至于哪个性能更好，如果不对其进行测试，我希望两者与任何现代 JS 引擎几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:01:51.130

由于 javascript 中可用的范围链性能调整，我总是建议尽可能使用局部变量。阅读[http://blogs.msdn.com/b/jscript/archive/2007/07/26/scope-chain-of-jscript-functions.aspx](http://blogs.msdn.com/b/jscript/archive/2007/07/26/scope-chain-of-jscript-functions.aspx)了解更多信息。

# jqgrid - Jqgrid Ajax 成功结果

> ID：11497907
> 
> 赞同：0
> 
> 时间：2012-07-16T03:54:54.120
> 
> 标签：jqgrid

我正在搜索 Jqgrid Ajax 成功结果的变量名称，因为我添加了其他数据以进行进一步处理。

我说的是结果`url:`我知道这是 jusing ajax 调用，但我不知道 jqgrid 如何命名它的结果，例如，`sucess: function(result)`

```
jQuery("#list2").jqGrid({
url:'server.php?q=2',
datatype: "json", 
```

有人知道结果名称是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:45:02.293

在[这篇文章](https://stackoverflow.com/questions/1636580/how-can-i-get-jqgrid-to-recognize-server-sent-errors)中，有一些关于通过定义 loadError 函数（[此处为演示](http://www.trirand.com/blog/jqgrid/jqgrid.html)，在“3.2 版中的新功能”-> 控制服务器错误下）并查看返回的数据来捕获 Ajax 调用结果中的错误代码的好示例（当没有错误时）通过添加一个 loadComplete 函数。

# java - Java setFullScreenWindow() 保持领先

> ID：11497910
> 
> 赞同：13
> 
> 时间：2012-07-16T03:55:13.053
> 
> 标签：java, swing, jframe, fullscreen

我正在编写一个旨在在双显示器设置上运行的应用程序，其中一个显示器上的“显示”JFrame 全屏显示，另一台显示器上的“控制”JFrame 向显示器发送指令。我尝试了两种设置全屏显示的不同方法；每个人的成功似乎都取决于操作系统。

```
display.setUndecorated(true);
display.setExtendedState(JFrame.MAXIMIZED_BOTH); 
```

在 Windows 中工作，但 JFrame 隐藏在 OS X 和 Linux 的扩展坞/面板下。

我的另一种方法，利用

```
GraphicsDevice.setFullScreenWindow(display); 
```

适用于我尝试过的所有三种操作系统，但在 Windows 中，将控制窗口聚焦在另一台显示器上会使显示窗口隐藏，并调用

```
display.setAlwaysOnTop(true); 
```

不能解决问题。我有点偏爱这种`GraphicsDevice`方法，因为我不必处理 OS X 或 Linux 中的问题，我希望 Windows 问题是一个简单的解决方法。是吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T06:29:43.117

试试这个...

**多屏**

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
GraphicsDevice[] gs = ge.getScreenDevices();

// Get size of each screen

for (int i=0; i<gs.length; i++) {
    DisplayMode dm = gs[i].getDisplayMode();
    int screenWidth = dm.getWidth();
    int screenHeight = dm.getHeight();
} 
```

用于`public final void setAlwaysOnTop(boolean alwaysOnTop)`将窗口放在顶部，如果窗口是可见的，这包括带上 window `toFront`，然后将其“粘贴”到最顶部的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T23:00:45.133

我遇到了同样的问题。我解决它的方法是覆盖`show()`jframe 中的函数，并使用[缓冲区策略](http://download.java.net/jdk8/docs/api/java/awt/image/BufferStrategy.html)永远不会退出 show 函数。因此是这样的：

```
 @override
 public void show(){
        super.show();
        //Create a double buffering strategy
        createBufferStrategy(2);
        BufferStrategy bs = getBufferStrategy();
        while(true){
              //draw our frame
              Graphics g = bs.getGraphics();
              paint(g);
              //dispose of our graphics
              g.dispose();
              //Show our frame
              bs.show();
              try{
                  //Don't use all our cpu-power
                  Thread.sleep(10);
              }catch(Exception e){
                  //Do something (this probably will never happen)
              }
        }
 } 
```

如果使用`setVisible(boolean)`而不是`show()`(`show`已弃用) 实际上会更好。该窗口不会总是在顶部（您仍然可以在其上拖动另一个窗口），但是当您将焦点放在另一个窗口时它不会自动隐藏。我猜这就是你想要的行为。

**注意：**不要调用`show`事件队列，因为这会使事件队列无用，并使 jframe 忽略所有事件。该函数`show`应在新线程中调用，然后仍将处理所有事件。

# gtk - 将 GTK+2 中的应用程序与 Nautilus 3 集成（使用 GTK+3）。这可能吗？

> ID：11497911
> 
> 赞同：2
> 
> 时间：2012-07-16T03:55:15.020
> 
> 标签：gtk, pygtk, gtk3, pygobject, nautilus

我有一个使用 PyGTK (GTK+2) 编写的应用程序。我想通过扩展将它与 Nautilus 集成（我正在努力学习）。我当前的桌面有 GNOME3 和 Nautilus 3，它们是用 GTK+3 编写的，Nautilus 的扩展使用 PyGObject。

我可以将 GTK+2 中的应用程序与 Nautilus 3 集成吗？（尚未将我的应用程序移植到 GTK+3）。有什么提示吗？

我计划将我的应用程序移植到 GTK+3 (PyGObject)，但它需要的时间比我现在要多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:13:39.637

是的，有可能。例如，您可以使用 Nautilus 以文件或目录作为参数来调用您的程序。您调用的程序可以用任何工具包编写，甚至可以只是一个 shell 脚本。

一个小例子或扩展：

```
from gi.repository import Nautilus, GObject
from urllib import unquote

PROGRAM_NAME = '/path/to/your/program'

class MyExtension(GObject.GObject, Nautilus.MenuProvider):
    def __init__(self):
        pass

    def call_my_program(self, menu, files):
        # Do whatever you want to do with the files selected
        if len(files) == 0:
            return

        # Strip the URI format to plain file names
        names = [ unquote(file.get_uri()[7:]) for file in files ]

        argv = [ PROGRAM_NAME ] + names

        GObject.spawn_async(argv, flags=GObject.SPAWN_SEARCH_PATH)

    def get_file_items(self, window, files):
        # Show the menu if there is at least on file selected
        if len(files) == 0:
            return

        # We care only files (local files)            
        for fd in files:
            if fd.is_directory() or fd.get_uri_scheme() != 'file':
                return

        item = Nautilus.MenuItem(name='MyExtensionID::MyMethodID',
                                 label='Do something with my program...')
        item.connect('activate', self.call_my_program, files)

        return item, 
```

该扩展是使用 GObject Introspection (Nautilus 3) 编写的，它是通用的：您可以调用任何您想要接受文件作为参数的外部程序。关键是`GObject.spawn_async()`。

`get_file_items`是 Nautilus 在用户与文件交互时调用的方法。在那里，您可以绑定上下文菜单（使用`Nautilus.MenuItem()`）。然后，将该菜单与调用程序的方法（`call_my_program()`）连接起来。

您可以在方法中创建其他过滤器`get_file_items`。例如，仅在选择文本普通文件（使用）时才显示上下文菜单`fd.is_mime_type()`。你可以做任何你想做的事。请注意只执行非阻塞操作，否则您可能会阻塞 Nautilus。

要测试扩展，您可以将其安装在`~/.local/share/nautilus-python/extensions`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:54:12.533

检查[内省移植](https://live.gnome.org/PyGObject/IntrospectionPorting#Step_2%3a_Wash.2C_rinse.2C_repeat "内省移植")：

> 请注意，您不能中途迁移：如果您尝试同时导入 gtk 和 gi.repository.Gtk，您将只得到程序挂起和崩溃，因为您正尝试以两种不同的方式使用同一个库. 不过，您可以混合使用不同库的静态和 GI 绑定，例如 dbus-python 和 gi.repository.Gtk。

因此，这取决于 Nautilus 插件的实现方式。

# ruby - SQLite 查询在 Ruby 中失败且没有错误

> ID：11497912
> 
> 赞同：0
> 
> 时间：2012-07-16T03:55:15.327
> 
> 标签：ruby, sqlite

我有一个函数可以`oid`从表中的字段中找到一个。根据文档，该`oid`字段是自动创建并自动递增的。听起来很棒。

```
def teddy_bear_id_by_url(url)
  query = "select oid from teddy_bears where url = \"#{url}\""
  res = $db.execute(query)
  return res
end 
```

不幸的是`[]`，当在 sqlite shell 中运行查询时，此代码返回一个（空数组），给出一个“好”值（例如`4`）。

```
def teddy_bear_id_by_url(url)
  return $db.execute("select oid from teddy_bears where url = '?'", url)
end 
```

以上也不行。

我确实检查了它`url`包含我认为它的作用。

可能会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:16:14.787

您可能会遇到一些有趣的事情`url`，再加上您的字符串插值，正在弄乱您的 SQL。最好的办法是在[`execute`](http://rubydoc.info/gems/sqlite3/SQLite3/Database#execute-instance_method)调用中使用占位符：

```
$db.execute("select oid from teddy_bears where url = ?", url) 
```

# symfony - @param注解在symfony2类文件中有什么作用

> ID：11497915
> 
> 赞同：2
> 
> 时间：2012-07-16T03:55:28.063
> 
> 标签：symfony, doctrine-orm

在 symfony2 和学说 2 中。我有这个

```
 /**
  * Find a user by its username.
  *
  * @param string  $username
  * @return UserInterface or null if user does not exist
  */
function findUserByUsername($username); 
```

现在我想知道它是否解决了任何目的，或者它是否在数据库中使用这些`@param`和`@return`注释做任何事情，或者它们只是为了文档

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T04:23:26.480

`@param`在 phpDocumentor[文档](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.param.pkg.html)中进行了解释。它与 Symfony2 无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T15:09:06.970

链接已过时。

这是一个指向当前一个好地址的链接。

[https://www.phpdoc.org/docs/latest/references/phpdoc/tags/param.html](https://www.phpdoc.org/docs/latest/references/phpdoc/tags/param.html)

下面，无论如何解释的第一行......

> @param 标签用于记录函数或方法的单个参数。
> 
> 使用@param 标签可以记录函数或方法的单个参数的类型和功能。当提供时，它必须包含一个类型来指示预期的内容；另一方面，描述是可选的，但建议在复杂结构的情况下使用，例如关联数组。

# javascript - ajax 重新渲染时获取新值

> ID：11497920
> 
> 赞同：0
> 
> 时间：2012-07-16T03:56:11.767
> 
> 标签：javascript, jquery, ajax, jsf-2, liferay

我的代码运行良好，但我真的无法清楚地理解它。

有人可以解释一下吗。

这是我的代码：

```
<script type="text/javascript">
    var portletNamespace = '#<portlet:namespace/>\\:formId\\:';
    $(portletNamespace + 'drpCategory').live('change', function () {
        alert('#{myController.simpleString}');
        $(portletNamespace + 'hiddenValue').ready(function () {
            alert($(portletNamespace + 'hiddenValue').val());
        });
    });
</script>

<h:inputText id="hiddenValue" value="#{myController.simpleString}" />

<h:selectOneMenu id="drpCategory">
    <f:selectItem itemLabel="Chọn thủ tục" itemValue="#{null}" />
    <f:selectItems value="#{myController.listCate}" var="item" itemLabel="#{item.cateNane}"
    itemValue="#{item.cateId}" />
    <f:ajax event="valueChange" render="hiddenMap " listener="#{myController.changeCategory}"
    />
</h:selectOneMenu> 
```

在我更改项目后`drpCategory`，javascript首先警告空字符串，然后是实际值`simpleString`。但是如果我删除第一个警报代码，第二个将显示旧值（在由 ajax 呈现之前）

例如，如果我删除第一个警报代码。首先，`hiddenValue`为空，更改`drpCategory`值，`hiddenValue`更改为`'a'`但 javascript alert 为空，第二次更改时`drpCategory`更改`hiddenValue`为`'b'`但仍会显示`'a'`。

**编辑：** 啊，我发现了一些东西，我已经改为：

```
 <script type="text/javascript">
    var portletNamespace = '#<portlet:namespace/>\\:formId\\:';     
    $(portletNamespace+'drpCategory').live('change', function(){
        setTimeout('myFunc()', 500);    

    });

    function myFunc(){
            $(portletNamespace+'hiddenValue').ready(function(){
                alert($(portletNamespace+'hiddenValue').val());
            });
    }
   </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:08:56.933

如果我理解你的情况是正确的..

改变你的

```
<f:ajax event="valueChange" render="hiddenMap " listener="#{myController.changeCategory}"
/> 
```

进入

```
<f:ajax onevent="callThisMethodAfterValueIsUpdated" event="valueChange" render="hiddenMap " listener="#{myController.changeCategory}"
/> 
```

并在你的 js 中添加这个

```
var portletNamespace = '#<portlet:namespace/>\\:formId\\:'; 
function callThisMethodAfterValueIsUpdated(data) {
    if (data.status === 'success') {
        alert($(portletNamespace+'hiddenValue').val());
    }
} 
```

依赖`setTimeout`是错误的，因为它可能会不时改变服务器/流量......

# php - 如何将 curl_exec 添加到数据库中

> ID：11497921
> 
> 赞同：0
> 
> 时间：2012-07-16T03:57:00.510
> 
> 标签：php, mysql, curl

我想使用 PHP 和 cURL 访问 $i 网站并将其源代码添加到数据库中。

```
 function curl_grab_page($site,$proxy,$proxystatus,$post)
  {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    if ($proxystatus == 'on') {
        //curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
        curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
        curl_setopt($ch, CURLOPT_PROXY, $proxy);
    }
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0");
    curl_setopt($ch, CURLOPT_URL, $site);
    ob_start();      
    return curl_exec ($ch); 
    ob_end_clean();
    curl_close ($ch);
} 
```

所以我使用这个函数来获取在 $post 中发送的网站。如您所见，它返回 curl_exec($ch)。现在我想将 curl_exec($ch) 放入数据库。我该怎么做？

$sql = "INSERT INTO 抓取的 ( `website_source`) VALUES ('$str')";

这不起作用（返回 die(); 函数，在这种情况下它显然是一个空白页）。请帮忙。我看不出还有什么办法可以保存网站上的内容。Preg_match 也不适用于 curl_exec。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:08:02.390

假设您实际上是通过 curl 抓取整个页面并将其存储在一个字符串中，您需要通过调用 mysql_real_escape_string() 将其包装起来，以转义所有可能会搞砸 SQL 查询的内容，例如页面中可能存在的引号和分号资源...

```
$str = mysql_real_escape_string($str); 
```

祝你好运。你可能需要调整你的卷曲以获得你认为你得到的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:20:18.243

在您的 curl 响应中，将响应设置为变量，以便您进行故障排除：

```
$output = curl_exec($ch);
$info = curl_getinfo($ch); 
```

然后您可以查看 $output 和 $info 并确定返回的内容。

至于插入数据库，您将在函数中返回您的 $output，调用代码将连接到数据库并执行插入查询。您最有可能希望 website_source 列的字段类型为 TEXT。

```
// get connection to database

// iterate through list of websites to be crawled

// crawl site (call your function)
$page = curl_grab_page(...);

// check if content valid
if...blah

// insert into database
$query = sprintf("INSERT INTO crawled ( website_source ) VALUES '%s'",
        mysql_real_escape_string($page));

mysql_query($query); 
```

您可能希望用 try catch 包围并进行一些错误处理。msyql_real_escape_string 可以防止 sql 注入，但我不确定在插入之前是否还需要使用 addlashes($page) 以防 mysql 失败。

# caching - NSURLCache 在 iOS5 上提供不一致的结果，看似随机

> ID：11497923
> 
> 赞同：11
> 
> 时间：2012-07-16T03:57:09.620
> 
> 标签：caching, ios5, nsurlconnection, nsurlcache

我刚刚花了很长时间在 NSURLCache 上大喊大叫，所以我提供一些建议，希望其他人可以避免我的不幸。

这一切都以合理的方式开始。我的新应用项目只针对 iOS 5 及更高版本，所以我认为我可以利用新的 NSURLCache 实现来满足我所有的 Web 缓存需求。我需要一个 NSURLCache 的自定义子类来处理一些特殊任务，但这一切似乎都得到了 API 的有用支持。快速阅读文档，我开始参加比赛：

```
[NSURLCache setSharedURLCache:[[MyCustomCache alloc] initWithMemoryCapacity:8 * 1024 * 1024 //8mb 
                                                                    diskCapacity:32 * 1024 * 1024 // 32mb 
                                                                        diskPath:@"webcache.db"]]; 
```

我认为 8mb 的缓存可以开始，我会用更大的磁盘缓存来支持它，这样我们就可以在本地提供更多更大的图像。我连接了其余的网络代码以使用 NSURLConnection （实际上，我使用[了 MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)，但结果证明这无关紧要），并期待我的缓存中有很棒的东西。果然，所有应该被缓存的请求都尽职尽责地保存到缓存中，并且当响应从缓存中得到服务时，它们会尽职尽责地快速返回。这是《彭赞斯海盗》的常规制作，在我的网络堆栈中飞来飞去的职责如此之多。

除了没有加起来。可以从缓存中提供服务的请求仍然通过网络发送出去。除非他们不是。**缓存是否实际用于服务请求似乎完全随机且断断续续。**我沮丧地扯下头发，从字面上挖掘一切，试图弄清楚发生了什么。我构建测试应用程序，在各处设置断点，撕开数据包跟踪，阅读互联网上提到 NSURLCache 的每一个字，试验缓存控制标头，注释掉代码，绕过我的子类，甚至煞费苦心地追踪NSURLCache 及其 CFNetworking 朋友的程序集，试图了解其背后的神秘逻辑。我极大地提高了我对 ARM 和 Objective-C 调用约定的了解，并学习了一些关于低级调试的知识，但在真正弄清楚发生了什么方面却一无所获。整件事感觉更像是 Iolanthe 的[噩梦之歌](http://www.youtube.com/watch?v=qA93YkOq7sk)比起海贼王的良性独裁统治，我几乎快要把它全部扔掉了。

**TL/DR 版本： NSURLCache 似乎正在工作，但随机不返回缓存的结果，即使它有可用的结果。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T03:57:09.620

最终，我尝试对我一直在摆弄的所有位进行不同的排列。我将内存和磁盘缓存大小都设置为 8mb。

瞧，所有的怪异都消失了！所有应该被缓存的东西都被保存了。并且所有应该来自缓存的东西都可以在没有网络请求的情况下得到服务。

iOS5 中的 NSURLCache 实现似乎还没有完成。它确实使用了磁盘和内存缓存（不像 iOS4 和更早版本，它只实现了内存缓存），但当请求未命中时，它实际上并没有通过内存缓存传递到磁盘缓存。因此，无论给定的响应是否恰好在正确的时刻出现在内存中，这基本上都是盲目的运气（好吧，盲目的运气受到所有其他网络和缓存使用的影响）。这对于减少设备上的闪存文件 IO 可能很有用，但如果您期望类的行为是合理的，那么这会非常令人讨厌。

因此，伴随着笑声和欢快的舞蹈，我检查了我的两行修复程序并匆忙前往酒吧，最终与 SO（以及一份 Apple 错误报告）分享了这些知识，希望其他人不必经历这个又痛了。

**这个悲惨故事的寓意是：**如果您尝试在磁盘容量大于内存容量的 iOS5 上使用 NSURLCache，就会发生奇怪和邪恶的事情。不要这样做。并避免与魔法仙女为敌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:04:15.313

FWIW 这是我的最终解决方案：

[https://gist.github.com/3245415](https://gist.github.com/3245415)

它需要使用 FMDB，但结果非常好。

# php - 使用 C API 自动插入 Mysql

> ID：11497925
> 
> 赞同：0
> 
> 时间：2012-07-16T03:57:10.883
> 
> 标签：php, mysql, c

我想模拟我的mysql表的更新过程我想每隔一秒以自动方式将数据插入mysql表

这个想法是用支持 sql 请求（或任何其他语言）的 C API 编写一个小循环并执行此循环以将数据插入 mysql 我在这里或其他论坛中阅读了许多主题，但我需要帮助来找到如何实现约束时间（每隔一秒）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:00:05.470

大多数语言都有 sleep() 函数。在循环中 sleep() 一秒钟。PHP：[睡眠（）](http://php.net/manual/en/function.sleep.php) C：[睡眠（）](http://cboard.cprogramming.com/c-programming/111229-how-use-sleep-function.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:59:45.563

当然，这是一种标准的负载测试方法：

```
 while (not done)
 {
      sleep (1);
      mysql.query("insert into table values (blah, blah, blah)");
 } 
```

可能您希望运行该程序的多个实例，并可能`sleep()`根据查询花费的时间来改进使用以使用更高的精度。

# java - 如何编写防止部分匹配的正则表达式

> ID：11497926
> 
> 赞同：0
> 
> 时间：2012-07-16T03:57:43.303
> 
> 标签：java, regex, search, partial

如何构建搜索文本 T 并尝试查找搜索字符串 S 的正则表达式模式。

有2个要求：

1.  S 可以由任何字符组成。
2.  S 可以在字符串中的任何位置，但不能是单词的一部分。

我知道为了逃避特殊的正则表达式字符，我将搜索字符串放在 \Q 和 \E 之间，如下所示：

\EMySearch_String\Q

如何防止在 T 中找到 S 的部分匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:38:50.250

`can't be part of a word`
如果被解释为，您可以这样做
`preceded by start-of-string or space and followed by end-of-string or space`：

```
String s = "3894$75\\/^()";
String text = "fdsfsd3894$75\\/^()dasdasd 22348 3894$75\\/^()";
Matcher m = Pattern.compile("(?<=^|\\s)\\Q" + s + "\\E(?=\\s|$)").matcher(text);
while (m.find()) {
    System.out.println("Found match! :'" + m.group() + "'");
} 
```

这仅打印一个

> 找到匹配！:'3894$75/^()'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T19:01:15.927

我认为您要查找的内容可以通过前瞻和后视轻松解决。[看看这个以获得很好的解释。](http://www.regular-expressions.info/lookaround.html)

然后是一些翻转的布尔值，但您正在前后查看非非空格字符 (\S)。您不想仅仅因为 S 可能位于字符串的开头或结尾而查找空格字符。像这样：

```
(?<!\S)S(?!\S) 
```

# c# - 如何在代码隐藏 C# 的下拉列表中通过 javascript 访问动态生成的选项？

> ID：11497930
> 
> 赞同：-1
> 
> 时间：2012-07-16T03:58:36.250
> 
> 标签：c#, javascript, jquery

好的，我实际上正在使用一个 jQuery 插件，具体来说，它是 DualListBox。

我试图循环在第二个框中添加的选项以获取它们的值，但代码隐藏无法检测到它。我将如何解决这个问题？有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:29:29.927

是的，这是因为服务器端不知道客户端填充了什么（通常这不是视图状态的一部分）。

解决方法是

1.  要么使用隐藏字段，您可以在更改下拉列表（客户端）时填充它并在服务器上检索它
2.  或者您可以在回发时获得值 Request.Form["CONTROL_NAME_HERE"]

希望这可以帮助。

# android - Android工具浏览sqlite文件进行调试

> ID：11497931
> 
> 赞同：1
> 
> 时间：2012-07-16T03:58:40.387
> 
> 标签：android, sqlite

首先，我尝试在 Eclipse 中从 DDMS 获取 SQLite 文件。但是，数据文件夹是空的。
然后，我在谷歌上进行了研究，发现这可能是我的设备没有root。
这是真的吗？
即使我的设备不需要root，还有其他方法可以调试SQlite文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:34:48.573

如果您有数据库文件，那么您可以浏览它。它们是 Morzilla Firefox 的插件，**称为****SQLite** Manager **[。](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/?src=search)**现在您可以导出 sqlite 文件..我的意思是**数据库文件**从**eclipse DDMS**到您的 PC，然后将该文件导入**SQLite经理**..他们你可以看到你所有的*表和数据*用于*调试*目的。这就是我使用的方式。

# jquery - jQuery fadeIn fadeOut 更改图像 src

> ID：11497932
> 
> 赞同：0
> 
> 时间：2012-07-16T03:58:53.323
> 
> 标签：jquery, fadein, fadeout

我正在制作图像映射，并且一直在尝试通过更改图像源来使图像连续淡入和淡出（这很重要）。下面代码的问题在于它只使用最后一个源图像并将其淡入淡出 5 次。我当然希望每个图像都淡入和淡出一次。大脑可能很快就会爆炸。知道我做错了什么。如您所知，我是 jQuery 的菜鸟。感谢帮助。

```
imgArray = Array(
  "img0.png",
  "img1.png",
  "img2.png",
  "img3.png",
  "img4.png"
);

jQuery(document).ready(function() {
  for(i=0; i<5; i++)
     jQuery('#imgHolder').attr('src', imgArray[i]).fadeIn('slow').delay(500).fadeOut('slow')
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:36:38.980

这是您应该使用的代码，在fadeIn 上设置一个回调函数，以对fadeOut 进行排队。

```
jQuery('#imgHolder').attr('src', imgArray[i]).fadeIn('slow', function(){
  $(this).delay(500).fadeOut('slow')
}); 
```

但是像

```
jQuery('#imgHolder').attr('src', imgArray[i]).fadeIn('slow', function(){
   setTimeout(function(){
     $(this).fadeOut('slow')
   },500)
}); 
```

可能更合适。取决于你，真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:53:22.003

我在互联网上的某个地方找到了这个，它成功了：

`for(i = 0; i < 5; i++) {`

 ``newPhoto = 'Image HTML';`

`jQuery("#id").fadeOut('fast').html(newPhoto).stop(true,true).hide().fadeIn();`` 

`}`

我只是无法让任何其他方法起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T04:01:42.793

我可能假设您使用 id 调用了所有图像`imgHolder`所以每个循环都将所有图像的源更改为最后一个。

您应该执行以下操作：

```
$(document).ready(function() {
   $('#imgHolder').each(function(index) {
     $(this).attr('src',imgArray[index]).fadeIn('slow').delay(500).fadeOut('slow');
   });
}); 
```

重要提示：尽量避免使用相同的调用元素`id`，该`id`属性应该是唯一的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T04:11:24.293

fadeIn 和 fadeOut 具有回调函数，例如：

```
$("#imgHolder").fadeIn('slow', function(){
    //$(this) -> $("#imgHolder")
    //do something
}) 
```

//不要使用for循环。</p>

# c++ - Boost 库、序列化和 & 运算符？

> ID：11497933
> 
> 赞同：0
> 
> 时间：2012-07-16T03:58:56.500
> 
> 标签：c++, boost, operator-overloading, boost-serialization

我来自 Java 和 C# 背景，作为深入研究 C++ 的一种方式，我正在使用 Qt 和 Boost 构建一个图标停靠。查看序列化的文档，我偶然发现了 & 运算符的一些有趣用法。

```
class gps_position
{
private:
    friend class boost::serialization::access;
    // When the class Archive corresponds to an output archive, the
    // & operator is defined similar to <<.  Likewise, when the class Archive
    // is a type of input archive the & operator is defined similar to >>.
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & degrees;
        ar & minutes;
        ar & seconds;
    }
    int degrees;
    int minutes;
    float seconds; 
```

& 运算符的目的很清楚阅读评论。我想知道的是，它是如何实现的？它怎么知道“&”应该是什么意思？我在 Google 上搜索了 & 运算符的更多用途，但我能找到的只是 & 用于表示引用而不是操作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:25:18.040

重载按位与的示例：

```
class Archive {
public:
   std::ostream& operator&( std::ostream& out ) {
       return out << to_string();
   }
   std::string to_string() { return "a string"; }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:34:36.507

对于非内置类型，您可以在 C++ 中定义运算符行为。

有关详细信息，请参阅[C++ 常见问题解答](http://www.parashift.com/c++-faq/overview-op-ov.html)。

# iphone - Maps.app 未以编程方式打开

> ID：11497941
> 
> 赞同：1
> 
> 时间：2012-07-16T04:00:32.817
> 
> 标签：iphone, objective-c

```
NSString *url = [NSString stringWithFormat: @"http://maps.google.com/maps?saddr=%f,%f&daddr=%f,%f", currentLocation.latitude, currentLocation.longitude, coordinate.latitude, coordinate.longitude];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

我正在尝试从我的应用程序中打开 iPhone 上的地图应用程序以显示两个位置之间的方向。但是，它在 safari 中显示来自谷歌的书面指示，而不是打开地图应用程序。谁能帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:20:49.570

您**可以**从您的应用程序启动其他应用程序。但是，地图应该响应**http://maps.google.com**架构。通常，**http** ://maps.google.com/应该启动 Maps 应用程序，但我不确定为什么不启动。

地图还支持**`maps://`**URL**`mapitem://`**方案。

## 更新

iOS 模拟器没有**地图**应用程序，所以很明显这在模拟器中是行不通的。虽然在物理设备上按预期工作。

# java - 每帧调用的Java函数

> ID：11497949
> 
> 赞同：2
> 
> 时间：2012-07-16T04:01:37.743
> 
> 标签：java, time, frame, processing, runnable

我想知道是否有一个像[Processing](http://processing.org/)[`void draw()`](http://processing.org/reference/draw_.html)编程语言使用的函数，它在每一帧都被调用。或者甚至只是一个函数，它在被调用时无限循环，但每次有新帧时才会运行它。我听说在java中称为runnable的东西我该如何使用它？还有一种更好的方法，然后有一个具有延迟的可运行对象，例如硬编码以运行每一帧的函数。哦，还有什么函数调用可以让我看到自从应用程序开始运行以来有多少时间（最好是毫秒）在每台计算机上，无论帧速率如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:57:53.887

也许你需要这样的东西

```
import java.awt.Graphics;
import java.awt.Point;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;

public class Repainter extends JPanel {
    private Point topLeft;
    private int increamentX = 5;

    public Repainter() {
        topLeft = new Point(100, 100);
    }

    public void move() {
        topLeft.x += increamentX;
        if (topLeft.x >= 200 || topLeft.x <= 100) {
            increamentX = -increamentX;
        }

        repaint();
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawRect(topLeft.x, topLeft.y, 100, 100);
    }

    public void startAnimation() {
        SwingWorker<Object, Object> sw = new SwingWorker<Object, Object>() {
            @Override
            protected Object doInBackground() throws Exception {
                while (true) {
                    move();
                    Thread.sleep(100);
                }
            }
        };

        sw.execute();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame("Repaint Demo");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(400, 400);

                Repainter repainter = new Repainter();

                frame.add(repainter);

                repainter.startAnimation();
                frame.setVisible(true);
            }
        });
    }
} 
```

# windows-phone-7 - 检查 Wp7 中的可用空间

> ID：11497953
> 
> 赞同：2
> 
> 时间：2012-07-16T04:01:54.377
> 
> 标签：windows-phone-7

我很困惑。这里是文档： http: [//msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.availablefreespace (v=vs.96).aspx](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.availablefreespace(v=vs.96).aspx)

比如说，我需要 3 mb 空间并使用以下代码：

是这家商店吗？AvailableFreeSpace:

1）检查手机的整个存储空间还是主隔离存储中的总存储空间？

2）或检查我的应用程序的空间？

谢谢

```
私人 bool IsSpaceIsAvailable(long spaceReq)        
{            
使用 (IsolatedStorageFile 存储 =IsolatedStorageFile.GetUserStoreForApplication())    
{               
 long spaceAvail = store.AvailableFreeSpace;               
 if (spaceReq > spaceAvail)               
 {                   
 返回假；                
}                
返回真；            
}        
}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:43:32.283

Silverlight for Windows Phone 没有配额。允许单个应用程序占用整个驱动器。引用配额的 API 调用假设您的应用配额为 MAXLONG 或引发异常。

[http://msdn.microsoft.com/en-us/library/ff426930%28VS.95%29.aspx#IsolatedStorage](http://msdn.microsoft.com/en-us/library/ff426930%28VS.95%29.aspx#IsolatedStorage)

# data-structures - 为什么平衡二叉树很重要？

> ID：11497955
> 
> 赞同：11
> 
> 时间：2012-07-16T04:02:08.143
> 
> 标签：data-structures, binary-tree

为什么平衡二叉树很重要

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T04:05:27.073

想象一棵看起来像这样的树：

```
 A
   \
    B
     \
      C
       \
        D
         \
          E 
```

这是一个有效的二叉树，但现在大多数操作都是 O(n) 而不是 O(lg n)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T12:15:45.240

二叉树的平衡由称为偏度的属性控制。如果一棵树更偏斜，那么访问二叉树元素的时间复杂度就会增加。说一棵树

> ```
>  1
>                / \
>               2   3
>               \    \
>                7    4
>                      \
>                       5
>                        \
>                         6 
> ```

上面也是一棵二叉树，但是是右偏的。它有 7 个元素，因此理想的二叉树需要 O(log 7) = 3 次查找。但是在最坏的情况下，您需要再深入一层 = 4 次查找。所以这里的偏度是一个常数 1。但是考虑一下树是否有数千个节点。在这种情况下，偏度将更加显着。所以保持二叉树平衡很重要。

但是，偏度再次成为争论的话题，因为随机二叉树的概率分析表明，[具有 n 个元素的随机二叉树的平均深度为 4.3 log n](http://en.wikipedia.org/wiki/Random_binary_tree)。所以这实际上是平衡与偏度的问题。

更有趣的是，计算机科学家甚至发现了偏度的优势，并提出了一种偏斜的数据结构，称为[skew heap](http://en.wikipedia.org/wiki/Skew_heap)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T04:05:34.713

为确保 log(n) 搜索时间，您需要将每个分支的下层节点总数除以 2。例如，如果你有一棵线性树，从不从根节点分支到叶节点，那么搜索时间将是线性的，就像在链表中一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T04:07:03.563

一棵非常不平衡的树，例如所有节点都链接到左侧的树，这意味着您仍然在找到最后一个节点之前搜索每个节点，这根本不是树的点，并且与链表相比没有任何好处. 与 O(n) 相比，平衡树可以获得更好的搜索时间 O(log(n))。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-02T01:33:39.820

正如我们所知，二叉搜索树上的大多数操作都与树的高度成正比，因此希望保持高度较小。它确保搜索时间严格到 O(log(n)) 的复杂性。

而不是大多数可用的树平衡技术更多地适用于完全完整或接近完美平衡的树木。

最后，您需要树的简单性，并选择最好的二叉树，如红黑树或 avl

# jquery - 为什么删除“+-”会导致整个功能不起作用？

> ID：11497957
> 
> 赞同：-3
> 
> 时间：2012-07-16T04:02:20.523
> 
> 标签：jquery

代码如下所示。

```
$('p:first').toggle(function() {
$(this).animate({'height':'+=150px'}, 2000, 'linear');
}, function() {
$(this).animate({'height':'-=150px'}, 2000, 'swing');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:05:44.780

`+=`如果您通过删除和 将两个属性更改为“150px” `-=`，则切换开关的两侧将动画到相同的高度，因此不会有视觉移动。当您第一次悬停时，它可能会移动到 150 像素，但之后就不会再移动了。

的重点`+=150px`是将 150px 添加到现有高度，无论它是什么。的要点`-=150px`是从现有高度中减去 150px（从而反转先前的添加）。

如果要删除`+=`和`-=`，则需要在切换的两个臂中设置两个不同的高度，以定义要在其之间切换的两个尺寸。

# javascript - Backbonejs 最简单的集合获取

> ID：11497959
> 
> 赞同：0
> 
> 时间：2012-07-16T04:02:27.387
> 
> 标签：javascript, ajax, backbone.js

我正在尝试从使用 Backbone.js 从我的服务器收到的 XML 下载、解析和显示一个列表。代码如下：

```
var Item = Backbone.collection.extend({
    url: "http://myurl.com/file.xml",
    parse: function() {
        console.log("parse");
    },
    success: function(data) {
        console.log(data);
    },
    error: function() {
        console.log("error");
    }
});

var View1=Backbone.view.extend({
    initialize: function() {
        var item = new Item();
        item.fetch();
    }
}); 
```

当我在 Chrome 扩展程序中检查它时，正在下载 XML 文件，但放置在`parse`,`success`中的断点`error`直接落在`error`.

它有 3 个参数，但我无法从中提取任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:37:25.100

Backbone 不支持获取 XML，因此，您需要重写同步方法以提供您自己的自定义解析功能。如果您不想弄乱 Backbone 内部，请先尝试执行 $.ajax GET，将您的响应解析为正确的 JSON 数组，然后将该数组与[Backbone#Collection-reset](http://backbonejs.org/#Collection-reset)一起使用。

[骨干#Collection-fetch](http://backbonejs.org/#Collection-fetch)

> 获取请求的服务器处理程序应返回模型的 JSON 数组。

[骨干#同步](http://backbonejs.org/#Sync)

> 使用默认实现，当 Backbone.sync 发送一个保存模型的请求时，它的属性将被传递，序列化为 JSON，并在 HTTP 正文中以内容类型 application/json 发送。返回 JSON 响应时，向下发送模型的属性已被服务器更改，需要在客户端更新。当响应来自集合 (Collection#fetch) 的“读取”请求时，向下发送一个模型属性对象数组。

# android - IntentReceiver 组件不允许注册接收意图

> ID：11497964
> 
> 赞同：1
> 
> 时间：2012-07-16T04:03:04.057
> 
> 标签：android, service, broadcastreceiver, contentobserver

我正处于开发应用程序的最后阶段，今天当我从“睡眠”中恢复时，我的 Galaxy Nexus（运行 4.0.4）抛出了一条错误消息。电话已经闲置了大约一个小时左右。

不幸的是，我没有写下确切的错误消息，但我能够从 logcat 中提取以下内容。

我的应用程序有一个查看电话意图的 BroadcastReceiver，以及注册一些 ContentObservers 的服务。我在测试应用程序时没有收到错误消息。

有人可以查看 logcat 中的以下错误并帮助我确定我的应用程序是否会导致这些错误吗？

```
 2012-07-15 22:36:57.213 I 8661/ActivityManager: Start proc com.google.android.apps.uploader for broadcast com.google.android.apps.uploader/.ConnectivityBroadcastReceiver: pid=13497 uid=10035 gids={3003}
    2012-07-15 22:36:57.221 I 13497/dalvikvm: Turning on JNI app bug workarounds for target SDK version 11...        
    2012-07-15 22:36:57.245 I 13497/ActivityThread: Pub com.google.android.apps.uploader: com.google.android.apps.uploader.UploadsContentProvider
    2012-07-15 22:36:57.245 I 13497/ActivityThread: Pub com.google.photos.provider.Album: com.google.android.apps.uploader.clients.picasa.AlbumProvider
    2012-07-15 22:36:57.245 D 13497/MediaUploader: UploaderApplication.onCreate
    2012-07-15 22:36:57.260 D 13497/MediaUploader: nonWifiLimit=20971520, default=20971520
    2012-07-15 22:36:57.260 I 13497/MediaUploader: No need to wake up
    2012-07-15 22:36:57.268 D 9772/PicasaSyncManager: active network: NetworkInfo: type: WIFI[], state: CONNECTED/CONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true
    2012-07-15 22:36:57.268 D 9772/PicasaSyncManager: background data: true
    2012-07-15 22:36:57.268 I 8661/ActivityManager: No longer want com.android.voicedialer (pid 9435): hidden #16
    2012-07-15 22:36:57.291 I 13103/DMApp: Constructor()
    2012-07-15 22:36:57.291 I 13103/DMApp: onCreate...... 
    2012-07-15 22:36:57.315 I 13103/SyncmlService: onBind 
    2012-07-15 22:36:57.370 I 13497/MediaUploader: No need to wake up
    2012-07-15 22:36:57.370 D 9772/PicasaSyncManager: active network: NetworkInfo: type: WIFI[], state: CONNECTED/CONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true
    2012-07-15 22:36:57.370 D 9772/PicasaSyncManager: background data: true
    2012-07-15 22:36:57.682 D 8661/ConnectivityService: handleInetConditionHoldEnd: net=1, condition=100, published condition=100
    2012-07-15 22:36:59.166 D 8861/IMSFW: ImsSMSInterface$1: EVENT_DEREGISTER_DONE_TIMEOUT occured
    2012-07-15 22:36:59.174 D 8861/IMSFW: IIL: Instantiaing IIL 
    2012-07-15 22:36:59.174 D 8861/AndroidRuntime: Shutting down VM

    2012-07-15 22:36:59.174 W 8861/dalvikvm: threadid=1: thread exiting with uncaught exception (group=0x40a4f1f8)
    2012-07-15 22:36:59.182 E 8861/AndroidRuntime: FATAL EXCEPTION: main
    android.content.ReceiverCallNotAllowedException: IntentReceiver components are not allowed to register to receive intents
    at android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:116)
    at android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:110)
    at com.sec.android.internal.ims.sms.SMS3GPP.smsrelaylayer.SmsRLInterface.<init>(SmsRLInterface.java:126)
    at com.sec.android.internal.ims.sms.SMS3GPP.smsrelaylayer.SmsRLInterface.getInstance(SmsRLInterface.java:86)
    at com.sec.android.internal.ims.sms.SMS3GPP.smsrelaylayer.RLMessageQueue.<init>(RLMessageQueue.java:65)
    at com.sec.android.internal.ims.sms.SMS3GPP.smsrelaylayer.RLMessageQueue.getInstance(RLMessageQueue.java:57)
    at com.sec.android.internal.ims.sms.SmsImsDispatcher.<init>(SmsImsDispatcher.java:77)
    at com.sec.android.internal.ims.sms.SmsImsDispatcher.getInstance(SmsImsDispatcher.java:85)
    at com.sec.android.internal.ims.sms.ImsSMSInterface.postIMSRegStatus(ImsSMSInterface.java:811)
    at com.sec.android.internal.ims.sms.ImsSMSInterface$1.handleMessage(ImsSMSInterface.java:287)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)

    2012-07-15 22:36:59.190 D 8861/IMSFW: IIL: Connected to '7467' socket
    2012-07-15 22:36:59.190 E 8861/IIL: Uncaught exception 
    java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
    at android.os.Handler.<init>(Handler.java:121)
    at com.sec.android.internal.ims.sms.SmsImsDispatcher.<init>(SmsImsDispatcher.java:64)
    at com.sec.android.internal.ims.sms.SmsImsDispatcher.getInstance(SmsImsDispatcher.java:85)
    at com.sec.android.ims.IIL.notifySocketConnection(IIL.java:316)
    at com.sec.android.ims.IIL.access$100(IIL.java:28)
    at com.sec.android.ims.IIL$IILReceiver.run(IIL.java:381)
    at java.lang.Thread.run(Thread.java:856) 
```

**编辑**

这是我所有与`Receiver`s 相关的代码。我从来没有真正打电话`registerReceiver`。为了验证，我在 Eclipse 中运行了一个 FileSearch 来寻找`registerReceiver`.

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myproject" android:versionCode="1" android:versionName="1.0">
    <uses-permission android:name="android.permission.READ_CONTACTS"></uses-permission>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>

    <application android:icon="@drawable/ic_icon" android:label="@string/app_name" android:theme="@android:style/Theme.Light">
        <activity android:name=".CallListActivity"
                  android:label="@string/app_name" 
                  android:theme="@android:style/Theme.Light"
                  android:configChanges="orientation"
            android:launchMode="singleTop">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>        

    <receiver android:name="MyPhoneReceiver">
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" />
            <action android:name="com.myproject.MY_ACTION" />
        </intent-filter>
    </receiver>
        <service android:name=".MyService" />
</manifest> 
```

这是我的服务：

```
public class MyService extends Service {

    private static MyContentObserver mContentObserver;
    private static ContactContentObserver mContactContentObserver;
    private Context mCtx;
    public int onStartCommand(Intent intent, int flags, int startId) {
        try {
            if(mContentObserver == null) {
                mContentObserver = new MyContentObserver();

                mCtx = this.getApplicationContext();
                mCtx.getContentResolver().registerContentObserver(CallLog.Calls.CONTENT_URI, true, mContentObserver);
            }

            mCtx = this.getApplicationContext();
            if(mContactContentObserver == null) {
                mContactContentObserver = new ContactContentObserver();
                this.getApplicationContext().getContentResolver().registerContentObserver(ContactsContract.Contacts.CONTENT_URI, true, mContactContentObserver);
            }
        }
        catch (Exception e) {
        }
        return START_STICKY;
    }

        public IBinder onBind(Intent intent) {
        // We don't provide binding, so return null
        return null;
    }

    public void onPause() {
    }

    public void onDestroy() {
        try {
            if(mContentObserver != null)
                this.getApplicationContext().getContentResolver().unregisterContentObserver(mContentObserver);

            if(mContactContentObserver != null)
                this.getApplicationContext().getContentResolver().unregisterContentObserver(mContactContentObserver);
            super.onDestroy();
        }
        catch (Exception e) {
        }
    }

    private class MyContentObserver extends ContentObserver {
        public MyContentObserver() {
            super(null);

        }

            @Override
        public void onChange(boolean selfChange) {
            try {

                Intent intent = new Intent();
                intent.setAction("com.myproject.MY_ACTION");
                sendBroadcast(intent);
                super.onChange(selfChange);
            }
            catch (Exception e) { 
            }
        }
    }

    private class ContactContentObserver extends ContentObserver {
        public ContactContentObserver() {
            super(null);

        }

        @Override
        public void onChange(boolean selfChange) {

            super.onChange(selfChange);

            try {

                ContactUpdateTask updateContactsTask = new ContactUpdateTask(mCtx);
                updateContactsTask.execute(null);
            }
            catch (Exception e) { 
            }

        }

        private class ContactUpdateTask extends AsyncTask<Void, Void, Void> {
            private Context mCtx;

            private ContactUpdateTask(Context _ctx) {
                mCtx = _ctx;

            }
            protected Void doInBackground(Void... arg0) {
                try {

                 // DB stuff
            }
                catch (Exception e) { 
                }
                return null;

            }

            protected void onProgressUpdate(Void... arg0) {
                switch (mType) {
                }
            }

            protected void onPostExecute(Void arg0) {
                publishProgress((Void)null);

            }
        }
    }

} 
```

这是我的广播接收器：

```
public class MyPhoneReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        try {
            Bundle extras = intent.getExtras();

            if (extras != null) { // Intent == android.intent.action.PHONE_STATE            

                //DB stuff
                if (something)
                    flag = false;
                else
                    flag = true;
            }
            else if (flag){
                try {
                    // DB Stuff
                }
                catch (Exception e) {
                }

                try {
                    // DB Stuff
                }
                catch (Exception e) {
                }
                Intent startActivity = new Intent();
                startActivity.setClass(context, NewActivity.class );
                startActivity.setAction(NewActivity.class.getName());
                startActivity.setFlags(
                        Intent.FLAG_ACTIVITY_NEW_TASK |
                        Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
                context.startActivity(startActivity);

            }
        }
        catch (Exception e) {

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:04:07.583

所以......事实证明，我无意中通过同时按下音量（向上和向下）和电源来创建调试报告。

当我不使用我的应用程序时，我已经开始关闭设备上的调试模式，并且报告已停止生成。

我很可能与我的应用程序无关的错误。

以下是 google 生成调试报告页面的链接：http: [//support.google.com/mobile/bin/request.py ?&src=6279961&contact_type=android_bugreport](http://support.google.com/mobile/bin/request.py?&src=6279961&contact_type=android_bugreport)

# assembly - 装配冒泡排序交换

> ID：11497966
> 
> 赞同：0
> 
> 时间：2012-07-16T04:03:22.970
> 
> 标签：assembly, x86, bubble-sort

我正在尝试在 x86 程序集中进行冒泡排序（是的，它必须是冒泡的，因为我不关心关于不同类型排序的速度优化），并且由于某种原因，我的代码不会交换必要的值。这是我的代码

```
mov eax, list                   ;store list in eax
mov edx,[eax+4*edi-4]           ;temp = var1
cmp edx,[eax+edi*4]             ;compare
JLE SECOND_LOOP                 ;jump if var1 < var2
mov [eax+4*edi-4],[eax+edi*4]   ;var1 = var2
mov [eax+edi*4], edx            ;var2 = temp
jmp SECOND_LOOP 
```

在它应该将临时加载回地址的最后一条 mov 指令中，它..没有。EAX 寄存器具有包含我的值列表的数组的起始地址

```
0x*starting address* 0a 00 00 00 ec ff ff ff 05 00 00 00 0c 00 00 00 1e 00 00 00 fb ff ff ff ea
0x*address after   * ff ff ff 37 00 00 00 34 00 00 00 00 00 00 00 
```

下一个地址包含更多的数字。在十进制中，数字是`10 -20 5 12 30 -5 -22 55 52 0`。基本上现在我正在尝试移动`FFFFFFEC`到`0000000A`然后移动`0000000A`到`FFFFFFEC`. 我可以将它存储到我的临时寄存器 EDX 中，但不能将 EDX 的值存储到特定地址中。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:29:15.703

我想我会使用指向列表中当前位置的指针，而不是每次使用时都需要缩放的索引：

```
 mov esi, offset list
top:
    mov edi, esi
inner:
    mov eax, [edi]
    mov edx, [edi+4]
    cmp eax, edx
    jle no_swap
    mov [edi+4], eax
    mov [edi], edx
no_swap:
    add edi, 4
    cmp edi, list_end - 4
    jb inner
    add esi, 4
    cmp esi, list_end - 4
    jb top 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:35:44.737

这部分代码：

```
mov edx,[eax+edi*4]
mov [eax+edi*4], edx 
```

实际上不会改变内存中的任何内容，它从内存中读取一个值并将其写回它刚刚从中获取的位置。

顺便说一句，您可能对`xchg`说明感兴趣。

# drupal-7 - 投票完成后禁用 Drupal 7 五星级小部件

> ID：11497973
> 
> 赞同：3
> 
> 时间：2012-07-16T04:05:16.557
> 
> 标签：drupal-7, userpoints, fivestar

公司，

我是drupal的新手。我在我的 Intranet 站点中使用 Drupal 7、五星级、用户点和投票规则模块。我使用规则模块创建了新规则，根据登录用户提供的评分（星数等）向内容作者奖励积分。这工作正常。

但问题是，每当登录用户点击五星级小部件时，就会触发一个事件，并且内容作者会根据定义的规则获得积分。为了解决这个问题，我想在登录用户单击一次五星级小部件后禁用五星级小部件。我们怎样才能做到呢？您能否建议如何实现这一目标？

我正在使用的模块的版本详细信息如下。

五星 7.x-2.0-alpha2

投票 API 7.x-2.6

用户点 7.x-1.0

投票规则 7.x-1.0-alpha1

规则 7.x-2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T21:51:56.177

您必须向规则添加条件，例如“如果用户尚未对内容投票”。或许您可以仅使用规则接口来实现这一点，否则您将不得不对五星 API 进行一些研究，以验证用户对特定节点的投票。希望有帮助！

# vim - 如何将当前行传递给 Vimscript 函数？

> ID：11497978
> 
> 赞同：19
> 
> 时间：2012-07-16T04:05:36.400
> 
> 标签：vim

我正在尝试创建一个将在当前行上运行的 Vim 映射，采用如下字符串：

```
[boiled cabbage, mad donkey, elephant, very dark fudge] 
```

并引用所有列表元素以结束：

```
["boiled cabbage", "mad donkey", "elephant", "very dark fudge"] 
```

我尝试使用 vim 正则表达式，但认为编写一个将当前行作为参数并返回转换后的行的函数会更容易。我在 vimscript 中执行转换没有问题。但是如何将当前行传递给函数，以及如何用转换后的行替换该行？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-16T04:11:22.173

要获取当前行，您可以使用

```
let line=getline('.') 
```

（注意：您也可以`getline(10, 20)`获取 11 行的列表）。

要设置当前行，您可以使用

```
call setline('.', line) 
```

. 如果您将列表传递给此函数，您还可以替换以 current 开头的许多行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T05:10:05.027

您可以将其拉入寄存器，然后从那里访问它。`byy`拉动光标所在的行。然后您可以使用它来访问它`@b`

查看[http://vim.wikia.com/wiki/Word_under_cursor_for_command](http://vim.wikia.com/wiki/Word_under_cursor_for_command)

# c++ - 是否可以在 Mac 上将 C++ 代码编译为 .exe？

> ID：11497983
> 
> 赞同：4
> 
> 时间：2012-07-16T04:06:14.607
> 
> 标签：c++, macos, terminal, g++, exe

不久前我买了一台二手 Macbook，我一直在 Sublime Text 2 中进行编码，并在终端中使用 g++* 进行编译。我写了一个愚蠢的文本冒险，我想发送给朋友，如果可能的话，我想知道 Mac 上是否有任何方法可以编译为 exe，类似于我一直在编译我的代码的方式（即仅与终端）。

我知道简单的解决方案是在 Windows 计算机上编译 .cpp 文件，但我的计算机一直在房间的另一边。

谢谢。

*这样做是因为在 Snow Leopard 上并且太紧而无法购买 OSX Lion 或 Apple 开发人员许可证来访问 Xcode。如果有人遇到同样的问题，那么我在这里找到了这个解决方案（[https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)和[http://cims.clayton.edu/csci1301/how_to/compiling_c_on_a_mac.htm](http://cims.clayton.edu/csci1301/how_to/compiling_c_on_a_mac.htm)）。让你绕过苹果的废话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T04:14:42.483

是的，这是可能的，它被称为交叉编译。除了为此构建自己的工具链之外，您还可以使用 MinGW：使用 MinGW 进行[交叉编译](http://crossgcc.rts-software.org/doku.php#compiling_for_win32_on_mac_os_x)

# liferay - 如何在 Liferay 中的 2 个不同的 portlet 之间共享一个属性文件？

> ID：11497992
> 
> 赞同：2
> 
> 时间：2012-07-16T04:08:01.250
> 
> 标签：liferay, portlet

我想创建一个通用属性文件，可以在 Liferay 中的 2 个 portlet 之间共享。或者更确切地说，它可以放在哪里，以便所有 portlet 都可以访问同一个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T06:46:16.193

如果您在同一个 WAR 中有两个 portlet，那么您可以在portlet 的`WEB-INF/src`文件夹中为这两个 portlet 提供一个公共属性文件，并使用`com.liferay.util.portlet.PortletProps`如下类访问它：

```
PortletProps.get("propertyName") 
```

如果您的 portlet 打包在单独的 WAR 中，那么您必须将属性放入`portal-ext.properties`并使用`com.liferay.portal.util.PropsUtil.get("propertyName")`.

# c - 使用 C 构建一个框架，并让它有一些未来，比如 erlang

> ID：11497995
> 
> 赞同：0
> 
> 时间：2012-07-16T04:08:35.967
> 
> 标签：c, frameworks, erlang

我使用 sigsetjmp/siglongjmp 来更改 progame 堆栈。这是演示：

```
#include <stdio.h>
#include <stddef.h>
#include <setjmp.h>
#include <stdlib.h>
#include <signal.h>
#include <string.h>
#include <unistd.h>
#define POOLSIZE 4096
int active = 0;
int total = 0;

struct thread
{
    int tid;
    sigjmp_buf env;
    char buf[4096];
    int state;
    ssize_t size;
};

struct thread *thread_pool = 0L;
char* anchor_beg = 0L;
char* anchor_end = 0L;
void(*new_thread)(int) = 0L;

void sig_call(int sig)
{
    char anchor;
    anchor_end = &anchor;
    if(sigsetjmp(thread_pool[active].env, 0) == 0)
    {
        thread_pool[active].size = anchor_beg - anchor_end;
        memcpy(thread_pool[active].buf, anchor_end, thread_pool[active].size);
        siglongjmp(thread_pool[0].env, 1);
    }
    else
    {
        memcpy(anchor_beg - thread_pool[active].size, thread_pool[active].buf, thread_pool[active].size);
    }
}

void thread_new(void(*pfn)(int))
{
    alarm(0);
    new_thread = pfn;
    thread_pool[0].state = 2;
//    printf("create new thread:%d\n", total + 1);
    raise(SIGUSR1);
}

void test(int thread)
{
    int i = 0; 
    for(;i != 1000000; i++)
    {
    }
}

void thread_main(int thread)
{
    int i = 0;
    for(i = 0; i < 4000; i++)
        thread_new(test);
}

void call(void(*pfn)(int))
{
    active = ++ total;
    thread_pool[active].tid = active;
    thread_pool[active].state = 1;
    ualarm(500, 0);
    pfn(active);
    thread_pool[active].state = 0;
}

void dispatcher()
{
    thread_pool = (struct thread*)malloc(sizeof(struct thread) * POOLSIZE);
    char anchor;
    anchor_beg = &anchor;
    thread_pool[0].tid = 0;
    thread_pool[0].state = 1;
    if(sigsetjmp(thread_pool[0].env, 0) == 0)
    {
        signal(SIGUSR1, sig_call);
        signal(SIGALRM, sig_call);

        call(thread_main);
    }
    else if(thread_pool[0].state == -1)
    {
        return;
    }
    else if(thread_pool[0].state == 2)
    {
        thread_pool[0].state = 1;
        call(new_thread);
    }

    while(1)
    {
        int i, alive = 0;
        for(i = 1; i <= total; i++)
        {
            if(thread_pool[i].state == 1)
            {
                alive ++;
                ualarm(500, 0);
                active = thread_pool[i].tid;
                siglongjmp(thread_pool[i].env, 1);
            }
        }
        if(alive == 0)
            return;
    } 

}

int main()
{
    dispatcher();
} 
```

这里有什么问题吗？当我想调用一些第三方接口时，也许它是一个块 I/O，我可以做些什么来改变另一个上下文来执行吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:07:30.407

不幸的是，您尝试做的事情不起作用，因为（根据`setjmp`手册）：

```
 The longjmp() routines may not be called after the routine which called
 the setjmp() routines returns. 
```

这是因为`setjmp`/`longjmp`系列函数（包括`sig`变体）不保留进程堆栈的全部内容。