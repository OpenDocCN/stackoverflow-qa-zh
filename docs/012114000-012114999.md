# StackOverflow 问答 12114000-12114999

# ios - 在 xcode 中编译 Titanium (Appcelerator) 应用程序会产生警告和错误

> ID：12114006
> 
> 赞同：0
> 
> 时间：2012-08-24T17:24:42.783
> 
> 标签：ios, xcode, compilation, titanium, appcelerator

我目前正在使用带有 Xcode 4.2 和 Titanium v​​ 2.1.1 的 OSX Snow Leopard。我按照这个问题安装了 iOS 5.1.1 Sdk：[How to get iOS 5.1 SDK on Snow Leopard](https://stackoverflow.com/questions/9613565/is-is-possible-to-get-the-ios-5-1-sdk-for-use-with-xcode-4-2-on-snow-leopard)。

但是，当我尝试从 Xcode 中的 Titanium 工作室构建生成的 xcode 项目文件时，我收到一大堆警告。见图片。我已将 Xcode 中的应用程序的基本 sdk 目标设置为 5.0。在 Google 或他们的论坛上找不到太多内容。

![从钛项目构建 Xcode 中的错误](../Images/cfd3e392375c3a28d3ebc23ba82237fe.png)

我尝试创建一个新项目并复制资源的内容，但仍然收到这些警告。有没有更好的方法，当然还有修复？我需要在这个周末完成这个应用程序，这让我担心应用程序商店会拒绝它。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:31:22.990

不幸的是，这就是 Titanium 项目的样子。如果你的应用程序正在编译并且你没有收到**错误**，你应该认为自己很开心。

App Store 不会拒绝您的应用，因为它有警告。他们甚至不会看到这一点。您会收到编译警告，并且它们在您发送给 Apple 的二进制文件中不可见。

# javascript - 在其他图像下使用javascript将图像插入html

> ID：12114012
> 
> 赞同：0
> 
> 时间：2012-08-24T17:25:03.533
> 
> 标签：javascript, html, move, layer

我正在用javascript编写游戏，我希望我的角色在块（等距png图像）下移动，而不是简单地滑过它们。有没有办法在他上下移动层时动态改变我的角色在 html 中的位置？

可以在这里看到游戏的当前进度，以显示我想要修复的内容：http: [//dl.dropbox.com/u/18785762/Rust/index.html](http://dl.dropbox.com/u/18785762/Rust/index.html)

角色创建和移动代码：

```
function mainchar(){
    var mainchar = new Image();
    mainchar.id = "mainChar";
    mainchar.src = "Images/Char_01.png";
    mainchar.style.top = "62px";
    mainchar.style.left = "0px";
    mainchar.style.position = "absolute";

    window.addEventListener("keydown", movechar);

    document.body.appendChild(mainchar);
}

function movechar(e){
    var event = event || e;

    var mainChar = document.getElementById("mainChar");

    var top = Number(mainChar.style.top.replace("px",""));
    var left = Number(mainChar.style.left.replace("px",""));
    var stepSize = 32;           

    switch (event.keyCode){
        case 37:
        case 65: //left
            left = left -27;
            top = top -13;
        break;
        case 39:
        case 68: // right
            left = left + 27;
            top = top +13;
        break;
        case 38:
        case 87: // up
            left = left +27;
            top = top -13;
        break;
        case 40:
        case 83: // down
            left = left -27;
            top = top +13;
        break;    
    }

    mainChar.style.top = top + "px";
    mainChar.style.left = left + "px";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:41:29.100

简单：应该在字符前面的每个块都应该在 css 中有一个大于字符的 z-index（默认为`z-index: 0`）

因此，只需为您想要位于顶部的块提供一个 css 属性：`z-index: 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:15:08.693

[http://jsfiddle.net/yRyLN/1/](http://jsfiddle.net/yRyLN/1/)

我修改了以下内容：

基本概念是距离最低块每一步，z-index 增加 1。您现在需要做的就是添加一些碰撞检测。好玩的东西！

```
function drawlayer(level, depth) {
    var images = BlockID();

    var top = depth;
    var left = sidecalc(level);
    var mytop = top;
    var myleft = left;
    var y;
    for (y=0; y<level.length; ++y) {
        var row = level[y];
        var x;
        for (x=0; x < row.length; ++x) {
            var c = row.charAt(x);
            if(c != ' ') {
                console.log(mytop + "," + myleft);
                img_create(images[c], mytop, myleft, y + x);
            }
            mytop += 13;
            myleft += 27;
        }
        mytop = top + (y+1)*13;
        myleft = left - (y+1)*27;
    }
}

function img_create(src, top, left, zIndex) {
    console.log(top + "," + left);
    var block = new Image();
    block.src = src;
    block.style.top = top + "px";
    block.style.left = left + "px";
    block.style.position = "absolute";
    block.style.zIndex = zIndex;
    document.body.appendChild( block );
}
function mainchar(){
    var mainchar = new Image();
    mainchar.id = "mainChar";
    mainchar.src = "http://dl.dropbox.com/u/18785762/Rust/Images/Char_01.png";
    mainchar.style.top = "62px";
    mainchar.style.left = "0px";
    mainchar.style.position = "absolute";
    mainchar.style.zIndex = 0;
    window.addEventListener("keydown", movechar);

    document.body.appendChild(mainchar);
}

function movechar(e){
    var event = event || e;

    var mainChar = document.getElementById("mainChar");

    var top = Number(mainChar.style.top.replace("px",""));
    var left = Number(mainChar.style.left.replace("px",""));
    var stepSize = 32;           
    var zIndex = Number(mainChar.style.zIndex);

    switch (event.keyCode){
        case 37:
        case 65: //left
            left = left -27;
            top = top -13;
            zIndex -= 1;
        break;
        case 39:
        case 68: // right
            left = left + 27;
            top = top +13;
            zIndex += 1;
        break;
        case 38:
        case 87: // up
            left = left +27;
            top = top -13;
            zIndex -= 1;
        break;
        case 40:
        case 83: // down
            left = left -27;
            top = top +13;
            zIndex += 1;
        break;    
    }

    mainChar.style.zIndex = zIndex;
    mainChar.style.top = top + "px";
    mainChar.style.left = left + "px";
} 
```

**编辑：http :** [//jsfiddle.net/yRyLN/2/](http://jsfiddle.net/yRyLN/2/)

修复了一个小的分层问题。

# ruby - Simple_form：删除带有标签的内联复选框的外部标签

> ID：12114014
> 
> 赞同：37
> 
> 时间：2012-08-24T17:25:06.457
> 
> 标签：ruby, ruby-on-rails-3, simple-form

使用 Simple_form 2.0.2

使用 HAML 的简单表单代码：

```
= f.input :remember_me, as: :boolean, inline_label: 'Remember me' 
```

但它呈现了这一点：

```
<div class="control-group boolean optional">
  <label class="boolean optional control-label" for="admin_remember_me">Remember me</label>
  <div class="controls">
    <input name="admin[remember_me]" type="hidden" value="0" />
    <label class="checkbox"><input class="boolean optional" id="admin_remember_me" name="admin[remember_me]" type="checkbox" value="1" />Remember me</label>
  </div>
</div> 
```

如何删除呈现的第一个标签，以便我只有内联标签？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-27T19:48:54.277

您可以使用：

```
= f.input :remember_me, as: :boolean, inline_label: 'Remember me', label: false 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-24T18:33:48.357

经过大量的 Google fu 找到了解决方案。

使用`input_field`而不是`input`不会自动生成标签。

```
= f.input_field :remember_me, as: :boolean, inline_label: 'Remember me' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-09-20T09:50:02.710

对谁不起作用

> = f.input_field ...

使用这种方式

> = f.check_box ...

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-02-12T05:28:07.383

使用 simple_form 2.1.0 和 rails 3.0.20，此处列出的解决方案均无效（我不想使用 f.input_field，因为它承认失败）。

缺少的部分是**boolean_style**选项：

```
options.merge!({label: false, boolean_style: :inline}) 
```

我建议您为此创建一个自定义输入（例如：inline_checkbox）

boolean_style 默认配置为 :nested，我认为：

```
# Defaults to :nested for bootstrap config.
#   :inline => input + label
#   :nested => label > input
config.boolean_style = :nested 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T21:17:45.833

```
.control-group.error .help-inline {
  display: none;
} 
```

这应该有效，它适用于 rails 3.2 和 simple_form 2.x+

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-10T15:33:10.633

也许为时已晚，但受到 gamov 回答的启发，我已经从初始化文件“ **config/simple_form_bootstrap.rb** ”中的内联引导复选框中将其作为自定义包装器：

```
config.wrappers :horizontal_radio_and_checkboxes, tag: 'div', class: 'form-group', error_class: 'has-error' do |b|
   b.use :html5
   b.optional :readonly

   b.use :label, class: 'col-sm-3 control-label'
   b.use :input
   b.use :error, wrap_with: { tag: 'span', class: 'help-block' }
   b.use :hint,  wrap_with: { tag: 'p', class: 'help-block' }
 end 
```

生成这个html：

```
 <div class="form-group boolean optional user_admin">
    <label class="boolean optional col-sm-3 control-label" for="user_admin">Admin</label>
    <div class="col-sm-9 checkbox-inline">
    <input name="user[admin]" value="0" type="hidden">
    <input class="boolean optional" id="user_admin" name="user[admin]" value="1" type="checkbox">
  </div> 
```

# android - 尝试将片段添加到我的片段容器 FrameLayout

> ID：12114015
> 
> 赞同：26
> 
> 时间：2012-08-24T17:25:06.940
> 
> 标签：android, android-layout, android-fragments, android-framelayout

我创建了一个名为 editor.xml 的 xml 文件，其中包含一个 FrameLayout。在我的主要活动中，我试图将我的自定义片段添加到我的 FrameLayout。

尝试添加片段时收到的错误是：

FragmentTransaction 类型中的方法 add(int, Fragment) 不适用于参数 (int, editorFrag)

但是我的 editorFrag 扩展了 Fragment 所以我对为什么会发生这种情况感到困惑。下面是我提到的文件的代码。任何帮助表示赞赏。

编辑器.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/fragment_container"
android:layout_width="match_parent"
android:layout_height="match_parent" /> 
```

editorFrag.java

```
public class editorFrag extends Fragment
{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) 
    {

        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.newlevel, container, false);
    }
} 
```

MainActivity.java

```
public class editorActivity extends FragmentActivity
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.editor);

        // Check that the activity is using the layout version with the fragment_container FrameLayout
        if(findViewById(R.id.fragment_container) != null)
        {
            // if we are being restored from a previous state, then we dont need to do anything and should
            // return or else we could end up with overlapping fragments.
            if(savedInstanceState != null)
                return;

            // Create an instance of editorFrag
            editorFrag firstFrag = new editorFrag();

            // add fragment to the fragment container layout
            getSupportFragmentManager().beginTransaction().add(R.id.fragment_container, firstFrag);
        }
    } 
} 
```

回答：

Luksprog 通过告诉我检查我的进口来为我回答了这个问题。Eclipse 选择导入 Fragment 的 SDK 版本，而不是我需要的支持版本。感谢您的帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-24T17:29:07.087

You forgot to `commit()` your transaction.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-17T23:09:35.480

您也忘记调用该`addtoBackStack()`方法，否则您的应用会在您点击后退按钮时关闭。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-18T11:00:45.133

像这样添加 commit()

```
 getSupportFragmentManager().beginTransaction().add(R.id.fragment_container, firstFrag).commit(); 
```

# python - Django模板语言 - 从列表中删除项目

> ID：12114017
> 
> 赞同：6
> 
> 时间：2012-08-24T17:25:10.217
> 
> 标签：python, django, django-templates

只是一个简单的问题：有没有办法从 Django 模板语言的列表中删除一个项目？

我有一种情况，我正在遍历一个列表，并在另一个列表中打印第一个项目。打印第一项后，我想将其从该列表中删除。

见下文：

```
{% for item in list1 %}
     {{list2.0}}
     #remove list2.0 from list2
{% endfor %} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T17:58:34.507

If your list1 and list2 are indeed lists and not querysets, this seems to work:

```
{{ list2 }}  {# show list2 #}
{% for item in list1 %}
    {{ list2.0 }}
    {# remove list2.0 from list2 #}
    {{ list2.pop.0 }}
{% endfor %}
{{ list2 }}  {# empty #} 
```

Note that `pop` does not return in this case, so you still need {{ list2.0 }} explicitly.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:34:52.093

如果可能的话，我会尝试过滤掉视图中的项目。否则，您可以在 for 循环中添加 if 或 if not 语句。

```
{% for item in list%}
    {% if item.name != "filterme" %}
        {{ item.name }}
    {% endif %}
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:42:55.487

你不能删除一个项目，但你可以得到没有某个项目的列表（在一个恒定的索引）

```
{% with list2|slice:"1:" as list2 %}
...
{% endwith %} 
```

当然，嵌套规则也适用，等等。

一般来说，我发现自己在进行复杂的数据结构操作，只需将其移至 Python - 它会更快更清洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T17:45:20.357

没有这样的内置模板标签。我了解您不想打印`list2`if`list1`的第一项不为空。尝试：

```
{% for item in list1 %}
     {{list2.0}}
     ...
{% endfor %}

{% for item in list2 %}
     {% if list1 and forloop.counter == 1 %}
         # probably pass
     {% else %}
         {{ item }}
     {% endif %}
{% endfor %} 
```

这不是在模板中操作列表内容的好主意。

# c++ - G++ 和 __attribute__((optimize)) 不会改变调试器的行为

> ID：12114019
> 
> 赞同：5
> 
> 时间：2012-08-24T17:25:17.823
> 
> 标签：c++, gcc

我正在尝试使用与`__attribute__`其余代码不同的标志来编译一个函数。例如：

```
#include <iostream>
#include <vector>

void MyNormalFunction();

void MyDebugabbleFunction() __attribute__((optimize(0)));

void MyNormalFunction()
{
  std::cout << "Test" << std::endl;

  std::vector<int> a;

  for(unsigned int i = 0; i < 10; ++i)
  {
    a.push_back(i);
  }
}

void MyDebugabbleFunction()
{
  std::cout << "Test" << std::endl;

  std::vector<int> a;

  for(unsigned int i = 0; i < 10; ++i)
  {
    a.push_back(i);
  }
}

int main()
{
  MyNormalFunction();
  MyDebugabbleFunction();
  return 0;
} 
```

我正在使用 -g -O2 进行构建，但我希望能够进行合理的调试`MyDebugabbleFunction()`——所以我`__attribute__((optimize(0)))`在它的声明中使用了。但是，在使用调试器单步执行这两个函数时，我真的看不出任何区别。我希望在尝试单步执行优化代码时通常会看到“看似不稳定”的行为`MyNormalFunction`，但在`MyDebuggableFunction`.

是我做错了`__attribute__`什么吗？或者我在两个函数中使用了糟糕的演示代码（即没有得到“优化很多”的代码）？还是我误解了调试器中应该有什么区别？

我正在使用 gcc 4.6。

* * *

根据 GManNickG 的建议进行编辑

我改用此代码，并使用 -O2 -g 构建：

```
#include <iostream>
#include <vector>

int MyNormalFunction();

int MyDebugabbleFunction() __attribute__((optimize(0)));

int MyNormalFunction()
{
  int val = 0; // breakpoint here - debugger does NOT stop here
  val = 1;
  val = 2;
  return val;
} // debugger stops here instead

int MyDebugabbleFunction()
{
  int val = 0;  // breakpoint here - debugger stops here and steps through the next 3 lines as if it were built with only -g
  val = 1;
  val = 2;
  return val;
}

int main()
{
  int a = MyNormalFunction();
  std::cout << a << std::endl;

  int b = MyDebugabbleFunction();
  std::cout << b << std::endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:43:48.460

试试这样的测试：

```
int MyNormalFunction()
{
    int val = 0;
    val = 1;
    val = 2;

    // should optimize to return 2
    return val;
}

int MyDebuggableFunction() __attribute__((optimize(0)));
{
    int val = 0;
    val = 1;
    val = 2;

    // could optimize to return 2, but attribute blocks that
    return val;
}

int main()
{
    // we need to actually output the return values,
    // or main itself could be optimized to nothing
    std::cout << MyNormalFunction() << std::endl;
    std::cout << MyDebuggableFunction() << std::endl;
} 
```

这将使它更容易跟随。

* * *

请注意`main`，在逐步执行时，您应该从 开始，因为它很可能会简化为：

```
int main()
{
    std::cout << 2 << std::endl;
    std::cout << MyDebuggableFunction() << std::endl;
} 
```

如果你愿意的话，看看拆解会让这项任务变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:47:53.327

修复代码中的错误后，编译：

```
g++ -S x.c

_Z16MyNormalFunctionv:
.LFB1255:
    .cfi_startproc
    movl    $2, %eax
    ret

_Z20MyDebuggableFunctionv:
.LFB1256:
    .cfi_startproc
    movl    $0, -4(%rsp)
    movl    $1, -4(%rsp)
    movl    $2, -4(%rsp)
    movl    -4(%rsp), %eax
    ret 
```

如您所见，优化属性运行良好。

# java-ee-6 - Java EE 6 如何更改 web.xml 文件的默认位置？

> ID：12114023
> 
> 赞同：0
> 
> 时间：2012-08-24T17:25:39.247
> 
> 标签：java-ee-6, web.xml

我打算为我的 Java EE 6 应用程序使用自定义目录结构。如何在保持项目正常运行的同时进行此更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:31:14.100

您不能覆盖此位置，它在规范中是“硬编码”的。[Servlet 规范 3.0](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/)说：

> ## 10.5 目录结构
> 
> 目录的内容`WEB-INF`是：
> 
> *   `/WEB-INF/web.xml`部署描述符。

其他地点仅此而已。

# jquery - 如何将元素添加到我的 jquery 变量

> ID：12114026
> 
> 赞同：0
> 
> 时间：2012-08-24T17:25:47.293
> 
> 标签：jquery

我正在尝试将元素添加到如下变量

```
$tooltipElement = $('#' + tooltipId);

//I want to edit p element inside the tooltipElement variable.
$tooltipElement.//<p>.css('font-size':'15'); 
```

我怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:26:46.380

[`.find`](http://api.jquery.com/find)：

```
$tooltipElement.find('p').css('font-size', '15'); 
```

另外，你的意思是`15px`？

# r - 如何在 R 的 ggplot2 中设置“零”方向？

> ID：12114028
> 
> 赞同：7
> 
> 时间：2012-08-24T17:25:50.060
> 
> 标签：r, ggplot2

在我的代码中，读取数据以绘制极坐标图图像。但是“0 / 360”在顶部。如何将其向右旋转 90 度？

```
ggplot(polar, aes(x=angle, y=distance )) + coord_polar(start=0) + geom_point() +
  scale_x_continuous(breaks=seq(0, 360, by=30), expand=c(0,0), lim=c(0, 360))+
  scale_area() 
```

此处描述了完整的过程和生成的图形：http: [//keveting.blogspot.tw/2012/08/r-ggplot2-code.html](http://keveting.blogspot.tw/2012/08/r-ggplot2-code.html)

的文档[`coord_polar`](http://docs.ggplot2.org/current/coord_polar.html)：

> start ：在弧度方向上从 12 点偏移：1，顺时针；-1，逆时针

所以我尝试了

```
ggplot(polar, aes(x=angle, y=distance)) + 
  coord_polar(***start = 90, direction = -1***) +
  geom_point() + scale_x_continuous(breaks=seq(0, 360, by=30), expand=c(0,0),
  lim=c(0, 360)) + scale_area() 
```

但它仍然没有按照我想要的方式将绘图向右旋转 90 度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T19:24:54.603

我想这就是你要找的：

```
ggplot(polar, aes(x=angle, y=distance)) + 
  coord_polar(start = 1.57, direction=1) + geom_point() + 
  scale_x_continuous(breaks=seq(0, 360, by=30), expand=c(0,0), lim=c(0, 360)) +
  scale_area() 
```

![在此处输入图像描述](../Images/7d0327d7f0b8315d67f8269673825da9.png)

正如`coord_polar`文档链接所说，是以**弧度**`start`（不是度数）为单位的偏移量，您希望顺时针旋转它（so ）。**`direction=1`**

# javascript - 在 this 的相同原型和上下文中从另一个函数调用一个函数

> ID：12114032
> 
> 赞同：0
> 
> 时间：2012-08-24T17:26:21.927
> 
> 标签：javascript, bind, prototype

为了保持 DRY 原则，我决定修改函数的原型以减少 function.call() 调用的数量。

以下是我目前拥有的内容的片段，并进一步说明了我正在尝试做的事情。

```
com.domain.$ = function(s){
     if(!this){return new com.domain.$(s);}

    this.selector = s;
    this.elements = document.querySelectorAll(s);
}

com.domain.$.prototype = (function(){
    function exe(f){
        var e = this.elements,
            el = e.length;
        for(var i=0; i<el; i++){
            f(e[i]);
        }
    }

    function addClass(c){exe.call(this,function(el){el.classList.add(c);});}
    function removeClass(c){exe.call(this,function(el){el.classList.remove(c);});}
    function toggleClass(c){exe.call(this,function(el){el.classList.toggle(c);});}

    return {
        addClass:addClass,
        removeClass:removeClass,
        toggleClass:toggleClass
    }
}()); 
```

我意识到这看起来很像我试图模仿 jQuery 的功能。虽然是有意的，但这并不意味着作为替代品，而是为了更好地理解 JavaScript。

也就是说，我想做的是消除调用`exe()`via的需要`exe.call(this[, fnc]);`，以便使上下文`this`成为我想要的。我相信我可以通过函数绑定 ( `.bind()`) 来做到这一点，尽管可能不是我想要的方式。我知道可以改为执行以下操作：

```
com.domain.$.prototype.exe = function(){} 
```

并称之为：

```
function addClass(c){this.exe(function(){});} 
```

但是，这样做时，我失去了`exe()`原始代码中闭包提供的私有可见性。如果可能的话，我想保持原样。

那么，我的问题是，是否有可能`exe()`在我的原始代码中进行绑定，从而减少对 的冗余使用，为within`exe.call(this`拥有正确的上下文，并在闭包中保持私有可见性？`this``exe()`

如果这似乎是我想要完成的一个糟糕的实现，我很乐意考虑其他选择。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:30:00.293

不，你不能，因为在你定义的那一刻`exe()`，你想要调用的实例`exe()`还不存在。

事实上，如果您要多次调用`com.domain.$`，您将使用不同的实例，因此绑定到*特定*`exe()`实例是没有意义的。`exe()`

 *如果你想这样做，你必须在构造函数中定义所有这些方法，你会失去原型的所有优点：

```
(function() {
    function exe(f){
        // ...
    }

    com.domain.$ = function(s){
        // ...

        var exe_ = exe.bind(this);
        this.addClass = function(c) {
             exe_(function(el){el.classList.add(c);});
        };
        // ...
    };
}()); 
```

我建议，如果您不想使用`.call`，只需进行修改`exe()`，以便它接受一个元素数组作为参数并`this.elements`从原型函数传递给它。我不明白为什么`exe()`需要使用`this`。它只是一个将数组的每个元素传递给给定函数的助手，并且通过使其更通用，它更容易重用。
例如：

```
var com.domain.$ = (function(o) {
    function exe(arr, f){
        var el = e.length;
        for(var i=0; i<el; i++){
            f(arr[i]);
        }
    }

    var $ = function(s){
         // ...
    }

    $.prototype.addClass = function(c){
        exe(this.elements, function(el){
            el.classList.add(c);
        });
    };
    // ... 

    return $;
}()); 
```*

# java - Java类包含批处理作业的业务逻辑

> ID：12114033
> 
> 赞同：0
> 
> 时间：2012-08-24T17:26:27.963
> 
> 标签：java, spring

我有一个大`xml`文件，我想在特定时间段从`c:`驱动器传输到驱动器。`d:`

我想设计一个 Java 类来执行`batch job`. 这意味着 java 类将像批处理作业一样工作，它将`xml`从 c: 驱动器中选择文件并将其在特定时间发送到 d: 驱动器。我希望在文件中完成其他时间设置和文件位置`xml`规范其余的 java 类将包含业务逻辑。

请告知如何实现这一点，也请让我知道任何可能提供任何帮助的框架，如 Spring 或 Spring Integration、Spring Batch..！

我对春季批次更感兴趣！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:34:14.627

我建议使用您的操作系统调度程序来实现这一点。将您的*业务逻辑*以任何您想要的方式放入 Java 代码中，但在 windows 上使用 windows 调度程序进行调度，在 unix 上使用 cron。

如果您也绝对需要 Java 作为调度程序，请查看[Quartz](http://www.quartz-scheduler.org/)。

---- 使用 Windows 调度程序 ----

首先，创建一个批处理文件来启动您的 java 代码：

myjavarunner.bat：

```
java -classpath <myclasspath> com.silly.project.ClassWithMainMethod <arguments> 
```

这不是绝对必要的，但是在使用 java 时，通常要容易得多。然后，创建一个计划任务。单击开始按钮 -> 控制面板 -> 管理工具 -> 任务计划程序。单击操作菜单 -> 创建任务。填写所有表格，然后撕掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:29:44.627

A simple start would be using a [Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html) to schedule the periodic job and a [TimerTask](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html) to implement the business logic.

# rest - Tomcat 间 webapp http 通信

> ID：12114034
> 
> 赞同：3
> 
> 时间：2012-08-24T17:26:33.320
> 
> 标签：rest, tomcat, web-applications, resttemplate

给定在同一个 Tomcat 6 上运行的两个 Web 应用程序。如果您从一个应用程序到另一个应用程序进行 http 调用，Tomcat 会“短路”这个调用，还是会在调用 home 之前一直在 interwebz 上消失？

@thomasz 答案表明需要更多细节。我们正在使用 Springs RestTemplate 进行通信。它的可插入架构允许您提供自己的 ClientHttpRequestFactory。

是否有可能实现一个 ClientHttpRequest ，如果请求是对本地主机的，它可以说服 tomcat 在内部处理它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:38:41.957

不，请求将通过所有层，包括环回接口。Tomcat 不会以不同的方式处理对同一个 Web 容器的请求。毕竟，如何？您正在通过`URLConnection`or`HttpClient`或原始套接字访问某些 URL 或... - Tomcat 必须以某种方式拦截（检测）您的应用程序代码，并用某些内部调用动态替换 HTTP 调用。可能，但非常复杂。

更糟糕的是，在高负载下很容易导致死锁或饥饿。想象一下，您的 Tomcat 工作线程池有 10 个线程，同时您从 10 个并发用户访问同一个 servlet。现在每个 servlet 都尝试连接到同一个 Web 容器，但工作线程池已耗尽。所以所有这些 servlet 都是阻塞的，等待空闲的工作线程。但这永远不会发生，因为他们正在占领他们所有人！

# php - 如何删除此意外的 T_ELSE 解析错误

> ID：12114039
> 
> 赞同：-2
> 
> 时间：2012-08-24T17:26:48.727
> 
> 标签：php, mysqli

我正在使用 php 和 mysqli 来选择数据并将其插入数据库。我遇到的唯一问题是我遇到了解析错误。这是当我尝试获取`$stmt`然后使用`$numrows`变量计算行数时。

有人可以帮助我并告诉我我需要做什么来消除解析错误吗？

我已将我的代码粘贴在这个[小提琴中](http://codepad.viper-7.com/sbFq7H)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:31:30.243

您只需要确保所有 if-else 括号都已关闭。他们似乎不在这个花瓶里。就像其他评论者所说，在所有情况下都使用括号是很好的做法，而不仅仅是在 if 而不是 else 周围使用它们。这将导致这样的问题。此外，适当的缩进将使您在遇到此类问题时更容易识别这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:40:15.093

当您尝试使用 if ... else 时没有正确嵌套或缺少一个，就会出现此错误。

在第 121 行的代码中，您调用了没有 if 的 else。在此之前关闭你的 if 。

```
**Line2** if ( (strlen($getemail) >= 7) && (strstr($getemail, "@")) && (strstr($getemail, ".")) )
         {
          //your cod
**Line 120** }
**Line 121**  else
          {
            $errormsg = "There is already a User with that Teacher ID"; 
           } 
```

# linux - 本地 P2P 库/协议

> ID：12114051
> 
> 赞同：0
> 
> 时间：2012-08-24T17:27:26.100
> 
> 标签：linux, p2p, broadcast, multicast, lan

任何人都可以推荐一个本地 P2P 库或 linux 协议吗？

我正在寻找仅限于 LAN 的 P2P 解决方案，用于分发我在我的应用程序中定期更新的单个文件 (5-300M)。我试图避免上游互联网的使用，尽可能减少本地网络上相同数据的重新传输，并避免任何用户配置。

各种站点的范围在 2 到 5000 个需要参与共享的客户之间，并且一些网络是公司的。许多用户是无线的，并且会随机断开/断开网络。通过从远程 Web 服务器下载数据，任何客户端都可以成为种子，但我正在尝试尽量减少这样做的客户端数量（以尽量减少客户端上游带宽，而不是我的服务器）。

我可以自己为此构建一个解决方案，但如果可能的话，我宁愿重用现有的库/协议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:18:22.970

我会看看[JGroups](http://www.jgroups.org/)和[Hazelcast](http://www.hazelcast.com/)

# php - Ajax 返回 false 以形成

> ID：12114054
> 
> 赞同：2
> 
> 时间：2012-08-24T17:27:40.093
> 
> 标签：php, javascript, ajax, forms

嗨，我希望在用户注册我的网站时检查我的数据库，以确保他们选择的用户名不存在，如果它确实让他们知道。我下面的代码不起作用，尽管无论我做什么并且表单总是提交，ajax 中的返回似乎都没有返回到我的表单中。为什么会这样？感谢您的任何帮助

**HTML**

```
<form name="signup" action="Test1.php" onsubmit="return checkUser();" method="get">
Username: <input type="text" name="user" />
<input type="submit" value="Submit" />
</form> 
```

**Javascript**

```
<script type="text/javascript" src="jquery-1.7.1.min.js"/></script>
<script type="text/javascript">
    function checkUser(){
        var userV = document.signup.user.value;
        $.ajax({
            url: "Test.php",
            type: "POST",
            data: {user:userV},
            success: function (response) {
                if(response=="0"){
                    //Username already exists notify user
                    return false;
                }else{
                    return true;
                }
            }
        });
    }
</script> 
```

**测试.php**

```
<?PHP
    $user = $_POST['user'];
    if($user=="test"){
        die("0");
    }else{
        die("1")
    }
?> 
```

**测试1.php**

```
<?PHP
    echo "Form submitted";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:40:32.533

您将`return`值放入`success`ajax 调用的回调中，该回调的执行会延迟到服务器应答。

`onsubmit="return checkUser();"`期望函数中有一个`true`或`false`值`checkUser()`：

```
function checkUser(){

   if( stuff )
      return true;
   else
      return false;

} 
```

无论如何，这是一个整体不好的方法，因为它依赖于侵入式 javascript。更好的解决方案是将所有客户端逻辑移出标记：

**HTML**

```
<form name="signup" action="Test1.php" method="get">
    <label for="_user">Username:</label><input type="text" name="user" id="_user"/>
   <input type="submit" value="Submit" />
</form> 
```

**JS**

```
<script>
// wrapping the code in a $(function(){ ... }); call delays its execution till document is loaded
$(function(){

$('form[name="signup"]').on('submit', function(event){

    // this prevents browser from actually following form url
    event.preventDefault();

    // a reference to the form to get used inside ajax callback
    var form = this;

    $.ajax({
         url: $(form).attr('action'),
         type: "POST",
         data: {user:$(form.user).val()},
         success: function (response) {
             if(response=="0"){

                alert('User exists!');

             }else{

                alert('User does not exist!');

             }
         }
     });

});

});
</script> 
```

警报将是给用户的正确消息，或更复杂的验证 - 这只是为了举例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:33:12.367

你`false`在回调中返回，那太“晚”了，因为它会在请求完成时被调用。考虑将显式`e.preventDefault()`或添加`return false`到您的函数中。目前，它将返回`undefined`，因为您已`return`在“内部”函数中定义了该语句。

当然，您随后需要手动导航到目标页面。

或者将调用的参数显式`async` [设置](http://api.jquery.com/jQuery.ajax/)为.`$.ajax()``false`

# git - 用于推送和覆盖代码的 Git 命令

> ID：12114055
> 
> 赞同：2
> 
> 时间：2012-08-24T17:27:41.477
> 
> 标签：git

我如何推送我使用 git 的代码而不向我抱怨冲突或任何事情。我希望它忽略冲突，只需将我们的 git 服务器上的内容替换为我正在推送的代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:32:49.753

添加`-f`.

请注意，这会吹走其他人的代码。

# phpmyadmin - WAMP 服务器 phpmyadmin 不工作

> ID：12114056
> 
> 赞同：1
> 
> 时间：2012-08-24T17:27:44.443
> 
> 标签：phpmyadmin, mysqli, wamp, php

到目前为止，我的 WAMP 服务器安装一直运行良好，但已开始引发 phpMyAdmin 错误。

当我去 localhost/phpmyadmin/ 我得到

```
phpMyAdmin - Error
The mysqli extension is missing. Please check your PHP configuration. 
<a href="Documentation.html#faqmysql" target="documentation">
<img src="themes/dot.gif" title="Documentation" alt="Documentation" class="icon ic_b_help" /></a> 
```

我已经两次和三次检查了 extension=php_mysqli.dll 是否未注释，并在更改 php.ini 后多次重新启动所有 WAMP 服务。

此外，我尝试了全新安装的 WAMP 服务器，它产生了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:36:09.933

原来我必须从以前的安装中删除 PHPRC 环境变量：系统属性 > 高级 > 环境变量 > 系统变量

# payment-gateway - 贝宝向商家提供的用户信息

> ID：12114059
> 
> 赞同：0
> 
> 时间：2012-08-24T17:27:51.743
> 
> 标签：payment-gateway, paypal, payment, paypal-ipn

我想知道贝宝是否向使用贝宝支付网关处理支付的商家提供以下信息：

1.  用户的电子邮件地址。
2.  在贝宝注册的用户的全名。
3.  使用贝宝注册的用户的帐单地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:12:30.737

这取决于您使用的产品，但我假设您使用的是 Express Checkout。

1.  是的，这包含在 IPN 数据以及 GetExpressCheckoutDetails 和 GetTransactiondetails API 响应中。
2.  是的，这包含在 IPN 数据以及 GetExpressCheckoutDetails 和 GetTransactiondetails API 响应中。
3.  不，除非您是一个非常大的商家并且对此有真正的业务需求，否则它将在 GetExpressCheckoutDetails API 响应中可用。

# c# - SharpDX 将 2D 多边形渲染到屏幕外位图

> ID：12114070
> 
> 赞同：2
> 
> 时间：2012-08-24T17:28:51.193
> 
> 标签：c#, directx, sharpdx

我想知道使用 DirectX（最好是 SharpDX）将多边形渲染到与 WPF 兼容的 BitmapSource 的最佳方法是什么？

我必须在屏幕外将数万个像这样的多边形渲染到 BitmapSource，然后将其包含在 WPF 应用程序中，并且需要尽可能快的方法来完成它。渲染必须在屏幕外执行，以便稍后在 WPF 图像中显示或导出到文件。

![在此处输入图像描述](../Images/8dde7f1ac47275709553e0bc10478d61.png)

（不是实际大小。多边形大小范围从 16x16 到 24x24 像素）

欢迎任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:05:40.957

WPF 具有自己的渲染形状的能力，并且使用 DirectX 来实现这一点，因为 DirectX 是 WPF 背后的基础技术。这是一些在 WPF 中使用 SharpDX 的示例代码的链接。

[http://directx4wpf.codeplex.com/](http://directx4wpf.codeplex.com/)

# php - 改进 if 语句的 php 代码

> ID：12114079
> 
> 赞同：1
> 
> 时间：2012-08-24T17:29:17.977
> 
> 标签：php, cakephp-2.0

我有这个代码

```
if(!array_key_exists('key1', $_POST)){
    $_POST['key1'] = null;
}
if(!array_key_exists('key_x', $_POST)){
    $_POST['key_x'] = null;
}
if(!array_key_exists('key_polar_8', $_POST)){
    $_POST['key_polar_8'] = null;
}
if(!array_key_exists('nilak', $_POST)){
    $_POST['nilak'] = null;
} 
```

写这个是更好或更短的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T17:33:03.447

您可以将字段名称放在一个数组中，然后使用循环。

```
$keys = array('key1', 'key_x', 'key_polar_8', 'nilak');
foreach($keys as $k){
    if(!array_key_exists($k, $_POST)){
       $_POST[$k] = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T17:33:37.827

**编辑：** 另一种创造性的方式：不是`array_key_exists`每次都检查是否，只需找到那些键`array_diff_key`并放置`null`。

```
$posted_keys = array("key1" , "key2" , "nilak");
$not_in_post = array_diff_key($posted_keys, $_POST);
foreach($not_in_post as $k)
  $_POST[$k] = null; 
```

（想听听你对这个的看法）

循环为王。

```
$posted_keys = array("key1" , "key2" , "nilak");
foreach($posted_keys as $key)
{
  if(!array_key_exists($key , $_POST))
  {
   $_POST[$key] = null;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:46:35.503

只是为了提供另一种方式，不一定是最好的，但您可以像这样使用 array_merge：

```
<?php
$defaultValues = array('key1'=>null, 'key_x'=>null, 'key_polar_8'=>null, 'nilak'=>null);
$_POST = array_merge($defaultValues, $_POST); 
```

[http://codepad.viper-7.com/ix0KTD](http://codepad.viper-7.com/ix0KTD)

如果您的帖子数组具有数字键，则可能会遇到小问题，因为 array_merge 会附加数字键。不过，这通常不是 $_POST 的问题。

这也允许将任何值设置为默认值，而不仅仅是 null。

# android - SharedPreferences couldn't rename file to backup file

> ID：12114084
> 
> 赞同：1
> 
> 时间：2012-08-24T17:29:54.147
> 
> 标签：android, android-emulator, sharedpreferences

I have a problem with `SharedPreferences`. Everything was working fine until I added Android SDK 2.x to Eclipse. Since then there seems to be an error with the SharedPreferences. The error shows up in LogCat:

```
W/Attempt to read preferences file /data/data/com.app.app/shared_prefs/com.app.app_preferences.xml without permision
E/Couldn't rename file /data/data/com.app.app/shared_prefs/com.app.app_preferences.xml to backup file /data/data/com.app.app/shared_prefs/com.app.app_preferences.xml.bak 
```

I don't know the direct cause of this. This bug happens on the emulator and on the phone.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:01:15.220

我遇到了同样的问题在测试时，我删除了应用程序并重新安装了新版本这个技巧对我有用

# c++ - std::shared_ptr 之间的区别 和类型^

> ID：12114087
> 
> 赞同：1
> 
> 时间：2012-08-24T17:30:12.380
> 
> 标签：c++, c++11, windows-runtime, c++-cx

我不太明白 shared_ptr 和 C++/CX 中的新句柄符号 (^) 之间的区别。从我读过的内容来看，他们似乎在引用计数和内存管理方面做同样的事情。我错过了什么？

```
std::shared_ptr<Type>
//vs
Type^ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T18:05:17.810

仅考虑生命周期管理，它们是相同的： a`shared_ptr<T>`持有对`T`对象的强（拥有）引用；a`T^`也一样。 `make_shared<T>`大致相当于`ref new T`在 C++/CX 中。

如果你在任何地方看到`T^`你认为的`shared_ptr<T>`or`ComPtr<T>`或`CComPtr<T>`，那没关系 - 生命周期管理大致相同。

但是，生命周期管理在底层的工作方式是不同的：每种格式正确的`T`类型`T^`都是实现`IUnknown`接口的 Windows 运行时引用类型，因此`T`对象是内部引用计数^((*))。 `shared_ptr<T>`支持任意类型并使用外部引用计数（即，它分配自己的引用计数机制来控制对象的生命周期）。

对于弱引用，`shared_ptr<T>`has`weak_ptr<T>`和`T^`has `WeakReference`。 `WeakReference`不是强类型的，但您可以轻松地围绕它编写强类型的引用包装器。否则，弱引用会按照您的预期工作。对弱引用的支持是可选的：并非所有引用类型都支持弱引用，但大多数都支持。

^((*) 有一个例外： `Platform::String^`，它不是 Windows 运行时引用类型，但出于各种原因被特殊处理。`T^`不过，在生命周期管理方面，您可以认为它与任何其他方法相同。)

* * *

那么，为什么 Windows 运行时类型在 C++/CX 中戴帽子呢？为什么不喜欢`shared_ptr<T>`或`ComPtr<T>`使用图书馆解决方案？

这是因为您永远不会真正拥有指向具体运行时类型的指针（或帽子）：您只能通过指向其类型实现的接口之一的指针与对象交互。Windows 运行时也不支持接口或类继承：每个接口都必须直接派生自`IInspectable`，并且类继承是通过使用 COM 聚合来模拟的。

简而言之，没有库解决方案可以生成具有静态类型安全性的自然 C++ 代码。函数调用、派生到基的转换和接口转换通常需要调用来`QueryInterface`获取正确的接口指针。

您可以使用库解决方案（例如，参见 WRL 库或几乎任何 COM 代码）来做到这一点，但您不能支持 C++ 语言功能，如隐式转换或`dynamic_cast`. 没有帽子，您将只能处理接口指针并且不得不调用`QueryInterface`自己。

* * *

(If you're interested in the rationale behind *why* the C++/CX language extension were developed and how the C++/CLI syntax ended up being selected for reuse, I'd recommend Jim Springfield's post on this blog from last year, ["Inside the C++/CX Design"](http://blogs.msdn.com/b/vcblog/archive/2011/10/20/10228473.aspx). Also of note is [episode 3 of GoingNative](http://channel9.msdn.com/Shows/C9-GoingNative/GoingNative-3-The-CCX-Episode-with-Marian-Luparu), in which Marian Luparu discusses C++/CX.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:34:13.363

据我所知，后者缺乏对~~弱引用和~~自定义释放函数的支持。

请注意，前者更通用，接受任何类型（原则上），并且为了安全和清洁要求使用辅助函数`make_shared`。后者在语言级别上得到支持。这意味着这样的代码在 C++/CX 中是安全的：

```
some_function(ref new foo(), ref new bar()); 
```

在 C++ 中，您需要这样做：

```
// bad: if foo is allocated but bar's allocation throws, you leak!
some_function(new foo(), new bar());

// good: both never make it anywhere but into a shared_ptr, no leaks
some_function(make_shared<foo>(), make_shared<bar>()); 
```

除此之外，当然，它们实现了相同的概念。如果您在 C++/CX 领域，请使用后一种语法以简化和统一；如果您尝试使用标准 C++，或者将现有资源管理方案包装到引用计数方案中，那么您将需要前者。

# ios - 在ios中的圆柱体表面粘贴多个图像并滚动它

> ID：12114093
> 
> 赞同：0
> 
> 时间：2012-08-24T17:30:26.297
> 
> 标签：ios, image, scroll, cylindrical

我需要一个滚动视图，其中多个图像以圆柱形方式排列，并且在滚动时，图像应该像玻璃杯上的图像一样旋转。杯子应稍微倾斜，以便也可以看到背面的图像。我尝试为此使用 iCarousel，但图像不卷曲并且倾斜不起作用。由于我的图像较大，因此它必须很重要。

在搜索时，我遇到了使用 OpenGL 的图像变形。它可以用来创造想要的效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:51:55.067

通过使用 iCarousel 圆柱形布局，我已经达到了预期的效果。我将这些图像剥离成多个图像条，并将其添加到轮播视图中并管理间距以获得圆柱体的完整性。它像宝石一样工作。

# angularjs - 使用 .getJSON() 填充 $scope

> ID：12114094
> 
> 赞同：11
> 
> 时间：2012-08-24T17:30:28.053
> 
> 标签：angularjs

我最近开始使用 Angular.js，并且得到了一个运行良好的演示项目。但是，当我尝试从后端 Web 服务而不是硬编码数组加载数据时，我开始挂断电话。具体来说，在我使用 $.getJSON().done(...) 设置 $scope 后，页面似乎没有正确绑定数据。在 .getJSON 完成后，我应该在其他地方/不同的地方做，而不是仅仅为 $scope 分配一个值？我搜索了高低，真的找不到任何从后端提取初始数据的角度的好例子。

提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T18:20:42.563

由于您正在尝试更新 Angular 的外部，因此您必须使用范围上的[$apply](http://docs.angularjs.org/api/ng.$rootScope.Scope#$apply)方法来`$scope`更改模型。

也许是这样的：

```
 $.getJSON('ajax/test.json', function(data) {
        $scope.$apply(function(){
            $scope.modelData = data;
        });
    }); 
```

使用 AngularJS 访问后端的首选方法是使用[$http](http://docs.angularjs.org/api/ng.$http)或[$resource](http://docs.angularjs.org/api/ngResource.$resource)服务代替 jQuery。你不必使用`$scope.$apply`你可以直接更新你的`$scope.modelData`。

[这篇文章](http://groups.google.com/d/msg/angular/kqFrwiysgpA/eB9mNbQzcHwJ)很好地更新了[Angular](http://jsfiddle.net/johnoscott/dgW73/2/)代码之外的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T19:19:22.850

或者不是用apply包装，而是在回调函数的末尾调用它，比如

```
 $.getJSON('ajax/test.json', function(data) {
    $scope.data = data;        
    $scope.$apply();
}); 
```

# java - 如何使用 ProGuard？

> ID：12114096
> 
> 赞同：8
> 
> 时间：2012-08-24T17:30:35.420
> 
> 标签：java, command-line, proguard

我正在尝试学习如何使用[ProGuard](http://proguard.sourceforge.net/)，但这并不像我想象的那么容易。一开始我找了一个简单的Java代码试了一下，一个简单的[二类Swing计算器](http://www.leepoint.net/notes-java/examples/components/calculator/calc.html)。

可以通过该链接找到代码，但我发现它太冗长，无法在此处发布。无论如何，它是一个入口点 on 的普通应用程序，`Calc.main()`没有包。

然后我编译了这两个源：

```
$ javac *.java 
```

并创建了`.jar`文件（因为 ProGuard 似乎只适用于 jars）：

```
$ jar cvef Calc calc.jar *.class
added manifest
adding: Calc.class(in = 3869) (out= 2126)(deflated 45%)
adding: Calc$ClearListener.class(in = 468) (out= 327)(deflated 30%)
adding: CalcLogic.class(in = 1004) (out= 515)(deflated 48%)
adding: Calc$NumListener.class(in = 1005) (out= 598)(deflated 40%)
adding: Calc$OpListener.class(in = 1788) (out= 1005)(deflated 43%) 
```

编写了名为的 ProGuard 文件`obfuscate.pro`：

```
-injars       calc.jar
-outjars      calc_obf.jar
-libraryjars  <java.home>/lib/rt.jar

-keep public class Calc extends javax.swing.JFrame {
public static void main(java.lang.String[]);
} 
```

最后运行 ProGuard：

```
$ ~/progs/proguard/proguard4.8/bin/proguard.sh @obfuscate.pro
ProGuard, version 4.8
Reading program jar [/home/lucas/tmp/calc.jar]
Reading library jar [/usr/lib/jvm/java-7-openjdk-i386/jre/lib/rt.jar]
Error: The output jar is empty. Did you specify the proper '-keep' options? 
```

嗯，显然没有用。我厌倦了使用 ProGruard 参数，特别是那些`-keep`选项，但没有成功。我在与我的问题相关的文档中找到的所有内容都无法帮助我。那我求助于你……怎么了？怎么做才对？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:39:21.933

我使用以下配置文件让它工作：

```
-injars       calc.jar
-outjars      calc_obf.jar
-libraryjars  <java.home>/lib/rt.jar
-keep class Calc {
  public static void main(java.lang.String[]);
} 
```

最值得注意的是，我放弃`public`了`class Calc`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T19:15:25.537

我也遇到过类似的问题，通过去掉 Java 修饰符来解决。

Java 修饰符（例如可见性修饰符）在 ProGuard 配置文件 -keep 选项（以及相关选项 -keepclassmembers 等）中是可选的

来自手册：-keep [,modifier,...] class_specification

因此，除非有特殊原因，否则您可以将它们排除在外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-15T16:01:41.053

这是gradle的解决方案

1.  创建一个可运行的 jar，将所有依赖库复制到目录“dependencies”，并在清单中添加类路径。

    ```
    task createJar(type: Jar) {
       println("Cleaning...")
       clean
       manifest {
       attributes('Main-Class': 'com.abc.gradle.hello.App',
         'Class-Path': configurations.default.collect { 'dependencies/' + 
          it.getName() }.join(' ')
          )
       }
       from {
          configurations.compile.collect { it.isDirectory() ? it : zipTree(it) 
          }
       } with jar
       println "${outputJar} created"
       } 
    ```

2.  复制依赖项

    ```
    task copyDepends(type: Copy) {
      from configurations.default
      into "${dependsDir}"
    } 
    ```

3.  使用 Proguard 混淆库

    ```
    task proguard(type: proguard.gradle.ProGuardTask) {
       println("Performing obfuscation..")
       configuration 'proguard.conf'
       injars "${outputJar}"
       outjars "${buildDir}/libs/${rootProject.name}_proguard.jar"
       libraryjars "${System.getProperty('java.home')}/lib/rt.jar"
       libraryjars "${dependsDir}"
     } 
    ```

这是完整的 build.gradle

```
buildscript {
 repositories {
    mavenCentral()
 }
 dependencies {
    classpath 'net.sf.proguard:proguard-gradle:6.0.3'
    classpath 'net.sf.proguard:proguard-base:6.0.3'
 }
}

plugins {
 id 'java'
 id 'application'
}

repositories {
  mavenCentral()
}

dependencies {
   implementation 'org.slf4j:slf4j-api:1.7.30'
   implementation 'ch.qos.logback:logback-classic:1.2.3'
   implementation 'ch.qos.logback:logback-core:1.2.3'
   testImplementation 'junit:junit:4.13'
}

def outputJar = "${buildDir}/libs/${rootProject.name}.jar"
def dependsDir = "${buildDir}/libs/dependencies/"
def runnableJar = "${rootProject.name}_fat.jar";

task copyDepends(type: Copy) {
 from configurations.default
 into "${dependsDir}"
}

task createJar(type: Jar) {
 println("Cleaning...")
 clean
 manifest {
    attributes('Main-Class': 'com.abc.gradle.hello.App',
            'Class-Path': configurations.default.collect { 'dependencies/' + 
   it.getName() }.join(' ')
    )
  }
  from {
    configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
   } with jar
   println "${outputJar} created"
  }

task proguard(type: proguard.gradle.ProGuardTask) {
   println("Performing obfuscation..")
   configuration 'proguard.conf'
   injars "${outputJar}"
   outjars "${buildDir}/libs/${rootProject.name}_proguard.jar"

   libraryjars "${System.getProperty('java.home')}/lib/rt.jar"
   libraryjars "${dependsDir}"

  } 
```

Proguard.conf

```
-keep public class * {
   public * ;
 } 
```

用于混淆的 Gradle 命令

```
gradle createJar
gradle copyDepends
gradle proguard 
```

# pdf - modernizr 和 pdf 插件检测

> ID：12114099
> 
> 赞同：5
> 
> 时间：2012-08-24T17:30:53.880
> 
> 标签：pdf, web-applications, modernizr

Modernizer 可以检测浏览器是否安装并启用了 pdf 插件？我在 Web 应用程序的 iframe 中显示 pdf。当 pdf 插件不存在时，我从 dom 客户端删除 iframe。我正在使用一些笨拙的 javascript 来进行检测，并希望用更强大/标准的东西来替换它，并且遇到了modernizr。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T19:54:09.483

查看[Modernizr 文档](http://modernizr.com/docs/#s2)，我没有看到任何检测 pdf 插件的方法，但您可以检查浏览器可以处理的 mimeTypes。将其编写为 Modernizr 测试，您可以执行以下操作：

```
Modernizr.addTest('pdf', function(){
    var mimes = navigator.mimeTypes;
    for (var i = 0, i_len = mimes.length; i < i_len; i++){
        if (mimes[i].type === 'application/pdf')
            return true;
    }
    return false;
}); 
```

然后，您应该能够通过值检测浏览器是否具有 pdf 插件`Modernizr.pdf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:49:24.053

我不认为modernizr 会这样做，但是有一个名为[PDFObject](http://pdfobject.com)的库，它试图检测可以呈现PDF 的各种方式。

# python - python：将外部API的输出记录到记录器模块

> ID：12114100
> 
> 赞同：0
> 
> 时间：2012-08-24T17:31:11.093
> 
> 标签：python, logging, stdout

我是python初学者。我的 python 脚本使用基本的 python 日志记录模块将输出记录到一个文件（比如 example.log）。但是，我的 python 脚本还进行了一些我无法控制的第 3 方 API 调用（例如，parse_the_file）。我想将 API 生成的输出（通常在控制台上）捕获到我的 example.log 中。以下示例代码部分工作，但问题是一旦我开始将 API 的输出记录到我的日志文件中，内容就会被覆盖。

```
#!/usr/bin/env python

import logging
import sys
import os
from common_lib import *     # import additional modules

logging.basicConfig(filename='example.log', filemode='w', level=logging.DEBUG, format='%(asctime)s - %(levelname)s - %(message)s')

logging.debug('This is a log message.') # message goes to log file.

sys.stdout = open('example.log','a')
metadata_func=parse_the_file('/opt/metadata.txt') # output goes to log file but OVERWRITES the content
sys.stdout = sys.__stdout__
logging.debug('This is a second log message.') # message goes to log file. 
```

我知道在这个网站上有过类似问题的帖子，但我没有在这种情况下有效的解决方法/解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:33:39.077

尝试：

```
log_file = open('example.log', 'a')
logging.basicConfig(stream=log_file, level=logging.DEBUG)
logging.debug("Test")
sys.stdout = log_file
sys.stderr = log_file
stdout_fd = os.dup(1)
stderr_fd = os.dup(2)
os.dup2(log_file.fileno(), 1)
os.dup2(log_file.fileno(), 2)

os.system("echo foo")

os.dup2(stdout_fd, 1)
os.dup2(stderr_fd, 2)
sys.stdout = sys.__stdout__
sys.stderr = sys.__stderr__ 
```

但是，这不会相应地对其进行格式化。如果你想要，你可以尝试类似[http://plumberjack.blogspot.com/2009/09/how-to-treat-logger-like-output-stream.html](http://plumberjack.blogspot.com/2009/09/how-to-treat-logger-like-output-stream.html)

# database - 为同一查询获取不同的 SQL Server 结果

> ID：12114102
> 
> 赞同：0
> 
> 时间：2012-08-24T17:31:17.233
> 
> 标签：database, sql-server-2008-r2

我试图`SELECT`从 SQL Server 2008 R2 的查询中获取数据

我的查询类似于

```
Select id, name from table1 where date > 2012/8/1 
union 
Select id, name from table2 where date > 2012/8/1 
```

我正在对大约 300K 行数据执行此查询。

而且我每次都得到不同的结果。

谁能告诉我这背后的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:33:50.987

您需要使用明确的日期格式，并且需要用字符串分隔日期。尝试：

```
WHERE [date] > '20120801' 
```

# extjs - Ext JS 4 - 共享同一存储的网格实例

> ID：12114106
> 
> 赞同：1
> 
> 时间：2012-08-24T17:31:42.803
> 
> 标签：extjs, grid, store

我遇到了一个让我发疯的问题。我创建了一个显示网格的基于窗口的小部件。好的，到目前为止，这没什么特别的，但是，每个网格都必须处理不同的数据。例如：想象一个家庭经纪人，有一个显示股票报价的小部件。因此，实例 A 必须显示 INTC，实例 B 必须显示 CSCO，实例 C 必须显示 FB。但是当我处理实例 A 的 INTC 数据时，实例 B 和 C 的网格也会更新。所以我知道所有网格共享同一个商店。我已经尝试过动态创建商店，但是没有成功。

问题是，我该怎么做才能分开呢？还有另一种方法来更新没有商店的网格吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T18:22:14.860

您需要创建商店的一个实例，您可能像这样声明它们：

```
{
     xtype: 'grid',
     store: 'theStore'
     // Rest of the properties
} 
```

您需要执行以下操作：

```
{
    xtype: 'grid',
    //column definitions etc...
    initComponent: function() {
        var me = this;
        var lStore = Ext.create('App.store.MyStore');

        Ext.apply(me, {
            store: lStore
        });

        me.callParent();
    }
}​ 
```

这将创建一个唯一的商店实例，如果您像这样引用商店： store: 'MyStore' 您将获得相同的商店，并且当您排序、分页、过滤......所有商店都做同样的事情。

希望这对您有所帮助，因为您没有共享任何代码。

# java - 使用 Java 的应用引擎上的后台任务

> ID：12114111
> 
> 赞同：4
> 
> 时间：2012-08-24T17:32:29.213
> 
> 标签：java, google-app-engine, parsing

我是编程新手。我正在寻找能够清楚地解释如何在 App Engine (Java) 上运行后台任务的来源。

我目前有一个应用程序启动并运行，但希望有一个后台任务来解析另一个站点并创建将由我的应用程序使用的表。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:34:45.500

官网真的不错：[https ://developers.google.com/appengine/docs/java/taskqueue/](https://developers.google.com/appengine/docs/java/taskqueue/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:25:36.423

有三种方法可以做到这一点。

1) 将新任务添加到 App Engine 任务队列。作为“推送”任务运行的请求最多可以运行 10 分钟。（运行就像常规的 http 请求一样。）

2）分配一个“后端”实例，这基本上是您的应用程序的一个实例，可以永久运行。（可以接受 http 请求，但您需要专门针对它们。）

3) 在请求的上下文中，您可以启动一个线程（使用 App Engine 的线程 API）。有两种类型的线程。a) 请求和 b) 背景。后台线程只能在“后端”实例中启动，并且在当前请求完成时中断“请求”线程。

App Engine 任务队列可能是完成您想做的事情的最简单方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-09T09:53:34.520

我知道这个问题已有 2 年历史了，但我认为 Google 应用引擎模块在架构上更适合您的问题。

文档：[https ://cloud.google.com/appengine/docs/java/modules/](https://cloud.google.com/appengine/docs/java/modules/)

话虽如此，任务队列和后端（后台线程）也可以解决问题。

# r - 使用合并设置无与伦比的位置

> ID：12114121
> 
> 赞同：6
> 
> 时间：2012-08-24T17:33:32.010
> 
> 标签：r

我看到一些意外的合并行为（或者至少不完全直观）。但也许我只是不明白它应该如何工作：

让我们首先创建一些虚拟数据来玩：

```
x <- structure(list(A = c(2L, 2L, 2L, 2L, 1L, 2L, 1L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L), B = c(2L, 2L, 1L, 2L, 
1L, 1L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L
), C = c(2L, 1L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 2L, 2L, 1L, 2L, 
2L, 1L, 1L, 1L, 1L, 2L, 2L), D = c(2L, 1L, 2L, 2L, 2L, 1L, 1L, 
2L, 1L, 2L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 1L, 1L), E = c(2L, 
1L, 1L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 
1L, 1L, 1L), F = c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 
2L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L), G = c(2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 2L), 
    H = c(1L, 2L, 1L, 2L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 
    1L, 2L, 1L, 2L, 1L, 1L, 1L), I = c(1L, 1L, 2L, 2L, 2L, 1L, 
    1L, 1L, 2L, 1L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 2L, 1L), 
    J = c(2L, 1L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 
    2L, 2L, 2L, 2L, 1L, 2L, 1L), K = c(3, 3, 1, 3, 1, 3, 1, 2, 
    2, 2, 1, 3, 2, 2, 2, 1, NA, 1, 2, 1)), .Names = c("A", "B", 
"C", "D", "E", "F", "G", "H", "I", "J", "K"), row.names = c(NA, 
20L), class = "data.frame")

# Generate Listing of All Possible Combinations 
y <- list(1:2); y = expand.grid(rep(y,10)); 
colnames(y) <- LETTERS[1:10]
y <- rbind(y,y,y)
y$K <- rep(1:3,each=1024)
y$mergekey <- sample(1:6,3072,replace=TRUE) 
```

我的期望是，当我合并这两个数据集时，该设置`sort=FALSE`会`all.x=TRUE`为我提供一个包含所有 x 的列表`mergekey`。

让我们试试：

```
merge(x,y,all.x=TRUE,sort=FALSE)
   A B C D E F G H I J  K mergekey
1  2 2 2 2 2 1 2 1 1 2  3        5
2  2 2 1 1 1 1 2 2 1 1  3        3
3  2 1 2 2 1 1 2 1 2 2  1        3
4  2 2 1 2 2 1 2 2 2 2  3        2
5  1 1 2 2 2 2 2 1 2 2  1        4
6  2 1 1 1 2 2 2 2 1 2  3        6
7  1 1 1 1 2 2 2 2 1 2  1        5
8  2 1 2 2 1 1 2 2 1 1  2        4
9  2 2 2 1 1 1 2 1 2 2  2        4
10 2 1 2 2 1 1 2 1 1 1  2        2
11 2 1 2 1 1 1 2 1 2 2  1        4
12 2 2 1 2 1 2 2 1 2 1  3        5
13 2 1 2 1 1 1 2 1 2 2  2        3
14 2 1 2 1 1 1 2 1 2 2  2        3
15 2 2 2 1 2 1 2 1 2 2  2        1
16 2 1 1 2 1 1 2 2 2 2  2        1
17 2 1 1 1 1 1 2 1 1 2  1        2
18 1 2 1 1 1 2 2 1 1 1  1        5
19 2 1 2 1 1 1 2 1 1 1  1        4
20 2 2 1 2 1 1 1 2 1 2 NA       NA 
```

现在似乎“x 的大部分是未排序的”，但无与伦比的被推到最后，而不是保持它们的顺序。

所以，我的问题是：我如何让无与伦比的人留在原地？

PS：如果合并被告知不要排序，将无与伦比的推到最后似乎不是有点不直观吗？我也不认为这与[这种](https://stackoverflow.com/a/10130848/170352)行为一致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:24:05.090

包中的`join`函数`plyr`直观地解决了这个问题，没有额外的争论。

```
library(plyr)
join(x,y)

Joining by: A, B, C, D, E, F, G, H, I, J, K
   A B C D E F G H I J  K mergekey
1  2 2 2 2 2 1 2 1 1 2  3        4
2  2 2 1 1 1 1 2 2 1 1  3        3
3  2 1 2 2 1 1 2 1 2 2  1        5
4  2 2 1 2 2 1 2 2 2 2  3        3
5  1 1 2 2 2 2 2 1 2 2  1        6
6  2 1 1 1 2 2 2 2 1 2  3        6
7  1 1 1 1 2 2 2 2 1 2  1        4
8  2 1 2 2 1 1 2 2 1 1  2        2
9  2 2 2 1 1 1 2 1 2 2  2        4
10 2 1 2 2 1 1 2 1 1 1  2        6
11 2 1 2 1 1 1 2 1 2 2  1        1
12 2 2 1 2 1 2 2 1 2 1  3        3
13 2 1 2 1 1 1 2 1 2 2  2        2
14 2 2 2 1 2 1 2 1 2 2  2        6
15 2 1 1 2 1 1 2 2 2 2  2        2
16 2 1 1 1 1 1 2 1 1 2  1        3
17 2 2 1 2 1 1 1 2 1 2 NA       NA
18 1 2 1 1 1 2 2 1 1 1  1        1
19 2 1 2 1 1 1 2 1 2 2  2        2
20 2 1 2 1 1 1 2 1 1 1  1        1 
```

# r - 在 r 中的向量内添加数字

> ID：12114127
> 
> 赞同：1
> 
> 时间：2012-08-24T17:33:46.957
> 
> 标签：r, vector, addition

我有一个矢量图

```
v<-c(1,2,3) 
```

我需要按以下方式在向量中添加数字

```
1,1+2,1+2+3 
```

产生第二个向量

```
v1<-c(1,3,6) 
```

这可能很简单......但我有点卡住了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T17:36:32.253

使用累积和函数：

```
cumsum(v)
#[1] 1 3 6 
```

# c# - 如何从我的 DataGridView 中删除“Column -1”？

> ID：12114128
> 
> 赞同：0
> 
> 时间：2012-08-24T17:33:49.967
> 
> 标签：c#, winforms, dynamic, datagridview, datagridviewcolumn

我正在动态创建`columns`my 的 和 行`DGV`，然后`cells`用适当的值填充 。

尽管目前内容对于`DataGridView`（我设置`ScrollBars`为`None`）来说太大了，但我的第一列向右偏移，在`column`应该为 0 的地方有一条黑条。什么属性可以移除这个入侵者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:38:10.267

尝试设置`RowHeaderVisible`属性`False`

```
yourDgv.RowHeadersVisible = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:40:07.763

将 DataGridView 属性 RowHeadersVisible 设置为 false。

# html - “L”字符在 IE 8 的文本中随机出现

> ID：12114130
> 
> 赞同：3
> 
> 时间：2012-08-24T17:33:51.413
> 
> 标签：html, css, internet-explorer-8

我[在 IE 8 中出现 L 字符时](http://imgur.com/s6BlD)遇到了这个问题。它发生在医疗保健专业人员区块和底部两个区块中。有什么经验/线索有什么问题吗？我将很快开始解构整个页面并逐行重建它，但最好能得到一个关于原因到底是什么的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T18:04:28.270

也许你可以参考这个[https://webmasters.stackexchange.com/questions/15709/strange-characters-appearing-on-websites-ascii-unicode](https://webmasters.stackexchange.com/questions/15709/strange-characters-appearing-on-websites-ascii-unicode)

内容可能存在一些编码问题。

# android - 在 Android-x86 上网本上使用 ADB over Bluetooth 调试应用程序

> ID：12114133
> 
> 赞同：8
> 
> 时间：2012-08-24T17:33:53.913
> 
> 标签：android, tcp, bluetooth, adb, tethering

我设法在我的上网本上设置了一个运行良好的 Android-x86，启用了蓝牙并与我的 Windows 7 开发工作站配对（！）。

我最初希望通过 USB 像使用真实手机一样使用 adb。所以我插入了一条专用的 USB 公对公电缆，然后……什么也没发生。原来 Android-x86 不支持通过 USB 电缆连接。

然后我找到[了](http://www.cidtux.com/1/post/2012/07/how-to-connect-adb-through-wifi-using-wifiadb-for-android-android-x86.html)关于如何[通过 WiFi 进行 ADB 的](https://stackoverflow.com/a/3623727)很好的说明。问题是我的 Android-x86 上网本上有 WiFi，但我的 Windows 7 台式电脑上没有。我确实可以选择购买 WiFi 加密狗，但我更喜欢更直接的解决方案。

我碰巧在我的 Android-x86 上网本和我的 PC 上都可以使用蓝牙，所以我希望找到一种解决方案，可以让我[通过蓝牙快速使用 ADB](https://stackoverflow.com/a/11129818)。我在这里找到了非常令人鼓舞的指令：[https](https://stackoverflow.com/a/11129818)`ADB over Network` ://stackoverflow.com/a/11129818 但不幸的是，在我的 Android-x86 设备上找不到所谓的指令。

任何提示或想法如何使 ADB over Bluetooth 在我的 Android-x86 上网本上工作？

我相信如果我可以让我的 Android-x86 的蓝牙有一个 IP 地址，我可以从那里去，但我该怎么做呢？（`ifconfig`在 Android 的终端模拟器中不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:12:37.617

专用电缆是主机到主机电缆之一，还是 OTG 电缆？您是否有任何理由期望这两种设备都支持 OTG？

（如果是主机到主机电缆，中间会有一些电子设备，如果是 OTG，那么它实际上只是一根电缆）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:31:48.190

虽然[这篇博文](http://fomori.org/blog/?p=300)展示了一种通过蓝牙实现 ADB 的方法，但它可能仅适用于运行 CM 的设备。因此，除非另行通知，否则似乎不可能在 Android-x86 上网本上做同样的事情。

# .net - 您可以从多个应用程序访问 user.config 文件吗？

> ID：12114137
> 
> 赞同：1
> 
> 时间：2012-08-24T17:34:17.080
> 
> 标签：.net

我目前有两个项目，我们称它们为“Project1”和“Project2”。两者都是控制台应用程序。

Project1 具有“dbName”、“dbServer”等设置，这些设置都存储在 user.config 文件中。这是每个用户存储的配置文件。

启动 Project2 时是否可以从 Project1 访问 user.config 文件？这意味着我可以访问 Project2 中的“dbName”、“dbServer”等？

谢谢！

# c# - C# - Skype 自动接受联系请求

> ID：12114147
> 
> 赞同：2
> 
> 时间：2012-08-24T17:34:53.400
> 
> 标签：c#, bots, skype

所以我目前正在研究一个 Skype 机器人，我希望它可以自动接受联系请求，这样我就不必手动进行了，知道怎么做吗？

在我研究的时候，我发现了这个

```
ichat.AcceptAdd(); 
```

知道那有什么作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:54:34.983

我不知道我是否明白你想要完成什么..

您想自动接受联系请求吗？真的吗？您喜欢成为黑客、垃圾邮件发送者等的目标吗？:)

无论如何，如果这是您想要做的，您可以订阅 UserAuthorizationRequestReceived 事件：

```
var events = (_ISkypeEvents_Event) _skype;
events.UserAuthorizationRequestReceived += UserAuthorizationRequestReceived;
try
{
    _skype.Attach(8);
}
catch(COMException ce)
{
    RaiseErrorEvent("Unable to attach to skype.", ce);
}

private void UserAuthorizationRequestReceived(SKYPE4COMLib.User puser)
{
     if (do some user check here?? )
     {
         puser.IsAuthorized = true;
     }
} 
```

希望这可以帮助。

# javascript - 如何使用 javascript 在 rgba 中获取不透明度参数

> ID：12114148
> 
> 赞同：4
> 
> 时间：2012-08-24T17:35:06.727
> 
> 标签：javascript, jquery

我想知道如何使用 javascript / jQuery 获取不透明度参数。

例如：rgba(255,255,255,0.5)

我需要得到 0.5

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T17:46:01.747

如果 "rgba(255,255,255,0.5)" 是字符串：

```
var rgba="rgba(255,255,255,0.5)";
var alpha=rgba.replace(/^.*,(.+)\)/,'$1') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T21:26:51.703

试试这个函数[链接](http://snipplr.com/view/60570/)，它定义了一个函数，它返回一个对象的 rgba 颜色。

# android - 操作栏选项卡 - 在一个选项卡中有两个片段（一个是动态的）

> ID：12114150
> 
> 赞同：1
> 
> 时间：2012-08-24T17:35:16.377
> 
> 标签：android, dynamic, tabs, android-fragments, android-actionbar

我正在尝试创建一个选项卡，该选项卡在左侧片段上显示列表，在右侧显示详细片段。当用户单击列表项时，右侧片段应更改为适当的片段。

我是 android 新手，所以我使用了一个教程，我知道我需要对 tablistener 做一些事情：

```
     公共静态类 TabListener 实现 ActionBar.TabListener
     {
        私人最终活动 mActivity；
        私有最终字符串 mTag；
        私有最终类 mClass；
        私有最终捆绑 mArgs；
        私有片段 mFragment；

 `public TabListener(Activity activity, String tag, Class<T> clz) {
            this(activity, tag, clz, null);
        }

        public TabListener(Activity activity, String tag, Class<T> clz, Bundle args) {
            mActivity = activity;
            mTag = tag;
            mClass = clz;
            mArgs = args;

            // Check to see if we already have a fragment for this tab, probably
            // from a previously saved state.  If so, deactivate it, because our
            // initial state is that a tab isn't shown.
            mFragment = mActivity.getFragmentManager().findFragmentByTag(mTag);
            if (mFragment != null && !mFragment.isDetached()) {
                ft = mActivity.getFragmentManager().beginTransaction();
                ft.detach(mFragment);
                ft.commit();
            }
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            if (mFragment == null) {
                mFragment = Fragment.instantiate(mActivity, mClass.getName(), mArgs);
                    ft.add(android.R.id.content, mFragment, mTag);
                    tabtag = mTag;
            } 
            else {
                ft.attach(mFragment);
            }
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            if (mFragment != null) {
                ft.detach(mFragment);
            }
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            //Toast.makeText(mActivity, "Reselected!", Toast.LENGTH_SHORT).show();
        }
    }` 

我需要的另一个很好的例子是 Gmail 应用程序，左侧是列表，右侧是详细信息，并将操作栏（我的有标签）保持在顶部。

我知道此侦听器会为单击的每个选项卡膨胀一个片段，但是如何为其中包含两个片段的*布局膨胀？*

            回答 #1

赞同：1

时间：2012-10-05T09:50:17.040

用两个片段膨胀布局很简单：您只需指定布局中每个片段的类。但是您不能混合使用静态（布局 XML 定义）和动态片段。我的意思是，您不能在代码中动态地实例化新的 Fragment 并将其插入到最初在 XML 中填充 Fragments 的 View 容器（例如，LinearLayout）中。

```

# php - 如何在 OpenCart 中找到 OrderID 值？

> ID：12114153
> 
> 赞同：0
> 
> 时间：2012-08-24T17:35:25.530
> 
> 标签：php, tracking, opencart, affiliate

我已将我的 OpenCart 与附属网络连接。

为了让我链接并跟踪订单，他们需要在跟踪代码中提供以下信息；`OrderID`和`OrderValue`那个_`( Sub Total) without delivery`

我在 OpenCart 中找不到 OrderID 和 Sub Total 的值。

我需要在下面的代码中插入这些值。

OrderValue = 小计

```
<iframe src="http://track.xxx.com/?trackID=[IdFrånCookie]&orderValue=[orderValue]&orderID=[orderID]&programID=319" scrolling="no" frameborder="0" width="1" height="1"></iframe> 
```

我`column_order_id`在 [orderID] 中尝试过，但没有奏效。

有谁知道我应该输入哪些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T00:09:33.953

我编辑了您的帖子以使其更具可读性。你可以试试：

1 - 打开footer.tpl (catalog/view/theme/default/common/footer.tpl)

在底部添加如下代码：

```
<?
    // calculate totals
    $subTotalShow=$current_item_price;
    $addDel=$subTotalShow+4.95;
    $total=round($addDel, 2); // show decimal places
?>
<?php foreach ($orders as $order)
// only will run now if logged in and order has been complete
// so basically on completion of an order { ?>
    <?php foreach ($products as $product) { ?>
        <?php foreach ($totals as $total) { ?>
            <?php foreach ($vouchers as $voucher) { ?>
                <iframe src="http://track.xxx.com/?trackID=inpbox&orderValue=[<?=$total?>]&orderID=[<?=$text_order_id?>]&programID=319"
                scrolling="no"
                frameborder="0"
                width="1"
                height="1"></iframe>
            <?php } ?>
        <?php } ?>
    <?php } ?>
<?php } ?> 
```

虽然我不完全确定这段代码会起作用。我期待编辑，但我会一直关注它。

# c++ - 是否可以使用 C++ 流类来缓冲来自管道的读取？

> ID：12114156
> 
> 赞同：5
> 
> 时间：2012-08-24T17:35:57.013
> 
> 标签：c++, filestream, iostream, pipe

简而言之，是否可以按照这个伪示例描述的内容从流类的管道中进行缓冲读取。

请忽略您看到的任何迂腐问题（例如不检查错误等）；我在我的真实代码中做所有这些，这只是一个伪示例来解决我的问题。

```
#include <iostream> // or istream, ifstream, strstream, etc; whatever stream could pull this off
#include <unistd.h>
#include <stdlib.h>
#include <sstream>

void myFunc() {
  int pipefd[2][2] = {{0,0},{0,0}};

  pipe2( pipefd[0], O_NONBLOCK );
  pipe2( pipefd[1], O_NONBLOCK );

  if( 0 == fork() ) {
    close( pipefd[0][1] );
    close( pipefd[1][1] );
    dup2( pipefd[0][0], stdout );
    dup2( pipefd[1][0], stderr );
    execv( /* some arbitrary program */ );
  } else {
    close( pipefd[0][0] );
    close( pipefd[1][0] );

    /* cloudy bubble here for the 'right thing to do'.
     * Obviously this is faulty code; look at the intent,
     * not the implementation.
     */
#ifdef RIGHT_THING_TO_DO
    for( int ii = 0; ii < 2; ++ii ) {
      cin.tie( pipefd[ii][1] );
      do {
        cin.readline( /* ... */ );
      } while( /* ... */ );
    }
#else
    // This is what I'm doing now; it works, but I'm
    // curious whether it can be done more concisely
    do {
      do {
        select( /* ... */ );
        for( int ii = 0; ii < 2; ++ii ) {
          if( FD_SET( fd[ii][1], &rfds ) ) {
            read( fd[ii][1], buff, 4096 );
            if( /* read returned a value > 0 */ ) {
              myStringStream << buff;
            } else {
              FD_CLR( fd[ii][1], &rfds );
            }
          }
        }
      } while( /* select returned a value > 0 */ );
    } while( 0 == waitpid( -1, 0, WNOHANG ) );
#endif
  }
} 
```

* * *

### 编辑

这是一个如何使用`boost::file_descriptor`管道的简单示例；也应该与套接字一起使用，但没有测试。

这就是我编译它的方式：

```
g++ -m32 -DBOOST_IOSTREAMS_NO_LIB -isystem ${BOOST_PATH}/include \
  ${BOOST_SRC_PATH}/libs/iostreams/src/file_descriptor.cpp blah.cc -o blah 
```

这是示例：

```
#include <fcntl.h>
#include <stdio.h>

#include <boost/iostreams/device/file_descriptor.hpp>
#include <boost/iostreams/stream.hpp>

int main( int argc, char* argv[] ) {
  // if you just do 'using namespace...', there's a
  // namespace collision with the global 'write'
  // function used in the child
  namespace io = boost::iostreams;

  int pipefd[] = {0,0};
  pipe( pipefd, 0 );  // If you use O_NONBLOCK, you'll have to
                      // add some extra checks to the loop so
                      // it will wait until the child is finished.

  if( 0 == fork() ) {
    // child
    close( pipefd[0] ); // read handle
    dup2( pipefd[1], FILENO_STDOUT );
    printf( "This\nis\na\ntest\nto\nmake sure that\nit\nis\working as expected.\n" );
    return 0; // ya ya, shoot me ;p
  }

  // parent

  close( pipefd[1] ); // write handle

  char *buff = new char[1024];
  memset( buff, 0, 1024 );

  io::stream<io::file_descriptor_source> fds(
    io::file_descriptor_source( pipefd[0], io::never_close_handle ) );

  // this should work with std::getline as well
  while(   fds.getline( buff, 1024 )
        && fds.gcount() > 0 // this condition is not enough if you use
                            // O_NONBLOCK; it should only bail if this
                            // is false AND the child has exited
       ) {
    printf( "%s,", buff );
  }

  printf( "\n" );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:58:28.423

肯定有。《C++ 标准库：教程和参考》一书中有一个示例，说明如何制作一个包装文件描述符的 std::streambuf（就像从 pipe() 获得的那些）。在它之上创建一个流是微不足道的。

编辑：这本书：[http ://www.josuttis.com/libbook/](http://www.josuttis.com/libbook/)

这是一个使用文件描述符的示例输出缓冲区：http: [//www.josuttis.com/libbook/io/outbuf2.hpp.html](http://www.josuttis.com/libbook/io/outbuf2.hpp.html)

此外，这是一个示例输入缓冲区：[http ://www.josuttis.com/libbook/io/inbuf1.hpp.html](http://www.josuttis.com/libbook/io/inbuf1.hpp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:56:55.477

您需要一个可以使用现有文件描述符创建的流，或者一个可以自己创建管道的流。不幸的是，没有这样的标准流类型。

您可以自己编写或使用，例如[boost::iostreams::file_descriptor](http://www.boost.org/doc/libs/1_42_0/libs/iostreams/doc/classes/file_descriptor.html)。

编写自己的代码需要创建一个basic_streambuf 的子类，然后创建一个非常简单的basic_i/ostream 子类，它除了保存您的streambuf 类并提供方便的构造函数之外几乎没有其他作用。

# visual-studio-2010 - devenv /installvstemplates 非常非常慢

> ID：12114158
> 
> 赞同：1
> 
> 时间：2012-08-24T17:36:01.400
> 
> 标签：visual-studio-2010, templates

我想更多地使用 VS 模板，但我发现创建和测试它们有点痛苦。一个问题是，要刷新模板，您必须运行上面的命令，而且速度非常慢。

另一个问题是，为了编辑模板，您基本上使用文本编辑器，然后将文件推回 ZIP 存档，然后再次运行安装命令。对于像 VS2010 这样先进的工具来说，这似乎是荒谬的原始。正因为如此，我将开始制作模板，然后退出，转而使用复制、粘贴和替换。

与团队存储和共享模板也是一种痛苦。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:18:14.633

尝试将您的项目创建为[vsix 包](http://msdn.microsoft.com/en-us/library/ff363239.aspx)，然后它会安装得非常快。安装后，您可以使用 Visual Studio 扩展管理器以同样快的速度卸载模板。vsix 还使模板易于与您的团队共享。

关于编辑模板的其他问题，如果安装 Visual Studio SDK，这会更容易。它实际上包含[用于创建模板的模板](http://msdn.microsoft.com/en-us/library/ff527340)，因此您可以在 Visual Studio 中进行操作。它实际上还简化了创建 vsix 包的过程。

# c++ - 动态替换正在播放的 gstreamer 管道中的元素

> ID：12114159
> 
> 赞同：2
> 
> 时间：2012-08-24T17:36:12.000
> 
> 标签：c++, c, linux, c++11, gstreamer

我正在寻找正确的技术（如果存在），用于动态替换正在运行的 gstreamer 管道中的元素。我有一个基于 gstreamer 的 c++ 应用程序，它创建的管道看起来像这样（使用 gst-launch 语法）：

汤httpsrc location="http://localhost/local.ts" ！mpegtsdemux 名称=d ！队列 ！mpeg2dec ！xvimagesink d. ！队列 ！a52dec ！脉冲接收器

在播放过程中（即 GST_STATE_PLAYING 是管道状态，用户正在愉快地观看视频），我需要从管道中移除 souphttpsrc 并创建一个新的 souphttpsrc，甚至是一个新的 neonhttpsource，然后立即将其添加回管道中并在我们执行此操作之前播放的同一时间位置继续播放相同的 uri 源流。用户可能会看到一个小的延迟，这很好。

我们几乎没有弄清楚如何删除和替换源，我们需要更多的理解。这是迄今为止我们最好的尝试：

```
gst_element_unlink(source, demuxer);
gst_element_set_state(source, GST_STATE_NULL);
gst_bin_remove(GST_BIN(pipeline), source);
source = gst_element_factory_make("souphttpsrc", "src");
g_object_set(G_OBJECT(source), "location", url, NULL);
gst_bin_add(GST_BIN(pipeline), source);
gst_element_link(source, demuxer);
gst_element_sync_state_with_parent(source); 
```

这并不完美，因为源是从头开始播放的，而管道的其余部分正在等待正确的时间戳缓冲区（我假设），因为几秒钟后，播放会恢复。我尝试以多种方式寻找来源，但没有任何效果。

我需要知道正确的方法来做到这一点。如果我们想要动态替换解码器或其他一些元素，如果也存在一种通用技术，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:35:00.363

我认为这可能是您正在寻找的： [http ://cgit.freedesktop.org/gstreamer/gstreamer/tree/docs/design/part-block.txt](http://cgit.freedesktop.org/gstreamer/gstreamer/tree/docs/design/part-block.txt)

（从第 115 行开始）

# php - 将变量传递给控制器 （不是函数）

> ID：12114160
> 
> 赞同：0
> 
> 时间：2012-08-24T17:36:11.837
> 
> 标签：php, codeigniter

我喜欢通过这样的 URL 将变量传递给控制器​​：

```
a href="<?php print base_url('/profile/' . $this->session->userdata('id')); ?>">Profiel</a> 
```

/profile/ = 控制器
$this->session->userdata('id') = 变量

现在我想把它交给 Profile 但它只在我做 /profile/index/1 时才有效，我喜欢这样：/profile/1

什么时候真正使用新的控制器？

这是我的控制器：

```
<?php

class Profile extends CI_Controller 
{
    function __construct()
    {
        parent::__construct();
        $this->load->library('login');
        $this->load->helper('url');
    }

    function index()
    {
        $this->load->view('profile_view');
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:52:35.820

找到了，

我只需要将这一行添加到 config 文件夹中的 routes.php 文件中：

```
$route['profile/(:num)'] = "profile/index/$1" 
```

然后当 profile/1 输入时，它会自动认为它是 profile/index/1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:40:10.423

或者你可以在你的控制器类中使用 _remap 函数。阅读用户指南中的相关部分。它在“控制器”部分。

# c# - 如何在 DLL 中附加到 AppDomain.CurrentDomain.AssemblyResolve

> ID：12114161
> 
> 赞同：0
> 
> 时间：2012-08-24T17:36:23.357
> 
> 标签：c#, .net, dll, .net-assembly, assembly-resolution

我有一个其他应用程序使用的 dll。它依赖于相当定期更新的第 3 方 dll。只要存在我需要或更高版本的版本，我就会很高兴。

但是 Visual Studio 在使用我的 dll 的应用程序上强制使用我需要的确切版本。

我想向 AppDomain.CurrentDomain.AssemblyResolve 添加一个事件处理程序，以便我可以检查更高版本并使用它。但我不知道在哪里添加它。

大多数应用程序会将其放在 program.cs 启动中。但是dll没有。

我会把它放在一个静态构造函数中，但是我有很多使用这个 3rd 方 dll 的类。将此事件附加到每个类中似乎很混乱。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:44:12.110

Ben Hall 有一个这样做的例子[http://blog.benhall.me.uk/2006/08/appdomaincurrentdomainassemblyresolve.html](http://blog.benhall.me.uk/2006/08/appdomaincurrentdomainassemblyresolve.html)：

```
private Assembly AssemblyResolveHandler(object sender,ResolveEventArgs e)
{
    try
    {
        string[] assemblyDetail = e.Name.Split(',');
        string assemblyBasePath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
        Assembly assembly = Assembly.LoadFrom(assemblyBasePath + @"\" + assemblyDetail[0] + ".dll");
        return assembly;
    }
    catch (Exception ex)
    {
        throw new ApplicationException("Failed resolving assembly", ex);
    }
} 
```

`AssemblyResolve`在尝试解析要“重定向”的类型之前， 请确保已完成委托的分配。[http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)显示和示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:44:19.687

你可以使用[程序集绑定重定向](http://msdn.microsoft.com/en-us/library/2fc472t2%28v=vs.110%29.aspx)吗？

```
<configuration>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="Foo.Bar" publicKeyToken="***" culture="neutral"/>
                <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.1"/>
            </dependentAssembly>
        </assemblyBinding>
    </runtime>
</configuration> 
```

# ruby - 使用 Ruby on Rails 从布尔值计算平均值

> ID：12114167
> 
> 赞同：0
> 
> 时间：2012-08-24T17:36:57.200
> 
> 标签：ruby, algorithm, average

我有一个设置，其中有 10 个属性接受导轨形式的浮点数。每个属性还与我的模型中的一个值相关联。如果在表单上为多个属性输入了一个数字，我需要创建一个加权平均值。

例如，如果我有 10 种产品，每种产品在我的模型中都有价格。在表格中，用户可以输入每个产品的数量（产品数量）。我想计算那些输入金额的产品的加权价格。

那么如何创建一个加权平均值来检查哪些产品输入了金额？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:44:43.743

此代码检索模型上所有为真的属性：

```
@model = Model.find(params[:id)
@model.attributes.select{|k,v| (v.is_a?(TrueClass) || v.is_a?(FalseClass)) && v} 
```

如果您想要虚假的，只需执行以下操作：

```
@model.attributes.select{|k,v| (v.is_a?(TrueClass) || v.is_a?(FalseClass)) && !v} 
```

不知道这是否是你要找的，但也许它可以让你的头脑清醒一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:07:38.723

```
columns_names = ['a','b','c','d'] # array of name of the columns

obj = Model.find(:id) # find the object with id

# loop and get column values that are set

values = columns_names.inject([]) do |arr,column_name|
  arr << obj.column_name if params[column_name].eql?"true" # collect the values if the column set
  arr
end

#get average
if values.blank?
  # no column selected
else
  avg =  values.reduce(:+)/values.size
end 
```

检查此以获取有关加权平均的帮助

[http://www.dzone.com/snippets/weighted-mean](http://www.dzone.com/snippets/weighted-mean)

# css - 3 列布局文本中的文本区域高度不能以百分比设置

> ID：12114170
> 
> 赞同：1
> 
> 时间：2012-08-24T17:37:07.187
> 
> 标签：css, html, layout

我正在尝试使用两个文本区域创建一个 3 列布局。我可以设置文本区域的宽度，以便列看起来正确，但高度会缩小。我正在寻找一种适用于 HTML5 兼容浏览器的解决方案 - 不需要支持较旧的浏览器。请参阅此处的 jsfiddle [。](http://jsfiddle.net/ExPraliteMonk/NhSpb/)

## HTML5

```
<div id="wrap">
   <div id="content">
        <div id="columnLeft">
            <div id="toc">This is a table of contents</div>
        </div>
        <div id="columnCenter">
            <textarea>This is edit 1.</textarea>
        </div>
        <div id="columnRight">
            <textarea>This is edit 2.</textarea>
        </div>
    </div>
</div> 
```

## CSS

```
html, body {
height: 100%;
}
#wrap {
height: 100%;
}
#content {
height: 100%;
}
#columnLeft, #columnCenter, #columnRight {
position: relative;
height: 100%;
margin-right: 5px;
}
#columnLeft {
width: 10%;
float: left;
}
#columnCenter {
width: 40%;
float: left;
}
#columnRight {
width: 40%;
float: right;
}
textarea {
width: 100%;
min-height: 100%;
resize: none;
} 
```

如何将 3 列布局文本中的文本区域高度设置为百分比，或者使用使文本区域高度看起来成比例的布局格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:46:26.947

您忘记定义`wrap`' 的高度。

```
#wrap {
    height: 100%;
} 
```

[**小提琴**](http://jsfiddle.net/ult_combo/NhSpb/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:47:13.833

其他海报是正确的。`height: 100%`你在 div#wrap 上忘记了一个。

这是一个解决方案：http: [//jsfiddle.net/ksokhan/NhSpb/8/](http://jsfiddle.net/ksokhan/NhSpb/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:52:38.830

尝试在Javascript中动态设置高度

```
$("textarea").height($("#columnLeft").height());​ 
```

[**小提琴**](http://jsfiddle.net/UMxVU/)

# macos - 如何在 apache 中为 mac os x 上的 play framework web 应用程序设置反向代理

> ID：12114172
> 
> 赞同：3
> 
> 时间：2012-08-24T17:37:34.253
> 
> 标签：macos, playframework, apache2, playframework-2.0, reverse-proxy

我正在尝试将带有反向代理的 apache 前端添加到端口 9000 上的播放框架应用程序中。根据播放文档，我尝试了以下 httpd 配置：[http://www.playframework.org/documentation/2.0。 2/HTTP服务器](http://www.playframework.org/documentation/2.0.2/HTTPServer)

```
<VirtualHost *:80>
  ProxyPreserveHost On
  ServerName http://localhost
  ProxyPass / http://127.0.0.1:9000/
  ProxyPassReverse / http://127.0.0.1:9000/
  LogLevel debug
</VirtualHost> 
```

我只加载了 mod_proxy 模块，但注释掉了所有其他与代理相关的模块（http、ajp、jk 等）。

当我尝试点击`http://localhost`时，我在错误日志中得到以下信息：

```
[debug] mod_proxy_ajp.c(45): proxy: AJP: canonicalising URL //localhost:8009/
[debug] proxy_util.c(1506): [client ::1] proxy: ajp: found worker ajp://localhost:8009/ for ajp://localhost:8009/
[debug] mod_proxy.c(1015): Running scheme ajp handler (attempt 0)
[debug] mod_proxy_http.c(1963): proxy: HTTP: declining URL ajp://localhost:8009/
[debug] mod_proxy_ajp.c(672): proxy: AJP: serving URL ajp://localhost:8009/
[debug] proxy_util.c(1949): proxy: AJP: retrying the worker for (localhost)
[error] proxy: AJP: disabled connection for (localhost)
[debug] mod_proxy_ajp.c(45): proxy: AJP: canonicalising URL //localhost:8009/favicon.ico
[debug] proxy_util.c(1506): [client ::1] proxy: ajp: found worker ajp://localhost:8009/ for ajp://localhost:8009/favicon.ico
[debug] mod_proxy.c(1015): Running scheme ajp handler (attempt 0)
[debug] mod_proxy_http.c(1963): proxy: HTTP: declining URL ajp://localhost:8009/favicon.ico
[debug] mod_proxy_ajp.c(672): proxy: AJP: serving URL ajp://localhost:8009/favicon.ico
[debug] proxy_util.c(1949): proxy: AJP: retrying the worker for (localhost)
[error] proxy: AJP: disabled connection for (localhost) 
```

当我使用 apachectl 查看已加载的模块时，我看到了：

```
Loaded Modules:
 core_module (static)
 mpm_prefork_module (static)
 http_module (static)
 so_module (static)
 authn_file_module (shared)
 authz_host_module (shared)
 cache_module (shared)
 disk_cache_module (shared)
 dumpio_module (shared)
 reqtimeout_module (shared)
 ext_filter_module (shared)
 include_module (shared)
 filter_module (shared)
 substitute_module (shared)
 deflate_module (shared)
 log_config_module (shared)
 log_forensic_module (shared)
 logio_module (shared)
 env_module (shared)
 mime_magic_module (shared)
 cern_meta_module (shared)
 expires_module (shared)
 headers_module (shared)
 ident_module (shared)
 usertrack_module (shared)
 setenvif_module (shared)
 version_module (shared)
 proxy_module (shared)
 mime_module (shared)
 dav_module (shared)
 autoindex_module (shared)
 asis_module (shared)
 info_module (shared)
 cgi_module (shared)
 dav_fs_module (shared)
 vhost_alias_module (shared)
 negotiation_module (shared)
 dir_module (shared)
 imagemap_module (shared)
 actions_module (shared)
 speling_module (shared)
 alias_module (shared)
 rewrite_module (shared)
 apple_userdir_module (shared)
 bonjour_module (shared)
 authn_dbm_module (shared)
 authn_anon_module (shared)
 authn_dbd_module (shared)
 authn_default_module (shared)
 auth_basic_module (shared)
 auth_digest_module (shared)
 authz_groupfile_module (shared)
 authz_user_module (shared)
 authz_dbm_module (shared)
 authz_owner_module (shared)
 authz_default_module (shared)
 mem_cache_module (shared)
 dbd_module (shared)
 status_module (shared)
 proxy_http_module (shared)
 proxy_ajp_module (shared)
Syntax OK 
```

因此，即使我将它们注释掉，proxy_http 和 proxy_ajp 也会被加载。我正在尝试使用运行 osx lion 的 mac 上的 apache（2.2.21）。关于这里有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T17:59:17.023

Try to use other name than localhost, ie:

```
<VirtualHost *:80>
  ProxyPreserveHost On
  ServerName myproject.loc
  ProxyPass / http://127.0.0.1:9000/
  ProxyPassReverse / http://127.0.0.1:9000/
  LogLevel debug
</VirtualHost> 
```

and don't forget to add the '*domain*' into your `/private/etc/hosts` file:

```
127.0.0.1 myproject.loc 
```

After all, restart (or at least reload) the Apache and flush DNS cache:

```
dscacheutil -flushcache 
```

then run your Play app and it should be available at [http://myproject.loc](http://myproject.loc) address.

If you'll try to open it too fast (before Play console will run it) you can meet `503` error, in such case open http:// localhost:9000, clear the browser's cache and then your new 'domain' should be working.

# java - -XX:MaxPermSize 有什么作用？

> ID：12114174
> 
> 赞同：285
> 
> 时间：2012-08-24T17:37:58.317
> 
> 标签：java, jvm, jvm-arguments

具体来说，为什么它有助于解决 PermGen OutOfMemoryError 问题？

此外，对于将我指向有关 JVM 参数的文档的答案的奖励积分...

* * *

## 回答 #1

> 赞同：297
> 
> 时间：2012-08-24T17:46:49.140

永久空间是 VM 使用的类、方法、内部化字符串和类似对象的存储位置，并且永远不会被释放（因此得名）。

[这篇 Oracle 文章](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)简洁地介绍了 HotSpot GC 的工作和参数化，并建议您在加载许多类时增加这个空间（这通常是应用程序服务器和一些 IDE 等 Eclipse 的情况）：

> 永久代对大多数应用程序的垃圾收集器性能没有明显影响。但是，一些应用程序会动态生成和加载许多类；例如，JavaServer Pages (JSP) 页面的一些实现。这些应用程序可能需要更大的永久代来保存额外的类。如果是这样，可以使用命令行选项 -XX:MaxPermSize= 增加最大永久代大小。

请注意，[此其他 Oracle 文档](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)列出了其他 HotSpot 参数。

**更新：**从 Java 8 开始，permgen 空间和这个设置都消失了。用于加载的类和方法的内存模型是不同的，并且不受限制（使用默认设置）。您不应再看到此错误。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2012-10-15T23:12:20.543

`-XX:PermSize -XX:MaxPermSize`用于设置永久代的大小。

永久代：永久代是保存类文件的地方。这些是编译的类和 JSP 页面的结果。如果此空间已满，则会触发完整垃圾回收。如果 Full Garbage Collection 无法清除旧的未引用类并且没有剩余空间来扩展永久空间，则会引发 Out-of-Memory 错误 (OOME) 并且 JVM 将崩溃。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2014-08-24T17:20:12.560

在 Java 8 中，该参数通常用于打印如下警告消息：

> Java HotSpot(TM) 64 位服务器 VM 警告：忽略选项 MaxPermSize=512m；在 8.0 中删除了支持

您在 Java 8 中收到此消息的原因是因为 Permgen 已被 Metaspace 取代，以解决 PermGen 的一些缺点（正如您亲眼所见，其中一个缺点是它具有固定大小）。

[仅供参考：关于元空间的文章： http](http://java-latte.blogspot.in/2014/03/metaspace-in-java-8.html) ://java-latte.blogspot.in/2014/03/metaspace-in-java-8.html

# java - GAE Blobstore IllegalStateException：没有内容

> ID：12114176
> 
> 赞同：0
> 
> 时间：2012-08-24T17:38:02.793
> 
> 标签：java, google-app-engine, jersey, blobstore, illegalstateexception

尝试通过 BlobstoreService.serve(key, res) 从 blobstore 提供文件时，出现以下错误：

```
WARNING: /path/to/servlet
java.lang.IllegalStateException: NO CONTENT
at org.mortbay.jetty.HttpGenerator.addContent(HttpGenerator.java:106)
at org.mortbay.jetty.AbstractGenerator$Output.write(AbstractGenerator.java:644)
at org.mortbay.jetty.AbstractGenerator$Output.write(AbstractGenerator.java:579)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.copy(ServeBlobFilter.java:129)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.serveBlob(ServeBlobFilter.java:185)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:64)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

如果我尝试使用浏览器从该 URL 下载，浏览器会存储一个大小为 0 字节的文件。我正在 SDK 1.7.1 的开发服务器上对此进行测试。

我正在使用 Jersey 创建 REST API，这似乎是导致问题的原因。如果我创建一个常规 servlet，它会正确地提供文件。我想知道这是否是使用 @GET 注释的问题，它要求函数返回一些东西。但是，如果我返回任何内容，blobstore 会抱怨并告诉我它已被已发送的数据抢占。

该服务甚至似乎没有发回任何标头以响应请求。

这是应该发送响应的代码：

```
@GET
public void getAirport(@PathParam(APIUtils.VERSION_NAME) String versionName, @Context HttpServletResponse res) throws IOException {
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

    DataDAO dao = new DataDAO();
    BlobKey key = dao.getAirportBlobKey(versionName);

    if(key == null) {
        res.sendError(HttpServletResponse.SC_NOT_FOUND, "No airport record found for: " + versionName);
    }
    else {
        blobstoreService.serve(key, res);
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:26:22.000

我还没有找到任何文档来解释这种行为，但我能够解决我的问题。以下似乎是一个解决方案：

```
blobstoreService.serve(key, res);
return Response.created(null).status(HttpServletResponse.SC_OK).build(); 
```

由于响应的主体是`null`，因此不会干扰为 blob 提供服务的 blobstore。当 Jersey 处理注释时，我仍然想了解更多关于内部工作原理的信息`@GET`，但至少目前这可行。

# machine-learning - 决策树桩

> ID：12114180
> 
> 赞同：2
> 
> 时间：2012-08-24T17:38:39.663
> 
> 标签：machine-learning, artificial-intelligence, decision-tree, classification, adaboost

我想使用 AdaBoost 实现一个 java 应用程序，它可以分类大象是非洲大象还是亚洲大象。我的大象类有字段：

```
int size;
int weight;
double sampleWeight;
ElephantType type; // (which can be Asian or African). 
```

我是 AdaBoost 的新手，我了解到好的弱分类器是决策树桩。我想知道我是否应该只创建 2 个决策树桩（1 个用于大小，1 个用于重量）还是应该创建更多决策树桩（大小不同，重量不同）？分类器的创建到底是什么样子的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:03:18.973

您将创建许多决策树桩。提升的重点是，每次创建新分类器（在您的情况下为决策树桩）时，您将增加分类器错误分类的所有实例的权重（重要性），以便下一个分类器更多地关注错误分类的实例。您可以随机选择每个步骤在树桩中使用的两个功能。一旦您创建了整套分类器（树桩），它们就会使用多数票对新实例进行分类。

# asp.net-mvc-3 - 如何保存表单数据（不在数据库中）

> ID：12114184
> 
> 赞同：0
> 
> 时间：2012-08-24T17:38:50.257
> 
> 标签：asp.net-mvc-3

我正在使用包含“表单向导”的 ASP.NET MVC 3 制作一个应用程序，即三种表单都是向导。

第一个表单用于输入用户详细信息，第二个用于选择产品，第三个用于输入他的付款详细信息。

当用户在第一个表单中输入他的详细信息并通过单击下一个提交按钮进入第二个表单时。在第二个表单中，当用户选择产品时，他在第一个表单中的详细信息和他在第二个表单中的产品选择被发送给管理员进行审批。我的问题是，在用户批准之前，我应该在哪里保存第一种和第二种形式的数据。当用户被批准时，用户数据被保存到数据库中。从一种表格转到另一种表格时，我应该在哪里保存表格数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:25:34.267

## JavaScript 方式

仅仅因为“form1”和“form2”看起来像两个物理上不同的形式并不意味着它们必须是。您最初可以显示第一组输入的容器，然后当用户单击下一步时，它会隐藏第一个并显示第二个。

用户完成第二组输入后，页面使用一个表单将两组字段提交给服务器。此时，它需要进入数据库或通过电子邮件发送给某人以保持持久性。

## 传统方式

如果您需要将每个表单放在不同的页面上并在每个表单之间提交，您可以这样做：（注意：这是一种非常糟糕的方式） 1\. 表单 1 提交 2\. 服务器响应 form2 和来自 form1 的数据（到存储在表单 2 的隐藏字段中） 3\. 用户提交表单 2（连同隐藏的表单 1 数据）

# google-chrome - Chrome 扩展：在文本突出显示时创建 div

> ID：12114185
> 
> 赞同：1
> 
> 时间：2012-08-24T17:38:58.587
> 
> 标签：google-chrome, popup, contextmenu, highlight

我正在寻找创建一个 chrome 扩展，它获取当前突出显示的文本并在文本下创建一个 div，例如 chrome 字典应用程序。有谁知道这是什么类型的弹出窗口，或者它是如何实现的？谢谢！汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:22:39.470

将有两个`HTMLs`，一个`popup.html`- 视图和一个`background.html`- 用于路由、计算等，这是扩展程序的基本功能。
作为回答您的问题的尝试，您从一个 html 到另一个 html 的通信方式如下：

```
chrome.extension.sendRequest({'action' : 'function_name', 'url' : 'ajax_url'},
    function(response) {
        callback_function(response);                 
    }); 
}); 
```

但是既然你想处理页面DOM中的一个div，我想我们使用posetMessage

```
yourDoc.postMessage(message, 'domain_url'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:02:29.573

已经回答了，只是其中一些...

*   [获取突出显示/选定的文本](https://stackoverflow.com/questions/5379120/jquery-get-the-highlighted-text)
*   [选择元素中的文本（类似于用鼠标突出显示）](https://stackoverflow.com/questions/985272/jquery-selecting-text-in-an-element-akin-to-highlighting-with-your-mouse)

还有更多阅读...

*   [http://archive.plugins.jquery.com/node/7411](http://archive.plugins.jquery.com/node/7411)
*   [http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)
*   [http://www.codingforums.com/showthread.php?t=105808](http://www.codingforums.com/showthread.php?t=105808)
*   [https://www.google.es/search?q=get-user-selected-text](https://www.google.es/search?q=get-user-selected-text)

祝你的扩展好运！

# c++ - C++ 中的一些无法解释的错误

> ID：12114186
> 
> 赞同：0
> 
> 时间：2012-08-24T17:39:14.673
> 
> 标签：c++

我有以下代码：

```
#include <cstdlib>
#include <iostream>
#include <stdlib.h>

using namespace std;

int main()
{
 int a,n,count;
 count=0; randomize();
 a=1+random(100);  
 cout<<"Enter A No. Between 1 to 100";
 do
  { 
    cin>>n;
    count++;
    if(n>a)
           cout<<"Enter a lower no.";
    else if(n<a)
           cout<<"Enter a higher no.";
    }while(n!=a);
cout<<count;

system("PAUSE");
return EXIT_SUCCESS;
} 
```

错误是：

*   E:\c++\main.cpp 在函数“int main()”中：
*   10 E:\c++\main.cpp `randomize' undeclared (首先使用这个函数)
*   （每个未声明的标识符只针对它出现的每个函数报告一次。）
*   11 E:\c++\main.cpp `random' undeclared (首先使用这个函数)

谁能帮我理解为什么会发生这些错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:41:46.853

`randomize()`不是标准的 C++ 函数，您必须使用`srand(something)`随机数生成器来播种，`something`通常是当前时间 ( `time(0)`)。

另外，`random()`不是标准功能，您将不得不使用`rand()`

所以，像这样的东西（清理了一点）：

```
#include <ctime>
#include <cstdlib>
#include <iostream>

using namespace std;

int main()
{
    srand(time(0));
    int n, count = 0;
    int a = 1 + (rand() % 100);  
    cout << "Enter A No. Between 1 to 100";
    do
    { 
        cin >> n;
        count++;
        if (n>a)
            cout << "Enter a lower no.";
        else if (n<a)
            cout << "Enter a higher no.";
    } while(n!=a);
    cout << count;

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T17:40:53.603

您正在使用一个`count=0; randomize();`名为“randomize”的函数（此处：） - 编译器不知道在哪里可以找到此函数，因为它没有在您的代码中定义，也没有在您包含的任何头文件中定义。

我怀疑你想要[`srand()`](http://www.cplusplus.com/reference/clibrary/cstdlib/srand/)and [`rand()`](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)。

* * *

例如 - 您可以重写现有代码，如下所示。要使用此代码 - 您还需要`#include <time.h>`包含：

```
int main()
{
 int a,n,count;
 count=0; 
 srand(time(NULL)); // use instead of "randomize"
 a = 1 + (rand() % 100); 
 // ... Rest of your code 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T17:40:52.487

您尝试调用的方法称为[`srand`](http://www.cplusplus.com/reference/clibrary/cstdlib/srand/)和[`rand`](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)。

`randomize`并且`random`不是语言的一部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T17:41:11.417

标准 C中没有`randomize()`and`random()`函数。也许你的意思是`srand()`and `rand()`？

看看[这个问题，关于如何正确“随机化”给定范围内的数字](https://stackoverflow.com/questions/2509679/how-to-generate-a-random-number-from-within-a-range-c)。`rand() % N`不统一给出 [0, N) 范围内的数字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T17:59:19.263

If you have a C++11 compiler that includes `<random>` (if you don't, you can use `boost::random` from Boost library), you can use this class for better pseudo-random numbers:

```
#include <ctime>
#include <random>

class rng
{
private:
    std::mt19937 rng_engine;

    static rng& instance()
    {
        static rng instance_; 
        return instance_;
    }

    rng() {
        rng_engine.seed(
            static_cast<unsigned long>(time(nullptr))
            );
    };

    rng(rng const&);
    void operator=(rng const&);

public:
    static long random(long low, long high)
    {
        return std::uniform_int_distribution<long>
              (low, high)(instance().rng_engine);
    }
}; 
```

Then you use this to get random numbers in a `[a,b]` interval:

```
long a = rng::random(a, b); 
```

You don't need to seed it manually as it will be seeded on first invocation.

# actionscript-3 - 设置数组中元素出现的机会

> ID：12114189
> 
> 赞同：3
> 
> 时间：2012-08-24T17:39:41.567
> 
> 标签：actionscript-3, flash-builder

例如，我在一个数组中有 3 个元素：

```
public function randomTile():Number

{

var tiles:Array = new Array(fire,ice,water);

var index:Number=Math.floor(Math.random()*tiles.length);

return tiles[index];

} 
```

如何设置火（70%）、冰（10%）和水（20%）的发生概率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:54:41.100

有很多方法可以做到这一点，这在很大程度上取决于项目的范围。如果您只有三个元素，那么使用 switch 语句会很容易：

```
var rand:Number = Math.random();
switch(true){
    case rand >= .3:
        //use fire
        break;

    case rand >= .1
        //use water
        break;

    default:
        //use ice
} 
```

其他人可能有更好的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:18:47.470

这应该适用于任意数量的元素，您可以指定任何机会值。

```
var tiles:Array = [
  {"item":"fire", "chance":70 },
  {"item":"ice",  "chance":10 },
  {"item":"water","chance":20}
];

var picked:Object = pickRandomByChance(tiles);
trace(picked.item);

public function pickRandomByChance(options:Array):Object
{
  var copy:Array = [];
  var range:Number = 0;
  for (var i:int = 0; i < options.length; i++) 
  {
    copy.push( { "item":options[i].item, "chance":options[i].chance } );
    range += copy[i].chance;
    if (i > 0)
      copy[i].chance += copy[i - 1].chance;
  }

  var pick:Number = Math.floor(Math.random() * range);

  for (i = 0; i < copy.length; i++)
  {
    if (pick <= copy[i].chance)
      return copy[i];
  }
  return null;
} 
```

# android - Detect app on screen

> ID：12114195
> 
> 赞同：0
> 
> 时间：2012-08-24T17:40:12.480
> 
> 标签：android

Is there any way to detect an app is running on screen? This means the app the user is working with and is visible to the user. Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:00:35.927

The previous answer is a good general purpose solution but does require the additional permission and may not exactly handle your requirement for knowing if something is visible. If youre looking to do this from inside your own app, an alternative might be to track the visibility of your activities using the activity lifecycle Android provides.

Note that Activity.onPause happens when activity is about to become no longer visible to user. (from: [http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle))

It's tempting to use onStop to detect non-visibility, but this is often fired AFTER the next activity is already visible.

Conversely, onResume can be used to track that an activity is visible.

You could use these behaviors via a subclassing of Activity along with an implementation of android.app.application to keep track of whether or not any of your activities are visible.

For example:

The Application class used to do tracking:

```
public class Application extends android.app.Application {
    private static final String TAG = "example";

    private Class<? extends BaseActivity> _visibleActivity = null;

    public boolean isAnyActivityVisible() {
    return (_visibleActivity != null);
    }

    public synchronized void setVisibleActivity(Class<? extends BaseActivity> activity) {
    _visibleActivity = activity;

    Log.w(TAG,
        String.format("setting visible activity to: %s",
            isAnyActivityVisible() ? _visibleActivity.toString() : "none")
    );
    }
} 
```

To use this adjust the application tag in your manifest to reference your Application class as in:

```
<application
        android:name="com.example.activityvisibletracker.Application" />
...
</application> 
```

The BaseActivity that all of your Activities will derive from:

```
public abstract class BaseActivity extends Activity {

    @Override
    public void onResume(){
    super.onResume();
    Application app = (com.example.activityvisibletracker.Application) this.getApplication();
    app.setVisibleActivity(this.getClass());
    }

    @Override
    public void onPause(){
    super.onPause();

    Application app = (Application) this.getApplication();
    app.setVisibleActivity(null);
    }
} 
```

And finally, an example Activity that extends BaseActivity:

```
public class MainActivity extends BaseActivity {
    // whatever implementation you like
} 
```

Whenever you want to know if something is visible (probably from some service or thread in your app) you only need a Context to get at the Application and then can call isAnyActivityVisible() as in:

```
// cast getApplication() result to your Application type
((com.example.activityvisibletracker.Application)context.getApplicationContext()).isAnyActivityVisible(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:45:12.930

Yes. Check this code:

```
 List<ActivityManager.RunningTaskInfo> runningTasks = activityManager.getRunningTasks(4096); 
    return runningTasks.get(0).topActivity.getPackageName(); 
```

returns the package name. This needs

```
 <uses-permission android:name="android.permission.GET_TASKS" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:21:31.993

This doesn't work when the lockscreen is called on ICS, you get the whole lifecycle even though your app just remained sitting there.

# javascript - 使用以下划线 ("_") 开头的属性名称

> ID：12114196
> 
> 赞同：5
> 
> 时间：2012-08-24T17:40:12.793
> 
> 标签：javascript, node.js

我在我的节点脚本中有这个（简化了这个问题）：

```
var http = require("http"),
    url = require("url"),
    options = url.parse("http://example.com/"),
    moreOptions = url.parse("http://example.net/"),
    callback,
    request,
    moreDifferentRequest;

callback = function( res ) {
    console.log(res.socket._httpMessage._headers.host);
}

request = http.request( options, callback );
request.end();

moreDifferentRequest = http.request( moreDifferentOptions, callback );
moreDifferentRequest.end(); 
```

我正在从中获取主机名，`res.socket._httpMessage._headers.host`因为它不存在于`res.headers`.

但是下划线让我停下来。他们对我说，“嘿，这将被视为仅供内部使用的私有财产`socket`，所以不要阅读它，因为它可能会在以后的版本中完全改变，我们不会告诉你。”

如果我认为我在这里*做错*了，那么在回调中获取主机名的正确方法是什么？还是我只是完全误解了下划线而我正在做的事情很好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:13:11.973

是的，这正是他们想要表达的。如果可能的话，正确的方法当然是公开的、记录在案的 API。但如果这不可能，那么你必须这样做，并意识到如果出现问题，它就在你身上。

* * *

由于您正在发送请求，因此您可以从以下位置获取主机标头：

```
options.host 
```

HTTP 响应没有主机标头，它是客户端（您）在请求中发送主机标头。

* * *

带包装功能：

```
var http = require("http"),
    opts = require("url").parse( "http://stackoverflow.com" );

function wrapper( options, callback ) {
    return function() {
        args = [].slice.call(arguments);
        args.push( options );
        return callback.apply( this, args );
    }
}

request = http.request( opts, wrapper(opts, function(response, options){
    console.log( options.host );
}));

request.end(); 
```

# ios - IOS在viewdidload上添加loadingview

> ID：12114199
> 
> 赞同：-2
> 
> 时间：2012-08-24T17:40:18.353
> 
> 标签：ios

我正在使用带有 IOS 5 的故事板。由于图像处理繁重，我需要在 viewdidload 中加载加载视图。它没有显示加载视图。我在不同的地方尝试了下面的代码并且它有效。只是不在viewdidload上。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notify_action_finish:) name:@"StopLoadingView" object:nil];
loadingView =[tfbLoadingView loadingViewInView:[self.view.window.subviews objectAtIndex:0]]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:32:22.617

正如 Eric 在他的评论中所说，使用 MBProgressHud 加载视图。

将 HUD 添加为窗口的子视图。

```
 // Should be initialized with the windows frame so the HUD disables all user input by covering the entire screen
    HUD = [[MBProgressHUD alloc] initWithWindow:[UIApplication sharedApplication].keyWindow];

    // Add HUD to screen
    [self.view.window addSubview:HUD];

    // Register for HUD callbacks so we can remove it from the window at the right time
    HUD.delegate = self;

    HUD.labelText = NSLocalizedString(@"Loading Workbench", nil);
    HUD.detailsLabelText = NSLocalizedString(@"please wait", nil);

    // Show the HUD while the provided method executes in a new thread
    [HUD showWhileExecuting:@selector(loadWorkbench:) onTarget:self withObject:nil animated:YES]; 
```

添加以下委托方法：

```
- (void)hudWasHidden {
    // Remove HUD from screen 
    [HUD removeFromSuperview];

    // add here the code you may need

} 
```

也不要忘记添加`MBProgressHUDDelegate`相应的头文件。

# mysql - MySQL 数据库的 ISO 8601 时间戳：MySQL 日期时间值不正确

> ID：12114201
> 
> 赞同：8
> 
> 时间：2012-08-24T17:40:33.433
> 
> 标签：mysql, node.js, datetime, phpmyadmin, iso8601

错误日志：

> { [错误：不正确的日期时间值：'2012-08-24T17:29:11.683Z' 列 'robot _refreshed_at' 在第 1 行] 编号：1292，sqlStateMarker：'#'，sqlState：'22007'，消息：'不正确datetime value: \'2012-08-24T17:29:11.683Z\' for column \' robot_refreshed_at\' at row 1', sql: 'INSERT INTO users (id,name,count_moments,count_likes,count_followers,rob ot_refreshed_at,robot_count_followers ) VALUES (\'1834084\',\'NNNyingzi\',\'5\',\'0\',\'0\',\'2012-08-24T17:29:11.683Z\',\' 0\')', setMaxListeners: [Function], emit: [Function], addListener: [Function], on: [Function], once: [Function], removeListener: [Function], removeAllListeners: [Function], listeners: [功能] }

我在我的`Node.js`

```
 if s instanceof Date
         return s.toISOString() 
```

并在数据库中更新它们。

`SQL`插入表达式如下：

```
 INSERT INTO users (id,name,count_moments,count_likes,count_followers,rob ot_refreshed_at,robot_count_followers) VALUES (\'1834084\',\'NNNyingzi\',\'5\',\ '0\',\'0\',\'2012-08-24T17:29:11.683Z\',\'0\') 
```

我做错什么了吗？我只是从服务器中的表中复制了`PHPMyAdmin`一个表。

非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T17:42:59.910

如[日期和时间文字](http://dev.mysql.com/doc/en/date-and-time-literals.html)中所述：

> MySQL以这些格式识别[`DATETIME`](http://dev.mysql.com/doc/en/datetime.html)和重视：[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)
> 
> *   作为一个`'YYYY-MM-DD HH:MM:SS'`或`'YY-MM-DD HH:MM:SS'`格式的字符串。这里也允许使用“宽松”的语法：任何标点符号都可以用作日期部分或时间部分之间的分隔符。例如，`'2012-12-31 11:30:45'`、`'2012^12^31 11+30+45'`、`'2012/12/31 11*30*45'`和`'2012@12@31 11^30^45'`是等价的。
>     
>     
> *   作为在任何一种格式中都没有分隔符的`'YYYYMMDDHHMMSS'`字符串`'YYMMDDHHMMSS'`，前提是该字符串作为日期有意义。例如，`'20070523091528'`and`'070523091528'`被解释为`'2007-05-23 09:15:28'`, 但是`'071122129015'`是非法的（它有一个无意义的微小部分）并且变成`'0000-00-00 00:00:00'`.
>     
>     
> *   作为任一`YYYYMMDDHHMMSS`格式`YYMMDDHHMMSS`的数字，前提是该数字作为日期有意义。例如`19830905132800`和`830905132800`被解释为`'1983-09-05 13:28:00'`。
>     
>     
> 
> 一个[`DATETIME`](http://dev.mysql.com/doc/en/datetime.html)或[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)值可以包括一个尾随小数秒部分，精度高达微秒（6 位）。尽管可以识别此小数部分，但它会从存储到[`DATETIME`](http://dev.mysql.com/doc/en/datetime.html)or[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)列中的值中丢弃。有关 MySQL 中小数秒支持的信息，请参阅[第 11.3.6 节，“时间值中的小数秒”</a>。](http://dev.mysql.com/doc/en/fractional-seconds.html)
> 
> [](http://dev.mysql.com/doc/en/fractional-seconds.html)

 [您的日期文字`'2012-08-24T17:29:11.683Z'`不符合任何这些格式；建议你——](http://dev.mysql.com/doc/en/fractional-seconds.html) 

[](http://dev.mysql.com/doc/en/fractional-seconds.html)
*   [改用 Node.js Date 对象的](http://dev.mysql.com/doc/en/fractional-seconds.html)[`toLocaleFormat()`](http://nodemanual.org/0.6.10/js_doc/Date.html#Date.toLocaleFormat)方法（确保 MySQL 连接的时区与 Node.js 的区域设置相匹配）：

    ```
     if s instanceof Date
             return s.toLocaleFormat("%Y-%m-%d %H:%M:%S") 
    ```

*   使用 Node.js Date 对象的[`valueOf()`](http://nodemanual.org/0.6.10/js_doc/Date.html#Date.valueOf)方法获取自 UNIX 纪元以来的时间值（以*毫秒为单位*），除以`1000`（获取自 UNIX 纪元以来的*秒数*）并通过 MySQL 的[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:01:11.333

我在这个链接上找到它：

[MySQL 插入 DATETIME：使用 ISO::8601 格式是否安全？](https://stackoverflow.com/questions/11053941/mysql-insert-to-datetime-is-it-safe-to-use-iso8601-format)

插入 ISO8601 时间戳似乎并不安全。这取决于`MySQL`. 也许不同的版本使用不同的方法。

```
Date.prototype.format = (format) ->
  o = { 
    "(M+)" : this.getMonth()+1,
    "(d+)" : this.getDate(),
    "(h+)" : this.getHours(),
    "(m+)" : this.getMinutes(),
    "(s+)" : this.getSeconds(),
    "(q+)" : Math.floor((this.getMonth()+3)/3),
    "(S)" : this.getMilliseconds()
  } 
  if /(y+)/.test(format)
    format = format.replace(RegExp.$1, (this.getFullYear()+"").substr(4 - RegExp.$1.length))
  for k, v of o
    if (new RegExp(k)).test(format)
       format = format.replace(RegExp.$1, if RegExp.$1.length == 1 then o[k] else ('00'+ o[k]).substr((''+ o[k]).length))
  return format 
```

这段代码可以提供`node.js`格式化一个`Date`

# javascript - [AutoIt]如何使用FF.au3在FireFox上运行javascript进入页面

> ID：12114203
> 
> 赞同：1
> 
> 时间：2012-08-24T17:40:42.703
> 
> 标签：javascript, autoit

使用 AutoIt 在 FireFox 上使用 FF.au3 时遇到问题。示例：我有一个简单的代码：

```
<html>
    <head>
    </head>
    <body>
        <script>
            function test()
            {
                alert('test');
            }
        </script>

            <input type="button" onclick="test()" value="Test">

    </body>
</html> 
```

如何运行 test() 函数但不需要单击测试按钮

和

测试按钮没有id属性，如何在测试按钮上使用_FFClick()函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:15:12.507

尝试将 body 标签替换为

```
<body onload="test() ;"> 
```

和按钮的代码

```
<input type="button" onclick="_FFClick()" value="Test"> 
```

# php - 将 magento 商店移动到新服务器 - 1.3.2.4 - 产品图片不加载

> ID：12114206
> 
> 赞同：1
> 
> 时间：2012-08-24T17:40:46.583
> 
> 标签：php, magento

我正在帮助朋友将商店转移到新服务器，但我现在遇到了问题。我已将数据库和文件复制到新服务器（因为商店使用个人主题和一些个人扩展名。

我更新了 core_flag 以更改 web_unsecure_url 和 web_secure_url，并更新了 /app/etc 中的 local.xml 和 config.xml。我还清除了图像缓存，这似乎是问题的开始。

这是商店现在的样子：184.170.141.77。如您所见，页面的一部分正确加载，但没有加载媒体文件夹中的块和图像，并且似乎一旦主题尝试在页面中插入标签，一切都停止加载。不过，所有图像都可以在后端完美加载。

我查看了 apache 错误日志，什么也没有出现。我也尝试禁用缓存，这不会改变任何东西。我还尝试停用所有产品并重新激活它们，这也无济于事。

查看萤火虫中的脚本面板，这就是我发现的：

```
 <div class="listing-type-list catalog-listing">
   <div class="listing-item">
   <div class="product-image">
   <a href="http://184.170.141.77/graines-exotiques/graines-abutilon-megapotamicum-graines-drapeau-belge.html" title="">
    <img src=" 
```

一旦遇到图像的链接，该页面似乎停止加载所有内容。查看主题列表文件 list.phtml，这似乎是问题所在：

```
<img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135, 135); ?>" width="135" height="135" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" /> 
```

然而，这与默认文件夹中的内容完全相同。

我检查了文件夹的权限，一切似乎都是正确的。然后我将 src 更改为：

```
<?php echo $_product->getSmallImage(); ?> 
```

虽然这不会加载任何图像，但至少所有项目都会出现在页面上。我也试过这条线：

```
Mage::helper('catalog/image')->init($_product, 'image')->resize(135,135) 
```

但我得到与原始代码相同的结果。

有谁知道这个问题的原因可能是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T16:36:55.523

虽然这个问题已经将近一年了，但我想回答它。

由于我有同样的问题，我发现新服务器上没有安装 php5-gd。

因此，快速简便的解决方案是例如。对于 Debian 系统：

```
apt-get install php5-gd 
```

对于 CentOS/Fedora/Redhat 系统：

```
yum install php-gd 
```

# html - 在 IE 7/8 中旋转父级时剪切子元素

> ID：12114207
> 
> 赞同：0
> 
> 时间：2012-08-24T17:40:51.363
> 
> 标签：html, css

IE 7/8 中的剪辑问题。

如果我旋转父 div，即使溢出未设置为隐藏，它内部的图像也会被剪裁。当没有旋转时，图像看起来很好，但是一旦完全转换，父级边界之外的任何东西都会被隐藏。

IE7截图： [http ://c311725.r25.cf1.rackcdn.com/Screen%20Shot%202012-08-24%20at%2010.38.21%20AM.png](http://c311725.r25.cf1.rackcdn.com/Screen%20Shot%202012-08-24%20at%2010.38.21%20AM.png)

使父 div 变大显然可以解决这里的问题，但这不适用于我试图应用此修复的实际站点。感谢您的任何提示！

[http://jsfiddle.net/56SS9/](http://jsfiddle.net/56SS9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:47:24.497

我相信这与 ie 7 中的 z-index 很奇怪有关。尝试将图像的 z 索引设置为高于其旋转父级。我没有亲身经历过，所以我不确定什么/是否有解决方案。

有关先前提出的类似问题，请参见[此处](https://stackoverflow.com/questions/2880363/absolute-positioned-element-clipping-if-position-outside-its-parent-item-ie7)，该问题没有提供明确的解决方案。

# java - 什么可能导致 RequestMappingHandlerMapping 无法正确注册？

> ID：12114214
> 
> 赞同：7
> 
> 时间：2012-08-24T17:41:22.307
> 
> 标签：java, xml, spring, spring-mvc

我正在尝试注册一个`HandlerInterceptorAdapter`实例，尽管无论我做什么它都不会被执行。

我尝试[从 spring 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)中复制示例，但没有成功。

是不是`<annotation-driven>`正在做一些可能阻止我的拦截器被注册的事情？

我尝试从中删除 id，`handlerMapping`但这只会导致 spring 在容器中注册两个实例。

我尝试在根上下文和 servlet 上下文中注册。

**完整的 servlet-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xsi:schemaLocation="
              http://www.springframework.org/schema/mvc
              http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
              http://www.springframework.org/schema/beans
              http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

  <!-- Configures the @Controller programming model -->
  <annotation-driven/>

  <beans:bean id="handlerMapping"
        class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <beans:property name="interceptors">
      <beans:list>
        <beans:ref bean="officeHoursInterceptor"/>
      </beans:list>
    </beans:property>
  </beans:bean>
  <beans:bean id="officeHoursInterceptor"
        class="com.johnsands.web.servlet.TimeBasedAccessInterceptor">
    <beans:property name="openingTime" value="9"/>
    <beans:property name="closingTime" value="18"/>
  </beans:bean>

  <!-- ReST Exception Handling
       http://www.stormpath.com/blog/spring-mvc-rest-exception-handling-best-practices-part-1
       -->
  <beans:bean id="restExceptionResolver"
              class="com.stormpath.spring.web.servlet.handler.RestExceptionHandler">
    <beans:property name="order" value="100"/>
    <beans:property name="errorConverter">
      <beans:bean class="com.johnsands.spring.web.servlet.handler.BasicRestErrorConverter"/>
    </beans:property>
    <beans:property name="errorResolver">
      <beans:bean class="com.stormpath.spring.web.servlet.handler.DefaultRestErrorResolver">
        <beans:property name="localeResolver" ref="localeResolver"/>
        <beans:property name="defaultMoreInfoUrl" value="mailto:support@mycompany.com"/>
        <beans:property name="exceptionMappingDefinitions">
          <beans:map>
            <!-- 404 -->
            <beans:entry key="com.johnsands.api.ResourceNotFoundException" value="404, _exmsg"/>

            <!-- 500 (catch all): -->
            <beans:entry key="Throwable" value="500"/>
          </beans:map>
        </beans:property>
      </beans:bean>
    </beans:property>
  </beans:bean>

  <beans:bean id="localeResolver" class="org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver"/>

  <!-- Handles HTTP GET requests for /static/** by efficiently serving up static resources in the ${webappRoot}/static/ directory -->
  <resources mapping="/static/**" location="/static/" />

  <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
  <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
  </beans:bean>

  <!-- Imports user-defined @Controller beans that process client requests -->
  <beans:import resource="controllers.xml" />

</beans:beans> 
```

controllers.xml 并没有做太多

```
<!-- Maps '/' requests to the 'home' view -->
<mvc:view-controller path="/" view-name="home"/>
<mvc:view-controller path="/login" view-name="login" />
<mvc:view-controller path="/logout" view-name="logout" />

<!-- Scans the classpath of this application for @Components to deploy as beans -->
<context:component-scan base-package="com.johnsands" /> 
```

处理程序如下：

```
public class TimeBasedAccessInterceptor
        extends HandlerInterceptorAdapter {

    private static final Logger log =
            LoggerFactory.getLogger(TimeBasedAccessInterceptor.class);
    private int openingTime;
    private int closingTime;

    public TimeBasedAccessInterceptor() {
        log.info(" *** Constructing Instance *** ");
    }

    public void setOpeningTime(int openingTime) {
        this.openingTime = openingTime;
    }

    public void setClosingTime(int closingTime) {
        this.closingTime = closingTime;
    }

    @Override
    public boolean preHandle(HttpServletRequest request,
                             HttpServletResponse response,
                             Object handler) throws Exception {
        log.info(" *** (preHandle) *** ");
        Calendar cal = Calendar.getInstance();
        int hour = cal.get(Calendar.HOUR_OF_DAY);
        if (openingTime <= hour && hour < closingTime) {
            return true;
        } else {
            response.sendRedirect("http://www.google.com.au");
            return false;
        }
    }

    @Override
    public void postHandle(HttpServletRequest request,
                           HttpServletResponse response,
                           Object handler,
                           ModelAndView modelAndView)
            throws Exception {
        log.info(" *** (postHandle) *** ");
    }

    @Override
    public void afterCompletion(HttpServletRequest request,
                                HttpServletResponse response,
                                Object handler,
                                Exception ex)
            throws Exception {
        log.info(" *** (afterCompletion) *** ");
    }

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T18:17:07.260

是的，您`<mvc:annotation-driven/>`使用通过它注册的自定义拦截器覆盖您创建的 RequestMappingHandlerMapping 是正确的。注册拦截器的方法是使用`<mvc:interceptors..>`：

```
<mvc:interceptors>
    <bean class=".."/>
</mvc:interceptors> 
```

或者，如果您希望在特定映射中使用它：

```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/test"/>
        <bean class="test"></bean>
    </mvc:interceptor>
</mvc:interceptors> 
```

如果你想要一个显式的`RequestMappingHandlerMapping`，那么你还需要定义 HandlerAdapter 来使用它并删除`mvc:annotation-driven`

# jquery - DFP Doubleclick 的 HTML 5

> ID：12114218
> 
> 赞同：1
> 
> 时间：2012-08-24T17:41:35.050
> 
> 标签：jquery, macros, double-click

我有一个为移动设备创建的 jQuery 渐变幻灯片，将由 DGP DGP DFP 广告管理系统显示。我首先通过将其作为没有 HREF 的标签提交来确保一切正常。因为这是广告，我真的很想为每张图片设置一个不同的 URL，当然是广告，这需要跟踪。我的两个想法是使用 Google Analytics，并让每个 URL 都使用这个

```
onClick="_gaq.push(['_trackEvent', 'campaign', 'Click1', 'offer1']); etc. 
```

以这种格式提交了我的 jQuery 幻灯片后，AdOps（他们是 DFP 的新手）告诉我这是行不通的。我收到了错误消息的屏幕截图。

> 抱歉，我们无法识别此标签。如果您想通过 DFP 跟踪点击次数并避免计数差异，则必须手动插入宏。

宏只是我添加到 URL 中的东西吗？

我的另一个想法是使用 Google 创建的 clickTracking URL。AdOps 告诉我，他们读到您不能在 DFP 中使用 clickTracking URL，而且我还没有提交用于测试的 URL，但由于告诉我这一点的人是新手且不是真正精通技术的天性，我希望这里的人可能知道这是否真的是真的。

主要是征求意见和建议。如果我不能为每张图片跟踪不同的 URL，它不会成为交易杀手，但它会很甜蜜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T06:51:12.470

首先，DFP 中的宏是您放入广告素材（在广告素材片段中或在几个特定字段之一中）的东西，该广告素材可以扩展为其他内容。它可以是字符串、数字、URL 等，具体取决于您使用的宏。以下是 DFP 高级版中可用的宏列表：https: [//support.google.com/dfp_premium/answer/1242718?hl=en](https://support.google.com/dfp_premium/answer/1242718?hl=en)

如果您想跟踪幻灯片中每张图片的点击次数，您不能直接在 DFP 中使用常规方法直接执行此操作。通常，要在 DFP 中投放第 3 方或自定义广告素材，您需要使用锚链接中的 Click 宏来直接在 DFP 中跟踪任何点击。但是，当您执行此操作时，点击跟踪链接会将使用此宏的所有点击归因于此广告素材。因此，如果您对每个图片链接使用 click 宏，它们都将归于同一个广告素材，您将无法判断幻灯片中每张图片获得了多少点击。如果您只想直接在 DFP 中跟踪总点击次数，则可以在每个链接中使用 Click 宏。否则，DFP 广告素材中不需要 Click 宏。请注意，您可能不会

要跟踪广告素材中每张图片的点击次数，您需要使用其他方法来跟踪每张图片。你的两个想法都应该有效。对于 #1，这应该可以，但您必须在 Google Analytics 中完成所有报告。这在技术上无法用于跟踪 DFP 中的点击，因为如果没有 Click 宏，DFP 将不会以这种方式跟踪任何点击。但是，如果您的目标只是让这些点击可以从某个地方（在本例中为 Google Analytics）报告，那么这应该可以达到您的目的。

您的第二个想法也应该有效。您必须为要跟踪的每个图像创建一个点击跟踪订单项，但您可以从每个订单项中获取每个 URL，并将其用作原始幻灯片广告素材中图像的链接。您必须报告每个点击跟踪订单项而不是幻灯片订单项，因此需要做一些额外的工作，但这也应该可以满足您的目的。以下是有关如何创建点击跟踪订单项以防万一的说明：https: [//support.google.com/dfp_premium/answer/1212244?hl=en](https://support.google.com/dfp_premium/answer/1212244?hl=en)。

# vb.net - 将消息从控制器发送到 SignalR Hub

> ID：12114221
> 
> 赞同：1
> 
> 时间：2012-08-24T17:41:57.120
> 
> 标签：vb.net, asp.net-mvc-3, signalr

我有一个 MVC 3、VB.NET、Razor 应用程序，它使用 SignalR 进行聊天和系统消息系统......聊天工作完美，但我希望能够在我的管理控制器中添加一个功能，将消息发送到集线器然后将执行其正常操作，就好像 Javascript 从视图中调用它一样...集线器设置如下：

```
Imports SignalR.Hubs
Imports SignalR

Namespace SingalRTest
 Public Class Chat
    Inherits Hub
    Public Sub Send(ByVal clientName As String, ByVal message As String)
        'Call the addMessage method on all clients.
        Clients.addMessage(clientName, message)
    End Sub

 End Class
End Namespace 
```

我考虑过简单地使用 NEW 但这行不通，因为据我了解，集线器的实例必须保持不变..

我想做的是这样的：

```
 Public Function notification(ByVal systemMessage as string)
        Dim y As SingalRTest.Chat = Nothing
        y.Send(User.Identity.Name.ToString, systemMessage)
        Return RedirectToAction("Index", "Admin")
 End Function 
```

这根本不起作用，错误说：

```
 Object reference not set to an instance of an Object 
```

当它到达 y.Send 线时...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T01:30:55.360

哇，这花了很多时间在互联网上找到。我只需要在我的 Hub 类中添加一个共享子类，现在看起来像这样：

```
Imports SignalR.Hubs
Imports SignalR

Namespace SingalRTest

Public Class Chat
    Inherits Hub
    Public Sub Send(ByVal clientName As String, ByVal message As String)
        'Call the addMessage method on all clients.
        Clients.addMessage(clientName, message)
    End Sub
    Friend Shared Sub SendMessage(message As String)
        Dim context As IHubContext = GlobalHost.ConnectionManager.GetHubContext(Of Chat)()
        context.Clients.addMessage("System Message", message)
    End Sub
End Class

End Namespace 
```

然后，每当我想在窗口中发送通知时，我只需将此代码放在控制器函数中即可在所有客户端上调用 addMessage 方法：

```
 SingalRTest.Chat.SendMessage("Testing Only") 
```

也许这会帮助别人。

# php - Div 覆盖在背景上而不停止滚动

> ID：12114222
> 
> 赞同：0
> 
> 时间：2012-08-24T17:42:01.717
> 
> 标签：php, html, overlay

我想要一个在背景图像（#page）上覆盖紫色的 div，以覆盖整个页面，而不仅仅是页面的一部分。目前，如果页面不滚动，它会覆盖页面，但一旦页面需要用户滚动，就会发生这种情况：

[http://darynjohnson.com/Medical%20Futures/winners.php](http://darynjohnson.com/Medical%20Futures/winners.php)

我尝试将位置更改为静态，但完全停止滚动。

已解决：刚刚将紫色 div 更改为溢出：滚动；- 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:01:27.520

例如，您可以将紫色放在另一个 div 中。

```
<style>
body { background: img 'yoururl.jpg'; }
#purple {background-color: rgba(120,46,134,0.6);}
</style>

<body>
<div id="purple">
your content
</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:58:35.047

You need to set your background image to fixed. You can do this like that:

```
<body background="yourimage.jpg" bgproperties="fixed"> 
```

You could also let your background move with the content using CSS. The following lines would do that:

```
<style type="text/css">
body
{
      background-image:url('yourbackground.jpg');
      background-repeat:no-repeat;
}
</style> 
```

# c# - LINQ 根据列表查询字典

> ID：12114227
> 
> 赞同：6
> 
> 时间：2012-08-24T17:42:23.143
> 
> 标签：c#, linq, list, dictionary, linq-to-objects

我有

```
List<string> selectedOptions;
Dictionary<string,string> masterList; 
```

`masterList`由 Keys 组成，它们是`selectedoptions`. 现在，我想提取`selectedOptions`和之间相交键的所有值`masterList`。

如何构建 LINQ 查询？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T17:46:42.213

```
IEnumerable<KeyValuePair<string,string>> results = 
    dic.Join(keys, d => d.Key, x => x, (a, b) => a); 
```

或者当然

```
var results2 = keys.Select(k => new {key = k, value = dic[k]}); 
```

但如果密钥不存在，这将爆炸。

`Where(k => dic.ContainsKey(k))`你可以用一个子句来解决这个问题：

```
var results3 = keys
     .Where(k => dic.ContainsKey(k))
     .Select(k => new {key = k, value = dic[k]}); 
```

在搜索了 Linq 源码之后，我认为最后一种方法可能是最有效的。执行连接会强制 linq`Lookup`在连接中涉及的一个集合上创建一个（实际上是多条目哈希表）。鉴于我们已经有一个 Dictionary 提供与 a 相同的查找性能`Lookup`，因此构建 a`Lookup`是多余的。

# python - Apache 背后的 CherryPy SSL

> ID：12114229
> 
> 赞同：0
> 
> 时间：2012-08-24T17:42:32.327
> 
> 标签：python, ssl, apache2, cherrypy

有没有办法设置 CherryPy 在 Apache2 后面运行时使用 SSL 而无需配置 Apache2 为 CherryPy 执行 SSL？

我找到了多个关于将 SSL 与 CherryPy 一起使用以及配置 Apache2 为 CherryPy 执行 SSL 工作的教程，但我无法找到一个教程来处理在 Apache2 后面使用 SSL 和 CherryPy 而无需配置 Apache2 来执行 SSL 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:11:45.313

解释一下 gcbrizan 的回答，你不能，因为理解 https 请求所需的第一步是首先解密连接。SSL/TLS 有两种工作模式；隧道和 STARTTLS；在后者中，开始一个正常的连接，并且在某个时候，一旦双方建立了他们想要对连接做的任何事情；一个对等方要求另一个对等方开始加密连接。ESMTP（电子邮件）使用这种机制。

然而，HTTP 没有 starttls 功能。所以改为使用隧道。在传输任何 http 流量之前，双方都会启动一个安全隧道；客户端验证服务器证书的正确性，服务器可以为客户端做同样的事情（如果需要/请求）。只有在所有这些都发生后，客户端才会发送页面请求。

是 apache（或任何其他代理）执行此操作，这意味着它必须将*所有*加密流量传递到源服务器（在您的问题中为cherrypy），因为流量已加密，代理没有机会“在此处发送此请求，但那里的请求”。如果它只是通过未经修改的所有流量，那么它根本没有做任何有用的事情；你也可以直接暴露源服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:01:39.380

你不能这样做（我也不会尝试）。首先，Apache 在终止 SSL 方面会比 CherryPy 更好（如果没有其他原因，那就是性能）。其次，它根本不起作用，因为 Apache 使用 HTTP，而 HTTPS 实际上是使用 SSL 加密的 HTTP，因此在获得任何 Apache 可以理解的 HTTP 之前，您需要处理 SSL。

# php - 为什么 UTF-8 在我的一个 PHP 文件中有效，而在另一个文件中无效？

> ID：12114233
> 
> 赞同：1
> 
> 时间：2012-08-24T17:42:44.123
> 
> 标签：php, html, utf-8, character-encoding

我`<meta http-equiv="content-type" content="text/html; charset=utf-8" />`在我的 PHP 文件中使用来启用像`ąčęė...`.

在我的 index.php 文件中，由 HTML 或 PHP 生成的文本看起来不错，但在另一个文件 (miestai.php) 中，由 PHP 编写的文本看起来不错，但由 HTML 编写的文本却是混乱的（而不是 ą 我得到了）。

当我`<meta http-equiv="content-type" content="text/html; charset=utf-8" />`从该文件中删除时，HTML 编写的文本看起来不错，但 PHP 编写的文本却搞砸了。

**我该如何解决这个问题？**

*注意：两个文件都在同一个文件夹中。我什至将 index.php 中的所有内容都粘贴到了 miestai.php，但我仍然遇到了同样的问题。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:48:38.053

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:58:24.943

Your script may be saved as ANSI. You should save your document as UTF-8 without BOM. Save as like that. (You should convert it for this you can use Notepad ++)

# c# - 关于如何制作从 SVN 导出、运行一些代码生成等的 Visual Studio 模板？

> ID：12114237
> 
> 赞同：0
> 
> 时间：2012-08-24T17:43:05.653
> 
> 标签：c#, asp.net-mvc, visual-studio, automation, boilerplate

我还没有为 Visual Studio 编写模板或入门工具包，所以我不确定哪个最适合做我需要的事情，或者我是否需要更通用/更强大的东西。

我想做的是有一个模板项目，它从 subversion 导出一些样板代码，安装一些典型/必需的 Nuget 包，将新创建的项目导入 svn，运行一些 PowerShell 脚本等。

这是否可以通过模板或入门套件实现，或者这可能需要整个附加组件？

# ios - 我无法在 iPad 5.1 上运行我的应用程序，所以我需要将其降级到 5.0 或更低的 iOS 版本

> ID：12114241
> 
> 赞同：0
> 
> 时间：2012-08-24T17:43:30.223
> 
> 标签：ios, xcode, cordova

我开始使用 Phonegap 开发应用程序，并且我的应用程序在 Xcode 的模拟模式下运行没有问题。但是当我尝试在我的 iPad 上运行它时，我收到了这条消息：

“Xcode 无法使用所选设备运行。

没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。”

但是当我转到 Xcode > Window > Organizer 时，iPad 在我的设备中可用，但也有消息：

““Tool iPad”上的 iOS 版本与此安装的 iOS SDK 支持开发的任何 iOS 版本都不匹配。请将设备恢复到下面列出的操作系统版本，或更新到最新版本iOS SDK；可在此处获得。

安装在工具 iPad 5.1.1 (9B206) 上的操作系统

Xcode 支持的 iOS 版本 最新 5.0 (9A334) 4.3 4.2"

因此，我使用我的 AppID 访问了 Apple 开发者网站，但没有找到任何指向旧 iOS 版本的链接。我找到了这个网站 (http://www.felixbruns.de/iPod/firmware/) 并下载了适用于 iPad 的 iOS 4.3、4.3_5 和 5.0，但是当我尝试在 iTunes 上恢复设备时，软件提取开始并且我收到消息：

“iPad 无法恢复。此设备不符合请求的构建条件。”

我还可以做些什么？我正在使用 Xcode 4.2 和 Phonegap 1.7，我无法将它们用于工作问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:50:37.360

您需要更新 Xcode。您应该使用 Xcode 4.4.1 在最新版本的 os iOS 上进行开发。Apple 通常会在发布 iOS 和 OS X 的同时发布新版本的 Xcode。例如，您将需要 Xcode 4.5 或更高版本（目前处于测试阶段）来开发 iOS 6。

Apple 希望您在所有软件发布时更新到它们的最新版本。把它带到你的 IT 部门。它不仅需要 Lion，在不久的将来，Xcode 还将需要 Mountain Lion。除了迫使您的 IT 部门将您的机器更新到 10.8 之外，您确实无能为力。

另一个问题是 Apple 停止为旧版本的 iOS 签署 ipsw，从而迫使您进行更新。即使他们这样做了，Apple 也要求您通过 Xcode 针对当前版本的 iOS 构建应用程序。

# jquery - 在 jQuery 中检索文档的父 iframe

> ID：12114243
> 
> 赞同：12
> 
> 时间：2012-08-24T17:43:44.403
> 
> 标签：jquery, dom, iframe, selector

我有一个带有 iframe 的页面，其中包含一个 html 文档。我需要从该子文档中访问 iframe 的 id，并且我没有运气使用 jQuery。我的页面中的基本结构是这样的：

```
<div id="ContainingDiv">
  <iframe id="ContainingiFrame">
   <html>
     <head></head>
     <body>
     </body>
   </html>
  </iframe>
</div> 
```

在我的 javascript 方法中，我可以`<body>`使用 jQuery 选择器获取标签中的任何内容，但无法检索 iframe 元素以调整其大小。我已经尝试了一些东西，但我承认我不是 jQuery DOM 导航方面的专家，尤其是在涉及 iframe 的情况下（iframe 与包含页面在同一个域中。）有没有办法可以做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T17:51:54.667

根本不需要 jQuery。要获取父母的 body 对象，您可以这样做：

```
var parentBody = window.parent.document.body 
```

如果它与运行代码的 iframe 位于同一域中，则一旦拥有该域，就可以在该对象上使用普通的 javascript：

```
window.parent.document.getElementById("ContainingiFrame").style.height = "400px"; 
```

或使用 jQuery：

```
$("#ContainingiFrame", parentBody).height("400"); 
```

这是一篇关于使用示例代码从 iframe 中调整 iframe 大小的文章：[http ://www.pither.com/articles/2010/11/12/resize-iframe-from-within](http://www.pither.com/articles/2010/11/12/resize-iframe-from-within)

并且，关于根据自己的内容调整 iframe 大小的相关问题/答案：[Resizing an iframe based on content](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-24T17:51:40.373

要从**iframe 访问父文档，您**可以向选择器添加一个参数，默认为文档，但没有什么可以阻止您将上下文更改为 window.parent.document，如下所示：

```
$('#ContainingiFrame', window.parent.document).whatever(); 
```

或者在您的选择器之前添加它：

```
window.parent.$('#ContainingiFrame').whatever(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-06T08:08:17.300

如果您没有有关 iframe 的信息（例如要查询的标识符），那么您希望使用窗口的[frameElement](https://developer.mozilla.org/en-US/docs/Web/API/Window/frameElement)，如下所示：

```
var iframe_tag_in_parent_window = window.frameElement; 
```

现在您拥有 iframe 标记本身，并且可以直接在 JavaScript 中使用它。

要使用 jQuery 而不是纯 JavaScript，请使用以下内容：

```
var iframe_in_jquery = jQuery(window.frameElement, window.parent.document); 
```

我们刚刚讨论了第一部分（`window.frameElement`）。第二部分是 jQuery 将在其中找到元素并包装它的上下文。这是我们当前窗口的父文档。

例如，如果您在`iframe`标签中有一个唯一的 id，您可以这样做：

```
var iframe_in_jquery = jQuery(window.frameElement, window.parent.document),
    id = iframe_in_jquery.attr("id"); 
```

如果您的 JavaScript 代码正在运行，现在`id`是标识符。`iframe`

* * *

PS 如果`window.frameElement`为 null 或未定义，那么您不在`iframe`.

PPS 请注意，要在父窗口中运行代码，您可能需要使用 ; 的父实例`jQuery()`。这是使用`window.parent.jQuery(...)`. 如果您尝试参加`trigger()`活动，则尤其如此！

PPPS 确保使用`window.frameElement`，而不仅仅是`frameElement`......一些浏览器有些损坏，如果不完全合格，它们将无法始终访问正确的数据（尽管在 2016 年这个问题可能会得到解决？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T17:47:49.683

试试这个：

**调整内部一些元素的大小`iframe`：**

```
$('#ContainingiFrame', window.parent.document).find('#someDiv').css('height', '200px'); 
```

**或者只是调整大小`iframe`：**

```
$('#ContainingiFrame', window.parent.document).height('640'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T17:49:05.807

试试这个：

```
$("#ContainingiFrame").contents().find("#someDiv"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-06T06:38:07.693

如果你有一个元素的引用`iframe`并且需要找到它的父元素，`iframe`特别是当你有多个 iframe 时，这里是一种找到它的方法。

```
var $innerElement;//element inside iframe
var $iframeBody = $innerElement.closest('body');
var $parentIframe = $('iframe').filter(function () {
    return $(this).contents().find('body')[0] == $iframeBody[0];
}); 
```

# python - 列出每个键具有多个值的字典

> ID：12114255
> 
> 赞同：-1
> 
> 时间：2012-08-24T17:44:31.377
> 
> 标签：python, list, dictionary, type-conversion

我有一个包含键/值对的 Python 列表：

```
list = [ {'A': {'value': '2h25m'}, 'B': {'value': '2:45 AM'}, 
          'C': {'value': 'LAX'}, 'D': {'value': '+0100'}} ] 
```

我想将列表转换成这样的字典：

```
d = {'A': '2h25m', 'B': '2:45 AM', 'C': 'LAX', 'D':'+0100'} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:46:26.853

```
lst = [ {'A': {'value': '2h25m'}, 'B': {'value': '2:45 AM'}, 'C': {'value': 'LAX'}, 'D': {'value': '+0100'}} ]
my_dict = dict([(k, v['value']) for k, v in lst[0].items()]) 
```

首先，不要`list`用作变量名，因为它会影响内置`list()`函数。此外，如您所见，我使用列表推导式构建了一个包含 (key, value) 元组的列表，然后可以将其传递给`dict()`函数以创建所需的字典。

正如 mgilson 指出的那样，您还可以使用生成器表达式而不是列表推导：

```
lst = [ {'A': {'value': '2h25m'}, 'B': {'value': '2:45 AM'}, 'C': {'value': 'LAX'}, 'D': {'value': '+0100'}} ]
my_dict = dict((k, v['value']) for k, v in lst[0].items()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:28:49.473

您可以在更高版本的 Python 中使用[dict 推导：](http://www.python.org/dev/peps/pep-0274/)

```
In [30]: lst = [ {'A': {'value': '2h25m'}, 'B': {'value': '2:45 AM'}, 
    ...:           'C': {'value': 'LAX'}, 'D': {'value': '+0100'}} ]

In [31]: {k: v['value'] for k, v in lst[0].items()}
Out[31]: {'A': '2h25m', 'B': '2:45 AM', 'C': 'LAX', 'D': '+0100'} 
```

# java - JavaCL - 管理非常大的图像处理

> ID：12114263
> 
> 赞同：6
> 
> 时间：2012-08-24T17:45:32.947
> 
> 标签：java, image-processing

我正在从事一个处理大型图像处理（每张图像 50Mo）的工业项目，关键是性能。

**我选择在JavaCL**的帮助下将图像处理委托给 GPU 。我编写了一些测试以确定该方法是否正确。结果一目了然！

超过 100 次图像着色 GPU 获胜： **GPU=172ms vs. CPU=438ms**

目前，很明显 GPU 在这种计算方面比 CPU 更强大，但是！有问题，内存有问题。事实上，我的显卡有 256Mo 的 VRam，无法分配大于 8Mo 的图像！

所以，我的问题是，处理大于 8Mo 的图像的最佳方法是什么？

1.  平铺图像并处理每个平铺？由于 RAM 和 VRAM 之间的延迟，将成为性能杀手
2.  将原始像素提取为 float4 向量并将它们发送到 GPU ？
3.  换我的显卡？
4.  扔项目？
5.  多喝咖啡？

提前感谢所有人:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:57:29.070

我不熟悉 JavaCL 绑定——但在 OpenCL 中，有图像，然后有缓冲区。

您可以分配尽可能大的缓冲区，但使用[clCreateImage2D](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clCreateImage2D.html)创建的 cl_mem 的大小存在限制（CL_DEVICE_IMAGE2D_MAX_WIDTH 和 CL_DEVICE_IMAGE2D_MAX_HEIGHT）。与原始缓冲区相比，图像具有一些优势，例如提供硬件加速采样。如果您不需要采样或者可以在内核中实现自己的采样 - 那么可能可以使用缓冲区。否则，您将不得不平铺输入图像并解决平铺处理将引入的任何过滤伪影。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:59:47.993

如果您愿意选择语言，那么我建议您使用 CUVI (http://cuvilib.com)。它提供现成的易于使用的成像功能。很多颜色运算、过滤器、边缘检测器、算术运算等等。它是 C 语言，具有非常简洁的 C++ 模块化接口。

是的，您也可以分配大图像！

我可以帮助您（或任何其他感兴趣的人）开始使用 CUVI。在线 wiki (http://wiki.cuvilib.com) 是开始的正确位置。

披露：我是开发 CUVI 的团队的一员。另外，CUVI是一款商业软件

# php - 不包含图像/img/溢出的圆角：隐藏；

> ID：12114264
> 
> 赞同：0
> 
> 时间：2012-08-24T17:45:33.670
> 
> 标签：php, html, css

[http://jsfiddle.net/sheriffderek/4JkkF/1/](http://jsfiddle.net/sheriffderek/4JkkF/1/) ///新版本的小提琴///

请查看这个 jsfiddle。

我无法将我的图像保持在各自带有圆角的 div 的边界内。这真的很简单，直到我被要求在所有东西上加上边界半径......任何帮助将不胜感激......

![在此处输入图像描述](../Images/abcf14872289803be8a1044c19f69c45.png)

情况的进一步解释...

在每个“帖子”的 CSM 中，我填写字段...

一个以 php 作为标题，一个作为缩略图，一个作为描述，以及 - 一个作为进入滑块的图像。（img的列表）`<img src="" alt="">'s`等...

整个布局是流动的 - 所以我需要图像保持在像 div 这样的“框架”后面......就像在 css 中的背景图像中一样......并且在不弄乱圆角的情况下改变大小......我可以用img的样式来做，但我只是出于某种原因认为-img所在的div会决定外边缘......但是-到目前为止我错了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:59:50.567

When you specify a `border-radius`, then the content gets "wrapped" inside the borders -- so the image inside your `div` gets pushed by the corners, not clipped. You can achieve the desired behavior by using the image as a `background` to the `div` instead.

A little working demo: [little link](http://jsfiddle.net/Fnaty/4/).

I hope that helped in any manner!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:36:25.917

> 但我不明白为什么img首先出现在div中......

第一种情况下的图像本身比周围的 div 大。但是周围的 div 有一个溢出：隐藏加上宽度和高度。

所以环绕 div.thumbnail 不会按比例放大..

我的建议是：

```
 <div class="thumbnail" style="height:50%;width:50%;position:static">
    <img src="http://derekthomaswood.com/place/blink3.gif" alt="" style="position:static; display: block;width:100%;height:100%">
</div>
<!-- of course adjusting the classes, not as inline css ;-) 
  resizing works over adjusting the div.thumbnails dimensions
--> 
```

HTH 格克斯塔

# mysql - 试图构造一个涉及 MySQL 的 Bash 可执行字符串

> ID：12114268
> 
> 赞同：0
> 
> 时间：2012-08-24T17:45:48.810
> 
> 标签：mysql, linux, bash

我正在尝试编写一个 Bash 脚本来从脚本中构造的字符串运行 MySQL 查询。我已经能够构造查询字符串，并且在回显时看起来是正确的。我可以将它剪切并粘贴到 shell 命令行中并运行。但是，我基本上需要将查询结果缩减为 OK 或 CRITICAL 等单词。没有其他的。当我尝试将查询结果保存到 bash 变量时，我得到：

mysql：未知选项'-2'

如果我剪掉 grep 并剪掉代码，我会得到`mysql --help`结果。所以，它不喜欢我的 mysql 字符串，但我不知道为什么。帮助？

顺便说一句-运行 CentOS 6.3

```
alert=`mysql myDB -e "select value from config_table where name=\"ach_alert_time\"\G" | /bin/grep value: | /bin/cut -f2 -d:`
echo $alert  #Brings back 18,50,00

sql="mysql myDB -e 'select if(count(*) > 0,\"CRITICAL\",\"OK\") as STATUS from xyz_batch where timestamp > concat(date(now()),\" \",maketime("$alert"))\G' | /bin/grep OK  | /bin/cut -f2 -d:"
echo $sql # mysql myDB -e 'select if(count(*) > 0,"CRITICAL","OK") as STATUS from xyz_batch where timestamp > concat(date(now())," ",maketime( 18,50,00))\G' | /bin/grep OK | /bin/cut -f2 -d

status=`$sql`

# Whoops!
# mysql: unknown option '-2'

echo $status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:04:30.917

问题是，当您作为命令运行时，它会进行分词、文件名扩展等，而不考虑可能包含`$sql`的任何引号。`$sql`而且它*不会*处理管道和其他 shell 元字符。例如，如果您位于包含文件`foo`和的目录中`bar`，那么：

```
cmd="echo '     *     ' | grep baz"
$cmd 
```

将打印`' bar foo ' | grep baz`——它不会保留空格，它会将 扩展`*`为文件列表，并将`|`and`grep`视为`echo`.

您可以使用命令`eval "$sql"`而不是仅使用以下命令来解决此问题`$sql`：

```
status=`eval "$sql"` 
```

但您*可能*需要重新评估您的设计。也许有更好的方法来实现你想要的？

* * *

**编辑添加：**您说您正在脚本中构建查询，但您实际上是否需要将整个命令存储在变量中？像这样的东西：

```
sql="select if(count(*) > 0,\"CRITICAL\",\"OK\") as STATUS from xyz_batch where timestamp > concat(date(now()),\" \",maketime("$alert"))\G"
status=`mysql myDB -e "$sql" | /bin/grep OK  | /bin/cut -f2 -d:` 
```

不会有这个问题，因为 then`$sql`只是一个参数，所以你不需要 Bash 对它做任何特别的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:37:40.653

你可以让自己发疯，试图让每件事都正确逃脱。将其分解为可管理的步骤：

```
# Multiple lines allowed, for readability. Inside single quotes, no
# escaping needed.
sql_template='select if (count(*) > 0, "CRITICAL", "OK") as STATUS
  from xyz_batch
  where timestamp > concat( date( now() ), " ", maketime("%s"))\G'

# Bash 4 only
printf -v sql_stmt "$sql_template" "$alert"
# Bash 3 equivalent
# sql_stmt=$( printf "$sql_template" "$alert" )

status=$( mysql myDB -e "$sql_stmt" | awk -F: '/OK/ {print $2}' ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:05:50.057

双码有问题。

```
sql="mysql myDB -e 'select if(count(*) > 0,\"CRITICAL\",\"OK\") as STATUS from xyz_batch where timestamp > concat(date(now()),\" \",maketime("$alert"))\G' | /bin/grep OK  | /bin/cut -f2 -d:" 
```

用。。。来代替

```
sql=`mysql myDB -e 'select if(count(*) > 0,\"CRITICAL\",\"OK\") as STATUS from xyz_batch where timestamp > concat(date(now()),\" \",maketime("$alert"))\G' | /bin/grep OK  | /bin/cut -f2 -d:` 
```

# sql-server - SQL 查询中的两个转义字符

> ID：12114270
> 
> 赞同：3
> 
> 时间：2012-08-24T17:45:54.303
> 
> 标签：sql-server, syntax, count, escaping, special-characters

所以我在记录中有一堆包含“/”字符的字符串，例如：

```
RECORD_NAME
Foo bar
Foo/bar
Fo/o/bar 
```

以及数百万条记录。

我想说，用 2 '/' 字符计算记录数。

所以要找一个，我会说：

```
select count(*) from my_table where record_name like '%[/]%' 
```

这大概会得到所有带有一个“/”的人。

**我该如何计算带有两个正斜杠的那些？您可以在 SQL 查询中包含正则表达式吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:50:35.207

这应该工作：

```
select count(*) from my_table where record_name like '%/%/%' and record_name not like '%/%/%/%' 
```

这样，您将始终包含带有两个的行`//`，但如果有三个或更多，`not like`则将避免它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:02:44.937

很难准确确定您要查找的内容，但如果您要区分具有 1、2 或 n 个`/`字符的行：

```
DECLARE @x TABLE(y VARCHAR(32));

INSERT @x SELECT 'Foo bar0'
UNION ALL SELECT 'Foo/bar1'
UNION ALL SELECT 'Fo/o/bar2'
UNION ALL SELECT 'Fo/obar1'
UNION ALL SELECT 'Fo/o//bar3';

;WITH x(length) AS
(
  SELECT LEN(y) - LEN(REPLACE(y, '/', ''))
  FROM @x WHERE y LIKE '%[/]%'
)
SELECT length, [count] = COUNT(*) 
  FROM x GROUP BY length; 
```

结果：

```
length  count
------  -----
1       2
2       1
3       1 
```

# visual-studio-2010 - Visual Studio 项目文件更改和 Mercurial

> ID：12114271
> 
> 赞同：1
> 
> 时间：2012-08-24T17:45:57.907
> 
> 标签：visual-studio-2010, mercurial

我是一名使用 VSS 和 TFS 源代码控制的开发人员，其中只有一个开发人员可以签出任何文件，包括 Visual Studio 文件。我打算在私人项目中使用 Mercurial，我发现 Mercurial 不支持文件锁定作为 VSS 或 TFS，我考虑过 SVN，但我需要在在线和本地硬盘上都有源代码控制存储库的克隆，所以 Mercurial 可能是对我来说最好的。

我的问题是，如果不锁定 Visual Studio 项目文件，那么当我向项目添加文件时，比如说我添加了一个类，同时我的一个团队成员添加了另一个类，我们都将能够提交这两个添加了类，但只有一个版本的项目（我的或他的）将是最后一个提交的版本，我们的一个类将被忽略。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:52:21.257

> 我怎样才能防止这种情况？

使用 Mercurial，您将提交您的更改（本地）。当您抓取团队成员的更改时，您会将两组更改*合并在一起。*这通常工作得非常干净，并且可以毫无顾虑地完成（很少会在合并中失败，甚至需要特殊帮助）。然后项目文件会获得两组更改，此时您可以在本地提交这些更改，然后将它们推送到您的共享存储库中。

这使您团队中的每个人都可以工作而不必担心其他人在做什么，尽管将更改合并在一起的责任落在了最后一个想要推动他们的更改的人的肩上——但这往往工作得非常顺利，就像 Mercurial 所做的那样将更改合并在一起的好工作（通常）。

# maven - 学习Maven，被依赖注入迷惑

> ID：12114275
> 
> 赞同：4
> 
> 时间：2012-08-24T17:46:20.280
> 
> 标签：maven, dependency-injection, jetty

当我从 Rails 房子搬到 Java 商店时，我主要是一名 JS 开发人员，正在学习 Maven。Codehaus 的人们在提供 Maven 原型以指导像我这样的人了解我们如何利用 Maven 管理代码库中的依赖项方面提供了巨大帮助：

[http://mojo.codehaus.org/javascript-maven-tools/javascript-ria-archetype/index.html](http://mojo.codehaus.org/javascript-maven-tools/javascript-ria-archetype/index.html)

我基本上明白他们现在在做什么，但有一件他们没有解释，我不知道魔法发生在哪里。

在他们的示例 RIA 应用程序的 index.html 文件中，HTML 中只有一行包含所有 JavaScript：

```
<script type="text/javascript" src="${index.js}"></script> 
```

当我`> mvn jetty:run`按照他们的建议在命令行上运行以启动测试 web 应用程序时，该`${index.js}`值将被替换为应用程序运行所需的整个依赖关系树中的所有 JS 文件。

这很好，但我只是不知道这个过程的哪一部分正在做。谁能更熟悉这种架构向我解释一下？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T03:15:28.850

戴夫牛顿在对我的问题的评论中让我走上了正确的道路。答案在此处的文档中进行了描述：

[http://mojo.codehaus.org/js-import-maven-plugin/usage.html](http://mojo.codehaus.org/js-import-maven-plugin/usage.html)

在 Codehaus 示例 RIA 应用程序的POM 中`JS Import Maven Plugin`具有 under extensions 的 artifactId`javascript-maven-plugin`负责获取`#{index.js}`index.html 文件中的字符串，从 index.js 文件开始下降依赖关系树，并自动将所有依赖项注入 HTML . 插件用于发现 JS 依赖项的确切机制在上面链接的使用文档中进行了描述。

# windows - python 2.7的输入重定向

> ID：12114282
> 
> 赞同：0
> 
> 时间：2012-08-24T17:46:41.730
> 
> 标签：windows, python-2.7, cmd, command-line-arguments, argparse

我在 python 2.7 中有一个程序，我似乎无法使用重定向输入在 Windows XP 的命令提示符下运行它。我正在尝试做类似的事情：

```
C:\>python foo.py < input.txt 
```

但没有任何效果。我尝试使用 <& 变体，同时放弃对 python.exe 的显式调用。我也尝试过各种管道，但似乎没有任何效果。

我可以从命令提示符运行 python 程序并很好地解析参数输入。问题是我无法从简单的 .txt 文件中输入其中一个参数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:58:20.717

The problem is not with how you are running it from the command line, but rather how you have argparse set up in your script. You are definitely redirecting the file properly to stdin.

**input.txt**

```
foo 
```

**foo.py**

```
import argparse, sys

parser = argparse.ArgumentParser()
parser.add_argument('infile', nargs='?', 
                    type=argparse.FileType('r'), 
                    default=sys.stdin)

opts = parser.parse_args()

print opts.infile.read() 
```

**Output**

```
C:\> python foo.py < input.txt
foo 
```

# google-chrome - 如何让多个画布标签在 Chrome 中可靠呈现？

> ID：12114283
> 
> 赞同：1
> 
> 时间：2012-08-24T17:46:46.270
> 
> 标签：google-chrome, html5-canvas

当页面上使用多个画布时，是否有人遇到过 Google Chrome 无法呈现画布标签的问题？

我一直在发生这种情况。它出现在我的某些页面中，但没有出现在其他页面中；我很难隔离关键元素。当问题确实发生时，行为是一致的：一组特定的画布标签（有时是页面上的所有画布）不会呈现——它们显示为空白。它在 Chrome / Mac 中可靠地发生，但在 Firefox / Mac 中不会发生。有趣的是，如果我右键单击其中一个空白画布并选择“检查元素”，那么突然所有画布都出现了。所以它看起来真的像一个 Chrome 错误，而不是我的代码中的一些错误。

通过单击此 jsfiddle 文件中的“运行”可以观察到该问题：

[http://jsfiddle.net/9HbWV/](http://jsfiddle.net/9HbWV/)

此页面包含两个画布标签和一个在其中一个中绘制矩形的脚本块。在 Chrome 中，矩形不会出现。如果取消注释最后一行并重新运行，则会出现矩形。最后一行只是在另一个画布上调用 getContext()。

我还有其他更复杂的示例，即使为每个画布调用 getContext()，某些画布也不会呈现。所以问题并不像“每个画布必须至少调用一次getContext”那么简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:17:14.197

编辑：Chrome 错误报告的讨论（链接如下）揭示了一种解决方法：将一个唯一的 CSS 类附加到每个画布。IE

<canvas id="A" width=400 height=400 class=canvasA></canvas>
<canvas id='B' width=400 height=400 class=canvasB></canvas>​</p>

* * *

事实证明这实际上是 Chrome 中的一个错误：[http](http://code.google.com/p/chromium/issues/detail?id=144686) ://code.google.com/p/chromium/issues/detail?id=144686 。错误评论中出现了一些细节：

1.  您可以通过转到 about:flags 并激活“禁用加速 2D 画布”选项来解决该错误。

2.  小画布（例如 200 x 200）似乎没有出现问题，因为该问题似乎与 GPU 相关，并且 Chrome 并未尝试将 GPU 用于小画布。

# android - Android BroadcastReceiver 永远不会被调用

> ID：12114285
> 
> 赞同：1
> 
> 时间：2012-08-24T17:46:51.823
> 
> 标签：android, broadcast

大家好，感谢您的帮助！我将从代码开始
所以，带有广播接收器的类是这样的：

```
public class MyService extends Service {

    // ...
    // ACTION
    public static final String action = "com.mywebsite.myapp.package.class.action";
    // ...
    public void onCreate() {
        // SET BROADCAST RECEIVER
        broadcastReceiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                Log.w("broadcast receiver", "action: " + action);
                if (action.equals("**")) {
                    Log.w("broadcast receiver", "**");
                }
            }
        };
        // REGISTER BROADCAST
        final IntentFilter myFilter = new IntentFilter();
        myFilter.addAction(action);
        registerReceiver(this.broadcastReceiver, myFilter);
    }
    // ....
} 
```

我尝试以这种方式从片段发送广播

```
Intent myIntent = new Intent(getActivity()
        .getApplicationContext(), MediaPlayerService.class);
getActivity().startService(myIntent);
myIntent = new Intent(getActivity().getApplicationContext(),
        MediaPlayerService.class);
myIntent.setAction(MyService.action);
myIntent.putExtra("data", "*******");
getActivity().sendBroadcast(myIntent); 
```

但是广播接收器永远不会被调用。我可以这样说是因为 logcat：行 Log.w("broadcast receiver", "action: " + action); 永远不会被调用。我该如何解决？

谢谢！

编辑：类代码：

```
public class MediaPlayerService extends Service {

    private MediaPlayer mediaPlayer = null;
    private AudioManager audioManager;
    private BroadcastReceiver broadcastReceiver;
    private String absoluteFilePath;
    private Boolean areThereAnyErrors = false;
    private int savedVolume;
    // ACTIONS
    public static final String prepareAndPlayNewFile = "com.disgustingapps.player.AudioManagement.MediaPlayerService.prepareAndPlayNewFile";

    @Override
    public void onCreate() {
        Log.w("MediaPlayerService", "onCreate called");
        // SET BROADCAST RECEIVER
        broadcastReceiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                Log.w("broadcast receiver", "action: " + action);
                if (action.equals("prepareAndPlayNewFile")) {
                    Log.w("broadcast receiver", "prepareAndPlayNewFile");
                    prepareAndPlayNewFile(intent
                            .getStringExtra("absoluteFilePath"));
                }
            }
        };
        // REGISTER BROADCAST
        final IntentFilter myFilter = new IntentFilter();
        myFilter.addAction(prepareAndPlayNewFile);
        registerReceiver(this.broadcastReceiver, myFilter);
    }

    @Override
    public void onDestroy() {
        Log.w("MediaPlayerService", "onDestroy called");
        unregisterReceiver(broadcastReceiver);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.w("MediaPlayerService", "onStartCommand called");
        // We want this service to continue running until it is explicitly
        // stopped, so return sticky.
        return START_STICKY;
    }

    public void prepareAndPlayNewFile(String absoluteFilePath) {
        // ...do something...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:30:34.490

没有看到服务的代码以及它是如何开始的，很难判断问题出在哪里..

首先，您在服务的 onCreate 中注册接收器，但没有取消注册事件。您应该将广播接收器放在服务类的全局范围内并在 onDestroy() 中取消注册（覆盖 onDestroy 并记录一条消息确认其停止）

其次，除非您绑定到服务，否则一旦启动中的命令执行，服务就会“停止”。

您应该覆盖 onStartCommand 并返回 START_STICKY 以保持服务运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:03:31.170

您没有收到的原因`Intent`是因为接收器在`onCreate()`. `context.startService()`只会将`Activity`'s传递`Intent`给`Service`'s `onStartCommand()`。`Service`到那时（或应该）已经创建了，因此尝试接收将`onCreate()`永远不会起作用。

更多信息[在这里](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)

尝试接收`onStartCommand()`只会工作一次（猜测）。但是，只有`BroadcastReceiver`在`onStartCommand`您致电时，才能获得数据`startService()`。`BroadcastReceiver`由于您无论如何都在调用它，因此只需放弃 the并将数据与`Intent`传递到`Service`s一起传递就容易得多`onStartCommand()`。

**编辑**

```
@Override
public void onCreate() {
    Log.w("MediaPlayerService", "onCreate called");
}

@Override
public void onDestroy() {
    Log.w("MediaPlayerService", "onDestroy called");
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.w("MediaPlayerService", "onStartCommand called");     

    String action = intent.getAction();
    Log.w("onStartCommand()", "action: " + action);

    if (action.equals("prepareAndPlayNewFile")) {
       prepareAndPlayNewFile(intent.getStringExtra("absoluteFilePath"));
    }

    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.   
    return START_STICKY;
} 
```

然后这样做：

```
Intent myIntent = new Intent(getActivity().getApplicationContext(), MediaPlayerService.class);
myIntent.setAction("prepareAndPlayNewFile");
myIntent.putExtra("absoluteFilePath", "/path/");
startService(myIntent); 
```

[`startService()`](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)：

> 对该方法的每次调用都将导致对目标服务的 onStartCommand(Intent, int, int) 方法的相应调用，具有此处给出的意图。这提供了一种将作业提交给服务的便捷方式，而无需绑定和调用其接口。

# apache - 拒绝所有文件，但使用 htaccess 索引/默认页面

> ID：12114286
> 
> 赞同：3
> 
> 时间：2012-08-24T17:47:01.237
> 
> 标签：apache, .htaccess

我想拒绝目录中的所有文件，但 index.php （作为默认页面）。

这个解决方案几乎可以工作：

```
Deny from all
<Files index.php>
    Order Allow,Deny
    Allow from all
</Files> 
```

唯一的问题：'upload/index.php' 现在可以访问了，但 '/upload/' 不是。如何使用 htaccess 允许默认页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T18:52:37.883

您的问题是，正如您可能已经弄清楚的那样，您拒绝所有的东西，然后允许 URI 'index.php'，但不允许 URI '/'——即使 '/' 被重定向到index.php 在幕后，它仍然是一个不同的 URI，因此它也应该被允许。

最简单的方法是使用[FilesMatch](http://httpd.apache.org/docs/current/mod/core.html#filesmatch)指令，如下所示：

```
order allow,deny
<FilesMatch "^(index\.php)?$">
    allow from all
</FilesMatch> 
```

正则表达式的`^(index\.php)?$`意思是“index.php 或什么都没有”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:51:16.460

您可以尝试使用 mod_rewrite，将您所拥有的替换为：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/(index.php)?$
RewriteRul ^ - [L,F] 
```

# c++ - boost.proto + 在构建表达式树之前检测无效终端

> ID：12114290
> 
> 赞同：4
> 
> 时间：2012-08-24T17:47:16.400
> 
> 标签：c++, template-meta-programming, boost-proto

我在玩 Boost.Proto，主要是为了好玩，看看将来我是否可以在我自己的项目中使用它。也就是说，可能作为这个库的大多数初学者，我玩过“惰性向量”示例的修改版本，但使用转换而不是上下文来执行评估。向量定义如下（好吧，我知道，“向量”对于在全局命名空间范围内定义的东西不是一个好名字......）

```
template <std::size_t D, class T>
class vector { 
    T data_[D];
    enum { dimension = D };
    // Constructors, destructors...
};

// expression wrapper
template <class> class vector_expr; 
```

它以维度和数据类型为模板，类似于 boost::array （我没有使用它，因为我想重载 operator= 以接受表达式树，就像在这类事情中通常所做的那样）。我使用 proto 手册中的代码定义了标量

```
// scalar = everything convertible to double
struct scalar_terminal :
    proto::terminal<proto::convertible_to <double> >
{};

// vector = everything for which the is_vector returns true_
template <class T> struct is_vector : mpl::false_ {};
template <std::size_t D, class T> struct is_vector <vector <D, T> > : mpl::true_ {};

struct vector_terminal :
    proto::and_ <
       proto::terminal<_>
     , proto::if_<is_vector<proto::_value>()>
  >
{};

// domain   
struct vector_domain
    : proto::domain <proto::generator <vector_expr> >
{};

// expression wrapper
template <class Expr>
struct vector_expr : proto::extends <Expr, vector_expr <Expr>, vector_domain>
{
    typedef proto::extends <Expr, vector_expr <Expr>, vector_domain> base_type;

    // Construct from expression (enough to compile)
    vector_expr (Expr const &e) : base_type (e) {}
};

// Bring in operators
BOOST_PROTO_DEFINE_OPERATORS(is_vector, vector_domain) 
```

现在，我想做的第一件事是：检查表达式中的所有向量终端是否具有相同的维度 D。我最终得到了以下工作代码

```
// a meta-function that returns the vector dimension
template <class T>
struct vector_dim
{
    typedef mpl::int_ <T::dimension> type;
};

// a meta-function that combines dimensions from subtrees. int<-1> means
// that sub-trees store vectors of differing static dimension. No good.
template <class D1, class D2>
struct dim_combine
{
   typedef mpl::int_ < -1 > type;
};

// ok, dimensions are the same, propagate up the value
template <class D>
struct dim_combine <D, D>
{
   typedef D type;
};

// 0 is used to mark scalars. It is ok to mix vectors and scalars
// but propagate up the vector dimension only. This is for vector
// on the left and scalar on the right.
template <class D>
struct dim_combine <D, mpl::int_ <0> >
{
   typedef D type;
};

// this is for scalar on the left, vector to the right of some 
// binary operator.
template <class D>
struct dim_combine <mpl::int_ <0>, D>
{
   typedef D type;
};

// need this too to avoid ambiguity between the two specializations
// above when D is int_ <0>. Even if this combination should never
// happen
template <>
struct dim_combine <mpl::int_ <0>, mpl::int_<0> >
{
   typedef mpl::int_<0> type;
};

// A transform that check that all arrays have the same dimension
struct vec_dim_check
    : proto::or_ <
        proto::when <
            vector_terminal
          , vector_dim<proto::_value>()
        >
      , proto::when <
            scalar_terminal
          , boost::mpl::int_<0>()
        >
      , proto::when <
            proto::nary_expr<_, proto::vararg<_> >
          , proto::fold<_, boost::mpl::int_<0>(), dim_combine<vec_dim_check, proto::_state>()>
        >
    >
{};

template <class E>
void check_dim (E const&)
{
    typedef typename boost::result_of<vec_dim_check(E)>::type type;
    BOOST_ASSERT(type::value == 3);
}

int main (int, char**)
{
    vector <3,double> a,b,c;
    check_dim (2*a+b/c);
    return 0;
} 
```

问题是：由于数组的维度已经编码在表达式中，那么应该可以在编译时检测到无效组合。甚至应该可以避免一开始就创建树。这是如何实现的？

在此先感谢，最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:37:31.360

非常好。现在您需要定义一个仅接受有效向量表达式的语法，如下所示：

```
struct vector_grammar_untyped
  : proto::or_<
        scalar_terminal,
        vector_terminal,
        proto::nary_expr<proto::_, proto::vararg<vector_grammar_untyped> >
    >
{};

struct vector_grammar
  : proto::and_<
        vector_grammar_untyped,
        proto::if_<mpl::not_equal_to< mpl::int_<-1>, vec_dim_check >()>
    >
{}; 
```

然后，您将定义更改`vector_domain`如下：

```
struct vector_domain
    : proto::domain <proto::generator <vector_expr>, vector_grammar >
{}; 
```

这应该可以防止您创建未通过自定义类型检查的表达式。第二个模板参数 to`proto::domain`是该域中所有表达式必须符合的语法。

免责声明：上面的代码未经测试，但它应该让你朝着正确的方向前进。

# c# - .Net Enterprise Cache - 立即刷新？

> ID：12114291
> 
> 赞同：1
> 
> 时间：2012-08-24T17:47:22.967
> 
> 标签：c#, asp.net-mvc-3, asp.net-cache, asp.net-caching

我正在为我的 MVC3 应用程序使用企业库缓存。

我的代码是这样的：

```
object myLock = new Object();

public static MyEntity[] getMyEntities()
        {
            MyEntity[] res;

            res = getMyEntities(new GetMyEntitiesRefreshAction());
            return res;
        }

        private class GetMyEntitiesRefreshAction : ICacheItemRefreshAction
        {
            public void Refresh(string removedKey, object expiredValue, CacheItemRemovedReason removalReason)
            {
                getMyEntitiesInCache(this);
            }
        }

        private static MyEntity[] getMyEntitiesInCache(ICacheItemRefreshAction action)
        {
            ICacheManager defaultCache = EnterpriseLibraryContainer.Current.GetInstance<ICacheManager>();
            MyEntity[] result;

            lock (myLock)
            {
                if ((result = defaultCache.GetData("myEntities") as MyEntity[]) == null)
                {
                    using (EntityContext _entities = new EntityContext())
                    {
                        res = _entities.MyEntity
                            .Include("A.B.C")
                            .Include("A.B.D")
                            .Include("A.B.E")
                            .Include("A.B.F.G")
                            .Include("A.B.H.I.J")
                            .Include("A.B.K.L")
                            .Include("A.B.K.M")
                            .Include("A.B.N.O")
                            .Where(x => x.Active && x.Type == 1).ToArray();
                            //this query takes 20 seconds or more
                    }

                    defaultCache.Add("myEntities", result, CacheItemPriority.High, action, new AbsoluteTime(new TimeSpan(0, 1, 0)));
                }
            }
            return result;
        } 
```

因此，当有人调用 getMyEntities，并且缓存了元素时，就没有问题了。但是当元素过期或正在加载到缓存中时，用户必须等待很长时间才能看到一些结果。有没有办法总是立即返回一些东西？如果我正在执行查询，我想返回过期的对象，这样用户就不必等待，当查询完成时，我只会保留新的结果。有任何想法吗？

# android - Intent.ACTION_VIEW 将每个文件识别为 pdf

> ID：12114293
> 
> 赞同：0
> 
> 时间：2012-08-24T17:47:31.293
> 
> 标签：android, android-intent, android-file

这是我的代码

```
 Uri fileUri = Uri.fromFile(file);
            Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            intent.setData(fileUri);
            startActivity(intent); 
```

因此，它会打开一个我在我的应用程序中指定的文件。我测试过的前几个文件是 pdf 文件，它工作得很好。现在，我知道这完全是疯子，每次我选择与 pdf 不同的任何东西时 - 它显然试图使用 pdf 文件的程序来打开所选文件并给我这个消息

```
The document cannot be opened because it is not a valid PDF document 
```

有趣的事情:) 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:51:55.290

使用[Intent.setType](http://developer.android.com/reference/android/content/Intent.html#setType%28java.lang.String%29)设置您尝试打开的每个文件的 mimetype。这样只会打开可以处理特定 mimetype 的应用程序

编辑：您可以使用[MimeTypeMap.getMimeTypeFromExtension](http://developer.android.com/reference/android/webkit/MimeTypeMap.html#getMimeTypeFromExtension%28java.lang.String%29)来获取文件的 Mimetype。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:48:53.200

尝试明确指定要打开的类型的类型..例如

```
Intent intent = new Intent();
Uri path = Uri.fromFile(filename);
intent.setDataAndType(path, "application/pdf");
startActivity(intent); 
```

或者如果出于某种原因您想通过电子邮件发送 pdf，您可以这样做

```
Intent emailIntent = new Intent(Intent.ACTION_SEND);
emailIntent.setType("application/pdf");
emailIntent.putExtra(Intent.EXTRA_STREAM, uri);
startActivity(Intent.createChooser(emailIntent, "Send email using:")); 
```

# domain-driven-design - 相等的实体对象但具有不相等的属性 - 它们是否存在于单线程/单数据库应用程序中？

> ID：12114295
> 
> 赞同：2
> 
> 时间：2012-08-24T17:47:40.177
> 
> 标签：domain-driven-design, entity

```
carA = carRepository.load(1);
carB = carRepository.load(1);
carA == carB; // true
carA.changeColor(red);
carB.changeColor(blue);
carA == carB; // true 
```

相等的实体对象但具有不相等的属性 - 它们是否存在于单线程/单数据库应用程序中？

像上面这样的类似情况，什么时候 carA 是红色的而 carB 是蓝色的？

对于具有一个 DB 的单线程 Web 应用程序，是否存在**需要**carA 和 carB 具有相同身份但具有**不相等**属性的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:52:34.930

> 相等的实体对象但具有不相等的属性 - 它们是否存在于单线程/单数据库应用程序中？

它们可能存在于具有本土 ORM 或数据访问层的应用程序中。这是有问题的，因为它使代码变得不那么直观和可预测。一般来说，如果您使用正确[的工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)实现（例如 Hibernate Session），这是一个已解决的问题并且不是问题。UOW 负责跟踪您在给定事务期间加载的所有内容，并确保将同一实体表示为单个 Java/C# 实例：

> 工作单元跟踪您在可能影响数据库的业务事务期间所做的一切。完成后，它会计算出根据您的工作更改数据库需要做的所有事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:54:17.810

> carA现在是什么颜色的？

**它是蓝色的。**

逐行

```
carA = carRepository.load(1);  // carA is a reference to an object with id=1
carB = carRepository.load(1);  // carB is a reference to an object with id=1
carA == carB; // true          // carA == carB, they point to the same object 
carA.changeColor(red);         // object with id=1 has color `red`
carB.changeColor(blue);        // object with id=1 has color `blue`
carA == carB; // true          // carA == carB, they point to the same object 
```

# java - 更改 LineChart 符号的颜色和线型

> ID：12114302
> 
> 赞同：0
> 
> 时间：2012-08-24T17:48:38.583
> 
> 标签：java, javafx-2

我想更改 LineChar 符号的颜色，目前当我向图表添加新系列时，JavaFX 会自动分配颜色。

如果我可以更改线型也很好，我想要一些带有虚线的符号，而另一些带有实线的符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:43:02.080

[How to set specific color to JavaFX XYChart.Series](https://stackoverflow.com/questions/11153370/how-to-set-specific-color-to-javafx-xychart-series)中有详细的回答？

对于我使用动态系列的用例，我最终得到如下结果：

```
String seriesClass = null;
for(String styleClass : series.getNode().getStyleClass())
{
    if(styleClass.startsWith("series"))
    {
        for(javafx.scene.Node n : _chart.lookupAll("." + seriesClass))
        {
             n.setStyle("-fx-stroke-dash-array: 10 10");
        }
        break;
    }
} 
```

这里的样式只是改变线型，但你也可以更新其他的 CSS 属性。

# php - Android 将数据发布到 mysql

> ID：12114304
> 
> 赞同：0
> 
> 时间：2012-08-24T17:48:48.860
> 
> 标签：php, android, mysql, web-services

我正在尝试通过 android 表单将数据发布到 mysql 数据库。我将数据发布到服务器上托管的 PHP 脚本。我在 MYSQL 中得到空值。网络服务被调用，但它得到空白数据下面是我的 android 代码：

```
package com.register;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.app.Activity;

public class Register extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_register);
        EditText email_id = (EditText)  findViewById(R.id.email_id) ;
        EditText name = (EditText) findViewById(R.id.name);
        EditText password = (EditText) findViewById(R.id.password);
        Button button = (Button) findViewById(R.id.button1) ;

        final String email = email_id.getText().toString();
        final String fullname = name.getText().toString();
        final String mpassword = password.getText().toString();

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 
button.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        //postData();
          HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://xyz/register.php");

            try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("email", email));
                nameValuePairs.add(new BasicNameValuePair("name", fullname));
                nameValuePairs.add(new BasicNameValuePair("password", mpassword));
               httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            }

    }
});

    } 
```

下面是我的 PHP 代码：

```
mysql_connect("server","user","password");
mysql_select_db("testms");
$email =   $_POST['email'];
$name =    $_POST['name'] ;
$password = $_POST['password'] ;

$query_add="INSERT INTO  users (`email` ,`name` ,`password` )
VALUES ('".$email."','".$name."', '".$password."')";
$query_exec=mysql_query($query_add) or die(mysql_error()); 
mysql_close();      

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:16:33.253

尝试 $_REQUEST 变量并在连接到数据库之前获取数据

```
$email =   $_REQUEST ['email'];  
$name =    $_REQUEST ['name'] ;  
$password = $_REQUEST ['password'] ;    

mysql_connect("server","user","password");  
mysql_select_db("testms"); 
$query_add="INSERT INTO  users (`email` ,`name` ,`password` )  VALUES ('".$email."','".$name."', '".$password."')";  $query_exec=mysql_query($query_add) or die(mysql_error());   
mysql_close();              
} 
```

我通常会发回一些数据以进行调试。

```
echo "some test string"; 
```

在您的应用程序中执行以下操作：只是为了了解，检查来自服务器的响应：

```
int ResponseCode = response.getStatusLine();

HttpEntity resEntity = response.getEntity();
if( resEntity != null ){
    if( EntityUtils.toString(resEntity).equalsIgnoreCase("some test string") )
    {
        ...do something
    }
    resEntity.consumeContent();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:13:29.023

下面的代码应该可以工作，但它没有经过测试——我只是从我正在处理的项目中复制过来的。我将在几分钟内将 PHP 部分中的 MySQL 交互更新为 mysqli（CORRECT 方法），然后我将编辑我的答案。现在，只知道使用 mysql_* 已被贬低，您应该真正清理进出数据库的所有条目。无论如何，试一试：

爪哇：

```
@Override
public void onClick(View arg0) {
    // generate your params:
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("email", email));
    nameValuePairs.add(new BasicNameValuePair("name", fullname));
    nameValuePairs.add(new BasicNameValuePair("password", mpassword));

    // send them on their way
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://xyz/register.php");
        httpPost.setEntity(new UrlEncodedFormEntity(nameValueParams));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

PHP（已折旧/未清理）：

```
<?php 

    $connection = mysql_connect("hostname", "username", "password")or die(mysql_error());
    $selection = mysql_select_db("database", $connection)or die(mysql_error());

    // You should echo these variables back to your app
    // so you know they are sending.
    // echo "Received: " . $email . " - " . $name . " - " . $password;
    $email = $_POST['email'];
    $name = $_POST['name'];
    $password = $_POST['password'];

    $insert = "INSERT INTO users('email','name','password') VALUES('$email','$name','$password')";
    $run = mysql_query($insert)or die(mysql_error());

?> 
```

一个更好的 PHP 示例：

```
<?php   
    $mysqli_connection = new mysqli("hostname", "username", "password", "database");
    if ($mysqli_connection->connect_errno) {
        echo ("Connection Failure");
        exit();
    }

    $email = mysql_real_escape_string($_POST['email']);
    $name = mysql_real_escape_string($_POST['name']);
    $password = mysql_real_escape_string($_POST['password']);

    $insert = "INSERT INTO users('email','name','password') VALUES('$email','$name','$password')";
    if ($run = $mysql_connection->query($insert)) {
        echo 'Success';
        $run->free();
        $mysql_connection->close();
    } else {
        echo 'Error Inserting Content';
        exit();
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-04T17:22:29.113

尝试在您的按钮单击事件上移动获取文本字段数据，该变量是最终的，并且在创建活动后它已经具有数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T18:02:04.480

[...]INTO 用户 ( `email`, `name`, `password`)[...] 看来你的报价是错误的。使用 '' 或 ""，而不是 ``

# objective-c - 将 GLKVector 转换为对象

> ID：12114306
> 
> 赞同：1
> 
> 时间：2012-08-24T17:48:56.697
> 
> 标签：objective-c, colors, glkit

我正在为“颜色”类编写一个方法，该方法将从 GLKVector4 的数组（如 GLKit 中找到）中随机选择一种颜色。颜色如下所示：

```
 self.WHITE=GLKVector4Make(1.0, 1.0, 1.0, 1.0);
    self.RED=GLKVector4Make(1.0, 0.0, 0.0, 1.0);
    self.GREEN=GLKVector4Make(0.0, 1.0, 0.0, 1.0);
    self.BLUE=GLKVector4Make(0.0, 0.0, 1.0, 1.0);
    self.BLACK=GLKVector4Make(0.0, 0.0, 0.0, 1.0); 
```

我想将它们放入一个数组中，以便我可以随机选择一个。问题是 GLKVector4 对 NSArray 不友好，因为它们不被识别为类型 id，我想不出一种轻松转换它们的方法。

有没有办法将 GLKVector 转换为我可以放入数组的东西？更重要的是，这是组织颜色的好方法吗？也许有更合适的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:22:24.333

为什么不只使用基本的 C 数组？

```
GLKVector4 colors[5] = {self.WHITE, self.RED, self.GREEN, self.BLUE, self.BLACK};
//...
GLKVector4 randomColor = colors[arc4random_uniform(5)]; 
```

# visual-studio-2012 - 未为此项目设置 Outputpath 属性 - F#

> ID：12114307
> 
> 赞同：5
> 
> 时间：2012-08-24T17:49:00.513
> 
> 标签：visual-studio-2012, f#, visual-studio-2013

当我在 Visual Studio 2012 下创建一个新的 F# 应用程序并构建它时，会出现同样的错误：

> 错误 1 ​​未为项目“TestingF.fsproj”设置 OutputPath 属性。请检查以确保您为此项目指定了有效的配置和平台组合。配置='调试'平台=''。如果其他项目试图遵循对此项目的项目到项目引用，此项目已卸载或未包含在解决方案中，并且引用项目未使用相同或等效项构建，则也可能出现此错误配置或平台。C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets 592 5 测试F

尝试使用配置管理器修改配置|平台，并卸载项目并编辑 .fsproj 文件。

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
<DebugSymbols>true</DebugSymbols>
<DebugType>full</DebugType>
<Optimize>false</Optimize>
<Tailcalls>false</Tailcalls>
<OutputPath>bin\Debug\</OutputPath>
<DefineConstants>DEBUG;TRACE</DefineConstants>
<WarningLevel>3</WarningLevel>
<PlatformTarget>AnyCPU</PlatformTarget>
<DocumentationFile>bin\Debug\TestingF.XML</DocumentationFile>
<Prefer32Bit>true</Prefer32Bit>
</PropertyGroup> 
```

使用任何其他 .Net 语言从未发生过同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-31T10:23:28.823

以防万一其他人遇到此问题，以下**是解决方法**。

该问题类似于 Gustavo 在上一个答案中解决的问题，但对于**F# 项目**，您似乎还需要解决另一个问题。
我在**VS2013 Update 2**中遇到过这个问题。*编辑平台设置*后出现问题，在*配置管理器*中添加 x64 平台。

该问题与**.fsproj 文件中某些 XML 标记的顺序有关**。请参阅下面的正确 .fsproj 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="12.0" DefaultTargets="Build" ...>
  <Import Project=.../>
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    ...
    <RestorePackages>true</RestorePackages>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x64' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    ...
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x64' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <Tailcalls>true</Tailcalls>
    ...
  </PropertyGroup>
  <PropertyGroup>
    <MinimumVisualStudioVersion Condition="'$(MinimumVisualStudioVersion)' == ''">11</MinimumVisualStudioVersion>
  </PropertyGroup> 
```

有时，在配置管理器中编辑配置后，**配置平台的一个或多个 PropertyGroup 标记（*Debug|x64 或 Release|x64*）已**在文件中向下移动。

因此，只需编辑 fsproj 文件并将这些标签向上移动。例如，将它们移动到定义*MinimumVisualStudioVersion*的组之前，如示例中所示。保存，重新加载项目并编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:03:26.290

看一下错误：

> [...] 确保您为此项目指定了配置和平台的有效组合。配置='调试'平台=''。此错误也可能出现 [...]

Visual Studio 正在尝试构建 Platform=''，Configuration='Debug'。但是，您发布的项目文件指定了以下配置：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    . . .
</PropertyGroup> 
```

也就是说，它告诉 Visual Studio 如何构建 'Debug'/'AnyCPU'，而不是 'Debug'/' '。

如果您在其中插入“AnyCPU”，它应该会为您提供您正在寻找的结果。

可以在这里找到更详细的答案：[https ://stackoverflow.com/a/13372073/556595](https://stackoverflow.com/a/13372073/556595)

# ios - 我向下滚动一次页面后显示表格视图按钮

> ID：12114308
> 
> 赞同：0
> 
> 时间：2012-08-24T17:49:00.840
> 
> 标签：ios, uitableview

我正在尝试为表格视图中的每个单元格添加一个自定义单选按钮。当我第一次查看表格视图时，我看不到任何单选按钮。但是当我向下滚动时，我可以在第一次加载视图时看到的初始单元格下方的每个单元格上看到单选按钮。一旦一个没有单选按钮的单元格消失，我返回查看该单元格，单选按钮就会出现。

这是我的这种方法的代码：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *ImageCellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:ImageCellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:ImageCellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryNone;
}
_radioBtn.frame = CGRectMake(275, 3,36,36);
_radioBtn = [UIButton buttonWithType:UIButtonTypeCustom];
[_radioBtn setImage:[UIImage imageNamed:@"Radio-Btn.png"] forState:UIControlStateNormal];
[cell.contentView addSubview:_radioBtn];

NSString *cellValue = [_arrayRelat objectAtIndex:indexPath.row];
cell.textLabel.text = cellValue;
cell.textLabel.textColor = [UIColor colorWithRed:(88.0/255.0) green:(88.0/255.0) blue:(89.0/255.0) alpha:1];

return cell;
} 
```

如果你不明白这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:59:13.357

您正在用每个新单元格覆盖 _radioBtn ！您应该为每个单元格创建一个新的 UIButton 实例，例如：

```
UIButton *radioBtn = [UIButton buttonWithType:UIButtonTypeCustom];
radioBtn.frame = CGRectMake(275, 3,36,36);
[radioBtn setImage:[UIImage imageNamed:@"Radio-Btn.png"] forState:UIControlStateNormal];
[cell.contentView addSubview:radioBtn]; 
```

你应该把它放在你的`if (cell == nil)`块中，为每个单元格只创建一次。

# ruby - 运行 Rake 任务期间的 FactoryGirl 错误

> ID：12114312
> 
> 赞同：0
> 
> 时间：2012-08-24T17:49:42.983
> 
> 标签：ruby, ruby-on-rails-3, rake, factory-bot

我在运行 Rake 任务时遇到了 FactoryGirl 问题。

这是我在 Windows 7 笔记本电脑上的当前设置：

1) RubyMine 4.5 2) Rails 3.2.8 3) Ruby 1.9.3 4) PostgreSQL 9.1 5) rspec-rails 2.11.0 6) capybara 1.1.2 7) factory_girl_rails 4.0 8) shoulda

这是我的 spec_helper.rb 文件：

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'development'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

require 'factory_girl'

#Support for capybara
require 'capybara/rspec'
require 'capybara/rails'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr
  config.mock_with :rspec

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"
end

#spec for authentication
def login_user
  @user = FactoryGirl.create(:user)

  visit new_user_session_path
  fill_in "Email", :with=> @user.email
  fill_in "Password", :with=> @user.password

  click_button "Sign In"
end 
```

这是我的 authentication_spec.rb：

```
require 'spec_helper'

describe "Sign Out link" do
  it "should sign you out when clicked" do
    login_user
    page.should have_content("Signed in as")
  end
end 
```

**这是我的跟踪错误消息：**

```
C:\Ruby193\bin\ruby.exe -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) C:\Ruby193\bin\rake spec:requests --trace
Testing started at 11:51 AM ...
** Invoke spec:requests (first_time)
** Invoke db:test:prepare (first_time)
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:abort_if_pending_migrations
** Execute db:test:prepare
** Invoke db:test:load (first_time)
** Invoke db:test:purge (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:test:purge
** Execute db:test:load
** Invoke db:test:load_schema (first_time)
** Invoke db:test:purge 
** Execute db:test:load_schema
** Invoke db:schema:load (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:schema:load
NOTICE:  CREATE TABLE will create implicit sequence "authentications_id_seq" for serial column "authentications.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "authentications_pkey" for table "authentications"
NOTICE:  CREATE TABLE will create implicit sequence "categories_id_seq" for serial column "categories.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "categories_pkey" for table "categories"
NOTICE:  CREATE TABLE will create implicit sequence "sub_categories_id_seq" for serial column "sub_categories.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "sub_categories_pkey" for table "sub_categories"
NOTICE:  CREATE TABLE will create implicit sequence "users_id_seq" for serial column "users.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "users_pkey" for table "users"
** Execute spec:requests
C:/Ruby193/bin/ruby.exe -S rspec ./spec/requests/authentication_spec.rb

**ArgumentError: Factory not registered: users**
C:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/registry.rb:24:in `find'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/decorator.rb:10:in `method_missing'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl.rb:71:in `factory_by_name'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/factory_runner.rb:12:in `run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/factory_girl-4.0.0/lib/factory_girl/strategy_syntax_method_registrar.rb:19:in `block in define_singular_strategy_method'
C:/Users/Rich/RubymineProjects/EquipmentTrader/spec/spec_helper.rb:49:in `login_user'
C:/Users/Rich/RubymineProjects/EquipmentTrader/spec/requests/authentication_spec.rb:5:in `block (2 levels) in <top (required)>'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:113:in `instance_eval'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:113:in `block in run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:253:in `with_around_each_hooks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:110:in `run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:378:in `block in run_examples'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:374:in `map'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:374:in `run_examples'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:360:in `run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:28:in `block (2 levels) in run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:28:in `map'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:28:in `block in run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/reporter.rb:34:in `report'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:25:in `run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `block in autorun'

1 example, 1 failure, 0 passed

Finished in 0.008001 seconds
rake aborted!
C:/Ruby193/bin/ruby.exe -S rspec ./spec/requests/authentication_spec.rb failed
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/rake_task.rb:137:in `block (2 levels) in initialize'
C:/Ruby193/lib/ruby/1.9.1/rake/file_utils_ext.rb:60:in `verbose'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/rake_task.rb:127:in `block in initialize'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `call'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `each'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:116:in `invoke_task'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `each'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:63:in `run'
C:/Ruby193/bin/rake:32:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
Tasks: TOP => spec:requests

Process finished with exit code 1 
```

我不确定我需要如何解决这个问题。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:59:08.093

问题是因为您`spec_helper.rb`曾经引用​​过`FactoryGirl.create(:users)`- 请注意复数 - 而不是`FactoryGirl.create(:user)`. 如果您`spec_helper.rb`在问题中保存了它，那么它将起作用。我认为它会显示您所说的错误的唯一情况是，如果未保存此文件。

# c# - 使用 asp.net 和 C# 填写受保护文档上的 word 文档表单字段

> ID：12114314
> 
> 赞同：0
> 
> 时间：2012-08-24T17:49:50.437
> 
> 标签：c#, asp.net, ms-word

使用 Visual Studio 2010 和 Microsoft Word 2010：

我有一个文档，在文档中进行编辑时，启用了限制编辑以仅允许“填写表格”。

在 Word 文档中，我从旧版控件的开发人员选项卡中添加了文本表单字段。

我想要做的是用数据填充其中一些表单字段（比如他们的姓名、地址等......我已经知道并且已经从数据库中提取的东西）。

我试过的：

```
using System;
using System.Configuration;
using System.IO;
using Microsoft.Office.Interop.Word;

var oWordApplication = new ApplicationClass();

object missing = System.Reflection.Missing.Value;
object fileName = ConfigurationManager.AppSettings["DocxPath"];
object newTemplate = false;
object docType = 0;
object isVisible = true;

var oWordDoc = oWordApplication.Documents.Add(fileName, newTemplate, docType, isVisible);

                if (oWordDoc.Bookmarks.Exists("txtName"))
                {
                    oWordDoc.Bookmarks["txtName"].Range.Text = "Test Field Entry from webform";
                } 
```

我能够找到我想要编辑的字段，但是当我尝试修改文本时出现以下错误：

```
You are not allowed to edit this selection because it is protected. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:05:58.747

这就是我所做的。创建一个可以直接映射到您的 word 模板的类，然后将该类序列化为 xml 并使用下面的方法。

```
 public static void ReplaceCustomXML(string fileName, string customXML)
    {
        using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(fileName, true))
        {
            MainDocumentPart mainPart = wordDoc.MainDocumentPart;
            mainPart.DeleteParts<CustomXmlPart>(mainPart.CustomXmlParts);
            //Add a new customXML part and then add the content. 
            CustomXmlPart customXmlPart = mainPart.AddCustomXmlPart(CustomXmlPartType.CustomXml);
            //Copy the XML into the new part. 
            using (StreamWriter ts = new StreamWriter(customXmlPart.GetStream())) ts.Write(customXML);
        }
    }

    public static string SerializeObjectToString(this object obj)
    {
        using (MemoryStream stream = new MemoryStream())
        {
            XmlSerializer x = new XmlSerializer(obj.GetType());
            x.Serialize(stream, obj);
            return Encoding.Default.GetString(stream.ToArray());
        }
    } 
```

我建议您查看这篇文章，因为它使使用 openxml 更新文档变得轻而易举。

[http://seroter.wordpress.com/2009/12/23/populating-word-2007-templates-through-open-xml/](http://seroter.wordpress.com/2009/12/23/populating-word-2007-templates-through-open-xml/)

# gwt - GWT：动态 UI 渲染

> ID：12114318
> 
> 赞同：0
> 
> 时间：2012-08-24T17:50:13.697
> 
> 标签：gwt, gxt, dynamic-ui

我目前正在开发 GWT 应用程序，我想根据用户权限动态呈现 UI。比如说，在我的应用程序中，我有一个产品列表，并且可以编辑该列表（添加新产品、删除等）。

我也有具有只读权限的用户和具有写权限的用户。现在是否有可能（或者是否可行）在我的 UI 类中做这样的事情：

```
if (user.hasWritePermissions) {
  Button addButton = new Button()
} 
```

这样没有写入权限的用户看不到添加和删除按钮吗？当然，我的后端也有权限检查，但如果用户只看到他可以使用的内容，这很方便。

或者 GWT 还有其他更好的可能性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:43:23.930

*   你的方法很好。
*   与任何 Java 代码一样，您可以使用多态性（例如 EditableProductListView 和 ReadOnlyProductListView）
*   *从理论上讲*，您也可以使用延迟绑定来实现，但这是一个糟糕的用例：好的，如果您只有两种或三种类型的用户，它是可行的。然后您可以使用`<define-property name="role" values="readonly,readwrite" />`. 但是这里的优势可能很小（用户会少下载几个代码块），而排列的数量呈指数增长。

当然，这都是风格问题。这些方法在安全方面都没有更好或更差，因为实际的权限检查（正如您已经提到的，但我会再说一遍）必须在服务器端执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:55:17.597

你也可以给所有的“admin”-Button 和 UI-elements 一个 CSS 类。如果您将另一个 CSS 类设置为根面板（或另一个祖先），您的所有管理元素都将消失。

[在运行时更改 GWT 中 CSS 类的属性](https://stackoverflow.com/questions/6113020/change-property-of-css-class-in-gwt-at-runtime)

```
body.admin .onlyForAdmin{
    display:block;
}

.onlyForAdmin{
    display:none;
} 
```

但不能经常说：权限检查需要在服务器端！（正如你提到的）

# spring - 身份验证（取消）成功后的自定义操作，以及使用 REST 的 HTTP 基本身份验证

> ID：12114325
> 
> 赞同：2
> 
> 时间：2012-08-24T17:50:40.313
> 
> 标签：spring, rest, spring-mvc, spring-security

参考我[之前关于](https://stackoverflow.com/questions/12043661)Spring Security 和 REST 的问题，我取得了一些进展，但仍有一些问题。

1.  `someaddres.com/rest/login`正如我之前所说，用户将使用 HTTP 基本身份验证通过 POST 登录到我的 REST Web 服务。我仍然不知道如何做到这一点，但我已经将我的应用程序配置为使用`org.springframework.security.web.authentication.www.BasicAuthenticationFilter`，剩下的是实际映射还是我应该制作单独的@Controller（我正在使用 Spring MVC 进行 REST 映射）？我会很感激一个例子。
2.  其次，正如我之前所说，我想在登录成功与否后执行一些自定义操作（某种日志 - 谁、何时以及从何处尝试登录和注销）。我已经尝试成功实现`org.springframework.security.web.authentication.AuthenticationSuccessHandler`，`org.springframework.security.web.authentication.AuthenticationFailureHandler`但没有成功，因为我无法获得用于从任何地方登录的用户名，因为`AuthenticationException#getAuthentication`方法已被弃用。由于这些方法似乎是空的，所以我应该继承`BasicAuthenticationFilter`并覆盖它`onSuccessfulAuthentication`，还有什么？`onUnsuccessfulAuthentication`
3.  实施密码恢复的最佳方法是什么？我想过简单地发布一些资源，这些资源会生成新密码并通过电子邮件发送。
4.  如何配置安全性以生成令牌，该令牌将存储在会话中，假设在最后一次操作后的 10 分钟内有效？是否可以不使用 cookie 并将所有内容存储在服务器端？

这是我的安全bean：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:sec="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd http://www.springframework.org/schema/aop 
   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd http://www.springframework.org/schema/security
          http://www.springframework.org/schema/security/spring-security-3.1.xsd">
    <sec:global-method-security secured-annotations="enabled" />
    <sec:http entry-point-ref="authenticationEntryPoint">
        <sec:intercept-url pattern="/*" />
        <sec:custom-filter position="BASIC_AUTH_FILTER" ref="basicAuthenticationFilter" />
        <sec:logout logout-url="/logout" success-handler-ref="logoutSuccessHandler" invalidate-session="true"/>
    </sec:http>
    <sec:authentication-manager alias="authenticationManager" erase-credentials="true">
        <sec:authentication-provider ref="daoAuthenticationProvider" />
    </sec:authentication-manager>
    <bean id="basicAuthenticationFilter" class="org.springframework.security.web.authentication.www.BasicAuthenticationFilter">
        <property name="authenticationManager" ref="authenticationManager" />
        <property name="authenticationEntryPoint" ref="authenticationEntryPoint" />
    </bean>
    <bean id="authenticationEntryPoint" class="org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint">
        <property name="realmName" value="rms-rest" />
    </bean>
    <bean id="daoAuthenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
        <property name="userDetailsService" ref="userDetailsService" />
    </bean>
    <bean id="authenticationSuccessHandler" class="pl.bcichecki.rms.handlers.impl.AuthenticationSuccessHandlerImpl" />
    <bean id="authenticationFailureHandler" class="pl.bcichecki.rms.handlers.impl.AuthenticationFailureHandlerImpl" />
    <bean id="logoutSuccessHandler" class="pl.bcichecki.rms.handlers.impl.LogoutSuccessHandlerImpl" />
</beans> 
```

我感谢您的帮助。

# ruby - 从 Cucumber 连接 Netezza

> ID：12114326
> 
> 赞同：1
> 
> 时间：2012-08-24T17:50:42.513
> 
> 标签：ruby, cucumber, jruby, netezza, activerecord-jdbc

非常简单和简短的问题 - 我如何从 Cucumber 连接到 Netezza 数据库。

我愿意使用 Ruby 或 JRuby。我查看了 activerecord-netezza-adapter (https://github.com/robbkidd/activerecord-netezza-adapter)，但不知道如何使用它。如果您要建议使用此 gem，请提供任何示例。

基本上我正在寻找一个看起来像的解决方案 -

宝石文件 -

```
 gem 'some gem' 
```

包含代码/红宝石文件的文件 -

```
 require 'that good gem'
    some code to connect to netezza database
    some code to execute query to netezza database 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:28:34.473

搞定了，忽略这个问题，这是 2 分钟前发生的事情 -

```
require "activerecord-netezza-adapter"
require "activerecord-jdbc-adapter"
require "c:\\jdbc\\nzjdbc.jar"
require "ojdbc14.jar"
require "ActiveRecord.rb"

$CLASSPATH << "c:\\jdbc\\nzjdbc.jar"

@confile = YAML.load_file("connections_details.yml")
@sqlfile = YAML.load_file("queries.yml")
@logFile  = File.open("query_log.yml", 'w+')
@sql_string =  @sqlfile["sql_stmt 1"]["stmt"]

@connection = ActiveRecord::Base.establish_connection(@confile["nzbeta"])
response = @connection.connection.execute(@sql_string)
print response file 
```

# javascript - 在javascript中将字符串连接到数组中

> ID：12114327
> 
> 赞同：1
> 
> 时间：2012-08-24T17:50:48.533
> 
> 标签：javascript, arrays, string, highcharts, concatenation

我在javascript中有这些数组，它将成为使用highcharts的图形的输入数据

数据 = [ **20** , 29, 25, 30, 21, 17, 20, **19** , 18];

我需要的是能够连接某些字符串以最终得到这些

数据= [ **{颜色：'#55B647'，y：20}**，29、25、30、21、17、20，**{颜色：'#F15B49'，y：19}**，18]；

我试图访问数组并像这样评估新值

数据[0]= "{ 颜色: '#55B647', y:" + 数据[0] + "}";

但是不工作，我该怎么办？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:52:42.340

这应该是对的：

```
data[0] = { color: '#55B647', y: data[0] }; 
```

请记住，JS 中的对象声明如下：

```
var object = { key1: value1, key2: value2}; 
```

# dojo - 如何以编程方式将 dojox.mvc.Output 添加到 dojox.mobile.ListItem？

> ID：12114328
> 
> 赞同：0
> 
> 时间：2012-08-24T17:51:00.737
> 
> 标签：dojo

我想以编程方式为 ListItem 添加标签和值，我该怎么做？我不想为 ListItem 使用 rightText。

```
 //   widgetId = "showUrl"
     dojo.empty(widgetId);

     var listItem = registry.byId(widgetId);
     if (listItem != undefined)
          listItem.destroy(true);

     listItem = new ListItem({}, widgetId);

     var labelOutput = dom.byId("urllabel");
     if (labelOutput == undefined) {
         labelOutput = dojo.create("div", {id: "urllabel"}, listItem.srcNodeRef);
     }
     console.log("labelOutput ", labelOutput);
     var output = new mvc.Output({ref: labelItem
                          }).placeAt(labelOutput);
     console.log("output ", output);
     //output.startup(); 
```

}

我尝试了上面的代码，但它没有显示 ListItem 中的标签 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:06:28.683

刚碰到这个页面。如果可以选择使用 Dojo 1.8 - Dojo 1.8 允许使用[dojox/mvc/at](http://dojotoolkit.org/reference-guide/1.8/dojox/mvc/at.html) API为 dojox/mvc/ListItem 的`label`属性（ListItem 中的文本）建立数据绑定权。因此，您可以执行以下操作：

```
var labelItem = new Stateful(); // dojo/Stateful
registry.byId("li").set("label", at(labelItem, "value"));
labelItem.set("value", "The text"); 
```

# php - 计算天数小时和分钟php

> ID：12114329
> 
> 赞同：3
> 
> 时间：2012-08-24T17:51:24.503
> 
> 标签：php, time, milliseconds

好的，所以我以毫秒为单位向我的 mysql 数据库发送一个整数。现在，我试图让它显示： 播放时间：1 天 3 小时 15 分钟。但是我很难做到这一点，我只能得到分钟数天和小时，但它会是总小时数、总天数和总分钟数，而不是全部合二为一。我有这样的代码：

```
$time = $timeRow['time'];    
$seconds = floor($time / 1000);
$minutes = floor($seconds / 60);
$hours = floor($minutes / 60);
$days = round($hours / 24);
$milliseconds = $time % 1000;
$seconds = $seconds % 60;
$minutes = $minutes % 60;
echo'Time Played: '.$days.' days '.$hours.' hours '.$minutes.' minutes'; 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T17:54:17.253

```
<?php

$time = $timeRow['time'] / 1000;

$days = floor($time / (24*60*60));
$hours = floor(($time - ($days*24*60*60)) / (60*60));
$minutes = floor(($time - ($days*24*60*60)-($hours*60*60)) / 60);
$seconds = ($time - ($days*24*60*60) - ($hours*60*60) - ($minutes*60)) % 60;

echo'Time Played: '.$days.' days '.$hours.' hours '.$minutes.' minutes '.$seconds.' seconds'; 
```

测试：[http ://codepad.viper-7.com/WBQQet](http://codepad.viper-7.com/WBQQet)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T17:55:29.687

您从原始数字生成每个变量，这就是为什么它告诉您它是 1 天 35 小时；而不是 1 天 11 小时。

您需要开始减去值：

```
$seconds = floor($time / 1000);
$minutes = floor($seconds / 60);
$hours = floor($minutes / 60);
$days = round($hours / 24);

for ($i = 0; $i < $days; $i++) {
    $hours -= 24;
} 
```

还有一段类似的代码，用于小时、分钟和秒。

# gwt - GWTP ant build.xml - 没有处理器声明任何这些注释

> ID：12114331
> 
> 赞同：0
> 
> 时间：2012-08-24T17:51:26.693
> 
> 标签：gwt, ant, javac, gwt-platform, gwtp

我正在尝试为移动、桌面和平板电脑的 GWTP+MGWT 项目编写 build.xml。

```
<property name="in.src.folder" location="src" />
<property name="apt_generated" location=".apt_generated" />
<property name="out.classes.folder" location="war/WEB-INF/classes" />
<property name="warlib.folder" location="war/WEB-INF/lib" />

<target name="javac" depends="cleanwar,libs" description="Compile java source to bytecode">
        <mkdir dir="war/WEB-INF/classes" />

        <javac srcdir="${apt_generated}" destdir="${out.classes.folder}" includeantruntime="true" source="1.6" target="1.6" nowarn="false" debug="true" debuglevel="lines,vars,source" >
            <classpath refid="project.class.path" />
             <compilerarg value="-Xlint"/>
        </javac>
        <javac srcdir="${in.src.folder}" includes="**" encoding="utf-8" destdir="${out.classes.folder}" source="1.6" target="1.6" nowarn="false" debug="true" debuglevel="lines,vars,source" includeantruntime="true">
            <classpath refid="project.class.path" />
             <compilerarg value="-Xlint"/>
        </javac>    
        <copy todir="${out.classes.folder}">
            <fileset dir="${in.src.folder}" includes="**/*.class" />
        </copy>
        <delete dir="${in.src.folder}" includes="**/*.class" failonerror="false" />
</target> 
```

该应用程序在开发模式下运行良好，直到现在我可以将它构建到 javac 目标，但我看到这些警告 -

没有处理器声称任何这些注释：

com.gwtplatform.mvp.client.annotations.RequestTabs, com.gwtplatform.mvp.client.annotations.NameToken, com.gwtplatform.mvp.client.annotations.ChangeTab, com.google.gwt.safehtml.client.SafeHtmlTemplates.Template, com.google.inject.Inject、com.gwtplatform.mvp.client.annotations.TabInfo、com.gwtplatform.mvp.client.annotations.ProxyCodeSplit、com.gwtplatform.mvp.client.annotations.ContentSlot、com.google.inject。 BindingAnnotation、com.google.gwt.uibinder.client.UiHandler、com.google.gwt.user.client.rpc.RemoteServiceRelativePath、com.google.gwt.inject.client.GinModules、com.gwtplatform.mvp.client.annotations。 ProxyEvent、com.gwtplatform.mvp.client.annotations.UseGatekeeper、com.synopsys.iims.fe.client.place.DefaultPlace、com.google.gwt.uibinder.client.UiField、com.gwtplatform.mvp.client.annotations。代理标准

我该如何解决这些问题？我相信这些可能会导致 gwtc 目标出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:42:48.207

这些注释没有处理器（它们由 GWT 生成器处理），因此您可以放心地忽略警告。

# tridion - Content Delivery 2011 SP1 架构理解

> ID：12114332
> 
> 赞同：-1
> 
> 时间：2012-08-24T17:51:28.400
> 
> 标签：tridion, tridion-2011

我们正在从 Tridion 5.3 SP1 升级到 Tridion 2011 SP1。我们完成了 Tridion Content Manager Server 的安装。我们想了解内容交付服务器的详细架构。

1.  内容交付服务器和演示服务器有什么区别？

2.  我们有很多动态组件演示文稿以及嵌入式组件演示文稿，我们必须在 cd_storage_conf 中进行更改，以便嵌入式演示文稿与页面一起进入应用程序文件夹（.net 应用程序），而动态组件演示文稿将进入 SQL 数据库？（在 Tridion 5.3 中，配置文件中有一个名为“DefaultRootLocation”的元素</p>

3.  在安装 Content Delivery 时，我们将其安装在 D:\Tridion 上。安装后，我们可以看到 bin、cofig、incoming、lib、log、uninstaller 等子文件夹。我们的 .Net 应用程序将位于 D:\inetpupp\。我们是否需要将任何文件夹、dll、配置文件复制或更改到我们的 .net 应用程序文件夹？

4.  我们在哪里可以找到一些图表或架构来验证我们的安装？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T19:03:41.380

# 内容交付服务器和演示服务器有什么区别？

Content Delivery 是一组来自 Tridion 的模块，您可以安装在演示服务器上。所以我们通常谈论 Tridion Content Delivery 和 user145602 的演示服务器。

# 我们是否需要将任何文件夹、dll、配置文件复制或更改到我们的 .net 应用程序文件夹？

是的，您确实需要将相关文件（JAR、DLL 和 _config.xml）复制到您的网站下`c:\inetpub`（或您将 IIS 指向的任何位置）。

在线文档中详细记录了要复制的内容（需要登录）： [http ://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_DFE30215E62D42D097516F0450C853D7](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_DFE30215E62D42D097516F0450C853D7)

通常：

1.  DLL 进入`bin`您网站的文件夹（除非另有说明）
2.  JAR 进入您网站`lib`文件夹***下***的文件夹`bin`
3.  _config.xml 文件进入您网站`config`文件夹***下***的文件夹`bin`

# 我们在哪里可以找到一些图表来验证我们的安装？

（在线）文档充满了架构图，例如这个（需要登录）：[http ://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_C72D061178C64B88A93134DE051A082C](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_C72D061178C64B88A93134DE051A082C)

但是这些对您的安装的直接适用程度取决于除您（或为您设置和升级此系统的人）之外的任何人都无法控制的许多因素。如果您想验证您的安装，我建议您从 SDL 或我们的合作伙伴那里获得一位经验丰富的顾问，与您一起完成安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:13:52.933

我在第 1 点获得了有关您的查询的信息。2：

要在本地文件系统上启用内容存储，请确保存在以下未注释元素：

```
**<Storage Type="filesystem" Id="LocalFileSystem_01" defaultFilesystem="true" defaultStorage="true"
Class="com.tridion.storage.filesystem.FSDAOFactory">
<Root Path="STORAGE_PATH" />
</Storage>** 
```

其中 STORAGE_PATH 是存储位置根文件夹的完全限定路径。

# c# - 什么是用于加载系统配置属性的 .net 层次结构

> ID：12114336
> 
> 赞同：4
> 
> 时间：2012-08-24T17:51:42.373
> 
> 标签：c#, .net, dll, .net-3.5, configurationmanager

我有一个一般性问题，但我也会解释我为什么要问，这样你就可以更好地理解我的意思。

我有一个在设置中定义了 web 服务 url 的 dll，在运行时它使用 Settings.Default 从设置中获取 url。但是，我们的环境都没有 (dllName).dll.config 文件，具体设置也没有在调用应用程序的 (exeName).exe.config 中定义。很明显没有使用默认值，因为它设置为某个内部 IP 地址；但这在生产中有效，他们没有在我能找到的任何 .config 文件中定义此设置，并且它仍然以某种方式访问​​正确的 Web 服务 URL。在这种情况下，我需要知道从哪里加载值。

所以我更广泛的问题是，层次结构如何在 .net 中加载设置？例如，它是否先在 machine.config 中查找，然后是 (exeName).exe.config，如果它是一个 dll，它会转到 (dllName).dll.config 吗？它首先在哪里看，在其他地方看的顺序是什么，还有其他地方我没有提到可以定义这个配置吗？

此外，对于 DLL，如果您在“设置”中定义了某些内容，它是否会作为默认值嵌入到已编译的 dll 中，并且如果在任何其他 .config 文件中找不到该属性，是否会使用该属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:04:05.070

> .NET 配置的分层特性提供了极大的灵活性，允许特定用户或位置拥有自己的配置设置。但是，这些配置设置并不是孤立的，在更具体的级别进行的重复设置能够覆盖在不太具体的级别进行的设置。如图所示，最具体的配置文件被合并到不太具体的配置文件中，最具体的设置覆盖最不具体的设置。在 Exe 上下文中，用户（或更准确地说，本地用户）设置最为具体，其次是漫游用户（在两台或多台机器之间共享）、应用程序，最后是机器。

![配置层次结构和合并](../Images/edcb00af9bdfb52ab655e192583ab1db.png)

我建议您阅读以下文章，因为您的答案只是引用：

*   [破解 NET 配置的奥秘](http://www.codeproject.com/Articles/19675/Cracking-the-Mysteries-of-NET-2-0-Configuration)

有用的将是：

*   [揭开 NET 配置的奥秘](http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-2-0-Configuration)

*   [解读 NET 配置的奥秘](http://www.codeproject.com/Articles/16724/Decoding-the-Mysteries-of-NET-2-0-Configuration)

# c - 无法理解静态变量的行为

> ID：12114341
> 
> 赞同：0
> 
> 时间：2012-08-24T17:52:03.480
> 
> 标签：c, variables, pointers, static

```
#include <stdio.h>

main()
{

    int i = 10;
    static int a = i;
    if(a==10)
        printf("yes 1st comparision is equal\n");
    else
        printf("no 1st comparision is not equal\n");
    if(i==10)
        printf("yes 2nd comparision is equal\n");
    else
        printf("no 2nd comparision is not equal\n");

    a=15;
    if(a==i)                                              
        printf("yes 3rd comparision is equal\n");
    else
        printf("no 3rd comparision is not equal\n");

} 
```

为什么`a`重新初始化为 15，输出是`no 3rd comparision is not equal` ，而输出应该是`yes 3rd comparision is equal`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:55:11.373

您要比较的是两个不同的值。

从您的问题来看，您似乎期望的是*引用*（通常使用指针实现）。

这个例子和静态无关，因为函数`main`只输入一次。

如果参考是您所追求的，这是一个非常简化的用法：

```
#include <stdio.h>

int main() {
    int i = 10;
    int* const a = &i;
    if (*a == 10)
        printf("yes 1st comparision is equal\n");
    else
        printf("no 1st comparision is not equal\n");
    if (i == 10)
        printf("yes 2nd comparision is equal\n");
    else
        printf("no 2nd comparision is not equal\n");

    *a = 15;

    if (*a == i)
        printf("yes 3rd comparision is equal\n");
    else
        printf("no 3rd comparision is not equal\n");

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:49:04.937

您的问题“为什么“a”被​​初始化为 15”的答案是您将值分配给“a”。当您将其声明为时，它已初始化为 10

> 静态int a = i;

其中 i = 10。当你这样做

> a=15；

“a”的值发生变化。您没有再次声明“a”。您也没有更改“i”的值。因此，比较失败。如果您不想更改“a”的值，请将其声明为“const”变量。

希望这能回答您的问题。阿迪亚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:35:43.407

在下面的示例`static int count1 = 0;`中是初始化（在声明时赋值）。And`count1++;`等价于`count1 = count1 + 1;`and 这是赋值而不是初始化。

`count`第一次调用函数`static int count1 = 0;`将被执行并分配 0，并且`count1++`还将分配`1`给 staitc 变量`count1`。而第二次调用`count`函数`static int count1 = 0;`将不会被执行，`count1++`将被执行并`2`分配给`count1`.

```
void count(void) 
{ 
    static int count1 = 0; 
    int count2 = 0; 
    count1++; 
    count2++; 
    printf("\nValue of count1 is %d, Value of count2 is %d", count1, count2); 
} 
```

初始化意味着在该变量的声明期间（在初始阶段）为该变量分配一个值。声明后赋值只是赋值而不是初始化。

对于静态变量，初始化只会进行一次，但赋值可以进行任意次数。

现在在你的第一个程序中，你正在做`a=15;`，你在想`=`第二次`++`操作是不可能的，并且对于一个静态变量可以多次操作。

在您的程序`a=15;`中也可以编写如下`++`操作。

```
for(j = 0; j = 15; j++)
{
    a++;
} 
```

所以赋值（`=`）操作在静态变量上也是有效的，即使在第二次也是如此。

# php - jQuery点击事件一次后不触发

> ID：12114348
> 
> 赞同：2
> 
> 时间：2012-08-24T17:52:34.670
> 
> 标签：php, javascript, jquery, ajax, forms

我是这个网站和 jQuery 的新手。我不知道这是否是常识，但我对像这个线程这样的提交按钮有问题：
[jQuery click event just trigger once](https://stackoverflow.com/questions/9630593/jquery-click-event-just-trigger-once)
但我的代码是这样的：
我的页面上有一个这样的表格：

```
<table border="1">
     <tr><th>Song</th><th>Listen</th></tr>
     <tr><td>Singer - Song </td>
     <td><form class="frm" id="lis_0" name="name">
              <input type="hidden" class="url" value="somelink" id="url_0" />
       <input class="submit" type="submit" onmouseover="activate(this, 0)" onmouseout="deactivate(this, 0)" value="Listen" />
     </form>
     </td>
  </tr>
      <tr><td>Singer - Song </td>
     <td><form class="frm" id="lis_1" name="name">
              <input type="hidden" class="url" value="somelink" id="url_1" />
       <input class="submit" type="submit" onmouseover="activate(this, 1)" onmouseout="deactivate(this, 1)" value="Listen" />
     </form>
     </td>
  </tr>
      ....
      ....
</table> 
```

我正在从这些表中获取信息，`player.php`如下所示：

```
$('.submit').click(function(){
                $.ajax({
                    type    : "GET",
                    url     : "player.php",
                    data    : {"url" : $("#active").val() },
                    success : function(response){
                        alert(response);
                        $("#response div").fadeOut("fast", function(){
                            $("#response div").remove();
                            $("#response").append($(response).hide().fadeIn());
                        });
                    }
                });
                return false;
            }); 
```

这`player.php`会返回一个 div，如下所示：

```
'<div class="mp3player">
                <p id="audioplayer_1">Alternative content</p>  
                <script type="text/javascript">  
                    AudioPlayer.embed("audioplayer_1", {
                    soundFile: "'.$file.'",  
                    titles: "'.$title.'",  
                    artists: "'.$artist.'",  
                    autostart: "yes"
                    });  
                </script>
            </div>' 
```

在删除之前的内容之后，我将其附加到页面上的响应 div 中。它运作良好，但我有另一个提交事件来搜索这些歌曲：

```
$('form[id^="search"]').submit(function(){
                $.ajax({
                    type    : "GET",
                    url     : "search.php",
                    data    : {"searchText" : $("#searchText").val() },
                    success : function(response){
                        $('div[id="results"]').fadeOut("fast", function(){
                            $('div[id="results"]').remove();
                            $("#leftcolumn").append($(response).hide().fadeIn());
                        });
                    }
                });
                return false;
            }); 
```

当我从这个表单在我的页面上运行搜索时：

```
<form class="search" id="searchForm" name="name">
<input type="text" value="" id="searchText" name="searchString" />
    <input type="submit" value="Search" />
</form> 
```

这`search.php`有效并用新结果替换了我的表格。然后我的表格第二次不起作用。
对不起，很长的帖子，但我不知道要发布什么，不应该发布什么。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:00:27.937

如果您要替换`.submit`元素，则您首先定义的事件处理程序`$('.submit').click(function(){`不会链接到任何现有元素。

为了让事件处理程序链接到任何 '.submit' 元素，包括后期创建的元素（这是您的 search.php），您需要使用[jquery on](http://api.jquery.com/on/)函数：

```
$('document').on('click', '.submit', function(){...}) 
```

这将适用于文档的所有“.submit”元素，即使是在调用时不存在的元素。

如果你可以定义一个，你可能有一个比“文档”更精确的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T00:36:50.983

结果：

```
$('form[id^="lis"]').live('click' , '.submit', function(){ 
```

`.live()`绑定解决了我的问题。如果您想使用`.on()`绑定，则 ajax 加载的内容不应与已与该函数绑定的内容相同。至少据我所知，
[http://jquery-howto.blogspot.com/2008/12/how-to-bind-events-to-ajax-loaded.html](http://jquery-howto.blogspot.com/2008/12/how-to-bind-events-to-ajax-loaded.html)
谢谢大家

# ios - iAd 测试 ADBannerViewDelegate bannerViewActionDidFinish：

> ID：12114350
> 
> 赞同：2
> 
> 时间：2012-08-24T17:52:38.427
> 
> 标签：ios, testing, iad, adbannerview

我想`bannerViewActionDidFinish:`在点击完成后尝试测试。

我的经验是，在调试版本或模拟器中使用虚假广告进行测试时。有没有人能够成功测试这个？

`bannerViewActionShouldBegin:willLeaveApplication:`总是用 调用`willLeave == NO`，当单击测试 iAd 时，会出现确认信息，告诉我 iAd 设置正确……但在关闭该窗口后，`bannerViewActionDidFinish:`从未调用过。

更多信息：iAd 横幅都在测试中正确显示和消失，并且它们在应用商店分发版本中构建和运行良好......直到用户从点击操作返回。我想用`bannerViewActionDidFinish:`这个，但我看不到用假广告测试它的方法。

这是相关代码（希望任何帮助的人都不需要查看布局代码；它似乎总是根据广告是否加载到横幅中，或者是否生成的错误发生与否，也匹配相应的日志输出；唯一没有发生的是`bannerViewActionDidFinish:`在测试期间从未调用过：

```
#pragma mark - ADBannerViewDelegate implementation
#pragma mark @optional

#if __IPHONE_OS_VERSION_MAX_ALLOWED > __IPHONE_4_3
// This method is invoked when the banner has confirmation that an ad will be presented, but
// before the ad has loaded resources necessary for presentation.
- (void)bannerViewWillLoadAd:(ADBannerView *)banner {
    if (banner == self.adBannerView)
#if DEBUG
        NSLog(@"(%@)bannerViewWillLoadAd", self.navigationItem.title),
#endif
        banner.hidden = NO;
#if DEBUG
    else
        NSLog(@"== banner that will load ad is different than this view's banner ==");
#endif
}
#endif

// This method is invoked each time a banner loads a new advertisement. Once a banner has
// loaded an ad, it will display that ad until another ad is available. The delegate might
// implement this method if it wished to defer placing the banner in a view hierarchy until the
// banner has content to display.
- (void)bannerViewDidLoadAd:(ADBannerView*)banner {
#if DEBUG
    NSLog(@"(%@)bannerViewDidLoadAd: bannerLoaded==%d",
          self.navigationItem.title, banner.isBannerLoaded ? 1 : 0);
#endif
    if (self.view.window)
        [UIView animateWithDuration:0.3 animations:^{
            [self.view setNeedsLayout];
            [self.view layoutIfNeeded];
        }];
#if DEBUG
    else
        NSLog(@"(%@)bannerViewDidLoadAd: window not visible, skipping …",
              self.navigationItem.title);
#endif
}

// This method will be invoked when an error has occurred attempting to get advertisement content.
// The ADError enum lists the possible error codes.
- (void)bannerView:(ADBannerView*)banner didFailToReceiveAdWithError:(NSError *)error {
#if DEBUG
    NSLog(@"(%@)%@: bannerLoaded==%d",
          self.navigationItem.title, error, banner.isBannerLoaded ? 1 : 0);
#endif
    if (self.view.window)
    {
        banner.hidden = !banner.isBannerLoaded; // can't say NO, in case banner loaded w/error!
        [UIView animateWithDuration:0.3 animations:^{
            [self.view setNeedsLayout];
            [self.view layoutIfNeeded];
        }];
    }
#if DEBUG
    else
        NSLog(@"(%@)%s window not visible, skipping…",
              self.navigationItem.title, __FUNCTION__);
#endif
}

// This message will be sent when the user taps on the banner and some action is to be taken.
// Actions either display full screen content in a modal session or take the user to a different
// application. The delegate may return NO to block the action from taking place, but this
// should be avoided if possible because most advertisements pay significantly more when
// the action takes place and, over the longer term, repeatedly blocking actions will
// decrease the ad inventory available to the application. Applications may wish to pause video,
// audio, or other animated content while the advertisement's action executes.

- (BOOL)bannerViewActionShouldBegin:(ADBannerView*)banner willLeaveApplication:(BOOL)willLeave {
    return YES;
}

// This message is sent when a modal action has completed and control is returned to the
// application.  Games, media playback, and other activities that were paused in response to the
// beginning of the action should resume at this point.

- (void)bannerViewActionDidFinish:(ADBannerView *)banner {
    // all new code, to be tested
    [self configureView];
    [UIView animateWithDuration:0.3 animations:^{
        [self.view setNeedsLayout];
        [self.view layoutIfNeeded];
    }];
} 
```

# javascript - JavaScript 返回 [object 对象]

> ID：12114352
> 
> 赞同：3
> 
> 时间：2012-08-24T17:52:40.110
> 
> 标签：javascript, jquery

我正在尝试让它运行

```
$('#info').replaceWith('<div id="infobox" class="reveal-modal">'+$('#info').contents()+'<a class="close-reveal-modal">&#215;</a></div>'); 
```

但它只是给了我[object Object]。因为我只用 $('#info').contents() 替换它，所以一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T17:55:55.007

尝试：

```
$(function(){
    var content = $('#info').get(0).outerHTML;
    $('#info').replaceWith('<div id="infobox" class="reveal-modal">'+content+'<a class="close-reveal-modal">&#215;</a></div>');
}) 
```

`$('#info').get(0).outerHTML`回报`<div id="info">anything</div>`。_ 但是，如果只想要内容，请使用`$('#info').html()`，返回`anything`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:56:13.510

如果您尝试维护现有内容并将其放在外部 div 中，请尝试使用`wrap()`，您可以调用`after()`添加关闭锚点。

```
$('#info').wrap('<div id="infobox" class="reveal-modal">')
    .after('<a class="close-reveal-modal">&#215;</a>') 
```

**工作示例：http: [//jsfiddle.net/hunter/qU4s3/](http://jsfiddle.net/hunter/qU4s3/)**

* * *

也可以这样写：

```
$('#info')
    .wrap($('<div>', { id: "infobox", "class": "reveal-modal"}))
    .after($('<a>', { "class": "close-reveal-modal", html: "&#215;" })); 
```

**工作示例：http: [//jsfiddle.net/hunter/qU4s3/2/](http://jsfiddle.net/hunter/qU4s3/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T17:56:40.920

`.contents()`返回一个 jQuery 对象，您想要的是`.text()`或`.html()`取决于是否`#info`包含其他元素。

```
$('#info').replaceWith('<div id="infobox" class="reveal-modal">'+$('#info').text()+'<a class="close-reveal-modal">&#215;</a></div>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T17:56:57.847

以`$('#info').contents().` <-- 开头，像这样

# r - 显示包中所有内容的名称

> ID：12114355
> 
> 赞同：20
> 
> 时间：2012-08-24T17:52:46.873
> 
> 标签：r, r-package

有没有一种简单的方法可以从 R 中列出包中的所有内容？
例如，如果我键入`foreach:::`并点击`tab`两次，我可以看到那里的所有内容。
我还能如何获得这些对象的名称？

注意，`ls("package:foreach", all.names=TRUE)`不显示类似的东西`.foreachGlobals`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-24T19:26:41.390

`ls("package:foreach", all.names=TRUE)`仅显示附加到搜索路径的内容，其中仅包括从命名空间导出的对象。`ls`在结果上使用`getNamespace`：

```
ls(getNamespace("foreach"), all.names=TRUE) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-16T18:43:58.097

[我一直在使用](https://github.com/raredd/rawr/blob/master/R/utils.R#L273:L302)的一个实用程序，我发现它对此很有用（并且还提供了一些其他有用的东西），例如：

```
ls(get('.__NAMESPACE__.', envir = asNamespace('ggplot2', base.OK = FALSE),
       inherits = FALSE))
[1] "dynlibs"   "exports"   "imports"   "lazydata"  "path"      "S3methods" "spec" 
```

访问 NAMESPACE 中的所有导出和内部变量，即

`ggplot2:::`

```
lsp(ggplot2)

# [1] ".__C__Scales"                     ".__global__"                     
# [3] ".__NAMESPACE__."                  ".__S3MethodsTable__."            
# [5] ".all_aesthetics"                  ".base_to_ggplot"                 
# [7] ".element_tree"                    ".onAttach"                       
# [9] ".packageName"                     ".plot_store" 
# ... 
```

仅访问导出的，即

`ggplot2::`

```
lsp(ggplot2, 'exports')

# $exports
# [1] "%+%"                       "%+replace%"               
# [3] "aes"                       "aes_all"                  
# [5] "aes_auto"                  "aes_q"                    
# [7] "aes_string"                "annotate"                 
# [9] "annotation_custom"         "annotation_logticks"    
# ... 
```

对于库路径

```
lsp('ggplot2', 'path')

# $path
# [1] "/Library/Frameworks/R.framework/Versions/3.1/Resources/library/ggplot2" 
```

对于包中包含的数据

```
lsp('ggplot2', 'lazydata')

# $lazydata
# [1] "diamonds"     "economics"    "midwest"      "movies"       "mpg"         
# [6] "msleep"       "presidential" "seals" 
```

对于 S3 方法

```
lsp('ggplot2', 'S3methods')

# $S3methods
# [,1]                         [,2]                       [,3]                              
# [1,] "+"                     "gg"                       "+.gg"                            
# [2,] "["                     "uneval"                   "[.uneval"                        
# [3,] "as.character"          "uneval"                   "as.character.uneval"             
# [4,] "autoplot"              "default"                  "autoplot.default"                
# [5,] "coord_aspect"          "default"                  "coord_aspect.default"            
# [6,] "coord_aspect"          "fixed"                    "coord_aspect.fixed"              
# [7,] "coord_aspect"          "map"                      "coord_aspect.map"                
# [8,] "coord_aspect"          "polar"                    "coord_aspect.polar"              
# [9,] "coord_aspect"          "quickmap"                 "coord_aspect.quickmap" 
# ... 
```

看到一切

```
lsp('ggplot2')

# pages and pages 
```

代码：

```
lsp <- function(package, what, pattern) {
  if (!is.character(substitute(package)))
    package <- deparse(substitute(package))
  ns <- asNamespace(package)
  if (missing(pattern))
    pattern <- '.*'

  ## base package does not have NAMESPACE
  if (isBaseNamespace(ns)) {
    res <- ls(.BaseNamespaceEnv, all.names = TRUE)
    return(res[grep(pattern, res, perl = TRUE, ignore.case = TRUE)])
  } else {
    ## for non base packages
    if (exists('.__NAMESPACE__.', envir = ns, inherits = FALSE)) {
      wh <- get('.__NAMESPACE__.', inherits = FALSE,
                envir = asNamespace(package, base.OK = FALSE))
      what <- if (missing(what)) 'all'
      else if ('?' %in% what) return(ls(wh)) 
      else ls(wh)[pmatch(what[1], ls(wh))]
      if (!is.null(what) && !any(what %in% c('all', ls(wh))))
        stop('\'what\' should be one of ',
             paste0(shQuote(ls(wh)), collapse = ', '),
             ', or \'all\'', domain = NA)
      res <- sapply(ls(wh), function(x) getNamespaceInfo(ns, x))
      res <- rapply(res, ls, classes = 'environment',
                    how = 'replace', all.names = TRUE)
      if (is.null(what))
        return(res[grep(pattern, res, perl = TRUE, ignore.case = TRUE)])
      if (what %in% 'all') {
        res <- ls(getNamespace(package), all.names = TRUE)
        return(res[grep(pattern, res, perl = TRUE, ignore.case = TRUE)])
      }
      if (any(what %in% ls(wh))) {
        res <- res[[what]]
        return(res[grep(pattern, res, perl = TRUE, ignore.case = TRUE)])
      }
    } else stop(sprintf('no NAMESPACE file found for package %s', package))
  }
} 
```

我也喜欢它，因为它展示了它的用处`rapply`：}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T03:24:20.813

Revolution R Enterprise（免费供学术使用）是 R 的编辑器/调试器/GUI，默认情况下在启动时打开“对象浏览器”窗口。单击一个包可以查看其所有内容，包括类和环境。我觉得这很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-26T17:19:03.303

我知道这是一个较老的问题，但我最近创建了一个脚本，可以很好地获取这些信息。它需要一个包名称向量来获取每个包中每个函数的以下信息。包名称、函数名称、函数的 str() 以及每个函数的帮助文件中的描述文本。如果有人感兴趣，代码如下。

```
available.packages <- installed.packages()
suppressMessages(if(!"XML" %in% available.packages) install.packages("XML",repos = "https://cran.cnr.berkeley.edu/"))
library(XML)

# Function to get data from help console
help_console <- function(topic, format=c("text", "html", "latex", "Rd"),
                         lines=NULL, before=NULL, after=NULL, pkg) {  
  format=match.arg(format)
  if (!is.character(topic)) topic <- deparse(substitute(topic))

  helpfile <- tryCatch({
    helpfile <- utils:::.getHelpFile(help(topic, package = as.character(pkg)))
  }, error = function(err) {
    helpfile <- NA
  }) 

  if(!is.na(helpfile[1]))
    {hs <- capture.output(switch(format, 
                                 text=tools:::Rd2txt(helpfile),
                                 html=tools:::Rd2HTML(helpfile),
                                 latex=tools:::Rd2latex(helpfile),
                                 Rd=tools:::prepare_Rd(helpfile)))

     if(!is.null(lines)) hs <- hs[lines]
     hs <- c(before, hs, after)
     html <- paste(hs, sep="\n", collapse = "")
  } else{
    html <- NA
  }

  return(html)
}

# Function to retrieve information on functions within a package
get.funcs <- function(pkg){
  if(pkg %in% available.packages){
    print(pkg)
    require(pkg, character.only = TRUE)

    df <- as.data.frame(as.vector(lsf.str(paste0("package:", pkg))), stringsAsFactors = FALSE)
    colnames(df) <- "function.name"

    df$usage <- sapply(df$function.name, function(x) capture.output(str(get(x)))[1])
    df$package <- pkg

    df$description <- mapply(function(x,y) {
                             html <- help_console(x, "html", lines = 1:25, before = "", after = "", pkg = y)
                             if(!is.na(html)){
                               doc <- htmlParse(html, asText = TRUE)
                               plain.text <- xpathSApply(doc, "//p", xmlValue)[1]
                             } else{
                               plain.text <- NA
                             }
                             },
                             df$function.name,
                             df$package)

    return(df[,c("package","function.name","usage","description")])
  } else{
    print(paste(pkg, "- has not been installed and cannot be processed!"))
    return(NULL)
  }
}

# Create a vector of packages to process
packages <- c("base","dplyr","lubridate","plyr","readr","readxl","reshape2","RODBC","stringr","tidyr","XLConnect","xlsx","XML","zoo")

# Create a list of dataframes containing package information
ldf <- lapply(packages, get.funcs)

# Combine all dataframes in the list to a single dataframe
df <- do.call(rbind, ldf) 
```

# ruby - 如何获取请求时区？

> ID：12114356
> 
> 赞同：3
> 
> 时间：2012-08-24T17:52:53.043
> 
> 标签：ruby, ruby-on-rails-3, timezone

我是 Rails 的新手，我面临以下问题，我想知道正在访问我的控制器的客户端时区。有没有办法做到这一点？我想做类似以下代码的事情：

```
client_timezone = request.get_timezones 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:24:08.420

为了实现我想要的，我使用了两个 gem，一个名为[Timezone](https://github.com/panthomakos/timezone)，另一个名为[GeoCoder](http://www.rubygeocoder.com/)。为了在服务器端获取时区。

使用地理编码器，我可以询问请求的纬度和经度，并使用这条信息，我使用时区 gem 来获取该坐标的时区。

这里有一些代码：

```
def my_method
    my_latitude = request.location.latitude
    my_longitude = request.location.longitude
    timezone = Timezone::Zone.new :latlon => [my_latitude, my_longitude]
    timezone_offset = timezone.offset
    ....
end 
```

[PS：要使用时区宝石，您必须在地名](http://www.geonames.org/login)中创建一个帐户

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:17:34.747

很好地通过了你在 cookie 中的时间，然后从中获取时区

```
 var offset = (new Date()).getTimezoneOffset()
  var date = new Date();
  date.setTime(date.getTime()+3600000);
  document.cookie = "utc_offset="+offset+"; expires="+date.toGMTString();+"; path=/"; 
```

在那里你有用户时区与**UTC的偏移量**

或将用户时区信息存储在数据库中，然后检索它

但我想你的要求是第一个

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:00:10.603

在搜索我的迷你项目时，我还从[TimeZoneDB](http://timezonedb.com/api)中找到了一个替代 API。

您可以通过经纬度查询获取 GMT 偏移量，也可以直接通过[时区名称](http://php.net/manual/en/timezones.php)查询。

# objective-c - 对多个 UIView 应用渐变

> ID：12114359
> 
> 赞同：0
> 
> 时间：2012-08-24T17:53:10.550
> 
> 标签：objective-c, xcode, uiview, gradient

我在将渐变应用于多个视图时遇到了一些问题，代码如下：

```
 CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = view6.bounds;
gradient.frame = view7.bounds;
gradient.frame = view8.bounds;
gradient.frame = view9.bounds;
gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor whiteColor] CGColor], (id)[[UIColor colorWithRed:231.0/255.0 green:231.0/255.0 blue:231.0/255.0 alpha:1.0] CGColor], nil];
[view6.layer insertSublayer:gradient atIndex:0];
[view7.layer insertSublayer:gradient atIndex:0];
[view8.layer insertSublayer:gradient atIndex:0];
[view9.layer insertSublayer:gradient atIndex:0]; 
```

那么我做错了什么？目前，渐变仅应用于 view9，这让我有点难过。欢迎任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:55:45.780

您需要制作 4 个渐变，每层一个，但您可以重复使用颜色。

目前，每次将该层添加为子层时，都会先将其拉出上一层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:55:41.297

每次要将图层添加到子图层时，都应该创建图层。

好的方法是创建`GradientView:UIView`类而不是覆盖`drawRect`方法并绘制渐变或将渐变层添加到代码中另一个位置的子视图。这种方式更有用，因为如果你想改变渐变的颜色，你必须只在一个地方改变代码`(GradientView)`。

另一种方法是创建方法，该方法将为每个视图构建渐变层。

```
- (CAGradientLayer *)gradientLayerWithFrame:(CGRect)frame colors:(NSArray *)colors
{
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = frame;
    gradient.colors = colors;
    return gradient;
}

...

NSArray *colors = [NSArray arrayWithObjects:(id)[[UIColor whiteColor] CGColor], (id)[[UIColor colorWithRed:231.0/255.0 green:231.0/255.0 blue:231.0/255.0 alpha:1.0] CGColor], nil];

[view6.layer insertSublayer:[self gradientLayerWithFrame:view6.bounds colors:colors] atIndex:0];
[view7.layer insertSublayer:[self gradientLayerWithFrame:view7.bounds colors:colors] atIndex:0]; 
```

...

# entity-framework - 实体模型关系？

> ID：12114366
> 
> 赞同：0
> 
> 时间：2012-08-24T17:54:26.443
> 
> 标签：entity-framework, relationship

我创建了一个名为 Posts 的表。

```
POSTS        |
_____________|
post_id      |
parent_id    |  //reference to post_id
post_type_id |  //I have two type
user_id      |  //reference to user table 
```

我从这个表中创建了一个实体模型。我希望这样：`Model.POSTS`但它是这样显示的`Model.POSTS1`，`Model.POSTS2`这意味着有两个集合。

为什么会这样？是关于 post_type 的吗？`POSTS1 = type1`和`POSTS2=type2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T23:03:59.493

对不起，他们映射到不同的。Post1 是一个集合 Post2 是一个对象。这意味着如果帖子是孩子，它指的是一位父母。如果 post 是父级，则引用其子级（集合）。

# sql - oracle substr 函数与分隔符范围

> ID：12114373
> 
> 赞同：0
> 
> 时间：2012-08-24T17:54:46.483
> 
> 标签：sql, oracle10g

我正在尝试找到最接近 substr 的分隔符，并且对字符数有限制。

```
Eg: select 'oneone,twotwo, threethree, four,five,six,seven,eight,nine,ten,eleven,twelve' from dual; 
```

现在，我想限制 substr 仅从该字符串中提取前 30 个字符，同时确保 substr 以最近的 "," 结尾，如果它无法在 30 个字符中找到终点。

```
select substr('oneone,twotwo, threethree, four,five,six,seven,eight,nine,ten,eleven,twelve',1,30) from dual ;-- First 30 characters. 
```

前 30 个字符产生：oneone,twotwo,threethree,fou 但是，我希望预期的结果是在“fou”的不完整输入之前找到最近的分隔符“,”并得到结果。

```
Expected Result:oneone,twotwo, threethree -- since "fou" is incomplete and thus should be excluded 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:05:18.857

很有可能有一个更简单的解决方案，但是

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select 'oneone,twotwo, threethree, four,five,six,seven,eight,nine,ten,eleven,twelve' str
  3      from dual
  4  )
  5  select substr( x.str,
  6                 1,
  7                 instr( substr( x.str, 1, 30 ),
  8                        ',',
  9                        -1 ) -1)
 10*   from x
SQL> /

SUBSTR(X.STR,1,INSTR(SUBS
-------------------------
oneone,twotwo, threethree 
```

会起作用的，当你分解它时，相对容易理解。

由内而外的工作，

```
substr( x.str, 1, 30 ) 
```

获取字符串的前 30 个字符

```
instr( substr( x.str, 1, 30 ),
       ',',
       -1 ) 
```

为您提供该 30 个字符串中最后一个逗号的位置。那么那么

```
substr( x.str,
        1,
        instr( substr( x.str, 1, 30 ),
               ',',
               -1 ) -1) 
```

将字符串从位置 1 带到 30 个字符的字符串中最后一个逗号之前的位置。

# android - Android中的ZXing人像

> ID：12114374
> 
> 赞同：2
> 
> 时间：2012-08-24T17:54:47.320
> 
> 标签：android, qr-code, zxing

我需要在纵向模式下使用 ZXing 扫描。
我读了这个[http://code.google.com/p/zxing/issues/detail?id=178](http://code.google.com/p/zxing/issues/detail?id=178)但在我的 Android 2.3.6 设备中，相机预览不起作用：如果我将手机向右移动相机滚动到达顶点。
我该如何解决？

在 Android 2.2 设备上没问题。

谢谢

# css - CSS Not Parsing 中的 {exp:} 代码

> ID：12114375
> 
> 赞同：2
> 
> 时间：2012-08-24T17:54:55.413
> 
> 标签：css, expressionengine

我有一个 ExpressionEngine 模板，它是一些全局 CSS 样式。我在 CSS 中有一些动态的 {exp:} 调用。我有一个与生产环境相同的暂存环境。但是，在暂存环境中，{exp:} 代码不会解析并最终在客户端。这显然给我带来了问题。这是一个片段来显示我在说什么：

```
{exp:channel:entries channel="personal_blog" dynamic='off' disable="categories|member_data|pagination"}
    .bio_header_{personal_ee_username} {
        position: absolute;
        top: 0;
        left: 0;
        width: 960px;
        height: 270px;
        background: url('{personal_header_image}') no-repeat 0 0;
    }
{/exp:channel:entries} 
```

我已将暂存环境中的 ExpressionEngine 文件中的所有内容与生产文件进行了比较，但找不到任何不同之处。有没有人有任何想法？这快把我逼疯了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:48:09.517

您很可能会遇到此错误：[http ://expressionengine.com/bug_tracker/bug/18239](http://expressionengine.com/bug_tracker/bug/18239)

您使用的是 ExpressionEngine 2.5.3 吗？

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:03:39.633

您在 exp: 标记中禁用了 member_data，因此如果这与自定义成员字段相关，它们将无法解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:27:24.353

动态参数接受“是”和“否”。也许这就是问题所在，您将其设置为“关闭”。

# mysql - 使用 MySQL 查找一组匹配的单词

> ID：12114379
> 
> 赞同：0
> 
> 时间：2012-08-24T17:55:02.077
> 
> 标签：mysql, full-text-search

例如，我有一个字符串：

`MatchString = "Renal and Dialysis Technologist and Technician"`

我有一个表，其中有一个名为`degree_name`

例如，学位名称之一可能是`Dialysis Technician`.

我想尝试找到包含上述多个单词的度数`MatchString`- 可能像 2 或 3 个匹配 - 在 mysql 中是否有一种简单的方法可以做到这一点 - 如果是这样，代码会是什么样子？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:08:46.603

通过布尔模式下的全文搜索，您将获得良好的结果。首先确保你的表是 MyISAM，全文索引在`degree_name`. 然后此查询将返回匹配项，以及与您匹配的单词数`MatchString`：

```
SELECT degree_name,
MATCH (degree_name)
AGAINST ('Renal and Dialysis Technologist and Technician' IN BOOLEAN MODE) FROM degrees
WHERE MATCH (degree_name)
AGAINST ('Renal and Dialysis Technologist and Technician' IN BOOLEAN MODE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:18:17.057

我会使用 WHERE LIKE 'Dialysis Technician%' 这会给你一个两个词的匹配。如果您想要三个，则需要添加其他类似的单词。% 在文本后查找通配符，因此如果您想查看 Dialysis Technician 之前的信息，是否需要如下所示：WHERE LIKE '%Dialysis Technician'。

# .net - 如何从 Visual Basic 文件中提取函数调用图？

> ID：12114380
> 
> 赞同：2
> 
> 时间：2012-08-24T17:55:05.563
> 
> 标签：.net, vb.net, reverse-engineering, legacy-code

我目前面临着一大段遗留代码，我必须理解并重写这些代码以使其更易于维护。

是否有一个工具可以让我轻松探索文件中的函数调用图？

任何文本输出，如

```
Method1
    Method2
    Method3

Method2
    Method3 
```

或图形之类的

![图形](../Images/36b6a8cb73c40a88b34136c10a1aa3c8.png)

可以帮助很多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:02:15.293

[Resharper](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__Call_Tracking.html)允许您检查对方法的传入或传出调用。

我不知道在没有插件的情况下在 Visual Studio 中执行此操作的方法。

此外，[NDepend](http://www.ndepend.com/)也可能是您的一个选择。我从未使用过它，但它看起来可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:13:50.800

Visual Studio 的生成序列图？

[http://weblogs.asp.net/gunnarpeipman/archive/2009/11/20/visual-studio-2010-generating-sequence-diagrams-on-the-fly.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2009/11/20/visual-studio-2010-generating-sequence-diagrams-on-the-fly.aspx)

也许那只是在终极版中。但您可以从 Microsoft Servers 下载试用版。

# javascript - Google 地球回调未触发

> ID：12114382
> 
> 赞同：0
> 
> 时间：2012-08-24T17:55:08.283
> 
> 标签：javascript, dom-events, google-earth, google-earth-plugin

我正在尝试让 Google 地球回调工作，但他们似乎并没有为我开火。我使用了Google Earth API 站点上的[View Change Example](http://earth-api-samples.googlecode.com/svn/trunk/examples/event-viewchange.html)作为参考，并且看不出它和我的代码之间没有区别......但是我的不起作用！

以下是我的代码的重要部分：

```
<script type="text/javascript">
var ge;

google.load("earth", "1");

function init() {
  document.getElementById('map3d').innerHTML = '';
  google.earth.createInstance('map3d', initCallback, failureCallback);
}

function initCallback(pluginInstance) {
  ge = pluginInstance;
  ge.getWindow().setVisibility(true);

  // add a navigation control
  ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);

  // Set the FlyTo speed.
  ge.getOptions().setFlyToSpeed(ge.SPEED_TELEPORT);

  // add some layers
  //ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, true);
  //ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, true);

  throw (new Error("InitCallback!"));

  google.earth.addEventListener(ge.getView(), 'viewchange', function () {
      throw (new Error("EVENT!"));
  });

}

function failureCallback(errorCode) {
}
</script> 
```

“初始化回调！” 错误被正确抛出，但我从来没有看到“事件！” 抛出错误——无论我如何移动地球。

有谁看到我做错了什么？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:16:19.680

我不是 javascript 方面的专家，但如果你替换：

```
 throw (new Error("EVENT!")); 
```

用警报代替，例如：

```
 alert('EVENT!'); 
```

我打赌你会发现它会起作用。即 eventListener 正在工作，它似乎不喜欢 'throw' 命令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:13:46.200

lifeIsGood 是对的——当你像上面那样抛出一个没有 try catch 块的错误时，会导致抛出错误后的 js 不执行。

`console.log('Error');`如果您只是尝试使用“快速肮脏的方式”在控制台中打印某些内容，请改为使用...

```
function initCallback(pluginInstance) {
     ge = pluginInstance;
     ge.getWindow().setVisibility(true);

     //throw (new Error("InitCallback!")); -- change this to 
     console.log('InitCallback!');

     google.earth.addEventListener(ge.getView(), 'viewchange', function () {
         //throw (new Error("EVENT!")); -- change this to
         console.log('EVENT!');
     });

} 
```

# mysql - 创建此数据库的 ER 图

> ID：12114385
> 
> 赞同：1
> 
> 时间：2012-08-24T17:55:25.727
> 
> 标签：mysql, sql, database, database-design, entity-relationship

我已经创建了一个包含多个表的数据库，并试图回溯并创建它的 ER 图，但我正在努力解决它。数据库系统将用于匹配具有相似偏好的人。

*   每个用户都有管理信息（存储在 user_core）、关于他们自己的信息（存储在 user_profile 的记录中）和关于他们偏好的信息（存储在 EAV user_prefs 表中）。
*   “首选项”表存储首选项的 pref_id 及其名称
*   'shortlist' 表存储用户的 id 和他们已入围的用户的另一个 id。每个用户将在其中拥有与入围的人一样多的条目。
*   'groups' 表存储关于一组人的信息。每个组都有一个 id，成员在他们的 user_core 中指定这个，以及组中的最大人数

大部分麻烦来自于识别实体是什么——它们大部分只是表名吗？

这些是我的桌子。开头的名称是表名，CSV 是字段名：

```
user_core = {id, birthday, sign_up_date, access token, group ID}

user_profile = {id, gender, course, university, religion}

user_prefs = {id, pref_id, value, weight}

preferences = {pref_id, name}

shortlist = {id, targ_id}

groups = {group_id, max_no} 
```

那么，如果我要以此制作 ER 图，我会怎么做呢？

如果我要拆分它，我会说我的应用程序中的实体是：用户、偏好、候选名单、组。但是，当我尝试考虑这些关系时，它开始变得混乱——很可能是因为我在这里逆向工作！任何帮助或指点将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T23:25:05.613

如果你真的想要一个 ER 图，那么每个实体都会得到一个框，每个关系会在两个框之间获得一条线，或者在框之间获得一条带有线的菱形，具体取决于。

看起来 user-profile 只是用户的更多属性，但 user-preferences 是许多用户和许多偏好之间的关系。

相反，如果您想制作一个数据库示意图，有些人称之为 ER 图，那么每个表都会有一个框。

数据库原理图倾向于关系实现，而 ER 模型与实现无关。此外，ER 模型反映分析，而数据库原理图包括设计。

# asp.net - 如何使用 ASP.NET 在另一个网站中填写表单、提交来自和检索结果

> ID：12114391
> 
> 赞同：0
> 
> 时间：2012-08-24T17:55:52.837
> 
> 标签：asp.net, dom, webforms, form-submit

正如您可能已经从问题本身中得到的想法......我想要实现的是：连接到网站，填写表格，提交页面，最后从回发页面中提取一些信息，其中包括有关数据的信息我已经提交了...上面所有的 af 都应该在我的站点中以编程方式处理，该站点将使用 ASP.NET 进行编码

**例如，我想连接到一个预订网站。传递城市、入住日期、退房日期和入住人数等值。提交页面并从结果页面中检索酒店的描述和房间的价格****（我现在这部分需要处理目标站点的Dom Tree和Regex）**

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:05:27.560

查看[Html 敏捷包](http://htmlagilitypack.codeplex.com/)。

> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。*

# vb.net - 在 Visual Basic 中创建 GPA 计算器的问题

> ID：12114395
> 
> 赞同：0
> 
> 时间：2012-08-24T17:56:12.623
> 
> 标签：vb.net, calculator

```
Public Class GPA_Form

Private Sub exitButton_Click(sender As System.Object, e As System.EventArgs) Handles exitButton.Click
    Me.Close()
End Sub

Private Sub entdatButton_Click(sender As System.Object, e As System.EventArgs) Handles entdatButton.Click
    Const Prompt As String = "Enter number of Credit Hours:"
    Const Title As String = "Credit Hours"
    Const Prompt2 As String = "Enter grades:"
    Const Title2 As String = "Grades"
    Dim inputCredit As String
    Dim inputGrades As String
    Dim creditHrs As Integer
    Dim grades As Char
    Dim gradesCounter As Integer
    Dim creditHrsAccumulator As Integer
    Dim point As Integer
    Dim gpaTot As Integer
    Dim pntAccumulator As Integer

    inputCredit = InputBox(Prompt, Title)
    inputGrades = InputBox(Prompt2, Title2)

    Do While inputCredit <> String.Empty
        Integer.TryParse(inputCredit, creditHrs)
        Char.TryParse(inputGrades, grades)

        gradesCounter += 1
        creditHrsAccumulator += creditHrs

        Select Case grades
            Case Is >= "A"
                point = 4
            Case Is >= "B"
                point = 3
            Case Is >= "C"
                point = 2
            Case Is >= "D"
                point = 1
            Case Is >= "F"
                point = 0
        End Select

        pntAccumulator += point

        gpaTot = pntAccumulator / gradesCounter

        tchData.Text = creditHrsAccumulator.ToString("N0")
        numGrEnt.Text = gradesCounter.ToString("N0")
        gpaData.Text = gpaTot.ToString("N2")

        inputCredit = InputBox(Prompt, Title)
        inputGrades = InputBox(Prompt2, Title2)

    Loop

End Sub
End Class 
```

我只是 Visual Basic 的初学者，但想知道我在计算 GPA 时哪里出错了，即使从 Select...Case 中积累一些东西也是可能的。如果不是，那么我将不得不以不同于上面显示的方式输入，当然。如果有人能给我提示我做错了什么，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:07:27.670

GPA公式不是`gpaTot = pntAccumulator / gradesCounter`但

```
gpaTot = 0
creditHrsAccumulator = 0

Do While inputCredit <> String.Empty
    Integer.TryParse(inputCredit, creditHrs)
    Char.TryParse(inputGrades, grades)

    Select Case grades
        Case "A"
            point = 4
        Case "B"
            point = 3
        Case "C"
            point = 2
        Case "D"
            point = 1
        Case "F"
            point = 0
    End Select

    gpaTot= (creditHrsAccumulator*gpaTot + point*creditHrs)/(creditHrsAccumulator + creditHrs)
    gradesCounter += 1
    creditHrsAccumulator += creditHrs

    ... 
```

你可以摆脱`pntAccumulator`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:29:00.343

[Select ... Case](http://msdn.microsoft.com/en-us/library/cy37t14y%28v=vs.80%29.aspx)的格式与您使用的不同。

我们都知道对于成绩，A > B > C，但 Visual Basic 不知道。在 Visual Basic 中，这些只是字符，因此它们不具有可比性。`Case`语句不支持比较运算符，例如，`>=`它们是隐式的`==`，并且您不写“Case Is”，只写“Case”。尝试这个：

```
Select Case grades
    Case "A"
        point = 4
    Case "B"
        point = 3
    Case "C"
        point = 2
    Case "D"
        point = 1
    Case "F"
        point = 0
End Select 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T20:51:04.987

当比较一个字符串时，你不能使用 >= 你说如果等级大于或等于一个字符串，它只能相等或不相等。

<= pr >= 仅适用于比较数字。

# analysis - 证明卡诺图的非最优性

> ID：12114398
> 
> 赞同：5
> 
> 时间：2012-08-24T17:56:15.117
> 
> 标签：analysis, karnaugh-map

在寻找专门针对 K-map 最优性的文献时，我将不胜感激。

例如，我了解如何在 SOP（积和）表达式和 K-map 之间进行映射，以及为什么通常您希望 K-map 优化表达式更简单，因为找到了 1 的最大分组对应于在一个朴素的 SOP 表达式中找到一些冗余。

我可以隐约看出，K-map 方法可能不会产生最优解，因为我们实际上在做的唯一一件事就是利用布尔代数的分布和恒等 (A + A' = 1) 属性。但是我真的不明白我们没有使用 K-map 执行哪些代数运算，这可能使我们能够达到更优化的解决方案。

结果是我不知道如何开始证明 K-map 并不总是最优的。

我试图阅读：[this](http://www.cs.ubc.ca/~jsafaei/MIN-IWLS-06.pdf) 但是在那篇论文中，只是引用了在 NP 中找到最优布尔表达式的问题，我认为作者只是在暗示 K-maps 不可能是最优的，因为作为一种算法他们没有在 NP 时间运行。

为什么 K-maps 不是最优的，而不仅仅是以“反例”的方式......实际上为什么？你能证明给我看，还是指导我去证明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:12:08.620

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-03T19:22:23.273

如果它对某人有所帮助，我将尝试描述我在尝试实现 K-map 时在最优性方面面临的挑战`python`。这是我用于 SOP 形式的 4 变量布尔函数的贪心算法：

1.  首先检查只有一个变量（例如，`x`或`¬x`）的所有小项，然后选择仅覆盖函数中的一个子集的唯一小项
2.  接下来检查具有两个变量（例如`xy`或`¬wz`）的所有最小项，并选择覆盖函数中尚未覆盖的子集的唯一项。
3.  接下来检查具有三个变量（例如`xyz`或`¬wxy`）的所有最小项，并选择覆盖函数中尚未覆盖的子集的唯一项。
4.  最后添加其余的 4 变量最小术语，这些最小术语与剩下的要覆盖的最小术语相对应，如果有的话。

现在，让我们考虑`f(w,x,y,z)=∑(0,2,4,5,8,10,11,12,13,15)`如下所示的函数：

[![在此处输入图像描述](../Images/b6cd67ecae8be9d4129439e5b7eeabbc.png)](https://i.stack.imgur.com/vTyr3.png)

使用上述步骤，我首先陷入了以下局部最小值，这绝对是 SOP 的最小表示，但不是最小表示： `f(w,x,y,z) = x¬y + ¬x¬z + w¬xy + wxz`. 表示 f 需要 4 个最小项，这是次优的。该算法犯的严重错误是它选择了几个 3-variable minterms和`w¬xy`，`wxz`当单个（`wyz`尚未覆盖。一旦它选择了`w¬xy`，它就必须选择另一个 minterm，因为一个还没有被发现。

[![在此处输入图像描述](../Images/bc7f5272e0975c19ce9f1aea0f065769.png)](https://i.stack.imgur.com/D5GLU.gif)

现在，如果不是在这一步，算法使用`wyz`在考虑其他两个之前考虑的 3 变量最小项的顺序，它将输出最佳 SOP: `f(wxyz) = x¬y + ¬x¬z + wyz`，如下所示。

[![在此处输入图像描述](../Images/09ed451af42a58999293649bbe2fe615.png)](https://i.stack.imgur.com/s5mbw.gif)

# asp.net-mvc - 影响验证操作的属性名称？（MVC/剃刀）

> ID：12114405
> 
> 赞同：1
> 
> 时间：2012-08-24T17:56:42.027
> 
> 标签：asp.net-mvc, razor, validation

我有一个使用标准 MVC 3.0 模板验证（jquery.validate.min.js 和 jquery.validate.unobtrusive.min.js）的表单。我有一个模型，它由一个带有 [Required] 属性的字符串属性组成，如下所示：

```
public class TestViewModel
{
    [Required]
    public string Testing { get; set; }
} 
```

我也有一个相应的视图 Test.cshtml，其中包含一个显示字段和验证消息的表单

```
@model RealEstate.ViewModels.TestViewModel 
@using (Html.BeginForm())
{
    <fieldset>

        <div class="editor-label">@Html.LabelFor(m => m.Testing)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.Testing)
            @Html.ValidationMessageFor(model => model.Testing)
        </div>

        <p>
            <button type="submit" name="buttonValue" value="Ok">Ok</button>
        </p>
    </fieldset>
} 
```

在控制器中，我按如下方式调用视图：

```
return View("Test"); 
```

问题是，在某些表单中，我注意到验证消息在表单加载后立即显示（而不是在回发之后，正如人们所期望的那样）。在其他形式中，相同的设置运行正常。通过对这个问题的进一步调查，我奇怪地发现行为是由属性名称决定的。例如，如果我将属性命名为“Description”（在模型和视图中），则验证无法正常工作，而如果我将属性命名为“Testing”（如示例中），则一切正常。有没有人遇到过同样的问题？

# asp.net-mvc - ASP.Net MVC 会话状态管理 - 跨站点访问

> ID：12114408
> 
> 赞同：1
> 
> 时间：2012-08-24T17:56:59.890
> 
> 标签：asp.net-mvc, session

对于下面详细描述的问题，我将不胜感激。我有 ASP.Net 网络表单的背景 - 并且已经远离开发多年 - 我发现重返游戏并“升级”到 MVC 是非常困难的。然而，我不会投降——所以我在这里提出问题。

我认为学习它的最佳方法是采用现有的 Web 应用程序（Web 表单）并迁移它——从头开始重写它。这很好 - 但是我想要一些关于会话管理模式的见解/帮助。我从未在 web 表单中使用过视图状态（但实现了相当多的状态维护逻辑以提供更好的用户体验）——因此缺少视图状态不是问题。

在我的 webforms 应用程序中，我实现了以下内容 - 已被证明非常成功 - 至少来自用户的反馈。

1.  所有会话变量都在 SQL 表中定义 - （每个用户一行）。例如选择的配色方案。

2.  在会话开始时 - 成功登录后 - 所有会话变量都从表中加载并放入（返回）到会话变量中。

3.  用户浏览站点并做出不同的选择（操作状态变量） - 例如选择他/她想在列表视图中查看的项目数。

4.  在会话结束时 - （超时或放弃）变量被放回 SQL 服务器。

这将在访问该站点时保留状态。由于它是一个内网应用，各种页面承载着丰富的用户界面——事实证明，它对用户来说是一种很好的“类应用”体验。

现在 - 这如何在 MVC 中实现？放置代码的最佳位置在哪里 - 不会弄乱关注点和其他考虑因素的分离。EF 怎么样 - 这在这里派上用场 - 因为会话变量的给定用户列表实际上是数据库表中的一行。

我遇到过不同的帖子和不同的意见 - 但我似乎找不到经过验证的模式。

任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T02:08:44.393

MVC 实际上并没有改变会话状态的工作方式。即使在最新版本的 ASP .NET MVC 中，您上面提到的所有内容都应该仍然有效。

也就是说，您尝试解决的特定问题听起来更像是用户配置文件提供程序，而不是“会话”

# android - android - adding buttons to a custom view

> ID：12114410
> 
> 赞同：0
> 
> 时间：2012-08-24T17:57:08.987
> 
> 标签：android, custom-component

OK, I know this issue has been covered in different questions but I'm trying a different approach here.

This is my custom View class:

```
public class MyView extends View {
    Button mButton;

    public MyView(Context context) {
        super(context);
        mButton = new Button(context);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        //Sets the size needed.
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.save();
        //Draws some graphics.
        canvas.restore();

        canvas.save();
            RectF boundRect = new RectF(left,top,right,bottom);
            canvas.clipRect(boundRect);
            mButton.layout(0,0,canvas.getWidth(),canvas.getHeight());
            mButton.draw(canvas);
        canvas.restore();
    }
} 
```

This draws the button in the correct position and size, but, the button seems half transparent and is not clickable. Does anybody know why and how to fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:03:51.843

Did you set an OnClickListener in your Activity? Your View doesnt get shown clicked because you havent set the different styles for the click-states. Create a new xml file in your drawable folder, for example black_button_style:

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" >
    <shape>
        <solid
            android:color="#343434" />
        <stroke
            android:width="1dp"
            android:color="#171717" />
        <corners
            android:radius="3dp" />
        <padding
            android:left="3dp"
            android:top="10dp"
            android:right="3dp"
            android:bottom="10dp" />
    </shape>
</item>
<item>
    <shape>
        <gradient
            android:startColor="#343434"
            android:endColor="#171717"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#171717" />
        <corners
            android:radius="4dp" />
        <padding
            android:left="3dp"
            android:top="10dp"
            android:right="3dp"
            android:bottom="10dp" />
    </shape>
</item> 
```

In your xml-layout file set the background of your view:

```
android:background="@drawable/black_button_style" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:47:08.487

I don't know if anyone is following this but I didn't feel it was right to leave the question open. It appears that you can do this directly extending the View class but you must also implement some interfaces that ViewGroup implements:

*   android.graphics.drawable.Drawable.Callback
*   android.view.KeyEvent.Callback
*   android.view.ViewManager
*   android.view.ViewParent
*   android.view.accessibility.AccessibilityEventSource

This will make the button clickable.

I also discovered that the transparency originates from the default ICS Holo Dark theme, so the fact the button is a little transparent is desirable.

Eventually, not wanting to reinvent the wheel, I chose to extend ViewGroup instead of View.

# c# - 用于嵌入 C# 程序的 JavaScript 编辑器

> ID：12114411
> 
> 赞同：0
> 
> 时间：2012-08-24T17:57:13.260
> 
> 标签：c#, javascript, winforms, textbox, editor

在我正在开发的 .NET 应用程序中，我想嵌入一个编辑器（文本框），用户可以在其中输入和编辑 JavaScript 代码。语法突出显示会很棒。有谁知道如何实现这一目标？感谢您的任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:59:40.860

假设您正在寻找与 WinForms 一起使用的东西，请查看[ScintillaNet ，这是伟大的](https://github.com/jacobslusser/ScintillaNET)[Scintilla](http://www.scintilla.org/)编辑组件的 .Net 绑定。它是开源的并且非常可靠。 ![在此处输入图像描述](../Images/f8d28040ab0a1cf0d883860b94c274dd.png)

# c++ - 更改指针时的 std::shared_ptr _BLOCK_TYPE_IS_VALID(pHead->nBlockUse)

> ID：12114414
> 
> 赞同：0
> 
> 时间：2012-08-24T17:57:38.297
> 
> 标签：c++, visual-studio-2010, c++11, shared-ptr, sfml

当此函数运行时，我得到调试断言错误，如该行标题中所述`sprite = spr;`。如果我在`sprite.reset();`此之前添加，它会与`sprite.reset();`. 指针被存储在其他地方， in `static std::map<std::string,sf::Sprite> ResourceManager::sprites;`，所以我也不希望为 sf::Sprite 调用析构函数（尽管我怀疑这可能是因为它们被存储在静态对象中......？）

可见游戏对象.h

```
#ifndef VISIBLEGAMEOBJECT_H
#define VISIBLEGAMEOBJECT_H

#include "Game.h"

//just for keeping track of the sprite and drawing

class VisibleGameObject{
public:
    VisibleGameObject(){}
    VisibleGameObject(const std::string& name);
    ~VisibleGameObject();

    std::string getTextureName();
    void setSprite(const std::string& textureName);
    void setSprite(const sf::Texture& texture);
    void setSprite(std::shared_ptr<sf::Sprite> sprite);

    void setPosition(float x,float y);
    void setPosition(const sf::Vector2f& position);

    void setRotationDegrees(float degrees);
    void setRotationRadians(float radians);
    float getRotationDegrees();
    float getRotationRadians();

    void setOrigin(float x,float y);
    void setOrigin(const sf::Vector2f& origin);

    sf::Vector2f getSize();
    sf::Vector2f getOrigin();
    sf::Vector2f getPosition();
    std::shared_ptr<sf::Sprite> getSprite();

    void draw(tgui::Window* wnd);
private:
    std::string name;
    std::shared_ptr<sf::Sprite> sprite;
    std::string texture_name;
    bool _loaded;
};

#endif 
```

从 VisibleGameObject.cpp 中提取

```
//'sprite' is initialised here
    void VisibleGameObject::setSprite(const std::string& textureName){  
        sprite = std::shared_ptr<sf::Sprite>(ResourceManager::createSpriteFromStoredTexture(textureName,name));
        texture_name = textureName;
        _loaded = true;
    }

//error function!
void VisibleGameObject::setSprite(std::shared_ptr<sf::Sprite> spr){
    sf::Vector2f p(0,0);
    float d = 0;
    if(_loaded){
        p = spr->getPosition();
        d = spr->getRotation();
    }
    sprite = spr;
    sprite->setPosition(p);
    sprite->setRotation(d);
    _loaded = true;
} 
```

从 ResourceManager.cpp 中提取

```
sf::Sprite* ResourceManager::createSpriteFromStoredTexture(const std::string& texturename,const std::string& spritename){
    sf::Sprite spt;
    spt.setTexture(*getTextureByName(texturename));
    std::string name = spritename;
    if(spritename == standard_spt_name){
        name = spritename+std::to_string((long long)spritecount);
        spritecount++;
    }

    sprites[name] = spt;
    return &sprites[name];
} 
```

使用最初描述为问题的 setSprite 函数而不更改 sprite 时，VisibleGameObject 似乎可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:38:47.033

你失败了，因为你正在创建一个`std::map<std::string,sf::Sprite>`，它实际上拥有 'sf::Sprite' 对象。然后，您将指向映射到 a 中的对象的指针`std::shared_ptr<sf::Sprite>`，并使用默认删除器。

这意味着当对共享指针的最后一个引用超出范围时，它将调用`delete`该对象。但是，该对象是地图的一部分。这会导致未定义的行为（在这种情况下是断言）。

有几种可能的解决方案：

1) 在这种情况下不要使用 shared_ptr 。由于地图的所有权`sf::Sprite`始终属于地图，因此您可以根本不用理会 shared_ptr 而是使用普通指针。

2）使用什么都不做的自定义删除器。如果您有兴趣隐藏`sf::Sprite`地图所拥有的事实（假设在某些情况下您想即时创建它），那么您需要创建一个空删除函数。这里我使用的是 lambda，但您可以创建自己的函数。当最后一个引用超出范围时，这会导致 shared_ptr 什么都不做。由于内存并不真正由 shared_ptr 拥有，因此这是您想要的行为。

```
sprite = std::shared_ptr<sf::Sprite>(ResourceManager::createSpriteFromStoredTexture(textureName,name), [](const void*){} ); 
```

编辑：

实际上，我会修改第二个选项。我不会返回原始指针，而是让该`createSpriteFromStoredTexture`方法返回 shared_ptr，然后在其中使用 noop 删除器。这样，函数的用户并不知道 sprite shared_ptr 是如何创建的，它只知道此时它有一个 shared_ptr。

3) 使用 的地图`shared_ptr<sf::Sprite>`。地图将始终拥有精灵，但它使 shared_ptr 的使用更加自然。

# r - 有没有人最近使用 RGoogleDocs 包的经验？

> ID：12114420
> 
> 赞同：-1
> 
> 时间：2012-08-24T17:58:27.100
> 
> 标签：r, google-docs

快速搜索 RGoogleDocs 包会提供几个旧的 SO 线程：[https ://stackoverflow.com/search?tab=newest&q=rgoogledocs](https://stackoverflow.com/search?tab=newest&q=rgoogledocs)

有人最近有这个包的经验吗？

我已经安装了该软件包，但是当我尝试将它与我的私人 Google App 帐户一起使用时，我收到一条简单的消息：`Error: Forbidden`消息。

当我切换到我的常规 Google 帐户时，[此处](http://www.omegahat.org/RGoogleDocs/run.html)提到的身份验证步骤有效，但该`getDocs(x)`功能提供：

`Error in getDocs(gcon) : problems connecting to get the list of documents: Forbidden (403)`

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:54:16.180

你试过这个吗？这个对我有用。我没有使用应用程序帐户，而是使用个人帐户。上次我在一个应用程序帐户上尝试它时它有效。

```
library(RGoogleDocs)  
if(exists("ps")) print("got password, keep going") else ps <-readline(prompt="get the password in ")  #conditional password asking  
options(RCurlOptions = list(capath = system.file("CurlSSL", "cacert.pem", package = "RCurl"), ssl.verifypeer = FALSE))  
sheets.con <- getGoogleDocsConnection(getGoogleAuth("yourusername@gmail.com", ps, service ="wise"))  
data<-getWorksheets("yourspreadsheetnamehere",sheets.con)  
names(data)  
sheetofinterest <-sheetAsMatrix(data$"nameoftabehere",header=TRUE, as.data.frame=TRUE, trim=TRUE) #Get one sheet 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T15:20:32.323

自 Statwonk 发布（2012 年）以来，谷歌似乎改变了安全级别，上述建议并没有解决我对相同“错误：禁止”问题的问题。

促使我解决此问题的原因是 Google 发出的有关安全设置的警报。[因此，只需在https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)启用“访问不太安全的应用程序”

当您完成 R 代码后，您可以将其放回禁用（如果需要）

# sql-server - SQL - 在 SELECT 语句和 WHERE 子句中使用变量作为列

> ID：12114425
> 
> 赞同：3
> 
> 时间：2012-08-24T17:58:39.243
> 
> 标签：sql-server, sql-server-2008

我正在尝试从我们的出勤数据库（SQL Server 2008）中提取上一期迟到的学生。期间考勤存储在`ATT.A1, ATT.A2 ... ATT.A7`. 我想安排一个从早上 9 点开始每小时运行的作业，并拉动迟到的学生，但我无法弄清楚代码。

这是我的代码（伪代码）：

```
Declare @Period varchar(6)
Set @Period = 'att.a' + Cast((DATENAME(hour, GETDATE()) - 8) as varchar(1))

Select SC, SN, DT, @Period as Period, ATT.A1
From ATT
Where SC = '9' and @Period = 'T' 
    and DT = DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0) 
```

当我使用它时，我没有得到任何结果。如果我`@Period = 'T'`从 Where 子句中删除，我会得到以下信息：

```
9   5177    2012-08-24 00:00:00.000 att.a1  T
9   5211    2012-08-24 00:00:00.000 att.a1   
9   5225    2012-08-24 00:00:00.000 att.a1  T
9   5229    2012-08-24 00:00:00.000 att.a1  T
9   5235    2012-08-24 00:00:00.000 att.a1  V
9   5242    2012-08-24 00:00:00.000 att.a1  T
9   5268    2012-08-24 00:00:00.000 att.a1 
```

我知道当我`@Period`在`SELECT`语句和`WHERE`子句中使用时，它使用的是文字字符串值`@Period`，但我需要它使用`@Period`as的值`Table.Column`。

因此，在 9:00 它将选择 from `ATT.A1`, 10:00 from `ATT.A2`... 15:00 from`ATT.A7`并且每次比较 ATT.A# = 'T'

我希望这很清楚。

谢谢，安东尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:18:04.117

Sql Server 区分包含列名的字符串和列名本身，因此您需要使用动态 sql 或 case 语句将字符串转换为实际的列名，如下所示：

**案例陈述（我推荐这个）：**

```
Select SC, SN, DT, @Period as Period, ATT.A1
From ATT
Where 
    SC = '9' 
    and DT = DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)
    and case @period
        when 'att.a1' then att.a1
        when 'att.a2' then att.a2
        when 'att.a3' then att.a3
        when 'att.a4' then att.a4
        when 'att.a5' then att.a5
        when 'att.a6' then att.a6
        when 'att.a7' then att.a7
    end = 'T' 
```

**动态 Sql：**

```
Declare @sql varchar(max)
Set @sql = '
    Select SC, SN, DT, @Period as Period, ATT.A1
    From ATT
    Where SC = '9' and ' + @Period + ' = ''T'' 
        and DT = DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)'
Exec(@sql) 
```

# java - Java ANTLR 如何忽略部分规则？忽略子规则后的部分

> ID：12114429
> 
> 赞同：1
> 
> 时间：2012-08-24T17:58:57.847
> 
> 标签：java, antlr, rules

我正在尝试使用 ANTLR 和 Java 创建编译器。我有这个问题，我有一个规则，我不能只使用它的一部分。我有一个命令，例如 0: HALT 0,0,0，之后我想忽略其他所有内容。

eg0: HALT 0,0,0 blah blah blah, 我想忽略 blah blah blah

我的规则是：

```
 rule returns [String value]
    :
    INTEGER':' ro=rocommand i1=INTEGER',' i2=INTEGER ',' i3=INTEGER rest {$value = $ro.text+" "+$i1.text+","+$i2.text+","+$i3.text;   }
    | INTEGER':' rm=rmcommand j1=INTEGER ',' j2=INTEGER '('j3=INTEGER')' rest {$value = $rm.text+" "+$j1.text+","+$j2.text+"("+$j3.text+")"; }
; 
```

我的代码是：

```
CharStream charStream = new ANTLRStringStream(strLine);
simulatorLexer lexer = new simulatorLexer(charStream);
TokenStream tokenStream = new CommonTokenStream(lexer);
simulatorParser parser = new simulatorParser(tokenStream);
System.out.println(parser.rule()); 
```

我得到的是：

```
0: rule:IN 0,0,0
1: rule:LDC 1,1,0
line 1:15 no viable alternative at character 'r'
line 1:18 no viable alternative at character '='
line 1:15 no viable alternative at character 'i' 
```

对于文本：

```
0: rule:IN 0,0,0
1: rule:LDC 1,1,0 r1=0 
```

所以它应该正确解析第一行和第二行直到0。然后它应该忽略r1 = 0。到目前为止它工作正常，但它显示了许多错误，我想摆脱它们。请帮我！

## 编辑

我正在发布整个语法，以便您可以更好地帮助我。我只想识别规则部分。

```
program:
    rule+
;

rocommand:
    'HALT'|'IN'|'OUT'|'ADD'|'SUB'|'MUL'|'DIV'|'LDC'
;

rmcommand:
    'LD'|'LDA'|'LDC'|'ST'|'JLT'|'JLE'|'JGE'|'JGT'|'JEQ'|'JNE' 
;

rest:
  ~('\n'|'\r')* '\r'? ('\n'|EOF)
;

rule returns [String value]
    :
    INTEGER':' ro=rocommand i1=INTEGER',' i2=INTEGER ',' i3=INTEGER rest {$value = $ro.text+" "+$i1.text+","+$i2.text+","+$i3.text;   }
    | INTEGER':' rm=rmcommand j1=INTEGER ',' j2=INTEGER '('j3=INTEGER')' rest {$value = $rm.text+" "+$j1.text+","+$j2.text+"("+$j3.text+")"; }
;

WS  : (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};
INTEGER : '0'..'9'+;
IGNORELINE : '*' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T08:49:22.737

这条规则有几个问题：

```
rest:
  ~('\n'|'\r')* '\r'? ('\n'|EOF)
; 
```

在解析器规则中，`~`否定词法分析器产生的整个标记集。所以`~('\n'|'\r')`不匹配除or以外*的*单个字符。它匹配除匹配或的标记之外的任何*标记*。`'\n'``'\r'`*`\r``\n`*

 *此外，由于您的词法分析器将`'\n'`和`'\r'`放在隐藏通道上，因此这些标记在您的解析器中将不可用。这意味着规则`'\n'`中的`rest`永远无法匹配。

简而言之：你不能“告诉”你的解析器一行的结尾是什么，因为这些字符被你的`WS`规则丢弃了。这意味着您无法正确编写这样的`rest`解析器规则。

对于您的输入：

```
0: IN 0,0,0
1: LDC 1,1,0 r1=0 
```

*（请注意，我删除了`'rule:'`'s）*

以下标记由您的词法分析器生成：

```
token[type=INTEGER text='0']
token[type=':'     text=':']
token[type='IN'    text='IN']
token[type=INTEGER text='0']
token[type=','     text=',']
token[type=INTEGER text='0']
token[type=','     text=',']
token[type=INTEGER text='0']
token[type=INTEGER text='1']
token[type=':'     text=':']
token[type='LDC'   text='LDC']
token[type=INTEGER text='1']
token[type=','     text=',']
token[type=INTEGER text='1']
token[type=','     text=',']
token[type=INTEGER text='0']
token[type=INTEGER text='1']
token[type=INTEGER text='0'] 
```

因此，这些是您的解析器规则中可用的标记。

请注意以下两个字符：`'='`和`'r'`不能被词法分析器匹配，您可以通过查看错误看到：

```
line 2:13 no viable alternative at character 'r'
line 2:15 no viable alternative at character '=' 
```

一个可能的解决方案是创建一个匹配整数和冒号的词法分析器规则：

```
START : INTEGER ':'; 
```

让你`rule`从这个令牌开始：

```
rule
 : START ro=rocommand i1=INTEGER ',' i2=INTEGER ',' i3=INTEGER rest ...
 | ...
 ; 
```

这样，您`rest`可以匹配除该标记之外的零个或多个标记`START`：

```
rest
 : ~START*
 ; 
```

要捕获`'='`and`'r'`字符，请创建一个`ANY`规则并将此规则放在词法分析器规则的末尾：

```
ANY : . ; // match any char 
```

这样，解析器将创建以下解析树：

![在此处输入图像描述](../Images/e53c671ab082f14c6c801109057c2888.png)

另一种解决方案是创建一个`LINE_BREAK`令牌：

```
LINE_BREAK : '\r'? '\n' | '\r'; 
```

*（当然，从中删除`\r`and ！）`\n``WS`*

并做这样的事情：

```
rule
 : INTEGER ':' ro=rocommand i1=INTEGER ',' i2=INTEGER ',' i3=INTEGER rest LINE_BREAK ...
 | ...
 ;

rest
 : ~LINE_BREAK*
 ; 
```*

# ios - 在另一个 UIView 下获取一个 UIView

> ID：12114431
> 
> 赞同：0
> 
> 时间：2012-08-24T17:59:06.630
> 
> 标签：ios, cocoa-touch, uiview

我有几个`UIViews`相同的`superview`。顶部的一个视图我希望能够在屏幕上拖动，而`UIViews`它下面的多个视图在经过它们时会做出反应（底部的视图不重叠）。现在，我有可拖动视图`UIViewController`使用委托协议向我发送触摸事件，这是我想做所有逻辑的地方。

本质上，我希望能够找出我的可拖动视图当前在视图控制器中的视图。有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:06:31.737

您可以通过遍历 self.view 的子视图数组（或您的主视图）来获取所有视图的框架。然后，您可以进行测试以查看特定点是否在其中一个视图中，或者是否存在拖动视图的当前帧与任何其他帧的交集。

有一个方便的方法可以让你做到这一点：CGRectIntersectsRect(r1, r2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:06:41.610

您将需要获取视图的框架并查看它们是否相交。这里的示例代码有一个类似的问题[Detecting if UIView is intersecting other UIViews](https://stackoverflow.com/questions/7361750/detecting-if-uiview-is-intersecting-other-uiviews)

# joomla1.5 - joomla 损坏的 index.php

> ID：12114432
> 
> 赞同：0
> 
> 时间：2012-08-24T17:59:16.163
> 
> 标签：joomla1.5

这是我所做的：

1.  我想安装一个模块（称为 *mod_php*），我读到我可以将它解压缩到*模块*目录
2.  我去了模块管理器并创建了一个类型为 *mod_php* 的新模块实例
3.  我将其定向到现有菜单项
4.  我收到 404 index.php not found 错误
5.  我回去并撤消了我所做的所有更改并从模块目录中手动删除了该文件夹

仍然没有找到 index.php。不过，我*可以*访问根目录中的其他文件，例如 - index2.php

使用 Joomla！1.5。你知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:32:22.587

一方面，我会更新到 2.5 并尝试在 Joomla 后端的模块管理器中安装模块，以便安装正确运行。

# select - SELECT in Criteria Queries

> ID：12114434
> 
> 赞同：0
> 
> 时间：2012-08-24T17:59:17.583
> 
> 标签：select, jpa, criteria, multi-select

I have this class for example:

```
public class Person {
    private Integer id;  
    private String name;  
    private Address address;  
}

public class Address {
    private Integer id;  
    private String street;  
    private String number;      

    ...
} 
```

I would like a build CriteriaQuery in JPA for this SQL

```
select p.name, d.street from Person p join Address d on d = p.address; 
```

Do I have to create a Constructor for class `Person` and class `Address` for this particular situation?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T11:45:36.637

从 JPQL `select p.name, d.street from Person p join Address d on d = p.address;` 到标准

带有构造函数的选项：

首先在您的实体@OneToOne/@OneToMany 等中标记关系。使用@JoinColumn 即

```
 public class Person {
           private Integer id;  
           private String name;  

           @JoinColumn(name="id", referencedColumnName = "id")
           private Address address;  
} 
```

稍后为您的结果类型创建一个类

```
 public class Result(){
           String name;
            String street;

         /* you must have constructor here for the multi select later */
         public Result(String name,String street) {
            this.name = name;
            thi.street = street
         }
      } 
```

然后做（em是实体经理）

```
 CriteriaBuilder cb = em.getCriteriaBuilder();
      CriteriaQuery<PlaceSearch> query = cb.createQuery(PlaceSearch.class);
  Root<Person> personRoot = query.from(Person .class);
  Join<Person, Address> address= personRoot .join(Person_.address);

      / * without meta model 
  Join<Person, Address> address= personRoot .join(person.get("address"));
      */
/* we know Result has a construct of (String,String) . this is important for the                        multi select here */

query.multiselect(person.get(Person_.name),address.get(Address_.street);
List<Result> result = em. 
```

createQuery(query).getResultList();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:05:04.293

您的`where`条件无效：

```
select p.name, d.street from Person p join Address d on d = p.address; 
```

它应该是这样的：

```
select p.name, d.street from Person p join Address d on d.person_id = p.id; 
```

或者：

```
select p.name, d.street from Person p join Address d on d.id = p.address_id; 
```

以及 Person 类的构造函数示例：

```
//cTor I
public Person(Integer id, String name, Address address){
    this.id = id;
    this.name = name;
    this.address = address;
}

//cTor II
public Person(Integer id, String name, Integer addressId, String street, String number){
    this.id = id;
    this.name = name;
    this.address = new Address(addressId, street, number);
} 
```

# android-dialogfragment - datepicker dialog using DialogFragment for multiple activities

> ID：12114436
> 
> 赞同：0
> 
> 时间：2012-08-24T17:59:21.323
> 
> 标签：android-dialogfragment, datepickerdialog

I need to use DatePicker dialog using the new DialogFragment class for multiple activities. I am having more than two activities using datepicker and time picker. I succeeded using the example in developer.android.com for Dialog Fragment for single activity.

```
public class DatePickerFragment extends DialogFragment
implements DatePickerDialog.OnDateSetListener {
    String date;
    Bundle bundle;
    Intent in;
    //private View v;

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
// Use the current date as the default date in the picker
final Calendar c = Calendar.getInstance();
int year = c.get(Calendar.YEAR);
int month = c.get(Calendar.MONTH);
int day = c.get(Calendar.DAY_OF_MONTH);

// Create a new instance of DatePickerDialog and return it
return new DatePickerDialog(getActivity(),(Pickup)getActivity(), year, month, day);

}

public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
    // TODO Auto-generated method stub

} 
```

If I use that I have to write different DialogFragment classes for each activities. Is there any solution like using switch case provided in this example?

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addnewreminder);
    initialize();
    context = getApplicationContext();
    OnClickListener listenerDate = new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            final Calendar c = Calendar.getInstance();
            year = c.get(Calendar.YEAR);
            month = c.get(Calendar.MONTH);
            day = c.get(Calendar.DAY_OF_MONTH);
            showDialog(DATE_DIALOG_ID);
        }
    };
    editTextDate.setOnClickListener(listenerDate);

}

private void initialize() {
    // TODO Auto-generated method stub

    editTextDate = (EditText) findViewById(R.id.editTextDate);

}

private void updateDisplay() {
    currentDate = new StringBuilder().append(day).append(".")
            .append(month + 1).append(".").append(year).toString();

    Log.i("DATE", currentDate);
}

OnDateSetListener myDateSetListener = new OnDateSetListener() {

    @Override
    public void onDateSet(DatePicker datePicker, int i, int j, int k) {

        year = i;
        month = j;
        day = k;
        updateDisplay();
        editTextDate.setText(currentDate);
    }
};

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(this, myDateSetListener, year, month,
                day);
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:54:35.170

我遇到了类似的问题。我想在多个活动中使用 AlertDialog 对话框片段。

这是我的 DialogFragment，它由警报对话框组成。在 newInstance 中，我需要标题和活动。标题将在 string.xml 中。根据我在创建新 MyDialog 时所说的话，活动将是 1 或 2。我使用 putInt 将这两个都传递给 Bundle “args”。（如果您对此更满意，也可以使用 putString。然后在 onCreateDialog 中，我从 getArguments() 中提取标题和活动名称并使用活动决定在开关中采取哪个动作。当然，根据我尝试执行 .doPositiveClick 或 .doNegativeClick 的哪个 Activity，我必须强制转换哪个 Activity 来执行该功能。使用这种方法，我可以进行最小的更改到 MyDialog 类并在其他活动中使用它。

```
public class MyDialog extends DialogFragment {

static MyDialog newInstance(int title, int activity) {
    MyDialog dialog = new MyDialog();
    Bundle args = new Bundle();
    args.putInt("title", title);
    args.putInt("activity", activity);
    dialog.setArguments(args);
    return dialog;
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the Builder class for convenient dialog construction
    int title = getArguments().getInt("title");
    int activity = getArguments().getInt("activity");
    return new AlertDialog.Builder(getActivity())
    .setTitle(title)
    .setPositiveButton(R.string.yes,
            new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            switch (activity){

            case 1:
                ((MyActivity) getActivity()).doPositiveClick();
                break;
            case 2:
                ((AnotherActivity) getActivity()).doPositiveClick();
                break;
            }
        }
    }
    )
    .setNegativeButton(R.string.cancel,
            new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            switch (activity) {
            case 1:
                ((MyActivity)getActivity()).doNegativeClick();
                break;
            case 2:
                ((AnotherActivity)getActivity()).doNegativeClick();
                break;
                    }
                }
            }
    )
    .create();
} 
```

}

这是我调用警报对话框的地方。这可以在两个不同的活动中使用。“我的活动”和“另一个活动”

```
 void showDeleteDialog() {
    DialogFragment newFragment = MyDialog.newInstance(
            R.string.myDialogTitle, 1);
    newFragment.show(getFragmentManager(), "dialog");
} 
```

我希望这有帮助。如果您需要更多说明，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-18T12:59:13.003

来晚了，但我希望这个答案对将来的某个人有所帮助：我通过 setArgument 方法为每个活动传递 DIALOG_ID 参数并在 dialogFragment 中检查 DIALOG_ID 值并为每个活动设置 pickerDialog ：{

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
    if (dialog_id == 1) {
        return new DatePickerDialog(getActivity(), ondateSet, year, month, day);
    } else {
        return new TimePickerDialog(getContext(), ontimeSet, hour, minute, false);
    }
}

} 
```

喜欢这个片段示例以更清楚地理解它

# c++ - 是否可以在浏览器呈现之前拦截 http 请求并修改数据（例如使用正则表达式替换内容）？如果是这样，怎么做？

> ID：12114438
> 
> 赞同：6
> 
> 时间：2012-08-24T17:59:31.047
> 
> 标签：c++, c, network-programming

今天我偶然发现了 Wireshark，它能够拦截您 PC 上的所有网络流量。我想知道是否可以在请求后修改数据（因此发送回PC的数据）并使用正则表达式修改它？就像在浏览器中呈现数据*之前*替换数据中的单词和模式？（例如：用快乐替换 mad 或用“停止拖延”替换整个网站）

如果这是可能的：

*   我应该如何实施？哪些功能是必不可少的？
*   是否有任何开源库可以帮助我完成此任务？
*   在执行此操作之前，我应该做任何事先阅读吗？

请注意，此平台将是 Windows，我将尝试在 C++ 中执行此操作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:02:43.713

您可以为此目的使用[WinDivert (LGPL)（免责声明：WinDivert 是我的项目）。](http://reqrypt.org/windivert.html)WinDivert 是一个用户模式 ​​API，它将一些内核模式 WFP 调用驱动程序功能提升到用户空间。

伪代码看起来像这样：

```
HANDLE handle = DivertOpen(
    "inbound && "                // Inbound packets
    "tcp.SrcPort == 80 && "      // HTTP
    "tcp.PayloadLength > 0",     // Data
    0, 0, 0);
while (TRUE)
{
    // Capture a packet.
    DivertRecv(handle, buf, size, &addr, &len);

    // Modify the packet.
    ...

    // Re-inject modified packet.
    DivertSend(handle, buf, len, &addr, NULL);
} 
```

请注意，WinDivert 是数据包级别的，因此 HTTP 流可能会拆分为多个数据包，这可能会使事情复杂化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:01:02.753

您所描述的称为“透明代理”。（假设您没有修改浏览器）。您通常需要操作系统的帮助才能在浏览器和网络之间连接，或者您需要在单独的路由器中实现代理。在 linux 中，这可以通过 iptables 来完成。我想windows也有类似的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T00:09:39.850

对于 windows 7/vista，您可以使用 Windows Filtering Platform (WFP)，它允许您在不同的层插入挂钩，访问这些数据包，修改它们，并将它们重新注入 tcp/ip 堆栈。对于 Mac OS，您可以将转移套接字与 ipfw 一起使用。因此，您在 ipfw 上设置了一条规则，将某些数据包转移到“转移套接字”，进行修改，然后重新注入。

顺便说一句，wireshark 并没有真正拦截流量，它只是转储流量~

# r - 删除向量的最后一个元素

> ID：12114439
> 
> 赞同：55
> 
> 时间：2012-08-24T17:59:36.770
> 
> 标签：r, vector

我需要删除一组向量中的最后一个数字，即：

```
v <- 1:3
v1 <- 4:8 
```

应该变成：

```
v <- 1:2
v1 <- 4:7 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-08-24T18:10:20.163

`head`您可以在（或）中使用负偏移量`tail`，因此`head(x, -1)`删除*最后一个*元素：

```
R> head( 1:4, -1)
[1] 1 2 3
R> 
```

这也节省了对`length()`.

*编辑：*正如 Jason 所指出的，这种方法实际上并不快。不能与经验争论。在我的机器上：

```
R> x <- rnorm(1000)
R> microbenchmark( y <- head(x, -1), y <- x[-length(x)], times=10000)
Unit: microseconds
                expr    min      lq median     uq     max
1   y <- head(x, -1) 29.412 31.0385 31.713 32.578 872.168
2 y <- x[-length(x)] 14.703 15.1150 15.565 15.955 706.880
R> 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-08-24T18:01:30.667

使用 length 获取对象的长度，并使用 - 删除最后一个。

```
v[-length(v)] 
```

R 中的负索引会提取*除*给定索引之外的所有内容。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-28T02:44:07.233

Dirk 和 Iselzer 已经提供了答案。Dirk's 当然是最直接的，但在我的系统上至少它稍微慢一些，可能是因为带有`[`和`length`检查的向量子集很便宜（并且根据来源，`head`确实使用`length`，实际上两次）：

```
> x <- rnorm(1000)
> system.time(replicate(50000, y <- head(x, -1)))
   user  system elapsed 
   3.69    0.56    4.25 
> system.time(replicate(50000, y <- x[-length(x)]))
   user  system elapsed 
  3.504   0.552   4.058 
```

这种模式适用于更大的向量长度和更多的复制。YMMV。在大多数情况下，易读性`head`肯定超过了边际性能改进。`[`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-12T03:05:24.153

这是另一种选择，以前没有建议过。`NROW`将您的向量视为 1 列矩阵。

```
v[-max(NROW(v))]#1 2
v1[-max(NROW(v1))]#4 5 6 7 
```

根据上面的讨论，这比建议的所有其他方法（略）快：

```
x <- rnorm(1000)
system.time(replicate(50000, y <- head(x, -1)))
user  system elapsed 
3.446   0.292   3.762
system.time(replicate(50000, y <- x[-length(x)]))
user  system elapsed 
2.131   0.326   2.472
system.time(replicate(50000, y <- x[-max(NROW(x))]))
user  system elapsed 
2.076   0.262   2.342 
```

# r - 如何导出已排序的因子加载表？

> ID：12114440
> 
> 赞同：6
> 
> 时间：2012-08-24T17:59:39.700
> 
> 标签：r

**问题定义：**导出“加载”类对象的排序版本

使用 psych-package的 -function 运行因子分析后`fa`，我得到一个因子载荷表，如下所示：

```
Loadings:
         Factor1 Factor2 Factor3
TH_Q1     0.173   0.548   0.403 
TH_Q2     0.306   0.291   0.825 
TH_Q3     0.334   0.203   0.825 
TH_Q4     0.262   0.536   0.171 
TH_Q5     0.235   0.686         
TH_Q6     0.125   0.836         
TH_Q7     0.200   0.838         
TH_Q8_A1                        
TH_Q8_A2          0.155         
TH_Q9     0.644   0.133   0.171 
TH_Q10    0.608   0.208   0.157 
TH_Q11    0.569   0.161   0.306 
TH_Q12    0.722           0.127 
TH_Q13    0.661   0.311         
TH_Q14    0.562   0.407         
TH_Q15    0.675   0.422 
```

在此表上运行该函数`print`（存储在变量*f.loadings 中*）后，我得到一个排序表`print(f.loadings, digits=2, cutoff=.3, sort=TRUE)`：

```
Loadings:
         Factor1 Factor2 Factor3
TH_Q9     0.64                  
TH_Q10    0.61                  
TH_Q11    0.57            0.31  
TH_Q12    0.72                  
TH_Q13    0.66    0.31          
TH_Q14    0.56    0.41          
TH_Q15    0.68    0.42          
TH_Q1             0.55    0.40  
TH_Q4             0.54          
TH_Q5             0.69          
TH_Q6             0.84          
TH_Q7             0.84          
TH_Q2     0.31            0.82  
TH_Q3     0.33            0.83  
TH_Q8_A1                        
TH_Q8_A2 
```

`print`但是返回对象的“不可见”副本，因此我无法以请求的格式导出此结果。但是，我想找到一种方法来导出此表的 .csv 版本。

我无法找到一种方法来指定参数`write.csv`以对“加载”类的对象进行正确排序。分配 print 函数的结果也不能解决这个问题，因为它只返回未排序的版本。因此`x <- print(f.loadings, digits=2, cutoff=.3, sort=TRUE)`，随后调用新变量 x，仍然返回未排序的表版本。

什么函数适合对“加载”对象进行排序并显式返回该对象？换句话说，我怎样才能导出这样的排序表？

*生成表格的代码：*

```
f.loadings <- structure(c(0.172693322885797, 0.306277415972136, 0.334012445825371, 
0.261822356615649, 0.234600824098634, 0.124541887813939, 0.200125976802047, 
0.0199775267669519, 0.0771905784767979, 0.643886342785064, 0.608004298828405, 
0.569498016145868, 0.722454442131503, 0.660683752725898, 0.561975379133291, 
0.675119271585253, 0.548184083921831, 0.291215413974386, 0.20334622551054, 
0.535545380240845, 0.685635981787823, 0.836401389336655, 0.837525597359627, 
0.0186113870539496, 0.154659865540958, 0.132908227837058, 0.20832344061795, 
0.160657979843522, 0.0933961709813049, 0.311465272208257, 0.406860675137862, 
0.421946817384512, 0.402664774610544, 0.824934582975472, 0.825220077707656, 
0.170809720550637, -0.0486225264368695, 0.0612401518170266, 0.052596915030506, 
-0.0463868732056794, 0.0208945338424677, 0.171412077700389, 0.156524506151013, 
0.306203004564158, 0.127377474768802, -0.0869197819037828, -0.0962274476959987, 
-0.0465278761105364), .Dim = c(16L, 3L), .Dimnames = list(c("TH_Q1",  "TH_Q2", "TH_Q3", "TH_Q4", "TH_Q5", "TH_Q6", "TH_Q7", "TH_Q8_A1",  "TH_Q8_A2", "TH_Q9", "TH_Q10", "TH_Q11", "TH_Q12", "TH_Q13",  "TH_Q14", "TH_Q15"), c("Factor1", "Factor2", "Factor3")), class = "loadings") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T19:59:39.317

以下是如何破解`loadings`. 我已将打印语句分配给`newx`并导出。当您将`printLoadings`结果分配给变量时，您可以随意使用已排序的对象。结果现在是一个字符表。我将把它留给你作为将其转换为数字的练习。

```
> getS3method("print","loadings") #get the hidden method and modify it
printLoadings <- function (x, digits = 3, cutoff = 0.1, sort = FALSE, ...) 
{
   Lambda <- unclass(x)
   p <- nrow(Lambda)
   factors <- ncol(Lambda)
   if (sort) {
      mx <- max.col(abs(Lambda))
      ind <- cbind(1L:p, mx)
      mx[abs(Lambda[ind]) < 0.5] <- factors + 1
      Lambda <- Lambda[order(mx, 1L:p), ]
   }
   cat("\nLoadings:\n")
   fx <- format(round(Lambda, digits))
   names(fx) <- NULL
   nc <- nchar(fx[1L], type = "c")
   fx[abs(Lambda) < cutoff] <- paste(rep(" ", nc), collapse = "")
   newx <- print(fx, quote = FALSE, ...) # I assigned this to a variable
   vx <- colSums(x^2)
   varex <- rbind(`SS loadings` = vx)
   if (is.null(attr(x, "covariance"))) {
      varex <- rbind(varex, `Proportion Var` = vx/p)
      if (factors > 1) 
         varex <- rbind(varex, `Cumulative Var` = cumsum(vx/p))
   }
   cat("\n")
   print(round(varex, digits))
   invisible(newx) #previously returned x
}

mmm <- printLoadings(f.loadings)
> str(mmm)
 chr [1:16, 1:3] " 0.173" " 0.306" " 0.334" " 0.262" " 0.235" ...
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:16] "TH_Q1" "TH_Q2" "TH_Q3" "TH_Q4" ...
  ..$ : chr [1:3] "Factor1" "Factor2" "Factor3"

> as.table(mmm)
         Factor1 Factor2 Factor3
TH_Q1     0.173   0.548   0.403 
TH_Q2     0.306   0.291   0.825 
TH_Q3     0.334   0.203   0.825 
TH_Q4     0.262   0.536   0.171 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:57:46.150

当一个函数返回它的结果时，`invisible()`它仅仅意味着结果没有被打印出来。但是，您仍然可以将结果分配给变量并将其作为任何其他对象进行操作。

所以：

```
x <- print(f.loadings)
x
Loadings:
         Factor1 Factor2 Factor3
TH_Q1     0.173   0.548   0.403 
TH_Q2     0.306   0.291   0.825 
TH_Q3     0.334   0.203   0.825 
TH_Q4     0.262   0.536   0.171 
TH_Q5     0.235   0.686         
TH_Q6     0.125   0.836         
TH_Q7     0.200   0.838         
TH_Q8_A1                        
TH_Q8_A2          0.155         
TH_Q9     0.644   0.133   0.171 
TH_Q10    0.608   0.208   0.157 
TH_Q11    0.569   0.161   0.306 
TH_Q12    0.722           0.127 
TH_Q13    0.661   0.311         
TH_Q14    0.562   0.407         
TH_Q15    0.675   0.422         

               Factor1 Factor2 Factor3
SS loadings      3.259   3.145   1.747
Proportion Var   0.204   0.197   0.109
Cumulative Var   0.204   0.400   0.509 
```

同样，`str(x)`表示结果是一个矩阵：

```
str(x)
 loadings [1:16, 1:3] 0.173 0.306 0.334 0.262 0.235 ...
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:16] "TH_Q1" "TH_Q2" "TH_Q3" "TH_Q4" ...
  ..$ : chr [1:3] "Factor1" "Factor2" "Factor3" 
```

您现在可以使用`write.csv(x)`来导出结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T18:10:05.917

尝试 fa.sort 函数，而不是在 print 函数中排序。

也就是说，如果 f <- fa(Thurstone,3) 您可以 print(f,sorted=TRUE) 不打印但不返回排序的对象，或者 fs <- fa.sort(f) 返回排序的对象，然后您可以将其导出为 csv。

账单

# css - Sweden flag--background

> ID：12114443
> 
> 赞同：1
> 
> 时间：2012-08-24T18:00:08.827
> 
> 标签：css

I am brand new to CSS. I want to make the background of my web page the flag of Sweden. I could probably go out and import an image, but I wanted to code it up myself for practice. I am able to get the blue background on the page, but how would I go about making the gold cross on the flag?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T18:07:47.320

这是一个尝试：[小链接](http://jsfiddle.net/UvuQt/3/show/)。您可以在此处查看源代码：[另一个小链接](http://jsfiddle.net/UvuQt/3/)。不过，这可能并不完美！

CSS用于创建：

```
html, body {
    height: 100%;
    width: 100%;
}
body {
    background-color: blue;   
}
body:after {
    position: absolute;
    content: '';
    height: 100%;
    width: 10%;
    top: 0px;
    left: 25%;
    margin-left: -5%;
    background-color: yellow;    
}
body:before {
    position: absolute;
    content: '';
    width: 100%;
    height: 10%;
    top: 50%;
    left: 0px;
    margin-top: -5%;
    background-color: yellow;  
} 
```

我希望以任何方式有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:07:35.183

你必须这样做

```
.flag-background { position: relative; background: blue; width: 150px; height: 100px; }
.horiz-cross { width: 100%; height: 10px; background: yellow; position: absolute; top: 50px; }
.vert-cross { height: 100%; width: 10px; left: 50px; background: yellow;position: absolute}​

​&lt;div class="flag-background">
<div class="horiz-cross"></div>
<div class="vert-cross"></div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/chadpeppers/sYeTq/](http://jsfiddle.net/chadpeppers/sYeTq/) 这是非常基本的，但它会让你开始

# django - No way to run pymongo with gunicorn?

> ID：12114445
> 
> 赞同：1
> 
> 时间：2012-08-24T18:00:13.967
> 
> 标签：django, pymongo, gunicorn

Seems like pymongo cannot be ran with gunicorn?

My stack is Django + MongoEngine (wrapper to pymongo) and now trying to implement web sockets (gevent), so that it requires to run with gunicorn server. However, when running with Gunicorn. The landing page which does not require any database hit, it loads fine, but after logging in (hits db) it does funky thing and returns "AssertionError: ids don't match" error in all pages.

Did any one experience the same thing as me? if you know the solution, please let me know.

I'm running Django 1.4 + pymongo 2.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:08:52.747

将 pymongo 升级到 2.4.1 有所帮助。工作没有任何问题。

# javascript - Read bytes from a binary file with JavaScript, without jQuery

> ID：12114446
> 
> 赞同：3
> 
> 时间：2012-08-24T18:00:14.227
> 
> 标签：javascript, file, internet-explorer, binary, byte

I'm trying to make a javascript emulator, and i'd like it to be very light, so I don't want to load the "ROMs" with jQuery and jDataView. Si I made my own ROM loader in pure JS.

It works pretty well (thanks to many topics on this site), but there's still a problem on IE, for which I couldn't find any help elsewhere.

Here's my JS code:

```
/**
* @param file - the path or URL of the ROM file to load. The file must be served with the Mime-Type: 'text/plain; charset=x-user-defined'
* @param callback - a function to call when the loading is complete. Its first parameter contains an array of numbers representing the ROM bytes.
*/
function loadRom(file, callback)
{
  var xhr = new XMLHttpRequest();                             // AJAX loader
  xhr.onreadystatechange = function(){
    if(xhr.readyState == 4){                                  // When the file content is received
      var str = xhr.responseText;                             // Store it as a string
      var ch, bytes = [];
      for (var i = 0; i < str.length; i++){
        ch = str.charCodeAt(i);                               // Read each character
        bytes.push(ch & 0xFF);                                // Store the last byte of the character
      }
      callback(bytes);                                        // Call the callback function with bytes as parameter
    }
  };
  xhr.open("GET", file, true);                                // Load the file
  xhr.send(null);                                             // Send the AJAX request
}

// Test
var mem=[];
loadRom("TEST.ch8", function(m){
  for(i=0;i<m.length;i++)console.log(m[i].toString(16))                 // Log each byte in hexa
}); 
```

Here's my .htaccess (the chip8 ROMs have the extension .ch8):

```
AddType 'text/plain; charset=x-user-defined' ch8 
```

And here's my test ROM (it contains the bytes 0x00 to 0xFF)

[http://www.filedropper.com/test_16](http://www.filedropper.com/test_16)

Results of the test:

Firefox and Chrome work fine: they log every byte from 0x00 to 0xFF

IE9 does the same, except for the 32 bytes between 0x80 to 0x9F, that are replaced with totally unrelated numbers. ( Even if we compare binary codes, there's no apparent conversion logic )

So my questions are:

*   What does IE9 do with these bytes?
*   How could I fix it?

Thanks for your ideas (or solutions)!

Max.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:34:17.857

您是否考虑过对数据进行 base-64 编码并在客户端对其进行解码？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:11:29.827

我终于找到了答案：

*   无论您做什么，IE 都会转换这些字符。

*   但它提供了一种将 AJAX 响应直接导出到字节数组中的方法，这几乎比其他浏览器更酷

    **var bytes = VBArray(xhr.responseBody).toArray(); // 仅在 IE 上！**

所以这是将文件转换为字节数组的函数，直到 IE7！

```
function loadRom(path, memory, callback)
{
  var i = 0,                                                                                        // Loop iterator
      ie /*@cc_on=1@*/,                                                                             // IE detection with conditional compilation
      xhr = new XMLHttpRequest;                                                                     // XHR object
  xhr.onreadystatechange = function(){                                                              // When the XHR object state changes
    if(xhr.readyState > 3){                                                                         // When the file is received (readyState 4)
      for(xhr = ie ? VBArray(xhr.responseBody).toArray() : xhr.responseText; i < xhr.length; i++){  // Get the response text as a bytes array (on IE) or a string (on other browsers) and iterate
        memory.push(ie ? xhr[i] : xhr.charCodeAt(i) & 0xFF);                                        // Store in memory the byte (on IE) or the last byte of the character code (on other browsers)
      }
      callback()                                                                                    // Call the callback function
    }
  }
  xhr.open("GET", path);                                                                            // Load the file
  xhr.send()                                                                                        // Send the XHR request
} 
```

# python - Performing code depending on input without pressing 'Enter'

> ID：12114447
> 
> 赞同：0
> 
> 时间：2012-08-24T18:00:16.283
> 
> 标签：python

> **Possible Duplicate:**
> [raw_input in python without pressing enter](https://stackoverflow.com/questions/3523174/raw-input-in-python-without-pressing-enter)

Some of the code:

```
print "Do you want to (e)ncode?"
option = raw_input("> ")
if option == "e":
    print "Encoding..." # and some other code, which isn't important here
else:
    pass 
```

What I want to do is that if you enter "e", it immediately performs the code in the block, without pressing 'Enter'.

Is this possible? If yes, how?

# iphone - obj-c 中子类的指定初始化器，超级菜鸟

> ID：12114448
> 
> 赞同：0
> 
> 时间：2012-08-24T18:00:24.693
> 
> 标签：iphone, objective-c

对不起，如果这是一个菜鸟问题，但如果我为我的基类指定的初始化程序看起来像

```
- (id)initWithName:(NSString *)name {
   if (self = [super init]) {
      _name = [name retain];

   }
   return self;
} 
```

现在，如果我有一个继承自此类的子类并想调用该初始化程序，我会这样做：

```
- (id)initWithSomethingElse:(NSString *)somethingElse name:(NSString *)name {
   if (self = [super initWithName:name]) {
        _somethingElse = [somethingElse retain];

   }
   return self;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:03:25.497

对，那是正确的。事实上，您可以调用任何超类的初始化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:03:35.090

正确，这就是在 objc 中初始化的方式。

# sql-server-2008-r2 - 撤消自上次还原以来 SQL Server 数据库中的更改

> ID：12114451
> 
> 赞同：1
> 
> 时间：2012-08-24T18:00:28.437
> 
> 标签：sql-server-2008-r2, database-restore

假设我`db1`从备份 ( `backup1.bak`) 中恢复了一个数据库 (比如 )，然后在`db1`. 此时，如果我想摆脱更改并回到恢复状态，我该怎么做？目前，我正在`db2`从同一个备份 ( `backup1.bak`) 创建一个新数据库 ()，这显然效率不高。有人可以建议如何撤消自上次还原以来 db1 中的更改？

PS：我使用的是 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:04:16.387

还原数据库后，[创建数据库快照](http://msdn.microsoft.com/en-us/library/ms175876.aspx)。

要撤消您的更改，[请将您的数据库恢复为您的快照](http://msdn.microsoft.com/en-us/library/ms189281.aspx)。

这将使您不必保留您的 .bak 文件......如果您的数据库相对于您将对数据库进行的更改量来说很大，那么这可能会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:03:49.757

要恢复，您可以简单地从备份中再次恢复数据库`WITH REPLACE, RECOVERY`。

# ruby-on-rails - 如何将此 ERB 转换为 Slim 模板语言？

> ID：12114452
> 
> 赞同：1
> 
> 时间：2012-08-24T18:00:46.237
> 
> 标签：ruby-on-rails, ruby, erb, slim-lang

我正在使用 Slim 模板语言 (http://slim-lang.com/)。

有人可以告诉我如何将此 ERB 转换为在 friends.html.slim 模板中使用吗？

数据/people.yaml

```
friends:
  - Tom
  - Dick
  - Harry 
```

再培训局

```
<ol>
  <% data.people.friends.each do |f| %>
  <li><%= f %></li>
  <% end %>
</ol> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:09:25.853

问题多于答案，因为我有点假设您已经这样做了：

```
ol
  - for f in data.people.friends do
    li = f 
```

如果那不起作用，请描述您尝试*了*什么，什么不起作用。

# c - while 循环不会以逻辑条件终止

> ID：12114453
> 
> 赞同：0
> 
> 时间：2012-08-24T18:00:49.050
> 
> 标签：c, loops, comparison, while-loop, conditional

如果我添加 OR 条件语句，此循环不会终止。如果一个是假的，那么它应该终止。

//全局变量

```
int x = 100;
    char *n= malloc (64);

void add(void)
{       

    do      
    {
        printf("Would you like to add 1? (y/n) ");
        fgets(n, 64, stdin);
            //removes newline
        n[strlen(n)-1] = '\0';
            x++;
    }       
//if I add || (x!=100) it keeps looping me even if I press "n"
//otherwise without it it works fine

        while((strncmp(n, "n", 1) != 0) || x!=100 );

        free(n);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:04:07.857

在循环的底部，您正在执行`x++`. 一旦你达到了 while 条件，`x == 101`那么你的循环就永远不会终止，`x`在检查条件时永远不会等于 100。

也许你想要：

```
while((strncmp(n, "n", 1) != 0) && x != 100); 
```

如果两个条件中的任何一个为假，这将终止循环。

`&&`是“逻辑与”运算符，`||`是“逻辑或”运算符。为了帮助您跟踪，您可以使用[真值表](http://en.wikipedia.org/wiki/Truth_table)来帮助您整理详细信息。逻辑与与逻辑合取相同，逻辑或与逻辑析取相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:04:05.503

`while`只要整个条件的计算结果为`1`或 true，循环就会执行。如果`x`is *never* `100`，那么条件中的逻辑 OR 将*始终*为真，因为它的操作数之一为真。

`x`从 开始`100`，每次循环时，递增`x`. 所以在你测试`x`循环条件之前，它大于 100 - 它是 101 - 并且总是增加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T18:10:09.243

您选择了错误的布尔运算符。如果您键入 n，并且 x 等于 10，则 while 条件简化如下：

而((strncmp(n, "n", 1) != 0) || x!=100 ); 而（（0！= 0）||（10！= 100））；而（0 || 1）而（1）

由于每个比较都已经是 NOT，因此您需要 && 而不是 ||

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T18:22:17.640

检查数字相等以终止循环通常是一个坏主意。您想要检查一系列值，例如`x < 100`.

因此，经典的`for`循环测试 is**`i < n`**和 not `i != n`。

当变量是布尔类型时，我只用相等来终止循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T18:26:08.643

条件 x!=100 永远不会为假，因为在执行第一个 do while 时 x 已经增加到 101，因此要使语句为假，您应该使用 && 代替 ||

# javascript - LABjs加载IE条件

> ID：12114456
> 
> 赞同：0
> 
> 时间：2012-08-24T18:01:06.633
> 
> 标签：javascript, internet-explorer, conditional-comments, labjs

我遇到了 LABjs 的问题。我加载了所有脚本，但是当我在 IE 中使用它时，它完全崩溃了。

```
 $LAB
     .script('https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js').wait()
     .script('https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js') 
```

如果我添加一个条件语句

```
<!--[if IE ]>
     <script type="text/javascript" src="somescript.js"></script>
<![endif]--> 
```

这将失败。我如何将它包含到 LABjs 中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:31:48.580

我首先要**强烈**地说，你不应该再做 IE-only 脚本了。但是，如果您真的必须这样做，并且在您为这种不良做法多次拍打自己的手腕之后...

```
(function(){

   // From: http://james.padolsey.com/javascript/detect-ie-in-js-using-conditional-comments/
   var ie_version=(function(){var c,a=3,b=document.createElement('div'),d=b.getElementsByTagName('i');while(b.innerHTML='<!--[if gt IE '+(++a)+']><i></i><![endif]-->',d[0]);return a>4?a:c})();

   $LAB.setOptions({AlwaysPreserveOrder:true})
   .script('https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')
   .script('https:///ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js')
   .script(ie_version ? 'somescript.js' : '')
})(); 
```

`ie_version`代码片段来自： http : [//james.padolsey.com/javascript/detect-ie-in-js-using-conditional-comments/](http://james.padolsey.com/javascript/detect-ie-in-js-using-conditional-comments/)，它使用动态创建的 IE 条件注释来确定 IE 版本。

注意：根据您发布的内容，我假设“somescript.js”需要在 jquery 和 jquery-ui 脚本之后严格执行。如果不是这种情况，您可以根据需要将其放在`$LAB`链中的不同位置，并且您可以取出`setOptions({AlwaysPreserveOrder:true})`并`wait()`仅在需要/必要时在链中使用。

# c++ - C++ linux 应用程序在长时间运行后停止系统。如何找到原因？

> ID：12114460
> 
> 赞同：0
> 
> 时间：2012-08-24T18:01:15.387
> 
> 标签：c++, linux, serial-port

我正在创建一个科学应用程序，它与两个设备（一个通过 USB，一个通过串口）通信，从它们获取数据并在 GUI 中呈现。运行几个小时后（可能是 2-5 个？），由于未知原因，整个系统突然开始变慢，一两分钟后根本没有任何响应。唯一的解决方案是使用电源按钮重新启动 PC。USB 端口通信由该设备附带的代码处理，因此可能没问题。我唯一的提示是，原因可能是我第一次实现的串行端口通信。但它也可能是其他任何东西（例如 GUI）。我在 Scientific Linux 5 上运行它。要打开串行端口，我使用：

```
tti::tti(const char* port)
{
fd = open(port,
        (O_RDWR | O_NOCTTY) & ~O_NONBLOCK); //opening the port
if (fd == -1)
{
    std::cout<<"error in tti::tti(const char* port) while opening port"<<std::endl;
}
else
{
    //setting parameters
    struct termios options; //create the struct
    tcgetattr(fd,&options); //get the current settings of the serial port
    cfsetispeed(&options,B9600); //set read and write speed to 19200 BAUD
    cfsetospeed(&options,B9600);
    options.c_cflag &= ~PARENB; //set no parity
    options.c_cflag &= ~CSTOPB; //set one stop bit
    options.c_cflag &= ~CSIZE; //clear current data size setting
    options.c_cflag |= CS8; //set 8 bit per work
    options.c_cc[VMIN] = 2; //minimum amount of characters to read
    options.c_cc[VTIME] = 10; //amount of time to wait for amount of data specified in VMIN in tenths of a second
    options.c_cflag |= (CLOCAL | CREAD); //don't allow changing of port control + enable the receiver
    if (tcsetattr(fd,TCSANOW,&options)!=0)
    {
        std::cout<<"error in tti::tti(const char* port) while setting options"<<std::endl;
    }
}
} 
```

然后我每隔约 3 秒使用一次此代码，连续 4 次：

```
std::string tti::query(std::string input){
input+=10;

int bytes = 0;

bytes = write(hSerial, input.c_str(), input.size());

if(bytes < 1){
    std::cout<<"error in tti::send(std::string input) "<<std::endl;
    return "error: no bytes written";
}

bytes=0;
const int n=10;
char szBuffer[n +1]={0};
bytes = read(hSerial,szBuffer,n);
bytes = read(hSerial,szBuffer,n);
if(bytes < 1){
    std::cout<<"error in tti::query(std::string input)"<<std::endl;
    return "error: no bytes read";
}

std::string s2(szBuffer);
return s2;

} 
```

你能给我一些建议如何找到这种行为的原因吗？我尝试使用 valgrind 运行该应用程序，但没有发现内存泄漏。我还尝试使用 cppcheck 检查代码，但一无所获。问题是应用程序没有崩溃 - 它正在运行，但没有响应。它从未在短期内发生过。我等待它停止的最短时间是 2 小时，但我也运行了 2-3 次更长的时间，没有任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T18:06:16.483

该应用程序不必为了出现内存问题而实际泄漏内存。如果您不断地分配更多内存来保存新数据，那么内存使用量将无限扩大（直到您的系统行为与您描述的非常相似），即使您实际上并没有泄漏内存。

首先，只需观察 or 中的内存使用`top`情况`ps`。然后，如果你找不到永远使用内存的地方而不释放它，你可以使用`massif`valgrind 的工具查看哪些代码行负责堆的当前状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:22:16.970

您可以在批处理模式下运行 top。在这种模式下，您可以将其输出保存在文件中以供稍后分析：

```
 top -b -n sample_delay_in_sec | tee log.log 
```

此命令会将输出打印到控制台并将其保存到 log.log 文件中。

有趣的输出可以是**CPU**、**Mem**、**Swap**。当然看看你是否有一些使用大量内存或/和 CPU 的进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:35:21.027

谢谢您的回答！

我设法找到了增加内存使用的来源。确实，“top”命令对我帮助很大。事实证明，我每秒分配大约 1MB 而不删除它！几个小时后，PC 的所有物理内存都被我的应用程序“吃掉”了，所以它停止了一切。有选择地禁用我的部分代码并运行“top”，我找到了导致问题的部分。

原因是其他地方，而不是串行端口通信。在应用程序中，我有 6 个对象（同一类的实例）负责实时数据绘图。情节持有类的成员之一是指向情节本身的指针。每次刷新 GUI 时，我都会用新的绘图对象覆盖指针，而不删除旧的。我以为它会自动删除，但我错了。

```
void graphData::updateGraph () {

    delete m_graph; //THIS LINE WAS MISSING
    m_graph = new TGraph(m_xArray.GetSize(),m_xArray.GetArray(),m_yArray.GetArray());

    //(...) some more code in this function
} 
```

听起来很简单，但我花了一周的时间来解决这个问题。;)

# java - 收听 jms 主题时丢弃消息

> ID：12114462
> 
> 赞同：3
> 
> 时间：2012-08-24T18:01:25.980
> 
> 标签：java, spring, jms, spring-jms

我正在使用如下定义的 spring jms 侦听器。它通常工作正常但是我看到它根据recieveTimeout设置不断断开和重新连接。

```
<bean id="jmsContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <!-- mrgm connection to the jca adapter -->
    <property name="connectionFactory" ref="mrgmConnectionFactory" />
    <!-- name of the topic -->
    <property name="destinationName" value="test.destinationname" />
    <!-- class which will listen for messages (must implement javax.jms.MessageListener -->
    <property name="messageListener" ref="TestListener" />
    <property name="sessionTransacted" value="true" />
    <property name="receiveTimeout" value="1000" />
            <!--turning this on drops all messages -->
            <!--        <property name="pubSubDomain" value="true" /> -->

</bean> 
```

我已经做了一些测试，当有很多消息发布到该主题时，它会丢弃一些，因为如果消息是在断开连接和重新连接之间的一小段时间内出现的，那么听众显然会错过它。

如果我将recieveTimeout 设置为0，这个问题就会消失。收听某个主题时，我应该始终将 recieveTimeout 设置为 0 吗？还是我以错误的方式处理整个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:46:04.173

断开连接和重新连接时，如果您的订阅者不是持久的，您可能会丢失消息。然而，弹簧 DMLC 不应重新连接。你能再解决一下吗？它本质上应该订阅一个主题`session.createConsumer(..)`，然后循环`consumer.receive()`或`consumer.receive(timeout)`. 不确定为什么在将超时设置得更高时您的 DMLC 会重新连接。

不过，您应该没有超时就可以了，但是您可能希望通过调试日志记录等来跟踪重新连接的原因。

# jquery - 我将字体大小设置为 16pt，但是当我获取它时，它返回 21px。我可以让它返回pt吗？

> ID：12114465
> 
> 赞同：2
> 
> 时间：2012-08-24T18:01:30.777
> 
> 标签：jquery, css, computed-style

> **可能重复：**
> [让 jquery 以点为单位返回字体大小](https://stackoverflow.com/questions/4357863/get-jquery-to-return-font-size-in-points)

使用 jQuery，我将某些内容设置为 16pt，因为这是我以前版本的 Web 应用程序所做的。问题是在我将代码设置如下之后的某个时间点：

```
$(SELECTED).css("font-size","16pt"); 
```

我需要去拿它。当我获取它时，它不会返回 16pt，而是 21px。是否有我可以使用的转换率，或者获取 16pt 的方法？

```
var fetched_size = $(SELECTED).css("font-size"); 
```

## 您是否需要传递一个选项，或者以不同的方式处理它？

作为对这个问题的跟进，我注意到在我正在构建的东西上，事情看起来并不像他们应该的那样。保存我的数据的文本框似乎保存了某些信息。您知道为什么以下内容不起作用吗？

```
var x = "32";
$("#fontsize").val(decodeURIComponent(x));  //this points to a input:text
 //the above statement doesnt seem to override the current contents with the value of x. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T18:08:39.253

我相信`css`是为了访问计算的样式。直接使用内置`style`属性即可：

```
var fetched_size = $(SELECTED)[0].style.fontSize; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:18:45.920

您可以通过以下方式获得转化率：

```
var ptToPx,
    o=document.createElement('div');
o.style.width='1000pt';
document.body.appendChild(o);
ptToPx=o.clientWidth/1000;
document.body.removeChild(o);
o=null;
var pxToPt=Math.pow(ptToPx,-1); 
```

然后，

```
alert('10px are '+10*pxToPt+'pt');
alert(10+'pt are '+10*ptToPx+'px'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:06:06.400

我建议你根本不要使用 pt for web。使用 px 或 ems。点 (pt) 是为印刷设计创建的，在基于屏幕的使用中几乎没有意义。

编辑：此外，因为 pt 大小从未在屏幕上使用，所以无法在 pt 和 px 之间精确转换。这是一个粗略的[转换表](http://reeddesign.co.uk/test/points-pixels.html)

您可以在此处阅读有关使用 ems/px 的更多信息：http: [//kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)

# perl - Jenkins/Hudson 没有发现 Perl 脚本错误

> ID：12114471
> 
> 赞同：2
> 
> 时间：2012-08-24T18:01:49.927
> 
> 标签：perl, error-handling, hudson, jenkins

我目前正在使用 Jenkins/Hudson 触发 Perl 脚本，但是，我正在努力找出正确的异常是抛出一些 Jenkins 捡起它。在控制台中，它显示 perl 脚本错误，但 Jenkins 以 Build Success 结束。

我已经从 die 命令和 exit 1 的系统打印中尝试了很多东西，但它似乎仍然没有捕捉到任何东西。

任何帮助都会很棒！先谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T23:40:08.700

Jenkins 认为以非零值退出的构建步骤失败。应该足够了`die()`

也许您在 perl 之后还有另一个以零退出的 shell 命令？Jenkins 没有看到各个进程的每个退出代码。Jenkins 只是将您输入到构建步骤区域的脚本放入一个临时文件并调用`/bin/sh`该临时文件。当脚本失败时，您可以让脚本以非零值退出。

最简单的方法是使用`#!/bin/sh -xe`. 如果您研究 shell 手册页，您将看到该`-e`选项使 shell 在任何进程以非零退出时停止脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-05T00:29:08.890

我在 Linux 和 Windows 上运行 Jenkins 作业时遇到了这个问题。我（艰难地）了解到 Linux 返回码必须在 0 到 255 之间。如果返回码超出此范围，则返回码将设置为 0。Perl 文档指出 die() 的返回码是非零，但不再具体。因此，如果您的 die() 调用生成一个不在 0 到 255 之间的非零返回码，Linux 会将其视为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:53:47.570

我使用[了 TAP::Harness::JUnit](https://metacpan.org/module/TAP%3a%3aHarness%3a%3aJUnit)。它将 TAP 输出包装在 XML 文档中，然后 XML 将通过 SCP 传送到 Hudson 服务器，供 Hudson 使用。

让 hudson 命令正确地执行所有 shell 命令需要一些争论，但我的意思是两到三个尝试正确设置所有路径。

# apache - .htaccess 重定向多次重写

> ID：12114472
> 
> 赞同：1
> 
> 时间：2012-08-24T18:01:51.910
> 
> 标签：apache, .htaccess

我正在尝试将一些选择页面重定向到 HTTPS。我找到了许多示例，但它们似乎不适用于我当前的 htaccess 文件中的内容。我目前的 htaccess 有

```
RewriteEngine On
Options +FollowSymLinks
# Redirect all other domains to the primary
RewriteCond %{HTTP_HOST} ^(www\.?|)(domain1\.com|domain2\.com|domain3\.com|\.co)$
RewriteRule ^(.*)$ http://www.prefferreddomain.com/$1 [R=301,L]
# Error Documents
ErrorDocument 401 /errors/401.php
ErrorDocument 403 /errors/403.php
ErrorDocument 404 /errors/404.php
#Cache Settings, etc. after this 
```

我目前正在我的 SEO 的 htaccess 文件中执行此操作，因为我们拥有多个域名（20+）。无论如何，我希望将 3 个页面重定向到 HTTPS，但我尝试过的所有示例都没有按预期工作。我不确定是否应该将它们放在当前位于 htaccess 文件中的重定向之前或之后。

应该重定向到 https 的页面是 logon.php 和 chat.php。所以我尝试了

```
RewriteEngine On
Options +FollowSymLinks

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} (logon.php)
RewriteRule (.*) https://www.preferreddomain.com%{REQUEST_URI} 

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} (chats.php)
RewriteRule (.*) https://www.preferreddomain.com%{REQUEST_URI}

# Redirect all other domains to the primary
RewriteCond %{HTTP_HOST} ^(www\.?|)(domain1\.com|domain2\.com|domain3\.com|\.co)$
RewriteRule ^(.*)$ http://www.prefferreddomain.com/$1 [R=301,L]
# Error Documents
ErrorDocument 401 /errors/401.php
ErrorDocument 403 /errors/403.php
ErrorDocument 404 /errors/404.php
#Cache Settings, etc. after this 
```

但这没有用。有没有人有任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:22:54.813

添加`[R=301,L]`到每个 https:// 规则的末尾。如果没有`L`，则该规则将 URI 标记为重定向，但 URI 将继续通过重写引擎的其余部分，并且也将匹配最后一条规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:18:26.593

事实证明它不起作用的原因是因为我们的主机网络解决方案正在使用 SSL 代理，因此任何检测到协议的服务器端都将不起作用，并且通常会导致循环。

# javascript - 如何使用 JavaScript 在 HTML 标题中正确插入 unicode？

> ID：12114477
> 
> 赞同：15
> 
> 时间：2012-08-24T18:02:19.280
> 
> 标签：javascript, html, unicode

当我使用 JavaScript 设置 HTML 页面的标题时，我看到了一些奇怪的行为。如果我将 html 字符引用直接插入到标题中，则 Unicode 会正确呈现，例如：

```
<title>&#21543;&#20986;</title> 
```

但是，如果我尝试通过 JavaScript 使用 html 字符引用，则似乎有些东西正在将 & 转换为 (& amp ;) （将它们分开，因此 SO 不只是将其转回 & 号），从而破坏了编码，导致它成为呈现为完整的编码字符串：

```
function execTitleChange() {
  document.title = "&#21543;&#20986;";
} 
```

（我应该注意到，这只是一种推测；当我在执行这个 JavaScript 函数后使用 Firebug 内省 DOM 时，我看到的是 & 而不是 &。）

如果我在从 JavaScript 设置值时使用 \u 编码的 Unicode 字符，那么一切都会再次正常工作：

```
function execTitleChange() {
  document.title = "\u5427\u51fa";
} 
```

\u 编码字符的工作对我来说有点道理，因为我认为这就是 JavaScript 表示 Unicode 字符的方式，但我很难理解为什么在使用 html 字符引用时行为会有所不同。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-24T18:05:25.777

JavaScript 字符串常量由 JavaScript 解析器解析。HTML 标记内的文本由 HTML 解析器解析。这两种语言（以及它们的解析器）是不同的，特别是它们通过字符代码表示字符的方式不同。

因此，您所发现的是实际情况：-) 在 JavaScript 中使用转义符号，在 HTML/XML 中`\u`使用 HTML 实体 ( )。`&#nnnn;`

*编辑*——现在当您谈论*从*JavaScript 创建/插入 HTML 时，情况会变得更加混乱。当您使用`.innerHTML`JavaScript 更新 DOM 时，您基本上是将 HTML 源代码交给 HTML 解析器进行解释。出于这个原因，您可以使用 JavaScript`\u`转义或 HTML 实体，一切都会奏效（除了字符编码不匹配等令人痛苦的问题）。

最后，请注意 JavaScript 还提供了`String.fromCharCode()`从数字字符代码构造字符串的功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T19:32:52.293

在 JavaScript 中处理 Unicode 字符的最佳方法是使用字符本身，使用编辑器或其他可以将它们存储为 UTF-8 编码的工具。你会避免很多混乱。自然，您需要正确声明 .js 或 .html 文件的字符编码。

该构造`&#21543;`在 JavaScript 中没有特殊含义；它只有八个 Ascii 字符。但是如果您的 JavaScript 代码已经嵌入到 HTML 文档中，那么它将在传递给 JavaScript 解释器之前由 HTML 规则处理。并且规则因 HTML 版本而异。避免这种结构的另一个原因。

所以只写

```
document.title = "吧出"; 
```

（当然，在极少数情况下，您应该`title`在 JavaScript 中更改元素内容（这对搜索引擎和许多其他目的至关重要），而不是在 HTML 中设置。但这无关紧要。）

# ant - 使用 ant 迭代未知数量的属性并搜索和替换

> ID：12114494
> 
> 赞同：0
> 
> 时间：2012-08-24T18:03:35.607
> 
> 标签：ant

我有一个看起来像这样的 ant “属性”文件（尽管我可以根据需要调整格式 - 如果更合适，我可以将其设为 XML 文件）：

**库.properties**

```
name 1
http://www.url1.com?a=b
name 2
http://www.url2.com?c=d
name 3
http://www.url3.com?e=f 
```

注意：我知道这不是有效的属性格式，因为它不是 a=b 的形式。我可以将其更改为任何合适的内容，只要将来易于添加条目即可。

我希望ant获取一个签入的文件，如下所示：

**options.html（来源）**

```
<select>
    <option value="@URL@">@NAME@</option>
</select> 
```

...并根据 library.properties*中的名称/值条目多次*搜索和替换标记，因此生成的 options.html 文件如下所示：

**options.html（构建后）**

```
<select>
    <option value="http://www.url1.com?a=b">name 1</option>
    <option value="http://www.url2.com?c=d">name 2</option>
    <option value="http://www.url3.com?3=f">name 3</option>
</select> 
```

与属性文件一样，options.html 源可以是不同的格式。我只需要某种方式来定义我从中/向复制的内容。

最干净的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:14:24.287

您需要的是一个[模板引擎](http://en.wikipedia.org/wiki/Template_engine_%28web%29)来生成您的 HTML 文件。

ANT 直接支持的最接近这一点的是[XSLT 转换](http://en.wikipedia.org/wiki/XSLT)。

# 例子

以下项目

```
|-- build.xml
`-- src
    |-- options.xsl
    `-- properties.xml 
```

运行时生成单个 HTML 文件

```
|-- build
|   `-- options.html 
```

请注意，这不是格式正确的 HTML 文件。您的规范看起来更像是设计用于导入另一个文件的片段。

## 属性.xml

```
<properties>
    <property>
        <name>name 1</name>
        <value>http://www.url1.com?a=b</value>
    </property>
    <property>
        <name>name 2</name>
        <value>http://www.url2.com?c=d</value>
    </property>
    <property>
        <name>name 3</name>
        <value>http://www.url3.com?e=f</value>
    </property>
</properties> 
```

## 选项.xsl

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="html"/>

    <xsl:template match="/">
        <select>
            <xsl:apply-templates select="properties/property"/>
        </select>
    </xsl:template>

    <xsl:template match="property">
        <option value="{value}"><xsl:value-of select="name"/></option>
    </xsl:template>

</xsl:stylesheet> 
```

## 构建.xml

```
<project name="demo" default="generate">

    <target name="init">
        <mkdir dir="build"/>
    </target>

    <target name="generate" depends="init">
        <xslt style="src/options.xsl" in="src/properties.xml" out="build/options.html"/>
    </target>

    <target name="clean">
        <delete dir="build"/>
    </target>

</project> 
```

# ios5 - 标签栏视图中的核心数据

> ID：12114496
> 
> 赞同：0
> 
> 时间：2012-08-24T18:03:37.267
> 
> 标签：ios5, core-data, ios4

我正在尝试使用选项卡栏控制器做一个应用程序，此选项卡之一必须是具有核心数据功能的 tableView。第一个问题是我需要在 TableView 之前使用导航控制器还是可以从标签栏直接转到 TableView？

目前我的项目是从标签栏到 tableView 但我对此错误“终止应用程序由于未捕获的异常'NSInternalInconsistencyException'，原因：'+entityForName：无法找到实体名称'Event'的NSManagedObjectModel”看起来像非常常见的错误。

当我运行应用程序时，应用程序正在运行，但是当我尝试使用表格视图进入选项卡时，它崩溃了。我是编程新手，对我来说很容易被堆栈。

任何想法/帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:26:33.070

您不必使用导航控制器来使用表格视图控制器。

该核心数据错误意味着实体“事件”不在您的模型中。要么您没有加载正确的模型，要么您使用了错误的实体名称。

# c++ - 接近零的浮点值会导致被零除的错误吗？

> ID：12114498
> 
> 赞同：63
> 
> 时间：2012-08-24T18:03:48.010
> 
> 标签：c++, c, floating-point, divide-by-zero

每个人都知道您不应该直接比较浮点数，而是使用容差：

```
float a,b;
float epsilon = 1e-6f;
bool equal = (fabs(a-b) < epsilon); 
```

我想知道这是否同样适用于在除法中使用它之前将值与零进行比较。

```
float a, b;
if (a != 0.0f) b = 1/a; // oops? 
```

在这种情况下，我是否还需要与 epsilon 进行比较？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-24T18:17:45.703

浮点除以零不是错误。它在支持浮点异常的实现上引发浮点异常（除非您正在积极检查它们，否则这是一个无操作），并具有明确定义的结果：正无穷或负无穷（如果分子非零），或NAN（如果分子为零）。

当分母不为零但非常接近零（例如次正规）时，也可能得到无穷大（和溢出异常），但这也不是错误。这就是浮点的工作原理。

**编辑：**请注意，正如 Eric 在评论中指出的那样，此答案假定附件 F 的要求，附件 F 是 C 标准的可选部分，详细说明了浮点行为并将其与 IEEE 浮点标准保持一致。在没有 IEEE 算法的情况下，C 没有定义浮点除以零（实际上，所有浮点运算的结果都是实现定义的，可能被定义为完全废话，仍然符合 C 标准），所以如果您正在处理一个不支持 IEEE 浮点的古怪 C 实现，您必须查阅用于回答此问题的实现的文档。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-24T19:04:49.350

是的，在某些情况下，除以小数会导致与除以零相同的效果，包括陷阱。

一些 C 实现（和一些其他计算环境）可能会以刷新下溢模式执行，尤其是在使用高性能选项时。在这种模式下，除以次正规可以导致与除以零相同的结果。当使用向量 (SIMD) 指令时，刷新下溢模式并不少见。

次正规数是浮点格式中具有最小指数的那些，它们非常小以至于有效数的隐式位是 0 而不是 1。对于 IEEE 754，单精度，这是幅度小于 2 的非零数^(-126)。^(对于双精度，它是幅度小于 2 -1022)的非零数字。

正确处理次正规数（根据 IEEE 754）在某些处理器中需要额外的计算时间。为了在不需要时避免这种延迟，处理器可能具有将次正规操作数转换为零的模式。然后将一个数除以次正规操作数将产生与除以零相同的结果，即使通常的结果是有限的。

如其他答案所述，在采用 C 标准附件 F 的 C 实现中，除以零不是错误。并非所有实现都可以。在不这样做的实现中，如果没有关于您的环境的额外规范，您无法确定是否启用了浮点陷阱，尤其是除零异常的陷阱。

根据您的情况，您可能还必须防止应用程序中的其他代码更改浮点环境。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-24T18:19:03.873

要回答您帖子标题中的问题，除以非常小的数字不会导致除以零，但可能会导致结果变为无穷大：

```
double x = 1E-300;
cout << x << endl;
double y = 1E300;
cout << y << endl;
double z = y / x;
cout << z << endl;
cout << (z == std::numeric_limits<double>::infinity()) << endl; 
```

这[会产生](http://ideone.com/B2VYS)以下输出：

```
1e-300
1e+300
inf
1 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-24T18:20:30.257

只有除以 0.f 才会引发除以零异常。

但是，除以一个非常小的数字会产生溢出异常——结果太大以至于不能再用浮点数表示。除法将返回无穷大。

无穷大的浮点表示可用于计算，因此如果您的实现的其余部分可以处理它，则可能不需要检查它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-24T18:08:41.780

> 在这种情况下，我是否还需要与 epsilon 进行比较？

您永远不会收到除以零的错误，正如[IEEE float](http://en.wikipedia.org/wiki/IEEE_floating_point)`0.0f`中所准确表示的那样。

话虽如此，您可能仍希望使用一些容差 - 尽管这完全取决于您的应用程序。如果“零”值是其他数学运算的结果，则可能会得到一个非常小的非零数，这可能会导致除法后*出现意外结果。*如果您想将“接近零”的数字视为零，则可以使用容差。但是，这完全取决于您的应用程序和目标。

如果您的编译器使用[IEEE 754 标准进行异常处理](http://en.wikipedia.org/wiki/IEEE_floating-point_standard#Exception_handling)，那么除以零，以及除以一个小到足以导致溢出的值，都将导致 +/- infiniti 的值。这可能意味着您可能希望包含对非常小的数字的检查（这会导致您的平台溢出）。例如，在[Windows](http://msdn.microsoft.com/en-us/library/c69tswyy%28v=vs.100%29.aspx)上，`float`两者`double`都符合规范，这可能会导致一个非常小的除数创建 +/- infiniti，就像零值一样。

如果您的编译器/平台不遵循 IEEE 754 浮点标准，那么我相信结果是特定于平台的。

# php - 将外部内容加载到网站的最佳方式（我拥有所有网站）（没有 iframe？）

> ID：12114512
> 
> 赞同：1
> 
> 时间：2012-08-24T18:04:51.953
> 
> 标签：php, jquery, html, iframe, load

我拥有的网站越来越多（如果有帮助的话，大部分是 WordPress）。

每个人在**foo.domain.com/partner**上都有一个非常简单的“名称、图形和社交媒体链接”页面。

我希望**a.domain.com**能够使用 OUT iframe 将其他 3 个站点的内容加载到他们的侧边栏中。

有一个更好的方法吗？甚至可能与`.load()`? 你不能像我相信的那样加载外部内容，所以我不确定解决这个问题的最佳方法。iframes 并没有真正削减它。

同样，我拥有所有站点的权限，并且可以在它们的任何位置添加 PHP/Jquery 脚本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T18:10:14.730

很多方法可以做到这一点：

1.  PHP 可以`file_get_contents()`或`cURL`来自其他站点的内容，然后与内容服务器端一起工作（在将内容发送到浏览器之前加载内容）
2.  如果您从数据库生成内容（就像在 WP 中一样），您可以直接连接到其他站点的 MySQL 数据库并相应地工作（确保您设置了可以从其他站点的 IP 访问的 MySQL 用户（也是一种服务器端方法）
3.  为javascript设置[跨域](https://developer.mozilla.org/en-US/docs/HTTP_access_control)权限并使用ajax加载内容（即`Access-Control-Allow-Origin`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:13:25.093

JSONP 请求怎么样？您可以避免违反[SOP 。](http://en.wikipedia.org/wiki/Same_origin_policy "同源政策")

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-08-24T18:09:45.577

$("#loaddiv").load("directory/file.php").fadeIn("fast");

# java - 为被覆盖的方法自动生成自定义 JavaDoc 注释

> ID：12114513
> 
> 赞同：2
> 
> 时间：2012-08-24T18:04:54.167
> 
> 标签：java, javadoc

我正在寻找增强 Java 源代码可读性的方法，并希望将以下 JavaDoc 注释添加到所有被覆盖的方法中

```
/** Overrides {@link com.org.pkg.MyInterface#myMethod}. */
@Override
protected boolean myMethod() {
    ...
} 
```

当类实现多个接口并覆盖某些类方法时，这将很方便。乍一看并不总是很清楚“什么是什么”。

问题是 - 是否有一些命令行工具或 IDE 插件（IDEA、NetBeans、Eclipse）可以自动执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T23:01:44.293

当您创建方法时，Eclipse 会自动为您生成该注释

默认模板是

```
/* (non-Javadoc)
 * ${see_to_overridden}
 */ 
```

其中 ${see_to_overridden} 变成了@see com.org.pkg.MyInterface#myMethod

您可以在 windows->preferences->java->code style->code templates 中更改模板

要将其添加到现有方法中，只需键入 /* 并在方法上方返回

我不知道无论如何要批量这样做

# git - 如何获取（已删除）分支的 git log 显示名称

> ID：12114519
> 
> 赞同：25
> 
> 时间：2012-08-24T18:05:20.847
> 
> 标签：git, logging

我喜欢查看我的 git 日志的方式是

```
git log --graph --oneline --all --decorate 
```

在我发现它的输出有用的其他事情中，有分支名称。但是，如果我删除一个分支，那么上面就不再显示它们了。我的意思是看到一堆东西，比如：

```
* 87c3294 (QueueExample) blah blah 
```

比一堆更具表现力（尤其是当列表变长时）

```
* 87c3294 blah blah 
```

[这个问题](https://stackoverflow.com/questions/2510852/version-control-delete-branches-after-merging)的答案，特别是[这个评论](https://stackoverflow.com/questions/2510852/version-control-delete-branches-after-merging/6738691#comment15333126_6738691)似乎暗示分支名称仍然是“某处”。

如何将它们打印在输出中`git log`或至少以其他方式打印？

或者，我怎样才能从 git branch 的输出中删除分支，同时仍然保留它们以达到目的`git log`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-24T18:40:43.283

在 Git 中，分支只是指向随着新提交添加到该分支而移动的提交的指针。换句话说，一旦指针移动了，之前的提交在那个分支上就没有记忆了。起初，这对我来说是一个很难理解的概念。也许是这个名字：“分支”让我想到了由边连接的多个节点，但在 Git 中，分支实际上只是一个指向节点的移动指针。

`git log`用指向它们的任何分支尽职地注释提交。例如，我创建了一个 repo，在分支 master 上提交了 "one"、"two" 和 "three"，在分支功能上提交了 "uno"、"dos" 和 "tres"，然后将功能合并回 master。这是`git log`在我删除分支之前告诉我的内容：

```
*   9eb6e93 (HEAD, master) Merge branch 'feature'
|\
| * 523e2ac (feature) tres
| * 6d3cc0f dos
| * 1bc0b2e uno
* | d39734b three
* | 779d37b two
* | facbcbf one
|/
* 58848f4 Initial commit. 
```

很容易误以为“（功能）”注释以某种方式指代右侧的那个分支，但事实并非如此：它只是指代提交`523e2ac`。

请注意，默认情况下，当 Git 创建合并提交（`9eb6e93`在我们的例子中）时，它会自动添加一条注释，说明它正在合并分支“功能”，因此有一些记录表明那里有一个分支，但这只是一条注释，仅此而已。

当我删除分支“功能”时，除了提交`523e2ac`不再标有“（功能）”之外，没有任何变化：

```
*   9eb6e93 (HEAD, master) Merge branch 'feature'
|\
| * 523e2ac tres
| * 6d3cc0f dos
| * 1bc0b2e uno
* | d39734b three
* | 779d37b two
* | facbcbf one
|/
* 58848f4 Initial commit. 
```

因此，要回答您的问题，不，一旦您删除了一个分支，您就无法`git log`使用该分支名称来注释提交（因为它不再存在）。但是，您有一些选择：

*   不要删除分支。留下树枝并没有什么坏处，只是它会在你输入时弄乱你的屏幕`git branch`。此外，您可能希望重新使用分支名称，如果您不删除分支，以后可能会导致问题。

*   在删除分支之前标记提交。标签实际上是一个不会移动的分支。您甚至可以使标签名称与分支名称相同。

*   对合并提交的自动评论感到满意。如前所述，当 Git 进行合并时，默认情况下，它会在提交注释中引用要合并的分支的名称，从而创建分支存在的记录。对我来说，这是最干净的解决方案，基于 Git 中分支的工作方式。由于分支并不真正指代一系列提交，因此分支的存在实际上只是具有历史意义。

分支历史可能存在的另一个地方是您的 reflog，它只记录您正在切换到/从哪些分支。它主要用于灾难恢复（哎呀，我不是要删除那个分支！），而且它对于你正在谈论的那种分支历史并不是真的有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-22T02:04:55.607

用于`git log --merges`列出合并提交。**已删除（但合并）的分支**的名称将与其他合并分支的名称一起显示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T18:25:22.537

该评论正在谈论合并提交消息，例如`Merge QueueExample into master`。当你删除一个分支时，这个分支就消失了。如果您想使用 维护日志的主题视图，请`--decorate`尝试改用标签（或不要删除分支）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T18:58:06.180

如果您在本地存储库中删除了一个分支，它仍然存在于该存储库的任何其他克隆中。如果您将该删除推送到其他存储库，则分支本身（只是一个方便命名的指向特定提交的指针）可能会不复存在。但是，它指向的提交仍然会存在一段时间，即使绝对没有任何东西指向它。如果它已被合并到其他分支中，以便该提交构成某个其他分支的祖先的一部分，那么只要它仍然可以从现有分支访问，它就会保留下来。然而，追踪它有点棘手。早期，它会在你的 HEAD reflog 中出现一段时间，但最终它可能会从那里消失。

如果您希望它们始终出现在`git log`输出中，请不要删除它们。或者，用标签替换分支指针，以指向删除之前分支所在的位置。

# macos - 无代码 kext 无法打开 CFBundle

> ID：12114527
> 
> 赞同：0
> 
> 时间：2012-08-24T18:06:00.020
> 
> 标签：macos, kernel-extension

我会很感激任何帮助，并承认我现在已经正式超越了我的头脑。

我迫切需要一个无代码的 kext 来防止 USB 设备被邪恶的 Apple 通用驱动程序占用。我已经阅读了我能找到的每一个问题和任何建议，甚至翻阅了 Apple 文档，如果我知道自己在做什么，那就太好了，但我不知道。

我的 kext 文件位于 /system/library/extensions、chown、chmod 和 kextcache -e 中。无法打开 CFBundle

该设备是一个小型设备，在其状态区域内包含一些参数，因此我只需要获得控制级别访问权限。没有大的读取或写入。

我们将不胜感激地收到任何建议、指点或帮助。ViD 和 PiD 以及 BCDDevic 数字是正确的。我在某处读到的 CF Bundle 标识符与原始的相同是解决方案，但这对我来说毫无意义，因为没有原始驱动程序。

这是我的 kext 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"     "http://www.apple.com/DTDs/PropertyList-1.0.dtd ">
<plist version="1.0">
    <dict>
        <key>CFBundleDevelopmentRegion</key>
        <string>English</string>
        <key>CFBundleExecutable</key>
        <string>VendorSpecificDriver</string>
        <key>CFBundleIdentifier</key>
        <string>com.changers</string>
        <key>CFBundleInfoDictionaryVersion</key>
        <string>6.0</string>
        <key>CFBundlePackageType</key>
        <string>KEXT</string>
        <key>CFBundleSignature</key>
        <string>????</string>
        <key>CFBundleVersion</key>
        <string>1.0.0</string>
        <key>IOKitPersonalities</key>
        <dict>
            <key>DeviceDriver</key>
            <dict>
                <key>CFBundleIdentifier</key>
                <string>com.changers</string>
                <key>IOClass</key>
                <string>IOService</string>
                <key>IOProviderClass</key>
                <string>IOUSBDevice</string>
                <key>bcdDevice</key>
                <integer>273</integer>
                <key>idProduct</key>
                <integer>1406</integer>
                <key>idVendor</key>
                <integer>5840</integer>
            </dict>
            <key>InterfaceDriver</key>
            <dict>
                <key>CFBundleIdentifier</key>
                <string>com.changers</string>
                <key>IOClass</key>
                <string>IOService</string>
                <key>IOProviderClass</key>
                <string>IOUSBInterface</string>
                <key>bConfigurationValue</key>
                <integer>1</integer>
                <key>bInterfaceNumber</key>
                <integer>0</integer>
                <key>idProduct</key>
                <integer>1406</integer>
                <key>idVendor</key>
                <integer>5840</integer>
            </dict>
        </dict>
        <key>OSBundleLibraries</key>
        <dict>
            <key>com.apple.iokit.IOUSBFamily</key>
            <string>1.8</string>
            <key>com.apple.kernel.libkern</key>
            <string>6.0</string>
        </dict>
    </dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:07:56.053

在 DeviceDriver 和 InterfaceDriver 的 CFBundleIdentifier 部分，尝试使用“com.apple.kpi.iokit”而不是“com.changers”。此外，不确定您是否需要 DeviceDriver 部分中的 bcdDevice 键。

希望比我有更多知识的人会插话。

# postgresql - PostgreSQL 用户/角色仅限于视图？

> ID：12114529
> 
> 赞同：3
> 
> 时间：2012-08-24T18:06:00.790
> 
> 标签：postgresql, postgresql-9.1

我需要授予客户访问我数据库中一组“视图”的权限。我让它工作，以便用户/角色可以选择所需的视图而不是任何表。但是，用户/角色仍然可以浏览架构并查看表和表的列和数据类型等。有没有办法防止这种情况？因此，如果用户/角色使用 PgAdmin III 或 psql 或类似的东西访问数据库，他们只能“看到”授权的视图而没有别的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:39:44.407

如果您希望承包商访问视图而无法查看视图从中提取数据的表的结构，那么想到的唯一选择是将视图具体化为*实际*表 (vie `CREATE TABLE AS SELECT ...`) 转储这些表，并将它们恢复到您不受信任的承包商可以访问的数据库。

大概您的应用程序将是一个 Web 应用程序或其他一些不会将数据库登录数据放在用户可及范围内的应用程序；否则你有比这更大的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:01:39.853

我认为您不能阻止承包商查看类型。问题是这些都在同一个系统表中，我很害怕如果你撤销对它们的权限会发生什么。从本质上讲，我怀疑什么都行不通。

PostgreSQL 没有限制对类型定义的访问的概念。

但是，您可以通过限制对表的选择访问来阻止他们从表中选择数据。视图在定义它们的用户的本地权限下运行。您可以对基础表进行 REVOKE，并让它们可以访问视图中的数据。但是你不能阻止他们看到底层表的类型定义。

换句话说，更面向对象的方式，您不能安全地允许 PostgreSQL 中的用户查看您的类定义。但是，您可以阻止他们查看实际对象。

编辑：我所知道的唯一以这种方式受到限制的系统目录是那些包含加密密码的系统目录。大多数系统目录都是相对开放的，很多代码都需要获得这些目录的权限。鉴于 PostgreSQL 的对象行为，我认为您不能限制对函数定义（在编译环境中，虽然这不是源代码，但会包括例程所在的共享对象文件）或类型定义（包括表结构）。

Edit2：实际上有一个很好的答案，那就是不要让承包商通过 psql 等直接工具访问数据库，而是要求他们通过您控制的一些中间件。然后，您可以完全访问他们可以看到或看不到的内容。例如，如果需要，您可以修改 phppgadmin 以拒绝在 pg_catalog 模式中显示任何内容。不过，这是 hack-the-tool 领域，您不希望对系统表权限感到困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:02:54.147

如果您想避免在物化视图中复制所有数据..

*您可以在不同的集群*中设置另一个数据库，因此它不会共享相同的目录。这甚至可以在不同的机器上。

*   通过[dblink](http://www.postgresql.org/docs/current/interactive/dblink.html)访问您的主要数据库中的视图。
*   *仅允许客户无法*访问的已定义用户通过 dblink 访问 Prime db 。
*   创建访问主服务器上数据的表函数。
*   提供从这些表功能中选择的视图，并允许您的客户用户使用`SELECT`.

现在他们无法访问基表。

# c# - 获取已执行存储过程的返回值的正确和最佳方法是什么？

> ID：12114531
> 
> 赞同：0
> 
> 时间：2012-08-24T18:06:06.593
> 
> 标签：c#, sql, return-value

这就是我所拥有的，我只是想知道这是否是正确的方法，如果不是，那将是最佳的。

```
public static int AddPullSubscription(string connectionString)
{
    try
    {
        using (SqlConnection conn = new SqlConnection(connectionString))
        {
            using (SqlCommand cmd = new SqlCommand("", conn))
            {
                cmd.CommandType = CommandType.StoredProcedure;

                var returnParameter = cmd.Parameters.Add("@RETURN_VALUE", SqlDbType.Int);
                returnParameter.Direction = ParameterDirection.ReturnValue;

                cmd.ExecuteNonQuery();

                return Convert.ToInt32(returnParameter.Value);
            }
        }
    }
    catch (Exception)
    {
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:33:40.900

这取决于您的存储过程的结果。

1.  ExecuteNonQuery：如果您只需要受影响的行数。AFAIK，如果你没有`Set NoCount on`在你的 SP 中使用它，它就可以工作。当然，出于性能目的，请继续这样做。不过，您可以`@Return_Value`像以前一样使用来获取整数值。一个[例子](http://geekswithblogs.net/bullpit/archive/2009/01/02/how-to-get-a-return-value-from-a-stored-procedure.aspx)。

2.  ExecuteScalar：如果您只想在 SQL 中选择任何受支持类型的值。一个[例子](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)。

3.  ExecuteReader：通过选定的记录向前移动。一个[例子](http://msdn.microsoft.com/en-us/library/y6wy5a0f.aspx)。

另请查看有关 catch(Exception)的[这篇文章。](http://blogs.msdn.com/b/codeanalysis/archive/2006/06/14/631923.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:11:31.497

您也可以使用`ExecuteScalar`（整数示例）

var 结果 = (Int32)cmd.ExecuteScalar();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:44:34.297

你可以试试这个：

```
 using (var conn = new SqlConnection(connectionString))
    {
        using (var sqlCmd = new SqlCommand("SEL_StoredProcedure", conn))
        {
                sqlCmd.CommandType = System.Data.CommandType.StoredProcedure;
                //sqlCmd.Parameters.AddWithValue("@ID", Id);
                sqlCmd.Connection.Open();

                return cmd.ExecuteScalar() as Int32;
        }
    } 
```

# php - CakePHP - $hasOne 成功，$hasMany 失败

> ID：12114532
> 
> 赞同：2
> 
> 时间：2012-08-24T18:06:11.913
> 
> 标签：php, cakephp, cakephp-2.1, cakephp-model

早上好，

我在使用 $hasMany 时遇到了问题，即使 $hasOne 工作正常。

我有两个模型，Assignment 和 AssignmentGroup。Assignment 可以有一个AssignmentGroup，但AssignmentGroup 可以有多个Assignment。以下是关系：

```
class Assignment extends AppModel {
    public $belongsTo = array('AssignmentGroup');
}

class AssignmentGroup extends AppModel {
    public $hasMany = array(
        'Assignment' => array('foreignKey'=>'assignment_group_id),
    );
} 
```

这是我正在运行的代码：

```
$this->AssignmentGroup->Behaviors->load('Containable');
$params = array(
    'conditions' => array('AssignmentGroup.class_id' => $class_id),
    'contain' => array('Assignment'),
);
$result = $this->AssignmentGroup->find('all', $params); 
```

当我使用 $hasOne 而不是 $hasMany 时，我得到了预期的结果。

```
$result = array(
    'AssignmentGroup => array(
        [several elements]
    ),
    'Assignment' => array(
        [more elements]
    ),
); 
```

但是，当我根据需要使用 $hasMany 时，事情就崩溃了。查询没有 JOIN。

```
$result = array(
    'AssignmentGroup => array(
        [several elements]
    ),
    'Assignment' => array(),
); 
```

谁能解释发生了什么和/或提出解决方案？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:29:16.030

这可能是次要的，但我始终确保`className`在模型定义中使用。

```
var $hasMany = array(
    'Assignment' => array(
        'className' => 'Assignment',
        'foreignKey' => 'assignment_group_id',
    ),
); 
```

只是为了安全起见，因为这本书确实说“每个模型的别名必须是唯一的应用程序范围”，它帮助我保持这些直截了当。

另外，尝试使用`$hasMany`但取`contain`出来看看这是否会让你感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:39:11.340

```
class AssignmentGroup extends AppModel {
    public $hasMany = array(
        'Assignment' => array('foreignKey'=>'assignment_group_id),
    );
} 
```

应该：

```
class AssignmentGroup extends AppModel {
public $hasMany = array(
    'Assignment' => array('foreignKey'=>'assignment_group_id' ),
);
} 
```

# facebook - authResponseChange 未触发

> ID：12114535
> 
> 赞同：2
> 
> 时间：2012-08-24T18:06:24.963
> 
> 标签：facebook, facebook-javascript-sdk, oauth-2.0

我有以下代码，它可以工作一段时间，然后过一段时间我无法再触发 authResponseChange 事件。我已经删除了我所有的 cookie，取消了应用程序的授权并重新添加了它。我该如何处理这个事件？

```
 <script type="text/javascript">
    window.fbAsyncInit = function () {
        FB.init({ appId: 'APP_ID',
            status: true,
            cookie: true,
            xfbml: true,
            oauth: true
        });

        FB.Event.subscribe('auth.authResponseChange', handleResponseChange);

    };

    function handleResponseChange(response) {
        document.body.className = response.authResponse ? 'connected' : 'not_connected';
        if (response.authResponse) {
            console.log(response);
            alert('connect');
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:25:01.940

这必须解决您的问题

[https://stackoverflow.com/questions/8212668/facebook-javascript-events-not-fired-any-way-i-turn-it](https://stackoverflow.com/questions/8212668/facebook-javascript-events-not-fired-any-way-i-turn-it)

```
var connected;

FB.init({
    appId  : 'XXX',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true, // parse XFBML
    oauth : true, // enables OAuth 2.0
    channelUrl : 'http://XXX/channelUrl'
});

FB.getLoginStatus(handleUserStateChange);
FB.Event.subscribe('auth.authResponseChange', handleUserStateChange);

function handleUserStateChange(response) {
    connected = !!response.authResponse;
}

setInterval(function() {
    FB.getLoginStatus(handleUserStateChange, true);
}, 10000)   // poll every 10 seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T18:06:04.663

I don't see the sdk loading in your code. Are you sure you are initializing it?

```
(function(d){
  var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  ref.parentNode.insertBefore(js, ref);
}(document)); 
```

# java - Java - 如何使用 while 循环解决此计算

> ID：12114543
> 
> 赞同：2
> 
> 时间：2012-08-24T18:07:23.253
> 
> 标签：java, while-loop

我在过去试卷中的一个问题上遇到了困难。我正在尝试将一个数字乘以一个`from`数字`n`。换句话说：from*(from+1)(from+2)...*n。

我需要通过使用while循环来解决这个问题。到目前为止我已经这样做了，不知道该怎么做。我知道代码是错误的，但已经卡了一段时间。

```
public class Fact {

    public int last;

    private int factPartND(final int from, final int n) {
        int fromNum = from;
        int toNum = n;
        int result = 1;
        int c = 1;

        while (fromNum <= toNum) {  // e.g.5*6*7*8*9*10*11
            result = (fromNum) * (fromNum + c);  // calculate 5*6
            final int temp = result;  // store 5*6
            int result1 = temp * (fromNum + c);  // store 5*6*7*....
            c++;  // increments the fromNum in the while code
            fromNum++;  // increments 5 to 11 in the while condition
            last = result1;
        }
        return last;
    }

    public static void main(String[] args) {
        Fact f = new Fact();
        System.out.println(test);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T18:11:46.513

我认为这应该作为while循环

```
int offset = 0;
int result = fromNum;
while (offset < toNum - fromNum) {
  offset++;
  result *= fromNum+offset;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T18:20:29.487

```
int result = 1;
for (int i = from; i <= to; i++) result *= i;
System.out.println("Result is " + result); 
```

严格`while`：

```
int result = 1, i = from;
while (i <= to) result *= i++;
System.out.println("Result is " + result); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T18:29:11.670

我将尝试更广泛地回答这个问题，而不仅仅是关注你的`while`循环。请注意以下评论：

```
public class Fact {//I assume, based on your question, you really mean 'Factorial'.
    //Examining this for the first time I might assume that this object has to do with 
    //well-established observations, or 'Facts'. Fight the urge to abbreviate everything.

    public int last;//Why is this a member variable of the class?

    private int factPartND(final int from, final int n) {
        //How are your 'from' and 'n' variables related? It's unclear based on their names.
        //The method name is also incomprehensible.
        //Why are the parameters declared 'final'?
        //Why is this a private method?
        //Why is this not a static method?

        int fromNum = from;//If you're redeclaring, there is probably a problem.
        int toNum = n;
        int result = 1;//Is this your default result? You should be notating it in the method
            //comments if you're assuming some things, like no negative numbers.
        int c = 1;//What is c?

        //You have latched on to 'while' as the only way of doing this.
        while (fromNum <= toNum) {  // e.g.5*6*7*8*9*10*11
            result = (fromNum) * (fromNum + c);  // calculate 5*6
               //And then set result to the result? What about what was in there before?
            final int temp = result;  // store 5*6
               //Why is this int final?
            int result1 = temp * (fromNum + c);  // store 5*6*7*....
            c++;  // increments the fromNum in the while code
               //Actually increments the adder to what you're multiplying by three lines earlier
            fromNum++;  // increments 5 to 11 in the while condition
            last = result1;
               //Your use of temporary variables is way overdone and confusing.
        }
        return last;
    }

    public static void main(String[] args) {
        Fact f = new Fact();
        System.out.println(test);
    }
} 
```

考虑一下，而不是编写执行某些操作的 STATEMENTS 函数，您想编写返回事物的 EXPRESSIONS。

```
public class Factorial {

  /** 
   *  Calculates the product of a series of integers from 'start' to 'end'. 'start' must be
   *  less than or equal to 'end', or it will return 1.
   */ 
  public static factorialRange(int start, int end) {
    if (start > end) { return 1; }

    if (start = end) { return end; }

    return start * factorialRange(start + 1, end);
  }

} 
```

请注意，此解决方案本质上是三行长。它利用了这样一个事实，即您的问题分解为一个稍小的问题。它还可以优雅地处理您的边缘情况（并对预期结果进行评论）。

另请注意，此方法（“递归”方法）会影响性能，但过早的优化是万恶之源，就像您的第一次尝试存在清晰度问题一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T18:13:15.967

一些伪代码：

```
result = from;
temp = from+1;
while(temp <= n) {
  result*=temp;
  temp++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T18:15:07.607

```
int c = 0;

int result = fromNum;

while ((fromNum+c) < toNum ) {
  c++;
  result = result*(fromNum+c);
}

return result; 
```

试试这个快速..希望它有帮助:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T18:36:06.750

这是您的中心方法的简单版本：

```
private int factPartND(final int from, final int n) {
    int f = from;
    int result = 1;

    while (f <= n) {
        result *= f++;
    }
    return result;
} 
```

如果您删除了参数`final`上的修饰符`from`，则可以消除局部变量`f`：

```
private int factPartND(int from, final int n) {
    int result = 1;

    while (from <= n) {
        result *= from++;
    }
    return result;
} 
```

简单的！

# iphone - 在 xcode 4.2 上创建通用应用程序

> ID：12114549
> 
> 赞同：0
> 
> 时间：2012-08-24T18:07:55.407
> 
> 标签：iphone, ios, xcode

我是一个新的 iphone 学习者。我一直在阅读教程，但到目前为止似乎没有人回答我的几个问题。

如果有人可以回答其中的几个，或者如果有人有更好的教程，请在此处发布。

1- 在 xcode 4.2 中你不能有不同的 iphone 和 ipad 文件夹，所以几乎所有的教程都是无用的。现在我想创建一个通用应用程序。我该怎么做。如何为 IPad 和 Iphone 创建两个 xib 文件，例如我有一个名为 LoadingPage 的类。

2- Iphone 4 和 Iphone 3 具有不同的分辨率。我该如何设置这些分辨率。

3-最初我创建了一个通用的空应用程序。我得到的是`AppDelegate`。现在我想显示我的加载页面，它是一个`UIViewController Class`. 打开应用程序后，我将如何使课程和视图运行。

这里我在阅读了一些文章后使用了代码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    firstView = [[Loading alloc]init];
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    self.window.rootViewController = self.firstView;
    [window makeKeyAndVisible];
    return YES;
} 
```

我的 Delegate.h 文件有值

```
@property (nonatomic, retain) UIWindow *window;
@property (nonatomic, retain) IBOutlet UIViewController *firstView; 
```

此代码运行良好，但随后在 main.m 处开始出错`Program Received signal SIGABRT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:02:00.503

[本教程](http://iphonedevelopment.blogspot.com/2010/04/converting-iphone-apps-to-universal.html)将指导您完成创建通用应用程序的过程

如果您想将现有应用程序转换为通用应用程序，请阅读[本教程](http://useyourloaf.com/blog/2010/4/7/converting-to-a-universal-app-part-i.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:41:46.383

似乎 xcode 4.2 只使用了一个 appdelegate 并使用了故事板。我关注的教程是针对以前版本的 xcode 的。

# php - PHP GD 文本在浏览器中的换行方式与在创建的文件中不同

> ID：12114553
> 
> 赞同：1
> 
> 时间：2012-08-24T18:08:23.217
> 
> 标签：php, gd

我的文本在浏览器中呈现时包裹得很好： [http ://www.morriescontests.com/index.php/view/page/image](http://www.morriescontests.com/index.php/view/page/image)

但是，当相同的代码只是创建并保存一个新文件时，它不会： [http ://www.morriescontests.com/images/uploads/32-142.png](http://www.morriescontests.com/images/uploads/32-142.png)

这显然让我非常难过:(

它们是单独的脚本，一个用于测试。没有正确包装的脚本只有一个区别，没有发送标题（obvi）。我正在使用 imgpng($image, $filename) 函数。

两个脚本都在同一台服务器上，这是最后一行代码：

```
// create image
header("Content-type: image/png"); // this is omitted from the incorrect wrapping script
// send to browser
imagepng($img); // this is omitted from the incorrect wrapping script
// save to file
$filepath = "the/path/image.png";
imagepng($img, $filepath);
imagedestroy($img); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:55:51.017

所以做了一些调查，你正在使用路径

[http://www.morriescontests.com/billboardImage.php?caption=LONG%20STRING%20WRAP%20TEST,%20HMMMM%20I%20WONDER%20WHAT%20WILL%20HAPPEN%20NOW?&first_name=Andrew&last_initial=S.&city=Red%20Bank&user_id =32&id=128](http://www.morriescontests.com/billboardImage.php?caption=LONG%20STRING%20WRAP%20TEST,%20HMMMM%20I%20WONDER%20WHAT%20WILL%20HAPPEN%20NOW?&first_name=Andrew&last_initial=S.&city=Red%20Bank&user_id=32&id=128)

生成图像，但您正在查看的图像是 32-142.png

所以我将网址更改为

[http://www.morriescontests.com/billboardImage.php?caption=LONG%20STRING%20WRAP%20TEST,%20HMMMM%20I%20WONDER%20WHAT%20WILL%20HAPPEN%20NOW?&first_name=Andrew&last_initial=S.&city=Red%20Bank&user_id =32&id=142](http://www.morriescontests.com/billboardImage.php?caption=LONG%20STRING%20WRAP%20TEST,%20HMMMM%20I%20WONDER%20WHAT%20WILL%20HAPPEN%20NOW?&first_name=Andrew&last_initial=S.&city=Red%20Bank&user_id=32&id=142)

注意 id=142 现在可以正常工作了。所以看起来你看到的 32-142.png 图像是以前创建的:)

# php - Pass 0 via URL as parameter

> ID：12114554
> 
> 赞同：0
> 
> 时间：2012-08-24T15:58:54.120
> 
> 标签：php

for some reason whenevever i try to pass 0 using a url parameter variable, on the other end it ends up as empty or null. How do i pass 0 from let's say page A to page B using url parameters?

In symfony
`echo form_tag('application/recognition?step=0')?>`

ends up being like

`application/recognition`

and step is lost, however if 0 is changed to 1 it does work.

Thanks..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-20T03:35:57.357

Check your code, make sure your page does not have "empty[$_GET['step']]"

When step=0, in php, empty[$_GET['step']] will return true which means step=0 is equal to step is empty.

So, if you have "empty[$_GET['step']]", your php page does not work when step=0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:00:56.553

How are you checking for 0? It should be `$_GET['param'] === '0'`.

# java - 如何正确配置 Intellij IDEA 中的 JBoss？我得到错误：未指定服务器实例

> ID：12114556
> 
> 赞同：3
> 
> 时间：2012-08-24T18:08:28.400
> 
> 标签：java, gwt, jboss, intellij-idea, webserver

我无法在 Intellij IDEA 中为 GWT 应用程序配置 JBoss Web 服务器。

IDEA告诉我：

> 错误：未指定服务器实例。

如何解决？有任何想法吗？

![在此处输入图像描述](../Images/1030d8ed5ee193fd800a0293b90dba9f.png)

[照片质量更好](http://i032.radikal.ru/1208/51/1bd441a614a5.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T19:45:11.100

在同一窗口中，选择 JBoss Server Settings 区域下的服务器实例。

![JBoss 服务器设置](../Images/9bcef03fc10bebbed514b89eb65d0e35.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-05T16:23:39.650

Jboss 服务器设置上的“服务器实例”列表对应于您的 Jboss 实例的目录名称。

例如：如果您有“myInstanceJboss”和“anotherInstance”在下拉列表中可见

$JBOSS_HOME/server/myInstanceJboss/

$JBOSS_HOME/server/anotherInstance/

# entity-framework - .NET 4 上的 EF4.3.1 - CLR 类型到 EDM 类型的映射不明确，因为多个 CLR 类型与 EDM 类型匹配

> ID：12114558
> 
> 赞同：19
> 
> 时间：2012-08-24T18:08:37.163
> 
> 标签：entity-framework, entity-framework-4.3

**更新：**主题已更新 - 现在可以在 .NET 4 下的 EF 4.3.1 上重现，并在 Windows 8 下安装 VS2012。任何想法为什么现在开始发生这种情况？

这个主题真的说明了一切。我们刚刚从 EF 4.3 代码优先升级到在 .NET 4.0 下运行的 EF 5。我们有一个类似于以下内容的查询：

`ctx.Set<Entities.A>().Select(a => new DTO.A { Id = a.Id, Name = a.Name }).ToArray();`

`Entities.A`在名为 的程序集中定义`Entities`并`DTO.A`在名为 的程序集中定义`DTO`。在 EF 4.3 中这工作正常，但在 EF 5.0 下它会引发以下异常：

```
Schema specified is not valid. Errors: 
The mapping of CLR type to EDM type is ambiguous because multiple CLR types match the EDM type 'A'. Previously found CLR type 'Entities.A', newly found CLR type 'DTO.A'. 
```

堆栈跟踪是

```
at System.Data.Metadata.Edm.ObjectItemCollection.LoadAssemblyFromCache(ObjectItemCollection objectItemCollection, Assembly assembly, Boolean loadReferencedAssemblies, EdmItemCollection edmItemCollection, Action'1 logLoadMessage)
at System.Data.Metadata.Edm.ObjectItemCollection.ImplicitLoadAssemblyForType(Type type, EdmItemCollection edmItemCollection)
at System.Data.Metadata.Edm.MetadataWorkspace.ImplicitLoadAssemblyForType(Type type, Assembly callingAssembly)
at System.Data.Objects.ELinq.ExpressionConverter.TryGetValueLayerType(Type linqType, TypeUsage& type)
at System.Data.Objects.ELinq.ExpressionConverter.GetCastTargetType(TypeUsage fromType, Type toClrType, Type fromClrType, Boolean preserveCastForDateTime)
at System.Data.Objects.ELinq.ExpressionConverter.CreateCastExpression(DbExpression source, Type toClrType, Type fromClrType)
at System.Data.Objects.ELinq.ExpressionConverter.ConvertTranslator.TranslateUnary(ExpressionConverter parent, UnaryExpression unary, DbExpression operand)
at System.Data.Objects.ELinq.ExpressionConverter.UnaryTranslator.TypedTranslate(ExpressionConverter parent, UnaryExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.UnaryTranslator.TypedTranslate(ExpressionConverter parent, UnaryExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.MemberInitTranslator.TypedTranslate(ExpressionConverter parent, MemberInitExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SelectTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.MemberInitTranslator.TypedTranslate(ExpressionConverter parent, MemberInitExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SelectTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateSet(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.Convert()
at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) 
```

如果类型在同一个程序集中，我会理解这个问题（EF 的一个长期记录的问题，它不能仅使用实体名称来消除歧义），但是来自不同的程序集？

有什么想法可以从这里开始吗？我看不出有任何方法可以告诉 EF 有效地忽略 DTO 程序集，而且我猜测查询表达式的生成需要了解 DTO，以便在实现时将结果投影到正确的东西中。

谢谢，院长

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-30T02:36:20.110

院长，

这是以下链接中报告的已知问题：

[http://entityframework.codeplex.com/workitem/483](http://entityframework.codeplex.com/workitem/483)

[http://entityframework.codeplex.com/workitem/589](http://entityframework.codeplex.com/workitem/589)

实体框架忽略了命名空间，因此多个数据库中的相同表会导致问题，因为实体框架只查看表名。

显然，实体框架团队不了解支持客户拥有的任何数据库模式的重要性。他们也忽略了干净编译代码也应该运行的事实。

如果您查看我上面提到的链接，您会发现纠正错误的优先级很低。我不了解你，但我会因为这种态度而被解雇。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-08T00:03:14.247

我想我今天已经深究了。

在我看来，枚举类型存在于一个单独的程序集中，并且强制转换触发了从该程序集中加载类型。该程序集恰好包含与“Entities.A”类型匹配的“DTO.A”类型。这会导致歧义，进而导致引发异常。请注意，在 .NET Framework 4 中没有发生这种情况，因为不支持 EF4 中的枚举类型，并且强制转换操作不会导致从其他程序集加载类型，因此对于面向 .NET Framework 4 的项目，这是 .NET Framework 4.5 中的回归。在 EF6 中，无论 .NET Framework 版本如何，行为都是相同的——我们总是会抛出异常。

# html - 如何对齐输入内的文本？

> ID：12114570
> 
> 赞同：277
> 
> 时间：2012-08-24T18:09:19.927
> 
> 标签：html, css, forms, html-input

对于所有默认输入，您填写的文本从左侧开始。你如何让它从右边开始？

* * *

## 回答 #1

> 赞同：414
> 
> 时间：2012-08-24T18:12:43.143

在 CSS 中使用[text-align属性：](http://www.w3schools.com/cssref/pr_text_text-align.asp)

```
input { 
    text-align: right; 
} 
```

这将在页面的所有输入中生效。
否则，如果您只想对齐一个输入的文本，请设置内联样式：

```
<input type="text" style="text-align:right;"/> 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-08-28T09:18:08.843

在你的 CSS 中试试这个：

```
input {
text-align: right;
} 
```

要使文本居中对齐：

```
input {
text-align: center;
} 
```

但是，它应该是左对齐的，因为这是默认设置 - 并且似乎是最用户友好的。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-08-22T15:43:05.930

这里接受的答案是正确的，但我想补充一点信息。如果您使用的是引导程序之类的库/框架，则可能为此构建了类。例如，引导程序使用`text-right`该类。像这样使用它：

```
<input type="text" class="text-right"/> 
<input type="number" class="text-right"/> 
```

*请注意，这也适用于其他输入类型，例如上面显示的数字。*

如果你没有使用像 bootstrap 这样好的框架，那么你可以制作你自己的这个帮助类的版本。与其他答案类似，但我们不会将其直接添加到输入类中，因此它不会应用于您网站或页面上的每个输入，这可能不是所需的行为。因此，这将创建一个非常简单的 css 类来正确对齐，而不需要内联样式或影响每个输入框。

```
.text-right{
    text-align: right;
} 
```

现在您可以使用与上述输入完全相同的此类`class="text-right"`。我知道它并没有节省那么多按键，但它使您的代码更清晰。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-08-24T18:13:03.173

[给你](http://jsfiddle.net/Mm5hT/)：

```
input[type=text] { text-align:right }
```

```
<form>
    <input type="text" name="name" value="">
</form>
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-09-04T10:45:35.740

如果您想在文本失去焦点后使其与右侧对齐，您可以尝试使用方向修饰符。这将在失去焦点后显示文本的右侧部分。例如，如果您想在大路径中显示文件名，这很有用。

```
input.rightAligned {
  direction:ltr;
  overflow:hidden;
}
input.rightAligned:not(:focus) {
  direction:rtl;
  text-align: left;
  unicode-bidi: plaintext;
  text-overflow: ellipsis;
}
```

```
<form>
    <input type="text" class="rightAligned" name="name" value="">
</form>
```

not 选择器目前得到很好的支持：[浏览器支持](https://caniuse.com/#feat=css-sel3)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-03T09:34:51.310

> @Html.TextBoxFor(model => model.IssueDate, new { @class = "form-control", name = "inv_issue_date", id = "inv_issue_date", title = "选择发票签发日期", placeholder = "dd/mm /yyyy", style = "text-align:center;" })

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-12-19T09:01:00.760

不使用 CSS：使用文本输入的 STYLE 属性

STYLE="文本对齐：右；"

# javascript - 如何将 div 放置在矩阵形式/网格形式的结构中

> ID：12114572
> 
> 赞同：0
> 
> 时间：2012-08-24T18:09:35.913
> 
> 标签：javascript, jquery, html, css

我正在创建 100 个矩形 div，现在我需要将它们放置在具有 10 列和 10 行的网格状结构中。我怎样才能做到这一点。一件重要的事情是顶部、底部、左侧或右侧 css 样式必须以 % 为单位，因为我具有放大和缩小的 imp 功能，并且如果我将样式从 % 更改为 px 或 em 中的任何其他样式, div 重叠。有没有办法做到这一点。当我尝试时，这些 div 将位于另一个之下。这就是我所做的

```
 setCss = function($divId,$len) {
            //$len specifies the count number of the particualr div  
            //  $divId = $("#window3");
                alert("xmlLength is :"+$len);
                alert("set CSS::"+$divId);
                if ($len<3)//(i%2==0)
                {
                    var size = 10;

                    $("div#"+$divId).css("top",size*$len+"%");
                    $("div#"+$divId).css("left",size*$len+"%");
                    $("div#"+$divId).css("transform","none");
                    $("div#"+$divId).css("margin","10px");

                }
                if (i>=3 )
                {
                    var size = 10;
                    $("div#"+$divId).css("top",size*$len+"%");
                    $("div#"+$divId).css("left",size*$len+"%");
                    $("div#"+$divId).css("bottom",size*$len+"%");
                    $("div#"+$divId).css("right",size*$len+"%");

                    $("div#"+$divId).css("transform","none");
                    $("div#"+$divId).css("margin","10px");

                }
            //  top:10%;left:20%;transform:none;margin:10px
                /*
                        Define the CSS for creating the grid like structure for 100 small divs
                */
            }; 
```

我曾尝试过 diff 组合，但它们都没有奏效。任何指针都会有很大帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:28:11.507

如果你想要列和行，你可以：

*   创建表
*   设置`display:inline-block`为 div，每 10 个添加一个空的额外 div`display:block`
*   设置`float-left`为 div，每 10 个添加到该 div `clear:right`。

使用第二个和第三个选项，您应该设置`min-width:[10*divWidth]`为容器。

**编辑：**

啊，看来您使用绝对定位的 div。

`i` 然后，您可以使用索引If遍历所有 div `i%10 == 0`，增加`top`属性并重置`left`。

或者，甚至更好，不需要当前的变量`top`和`left`，

```
var cols=10,
    rows=5,
    wid=10,
    hei=20,
    d=document.createElement('div');
d.className='cell';
d.style.width=wid+'px';
d.style.height=hei+'px';
for(var i=0;i<cols*rows;i++){
    var c=d.cloneNode(false);
    c.style.top=Math.floor(i/cols)*hei+'px';
    c.style.left=i%cols*wid+'px';
    document.body.appendChild(c);
} 
```

在这里你有一个 jsfiddle：http: [//jsfiddle.net/4pj74/](http://jsfiddle.net/4pj74/)

**编辑2：**

如果你想先创建所有元素然后设置它们的位置，

```
// Creating variables
var cols=10,
    rows=5,
    wid=10,
    hei=20,
    d=document.createElement('div'),
    wrap=document.getElementById('wrapper');
d.className='cell';
    d.style.width=wid+'px';
    d.style.height=hei+'px';

//Creating elements
for(var i=0;i<cols*rows;i++){
    var c=d.cloneNode(false);
    wrap.appendChild(c);
}

//Setting position
for(var i=0;i<wrap.childNodes.length;i++){
    setCSS(i);
}
function setCSS(i){
    var el=wrap.childNodes[i];
    el.style.top=Math.floor(i/cols)*hei+'px';
    el.style.left=i%cols*wid+'px';
} 
```

（现在我将它们附加到，`<div id="wrapper"></div>`因为也许 jsfiddle 会在正文中添加其他东西）

在这里看到它：http: [//jsfiddle.net/4pj74/3/](http://jsfiddle.net/4pj74/3/)

# ruby-on-rails - 当模板存在并且可以工作时，为什么我会从生产中收到 ActionView::MissingTemplate 错误？

> ID：12114575
> 
> 赞同：2
> 
> 时间：2012-08-24T18:09:46.950
> 
> 标签：ruby-on-rails, heroku

我在 Heroku 托管的 Rails 3.2.8 应用程序中有一个页面控制器，其中包含多个路由，例如：

```
match 'contact' => 'pages#privacy_policy', :as => :privacy_policy 
```

我有对应的`/app/views/pages/privacy_policy.html.erb`。我没有在控制器中明确写出动作定义，因为这些页面只是纯 HTML。

一切正常，我从未产生过错误，但我的错误通知器会定期向我发送生产中的错误，例如：

```
ActionView::MissingTemplate: Missing template pages/privacy_policy,
application/privacy_policy with {:locale=>[:en], :formats=>["Accept: */*"],
:handlers=> [:erb, :builder]}. Searched in: * "/app/app/views" 
```

同样，我从未能够重现此错误，但我收到通知并担心我的客户会收到 500 页。知道如何重现此错误，或者更好地解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:44:34.403

它可能是请求文本或 xml 格式或其他一些[mime 类型](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to#14-Rails-defined-Mime-Types)的东西。我偶尔也会从我的通知者那里收到类似的消息，但它们发生得如此零星，以至于我还没有解决它。

[这](https://stackoverflow.com/questions/1671111/methods-for-limiting-the-rails-render-format-to-html)似乎是解决该特定问题的线程。

# php - 带有 PHP 和 kohana 的 Nginx 文件上传进度模块

> ID：12114577
> 
> 赞同：0
> 
> 时间：2012-08-24T18:10:01.833
> 
> 标签：php, file-upload, nginx, mootools, kohana

当我尝试上传文件时，我在萤火虫中得到了这个：

```
GET http://000.000.00.00/progress?X-Progress-ID=7

({ "state" : "starting" }); 
```

它一次又一次地回来......

不知道为什么......而且文件似乎没有上传。

这是我的 nginx 配置：

```
user  nginx nginx;
worker_processes  1;

worker_rlimit_nofile 1024;

worker_priority -1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid       logs/nginx.pid

events {
    multi_accept        on;
    worker_connections  1024;
    use                 epoll;
}

http {
    access_log  off;
    include       mime.types;
    default_type  application/octet-stream;
    upload_progress uploads 5m; #For upload

    sendfile        on;
    #tcp_nopush     on;

   # keepalive_timeout  65;
   # client_body_timeout 65;
   # client_header_timeout 65;
   # client_max_body_size 10m;

    gzip  on;
    gzip_min_length  1000;
    gzip_http_version 1.1;
    gzip_vary on;
    gzip_comp_level 6; # The compression level, between 1 and 9, where 1 is the least compression (fastest) and 9 is the most (slowest).
    gzip_proxied     expired no-cache no-store private auth;
    gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss application/rss+xml application/xml+atom application/atom+xml application/xml+rdf application/rdf+xml text/javascript application/javascript text/x-js;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    log_not_found off;

    error_log /var/log/nginx/error.log debug;

    include /var/nginx/sites-enabled/*;
} 
```

这是会议。在“启用站点”文件夹中找到：

```
server {
    listen  80;
    server_name     000.000.00.00; # not my real IP...

    root    /var/www;
    index   index.php;

    location / {
            try_files $uri $uri/ /index.php?$args;
    }

    location ~ /\. {
            deny  all;
    }

    location ~* \.php$ {
            fastcgi_pass unix:/var/run/php5-fpm.sock;
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_path_info;
            include /usr/local/nginx/conf/fastcgi_params;
    }

    location @frontcontroller {
            rewrite ^ /upload.php last;
    }

    location = /progress {
            report_uploads uploads;
    }

    location /upload {
            # Pass altered request body to this location
            upload_pass @frontcontroller;

            # Store files to this directory
            # The directory is hashed, subdirectories 0 1 2 3 4 5 6 7 8 9 should exist
            upload_store /var/tmp/fuploads 1;

            # Allow uploaded files to be read only by user
            upload_store_access user:r group:r all:r; ### Need to change or check "user"

            # Set specified fields in request body
            upload_set_form_field $upload_field_name.name "$upload_file_name";
            upload_set_form_field $upload_field_name.path "$upload_tmp_path";

            # Inform backend about hash and size of a file
            upload_aggregate_form_field $upload_field_name.sha1 "$upload_file_sha1";
            upload_aggregate_form_field $upload_field_name.size "$upload_file_size";

            # This directive specifies any extra POST fields which should be passed along.
            #upload_pass_form_field "^usession$";

            upload_cleanup 400 404 499 500-505;

            track_uploads uploads 5s;
    }

    #error_page  404              /404.html;

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
            root    html;
    }
} 
```

我的 HTML 和 JS：

```
<!DOCTYPE HtMl>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<title>Nginx Upload</title>
<style>
.bar {
  width: 300px;
}

#progress {
  background: #eee;
  border: 1px solid #222;
  margin-top: 20px;
}

#progressbar {
  width: 0px;
  height: 24px;
  background: #333;
}
</style>
</head>
<body>
<form id="javascript-upload" action="/upload" enctype="multipart/form-data" method="post">
    <ol>
        <li><label for="jfile">File Upload: </label> <input id="jfile" name="file" type="file" /></li>
        <li><input type="submit" value="Upload File" /></li>
    </ol>
</form>
<div style="border: 1px solid black; width: 300px;">
    <div id="status" style="background-color: #D3DCE3; width: 0px; height: 12px; margin: 1px;"></div>
</div>
<div>
<span id="received"> </span>
<span id="speed"> </span>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js"></script>
<script>
window.addEvent('domready', function(){
document.id('javascript-upload').addEvent('submit', function(e) {

    e.preventDefault();

    var received = 0,
        percent  = 0.0,
        perform,
        periodical,
        uuid = Math.floor(Math.random() * 16).toString(16), // Unique uploader ID
        check = 2000;

    document.id('javascript-upload').set('action', '?X-Progress-ID=' + uuid); // Assign ID to upload.

    var request = new Request.JSON({
        url: '/progress?X-Progress-ID=' + uuid, // Using same identifier!
        method: 'get',
        link: 'cancel',
        onComplete: function(response) {
            var json = response;
            if (json.state == 'uploading') {
                var delta = json.received - received,
                    bytes = delta / (check / 1000),
                    received  = json.received,
                    percent   = (json.received / json.size) * 100;

                document.id('status').tween('width', 298 * percent / 100);
                document.id('received').set('html', 'Received ' + Math.round(json.received / 1024) + '/' + Math.round(json.size / 1024) + ' KB');
                document.id('speed').set('html', 'Speed ' + Math.round(bytes / 1024) + ' KB/s');

                if (percent >= 100) {
                    clearTimeout(periodical); // Upload done, stop polling Nginx.
                }
            }
        }
    });

    perform = function () {
        request.send();
    }

    periodical = perform.periodical(check);

});
});
</script>
</body>
</html> 
```

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:58:41.377

我从未使用过 Nginx 文件上传进度模块，但这应该与 Kohana 完全无关。您是否尝试过在初始化中添加`noCache: true`选项？`Request`

# cakephp - Cakephp 属于空 id

> ID：12114580
> 
> 赞同：0
> 
> 时间：2012-08-24T18:10:13.390
> 
> 标签：cakephp, cakephp-2.0

我需要找到 userId 是`1`or的所有行`null`，但是 cake 生成以下内容：

```
 SELECT `SysMenu`.*
      FROM `sigepar_softpc`.`sys_permissions` AS `SysPermission`
 LEFT JOIN `sigepar_softpc`.`sys_users` AS `SysUser`
        ON (`SysPermission`.`user_id` = `SysUser`.`id`)
     WHERE `SysPermission`.`user_id`
        IN (1, NULL) 
```

我认为问题出在第 4 行，因为

> `SysPermission`. `user_id`= `SysUser`。`id`

我在我的控制器中执行以下操作：

```
$sysPermissions = ClassRegistry::init('SysPermission')->find('all', array(
        'conditions' => array(
            'SysPermission.user_id' => array('1', null)
        ),
        'fields' => array('SysMenu.*')
    )
); 
```

如何获取所有行，关联允许 ID 或`NULL`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:02:18.157

尝试：

```
$sysPermissions = ClassRegistry::init('SysPermission')->find('all', array(
        'conditions' => array(
            'OR' => array('SysPermission.user_id' => 1, 'SysPermission.user_id' => null)
        ),
        'fields' => array('SysMenu.*')
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:36:48.043

我认为不可能将 null 放在 IN 运算符中。它需要值，而 null 不是值。所以你真的必须把 OR 和 null 放在一起才能得到想要的结果。

您必须尝试 Davor Lozic 提到的此代码：

```
$sysPermissions = ClassRegistry::init('SysPermission')->find('all', array(
        'conditions' => array(
            'OR' => array('SysPermission.user_id' => array('your values'), 'SysPermission.user_id' => null)
        ),
        'fields' => array('SysMenu.*')
    )
); 
```

# android - Android“不要再问我”警告对话框

> ID：12114586
> 
> 赞同：0
> 
> 时间：2012-08-24T18:10:34.547
> 
> 标签：android, listview, checkbox, android-alertdialog

伙计们！我正在尝试创建一个“不要再问我”警报对话框弹出框。但我的代码有问题。一探究竟。它出什么问题了？它不起作用，我想我把它放在了错误的位置。有人可以帮助我吗？

```
package com.example.exemplo;

import java.util.ArrayList;
import java.util.Arrays;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Typeface;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Toast;

public class Listagem extends Activity
{

public static final String PREFS_NAME = "MyPrefsFile1"; 
public CheckBox dontShowAgain;

  private static class ViewHolder {
public TextView text;
public TextView text2;
public ImageView image;
}

 EditText edittext;
 ListView listview;

String[] text;

String[] text2;

int[] image = {
        R.drawable.wolf;
        R.drawable.cat;

    };

int textlength = 0;
ArrayList<String> text_sort = new ArrayList<String>();
ArrayList<String> text2_sort = new ArrayList<String>();
ArrayList<Integer> image_sort = new ArrayList<Integer>();

public void onCreate(Bundle savedInstanceState)
{

super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.main);

 @Override
protected void onResume() {
    AlertDialog.Builder adb = new AlertDialog.Builder(this);
    LayoutInflater adbInflater = LayoutInflater.from(this);
    View eulaLayout = adbInflater.inflate(R.layout.checkbox, null);
    dontShowAgain = (CheckBox) eulaLayout.findViewById(R.id.skip);
    adb.setView(eulaLayout);
    adb.setTitle("Attention");
    adb.setMessage(Html.fromHtml("How can I see this then?"));
    adb.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            String checkBoxResult = "NOT checked";
            if (dontShowAgain.isChecked())
                checkBoxResult = "checked";
            SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putString("skipMessage", checkBoxResult);
            // Commit the edits!
            editor.commit();
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://misha.beshkin.lv/android-alertdialog-with-checkbox/")));
            return;
        }
    });

    adb.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            String checkBoxResult = "NOT checked";
            if (dontShowAgain.isChecked())
                checkBoxResult = "checked";
            SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putString("skipMessage", checkBoxResult);
            // Commit the edits!
            editor.commit();
            return;
        }
    });
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    String skipMessage = settings.getString("skipMessage", "NOT checked");
    if (skipMessage != "checked")
        adb.show();

    super.onResume();
} 
```

}

```
text =  getResources().getStringArray(R.array.text);
text2 = getResources().getStringArray(R.array.text2);

edittext = (EditText) findViewById(R.id.EditText01);
listview = (ListView) findViewById(R.id.ListView01);

listview.setOnItemClickListener(new OnItemClickListener(){

public void onItemClick(AdapterView<?> arg0, View arg1, int position,
long arg3) {

    if ("Howl".equals(text[position])) {
        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.howl);
        player.start();

       }

    if ("Meow".equals(text[position])) {
        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.meow);
        player.start();            
}

        });

listview.setAdapter(new MyCustomAdapter(text, text2, image));

edittext.addTextChangedListener(new TextWatcher()
{

public void afterTextChanged(Editable s)
{

}

public void beforeTextChanged(CharSequence s, int start,
int count, int after)
{

}

public void onTextChanged(CharSequence s, int start,
int before, int count)
{

textlength = edittext.getText().length();
text_sort.clear();
text2_sort.clear();
image_sort.clear();

for (int i = 0; i < text.length; i++)
{
if (textlength <= text[i].length())
{
if (edittext.getText().toString().
equalsIgnoreCase((String) text[i].subSequence(0, textlength)))
{
text_sort.add(text[i]);
text2_sort.add(text2[i]);
image_sort.add(image[i]);
}
}
}

listview.setOnItemClickListener(new OnItemClickListener(){

public void onItemClick(AdapterView<?> arg0, View arg1, int position,
long arg3) {

    if ("Howl".equals(text_sort.get(position))) {
        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.howl);
        player.start();

       }

    if ("Meow".equals(text_sort.get(position))) {
        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.meow);
        player.start();

       }

}

        });

listview.setAdapter(new MyCustomAdapter
(text_sort, text2_sort, image_sort));

}

});
}

class MyCustomAdapter extends BaseAdapter
{

String[] data_text;
String[] data_text2;
int[] data_image;

MyCustomAdapter()
{

}

MyCustomAdapter(String[] text, String[] text2, int[] image)
{
data_text = text;
data_text2 = text2;
data_image = image;
}
MyCustomAdapter(ArrayList<String> text, ArrayList<String> text2, ArrayList<Integer>   image)
{
data_text = new String[text.size()];
data_text2 = new String[text2.size()];
data_image = new int[image.size()];

for(int i=0;i<text.size();i++)
{
data_text[i] = text.get(i);
data_text2[i] = text2.get(i);
data_image[i] = image.get(i);
}

}

public int getCount()
{
return data_text.length;

}

public String getItem(int position)
{
return null;
}

public long getItemId(int position)
{
return position;
}

public View getView(int position, View convertView, ViewGroup parent)
{

ViewHolder holder;

if (convertView == null) {
    LayoutInflater mInflater = getLayoutInflater();

    convertView = mInflater.inflate(R.layout.listview, null);
    holder = new ViewHolder();
    holder.text = (TextView) convertView.findViewById(R.id.TextView01);
    holder.text2 = (TextView) convertView.findViewById(R.id.TextView02);

    TextView textview2 = (TextView) convertView.findViewById(R.id.TextView02);
    Typeface font1 = Typeface.createFromAsset(getAssets(), "arial.ttf");  
    textview2.setTypeface(font1, Typeface.NORMAL);

    holder.image = (ImageView) convertView.findViewById(R.id.ImageView01);
    convertView.setTag(holder);
}else {
    holder = (ViewHolder) convertView.getTag();

}
holder.text.setText(data_text[position]);
holder.text2.setText(data_text2[position]);
holder.image.setImageResource(data_image[position]);

return convertView;
}

    }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:14:23.423

您不能在字符串上使用 == 和 !=

利用

```
if(!skipMessage.equals("checked")) 
```

代替

```
if(skipMessage != "checked") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:15:19.537

`==`比较你的字符串引用而不是 sting value 。你必须使用`.equals()`

```
if (!skipMessage.equals("checked"))
        adb.show(); 
```

# python - Python 可以运行 while 循环，直到 RuntimeError：调用 Python 对象时超出最大递归深度

> ID：12114590
> 
> 赞同：4
> 
> 时间：2012-08-24T18:11:10.740
> 
> 标签：python, recursion, error-handling, runtime, runtime-error

我正在运行递归循环以实现对某事的最大优化，并且正在达到代码达到`RuntimeError: maximum recursion depth exceeded while calling a Python objec`t 的点。这是意料之中的，但我想在代码遇到该错误之前立即停止代码，这样我就可以在那时查看我的数据。

是否有可能有一个while循环说类似的话？像“嘿，运行这个循环，直到达到最大递归深度。一旦达到，停止并返回。”

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:19:47.553

您可以执行以下操作

```
def recurse():
  try:
    recurse()
  except RuntimeError as e:
    if e.message == 'maximum recursion depth exceeded while calling a Python object':
      # don't recurse any longer
    else:
      # something else went wrong 
```

[http://docs.python.org/tutorial/errors.html](http://docs.python.org/tutorial/errors.html)

注意：找出最大递归深度错误的错误号并检查它而不是错误字符串可能是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:14:53.343

也许，在 try/except RuntimeError 块中有递归调用？当调用except时返回值。

编辑：是的，这是可能的，就像这样：

```
def recursion(i):
    try:
        return recursion(i+1)
    except RuntimeError:
        return i

a=0
print recursion(a) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T18:34:38.973

在更全局的范围内存储`sys.maxrecursionlimit()`为变量（比如）。`maxrec`每次递归，从 中`1`扣除`maxrec`。在递归之前检查，但要确保它`maxrec`不是`0`. 如果`maxrec`hits `0`，你就会知道你已经达到了递归限制，你可以逃脱。

```
def myFunc(params):
    # do stuff
    if maxrec <= 0:
        return # return whatever you need to
    if maxrec > 0:
        maxrec -= 1
        myFunc(params)

maxrec = sys.getrecursionlimit()
myFunc(params) 
```

希望这可以帮助

# c# - 为什么只有设置了背景颜色后才能在 Canvas 上绘制点？

> ID：12114593
> 
> 赞同：1
> 
> 时间：2012-08-24T18:11:27.767
> 
> 标签：c#, wpf, xaml

我有一个简单的程序，它实现了[这个问题](https://stackoverflow.com/q/1479665)中讨论的代码来跟踪鼠标移动。但是，似乎只有在设置 Canvas 控件的背景颜色时才会触发事件。

XAML（设置了背景颜色）：

```
<Window x:Class="SimplePaint.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="501" Width="784">
    <Grid>
        <Canvas Height="402" HorizontalAlignment="Left" Margin="12,12,0,0" Name="PaintCanvas" VerticalAlignment="Top" Width="738" MouseDown="PaintCanvas_MouseDown" MouseMove="PaintCanvas_MouseMove" MouseUp="PaintCanvas_MouseUp" Background="#FFDEF4FF">
            <Polyline x:Name="polyline" Stroke="Black" StrokeThickness="3"/>
        </Canvas>
    </Grid>
</Window> 
```

C＃：

```
private bool drawing = false;

private void PaintCanvas_MouseDown(object sender, MouseButtonEventArgs e)
{
    this.drawing = true;
}

private void PaintCanvas_MouseMove(object sender, MouseEventArgs e)
{
   if (this.drawing)
        polyline.Points.Add(e.GetPosition(this.PaintCanvas));
}

private void PaintCanvas_MouseUp(object sender, MouseButtonEventArgs e)
{
    this.drawing = false;
} 
```

此代码有效。但是，如果我`Background="#FFDEF4FF"`从 XAML 中删除，则在使用该程序时不会发生任何事情。在事件处理程序中设置断点表明它们不会触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:28:11.123

您是否为背景尝试过“透明”……否则您的 Background=null（即没有背景）……并且 WPF 的 HitTesting 逻辑不会击中您的对象。

有关说明，请参见此处：

*   [{x:Null} 与透明？](https://stackoverflow.com/questions/5344699/xnull-vs-transparent)

*   [http://agsmith.wordpress.com/2008/09/16/hit-testing-in-wpf/](http://agsmith.wordpress.com/2008/09/16/hit-testing-in-wpf/)

*   [http://msdn.microsoft.com/en-us/library/ms752097.aspx](http://msdn.microsoft.com/en-us/library/ms752097.aspx)

*   [添加到画布的命中测试子控件不起作用](https://stackoverflow.com/questions/6205637/hit-testing-child-controls-added-to-a-canvas-does-not-work)

# c# - 如何为以下字符串编写正则表达式模式？

> ID：12114598
> 
> 赞同：0
> 
> 时间：2012-08-24T18:11:47.930
> 
> 标签：c#, regex, string, replace

我正在尝试编写一个正则表达式模式来修改我的 datagridview 的标题。我需要从每个字符串中删除以下字符：空格 [ ] * # ？/\@()。"" '' 我非常困惑，我需要你的帮助来定义 C# 中正则表达式的模式。这是我的示例代码：

```
DataTable d_new = d;
for (int i = 0; i < d.Columns.Count; i++)
{
    string t = d.Columns[i].Caption;
    string regex = "\\s+"; // this needs to Be expanded
    string t_new = Regex.Replace(t, regex, "_");
    d.Columns[i].Caption = t_new;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:19:24.647

```
var invalidChars = new HashSet<char>(@"[]*#?/\@()");
var output = new string( input.Where(c => !invalidChars.Contains(c)).ToArray() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:16:39.317

这将匹配您想要的，只需替换为空字符串或您想要的。

```
[ \[\]*#?/\\@()."'] 
```

但在这种情况下，正则表达式有点矫枉过正，你可以只使用`Remove`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T18:23:59.697

这应该可以解决问题：

```
 string regex = "[\[\]*#?\/\\@()."']"; 
```

# asp.net-mvc - 自定义 EditorFor 或任何 XXXXFor

> ID：12114600
> 
> 赞同：5
> 
> 时间：2012-08-24T18:11:56.177
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, mvc-editor-templates, display-templates

每当我使用`@Html.EditorForModel()`以下标准模板时，都会在 asp.net mvc 中显示

**Asp.net MVC 模板中的默认值**

```
<div class="editor-label">
  <label for="[MY-PROPERTY]">MY-PROPERTYNAME</label>
</div>
<div class="editor-field">
  <input id="[MY-PROPERTYID]" name="MY-PROPERTYNAME" type="text" value=""> 
  <span class="field-validation-valid" data-valmsg-for="MY-PROPERTYNAME" data-valmsg-replace="true"></span>
</div> 
```

> > 我想自定义这个 HTML 的格式！！

### 但是注意！！！！

1.  我知道这个功能-> `@Html.EditorForModel("MY-TEMPLATE")`
2.  我知道这个功能-> `@Html.EditorFor(p => p.MY-PROPERTY, "MY-TEMPLATE")`
3.  我知道这个功能-> `Views\{CONTROLLER}\EditorTemplates\{CLASSNAME\TYPE}`
4.  我知道这个功能-> `Views\Shared\EditorTemplates\{CLASSNAME\TYPE}`

## 我的目标是修改整个项目的默认模板！

> **无需为此走遍整个项目！**

*   使用时`@Html.EditorForModel()`，每个属性都会生成一个自定义的HTML！！

* * *

# 新模板

新模板将是这样的：

```
<div class="control-group">
    @Html.LabelFor(p => p.PROPERTY, new { @class = "control-label" })
    <div class="controls">
        @Html.EditorFor(p => p.PROPERTY)
        <span class="help-inline"></span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:52:43.983

`Object.cshtml`您可以为您的`Views\Shared\EditorTemplates\`文件夹创建模板`@Html.EditorForModel()`，如果找不到更具体的模板（例如名为 的模板`classname.cshtml`） ，将使用该模板

您可以进一步阅读Brad Wilson 的[自定义对象模板](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:04:41.697

为什么要重写 ASP.NET MVC？重现微软（凭借其大规模生产能力）在过去 5 年中创造的东西不是一项艰巨的任务吗？

我建议（显然远非唯一的生活方式）是为你需要的类型定义尽可能多的`DisplayTemplates`和`EditorTemplates`你喜欢的类型并完成它。

根据定义，框架是可扩展的。您要做的是更换其中的一个主极。而且我不知道它是否值得。- 只是一个意见。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T11:22:11.147

我试图做同样的事情。不知何故重写或覆盖 Editor、EditorFor 或 EditorForModel 方法，因为我想更改一般的 HTML 输出。我发现这篇文章可能会有所帮助：[http ://www.headcrash.us/blog/2011/09/custom-display-and-editor-templates-with-asp-net-mvc-3-razor/](http://www.headcrash.us/blog/2011/09/custom-display-and-editor-templates-with-asp-net-mvc-3-razor/)

正如@archil 所说。您可以编写自己的对象模板，但重要的是它似乎适用于所有情况。即使您有特定类型的模板，该模板也被用作“主”模板。

# sql - 从存储过程中带有参数的两个表中选择

> ID：12114601
> 
> 赞同：0
> 
> 时间：2012-08-24T18:11:59.067
> 
> 标签：sql, sql-server, stored-procedures

我是这个存储过程业务的新手，我相信这很简单，只是不熟悉语法或如何返回。

我正在传递一个参数 ID，我想返回有关该 ID 的信息，但它可能来自两个表之一。取决于表取决于我返回哪些列。

```
ALTER PROCEDURE name
 @ID varchar (40)
AS

BEGIN
  SET NOCOUNT ON;
  DECLARE @result int

 IF exists (SELECT id, name, state
  FROM tab1
  WHERE tab1.id = @ID
 ) 
  begin
  /* return somehow, maybe as a temp table from previous check */
 end
 else ( SELECT id, name, country, state      
  FROM tab2
  WHERE tab2.id = @ID
 )
 begin
  /* return information from tab2 instead */
 end
end
go 
```

检查它们是否存在于表中是最好的方式，或者这真的应该是一个连接吗？我的 sql 技能是新的，我不确定存储过程中有什么可用的。

我如何返回信息？我的 java 访问它期望这是此过程中的第二个结果集。（不，我没有弄清楚第一个结果集）第一个结果集将大致相同，在存储在不同数据库中的两个表之间进行检查，但会涉及更多，我只是希望这个首先工作。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:25:59.810

如果您从两个表中返回相同的列，您可以这样做。来自 table2 的数据只有在 table1 中不存在时才会被选中。

```
ALTER PROCEDURE name
 @ID varchar (40)
AS

BEGIN
  SET NOCOUNT ON;
  DECLARE @result int

 SELECT id, name, state , country FROM tab1  WHERE tab1.id = @ID
 UNION ALL
 SELECT id, name,state  , country   FROM tab2  WHERE tab2.id = @ID
    AND NOT EXISTS(SELECT 1 FROM tab1 WHERE tab1.id=@ID ) 
```

# java - 如何在 Eclipse 中浏览 Android 类文件（附有源代码）？

> ID：12114603
> 
> 赞同：0
> 
> 时间：2012-08-24T18:12:34.073
> 
> 标签：java, android, eclipse, class

通常，我使用 F3 快捷方式导航到项目中的变量/方法定义。

对于 Android 项目，有时我想导航到 Android SDK 中定义的类，比如 Activity，Eclipse 会为我打开类文件，因为我附上了 Android 的源代码。但是，它停在那里，我无法使用 F3 在 Android 类文件中导航。

任何人都知道如何浏览类文件？或者任何其他允许我深入研究源代码的方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:55:07.553

编辑：哎呀，我误解了你。尝试浏览下面提到的源目录。

我是这样做的：

1.  打开`Android SDK Manager`
2.  下载`Sources for Android SDK`适用于您的 API 级别的包
3.  在 Eclipse 中打开项目的属性
4.  导航`Java Build Path`
5.  打开`Libraries`标签
6.  展开`Android [version number here]`项目
7.  `android.jar`在那里展开
8.  点击`Source attachement`
9.  按下`Edit`按钮
10.  在新窗口中选择`External location`
11.  按下`External Folder...`按钮
12.  找到`android-sdk-[your OS here]/sources/android-[API level here]`文件夹。`Android SDK Manager`如果这`android-sdk-[OS]/tools`对你有帮助的话。
13.  直到`OK`所有窗户都关闭。
14.  您现在应该在点击时看到源代码`F3`

基于 Eclipse 4.2 Juno，如果您使用不同的版本，名称和位置可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:41:24.553

您有两种方法 1\. 附加您要查看的文件的源代码，在这种情况下，请下载 android 源代码并将其附加到 eclipse 中。2 或者，您可以安装反编译器，它将从类文件中反编译（它可能不是实际源代码，而是指示性的）（如果您想使用反编译器方法，请搜索 JAD）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:25:01.993

我使用了[http://code.google.com/p/adt-addons/提供的](http://code.google.com/p/adt-addons/)**Android Sources**插件（向下滚动页面到**Android Sources**部分）。它会自动将源代码附加到工作区中所有 Android 项目的 ADT 库。

# c++ - QThread finished() 连接到 QObject 的删除器

> ID：12114604
> 
> 赞同：8
> 
> 时间：2012-08-24T18:12:37.400
> 
> 标签：c++, signals, exit, qthread, qobject

在这里问这个问题之前，我想了很多，阅读了很多文章。没有一篇文章给我一个正确的答案。

[http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)

```
 QThread* thread = new QThread;
 Worker* worker = new Worker();
 worker->moveToThread(thread);
 connect(worker, SIGNAL(error(QString)), this, SLOT(errorString(QString)));
 connect(thread, SIGNAL(started()), worker, SLOT(process()));
 connect(worker, SIGNAL(finished()), thread, SLOT(quit()));
 connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));
 connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));
 thread->start(); 
```

Worker 对象具有新线程的亲和性。

1.  工人完成信号将调用`quit()`线程。这将结束线程的事件循环并启动线程完成信号。

2.  工人`finished`信号连接到工人`deleteLater()`。根据`deleteLater()`文档

> 计划删除此对象。当控制返回事件循环时，该对象将被删除。如果调用此函数时事件循环没有运行（例如`deleteLater()`，在之前对对象调用过`QCoreApplication::exec()`），则一旦启动事件循环，该对象将被删除。
> 
> 请注意，进入和离开新的事件循环（例如，通过打开模式对话框）不会执行延迟删除；对于要删除的对象，控件必须返回到从中`deleteLater()`调用的事件循环。

> 注意：多次调用该函数是安全的；当第一个延迟删除事件被传递时，该对象的所有未决事件都将从事件队列中删除。**

所以当没有事件循环时，因为线程已经退出并且它已经提出了完成信号，我们将不再再次启动同一个线程。在这种情况下，`deleteLater()`将永远不会处理，因为事件循环不存在，并且工作对象根本不会被删除。这不会造成内存泄漏。？

```
 connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));
 connect(worker, SIGNAL(finished()), thread, SLOT(quit())); 
```

如果我们认为交换两条线可以解决问题，那么我还有另一个问题。QT 明确指出发出信号时调用槽的顺序是不确定的

上面提到的文章链接中有一堆评论。甚至作者也无法完全回答这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-11T10:00:07.817

QThread 将在发送完成信号后执行一个事件类型为 QEvent::DeferredDelete的[QCoreApplication::sendPostedEvents](http://qt-project.org/doc/qt-5.0/qtcore/qcoreapplication.html#sendPostedEvents)

换句话说，QThread 将收集所有待处理的 deleteLater 并在`run`返回后执行它们

来源：[https ://qt.gitorious.org/qt/qtbase/source/c657bb7b51115d6e1719166fb502bb0ca1dcf4e8:src/corelib/thread/qthread_win.cpp#L363-462](https://qt.gitorious.org/qt/qtbase/source/c657bb7b51115d6e1719166fb502bb0ca1dcf4e8:src/corelib/thread/qthread_win.cpp#L363-462)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:48:25.010

```
//! put the following code in constructor
QThread *thread = new QThread;
//! type of m_weakThread is QWeakPointer<QThread>
m_weakThread = thread;
Worker *worker = new Worker;
//! type of m_weakWorker is QWeakPointer<Worker>
m_weakWorker = worker;
worker->moveToThread(thread);
connect(worker, SIGNAL(error(QString)), this, SLOT(errorString(QString)));
connect(thread, SIGNAL(started()), worker, SLOT(process()));
connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));
//! instead of finished() signal, connect destroyed() signal to thread's quit() slot
connect(worker, SIGNAL(destroyed()), thread, SLOT(quit()));
connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));
thread->start();

//! put the following code in destructor
if (!m_weakThread.isNull()) {
    QThread *thread = m_weakThread.data();
    if (thread->isRunning()) {
        thread->quit();
        thread->wait();
    }
}
if (!m_weakWorker.isNull()) {
    Worker *worker = m_weakWorker.data();
    m_weakWorker.clear();   //! optional, a little optimization
    //! it's safe to release worker since the secondary thread exits
    delete worker;
}
if (!m_weakThread.isNull()) {
    QThread *thread = m_weakThread.data();
    m_weakThread.clear();
    //! it's safe to release thread since it exits and all objects in it has released
    delete thread;
} 
```

# c++ - 在 C++ 中将字节数组转换为 OpenCV 图像

> ID：12114605
> 
> 赞同：21
> 
> 时间：2012-08-24T18:12:40.303
> 
> 标签：c++, arrays, opencv, bytearray

我有一个字节数组，它代表我想直接转换为 OpenCV Mat 对象的 .jpg 文件。

我有类似的东西

```
byte* data; // Represents a JPG that I don't want to disk and then read.
// What goes here to end up with the following line?
cv::Mat* image_representing_the_data; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T12:59:28.760

如果是 PIXEL 数据，前面提到的方法可以正常工作。

相反，如果您在内存、标题、压缩等所有内容中有一个完整的 jpg 文件，则它将无法正常工作。

在这种情况下，您想要：

```
Mat img = imdecode(data); 
```

这将与 相同`imread()`，仅来自内存，而不是来自文件名

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-26T04:56:37.417

正如@bob 提到的，这可以使用 Mat 构造函数来完成。

```
byte *data;
cv::Mat imageWithData = cv::Mat(sizeOfData, 1, CV_8U, data).clone(); 
```

创建此矩阵后，使用图像中的行数调用[reshape函数。](http://opencv.itseez.com/modules/core/doc/old_basic_structures.html?highlight=reshape#cv.Reshape)

```
cv::Mat reshapedImage = imageWithData.reshape(0, numberOfRows); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-27T20:52:27.630

```
cv::Mat GetImageFromMemory(uchar* image, int length, int flag)
    {
        std::vector<uchar> data = std::vector<uchar>(image, image + length);
        cv::Mat ImMat = imdecode(data, flag);

        return ImMat;
    } 
```

参数“flag”是指图像的类型，灰度，颜色，任何深度..定义了opencv

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-23T08:33:00.187

使用 cv::Mat1b 效率更高，并且不会将内存复制到所需的 2 倍以上

```
cv::Mat GetImageFromMemory(uchar* image, int length, int flag)
{
   cv::Mat1b data(1, length, image));
    return  imdecode(data, flag);
} 
```

# ruby - 红宝石。使用 ActiveRecord 将从 NET-SFTP 拉取创建的数组数据保存到数据库时出现 NoMethodError

> ID：12114608
> 
> 赞同：1
> 
> 时间：2012-08-24T18:12:48.510
> 
> 标签：ruby, activerecord, sqlite, sftp, net-sftp

我有一个小型 ruby​​ 程序，它登录到 sftp 服务器，从服务器上的目录中提取几个文件名，然后将这些文件名写入 sqlite3 数据库。

我将文件名从 sftp 保存到数组中。我可以确认该数组已创建并具有值，但是当我尝试使用该数组中的数据保存到数据库时出现错误，老实说，我无法弄清楚错误的含义？或者为什么数组中的数据没有被写入？

另一个奇怪的事情是我可以手动创建一个与来自 sftp 的值完全相同的数组，并使用来自该新数组的相同数据成功保存到数据库。为什么从 sftp 数据创建的数组会导致错误，但我使用完全相同的数据手动创建的数组却成功写入数据库？

谢谢你的帮助！

**我的程序（文件：xb.rb）：**

```
# db
require 'active_record'
ActiveRecord::Base.establish_connection(
  :adapter => 'sqlite3',
  :database => 'D:/prog/test/db.sqlite3.db'
)
class Db < ActiveRecord::Base
end

# connect to sftp and get last 2 filenames, put them in array
require 'net/sftp'
@files = []
Net::SFTP.start('XXX.XXX.XXX.XXX','xxx',:password => 'xxx') do |sftp|
    sftp.dir.foreach("/Outgoing/") do |sftp_file|
    @files.push(sftp_file.name)
  end
end

# Get last 2 filenames
@files = @files.sort!.pop(2)
# Show array to confirm it has values and that it's an array
puts @files
puts @files.class

# Write filenames to db
@files.each do |new_file|
  Db.create(:name => new_file)
end 
```

**回来：**

```
PS D:\prog\test> ruby xb.rb
20120823002349.txt
20120824012407.txt
Array
D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/sqlite_adapter.rb:212:in `type_cast': NoMethodError: undefined method `error' for nil:NilClass: INSERT INTO "dbs" ("name") VALUES (?) (ActiveRecord::StatementInvalid)
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/sqlite_adapter.rb:264:in `block (2 levels) in exec_query'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/sqlite_adapter.rb:263:in `map'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/sqlite_adapter.rb:263:in `block in exec_query'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/sqlite_adapter.rb:247:in `exec_query'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/database_statements.rb:61:in `exec_insert'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/database_statements.rb:88:in `insert'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/relation.rb:66:in `insert'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/persistence.rb:363:in `create'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/timestamp.rb:57:in `create'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/callbacks.rb:268:in `block in create'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:403:in `_run__619764720__create__513830955__callbacks'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:385:in `_run_create_callbacks'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/callbacks.rb:268:in `create'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/persistence.rb:344:in `create_or_update'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/callbacks.rb:264:in `block in create_or_update'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:414:in `_run__619764720__save__513830955__callbacks'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:405:in `__run_callback'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/callbacks.rb:264:in `create_or_update'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/persistence.rb:84:in `save'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/validations.rb:50:in `save'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/attribute_methods/dirty.rb:22:in `save'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:241:in `block (2 levels) in save'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/database_statements.rb:190:in `transaction'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:208:in `transaction'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:241:in `block in save'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:240:in `save'
        from D:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/persistence.rb:45:in `create'
        from xb.rb:27:in `block in <main>'
        from xb.rb:26:in `each'
        from xb.rb:26:in `<main>' 
```

但是，如果我手动创建一个与@files 具有完全相同的值的数组（@files2）（我将@files2 与@files 进行比较以确认），我可以成功地使用@files2 中的数据写入数据库。

**测试（附加到以前的程序）：**

```
.
.
.
# create manual array with same data as @files
@files2 = ["20120823002349.txt","20120824012407.txt"]
puts @files == @files2

# Write filenames to db
@files2.each do |new_file|
  Db.create(:name => new_file)
end 
```

**回报：**

```
PS D:\prog\test> ruby xb.rb
20120823002349.txt
20120824012407.txt
Array
true 
```

测试将数组值写入数据库。我很困惑，为什么我不能使用 sftp 数组（@files）中的数据写入 db，而 @files2 具有完全相同的数据并且可以用于写入 db？

我感谢任何帮助、想法和想法。

# java - Java 中包含哪些注解？

> ID：12114612
> 
> 赞同：-3
> 
> 时间：2012-08-24T18:13:18.987
> 
> 标签：java, annotations

我正在寻找 Java 中的注释列表，这些注释具有一些有意义的用途并且默认启用（无需导入任何内容）。例如，@Deprecated、@SuppressWarning 等。但我找不到。它在某个地方，还是我们可以编译一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:15:30.210

[`java.lang`](http://docs.oracle.com/javase/7/docs/api/java/lang/package-summary.html)标准 JDK 中可用的（不需要额外导入）包中的[注释包括：](http://docs.oracle.com/javase/7/docs/api/java/lang/package-summary.html)

*   [`@Deprecated`](http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html)

    > @Deprecated 注释的程序元素是不鼓励程序员使用的程序元素，通常是因为它很危险，或者因为存在更好的替代方案。

*   [`@Override`](http://docs.oracle.com/javase/7/docs/api/java/lang/Override.html)

    > 指示方法声明旨在覆盖超类型中的方法声明。

*   [`@SuppressWarnings`](http://docs.oracle.com/javase/7/docs/api/java/lang/SuppressWarnings.html)

    > 指示应在带注释的元素（以及带注释的元素中包含的所有程序元素）中抑制命名的编译器警告。

*   [`@SafeVarargs`](http://docs.oracle.com/javase/7/docs/api/java/lang/SafeVarargs.html)（从 Java 7 开始）

    > 程序员断言带注释的方法或构造函数的主体不会对其 varargs 参数执行潜在的不安全操作。

不要忘记检查[`java.lang.annotation`](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/package-summary.html)和[`javax.annotation`](http://docs.oracle.com/javase/7/docs/api/javax/annotation/package-summary.html)打包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:14:49.397

第一个 Bing 结果：[http ://en.wikipedia.org/wiki/Java_annotation](http://en.wikipedia.org/wiki/Java_annotation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:24:22.613

它主要是这3个注释，

```
@Deprecated
@Override
@SuppressWarnings 
```

但从以下 Java 7 开始也包括在内。

```
@SafeVarargs 
```

**请参阅下面的这些链接：**

[http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)

[http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Annotation.html](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Annotation.html)

# android - 在 Android 上快速从设备获取 RSSI

> ID：12114615
> 
> 赞同：4
> 
> 时间：2012-08-24T18:13:34.267
> 
> 标签：android, bluetooth, rssi

因此，我正在考虑一个应用程序，该应用程序需要快速（每台设备<1秒，最好更快）连续收集任意数量的周围android设备的蓝牙RSSI信息。只要该配对不需要任何用户交互或手机之间的先前交互，它就*可以与设备配对。*

我之前没有任何蓝牙经验，只是最近几天的阅读；我正在寻找一个小方向。

如果有的话，有哪些选择？看起来有人在[这里](https://stackoverflow.com/questions/9911102/core-bluetooth-constant-rssi-updates-of-in-range-devices)用 iOS 和 BLE 做类似的事情。如果这大大简化了事情，我可以接受 BLE 作为限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:58:48.170

您可以在查询期间像在 Android 上那样收集 RSSI：

```
BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
short rssi = intent.getShortExtra(BluetoothDevice.EXTRA_RSSI, (short) 0); 
```

但要小心，有些设备不支持读取 RSSI。

# linq - 如何使用实体框架进行 JOIN

> ID：12114616
> 
> 赞同：0
> 
> 时间：2012-08-24T18:13:42.827
> 
> 标签：linq, entity-framework

我怎么能`Join`和另一个做一个`Entity`？

我有这个，

`IEnumerable<EntityNetimoveis.San_Imovel> im = db.San_Imovel.Where(a => a.Credenciada_Id.Equals(10));`

我想要一个`JOIN`with `San_Imovel_Caracteristica`。主键和外键调用`Imovel_Id`

我试试这个

`IEnumerable<EntityNetimoveis.San_Imovel> im = db.San_Imovel.Join.(IEnumerable<EntityNetimoveis.San_Imovel_Caracteristica>, i => imovel_id, a => imovel_Id).Where(a => a.Credenciada_Id.Equals(10));`

但这是一个错误的代码。有语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:20:01.843

基本上，加盟是这样的。

```
var im = 
db.San_Imovel.Join(db.San_Imovel_Caracteristica, i => i.imovel_id, a => a.imovel_Id, (i, a) => a)
.Where(a => a.Credenciada_Id.Equals(10)); 
```

编辑：

例如，

```
var result = db.ATable
.Where(a => a.Name == 'test')
.Join(db.BTable, a => a.Id, b => b.Id, (a, b) => a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:16:33.517

有个 ”。” 加入后不应该在那里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:18:59.677

```
var query = from EntityNetimoveis.San_Imovel i in db.San_Imovel
    join EntityNetimoveis.San_Imovel_Caracteristica c in db.San_Imovel_Caracteristica on i.imovel_id equals c.imovel_Id
    select i;

return query.ToList(); 
```

# wpf - 调整列大小时出现 DataGrid 滚动条问题

> ID：12114620
> 
> 赞同：2
> 
> 时间：2012-08-24T18:13:52.880
> 
> 标签：wpf, datagrid, resize, flicker

调整列大小时，当列到达带有文本换行的调情点时，似乎会出现奇怪的闪烁问题。由于这很难解释，我用示例网格记录了这个问题，并在这里上传了一段视频：http: [//tinypic.com/r/15zfdiu/6](http://tinypic.com/r/15zfdiu/6)

请注意，在实际需要包装列内容之前，缩小列会产生奇怪的效果，在展开时也是如此。需要明确的是，被包裹的数字是完全正常的，问题在于包裹之前发生的闪烁。有没有人遇到过这个？

编辑：这不仅发生在这个特定的数据网格中，其他数据网格也会发生（所以这不是数据问题）。

# git - git pull 不合并我的更改

> ID：12114625
> 
> 赞同：1
> 
> 时间：2012-08-24T18:14:33.923
> 
> 标签：git

我的 git pull 有问题，我的问题如下：

我做了一个：

```
git add .

git commit -m "Message"

git pull origin <remote> 
```

得到这个：

```
Already up-to-date. 
```

但不要将我的本地文件与远程存储库中的更改合并！

我该怎么办呢？

我的

```
git status 
```

什么都不提交（工作目录干净）

注意：在 make pull 之前，我做了一个 push -f origin of a git reset --hard SHA1_HASH （在远程存储库中）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:46:34.820

这就是你在[GitHub 上](https://help.github.com/articles/creating-a-new-repository)创建 repo 的方式 一旦你这样做了（比如你命名它`MyRepo`），分支你的分支`origin`并在那个分支上工作。当您需要将东西推回原点时，您要做的是：

```
1\. git add <your changes>
2\. git commit -m "" <your commit message)
3\. git push <your local repo> <Link to MyRepo> 
```

如果您使用 github 配置了 RSA 密钥，则无需输入您的凭据。然后你从原点拉取请求。

# database - MS Access 拆分数据库 - 前端升级

> ID：12114632
> 
> 赞同：0
> 
> 时间：2012-08-24T18:15:05.980
> 
> 标签：database, ms-access-2007

我有一个 Access 数据库/程序，它将放置在一台计算机上，供用户记录信息。我知道拆分数据库基本上会将表和程序的其余部分彼此分离成两个单独的文件（前端和后端）。将来可能会升级该程序以满足更多需求。我一直在我的个人计算机上开发该程序，并计划将更新下载到本地计算机。

所以我的问题是，我是否可以继续在我的个人电脑上修改程序并在本地机器上下载前端更新，而不影响后端表数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:21:03.393

是的，您可以在前端部分工作并部署它而不影响后端。（只需确保跟踪您可能需要在 PC 上进行的任何表结构更改。）

要记住的一件事是表引用。如果“实时”系统正在引用文件共享，那么您可能必须在每次部署时更新表引用。也许没什么大不了的，但是您可以通过在实时计算机和您的 PC 上设置地图路径来解决这个问题——这样两者都可以引用，比如“z:\mydata.mdb”。

# android - Unity3d：后台网络活动和 Unity 运行循环

> ID：12114642
> 
> 赞同：4
> 
> 时间：2012-08-24T18:15:48.090
> 
> 标签：android, ios, networking, background, unity3d

我们正在寻找一种方法来“在后台同时”下载我们的游戏“很快”需要的各种资源。我们的要求是 (1) 最大可能的下载速度，(2) 对推动游戏的“前台”Runloop 活动的最小可能中断，(3) 该解决方案在我们感兴趣的所有主要平台（Android/iOS）上都运行得非常好/PC/Mac)，和 (4) 不存在削弱解决方案的错误。

如果我们不满足要求#1，那么游戏必须停止并让用户等待后台下载赶上并提供必要的资源。如果我们不满足要求 2，那么后台下载会对游戏的运行方式产生负面影响，使其变得生涩或响应缓慢等。

我们已经尝试并调查了各种方法，包括 Asset Bundles、WWW 和原生 C# HttpWebRequest，但它们都不能满足我们的所有要求。详情如下。

如果您已经弄清楚如何解决这个问题，我们很乐意与您交谈，因为我们宁愿不重新发明轮子。

以下是我们迄今为止的经验的详细信息：

我们有一个内置在 Unity 中的 Android 应用程序 - 最终也可以通过 iOS 使用。除了正常的前台活动外，我们还有一个后台低优先级活动，即下载各种资源以供前台应用程序使用。

（在你问之前，Asset Bundles 对我们不起作用——除非最近发生了任何变化——它们不能跨不同版本的 Unity 工作——即 Unity 3.4 的资产包在 Unity 3.5 中不起作用。所以升级用户将拥有重新下载他们所有的资产。）

不幸的是，我们在使用“WWW”组件时发现了一些恼人的错误。这些包括在网络丢失时不更新，以及网络请求（即“发布”）没有返回值。因此，我们希望用本机 C# HttpWebRequest 替换我们对 WWW 的使用。不幸的是，我们发现通过协程在主 Unity Runloop 中使用这个组件会导致 runloop 停止并且 UI 冻结。

但是将相同的代码放在后台 C# 线程（不是协同程序）中，然后轮询该线程的活动似乎确实有效。

我们不喜欢这种方法，因为它确实允许我们将这个活动安排在与 Unity 调度程序一致的范围内。我们希望网络（和​​相关的 CPU）活动在 Unity Run Loop 的适当间隙中运行。但据我们所知，只有三种方式可以指定优先级：

*   WWW.threadPriority - 我们不想使用 WWW，所以这是静音的。
*   Application.backgroundLoadingPriority - 由于我们没有使用 Unity 组件（如 AssetBundles）进行下载，我假设这没有效果？
*   YieldInstructions 例如 WaitForSeconds 和 WaitForFixedUpdate - 我的理解是这些都相当愚蠢。它们在计划运行时运行并且不遵循 Unity Run Loop 的需求？

我们希望了解的内容： - WWW 是否真的充满了问题，或者这只是我们对组件的使用？- 有没有人成功使用过带有 Unity 应用程序的 HttpWebRequest？他们是否以线程化的方式这样做？- Unity 中是否有任何“中断”或“优先”架构，以便后台任务可以很好地与 Unity Runloop 一起运行，而不会导致故障或竞争？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T05:43:24.547

一个快速的谷歌搜索发现如果你不想使用万维网，[这个女巫可能会工作。](http://msdn.microsoft.com/en-us/library/ms144197%28v=vs.90%29.aspx)system.net里面还有webclient，之前用过，unity里面没用过，不过我知道有异步下载的，我[这里用过](https://www.youtube.com/watch?v=993iGWhVa3c)

网络客户端示例：

```
WebClient webClient = new WebClient();

webClient.DownloadProgressChanged += OnChange;
webClient.DownloadFileCompleted += OnCompleted;
webClient.DownloadFileAsync(new Uri(download), fileAndPath); 
```

# javascript - 如何执行浏览器内对比度拉伸/标准化？

> ID：12114643
> 
> 赞同：4
> 
> 时间：2012-08-24T18:15:51.287
> 
> 标签：javascript, css, image-processing, histogram, contrast

我在网页上有 jpeg。我想在没有浏览器插件的情况下对这些图像执行客户端均衡（对比度拉伸）。我也会接受直方图均衡的解决方案。

我目前使用两个 CSS 过滤器（-webkit-filter: contrast() brightness()）组合的较差近似值。

我希望能够使用 processing.js 或 pixastic 之类的东西来完成此任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T11:21:06.010

我不知道有一个库包含有效的直方图均衡方法而不会引入太多开销。但是，您可以非常快地将自己的实现组合在一起。

您可以从这个非常优化的直方图均衡算法开始，该算法用于基于反投影从[js-objectdetect](https://github.com/mtschirs/js-objectdetect)获取的 8 位单通道图像：

```
/**
* Equalizes the histogram of an unsigned 1-channel image with values
* in range [0, 255]. Corresponds to the equalizeHist OpenCV function.
*
* @param {Array} src 1-channel source image
* @param {Array} [dst] 1-channel destination image. If omitted, the
* result is written to src (faster)
* @return {Array} Destination image
*/
equalizeHistogram = function(src, dst) {
    var srcLength = src.length;
    if (!dst) { dst = src; }

    // Compute histogram and histogram sum:
    var hist = new Float32Array(256);
    var sum = 0;
    for (var i = 0; i < srcLength; ++i) {
        ++hist[~~src[i]];
        ++sum;
    }

    // Compute integral histogram:
    var prev = hist[0];
    for (var i = 1; i < 256; ++i) {
        prev = hist[i] += prev;
    }

    // Equalize image:
    var norm = 255 / sum;
    for (var i = 0; i < srcLength; ++i) {
        dst[i] = hist[~~src[i]] * norm;
    }
    return dst;
} 
```

您可以将此方法单独应用于 RGB 图像的各个通道，但这会产生不希望的结果。维基百科描述了一种更好的方法：

> “但是，如果首先将图像转换为另一个颜色空间、Lab 颜色空间或 HSL/HSV 颜色空间，则该算法可以应用于亮度或值通道，而不会导致色调和饱和度发生变化。图片。” （[维基百科](http://en.wikipedia.org/wiki/Histogram_equalization)）

然后你需要一个图像和一个画布元素：

```
context = canvas.getContext("2d");
context.drawImage(image, 0, 0, canvas.width, canvas.height);
var imageData = context.getImageData(0, 0, canvas.width, canvas.height);

convertRGBAToHSL(imageData.data, hsl);
equalizeHistogram(hsl[2], hsl[2]);
convertHSLToRGBA(hsl, rgba); 
```

[此处](http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript)描述了如何在 Javascript 中执行 RGBA <-> HSL 对话。

请记住，使用参考转换方法的 8 位 RGB 图像有 511 个可能的亮度值。然后，您的直方图应该是 511 个而不是 256 个值的数组。您还必须确保您的亮度值在正确的范围内，可能通过乘以 510 或修改转换方法：

```
// r, g, b are in [0..255]
var max = Math.max(r, g, b), min = Math.min(r, g, b);
var luminance = max + min; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:35:04.533

据我所知，您不能直接在图像上执行此操作。您需要在[画布](https://en.wikipedia.org/wiki/Canvas_element)上绘制图像，这是一个[HTML5](http://en.wikipedia.org/wiki/HTML5)元素（[一些画布教程](http://www.html5canvastutorials.com/)），然后使用算法（[我可以找到的一种算法](http://homepages.inf.ed.ac.uk/rbf/HIPR2/stretch.htm)）分别操作每个像素的颜色以执行对比度拉伸。

不过，希望有所帮助！

# ios - UINavigation 上滑过渡

> ID：12114644
> 
> 赞同：1
> 
> 时间：2012-08-24T18:15:55.073
> 
> 标签：ios, objective-c, iphone

我有一个关于视图向上滑动的问题。示例将是 iOS 的联系人应用程序。当您要添加新联系人时，视图会自动向上滑动。你如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:18:20.553

查看展示视图控制器和选择过渡样式部分。

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

暗示：`UIModalTransitionStyleCoverVertical`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T18:17:49.407

[self.navigationController presentModalViewController:SOMEVIEW 动画：YES];

SOMEVIEW 只需要是您创建的 uiviewcontroller。您当前的视图还需要一个导航控制器。

# asp.net - 在运行时在 ASP.NET 网站中加载（动态？）DLL

> ID：12114647
> 
> 赞同：0
> 
> 时间：2012-08-24T18:16:02.643
> 
> 标签：asp.net, dll, web

我正在使用一些类似数据库的产品，名为“芝麻”。他们提供 c# pinvoke 文件和一个 DLL ......我习惯于只做旧的“添加引用”并继续前进。但无论出于何种原因，这个 DLL 不能以这种方式工作.. PINVOKE 文件引用它（我猜在工作目录）..

所以然后我把这个工作演示移到一个 ASP.NET '网站'.. B现在我很困惑.. 我把 PINVOKE 文件和 dll 放在 App_Code/CSCode 中......但是源代码找不到这个 DLL..

这个 DLL 应该驻留在哪里？？？在 ASP.NET 临时文件中？因为那是它编译所有东西的地方？但这似乎不对

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:21:48.763

任何 DLL 都需要驻留在 /bin 目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:40:57.047

看来你是对的.. 虽然似乎有一种解决方法可以从这里拉入 DLL..

[http://www.pinvoke.net/default.aspx/kernel32.setdlldirectory](http://www.pinvoke.net/default.aspx/kernel32.setdlldirectory)

此外，我需要在 IIS 7.0 的应用程序池上以 32 位模式运行 theis dll。我希望这没有缺点吗？

# asp.net - 收藏已修改；枚举操作可能不会在创建时执行

> ID：12114653
> 
> 赞同：0
> 
> 时间：2012-08-24T18:16:34.703
> 
> 标签：asp.net, crystal-reports, foreach, datatable

我通过silverlight子窗口将一些参数传递到一个aspx页面，该页面以pdf格式托管我的水晶报告。它是文件夹上贴纸的打印功能。我已经创建了水晶报告以类似于打印输出表的模板。我创建了一个存储过程，它从数据库中获取信息以打印标签。

最主要的是，我创建了一个跳过功能，以便用户可以跳过适当数量的标签以在下一个上打印。我已对其进行了扩展，因此用户可以只打印一个标签或多个标签。

所以我想使用一个 foreach 循环，所以一个标签进来，它打印一个标签，多个标签进来，它打印多个标签。除了当我运行它时，我得到错误集合已修改，枚举操作可能无法执行。这是创建表和跳过代码。

```
try
        {
            _skip = Request.QueryString["_skip"];
            _Report = Request.QueryString["_Report"];
            _jobnum = Request.QueryString["_jobnum"];
            jobnum1 = Request.QueryString["jobnum1"];
            jobnum2 = Request.QueryString["jobnum2"];
            addedBy = Request.QueryString["addedBy"];
            date = Request.QueryString["date"];

            // Create Table
            tb = new DataTable();
            tb.Columns.Add("FileName", Type.GetType("System.String"));
            tb.Columns.Add("PieceType", Type.GetType("System.String"));
            tb.Columns.Add("PieceNumber", Type.GetType("System.String"));
            tb.Columns.Add("JobNumber", Type.GetType("System.String"));
            tb.Columns.Add("OpenDate", Type.GetType("System.String"));
            tb.Columns.Add("Market", Type.GetType("System.String"));
            tb.Columns.Add("MarketYear", Type.GetType("System.String"));
            tb.Columns.Add("BusinessName", Type.GetType("System.String"));

            int length;
            int.TryParse(_skip, out length);
            length = Convert.ToInt16(_skip);

            // Populate Blank Rows to skip labels
            for (int i = 0; i < length; i++)
            {
                dr = tb.NewRow();
                tb.Rows.Add(dr);
            }

            //Create rows depending on how many jobs come in.
            foreach (DataRow drJob in tb.Rows)
            {
                dr = tb.NewRow();
                dr["FileName"] = drJob["PieceType"].ToString() + drJob["PieceNumber"].ToString();
                dr["PieceType"] = drJob["PieceType"].ToString();
                dr["PieceNumber"] = drJob["PieceNumber"].ToString();
                dr["JobNumber"] = drJob["JobNumber"].ToString();
                dr["OpenDate"] = drJob["OpenDate"].ToString();
                dr["Market"] = drJob["Market"].ToString();
                dr["MarketYear"] = drJob["MarketYear"].ToString();
                dr["BusinessName"] = drJob["BusinessName"].ToString();
                tb.Rows.Add(dr);
            }
            ShowPDF(tb);
        }

        catch (Exception ex)
        {
        } 
```

因此，在捕获期间，它会显示该错误。我试图在 tb.Rows 的末尾添加一个 .ToList() 但它不受支持。我搜索了一下并尝试了以下代码

```
foreach (DataRow drJob in tb.Rows.Cast<DataRow>().ToList()) 
```

这部分实际上已经完成，但生成了空白标签，并为我选择跳过的数量创建了标签。（它会跳过“9”行/表格，然后生成“9”标签进行打印）

我的问题是，如何将 foreach 循环修改为 1) 没有该错误和 2) 产生正确数量的标签，无论是 1 个还是 10 个。我猜测修改长度（跳过）会导致集合被修改，但如果是这样，我如何在调整参数差异的同时为它创建一个单独的列表（.ToList（））。它们通过两种不同的方式传递到同一个 aspx 顺便说一句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:23:34.533

我会这样做：

```
 //Create rows depending on how many jobs come in.
        List<DataRow> newRows = new List<DataRow>();

        foreach (DataRow drJob in tb.Rows)
        {
            dr = tb.NewRow();
            dr["FileName"] = drJob["PieceType"].ToString() + drJob["PieceNumber"].ToString();
            dr["PieceType"] = drJob["PieceType"].ToString();
            dr["PieceNumber"] = drJob["PieceNumber"].ToString();
            dr["JobNumber"] = drJob["JobNumber"].ToString();
            dr["OpenDate"] = drJob["OpenDate"].ToString();
            dr["Market"] = drJob["Market"].ToString();
            dr["MarketYear"] = drJob["MarketYear"].ToString();
            dr["BusinessName"] = drJob["BusinessName"].ToString();
            newRows.Add(dr);
        }

        foreach(DataRow dr in newRows)
             tb.Rows.Add(dr); 
```

这样，您就不会在迭代期间尝试修改 Rows 集合，您只需构建所需的新行并将它们一次性添加到集合中。

# python - 在 Python 中同时运行 os.system() 多次？

> ID：12114655
> 
> 赞同：2
> 
> 时间：2012-08-24T18:16:37.697
> 
> 标签：python, multithreading

我编写了以下简短的 python 脚本来在 Fedora 17 系统上使用 cclive 下载 flv 视频。

```
urls = [line.strip() for line in open("urls.txt")]
for url in urlstoget:
    os.system('cclive %s' % url) 
```

它工作正常，但视频限制在 80kbps 左右。我有 39 个要下载，想同时下载 2-4 个。

如何同时运行 os.system() 命令多次？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T18:17:58.370

使用`threading`或`multiprocessing`。

这是一个使用多处理的示例：

```
def retrieve_url(url):
    os.system('cclive %s' % url)

pool = multiprocessing.Pool(4)
pool.map(retrieve_url, list_of_urls) 
```

以及指向另一个 SO 问题的链接： [Python - 并行命令](https://stackoverflow.com/q/12097406/748858)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T18:27:34.080

查看 subprocess 模块，特别是 Popen() 方法。你也可以使用 os.fork()

# xml - Android 列表项 XML 布局

> ID：12114658
> 
> 赞同：1
> 
> 时间：2012-08-24T18:16:57.560
> 
> 标签：xml, listview, android-layout, layout

我有一个 XML 来显示 ListView 中的项目。出于某种原因，它看起来像这样：

![在此处输入图像描述](../Images/bbb02a0836e4eb18d55efeb8f99c0000.png)

我试过我认为一切都可以修复它 - 填充，不同的 layout_width 和 layout_height ......它仍然看起来像这样，有时甚至更糟。最好的情况是我将标题更改为 textAppearanceSmall。但后来我几乎看不到它。我还想让标题下方的日期和时间文本更大一些，并且铅笔图标垂直对齐。

这是该项目的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/icoNoteItem"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/note_item_edit_icon_Description"
    android:src="@android:drawable/ic_menu_edit" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center_vertical"
        android:orientation="vertical"
        tools:ignore="UselessParent" >

        <TextView
            android:id="@+id/noteTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:singleLine="true"
            android:ellipsize="end" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/noteTime"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingRight="10dp"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textSize="8sp" />

            <TextView
                android:id="@+id/noteDate"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textSize="8sp" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

这里的问题在哪里？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:00:31.573

在您提供给“wrap_content”的代码中设置第二个 LinearLayout 的属性“android:layout_height”就可以了。在此更改后，我已经运行了该程序并且它工作正常。

# css - 按类型包括/排除输入格式

> ID：12114660
> 
> 赞同：0
> 
> 时间：2012-08-24T18:17:11.770
> 
> 标签：css

以下 css 将使 a 内的所有输入变为红色`div class="field_error"`

```
div.field_error input{  
    color: red;
    border: 2px solid #FF0000; 
} 
```

是否可以说

案例1）排除类型=按钮？案例 2) 仅适用 type=text ？

我该怎么做这两种情况？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:20:13.387

是的，使用属性选择器：

```
div.field_error input[type=text] {  
    color: red;
    border: 2px solid #FF0000; 
} 
```

注意`type=text`过滤器。

在这种情况下，您不需要明确排除`type=button`，因为您只关心匹配`type=text`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:20:29.407

**案例 1**：您可以使用 CSS3 :not() 标签来排除类型按钮的输入：

```
div.field_error input:not([type=button]) {  
    color: red;
    border: 2px solid #FF0000; 
} 
```

**案例2**：这只选择文本输入并将它们涂成红色：

```
div.field_error input[type=text] {  
    color: red;
    border: 2px solid #FF0000; 
} 
```

# css - 服务器端导航突出显示活动页面

> ID：12114661
> 
> 赞同：0
> 
> 时间：2012-08-24T18:17:33.537
> 
> 标签：css, navigation, shtml

我正在寻找能够识别活动页面的服务器端 header.shtml（可能通过向其添加 css 类）

```
<header class="topbar container">
<a href="http://www.example.com/" rel="home">
<div class="logo grid">
<h1 class="ir">Home</h1>
</div>
</a>
<nav class="navbar" role="navigation">
<ul>
    <li class="active"><a href="about.html">About</a>
    </li>
    <li><a href="projects.html">Projects</a>
    </li>
    <li><a href="blog.html">Blog</a>
    </li>
    <li><a href="contact.html">Contact</a>
    </li>
</ul>
</nav></header> 
```

我试图通过使用 .shtml 来减少代码，然后

```
<!--#include virtual="/header.shtml" --> 
```

不过我猜，这只能通过 Javascript 或 JQuery 来完成，但我想知道它是否只能通过 css 来完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:38:39.077

是的，这只能通过 CSS 来完成。我从这本书中学到了这个解决方案：[CSS: The Missing Manual](https://rads.stackoverflow.com/amzn/click/com/0596802447)，它基于后代选择器。

首先，为每个导航条目分配一个唯一的 id：

```
<ul>
    <li id="nav_about"><a href="about.html">About</a>
    </li>
    <li id="nav_projects"><a href="projects.html">Projects</a>
    </li>
    <li id="nav_blog"><a href="blog.html">Blog</a>
    </li>
    <li id="nav_contact"><a href="contact.html">Contact</a>
    </li>
</ul> 
```

`body`然后，为每个页面的标签分配一个 id ：

```
<!-- about.html -->
<body id="about">

<!-- projects.html -->
<body id="projects">

<!-- blog.html -->
<body id="blog">

<!-- contact.html -->
<body id="contact"> 
```

最后，使用 CSS 设置导航栏的样式：

```
nav li {
    /* default nav entry style here */
}

#about #nav_about, #projects #nav_projects, #blog #nav_blog, #contacts #nav_contacts {
    /* active nav entry style here */
    /* styles declared here will override the defaults because this selector has more specificity */
} 
```

# security - 为什么 Win32_LogonSession 的远程 WMI 查询不返回 LogonType = 2 个实例？

> ID：12114664
> 
> 赞同：1
> 
> 时间：2012-08-24T18:17:34.163
> 
> 标签：security, remote-server, wmi-query, remote-administration

我在远程计算机上不是管理员的用户的安全上下文中对远程计算机运行以下 WMI 查询。

```
select * from Win32_LogonSession where LogonType = 2 
```

该查询不返回 Win32_LogonSession 的任何实例。（请注意，如果我以管理员身份运行相同的查询，我会取回当前登录的用户，这是我的目标。）

我已按照 Technet 上的说明为该用户启用远程 WMI/DCOM 访问（通过运行以下查询进行验证，该查询返回 LogonType = 3 的 Win32_LogonSession 实例）。

```
select * from Win32_LogonSession 
```

这是我正在运行的 C# 代码的完整示例：

```
var scope = new ManagementScope("\\\\SERVER\\root\\cimv2")
{
    Options =
    {
        Impersonation = ImpersonationLevel.Impersonate,
        Password = "myPassword",
        Username = "DOMAIN\\myUser"
        EnablePrivileges = true,
        Authentication = AuthenticationLevel.Packet
    }
};

scope.Connect();
var query = new ObjectQuery("select * from Win32_LogonSession where LogonType = 2");

using (var searcher = new ManagementObjectSearcher(scope, query))
{
    var managementObjects = searcher.Get();

    // managementObjects is empty!
} 
```

为什么即使用户有足够的访问权限远程查询 WMI，该用户也只会收到 Win32_LogonSession (LogonType = 3 - 网络) 的某些实例，而不会收到其他实例（例如，LogonType = 2 - 交互式）？

一些附加信息：根据代码项目上的这篇文章，只有 LocalSystem 帐户有足够的访问权限来查询所有登录会话：

[枚举](http://www.codeproject.com/Articles/7483/Enumerating-Logon-Sessions)代​​码项目的登录会话

这似乎并不完全正确，因为成为本地管理员组的成员似乎就足够了。但也许这意味着存在一个未记录的限制，阻止一个人在不授予完全管理权限的情况下授予对 WMI 对象的权限？

# c# - 使用 C# SDK 发布到 Facebook 墙

> ID：12114667
> 
> 赞同：0
> 
> 时间：2012-08-24T18:17:51.587
> 
> 标签：c#, facebook, sdk

我的用户通过 JavaScript 和 Ajax/JSON 调用登录到 Facebook，我通过 Web 服务检查用户名是否在我们的数据库中。如果成功，则会创建一个 Facebook cookie 并让用户登录。

到目前为止，还没有使用任何 SDK。

现在，使用 SDK，我想允许用户在成功上传文件后将消息发布到他们的墙上。已经处理文件上传，它正在工作。上传成功后，我想使用 SDK 向用户的墙发布一条消息，其中包含指向上传文件的链接。

我可以通过 SDK 访问该 cookie 信息，因为用户已经登录并使用发布到墙上所需的内容吗？

如果是这样，任何人都可以指点我的样本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:24:59.453

Facebook SDK 是指 Facebook Open Graph API 吗？[这是关于此](http://developers.facebook.com/docs/opengraph/)的 facebook 文档的链接，我还做了一个关于开始使用开放图的截屏系列 -[这里](http://www.youtube.com/playlist?list=PL8D1E905D80087F6F)。

基本思想是您创建对象（在您的情况下为“要上传的文件”）和操作（在您的情况下为“成功的文件上传”），将它们连接到您的应用程序并将信息发布到授权用户的 Facebook 时间线，新闻源或股票代码。

# python - 您如何比较 2 个列表并返回差异？（python中的差异函数不返回我需要的）

> ID：12114668
> 
> 赞同：1
> 
> 时间：2012-08-24T18:17:51.237
> 
> 标签：python, list, compare

我试图找出两个列表之间的区别。基本上，我想知道列表 1 中没有列表 2 的所有内容。解释它的最好方法是举个例子：

```
List1 = [a, a, b, c, d, e]
List2 = [a, b, c, d]

In this example, I would like a function that would return [a, e] 
```

当我在python中使用差异函数时，它只会返回“e”，而不是列表1中还有一个额外的“a”。当我在2个列表之间简单地使用XOR时，它也只返回“e”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T18:23:03.583

你想要的真的不是集减法。您可以使用[计数器](http://docs.python.org/library/collections.html#collections.Counter)：

```
>>> List1 = ['a', 'a', 'b', 'c', 'd', 'e']
>>> List2 = ['a', 'b', 'c', 'd']
>>> import collections
>>> counter = collections.Counter(List1)
>>> counter.subtract(List2)
>>> list(counter.elements())
['a', 'e'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:22:30.770

假设`List1`是 的严格超集`List2`：

```
for i in List2:
    if i in List1:
        List1.remove(i)
# List1 is now ["a", "e"] 
```

（`List1`如果您不想就地进行克隆，可以克隆。）

# c - Bison 意外标识符错误

> ID：12114673
> 
> 赞同：0
> 
> 时间：2012-08-24T18:18:09.177
> 
> 标签：c, bison

```
%{
#include <stdio.h>
#include <string.h>

void yyerror(const char *str)
{
        fprintf(stderr,"error: %s\n",str);
}

int yywrap()
{
        return 1;
}

int main()
{
        yyparse();
}
%}

%token TOKMACHINE TOKLOGIN TOKPASSWORD VALUE SPACE NEWLINE
input: auth input | input;
delim: SPACE | NEWLINE;
auth: TOKMACHINE delim VALUE delim TOKLOGIN delim  VALUE delim  TOKPASSWORD delim VALUE delim
{
    printf("Found auth {%s,%s,%s}", $1,$3,$5);
}; 
```

这是简单的野牛语法，我想用它来解析`.netrc`文件。但我在线收到错误`input`：

```
netrc.y:23.1-5: syntax error, unexpected identifier: 
```

我是 Flex/Bison 的新手，但这个例子接近于[这里的文字副本](http://www.usna.edu/Users/cs/lmcdowel/courses/si413/F10/labs/L04/calc1/ex1.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:38:22.897

看起来您缺少`%%`分隔符。做那个

```
%}
%token ...

%%
input : ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:45:44.120

您需要`%%`在您的行之后`%token`将定义部分与语法部分分开。

# mysql - SQL 语句为空错误

> ID：12114680
> 
> 赞同：0
> 
> 时间：2012-08-24T18:18:58.323
> 
> 标签：mysql, jsp

我在这里看到了很多指南，上面写着

```
if (!res.next()) 
```

应该检查语句是否为空，但是当我这样做时出现此错误

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /irasyti.jsp at line 73

70:     String rezervbusena=""; // rezervo busenos info
71:     String uzsakymas="";    // uzsakymas info
72:     
73:     if( !res.next()){ //jei kambariai neuzimti
74:         try { 
```

我不知道出了什么问题；也许我需要导入一些实用程序？：/我的代码：

```
 ResultSet res = null;
    Statement stmt = null;
        try {
            stmt = connection.createStatement();
            //res=stmt.executeQuery
            String tas=("SELECT * from table");  
            res=stmt.executeQuery(tas);
            out.println("<br>tas: "+tas + "<br>");
        }catch(Exception ex){
            out.println("Klaida skaityme: "+ex);    
        }

    if( !res.next()){ //jei kambariai neuzimti
            try {}
               catch(Exception ex){
            out.println("error: "+ex);
        }
} 
```

错误是 res 结果集为空，在 mysql 返回空语句后它保持为空，所以我必须先检查它是否为空 if(res!=null)

谢谢大家的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T03:15:32.033

您可以尝试使用以下代码，看看是否有任何错误？

```
ResultSet res = null;
    Statement stmt = null;
        try {
            stmt = connection.createStatement();                        
            //res=stmt.executeQuery
            String tas=("SELECT * from table");  
            res=stmt.executeQuery(tas);
            out.println("<br>tas: "+tas + "<br>");       

    if(res.next()){ //jei kambariai neuzimti

            out.println("rs value "+rs.getString(1);
        }
}
catch(Exception e){
e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T03:46:26.830

注意确定你有什么*异常*，但这里有一些解释/提示。

首先，您已经在 J​​SP 中编写*了**Java*代码，这[不是一种好的做法](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)。

 *其次，如果获取的行*有*数据，则该方法`boolean ResultSet.next()`返回；否则返回。`true`*`false`*

 *最后，位于 java.sql 包中的 JDBC API 类，因此要么导入这个包，要么只使用类/接口以及包名 -`java.sql.Connection`等等。**

# loops - 我应该使用 cfobject 还是 cfinvoke 来完成重复性任务？

> ID：12114683
> 
> 赞同：2
> 
> 时间：2012-08-24T18:19:06.930
> 
> 标签：loops, coldfusion, cfinvoke

我需要遍历一组图像路径来抓取、调整大小并将图像从外部目的地存储到 S3。

我习惯于像这样调用 cfcs 来执行此操作：

```
<cfinvoke component="form_img_handler" method="upload" returnvariable="imgSuccess">
    <cfinvokeargument name="command" value="upload_search"/>
    <cfinvokeargument name="imgPath" value="#results.bildpfad #"/>
    <cfinvokeargument name="imgFile" value="#results.bilddateiname#"/>
    <cfinvokeargument name="sellerILN" value="#results.iln#"/>
    <cfinvokeargument name="cookie" value="#variables.screenWidth#"/>
</cfinvoke> 
```

**问题：**
如果我必须循环执行 25 次，使用`cfobject`代替会更好`cfinvoke`吗？据我了解`cfinvoke`，被实例化，运行它的工作并消失。虽然`cfobjects`有留下来。如果是这样，在上述情况下使用会更好`cfobject`吗？如果是这样，我将如何调用我的`upload`函数（传递参数）以及完成后如何删除对象？

（以前从未使用过 cfobject ...）

感谢帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T18:24:53.550

也不是，使用类似...

外部循环（可能在全局范围内，例如应用程序）：

```
<cfset form_img_hander = createObject('component','dotted.path.to.form_img_hander') />
or
<cfset form_img_hander = new dotted.path.to.form_img_hander() /> 
```

内循环：

```
<cfset imgSuccess = form_img_handler.upload
    ( command   = "upload_search"
    , imgPath   = results.bildpfad
    , imgFile   = results.bilddateiname
    , sellerILN = results.iln
    , cookie    = variables.screenWidth
    )/> 
```

因为它*更具*可读性。

**你没有性能问题**，*除非*你有一个可重复的测试用例证明你有性能问题。

**关于删除对象...**
如果您没有将对象放置在持久范围内，则无需担心删除它们 - 它们仅与请求相关联，一旦请求结束，它们将根据需要被垃圾收集。

如果您将对象放置在持久作用域中，您*可能*仍然不需要担心删除它们，但如果您确定这样做，您可以使用 StructDelete 来删除它（就像任何其他变量一样）。当然，您应该注意不要在需要时这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T18:24:39.777

使用实例化您的对象`CreateObject`并将其分配给变量：

```
<cfset handler = CreateObject("component", "form_img_handler")>
<cfset handler.upload(URL.command, URL.imgPath ... )> 
```

实例化对象一次后，您可以在循环中调用第二行。

# asp.net - 无法在 ASP.NET 中使用 ADO.NET 实体数据模型

> ID：12114684
> 
> 赞同：0
> 
> 时间：2012-08-24T18:19:07.927
> 
> 标签：asp.net, vb.net, entity-framework, visual-studio-2012

我将 ADO.NET 实体数据模型添加到我的项目中，但不能在类或`Default.aspx.vb`.

![在此处输入图像描述](../Images/5551d70d07dc47b87cc6ac244a24bca1.png)

![在此处输入图像描述](../Images/f5f7b0021978028811230416585c48b8.png)

![在此处输入图像描述](../Images/6baf61b4b6e040f0bb23b65d7903d991.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:42:54.980

解决了
我`Code Generation Strategy`从更改`None`为`Default`然后构建项目的问题。现在我可以使用 `Dim db As New MyDataBaseModel.MyDataBaseEntities`

# hibernate - Hibernate：关于删除连接表的级联操作

> ID：12114688
> 
> 赞同：4
> 
> 时间：2012-08-24T18:19:37.357
> 
> 标签：hibernate, jpa

我在两个实体“menu_groups”和“pages”之间有一个多对多的关系，如下所示

```
 public class MenuGroup {
        @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.MERGE)
        @JoinTable(name = "menu_group_pages",schema="live",    
                  joinColumns=@JoinColumn(name="menu_groups_id"),
                  inverseJoinColumns=@JoinColumn(name="pages_id"))
        private Set<Page> pages = new HashSet<Page>();
    }

    public class Page {
       @ManyToMany(fetch = FetchType.EAGER, mappedBy="pages", 
                   cascade={CascadeType.MERGE})

       private Set<MenuGroup> menuGroups = new HashSet<MenuGroup>();
    } 
```

如您所见，有一个连接表有两个 fk：menu_groups_id 和 pages_id。现在我想在这个连接表中为 fk 'pages_id' 添加删除级联操作。对于普通表，语句类似于

```
 @OnDelete(action=OnDeleteAction.CASCADE) 
```

我怎么能对连接表执行此操作？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:26:05.433

您将不得不在数据库中手动设置级联选项，然后只需在托管 Page 对象上调用 remove 即可将其从链接表中删除。

OnDelete 注释应该已经在数据库中生成了级联选项，但它似乎不适用于 ManyToMany ( [HHH-4404](https://hibernate.onjira.com/browse/HHH-4404) )

另一方面，如果您想避免进行任何架构更改，那么您只需删除 MenuGroup 和 Page 之间的关联。在您的 PageDAO（或您使用的任何抽象）中，您可以有一个删除关联的 remove 方法：

```
public void remove(Page page) {
    for(MenuGroup menuGroup : page.getMenuGroups()){
        menuGroup.getPages().remove(page);
    }
    session.remove(page);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:31:40.763

我相信您只需要在 ManyToMany 注释中设置 CascadeType 即可`CascadeType.Remove`。`CascadeType.All`如果它适合您的数据模型，您也许可以做到。其中任何一个都应该将删除级联到 Page\ManuGroup 表和连接表。

# mysql - MySQL找到两列之间最接近的整数

> ID：12114691
> 
> 赞同：1
> 
> 时间：2012-08-24T18:19:47.433
> 
> 标签：mysql

现在，我有一个 IP，我将其转换为整数，然后尝试从表中找到与某个位置最接近的匹配项。

![在此处输入图像描述](../Images/75b37319822768f610241afced351925.png)

我现在正在这样做：

```
$sql = "SELECT * FROM table WHERE IP_FROM >= $x AND IP_TO <= $x LIMIT 1;"; 
```

有时我没有得到任何结果，因为 $x 掉进了裂缝。

我想知道一种可以获得最近行的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:28:44.157

您可以使用 LEAST 执行此操作，例如：

```
select * 
from Table1 t 
order by LEAST(abs(t.IP_FROM - 123), abs(t.IP_TO - 123)) 
LIMIT 1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/c1c7a/17/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:40:46.223

这应该适用于所有情况：

```
(SELECT * FROM geoip FORCE INDEX (IP_FROM) WHERE IP_FROM <= $x ORDER BY IP_FROM DESC LIMIT 1)
UNION
(SELECT * FROM geoip FORCE INDEX (IP_TO) WHERE IP_TO >= $x ORDER BY IP_TO LIMIT 1) 
```

这将为您提供两行，如果第一行不是您想要的行，则第二行将是。

[SqlFiddle 示例](http://www.sqlfiddle.com/#!2/d35be/14)

# ios - TableViewController 中的多个表视图

> ID：12114694
> 
> 赞同：1
> 
> 时间：2012-08-24T18:20:06.337
> 
> 标签：ios, uitableview

我正在尝试创建一个视图，该视图上将有 3 个单独的表，一个在左侧，两个在右侧（一个在另一个之上）。这三个都将使用静态单元格。我尝试使用普通的视图控制器进行设置，并将 3 个表视图放入其中，但是当我将它们切换到静态单元格时，我收到错误消息说“静态表视图仅在嵌入 UITableViewController 实例时才有效”。如果我尝试从表视图控制器开始，它会加载一个全屏表视图，我找不到将其大小调整为只有一半屏幕的方法，因此我可以获取其他 2 个我需要的表视图这页纸。

当我研究这个时，我确实在一个视图中找到了另一个名为[几个 tableviews 的](https://stackoverflow.com/questions/9814278/several-tableviews-in-one-view)帖子。对该问题的评论之一提到可以向表视图控制器添加额外的表视图，但帖子只是说“这很难”，并没有详细说明或提供链接，我无法找到更多关于它的信息。

同时，[Combine static and prototype content in a table view 中的](https://stackoverflow.com/questions/9322885/combine-static-and-prototype-content)一些回答说，在一个 Table View Controller 中不可能有多个 Table View，但是再一次，没有关于如何发布者的支持文档知道这一点。

有谁知道：

*   如何将额外的表视图添加到表视图控制器，或者
*   解决“静态表视图仅在嵌入 UITableViewController 实例时有效”错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:36:31.190

你的方法没有意义。为什么不为每个表视图创建不同的控制器？

我认为您想使用标准提供的控制器容器之一（split-、navigation-、tabbarcontroll），并且您想向其中一个容器添加更多嵌套的 tableview。但是您真正需要的是**自定义控制器容器**架构。查看[WWDC 2011](https://developer.apple.com/videos/wwdc/2011/) '实现 UIViewController Containment'。使用 iOS5 的这种方法，可以根据需要在窗口上安排尽可能多的 UITableView。它是完全可定制的。

# ruby - Rails 3嵌套表单，选择框只有一组字段

> ID：12114695
> 
> 赞同：0
> 
> 时间：2012-08-24T18:20:08.900
> 
> 标签：ruby, ruby-on-rails-3, nested-forms, drop-down-menu

这是我第一次发帖，如果有什么需要补充的请告诉我。我有一个 Event 资源和一个嵌套的 Item 资源（功能是允许活动的客人携带物品）。

我在事件编辑视图中有一个嵌套的项目更新表单，它允许您从下拉选择框中选择一个项目，然后从另一个选择框中选择一个数量来更新所需的项目数量。这是下面的form_for：

```
= form_for @event do |f|
    = f.fields_for :items do |i|
        %p
        = i.select(:name, options_for_select(@event.items.map {|p| p.name}))
        = i.select(:quantity, (1..5))
    = f.submit 
```

我的问题是，因为 :items 是复数形式，所以当我只想要一个“项目名称”选择框和一个“项目数量”选择框时，我会得到一个与事件关联的每个项目的选择框。

当我将表单更改为 :item 时，我得到了我想要的视图，但是当我点击“更新事件”按钮时，我得到了一个未知的“项目”属性错误。

请让我知道还有哪些其他信息可能有助于解决此问题。我觉得这应该很简单，为此我已经搜索了很多。也许我的搜索词组合并不理想。

提前非常感谢。

**编辑**

这是我的事件更新操作：

```
def update
    @event = Event.find(params[:id])

    if @event.update_attributes(params[:event])
        redirect_to :back
        flash[:notice] = "Items Updated!"
    else
        redirect_to :back
    end
end 
```

**编辑 2**

仅包含相关部分的事件和项目模型：

```
class Event < ActiveRecord::Base
 attr_accessible :items_attributes, :item_attributes, :name, :item 
 has_many :items
 accepts_nested_attributes_for :items
end

class Item < ActiveRecord::Base
 attr_accessible :name, :quantity, :event_id
 belongs_to :event
end 
```

事件控制器的编辑动作（仅相关部分）：

```
 def edit
     @event = Event.find(params[:id])
     @item = @event.items.build
     unauthorized! if cannot? :update, @event
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:14:33.270

在您的编辑操作中，您的变量名称是，`@item`但在您的表单中是`:items`. 您的 Event 模型中还有一个名为 item 的字段。因此，在您的表单中，它应该是 :item 而不是 :items。

但这仍然会与您在事件模型中的项目字段冲突。因此，要解决此问题，请将编辑操作中的项目变量重命名为类似的名称`my_items`，并在表单中使用相同的变量。

调用`items`是一个坏主意，因为 rails 会将其与 items 的对象混淆`@event`，从而给您带来不希望的结果。

# html - IE9 中的网站向左偏移

> ID：12114696
> 
> 赞同：-3
> 
> 时间：2012-08-24T18:20:12.583
> 
> 标签：html, internet-explorer-9

我有一个网站，www.reviewmyapp.net。该站点在 Firefox 和 Chrome 中很好，但在 IE9 中它偏向屏幕一侧，并且文本不在表格中居中。我看不出它有什么问题，也无法在网上找到任何帮助。有人可以看看吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:26:50.080

您可以使用此标头修复它：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

您在 IE9 中而不是在其他浏览器中遇到的居中和浮动问题通常是由于 IE9 没有真正使用最后一个（也是最兼容的）引擎。此设置强制它与当前的 HTML 规范最兼容。

但我自己无法测试（请参阅 Chris 评论）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:43:46.467

添加`<!DOCTYPE html>`将解决此问题。您应该始终在每个页面上包含它，因为它告诉浏览器要呈现页面的 HTML 版本。

有关更多信息，请参见：http: [//www.w3.org/QA/2002/04/valid-dtd-list.html](http://www.w3.org/QA/2002/04/valid-dtd-list.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:41:51.070

正如dystroy所说，从IE 9中的代码来看，您似乎缺少文档类型声明。这可能会导致 IE 丢失结束标签，因为您使用的标签几乎都不会保留它们的结束标签，从而导致实际问题。但是，请仔细检查您是否也关闭了所有标签。如果您想要更深入的反馈，请发布一些实际代码。

# c# - 使用 Sitecore CMS 管道处理器，我如何根据用户的 IP 地址重定向用户？

> ID：12114710
> 
> 赞同：0
> 
> 时间：2012-08-24T18:21:37.080
> 
> 标签：c#, geolocation, ip, sitecore, pipeline

我正在尝试使用 httpRequestBegin 管道处理器来执行此操作，但我似乎无法从给定的 HttpRequestArgs 参数访问用户的 IP 地址。

当我实现具有此方法的类时

```
public void Process(HttpRequestArgs args) {
    string ipAddress = args.Context.Request.UserHostAddress; // Not working
    string state = GetState(ipAddress); // already implemented elsewhere
    RedirectUserByState(state);  // already implemented elsewhere
} 
```

我认为这可能包含用户的 IP 地址

```
args.Context.Request.UserHostAddress 
```

但它会导致此错误（堆栈跟踪表明它源自 Process 方法）：

```
System.Web.HttpException: Request is not available in this context 
```

有任何想法吗？谢谢！

**编辑，这是在 Sitecore 6.1 和 web.config 中**

```
<pipelines>
<!--...-->
    <httpRequestBegin>
        <!--...-->
        <processor type="Sitecore.Pipelines.HttpRequest.ItemResolver, Sitecore.Kernel"/>
        <processor type="MySolution.Redirector, MySolution"/>
        <processor type="Sitecore.Pipelines.HttpRequest.LayoutResolver, Sitecore.Kernel"/>
        <!--...-->
    </httpRequestBegin>
    <!--...-->
</pipelines> 
```

此服务器可能位于负载平衡器后面。

**编辑2：**看起来我试图在 Process() 函数**中**访问这两个，这就是导致错误的原因：

```
Sitecore.Context.Request
Sitecore.Context.Response 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:56:21.407

您定义管道的位置很好。`args.Context.Request`应该在请求处理的这一步可用。最可能的原因是在上下文不可用的某些情况下会调用此处理器。对以下情况的简单检查应该可以处理这些情况：

```
if (args.Context != null)
{
    //....
} 
```

我能想到的唯一其他解释是，`GetState()`或者`RedirectUserByState()`正在调用`HttpContext.Current`，这在这一点上不可用（因此 Sitecore 将上下文作为参数传递）。

此外，负载平衡器不会解释异常，但如果 IP 最终始终相同，您可能会更好地检查以下服务器变量：

```
args.Request.ServerVariables["HTTP_X_FORWARDED_FOR"]
args.Request.ServerVariables["REMOTE_ADDR"] 
```

# php - 在 foreach 循环中并写入文件

> ID：12114712
> 
> 赞同：0
> 
> 时间：2012-08-24T18:21:48.090
> 
> 标签：php, json, image, for-loop, each

我目前有这个代码：

```
$json = file_get_contents('http://openstates.org/api/v1/legislators/?active=true&state=fl&&chamber=upper&apikey=ba09e678541e4b6ea28348c4517a6d50');
$obj = json_decode($json);

foreach($obj as $index => $user) 
    echo $user->photo_url; 
```

非常适合呼应列表。我想做什么而不是回显信息，我可以获取链接并下载图像文件吗？

或者不是回显将名称保存到一个大文件列表中？

在过去的两天里，我一直在尝试各种各样的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:25:45.790

这可能有效：http: [//psoug.org/snippet/Saving-Remote-Images-With-PHP_938.htm](http://psoug.org/snippet/Saving-Remote-Images-With-PHP_938.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:26:14.930

你必须尝试一些东西。如果你想下载你可以使用的网址`file_put_contents('image_name', file_get_contents($user->photo_url))`

或者您可以打开一个文件并将所有名称写入其中。只需键入“在 php 中写入文件”即可为您提供 php 文档`file_put_contents`和`fopen`. 可以使用`fopen`打开文件进行写入和写入该文件 [`fwrite`](http://www.php.net/manual/en/function.fwrite.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T01:15:16.083

关于什么：

```
foreach($obj as $index => $user) 
    exec("wget $user->photo_url -O $path_to_local_image"); 
```

# mysql - 在 MySQL 中查找重复行（复合键）

> ID：12114714
> 
> 赞同：5
> 
> 时间：2012-08-24T18:21:55.210
> 
> 标签：mysql, select, key, composite-key

我有一个表格，其中包含以下格式的行：

```
transactionDate, purchaseOrderId
8/8/2012, 55
8/9/2012, 55
8/8/2012, 88
8/9/2012, 55
8/10/2012, 77 
```

我想找到 transactionDate 和 purchaseOrderId 都准确的所有行。所以以下两行是重复的：

```
8/9/2012, 55
8/9/2012, 55 
```

我尝试使用以下查询：

```
SELECT
    transactionDate, purchaseOrderId
FROM
    purchases
GROUP BY
    transactionDate, purchaseOrderId
HAVING COUNT(*) > 1; 
```

然而，除了 8 月 9 日的结果外，它还返回了 8 月 8 日的结果。如何让它只返回两列都重复的字段（而不是返回每个日期的所有交易）？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T18:34:06.390

```
SELECT 
    transactionDate, purchaseOrderId, COUNT(*) CNT 
FROM 
    purchases 
GROUP BY 
    transactionDate, purchaseOrderId 
HAVING 
    CNT > 1
ORDER BY 
    CNT ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:15:12.930

将您的 transactionDate 列更改为“日期”数据类型并以正确的日期格式插入值，即（“YYYY-MM-DD”）。将值插入为：

```
 INSERT into purchases values ('2012-08-09', 55); 
```

然后使用您自己的上述书面查询。它会给你你想要的结果。

# php - 静态 PHP 页面产生 404 错误

> ID：12114715
> 
> 赞同：0
> 
> 时间：2012-08-24T18:21:56.570
> 
> 标签：php, wordpress

我有一个 WordPress 站点，需要在其中创建自定义 PHP 页面。PHP 页面包含我需要调用的 Web 服务。但是，当我调用自定义 PHP 页面时，WordPress 会拦截调用并显示 404 页面。

我该如何解决这个问题，以便显示自定义 PHP？

谢谢！

JB

==== 这是 htaccess 的内容。我要从中排除其内容的文件夹位于 /web/content/services.xml 中。WP 安装在 /web/content 中，包括 htaccess 文件。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !^/(services/.*)$
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:59:03.563

第 1 步：在 wp-content/themes/YOUR_THEME/ 文件夹下创建自定义 php 页面。
第 2 步：将以下代码放入您创建的自定义页面中

假设，让我们考虑我们创建了 custom.php

现在，

```
<?php
/*
    Template Name : custom
*/

//Your Code Goes Here.
echo "<h1>My Custom Page</h1>";

?> 
```

第 3 步：登录到您的管理面板，即 wp-admin/
第 4 步：通过单击左侧的创建页面菜单创建页面。
第 5 步：放置页面标题，例如我的自定义页面。
第6步：选择位于右侧的模板主题。即自定义
步骤7：保存页面。
第8步：通过输入以下网址浏览页面。

[http://www.your-site.com/custom](http://www.your-site.com/custom)。

您将看到以下消息。

# 我的自定义页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:26:21.883

如果您希望它包含在 WordPress 主题中，请将该脚本包含在您网站正在使用的主题文件夹中的页面模板中。然后创建一个页面并选择该页面模板。

或者，您需要向 .htaccess 添加规则以阻止 WordPress 拦截脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:27:03.710

创建一个[页面模板](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)并在其中插入您的 PHP 代码。例如：

```
<?php
/*
  Template Name: Your page name
 */

your php code 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T18:28:07.453

[您可以使用模板层次结构](http://codex.wordpress.org/Template_Hierarchy)机制“覆盖”WordPress 。

*   只需在 WordPress 中创建一个新页面。
*   找出它的 id（您可以在管理面板中轻松完成）
*   **在名为page-IDOFYOURPAGE.php**的模板目录中创建一个 PHP 文件
***   将代码插入您创建的页面**

 **WordPress 将负责加载您的代码，使用 WP URL 结构执行其中的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T12:24:57.413

@jbsound，我遇到了同样的问题。

解决了添加**die();** 在静态 php 的末尾，以防止 wordpress 在*错误 404*中更改状态标头。

```
// At the end of the page
die(); 
```**

# c# - SQL UPDATE Query 静默失败，我怀疑是敌人的双引号

> ID：12114727
> 
> 赞同：0
> 
> 时间：2012-08-24T18:22:36.697
> 
> 标签：c#, asp.net, sql-server, web-services

我有一个带有 C# 的 ASP.NET 应用程序。应用程序从 WebServices 获取数据，然后它应该执行以下更新。

```
sqlQueryString2 = "
UPDATE CI
SET
 platform =@platform ,
 wstart = @wstart,
 wend = @wend,
 model = @model,
 productDescription = @productDescription,
 scanflag = @scanflag     
WHERE  serial = @serial "; 
```

我意识到当从 Web 服务返回某些值时，我的应用程序似乎在循环。UPDATE 被发送，不提交，然后在需要更新的下一个循环中再次被拾取。

我在 SQL(Server 2005) 中进行了跟踪，这就是服务器的问题：

```
exec sp_executesql N'
UPDATE CI 
SET 
 platform =@platform ,
 wstart = @wstart,
 wend = @wend,
 model = @model,
 productDescription = @productDescription,
 scanflag = @scanflag 
WHERE
 serial = @serial ',N'
 @serial nvarchar(11),
 @platform nvarchar(23),
 @wstart varchar(10),
 @wend nvarchar(10),
 @model nvarchar(24),
 @productDescription nvarchar(35),
 @scanflag nvarchar(1)',
 @serial=N'H01170RAHS6',
 @platform=N'Client Computer - Apple',
 @wstart=N'05/09/2011',
 @wend=N'05/09/2012',
 @model=N'iMac (20-inch, Mid 2009)',
 @productDescription=N'IMAC 20"/2.26/2X1GB/160GB/SD/MSE/KB',
 @scanflag=N'Y' 
```

我怀疑 productDescription 中的单个双引号可能会抛出它，但我有一段时间试图将其剥离或替换为 (in.)。我认为我在这方面的部分问题是当它被 WebServices 服务器填充时存储的值被转义，因为我可以在手表中将其视为“IMAC 20\”/2.26/2X1GB/160GB/SD/MSE/KB”列表。我尝试用 String.Replace 以及 RegEx 语句替换转义和非转义引号。TBH 我什至不确定我是否在正确的轨道上引用。我只是在看它，因为没有所有返回都包含一个，并且它们不会全部循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:46:12.317

双引号应该不是问题：在字符串内部，它们只是另一个字符。（它们在字符串常量*之外*具有意义，但这不是这里发生的事情。）

我强烈怀疑您的问题不是 SQL 语法错误。如果是这样，您会看到它出现在多个地方。

例如，您会在 SQL Profiler 中看到它们（如果您在跟踪中包含错误和异常）。您还可以运行刚刚粘贴到 SSMS 中的确切 SQL 查询，并查看它是否有效。更重要的是，如果查询返回错误，您将在 C# 端收到 SQL 异常。如果这些事情都没有发生，那么您的查询似乎正在工作。

更有可能的是，查询正在运行，但*没有执行任何*操作，因此您一遍又一遍地获取相同的记录，因为需要更新。同样，在 SSMS 中运行会给您“1 行已更新”消息，它应该可以帮助您跟踪此问题。

# ruby-on-rails - 将所有 Rails DB/ActiveRecord 调用包装在一个事务中，这样可以在最后回滚到以前的状态

> ID：12114728
> 
> 赞同：0
> 
> 时间：2012-08-24T18:22:40.627
> 
> 标签：ruby-on-rails, ruby, database, activerecord

我有一个需要对数据库进行更改的 Rails 应用程序，有没有办法可以设置它，以便最后回滚所有数据库操作，例如沙盒/事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:29:54.783

不确定它是否对您有帮助，但您始终可以`rails console`在沙盒模式下运行：`rails c -s`. 一旦您退出控制台，这将自动回滚所有事务。

您也可以查看`database_cleaner`宝石。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:36:14.440

您可以将每个请求包装在一个环绕过滤器中，该过滤器显式启动事务并在 yield 返回时进行回滚。将它添加到 ActionController::Base 应该做什么？

请先备份，顺便说一句：p

另一种选择可能是点击服务器故障并寻求文件系统快照的帮助。

# grails - 如何动态创建包含数组语法的参数名称

> ID：12114729
> 
> 赞同：4
> 
> 时间：2012-08-24T18:22:46.027
> 
> 标签：grails

在我系统的一个地方，我执行以下操作，它可以正常工作：

```
 log.debug params."${tagType}"_${i}" //resolves to, e.g : params.title_0 
```

此外，以下方法也有效：

```
log.debug params."${'setTagtypesList[0].tagtype.id'} // hard coded 0 index 
```

（请注意，上面解析为`params.'setTagtypesList[0].tagtype.id'`并且单引号是必需的。）

但是，随后的 params 请求会导致 NULL：

```
def someInt = 0
log.debug params."'setTagtypesList[someInt].tagtype.id'" //dynamic index 
```

那么如何动态创建包含数组语法的参数名称呢？我正在使用 Grails 1.3.9。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T22:53:03.877

有多种方法可以实现您想要的，包括：

```
params."setTagtypesList[${someInt}].tagtype.id"
params['setTagtypesList[' + someInt + '].tagtype.id'] 
```

这两者最终都是简写

```
params.get('setTagtypesList[' + someInt + '].tagtype.id') 
```

使用 GStrings 要记住的是，里面`${}`的任何东西都是 Groovy 表达式，大括号之外的东西都是字面意思。

但是请注意

```
params["setTagtypesList[${someInt}].tagtype.id"] 
```

可能*不起作用*，因为它正在使用 GString 键而不是字符串查找地图条目。属性访问点符号`toString()`在查找之前对键进行隐式处理，这是您需要了解字符串和 GString 之间区别的情况之一。

# mercurial - Hg 命名分支错误提交清理

> ID：12114730
> 
> 赞同：0
> 
> 时间：2012-08-24T18:22:50.320
> 
> 标签：mercurial, kiln

我有一个存储库，其中开发人员在将代码提交到各种命名分支时出错。本质上，发生的事情是这样的：

```
A - B - C
 \
  W - X - D - E - Y - Z 
```

其中 ABCDE 都（假定）是主分支的一部分，而 WXYZ 是新命名分支上的提交。开发人员在更改“D”和“E”之前未能更新到“C”，然后在它们之上提交了“Y”和“Z”。

我需要将“D”和“E”移到主分支上，不包括 WXYZ。

```
A - B - C - D - E
 \
  W - X - Y - Z 
```

总的来说，我对 Hg 不是很了解，但我正在学习，并且愿意。我看过变基，但这似乎并没有把我带到我需要去的地方。我可以让开发人员取消他的更改，然后在适当的位置重新应用它们，但这似乎并不完全“正确”。

你将如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:51:10.187

最安全的方法可能是将修订从一个分支复制到另一个分支，然后使用以下命令将它们从他们承诺的分支中撤出（用这些变更集的修订号替换字母）：

```
> hg up C
> hg graft D:E
> hg up Z
> hg backout D:E
> hg commit -m "Backout changes D to E" 
```

这会保留默认分支，但会在命名分支中留下一些错误的修订，这些修订在一次提交中被撤销。

如果要编辑历史记录，`hg rebase`可以使用以下命令：

```
> hg rebase -r Y:Z -d X
> hg rebase -r D:E -d C -D 
```

在执行此操作之前，您可能需要将变更集的阶段更改为草稿（这样做`hg phase -d rev`）

如果你走 rebase 路线，那么你需要确保存储库的所有克隆都被删除并重新克隆，以确保删除的历史不会回来。如果您有一个大型团队，那么这可能很危险，这就是我建议第一个选项的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:28:49.580

除了 Steve Kaye 发布的出色的撤销想法，我建议使用[Mercurial Queues](http://mercurial.selenic.com/wiki/MqExtension)扩展来试验补丁队列。如果您将 D、E、Y 和 Z 导入补丁队列，您可以在 B 之上应用补丁 D 和 E，然后在 X 之上应用 Y 和 Z。

如果对 ABCD 分支的更改与 WXYZ 是分开的，那么这应该会成功，没有任何问题。但是，如果 ABCD 和 WXYZ 更改相似（即：触摸文件中的相同行、重命名文件等），那么您可能会得到一些被拒绝的文件。

# asp.net - ASP.NET web.config：system.web.compilation 中的 debug 属性的默认值是什么？

> ID：12114734
> 
> 赞同：39
> 
> 时间：2012-08-24T18:23:03.910
> 
> 标签：asp.net, web-config

如果我不包含这样的元素中的`debug`属性：`compilation`

```
<system.web>
    <compilation />
</system.web> 
```

它是否默认为`true`or `false`？来源链接将不胜感激。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-24T18:27:07.177

`debug`中属性的默认`compilation`值为**false**

MSDN -[编译元素（ASP.NET 设置架构）](https://msdn.microsoft.com/en-us/library/s10awwz0(v=vs.100).aspx)

> **调试**
> 
> 可选的布尔属性。指定是否编译调试二进制文件而不是零售二进制文件。默认值为假。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-14T21:13:48.773

默认值为 false，但请注意[ASP.NET 配置文件层次结构和继承](https://msdn.microsoft.com/en-us/library/ms178685.aspx)。

因此，如果在特定的 web.config 文件中找到：

```
<system.web>
    <compilation />
</system.web> 
```

如果存在更高级别的 web.config 文件，则很可能是实际值：

```
<system.web>
    <compilation debug="true" />
</system.web> 
```

如果您使用 IIS 配置编辑器，您可以看到实际值。下拉列表允许您检查在更高级别设置的值。 [![工作中的配置继承](../Images/19999d7311f6873b70490bb9138ad96f.png)](https://i.stack.imgur.com/FoaA6.png)

可以看到debug=true的值。不是因为它是在应用程序级别的 web.config 文件中设置的，而是在根站点级别设置的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T18:28:30.487

默认值为 false。

这是关于 web.config 的编译标记的[MSDN 链接。](http://msdn.microsoft.com/en-us/library/s10awwz0(v=vs.71).aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-31T15:19:46.003

如先前答案所述，默认值为**false 。**

如果在 Machine.config 中指定了 debug=true，则每个 Web 应用程序的 web.config 都会继承它，然后将其视为默认值。

# excel - 删除从特定行开始的行，Excel VBA

> ID：12114737
> 
> 赞同：0
> 
> 时间：2012-08-24T18:23:11.313
> 
> 标签：excel, vba

```
wsIMP.Columns(4).SpecialCells(xlCellTypeBlanks).EntireRow.Delete 
```

该代码将删除 D 中所有我想要的空单元格，有没有办法在此代码中添加更多内容以从第 6 行开始？

我虽然它会像 .Rows(6).Columns(4) 一样简单，但它似乎不起作用。任何人都知道如何使这项工作正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:35:21.353

```
dim lastrow as Long

With wsIMP
    lastrow = .Range("D" & .rows.count).end(xlup).Row 
    .Range("D6:D" & lastrow).SpecialCells(xlCellTypeBlanks).EntireRow.Delete
End With 
```

如果您想写在一行中，就像在您的评论中一样，请执行此操作。

`wsIMP.Range("D6:D" & wsIMP.Range("D" & wsIMP.Rows.Count).End(xlUp).Row).SpecialCells ...`

但如果你问我，那更难读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:32:53.247

尝试这个：

```
wsIMP.Range("D6","D" & wsIMP.rows.count).SpecialCells(xlCellTypeBlanks).EntireRow.Delete 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:33:21.917

嗯，我没有在 excel 中进行过多的编码工作，但是我在 Access 中做了很多工作，我觉得我记得使用 .Colums(6)(4) 或 .columns(6,4) 来这样做，也许给每个人一个快速的镜头。如果这些都不起作用，恐怕我无能为力。

# android - 在 Android 中实现登录

> ID：12114739
> 
> 赞同：1
> 
> 时间：2012-08-24T18:23:26.777
> 
> 标签：android, security

我正在尝试制作一个用户必须使用名称/密码组合登录的应用程序。但是，我不完全确定在哪里检查用户名/密码是否有效。

每次运行应用程序时，我是否应该在显示登录屏幕之前刷新手机上的数据库副本？或者我应该只在我验证了登录信息后才拉（通过通过 https 发送的帖子？）。

此外，我想知道在手机上存储包含用户名/密码组合的部分数据库的安全性。如果我用盐反复对密码进行哈希处理，是否有可能轻松查看用户名/密码组合？什么哈希算法是合适的？（我读过 md5 很弱，sha-1 也是如此，但也许通过反复迭代它可以减轻 sha-1 的弱点？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:37:50.287

如果您在用户使用登录之前或之后更新数据库取决于您的应用程序概念。我猜提供的数据仅适用于具有有效登录名的用户，因此您应该只在登录后加载/更新您的数据库。否则用户可能会下载您的应用程序，下载数据库并访问提供的可能很敏感的数据（我不知道里面存储了什么，所以您必须决定）

为什么要在手机上保存用户数据（登录）？这仅在您的应用程序在没有互联网的情况下运行时才有意义，但这意味着您的应用程序必须在每部手机上存储所有用户的登录数据。这是一个可怕的想法。

您可以使用 SHA-2 作为密码，但在大多数情况下使用盐渍 md5 应该仍然可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:39:30.607

在更新数据库之前验证登录信息（通过某种 HTTP 方法）。如果您将任何凭据存储在手机的数据库中，那么没有登录名的人可以使用已root 的手机访问您的数据。即使您对这些值进行哈希处理，拥有根电话的人也可以更改数据库中的内容等。

带有盐的 SHA-2 是安全性的好选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:42:43.580

几天前我做了这个过程。你有2个选择。RESTful 服务或通过 json。

我通过httppost发送一个json，然后对密码进行哈希处理并在php（服务器端）中进行身份验证

问题是当您发送 json 时，您发送的是纯文本。有一些技巧。您可以在 android 应用程序上散列您的密码并更改您的站点/数据库的整个逻辑以处理您选择的散列或通过 https 发布。我建议后者。取决于什么对你来说更容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T18:53:39.493

对于您问题的密码存储部分：

*   不要简单地散列您的密码并存储它。
*   不要只是把盐扔在那里，把它哈希并储存起来。
*   务必使用其他人已经对其安全性进行审查的经过认证的算法来保护您的用户密码。

此类示例包括基于 Blowfish 的 bcrypt 和基于 SHA-256 等哈希算法的 PBKDF2。

security.stackexchange.com 上的这个问题涵盖了两者的所有相关细节及其权衡。

[是否有安全专家推荐 bcrypt 用于密码存储？](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage)

您还可以从阅读[如何安全存储密码](http://codahale.com/how-to-safely-store-a-password/)中受益。

# asp.net - 绑定到 ListControl 而不指定 DataTextField 和 DataValueField？

> ID：12114743
> 
> 赞同：0
> 
> 时间：2012-08-24T18:23:35.400
> 
> 标签：asp.net, data-binding

**有没有办法在不**指定`DataTextField`and`DataValueField`属性的情况下绑定到 ASP.NET ListControl ？也许某个类将允许 ListControl 推断哪个属性是文本以及哪个值？

过去每次都必须指定这些属性会导致拼写错误。我认为如果我每次都可以绑定到相同对象类型的集合并完全忽略*字段*属性会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:17:01.507

如果您确实想要这样的控件，则可以扩展`ListBox`该类以假定默认值。

对分配的数据类型使用`DataSource`和的反射。`GetProperties`随心所欲地假设默认值；将第一个属性称为 key( `DataValueField`)，将最后一个属性称为 value( `DataTextField`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:40:18.340

不，没有办法让它自动“推断”这一点。

想象一下，您正在绑定到`Person`. Person 类可能有`Id, Name, Address, City, State, Zip, Email`，等等。该类`ListBox`无法读懂程序员的想法并决定他是否真的想分别使用`Id`and 和`Name`for `Value`，`Text`因为在许多有效场景中，您可能确实需要显示`Phone`and`Id`来代替。

如果您至少运行**一次**页面，如果您尝试绑定到不存在的属性，您将立即收到错误消息，因此这对任何人来说都不是问题。

# linux - mysqld 服务每天在 ec2 服务器上停止一次

> ID：12114746
> 
> 赞同：43
> 
> 时间：2012-08-24T18:23:56.180
> 
> 标签：linux, amazon-ec2, mysql

环境细节：

```
Server: Amazon ec2 Linux
Web Server: Apache
Web Framework: Django with mod_wsgi 
```

以下我在 mysql_err.log 文件中找到。

```
The InnoDB memory heap is disabled
120823  3:21:40 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120823  3:21:40 InnoDB: Compressed tables use zlib 1.2.3
120823  3:21:40 InnoDB: Using Linux native AIO
120823  3:21:41 InnoDB: Initializing buffer pool, size = 128.0M
InnoDB: mmap(137363456 bytes) failed; errno 12
120823  3:21:41 InnoDB: Completed initialization of buffer pool
120823  3:21:41 InnoDB: Fatal error: cannot allocate memory for the buffer pool
120823  3:21:41 [ERROR] Plugin 'InnoDB' init function returned error.
120823  3:21:41 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
120823  3:21:41 [ERROR] Unknown/unsupported storage engine: InnoDB
120823  3:21:41 [ERROR] Aborting 
```

看起来系统内存不足以将内存分配给缓冲池。我在使用时发生了同样的错误`Amazon ec2 micro instance`，所以我搬到了`small instance`. 它可以正常工作几天，但现在又一天中断一次。是否有永久解决方案？我可以移动到中等实例，但问题是它会被修复吗？我应该减小`innodb_buffer_pool_size`，首选尺寸是多少？

结果`cat /proc/meminfo`如下（可能会有所帮助）：

```
MemTotal:        1697824 kB
MemFree:          125744 kB
Buffers:          109704 kB
Cached:           481408 kB
SwapCached:            0 kB
Active:          1212396 kB
Inactive:         266840 kB
Active(anon):     888192 kB
Inactive(anon):       76 kB
Active(file):     324204 kB
Inactive(file):   266764 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:             0 kB
SwapFree:              0 kB
Dirty:                 4 kB
Writeback:             0 kB
AnonPages:        888144 kB
Mapped:            15604 kB
Shmem:               144 kB
Slab:              63752 kB
SReclaimable:      53680 kB
SUnreclaim:        10072 kB
KernelStack:         800 kB
PageTables:        16436 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:      848912 kB
Committed_AS:    1417140 kB
VmallocTotal:   34359738367 kB
VmallocUsed:       10988 kB
VmallocChunk:   34359725168 kB
DirectMap4k:     1748992 kB
DirectMap2M:           0 kB 
```

操作系统版本（uname -a）： `Linux ip-10-246-134-149 3.2.21-1.32.6.amzn1.x86_64 #1 SMP Sat Jun 23 02:32:15 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux`

我检查了`ps aux`服务器只剩下 15MB 内存的命令，这些是当时`httpd`正在运行的进程：

的结果`free -m`

```
total       used       free     shared    buffers     cached
Mem:          1657       1628         29          0          3         19
-/+ buffers/cache:       1605         51
Swap:          895        875         20 
```

的结果`ps aux`

```
apache   21123  0.1  1.2 394652 20464 ?        S    19:35   0:06 /usr/sbin/httpd
apache   21146  0.1  1.2 394280 20796 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21152  0.1  1.2 394284 21560 ?        S    19:38   0:05 /usr/sbin/httpd
apache   21155  0.2  1.4 396244 24528 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21156  0.1  1.1 392552 20344 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21157  0.1  1.1 394284 18884 ?        S    19:38   0:05 /usr/sbin/httpd
apache   21159  0.1  1.4 396200 25040 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21161  0.1  1.2 394856 21724 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21162  0.1  1.3 394864 22400 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21163  0.1  1.3 394860 22204 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21164  0.1  1.1 392560 19204 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21165  0.1  1.3 394832 22280 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21166  0.1  1.3 395276 22932 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21172  0.2  1.4 396320 24820 ?        S    19:38   0:06 /usr/sbin/httpd
apache   21174  0.2  1.7 400672 29452 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21178  0.1  1.4 400540 25304 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21179  0.2  1.6 400580 27856 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21184  0.1  1.7 400628 29320 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21185  0.1  1.6 397944 27292 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21186  0.1  1.5 397960 25648 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21187  0.1  1.7 400576 29120 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21191  0.1  1.4 400576 24400 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21193  0.1  1.4 400536 24940 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21194  0.1  1.5 400572 26096 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21203  0.1  1.6 400580 28808 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21206  0.1  1.7 400584 29732 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21207  0.1  1.6 400576 27940 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21224  0.1  1.2 400624 20768 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21225  0.1  1.6 400576 28468 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21226  0.1  1.6 400576 28048 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21228  0.1  1.4 400572 23880 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21237  0.1  1.5 400628 26124 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21265  0.1  1.6 400536 28592 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21276  0.1  1.2 400544 21456 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21277  0.1  1.3 400624 22676 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21278  0.1  1.6 400536 27360 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21282  0.1  1.4 400612 24996 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21292  0.1  1.4 400532 24780 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21302  0.2  1.2 400540 21332 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21303  0.1  1.3 400628 22228 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21305  0.2  1.2 400536 21116 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21306  0.1  1.3 400572 22380 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21307  0.1  1.1 397956 20056 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21308  0.1  1.2 400624 21520 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21319  0.1  1.1 400540 19468 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21320  0.1  1.3 400628 22712 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21335  0.1  1.0 400540 17236 ?        S    19:39   0:05 /usr/sbin/httpd
apache   21336  0.1  1.3 400628 22188 ?        S    19:39   0:06 /usr/sbin/httpd
apache   21352  0.1  1.1 394276 18972 ?        S    19:40   0:04 /usr/sbin/httpd
apache   21356  0.1  1.1 394280 19028 ?        S    19:40   0:05 /usr/sbin/httpd
apache   21358  0.1  1.1 394280 19004 ?        S    19:40   0:05 /usr/sbin/httpd
apache   21361  0.2  0.7 400452 12632 ?        S    19:40   0:06 /usr/sbin/httpd
apache   21610  0.2  1.6 400536 27660 ?        S    19:46   0:06 /usr/sbin/httpd
apache   21643  0.2  1.3 400156 23272 ?        S    19:55   0:04 /usr/sbin/httpd
apache   21647  0.2  1.0 400544 17556 ?        S    19:57   0:05 /usr/sbin/httpd
apache   21654  0.2  1.5 400188 26884 ?        S    19:58   0:05 /usr/sbin/httpd
apache   21719  0.3  1.9 400192 32264 ?        S    20:14   0:03 /usr/sbin/httpd
apache   21725  0.2  2.0 400044 35340 ?        S    20:15   0:03 /usr/sbin/httpd
apache   21738  0.0  0.8 257648 13792 ?        S    20:26   0:00 /usr/sbin/httpd 
```

任何人都可以知道为什么有这么多的httpd进程吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-02T02:54:51.040

### 使用 50% 的可用 RAM 进行测试：

您可以将 innodb_buffer_pool_size 降低到非常低，看看它是否有帮助：

```
#/etc/my.cnf 
innodb_buffer_pool_size = 1M 
```

经验法则是将 innodb_buffer_pool_size 设置为可用 RAM 的 50% 以进行低内存测试。这意味着您启动服务器和*除*MySQL InnoDB 之外的所有内容。看看你有多少内存。然后将其中的 50% 用于 InnoDB。

一次尝试多个低内存设置：

*   [http://paragasu.wordpress.com/2008/12/02/very-low-memory-mysql-5-mycnf-configuration/](http://paragasu.wordpress.com/2008/12/02/very-low-memory-mysql-5-mycnf-configuration/)

更可能的罪魁祸首是该服务器上的其他任何东西，例如网络服务器。

### 阿帕奇？

您使用的是 Apache 和/或其他网络服务器吗？如果是这样，请尝试减少其 RAM 使用量。例如，在 Apache conf 中，考虑像这样的低 RAM 设置：

```
StartServers 1
MinSpareServers 1
MaxSpareServers 5
MaxClients 5 
```

并限制这样的请求：

```
MaxRequestsPerChild 300 
```

然后重新启动 Apache。

### mod_wsgi：

如果您使用带有 mod_python 的 Apache，请切换到带有 mod_wsgi 的 Apache。

### 皮普勒：

如果它仍在发生，可能你的 Django 正在稳步增长。尝试使用 Pymler 进行 Django 内存分析：

*   [http://www.rkblog.rk.edu.pl/w/p/profiling-django-object-size-and-memory-usage-pympler/](http://www.rkblog.rk.edu.pl/w/p/profiling-django-object-size-and-memory-usage-pympler/)

### 特区：

您对每天一次故障和每周一次故障的报告可能指向某种每天或每周运行的 cron 作业。例如，可能存在占用大量 RAM 的批处理或数据库转储等。

要在 MySQL 死亡前一小时跟踪 RAM 使用并查找 RAM 峰值，请查看 SAR，这是一个很棒的工具：[http ://www.thegeekstuff.com/2011/03/sar-examples/](http://www.thegeekstuff.com/2011/03/sar-examples/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T18:13:35.423

您必须减少 innodb_buffer_pool_size = <60-80% 的主内存）

Innodb 错误的解决方案：

```
110603  7:34:15 [ERROR] Plugin ‘InnoDB’ init function returned error.
110603  7:34:15 [ERROR] Plugin ‘InnoDB’ registration as a STORAGE ENGINE failed.
110603  7:34:15 [ERROR] Unknown/unsupported storage engine: InnoDB
110603  7:34:15 [ERROR] Aborting

10603  7:34:15 [Note] /usr/sbin/mysqld: Shutdown complete

I moved the ib_logfile0 and ib_logfile01 to bak and start Mysql again. Now this time, it is working fine

[root@xxx mysql]# mv ib_logfile0 ib_logfile0-bak
[root@xxx mysql]# mv ib_logfile1 ib_logfile1-bak 
```

来源：[http ://www.onaxer.com/tag/error-plugin-innodb-init-function-returned-error/](http://www.onaxer.com/tag/error-plugin-innodb-init-function-returned-error/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T06:29:26.173

就像其他人提到的那样，问题似乎是您的系统在 RAM 上运行不足，因此 MySQL 正在崩溃。以下是如何缩小系统内存的使用范围以及如何从数据库故障中恢复。

看看[collectd](http://collectd.org/index.shtml)及其插件。一些适用的可能是[processes plugin](http://collectd.org/wiki/index.php/Plugin%3aProcesses)和[memory plugin](http://collectd.org/wiki/index.php/Plugin%3aMemory)。通过这些，您可以查看系统的内存使用情况以及哪些进程占用了大部分内存。

根据您运行 Django 的方式，您可以将工作进程配置为仅处理一定数量的请求然后终止。这样，如果您的应用程序中存在某种内存泄漏，它将不会持续超过该数量的请求。例如，如果您使用[Gunicorn](http://gunicorn.org/)，则可以使用[--max-requests](http://gunicorn.org/configure.html#max-requests)选项。将其设置为 500 将在处理 500 个请求后删除工作人员。

以上结合统计数据收集将向您展示一些有趣的内存使用趋势。

至于数据库宕机，您可以设置进程监督，这样如果 MySQL 确实死了，它将自动重新启动。最新版本的 Ubuntu 中的 MySQL 使用 Upstart 来做到这一点。如果进程终止，Upstart 将立即将其恢复。如果您使用的另一个发行版没有内置此功能，请查看[Supervisor](http://supervisord.org/)。虽然这并不能解决问题，但至少会减轻其影响。这不应该被视为解决方法，而是一种让您的应用程序保持运行以防出现问题的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-09T13:21:41.193

一旦我陷入类似的问题，我真的很沮丧，因为我的用户看到这条丑陋的消息**Error Establishing DB Connection**。[我发现这个 repo](https://github.com/sierracircle/services-checker)对我来说就像一个魅力（暂时），而不是解决确切的问题。之后，我的朋友对其进行了调试，他通过一些配置更改对我的服务器进行了微调。但是我仍然每 10 分钟将此脚本添加到我的 crontab 中，然后检查服务器是否崩溃（对于我的情况，每当我在服务器上运行 VNCServer 时最终崩溃），然后重新启动它

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-15T08:32:24.823

I found answer adds on this discussion and worked for me: [https://www.digitalocean.com/community/questions/mysql-server-keeps-stopping-unexpectedly?answer=26016](https://www.digitalocean.com/community/questions/mysql-server-keeps-stopping-unexpectedly?answer=26016)

you have to do both `innodb_buffer_pool_size` to something reasonable like **32M** on `my.conf` in `/etc/mysql/my.cnf`, and you also may need to modify `/etc/apache2/mods-enabled/mpm_prefork.conf` to reduce the number of connections started by apache;

```
<IfModule mpm_prefork_module>
    StartServers     3
    MinSpareServers  3
    MaxSpareServers  5
    MaxRequestWorkers 25
    MaxConnectionsPerChild  0
</IfModule> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-21T10:10:50.223

通过添加新的交换空间来增加可用 RAM 也可能有所帮助。步骤在[这里](https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04)

确保创建的 /swapfile 的大小小于显示的可用空间

```
df -h 
```

例如对我来说 df- h 的输出是：

```
Filesystem      Size  Used Avail Use% Mounted on
/dev/xvda1      7.8G  1.2G  6.3G  16% /
none            4.0K     0  4.0K   0% /sys/fs/cgroup
udev            492M   12K  492M   1% /dev
tmpfs           100M  336K   99M   1% /run 
```

所以我用 2 G 创建

```
sudo fallocate -l 2G /swapfile 
```

然后只需启动服务

```
sudo /etc/init.d/mysql restart 
```

希望这可以帮助。一切顺利。

# java - 扩展 log4j 记录器

> ID：12114749
> 
> 赞同：0
> 
> 时间：2012-08-24T18:24:12.310
> 
> 标签：java, log4j

我有开箱即用大量使用 log4j 的应用程序。这使用了许多第三方 API。其中一些第三方 API 完全破解了我们的记录器并清除了我们的附加程序，有时完全使用不同的配置进行了初始化，我们完全失去了我们的日志记录功能！

任何想法为什么 log4j 可以如此容易地被黑客入侵？如果我们需要解决这个问题，我们必须重新编写 log4j 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:30:12.430

您可以尝试将记录器放入不同的类加载器中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:19:09.190

我会寻求在启动时配置 log4j 的解决方案，参考正确的位置。这应该是可行的：

*   要么使用@Mark在这里提到的方法：[How to force log4j load xml config from non src folder？](https://stackoverflow.com/questions/6689887/how-to-force-log4j-load-xml-config-from-non-src-folder)
*   或@Jon7 这里的一个：[How to force log4j load xml config from non src folder？](https://stackoverflow.com/questions/6689887/how-to-force-log4j-load-xml-config-from-non-src-folder)
*   或者通过上面提到的方法：[配置 Log4j 属性路径的最佳实践](https://stackoverflow.com/questions/4825414/best-practice-on-configuring-log4j-properties-path)

我会一一试一试，看看这些是否能解决问题。

唯一的问题是，如果您有多个这样的配置文件，如果 1.st 方法是您的方式，您可能需要调用`resetConfiguration()`prio to `configure()`，正如 javadoc 所说：“现有配置不会被清除或重置。”

您可能需要为此调用prio：

```
LogManager.resetConfiguration() 
```

所以要么：

```
LogManager.resetConfiguration();
DOMConfigurator.configure("/path/to/log4j.xml"); 
```

或者：

```
LogManager.resetConfiguration();
PropertyConfigurator.configure("/path/to/log4j.properties"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:39:00.747

Log4J 很容易被“黑”，因为它无法区分预期配置 log4j 的应用程序配置和一些不了解 log4j 基础知识并在库中配置它的库开发人员。

我认为你有几个选择：

1.  找出您的库何时会破坏 log4j 配置，并确保之后覆盖该配置。

2.  提交错误库的错误，如果是开源的，您甚至可以自己提交补丁，并带有使用该补丁的附加选项，无论它是否包含在官方发行版中。

3.  让应用程序中加载 Log4J 类的所有内容都使用特殊的类加载器，例如通过使用 OSGI 或构建您自己的 LoggerFactory，后者使用特殊的类加载器加载 log4j LoggerFactory。该库显然不会这样做，从而获得他们自己的一组 Log4J 类，并且他们对配置所做的任何事情都不会影响您。

# oop - 为什么代理和经理被认为是糟糕的 OO 设计

> ID：12114752
> 
> 赞同：6
> 
> 时间：2012-08-24T18:24:23.670
> 
> 标签：oop, object

早在 90 年代初期，我就参与了一个系统的设计和实现，该系统包括许多“代理”类。该系统运行良好且可合理维护。现在，我正在与新工作环境中的人们争论，他们声称“对象应该是名词”。有没有很好的文章解释为什么代理是一个坏主意？以及更详细地将代理与对象区别开来（我明白了一般的想法，但具体是什么被弃用了？）

最好不要整本书：我刚刚开始阅读 Bertrand Meyer 关于面向对象软件构建的书，这需要一些时间才能读完。

根据 Tomasz 和 Niko 的评论，我更改了主题行（从请求指向文章的指针），现在邀请人们直接回答而不是指向文章。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T22:57:35.760

OOP 就是将状态和相关行为封装在一起。

代理、经理和助手往往没有状态；它们通常只是一组对某些输入数据进行操作的方法。这样的代码也有大量的 getter 和 setter，因为数据对象太笨了，不能自己做任何事情。这不是 OOP，它是过程编程。

好的 OO 设计围绕着告诉对象要做什么而不是向他们询问数据然后用它做某事。每当您调用 getter 时，问问自己是否可以让对象直接执行操作。例如，不要这样做：

```
account.setBalance(account.getBalance() + x); 
```

尝试做：

```
account.deposit(x); 
```

请注意，在某些情况下，人们可能会以策略或服务对象的形式使用类似代理的对象，但如果使用得当，它们不会破坏封装。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T18:53:08.187

维基百科说

> 面向代理的编程 (AOP) 是一种编程范式，其中软件的构建以软件代理的概念为中心。与以对象（提供具有可变参数的方法）为核心的面向对象编程相反（[http://en.wikipedia.org/wiki/Active_object](http://en.wikipedia.org/wiki/Active_object)）

但是，我不认为 AOP 与 OOP 是分开的，我个人使用 JADE（[http://jade.tilab.com/](http://jade.tilab.com/)，这是实现 FIPA 标准的最著名的框架之一（[http://www.fipa.com/）。组织](http://www.fipa.org)) 并且据我所知，JADE 代理可以拥有可以利用来执行复杂功能的对象（作为 java 类的实例）。在这个意义上，代理的概念类似于活动对象的概念（http://en.wikipedia.org/wiki/Active_object）。主要区别在于代理在黄页注册表中发布了他们提供的服务的描述，并且能够通过共享语言（可能基于本体）进行通信。还可以提供移动性，以便正在运行的代理可以迁移到保留其执行状态的不同设备。然而，这种复杂性可以在 Thread 的顶部实现，从而扩展了 OO 范式，而不是与之形成对比。

1990 年，Yoav Shoham 在他的人工智能研究中首次使用了代理的概念。

在此链接[http://www.infor.uva.es/~cllamas/MAS/AOP-Shoham.pdf](http://www.infor.uva.es/~cllamas/MAS/AOP-Shoham.pdf)中，您可以找到 Shoham 出版物的摘录，其中他说

> 而 OOP 建议将计算系统视为由能够相互通信并具有处理传入消息的单独方式的模块组成，而 AOP 通过固定模块的状态（现在称为心理状态）（现在称为代理）由精确定义的成分组成，这些成分称为信念（包括关于世界的信念、关于自身的信念和关于一个事物的信念）、能力、选择，以及可能的类似规范。Compurarion 包括这些代理人的告​​知、请求、提供、接受、拒绝、竞争和帮助。这个想法直接来自言语行​​为文献（Grice 1989；Searle 1969；Austin 1962）。

关键词是 AOP**专门**化了 OOP 框架。因此，正如我所说，它扩展了 OOP（虽然不一定以一种好的方式）。我猜你可能想要使用这种架构，它的设计和实现都非常好，当你处理可能需要扩展以应对高度可变的任务的计算密集型系统时。在其他情况下，AOP 可能会过度杀伤力，但这取决于您的设计师/架构师的敏感性。

# google-chrome - 从 chrome 扩展读取 iframe 内容

> ID：12114753
> 
> 赞同：1
> 
> 时间：2012-08-24T18:24:26.473
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试在 iframe 中加载 iframe.html 并将该 iframe 从我的 chrome 扩展程序附加到当前页面的 DOM 中。我已经这样做了，我能够处理点击事件，获取框架元素值（输入，选择框）。到这里为止一切都很好。现在的问题是，一旦将 iframe.html 中的内容插入 DOM，我就无法修改它（更具体地说，我在 iframe.html [附加到 DOM] 中有一个输入框，其值为“XXXX”，现在我想在用户单击我的扩展程序的上下文菜单时将其更改为“YYYY”）。

我试图通过使用获取输入框值

```
$('#iframe_id').contents().find('input#input_id').val('YYYY')
(or)
window.frames['iframe_id'].document.getElementId('input_id').value 
```

在我的 content.js 中，但没有帮助。

```
console.log($('#iframe_id')) 
```

在控制台中打印 iframe 对象但无法获取 iframe 文档内容。这是获取/修改由 chrome 扩展插入的 iframe 内容的正确方法吗？还是我在 chrome.* API 中遗漏了一些东西

有关如何解决此问题的任何指示都会更有帮助。

TIA，贾加迪什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:55:15.690

我相信您遇到了问题，因为 iframe 和顶级页面的域和协议不匹配。这是一个页面安全限制。如果这确实描述了您的问题，您可以使用 iframe postMessage API 解决限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:23:20.163

正如 Mike Grace 所提到的，我插入了 html 而不是 iframe 并构建了 css，以便它可以在任何网页中工作。从长远来看，这将是一个更好的方法。

# iphone - 按日期以编程方式访问 Yahoo Finance 的货币汇率

> ID：12114754
> 
> 赞同：14
> 
> 时间：2012-08-24T18:24:30.750
> 
> 标签：iphone, currency, finance, yahoo-finance

我发现[这个问题的答案非常有用](https://stackoverflow.com/questions/181990/programmatically-access-currency-exchange-rates)，但我还想获得过去日期的汇率，而不仅仅是今天的汇率。我正在编写一个 iPhone 应用程序，它使用汇率来计算不同国家/地区的销售额。

以下是上述答案的示例，用于获取今天英镑兑欧元的汇率：http: [//download.finance.yahoo.com/d/quotes.csv ?s=GBPEUR=X&f=sl1d1t1ba&e=.csv](http://download.finance.yahoo.com/d/quotes.csv?s=GBPEUR=X&f=sl1d1t1ba&e=.csv)

有谁知道如何在任何其他日期执行此操作？谢谢你！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-24T19:55:08.693

要检索货币汇率的历史数据，您不能使用雅虎财经。他们的 API 只提供股票的历史数据。例如对于 2003 年 4 月 1 日至 7 月 30 日之间的 APPLE：

`http://ichart.finance.yahoo.com/table.csv?s=AAPL&a=3&b=1&c=2003&d=6&e=30&f=2003&g=d&ignore=.csv`

因此，在您的情况下，您需要在其他地方进行挖掘。唯一可用的其他主要 API 是 OpenExchangeRate： http: [//openexchangerates.org/documentation#historical-data](http://openexchangerates.org/documentation#historical-data)

**注意：**

> 重要提示：从 2012 年 8 月开始，您将需要一个 App ID 来查询 Open Exchange Rates API - 它对个人使用免费，对应用程序和商业用途而言价格低廉。

## **其他选项：**

您可以使用这个：[免费的外汇历史数据](http://www.global-view.com/forex-trading-tools/forex-history/index.html)，然后每天（在您方便的时候）使用 Yahoo Finance（[货币汇率）来构建一个包含您所需的所有货币汇率的最新表格。](http://download.finance.yahoo.com/d/quotes.csv?s=GBPEUR=X,EURCHF=X,EURCAD=X,USDEUR=X,EURJPY=X&f=sl1d1t1ba&e=.csv)

# 编辑

美联储为您提供多种货币汇率的历史数据。请参阅[数据下载程序](http://www.federalreserve.gov/datadownload/Download.aspx?rel=H10&series=a6a0113179fdeb9c6fbcdc18575ec09c&filetype=csv&label=include&layout=seriescolumn&from=01/01/2000&to=08/01/2012)以检索（csv、xls、xml）历史数据。您可以根据自己的需要进行调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-06T23:02:15.830

实际上，有一种方法可以从雅虎财经免费获取汇率历史数据。

示例 YQL 控制台结果（例如 2015 年 9 月 3 日的美元/欧元汇率），网址为： [https ://developer.yahoo.com/yql/console/?q=show%20tables&env=store://datatables.org/ alltableswithkeys#h=select+*+from+yahoo.finance.historicaldata+where+symbol+%3D+%22EUR%3DX%22+and+startDate+%3D+%222015-09-03%22+and+endDate+%3D+%222015-09 -03%22](https://developer.yahoo.com/yql/console/?q=show%20tables&env=store://datatables.org/alltableswithkeys#h=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22EUR%3DX%22%20and%20startDate%20%3D%20%222015-09-03%22%20and%20endDate%20%3D%20%222015-09-03%22)

对应直接链接 [https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22UAH%3DX%22% 20and%20startDate%20%3D%20%222015-09-03%22%20and%20endDate%20%3D%20%222015-09-03%22&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org% 2Falltableswithkeys&callback=](https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22UAH%3DX%22%20and%20startDate%20%3D%20%222015-09-03%22%20and%20endDate%20%3D%20%222015-09-03%22&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=)

或通过 YQL 查询，如

```
select * from yahoo.finance.historicaldata where symbol = "EUR=X" and startDate = "2015-09-03" and endDate = "2015-09-03" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T06:04:16.080

您也可以将[ichart.finance](http://ichart.finance.yahoo.com)用于货币。就像 Romain 建议的股票一样使用它。例如，对于美元兑韩元，`KRW=X`在查询中使用符号“”，即`s=AAPL`使用代替`s=KRW=X`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-23T09:29:43.927

如果您想使用 JSON API，那么我建议您[使用这个 Forex Exchange API](http://rate-exchange.herokuapp.com/fetchRate?from=CAD&to=USD)，它使用的是 Yahoo Finance 汇率。

我已经为我的少数客户实现了这一点，到目前为止，尽管它是免费的货币兑换 API，但该货币兑换 API 尚未报告任何问题。

# javascript - 是否可以从子对象的函数中隐式引用父对象的成员？

> ID：12114756
> 
> 赞同：1
> 
> 时间：2012-08-24T18:24:41.927
> 
> 标签：javascript

有没有办法在不通过实例名称显式调用父对象的情况下引用父对象的成员？在下面的示例中，语句`this.me`引用 的`me`成员`child`。我知道我可以做类似的事情`var who = obj.me`，但我很好奇是否有更隐含的方法来解决这个问题？

```
var obj = {
    me: 'obj',
    child: {
        me: 'child',
        init: function() {
            var p = document.getElementById('console');
            var who = this.me;
            p.innerHTML = who;
        }
    }
};

obj.child.init(); 
```

[http://jsfiddle.net/3CQ8f/4/](http://jsfiddle.net/3CQ8f/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:30:19.137

我认为没有内置的方法可以做到这一点，但您可以在对象定义中创建对父级的引用：

```
var obj = {
    me: 'obj'
};

obj.child = {
    me: 'child',
    parent: obj,
    init: function() {
        var p = document.getElementById('console');
        var who = this.parent.me;
        p.innerHTML = who;
    }
}; 
```

# android - 隐藏 WebView 的顶部

> ID：12114767
> 
> 赞同：0
> 
> 时间：2012-08-24T18:25:54.400
> 
> 标签：android, webview, hide, area

我正在处理一个 webview，它显示一个网页，顶部有一个我想隐藏的搜索栏。有什么方法可以在不使用 css 的情况下让前 50 px 左右消失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:30:26.827

您可以在 webview 的那部分顶部放置一个彩色矩形视图（取决于是否有滚动）

# jquery - 在 jQuery 1.7 中使用 jeditable 和 on() 从按钮编辑新添加的行

> ID：12114768
> 
> 赞同：0
> 
> 时间：2012-08-24T18:25:57.403
> 
> 标签：jquery, datatables, jeditable

我有一个数据表，我从表顶部的按钮添加行。我也可以选择行。我还希望能够编辑这些选定的行，即使它们是新添加的。即使是新添加的，我也会使用类似的方法来选择一行。

```
$("table").on("click", 'tr', {someinfo}, this.onRowSelected); 
```

我想做类似的事情来编辑选定的行。所以我有一个编辑按钮，当我按下它时，我希望所选行准备好编辑（使用 jeditable）。我已经看到[Jeditable - 通过单击 Y 来激活 X 的编辑](https://stackoverflow.com/questions/366595/jeditable-activate-edit-of-x-by-clicking-on-y?lq=1)，但我似乎无法弄清楚如何处理`.editable()`. 由于`.editable()`需要实时，我想用`.on()`它来添加它。有谁知道它的语法是什么样的？

这是[jsfiddle上的代码](http://jsfiddle.net/darthghandi/xVuTV/27/ "摆弄")

除了可编辑的东西外，一切都很好。有任何想法吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:43:29.447

我想通了。在一个更有经验的 javascript 人的帮助下，我想出了这些事情：

1.  `.editable()`需要在事件触发之前完成。
2.  `.trigger()`需要从具有`editable()`.

这是一个更新的[小提琴](http://jsfiddle.net/darthghandi/xVuTV/40/)，除了在编辑后更新（我只是在玩 JSON 的东西。这是一个小提琴不是吗？）

# objective-c - 如何区分系统进程 PID 和用户进程 PID？

> ID：12114771
> 
> 赞同：1
> 
> 时间：2012-08-24T18:26:13.160
> 
> 标签：objective-c, macos, unix

在 OSX 上使用 Objective-c 如何区分用户应用程序（即 Safari）和系统进程的 PID？（即推出）

我基本上需要能够将 PID 作为输入并显示它是用户应用程序还是系统进程作为输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:35:16.567

我同意 twalberg 的所有评论。

`ps -ef`您可以通过从命令行查看 run 的输出来操作您的理解。（终端.app）。

您可以`ps -ef | grep -i safari`查看是否返回了任何独特的东西。其他“用户”应用程序也是如此。

也试试

```
ps -ef| awk '{print $1}' | sort | uniq -c 
```

查看所有流程的所有权分布情况。

在您花时间尝试在 Objective-c 中编写代码之前，请先了解这一点。

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:51:10.760

PID 不是用来区分“用户”和“系统”进程的。区别因素是谁（哪个用户帐户）启动了它以及它是如何/在哪里/何时启动的。在 Linux 上（其他类 Unix 操作系统，包括 OSX，并没有太大不同），在“root”帐户或一定数量的其他特殊用途帐户下运行的东西可以松散地被认为是“系统”进程，而那些由与实际人类用户相对应的帐户将被视为“用户”进程，但界限非常模糊。它可能不像你想象的那么有用……

# wpf - Keydown 事件：如何捕获向下和向上键行？

> ID：12114774
> 
> 赞同：4
> 
> 时间：2012-08-24T18:26:18.800
> 
> 标签：wpf, events, mvvm-light

我正在尝试捕获向下和向上键（方向行）但是当我按下此键时，它不会引发事件 keydown。

但是，如果我按任何其他键，则会引发事件。例如 numlock 被捕获。行键是特殊键吗？

我正在使用 MVVMLight 将事件转换为命令，并传递 KeyEventArgs。

谢谢。

编辑：添加一些代码

出色地。我真的有一个组合框，并且是可编辑的，所以我可以在组合框内写文本。如何启用搜索选项，在我写作时，选择发生了变化。

所以选择可能会因多种原因而改变：我写了，comboBox 会因为搜索选项而改变选择，我可以用鼠标改变选择，也可以用箭头键改变选择。

我想知道选择更改的原因是什么。所以我需要知道我什么时候在我的组合框中按下或向上箭头键。

我有这个代码：

AXML

```
<ComboBox DisplayMemberPath="Type" Height="23" HorizontalAlignment="Left" IsSynchronizedWithCurrentItem="True" Margin="0,16,0,0" Name="cmbType" VerticalAlignment="Top" Width="238"
            ItemsSource="{Binding Path=Types}"
            SelectedIndex="{Binding Path=TypesIndex}" IsEditable="True"
            Text="{Binding TypesText}">

            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewKeyDown">
                    <cmd:EventToCommand Command="{Binding TypesPreviewKeyDownCommand, Mode=OneWay}" PassEventArgsToCommand="True" />
                </i:EventTrigger>    
                <i:EventTrigger EventName="SelectionChanged">
                    <cmd:EventToCommand Command="{Binding TypesSelectionChangedCommand, Mode=OneWay}" CommandParameter="{Binding ElementName=cmbTypes, Path=SelectedItems}" />
                </i:EventTrigger>    
            </i:Interaction.Triggers>
        </ComboBox> 
```

在我的视图模型中：

```
private RelayCommand<KeyEventArgs> _typesPreviewKeyDownCommand = null;
        public RelayCommand<KeyEventArgs> typesPreviewKeyDownCommand
        {
            get
            {
                if (_typesPreviewKeyDownCommand == null)
                {
                    _typesPreviewKeyDownCommand = new RelayCommand<KeyEventArgs>(typesPreviewKeyDownCommand);
                }
                return _typesPreviewKeyDownCommand;
            }
        }

private void typesPreviewKeyDownCommand(KeyEventArgs e)
        {
            if (e.Key == Key.Down || e.Key == Key.Up)
            {
                //my code
            }
            else
            {
                //more code
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-07T04:46:50.143

Not sure if relevant anymore, but here's an article on CodeProject which discusses a very similar issue/behaviour [Up/Down behavior on a DatePicker](http://www.codeproject.com/Tips/663143/Quick-intro-to-DatePicker-tricks-and-MVVM-thoughts)

It's very simple to handle in the Code Behind like the article suggests, but if you want to do it MVVM style, you need to go with the `i:Interaction` or `InputBindings`. I prefer the Interaction, since coupled with mvvm-light it seems to work better for me, while with the `InputBindings` I've found that up/down keys didn't work, while having a modifier like ALT would work.

As the comments said, it's probably being handled somewhere on the way before it gets to you. (this is why you'd like to use the `PreviewKeyDown` and not `KeyDown`).

# c# - 使用 Linq 中第一个 DDL 的值填充 DDL

> ID：12114776
> 
> 赞同：0
> 
> 时间：2012-08-24T18:26:33.753
> 
> 标签：c#, linq

我正在使用国家 DDL 中的文本填写州 DDL

```
 foreach (var VARIABLE in ProfileMasterDAL.bindcountry())
            {
                if (VARIABLE.ToString().Contains(DropDownList1.SelectedItem.Text))
                {
                    var query = from row in ProfileMasterDAL.bindstate().ToString()
                                where
                                    ProfileMasterDAL.bindstate().ToString().Contains(DropDownList1.SelectedItem.Text)
                                select row;
                    DropDownList2.DataSource = query;
                    DropDownList2.DataBind();
                }
            } 
```

但在查询中，我得到枚举没有产生任何结果，并且状态 DDL 为空。

```
 public static IEnumerable bindstate()
    {
        var states = from b in getdata().Descendants("state").SelectMany(state => state.Elements("text"))
        orderby (string) b
        select (string) b;

        return states;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:55:45.143

好的，所以根据评论和对您问题的更新，我认为这就是您想要的：

```
foreach (var VARIABLE in ProfileMasterDAL.bindcountry())
{
    if (VARIABLE.ToString().Contains(DropDownList1.SelectedItem.Text))
    {
        var query = from row in ProfileMasterDAL.bindstate()
                    where row.Contains(DropDownList1.SelectedItem.Text)
                    select row;
        DropDownList2.DataSource = query;
        DropDownList2.DataBind();
    }
} 
```

# entity-framework - 使用存在种子问题的 EF 数据迁移

> ID：12114779
> 
> 赞同：1
> 
> 时间：2012-08-24T18:26:51.367
> 
> 标签：entity-framework

我正在使用数据迁移，并且在我的种子方法中，我正在尝试为教育应用程序播种一个类条目。我已经成功地播种了我的教师对象，现在我正在尝试查看我的 Classes 对象。我想匹配老师和班级名称，并根据需要添加或更新。但是，在执行数据库更新时，以下代码行出现错误。

```
context.Classes.AddOrUpdate(c => new { c.Teacher, c.Name },
   new Class { Teacher = context.Teachers.Where(t => t.LastName == "Smith").First(), Name = "2nd Grade" }
); 
```

错误信息：

```
System.NotSupportedException: Unable to create a constant value of type 'System.Data.Entity.DynamicProxies.Teacher_1D51D38A8AE43965E18EC50416D4BEA3D0F01817052D6D72EAEB1EFF88235B9B'. Only primitive types or enumeration types are supported in this context.
   at System.Data.Objects.ELinq.ExpressionConverter.ConstantTranslator.TypedTranslate(ExpressionConverter parent, ConstantExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.EqualsTranslator.TypedTranslate(ExpressionConverter parent, BinaryExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.BinaryTranslator.TypedTranslate(ExpressionConverter parent, BinaryExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.FirstPredicateTranslatorBase.Translate(ExpressionConverter parent, MethodCallExpression call)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SinglePredicateTranslatorBase.Translate(ExpressionConverter parent, MethodCallExpression call)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.Convert()
   at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
   at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__2[TResult](IEnumerable`1 sequence)
   at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
   at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)
   at System.Data.Entity.Internal.Linq.DbQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at System.Data.Entity.Migrations.IDbSetExtensions.AddOrUpdate[TEntity](DbSet`1 set, IEnumerable`1 identifyingProperties, TEntity[] entities)
   at System.Data.Entity.Migrations.IDbSetExtensions.AddOrUpdate[TEntity](IDbSet`1 set, Expression`1 identifierExpression, TEntity[] entities)
   at LeafyGradeBook.Web.Migrations.Configuration.Seed(GradebookDb context) in c:\Users\LocalRyan\Documents\Visual Studio 2012\Projects\LeafyGradeBook\LeafyGradeBook.Web\Migrations\Configuration.cs:line 38
   at System.Data.Entity.Migrations.DbMigrationsConfiguration`1.OnSeed(DbContext context)
   at System.Data.Entity.Migrations.DbMigrator.SeedDatabase()
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.SeedDatabase()
   at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Unable to create a constant value of type 'System.Data.Entity.DynamicProxies.Teacher_1D51D38A8AE43965E18EC50416D4BEA3D0F01817052D6D72EAEB1EFF88235B9B'. Only primitive types or enumeration types are supported in this context. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:13:26.903

将其一分为二，并使用 Id 而不是`Teacher`来识别现有数据：

```
var teacher = context.Teachers.Where(t => t.LastName == "Smith").First();
context.Classes.AddOrUpdate(c => new { c.TeacherId, c.Name },
   new Class { Teacher = teacher, Name = "2nd Grade" }
); 
```

# algorithm - T-SQL 自定义函数 (SQL Server 2000)

> ID：12114783
> 
> 赞同：2
> 
> 时间：2012-08-24T18:27:18.370
> 
> 标签：algorithm, tsql

我有一个 15 位数的客户编号，我需要计算该值的校验位。为了得出校验位，我使用 Excel（公式如下）。

这个公式基于一种叫做 Luhn 算法的东西（我认为这是正确的拼写）。15 位客户编号存储在 SQL Server 2000 数据库中。

我希望能够使用 T-SQL 函数而不是 Excel 来进行此计算。有谁知道如何在 SQL Server 2000 数据库上使用 T-SQL 来做到这一点？

Excel 公式将给我一个 15 位数字的校验位：

```
=MOD(SUMPRODUCT(-MID(TEXT(MID(A2,ROW(INDIRECT("1:"&LEN(A2))),1)*(MOD(ROW(INDIRECT("1:"&LEN(A2)))+LEN(A2)+1,2)+1),"00"),{1,2},1)),10) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:17:12.910

```
CREATE FUNCTION dbo.fnGetLuhn
(
    @Luhn VARCHAR(7999)
)
RETURNS VARCHAR(8000)
AS
BEGIN
    IF @Luhn LIKE '%[^0-9]%'
        RETURN @Luhn

    DECLARE @Index SMALLINT,
        @Multiplier TINYINT,
        @Sum INT,
        @Plus TINYINT

    SELECT  @Index = LEN(@Luhn),
        @Multiplier = 2,
        @Sum = 0

    WHILE @Index >= 1
        SELECT  @Plus = @Multiplier * CAST(SUBSTRING(@Luhn, @Index, 1) AS TINYINT),
            @Multiplier = 3 - @Multiplier,
            @Sum = @Sum + @Plus / 10 + @Plus % 10,
            @Index = @Index - 1

    RETURN  @Luhn + CASE WHEN @Sum % 10 = 0 THEN '0' ELSE CAST(10 - @Sum % 10 AS CHAR) END
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:29:27.160

```
declare @strCode varchar(15)
select @strCode = '123456789012345'

select
sum 
(
    (convert(int,substring(@strCode,number,1))* ((number+1) % 2 + 1) ) % 10 + 
    (convert(int,substring(@strCode,number,1))* ((number+1) % 2 + 1) ) / 10
) * 9 % 10 as checkdigit
from master.dbo.spt_values 
where type='p' and number between 1 and len (@strCode) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T16:34:43.830

这是我用于 Luhn 数字计算的内容：

```
create FUNCTION dbo.[LuhnDigit]
(
    @input nvarchar(255)
)
RETURNS char
AS
begin

    declare @sum int = (
        select sum(comp/10+comp % 10) from (
            SELECT 
                (2-(n%2))*((ascii(substring(@input,@len-n,1))-48)  % 10) as comp 
            from  (SELECT row_number() over (order by (select 1))-1 as n  FROM sys.objects) as a
            where n<=@len
        ) as a
    )

    return cast((10 - (@sum % 10)) % 10 as char);
END 
```

即使对于非数字输入，此函数也会计算 Luhn 数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-31T11:41:12.663

我对 Luhn 算法的方法：

```
CREATE FUNCTION [dbo].[F_CHECK_LUHN] (@DATA VARCHAR(32)) 
RETURNS BIT AS 

BEGIN 
-- valeurs limites 
IF @DATA IS NULL OR @DATA = '' RETURN NULL; 

DECLARE @Cpt INT = 0;
declare @C CHAR(1);
declare @Chiffre integer=0;  
declare @Somme integer=0;
declare @parity integer;
set  @parity=LEN(@DATA) % 2;

WHILE @Cpt < LEN(@DATA)
BEGIN

   SET @C = SUBSTRING(@DATA, @Cpt+1, 1);

    IF @C NOT BETWEEN '0' AND '9' RETURN NULL;

    set @Chiffre=CAST(@C AS SMALLINT);

    if ((@Cpt % 2) =@parity)
    begin
    set @Chiffre=@Chiffre*2;

        if (@Chiffre>9)
        begin
        set @Chiffre=@Chiffre-9;
        end;

    end;

    set @Somme=@Somme+@Chiffre;

    SET @Cpt = @Cpt + 1;
END;

RETURN CASE WHEN @Somme % 10 = 0 THEN 1 ELSE 0 end ;

END; 
```

# jquery - 将过滤器添加到媒体库

> ID：12114784
> 
> 赞同：0
> 
> 时间：2012-08-24T18:27:24.663
> 
> 标签：jquery, xml

我在我的网站上使用这个媒体库：http: [//tympanus.net/Development/MultiMediaGallery/](http://tympanus.net/Development/MultiMediaGallery/) 它在我的 Wordpress 安装中没有问题，但我想添加一个下拉菜单以将媒体过滤到单独的“画廊”中”。我认为最好的方法是在 XML 中添加一个名为“gallery”的附加属性，然后为每个媒体项赋予相同的名称。我试图让这个工作，我修改了主 mediagallery.js 以将“gallery”属性分配给 id 标签（尽管由于某种原因分配所有 id 相同，即使当我通过 firebug 检查时数据解析正确，我目前正在研究这个）。下面是一些代码，但我的第一个问题是，这似乎是最好的方法吗？

这是我添加到主页（Wordpress 模板）的下拉菜单和 javascript：

```
 $(window).load(function() {
            $('.media_wrapper').hide();
  $('#dropdown').change(function() {
   $('.media_wrapper').hide();
$('#' + $(this).val()) && $('.media_wrapper')
.css('display','block');
  });
});

<form>
 <select id="dropdown" name="dropdown">
  <option value="0">Choose</option>
  <option value="sunsets">Sunsets</option>
  <option value="mountains">Mountains</option>
 </select>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:21:20.627

我喜欢我可以回答自己的问题！

无论如何，以防万一其他人希望能够向此媒体库添加过滤器 - 您向 xml 文件添加一个属性，确保它在 xsl 文件中，然后最后获取该属性并将其添加为一个类到每个媒体库项目的 li。然后简单地隐藏并显示该类的 li，瞧你有一个画廊过滤器。

# eclipse - Google CodePro 测试用例不会自动生成 easymock 对象

> ID：12114785
> 
> 赞同：1
> 
> 时间：2012-08-24T18:27:24.680
> 
> 标签：eclipse, unit-testing, mocking, easymock, codepro

我为 Eclipse Helios 安装了 google CodePro Analytix 工具，当我使用 code pro 生成单元测试时，它会生成单元测试，但不会生成接口的模拟对象，或者一般不会创建模拟对象，我确实有一些我的项目中出现错误，但如果那会是一个问题，我看不到它首先会如何生成单元测试。？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T23:59:39.290

Window→Preferences→CodePro→JUnit→Mock Objects 这是我的设置。在我的其他 Eclipse 工作区中，我通常有很多添加模式。我嘲笑一切接受 POJO（例如，DTO） ![Eclipse→Window→Preferences→CodePro→JUnit→Mock Objects](../Images/9ee5b4a5a15db76e402ca08e6f35cd06.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:27:37.213

您是否检查过此选项是否已启用？

Window > CodePro > JUnit > Mock Objects > 在生成的测试中使用模拟对象

# javascript - ExtJS 4.1 控制器处理树节点点击事件

> ID：12114786
> 
> 赞同：1
> 
> 时间：2012-08-24T18:27:31.933
> 
> 标签：javascript, extjs, controller, treepanel

遇到问题，不确定如何进行调试。发现一个看起来几乎和我一模一样的问题，但是解决方案不起作用：[如何从 ExtJs 4 中的 (MVC) 控制器捕获树节点点击？](https://stackoverflow.com/questions/6871293/how-to-catch-tree-node-clicks-from-a-mvc-controller-in-extjs-4)

我在该问题和我的问题之间看到的唯一区别是，我的树是直接在我的布局中作为项目对象创建的，使用`xtype`的`treepanel`是单独创建的项目对象。

这是我的控制器：

```
Ext.define("IOL.controller.app.AppLayout", {
    extend: 'Ext.app.Controller',
    init: function() {
        this.control({
            'app toolbar > button[itemId=filter]' : {
                click: this.onFilter
            },
            'menuTree': {
                itemclick: this.onFilter
            }
        });
    },

    onFilter: function(btn) {
        alert('test');
        Ext.create('IOL.view.app.Home').show();
    }

}); 
```

这是我认为的相关项目：

```
{
        xtype: 'treepanel',
        title: 'Navigation',
        split: true,
        collapsible: true,
        margins: '5 0 5 5',
        region: 'west',
        width: 170,
        id: 'menuTree',
        alias: 'widget.menuTree',
        store: Ext.create('IOL.store.app.AppNav'),
        useArrows: true,
        rootVisible: false
        /*listeners : {
            itemdblclick : function(view,rec,item,index,eventObj) {

                console.log(view);
                console.log(rec);
                console.log(item);
                console.log(index);
                console.log(eventObj);
                if(rec.get('leaf') == true){
                    Ext.ComponentQuery.query('tabpanel')[0].add({
                        xtype: 'panel',
                        title: rec.get('text'),
                        itemId: rec.get('id'),
                        //url: 'server/HomeTab/read.php',
                        html : 'test content name: ' + rec.get('id'),
                        closable : true
                    });
                }

            }
        }*/
    } 
```

该按钮的控件`app toolbar > button[itemId=filter]`有效，但是将相同的操作分配给“menuTree”不起作用。浏览器控制台带回了一个有效的对象，`Ext.getCmp('menuTree')`所以我不知道为什么控制器似乎没有在树上起作用。

树是从商店加载的，这让我想知道这是否与需要使用`.on('click')`而不是`.click()`在 jQuery 中使用的场景类似......几乎就像控制器没有看到树（但在同一个视图中看到按钮？）。我故意直接在树上注释掉了处理程序（这确实有效）。

如果有帮助，可以提供所有文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T19:24:15.363

Ext.getCmp() 通过*id*返回组件，而控制器使用 Ext.ComponentQuery.query() 语法来查找它们的组件；如此有效地你试图用不存在的 xtype menuTree 控制一个组件。您应该使用“#menuTree”或“treepanel”作为选择器。

# php - 使用 $_SESSION 超全局获取当前在线用户并稍后将其设置回当前会话数据是否不好？

> ID：12114789
> 
> 赞同：4
> 
> 时间：2012-08-24T18:27:34.723
> 
> 标签：php, mysql

我正在使用数据库来存储我的会话数据。我创建了一些函数来查询当前的活动会话并返回一些要在当前页面上使用的值。使用像“SELECT SessionData FROM UserSessions”这样的单个查询并返回查询返回的行数似乎很容易获得打开的会话数。

然后，我想确定哪些站点用户当前“在线”。会话存储正在查看网站的用户的用户 ID。我搜索了又搜索，似乎只找到了用于解码似乎是序列化数据的 session_decode 函数（但反序列化不起作用）。这里唯一的问题是 session_decode 会自动填充 $_SESSION 超全局变量。所以我的问题是，临时存储 $_SESSION 数据，对当前在线的每个用户使用 session_decode，然后将 $_SESSION 变量重置为临时存储的数据是不是“不好”？

```
function getLoggedInUsers() {
            //NEED SOME ERROR HANDLING AROUND DB STUFF
    $oConn = DB::connect(RF_DSN);

    $oPrep = $oConn->prepare("SELECT SessionData FROM UserSessions WHERE SessionData LIKE ?");

    $oRes = $oConn->execute($oPrep, array("%UserID%"));

    $aCurSession = $_SESSION; //STORE SESSION DATA TO RESET LATER

    $aLoggedInUsers = array();
    while ($oRow = $oRes->fetchRow(DB_FETCHMODE_ASSOC)) {
        if ($oRow == NULL) {
            break;
        }

        $_SESSION = array();

        session_decode($oRow["SessionData"]);

        $aLoggedInUsers[] = new User($_SESSION["UserID"]);

        $_SESSION = array();
    }

    $_SESSION = $aCurSession; //RESET SESSION DATA TO CURRENT ONLINE USER

    return $aLoggedInUsers;
} 
```

在我看来，这会起作用，但是是否有任何已知的情况可能会失败，然后当前用户最终会得到一些其他用户的会话数据，有效地以可能的管理员身份登录或其他什么？在我的 UserSessions 数据库中存储另一个字段来存放 UserID 或类似的东西会更好吗？

******编辑***** 我正在尝试显示所有当前登录用户（已在网站上注册并登录）的用户名。**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:46:15.743

我建议您在会话表中添加一列，该列在会话数据之外单独存储用户 ID。这样您就可以使用 SQL 来获取这样的名称。（使用假设的用户表）

```
SELECT UserTable.userName FROM SessionData
INNER JOIN UserTable
ON SessionData.userId = UserTable.id 
```

假设您正在使用另一个查询在预定时间段后清除旧会话，此查询将返回每个登录用户的当前会话数据以及包含其用户名的用户表中的用户行。

该`$_SESSION`数组应仅用于存储与用户当前会话相关的信息，而不是站点周围的其他会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:32:23.237

我不会对好坏进行价值判断，但肯定会有更简单的方法来做到这一点。最简单的方法是只拥有一个数据库表，您在每次访问页面时使用用户 ID 和时间戳进行更新，并`COUNT(*)`在最后 15 分钟左右执行一次。使用适当的索引，性能影响可以忽略不计

阅读您发布的一些评论以澄清您在做什么，您可以轻松地针对您的会话表执行此操作。由于“在线用户”并不是很重要，因此用户登录两次并拥有多个会话的可能性并不是那么重要。**

# asp.net-mvc - 是否可以根据路线在 MVC4 中使用不同的布局？

> ID：12114792
> 
> 赞同：6
> 
> 时间：2012-08-24T18:27:49.173
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, asp.net-mvc-areas

我的网站有一个单独的部分（路线），我想使用不同的布局/css等。

因此，当用户访问我网站的主要部分时，他们会获得默认布局。但是当他们登录并去商店时，商店部分（路线）使用不同的布局/css。

所以...

*   www.blahblahblah.com/
*   www.blahblahblah.com/admin/
*   www.blahblahblah.com/home/contactus/

...都使用默认的_Layout

但...

*   www.blahblahblah.com/store/
*   www.blahblahblah.com/store/admin/

...使用 _LayoutStore

我已经看到这是基于角色here（[http://forums.asp.net/t/1653362.aspx/1](http://forums.asp.net/t/1653362.aspx/1)）和here（[How to use multiple Layout in MVC 3?](https://stackoverflow.com/questions/9564955/how-to-use-multiple-layout-in-mvc-3)）但我不想去做。我需要根据客户采取的路线（也就是他们在里面的视图）来选择布局。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T18:31:42.943

您是否查看过使用`_ViewStart.cshtml`任何给定视图文件夹中的文件？

如果这不是您正在寻找的内容，并且您希望路由中的值确定要使用的布局，您可以尝试创建一些帮助方法来返回要使用的布局：

```
 public static class LayoutHelper
    {
        public static string GetLayout(RouteData data, string defaultLayout = "")
        {
            if (data.Values["action"] == "edit")
                return "~/views/shared/_AdminLayout.cshtml";

            return defaultLayout;
        }
    } 
```

然后你可以像这样从你的视图中调用它：

```
@{
    Layout = LayoutHelper.GetLayout(
        Request.RequestContext.RouteData,
        "~/views/shared/_layout.cshtml");
} 
```

但在我看来，如果你在包含商店布局`_ViewStart.cshtml`的文件夹中创建了一个文件，`Views/Store`你会很高兴。

# class - 从 region_id Magento 1.6.2 获取州名

> ID：12114797
> 
> 赞同：8
> 
> 时间：2012-08-24T18:28:11.713
> 
> 标签：class, magento

我需要在 Magento 1.6.2 中通过`region_id` 将`state name`.

我有`region_id`并且可以返回美国所有州的数组

```
$states = Mage::getModel('directory/country')->load('US')->getRegions(); 
```

但找不到将`region_id`.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-24T18:38:16.707

```
$regionId = 27;
$region = Mage::getModel('directory/region')->load($regionId);
echo $region->getName(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-25T14:19:30.153

这个片段

```
Mage::getModel('directory/region')->load(279); 
```

不适用于某些旧版本。例如 Magento 1.5，文件： **app/code/core/Mage/Adminhtml/Block/Widget/Grid.php**，第 1026 行，可以看到这样的注释：

```
//$region = Mage::getModel('directory/region')->load(279); //does not work!!!!
//$tmp_region= $region->getCode() ; 
```

然后是正确的代码（对于这个版本）：

```
$sql="select * from directory_country_region where region_id=".(int)$myOrder->getShippingAddress()->getRegionid();
$tmp_region = $readConnection->fetchAll($sql);  
$tmp_region=$tmp_region?$tmp_region[0]["default_name"]." (".$tmp_region[0]["code"] .")":""; 
```

# opencv - JavaCV中的缝合器

> ID：12114800
> 
> 赞同：1
> 
> 时间：2012-08-24T18:28:36.473
> 
> 标签：opencv, javacv

我正在尝试在 JavaCV 中使用 Stitcher 类。但是，我访问了 maven 存储库，但找不到 Stitcher 类。我还查看了源头，似乎也没有 Stitcher 类。我找错地方了吗？我正在访问 javacv、jaavcpp 和我的平台的 java 版本（windows 32 位）。

如果有人能告诉我在哪里可以获得 JavaCV 中的拼接器类，我将不胜感激！

问候，

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T18:38:48.207

它在 import com.googlecode.javacv.cpp.opencv_stitching.Stitcher 但 eclipse 找不到它

# sql-server-2008 - 局部变量与单行表

> ID：12114802
> 
> 赞同：0
> 
> 时间：2012-08-24T18:28:39.807
> 
> 标签：sql-server-2008, tsql, local-variables, temp-tables

使用 1 行表而不是局部变量是否会显着降低性能或产生其他不利影响？

代替：

```
Declare @DT date = getdate() 
```

利用：

```
Select convert(date, getdate()) as DT into #DT 
```

我想这样做的原因是为了代码测试。当我只想运行一段代码时，如果代码在 100 行以下但需要我的几个声明才能运行，这很烦人。

代替：

```
Line 104     select
Line 105        somecolumn
Line 106     where datadate = @DT

-- MUST DECLARE SCALAR @DT, EVEN THOUGH LINES 1-103 WERE PREVIOUSLY RUN 
```

利用：

```
Line 104     select
Line 105        somecolumn
Line 106     where datadate = (select DT from #DT)

-- NO ISSUE EXECUTING ONLY THESE 3 LINES, SINCE LINES 1-103 WERE PREVIOUSLY RUN 
```

我只需要知道这在执行时间和准确性方面是否相同。我知道子查询会一遍又一遍地运行，但是由于 #DT 是单行（和 1 列），什么时候会开始滞后？

# css - Bootstrap 手风琴未正确打开

> ID：12114806
> 
> 赞同：0
> 
> 时间：2012-08-24T18:28:48.450
> 
> 标签：css, jquery-plugins, twitter-bootstrap, accordion

这是我的代码。手风琴功能有点作用。

我希望在打开第二个手风琴 (class="in") 的情况下打开页面。

如果我单击“计划”，它就会消失，这很好。如果我单击“ToDo”，它会下拉，即使它已经打开。但是再次单击它会使其消失。啊。它只是不以第二个面板作为默认打开。

```
 <div class="accordion" id="myAccordion">
            <div class="accordion-group">
                <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#myAccordion" href="#ToDo"> ToDo </a> </div>
                <div id="ToDo" class="accordion-body collapse" style="height: auto; ">
                    <div class="accordion-inner">
                        This is the first
                    </div>
                </div>
            </div>
            <div class="accordion-group">
                <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#myAccordion" href="#Schedule"> Schedule </a> </div>
                <div id="Schedule" class="accordion-body in collapse" style="height: auto; ">
                    <div class="accordion-inner">
                        this is the second
                    </div>
                </div>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:50:42.693

`#ToDo`尝试删除和上的内联样式`#Schedule`。`style="height: auto; "`从两者中删除。这些覆盖了`collapse`类的级联属性。

### [JSFiddle](http://jsfiddle.net/mmfansler/gFf6K/)

# spring - 在 getHibernateTemplate() 的情况下发生提交时

> ID：12114810
> 
> 赞同：4
> 
> 时间：2012-08-24T18:29:16.530
> 
> 标签：spring, hibernate

我在我的应用程序中使用 Spring Hibernate 集成，并且 DAO 类正在扩展`HibernateDaoSupport`。假设我使用代码`getHibernateTemplate().save(object)` 使用休眠模板保存了一些对象，我不需要显式提交事务。我想知道何时提交数据。

考虑下面的代码片段

```
public void saveObject(){
   .......
   getHibernateTemplate().save(object1);
   ....
   ....
   getHibernateTemplate().save(object2);
 } 
```

在上面的代码中，究竟在什么时候`object1`将插入到 DB..after`getHibernateTemplate().save(object1);`或方法的末尾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:09:24.473

这取决于事务管理器配置和/或刷新模式设置。 [http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/FlushMode.html](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/FlushMode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T15:15:04.797

你应该使用这个：

```
 @Override
    public void addAccount(Account account) {

        hibernateTemplate.getSessionFactory().getCurrentSession().beginTransaction();
        hibernateTemplate.saveOrUpdate(account);
        hibernateTemplate.getSessionFactory().getCurrentSession().getTransaction().commit();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T15:27:21.727

没有一个。

在默认配置中，`insert`语句在它们可以执行的最后时刻执行，我的意思是休眠将它们保持到事务结束，或者它应该的任何其他点（如果有`flush`命令，其他一些选择命令......）。

但是提交根本不依赖于此，提交只是在您（或 Spring！）提交事务时发生。所以这取决于你如何管理事务，如果你使用的是 Spring 的声明式事务管理，那么哪个方法具有事务属性，以及它获得什么属性是很重要的。

# c# - 仅当变量具有值时才在 Linq 中使用“where”语句

> ID：12114811
> 
> 赞同：0
> 
> 时间：2012-08-24T18:29:23.317
> 
> 标签：c#, asp.net, linq

我有一个正在创建列表的 linq 查询。我只想使用第二个`where`子句 if `affiliationID != 0`。有小费吗？

```
var associations = (from a in ftjent.Associations
                    join ap in ftjent.AssociationProducts on a.AssociationID equals ap.AssociationID
                    where ap.Product.Name == productName
                    where a.AffiliationID == affiliationID
                    select new
                        {
                            a.Acronym,
                            a.AssociationID,
                            a.Name
                         }
                     ).Distinct().OrderBy(assoc => assoc.Acronym); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:31:44.833

与 0比较`affiliationId`，如果它没有值，`where`则将始终评估为`true`，并且不会进行第二次比较：

```
var associations = (from a in ftjent.Associations
                join ap in ftjent.AssociationProducts on a.AssociationID equals ap.AssociationID
                where ap.Product.Name == productName
                where (affiliationId == 0) ||  a.AffiliationID == affiliationID
                select new
                    {
                        a.Acronym,
                        a.AssociationID,
                        a.Name
                     }
                 ).Distinct().OrderBy(assoc => assoc.Acronym); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:34:58.080

另一个选择：

```
var associations = (from a in ftjent.Associations
                join ap in ftjent.AssociationProducts on a.AssociationID equals   ap.AssociationID
                where ap.Product.Name == productName               
                select new
                    {
                        a.Acronym,
                        a.AssociationID,
                        a.Name,
                        a.AffiliationID //add AffilationID into the unknown type

                     }
                 ).Distinct().OrderBy(assoc => assoc.Acronym);

if(affilationID != 0)
     associations = associations.Where(a=>a.AffiliationID == affiliationID); 
```

这不是最短的代码，但它清楚地分离了流程。

选择是你的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:31:48.183

```
var associations = (from a in ftjent.Associations
                join ap in ftjent.AssociationProducts on a.AssociationID equals ap.AssociationID
                where ap.Product.Name == productName
                && (a.AffiliationID == affiliationID
                   || affiliationID == null || affiliationID == 0)
                select new
                    {
                        a.Acronym,
                        a.AssociationID,
                        a.Name
                     }
                 ).Distinct().OrderBy(assoc => assoc.Acronym); 
```

基本上，不是试图仅在条件下附加条件，而是对这些类型的问题（这是常见的，相信我）的通常解决方案是将条件的否定作为“或”，为查询提供替代；在这里，要么记录的 affiliationID 必须与条件匹配，要么条件值没有意义，因此所有记录的完整条件都为真。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T18:34:55.673

像您一样使用查询理解语法很难做到这一点，但您总是可以在使用查询理解语法进行查询之前提取逻辑并制作另一个 IQueryable。

```
var products = ftjent.AssociationProducts;
if (affiliationID != null)
    products = products.Where(x => x.AffiliationID = affiliationID);

var associations = (
    from a in ftjent.Associations
    join ap in products on a.AssociationID equals ap.AssociationID
    where ap.Product.Name == productName
    select new
    {
        a.Acronym,
        a.AssociationID,
        a.Name
    }
)
.Distinct()
.OrderBy(assoc => assoc.Acronym); 
```

# javascript - 单击时显示两个对象

> ID：12114812
> 
> 赞同：0
> 
> 时间：2012-08-24T18:29:28.713
> 
> 标签：javascript, jquery, html

嗨，我遇到一个问题，当我想显示一篇文章时，它会同时打开！

```
<span class='pres'><img src='http://files.appcheck.se/icons/minecraft.png' /></span><span class='info'><a href='/minecraft' class='title'/><strong>Minecraft</strong></a><span id='cat'>Spel</span><br />Minecraft, ett spel där många lever sig in i dess stora och häpnandsväckande värld. 
Det är en gigantisk värld uppbyggd av fyrkan<span class='readmore 14'><a href='javascript:void(0)'>Läs mer</a></span><span class='more 14'>tiga block som du hugga/hacka/gräva bort och bygga fantastiska hus och monement med, men se upp så att nått monster hoppar på dig.</span><div class='clear'></div></div>
</div>
<script>
$(".readmore a").click(function () {
$(this).remove();
$(".more").show(this);
});
</script> 
```

当单击其中一个 readmore 链接时，页面上的每个 .more 都会显示

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:41:21.003

尝试以下

```
$('.readmore a').click(function() {
    $(this).parent().next().show();
}); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/UeqTe/)

或者`toggle`如果您想在再次单击时隐藏，请使用。

```
$('.readmore a').click(function() {
    $(this).parent().next().toggle();
}); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/UeqTe/1/)

**更新**：点击后删除链接

```
$('.readmore a').click(function() {
    var $link = $(this);
    $link.parent().next().toggle();
    $link.remove();
}); 
```

[**演示**](http://jsfiddle.net/UeqTe/3/)

# objective-c - iOS：感知小型设备振动 - 例如睡眠监测应用

> ID：12114813
> 
> 赞同：0
> 
> 时间：2012-08-24T18:29:42.340
> 
> 标签：objective-c, ios, cocoa-touch, uiaccelerometer

我想让我的设备感应到微小的振动，例如轻微的震动或有人呼吸。我假设这是可能的，因为应用程序商店有许多“睡眠模式监视器”应用程序，并且他们有很好的评价。

有谁知道一种方法，使用加速度计或陀螺仪（或其他东西？）来感知这些微小的运动或振动？如果是这样，是否有示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:36:05.783

你可以看看

[http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html)

其中有一些关于做什么的例子。

在构建我的应用程序时，我需要设备方向，所以我订阅了`beginGeneratingDeviceOrientationNotifications`它是一种痛苦，因为它实际上会在 iPad 放在我的桌子上时发生的每一个轻微动作都会触发一个事件。从我只是稍微移动 iPad 到我在键盘上打字时，它在我的桌子上。我会调查这两个。

# html - 使 Bootstrap 元素居中跨设备兼容

> ID：12114818
> 
> 赞同：4
> 
> 时间：2012-08-24T18:30:03.897
> 
> 标签：html, css, web, twitter-bootstrap

社区，

我最近在寻找设计网页的可能性时偶然发现了 Twitter Bootstrap，但实际上却无法“设计”（coder-cliché，meh）。我非常喜欢它的即时交叉兼容性，并且由于该网站是在考虑博客的情况下计划的，我不认为它不可能被移动用户访问。

而那个特定的博客就是给我带来问题的原因。拥有一篇关于整个网格的博客文章（span12，宽度最大为 1170 像素）会创建一堵巨大的文字墙，会吓跑所有人。相反，我决定在 span6 中创建（至少是预览版），这对我来说似乎是合理的，并且对移动用户也很有效。但由于我不希望每行超过 1 个，因此我需要以某种方式将其居中，并且我更喜欢“引导方式”。

官方文档向我指出了 .offset* 类，它们在台式机上运行良好，但在切换到移动布局时会保留下来，从而在左侧造成难看的间隙。如果没有偏移，它在移动版本上没有问题（每行 1 个帖子，左右没有间隙），但在桌面上它是左对齐的。这里是代码的相关位：

无偏移，在移动设备上按预期工作：

```
<div class="row-fluid">
    <div class="span6">
        <h3>Blog Post #1 Title</h3>
        <h5>Category, Sub-Category - 01.01.1970</h5>
        <p>Lorem ipsum...</p>
    </div><!--/span6-->
</div><!--/row--> 
```

使用偏移，在桌面上按预期工作：

```
<div class="row-fluid">
    <div class="span6 offset3">
        <h3>Blog Post #1 Title</h3>
        <h5>Category, Sub-Category - 01.01.1970</h5>
        <p>Lorem ipsum...</p>
    </div><!--/span6-->
</div><!--/row--> 
```

有什么方法（没有 JavaScript！）让它表现得像我想要的那样（元素的交叉兼容居中，同时保持其中的所有文本左对齐）？我想我需要更改 bootstrap-responsive.css，但我想避免弄乱原始文件......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T14:54:59.783

不知何故，我刚刚有了一个想法，结果证明它工作得很好，没有使用任何 CSS 修改：

为了使用网格系统使元素居中，我们用占位符填充行的其余部分。对于我的*span6* -example 那将是

```
<div class="row-fluid">
    <div class="span3"></div>
    <div class="span6">
        <h3>Blog Post #1 Title</h3>
        <h5>Category, Sub-Category - 01.01.1970</h5>
        <p>Lorem ipsum...</p>
    </div>
    <div class="span3"></div>
</div> 
```

这导致台式机和平板电脑上的居中版本，以及手机上的全角版本。但是，由于布局流畅，在移动布局中会有空隙，因为空的 div 也占用了少量空间。但是由于这个问题只发生在手机上，我们可以通过将*hidden-phone* -class 添加到 placeholder-div 来避免它，如下所示：

```
<div class="row-fluid">
    <div class="span3 hidden-phone"></div>
    <div class="span6">
        <h3>Blog Post #1 Title</h3>
        <h5>Category, Sub-Category - 01.01.1970</h5>
        <p>Lorem ipsum...</p>
    </div>
    <div class="span3 hidden-phone"></div>
</div> 
```

最后，至少在 Bootstrap 版本 2.1.0 上，这就像我想要的那样工作......

# drupal - Drupal 通过关系对内容类型进行排序

> ID：12114819
> 
> 赞同：0
> 
> 时间：2012-08-24T18:30:05.827
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我是drupal的新手，一切似乎都在纠结。我有两种自定义内容类型。第一个被称为“设备” - 父母，第二个被称为“任务”，是孩子。我有一个设备列表，当我单击一个并转到它的页面时，如何仅为它创建一个自定义“任务”？感谢您提供的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:01:00.703

这不是你可以开箱即用的事情。但是 Drupal 最酷的一点是你不会被困在盒子里。

结帐：[http ://drupal.org/project/nodehierarchy](http://drupal.org/project/nodehierarchy)

它有一个 drupal 7 开发版本，可能工作得很好。

# javascript - 清除选择时选择选择插件“更改”事件

> ID：12114823
> 
> 赞同：2
> 
> 时间：2012-08-24T18:30:19.513
> 
> 标签：javascript, jquery, jquery-chosen

我正在使用 selected.js 选择插件，但遇到了一个我似乎无法弄清楚的问题。

当我选择一个选项时，它会按预期触发更改事件，然后我想重置我完成的所选控件，如下所示：

```
$('#myChosenControl').val('').trigger('liszt:updated'); 
```

问题是如果我再次选择相同的选项，更改事件不会触发，因为它认为值是相同的。

我做了一个小提琴来演示：

[http://jsfiddle.net/Zrb5y/15/](http://jsfiddle.net/Zrb5y/15/)

无论如何要完全重置所选的选择，以便在选择相同的选项时仍会触发更改事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:47:35.437

对于其他人来说，这里有一个解决方法：

[https://github.com/harvesthq/chosen/pull/667](https://github.com/harvesthq/chosen/pull/667)

# master-pages - Umbraco 重复主指令

> ID：12114827
> 
> 赞同：1
> 
> 时间：2012-08-24T18:30:33.027
> 
> 标签：master-pages, umbraco

每次我们在 umbraco 管理编辑器之外修改 umbraco 母版页时，我们都会使用以下指令包装整个母版页：

```
<%@ Master Language="C#" MasterPageFile="~/umbraco/masterpages/default.master" AutoEventWireup="true" %> 
```

有谁知道是否有一个配置标志来避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:02:25.900

我已经看到 svn merges 这样做（有时重复），其中一个人拥有原始的空“包装器”主指令 - 其他人在 Visual Studio 中更改它，然后 SVN 合并原始包装器内的所有新更改。当您更改主继承时似乎尤其如此。

所以我不确定它是一个可以通过配置键解决的 Umbraco 问题。

**编辑**

我不确定，但通常这种行为会在站点编辑“安顿下来”时停止 - 我认为它与 csproj 文件在项目中存储文件列表的方式有关 - 一旦每个人都“包含在项目中”所有母版页，问题消失了。但我不确定，因为一旦停止就很难复制。

# jquery - 脚本在 JSFiddle 中工作但不在我的本地文件中？

> ID：12114828
> 
> 赞同：0
> 
> 时间：2012-08-24T18:30:33.190
> 
> 标签：jquery, html

我正在尝试在 stackoverflow 上找到一个 jsfiddle 脚本示例，以便在我的网站上使用它……但它运行不正常。

我使用 Dreamweaver CS6。我在 JSFiddle 中粘贴了 Dreamweaver 中的代码，它工作正常。但是我从 Dreamweaver 中尝试使用我的本地文件，但事实并非如此。

这是相同的代码。

这是我的[小提琴](http://jsfiddle.net/CqYvY/)

任何想法为什么它在 JSFiddle 中工作但不在同一个浏览器中使用本地文件？我认为这是因为 JSFiddle 的“onload”jQuery，但我使用的是外部 jQuery 源（Google）。我不明白！

谢谢！

* * *

编辑：这是我的页面...由 PasteHTML 托管。[这里](http://pastehtml.com/view/c9bdk1m97.html)谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:24:50.717

# sql-server - 将选择中的标量 UDF 转换为表值函数

> ID：12114831
> 
> 赞同：0
> 
> 时间：2012-08-24T18:31:05.023
> 
> 标签：sql-server, sql-server-2008, query-optimization, user-defined-functions

我有 2 张桌子。表 1 (DateTable) 包含日期和项目名称，表 2 (PriceTable) 包含随时间变化的价格和价格变化的日期。

表 1（日期表）

```
| itemName |   Date   |
|    A     | 2012-8-22|
|    A     | 2012-9-2 | 
```

表2（价格表）

```
| Update Date | Price|itemName|
|  2012-7-1   | 5.00 |   A    |
|  2012-8-1   | 5.50 |   A    |
|  2012-9-1   | 6.00 |   A    | 
```

我的任务是，给定一个日期，我想确定该日期的商品价格。

我目前正在使用标量函数执行此操作，这真的很慢。有没有办法可以重写它，或者作为表值函数或者使用其他有助于加快速度的方法？我一直盯着这个有一段时间了，但无济于事。

我目前的查询：

```
select
    d.date
    ,dbo.fn_GetPrice(d.date, 'A')
from DateTable d
where d.itemName = 'A' 
```

和功能

```
alter function fn_GetPrice(@date DateTime, @itemName varchar(50))
returns int
as
begin
declare @price int
    select @price = p.price
    from PriceTable p
    where p.itemName = @itemName
        and p.updateDate = (select MAX(p2.updateDate)
            from PriceTable p2
            where p2.updateDate < @date
                and p2.itemName = @itemName)
return @price
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:39:23.603

这行得通吗？`udf`只用一个替换`join`?

```
select
    d.date,
    p.Price
from 
    DateTable d 
    join PriceTable p
        on p.itemName = d.itemName
        and p.updateDate = (
            select max(p2.updateDate)
            from PriceTable p2
            where 
                p2.updateDate < d.date
                and p2.itemName = p.itemName
        )
where d.itemName = 'A' 
```

# entity-framework - 需要更有效的方式将实体转换为 DataTable

> ID：12114833
> 
> 赞同：0
> 
> 时间：2012-08-24T18:31:12.683
> 
> 标签：entity-framework, datatable, converters

所以，我有一个将实体转换为 DataTable 的方法。唯一的问题是它非常慢。我确保在 IQueryable 上调用 .ToList() 以使其继续加载*，然后再将*结果处理到 DataTable 中。将 3000 多行加载到内存中几乎不需要任何时间。但是，实时slayer在方法中是在下面的迭代中：

```
foreach (var index in imgLeaseIndexes)
        {
            DataRow dataRow = dataTable.NewRow();

            dataRow["StateCode"] = index.StateCode;
            dataRow["CountyCode"] = index.CountyCode;
            dataRow["EntryNumber"] = index.EntryNumber;
            dataRow["Volume"] = index.Volume;
            dataRow["Page"] = index.Page;
            dataRow["PageCount"] = index.ImgLocation.PageCount;
            dataRow["CreateDate"] = index.ImgLocation.CreateDate;

            dataTable.Rows.Add(dataRow);
        } 
```

这是完整的方法，值得：

```
private DataTable buildImgLeaseIndexDataTable(List<ImgLeaseIndex> imgLeaseIndexes)
    {
        var dataTable = new DataTable();
        var dataColumns = new List<DataColumn>(); 
        var tdiReportProperties = 
            new List<string>() { "StateCode", "CountyCode", "EntryNumber", "Volume", "Page", "PageCount", "CreateDate" };

        Type imgLeaseIndexType = imgLeaseIndexes.FirstOrDefault().GetType();
        PropertyInfo[] imgLeaseIndexPropertyInfo = imgLeaseIndexType.GetProperties();

        dataColumns.AddRange(
            (from propertyInfo in imgLeaseIndexPropertyInfo
             where tdiReportProperties.Contains(propertyInfo.Name)
             select new DataColumn()
             {
                 ColumnName = propertyInfo.Name,
                 DataType = (propertyInfo.PropertyType.IsGenericType && 
                    propertyInfo.PropertyType.GetGenericTypeDefinition() == typeof(Nullable<>)) ? 
                    propertyInfo.PropertyType.GetGenericArguments()[0] : propertyInfo.PropertyType
             })
             .ToList());

        Type imgLocationType = imgLeaseIndexes.FirstOrDefault().ImgLocation.GetType();
        PropertyInfo[] imgLocationPropertyInfo = imgLocationType.GetProperties();

        dataColumns.AddRange(
            (from propertyInfo in imgLocationPropertyInfo
             where tdiReportProperties.Contains(propertyInfo.Name)
             select new DataColumn()
             {
                 ColumnName = propertyInfo.Name,
                 DataType = (propertyInfo.PropertyType.IsGenericType &&
                    propertyInfo.PropertyType.GetGenericTypeDefinition() == typeof(Nullable<>)) ?
                    propertyInfo.PropertyType.GetGenericArguments()[0] : propertyInfo.PropertyType
             })
             .ToList());

        dataTable.Columns.AddRange(dataColumns.ToArray());

        foreach (var index in imgLeaseIndexes)
        {
            DataRow dataRow = dataTable.NewRow();

            dataRow["StateCode"] = index.StateCode;
            dataRow["CountyCode"] = index.CountyCode;
            dataRow["EntryNumber"] = index.EntryNumber;
            dataRow["Volume"] = index.Volume;
            dataRow["Page"] = index.Page;
            dataRow["PageCount"] = index.ImgLocation.PageCount;
            dataRow["CreateDate"] = index.ImgLocation.CreateDate;

            dataTable.Rows.Add(dataRow);
        }

        return dataTable;
    } 
```

有没有人对我如何提高效率以及为什么它这么慢有想法？

**更新：**

根据我目前收到的反馈，我删除了反射并在编译时明确设置数据列，但它仍然很慢。这是更新后的代码的样子：

```
private DataTable buildImgLeaseIndexDataTable(List<ImgLeaseIndex> imgLeaseIndexes)
    {
        var dataTable = new DataTable();

        var stateCodeDataColumn = new DataColumn();
        stateCodeDataColumn.ColumnName = "StateCode";
        stateCodeDataColumn.Caption = "State Code";
        stateCodeDataColumn.DataType = typeof(Int16);
        dataTable.Columns.Add(stateCodeDataColumn);

        var countyCodeDataColumn = new DataColumn();
        countyCodeDataColumn.ColumnName = "CountyCode";
        countyCodeDataColumn.Caption = "County Code";
        countyCodeDataColumn.DataType = typeof(Int16);
        dataTable.Columns.Add(countyCodeDataColumn);

        var entryNumberDataColumn = new DataColumn();
        entryNumberDataColumn.ColumnName = "EntryNumber";
        entryNumberDataColumn.Caption = "Entry Number";
        entryNumberDataColumn.DataType = typeof(string);
        dataTable.Columns.Add(entryNumberDataColumn);

        var volumeDataColumn = new DataColumn();
        volumeDataColumn.ColumnName = "Volume";
        volumeDataColumn.DataType = typeof(string);
        dataTable.Columns.Add(volumeDataColumn);

        var pageDataColumn = new DataColumn();
        pageDataColumn.ColumnName = "Page";
        pageDataColumn.DataType = typeof(string);
        dataTable.Columns.Add(pageDataColumn);

        var pageCountDataColumn = new DataColumn();
        pageCountDataColumn.ColumnName = "PageCount";
        pageCountDataColumn.Caption = "Page Count";
        pageCountDataColumn.DataType = typeof(string);
        dataTable.Columns.Add(pageCountDataColumn);

        var createDateDataColumn = new DataColumn();
        createDateDataColumn.ColumnName = "CreateDate";
        createDateDataColumn.Caption = "Create Date";
        createDateDataColumn.DataType = typeof(DateTime);
        dataTable.Columns.Add(createDateDataColumn);

        foreach (var index in imgLeaseIndexes)
        {
            DataRow dataRow = dataTable.NewRow();

            dataRow["StateCode"] = index.StateCode;
            dataRow["CountyCode"] = index.CountyCode;
            dataRow["EntryNumber"] = index.EntryNumber;
            dataRow["Volume"] = index.Volume;
            dataRow["Page"] = index.Page;
            dataRow["PageCount"] = index.ImgLocation.PageCount;
            dataRow["CreateDate"] = index.ImgLocation.CreateDate;

            dataTable.Rows.Add(dataRow);
        }

        return dataTable;
    } 
```

关于其他可能导致这种情况的任何想法？

**更新 2：**

所以看起来其他人也有这个问题——特定于创建和设置 DataRows。我的同事遇到了这个：

[DataRow 值设置器很慢！](http://siderite.blogspot.com/2008/04/datarow-value-setter-is-slow.html)

我将尝试链接中建议的一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T20:59:46.987

正如蒂亚戈在评论中提到的，问题在于反射的使用。

反射部分是您使用 PropertyInfo 的地方。您正在运行时获取数据类型的结构。但是这些在编译时是已知的。

# javascript - 切换多个 div 元素

> ID：12114834
> 
> 赞同：0
> 
> 时间：2012-08-24T18:31:16.000
> 
> 标签：javascript, jquery, css

在我的页面上，我目前正在做这样的事情：http: [//jsfiddle.net/FBCSt/6/](http://jsfiddle.net/FBCSt/6/)我真的不知道为什么，但在 Chrome 中我遇到了一些奇怪的问题 - 有时是 div 元素的内容未正确加载。在 IE、Safari 和 Firefox 中它可以正常工作，但正如我所说，在 Chrome 中它会造成一些麻烦。

这就是为什么我想知道，是否有更时尚的方法来做到这一点？（共有三个按钮，每一个都分配给一个 div。应该只有一个 div 可见）

我很感谢每一个答案=）

编辑：谢谢大家。这就是解决方案。它运作良好 =)

“更好的方法：jsfiddle.net/FBCSt/13 – @Mohammed ElSayed 20 分钟前”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:55:46.633

我在这个 url 上有工作解决方案：[pastebin](http://pastebin.com/QJs1EcDV)它适用于 chrome 和 FF。即使你添加 1000 id 和 page#100 它也可以工作，但它仍然不会有太多代码。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:00:12.357

就像 Abody97 说的：试试 JQuery UI 选项卡

如果您正在寻找一种“更时尚”的方式，请试试这个小提琴：http: [//jsfiddle.net/NCbW6/](http://jsfiddle.net/NCbW6/)

它不需要为每个元素添加特定的 id，因此您可以在不更改 JS 的情况下添加任意数量的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:42:12.133

试试这个：http: [//jsfiddle.net/FBCSt/10/](http://jsfiddle.net/FBCSt/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T18:43:46.770

> 在 IE、Safari 和 Firefox 中它可以正常工作，但正如我所说，在 Chrome 中它会造成一些麻烦。

*在Google Chrome 19.0.1084*下测试时，我真的没有看到问题。但无论如何，

> 这就是为什么我想知道，是否有更时尚的方法来做到这一点？

是的，有。由于您的标签之一是**jQuery**，我建议您看一下**jQuery UI**的[选项卡](http://jqueryui.com/demos/tabs/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T18:46:19.453

为什么不使用 show() 而不是 toggle()？也许这个问题与使用切换（）有关。您可以组合要隐藏的元素：例如，

```
$('#page2,#page3').hide();    
$('#page1').show(); 
```

或者正如穆罕默德所说的那样，

```
$('#page1').show().siblings().hide(); 
```

# java - 从图像 Java 代码中获取 GPS 数据

> ID：12114837
> 
> 赞同：14
> 
> 时间：2012-08-24T18:31:27.190
> 
> 标签：java, image, metadata, jpeg

我想使用 Java 代码从本地系统中的图像文件中获取元数据

在附图中，您可以看到我想从 java 代码中提取的所需数据。

![在此处输入图像描述](../Images/28b211290301c2892888b2f7c17d7fb6.png)

我编写了以下代码，似乎没有提取“详细信息”选项卡中提到的数据。以下代码的输出是，这不是我要找的。

```
Started .. 
Format name: javax_imageio_jpeg_image_1.0
Format name: javax_imageio_1.0 
```

请给我你的想法。谢谢

```
try {
            ImageInputStream inStream = ImageIO.createImageInputStream(new File("D:\\codeTest\\arun.jpg"));
            Iterator<ImageReader> imgItr = ImageIO.getImageReaders(inStream);

            while (imgItr.hasNext()) {
                ImageReader reader = imgItr.next();
                reader.setInput(inStream, true);
                IIOMetadata  metadata = reader.getImageMetadata(0);

                String[] names = metadata.getMetadataFormatNames();
                int length = names.length;
                for (int i = 0; i < length; i++) {
                    System.out.println( "Format name: " + names[ i ] );
                }  
            }
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T19:03:03.443

使用 Java Core API没有*简单*的方法可以做到这一点。您必须解析图像的元数据树，并解释正确的 EXIF 标签。相反，您可以从具有 EXIF 解析功能的现有库中获取所需的代码，并在您的库中使用它。例如，我使用了[`Image`](http://www.javaxt.com/documentation/?jar=javaxt-core&package=javaxt.io&class=Image)类[`javaxt`](http://www.javaxt.com/documentation/?jar=javaxt-core&package=javaxt.io&class=Image)，它提供了一种非常有用的方法来从图像中提取 GPS 元数据。它很简单：

```
javaxt.io.Image image = new javaxt.io.Image("D:\\codeTest\\arun.jpg");
double[] gps = image.getGPSCoordinate(); 
```

另外，`javaxt.io.Image`没有外部依赖项，因此如果您不想在整个库上添加依赖项，则可以使用该特定类。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T18:44:02.880

我建议您阅读图像的 EXIF 标头，然后解析标签以查找 GPS 信息。在 Java 中有一个很棒的库（称为元数据提取器）用于提取和解析 EXIF 标头。[请在此处](http://code.google.com/p/metadata-extractor/wiki/GettingStarted)查看此库的入门。

`[GPS]`完成本教程中的前 2 个步骤后，查找以( `[GPS] GPS Longitude`, `[GPS] GPS Latitude`, ...)开头的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-27T03:14:44.167

基于@dan-d 的回答，这是我的代码（kotlin）

```
private fun readGps(file: String): Optional<GeoLocation> {
    // Read all metadata from the image

    // Read all metadata from the image
    val metadata: Metadata = ImageMetadataReader.readMetadata(File(file))
    // See whether it has GPS data
    val gpsDirectories = metadata.getDirectoriesOfType(
            GpsDirectory::class.java)
    for (gpsDirectory in gpsDirectories) {
        // Try to read out the location, making sure it's non-zero
        val geoLocation = gpsDirectory.geoLocation
        if (geoLocation != null && !geoLocation.isZero) {
            return Optional.of(geoLocation)
        }
    }
    return Optional.empty()
} 
```

# android - 您的应用程序的图标无效。请使用 48x48 PNG

> ID：12114838
> 
> 赞同：2
> 
> 时间：2012-08-24T18:31:28.313
> 
> 标签：android, google-play

“您的应用程序的图标无效。请使用 48x48 PNG。” 当我尝试上传我的应用程序时，它显示了上述错误。我还找到了一些关于 String.xml 文件中的“\n”的答案......必须更改 app_name....但对我来说，我没有在 string.xml 中使用任何 \n。我为我的应用程序使用 48*48 png 图标。请帮助我克服这个错误。

# c# - Html Agility Pack 加载方法问题

> ID：12114842
> 
> 赞同：0
> 
> 时间：2012-08-24T18:31:42.823
> 
> 标签：c#, asp.net, html-agility-pack

我正在使用 Html Agility 包。当 HtmlDocument 类的 Load 方法传递 URL 时，如“http://www.stackoverflow.com”，它表示 URI 的格式不正确。

```
 doc.Load(TextBoxUrl.Text, Encoding.UTF8 ); 
```

我尝试的网址是[http://www.stackoverflow.com/questions/846994/how-to-use-html-agility-pack](http://www.stackoverflow.com/questions/846994/how-to-use-html-agility-pack)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:35:25.703

HAP 不能从 url 加载，只能从文件或字符串加载。使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)或[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.100%29.aspx)获取页面。

例如：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
using (var wc = new WebClient())
{
    doc.LoadHtml(wc.DownloadString(TextBoxUrl.Text));
} 
```

# objective-c - 什么时候在 iOS 中调用委托设置器？

> ID：12114848
> 
> 赞同：1
> 
> 时间：2012-08-24T18:31:57.357
> 
> 标签：objective-c, ios, xcode

我的代码有效，但我不明白谁或在哪里为我的视图的数据源委托调用 setter。我理解为什么调用该代码会使一切正常，我只想知道是谁进行了调用/它发生在哪里。视图的标题如下所示，最后一行代码很重要：

```
@class GraphView;

@protocol GraphViewDataSource 

-(float)YValueforXValue:(float)xValue;

@end

@interface GraphView : UIView

@property (nonatomic) CGFloat scale;
@property (nonatomic) CGPoint graphOrigin;
@property (nonatomic, weak) IBOutlet id <GraphViewDataSource> dataSource;

@end 
```

以及符合协议的视图控制器：

```
@interface GraphViewController () <GraphViewDataSource>

@property (nonatomic, weak) IBOutlet GraphView *graphview;

@end

@implementation GraphViewController

@synthesize graphview = _graphview;
@synthesize program = _program;

-(void)setGraphview:(GraphView *)graphview {
    _graphview = graphview;
    self.graphview.dataSource = self;
} 
```

我已经排除了所需的协议方法等，因为它不相关。我想知道是谁调用了上述`setGraphView`方法。不幸的是，我无法从断点获得帮助（除了知道它正在被调用）。

此外，该委托首先被视图中的此代码引用：

```
for (CGFloat thisPointViewXValue=self.bounds.origin.x; thisPointViewXValue<=self.bounds.size.width; thisPointViewXValue +=1/self.contentScaleFactor)
    {
        if (FirstPoint) {
            CGFloat firstpointGraphXValue = [self convertViewXValueToGraphXValue:thisPointViewXValue];
            CGFloat firstpointGraphYValue = [self.dataSource YValueforXValue:firstpointGraphXValue];
            CGFloat firstpointViewYValue = [self convertGraphYValueToViewY:firstpointGraphYValue];
            CGContextMoveToPoint(context, thisPointViewXValue, firstpointViewYValue);
            FirstPoint = NO;

        }
        CGFloat thisPointGraphXValue = [self convertViewXValueToGraphXValue:thisPointViewXValue];
        CGFloat thisPointGraphYValue = [self.dataSource YValueforXValue:thisPointGraphXValue];
        CGFloat thisPointViewYValue = [self convertGraphYValueToViewY:thisPointGraphYValue];
        CGContextAddLineToPoint(context, thisPointViewXValue, thisPointViewYValue);

} 
```

这是发生的地方吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:35:23.707

有 self.graphview.dataSource = self;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:43:37.463

graphView 和dataSource iVar 被标记为IBOutlets，即Interface Builder Outlet。

这通常表明 GraphViewController 是通过 nib/xib 文件加载的，并且在该 nib 文件中存在从 nib 文件中的其他对象到这些 iVar 的连接。

因此，在这些 iVar 上调用设置器的是 nib 加载机制。

# web-services - YQL Open Data Tables 能否利用其 XML 方案似乎支持的多个 URL 字段？

> ID：12114850
> 
> 赞同：0
> 
> 时间：2012-08-24T18:32:12.570
> 
> 标签：web-services, yql, asp.net-web-api, undocumented-behavior

随着我越来越多地尝试为[YQL创建自己的](http://en.wikipedia.org/wiki/Yahoo!_query_language)[开放数据表](http://developer.yahoo.com/yql/guide/yql-opentables-chapter.html)，我发现文档中可能存在一些空白。由于我是一个动手实践的学习者，并且喜欢了解我使用的所有内容，因此我会探索这些差距以尝试了解所有内容的工作原理。

我注意到在开放数据表的 XML 格式中，有一个`<urls>`“数组”通常只包含一个`<url>`元素，尽管有时没有`<url>`. 这是典型 ODT XML 文件的开头：

```
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd" https="true">
  <meta>
    <author>Paul Donnelly</author>
    <documentationURL>http://developer.netflix.com/docs/REST_API_Reference#0_52696</documentationURL>
  </meta>
  <bindings>
    <select itemPath="" produces="XML">
      <urls>
        <url env="all">http://api.netflix.com/catalog/titles/</url>
      </urls> 
```

但我似乎无法在文档中找到它是否可以包含多个。我找不到任何示例，但是当我尝试添加多个示例时，一切正常并且没有抛出错误，尽管我也找不到任何方法来访问`<url>`第一个元素之外的元素。

**`url`/`urls`字段作为 XML 数组有什么用吗？有没有办法在这里使用多个`url`？还是只是格式的怪癖，没有真正的原因？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:14:57.073

> url/urls 字段作为 XML 数组有什么用吗？有什么办法可以在这里使用多个网址吗？

`<url>`元素可以有一个`env`属性。此`env`属性可以包含`all`, `prod`, `int`, `dev`, `stable`, `nightly`, `perf`, `qaperf`,`gamma`或`beta`.

执行表时，会检查当前环境（YQL 环境，而不是更熟悉的[环境文件](http://developer.yahoo.com/yql/guide/yql-opentables-import.html)）并使用第一个匹配项`<url>`（如果有）。如果没有找到匹配`env`项（并且没有`all`，这是非常自我描述的），则会发出错误；例如，“*表未在此环境中定义产品*”。

请注意，对于面向公众的 YQL，环境是`prod`; 只有在您的开放数据表`prod`中`all`使用才有意义。

> 还是只是格式的怪癖，没有真正的原因？

一点也不。

我认为在线文档中“缺少”此信息纯粹是因为它仅在 Yahoo! 内部有用，但同样它可能只是文档有些过时的另一个地方。

最后，大约1,100 个[社区开放数据表中](http://www.datatables.org/)*没有*一个指定超过一个，并且只有少数（55 个）使用该属性（全部使用 value ）。`<url>``env``all`

# python - 使用python百分比编码URL

> ID：12114853
> 
> 赞同：7
> 
> 时间：2012-08-24T18:32:26.627
> 
> 标签：python, url, encoding

当我在 maps.google.com 中输入 URL 时，例如[https://dl.dropbox.com/u/94943007/file.kml](https://dl.dropbox.com/u/94943007/file.kml)，它会将此 URL 编码为：

```
https:%2F%2Fdl.dropbox.com%2Fu%2F94943007%2Ffile.kml 
```

我想知道这种编码叫什么，有没有办法使用 python 对这样的 URL 进行编码？

我试过这个：

该过程称为[URL 编码](http://en.wikipedia.org/wiki/URL_encoding)：

```
>>> urllib.quote('https://dl.dropbox.com/u/94943007/file.kml', '')
'https%3A%2F%2Fdl.dropbox.com%2Fu%2F94943007%2Ffile.kml' 
```

但没有得到预期的结果：

```
'https%3A//dl.dropbox.com/u/94943007/file.kml' 
```

我需要的是这个：

```
https:%2F%2Fdl.dropbox.com%2Fu%2F94943007%2Ffile.kml 
```

**如何正确编码此 URL？**

这里的文档：

[https://developers.google.com/maps/documentation/webservices/](https://developers.google.com/maps/documentation/webservices/)

状态：

> 所有要进行 URL 编码的字符都使用 '%' 字符和与其 UTF-8 字符对应的两个字符的十六进制值进行编码。例如，UTF-8 中的上海+中国将被 URL 编码为 %E4%B8%8A%E6%B5%B7%2B%E4%B8%AD%E5%9C%8B。字符串？Mysterians 将被 URL 编码为 %3F+and+the+Mysterians。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T18:41:21.490

采用

```
urllib.quote_plus(url, safe=':') 
```

由于您不希望对冒号进行编码，因此您需要在调用时指定`urllib.quote()`：

```
>>> expected = 'https:%2F%2Fdl.dropbox.com%2Fu%2F94943007%2Ffile.kml'
>>> url = 'https://dl.dropbox.com/u/94943007/file.kml'
>>> urllib.quote(url, safe=':') == expected
True 
```

`urllib.quote()``safe`采用默认的关键字参数`/`并指示哪些字符被认为是安全的，因此不需要编码。在您使用的第一个示例`''`中，导致斜杠被编码。您在斜线未编码的下方粘贴的意外输出可能来自您之前根本没有设置关键字参数的尝试`safe`。

覆盖默认值`'/'`并排除冒号`':'`是最终产生所需结果的原因。

**编辑**：此外，API 要求将空格编码为加号。因此`urllib.quote_plus()`应该使用（其关键字参数`safe`不默认为`'/'`）。

# regex - sed 从 match1 到 match2

> ID：12114855
> 
> 赞同：0
> 
> 时间：2012-08-24T18:32:49.577
> 
> 标签：regex, sed, grep

我有一个文本，我想打印该文本中 2 个单词之间的任何内容，仅显示第一次出现并禁用贪婪（如果存在），例如假设我有这个文本

```
 word1 XXXX
TTTT
YYYY
ZZZZ
    GGGG word2 JJJJJJJ word2
    ads
    word2
    adasdas
    word1
    asadadsasd
    word2 
```

我想要的是

```
 XXXX
TTTT
YYYY
ZZZZ
    GGGG 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:05:32.597

我会选择`perl`这份工作。

假设`infile`问题的内容和以下内容`script.pl`：

```
#!/usr/bin/env perl
use warnings;
use strict;

die qq|Usage: perl $0 <input-file> <word-1> <word-2>\n| unless @ARGV == 3;

my ($word2, $word1) = (pop, pop);

while ( <> ) { 

    ## Remove last '\n'.
    chomp;

    ## Match range between first appearance of 'word1' and first appearance
    ## of 'word2'.
    if ( ( my $w1 = m/\Q$word1/ ) ... ( my $w2 = m/\Q$word2/ ) ) { 

        ## When 'word1' matched remove all characters but spaces until it.
        if ( $w1 ) { 
            s/\A(\s*).*?\Q$word1/$1/;
        }   

        ## When 'word2' matched remove all characters after it.
        if ( $w2 ) { 
            s/\A(.*?)\Q$word2\E.*$/$1/;
            printf qq|%s\n|, $_; 
            exit 0;
        }   

        ## Print lines inside the range.
        printf qq|%s\n|, $_; 
    }   
} 
```

像这样运行它：

```
perl script.pl infile word1 word2 
```

具有以下输出：

```
 XXXX
TTTT
YYYY
ZZZZ
    GGGG 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:16:38.683

所以我在这里有一点技巧。但它有效。

测试文件：

```
jfkakfakjskfj
    **word1** XXXX
TTTT
YYYY
ZZZZ
    GGGG **word2**
    ads
    **word2**
    adasdas
    **word1**
    asadadsasd
    **word2** 
```

输出：

```
 **word1** XXXX
TTTT
YYYY
ZZZZ
    GGGG **word2** 
```

sed 命令：

`sed -n '/word1/,$p' file | sed -n '1,/word2/p'`

第一个 sed 命令匹配从`word1`一直到文件末尾的所有行，然后我们将其通过管道传输到第二个 sed 命令，该命令匹配从文件开头的所有行（我们只是通过管道传输到文件中）直到`word2`匹配。它很棘手，但它有效。

# ios - 将 MFMailComposeViewController 与 UTF-8 域和/或用户名一起使用

> ID：12114860
> 
> 赞同：1
> 
> 时间：2012-08-24T18:33:41.983
> 
> 标签：ios, email, utf-8

我正在尝试使用具有 UTF-8 域的电子邮件地址（例如 hello@荧光闪烁.com ）预先填充 MFMailComposeViewController。但是，当我在我的对象上调用ToRecepients 时，我会在控制台中收到一条消息，指出“hello@预设.com 不是有效的电子邮件地址，并且电子邮件控制器出现了一个空的收件人字段。如果我使用相同的电子邮件地址并直接输入，我会收到一个警告，指出它不是有效的电子邮件地址，但我可以选择发送。

这只是不支持的东西吗？UTF-8 域可能不太常见，但它们肯定存在。我尝试使用 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding 对值进行编码，但没有这样做。

有什么想法吗？有人遇到过这个吗？解决方法？

我也刚刚使用 Apple 的示例代码在最新的 6.0 SDK 中尝试了此操作，仅将 To 地址更改为 UTF-8，结果相同。

我在 Apple 开发者论坛上发布了这个，但我通常在这里得到更好的回应，所以我也在尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:09:07.677

您可以尝试使用 NSUTF16StringEncoding 而不是 NSUTF8StringEncoding。此外，您可以参考[不同类型的编码](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSJapaneseEUCStringEncoding)

# c# - 在 WCF 源代码中解释奇怪的同步

> ID：12114861
> 
> 赞同：1
> 
> 时间：2012-08-24T18:33:47.140
> 
> 标签：c#, wcf, synchronization, try-catch

在查看 System.ServiceModel.Channels.BufferManager 的源代码时，我注意到了这个方法：

```
void TuneQuotas()
{
    if (areQuotasBeingTuned)
        return;

    bool lockHeld = false;
    try
    {
        try { }
        finally
        {
            lockHeld = Monitor.TryEnter(tuningLock);
        }

        // Don't bother if another thread already has the lock
        if (!lockHeld || areQuotasBeingTuned)
            return;
        areQuotasBeingTuned = true;
    }
    finally
    {
        if (lockHeld)
        {
            Monitor.Exit(tuningLock);
        }
    }
    //
    // DO WORK... (code removed for brevity)
    //
    areQuotasBeingTuned = false;
} 
```

显然，他们只希望一个线程运行`TuneQuotas()`，如果它已经被另一个线程运行，则其他线程不等待。我应该注意，删除的代码没有尝试保护。

我试图了解上述这种方法的优势，而*不是仅仅这样做*：

```
void TuneQuotas()
{
    if(!Monitor.TryEnter(tuningLock)) return;
    //
    // DO WORK...
    //
    Monitor.Exit(tuningLock);
} 
```

任何想法为什么他们可能会为这一切而烦恼？我怀疑他们使用这些`finally`块的方式是为了防止线程中止情况，但我仍然不明白这一点，因为即使有所有这些代码，如果那个线程不能全部完成，`TuneQuotas()`也会被*永久锁定*设置结束的方式`areQuotasBeingTunes=false`，出于某种原因。那么我错过了这种模式有什么很酷的地方吗？

**编辑：** 作为旁注，该方法似乎存在于 .NET 4.0 中，我使用在框架 4 上运行的此代码确认了这一点（尽管我无法确认该方法的内容与我在网上找到的内容没有改变） ：

```
var buffMgr = BufferManager.CreateBufferManager(1, 1);
var pooledBuffMgrType = buffMgr.GetType()
    .GetProperty("InternalBufferManager")
    .GetValue(buffMgr, null)
    .GetType();

Debug.WriteLine(pooledBuffMgrType.Module.FullyQualifiedName);
foreach (var methodInfo in pooledBuffMgrType
    .GetMethods(BindingFlags.Instance | BindingFlags.NonPublic))
{
    Debug.WriteLine(methodInfo.Name);
} 
```

输出：

```
C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.DurableInstancing\v4.0_4.0.0.0__3    1bf3856ad364e35\System.Runtime.DurableInstancing.dll
ChangeQuota
DecreaseQuota
FindMostExcessivePool
FindMostStarvedPool
FindPool
IncreaseQuota
TuneQuotas
Finalize
MemberwiseClone 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:17:27.780

我将添加一些评论：

```
void TuneQuotas()
{
    if (areQuotasBeingTuned)
        return; //fast-path, does not require locking

    bool lockHeld = false;
    try
    {
        try { }
        finally
        {
            //finally-blocks cannot be aborted by Thread.Abort
            //The thread could be aborted after getting the lock and before setting lockHeld
            lockHeld = Monitor.TryEnter(tuningLock);
        }

        // Don't bother if another thread already has the lock
        if (!lockHeld || areQuotasBeingTuned)
            return; //areQuotasBeingTuned could have switched to true in the mean-time
        areQuotasBeingTuned = true; //prevent others from needlessly trying to lock (trigger fast-path)
    }
    finally //ensure the lock being released
    {
        if (lockHeld)
        {
            Monitor.Exit(tuningLock);
        }
    }
    //
    // DO WORK... (code removed for brevity)
    //
    //this might be a bug. There should be a call to Thread.MemoryBarrier,
    //or areQuotasBeingTuned should be volatile
    //if not, the write might never reach other processor cores
    //maybe this doesn't matter for x86
    areQuotasBeingTuned = false;
} 
```

您提供的简单版本不能防止某些问题。至少它不是异常安全的（不会释放锁）。有趣的是，“复杂”版本也没有。

此方法已从 .NET 4 中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:59:49.617

在 .NET 4.0 之前，代码中基本上存在由`lock`语句生成的错误。它将生成类似于以下内容的内容：

```
Monitor.Enter(lockObject)
// see next paragraph
try
{
    // code that was in the lock block
}
finally
{
   Monitor.Exit(lockObject);
} 
```

这意味着如果`Enter`和之间发生异常`try`，则`Exit`永远不会调用 。正如 usr 所提到的，这可能是由于`Thread.Abort`.

你的例子：

```
if(!Monitor.TryEnter(tuningLock)) return;
//
// DO WORK...
//
Monitor.Exit(tuningLock); 
```

遭受这个问题等等。这段代码被中断`Exit`而不被调用的窗口基本上是整个代码块——任何异常（不仅仅是一个来自`Thread.Abort`）。

我不知道*为什么*大多数代码都是用 .NET 编写的。但是，我推测这段代码是为了避免 and 之间的异常问题而编写`Enter`的`try`。让我们看一些细节：

```
try{}
finally
{
  lockHeld = Monitor.TryEnter(tuningLock);
} 
```

`Finally`块基本上在 IL 中生成一个受约束的执行区域。受约束的执行区域不能被任何东西打断。因此，将 放在上面`TryEnter`的`finally`块中可确保`lockHeld`可靠地保持`lock`.

该代码块包含在`try`/`finally`块中，其`finally`语句调用`Monitor.Exit`if`tuningLock`为真。这意味着在`Enter`和`try`块之间没有可以被中断的点。

FWIW，此方法仍在 .NET 3.5 中，并且在 WCF 3.5 源代码（不是 .NET 源代码）中可见。我还不知道 4.0 中有什么；但我想它会是一样的；即使部分结构的动力不再存在，也没有理由更改工作代码。

有关`lock` *用于*生成内容的更多详细信息，请参阅[http://blogs.msdn.com/b/ericlippert/archive/2007/08/17/subtleties-of-c-il-codegen.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/08/17/subtleties-of-c-il-codegen.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:10:00.707

> 任何想法为什么他们可能会为这一切而烦恼？

在运行了一些测试之后，我认为看到了一个原因（如果不是原因的话）：他们可能会为这一切而烦恼，因为它要快得多！

事实证明，如果对象*已经被锁定*（如果它没有被锁定，仍然非常快——没有问题） ，这`Monitor.TryEnter`是一个**昂贵的调用。**因此，除第一个线程外，所有线程都将经历缓慢。*`TryEnter`*

 *我不认为这有那么重要。因为毕竟，每个线程都会尝试一次锁定然后继续前进（不像他们会坐在那里，循环尝试）。但是，我编写了一些代码进行比较，它表明`TryEnter`（当已经锁定时）的成本是显着的。事实上，在我的系统上，在没有附加调试器的情况下，每次调用大约需要 0.3 毫秒，这比使用简单的布尔检查慢了几个数量级。

所以我怀疑，这可能出现在微软的测试结果中，所以他们优化了上面的代码，添加了快速通道布尔检查。但这只是我的猜测..*

# python - 置换 numpy 的二维数组索引

> ID：12114863
> 
> 赞同：0
> 
> 时间：2012-08-24T18:33:58.703
> 
> 标签：python, arrays, numpy, multidimensional-array

是否有任何 numpy 功能或巧妙地使用视图来完成以下功能？

```
 import numpy as np

 def permuteIndexes(array, perm):
     newarray = np.empty_like(array)
     max_i, max_j = newarray.shape
     for i in xrange(max_i):
         for j in xrange(max_j):
             newarray[i,j] = array[perm[i], perm[j]]
     return newarray 
```

也就是说，对于 list 中矩阵索引的给定排列`perm`，此函数计算将此排列应用于矩阵索引的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:36:44.740

```
def permutateIndexes(array, perm):
    return array[perm][:, perm] 
```

* * *

实际上，这更好，因为它一次完成：

```
def permutateIndexes(array, perm):
    return array[np.ix_(perm, perm)] 
```

要使用非方形数组：

```
def permutateIndexes(array, perm):
    return array[np.ix_(*(perm[:s] for s in array.shape))] 
```

# algorithm - 给定一个数字，判断它是否出色

> ID：12114864
> 
> 赞同：13
> 
> 时间：2012-08-24T18:34:04.427
> 
> 标签：algorithm, language-agnostic

这是一个编程难题，类似于：“如果一个数字的子字符串的所有数字的乘积都具有唯一值，则该数字被认为是出色的。”

示例：263 (2, 6, 3, 2*6 = 12, 6*3 = 18) 非常棒。

但是 236 (2, 3, **6** , **2*3 = 6** , 3*6 = 18) 并不出色。

我们只取子串，不取子序列。

我在想，由于重复的产品计算，我们可以在这里应用动态编程吗？我们还有什么其他的解决方案？（这不是作业问题。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:59:18.150

这是使用动态编程解决它的一种方法：

假设我们有数字*d [0] d [1] ... d [N]*作为输入。

这个想法是创建一个表格，其中单元格 ( *i* , *j* ) 存储产品*d [i] · d [i+1] · ... · d [j]*。这可以有效地完成，因为 ( *i* , *j* ) 处的单元格可以通过将 ( *i* -1, *j* )处的数字乘以*d [i]*来计算。

由于*i*（起始索引）必须小于或等于*j*（结束索引），因此我们将关注表格的左下三角形。

生成表后，我们检查重复条目。

这是输入 2673 的具体示例解决方案：

1.  我们分配一个矩阵*M*，尺寸为 4 × 4。

    ![在此处输入图像描述](../Images/117f5e671bec2d66b2627e43b1bbc2ba.png)

2.  我们首先用*d* *[i]*填充对角线*M [i,]* i ：

    ![在此处输入图像描述](../Images/2c43ccf4ca51b230e9dbe533c0ffda4d.png)

3.  然后我们逐行，用*d* *[i]* · *M* *[i-1,j]**填写M [i ,j]*

    ![在此处输入图像描述](../Images/af713ff7decb111c7144a60c339b42cb.png)

4.  结果看起来像

    ![在此处输入图像描述](../Images/201ea64646b7d8d9c5bde2ed8c3dfb3b.png)

5.  为了检查重复，我们收集产品 (2, 12, 6, 84, 42, 7, 252, 126, 21, 3)，对它们进行排序 (2, 3, 6, 7, 12, 21, 42, 84, 126, 252)，然后循环查看两个连续的数字是否相等。如果是，我们返回 false，否则返回 true。

**在 Java 代码中：**

这是一个有效的 DP 解决方案，O(n ² )。

```
public static boolean isColorful(int num) {

    // Some initialization
    String str = "" + num;
    int[] digits = new int[str.length()];
    for (int i = 0; i < str.length(); i++)
        digits[i] = str.charAt(i) - '0';
    int[][] dpmatrix = new int[str.length()][str.length()];

    // Fill in diagonal: O(N)
    for (int i = 0; i < digits.length; i++)
        dpmatrix[i][i] = digits[i];

    // Fill in lower left triangle: O(N^2)
    for (int i = 0; i < str.length(); i++)
        for (int j = 0; j < i; j++)
            dpmatrix[i][j] = digits[i] * dpmatrix[i-1][j];

    // Check for dups: O(N^2)
    int[] nums = new int[digits.length * (digits.length+1) / 2];
    for (int i = 0, j = 0; i < digits.length; i++, j += i)
        System.arraycopy(dpmatrix[i], 0, nums, j, i+1);

    Arrays.sort(nums);

    for (int i = 0; i < nums.length - 1; i++)
        if (nums[i] == nums[i+1])
            return false;

    return true;
} 
```

对于对 DP 感兴趣的读者，我可以在这里推荐一些类似的问题/答案：

*   [查找字符串中子序列的出现次数](https://stackoverflow.com/questions/6877249/find-the-number-of-occurrences-of-a-subsequence-in-a-string/6877313#6877313)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T18:42:37.067

使用动态规划可能是要走的路：不是计算所有 O(n^2) 子串，然后使用 ~n 乘法命令来计算它们中的每一个，而是将先前计算的结果存储在矩阵 M 中，其中 M(i ,j) 是长度为 j 的子串的结果，从位置 i 开始。

（即，如果您的号码是 123456789，那么 M(1,5) 是 5！，而 M(1,6) 是 6！，只需将 M(1,5) 乘以 6 - 恒功）

这会将运行时间从 n 位的 O(n^3) 提高到 O(n^2)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T18:10:43.520

动态规划解决方案实际上是没有必要的，因为没有具有大量数字的出色数字*（如果任何数字出现不止一次，则该数字不是出色的）*。

[这](http://www.blueraja.com/files/brilliant_numbers.txt)是每个出色数字的列表。共有 57,281 个。

这个文件在我的电脑上生成的时间不到一秒钟，即使没有使用动态编程:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T19:12:29.773

如果我们不将数字视为大字符串，那么散列会有所帮助；

```
 int brill(int A) {
    map<long long int,bool> m;
    vector<int> arr(10,0);
    int i=0;
    while(A){
        arr[i++]=A%10;
        A/=10;
    }

    for(int j=0;j<i;j++){

        long long int temp=1;

        for(int k=j;k>=0;k--){
            temp*=arr[k];

            if(m.find(temp)!=m.end()){
                return 0;
            }
            else{
                m[temp]=true;
            }
        }
    }
    return 1;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T20:08:09.160

n 是包含数字的字符串。

由于在失败状态之前该数字不能大于 8 位，因此它的 O(1)。

```
function isBrill(n) {
  var set = {};
  set[parseInt(n.charAt(0))] = true;
  for(var i=0; i < n.length - 1; i++) {
    var a = parseInt(n.charAt(i));
    var b = parseInt(n.charAt(i+1));
    if(set[b] === true) { return false; }
    set[b] = true;
    if(set[a * b] === true) { return false; }
    set[a * b] = true;
  }
  return true;
}
isBrill("263"); // true
isBrill("236"); // false 
```

# azure - Azure WCF 访问磁盘文件

> ID：12114865
> 
> 赞同：2
> 
> 时间：2012-08-24T18:34:04.380
> 
> 标签：azure, azure-storage, azure-blob-storage

我在 Windows Azure 上托管了一个 WCF 服务作为“云服务”。当服务启动时，它需要将数据从文件/磁盘填充到其内存中，以便快速访问（换句话说，缓存）。现在我正在使用 C:\Documents\Filestoprocess 文件夹，以便 WCF 调用该文件夹并在其内存中填充该文件夹中的数据数据。我有 5,000 个小文件。如何在 Azure 中执行此操作？是否有我可以在 WCF 中调用的文件夹路径，以便 WCF 调用这些文件并打开每个文件并将每个数据保存在文件中？我并不是真的在寻找使用带宽通过网络进行复杂的 Blob 访问。我正在寻找从在其自己的公共网址上运行的 WCF“云服务”对这些文件的简单磁盘 I/O 访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:57:07.373

您应该尝试使用云存储服务来存储数据，就像您写入本地文件系统一样，它可能会在服务重新启动或服务回收时被破坏。

您可以考虑使用 azure drive 服务，这就像创建磁盘潜水一样。它位于 blob 存储之上。

但是，如果您真的想在本地文件系统上写入和读取数据，请查看这篇博文[http://blog.codingoutloud.com/2011/06/12/azure-faq-can-i-write-to-the- Windows azure 上的文件系统/](http://blog.codingoutloud.com/2011/06/12/azure-faq-can-i-write-to-the-file-system-on-windows-azure/)

它讨论了设置您的服务定义以允许写入本地文件系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T19:05:22.640

根据[您的实例的大小，您](http://msdn.microsoft.com/en-us/library/ee814754.aspx)将获得一个非永久性磁盘，您可以在其中存储此类临时数据。超小型实例的最小值为 20GB。您不应该直接访问磁盘，而是需要使用[本地资源](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.localresource.aspx)，您可以在[服务定义](http://msdn.microsoft.com/en-us/library/ee758708.aspx)文件或 Visual Studio 中进行配置（双击您的 Web / Worker 角色）。

这个存储是非持久的，这意味着如果你删除你的部署，如果你减少实例的数量，如果出现硬件问题，......你会丢失这里保存的所有数据。如果要保留文件，则应改用 blob 存储。但是在您的情况下，您需要将文件作为某种缓存机制，本地资源是完美的。

如果您的目标是缓存数据，您可能需要查看 Windows Azure 中包含的缓存功能：Windows Azure 中的[缓存](http://msdn.microsoft.com/en-us/library/windowsazure/gg278356.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T19:04:31.147

Blob 访问并不复杂。实际上，您可以将一个 zip 文件从 blob 存储下载到本地磁盘，解压缩它，然后从这 5,000 个小文件中启动您的 wcf 服务。

查看[此 msdn 页面](http://msdn.microsoft.com/en-us/library/windowsazure/ee772800.aspx)文档`DownloadBlobToFile()`。关键部分：

```
CloudBlobClient blobClient = 
        new CloudBlobClient(blobEndpoint, new StorageCredentialsAccountAndKey(accountName, accountKey));

    // Return a reference to the blob.
    CloudBlob blob = blobClient.GetBlobReference("mycontainer/myblob.txt");

    // Download the blob to a local file.
    blob.DownloadToFile("c:\\mylocalblob.txt"); 
```

现在：我不同意保存到 C: 上的根文件夹。相反，您应该获取一些本地存储（易于配置）。在角色配置中配置本地存储后，只需询问角色环境，并询问根路径：

```
var localResource = RoleEnvironment.GetLocalResource("mylocalstorage");
var rootPath = localResource.RootPath; 
```

注意：正如@KingPancake 提到的，您*可以*使用 Azure 驱动器。但是：请记住，Azure 驱动器只能由一个实例写入。您需要为其他实例制作额外的快照。我认为使用简单的 blob 复制文件（作为单个 zip 文件或单个文件）然后从那里开始会更简单。

您提到了对网络+带宽的担忧。您无需为同一数据中心内的带宽付费。另外：速度非常快：每核 100Mbps。因此，即使使用小型实例，您也可以非常快速地复制文件，当您使用较大的实例时更是如此。

最后一个想法：在不使用 blob 存储或 Azure 驱动器（作为 vhd 安装在 blob 存储中）的情况下，访问 5,000 个文件的唯一其他方法是从外部源下载文件或将它们与 Windows 捆绑Azure 包（然后它们会显示在您的应用程序文件夹中，位于您将它们放入的任何子文件夹下）。捆绑有两个缺点：

*   由于尺寸增加，上传部署包的时间更长
*   在不重新部署包的情况下无法更改任何单个文件。

通过存储在 blob 中，您可以轻松更改一个（或全部）小文件，而无需重新部署代码 - 您只需要发出信号以从 blob 存储重新读取或重新启动实例，以便它们自动下载新的文件。

# python - 如何让 bjam 检测我在 Windows 上的 Python 安装？

> ID：12114868
> 
> 赞同：2
> 
> 时间：2012-08-24T18:34:21.803
> 
> 标签：python, windows, boost, boost-python, bjam

我正在继承一个使用 bjam 和 boost-python 构建一些用 C++ 编写的 Python 模块的项目。Jamroot 之前包含：

```
constant PYTHON_ROOT : C:/Python26 ;
using python : 2.6 : $(PYTHON_ROOT) ;
use-project boost : C:/boost_1_40_0 ; 
```

我安装了 Python 2.7，所以我将其更改为：

```
using python : 2.7 : C:/Python27 ; 
```

然后我跑了`bjam --toolset=msvc --with-python`，它失败了（在非常慢的“...耐心...”消息集之后），因为它找不到`pyconfig.h`或任何 Boost lib 文件。我将其更改为：

```
using python : 2.7 : C:/Python27/python.exe : C:/Python27/include : C:/Python27/lib ; 
```

明确说明路径，这似乎已经解决了`pyconfig.h`问题，尽管我在上面的行的 2.6 版本上遇到了问题，即使我指定了`--python=2.7`.

现在我得到一堆 Boost 链接器错误，例如`LINK : fatal error LNK1104: cannot open file 'libboost_filesystem-vc90-mt-1_40.lib'`，即使它们存在于`C:/boost_1_40_0/stage/lib/`.

任何想法我缺少什么配置标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:50:38.757

根据 Jamroot 文件中的内容，您可能需要在开头添加几行：

`use-project boost : <Full path to your boost root directory> ;`

这应该告诉您的项目使用目录中的 boost。

此外，在您的项目行中，一旦您有了 use-project boost 命令，您就可以在项目定义的需求部分添加 boost python 的库需求：

`<library>/boost/python//boost_python`

将这两行添加到我的 Jamroot 文件中，我不再遇到链接问题。

如果您可以发布您的 Jamroot 文件，我们可以查看是否需要更具体的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:42:31.697

我认为这是 "C:/boost_1_40_0" 中的 "Boost.Python" 是用 Python2.6 构建的，但是你想将 Python2.6 的 "Boost.Python" 用于现在的 Python2.7 二进制文件和库。这是一个常见的错误。你应该用 Python2.7 重建 Boost 源包！

# objective-c - Objective-c：引用 ivar 持久化？好主意？

> ID：12114870
> 
> 赞同：0
> 
> 时间：2012-08-24T18:34:29.683
> 
> 标签：objective-c, ios, pointers, reference

我有一种情况，我要保留对需要持久的 ivars 的引用。在一个对象中，我有一组指向另一个对象中的 ivars 的指针，它们在程序的整个生命周期中使用。换句话说，我不只是传递一个引用来检索一个值——我保留了指针。

这是有效的吗？是否有可能 ivars 可能会移动？是否存在对象实例化对象在程序不知道的情况下在运行时移动的情况？或者，对象是否准确地停留在它们创建的位置。如果是后者，有什么理由不按我的方式使用引用吗？

我正在使用ARC。

注意：这可能不是一开始就设计它的好方法，但是......它已经完成并且工作了 99%！（除了重新启动整个手机的严重崩溃......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:42:51.330

对象及其实例变量一旦创建就不会移动。但是，您还需要保持对包含 ivar 的对象的强引用。否则，对象可能会被释放，留下一个悬空指针。

请注意，拥有指向另一个对象的实例变量的指针通常是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:18:16.630

假设 A 类的对象想要持久地访问 B 类对象的 ivars（在您的示例中）。

您通常所做的是在 A 类中创建一个属性（带有`strong`注释，如`@property (strong) ClassB *myBVar`）以引用 B 类的对象。如果要设置或读取 B 的属性，请使用点表示法或调用 getter/setter 方法：

```
myBVar.name = @"Jim";
NSLog(@"Name:%@",myBVar.name);

[myBVar setName:@"Jim"];
NSLog(@"Name:%@",[myBVar name]); 
```

您永远不会直接调用 ivar，因为它的实现可能会发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:52:49.010

虽然从外部访问 ivars 没有技术问题（如 rob 所述），但仍然需要考虑架构设计：您采用的方法打破了封装。此外，这对于 Objective-C 来说非常少见。

因此，关于代码的可维护性，我建议重构代码。在 Objective-C 中没有`friend`C++ 中的声明，因此从声明类外部访问 ivars 是不常见的。

# mysql - 如何在 MySQL 中使用 select 进行更新

> ID：12114871
> 
> 赞同：0
> 
> 时间：2012-08-24T18:34:30.773
> 
> 标签：mysql, sql-update, sql

我有两个表，tableA 和 tableB，tableA 是电话主记录，tableB 包含 tableA 电话记录中最后交易的更新状态。我想将 tableB.status='ERROR' 中所有记录的值 tableA.active 更新为 b'0'。

这是我附带的 MySQL 语句，但给了我错误（**错误代码：1242。子查询返回超过 1 行**）

```
UPDATE tableA set tableA.active = b'0'
where
tableA.phone =
(Select  phone from  tableB  where tableB.status='ERROR'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T18:36:04.630

`=`正如错误所说，不能只匹配一行。您可以`IN`改用：

```
UPDATE tableA set tableA.active = b'0'
where
tableA.phone IN
(Select  phone from  tableB  where tableB.status='ERROR'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T18:38:35.440

作为[@Mathieu Imbert 正确答案](https://stackoverflow.com/a/12114891/623041)的替代方法，您可以使用多表`UPDATE`语法来连接表：

```
UPDATE tableA JOIN tableB USING (phone)
SET    tableA.active = b'0' WHERE tableB.status = 'ERROR' 
```

# html - 在 JSP 中使用输入作为 URL

> ID：12114885
> 
> 赞同：0
> 
> 时间：2012-08-24T18:35:42.477
> 
> 标签：html, jsp

我有一个

```
Enter URL: <input type = "text" name= "aURL"/> 
```

在我的表单中，我希望在 JSP 中成为可点击的 URL。

我试过：

```
<% String aURL = request.getParameter("activityURL"); %>

<a href = "<%= aURL %>" ></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:42:35.833

您的链接没有正文（即`<a>`和之间没有任何内容`</a>`），因此任何内容都不会在视觉上显示为可点击链接。您需要为链接提供一个正文，以便最终用户可以单击可见的内容*。*

例如文本“点击这里”：

```
<a href="<%= aURL %>">click here</a> 
```

或者只是 URL 本身：

```
<a href="<%= aURL %>"><%= aURL %></a> 
```

### 也可以看看：

*   [HTML 初学者教程](http://htmldog.com/guides/htmlbeginner/)-[链接](http://htmldog.com/guides/htmlbeginner/links/)

* * *

**与具体问题无关**：您有一个巨大的[XSS 攻击](http://en.wikipedia.org/wiki/Cross-site_scripting)漏洞，其中包含在 HTML 源代码中未转义的内联用户控制输入。如果您的网站具有敏感的后端和/或涉及会话，这将非常危险。开始学习[JSTL](https://stackoverflow.com/tags/jstl/info) / [EL](https://stackoverflow.com/tags/el/info)并发现[`fn:escapeXml()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/escapeXml.fn.html)使其 XSS 攻击安全的功能。

```
<a href="${fn:escapeXml(param.aURL)}">click here</a> 
```

# user-interface - 使用哪个框架来设计这个 Web 界面？

> ID：12114887
> 
> 赞同：0
> 
> 时间：2012-08-24T18:35:45.347
> 
> 标签：user-interface, scripting, interface, web, web-frameworks

我想创建一个网页，其中记录了有关用户权限的手动输入数据，如下所示，这实际上是从 MySQL 表中提取数据。

它应该采取的*行动*方式是，每当有人更新表以覆盖一个值时，旧值都会作为“过去的修订版”存储在日志中——我在数据库方面没有问题，但我希望那些过去的修订版显示在网站上当前数据的后面，如下所示。

有人需要能够一目了然地看到当前数据，而且还需要在单击时以某种方式扩展的过去修订。我希望在不刷新页面的情况下完成此操作，所以可能是 jQuery 或一些活动脚本？

这就是这里问题的核心，是什么技术可以轻松完成这个接口的需求？大家有什么推荐的？示例将非常有益。提前致谢。

![](../Images/f251d4d966190e60db12a070a3642f85.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:23:48.757

您可以尝试使用 SVG（以及一些用于丰富界面的 jquery）：

[http://www.w3schools.com/svg/default.asp](http://www.w3schools.com/svg/default.asp)

# events - 带有绑定内联元素的 knockout.js 鼠标悬停闪烁

> ID：12114889
> 
> 赞同：2
> 
> 时间：2012-08-24T18:36:03.063
> 
> 标签：events, knockout.js, knockout-2.0

`mouseover`使用 knockout.js ，我`mouseout`在包含`<div>`. 处理程序切换布尔可观察对象。在`<div>`a 中`<p>`，其可见性与这些布尔值绑定。即滚动`<div>`显示`<p>`。的内容`<p>`绑定到模型中的可观察对象。

我发现如果绑定的内容`<p>`包含一个内联元素 - 例如`<em>`- 滚动文本中的内容`<em>`会导致`<p>`闪烁。任何内联元素似乎都会发生同样的情况。如果`<p>`不绑定的内容，则不会发生此问题。

`mouseenter`我通过使用 JQuery和`mouseleave`事件为我的应用程序找到了一种解决方法。

[在这个小提琴](http://jsfiddle.net/zimady/EyEzx/)中演示了所有 3 个案例。

这是预期的行为、错误还是我的疏忽？是否有不依赖于 JQuery 事件的解决方法？

（问题已在 OS X 10.7.4 中的 Chrome 21.0、Safari 6.0 和 FF 10.0.2 以及 Windows 7 中的 Chrome 和 IE 中验证）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:21:44.990

这只是 和 之间的区别`mouseleave`，`mouseout`并且是预期的行为。本文对此进行了概述：[http ://www.mkyong.com/jquery/different-between-mouseout-and-mouseleave-in-jquery/](http://www.mkyong.com/jquery/different-between-mouseout-and-mouseleave-in-jquery/)

如果我要这样做，我会用 css 来做。除非您需要真正了解某些内容或基于鼠标悬停执行高级操作/操作，否则您可以非常轻松地控制基本可见性（演示中不需要淘汰赛）：

[http://jsfiddle.net/WLShQ/](http://jsfiddle.net/WLShQ/)

HTML：

```
<div class="hoverbox">
    <p>Mouse over here...</p>
    <p class="extra">Then roll over <em>this red text</em></p>
    <p class="extra">It doesn't flicker!</p>
</div> 
```

和CSS

```
div.hoverbox p.extra {
    display: none;
}

div.hoverbox:hover p.extra {
    display: block;
} 
```

# notifications - xmonad 中的 KDE 弹出通知

> ID：12114890
> 
> 赞同：7
> 
> 时间：2012-08-24T18:36:03.787
> 
> 标签：notifications, kde, xmonad

我将 xmonad 与 KDE 一起使用，并希望使用它的弹出通知。默认情况下，第一个弹窗显示正确，但它消失后，下一个弹窗将不会显示。如果我添加一个新的“通知”小部件 - 它可以再显示一个弹出窗口，但之后会出现相同的情况。如果将这些行添加到 xmonad 配置（我不太明白，它是如何工作的），弹出窗口将按预期开始工作：

```
, manageHook = ((className =? "krunner" <||> className =? "Plasma-desktop") >>= return .
    not --> manageHook kde4Config) <+>
    (kdeOverride --> doFloat) <+> myManageHook 
```

在一般情况下，和

```
[ className =? "Plasma-desktop"      --> doFloat <+> doF W.focusDown ] 
```

在 myManageHook 中。

但是现在，因为'className =? “Plasma-desktop”' 条件太一般，启动时会发生非常奇怪的事情。如果在 KDE 加载后将此行添加到配置中，一切正常。有没有办法找到确切的通知窗口，或者只有在完全加载 KDE 后才使用此行，或者可能是使通知工作的更好方法？

谢谢你，抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T00:19:00.253

我还使用 xmonad 和 kde，以下对我有用。

```
import XMonad  
import XMonad.Config.Desktop
import XMonad.Hooks.EwmhDesktops  
import XMonad.Hooks.ManageDocks -- dock/tray mgmt  
import XMonad.Hooks.DynamicLog -- statusbar  
import XMonad.Actions.CycleWS -- workspace-switching  
import XMonad.Util.EZConfig -- append key/mouse bindings  
import XMonad.Util.Run(spawnPipe)  
import XMonad.Config.Kde  
import XMonad.Layout  
import XMonad.Layout.NoBorders ( noBorders, smartBorders )  
import XMonad.Layout.Spacing  
import System.IO  

myManageHook = composeAll  
  [ className =? "yakuake" --> doFloat  
  , className =? "Yakuake" --> doFloat  
  , className =? "Kmix" --> doFloat  
  , className =? "kmix" --> doFloat  
  , className =? "plasma" --> doFloat  
  , className =? "Plasma" --> doFloat  
  , className =? "plasma-desktop" --> doFloat  
  , className =? "Plasma-desktop" --> doFloat  
  , className =? "krunner" --> doFloat  
  , className =? "ksplashsimple" --> doFloat  
  , className =? "ksplashqml" --> doFloat  
  , className =? "ksplashx" --> doFloat  
  ]  

...
...

main = do  
  xmonad $ ewmh desktopConfig  
    { modMask = mod4Mask  
    , terminal = "konsole"  
    , manageHook = manageDocks <+> myManageHook <+> manageHook desktopConfig  
    , borderWidth = 1
    , normalBorderColor = "#abc123"
    , focusedBorderColor = "#456def"
    , layoutHook = avoidStruts myLayout
    , workspaces = myWorkspaces
    , startupHook = startupHook desktopConfig
    , logHook = logHook' xmproc
    }
    `additionalKeysP` myKeys

... 
```

# c# - 如何通过 Func 列表进行枚举 过滤集合

> ID：12114897
> 
> 赞同：2
> 
> 时间：2012-08-24T18:36:13.303
> 
> 标签：c#, linq, delegates, lambda

我正在尝试通过 a 枚举`List<Func<InstagramUser,bool>>`来过滤`List<InstagramUser>`. 我的代码编译，但只返回整个列表，未过滤，当`display()`被调用。

我的问题是，保存一组 lambda 表达式然后可以用来过滤另一个集合的正确方法是什么？

```
public class InstagramDisplay {
    public IList<InstagramUser> instagramUsers;
    public IList<Func<InstagramUser, bool>> instagramFilters; 

    public InstagramDisplay() {
        instagramUsers = new List<InstagramUser>();
        instagramFilters = new List<Func<InstagramUser, bool>>();
    }

    public void addFilter(Func<InstagramUser, bool> filter, object filterValue) {
        if ((int)(filterValue ?? 0) > 0)
            instagramFilters.Add(filter);
    }

    public IEnumerable<InstagramUser> display() { //filter not working
        instagramFilters.ToList().ForEach(filter => instagramUsers.Where(filter));
        return instagramUsers;
    }
} 
```

调用 - 只返回完整的集合，未过滤：

```
InstagramDisplay instagramDisplay = new InstagramDisplay();
instagramDisplay.instagramUsers = (List<InstagramUser>)context.Cache[CACHE_KEY];
instagramDisplay.addFilter(u => u.id == instagramId, instagramId);
context.Response.Write(javascriptSerializer.Serialize(instagramDisplay.display()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:39:50.467

如果您想包含与*所有*过滤器匹配的用户（`AND`比较）：

```
instagramUsers.Where(u => instagramFilters.All(f => f(u))); 
```

如果要包含匹配 1 个或多个过滤器的用户，请更改上述语句中的`All`by `Any`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:38:55.287

问题是您的`ForEach`语句实际上并没有使用或存储`Where`您正在运行的方法的结果。您需要构建一个结果`IEnumerable<T>`，并对其进行系列过滤。

你可以这样写：

```
public IEnumerable<InstagramUser> display() { 
    IEnumerable<InstagramUser> users = instagramUsers;
    foreach(var filter in instagramFilters)
        users = users.Where(filter);
    return users;
} 
```

# mysql - MySQL 查询优化；SELECT 多个字段与 JOIN

> ID：12114899
> 
> 赞同：0
> 
> 时间：2012-08-24T18:36:17.593
> 
> 标签：mysql, sql, database, query-optimization

我们有一个相对简单的查询，它跨 4 个表执行 LEFT JOIN。A 是“主”表或层次结构中最顶层的表。B链接到A，C链接到B。此外，X链接到A。所以层次结构基本上是

```
A
C => B => A
X => A 
```

查询本质上是：

```
SELECT
    a.*, b.*, c.*, x.*
FROM
    a
    LEFT JOIN b ON b.a_id = a.id
    LEFT JOIN c ON c.b_id = b.id
    LEFT JOIN x ON x.a_id = a.id
WHERE
    b.flag = true
ORDER BY
    x.date DESC
LIMIT 25 
```

通过`EXPLAIN`，我已经确认**正确的索引已经到位**，并且内置的 MySQL 查询优化器**正在正确和正确地使用这些索引**。

所以这是奇怪的部分......

当我们按原样运行查询时，运行大约需要 1.1 秒。

但是，在进行了一些检查之后，似乎如果我删除了大部分 SELECT 字段，我的速度就会得到**显着**提升。

所以如果我们把它变成一个两步查询过程：

1.  第一个查询与上面相同，只是将 SELECT 子句更改为 only`SELECT a.id`而不是`SELECT *`
2.  第二个查询也与上面相同，除了将 WHERE 子句更改为仅对`a.id IN`查询 1 的结果执行一次，而不是我们之前的结果

结果是截然不同的。第一个查询是 0.03 秒，第二个查询是 0.02 秒。

在代码中执行这个两步查询本质上使我们的性能提高了 20 倍。

所以这是我的问题：

这种类型的优化不应该已经在数据库引擎中完成了吗？为什么实际选择的字段的差异会对查询的整体性能产生影响？

归根结底，它只是选择完全相同的 25 行并返回这 25 行的完全相同的完整内容。那么，为什么性能差距如此之大呢？

添加于太平洋夏令时间 2012 年 8 月 24 日下午 13:02

感谢 eggyal 和invertedSpear 的反馈。首先，这不是缓存问题——我已经在每种方法之间交替运行了多次（大约 10 次）两个查询的测试。第一个（单个查询）方法的结果平均为 1.1 秒，第二个（2 个查询）方法的结果平均为 0.03+0.02 秒。

在索引方面，我想我已经做了一个 EXPLAIN 来确保我们通过键，并且在大多数情况下我们是。但是，我只是再次快速检查了一下，还有一件有趣的事情需要注意：

较慢的“单一查询”方法不显示第三行的“使用索引”的额外注释：

```
+----+-------------+-------+--------+------------------------+-------------------+---------+-------------------------------+------+----------------------------------------------+
| id | select_type | table | type   | possible_keys          | key               | key_len | ref                           | rows | Extra                                        |
+----+-------------+-------+--------+------------------------+-------------------+---------+-------------------------------+------+----------------------------------------------+
|  1 | SIMPLE      | t1    | index  | PRIMARY                | shop_group_id_idx | 5       | NULL                          |  102 | Using index; Using temporary; Using filesort |
|  1 | SIMPLE      | t2    | eq_ref | PRIMARY                | PRIMARY           | 4       | dbmodl_v18.t1.organization_id |    1 | Using where                                  |
|  1 | SIMPLE      | t0    | ref    | bundle_idx,shop_id_idx | shop_id_idx       | 4       | dbmodl_v18.t1.organization_id |  309 |                                              |
|  1 | SIMPLE      | t3    | eq_ref | PRIMARY                | PRIMARY           | 4       | dbmodl_v18.t0.id              |    1 |                                              |
+----+-------------+-------+--------+------------------------+-------------------+---------+-------------------------------+------+----------------------------------------------+ 
```

当我们仅查询 ID 时，它**确实显示“使用索引”：**

```
+----+-------------+-------+--------+------------------------+-------------------+---------+-------------------------------+------+----------------------------------------------+
| id | select_type | table | type   | possible_keys          | key               | key_len | ref                           | rows | Extra                                        |
+----+-------------+-------+--------+------------------------+-------------------+---------+-------------------------------+------+----------------------------------------------+
|  1 | SIMPLE      | t1    | index  | PRIMARY                | shop_group_id_idx | 5       | NULL                          |  102 | Using index; Using temporary; Using filesort |
|  1 | SIMPLE      | t2    | eq_ref | PRIMARY                | PRIMARY           | 4       | dbmodl_v18.t1.organization_id |    1 | Using where                                  |
|  1 | SIMPLE      | t0    | ref    | bundle_idx,shop_id_idx | shop_id_idx       | 4       | dbmodl_v18.t1.organization_id |  309 | Using index                                  |
|  1 | SIMPLE      | t3    | eq_ref | PRIMARY                | PRIMARY           | 4       | dbmodl_v18.t0.id              |    1 |                                              |
+----+-------------+-------+--------+------------------------+-------------------+---------+-------------------------------+------+----------------------------------------------+ 
```

奇怪的是，两者都列出了正在使用的正确索引......但我想它引出了问题：

为什么它们不同（考虑到所有其他条款都完全相同）？这是否表明它为什么更慢？

`EXPLAIN`不幸的是，当“额外”列在结果中为空白/空时，MySQL 文档没有提供太多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:17:12.623

比速度更重要的是，您的查询逻辑存在缺陷。当您在 WHERE 子句中测试 LEFT JOINed 列时（除了测试 NULL），您强制该连接表现得好像它是一个 INNER JOIN。相反，你会想要：

```
SELECT
    a.*, b.*, c.*, x.*
FROM
    a
    LEFT JOIN b ON b.a_id = a.id
        AND b.flag = true
    LEFT JOIN c ON c.b_id = b.id
    LEFT JOIN x ON x.a_id = a.id
ORDER BY
    x.date DESC
LIMIT 25 
```

我的下一个建议是检查`.*`您的 SELECT 中的所有这些。您真的需要*所有表中的**所有*列吗？

# xpages - 如何在 SSJS 的组合框中获取选项数量？

> ID：12114900
> 
> 赞同：0
> 
> 时间：2012-08-24T18:36:27.983
> 
> 标签：xpages, xpages-ssjs

我试过 getComponent("ComboBoxID").getChildCount() 但这似乎没有返回正确的数字。任何人都知道是否有我可以使用的方法？或者可能需要创建一个函数？

*编辑*- 有没有办法遍历选项并获取 CSJS 中的值？：

for (var i = 1; i < comboBox.options.length; i++){ pmtPlan = comboBox.options[i].value; ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:00:49.143

也许这个 XSnippet 可以提供帮助： [http ://openntf.org/XSnippets.nsf/snippet.xsp?id=get-selectable-values-of-a-component](http://openntf.org/XSnippets.nsf/snippet.xsp?id=get-selectable-values-of-a-component)

而不是打印可选值，您必须对它们进行计数。

希望这可以帮助

斯文

# visual-studio - 如何部署 aspdotnetstorefront 源代码更改？

> ID：12114901
> 
> 赞同：0
> 
> 时间：2012-08-24T18:36:36.917
> 
> 标签：visual-studio, dll, deployment, aspdotnetstorefront

我正在为客户实现一个 AspDotNetStorefront (ASPDNSF) 站点，他们已经购买了源代码，而我只是想做一些简单的事情，比如为产品图像添加 CSS 样式的 ID。

我已经进入源代码并使 AspDotNetStorefrontCore.XSLTExtensionBase.LookupProductImage() 方法只返回字符串“TEST”，期望任何产品图像都被“TEST”替换，使用 Visual Studio 的构建编译解决方案。它构建成功，/web/bin 目录中的 DLL 现在反映了与我的构建时间相同的修改日期，但呈现的页面不反映我的更改。我已经通过 ASPDNSF 管理页面重置了缓存，但仍然没有任何变化。

知道我错过了哪一步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:49:49.900

所以结果证明我是个白痴。XSLExtensionBase 中的许多方法都有几个重载，我只是在错误的重载中进行了更改。只需编译项目即可部署，但您必须更改正确的代码才能呈现您想要的内容！

# c++ - 使用 Win32/MFC 将 HTML 文件转换为 PDF

> ID：12114909
> 
> 赞同：3
> 
> 时间：2012-08-24T18:37:24.413
> 
> 标签：c++, winapi, mfc, pdf-generation

作为我申请的一部分，我的客户要求我包含一个自动电子邮件系统。作为该系统的一部分，我生成 HTML 代码并使用自动化发送它。外表。

但是，他们还需要将 HTML 文档的 PDF 副本作为附件发送。我最初的尝试涉及使用[libHaru](http://libharu.org/wiki/Main_Page)，这被证明很难有效使用，因为我需要从头开始创建 PDF 文档，这需要计算表格中每一行的位置，以及所有文本的定位等。

> 我想知道是否有一种方法可以通过使用 Win32/MFC 本身或外部库以编程方式将 HTML 代码（或 HTML 文件，如果需要）转换为 PDF 文档。

提前致谢！

编辑：澄清一下，我正在寻找能够最大限度地减少外部依赖的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:10:00.753

您应该评估此实用程序 wkhtmltopdf： [http ://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

您可以从命令行调用它，而无需运行安装程序。

我使用它将输出文档生成为 html，然后调用 ShellExecute(...) 将其转换为 PDF。这很棒！

里面使用webkit + qt。所以与现代 HTML 的兼容性是可以的。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:09:24.403

我会看一下[PDF Creator](http://www.pdfforge.org/pdfcreator/)，它可以用作 COM 对象（它的作用非常像打印机）。我没有用它来打印 HTML，所以我不确定，但我猜你可能最终不得不实例化一个 Web 浏览器控件来呈现 HTML，然后将它从那里提供给 PDF 控件.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:03:45.893

一些可能的答案在这个线程中：

[将 HTML 转换为 PDF 的 C++ 库？](https://stackoverflow.com/questions/427927/c-library-to-convert-html-to-pdf)

不确定它们是否会满足您的特定要求，但这些至少可以帮助您入门。

编辑：

[这里](https://stackoverflow.com/questions/323354/export-html-to-pdf-c-windows)还有一些其他可能的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T01:52:23.853

不是 MFC，但您可以尝试 QtWebKit。它可以将 HTML 渲染和导出为 PDF、PNG、JPEG

# javascript - 使用 Javascript、ASP.NET 和 AJAX 防止重复的数据库条目

> ID：12114910
> 
> 赞同：0
> 
> 时间：2012-08-24T18:37:38.483
> 
> 标签：javascript, asp.net, ajax

提交表单时，我需要检查是否已经存在重复。如果是这样，它会停止提交表单并允许此人再次编辑字段。我以前从未真正使用过 ajax，但我已经读过类似的东西，这将是最好的使用。我也不能用PHP，但是可以用javascript和asp。现在，我可以通过执行以下操作来检查数据库是否已经存在重复值：

```
var  SQL =  " SELECT COUNT(LeaveID) AS Dup, personalID, StartDate, EndDate, StartTime, EndTime, LeaveType";
     SQL += " FROM onLeave";
     SQL += " WHERE personalID = " + ipersonalID;
     SQL += " GROUP BY personalID, StartDate, EndDate, StartTime, EndTime, LeaveType";
     SQL += " HAVING COUNT(LeaveID) > 1";
     SQL += " ORDER BY StartDate DESC";
var rs = Connection.Execute(SQL);

writeTable(rs) 
```

writetable(rs) 只是将数据输出到 html 表中，而 ipersonalID 是查看页面的人的当前 ID。提交只是一个简单的输入，如下所示：

```
<input type="button" name="btnSubmit" value="Submit" onclick="submitSkedChange()" id="btnSubmit"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:03:10.060

我同意@asawyer 的评论。更好的方法是将唯一约束添加到表中并让它失败。在您后面的代码中，您只需捕获异常并将错误显示给用户。您可以专门捕获`Violation of unique constraint`错误并采取相应措施。对于任何其他错误，您必须决定要做什么。

上述方法有几个好处IMO：

1.  少了一个数据库调用。
2.  由于上述原因，并且不必进行 ajax 调用，应该会表现得更好
3.  它在数据库级别强制执行数据完整性，这是一件好事。

# sql - 如何避免在这里使用 while 循环？

> ID：12114911
> 
> 赞同：0
> 
> 时间：2012-08-24T18:37:39.480
> 
> 标签：sql, loops, stored-procedures, while-loop

作为一个从未从任何人那里得到过 SQL 指导/指示的人，我想听听你们应该如何进行以下查询。据我所知，像这样的循环是一种非常糟糕的做事方式。

我正在从这个查询中创建一个表：

```
DECLARE @maxReleases int
SET @maxReleases = 100000

DECLARE @RootReleases table (ReleaseId int, RootReleaseId int)

DECLARE @ctr int
Set @ctr = 1

WHILE(@ctr <= @maxReleases)
BEGIN
WITH cte_Releases
( 
  ReleaseId,
  Name, 
  ParentReleaseID

) 
AS( 
  SELECT  
   ReleaseId, 
   Name,
   ParentReleaseID

  FROM Releases
  Where ReleaseId = @ctr

 UNION ALL 

 SELECT  
  R.ReleaseId,
  R.Name,
  R.ParentReleaseID 
 FROM Releases R
 INNER JOIN cte_Releases ON cte_Releases.ParentReleaseID = R.ReleaseId
) 
INSERT INTO @RootReleases 
SELECT max(ReleaseId) as ReleaseId, min(ReleaseId) as RootReleaseId FROM cte_Releases

SET @ctr = @ctr + 1
END 
```

这段代码的目的是建立一个表，将记录与其最远的父记录连接起来，并将其插入到一个表中，以便在查询的其他地方引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:42:18.317

我没有要测试的数据，所以告诉我如果你按照这些思路运行会发生什么。应该可以使用 group by 和聚合。如果您提供示例数据，我可能会提供更多帮助。

```
 DECLARE @RootReleases table (ReleaseId int, RootReleaseId int)

;  WITH cte_Releases
( 
  ReleaseId,
  Name, 
  ParentReleaseID

) 
AS( 
  SELECT  
   ReleaseId, 
   Name,
   ParentReleaseID

  FROM Releases
 -- Where ReleaseId = @ctr

 UNION ALL 

 SELECT  
  R.ReleaseId,
  R.Name,
  R.ParentReleaseID 
 FROM Releases R
 INNER JOIN cte_Releases ON cte_Releases.ParentReleaseID = R.ReleaseId
) 
INSERT INTO @RootReleases 
SELECT max(ReleaseId) as ReleaseId, min(ReleaseId) as RootReleaseId FROM cte_Releases
WHERE ReleaseId BETWEEN 1 AND 100000
GROUP BY ReleaseId 
```

# python - 如何检查字符串列表中是否包含int列表？

> ID：12114913
> 
> 赞同：-1
> 
> 时间：2012-08-24T18:37:47.170
> 
> 标签：python

我有 2 个默认值（列表）；其中一个只显示数字，另一个包含整行文本。

我有 int 列表（查找）

```
[112, 896, 455, 1164, 1164, 336, 386, 521, 1011, 1033] 
```

和字符串列表（描述）

```
[['ZNF91', 'Q05481', 'VAR_057393', 'p.Tyr112His', 'Polymorphism', 'rs296091', '-'],
 ['ZNF91', 'Q05481', 'VAR_057394', 'p.Thr896Ala', 'Polymorphism', 'rs296093', '-'],...] 
```

我试图在`if`运行程序时提出要检查的语句，基本上，当我使用与该行匹配的数字时，我想打印该字符串的行，例如，如果我使用与第一行匹配的数字 112 （p.Tyr112His），我想让它打印包含 p.Tyr112His 的整行；这是：

> 'ZNF91'、'Q05481'、'VAR_057393'、'p.Tyr112His'、'多态性'、'rs296091'、'-'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:00:12.813

查看此问题的修订历史记录，您似乎在迭代 csv 文件时同时构建整数列表和字符串列表。如果是这种情况，您可能需要考虑稍微不同的数据结构：

```
data = defaultdict(list)
with open(csvfile) as f:
    reader = csv.reader(f)
    for line in reader:
        number = ...  #parse the number from the line here
        data[number].append(line) 
```

现在，如果你想访问所有包含数字 112 的行，你可以这样做：

```
for line in data[112]:
   print (line) 
```

如果您需要数字列表，您可以轻松获得：（ `list(data.keys())`或者仅`data.keys()`当您使用 python 2.x 时）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:56:49.190

可以有许多不同的方法来做到这一点。以下是一种简单的方法

```
list_of_ints=[112, 896, 455, 1164, 1164, 336, 386, 521, 1011, 1033]
list_of_strings=[['ZNF91', 'Q05481', 'VAR_057393', 'p.Tyr112His', 'Polymorphism', 'rs296091', '-'],
 ['ZNF91', 'Q05481', 'VAR_057394', 'p.Thr896Ala', 'Polymorphism', 'rs296093', '-']]
for ints in list_of_ints:
    for st in list_of_strings:
        if str(ints) in ','.join(st):
            print st

['ZNF91', 'Q05481', 'VAR_057393', 'p.Tyr112His', 'Polymorphism', 'rs296091', '-']
['ZNF91', 'Q05481', 'VAR_057394', 'p.Thr896Ala', 'Polymorphism', 'rs296093', '-'] 
```

# windows-8 - 将现有的 .NET 程序集转换为 Windows 运行时组件库？

> ID：12114914
> 
> 赞同：1
> 
> 时间：2012-08-24T18:37:49.310
> 
> 标签：windows-8, windows-runtime, visual-studio-2012

如何更改现有项目以构建为 Windows 运行时组件库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:06:16.137

[安装 VS 命令](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)

IT 有一个[选择](http://vscommands.squaredinfinity.com/blog)

> 转换为可移植类库
> 
> 现在可以将 C# 类库转换为可移植类库。选项可从 C# 类库项目的上下文菜单中获得。

您只需右键单击项目文件并选择“转换为便携式库”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:43:19.427

取决于项目类型。如果它是类库，您可以转到项目-> 属性-> 应用程序选项卡，然后在“输出类型”下选择“Windows 运行时组件”。

![在此处输入图像描述](../Images/49576e2afa9c15f9add26e2705517131.png)

# android - 通知集全屏活动

> ID：12114917
> 
> 赞同：10
> 
> 时间：2012-08-24T18:38:03.787
> 
> 标签：android, android-notifications

我有以下代码，假设在通知期间初始化一个新活动，它位于服务类中

```
Intent push = new Intent();
push.addFlags( Intent.FLAG_ACTIVITY_NEW_TASK );
push.setClass( context, MyActivity.class );
PendingIntent pi = PendingIntent.getActivity( context, 0, push, PendingIntent.FLAG_ONE_SHOT );

long[] vibraPattern = {0, 500, 250, 500 };

Notification noti = new Notification.Builder( getApplicationContext() )
     .setVibrate( vibraPattern )
     .setDefaults( Notification.DEFAULT_SOUND )
     .setFullScreenIntent( pi , true )
     .setContentIntent( pi )
     .getNotification();

notifMng.notify( 0 , noti ); 
```

声音和振动很好，所以通知成功通知，但是 MyActivity 从未创建，即使它是此通知的 FullScreenIntent。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:03:05.720

`Notification.Builder`需要 API 11+。改为使用`NotificationCompat.Builder`，仅支持 API 4+，并允许在受支持的设备上实现新功能（即 Jelly Bean 中可用的新通知样式），而旧设备则忽略新功能。它使一切变得更加顺畅。

有关详细信息，请参阅此链接：http: [//developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:47:39.250

由于 API 在不同版本之间变化如此之大，通知很棘手。您的解决方案针对 API 级别 11+ (3.0.x)，不适用于任何 2.x 设备。getNotification() 方法也在 4.1 中被弃用...

您的通知缺少要显示的内容。它实际上会在收到通知时启动活动，但不显示通知，因为它没有任何要显示的内容。

如果您想在收到推送后立即启动活动，请添加 .setFullScreenIntent( pi , true )。

我已经修改了您的代码以使其正常工作：

```
Intent push = new Intent();
push.setClass(context, MyActivity.class);
PendingIntent pi = PendingIntent.getActivity(context, 0, push, 
                    PendingIntent.FLAG_ONE_SHOT);

long[] vibraPattern = { 0, 500, 250, 500 };

Notification noti = new Notification.Builder(getApplicationContext())
            .setVibrate(vibraPattern)
            .setDefaults(Notification.DEFAULT_SOUND)
            .setContentIntent(pi)
            .setContentTitle("Title")
            .setContentText("content text")
            .setSmallIcon(R.drawable.ic_launcher)
            .getNotification();

    NotificationManager notificationManager = 
        (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
         notificationManager.notify(0, noti); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-09-04T22:30:42.423

您需要以下三个变量才能通过：

1.  颜色
2.  如果打开 LED 是打开的
3.  如果关闭 LED 灯亮

如果您启用 2 和 3，您的 LED 将闪烁，如果您禁用 2 和 3，您的 LED 将关闭

```
NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(context );
mBuilder.setLights(Color.RED, 1, 1); // will blink 
```

# wpf - 框架需要在页面显示之前加载网站

> ID：12114919
> 
> 赞同：0
> 
> 时间：2012-08-24T18:38:12.797
> 
> 标签：wpf, frame

我有以下简单的程序，可以在两个不同页面之间来回切换框架的上下文。第一页只是一张图片，可以正常加载，但第二页是一个框架，它的源设置为实时天气雷达。 [http://www.wunderground.com/auto/wxmap/IN/Carmel.html](http://www.wunderground.com/auto/wxmap/IN/Carmel.html)。当计时器将我的框架的上下文切换到天气雷达页面时，它才开始加载并花费前 3-4 秒加载页面。我检查了框架的 .Navigated 事件，它在我创建页面并将其分配给 _nextslide 后几乎立即触发，那么为什么我的框架要等待页面显示以呈现网站？如果我可以显示该站点已满载，那就太完美了。

XAML：

```
<Page>
    <Viewbox Stretch="Fill" Margin="15">
        <Frame Height="800" Width="1280" Content="{Binding SlideFrame}"/>
    </Viewbox>
</Page> 
```

C＃：

```
private Page _slideFrame;
private Page _nextFrame;
private DispatcherTimer _slideChangeTimer;
private int currentSlide = 1;

// Property
public Page SlideFrame
{
    get { return _slideFrame; }
    set
    {
        _slideFrame = value;
        NotifyPropertyChanged("SlideFrame");
    }
}

// ViewModel Constructor
public Page1ViewModel()
{
    this.SlideFrame = new Slide1();
    _nextFrame = new Slide2();

    _slideChangeTimer = new DispatcherTimer();
    _slideChangeTimer.Interval = TimeSpan.FromSeconds(8);
    _slideChangeTimer.Tick += new EventHandler(SlideChange_Tick);
    _slideChangeTimer.Start();
}

// 8 second timer event handler
private void SlideChange_Tick(object sender, EventArgs e)
{
    if (currentSlide == 1)
    {
        this.SlideFrame = _nextFrame;
        _nextFrame = new Slide1(false);
        currentSlide = 2;
    }
    else
    {
        this.SlideFrame = _nextFrame;
        _nextFrame = new Slide2();
        currentSlide = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:42:58.913

不使用框架或网页，但它显示了如何在后台获取数据以不阻塞计时器中的 UI。如果尚未获取最后一个网页，您应该添加逻辑以等待。

```
<Button Grid.Row="0" Content="AmIhot" Click="onClick" Width="60" HorizontalAlignment="Left"/>
<TextBlock Grid.Row="1" x:Name="hotText" />
<TextBlock Grid.Row="2" x:Name="revolvingText" Text="{Binding Path=RevolvingText, Mode=OneWay}" />

using System.ComponentModel;
using System.Threading;
using System.Threading.Tasks;

namespace waste09
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        private System.Windows.Threading.DispatcherTimer _slideChangeTimer;

        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = this;
            RevolvingText = "Starting text";
            _slideChangeTimer = new System.Windows.Threading.DispatcherTimer();
            _slideChangeTimer.Interval = TimeSpan.FromSeconds(8);
            _slideChangeTimer.Tick += new EventHandler(SlideChange_Tick);
            _slideChangeTimer.Start();
        }

        // 8 second timer event handler
        private void SlideChange_Tick(object sender, EventArgs e)
        {
            Task.Factory.StartNew(() =>
            {
                // this will NOT block the UI
                Thread.Sleep(4000);  // simulate a long fetch
                RevolvingText = "Fetched text " + Guid.NewGuid();
                NotifyPropertyChanged("RevolvingText");
            });
            RevolvingText = "Fetching data and UI not blocked ";
            NotifyPropertyChanged("RevolvingText");               
        }

        public string RevolvingText { get; private set; }

        private void onClick(object sender, RoutedEventArgs e)
        {
            hotText.Text = "Yes you are hot " + Guid.NewGuid();       
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
    }
} 
```

# javascript - 如何使用jQuery获取txt文件数据中的行数

> ID：12114922
> 
> 赞同：0
> 
> 时间：2012-08-24T18:38:29.567
> 
> 标签：javascript, jquery

我正在尝试从 txt 文件中获取数据，并且希望获取数据的总行。

TXT 文件示例：

```
    数据1 内容1 txt1
    数据2 内容2 txt2
    数据3 内容3 txt3
    数据4 内容4 txt4
    数据5 内容5 txt5
    ...

```

脚本文件示例：

```
$.get(txtFile, function(data) {
var rows = data.split('\r\n');                       
$.each(rows, function(rowIndex, row) {
    var data = row.split('\t');
    var dataName = $.trim(data[0]).toLowerCase();
    // (more code)
} 
```

我想知道是否有办法获取文本文件中数据的总行。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:53:04.547

当您的 rows 数组仅包含一个元素时，我怀疑 .split() 与您文件中的任何文本都不匹配。也许你的行不以 \r\n 结尾？

```
var rows = data.split('\n'); 
```

# php - 使用（osx）终端删除base64 Eval Junk

> ID：12114925
> 
> 赞同：0
> 
> 时间：2012-08-24T18:38:42.127
> 
> 标签：php, macos, terminal

尝试在大量 php 注入后进行清理——大约 6 个网站的 WordPress 模板中的每个 php 函数都充满了垃圾。

我已经把服务器上的所有东西都放到了本地机器上，我希望应该有一种好方法可以用终端删除所有巨大的代码字符串。

我对此几乎一无所知。

[http://devilsworkshop.org/remove-evalbase64decode-malicious-code-grep-sed-commands-files-linux-server/](http://devilsworkshop.org/remove-evalbase64decode-malicious-code-grep-sed-commands-files-linux-server/) 有很好的说明在服务器上进行清除，但替换我的路径/到/文件夹没有似乎在终端工作。

感觉我很接近了，但是，尽管我对终点站的方式视而不见，这似乎并不那么令人欣慰。

基于以上所述，这就是我所得到的——任何帮助都会非常感激。

```
grep -lr --include=*.php "eval(base64_decode" "/Users/Moxie/Desktop/portfolio-content" |     xargs sed -i.bak 's/<?php eval(base64_decode[^;]*;/<?php\n/g' 
```

*更新*

derobert——感谢一百万的帮助——

基本上，`<?php`实际函数之前的空格将其插入其中： `eval(base64_decode("DQplcnJvcl9yZXBvcnRpbmcoMCk7DQokcWF6cGxtPWhlYWRlcnNfc2VudCgpOw0KaWYgKCEkcWF6cGxtKXsNCiRyZWZlcmVyPSRfU0VSVkVSWydIVFRQX1JFRkVSRVInXTsNCiR1YWc9JF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddOw0KaWYgKCR1YWcpIHsNCmlmICghc3RyaXN0cigkdWFnLCJNU0lFIDcuMCIpIGFuZCAhc3RyaXN0cigkdWFnLCJNU0lFIDYuMCIpKXsKaWYgKHN0cmlzdHIoJHJlZmVyZXIsInlhaG9vIikgb3Igc3RyaXN0cigkcmVmZXJlciwiYmluZyIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsInJhbWJsZXIiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJnb2dvIikgb3Igc3RyaXN0cigkcmVmZXJlciwibGl2ZS5jb20iKW9yIHN0cmlzdHIoJHJlZmVyZXIsImFwb3J0Iikgb3Igc3RyaXN0cigkcmVmZXJlciwibmlnbWEiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJ3ZWJhbHRhIikgb3Igc3RyaXN0cigkcmVmZXJlciwiYmVndW4ucnUiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJzdHVtYmxldXBvbi5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJiaXQubHkiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJ0aW55dXJsLmNvbSIpIG9yIHByZWdfbWF0Y2goIi95YW5kZXhcLnJ1XC95YW5kc2VhcmNoXD8oLio/KVwmbHJcPS8iLCRyZWZlcmVyKSBvciBwcmVnX21hdGNoICgiL2dvb2dsZVwuKC4qPylcL3VybFw/c2EvIiwkcmVmZXJlcikgb3Igc3RyaXN0cigkcmVmZXJlciwibXlzcGFjZS5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJmYWNlYm9vay5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJhb2wuY29tIikpIHsNCmlmICghc3RyaXN0cigkcmVmZXJlciwiY2FjaGUiKSBvciAhc3RyaXN0cigkcmVmZXJlciwiaW51cmwiKSl7DQpoZWFkZXIoIkxvY2F0aW9uOiBodHRwOi8vd3d3LnN0bHAuNHB1LmNvbS8iKTsNCmV4aXQoKTsNCn0KfQp9DQp9DQp9"));`

字符会随着每个字符而变化，因此简单的查找和替换将不起作用（我很确定这是重点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:13:56.070

这是我的代码，证明是有效的解决方案。

我将所有文件下载到本地计算机并开始研究解决方案。这是我的解决方案{结合我所看到的}

```
 #!/bin/bash
    FILES=$(find ./ -name "*.php" -type f)
    for f in $FILES
    do
    echo "Processing $f file LONG STRING"
    sed -i 's#eval(base64_decode("DQplcnJvcl9yZXBvcnRpbmcoMCk7DQokcWF6cGxtPWhlYWRlcnNfc2VudCgpOw0KaWYgKCEkcWF6cGxtKXsNCiRyZWZlcmVyPSRfU0VSVkVSWydIVFRQX1JFRkVSRVInXTsNCiR1YWc9JF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddOw0KaWYgKCR1YWcpIHsNCmlmICghc3RyaXN0cigkdWFnLCJNU0lFIDcuMCIpIGFuZCAhc3RyaXN0cigkdWFnLCJNU0lFIDYuMCIpKXsKaWYgKHN0cmlzdHIoJHJlZmVyZXIsInlhaG9vIikgb3Igc3RyaXN0cigkcmVmZXJlciwiYmluZyIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsInJhbWJsZXIiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJsaXZlLmNvbSIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsIndlYmFsdGEiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJiaXQubHkiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJ0aW55dXJsLmNvbSIpIG9yIHByZWdfbWF0Y2goIi95YW5kZXhcLnJ1XC95YW5kc2VhcmNoXD8oLio/KVwmbHJcPS8iLCRyZWZlcmVyKSBvciBwcmVnX21hdGNoICgiL2dvb2dsZVwuKC4qPylcL3VybFw/c2EvIiwkcmVmZXJlcikgb3Igc3RyaXN0cigkcmVmZXJlciwibXlzcGFjZS5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJmYWNlYm9vay5jb20vbCIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsImFvbC5jb20iKSkgew0KaWYgKCFzdHJpc3RyKCRyZWZlcmVyLCJjYWNoZSIpIG9yICFzdHJpc3RyKCRyZWZlcmVyLCJpbnVybCIpKXsNCmhlYWRlcigiTG9jYXRpb246IGh0dHA6Ly93a3BiLjI1dS5jb20vIik7DQpleGl0KCk7DQp9Cn0KfQ0KfQ0KfQ=="));##g' $f
    echo "Processing $f file SMALL STRING"
    sed -i 's#eval(base64_decode.*));##g' $f
    done 
```

将其保存为 mybash.sh {来自您最喜欢的文本编辑器}

```
 $ sudo chmod +x mybash.sh //execute permission for script
    $ ./mybash.sh 
```

我使用了第一个 LONG STRING 因为模式总是相同的。这是上面代码的解释

*   **s#** - 起始分隔符 {#-delimiter 与 sed 规则中的 / 相同}
*   **评估（base64_decode。*））；****{ 第一个匹配的模式，Reg Exp [. - 匹配任何单个字符], [* - 匹配前面的元素零次或多次]}
*   **#** - 分隔符 {#} 的第二次出现，在 # 之后是空的，这基本上意味着替换第一个字符串 {eval(base64_decode.*));} WITH {''}
*   **#g** - 命令结束，SED 语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:51:24.290

因此，有人有权写入您服务器上的任意文件。我假设你已经清理了让他们进入的漏洞。

问题是，虽然这些`eval(base64_decode`东西很明显，而且必须离开，但入侵者可能已经把其他东西放在那里了。谁知道，也许他删除了`mysql_real_escape_string`某个地方，让您容易受到未来 SQL 注入的攻击？或者`htmlspecialchars`，让您容易受到 JavaScript 注入的攻击？本来可以做任何事的。甚至可能不是 PHP；你确定没有添加 JavaScript 吗？还是嵌入？

最好的确定方法是与已知良好的副本进行比较。你确实有版本控制和备份，对吧？

否则，您确实可以使用`perl -pi -e`该 PHP 代码进行替换，尽管匹配它可能很困难，具体取决于。这可能有效（在副本上工作！），并根据需要调整正则表达式中的间距：

```
perl -pi -e 's!<\?php eval\(base64_decode\(.*?\)\) \?>!!g' *.php 
```

但实际上，您应该手动检查每个文件，以确认不存在其他漏洞。即使您最后一个已知良好的副本有些旧，您也可以查看差异。

## 编辑：

好的，所以听起来你不想核对整个 PHP 块，只是 eval 行：

```
perl -pi -e 's!eval\(base64_decode\(.*?\)\);!!g' *.php 
```

如果还有要杀死的换行符等，您可能需要`\n`在第一个之前添加一个`!`。如果 base64 实际上有换行符，那么您需要`s`在`g`.

# jquery - jQuery UI Resizable - 与网格同步

> ID：12114927
> 
> 赞同：1
> 
> 时间：2012-08-24T18:38:45.130
> 
> 标签：jquery, jquery-ui, jquery-ui-resizable

我有两个可调整大小的元素，我需要它们来调整大小同步维护网格。似乎这两个选项不能一起工作。有任何想法吗？

演示： http: [//jsfiddle.net/CbYtT/2/](http://jsfiddle.net/CbYtT/2/) （尝试水平调整大小）

```
$(function() {

    $( "#this" ).resizable({
        alsoResize: "#that", 
        grid: 100

    });

    $( "#that" ).resizable({
        alsoResize: "#this", 
        grid: 100
    });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T17:46:31.163

它不漂亮，但它有效。

```
 $( "#this" ).resizable({
        handles: "e",
        resize: function(event, ui) {
            $( "#that" ).width($(this).width());
            $( "#that" ).height($(this).height());
        },
        stop: function(event, ui) {
            $( "#that" ).width($(this).width());
            $( "#that" ).height($(this).height());
        },
        grid: 100
    });

    $( "#that" ).resizable({
        handles: "e",
        resize: function(event, ui) {
            $( "#this" ).width($(this).width());
            $( "#this" ).height($(this).height());
        },
        stop: function(event, ui) {
            $( "#this" ).width($(this).width());
            $( "#this" ).height($(this).height());
        },
        grid: 100
    }); 
```

你的 JS 小提琴的工作版本

[http://jsfiddle.net/Robodude/CbYtT/3/](http://jsfiddle.net/Robodude/CbYtT/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-15T01:51:41.047

如果您有 10 个或更多需要调整大小的元素，这可能会变得非常难看。相反，让调整大小指向您要调整大小的所有元素共享的类。您可以像这样从任何元素调整大小。

```
 $( ".resizable" ).resizable({
    handles: "e",
    grid: 100,
    resize: function(event, ui) {
      $( ".resizable" ).width($(this).width());
    }
  }); 
```

[http://jsfiddle.net/CbYtT/240/](http://jsfiddle.net/CbYtT/240/)

# c++ - Cocos2d-x CCArray - 对象和精灵

> ID：12114928
> 
> 赞同：2
> 
> 时间：2012-08-24T18:38:47.910
> 
> 标签：c++, cocos2d-x

我是 c++ 和 cocos2d-x 的新手，我有一个问题。我有一个“弹丸”，它是 CCSprite，好的，我将它插入到数组中：

```
projectile->setTag(2);

_projectiles->addObject(projectile); 
```

但是当我需要它时：

```
CCSprite* proj;
CCARRAY_FOREACH(_projectiles,proj){
  CCSprite *projectile = proj;
  ... 
```

我有关于“_projectiles”的错误，里面有 CCObject。对不起我的英语不好，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:53:26.217

您必须将`proj`其存储在以下`CCArray`位置：`CCObject*``CCSprite*`

```
CCSprite *projectile = static_cast<CCSprite*>(proj); 
```

`dynamic_cast`如果您需要运行时检查，您也可以这样`proj`做`CCSprite`：

```
CCSprite *projectile = dynamic_cast<CCSprite*>(proj); //will return nullptr if failes to cast 
```

# ios - 无法将注释数据传递给 tableviewcontroller

> ID：12114931
> 
> 赞同：1
> 
> 时间：2012-08-24T18:38:56.230
> 
> 标签：ios, uitableview, mkannotation

编辑问题：

我正在尝试获取在地图视图中创建的注释（带有标题/副标题）并将我的地图上的所有注释推送到显示带有标题/副标题的列表的表格视图。

我有一个 RegionAnnotation.h/.m NSObject 文件，它可以进行反向地理编码，我需要填充 MapViewController 上的引脚。这工作得很好。我做了一个长按创建一个图钉和标题和副标题显示和反向地理编码工作。

现在我想将 pin 数据推送到 tableview 列表。我已经尝试在其中调用区域注释信息，`cellForRowAtIndexPath`并使用`UITableViewCellStyleSubtitle`它来获取单元格的正确格式以填充标题和副标题。但是，当我调用以下命令时：

```
if (cell == nil){
    NSLog(@"if cell");
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        }

CLPlacemark *pins = [self.annotations objectAtIndex:indexPath.row];
RegionAnnotation *annotation = [[RegionAnnotation alloc] initWithLocationIdentifier:(NSString *)pins];
cell.textLabel.text = annotation.title; 
```

我只得到标题，在这种情况下是“位置提醒”，但是，作为地址的字幕信息不会填充表格。所有显示的是文本“字幕”。

如何使用标题和副标题信息填充单元格。我已经为此工作了一个多月，似乎无法找到解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:13:45.650

对发布的最新代码的一些评论：

```
CLPlacemark *pins = [self.annotations objectAtIndex:indexPath.row];
RegionAnnotation *annotation = [[RegionAnnotation alloc] 
    initWithLocationIdentifier:(NSString *)pins]; 
```

这看起来不对。该`pins`变量被声明为 a `CLPlacemark`（这本身很可疑，因为`CLPlacemark`不符合`MKAnnotation`所以为什么它在“注释”数组中？）然后它被转换为`NSString *`与 a 没有关系的an `CLPlacemark`。强制转换不会转换`pins`为字符串——它会将指向的数据`pins`视为一个`NSString`（它不是）。

之前发布的代码还有太多其他问题、疑问和未知数。

* * *

相反，我将举例说明如何将地图视图上的注释传递给表格视图并在单元格中显示数据......

*   在`PinListViewController`（带有表格视图的那个）中，我们声明了一个`NSArray`属性来接收和引用注释：

    ```
    //in the .h:
    //Don't bother declaring an ivar with the same name.
    @property (nonatomic, retain) NSArray *annotations;
    //in the .m:
    @synthesize annotations; 
    ```

*   接下来，在 中`MapViewController`，在您要呈现/推送/显示的地方`PinListViewController`，代码将是这样的：

    ```
    PinListViewController *plvc = [[PinListViewController alloc] init...

    //pass the map view's annotations array...
    plvc.annotations = mapView.annotations;

    [self presentModalViewController:plvc animated:YES];  //or push, etc.

    [plvc release];  //remove if using ARC 
    ```

    这里很重要的一点是，这个例子发送了*整个*annotations 数组。如果您正在使用显示用户的当前位置，`showsUserLocation = YES`则该数组也将包含该注释。如果您只想发送某些注释，则必须首先构建一个新数组，其中包含您想要从地图视图数组中获取的数组，并将其设置`plvc.annotations`为等于该新数组。一种简单的方法是遍历`mapView.annotations`，如果要包含注释，则使用 .将其添加到新数组中`addObject`。直接使用地图视图的`annotations`数组的另一个可能的问题是，如果地图上的注释更改（添加/删除）*而*表格视图仍然显示注释列表，它将不同步并可能导致运行时范围异常。为避免这种情况，如有必要，您可以设置`plvc.annotations`为地图视图的注释数组的副本（即。`[mapView.annotations copy]`）。

*   在`PinListViewController`，在`numberOfRowsInSection`方法中：

    ```
    return self.annotations.count; 
    ```

*   在`PinListViewController`，在`cellForRowAtIndexPath`方法中：

    ```
    //typical dequeue/alloc+init stuff here...
    //assume cell style is set to UITableViewCellStyleSubtitle

    id<MKAnnotation> annotation = [self.annotations objectAtIndex:indexPath.row];
    cell.textLabel.text = annotation.title;
    cell.detailTextLabel.text = annotation.subtitle;

    return cell; 
    ```

    `annotation`声明为它可以与任何类型的`id<MKAnnotation>`注释一起使用，因为示例只需要显示标准`title`和`subtitle`属性。如果您需要显示自定义注释类中可能具有的自定义属性，您将使用`isKindOfClass`检查是否`annotation`属于该类型，然后您可以将其强制转换为该自定义类并引用自定义属性。

# symfony - 从另一个包修改包配置

> ID：12114932
> 
> 赞同：8
> 
> 时间：2012-08-24T18:39:05.750
> 
> 标签：symfony, dependency-injection

我想知道是否有可能从另一个包修改包配置。比方说，例如，我正在使用具有以下配置的 FOSUserBundle：

```
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: Acme\UserBundle\Entity\User 
```

而现在，我想在加载特定扩展（`AcmeFoobarExtension`）时更改用户类。加载时是否可以更改配置`AcmeFoobarExtension`？例如：

```
<?php
namespace Acme\FoobarBundle\DependencyInjection;

// use statements for dependency injection

class FoobarExtension extends Extension
{
    public function load(array $configs, ContainerBuilder $container)
    {
        $container->setConfiguration(
            'fos_user.user_class',
            'Acme\FoobarBundle\Entity\User'
        );
    }
} 
```

这样的事情可能吗？还是违背了依赖注入的目的？

编辑：显然有一个针对 Symfony 2.2 的[拉取请求](https://github.com/symfony/symfony/issues/4652)，它解决了这个想法/问题。

编辑 2：这现在在 Symfony 2.2 中可用（[在食谱中有一篇文章](http://symfony.com/doc/current/cookbook/bundles/prepend_extension.html)）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-13T14:00:38.920

需要注意的是，这现在是 Symfony 的官方功能：

[http://symfony.com/doc/current/cookbook/bundles/prepend_extension.html](http://symfony.com/doc/current/cookbook/bundles/prepend_extension.html)

捆绑包可以将配置值添加到全局配置参数中。为此，捆绑扩展必须实现`PrependExtensionInterface`. 然后该`prepend()`方法可以添加全局配置值。

但是请注意，这些值可能会被其他包和配置文件本身覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T13:52:27.243

在 Symfony 用户邮件列表（[这里是问题](https://groups.google.com/forum/?fromgroups=#!topic/symfony2/dLaNsgU2fiA)）上问了同样的问题后，我发现这个想法有一个开放的[拉取请求](https://github.com/symfony/symfony/issues/5566)。

这是2.2版本，还没有合并到master，但是最后一个活动是3天前的，所以让我们期待吧！

# python - Heroku上的芹菜时间/日期错误？

> ID：12114936
> 
> 赞同：0
> 
> 时间：2012-08-24T18:39:22.603
> 
> 标签：python, django, heroku, celery

我正在尝试使用 Celery 在 Heroku 上的 Django 应用程序上运行一个简单的计划定期任务。它在本地工作，我可以观察运行的任务：

```
python manage.py celerybeat 
```

但是当我推到heroku并运行时：

```
heroku run pythonm manage.py celerybeat 
```

我得到：

```
 [2012-08-24 13:31:43,185: WARNING/MainProcess] __    -    ... __   -        _
    Configuration ->
        . broker -> django://localhost//
        . loader -> djcelery.loaders.DjangoLoader
        . scheduler -> djcelery.schedulers.DatabaseScheduler

        . logfile -> [stderr]@INFO
        . maxinterval -> 5.00 minutes (300s)
    [2012-08-24 13:31:43,186: INFO/MainProcess] Celerybeat: Starting...
    [2012-08-24 13:31:43,325: CRITICAL/MainProcess] 
celerybeat raised exception <type 'exceptions.TypeError'>: 
TypeError("can't compare offset-naive and offset-aware datetimes",) 
```

片段设置.py

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.admindocs',
    'gunicorn',
    'items',
    'djcelery', 
    'kombu.transport.django'
)

import djcelery
import djcelery.schedulers
djcelery.setup_loader()
BROKER_URL = "django://"
CELERY_ENABLE_UTC = True
CELERY_TIMEZONE = 'America/New_York'
CELERYBEAT_SCHEDULER = "djcelery.schedulers.DatabaseScheduler"

TIME_ZONE = 'America/New_York' 
```

片段任务.py

```
from celery.task import PeriodicTask
from celery.registry import tasks
from datetime import timedelta
from datetime import datetime
import sys
from subprocess import Popen, PIPE
from celery.task import task, periodic_task
from celery.schedules import crontab
import time, datetime

@periodic_task(run_every=crontab(hour="*", minute="*", day_of_week="*"))
def test_task():
    print "TASK RUNNING" 
```

片段要求.txt

```
celery==2.5.5
django-celery==2.5.5 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:38:10.353

您应该升级到修复了与时区相关的错误的 Celery 3.0.7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:53:00.290

不确定确切的解决方案，但我通过添加解决了它

```
USE_L10N = False
USE_TZ = False 
```

到 settings.py

# r - 试图编写 r 命令以运行

> ID：12114937
> 
> 赞同：1
> 
> 时间：2012-08-24T18:39:23.470
> 
> 标签：r

我在两个不同的目录中有文件，我想合并相同的文件。

例如：

在 c:/data1 中，我有这样的文件：

teamA.Rdata、teamB.RData、teamC.RDate

在 c:/data2 我有相同的文件：

teamA.Rdata、teamB.RData、teamC.RDate

文件名相同，但文件内容不同。我喜欢编写一个 r 脚本来组合具有相同名称的文件。例如，我想合并位于 C:/data1 和 c:/data2 目录中的 teamA.RData 文件：

我写了这段代码：

```
for (i in dir("c:/data1", pattern = "^team"))

     {

      print(i)

      for (r in dir("c:/data2", pattern= "^team"))

        {

             print(r)
             if(i==r) {
             print("yesssssssssssssssssssssss")
             }
         }
   } 
```

我把这行代码放到 R 控制台上，打印出来。但是，当我尝试通过 rscript 运行它时，即使代码中有打印语句，我也没有得到任何东西。我必须在 rscript 中做些什么来实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:49:56.337

路径存在吗？正则表达式匹配吗？尝试`pattern=".*team"`或`pattern="*team"`。

```
> system('touch hello')
> system('touch helloo')
> system('touch hellooo')
> system('ls')
1  2  hello  helloo  hellooo
> list.files('.',pattern='hello*')
[1] "hello"   "helloo"  "hellooo"
> list.files('.',pattern='hello.*')
[1] "hello"   "helloo"  "hellooo" 
```

您可以在历史记录中阅读如何连接文件。

# string - 我的递归子程序有什么错误？

> ID：12114939
> 
> 赞同：-1
> 
> 时间：2012-08-24T18:39:38.500
> 
> 标签：string, perl, loops, recursion, subroutine

该子例程使用从 A 到长度为 N 的字母的第 M 个字母生成字母的字符串组合。

```
sub genString
{
   my($m,$n,$str,$letter,$temp,$i) = @_;
   if($n == 0){
      $letter = chr(ord("A")+($i+=1));
       if($temp == 1){ print "$str\n"; }
       else{
          for($j = 0 ; $j < temp-1 ; $j++){
             if(ord(substr($str,$j,1)) < ord(substr($str,$j+1,1))){$do_print = 1;}
             else{
                $do_print = 0;
                break;
             }
          }
       if($do_print == 1){ print "$str\n"; }
       }
   }
   else{
       for($j = ord($letter) ; $j < ord($letter)+$m ; $j++){
           genString($m,$n-1,$str.chr($j),$letter,$temp,$i);
      }
   }
}
&genString($m,$n,$str,"A",$n,0); 
```

示例：输入：M=4；N=3；输出：ABC ABD ACD BCD

我在 Ruby 中尝试过类似的方法，它可以工作，但在 Perl 中，这是一个无限循环，我不知道为什么。我是 Perl 的新手。我应该怎么办？（对不起，如果我的代码有点长）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:06:18.453

默认情况下，变量是 perl 中的全局变量（尽管 将阻止未声明和不合格的使用它们`use strict`）。为了使您的递归起作用，您需要使其中一些成为词法，例如，更改：

```
for($j = 0 ; $j < temp-1 ; $j++){ 
```

至

```
for (my $j = 0; $j < $temp-1; $j++) { 
```

或者更好，只是

```
for my $j (0..$temp-2) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T18:46:18.650

请始终在您的代码中使用`use strict;`和`use warnings;`，尤其是在发布代码和寻求帮助时。也总是用 . 声明局部变量`my`。

在这种情况下，即使没有尝试过，我也很确定像`$j`引用全局变量这样的事情会让你很头疼——有些事情`use strict`会被抓住。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T19:13:54.207

您的代码很难阅读。我看不懂算法，也看不到子程序这么多参数的目的，尤其是`$temp`看起来没有改变，而且你没有说它的初始值在最外面的调用中设置为什么.

此代码似乎可以使用类似的算法执行您想要的操作

```
use strict;
use warnings;

genString(4, 3);

sub genString {

   my ($m, $n, $str, $i) = @_;

   if ($n == 0) {
     print $str, "\n";
   }
   else {
     for my $off ($i // 0 .. $m - $n) {
       $str //= '';
       genString($m, $n-1, $str.chr(ord('A') + $off), $off+1);
     }
   }
} 
```

**输出**

```
ABC
ABD
ACD
BCD 
```

# android - 使用 Open GL 进行 Android 实时视频处理

> ID：12114941
> 
> 赞同：1
> 
> 时间：2012-08-24T18:39:46.427
> 
> 标签：android, video, opengl-es, camera, surfaceview

我正在尝试使用 OpenGL ES 在 Android 4.03 上进行实时视频处理。因此，例如，我想获取实时视频源并将其显示在屏幕上并进行自定义修改，例如仅绘制视频的红色部分。

我可以轻松建立相机连接并将其显示为正常视图。我也可以做适量的 open gl。

我遇到的困难是将实时视频馈送到 open gl 中，以便我可以处理它。

这是我迄今为止最好的链接。https://groups.google.com/forum/?fromgroups=#!topic/android-developers/U5RXFGpAHPE[1-25]

# ruby-on-rails - 在 Rails 3.2 应用程序中 FontAwesome 突然乱码

> ID：12114942
> 
> 赞同：4
> 
> 时间：2012-08-24T18:39:47.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, font-awesome

我们有一个 rails 3 应用程序，它运行良好，我们部署了它。我必须为开发设置一台新计算机，克隆我的 repo，设置所有内容，现在 Font Awesome 字体拒绝工作（显示胡言乱语）。我克隆到我原来的电脑；在我原来的文件夹中，它们工作正常。但是任何新的克隆都没有。

它们不显示字体，而是显示内容（在 scss 文件中设置的乱码，如 '\f010'）。这通常显示为奇怪的形状或其他东西，但绝对不是图标。在 Mac OS X Mountain Lion 和 Ubuntu 12.04、Chrome 和 Firefox 上试过。

我们尝试了什么：

*   在原始文件夹中创建了一个新分支。将所有宝石更新到最新版本 - 我认为克隆可能有更新的宝石，使其在某处损坏。原始项目看起来仍然很好，新的克隆（和检查分支）被破坏了。
*   替换了来自 fontawesome 站点的新下载的 .scss 和字体文件。
*   字体文件的已验证路径是正确的（它们似乎已找到，因为 Chrome 检查器不会抱怨缺少字体文件 - 如果我更改路径，它会抱怨。它们只是没有被正确使用/使用）

两个文件夹中的宝石列表显示具有相同版本的相同宝石。

FontAwesome 路径是：

> 我的应用程序/供应商/资产/样式表/FontAwesome

里面有 sass 和 fonts 文件夹。

sass 中唯一改变的是路径线：

> $fontAwesomePath: "FontAwesome/font/fontawesome-webfont" !default;

正如我所说，这似乎有效；如果我更改路径，chrome 会抱怨缺少字体。

我正在使用 Apache 2、Ruby ree-1.8.7 p-358、Rails 3.2.7、Passenger 3.0.12、RVM 1.14.10、Bundler 1.1.4。乘客和捆绑者坐在我的全球宝石中。这是我的 Gemfile：

```
# myapp/Gemfile
# The specified versions are to make sure everything is as it is in the
# original folder; didn't make a difference. But the original branch has
#them and is working.

source 'https://rubygems.org'

gem 'rails', '3.2.7'

gem 'chronic', '0.6.7'
gem 'enumerated_attribute', '0.2.16'
gem 'exception_notification', '2.6.1'
gem 'google-api-client', '0.4.5'
gem 'her', '~> 0.2.6'
gem 'jquery-rails', '2.0.2'
gem 'mysql2', '0.3.11'
gem 'paperclip', '~> 2.7.0'
gem 'pdfkit', '0.5.2'
gem 'remotipart', '~> 1.0'
gem 'settingslogic'
gem 'slim-rails'#, '1.0.3'
gem 'validates_timeliness', '~> 3.0.2'
gem 'whenever', '0.7.3', :require => false

group :assets do
  gem 'compass-rails'#, '1.0.3'
  gem 'sass-rails'#, '3.2.5'
end

gem 'coffee-rails'#, '3.2.2'
gem 'uglifier'#, '1.2.7'

group :development do
  gem 'quiet_assets', '1.0.1'
  gem 'thin' , '1.4.1' 
end

gem 'letter_opener', '0.0.2', :group => [:development, :test, :staging]

gem 'rspec-rails', '2.11.0', :group => [:development, :test]

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '1.7.0'
  gem 'guard-rspec', '1.2.1'
  gem 'shoulda', '3.1.1'
end 
```

如果有人需要更多信息，请告诉我。我的想法已经用完了，而且我一无所获，我担心现在部署并且我们的产品环境搞砸了！

编辑：仍然没有得到结果。我更新到 Rails 3.2.8，所有 gem 都是最新的，除了回形针和 factory_girl_rails，它们使用旧版本的 Ruby 1.8.7。

销毁了我所有的文件夹，克隆了一个新的，工作正常。克隆一秒钟，不好。在 Chrome 隐身窗口中打开第一个克隆，不起作用。Inspector -> Resources -> Frames -> (site) -> Fonts 显示字体文件。

这是它应该是什么样子（左）与问题（右）的图像： ![问题字体](../Images/42c0c0b02f412b3de955299f4c48478e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T14:34:59.670

试试这个，我最近有类似的问题，

如果你把它放在你的 CSS 文件的顶部，

```
/*
 *= require font-awesome
 */ 
```

然后使用这个**gem 'font-awesome-rails'**它应该可以工作

# android - 检测适配器中的滚动方向（上/下）

> ID：12114963
> 
> 赞同：17
> 
> 时间：2012-08-24T18:41:52.177
> 
> 标签：android, listview, animation, scroll, direction

我试图在我的项目中模仿 Google Plus 应用程序，因为它现在似乎是参考。

滚动时的列表视图效果非常好，我想做类似的事情。

我已经开始使用 LayoutAnimationController [http://android-er.blogspot.be/2009/10/listview-and-listactivity-layout.html](http://android-er.blogspot.be/2009/10/listview-and-listactivity-layout.html)

```
LayoutAnimationController controller 
   = AnimationUtils.loadLayoutAnimation(
     this, R.anim.list_layout_controller);
  getListView().setLayoutAnimation(controller); 
```

这似乎很糟糕，因为并非所有元素都是动画的：

所以我最终使用了适配器的 getView 并使用了这个：

```
 AnimationSet set = new AnimationSet(true);

        Animation animation = new AlphaAnimation(0.0f, 1.0f);
        animation.setDuration(800);
        set.addAnimation(animation);

        animation = new TranslateAnimation(
            Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f,
            Animation.RELATIVE_TO_SELF, 1.0f,Animation.RELATIVE_TO_SELF, 0.0f
        );
        animation.setDuration(600);
        set.addAnimation(animation);

        row.startAnimation(set); 
```

结果太棒了，我真的很高兴！

不幸的是，它仅在我从列表的顶部滚动到底部时才有效！

我想让它在另一边滚动时工作，我需要稍微改变一下 TranslateAnimation。

所以我的问题是，有没有办法检测我在适配器中是向上还是向下滚动？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-24T18:58:22.227

为[`OnScrollListener`](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)您的`ListView`. 创建一个标志，指示用户是向上还是向下滚动。*通过检查当前的第一个*可见项位置是否大于或小于先前的*第一个*可见项位置，为标志设置适当的值。把那张支票放进去`onScrollStateChanged()`。

示例代码：

```
private int mLastFirstVisibleItem;
private boolean mIsScrollingUp;

public void onScrollStateChanged(AbsListView view, int scrollState) {
    final ListView lw = getListView();

    if (view.getId() == lw.getId()) {
        final int currentFirstVisibleItem = lw.getFirstVisiblePosition();

        if (currentFirstVisibleItem > mLastFirstVisibleItem) {
            mIsScrollingUp = false;
        } else if (currentFirstVisibleItem < mLastFirstVisibleItem) {
            mIsScrollingUp = true;
        }

        mLastFirstVisibleItem = currentFirstVisibleItem;
    } 
} 
```

检查`mIsScrollingUp`中是真还是假`getView()`，并相应地分配动画。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-24T19:21:04.137

我最终这样做了：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    Log.i("",position+" - "+lastposition);

    if (position >= lastposition)
        animation = new TranslateAnimation(Animation.RELATIVE_TO_SELF,
                0.0f, Animation.RELATIVE_TO_SELF, 0.0f,
                Animation.RELATIVE_TO_SELF, 1.0f,
                Animation.RELATIVE_TO_SELF, 0.0f);
    else
        animation = new TranslateAnimation(Animation.RELATIVE_TO_SELF,
                0.0f, Animation.RELATIVE_TO_SELF, 0.0f,
                Animation.RELATIVE_TO_SELF, -1.0f,
                Animation.RELATIVE_TO_SELF, 0.0f);

    animation.setDuration(600);
    set.addAnimation(animation);

    row.startAnimation(set);

    lastposition = position;

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-29T08:45:04.167

更复杂的解决方案（在列表视图中处理长项目高度）

1.  创建自定义列表视图

    ```
    public class ScrollDetectingListView extends ListView {
        public ScrollDetectingListView(Context context) {
            super(context);
        }

        public ScrollDetectingListView(Context context, AttributeSet attrs) {
            super(context,attrs);
        } 

        public ScrollDetectingListView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
        }

        //we need this protected method for scroll detection
        public int getVerticalScrollOffset() {
            return computeVerticalScrollOffset();
        }
    } 
    ```

2.  覆盖 onScroll

    ```
     listView.setOnScrollListener(new AbsListView.OnScrollListener() {

        private int mInitialScroll = 0;

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {

        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
            int scrolledOffset = listView.getVerticalScrollOffset();
            if (scrolledOffset!=mInitialScroll) {
                //if scroll position changed
                boolean scrollUp = (scrolledOffset - mInitialScroll) < 0;
                mInitialScroll = scrolledOffset;
            }
        }
        }); 
    ```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-23T16:20:54.090

接受的答案并没有真正“检测”向上或向下滚动。如果当前可见项目真的很大，它将不起作用。使用`onTouchListener`是要走的路。

这是我使用的代码片段：

```
listView.setOnTouchListener(new View.OnTouchListener() {
    float initialY, finalY;
    boolean isScrollingUp;

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        int action = MotionEventCompat.getActionMasked(event);

        switch(action) {
            case (MotionEvent.ACTION_DOWN):
                initialY = event.getY();
            case (MotionEvent.ACTION_UP):
                finalY = event.getY();

                if (initialY < finalY) {
                    Log.d(TAG, "Scrolling up");
                    isScrollingUp = true;
                } else if (initialY > finalY) {
                    Log.d(TAG, "Scrolling down");
                    isScrollingUp = false;
                }
            default:
        }

        if (isScrollingUp) {
            // do animation for scrolling up
        } else {
            // do animation for scrolling down
        }

        return false; // has to be false, or it will freeze the listView
    }
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-17T05:12:44.397

试试这个 。我希望它对你有帮助。来自@Gal Rom 答案的逻辑。

```
lv.setOnScrollListener(new OnScrollListener() {
        private int mLastFirstVisibleItem;

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {

        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {

            if(mLastFirstVisibleItem<firstVisibleItem)
            {
                Log.i("SCROLLING DOWN","TRUE");
            }
            if(mLastFirstVisibleItem>firstVisibleItem)
            {
                Log.i("SCROLLING UP","TRUE");
            }
            mLastFirstVisibleItem=firstVisibleItem;

        }
    }); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-03-21T11:14:47.917

这是我遇到的最简单和最简单的方法。它就像一个魅力。

```
view.addOnScrollListener(new View.OnScrollListener() {
                @Override
                public void onScrolled(@NonNull View view, int dx, int dy) {
                    if (dy > 0) {
                        //Scrolling down
                    } else if (dy < 0) {
                        //Scrolling up
                    }
                }
            }); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-05-06T18:25:42.807

这是我的方法：它可以让您更直接地反馈您滚动了多少： `OnScroll`，您只需获得列表中第一项的 Top 位置。立即获得实际的滚动位置信息非常可靠。

```
listView.getChildAt(0).getTop() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-31T13:21:42.690

我使用了这个更简单的解决方案：

```
public class ScrollDetectingListView extends ListView 
```

...

```
setOnScrollListener( new OnScrollListener() 
{

    private int mInitialScroll = 0;

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) 
    {
        int scrolledOffset = computeVerticalScrollOffset();

        boolean scrollUp = scrolledOffset > mInitialScroll;
        mInitialScroll = scrolledOffset;
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {

    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-14T12:21:14.350

```
list.setOnScrollListener(new OnScrollListener() {
        int last_item;
        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {

        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            if(last_item<firstVisibleItem+visibleItemCount-1){
                System.out.println("List is scrolling upwards");
            }
            else if(last_item>firstVisibleItem+visibleItemCount-1){
                System.out.println("List is scrolling downwards");
            }
             last_item = firstVisibleItem+visibleItemCount-1;
        }
    }); 
```

根据最后一个可见项目的位置，我决定 Listview 是向上还是向下。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-08T02:56:06.493

不依赖于视图/等位置的通用解决方案。只需检查垂直滚动偏移量并将其与之前的滚动偏移量进行比较。如果新值大于旧值，则用户向下滚动，反之亦然。

```
// [START check vertical scroll direction]
int oldScrollOffset = 0;

listView.setOnScrollChangeListener(new View.OnScrollChangeListener() {
        @Override
        public void onScrollChange(View view, int i, int i1, int i2, int i3) {

            Boolean scrollDirectionDown;

            int newScrollOffset = listView.computeVerticalScrollOffset();

            if (newScrollOffset > oldScrollOffset) {
                scrollDirectionDown = true;
            } else {
                scrollDirectionDown = false;
            }

            oldScrollOffset = newScrollOffset;

            if (scrollDirectionDown) {
                // Update accordingly for scrolling down
                Log.d(TAG, "scrolling down");
            } else {
                // Update accordingly for scrolling up
                Log.d(TAG, "scrolling up");
            }

    });
// [END check vertical scroll direction] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-19T23:29:36.613

```
view.setOnTouchListener(new View.OnTouchListener() {

        private long startClickTime;
        float y0 = 0;
        float y1 = 0;
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {

            if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
                y0 = motionEvent.getY();
                startClickTime = System.currentTimeMillis();

            } else if (motionEvent.getAction() == MotionEvent.ACTION_UP) {
                if (System.currentTimeMillis() - startClickTime < ViewConfiguration.getTapTimeout()) {

                    // Touch was a simple tap. Do whatever.

                } else {
                    y1 = motionEvent.getY();
                    // Touch was a not a simple tap.
                    if (y1 - y0 > 50) {
                        // this is down
                    } else if (y1 - y0 < 50) {
                        Log.d("daniY", "-");
                        // this is up
                    }
                }

            }

            return true;
        }

    }); 
```

这对我有用，这将有助于检测我认为的所有视图的滚动方向。

# unit-testing - 使用 Microsoft Fakes 填充带有 ref 参数的方法

> ID：12114964
> 
> 赞同：5
> 
> 时间：2012-08-24T18:42:07.693
> 
> 标签：unit-testing, microsoft-fakes

我的旧版（不可测试）dll 中有一个带有 ref 参数的静态方法。我正在尝试为调用此方法的类编写单元测试。

```
public static class Branding
{
    ...
    ...

    static public bool GetBranding(Int32 providerId,
        Int32 employerId,
        string brandingElement,
        ref string brandingValue)

    ...
    ...
} 
```

我需要帮助为此调用编写 shim 语句

```
ShimBranding.GetBrandingInt32Int32StringStringRef = 
    ( providerId, employerId, element, { ====> WHAT GOES HERE <===== } )
    => 
    true; 
```

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-13T00:12:06.577

```
using (ShimsContext.Create())
{
    ShimBranding.GetBrandingInt32Int32StringStringRef =
        (int providerId, int employerId, string brandingElement, ref string brandingValue) =>
        {
            brandingValue = "Blah";
            return true;
        };
} 
```

# html - 如何右对齐表单输入框？

> ID：12114966
> 
> 赞同：56
> 
> 时间：2012-08-24T18:42:32.743
> 
> 标签：html, css, alignment

我有一个看似容易解决的问题，但我正在苦苦挣扎。如何在不使用 BR 元素的情况下让这两个输入与表单右侧对齐？

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
    form {
        text-align: right;
    }
    input {
        width: 100px;
    }
    </style>
</head>

<body>
    <form>
         <input name="declared_first" value="above" />

         <br/> <!-- I want to get rid of this -->

         <input name="declared_second" value="below" />
    </form>
</body>
</html> 
```

我只希望第一个输入出现在第二个输入上方，都在右侧。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-24T18:46:28.313

您可以使用向右浮动并清除它们。

```
form {
  overflow: hidden;
}
input {
  float: right;
  clear: both;
}
```

```
<form>
  <input name="declared_first" value="above" />
  <input name="declared_second" value="below" />
</form>
```

您还可以`direction`为父级设置从右到左，并在输入上恢复默认的从左到右。`display: block`你可以强迫他们在不同的路线上。

```
form {
  direction: rtl;
}
input {
  display: block;
  direction: ltr;
}
```

```
<form>
  <input name="declared_first" value="above" />
  <input name="declared_second" value="below" />
</form>
```

或者现代的方式，flexbox布局

```
form {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}
```

```
<form>
  <input name="declared_first" value="above" />
  <input name="declared_second" value="below" />
</form>
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-10-11T18:39:18.923

尝试使用这个：

```
<html>
<body>
   <input type="text" style="direction: rtl;" value="1">
   <input type="text" style="direction: rtl;" value="10">
   <input type="text" style="direction: rtl;" value="100">
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-24T18:45:48.213

```
input { float: right; clear: both; } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-24T19:14:33.430

试试这个：

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
    p {
        text-align: right;
    }
    input {
        width: 100px;
    }
    </style>
</head>

<body>
    <form>
        <p>
            <input name="declared_first" value="above" />
        </p>
        <p>
            <input name="declared_second" value="below" />
        </p>
    </form>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-06T02:15:22.600

要仅影响文本类型输入框，请使用属性选择器

输入[类型=“文本”]

这样它就不会影响其他输入，只会影响文本输入。

[https://www.w3schools.com/css/css_attribute_selectors.asp](https://www.w3schools.com/css/css_attribute_selectors.asp)

例如，使用 div 并给它一个参考的想法：

```
#divEntry input[type="text"] {
text-align: right;} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T18:48:03.017

使用一些标签来对齐输入元素。所以

```
<form>
   <div>
     <input>
     <br />
     <input>
    </div>
</form>

    .mydiv
     {
        width: 500px;
        height: 250px;
        display: table;
        text-align: right;
     } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-18T18:46:31.693

我在一篇博文中回答了这个问题：[https](https://wscherphof.wordpress.com/2015/06/17/right-align-form-elements-with-css/) ://wscherphof.wordpress.com/2015/06/17/right-align-form-elements-with-css/ 它指的是这个小提琴：[https ://jsfiddle.net /wscherphof/9sfcw4ht/9/](https://jsfiddle.net/wscherphof/9sfcw4ht/9/)

剧透：`float: right;`是正确的方向，但只需要多花一点注意力就可以得到整洁的结果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-13T07:34:58.923

尝试使用这个：

```
input {
  clear: both;
  float: right;
  margin-bottom: 10px;
  width: 100px;
} 
```

# c# - Message=SelectedDate 值无效

> ID：12114968
> 
> 赞同：5
> 
> 时间：2012-08-24T18:42:36.310
> 
> 标签：c#, wpf, datepicker

我可能很累，但为什么会抛出异常：

```
 this.SomeDatePicker.SelectedDate = DateTime.Now.Date; 
```

同样的情况发生在：

```
 this.SomeDatePicker.SelectedDate = DateTime.Now; 
```

错误信息是：

```
System.ArgumentOutOfRangeException was unhandled
  Message=SelectedDate value is not valid.
Parameter name: d
  Source=PresentationFramework
  ParamName=d
  StackTrace:
       at System.Windows.Controls.Calendar.OnSelectedDateChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
       at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
       at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
       at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
       at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
       at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
       at System.Windows.Controls.DatePicker.CoerceSelectedDate(DependencyObject d, Object value)
       at System.Windows.DependencyObject.ProcessCoerceValue(DependencyProperty dp, PropertyMetadata metadata, EntryIndex& entryIndex, Int32& targetIndex, EffectiveValueEntry& newEntry, EffectiveValueEntry& oldEntry, Object& oldValue, Object baseValue, Object controlValue, CoerceValueCallback coerceValueCallback, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, Boolean skipBaseValueChecks)
       at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
       at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
       at System.Windows.DependencyObject.SetValue(DependencyProperty dp, Object value)
       .... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T18:49:57.020

如果您设置的日期存在于[`BlackoutDates`](http://msdn.microsoft.com/en-us/library/system.windows.controls.calendar.blackoutdates.aspx).

该`AddDaysInPast`方法应等效于：

```
Add(new CalendarDateRange(DateTime.MinValue, DateTime.Today.AddDays(-1))); 
```

因此，除非当前时间在调用`AddDaysInPast`和`SelectedDate`分配之间发生变化，否则您不应该遇到您描述的问题。

在调试中获取完整范围`BlackoutDates`并使用该信息更新您的问题，您可以使用以下内容：

```
string ranges = string.Join(
    Environment.NewLine,
    DatePicker.BlackoutDates.Select(r => string.Concat(r.Start, "|", r.End))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:51:56.673

如果`DateTime.Now`超出 DisplayDateStart 和 DisplayDateEnd OR 定义的范围，`BlackoutDates`则抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:24:28.553

谢谢 João Angelo、Ryan 的回答和 Ascension 的回答，我可以得到想要的结果：

```
if ( IsInmediate ) 
{
     SomeDatePicker.BlackoutDate.Clear();
     SomeDatePicker.SelectedDate = DateTime.Now;
     SomeDatePicker.BlackoutDate.AddDatesInPast();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T18:59:20.857

看：

**ArgumentOutOfRangeException：**指定的日期不在 DisplayDateStart 和 DisplayDateEnd 定义的范围内，或者指定的日期在 BlackoutDates 集合中。

字体：http: [//msdn.microsoft.com/pt-br/library/system.windows.controls.datepicker.selecteddate.aspx](http://msdn.microsoft.com/pt-br/library/system.windows.controls.datepicker.selecteddate.aspx)

看例外！

您需要日期和时间还是只需要日期？

```
DateTime.Now.ToString("yyyy-MM-dd"); // only date 
```

或者

```
DateTime.Now.ToString("yyyy-MM-dd hh:mm"); // date and hour 
```

# hsqldb - HSQLDB 使用 server.properties 文件中的属性创建数据库

> ID：12114973
> 
> 赞同：0
> 
> 时间：2012-08-24T18:42:50.507
> 
> 标签：hsqldb

我想在服务器启动时创建一个具有某些属性的数据库。我的 server.properties 文件中有以下内容：

```
server.database.0=file:db;check_props=true;sql.enforce_names=true;sql.pad_spaces=false;hsqldb.default_table_type=cached;hsqldb.tx=locks;hsqldb.tx_level=serializable;hsqldb.write_delay=false
server.dbname.0=ssi 
```

我没有看到这些反映在生成的 db.properties 文件中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:57:41.137

这些属性适用于 HSQLDB 2.2.9。2.x 版的属性文件不包含此类属性。.script 文件包含等效的 SQL 设置语句。

大多数 URL 属性，包括您使用过的那些，都不适用于现有数据库。

还有一个问题 check_props=true，它错误地标记了 sql.pad_space 属性。

# oop - 什么依赖策略适合这个小应用

> ID：12114980
> 
> 赞同：4
> 
> 时间：2012-08-24T18:43:19.443
> 
> 标签：oop, design-patterns, dependency-injection

我正在创建一个小型 PHP**命令行**应用程序，以学习一些常见的设计模式和 oop 技术。

我已经设置了所有相关的类，这样它们就不会在内部实例化对象，而是通过构造函数为它们提供所需的对象。

现在的问题是如何编排所有内容，以便每个对象都获得所需的依赖项。我已经阅读了有关依赖注入容器和框架的信息，但这对于一个小型命令行应用程序来说似乎有点过分了 + 我很难理解它们如何适合我的应用程序。

目前流程是这样的：

*   程序由用户在命令行执行
*   引导发生，即自动加载器等实例化等
*   我有一个工厂方法，它设置依赖项（所有在类中硬编码）并返回一个应用程序对象。主应用程序大约有 2 个依赖项，每个依赖项都有另外 2 个依赖项（我认为这是棘手的部分）
*   Application->run() 被调用。

就灵活性和简单性之间的平衡而言，最好的方法是什么，因为我不相信设计（围绕工厂）是完全正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:09:46.530

从听起来你的应用程序组织得很好，构造与应用程序逻辑分开，并且你的依赖关系得到了清晰的管理。

您当然可以添加可配置的依赖项或使用依赖项注入框架，但是，除非应用程序需要，否则我建议避免这两者。如果您确实开始使用 DI 框架，请确保即使您正在使用这个神奇的工具，也要保持所有内容的凝聚力，并在可能的情况下尝试将所有内容从框架中移开（即，让模块通过工厂处理内部依赖项，而不是依赖于框架）。在有意义时将功能拆分为模块。

我正在对一个大型模糊应用程序进行改进，该应用程序通过 DI 框架运行其所有依赖项，启动速度很慢，并且变成了一些废话，使用起来并不愉快，这是一个执行“一切”而不是将任务委托给模块和库并且具有零单元测试的应用程序。

主要需要注意的是，每个问题都有很多解决方案，学习不同的模式是一个好主意，工厂模式有很多种类型，全部学习。有些简单，有些更复杂，您会感觉到在不同情况下的工作原理。

我个人的建议是，如果您的应用程序按您的预期工作，它的组织方式与听起来一样，如果您还没有（并且游戏的目的是提高您的技术），请练习：

*   记录（写一些文档，然后把它扔给开发朋友，看看他们是如何处理的）
*   测试（编写一些单元测试，然后以不同的方式重写应用程序）
*   基准测试（在您的代码上运行分析并尝试找到优化它的方法）

尝试不同的方法来加载工厂、动态工厂、构建器模式、框架，使用基准来了解您权衡了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:59:40.147

您的应用程序应该像这样工作：

```
$app = new Application($arg1, $arg2);
$app->run(); 
```

所有其他类都应该在 中实例化`Application`，并作为参数传递给其他类的构造函数。经验法则是：任何构造函数的**参数都应该少于 3 个**。如果你遵守这条规则，一切都会好起来的。

# mysql - 为通常为空的列建议的数据库设计

> ID：12114982
> 
> 赞同：1
> 
> 时间：2012-08-24T18:43:40.193
> 
> 标签：mysql, sql, database, database-design

我有一个通常填写四个字段的表：

```
`animal`
- id
- type
- name
- weight
- location 
```

如果动物`type`= '人'，则填写三个附加字段。这发生在大约 5% 的时间里。附加表将是：

```
`person_additional`
- animal_id (FK)
- IQ
- native_language
- handedness 
```

数据库设计中建议的做法是将其存储在两个表还是一个表中？这对我来说几乎没有什么区别，但我很好奇最佳实践以及*为什么*一个比另一个更可取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:56:24.463

两张桌子可能是正确的方法，但我可能会建议使用不同的第二张桌子。我将其定义为：

```
`animal_additional`
- animal_id (FK)
- Trait (this would enumerate allowable traits)
- value 
```

这将使您更灵活地为不同类型设置不同的特征，甚至为同一类型设置不同的特征。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:50:13.150

如果您要将它们存储在同一个表中，那么这实际上将是一个多值依赖项；违反了第四范式，所以从纯粹的角度来看，单独的表格更好。

此外，如果添加了另一种需要不同类型的补充字段的动物会发生什么 - 如果您的所有数据都在一个表中，那么最终，您将拥有一堆用于不同目的的不同字段。

从实际的角度来看，这取决于数据的使用方式等；

从迂腐的角度来看，其他动物也有惯用手 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T19:03:22.383

除了标准化问题。Animal 和 person 是称为泛化专业化或简称 gen-spec 的模式的一个实例。gen-spec 案例的关系表设计已在其他问题中讨论。在 SO 中搜索“类表层次结构”。

示例： [表设计和类层次结构](https://stackoverflow.com/questions/4142536/table-design-and-class-hierarchies)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T18:53:33.247

将其拆分为 2 个表的另一个很好的理由是，通过将所有内容放在一个表中，存储一行所需的空间量将不必要地增加，因为大多数情况下您的列将是空的，但数据库仍然必须分配一定数量每行的字节数。

拆分为 2 个表，更有效地利用硬盘空间。

# java - 使用 hibernate 和 postgres 增加生成键的起始值

> ID：12114983
> 
> 赞同：0
> 
> 时间：2012-08-24T18:43:41.653
> 
> 标签：java, hibernate, postgresql

我启动了一个使用 JPA/Hibernate 和 Postgres DB 的 web 应用程序。我想增加生成密钥的下限，因此该站点看起来不那么“新”。

如何使用休眠和/或 postgres 做到这一点？我知道在 MySQL 中您可以设置 AUTO_INCREMENT 的起始值，我正在寻找类似的功能。任何解决方案都可以，无论是休眠配置（我正在使用注释）还是我可以在数据库中欺骗以使未来的密钥开始更高的一次性事情。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:46:53.107

我假设您在 postgresql 中使用序列。

您必须遍历它们中的每一个并将下一个值设置为更高：

`ALTER SEQUENCE serial RESTART WITH 105;`

`105`是新的身份证。

# google-app-engine - http://www.sakshum.org/sakshumwebgae/8CB611AC7A0B5B6BE2C4C99A8EA4DEFE.cache.html 未找到

> ID：12114988
> 
> 赞同：1
> 
> 时间：2012-08-24T18:44:14.120
> 
> 标签：google-app-engine, gwt

在我们使用 gwt 加载应用程序并检查 firebug 的 gae for java 应用程序上，我看到错误[http://www.sakshum.org/sakshumwebgae/8CB611AC7A0B5B6BE2C4C99A8EA4DEFE.cache.html](http://www.sakshum.org/sakshumwebgae/8CB611AC7A0B5B6BE2C4C99A8EA4DEFE.cache.html)结果 gwt 模块似乎没有被加载。

我假设这个文件应该是由 gae 自动生成的。那么为什么我要面对它以及可以做些什么来解决它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:52:09.250

你的假设是错误的。该文件由 GWT 编译生成（同时`sakshumwebgae/sakshumwebgae.nocache.js`生成），应该部署在您的应用程序中。

# xpages - 如何有条件地更改 xe:applicationLayout 中左列的宽度？

> ID：12114989
> 
> 赞同：0
> 
> 时间：2012-08-24T18:44:22.493
> 
> 标签：xpages, xpages-extlib

我的 xe:applicationLayout 在我的 demoLayout.xsp CC 中。.lotusColLeft 类中的左列宽度默认设置为 220px。我可以通过将以下 CC 添加到任何需要 300 像素宽的左列的 XPage 来手动覆盖此设置：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
<style>
    .lotusColLeft { width:300px }
    .hugeWidth { width:2000px }
    .lotusContent { overflow-x: scroll; }
</style>
</xp:view> 
```

这很好用，但我实际上需要一个 400 和 500 像素宽的左列用于某些 xpage。是的，可以像上面那样使用 3 个 CC 来做到这一点，但希望有一种更好的方法，在我将 demoLayout.xsp CC 控件添加到我的 xpage 时，我可以简单地在自定义属性中设置所需的宽度。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:01:17.587

与其将样式标签直接放在自定义控件上，不如使用带有 escape="false" 的 Computed Field 控件（即输出为 HTML）。然后，在 value 属性中，您可以计算左列的宽度。像这样的东西对我有用：

```
<xp:text escape="false"><xp:this.value><![CDATA[
<style>
   .lotusColLeft {width:#{compositeData.passedWidth};}
</style>]]>
</xp:this.value></xp:text> 
```

然后，您可以在自定义控件上添加一个passedWidth 属性并传入相关宽度。您可以变得更复杂并设置Computed Field 的loaded 属性，因此它只显示passedWidth 属性是否已设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T22:53:30.007

我喜欢 Paul 的建议，但另一种方法是在您的布局自定义控件上定义两个有条件呈现的样式表资源（或仅一个，带有计算的 href）。该控件可以有一个 leftColumnWidth 属性，它接受“小”、“中”或“大”的值。如果很小，则不会呈现额外的样式表。否则，它将呈现两者之一。这样，如果您需要更改与任一相关联的确切宽度（以及可能有意义的调整以适应调整后的布局的其他元素），您只需在样式表中更改它，而无需触摸每个页面。

# jquery - 如何根据到窗口边缘的距离使我的子菜单位置动态化？

> ID：12114990
> 
> 赞同：1
> 
> 时间：2012-08-24T18:44:23.610
> 
> 标签：jquery, dynamic, css-position, submenu, offsetwidth

我正在尝试编写一个 jQuery 脚本，该脚本将找到从我的 css 类元素到浏览器窗口右边缘的距离，然后根据右侧的可用空间将子子菜单下拉菜单定位在右侧或左侧。它还需要在悬停时恢复为默认设置。这是我到目前为止所拥有的，但计算不正确。

```
 $(document).ready(function(){
$('#dnnMenu .subLevel').hover(function(){

    if ($(window).width() - $('#dnnMenu .subLevel').offset().left - '540' >= '270')
    {
        $('#dnnMenu .subLevelRight').css('left', '270px');}

    else {$('#dnnMenu .subLevelRight').css('left', '-270px');}
});

    $(document).ready(function () {
function HoverOver() {
    $(this).addClass('hover');
}
function HoverOut() {
    $(this).removeClass('hover');
}
var config = {
    sensitivity: 2,
    interval: 100,
    over: HoverOver,
    timeout: 100,
    out: HoverOut
};
$("#dnnMenu .topLevel > li.haschild").hoverIntent(config);

$(".subLevel li.haschild").hover(HoverOver, HoverOut);

    }); 
```

基本上我试图取当前窗口的宽度，减去到第一级子菜单浏览器左边缘的距离，减去两个元素的宽度，这将等于 540px，来计算到右边缘的距离悬停在第一级子菜单上时的窗口。如果我的第一级子菜单元素右侧的距离小于 540px，那么第二级子菜单 css 属性将更改为向左而不是向右。我也知道它需要在悬停后恢复为默认值，以便它可以重新计算与菜单结构中其他位置的距离，并且仍然具有足够空间的第二级子菜单仍然显示在第一级的右侧。这是有问题的元素的css。

```
 #dnnMenu .subLevel{
      display: none;
      position: absolute;
      margin: 0;
      z-index: 1210;
      background: #639ec8;
      text-transform: none;}

    #dnnMenu .subLevelRight{
      position: absolute;
      display: none;
      left: 270px;
      top: 0px;} 
```

该网站尚未上线，我尝试创建一个 jsfiddle，但它看起来不正确。任何帮助将不胜感激！

最好的问候，马里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:36:35.640

这是我为解决我的问题而编写的 jQuery。

```
$(document).ready(function () {
$('#dnnMenu').mouseout(function () {

    if ((viewportRight - myRight) >= '540') {
        $('#dnnMenu .subLevelRight').css('left', '-270px');
    }

    else { $('#dnnMenu .subLevelRight').css('left', '270px'); }
   });
});
    $(document).ready(function () {
function HoverOver() {
    $(this).addClass('hover');
}
function HoverOut() {
    $(this).removeClass('hover');
}
var config = {
    sensitivity: 2,
    interval: 100,
    over: HoverOver,
    timeout: 100,
    out: HoverOut
};
$("#dnnMenu .topLevel > li.haschild").hoverIntent(config);

$(".subLevel li.haschild").hover(HoverOver, HoverOut);
});
    $(document).ready(function () {
$('#position1').mouseout(function () {
    var myLeft = $("#position1").offset().left;
    var myTop = $("#position1").offset().top;
    var myRight = myLeft + $("#position1").outerWidth();
    var myBottom = myTop + $("#position1").outerHeight();
    var viewportRight = $(window).width() + $(window).scrollLeft();
    var viewportBottom = $(window).height() + $(window).scrollTop();
    if ((viewportRight - myRight) >= '400') {
        $('#dnnMenu .subLevelRight').css('left', '270px');
    }

    else { $('#dnnMenu .subLevelRight').css('left', '-270px'); }
   });
});
    $(document).ready(function () {
$('#position2').mouseout(function () {
    var myLeft = $("#position2").offset().left;
    var myTop = $("#position2").offset().top;
    var myRight = myLeft + $("#position2").outerWidth();
    var myBottom = myTop + $("#position2").outerHeight();
    var viewportRight = $(window).width() + $(window).scrollLeft();
    var viewportBottom = $(window).height() + $(window).scrollTop();
    if ((viewportRight - myRight) >= '400') {
        $('#dnnMenu .subLevelRight').css('left', '270px');
    }

    else { $('#dnnMenu .subLevelRight').css('left', '-270px'); }
   });
});
    $(document).ready(function () {
$('#position3').mouseout(function () {
    var myLeft = $("#position3").offset().left;
    var myTop = $("#position3").offset().top;
    var myRight = myLeft + $("#position3").outerWidth();
    var myBottom = myTop + $("#position3").outerHeight();
    var viewportRight = $(window).width() + $(window).scrollLeft();
    var viewportBottom = $(window).height() + $(window).scrollTop();
    if ((viewportRight - myRight) >= '400') {
        $('#dnnMenu .subLevelRight').css('left', '270px');
    }

    else { $('#dnnMenu .subLevelRight').css('left', '-270px'); }
   });
});
    $(document).ready(function () {
$('#position4').mouseout(function () {
    var myLeft = $("#position4").offset().left;
    var myTop = $("#position4").offset().top;
    var myRight = myLeft + $("#position4").outerWidth();
    var myBottom = myTop + $("#position4").outerHeight();
    var viewportRight = $(window).width() + $(window).scrollLeft();
    var viewportBottom = $(window).height() + $(window).scrollTop();
    if ((viewportRight - myRight) >= '400') {
        $('#dnnMenu .subLevelRight').css('left', '270px');
    }

    else { $('#dnnMenu .subLevelRight').css('left', '-270px'); }
   });
});
    $(document).ready(function () {
$('#position5').mouseout(function () {
    var myLeft = $("#position5").offset().left;
    var myTop = $("#position5").offset().top;
    var myRight = myLeft + $("#position5").outerWidth();
    var myBottom = myTop + $("#position5").outerHeight();
    var viewportRight = $(window).width() + $(window).scrollLeft();
    var viewportBottom = $(window).height() + $(window).scrollTop();
    if ((viewportRight - myRight) >= '400') {
        $('#dnnMenu .subLevelRight').css('left', '270px');
    }

    else { $('#dnnMenu .subLevelRight').css('left', '-270px'); }
   });
});
    $(document).ready(function () {
$('#position6').mouseout(function () {
    var myLeft = $("#position6").offset().left;
    var myTop = $("#position6").offset().top;
    var myRight = myLeft + $("#position6").outerWidth();
    var myBottom = myTop + $("#position6").outerHeight();
    var viewportRight = $(window).width() + $(window).scrollLeft();
    var viewportBottom = $(window).height() + $(window).scrollTop();
    if ((viewportRight - myRight) >= '400') {
        $('#dnnMenu .subLevelRight').css('left', '270px');
    }

    else { $('#dnnMenu .subLevelRight').css('left', '-270px'); }
   });
});
    $(document).ready(function () {
$('#position7').mouseout(function () {
    var myLeft = $("#position7").offset().left;
    var myTop = $("#position7").offset().top;
    var myRight = myLeft + $("#position7").outerWidth();
    var myBottom = myTop + $("#position7").outerHeight();
    var viewportRight = $(window).width() + $(window).scrollLeft();
    var viewportBottom = $(window).height() + $(window).scrollTop();
    if ((viewportRight - myRight) >= '400') {
        $('#dnnMenu .subLevelRight').css('left', '270px');
    }
    else { $('#dnnMenu .subLevelRight').css('left', '-270px'); }
   });
}); 
```

这是CSS

```
 #position1{
background:transparent no-repeat;
width:110px;
height:2px;
margin-left:15px;
margin-top:-2px;
position:absolute;}
    #position2{
background:transparent no-repeat;
width:118px;
height:2px;
margin-left:127px;
margin-top:-2px;
position:absolute;}
#position3{
background:transparent no-repeat;
width:153px;
height:2px;
margin-left:247px;
margin-top:-2px;
position:absolute;}
#position4{
background:transparent no-repeat;
width:178px;
height:2px;
margin-left:402px;
margin-top:-2px;
position:absolute;}
#position5{
background:transparent no-repeat;
width:213px;
height:2px;
margin-left:582px;
margin-top:-2px;
position:absolute;}
#position6{
background:transparent no-repeat;
width:106px;
height:2px;
margin-left:797px;
margin-top:-2px;
position:absolute;}
#position7{
background:transparent no-repeat;
width:78px;
height:2px;
margin-left:905px;
margin-top:-2px;
position:absolute;} 
```

我唯一添加的另一件事是 div id 直接位于我在 HTML 中的其他菜单项下

```
<div id="position1"></div><div id="position2"></div><div id="position3"></div><div id="position4"></div><div id="position5"></div><div id="position6"></div><div id="position7"></div> 
```

它只是不确定是否一切都写得很完美。如果您发现有问题，请告诉我，以便我清理代码。

# android - CoronaSDK 两个场景同时出现在屏幕上

> ID：12114991
> 
> 赞同：0
> 
> 时间：2012-08-24T18:44:25.223
> 
> 标签：android, ios, lua, coronasdk

我正在使用 Corona SDK，但我对它还是很陌生。我正在使用 Storyboard api 来导航场景。我有一个带有按钮的主页。按钮侦听器使用 gotoScene 打开另一个具有标签栏的场景。当我运行该应用程序时，该按钮有效，但新场景是在第一个场景之上创建的。问题是两个场景同时显示。我尝试使用简单的 print("destroyScene called") 来实现destroyScene，看看它是否被调用了，但实际上没有。有谁知道我做错了什么？我觉得我缺少情节提要 api 的一些基本功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:39:01.747

[您可以通过参考此示例代码](https://github.com/ansca/Storyboard-Sample)找到有关 Corona SDK 中 Storyboard API 问题的所有答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T22:12:25.800

只有在内存不足时才会调用 Destroy Scene。

您需要使用 exitScene 来关闭事物的可见性（还要在 exitScene 内部删除任何事件侦听器，这样您就不会意外触发它，并将它们重新添加到 enterScene 中）。

# c# - LibTiff.NET ReadDirectory 仅在单元测试期间提供 System.ObjectDisposedException

> ID：12114992
> 
> 赞同：0
> 
> 时间：2012-08-24T18:44:32.137
> 
> 标签：c#, .net, unit-testing, libtiff.net

**编辑：**仅供未来读者参考，从 BitMiracle 的 LibTiff.NET 版本 2.3.606.0 开始，此问题已得到修复。

我在我的 C# 库（在 .NET 3.5 | x86 编译）中使用 BitMiracle 的 LibTiff.NET（版本 2.3.605.0 及更低版本），并在我调用时不断收到此异常`ReadDirectory`：`System.ObjectDisposedException: Cannot write to a closed TextWriter`

我意识到这似乎表明我在拨打电话之前已经处理了我的图像......但我没有专门这样做。这是图书馆中的错误还是我真的在这里遗漏了什么？

这是我的代码：

```
 public static bool IsTiffBiTonal(String tiffFilePath)
    {
        VerifyFileExistence(tiffFilePath);

        using (Tiff tiff = Tiff.Open(tiffFilePath, "r"))
        {
            do
            {
                if (tiff.GetField(TiffTag.BITSPERSAMPLE)[0].ToInt() == 1)
                {
                    continue;
                }
                return false;
            }
            while (tiff.ReadDirectory()); //Error occurs here
        }
        return true;
    } 
```

**编辑：**好的，经过进一步测试，我有更多信息，这仅在我运行单元测试时发生！不知道为什么这会改变任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:50:13.033

由于其他线程谈论单元测试并在尝试写入控制台时遇到同样的错误（[输出到控制台时出现 ObjectDisposedException](https://stackoverflow.com/questions/2907714/objectdisposedexception-when-outputting-to-console)），我意识到 LibTiff.NET 库正在尝试写入错误控制台。看了下源码，发现这段代码：

```
 using (TextWriter stderr = Console.Error)
        {
            ...
        } 
```

因为他们在一次使用中包装了所有对错误的写入，所以它在第一次写入错误后处理了 Console.Error 对象。这在第二次引起了我的错误（ReadDirectory 做了在链表上调用 Next 所做的事情）。所以我删除了使用，问题就解决了！

```
 TextWriter stderr = Console.Error;
        ... 
```

所以，这里的教训：不要处理你的标准输出:)

**我问了另一个问题，为什么他们曾被允许在单元测试中处理标准输出，但在其他情况下却不允许：[.NET - 为什么只在单元测试期间允许处理标准输出？](https://stackoverflow.com/questions/12285370/net-why-is-disposing-of-standard-output-only-allowed-during-unit-tests)**. 如果您对该问题有任何答案...请在此处发布。