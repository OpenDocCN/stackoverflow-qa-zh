# StackOverflow 问答 11600000-11600999

# c# - 绑定 ObservableCollection 对象麻烦

> ID：11600000
> 
> 赞同：0
> 
> 时间：2012-07-22T11:44:27.677
> 
> 标签：c#, wpf, mvvm

我正在尝试编写一个 rssreader 并且会为一些架构提示感到高兴。我的阅读器主窗口包含两个加载到框架中的 wpf 页面，它是一个“底部栏”，用户可以在其中选择不同的 rss 提供程序。在主框架（或页面）中是我的列表视图。由于加载动画和 UI 冻结，我有一个额外的类，它带有一个后台工作程序，它用 RSS 数据填充一个可观察的集合，当我调试时，它正确地填充了我的集合。在主页中，我将 datacontext 设置为这个可观察的集合，但 listview 没有显示任何内容，我在这里卡住了。

这就是我所拥有的：

主页 XAML：

```
> <ListBox ItemsSource="{Binding}" DisplayMemberPath="RssTitle"
> IsSynchronizedWithCurrentItem="True"
> SelectionChanged="itemsList_SelectionChanged"
> ItemContainerStyle="{DynamicResource listboxitem_style}" Height="396"
> HorizontalAlignment="Left" Margin="126,12,0,0" Name="ListBox1"
> VerticalAlignment="Top" Width="710"></ListBox>

ListBox1.DataContext = GetRssItems.observable_list; 
```

获取另一个 RSS 提要的底部页面：

```
GetRssItems getitems = new GetRssItems();
GetRssItems.observable_collection = null;
getitems.start_bg_worker("url"); 
```

GetRssItems.cs

```
public class GetRssItems
    {
        public static ObservableCollection<RSSItem> observable_collection { get; set; }
        public static string tmp_url;
        public BackgroundWorker worker = new BackgroundWorker();

        public void start_bg_worker(string url)
        {

            if (!worker.IsBusy)
            {

                worker.DoWork += new DoWorkEventHandler(worker_DoWork);
                worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
                worker.RunWorkerAsync(url);
            }
        }
} 
```

In BackgroundWorkers DoWork I'm receiving rss items with linq and add it to my observable collection:

```
 observable_collection.Add(new RSSItem(item.tmp_Title, item.tmp_Link, item.tmp_Description, item.tmp_pubDate, item.tmp_ImageUrl)); 
```

Seperate class RSSItem.cs

```
public class RSSItem
    {
         public string RssTitle { get; set; }
            public string RssLink { get; set; }
            public string RssDescription { get; set; }
            public string RsspubDate { get; set; }
            public string RssImageUrl { get; set; }

            public RSSItem(string rsstitle, string rsslink, string rssdescription, string rsspubdate, string rssimageurl)
            {
                RssTitle = rsstitle;
                RssLink = rsslink;
                RssDescription = rssdescription;
                RsspubDate = rsspubdate;
                RssImageUrl = rssimageurl;
            }
    } 
```

Thanks for your time and hints. Best Regards

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:17:14.430

You need to read up a bit MVVM to get the most benefit from WPF. Your line setting the listbox's datacontext is rather confusing.

What you should have is your main window's (xaml) data context set to a view model class that contains your observable collection. The list box's ItemsSource is set to that property name.

For example:

```
public class MainViewModel : INotifyPropertyChanged
{
   public ObservableCollection<RSSItem> RSSItems
   {
      get;
      set;
   }
   // Other stuff applicable to the main window.
} 
```

When the view is constructed, pass an instance of the MainViewModel to it's DataContext. Then the Xaml for the ListBox would be:

```
<ListBox ItemsSource={Binding Path=RSSItems} ... /> 
```

If you want to be able to set/change the RSSItems collection instance (I.e. public setter) then you should set it up it's setter with the NotifyPropertyChanged event, however if you just add/remove items then this shouldn't be necessary. (I.e. loading populating the items in the constructor.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:08:08.090

use the following: the data context should be the Object `getitems`

```
<ListBox  ItemsSource="{Binding observable_collection}"  Height="167" Margin="0" Name="listBox1" Width="330" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Top">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding RssTitle}"  FontWeight="Bold" FontSize="16" />
                                <TextBlock Text="{Binding RssLink}"  FontSize="16"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

PS: your naming is HORRBILE

# java - 如何从android中的字符串数组中获取随机值？

> ID：11600001
> 
> 赞同：16
> 
> 时间：2012-07-22T11:44:32.283
> 
> 标签：java, android, random, arrays

在我的 values.xml 文件中，我有一个数组，如下所示；

```
<string-array name="animals-array">
    <item>Cow</item>
    <item>Pig</item>
    <item>Bird</item>
    <item>Sheep</item>
</string-array> 
```

在我的应用程序中，我想随机获取这些值之一，但我不确定如何执行此操作。我看过

[帮助从 arrays.xml 文件中获取字符串数组](https://stackoverflow.com/questions/2453989/help-in-getting-string-array-from-arrays-xml-file)

还有这个

[从 ArrayList 中检索随机项](https://stackoverflow.com/questions/5034370/retreiving-an-item-from-arraylist-at-random)

但是如何从 values.xml 文件中定义的列表中检索随机项？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-22T11:48:43.657

```
String[] array = context.getResources().getStringArray(R.array.animals_array);
String randomStr = array[new Random().nextInt(array.length)]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:49:48.010

**1.**从 xml 中检索完整的字符串数组，并使用 `Arrays.asList()`方法将其放入 ArrayList 中。

**2.**使用`Math.random()*mArr.size()`函数获取随机数。**（mArr 是 ArrayList）**

**3.**然后用这个随机数从ArrayList中得到一个动物，比如

```
 `myArr.get(myrand);` 
```

**4.**我建议使用ArrayList（即Collection框架）的原因会给你**更多的灵活性**。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-05T08:58:23.200

```
String[] myArrayOfStrings = {"one", "two", "three" } 
Random r = new Random();
String myRandString = r.nextInt(myArrayOfStrings.length ); 
```

# macos - 如何为 MongoDB 创建配置文件

> ID：11600006
> 
> 赞同：34
> 
> 时间：2012-07-22T11:45:34.177
> 
> 标签：macos, mongodb, configuration-files

我已经通过 10gen 为 mac os 安装了 mongodb，并且我已经阅读了文档来执行此操作。除了配置文件之外，一切似乎都很好。我在 /etc/mongod.config 中看不到它。我是否必须手动创建此配置文件？如果是这样，我该怎么办？

干杯

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-01-28T16:59:49.577

Mac OS X 上 brew 安装的 mongodb 的默认路径是`/usr/local/etc/mongod.conf`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-22T12:24:40.617

除非您安装了 MongoDB 的打包版本（例如，使用[Homebrew 或 Mac Ports](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/#id1)），否则您必须手动创建配置文件，或者在启动 MongoDB 时传递适当的[命令行参数。](http://www.mongodb.org/display/DOCS/Command+Line+Parameters)

如果您想从一个配置文件的注释示例开始，Debian/Ubuntu 包中的[mongodb.conf](https://github.com/mongodb/mongo/blob/v2.4/debian/mongodb.conf)应该是一个很好的起点。要检查的重要选项是`dbpath`并且`logpath`可能对您不同。

还值得一看[Homebrew mongodb 公式](https://github.com/mxcl/homebrew/blob/master/Library/Formula/mongodb.rb)，其中包括设置 LaunchAgent 脚本来管理 mongod 服务。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-22T12:23:20.247

是的，除非您通过包管理器（如 Linux 上的 apt 或 yum）安装，否则您必须手动创建它。然后，当您启动 mongod 时，您只需指定配置文件的位置，例如：

```
./mongod -f /path/to/mongod.conf 
```

对于该文件的外观，只需在此处查看：

[http://docs.mongodb.org/manual/reference/configuration-options/](http://docs.mongodb.org/manual/reference/configuration-options/)

您还可以从 github 上的包中查看上述 Linux 配置文件：

[https://github.com/mongodb/mongo/blob/master/rpm/mongod.conf](https://github.com/mongodb/mongo/blob/master/rpm/mongod.conf)

[https://github.com/mongodb/mongo/blob/master/debian/mongodb.conf](https://github.com/mongodb/mongo/blob/master/debian/mongodb.conf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-04T20:29:07.870

In the case you installed MongoDB without Homebrew, i.e. downloaded the TGZ package directly from MongoDB Download Center, you will can add the configuration file:

```
sudo nano /etc/mongod.conf 
```

Please use only spaces (no tabs) in the file and leave a space after the key. For example:

```
security:
  authorization: enabled
net:
  port: 27017
  bindIp: 0.0.0.0 
```

And then run the instance with the configuration flag:

```
mongod -f /etc/mongod.conf 
```

I wrote a [post](https://code.linedrop.io/guides/Practical-Guide-to-Creating-Play-Scala-Development-Environment/MongoDB-Community-Edition) about installing MongoDB Community Edition directly from the TGZ archive.

# c# - 如何在电子邮件正文中创建活动 HTML？

> ID：11600011
> 
> 赞同：2
> 
> 时间：2012-07-22T11:46:20.603
> 
> 标签：c#, html

我正在开发这个接收 XML、将其转换为 HTML 并将其发送给收件人的小型应用程序。我想在邮件正文中创建可以使用的 HTML，例如收件人可以在其中写入一些文本并将其发送回发件人的文本区域。这可能吗，或者我可以只在邮件正文中插入带有链接的 HTML 吗？我正在用 C# 编写应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:12:38.937

是的，在 HTML 电子邮件中包含表单字段是可行的，但这不是您应该养成的习惯。这种方法有几个问题：

1.  如果您开始依赖这些表单，您会遇到不支持或不启用 HTML 电子邮件的电子邮件客户端的问题。包含单独的文本电子邮件当然是可能的，但您也会遇到电子邮件客户端对消息长度施加限制的问题，这可能会与冗长的 HTML 代码相冲突。
2.  即使客户端*确实*支持 HTML 电子邮件，但许多人认为电子邮件中的 HTML 表单存在安全风险，因此一些通常允许 HTML 电子邮件的电子邮件客户端将完全禁用 HTML 表单。

您最好在您发送的每种类型的电子邮件（纯文本或 HTML）中包含指向您网站上 HTML 表单的链接。这为您提供了一种标准化的形式来保护、配置和支持，并且还可以防止您处理不支持您的消息的电子邮件客户端。顺便说一句，由于许多电子邮件客户端不支持 Javascript，无论它们是否支持 HTML，当您将 HTML 表单包含在电子邮件正文中时，您在 HTML 表单中的工作受到了一定的限制。

编辑：如需进一步阅读，请参阅[此链接](http://www.campaignmonitor.com/blog/post/2435/how-forms-perform-in-html-emai/)或[此答案](https://stackoverflow.com/questions/428543/is-it-impractical-to-put-an-html-form-into-an-email)，两者都有相似之处。

# jquery - tinyMCE 格式化程序 - 全局应用格式

> ID：11600020
> 
> 赞同：0
> 
> 时间：2012-07-22T11:47:26.290
> 
> 标签：jquery, editor, tinymce

如何在全球范围内应用自定义格式，而不仅仅是对选定的节点？

这就是我正在做的，但它只适用于选定的节点：

```
var fontSize = 12;

tinyMCE.activeEditor.formatter.apply('fontSize', {
    value : fontSize
}); 
```

我想要实现的是：在字体大小更改时，如果在 tinymce 编辑器上没有选择任何内容，则将字体大小应用于所有节点或主父节点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:42:58.867

这些东西正在 tinycme 编辑器核心的 Fromatter.js 类中处理。不幸的是，您无法使用配置选项更改该行为。

您可以做的是保存您的实际选择，选择整个编辑器内容并将格式应用于您可以使用的 tinymce 编辑器 iframe 正文元素`ed.getBody()`。之后，您可以重置以前的选择。

# android - ANR keyDispatchingTimedOut 报告 Google

> ID：11600021
> 
> 赞同：1
> 
> 时间：2012-07-22T11:47:32.710
> 
> 标签：android, console, timeout, report

我得到了“著名”报告**ANR keyDispatchingTimedOut**，我正在阅读它，但我不太了解，我想问一下。我猜这个问题是由 onCreate() 上的大量工作引起的？如果我创建一个新方法，我可以避免这个错误吗？这是我第一次遇到这种类型的错误，我有点困惑。

```
DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0)
"main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40ab8478 self=0x1bde910
  | sysTid=332 nice=0 sched=0/0 cgrp=default handle=1074341224
  | schedstat=( 0 0 0 ) utm=33 stm=24 core=0
  at com.google.android.gles_jni.EGLImpl.eglInitialize(Native Method)
  at android.view.HardwareRenderer$GlRenderer.initializeEgl(HardwareRenderer.java:564)
  at android.view.HardwareRenderer$GlRenderer.initialize(HardwareRenderer.java:512)
  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1342)
  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2558)
  at android.os.Handler.dispatchMessage(Handler.java:99)
  at android.os.Looper.loop(Looper.java:137)
  at android.app.ActivityThread.main(ActivityThread.java:4697)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:511)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
  at dalvik.system.NativeStart.main(Native Method)

"Thread-8316" prio=5 tid=17 SUSPENDED
  | group="main" sCount=1 dsCount=0 obj=0x413eedf0 self=0x1d45d20
  | sysTid=464 nice=0 sched=0/0 cgrp=default handle=30694368
  | schedstat=( 0 0 0 ) utm=14 stm=9 core=0
  at org.apache.harmony.xml.parsers.DocumentBuilderFactoryImpl.<init>(DocumentBuilderFactoryImpl.java:~29)
  at javax.xml.parsers.DocumentBuilderFactory.newInstance(DocumentBuilderFactory.java:54)
  at com.tapjoy.TapjoyUtil.buildDocument(TapjoyUtil.java:130)
  at com.tapjoy.TapjoyConnectCore.handleConnectResponse(TapjoyConnectCore.java:633)
  at com.tapjoy.TapjoyConnectCore.access$5(TapjoyConnectCore.java:630)
  at com.tapjoy.TapjoyConnectCore$ConnectThread.run(TapjoyConnectCore.java:1209)
  at java.lang.Thread.run(Thread.java:856)

"Thread-8314" prio=5 tid=16 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 obj=0x41607538 self=0x1df7660
  | sysTid=436 nice=0 sched=0/0 cgrp=default handle=31423368
  | schedstat=( 0 0 0 ) utm=1 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x4160c4c8> (a com.google.ads.internal.c)
  at java.lang.Object.wait(Object.java:401)
  at com.google.ads.internal.c.run(SourceFile:547)
  at java.lang.Thread.run(Thread.java:856)

"Thread-8313" prio=5 tid=13 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x4160be80 self=0x1dadd78
  | sysTid=433 nice=0 sched=0/0 cgrp=default handle=31250304
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at android.os.BinderProxy.transact(Native Method)
  at android.content.ContentProviderProxy.query(ContentProviderNative.java:360)
  at android.content.ContentResolver.query(ContentResolver.java:311)
  at com.google.ads.ae$a.run(SourceFile:94)
  at java.lang.Thread.run(Thread.java:856)

"AsyncTask #1" prio=5 tid=15 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x415e6cc8 self=0x1df32b8
  | sysTid=397 nice=10 sched=0/0 cgrp=bg_non_interactive handle=30224856
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x415e7198> (a java.lang.VMThread) held by tid=15 (AsyncTask #1)
  at java.lang.Thread.parkFor(Thread.java:1231)
  at sun.misc.Unsafe.park(Unsafe.java:323)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  at java.lang.Thread.run(Thread.java:856)

"CookieSyncManager" prio=5 tid=14 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x415e5418 self=0x1df63a0
  | sysTid=396 nice=10 sched=0/0 cgrp=bg_non_interactive handle=30228264
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at android.os.MessageQueue.nativePollOnce(Native Method)
  at android.os.MessageQueue.next(MessageQueue.java:118)
  at android.os.Looper.loop(Looper.java:118)
  at android.webkit.WebSyncManager.run(WebSyncManager.java:90)
  at android.webkit.CookieSyncManager.run(CookieSyncManager.java:61)
  at java.lang.Thread.run(Thread.java:856)

"WebViewCoreThread" prio=5 tid=12 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x415df248 self=0x1daa3d8
  | sysTid=394 nice=0 sched=0/0 cgrp=default handle=30230200
  | schedstat=( 0 0 0 ) utm=21 stm=5 core=0
  at android.os.MessageQueue.nativePollOnce(Native Method)
  at android.os.MessageQueue.next(MessageQueue.java:118)
  at android.os.Looper.loop(Looper.java:118)
  at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:728)
  at java.lang.Thread.run(Thread.java:856)

"SoundPoolThread" prio=5 tid=11 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x415d71e0 self=0x1defde0
  | sysTid=392 nice=0 sched=0/0 cgrp=default handle=30224688
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"SoundPool" prio=5 tid=10 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x415d5ea8 self=0x1e044a8
  | sysTid=391 nice=0 sched=0/0 cgrp=default handle=30214880
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #2" prio=5 tid=9 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x413c34c8 self=0x1dcbc18
  | sysTid=358 nice=0 sched=0/0 cgrp=default handle=31465352
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=8 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x413c32e8 self=0x1e02808
  | sysTid=357 nice=0 sched=0/0 cgrp=default handle=31182208
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"FinalizerWatchdogDaemon" daemon prio=5 tid=7 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x413bfe08 self=0x1d45578
  | sysTid=356 nice=0 sched=0/0 cgrp=default handle=31066824
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40abfe00> (a java.lang.Daemons$FinalizerWatchdogDaemon)
  at java.lang.Object.wait(Object.java:364)
  at java.lang.Daemons$FinalizerWatchdogDaemon.run(Daemons.java:213)
  at java.lang.Thread.run(Thread.java:856)

"FinalizerDaemon" daemon prio=5 tid=6 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x413bfcb0 self=0x1df83d0
  | sysTid=350 nice=0 sched=0/0 cgrp=default handle=31033000
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40aae5e8> (a java.lang.ref.ReferenceQueue)
  at java.lang.Object.wait(Object.java:401)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:102)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:73)
  at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
  at java.lang.Thread.run(Thread.java:856)

"ReferenceQueueDaemon" daemon prio=5 tid=5 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x413bfb48 self=0x1d49858
  | sysTid=349 nice=0 sched=0/0 cgrp=default handle=30767328
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40aae510> 
  at java.lang.Object.wait(Object.java:364)
  at java.lang.Daemons$ReferenceQueueDaemon.run(Daemons.java:128)
  at java.lang.Thread.run(Thread.java:856)

"Compiler" daemon prio=5 tid=4 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x413bfa58 self=0x1df9268
  | sysTid=348 nice=0 sched=0/0 cgrp=default handle=30822480
  | schedstat=( 0 0 0 ) utm=15 stm=2 core=0
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=3 RUNNABLE
  | group="system" sCount=0 dsCount=0 obj=0x413bf960 self=0x1d599c0
  | sysTid=347 nice=0 sched=0/0 cgrp=default handle=29878568
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"GC" daemon prio=5 tid=2 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x413bf880 self=0x1de7130
  | sysTid=336 nice=0 sched=0/0 cgrp=default handle=30872008
  | schedstat=( 0 0 0 ) utm=1 stm=1 core=0
  at dalvik.system.NativeStart.run(Native Method) 
```

我不知道在哪里看到这条消息的问题，我的应用程序只有一个主要活动。

非常感谢大家:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:00:10.013

我认为发布您的代码会在这里为您提供最佳答案，但您也可能不了解使用多个线程来防止主线程（GUI）变得无响应。我发现本教程最有帮助。

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

对于刚入门的 Android 程序员，甚至是经验丰富的程序员来说，这都是一个棘手的问题，但一旦你掌握了窍门，它就不会那么糟糕了。

# php - 如何在php中获取sql查询语句的行号

> ID：11600024
> 
> 赞同：-4
> 
> 时间：2012-07-22T11:47:48.737
> 
> 标签：php, sql

我正在尝试根据 sql select 语句和条件获取行的值。

这是我使用的代码：

```
$fund = "SELECT COUNT(fundtid) from fund where fundtid='1'";
$result = mysql_query($fund, $connection);
if(!$result) {
die(mysql_error());
}
$row = mysql_fetch_row($result); 

print_r($row); 
```

它打印我这个“数组（[0] => 0）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:18:59.590

从[php mysql_fetch_row 手册](http://php.net/manual/en/function.mysql-fetch-row.php)：

> 返回对应于获取的行的**数值数组**，并将内部数据指针向前移动。

如果你使用`$row[0]`你有你的结果，例如：`print_r($row[0]);`

# testing - 如何在 gnu-make 的配方中重置 SHELL 变量两次？

> ID：11600025
> 
> 赞同：1
> 
> 时间：2012-07-22T11:48:09.957
> 
> 标签：testing, makefile, automated-tests, gnu-make

这是对这个问题的跟进：[我可以使用 GNU make 的 SHELL 变量连接到远程 shell 吗？](https://stackoverflow.com/questions/11396816/can-i-use-gnu-makes-shell-variable-to-connect-to-a-remote-shell)

我想在一个食谱中使用两种不同的贝壳。一个 shell 在主机上，另一个在没有 make 的目标设备上。主机上的 shell 用于跟踪测试的成功和失败。目标设备上的外壳用于执行测试。我已成功使用 $(eval SHELL=) 从主机 shell 更改为目标 shell。但是，当我在配方中添加 $(eval SHELL=) 时，似乎 SHELL 永远不会改变。我假设在运行配方之前评估了两个 eval 函数，因此第二个扩展取消了第一个扩展。有没有办法让这些 eval 函数在运行时扩展，或者在一个配方中更改 SHELL 变量两次？

为了说明我的目标，它将是这样的：

```
test: test_dependencies  
    touch $host_files_for_tracking  
    SHELL = target_shell  
    $(program_to_test) $(params) -o result  
    cmp result gold  
    SHELL = host_shell  
    rm $host_files_for_tracking 
```

谢谢。

注意：当我谈论 SHELL 时，我指的是 make-internal 变量，它决定了调用哪个 shell make 以执行配方步骤，而不是环境变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:27:28.237

如果您不限于只使用一个配方，则可以按如下方式拆分规则：

```
.PHONY: test test_dependencies

test : test_target test_host
test_host : test_target # to enforce the order
test_target test_host : test_dependencies

shell_orig := $(SHELL) 
```

目标相关规则如下所示：

```
.PHONY: test_target test_target_touch

test_target: test_target_touch
test_target_touch: SHELL = $(shell_orig)
    touch $host_files_for_tracking  

test_target: SHELL = target_shell
    $(program_to_test) $(params) -o result 
```

和主机：

```
.PHONY: test_host test_host_cmp

test_host: test_host_cmp
test_host_cmp: SHELL = $(shell_orig)
    cmp result gold  

test_host: SHELL = host_shell
    rm $host_files_for_tracking 
```

如果使用最新的 GNU Make 3.82，可以通过对特定于目标的变量`shell_orig`使用`private`修饰符来避免 hack。`SHELL`

# cocoa - 可可：如何轻松地将新视图添加到拆分视图

> ID：11600026
> 
> 赞同：0
> 
> 时间：2012-07-22T11:48:13.533
> 
> 标签：cocoa

当我通过 Interface Builder 将新的表视图添加到拆分视图时，我需要通过拖动表边缘来调整表视图的大小以完全填充拆分视图。我想知道如何比拖动更容易做到这一点？ ![在此处输入图像描述](../Images/68b3b19523f80c9899013d1824ab3382.png)

我想要的是： ![在此处输入图像描述](../Images/4297821debf4d130cf869911224ca79f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:26:09.470

如果我正确理解你，我认为你想要这个：

选择添加的表格视图并转到**尺寸检查器**->**排列**-> 并选择：

1)**水平填充容器**- 它将完全水平填充选定的视图。

2)**垂直填充容器**- 它将垂直填充。

![截屏](../Images/f88053f80e7818404664e871fc1647a5.png)

**注意：**要使用此自动布局，需要在**File Inspector**中禁用。

**结果：**

前：

![截图 2](../Images/fc021df1bc4cd7365b811440e8ee7a1d.png)

按**水平填充容器**后：

![截图 3](../Images/540c200121f965342a8c82fa84da45d9.png)

# eclipse - 在eclipse中更新依赖后总是执行copy-dependencies

> ID：11600034
> 
> 赞同：0
> 
> 时间：2012-07-22T11:49:03.310
> 
> 标签：eclipse, maven, eclipse-wtp, m2e

我正在使用 maven eclipse 插件来管理我的 web 应用程序项目 (eclipse WTP) 的依赖项。当我更改依赖项时，我通常执行 maven 的 copy-dependencies 目标以将项目 jar 复制到 WebContent/WEB-INF/lib 文件夹。当我更改 pom 文件中的依赖项时，有没有办法自动完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T14:45:22.340

这是一个老问题，所以希望此时您正在使用 Eclipse m2e 插件。当您在 Eclipse 中运行服务器时，m2e-wtp 连接器会将 pom.xml 中声明的依赖项添加到类路径中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T06:49:51.627

第一件事是：Maven 不是一个依赖管理工具，它是一个构建工具，它包含完整的构建信息，而不仅仅是依赖关系。此外，您应该根据 Maven 的约定（src/main/java、src/test/java 和 src/main/webapp）更改布局。此外，您应该在之后将您的项目作为 Maven 项目导入 Eclipse，不需要将依赖项复制到 WEB-INF/lib 文件夹，因为它应该可以开箱即用。

# forms - 带有页面流的 Yesod 表单

> ID：11600037
> 
> 赞同：6
> 
> 时间：2012-07-22T11:49:32.007
> 
> 标签：forms, rest, haskell, session-state, yesod

某些表格太复杂，无法将它们放在一页上。例如，如果表单涉及大量结构化数据，例如在地图上选择位置、在日历小部件中安排事件，或者根据之前的输入使表单的某些部分发生变化，那么能够将某个表单拆分为多个页面。

这对于动态网页和 Javascript 很容易做到，因为只需创建一个带有不同页面的选项卡小部件，实际提交的表单将包含整个选项卡小部件及其所有输入字段，从而`POST`为整个操作产生一个请求.

但是，有时生成某些输入字段需要很长时间；即使在页面生成之后，它们甚至可能是计算密集型的，对低端计算机用户的浏览器造成负担。此外，创建根据早期输入自行调整的表单变得困难或不可能。

因此，有必要将某个表单拆分为多个整页请求。

这可能很困难，特别是因为表单的第一页将`POST`发送到`/location/a`，这将发出重定向到客户端`/location/b`并请求`GET`客户端。将存储的表单数据从`POST /location/a`to传递`GET /location/b`是困难所在。

Spring Web Flow（Spring 框架的一个子项目，以其依赖注入功能而闻名）的创建者 Erwin Vervaet 曾经写过[一篇博客文章](http://ev9d9.blogspot.se/2009/11/page-flow-challenge.html)，演示了该框架中的此功能，并将其与实现[类似功能](http://demo.liftweb.net/wiz2)的 Lift Web 框架进行了比较. 然后他提出了对其他 Web 框架的挑战，这将在[后面的文章](http://ev9d9.blogspot.se/2009/11/page-flow-challenge-clarification.html)中进一步描述。

Yesod 将如何面对这个问题，尤其是考虑到它基于 REST 的无状态特性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T02:41:27.700

首先，目前还没有预先构建的解决方案（至少我知道）。而且我不熟悉提到的其他框架如何解决问题。所以我在这里说的几乎是猜想。但是，我相当肯定它会起作用。

这里问题的关键是将页面 A 的 POST 参数编码到页面 B 的 GET 请求中。最简单的方法是将页面 A 的 POST 参数粘贴到会话变量中。但是，这样做会彻底破坏导航：后退/前进根本不会像描述的那样工作。

所以我们回到 REST：我们需要将 POST 参数编码到请求本身。这实际上意味着将信息放在请求的路径或查询字符串中。查询字符串可能是最有意义的。

我担心将原始 POST 参数放入查询字符串中，因为这将允许任何代理服务器轻松窥探内容。所以我想利用来自客户端会话的现有密码学。换句话说，我们将在查询字符串参数中粘贴之前提交的表单的签名、加密版本。

为了使它更具体一点：

*   用户通过 GET 转到页面 A。
*   用户通过 POST 提交页面 A。
*   服务器验证表单提交，获取一个值，序列化它，加密/散列它。
*   用户作为 GET 被重定向到页面 B，查询字符串参数包含来自页面 A 的加密/散列值。
*   根据需要多次继续此过程。
*   在最后一页，您可以解密查询字符串参数并提交所有表单。

如果有人感兴趣，这看起来将是一个有趣的附加包。

# javascript - 当键盘在移动设备上可见时，jQuery/js/html5 更改页面内容

> ID：11600040
> 
> 赞同：16
> 
> 时间：2012-07-22T11:49:46.747
> 
> 标签：javascript, jquery, html, jquery-mobile, jquery-events

> **可能重复：**
> [iPad Web App：在 Safari 中使用 JavaScript 检测虚拟键盘？](https://stackoverflow.com/questions/2593139/ipad-web-app-detect-virtual-keyboard-using-javascript-in-safari)

我正在为网站构建移动版本，如果我可以使用 jQuery/js/html5 或任何其他技术创建在虚拟键盘可见时可以在移动应用程序上制作的相同分屏效果，我很感兴趣。

例如，如果用户进入我的网页并单击输入文本字段，则会显示虚拟键盘并且浏览器会自动缩放到输入文本字段所在的区域。

我想要的是能够根据新的分辨率（屏幕高度 - 键盘高度）在虚拟键盘可见时更改我的页面内容，方法是移动屏幕顶部的输入文本字段，然后根据一些提示用户在文本字段中输入的内容。

这里有一些草图，看看我在说什么：

这是没有键盘的页面视图，基于搜索的结果：

![没有键盘的页面](../Images/d5d1c02cd33dbd96b2c39b4f93cbc599.png)

带有纵向键盘的页面，徽标消失，文本输入移动到顶部，最多显示 4 个项目

![带有纵向键盘的页面](../Images/c4aaa0713178fef6355f15aba3cec6ff.png)

横向键盘的页面，logo消失，然后输入移到顶部并被放大，只显示2个项目

![在此处输入图像描述](../Images/543bc990b43182426ed653f80275ac6a.png)

如果键盘被隐藏，页面应该进入阶段 1。

希望这可以帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-25T12:56:51.937

我已经尝试通过捕获调整大小事件来解决您的问题的第一个解决方案，您可以知道方向和 gest 是键盘可见

**更新：使用**[LKM 解决方案](https://stackoverflow.com/a/2601085/664157)添加 iOS 移动 safari 支持

```
var is_keyboard = false;
var is_landscape = false;
var initial_screen_size = window.innerHeight;

/* Android */
window.addEventListener("resize", function() {
    is_keyboard = (window.innerHeight < initial_screen_size);
    is_landscape = (screen.height < screen.width);

    updateViews();
}, false);

/* iOS */
$("input").bind("focus blur",function() {
    $(window).scrollTop(10);
    is_keyboard = $(window).scrollTop() > 0;
    $(window).scrollTop(0);
    updateViews();
}); 
```

现在您可以显示和隐藏徽标和一些订单项

```
function updateViews() {
    $("li").hide();
    if (is_keyboard) {
        $("#logo").hide();
        if (is_landscape) {
            $("li").slice(0, 2).show();
        }
        else {
            $("li").slice(0, 4).show();
        }
    }
    else {
        $("#logo").show();
        $("li").show();
    }
} 
```

对于基于此 HTML 的 JS

```
<div id="logo">Logo</div>
<input type="text"><input type="submit" value="search">
<ul>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
</ul> 
```

查看[我的示例页面](http://frommelt.fr/virtual-keyboard/)

# data-structures - 数据结构，与其中的数据量无关

> ID：11600043
> 
> 赞同：0
> 
> 时间：2012-07-22T11:49:56.570
> 
> 标签：data-structures, language-agnostic

是否有任何数据结构可以在其中定位数据与数据量无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:53:18.050

“定位数据与其中的数据量无关” - 我认为这意味着获取操作的 O(1)。那将是一个哈希映射。

这假定您基于散列获取对象。

如果您必须检查每个元素以查看属性是否与特定值匹配，例如您的`rson`或`ern`它的任何其他部分，那么您必须预先将该值作为键。

如果您需要搜索多个值 - 所有值都必须是唯一且不可变的 - 您可以创建多个映射，每个值对应一个。这使您可以搜索多个。但它们都必须是唯一的、不可变的和预先知道的。

如果您没有预先确定密钥，则为 O(N)，这意味着您必须依次检查每个元素，直到找到所需的内容。平均而言，这个时间会随着集合大小的增加而增加。这就是 O(N) 的意思。

# delphi - 如何从 ImageList 加载透明图像？

> ID：11600044
> 
> 赞同：10
> 
> 时间：2012-07-22T11:50:05.093
> 
> 标签：delphi, png, transparency, timage, timagelist

我想将图片（32 位深度，透明）从 a 加载`TImageList`到`TImage`. 标准方法是`ImageList.GetBitmap(Index, Image.Picture.Bitmap);`. 但是该`GetBitmap`方法不适用于透明度，所以我总是得到一个不透明的位图。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-22T11:50:05.093

解决方法相当简单 - ImageList 提供了另一种方法`GetIcon`，它适用于透明度。加载透明图像的代码是：

```
ImageList.GetIcon(Index, Image.Picture.Icon); 
```

并且不要忘记设置正确的 ImageList 属性：

```
ImageList.ColorDepth:=cd32bit;
ImageList.DrawingStyle:=dsTransparent; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-08T20:56:40.967

从 tImageList 传入图像时，我也遇到了各种问题。所以我有一个简单的包装例程，它通常可以完成这项工作并强制透明。下面的代码是 Delphi 2005，imlActiveView 是 tImageList 组件，其中包含我的一组按钮字形图像。

```
procedure TfrmForm.LoadBitmap (Number : integer; bmp : tBitMap);
var
  ActiveBitmap : TBitMap;
begin
  ActiveBitmap := TBitMap.Create;
  try
    imlActiveView.GetBitmap (Number, ActiveBitmap);
    bmp.Transparent := true;
    bmp.Height      := ActiveBitmap.Height;
    bmp.Width       := ActiveBitmap.Width;
    bmp.Canvas.Draw (0, 0, ActiveBitmap);
  finally
    ActiveBitmap.Free;
  end
end; 
```

这是一个使用示例，其中第 5 个 imlActiveView 图像被传递到 btnNavigate.Glyph。

```
LoadBitmap (5, btnNavigate.Glyph) 
```

# parsing - 如何在 ANTLR 中设置平面优先规则？

> ID：11600049
> 
> 赞同：1
> 
> 时间：2012-07-22T11:50:07.910
> 
> 标签：parsing, antlr, ambiguity, operator-precedence

我想以平坦的方式设置优先规则（例如，用于乘法和加法的数学运算符 - 即 * 和 +）。

看看： [http](http://www.gregbugaj.com/?p=251) ://www.gregbugaj.com/?p= 251（简而言之，它通过说明表达式是多表达式的添加来解决上述示例）。

这以非常深的解析树为代价来完成这项工作，因为优先级是使用嵌套规则解决的。我想有一个（“扁平”）规则用于解析加上优先级声明（所以，就像在 Yacc 中解决的那样）。

**问题**：如何在 ANTLR 中实现这种（Yacc-like，即 flat one）方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:34:37.923

> 问题：如何在 ANTLR 中实现这种（Yacc 式，即扁平式）方法？

你不能。

如果让解析器创建一个 AST，那么“非常深的解析树”将不复存在。请参阅以下问答：[如何输出使用 ANTLR 构建的 AST？](https://stackoverflow.com/questions/4931346/how-to-output-the-ast-built-using-antlr)

# struts2 - 将文本字段值插入struts2中的集合

> ID：11600050
> 
> 赞同：1
> 
> 时间：2012-07-22T11:50:10.937
> 
> 标签：struts2

我有这个豆类

```
 Class Address {
    private String addressId;
    private Set<Location> setOfLocations;

    // more attributes

   //getters and setters

 }

 Class Location{
     private Long   locationId;
     private String locationName
     private String nearestHospital;

     //getters and setters
 } 
```

在 jsp 中，我有一个用于 Address 类成员的 textField 控件，还有一个用于 LocationName 和最近医院的 Location 类成员。

Address 类成员通常映射，因为模型驱动的接口将它们映射到各自的字段。问题是我如何将位置文本字段映射到地址类的 Set 成员内的位置对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:57:06.287

### 将新项目添加到集合

使用类型转换和 a`list`而不是 a `set`，这将有助于将新项目添加到列表中：

```
<s:textfield name="locations[%{locations.size()}].locationName"/> 
```

如果你想使用一套，那么我不知道如何在不花一些时间挖掘的情况下实现你想要的，但你会想从[这里](http://struts.apache.org/2.x/docs/type-conversion.html#TypeConversion-CollectionandMapSupport)开始。

* * *

### 显示和编辑现有的集合项目

另一方面，如果您希望能够显示和编辑现有集合，那么如果您使用 a`list`而不是 a ，这应该可以工作`collection`：

```
<s:iterator var="listItem" value="yourList" status="listStatus">
   <s:set name="paramName">yourList[${ listStatus.index }].someField</s:set>
   <s:textfield name="%{#paramName}" value="%{#listItem.someField}"/>
</s:iterator> 
```

在这里，您的模型将有一个名为 的列表`yourList`。yourList 中的项目包含一个名为 的字段`someField`。我们可以通过将请求参数名称设置为表单中的值来设置字段值，`yourList[2].someField`以便对此`OGNL`进行评估并将参数值设置到 yourList 的第 2 项的 someField 字段中。

使用您在上面显示的类，但将位置更改为列表，我们将拥有：

```
<s:iterator var="location" value="listOfLocations" status="locationStatus">
   <s:set name="paramName">listOfLocations[${ locationStatus.index }]</s:set>
   <s:hidden name="%{#paramName}.locationId" value="%{#location.locationId}"/>
   <s:textfield name="%{#paramName}.locationName" value="%{#location.locationName}"/>
   <s:textfield name="%{#paramName}.nearestHospital" value="%{#location.nearestHospital}"/>
</s:iterator> 
```

或者，如果您正在使用`JSTL`，这将执行相同的操作：

```
<c:forEach var="location" items="${ listOfLocations }" varStatus="locationStatus">
   <s:set name="paramName">listOfLocations[${ locationStatus.index }]</s:set>
   <s:hidden name="%{#paramName}.locationId" value="%{#location.locationId}"/>
   <s:textfield name="%{#paramName}.locationName" value="%{#location.locationName}"/>
   <s:textfield name="%{#paramName}.nearestHospital" value="%{#location.nearestHospital}"/>
</c:forEach> 
```

# ruby-on-rails - Rails 没有使用正确的控制器方法

> ID：11600052
> 
> 赞同：1
> 
> 时间：2012-07-22T11:50:30.103
> 
> 标签：ruby-on-rails

我得到了以下代码的视图：

```
<%= form_for(@stock,:url=>{:action=>"buyback"},:html=>{:class=>"form-horizontal"}) do |f| %> 
```

我的 routes.rb 文件显示：

```
post '/stocks/buyback' 
```

当我单击表单的提交按钮时，它不会触发控制器的方法回购，而是更新。

日志文件显示：

```
Started PUT "/stocks/buyback" for 127.0.0.1 at 2012-07-22 19:46:07 +0800
Processing by StocksController#update as HTML 
```

它触发控制器方法更新而不是回购。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:57:42.227

试试这个

```
<%= form_for(@stock,:url=>{:action=>"buyback"},:method => :post, :html=>{:class=>"form-horizontal"}) do |f| %> 
```

# binary - lognsteps中n个二进制长度数的on位是否有数量？

> ID：11600054
> 
> 赞同：0
> 
> 时间：2012-07-22T11:50:40.167
> 
> 标签：binary

我试图找出是否可以在logn步骤中使用O（1）空间评估长度为n的二进制数中的on位数？如果是这样- 怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:51:55.887

查找表将在恒定时间内找到它。

# cakephp-2.2 - 为 cakephp 中的所有模型添加一个通用范围

> ID：11600057
> 
> 赞同：1
> 
> 时间：2012-07-22T11:51:09.460
> 
> 标签：cakephp-2.2

我正在构建一个在线帐户应用程序，其中每个企业都有自己的数据，因此每个表都有一个字段 business_id。

有没有办法自动为每个模型添加条件

```
Model.business_id => x 
```

例如，如果用户搜索所有包含 Project 的事务，则添加的条件将是：

```
Transaction.business_id => x
Project.business_id => x 
```

我猜这最好放在一种行为中，因为它适用于除两个模型之外的所有模型

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:16:12.597

您可以在 beforeFind() 中修改查询数据，这也可以在行为中

在您的模型中：

```
$actsAs = array('BusinessCondition'); 
```

行为将类似于：

```
<?php
App::uses('AuthComponent', 'Controller/Component');

class BusinessCondition extends ModelBehavior {

    public function beforeFind(Model $Model, $query) {
        $query['conditions'][$Model->alias . '.business_id'] = AuthComponent::user('business_id');
        return $query;
    }
} 
```

# java - 预计括号。但是哪里？

> ID：11600063
> 
> 赞同：-3
> 
> 时间：2012-07-22T11:52:36.930
> 
> 标签：java

我不断收到预期的错误消息“）”。我无法确定原因。

```
import java.util.Scanner;
public class PartA extends ChangeDrawer
    {

       public static void main (String[] args)
       {
            Scanner input = new Scanner(System.in);
            System.out.println("Enter P to make a purchase & receive your change");
            System.out.println("Enter L to load the Change drawer");
            System.out.println("Enter H to write the contents of the Change Drawer to a
            web Page");
            System.out.println("Enter E to exit the program"); //this is the user prompt

            String selection = input.nextLine();

           if{ //Error message: "(" expected

                (String selection=L)

                cDraw.loadFloat(floatDrawer);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T11:55:29.317

`if`您需要在语句中有一个条件：

```
if(condition) {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:04:33.443

整个状态有点乱。

我认为它应该是这样的：

```
if(selection.equals("L")) {
  cDraw.loadFloat(floatDrawer);
} 
```

# javascript - 将 JSONRPC 与 JQuery 一起使用？

> ID：11600064
> 
> 赞同：3
> 
> 时间：2012-07-22T11:52:40.223
> 
> 标签：javascript, jquery, json-rpc, cross-domain-policy

**如何让 JSONRPC 在客户端与 JQuery 一起在引用的调用类型上正常工作？**

为了代表我的尝试，我尝试创建尽可能小的测试用例：

### 服务器[1]

```
from txjsonrpc.web import jsonrpc
from twisted.web import server
from twisted.internet import reactor

class Math(jsonrpc.JSONRPC):
    def jsonrpc_add(self, a, b):
        return a+b

    def jsonrpc_echo(self, foo):
        return str(foo)

    def jsonrpc_hello(self):
        return u"Hello World!"

reactor.listenTCP(7080, server.Site(Math()))
reactor.run() 
```

### 客户[2]

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Math is fun?!</title>
        <script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="https://raw.github.com/datagraph/jquery-jsonrpc/master/jquery.jsonrpc.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $.jsonRPC.setup({
                    endPoint : 'http://localhost:7080',
                    namespace : ''
                });
                $("input#evaluate").click(function() {
                    $.jsonRPC.request('jsonrpc_echo', {
                        params : [$("textarea#input").val()],
                        success : function(data) {
                            $("<p />").text(data.result).appendTo($("p#result"));
                        },
                        error : function(data) {
                            $("<p />").text(data.error.message).appendTo($("p#result"));
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
        <p id="result"></p>
        <p>
            <textarea name="input" id="input"></textarea>
        </p>
        <p>
            <input name="evaluate" id="evaluate" value="evaluate" type="button" />
        </p>
    </body>
</html> 
```

1.  改编自[https://stackoverflow.com/a/4738563/1438003](https://stackoverflow.com/a/4738563/1438003)
2.  改编自[https://github.com/filonenko-mikhail/maxima-json-rpc/blob/master/examples/js-maxima-rpc-client.html](https://github.com/filonenko-mikhail/maxima-json-rpc/blob/master/examples/js-maxima-rpc-client.html)

# java - 使用java创建词法分析器程序的想法

> ID：11600069
> 
> 赞同：0
> 
> 时间：2012-07-22T11:54:07.823
> 
> 标签：java, compiler-construction, tokenize, lexical-analysis, stringtokenizer

我正在尝试使用 java 创建一个词法分析器程序。程序必须具有标记化的概念。我在编译器编程方面具有初学者水平的知识。我知道互联网上有很多词法生成器。我可以用它们来测试我自己的词法分析器输出。但我需要做我自己的词法分析器。任何人都可以提供一些最好的参考或文章或想法来开始我的编码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:08:04.780

Aho Sethi 和 Ullman 的“编译器原理、技术和工具”有一章是关于词法分析器的。它包括许多关于正则表达式和有限自动机的理论，这些理论是这个问题域的核心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:07:19.257

我会尝试查看一些更好的源代码。我过去使用[过 Sablecc](http://sablecc.org/)。如果您访问描述如何设置您的环境的[此](http://sablecc.org/wiki/DevelopmentEnvironment)页面，则有一个指向它的源代码的[链接。](http://mercurial.selenic.com/wiki/Download)[Antlr](http://www.antlr.org/)也是一个非常常用的。这是它的源代码。

另外，[《龙书》](https://rads.stackoverflow.com/amzn/click/com/0321486811)真的很不错。

正如 SK-logic 所建议的那样，我将[现代编译器实现](http://www.amazon.co.uk/Modern-Compiler-Implementation-Andrew-Appel/dp/052182060X)添加为另一种选择。

# java - 从谷歌识别器意图捕获音频

> ID：11600072
> 
> 赞同：2
> 
> 时间：2012-07-22T11:54:51.310
> 
> 标签：java, android, audio-capture

> **可能重复：**
> [Android：录音和保存音频](https://stackoverflow.com/questions/10905337/android-voice-recording-and-saving-audio)

我需要从`RecognizerIntent`. 现在，我正在做这样的事情：

```
Intent i = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
i.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speak");
i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, defaultLocale);
i.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 1);
i.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS, new Long(1000)); 
```

我试图创建一个类`MediaRecorder`来获取音频信号，但它不起作用。我真的需要得到信号。

# c# - 客户端用户的 WindowsIdentity

> ID：11600073
> 
> 赞同：0
> 
> 时间：2012-07-22T11:55:03.977
> 
> 标签：c#, client-server, windows-identity

我正在为一家公司编写一个 Web 应用程序，他们要求用户不应该输入任何用户名和密码，应该允许用户通过他们的 Windows 身份登录系统。

我已经尝试过 WindowsIdenity.GetCurrent() ，如果应用程序在客户端上，它就可以工作。

如何将客户端用户的 WindowsIdenitiy 发送到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:58:54.130

Internet Explorer 具有将客户端的 Windows 凭据传输到服务器的机制。您需要让您的客户端使用 IE，当然还要确保它们与服务器位于同一个域林中。

您可以[在这里](http://forums.iis.net/t/1152237.aspx)阅读一些关于使用 ASP.NET 的集成 Windows 身份验证的信息。

# visual-studio-2010 - 如何在 Visual Studio 中删除单个大纲块？

> ID：11600080
> 
> 赞同：1
> 
> 时间：2012-07-22T11:56:34.260
> 
> 标签：visual-studio-2010, visual-web-developer-2010

在 Visual Studio 中使用大纲（“编辑”选项卡 ->“大纲”）时，可以添加大纲块以进行折叠，或完全停止大纲。但是如何删除单个大纲块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:46:31.810

只需将光标放在轮廓块内的任意位置并按住**Ctrl**的同时按**M**，然后按键盘上的**U**。

另一种方法是单击**Edit -> Outlining -> Stop hidden current**。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T11:58:48.493

区域由#region 标签在代码中定义

```
#region

// code here

#endregion 
```

只需编辑代码并删除开始和结束标记即可删除区域。

# ios - Scrollview 上参数类型的分布式对象修饰符冲突

> ID：11600081
> 
> 赞同：5
> 
> 时间：2012-07-22T11:56:40.240
> 
> 标签：ios, parameters, scrollview

我正在使用滚动视图，并实现委托方法。

```
-(void) scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(CGPoint *)targetContentOffset{
    CGPoint p = *targetContentOffset;
    int counter = [self counterForPosition:p];
    *targetContentOffset=[self positionForCounter:counter];;
    //load month -2;
    self.month=counter-2;
} 
```

我收到 Xcode 的警告。在“scrollViewWillEndDragging:withVelocity:targetContentOffset:”的实现中参数类型上的分布式对象修饰符冲突

我发现了一些我不完全理解的提示，也没有解决我的问题。 [单例释放方法产生警告？](https://stackoverflow.com/questions/7379470/singleton-release-method-produces-warning)

现在它只是一个警告，没有任何崩溃。我想这是我个人的强迫症，我想解决这个问题。

发送

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T19:23:38.920

`(CGPoint *)targetContentOffset`应该阅读`(inout CGPoint *)targetContentOffset`, 以匹配您尝试实现的协议中的声明。请参阅此处的协议文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)

仅供参考：`in`、`out`、`inout`、`byref`、`bycopy`和`oneway`统称为“分布式对象修饰符”。它们有点像注释，告诉编译器（或阅读器，或文档系统）您将如何使用函数参数。在这种情况下，`targetContentOffset`指向一个 CGPoint，其值被使用然后修改：它既是一个参数`in`，也是一个`out`参数。Clang 想确保你知道这一点，所以如果你没有告诉 Clang “是的，我知道这是一个`inout`参数”，Clang 会向你显示那个警告。

# asp.net - 动态添加 IF IE 条件

> ID：11600082
> 
> 赞同：1
> 
> 时间：2012-07-22T11:56:50.363
> 
> 标签：asp.net

是否可以添加

```
<!--[if IE 6]> ....  <![endif]--> 
```

关于动态生成的 css 或 js 文件引用。

例如

```
HtmlGenericControl ie6css = new HtmlGenericControl("link");
ie6css.Attributes.Add("rel", "stylesheet");
ie6css.Attributes.Add("src", Config.GetUrl("ie6/ie6-min.css"));
Page.Header.Controls.Add(ie6css); 
```

会产生

```
<link href="ie6/ie6-min.css" rel="stylesheet"> 
```

我需要在一些条件语句中包含生成的 css 引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:15:44.723

是的，这是可能的。您可以从服务器端代码中[读取浏览器信息](http://msdn.microsoft.com/en-us/library/3yekbd5b.aspx)`Request.Browser`，并基于此加载内容。我不确定这有多可靠，而且它很容易被伪造，所以我只会依赖它来做风格的事情（就像你正在做的那样）。

您还可以通过 JavaScript 在客户端[检测浏览器](http://www.w3schools.com/js/js_browser.asp)，然后在该点[动态加载样式表。](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T14:26:09.400

您应该尝试 Conditionizr，它会为您完成所有这些工作，正是您需要的每个浏览器/平台/设备，甚至是最新的浏览器和旧版：

[http://conditionizr.com](http://conditionizr.com)

# django - 有没有办法逐行检查简单的 Django 查询？

> ID：11600083
> 
> 赞同：0
> 
> 时间：2012-07-22T11:56:52.813
> 
> 标签：django, validation

致力于学习 Django，目前（正在尝试）有一个模板来创建我创建的“机器人”列表。我不是在寻求具体问题的帮助——我试图自己解决这个问题——但我想知道我是否能找出我失败的**地方。**

查找看起来像这样。目前，在模板中，它什么都不返回（并且数据库中肯定有两个“机器人”：

```
<p>Robotz!</p>
    {% for bot in robots.all %}
    <p>{{bot.name}}&nbsp;//{{bot.serialnumber}}</p>
    {% endfor %}
<p>And that's a list of robots.</p> 
```

我不知道是否......
- “robots.all”在第二行中查找错误的位置，
- “for bot in”在第二行中是错误的语法，
或者
- “bot.name”和“bot.serialnumber”是在第三行打印的错误值。

现在，模板什么也没返回：它直接来自“Robotz！” “这是一个机器人列表。” 在提供的 HTML 页面上。在 Chrome 中检查元素在这两行之间没有给我任何东西。

有没有办法找出我做错了什么？不特定于这个实例，但是我可以看到我是否在错误的地方寻找，或者输出错误的输出。

再次，我想弄清楚如何自己做到这一点，但我正在寻找可以帮助我知道我在**哪里**搞砸的工具：是否有类似 Inspect Element 的东西适用于 Django，所以我可以看到哪些行是/不寻找和返回数据，就像我可以使用 Inspect Element 看到哪些 CSS 行是活动的和不活动的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:16:41.417

[在这种情况下， django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)会帮助你很多。它向您显示所有已执行的查询。它不会逐行显示查询，但它会让您大致了解应用程序中发生的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:25:02.603

我希望你知道`python manage.py shell`它给你提供了类似于 shell 的 python，但也提供了更多的东西，比如 tab 完成或选项。在您的视图中尝试不同的查询/python 代码很有用。

正如 Ondrej Slinták 所建议的，django 调试工具栏对于解决各种问题非常有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T17:01:19.417

这是语法问题。您可能会在某个地方在您的视图中汇总一个机器人列表，对吗？我将大胆猜测并假设您在将它`robots`传递给模板时调用它。

在这种情况下，您的语法应该是`{% for bot in robots %}`

看看一些基本的 Django 教程或 Django 的文档——他们将解释像这样的事情在 Django 中是如何工作的。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T08:14:41.613

它可能是这样的

`views.py`

```
from django.shortcuts import render
from main.models import Robot

def robots(request):
    return render(request, 'robots.html', {'robots': Robot.objects.all()} 
```

`templates/robots.html`

```
<p>Robotz!</p>
{% for bot in robots %}
    <p>{{ bot.name }}&nbsp;//{{ bot.serialnumber }}</p>
{% endfor %}
<p>And that's a list of robots.</p> 
```

# ruby-on-rails-3 - 文章更新时如何使主页缓存过期？

> ID：11600087
> 
> 赞同：2
> 
> 时间：2012-07-22T11:57:36.403
> 
> 标签：ruby-on-rails-3, caching, memcached, activeadmin, sweeper

我正在尝试在发布新文章时使用清扫器清除主页索引操作。

主页缓存在开发环境中运行良好，并在 1 分钟后过期。但是，当保存文章时，不会触发清扫器操作。

```
class HomeController < ApplicationController
  caches_action :index, :expires_in => 1.minute
  cache_sweeper :article_sweeper
  def index
    @articles = Article.published.limit(5)
  end
end

class ArticleSweeper < ActionController::Caching::Sweeper
  observe Article
  def after_update(article)
    expire_action(:controller => 'home', :action => 'index')
  end
end 
```

要么我在某个地方出错，要么需要一种不同的方法来使主页缓存过期。

我的应用程序使用 ActiveAdmin 来更新文章，并使用 Dalli 来更新 Memcache（因为我将使用 Heroku）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T23:37:55.917

解决方案的两个步骤：

对模型执行更改的控制器需要具有清扫器参考，而不是如上所示的目标控制器。在这种情况下，它是 active_admin，所以我将它添加到我的 admin/articles.rb 文件（[source](https://github.com/gregbell/active_admin/issues/530)）而不是主控制器。

```
controller do
  cache_sweeper :article_sweeper
end 
```

并且控制器名称需要一个斜杠

```
expire_action(:controller => '/home', :action => 'index') 
```

# android - 如何设置 ExpandableListView 的二级列表样式？

> ID：11600091
> 
> 赞同：4
> 
> 时间：2012-07-22T11:57:58.577
> 
> 标签：android

如何更改二级列表的样式`ExpandableListView`？例如，添加背景颜色或页眉\页脚视图。

请注意，我不需要为**每个**孩子设置背景。我需要为**整个**第二级设置样式。

这是我想要实现的示例（棕色布局 - 是二级列表）：

![在此处输入图像描述](../Images/1d47c1ef9118221ff7e1aa5450c16cf7.png)

正如我所说，我不需要为每个项目单独应用样式。因为我在背景上有一个可重复的图像（不仅仅是颜色）。我知道如何应用样式以及如何将其设置到每个子视图，但这不是我可以用来实现此类背景的方法。

**编辑**

我想要达到的目标：

1.  在“At the cafe”顶部添加阴影。可以很容易地完成，但是在这种情况下`ListView`如何获得呢？`ListView`有`ListView`吗？

2.  将可重复图像设置为**二级列表**的背景（不是单独为每个子视图）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:42:11.993

可以实现这一点的一种方法是使用以下方法。

在您的目录中创建一个。[`style`](http://developer.android.com/guide/topics/ui/themes.html) `xml``res/values/`

现在定义[`style`](http://developer.android.com/guide/topics/ui/themes.html)你想要的任何东西。当以这种方式使用时，它将改变应用到这个特定`Views`的所有位置。[`style`](http://developer.android.com/guide/topics/ui/themes.html)[`style`](http://developer.android.com/guide/topics/ui/themes.html)

这是我测试过的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="backgroundTest" parent="@android:style/TextAppearance.Medium">

        <item name="android:background">#00FF00</item>

    </style>

</resources> 
```

现在将 .xml 添加[`style`](http://developer.android.com/guide/topics/ui/themes.html)到定义子级的 xml 中的顶级布局`ExpandableListView`。例如，这是我的孩子（注意`style`my 中的`LinearLayout`）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/backgroundTest"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/rightSideTextView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="25dp"
        android:paddingLeft="50dp"
        android:paddingTop="25dp" />

</LinearLayout> 
```

我相信这应该把你所有孩子的颜色都变成绿色。您可以将其更改[`style`](http://developer.android.com/guide/topics/ui/themes.html)为您想要的任何内容。我链接了一些很棒的文档，可以帮助您。

# upshot - 在 upshot.js 中设置数据源 url

> ID：11600094
> 
> 赞同：0
> 
> 时间：2012-07-22T11:58:27.953
> 
> 标签：upshot, single-page-application

我刚刚看了一个关于单页应用程序的精彩演示。我还查看了示例代码，但无法弄清楚我们在哪里设置了 WebApi url。

我们在这里设置数据源：

```
@(Html.UpshotContext(bufferChanges: true).DataSource<DataServiceController>(x => x.GetDeliveriesForToday())) 
```

但是如何为不同的环境设置源 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:51:14.503

它将遵循在您的 RouteConfig.cs / global.asax.cs 中设置的路线：

```
routes.MapHttpRoute(
    "DataService", // Route name
    "api/DataService/{action}", // URL with parameters
    new { controller = "DataService" } // Parameter defaults
); 
```

# ruby-on-rails - Rails：image_tag 问题

> ID：11600095
> 
> 赞同：1
> 
> 时间：2012-07-22T11:58:33.260
> 
> 标签：ruby-on-rails, image, scope, carrierwave

我不明白为什么这不起作用。我的索引页中有事件，我想用图像和标题显示其中的三个，所以

在我的事件模型中：

```
 scope :host_admin, where(hoster_type: "Admin").order("start_time DESC").limit(3) 
```

在索引页面中：

```
<% Event.host_admin.each do |event| %>
  <%= image_tag(event.image(:home)) %>
  <p class="evento"><%= event.title %>
    <%= link_to "read_all", event_path %>
  </p>
<% end %> 
```

并在 carierwave 上传器中简单地：

```
version :home do
  process :resize_to_fit => [90, 60]
end 
```

**错误是：参数数量错误（1 代表 0）**

这就是问题所在，因为如果我尝试更换

```
 <%= image_tag(event.image(:home)) %> 
```

有了这个

```
 <%= image_tag event.image %> 
```

它有效，但我需要调整图像大小？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:39:14.703

您收到的错误是因为您将 :home 传递给图像对象，而不是 url 方法。您需要将图像标签更改为：

```
<%= image_tag(event.image_url(:home)) %> 
```

# opencv - OpenCV 人脸识别：寻找最佳匹配

> ID：11600100
> 
> 赞同：1
> 
> 时间：2012-07-22T11:59:17.520
> 
> 标签：opencv, face-recognition

我正在开发用于人脸识别功能的 OpenCV2.4.2 C++ 接口。人脸识别功能似乎在标准数据库上运行良好。（AT&T，人脸识别数据，英国埃塞克斯大学）

我对阴性测试更感兴趣。

**这是我所做的**-

1.  从互联网上识别清晰的正面图像。（单个图像/人，不同的图像大小）
2.  使用 LBP 级联检测和提取人脸，转换为灰度并对直方图进行归一化。然后，使用 LBP 人脸识别器用这些图像训练数据库。
3.  从互联网上查找**不属于数据库的面孔。**预处理这张人脸图像并将其作为人脸识别器的输入。

**我**的期望 - 应用程序应该返回相似面孔的 ID。

**结果**- 但我收到了绝对荒谬的结果。当给定白人男性面孔作为输入时，我得到了黑人女性的 ID。我已经用多张图片对此进行了测试，但每次匹配都很奇怪。性别，肤色不匹配。

我要做的就是当给定一个随机图像作为输入（它不是数据库的一部分）时，应用程序至少应该返回具有相似肤色和性别的图像的 ID。我不知道从哪里以及如何开始。

任何帮助将不胜感激。

# c# - 打开远程机器应用程序

> ID：11600104
> 
> 赞同：6
> 
> 时间：2012-07-22T12:00:06.270
> 
> 标签：c#

我正在尝试在 Windows 7 64 上打开远程应用程序（记事本）。这就是我尝试过的：

```
object[] theProcessToRun = {"notepad"};
ConnectionOptions theConnection = new ConnectionOptions();
theConnection.Username = "user";
theConnection.Password = "pass";
ManagementScope theScope = new ManagementScope("\\\\" + ip + "\\root\\cimv2",
                                     theConnection);
ManagementClass theClass = new ManagementClass(theScope, 
                 new ManagementPath("Win32_Process"), new ObjectGetOptions());
theClass.InvokeMethod("Create", theProcessToRun); 
```

此代码仅在任务管理器中打开记事本。我怎样才能使记事本可见。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:57:29.793

未显示的过程是[出于 WMI 中的安全目的而设计的](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389388%28v=vs.85%29.aspx)。我知道的最佳选择是使用 Win32_ScheduledJob 来安排应用程序以交互方式启动的时间。

以下代码未经测试，但我认为应该通过一些调整来做你想做的事情。

```
using System;
using System.Management;
using System.Reflection;

class ScheduleJob
{
    public static uint Create (
string Command,
uint DaysOfMonth,
uint DaysOfWeek,
bool InteractWithDesktop,
bool RunRepeatedly,
string StartTime, // in DMTF format !
out uint JobId)
    {
// See: Platform SDK (or WMI SDK) doc's for detailed info about 'Win32_ScheduledJob' class
        ManagementBaseObject inputArgs = null;
        ManagementClass classObj = new ManagementClass (null, "Win32_ScheduledJob", null);
        inputArgs = classObj.GetMethodParameters ("Create");
        inputArgs ["Command"] = Command;
        inputArgs ["DaysOfMonth"] = DaysOfMonth;
        inputArgs ["DaysOfWeek"] = DaysOfWeek;
        inputArgs ["InteractWithDesktop"] = InteractWithDesktop;
        inputArgs ["RunRepeatedly"] = RunRepeatedly;
        inputArgs ["StartTime"] = StartTime;
// use late binding to invoke "Create" method on "Win32_ScheduledJob" WMI class
        ManagementBaseObject outParams = classObj.InvokeMethod ("Create", inputArgs, null);
        JobId = ((uint)(outParams.Properties ["JobId"].Value));
        return ((uint)(outParams.Properties ["ReturnValue"].Value));
    }
// Delete the Scheduled (JobID)

    public static uint Delete (uint JobID)
    {
        ManagementObject mo;
        ManagementPath path = ManagementPath.DefaultPath;
        path.RelativePath = "Win32_ScheduledJob.JobId=" + "\"" + JobID + "\"";
        mo = new ManagementObject (path);
        ManagementBaseObject inParams = null;
// use late binding to invoke "Delete" method on "Win32_ScheduledJob" WMI class
        ManagementBaseObject outParams = mo.InvokeMethod ("Delete", inParams, null);
        return ((uint)(outParams.Properties ["ReturnValue"].Value));
    }

    public static string ToDMTFTime (DateTime dateParam)
    {
        string tempString = dateParam.ToString ("********HHmmss.ffffff");
        TimeSpan tickOffset = TimeZone.CurrentTimeZone.GetUtcOffset (dateParam);
        tempString += (tickOffset.Ticks >= 0) ? '+' : '-';
        tempString += (Math.Abs (tickOffset.Ticks) / System.TimeSpan.TicksPerMinute).ToString ("d3");
        return tempString;
    }
}

class JobScheduler
{
    public static void Main ()
    {
        uint JobID;
        DateTime dt = DateTime.Now; // Get current DateTime
        dt = dt.AddMinutes (1); //add 1 minute to current time
        string LocalDateTime = ScheduleJob.ToDMTFTime (dt); // convert to DMTF format
// Schedule Notepad to run every Sunday and Wednesday
        uint ret = ScheduleJob.Create (
// @"runas /user:administrator\domain /profile cmd ",
@"c:\winnt\notepad.exe",
0, 32, true, true, LocalDateTime, out JobID);
        if (ret == 0) { // sucess
            Console.WriteLine ("Wait for Job to be scheduled and Press: <Enter> to delete");
            Console.ReadLine (); // For test purposes - Wait for job to be scheduled.
            ret = ScheduleJob.Delete (JobID); // Get rid of this Job
        }
        Console.WriteLine (ret);
    }
}

/* Days of week
Sunday 64,
Monday 1,
Tuesday 2,
Wednesday 4,
Thursday 8,
Friday 16,
Saturday 32

*/ 
```

# objective-c - UIBarButtonItems 不能从一个工具栏中删除并添加到另一个？

> ID：11600108
> 
> 赞同：1
> 
> 时间：2012-07-22T12:00:17.657
> 
> 标签：objective-c, ios, uisplitviewcontroller, uibarbuttonitem

我有一个 UISplitViewController。我有多个详细视图。详细视图具有工具栏。我想在工具栏之间移动从 UISplitViewControllerDelegate 提供的 UIBarButtonItem 。

所以我保存了对 UIBarButtonItem 的引用，当我交换视图时，我将它从当前详细视图中删除并将其移动到新的详细视图中。

UIBarButtonItem 只工作一次。如果我从 UISplitViewController 详细信息窗格中的视图控制器 A 开始，则该项目将显示在工具栏中。当我切换到视图控制器 B 时，我可以看到该项目被删除和添加，它占用了空间，但它永远不会显示在新工具栏中。

每次我想将它添加到新工具栏时，我都可以通过复制 UIBarButtonItem 来解决这个问题。我真的只想使用保存的值。

这是怎么回事？

代码

我的应用程序委托也是我的 UISplitViewControllerDelegate。我所有的细节视图也符合 UISplitViewControllerDelegate。

```
// Save
- (void)splitViewController:(UISplitViewController *)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)pc
{
    /* Omitted code that calls the same method on the current detail view. */
    // Save the item
    self.savedBarButtonItem = barButtonItem;
} 
```

我的应用程序委托中有一个 IBAction：

```
-(IBAction)changeDetailView:(id)sender
{
    /* omitted code to the the new view controller and the current view controller */
    [currentView removeBarButtonItem];

    //This adds the item but the item does not even show up.
    [newView addBarButtonItem:self.savedBarButtonItem];

    // New item with the same target and action works.
    UIBarButtonItem * newItem = 
        [[UIBarButtonItem alloc] initWithTitle:@"Test" style:UIBarButtonItemStyleBordered target:self.savedBarButtonItem.target action:self.savedBarButtonItem.action];
    [newView addBarButtonItem:newItem];

} 
```

以及我在详细视图控制器中添加和删除 UIBarButtonItems 的方式：

```
-(void)addBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    NSArray * items = self.toolbar.items;
    NSMutableArray * newArr = [NSMutableArray arrayWithCapacity:[items count]+1];
    [newArr addObject:barButtonItem];
    for(NSObject * o in items)
        [newArr addObject:o];
    [self.toolbar setItems:newArr animated:YES];
}

-(void)removeBarButtonItem
{
    NSArray * items = self.toolbar.items;
    NSMutableArray * newArr = [NSMutableArray arrayWithCapacity:[items count]-1];
    for(NSInteger i=1; i<[items count]; i++)
        [newArr addObject:[items objectAtIndex:i]];
    [self.toolbar setItems:newArr animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:17:20.553

我怀疑这个问题是由于在 remove 方法中使用了动画。工具栏最有可能保留对旧时代数组的引用，同时将它们动画化到视图之外。所以我建议你尝试在删除中将动画：更改为 NO，看看是否可以解决它。也许两者都试一下。如果它起作用，那么这个理论是正确的。

您从未提到此项目是否使用 customView，这可能会更有问题。

# java - 按钮仅在触摸后更改颜色

> ID：11600110
> 
> 赞同：1
> 
> 时间：2012-07-22T12:00:55.363
> 
> 标签：java, android, button

我用

```
 buttonled1.getBackground().setColorFilter(0xFF00FF00, PorterDuff.Mode.MULTIPLY); 
```

在更改按钮颜色的函数中。当我第一次在 onCreate() 方法中调用该函数时，它工作得很好，并且按钮是用我想要的颜色创建的。

但是，当我在活动中调用再次更改按钮颜色的相同功能时，我必须触摸按钮才能看到颜色变化。当我想要它时会发生某种颜色变化，但要让它可见，我必须触摸按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:09:43.923

设置颜色过滤器后应该调用`buttonled1.invalidate()`。

# css - 为什么溢出属性会影响元素大小和流量？

> ID：11600111
> 
> 赞同：1
> 
> 时间：2012-07-22T12:01:06.300
> 
> 标签：css

我偶然发现了一些让我感到困惑的 CSS 行为。假设有两个块元素，第一个浮动到右侧（[jsfiddle](http://jsfiddle.net/g7Zsk/)）： ![在此处输入图像描述](../Images/6ad3db00ce48b2519cc31468a19aaad5.png)

如果在非浮动元素上将溢出属性设置为隐藏，则该元素会缩小以适应浮动元素宽度[jsfiddle](http://jsfiddle.net/g7Zsk/1/)： ![在此处输入图像描述](../Images/c479451fa560c3c5f5baf0ab15e34897.png)

我实际上对此没有问题，但我想知道为什么会这样。我遇到的问题是以下情况，在溢出设置为隐藏之后，`width`非浮动元素的设置为`100%`. 我在 Win7 上的 IE9、Firefox 14、Opera 12、Chrome 20 和 Safari 5 以及除 Firefox show ( [jsfiddle](http://jsfiddle.net/g7Zsk/2/) ) 之外的所有这些中进行了测试： ![在此处输入图像描述](../Images/d82527f16ee951df2e4d6e0fbefe0420.png)

我想要和期望的，以及 Firefox 显示的，与上面的第一张图片相同。那么，任何人都可以解释为什么会发生这一切吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:20:02.227

根据定义“如果容器元素本身包含在其他东西中，则浮动 div 将位于容器的右边距。”

案例 1：`.container`覆盖可用的总空间。除了（这里的.content 不是矩形）之外，`.content`它占据了所有空间，这就是浮动。`.float`它实际上溢出以覆盖空间。它的默认行为。

案例2：现在你告诉`.content`隐藏溢出。所以它隐藏了它之前作为默认行为所做的溢出。

案例3：您告诉`.content`获取父级的全部宽度，即`.container`，因此它忽略了溢出：隐藏并且只是扩展以填充空间。

如果您想知道溢出的奇怪行为：隐藏，请查看这篇**[文章](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)**

# decimal - 该算法是否适合检查终止小数？

> ID：11600114
> 
> 赞同：0
> 
> 时间：2012-07-22T12:01:39.040
> 
> 标签：decimal

```
int is_ter(int x)
{
    //it is not a TWOs nor a FIVEs and not 1.0
g:  
    if(x%2 !=0 && x%5 !=0 && x!=1 )
        return 0;
    // make sure it is 1.0
    if(x%2 !=0 && x%5 !=0 && x==1 )
        return 1;
    //check if it is a two
    if(x%2==0){
         x/=2;
         goto g;
    }
    if(x%5==0)
    {
        x/=5;
        goto g;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T12:19:37.707

从外观上看，您想检查 1/x 是否正在终止。

您的代码看起来有些混乱。您需要检查所有素因子是 2 还是 5：

```
int is_ter(unsigned int x)
{
    while (x>1)
    {
       if (x%2==0) x=x/2;
       else if (x%5==0) x=x/5;
       else return 0;
    }
    return 1;
} 
```

应该做的伎俩（好吧，它说 1/0 正在终止，不管这意味着什么。它将终止程序，所以它并不完全错误......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:12:31.577

一点都不。

首先，你的小数是一个整数。其次，您可能应该乘法而不是除法。第三，在使用小数时，总是会出现舍入错误，因此在将小数与某物进行比较时需要考虑到这一点。

最重要的是，存储在计算机上的*所有*小数都是“终止”的，因为在计算机中，小数并不比有理数 M/N 多多少，而 N 是 2 的幂。

您应该阅读一些关于[浮点数的](http://en.wikipedia.org/wiki/Floating_point)内容。

# css - 当您在 Firefox 中放大或缩小时，页面不会保持不变

> ID：11600118
> 
> 赞同：-1
> 
> 时间：2012-07-22T12:01:53.490
> 
> 标签：css

单击[http://www.christopherandbanks.com/home/index.jsp](http://www.christopherandbanks.com/home/index.jsp)，当您放大或缩小 Firefox 时，购物袋就会消失。您可以使用 firebug 获得帮助。这只是一个 CSS 相关问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:35:21.637

在包含购物车和其他链接的 div 上，添加`white-space:nowrap;`

# heroku - Heroku：在您的应用程序中分配域的正确方法

> ID：11600119
> 
> 赞同：1
> 
> 时间：2012-07-22T12:01:57.330
> 
> 标签：heroku, dns

这是我第一次在项目上使用 heroku，我必须为应用程序分配一个域，以便应用程序可以从我拥有的域而不是 heroku 子域正常运行。是否有任何名称服务器（dns 地址）我可以提供给我的域并获取分配者，或者它仅适用于域映射？谢谢你。

# mysql - MySQL Select 语句在一列上没有返回匹配项

> ID：11600120
> 
> 赞同：0
> 
> 时间：2012-07-22T12:01:59.263
> 
> 标签：mysql, select

我有一个非常基本的数据库，我需要为其返回某些结果。

我正在搜索的表被调用`Judge`，它包含以下列：

```
Judge_id, Name, Suburb 
```

在我的选择声明中，我需要返回居住在阿德莱德和悉尼的每个人的结果。

所以我使用：

```
SELECT *
FROM judge
WHERE Suburb LIKE ('Adelaide' 'Sydney'); 
```

但这不会返回任何结果。也试过：

```
SELECT *
FROM judge
WHERE Suburb = 'Adelaide' 'Sydney' 
```

仍然没有结果。

但是，如果我只搜索阿德莱德：

```
SELECT *
FROM judge
WHERE Suburb = 'Adelaide' 
```

我得到一个结果。但是有多个匹配项，并且在表的最后一个中返回的结果（如果这与它有任何关系）。

如果我做：

```
SELECT *
FROM judge
WHERE Suburb LIKE '%Adelaide%' 
```

我得到了两场比赛。但是，如果我将 % 符号排除在外，我只会再次获得一场比赛。

如果我搜索表中人员的任何“姓名”，我可以为他们中的任何一个找到匹配项。那么为什么我很难找到 Suburb 的匹配项呢？谢谢你的帮助

编辑：

表看起来像：

```
CREATE TABLE JUDGE (
   Judge_id    INT     NOT NULL,
   Name        VARCHAR(25),
   Address     VARCHAR(25),
   PRIMARY KEY (Judge_id)
); 
```

和数据：

```
1  Smith      Melbourne
2  Green      Cootamundra
3  Gates      Dunkeld
4  Smith      Sydney
5  Russell    Adlaide
6  Schofield  Adelaide 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:05:11.867

尝试这个 ：

```
SELECT * FROM judge WHERE Suburb in ('Adelaide' , 'Sydney'); 
```

您还可以提及更多用逗号分隔的郊区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:07:52.597

我同意 Ravi 的建议 - 但如果您真的想使用“LIKE”，请使用：

```
SELECT * FROM judge WHERE Suburb LIKE 'Adelade%' or Suburb LIKE 'Sydney%'; 
```

仅当该字段数据有后缀时才有用。

# java - RESTEasy 客户端：取消部署失败

> ID：11600121
> 
> 赞同：0
> 
> 时间：2012-07-22T12:02:04.973
> 
> 标签：java, resteasy

我有两个两个 WAR 在不同的服务器上运行（也可能在不同的机器上）。其中之一 (JVM1) 使用 RESTEasy 托管 RESTful 服务。另一个（JVM2）使用 RESTEasy 客户端使用服务。

问题是 JAR 文件 resteasy-jackson-provider-2.3.2.Final.jar 和 resteasy-jaxrs-2.3.2.Final.jar 在 JVM2 中取消部署期间被服务器进程锁定。结果取消部署任务失败。

我认为 RESTEasy 将自己注册到某个类加载器。有没有办法解决这个问题？（即使有反射我也很好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:40:45.620

我可以解决这个问题（调试源代码）。这是 jax-rs 注册提供程序的方式的问题。禁用自动注册并手动注册提供程序就可以了。

# android - 在 AndroidTestCase 中使用 @Ignore

> ID：11600127
> 
> 赞同：21
> 
> 时间：2012-07-22T12:02:30.560
> 
> 标签：android, unit-testing, annotations

我正在使用 AndroidTestCase 进行一些单元测试，并且想知道是否可以使用我为 junit4 读过的忽略注释？仅使用注释就会出错，也许，有什么特别需要注意的？

提前谢谢，马库斯

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-22T12:10:24.640

您可以`@Suppress`在测试用例类或单个测试方法上使用来抑制测试执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-06T06:25:45.187

您现在可以使用其中一个`@Suppress`或`@Ignore`在运行时使用`AndroidJUnit4`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T12:10:05.883

Android 附带 JUnit3 - 忽略注释是 JUnit4 的一部分。在 GitHub 上查看[这个](https://github.com/dthommes/JUnit4Android/wiki)项目，它可能对你有用。

# c++ - 使用 libcurl 发布数据

> ID：11600130
> 
> 赞同：8
> 
> 时间：2012-07-22T12:02:48.860
> 
> 标签：c++, libcurl

我有 libcurl 的问题。我写了一个简单的程序，它应该发布数据（填写表格）但程序不工作。我的表格：

```
...
<div><label for="id_person_name">Your name</label> <input type="text" id="id_person_name" name="name" /></div>
            <div></div>

            <div class="clear"></div>
            <div><label for="id_comment">Comment</label><textarea name="comment" id="id_comment" rows="10" cols="60" class="txt"></textarea></div>
... 
```

程序：

```
#include <curl/curl.h>
#include <iostream>

using namespace std;

int main(){

CURL *curl;
CURLcode res;

curl = curl_easy_init();

if(curl) {
   curl_easy_setopt(curl, CURLOPT_URL, "http://examplesite.com");
   curl_easy_setopt(curl, CURLOPT_POST, 1);
   curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "name=Bjarne&comment=example");
res = curl_easy_perform(curl);
curl_easy_cleanup(curl);

cout << endl;
}
return 0;
} 
```

当然我测试了这段代码：[http](http://curl.haxx.se/libcurl/c/postit2.html) ://curl.haxx.se/libcurl/c/postit2.html但它不工作。

谁能帮我 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T12:28:25.683

例如，您需要设置`CURLOPT_URL`地址的哪些点，如此[处](http://curl.haxx.se/libcurl/c/http-post.html)`<form>`所示。

上面链接中的代码是：

```
/***************************************************************************
 *                                  _   _ ____  _
 *  Project                     ___| | | |  _ \| |
 *                             / __| | | | |_) | |
 *                            | (__| |_| |  _ <| |___
 *                             \___|\___/|_| \_\_____|
 *
 * Copyright (C) 1998 - 2015, Daniel Stenberg, <daniel@haxx.se>, et al.
 *
 * This software is licensed as described in the file COPYING, which
 * you should have received as part of this distribution. The terms
 * are also available at https://curl.haxx.se/docs/copyright.html.
 *
 * You may opt to use, copy, modify, merge, publish, distribute and/or sell
 * copies of the Software, and permit persons to whom the Software is
 * furnished to do so, under the terms of the COPYING file.
 *
 * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
 * KIND, either express or implied.
 *
 ***************************************************************************/ 
/* <DESC>
 * simple HTTP POST using the easy interface
 * </DESC>
 */ 
#include <stdio.h>
#include <curl/curl.h>

int main(void)
{
  CURL *curl;
  CURLcode res;

  /* In windows, this will init the winsock stuff */ 
  curl_global_init(CURL_GLOBAL_ALL);

  /* get a curl handle */ 
  curl = curl_easy_init();
  if(curl) {
    /* First set the URL that is about to receive our POST. This URL can
       just as well be a https:// URL if that is what should receive the
       data. */ 
    curl_easy_setopt(curl, CURLOPT_URL, "http://postit.example.com/moo.cgi");
    /* Now specify the POST data */ 
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "name=daniel&project=curl");

    /* Perform the request, res will get the return code */ 
    res = curl_easy_perform(curl);
    /* Check for errors */ 
    if(res != CURLE_OK)
      fprintf(stderr, "curl_easy_perform() failed: %s\n",
              curl_easy_strerror(res));

    /* always cleanup */ 
    curl_easy_cleanup(curl);
  }
  curl_global_cleanup();
  return 0;
} 
```

# c - c中的逻辑AND和OR

> ID：11600132
> 
> 赞同：5
> 
> 时间：2012-07-22T12:03:06.997
> 
> 标签：c

在 a && b 中，如果 a 和 b 都等于 1，则返回 true。如果 a=-1 且 b=-1，则表达式也返回 true。a||b 的情况类似，其中 a=-1 b = 0，它返回true。谁能解释一下原因。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-22T12:04:26.313

`a && b`当和**都** **为非零时** 返回 1 ，而不仅仅是当它们等于 1 时。否则返回 0。`a``b`

 **`a || b`当or中**的至少一个** **为非零时**返回 1 ，而不仅仅是当其中一个等于 1 时返回 1。否则返回 0。`a``b`

 **举一些例子：

```
 0 &&  0 -> 0
   1 &&  0 -> 0
   1 &&  1 -> 1
   2 &&  1 -> 1
  -1 && -1 -> 1
-100 &&  0 -> 0

   0 ||  0 -> 0
   1 ||  0 -> 1
   0 ||  1 -> 1
  -1 ||  0 -> 1
-100 || 20 -> 1 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-22T12:08:41.840

*C11 (n1570) §6.5.13 al 3 p 99*说：

> 如果两个操作数比较不等于 0，则 && 运算符将产生 1；否则，它产生 0。

-1 是一个非零值，因此`-1 && -1`也是`1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T12:05:45.003

在[&& 的 MSDN 页面上](http://msdn.microsoft.com/en-us/library/z68fx2f1%28v=vs.80%29.aspx)：

> 如果两个操作数都具有非零值，则逻辑与运算符产生值 1。

显然，在您的示例中，两个操作数都是 -1，因此它们将产生 1。

在同一页面上，列出了`||`

> 如果任一操作数具有非零值，则结果为 1。

在您的情况下，一个操作数是 -1，因此结果是 1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T12:07:25.097

如果两个操作数都具有非零值，则 AND 返回 1。如果任一操作数具有非零值，OR 返回 1。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-30T17:37:14.773

和运算符 ie (&&) 仅在两个条件都为真时才会继续，而在 or 运算符 ie(||) 的情况下，如果两个条件中的至少一个为真，则将继续..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-22T21:05:34.883

逻辑运算符返回 0 或 1。如果 && 运算符的两个操作数都不为 0，则返回 1。否则，它返回 0。如果参数不为 0，则执行 if(x)、while(x) 等语句。对于所有其他 +ve 和 -ve 参数，它都会被执行。****

# c# - 查询网站并从中检索公共数据

> ID：11600133
> 
> 赞同：0
> 
> 时间：2012-07-22T12:03:23.210
> 
> 标签：c#, regex, webclient

我是 C# 编程的新手。我想从你们那里得到一些帮助（如果可能的话）。我有一个网站（它是一个购物网站），其中包含以下数据：产品、价格、描述……等。我想做的是：由于该网站具有搜索功能，因此我想通过查询搜索链接从中获取数据，并且仅获取重要数据（产品ID，名称，价格和描述）。当我执行搜索时，我会得到很多页面，每次按下一步我都会得到带有额外产品列表的新页面。我怎样才能简单地使这些任务自动化？

我在互联网上进行了很多搜索，发现我需要使用`webclient()`正则表达式，并且我认为可能需要对页面内容和搜索结果页面进行循环。你们觉得怎么样？

**[网站示例。](http://cdon.se/hemelektronik/advanced-search?manufacturer-id=&title=.&title-matchtype=1&genre-id=&page-size=15&sort-order=142)**

我会感谢你的任何努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:09:35.587

您所描述的称为刮擦。

您需要的是使用 HtmlAgilityPack 之类的东西来获取网站。然后，您可以通过使用 DOM 并阅读它们的内部文本来找到您感兴趣的节点。

整个过程相当复杂，但至少我已经把你送到了正确的方向。在大多数情况下，搜索网址往往具有相同的格式。

例如在您的链接中

[http://cdon.se/hemelektronik/advanced-search?manufacturer-id=&title=.&title-matchtype=1&genre-id=&page-size=15&sort-order=142&page=2](http://cdon.se/hemelektronik/advanced-search?manufacturer-id=&title=.&title-matchtype=1&genre-id=&page-size=15&sort-order=142&page=2)

您可以将“页面”更改为其他内容，并且可以通过这种方式浏览所有页面。

补充：也不要尝试使用正则表达式来解析 html。它让一个特定的人发疯......

[RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

# java - SimpleDateFormat 解析函数改变格式

> ID：11600138
> 
> 赞同：0
> 
> 时间：2012-07-22T12:03:52.313
> 
> 标签：java, parsing, simpledateformat

我有一个包含多个日期的字符串：

[2012 年 7 月 20 日下午 5:11:36,670 UTC，2012 年 7 月 20 日下午 5:11:36,683 UTC]

```
ParsePosition parsePos = new ParsePosition(1);
SimpleDateFormat format2 = new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss,SSS z a");
System.out.println(format2.parse(entry.getValue().toString(), parsePos)) ; 
```

输出 ：`Fri Jul 20 06:11:36 BST 2012`

我需要输出为`20-Jul-2012 5:11:36,670 UTC PM`.

我是否需要在 LOCALE 中设置`SimpleDateFormat`没有不同的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:19:04.740

您需要设置时区，但更重要的是，您只需要实际使用格式来格式化日期：

```
Date date = format2.parse(...);
String formattedDate = format2.format(date);
System.out.println(formattedDate); 
```

您的代码的作用是：

```
Date date = format2.parse(...);
System.out.println(date.toString()); 
```

我真的不明白将字符串解析为日期，然后使用完全相同的格式显示日期的意义（除了验证字符串确实是有效日期，但你可以简单地重用原始字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:23:56.070

你有两个小问题：

1.  使用`hh`一小时，而不是`HH`。`H`是“一天中的小时 (0-23)，因此无法与`a`AM/PM 标记一起正常工作。您的两个示例日期字符串将解析为 AM，而不是 PM。
2.  您正在使用 SimpleDateFormat 解析字符串，但不对其进行格式化。使用`format2.format(format2.parse(entry.getValue().toString())`.

这是一个完整的例子：

```
SimpleDateFormat format = new SimpleDateFormat("dd-MMM-yyyy hh:mm:ss,SSS z a");
String input = "20-Jul-2012 5:11:36,670 UTC PM";
Date date = format.parse(input);
String output = format.format(date);
System.out.println(output); 
```

结果：

```
20-Jul-2012 05:11:36,670 UTC PM 
```

# agile - 使用遗留代码时，什么是好的“完成定义”

> ID：11600143
> 
> 赞同：0
> 
> 时间：2012-07-22T12:04:32.737
> 
> 标签：agile, scrum, qa

我们处理 20 多年前的代码，团队正在采用敏捷实践。在冲刺中完成是一项挑战。你用什么作为衡量标准？你采取了哪些途径到达现在的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:54:55.330

如果您在 sprint 中无法完成故事，则可能是发生了一些事情之一。

*   你的冲刺太短了
*   你的故事太大了。
*   团队分布在太多的故事中

如果您的 sprint 只有 1 周，我肯定会考虑将其延长至 2 周。
寻找将故事拆分成仍然向用户提供功能的更小部分的方法。
如果您发现每个开发人员同时打开了 2 个以上的故事，请尝试尽一切可能完成这些第一个故事，然后再开始新的故事 - 即使感觉效率较低。让您的开发人员分散得太细是有一定成本的。

就处理 20 多年前的代码而言，您能描述一下这带来的任何具体挑战吗？团队是否对代码库不熟悉，是否没有自动化测试等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:42:22.650

究竟是什么要求？您是否正在修复遗留代码的错误？您是否添加了更多功能？你在迁移代码吗？

# html - Spine.js - 显示“加载”消息

> ID：11600144
> 
> 赞同：1
> 
> 时间：2012-07-22T12:04:50.433
> 
> 标签：html, spine.js

目标：在 Ajax 验证调用返回之前阻止 UI。带有一些对话或消息。

问题：以 Spine/MVC 方式，我应该如何附加并删除当前视图顶部的 HTML 内容？

半生不熟的解决方案：在 Controller-> 绑定模型 ajaxSuccess 函数以删除消息 HTML，并在保存模型对象时附加“正在加载”消息。

有任何想法吗，？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:41:23.773

快速回答：你应该尽量避免它。这对用户来说很烦人，并且违背了 spin.js 的核心理念。

[http://spinejs.com/docs/introduction](http://spinejs.com/docs/introduction)：

> 核心价值：
> 
> [...]
> 
> 异步接口——太多的 JavaScript 应用程序和框架没有充分利用客户端渲染的力量。最终用户不关心对服务器的后台请求是否处于挂起状态，并且不希望看到加载消息和微调器。用户想要畅通无阻的界面和即时交互。为了实现这一点，Spine 在客户端存储和呈现所有内容，与服务器异步通信。

我了解有时无法避免阻塞。在这些情况下，我会遵循这种模式：

在控制器中：

1.  添加阻塞覆盖html
2.  调用异步但需要阻塞的模型方法
3.  等待模型发出一个表明动作完成的事件，例如。`validationDone`

在模型中：

1.  像往常一样写异步方法
2.  在成功和错误处理程序中，发出`validationDone`事件

# wpf - 使用 Windows 7 触摸框架模拟 wpf 中的点击

> ID：11600146
> 
> 赞同：0
> 
> 时间：2012-07-22T12:05:31.207
> 
> 标签：wpf

按钮在点击方面是如何工作的？

我想模拟对控件的点击。为此，我不能只处理“TouchUp”事件，因为我想确保用户点击该位置并且不只是移动他的手指并将其释放到我的控件上。

好场景：点击我的控制

糟糕的场景：触摸我无法控制的地方，触摸我的控制时移动，释放触摸 - >这将导致触摸但我不想处理这种情况。

伊兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:08:00.710

谢谢你的回复。我找到了答案。

如果您明确强制捕获到特定元素（即 elementA），则以下所有事件将被路由到该元素。

```
 private void elementA_TouchDown(object sender, TouchEventArgs e)
 {
    elementA.CaptureTouch(e.TouchDevice);
 } 
```

如果您不强制捕获特定元素，那么当您释放触摸时，触摸事件将在您位于其边界上的最后一个元素上触发。

# mysql - MySQL按日期排序奇怪的问题

> ID：11600147
> 
> 赞同：0
> 
> 时间：2012-07-22T12:05:32.583
> 
> 标签：mysql, sql-server

我一直在更新现有网站。在那有一个条目表格，它将保存在表格中...表格结构和示例数据如下

```
id  |  name       | type    |  in_date     |  year   
-----------------------------------------------------
1   |  name1      | 1       |  2-July      |  2011
2   |  name2      | 2       |  2-June      |  2011
3   |  name44     | 2       |  8-Sep       |  2011 
```

现在我需要以整个日期的方式订购此表，即（作为 2011 年 6 月 2 日）作为一个简单的查询

```
SELECT * FROM order_list order by date DESC 
```

有什么办法可以做这个动作吗？我尝试了很多查询.. 任何方式来组合这 2 行..

我们无法更改数据库，因为它包含更多现有记录..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T12:13:37.923

您应该将日期存储为 MySQL[`DATE`](http://dev.mysql.com/doc/en/datetime.html)类型，而不是字符串：

```
ALTER TABLE order_list ADD COLUMN new_date DATE;

UPDATE order_list
SET new_date = STR_TO_DATE(CONCAT(in_date, '-', year), '%e-%b-%Y');

ALTER TABLE order_list DROP COLUMN in_date, DROP COLUMN year; 
```

然后订购变得微不足道（即将完全按照您的尝试工作）：

```
SELECT * FROM order_list ORDER BY date DESC; 
```

如果您无法更改数据库架构，则可以[`STR_TO_DATE`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)在子句中执行操作`ORDER BY`（但这不是很有效）：

```
SELECT   *
FROM     order_list
ORDER BY STR_TO_DATE(CONCAT(in_date, '-', year), '%e-%b-%Y') DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:14:40.680

您可以尝试使用`+`(SQL SERVER) 或`CONCAT`(MySQL)

```
SELECT * FROM order_list order by in_date + year DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T12:08:45.870

不要那样做。将整个日期放在一列中，然后，如果您真的需要，创建将保存年或日/月的计算列。

您可以创建一个简单的脚本，将这两个现有列集成到现有数据库中的一个统一日期列中。

# javascript - 如何将文本输出到不是具有不同颜色的输入文本的表格单元格？

> ID：11600152
> 
> 赞同：0
> 
> 时间：2012-07-22T12:07:08.803
> 
> 标签：javascript, text

我正在用 Javascript 做一个简单的计算程序。我使用这些脚本作为榜样，一切正常：http: [//www.jsmadeeasy.com/javascripts/calculators/list_test.asp](http://www.jsmadeeasy.com/javascripts/calculators/list_test.asp)

我使用 Wind Chill Calc 作为模型和示例。文本结果放置在 HTML 样式的输入框中。我想在表格的单元格中显示文本结果，而不是在输入文本框中。这是如何在 Javascript 中完成的？

第二部分是我想以两种不同的颜色显示文本结果。红色表示负数，绿色表示零及以上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:13:50.780

**第一个**问题 - 而不是这个

```
form.windchill.value = chill; 
```

做这个

```
document.getElementById("your_table_cell_id").innerHTML = chill; 
```

**第二个**问题 - 将此添加到您的 JS

```
var clr = ( chill <= 0 ) ? "red" : "green";
document.getElementById("your_table_cell_id").style.color = clr; 
```

# java - 用空格和逗号扫描一行

> ID：11600156
> 
> 赞同：0
> 
> 时间：2012-07-22T12:07:44.467
> 
> 标签：java, java.util.scanner

我是 Java 新手，正在寻找有关 Java 的 Scanner 类的帮助。下面是问题。我有一个包含多行的文本文件，每行有多对数字。这样每对数字都表示为（数字，数字）。例如 3,3 6,4 7,9。所有这些多对数字都由空格隔开。以下是来自文本文件的示例。

1 2,3 3,2 4,5

2 1,3 4,2 6,13

3 1,2 4,2 5,5

我想要的是我可以分别检索每个数字。这样我就可以创建一个链表数组了。以下是我到目前为止所取得的成就。

```
Scanner sc = new Scanner(new File("a.txt"));
    Scanner lineSc;
    String line;
    Integer vertix = 0;
    Integer length = 0;
    sc.useDelimiter("\\n"); // For line feeds

    while (sc.hasNextLine()) {
        line = sc.nextLine();
        lineSc = new Scanner(line);

        lineSc.useDelimiter("\\s"); // For Whitespace
        // What should i do here. How should i scan through considering the whitespace and comma
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:16:37.920

考虑使用正则表达式，不符合您期望的数据将被轻松识别和处理。

```
CharSequence inputStr = "2 1,3 4,2 6,13";    
String patternStr = "(\\d)\\s+(\\d),";    
// Compile and use regular expression
Pattern pattern = Pattern.compile(patternStr);
Matcher matcher = pattern.matcher(inputStr);

while (matcher.find()) {
    // Get all groups for this match
    for (int i=0; i<=matcher.groupCount(); i++) {
        String groupStr = matcher.group(i);
    }
} 
```

第一组和第二组将分别对应每对中的第一个和第二个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:18:42.540

**1.**使用`nextLine()`扫描仪的方法从文件中获取**每一整行文本**。

**2.**然后使用`BreakIterator`class的静态方法`getCharacterInstance()`，获取单个字符，**它会自动处理逗号、空格等。**

**3.** `BreakIterator`还给你许多灵活的方法来分离句子、单词等。

有关更多详细信息，请参见：

[http://docs.oracle.com/javase/6/docs/api/java/text/BreakIterator.html](http://docs.oracle.com/javase/6/docs/api/java/text/BreakIterator.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:15:26.757

使用 StringTokenizer 类。[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)

```
//this is in the while loop
//read each line
String line=sc.nextLine();

//create StringTokenizer, parsing with space and comma
StringTokenizer st1 = new StringTokenizer(line," ,"); 
```

然后，当您像这样调用 nextToken() 时，每个数字都被读取为字符串，如果您想要该行中的所有数字

```
while(st1.hasMoreTokens())
{
    String temp=st1.nextToken();

    //now if you want it as an integer
    int digit=Integer.parseInt(temp);

    //now you have the digit! insert it into the linkedlist or wherever you want
} 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T06:36:45.520

使用 split(regex)，更简单：

```
 while (sc.hasNextLine()) {
      final String[] line = sc.nextLine().split(" |,");
      // What should i do here. How should i scan through considering the whitespace and comma
      for(int num : line) { 
            // Do your job
      }        
 } 
```

# c# - Bin/Debug 和 Bin/Release 的区别

> ID：11600162
> 
> 赞同：2
> 
> 时间：2012-07-22T12:08:22.230
> 
> 标签：c#, sql-server-ce, visual-studio-express

我在 ac# winform 项目中使用了一个 sql-server 紧凑型数据库。

如果我查看构成解决方案的文件，我可以在以下两个文件夹中看到 exe 和 sdf 文件的副本：

1.  `/bin/Debug/`
2.  `/bin/Release/`

如果我双击并在 1\. 中执行 exe，则它会更新 1\. 中的 sdf，同样适用于 2 中的 exe/sdf。

当我打开 VS 时，我假设我正在玩 1 中的文件。？

2\. 中的文件何时被覆盖？

当我使用 Click-Once 安装发布项目时，哪些文件用于创建`.application`文件？

**添加**

上面的通用帖子并没有解决我的问题，但它进一步使事情变得有些混乱。这是我希望上述答案能够解决的*具体情况：*

开发解决方案文件夹保存在 USB 笔式驱动器上。此解决方案包括一个数据库文件。我已发布到我的家用 PC 我已发布到我的工作 PC。我很高兴随身携带笔式驱动器并插入任何一台 PC。如何设置以便在更新数据库时只存在一个版本的数据？

我已将解决方案更改为专家设置并公开了配置管理器 - 这有帮助吗？：

![在此处输入图像描述](../Images/5fac10f15b2432bfc1b1323fde1c7c77.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:15:11.803

[Visual Studio 中的调试和发布有什么区别？](https://stackoverflow.com/questions/367884/debug-release-difference) [http://msdn.microsoft.com/en-us/library/kkz9kefa(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/kkz9kefa(v=vs.110).aspx)

这是项目的两种不同配置。

这些都内置在不同的文件夹中

clikc once 文件可能基于当前的 ACTIVE CONFIGURATION

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T12:11:38.547

这取决于项目的配置，如果您处于调试模式，则使用调试模式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T14:21:59.093

要查看您的活动配置：

单击“构建”选项卡，然后单击“配置管理器”。

如果您最近安装了全新的 VS Express，您也可以这样做：

1.  工具⇒设置⇒专家设置。
2.  工具⇒选项⇒检查左下角的“显示所有设置”。
3.  工具⇒选项⇒项目和解决方案⇒常规⇒“显示高级构建配置”。

# javascript - 如何在 .wrap() 中使用变量

> ID：11600164
> 
> 赞同：2
> 
> 时间：2012-07-22T12:08:27.840
> 
> 标签：javascript, jquery

这可能听起来很傻，但我无法在这段代码中打印变量 -

```
var clsuffix = "something";
$("#box").wrap('<div class="boxy" />'); 
```

我想在 class=" *here " 中打印***clsuffix**变量，所以它可能像

 *```
<div class="boxysomething"> 
```

但是当我在 class="" 中使用变量时，它会按原样出现（不被视为变量）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:09:57.620

只需将其连接起来。最终，您的目标是构建一个由文字`"boxy"`和变量内容组成的字符串`clsuffix`。这是`"boxy" + clsuffix`在 JavaScript 中完成的：

```
$("#box").wrap('<div class="boxy' + clsuffix + '" />'); 
```

如果您只是尝试将变量插入字符串（例如您可能在 PHP 双引号字符串中执行的操作），则 JavaScript 不会解释它：

```
// Doesn't work in JavaScript:
$("#box").wrap('<div class="boxyclsuffix" />'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T12:13:48.813

我建议：

```
$('#box').wrap('<div />', {'class' : 'boxy' + cslsuffix}); 
```

它有效地创建了`div`元素，并使用映射为定义的属性分配值。*

# javascript - 无法通过 id 获取元素

> ID：11600165
> 
> 赞同：-6
> 
> 时间：2012-07-22T12:08:34.237
> 
> 标签：javascript, dom, getelementbyid

我有以下代码，但我不明白出了什么问题。

```
<tr id="outState">
    <th>State</th>
    <td style="text-align: center;" id="stateRow_0" xmlns="">
        <select id="state_0">
            <option value="0">0</option>
            <option value="1">1</option>
        </select>
    </td>
</tr> 
```

输出：

```
alert(document.getElementById("outState"));
alert(document.getElementById("stateRow_0 "));
alert(document.getElementById("state_0")); 
```

第一个给我null，第二个成功。
在 IE9 上，我获得了第一次成功和第二次 null。

加载完所有 DOM 后调用 JS。

为什么以及如何解决这个问题？

[JSFiddle](http://jsfiddle.net/RandallFlagg/NUCYH/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:16:51.450

问题是第二个警报最后有一个额外的空间，导致`getElementById`失败..

```
alert(document.getElementById("stateRow_0 "));
                                         ^ 
```

如果你删除它，它会工作得很好..

# ruby - 红宝石需要不工作

> ID：11600170
> 
> 赞同：1
> 
> 时间：2012-07-22T12:09:11.717
> 
> 标签：ruby, require, ruby-1.9

我是 ruby​​ 新手，但我正在开发我的第一个 ruby​​ 程序。它目前有两个文件，一个是函数库（`xgync.rb`存储在）另一个是存储在“bin”中`lib`的可执行文件。`xgync`（项目在此处可见[https://bitbucket.org/jeffreycwitt/xgync/src](https://bitbucket.org/jeffreycwitt/xgync/src)）我还创建了一个符号链接，`/usr/local/bin/xgync`以便我可以`{arguments}`从终端的任何位置编写命令 xgync。

问题似乎`bin/xgync`取决于图书馆`lib/xgync.rb`。我写了这个依赖`bin/xgync`如下：

```
$:.unshift(File.dirname(__FILE__) + '/../lib')
require "xgync" 
```

但是，我不断收到以下错误：

```
/Users/JCWitt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- xgync (LoadError)
from /Users/JCWitt/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /usr/local/bin/xgync:4:in `<main>' 
```

你能看出我写的有什么问题吗？符号链接会以某种方式把事情搞砸吗？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T12:24:08.620

使用*ruby​​ 1.9.x*时，您通常不会`$:.unshift`在项目中需要其他文件时更改路径。

相反，最好的做法是`require_relative`改用。

```
require_relative '../lib/xgync.rb' 
```

`require_relative`需要相对于您当前正在编辑的文件的文件。

但是出现了您遇到的错误，因为您需要一个不存在的文件：

*   **bin/xgync**
*   **库/xgync.rb**

根据您的问题，这些是您项目中的文件，代码摘录来自**bin/xgync**您扩展了路径以在**lib/**中查找文件，但您尝试查找`require 'xgync'`哪个文件，该文件不存在于**lib/**中，所以如果你想使用这种方法（而不是`require_relative`你必须使用`require 'xgync.rb'`.

# android - 即使我能够进入呼叫记录，我的编辑文本在按下时也没有显示呼叫记录号码

> ID：11600171
> 
> 赞同：-1
> 
> 时间：2012-07-22T12:09:19.453
> 
> 标签：android, android-intent, android-edittext, contacts, calllog

经过一些研究和编码，我能够进入我的通话记录。在我添加了更多代码以便能够从 callLog 检索数字到我的 edittext 之后，似乎有错误。我已经对此进行了谷歌搜索，但到目前为止无济于事。有什么建议吗？-西蒙-

```
import java.sql.Date;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.CallLog;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class SimonCallLogActivity extends Activity {
/** Called when the activity is first created. */
EditText display;
Button log;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //to go to Call Log//        
    log=(Button)findViewById(R.id.button1);        
    log.setOnClickListener(new Button.OnClickListener(){

        public void onClick(View v) {               
            Intent myIntent=new Intent();
            myIntent.setAction(Intent.ACTION_CALL_BUTTON);
            startActivity(myIntent);
            }
        });
}
//Call Log//
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    final EditText number = (EditText) findViewById(R.id.editText1);
    Cursor cursor = null;
    String phoneNo = " ";
    List<String> logNumbers = new ArrayList<String>();

        String[] projection = new String[] {CallLog.Calls.NUMBER,     CallLog.Calls.DATE, CallLog.Calls.CACHED_NAME};
        Uri contacts =  CallLog.Calls.CONTENT_URI;

        Cursor managedCursor = managedQuery(contacts, projection, null, null,     CallLog.Calls.DATE + " ASC");
        getColumnData(managedCursor);
    }
private void getColumnData(Cursor cur){
    try{
       if (cur.moveToFirst()) {
         String name;
         String number;
         long date;
         int nameColumn = cur.getColumnIndex(CallLog.Calls.CACHED_NAME);
         int numberColumn = cur.getColumnIndex(CallLog.Calls.NUMBER);
         int dateColumn = cur.getColumnIndex(CallLog.Calls.DATE);

         System.out.println("Reading Call Details: ");
         do {
             name = cur.getString(nameColumn);
             number = cur.getString(numberColumn);
             date = cur.getLong(dateColumn);
             System.out.println(number + ":"+ new Date(date) +":"+name);
            // number.setText(numberColumn);

         } while (cur.moveToNext());
       }
   }    
   finally
   {
     cur.close();
   }

    final String [] items = logNumbers.toArray(new String[logNumbers.size()     ])  ;
    AlertDialog.Builder builder = new     AlertDialog.Builder(SimonCallLogActivity.this);
    builder.setTitle("Choose a number: ");
    builder.setItems(items, new DialogInterface.OnClickListener() {

public void onClick(DialogInterface dialog, int item) {
// TODO Auto-generated method stub
String selectedNumber = items[item].toString();
selectedNumber= selectedNumber.replace("-","");
selectedNumber= selectedNumber.replace("Home:", "");
selectedNumber= selectedNumber.replace("Mobile:", "");
selectedNumber= selectedNumber.replace("Work:", "");
selectedNumber= selectedNumber.replace("Other:",  "");
//selectedNumber = selectedNumber.replace("+","");                                                  

    number.setText(selectedNumber);                                                 
}
});
    AlertDialog alert = builder.create();
    if(logNumbers.size()>1){
    alert.show();

    }else{
    String selectedNumber= phoneNo.toString();
    selectedNumber=selectedNumber.replace("-", "");

        number.setText(selectedNumber);                                                 
    }
    if(phoneNo.length()==0){
    Log.d("SIMON", "No     contact");                                               
        }                                               
    }
    break;              
    }
}else
{
//gracefully handle failure
Log.w("SIMON","Warning activity not okay");
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:28:15.660

声明`logNumbers`并`number`成为您`SimonCallLogActivity`班级的成员。

```
public class SimonCallLogActivity extends Activity {

    /** Member variables */
    EditText display;
    Button log;

    List<String> logNumbers = new ArrayList<String>();
    EditText number;
    ...
    ...

} 
```

删除他们的本地声明..

# mysql - tynmce的mysql表结构

> ID：11600172
> 
> 赞同：0
> 
> 时间：2012-07-22T12:09:22.223
> 
> 标签：mysql, create-table, sql-types

我正在尝试在 mysql 中创建表，该表将使用 utf8 编码保存大量数据。

我读过 LONGBLOB 和 LONGTEXT 类型之间的区别在于**，**当**文本**存储有关字符的信息时，blob 存储有关视频、音乐和其他对象（关于二进制数据）的信息，但我无法创建将保存此类信息的表。

当我像这样创建表时：

```
CREATE TABLE b( id int(3) NOT NULL AUTO_INCREMENT PRIMARY KEY, b_title
VARCHAR(120) NOT NULL, b_data LONGTEXT); 
```

它不支持 utf8 编码，并且在尝试创建这样的表时：

```
CREATE TABLE b(
id int(3) NOT NULL AUTO_INCREMENT PRIMARY KEY,
b_title VARCHAR(120) NOT NULL,
b_data CHARSET utf8 LONGTEXT); 
```

它让我在mysql中出错。

请建议如何构建将存储大量数据的 mysql 表，我想要它，因为试图从**tynemce插入数据**

**PS。我想将通过 tynemce 的任何信息存储在 mysql 表中**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:17:51.803

如[手册](http://dev.mysql.com/doc/en/create-table.html)中所述，指定`LONGTEXT`数据类型列的正确语法是：

```
LONGTEXT [BINARY] [CHARACTER SET charset_name] [COLLATE collation_name] 
```

因此，尝试：

```
CREATE TABLE b (
  id int(3) NOT NULL AUTO_INCREMENT PRIMARY KEY,
  b_title VARCHAR(120) NOT NULL,
  b_data LONGTEXT CHARACTER SET utf8
); 
```

# git - gitignore - 允许创建文件夹但忽略里面的所有文件 - 我们可以用感叹号（！）吗？

> ID：11600188
> 
> 赞同：1
> 
> 时间：2012-07-22T12:11:04.773
> 
> 标签：git, gitignore

当我们将某个项目推送到某个地方时，我们也希望部署空的必要文件夹。例如：`/runtime/`文件夹。

但是，我们必须忽略里面的所有文件`/runtime/*`；

我知道“*在你的空目录中创建一个无用的文件*”解决方案，并且知道某种 bash 进程可以自动*添加无用的文件*，但是没有其他方法吗？

我是说：

是否可以通过在我们的 .gitignore 上添加类似的东西来实现这一点：

```
!/runtime/
/runtime/* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:23:59.367

不，目前没有。[标准技巧](https://stackoverflow.com/questions/115983/)依赖于在目录中有一个文件 ( ) `somedirectory/.gitignore`，因为 git 不会暂存空目录，不管怎么说`/.gitignore`。

当前无法`git add`创建空目录。

# ant - 为 Jenkins 中的 Findbugs 增加 maxHeap arg

> ID：11600193
> 
> 赞同：3
> 
> 时间：2012-07-22T12:12:42.490
> 
> 标签：ant, hudson, jenkins, findbugs, jvm-arguments

我正在使用 Ant 运行 Findbugs 的`<findbugs>`任务。我正在运行`build.xml`Jenkins 的 Ant。

我的构建卡在低堆大小上：`Exception in thread "main" java.lang.OutOfMemoryError: Java heap space`。

我已经[读到](http://findbugs.sourceforge.net/FAQ.html#q3)我需要运行 Findbugs的大小`-maxHeap n`在哪里`n`（默认为 256）。

由于我使用 Ant 运行 Findbugs 并从 Jenkins 运行 Ant，我真的不知道在哪里传递这个参数。我的选择是：

1.  `Java Options`在 Jenkins Ant 构建步骤中，我通常会放置诸如此类的参数`-Xmx1024m -Xms512m`...
2.  作为文件中任务的`jvmargs`属性。`<findbugs>``build.xml`

我不确定如何传递这个参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T16:44:58.893

`-maxHeap n`是 findbugs 命令行包装脚本的一个参数，只能在那里使用。

要从 ant 脚本设置堆大小，请使用该`jvmargs`属性。所以你的第二个选择应该有效。例如：

```
<findbugs output="xml" outputFile="..." jvmargs="-Xmx256m">
   ...
</findbugs> 
```

# c++ - 编写 AI：屏幕截图和输入

> ID：11600196
> 
> 赞同：2
> 
> 时间：2012-07-22T12:12:57.487
> 
> 标签：c++, python, windows, directx, artificial-intelligence

我正在考虑一个宠物项目，为 Windows 上的简单游戏编写 AI（首选 C++/python）。你能告诉我抓取简单屏幕截图的方法是什么，这样我就可以做一些非常简单的对象识别/基本上找出什么是这样的像素颜色。

而且我还需要管理输入（移动鼠标，点击等）？我主要是一个 linux 人，所以我敢打赌我需要使用一些 DirectX API 来注入事件？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T12:18:21.837

我曾经这样做是为了打破 Bejeweled Blitz 的记录。*事实证明，计算机比所有*不使用作弊的人都要快得多。

由于我创建机器人的游戏是几年前在浏览器中运行的 Flash 游戏，因此我只需要使用普通的 Win32 API 调用来获取屏幕内容并发送鼠标事件。

您可以从这里开始阅读有关[抓取屏幕内容](http://social.msdn.microsoft.com/Forums/en-US/vssmartdevicesnative/thread/70cd890f-0c82-40a5-97a8-93b9daa50b70/)的信息，以及有关[模拟鼠标输入](http://msdn.microsoft.com/en-us/library/ms171548.aspx)的信息。

我认为您最好使用 .NET 而不是 C++。如果您真的喜欢 Python，请尝试 IronPython，因为它是基于 .NET 的，它将使与 Windows API 的接口变得更加容易。

# sql - SQL插入子查询错误

> ID：11600197
> 
> 赞同：2
> 
> 时间：2012-07-22T12:13:02.333
> 
> 标签：sql, insert, subquery

我有一个带有两个子查询的插入查询：

```
INSERT INTO Work_Order (ID ,BRANCHID,BRANDID)   
VALUES (66),
SELECT ID FROM Brands WHERE NAME = 'branch'
SELECT ID FROM Branches WHERE NAME = 'brand' 
```

我知道这不是一个正确的语法，但我需要正确的，ID 必须是 66 并且 BRANCHID,BRANDID 是另一个表的外键

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T12:15:36.133

`66`是文字，在您的 : 中使用它和两个子选择`SELECT`：

```
INSERT INTO Work_Order (ID ,BRANCHID,BRANDID) 
SELECT
  66 AS ID,
  (SELECT ID FROM Brands WHERE NAME='branch') AS BRANCHID,
  (SELECT ID FROM Brands WHERE NAME='brand') AS BRANDID 
```

MySQL 对子句的存在很宽容`FROM`，所以这应该可以工作。许多其他 RDBMS 会要求您在某个表中放入一个`FROM`子句，即使它没有在`SELECT`（如 Oracle 的`Dual`表）中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T19:33:34.377

这就是它与我完美合作的方式

```
INSERT INTO Work_Order (NUMBER,BRANDID,BRANCHID)    
SELECT 66,B.ID,Br.ID
FROM Brands as B,Branches as Br
WHERE B.NAME = 'brand' AND Br.NAME = 'branch' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:28:30.523

如果您的子查询返回多于一行，您必须决定如何组合这些值。以下查询假定您需要所有组合：

```
INSERT INTO Work_Order (ID ,BRANCHID, BRANDID)
    select 66, branches.id, brands.id
    from brands cross join branches
    where branches.NAME = 'branch' and
          brands.NAME = 'brand' 
```

（我更改了 where 子句以在与名称相同的表中查找名称......branchs.Name = 'branch' 而不是branchs.name = 'brand'。）

# c++ - 使流布局适应 Qt 表

> ID：11600198
> 
> 赞同：1
> 
> 时间：2012-07-22T12:13:03.197
> 
> 标签：c++, qt, layout

我正在做一个项目，我想在 Photoshop 中制作类似于模式浏览器的东西（如这张图片[http://uploads.siteduzero.com/files/392001_393000/392193.png](http://uploads.siteduzero.com/files/392001_393000/392193.png)）`；

我最初是使用自定义 QAbstractTableModel 和 QTableView 这样做的，但我必须从模型本身设置行数和列数。这是一个问题，因为我希望列适应查看器宽度，如 FlowLayout 示例中所示：http: [//qt-project.org/doc/qt-4.8/layouts-flowlayout.html](http://qt-project.org/doc/qt-4.8/layouts-flowlayout.html)

似乎模型/视图系统不适合我想做的事情，但我不知道如何让我的小部件看起来像一张桌子（如上面的屏幕截图所示）。

你能帮我解决这个问题吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:56:09.330

使用**QListView** _

```
setViewMode(QListView::IconMode);
setFlow(QListView::LeftToRight); 
```

# objective-c - 从 Cocoa 应用程序访问 Safari 文档的 DOM

> ID：11600199
> 
> 赞同：1
> 
> 时间：2012-07-22T12:13:04.133
> 
> 标签：objective-c, cocoa, safari, applescript

是否有可能以某种方式枚举打开的 Safari 文档并从我自己的第三方 Cocoa 应用程序访问它们的 DOM？

我想过编写一个 Safari 扩展程序来帮助我进行这样的交互，但也许有一种更简单的方法可以实现相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:41:25.763

我不确定这是否有帮助，但您可以通过 AppleScript 访问特定元素，如下所示：

```
 tell application "Safari"
    set xxx to do JavaScript "document.getElementsByClassName('user-details')[0].childNodes[0].href" in document 1
end tell 
```

（从该页面为您提供用户个人资料的 URL）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:57:42.160

也许这对你来说很有趣：http:
[//phantomjs.org/](http://phantomjs.org/)
源代码也是可用的。

# c# - 如何为 Expression Encoder 4 创建 directshow 过滤器？或与 GRF 合作

> ID：11600204
> 
> 赞同：0
> 
> 时间：2012-07-22T12:13:44.563
> 
> 标签：c#, expression, directshow.net

我有一个用于电缆的数字调谐器，我需要使用表达式编码器来捕获它，图形看起来像图片中的样子：![在此处输入图像描述](../Images/639b22e2cc175e60b8966c257688b861.png)

我的问题是我对 c++ 不太了解，我对 c# 有一点了解，据我所知，我应该为表达式编码器创建一个 directshow 过滤器，或者创建一个图形并将其传递给表达式编码器。我不知道该怎么做。

有人有什么建议吗？总的来说，我是一个非常快速的学习者，并且擅长 c#，但仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:58:06.263

Expression Encoder 可与可用的视频捕获设备配合使用，这些设备能够提供视频流，通常以帧和压缩形式传输，例如通过网络摄像头捕获。

相反，您构建了一个过滤器链来生成视频流。它不是设备，而是由软件生成的视频流。表达式编码器不灵活地接受这样的提要。

没有简单的方法可以将两者联系起来。一种典型的方法是创建一个虚拟设备，该设备包装自定义过滤器图（您提供的）并公开视频流，因为它是一个捕获设备。使此类虚拟设备注册并可供应用程序使用，您可以从 Expression Encoder 中选择和使用它。

这种实现需要您至少用 C++ 编写部分代码，因为底层 API 都是本机的。

# javascript - 解析 XML 和 Javascript 函数问题

> ID：11600210
> 
> 赞同：0
> 
> 时间：2012-07-22T12:14:30.560
> 
> 标签：javascript, jquery, xml

我需要创建一个从 XML 文件中读取截止日期的倒计时脚本，

XML 文件：

```
<?xml version="1.0" ?>
<Imskia ID="Ramadan2012">
<day date="2012, 7 - 1, 23">
    <Fagr>3:26</Fagr>
    <Shrok>5:22</Shrok>
    <Dohr>12:02</Dohr>
    <Asr>3:38</Asr>
    <Maghrb>6:57</Maghrb>
    <Ishaa>8:27</Ishaa>
</day>
<day date="2012, 7 - 1, 24">
    <Fagr>3:26</Fagr>
    <Shrok>5:22</Shrok>
    <Dohr>12:02</Dohr>
    <Asr>3:38</Asr>
    <Maghrb>6:59</Maghrb>
    <Ishaa>8:27</Ishaa>
</day>  
</Imskia> 
```

这里是 HTML 文件中的 Javascipt：

```
$(document).ready(function(){
    $.get('test.xml', function(d){
    $(d).find('day').each(function(){

        var $day = $(this); 
        var date = $day.attr("date");
        var Maghrb = $day.find('Maghrb').text();

        $('body').append($(html));

    //countdown 
    $('#defaultCountdown').countdown({ 
        until: new Date(date), timezone: +2
    });             

    });
});

}); 
```

问题是倒计时脚本没有从 XML 文件中读取存储日期的变量，但是当手动放置它时它可以正常工作，如下所示：

```
 //countdown 
    $('#defaultCountdown').countdown({ 
        until: new Date(2012, 7 - 1, 24), timezone: +2
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:20:19.260

当你这样做

```
var date = $day.attr("date"); 
```

`date`保存一个字符串文字（`"2012, 7 - 1, 23"`对于第一种情况）。您需要做的是以某种方式将此字符串文字转换为 JavaScript`Date`对象。如果您可以不使用月份组件中的减法（即，将日期字符串保留为`"2012, 6, 23"`，那么获取日期的最简单方法是

```
// split along the commas to get an array
var dateComponents = $day.attr("date").split(', '); 
var date = new Date(dateComponents[0], dateComponents[1], dateComponents[2]); 
```

请注意，`new Date()`（月份组件）的第二个参数是 0 索引的，因此一月是 0，十二月是 11。

您可以将倒计时更改为

```
$('#defaultCountdown').countdown({ 
    until: date, timezone: +2
}); 
```

但是，如果更改日期格式*不是*一个选项，`eval`应该可以帮助您将减法字符串转换为其实际值。在这种情况下，代码将是

```
// split along the commas to get an array
var dateComponents = $day.attr("date").split(', ');
var date = new Date(dateComponents[0], eval(dateComponents[1]), dateComponents[2]); 
```

# c# - 将本地数据库连接到 asp.net C#

> ID：11600212
> 
> 赞同：0
> 
> 时间：2012-07-22T12:14:40.170
> 
> 标签：c#

打开连接时出现以下错误。我正在开发 Windows 应用程序。

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

你能告诉我如何连接到 Microsoft SQL Server Compact 3.5(.NET Framework)。我有vs 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:28:29.317

```
string connectionString = @"Data Source=PATH/TO/SDF";
SqlCeConnection con = new SqlCeConnection(connectionString);
string command1 = "sql goes here"
con.Open();
SqlCeCommand sqlcom1 = new SqlCeCommand(command1, con);
SqlCeDataReader reader = sqlcom1.ExecuteReader(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:32:02.247

有一些步骤你应该确保你做对了：

> 1.  确保您的服务器名称正确，例如，名称没有拼写错误。
> 2.  确保您的实例名称正确，并且您的目标机器上实际上存在这样的实例。[更新：某些应用程序将 \ 转换为 . 如果您不确定您的应用程序，请在连接字符串中同时尝试 Server\Instance 和 Server\Instance]
> 3.  确保服务器机器可访问，例如，DNS 可以正确解析，您可以 ping 服务器（并非总是如此）。
> 4.  确保 SQL Browser 服务正在服务器上运行。
> 5.  如果服务器上启用了防火墙，则需要将 sqlbrowser.exe 和/或 UDP 端口 1434 置于异常中。

来源：http: [//goo.gl/MZJx](http://goo.gl/MZJx)

而且我相信本教程是一个很好的开始，可以彻底轻松地识别错误：

链接：http: [//goo.gl/3unpa](http://goo.gl/3unpa)

# java - 为什么 Java.lang.Object 不实现 Serializable 接口？

> ID：11600213
> 
> 赞同：39
> 
> 时间：2012-07-22T12:14:51.307
> 
> 标签：java, serializable

> **可能重复：**
> [为什么 Java 需要 Serializable 接口？](https://stackoverflow.com/questions/441196/why-java-needs-serializable-interface)

根据 Java 文档中的 Serializability ：

> 类的可序列化性由实现 java.io.Serializable 接口的类启用。未实现此接口的类将不会对其任何状态进行序列化或反序列化。可序列化类的所有子类型本身都是可序列化的。序列化接口没有方法或字段，仅用于识别可序列化的语义

为什么 Object 还没有实现`Serializable`？我们不想被序列化的成员可以被设为`transient`. 为什么要阻止默认的 Serializability？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-22T12:17:23.707

> 可序列化类的所有子类型本身都是可序列化的。

换句话说：您曾经创建、曾经创建或将要创建的所有类都是可序列化的**。**`transient`仅排除字段，而不是整个类。

这是一个潜在的安全漏洞 - 巧合的是`DataSource`，如果这个特定`DataSource`实现的创建者忘记创建这些字段，您可以在其中序列化例如您的数据库凭据`transient`。序列化随机 Java 对象非常容易，例如通过内部类对外部对象进行隐式引用`this`。

使用您明确想要并允许序列化的类的白名单更安全，而不是仔细检查您的代码，确保没有您不想要的字段被序列化。

此外，您不能再说：`MySuperSecretClass`is not serializable（通过简单地不实现`Serializable`）-您只能排除胆量（字段）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-22T12:25:46.763

**1.** `Serializable`是**marker interface**，它是空的，但是当一个类被标记为Serializable时，意味着它的对象是Serializable。

**2.** java.lang.Object 没有实现 Serializable 的原因是，如果你不想将某些字段设置为 Serializable 并且我的错误错过了向该字段添加瞬态，那将会造成严重破坏。

**3.**通过让程序员为他的类实现Serializable，它让程序员意识到他已经有意识地实现了它，并且应该采取必要的措施来防止任何不应该被序列化的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-22T12:20:51.603

大多数类不需要可序列化。使用当前的设计，您可以很容易地注意到该类是可序列化的。本质上，它只是一个经过编译器检查的自文档。否则你可能会写如下内容：

```
/** DON'T SERIALIZE IT!!! */
class Connection { ... } 
```

最好有语言或库功能而不是评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T12:25:03.550

`Serializable`我认为为需要持久化的对象实现更有意义，并且声明类的每个字段`transiennt`会更麻烦。我不确定的另一点是`Object`所有类的根，其中包括与反射相关的类，因此为 Object 类实现 Serializable 是不合适的。

# c# - 如何使用 Aforge.Net 计算 blob 中连接组件的数量

> ID：11600218
> 
> 赞同：0
> 
> 时间：2012-07-22T12:16:16.993
> 
> 标签：c#, image-processing, aforge, anpr

在我的车牌识别应用程序（英国车牌）中，我进行了矩形检测，并使用了几个标准，例如车牌的宽度/长度比以及车牌的最小宽度和长度。我已经设法显着减少了非车牌区域。我的最后一个标准是获取每个候选区域的连接分量的数量，以便我可以验证我在研究论文中读到的车辆图像的真实车牌区域。

我正在使用 C# 和 Aforge.Net 库。但是如何使用 ConnectedComponentsLabeling 来获取车牌中的连接组件的数量呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-30T16:09:22.670

当您找到与车牌相对应的 blob 时，使用此 blob Image 作为另一个 blob 计数器实例的输入。结果将告诉您此 blob Image 中的组件数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T12:11:09.393

我正在这样做：

```
FiltersSequence preOcr = new FiltersSequence(
    Grayscale.CommonAlgorithms.BT709, 
    new BradleyLocalThresholding());

Bitmap grayscale = preOcr.Apply(original);
var labels = new ConnectedComponentsLabeling();
labels.Apply(new Invert().Apply(grayscale));

//Console.WriteLine(labels.ObjectCount);    // Here you go
foreach (var candidate in labels.BlobCounter.GetObjectsInformation())
{
    using (Bitmap symbol = new Bitmap(candidate.Rectangle.Width, 
                                      candidate.Rectangle.Height))
    using (Graphics g2 = Graphics.FromImage(symbol))
    {
        g2.DrawImage(grayscale, 0, 0, candidate.Rectangle, GraphicsUnit.Pixel);
        symbol.Save(String.Format(@"temp\{0}-{1}.jpg",i,++n), ImageFormat.Jpeg);
        // do stuff
    }
} 
```

# audio - 使用 FFmpeg 重新编码为 mp4 会导致音量显着降低

> ID：11600222
> 
> 赞同：3
> 
> 时间：2012-07-22T12:16:41.857
> 
> 标签：audio, ffmpeg, volume, re-encoding

由于某种原因，我重新编码的 mp4 的音量非常低。

```
ffmpeg -i "\"$FILENAME\"" -sameq  -vf "\""movie=/files/logo.png [watermark]; \
[in][watermark] overlay=main_w-overlay_w-10:main_h-overlay_h-10[out]\""" -ac 2 \
-vcodec libx264 -threads 0 -acodec libfaac -async 2 \
"\""$OUTPUT_DIRECTORY/abc$OUTPUTFILENAME"\ 
```

我添加了一些标志来保持音频同步等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:28:19.363

如果原始音频超过 2 个通道，则执行“-ac 2”时可能会丢失一些音量

除非您必须使用 libfaac，否则您可以尝试“-acodec copy”。

我在 ffmpeg pan [http://ffmpeg.org/ffmpeg-filters.html#pan上取得了喜忧参半的成功](http://ffmpeg.org/ffmpeg-filters.html#pan)

您可以干燥以手动将输入通道平移在一起并在那里添加增益。

# css - CSS边框和浮动问题

> ID：11600223
> 
> 赞同：1
> 
> 时间：2012-07-22T12:16:44.613
> 
> 标签：css, css-float, border, margin

每当我将鼠标悬停在元素上时，我都试图有一个边框，所以我创建了[它](http://jsfiddle.net/bSF8B/)，它适用于除右侧最后一列之外的所有列。

我的问题是，有没有我可以修复它而不必`position:absolute;`在元素上使用？我计划在用户单击切换时设置一些元素`display:none;`，因此绝对定位不会按预期工作，因为会有“空块”而不是自动重新排列元素。

PS：我也知道同位素，但我认为这样的事情有点“矫枉过正”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:29:33.483

我不知道我是否解决了您的问题，但这种行为是否符合您的预期？

~~http://jsfiddle.net/bSF8B~~（抱歉，链接错误）

[http://jsfiddle.net/bSF8B/11/](http://jsfiddle.net/bSF8B/11/)

我只强制默认`border-width`为 0，并且在悬停时将边距减少 5px。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T12:30:55.740

这是一个解决方案：http: [//jsfiddle.net/PhilippeVay/bSF8B/10/](http://jsfiddle.net/PhilippeVay/bSF8B/10/)

它考虑了即使没有悬停也将在悬停时存在的边框（边框颜色与父级的背景颜色相同，您可以在第二个示例中看到它）

编辑：边框颜色不是背景颜色^^

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T12:37:35.977

我已经删除了*块*`margin`之间的并创建了一个*黑色*的，这样当您将鼠标悬停在块上时，只有边框的颜色会发生变化，而您不必*包含*实际上导致问题的新边框。*`border``5px`*

 ***[这是小提琴](http://jsfiddle.net/bSF8B/13/)。***

# zend-framework - 从类（非控制器）调用 zend 视图助手

> ID：11600225
> 
> 赞同：2
> 
> 时间：2012-07-22T12:16:51.510
> 
> 标签：zend-framework, view-helpers

我如何在 Zend Frmework 中渲染 phtml 文件（库中的一个类“非控制器”）

以及如何将参数传递给它我有这个错误：

调用成员函数 render()

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:20:22.803

这应该有效。

```
$view = new Zend_View();
$view->setScriptPath('../application/views/scripts');
$view->param1 = 'TEST';
$view->render('xyz.phtml'); 
```

# android - 如何在 Flex Spark 上重复背景图像？

> ID：11600228
> 
> 赞同：1
> 
> 时间：2012-07-22T12:17:35.253
> 
> 标签：android, css, apache-flex

我正在制作一个安卓应用程序。但我无法添加背景。这是工作：

```
<s:VGroup x="0" y="0" width="100%" height="100%" horizontalAlign="center" verticalAlign="middle">
    <s:Rect width="100%" height="100%">
        <s:fill>
            <s:BitmapFill source="@Embed('images/bg.png')" />
        </s:fill>
    </s:Rect>
</s:VGroup> 
```

但它不重复..我如何重复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T12:21:55.613

指定`fillMode`：

```
<s:BitmapFill source="@Embed('images/bg.png')" fillMode="repeat"/> 
```

# vb.net - 如何使命令行实用程序在 vb.net 的 Async BackgroundWorker 进程中运行？

> ID：11600229
> 
> 赞同：0
> 
> 时间：2012-07-22T12:17:47.653
> 
> 标签：vb.net

如何使命令行实用程序在 vb.net 的 Async BackgroundWorker 进程中运行？

例子：

```
Private Sub UpgradeButton_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles UpgradeButton.Click
    BackgroundWorker1.RunWorkerAsync()
End Sub

Private Sub BackgroundWorker1_DoWork(sender As System.Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork

    Dim MyWorkingDirectory = "C:\Windows\System32\"
    Dim MyFileName As String = "notepad.exe"
    Dim MyArguments As String = ""

    Dim myProcess As System.Diagnostics.Process = New System.Diagnostics.Process()
    myProcess.StartInfo.WorkingDirectory = MyWorkingDirectory
    myProcess.StartInfo.FileName = MyFileName
    myProcess.StartInfo.Arguments = MyArguments
    myProcess.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden
    myProcess.Start()
    ' Wait until it ends.
    myProcess.WaitForExit()
    ' Close the process to free resources.
    myProcess.Close()

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:28:19.950

我不确定你的代码为什么不起作用——我想它不起作用——我想给你一些建议：使用线程而不是 BackgroundWorker。如果您只需要启动应用程序，请使用一个简单的线程：

```
Public Shared Sub ThreadProc()
    ''Starth the process here!
End Sub

Dim t As New Thread(AddressOf ThreadProc)
t.IsBackground = True
t.Start() 
```

启动的线程打开您需要的进程，主线程继续执行。我希望这是您需要的答案！

# jquery - 需要水平列出图像而不是垂直列出

> ID：11600231
> 
> 赞同：0
> 
> 时间：2012-07-22T12:18:09.677
> 
> 标签：jquery, html, css

我正在尝试创建一个非常简单的 jquery 滑块，而不是使用可能存在的数百万个滑块中的一个。所以我几乎完成了它，但我有一个问题。我正在使用 jquery 的动画来移动图像，并且我需要在同一水平线上显示所有图像才能使脚本正常工作。现在，它们是垂直列出的，我已经考虑了 2 个小时。所以这里是 HTML：

```
<div id="gallery-wrap">
<div id="gallery">
    <img class="galleryimage" src="http://materiaalit.kotisivut.name/sivustokuvat/ccc.PNG" alt="" />
    <img class="galleryimage"  src="http://materiaalit.kotisivut.name/sivustokuvat/coverline.PNG" alt="" />
    <img class="galleryimage"  src="http://materiaalit.kotisivut.name/sivustokuvat/ccc.PNG" alt="" />
    <img class="galleryimage"  src="http://materiaalit.kotisivut.name/sivustokuvat/coverline.PNG" alt="" />
    <img class="galleryimage"  src="http://materiaalit.kotisivut.name/sivustokuvat/ccc.PNG" alt="" />
    <img class="galleryimage"  src="http://materiaalit.kotisivut.name/sivustokuvat/coverline.PNG" alt="" />
</div>
<div id="gallery-controls">
<a id="gallery-prev" href="#"><img alt="" /> </a>
<a id="gallery-next" href="#"><img alt="" /></a></div>
</div>
<div style="clear: both;"></div> 
```

CSS：

```
 #gallery-wrap{margin: 0 auto; overflow: visible; width: 100%; position: relative; height:300px; border:1px solid black; border-radius:6px; z-index:3;}
#gallery{position: relative; left: 0; top: 0; width:100%;}
.galleryimage{float:left; width:100%; height:300px;}

#gallery-controls{width: 100%; z-index:4;}
#gallery-prev{position:absolute; left:0px; top:0px; width:50%; height:300px; background-color:rgba(77,77,77,0.5);}
#gallery-next{position:absolute; right:0px; top:0px;  width:50%; height:300px; background-color:rgba(88,88,88,0.5);} 
```

和jQuery：

```
 $(document).ready(function(){ 

    $("#gallery-prev").click(function(){
  $(".galleryimage").animate({"left": "-=100%"}, "slow");
});

$("#gallery-next").click(function(){
  $(".galleryimage").animate({"left": "+=100%"}, "slow");
});

}); 
```

这是一张图片，显示目前图像是如何渲染的，以防万一我解释错了，英语不是我的第一语言：

![在此处输入图像描述](../Images/1aa35527a3e8d26eb1a22888e0ab1549.png)

我试过 display:inline 没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:20:02.667

使用`float:left`而不是`display:inline`强制内联流而不丢失大小调整功能。

这是一个[例子](http://jsfiddle.net/hdUZb/)：

如果您想强制它不使用狭窄的浏览器窗口换行，请为画廊设置固定宽度，如下所示：

```
#gallery
{
    width: 1500px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:23:13.960

您正在使用`#gallery li img {display:inline;}`

而是应用于`display:inline;` 此`#gallery li`并将其从中删除`#gallery li img`

```
#gallery li{width: /*here goes some width*/; height: 300px; float:left; display: inline;} 
```

并且不要将图像和 li 元素的宽度用作 100%，请查看[我的小提琴](http://jsfiddle.net/hdUZb/2/)

我看到了您页面的来源，假设您需要将所有图像放在一个水平行中，为您的`<li>`元素设置宽度，并`<div style="clear: both;"></div>`在文本段落之前使用以清除浮动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T12:43:06.870

你可以让图像的容器有

```
{
  white-space: nowrap;
} 
```

正如在这个问题上回答的那样[如何调整 ul 宽度属性？](https://stackoverflow.com/questions/11520214/how-to-adjust-ul-width-property/11520544#11520544)

# java - 什么类在 GWT 中转换为 java 脚本？

> ID：11600238
> 
> 赞同：1
> 
> 时间：2012-07-22T12:19:22.463
> 
> 标签：java, javascript, gwt

我用 GWT 创建了一个示例项目。在我的项目中有一些类和包。我的问题是什么类或包最终转换为 java 脚本？服务器？客户？或两者？什么是项目中的服务器滚动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T14:59:11.713

在模块定义 gwt.xml 文件中指定了编译成 javascript 的 java 源代码。

```
<module>
  <inherits name="com.google.gwt.user.User" />
  <source path="async"/>
  <source path="dto" includes="Employee.java, Address.java"/>
  <source path="shared" excludes="Calendar.java"/>
</module> 
```

在上面的模块定义gwt.xml文件中，只有以下的被编译成javascript

*   文件夹异步
*   文件夹 dto 中的 Employee.java、Address.java 类
*   共享文件夹中的所有类，除了日历类
*   以及 gwt-user.jar:/com/google/gwt/user/User.gwt.xml 中定义的类

它们不必涉及“客户端”、“服务器”或“共享”，它们只是建议使用的文件夹名称。

模块 gwt.xml 文件中未指定的其他文件夹将仅用作服务器端。

在 gwt.xml 文件中指定的所有源/资源/类也将可供服务器端使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:25:23.363

“客户端”部分内的代码被翻译成 Javascript。“服务器”部分内的代码是纯 java 并在服务器端运行。

# java - 使用泛型参数和返回值定义的泛型方法

> ID：11600239
> 
> 赞同：0
> 
> 时间：2012-07-22T12:19:25.100
> 
> 标签：java, generics, jakarta-ee, methods, parameters

> **可能重复：**
> [调用泛型类型的构造函数](https://stackoverflow.com/questions/9366121/calling-constructor-of-a-generic-type)

我想编写一个方法来检查 null 的任何类型的值并相应地返回相同类型的值。我如何以通用方式编写它，以便我可以传递任何参数并在它不是 null 或相同类型的新对象时返回相同的参数？

这样的事情会有所帮助，但显然以下内容不起作用：

```
public T getValue(T param) {
    if (null != param) {
        return param;
    } else {
        return ""; // or return new T
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:57:26.163

您可以尝试显式传入默认值：

```
public <T> T valueOrDefault(T input, T fallback) {
    return input == null? fallback : input;
} 
```

可以像这样使用：

```
String query = valueOrDefault(getParameter("query"), "");

if (query.length() == 0) {

    ...
} 
```

Java 泛型（与例如 C# 相对）的问题是，编译后没有保留类型信息，这将允许类似`new T()`的工作。作为一种替代方法（如对您问题的评论中提出的那样），您可以传入类令牌：

```
public <T> T valueOrDefault(Class<T> token, T value) {
    if (value != null) return value;
    else {
        final Constructor<T> ctor = token.getConstructor();
        return ctor.newInstance();
    }
} 
```

（为简洁起见，省略了错误检查；代码未经测试，甚至可能无法编译......）不过，这种方法非常脆弱。

1.  如果`T`没有默认构造函数怎么办？
2.  如果默认构造函数做了不重要的事情怎么办？
3.  如果一个值在使用默认构造函数构造后不能真正使用（因为需要额外的初始化）怎么办？

# jquery - jquery滚动所有部门

> ID：11600247
> 
> 赞同：0
> 
> 时间：2012-07-22T12:20:27.953
> 
> 标签：jquery

```
jQuery.fn.extend({
      scrollTo : function(speed, easing) {
        return this.each(function() {
          var targetOffset = $(this).offset().top;
           $.fx.off = true;
          $('html,body').animate({scrollTop: targetOffset}, speed, easing);

        });
      }
    });
    $(document).keyup(function(e) 
    {

    if(e.keyCode == 78) { 
        navigation_x();
    }

    function navigation_x(){
    $('div#images-interface-controller').scrollTo(1000);

} 
```

所以我有这个keyup功能，每次我按下字母“n”它都会滚动到div#images-interface-controller，是的，它正在滚动，但直到'到div#images-interface-controller的最后一个元素。我怎样才能停止它，我的意思是我希望它每次按“n”时一次只滚动 1 个。我猜想 jquery 代码上方的 .each 与我的问题有关。任何帮助将不胜感激。谢谢！

无论如何，我正在使用这个插件： http: [//flesler.blogspot.com/2007/10/jqueryscrollto.html](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:39:48.717

我以前用过这个插件，但已经有一段时间了。我想你想要这个。

```
$(window).scrollTo('#images-interface-controller', 1000); 
```

调用的选择器`scrollTo()`是进行滚动的项目，而作为第一个参数传递的选择器是您希望第一个项目滚动到的对象。

这是告诉`window`滚动到某个项目，特别是带有`id`of的 div `images-interface-controller`。

# iphone - 具有当前 modalviewcontroller 的 UInavigation 控制器在 UItableviewcontroller 中不起作用

> ID：11600250
> 
> 赞同：0
> 
> 时间：2012-07-22T12:20:49.597
> 
> 标签：iphone, ios, xcode, uitableview, uinavigationcontroller

我创建了一个具有表格视图的应用程序。我需要为此添加标题和后退按钮。这是我在 viewcontroller.m 文件中的代码

```
-(IBAction)go:(id)sender{

TableViewController *sec=[[TableViewController alloc]init];

sec.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:sec animated:YES];

self.title=@"test title";

UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:sec];
[self.navigationController presentModalViewController:navController animated:YES];
[navController release];
[sec release];
} 
```

我现在需要添加返回按钮，我的标题栏没有显示。请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:59:20.593

您想使用导航控制器的“push ....”方法。在您的应用程序委托中，您创建一个 UINavigationController，创建窗口的根视图，然后创建一个 UIViewController 子类并将其作为 UINavigation 控制器的根视图。当这个视图出现时，它会显示一个 UINavigationBar。

然后你创建这个新的表格视图，你的 UIViewController 使用“推送”该视图

```
- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

我错过了什么？？？

# java - 如何在没有 for 循环或递归的情况下制作幂方法？

> ID：11600252
> 
> 赞同：1
> 
> 时间：2012-07-22T12:21:08.660
> 
> 标签：java

我正在考虑一种计算整数的幂（仅以 10 为底）的方法，该整数将作为参数传递但不使用 for 循环或递归：

这是使用 forr 循环的最简单形式的方法：

```
 static long power(int val) {
    long y = 10l;

    if (val == 1) {
        return y;
    } else {
        for (int x = 0; x < val - 1; x++) {
            y *= 10;

        }
        return y;

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T12:25:38.980

最简单的方法是使用`Math.pow`.

假设您不想这样做，您可以使用查找表。只有少数有限数量的结果适合长。像这样的东西会起作用：

```
static final long[] results = { 1L, 10L, 100L, /* etc... */ };

static long power(int val) {
    return results[val];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:36:43.800

我不明白您为什么要这样做，但显然，这会起作用：

（警告：随心所欲）

1.  将数字转换为字符串（使用 base-b 表示，b=10）
2.  附加零
3.  将字符串转换为数字并返回结果

当然，这只会*隐藏*循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T12:40:51.557

可能有一种使用字符串的方法。就像是...

```
String zeros = new String(new char[val]).replace('\0', '0');
String init = "1";
String out = init.concat(zeros);
return Long.valueof(out); 
```

但我认为替换也会在里面使用一个循环。也许 Array.fill 没有（因此您可以尝试使用 char[]）

# haskell - 无法理解编码逻辑/原理/约定 - 为什么需要“显示 a”？为什么“显示汽车”或“显示字符串”不起作用？

> ID：11600254
> 
> 赞同：2
> 
> 时间：2012-07-22T12:21:10.003
> 
> 标签：haskell, ghc, haskell-platform

下面给出的代码编译，好的。

```
data Car p q r = Car {company :: p  
                     , model :: q  
                     , year ::r  
                     } deriving (Show)

tellCar :: (Show a) => Car String String a -> String 
```

**有哪些基本原则/约定/逻辑可以提醒我只需要在“tellCar”中使用“Show a”，而不是任何其他选项？我在哪里可以找到资源来学习这些原则/约定/逻辑？**

如果我在 tellCar 中错误地使用了“Show Car”，编译时会收到以下错误消息：

```
*Main> :load "/home/optimight/baby.hs"  
[1 of 1] Compiling Main             ( /home/optimight/baby.hs, interpreted )  

/home/optimight/baby.hs:96:18:  
    Expecting three more arguments to `Car'  
    In the type signature for `tellCar':  
      tellCar :: Show Car => Car String String a -> String  
Failed, modules loaded: none. 
```

如果我在 tellCar 中错误地使用了“Show z”，编译时会收到以下错误消息：

```
*Main> :load "/home/optimight/baby.hs"  
[1 of 1] Compiling Main               ( /home/optimight/baby.hs, interpreted )

/home/optimight/baby.hs:96:1:  
    Ambiguous constraint `Show z'  
      At least one of the forall'd type variables mentioned by the constraint  
      must be reachable from the type after the '=>'  
    In the type signature for `tellCar':  
      tellCar :: Show z => Car String String a -> String  
Failed, modules loaded: none. 
```

如果我在 tellCar 中错误地使用了“显示字符串”，编译时会收到以下错误消息：

```
Prelude> :load "/home/optimight/baby.hs"  
[1 of 1] Compiling Main             ( /home/optimight/baby.hs, interpreted )  

/home/optimight/baby.hs:96:1:  
    Non type-variable argument in the constraint: Show String  
    (Use -XFlexibleContexts to permit this)  
    In the type signature for `tellCar':  
      tellCar :: Show String => Car String String a -> String  
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T13:29:52.773

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T13:42:49.640

主要思想：类型签名中 => 之前列出的每个约束都用于将一个或多个**类型变量****限制**在类型签名中 => 的右侧。

 **原则：类型签名中的约束总是在某处有一个类型变量。

写`Show String =>`or`Show Car =>`没有帮助，错误消息告诉你这是因为`String`没有类型变量（总是以小写字母开头）。这是因为要么`instance Show String`在范围内可见要么不可见`tellCar`，并且您永远不需要将完全具体的实例列为类型中的约束。

原则：您列出的约束必须在类型签名中的 => 右侧至少提及一个类型变量。使用 LANGUAGE 扩展，约束可能会提到零个或多个仅存在于类型签名中 => 左侧的额外类型变量。

写作`tellCar :: Show z => Car String String a -> String`违反了这一点，因为`a`它是 => 的 RHS 上唯一的类型变量，并且`Show z`没有提及`a`. 这`Show z`不限制类型变量`a`。

更具体地说，对于您编写`deriving (Show)`的自动生成实例的情况：

```
instance (Show p, Show q, Show r) => Show (Car p q r) where
  showsPrec = ... 
```

`Show`自动生成的代码仅在有`p,q,r`. 你的专业

```
tellCar :: (Show a) => Car String String a -> String 
```

提到`Car String String a`。使用`Show`on `Car String String a`in`tellCar`选择自动生成的实例 for`Show (Car p q r)`并创建对 and 的`Show String`需要`Show a`。然后编译器`Show String`从隐式导入的`Prelude`模块中看到一个实例，只留下悬空`Show a`约束。这个约束`a`会感染`tellCar`.

了解 Haskell 类型系统的资源是有关 Haskell 的[书籍](http://www.haskell.org/haskellwiki/Books)之一。

编辑：涵盖此内容的 Haskell 98 报告的确切部分似乎是[第 4.1.3 节](http://www.haskell.org/onlinereport/decls.html#sect4.1.3)。更多背景在[“Haskell 的历史”中](http://www.haskell.org/haskellwiki/History_of_Haskell)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-22T12:43:36.113

您只需要对多态类型变量进行约束，因为该函数不知道类型将是什么，并且您为编译器提供了使其知道它将起作用的最少信息。

`Show Car =>`（或`Show String`）实际上并不意味着任何约束。编译器已经知道`Car p q r`有一个 Show 实例。如果`Car p q r` ***没有***Show 实例，那么编译器也已经知道了！因此，如果允许这种约束，它要么是多余的，要么是矛盾的。

的错误`Show z`是为了帮助你。您正在约束一个未在类型签名中使用的变量，因此几乎可以肯定这是一个错误。**

# wordpress - 自定义帖子类型类别名称 wordpress

> ID：11600259
> 
> 赞同：0
> 
> 时间：2012-07-22T12:21:38.677
> 
> 标签：wordpress, post, categories

我在我的 Wordpress 中有一个自定义的 post_type，带有类别。如何在模板中显示类别名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:49:35.213

```
the_category(); 
```

或者，如果您想列出帖子的类别，请以逗号分隔：

```
the_category(', '); 
```

codex 是你的朋友 - [http://codex.wordpress.org/Function_Reference/the_category](http://codex.wordpress.org/Function_Reference/the_category)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-12T06:09:03.500

```
//Returns All Term Items for "my_taxonomy"
$term_list = wp_get_post_terms($post->ID, 'my_taxonomy', array("fields" => "all"));
print_r($term_list);
Array
(
    [0] => WP_Term Object
        (
        [term_id] => 145
        [name] => Example Category
        [slug] => example-cat
        [term_group] => 0
        [term_taxonomy_id] => 145
        [taxonomy] => adcpt_categories
        [description] => 
        [parent] => 0
        [count] => 2
        [filter] => raw
    )

) 
```

# ruby-on-rails-3 - 使用作为可标记的形式出现错误

> ID：11600263
> 
> 赞同：0
> 
> 时间：2012-07-22T12:22:31.880
> 
> 标签：ruby-on-rails-3, acts-as-taggable-on

我正在尝试在我的一个 Rails 模型上实现作为可标记的行为，但是在尝试创建表单时遇到了问题。它抱怨方法 tag_list 未定义。即使我可以在控制台中使用它。我的模型如下所示：

```
class Reflection < ActiveRecord::Base
  acts_as_taggable
  attr_accessible :body, :title, :category_id

  validates_presence_of :category_id

  belongs_to :category
end 
```

我的表格是这样的：

```
<%= form_for(@reflection) do |f| %>
...
  <div class="field">
    <%= f.label 'Tags' %><br />
    <%= f.text_field :tag_list %>
  </div>
<% end %> 
```

但是，当我尝试加载表单时出现错误 `undefined method 'tag_list' for #<Reflection:0x007fc1dbef08b8>`。

有人对我能做什么有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:12:36.437

只需将**:tag_list**添加到**attr_accessible 即可**

**attr_accessible :body, :title, :category_id, :tag_list**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:51:32.537

我的错，我添加 gem 后服务器没有重新启动..

# c++ - 生锈/初学者 C++ 编译器错误

> ID：11600264
> 
> 赞同：-3
> 
> 时间：2012-07-22T12:22:45.577
> 
> 标签：c++

我是一个相对有经验的程序员，回来参加一些 C++ 复习课程。我们有一个任务是编写几个相对简单的 c++ 程序。遇到一个我不习惯的奇怪错误，但我确信这对这个社区来说是儿戏。

```
int pull_next_element (int r, std::vector<int>& sequence) {
    int x = sequence[0];
    sequence.erase(sequence.begin());  //orig: sequence.erase(0);
    return x;
} 
```

我得到的错误：

```
Error C2664: 'std::_Vector_iterator<_Myvec> std::vector<_Ty>::erase(std::_Vector_const_iterator<_Myvec>)' : cannot convert parameter 1 from 'int' to 'std::_Vector_const_iterator<_Myvec>' 
```

编辑：替换为迭代器而不是数字索引，否则在整个代码中解决了这个问题。感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:32:03.900

[http://www.cplusplus.com/reference/stl/vector/erase/](http://www.cplusplus.com/reference/stl/vector/erase/)

```
// erasing from vector
#include <iostream>
#include <vector>
using namespace std;

int main ()
{
  unsigned int i;
  vector<unsigned int> myvector;

  // set some values (from 1 to 10)
  for (i=1; i<=10; i++) myvector.push_back(i);

  // erase the 6th element
  myvector.erase (myvector.begin()+5); // <====================================================

  // erase the first 3 elements:
  myvector.erase (myvector.begin(),myvector.begin()+3);// <====================================

  cout << "myvector contains:";
  for (i=0; i<myvector.size(); i++)
    cout << " " << myvector[i];
  cout << endl;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:28:36.347

您应该使用引用参数而不是“序列”的值参数，否则您的擦除将毫无用处。

```
int pull_next_element (int r, std::vector<int>& sequence) 
```

# java - eclipse中的LinkedIn身份验证问题

> ID：11600267
> 
> 赞同：5
> 
> 时间：2012-07-22T12:23:11.200
> 
> 标签：java, android, eclipse, linkedin

我正在尝试将 LinkedIn 与 android 集成。使用教程我应用了以下代码......

```
private void setWebView()
    {
        LinkedinDialog.oAuthService = LinkedInOAuthServiceFactory.getInstance().createLinkedInOAuthService(LINKEDIN_CONSUMER_KEY, LINKEDIN_CONSUMER_SECRET);
        LinkedinDialog.factory = LinkedInApiClientFactory.newInstance(LINKEDIN_CONSUMER_KEY, LINKEDIN_CONSUMER_SECRET);

        LinkedinDialog.liToken = LinkedinDialog.oAuthService.getOAuthRequestToken(OAUTH_CALLBACK_URL);

        WebView mWebView = (WebView) findViewById(R.id.webkitWebView1);
        mWebView.getSettings().setJavaScriptEnabled(true);

        Log.i("LinkedinSample", LinkedinDialog.liToken.getAuthorizationUrl());
        mWebView.loadUrl(LinkedinDialog.liToken.getAuthorizationUrl());
        mWebView.setWebViewClient(new HelloWebViewClient());

        mWebView.setPictureListener(new PictureListener()
        {
            public void onNewPicture(WebView view, Picture picture)
            {
                if(progressDialog != null && progressDialog.isShowing())
                {
                    progressDialog.dismiss(); 
                }

            }
        });

    } 
```

我收到以下错误

```
LinkedinDialog.liToken = LinkedinDialog.oAuthService.getOAuthRequestToken(OAUTH_CALLBACK_URL);

07-22 17:32:08.026: E/AndroidRuntime(26733): FATAL EXCEPTION: main
07-22 17:32:08.026: E/AndroidRuntime(26733): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.devicebee.app.transportfinder/com.devicebee.app.transportfinder.LinkedInActivity}: com.google.code.linkedinapi.client.oauth.LinkedInOAuthServiceException: oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: https://api.linkedin.com/uas/oauth/requestToken 
```

我搜索了互联网，根据一些帖子，这是因为我在一些代理下。但我很确定我没有任何代理。如果有人能告诉我该怎么做。此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:41:01.300

您很可能正在尝试在不允许网络的 UI 线程上运行它。您将需要在 AsyncTask 中实现 oauth 调用。

在 Android 3.0 之前，允许 UI 线程上的网络调用。您正在遵循的教程可能是在更改发生之前编写的。

--EDIT-- 要测试这是否属实，您可以尝试将应用程序目标设置为 API 10 并查看问题是否消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:28:29.987

好的，这就是我用过的，现在工作正常

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.widget.Toast;

import com.google.code.linkedinapi.client.LinkedInApiClient;
import com.google.code.linkedinapi.client.LinkedInApiClientFactory;
import com.google.code.linkedinapi.client.oauth.LinkedInAccessToken;
import com.google.code.linkedinapi.client.oauth.LinkedInOAuthService;
import com.google.code.linkedinapi.client.oauth.LinkedInOAuthServiceFactory;
import com.google.code.linkedinapi.client.oauth.LinkedInRequestToken;

public class LITestActivity extends Activity {

    public static final String CONSUMER_KEY = "xx";
    public static final String CONSUMER_SECRET = "xx";
    private final static String APP_PNAME = "xx";

    public static final String APP_NAME = "xx;
    public static final String OAUTH_CALLBACK_SCHEME = "xx";
    public static final String OAUTH_CALLBACK_HOST = "xxx";
    public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME
            + "://" + OAUTH_CALLBACK_HOST;

    final LinkedInOAuthService oAuthService = LinkedInOAuthServiceFactory
            .getInstance().createLinkedInOAuthService(CONSUMER_KEY,
                    CONSUMER_SECRET);
    final LinkedInApiClientFactory factory = LinkedInApiClientFactory
            .newInstance(CONSUMER_KEY, CONSUMER_SECRET);
    LinkedInRequestToken liToken;
    LinkedInApiClient client;

//  TextView tv = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    //  setContentView(R.layout.main);
    //  tv = (TextView) findViewById(R.id.tv);
        try
        {
        liToken = oAuthService.getOAuthRequestToken(OAUTH_CALLBACK_URL);
        Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(liToken
                .getAuthorizationUrl()));
        startActivity(i);
        }catch (Exception e) {
            Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_SHORT).show();

        }
    }

    @Override
    protected void onNewIntent(Intent intent) {
        String verifier = intent.getData().getQueryParameter("oauth_verifier");
        try{
        LinkedInAccessToken accessToken = oAuthService.getOAuthAccessToken(
                liToken, verifier);
        client = factory.createLinkedInApiClient(accessToken);
        String tweet = "Download Android App " + "market://details?id=" + APP_PNAME;
        client.postNetworkUpdate(tweet);
        //Person p = client.getProfileForCurrentUser();
        //tv.setText(p.getLastName() + ", " + p.getFirstName());
    //      p.setCurrentStatus("tweet");

        }catch (Exception e) {
            Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_SHORT).show();
        }
        finish();

    }
} 
```

图书馆是

```
linkedin-j-android.jar
signpost-jetty6-1.2.1.1.jar
signpost-core-1.2.1.1.jar 
```

# javascript - 根据路由 URL 设置 select 的值

> ID：11600273
> 
> 赞同：0
> 
> 时间：2012-07-22T12:23:44.860
> 
> 标签：javascript, backbone.js

在我的主干应用程序中，我有一个选择菜单，它使用路由过滤列表中的一些员工，它按部门执行此操作。

例如**localhost/#filter/HR**或 **localhost/#filter/Accounting**

```
routes: {
    "filter/:type": "urlFilter"
},

urlFilter: function (type) {     
    this.directory.filterType = type;
    this.directory.trigger("change:filterType");
}, 
```

然后在我看来：

```
filterByType: function () {
    if (this.filterType === "all") {
        this.collection.reset(contacts);
        app.navigate("filter/all");
    } else {
        this.collection.reset(contacts, { silent: true });

        var filterType = this.filterType,
            filtered = _.filter(this.collection.models, function (item) {
                return item.get("type").toLowerCase() === filterType;
            });

        this.collection.reset(filtered);

        app.navigate("filter/" + filterType);
    }
}, 
```

但是，如果您直接访问其中一个 URL，则选择菜单不同步。

如何使选择与路线保持同步，其中选择选项值等于全部、人力资源和会计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:27:01.847

将 onchange 处理程序添加到您的列表中，并相应地更新 URL（通过添加当前列表项的参数值）。更改 URL 时防止重新加载页面（谷歌）。确保在使用参数打开 URL 时（即在页面加载时）更新当前列表项。

# javascript - 将窗口高度分配给文档高度

> ID：11600275
> 
> 赞同：0
> 
> 时间：2012-07-22T12:23:52.713
> 
> 标签：javascript, jquery, html

关于如何实现的任何想法？

```
$(document).css('height', $(window).height()) 
```

```
$('body, html').height($(window).height())
alert('$(document).height(): ' + $(document).height() + "\n$('body').height(): " +   $('body').height() + "\n$('html').height(): " + $('html').height() + '\n$(window).height(): ' + $(window).height()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:26:23.230

```
$("html,body").css("height", screen.height);​ 
```

[我的小提琴](http://jsfiddle.net/kvmQW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:29:01.137

获取屏幕宽度和高度。

```
alert ("screen W = " + screen.width );
alert ("screen H = " + screen.height ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:42:49.453

试试这个CSS：

```
body {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
} 
```

# java - JSF 中的动态数据表问题

> ID：11600277
> 
> 赞同：0
> 
> 时间：2012-07-22T12:23:56.360
> 
> 标签：java, jsp, jsf, richfaces, rendering

我在java中遇到了动态数据表的问题。我正在一个简单的切换面板中创建多个动态数据表。生成数据表并正确显示在表单（jsp 页面）中。数据也填充在表中。当我单击表中的任何命令链接时，它会打开模式面板但不显示任何数据。当我再次刷新页面然后单击命令链接时，模式面板正在显示数据。

所以问题是第一次生成数据表并且我单击任何链接所需的数据永远不会在第一次按钮单击时出现在模态面板中。但是，如果我返回并再次返回同一页面，则模态面板中会出现所需的数据。请建议我解决这个问题。

通过比较第一次和第二次加载页面的视图源，我还注意到奇怪的事情，数据表名称第一次出现时没有表单名称，如 DATA_TABLE_NAME，第二次数据表名称出现表单名称，例如 formName:DATA_TABLE_NAME

我一直在复制数据表的日志两次。这是第一次：

```
17:04:14,327 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,327 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,327 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,327 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,327 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,327 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,343 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,343 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,343 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,343 WARN  [HtmlLabelRenderer] Attribute 'for' of label component with id scopeItemsForm:taskMoreInfoNonScopePanelForm:j_id_jsp_151042
17:04:14,343 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:j_id165 just got an automatic id, because there was no id assigned yet.
17:04:14,343 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:j_id166 just got an automatic id, because there was no id assigned yet.
17:04:14,343 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id167 just got an automatic id, because there was no id assigned yet
17:04:14,343 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id168 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id169 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id170 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id171 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id172 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id173 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id174 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id175 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id176 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id177 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id178 just got an automatic id, because there was no id assigned yet
17:04:14,358 WARN  [UIComponentBase] WARNING: Component ST_DATATBL_ID_0:j_id179 just got an automatic id, because there was no id assigned yet 
```

这是第二次

```
16:49:34,264 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id105 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,264 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id106 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,264 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id107 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,264 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id108 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,279 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id109 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,279 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id110 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,279 WARN  [HtmlImageRendererBase] ALT attribute is missing for : null
16:49:34,279 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id111 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,295 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id112 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,295 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id113 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,295 WARN  [HtmlImageRendererBase] ALT attribute is missing for : null
16:49:34,295 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id114 just got an automatic id, because there was no id assigned yet. If this compo
16:49:34,295 WARN  [UIComponentBase] WARNING: Component scopeItemsForm:ST_DATATBL_ID_0:j_id115 just got an automatic id, because there was no id assigned yet. If this compo 
```

第一次 HTML CODE 是这样的：

```
<table class="rich-table " id="ST_DATATBL_ID_0" border="0" cellpadding="0" cellspacing="0" width="100%">
<colgroup span="12"></colgroup>
<thead class="rich-table-thead">
<tr class="rich-table-header  ">
<th class="rich-table-headercell " id="ST_DATATBL_ID_0:j_id107" width="20"></th>
<th class="rich-table-headercell " id="ST_DATATBL_ID_0:j_id108" width="2"></th>
<th class="rich-table-headercell " id="ST_DATATBL_ID_0:j_id109">ITEM #<img alt="" class="rich-spacer " height="1" id="ST_DATATBL_ID_0:j_id110" src="/pgsportal/a4j/g/3_3_3.Finalimages/spacer.gif.jsf" width="10%" />
<a href="#" id="ST_DATATBL_ID_0:j_id111" name="ST_DATATBL_ID_0:j_id111" onclick="A4J.AJAX.Submit('scopeItemsForm',event,{'status':'notrequired','similarityGroupingId':'ST_DATATBL_ID_0:j_id111','parameters':{'ST_DATATBL_ID_0:j_id111':'ST_DATATBL_ID_0:j_id111'} ,'containerId':'j_id0'} );return false;"> 
```

第二次看起来像：

```
 <table class="rich-table " id="scopeItemsForm:ST_DATATBL_ID_0" border="0" cellpadding="0" cellspacing="0" width="100%">
    <colgroup span="12"></colgroup>
    <thead class="rich-table-thead"><tr class="rich-table-header  ">
    <th class="rich-table-headercell " id="scopeItemsForm:ST_DATATBL_ID_0:j_id107" width="20"></th><th class="rich-table-headercell " id="scopeItemsForm:ST_DATATBL_ID_0:j_id108" width="2"></th>
    <th class="rich-table-headercell " id="scopeItemsForm:ST_DATATBL_ID_0:j_id109">ITEM #
    <img alt="" class="rich-spacer " height="1" id="scopeItemsForm:ST_DATATBL_ID_0:j_id110" src="/pgsportal/a4j/g/3_3_3.Finalimages/spacer.gif.jsf" width="10%" />
    <a href="#" id="scopeItemsForm:ST_DATATBL_ID_0:j_id111" name="scopeItemsForm:ST_DATATBL_ID_0:j_id111" onclick="A4J.AJAX.Submit('scopeItemsForm',event,{'status':'notrequired','similarityGroupingId':'scopeItemsForm:ST_DATATBL_ID_0:j_id111','parameters':{'scopeItemsForm:ST_DATATBL_ID_0:j_id111':'scopeItemsForm:ST_DATATBL_ID_0:j_id111'} ,'containerId':'j_id0'} );return false;"><img src="../images/down_arrow.png" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:54:29.437

好像你的ID有问题。

创建标签时，您可以将`for`属性设置为指向具有相同 id 的输入：

```
<label for="someId">
    <input name="someInput" id="someId"/>
</label> 
```

由于您没有发布任何 HTML，因此很难准确地说出，但您可能有一个带有 empty 的标签`for`：

```
<label for=""> 
```

或`for`指向错误的ID：

```
<label for="someId">
    <input name="someInput" id="someOtherId"/>
</label> 
```

# javascript - twitter 引导 btn 加载

> ID：11600282
> 
> 赞同：0
> 
> 时间：2012-07-22T12:24:26.420
> 
> 标签：javascript, jquery, forms, twitter-bootstrap, validation

我有一个按钮：

```
<button type="submit" id="subscribe_button" class="btn btn-danger btn-large" data-loading-text="loading stuff...">Subscribe</button> 
```

我正在尝试通过表单验证脚本使此按钮处于“加载状态”：

```
submitHandler: function(form) {
                // do other stuff for a valid form
                $('#results').append('<img src="loading.gif">')
                $('#subscribe_button').button('loading')
                $.post('forms.php', $("#subscribe").serialize(), function(data) {
                    $('#results').html(data);
                    $(document).ready(function() {
                    $("#cg1").removeClass('success').removeClass('error')
                    $('#email').val('');
                });
    }); 
```

一切正常，直到我添加以下行：

```
$('#subscribe_button').button('loading') 
```

问题可能出在哪里？

# c++ - QTcpSocket 客户端自动重连

> ID：11600288
> 
> 赞同：9
> 
> 时间：2012-07-22T12:25:33.480
> 
> 标签：c++, qt, qtcpsocket

我正在尝试编写一段代码，它会定期尝试使用 QTcpSocket 连接到服务器，直到服务器启动并准备好。客户端还应该在服务器关闭时自动并定期尝试重新连接，直到它再次启动或用户手动关闭程序。

我所做的是订阅 QTcpSocket 的已连接和错误信号。当我捕捉到错误信号时，我基本上会再次调用 connectToHost 方法。

我的代码会定期尝试连接到主机，直到服务器准备好（这部分工作正常）。但是，问题是当服务器关闭时，它永远无法重新连接。当连接断开时，我按预期收到 RemoteHostClosedError 。但是，在同一方法中再次调用 connectToHost 方法（我在其中捕获 RemoteHostClosedError）后，我什么也没得到。甚至 QTcpSocket 对象也不会发出错误信号。

我在下面给出了我的代码。

```
TcpServerConnector::TcpServerConnector( SocketSettings socketSettings, QObject* parent)
: QObject(parent), socket(new QTcpSocket())
{
    this->connect(this->socket, SIGNAL(connected()), this, SLOT(connectionSuccess_Handler()), Qt::DirectConnection);
    this->connect(this->socket, SIGNAL(error(QAbstractSocket::SocketError)), this, SLOT(connectionError_Handler(QAbstractSocket::SocketError)), Qt::DirectConnection);
}

void TcpServerConnector::connectionError_Handler( QAbstractSocket::SocketError error )
{
    switch (error)
    {
    case QAbstractSocket::AddressInUseError:
        this->logger.log(LogLevel::ERR, "SOCKET ERROR: Address is already in use");
        break;
    case QAbstractSocket::ConnectionRefusedError:
        this->logger.log(LogLevel::ERR, "SOCKET ERROR: Connection refused");
        break;
    case QAbstractSocket::HostNotFoundError:
        this->logger.log(LogLevel::ERR, "SOCKET ERROR: Host not found");
        break;
    case QAbstractSocket::RemoteHostClosedError:
        this->logger.log(LogLevel::ERR, "SOCKET ERROR: Remote host closed");            
        break;  
    }

    this->socket->abort();
    this->socket->close();
    this->logger.log(LogLevel::DEBUG, "Reconnecting...");
    SystemUtil::sleepCurrentThread(1000);
    this->socket->connectToHost(ip_address, port);
} 
```

}

我在调用 connectToHost 方法之前和之后检查 QTcpSocket 的状态（我在这里给出的最后一行）。在调用 connectToHost 之前，状态为 UnconnectedState，在调用 connectToHost 之后，其状态变为 Connecting。没有什么意外。但是，它既不能连接到服务器，也不能发出错误信号。

任何的想法？

注意：QTcpSocket 的 connectToHost 方法是第一次在内部调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T18:18:41.200

对于可能遇到类似情况的人，QTcpSocket的reset方法解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T11:34:54.470

我遇到了这种情况，这是解决方案：

```
 connect(&tcpClient, SIGNAL(disconnected()), SLOT(ReconnectToHost()));

    void ReconnectToHost(){tcpClient.connectToHost(theServerAddress, port);} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-27T12:29:39.703

我遇到过这样的问题。我做错了什么是我试图`QTcpSocket::connectToHost()`从我班的一个插槽中连接到`QTcpSocket::error()`信号。最后我在这篇[文章](https://bugreports.qt.io/browse/QTBUG-18082?focusedCommentId=170619&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-170619)中找到了解决方案。

如果我没记错的话，问题是你不能从这个插槽中重新连接，因为在`QTcpSocket::error()`发出信号并且控制流从你的处理程序返回到`QTcpSocket`发出这个信号的 ' 方法之后，就会发生一些重要的事情，或者你以某种方式破坏套接字的逻辑。

不是一个优雅但仍然是一行代码的解决方案是在`QMetaObject::invokeMethod(m_socket, "connectToHost", Qt::QueuedConnection);` 您的`handle_socket_error()`插槽被调用后调用。

请注意，如果您调用`QMetaObject::invokeMethod`自定义方法，则必须将其注册为插槽。

UPD：真丢脸，但 Qt 的`QAbstractSocket::error()`信号[文档](http://doc.qt.io/qt-5/qabstractsocket.html#error-1)中提到了这个问题。

# javascript - 确定适合窗口内的页面上的滚动方向

> ID：11600290
> 
> 赞同：0
> 
> 时间：2012-07-22T12:25:43.137
> 
> 标签：javascript, scroll

我想在我的网站上实现一个向下滚动菜单。

在高于浏览器窗口高度的页面上，我可以测试滚动位置`window.pageYOffset`以确定菜单是否应该向下滚动。

但是，在比浏览器高度短的页面上，我不能使用相同的方法，因为`window.pageYOffset`总是`0`. 相反，我需要检测滚动的方向。这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:32:30.263

使用以下组合：

`window.pageYOffset`和`window.innerHeight`

您将能够计算出有多少菜单在视图中以及滚动的方式。

# linux - wget 附加唯一\定义的前缀

> ID：11600296
> 
> 赞同：0
> 
> 时间：2012-07-22T12:26:30.823
> 
> 标签：linux, bash, wget

我正在使用`wget`为了通过`--no-directories`switch 将单个 URL 下载到本地存储中。它运行顺利，尽管我希望在将每个 URL 下载到同一个目录（我不能有子目录）时对多个 URL 实现相同的效果。为了实现它，文件必须被唯一命名，同时保留到它们的链接（在 HTML、JS 等文件中）。

有可能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:33:54.707

命令行开关`-k`可以转换/重写链接，但它会保留目录层次结构。

因此，您需要做的是使用单个`wget`命令下载所有内容，以将路径转换为本地路径。在第二步中，您可以使用`find`获取所有文件名，然后重命名并编写一个`sed`脚本，用 HTML 文件中的新名称替换旧名称。

# ios - 如何使用 C API 测量内存中 SQLite 数据库的大小？

> ID：11600299
> 
> 赞同：1
> 
> 时间：2012-07-22T12:27:13.530
> 
> 标签：ios, database, sqlite, size, c-api

我正在对 iOS 中的内存中 SQLite db 进行压力测试。

过了一会儿，OCUnit 触发了这个错误。

```
otest(79450,0xad21a2c0) malloc: *** mmap(size=40267776) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug 
```

我认为这是达到内存限制。但我无法弄清楚我当前的数据库大小。我试过了，

```
sqlite3_status(SQLITE_STATUS_MEMORY_USED, &current, &peak, false); 
```

但这总是返回`0`for ，并且对于所有相同的更新都有`current`一些值。`peak`我阅读了[手动输入](http://www.sqlite.org/c3ref/c_status_malloc_count.html)，但它看起来不像 db size 功能。我想我挖错地方了。如何使用 C-API 获取数据库大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:33:38.447

根据您的评论和 mmap 错误，我认为您遇到了与我仍在苦苦挣扎的问题类似的问题 - 过度使用统一缓冲区缓存。我猜这里发生的是 sqlite 正在使用 mmap 文件来备份其“内存中”数据库。所以它的 mmap 内存，它使用统一的缓冲区缓存（即共享内存池），并且可能根本不使用太多 malloc 内存（这就是为什么你看不到大数字的原因）。

现在，随着 ubc 缓存变得越来越“脏”，iOS 开始被剥夺它可以在任何情况下使用的内存。因此，有时，sqlite 会尝试 mmap 更多内存，但是当系统查找空闲 ubc 页面时，并没有任何空闲页面。将块刷新到闪存文件系统需要很长时间。

使这个问题变得如此繁重的原因是，您在应用程序中几乎无法发现内存越来越少，因此您可以采取措施避免它。

我在“显示巨大下载的图像”开源项目中所做的是 sep 跟踪我的 ubc 使用情况，并且永远不会让它超过系统总内存的 50%。

在您的情况下，您可能会发现让 sqlite 基于文件更好，然后在继续之前保存并 F_FULLSYNC 文件（等待完成）。最后，我通过一个考虑高水位标记的串行调度队列来汇集我所有的图像工作。

# javascript - 通过 parentNode.removeChild 删除元素会引发 DOM 异常 8

> ID：11600301
> 
> 赞同：8
> 
> 时间：2012-07-22T12:27:33.563
> 
> 标签：javascript, dom, removechild, domexception

我的代码大致如下（我删除了一些部分，因为它们无关紧要）：

```
Library.focus = function(event) {
    var element, paragraph;

    element = event.srcElement;

    paragraph = document.createElement("p");
    paragraph.innerText = element.innerText;

    element.parentNode.insertBefore(paragraph, element);        // Line #1
    element.parentNode.removeChild(element);                    // Line #2
}; 
```

我遇到的问题是，我编号为第 2 行的最后一个调用抛出了这个：

```
Uncaught Error: NOT_FOUND_ERR: DOM Exception 8 
```

请注意，前一行 #1 工作正常，并在其之前插入段落节点。Element 是现有元素，element.parentNode 和 element.parentNode.removeChild 也都存在。

我觉得这不合逻辑，因为元素根据定义是其父节点的子节点。也许 StackOverflow 可以帮助我，在这里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T12:50:31.347

来自[mdn 文档](https://developer.mozilla.org/En/DOM/Node.removeChild)：

> 如果 child 实际上不是元素节点的子节点，则该方法将引发异常。如果在调用时 child 实际上是 element 的子项，但在尝试删除元素的过程中被调用的事件处理程序删除（例如，模糊），也会发生这种情况。

我可以在[jsfiddle中重现此错误](http://jsfiddle.net/rz3XM/1/)

基本上，您聚焦元素，触发删除，触发模糊，移动元素，使元素不再是父元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T00:21:32.573

如果您尝试在 onblur 处理程序中修改您尝试在另一个处理程序中删除的同一节点（例如 onfocus、keydown 等），那么第一次调用`removeChild`将在实际删除节点之前触发 onblur 处理程序。如果 onblur 处理程序随后修改节点以使其父节点发生更改，则控制将从 onblur 处理程序返回到`removeChild`onfocus 处理程序中的调用，然后该处理程序将尝试删除节点并失败并出现您描述的异常。

在调用 onfocus 处理程序之前检查孩子是否存在的任何数量`removeChild`都是徒劳的，因为这些检查将在触发 onblur 处理程序之前发生。

除了重新安排事件处理和节点修​​改之外，最好的办法可能是在 try catch 块中处理异常。

以下代码将显示 onblur 事件处理程序`removeChild`在 onfocus 实际移除子项之前如何运行。它也在[jsfiddle](http://jsfiddle.net/FBs4b/11/)

html

```
<div id="iParent">
    <input id="i">
</div> 
```

js

```
var input = document.querySelector("#i"),
inputParent = document.querySelector('#iParent');

input.onblur = function() {
    console.log('onblur : input ' + (input.parentNode ? 'has' : 'doesnt have') 
            + ' a parent BEFORE delete');
    try {
        inputParent.removeChild(input);
    } catch (err) {
        console.log('onblur : removeChild failed, input ' 
                + (input.parentNode ? 'has' : 'doesnt have') + ' a parent');
        return false;
    }
    console.log('onblur : child removed');
};

input.onfocus = function() {
    console.log('onfocus : input ' + (input.parentNode ? 'has' : 'doesnt have') 
            + ' a parent BEFORE delete');
    try {
        inputParent.removeChild(input);
    } catch (err) {
        console.log('onfocus : removeChild failed, input ' 
                + (input.parentNode ? 'has' : 'doesnt have') + ' a parent');
        return false;
    }
    console.log('onfocus : child removed');
};​ 
```

专注于输入字段后的控制台输出将是

```
onfocus : input has a parent BEFORE delete
onblur : input has a parent BEFORE delete
onblur : child removed
onfocus : removeChild failed, input doesnt have a parent 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T12:48:54.807

不要将事件作为 Library.focus 函数的参数传递。它会起作用的。

```
Library.focus = function() {
    var element, paragraph;

    element = event.srcElement;

    paragraph = document.createElement("p");
    paragraph.innerText = element.innerText;

    element.parentNode.insertBefore(paragraph, element);        // Line #1
    element.parentNode.removeChild(element);                    // Line #2
}; 
```

# mysql - 逗号分隔的 TEXT 字段上的 SQL QUERY

> ID：11600305
> 
> 赞同：1
> 
> 时间：2012-07-22T12:28:17.947
> 
> 标签：mysql, sql

我很抱歉标题不完整——我也需要在这个标题上指出正确的方向。我正在尝试编写一个查询来搜索包含逗号分隔文本字段中的字符串的记录。我使用 MySql 和 php。

记录示例：

```
recordID | statuses[TEXT]
1010     | 102
1011     | 100,103
1012     | 100,106,201,300 
```

我从另一个表status_dataset 中查询我想要搜索的雕像

```
statusName | statusCode | Yes/No
name1      | 100        |   
name2      | 101        |
name3      | 102        |  Yes
name3      | 103        |
name4      | 106        |  Yes 
```

现在我想查找包含雕像 102 或 106 的所有记录

我可以分两步解决这个问题，查询我想要的状态数据集，然后连接条件部分，所以我基本上得到下一个查询：

```
SELECT * FROM table AS t
WHERE t.statuses LIKE '%201%'
OR t.statuses LIKE '%206%' 
```

或者这个

```
SELECT * FROM table AS t 
WHERE FIND_IN_SET('201',t.statuses)
OR FIND_IN_SET('206',t.statuses) 
```

我会得到我想要的结果：

```
 recordID | statuses
    1010     | 102
    1012     | 100,106,201,300 
```

现在我想知道是否有更好的方法来解决这个问题。最好在一个查询中。或者在两个查询中，我将创建一个我想要搜索的值列表。我查看了 FIND_IN_SET(str,strlist) 函数，但问题是我需要多个 str。有没有我可以使用的函数，所以我可以用我想要搜索的多个值填充它？我一直在谷歌搜索，但恐怕我不知道如何正确提问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:21:36.627

我刚刚又看了你的帖子，你说的是“或”而不是“和”。以下查询查找您要查找的记录：

```
select distinct r.*
from records r join
     statuses_dataset d
     on concat(',', r.statuses, ',') like concat('%,', d.status, ',%') and
        d.use = 'Yes' 
```

我将 like 更改为在状态字符串之前和之后包含逗号。这允许查询搜索“,105”而不是“105”，以防止匹配“1050”等。

如果您改变主意并想要具有所有状态的记录，那么查询会稍微复杂一些。在这里，子查询*匹配*首先查找与代码匹配的所有记录。然后它计算匹配的数量并返回匹配所有单个代码的记录。

```
with matches as (select r.RecordId, count(distinct d.statuscode) as num_matches
                 from records r join
                      statuses_dataset d
                      on concat(',', r.statuses, ',') like concat('%,', d.status, ',%') and
                         d.use = 'Yes'
                 group by r.RecordId
                )
select r.*
from records r cross join
     (select count(distinct d.statuscode) as numyes
      from statuses_dataset
      where d.use = 'Yes'
     ) ssum join
     matches m
     on r.RecordId = m.Recordid and
        m.nummatches = ssum.numyes 
```

使用 count distinct 而不是 count(*) 只会处理状态表中的重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:40:49.793

我认为你最好规范化你的数据库模式（当还不算太晚的时候），并存储像这样`ID, recordID, status`的行，一个记录ID-状态关系的一行。这将使您可以通过简单（且更有效）的`WHERE status in (X, Y, Z)`子句过滤您的状态。不要忘记索引`recordID`和`status`字段。

通过一些一次性脚本运行，将当前数据集转换为标准化状态应该非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T12:41:03.807

尝试使用该`GROUP_CONCAT()`功能

```
SELECT recordID ,
       GROUP_CONCAT(statuses)
       FROM MyTable
       GROUP BY recordID ; 
```

# google-maps - Sencha Touch google maps 获取地址名称

> ID：11600310
> 
> 赞同：0
> 
> 时间：2012-07-22T12:28:46.287
> 
> 标签：google-maps, sencha-touch-2

我已经在我的 Sencha Touch 应用程序中实现了地图。我想获取位置名称或地址。这是否可以获取当前位置的地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:10:05.340

您可以使用 Google Maps API 获取该位置的地址：

```
 function codeLatLng(lat, lng) {
    var geocoder = new google.maps.Geocoder(),
        latlng   = new google.maps.LatLng(lat, lng);

    geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[0]) {
          console.log(results[0].formatted_address);
        } else {
          console.info("No results found");
        }
      } else {
        console.info("Geocoder failed due to: " + status);
      }
    });
  } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:43:47.353

值得一提的是，使用上面的好答案，您应该将其添加到您的 html 文件中。

```
<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
</script> 
```

在此处查看更多详细信息： [https ://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

您需要先将自己注册到 Google API。

# php - phpinfo 和 php -v 在 lion 上显示不同的版本

> ID：11600313
> 
> 赞同：9
> 
> 时间：2012-07-22T12:29:20.200
> 
> 标签：php, osx-lion, version

我尝试将我的 php 从 5.3.13 升级到 5.4.5 我已经手动下载了 php 5.4.5 和 ./configure 的源代码，然后 sudo make 安装它。

在那之后，我跑

```
php -v 
```

它显示 5.4.5，而我运行

```
<?php phpinfo(); ?> 
```

它显示 5.3.13。这里有什么问题以及如何解决它。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T13:03:18.453

这是一个有点猜测的答案，因为我没有 Mac，但根据我的 Winodws 经验，只有当你有 2 个 php 可执行文件并且你的 CLI 使用一个而 Apache 使用另一个时，才会发生这种情况。

在您的`phpinfo()`输出中查找 table row `Loaded Configuration File`。

我在 Windows 上，所以我说`C:\server\php\5.4.3\php.ini`，但你的当然会有所不同。

如果这不是您期望它使用的路径，那么您需要确保更改 Apache`httpd.conf`文件中的路径。

找到 httpd.conf 文件后，找到以下行：`PHPIniDir`

找到此行后，确保它指向 php.ini 文件的正确目录并重新启动 Apache。

我还要说检查该`LoadModule php5_module`行是否也指向正确的文件，但如果您之前使用的是 php 5.3，这可能会没问题。

这个答案确实假设您已经在不同的目录中安装了新的 php 版本，但这就是我根据您提供的信息所能想到的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-05T07:55:10.500

我想我只是来自同样的问题。我正在使用 OSX lion 并且在没有 brew 或 port 的情况下安装 PHP 只是使用机器附带的 PHP。

我需要将 mcrypt 模块安装到我正在使用的当前 php 中（当时我没有意识到我的机器上有 2 个版本的 PHP，并且忘记了我是如何安装它的），所以我安装了 homebrew 和之后使用 brew 安装 mcrypt。安装完成后打开浏览器，通过phpinfo()发现PHP版本和我安装mcrypt模块的版本不一样，无法使模块正常工作。

这是它在终端中显示的内容：

```
Windo-MBP:~ herwindoartono$ php --version
PHP 5.3.23 (cli) (built: May  4 2013 06:43:49) 
```

并从浏览器（本地 apache）打开一个包含`phpinfo();`显示 PHP **5.3.15 版本的 php 页面。**. 我不知道我的机器上的不同版本是如何结束的，所以我浏览并浏览解决方案并找到了一个：

**在 httpd.conf 中更改一行应该会更改我正在使用的 php 版本**

根据我的经验，这是更改要使用的 PHP 版本的方法：

*   编辑你的 httpd.conf，输入终端：`sudo subl /etc/apache2/httpd.conf`注意：`subl`是 sublime text 2，否则你可以使用`nano`.
*   找到行`LoadModule php5_module libexec/apache2/libphp5.so`，评论它
*   在该行下方添加：`LoadModule php5_module /usr/local/opt/php53/libexec/apache2/libphp5.so`，对于您的情况，只需将其更改`php53`为`php54`.
*   使用终端重启 apache：`sudo apachectl restart`
*   在浏览器中测试 phpinfo()，它出现了我打算使用的版本。

参考：[https ://github.com/josegonzalez/homebrew-php/issues/448](https://github.com/josegonzalez/homebrew-php/issues/448)

我在 PHP 方面没有太多经验，但我希望这可以解决您（或其他所有人）的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-02T04:13:32.840

我在 Ubuntu 14.04 中遇到了同样的问题，我做了以下事情：

1.  从根目录我寻找 php.ini

    `find / -name php.ini`

我有两个不同的文件，这意味着我安装了两个不同版本的 php，所以

2.  我删除了所有 php 版本

    `sudo apt-get -y purge php*`

3.  然后重新安装所需的 php 版本（在本例中为 5.6）

    `sudo apt-get install php5.6`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-18T11:09:09.233

我有一个类似的情况，它是由不同的 php 安装版本随着时间的推移和 linux 中未更新的搜索路径引起的。

通过调查`echo $PATH`。

输出例如：`/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin`

在我的情况下，旧版本 5.5.9 位于最新版本 5.5.22 之前引用的安装路径中。5.5.9 安装在`/usr/local/bin/`5.5.22 安装在`/usr/bin/`.

通过将正确的文件夹移动到错误的文件夹之前来适应它，或者更好地卸载旧的 php 版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-16T16:17:57.157

如果您在`ubuntu`并且您的网络服务器是`NGNIX`，并且您还使用`php-fpm`，您应该更改您的`ngnix`配置：

根据您的地址在`/etc/ngnix/sites-available`nano 中并更改`fpm`版本：

```
 location ~ \.php$ {
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
        fastcgi_index index.php; 
```

然后重启你的ngnix

```
$ sudo service nginx restart 
```

now check your php version with `phpinfo()` and `php -v` on cli.

# python - 如何为 Django 安装 Tastypie？

> ID：11600315
> 
> 赞同：1
> 
> 时间：2012-07-22T12:29:29.530
> 
> 标签：python, django, tastypie, django-apps

我按照[说明](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#installation)为 Django 安装 Tastypie，但我被困在第 2 步和第 3 步之间。我成功运行了“sudo pip install django-tastypie”但是，我不知道“tastypie”目录在哪里我应该用于符号链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:19:19.693

Tastypie 已经添加到你的 pythonpath 中。要检查，请在命令行中输入 python，然后输入 import tastepie。如果你没有看到错误，你很好。

只需将美味派添加到您安装的应用程序中并与 django 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:44:44.893

这取决于您的发行版和 Python 版本。您要查找的文件夹很可能位于`site-packages`您的 python 主文件夹下的子文件夹中。

要查看确切位置，请尝试运行：

```
python -m site 
```

有关更多详细信息，请尝试：

```
python -m site --help 
```

你只能`sys.path`通过运行获得：

```
python -c "import sys; print ('\n').join(sys.path)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:14:50.777

通过 pip 安装 sweetpie：

```
sudo pip install django-tastypie &&
sudo pip install djangorestframework 
```

将其添加到您安装的应用程序中：

```
INSTALLED_APPS = (
    'tastypie',
    'rest_framework',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.admindocs',
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-06T19:48:38.517

你可以运行`easy_install django-tastypie`，如果使用`virtualenv`.

# android - 非全屏活动

> ID：11600317
> 
> 赞同：2
> 
> 时间：2012-07-22T12:29:52.883
> 
> 标签：android, android-activity, fullscreen, touch-event

我想创建一个按钮，它将显示在所有应用程序的顶部。 [像这样的东西](https://lh3.ggpht.com/mbQb1IrEDepiZb6OaAHt6vqGG96U12uuC_PUp8cGUEK_SUWZxSEhFDuvdmJWkzD8Kg)

如您所见，左上角有一个按钮。它可以接收触摸事件，并且其他应用程序可以在其外部接收触摸事件。

我试图习惯`Theme.Translucent.NoTitleBar`我的活动，但没有帮助。我还将按钮的大小设置为 [100, 100] 但其后面的其他活动无法接收触摸事件。我认为问题出在活动的窗口中。它的大小并不等于活动的大小。请有任何帮助

**UPD**

解决了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:45:56.583

hatcyl[`Create a UI or a widget that sees on top of all Application in Android?`](https://stackoverflow.com/questions/11498366/create-a-ui-or-a-widget-that-sees-on-top-of-all-application-in-android)说：

> 如果您希望某些内容可以点击，您可以将其显示在除锁屏之外的任何内容之上。

您将使用`service`and`WindowManager`在每个应用程序上显示一个按钮。

# image - Drupal 7.14 图片上传不稳定

> ID：11600318
> 
> 赞同：1
> 
> 时间：2012-07-22T12:30:19.763
> 
> 标签：image, drupal, plupload

我正在 Drupal 7 中为摄影师设置一个站点，其中包括将大量照片上传到服务器。我的问题是图片上传非常不稳定。有时它起作用，有时它不起作用。似乎我达到了某种内存或带宽限制，但我没有收到任何错误。

我为相册创建了一个自定义内容类型，将每个类别（例如“肖像”、“婚礼”等）作为一个节点，其中包含我使用视图幻灯片显示的许多附加图像。一切都在前端工作。

图像上传由图像字段和媒体文件选择器小部件处理。问题是有时在上传过程中页面只会刷新并且图像不会显示在附加图像列表中。

我还尝试使用允许一次上传多个图像的 Plupload 小部件。有了这个，我的行为略有不同。这些图像将在两到三张图像之后“破裂”，这意味着它们显示为损坏的图像，部分图像丢失。有时刷新页面或清除所有 Drupal 缓存将允许我一次上传四张图像。

[看起来像这样](http://troelsthor.dk/filer/plup_broken.png)

奇怪的是，有时会上传相同的完全相同的图像文件，有时不会。

我没有上传巨大的图像。在上传之前，它们都被手动调整为小于 1600x1600 像素，文件大小在 200 到 600 KB 之间。

* * *

Drupal 7.14

下载库 1.5.4

Plupload 集成模块 7.x-1.0

上传小部件 7.x-1.0-alpha1

* * *

PHP 设置：

PHP 版本 5.3.10

最大上传大小：5M

内存限制：1024M（使用 settings.php 中的 ini_set() 从 128M 增加）

* * *

任何帮助将不胜感激！几天来我一直在谷歌搜索试图解决这个问题。

# php - 无法从函数中包含的文件访问 PDO

> ID：11600320
> 
> 赞同：0
> 
> 时间：2012-07-22T12:30:37.103
> 
> 标签：php, function, include, pdo

我有以下代码创建一个 PDO 对象，它位于 core.php 的末尾：

```
try {
    $dbh = new PDO("mysql:host=localhost;dbname=xxx", 'xxx', 'xxx');
} catch (PDOException $exc) {
    header(HTTP_500_HEADER);
    die('Database connection failure');
} 
```

在上面的目录中的 index.php 中，它包含很好，我可以访问它。我没有从函数访问 $dbh。

但是，当我尝试从这样的函数内部访问它时（这次它是不同目录中的不同文件）：

```
require_once '../_/core.php';
var_dump($dbh);

$show_html = true;
$rm = $_SERVER['REQUEST_METHOD'];

function login_check() {
    var_dump($dbh);
} 
```

第一个 var 转储显示它是一个 PDO 对象，但第二个显示它是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:32:59.023

这取决于[范围](http://uk.php.net/manual/en/language.variables.scope.php)。阅读 global 关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:33:06.317

如果要访问函数中的全局变量，则需要将其（此处`$dbh`）定义为函数内部的全局变量（另请参见[手册](http://php.net/manual/en/language.variables.scope.php)）：

```
function login_check() {
    global $dbh;
    var_dump($dbh);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T12:32:53.023

```
function login_check() {
    global $dbh;        
    var_dump($dbh);
} 
```

# javascript - jQuery函数调用不起作用

> ID：11600322
> 
> 赞同：1
> 
> 时间：2012-07-22T12:31:34.793
> 
> 标签：javascript, jquery

我正在尝试在 a 中添加和删除一个类`<span>`，但是尽管正在调用该函数，但 removeClass 却不起作用。

```
setInterval(changeClass,4000);

var spanId=1;

function changeClass(){
 $('#'+spanId).addClass("hilite");
 setTimeout(remove, 1000);
 spanId++;}  

function remove(){
 $('#'+spanId).removeClass("hilite");
  return true;
  } 
```

任何人都可以说出原因吗？

我怎么能用这样的while循环来做到这一点我尝试了所有的方法但不能让它工作

```
var spanSet=4;
var spanId=1;
while(spanSet > 0)
{
changeClass();
spanSet--;
}

function changeClass(){
$('#'+spanId).addClass("hilite");
setTimeout(remove, 3000);
}

function remove(){
$('#'+spanId).removeClass("hilite");
spanId++;
return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T12:34:07.037

`spanId`在超时完成之前递增，因此您试图从*下*一项而不是最后一项中删除该类。

避免这个问题的常用方法是使用闭包，但在这种情况下，移动`spanId++;`到`remove`函数的末尾会更简单。

关闭方法（在这种情况下我不建议这样做，因为与仅移动增量相比它过于复杂）可能如下所示：

```
setInterval(changeClass, 4000);
var spanId = 1;

function changeClass() {
    $('#' + spanId).addClass("hilite");
    setTimeout(
        remove(spanId), // CALL remove and pass spanId as an argument
        1000
    );
    spanId++;
}

function remove(spanId) {
    return function () { // RETURN a function from remove().
        // Note: This spanId is the local variable defined in the argument list
        //       not the one that exists in the wider scope
        $('#' + spanId).removeClass("hilite");
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T12:35:59.347

你应该这样说：

```
setInterval(changeClass, 4000);
var spanId = 1;

function changeClass() {
    $('#'+spanId).addClass("hilite");
    setTimeout(remove, 1000);
}  

function remove() {
    $('#'+spanId).removeClass("hilite");
    spanId++;  // <--
    return true;
} 
```

编辑：[由于 Quentin 建议使用 diff 工具，谢谢 Quentin]

我将 spanId++ 放在 remove 函数的末尾，以便在每次调用时都使用相同的 spanId 值调用 changeClass 和 remove 函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-22T12:36:12.327

```
function changeClass(){
 $('#'+spanId).addClass("hilite");
 setTimeout(remove, 1000);
 spanId++;} 
```

在此代码中，您应该`spanId++`在作为参数传递给 setTimeout 的回调函数中执行，因为 JS 在完成 setTimeout 语句之前不会停止执行。

所以你的代码应该是这样的：

```
function changeClass(){
 $('#'+spanId).addClass("hilite");
 setTimeout(remove, 1000);
}  

function remove(){
  $('#'+spanId).removeClass("hilite");
  spanId++;
  return true;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-22T12:40:47.817

这对我有用，也增加了一些超时控制。

```
changeClass();

function changeClass(){
    $("#container").addClass("box");
    console.log("changeClass()");
    clearTimeout(interval);
    interval = setTimeout(remove, 1000);
}

function remove(){
    $("#container").removeClass("box");
    console.log("remove()");
    clearTimeout(interval);
    interval = setInterval(changeClass,1000);
} 
```

# c# - TreeView 不执行 UI 虚拟化

> ID：11600323
> 
> 赞同：4
> 
> 时间：2012-07-22T12:31:47.847
> 
> 标签：c#, wpf, xaml, treeview, virtualization

我一直在检查 WPF 的 TreeView 控件的 UI 虚拟化功能，据我所知，它自 .NET 3.5 SP1 起就可用。

我做了一个简单的项目来确保 UI 虚拟化被正确执行，但发现它根本不起作用——所有项目都被检索到，而不仅仅是当前显示在屏幕上的项目。

我的 XAML 看起来像这样

```
<TreeView x:Name="myTree" Height="150" ItemsSource="{Binding Items}"
          VirtualizingStackPanel.IsVirtualizing="True"
          VirtualizingStackPanel.VirtualizationMode="Standard"
          ScrollViewer.IsDeferredScrollingEnabled="True" /> 
```

我的代码在后面

```
 public IEnumerable Items { get; set; }

    public MainWindow()
    {
        Items = GenerateList();
        this.DataContext = this;

        InitializeComponent();
    }

    private IEnumerable GenerateList()
    {
        MyList list = new MyList();

        for (int i = 0; i < 1000; i++)
        {
            list.Add("Item " + i);
        }

        return list;
    } 
```

请注意，这`MyList`是我自己的实现，`IList`它持有一个`ArrayList`并且仅将调用转发到所持有的`ArrayList`并写入调用了哪个方法/属性的控制台。例如：

```
public object this[int index]
{
    get
    {
        Debug.WriteLine(string.Format("get[{0}]", index));
        return _list[index];
    }
    set
    {
        Debug.WriteLine(string.Format("set[{0}]", index));
        _list[index] = value;
    }
} 
```

如果我将 TreeView 替换为 ListBox，UI 虚拟化将按预期工作 - 即仅请求约 20 个项目，而不是全部 1000 个。

我在这里做错了吗？

**编辑**

我也尝试按照建议将默认值替换`ItemsPanel`为`VirtualizingStackPanel`，但我得到了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:00:14.707

`ItemsPanelTemplate`TreeView 的默认设置是`StackPanel`，这不是`VirtualizingStackPanel`您在其中看不到虚拟化的原因。而对于 ListBox，默认 ItemsPanelTemplate 是 VirtualizingStackPanel，这就是设置`VirtualizingStackPanel.IsVirtualizing="True"`适用于 ListBox 的原因。

除了设置属性之外，要在 TreeView 上启用虚拟化`VirtualizingStackPanel.IsVirtualizing="True"`，您需要像这样覆盖其默认 itemsPanelTemplate -

```
<TreeView x:Name="myTree" Height="150" ItemsSource="{Binding Items}"
          VirtualizingStackPanel.IsVirtualizing="True"
          VirtualizingStackPanel.VirtualizationMode="Standard"
          VirtualizingStackPanel.CleanUpVirtualizedItem="myTree_CleanUpVirtualizedItem"
          ScrollViewer.IsDeferredScrollingEnabled="True">
    <TreeView.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel IsItemsHost="True" />                   
        </ItemsPanelTemplate>
    </TreeView.ItemsPanel>
</TreeView> 
```

# java - Hibernate：复合标识服务

> ID：11600324
> 
> 赞同：0
> 
> 时间：2012-07-22T12:31:49.310
> 
> 标签：java, spring, hibernate

我的实体：文章、类别。这是一个 n:m 关系。我想获取特定类别引用的文章数量。

这是我的实体：

```
@Entity
@Table( name = "tbl_articles" )
public class Article implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id
    @Column( nullable = false )
    @GeneratedValue( strategy = GenerationType.IDENTITY )
    private Integer id;

    @Column( nullable = false )
    private String title;

    @Column( nullable = false )
    private Date creationDate = new Date();

    @Lob
    @Type( type = "org.hibernate.type.StringClobType" )
    @Column( nullable = false )
    private String text;

    // Getter + setter
}

@Entity
@Table( name = "tbl_categories" )
public class Category implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id
    @Column( nullable = false )
    @GeneratedValue( strategy = GenerationType.IDENTITY )
    private Integer id;

    @Column( nullable = false )
    private String title;

    // Getter + setter
}

@Entity
@Table( name = "tbl_articles_categories" )
@AssociationOverrides({
    @AssociationOverride( name = "pk.article", joinColumns = @JoinColumn( name = "article_id" ) ),
    @AssociationOverride( name = "pk.category", joinColumns = @JoinColumn( name = "category_id" ) )
})
public class ArticleCategory
{
    @EmbeddedId
    private ArticleCategoryPK pk = new ArticleCategoryPK();

    public ArticleCategoryPK getPk() ...

    public void setPk( ArticleCategoryPK pk ) ...

    @Transient
    public Article getArticle()
    {
        return pk.getArticle();
    }

    public void setArticle( Article article )
    {
        pk.setArticle( article );
    }

    @Transient
    public Category getCategory()
    {
        return pk.getCategory();
    }

    public void setCategory( Category category )
    {
        pk.setCategory( category );
    }
} 
```

现在我有了文章和类别的存储库和服务层。我只会提供文章层来显示结构。

```
public abstract class BaseDAO<E>
{
    public abstract List<E> list( int offset, int limit );
    public abstract void delete( int id );
    public abstract void save( E entity );
    public abstract E get( int id );
    public abstract List<E> list();
    public abstract Integer size();
}

@Repository
public class ArticleDAO extends BaseDAO<Article>
{
    @Autowired
    private SessionFactory sessionFactory;

    @Override
    public void delete( int id )
    {
        Article article = get( id );

        if ( article != null )
        {
            sessionFactory.getCurrentSession().delete( article );
        }
    }

    @Override
    public void save( Article article )
    {
        sessionFactory.getCurrentSession().save( article );
    }

    @Override
    public Article get( int id )
    {
        return ( Article ) sessionFactory.getCurrentSession().load( Article.class, id );
    }

    @SuppressWarnings( "unchecked" ) // The type is determined by the HQL query but the interface returns an untyped list
    @Override
    public List<Article> list()
    {
        return sessionFactory.getCurrentSession().createQuery( "from Article" ).list();
    }

    @Override
    public Integer size()
    {
        Number ret = ( Number ) criteria.setProjection( Projections.rowCount() ).uniqueResult();
        return ret.intValue();
    }
}

public abstract class BaseService<E, D extends BaseDAO<E>>
{
    protected D dao;

    public BaseService()
    {
    }

    protected D getDao()
    {
        return dao;
    }

    @Autowired
    protected void setDAO( D dao )
    {
        this.dao = dao;
    }

    @Transactional
    public void delete( int id )
    {
        dao.delete( id );
    }

    @Transactional
    public void save( E entity )
    {
        dao.save( entity );
    }

    @Transactional
    public E get( int id )
    {
        return dao.get( id );
    }

    @Transactional
    public List<E> list()
    {
        return dao.list();
    }

    @Transactional
    public Integer size()
    {
        return dao.size();
    }
}

@Service
public class ArticleService extends BaseService<Article, ArticleDAO>
{
    public ArticleService()
    {
        setDAO( dao );
    }
} 
```

如何根据类别获取文章的大小？我是否需要为 ArticleCategory 创建另一个存储库/服务层对？它应该是什么样子，因为那时我得到：

```
No matching bean of type [com.example.model.ArticleCategoryDAO] found for
dependency: expected at least 1 bean which qualifies as autowire candidate for
this dependency. Dependency annotations: {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:39:03.677

您的异常与您的问题无关，而Hibernate，结束与Spring有关的一切。Spring 没有找到任何类型的 Spring bean `ArticleCategoryDAO`。您可能忘记用`@Repository`.

顺便说一句，您询问是否应该为 . 创建一个 DAO `ArticleCategory`，但错误消息显示您已经创建了一个。

附带问题：为什么不简单地在文章和类别之间创建一个多对多关联？`ArticleCategory`根本不需要实体。

# bash - 从文件中提取数据进行比较的更好方法

> ID：11600329
> 
> 赞同：0
> 
> 时间：2012-07-22T12:32:30.417
> 
> 标签：bash, sed, awk, diff

问题：比较特定参数的节点的预检查状态和后检查状态的文件。

在社区的一些帮助下，我编写了以下解决方案，该解决方案根据“节点 ID”（它恰好是唯一的，也将从文件中提取）从目录中的文件中提取信息。从 Pre/post 文件夹中提取数据后，我根据节点 ID 创建了文件夹并将文件转储到文件夹中。

我的代码来提取数据（数据是从 Pre 和 Post 文件夹中提取的）

```
FILES=$(find postcheck_logs -type f -name *.log)
for f in $FILES
do
    NODE=`cat $f | grep -m 1 ">" | awk '{print $1}' | sed 's/[>]//g'`  ##Generate the node-id
    echo "Extracting Post check information for " $NODE 
    mkdir temp/$NODE-post  ## create a temp directory
    cat $f | awk 'BEGIN { RS=$NODE"> "; } /^param1/ { foo=RS $0; } END { print foo ; }' > temp/$NODE-post/param1.txt ## extract data
    cat $f | awk 'BEGIN { RS=$NODE"> "; } /^param2/ { foo=RS $0; } END { print foo ; }' > temp/$NODE-post/param2.txt
    cat $f | awk 'BEGIN { RS=$NODE"> "; } /^param3/ { foo=RS $0; } END { print foo ; }' > temp/$NODE-post/param3.txt
done 
```

在此之后，我的结构如下：

```
/Node1-pre/param1.txt
/Node1-post/param1.txt 
```

等等。

现在我坚持比较`$NODE-pre`和`$NODE-post`归档，

我曾尝试使用递归 grep 来做到这一点，但我没有找到合适的方法来做到这一点。使用 diff 比较这些文件的最佳方法是什么？

此外，我发现上述数据提取程序非常慢。我相信这不是最好的方法（使用最少的资源）这样做。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:04:42.583

看看任何实例`cat one-file`——你可以在管道中的下一个命令上使用 I/O 重定向。

您可以通过以下方式更简单地完成整个操作：

```
for f in $(find postcheck_logs -type f -name *.log)
do
    NODE=$(sed '/>/{ s/ .*//; s/>//g; p; q; }' $f)  ##Generate the node-id
    echo "Extracting Post check information for $NODE" 
    mkdir temp/$NODE-post
    awk -v NODE="$NODE" -v DIR="temp/$NODE-post" \
        'BEGIN { RS=NODE"> " }
         /^param1/ { param1 = $0 }
         /^param2/ { param2 = $0 }
         /^param3/ { param3 = $0 }
         END {
             print RS param1 > DIR "/param1.txt"
             print RS param2 > DIR "/param2.txt"
             print RS param3 > DIR "/param3.txt"
             }' $f
done 
```

通过单个`sed`命令完成 NODE 查找过程要比 . 好得多`cat | grep | awk | sed`，您应该计划在`$(...)`任何地方使用反引号而不是反引号。

日志文件的主要处理应该做一次；一个`awk`命令就足够了。脚本被传递给变量——节点和目录名。BEGIN 被清理；之前的`$`节点可能不是您想要的。主要动作非常相似；每个都查找相关的参数名称并将其保存在适当的变量中。最后，它将保存的值写入相关文件，并用 RS 的值进行修饰。仅当一行中有多个语句时才需要分号；在这个扩展脚本中，每行只有一个语句。它看起来比原版大，但这只是因为我使用的是垂直空间。

* * *

至于比较前后文件，您可以通过多种方式进行比较，具体取决于您想知道的内容。如果你有一个 POSIX 兼容的`diff`（你可能有），你可以使用：

```
diff -r temp/$NODE-pre temp/$NODE-post 
```

报告两个目录内容之间的差异（如果有）。或者，您可以手动执行此操作：

```
for file in param1.txt param2.txt param3.txt
do
    if cmp -s temp/$NODE-pre/$file temp/$NODE-post/$file
    then : No difference
    else diff temp/$NODE-pre/$file temp/$NODE-post/$file
    fi
done 
```

显然，您可以将其包装在“for each node”循环中。而且，如果您需要这样做，那么您可能确实希望`find`在变量中捕获命令的输出（如在原始代码中），这样您就不必重复该操作。

# coq - 将参数应用于 Coq 中的相等函数

> ID：11600336
> 
> 赞同：0
> 
> 时间：2012-07-22T12:33:26.613
> 
> 标签：coq

假设我有两个函数`f`，`g`并且我知道`f = g`. 是否有一种向前推理的“功能应用”策略，可以让我为他们共同领域`f a = g a`中的一些人添加上下文？`a`在这个人为的示例中，我可以使用`assert (f a = g a)`后跟`f_equal`. 但我想在更复杂的情况下做这样的事情；例如，

```
Lemma fapp : forall (A B : Type) (P Q : A -> B) (a : A), 
               (fun (a : A) => P a) = (fun (a : A) => Q a) -> 
               P a = Q a. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:18:10.190

我对 Coq 或其策略没有太多经验，但为什么不直接使用辅助定理呢？

```
Theorem fapp': forall (t0 t1: Type) (f0 f1: t0 -> t1),
  f0 = f1 -> forall (x0: t0), f0 x0 = f1 x0.
Proof.
intros.
rewrite H.
trivial.
Qed.

Lemma fapp : forall (A B : Type) (P Q : A -> B) (a : A), 
               (fun (a : A) => P a) = (fun (a : A) => Q a) -> 
               P a = Q a.
Proof.
intros.
apply fapp' with (x0 := a) in H.
trivial.
Qed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T20:45:05.403

鉴于您的描述和示例，我认为我无法正确推断出您遇到的一般问题。

如果您已经知道`H : f = g`，您可以将它用于`rewrite H`任何您想展示和的东西`f`，`g`或者只是`elim H`一次重写所有内容。你不需要`assert`辅助定理，如果你这样做，你显然需要类似`assert`or的东西`pose proof`。

如果该相等性隐藏在某些 eta 扩展下方，例如在您的示例中，请删除该层，然后按上述方法进行操作。以下是两种（多种）可能的方法：

```
intros A B P Q a H. assert (P = Q) as H0 by apply H. rewrite H0; reflexivity. 
```

`assert`这通过设置相等性然后重写来解决您的示例证明。另一种可能性是定义 eta 减少助手（还没有找到预定义的）并使用它们。这将更加冗长，但可能适用于更复杂的情况。

如果你定义

```
Lemma eta_reduce : forall (A B : Type) (f : A -> B),
    (fun x => f x) = f.
  intros. reflexivity.
Defined.

Tactic Notation "eta" constr(f) "in" ident(H) :=
  pattern (fun x => f x) in H;
  rewrite -> eta_reduce in H. 
```

您可以执行以下操作：

```
intros A B P Q a H. eta P in H. eta Q in H. rewrite H; reflexivity. 
```

（这种表示法有点松散，可能会在错误的地方重写。不要依赖它，如果出现异常，请手动执行`pattern`and 。）`rewrite`

# c# - 无法从程序集中加载类型 System.Runtime.Versioning.TargetFrameWorkAttribute

> ID：11600337
> 
> 赞同：8
> 
> 时间：2012-07-22T12:33:34.040
> 
> 标签：c#, json, mono

我正在尝试编译一个使用`Newtonsoft.Json.dll`带有单声道的库的程序

编译命令

```
gmcs Program.cs etcetera.cs -r:Newtonsoft.Json.dll -r:Argotic.Core.dll 
```

结果：

```
Missing method .ctor in assembly Newtonsoft.Json.dll, type System.Runtime.Versioning.TargetFrameworkAttribute
Can't find custom attr constructor image: Newtonsoft.Json.dll mtoken: 0x0a000053 
```

然后当试图运行程序 ( `mono Program.exe`) 时，它会抛出错误：

```
Unhandled Exception: System.TypeLoadException: Could not load type 'System.Runtime.Versioning.TargetFrameworkAttribute' from assembly 'Newtonsoft.Json'.

  at my_program.CJSONStuff.serialize (System.Collections.Generic.Dictionary`2 obj) [0x00000] in <filename unknown>:0 

  at my_program.TheObjDB.getAllSerialized () [0x00000] in <filename unknown>:0 

  at my_program.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: Could not load type 'System.Runtime.Versioning.TargetFrameworkAttribute' from assembly 'Newtonsoft.Json'.

  at my_program.CJSONStuff.serialize (System.Collections.Generic.Dictionary`2 obj) [0x00000] in <filename unknown>:0 

  at my_program.TheObjDB.getAllSerialized () [0x00000] in <filename unknown>:0 

  at my_program.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

我以前从未使用过单声道，也不知道发生了什么.. 但这可能意味着 DLL 无法使用，因为它还没有使用单声道编译？如果是这样的话；这是否意味着我不能使用任何带有单声道的 3d 方 DLL，除非我也有源代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T12:38:29.553

因为默认单声道使用 v 2.0 运行时，但 nuget 使用的是 v4.0。它可以通过在单声道上定义运行时参数来解决：

```
mono --runtime=v4.0.30319 NuGet.exe 
```

来源： http: [//monomvc.wordpress.com/2012/03/06/nuget-on-mono/](http://monomvc.wordpress.com/2012/03/06/nuget-on-mono/)

# c++ - 我对 (3n+1) 的解决方案超过了 3 秒的时间限制

> ID：11600341
> 
> 赞同：1
> 
> 时间：2012-07-22T12:34:07.127
> 
> 标签：c++, time-limiting

在这里，我编写了一个关于 (3n+1) 问题的程序。这也是 UVa 的一个问题。我相信这是一个已知问题。但是当我要在该在线法官社区中提交它时，它会向我发送**Time Exceeding Error**。时间限制为 3 秒。我已经做了我的小知识可以做的事情。如果有人可以帮助我提供更多建议，我会很高兴。我的代码是：

```
#include <iostream>
#include<stdlib.h>
#include<stdio.h>
using namespace std;
int main()
{
    int loop=1;
    unsigned short *cyclelength;
    while(loop=1){
        unsigned int x,y,i,j,num,count=0,p,k,c,max;
        for(;;){
            cout<<"enter two integers. they must not be equal and must be between 1 and 1000000\n";
            while(!(cin>>i>>j)){
                cout<<"please enter a number\n";
                cin.clear();
                cin.ignore(1000,'\n');
            }
            if(i>=1 && i<1000000 && j>=1 && j<1000000  && i!=j){
                break;
            }
            else{
                printf("try the whole process again\n");
            }
        }
        if(i>j){
            x=i;
            y=j;
        }
        else{
            x=j;
            y=i;
        }/*making x always greater than y*/
        cyclelength=(unsigned short *)malloc(1000000 *sizeof(unsigned short));
        if (NULL==cyclelength){
            printf("process aborted");
            return 0;
        }
        else{
            /*solution part for the range of number. and solution for each number  put into cyclelength.*/
            num=y;
            while(num<=x){
                p=1;
                k=num;
                while(k!=1){
                    if(k%2==0)
                        k=k/2;
                    else
                        k=3*k+1;
                    p+=1;
                    }
                cyclelength[count]=p;
                num+=1;
                count+=1;
            }
            c=0;
            max=cyclelength[c];
            for(c=0;c<x-y-1;c+=1){
                if(max<cyclelength[c+1]){
                    max=cyclelength[c+1];
                }
            }
            free(cyclelength);
            cyclelength = NULL;
            cout<<i<<" "<<j<<" "<<max<<'\n';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:51:20.730

问题是当在线判断引擎完成提供输入时，您不允许程序结束。您需要检测到判断引擎已经完成输入，然后退出程序。

在他们的网站上有一个示例代码（C 语言）[Spoiler Alert：这实际上是 3n+1 问题的解决方案，可以](http://online-judge.uva.es/problemset/data/p100.c.html)解释这一点。请注意 Main 中的以下条件。

```
while (scanf("%d %d\n",&m,&n)==2){//perform logic} 
```

这将使程序仅在有要处理的输入时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:51:39.000

如果您的程序在您的 PC 上成功运行，但在您在任何在线法官社区提交时给出了超出时间限制的问题。可以肯定的是，您的算法不是最有效的。在线法官社区为任何程序设置了时间限制，这样平均水平较高的程序员只能设计他们的算法。尝试使您的编程算法最好，然后尝试将其带到任何在线法官社区。如果您正在使用任何类似`>=`或`<=`在您的程序中的测试，则运行您的程序需要花费太多时间。

# c# - 如果我在 Windows 窗体的 Form_Load 事件上抛出异常，怎么会没有任何反应？

> ID：11600342
> 
> 赞同：2
> 
> 时间：2012-07-22T12:34:13.777
> 
> 标签：c#, winforms, exception

在 Visual Studio 上，如果我创建一个新的 Windows 窗体并将以下内容放入 Form_Load 事件中：

```
throw new Exception(); 
```

什么都没发生。我可以在这里放一个断点，看到这行代码已经到了，但是好像没有抛出异常。如果我将相同的语句放入按钮的单击事件并单击该按钮，则程序会按我的预期崩溃。

这里发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:48:17.017

如果你在调试器之外运行它，它会被抛出。您需要配置调试器以中断未处理的异常。

```
Debug->Exceptions...
Common Language Runtime Exceptions
   System
      System.Exception    Click the "Thrown" checkbox. 
```

# django - 如何最好地管理 Django 模板和静态内容？

> ID：11600345
> 
> 赞同：3
> 
> 时间：2012-07-22T12:34:34.493
> 
> 标签：django, templates, static

所以，我和我的团队是 Django 开发的新手。在过去的几周里，我们一直在尝试设计我们的项目结构，并且我们做了很多阅读以尝试掌握这样做的最佳实践。

但是，我们仍在努力寻找存储所有应用程序通用的模板/静态文件的最佳方式。

让我详细介绍一下到目前为止我们已经实现的结构：

```
root-folder/
    app-1/
        static/
            app-1/
                css/
                js/
                img/
        templates/
            base.html
            base-app-1.html **extends base.html
    app-2/
        static/
            app-2/
                css
                js
                img
        templates/
            base.html **extends base.html at 'project-name' level
            base-app-2.html **extends base.html
    project-name/
        collectstatic/
        templates/
            base.html
    static/
        base/
            css
            js
            img 
```

这种结构让我感到困扰的一件事是我们的顶级模板位于“项目名称”级别。我希望看到这个文件夹与我们的根级静态文件夹处于同一级别。

但是，我不想将根级静态文件夹内容移动到“项目名称/收集静态”中，因为我不想让该文件夹中的文件受到版本控制。

我们意识到，在 Django 世界中，这个问题没有明确的答案。但是，我们在正确的路线上吗？我们是不是误会了什么？

我们有几个想法是：

1.  拥有一个专用于顶级模板和 htdocs 的应用程序，称为“通用”或“通用”。
2.  将“项目名称/模板”目录移动到我们的“静态”文件夹旁边的根级别。
3.  停止谈论这个问题并使用上面绘制的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:49:11.420

在 Django 中，最好依靠静态文件的`AppDirectoriesFinder`查找器和模板的“app_directories.Loader”加载器类来管理静态文件和模板。

这意味着您将拥有某种应用程序`project.core`，您将使用在整个项目中重用的基本模板和静态资源来填充这些应用程序。`project.base``project.commons`

我假设您对`project-name/collectstatic/`文件夹的问题是它是您定义的`STATIC_ROOT`，位于受版本控制的路径上。理想情况下，您会将静态和媒体根移到项目源之外。最简单的解决方案是将它移到项目的顶级包旁边，在用于分发 Python 包的标准项目布局中，或者移到 Web 服务器的预配置文档根目录中。

无论哪种方式，这都应该将本地生成的静态资源移到项目的 Python 包之外。

# perl - Perl 中的异步数据库和 LDAP

> ID：11600346
> 
> 赞同：1
> 
> 时间：2012-07-22T12:35:07.660
> 
> 标签：perl, asynchronous

我有一个现有的 Perl 应用程序，它在网络资源上受到大量 I/O 限制（与几个 MySQL 数据库、LDAP 等对话）。它每秒处理 100+ 的大量流量，并且随着它的扩展而逐渐变得难以管理...... 20 台服务器并且还在增加。

我希望使用异步方法对其进行重大重构，以提高资源使用率和处理速度。我坚信，如果一台机器可以轻松处理数十个数据库和 LDAP 目录的连接，那么整体性能将得到显着提升。

我的问题如下：

Perl 中有哪些好的框架（如果有的话）允许我从我的代码中获取 I/O 绑定任务并将它们外部化到工作进程而不显着改变现有的逻辑流？

我有在 Java 中使用 Akka 和 Play 框架的经验，如果我在 Java 中工作，这将是一个完美的解决方案——Akka 演员和 Promise<> / Await 逻辑将完全适合我正在尝试做的事情。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:21:21.847

[POE](http://poe.perl.org)是一个很棒的异步框架，但您可能必须对代码进行相当多的更改。我之前将它用于异步 HTTP Web 服务器，在你通过它的学习曲线之后，它非常有用。

[但是subs::parallel](http://search.cpan.org/~nilsonsfj/subs-parallel-0.08/lib/subs/parallel.pm)更容易使用。

# php - Ajax/Javascript 用户状态更新

> ID：11600347
> 
> 赞同：0
> 
> 时间：2012-07-22T12:35:14.527
> 
> 标签：php, javascript, jquery, html

我需要做的是在用户最新状态更新之前添加 newmsg 和用户 ID，而且我还需要添加我的评论切换链接、我的分隔符-postid div、我的用户图片和名称、我的删除按钮和我的喜欢和不喜欢按钮。所以我所拥有的就像 Twitter 和 facebook 所做的那样。-> 将表单数据发送到 ajax 并将所有内容打印到提要中。我的 profile.php 包含我需要包含的所有内容。

那么有没有一种方法可以在 Ajax 成功后调用这些 html 块并将它们显示在前面的 div 中？这真的很难解释，因为我不知道我在做什么，但希望你能明白。我只是不知道这一切。

简介.PHP

```
 $(document).ready(function(){
    $("form#myform").submit(function(event) {
    event.preventDefault();
    var content = $("#toid").val();
    var newmsg = $("#newmsg").val();
    $.ajax({
    type: "POST",
    cache: false,
    url: "insert.php",
    data: "toid=" + content + "&newmsg=" + newmsg, 
    success: function(){
    $("#myThing").prepend("<div class='userinfo'>"+newmsg+" </div>");
    }
    });
    });
    });
    </script>
    <div class="userinfo"><div id="divider">
    <div class="form">
    <form id="myform"  method="POST"  class="form_statusinput">
    <input type="hidden"  name="toid" id="toid" value="<?php echo $user1_id; ?>">
    <input class="input" name="newmsg" id="newmsg" placeholder="Say something" autocomplete="off">
    <div id="button_block">
    <input type="submit" id="button" value="Feed">
    </div>
    </form>
    </div></div></div></body>
    <p id="myThing"></p>

  COMMENT LINK

echo "<div class='stream_option'><a style='cursor:pointer;' id='commenttoggle_".$streamitem_data['streamitem_id']."' onclick=\"toggle_comments('comment_holder_".$streamitem_data['streamitem_id']."');clearTimeout(streamloop);swapcommentlabel(this.id);\"> Write a comment...</a></div>";
}else{
echo "<div class='stream_option'><a style='cursor:pointer;' id='commenttoggle_".$streamitem_data['streamitem_id']."' onclick=\"toggle_comments('comment_holder_".$streamitem_data['streamitem_id']."');clearTimeout(streamloop);swapcommentlabel(this.id);\"> Show Comments (".$num2.")</a></div>"; 
```

喜欢链接

```
cho "<div class='stream_option'><a id='likecontext_".$streamitem_data['streamitem_id']."' style='cursor:pointer;' onClick=\"likestatus(".$streamitem_data['streamitem_id'].",this.id);\">"; 
```

不喜欢链接

```
echo "<div class='stream_option'><a id='dislikecontext_".$streamitem_data['streamitem_id']."' style='cursor:pointer;' onClick=\"dislikestatus(".$streamitem_data['streamitem_id'].",this.id);\">"; 
```

删除链接

```
<? if($streamitem_data['streamitem_creator']==$_SESSION['id']){
echo "<div style='cursor:pointer;position:relative;top:-70px;float:right;padding-right:5px;' onclick=\"delete_('".$streamitem_data['streamitem_id']."');\">X</div>";} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:46:59.920

我猜这里：

```
success: function(){
  $("#myThing").prepend("<div class='userinfo'>"+newmsg+" </div>");
} 
```

您在哪里插入 HTML？如果是这种情况，并且 insert.php 返回 HTML，请尝试以下操作：

```
success: function(r){
  $("#myThing").prepend("<div class='userinfo'>"+newmsg+r.responseText+" </div>");
} 
```

* * *

要获取 ID：
我猜插入是用 mysql 完成的，所以在插入新消息后你会做：

```
$new_id = mysql_insert_id(); 
```

然后输出 HTML：

```
echo "<div class='stream_option'><a id='likecontext_".$new_id."' style='cursor:pointer;' onClick=\"likestatus(".$new_id.",this.id);\">";

echo "<div class='stream_option'><a id='dislikecontext_".$new_id."' style='cursor:pointer;' onClick=\"dislikestatus(".$new_id.",this.id);\">";

if ($new_id == $_SESSION['id'])
  echo "<div style='cursor:pointer;position:relative;top:-70px;float:right;padding-right:5px;' onclick=\"delete_('".$new_id."');\">X</div>"; 
```

# c# - 如何从 wpf 应用程序动态打开/关闭控制台窗口？

> ID：11600355
> 
> 赞同：16
> 
> 时间：2012-07-22T12:36:39.790
> 
> 标签：c#, wpf

我正在制作一个**WPF**应用程序，并且我想发布该应用程序的 beta 版本，为此我添加了一个`Button`名为“debug”，它本质上将**显示/隐藏控制台**窗口。每次事件发生后，我都会在控制台上写下适当的消息，这样这将帮助用户通过查看控制台上的消息来报告他们遇到的问题。

对不起背景故事（如果它没有帮助）。我基本上需要知道如何在 c# 中动态显示/隐藏控制台窗口。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-22T12:55:02.927

你认为现在我理解了这个问题吗？

```
[DllImport("Kernel32")]
public static extern void AllocConsole();

[DllImport("Kernel32")]
public static extern void FreeConsole();

private void button1_Click(object sender, EventArgs e)
{
    AllocConsole();
    Console.WriteLine("test");
} 
```

# java - 使用 PlayerCommandPreprocessEvent 和 java.lang.reflect

> ID：11600357
> 
> 赞同：-1
> 
> 时间：2012-07-22T12:37:13.363
> 
> 标签：java, reflection, bukkit

我目前正在使用`PlayerCommandPreprocessEvent`. 我使用这样的语法：

```
@EventHandler(priority = EventPriority.HIGHEST)
public void PlayerCommandPreprocess(PlayerCommandPreprocessEvent event){
    String cmd;
    String args;
    if(event.getMessage().indexOf(" ") == -1){
        cmd = event.getMessage().substring(1);
        args = "";
        getLogger().info(String.format("%s used '%s'",event.getPlayer().getDisplayName(), cmd));
    }else{
        cmd = event.getMessage().substring(0, event.getMessage().indexOf(" ")).substring(1);
        args = event.getMessage().substring(event.getMessage().indexOf(" ")+1);
        getLogger().info(String.format("%s used '%s' with args '%s'",event.getPlayer().getDisplayName(), cmd, args));
    }

    switch(cmd){
        case "serverinfo":
            event.getPlayer().sendMessage("This server is running some sort of new plugin that is not finished yet.");
            event.setCancelled(true);
            break;
        case "spawn":
            event.getPlayer().sendMessage("So you wanted to teleport to spawn to save time, right?");
            event.getPlayer().sendMessage("This will teach you, cheater!");
            event.getPlayer().addPotionEffect(new PotionEffect(PotionEffectType.POISON,1200,1));
            event.setCancelled(true);
            break;
        default:
            event.setCancelled(false);
            break;
    }
} 
```

我想在 class 中使用单独的方法`PlayerCommands`。由于这将是服务器上使用的唯一插件，我想捕获所有命令，评估它们是否具有`PlayerCommands.cmd_<cmdname>()`并调用它。

我知道这可以通过`java.lang.reflect`但现在我只是不知道如何在 Bukkit 服务器上实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:12:41.960

我只是用来`Class.forName()`遍历方法并注册它们。

# objective-c - 带有静态单元格的 UITableView - 每个部分的分隔颜色不同？

> ID：11600359
> 
> 赞同：1
> 
> 时间：2012-07-22T12:37:28.547
> 
> 标签：objective-c, ios, uitableview

我在 Storyboard 中完成了 4 个部分中带有静态单元格的 UITableView。但是，我想更改一个部分的分隔符颜色（[UIColor clearColor]）。我怎样才能做到这一点？？？真的有可能吗？

我可以将整个表格的 separatorColor 设置为 clearColor，但不仅限于一个特定的部分。

表格视图部分的屏幕截图：

![表格视图部分的屏幕截图](../Images/87273b7d9c5d8958d3afd62751079871.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:45:19.403

AFAIK没有办法做到这一点。但是您可以将背景图像放置在底部有分隔符的单元格中，并将 separatorstyle 设置为 UITableViewCellSeparatorStyleNone。因此，您在每个单元格中都有自己的分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:45:29.503

也许您可以通过将部分的标题文本设置为空字符串来实现您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:00:27.370

一种方法是创建您自己的`UIView`子类并在`drawRect:`. 您将采用此视图并将其添加为`backgroundView`您的表格视图单元格。像这样的东西：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];
    // Drawing code
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 1.0);

    // Draw black line
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGFloat components[] = {0.0, 0.0, 0.0, 0.3};
    CGColorRef blackColor = CGColorCreate(colorspace, components);

    CGContextSetStrokeColorWithColor(context, blackColor);

    CGContextMoveToPoint(context, 0, rect.size.height - 1.5);
    CGContextAddLineToPoint(context, rect.size.width, rect.size.height - 1.5);
    CGContextStrokePath(context);
    CGColorRelease(blackColor);

    // Draw white bottom line
    CGFloat whiteComponents[] = {1.0, 1.0, 1.0, 0.75f};
    CGColorRef whiteColor = CGColorCreate(colorspace, whiteComponents);

    CGContextSetStrokeColorWithColor(context, whiteColor);

    CGContextMoveToPoint(context, 0, rect.size.height - 0.5);
    CGContextAddLineToPoint(context, rect.size.width, rect.size.height - 0.5);
    CGContextStrokePath(context);
    CGColorRelease(whiteColor);

    // Draw top white line
    CGFloat whiteTransparentComponents[] = {1.0, 1.0, 1.0, 0.45};
    CGColorRef whiteTransparentColor = CGColorCreate(colorspace, whiteTransparentComponents);

    CGContextSetStrokeColorWithColor(context, whiteTransparentColor);

    CGContextMoveToPoint(context, 0, 0.5);
    CGContextAddLineToPoint(context, rect.size.width, 0.5);
    CGContextStrokePath(context);
    CGColorRelease(whiteTransparentColor);

    CGColorSpaceRelease(colorspace);
} 
```

# spring-mvc - Spring Security - 在拦截 url 访问失败后重定向到特定 url

> ID：11600363
> 
> 赞同：0
> 
> 时间：2012-07-22T12:38:34.493
> 
> 标签：spring-mvc, spring-security

我有这些规则来访问我的应用程序中的页面：

```
<http auto-config="true" use-expressions="true">
        <!-- NON AUTHENTICATION PAGES -->
        <intercept-url pattern="/" access="permitAll" />
        <intercept-url pattern="/about" access="permitAll" />       

        <!-- LOGIN FILTER -->
        <intercept-url pattern="/login" access="!isAuthenticated()" />
        <intercept-url pattern="/j_spring_security_check" access="!isAuthenticated()" />
        <intercept-url pattern="/logout" access="!isAuthenticated()" />

        <!-- RESOURCES AND OTHER URLs FILTER -->
        <intercept-url pattern="/resources/**" access="permitAll" />
        <intercept-url pattern="/**" access="isAuthenticated()" />

        <!-- FORM LOGIN -->
        <form-login login-page="/login" default-target-url="/upload" authentication-failure-url="/loginfailed"  />
        <logout logout-success-url="/logout" />
    </http> 
```

我需要的是在访问失败时重定向到某个 url（例如 /access-denied）并在控制器中处理此事件。

```
@RequestMapping(value = "/access-denied", method = RequestMethod.GET)
    public String accessDenied(Model model, RedirectAttributes ra) {

    // do what I want

    return "redirect:login";
} 
```

例如，用户输入 /upload 并且他没有登录，因此它将被重定向到 /access-denied。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:16:56.473

这可能有助于解释为什么您需要自己进行重定向，因为 Spring Security 会自动执行此操作。当访问被拒绝时，未经身份验证的用户的默认行为是将他们重定向到登录页面（这似乎是您想要做的）。

如果您想自定义流程，使用的策略`AuthenticationEntryPoint`可能是实现它比使用控制器更有意义。我在[之前的回答](https://stackoverflow.com/a/4729554/241990)中已经写了更多关于这个的内容。

如果您只想插入一些额外的功能，您可以扩展[LoginUrlAuthenticationEntryPoint](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/authentication/LoginUrlAuthenticationEntryPoint.java)并覆盖该`commence`方法，调用超类来执行重定向。

请注意，这意味着`login-page`不会使用命名空间元素中的值。您需要在构造函数中为`LoginUrlAuthenticationEntryPoint`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T13:05:45.743

注意后面代码中的`access-denied-page`属性`security-http`。

```
<security:global-method-security
            pre-post-annotations="enabled" />
    <security:http auto-config="false" use-expressions="true"
            disable-url-rewriting="true" entry-point-ref="loginUrlAuthenticationEntryPoint"
            access-denied-page="/access-denied">
        <security:intercept-url pattern="/someurl"
                access="isAuthenticated()" />
</security:http> 
```

# java - Python 在 Android 上的局限性是什么？

> ID：11600364
> 
> 赞同：28
> 
> 时间：2012-07-22T12:38:47.607
> 
> 标签：java, android, python, sl4a

我正准备开始一点 Android 开发，需要选择一种语言。我知道 Python，但必须学习 Java。我想从你们这些在 Android 上使用 Python 的人那里知道有什么限制。另外，Java有什么好处吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-05T22:11:42.197

Andrew 所提到的大部分观点，我只想提一下，python 可以并且被用于在 GooglePlay 甚至 iOS 上发布的成熟应用程序。我不能代表其他框架，但这里有一些使用 Kivy 发布的应用程序示例。

1.  工艺流程[Google Play](https://play.google.com/store/apps/details?id=com.showgen.processcraft&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5zaG93Z2VuLnByb2Nlc3NjcmFmdCJd) [iOS](http://itunes.apple.com/us/app/processcraft/id526377075?mt=8)
2.  [幻想战锤](https://play.google.com/store/apps/details?id=clockwork.craig.fantasymathhammer&hl=en)
3.  [PreseMT 是一个多点触控演示制造商](https://play.google.com/store/apps/details?id=org.kivy.presemt&feature=search_result)
4.  [备忘录机器人](https://play.google.com/store/apps/details?id=com.revolunet.memorobots&feature=search_result)
5.  [地面真相](https://play.google.com/store/apps/details?id=net.ardoe.hakan.groundtruth&feature=search_result#?t=W251bGwsMSwxLDEsIm5ldC5hcmRvZS5oYWthbi5ncm91bmR0cnV0aCJd)
6.  [万花筒](https://play.google.com/store/apps/details?id=org.erasme.kaleidoscope#?t=W251bGwsMSwyLDIxMiwib3JnLmVyYXNtZS5rYWxlaWRvc2NvcGUiXQ..)
7.  [来自 Kivy 项目的展示示例](https://play.google.com/store/apps/details?id=org.kivy.showcase&feature=search_result)
8.  DefelectTouch 游戏[iOS](http://itunes.apple.com/us/app/deflectouch/id505729681)
9.  [巴格尼乌斯](http://fresklabs.com/projects/bargenius)和更多...

在包装上，我们试图使其尽可能简单，我们还提供

*   一个预构建的[虚拟机](https://groups.google.com/forum/?fromgroups#!topic/python-android/UbFDWXhGtZI)，可以用来制作你的 apk，除了复制你的项目目录并运行一个命令之外，你什么都不用做。

在 GUI 上，是的，用户界面是自定义的，默认情况下（尝试匹配 Android 的 Holo 主题）。然而，它可以定制为类似于其他外观和感觉，虽然我没有亲自尝试过。

哦，只要有人在谈论 android 上基于 python 的应用程序，我发现 stackoverflow [PyMob](http://pyzia.com/technology.html)上提到了这个项目，他们的[应用程序](http://pyzia.com/apps.html)页面提到了一些有趣的应用程序。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-22T16:51:39.283

我最近出于类似的原因对此进行了调查。我的结论是，我不能使用 Python 来开发一个看起来像原生的应用程序，而这正是我当时想要的。具体来说：

*   Python 无法接收来自 Java UI 类的回调，因此您不能使用任何原生 Java UI 元素，例如 ListView 等。只有对话框等易于使用。如果你有一个完全自定义的 UI，比如游戏，你可以试试[PyGame for Android](http://pygame.renpy.org/)，或者你可以看看[Kivy](http://kivy.org/)，它也使用 PyGame。

*   Python 应用程序的打包非常困难，特别是因为默认情况下 Android 不包含 Python 解释器。Kivy 和 PyGame 团队在这方面取得了一些间歇性的进展。

*   由于上述问题，Python 基本上从未用于在应用商店中发布完整的应用程序，因此有关如何使用 SL4A（Android 脚本层）处理许多杂乱问题的文献非常少。

所以，如果你想制作一个使用原生 UI 元素的应用程序，你可以在 Play 商店中实际分发，或者两者兼而有之，遗憾的是，Python 不是一个选择。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T09:45:40.577

我在市场上开发了 Android 应用程序，用 Python 编码。缺点：

1.  到目前为止，我的用户还必须下载解释器，但会立即提示他们这样做。（更新：见下面的评论。）
2.  该脚本没有正确退出，因此我包含一个 webView 页面，如果出现此问题，该页面会要求他们转到：设置：应用程序：强制关闭。

# cocoa - 如何在基于视图的 NSTableView 中禁用选择中的白色文本颜色？

> ID：11600368
> 
> 赞同：10
> 
> 时间：2012-07-22T12:39:08.840
> 
> 标签：cocoa, nstableview

我正在使用基于视图的表格视图，并且不希望它在选择时使用白色文本颜色绘制 NSTextFields。我无法找到可行的解决方案。因此，非常感谢任何帮助。

这是我的问题：

![在此处输入图像描述](../Images/011bf8f9edbe868e143dd49a2ab78b42.png)

我希望“选择为白色”文本也以默认文本颜色绘制。

到目前为止，我发现

*   设置属性`tableView:viewForTableColumn:item:`并没有真正帮助
*   将`NSTextField`颜色设置为自定义颜色，这与控件默认颜色不同，将阻止以白色绘制，但仍会丢失字体样式（粗体、斜体等）。
*   设置`NSTableView`的`selectionHighlightStyle`属性`NSTableViewSelectionHighlightStyleNone`做的伎俩，但它不会重绘`NSTableRowView`。选择风格也不是我想要的。我希望第一次单击以选择行，第二次单击以编辑文本字段。当您使用`NSTableViewSelectionHighlightStyleNone`您的第一次单击开始编辑文本字段。
*   如果 NSTextField 有边框，文本颜色不会改变。但我不想要有边框的文本字段（如屏幕截图所示。文本字段是可编辑的）

我无法弄清楚文本字段“如何”获得白色。I have overridden `setTextColor:`and realized that it is never called when selection is changed. 所以我猜想 NSAttributedString 是在 NSTableView 绘图/选择例程内的某个地方构建的。

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T23:56:21.877

我找到了答案。我不得不继承`NSTableCellView`和覆盖`setBackgroundStyle:`. 就这样！

```
- (void)setBackgroundStyle:(NSBackgroundStyle)backgroundStyle {
  [super setBackgroundStyle: NSBackgroundStyleLight];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T09:32:44.210

而不是覆盖`NSTableCellView`'s `backgroundStyle`，我发现覆盖它更方便。这实际上是在选择期间默认更改单元格视图背景样式的方法。`viewWillDraw()``NSTableRowView`

您可以通过以下方式禁用此行为：

```
class TableViewDelegate: NSObject, NSTableViewDelegate {
    func tableView(tableView: NSTableView, rowViewForRow row: Int) -> NSTableRowView? {
        return TableRowView(frame: NSRect.zero)
    }
}

class TableRowView : NSTableRowView {
    private override func viewWillDraw() {
        // By do nothing we prevent the super method to be called. It would otherwise change the selected cell view's backgroundStyle property.
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T03:51:58.940

我在表格视图委托的 -tableView:willDisplayCell:forTableColumn:row: 方法中设置单元格颜色。

```
-(void)tableView:(NSTableView *)tableView willDisplayCell:(id)cell 
   forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
   if(tableView==<table view id of interest>)
      {
      ...
      [cell setTextColor:<colour appropriate for this cell>];
      ...
      }
   ...
} 
```

这不会影响字体大小或样式。

# android - onListItemClick 一键停止工作

> ID：11600371
> 
> 赞同：1
> 
> 时间：2012-07-22T12:39:34.433
> 
> 标签：android, listview, view, onclick

**最后编辑** 我在这里找到了解决方案的问题：[http ://code.google.com/p/android/issues/detail?id=3414#c27](http://code.google.com/p/android/issues/detail?id=3414#c27)

**原始** 帖子我有一个 ListView（实际上是 ListFragment），当我单击它时我想在其中展开一个对象，并在第二次单击时再次折叠它。

这是我的 onListItemClick

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    //mAdapter.toggleItem(id); // removed this

    ListView list = getListView();
    int start = list.getFirstVisiblePosition();
    for (int i = start, j = list.getLastVisiblePosition(); i <= j; i++) {
        Cursor item = (Cursor) list.getItemAtPosition(i);
        if (id == item.getLong(item.getColumnIndex(ItemColumns._ID))) {
            View view = list.getChildAt(i - start);
            ViewStub stub = (ViewStub) view.findViewById(R.id.stub);
            // View inflated;
            if (stub.getVisibility() == View.VISIBLE)
                stub.setVisibility(View.GONE);
            else
                stub.inflate();
            // list.getAdapter().getView(i, view, list);
            // break;
        }
    }

} 
```

它有效，但只触发一次。一旦 ListItem 展开，onListItemClick 将不会再次被触发。知道为什么吗？

最好的

马库斯

**编辑：**这是实际的行： stub.inflate(); 禁用点击事件

**EDIT2：**我发现问题是由于 ViewStub

它看起来像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#CC0000"
    android:orientation="vertical">

    <SeekBar android:id="@+id/progress"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

LinearLayout 不会影响原始 listItem。但是，如果我删除搜索栏，它会很好用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T07:13:03.273

如果您的列表视图包含可以窃取焦点的控件（在您的情况下为 Seekbar），则只需使其不可聚焦

```
<SeekBar
        android:focusable="false" /> 
```

# maven - 使用配置文件从属性文件中读取 Maven 变量

> ID：11600372
> 
> 赞同：1
> 
> 时间：2012-07-22T12:39:35.460
> 
> 标签：maven, configure

我想从属性文件中读取一个用于配置构建插件的 Maven 变量。在其他项目文件（例如上下文文件）中不需要它。

1）制作了一个配置文件（它有效，可以使用 mvn ... -P private）

```
<profile>
 <id>private</id>
  <properties>
   <env>private</env>
  </properties>
</profile> 
```

2) 使用此内容创建过滤器文件（有效） foo.path=/home/foo/path

3）尝试配置插件（不起作用）

```
<build>
 <plugin>
   <groupId>org.codehaus.mojo</groupId>
    <artifactId>foo-plugin</artifactId>
    <version>${foo-plugin.version}</version>
    <configuration>
     <!--<fooPath>home/foo/path></fooPath> that works -->
     <fooPath>${foo.path}</fooPath> <!--works not -->
    </configuration>
...
</build> 
```

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:37:49.013

当 Maven 文档提到“过滤文件”时，它们通常表示处理资源时使用的文件（即将资源从 复制`/src/main/resources`到`target/classes`）。据我所知，这些文件中的属性不用于开箱即用的插件配置。我已经使用 Codehaus [properties-maven-plugin:read-project-properties](http://mojo.codehaus.org/properties-maven-plugin/read-project-properties-mojo.html)目标做你正在尝试的事情。确保在任何需要配置属性的插件之前将目标绑定到生命周期。

另外，请参阅[此答案](https://stackoverflow.com/a/10686445/944849)；您可以加载用于配置其他插件的属性，但不能用于配置核心 Maven 项目元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:42:47.050

您的属性名称是“env”，但您没有在配置中的任何地方使用 env。

# python - 如何为 app.yaml 中定义的静态路由编写测试？

> ID：11600374
> 
> 赞同：1
> 
> 时间：2012-07-22T12:39:49.273
> 
> 标签：python, unit-testing, google-app-engine

我的 Google App Engine 应用程序中使用了很多静态文件（CSS、robots.txt 等）。它们都在 app.yaml 中定义。

我想要一些自动化测试来检查 app.yaml 中的那些定义是否有效，并且我的最新更改没有阻止任何事情。例如，检查特定的 URL 是否返回正确的响应。理想情况下，它应该是我的应用单元测试的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:45:37.280

我有一个用于登台环境的部署后脚本，它只是在 URL 上卷曲以验证它们都在那里。如果此脚本通过（除其他外），我将从登台部署到生产。

# c++ - 可移植代码 - 每个字符的位数

> ID：11600378
> 
> 赞同：31
> 
> 时间：2012-07-22T12:41:02.320
> 
> 标签：c++, c, char, bits

我知道 C/C++ 标准只保证每个字符*至少*8 位，理论上 9/16/42/其他任何东西都是可能的，因此所有关于编写可移植代码的网站都警告不要假设 8bpc。我的问题是这到底有多“不可移植”？

让我解释。在我看来，系统分为 3 类：

1.  **计算机**——我的意思是台式机、笔记本电脑、服务器等，运行 Mac/Linux/Windows/Unix/*nix/posix/whatever（我知道这个列表并不完全正确，但你明白了）。如果听到任何`char`不*完全是*8 位的系统，我会感到非常惊讶。（如果我错了请纠正我）
2.  **带有操作系统的设备**- 这包括智能手机和此类嵌入式系统。虽然我不会很惊讶发现这样一个`char`超过 8 位的系统，但迄今为止我还没有听说过一个（再次，如果我不知道，请告诉我）
3.  **裸机设备**——录像机、微波炉、旧手机等。在这个领域我没有半点经验，所以在这里什么都有可能发生。但是，我真的需要我的代码在我的 Windows 桌面和微波炉之间跨平台吗？我有可能拥有两者共同的代码吗？

底线：是否有不是 8 位的常见（超过 %0.001）平台（在上面的类别 1 和 2`char`中*）*？我的上述猜测是真的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-22T12:53:21.813

使用限制.h

CHAR_BIT

[http://www.cplusplus.com/reference/clibrary/climits/](http://www.cplusplus.com/reference/clibrary/climits/)

此外，当您想使用给定的大小时，请使用 stdint.h

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T12:56:00.530

例如，许多[DSP](http://en.wikipedia.org/wiki/Digital_signal_processor)都`CHAR_BIT`大于或等于 16。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-22T12:45:43.393

至少，类似于 64 位架构中的整数大小，未来的平台可能会使用更宽的 char，具有更多位。ASCII 字符可能会过时，取而代之的是 unicode。这可能是一个原因，所以要小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T17:38:28.963

您通常可以安全地假设文件将具有 8 位字节，或者如果没有，则可以通过常用工具将 8 位字节文件转换为零填充的本机格式。但假设 CHAR_BIT == 8 会更加危险。目前几乎总是如此，但未来可能并非总是如此。对内存的 8 位访问越来越成为一个瓶颈。

# r - 在R中结合头部和尾部方法

> ID：11600391
> 
> 赞同：4
> 
> 时间：2012-07-22T12:43:13.940
> 
> 标签：r, dataframe, tail, head, cat

我在 R package utils 中经常使用 head(d) 和 tail(d) 方法——经常一个接一个。所以我为这两个函数写了一个简单的包装器：

```
 ht <- function(d, m=5, n=m){
      # print the head and tail together
      cat(" head -->  ", head(d,m), "\n", "--------", "\n", "tail -->  ", tail(d,n), "\n")
    } 
```

我得到了一些意想不到的结果。有人可以帮我理解为什么吗？（所以我可以修复它或至少了解您的解决方案！）。

一些背景...

数值工作正常：

```
x <- 1:100
ht(x) 
```

复杂的也是如此：

```
ni <- as.complex(1:100)
ht(ni) 
```

和字符：

```
ll <- letters[1:26]
ht(ll) 
```

矩阵失去了它的结构，返回 [1,1] 到 [5,5] + [16,1] 到 [20,5] 但作为两个向量 - 比较：

```
m <- matrix(1:10, 20)
ht(m) 
```

到：

```
head(m, 5)
tail(m,5) 
```

我想像 utils 方法一样保留矩阵结构 - 这可能吗？

最后（好吧，可能有更多的错误，这正是我要做的）data.frames 是一团糟：

```
df <- data.frame(num=x[1:26], char=ll)
ht(df) 
```

这会产生以下错误：

```
head -->   Error in cat(list(...), file, sep, fill, labels, append) :   
  argument 2 (type 'list') cannot be handled by 'cat' 
```

到目前为止的步骤：

由于 utils 方法在按位完成时保持矩阵整洁，因此我尝试通过以下编辑解决问题：

```
function(d, m=5, n=m){
  # print the head and tail together
  rb <- rbind(head(d, m), tail(d,n))
  if (class(d) == 'matrix'){
    len <- nrow(rb)
    cat(" head -->  ", rb[(1:m),], "\n", "--------", "\n", "tail -->  ", rb[((len-n):len),], "\n")
  }
  else cat(" head -->  ", rb[1,], "\n", "--------", "\n", "tail -->  ", rb[2,], "\n")
} 
```

这似乎没有对矩阵做任何事情，并且在我使用时仍然会出现相同的错误：

```
ht(df) 
```

我从错误中猜测 cat() 这里存在一些问题，但我无法弄清楚它是什么或如何解决它。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T12:51:11.317

为什么不修改你的函数来输出一个列表呢？

```
ht <- function(d, m=5, n=m){
  # print the head and tail together
  list(HEAD = head(d,m), TAIL = tail(d,n))
} 
```

这是您的`matrix`and的输出`data.frame`：

```
ht(matrix(1:10, 20))
# $HEAD
#      [,1]
# [1,]    1
# [2,]    2
# [3,]    3
# [4,]    4
# [5,]    5
# 
# $TAIL
#       [,1]
# [16,]    6
# [17,]    7
# [18,]    8
# [19,]    9
# [20,]   10

ht(data.frame(num=x[1:26], char=ll))
# $HEAD
#   num char
# 1   1    a
# 2   2    b
# 3   3    c
# 4   4    d
# 5   5    e
# 
# $TAIL
#    num char
# 22  22    v
# 23  23    w
# 24  24    x
# 25  25    y
# 26  26    z 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T14:36:22.503

有人建议我把我的评论变成答案。

在您的 R 控制台中，当您键入 时`head(m, 5)`，您看到的打印在屏幕上的内容实际上是`print(head(m, 5))`. 因此，如果这是您希望输出的样子，请考虑使用该`print`函数，而不是`cat`在显示对象的`head`and`tail`时：

```
ht <- function(d, m=5, n=m) {
  # print the head and tail together
  cat("head -->\n")
  print(head(d,m))
  cat("--------\n")
  cat("tail -->\n")
  print(tail(d,n))
}

m <- matrix(1:10, 20)
ht(m)
# head -->
#      [,1]
# [1,]    1
# [2,]    2
# [3,]    3
# [4,]    4
# [5,]    5
# --------
# tail -->
#       [,1]
# [16,]    6
# [17,]    7
# [18,]    8
# [19,]    9
# [20,]   10 
```

我发现@mrdwab 的答案是一个非常优雅的解决方案。它没有明确使用`print`，而是返回一个列表。但是，当他的函数从 R 控制台调用并且输出没有分配给任何东西时，它会被打印到控制台（因此`print`被隐式使用）。我希望这可以帮助您了解正在发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-15T18:34:22.157

如果您已经在使用这些`tidyverse`原则进行编码并使用`%>%`(pipe) 运算符，那么实际上很容易只使用一条线：

```
library(magrittr)

your_dataframe %>% {
rbind(head(., 8), tail(., 8)
} %>% 
nrow()

# [1] 16 
```

这基本上用于`rbind`合并. 用于调用 lambda 表达式（更多信息[在这里](https://magrittr.tidyverse.org/reference/pipe.html)）。和里面的意思是“标准输入”（）。`head()``tail()``your_dataframe``{}``.``head``tail``your_dataframe`

# mysql - Mysql进程进度

> ID：11600394
> 
> 赞同：0
> 
> 时间：2012-07-22T12:43:42.097
> 
> 标签：mysql

我需要运行一个程序来处理大约 200 个分支的长时间运行的查询。无论如何在每个分支完成后通知客户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:56:40.613

您可能需要对长查询进行一些服务器端管理，而在客户端（我想，它是一个浏览器？）您需要定期轮询一些将当前状态发送到客户端的服务 URL。

您几乎不可能在常规的基于请求的 php 线程中运行长查询管理器。Google for PHP（或您选择的语言）队列管理器。

此外，您可以使用 websockets 将更新推送到客户端，而无需从他身边进行主动轮询。但是，AFAIK，这项技术相对较新，还没有得到广泛的支持

# mysql - 从带有unix时间戳的mysql数据库获取最近30分钟的记录

> ID：11600395
> 
> 赞同：3
> 
> 时间：2012-07-22T12:43:52.153
> 
> 标签：mysql, timestamp

我想从我的时间戳为 unix 格式的 mysql 数据库的表中获取数据。

我在做了一些研究后使用了以下查询，但仍然无法获得结果，它显示空行。谁能帮忙：

```
 SELECT *
 FROM bs_items
 WHERE  owner_id='3'
 AND timestamp > (now() - interval 30 minute) 
```

它应该工作不知道问题出在哪里：

```
TABLE: bs_items
==================================================
| log_id |  owner_id   |  item_code  | timestamp |
==================================================
| 1      | 10          | 100         | 12345     |
--------------------------------------------------
| 2      | 12          | 200         | 23456     |
-------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:52:27.903

已经有一段时间了，但我认为这可能是正确的：

```
SELECT * FROM bs_items WHERE 
datetime_column < DATE_SUB(NOW(), INTERVAL 30 MINUTE) 
```

您也可以通过选择进行日期时间比较，并将其放置在查询中以获取小于。选择“2012-07-22 13:50:14”+ 间隔 30 分钟

所以猜测一下：SELECT * FROM table WHERE datetimecol < (select '2012-07-22 13:50:14' + INTERVAL 30 MINUTE)

尝试运行查询以查看结果添加 30 分钟以查看要调试的结果：

```
select '2012-07-22 13:50:14' + INTERVAL 30 MINUTE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:08:44.547

似乎在尝试了足够长的时间后，我找到了完美的解决方案

```
 $sql=mysql_query("SELECT * FROM bs_items WHERE 
   owner_id='$loguser' AND timestamp > ( UNIX_TIMESTAMP( ) -600)
   order by timestamp desc"); 
```

它似乎给出了我想要的结果，分享它可能会帮助某人..

# python - Webkit/Python/GTK 应用程序中的 Youtube

> ID：11600400
> 
> 赞同：1
> 
> 时间：2012-07-22T12:44:44.350
> 
> 标签：python, webkit, youtube, gtk, python-2.7

我正在尝试做一个 python(2.7)/GTK+ 应用程序，并且我有一个包含 WebKit WebView 的窗口。

```
from gi.repository import Gtk, WebKit

class MainWindow:
    def __init__( self ):
        self.builder = Gtk.Builder()
        self.builder.add_from_file("youtubeWindow.ui")
        self.main_window = self.builder.get_object("main_window")
        self.scrl_window = self.builder.get_object("scrl_window")
        self.webview = WebKit.WebView()
        self.scrl_window.add(self.webview)
        self.webview.show()  
        self.webview.open("http://youtu.be/o-akcEzQ6Y8")  
        self.main_window.show_all()      
        Gtk.main()     

tube_window = MainWindow() 
```

当我运行我的应用程序时，出现以下错误：

> 错误：无效的浏览器函数表。某些功能可能会受到限制。java version "1.6.0_24" OpenJDK Runtime Environment (IcedTea6 1.11.3) (6b24-1.11.3-1ubuntu0.12.04.1) OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) ** 消息：控制台消息: undefined @0: TypeError: 'undefined' is not an object

页面加载，但我无法播放我的视频 :( （视频框全黑，没有任何播放按钮，什么都没有）

用户界面是在 Glade 中制作的，Glade 生成的 XML 文件 youtubeWindow.ui 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="main_window">
    <property name="can_focus">False</property>
    <property name="type_hint">menu</property>
    <child>
      <object class="GtkScrolledWindow" id="scrl_window">
        <property name="visible">True</property>
        <property name="can_focus">True</property>
        <property name="shadow_type">in</property>
        <child>
          <placeholder/>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

你能帮我么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:53:09.380

我找到了解决您问题的方法。来自 OpenJDK 的错误消息无关紧要，它来自 Java 浏览器插件，对您尝试执行的操作没有影响。

更重要的是，你犯了一个简单的错误。你根本不显示你的窗口！添加一个

```
self.main_window.show_all() 
```

在调用`Gtk.main()`和显示您的窗口之前，Youtube 视频播放开始并且一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-20T04:26:34.323

我想这是一个老问题了，但两个答案都不正确。

问题中提交的代码实际运行并显示视频正常。它显示了一个非常小的窗口，因此您必须将其最大化才能看到它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-07T20:20:09.713

我找到了一个适合我的解决方案。我用了

```
import gtk 
import webkit 
```

代替：

```
from gi.repository import Gtk, WebKit 
```

# java - java泛型边界

> ID：11600401
> 
> 赞同：2
> 
> 时间：2012-07-22T12:44:47.447
> 
> 标签：java, generics

我有以下代码：

```
public <T extends SomeObject> long doSomething(T someObject){
    List<? extends SomeObject> l = new LinkedList<>();
    l.add(someObject);
} 
```

这会导致编译错误 - 告诉我没有找到合适的方法：add(T)，这是为什么呢？

如果`l`接受扩展的东西，`SomeObject`它不应该接受`someObject`，因为它必须扩展`SomeObject`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T12:49:16.877

```
List<? extends SomeObject> l 
```

你是什​​么意思？当然会产生错误。

举这个例子：`SomeObject`就是`Fruit`，你有 2 个派生类`Apple`和`Orange`

你的清单将包含什么？`Apple`s还是`Orange`s？编译器无法判断。所以它会产生错误。

如果你替换 `List<? extends SomeObject> l`为`List<SomeObject> l`. 然后这将起作用，因为`Apple`和`Orange`are both `Fruit`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:13:32.253

我建议您使用以下语句：

```
List<T> l = new LinkedList<T>(); 
```

这同样是类型安全的

```
List<SomeObject> l = new LinkedList<SomeObject>(); 
```

并且还使您有机会从列表中获取类型 T 的对象而无需强制转换。T 已经是 SomeObject，因此无需强制转换即可在 T 上调用 SomeObject 的方法。所有这些都减少了输入！

回到问题。

首先要注意的是通配符类型“？” 表示*未知*，这很重要。但是，您可以为其指定一个上限 (? extends) 或下限 (? super) 约束。您将列表声明为“列表”。

已知 List 内部有 SomeObject 的对象。但！对象的确切类型未知。

编译器无法说明列表中是否存在“class A extends SomeObject”或“class B extends SomeObject”的实例。如果你调用 list.get() 它只能说会有一个 SomeObject 类型的对象。

```
SomeObject obj = list.get(1);   // Ok 
```

但是插入 any(!) 类型的对象是不安全的，因为列表中元素的实际类型是未知的。

您可能想知道为什么会存在通配符类型。在这里降低类型转换的限制，否则将过于严格。

样本

```
class A { }

class A2 extends A { }

class B <T> {
    void change(T a) { .. };
    T read() { ..  };
} 
```

如果没有通配符，我们将无法做到这一点：`B<A> b = new B<A2>();`- 它不起作用。这是因为类型转换 from`B<A> to B<A2>`是不安全的。

为什么？让我们看看（复制自[http://en.wikipedia.org/wiki/Generics_in_Java](http://en.wikipedia.org/wiki/Generics_in_Java)）

```
List<Integer> ints = new ArrayList<Integer>();
ints.add(2);
List<Number> nums = ints;  // valid if List<Integer> were a subtype of List<Number>
nums.add(3.14);  
Integer x = ints.get(1);   // now 3.14 is assigned to an Integer variable! 
```

解决办法是什么？有时，我们想以一般的方式进行这样的赋值或传递参数！

通配符类型在这里有帮助：`B<? extends A> b = new B<A2>();` 方法`B.void change(T a)`现在被禁用 - 这就是您的问题所在，并在第一部分中进行了解释。

方法`B.T read()`仍然有效并返回 A: `A a = b.read();`。是的，它实际上返回 A2，但`b.read()`它的调用者显示为 A。

通配符类型在 Collections Framework 中被广泛使用。

# checkout - 当使用带有 -vl 标志的 stcmd co 时，即使在第二次执行命令时，文件也会被检出

> ID：11600402
> 
> 赞同：0
> 
> 时间：2012-07-22T12:45:16.780
> 
> 标签：checkout, starteam

实际上，我对带有 -vl 标志的 stcmd co 有两个不同的问题：

1) 当使用不带 -vl 标志的 stcmd co 时，文件仅在第一次被检出。如果我再次运行它，文件将被跳过。但是，将 -vl 标志添加到 stcmd co 命令时，每次运行都会检出该文件。我怎样才能避免它？（我尝试运行 -f NCO 但是当使用不同的标签时，该文件也没有被签出。）
2）我有一个包含 2 个修订版的文件，在我使用 stcmd co 和第一个修订版的标签签出文件之后然后尝试在没有指定任何标签的情况下运行 stcmd co 以获得最新版本，我收到消息说文件已修改，因此尚未签出。由于我只想获取更改的文件，因此我想避免使用 -force 选项。还有其他方法可以强制签出文件吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:27:27.207

需要改变三点：

1.  *通过Config-label*而非 View-Label签出- 使用它`-cfgl LABELNAME`代替`-vl LABELNAME`
    它可以正确识别本地文件与给定标签相比的状态。

2.  使用*过滤器*仅签出需要签出的文件：（
    `-filter MGIOU`
    这意味着：所有文件，“当前”文件除外）

3.  请使用*force*（`-o`标志）来确保*过滤器*按预期工作。

总结起来，命令应该是这样的：

```
stcmd co -p "user:pwd@host:port/MyProject/MyView/"  ...  -o  -filter MGIOU  -cfgl  "MY_LABEL"  ... 
```

# windows - 如何将本地主机重定向到 127.0.0.1:8080？

> ID：11600408
> 
> 赞同：0
> 
> 时间：2012-07-22T12:45:55.373
> 
> 标签：windows, apache, localhost

当我使用 Apache > Service > Test Port 80 检查时，它显示

```
Your port 80 is actually used by :
Server: Microsoft-HTTPAPI/2.0 
```

我怎样才能禁用它。尝试了所有可能的方法，甚至通过注册表，并停止万维网发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:49:30.577

我不认为这是可能的。当您在浏览器中键入“localhost”时，它会将其解析为“127.0.0.1”，并填写默认端口 80。如果那里没有任何东西在监听，它将无法连接。它无法将“localhost”解析为“127.0.0.1:8080”。如果你不能使用端口 80，你必须指定你想要的端口。如果书签对您来说更容易，请使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-27T14:15:17.873

这基本上是将 127.0.0.1:80 重定向到 127.0.0.1:8080

Win7 没有等效的 iptables。编写一个执行您想要的服务器（侦听端口，将所有内容复制到/从另一个）应该很容易。您可以在以下 URL 找到一个：[http](http://www.quantumg.net/portforward.php) `$> netsh $> interface portproxy $> add v4tov4 listenport=xxx connectaddress=127.0.0.1 connectport=yyy protocol=tcp` ://www.quantumg.net/portforward.php [或]

[windows下的端口转发](https://stackoverflow.com/questions/11525703/port-forwarding-in-windows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-10T06:44:35.360

建议：如果你的Apache在你的WIN10下Win设置下：-代理-手动代理设置-使用代理服务器-打开-手动代理服务器下输入http=127.0.0.1:8080;https=127.0.0.1:8080-按保存按钮并告诉我它是否正常工作。

# php - 任何简单的 PHP 解析错误都会导致 500 服务器错误

> ID：11600410
> 
> 赞同：2
> 
> 时间：2012-07-22T12:46:18.537
> 
> 标签：php, error-handling

我的服务器（Apache2、PHP5）在遇到 PHP 中的简单解析错误时会返回一个带有 Header Code 500 的空白页面。例如：

```
<?php functiondoesnotexist(); ?> 
```

或者

```
<?php echo 'with2semicolons';; ?> 
```

不输出那些橙色表之一告诉我出了什么问题，服务器只是保释。

我检查了 Apache 错误日志，它确实告诉我错误（例如`Undefined function functiondoesnotexist()`）。

我怎样才能阻止这种行为？我`php.ini`的（据我所知）未受影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T13:08:09.130

您可以在 php.ini 文件中设置这些错误变量：

```
error_reporting = E_ALL | E_STRICT
display_errors = On 
```

和/或在需要时在 php 脚本的开头覆盖它们：

```
ini_set('display_errors', 1);
error_reporting(E_ALL | E_STRICT); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T13:02:29.777

尝试在之前添加[错误报告](http://www.php.net/manual/en/function.error-reporting.php)和`display_errors`每个[ini_set](http://www.php.net/manual/en/function.ini-set.php)，例如：

```
<?php 
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE); 
ini_set('display_errors', '1')
?>

...

<?php functiondoesnotexist(); ?> 
```

# html - 任何想法让我的 html 页面看起来更好？

> ID：11600412
> 
> 赞同：1
> 
> 时间：2012-07-22T12:46:29.660
> 
> 标签：html, css

我创建了一个网页来控制我的电视（见下图）。当我单击按钮时，服务器会收到 POST 请求并将其转换为 IR 信号。

有用。但是UI看起来很丑。我是网络前端的新手。是否有任何 CSS 库可以使按钮看起来更好，或者与 JS 库有一些动态外观？

顺便说一句，网络服务器托管在 Arduino 上，它有 2K 内存、16MHz CPU 和 30k 闪存。所以没有足够的内存来保存内部 CSS。我希望 html 页面尽可能小。我正在寻找的是我可以链接的 CSS。

![电视控制器](../Images/1e2c9f23ece389ba17f7901bb63f1de5.png)

**2012 年 7 月 23 日更新**

我在下面添加了 CSS 代码，按钮看起来像字母，虽然它还不够完美。

```
button {
            display: inline-block;
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f1da36), color-stop(100%,#fcf088));
            background: -moz-linear-gradient(center top, #f1da36 0%, #fcf088 100%);
            -webkit-box-shadow: 0px 0px 5px #777777, 0px 0px 2px #333333 inset;
            -moz-box-shadow: 0px 0px 5px #777777, 0px 0px 2px #333333 inset;
            box-shadow: 0px 0px 5px #777777, 0px 0px 2px #333333 inset;
            -webkit-border-radius: 30px;
            -moz-border-radius: 30px;
            border-radius: 30px;
            padding: 10px 15px;
            border-color: #ffffff;
            border-width: 1px;
            border-style: solid;
            font-size: 16px;
            color: #000000;
            font-weight: bold;
        }
        button:hover {
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeff07), color-stop(100%,#fcf088));
            background: -moz-linear-gradient(center top, #eeff07 0%, #fcf088 100%);
        }
        button:active {
            -webkit-box-shadow: 0px 0px 5px #333333 inset;
            -moz-box-shadow: 0px 0px 5px #333333 inset;
            box-shadow: 0px 0px 5px #333333 inset;
        } 
```

![红外设计 2](../Images/71177660ca1901107e401a62d536bf61.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:52:52.180

使用[遥控器的图像](http://www.google.com/imgres?q=tv%20remote%20psd&um=1&hl=en&client=safari&sa=N&rls=en&biw=1024&bih=712&tbm=isch&tbnid=HGCUJLDyM0MK9M%3a&imgrefurl=http://www.ugraphic.net/dl/old%2btelevision%2bpsd.html&docid=-VWdZL8DguxY3M&imgurl=http://3.s3.envato.com/files/30593592/Television_Remote.jpg&w=590&h=1180&ei=jh4MULS_McLs0gHXhu3zAw&zoom=1&iact=hc&vpx=513&vpy=148&dur=459&hovh=318&hovw=159&tx=102&ty=171&sig=111187523873639732758&page=2&tbnh=156&tbnw=77&start=12&ndsp=20&ved=1t:429,r:2,s:12,i:122)，然后使用[HTML 地图标签](http://www.w3schools.com/tags/tag_map.asp)的**on click**事件来触发您的代码隐藏怎么样？尽管我强烈建议您至少了解一下[CSS 的基础知识](http://www.w3schools.com/css/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:44:30.170

您可以使用 CSS 进行样式设置并将其保存在另一个文件中。然后，您可以在单独的服务器上托管 CSS 文件并将其链接到外部。

```
<head>
<link rel="stylesheet" type="text/css" href="http://www.myotherserver.com/mystyle.css" />
</head> 
```

如果您没有设置其他托管，理论上您可以使用保管箱或类似的东西托管文件。

[http://www.maclife.com/article/howtos/how_host_your_website_dropbox](http://www.maclife.com/article/howtos/how_host_your_website_dropbox)

如果您不希望自己学习如何设置 CSS 样式，您可以从这样的站点复制一些内容，或者使用那里的众多生成器之一生成它。

[http://www.cssbutton.me/](http://www.cssbutton.me/)

# php - for 循环将发布所有内容，但我只想要一个帖子

> ID：11600413
> 
> 赞同：1
> 
> 时间：2012-07-22T12:46:33.557
> 
> 标签：php, mysql, if-statement, for-loop

我想从我的 MySQL 中获取数据并仅在`$featured == 1`. 它有效，唯一一个`$featured == 1`会显示标题，但我的问题是它还会从我数据库中的所有其他内容（空帖子）中发布帖子。我只希望它显示带有 == 1 的帖子，仅此而已。我无法修复它。

```
<aside id="featured" class="body"><article> 
<?php
for ($i=0; $i <$num_results; $i++){
$row1 = $result1->fetch_assoc();
$featured = ($row1['featured']);
if ($featured == 1) {
echo $row1['title'];    
} else {
}
?>
<figure> 
<img src="images/black2.gif" alt="Black 2" style="width: 300px;"/> 
</figure>   
<hgroup>    
<h2>Featured Article</h2> 
<h3><a href="goodies/black2.html">
</a></h3> 
</hgroup>   
<p> </p> 
<footer class="post-info"> 
<abbr class="published" title="date">20 juli 2012</abbr>    
<address class="vcard author">By<a class="url fn" href="portfolio.html">F4LLCON</a> 
</address></footer><!-- /.post-info -->
</article>
<?php
}
$result1->free();   
?>

</aside><!-- /#featured --> 
```

* * *

*   看起来像：

* * *

![在此处输入图像描述](../Images/7bd5a38775d4606d4b20c35ae1550782.png)

* * *

*   但我想要这样：

* * *

![在此处输入图像描述](../Images/4d25fa3fbafb4239f234a1de0c791660.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:50:31.700

无论检查如何，您的`for`正文都包含打印大量 HTML `featured`，即在您的`if`.

你可能应该移动两行

```
} else { 
} 
```

行到代码片段的底部。

# jsf - 使用 commandLink 更改语言

> ID：11600415
> 
> 赞同：0
> 
> 时间：2012-07-22T12:46:38.373
> 
> 标签：jsf, internationalization, primefaces

我正在尝试使用 p:commandLink 更改语言。

我有一个模板（template.xhtml）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pm="http://primefaces.org/mobile"
    xmlns:p="http://primefaces.org/ui">

<f:loadBundle
    basename="labels.ClientLabels"
    var="labels" />

<h:head>
    <title><ui:insert name="windowTitle" /></title>
</h:head>

<h:body>
    <f:view locale="#{localeChanger.locale}">
        <pm:page title="aaaa" swatch="a">
            <pm:view id="main">
                <!-- HEADER -->
                <ui:insert name="header">
                    <!-- the default header is used if no replacement for header is specified when the template is used -->
                    <pm:header fixed="true" title="Header" swatch="a">

                            <f:facet name="left">
                                <p:commandLink action="#{localeChanger.setEnglish}" onchange="submit()">
                                    <h:graphicImage value="image/uk.png" />
                                </p:commandLink>
                            </f:facet>

                            <f:facet name="right">
                                <p:commandLink action="#{localeChanger.setGerman}" onchange="submit()">
                                    <h:graphicImage value="image/de.png" />
                                </p:commandLink>
                            </f:facet>  
                    </pm:header>
                </ui:insert>

                <!-- CONTENT -->
                <ui:insert name="content">
                    <!-- default content -->
                    <pm:content>
                        <h:form></h:form>
                    </pm:content>
                </ui:insert>

                <!-- FOOTER -->
                <ui:insert name="footer">
                    <!-- the default footer -->
                    <pm:footer fixed="true" swatch="a">
                        <pm:navBar>

                            <p:button outcome="info" value="#{labels.Info}" icon="info" />      
                                                    <p:button outcome="userlogin" value="#{labels.User}" icon="star" />
                        </pm:navBar>
                    </pm:footer>
                </ui:insert>
            </pm:view>
        </pm:page>
    </f:view>
</h:body>
</html> 
```

userlogin.xhtml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pm="http://primefaces.org/mobile"
    xmlns:p="http://primefaces.org/ui">

<head></head>

<body>
    <ui:composition template="template.xhtml">
        <ui:define name="content">
            <pm:content>
                <h:outputText value="#{labels.IntroductionText}" />
                <h:form>
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputLabel for="username" value="#{labels.UserName}" />
                        <p:inputText value="#{login.username}" id="username"
                            required="true" />

                        <h:outputLabel for="password" value="#{labels.Password}" />
                        <h:inputSecret value="#{login.password}" id="password"
                            required="true" label="password" />

                        <f:facet name="footer"> 
                        <p:commandButton id="loginButton" value="#{labels.Login}" />
                        </f:facet>
                    </h:panelGrid>
                </h:form>
            </pm:content>
        </ui:define>
    </ui:composition>
</body>
</html> 
```

LocaleChanger.java：

```
@ManagedBean
@SessionScoped
public class LocaleChanger implements Serializable{

    private Locale locale = FacesContext.getCurrentInstance().getViewRoot().getLocale();

    public Locale getLocale() {
        return locale;
    }

    public String getLanguage() {
        System.out.println(locale.getLanguage());
        return locale.getLanguage();
    }

    public void setLanguage(String language) {
        locale = new Locale(language);
        FacesContext.getCurrentInstance().getViewRoot().setLocale(locale);
    }

    public void setEnglish(){
        System.out.println("english");
        setLanguage("en");
    }

    public void setGerman(){
        System.out.println("german");
        setLanguage("de");
    }
} 
```

faces-config.xml：

```
<managed-bean>
        <managed-bean-name>localeChanger</managed-bean-name>
        <managed-bean-class>test.LocaleChanger</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

    <application>
        <locale-config>
            <default-locale>en</default-locale>
            <supported-locale>de</supported-locale> 
        </locale-config>
        <default-render-kit-id>PRIMEFACES_MOBILE</default-render-kit-id>
    </application> 
```

当我单击 commandLinks 时，没有任何反应。调用 setEnglish 和 setGerman 这两种方法，但标签没有变化。

我的属性文件是：ClientLabels_en.properties 和 ClientLabels_de.properties

我正在使用嵌入式 Jetty、JSF 2.0、PrimeFaces 3.3 和 PrimeFaces Mobile 0.9.3。非常感谢。

更新

文件 ClientLabels_en.properties：

```
Info        =       Info
User        =       User

IntroductionText    =   Please enter your username and password 
UserName            =   Username:
Password            =   Password:
Login               =   Login 
```

文件 ClientLabels_de.properties 是相同的，但值是德语文本。

我还更改了 ClientLabels_de_DE.properties 中的文件名，但问题仍然存在。

# java - 使用 AES 加密的 Android 内存不足异常

> ID：11600419
> 
> 赞同：2
> 
> 时间：2012-07-22T12:47:10.140
> 
> 标签：java, android, encryption

这是我的源代码：

```
public static byte[] encrypt(byte[] Data) throws Exception {
    Log.i("Debug", "initial data is" + java.util.Arrays.toString(Data));

    Key key = generateKey();
    Cipher c = Cipher.getInstance(ALGO);
    c.init(Cipher.ENCRYPT_MODE, key);
    byte[] encVal = c.doFinal(Data);

    Log.i("Debug", "encrypted data is" + java.util.Arrays.toString(encVal));
     ;
    return Base64.encode(encVal,0);
   } 
```

当 byte[] Data 的数据长度在 800 kb 左右时，我继续接收。

```
 java.lang.OutOfMemoryError 
```

你能帮我如何更改我的代码以避免这个问题吗？我不得不用base64进行编码以避免解密时块不完整的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:51:30.597

一个问题是您正在做的日志记录 - 通过将数据转换为字符串，您可能每个字节最多使用 5 个字符，每个字符是 2 个字节，因此每个原始字节占用 10 个字节的内存。然后，您使用字符串连接，因此所需的内存量增加了一倍（由于复制）。

因此，我怀疑每个*日志语句*都占用了大约 16MB。记录一个完整的 800KB 数组对您真的*有用吗？*

如果删除日志语句会发生什么？

# javascript - 检查密码 - 代码错误在哪里？

> ID：11600420
> 
> 赞同：0
> 
> 时间：2012-07-22T12:47:10.273
> 
> 标签：javascript

密码验证码，但不起作用..我的代码中的错误在哪里？

**JS：**

```
function checkPass() {
var pass = document.getElementById('pass');
var pass2 = document.getElementById('pass2');

if(pass != pass2) {
document.layers.passResponse.innerHTML = "Passwords did not Match!";
} else {
document.layers.passResponse.innerHTML = "Passwords Match!";
}
} 
```

**HTML：**

```
<div class="form-left">Password * </div>
<div class="form-right"><input type="password" id="pass" name="pass" class="form-input" /></div>
<div class="form-left">Confirm Password *</div>
<div class="form-right"><input type="password" id="pass2" name="pass2" class="form-input" /></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:48:08.627

您正在比较两个 html 元素，而不是它们的值。

`if(pass1 != pass2) {`

应该

```
if(pass1.value != pass2.value) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:47:52.913

首先，您尝试比较两个输入元素，而不是它们的值。您需要访问它们的值属性。您还应该尽可能使用严​​格的比较运算符。

```
if ( pass1.value !== pass2.value ) 
```

其次，您正在尝试使用`document.layers`，这是在 Netscape 4 中看到的专有属性。

您需要更现代的指南，尝试 W3C 的[JavaScript 核心技能](http://www.w3.org/wiki/Web_Standards_Curriculum#JavaScript_core_skills)，遍历 DOM 部分涵盖了您正在处理的领域（但如果您一直在使用提到`layers`您可能会从一开始就受益的指南）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T12:48:42.713

```
if(pass.value != pass2.value) {
document.layers.passResponse.innerHTML = "Passwords did not Match!";
} else {
document.layers.passResponse.innerHTML = "Passwords Match!";
}
} 
```

使用上面的代码。

# php - 使用 jquery 处理需要在 MVC 框架内传递 PHP 变量的操作

> ID：11600421
> 
> 赞同：1
> 
> 时间：2012-07-22T12:47:43.790
> 
> 标签：php, jquery, codeigniter, variables

我正在使用代码点火器。我想要实现的目标如下。

我在 /profile/username 页面上（控制器配置文件，函数用户名）。此函数加载具有提交按钮的视图。

```
<input type=submit value=apple> 
```

然后我有一个 jquery 文件，它具有 ajax 处理，这样当单击提交按钮时，/profile/process_click（一个私有函数）会用 $.post 调用。

控制器配置文件中的函数 process_click 调用一个方法函数，该函数将提交按钮的值插入数据库（在本例中为“苹果”）。除此功能外，还需要在点击链接的个人资料中插入用户的用户名（在本例中为“用户名”）。

所以..我的问题是，如何将用户名从我的配置文件控制器传递到我的 jquery 文件，以便它可以通过 $.post 传递给 process_click？

我需要一种安全可靠且理想情况下不占用资源的方式来执行此操作..

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:01:54.013

我想我们所有人都愿意提供帮助，但您的问题无法理解，我认为这就是您只收到一个答案的原因。请在更狂野的背景下编辑并解释您的问题。不存字，正确使用参考。例如，**'jquery 文件'**是什么？？？什么是将值传递给jquery？我假设您指的是 javascript 变量和**jquery $.ajax{}** *call*，但不能确定。你能在你的描述中更有针对性吗？我还假设根据您的住所，您的英语比我的好得多，所以这对您来说应该不是问题。

如果你修好了，我可以试着回帖，谢谢，祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:54:33.530

首先，process_click 函数不能是私有的，否则您将无法通过 Ajax 调用它。

Jquery post 方法有一个回调函数，当 PHP 脚本返回答案时会调用该函数，因此在您的 js 文件中执行以下操作：

```
var userData = $("#form1").serialize();
$.post('http://localhost/profile/process_click',userData, function(data) {
  //some code that handles data returned from php
}); 
```

在 php 脚本中：

```
public function process_data(){
$userName = $_POST['userName'];//or whatever the input name is
...//do some processing
echo $username;
} 
```

# jquery - 如何解决jquery版本冲突

> ID：11600426
> 
> 赞同：0
> 
> 时间：2012-07-22T12:48:15.473
> 
> 标签：jquery

> **可能重复：**
> [我可以在同一页面上使用多个版本的 jQuery 吗？](https://stackoverflow.com/questions/1566595/can-i-use-multiple-versions-of-jquery-on-the-same-page)

我有一个建于 2008 年的网站，我使用了许多 jquery 插件，那时它是 jquery 1.3。

现在上周我试图升级到 jquery 1.7，当我这样做时，我遇到了一些问题。

**如果我升级到新版本，我的一些插件无法正常工作，所以显而易见的解决方案是确保您使用最新的插件，.. 并不是那么简单，一些插件没有这个 jquery 版本的版本.**

所以我现在必须升级 jquery 但由于插件而无法升级，而且我也不能使用新插件，因为它太旧了..

所以我的问题是

**有没有办法告诉 jquery 使用这个版本（包括两个版本之后），有没有办法告诉 jquery 或 html 页面使用我指定的版本？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:52:14.570

```
<script src="jquery-1.2.6.js" type="text/javascript"></script>
<script src="plugin-that-needs-1.2.6.js" type="text/javascript"></script>
<script src="jquery-1.4.2.js" type="text/javascript"></script>
<script src="plugin-that-needs-1.4.2.js" type="text/javascript"></script>

<script type="text/javascript">
      var newJQuery = jQuery.noConflict(true),
            oldJQuery = jQuery;

      (function ($) {

            // code that needs 1.4.2 goes here

}(newJQuery));

      (function ($) {

            // code that needs 1.2.6 goes here

}(oldJQuery));

      // code that needs oldJQuery and newJQuery can go here
</script> 
```

这里问了同样的问题：http: [//forum.jquery.com/topic/how-to-remove-jquery-version-conflict](http://forum.jquery.com/topic/how-to-remove-jquery-version-conflict)

# php - 找不到亚马逊 mws api 类“MarketplaceWebService_Client”错误

> ID：11600438
> 
> 赞同：7
> 
> 时间：2012-07-22T12:49:55.410
> 
> 标签：php, amazon-web-services, amazon-mws

下载解压缩亚马逊的 MWS[客户端库](https://developer.amazonservices.com/doc/products/products/v20111001/php.html/175-6998820-5580154)api 后，我尝试运行其中一个脚本以查看是否一切正常。

尝试运行文件 GetReportCountSample.php 时出现错误

```
Fatal error: Class 'MarketplaceWebService_Client' not found in C:\xampp\htdocs\sites\amazon marketplace\Samples\GetReportCountSample.php on line 68 
```

我查看了配置文件并输入了我的凭据，例如：

```
define('AWS_ACCESS_KEY_ID', '<key id>');                 //has been input
define('AWS_SECRET_ACCESS_KEY', '<secret key id>');       //has been input

define('APPLICATION_NAME', '<Your Application Name>');   //no idea what this is
define('APPLICATION_VERSION', '<Your Application Version or Build Number>'); //no idea

define ('MERCHANT_ID', '<merch id>');                    //has been input 
```

我找不到名为 的 php 文件`MarketplaceWebService_Client`，我需要帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:00:05.583

没有名为 MarketplaceWebService_Client 的 php 文件。它的**Client.php**在您下载的库中。MarketplaceWebService_Client 类仅在 client.php 文件中。我认为在 GetReportCountSample.php 中未正确指定***Client.php的包含路径。***Client.php 可能位于以下路径（*在 Samples 文件夹之外*）：**C:\xampp\htdocs\sites\amazon marketplace\Client.php**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-22T23:48:11.067

在里面`.config.inc.php`你将有以下内容：

```
 /************************************************************************
    * OPTIONAL ON SOME INSTALLATIONS
    *
    * Set include path to root of library, relative to Samples directory.
    * Only needed when running library from local directory.
    * If library is installed in PHP include path, this is not needed
    ***********************************************************************/
    set_include_path(get_include_path() . PATH_SEPARATOR . '../../.'); 
```

这定义了包含路径，在此程序中用于加载类的所有分类文件。每一个都由 分隔`PATH_SEPARATOR`。这个函数增加了另一个包含路径，它是当前工作目录之上的2个目录，这不是正确的目录。您必须指向 src 目录。

要解决此问题，请更改`'../../.'`为指向 src 文件夹所在的目录。我的脚本和 src 目录在同一个父目录中，所以我的代码如下所示：

```
set_include_path(get_include_path() . PATH_SEPARATOR . getcwd().'/src/'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-07T13:40:18.123

我意识到这是一个老问题，但我有一个类似的问题，并认为我会分享我的发现。

此处出现问题是因为您更改了库安装路径。

```
... not found in C:\xampp\htdocs\sites\amazon marketplace\Samples\GetReportCountSample.php 
```

由于不包括 Lib 目录，它会产生此错误。如果你通读 .config.php 你会看到

```
function __autoload($className){
    $filePath = str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';
    $includePaths = explode(PATH_SEPARATOR, get_include_path());
    foreach($includePaths as $includePath){
        if(file_exists($includePath . DIRECTORY_SEPARATOR . $filePath)){
            require_once $filePath;
            return;
        }
    }
} 
```

这意味着一旦用下划线分割了类，您就需要使路径正确。它正在寻找路径“MarketplaceWebService/client.php”。通过删除目录“MarketplaceWebService”，它将无法找到该文件来定义类。

要进行纠正，只需将您的库安装到“htdocs\sites\amazonmarketplace\MarketplaceWebService\”，一切都会好起来的。

希望这可以帮助某人。

# algorithm - 如何翻转两个相连三角形的边缘？

> ID：11600439
> 
> 赞同：0
> 
> 时间：2012-07-22T12:50:09.270
> 
> 标签：algorithm, math, triangulation, flip, edges

假设我有两个具有一个共享边的三角形。如何翻转三角形顺序以使两个单点构成新的公共边？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:33:02.750

我假设，您想像这样更改三角形拓扑：

![三角翻转](../Images/c97150ae4640b120e20cd2c9876c4cc3.png)

我们将考虑四边形 (1, 2, 3, 4)。顶点对齐的方向（顺时针或逆时针）并不重要。但是您必须在开始时定义一个对齐方式。这种对齐可以解释为一种排列。这种排列是翻转边缘的映射。

如果您有三角形 (1, 2, 3) 和 (3, 4, 1)，则映射将如下所示：

```
1 -> 2
2 -> 3
3 -> 4
    flipped triangle 1: (2, 3, 4)

3 -> 4
4 -> 1
1 -> 2
    flipped triangle 2: (4, 1, 2) 
```

有关排列的循环表示法的信息，请参见[此处](http://en.wikipedia.org/wiki/Permutation#Notation)。

# jquery - Firefox 不接受元素上的 CSS 类

> ID：11600443
> 
> 赞同：0
> 
> 时间：2012-07-22T12:50:41.433
> 
> 标签：jquery, css, firefox

我对 firefox 有奇怪的行为（其他浏览器效果很好）。

我有规则：

```
.feed.input.community .buttons .url {
    background-position-x: 9px;
} 
```

我打电话后：

```
$('.input.feed').addClass("community"); 
```

您可以在此屏幕截图上看到结果。

![在此处输入图像描述](../Images/96d65f6796715c2088c83212fdd7c55e.png)

也许有人知道为什么或如何确定Firefox为什么不接受规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:54:24.480

这是你的答案。阅读这篇关于背景位置支持的帖子

[背景图像动画在 Firefox 中不起作用](https://stackoverflow.com/questions/8466346/background-image-animation-not-working-in-firefox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:58:30.617

此属性不是标准的 CSS3 属性。就在一年前，Firefox 还不支持这个属性。我现在还没有找到任何可以证明它的东西。

看到这个：[background-position-x (background-position-y) 是标准的 W3C CSS 属性吗？](https://stackoverflow.com/questions/9653685/is-background-position-x-background-position-y-a-standard-w3c-css-property)

# android - 如何使 UI 控件正确显示在对话框中

> ID：11600444
> 
> 赞同：0
> 
> 时间：2012-07-22T12:50:49.687
> 
> 标签：android, android-layout, android-alertdialog

我想从对话框调用者 alert1 收集用户输入。

```
AlertDialog.Builder alert1=new AlertDialog.Builder(context);
LinearLayout layout1=new LinearLayout(context);//context is an object of type Context previously initialised to 'this'
layout1.addView(box1);//box1 is an EditText
alert1.setView(layout1);
alert1.show(); 
```

然而，这使得edittext 显得非常小。但如果我这样做

```
alert1.setView(box1); 
```

并摆脱所有 LinearLayout 它看起来是正确的，但我不能再向此警报框添加自定义 ui 控件。有人能告诉我哪里错了吗

它适用于目标 android 4.0

我也尝试了线性布局的两个方向..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:43:36.897

尝试使用以下代码 进行设置`LayoutParams`。`LinearLayout``linearLayout.setLayoutParams(params);`

# javascript - Google Maps InfoBubble 函数错误的参数传递

> ID：11600445
> 
> 赞同：0
> 
> 时间：2012-07-22T12:50:53.357
> 
> 标签：javascript, api, google-maps, google-maps-api-3, google-maps-markers

我正在尝试编写一个函数，它提供一个经纬度、一个名称和一张图片作为形式参数，因此单击时地图上会显示一个标记：名称和图片。它似乎有效，尽管当我添加多个标记时，最后一次调用的实际参数被传递给所有。所以`Marker`我每次点击，都会弹出相同的名字和图片。

我不知道我在这里做错了什么，因为我认为我的范围是正确的。

**这是我函数**中代码的一部分**`Initialise()`，我声明了以下内容：**

 **```
var marker = add_marker(51.21904,4.32659000000001,"Iggy Jensen","bro.jpg"); 
fluster.addMarker(marker);

var marker = add_marker(51.20367,4.341480000000047,"John Doe","bro.jpg");
fluster.addMarker(marker);

var marker = add_marker(51.2041539954234,4.327017528991746,"Joske Vermeulen","bro.jpg"); 
fluster.addMarker(marker); 
```

函数 add_marker 是我自己写的 addMarker 是我使用的集群管理系统 Fluster2 的一部分。

```
function add_marker(lat,lng,name,pic) {

var marker = new google.maps.Marker({
      position: new google.maps.LatLng(lat,lng),
      map: map,
      icon: 'icon.png',
      title: name
});
    infoBubble = new InfoBubble({
      maxWidth: 300,
      backgroundColor: '#dedddd',
      borderWidth: 2,
      borderColor: 'rgb(68, 68, 68)'
    });

    var contentString = '<div id="content">'+
        '<h2>'+name+'</h2>'+
        '<p><span class="myLabel" style="margin-right:10px">Age </span>21</p>'+
        '<p><center><img src="'+pic+'" class="bro_image"></center> </p>'+
        '</div>';

    var div = document.createElement('DIV');
    div.innerHTML = 'No pictures uploaded by this user.';

    infoBubble.addTab('Personal', contentString);
    infoBubble.addTab('Pictures', div);

    google.maps.event.addListener(marker, 'click', function() {
      if (!infoBubble.isOpen()) {
        infoBubble.open(map, marker);
      }
    }); 

return marker;
  }

   function addTab() {
    var title = document.getElementById('tab-title').value;
    var content = document.getElementById('tab-content').value;

    if (title != '' && content != '') {
      infoBubble.addTab(title, content);
    }
  } 
```

任何帮助表示赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:55:19.237

`var`只需在定义之前添加“ ” `infoBubble`，否则每次将新`InfoBubble`对象分配给*同一个全局变量*时：

```
 var infoBubble = new InfoBubble({
// ^---------here it is 
```**

# asp.net-mvc-3 - 从 ASP.NET MVC 3 中的 Helper 方法访问“this”

> ID：11600446
> 
> 赞同：0
> 
> 时间：2012-07-22T12:51:00.673
> 
> 标签：asp.net-mvc-3

我有一个需要在多个视图中使用的 Helper 方法。为了实现这一点，我尝试实施 Scott Guthrie 在这里展示的方法：[http ://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the -helper-syntax-within-razor.aspx](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)。为了参考，我的辅助方法如下所示：

```
 @helper MyMethod(string parameter)
  {
    MyNamespace.MyClass.HelperMethod(this.Request, parameter)
  } 
```

如您所见，我需要访问与视图关联的 HttpRequestBase 对象。如果我在 _Layout.cshtml 的顶部定义方法，则代码可以正常工作。但是，我需要在其他视图中使用它。因此，如前所述，我使用了 scottgu 强调的方法。不幸的是，我现在收到一个运行时错误，上面写着：

“CS0026：关键字 'this' 在静态属性、静态方法或静态字段初始值设定项中无效”

我怎样才能克服这个驼峰？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:56:33.827

如果它是您需要的 HttpRequestBase 对象，请尝试传入`HttpContext.Current.Request`而不是`this.Request`.

# javascript - 如何解析键盘字符并显示它们的图形等效项？

> ID：11600449
> 
> 赞同：0
> 
> 时间：2012-07-22T12:51:36.577
> 
> 标签：javascript, jquery, css, keyboard-shortcuts

我正在从事软件开发质量检查项目。我想像`alt`SO 那样为 ex() 实现关键样式结果。是否有任何插件可以解析文本并找到所有键，用关键图像/或css3替换？

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:56:28.050

我不知道有什么插件可以做到这一点，但您可以轻松创建自己的插件。以下插件添加`kbd`标签，就像在 Alvin Wong 的示例中一样。请注意，这是一种非常幼稚的方法，您可能会得到不需要的标记。

```
(function($){
    // List of keys
    var keys = ["ctrl", "alt", "esc", "del", "end", "num"];

    $.fn.keys = function(){
        this.each(function(){
            // Split text into words and remove line breaks
            var text = $(this).html().replace(/(\r\n|\n|\r)/gm, "").split(" ");

            // Compare every word to every key
            for (var i = 0; i < text.length; ++i) {
                for (j in keys) {
                    if (text[i].toLowerCase() == keys[j]) {
                        text[i] = "<kbd>" + text[i] + "</kbd>";
                        break;
                    }
                }
            }

            $(this).html(text.join(" "));
        });
    };
})(jQuery); 
```

然后，您可以在 CSS 样式表中添加任意样式。请参阅 SO 的样式表以获得一些灵感... ;)
[http://cdn.sstatic.net/stackoverflow/all.css](http://cdn.sstatic.net/stackoverflow/all.css)

```
kbd {
    /* ... */
} 
```

在这里测试它：http: [//jsfiddle.net/BUxpt/](http://jsfiddle.net/BUxpt/)

# javascript - XMPP 客户端未连接 - 使用 Node Bosh 服务器

> ID：11600455
> 
> 赞同：1
> 
> 时间：2012-07-22T12:52:53.957
> 
> 标签：javascript, facebook, xmpp

我正在尝试创建一个 facebook/gtalk 自定义聊天窗口。已经创建了一个具有 xmpp_login 权限的 Facebook 应用程序并由我的用户批准。

我正在使用以下内容：

1.  [节点-xmpp-bosh](https://github.com/dhruvbird/node-xmpp-bosh)
2.  [jquery.xmpp.js](https://github.com/maxpowel/jQuery-XMPP-plugin)

当我使用提供的基本示例时，我可以使用我的凭据登录 gmail，但不能登录 facebook。当我将 BOSH 服务器从[http://bosh.metajack.im:5280/xmpp-httpbind](http://bosh.metajack.im:5280/xmpp-httpbind) -> 更改为我自己的时，我无法连接到任何服务器。

这是我从示例服务器的 gmail 得到的响应：

```
<body xmlns='http://jabber.org/protocol/httpbind' inactivity='60' secure='true' authid='C410DDF349E5D6E4'
      content='text/xml; charset=utf-8' window='3' polling='15' sid='d97ad59c8741b5c97fc5d267cf9fa6d8' requests='2'
      wait='60'>
<stream:features xmlns:stream='http://etherx.jabber.org/streams' xmlns='jabber:client'>
    <mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>
        <mechanism>PLAIN</mechanism>
        <mechanism>X-GOOGLE-TOKEN</mechanism>
        <mechanism>X-OAUTH2</mechanism>
    </mechanisms>
</stream:features>
</body> 
```

这是我从我自己的 BOSH 服务器得到的

```
<body xmlns="http://jabber.org/protocol/httpbind" stream="7b7a5898-7d44-4459-b135-25d56db49f63"
      sid="66aec966-aba0-4021-b728-ae1879caee3a" wait="60" ver="1.6" polling="35" inactivity="70" requests="2" hold="1"
      from="gmail.com" content="text/xml; charset=utf-8" xmpp:restartlogic="true" xmlns:xmpp="urn:xmpp:xbosh"
      window="2">
</body> 
```

我错过了什么，在连接到 Facebook 之前我还需要采取什么其他步骤吗？

**更新**

* * *

通过 Kissrobber找到了[Facebook+Node](https://github.com/kissrobber/facebook_chat_with_javascript_on_node.js)聊天的示例，我让它在我的本地机器上运行，但在尝试连接 strophe.js 时仍然出现错误。

根据[XMPP.org](http://xmpp.org/extensions/xep-0124.html/)的说法，我收到“未找到项目”的响应，原因可能是以下之一：

1.  “sid”无效
2.  “流”无效
3.  'rid' 大于预期窗口的上限
4.  连接管理器无法重新发送响应
5.  'key' 序列无效

**更新**

* * *

以下是 strophe.js 使用的日志：

*   旁遮普
*   节点 js XMPP
*   具有 pidgin_compatible 的节点 js XMPP：true

旁遮普日志

* * *

```
Connecting status -> [1, null] facebook.html:24
Strophe is connecting. facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: request id 1.0 posting facebook.html:20
LOG: request id 1.0 state changed to 1 facebook.html:20
SEND: <body rid='765843050' xmlns='http://jabber.org/protocol/httpbind' to='chat.facebook.com' xml:lang='en' wait='60' hold='1' content='text/xml; charset=utf-8' ver='1.6' xmpp:version='1.0' xmlns:xmpp='urn:xmpp:xbosh'/> facebook.html:20
Connecting status -> [1, null] facebook.html:24
Strophe is connecting. facebook.html:20
LOG: _throttledRequestHandler called with 2 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 2.0 posting facebook.html:20
LOG: request id 2.0 state changed to 1 facebook.html:20
SEND: <body rid='765843051' xmlns='http://jabber.org/protocol/httpbind' to='chat.facebook.com' xml:lang='en' wait='60' hold='1' content='text/xml; charset=utf-8' ver='1.6' xmpp:version='1.0' xmlns:xmpp='urn:xmpp:xbosh'/> facebook.html:20
LOG: request id 2.1 state changed to 2 facebook.html:20
LOG: request id 2.1 state changed to 3 facebook.html:20
LOG: request id 2.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 2 should now be removed facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 2.1 got 200 facebook.html:20
LOG: _connect_fb was called facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind' inactivity='60' secure='true' authid='89141C54' content='text/xml; charset=utf-8' window='3' polling='15' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701' requests='2' wait='60'><stream:features xmlns:stream='http://etherx.jabber.org/streams' xmlns='jabber:client'><mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'><mechanism>X-FACEBOOK-PLATFORM</mechanism><mechanism>DIGEST-MD5</mechanism></mechanisms></stream:features></body> facebook.html:20
Connecting status -> [3, null] facebook.html:24
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 3.0 posting facebook.html:20
LOG: request id 3.0 state changed to 1 facebook.html:20
SEND: <body rid='765843052' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701'><auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mechanism='X-FACEBOOK-PLATFORM'/></body> facebook.html:20
LOG: request id 3.1 state changed to 2 facebook.html:20
LOG: request id 3.1 state changed to 3 facebook.html:20
LOG: request id 3.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 3 should now be removed facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 3.1 got 200 facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><challenge xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>dmVyc2lvbj0xJm1ldGhvZD1hdXRoLnhtcHBfbG9naW4mbm9uY2U9QjRGRjZBOTNDQUFENjlCMjYxQzkzNDczQjE5NUUwMDU=</challenge></body> facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 4.0 posting facebook.html:20
LOG: request id 4.0 state changed to 1 facebook.html:20
SEND: <body rid='765843053' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701'><response xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>YXBpX2tleT0zMzE1MzAyNzM1ODg1OTAmY2FsbF9pZD0xMzQzNzIzNzY5Jm1ldGhvZD1hdXRoLnhtcHBfbG9naW4mbm9uY2U9QjRGRjZBOTNDQUFENjlCMjYxQzkzNDczQjE5NUUwMDUmYWNjZXNzX3Rva2VuPUFBQUV0aG1nd2hXNEJBRTRkUHVubVRqOUJoV0V1WkN3WFpBUVBkYnFJSG9yUGRFNkdxUnhxSldvWkJLUHM2VmNqbUJSbnlWUGlFaG9BdDBLYmdLa2xpV0pQVWRmd3VCNENPcklwWkFkck9RWkRaRCZ2PTEuMA==</response></body> facebook.html:20
LOG: request id 4.1 state changed to 2 facebook.html:20
LOG: request id 4.1 state changed to 3 facebook.html:20
LOG: request id 4.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 4 should now be removed facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 4.1 got 200 facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><success xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/></body> facebook.html:20
LOG: SASL authentication succeeded. facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 5.0 posting facebook.html:20
LOG: request id 5.0 state changed to 1 facebook.html:20
SEND: <body rid='765843054' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701' to='chat.facebook.com' xml:lang='en' xmpp:restart='true' xmlns:xmpp='urn:xmpp:xbosh'/> facebook.html:20
LOG: request id 5.1 state changed to 2 facebook.html:20
LOG: request id 5.1 state changed to 3 facebook.html:20
LOG: request id 5.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 5 should now be removed facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 5.1 got 200 facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><stream:features xmlns:stream='http://etherx.jabber.org/streams' xmlns='jabber:client'><bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'/><session xmlns='urn:ietf:params:xml:ns:xmpp-session'/></stream:features></body> facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 6.0 posting facebook.html:20
LOG: request id 6.0 state changed to 1 facebook.html:20
SEND: <body rid='765843055' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701'><iq type='set' id='_bind_auth_2' xmlns='jabber:client'><bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'/></iq></body> facebook.html:20
LOG: request id 6.1 state changed to 2 facebook.html:20
LOG: request id 6.1 state changed to 3 facebook.html:20
LOG: request id 6.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 6 should now be removed facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 6.1 got 200 facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns='jabber:client' type='result' id='_bind_auth_2'><bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'><jid>-626048146@chat.facebook.com/168823c4_4C61C1205A1E5</jid></bind></iq></body> facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 7.0 posting facebook.html:20
LOG: request id 7.0 state changed to 1 facebook.html:20
SEND: <body rid='765843056' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701'><iq type='set' id='_session_auth_2' xmlns='jabber:client'><session xmlns='urn:ietf:params:xml:ns:xmpp-session'/></iq></body> facebook.html:20
LOG: request id 7.1 state changed to 2 facebook.html:20
LOG: request id 7.1 state changed to 3 facebook.html:20
LOG: request id 7.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 7 should now be removed facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 7.1 got 200 facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns='jabber:client' type='result' id='_session_auth_2'><session xmlns='urn:ietf:params:xml:ns:xmpp-session'/></iq></body> facebook.html:20
Connecting status -> [5, null] facebook.html:24
Strophe is connected. facebook.html:20
Send a message to -626048146@chat.facebook.com/168823c4_4C61C1205A1E5 to talk to me. facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 8.0 posting facebook.html:20
LOG: request id 8.0 state changed to 1 facebook.html:20
SEND: <body rid='765843057' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701'><presence xmlns='jabber:client'/></body> facebook.html:20
LOG: request id 8.1 state changed to 2 facebook.html:20
LOG: request id 8.1 state changed to 3 facebook.html:20
LOG: request id 8.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 8 should now be removed facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 8.1 got 200 facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-744782602@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>fe60b81022f853cc7feb596f443885e90f6631fe</photo></x></presence></body> facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: Request 1 timed out (secondary), restarting facebook.html:20
LOG: request id 1.1 state changed to 4 facebook.html:20
LOG: request id 9.1 posting facebook.html:20
LOG: request id 9.1 state changed to 1 facebook.html:20
SEND: <body rid='765843050' xmlns='http://jabber.org/protocol/httpbind' to='chat.facebook.com' xml:lang='en' wait='60' hold='1' content='text/xml; charset=utf-8' ver='1.6' xmpp:version='1.0' xmlns:xmpp='urn:xmpp:xbosh'/> facebook.html:20
LOG: request id 9.2 state changed to 2 facebook.html:20
LOG: request id 9.2 state changed to 3 facebook.html:20
LOG: request id 9.2 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 0 requests facebook.html:20
LOG: request id 9 should now be removed facebook.html:20
LOG: request id 9.2 got 200 facebook.html:20
LOG: _connect_fb was called facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind' inactivity='60' secure='true' authid='CE3FA949' content='text/xml; charset=utf-8' window='3' polling='15' sid='bb0248e53bf29aa66162aa2884e08ec3d6c2302a' requests='2' wait='60'><stream:features xmlns:stream='http://etherx.jabber.org/streams' xmlns='jabber:client'><mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'><mechanism>X-FACEBOOK-PLATFORM</mechanism><mechanism>DIGEST-MD5</mechanism></mechanisms></stream:features></body> facebook.html:20
Connecting status -> [3, null] facebook.html:24
LOG: _throttledRequestHandler called with 0 requests facebook.html:20
LOG: request id 10.0 posting facebook.html:20
LOG: request id 10.0 state changed to 1 facebook.html:20
SEND: <body rid='765843058' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701'><auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mechanism='X-FACEBOOK-PLATFORM'/></body> facebook.html:20
LOG: request id 10.1 state changed to 2 facebook.html:20
LOG: request id 10.1 state changed to 3 facebook.html:20
LOG: request id 10.1 state changed to 3 facebook.html:20
LOG: request id 10.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 0 requests facebook.html:20
LOG: request id 10 should now be removed facebook.html:20
LOG: request id 10.1 got 200 facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-635374690@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>98addc5cda3a34a0ecd0b9e09ae900eddcbbb8ea</photo></x></presence><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-1009827716@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>105af5c5b0c5f028d93dca6e37f2c174dc4a62a5</photo></x></presence><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-1021952545@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>e5d4693f8712d828f1b18d61e7f138511fc04968</photo></x></presence><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-503274069@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>6c235c1472d7b370771182085f9d0983b980e8b7</photo></x></presence><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-573139239@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>2f36c33ac86713a73a910db55f9ecac00e19ae63</photo></x></presence><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-539881693@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>eea1e5844ad62abad6043a39e8a3d66619490360</photo></x></presence><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-100000177388719@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>af784e43277ded69c16dcc02bffec6bf883b6e71</photo></x></presence><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-549474003@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>da16587560467f05f8b97810cbe0c59c01a1fb7c</photo></x></presence><presence xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='-1366794447@chat.facebook.com'><x xmlns='vcard-temp:x:update'><photo>5177a3daefecf3f2d5cac28809f8186ff3168ca8</photo></x></presence></body> facebook.html:20
LOG: no requests during idle cycle, sending blank request facebook.html:20
LOG: request id 11.0 posting facebook.html:20
LOG: request id 11.0 state changed to 1 facebook.html:20
SEND: <body rid='765843059' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701'/> facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
I sent -100000177388719@chat.facebook.com: TEST MESSAGE facebook.html:20
LOG: request id 12.0 posting facebook.html:20
LOG: request id 12.0 state changed to 1 facebook.html:20
SEND: <body rid='765843060' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701'><message to='-100000177388719@chat.facebook.com' type='chat' xmlns='jabber:client'><body>TEST MESSAGE</body></message></body> facebook.html:20
LOG: request id 11.1 state changed to 2 facebook.html:20
LOG: request id 11.1 state changed to 3 facebook.html:20
LOG: request id 11.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 11 should now be removed facebook.html:20
LOG: request id 11.1 got 200 facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind'/> facebook.html:20
LOG: request id 12.1 state changed to 2 facebook.html:20
LOG: request id 12.1 state changed to 3 facebook.html:20
LOG: request id 12.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 0 requests facebook.html:20
LOG: request id 12 should now be removed facebook.html:20
LOG: request id 12.1 got 200 facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns='jabber:client' to='-626048146@chat.facebook.com/168823c4_4C61C1205A1E5' from='chat.facebook.com' id='fbiq4C61C13A7D2DD' type='set'><own-message xmlns='http://www.facebook.com/xmpp/messages' to='-100000177388719@chat.facebook.com' self='true'><body>TEST MESSAGE</body></own-message></iq></body> facebook.html:20
LOG: no requests during idle cycle, sending blank request facebook.html:20
LOG: request id 13.0 posting facebook.html:20
LOG: request id 13.0 state changed to 1 facebook.html:20
SEND: <body rid='765843061' xmlns='http://jabber.org/protocol/httpbind' sid='cb26009594cffefe0fe73cf4733ac2f7c8522701'/> 
```

* * *

节点日志

* * *

```
Connecting status -> [1, null] facebook.html:24
Strophe is connecting. facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: request id 1.0 posting facebook.html:20
LOG: request id 1.0 state changed to 1 facebook.html:20
SEND: <body rid='627577970' xmlns='http://jabber.org/protocol/httpbind' to='chat.facebook.com' xml:lang='en' wait='60' hold='1' content='text/xml; charset=utf-8' ver='1.6' xmpp:version='1.0' xmlns:xmpp='urn:xmpp:xbosh'/> facebook.html:20
Connecting status -> [1, null] facebook.html:24
Strophe is connecting. facebook.html:20
LOG: _throttledRequestHandler called with 2 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 2.0 posting facebook.html:20
LOG: request id 2.0 state changed to 1 facebook.html:20
SEND: <body rid='627577971' xmlns='http://jabber.org/protocol/httpbind' to='chat.facebook.com' xml:lang='en' wait='60' hold='1' content='text/xml; charset=utf-8' ver='1.6' xmpp:version='1.0' xmlns:xmpp='urn:xmpp:xbosh'/> facebook.html:20
LOG: request id 1.1 state changed to 2 facebook.html:20
LOG: request id 1.1 state changed to 3 facebook.html:20
LOG: request id 1.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 1 should now be removed facebook.html:20
LOG: request id 1.1 got 200 facebook.html:20
LOG: _connect_fb was called facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind' xmlns:xmpp='urn:xmpp:xbosh' stream='fc2182d8-124c-432f-aff0-bf8f58cd580d' sid='c8a300fc-28b7-49cc-8373-a8b3db5f894b' wait='60' ver='1.6' polling='35' inactivity='70' requests='2' hold='1' from='chat.facebook.com' content='text/xml; charset=utf-8' xmpp:restartlogic='true' window='2'/> facebook.html:20
LOG: _throttledRequestHandler called with 2 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 3.0 posting facebook.html:20
LOG: request id 3.0 state changed to 1 facebook.html:20
SEND: <body rid='627577972' xmlns='http://jabber.org/protocol/httpbind' sid='c8a300fc-28b7-49cc-8373-a8b3db5f894b'/> facebook.html:20
LOG: request id 2.1 state changed to 2 facebook.html:20
LOG: request id 2.1 state changed to 3 facebook.html:20
LOG: request id 2.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 2 should now be removed facebook.html:20
LOG: request id 2.1 got 200 facebook.html:20
LOG: _connect_fb was called facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind' xmlns:xmpp='urn:xmpp:xbosh' stream='0739f763-51dc-4fa6-ae73-9c422898f8df' sid='f168a14f-c4e4-4796-b815-69cacddb82a2' wait='60' ver='1.6' polling='35' inactivity='70' requests='2' hold='1' from='chat.facebook.com' content='text/xml; charset=utf-8' xmpp:restartlogic='true' window='2'/> facebook.html:20
LOG: _throttledRequestHandler called with 2 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 4.0 posting facebook.html:20
LOG: request id 4.0 state changed to 1 facebook.html:20
SEND: <body rid='627577973' xmlns='http://jabber.org/protocol/httpbind' sid='c8a300fc-28b7-49cc-8373-a8b3db5f894b'/> facebook.html:20
LOG: request id 3.1 state changed to 2 facebook.html:20
LOG: request id 3.1 state changed to 3 facebook.html:20
LOG: request id 3.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 1 requests facebook.html:20
LOG: _processRequest: first request has readyState of 1 facebook.html:20
LOG: request id 3 should now be removed facebook.html:20
LOG: request id 3.1 got 200 facebook.html:20
LOG: _connect_fb was called facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind' condition='item-not-found' type='terminate'/> facebook.html:20
Connecting status -> [2, "item-not-found"] facebook.html:24
       ERR:[Strophe failed to connect!!!] - Strophe.Status.CONNFAIL facebook.html:20
LOG: User connection callback caused an exception: TypeError: Cannot set property 'value' of undefined facebook.html:20
LOG: request id 4.1 state changed to 2 facebook.html:20
LOG: request id 4.1 state changed to 3 facebook.html:20
LOG: request id 4.1 state changed to 4 facebook.html:20
LOG: removing request facebook.html:20
LOG: _throttledRequestHandler called with 0 requests facebook.html:20
LOG: request id 4 should now be removed facebook.html:20
LOG: request id 4.1 got 200 facebook.html:20
LOG: _connect_fb was called facebook.html:20
RECV: <body xmlns='http://jabber.org/protocol/httpbind' condition='item-not-found' message='Invalid packet' type='terminate'/> facebook.html:20
Connecting status -> [2, "item-not-found"] facebook.html:24
       ERR:[Strophe failed to connect!!!] - Strophe.Status.CONNFAIL facebook.html:20
LOG: User connection callback caused an exception: TypeError: Cannot set property 'value' of undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:26:16.763

经过一周多的努力，我让它开始工作，我切换到[旁遮普语](https://github.com/twonds/punjab)而不是节点服务器，一切正常。所以基本上结构是：

Strophe.js <-> Apache（代理）<-> 旁遮普语 <-> Facebook XMPP 服务器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T03:21:06.017

node-xmpp-bosh 的作者在这里。

尝试使用 pidgin_compatible: true （在配置文件中）运行服务器。

这可能是 jquery.xmpp.js 中的一个错误，它无法处理当 bosh 服务器发送空正文作为第一个响应而不是**<stream:features/>**数据包的情况。根据 BOSH 规范，两者都是有效的。您可以尝试使用 jquery.xmpp.js 项目提交错误。node-xmpp-bosh 应该可以与 strophe.js 一起使用。如果没有，您可能会提交错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T18:48:22.720

```
LOG: request id 4.0 posting 
```

日志：请求 id 4.0 状态更改为 1 发送：问题看起来在这个数据包中。这里应该是 Auth 请求，但它的请求是空的。

-> 尝试获取最新版本。
-> 并确保您调用的方法是“facebookConnect = function (jid, callback, wait, hold, apiKey, accessToken)”
-> 应该调用这个方法。

```
function login() {
    FB.getLoginStatus(function(response) {
      if (response.authResponse) {
        connection.facebookConnect(
            response.authResponse.userId + "@chat.facebook.com/test", 
            onConnect, 
            60,
            1, 
            FB._apiKey,
            response.authResponse.accessToken);
        FB.api('/me/friends', function(response) {
            var to = $("#to");
            to.empty();
          $.each(response.data, function(i,v){
            to.append($("<option value='" + v.id + "'>" + v.name + "</option>"));
          });
        });

      } else {
       connection.disconnect();
      }
    });
} 
```

# java - JSR 303 验证消息覆盖 @Id - 找不到捆绑异常

> ID：11600458
> 
> 赞同：0
> 
> 时间：2012-07-22T12:53:22.047
> 
> 标签：java, jsf, bean-validation

我正在尝试为 bean 验证消息创建一个自定义的 messages.properties 文件。我`Messages.properties`在资源包中添加了一个文件，并添加`<application><message-bundle>resources.Messages</message-bundle></application>`到我的`faces-config.xml`文件中。

我正在验证一个具有主键字段并具有`@Id`注释 (javax.persistence.Id) 的实体。

当我覆盖像`javax.faces.converter.BigDecimalConverter.DECIMAL`它一样工作的消息时，但是当这个输入为空时我的问题我收到异常消息：`Can't find bundle for base name resources.Messages, locale en_US`。

我还有一条关于这种验证的消息——它`javax.faces.component.UIInput.REQUIRED`在属性文件中（所以并不是我错过了正确的消息文本）。

`faces-config.xml`所以我尝试将locale config:添加到文件中`<locale-config> <default-locale>en_US</default-locale></locale-config>`，并将另一个名为 Messages_en_US.properties 的属性文件添加到资源包中，但我仍然得到异常。

可能是什么问题呢？我错过了什么吗？如何解决？这个问题是因为@Id 注释引起的吗？我可以通过吗？我希望能够看到我的自定义消息。我尝试了所有我能想到的方法，但没有成功，请帮助！

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-06T04:50:18.973

只需将这些属性文件放在源文件夹中，就像它在 WEB-INF 资源文件夹中的结构一样，java 类将从 java 资源文件夹中获取引用。

试试这个，我也遇到了同样的问题，它对我有用。

# android - 防止 Android 关闭我的服务/线程

> ID：11600459
> 
> 赞同：1
> 
> 时间：2012-07-22T12:53:22.913
> 
> 标签：android

我有一个应用程序在后台使用服务来执行一些上传/下载操作。这些操作可能需要一些时间，具体取决于用户选择（文件的数量和大小）。

虽然使用我的设备（nexus s）和测试模拟器，一切都按计划进行，但我收到用户的报告，称在选择上传/下载大数据时操作有时会卡住。

该操作是使用在后台服务中运行的线程完成的。我的猜测是操作系统有时会杀死内存不足的设备上的线程和/或服务。

在服务 onStartCommand() 函数中，我提升了将执行操作的线程（要处理的数据在意图内），然后我返回 START_NOT_STICKY。在我使用 startService(i) 的活动中，没有完成绑定。

如何防止这种情况？如何确保系统不会杀死我的服务或线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:02:45.757

使用[startForeground()](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)可以帮助您实现目标。

来自文档：

> 启动的服务可以使用 startForeground(int, Notification) API 将服务置于前台状态，系统认为它是用户主动意识到的，因此在内存不足时不适合杀死。（理论上，在当前前台应用程序的极端内存压力下，服务仍然可能被杀死，但实际上这不应该是一个问题。）

# c++ - 创建没有默认构造函数的结构数组

> ID：11600460
> 
> 赞同：-3
> 
> 时间：2012-07-22T12:53:28.290
> 
> 标签：c++

> **可能重复：**
> [没有默认构造函数的 c++ 对象数组初始化](https://stackoverflow.com/questions/4754763/c-object-array-initialization-without-default-constructor)

我有结构：

```
struct aa 
{
    int a;
    char  b [255];

    aa(int number)
    {
        cout<<"creating structure "<<number<<"\n";

    }

    ~aa()
    {
        cout<<"destroying structure"; 
    }
}; 
```

我正在尝试创建此结构的数组，但这不起作用：

```
aa *ss = new aa[3](1); 
```

这给了我一个编译器错误。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:35:31.717

```
aa(int number=1)
・・・
aa *ss = new aa[3]; 
```

或者

```
template <int N>
struct aa
・・・
aa(int number = N)
・・・
aa<1> *ss = new aa<1>[3]; 
```

或者

```
#include <new>
・・・
aa(int number=0)
・・・

int main(){
    aa ss[3];//local value
    for(int i=0;i<3;++i)
        new (ss + i) aa(1);//replacement 
```

# symfony - 教义2 ifnull

> ID：11600468
> 
> 赞同：3
> 
> 时间：2012-07-22T12:55:16.757
> 
> 标签：symfony, doctrine-orm, ifnull

嗨，学说2中有ifnull吗？我需要使用...如何？

```
SELECT *
FROM `apns_task_message`
ORDER BY IFNULL( `sent_at` , NOW( ) ) , `priority` DESC , `position` ASC 
```

如何将此 sql 转换为学说？

```
 $qb = $this->getRepository()->createQueryBuilder('tm');
    $qb->leftJoin('tm.apnsTask', 't');
    $qb->add('where', 't.id = :task_id')->setParameter('task_id', $task_id);
    //$qb->add('orderBy', 'IFNULL(tm.sent_at, NOW()), tm.priority DESC, tm.position ASC');
    $qb->add('orderBy', 'd_date, tm.priority DESC, tm.position ASC');
    $q = $qb->getQuery();
    return $q->getResult(); 
```

* * *

成立！！！感谢@AdrienBrault 的“coalesce”运营商

```
$now = new \DateTime("now");
$qb = $this->getRepository()->createQueryBuilder('tm');
$qb->addSelect('coalesce (tm.sentAt, :sent_date) as sent_date')->setParameter('sent_date', $now->format("Y-m-d H:i:s"));
$qb->leftJoin('tm.apnsTask', 't');
$qb->add('where', 't.id = :task_id')->setParameter('task_id', $task_id);
$qb->add('orderBy', 'sent_date ASC, tm.priority DESC, tm.position ASC');
$q = $qb->getQuery(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-08T10:24:00.740

如果要在教义查询生成器中使用 sql 的 IFNULL 函数，则需要对 IFNULL 使用教义扩展。

首先，您需要注册扩展类以在 Doctrine 引导程序中使用

```
 $config = Setup::createAnnotationMetadataConfiguration($metadata_paths, $dev_mode, $proxies_dir);
        $driver = new AnnotationDriver(new AnnotationReader());
        $config->setMetadataDriverImpl($driver);

        require_once './Doctrine/DoctrineExtensions/Query/MySql/IfNull.php';

        $config->addCustomStringFunction('IfNull', '\DoctrineExtensions\Query\Mysql\IfNull');

        $this->em = EntityManager::create($connection_options, $config);

        $classLoader = new ClassLoader('DoctrineExtensions', $extension_dir);
        $classLoader->register(); 
```

这是 IFNULL 原则扩展代码。

```
<?php

namespace DoctrineExtensions\Query\Mysql;

use Doctrine\ORM\Query\AST\Functions\FunctionNode,
    Doctrine\ORM\Query\Lexer;

/**
 * @author Andrew Mackrodt <andrew@ajmm.org>
 */
class IfNull extends FunctionNode
{
    private $expr1;
    private $expr2;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->expr1 = $parser->ArithmeticExpression();
        $parser->match(Lexer::T_COMMA);
        $this->expr2 = $parser->ArithmeticExpression();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'IFNULL('
            .$sqlWalker->walkArithmeticPrimary($this->expr1). ', '
            .$sqlWalker->walkArithmeticPrimary($this->expr2).')';
    }
} 
```

[你可以从这里](https://github.com/beberlei/DoctrineExtensions)下载扩展

对于您的情况，请使用它。

```
$qb = $this->getRepository()->createQueryBuilder('tm');
return $qb
        ->select("*")
        ->from("tm.apnsTask", "t")
        ->orderBy("IFNULL(t.sent_at, NOW()), t.priority DESC, t.position ASC")
        ->getQuery()
        ->getResult(); 
```

# asp.net - IIS 上的 asp.net web api 为远程 POST 调用返回 500，但在本地返回 201（正常）

> ID：11600470
> 
> 赞同：2
> 
> 时间：2012-07-22T12:55:46.000
> 
> 标签：asp.net, iis-7.5, asp.net-web-api

我有一个在 .NET 4.5 上运行的 ASP.NET WEB API 代码，带有 MVC 4.0 RC 和 EF 5.0 Pre-release。这是在 IIS 7.5、Win server 2008 R2 Datacenter 上运行的。

**现象是这样的：**

**当本地调用 POST 到本地主机（在 IIS 上）时，一切正常，我被重定向到创建的对象作为状态为 201 的响应页面（它在响应标头中设置）。**

**但是从外部 URL 调用时，我没有得到任何响应。代码运行良好，没有例外，但例如在 chrome 开发人员工具中，我看不到任何响应。它说请求已被取消。**

不管我怎么尝试，都无法解决这个问题。同一个 IIS 文件夹上的完全相同的代码可以从本地调用正常运行，但对于远程调用 - 不返回任何内容。这发生在 2 个不同的控制器上。

但是，其他调用（例如 Get）适用于本地和远程调用。

这是构建响应的 POST 方法中的控制器代码：

```
HttpResponseMessage response = this.Request.CreateResponse<Movie>(HttpStatusCode.Created, Movie);
string uri = Url.Route(null, new { id = Movie.Id });
response.Headers.Location = new Uri(Request.RequestUri, uri);
return response; 
```

非常感谢您的帮助！

谢谢！

# python - 使用 scikit-learn 的 Web 应用程序

> ID：11600471
> 
> 赞同：23
> 
> 时间：2012-07-22T12:55:58.760
> 
> 标签：python, web-applications, scikit-learn

我在本地训练了一个[sklearn](http://scikits.appspot.com/scikit-learn)分类器，我必须创建一个简单的 Web 应用程序来演示它的使用。我完全是 web 应用程序开发的菜鸟，我不想浪费时间使用不支持我正在使用的模块的框架创建 web 应用程序。

1.  你认为什么是完成这项任务的好方法？
2.  我应该使用什么 Web 应用程序开发框架（如果有）？
3.  我是否必须深入研究诸如等之类的东西`Heroku`，`django`或者对于简单的科学演示是否有更简单快捷的解决方案？

我的想法是使用我训练的分类器，在服务器上对其进行腌制并取消腌制，然后`classify`从服务器上运行，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T13:59:46.557

如果这只是为了演示，请离线训练您的分类器，腌制模型，然后使用简单的 Python Web 框架（如[烧瓶](http://flask.pocoo.org/)或[瓶](http://bottlepy.org/docs/dev/)）在服务器启动时取消腌制模型，并在 HTTP 请求处理程序中调用预测函数。

django 是一个功能完整的框架，因此比烧瓶或瓶子学习的时间更长，但它有一个很好的文档和一个更大的社区。

heroku 是一项在云中托管您的应用程序的服务。可以[在 heroku 上托管烧瓶应用程序](https://devcenter.heroku.com/articles/python/)，这是一个[简单的模板项目 + 说明](https://github.com/zachwill/flask_heroku)。

对于“生产”设置，我建议您不要使用 pickle，而是为机器学习模型编写自己的持久层，以便完全控制您的存储参数，并对可能会破坏旧的 unpickle 的库升级更加健壮楷模。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-04T15:24:24.533

虽然这不是分类器，但我已经使用瓶子框架和 scikit-learn 实现了一个简单的机器学习 Web 服务。给定一个 .csv 格式的数据集，它返回关于主成分分析和线性判别分析技术的 2D 可视化。

更多信息和示例数据文件可在以下位置找到：[http ://mindwriting.org/blog/?p=153](http://mindwriting.org/blog/?p=153)

这是实现：upload.html：

```
<form
 action="/plot" method="post"
 enctype="multipart/form-data"
>
Select a file: <input type="file" name="upload" />
<input type="submit" value="PCA & LDA" />
</form> 
```

pca_lda_viz.py（修改主机名和端口号）：

```
import matplotlib
matplotlib.use('Agg')

import matplotlib.pyplot as plt
import numpy as np
from cStringIO import StringIO

from bottle import route, run, request, static_file
import csv
from matplotlib.font_manager import FontProperties
import colorsys

from sklearn import datasets
from sklearn.decomposition import PCA
from sklearn.lda import LDA

html = '''
<html>
    <body>
        <img src="data:image/png;base64,{}" />
    </body>
</html>
'''

 @route('/')
 def root():
     return static_file('upload.html', root='.')

 @route('/plot', method='POST')
    def plot():

       # Get the data
       upload = request.files.get('upload')
       mydata = list(csv.reader(upload.file, delimiter=','))

       x = [row[0:-1] for row in mydata[1:len(mydata)]]

       classes =  [row[len(row)-1] for row in mydata[1:len(mydata)]]
       labels = list(set(classes))
       labels.sort()

       classIndices = np.array([labels.index(myclass) for myclass in classes])

       X = np.array(x).astype('float')
       y = classIndices
       target_names = labels

       #Apply dimensionality reduction
       pca = PCA(n_components=2)
       X_r = pca.fit(X).transform(X)

       lda = LDA(n_components=2)
       X_r2 = lda.fit(X, y).transform(X)

        #Create 2D visualizations
       fig = plt.figure()
       ax=fig.add_subplot(1, 2, 1)
       bx=fig.add_subplot(1, 2, 2)

       fontP = FontProperties()
       fontP.set_size('small')

       colors = np.random.rand(len(labels),3)

       for  c,i, target_name in zip(colors,range(len(labels)), target_names):
           ax.scatter(X_r[y == i, 0], X_r[y == i, 1], c=c, 
                      label=target_name,cmap=plt.cm.coolwarm)
           ax.legend(loc='upper center', bbox_to_anchor=(1.05, -0.05),
                     fancybox=True,shadow=True, ncol=len(labels),prop=fontP)
           ax.set_title('PCA')
           ax.tick_params(axis='both', which='major', labelsize=6)

       for c,i, target_name in zip(colors,range(len(labels)), target_names):
           bx.scatter(X_r2[y == i, 0], X_r2[y == i, 1], c=c, 
                      label=target_name,cmap=plt.cm.coolwarm)
           bx.set_title('LDA');
           bx.tick_params(axis='both', which='major', labelsize=6)

       # Encode image to png in base64
       io = StringIO()
       fig.savefig(io, format='png')
       data = io.getvalue().encode('base64')

       return html.format(data)

run(host='mindwriting.org', port=8079, debug=True) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-17T05:51:23.280

您可以按照以下教程在 Azure ML 中部署 scikit-learn 模型并自动生成 Web 服务：

[使用 Python 和 Azure ML 构建和部署预测性 Web 应用程序](http://blogs.technet.com/b/machinelearning/archive/2015/08/21/build-and-deploy-a-predictive-web-app-using-python-and-azure-ml.aspx)

或者[yHat](https://www.yhathq.com/) + [Heroku](https://www.heroku.com/)的组合也可以解决问题

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-03T20:49:19.093

我正在开发一个包装`predict`和`predictproba`方法并将它们公开为 Web api 的 Docker 图像：[https ://github.com/hexacta/docker-sklearn-predict-http-api](https://github.com/hexacta/docker-sklearn-predict-http-api)

您需要保存模型：

```
from sklearn.externals import joblib
joblib.dump(clf, 'iris-svc.pkl') 
```

创建一个 Dockerfile：

```
FROM hexacta/sklearn-predict-http-api:latest
COPY iris-svc.pkl /usr/src/app/model.pkl 
```

并运行容器：

```
$ docker build -t iris-svc .
$ docker run -d -p 4000:8080 iris-svc 
```

然后你可以提出请求：

```
$ curl -H "Content-Type: application/json" -X POST -d '{"sepal length (cm)":4.4}' http://localhost:4000/predictproba
  [{"0":0.8284069169,"1":0.1077571623,"2":0.0638359208}]
$ curl -H "Content-Type: application/json" -X POST -d '[{"sepal length (cm)":4.4}, {"sepal length (cm)":15}]' http://localhost:4000/predict
  [0, 2] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-04T10:24:56.657

您可以将 Plotly Dash 用于演示，甚至用于范围有限的应用程序。

[https://dash-gallery.plotly.host/Portal/](https://dash-gallery.plotly.host/Portal/)获取一些带有代码源的示例。你有 sklearn 的机器学习示例。

[https://dash.plotly.com/deployment](https://dash.plotly.com/deployment)用于部署，主要使用 Heroku。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-08T13:55:57.873

如果你走烧瓶路线，我强烈建议你在[Youtube 上](https://youtu.be/MwZwr5Tvyxo)观看 Corey Shafer 系列。这是一个扎实的系列，可以让你快速开始，评论部分还有其他观众提供的许多有用的注释。

此外，由于我假设您将在其他地方构建模型并希望在您的站点上对它们进行评分，因此您可能希望在开发后使用 pickle 来存储模型对象，然后在您的 flask 中使用 pickle 加载模型对象`config.py`。

# php - 在 php 中检查同一页面上的验证码

> ID：11600478
> 
> 赞同：0
> 
> 时间：2012-07-22T12:56:40.750
> 
> 标签：php, javascript, captcha

我正在从用户输入一个表单，该表单在提交时调用一个javascript函数并检查是否填写了强制条目。如果是这样，它会转到另一个文件。现在我正在另一个文件中检查这个验证码。我怎么能在同一页面上这样做？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:07:02.027

验证码生成代码

验证码.php：

```
$string = '';
for ($i = 0; $i < 5; $i++) // 5 -is considered here as the length of string
    $string .= chr(rand(97, 122));
$_SESSION['captcha']=$string;   // stores to session 
$image = imagecreatetruecolor(110, 28);
$fontArray[0]="a4.ttf";$fontArray[1]="a5.ttf";$fontArray[2]="a1.ttf";$fontArray[3]="a4.ttf";
// just a font array for diff look Note : try ttf
$font = 'font/'.$fontArray[rand()%3]; // selecting random font
$color = imagecolorallocate($image, 255, 255, 255);// color
$background = imagecolorallocate($image, 0, 0, 0); // background color
$grey = imagecolorallocate($image, 180, 180, 180);//shadow color
imagefilledrectangle($image,0,0,399,99,$background);
imagettftext($image, 18, 0, 11, 23, $grey, $font, $string);//shadow of the text
imagettftext($image, 18, 0, 10, 22, $color, $font, $string);// text
//Actual function array imagettftext ( resource $image , float $size , float $angle , int $x , int $y , int $color , string $fontfile , string $text )
header("Content-type: image/png");
imagepng($image); 
```

然后将其用作显示页面中的图像。喜欢 -

```
<img id="capcaptcha" src="captcha.php" />
<a onclick="new_capcaptcha()">Click here to reload captha</a> 
```

jQuery

```
function new_capcaptcha(){
    $('#capcaptcha').attr('src','');
    $('#capcaptcha').attr('src','captcha.php?rand='+Math.random());
    // to avoid browser cache passed 'rand'
    } 
```

对于验证，您可以使用先前存储的会话变量 $_SESSION['captcha']

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:16:35.147

一个简单的 PHP 验证码脚本

```
<?php

session_start();
include("captcha.php");
$_SESSION['captcha'] = captcha();

echo '<img src="' . $_SESSION['captcha']['image_src'] . '" alt="CAPTCHA" />';

?> 
```

更多- [http://www.abeautifulsite.net/blog/2011/01/a-simple-php-captcha-script/](http://www.abeautifulsite.net/blog/2011/01/a-simple-php-captcha-script/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-14T06:00:19.837

验证码生成器 -

```
<?php 
session_start();
//Settings: You can customize the captcha here
$image_width = 200;
$image_height = 60;
$characters_on_image = 5;
$font = './monofont.ttf';

//The characters that can be used in the CAPTCHA code.
//avoid confusing characters (l 1 and i for example)
$possible_letters = '23456789bcdfghjkmnpqrstvwxyz';
$random_dots = 140;
$random_lines = 5;
$captcha_text_color="0x142864";
$captcha_noice_color = "0x142864";

$code = '';

$i = 0;
while ($i < $characters_on_image) { 
$code .= substr($possible_letters, mt_rand(0, strlen($possible_letters)-1), 1);
$i++;
}

$font_size = $image_height * 0.75;
$image = @imagecreate($image_width, $image_height);

/* setting the background, text and noise colours here */
$background_color = imagecolorallocate($image, 255, 255, 255);

$arr_text_color = hexrgb($captcha_text_color);
$text_color = imagecolorallocate($image, $arr_text_color['red'], 
        $arr_text_color['green'], $arr_text_color['blue']);

$arr_noice_color = hexrgb($captcha_noice_color);
$image_noise_color = imagecolorallocate($image, $arr_noice_color['red'], 
        $arr_noice_color['green'], $arr_noice_color['blue']);

/* generating the dots randomly in background */
for( $i=0; $i<$random_dots; $i++ ) {
imagefilledellipse($image, mt_rand(0,$image_width),
 mt_rand(0,$image_height), 2, 3, $image_noise_color);
}

/* generating lines randomly in background of image */
for( $i=0; $i<$random_lines; $i++ ) {
imageline($image, mt_rand(0,$image_width), mt_rand(0,$image_height),
 mt_rand(0,$image_width), mt_rand(0,$image_height), $image_noise_color);
}

/* create a text box and add 6 letters code in it */
$textbox = imagettfbbox($font_size, 0, $font, $code); 
$x = ($image_width - $textbox[4])/2;
$y = ($image_height - $textbox[5])/2;
imagettftext($image, $font_size, 0, $x, $y, $text_color, $font , $code);

/* Show captcha image in the page html page */
header('Content-Type: image/jpeg');// defining the image type to be shown in browser widow
imagejpeg($image);//showing the image
imagedestroy($image);//destroying the image instance
$_SESSION['6_letters_code_1'] = $code;

function hexrgb ($hexstr)
{
  $int = hexdec($hexstr);

  return array("red" => 0xFF & ($int >> 0x10),
               "green" => 0xFF & ($int >> 0x8),
               "blue" => 0xFF & $int);
}
?> 
```

您还可以从 www.uandblog.com ( [http://www.uandblog.com/How-to-Create-Captcha-Code-using-PHP](http://www.uandblog.com/How-to-Create-Captcha-Code-using-PHP) )获取详细信息

# javascript - 使用 jQuery 检查 ID 是否存在

> ID：11600479
> 
> 赞同：19
> 
> 时间：2012-07-22T12:56:54.197
> 
> 标签：javascript, jquery

> **可能重复：**
> [查找元素是否存在于整个 html 页面中](https://stackoverflow.com/questions/7227087/finding-whether-the-element-exists-in-whole-html-page)

有什么方法可以检查 jQuery 中是否存在 ID $('#ID')

前任：

`$('#cart').append('<li id="456">My Product</li>');`

在运行 append() 到这样的事情之后，我想检查我的 ID $('#456') 是否存在。如果它退出我想更改文本，否则我想附加一个新的

*   .

    ```
    $(document).ready(function() {
            $('#RAM,#HDD').change(function() {

                var product = $(this).find("option:selected").attr("product");

                $.ajax({
                    url: 'ajax.php',
                    type: 'post',
                    data: $(this).serialize(),
                    dataType: 'json',
                    success: function(data) {
                        $('#cart').empty();
                        $.each(data, function(index, value) {
                            $('#cart').append('<li id="'+product+'">'+ value['price'] +'</li>');
                        });
                    }
                });
            });
        }); 
    ```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-22T13:04:07.923

```
if ($('#456').length)
{
 /* it exists */
}
else
{
 /* it doesn't exist */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T13:02:24.367

您可以这样做来查看选择器是否存在：

```
jQuery.fn.exists = function(){return this.length>0;}

if ($(selector).exists()) {
    // Do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T14:02:07.763

```
function checkExists(sel) {
    var status = false;
    if ($(sel).length) status = true;
    return status;
} 
```

**[工作样本](http://jsfiddle.net/UX78y/3/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T13:00:34.467

呃，我不确定你为什么要这样做，但为了这样做，你需要稍微重新排列你的代码。

```
success: function(data) {
    var cart = $('#cart');
    cart.empty();
    $.each(data, function(index, value) {
        cart.append('<li id="'+product+'">'+ value['price'] +'</li>');
    });
    if(cart.find('#456').length) {
        cart.find('#456').text('Whatever you would like');
    }
} 
```

我“缓存”了您的购物车选择器以节省 DOM 查找。

# android - 如何在 Android 中使用 RSS 在 textview 中嵌入链接标签

> ID：11600480
> 
> 赞同：1
> 
> 时间：2012-07-22T12:57:10.723
> 
> 标签：android, rss, textview

我制作了一个基本的 rss 阅读器，它可以读取提要并将其显示在列表视图中，然后我进一步尝试通过添加选项卡和编写自定义适配器来改进它，现在我想要实现的下一步是提供基本功能，只要标题（通过文本视图显示）被点击/触摸与之关联的链接（链接已通过他的 rss/xml 提取）在浏览器中启动。现在，我知道使用 URI 将链接启动到浏览器是一件简单的事情，导致麻烦的是我如何保持与它关联的 textview 的链接？

我已经实现了 onclicklistener 我需要弄清楚的是如何实现相关链接的检索，以便我可以从中制作一个 URI 并在浏览器中启动它。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:06:06.897

您应该使用标题和 url 创建一个包装器对象。然后用这些对象填充列表视图，并获取触发浏览器活动的 url。

就像是：

```
class RssObect {
    string title;
    string url;

    //contructors

    //getters and setters
} 
```

然后在适配器上将列表设置为`List<RssObect> list = getRssFeed(...)`...。然后在项目单击侦听器上只需使用当前选定的项目`(list.get(selected).getUrl());`

# ios - ARC 系统释放对象时的通知

> ID：11600483
> 
> 赞同：0
> 
> 时间：2012-07-22T12:58:10.000
> 
> 标签：ios, notifications, automatic-ref-counting, mpmovieplayercontroller, dealloc

我正在将我的 Huge 项目转换为 ARC，尽管成功完全转换并且我正在使用它，但在 dealloc 中仍有一些代码行需要调用。
示例 当 dealloc 用于在 ARC 之前调用或任何其他通知需要在 dealloc 中注销时，我正在正确地停止和释放 MPMoviePlayerController。

现在的问题是我正在使用dealloc（没有[super dealloc]）但它没有被调用，是否有任何调整可以让我调用dealloc，这样我就不必更改大部分代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T13:10:40.393

`dealloc`通常在 ARC 环境中调用。您可以通过创建一个指向其中包含 NSLog 的简单对象的局部变量来自己验证它`dealloc`，然后让它超出范围。

您可能希望使用 Instruments 来跟踪您的对象所持有的内容。

# c++ - 尝试写入共享内存时出现总线错误

> ID：11600488
> 
> 赞同：2
> 
> 时间：2012-07-22T12:59:35.077
> 
> 标签：c++, c, linux, x86-64

我尝试将共享内存与**shm_open**和**mmap**一起使用。但是，每当我尝试写入该内存时，都会出现总线错误。下面给出了极简示例代码。这里有什么问题，如何解决？

```
#include <stdio.h>
#include <sys/mman.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

// compile with -lrt

char fname[64];
int fd;

int main()
{
    int * sm;
    sprintf( fname, "%d_%u", 4, 4 ); 

    if ((fd = shm_open(fname, O_CREAT | O_RDWR, 0777)) == -1)
    {        
        perror(NULL);
        return 0;
    }
    sm = (int*)mmap(0, (size_t)4096, PROT_READ|PROT_WRITE, MAP_FILE|MAP_SHARED, 
      fd, 0);
    printf( "Now trying to see if it works!\n" );
    sm[0] = 42;
    printf( "%d, %d!\n", sm[0], sm[1] );

    return 0;
} 
```

我得到的输出如下

```
Now trying to see if it works!
Bus error 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T13:05:14.040

新创建的对象的大小为零。您不能通过映射或写入其映射来更改对象的大小。您可能需要先`ftruncate`致电`mmap`。（如果您的代码有错误检查，这将更容易弄清楚。）

# vim - 从终端命令行将一行复制到 vim 寄存器中

> ID：11600492
> 
> 赞同：4
> 
> 时间：2012-07-22T13:00:49.623
> 
> 标签：vim

我正在尝试编写一个脚本，该脚本将在 vim 中打开一个文件并将其中的特定行复制到 vim 的一个寄存器中。当脚本再次运行时，它将决定再次打开文件，然后将 vim 寄存器中的值粘贴回去。实际上，脚本应该在每次运行时切换值。

例如，假设我想在运行脚本时将单词“foo”切换为“bar”，然后在再次运行脚本时再次切换回“foo”。我可以通过以下方式获得 foo 这个词：

```
vim '+/foo' myfilename 
```

而且我知道当我在 vim 中时，我可以通过执行将 'foo' 加载到寄存器 'q' 中

```
"qyy 
```

但是使用 :reg 检查我的寄存器时，以下命令不起作用

```
vim '+/foo' '+"qyy' myfilename 
```

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T13:11:06.407

您正在尝试在命令行模式下执行普通模式命令（这就是 +arguments 的意思）。执行您想要的操作的正确命令行是：

```
vim '+/foo' '+normal "qyy' myfilename 
```

有关`:help +cmd`此类论点的详细说明，请参阅 。

# git - 变基后减小远程 git 存储库的大小？

> ID：11600494
> 
> 赞同：1
> 
> 时间：2012-07-22T13:01:04.147
> 
> 标签：git

在 rebase 和做 a 之后`git push -f`，存储库的大小每次都会变大。我在 Bitbucket 和 Beanstalk 上都观察到了这种行为。每次我进行一次快进推送时，我的 400k 存储库似乎变成了 800k，然后是 1200k。

我尝试在`git gc --aggressive`本地执行然后执行`git push -f`，这似乎并没有减少远程存储库的大小。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:21:15.103

您基本上必须等待您的远程提供商决定为您 gc。您可能希望访问由 SHA1 引用的提交，这些提交现在没有被从分支访问的任何历史记录所指向（或者例如，拉取请求可能引用这些提交，即使分支已被删除）。

您可能可以联系客户服务并让他们为您执行此操作，因为我知道例如 GitHub 有此选项（因为它在 github:enterprise 的管理界面中公开）。

如果您接近您的尺寸限制，可能会有一些自动触发。

# jquery - 如何使用 JqueryMobile 动态添加列表视图？

> ID：11600496
> 
> 赞同：0
> 
> 时间：2012-07-22T13:01:21.857
> 
> 标签：jquery, jquery-mobile

我正在开发一个应用程序，我正在使用 jQuery mobile 作为 UI。有没有人知道如何使用 js 动态实现列表视图。静态代码片段如下：

```
<ul data-role="listview" data-theme="g"> 
      <li><a href="acura.html">Acura</a></li> 
      <li><a href="audi.html">Audi</a></li> 
      <li><a href="bmw.html">BMW</a></li> 
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:16:42.220

你可以这样做：

```
<ul data-role="listview" data-theme="g" id="lstSample">

</ul> 
```

在js中

```
 for(var i=0;i<urs_source.length;i++){
        $("#lstSample").append($("<li><a href='" + urs_source[i].link + "'>" + urs_source[i].text  + "</a></li>"));
}

$('#lstSample').listview('refresh'); 
```

最后，您需要刷新列表视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:00:54.900

使用 JS 将元素添加到列表后；您需要调用[`refresh`](http://jquerymobile.com/demos/1.1.1/docs/lists/lists-methods.html)它以让 JQM 增强它。

```
$('.selector').listview('refresh'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T18:36:54.233

所以你想将 li 元素添加到你的 ui 元素中吗？

如果是这样，您可以执行以下操作：

```
<ul data-role="listview" data-theme="g" id="mylist"> 
      <li><a href="acura.html">Acura</a></li> 
      <li><a href="audi.html">Audi</a></li> 
      <li><a href="bmw.html">BMW</a></li> 
</ul> 
```

* * *

```
function addlist(link, text) {
$("#mylist").append("<li><a href='" + link + "'>" + text + "</a></li>");
} 
```

* * *

然后你可以像这样添加调用函数的列表项：

```
addlist("ford.html", "Ford"); 
```

否则我不明白你的问题:-(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T13:05:35.863

```
<ul data-role="listview" data-theme="g" id="mylist"> 
      <li><a href="acura.html">Acura</a></li> 
      <li><a href="audi.html">Audi</a></li> 
      <li><a href="bmw.html">BMW</a></li> 
</ul> 
```

```
$("#mylist").css("display","none");
$("#mylist").css({display:"none", backgroundColor:"red"}); 
```

这应该会有所帮助。

# php - 无法将 VAR 传递给 PDO SQL 查询

> ID：11600497
> 
> 赞同：1
> 
> 时间：2012-07-22T07:01:23.320
> 
> 标签：php, mysql, sql, pdo

由于某种原因，我无法将 VAR 传递给 PDO SQL 查询。

```
<?php
$hostname = "host";
$username = "username";
$password = "pass";

$score = "B" ;

try {
    $dbh = new PDO("mysql:host=$hostname;dbname='DBNAME'", $username, $password);
    echo "Connected to database"; // check for connection
    $dbh->exec("UPDATE Quiz1 SET '$score' = 1 WHERE Question = 1");  // THIS DOES NOT  
    //$dbh->exec("UPDATE Quiz1 SET B = 1 WHERE Question = 1"); // THIS WORKS
}
catch(PDOException $e)
    {
    echo $e->getMessage();
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:31:24.257

```
$dbh->exec("UPDATE Quiz1 SET `$score` = 1 WHERE Question = 1"); 
```

如果出于某种原因必须引用表名或列名，则必须在 MySQL 中使用 `。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T08:07:14.563

您在`$score`此处使用变量作为属性名称，并且属性名称不应包含在引号中。尝试这个：

```
$dbh->exec("UPDATE Quiz1 SET $score = 1 WHERE Question = 1"); 
```

（我没有测试过。）

# java - 在 apache POI 中写入长值以 excel

> ID：11600500
> 
> 赞同：2
> 
> 时间：2012-07-22T13:01:36.053
> 
> 标签：java, excel, apache-poi, long-integer

当我使用 Apache POI 将长值写入 Excelsheet 中的单元格时，它会通过一些数值操作来写入它。例子：

```
cell = row.createCell(6);
cell.setCellValue(someObt.getLongValue());  
// long value returned is 365646975447
// in excel sheet, it is written as 3.65647E+11.
// but when i click on the cell, i can see 365646975447 as the value. 
```

我希望它在我写的时候显示确切的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T13:10:04.070

该单元格是一般类型而不是数字类型。

你需要这样做 cell.setCellType(HSSFCell.CELL_TYPE_NUMERIC);

如果您将 365646975447 手动复制粘贴到常规类型的 Excel 单元格中，它将显示 3.65647E+11。如果将其更改为数字，则它会正确显示。

尝试这个：

```
import java.io.FileOutputStream;

import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.CellStyle;
import org.apache.poi.ss.usermodel.DataFormat;
import org.apache.poi.ss.usermodel.Row;

public class Test
{
    public static void main(String[] args)
    throws Exception
    {
        HSSFWorkbook wb = new HSSFWorkbook();
        HSSFSheet sheet = wb.createSheet("format sheet");
        CellStyle style;
        DataFormat format = wb.createDataFormat();
        short rowNum = 0;
        short colNum = 0;

        Row row = sheet.createRow(rowNum++);
        Cell cell = row.createCell(colNum);
        cell.setCellValue(365646975447.0);
        style = wb.createCellStyle();
        style.setDataFormat(format.getFormat("0.0"));
        cell.setCellStyle(style);

        FileOutputStream fileOut = new FileOutputStream("workbook.xls");
        wb.write(fileOut);
        fileOut.close();
    }
} 
```

还要检查： http: [//poi.apache.org/spreadsheet/quick-guide.html](http://poi.apache.org/spreadsheet/quick-guide.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-15T15:02:29.427

row.createCell(key, CellType.NUMERIC) - 因为不推荐使用 setCellType

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T21:55:50.897

在 POI 4.1 版中，API 如下：

```
import org.apache.poi.ss.usermodel.CellType;
import org.apache.poi.xssf.usermodel.XSSFCell;

...
XSSFCell cell = row.createCell(key);
cell.setCellType(CellType.NUMERIC); 
```

# objective-c - 从 SuperView 中绝对删除/删除 UIImageView

> ID：11600504
> 
> 赞同：0
> 
> 时间：2012-07-22T13:02:35.927
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, uiimageview

我想知道如何从我的超级视图中删除 UIImageView 。我尝试了很多东西，例如：

1.  imageView.hidden = 是；
2.  [imageView removeFromSuperview];
3.  imageView.opaque = 是；
4.  imageView.alpha = 0.0f;

但问题是，当我删除 UIImageView 时，它所占用的空间是可见的。我想将 SuperView 的大小重新调整为初始大小。

我怎么能这样做？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:13:21.710

所以听起来你实际上在一个窗口中有两个不同的视图。假设它们各自占据了屏幕上一半的空间，viewA 是你想要的，viewB 是你不想要的。

```
[viewB removeFromSuperView];
viewA.frame = CGRectMake(0.0, 0.0, 320.0, 460.0);  <--- Or any other size. 
```

# c# - 在 Winforms 应用程序中设计动态搜索功能

> ID：11600507
> 
> 赞同：-2
> 
> 时间：2012-07-22T13:03:02.087
> 
> 标签：c#, .net, sql, sql-server-2008

我想在.net 桌面应用程序中构建一个搜索表单，该应用程序用于基本上搜索交易表，比如客户订单。

我将有很多搜索过滤器，这些过滤器显然不是强制性的，并且基于参数，将填充结果集并将其绑定到数据网格。

基本上我应该能够概括表单的生成，因此每次添加新的搜索过滤器时我的字体都需要部署 dll/exe。

我可能想不时在网格中添加/删除新字段，我喜欢使用 SQL 来处理这些类型的更改，这样就不需要部署 dll/exe

现在我想知道构建这个的有效设计方法是什么。

我的环境是 .NET 3.5、C#、SQL Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:24:21.227

在 SQL 中有一个包含要搜索的列的表。从该表中读取以构建搜索选项。因此，您可以向搜索表添加一列而不是重新部署。如果您希望允许用户从所有列中搜索，则直接从表中读取列。

# java - 如何根据密码在 Java 中创建密钥对？

> ID：11600509
> 
> 赞同：9
> 
> 时间：2012-07-22T13:03:16.040
> 
> 标签：java, encryption

我想允许 Alice 创建一个公钥/私钥对，以便 Bob 可以发送她的机密消息。但是，我希望 Alice 能够从任何地方查看她的消息，而她不得不随身携带一个包含她的私钥的记忆棒会很痛苦。Alice 有没有办法根据她记得的密码创建公钥/私钥对？通过这种方式，她可以随时简单地生成私钥（和公钥）。

这个问题的简短版本是：我在哪里可以找到[cryptico.js](http://cryptico.wwwtyro.net/)的 Java 等价物。

此外，这是关于 Stack Overflow[的相同问题，但适用于 javascript。](https://stackoverflow.com/questions/11156275/generate-rsa-key-pair-in-javascript-based-on-a-password)

编辑：这是我第一次尝试解决方案：

```
 SecureRandom saltRand = new SecureRandom(new byte[] { 1, 2, 3, 4 });
    byte[] salt = new byte[16];
    saltRand.nextBytes(salt);

    int keyLength = 3248;
    SecretKeyFactory factory = SecretKeyFactory
            .getInstance("PBKDF2WithHmacSHA1");
    KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, 8192, keyLength);
    SecretKey key = factory.generateSecret(spec);

    SecureRandom keyGenRand = SecureRandom.getInstance("SHA1PRNG");
    keyGenRand.setSeed(key.getEncoded());

    KeyPairGenerator gen = KeyPairGenerator.getInstance("RSA");
    gen.initialize(keyLength, keyGenRand);
    java.security.KeyPair p = gen.generateKeyPair(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T14:17:32.037

在谈论 RSA 时：您可以使用 PBKDF2 的结果来播种伪随机数生成器，该生成器又可以用于生成密钥对。请注意，使用 SecureRandom 将不起作用，因为它会将种子*添加*到池中，而不是完全重新初始化 rng。RSA 需要 PRNG 才能找到随机素数。

如果你可以使用椭圆曲线密码学，你会更好。您可以在 F(p) 上选择标准 NIST 或 Brainpool 曲线。然后您可以使用 PBKDF2 的 32 字节输出作为私钥并计算公钥。ECC 只需要一个随机私钥，并且由于 PBKDF2 的输出应该与随机无法区分，因此输出会很好。您不仅不需要额外的 PRNG，而且还为自己节省了计算 RSA 密钥对的时间——这可能非常重要。

请注意，没有什么可以阻止对使用所述计算密钥加密的内容进行暴力攻击，因此您最好要求提供 16 个字符或更多字符的密码，其中包含非字典单词、数字和符号。任何更少的东西都可能会失败，特别是如果用户没有意识到可能的攻击。请注意，如果您没有存储空间，则不能使用随机盐。如果您不能使用随机盐，则无法防御彩虹表（对于您的特定应用程序，您当然可以使用特定于应用程序的盐）。此外，具有相同密码的人将*生成相同的私钥*。

当然，默认方式（例如在 PGP 中）是存储使用基于密码的加密方式加密的私钥。然而，这需要存储。这种方法的优点是您可以拥有一个完全随机的密钥，这意味着如果不访问密钥存储，就不可能对密文进行暴力攻击。它增加了一个重要的额外层。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T14:04:10.403

您没有提供太多详细信息，但如果您想使用 生成密钥对，[`java.security.KeyPairGenerator`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyPairGenerator.html)则必须定义自己的扩展类[`SecureRandom`](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)，但仅使用提供的密码作为熵源。

您不需要实现[`SecureRandomSpi`](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandomSpi.html)类，只需使用参数调用超类的[受保护构造](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html#SecureRandom%28java.security.SecureRandomSpi,%20java.security.Provider%29)`(null, null)`函数即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T13:33:28.993

RSA 密钥长度通常为 1024 或 2048 位。这使得 128 或 256 个字节。

密码通常有 8 个字节长（并且只使用大约 64 个不同的字节）。

如果 RSA 密钥是从密码中派生的，那么您将失去算法的大部分强度。攻击者只需猜测或暴力破解 8 字节密码，而不是 128 或 256 字节长的密钥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T14:41:01.810

使用共享密钥。

```
String encryptionKey = "53616d706c6550617373776f726453616d706c6550617373776f726453616d70"; // string to hex of "SamplePasswordSamplePasswordSamp"
String sampleText = "sampletext";
String encrypted = null;
String decrypted = null; 
```

**要加密使用：**

```
Cipher cipher = Cipher.getInstance("AES");
cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(Hex.decodeHex(encryptionKey.toCharArray()), "AES"));
encrypted = Hex.encodeHexString(cipher.doFinal((sampleText.toString()).getBytes())); 
```

**解密使用：**

```
 Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(Hex.decodeHex(encryptionKey.toCharArray()), "AES"));
    decrypted = new String(cipher.doFinal(Hex.decodeHex(enc.toCharArray()))); 
```

**注意** 十六进制为：import org.apache.commons.codec.binary.Hex；在 Maven 中：

```
<dependency>
    <groupId>commons-codec</groupId>
    <artifactId>commons-codec</artifactId>
    <version>1.6</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T14:09:46.250

为什么不允许通过密码访问您的网络应用程序（因为这实际上就是您正在做的事情）而只使用 https？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-19T10:40:28.930

Disclaimer: this naive approach is insecure, so it is NOT recommended for production systems. However for testing - suits very well.

Code

```
private KeyPair getKeyPair(String password) throws GeneralSecurityException {
    /*// https://stackoverflow.com/a/992413/2078908
    byte[] salt = new byte[]{1, 2, 3};
    SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA256");
    KeySpec seedSpec = new PBEKeySpec(password.toCharArray(), salt, 65536, 256);
    byte[] seed = factory.generateSecret(seedSpec).getEncoded();*/
    byte[] seed = password.getBytes(UTF_8);

    SecureRandom rnd = SecureRandom.getInstance("SHA1PRNG");
    rnd.setSeed(seed);

    RSAKeyGenParameterSpec spec = new RSAKeyGenParameterSpec(2048, RSAKeyGenParameterSpec.F4);
    KeyPairGenerator pairGenerator = KeyPairGenerator.getInstance("RSA");
    pairGenerator.initialize(spec, rnd);

    return pairGenerator.generateKeyPair();
} 
```

Test

```
@Test
public void testPrivateKeys() throws Exception {
    System.out.println("private key 1: " + md5(getKeyPair("pwd-1").getPrivate().getEncoded()));
    System.out.println("private key 1: " + md5(getKeyPair("pwd-1").getPrivate().getEncoded()));
    System.out.println("private key 2: " + md5(getKeyPair("pwd-2").getPrivate().getEncoded()));
    System.out.println("private key 2: " + md5(getKeyPair("pwd-2").getPrivate().getEncoded()));
}

private String md5(byte[] data) throws GeneralSecurityException {
    return javax.xml.bind.DatatypeConverter.printHexBinary(
        MessageDigest.getInstance("md5").digest(data));
} 
```

Test output

```
private key 1: 5A2009E6DC8B25321C6304F62BE45398
private key 1: 5A2009E6DC8B25321C6304F62BE45398
private key 2: 2ACB65656AF9AF7036F40ACF0CFE7CA3
private key 2: 2ACB65656AF9AF7036F40ACF0CFE7CA3 
```

# mysql - 从仅 id 更改为仅一个的多个类似请求更改

> ID：11600511
> 
> 赞同：0
> 
> 时间：2012-07-22T13:03:47.533
> 
> 标签：mysql, select

我使用不同的 ID 多次执行相同的请求：

```
SELECT n.id 
FROM news n 
JOIN news_tag nt ON r.id=nt.id_news 
WHERE nt.id_tag in (Select t.id_tag from news_tag t where t.id_news=2869) 
ORDER BY r.id DESC 
LIMIT 2 
```

此请求选择与给定新闻具有相同标签的 2 个最新新闻。

我想知道如何执行相同的请求，但只在一个请求中获得多个 ID 的结果！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:21:15.770

这是一个典型的“每组前 N 个”查询，在您的情况下，“B”为**2**。

这是我为每组 N 条记录编写[的通用解决方案。](http://code.openark.org/blog/mysql/sql-selecting-top-n-records-per-group)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:09:56.020

您是否尝试过 IN 子句？

[http://www.tutorialspoint.com/mysql/mysql-in-clause.htm](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)

如果我做对了，就可以这样做：

```
SELECT n.id 
FROM news n 
JOIN news_tag nt ON r.id=nt.id_news 
WHERE nt.id_tag in (Select t.id_tag from news_tag t where t.id_news IN (1,2,3,4,5,6)) 
ORDER BY r.id DESC 
LIMIT 2 
```

其中 1,2,3,4 等是文章的 ID。

希望这有帮助。

# php - 错误 404 。本地访问中的 xampp htdocs 问题

> ID：11600512
> 
> 赞同：0
> 
> 时间：2012-07-22T13:03:52.417
> 
> 标签：php, apache, ubuntu, xampp

我是 PHP 新手

我使用以下命令在 Ubuntu 12.04 LTS 上下载并安装 xampp-linux-1.7.3a.tar.gz 文件：

```
 tar xvfz xampp-linux-1.7.3a.tar.gz -C /opt 
```

使用此命令解决了 htdocs 问题：

```
 sudo chmod 777 -R /opt/lampp/htdocs/ 
```

并使用此命令设置密码：

```
 sudo /opt/lampp/lampp security 
```

在我的浏览器中，我转到本地主机地址，一切正常。但是当我浏览位于 htdocs 文件夹（newsite）中的站点时，会发生此错误：

```
 Object not found!  

 The requested URL was not found on this server. If you entered the URL manually please check your spelling and try again.  

 If you think this is a server error, please contact the webmaster.  
 Error 404  
 localhost  
 Sun 22 Jul 2012 11:38:05 AM IRDT  
 Apache/2.2.21 (Unix) DAV/2 mod_ssl/2.2.21 OpenSSL/1.0.0c PHP/5.3.8 mod_apreq2-20090110/2.7.1 mod_perl/2.0.5 Perl/v5.10.1 
```

我非常搜索网络，但我没有解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:31:36.237

Did you `chmod` the htdocs folder after adding mysite to it? Run your `chmod` command again and then restart Apache.

# jquery - 在 ajax.post 请求中发送 unicoded 字符串

> ID：11600514
> 
> 赞同：0
> 
> 时间：2012-07-22T13:04:13.437
> 
> 标签：jquery, asp.net-mvc-3, livechat

我正在使用“livechatstarterkit”在我的 mvc Web 应用程序中进行聊天功能。但是我的网络应用程序是从右到左的语言，用户的名字是波斯语。

这里的问题是，当使用波斯名称的用户以操作员身份登录时，他的名称编码会导致以下脚本：

```
<script type="text/javascript">
        var intervalId;
        var chatId = '@(Model)';
        var lastMsgId = 0;
        var opname = '@ViewBag.opname';
        $(document).ready(function () {
            getMsgs();
            intervalId = window.setInterval(function () {
                getMsgs();
            }, 3210);

            $('#chatText').keyup(function (e) {
                if (e.keyCode == 13) {
                    $.post('/chat/addmsg', { id: chatId, from: opname, msg: $('#chatText').val() }, function (data) { getMsgs(); });
                    $('#chatText').val('');
                }
            });
..... 
```

但是当我调试我的应用程序时，我看到来自操作员的消息没有发送，实际上`$.post('/chat/addmsg'....`代码没有执行并且请求没有发送到正确的操作。

这是 jscript 中 opname 的一些示例：“ `&#1662;&#1588;&#1578;&#1740;&#1576;&#1575;&#1606;&#1740;`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:13:35.363

```
$.ajax({
  url:"ax.php?action=post&save=1", 
  type: "POST", 
  data:
    { tabName: "basic", 
    rid: $("textarea#id").val(), 
    col:"id", 
    val:$(this).prev().val() },
  success:function (result){ setSpan(result);},
  dataType:"html", contentType: "text/plain; charset=UTF-8" } ) 
```

如何使用`$.ajax`函数来设置`contentType`属性。

> 向服务器发送数据时，使用此内容类型。默认为“application/x-www-form-urlencoded”，这在大多数情况下都可以。如果您将内容类型显式传递给 $.ajax()，那么它将始终被发送到服务器（即使没有发送数据）。数据将始终使用 UTF-8 字符集传输到服务器；您必须在服务器端对此进行适当解码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:17:11.480

代替：

```
var opname = '@ViewBag.opname'; 
```

和：

```
var opname = @Html.Raw(Json.Encode(ViewBag.opname)); 
```

还要测试是否`Enter`以跨浏览器方式按下，您的代码应如下所示：

```
$('#chatText').keyup(function (e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if (code == 13) {
        var url = '@Url.Action("addmsg", "chat")';
        var msg = $(this).val();
        $.post(url, { id: chatId, from: opname, msg: msg }, function (data) { 
            getMsgs(); 
        });
        $(this).val('');
    }
}); 
```

# java - 汉宁 (von Hann) 窗口

> ID：11600515
> 
> 赞同：1
> 
> 时间：2012-07-22T13:04:30.013
> 
> 标签：java, android, signal-processing

```
public short[] HanningWindow(short[] signal_in ,int pos ,int size)
{
    for (int i= pos; i < pos+size; i++)
    {
        signal_in[i] = (short) ((signal_in[i]) * ( 0.5 * (1-Math.cos( (2 * Math.PI * i) /    (size - 1))))) ;
    }
    return signal_in;
} 
```

我正在尝试使用它

```
pos = (ring+delay*frame_rate*frame_size)%(frame_size*(frame_rate+1));
num = record.read(lin,pos,frame_size);           

GGSpecSub tempSpecSub = new GGSpecSub();
lin = tempSpecSub.HanningWindow(lin, pos, frame_size); 
```

这是我第一次使用实时 DSP - 请告诉我这是否是将汉宁窗应用于信号的正确方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:50:26.183

不，它需要更像这样：

```
public short[] HanningWindow(short[] signal_in, int pos, int size)
{
    for (int i = pos; i < pos + size; i++)
    {
        int j = i - pos; // j = index into Hann window function
        signal_in[i] = (short) (signal_in[i] * 0.5 * (1.0 - Math.cos(2.0 * Math.PI * j / size)));
    }
    return signal_in;
} 
```

# c# - 仅在行尾替换字符串

> ID：11600518
> 
> 赞同：0
> 
> 时间：2012-07-22T13:04:51.717
> 
> 标签：c#

我正在使用 C# 替换字符串中的文本，但当文本位于行尾时失败。

```
string filepent = filehex.Replace(",,,,,\r\n", ",EMPTY,EMPTY,EMPTY,EMPTY,EMPTY"); 
```

我正在将 txt 文件加载到文件流中，然后转换为字符串。我想替换一行末尾显示“,,,,”的任何地方。目前，上面的代码仅在文件末尾更改它。在应该更改它的行的末尾，我的十六进制编辑器说有 .. 或 0D 0A

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:51:37.963

我很想改用[File.ReadAllLines](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)拆分文件，进行替换，然后将它们重新组合在一起。也许不是最好的，但清楚地表达了你的目标。就像是：

```
string matchPattern = ",,,,,$"; // $ to match the end of the line.
string replacement = ",EMPTY,EMPTY,EMPTY,EMPTY,EMPTY";
string filepent = String.Join(
    Environment.NewLine, // or maybe just "\r\n"
    File.ReadAllLines(yourFilePath)
        .Select(line => Regex.Replace(line, matchPattern, replacement))); 
```

# php - 创建一个具有另一个类的对象的类

> ID：11600519
> 
> 赞同：1
> 
> 时间：2012-07-22T13:04:53.210
> 
> 标签：php, oop, class

我是 PHP OOP 的新手。我需要创建一个类 Place，它可能具有类 Token 的对象。如何正确执行此操作？

```
 class Token {

        var $value;

        function setValue($value) {
            $this->value = $value;
        }

        function getValue() {
            return $this->value;
        }

    }

    class Place {

        var $token;

        function addToken($token) {
            $this->token = $token;
        }

        function getToken() {
            return $this->token;
        }
    }

//... 
```

然后我需要创建上面定义的类的对象并从 Place 对象访问 Token 对象：

```
$t = new Token();
$t->setValue(5);
$p = new Place();
$p->addToken($t);
echo $p->getToken()->getValue; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:10:21.597

改变

```
echo $p->getToken()->getValue; 
```

至

```
echo $p->getToken()->getValue(); 
```

就这样。

# java - Synchronized 与 ReentrantLock 对性能的影响

> ID：11600520
> 
> 赞同：16
> 
> 时间：2012-07-22T13:05:06.800
> 
> 标签：java, multithreading

在多线程系统的队列实现方面，我遇到了一些惊喜。这是：-

场景：- 1 个生产者，1 个消费者：- 生产者将一个整数放入队列中。消费者只需将其从队列中删除。

队列的底层数据结构：- TreeSet（我从没想过会用到）、LinkedList、LinkedBlockingQueue（大小不定）

代码：- TreeSet 作为队列：-

```
while (i < 2000000) {
        synchronized (objQueue) {

            if (!(objQueue.size() > 0)) {
                try {
                    objQueue.wait();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            Integer x = objQueue.first();
            if (x != null) {
                objQueue.remove(x);
                ++i;
            }
        }
    } 
```

编辑：-

```
 while (i < 2000000) {
        synchronized (objQueue) {
            objQueue.add(i);
            ++i;
            objQueue.notify();
        }
    } 
```

对于 LinkedBlockingQueue：-

```
 while (i < 2000000){
        try {
            objQueue.put(i);
            ++i;
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            Thread.currentThread().interrupt();
        }
    }

      while (i < 2000000) {
        try {
            objQueue.take();
            ++i;

        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            Thread.currentThread().interrupt();
        }
    } 
```

对于 LinkedList ：- 与同步的类似代码。

问题：-

1) 当我通过 Visual VM 测量性能时，我观察到对于生产者代码，TreeSet 的性能优于 LinkedBlockingQueue 和 LinkedList，即使它需要 O(log n) 时间，但在 Linked 结构中创建对象是一个很大的开销. 为什么理论与实践大相径庭？为什么在队列实现中我们更喜欢链接的数组结构而不是树结构？

2) synchronized 与 ReeentrantLock 相比明显胜出，因为 TreeSet 的性能优于 LinkedList，而 LinkedList 的性能优于 LinkedBlockingQueue。我希望我可以附上 Visual VM 结果。这篇文章没有投票，[http://www.ibm.com/developerworks/java/library/j-jtp10264/index.html](http://www.ibm.com/developerworks/java/library/j-jtp10264/index.html)

操作在

Dell Vostro 1015，core 2 duo 2.10，2GB Ram，32 位操作系统和

JVM：Java HotSpot(TM) 客户端 VM（20.1-b02，混合模式） Java：版本 1.6.0_26，供应商 Sun Microsystems Inc.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-22T13:16:05.030

**1.如果您需要** **实现一个遍历链表的线程，锁定下一个节点然后解锁当前节点，**`ReentrantLock`可能更适合使用。

 ****2.** `Synchronized`关键字适用于**锁粗化等情况，提供自适应旋转、偏向锁和通过逃逸分析消除锁的可能性**。目前没有为 ReentrantLock 实现这些优化。

有关**适当的性能比较**，请参见：

[https://blogs.oracle.com/dave/javautilconcurrent-reentrantlock-vs-synchronized-which-should-you-use](https://blogs.oracle.com/dave/javautilconcurrent-reentrantlock-vs-synchronized-which-should-you-use)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T13:25:15.257

1.  因为您的基准测试存在缺陷：在实际用例中，从队列中生成和使用元素所花费的时间比在队列中添加和删除元素所花费的时间重要得多。所以队列的原始性能并不那么重要。顺便说一句，代码只显示了如何从第一个队列实现中获取元素，而不是如何添加它们。此外，适当结构的选择不是基于性能，而是基于行为。如果你想要一些并发的东西，你选择一个阻塞队列，因为它是为你实现的，并且没有像你的代码那样的错误。如果你想要 FIFO（这通常是你想要的），你不会选择 TreeSet。

2.  如果你想比较 synchronized 和 ReentrantLock，你不应该对一个数据结构使用一个数据结构，而对另一个数据结构使用另一个数据结构。ReentrantLock 过去更快，但现在它们处于同一水平（如果我相信 Brian Goetz 在 JCIP 中所说的话）。无论如何，出于安全/功能的原因，我会选择其中一个。不是出于性能原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-06T22:06:36.297

我想我知道问题出在哪里。

从 Java 1.6 开始，如果在单个线程中使用**同步**块中的锁，它就不会被锁住。因此，在获取锁时不会阻塞代码的执行。这种优化是有意义的——一个线程，不与另一个线程交互——什么都不做。

有两个主要场景需要测试：

1.  **在单线程**中执行的测试代码
***   **多线程****

 **您的测试在一个线程中执行，我猜伪锁不会像互斥锁一样被优化。我猜他们不会被 JIT 优化。

多线程的第二种选择对我来说更有意义，其中**ReentrantLock**是赢家，因为它在获取锁时不会阻塞所有线程。****

# algorithm - 为什么解决背包问题不被视为线性规划？

> ID：11600524
> 
> 赞同：11
> 
> 时间：2012-07-22T13:06:17.117
> 
> 标签：algorithm, linear-programming, knapsack-problem

尽管背包问题陈述似乎与*线性规划*中的问题相似，但为什么不将背包问题包含*在线性规划算法*的类别中？

 ** * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T13:27:06.867

背包可以写成*整数线性规划*程序。与正常的线性规划不同，这个问题要求解中的变量是整数。众所周知，线性规划可以在多项式时间内求解，而整数线性规划是 NP 完全的。

读者练习：证明 3SAT 可以简化为整数线性规划。

琐事：有一些近似算法可以解决诸如 MAX-3SAT（3SAT 的变体，我们希望最大化满足子句的数量）等问题。首先你把 MAX-3SAT 写成一个整数线性程序。然后，通过消除整数限制，将其*放松为线性规划。*然后，您在多项式时间内求解线性程序。最后，给定实数 x [i] ∈ [0,1]，将它们四舍五入为整数，或生成随机整数解 y [i ，其中 y] [i] = 1 的概率为 x [i]。*

# java - 如何从 keylistener 获取组合框的类型值

> ID：11600527
> 
> 赞同：0
> 
> 时间：2012-07-22T13:07:15.913
> 
> 标签：java, swing

如何在按键事件中获取可编辑组合框的类型值？请帮帮我。请找到我的代码：

```
comboInstrument.getEditor().getEditorComponent().addKeyListener(new KeyListener() {

    public void keyReleased(KeyEvent e) {
        System.out.println(comboInstrument.getSelectedItem().toString());
    }

    public void keyTyped(KeyEvent e) {
        // TODO Auto-generated method stub
    }

    public void keyPressed(KeyEvent e) {
        // TODO Auto-generated method stub
    } 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:10:14.427

**1.**当您在 JComboBox 中键入内容时，然后按 Enter。

**2.在****ActionListener接口的actionPerfomed()方法中**使用`getSelectedItem()`获取值。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T04:30:29.137

我可以通过以下代码获取键入的键值。getSelectedItem 仅检索先前选择的值，而不是新键入的值。感谢您的回复朋友。

```
comboInstrument.getEditor().getItem().toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:16:42.277

您将需要施放组合选定项目：

```
 MyClass myClass = (MyClass)combo.getSelectedItem();
    // process myClass 
```**

# html - 从 Wordpress 摘录中删除标题

> ID：11600529
> 
> 赞同：0
> 
> 时间：2012-07-22T13:07:30.217
> 
> 标签：html, wordpress

`the_excerpt()`Wordpress 中的函数，包括我的`h1`标签的内容，所以当试图在我的主页上显示博客文章的预览时，我得到如下内容：

“详细信息这是一个测试，测试很棒。”

详细信息是我的`h1`标签的内容，如您所见，没有任何意义。我想生成以下内容：

“这是一个测试，测试很棒。”

如何`h1`从我的摘录中删除标签的内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:44:39.703

您是否为相关博文撰写了摘录？

如果没有编写摘录，那么 WordPress 将使用您博客文章的前几行自动生成一个。

另外，您是否尝试过“get_the_excerpt()”？[get_the_exerpt() 的 Codex 文档](http://codex.wordpress.org/Function_Reference/get_the_excerpt)。

# azure - 如何确定 Azure 服务总线中的客户端可用的通道

> ID：11600530
> 
> 赞同：1
> 
> 时间：2012-07-22T13:07:54.230
> 
> 标签：azure, servicebus

你好，

我正在使用 Azure AppFabric 服务总线构建一个程序。我的意图是通过具有相同命名空间的服务总线公开多个设备。每个设备都使用“ServiceBusEnvironment.CreateServiceUri”方法通过具有不同“服务路径”的服务总线创建连接。例子：

第一主持人：

Uri relayAddress1 = ServiceBusEnvironment.CreateServiceUri("https", "MyNamespace", "MyServicePath1");

第二主持人：

Uri relayAddress2 = ServiceBusEnvironment.CreateServiceUri("https", "MyNamespace", "MyServicePath2");

我想知道是否可以从服务总线检索信息，哪些主机连接可用。我可以想象“MyServicePath1”、“MyServicePath2”和“MyServicePath4”可用，但“MyServicePath3”不可用。在客户端，我可以尝试为每个主机打开 4 个通道并捕获 CommunicationException 以确定主机是否可用，但这感觉效率不高。有没有办法在不捕获异常的情况下实现这一目标？

提前致谢，

斯坦维尔迪森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:25:55.207

嗨桑德里诺迪马蒂亚，

感谢你的快速回复。我已经成功地尝试了您的解决方案！再次感谢。

为了完整起见，我的实现：

***服务主机上的 DiscoveryMode 属性：***

```
 Uri relayAddress = ServiceBusEnvironment.CreateServiceUri(Uri.UriSchemeHttps, "MyNamespace", "MyServicePath1");

        BasicHttpRelayBinding relayBinding = new BasicHttpRelayBinding();

        ServiceHost serviceHost = new ServiceHost(typeof(ExternalDataExchangerTestServer));
        ServiceEndpoint endPoint = serviceHost.AddServiceEndpoint(typeof(IExternalDataExchanger), relayBinding, relayAddress);

        endPoint.Behaviors.Add(new TransportClientEndpointBehavior { TokenProvider = TokenProvider.CreateSharedSecretTokenProvider("YourName", "YourKey") });
        endPoint.Behaviors.Add(new ServiceRegistrySettings { DiscoveryMode = DiscoveryType.Public });

        serviceHost.Open(); 
```

***通过代码读取原子提要的解决方案：***

```
 public static List<string> GetAvailableServiceBusHosts(string serviceNamespace)
  {
     if (serviceNamespace == null)
        throw new ArgumentNullException("serviceNamespace");

     var relayAddress = ServiceBusEnvironment.CreateServiceUri(Uri.UriSchemeHttps, serviceNamespace, string.Empty);

     var availableHosts = new List<string>();

     var httpWebRequest = (HttpWebRequest)WebRequest.Create(relayAddress);

     httpWebRequest.Proxy = null;
     httpWebRequest.AutomaticDecompression = DecompressionMethods.Deflate | DecompressionMethods.GZip;
     httpWebRequest.Method = WebRequestMethods.Http.Get;

     using (var httpWebResponse = (HttpWebResponse)httpWebRequest.GetResponse())
     {
        using (var responseStream = httpWebResponse.GetResponseStream())
        {
           if (responseStream == null)
              throw new NullReferenceException("responseStream");

           var atomFormatter = new Atom10FeedFormatter();

           var xmlReader = XmlReader.Create(responseStream);
           atomFormatter.ReadFrom(xmlReader);

           var syndicationFeed = atomFormatter.Feed;

           foreach (var syndicationItem in syndicationFeed.Items)
           {
              availableHosts.Add(syndicationItem.Title.Text);
           }

           return availableHosts;
        }
     }
  } 
```

我希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:57:10.283

如果您将 ServiceRegistrySettings 的DiscoveryMode**设置**[为](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.serviceregistrysettings.discoverymode)Public **，**您的服务将在 atom 提要中可用。完成此操作后，您可以通过访问命名空间 url 获取服务列表：http:// **service-namespace** .servicebus.windows.net/

 ******参考：[如何：发现和公开服务总线应用程序](http://msdn.microsoft.com/en-us/library/windowsazure/ee706696)******

# objective-c - AFNetworking 上传文件到 s3 相当于 ASIHTTPRequest setData

> ID：11600532
> 
> 赞同：1
> 
> 时间：2012-07-22T13:08:38.500
> 
> 标签：objective-c, amazon-s3, asihttprequest, afnetworking

我正在使用 s3[签名和身份验证](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)来生成与移动客户端一起使用的签名。

我原来的课程使用的是 ASIHTTPRequest，但我想将其转换为 AFNetworking。

通过使用 ASIHTTPRequest 将文件上传到 s3，可以很简单地设置一些特定于 s3 的标头并将图像作为请求包含在内

```
 [request setData:data withFileName:filename andContentType:"image/jpeg" forKey:key]; 
```

根据其他人的建议，我使用以下代码发送带有请求的图像

```
 NSURLRequest *request = [httpClient multipartFormRequestWithMethod:@"PUT" path:@"/johnsmith/photos/puppy.jpg" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData> formData) {
        [formData appendPartWithFileData:imageData name:@"file" fileName:@"puppy.jpg" mimeType:@"image/jpeg"];
    }]; 
```

但是此请求将“Content-Type:image/jpeg”替换为

> 内容类型：multipart/form-data；边界=边界+0xAbCdEfGbOuNdArY

它与签名的消息不匹配，因此上传文件无效。

进一步谷歌搜索后，我找到了一个输入流方法

```
NSData *imageData = UIImageJPEGRepresentation(uploadImage, 0.5f);
NSInputStream *stream = [[NSInputStream alloc]initWithData:imageData];
operation.inputStream = stream; 
```

这时，AFNetworking 生成一个

```
Transfer-Encoding:Chunked 
```

并且 s3 响应错误说“您提供的标头暗示未实现的功能”

**更新**：对于解决方法，我只是评论替换我原来的 Content-header 的行。

# c++ - c/c++ 中类型的大小

> ID：11600536
> 
> 赞同：6
> 
> 时间：2012-07-22T13:09:37.377
> 
> 标签：c++, c, sizeof

[我最近在这里](https://stackoverflow.com/q/11600378/331785)问了一个关于`char`. 看着我的问题，它给我带来了另一个问题：是依赖于 CPU或CPU
中的位数，依赖于操作系统，依赖于编译器，还是上述的某种组合？谁决定我的编译器中的 4？`char``sizeof(int)``sizeof(int)`

**编辑：**让我解释一下：例如，我在 64 位系统上的编译器使用 32bit `int`。这是由编译器还是由操作系统设置为这个（确切的）操作系统/平台组合上所有编译器的标准 int ？`char`= 8位怎么样？操作系统可以决定使用 16 位字符吗？编译器可以吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T13:32:46.967

According to all ISO C standards, all sizes are measured in multiples of the size of a `char`. This means, by definition `sizeof(char) == 1`. The size of a `char` in bits is defined by the macro `CHAR_BIT` in `<limits.h>` (or `<climits>`). The minimum size of a `char` is 8 bits.

Additional type restrictions are:

```
sizeof(char) <= sizeof(short int) <= sizeof(int) <= sizeof(long int) 
```

`int` must be able to represent -32767 to +32767 - e.g. it must be at least 16 bits wide.

C99 added `long long int`, who's size is larger or equal to `long int`.

The rest is implementation-dependant. This means that the C compiler in question gets to choose how large exactly the numbers are.

* * *

How do the C compilers choose these sizes?

There are some common conventions most compilers follow. `long` is often chosen to be as large as a machine word. On 64bits machines where `CHAR_BIT == 8` (this is nearly always the case, so I'll assume that for the rest of this answer) this means `sizeof(long) == 8`. On 32 bit machines this means `sizeof(long) == 4`.

`int` is almost always 32 bits wide.

`long long int` is often 64 bits wide.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T13:19:59.120

> 诸如 char 或 sizeof(int) CPU 中的位数之类的东西是依赖于 CPU、依赖于操作系统、依赖于编译器还是上述的某种组合？

编译器相关。而且您的编译器本身是依赖于 CPU 和操作系统的。

这意味着如果你在你的 PC 上编译一个`int`有`void*`4 个字节的程序，并将可执行文件移动到另一台机器上，那么它不可能有不同的字节数。编译器输出特定机器的机器代码。

但是，如果你在不同的编译器上编译相同的源代码，或者在不同的操作系统上编译相同的编译器版本，或者在相同的编译器上使用不同的设置，那么你可能会遇到变化。

例如，在我的带有 64 位 GCC 的 PC 上，`void*`需要 8 个字节，但我用`-m32`它编译需要 4 个字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T13:21:34.367

好吧，是编译器设置了这些信息。他根据软件/硬件详细信息（例如您所说的CPU或操作系统）执行此操作。

# linux - Gdb 在自修改代码中切换断点

> ID：11600541
> 
> 赞同：0
> 
> 时间：2012-07-22T13:10:14.997
> 
> 标签：linux, debugging, gdb, breakpoints, self-modifying

我有一个程序在运行时会修改自己的代码。当我试图在代码中设置断点时，它永远不会中断，因为代码的修改会以某种方式删除断点。

我听说过硬件断点，但它是用 gdb 编写的，我的硬件不支持它们。有没有其他方法可以打破自我修改代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:14:04.173

GDB 有两种方式放置断点。一种是通过设置某些特殊寄存器来指示 CPU 在执行该行时中断（引发中断，然后内核将其转换为调试器的信号）。这些就是 GDB 所说的“硬件断点”。如果您的硬件不支持它们，则它们不受支持。

另一种方法是实际修改代码，并将要中断的行的第一条指令替换为引发所述中断的命令。例如，在 Intel X86 下，引发中断的命令，比如“int 5”，是两个字节长，但引发中断 3 的命令只有一个字节长。这样它就可以准确地用于此目的。

调试器用中断的指令替换指令，一旦断点被​​击中，用调试器干扰之前的代码替换该代码。是的，这种技术不适用于自修改代码（我应该提一下，也不适用于只读存储器中的代码，例如写入闪存的代码）。

如果您的代码足够有序（显然，它不是特别有序），您可以在将代码写入内存后立即中断一次，然后才在正确的位置放置第二个断点。如果你足够努力地研究 GDB 的脚本功能，你甚至可以让它自动化，这样你就不会被第一个断点所困扰。

总而言之，如果您正在编写自我修改的代码，那么您就偏离了这条路。祝你好运。你会需要它的。

沙查尔

# java - 是否可以在 Drawable 上应用多个 ColorFilters？

> ID：11600543
> 
> 赞同：2
> 
> 时间：2012-07-22T13:10:26.220
> 
> 标签：java, android

是否可以通过即在可绘制对象上应用第一个颜色过滤器然后在变异的可绘制对象上应用第二个颜色过滤器来在可绘制对象上应用多个颜色过滤器？

示例代码：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View returnView = super.getDropDownView(position, convertView, parent);
    Drawable d = returnView.getBackground();
    d.setColorFilter(0xFFF1F633, PorterDuff.Mode.MULTIPLY);
    // overrides the first color filter
    d.setColorFilter(0xFFEEEEEE, PorterDuff.Mode.LIGHTEN);
    returnView.setBackgroundDrawable(d);
    return returnView;
} 
```

# java - 从 ubuntu 中的 jar 文件启动 tomcat

> ID：11600545
> 
> 赞同：2
> 
> 时间：2012-07-22T13:10:29.293
> 
> 标签：java, tomcat, ubuntu, profiling

我第一次使用tomcat。我已经下载并解压了tomcat 7.0.28。我可以通过 ./startup.sh 和 ./shutdown.sh 从命令提示符启动和关闭它。到目前为止，它工作正常。我也可以在浏览器中看到 tomcat 主页和示例。

但我想要的是使用 java profiler 来分析 tomcat 服务器。**为此，我想从 jar 文件中运行它。类似 java -jar tomcat_allrequiredclasses.jar 的东西。**有什么办法可以像这样启动tomcat服务器吗？我试图运行位于 bin 目录中的 tomcat 的 jar 文件，但给了我 classNotdefined 异常（只是为了尝试我这样做）。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:24:14.680

Tomcat 需要在 JVM 启动时设置很多系统属性和类似的东西，因此脚本是必需的，除非您要使用“嵌入式 Tomcat”并使用[Tomcat 的嵌入式驱动](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/startup/Tomcat.html)程序编写自己的启动驱动程序。

我认为这对于仅附加分析器来说太过分了。大多数分析器都带有一个 JVM “代理”，您可以使用`-agentpath`命令行选项将其配置为在 JVM 启动时附加。这就是我附加 YourKit Java Profiler 的方式，例如：

```
CATALINA_OPTS="-agentpath:/path/to/yourkit/libyjpagent.so=${yourkit.options}"
$CATALINA_HOME/bin/startup.sh 
```

这将以通常的方式启动 Tomcat，但包含 JVM 分析器代理，以便您随后可以附加到它。

***更新以包含 OP 的示例***

你想这样做：

```
$ export CATALINA_OPTS="-javaagent:lib/jborat-agent.jar -Xss256m -Xms256m  \ -Dch.usi.dag.jborat.exclusionList="conf/exclusion.lst" \ -Dch.usi.dag.jp2.dumpers="ch.usi.dag.jp2.dump.xml.XmlDumper" \ -Xbootclasspath/p:./lib/Thread_JP2.jar:lib/jborat-runtime.jar:lib/jp2-runtime.ja‌​r"
$ $CATALINA_HOME/bin/startup.sh 
```

我鼓励您尽可能使用完整路径（例如，不要使用`lib/jborat-agent.jar`-- 添加完整路径）。

请注意，通过使用`-Xss256M`，您将*线程堆栈大小*设置为 256M 而不是堆大小。我怀疑你打算用来`-Xmx256M`设置堆的最大大小。

# c++ - 错误 C2027：使用未定义类型“通道”

> ID：11600551
> 
> 赞同：1
> 
> 时间：2012-07-22T13:11:23.803
> 
> 标签：c++, types, undefined

我有两个文件，link.h 和 channel.h。该链接包含两个类型`Channel`为`src`和的对象`dst`。文件如下：

```
// channel.h
class Channel {
private:
    bool marked;
    // ...

public:
    void mark(void) { marked = true; }
    void unmark(void) { marked = false; }
    bool is_marked(void) const { return marked; }
    // ...
};

// link.h
#include "channel.h"
class Channel;

class Link {
private:
    Channel *src, *dst;
public:
    void mark_src(void) { src->mark(); }
    void unmark_src(void) { src->unmark(); }
    bool is_marked_src(void) const { return src->is_marked(); }

    void mark_dst(void) { dst->mark(); }
    void unmark_dst(void) { dst->unmark(); }
    bool is_marked_dst(void) const { return dst->is_marked(); }
}; 
```

编译器 (VC++2008) 给出错误：错误 C2027：使用未定义类型“通道”。我知道这意味着“Channel”类型在编译时是未知的，但有办法解决这个问题，这样我就不必将 Channel 和 Link 类放在同一个 .h 文件或标记的所有实现中同一个 .cpp 文件中的方法？

# mysql - 如何一次删除两张表

> ID：11600558
> 
> 赞同：-1
> 
> 时间：2012-07-22T13:12:48.183
> 
> 标签：mysql

我想使用 WHERE department = 'something' 一次删除 2 个表记录

我试试这个，它没有用：

```
DELETE FROM departments, categories 
WHERE department.department = 'something' 
AND categories.department = 'something'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:22:53.333

```
DELETE FROM departments INNER JOIN categories
    WHERE departments.department = categories.department 
        and department.department = 'something' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:24:52.730

使用此语句解决的问题：

> 删除部门。*，类别。* 来自部门、类别 WHERE 部门.department = '{$dept_name}' AND categories.department = '{$dept_name}'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:26:23.680

```
DELETE FROM departments
JOIN categories ON departments.department = categories.department
WHERE department.department = 'something'` 
```

# java - 如何将字典对象从ajax传递到播放框架中的控制器类

> ID：11600559
> 
> 赞同：0
> 
> 时间：2012-07-22T13:12:52.753
> 
> 标签：java, javascript, ajax, playframework-2.0

我的视图页面中有 dynatree，我想在每次拖放操作时保存树的当前状态，问题是我无法将该 dict 对象传递给控制器​​。ajax的代码如下：

```
 onDrop: function(node, sourceNode, hitMode, ui, draggable) {
        /** This function MUST be defined to enable dropping of items on
         * the tree.
         */
        logMsg("tree.onDrop(%o, %o, %s)", node, sourceNode, hitMode);
        sourceNode.move(node, hitMode);
        //save state to backend
     var currentTree = $("#tree").dynatree("getTree").toDict();
            $.post("/Application.java", { recieved: currentTree},
               function(data) {
                 $("#output").html(data);
             });

         //expand the drop target
        sourceNode.expand(true);
      }, 
```

我在java中编写了一个获取该字典对象的方法。但是它在路由文件中给了我错误。错误：未找到：在此行中键入 Dictionary

POST /hello/:dict controllers.Application.check(dict:Dictionary)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:41:08.303

You have many problems in your code.

First, for the main issue, the `routes` files can not be compiled because it does know your class `Dictionary`. So you have to tell the file the qualified name of this class (package + class):

```
POST /hello/:dict controllers.Application.check(dict:package.to.Dictionary) 
```

But AFAIK, it may not work either, because the dynamic part of the Url (`dict`) should be printable in the Url, because, you'll have to call the Url with your dict encoded into it. Let say: `/hello/thisIsMyDict`

So your best option is to remove the dynamic part of the Url in the routes file:

```
POST /hello/ controllers.Application.check() 
```

Then, in your action, get the body parameters using a [DynamicForm](http://www.playframework.org/documentation/api/2.0/java/play/data/DynamicForm.html) for instance:

```
public static Result check() {
   DynamicForm myForm = form().bindFromRequest();
   String dict = myForm.get("recieved");
   // convert the string to your Dictionary object
   ...
} 
```

And finally, your javascript code should look like:

```
var currentTree = $("#tree").dynatree("getTree").toDict();
$.post("@controllers.routes.Application.check()", { recieved: currentTree},
     function(data) {
        $("#output").html(data);
     }); 
```

# c# - 在 Mono 上读取 XML 文件的 URI 无效，但适用于 Windows

> ID：11600562
> 
> 赞同：0
> 
> 时间：2012-07-22T13:13:13.503
> 
> 标签：c#, xml, mono

我正在研究需要在 Windows 和 Linux (Mono) 上运行的 ac# 项目，当它启动时它会从 xml 配置文件中读取一些设置。在 Windows 上这工作正常，但在 Linux 上却出错了。它抛出一个异常，说它有一个无效的 URI，但这不可能是正确的，因为它在 Windows 上工作正常。

我想这可能是由于文件在传输过程中以某种方式损坏，所以我删除了配置文件并手动重新键入它，但它仍然出现相同的错误。

下面是在配置文件中读取的代码

```
public Dictionary<string, string> readConfig(string sectionName, bool soapService=false)
        {
            Dictionary<string, string> config = new Dictionary<string, string>();
            try
            {
                XmlDocument configXml = new XmlDocument();
                string configPath = "";
                if (soapService)
                {
                    string applicationPath = HttpContext.Current.Server.MapPath(null);
                    configPath = Path.Combine(applicationPath, "config.xml");
                }
                else
                {
                    string applicationPath = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
                    configPath = Path.Combine(applicationPath, "config.xml");
                }
                configXml.Load(configPath);
                XmlNodeList options = configXml.SelectNodes(string.Format("/options/{0}", sectionName));
                XmlNodeList parameters = configXml.GetElementsByTagName("item");
                foreach (XmlNode option in options)
                {
                    foreach (XmlNode setting in option)
                    {
                        string key = setting.Attributes["key"].Value;
                        string value = setting.Attributes["value"].Value;

                        config.Add(key, value);
                    }
                }
            }
            catch (KeyNotFoundException ex)
            {
                Console.WriteLine("Config KeyNotFoundException: {0}", ex.Message);
            }
            catch (XmlException ex)
            {
                Console.WriteLine("Config XmlException: {0}", ex.Message);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Config Exception: {0}", ex.Message);
            }
            return config;
        } 
```

完整的例外是`Config Exception: Invalid URI: The Authority/Host could not be parsed`

下面是config.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<options>
  <database>
    <item key="server" value="localhost" />
    <item key="database" value="emailserver" />
    <item key="username" value="myusername" />
    <item key="password" value="mypassword" />
    <item key="port" value="3306" />
    <item key="logFile" value="email_server.txt" />
  </database>
  <EmailServer>
    <item key="ip_address" value="127.0.0.1" />
    <item key="port" value="12345" />
  </EmailServer>
  <SmtpServer>
    <item key="ip_address" value="127.0.0.1" />
    <item key="port" value="25" />
  </SmtpServer>
  <SendMailSettings>
    <item key="smtp_server" value="smtp.gmail.com" />
    <item key="smtp_port" value="587" />
    <item key="smtp_useSSL" value="true" />
    <item key="smtp_username" value="myusername" />
    <item key="smtp_password" value="mypassword" />
    <item key="smtp_useAuthentication" value="true" />
  </SendMailSettings>
</options> 
```

我不明白为什么它会显示此错误。

感谢您的任何帮助，您可以提供。

**更新** 下面是要求的堆栈跟踪

> StackTrace：在 System.Uri.Parse（UriKind 种类，System.String uriString）[0x00000] 在：0 在 System.Uri.ParseUri（UriKind 种类）[0x00000] 在：0 在 System.Uri..ctor（System.String uriString, Boolean dontEscape) [0x00000] in :0 at System.Uri..ctor (System.String uriString) [0x00000] in :0 at System.Xml.XmlResolver.ResolveUri (System.Uri baseUri, System.String relativeUri) [ 0x00000] 在：0 在 System.Xml.XmlUrlResolver.ResolveUri (System.Uri baseUri，System.String relativeUri) [0x00000] 在：0 在 Mono.Xml2.XmlTextReader..ctor (System.String url，System.Xml.XmlNameTable nt) [0x00000] in :0 at System.Xml.XmlTextReader..ctor (System.String url, System.Xml.XmlNameTable nt) [0x00000] in :0 at System.Xml.XmlDocument.Load (System.String 文件名) [0x00000] 在 BoardiesITSolutions.Config.readConfig （系统。String sectionName, Boolean soapService) [0x00000] in :0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:10:22.577

我发现了问题，我不明白为什么这是问题，我猜它一定是 Mono 中的错误，因为它在 Windows 中运行良好。

即使以下代码在 Windows 中由于某种原因在 Mono 中运行良好，它也会抛出该异常，即使它确实获得了正确的路径。如果我删除该代码并将 configPath 更改为，`"config.xml"`那么它可以正常工作。

```
string applicationPath = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
configPath = Path.Combine(applicationPath, "config.xml"); 
```

# object - 如何使用 LLVM 实现动态对象？

> ID：11600563
> 
> 赞同：4
> 
> 时间：2012-07-22T13:13:14.690
> 
> 标签：object, hashmap, llvm

假设是一种类似 javascript 的语言，我们如何实现一个系统，例如：

```
a = {};
a.foo = {};
a.foo.bar = 42;
print a.foo['bar']; 
```

使用 LLVM C++ API？

我没有找到任何关于复杂数据类型的文档（例如从 Value 继承的 HashMap），所以我有点迷失在这里。LLVM C 演示网页也没有用，因为 C/C++ 中没有这种数据类型。

我已经完成了 Kaleidoscope 教程，但没有找到任何其他非常好的教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:09:18.047

*使用 llvm 用 python 编写的jit 语言*示例在这里[链接到一个学生项目](http://llvm.cs.uiuc.edu/pubs/2009-05-21-Thesis-Barrett-3c.html)。
它不是您直接需要的，而是面向对象的，并且该报告涵盖了一种实现语言面向对象的简单方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T08:44:10.263

就像您在任何其他低级语义之上执行此操作一样。你必须实现你自己的运行时库、你自己的哈希映射（或者你想用于动态调度的任何其他东西）。LLVM 不（也不应该）为其生成的代码提供任何运行时。

# javascript - PlayBook 相机 API (WebKit) 抛出异常并且不打开相机

> ID：11600564
> 
> 赞同：1
> 
> 时间：2012-07-22T13:13:18.087
> 
> 标签：javascript, blackberry-playbook, blackberry-webworks

所以我正在使用以下代码来尝试调用 PlayBook 相机，并让用户拍照。然后应该将图片作为文件路径字符串返回给我。

```
captureImage: function() {
    App.log("App.captureImage > Invoked");
    try {
        blackberry.media.camera.takePicture(App.takePictureComplete, App.cameraClosed, App.cameraError);
    } catch (err) {
        App.log("App.captureImage > Error Occured: " + err);
    }

    App.log("App.captureImage > Complete");
},

takePictureComplete: function(filePath) {
    App.log("App.takePictureComeplete > Image taken and file retrieved: " + filePath);
    App.origin.attr('src', filePath);
},
cameraClosed: function() {
    App.log("App.cameraClosed > Camera closed.");
},
cameraError: function(err) {
    App.log("App.cameraError > ERROR: " + err);
}, 
```

这是发生的事情的日志。请注意，任何回调函数或 catch 块中都没有日志记录。

```
app.js:153 App.captureImage > Invoked
app.js:153 App.captureImage > Complete
index.html:187 TypeError: 'null' is not an object (evaluating 'response.Response') 
```

引发异常的第 187 行是 WebKit 代码的一部分，包含以下内容：

```
request.onreadystatechange = function() {
   // continue if the process is completed
   if (request.readyState == 4 && request.status == 200) {
       // retrieve the response
       var response = JSON.parse(request.responseText, jsonReviver);
       responseCallback(response.Response); //LINE 187
   }
}; 
```

我在这里做错了什么，或者这是 API 本身的问题？据我所知，我所做的一切都与示例文档相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:49:34.563

我找到了问题，我猜我们没有正确的功能或功能顺序错误，当我使用以下功能时相机工作（我在webwork示例厨房水槽中找到它）： ////////// ///////////////////////////////////////// /////////////////////////////////

```
<rim:permissions>
    <rim:permit>access_shared</rim:permit>
    <rim:permit>record_audio</rim:permit>
    <rim:permit>read_geolocation</rim:permit>
    <rim:permit>use_camera</rim:permit>
    <rim:permit>read_device_identifying_information</rim:permit>
</rim:permissions>

<!-- 
    Universal APIs: 
        The following features are available on both Smartphone and Tablet OS
-->
<feature id="blackberry.app" required="true" version="1.0.0.0"/>
<feature id="blackberry.app.event" required="true" version="1.0.0.0"/>
<feature id="blackberry.system" required="true" version="1.0.0.0"/>
<feature id="blackberry.system.event" required="true" version="1.0.0.0"/>
<feature id="blackberry.ui.dialog" required="true" version="1.0.0.0"/>
<feature id="blackberry.utils" required="true" version="1.0.0.0"/>

<feature id="blackberry.media.camera" required="true" version="1.0.0.0"/>
<feature id="blackberry.media.microphone" required="true" version="1.0.0.0"/>
<feature id="blackberry.identity" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke" required="true" version="1.0.0.0"/>
<feature id="blackberry.io.file" required="true" version="1.0.0.0"/>
<feature id="blackberry.io.dir" required="true" version="1.0.0.0"/>

<!-- 
    Smartphone APIs: 
        The following features are available ONLY on Smartphone
--> 
<feature id="blackberry.ui.menu" required="true" version="1.0.0.0"/>
<feature id="blackberry.identity.phone" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.AddressBookArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.BrowserArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.CalendarArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.CameraArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.JavaArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.MapsArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.MemoArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.MessageArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.PhoneArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.SearchArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.invoke.TaskArguments" required="true" version="1.0.0.0"/>
<feature id="blackberry.message" required="true" version="1.0.0.0"/>
<feature id="blackberry.message.sms" required="true" version="1.0.0.0"/>
<feature id="blackberry.pim.Address" required="true" version="1.0.0.0"/>
<feature id="blackberry.pim.Attendee" required="true" version="1.0.0.0"/>
<feature id="blackberry.pim.Appointment" required="true" version="1.0.0.0"/>
<feature id="blackberry.pim.category" required="true" version="1.0.0.0"/>
<feature id="blackberry.pim.Contact" required="true" version="1.0.0.0"/>
<feature id="blackberry.pim.Memo" required="true" version="1.0.0.0"/>
<feature id="blackberry.pim.Recurrence" required="true" version="1.0.0.0"/>
<feature id="blackberry.pim.Reminder" required="true" version="1.0.0.0"/>
<feature id="blackberry.pim.Task" required="true" version="1.0.0.0"/>

<feature id="blackberry.audio" required="true" version="1.0.0.0"/>
<feature id="blackberry.audio.Player" required="true" version="1.0.0.0"/>

<feature id="blackberry.find" required="true" version="1.0.0.0"/>
<feature id="blackberry.phone.Phone" required="true" version="1.0.0.0"/>
<feature id="blackberry.phone.PhoneLogs" required="true" version="1.0.0.0"/>

<feature id="blackberry.push" required="true" version="1.0.0.0"/>
<feature id="blackberry.find" required="true" version="1.0.0.0"/>

<!-- 
    Tablet OS APIs: 
        The following features are available ONLY on Tablet OS
    ...
-->
<!--
COMMENT THE FOLLOWING WHEN BUILDING USING THE SMARTPHONE SDK.

<feature id="blackberry.payment" required="true" version="1.0.0.0"/>
-->

<access subdomains="true" uri="*"/> 
```

///////////////////////////////////////// /////////////////////////// 祝你好运！

# c++ - 对 boost::condition_variable::wait 的调用没有匹配的函数

> ID：11600565
> 
> 赞同：1
> 
> 时间：2012-07-22T13:13:19.897
> 
> 标签：c++, boost, boost-thread, boost-bind

这是我的场景

```
boost::condition_variable        _condition;
boost::unique_lock<boost::mutex> lock(_mutex);
boost::detail::atomic_count      _count;
.........
_condition.wait(&lock, boost::bind(std::less<int>(), boost::ref(_count), max)); 
```

得到错误

```
error: no matching function for call to 'boost::condition_variable::wait(boost::unique_lock<boost::mutex>*, boost::_bi::bind_t<boost::_bi::unspecified, std::less<int>, boost::_bi::list2<boost::reference_wrapper<boost::detail::atomic_count>, boost::_bi::value<short unsigned int> > >)' 
```

问题出在哪里 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:41:41.500

`condition_variable::wait()` accepts a [single argument](http://www.boost.org/doc/libs/release/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref.condition_variable.wait)

> `void wait(boost::unique_lock<boost::mutex>& lock)`

or the two argument case with a [predicate type](http://www.boost.org/doc/libs/release/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref.condition_variable.wait_predicate)

> `template<typename predicate_type> void wait(boost::unique_lock<boost::mutex>& lock, predicate_type pred)`

In either case, the first argument is a reference not a pointer as in your example.

# drupal-7 - 属于同一节点的图像的 Drupal 幻灯片

> ID：11600567
> 
> 赞同：0
> 
> 时间：2012-07-22T13:13:25.157
> 
> 标签：drupal-7, drupal-views

我正在drupal 7中制作一个网站，需要一些帮助。

我创建了一个名为 Itenary 的内容类型，用户将在其中上传信息和五张图片。我将图像作为 Image1，Image2.... Image5 作为图像类型的字段 pf itenary 内容类型。

现在我希望将这些图像显示为当前正在看到的节点的简单幻灯片

所以我去视图模块->添加新视图现在当我之前尝试过这个时，我选择了

> 显示类型*itenary的**内容*

 *它并没有像我希望的那样工作。

所以这一次，我选择了

> 显示*图像*类型的*文件*

 *我希望这是我需要的正确选择。然后我去创建一个块，给它一个名字。

现在我的困境是如何将 Image1 Image2 .. Image5 的那些字段带入这个块？它默认显示的字段与文件相关，而不是我的内容类型的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:26:22.900

尝试不同的方法在幻灯片中显示图像：[查看幻灯片](http://drupal.org/project/views_slideshow/)。**

# ios - 对核心数据实体进行排序的最佳方法是什么？

> ID：11600571
> 
> 赞同：10
> 
> 时间：2012-07-22T13:13:57.423
> 
> 标签：ios, xcode, arrays, core-data

我有一个完全正常工作的核心数据模型，但是当我使用 fetch 请求返回数据时，它的顺序看似随机。对这些数据进行排序的最佳方法是什么？是在核心数据模型中使用另一个表，然后“查询”第一个？还是将数据下拉到数组中，然后以这种方式排序？

我不太确定如何做这些，这就是我问这个问题的原因。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-22T13:34:42.213

你的问题很笼统，但我会尽量给你一些提示。

当您使用`NSFetchRequest`类时，您可以指定排序描述符。

来自苹果文档：

> 一组排序描述符（的实例`NSSortDescriptor`），指定返回的对象应如何排序，例如按姓氏然后按名字。

[在这里，您可以在Core Data Snippets doc](http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/CoreDataSnippets/Articles/fetching.html)中找到一个简单的示例

```
NSManagedObjectContext *context = <#Get the context#>;

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"<#Entity name#>"
    inManagedObjectContext:context];
[fetchRequest setEntity:entity];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"<#Sort key#>"
    ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];

NSError *error = nil;
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
if (fetchedObjects == nil) {
    // Handle the error
}

// release allocated objects if you don't use ARC 
```

在哪里

**<#Entity name#>**是您要检索的实体的名称，例如`Manager`.

**<#Sort key#>**是请求将用于排序的键的名称，例如`name`是`Manager`实体的属性。

所以，在我的例子中：

```
NSSortDescriptor *sortByName = [[NSSortDescriptor alloc] initWithKey:@"name"
    ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortByName, nil];
[fetchRequest setSortDescriptors:sortDescriptors]; 
```

由于`setSortDescriptors:`设置了一个排序描述符数组，因此您可以根据您想要的顺序指定多个键。例如，指定针对`name`and进行排序`salary`。排序描述符按照它们在 sortDescriptors 数组中出现的顺序应用。因此，在我的示例中，首先是 by `name`，然后是 by `salary`。

所以，在我的例子中，它可能变成

```
NSSortDescriptor *sortByName = [[NSSortDescriptor alloc] initWithKey:@"name"
    ascending:YES];
NSSortDescriptor *sortBySalary = [[NSSortDescriptor alloc] initWithKey:@"salary"
    ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortByName, sortBySalary, nil];
[fetchRequest setSortDescriptors:sortDescriptors]; 
```

希望有帮助。

**编辑**

由于`fetchedObjects`包含`NSManagedObject`（我想您没有更改请求的结果类型），您需要像下面这样迭代：

```
for(NSManagedObject* currentObj in fetchedObjects) {

    NSLog(@"Print the name %@", [currentObj valueForKey:@"name"]);
} 
```

因此，您需要通过键值编码来访问属性或关系。为了让您的生活更轻松，您可以考虑为`NSManagedObject`您创建的实体创建子类，例如[organising-core-data-for-ios](http://blog.chrismiles.info/2011/06/organising-core-data-for-ios.html)。

# javascript - 为什么我只能生成一个令牌？

> ID：11600573
> 
> 赞同：1
> 
> 时间：2012-07-22T13:14:26.717
> 
> 标签：javascript, node.js, token, opentok, tokbox

我正在使用带有 OpenTok 的 node.js 服务器。我正在两个用户之间创建私人聊天，并希望创建一个会话和两个令牌。问题是 generate_token 函数只创建一个令牌，然后将其发送给两个用户。在这段代码中，我想将单个令牌发送给每个用户。

我的代码如下：

```
var sessionId; 
var sourceUser=data.from;
var targetUser=data.to;

if(data.messageType=='accepted'){
var location = '127.0.0.1'; // use an IP or 'localhost'
ot.create_session(location, function(result){
sessionId = result;
});

console.log('chat has been accepted by ' + data.from + '. I can start the OpenTok session now with ' +data.to + '.');

var data= {'to':sourceUser, 'message':{'token': ot.generate_token({session_id:sessionId, 'connection_data': Math.floor(Math.random()*999999),
'role': "publisher"}), 'sessionID': sessionId, 'apikey':key}, 'from': targetUser, 'messageType':'tokenInfo'}
connectedUsersObject[sourceUser].emit('private message', tstamp(), socket.nickname, data);
console.log(sourceUser + '\'s token is: ' + data.message.token + '. The sessionID is: ' + data.message.sessionID + '. The API key is: ' + data.message.apikey);
console.log('connection data is: ' + data.message.connection_data);

var data= {'to':targetUser, 'message':{'token': ot.generate_token({session_id:sessionId, 'connection_data': Math.floor(Math.random()*999999),
'role': "publisher"}), 'sessionID': sessionId, 'apikey':key}, 'from': sourceUser, 'messageType':'tokenInfo'}
connectedUsersObject[targetUser].emit('private message', tstamp(), socket.nickname, data);
console.log(targetUser + '\'s token is: ' + data.message.token + '. The sessionID is: ' + data.message.sessionID + '. The API key is: ' + data.message.apikey);
console.log('connection data is: ' + data.message.connection_data); 
```

整个服务器代码位于： http: [//pastebin.com/uvWfKSWp](http://pastebin.com/uvWfKSWp)

# php - 传递 json 文件时 PHP json_decode() 中的错误

> ID：11600575
> 
> 赞同：1
> 
> 时间：2012-07-22T13:14:42.627
> 
> 标签：php, json

考虑 `j.json`其内容遵循有效 json 的文件：

```
{
    "t": "\\"
} 
```

PHP json_encode 无法解析：

```
$r=json_decode(file_get_contents('j.json'));

var_dump($r); //returns null 
```

**注意：**问题已清理，问题相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T13:21:25.493

你需要这个：

```
<?php
json_decode('{
    "target": "^http://(www|corail)\\\\.sudoc\\\\.abes\\\\.fr"
}') 
```

你只逃过`\\`一次s。您需要两次，第一次是 PHP，第二次是 JSON。

**PS由于您在JSON中的字符串看起来像一个正则表达式，您可能需要再转义一次，即再次将反斜杠的数量加倍**

* * *

让我试着想象一下发生了什么。首先在 PHP 中，您以这种方式编写字符串：

```
$s='{"a":"^http://(www|corail)\\\\\\\\.sudoc\\\\\\\\.abes\\\\\\\\.fr"}' 
```

在此之后，如果你`echo $s`会发现：

```
{"a":"^http://(www|corail)\\\\.sudoc\\\\.abes\\\\.fr"} 
```

然后如果你`json_decode($s)`，成员`a`将有内容：

```
^http://(www|corail)\\.sudoc\\.abes\\.fr 
```

最后，当您执行 RegExp 时，`\\`会进一步转义为`\`.

* * *

如果你试试：

```
<?php
echo '{
    "target": "^http://(www|corail)\\.sudoc\\.abes\\.fr"
}'; 
```

输出是：

```
{
    "target": "^http://(www|corail)\.sudoc\.abes\.fr"
} 
```

看看有什么问题？在 JSON (JavaScript)`\.`中**不是**一个有效的转义序列，所以它**不是一个有效的 JSON**，所以`json_decode`会失败，返回`NULL`.

* * *

如果你试试：

```
<?php
echo '{
    "target": "^http://(www|corail)\\\\.sudoc\\\\.abes\\\\.fr"
}'; 
```

输出是：

```
{
    "target": "^http://(www|corail)\\.sudoc\\.abes\\.fr"
} 
```

哪个转义序列`\\`对 JSON 有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:16:55.590

尝试

```
json_decode('{
    "target": "^http://(www|corail)\\\\.sudoc\\\\.abes\\\\.fr"
}'); 
```

你有一个额外的逗号，你必须两次转义反斜杠（首先是 php 字符串，然后是 json）。

```
echo "\\"; // outputs "\"
echo "\\\\"; // outputs "\\", ie what you need for the json 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T13:21:01.453

```
<?php

echo var_export(json_encode((object)array('target'=>'^http://(www|corail)\\.sudoc\\.abes\\.fr')));

echo '<br/>';

echo '{
    "target": "^http://(www|corail)\\.sudoc\\.abes\\.fr"
}'; 
```

**我在这里所做的是我在 PHP 中手动编写对象，将其编码为 JSON，然后[“导出”](http://php.net/manual/en/function.var-export.php)它以将其视为 PHP 字符串。**

然后我将它与您的字符串进行了比较。

结果如下：

```
'{"target":"^http:\\/\\/(www|corail)\\\\.sudoc\\\\.abes\\\\.fr"}'
{ "target": "^http://(www|corail)\.sudoc\.abes\.fr" } 
```

您可以清楚地看到您的字符串遗漏了一些字符：您需要转义所有正斜杠和反斜杠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:39:56.737

不幸 `json_decode`的是，实现不正确并且在获取一些有效的 json**文件**时可能会返回 null或者可能会修改它们的值，您可以使用以下函数来解码所有有效的 json 字符串：

```
function r_json_decode($jsonString,$originalJsonValue=false){

    $j=($originalJsonValue)?str_replace('\\','\\\\\\\\',$jsonString):str_replace('\\','\\\\',$jsonString);
    return json_decode($j);

}

echo(r_json_decode(file_get_contents('j.json'))->t);     // prints "/"
echo(r_json_decode(file_get_contents('j.json'),true)->t); //prints "//" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T09:10:36.683

这个问题显然是关于逃跑的。似乎有一些关于如何在 PHP 中解析 JSON 的讨论（请参阅手册[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)中的评论）。

无论如何，正如您从这个“小提琴” [http://codepad.viper-7.com/2t4pP0](http://codepad.viper-7.com/2t4pP0)中看到的那样，您需要开始添加反斜杠！
它这样做：

```
<?php
    $r=json_decode('{"t": "a"}');
    var_dump($r);
echo "<br/>\n";
    $r=json_decode('{"t": "\a"}');
    var_dump($r);
echo "<br/>\n";
    $r=json_decode('{"t": "\\a"}');
    var_dump($r);
echo "<br/>\n";
    $r=json_decode('{"t": "\\\a"}');
    var_dump($r);
echo "<br/>\n";
    $r=json_decode('{"t": "\\\\a"}');
    var_dump($r); 
```

和输出

```
object(stdClass)#1 (1) { ["t"]=> string(1) "a" } 
NULL 
NULL 
object(stdClass)#1 (1) { ["t"]=> string(2) "\a" } 
object(stdClass)#2 (1) { ["t"]=> string(2) "\a" } 
```

现在取决于您要完成的工作（在您的问题的当前编辑中没有提到目标），您应该能够弄清楚该怎么做？

# gwt - 使用 GWTP 进行功能切换

> ID：11600577
> 
> 赞同：2
> 
> 时间：2012-07-22T13:15:28.667
> 
> 标签：gwt, gwt-platform, featuretoggle

您可能知道，Feature-Toggle 是一种部署尚未完全准备好的功能的方法，并通过使用一些配置将它们打开。可以为特定客户启用功能（例如 A/B 测试），也可以在准备好后逐步为所有客户启用。

我想知道是否有人知道如何在 GWTP 中做得很好。我认为功能切换可以通过两种方式完成（两个范围级别）： - 使用延迟绑定机制：替换特定部署所需类的实现（演示者范围）。- 使用不同的应用程序页面 - 实现您自己的 PlaceManager 并导航到包含特定部署（位置范围）的新功能的不同位置。

我认为应该通过“if-​​else”来控制更精细的范围（例如，演示者中的某些功能）。

为了决定打开哪些功能，我想使用某种配置（可能由 maven 配置文件控制）。有没有办法将自定义配置元素添加到 gwt.xml 模块配置中？

还有其他想法如何实现功能切换吗？有人对这种方法有任何经验吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:36:50.110

您建议的两种方法都可以。

我们选择在演示者级别实现功能切换，使用杜松子酒和延迟绑定。我们有两个 gin 模块（我们称它们为 A 和 B），我们通过使用延迟绑定机制来安装正确的模块，以创建我们检查的属性。

另一种方法是添加 GateKeeper 类（GateKeeperA、GateKeeperB），您可以将它们分配给相关的演示者并使用 gin/deferred 绑定进行切换。这些将实现逻辑以允许/防止访问客户端上的切换功能）。

# javascript - 结合 div ID 和 this.ID

> ID：11600583
> 
> 赞同：0
> 
> 时间：2012-07-22T13:16:31.927
> 
> 标签：javascript, jquery

也许不是这个问题的好标题，但我的问题正是这个。我在页面上有几个 DIV 标签，它们都以 #result 开头并继续 number`<div id="result22">`等`<div id="result33">`。现在我找到了一些不错的 jQuery 事情要做，它按预期工作，但唯一的问题是如何将已知数字添加到这`#result` 是代码：

```
<script type="text/javascript">
   $(document).ready(function() {
     $('.like').bind('click', function () {
       $.get("/sng_like/"+this.id+"/", function(data) {
         $('#result')[0].innerHTML=data;
     });
   });
 });
</script> 
```

例如，我希望该值成为获取`this.id`的一部分。我的 JS 知识有限，我已经尝试过了，但它不会起作用。`#result``#result22``$('#result'+this.id)[0].innerHTML=data;`

谢谢，G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:18:23.847

```
$(document).ready(function() {
     $('.like').bind('click', function () {
       var item=$(this);
       $.get("/sng_like/"+item.attr("id")+"/", function(data) {
         $('#result'+item.attr("id")).html(data);
     });
   });
}); 
```

从 jQuery 1.7 开始，[.on()](http://api.jquery.com/on/)方法是将事件处理程序附加到文档的首选方法。所以你可以考虑使用它。

如果您使用的是 1.7+ 版本，则可以重写您的代码以在这样的函数上使用

```
$(function(){
   $(document).on("click",".like",function(){
       var item=$(this);           
       $.get("/sng_like/"+item.attr("id")+"/", function(data) {
          $('#result'+item.attr("id")).html(data);
       });
   });
}); 
```

`$(function()`是一个简短的形式`$(document).ready(function()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T13:21:03.197

你可以说：

```
$.get("/sng_like/"+$(this).attr("id")+"/", function(data) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T13:29:53.367

```
<script type="text/javascript">
   $(function() {
       $('.like').on('click', function() {
           var MyId=this.id;
           $.get("/sng_like/"+MyId+"/", function(data) {
               $('#result'+MyId).html(data);
           });
       });
   });
</script> 
```

# r - 是否有任何网站可以监控 CRAN 包存储库中的新 R 包？

> ID：11600584
> 
> 赞同：2
> 
> 时间：2012-07-22T13:16:34.903
> 
> 标签：r, cran

是否有任何网站可以监控 CRAN 包存储库中的新 R 包？数据+名称+简短描述？或者 R-CRAN 提供了一份月度文档，列出了添加到 CRAN 档案中的新软件包，但我没有看到任何内容。

对于寻找新的 R 功能来说，这将是一个很好的特性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T13:31:52.473

[Dirk Eddelbuettel 的](http://dirk.eddelbuettel.com/) [CRANberries](http://dirk.eddelbuettel.com/cranberries/index.html)网站提供了这一点。您可以订阅[新](http://dirk.eddelbuettel.com/cranberries/cran/new)的、[更新](http://dirk.eddelbuettel.com/cranberries/cran/updated)的和[删除](http://dirk.eddelbuettel.com/cranberries/cran/removed)的包。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T16:35:09.553

另一种方法是按日期查看 CRAN 包：

[http://lib.stat.cmu.edu/R/CRAN/web/packages/available_packages_by_date.html](http://lib.stat.cmu.edu/R/CRAN/web/packages/available_packages_by_date.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-22T19:58:04.523

还有[http://cratastic.org/](http://crantastic.org/)。

# html - 如何让浏览器不解析 iframe 中的 html？

> ID：11600588
> 
> 赞同：0
> 
> 时间：2012-07-22T13:17:02.723
> 
> 标签：html, iframe, content-type

我有一个网页，我通过 Ajax 流式传输数据（使用 readyState 3 等）。这在大多数浏览器上都可以正常工作，但在 IE7-9 上，即使 readyState 为 3，我似乎也无法阅读到目前为止收到的文本（虽然我已经读过你可以在 IE9 中做到这一点，但它只是在我试试看..）。

相反，作为后备，我使用一个不可见的 iframe 来请求数据，然后我从那里读取数据 - 问题是数据，虽然它是 JSON 编码的，但内部也包含实际的 HTML。我需要数据保持原样，但由于它位于 iframe 内，因此 HTML 会被浏览器解析。

基本上，我想要的只是浏览器不解析该数据中的 HTML。我最初认为这可以通过使用正确的内容类型轻松完成，但到目前为止它似乎不起作用（例如，我尝试了 application/octet-stream）。

我想我可以通过将整个数据放在评论中来解决这个问题，但我宁愿不这样做。在这种情况下，阻止浏览器解析此 HTML 的最简单方法是什么？还是我只是使用了错误的内容类型？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:50:22.943

使用 <xmp> 标记，该标记告诉浏览器您的内容是 CDDATA 并忽略其中的所有 HTML 标记。

<xmp><font color="red"><b>我的数据在这里</b></font></xmp>

将打印：

<font color="red"><b>我的数据在这里</b></font>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:29:31.660

`<xmp>`标签已弃用，不再是标准的一部分。`<textarea>`如果速度在您的情况下至关重要，那当然是一种选择。第三种选择当然是在将内容发送到客户端之前使用您正在使用的任何服务器技术对您的内容进行 HTML 编码，并在客户端上使用该技术`decode()`来获取 HTML。

# django - 相同形式的相同外键字段的多个实例

> ID：11600590
> 
> 赞同：1
> 
> 时间：2012-07-22T13:17:30.007
> 
> 标签：django, django-models

我有一个由两个模型组成的记录保存系统。一个模型创建一个保留页面，另一个模型创建单独的条目......

```
class RecordEntry(models.Model):
    client = models.CharField(max_length=50, choices=CLIENT_CHOICES)
    job_number = models.CharField(max_length=30, unique=False, blank=False, null=False)
    cell_number = models.CharField(max_length=4, unique=False, blank=True, null=True)
    entry_title = models.CharField(max_length=64, unique=False, blank=True, null=True)
    date = models.DateField(("Date"), default=datetime.date.today)
    attachment = models.FileField(upload_to=content_file_name, blank=True, null=True)
    ...     

class RecordPage(models.Model):
    client = models.CharField(max_length=50, choices=CLIENT_CHOICES)
    job_number = models.CharField(max_length=30, unique=True, blank=False, null=False)
    job_name = models.CharField(max_length=64, unique=False, blank=False, null=False)
    create_date = models.DateField(("Date"), default=datetime.date.today)
    contact = models.ForeignKey(UserProfile)
    entry = models.ForeignKey(RecordEntry, blank=True, null=True)
    ... 
```

…页面可能是#211211，单个条目可能是#211211-01、#211211-02、#211211-03

为简单起见，我使用 admin 中呈现的表单来创建页面。这很方便，因为管理员给了我“加号”图标，让我可以即时创建和添加条目。我的问题是，我希望能够根据需要向页面添加尽可能多的“条目”。我的意思是，要在表单上获取多个“输入”字段，我可以执行以下操作：

```
class RecordPage(models.Model):
    client = models.CharField(max_length=50, choices=CLIENT_CHOICES)
    job_number = models.CharField(max_length=30, unique=True, blank=False, null=False)
    job_name = models.CharField(max_length=64, unique=False, blank=False, null=False)
    create_date = models.DateField(("Date"), default=datetime.date.today)
    contact = models.ForeignKey(UserProfile)
    entry = models.ForeignKey(RecordEntry, blank=True, null=True)
    entry2 = models.ForeignKey(RecordEntry, related_name='+', blank=True, null=True)
    entry3 = models.ForeignKey(RecordEntry, related_name='+', blank=True, null=True)
    entry4 = models.ForeignKey(RecordEntry, related_name='+', blank=True, null=True)
    entry5 = models.ForeignKey(RecordEntry, related_name='+', blank=True, null=True)
    entry6 = models.ForeignKey(RecordEntry, related_name='+', blank=True, null=True)
    entry7 = models.ForeignKey(RecordEntry, related_name='+', blank=True, null=True)
    and so on… 
```

但必须有更好的方法，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:24:39.677

为什么不在这里使用 ManyToManyField

```
entry = models.ManyToManyField('RecordEntry', related_name='pages') 
```

并且 Django admin 将自动为您提供添加新行的能力。

# asp.net - 母版页上的 CSS 覆盖本地页面上的 CSS

> ID：11600591
> 
> 赞同：1
> 
> 时间：2012-07-22T13:17:46.747
> 
> 标签：asp.net, html, css

我在母版页上有一个 CSS 文件（`mpcss.css`）。在其中一个内容页面上，我需要为大多数控件设置完全不同的样式。在这里，我创建了一个名为的新 CSS 文件并将`contentcss.css`其包含在内容占位符中：

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <script src="JQuery/jquery-1.7.2.min.js" type="text/javascript"></script>
    <link href="Styles/ssjquery.css" rel="stylesheet" type="text/css" />
</asp:Content> 
```

但是母版页中的 CSS 仍然会覆盖本地 CSS。我该如何解决这个问题？

**编辑：**我没有内联样式。我有 2 个不同的 CSS 文件，`mpcss.css`并且`contentcss.css`：

**母版页上的 CSS**

```
<head runat="server">
    <link href="~/Styles/mpcss.css" rel="stylesheet" type="text/css" />
</head> 
```

**内容页面上的 CSS**

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <script src="JQuery/jquery-1.7.2.min.js" type="text/javascript"></script>
    <link href="Styles/contentcss.css" rel="stylesheet" type="text/css" />
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:23:59.510

CSS 顾名思义是级联的，这意味着最后来的人将覆盖其余的人。

所以，如果你有两个 css 文件：

```
<link href="Styles/master.css" rel="stylesheet" type="text/css" />
<link href="Styles/newone.css" rel="stylesheet" type="text/css" /> 
```

在这种情况下，newone.css 规则将覆盖 master.css 规则。

请注意，如果您有内联样式（即 html 本身中的样式标记），css 无法覆盖这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:19:58.313

如果您的意思是母版页中的 css 是内联的，那么您的外部 css 文件将不会覆盖内联样式。如果是这种情况，请尝试远离内联样式。

# asp.net - asp.net 生成缩略图“GDI+ 中发生一般错误。”

> ID：11600597
> 
> 赞同：0
> 
> 时间：2012-07-22T13:18:42.547
> 
> 标签：asp.net, thumbnails, system.drawing

我使用 asp.net system.drawing 以便在图像完成上传后使用以下代码生成缩略图：

```
//programmImages -- the id of the fileupload control

string path = "~/User/" + "progimgs/" + programmImages.FileName;
string thumbPath = "~/User/" + "thums/" + programmImages.FileName;

programmImages.SaveAs(Server.MapPath(path));
programmImages.Dispose();

//generating the tumbnails
System.Drawing.Image thum = System.Drawing.Image.FromFile(Server.MapPath(path));

System.Drawing.Image createTumb = 
                           thum.GetThumbnailImage(250, 140, ()=>false, IntPtr.Zero);

createTumb.Save(thumbPath, ImageFormat.Jpeg); 
```

我收到此错误“GDI+ 中发生一般错误”

在这一行“createTumb.Save(thumbPath, ImageFormat.Jpeg);”

什么问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:54:16.843

正如 Aristos 指出的那样，我缺少 thumbPath 中的 server.mappath。

# php - 为什么在打开的图表中读取操作不正确的 url

> ID：11600598
> 
> 赞同：0
> 
> 时间：2012-07-22T13:18:46.027
> 
> 标签：php, javascript, facebook, facebook-opengraph

我的 index.php

在标签头中我输入代码

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
      xmlns:fb="https://www.facebook.com/2008/fbml"> 

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#"> <meta property="fb:app_id" content="418895381495750" /> 
    <meta property="og:site_name" content="Social News" />  <meta property="og:title"  content="Sample Title" />
    <meta property="og:description" content="Sample Artice" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="http:www.myurl.com/wallpaper.png" />   <meta property="og:url"    content="<?php echo 'http://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']; ?>"/>    </head> 
```

和标签正文输入

```
<div id="wrapper"
    <div id="bottom">
        <?php
            $p=$_GET["p"];
            switch($p)
            {
                case "news": require "blocks/news.php"; break;
                case "title": require "blocks/tile.php"; break;
                default: require "blocks/home.php";
            }
        ?>
    </div>
</div> 
```

在我的 news.php 输入代码中

```
<div id="fb-root"></div>
            <script>
            window.fbAsyncInit = function() {
                FB.init({
                    appId      : '41834663463370', // App ID
                    oauth      : true,
                    status     : true, // check login status
                    cookie     : true, // enable cookies to allow the server to access the session
                    xfbml      : true  // parse XFBML
                });

            FB.login(function(response) {
        if (response.authResponse) {
            console.log('Access Token: ' + response.authResponse.accessToken);
        } else {
            console.log('User cancelled login or did not fully authorize.');
        }
    },{scope:'publish_stream'});

            };

            (function(d){
                var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
                js = d.createElement('script'); js.id = id; js.async = true;
                js.src = "//connect.facebook.net/en_US/all.js";
                d.getElementsByTagName('head')[0].appendChild(js);
            }(document));
        </script>

<script type="text/javascript">
  function readnews()
  {
     FB.api(         '/me/news.reads?article=<?php echo 'http://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];?>','post',
            function(response) {
                var msg = 'Error occured';
                if (!response || response.error) {
                    if (response.error) {
                        msg += "\n\nType: "+response.error.type+"\n\nMessage: "+response.error.message;
                    }
                    alert(msg);
                } else {
                    alert("Post timeline");
                }
            });
  }
  </script> 
```

但我不明白为什么在时间轴中显示 url 文件 index.php
示例：Adam 阅读 Sample Tile。-> [http://myurl.com/index.php](http://myurl.com/index.php)
不显示 url 我的帖子[http://myurl.com/index.php?p=news&id=](http://myurl.com/index.php?p=news&id=) {$_getid}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:45:02.633

你显然错过了查询字符串，试试这个：

```
<?php $currentUrl = sprintf('http%s://%s%s%s',
    $_SERVER['HTTPS'] ? 's' : '',
    $_SERVER['SERVER_NAME'],
    $_SERVER['REQUEST_URI'],
    $_SERVER['QUERY_STRING']
); ?>

FB.api('/me/news.reads?article=<?php echo $currentUrl; ?>', 'post', ... 
```

# c# - 在 MVC3 中，“添加视图”对话框在哪里获取其模型类？

> ID：11600599
> 
> 赞同：1
> 
> 时间：2012-07-22T13:18:46.420
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

偶然发现了我研究过的一个好奇心，但没有找到任何确切的答案。我正在向我的 mvc 项目添加一个视图，当我注意到在提到视图的模型时，很多类似乎我没有直接的参考。例如，我可以在添加视图对话框中看到所有用于 excel 的 ClosedXml 类，但该 dll 在我的 Bussines Logic 项目中被引用，而不是在 Web 项目中肯定。那么 1\. 为什么它会出现在添加视图对话框的模型下拉列表中？2.这个列表不应该只由模型文件夹中的类组成吗？对不起，如果这是一个愚蠢的问题，但没有人可以给我一个直接的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T13:25:25.970

作为当前解决方案一部分的所有公共类都出现在此列表中，而不仅仅是那些在当前程序集的 Model 文件夹中声明的公共类。甚至引用程序集中的类也会出现。一些类将被过滤掉：

*   以结尾的类型`Controller`（以避免在列表中看到您的控制器）
*   `System`在or`Microsoft`命名空间中声明的类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:36:48.833

Besides of the answer of @DarinDimitrov

> For example i can see in the add view dialog all the ClosedXml classes for excel but that dll is referenced in my Bussines Logic project

It seems Visual Studio iterates over all your references, so I assume you do have a reference to your business component in your MVC project

Now the reason?, well that's because you could practically use any `public` entity as your model

> 2.Should this list not be composed only of classes from the models folder?

**NO**

A model in MVC is a simple class to **represent your view**, please do not get confused about your current Domain Model. They used the same term but a model in MVC is just that, a simple class to **represent your view and NOTHING MORE**

With that in mind, you could use any public class as your model.

I think that's the reason behind although, I rarely use that option in Visual Studio because often it takes too much time to display the content of the list, so I prefer to set the model manually

# php - 使用 PHP 从一些 HTML 代码中获取第一个嵌入标签

> ID：11600600
> 
> 赞同：0
> 
> 时间：2012-07-22T13:18:45.963
> 
> 标签：php, html-parsing

一个 PHP 脚本被传递一些 HTML 代码，通常以一个对象标记开始，有时以一个段落然后对象作为一个变量，例如；

```
<object width="640" height="360" ... /><embed width="640" height="360" type="application/x-shockwave-flash" src="..." /></object> 
```

使用 PHP，我需要识别 HTML 中的第一个“嵌入”标签，并获取 src、宽度和高度的值以在其他地方使用。我可以看到这在 RegEx 中是如何工作的，但这似乎很沉重。

真正的问题是我让它在本地使用“PHP Simple HTML DOM Parser”工作，但它在生产服务器上不起作用（我没有被告知原因，但听起来不可能），所以现在，我正在寻找一种无需使用简单 HTML 即可在 PHP5 中运行的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:28:41.993

然后你可以使用`DomDocument`原生类。

像这样的东西：

```
$dom = new DomDocument();
$dom->load($filePath);
$finder = new DomXPath($dom);
$classname="my-class";
$nodes = $finder->query("//*[contains(concat(' ', normalize-space(@class), ' '), ' $classname ')]"); 
```

来源：[通过类名获取 DOM 元素](https://stackoverflow.com/questions/6366351/getting-dom-elements-by-class-name)

# javascript - JsViews 与淘汰赛

> ID：11600604
> 
> 赞同：1
> 
> 时间：2012-07-22T13:20:01.813
> 
> 标签：javascript, knockout.js, templating, jsrender, jsviews

我打算将 JsRender 用于我的单页应用程序，我正在考虑是否应该使用 JsViews 或 Knockout。JsViews 还没有达到测试版，但是这两者在速度和功能方面的主要区别是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T17:20:20.497

You already hit the biggest difference ... right now JsViews is not yet at beta. If you need to move forward on data binding now, I would use Knockout.

# java - 在另一个类中使用 ActionListener

> ID：11600611
> 
> 赞同：0
> 
> 时间：2012-07-22T13:21:01.343
> 
> 标签：java, parameters, this, actionlistener

所以，我知道已经回答了类似的问题，但我的问题更具体一些。我正在编写一个简单的程序，它比较两个输入的单词，然后告诉你它们是否匹配。这是代码：

```
import javax.swing.*;
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;

public class Password {
JPanel windowContent, p1, p2, p3; //p1 is in the west, p2 in center and p3 in south
JButton check, clear;
JTextField pass1, pass2;
JLabel word1, word2, result;
JFrame frame;

Password() {
    windowContent = new JPanel();
    BorderLayout bl = new BorderLayout();
    windowContent.setLayout(bl);

    p1 = new JPanel();
    GridLayout gl = new GridLayout(2, 1);
    p1.setLayout(gl);

    word1 = new JLabel("1st word: ");
    word2 = new JLabel ("2nd word: ");

    p1.add(word1);
    p1.add(word2);

    windowContent.add("West", p1);

    p2 = new JPanel();
    p2.setLayout(gl);

    pass1 = new JTextField (20);
    pass2 = new JTextField (20);

    p2.add(pass1);
    p2.add(pass2);

    windowContent.add("Center", p2);

    p3  = new JPanel();
    FlowLayout fl = new FlowLayout();
    p3.setLayout(fl);

    check = new JButton("Check");
    clear = new JButton("Clear");
    result = new JLabel("");

    p3.add(check);
    p3.add(result);
    p3.add(clear);

    windowContent.add("South", p3);

    frame = new JFrame("Password");
    frame.add(windowContent);
    frame.pack();
    frame.setVisible(true);

    PasswordEngine engine = new PasswordEngine(this); // <--- THIS LINE HERE!

    check.addActionListener(engine);
    clear.addActionListener(engine);

    }

    public static void main(String [] args) {
        Password pass = new Password();

    }

} 
```

在另一个类中，程序逻辑：

```
import java.awt.Color;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class PasswordEngine implements ActionListener {

Password parent;
String textField1, textField2;

PasswordEngine(Password parent) {
    this.parent = parent;
}

public void actionPerformed(ActionEvent e) {
    String displayFieldText1 = parent.pass1.getText();
    String displayFieldText2 = parent.pass2.getText();

    Object src  = e.getSource();

    if (src == parent.clear) {
        parent.pass1.setText("");
        parent.pass2.setText("");
        parent.result.setText("");
        parent.pass1.setBackground(Color.white);
        parent.pass2.setBackground(Color.white);
    } else  if (displayFieldText1.equals(displayFieldText2)) {
        parent.result.setText("MATCH");
        parent.pass1.setBackground(Color.GREEN);
        parent.pass2.setBackground(Color.GREEN);
    } else {
        parent.result.setText("NOT MATCH");
        parent.pass1.setBackground(Color.white);
        parent.pass2.setBackground(Color.white);

    }

}

} 
```

所以，我的问题都是关于 class`Password`的，在这一行：

```
PasswordEngine engine = new PasswordEngine(this); 
```

为什么是`this`参数？为什么那条线实际上需要一个参数？我不明白为什么`this`它需要在那里。

PS：我是 Java 和编程新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:01:45.523

该类`PasswordEngine`有一个构造函数，它接受一个类型的参数`Password`：

```
PasswordEngine(Password parent) { 
```

因此，无论何时您说`new Password(…)`...必须对应于类型的对象`Password`（通常可能是`null`，但这会导致以后出现问题）。并且由于该参数用于描述将应用该操作的密码小部件，因此密码小部件将自身（读取`this`）作为该参数传递。这样，就`PasswordEngine`知道是哪个`Password`对象创建了它。

*请注意*，许多应用程序将为此操作使用*嵌套类。*嵌套类可以访问其封闭类的成员，因此`parent`不需要显式处理。

# iphone - 在目标 C 中定义带有参数的方法

> ID：11600613
> 
> 赞同：-5
> 
> 时间：2012-07-22T13:21:08.547
> 
> 标签：iphone, objective-c, xcode

我在 Objective C 中使用参数定义方法。我在 .h 文件中使用以下代码定义方法：

```
-(int)canFindSquare:(NSString *)param1 array:(NSArray *)param2 
```

现在，我正在 .m 文件中研究该方法：

```
-(int)canFindSquare:(NSString *)param1 array:(NSArray *)param2{
    NSLog(@"something");
} 
```

如何在方法中使用字符串和数组？

而且我想用那个方法来返回一些值。我如何在 if 语句中使用该方法。也许是这样的：

```
is ([self canFindSquare(string1, array1)] == 1){
   // do something here
} 
```

它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:37:51.047

在您的示例中：

```
- (int)canFindSquare:(NSString *)param1 array:(NSArray *)param2{
    NSLog(@"something");
} 
```

使用参数所需要做的就是调用您设置的变量的名称。您的方法已被声明为返回一个 int，因此您需要确保在完成后返回一个。然后你的调用者可以测试它。这应该工作

```
- (int)canFindSquare:(NSString *)param1 array:(NSArray *)param2{
    NSLog(@"param1 is %@ and param2 is %@", param1, param2);

// Some tests
return 1;
} 
```

请记住，尽管 ObjC 非常清楚您如何称呼事物。所以你会这样调用你的方法：

```
canFindSquare:aString array:anArray; 
```

我会看一下 Apple 的 Objective-C 约定指南来复习命名。例如，我将第二个参数称为“anArray”或类似的东西。这让你更清楚你在做什么。

# ruby - 使用 get 或 ARGF.readline 时，Thor 任务抛出错误

> ID：11600614
> 
> 赞同：1
> 
> 时间：2012-07-22T13:21:09.337
> 
> 标签：ruby, thor

这是雷神任务：

```
 desc 'readkeys', 'Read keys'
  method_option :password, :type => :string, :desc => 'Password for the key store'
  def readkeys
    if options[:password].nil?
      puts "Enter keystore password"
      options[:password] = gets
    end

    File.open("#{Dir.home}#{File::SEPARATOR}#{ENV['USER']}.p12") do |p12|
      pkcs12 = OpenSSL::PKCS12.new(p12.read, options[:password])
    end
  end 
```

当我运行命令时，我收到此错误：

> ./mycommand:26:in `gets': 没有这样的文件或目录 - readkeys (Errno::ENOENT)

有任何想法吗？语法似乎很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:43:17.243

我在这看到了两个问题。首先是您实际上无法修改来自 Thor 的选项哈希。它被冻结了，你会得到一个``[]=': can't modify frozen Thor::CoreExt::HashWithIndifferentAccess (RuntimeError)`.

然而，真正的问题是你的工作水平太低了。您正在寻找的`ask`是`Thor::Actions`. 如果我正确理解你的代码，做你想做的事，你会做这样的事情：

```
class Test < Thor   
  include Thor::Actions

  desc 'readkeys', 'Read keys'
  method_option :password, :type => :string, :desc => 'Password for the key store'
  def readkeys
    if options[:password].nil?
      password = ask "Enter keystore password"
    else
      password = options[:password]
    end
    File.open("#{Dir.home}#{File::SEPARATOR}#{ENV['USER']}.p12") do |p12|
      pkcs12 = OpenSSL::PKCS12.new(p12.read, password)
    end
  end
  #...
end 
```

或者，更简单地说，

```
class Test < Thor   
  include Thor::Actions

  desc 'readkeys', 'Read keys'
  method_option :password, :type => :string, :desc => 'Password for the key store'
  def readkeys
    password = options[:password] || ask("Enter keystore password")
    File.open("#{Dir.home}#{File::SEPARATOR}#{ENV['USER']}.p12") do |p12|
      pkcs12 = OpenSSL::PKCS12.new(p12.read, password)
    end
  end
  #...
end 
```

# ios - 从没有 drawRect 的浮点数创建 CGPath

> ID：11600616
> 
> 赞同：0
> 
> 时间：2012-07-22T13:21:13.717
> 
> 标签：ios, core-graphics

如何在不使用 drawRect 函数的情况下在 UIView 中创建具有多个浮点数的 CGPath？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:07:26.570

您可以在任何地方创建路径（即路径对象）。为此，时机并不重要。但是，唯一可以渲染到视图上下文中的是 inside `drawRect:`。

如果要将其渲染到另一个视图，可以在 CGBitmapContext 内绘制路径（参见`UIGraphicsBeginImageContext()`等）并获取`UIImage`. 出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:55:17.093

假设你正在谈论的值是 UIVIew 的维度

```
UIBezierPath *path=[UIBezierPath bezierPathWithRect:rect dimensions];
CGPath cgpath=path.CGPath(); 
```

# search - Lucene：查询或过滤“拥有”文档的关系搜索？

> ID：11600619
> 
> 赞同：2
> 
> 时间：2012-07-22T13:21:18.007
> 
> 标签：search, filter, lucene, relational

我有一个数据集，可以选择将文档与用户 ID 相关联。假设文档代表书籍，每本书可以有一个或多个所有者。搜索时，我想先匹配我拥有的书籍，然后再匹配我不拥有的书籍。然后，我希望我拥有的所有结果在不属于我的结果之前排序在结果的顶部。因此数据可能如下所示：

```
Owner ID             Book Title
--------             ----------
13                   To Have and To Have Not
14                   To Have and To Have Not
19                   To Have and To Have Not
15                   Snow Crash
17                   Snow Crash
18                   Cryptonomicon
14                   Of Mice And Men 
```

假设我的用户 id 是 14 并且我搜索“有”，我想首先找到我拥有的书，而不是 13 或 19 拥有的书（这样我就知道将它排在列表的顶部，因为我拥有它）。但是，如果我搜索“崩溃”，我想找到与该标题匹配的任何一本书，即使我不拥有任何一本书。因为我不拥有它们，所以它们会在排序中显示得较低。因此，如果我对“a”进行模糊搜索，我会在列表顶部看到我拥有的所有匹配书籍，其余的则在其后。

我对这是一个查询、一个过滤器还是两者都有点卡住了。例如，我可以编写一个过滤器来消除所有重复的标题，优先考虑我拥有的标题，然后只对其余部分执行简单的搜索（假设在搜索之前应用了过滤器）。然后，基于所有者的自定义排序将很简单。

但我不确定如何实现过滤器。它不是一个简单的 DuplicateFilter，因为它对两个字段进行操作。它类似于 Lucene in Action 的第 5.6.7 节中的安全过滤器示例，除了我仍然希望能够查看我不拥有的文档，如果我不拥有同名的书。6.4 节中的自定义过滤器也很接近，但我的问题更复杂，因为它取决于两个字段。

在遍历文档时，过滤器必须记住已经看到的标题，然后保留我拥有的标题。例如，如果它按顺序迭代上面的值，它会看到标题“To Have and To Have Not”，不属于我；然后再次看到我拥有的相同标题，并且必须知道它应该删除第一个文档并保留第二个文档。我想不出如何在不使用大量内存的情况下做到这一点，本质上在迭代时将所有标题保留在内存中，这似乎非常昂贵。这不是一个简单的“匹配”功能，因为我是否匹配取决于集合中的其他文档。

非常感谢任何指导或信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T01:39:34.707

这听起来像是对查询命中的自定义排序，如果 2 个文档具有相同的分数，那么具有“优先所有者”的文档将在搜索结果中首先列出。

# iphone - iPhone- Twitter API 获取用户关注者/关注者

> ID：11600621
> 
> 赞同：8
> 
> 时间：2012-07-22T13:21:25.160
> 
> 标签：iphone, objective-c, ios, ios5, twitter

我希望能够使用适用于 ios 5 的 Twitter API 来获取所有用户关注者并关注用户名到.. `NSDictionary`​​.

不过我遇到了路障。我不知道如何使用 Twitter API 来做到这一点......但我的主要问题是首先获取用户的用户名。当我什至不知道用户的用户名时，如何发出 API 请求来查找该用户的关注者？

有人可以给我一个关于让您的 Twitter 用户关注和关注的例子吗？

PS：我已经添加了 Twitter 框架，并导入了

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-22T14:24:59.967

它是 Apple 的 Twitter API 和 Twitter 自己的 API 的组合。一旦你阅读了代码，它就相当简单了。我将提供示例代码，说明如何获取 Twitter 帐户的“朋友”（这是用户关注的人的术语），这应该足以让您继续了解获取关注者的方法帐户。

首先，添加`Accounts`和`Twitter`框架。

现在，让我们获取用户设备上的 Twitter 帐户。

```
#import <Accounts/Accounts.h>

-(void)getTwitterAccounts {
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    // Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
    // let's request access and fetch the accounts
    [accountStore requestAccessToAccountsWithType:accountType
                            withCompletionHandler:^(BOOL granted, NSError *error) {
                                // check that the user granted us access and there were no errors (such as no accounts added on the users device)
                                if (granted && !error) {
                                    NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];
                                    if ([accountsArray count] > 1) {
                                        // a user may have one or more accounts added to their device
                                        // you need to either show a prompt or a separate view to have a user select the account(s) you need to get the followers and friends for 
                                    } else {
                                        [self getTwitterFriendsForAccount:[accountsArray objectAtIndex:0]];
                                    }
                                } else {
                                    // handle error (show alert with information that the user has not granted your app access, etc.)
                                }
    }];
} 
```

现在我们可以使用[GET friends/ids](https://dev.twitter.com/docs/api/1/get/friends/ids)命令获取一个帐户的好友：

```
#import <Twitter/Twitter.h>

-(void)getTwitterFriendsForAccount:(ACAccount*)account {
    // In this case I am creating a dictionary for the account
    // Add the account screen name
    NSMutableDictionary *accountDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:account.username, @"screen_name", nil];
    // Add the user id (I needed it in my case, but it's not necessary for doing the requests)
    [accountDictionary setObject:[[[account dictionaryWithValuesForKeys:[NSArray arrayWithObject:@"properties"]] objectForKey:@"properties"] objectForKey:@"user_id"] forKey:@"user_id"];
    // Setup the URL, as you can see it's just Twitter's own API url scheme. In this case we want to receive it in JSON
    NSURL *followingURL = [NSURL URLWithString:@"http://api.twitter.com/1/friends/ids.json"];
    // Pass in the parameters (basically '.ids.json?screen_name=[screen_name]')
    NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:account.username, @"screen_name", nil];
    // Setup the request
    TWRequest *twitterRequest = [[TWRequest alloc] initWithURL:followingURL
                                                parameters:parameters
                                             requestMethod:TWRequestMethodGET];
    // This is important! Set the account for the request so we can do an authenticated request. Without this you cannot get the followers for private accounts and Twitter may also return an error if you're doing too many requests
    [twitterRequest setAccount:account];
    // Perform the request for Twitter friends
    [twitterRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                if (error) {
                    // deal with any errors - keep in mind, though you may receive a valid response that contains an error, so you may want to look at the response and ensure no 'error:' key is present in the dictionary
                }
                NSError *jsonError = nil;
                // Convert the response into a dictionary
                NSDictionary *twitterFriends = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONWritingPrettyPrinted error:&jsonError];
                // Grab the Ids that Twitter returned and add them to the dictionary we created earlier
                [accountDictionary setObject:[twitterFriends objectForKey:@"ids"] forKey:@"friends_ids"];
                NSLog(@"%@", accountDictionary);
    }];
} 
```

当您想要一个帐户的关注者时，几乎是一样的......简单地使用 URL并传递通过[GET 关注者/ids](https://dev.twitter.com/docs/api/1/get/followers/ids)`http://api.twitter.com/1/followers/ids.format`找到的所需参数

希望这能给您一个良好的开端。

**更新：**

正如评论中所指出的，您应该使用更新后的 API 调用：`https://api.twitter.com/1.1/followers/list.json`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-31T12:08:16.243

1.  参考关于 runmad 帖子的评论***，*** “ *[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array”*的错误来源是您没有在模拟器中设置 Twitter 帐户。您需要使用您的用户名和 twitter 提供的临时密码在 twitter 上签名。

2.  其他错误来源是“setObject for key error, key id is nil”。为了克服下面的代码类型： -

```
-(void)getTwitterAccounts {
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    // Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
    // let's request access and fetch the accounts
    [accountStore requestAccessToAccountsWithType:accountType
                            withCompletionHandler:^(BOOL granted, NSError *error) {
                                // check that the user granted us access and there were no errors (such as no accounts added on the users device)
                                if (granted && !error) {
                                    NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];
                                    if ([accountsArray count] > 1) {
                                        // a user may have one or more accounts added to their device
                                        // you need to either show a prompt or a separate view to have a user select the account(s) you need to get the followers and friends for
                                    } else {
                                        [self getTwitterFriendsForAccount:[accountsArray objectAtIndex:0]];
                                    }
                                } else {
                                    // handle error (show alert with information that the user has not granted your app access, etc.)
                                }
                            }];
}

-(void)getTwitterFriendsForAccount:(ACAccount*)account {
    // In this case I am creating a dictionary for the account
    // Add the account screen name
    NSMutableDictionary *accountDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:account.username, @"screen_name", nil];
    // Add the user id (I needed it in my case, but it's not necessary for doing the requests)
    [accountDictionary setObject:[[[account dictionaryWithValuesForKeys:[NSArray arrayWithObject:@"properties"]] objectForKey:@"properties"] objectForKey:@"user_id"] forKey:@"user_id"];
    // Setup the URL, as you can see it's just Twitter's own API url scheme. In this case we want to receive it in JSON
    NSURL *followingURL = [NSURL URLWithString:@"https://api.twitter.com/1.1/followers/list.json"];
    // Pass in the parameters (basically '.ids.json?screen_name=[screen_name]')
    NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:account.username, @"screen_name", nil];
    // Setup the request
    TWRequest *twitterRequest = [[TWRequest alloc] initWithURL:followingURL
                                                    parameters:parameters
                                                 requestMethod:TWRequestMethodGET];
    // This is important! Set the account for the request so we can do an authenticated request. Without this you cannot get the followers for private accounts and Twitter may also return an error if you're doing too many requests
    [twitterRequest setAccount:account];
    // Perform the request for Twitter friends
    [twitterRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if (error) {
            // deal with any errors - keep in mind, though you may receive a valid response that contains an error, so you may want to look at the response and ensure no 'error:' key is present in the dictionary
        }
        NSError *jsonError = nil;
        // Convert the response into a dictionary
        NSDictionary *twitterFriends = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONWritingPrettyPrinted error:&jsonError];

        NSLog(@"%@", twitterFriends);
    }];
}
```

# 进口

# 进口

注意：- TWRequest 已被弃用。因此，您也可以使用以下代码段：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
 ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
 [accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error){
 if (granted) {
 NSArray *accounts = [accountStore accountsWithAccountType:accountType];
 // Check if the users has setup at least one Twitter account
 if (accounts.count > 0)
 {
 ACAccount *twitterAccount = [accounts objectAtIndex:0];

 for(ACAccount *t in accounts)
 {
 if([t.username isEqualToString:twitterAccount.username])
 {
 twitterAccount = t;
 break;
 }
 }

 SLRequest *twitterInfoRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodGET URL:[NSURL URLWithString:@"https://api.twitter.com/1.1/followers/list.json"] parameters:[NSDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"%@", twitterAccount.username], @"screen_name", @"-1", @"cursor", nil]];
 [twitterInfoRequest setAccount:twitterAccount];
 // Making the request
 [twitterInfoRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
 dispatch_async(dispatch_get_main_queue(), ^{
 // Check if we reached the reate limit
 if ([urlResponse statusCode] == 429) {
 NSLog(@"Rate limit reached");
 return;
 }
 // Check if there was an error
 if (error) {
 NSLog(@"Error: %@", error.localizedDescription);
 return;
 }
 // Check if there is some response data
 if (responseData) {
 NSError *error = nil;
 NSArray *TWData = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error];
 NSLog(@"TWData : %@", TWData);

 }
 });
 }];
 }
 } else {
 NSLog(@"No access granted");
 }
 }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-18T11:54:41.407

使用[FHSTwitterEngine](https://github.com/fhsjaagshs/FHSTwitterEngine)

**#import "FHSTwitterEngine.h"**

添加**SystemConfiguration.framework**

将以下代码写入您的 viewDidLoad（用于 oauth 登录）

```
UIButton *logIn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
logIn.frame = CGRectMake(100, 100, 100, 100);
[logIn setTitle:@"Login" forState:UIControlStateNormal];
[logIn addTarget:self action:@selector(showLoginWindow:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:logIn];

[[FHSTwitterEngine sharedEngine]permanentlySetConsumerKey:@"Xg3ACDprWAH8loEPjMzRg" andSecret:@"9LwYDxw1iTc6D9ebHdrYCZrJP4lJhQv5uf4ueiPHvJ0"];
[[FHSTwitterEngine sharedEngine]setDelegate:self];

 - (void)showLoginWindow:(id)sender {
UIViewController *loginController = [[FHSTwitterEngine sharedEngine]loginControllerWithCompletionHandler:^(BOOL success) {
    NSLog(success?@"L0L success":@"O noes!!! Loggen faylur!!!");
    [[FHSTwitterEngine sharedEngine]loadAccessToken];
    NSString *username = [FHSTwitterEngine sharedEngine].authenticatedUsername;
    NSLog(@"user name is :%@",username);
    if (username.length > 0) {
        [self listResults];
    }
}];
     [self presentViewController:loginController animated:YES completion:nil];
}
 - (void)listResults {

NSString *username = [FHSTwitterEngine sharedEngine].authenticatedUsername;
NSMutableDictionary *   dict1 = [[FHSTwitterEngine sharedEngine]listFriendsForUser:username isID:NO withCursor:@"-1"];

//  NSLog(@"====> %@",[dict1 objectForKey:@"users"] );        // Here You get all the data
NSMutableArray *array=[dict1 objectForKey:@"users"];
for(int i=0;i<[array count];i++)
{
    NSLog(@"names:%@",[[array objectAtIndex:i]objectForKey:@"name"]);
}
} 
```

# python - 算法（问题求解）实现最快的运行时间

> ID：11600628
> 
> 赞同：17
> 
> 时间：2012-07-22T13:22:33.350
> 
> 标签：python, algorithm

对于算法竞赛训练（不是作业），我们从过去一年中得到了这个问题。将其发布到此站点是因为其他站点需要登录。

这就是问题所在：http: [//pastehtml.com/view/c5nhqhdcw.html](http://pastehtml.com/view/c5nhqhdcw.html)

图片没用所以贴在这里：![](../Images/d833babb4ed219cbb8252075776e36d6.png)

它必须在不到一秒的时间内运行，我只能考虑最慢的方法，这是我尝试过的：

```
with open('islandin.txt') as fin:
    num_houses, length = map(int, fin.readline().split())
    tot_length = length * 4 # side length of square
    houses = [map(int, line.split()) for line in fin] # inhabited houses read into list from text file

def cost(house_no):
    money = 0
    for h, p in houses:
        if h == house_no: # Skip this house since you don't count the one you build on
            continue
        d = abs(h - house_no)
        shortest_dist = min(d, tot_length - d)    
        money += shortest_dist * p
    return money

def paths():
    for house_no in xrange(1, length * 4 + 1):
        yield house_no, cost(house_no)
        print house_no, cost(house_no) # for testing

print max(paths(), key=lambda (h, m): m) # Gets max path based on the money it makes 
```

我目前正在做的是遍历每个位置，然后遍历该位置的每个有人居住的房屋，以找到最大收入的位置。

伪代码：

```
max_money = 0
max_location = 0
for every location in 1 to length * 4 + 1
    money = 0
    for house in inhabited_houses:
        money = money + shortest_dist * num_people_in_this_house
    if money > max_money
        max_money = money
        max_location = location 
```

这太慢了，因为它是 O(LN) 并且对于最大的测试用例不会在一秒钟内运行。有人可以简单地告诉我如何在最短的运行时间内做到这一点（除非你愿意，否则不需要代码），因为这已经困扰了我很久了。

编辑：必须有一种方法可以在少于 O(L) 的时间内做到这一点，对吧？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T10:21:04.593

假设列表`houses`由`(x,pop)`具有`0 <= x < 4*L`位置和`pop`人口的对组成。

我们想要最大化的目标函数是

```
def revenue(i):
    return sum(pop * min((i-j)%(4*L), 4*L - (i-j)%(4*L)) for j,pop in houses) 
```

朴素算法 O( *LN* ) 算法很简单：

```
max_revenue = max(revenue(i) for i in range(4*L)) 
```

`revenue`但是对每个位置进行完全重新评估是非常浪费的。

为避免这种情况，请注意这是一个分段线性函数；所以它的导数是分段常数，在两种点处不连续：

*   在内部`i`，导数从`slope`变为`slope + 2*population[i]`
*   `i`在岛上房子对面的点，导数从`slope`变为`slope - 2*population[i]`

这使事情变得非常简单：

1.  我们只需要检查实际的房屋或对面的房屋，因此复杂度下降到 O( *N* ²)。
2.  我们知道如何逐家更新，`slope`而且只需要 O(1) 时间。`i-1``i`
3.  由于我们知道位置 0 的收入和斜率，并且由于我们知道如何`slope`迭代更新，因此复杂度实际上下降到 O( *N* )：在两个连续的房屋/对面的房屋之间，我们可以将斜率乘以获得收入差异的距离。

所以完整的算法是：

```
def algorithm(houses, L):
    def revenue(i):
        return sum(pop * min((i-j)%(4*L), 4*L - (i-j)%(4*L)) for j,pop in houses)

    slope_changes = sorted(
            [(x, 2*pop) for x,pop in houses] +
            [((x+2*L)%(4*L), -2*pop) for x,pop in houses])

    current_x = 0
    current_revenue = revenue(0)
    current_slope = current_revenue - revenue(4*L-1)
    best_revenue = current_revenue

    for x, slope_delta in slope_changes:
        current_revenue += (x-current_x) * current_slope
        current_slope += slope_delta
        current_x = x
        best_revenue = max(best_revenue, current_revenue)

    return best_revenue 
```

为了简单起见，我曾经`sorted()`合并两种类型的斜率变化，但这并不是最优的，因为它具有 O( *N* log *N* ) 复杂度。如果你想要更好的效率，你可以在 O( *N* ) 时间内生成一个对应于对面房屋的排序列表，并将其与 O( *N* ) 中的房屋列表合并（例如与标准库的`heapq.merge`）。如果你想最小化内存使用，你也可以从迭代器而不是列表中流式传输。

TLDR：该解决方案实现了 O( *N* ) 的最低可行复杂度。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T16:21:26.987

这是一个在数学上不太倾斜的解决方案，适用于`O(n)`.

让我们将房屋（索引从 0 开始）划分为两个不相交的集合：

*   `F`，“前”，人们从 CCW 走到房子的地方
*   `B`，“回”，人们沿着 CW 走到房子的地方

和一个单独的房子`p`，标志着工厂将建造的当前位置。

我的插图基于图像中给出的示例。

按照惯例，让我们将一半的房子分配给`F`，而正好少分配一个给`B`。

*   `F`包含 6 间房屋
*   `B`包含 5 间房屋

借助简单的模运算，我们可以轻松访问房屋，`(p + offset) % 12`这要归功于 Python 对模运算符的理智实现，这与[其他](http://en.wikipedia.org/wiki/PHP)[一些](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29) [流行的](http://en.wikipedia.org/wiki/C++)[语言](http://en.wikipedia.org/wiki/Java_%28programming_language%29)完全不同。

如果我们任意选择一个位置`p`，我们可以很容易地确定耗水量`O(L)`。

我们可以再次执行此操作，`p`以获得`O(L^2)`.

但是，如果我们只移动`p`一个位置，我们可以`O(1)`通过稍微巧妙的观察来确定新的消费：当我们设置 时，居住在`F`（或`B`分别）的人数决定了消费的`F`变化量`p' = p+1`。（以及一些更正，因为`F`它本身会改变）。我已经尽我所能在这里描绘了这一点。

![算法描述](../Images/5e9579062abf914cbb0822d21a392c66.png)

我们最终的总运行时间为`O(L)`.

该算法的程序在帖子的末尾。

但我们可以做得更好。只要集合之间没有房屋变化，相加的`c`s 和`w`s 将为零。我们可以计算出这些步骤有多少，并一步完成。

房屋在以下情况下换组： - 何时`p`在房屋上 - 何时在房屋`p`对面

在下图中，我已经可视化了算法现在为更新`C`s 和`W`s 所做的停止。突出显示的是导致算法停止的房子。

![优化算法](../Images/90b4ed8d1c9408ff268fa67dc9388746.png)

该算法从一所房子开始（或与之相反，我们稍后会看到原因），在这种情况下恰好是一所房子。

同样，我们既有消费`C(B) = 3*1`又有`C(F) = 2 * 1`. 如果我们`p`向右移动 1，我们将添加`4`和`C(B)`减去`1`。`C(F)`如果我们`p`再次移动，就会发生完全相同的事情。

只要相同的两组房屋分别靠近和远离，`C`s的变化是恒定的。

我们现在稍微改变一下定义`B`：它现在也包含`p`! （这不会改变上述关于算法优化版本的段落）。

这样做是因为当我们移动到下一步时，我们将增加重复移动的房屋的重量。当前位置的房子`p`向右移动时正在移动，因此`W(B)`是正确的加法。

另一种情况是当房子停止移动并再次靠近时。在这种情况下，`C`s 会发生巨大变化，因为`6*weight`从一个`C`到另一个。那是我们需要停止的另一种情况。

![新的计算](../Images/f50745f080526ad3d7b21dd5df753a01.png)

我希望很清楚它是如何以及为什么起作用的，所以我将把工作算法留在这里。请询问是否有不清楚的地方。

上）：

```
import itertools

def hippo_island(houses, L):
    return PlantBuilder(houses, L).solution

class PlantBuilder:
    def __init__(self, houses, L):
        self.L = L
        self.houses = sorted(houses)
        self.changes = sorted(
            [((pos + L /2) % L, -transfer) for pos, transfer in self.houses] + 
            self.houses)
        self.starting_position = min(self.changes)[0]

        def is_front(pos_population):
            pos = pos_population[0]
            pos += L if pos < self.starting_position else 0
            return self.starting_position < pos <= self.starting_position + L // 2

        front_houses = filter(is_front, self.houses)
        back_houses = list(itertools.ifilterfalse(is_front, self.houses))

        self.front_count = len(houses) // 2
        self.back_count = len(houses) - self.front_count - 1
        (self.back_weight, self.back_consumption) = self._initialize_back(back_houses)
        (self.front_weight, self.front_consumption) = self._initialize_front(front_houses)
        self.solution = (0, self.back_weight + self.front_weight)
        self.run()

    def distance(self, i, j):
        return min((i - j) % self.L, self.L - (i - j) % self.L)

    def run(self):
        for (position, weight) in self.consumptions():
            self.update_solution(position, weight)

    def consumptions(self):
        last_position = self.starting_position
        for position, transfer in self.changes[1:]:
            distance = position - last_position
            self.front_consumption -= distance * self.front_weight
            self.front_consumption += distance * self.back_weight

            self.back_weight += transfer
            self.front_weight -= transfer

            # We are opposite of a house, it will change from B to F
            if transfer < 0:
                self.front_consumption -= self.L/2 * transfer
                self.front_consumption += self.L/2 * transfer

            last_position = position
            yield (position, self.back_consumption + self.front_consumption)

    def update_solution(self, position, weight):
        (best_position, best_weight) = self.solution
        if weight > best_weight:
            self.solution = (position, weight)

    def _initialize_front(self, front_houses):
        weight = 0
        consumption = 0
        for position, population in front_houses:
            distance = self.distance(self.starting_position, position)
            consumption += distance * population
            weight += population
        return (weight, consumption)

    def _initialize_back(self, back_houses):
        weight = back_houses[0][1]
        consumption = 0
        for position, population in back_houses[1:]:
            distance = self.distance(self.starting_position, position)
            consumption += distance * population
            weight += population
        return (weight, consumption) 
```

O(L)

```
def hippo_island(houses):
    return PlantBuilder(houses).solution

class PlantBuilder:
    def __init__(self, houses):
        self.houses = houses
        self.front_count = len(houses) // 2
        self.back_count = len(houses) - self.front_count - 1
        (self.back_weight, self.back_consumption) = self.initialize_back()
        (self.front_weight, self.front_consumption) = self.initialize_front()
        self.solution = (0, self.back_weight + self.front_weight)
        self.run()

    def run(self):
        for (position, weight) in self.consumptions():
            self.update_solution(position, weight)

    def consumptions(self):
        for position in range(1, len(self.houses)):
            self.remove_current_position_from_front(position)

            self.add_house_furthest_from_back_to_front(position)
            self.remove_furthest_house_from_back(position)

            self.add_house_at_last_position_to_back(position)
            yield (position, self.back_consumption + self.front_consumption)

    def add_house_at_last_position_to_back(self, position):
        self.back_weight += self.houses[position - 1]
        self.back_consumption += self.back_weight

    def remove_furthest_house_from_back(self, position):
        house_position = position - self.back_count - 1
        distance = self.back_count
        self.back_weight -= self.houses[house_position]
        self.back_consumption -= distance * self.houses[house_position]

    def add_house_furthest_from_back_to_front(self, position):
        house_position = position - self.back_count - 1
        distance = self.front_count
        self.front_weight += self.houses[house_position]
        self.front_consumption += distance * self.houses[house_position]

    def remove_current_position_from_front(self, position):
        self.front_consumption -= self.front_weight
        self.front_weight -= self.houses[position]

    def update_solution(self, position, weight):
        (best_position, best_weight) = self.solution
        if weight > best_weight:
            self.solution = (position, weight)

    def initialize_front(self):
        weight = 0
        consumption = 0
        for distance in range(1, self.front_count + 1):
            consumption += distance * self.houses[distance]
            weight += self.houses[distance]
        return (weight, consumption)

    def initialize_back(self):
        weight = 0
        consumption = 0
        for distance in range(1, self.back_count + 1):
            consumption += distance * self.houses[-distance]
            weight += self.houses[-distance]
        return (weight, consumption) 
```

结果：

```
>>> hippo_island([0, 3, 0, 1, 0, 0, 0, 0, 0, 0, 1, 2])
(7, 33) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T15:33:15.727

我将提供一些提示，以便您仍然可以为自己带来一些挑战。

* * *

让我从一个高度简化的版本开始：

**一条笔直的街道上有 N 栋房子，要么是有人的，要么是空的。**

```
0 1 1 0 1 
```

让我们计算他们的分数，知道第 n 个房子的分数等于到其他非空房子的所有距离的总和。所以第一个房子的得分是`1+2+4 = 7`，因为还有 3 个其他人住的房子，它们的距离是 1、2、4。

完整的分数数组如下所示：

```
7 4 3 4 5 
```

那怎么计算呢？显而易见的方法是...

```
for every house i
    score(i) = 0
    for every other house j
        if j is populated, score(i) += distance(i, j) 
```

这给了你 O(N^2) 的复杂性。但是，有一种更快的方法可以计算 O(N) 中的所有分数，因为它没有嵌套循环。它与前缀和有关。你能找到吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:11:21.537

不用计算每一间房子！！！

它还没有完全开发，但我认为值得思考：

**模*N***

*N*为所有房屋的数量，*n*应为部分房屋的“地址”（数量）。

如果你在岛上走一圈，你会发现每经过一个房子，n 就增加 1。如果您到达*n*为*N*的房子，则下一个房子的数字为 1。

让我们使用不同的编号系统：将每个门牌号加 1。然后*n*从 0 变为*N* -1。这与数字模*N*的行为方式相同。

**升是门牌号*n*的函数（模*N*）**

您可以通过构建所有距离乘积和居住在那里的人的总和来计算每个门牌的升数。

您还可以绘制该函数的图表： x 是*n*， y 是升数。

**函数是周期性的**

如果您了解模数的含义，您就会明白您刚刚绘制的图形只是周期函数的一个周期，因为 Litre( *n* ) 等于 Litre( *n* + x * *N* ) 其中 x 是一个整数（可能也是负面的）。

**如果*N*很大，则函数为“伪连续”**

我的意思是：如果*N*真的很大，那么如果你从房子*a*搬到它的邻居房子*a+1* ，升的数量不会有太大变化。所以你可以使用插值的方法。

**您正在寻找周期性伪连续函数的“全局”最大值的位置**（仅在一个周期内真正全局）

这是我的建议：

步骤 1：选择一个大于 1 且小于*N*的距离*d*。我不能说为什么，但我会使用 d=int(sqrt( *N* )) （也许有更好的选择，试试看）。 第 2 步：计算房屋 0、d、2d、3d、... 的升数 第 3 步：您会发现一些值高于他们的邻居。使用这个高点和他们的邻居使用插值方法来计算更多接近高点的点（间隔分割）。

 **只要您有时间，就对其他高点重复此插值（您有 1 秒，这是很长的时间！）

如果你看到，从一个高点跳到另一个高点，全局最大值一定在别处。**

# java - 在 jquery-mobile/html5/css3 + phonegap 中创建聊天应用程序？

> ID：11600629
> 
> 赞同：-1
> 
> 时间：2012-07-22T13:22:33.560
> 
> 标签：java, jquery, html, css, cordova

我想在 jquery-mobile/html5/css3 + phonegap(client) 和可能的 java(server) 中创建一个移动聊天应用程序。

可能有phonegap插件吗？你知道一个好的教程吗？您将如何实现这样的应用程序？

我从来没有做过某事。像以前那样，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:39:11.760

it's not possible without some kind of server backend, cause you'll need a database to store the messages to share between the relevent users.

# c# - 如何以编程方式与 Java 或 C# 中的软件设备驱动程序通信？

> ID：11600633
> 
> 赞同：1
> 
> 时间：2012-07-22T13:23:46.157
> 
> 标签：c#, java, usb, device-driver, hyperterminal

最近，我为通过 USB 连接到本地计算机的设备安装了软件设备驱动程序。如何与设备通信？我是否直接与安装的软件设备驱动程序通信？

工具：

*   OneTouch Ultra 2 血糖仪
*   视窗
*   OneTouch(R) 软件 v1.12.0.0 的仪表驱动程序
*   自定义通信协议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:14:44.773

该公司提供“仪表驱动程序”和“通信协议”。[如果您想编写自己的软件来与仪表进行通信，我会在http://www.onetouch.com/software_kit](http://www.onetouch.com/software_kit)上填写表格，看看它提供了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:25:56.187

您必须使用 JNI 来访问底层操作系统。标准 Java 在纯 Java 的那个级别上没有提供到操作系统的挂钩。

# algorithm - Roughness Reduction：平滑形状的算法

> ID：11600639
> 
> 赞同：0
> 
> 时间：2012-07-22T13:24:43.083
> 
> 标签：algorithm, math, maps, geometry

我有一些多边形形状的点列表，我想将它们包含在我页面上的 Google 地图中。

我已经从原始数据中删除了尽可能多的不必要的多边形，现在我只剩下 12 个这样的东西，但是它们太详细了，以至于引起了问题。现在我的文件是 3mb，很多用户都在拨号，所以我想把它降到 1MB 以下。多边形的形状遵循河流的复杂曲线，并包含很多细节，这些细节对于我试图给我的用户的一般概述来说是不必要的。

有没有我可以使用的好的算法来查看这些点并删除某个阈值内的任何点。最终目标是保持大特征并摆脱嘈杂的小细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:21:08.280

多边形简化的经典算法是*Ramer-Douglas-Peucker*

例如，参见[这个 wikipedia entry](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)或[这个 blog post with an implementation in c#](http://ianqvist.blogspot.de/2010/05/ramer-douglas-peucker-polygon.html)

但是，如果您只想将少量形状缩小一次，将多边形导入支持多边形简化的图形或 CAD 程序可能是最简单的。Inkscape 是免费的，应该可以完成这项工作

# html - HTML 文档中的 IMG 标记不起作用（没有后缀的图像）

> ID：11600641
> 
> 赞同：0
> 
> 时间：2012-07-22T13:25:02.680
> 
> 标签：html, image

我正在尝试插入[此](http://img.netaffiliation.com/c/29/27601/427/photo_752760113427g)图像：

在我的一个带有这种基本代码的html文档中：

```
<img src="http://img.netaffiliation.com/c/29/27601/427/photo_752760113427g" style="border: 1px solid" /> 
```

[编辑：我在这里](http://www.finder-auto.fr/test.html)上传了代码

但是，这不起作用。以下是我的调查给我的信息：

*   该文件未在我的一台服务器上提供。我无法更改文件名或任何内容
*   当我执行 `curl -I http://img.netaffiliation.com/c/29/27601/427/photo_752760113427g`时，它正确地给了我 Content-Type: image/gif
*   看来我的代码可以在 Firefox 上运行，但我在 Chrome 或 Safari（在 Mac Os X 上）上没有成功。

有人遇到过这个问题或知道解决方案吗？

提前致谢，

编辑：我更改了 img 标签，但除了在 Firefox 上之外仍然无法使用

编辑 2：我确认之前的评论，这在 Windows7 上的 Chrome/IE/Firefox 上正常工作......它在 Mac OS X 上不起作用......

最后编辑：好的，我自己找到了解决方案！问题来自... Adblock！不敢相信...我只需要取消阻止图像的域，现在就可以正常工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:37:04.200

I agree with Davids answer about the faulty use of `</img>` tag.

However, I could render the image with your code snippet in both Chrome and Firefox, so I suspect there might be other errors in your code blocking the image?

If fixing the image tag does not work, give the HTML Validation Service a go to discover any other problems:

[HTML validator](http://validator.w3.org/)

# android - 未显示 Android 警报对话框

> ID：11600647
> 
> 赞同：0
> 
> 时间：2012-07-22T13:25:26.110
> 
> 标签：android, android-alertdialog

我从 Activity 的 onPostResume 方法创建并显示一个警报对话框。该对话框未显示，但我不明白为什么。

我显示对话框的代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("message");
builder.setPositiveButton("a", aListener);
builder.setPositiveButton("b", bListener);
builder.setCancelable(false);

AlertDialog dlg = builder.create();
dlg.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:33:15.343

尝试使用：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("message");
builder.setPositiveButton("a", aListener);
builder.setPositiveButton("b", bListener);
builder.setCancelable(false);
builder.show(); 
```

**注意：**没有理由创建另一个`AlertDialog`实例。

* * *

或者另一种正确的方法，您可以创建返回 new 的方法`AlertDialog`：

```
protected static final int CREATE_INFORMATION_DIALOG = 1320;

private Dialog createDialog(int type) {
        AlertDialog dialog = null;
        switch (type) {
            case CREATE_INFORMATION_DIALOG:
                dialog = new AlertDialog.Builder(this)
                    .setTitle("Information")
                    .setMessage("Download was finished successfully.")
                    .setPositiveButton("Close", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dlg, int whichButton) {

                        }
                    })
                    .create();
                break;
        }
        return dialog;
    } 
```

然后就这样称呼它

```
createDialog(CREATE_INFORMATION_DIALOG).show(); 
```

# php - Redeclare - 如果数组有多个值，则重复函数

> ID：11600651
> 
> 赞同：2
> 
> 时间：2012-07-22T13:26:20.047
> 
> 标签：php, arrays, function, count, repeat

```
function test($str) {
  $c = count($str);
  if ($c>1) {
    foreach ($str as $key => $value) $result .= test($value);
  } else {
    $result = "<li>$str</li>\n";
  }
  echo $result ? "<ol>$result</ol>" : null;
} 
```

$str 值可以是这样的；

```
$str1 = "apple"; 
```

或类似的东西;

```
$str2 = array("apple","orange","pear"); 
```

如果count($str) 大于1，即$str is_array，则重复$result。
但它不能按我的意愿工作。
我收到一个错误*“无法重新声明 test()（以前在...中声明”）*

理想的输出是 - $str1;

```
<ol>
  <li>apple</li>
</ol> 
```

理想的输出是 - $str2;

```
<ol>
  <li>apple</li>
  <li>orange</li>
  <li>pear</li>
</ol> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:09:39.743

```
function test($str) {

  // Ensure, $str is a good argument of implode()
  if ( ! is_array( $str )) {
    $str = array( $str );
  }

  $result = '<li>' . implode( '</li><li>', $str ) . '</li>';

  return '<ol>' . $result . '</ol>';

} 
```

*备注：*您的方法可能会返回：

```
<ol>
  <li>1</li>
  <li>
  <ol>
    <li>1</li>
    <li>2</li>
    <li>3</li>
  </ol>
  </li>
  <li>3</li>
</ol> 
```

这真的是您想要实现的目标吗？它真的需要创建嵌套`OL`结构吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:30:30.777

Check, if `$str` [is an array](http://php.net/is_array), e.g.:

```
function test($str, $first=true) {
  if (!is_array($str)) {
    $result = "<li>$str</li>\n";
  } else {
    foreach ($str as $key => $value) $result .= test($value, false);
  }
  return ($first ? "<ol>$result</ol>" : $result);
} 
```

Also see [this example](http://ideone.com/hsFl0).

=== UPDATE ===

If you want to let it print directly, replace with:

```
function test($str, $first=true) {
  if (!is_array($str)) $result = "<li>$str</li>";
  else foreach ($str as $key => $value) $result .= test($value, false);
  if ($first) echo "<ol>$result</ol>";
  else return $result;
} 
```

Also see [this example](http://ideone.com/uvVv6).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T13:33:55.390

```
function testInternal($str){
    if(is_array($str))
        return implode('',array_map('testInternal', $str));
    else
        return '<li>'.$str.'</li>';
}
function test($str){
    echo '<ol>'.testInternal($str).'</ol>';
} 
```

# php - PHP Switch - 只查看一种情况？

> ID：11600653
> 
> 赞同：2
> 
> 时间：2012-07-22T13:26:31.370
> 
> 标签：php, joomla, switch-statement, case

目前我有一个有两个选择选项的表单，一个可以查看案例 0，一个可以查看案例 4。

我有一个标签，所以我不能使用表单，因为当我选择一个选项时网站会刷新。然后它在两个选项卡中显示该选项。

我试图只有一种选择。但这不起作用。

这是选项卡/表单代码：

```
<div class="tab1">
<form action="<?php  echo JRoute::_('index.php'); ?>" method="post">
<input type="hidden" name="option" value="com_yoflash" />
<input type="hidden" name="view" value="category" />
<input type="hidden" name="mochicat" value="<?php echo $this->cat->catid; ?>" />
<select name="order" size="1" onchange="submit();">
  <option value="0" <?php if($this->order=="0") echo "selected=\"selected\""; ?>><?php echo JText::_('ORDER_DATE_NEWEST'); ?></option>
  <option value="4" <?php if($this->order=="4") echo "selected=\"selected\""; ?>><?php echo JText::_('ORDER_POPULAR'); ?></option>
</select>
<input type="hidden" name="Itemid" value="<?php echo $this->Itemid; ?>" />
</form>
</div> 
```

我得到了另一个完全相同的 div 标签。在第一个 div 选项卡中，我想查看案例 0 或订单 0。

在第二个 div 选项卡中，我想查看 case4 或 order 4。但我不想让任何表单查看该订单。而不是通过表格选择。

这是开关代码：

```
$limitstart=JRequest::getInt('limitstart',0);
    if($order==-1) {
      $tmp=$session->get('order');
      if(empty($tmp)) {
        $order=0;
      }
      else {
        $order=$session->get('order');
      }
    }
    $session->set('order',$order);

    $order=$session->get('order');
    $Itemid=JRequest::getInt('Itemid',NULL);

    switch($order){
      case 0:
        $str="ORDER BY date_added DESC";
        break;
      case 1:
        $str="ORDER BY date_added ASC";
        break;
      case 2:
        $str="ORDER BY name ASC";
        break;
      case 3:
        $str="ORDER BY name DESC";
        break;
      case 4:
        $str="ORDER BY stat_clicked DESC";
        break;
      default:
        $str="ORDER BY date_added ASC";
        break;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T13:37:37.563

ewww, the switch is a bit ugly, here is a nicer version:

```
$sortMap = array(
"ORDER BY date_added DESC",
"ORDER BY date_added ASC",
"ORDER BY name ASC",
"ORDER BY name DESC",
"ORDER BY stat_clicked DESC"
);

$str = isset($sortMap[$order]) 
    ? $sortMap[$order]
    : "ORDER BY date_added ASC"; 
```

since $order is between 0..4 you might as well exploit the fact that it will map to array indexes and avoid the ugly switch and save yourself a bunch of wasted, cluttered lines in the process.

note: you could also do this with an associative array if $type doesn't conform to normal numeric array indexes, you'd just specify the array index in each element manually like "cat"=>"ORDER BY..." in your sort map array and it should work identically.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:50:55.573

嗯，这就是我想要的。

首先，我正在编辑一个组件。最初它是一个表单，用于查看我想要查看游戏的顺序列表。

但我想要一个标签菜单。一个是新游戏，第二个是流行游戏。

所以我创建了选项卡菜单/系统。然后将代码添加到每个 div 中。因此它们具有相同的代码和形式。但是当我在前。选项卡 1（新游戏）并从选定的列表中选择按日期排序。它查看所有最新的游戏。但是当我拉到另一个选项卡（流行游戏）时，它已更改为查看最新游戏。它就像彼此继承。

这是选项卡的完整代码：

```
 <div class="tab">
    <h2><a name="newgames" id="newgames">a</a></h2>

<form action="<?php  echo JRoute::_('index.php'); ?>" method="post">
<input type="hidden" name="option" value="com_yoflash" />
<input type="hidden" name="view" value="category" />
<input type="hidden" name="mochicat" value="<?php echo $this->cat->catid; ?>" />
<select name="order" size="1" onchange="submit();">
<option value="0" <?php if($this->order=="0") echo "selected=\"selected\""; ?>><?php echo JText::_('ORDER_DATE_NEWEST'); ?></option>
<option value="4" <?php if($this->order=="4") echo "selected=\"selected\""; ?>><?php echo JText::_('ORDER_POPULAR'); ?></option>
</select>
<input type="hidden" name="Itemid" value="<?php echo $this->Itemid; ?>" />
</form>

 <?php
///////////////////////////////////////
// GAMES BOXES START
///////////////////////////////////////
  $db =& JFactory::getDBO();

  for($i=0;$i<count($this->games);$i++) {
  $game=$this->games[$i];
  $slug=$game->slug;

  $game->imgname=$this->params->get('dir_swf').$slug.'/'.$game->imgname;
  $game->description=$db->getEscaped($game->description);
  $game->description=str_replace("\\\"","\'",$game->description);
  $game->namett=$db->getEscaped($game->name);
  ?>

<div class="game" style="display:block;">

<a style="border:0;" href="<?php echo JRoute::_('index.php/play?option=com_yoflash&view=game&id='.$slug.'&Itemid='.$this->Itemid); ?>" onmouseover="Tip('<strong><?php echo $game->namett; ?></strong><br/> <?php echo $game->description; ?>',WIDTH,300,FADEIN,0,DELAY,0,BGCOLOR, '<?php echo $this->params->get('ttip_bgcolor'); ?>', BORDERCOLOR,'<?php echo $this->params->get('ttip_bordercolor'); ?>',FONTCOLOR,'<?php echo $this->params->get('ttip_fontcolor'); ?>',FONTSIZE,'<?php echo $this->params->get('ttip_fontsize'); ?>',FONTFACE,'<?php echo $this->params->get('ttip_fontface'); ?>')" onmouseout="UnTip()">
<img src="<?php echo $game->imgname; ?>" width="71" height="56" alt="<?php echo $game->name; ?>"/><br/>
<div class="gameName"><?php echo "<p>$game->name</p>"; ?></div>
</a>

<span class="info"><?php echo $game->description; ?></span>

 <span class="gamePlayed"><?php echo "<p>$game->stat_clicked <br/></p>".JText::_("<p> plays</p>") ;?></span> 

 </div> 
```

在这个标签（NEWEST GAMES）中，我只想查看最新的游戏

另一个选项卡（流行游戏）看起来一模一样。

希望描述更多？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:26:25.817

除了我上面的答案之外，我认为您想要的是显示一个 [select] html 下拉列表，您可以在其中“选择”一个排序顺序，这将从数组中提取适当的 SQL 并使用它。所以我建议是这样的

```
$sortIndex = $_POST["sort"];

$sortMap = array(
"ORDER BY date_added DESC",
"ORDER BY date_added ASC",
"ORDER BY name ASC",
"ORDER BY name DESC",
"ORDER BY stat_clicked DESC"
);
$sortDesc = array(
"Sort by date added in descending order",
"Sort by date added in ascending order",
"Sort by name in ascending order",
"Sort by name in descending order",
"Sort by number of clicks in desending order"
);

$sortType = isset($sortMap[$sortIndex]) 
    ? $sortMap[$sortIndex] 
    : "ORDER BY date_added ASC";

<select name="sort">
    <?php foreach($sortDesc as $k=>$text): ?>
    <option value="<?=$k?>" <?=$sortType==$k?"selected='selected'":""?> ><?=$text?></option>
    <?php endforeach?>
</select> 
```

if you had something similar to this in the page, then you can show the text strings inside the [select] and when one is selected+posted, it'll select the appropriate type from the arrays setup, obviously I haven't tested this在实际页面中，我是即兴创作，但我认为您可以理解我想要做什么？

# database - 如何使用三列选择行

> ID：11600656
> 
> 赞同：0
> 
> 时间：2012-07-22T13:27:10.277
> 
> 标签：database, r, dataframe

我在 R 中有一个 data.frame。我想选择在三列**之一中具有特定值的行。**我有一个**大的 data.frame**，但我需要的是下面的例子：

```
seller<-c("Mary", "Bill", "Jeff", "Paty", "Paul", "Criss")
c1<-c(1,2,1,1,3,1)
c2<-c(1,1,1,1,2,1)
c3<-c(1,1,3,1,1,1)
data<-data.frame(seller, c1, c2, c3)

>data
       seller c1 c2 c3
   1   Mary  1  1  1
   2   Bill  2  1  1
   3   Jeff  1  1  3
   4   Paty  1  1  1
   5   Paul  3  2  1
   6   Cris  1  1  1 
```

我想选择值等于且大于2的行，像这样：

```
>data
       seller c1 c2 c3
   1   Bill  2  1  1
   2   Jeff  1  1  3
   3   Paul  3  2  1 
```

**谢谢您的帮助！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:37:15.840

我不知道这是否是最好的方法，但您可以使用`rowSums`和`which`子集，如下例所示：

```
data[which(rowSums(data[-1]) > ncol(data[-1])), ]
#   seller c1 c2 c3
# 2   Bill  2  1  1
# 3   Jeff  1  1  3
# 5   Paul  3  2  1 
```

更直接的选择是：

```
data[which(apply(data[-1], 1, function(x) any(x >= 2))), ] 
```

我曾经`data[-1]`删除卖家的名字（因为它们是字符串）。然后，`apply`使用边距*按行*`1`应用指定的函数（边距将按列执行相同的操作）。函数是，它为每一行返回或；使用，我们可以对返回的行进行子集化。*`2``any(x >= 2)``TRUE``FALSE``which``TRUE`*

# java - 包括一个谷歌 GWT jar - 不起作用

> ID：11600660
> 
> 赞同：0
> 
> 时间：2012-07-22T13:27:43.117
> 
> 标签：java, eclipse, gwt

我正在尝试遵循有关 Google 图表的初学者教程：[http ://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted](http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted)

我一开始就遇到了一个问题，他们说：

> 由于我们正在使用附加库，因此将库 gwt-visualization.jar 添加到 Java 类路径中。然后，将模块 com.google.gwt.visualization.Visualization 添加到您的模块中。

根据我的研究，我必须将**gwt-visualization.jar**复制到**war/WEB-INF/lib**

在我这样做之后，我仍然有这个错误消息：

![在此处输入图像描述](../Images/52b7fe7300275e1b1564fcedd88a82df.png)

我还将模块添加到 XML 文件中。

谁能给我一个提示我错过了什么？

信息：Eclipse 4.2 Juno Mac OS X Lion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:36:47.790

黄色的摆动线不是错误而是警告，即它们通常不会阻止您的代码运行，但会提示可能不正确的事情。

在您的情况下，这两个`import`语句引用了[不推荐使用的 class`c.g.g.v.c.visualizations.PieChart`](http://gwt-google-apis.googlecode.com/svn/javadoc/visualization/1.1/com/google/gwt/visualization/client/visualizations/PieChart.html%60)。根据已弃用`PieChart`类的 javadoc，您应该[`c.g.g.v.c.visualizations.corechart.PieChart`](http://gwt-google-apis.googlecode.com/svn/javadoc/visualization/1.1/com/google/gwt/visualization/client/visualizations/corechart/PieChart.html)改用（注意额外的`corechart`包）。

它可能只是在不更改类名的情况下工作——不推荐使用的类不会以某种方式被破坏，它们只会在库的未来版本中消失，并且鼓励您用非不推荐使用的代码替换它们。因此，鉴于这主要是 learnign GWT 的教程代码，请先尝试它是否适用于已弃用的类。

注意：我在上面缩写了包名称，不要逐字使用它们，而是使用`com.google.gwt.visualization.client`.

# php - yii php如何自动填充相关表字段

> ID：11600661
> 
> 赞同：0
> 
> 时间：2012-07-22T13:28:07.313
> 
> 标签：php, yii, model, relationship

我有两个不同的表，一个是动物，另一个是类别，我已经添加了关系规则，例如：

动物模型课内

```
 return array(
    'category'=>array(self::BELONGS_TO, 'Category', 'category_id'),
    ); 
```

内类模型类

```
 return array(
    'animals'=>array(self::HAS_MANY, 'Animal', 'category_id'),
    ); 
```

创建表单的操作如下

```
public function actionCreate()
{
    $model=new Animal;

    if(isset($_POST['Animal']))
    {
        $model->attributes=$_POST['Animal'];
        if($model->save())
            $this->redirect(array('view','id'=>$model->id));
    }

    $model = $model->with('category')->find();

    echo $model->category->name; 
```

现在这是我的问题；我可以自动填充类别对象吗？我正在尝试的是我使用 crud 创建了一些表单，现在我需要使用这种关系，以便模型对象附带类别信息。为此，我明确地调用了这个条件

```
 $model = $model->with('category')->find(); 
```

有没有更好的方法来做到这一点，因为我不想重新填充整个对象？

# java - Java：如何从文件的每一行中读取 4 个数字。并将它们放入变量中？

> ID：11600665
> 
> 赞同：2
> 
> 时间：2012-07-22T13:28:24.003
> 
> 标签：java, file

文本文件如下所示：

> 数据,数据,数据,数据,数据
> ,数据,数据,数据

数据是数字。用逗号分隔的 4 个数字和大约 2000 行。但是我一次只需要使用 20 行。起始行需要通过它的编号来选择，然后它会得到 19 个额外的行。

需要将这些数据放入唯一命名的变量（浮点数）中，以便我可以对它们进行数学运算。所以可以这样命名：

> DataOne1 DataOne2 DataOne3 DataOne4
> DataTwo1 DataTwo2 DataTwo3 DataTwo4

这样我就可以像 DataTwo1 - DataOne3 那样做数学运算。这些变量当然总是被命名为相同的，但是我将能够通过选择新行来更改基础数据。

很抱歉，这是一个初学者的问题，但我完全无法将不同解决方案的东西放在一起以获得我的确切解决方案。

所以我的问题是我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T13:36:38.740

**1.** You can read the **entire line** using `Scanner` method `nextLine(`).

**2.** Then use `split()` method (I am assuming that the data is separated by( "," )commas), to get all the 4 data on the line.

**eg:**

```
String[] s = strLine.split(","); 
```

**3.** Consider making an **`ArrayList` of `Float` and then convert each item in the `String[]` array into a `Float` item in `ArrayList`, using** `Float.parseFloat()`

```
ArrayList<Float> fArr = new ArrayList<Float>();
for (String temp : s){
    fArr.add(Float.parseFloat(temp));
} 
```

**4.** Then do whatever calculation you need.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:46:01.420

为了得到你想要的，这些是你需要做的步骤：

**1.**使用以下命令打开文件[`BufferedReader`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)：

```
BufferedReader br = new BufferedReader(new FileReader(filename)); 
```

**2.**到达起跑线：

```
for (int i = 0; i < startLine; i++) {
    line = br.readLine();
} 
```

**3.**处理你需要的 20 行，将数字存储在一个[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)[`<Double>`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html)

```
for (int i = startLine; i < startLine + 20; i++) {
   line = br.readLine();

   // Split the lines using comma as delimiter
   String[] numberStrings = line.split(",");
   ArrayList<Double> numbers= new ArrayList<Double>();

   for(String numberString : numberStrings) {
       Double number = Double.valueOf(numberString);
       numbers.add(number);
   }
   // Do calculations with them
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:49:41.030

这是代码。对于每一行，我将值存储在数组中。因此，您的 DataOne1 将在 cols0[0] 中，DataTwo1 将在 cols0[1] 中，DataTwo1 将在 cols1[0] 中，DataTwo2 将在 cols1[1] 中，依此类推。你可以很好地使用二维数组来达到这个目的，但为了简单起见，我选择了这种方法。

```
 try {
        BufferedReader br = new BufferedReader(new FileReader("fileName"));
        String line;
        float[] col0 = new float[20];
        float[] col1 = new float[20];
        float[] col2 = new float[20];
        float[] col3 = new float[20];
        for (int i = 0; i < 20; i++) {
            while((line = br.readLine()) != null) {
                // Since you told comma as separator.
                String[] cols = line.split(","); 
                col0[i] = Float.valueOf(cols[0]);
                col1[i] = Float.valueOf(cols[1]);
                col2[i] = Float.valueOf(cols[2]);
                col3[i] = Float.valueOf(cols[3]);
            }
            // Do something - your math.
        }
        br.close();
    }
    catch (FileNotFoundException e1) {
        e1.printStackTrace();
    }
    catch (IOException e) {
        e.printStackTrace();
    } 
```

# c++ - C++ 多重继承和虚表

> ID：11600670
> 
> 赞同：6
> 
> 时间：2012-07-22T13:29:02.803
> 
> 标签：c++, inheritance, interface, multiple-inheritance

所以回到基础，我试图围绕 vtables 和诸如此类的东西。在下面的示例中，如果我要将 a 传递`B*`给某个函数，那么该函数如何知道调用`C`对象的 vtable 中的方法而不是 的 vtable 中的方法`A`？是否有两个单独的 VTable 传递给该对象？接口指针真的只是 vtables（因为接口 IIRC 不能包含属性声明）？

我想说的是，在我真正尝试这段代码之前，我一直假设您一次不能继承多个接口/类（并且所有接口都必须是线性的，可以这么说），以便 vtable 建立在自身之上。

如果我对 vtables 如何工作的想法*是*正确的（我现在知道它不是），那么传递 a`B*`和被调用`B::OutB()`就会`A:OutA()`改为调用（显然不是这种情况）。

有人可以阐明一下吗？

```
// Includes
#include <windows.h>
#include <iostream>

interface A
{
public:
    virtual void OutA() = 0;
};

interface B
{
public:
    virtual void OutB() = 0;
};

class C : public A, public B
{
public:
    void OutA();
    void OutB();
};

void C::OutA()
{
    printf("Out A\n");
}

void C::OutB()
{
    printf("Out B\n");
}

int main()
{
    C obj;
    obj.OutA();
    obj.OutB();

    A* ap = (A*)&obj;
    B* bp = (B*)&obj;

    ap->OutA();
    bp->OutB();

    system("pause");

    // Return
    return 0;
} 
```

输出（如预期）：

```
Out A
Out B
Out A
Out B 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T16:10:14.570

我不知道 an`interface`是什么，因为：

*   `interface`不是*C* ++ 关键字；
*   C++ 语义中没有“接口”的概念；
*   不同的 C++ 习语或模式可以将接口一词用于不同的特定目的；
*   其他语言使用“接口”来描述完全不同的实体（在 Java 中，它就像一种特殊的受限基类，在 O'Caml 中，它用于在 C++ 中您可能使用模板概念的地方）。

但是，如果您正在编写 C++ 并且`A`and`B`是类，那么`C`将包含两个子对象：`A`and `B`，并且这些子对象中的每一个都有自己的 vtable 指针。

在将 C++ 编译为 C 时，我们可以：

```
#include <stdio.h>
#include <stddef.h>
#include <stdlib.h>

const int debug = 0;

void __pure_virtual_called() {
    fputs ("pure virtual function called\n", stderr);
    abort();
}

/* Translation of:

class A
{
public:
    virtual void OutA() = 0;
};
*/

struct A;

typedef struct  {
    void (*ptr__OutA) (struct A *__this);
} vtable__A;

typedef struct A {
    vtable__A *__vptr;
} A;

/* translation A::OutA() 
 * pure virtual function */
void A__OutA (A *__this) {
     __pure_virtual_called();
}

vtable__A vtable__A__A = { .ptr__OutA = A__OutA };

void A__constructor (A *__this) {
    if (debug)
        printf ("A__constructor %p\n", (void*)__this);

    /* dynamic type is initialised to A */
    __this->__vptr = &vtable__A__A;
}

/* Translation of:

class B
{
public:
    virtual void OutB() = 0;
};

*/

struct B;

typedef struct {
    void (*ptr__OutB)(struct B *__this);
} vtable__B;

typedef struct B {
    vtable__B *__vptr;
} B;

/* translation B::OutB() 
 * pure virtual function */
void B__OutB (B *__this) {
     __pure_virtual_called();
}

vtable__B vtable__B__B = { .ptr__OutB = B__OutB };

void B__constructor (B *__this) {
    if (debug)
        printf ("B__constructor %p\n", (void*)__this);

    /* dynamic type is initialised to B */
    __this->__vptr = &vtable__B__B;
}
/* Translation of:

class C : public A, public B
{
public:
    void OutA(); // overrides A::OutA()
    void OutB(); // overrides B::OutB()
    // note :
    // no new virtual function
};

*/

/* no new virtual function 
 * so no specific vtable type! */

typedef struct {
/* no additional vptr, we already have 2! */
    A base__A;
    B base__B;
} C;

/******* upcasts 
 * translation of 
 * static_cast<C*> (p) 
 */

/* translation of 
 * A *p;
 * static_cast<C*> (p);
 */
C *static_cast__A__C (A *__ptr) {
    /* 
     * base__A is first member of C
     * so offsetof(C, base__A) == 0
     * can skip the pointer adjustment
     */ 
    return (C*)__ptr;
}

/* translation of 
 * B *p;
 * static_cast<C*> (p);
 */
C *static_cast__B__C (B *__ptr) {
    /* locate enclosing C object: 
     * __base__B is not first member
     * need to adjust pointer
     */
    return (C*)((char*)__ptr - offsetof(C, base__B));
}

/* translation of virtual functions of C 
 * overriding function declarations from A
 */

/* translation of C::OutA() */

/* C::OutA() called from C */
void C__OutA (C *__this) {
    printf("Out A this=%p\n", (void*)__this);
}

/* C::OutA() called from A */
void C__A__OutA (A *__this) {
    if (debug)
            printf ("C__A__OutA %p\n", (void*)__this);
    C__OutA (static_cast__A__C (__this));
}

vtable__A vtable__A__C = { .ptr__OutA = C__A__OutA };

/* translation of virtual functions of C 
 * overriding function declarations from B
 */

/* translation of C::OutB() */

/* C::OutB() called from C */
void C__OutB (C *__this) {
    printf("Out B this=%p\n", (void*)__this);
}

/* C::OutB() called from B */
void C__B__OutB (B *__this) {
    if (debug)
            printf ("C__B__OutB %p\n", (void*)__this);
    C__OutB (static_cast__B__C (__this));
}

vtable__B vtable__B__C = { .ptr__OutB = C__B__OutB };

void C__constructor (C *__this) {
    if (debug)
        printf ("C__constructor %p\n", (void*)__this);
    /* construct subobjects */
    A__constructor (&__this->base__A);
    B__constructor (&__this->base__B);

    /* adjust dynamic type of this to C */
    __this->base__A.__vptr = &vtable__A__C;
    __this->base__B.__vptr = &vtable__B__C;
}

/* calls to C virtual functions with a C* 
 */

/* translation of 
 * C *p;
 * p->OutA();
 *
 * is
 * ((A*)p)->OutA();
 *
 * because C::OutA() is overrides A::OutA()
 */
void dyn__C__OutA (C *__this) {
    A *base_ptr__A = &__this->base__A;
    base_ptr__A->__vptr->ptr__OutA (base_ptr__A);
}

/* translation of 

int main()
{
    C obj;
    obj.OutA();
    obj.OutB();

    A *ap = &obj;
    B *bp = &obj;
    C *cp = &obj;

    ap->OutA();
    bp->OutB();
    cp->OutA();

    // Return
    return 0;
}

 *
 */

int main () {
    /* translation of:
    C obj; 
    */
    C obj;
    C__constructor (&obj);

    /* translation of:
    obj.OutA();
    obj.OutB();
     * obj is a locally declared object
     * so dynamic type of obj is known as C
     * can make direct call to C::OutA(), C::OutB()
     */
    C__OutA (&obj);
    C__OutB (&obj);

    /* dumb (zero optimisation) translation of:
    A *ap = &obj;
    B *bp = &obj;
    C *cp = &obj;
    */
    A *ap = &obj.base__A;
    B *bp = &obj.base__B;
    C *cp = &obj;

    /* translation of:
    ap->OutA();
    bp->OutB();
    cp->OutA();

    * dumb compiler = no optimisation
    * so dynamic type of *ap, *bp, *cp is unknown
    * so make "virtual" calls using vtable
    */
    ap->__vptr->ptr__OutA(ap);
    bp->__vptr->ptr__OutB(bp);
    dyn__C__OutA (cp);

    /* note: obj lifetime ends now
     * C has a trivial destructor 
     * so no destructor call needed
     */

    return 0;
} 
```

见[http://ideone.com/TioyX](http://ideone.com/TioyX)

输出：

```
Out A this=0xbfeee2ec
Out B this=0xbfeee2ec
Out A this=0xbfeee2ec
Out B this=0xbfeee2ec
Out A this=0xbfeee2ec 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T15:56:57.210

通过多重继承，对象被构建成部分，每个部分对应于一个基类。这包括 vtable 指针。这是必要的，因为与指针或引用交互的代码不知道它是在使用基类还是派生类，因此它们的布局必须相同。

一个令人惊讶的结果是，当您将指针转换为一个基类时，它的地址可能会改变！编译器在幕后生成一些代码来调整指针到对象的正确部分。

```
C obj;
A* ap = (A*)&obj;
B* bp = (B*)&obj;
bool same = ((void*)ap) == ((void*)bp);  // false! 
```

# clutter - 杂乱 - 高场景构成，性能和建议的做法

> ID：11600672
> 
> 赞同：2
> 
> 时间：2012-07-22T13:29:08.980
> 
> 标签：clutter, meego, clutter-gui

我完全是新手，`Clutter`并且`Cogl`应该在一个应用程序上工作，它将显示相当大量的数据（列表、无尽的菜单、高度嵌套的元素等等）。

我一直在使用许多框架，特别是在 Windows 上，例如,`WinAPI`和知道，创建自定义组件时存在问题，例如使用现有组件的组合显示大量项目（例如，在表格中生成数千个标签以显示列表看法）。`WinForms``WPF``Lists`

**我的问题是 Clutter 在这方面的表现如何？**

它是否有一些场景虚拟化，只会在视口中呈现必要的项目？

它是否有一些可以处理 Actor 的高合成的合成层？

我的意思是`Actor`包含一个纹理，三个文本actors和另外两个actors代表一些按钮（可能也是组合的），所有这些都在一些转发器之王中。

我找不到与此相关的任何材料，也没有时间对此进行试验，所以我拼命寻求一些建议。

如果您要向我推荐另一种框架/方法，请不要这样做，因为`Clutter`这是我唯一的选择（系统要求，客户要求，...）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:29:55.847

我自己做了一些测量，看起来 Clutter 可以处理相当深和宽的合成树，而不会导致任何性能问题。我遇到的问题是由于列表中显示的项目分配不当引起的，这些项目没有正确释放。

# mongodb - MongoDB 将分片添加到现有集群 - 会发生什么？

> ID：11600680
> 
> 赞同：5
> 
> 时间：2012-07-22T13:29:53.823
> 
> 标签：mongodb

我试图确保我了解将新的 Shard（副本集）添加到现有的 Shard Cluster 时会发生什么。当我添加这些新成员并且它看到有一个新的 Shard 成员可用时，Mongo 然后开始重新排列块，以便它可以利用新成员，对吗？当这种情况发生时，你会受到什么样的影响？与往常一样，我假设您想在开始看到不利的性能数字时尝试添加这些成员（如果其他调整选项没有帮助）。

只是想更好地了解在集群已经存在时添加分片时会发生什么。

谢谢，

小号

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T15:24:15.663

当您将分片添加到现有集群时，它将自动成为每个分片集合中块数最少的分片。这意味着它将成为迁移的默认目标（从具有最多块数的分片），直到事情变得更加平衡。但是，每个分片主分片（负责迁移）一次只能参与一个迁移。因此，平衡需要一段时间，尤其是在负载不足的情况下。

就迁移本身而言，您已经在当前集群中看到了它们，这就是如何判断它们的影响。您可以在日志中查看最近的迁移，也可以查看更改日志（一个 10MB 上限的集合，其中包含最近的迁移/拆分等）：

```
// connect to a mongos, switch to the config DB
use config
// look at the changelog
db.changelog.find() 
```

就发生的操作而言，移动一个块：

1.  组成该块的文档必须读入源分片上的内存（如果还没有的话）（因此是相当标准的读取）
2.  然后将它们发送到目标分片（相当标准的插入/写入）
3.  最后，在元数据更新后，它们将从源分片中删除。

第 3 步是删除，它需要在源分片上写锁，但它应该很快 - 文档已经在迁移的内存中。

增加迁移频率的另一个影响是分片版本将更频繁地更新 - 特别是主要分片版本（因此它具有块到分片的最新映射。

这意味着您将看到更多有关 mongos 需要刷新其配置并更新其分片版本的记录消息。在开始长时间运行的操作（如 Map/Reduce 或 findAndModify）之前运行[flushRouterConfig 命令](http://docs.mongodb.org/manual/reference/commands/#flushRouterConfig)也是一个好主意。

如果您的分片使用率较低，您会发现迁移发生得更快，并且您还可以考虑使用[平衡器窗口](http://www.mongodb.org/display/DOCS/Sharding+Administration#ShardingAdministration-Balancerwindow)选项，仅在您注意到显着影响的特定时间运行平衡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T07:11:23.740

> 与往常一样，我假设您想在开始看到不利的性能数字时立即尝试添加这些成员

根据我的经验，您希望添加一个分片以预期流量增加。特别是如果分片数量很少（< 6 左右）。将数据迁移到新节点会增加现有节点的 IO，也会增加网络流量。

因此，如果您已经遇到 IO 问题，那么添加分片只会让情况变得更糟。您最终可能会“照看”迁移或使用 Balancer 窗口选项。事实上，平衡器窗口选项的存在应该告诉您平衡过程的强度。

> 当这种情况发生时，你会受到什么样的影响？

这里另一个不寻常的副作用是通常不在内存中的数据可能会被拉入内存。例如，如果您的历史数据大部分时间都没有动过，即使您的客户没有积极阅读它，也可以将其拉入以进行移动。

同样，这将与 IO 和我上面的评论相关联。

> 当我添加这些新成员并看到有一个新的 Shard Member 可用时，Mongo 然后开始重新排列块......

请注意，这只发生在分片并具有分片键的集合上。未分片的集合根本不动。这有时会在雷达下飞行，直到流量因未知原因开始累积在一个分片上。

对于未分片的数据，您可能希望将其保存在单独的副本集上，以确保您的分片按预期运行。

# python - 从 url 解析查询部分

> ID：11600681
> 
> 赞同：21
> 
> 时间：2012-07-22T13:30:00.603
> 
> 标签：python, urlparse

我想从 url 解析查询部分，这是我的代码：

```
>>> from urlparse import urlparse, parse_qs
>>> url = '/?param1&param2=2'
>>> parse_qs(urlparse(url).query)
>>> {'param2': ['23']} 
```

这段代码看起来不错，但“parse_qs”方法会丢失“param1”或“param1=”等查询参数。我可以用标准库解析查询部分并保存所有参数吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-22T13:41:04.943

你要：

```
from urlparse import parse_qs, urlparse

parse_qs(urlparse(url).query, keep_blank_values=True)
# {'param2': ['2'], 'param1': ['']} 
```

# javascript - Check if a node.js module is available

> ID：11600684
> 
> 赞同：27
> 
> 时间：2012-07-22T13:30:24.237
> 
> 标签：javascript, node.js

I'm looking for a way to find out if a module is available.

For example, I want to check if the module `mongodb` is available, programmatically.

Also, it shouldn't halt the program if a module isn't found, I want to handle this myself.

[PS: I added this question because Google isn't helpful.]

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-10-11T17:28:18.910

如果您只想检查模块是否可用（但如果不可用则不加载它），还有一种更聪明的方法：

```
function moduleAvailable(name) {
    try {
        require.resolve(name);
        return true;
    } catch(e){}
    return false;
}

if (moduleAvailable('mongodb')) {
    // yeah we've got it!
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-22T13:31:34.127

Here is the most clever way I found to do this. If anyone has a better way to do so, please point it out.

```
var mongodb;
try {
    mongodb = require( 'mongodb' );
}
catch( e ) {
    if ( e.code === 'MODULE_NOT_FOUND' ) {
        // The module hasn't been found
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T11:27:33.943

也许`resolve`-like 模块在这里会有所帮助？

模块的数量存在于 npm 上：

*   [异步解析](https://github.com/Meettya/async-resolve)
*   [解决](https://github.com/substack/node-resolve)
*   [解决它](https://github.com/jhamlet/node-resolveit)
*   [增强分辨率](https://github.com/webpack/enhanced-resolve)
*   [定位器](https://github.com/AndreasMadsen/localizer)

我先写了，`async-resolve`例如：

```
var Resolver = require('async-resolve');
var resolver_obj = new Resolver();
resolver_obj.resolve('module', __dirname, function(err, filename) {
  return console.log(filename);
}); 
```

它使用`node`模块路径解析规则，但不会像`node`它那样阻塞主循环。结果你得到文件名，所以它可以用来决定它的本地模块或全局和其他东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-05T22:46:45.487

带有 1 行代码的 ES6 简单解决方案：

```
const path = require('path');
const fs = require('fs');

function hasDependency(dep) {
        return module.paths.some(modulesPath => fs.existsSync(path.join(modulesPath, dep)));
} 
```

* * *

## 回答 #5

> 赞同：-9
> 
> 时间：2016-03-12T19:20:11.977

使用 ES6 箭头函数

```
var modulePath = m => { try { return require.resolve(m) } catch(e) { return false } } 
```

# css - Hover and Active only when not disabled

> ID：11600687
> 
> 赞同：252
> 
> 时间：2012-07-22T13:30:44.923
> 
> 标签：css

I use **hover**, **active** and **disabled** to style Buttons.

But the problem is when the button is disabled the hover and active styles still applies.

How to apply hover and active only on enabled buttons?

* * *

## 回答 #1

> 赞同：447
> 
> 时间：2012-07-22T13:32:48.510

您可以使用[:enabled](http://www.w3.org/TR/css3-selectors/#UIstates)伪类，但*注意`IE<9`不支持它*：

```
button:hover:enabled{
    /*your styles*/
}
button:active:enabled{
    /*your styles*/
} 
```

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2014-05-09T10:34:34.843

```
.button:active:hover:not([disabled]) {
    /*your styles*/
} 
```

你可以试试这个。。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2013-12-02T06:29:12.380

为什么不在 css 中使用属性“禁用”。这必须适用于所有浏览器。

```
button[disabled]:hover {
    background: red;
}
button:hover {
    background: lime;
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-06-11T07:43:45.250

如果你使用`LESS`or `Sass`，你可以试试这个：

```
.btn {
  &[disabled] {
    opacity: 0.6;
  }
  &:hover, &:active {
    &:not([disabled]) {
      background-color: darken($orange, 15);
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-09-19T21:42:14.777

在 sass (scss) 中：

```
 button {
  color: white;
  cursor: pointer;
  border-radius: 4px;

  &:disabled{
    opacity: 0.4;

    &:hover{
      opacity: 0.4;  //this is what you want
    }
  }

  &:hover{
    opacity: 0.9;
  }
} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2016-09-19T15:48:46.277

使用最轻的触摸：通过规则顺序覆盖。

```
.btn {
  /* base styles */
}

.btn:hover {
  color: red;
}

.btn:active {
  color: green;
}

.btn:disabled {
  color: #aaa;
} 
```

诀窍是顺序——首先应用所有非禁用状态，确保它们都具有相同的特异性，最后禁用，具有相同的特异性。

这不适用于添加到没有该`disabled`属性的链接或非交互式元素的类。

（编辑删除更高特异性的规则，并弄乱`pointer-events`）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-22T13:37:26.337

One way is to add a partcular class while disabling buttons and overriding the hover and active states for that class in css. Or removing a class when disabling and specifying the hover and active pseudo properties on that class only in css. Either way, it likely cannot be done purely with css, you'll need to use a bit of js.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-05T04:41:57.197

我在我的项目中使用下面的那个。

```
.bg-brand-3 {
  background-color: black;
  &[type="button"]:enabled {
    &:hover {
      background-color: orange;
    }
    &:active {
      background-color: green;
    }
  }
  &[type="submit"] {
    // css
  }
} 
```

的`:enable`含义与`:not(:disabled)`

# java - How to manually find the file path for an android file?

> ID：11600688
> 
> 赞同：1
> 
> 时间：2012-07-22T13:30:48.623
> 
> 标签：java, android, file, ftp, io

In the code below I created a new text file. I am having trouble locating where this file is and I need the actual file path of this file so I can upload to a ftp server. Can someone please help me ?

Note: I am testing this app on an actual phone and I would like to physically find the file.

Thanks !

```
try
{
    final String testString = new String("Hello");
    FileOutputStream fOut = openFileOutput("samplefile.txt", MODE_WORLD_READABLE);
    OutputStreamWriter osw = new OutputStreamWriter(fOut); 

    osw.write(testString);
    osw.flush();
    osw.close();
}
catch(IOException ex)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:12:53.570

它通常在“data/data/package.name”下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:45:36.813

**1.**对于您所做的，它在您当前的工作目录中。

**2.**要获取文件的路径，请使用`getFileStreamPath("samplefile.txt");`

**SDK Doc**提到了这一点：

**返回文件系统上存储使用 openFileOutput(String, int) 创建的文件的绝对路径。**

# mysql - Select Some of Two columns based on another table

> ID：11600689
> 
> 赞同：0
> 
> 时间：2012-07-22T13:31:00.977
> 
> 标签：mysql

I have two tables

**Joined_courses_table**

```
---------------------------------------
id      course1_id   course2_id
---------------------------------------
1           33           3
2           2            1

--------------------------------------- 
```

**Results_table**

```
---------------------------------------
course_id    value
---------------------------------------
33             50
3              40
2              70
1              130
--------------------------------------- 
```

Problem -> I want the Values Sum from results_table for each two pairs in the Joined_courses_table

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:29:00.353

尝试这个：

```
SELECT
  id, course1_id, course2_id, 
  results1.value + results2.value AS values_sum
FROM
  Joined_courses_table
  JOIN Results_table results1 ON (course1_id = results1.course_id)
  JOIN Results_table results2 ON (course2_id = results2.course_id) 
```

如果您有一个`PRIMARY KEY`on ，查询应该执行良好`Results_table.course_id`。

# regex - XSD 数据类型的正则表达式

> ID：11600690
> 
> 赞同：2
> 
> 时间：2012-07-22T13:31:02.613
> 
> 标签：regex, validation, xsd

在哪里可以找到 XSD 中定义的数据类型的正则表达式？

[XSD 规范](http://www.w3.org/TR/xmlschema11-2)包括数据类型的正则表达式，但它们似乎并不正确。例如，对于[`xsd:float`](http://www.w3.org/TR/xmlschema11-2/#nt-floatRep)建议的正则表达式 is `(\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee](\+|-)?[0-9]+)?|(\+|-)?INF|NaN`，它甚至可以匹配像“0.this is not a float”这样的字符串：

```
var floatRegex = /(\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee](\+|-)?[0-9]+)?|(\+|-)?INF|NaN/;
floatRegex.test("0.this is not a float"); # returns true 
```

我是否遗漏了 XSD 规范中的某些内容？XSD 数据类型是否有其他正确正则表达式的来源（例如，[RegExLib.com](http://regexlib.com/)没有它们）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:40:03.120

如果您不想允许任何东西，`^`请在开头和`$`结尾添加*（带分组）*：

`^( regex )$`

```
var floatRegex = /^((\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee](\+|-)?[0-9]+)?|(\+|-)?INF|NaN)$/; 
floatRegex.test("0.this is not a float"); # returns false 
```

# android - Drawing on surfaceview problems

> ID：11600692
> 
> 赞同：0
> 
> 时间：2012-07-22T13:31:07.060
> 
> 标签：android, canvas, surfaceview, runnable

Im trying to draw a Text on a surfaceview using a canvas. The problem is that the surfaceview doesn't seem to reset after each call. Everything that has been drawn prevously will be drawn again. So, if I have a text that I change position of each time its being drawn, I end up with a long trace of that text because canvas in not cleared.

What am I doing wrong?

```
public class Test1Activity extends Activity {

private Draw drawText;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

     drawText = new Draw(this);
    setContentView(drawText);
}

public class Draw extends SurfaceView implements Runnable {

    Thread thread = null;
    SurfaceHolder surfaceHolder;
    volatile boolean running = false;
    private int i;

    public Draw(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        surfaceHolder = getHolder();
        running = true;
        thread = new Thread(this);
        thread.start();
    }

    public void run() {
        // TODO Auto-generated method stub
        while (running) {
            if (surfaceHolder.getSurface().isValid()) {
                Canvas canvas = surfaceHolder.lockCanvas();

                Paint paint = new Paint();
                paint.setColor(Color.RED);
                i++;
                if(i > 240)
                    i = 1;

                canvas.drawText("Hello",i , 60, paint);

                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }
    }

}
} 
```

```
public class Test1Activity extends Activity {

private Draw drawText;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

     drawText = new Draw(this);
    setContentView(drawText);
}

public class Draw extends SurfaceView implements Runnable {

    Thread thread = null;
    SurfaceHolder surfaceHolder;
    volatile boolean running = false;
    private int i;

    public Draw(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        surfaceHolder = getHolder();
        running = true;
        thread = new Thread(this);
        thread.start();
    }

    public void run() {
        // TODO Auto-generated method stub
        while (running) {
            if (surfaceHolder.getSurface().isValid()) {
                Canvas canvas = surfaceHolder.lockCanvas();

                Paint paint = new Paint();
                paint.setColor(Color.RED);
                i++;
                if(i > 240)
                    i = 1;

                canvas.drawText("Hello",i , 60, paint);

                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }
    }

} 
```

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:54:45.873

You'll have to ereas the canvas before you draw something eg. canvas.drawColor(Color.BLACK);

*   ereas (draw black)
*   draw text

NB: Don't Create a Paint object in your updating and rendering Thread, it will drive the GC crazy!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:59:08.957

可能您必须以不同的 PorterDuff 模式重新绘制过时的画布。 [这个链接](https://softwyer.wordpress.com/2012/01/21/1009/)很有用。

# windows-phone-7 - 我可以更改 DataTemplate 中元素的属性，如何更改？

> ID：11600698
> 
> 赞同：1
> 
> 时间：2012-07-22T13:32:13.007
> 
> 标签：windows-phone-7, xaml, resources, datatemplate

我可以更改 DataTemplate 中元素的属性吗？例如：

```
<phone:PhoneApplicationPage.Resources>       
        <DataTemplate x:Key="LawItemTemplate">
            <StackPanel>
                <TextBlock
                    Text="{Binding Name}" 
                    TextWrapping="Wrap"/>
            </StackPanel>
        </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

我想更改 TextBlock FontSize，但是如何在 DataTemplate 中访问 TextBock？

不适合创建加载事件并按发件人获取元素的选项，因为这些更改对用户来说视觉上是显而易见的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:11:47.110

首先获取`ListBox`item的根元素

```
ListBoxItem item = listbox.ItemContainerGenerator.ContainerFromIndex(index) as ListBoxItem; 
```

然后在元素树中搜索几个`TextBlock`调用`.Children()`或给出一个并按名称搜索`Name``TextBlock`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:20:01.450

如果您想更改某些内容，`DataTemplate`只需将其绑定到数据上的属性并进行更改即可。如果可能，应避免弄乱控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:41:27.973

我不确定这是否是您的意思，但您可以使用`Trigger`s.

像这样：

```
<DataTemplate x:Key="LawItemTemplate">
        <StackPanel>
            <TextBlock x:Name="NameHolder"
                Text="{Binding Name}" 
                TextWrapping="Wrap"/>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding SomeProp}" Value="SomeValue">
                    <Setter TargetName="NameHolder" Property="FontSize" Value="18"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </StackPanel>
    </DataTemplate> 
```

当然，`RelativeSource`如果你需要监听视觉祖先的属性变化，你可以在触发器的绑定中使用。

# java - whats wrong?(NumberFormatException: null)

> ID：11600699
> 
> 赞同：4
> 
> 时间：2012-07-22T13:32:25.750
> 
> 标签：java, numberformatexception

```
 import java.io.*;
    class AccountInfo {

    private String lastName;
    private String firstName;
    private int age;
    private float accountBalance;
    protected AccountInfo(final String last,final String first,final int ag,final float balance) throws IOException{

        lastName=last;
        firstName=first;
        age=ag;
        accountBalance=balance;
    }
    public void saveState(final OutputStream stream){try{

        OutputStreamWriter osw=new OutputStreamWriter(stream);
        BufferedWriter bw=new BufferedWriter(osw);
        bw.write(lastName);
        bw.newLine();
        bw.write(firstName);
        bw.write(age);
        bw.write(Float.toString(accountBalance));
        bw.close();}
        catch(IOException e){
            System.out.println (e);
        }
    } 
    public void restoreState(final InputStream stream)throws IOException{
        try{

            InputStreamReader isr=new InputStreamReader(stream);
            BufferedReader br=new BufferedReader(isr);
            lastName=br.readLine();
            firstName=br.readLine();
            age=Integer.parseInt(br.readLine());
            accountBalance=Float.parseFloat(br.readLine());
            br.close();}
            catch(IOException e){
                System.out.println (e);
        }

    }

}
    class accounto{
        public static void main (String[] args) {try{

            AccountInfo obj=new AccountInfo("chaturvedi","aayush",18,18);
            FileInputStream fis=new FileInputStream("Account.txt");
            FileOutputStream fos=new FileOutputStream("Account,txt");
            obj.saveState(fos);
            obj.restoreState(fis);}
            catch(IOException e){
                System.out.println (e);
        }
    }
} 
```

im getting the following error: Exception in thread "main" java.lang.NumberFormatException: null at java.lang.Integer.parseInt(Integer.java:454) at java.lang.Integer.parseInt(Integer.java:527) at AccountInfo.restoreState(accounto.java:43) at accounto.main(accounto.java:60)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T13:35:56.190

这是你的代码：

```
BufferedReader br=new BufferedReader(isr);
//...
age=Integer.parseInt(br.readLine()); 
```

这是[`BufferedReader.readLine()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine())（粗体我的）的文档：

> 包含行内容的字符串，不包括任何行终止字符，**或者`null`是否已到达流的末尾**

事实上，你从来没有真正检查是否达到了 EOF。你能确定你的输入吗（结果你不能）。

也适用于[`Integer.parseInt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String))：

> **抛出：**
> 
> `NumberFormatException`- 如果字符串不包含可解析的整数。

`null`几乎不是“*可解析的整数*”。最简单的解决方案是检查您的输入并以某种方式处理错误：

```
String ageStr = br.readLine();
if(ageStr != null) {
  age = Integer.parseInt(br.readLine())
} else {
  //decide what to do when end of file
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T13:35:23.973

从这一行：

```
Integer.parseInt(br.readLine()); 
```

所以看起来你正在阅读流的结尾，所以它`br.readLine()`是空的。而且您不能将 null 解析为 int。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T13:35:35.880

该`br.readLine()`方法返回 null，它无法转换为 Integer - 可能的原因是已到达流的末尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T14:06:08.030

**1.**我认为返回的值`br.readLine()`是**null**。

**2.**所以它**不能从 String 转换为 Integer**。

**3.**这就是你得到的原因`NumberFormatException`

**4.**为了解决这个问题，将该代码包装成`try/catch`块。

```
 try{

        age = Integer.parseInt(br.readLine());

  }catch(NumberFormatException ex){

        System.out.println("Error occured with during conversion");
 } 
```

# javascript - jQuery Uniform dropdown not selecting option

> ID：11600701
> 
> 赞同：0
> 
> 时间：2012-07-22T13:32:46.920
> 
> 标签：javascript, jquery, forms, jquery-plugins, drop-down-menu

I am using a pretty basic and straightforward implementation of jQuery Uniform on a couple of dropdowns.

When the page loads, the dropdowns are skinned correctly by the plugin.

However, when I select an option and submit the form, I can see that no data is being posted.

If I remove the plugin then my form submits correctly with the selected option being passed OK.

Any ideas how to trouble shoot this?

# asp.net - 如何设计它？

> ID：11600703
> 
> 赞同：-4
> 
> 时间：2012-07-22T13:32:47.113
> 
> 标签：asp.net, .net

![尝试这样做。这是示例](../Images/f7d19e291b3a31f4267372bf589d1d86.png) 我正在尝试使用 VS 2010 设计一个像图片中的网页。我该如何设计这个？我做了“M”，但标签“财务报告”和上传控件不在同一行。**不知道“O”。**我是 asp.net 的新手，所以请给出一些想法

```
 <table align="center" style="width: 1000px; margin-top: 0px; height: 100px;"> 
    <tr>
       <asp:Label ID="lblFinLabel" runat="server" Text="2.Financial Capabilities"  CssClass="label" Font-Bold="True"></asp:Label>

       <td colspan="2">
       <div style="float:left; width:250px">
       <asp:Label ID="lblFinReports" runat="server" Text="1) Financial Reports (last 2 years)" CssClass="label" Font-Bold="True" Font-Size="X-Small" ></asp:Label>
       </div>
       <div style ="float:right;width:100px">
           &nbsp;<asp:UpdatePanel ID="UpdatePanel1" runat="server">
           <ContentTemplate>
                <asp:ScriptManager ID="SM2" runat="server"> </asp:ScriptManager>
                <ajaxToolkit:AsyncFileUpload ID="AFU2" runat="server" width="450px" UploaderStyle="Modern" ClientIDMode="AutoID"
                                OnClientUploadStarted="UploadStarted"
                                OnClientUploadComplete="UploadComplete"
                                OnClientUploadError="UploadError" 
                                OnUploadedComplete="AFUCmpCertificate_UploadedComplete" 
                                OnUploadedFileError="AFUCmpCertificate_UploadedFileError"/>
               <asp:Label ID="lblFinStatus" runat="server" ForeColor="#660033"></asp:Label>
          </ContentTemplate>
         </asp:UpdatePanel>
        </div>
        <div style="clear:both"></div> 
       </td>
     </tr>
     <tr>
     <td>
        <asp:Label ID="lblturnover" runat="server" Text="2) Turn-Over" CssClass="label" Font-Bold="True" Font-Size="X-Small" ></asp:Label>
     </td>
     </tr>
     <tr>
        <td colspan="2">
            <div style="float:left; width:278px">
             &nbsp;&nbsp;
            <asp:Label ID="lblAvg5" runat="server" Text="a) Average annual Turn-Over last 5 years" CssClass="label" Font-Bold="True" Font-Size="X-Small"></asp:Label>
            &nbsp;
            </div>
         <div>
            <asp:TextBox ID="txtAvgAnnual" runat="server" MaxLength="13" CssClass="textbox"></asp:TextBox>
        </div>
      </td>
     </tr>
     <tr>
       <td>
          &nbsp;&nbsp;&nbsp;
          <asp:Label ID="lblTO" runat="server" Text="b) Turn-Over last 5 years" CssClass="label" Font-Bold="True" Font-Size="X-Small"></asp:Label>
       </td>
     </tr>
     </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:37:02.750

您的 HTML 完全没有格式。您必须在表格中添加所有控件，最好使用样式表类而不是内联样式。

我尝试制作以下内容来展示您应该如何格式化您的 HTML 代码。

```
 <table class="tableCss">
        <colgroup>            
            <col style="width: 25%; white-space: nowrap;" />
            <col />
        </colgroup>
        <tr>
            <th>
                <asp:Label ID="lblFinReports" runat="server" Text="1) Financial Reports (last 2 years)"
                    CssClass="label"></asp:Label>
            </th>
            <td colspan="2">
                <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                    <ContentTemplate>
                        <asp:ScriptManager ID="SM2" runat="server">
                        </asp:ScriptManager>
                        <ajaxtoolkit:asyncfileupload id="AFU2" runat="server" width="450px" uploaderstyle="Modern"
                            clientidmode="AutoID" onclientuploadstarted="UploadStarted" onclientuploadcomplete="UploadComplete"
                            onclientuploaderror="UploadError" onuploadedcomplete="AFUCmpCertificate_UploadedComplete"
                            onuploadedfileerror="AFUCmpCertificate_UploadedFileError" />
                        <asp:Label ID="lblFinStatus" runat="server" ForeColor="#660033"></asp:Label>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <th>
                <asp:Label ID="lblturnover" runat="server" Text="2) Turn-Over" CssClass="label"></asp:Label>
            </th>
            <td>
            </td>
        </tr>
        <tr>
            <th>
                &nbsp;&nbsp;
                <asp:Label ID="lblAvg5" runat="server" Text="a) Average annual Turn-Over last 5 years"
                    CssClass="label"></asp:Label>
            </th>
            <td>
                <asp:TextBox ID="txtAvgAnnual" runat="server" MaxLength="13" CssClass="textbox"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <th>
                &nbsp;&nbsp;&nbsp;
                <asp:Label ID="lblTO" runat="server" Text="b) Turn-Over last 5 years" CssClass="label"></asp:Label>
            </th>
            <td>
            </td>
        </tr>
    </table> 
```

您还需要将以下样式添加到您网站样式表的页眉中。

```
<style type="text/css">
        .tableCss
        {
            text-align:left;
            width: 100%; 
            height: 100%;
        }
        .tableCss th
        {
            text-align:left;
            font-size:x-small;
        }
    </style> 
```

# wpf - 从数据网格中一行中的选定单元格中删除边框

> ID：11600705
> 
> 赞同：8
> 
> 时间：2012-07-22T13:33:18.343
> 
> 标签：wpf, xaml, styles

正如您在 Jesse Furher 周围的图片中看到的那样，是一条黑色边框线，我怎样才能删除所有单元格的这条线？

![例子](../Images/c88eee793ad91f0db6c886b4e6a1af9d.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-22T14:19:40.497

在您的 DataGrid 资源中添加此样式，选择边框将消失 -

```
<DataGrid>
  .
  .
  <DataGrid.Resources>
    <Style TargetType="DataGridCell">
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    </Style>
  </DataGrid.Resources>
  .
  .
</DataGrid> 
```

# php - 使用 SQL 进行投票/排名逻辑

> ID：11600708
> 
> 赞同：0
> 
> 时间：2012-07-22T13:33:32.460
> 
> 标签：php, mysql, sql, database, voting

我正在开发一个项目，该项目将使用比较投票逻辑将评分最高的排序到顶部，将最低的排序到底部（类似于“热与否”或“Hotstagram”）。基本上我需要做的是在数据库中随机拍摄两张彼此相邻的照片并让用户投票，为获胜者加一分，从失败者中减去一分，基本上将最高的过滤到顶部。

我的问题有两个，如何在 MySql 数据库中获取随机项，然后直接在其旁边获取随机项。其次（如果有人有这方面的经验）你将如何构建你的数据库？我在想一张用于图像的表格和一张用于投票的表格（然后在页面加载时编译结果）。我想我在这里关心的是，对于排名，新输入的照片将从零开始，所以你可以有 X 数量的相同排名的照片？我只是在那里抛出一些想法，我需要另一个想法来折腾这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:37:07.643

您可以使用[Order by Rand()](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)函数从数据库中获取随机记录。

`SELECT * FROM tbl_name ORDER BY RAND();`

您也可以很容易地将其限制为两行，如下所示：

`SELECT * FROM tbl_name ORDER BY RAND() limit 2;`

然而，这将从数据库中获得两个随机行，而不是两个连续的行。

如果您想获得两个随机和连续的行，您可以运行一个查询来获取 ID，并运行一个子查询来获取它之后的下一个 ID。

至于将数据保存在一个/两个表中，请务必将其保存在两个表中。将保存投票的第二个表与指向图像 ID 的链接链接起来。显然，根据需要在链接（和或其他字段）上添加所需的索引。

编辑：这是让您在一行中获取后续两行数据的代码：

```
select
    a.id,
    (
        select
            min(c.id)
        from
            table1 c
        where
            c.id>a.id
        limit 1
    ) as id2
from
    table1 a
order by
    rand()
limit 1; 
```

编辑 2：如果您希望它们作为单独的行来提取各种其他位，我在下面提供了查询。我使用了一个额外的子查询，就好像最初的查询碰巧提取了最大值（可能在使用 rand() 的 order 时可能，然后它解决了只返回一行数据的问题。

```
select
    b.id
from
    table1 b,
    (
    select
        a.id as id
    from
        table1 a
    where
        a.id<(select max(id) from table1 limit 1)
    order by 
        rand() 
    limit 1
    ) a
where
    b.id>=a.id
    order by
    b.id
limit 2
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:36:49.680

这是按顺序获取两个随机行的另一种方法：

```
with first as (select id
               from table t
               where id < (select max(id) from table)
               order by rand()
               limit 1
              )
select id
from table t
order by abs(id - first.id)
limit 2 
```

至于结构化数据。您可能需要一张用于照片，一张用于用户，一张用于“优惠”（一对带有用户 ID 的照片），一张用于投票。了解用户不投票以及他们投票的内容通常变得非常重要。

如果您想在排名相同的照片上打破平局，您可以使用照片首次进入系统的日期、报价数量或两者的某种组合。

# python - 从类内部分配类变量动态值

> ID：11600716
> 
> 赞同：1
> 
> 时间：2012-07-22T13:36:07.190
> 
> 标签：python, oop, static

我正在尝试从类内部动态地为类变量分配一个值。

```
class Test:
  dynamic_value = get_dynamic_value() 
```

我相信`get_dynamic_value()`应该属于这个`Test`类。有没有办法`Test`包含这个方法？

现在我正在使用它正在工作

```
def get_dynamic_value():
  return 'my dynamic value'

class Test:
  dynamic_value = get_dynamic_value() 
```

我希望 Test 包含此方法，因此我尝试将其设置为 a`@classmethod`和 a`@staticmethod`并通过以下方式调用它

```
class Test:
  dynamic_value = Test.get_dynamic_value()

  @staticmethod
  def get_dynamic_value():
    return 'dynamic' 
```

但是当我使用静态方法尝试它时，我收到

`AttributeError: class Test has no attribute 'get_dynamic_value'`

有没有办法做到这一点？或者有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:52:44.953

类套件从上到下评估，并且您定义的类在评估整个套件之前不存在。

您可以将函数定义放在类主体中，但您必须在定义之后调用它，而不是之前。因此，这将起作用：

```
class Test:

  def get_dynamic_value():
    return 'dynamic'

  dynamic_value = get_dynamic_value() 
```

不需要将函数标记为静态方法；它根本不用作方法，只是在类套件中评估期间调用的函数。如果您不希望在定义类后该函数可用（因为它不打算作为方法），您可以将其删除。

```
class Test:

  def get_dynamic_value():
    return 'dynamic'

  dynamic_value = get_dynamic_value()
  del get_dynamic_value 
```

如果该值确实应该是动态计算的，那么每次您要求它时（因此它能够从访问更改为访问），那么您应该使用一个属性。

```
class Test:

  @property
  def dynamic_value(self):
    return 'dynamic' 
```

这只会在类实例上访问时进行评估，但属性对象本身将存在于类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:14:37.883

只是添加到马特安德森的答案 - 使用类属性的解决方法：

```
class classproperty(property):
    def __get__(self, cls, owner):
        return classmethod(self.fget).__get__(None, owner)()

class Test:
  @classproperty
  def dynamic_value(cls):
    return 'dynamic' 
```

和一个简单的测试：

```
In [102]: Test.dynamic_value
Out[102]: 'dynamic' 
```

# spring - spring junit testing with JMock

> ID：11600718
> 
> 赞同：0
> 
> 时间：2012-07-22T13:36:17.813
> 
> 标签：spring, junit, mocking, jmock

I have a Spring maven project and we are going to use JMock to test service/business/DAO layers of my project as suggested by client.
Can somebody please provide me the good link going through which I can understand and implement it? Also I have heard of other mocking frameworks like Mockito or EasyMock. Is JMock better than those? or Which one is better to use even? This is just for knowledge sake as I will be using JMock only since it is suggested by the client

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:42:16.337

这个问题也发布到 coderanch.com。从那里复制/粘贴我的答案。

~~~~~~~~~~~~~~~~~~~~~

官方[的入门](http://www.jmock.org/getting-started.html)指南和[食谱](http://www.jmock.org/cookbook.html)都很好。

所有三个模拟框架都很好。目前，Mockito 更先进一些。尽管如此，所有三个框架仍在增强。jMock 的下一个版本迎头赶上。

# html - 中间有斜率的css线

> ID：11600721
> 
> 赞同：4
> 
> 时间：2012-07-22T13:36:39.660
> 
> 标签：html, css

在**CSS**中，我如何实现以下目标： ![在此处输入图像描述](../Images/c821000e9470bc51a932522c1b5fa831.png)

我的尝试：

```
<div id="slope"></div>

#slope{
    width: 100px;
    border-top: 20px solid #000;
    border-right: 90px solid #fff;
} 
```

但后来我被困在如何让东西看起来像一条线而不是一条实线

我已经尝试过 raphael JS，它可以工作，但我需要将此元素与 jQuery 的动画结合起来，raphael 使用 SVG，并且似乎不能很好地与 jQuery 一起使用

**css3/html5 没问题，只要 safari/chrome 支持就可以了**

**我需要能够修改斜坡部分的放置位置。（例如：将中间的斜坡部分向左移动一点）。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T14:03:35.390

给定以下 HTML：

```
<span class="left"></span><span class="slope"></span><span class="right"></span>​ 
```

下面的 CSS 如你所愿，根据`.left`元素的宽度向左或向右移动“斜率”：

```
span {
    min-height: 1em; /* to give a common height to all spans */
    display: inline-block; /* to enable the spans to take a specified dimension */
}
span.left {
    position: relative; /* to allow for the element to be shifted slightly */
    top: 0.15em; /* to join the border with the slope of the next element */
    width: 5em;
    border-top: 0.15em solid #000;
}

span.right {
    width: 10em;
    border-bottom: 0.15em solid #000;
}

span.slope {
    position: relative; /* to allow the generated content to be 
                           positioned relative to this one */
    background-color: #000; /* the 'slope' color */
    overflow: hidden;
    width: 1em; /* affects the 'width' of the slope */
}

span.slope::before {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    bottom: 0;
    border: 0.45em solid #fff; /* masks the background-color of the span */
    border-top-color: transparent; /* allows the ::after element's 
                                      borders to show through */
    border-right-color: transparent;
}

span.slope::after{
    content: '';
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    border: 0.45em solid #fff;
    border-bottom-color: transparent;
    border-left-color: transparent;
} 
```

​<a href="http://jsfiddle.net/davidThomas/M6FXZ/1/" rel="noreferrer">JS Fiddle 演示。

[JS Fiddle 演示，斜坡的“行程”更广泛](http://jsfiddle.net/davidThomas/M6FXZ/2/)。

值得注意的是，虽然这显然是可能的（在支持伪元素的浏览器中），但这是一种过于复杂的方法，如果可能的话，应该使用基于画布或转换的解决方案）。

* * *

更新以响应 OP 的评论（如下）：

> 我已将 span{min-height: 1em} 更改为更高的值，但斜率似乎没有根据高度进行调整....还是我做错了什么？

改变元素的高度`span`应该可以，但你会得到一个奇怪的结果；以下 CSS 更改（其余 CSS 未更​​改）：

```
span {
    min-height: 1em; /* to give a common height to all spans */
    display: inline-block; /* to enable the spans to take a specified dimension */
} 
```

导致：

[![](../Images/557f1a23ecdee2a4377d3d939186e027.png)](http://jsfiddle.net/davidThomas/M6FXZ/5/ "链接到 JS Fiddle 演示。")

起初这可能看起来很奇怪，但如果你记得我们使用生成内容的边框来隐藏`.slope`元素的背景颜色，那就更有意义了，特别是如果我们为这些边框分配替代颜色：

```
span {
    min-height: 1em;
    display: inline-block;
}
span.slope::before {
    /* everything else untouched */
    border: 0.45em solid #f00;
}
span.slope::after{
    border: 0.45em solid #f90;
} 
```

[![](../Images/5b9e921f83e846d9e26c8b40c9c92a90.png)](http://jsfiddle.net/davidThomas/M6FXZ/6/ "链接到 JS Fiddle 演示")

很明显，在这一点上，为了保持斜坡的“宽度”，我们还需要增加生成内容的边框宽度：

```
span {
    min-height: 1em;
    display: inline-block;
}
span.slope::before {
    /* everything else untouched */
    border: 0.95em solid #f00;
}
span.slope::after{
    border: 0.95em solid #f90;
} 
```

结果是：

[![](../Images/b7dfaf27e53a6517b500936c21929df8.png)](http://jsfiddle.net/davidThomas/M6FXZ/7/ "链接到 JS Fiddle 演示").

然后，去除容易看到的颜色，让我们稍微整洁，更大：

[![](../Images/8c96222bc5852664b56b8a4d467fb688.png)](http://jsfiddle.net/davidThomas/M6FXZ/4/ "链接到 JS Fiddle 演示").

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-22T13:45:01.120

使用[html5 画布](http://www.tutorialspoint.com/html5/canvas_drawing_lines.htm)。这是我的[小提琴示例](http://jsfiddle.net/gtGXz/)。

JS：

```
var canvas = document.getElementById('mycanvas');
if (canvas.getContext)
{ 
    // use getContext to use the canvas for drawing
    var ctx = canvas.getContext('2d');

    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(10,10);
    ctx.lineTo(100,10);
    ctx.lineTo(120,30);
    ctx.lineTo(220,30);
    ctx.stroke();
} 
else 
{
    alert('Not supported');
}
​ 
```

HTML：

```
 <canvas id="mycanvas"></canvas>​ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-22T13:39:24.583

使用`transform`和`rotate`。

```
.slope{
    margin-top: 30px;
    width: 100px;
    border-bottom: solid 3px black;
    -o-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -webkit-transform: rotate(45deg);
} 
```

[**小提琴**](http://jsfiddle.net/eYwb7/3/)

用 2 条线连接的坡度：[**小提琴**](http://jsfiddle.net/eYwb7/2/)

# php - MVC based system general files/folders structure

> ID：11600726
> 
> 赞同：1
> 
> 时间：2012-07-22T13:37:07.703
> 
> 标签：php, model-view-controller, layout, directory-structure

I'm trying to figure out the correct layout of classes, methods, files and folders for a MVC design based system.

Let say we have a *Page*. *Page* is a simple page with title, text and a sub menu. And it can also include a gallery (which would be a separate object both in the database and in the code).

1.  I would have a `PageDAO` class that would have all database related functions (it would extend main `DAO` class, that would hold generic DB functionality as select, save, delete etc)

2.  I would have separate Page class that would define variables and non-db related functions for this object

3.  I would have the MVC itself where `PageModel` would construct page `DAO` class and page class and build content that would then be processed in controller and prepared for a view

4.  Gallery would be defined in a separate class outside MVC (let say libs folder) and it would never be used as a view ( I mean, I would never call the gallery page itself). Page model would create Gallery class and controller would place it in a page view

5.  Menu class/function would be more generic function (as it would work for both pages and categories, if the code is used for e.g. shopping site) and would also be defined in a separate area (could be libs folder again). Menu setup based in that functionality would be called in model

The above means I would have the following structure

*   model, view, controller files and folders based on standard MVC approach

*   dao lib folder for all `DAO` classes

*   lib folder for classes like `Page`, `Menu`, `Gallery`

Does it look fair to you? I'm just anxious not to spread out the code over too much classes as it then means more 'includes' and more object calls. But perhaps that's the way to go? So far I haven't been using much MVC approach and been keeping files rather compacted. Want to get to know about the best practices

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:19:14.457

Here are few things for you to think about:

*   Your `Page` class is a standard [domain object](http://c2.com/cgi/wiki?DomainObject), but the `PageModel` class is not really a model. Model is a layer in MVC. What you call *'PageModel'* is actually a higher level objects withing model layer, which create the pulic-ish interface so that views and controllers can interact with model later, without exposing any domain business logic. I call such structures "services", but there should be a better term for it.

*   Controller should not "prepare data" for the view. View is not a dumb template ( or at least, it should not be ), it should be a fill-blown objects, which is responsible for presentation logic and can deal with multiple templates

*   It seems that you are borrowing some concepts from HMVC, you should read a bit about that MVC-inspired pattern.

*   The instances of `DAO`, `Page' class and what you call`PageModel' all belong to model layer.

*   Fragmentation of code is not a major performance issue, especially when you enable opcode cache via APC. But premature optimization **is** a serious issue. Instead you should focus on making your code easily understandable. You can optimize when it works.

# android - Android模拟器与PC服务器socket通信

> ID：11600729
> 
> 赞同：0
> 
> 时间：2012-07-22T13:37:20.400
> 
> 标签：android, sockets, client-server

我写了一个服务器-客户端模型的android程序。我的电脑充当服务器，AVD 充当客户端。我使用 10.0.2.2 作为服务器的地址来连接，但服务器端什么也没收到。当客户端是普通的 java 程序时，我的服务器工作正常。当客户端是 Android 模拟器时会出现问题。我一直在研究这个问题很长时间，但我仍然没有解决方案。希望有人可以帮助我，谢谢！我的代码：服务器：

```
import java.net.*;
import java.io.*;
public class Server {

    public static void main(String[] args) throws IOException{

        ServerSocket server = new ServerSocket(6002);
        while(true){
            Socket client = server.accept();
            BufferedReader in= new BufferedReader(new InputStreamReader(client.getInputStream())); 
            System.out.println(in.readLine());
        }
    }
} 
```

客户：

```
public class modules extends Activity {
    private ListView myListView;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.modules);
        myListView = (ListView)findViewById(R.id.listView1);

        Intent intent = getIntent();
        Bundle b = intent.getExtras();
        String semester = b.getString("semester");
        String subject = b.getString("subject");

        try {
            Socket socket = new Socket("10.0.2.2",6002);
            PrintWriter out=new PrintWriter(socket.getOutputStream(),true);  
            String s1 = "SEME" + semester;
            out.println(s1);
            out.flush();
            String s2 = "SUBJ" + subject;
            out.println(s2);
            out.flush();
            socket.close();

        } catch(UnknowHostException e) {
              e.printStackTrace();
        } catch(IOException e) {
               e.printStackTrace();
        }
    }
} 
```

在 logcat 中有如下错误：

```
android.os.NetworkOnMainThreadException; 
```

以及严格模式的错误：

```
07-22 14:24:24.892: E/AndroidRuntime(759):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099). 
```

我已经在清单 xml 文件中添加了用户权限，所以问题一定是别的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:20:53.377

查看错误内容：NetworkOnMainThreadException。这意味着您不应该在 Android 的主线程上进行网络操作，因为如果您的请求恰好延迟一段时间，设备的响应将被阻止，直到该请求完成。

为了在 android 上使用 Socket 客户端，你应该看看 AsyncTask、Thread 或 Service。我建议您使用非常简单的 AsyncTask。您在 onCreate() 方法中的代码应该放在另一个以这种方式扩展 AsyncTask 的类中：

```
public class YourAsyncTask extends AsyncTask<Void, Void, Void>
{
    protected Void doInBackground(Void... params)
    {
        //your socket code here...
    }
} 
```

有关更多信息，请查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的文档或浏览 web/stackoverflow 以获取完整示例！

希望这会有所帮助……再见。

# c++ - clang libc++ error: overload resolution selected implicitly-deleted copy assignment operator

> ID：11600733
> 
> 赞同：3
> 
> 时间：2012-07-22T13:38:07.080
> 
> 标签：c++, c++11, clang, std, libc++

I can't get a C++11 project using clang 3.1 to compile. The command to the compiler is this:

```
clang++-mp-3.1 -c -std=c++11 -stdlib=libc++ -Wall -g -Iinclude -I/usr/local/include -I/opt/local/include -I/usr/local/include/mongo -o world.o world.cpp 
```

And the error I get, since I included the "-stdlib=libc++" directive, is this:

```
In file included from world.cpp:1:
/usr/include/c++/v1/string:1952:10: error: overload resolution selected implicitly-deleted copy assignment operator
    __r_ = _STD::move(__str.__r_);
         ^
/usr/include/c++/v1/string:1942:9: note: in instantiation of member function 'std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__move_assign' requested here
        __move_assign(__str, true_type());
        ^
/usr/include/c++/v1/string:1961:5: note: in instantiation of member function 'std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__move_assign' requested here
    __move_assign(__str, integral_constant<bool,
    ^
/usr/include/c++/v1/utility:200:24: note: in instantiation of member function 'std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::operator=' requested here
struct _LIBCPP_VISIBLE pair
                       ^
/usr/include/c++/v1/memory:1941:5: note: copy assignment operator is implicitly deleted because '__compressed_pair<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>
      >::__rep, std::__1::allocator<char> >' has a user-declared move constructor
    __compressed_pair(__compressed_pair&& __p)
    ^
1 error generated. 
```

Can anyone advise me on how I can get this to work?

The file I'm trying to compile doesn't even have to include any C++11 code for this error to occur, the "-stdlib=libc++" directive alone is enough to make it break.

Thanks for any & all assistance, Doug.

UPDATE: Hi -- the code is pretty basic, but in making it as basic as possible, I came across this error:

```
Undefined symbols for architecture x86_64:
  "std::__1::cout", referenced from:
      _main in world.o
  "std::__1::basic_ostream<char, std::__1::char_traits<char> >::sentry::sentry(std::__1::basic_ostream<char, std::__1::char_traits<char> >&)", referenced from:
      std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char const*) in world.o
  "std::__1::ios_base::clear(unsigned int)", referenced from:
      std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char const*) in world.o
  "std::__1::basic_ostream<char, std::__1::char_traits<char> >::sentry::~sentry()", referenced from:
      std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char const*) in world.o
  "std::__1::ios_base::__set_badbit_and_consider_rethrow()", referenced from:
      std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char const*) in world.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

To get this error, I stripped my code back to this:

```
#include <iostream>
int main( int argc, char *argv[] )
{
  std::cout << "Hi.\n";
} 
```

Which makes this look like something pretty fundamentally wrong.

I don't get this error when I take out the "-stdlib=libc++" directive to the compiler.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:16:26.980

也许您应该考虑从 llvm 本身安装 clang。这可以在[这里](http://llvm.org/releases/download.html)找到。我不是 100% 确定，但也许 macports 或类似工具已经针对与您安装的 gcc 不同的 gcc 编译了您的版本。llvm 下载是针对已安装的 gcc 编译的，应该证明与 ABI 兼容。

如果您遵循 llvm 中的说明，您也可以升级 libc++.dynlib，但请注意 MAC 中的许多 progs 都依赖于此，因此您必须复制现有 lib（以防万一）。如果你想要最前沿，你可能需要深入研究这些变化。我已经在 Mac 上完成了这个，它非常好，可以编译 c++11 代码就好了。

要构建 libc++，请参见[此处](http://libcxx.llvm.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-11T12:39:09.997

[这里](https://stackoverflow.com/questions/14085620/why-do-c11-deleted-functions-participate-in-overload-resolution)有一个类似的问题。

简而言之，发生这种情况是因为其中一个可能的重载被声明为禁止，因此重载决议失败。为了解决这个问题，您应该明确地进行强制转换，以使禁止的重载不是调用的解决方案之一。

有关非常详细且写得很好的解释，请参阅已接受的链接问题的答案。

# c# - ApiController 可以返回一个包含其他对象集合的对象吗？

> ID：11600734
> 
> 赞同：3
> 
> 时间：2012-07-22T13:38:26.690
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

如果我有一个`Customer`只有简单属性（例如`Name`等）的类，那么我可以创建一个`CustomersController`从 派生的类`ApiController`，并使用 URL 查询我的 Customer 对象`/api/customers`。

同样，如果我有一个`Order`具有简单属性 ( `Description`, `Amount`) 的类，那么我可以创建一个`OrdersController`并以相同的方式访问它。

但是，如果我随后将一个属性添加到我的`Customer`类中，该属性列出了`Order`与该关联的 s `Customer`：

```
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    // ...
    public virtual ICollection<Order> Orders { get; set; }
} 
```

...然后当我尝试使用查询时，`/api/customers`我得到一个 500 服务器错误。我可以在 中放置一个断点，`CustomersController`并且可以看到它确实调用了正确的方法，并尝试返回一个值。但是，在框架内部的某个地方，它未能将其转换为 HTTP 响应。

看起来它无法序列化`Orders`信息和/或将其打包以用于 HTTP 响应，但我不确定我需要做什么才能实现这一点。或者仅仅是 WebApi 的东西不是为了返回复杂对象而设计的？

* * *

**更新**：我的代码在这里：[https ://gist.github.com/43ed2f29f8adfb44cef6](https://gist.github.com/43ed2f29f8adfb44cef6)

* * *

**更新 2**：有关我得到的错误的更多信息：

> ```
> Server error
> The website encountered an error while retrieving http://localhost:1031/api/customers/6. 
> ```
> 
> 它可能因维护而停机或配置不正确。以下是一些建议： 稍后重新加载此网页。HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

Intellitrace 日志显示如下：http: [//i.imgur.com/iHxJl.png](https://i.imgur.com/iHxJl.png)

*[我简直不敢相信 Intellitrace 窗口不允许我复制文本，所以我不得不实际打印屏幕并上传图像。今年是哪一年？】*

* * *

相关：[ASP.Net Web API 在 VS 中正确显示但给出 HTTP500](https://stackoverflow.com/questions/10897523/asp-net-web-api-showing-correctly-in-vs-but-giving-http500)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T22:36:56.043

您正在传递一个会导致问题的实体框架实体。您需要数据传输对象来传递和接收您的数据。因为您将实体绑定在一起，所以它不允许您序列化数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:34:20.523

好的，很抱歉回答我自己的问题，特别是在我得到所有帮助之后（感谢 tugberk），但有一个简单的（r）解决方案。

正如 tugberk 指出的那样，问题在于我使用实体框架代码优先处理我的 POCO 对象。当框架尝试序列化我的对象时，它正在序列化 EF 代理类，而不仅仅是 POCO 对象。

Tugberk 建议使用 DTO 来传递和接收数据（本质上是为此目的创建新类），但我真的不想这样做，因为我的 POCO 类对我来说看起来非常合适，并且重复的类似乎不是很干燥.

然后我发现（通过[https://stackoverflow.com/a/11386206/98422](https://stackoverflow.com/a/11386206/98422)）我可以在我的控制器中关闭 DbContext 上的代理生成（如下所示），这将导致 POCO 对象被序列化而不是代理类 - 从而避免 500 错误：

```
db.Configuration.ProxyCreationEnabled = false; 
```

不过，这只是解决方案的 50%，因为虽然这避免了错误，但它没有包含子对象的任何数据。（那些在 XML 中作为 nil 出现）。那是因为我的 POCO 类设置为通过 EF 进行延迟加载。为了解决这个问题，我必须显式加载子对象：

```
return db.Customers.Include("Orders").AsEnumerable(); 
```

工作完成了，幸好没有多少代码要写。

# javascript - 下划线的每个检查 {} 回调的返回

> ID：11600735
> 
> 赞同：14
> 
> 时间：2012-07-22T13:38:29.830
> 
> 标签：javascript, underscore.js

我正在研究 UnderscoreJS 如何实现他们的`each`/`forEach`

```
//somewhere up top:
var breaker = {};

//then the each function
var each = _.each = _.forEach = function (obj, iterator, context) {
    if (obj == null) return;
    if (nativeForEach && obj.forEach === nativeForEach) {
        obj.forEach(iterator, context);
    } else if (obj.length === +obj.length) {
        for (var i = 0, l = obj.length; i < l; i++) {
            if (iterator.call(context, obj[i], i, obj) === breaker) return;
        }
    } else {
        for (var key in obj) {
            if (_.has(obj, key)) {
                if (iterator.call(context, obj[key], key, obj) === breaker) return;
            }
        }
    }
};

//iterator = callback
//context  = optional third parameter of each to provide context in the callback
//obj      = the list
//key      = key of the object (i for index when an array) 
```

基本上，它为对象/数组中的每个项目执行回调。但这让我很困惑

```
if (iterator.call(context, obj[key], key, obj) === breaker) return; 
```

据我了解，如果回调返回一个对象，则循环会中断，但是...**为什么要`breaker`与下划线模块中的内部对象进行比较？**. 它不是一直评估，`false`因为即使回调确实返回了一个对象，它总是`false`因为它不是同一个对象（因此循环*永远不会中断*）。这背后的原因是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-22T13:44:22.037

他们`each`在内部使用例如`some`. 由于`some`确实发生了短路，他们可以`each`使用“秘密”对象在那里中断，而不会向普通用户公开此功能。它们没有公开中断功能，因为本机函数也不这样做（因此它们的 shim 尽可能与本机相似）。如果他们这样做了，那么中断功能只有在本机功能不可用时才可用，这并不是特别有用。

# c++ - Can I use Boost and/or C++ libraries SAFELY inside an Apache module?

> ID：11600736
> 
> 赞同：3
> 
> 时间：2012-07-22T13:38:41.313
> 
> 标签：c++, apache, boost, apache-modules

In my Apache module, which is built in C++, I uses strings, vectors, and the related when attempting to provide functionality to my module.

My concern is that I am not using the Apache memory pool and that the program is going to segfault along the way, but at the same time I having difficulty with certain task such as this:

```
static void parseSTR(char *input, const char *sep, int &count, apr_table_t *&values, apr_pool_t *mp)
{
    char *part, *next;

    if (isStrNull(input)) 
        return;

    count = 1;

    part = apr_strtok(input, sep, &next);

    while (part) {
        apr_table_set(values, apr_itoa(mp, count), part);

        part = apr_strtok(NULL, sep, &next);

        count++;
    }
} 
```

which I am using a delimited string parser to parse URLs and domain names. Surely there is a more efficient way to provide this functionality. I am using the apr_table structure to contain each part, I know I could use an apr_array_header, but....

So I would like to know:

1.  Could I use Boost to provide the missing functionality SAFELY?
2.  Will I run into memory clashes because I am not using the pool memory?
3.  For string, vector, and etc that free their own memory, is this a problem laying in wait?

I did search for this issue, but the other issues do not seem to be the same.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:03:14.937

使用 Boost 应该是安全的，这取决于您使用的特定*部件，但要对其安全性进行任何明确的调用。*

至于内存管理，您可以编写自己的 std::allocator 实现，它使用 Apache/APR 的内存分配。然后，您可以将此分配器作为模板参数传递给您正在使用的 STL 容器（*通常*是第二个模板参数）。

至于 Boost 的智能指针（如果你正在使用它们），它们可以（在构造时）被赋予一个函数指针作为实现内存释放的参数（作为 的替代`delete`）。

例如，像这样的分配器可以为您解决问题：

```
#include <stdexcept>

template <typename T>
class apr_allocator
{
    public:
        typedef size_t    size_type;
        typedef ptrdiff_t difference_type;
        typedef T*        pointer;
        typedef const T*  const_pointer;
        typedef T&        reference;
        typedef const T&  const_reference;
        typedef T         value_type;

        template<typename U>
        struct rebind
        { typedef apr_allocator<U> other; };

        pointer allocate(size_type n, const void* = 0)
        {
            pointer new_mem = apr_do_whatever_is_necessary_to_allocate(n * sizeof(value_type));
            if (!new_mem)
                throw std::bad_alloc();
            return new_mem;
        }

        void deallocate(pointer p, size_type n)
        {
            apr_release_memory(p, n);
        }

        pointer address(reference r) const
        {
            return &r;
        }

        const_pointer address(const_reference r) const
        {
            return &r;
        }

        size_type max_size() const
        {
            // Largest amount of elements T that can meaningfully be allocated
            return 1337;
        }

        void construct(pointer p, const_reference val)
        {
            new ((void *)p) value_type(val);
        }

        void destroy(pointer p)
        {
            p->~T();
        }
};

template <typename T>
inline bool operator==(const apr_allocator<T>& a, const new_allocator<T>& b)
{
    if (&a == &b)
        return true;
    if (/* a can deallocate elements created with b and vice-versa */)
        return true;
    return false;
}

template <typename T>
inline bool operator!=(const apr_allocator<T>& a, const apr_allocator<T>& b)
{
    return !(a == b);
} 
```

另请注意，如果您的分配器需要内部状态（例如对特定内存池的引用），您*必须*确保分配器是可复制构造的。它还*必须*是默认可构造的（尽管您可以将预先构造的实例作为参数传递给 STL 容器的构造函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:15:35.643

我们在 Windows 上的 Apache 中大量使用 C++ 和 Boost，我们没有看到任何与我们使用`new`或类似 C++isms 相关的问题。

# java - Java Servlet threading

> ID：11600737
> 
> 赞同：0
> 
> 时间：2012-07-22T13:38:43.680
> 
> 标签：java, multithreading, servlets, producer-consumer

I have completed the following Java Servlet construction: [I believe the main idea is that of consumer-producer]

1.  A Java servlet that receives multiple http POST requests

2.  It puts all requests into a Queue [ConcurrentLinkedQueue]

3.  All requests in the Queue are processed by a single and independent thread (like an engine). This thread works independently of the servlets. There is a good reason for the separate thread, since I need data from several and different http requests to do the processing. The Queue waits until it has enough requests and then starts the processing.

Now I'm in the final step: Once e.g. http request No1 has been processed by the independent thread engine, I need to notify the specific servlet thread (e.g. No1) where it came from so that I can reply, i.e. send the response back to the corresponding client.

How do I solve this threading issue? How can the single thread engine notify the correct servlet thread each time? How should I code this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:44:12.170

我不知道这些要求是从哪里来的，但是还有其他几种更简单的方法来解决这个问题：

*   使用[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html). 只需将任务提交到池并阻止返回的[`Future`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)对象。非常简单有效。一旦您的任务准备就绪，`Future.get()`将返回结果

*   使用 Servlet 3.0，您可以将整个处理放在异步线程中。这**更具**可扩展性。基本上你正在提交一个任务并立即释放 HTTP 线程。异步线程不仅处理该队列中的项目，还通过`AsyncContext`对象返回 HTTP 响应。

如果您确实需要使用队列和单独的线程，请查看 Java[锁](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)和[条件](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)。但这是更多的低级工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:44:31.683

使用[SingleThreadExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)。让您的 servlet 创建 Callable 对象并将它们提交给执行程序，然后调用`get()`返回的 Future：

```
Callable<Foo> callable = new Callable<Foo>() {
    // TODO implement call();
};
Future<Foo> future = executor.submit(callable);
Foo result = future.get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:42:39.093

是否有充分的理由让您在单独的线程中有一个队列来执行工作？如果 servlet 需要等待处理结果才能向客户端返回响应，那么为什么不在同一个线程中执行处理并同步返回结果呢？

如果您真的想异步执行操作，您可以使用[Future](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)对象来检查计算的完成状态，并获取其结果。

# file-upload - Best way to handle file uploads from Backbone.js to Rails-based API through a proxy?

> ID：11600738
> 
> 赞同：2
> 
> 时间：2012-07-22T13:38:46.027
> 
> 标签：file-upload, backbone.js, proxy, nginx, rack

We have a Backbone.js app that supports file uploads using plupload. The uploads are sent through a proxy (rack-reverse-proxy at the moment, but switching to straight nginx shortly) to a separate Rails app through an API.

This API has been in use for quite some time and can handle uploads of hundreds of MB. We don't think it is the problem.

When uploads are performed through BB.js and the proxy, however, they can stop at different points, but mostly it's at the sub-1.5MB point.

Of note is that attempts to upload multiple files less than 1MB each work fine in the same situations. I can upload 100 1MB files, but I can't upload any files more than, say, 2MB.

Some of the exceptions we get are from the BB.js app are:

*   Uncaught SyntaxError: Unexpected end of input
*   SyntaxError: JSON Parse error: Unexpected EOF

What's the best way to approach this? The main culprit seems to be a slower network connection (uploads to the server over fiber-based home network tend to complete, whereas uploads over the DSL-line at work tend to fail), but I can't imagine it's that cut and dry.

Is it our proxy setup? Will switching to nginx fix this? What's the best way to set up nginx for this purpose?

EDIT to answer Maurício's comment:

Nothing is returned from the server. Here are the headers as reported by WebKit Network Inspector (hostname changed):

```
Request URL:http://our.site.com/api/files
Request Headersview source
Content-Length:131661475
Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryHwVBiFW8AIuh18Bt
DNT:1
Origin:http://our.site.com
Referer:http://our.site.com/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2
Request Payload
------WebKitFormBoundaryHwVBiFW8AIuh18Bt
Content-Disposition: form-data; name="name"

861-railsconf2012-using-backbone-js-with-rails-patterns-from-the-wild-large.mp4.mpg
------WebKitFormBoundaryHwVBiFW8AIuh18Bt
Content-Disposition: form-data; name="file_entry[folder_id]"

32984
------WebKitFormBoundaryHwVBiFW8AIuh18Bt
Content-Disposition: form-data; name="file"; filename="861-railsconf2012-using-backbone-js-with-rails-patterns-from-the-wild-large.mp4.mpg"
Content-Type: video/mpeg

------WebKitFormBoundaryHwVBiFW8AIuh18Bt-- 
```

After that, there is no response. The inspector reports both the status and time as Pending. In this most recent case, the transfer size is 0B, though I know data was sent as I can monitor outgoing traffic hitting 900K/sec for maybe 10-15 seconds, and then dying back down to normal (1-2K/sec).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:50:03.470

这一切都归结为一个 nginx 配置。尚未设置 client_max_body_size 指令。默认值为 1M。增加这似乎已经解决了这个问题。

client_max_body_size ( [http://wiki.nginx.org/HttpCoreModule#client_max_body_size](http://wiki.nginx.org/HttpCoreModule#client_max_body_size) ) 的 nginx wiki 条目指出：

“应该注意的是，网络浏览器通常不知道如何正确显示这样的 HTTP 错误。”

我还没有检查 Chrome 和 Safari 如何处理 413 返回码，但这可以解释为什么我似乎根本没有得到服务器的响应。

# nhibernate - How to Implement Dependency Injection for Generic Nhibernate Reporsitory for use of asp.net / MVC3 applications?

> ID：11600743
> 
> 赞同：0
> 
> 时间：2012-07-22T13:39:20.667
> 
> 标签：nhibernate, dependency-injection, inversion-of-control, repository-pattern

In continuation to earlier SO question : [Remote Database response very slow of asp.net application using NHIbernate](https://stackoverflow.com/questions/11534728/remote-database-response-very-slow-of-asp-net-application-using-nhibernate/11535843)

In the solution of above problem, it is suggested to implement DI. Can anyone provide the way to implement DI eg. Ninject, Windsor or any other ?

Please take a CommonRepository mentioned in prior post.

If this question looks like a stupidity, please excuse me to ask this one.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T03:53:23.010

有几本关于 nhibernate 的好书值得一看。还有很多博客文章和开源项目可以帮助你。

我发现一些有用的资源是

*   [休眠食谱 3.0](http://www.packtpub.com/nhibernate-3-0-cookbook/book)
*   [FunnelWeb 博客引擎](http://www.funnelweblog.com)
*   [使用 Windsor 和 NHibernate 以 nuget 的速度创建 ASP.NET MVC 应用程序](http://joseoncode.com/2011/03/07/create-an-asp-net-mvc-application-with-windsor-and-nhibernate-at-the-speed-of-nuget/)
*   [S#arpe Lite](http://nhforge.org/blogs/nhibernate/archive/2011/11/11/s-arp-lite-the-basics.aspx)

# actionscript-3 - 如何使用计时器控制影片剪辑

> ID：11600745
> 
> 赞同：0
> 
> 时间：2012-07-22T13:39:39.450
> 
> 标签：actionscript-3, flash, actionscript-2

如果有人可以帮助我编写闪光灯和脚本，我会很高兴，我想制作一个显示标志的 .swf 电影，白天标志灯亮，晚上灯闪烁，我已经制作了电影剪辑闪烁的标志是另一个我只是坚持使用脚本我对 AS2.0 知之甚少。因为我想把这个标志放在一个网站上，所以我认为它必须与系统一起工作，所以动画在每个系统访问时都有效。我已经搜索了好几天，但找不到任何东西可以帮助我做我想做的事。请帮助我，我很绝望。（我很抱歉我的英语不是我的母语）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:52:08.217

嗨，我使用剪辑作为天空做了一个效果，让它成为一个 alph 但是，您可以使用闪烁的电影剪辑来根据一天中的时间逐渐出现，而不是 aloha。

希望这对你有用

AS2 代码：

```
miDate = new Date();
var hora:Number = 0; //hora is hour

if (hora>0 && hora<12) {
    sky._alpha = 100-(hora*8);

} else if (hora>=12 && hora<15) {
    sky._alpha = hora;

} else if (hora>=15 && hora<18) {
    sky._alpha = hora*2;

} else if (hora>=18 && hora<21) {
    sky._alpha = hora*3;

} else if (hora>=21 && hora<24) {
    sky._alpha = hora*4;

} 
```

# java - TableModel not loaded with Data from JPA Query on MouseClick over JTabbedPane

> ID：11600748
> 
> 赞同：0
> 
> 时间：2012-07-22T13:40:10.503
> 
> 标签：java, swing, jpa, jtable, jtabbedpane

I have a Java Class, i create a Query (JPA with EclipseLink) to Load Info from DB when a JTabbedPane is clicked, the data is loaded into the TableModel which is bound to a JTable. I use MouseClicked of MouseEvent, to get the selected tab. But some tables fail to load, i feel as if nothing is clicked, but when i go around through the tabs and come back to the tab that failed to load it eventually loads the data sometimes. My Code below:

```
private void jTabbedPane1MouseClicked(java.awt.event.MouseEvent evt) {  
  int selectTab = jTabbedPane1.getSelectedIndex();
  if (selectTab == 1) {
    bookValueTable.getColumnModel().getColumn(0).setMaxWidth(150);
    bookValueTable.getColumnModel().getColumn(1).setMaxWidth(150);
    if (!tab2Opened) { //this makes sure the data is not loaded multiple time....
        tab2Opened = true;
        Query q = em.createQuery("select e from EnterpriseInvestments e Where e.acctYear = :acctYear");
        q.setParameter("acctYear", acctYear);
        List<EnterpriseInvestments> resultList = q.getResultList();
        for(EnterpriseInvestments p: resultList){
          Object row[] = {p.getEnterprise().getRcNo(), p.getAcctYear(), p.getInvestmentItem(),
                nf.format(p.getInvestmentAmount())};
            shareCapitalModel.addRow(row);
        }
    }
    bookValueTable.setRowSorter(new TableRowSorter(shareCapitalModel));
} 
```

I dont know where the problem is coming from: The JPA, The TabbedPane or the EventHandler!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:11:09.130

除了@JB 对侦听器的指导之外，我怀疑您的 JPA 查询中的延迟会阻塞事件调度线程 (EDT)。虽然您必须在 EDT 上更新表模型，但您可以在 a 的`doInBackground()`方法中进行查询`SwingWorker`，如 API 所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:02:26.783

如果我理解正确，您希望在选择包含表格的选项卡后加载表格的内容。

首先，您不应该使用 MouseListener 来做到这一点。这是一个太低级的听众。此外，您可以使用键盘切换选项卡。要检测选项卡选择更改，您应该将 ChangeListener 添加到选项卡式窗格。

您应该做的另一件事是从侦听器中删除 JPA 代码，并将其放在单独的方法中，甚至放在单独的类中。知道如何从数据库中获取数据不是 GUI 代码的工作。在数据访问对象中执行此操作，并对该数据访问对象进行单元测试以了解它是否正常工作。你知道的，在你的 GUI 中使用它。如果有问题，它会出现在 GUI 代码中，因为您已经测试了数据访问代码是否有效。

使用调试器，最终使用日志记录语句，也有助于诊断问题出在哪里。

# web-services - RESTful web services - for large requests

> ID：11600749
> 
> 赞同：0
> 
> 时间：2012-07-22T13:40:16.520
> 
> 标签：web-services, spring, rest, soap, jax-rs

Tech Stack: Java 1.6, JPA (Hibernate 3), Spring 3, Oracle 11g

Hello,

In one of my projects, we have to create a number of web services. These web services are like 'create application' and 'udpate application'.

For creating an application, the input data (request XML) is around 90-100 lines.

In my view I should be using SOAP\XML webservice (Spring), but my company has decided to go forward with REST (JAX-RS).

I think it will be difficult for client to create such request without any formal contract.

Or do you think REST will serve the purpose?

Thanks, Adi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:13:55.530

REST 比 SOAP 灵活得多。使用 REST 服务，您可以将响应返回为 XML/JSON/HTML，而在 SOAP 中它通常只是 XML。

REST 也使用普通 HTTP，这与扩展 HTTP 的 SOAP 不同。

因此，您的公司做出了正确的选择。关于答案的格式，如果是 JSON，可以使用[Gson](http://code.google.com/p/google-gson/)之类的库来转换消息。您需要编写一份描述不同链接及其输入/输出的文档（例如，查看[此处）](https://dev.twitter.com/docs/api/1/get/statuses/home_timeline)

如果它是 XML，那么您只需要一个用于请求/响应的 XSD，然后再次使用像[XmlBeans](http://xmlbeans.apache.org/)这样的 FW来编组/解组请求/响应。在这种情况下，只需将 XSD 和上述文档提供给客户端即可。

# java - 在充满非静态变量的类中自动运行方法

> ID：11600755
> 
> 赞同：1
> 
> 时间：2012-07-22T13:41:16.677
> 
> 标签：java

我有一个程序需要编写一个类文件才能使其运行，但我无法更改原始程序（java 文件）。

我无法更改的 java 文件实例化了该类的几个版本，可以这样说：

```
CrazyClass crazy1 = new CrazyClass();
CrazyClass crazy2 = new CrazyClass();
CrazyClass crazy3 = new CrazyClass();
//more code follows 
```

然后它在那些新实例化的类中设置变量，如下所示：

```
crazy1.var1 = 6;
crazy2.var1 = 7;
crazy3.var1 = 8;
//more code follows 
```

后来程序实际上在 println 语句中调用了那些实例化的类，如下所示：

```
System.out.println(crazy1); 
```

并期望弹出一条消息..

我的问题是如何做到这一点？我是否完全认为必须实例化的类不能有返回值？我只能认为我需要在类中返回消息并自动调用的方法，类似于 main 但不是静态的。我是朝着正确的方向前进还是完全偏离了基地？请告知我已经阅读了一整天，我担心此时我无法只见树木不见森林。我确定它很简单。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T13:43:44.680

你会想要覆盖[`Object.toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29).

在上面的打印语句中，`println()`-method 在内部调用`toString()`给定对象的-method。可以覆盖此方法以返回有意义的内容。例如：

```
@Override
public String toString(){
  return "My var1-field has a value of: "+this.var1;
} 
```

# c++ - 从 const double 的指针返回指向 double 的指针

> ID：11600759
> 
> 赞同：0
> 
> 时间：2012-07-22T13:41:22.797
> 
> 标签：c++, pointers, double, constants

我试图编写一个名为 ComputeMaximum 的函数，它有两个参数，都是指向常量 double 的类型指针，并返回指向 double 的类型指针

我不断收到以下铸造错误：

1.  从 'const double*' 到 'double*' 的无效转换</li>
2.  无法将参数 '1' 的 'double' 转换为 'const double*' 到 'double* ComputeMaximum(const double*, const double*)'</li>

```
#include <iostream>
using namespace std;

double *ComputeMaximum(const double *num1, const double *num2)
{
    return ((double*)num1>num2?num1:num2);  
}

int main()
{
    double *max;

    max = ComputeMaximum(6.4, 6.9);
    cout << *max;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:43:14.540

`6.4, 6.9`是浮点文字（或）常量值，不能转换为指针。您需要的只是`double`函数的参数类型，而不是`double*`.

指针指向该位置的地址，并且本身不能保存值。所以，试试

```
double ComputeMaximum(const double num1, const double num2)
// Notice * are removed.
{
   // ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:02:01.763

如果他真的想传递指针并返回一个指针（除非这是家庭作业，否则想不出为什么）如果你想要 const double 你需要在整个剪辑中每次使用 double 这个词之前放置

```
#include <iostream>
using namespace std;

double *ComputeMaximum(double *num1,double *num2)
{
    return (* num1 > * num2 ?num1:num2);  // need to dereference the comparison
}

int main()
{
    double *max;
    double a = 6.4;
    double b = 6.9; // need to be variables with real adresses, literals won't work

    max = ComputeMaximum(&a, &b); // pass pointers to a and b
    cout << *max;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:50:14.080

你有一个无效的参数，编译器不允许这种隐式转换：

```
max = ComputeMaximum(6.4, 6.9); 
```

由于头文件是：

```
double *ComputeMaximum(const double *num1, const double *num2) 
```

您要么传递一个`const double *`作为参数，要么将您的声明更改为：

```
double *ComputeMaximum(const double num1, const double num2)
double *ComputeMaximum(const double &num1, const double &num2) 
```

但是，这对您的情况有效：

```
double a = 6.4;
double b = 6.9;
max = ComputeMaximum(&a, &b); 
```

如果您想要效率，您可以`explicit cast`选择值，或更改方法中的声明，或使用引用：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T13:50:22.153

替代 Mahesh 的好解决方案，您可以在调用 ComputeMaximum 函数之前将双精度数存储在变量中，然后使用 addressof 运算符`&`返回它们在内存中的位置。

```
double a = 6.4; 
double b = 6.9; 

max = ComputeMaximum(&a, &b); 
```

但是，您还必须更改函数以比较指向的*值而不是指针本身：*

```
double *ComputeMaximum(const double *num1, const double *num2)
{
    double a = *(num1);
    double b = *(num2);

    return (double*)(a > b ? a : b);  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T13:51:36.097

您也可以使用 const_cast 将 const 值转换为非 const 值，但这几乎总是一个坏主意。唯一合法的用途是与期望字符串作为非 const char 指针但实际上并不修改它们的遗留库交互。

# c# - 将客户端javascript值传递给服务器端C#

> ID：11600766
> 
> 赞同：2
> 
> 时间：2012-07-22T13:42:04.003
> 
> 标签：c#, asp.net, asp.net-ajax

我正在尝试将在 java 脚本中创建的变量的值传递到服务器端。

我正在使用 asp.net AJAX C#。

我可以使用以下方法将值插入到 asp:Label 中：

```
document.getelementbyid("MyLabel").innerhtml = "data"; 
```

但是一旦我尝试在服务器端获取值：

```
string NewLabel = MyLabel.Text; 
```

它显示一个空错误。

有谁知道将java脚本值传递给服务器的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:46:42.367

您应该使用另一个控件来发送每个帖子的值，例如：

*   `HiddenField`

*   任何`Input`控制

例子：

## ASPX

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script>
    $(function () {
        $("#<%: this.myHidden.ClientID %>").val("your new value");
    });
</script>

<asp:HiddenField runat="server" ID="myHidden" Value='' /> 
```

## ASPX 代码背后

```
string myHiddenValue = this.myHidden.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:51:39.537

取一个隐藏字段并像这样在隐藏字段上设置变量值

我假设这`Mylable`是隐藏字段

```
 var javascriptvariable='a';
  $('#MyLabel').val(javascriptvariable); 
```

在服务器端

```
 string NewLabel = MyLabel.Value; 
```

我为此使用了 jquery /

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T05:18:37.597

您可以通过发布数据、ajax 或将其作为查询字符串中的参数传递来将客户端值发送到服务器端。如果不做任何这些，我非常怀疑服务器是否能够看到客户端设置的值。

# c# - 通过动态路径从目录中获取文件

> ID：11600768
> 
> 赞同：0
> 
> 时间：2012-07-22T13:42:42.700
> 
> 标签：c#, .net

我想从目录中获取文件，并且我的配置文件中有目录的路径。如果我得到这样的文件名：

```
var filePaths = Directory.GetFiles(@"SomePath", "*.*",
  SearchOption.AllDirectories).ToList(); 
```

所以一切都很完美。但是，如果我尝试像这样获取文件名：

```
var path = ConfigurationManager.AppSettings.GetValues("Key");
var filePaths = Directory.GetFiles(path[0], "*.*",
  SearchOption.AllDirectories).ToList(); 
```

我得到一个空列表。我认为问题在于字符串路径之前的 @ 语法。但是我怎样才能将路径前的@ 放入字符串路径 [0] 中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:12:29.743

阅读有关[逐字字符串](http://msdn.microsoft.com/en-us/library/362314fe.aspx)的更多信息。这些用前导 @ 符号表示，后跟双引号内的字符串，其中字符串不需要特殊字符的转义序列。例如`@"c:\Docs\Source"`与`"c:\\Docs\\Source"`

`path[0]`在您的情况下，请确保`"c:\\Docs\\Source"`格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:45:03.260

您可以在现有反斜杠之前添加一个反斜杠：

```
var filePaths = Directory.GetFiles(path[0].Replace("\\", "\\\\"), "*.*", SearchOption.AllDirectories).ToList(); 
```

# android - tabhost 中的水平滚动视图不起作用或使我的内容消失

> ID：11600771
> 
> 赞同：1
> 
> 时间：2012-07-22T13:42:52.777
> 
> 标签：android, android-tabhost, horizontalscrollview

好吧，这是我的 main.xml，其中包含 tabhost：

问题是水平滚动视图不起作用。如果我将相对布局更改为线性布局选项卡是可滚动的，但我看不到我的活动的主要内容 - 我只看到选项卡。

我还尝试完全删除包含 tabwidget 的线性布局，但没有任何改变。

如果您需要任何其他 xml，请告诉我。

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/tabhost" 
    android:paddingTop="@dimen/tab_space_top"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <RelativeLayout android:id="@+id/tab_relative_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        >
        <HorizontalScrollView android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:fillViewport="true"
                android:scrollbars="none">
                <LinearLayout android:id="@+id/tab_linear_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <TabWidget android:id="@android:id/tabs"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content">
            </TabWidget>
            </LinearLayout>
            </HorizontalScrollView>
        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
            android:layout_below="@android:id/tabs">

        </FrameLayout>

    </RelativeLayout>
</TabHost> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:51:49.647

[此示例](http://blog.uncommons.org/2011/04/18/scrolling-tabs-in-android/)中列出的方法可以解决您的问题。

# c++ - 使用 UAC 对话框从 Windows 资源管理器扩展写入文件

> ID：11600772
> 
> 赞同：1
> 
> 时间：2012-07-22T13:42:52.823
> 
> 标签：c++, windows, uac, windows-explorer

我需要将虚拟文件从我的 Windows 资源管理器命名空间扩展复制到受限位置（例如复制到 C:）。通常，对于此类任务，需要运行一个提升的新进程来执行该操作。

但是在这种情况下，我在 explorer.exe 进程上下文中运行，我需要获得与`"You'll need to provide administrator permission to copy..."`Windows Explorer 相同的对话框，而不是新进程的 UAC 对话框。

任何人都知道 Windows Explorer 使用什么功能来实现这一点？ShFileOperation 可以满足我的需要，但似乎仅适用于文件系统对象。Windows 资源管理器如何从通过名称空间扩展表示的 zip 存档复制文件？谢谢

![在此处输入图像描述](../Images/5dea79a9fab840b9b47e36de2ab80830.png)

# nhibernate - 尝试为与投影的多对多关系创建 QueryOver

> ID：11600780
> 
> 赞同：1
> 
> 时间：2012-07-22T13:44:13.223
> 
> 标签：nhibernate, many-to-many, queryover, nhibernate-projections

我有两个表（订单、事务）和一个仅保留 OrderId 和 TransactionsId 列的 TransactionsOrders 查找表。

如果一个交易失败 (n) 次，则一个订单可以有多个交易。并且 Order 对象对交易一无所知。

*我相信我将需要使用预测，因为如果该订单存在成功*的交易记录，我将需要返回所有订单属性以及 Transactions 表中的两个属性（Amount 和 TransactionDate） 。下面是生成正确输出的 SQL。

```
 SELECT o.*, ct.TransactionDate, ct.Amount from Orders o
   LEFT OUTER JOIN 
     (SELECT * FROM CreditTransactionsOrders cto
          INNER JOIN CreditTransactions ct 
      ON ct.Id = cto.CreditTransactionId
      WHERE ct.Successful = 1) as ct 
   ON o.Id = ct.OrderId 
```

我试图尝试创建此 QueryOver 并从 Order 对象和 Transaction 对象中投影我需要的属性，但无法正确转换此 SQL 查询。

最终结果是我需要返回所有订单，如果该订单存在成功的订单，我需要从 Transaction 对象返回金额和日期。我不确定我是否必须使用别名，但到目前为止我所有的尝试都没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:04:21.230

首先，您必须将您的 SQL 重写为对 NHibernate 更友好的状态：

```
SELECT o.*, ct.TransactionDate, ct.Amount from Orders o
  LEFT OUTER JOIN CreditTransactionsOrders cto 
    ON o.Id = cto.OrderId
  LEFT OUTER JOIN CreditTransactions ct 
    ON ct.Id = cto.CreditTransactionId AND ct.Successful = 1 
```

此 SQL 将产生与原始查询相同的结果。

在 NHibernate 中，连接的附加条件可以翻译为`with`语句。

所以你可以使用重载接受`withClause`参数。因此，假设您将 Orders 和 CreditTransactions 映射为多对多。您应该关注 QueryOver。

```
Order o = null;
CreditTransaction ct = null;

var orders = session.QueryOver(() => o)
    .Left.JoinAlias(x => x.Transactions, () => ct, () => ct.Successful == 1)
    .List<Order>(); 
```

**更新**

由于您没有来自`Order`to的引用`Transaction`，您应该恢复连接，因此您可以使用正确的连接来实现这一点。

```
Order o = null;
CreditTransaction ct = null;

var orders = session.QueryOver(() => ct)
    .Right.JoinAlias(x => x.Orders, () => o, () => ct.Successful == 1)
    .Select(
        x => x.TransactionDate,
        x => x.Amount,
        x => o.Id // other Order fields
    ).TransformUsing(Transformers.AliasToBean<TransactionsDto>())
    .List<TransactionsDto>(); 
```

`TransactionsDto`类应包含所有选定的字段。

# xcode - 在标头搜索路径中检查“递归”是什么意思

> ID：11600782
> 
> 赞同：26
> 
> 时间：2012-07-22T13:44:15.863
> 
> 标签：xcode, xcode4, xcode4.2

我一直在参考很多项目，我通过在标题搜索路径中添加它们的路径来做到这一点。

我一直在通过“参考项目”入门*（例如包括 ZXingWidget）来关注参考资料*。

而且我现在已经做了很多，但是我不明白递归的检查。

1.  这是什么意思？
2.  何时检查“递归”路径？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-22T14:32:10.410

如果你给 Xcode 一个路径用于 headers，它会在你使用`#include`or`#import`语句时检查那个路径。如果文件不存在，则退出。

如果您将路径设置为“递归”，Xcode 将搜索它找到的文件夹，如果它没有找到该文件。

看起来像这样：

[![在此处输入图像描述](../Images/c9236dcb251cfb41a31d003874401723.png)](https://i.stack.imgur.com/jaVbX.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-06T17:55:34.680

1) 为标题搜索路径输入所需的路径，单击输入。

2) 双击您输入的路径文本。

3) 在对话框右侧选择递归。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-31T16:38:13.263

对于那些想知道选择**Header Search Path**对编译器命令行有什么影响的人来说，它是`recursive`为*树中以给定路径为根的每个目录*生成一个参数。这可能导致非常长的编译器命令行，这将使在那里寻找其他任何东西几乎是不可能的。因此，如果您想使用.**`-I`*`recursive`***

 ***我尝试将单个文件指定`-I../path/to/subproject/**`为**编译器标志**，但这不起作用（这显然是 Xcode 自己进行扩展的原因）。

（这适用于 Xcode 9.4.1）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-15T22:16:59.450

当您设置`path`（例如`Header Search Paths`，， ...）时`Library Search Paths`，`Framework Search Paths`您可以定义父文件夹之一的路径并设置`recursive`（`/**`将添加到路径的末尾）。例如，您可以`path`使用参数`include`而`Build`不是.`recursive``include/<target_name>`

请注意：如果`patch`包含空格 - ，您应该使用双引号将`它们转义或将路径括起来`\``""``***

# mysql - 建模“一对一或二”关系

> ID：11600791
> 
> 赞同：1
> 
> 时间：2012-07-22T13:45:19.587
> 
> 标签：mysql, database, database-design, relational-database

我有一个不常见的数据库设计问题，我不确定如何正确处理。有一个表叫做`profile`存储网站用户的公开资料信息。但是，每个配置文件都可以属于一个人或一对夫妇，因此我需要一个额外的子表来调用`person`来存储特定于个人的数据。每个`profile`实体必须至少有一个但不超过两个`person`子实体。

模拟这种关系的最佳方式（就“犹太洁食”和/或性能而言）是什么？我应该使用常规的一对多并以编程方式或使用存储过程强制执行孩子的数量吗？或者我应该只在父表中创建两个外键字段并允许`null`其中一个？也许还有另一种我想不到的方法？

**编辑：**回应戈登问题的附加信息

*   一个人只能与一个配置文件相关联，并且不能有一个没有配置文件的人。也许这个名字`person`让人困惑，因为它可能暗示一个人有个人资料，而实际上是个人资料有个人信息。
*   在夫妻档案的情况下，两个人都是平等的。由于网站的特殊性，2 的限制永远不会改变，但是应该可以添加或删除一个人（使一个人的个人资料成为一对夫妇的个人资料，反之亦然），但永远不能少于 1 或多于2人。
*   如果没有个人资料数据，就永远不会提取个人数据，但有时可以在没有个人数据的情况下提取个人资料数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:53:38.087

# 1)

具有两个字段的解决方案：

*   PRO：允许您精确限制每个配置文件的最小和最大人数。
*   CON：允许没有个人资料的人。
*   缺点：需要 2 个索引（每个字段 1 个）才能有效获取给定人员的个人资料，占用额外空间并可能减慢 INSERT/UPDATE/DELETE。

# 2)

但是，如果您愿意在应用程序级别强制执行最小数量，您可能会更好地使用以下内容：

![在此处输入图像描述](../Images/ce437a074acff17e37268efb4fc8b3ce.png)

```
CHECK(PERSON_NO = 1 OR PERSON_NO = 2) 
```

特征：

*   CON：允许无人员配置文件。
*   PRO：限制每个配置文件的最大人数，但只需修改 CHECK 即可轻松更改。
*   PRO：如果你保持上面的标识关系，它不需要额外的索引并且是[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)友好的（相同配置文件的人可以物理上靠近存储，最小化 JOIN 期间的 I/O）。

另一方面，如果您有一个键 PERSON_ID（或类似键），那么 {PROFILE_ID, PERSON_NO} 上的附加索引对于有效地对这些字段执行键约束也是必要的。

# 3)

从理论上讲，您甚至可以将这两种方法结合起来，避免**使用**无个人资料和无个人资料：

![在此处输入图像描述](../Images/85b196ab22cf9c4ce504e9e2aab11003.png)

（PERSON1_ID 不能为 NULL，PERSON2_ID 可以为 NULL）

但是，这会导致循环引用，需要解决延迟约束，遗憾的是 MySQL 不支持。

# 4)

最后，您可以采用蛮力方法，简单地将两个人的字段放在配置文件表中（并使这些集合中的一个不能为 NULL，而另一个不能为 NULL）。

* * *

在所有这些可能性中，我可能会选择 2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:49:02.733

正如您在问题中提到的那样，您基本上有两个选择。您可以在表中存储两个字段。或者，您可以拥有第二个包含映射信息的表。

这里有一些额外的问题可以帮助您回答问题：

*   一个人可以拥有自己的个人资料和作为夫妻一部分的个人资料吗？
*   个人资料上的两个人是“平等”还是一个是“主人”而另一个是“替补”？
*   当您获取个人资料信息时，您会始终在个人资料中包含有关所有人的信息吗？
*   你可以有没有个人资料的人吗？

在这种情况下，我只是偷偷地怀疑“2”的限制将来可能会改变。这建议将映射存储在单独的表中，因为通过添加字段来增加“2”在修改现有代码方面是一个问题。换句话说，创建一个单独的表 person-profile，将人员映射到配置文件。在 mysql 中，您始终可以使用 GROUP_CONCAT() 收集人员级别的信息。

最好将此类相似字段放在同一张表中的一种情况是，其中一个显然是首选，而另一个是备用。在这种情况下，您正在执行很多“coalesce(, )”类型的逻辑。

# django - Celery 存储不可恢复的任务失败以供以后重新提交

> ID：11600792
> 
> 赞同：4
> 
> 时间：2012-07-22T13:45:31.103
> 
> 标签：django, celery, django-celery

我正在使用 djkombu 传输进行本地开发，但我可能会在生产中使用 amqp（兔子）。

我希望能够迭代特定类型的失败并重新提交。这将是在服务器上发生故障或由某些新的数据变化触发的某些边缘情况错误的情况下。

因此，在修复某些错误或第三方网站备份后，我最多可能会在 12 小时后重新提交作业。

我的问题是：有没有办法通过结果后端访问旧的失败作业并使用相同的参数等重新提交它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T14:23:16.017

您可能可以使用以下方式访问旧作业：

```
CELERY_RESULT_BACKEND = "database" 
```

并在您的代码中：

```
from djcelery.models import TaskMeta
task = TaskMeta.objects.filter(task_id='af3185c9-4174-4bca-0101-860ce6621234')[0] 
```

但我不确定你能找到启动任务的论据......也许是TaskState的东西......

我从来没有这样用过。但是您可能要考虑[task.retry](http://celery.github.com/celery/reference/celery.app.task.html?highlight=retry#celery.app.task.Task.retry)功能？来自 celery 文档的示例：

```
@task()
def task(*args):
    try:
        some_work()
    except SomeException, exc:
        # Retry in 24 hours.
        raise task.retry(*args, countdown=60 * 60 * 24, exc=exc) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T19:17:15.253

来自 IRC

> <asksol> dpn`：任务 args 和 kwargs 不与结果一起存储
> 
> <asksol> dpn`：但您可以创建自己的模型并将其存储在那里（例如使用 task_sent 信号）
> 
> <asksol> 发送任务时我们不存储任何东西，只发送一条消息。但是自己做很容易

这是我所期待的，但希望避免。

至少我现在有答案了：）

# c# - 如何在运行时wpf，windows中以特定样式绑定多边形点？

> ID：11600794
> 
> 赞同：0
> 
> 时间：2012-07-22T13:45:40.290
> 
> 标签：c#, wpf, xaml

我有这个风格代码

```
<Window.Resources>
    <Style  x:Key="Mystyle" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid >
                        <Polygon Name="poly"  Points="0,0 0,100 50,200"
                         Fill=" TemplateBinding Background}"                            
                        <ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</Window.Resources>
<Grid>
    <Button Name="b1" Style="{StaticResource Mystyle }"></Button>

</Grid> 
```

我需要根据一些计算在样式标签中为多边形设置点，而不是静态的，而是动态的，如何将点绑定到多边形。例如我有这个

```
PointCollection pc=this.CalculatePolygonPoints(new Point(0,0), 100,Orientation.Flat); 
```

如何将此电脑绑定到我的多边形动态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:22:37.993

为什么不创建新的依赖属性（PointCollection 类型？）并绑定 Polygon 的 Points 属性呢？然后在需要时进行计算（@code-behind），UI 会自动理解。

这是一个示例（使用 ObservableCollection）；[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/1293d4cb-87b3-4cdc-97e3-ae2f41caf2d4/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/1293d4cb-87b3-4cdc-97e3-ae2f41caf2d4/)

# javascript - 清除用户名字段后如何重置密码字段？

> ID：11600795
> 
> 赞同：-1
> 
> 时间：2012-07-22T13:45:43.913
> 
> 标签：javascript

我有登录页面。当我清除用户名时，密码仍在密码文本字段中，未清除。

> ```
> User Name: ________
> 
> Password:  ******** 
> ```

你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:07:59.900

您必须监听该`username`字段的更改（绑定`change`或`keyup`或`input`事件处理程序）。当字段的值为空字符串时，将密码字段的值设置为空字符串。

例子：

```
document.getElementById('usernameField').onchange = function() {
     if(this.value === '') {
         document.getElementById('passwordField').value = '';
     }
}; 
```

[**演示**](http://jsfiddle.net/b36Cu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:58:55.370

HTML：

```
<input type="password" id="pw" value="" /> 
```

JS：

```
document.getElementById('pw').value = ''; 
```

# compilation - 在 Windows 上通过 cygwin 从源代码编译单声道时遇到问题

> ID：11600800
> 
> 赞同：1
> 
> 时间：2012-07-22T13:47:02.570
> 
> 标签：compilation, mono, cygwin

我的工作是我**：**开车

我已经下载了以下单声道源文件**mono-2.11.2.tar.bz2** 我已经将 windows 版本的 mono v2.11.2 安装到**“I:\Mono-2.11.2”**

我按照以下网页[http://shana.worldofcoding.com/en/mono_cygwin_tutorial.html上的以下说明安装了 cygwin](http://shana.worldofcoding.com/en/mono_cygwin_tutorial.html)

我按照说明用单声道网站上的“make.exe”替换了**“make.exe” 。****我必须再获得一个位于 cygwin 包libintl2/libintl2-0.12.1-3**中的文件“cygintl-2.dll”

 **我添加了以下我的 .bashrc 文件。我不得不将**“c/Mono-2.11.2/bin”**更改为**“i/Mono-2.11.2/bin”**

```
PATH=.:/usr/local/bin:/usr/bin:/bin:/usr/X11R6/bin:/cygdrive/i/Mono-2.11.2/bin
PKG_CONFIG_PATH=.:/lib/pkgconfig:/cygdrive/i/Mono-2.11.2/lib/pkgconfig
LD_LIBRARY_PATH=.:/usr/local/lib:/usr/lib:/lib:/cygdrive/i/Mono-2.11.2/lib
export PATH PKG_CONFIG_PATH LD_LIBRARY_PATH 
```

我将单声道源放在指定的文件夹下：**/usr/src/mono/**

所以我的目录看起来像：

```
i:
i:\cygwin\
i:\cygwin\usr\src\mono
i:\cygwin\usr\src\mono\mono
i:\cygwin\usr\src\mono\mcs  etc   etc
i:\Mono-2.11.2\bin etc 
```

现在说明说我必须将目录更改为 /usr/src/mono/mono 并从 cygwin 终端运行**“./autogen.sh --prefix=/usr/local”**

然而，这不起作用。**从/usr/src/mono/**运行上述命令 可以正常工作。

现在问题来了。下一条指令是运行**"make"**。然而，这出现了：

```
$ make
make: *** No targets specified and no makefile found.  Stop. 
```

我什至尝试从 /usr/src/mono/mono 目录运行它。仍然没有运气。有人可以建议我应该怎么做才能在 Windows 7 上构建单声道源吗？

```
Update:  
I needed to install the **gnu c++ compiler (g++)**. I just ran the cygwin setup again, searched for g++ and installed that. The autogen.sh ran to completion 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:38:19.477

最后几行`./autogen.sh --prefix=/usr/local`输出应如下所示`Now type make to compile`。它`Makefile`在同一目录中生成。

我认为在你的情况下`./autogen.sh`失败了。您可以保留一个日志文件并检查它在抱怨什么。

```
./autogen.sh --prefix=/usr/local 2>&1 | tee autogen.log 
```

更多信息：[http ://en.wikipedia.org/wiki/GNU_build_system](http://en.wikipedia.org/wiki/GNU_build_system)

输出结束`./autogen.sh`：

```
config.status: executing quiet-libtool commands
config.status: executing default commands

        mcs source:    mcs
        olive source:  

   Engine:
    GC:        sgen and bundled Boehm GC with typed GC and parallel mark
    TLS:           __thread
    SIGALTSTACK:   yes
    Engine:        Building and using the JIT
    oprofile:      no
    BigArrays:     no
    DTrace:        no
    LLVM Back End: no (dynamically loaded: no)

    Libraries:
    Moon Profile:  no (boehm)
    MonoDroid:     no
    MonoTouch:     no
    Mobile:        no
    JNI support:   IKVM Native
    libgdiplus:    assumed to be installed
    zlib:          system zlib

Now type `make' to compile 
```**

# javascript - 外部js文件不起作用

> ID：11600802
> 
> 赞同：0
> 
> 时间：2012-07-22T13:47:07.563
> 
> 标签：javascript, jquery

我正在尝试将我的所有 jquery 移动到外部文件，但是它不起作用。我在其他所有内容之后调用外部文件，但 jquery 函数不起作用。我认为这可能是因为我有不止一个功能`$(function() {`但不精通 jquery 我不知道如何解决这个问题。下面是我试图移动的示例。

```
<script type="text/javascript">
$(function() {
    jQuery("#textsizer a").textresizer({
        target: "#size"
    });
});
</script>
<script type="text/javascript">
$(function() {
    $("#crime").validate();
    $.validator.messages.required = '<span style="color:#FE2E2E">&nbsp;Required</span>';
});
</script> 
```

我在想我只需要一个，`$(function() {`但我不知道用什么正确替换它，或者这是否是外部文件不起作用的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:50:04.140

`<script>`如果标签位于外部 .js 文件中，则需要删除标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:51:07.967

将其粘贴在 jquery 之后包含在 html 文档中的外部文件中，它是插件：

```
$(function() {
    $("#textsizer a").textresizer({
        target: "#size"
    });

    $("#crime").validate();
    $.validator.messages.required = '<span style="color:#FE2E2E">&nbsp;Required</span>';
}); 
```

# ruby - 如何在测试单元中获取当前测试用例名称？

> ID：11600804
> 
> 赞同：3
> 
> 时间：2012-07-22T13:47:59.400
> 
> 标签：ruby, watir, testunit

例子：

```
def setup
end

def teardown
end 
```

如何在设置方法中获取当前案例名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T19:01:06.947

在 Ruby 1.9.3 中，您可以执行以下操作：

```
def setup
  puts self.__name__
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-19T21:45:48.047

在 ruby​​ 2.1.5 附带的单元测试中，它似乎是：

```
def setup

   p method_name

end 
```

# asp.net-mvc-3 - 向所有页面添加反馈功能

> ID：11600805
> 
> 赞同：0
> 
> 时间：2012-07-22T13:48:13.117
> 
> 标签：asp.net-mvc-3, model

我有 asp.net mvc 3 网站，我想为所有页面添加反馈功能。

为此，我创建了局部视图并将其呈现在主布局中。

```
 @model FeedbackHelper
    Name:<br />
    @Html.TextBoxFor(o=>Model.Name) 
```

例如在问题页面中，MVC 返回异常，因为该页面绑定了**POST**实体，就我在[StackOverflow](https://stackoverflow.com/questions/5550627/two-models-in-one-view-in-asp-mvc-3)中检查而言，我有 2 个解决方案

*   创建父模型并添加**POST**和**FeedbackHelper**作为属性
*   使用**元组**

目前，更改所有模型对我来说风险太大。

有什么好的解决办法吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:04:21.567

您可以使用[子操作](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)。这个想法是定义一个特定的控制器操作，它将为部分视图提供服务，然后使用`@Html.Action`帮助器将其包含在您的布局中。

所以：

```
public ActionResult Feedback()
{
    FeedbackHelper model = ...
    return PartialView(model);
} 
```

那么你当然会在共享文件夹中有一个部分：

```
@model FeedbackHelper
Name:<br />
@Html.TextBoxFor(o => o.Name) 
```

并将其包含在您的布局中：

```
@Html.Action("Feedback", "ControllerContainingTheFeedbackAction") 
```

# android - 在代码中从 PDF 中提取文本

> ID：11600808
> 
> 赞同：2
> 
> 时间：2012-07-22T13:49:16.607
> 
> 标签：android, eclipse, pdf, extract, download

我正在为我的学校制作一个应用程序，人们可以检查他们是否有时间表更改。此处列出了所有时间表更改：[http](http://www.augustinianum.eu/roosterwijzigingen/14062012.pdf) ://www.augustinianum.eu/roosterwijzigingen/14062012.pdf 。我想在该页面中搜索关键字（在 EditText 中输入的用户组）。我已经找到了如何让应用程序检查 edittext 是否与某个字符串匹配，所以现在我只需将该页面上的所有文本下载到一个字符串中。但问题是它不是一个简单的网页，而是一个PDFpage。我听说您需要一个特殊的 pdf 库或其他东西来从 PDF 中提取文本，然后将该文本放入一个字符串中，然后使用`contains()`. 但是我对此有一些疑问：

*   这个 PDF 是用 PDF 创建器制作的，它不是扫描页面左右。例如，您实际上可以选择文本或使用 CTRL+F 搜索关键字。所以我想知道是否真的需要提取 PDF 和东西，或者是否有更简单的方法。

*   我希望应用程序每隔一小时检查一次更改。所以它还必须每小时（大约 8 页）下载 PDF 并提取文本，这会消耗很多汁​​液吗？

*   我听说有很多图书馆可以做我想做的事。那么我应该使用哪个？（如果可能的话，我想要一个免费的:)）

*   谁能向我解释如何在我的代码中使用它？（我不是很有经验，所以请保持简单一点:)）

非常感谢你们！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T23:43:27.040

不幸的是，我没有使用 java，您必须自己在 java 代码中实现它。现在我会告诉你，我最终是如何做到的：

**1）**我通过您的链接获取了文件。PHP 是通过[@fopen("http://...") 来做](http://www.php.net/manual/en/wrappers.php)的。

**2）**我将它作为**二进制文件**打开（这很重要）并提取了两部分：

**2.1）** Data 3 0 obj部分，代表创建和修改日期。我是通过[正则表达式](http://www.php.net/manual/en/ref.pcre.php)做到的。这很简单，我在上面提到过。

**2.1)**来自 5 0 obj 的数据流，表示放气后的数据。重要的！Microsoft Excel 插入两个字节`0D 0A`作为换行符。当您通过正则表达式过滤内容时，不要忘记它。开头和结尾的这些字节不必包含在提取的字符串中。

**3）**我通过函数[$uncompressed = @gzuncompress($compressed)](http://php.net/manual/en/function.gzuncompress.php)对编码的东西进行膨胀并将其放入外部文件中。[你可以在那里](https://docs.google.com/open?id=0B1YEM-11PerqVEFRSXM0M1ZVZG8)看到结果

**4）**最有趣的部分。文本格式的文件内的原始数据。它看起来像`[(V)-4(RI)16(J)] TJ`，意味着`VRIJ`。您可以在[PDF Reference v1.7](http://www.google.com/search?client=safari&rls=en&q=PDF+Reference+v1.7&ie=UTF-8&oe=UTF-8#hl=ru&safe=off&client=safari&rls=en&sclient=psy-ab&q=PDF+Reference+v1.7+file%3Apdf&oq=PDF+Reference+v1.7+file%3apdf&gs_l=serp.3...7017.13704.0.14310.11.10.1.0.0.0.132.1000.6j4.10.0...0.0...1c.7e0s-Abrluo&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=c5c0acba9dbab366&biw=774&bih=694)第 5 部分中阅读有关 PDF 文本的信息。

**5）**我相信，正则表达式可以帮助您提取或/和转换数据。

重要提示：我说的是“来自 5 0 obj 的数据流”，但对象的数量“是变化的主题”。您必须从字典->页面->页面->内容链控制对对象的引用。您可以在我上面提到的手册中找到“面包屑”的描述。

不幸的是，Excel 没有在 PDF 中嵌入任何表格结构，但您可以找到文本部分的坐标并对其进行解释。无论如何，这是一团糟。

亲爱的梅林，你觉得这很难吗？不，亲爱的，它不是。这并不难，因为没有 unicode 符号。PDF 中的 unicode 真的很糟糕！

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:30:20.010

此 PDF 由 Microsoft Excel 制作，并带有日期戳：

```
3 0 obj
<</Author(Janszen, Jan) 
/CreationDate(D:20120613153635+02'00') 
/ModDate(D:20120613153635+02'00') 
/Producer(˛ˇMicrosoftÆ ExcelÆ 2010) 
/Creator(˛ˇMicrosoftÆ ExcelÆ 2010)>>
endobj 
```

您可以使用几乎任何编程语言通过 URL 获取文件并提取“ModDate”内容。新的 ModDate 意味着信息更新。要提取此信息，您不需要任何库 - 这是文件中的文本，第 9、10 和 11 行。

请 Jan Janszen 将您添加到分发列表中。文件中的数据被编码。您必须使用大量编程技术来获取源和恢复信息。

# actionscript-3 - AS3：如何删除特定索引处的列表项

> ID：11600813
> 
> 赞同：0
> 
> 时间：2012-07-22T13:49:39.307
> 
> 标签：actionscript-3

请帮助您了解如何在 Flash 中的 List 组件的特定索引处删除列表项，因为我在 adobe docs 上找不到任何帮助。只提到了 addItem，所有其他适用于列表组件的方法，就像任何其他语言一样。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:48:06.370

您可以使用 Arraycollection 将您的数据与 Flash 中的 List 绑定。数组集合中发生的更改也将反映在列表视图中。您可以使用数据提供者的 addItem 和 removeItemAt(index)，这将反映在您的 List VIew

```
[Bindable]var MyArr : ArrayCollection = new ArrayCollection() ; 
Assign values to this arraycollection.....
<s:List x="170" y="146" dataProvider="{myArr}"></s:List>
use..
myArr.addItem("Hello");   // to add something
myArr.removeItemAt(0);    // to remove something from a Array 
```

# vim - 向前搜索在可视模式中选择的文本的第 [count] 次出现

> ID：11600818
> 
> 赞同：2
> 
> 时间：2012-07-22T13:50:20.243
> 
> 标签：vim

我想像使用`*`命令一样搜索我在可视模式下选择的模式。

我知道`0`默认情况下会填充寄存器的视觉模式拉动，以及仅搜索`/`然后`Ctrl`- `R`（检索）寄存器`0`（`Ctrl`- `R`，`0`）的内容以将模式粘贴为搜索的可能性。

问题是，我不想先 YANK，我已经有东西被拉了，我现在只想搜索在可视模式下选择的内容。

请问我该怎么做？我可以在不摆弄不同的“猛拉注册N”技巧的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:18:12.183

如果您使用带有 X 支持的 gvim 或控制台 vim（检查是否`'guioption'`可用）并且`a`存在于您`'guioptions'`的`*`. 否则，如果不编写 VimL 函数，恐怕没有简单的方法可以做到这一点，它将根据`<`和`>`标记的值提取选择。然后可以`CTRL-R =`在搜索提示中使用该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:45:49.490

为什么不将您列出的所有步骤组合成一个映射？唯一缺少的是保存和恢复未命名的寄存器，以及一些转义。

```
" Atom \V sets following pattern to "very nomagic", i.e. only the backslash has special meaning.
" As a search pattern we insert an expression (= register) that
" calls the 'escape()' function on the unnamed register content '@@',
" and escapes the backslash and the character that still has a special
" meaning in the search command (/|?, respectively).
" This works well even with <Tab> (no need to change ^I into \t),
" but not with a linebreak, which must be changed from ^M to \n.
" This is done with the substitute() function.
" gV avoids automatic reselection of the Visual area in select mode.

vnoremap <silent> * :<C-U>let save_unnamedregister=@@<CR>gvy/\V<C-R><C-R>=substitute(escape(@@,'/\'),"\n",'\\n','ge')<CR><CR>:let @@=save_unnamedregister<Bar>unlet save_unnamedregister<CR>gV 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T19:56:10.670

这是适用于我在可视模式下`*`使用的解决方案：`[count]`

```
vnoremap * :call <SID>VisualSearch()<cr>:set hls<cr>
fun! s:VisualSearch() range
   let unnamed = @"
   let repeat = v:count
   exe 'norm gv"zy' | let @/ = @z
   for x in range(repeat)
      call search(@/, 'ws')
   endfor
   let @" = unnamed
endfun 
```

您将第五行的“z”更改为您从不使用的任何寄存器。

# python - 为什么更新附加到列表的字典会更改列表？

> ID：11600824
> 
> 赞同：4
> 
> 时间：2012-07-22T13:51:08.813
> 
> 标签：python, arrays, dictionary

我认为我的代码会更清楚-

```
someList = list()
foo = {'a':'b'}
someList.append(foo)
print someList
>>> [{'a':'b'}]
defaultbazz = {'a':2, 'b':'t', 'c':'gg'}

for k, v in defaultbazz.iteritems():
    foo[k] = v

print someList
>>> [{'a': 2, 'c': 'gg', 'b': 't'}] 
```

最后的打印不应该是`[{'a':'b'}]`吗？我没有更新`someList`，我想要它。

在我看来，这是无法解释的行为..

但是，如果这就是 python 的工作方式，我该如何找到解决方法？即使设置一个新的字典也会更新原来的字典。我的意思是：

```
someList = list()
foo = {'a':'b'}
someList.append(foo)
print someList
>>> [{'a':'b'}]
bar = foo
defaultbazz = {'a':2, 'b':'t', 'c':'gg'}

for k, v in defaultbazz.iteritems():
    bar[k] = v

print someList
>>> [{'a': 2, 'c': 'gg', 'b': 't'}] 
```

如果有人可以解释我为什么会发生这种情况，我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T14:00:16.150

当您将 dict 添加到列表或将其分配给新变量时，您似乎希望将其复制，但这不是 Python 的操作方式。如果您分配一个 dict - 实际上，如果您分配任何对象 - 您并没有创建一个新对象，而是您只是给您的对象一个新名称。（一个对象可以有多个名称。）

因此，当您以新名称编辑对象时，该对象的单个实例会更改，并且当您通过任何名称访问该对象时，该更改都是可见的。

如果你想复制你的对象，那么你可以这样做：

```
bar = dict(foo) 
```

或者

```
bar = foo.copy() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T13:59:29.990

简化：

```
a = {2: 3}
b = [a] 
```

`b`包含对`a`（并且`dict`是可变的）的“引用” - 所以如果`a`被修改然后`a`通过列表访问`b`，将显示修改后的`a`.

您必须显式创建 的副本`a`，在这种情况下可以这样做：

```
b = [dict(a)] 
```

但是您应该查看`copy`模块`copy.copy()``copy.deepcopy()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T13:58:56.260

字典是[可变](http://docs.python.org/reference/datamodel.html)对象，因此是脚本的结果。我猜你想要一个新对象，即原始对象的[副本](http://docs.python.org/library/copy.html)：

```
import copy

someList.append(copy.copy(foo)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T14:06:23.447

Python 中的变量只是对象的名称。如果您将对象从“附加”到它的任何名称更改，您将看到所有其他名称的更改。Python 永远不会自动为您创建副本，特别是：

```
someList.append(foo) 
```

不会创建 的副本`foo`并将其放在 上`someList`，它会将*名称*所指的*对象*附加到列表中。 *`foo`*

 *您可以为此对象创建第二个名称

```
bar = foo 
```

但这也不会创建副本。尤其

```
foo['x'] = 42 
```

和

```
bar['x'] = 42 
```

然后将对完全相同的对象进行操作。您可以通过打印对象的内存地址来验证这一点：

```
print id(foo), id(bar) 
```

并看到它们是相同的。

如果您需要 Python 中的副本，则需要显式创建一个。根据您的需要，`copy`模块 -`copy.copy()`或者`copy.deepcopy()`- 将执行您想要的操作：

```
import copy
bar = copy.copy(foo)
print id(foo), id(bar) 
```

现在应该打印不同的内存位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-22T13:58:12.903

字典是可变的，这意味着它们可以改变。这是因为`foo`在里面，`someList`而你在`foo`里面改变`for-loop`。看看这个简单的例子：

```
a_dict = {'a':'b'}
a_list = [a_dict]
print a_list # [{'a':'b'}]

#change the dict
a_dict['a'] = 'c'
print a_list # [{'a':'c'}] 
```*

# asp.net-mvc-3 - 带有区域的 ASP.NET MVC 中的 ServiceRoute 将 ActionLink 拦截到 Home

> ID：11600825
> 
> 赞同：1
> 
> 时间：2012-07-22T13:51:10.943
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, asp.net-mvc-3-areas

我有一个带有区域的 MVC 3 应用程序，并且我正在从特定区域和控制器公开服务。到此服务的路由在 AreaRegistration 中定义，如下所示

```
public class AreaAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get { return "Area"; }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.Routes.Add(
            new ServiceRoute("Area/Controller/Service",
                new NinjectServiceHostFactory(), typeof(MyService)));

        // ....
    }
} 
```

在我的`Global.asax.cs`我只定义了一个默认路由

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

在我`_Layout.chshtml`的主页中有一个链接，我在其中给出了一个空白区域，我希望它可以在顶部文件夹中（在区域文件夹之外）中找到操作`Index`：`HomeController``Controllers`

```
@Html.ActionLink("Home", "Index", "Home", new { area = "" }, null) 
```

由于某种原因，这`ActionLink`呈现为

```
~/Area/Controller/Service?action=Index&controller=Home 
```

如果我注释掉 ServiceRoute，同样的`ActionLink`点`~/`就是我所期望的。

任何想法如何解决此路由问题？我发现的唯一解决方法是改用它：

```
<a href="@Url.Content("~/")">Home</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T10:14:55.667

我们遇到了同样的问题。路线注册的顺序似乎是个问题，因为来自区域的路线将在来自 global.asax 代码的路线之前注册。

要解决此问题，允许 URL 路由到服务以及防止回发以服务 URL 为目标，请尝试在注册其他路由后将 ServiceRoute 添加到 Global.asax.cs 中。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );

    context.Routes.Add(
        new ServiceRoute("Area/Controller/Service",
            new NinjectServiceHostFactory(), typeof(MyService)));

} 
```

这对我们有用，但当然会产生将与该区域相关的代码放入主项目的开销。

# xcode4.3 - Iphone Simulator 4.3 中没有声音/音量。但在 Iphone 模拟器 5.1 中播放正常

> ID：11600831
> 
> 赞同：1
> 
> 时间：2012-07-22T13:51:47.900
> 
> 标签：xcode4.3, ios4

我正在开发一个 iPhone 应用程序来播放声音文件。我的部署目标是 4.0。尝试在 iPhone Simulator 4.3 中播放时，它播放时没有声音/音量。但它在模拟器 5.1 中运行良好。

我的代码：

```
NSString *fileName=[NSString stringWithFormat:@"book%i_chapter_%i",book_number,chapter_number];

NSString *path=[[NSBundle mainBundle] pathForResource:fileName ofType:@"mp3" inDirectory:nil];
NSURL *url = [NSURL fileURLWithPath:path];
NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
if(error)
{
    NSLog(@"Error in audio Player: %@",[error localizedDescription]);
}
else
{
    [audioPlayer prepareToPlay];
    //audioPlayer.delegate=self;
    [audioPlayer setVolume:20.0];
    [audioSlider setValue:0.0];
    [audioSlider setMaximumValue:[audioPlayer duration]];

    [audioPlayer play];
} 
```

请帮我解决这个问题。谢谢

# html - 我可以使它无法单击选择中的某些行吗？

> ID：11600833
> 
> 赞同：0
> 
> 时间：2012-07-22T13:52:24.030
> 
> 标签：html, css

我有一个标准类型的选择列表：

```
<select>
  <option value="cars1">Cars 1</option>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="cars2">Cars 2</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 
```

这只是一个示例，但我想做的是将列表中的 Cars 1 和 Cars 2 作为无法选择的标题。

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T13:53:52.190

当然，它被称为`<optgroup>`: [fiddle](http://jsfiddle.net/t2ACv/1/)

```
<select>
  <optgroup label="Cars 1">
      <option value="volvo">Volvo</option>
      <option value="saab">Saab</option>
  </optgroup>
  <optgroup label="Cars 2">
      <option value="mercedes">Mercedes</option>
      <option value="audi">Audi</option>
  </optgroup>
</select> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T13:56:50.430

另一种方法是使用`disabled`属性：

```
<select>
  <option value="cars1" disabled>Cars 1</option>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="cars2" disabled>Cars 2</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/bAum7qiP)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T13:55:08.617

使用`optgroup` [标签](http://www.w3.org/wiki/HTML/Elements/optgroup)

```
<select>
  <optgroup label="Cars 1">
      <option value="volvo">Volvo</option>
      <option value="saab">Saab</option>
  </optgroup>
  <optgroup label="Cars 2">
      <option value="mercedes">Mercedes</option>
      <option value="audi">Audi</option>
  </optgroup>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T13:55:43.927

我猜你正在寻找 optgroup：

```
<select>
    <optgroup label="Cars 1">
        <option value="volvo">Volvo</option>
        <option value="saab">Saab</option>
    </optgroup>
    <optgroup label="Cars 2">
        <option value="mercedes">Mercedes</option>
        <option value="audi">Audi</option>
    </optgroup>
</select> ​ 
```

[小提琴](http://jsfiddle.net/wjYRd/)

# cookies - https 上的明文密码存储在客户端时是否仍然安全？

> ID：11600834
> 
> 赞同：1
> 
> 时间：2012-07-22T13:52:25.717
> 
> 标签：cookies, https, password-encryption, cookiestore

在使用属性（httpOnly 和 secure=true）在服务器上设置 Cookiee 时，这是否意味着它只会在服务器和客户端之间的通信期间受到保护，而不是在那之后？换句话说，如果该值最初是在 plainText 中 - 它是否也会与 plainText 一起存储在客户端（在使用 https 之后） - 使其不安全/易受攻击？

1）在发送之前是否需要始终加密密码（即使使用 https）？

2) httpCookiee (withsecure=true) 存储在哪里？这个存储访问是否受到保护？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:05:57.683

您可能不想存储密码。

您需要的是存储一些“用户已通过身份验证”标志。

毕竟，您应该了解“摘要访问身份验证”。存储散列数据总是有利的。

这个答案太短了，主要是因为这里有太多的可能性——还有太多的开放性问题。

处理回头客：

您可以管理（服务器端）会话数据库。在您只存储会话 ID 的 cookie 中。当用户进行身份验证时，您将其状态存储到服务器端数据库中：“登录”。当他注销时，您更改数据库状态：“注销”。

以任何方式处理返回用户与“存储密码”无关。例如，您可以通过外部身份验证服务（如 open-id、twitter、facebook 等）对用户进行身份验证，您只是通过某些会话 ID 或类似名称来存储他的状态。

浏览器通常可以存储用户名/密码，但这一直**是**用户的责任。当用户只想记住他的密码时，您**不应该**以任何方式存储它。

为什么您希望通过在 cookie 中存储加密密码来使您的应用程序和安全机制复杂化——从任何角度来看，这不是正确的解决方案？

简单流程：

*   当*新*用户访问您的站点时 - 您为他分配一个新的会话 ID 并将 SID 存储到 cookie 中
*   当他登录时（通过https）-您存储在您的数据库中=“sessionID”->“登录”
*   当他一周后返回时，您可以（服务器端）从 cookie 中接受他的会话 ID - 并且从 DB 中您可以获得他的“登录”状态，或者，您可以强制再次登录他（例如，因为到期）
*   以上所有内容都没有任何风险以任何方式存储密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:10:19.887

1）我认为是的。因为即使带有安全标志，cookie 也会以纯文本形式存储在浏览器缓存中

2）它取决于浏览器和操作系统。对于 Mac 中的 Safari，您可以在 ~/Library/Cookies/Cookies.plist 中找到它。您可以看到带有 Secure 标志但以纯文本形式显示的 cookie。它可能受到保护，只有所有者才能看到，但在计算机的任何地方都有纯密码永远不是一个好主意

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:14:25.213

一旦将安全标志设置为 true，即使在浏览器关闭后，cookie 也会加密存储在客户端中。正如您所说，它是不安全/易受攻击的。

响应。1）密码可以在使用Javascript发送之前加密，但这没有多大意义，因为https正在为您进行加密。

响应。2) cookie 存储在浏览器文件夹中。任何人都可以打开文件夹并使用文本编辑器查看 cookie。

浏览器将为您处理密码。只需使用 <input type="password"> 并使用 SSL 就足够安全了。并且，不惜一切代价避免将密码存储在 cookie 中。

# php - 将 LINQ 查询转换为 php mongodb 查询格式

> ID：11600835
> 
> 赞同：1
> 
> 时间：2012-07-22T13:52:29.740
> 
> 标签：php, linq, mongodb

我正在使用官方的 C# mongodb 驱动程序，它确实支持 LINQ。但是我在尝试将其转换为使用 php 驱动程序时遇到了麻烦。

这是 LINQ 查询：

```
.Where(c => DateTime.UtcNow.Subtract(c.DateRequested).TotalDays <= 14).Where(d => ((d.itemid == req.itemid) && (d.MediaType == req.MediaType)) && (d.Status != RequestStatus.Cancelled)) 
```

我不是 100% 确定我是否正确地处理这个问题，但这是我迄今为止以可读格式进行的尝试：

```
Array
(
   [$and] => Array
       (
           [DateRequested] => Array
               (
                   [$gt] => MongoDate Object
                       (
                           [sec] => 1341754027
                           [usec] => 0
                       )

                   [$lte] => MongoDate Object
                       (
                           [sec] => 1342963627
                           [usec] => 0
                       )

               )

           [$and] => Array
               (
                   [$and] => Array
                       (
                           [itemid] => 76510
                           [MediaType] => 0
                       )

                   [Account] => Josh
               )

           [Status] => Array
               (
                   [$ne] => 3
               )

       )

) 
```

这是凌乱的形式：

```
array('$and' => array('DateRequested' => array('$gt' => new MongoDate((time() - 1209600)), '$lte' =>new MongoDate(time())),'$and' => array('$and' => array('itemid' => $itemid,'MediaType' => $source),'Account' => $account),'Status' => array('$ne' => 3))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:11:52.570

不确定我是否从上面的代码示例中推断出正确的文档结构，但假设在`mongo`shell 中添加了一个类似于以下内容的测试文档：

```
// Insert test data
db.mycoll.insert({
    'DateRequested': new Date(),
    'itemid': 76510,
    'MediaType': 0,
    'Account': 'Josh',
    'Status': 2
}); 
```

PHP 中的示例搜索可能如下所示：

```
<?php
    $DAYS14 = 14 * 24 * 60 * 60; // Seconds in 14 days
    $CANCELLED = 3; // Status

    // Dummy search data
    $data['itemid']    = 76510;
    $data['mediatype'] = 0;
    $data['account']   = 'Josh';

    $query = array(
        '$and' => array(
            array('DateRequested' => array('$lt' => new MongoDate(time()))),
            array('DateRequested' => array('$gte' => new MongoDate(time() - $DAYS14))),
        ),
        'itemid'    => $data['itemid'],
        'MediaType' => $data['mediatype'],
        'Account'   => $data['account'],
        'Status'    => array('$ne' => $CANCELLED),
    );

    $document = $collection->findOne($query);

    // Peek at the result
    print_r($document);
?> 
```

请注意，查询元素隐式使用“and”条件。如果需要重复相同的字段（例如`DateRequested`），`$and`则需要显式，以便字段键是不同的。

# php - 按小数点对齐表格列中的十进制数据，HTML5，CSS3

> ID：11600838
> 
> 赞同：9
> 
> 时间：2012-07-22T13:52:59.863
> 
> 标签：php, html, css, text-alignment, decimal-point

我正在构建一个 wordpress 插件，它生成一个 HTML 表格并通过简码发送到重力形式 html 块。

我的问题是单元格内容可以包含：

*   23.24
*   1,234.665
*   123.4

ETC...

注意小数位数的不同。

是否有按小数点对齐此列数据的**非黑客和最佳实践方法？**在这种情况下，右对齐将不起作用。

插入 0 是不可接受的，因为这表示不存在的准确度。

如您所见，我尝试`align="char" char="."`在 td 元素中使用，但没有成功。

任何人都可以对此提供帮助的任何帮助将不胜感激。

非常感谢。

有没有使用`printf("%8.3f",d1)`或类似的方法而不实际打印到屏幕上？例如构建变量 d1 以供以后使用但实际上不打印它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T17:09:49.070

没有直接的方法可以做到这一点。HTML 4.01 有`align=char`，但没有任何浏览器支持。CSS 2.0 有一个对应物，使用该`text-align`属性，同样缺乏支持，因此它从 CSS 2.1 中删除。CSS3 草案有一个很好的系统来进行这种对齐，但如果没有（正确的）实现，则表明有被从规范中删除的危险。

作为一种解决方法，您可以用不可见的东西（空白）填充值，以便当值向右对齐时，小数标记对齐。有几种方法可以尝试实现这一目标：

1）使用数字 0 但在其上设置样式，使其不可见，例如

```
123.4<span class=s>00</span> 
```

和

```
.s { visibility: hidden; } 
```

2) 使用Figure SPACE U+2007，定义为与数字等宽（当数字等宽时），例如

```
123.4&#x2007;&#x2007; 
```

为此，您需要设置字体以使其包含 U+2007。根据[http://www.fileformat.info/info/unicode/char/2007/fontsupport.htm](http://www.fileformat.info/info/unicode/char/2007/fontsupport.htm)甚至 Arial 包含它，但恐怕这可能不适用于仍在使用的旧版本的 Arial。

3) 使用不间断空格并将其宽度设置为所需的位数，使用`ch`单位（定义为具有数字 0 的宽度），尽管此单位相对较新，旧浏览器不支持。例子：

```
123.4<span class=d2>&nbsp;</span> 
```

和

```
.d2 { width: 2ch; display: inline-block; } 
```

我可能会使用第一种方法。原则上，它的缺点是当 CSS 关闭时，数据包含零，这意味着有关准确性的错误信息，而在其他方法中，“仅”关闭 CSS 会打乱布局。

（很明显，数字必须具有相等的提前宽度，以便您可以完全对齐数字数据。这只是意味着用于值的字体必须具有该属性。大多数字体在这方面都会这样做，但是例如 Georgia，康斯坦蒂亚，科贝尔不会。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T23:16:12.950

我写了一个 jQuery 插件来解决这个问题。它在这里找到：[https ://github.com/ndp/align-column](https://github.com/ndp/align-column)

使用您的原始 HTML 表格，它将按小数点对齐一列：

`$('table').alignColumn(3);`

它通过添加另一列来做到这一点，但尽最大努力不破坏其他间距。在 Github 页面上还有一个不同解决方案的参考。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T14:31:16.247

将值放入*两*列是否可以接受？

用于`sprintf()`将值转换为字符串，然后将位放在左列（但右对齐）中的小数点，第二列中的小数位。

请参阅[http://jsfiddle.net/alnitak/p4BhB/](http://jsfiddle.net/alnitak/p4BhB/)，但忽略 JS 位...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T13:55:15.043

**问题是，您必须确保它们的小数点后位数相同。**

一旦你这样做了，使用[`text-align`](http://www.w3.org/wiki/CSS/Properties/text-align). 只需要一个：`style='text-align: right'`

更好的是，您可以使用 css 类而不是内联样式。您的标记将如下所示：

```
 <tr><td>Item 1</td><td>15</td><td class='price'>&pound;123.25</td></tr> 
```

然后在您的样式表中：

```
td.price{
  text-align: right;
} 
```

使用 php，您可以使用[`number_format`](http://php.net/manual/en/function.number-format.php). 您不必回显或打印它，只需将变量包装在该函数中即可。例如：

```
$table .= "<td class='price'>&pound;" . $price . "</td></tr>"; 
```

变成：

```
$table .= "<td class='price'>&pound;" . number_format($price,3) . "</td></tr>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-29T01:37:37.667

这可能有点矫枉过正，但我​​需要同样的东西，只是用输出的长度来解决，并根据该长度添加空格。

IE：

```
if (strlen($meal_retail) == 5) {
echo "&nbsp;&nbsp;&nbsp;&nbsp;";
}
else (strlen($meal_retail) == 6) {
    echo "&nbsp;&nbsp;";
} 
```

这通过一些额外的操作正确地排列了我的小数，我确信一个数组可以更好地清理上面的代码。

此外，我一直在调整我的数字：

```
echo money_format('%i',$meal_retail)  (makes it a two decimal money number) 
```

只是想在提出自己的解决方案之前查看此页面时提供我的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-26T13:37:14.880

我已经为此使用了javascript，我希望这会有所帮助.......

```
</tr>
</table>

</body>
for(var i=0; i<numarray.length; i++){
    var n = numarray[i].toString();
  var res= n.split(".");
  n = res[0];

  if(highetlen < n.length){
    highetlen = n.length;
  }

}

for(var j=0; j<numarray.length; j++){
    var s = numarray[j].toString();
  var res= s.split(".");
  s = res[0];

    if(highetlen > s.length){
  var finallevel = highetlen - s.length;

  var finalhigh = "";
  for(k=0;k<finallevel;k++){
  finalhigh = finalhigh+ '&#160; ';
  }
    numarray[j] = finalhigh + numarray[j];
  }
  var nadiss = document.getElementById("nadis");
  nadiss.innerHTML += "<tr><td>" + numarray[j] + "</td></tr>";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-02T04:43:59.060

这是我的解决方案，希望对您有所帮助！！

```
<style type="text/css">
td{
    font-family: arial;
}
.f{
    width: 10px;
    color: white;
    -moz-user-select: none;
}
</style>

<table>
<tr><td><span class="f">00</span>1.1<span class="f">00</span></td></tr>
<tr><td><span class="f">0</span>12.34<span class="f">0</span></td></tr>
<tr><td>123.456</td></tr>
</table> 
```

有了这个，你看不到零，也不能选择它们！

# android - 如何在android的消息字段中可视化文本？

> ID：11600843
> 
> 赞同：-1
> 
> 时间：2012-07-22T13:53:33.153
> 
> 标签：android

我想在我附上的图片中显示我这样的短信。请给我一些提示...

![在此处输入图像描述](../Images/c2f40c29bb425fed7eb3139a0259e2c2.png)

我喜欢的示例文本：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:06:25.393

首先，我将创建一个小的空语音气球作为 9 补丁。这将用作您的 TextView 背景，并将根据需要扩展以包含文本。我想你需要为你打算使用的每种颜色创建一个，除非有人能告诉我如何为这样的东西添加颜色。

接下来，我将创建一个 layout.xml 文件，其中包含某种容器小部件（可能是 LinearLayout 或 RelativeLayout），其中包含一个占据容器左半部分的 TextView。制作另一个将 TextView 放在右半部分的内容。

在容器内部，放置一个使用上述9-patch图像作为背景的TextView。

然后，我将使用 ListView 作为文本消息的整个容器。构造一个 Adapter 子类来管理你的文本消息列表，并使用 LayoutInflator 扩展上述 layout.xml 文件以返回要由 ListView 显示的 View。

无论如何我都会这样做。实现细节留给读者练习。

# php - preg_replace &, ; 和 ＃

> ID：11600844
> 
> 赞同：1
> 
> 时间：2012-07-22T13:53:50.333
> 
> 标签：php, codeigniter, preg-replace

我正在使用以下 PHP 代码来转义用户输入，但是 &、# 和 ; 无法转义，因为这些也用于其他特殊字符的代码。这是我的代码

```
>$data = preg_replace("/</", "&lt;", $data);
>$data = preg_replace("/>/", "&gt;", $data);
>$data = preg_replace("/\"/", "&quot;", $data);
>$data = preg_replace("/\(/", "&#40;", $data);
>$data = preg_replace("/\)/", "&#41;", $data);
>$data = preg_replace("/'/", "&#39;", $data);
>$data = preg_replace("/{/", "&#123;", $data);
>$data = preg_replace("/}/", "&#125;", $data);
>$data = preg_replace("/\`/", "&#96;", $data);//tick mark
>$data = preg_replace("/\[/", "&#91;", $data);
>$data = preg_replace("/\]/", "&#93;", $data);
>$data = preg_replace("/\=/", "&#61;", $data); 
```

所以你能告诉我如何逃避 &、# 和 ; 不会打扰其余的代码。我确信这一定被问过很多次了，如果你能引导我到相关的帖子。此外，如果某些朋友创建了自己的代码/模块/类来进行转义，那将非常酷

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:58:10.393

您最好使用`htmlentites()`，它将为您完成所有工作：

```
$data = htmlentities($data, ENT_QUOTES); 
```

[文档在这里](http://www.php.net/manual/en/function.htmlentities.php)

# wcf - WCF & MSMQ & TransactionScope 长流程

> ID：11600847
> 
> 赞同：7
> 
> 时间：2012-07-22T13:54:24.030
> 
> 标签：wcf, msmq, msmq-wcf

我正在尝试开发一个 WCF 服务来处理数百次下载和转换。我已经使用从 ASP.NET Web 应用程序接收消息的事务队列初始化 MSMQ。

在互联网上长期研究后，我的问题是如何管理管理 MSMQ 消息的 WCF 服务方法中的长进程。

问题是在小尺寸下载时，该过程很快完成并且范围返回到MSMQ服务，但是如果下载大小很大并且需要3/4分钟下载，则范围返回仍然完成，但是MSMQ 服务将 MSG 重新发送到 WCF 服务，我有重复下载。

我想这是超时的问题，但我已经尝试更好地配置我的 Host app.config 没有成功。

```
 <netMsmqBinding>
    <binding name="OrderServiceMsmqBinding" 
             maxRetryCycles="1"
             receiveRetryCount="1"
             retryCycleDelay="00:05:20"
             deadLetterQueue="System"
             receiveErrorHandling="Move"
             exactlyOnce="true"
             durable="true"
             receiveTimeout="00:10:00"
             sendTimeout="00:20:00"
             timeToLive="1.00:00:00" useMsmqTracing="true">
      <security mode="None"></security>
    </binding>
  </netMsmqBinding> 
```

这是进入 WCF 服务的方法：

```
 <OperationBehavior(TransactionScopeRequired:=True, TransactionAutoComplete:=True)> _
Public Sub FfmpegConversion(ffmpegjob As FfmpegJob) Implements IOrderService.FfmpegConversion
    Using sc As New TransactionScope(TransactionScopeOption.Required)
        Try
          ExecuteLongProcess()
        Catch ex As Exception
            Console.WriteLine(ex.Message)
        Finally
            sc.Complete()
        End Try
    End Using
End Sub 
```

**更新**

经过长时间的试验和研究，我开始认为将长时间的过程变成由 MSMQ 队列触发的方法是不可能的。

我使用另一个管理数据的线程来解决它，但现在的问题是我失去了 TransactionScope 优势，因为一旦工作传递给新线程，MSMQ 就会删除 msg，因为相信已经完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T14:12:59.160

这里发生的是事务超时。您可以在 machine.config 文件上指定一个新值，这就是您获得长事务的方式...

[http://blogs.inkeysolutions.com/2012/01/managing-timeouts-while-using.html](http://blogs.inkeysolutions.com/2012/01/managing-timeouts-while-using.html)

# javascript - 使用 JSON 输入

> ID：11600851
> 
> 赞同：0
> 
> 时间：2012-07-22T13:54:37.087
> 
> 标签：javascript, html, json

我正在尝试使用 AJAX 获取 JSON 输入并将其加载到选择控件中。但是当我运行它时：\它停留在“下载食谱......”。有人看到问题了吗？（我尝试了一些更改，但到目前为止没有任何效果）

还有 1 个问题，任何人都可以用更短的方式来思考

> 转换表（目标节点）

因为这是漫长而复杂的方式，我认为：\

```
 <script type="text/javascript">
             function loadXMLDoc() {
                 var xmlhttp;
                 document.getElementById("span").style.visibility = "visible";
                 document.getElementById("span1").style.visibility = "hidden";
                 document.getElementById("button").style.visibility = "hidden";
                 xmlhttp = new XMLHttpRequest();
                 xmlhttp.onreadystatechange = function () {
                     if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                         result = xmlhttp.responseText;
                         result = eval('(' + result + ')');
                         txt = "<select onchange='ShowRecipeDetails(this)'>";
                         for (i = 0; i < result.length; i++) {
                             txt = txt + "<option VALUE=" + result[i].recipe + ">" + result[i].recipe + "</option>";
                         }
                         txt = txt + "</select  >";
                         document.getElementById("span").style.visibility = "hidden";
                         document.getElementById("span1").style.visibility = "visible";
                         document.getElementById("myDiv").innerHTML = txt;
                     }
                 }
                 xmlhttp.open("POST", "http://food.cs50.net/api/1.3/menus?meal=BREAKFAST&sdt=2011-03-21&output=json", true);
                 xmlhttp.setRequestHeader("Content-Type", "application/json; charset=utf-8");
                 xmlhttp.send();
             }
             function ShowRecipeDetails(event) {
                 // get the index of the selected option 
                 var idx = event.selectedIndex;
                 // get the value of the selected option 
                 var field = event.options[idx].value;
                 $.ajax({
                     type: "GET",
                     url: "http://food.cs50.net/api/1.3/recipes?&output=json&id=" + field,
                     success: function (data) {
                         $("#TableDiv").html(ConvertToTable(data[0]));
                     }
                 });
             }
             function ConvertToTable(targetNode) {
                 var table = "<table border = 1 borderColor =green>";
                 table += "<tr>";
                 table += "<td>" + "ID" + "</td>";
                 table += "<td>" + targetNode.id + "</td>";
                 table += "</tr>";
                 table += "<td>" + "Ingredients:" + "</td>";
                 table += "<td>" + targetNode.ingredients + "</td>";
                 table += "</tr>";
                 table += "<td>" + "Name:" + "</td>";
                 table += "<td>" + targetNode.name + "</td>";
                 table += "</tr>";
                 table += "<td>" + "Size:" + "</td>";
                 table += "<td>" + targetNode.size + "</td>";
                 table += "</tr>";
                 table += "<td>" + "Unit" + "</td>";
                 table += "<td>" + targetNode.unit + "</td>";
                 table += "</tr>";
                 table += "<td>" + "VEGETARIAN:" + "</td>";
                 table += "<td>" + targetNode.VEGETARIAN + "</td>";
                 table += "</tr>";
                 table += "</tr>";
                 table += "</table>"
                 return table;
             }
 </script> 
```

和 HTML：

```
<button id="button"  type="button" onclick="loadXMLDoc()" >Get all recipes</button>
<br />
<span id="span" style="visibility:hidden">Downloading the recipes....</span>
<span id="span1" style="visibility:hidden">Please choose a recipe ID to view</span>
<div id="jsonDiv"></div>
<div id="myDiv"></div>
<div id="TableDiv"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:06:20.010

HarvardFood API 还提供 JSONP 版本。因此，如果您将 URL 更改为：

```
http://food.cs50.net/api/1.3/menus?meal=BREAKFAST&sdt=2011-03-21&output=jsonp&callback=parseResponse 
```

您可以创建一个`parseResponse`函数来处理返回的数据，并且可以通过插入脚本标签来执行 AJAX。

问题是您正在与[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)发生冲突。

* * *

我看到您已将问题更新为使用 jQuery AJAX。这提供了一种`jsonp`数据类型，这可能比添加脚本标签更容易。

# servlets - ServletSecurity 注释被应用到以编程方式添加的所有 servlet。为什么？

> ID：11600853
> 
> 赞同：1
> 
> 时间：2012-07-22T13:54:53.750
> 
> 标签：servlets, security, servlet-3.0

根据 Servlet 3.0 规范 - “@ServletSecurity 注释不适用于使用 Servletcontext 接口的 addServlet(string, Servlet) 方法创建的 ServletRegistration 的 url 模式，除非 servlet 是由 ServletContext 的 createServlet 方法构造的。”

然而，在尝试使用它时，ServletSecurity 注释正在应用于我在 ServletContextListener.contextInitialized() 方法中添加的所有 servlet。

监听代码：

```
public void contextInitialized(ServletContextEvent e) {
    System.out.println(" ContextInitialized -- start");
    ServletContext ctx = e.getServletContext();
    try {

    ServletRegistration.Dynamic sr2 = ctx.addServlet("myServlet2", "com.example.web.MyServlet1");
    sr2.addMapping("/myServlet2");
    System.out.println("param2 added status : " + sr2.setInitParameter("param2", "value2"));
    sr2.setLoadOnStartup(3);

    Class<MyServlet1> myServletClass = (Class<MyServlet1>) Class.forName("com.example.web.MyServlet1");
    ServletRegistration.Dynamic sr3 = ctx.addServlet("myServlet3", myServletClass);
    sr3.addMapping("/myServlet3");
    sr3.setLoadOnStartup(2);

    System.out.println("param3 added status : " + sr3.setInitParameter("param3", "value3"));

    MyServlet1 myServlet4 = ctx.createServlet(myServletClass);
    ServletRegistration.Dynamic sr4 = ctx.addServlet("myServlet4", myServlet4);
    sr4.addMapping("/myServlet4");
    sr4.setLoadOnStartup(1);

    System.out.println("param4 added status : " + sr4.setInitParameter("param4", "value4"));

    } catch(ClassNotFoundException ex) {
        ex.printStackTrace();
    }catch(ServletException ex) {
        ex.printStackTrace();
    }

    System.out.println(" ContextInitialized -- finish");

} 
```

servlet 中的注释：

```
@ServletSecurity (
    httpMethodConstraints = {
            @HttpMethodConstraint(
                value="GET",
                rolesAllowed = {"sme"},
                transportGuarantee = ServletSecurity.TransportGuarantee.NONE// CONFIDENTIAL             
            ),
            @HttpMethodConstraint(
                value="POST",
                rolesAllowed = {"ssme"},
                transportGuarantee = ServletSecurity.TransportGuarantee.NONE//CONFIDENTIAL              
            )
    }
) 
```

它要求对所有人进行身份验证。

任何见解都会有所帮助。

谢谢-Vineet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:25:56.753

`@ServletSecurity annotation`应用于映射到 servlet 的所有 url 模式。它只排除通过`addServlet(..)`方法以编程方式添加的 servlet。

> # 规格说…………
> 
> @ServletSecurity 注解不适用于使用 ServletContext 接口的 addServlet(String, Servlet) 方法创建的 ServletRegistration 的 url 模式，**除非 Servlet 是由 ServletContext 接口的 createServlet 方法构造的**。

# directory - 在 Common Lisp 中获取路径名的最后一个组件

> ID：11600855
> 
> 赞同：3
> 
> 时间：2012-07-22T13:55:08.600
> 
> 标签：directory, common-lisp, pathname

虽然我可以建立一个路径名，例如

```
(make-pathname :directory '(:RELATIVE "dir" "subdir" "subsubdir")) 
```

我如何`subsubdir`从这样的路径名中返回（假设它是一个目录）？我需要从路径名中提取最后一个目录，就像这个 Unix 命令一样：

```
$ basename /usr/local/share/
share 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T14:06:24.283

参见 Common Lisp Hyperspec，[文件名字典](http://www.lispworks.com/documentation/lw51/CLHS/Body/c_filena.htm)

```
(first (last (pathname-directory some-pathname))) 
```

# php - 这个单例类有什么问题

> ID：11600864
> 
> 赞同：0
> 
> 时间：2012-07-22T13:56:22.267
> 
> 标签：php, singleton

我有3节课。[1]单例 [2]加载 [3]仪表板。在 Load 类中，有一种方法称为“model()”。我正在使用此代码初始化单例对象的数据。

```
$obj = Singleton::getInstance();
$obj->insertData('email', 'mail@domain.com'); 
```

同样，在 Dashboard 类中，有一个名为“show()”的方法，我正在尝试打印 Singleton 对象数据。但是，在这里我可以看到 Singleton 对象的所有数据，除了由“Load”类的“model”方法初始化的数据。

这是我的完整代码...

```
<?php 
//---Singletone Class---
class Singleton
{
    // A static property to hold the single instance of the class
    private static $instance;

    // The constructor is private so that outside code cannot instantiate
    public function __construct() {

        if(isset(self::$instance))
        foreach(self::$instance as $key => &$val)
        {
            $this->{$key} = &$val;
        }
    }

    // All code that needs to get and instance of the class should call
    // this function like so: $db = Database::getInstance();
    public static function getInstance()
    {
        // If there is no instance, create one
        if (!isset(self::$instance)) {
            $c = __CLASS__;
            self::$instance = new $c;
        }
        return self::$instance;
    }

    // Block the clone method
    private function __clone() {}

    // Function for inserting data to object
    public function insertData($param, $element)
    {
        $this->{$param} = $element;
    }
}

//---LOAD class---
class Load
{    
    function __construct() 
    {
     $obj = Singleton::getInstance();
     $obj->insertData('country', 'INDIA');
    } 

    function model()
    {
        $this->name = 'Suresh';     

        $obj = Singleton::getInstance();
        $obj->insertData('email', 'mail@domain.com');
    }

    function msg()
    {
        return('<br><br>This message is from LOAD class');
    }       
}

$obj = Singleton::getInstance();
$load = new load();
$obj->load = $load;

//---Dashboard Class---
class Dashboard extends Singleton
{
    function __construct()
    {
        parent::__construct();
   }

    function show()
    {
        echo "Default data in current Object";
        echo "<br>";
        print_r($this);

        echo $this->load->msg();

        $this->load->model();

        echo "<br><br>Data in current Object after post intialization";
        echo "<br>";
        print_r($this);
    }
}

$dashboard = new dashboard();
$dashboard->show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:49:18.227

我不喜欢你直接访问像数组这样的对象。这是一种更好的方法[见[这里]](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)：

你应该这样称呼它：

```
$obj = Singleton::getInstance();
$load = new Load();
$obj->insertData( 'load', $load ); 
```

单例的实现：

```
class Singleton
{

// A static property to hold the single instance of the class
private static $instance;

// my local data
protected $_properties;

// You might want to move setter/getter to the end of the class file

public function __set( $name, $value )
{
    $this->_properties[ $name ] = $value;
}

public function __get( $name )
{
    if ( ! isset( $this->_properties[ $name ] )) {
       return null;
    }

    return $this->_properties[ $name ];
}

// No need to check, if single instance exists! 
// __construct can only be called, if an instance of Singleton actually exists
private function __construct() {

  $this->_properties = array();

  foreach(self::$instance as $key => &$val)
  {
     $this->_properties{$key} = &$val;
  }

}

public static function getInstance()
{
    if (!isset(self::$instance)) {
        $c = __CLASS__;
        self::$instance = new $c;
    }
    return self::$instance;
}

// Function for inserting data to object
public function insertData($param, $element)
{
    $this->_properties{$param} = $element;
}

// Block the clone method
private function __clone() {} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:07:33.363

如果你的单身人士真的是单身人士，那么更新就会奏效。我怀疑您可能有多个已初始化的单例类实例。
编辑：
从真正的单例类继承也不是一个好主意。您需要删除 Dashboard 在 Singleton 上的继承

编辑： [PHP 单例类的最佳实践](https://stackoverflow.com/questions/8776788/best-practice-on-php-singleton-classes)

# kml - 向 kml 图标添加文本

> ID：11600866
> 
> 赞同：1
> 
> 时间：2012-07-22T13:56:53.857
> 
> 标签：kml

我有一个带有许多地标的文档。每个地标都是一个自行车站，我必须显示该站有多少辆自行车。有没有办法向地标图标添加文本？（我知道我可以将此数据放入气球中，但我确实需要将其添加到图标中）

谢谢，阿米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:23:55.200

我认为最简单的方法是根据该位置的自行车数量更改您指向的图标文件。您可以使用像这样的图标 MapIcons [http://mapicons.nicolasmollet.com/numbers-letters/](http://mapicons.nicolasmollet.com/numbers-letters/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:16:28.070

一般的答案是 KML 支持[LabelStyle](https://developers.google.com/kml/documentation/kmlreference#labelstyle)，它允许您设置显示的样式。

另一种选择是使用与其关联的数字创建自定义标记。

其他选项取决于您如何显示 kml。

# ruby-on-rails-3 - 使用 cancan 授权 elasticsearch 结果

> ID：11600867
> 
> 赞同：2
> 
> 时间：2012-07-22T13:57:08.623
> 
> 标签：ruby-on-rails-3, cancan, elasticsearch, tire

您对如何使用 cancan 对弹性搜索结果（使用轮胎）进行授权有什么建议吗？

我的方法是让 cancan 加载和授权模型，并将所有授权的 id 传递给轮胎搜索，或者反过来。

你怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T11:09:06.370

# php - PHP读取word文档仅获取电子邮件地址

> ID：11600869
> 
> 赞同：3
> 
> 时间：2012-07-22T13:57:22.663
> 
> 标签：php, ms-word, docx, doc

好的，这是我想要一个 php 脚本打开并读取用户上传的 Word 文档并获取文档中的电子邮件地址并将其存储到数据库的内容。

只有电子邮件地址！它会像

电子邮件：someone@example.com 或喜欢“电子邮件是某人@example.com”

任何格式.. 可以肯定的一件事是会有空格分隔电子邮件 ID 和其他单词。有人能帮我吗 ？:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:04:55.207

这确实有点宽泛。从根本上说，您需要处理以下步骤：

### 上传word文档

您需要让用户上传文件。[w3schools](http://www.w3schools.com/php/php_file_upload.asp)有一个教程可以帮助您入门

### 解析内容

Office 文件很复杂 - 从技术上讲，每个文件都是一个完整的文件系统，因为您可以嵌入图像、其他文档等......新`.docx`文件实际上只是带有一些 XML 的 zip 文件 - 尝试重命名`.zip`并打开它。旧式`.doc`是专有的 MS 格式，虽然同样复杂，但更加模糊。[这个库](http://holloway.co.nz/docvert/index.html)似乎可以将 word 文件转换为 html，这可能会使阅读它们变得更加容易。

### 查找电子邮件地址

我怀疑你最好的机会是使用正则表达式从正文中提取电子邮件地址。如果有多个电子邮件地址怎么办？这是[对电子邮件正则表达式的介绍](http://www.regular-expressions.info/email.html)，可能会有所帮助。[这个答案](https://stackoverflow.com/a/8175859/156755)是针对同一件事的

要获得更详细的答案，您将不得不提供更具体的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:04:27.390

将 Word 转换为文本：

```
$filename="file.doc";
$TXTfilename = $filename . ".txt";
$word = new COM("word.application") or die("Unable to instantiate Word object");
$word->Documents->Open($filename);
// the '2' parameter specifies saving in txt format
$word->Documents[1]->SaveAs($TXTfilename ,2);
$word->Documents[1]->Close(false);
$word->Quit();
$word->Release();
$word = NULL;
unset($word);
$content = file_get_contents($TXTfilename);
unlink($TXTfilename); 
```

获取数组中的所有电子邮件：

```
$content = "My email is email@example.com"; // it's example. 
$matches = array();
$pattern = '/[A-Za-z0-9_-]+@[A-Za-z0-9_-]+\.([A-Za-z0-9_-][A-Za-z0-9_]+)/'
preg_match($pattern,$content,$matches); 
```

# git - Git：repo 包含一个空目录 - 会发生什么？

> ID：11600871
> 
> 赞同：15
> 
> 时间：2012-07-22T13:57:40.797
> 
> 标签：git, directory

Git[跟踪文件，而不是目录](https://stackoverflow.com/questions/5091017)，我们[目前不能`add`清空目录](https://stackoverflow.com/questions/11600188/)（[标准技巧](https://stackoverflow.com/questions/115983/)不会添加空目录，而是添加一个文件，另请参阅[常见问题解答](https://git.wiki.kernel.org/index.php/GitFaq#Can_I_add_empty_directories.3F)）。

然而，一个 git`repo`可能包含一个空目录。那么我克隆一个 repo 或检出一个包含空目录的分支会发生什么？它是在工作树中创建的吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T13:58:49.550

要使用空目录设置测试存储库，您可以使用以下脚本（在临时目录中运行它）。

但是，在签出时，将忽略空目录。在这里，Git 也只适用于文件，而不是目录，即使后者存在。

Github 和[`tig`](http://jonas.nitro.dk/tig/)显示空目录，[`gitk`](http://www.kernel.org/pub/software/scm/git/docs/gitk.html)没有。

```
#!/bin/bash
set -e

echo ---- initialize the repo...
#rm -rf .git
git init

echo ---- create an empty tree object...
empty_tree=$(git mktree < /dev/null)

echo ---- create a parent tree containing the empty subtree...
root_tree_ls=$(echo -e 040000 tree $empty_tree\\tvacuum)
root_tree=$(echo "$root_tree_ls" | git mktree)

echo ---- commit...
commit_msg="This commit contains an empty directory"
commit=$(git commit-tree $root_tree -m "$commit_msg")

echo ---- create a branch...
git branch master $commit

# output the ids:
echo ----------------------------------------------------
echo "empty tree:" $empty_tree
echo "root tree: " $root_tree
echo "commit:    " $commit 
```

# sql-server - 使用 SQL Server 2008 的案例语句将 NULL 值分配给列名

> ID：11600872
> 
> 赞同：1
> 
> 时间：2012-07-22T13:57:47.430
> 
> 标签：sql-server, sql-server-2008

我有一张桌子`GrowDaysLocation`。在这个表中，可以有两条关于`DistrictId`和的记录`RegionId`

IE;

*   `RegionId=1`和`DistrictId = NULL`
*   `RegionId=1`和`DistrictId = 1`

我有一个条件，如果该行不存在，`RegionId = 1 and DistrictId = 1`则获取`RegionId = 1 and DistrictId = NULL`.

如何使用单个查询完成此操作？

以下是我尝试过的查询。

在这个查询中，我在 Where 子句中使用了 CASE 并使用子查询来找出行的存在，但问题是当我从 case 中返回 NULL 时，它不会返回任何行。

====================================================

```
SET ANSI_NULLS OFF

Select * From GrowDaysLocations 
Where DistrictId = 
( CASE WHEN (Select Count(*) From GrowDaysLocations 
                Where RegionId = '38D95A68-4A92-4D11-9A88-464CF1492880' AND DistrictId = 'F4B67A07-1BF7-42F5-9F19-77329A215D8B' AND 
                GrowDaysProfileId = '79F8BDBF-67D3-44A7-A790-1C10EE8B2AD0') > 0 THEN DistrictId
            ELSE 
                NULL
            END
)   
AND RegionId = '38D95A68-4A92-4D11-9A88-464CF1492880' AND GrowDaysProfileId = '79F8BDBF-67D3-44A7-A790-1C10EE8B2AD0' 
```

============================================

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:34:15.100

该`RANK`功能可能会为您提供您正在寻找的结果：

```
SELECT RegionId, DistrictId, GrowDaysProfileId
FROM
    (SELECT RegionId
        ,DistrictId
        ,GrowDaysProfileId
        ,RANK() OVER(PARTITION BY RegionId, GrowDaysProfileId 
                     ORDER BY DistrictId DESC) AS rankVal
    From GrowDaysLocation) sub
WHERE rankVal = 1 
```

`RegionId`此查询将为您提供一个结果集，其中每个不同的和都有一行`GrowDaysProfileId`。如果`RegionId`/`GrowDaysProfileId`组合在表中有多于一行，则查询将根据 的值选择一个结果`DistrictId`。首先使用具有最高`DistrictId`值的行，最后使用具有最低值`DistrictId`（`NULL`最低）的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:23:30.023

这是因为在评估条件时

```
WHERE ColumnName = NULL 
```

所有行都被过滤掉，因为在检查相等性时，如果任何一侧为 NULL，则无论条件如何，都会立即过滤掉该行（[请参阅数据操作语言部分](http://en.wikipedia.org/wiki/Null_%28SQL%29#Data_Manipulation_Language)）。你必须使用

```
WHERE ColumnName IS NULL 
```

在这种情况下，您可以使用

```
WHERE ISNULL(DistrictID, 'Empty') = ... 
```

并在 case 语句中使用 'Empty' 字符串而不是 null。

# ruby-on-rails - Rails 3.1 CKEditor gem 原始文本

> ID：11600875
> 
> 赞同：4
> 
> 时间：2012-07-22T13:58:08.850
> 
> 标签：ruby-on-rails, ckeditor, markdown, pygments

我正在使用 ckeditor gem，当我将粘贴用作纯文本对话框时，它会将文本封装在引号中以及 <p> 标签和 <br> 标签中。有什么方法可以告诉 ckeditor 在使用该选项时不要使用任何标记。

我想要完成的是在文章中包含代码片段。这些片段是使用 markdown gem 和 colours.rb 处理的。以下代码是我想要完成的

```
```ruby 
  puts "hello world"

  class Hello 
  end
``` 
```

这就是我得到的

```
<p>
```ruby<br />
    &nbsp; puts &quot;hello world&quot;
&nbsp; class hello<br />
&nbsp; end<br /></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:25:55.710

我真的不知道ckeditor是否有这个选项。

如果您的问题是在带有 RoR 的 Web 中显示 WYSIWYG 之类的信息，则可能您必须在视图中设置信息是 html 安全的（这是出于安全原因，默认情况下设置）。如果你不这样做，你会看到 html 标签。

您有很多方法可以确保 html 安全：

这是关于使用哪一种的讨论： [raw vs. html_safe vs. h to unescape html](https://stackoverflow.com/questions/4251284/raw-vs-html-safe-vs-h-to-unescape-html)

希望能解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:15:09.713

这可能是您正在寻找的：

[http://ckeditor.com/addon/codemirror](http://ckeditor.com/addon/codemirror)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:09:03.593

没有发现比使用 Markdown 更好的东西了。就像在 SO 上完成的一样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T20:54:23.717

Codemirror 可能是您最好的选择。它类似于 CKeditor，但用于代码。

[http://codemirror.net/](http://codemirror.net/)

你甚至可以为它编写自己的模式，如果我理解你试图做什么，最终可能会被要求。

# html - 在 CakePHP 2.2.1+ 中生成 html 链接？

> ID：11600878
> 
> 赞同：0
> 
> 时间：2012-07-22T13:58:26.687
> 
> 标签：html, cakephp, hyperlink, html-helper, cakephp-2.2

如何使用`HtmlHelper`CakePHP 2.2.1 中的类轻松生成 HTML 链接？

想象一下，我声明了一个路由`/finest-perfumes-ever-2012`到`Perfumes/Index`Controller/Action 的路由。

我需要这个生成的链接是：

```
somedomain.com/finest-perfumes-ever-2012  //Generate link HAS to obey Routes I've set. 
```

代替：

```
somedomain.com/Perfumes/Index 
```

该[文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3alink)似乎并没有很好地解释如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:08:50.423

不确定您是否`2012`偶然错过了，或者您的问题比我下面的回答更复杂。假设`2012`没关系：

Cake 使用了一个相当不错的特性——[反向路由](http://book.cakephp.org/2.0/en/development/routing.html)。

如果您已正确设置所有内容，则以下内容应输出您想要的内容。

```
<?php
Router::connect(
    '/finest-perfumes-ever',
    array('controller' => 'perfumes', 'action' => 'index')
);

echo $this->Html->link('View Finest Perfumes!', array('controller'=>'perfumes', 
                                                         'action' => 'index')); 
```

提供您的 URL（使用 HTML 帮助程序创建时）具有与路由完全匹配的参数，反向路由将查找您想要的路由，并相应地输出链接。

如果这`2012`很重要，您可能可以通过传递参数来实现它 - 这里有一些[示例](http://book.cakephp.org/2.0/en/development/routing.html#passing-parameters-to-action)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:01:32.367

Define route configuration into your app/Config/routes.php at the last of all routing statements.

You can do the same by [passing an argument to the action](http://book.cakephp.org/2.0/en/development/routing.html#passing-parameters-to-action) and define it in your routes.php file.

Kindly ask if it not worked for you.

# r - 如何从r中数据框中的2列中提取唯一级别

> ID：11600880
> 
> 赞同：4
> 
> 时间：2012-07-22T13:58:46.213
> 
> 标签：r, unique, dataframe

我有data.frame

```
df<-data.frame("Site.1" = c("A", "B", "C"),
               "Site.2" = c("D", "B", "B"),
               "Tsim" = c(2, 4, 7), 
               "Jaccard" = c(5, 7, 1))

#    Site.1 Site.2 Tsim Jaccard
#  1      A      D    2       5
#  2      B      B    4       7
#  3      C      B    7       1 
```

我可以使用获得每列的唯一级别

```
top.x<-unique(df[1:2,c("Site.1")])
top.x

# [1] A B
# Levels: A B C

top.y<-unique(df[1:2,c("Site.2")])
top.y

# [1] D B
# Levels: B D 
```

如何获得两列的唯一级别并将它们转换为向量，即：

```
v <- c("A", "B", "D")
v
# [1] "A" "B" "D" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:39:00.200

尝试`union`：

```
union(top.x, top.y)
# [1] "A" "B" "D"
union(unique(df[1:2, c("Site.1")]), 
      unique(df[1:2, c("Site.2")]))
# [1] "A" "B" "D" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:07:28.470

```
top.xy <- unique(unlist(df[1:2,]))
top.xy

[1] A B D
Levels: A B C D 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T15:31:18.830

您可以获得前两个列的唯一级别：

```
de<- apply(df[,1:2],2,unique)  
de

# $Site.1  
# [1] "A" "B" "C"  

# $Site.2  
# [1] "D" "B" 
```

然后你可以取两组的对称差：

```
union(setdiff(de$Site.1,de$Site.2), setdiff(de$Site.2,de$Site.1))  
# [1] "A" "C" "D" 
```

如果您只对前两行感兴趣（如您的示例所示）：

```
de<- apply(df[1:2,1:2],2,unique)  
de  
#      Site.1 Site.2  
# [1,] "A"    "D"   
# [2,] "B"    "B"  
union(de[,1],de[,2])  
# [1] "A" "B" "D" 
```

# node.js - 如何擦除控制台中打印的字符

> ID：11600890
> 
> 赞同：79
> 
> 时间：2012-07-22T13:59:45.517
> 
> 标签：node.js

我一直在寻找如何用其他语言做到这一点，我发现我必须使用特殊字符 \b 来删除最后一个字符。( [how-do-i-erase-printed-characters-in-a-console-applicationlinux](https://stackoverflow.com/questions/430713/how-do-i-erase-printed-characters-in-a-console-applicationlinux) )

这不适用于 node.js 在多次调用 console.log ();

如果我写一个日志：

```
console.log ("abc\bd"); 
```

我得到结果：abd

但如果我写：

```
console.log ("abc");
console.log ("\bd"); 
```

我得到结果：

abc
d

我的目标是打印一条等待消息，例如：

等待
等待。
等待……
等待……

然后再次：

等待
等待。
ETC

都在同一行。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-07-22T14:14:34.100

有可用的功能`process.stdout`：

```
var i = 0;  // dots counter
setInterval(function() {
  process.stdout.clearLine();  // clear current text
  process.stdout.cursorTo(0);  // move cursor to beginning of line
  i = (i + 1) % 4;
  var dots = new Array(i + 1).join(".");
  process.stdout.write("Waiting" + dots);  // write text
}, 300); 
```

可以提供论据`clearLine(direction, callback)`

```
/**
 * -1 - to the left from cursor
 *  0 - the entire line // default
 *  1 - to the right from cursor
 */ 
```

**2015 年 12 月 13 日更新**：尽管上述代码有效，但它不再记录为`process.stdin`. 它已移至[`readline`](https://nodejs.org/api/readline.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-07-16T09:05:18.823

现在你可以使用`readline`库和它的[API](https://nodejs.org/api/readline.html#readline_readline_clearline_stream_dir)来做这些事情。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-09-25T15:33:14.940

覆盖同一行的最简单方法是

```
var dots = ...
process.stdout.write('Progress: '+dots+'\r'); 
```

这`\r`是关键。它会将光标移回行首。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-20T19:40:44.563

这对我有用：

```
process.stdout.write('\033c');
process.stdout.write('Your text here'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-01T15:58:36.440

# 使用回车

回车符将光标放回到当前行的开头。

```
process.stdout.write("\r"); 
```

这个解决方案对我有用——我只用一个字符对其进行了测试。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-02-18T11:02:59.680

尝试通过移动字符串开头的 \r ，这对我来说在 Windows 上有效：

```
for (var i = 0; i < 10000; i+=1) {
    setTimeout(function() {
        console.log(`\r ${i}`);
    }, i);
} 
```

# c# - 如何连接两个富文本框

> ID：11600894
> 
> 赞同：2
> 
> 时间：2012-07-22T14:00:44.617
> 
> 标签：c#, winforms

我写了一个文字处理器，我想在单独的页面上显示文本，比如 Microsoft Word，然后我想做富文本框的集合，我希望当用户输入并填写文本中的第一个框时，光标自动移动第二个框。我怎样才能做到这一点？填充文本框时是否激活了任何事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:22:46.293

我发现这是为了建立`OnVisibleScrollbarsChanged`事件。[http://www.csharp-examples.net/check-scrollbars-visibility/](http://www.csharp-examples.net/check-scrollbars-visibility/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T14:02:19.000

当文本框的文本发生更改时，会触发一些事件。

因此，计算该框中的文本数量，如果达到一定数量 - 转到下一个“页面”。

# macos - 安装了触发器应用程序，安装了 node.js，触发器说它不能在 Mac 上运行 npm

> ID：11600895
> 
> 赞同：2
> 
> 时间：2012-07-22T14:00:45.667
> 
> 标签：macos, node.js, npm, trigger.io

新的 Mac 用户帐户。我为 Mac 安装了 Trigger.io (TriggerToolkit) 应用程序。它会启动一个带有应用程序的选项卡。我可以从中运行 iOS 模拟器 - 所以它似乎可以正常工作。我已经使用 Mac 包从 node.js 网站安装了 node.js。

我有 node.js 作为 /usr/local/bin/npm （版本 1.1.43）。

当我在命令行输入“npm”时发现它。

路径“/usr/local/bin”在我的 $PATH 上。

“/usr/local/bin”在我的 /etc/paths 文件中设置，系统范围。

因此，任何用户都应该可以在任何时间（登录之前或之后、运行终端等）找到 npm 可执行文件。

当我使用网页进行 web 运行时，一切正常，直到它尝试运行 npm。

```
[DEBUG] running run_web((), {})

[DEBUG] Running: npm install

[DEBUG] failed to run npm: do you have Node.js installed and on your path? while running run_web((), {})

[ERROR] failed to run npm: do you have Node.js installed and on your path? 
```

我想这个问题一定与关于 npm 路径的假设有关。假设是什么？我可以用什么符号链接来完成这项工作？

请注意，npm*是*由“forge run web”找到的。这是 TriggerToolkit.app 工作方式特有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:50:14.020

**更新：**这是从 v1.4.6 开始修复的：http: [//docs.trigger.io/en/v1.4/release-notes.html#v1-4-6](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-6)

**上一个答案：**

不幸的是，我认为这里的错误消息不是很好，并且反映了启动节点应用程序的一般问题。

我们知道在 Node 0.8 之后开始出现的一个依赖问题。你能检查一下你有什么节点版本：

```
node --version 
```

如果它是 0.8，则此问题的临时解决方法是使用命令行工具，并且：

```
forge build 
```

然后手动更新 development/web/package.json 引用 express 2.5.10，然后

```
forge run web 
```

很抱歉给您带来麻烦，我们会在修复后在这里报告

# python - Notepad++ 找不到文件路径

> ID：11600896
> 
> 赞同：4
> 
> 时间：2012-07-22T14:00:46.350
> 
> 标签：python, notepad++

我正在尝试使用 NppExec 插件在 Notepad++ 中编写的 Python 中运行 Hello World 程序，但我没有打印，而是得到

```
python C:\Users\Sam\Desktop\Test.py
CreateProcess() failed with error code 2:
The system cannot find the file specified. 
```

我给 NppExec 的论点是

```
python C:\Users\Sam\Desktop\Test.py 
```

当我将完整的文件路径复制到剪贴板时，这是 NP++ 给我的文件路径。

我必须设置一些 NP++ 配置才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T14:46:44.247

我尝试了您尝试做的事情，这就是我解决它的方法：

我没有通过你给出的论点，而是通过了这个：

```
C:\Python32\python.exe C:\Users\Sam\Desktop\Test.py for python 3+
C:\Python27\python.exe C:\Users\Sam\Desktop\Test.py for python 2 
```

通常，为了使其工作，您必须定义安装 python 可执行文件的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T04:22:28.753

通常，您可以将以下内容用作 NppExec 的参数，用于 Notepad++ 中当前打开的任何 Python 脚本：

```
 [Your Python install folder here]\python.exe "$(FULL_CURRENT_PATH)" 
```

请注意，“FULL_CURRENT_PATH”是 Notepad++ 内部变量，而不是文件实际路径和文件名的占位符，因此无论您当前脚本的文件名如何，上述参数都应该无需编辑即可工作。

将 NppExec 与其他源代码一起使用的进一步参考：http: [//sourceforge.net/apps/mediawiki/notepad-plus/index.php ?title=Compiling_Source_Code](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Compiling_Source_Code)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T14:46:03.220

这是在notepad++中运行python程序的另一种方法，我在找不到合适的插件后推荐。

创建一个名为 pythonXX.bat 的批处理文件（其中 XX 是您正在使用的 python 的当前版本）并将其与 python.exe 一起保存在 C:\PythonXX\

并将此文本插入到该批处理文件中：

```
@ECHO OFF
C:\PythonXX\python.exe "%1"
PAUSE
@ECHO ON 
```

然后在记事本++中创建一个运行命令：

C:\PythonXX\pythonXX.bat "$(FULL_CURRENT_PATH)"

然后单击保存运行并将其分配给键盘快捷键，很好：）

# php - 我公司用于 php 索引站点的标准代码。好代码？

> ID：11600897
> 
> 赞同：-1
> 
> 时间：2012-07-22T14:01:20.290
> 
> 标签：php, optimization

所以我想知道代码（见下文）是否可以称为“好的 php 代码”。它在我工作的地方使用，我正在尝试想出一个更好的解决方案来编写这个模板。

$requestedPage 变量被使用了两次，第一次在 if 中，然后在 switch 语句中，我不知道为什么，但我认为应该有更好的可能性。

内容通过 require_once 语句加载，该语句将加载包含 html 模板的 head.php 和 foot.php 包围的页面内容。

```
<?php
    header("Content-Type: text/html; charset=utf-8");
    filter_var_array($_POST, FILTER_SANITIZE_STRING);

    require_once 'lib/rb.php';

    require_once 'head.php';

    $requestedPage = $_POST['page'];

    if(isset($requestedPage)) {
        switch ($requestedPage) {
            case 'list':
                require_once 'page/list.php';
                break;
            default:
                require_once 'page/home.php';
                break;
        }
    } else {
        require_once 'page/home.php';
    }

    require_once 'foot.php';
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T14:05:32.520

您可以删除两次检查。如果未设置参数，它会自动进入 switch 语句的**默认**情况。

所以，你的代码可以是

```
$requestedPage = $_POST['page'];
switch ($requestedPage) {
        case 'list':
            require_once 'page/list.php';
            break;
        default:
            require_once 'page/home.php';
            break;
}
require_once 'foot.php'; 
```

**编辑**：正如@mario 在评论中建议的那样`$requestedPage = $_POST['page'];`，当有相关通知并且您已将其抑制时，抑制执行时显示的 E_NOTICE 将来可能会出现问题。因此，您应该**仅**在生产代码中抑制通知，或者`$_POST['page']`在语句中检查是否在访问其值之前设置了通知

`$requestedPage = $_POST['page'];`

# objective-c - 在 iOS 中以编程方式初始化 IB 控件

> ID：11600898
> 
> 赞同：-2
> 
> 时间：2012-07-22T14:01:26.490
> 
> 标签：objective-c, ios, interface-builder

我有一个简单的应用程序，我想加载 UI 元素的初始设置。但我不想让 IBOutlet 每一个都去。有没有办法以编程方式解决它们并设置它们的值。例如：

```
if (user hasn't created a default){
   // load the default settings
   button1 = 12;
   label.text = text;
   etc...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:58:00.397

的全部目的`IBOutlet`是让您可以通过编程方式设置和获取它们的值，所以我不太明白您为什么不使用`IBOutlet`. 通常，当您在 Interface Builder 中创建时，您将 IBOutlets 用于您需要以编程方式与之交互的任何内容。（显然，当以编程方式创建它们时，您不需要 IBOutlet。）

但是，如果您*真的*想在 Interface Builder 中添加控件而不使用 IBOutlets，您可以`tag`在“视图”设置下的属性检查器中设置具有唯一值的数字属性。然后，您可以以编程方式从您的视图控制器中检索该引用的`[self.view viewWithTag:tagNumber];`. 这更尴尬，效率更低，所以我真的鼓励你使用`IBOutlet`. 有什么令人信服的理由不这样做吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:28:19.887

对于 UIButtons 是

```
[button addTarget:self action:@selector(signatureOfYourMethod) forControlEvents:UIControlEventTouchUpInside]; 
```

# ios5 - 在 iOS 上同时更新 UI

> ID：11600901
> 
> 赞同：0
> 
> 时间：2012-07-22T14:02:06.723
> 
> 标签：ios5, user-interface, concurrency, uiscrollview, uibutton

我的应用中有两个滚动视图，一个包含 UIImageViews，一个包含 UIButtons。使用 NSTimer，我让它们自动滚动。但是，如果其中一个滚动视图被篡改（手指触摸它并开始手动滚动），另一个滚动视图也会停止。有没有办法阻止这种情况发生？还是正常？

此外，第二个滚动视图中的 UIButtons 是可点击的，但它们不显示标准突出显示。如果我启用发光效果，它可以工作，但不是标准的突出显示。无论如何我也可以完成这项工作吗？

我的 NSTimer 代码是

```
[NSTimer scheduledTimerWithTimeInterval:0.018 
                                 target:self 
                               selector:@selector(onTimerScrollText) 
                               userInfo:nil 
                                repeats:YES];

- (void)onTimerScrollText {
    CGFloat x = self.textScroller.contentOffset.x;

    x += 0.5;

    [self.textScroller setContentOffset:CGPointMake(x, 0)];
} 
```

图像滚动条几乎相同。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:37:25.950

一个滚动视图在另一个手动滚动完成之前不再滚动的初始问题已得到解决。

解决方案很简单。每个计时器都需要添加到运行循环中：

```
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

现在，无论一个人是否被手指打断，它们都可以工作。

# android - 活动中的中心窥视壁纸，无需拉伸

> ID：11600908
> 
> 赞同：1
> 
> 时间：2012-07-22T14:03:30.943
> 
> 标签：android, android-activity, background, wallpaper

我正在开发一种`home application`适合一个屏幕的替代方案。目前我有一个活动，它具有手机屏幕的高度和宽度，我尝试将默认壁纸设置为背景。

我使用此代码来执行此操作：

```
getWindow().setBackgroundDrawable(peekWallpaper()); 
```

问题是它会拉伸墙纸以使其适合一个屏幕，因此我的墙纸变得完全变平。

我找到了一种解决方法来避免这种情况，我扩展了可绘制类并覆盖了方法 setBounds 以避免拉伸。但是通过这样做，我只能看到壁纸的左上角。所以我想把它放在中心。

我怎样才能做到这一点 ？我做对了吗？

我在 WallpaperManager 类中看到了一些移动壁纸的方法：

```
setWallpaperOffsetSteps(float xStep, float yStep) 
```

和

```
setWallpaperOffsets (IBinder windowToken, float xOffset, float yOffset) 
```

但是我没有找到任何关于如何使用`IBinder`参数的代码示例，它对我的​​情况有用吗？

提前谢谢。

# php - 标头前后的其他非图像相关代码不再起作用

> ID：11600913
> 
> 赞同：0
> 
> 时间：2012-07-22T14:04:32.737
> 
> 标签：php, header, gd, jpeg

我正在尝试使用 header('Content-type: image/jpeg') 来编辑和显示 jpeg 照片，如下所示。

```
header('Content-type: image/jpeg') 
$filename = 'aaa.jpg';
 $im = imagecreatefromjpeg($filename); 
imagefilter($im, IMG_FILTER_CONTRAST,50);
imagejpeg($im);
imagedestroy($im); 
```

在同一个文件中，我还有其他简单的代码，例如 $abc = $_POST['abc']。在我放置标题之后，标题之前的代码和 image destroy($im) 之后的代码不再起作用。当我在标题前放置任何代码（例如 $_post['abc'] ）时，标题和代码都不起作用。在我包含标题和代码来操作和输出图像之前，所有代码都很好。这是我第一次使用 header('Content-type: image/jpeg') 并且尝试了这么久后我找不到答案。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:11:20.713

如果要输出 html 页面，请不要发送图像标题。但是，首先将转换后的图像输出到服务器上的文件，然后在 html 页面中添加`<img>`or `<a>`nchor 标记：

```
<html><body>
<?php
$output_dir = 'images';
if (!file_exists($output_dir)) {
    mkdir($output_dir, 0777);
}
$filename = 'aaa.jpg';
$filename2 = 'aaa2.jpg';
if (!file_exists($filename)) {
    echo 'Input image not exists!'; exit;
}
$im = imagecreatefromjpeg($filename);
imagefilter($im, IMG_FILTER_CONTRAST, 50);
imagejpeg($im, $output_dir.'/'.$filename2);
imagedestroy($im);

echo 'Original image:<br/><img src="'.$filename.'" /><br/>';
echo 'Transformed image:<br/><img src="'.$output_dir.'/'.$filename2.'" />';
?>
</body></html> 
```

该图像标头发送以防万一，您想将其作为独立图像输出。有关更多示例，请查看[php.net](http://www.php.net/manual/en/function.imagejpeg.php#refsect1-function.imagejpeg-examples)。

# sql - 我们可以通过哪种方式根据实时数据库中已传输记录的状态变化来更新我们的数据仓库？

> ID：11600914
> 
> 赞同：2
> 
> 时间：2012-07-22T14:04:34.627
> 
> 标签：sql, data-warehouse

我有一个电子商务网站，我想从它的关系数据库中创建一个数据仓库。考虑我的关系数据库中有一个付款表，每笔付款的状态都会在付款过程中发生变化（想象这些状态可能是：新建、处理中、成功、失败）。现在我想在我的仓库中有一个 PaymentFactTable，以便其中的每条记录都代表“在特定时间具有特定状态的所有付款”，然后在每个记录上我都有一些事实，例如总支付金额或总网关利息。但是我的问题出现了。想象一下，我的 ETL 服务已将一小时的付款转移并分组到我的仓库，但这些付款会在下一小时内改变它们的状态，所以......我该怎么办？以及我应该如何更新仓库中的付款组，一个问题是我没有' 在仓库中没有任何线索可以找到并更新更改付款的组。另一个问题是如何通知仓库这些状态变化以更新其数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:09:07.340

您正在此处跟踪流程。在维度数据模型中，Ralph Kimball 建议您应该使用所谓的“累积快照”事实表来执行此操作。

本质上，这是表格的示例：

```
PaymentAccFactID        Int
PaymentNaturalKey       Int (the "natural identifier" of a transaction)
CustomerDim             Int
PaymentTypeDim          Int 
... additional dims as needed ...
NewStatusTS             Timestamp (ansi timestamp)
NewStatusHourDim        Int
NewStatusFlag           SmallInt
ProcessingStatusTS      Timestamp 
ProcessingStatusHourDim Int
ProcessingStatusFlag    SmallInt
SucceededStatusTS       Timestamp
SucceededStatusHourDim  Int
SucceededStatusFlag     SmallInt
FailedStatusTS          Timestamp
FailedStatusHourDim     Int
FailedStatusFlag        SmallInt 
```

每次拉取 ETL 时，拉取自上次拉取后发生变化的所有记录，并相应地修改状态。这些`HourDim`字段将连接到您的 Day by Hour 维度 - 或者您可以创建第二组字段以连接到每个状态的 Day（日期）维度，而第一个字段仅指向您的 Time of Day 维度。

随着付款流经从新建到处理到成功/失败的流程，您将更新累积快照上的行以反映这一点。我包含这些`Flag`列是为了便于总结某些时间在某些状态下的付款。如果您也想适应它，您还可以添加一个`CurrentStatusDim`字段以连接到您的状态维度。如果您的 ETL 检测到您在接下来的一小时内从“新”移动到“成功/失败”，那么您知道它也在该小时内移动到“处理中”，但如果您不跟踪付款事件，您将不会能够知道它发生的具体时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:23:42.473

我遇到过你的情况。这是我所做的，效果非常好：

我们决定在午夜“关闭书籍”当天，所有东西都按原样送到仓库。当天完成的任何事情都在仓库完成，并且从未在那里改变过。如果稍后发生退款或类似情况，这将被视为仓库的新交易。

这对会计部门很有效，因为这意味着永远不会“改写历史”，这是他们讨厌的。这对 IT 人员来说也很简单，因为我们每天只需要处理数据，而不必更新仓库数据（我们只需要每天插入）。

如果每天对您来说太粗略了，您可以改为使用每小时来执行此操作，但您可能会发现大多数企业都对每天感到满意。

如果数据量太大而无法每天处理，您可以预处理那些您知道在当天结束*前*一天完成的交易（我们必须对午夜后的一些特别大量的交易执行此操作时间紧迫的报告要求）

# php - php读取网页内容

> ID：11600916
> 
> 赞同：0
> 
> 时间：2012-07-22T14:04:49.217
> 
> 标签：php

我想为推送通知（ios）创建一个服务器。该服务器每 1 分钟读取一次网页的内容并检查匹配结果的更改，如果发现更改，则向苹果推送通知服务器（apns）发送警报俱乐部的名称。

示例有人可以检查此[链接](http://www.goalzz.com/main.aspx?region=-1&area=6) 并告诉我这是否可能。对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:15:59.737

有可能的。

您所做的任何解决方案都将仅针对**该页面**。没有通用的解决方案。此外，如果有一天页面布局发生变化，您将不得不重写整个代码。

编写代码来检查没有（内容或布局）保证的页面内容是有风险的。

# android - 无法理解 actionbarsherlock 选项卡/片段/活动

> ID：11600921
> 
> 赞同：2
> 
> 时间：2012-07-22T14:05:18.680
> 
> 标签：android, android-activity, fragment, actionbarsherlock

我相信我有一个非常简单的用例，但在理解基本原理时遇到了问题。我是 Fragments 的新手，我只觉得我必须深入研究它们，因为很遗憾 Tabs 已被弃用。

我想要实现的只是一个选项卡式布局，过去我每个选项卡都有一个活动。

我正在浏览 ActionBarSherlock 附带的示例，并且有些困惑，我希望他们完成了选项卡导航，以便他们真正链接到活动，而不仅仅是在内容窗格中设置文本。我认为这会让事情变得更容易很多人都懂。。

我开始了我的“主要”活动扩展了 SherlockFragmentActivity 并实现了 TabListener.. 发现这是毫无意义的，因为他们建议我使用 Fragments，所以参考 Fragment 示例，然后我查看了 FragmentTabs 示例，它没有实现 TabListener 但相反，它有自己的内部类来管理选项卡。

不幸的是，演示示例中的选项卡看起来比 FragmentTabs 示例中的选项卡要好得多。与我们在 Android 中看到的更现代的 ActionBar 选项卡相比，片段选项卡示例看起来像我们在 Android 中看到的选项卡“演示”示例。

所以我想要完成的是混合这两个示例，这样我就有了漂亮的现代外观操作栏选​​项卡，但也了解如何在单击时加载新活动。

在这里的任何帮助将不胜感激，我开始真的想把头撞到墙上。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:45:12.027

> 我是 Fragments 的新手，我只觉得我必须深入研究它们，因为很遗憾 Tabs 已被弃用。

标签不被弃用。在选项卡中使用活动已被弃用，形式为弃用`ActivityGroup`（即，将活动放在活动中）。当然欢迎您在`TabHost`不将活动放在选项卡中的情况下使用。

> 我希望他们完成了标签导航，以便他们真正链接到活动

那是因为不推荐将活动放在活动中。

> 所以我想要完成的是混合这两个示例，这样我就有了漂亮的现代外观操作栏选​​项卡，但也了解如何在单击时加载新活动。

不要将活动放在标签中。[对选项卡的内容使用片段，](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)或者在[单击选项卡时修改您的 UI](https://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/TabFragmentDemo)。

# xml - xml文档中的XMLNS URL是什么意思

> ID：11600924
> 
> 赞同：7
> 
> 时间：2012-07-22T14:05:31.363
> 
> 标签：xml, xslt, xml-parsing, xsd

我想知道，xml文档中的xmlns url有什么真正的含义吗？

我参考了[链接](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog)。现在，当我将其更改`xmlns:xsl="http://www.w3.org/1999/XSL/Transform"` 为其他内容时，它停止了工作。w3c 说命名空间名称（或 URL）只是为了区分 xml 标签。而不是为什么更改网址后它不起作用。

所以我想，可能与那个 URL 有关，所以尝试本地化（没有互联网）.. 见下面的例子..

XML 文档。（第一个.xml）

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="first.xsl"?>
<!-- Edited by XMLSpy® -->
<catalog>
    <cd>
        <title>Unchain my heart</title>
        <artist>Joe Cocker</artist>
        <country>USA</country>
        <company>EMI</company>
        <price>8.20</price>
        <year>1987</year>
    </cd>
     <cd>
        <title>Pavarotti Gala Concert</title>
        <artist>Luciano Pavarotti</artist>
        <country>UK</country>
        <company>DECCA</company>
        <price>9.90</price>
        <year>1991</year>
    </cd>
    <cd>
        <title>The dock of the bay</title>
        <artist>Otis Redding</artist>
        <country>USA</country>
        <company>Atlantic</company>
        <price>7.90</price>
        <year>1987</year>
    </cd>
</catalog> 
```

XSLT 文档 (first.xsl)

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <xsl:for-each select="catalog/cd">
      <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="artist"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

所以，它在本地工作正常。但是如果我更改`xmlns:xsl="http://www.w3.org/1999/XSL/Transform"`为其他类似的东西，`xmlns:xsl="http://www.abc.com"`它会给我在浏览器中的错误。

```
Error loading stylesheet: Parsing an XSLT stylesheet failed. 
```

所以，唯一的问题是，这个 URL 在 xmlns 中是否有任何真正的含义。如果是的话，它比为什么它在没有互联网的情况下工作而不是通过更改 xsl 中的 url 来工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T17:41:25.487

它不是 URL，而是 URI。也就是说，它是一个标识符（一个名称），而不是一个位置（一个地址）。

XML 中的命名空间就像 Java 中的包名。在不同的命名空间中定义了不同的词汇表，以防止冲突并声明对词汇表定义的所有权。与包名称一样，名称空间成为该名称空间中元素名称的隐含部分，因此`<para>`在 Docbook 名称空间`<para>`中与 DITA 名称空间中的名称无关。

James Clark 在这里写了一篇关于命名空间的好教程：http: [//www.jclark.com/xml/xmlns.htm](http://www.jclark.com/xml/xmlns.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:59:57.820

> xmlns 中这个 URL 有什么真正的含义吗

**这是一个基本的 XML 问题——而不是 XSLT 问题。**

namespace-uri 用于识别特定的基于 XML 的语言——通过在同一个命名空间中拥有这个 labguage 的所有元素名称（使它们都具有相同的 namespace-uri）。

除此之外，命名空间 uri 没有其他用途。

因此，所有 XSLT 元素（和一些属性）都在`"http://www.w3.org/1999/XSL/Transform"`名称空间中，并且任何名称没有此名称空间 uri的元素*都不*是 XSLT 元素。

以下是更多示例：

*   XML 架构：`"http://www.w3.org/2001/XMLSchema"`

*   SVG：`"http://www.w3.org/2000/svg"`

*   XSL-FO：`http://www.w3.org/1999/XSL/Format`

*   XHTML：`"http://www.w3.org/1999/xhtml"`

*   XPath 2.0 和 XQuery 函数：`http://www.w3.org/2005/xpath-functions`

*   XLink：`"http://www.w3.org/1999/xlink"`

*   数学语言：`"http://www.w3.org/1998/Math/MathML"`

因此，通过将样式表中的 XSLT 命名空间 uri 修改为其他内容，您实际上是在说：以相关前缀（在您的情况下为“xsl”）为前缀的名称属于`"http://www.abc.com"`命名空间，而不是 XSLT 命名空间——因此它们不是 XSLT 元素。

然后，当然，当 XSLT 处理器发现它已经被输入了不是 XSLT 元素的元素时，XSLT 处理器就会抱怨这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:16:50.593

好吧，浏览器（分别是任何 XSLT 处理器）支持在 namespace 中带有 XSLT 元素的 XSLT 语言`http://www.w3.org/1999/XSL/Transform`。如果您使用`<?xml-stylesheet type="text/xsl" href="first.xsl"?>`链接到不是 XSLT 样式表的 XML 文档，那么浏览器（分别是 XSLT 处理器）当然不理解代码。在 XML 世界中，项目的限定名称由名称空间和本地名称组成，任何工具仅支持已知名称。如果您将 XHTML 作为 XML 提供给浏览器，那么您需要确保`http://www.w3.org/1999/xhtml`为 XHTML 元素使用 XHTML 名称空间，否则浏览器将无法识别您的元素，即使它们碰巧与 XHTML 元素具有相同的本地名称。XSLT 代码也是如此，要让浏览器将元素识别为 XSLT 元素，您需要正确的名称空间和正确的本地名称。

# c# - 如何在我的页面（aspx）中加载通过 dll 引用的用户控件（ascx）

> ID：11600927
> 
> 赞同：1
> 
> 时间：2012-07-22T14:05:42.683
> 
> 标签：c#, asp.net, user-controls

我在一个项目中有用户控件，我在另一个项目中添加了它的引用，该项目将有我的 aspx 页面。如何在我的页面中附加控件。我遇到过我们应该使用带有虚拟路径的负载控制方法。但我对虚拟路径一无所知。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:12:44.250

如果你想动态加载，那么你应该使用`LoadControl`

```
var c = this.LoadControl("~/AddressControl.ascx");
this.myPanel.Controls.Add(c); 
```

如果您不想动态加载它，那么您只需在标记中指定控件，而不是其他用户控件：

```
<AddressControl runat="server" ID="myControl" /> 
```

您的问题是您实际上需要在您的 Web 应用程序或虚拟目录下引用 ASCX 文件。

您必须将您的 ASCX 文件复制到您的应用程序，您可以通过配置构建后操作轻松完成该步骤

看看下面的文章，它详细描述了如何完成这个过程：

[http://webproject.scottgu.com/CSharp/UserControls/UserControls.aspx](http://webproject.scottgu.com/CSharp/UserControls/UserControls.aspx)

这就像一种解决方法，因为用户控件并非旨在跨项目共享，适合您情况的最佳控件称为服务器控件，它们就是为此目的而设计的

# ruby-on-rails - 何时在 Rails 中使用“has_many :through”关系？

> ID：11600928
> 
> 赞同：138
> 
> 时间：2012-07-22T14:05:43.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我试图了解`has_many :through`它是什么以及何时使用它（以及如何使用它）。但是，我不明白。我正在阅读Beginning Rails 3 并尝试使用谷歌搜索，但我无法理解。

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-07-22T14:44:41.113

假设你有这些模型：

```
Car
Engine
Piston 
```

汽车`has_one :engine`
发动机`belongs_to :car`
发动机`has_many :pistons`
活塞`belongs_to :engine`

汽车`has_many :pistons, through: :engine`
活塞`has_one :car, through: :engine`

本质上，您将模型关系委托给另一个模型，因此不必调用`car.engine.pistons`，您可以这样做`car.pistons`

* * *

## 回答 #2

> 赞同：190
> 
> 时间：2012-07-22T14:47:22.737

假设您有两个模型： `User`和`Group`.

如果您想让用户属于组，那么您可以执行以下操作：

```
class Group < ActiveRecord::Base
  has_many :users
end

class User < ActiveRecord::Base
  belongs_to :group
end 
```

如果您想跟踪关联的其他元数据怎么办？例如，用户何时加入群组，或者用户在群组中的角色是什么？

这是您将关联设置为第一类对象的地方：

```
class GroupMembership < ActiveRecord::Base
  belongs_to :user
  belongs_to :group

  # has attributes for date_joined and role
end 
```

这会引入一个新表，并从用户表中删除该`group_id`列。

这段代码的问题是您必须更新使用用户类的所有其他地方并更改它：

```
user.groups.first.name

# becomes

user.group_memberships.first.group.name 
```

这种类型的代码很糟糕，它让引入这样的更改很痛苦。

**`has_many :through`**给你两全其美：

```
class User < ActiveRecord::Base
  has_many :group_memberships
  has_many :groups, :through => :group_memberships  # Edit :needs to be plural same as the has_many relationship   
end 
```

现在您可以将其视为普通的`has_many`，但在需要时可以从关联模型中受益。

请注意，您也可以使用`has_one`.

**编辑：轻松将用户添加到组**

```
def add_group(group, role = "member")
  self.group_associations.build(:group => group, :role => role)
end 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-07-22T15:20:01.383

### ActiveRecord Join Tables

`has_many :through` and `has_and_belongs_to_many` relationships function through a *join table*, which is an intermediate table that represents the relationship between other tables. Unlike a JOIN query, data is actually stored in a table.

### Practical Differences

With `has_and_belongs_to_many`, you don't need a primary key, and you access the records through ActiveRecord relations rather than through an ActiveRecord model. You usually use HABTM when you want to link two models with a many-to-many relationship.

You use a `has_many :through` relationship when you want to interact with the join table as a Rails model, complete with primary keys and the ability to add custom columns to the joined data. The latter is particularly important for data that is relevant to the joined rows, but doesn't really belong to the related models--for example, storing a calculated value derived from the fields in the joined row.

### See Also

In [A Guide to Active Record Associations](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many), the recommendation reads:

> The simplest rule of thumb is that you should set up a has_many :through relationship if you need to work with the relationship model as an independent entity. If you don’t need to do anything with the relationship model, it may be simpler to set up a has_and_belongs_to_many relationship (though you’ll need to remember to create the joining table in the database).
> 
> You should use has_many :through if you need validations, callbacks, or extra attributes on the join model.

# java - 模式错误：悬空元字符

> ID：11600931
> 
> 赞同：1
> 
> 时间：2012-07-22T14:05:57.563
> 
> 标签：java, regex

我想建立一个模式来将逗号插入整数以使其看起来不错，就像`1234556`，在操作之后，它会像`1,234,556`，所以我使用以下代码：

```
public static void insertCommaFormly(int n)
    {
        String input = String.valueOf(n);
        String regex = "(?<=\\d)(?=(?:\\d{3},?)+$)";
        /*or we can use negative look-around*/
        regex = "(?<=\\d)(?=\\d{3}++\\b)";
        String replacement = ",";
        StringBuffer buffer = new StringBuffer();
        Pattern pattern = Pattern.compile(regex);
        Matcher matcher = pattern.matcher(input);

        logger.info("Target string is :" + input );
        logger.info("Use regex :" + regex);

        while(matcher.find())
        {
            matcher.appendReplacement(buffer, replacement);
            logger.info(String.format("Part : '%s'", buffer));
        }
        matcher.appendTail(buffer);

        logger.info("After replace , the string is like : " + buffer.toString());
    } 
```

但是，它给了我一个错误（`I don't know the reason!`）：

```
Dangling meta character '+' near index 16
(?<=\d)(?=\d{2}++\b)
                ^ 
```

但是如果我使用`(?<=\\d)(?=\\d{3}+\\b)`，编译器不会给我抱怨，但是，它会给我错误的结果`1234,556`（`I don't know why results in this ?`），如果我使用`(?<=\\d)(?=(?:\\d{3})+\\b)`，那将是正确的结果。

```
 So here are my two questions , please help me with these , thanks in advance! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:13:06.747

为什么不使用现成的 DecimalFormat 类来为您输入逗号？看到[这个问题](https://stackoverflow.com/questions/3672731/how-can-i-format-a-string-number-to-have-commas-and-round)

“悬空元字符”错误是因为“+”在正则表达式中具有特殊含义（前一个字符出现一次或多次），如果删除第二个“+”它应该是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:42:55.570

在`\d{3}++`中，the`{3}`是一个量词，正好表示三个，第一个`+`使量词具有所有格，这在语法上是有效的，但没有意义。但是第二个`+`根本没有意义。它不能用作量词或所有格修饰符，这就是您遇到该异常的原因。

您要做的是匹配一个后跟一些数字的位置，其中数字的数量是三的倍数 - 或者，就可以表示为正则表达式的术语而言，*一组或多组三位数*：

```
(?=(?:\d{3})+) 
```

如果您愿意，您可以添加一秒钟`+`以使其具有所有格`(?=(?:\d{3})++)`- 但它不会改变结果并且不会对性能产生明显影响。顺便说一句，您实际上不必使用`appendReplacement()`and`appendTail()`来完成这项工作：

```
return String.valueOf(n).replaceAll("(?<=\\d)(?=(?:\\d{3})+$)", ","); 
```

...工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:20:05.147

可以使用`DecimalFormat`该类：

```
 int i = 1234556;
    DecimalFormat df = new DecimalFormat("###,###");
    String result = df.format(i);
    System.out.println(result); 
```

# php - 使用 PHP 在后台调用网页

> ID：11600933
> 
> 赞同：2
> 
> 时间：2012-07-22T14:06:12.863
> 
> 标签：php, cgi, webpage

我正在尝试编写一个简单的 PHP 脚本来从服务器检索一些图像 - 总共有四个。但是，每次我得到一张新图片时，我都需要先调用一个网页，即`http://example.com/Set.cgi?Image=1`

我无法控制服务器上的内容 - 我只需要解决它。我已经读到可以使用 cURL，但我不确定我的共享主机（JustHost）是否支持它......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T14:41:08.697

您可以通过以下方式使用[Curl](http://php.net/manual/en/function.curl-setopt.php)。以下代码来自该页面上的示例。

```
<?php
// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://example.com/Set.cgi?Image=1");
curl_setopt($ch, CURLOPT_HEADER, false);

// grab URL and pass it to the browser
curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:23:14.897

1）即使您可以使用[http://php.net/dom](http://php.net/dom)获取网页并使用 DOM 获取它。但它仍然需要启用“allow_url_fopen”指令打开。

2）您可以使用`var_dump(ini_get("allow_url_fopen"))`它来查看它是否启用。您可能有权将基于目录的 php.ini 放在共享主机上。在这种情况下，您可以启用它。

3）您可以检查`phpinfo()`是否启用了 curl

4）您可以使用套接字来模拟 curl 使用[fsockopen](http://php.net/fsockopen)。

# c# - 图片上传时访问路径

> ID：11600940
> 
> 赞同：0
> 
> 时间：2012-07-22T14:06:58.967
> 
> 标签：c#, asp.net, file-upload

我正在尝试将图像上传到服务器。这是我的代码：

```
try
{
   fuImage.SaveAs(Server.MapPath("..\\App_Upload\\Product\\") + fileName);
}
catch (Exception exc)
{
   dvMessage.InnerHtml = WebUtil.CreateAlert(WebUtil.NotifyMessage.Warning,"İşlem Başarısız!", "Resim Dosyası eklerken hata oluştu. HATA:" + exc.Message);
   return;
} 
```

它在我的本地计算机上工作，但在服务器上，它返回`Access to the path 'D:\inetpub\karahanresim.com\test.karahanresim.com\App_Upload\Product\2012722165754.jpg' is denied.`

你知道对我有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:08:41.160

您必须为您的站点配置为在 IIS 中运行的帐户授予足够的权限，以便它可以写入此文件夹。

顺便说一句，我会像这样重写你的代码：

```
var productPath = Server.MapPath("~/App_Upload/Product");
fuImage.SaveAs(Path.Combine(productPath, fileName)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:12:21.177

记住 IIs 缓存权限。如果您更改服务器上的权限，则必须重置 II

```
 C:\> iisreset 
```

# c++ - 使用 STL 向量对齐分配

> ID：11600943
> 
> 赞同：4
> 
> 时间：2012-07-22T14:07:29.063
> 
> 标签：c++, memory-management, memory-alignment

我希望我的向量的存储对齐（比如 16 字节边界），所以我有这个分配器作为包装器`memalign()`，我想知道这是否是分配与 STL 向量一起使用的对齐内存的正确方法。

```
template <class T , int Alignment=16>
class AlignedAllocator
{
public:
...

    pointer allocate (size_type size, const_pointer *hint = 0) {
        return (pointer) memalign(Alignment, size*sizeof (T));
    };

    void deallocate (pointer p, size_type size) {
        free(p);
    };
...
} 
```

如果没有，是否有适用于 STL 容器的对齐分配器的任何可用实现？

*PS：我正在用 gcc 编译。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:01:52.117

函数 memalign(3) 已过时，请尝试改用[posix_memalign(3)](http://linux.die.net/man/3/posix_memalign)。除此之外，假设`...`您的代码中的 意味着包含其余所需的分配器元素，您的代码看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:15:24.953

这取决于向量实现，它可能会选择分配稍大的缓冲区并在您的数据前面添加一些会破坏对齐的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:23:07.483

看起来不错。但是您将在将此类代码移植到 BSD 和 Darwin 时遇到问题。手动编写分配函数要健壮得多。

只是新的足够大的块并返回对齐的指针。您还需要编写自定义释放函数

# iphone - 使用 UIPickerView 而不是 UITextView

> ID：11600945
> 
> 赞同：1
> 
> 时间：2012-07-22T14:07:32.847
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我确定这里的某个地方是解决方案，但我已经搜索了很长时间，但没有找到任何东西

所以我的设置：.h

```
IBOutlet UITextField *valueOne;
IBOutlet UITextField *valueTwo;
    IBOutlet UILabel *total; 

- (IBAction)Lange;
@property (nonatomic, retain) UITextField *valueOne;
@property (nonatomic, retain) UITextField *valueTwo; 
```

.m

```
- (IBAction)Lange{
    float f = arc4random_uniform(3) ;   
    float x = ([valueOne.text floatValue]-1.5)/1.5;
    float c = (5+[valueTwo.text floatValue])/2;
    float o = (x+c)/2+f;

    total.text = [[NSString alloc]initWithFormat:@"%.fcm", o]; 

} 
```

我的问题：我正在搜索代码/指南，向我展示如何使用pickerview，我的意思是： 1\. 用户在文本字段中输入 ValueOne。2\. 用户选择 4 个选项之一，即 ValueTwo（在 .m-> float c valueTwo.text 中应填写我要设置的 4 个变量之一）。那么我怎样才能得到带有预设变量的pickerview，而用户只需要选择它呢？

如果有任何不清楚的地方，请随时发表评论。

编辑：我希望隐藏键盘并显示pickerview，并且仅在单击文本字段 valueTwo 时才会显示pickerview。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:35:16.227

绝对是上面两个答案的组合。

首先，设置您的类以符合`UITextFieldDelegate`和`UIPickerViewDelegate`协议：

```
@interface MyViewController : UIViewController <UITextFieldDelegate,
    UIPickerViewDelegate, UIPickerViewDataSource>
...
@end 
```

接下来，为您的项目数组和选择器视图声明属性。
然后您可以在代码中（或在 Nib 中）创建您的选择器视图。无论哪种情况，请确保将选取器的`delegate`和`datasource`属性设置为视图控制器。

设置`delegate`要修改的文本字段的属性，`self`然后实现此方法：

```
- (void)textFieldShouldBeginEditing:(UITextField *)textfield {
  [self presentPicker];
  return NO;
} 
```

*给@DavidH 的小费*

您可以像这样定义选择器方法：

```
- (void)presentPicker {
  UIPickerView *picker = [[UIPickerView alloc] initWithFrame:SOME_FRAME_HERE];
  picker.delegate = self;
  picker.dataSource = self;

  // TODO: animate this on screen
  [self.view addSubview picker];
} 
```

最后，您必须在这些协议中实现必要的方法：

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
  return self.items.count;  //where items is your array of items
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row inComponent:(NSInteger)component {
  return [self.items objectAtIndex:row];
} 
```

查看`UIPickerViewDelegate`协议的方法，了解您将如何响应用户选择并关闭选择器。

*作为一个无耻的自我推销，我最近在[NSScreencast](http://nsscreencast.com)上发布了一个关于[如何构建自定义选择器视图组件](http://nsscreencast.com/episodes/25-building-a-custom-picker-component)的插曲，其中包括将其后面的视图变暗，在屏幕上和屏幕外对其进行动画处理，以及为完成和取消按钮添加工具栏。* 我在这里只提到这一点，因为它与你想要做的事情直接相关。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:20:32.293

这非常简单——您应该有一个 ivar 数组，其中包含您将加载到 pickerview 的所有元素。一旦您从用户那里获得了新的输入，您就可以更新数组。当用户通过以下方法启动选择器视图时，数组将自动加载：

```
- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component      
 {
return [array objectAtIndex:row];
 } 
```

这个根据新数组更新行数：

```
 - (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component 
{

 return [array count];
 } 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:21:34.187

您将使用 UITextFieldDelegate 调用“textFieldShouldBeginEditing：”并为您要使用选择器的那个返回 NO。当您收到该消息并准备发送“否”时，您将对选择器进行动画处理。当用户选择一个值时，您将在相关的 textField 上设置该值，并关闭选择器。

# c# - C# 类库集合 ObservableCollection 与收藏

> ID：11600952
> 
> 赞同：8
> 
> 时间：2012-07-22T14:08:18.547
> 
> 标签：c#, .net, wpf, silverlight

我正在创建一个类库，可以在多种情况下使用 ASP.NET、控制台应用程序、其他类库和 XAML 目标，如 Silverlight 或 WPF。

最初，我决定将集合公开为 IList。但是当使用 XAML 编写示例时，我发现如果我想轻松绑定到这些集合，我需要使用 ObservableCollection。

我有哪些选择？

我可以让库公开 ObservableCollection 并将其强加给与 XAML 无关的用户。那是一件坏事？

我可以使我的类通用，允许调用者指定他们想要的集合类型，只要它实现 ICollection 可能默认为 Collection

我可以创建一组类，一个使用 ObservableCollection，一个不使用 Foo 和 ObservableFoo。

我可以在我的班级中实现 INotifyCollectionChanged，但是当 ObservableCollection 为我做这件事时，这似乎很愚蠢。

显然，我试图保持代码简洁明了，但支持数据绑定似乎很重要。

有什么建议么？

编辑：尝试使用两种替代方法创建可移植类库项目。

在班级 Foo 我有

```
 private readonly Collection<string> strings = new Collection<string>();

    public ReadOnlyCollection<string> Strings
    {
        get
        {
            return new ReadOnlyCollection<string>(this.strings);
        }
    } 
```

在课堂上 ObservableFoo 我有

```
 private readonly ObservableCollection<string> strings = new ObservableCollection<string>();

    public ReadOnlyObservableCollection<string> Strings
    {
        get
        {
            return new ReadOnlyObservableCollection<string>(this.strings);
        }
    } 
```

非常简单的单元测试代码是

```
 [TestMethod]
    public void TestMethod1()
    {
        var foo = new ObservableFoo(); // or new Foo()

        Assert.AreNotEqual(0, foo.Id);
        Assert.AreNotEqual(0, foo.Strings.Count);
    } 
```

唯一的缺点是当我使用 ReadOnlyObservableCollection 时，测试项目得到了这个编译错误

> 类型“System.Collections.ObjectModel.ReadOnlyObservableCollection`1”在未引用的程序集中定义。您必须添加对程序集 'System.Windows, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e, Retargetable=Yes' 的引用

所以在这种情况下，使用 ReadOnlyObservableCollection 会强制用户添加对 System.Windows 的引用，这是一个缺点。

**编辑：我想出了一个我在博客上发布的解决方案 - 请参阅[如何同时使库可移植和数据绑定友好？](http://blogs.msdn.com/b/rjacobs/archive/2012/07/22/how-to-make-a-library-portable-and-data-binding-friendly-at-the-same-time.aspx)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:14:44.170

这得看情况。如果你正在编写一个纯模型库，那么暴露 WPF 特定的接口是没有意义的；这将强制用户链接到 WPF 库，即使他们不需要。即使不是，它也会暴露出用户不需要的东西，恕我直言，这不是一个好的设计。

如果您的库不限于模型使用，我会将其分为几个部分：所有使用场景所需的核心、具有 WPF 特定接口的 WPF 依赖部分、可能具有 ASP 特定功能的 ASP 特定部分等等。用户将选择他们需要的部件并使用它们。

* * *

编辑：正如@Julien 的评论所述，`ObservableCollection<T>`现在是核心的一部分，因此包含它不会使用户依赖于特定于 WPF 的库。然而，这个想法保持不变。对于 WPF 的使用，您通常需要提供/使用特定功能（`ObservableCollection`、`INotifyPropertyChanged`/ `DependencyObject`、依赖属性、仅 UI 线程中的通知等）。这意味着它们属于项目的一个单独的、特定于 WPF 的部分。

因此，您可以使库由几个部分组成：Library.Core.dll 包含通用/模型开发所需的函数，Library.WPF.dll 处理 WPF 特定的东西并使用 Library.Core.dll，也许是 Library.Console.dll和 Library.ASP.dll 也是如此。WPF的用户会用到Library.Core.dll和Library.WPF.dll，控制台程序可能需要Library.Core.dll和Library.Console.dll等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T14:17:14.650

我认为你的库的低级组件应该提供对这些组件有意义的接口，在那个特定的抽象级别，而不考虑你的 API 的各种消费者可能需要如何调整它们以供自己使用。

例如，如果一个复合 WPF 应用程序将使用您的组件，那么这些应用程序将您的组件封装到一个模型或视图模型中是完全合适的，该模型或视图模型将您的组件提供的`IList<T>`（或者更好的是）调整为适合绑定到一个看法。`IEnumerable<T>``ObservableCollection<T>`

控制台应用程序可能不需要这样的开销，并且可以愉快地使用`IEnumerable<T>`.

顺便说一句，即使将集合公开为`IList<T>`. 例如，这允许您的图书馆的消费者在列表中添加和删除项目，这可能不符合界面的精神。

# android - 包和命名约定

> ID：11600967
> 
> 赞同：1
> 
> 时间：2012-07-22T14:10:41.417
> 
> 标签：android

我有一个用于手机和平板电脑元素的类结构：ProfileFragment(handset) 和 ProfileFragment(tablet) 派生自 ProfileFragment(abstract)。包去像：

*   碎片
*   片段.手机
*   片段.tablet

我不确定我是否正确处理了那些可能具有误导性的重复类名。你会推荐什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:16:01.537

您应该始终避免将多个类（它们的实现不同）命名相同。即使您可以（使用不同的软件包）。

您可以将您的设备类型放在类名中。例如

*   `AbstractProfileFragment`
*   `TabletProfileFragment`
*   `HandsetProfileFragment`

这些类可以（并且应该）仍然被分成多个包。

# yii - Yii 如何渲染索引而不是 application.modules.modulename.views.modulename.index

> ID：11600972
> 
> 赞同：1
> 
> 时间：2012-07-22T14:11:34.983
> 
> 标签：yii

怎么做

```
$this->render('index'); 
```

代替

```
$this->render('application.modules.modulename.views.modulename.index'); 
```

在模块的控制器中？尝试谷歌搜索和

```
$this->setbasePath('application.modules.modulename') 
```

在 ModulenameModule 但无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T15:08:51.127

代替

```
$this->render('application.modules.modulename.views.modulename.index'); 
```

您可以使用

```
$this->render('/index'); 
```

主应用程序视图根`//`用一个斜杠引用，并在模块内引用`/`。

# cakephp - CakePHP：在公共页面上显示数据库

> ID：11600975
> 
> 赞同：0
> 
> 时间：2012-07-22T14:12:18.980
> 
> 标签：cakephp, view, controller

所以我有一个管理面板，现在我正在尝试创建一个公共页面，该页面将显示“类别”并附带一个过滤器，显示它们下的“产品”。这是在我的 CategoriesController

```
 public function main(){

            $this->set('categories',$this->Category->find('all')); 
```

这是我在视图中的 main.ctp

```
<table>
<h1>Categories</h1>
<tr>
<th>name</th><th>Products</th>
</tr>
<? foreach($Categories as $row): ?>
<tr><td>
<?=$row['Category']['name']?>

</td><td>
<a href="../todo/products/filter/<?=$row['Category']['id']?>">Products</a>
</td></tr>

<? endforeach; ?>
<a href="http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/Categories/add/"> Add a Category</a> 
```

有谁看到我在这里做错了什么？我在 foreach 上不断收到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:17:16.180

尝试以与声明变量相同的区分大小写的方式使用变量。

我会给你一个提示：类别！==类别

# sql - 使用 SQL Join 访问第二个表数据

> ID：11600982
> 
> 赞同：1
> 
> 时间：2012-07-22T14:13:01.833
> 
> 标签：sql, join

我有两张桌子，`Members`和`GroupMembers`。我 FullName from`Members`和`MemberID`from `GroupMembers`，但我不知道如何修改这个查询来实现：

```
SELECT FullName
FROM Members
INNER JOIN GroupMembers ON Members.ID=GroupMembers.MemberID
WHERE GroupMembers.GroupID = 'foo' 
```

它给了，`Members.FullName`但我也需要`GroupMembers.ID``Members.ID=GroupMembers.MemberID`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:15:07.977

只需将第二列添加到您的`SELECT`声明中：

```
SELECT 
    m.FullName, gm.ID
FROM 
    Members m
INNER JOIN 
    GroupMembers gm ON m.ID = gm.MemberID
WHERE 
    gm.GroupID = 'foo' 
```

在两个表之间创建此连接后，如果需要，可以选择两个表中的所有列。

我还选择在此语句中使用**表别名**`SELECT`——虽然它不是必需的，但我相信它会使事情变得更易读和更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:15:39.190

```
SELECT Members.FullName, GroupMembers.ID
FROM Members
INNER JOIN GroupMembers ON Members.ID=GroupMembers.MemberID
WHERE GroupMembers.GroupID = 'foo' 
```

# django - 使用南迁移 Django 应用程序在列上留下默认值

> ID：11600985
> 
> 赞同：1
> 
> 时间：2012-07-22T14:13:08.980
> 
> 标签：django, django-south

我在模型中添加了一个新字段来跟踪用户的各个对象。

然后我使用 south 生成了一个迁移，它要求我为此迁移提供一个默认值，因为用户字段没有默认值。我输入 1 作为用户的 ID。我使用 sqlite 作为数据库后端进行开发。现在，当我打开一个 sqlite shell 并查看 db 模式时，默认值仍然存在：

```
CREATE TABLE "base_category" ("user_id" integer NOT NULL DEFAULT 1,
                              "id" integer PRIMARY KEY,
                              "name" varchar(80) NOT NULL); 
```

但是在迁移文件中它看起来像这样：

```
# Adding field 'TimeSlot.user'
db.add_column('base_timeslot', 'user',
                  self.gf('django.db.models.fields.related.ForeignKey')
                  (default=1, to=orm['auth.User']),
                  keep_default=False) 
```

如果我正确理解了[南文档](http://south.readthedocs.org/en/latest/databaseapi.html#db-add-column)，它不应该在那里：

> 如果`keep_default`为 True，则在该字段上指定的任何默认值都将永久添加到该列的数据库架构中。如果不是，则仅在添加列时使用默认值，然后删除。

在关于 SO 的其他问题中，有人指出，默认值不是在 db 级别上处理，而是在 python 中处理。

*最后我的问题：*

1.  由于我不再需要它，我是否必须为仍在我的数据库中的默认值而烦恼？
2.  这可能是 sqlite 的问题，因为我无法找到如何使用 SQL 提示手动删除默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:55:41.473

它不被认为是一个错误，但现在是；South 0.7.7（在我写这篇文章时即将发布）应该修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:22:14.470

1.  不用担心，`DEFAULT 1`数据库中的 只指定如果在表中创建新实例，该字段默认填充为 1，但可以更改此值。什么 `keep_default`是禁止编辑该值，例如，一个新字段将默认值为 1，您无法更改该值。这不是你的情况。您将在新实例上获得默认值 1，但您将能够编辑该值。

2.  连续点 num 1 - 无需删除该值，因为`DEFAULT 1`它是字段新实例的默认值的正确表示。

# c++ - C++ 内存泄漏检查中的 Valgrind 错误

> ID：11600986
> 
> 赞同：2
> 
> 时间：2012-07-22T14:13:25.433
> 
> 标签：c++, valgrind, memcheck

我试图弄清楚 Valgrind 的用法，所以我做了一个简单的程序，但是当我在课堂上进行动态内存分配时，Valgrind 似乎给出了一个奇怪的错误。

我的程序是：

```
class Valgrind_testclass
{
 Valgrind_testclass *Obj;
public:
  Valgrind_testclass() { 
    // Obj = new Valgrind_testclass();  // Test point #3
  }
  ~Valgrind_testclass() {
    //delete Obj;               // Test point #4
  }
};

int main()
{
 Valgrind_testclass valObj;
 // Valgrind_testclass * valObjPtr = new Valgrind_testclass();  // Test point #1
 //delete valObjPtr;                 // Test point #2
 return 0;
} 
```

带有注释掉的测试点 Valgrind 给了我以下信息：

```
==5273== HEAP SUMMARY:
==5273==     in use at exit: 0 bytes in 0 blocks
==5273==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated 
```

我想这是预期的结果。

现在，当我取消注释测试点 #1 时：

```
==5288== HEAP SUMMARY:
==5288==     in use at exit: 4 bytes in 1 blocks
==5288==   total heap usage: 1 allocs, 0 frees, 4 bytes allocated
==5288== 
==5288== Searching for pointers to 1 not-freed blocks
==5288== Checked 102,116 bytes
==5288== 
==5288== 4 bytes in 1 blocks are definitely lost in loss record 1 of 1 
```

这又是正确的结果，因为我没有执行删除。

在未注释测试点 #2 的情况下，我得到：

```
==5300== HEAP SUMMARY:
==5300==     in use at exit: 0 bytes in 0 blocks
==5300==   total heap usage: 1 allocs, 1 frees, 4 bytes allocated
==5300== 
==5300== All heap blocks were freed -- no leaks are possible 
```

再次正确的结果。

现在我取消注释测试点#3，我希望 Valgrind 能够检测到内存泄漏。这就是我得到的：

```
==5313== Process terminating with default action of signal 11 (SIGSEGV)
==5313==  Access not within mapped region at address 0xBE17AFE4
==5313==    at 0x40263A0: operator new(unsigned int) (vg_replace_malloc.c:255)
==5313==  If you believe this happened as a result of a stack
==5313==  overflow in your program's main thread (unlikely but
==5313==  possible), you can try to increase the size of the
==5313==  main thread stack using the --main-stacksize= flag.
==5313==  The main thread stack size used in this run was 8388608.
==5313== Stack overflow in thread 1: can't grow stack to 0xbe17afe0
==5313== 
==5313== Process terminating with default action of signal 11 (SIGSEGV)
==5313==  Access not within mapped region at address 0xBE17AFE0
==5313==    at 0x402040C: _vgnU_freeres (vg_preloaded.c:58)
==5313==  If you believe this happened as a result of a stack
==5313==  overflow in your program's main thread (unlikely but
==5313==  possible), you can try to increase the size of the
==5313==  main thread stack using the --main-stacksize= flag.
==5313==  The main thread stack size used in this run was 8388608.
==5313== 
==5313== HEAP SUMMARY:
==5313==     in use at exit: 1,047,576 bytes in 261,894 blocks
==5313==   total heap usage: 261,894 allocs, 0 frees, 1,047,576 bytes allocated
==5313== 
==5313== Searching for pointers to 261,894 not-freed blocks
==5313== Checked 5,339,952 bytes
==5313== 
==5313== LEAK SUMMARY:
==5313==    definitely lost: 0 bytes in 0 blocks
==5313==    indirectly lost: 0 bytes in 0 blocks
==5313==      possibly lost: 0 bytes in 0 blocks
==5313==    still reachable: 1,047,576 bytes in 261,894 blocks
==5313==         suppressed: 0 bytes in 0 blocks
==5313== Reachable blocks (those to which a pointer was found) are not shown.
==5313== To see them, rerun with: --leak-check=full --show-reachable=yes
==5313== 
==5313== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 17 from 6) 
```

我不确定为什么在这里没有看到类似的内存泄漏错误。有人可以帮助理解这种情况，无论我做错了什么。我使用的 Valgrind 命令是：

```
valgrind -v --tool=memcheck --leak-check=full --num-callers=40  ./ValgrindOutput 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T14:17:12.623

这是因为你有无限递归

**Valgrind_testclass**是新的**Valgrind_testclass**是新的**Valgrind_testclass** ...ad infinitum

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:16:42.980

程序没有正确结束。您正在查看的是堆栈溢出错误。

构造函数会`new Valgrind_testclass()`调用构造函数。无限递归！

# java - 这段代码会在 UI 线程中运行吗？

> ID：11600987
> 
> 赞同：0
> 
> 时间：2012-07-22T14:13:34.847
> 
> 标签：java, swing, swingworker

例如，我的 UI 线程执行了一个 SwingWorker 线程，称为 A。在 A 线程的 done() 函数中，它创建了一个 SwingWorker 线程 B。现在，线程 B 的 done() 函数中的代码在 UI 线程上运行还是线程 A？

有道理，代码应该在线程 A 上运行，但是如果我不在线程 A 中调用 get() 函数，线程 A 将不会等待线程 B，线程 A 可能会完成它的任务。如果线程 B 现在执行 done() 函数中的代码，则线程 A 不存在。那么在这种情况下如何处理代码呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:15:07.990

根据[SwingWorker API](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)文档，`SwingWorker#done()`在 Swing 事件调度线程 (EDT) 上运行。`done()`对于您上面提到的两种方法都是如此。您知道使用该方法可以轻松找出答案`SwingUtilities.isEventDispatchThread()`。

# java - 从安卓手机上传文件到FTP服务器？

> ID：11600988
> 
> 赞同：12
> 
> 时间：2012-07-22T14:13:34.407
> 
> 标签：java, android, ftp, apache-commons, apache-commons-net

以下是假设创建文本文档并将其上传到我的 FTP 服务器的代码。由于某种原因，它似乎不起作用。我习惯了提供的图书馆

[http://lavalatwork.blogspot.tw/2010/09/using-apache-commons-ftp-library-in.html](http://lavalatwork.blogspot.tw/2010/09/using-apache-commons-ftp-library-in.html)

用于与 FTP 服务器通信。

```
try
    {
        final String testString = new String("Hello");
        FileOutputStream fOut = openFileOutput("samplefile.txt",
                MODE_WORLD_READABLE);
        OutputStreamWriter osw = new OutputStreamWriter(fOut); 

        osw.write(testString);
        osw.flush();
        osw.close();
    }

    catch(IOException ex)
    {

    }

    FTPClient mFTP = new FTPClient();
    try {
        // Connect to FTP Server
        mFTP.connect("192.168.10.101");
        //mFTP.login("user", "password");
        mFTP.setFileType(FTP.BINARY_FILE_TYPE);
        mFTP.enterLocalPassiveMode();

        // Prepare file to be uploaded to FTP Server
        File file = new File(getFileStreamPath("samplefile.txt")+ "");
        FileInputStream ifile = new FileInputStream(file);

        // Upload file to FTP Server
        mFTP.storeFile("filetotranfer",ifile);
        mFTP.disconnect();          
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-22T14:18:07.067

看到这个......这将帮助您纠正代码中的问题。

我已经使用**apache 的公共库**向服务器上传和下载音频文件......看这个......

**上传：**

```
public void goforIt(){

        FTPClient con = null;

        try
        {
            con = new FTPClient();
            con.connect("192.168.2.57");

            if (con.login("Administrator", "KUjWbk"))
            {
                con.enterLocalPassiveMode(); // important!
                con.setFileType(FTP.BINARY_FILE_TYPE);
                String data = "/sdcard/vivekm4a.m4a";

                FileInputStream in = new FileInputStream(new File(data));
                boolean result = con.storeFile("/vivekm4a.m4a", in);
                in.close();
                if (result) Log.v("upload result", "succeeded");
                con.logout();
                con.disconnect();
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

    } 
```

**下载：**

```
public void goforIt(){
    FTPClient con = null;

    try
    {
        con = new FTPClient();
        con.connect("192.168.2.57");

        if (con.login("Administrator", "KUjWbk"))
        {
            con.enterLocalPassiveMode(); // important!
            con.setFileType(FTP.BINARY_FILE_TYPE);
            String data = "/sdcard/vivekm4a.m4a";

            OutputStream out = new FileOutputStream(new File(data));
            boolean result = con.retrieveFile("vivekm4a.m4a", out);
            out.close();
            if (result) Log.v("download result", "succeeded");
            con.logout();
            con.disconnect();
        }
    }
    catch (Exception e)
    {
        Log.v("download result","failed");
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-22T14:52:21.927

您可以使用 [Simple Java FTP Client](http://www.jibble.org/simpleftp/) 并将其添加为项目的外部 jar，也可以参考此[链接](http://www.javabeat.net/2007/10/file-upload-and-download-using-java/)

```
public class FileUpload
{

   /**
    * Upload a file to a FTP server. A FTP URL is generated with the
    * following syntax:
    * ftp://user:password@host:port/filePath;type=i.
    *
    * @param ftpServer , FTP server address (optional port ':portNumber').
    * @param user , Optional user name to login.
    * @param password , Optional password for user.
    * @param fileName , Destination file name on FTP server (with optional
    *            preceding relative path, e.g. "myDir/myFile.txt").
    * @param source , Source file to upload.
    * @throws MalformedURLException, IOException on error.
    */
   public void upload( String ftpServer, String user, String password,
         String fileName, File source ) throws MalformedURLException,
         IOException
   {
      if (ftpServer != null &amp;&amp; fileName != null &amp;&amp; source != null)
      {
         StringBuffer sb = new StringBuffer( "ftp://" );
         // check for authentication else assume its anonymous access.
         if (user != null &amp;&amp; password != null)
         {
            sb.append( user );
            sb.append( ':' );
            sb.append( password );
            sb.append( '@' );
         }
         sb.append( ftpServer );
         sb.append( '/' );
         sb.append( fileName );
         /*
          * type ==&gt; a=ASCII mode, i=image (binary) mode, d= file directory
          * listing
          */
         sb.append( ";type=i" );

         BufferedInputStream bis = null;
         BufferedOutputStream bos = null;
         try
         {
            URL url = new URL( sb.toString() );
            URLConnection urlc = url.openConnection();

            bos = new BufferedOutputStream( urlc.getOutputStream() );
            bis = new BufferedInputStream( new FileInputStream( source ) );

            int i;
            // read byte by byte until end of stream
            while ((i = bis.read()) != -1)
            {
               bos.write( i );
            }
         }
         finally
         {
            if (bis != null)
               try
               {
                  bis.close();
               }
               catch (IOException ioe)
               {
                  ioe.printStackTrace();
               }
            if (bos != null)
               try
               {
                  bos.close();
               }
               catch (IOException ioe)
               {
                  ioe.printStackTrace();
               }
         }
      }
      else
      {
         System.out.println( "Input not available." );
      }
   } 
```

你也可以使用[Apache commons-net-ftp](http://www.docjar.com/jar_detail/commons-net-ftp-2.0.jar.html)库，更多细节可以关注这个[链接](http://royvandewater.com/2010/10/uploading-a-file-to-ftp-with-android/)。

```
import org.apache.commons.net.ftp.FTPClient;

FTPClient ftpClient = new FTPClient();

try {
    ftpClient.connect(InetAddress.getByName(SERVER));
    ftpClient.login(USERNAME, PASSWORD);
    ftpClient.changeWorkingDirectory(PATH);

    if (ftpClient.getReplyString().contains("250")) {
        ftpClient.setFileType(org.apache.commons.net.ftp.FTP.BINARY_FILE_TYPE);
        BufferedInputStream buffIn = null;
        buffIn = new BufferedInputStream(new FileInputStream(FULL_PATH_TO_LOCAL_FILE));
        ftpClient.enterLocalPassiveMode();
        ProgressInputStream progressInput = new ProgressInputStream(buffIn, progressHandler);

        boolean result = ftpClient.storeFile(localAsset.getFileName(), progressInput);
        buffIn.close();
        ftpClient.logout();
        ftpClient.disconnect();
    }

} catch (SocketException e) {
    Log.e(SorensonApplication.TAG, e.getStackTrace().toString());
} catch (UnknownHostException e) {
    Log.e(SorensonApplication.TAG, e.getStackTrace().toString());
} catch (IOException e) {
    Log.e(SorensonApplication.TAG, e.getStackTrace().toString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-26T18:16:59.460

这是代码块：

```
private class UploadFile extends AsyncTask<String, Integer, Boolean> {

    @Override
    protected Boolean doInBackground(String... params) {
        FTPClient client = new FTPClient();
        try {
            client.connect(params[1], PORT);
            client.login(params[2], params[3]);
            client.setFileType(FTP.BINARY_FILE_TYPE, FTP.BINARY_FILE_TYPE);
            return client.storeFile(filename, new FileInputStream(new File(
                    params[0])));

        } catch (Exception e) {
            Log.d("FTP", e.toString());
            return false;
        }
    }

    @Override
    protected void onPostExecute(Boolean sucess) {
        if (sucess)
            Toast.makeText(activity, "File Sent", Toast.LENGTH_LONG).show();
        else
            Toast.makeText(activity, "Error", Toast.LENGTH_LONG).show();
    }

} 
```

请获取完整的工作项目，用于从以下驱动器将文件上传到 FTP 服务器。

文件上传到 FTP 使用 PORT 21，FTP 上传文件的必需参数。

主机名 用户名 密码

[https://drive.google.com/file/d/0B80LBJs3JkaDYUNfZ3pDSkVJUDA/edit](https://drive.google.com/file/d/0B80LBJs3JkaDYUNfZ3pDSkVJUDA/edit)

# ruby-on-rails-3 - 验证中的过程

> ID：11600992
> 
> 赞同：1
> 
> 时间：2012-07-22T14:14:00.620
> 
> 标签：ruby-on-rails-3

我正在完成我的新项目，其中 proc 用于我不理解的验证。谁能解释一下这里发生了什么？我的代码在模型中是这样的

```
before_validation :strip_whitespace, :if => proc{|datefield|datefield.export_date_format.present?}

def strip_whitespace
  self.export_date_format.strip!
end 
```

为什么我们在这里使用 proc，为什么我们不能检查 datefield.export_date_format.present？在 if 条件下直接调用 :strip_whitespace 方法？proc 到底在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:36:22.920

1.为什么不在方法中直接检查格式？也许将方法和调用该方法的过程保持为两个不同的参数是设计的一部分。而这里的 proc 是对象，这就是为什么可以将过程作为参数传递的原因，因为 proc 是[第一类对象](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Method_Calls#More_on_Procs)。

2.方便的是在原地定义过程然后定义方法然后只调用一次该方法。这就是其他语言中所谓的匿名函数。

3.有时它是定义只能是proc或lambda的过程的唯一方法。例如在[#108 named_scope](http://railscasts.com/episodes/108-named-scope) Ryan Bates 必须使用 lambda：

```
lambda {|*args| {:conditions => ["released_at > ?",(args.first || 2.weeks.ago)]}} 
```

因为表达式`2.weeks.ago`应该在调用这个 lambda 时计算，而不是在加载表达式时计算。

# jquery - 无法使用 jQuery 从 DOM 访问带有 document.ready 的元素？

> ID：11600994
> 
> 赞同：7
> 
> 时间：2012-07-22T14:14:08.100
> 
> 标签：jquery, dom, google-chrome-extension

我写了一个 Chrome 插件，我正在听这样的“DOM 就绪事件”：

```
$(document).ready(function () {
    //here I select some elements and remove them.
}); 
```

有时我无法得到我想要的元素，即使它们真的存在。但是当页面被加载时，我打开开发者工具并在控制台中运行相同的代码，它又可以工作了。

我很困惑为什么我在 DOM 准备好时无法获取元素，而我编写的代码是正确的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T11:04:37.317

听起来您正在寻找的元素是在 DOM 准备好后添加的。

尝试换掉你的文档。准备好下面的功能。

```
$(window).load(function() {
 // executes when complete page is fully loaded, including all frames, objects and images
 alert("window is loaded");
}); 
```

jQuery 提供了两种强大的方法来执行代码和附加事件处理程序：$(document).ready 和 $(window).load。当 HTML 文档被加载并且 DOM 准备就绪时，文档就绪事件已经执行，即使所有的图形还没有加载。如果您想在窗口加载之前为某些元素连接事件，那么 $(document).ready 是正确的地方。

窗口加载事件在整个页面完全加载后执行，包括所有框架、对象和图像。因此，涉及图像或其他页面内容的函数应放置在窗口或内容标签本身的加载事件中。

取自 [http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T14:16:17.403

如果 DOM 真的准备好了并且元素没有被其他代码稍后添加，它们*就会*在那里被找到。如果您没有找到它们，则表明您正在使用的选择器存在问题，或者表明它们是由其他代码添加的（而不是在标记中）。

# android - android：如何保留单击的列表项的按下/选择状态，直到按下列表中的其他项目

> ID：11600996
> 
> 赞同：0
> 
> 时间：2012-07-22T14:14:25.827
> 
> 标签：android, android-listview

我希望我的列表项保持其按下/选择状态，直到我按下列表上的其他项目。键入此内容时，我认为我希望它像 RadioButtons 一样工作，而没有圆形按钮。我尝试将列表项的选中/按下状态设置为 true，或者将其背景颜色设置为开启，`onListItemClick`但是当我这样做时，即使在单击其他项后，我的列表项仍保持单击状态。如何取消设置列表中先前单击的项目的背景颜色？或者有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:31:33.400

尝试这个

**第 1 步：**尝试使用 for loop in 将背景颜色（即您的原始背景颜色）重置为所有列表项`onItemClickListener()`。

**第2步**：为选定的一个设置不同的背景颜色。

如果您使用自定义列表视图，那么这将非常容易。

**编辑自定义列表视图教程**

**[自定义 ListView](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)和[这个](http://android-er.blogspot.co.uk/2010/06/custom-arrayadapter-with-with-different.html)**

视频 - [youtubeVideo](http://www.youtube.com/watch?v=LjAlNfa6obU)

希望能帮助到你

编辑

这就是我所做的：我遍历可见列表以将每个项目的背景设置为透明，将所选项目的背景设置为不同的颜色。这样，颜色会一直保持到我按下另一个项目。

protected void onListItemClick(ListView l, View v, int position, long id) { int childCount = l.getChildCount();

```
for (int i = 0; i < childCount; i++)
{
    View listItem = l.getChildAt(i);
    if(listItem != null )   listItem.setBackgroundColor(0x00000000);
}
v.setBackgroundColor(getResources().getColor(R.color.pressed));
... 
```

}

# titanium - 钛：如何更改文本颜色？黑底白字是错的

> ID：11600997
> 
> 赞同：0
> 
> 时间：2012-07-22T14:14:27.507
> 
> 标签：titanium

我刚刚下载了钛 gui，并打开了我的第一个项目。我正在运行 Windows 7。设计师选择了经典的“80 年代死亡金属地下室”主题。

如何更改它以使其成为黑色背景上的白色文本？由于这种书呆子核心风格，我假设大多数令牌不适用于白色背景 - 所以！是否有一些“配色方案”我可以更改为 - 说“日食默认”或“普通人”？这将减轻我必须将一大堆不同的令牌类型转换为在白色背景上工作的情况？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:05:19.880

开钛工作室。

去`window->preferences->titanium studio->Themes` 我喜欢用的`aptana studio 2.x`。你可以在那里找到其他主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:25:34.913

据我所知，您必须在创建元素时对其进行配置。当然，您可以创建一个实用函数来为您执行此操作

```
yourapp.ui.create = function(apiMethod, props) {
    props = props || {};
    props.color = '..';

    return apiMethod(props);
}; 
```

然后像这样调用它

`label = yourapp.ui.create(Ti.UI.createLabel, {...});`

填充您想要保持一致的颜色。