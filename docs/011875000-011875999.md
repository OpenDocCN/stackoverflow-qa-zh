# StackOverflow 问答 11875000-11875999

# winapi - OpenGL调用损坏的内存

> ID：11875003
> 
> 赞同：0
> 
> 时间：2012-08-09T00:07:01.760
> 
> 标签：winapi, opengl-3

当我调用 glGetIntergerv 或任何其他 opengl 函数并在 gdb 中单步执行时，到达它后，gdb 将跳过几行并在代码中继续单步执行。

下面是加载opengl和windows的代码。它是在第一个 opengl 调用 glGetIntergerv 之前运行的唯一代码。

```
HWND window;
HDC dev_context;

HGLRC rend_context;
//Creating the Window
    char const *name = "Opengl Test";
    HINSTANCE inst = (HINSTANCE)GetModuleHandle(0);
    WNDCLASS windowClass;
    DWORD dwExStyle = WS_EX_APPWINDOW | WS_EX_WINDOWEDGE;
    windowClass.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;
    windowClass.lpfnWndProc = (WNDPROC) WndProcedure;
    windowClass.cbClsExtra = 0;
    windowClass.cbWndExtra = 0;
    windowClass.hInstance = inst;
    windowClass.hIcon = LoadIcon(NULL, IDI_WINLOGO);
    windowClass.hCursor = LoadCursor(NULL, IDC_ARROW);
    windowClass.hbrBackground = NULL;
    windowClass.lpszMenuName = NULL;
    windowClass.lpszClassName = name;
    RegisterClass(&windowClass);

    window = CreateWindowEx(dwExStyle, name, name, WS_OVERLAPPEDWINDOW,
      CW_USEDEFAULT, 0, 0, 0, NULL, NULL, inst, NULL);

//Context
    dev_context = GetDC( window );
    std::cout << dev_context << std::endl;
    //Get pixel format
    PIXELFORMATDESCRIPTOR pfd;
    memset(&pfd, 0, sizeof(PIXELFORMATDESCRIPTOR));
    pfd.nSize  = sizeof(PIXELFORMATDESCRIPTOR);
    pfd.nVersion   = 1;
    pfd.dwFlags    = PFD_DOUBLEBUFFER | PFD_SUPPORT_OPENGL | PFD_DRAW_TO_WINDOW;
    pfd.iPixelType = PFD_TYPE_RGBA;
    pfd.cColorBits = 32;
    pfd.cDepthBits = 32;
    pfd.iLayerType = PFD_MAIN_PLANE;

    int nPixelFormat = ChoosePixelFormat(dev_context, &pfd);
    SetPixelFormat( dev_context, nPixelFormat, &pfd );

    HGLRC temp_rend_context = wglCreateContext( dev_context );
    wglMakeCurrent( dev_context, temp_rend_context );

    HGLRC (WINAPI *wglCreateContextAttribsARB) (HDC hDC, HGLRC hShareContext, const int *attribList) = (HGLRC (WINAPI *) (HDC hDC, HGLRC hShareContext, const int *attribList)) gl3wGetProcAddress("wglCreateContextAttribsARB");

    const int attribs[] = { WGL_CONTEXT_MAJOR_VERSION_ARB, 3,  WGL_CONTEXT_MINOR_VERSION_ARB, 0, WGL_CONTEXT_FLAGS_ARB, /*WGL_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB*/0, 0};

    rend_context = wglCreateContextAttribsARB(dev_context, 0, attribs);
    wglMakeCurrent(0,0);
    wglDeleteContext(temp_rend_context);
    wglMakeCurrent(dev_context, rend_context);

    gl3wInit();

    int glVersion[2] = {-1, -1};
    glGetIntegerv(GL_MAJOR_VERSION, &glVersion[0]); //First gl call
    glGetIntegerv(GL_MINOR_VERSION, &glVersion[1]); 
```

下面是我的 WndProcedure 函数：

```
static LRESULT CALLBACK WndProcedure(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam){
    switch(Msg){
        case WM_DESTROY:
            PostQuitMessage(WM_QUIT);
            return 0;
        default:
            return DefWindowProc(hWnd, Msg, wParam, lParam);
    }
} 
```

我正在使用 gl3w 库来加载 opengl 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:15:46.507

听起来您在调用约定或参数列表或两者中都存在不匹配，这会破坏堆栈以破坏调用返回地址。

仔细检查您正在编译的 opengl .h 文件是否与您正在调用的 opengl .dll 的版本相匹配。仔细检查是否为 .h 文件定义并启用了 Windows 所需的任何条件定义。Win API 调用中调用约定的规范是 STDCALL。如果您在 .h 文件中没有看到 gl 函数的调用约定，请保持怀疑。

我隐约记得 STDCALL 和 cdecl 调用约定以相同的顺序（从右到左）将参数推入堆栈，但在调用后谁负责调整堆栈指针不同。我相信 STDCALL 期望被调用者弹出堆栈，而使用 cdecl 调用者在调用返回后恢复堆栈指针。

这意味着如果调用者正在进行 cdecl 调用，但被调用者实际上是 STDCALL，则参数将使其进入调用就好了，但所有地狱都会在返回时崩溃。根据不匹配运行的方式，堆栈指针根本不会调整，或者会过度调整（调整两次）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:59:03.117

Here is the code I use create a GL context and use GL3 features. Now I know this is C# but you get the picture. There is no reason to create two GL contexts to use OpenGL3... unless im totally missing what your saying.

```
void Init(IntPtr handle, bool fullscreen, bool vSync)
{
                this.handle = handle;
                #if WINDOWS
                //Get DC
                dc = WGL.GetDC(handle);
                WGL.SwapBuffers(dc);

                //Set BackBuffer format
                WGL.PIXELFORMATDESCRIPTOR pfd = new WGL.PIXELFORMATDESCRIPTOR();
                WGL.ZeroPixelDescriptor(ref pfd);
                pfd.nVersion        = 1;
                pfd.dwFlags         = WGL.PFD_DRAW_TO_WINDOW | WGL.PFD_SUPPORT_OPENGL | WGL.PFD_DOUBLEBUFFER;
                pfd.iPixelType      = (byte)WGL.PFD_TYPE_RGBA;
                pfd.cColorBits      = 24;
                pfd.cAlphaBits      = 8;
                pfd.cDepthBits      = 16;
                pfd.iLayerType      = (byte)WGL.PFD_MAIN_PLANE;
                unsafe{pfd.nSize = (ushort)sizeof(WGL.PIXELFORMATDESCRIPTOR);}

                int pixelFormatIndex = WGL.ChoosePixelFormat(dc, ref pfd);
                if (pixelFormatIndex == 0) Debug.ThrowError("Video", "ChoosePixelFormat failed");
                if (WGL.SetPixelFormat(dc, pixelFormatIndex, ref pfd) == 0) Debug.ThrowError("Video", "Failed to set PixelFormat");

                ctx = WGL.CreateContext(dc);
                if (ctx == IntPtr.Zero) Debug.ThrowError("Video", "Failed to create GL context");
                if (WGL.MakeCurrent(dc, ctx) == 0) Debug.ThrowError("Video", "Failed to make GL context current");

                WGL.Init();//<< load 'wglSwapIntervalEXT'
                WGL.SwapInterval(vSync ? 1 : 0);
} 
```

And to load GL extensions:

```
public const string DLL = "opengl32";
[DllImport(DLL, EntryPoint = "wglGetProcAddress", ExactSpelling = true)]
private static extern IntPtr getProcAddress(string procedureName); 
```

# css - 使用媒体查询或 js 定位 IE 的文本大小

> ID：11875005
> 
> 赞同：1
> 
> 时间：2012-08-09T00:07:05.450
> 
> 标签：css, internet-explorer, browser, media-queries

**有没有办法使用媒体查询或类似方法来定位用户在 IE 的“视图”>“文本大小”中选择的更改？**

因此，例如，当用户将文本大小更改为“大”时，我可以调用类似的东西`@media (text-size: large)`并应用特定的样式。也可以使用任何 js 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:16:32.317

您可以使用 JavaScript 使用 font-size:medium 构建内存中的元素，并将其宽度与具有已知字体大小的控制元素进行比较。

您可以使用此信息添加可以在 CSS 中使用的类（小、大等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:15:02.313

无法知道用户设置的 textsize 是什么。

# php - 分组 PHP 数组编号

> ID：11875006
> 
> 赞同：4
> 
> 时间：2012-08-09T00:07:12.557
> 
> 标签：php, arrays, numbers, range, grouping

我如何改变这一点：

```
大批
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [4] => 5
    [5] => 6
    [6] => 7
    [7] => 11
    [8] => 21
    [9] => 22
    [10] => 23
    [11] => 24
)
```

对此：

```
1-7、11、21-24
```

我在 PHP 数组中有一个这样的数字列表，我只是想让这个列表更小一点。

```
2000 年：3 6 7 11 15 17 25 36 42 43 45
2001 年：2 3 4 5 6 9 10 11 12 13 34 37 45 46 47 48 49 50 51 52
2002：1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 33 34 35 36 37 39 40 41 42 43 48 49 45 51 52
2003 年：1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 451 42 473 48 4 46 50 51
2004 年：1 2 3 4 5 6 7 8 9 10 11 12 13 14 16 17 18 19 21 22 23 24 25 26 27 28 29 30 31 32 33 34 36 37 38 39 40 41 42 45 44 49 5046 52
2005 年：1 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 451 42 4 4 4 46 50 51 52
2006 年：1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 46 42 74 4 49 50 51 52
2007 年：1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 474 4 4 41 46 474 49 50 51 52
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T00:26:07.170

有趣的任务。

这是一个完全符合您要求的演示脚本。

调整口味。

**代码**

```
<?php

$groups = array();
$active_group = 0;

$output = array();
$output_counter = 0;

$nums = array( 1, 2, 3, 4, 5, 6, 7, 11, 21, 22, 23, 24 );

foreach( $nums as $k => $num ) {

    // if this isn't the first item, and the current number
    // isn't one more than the previous one, increment the counter
    if( $k !== 0 && $nums[$k] !== $nums[$k-1]+1 )
        $active_group ++;

    // add this number to a group
    $groups[ $active_group ][] = $num;

}

// take the 1st and last of each group
foreach( $groups as $group ) {

    $first = array_shift( array_values($group) );
    $output[$output_counter][] = $first;

    $last = array_pop( array_values($group) );
    if( $first !== $last )
        $output[$output_counter][] = $last;

    $output_counter++;

}

echo '<pre>';
print_r($output);

?> 
```

**输出**

```
Array
(
    [0] => Array
        (
            [0] => 1
            [1] => 7
        )

    [1] => Array
        (
            [0] => 11
        )

    [2] => Array
        (
            [0] => 21
            [1] => 24
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-03T16:01:06.607

一个循环就可以了。您需要跟踪“先前”迭代的值和存储范围数据的“起始”值。

代码：

```
$prev = -1;                                                    // initialize out of range
foreach ($numbers as $n) {
    if (!isset($start)) {                                      // first iteration
        $start = $n;                                           // declare $start
    } elseif ($n != $prev + 1) {                               // not consecutive
        $result[] = $start == $prev ? $prev : "$start-$prev";  // store single or ranged values
        $start = $n;                                           // update $start
    }
    $prev = $n;                                                // declare / update $prev
}
$result[] = $start == $prev ? $prev : $start . '-' . $prev;    // store final iteration data
echo implode(', ', $result);                                   // comma delimit the values 
```

输出`$numbers = [1, 2, 3, 4, 5, 6, 7, 11, 21, 22, 23, 24];`：（[演示](https://3v4l.org/7AOGf)）

```
1-7, 11, 21-24 
```

输出`$numbers = [1, 3, 5, 6, 11, 21, 22, 23, 24, 26];`：（[演示](https://3v4l.org/sp8Eh)）

```
1, 3, 5-6, 11, 21-24, 26 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T00:32:44.833

这是一种将整数数组压缩为您想要的字符串格式并将该字符串格式扩展回整数数组的方法。

```
function compress($expanded) {
    $low = -1;
    $prevNum = -1;
    $expanded = array_unique($expanded);
    sort($expanded, SORT_NUMERIC);
    foreach($expanded as $num) {
        if($low == -1) {
            $low = $num;
        } else if($num - $prevNum > 1) { 
            $compact[] = ($prevNum - $low >= 1) ? sprintf("%d-%d", $low, $prevNum) : $prevNum; 
            $low = $num;
        } 
        $prevNum = $num;
    }
    if($low != -1 ) {
        $compact[] = ($num - $low >= 1) ? sprintf("%d-%d", $low, $num) : $num; 
    }
    return implode(",", $compact);
}

public static function expand($compact) {
    $expanded = Array();
    $compact = explode(",", $compact);
    foreach($compact as $num) {
        if( is_numeric($num) ) {
            $expanded[] = $num;
        } else {
            list($low, $high) = explode("-", $num);
            if( is_numeric($low) && is_numeric($high) && $low < $high) {
                for($i = $low;$i <= $high;$i++) {
                    $expanded[] = $i;
                }
            }
        }
    }
    return $expanded;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-09T00:17:54.313

```
//Placeholder array
$b = array();

// Slice array (where to slice)
$s = array(11, 21);

foreach ($array as $year => $a) {
    for($i = 0; $i < count($a); $i++) {
        for($ii = 0; $ii < count($s); $ii++) {
            if($i == 0) {
                $b[$year]['<' . $s[$ii]][] = $a[$i];
                break;
            } else if ( isset($a[$i+1]) && $a[$i] < $s[$ii] && $a[$i+1] >=$s[$ii]){
                $b[$year]['<' . $s[$ii]][] = $a[$i];
                if (isset($s[$ii+1])) {
                    $b[$year]['<' . $s[$ii+1]][] = $a[$i+1];
                } else {
                    $b[$year]['>' . $s[$ii]][] = $a[$i+1];
                }
                break;
            } else if ( !isset($s[$ii+1]) && $i == count($a) - 1) {
                $b[$year]['>' . $s[$ii]][] = $a[$i];
                break;
            }
        }
    }
} 
```

**$数组**

```
The list of numbers 
```

**输出（$b）：**

```
array
  2000 => 
    array
      '<11' => 
        array
          0 => int 3
          1 => int 7
      '<21' => 
        array
          0 => int 11
          1 => int 17
      '>21' => 
        array
          0 => int 25
          1 => int 45
  2001 => 
    array
      '<11' => 
        array
          0 => int 2
          1 => int 10
      '<21' => 
        array
          0 => int 11
          1 => int 13
      '>21' => 
        array
          0 => int 34
          1 => int 52
  2002 => 
    array
      '<11' => 
        array
          0 => int 1
          1 => int 10
      '<21' => 
        array
          0 => int 11
          1 => int 20
      '>21' => 
        array
          0 => int 21
          1 => int 52
  2003 => 
    array
      '<11' => 
        array
          0 => int 1
          1 => int 10
      '<21' => 
        array
          0 => int 11
          1 => int 20
      '>21' => 
        array
          0 => int 21
          1 => int 51
  2004 => 
    array
      '<11' => 
        array
          0 => int 1
          1 => int 10
      '<21' => 
        array
          0 => int 11
          1 => int 19
      '>21' => 
        array
          0 => int 21
          1 => int 52
  2005 => 
    array
      '<11' => 
        array
          0 => int 1
          1 => int 10
      '<21' => 
        array
          0 => int 11
          1 => int 20
      '>21' => 
        array
          0 => int 21
          1 => int 52
  2006 => 
    array
      '<11' => 
        array
          0 => int 1
          1 => int 10
      '<21' => 
        array
          0 => int 11
          1 => int 20
      '>21' => 
        array
          0 => int 21
          1 => int 52
  2007 => 
    array
      '<11' => 
        array
          0 => int 1
          1 => int 10
      '<21' => 
        array
          0 => int 11
          1 => int 20
      '>21' => 
        array
          0 => int 21
          1 => int 52 
```

注意：只需更改值 (11) 和 (21) 以满足您的需要。您可以添加更多值。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-08-09T00:10:20.977

这是一个例子：

```
$query = "SELECT '1-11' Range, COUNT(rank) rank 
    FROM promoted WHERE rank between 1 and 11 
    union all 
    SELECT '12-21' Range, COUNT(rank) rank 
    from promoted 
    where rank between 12 and 21 
    union all 
    SELECT '22-31' Range, count(rank) rank 
    from promoted 
    where rank between 22 and 31 
    union all 
    SELECT '32-40' Range, count(rank) rank 
    from promoted 
    where rank between 22 and 31 
    union all 
    SELECT rank, count(rank) FROM promoted WHERE rank = '40'"; 
```

# php - 如何遍历 simple_xml_load 中输出的数组

> ID：11875007
> 
> 赞同：1
> 
> 时间：2012-08-09T00:07:27.060
> 
> 标签：php, xml, parsing, simplexml

例如： ![图像1](../Images/b2b82d77eac1275fed2707f385435c76.png)

假设我想提取每个索引内容，无论数组索引的大小如何，并获取标题、描述、链接等每个部分？

我会很感激一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:10:22.590

这是一个对象，你可以得到这样的内容：

```
$title = $object->title;
$description = $object->description;
$link = $object->link;
$pubDate = $object->pubDate; 
```

您可以在此处找到有关面向对象编程的更多信息 => [PHP OOP](http://php.net/manual/en/language.oop5.php)

# android - 从动态内容选项卡获取控件/视图

> ID：11875010
> 
> 赞同：0
> 
> 时间：2012-08-09T00:07:43.097
> 
> 标签：android, tabcontrol

我已经从数据库中创建了选项卡及其内容。现在我需要帮助弄清楚如何从这些控件中获取用户输入的值 - 如何获取选项卡上的控件列表（以便可以保存数据）。这是我如何填充选项卡内容的精简示例：

```
public View createTabContent(String tag)
{
SQLiteDatabase db2 = openOrCreateDatabase(msDbFile, MODE_PRIVATE, null);
Cursor cList = db2.rawQuery("SELECT * FROM CheckList WHERE CatID=" + tag, null);
TableLayout tl = new TableLayout(FormChecklist.this);
tl.setBackgroundColor(new Color().WHITE);
while(cList.moveToNext())
{   
    /* Create a new row to be added. */
    TableRow tr = new TableRow(FormChecklist.this);
    tr.setLayoutParams(new LayoutParams(
               LayoutParams.FILL_PARENT,
               LayoutParams.WRAP_CONTENT));

     /* Create the row-content. */
    TextView lblQuestion = new TextView(FormChecklist.this);
    lblQuestion.setText(cList.getString(2));
    lblQuestion.setTag(tag);
    /* Add control to row. */
    tr.addView(lblQuestion);

    CheckBox chkCompleted = new CheckBox(FormChecklist.this);
    chkCompleted.setText("Completed");
    chkCompleted.setLayoutParams(new LayoutParams(
               LayoutParams.FILL_PARENT,
               LayoutParams.WRAP_CONTENT));
    chkCompleted.setTag(tag);
    /* Add control to row. */
    tr.addView(chkCompleted);

    /* Add row to TableLayout. */
    tl.addView(tr,new TableLayout.LayoutParams(
    LayoutParams.FILL_PARENT,
    LayoutParams.WRAP_CONTENT));
}
db2.close();
return tl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:23:59.777

没有回复，但终于想通了，希望有人会发现此信息有帮助。我采用的方法是修改我的 createTabContent，为 TableLayout 添加一个 ID：

```
tl.setId(1000 + miTlCnt); 
```

然后在我的保存例程中，我循环遍历控件，如下所示：

```
for (int i = 1000 + miTlCnt; i > 1000; i--)
{ 
    TableLayout tl = (TableLayout)findViewById(i);
    if (tl != null)
    {
        for (int j = 0; j < tl.getChildCount(); j++)
        {
            TableRow row = (TableRow)tl.getChildAt(j);
            CheckBox chkCompleted = (CheckBox)row.getChildAt(1);
        }
    }
} 
```

# php - 功能不上传远程pdf

> ID：11875013
> 
> 赞同：0
> 
> 时间：2012-08-09T00:08:02.340
> 
> 标签：php

我有 2 个功能：一个使用分块上传，另一个使用上传整个文件

```
public function chunkedUpload($file, $filename = false, $path = '', $overwrite = true)
{
    if (file_exists($file)) {
        if ($handle = @fopen($file, 'r')) {
            // Set initial upload ID and offset
            $uploadID = null;
            $offset = 0;

            // Read from the file handle until End OF File, uploading each chunk
            while ($data = fread($handle, $this->chunkSize)) {
                $chunkHandle = fopen('php://temp', 'rw');
                fwrite($chunkHandle, $data);
                $this->OAuth->setInFile($chunkHandle);

                // On subsequent chunks, use the upload ID returned by the previous request
                if (isset($response['body']->upload_id)) {
                    $uploadID = $response['body']->upload_id;
                }

                $params = array('upload_id' => $uploadID, 'offset' => $offset);
                $response = $this->fetch('PUT', self::CONTENT_URL, 'chunked_upload', $params);
                $offset += mb_strlen($data, '8bit');
                fclose($chunkHandle);
            }

            // Complete the chunked upload
            $filename = (is_string($filename)) ? $filename : basename($file);
            $call = 'commit_chunked_upload/' . $this->root . '/' . $this->encodePath($path . $filename);
            $params = array('overwrite' => (int) $overwrite, 'upload_id' => $uploadID);
            $response = $this->fetch('POST', self::CONTENT_URL, $call, $params);
            return $response;
        } else {
            throw new Exception('Could not open ' . $file . ' for reading');
        }
    }

    // Throw an Exception if the file does not exist
    throw new Exception('Local file ' . $file . ' does not exist');
}

        public function putFile($file, $filename = false, $path = '', $overwrite = true)
{
    if (file_exists($file)) {
        if (filesize($file) <= 157286400) {
            $filename = (is_string($filename)) ? $filename : basename($file);
            $call = 'files/' . $this->root . '/' . $this->encodePath($path . $filename);
            // If no filename is provided we'll use the original filename

            $params = array(
                'filename' => $filename,
                'file' => '@' . str_replace('\\', '\\', $file) . ';filename=' . $filename,
                'overwrite' => (int) $overwrite,
            );
            $response = $this->fetch('POST', self::CONTENT_URL, $call, $params);
            return $response;
        }
        throw new Exception('File exceeds 150MB upload limit');
    }

    // Throw an Exception if the file does not exist
    throw new Exception('Local file ' . $file . ' does not exist');
} 
```

我已经从同一个服务器目录测试了这些功能，它们都可以正常工作；但是，`chunkedUpload`能够从远程 http:// 和 ftp:// url 上传，但`putFile`不能。为什么会这样？这两个函数中是否存在可能导致此问题的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:06:51.730

这是因为 file_exists 在远程服务器上不起作用

PHP 5 中的 file_exists() 不接受 URL，只接受本地路径名

改为使用 curl 发送头部请求

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'your url');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_exec($ch);
$size = curl_getinfo($ch, CURLINFO_CONTENT_LENGTH_DOWNLOAD);
var_dump($size); 
```

# java - httpclient异常“org.apache.http.conn.ConnectionPoolTimeoutException：等待连接超时”

> ID：11875015
> 
> 赞同：52
> 
> 时间：2012-08-09T00:08:34.003
> 
> 标签：java, exception, httpclient

我正在尝试使用以下代码向我的服务器发送请求。它总是在第三次请求时失败。

```
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.nio.charset.Charset;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.HttpVersion;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.ContentType;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.CoreConnectionPNames;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;

public class HttpClientTest {
    private HttpClient client;

    public HttpClientTest() {
        HttpParams params = new BasicHttpParams();
        params.setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, 15000);  
        params.setParameter(CoreConnectionPNames.SO_TIMEOUT, 15000);

        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, "utf-8");
        HttpProtocolParams.setUseExpectContinue(params, true);
        ThreadSafeClientConnManager cm = new ThreadSafeClientConnManager();
        cm.setMaxTotal(100);
        client = new DefaultHttpClient(cm, params);

        while (true) {
            HttpPost mPost = new HttpPost("http://myip/myservice");

            JSONObject json = new JSONObject();
            try {
                json.put("serialNumber", "abcd");
            } catch (JSONException e1) {
                e1.printStackTrace();
            }
            StringEntity s = null;
            try {
                s = new StringEntity(json.toString());
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }               
            s.setContentEncoding("UTF-8");
            s.setContentType("application/json");
            mPost.setEntity(s);

            JSONObject response = null;

            System.out.println("HttpClientTest ---> send post");
            HttpResponse mHttpResponse;
            try {
                mHttpResponse = client.execute(mPost);
                System.out.println("HttpClientTest  ---> get response");
                if(mHttpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK){
                    HttpEntity entity = mHttpResponse.getEntity(); 
                    ContentType contentType = ContentType.getOrDefault(entity);
                    Charset charset = contentType.getCharset();
                    response = new JSONObject(new JSONTokener(new InputStreamReader(entity.getContent(), charset)));

                    System.out.println("HttpClientTest ---> get result:" + response.toString());
                } else {
                    mPost.abort();
                    break;
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public static void main(String[] args) {
        HttpClientTest t = new HttpClientTest();
    }
} 
```

**异常如下：**

```
org.apache.http.conn.ConnectionPoolTimeoutException: Timeout waiting for connection
    at org.apache.http.impl.conn.tsccm.ConnPoolByRoute.getEntryBlocking(ConnPoolByRoute.java:417)
    at org.apache.http.impl.conn.tsccm.ConnPoolByRoute$1.getPoolEntry(ConnPoolByRoute.java:300)
    at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager$1.getConnection(ThreadSafeClientConnManager.java:224)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:401)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
    at com.i360r.client.takeaway.network.HttpClientTest.<init>(HttpClientTest.java:68)
    at com.i360r.client.takeaway.network.HttpClientTest.main(HttpClientTest.java:88) 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2014-04-02T20:17:48.570

我有同样的问题，我找到了解决办法。此超时是由于连接泄漏。就我而言，我使用`httpDelete`的是方法而不是消耗响应。相反，我正在检查响应的状态。

解决方法是，需要使用响应实体。为了确保系统资源的正确释放，必须关闭与实体关联的内容流。

所以我使用 `EntityUtils.consumeQuietly(response.getEntity());`了它来确保实体内容被完全消耗并且内容流（如果存在）被关闭。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-08-09T23:13:55.383

我已经修好了！添加块`mPost.releaseConnection()`。`finally`

```
 try {
 } catch (Exception e) {
 } finally {
  mPost.releaseConnection();
 } 
```

将包更新`org.apache.httpcomponents`到 4.2.1

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-04-03T15:27:51.587

只需将要获取响应的行放在 try-with-resources 中，然后使用 CloseableHttpResponse 而不是 HttpResponse ，如下所示：

```
try(final CloseableHttpResponse mHttpResponse = client.execute(mPost);)
{
 System.out.println("HttpClientTest  ---> get response");
 ....remainder code 
```

mHttpResponse 对象将被自动使用并为您关闭

希望这可以帮助！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-17T10:30:44.360

使用 a`CloseableHttpClient`而不是`HttpClient`. 您将获得 a`CloseableHttpResponse`而不是`HttpResponse`which 支持`close()`。因此，当您完成响应后，只需关闭它，无需关闭连接。

```
CloseableHttpResponse response = closableHttpClient.execute(httpPost, context); 
```

...做你需要做的事情：

```
response.close(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-17T19:47:28.993

如果您`ApacheHttpClient`与 DropWizard 0.6.2 一起使用，也会发生这种情况，它在幕后创建一个`MultiThreadedHttpConnectionManager`具有默认配置的 - 并且该默认配置一次只允许 2 个并发 http 连接[更多信息在这里](https://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/MultiThreadedHttpConnectionManager.html#setMaxConnectionsPerHost(int))。

因此，使用此配置，如果您的服务器被淹没并且一直向同一主机发出请求，那么您一次最多允许运行 2 个连接！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-07T10:17:54.007

我们遇到了同样的问题，并且我们受到限制，因为来自池的连接的 DefaultMaxPerRoute 的初始值为 2。我们的 API 会使用相同的 URI 触发不同的调用，但主体不同。一旦我们像这样明确地将其设置为更高的值

```
PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager();
    cm.setMaxTotal(40);
    cm.setDefaultMaxPerRoute(20); 
```

我们能够解决它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-20T06:42:27.850

通过 spark 编写和读取镶木地板时，我们遇到了这个错误。确切的错误是：
com.amazonaws.SdkClientException: Unable to execute HTTP request: Timeout waiting for connection from pool

终于弄明白这和Hadoop升级到3.1.3版本

有关 好像在这个新版本的Hadoop中，属性名从：
**fs.s3a.connection.maximum改成**
了：
**spark.hadoop.fs.s3a .connection.maximum**

在我们的 spark 配置中重命名属性，让我们回到正轨。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-13T03:48:42.813

我遇到了同样的错误。事实证明，我需要关闭响应。

```
CloseableHttpResponse response = null;
try {
       response = ##some code
} catch(Exception e) {
  if (response != null) {
      response.close();
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-15T12:46:23.227

正如[Rama](https://stackoverflow.com/a/22822117/524588)所说，这可能是连接泄漏的迹象。

`releaseConnection()`可以帮助解决此问题，但您可能需要找出根本原因。

`timeout`此外，这可能会发生，因为没有可用的连接可以租用，当您没有`HttpClient`. 在这种情况下，`releaseConnection()`将无济于事。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-09T19:21:48.680

在我的情况下，正在使用实体内容流的 bufferedReader 没有被关闭。关闭它解决了错误。

# android - 如何在不使用任何 root 权限的情况下在 Android 中捕获网络数据包

> ID：11875020
> 
> 赞同：6
> 
> 时间：2012-08-09T00:09:14.873
> 
> 标签：android, capture, packet-capture, packet-sniffers

我想在 android 应用程序上捕获网络数据包。你有什么建议或源代码来帮助我理解这是否可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T00:38:48.743

如果没有 root，您将不得不使用 pass-thru 方法。

1.  设置您的 PC/Mac 以通过无线适配器共享您的有线连接
2.  使用您的 Android 设备连接到无线适配器
3.  运行wireshark

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T02:34:26.427

大多数在没有 root 的情况下在 android 中过滤/嗅探/帐户网络流量的应用程序都使用环回 vpn 技巧，您可以在其中设置 vpn 并检查流量（或任何您想要的）

对于嗅探器，请检查[tpacketcapture](https://play.google.com/store/apps/details?id=jp.co.taosoftware.android.packetcapture)，但我认为您没有来源...然后尝试联系，或检查 fdroid 以获取类似的开源应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-31T20:35:22.657

这应该只是中间人方法 - 考虑设置代理。

# sql - 用于授予 SQL Server Reporting Services 用户权限的 SQL 脚本

> ID：11875025
> 
> 赞同：1
> 
> 时间：2012-08-09T00:10:24.427
> 
> 标签：sql, sql-server, reporting-services, user-permissions, user-roles

我知道我可以通过 ip:port/Reports 做到这一点

属性 -> 安全 -> 新角色分配 -> “用户名” -> “角色”

但是，我有很多数据库，每个数据库都有不同的用户。所以，我想自动化这个过程并编写一个 SQL 脚本 + 双击一个批处理来完成这个过程。我曾尝试对用户表和用户角色表进行插入，但它似乎不起作用，所以我想这是关于授予权限的问题，我无法用肉眼看到......关于 SQL 脚本中包含的内容的任何提示?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:14:26.370

我不建议使用 SQL 脚本来修改 RS 目录。Schema 没有文档记录，非常复杂。

您可以使用来自 RS Scripting Host 的 SOAP API 调用。这是指向分配权限的示例脚本的指针[http://msftrsprodsamples.codeplex.com/wikipage?title=SS2008%21Script%20Samples%20%28Reporting%20Services%29](http://msftrsprodsamples.codeplex.com/wikipage?title=SS2008%21Script%20Samples%20%28Reporting%20Services%29)

有关脚本主机的一些信息[http://technet.microsoft.com/en-us/library/ms162839.aspx](http://technet.microsoft.com/en-us/library/ms162839.aspx)

我还建议使用用户组而不是单个用户帐户。从长远来看，它更容易维护。

# python - Django request.REQUEST 正在截断数据

> ID：11875026
> 
> 赞同：-1
> 
> 时间：2012-08-09T00:10:25.620
> 
> 标签：python, ajax, django, request, django-views

所以我有这个表格（为了清楚起见，删除了一些元素）

```
<form id="{{ section }}-submission-form{{ cell_id }}">

    <input type=hidden name="section" value="{{ section }}" />
    <input type="hidden" name="school" id="{{ section }}-submit-school{{ cell_id }}" />

    {% if section == "posts" %}
        <input type=hidden name="url" />
        <textarea class="{{ section }}txtinput{{ cell_id }}" name="text-submission"
                  default="{% if is_advice %}What's your question?{% else %}What's on your mind?{% endif %}"
                  id="{{ section }}-suggestion-box{{ cell_id }}"
                  style="margin: 0 0 .5em 0;font-family: Arial, sans-serif;font-size: 14px; width: 410px;"
                  rows='8'></textarea>
        <br />
    {% endif %}
    {% if section == "photos" %}
        <span style='line-height: 40px;'>
        <label class="photouploadlabel">URL</label><input type="text" name="image-url" style="width: 335px" /><br>
        <label class="photouploadlabel">File</label><input type="file" name="image-file" style="width: 335px"/><br>
        <label class="photouploadlabel">Caption</label><input type="text" id="image-caption{{ cell_id }}"
                                                              name="image-caption" style="width: 335px" default="optional"/>
        </span>
    {% endif %}

    <div id="{{ section }}-bottomdiv{{ cell_id }}" style="height: 45px; margin-top: .5em; width: 413px;">
        <div style="height: 45px">
        <label id="{{ section }}-tagsbutton{{ cell_id }}"
               style="margin-right: .5em; cursor: pointer; vertical-align: bottom; float:left; line-height: 1.8em;">Tags</label>

        <input id="{{ section }}-tagsinput{{ cell_id }}" type="text" name="tags-list" style="position: relative"/>
                    <button id="send-{{ section }}-suggestion{{ cell_id }}" disabled="disabled"
                style="float:right; position: relative; bottom: 7px; right: -4px;">Post</button>
        </div> 
```

标签列表输入变成自动完成，用户选择标签，然后将其添加到全局 js 变量“选定标签”中。当用户按“发布”时，我有以下代码：

```
 alert(selectedtags);
       $("#"+section+"-submission-form"+cellid).ajaxSubmit({
           url: '/save-suggestion/',
           type: 'post',
           data: {'tags': selectedtags },
           dataType: 'json',
           success: function(response){
               clear_text(section, cellid);
               location.reload();
           }, 
```

这是奇怪的一点：无论我在哪个部分，警报都有效。但是，如果我在服务器端打印 request.REQUEST ，如果该部分是我得到的照片

```
{u'image-url': u'http://i.imgur.com/vUxla.jpg', u'tags-list': u'', u'tags': u'wtf,crazy,pics', u'section': u'photos', u'school': u'1997', u'anonymity-level': u'schoolandmajor', u'image-file': u'', u'image-caption': u''} 
```

即我想要的。但如果该部分是帖子，我得到

```
{u'text-submission': u'wtf', u'school': u'1997', u'tags-list': u'', u'url': u'', u'section': u'posts', u'tags[]': u'crazy', u'anonymity-level': u'schoolandmajor'} 
```

因此，它不仅重命名为 tags[] （我以前见过并且不太关心，但是......），它还将我的标签列表截断为最后一个条目。

有谁知道我做错了什么？

编辑：经过进一步检查，这是使用 request.REQUEST 所做的事情，而不是 request.POST。

所以，仍然，发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T01:24:12.780

`request.REQUEST`是一个`MergedDict`，它包含一个`QueryDict`用于 POST 和一个用于 GET。迭代 MergedDict 时，您将获得每个键的单个值，这就是该`__str__`方法对该类所做的。`QueryDict.getlist`您可以像这样使用来解决这个问题：

```
print request.REQUEST.getlist('tags[]') 
```

在我的测试中，产生：

```
[u'asd', u'123'] 
```

如果我只是`print request.REQUEST['tags[]']`，我只得到*123*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:25:22.417

您的问题似乎出在您的 JavaScript 中。您收到的两个请求的数据似乎不同。在第一个请求`tags`中是以下字符串：

```
u'tags': u'wtf,crazy,pics' 
```

但是，在后者中，标签设置如下：

```
u'tags[]': u'crazy' 
```

正如您所提到的，名称已更改，仅保留最后一项。这种差异似乎源于这样一个事实，即第一个请求`tags`不是一个列表，而是一个逗号分隔的字符串。

我认为您将通过更改代码以使对该变量的处理保持一致来解决您的问题。基于发送列表会给您带来问题的事实，您可能会建议要走的路是您的第一个请求的逗号分隔字符串。

使用列表时您没有获得正确数据的事实可能是由于 JSON 数据接收端的解析器，因为它在技术上是一个对象，并且一个对象不能有两个同名的成员（以及您的代码可能将它们全部发送为`tags[]`）。

# c# - 在加载项中为 Outlook“快速步骤”定义自定义操作

> ID：11875035
> 
> 赞同：1
> 
> 时间：2012-08-09T00:11:37.790
> 
> 标签：c#, office-interop, outlook-addin, outlook-2010

我想为 Outlook 2010 加载项创建自定义“快速步骤”操作。快速步骤似乎是我想要完成的完美结构：我需要根据当前选定的项目采取行动。该操作需要一个目标文件夹。

我希望能够使用自定义操作扩展快速步骤，如下所示：

![选择自定义操作](../Images/305d292b15ca6958cfb5078258cbec52.png)

![为自定义操作选择文件夹](../Images/b11b3d22ecd07c2614b9e8b67847a8b2.png)

如何连接到快速步骤以添加自定义操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:53:27.240

根据[msdn forums 上的这个帖子](http://social.msdn.microsoft.com/Forums/ta/outlookdev/thread/9ce35f49-56aa-493f-bb6e-7dc2daf12516)，这是不可能的。

如果有人知道添加自定义快速步骤操作的方法，我希望该链接被证明是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:38:53.537

这是你要找的吗？

[http://www.howtogeek.com/howto/27827/create-and-customize-quick-steps-in-outlook-2010/](http://www.howtogeek.com/howto/27827/create-and-customize-quick-steps-in-outlook-2010/) http://ophir.wordpress.com/2010/06/13/outlook-2010-快速步骤很酷/

使用此搜索找到它们：

[https://www.google.com/search?q=outlook+2010+macro+quick+steps&aq=f&sugexp=chrome,mod=18&sourceid=chrome&ie=UTF-8](https://www.google.com/search?q=outlook+2010+macro+quick+steps&aq=f&sugexp=chrome,mod=18&sourceid=chrome&ie=UTF-8)

# linux - 使用 shell 脚本向电子邮件组发送电子邮件

> ID：11875036
> 
> 赞同：1
> 
> 时间：2012-08-09T00:11:39.490
> 
> 标签：linux, email, shell, unix, solaris

下面是我运行良好的 shell 脚本。

```
#!/bin/bash

DATE_YEST_FORMAT2=`perl -e 'use POSIX qw(strftime); print strftime "%Y%m%d",localtime(time()- 3600*96);'`
echo $DATE_YEST_FORMAT2

QUERY1=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT SUM(total_items_purchased), SUM(total_items_missingormismatch) from lip_data_quality where dt='$DATE_YEST_FORMAT2';`

QUERY2=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT 100 * SUM(total_items_missingormismatch*1.0) / SUM(total_items_purchased) FROM lip_data_quality where dt='$DATE_YEST_FORMAT2';"`

echo "Total items purchased: `echo $QUERY1 | awk '{print $1}'`"
echo "Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`"
echo "Error Percentage: $QUERY2" 
```

我正在运行上面的shell脚本，如下所示 -

```
sh -x test.sh 
```

**问题陈述：-**

从上面的 shell 脚本中，我从最后三个 echo 语句中得到了以下三件事 -

```
Total items purchased
Total Items MissingorMismatch
Error Percentage 
```

我需要通过电子邮件将以上三件事发送到我们拥有的电子邮件组`DL-host@company.com`，`shell script`或者假设如果我`10 email list`需要发送具有相同内容和主题的电子邮件，那么我想，我可以存储所有这些10 封电子邮件在某个变量中列出，然后从那里读取并继续发送，对吗？这有可能做到吗？我在想像下面这样的电子邮件结构，只是制作非常简单。

**学科**

测试数据

**邮件正文**

```
Total items purchased:-    Some Number
Total Items MissingorMismatch:-   Some Number
Error Percentage:-   Some Number 
```

任何想法将不胜感激。

**更新，在尝试了 larsks 的建议后，我只收到一封电子邮件中的最后一个回显语句，这意味着只有错误百分比一个，而不是一封电子邮件中的所有三个：-**

```
#!/bin/bash

DATE_YEST_FORMAT2=`perl -e 'use POSIX qw(strftime); print strftime "%Y%m%d",localtime(time()- 3600*96);'`
echo $DATE_YEST_FORMAT2

QUERY1=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT SUM(total_items_purchased), SUM(total_items_missingormismatch) from lip_data_quality where dt='$DATE_YEST_FORMAT2';`

QUERY2=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT 100 * SUM(total_items_missingormismatch*1.0) / SUM(total_items_purchased) FROM lip_data_quality where dt='$DATE_YEST_FORMAT2';"`

echo "Total items purchased: `echo $QUERY1 | awk '{print $1}'`"
echo "Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`"
echo "Error Percentage: $QUERY2" | mail -s "Test Data" rj@host.com 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T01:15:27.123

您通常使用该`/bin/mail`程序从 shell 脚本发送电子邮件。您在命令行上提供主题和收件人，在`stdin`. 例如，在您的脚本中，您可以执行以下操作：

```
{
echo "Total items purchased: `echo $QUERY1 | awk '{print $1}'`"
echo "Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`"
echo "Error Percentage: $QUERY2"
} | mail -s "Test Data" DL-host@company.com 
```

您还可以将现有脚本的输出通过管道传输到`mail`（如果您不想修改脚本，或者只想偶尔发送邮件）：

```
<your script> | mail -s "Test Data" DL-host@company.com 
```

您可以在命令行上指定多个收件人，因此：

```
... | mail -s "Test Data" address1@company.com address2@company.com 
```

等等。

# mysql - 存储和获取用户访问过的城市（数百万用户）mysql - php

> ID：11875039
> 
> 赞同：0
> 
> 时间：2012-08-09T00:12:03.563
> 
> 标签：mysql, list, store

我想存储用户访问过的城市。在个人资料页面中，将列出用户访问过的所有城市。并且会有一个功能，用户可以搜索“谁访问过那个城市”（可以有多个城市搜索）

我打算做一个多对多的关系。

```
Table Users
-----------
UserID
UserName
...

Table Cities
-------
CityID
CityName
....

Table City_Relations
-----------
UserID
CityID 
```

在个人资料页面中，我可以运行一个简单的查询来获取城市。

```
select c.cityname FROM city_relations cr left join cities c on ( c.cityid = cr.cityid ) where cr.userid = 'USERID' 
```

并在搜索页面获取访问过所选城市的用户；

```
select u.username FROM city_relations cr left join users u on ( u.userid = cr.userid ) where cr.cityid = 'CITYID'   ( there may be cr.cityid = '1' or cr.cityid = '2' and so on; or in()/find_in_set()  ) 
```

到目前为止一切正常。我的问题是这效率如何？假设有 1 亿用户，每个用户在 city_relations 表中可以有数百个城市。假设每个用户有 100 个城市，该表中将有 100 亿行将运行插入/删除和选择 - 连接查询。

如果这种方式可行，我应该记住什么以获得最佳性能？表上的索引就足够了吗？如果这种方式可能会导致问题，您还有什么其他的建议？

您如何看待“不将所有关系存储在不同的行中并将它们保存在一个字段中”？

```
For example;
-----------
UserID
CityIDS (separated by commas) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:31:51.363

重要的是索引 city_relations 中的两列。由于 UserID,CityID 可能是表的唯一主键，因此您不需要 UserID 的附加索引（索引是 B 树，因此索引列集的任何前缀也会被索引），但您将需要自己的 CityID 索引。

我同意约翰的观点，你应该将城市分开排列。find_in_set() 不能利用索引，因此它必须搜索每一行并执行复杂的字符串搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:16:54.160

`city`如果您可以将其存储在不同的行中，那就更好了。虽然 mysql 中存在内置函数，`find_in_set()`但如果您尝试使用其他数据库服务器，它会不够灵活。而且您说的是数十亿行而不是数百万行。所以查询的效率在这里是最重要的。

# c# - 是否需要缓冲 TextReader？

> ID：11875044
> 
> 赞同：1
> 
> 时间：2012-08-09T00:12:32.757
> 
> 标签：c#, .net, io

缓冲 a 有什么意义`TextReader`吗？

`TextReader`有自己的内部缓冲区，我可以在创建时设置大小，所以有什么理由我想使用我自己的缓冲区并调用`Read( buffer, index, count )`只使用 char 获取 char`Read()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:27:25.833

谁知道 Read() 方法的内部结构有多复杂？希望它们被优化为尽可能快和尽可能高效。但是调用单个 Read(...) 方法然后遍历字符数组可能会更快。但另一个重要问题是：在您的情况下，性能差异是什么重要吗？如果您只是每分钟读取 100 个字符一次或两次，那么性能可能并不重要。如果您正在按顺序处理数兆字节的文件，那么您可能需要尽可能好的性能。如果是后者，那么始终适用相同的答案：衡量，不要猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T00:43:52.760

这取决于你在做什么。如果您从流中读取未由 CR+LF 对分隔的固定长度记录，您将需要执行以下操作

```
public static void Process()
{
  using ( Stream s = OpenCommunicationsStream() )
  using ( TextReader tr = new StreamReader(s)   )
  {
    char[] record = char[80] ;
    int chars_read ;

    while ( (chars_read=tr.Read(record,0,record.Length)) == record.Length )
    {
      DoSomethingWithRecord( record ) ;
    }
    if ( chars_read > 0 ) throw new InvalidDataException("wrong length record") ;
  }
  return ;
} 
```

为什么您可能使用`Read/0`而不是`Read/3`或`ReadBlock/3`完全取决于您的需求和上下文。例如，如果您正在编写解析器，您可能希望逐个字符地处理入站文本流，特别是因为`TextReader`通过它的`Peek()`方法免费为您提供一个前瞻字符。

# c++ - 在 C++11 中实现 boost::optional

> ID：11875045
> 
> 赞同：8
> 
> 时间：2012-08-09T00:12:43.813
> 
> 标签：c++, c++11, maybe, boost-optional

我正在尝试使用 c++11 功能实现 boost::optional 之类的数据结构。这是我到目前为止所拥有的：

```
template<typename T>
struct maybe {
  bool valid;

  union {
    T value;
  };

  maybe() : valid(false) {}
  maybe(const T& _v) {
  valid = true;
    new (&value) T(_v);
  }
  maybe(const maybe& other) {
    if (other.valid) {
      valid = true;
      new (&value) T(other.value);
    }
    else valid = false;
  }

  ~maybe() {
     if (valid)
       value.~T();
  }

  bool is_valid() { return valid; }

  operator T&() {
    if (valid) return value;
    throw std::bad_exception();
  }
}; 
```

我利用不受限制的联合功能为可以就地存储的可选值创建正确对齐的空间，而不是动态分配空间。事情大部分都有效，除非我想创建一个带有引用的可能<>。例如`maybe<int&>`导致 g++ 4.7 抱怨：

```
error: ‘maybe<int&>::<anonymous union>::value’ may not have reference type ‘int&’
because it is a member of a union 
```

我应该怎么做才能使可能的类存储引用？也欢迎对课程提出任何其他改进/建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T00:22:04.280

要使用引用进行此操作，您肯定需要明确的专业化，因为您不能对引用进行放置新：您需要使用指针进行存储。

除此之外，代码缺少复制赋值运算符。移动构造函数和移动赋值运算符也很好（特别是因为这是重新实现的#1 原因`boost::optional`：boost 中缺少它们）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-03T22:58:16.260

可选类型是为 C++14 提出的，但由于标准中未定义行为的一些极端情况，它被推迟到 C++17。

幸运的是，UB 问题对大多数人来说并不重要，因为所有主要编译器都正确定义了它。因此，除非您使用旧的编译器，否则您实际上可以只放入可用于在项目中实现可选类型的代码（它只是一个头文件）：

[https://raw.githubusercontent.com/akrzemi1/Optional/master/optional.hpp](https://raw.githubusercontent.com/akrzemi1/Optional/master/optional.hpp)

然后你可以像这样使用它：

```
#if (defined __cplusplus) && (__cplusplus >= 201700L)
#include <optional>
#else
#include "optional.hpp"
#endif

#include <iostream>

#if (defined __cplusplus) && (__cplusplus >= 201700L)
using std::optional;
#else
using std::experimental::optional;
#endif

int main()
{
    optional<int> o1,      // empty
                  o2 = 1,  // init from rvalue
                  o3 = o2; // copy-constructor

    if (!o1) {
        cout << "o1 has no value";
    } 

    std::cout << *o2 << ' ' << *o3 << ' ' << *o4 << '\n';
} 
```

# imagemagick - imagemagick 不会删除 tmp 文件

> ID：11875046
> 
> 赞同：6
> 
> 时间：2012-08-09T00:13:04.653
> 
> 标签：imagemagick, carrierwave, rmagick

我有一个使用 Carrierwave、S3 和 rmagci 的应用程序。或多或少遵循[http://railscasts.com/episodes/253-carrierwave-file-uploads](http://railscasts.com/episodes/253-carrierwave-file-uploads)但只是上传到 S3 而不是本地。

我注意到 public/uploads/ 中的临时文件在创建图像后不会被删除。这会导致我的电脑随着时间的推移而感觉起来并崩溃。

我环顾四周，发现的唯一解决方案是编写一个 cron 作业来删除它们[http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15960](http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=15960)

知道是否有更好的方法在代码中执行此操作而不是 cronjob？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T00:57:04.247

截至 2013 年 1 月，没有删除临时文件的官方方法，因此 imagemagic 让您自己动手。我还使用每 20 分钟运行一次的 cron 作业，因为临时文件的大小为 10+ GB。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-10T02:07:10.003

这意味着您的 ImageMagick 安装无法正常运行！

它在 tmp 中留下 magick-* 文件的事实表明 ImageMagick 进程已经死亡，这就是它没有删除这些文件的原因。您应该配置内存限制等。请参阅[http://www.imagemagick.org/script/resources.php](http://www.imagemagick.org/script/resources.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-16T23:59:51.277

这个问题我有一段时间了，我的代码问题是我没有使用destroy函数：

```
$im->destroy(); 
```

调用destroy函数时，它将删除`/tmp`目录下的临时文件。这是针对 PHP 的，也许它会对某人有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T00:26:17.093

使用基于任务的方法总是更好，而不是因为删除东西而阻塞运行时。只需每天运行一次任务。

# javascript - jQuery.post 没有将数据发送到指定的 URL

> ID：11875047
> 
> 赞同：0
> 
> 时间：2012-08-09T00:13:21.053
> 
> 标签：javascript, json, jquery

我有一个移动应用程序，我有很多数据要放入 JSON 对象以存储在 localStorage 中。我需要把这些数据交给 PHP 来处理它。我选择使用 jQuery.ajax 将数据作为 JSON 对象发送到 PHP。但是，当我运行该函数时，它会给出一条成功消息，但不会转到指定的 url。我有很多 PHP 经验，但这是我的第一个 JS 密集型项目。

这是我的 JS 代码：

```
function sendToPHP() {
  jQuery.ajax({
    type: "POST",
    url: "email.php",
    data: { "json" : ATRdataJSON},
    success: function(data){
        console.log("Data Sent!");
    },
  });
}; 
```

ATRdataJSON 是一个 JSON 对象，其中嵌套了多个 JSON 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:30:05.907

URL 可能没有指向您认为它指向的位置。尝试：

```
function sendToPHP() {
  jQuery.ajax({
    type: "POST",
    url: "/email.php",
    data: { "json" : ATRdataJSON},
    success: function(data){
        console.log("Data Sent!");
    },
  });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:36:59.517

恐怕你不能在不对其进行字符串化的情况下发送 json 对象，它可能会被发送，但作为一个字符串`[object]`尝试先检查它，然后你可以确保 url 是绝对的，以确保它进入正确的控制器。

# python - 每个数据点的 k 最近邻脚本

> ID：11875048
> 
> 赞同：1
> 
> 时间：2012-08-09T00:13:55.857
> 
> 标签：python, knn

我有很多功能，如下所示：

```
x1 28273 20866 29961 27190 31790 19714 8643 14482 5384 ....  upto 1000  
x2 12343 45634 29961 27130 33790 14714 7633 15483 4484 ....  
x3 ..... ..... ..... ..... ..... ..... .... ..... .... ....
.  
.  
.  
.  
x1000 .... .... ... ..  .  .  .  . 
```

我正在尝试计算每个特征的 k 最近邻，对于`k=5`. 我正在使用 numpy 和 scipy 包，但是，由于数据集很大（1000 x 1000），它的计算似乎很复杂。有没有更简单的方法来使用 python 计算 kNN？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:17:13.843

[您应该使用 scikits.learn](http://scikit-learn.org/0.11/modules/neighbors.html)。

# c# - 设置 DataContext 后 PropertyChanged 事件为空

> ID：11875049
> 
> 赞同：2
> 
> 时间：2012-08-09T00:13:58.263
> 
> 标签：c#, wpf, prism, datacontext, propertychanged

我在 View 的构造函数中将我的 View 的 DataContext 设置为我的 ViewModel 的一个实例，只是标准的东西。此后不久，一个**UPDATE_RECENT_DOCUMENTS_LIST**事件从我的 ViewModel 正确捕获的事件聚合器中触发。更改了属性并调用了 onPropertyChanged 方法，但由于 PropertyChanged 事件为空而失败。

我要做的下一件事是对 UI 执行一个操作，该操作引发**CREATE_PROJECT**事件，并且同一个 ViewModel 正在接收事件，但现在，PropertyChanged 事件不再为空，一切都按预期工作。

在设置 DataContext 之后，在它注册到 PropertyChanged 事件之前是否需要经过特定的时间量？是否有一个我可以等待的事件来确保 PropertyChanged 事件不为空？

此外，在集成 Prism 并使用非常方便的 EventAggregator 之后，我没有使用标准 .NET 事件遇到这个问题。

我在 View 和 ViewModel 后面显示我的代码，为简洁起见省略了 View XAML。

工具栏视图.xaml.cs：

```
namespace ToolBarModule
{   

public partial class ToolBarView : UserControl
    {                           
        public ToolBarView(ToolBarViewModel toolBarViewModel)
        {
            InitializeComponent();             
            this.DataContext = toolBarViewModel;                                
        }        
    }
} 
```

工具栏视图模型.cs

```
namespace ToolBarModule
{

public class ToolBarViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private ToolBarCommands baseCommands;
    private IEventAggregator eventAggregator;

    private KickStartEvent kickStartEvent;
    private SubscriptionToken subscriptionToken;

    private ObservableCollection<IDocumentReference> recentDocuments = new ObservableCollection<IDocumentReference>();

    private ActionCommand newTest;
    private ActionCommand openTest;
    private ActionCommand saveTest;        
    private ActionCommand exitApplication;

    public ToolBarViewModel(){}

    public ToolBarViewModel(IEventAggregator eventAggregator)
    {
        this.eventAggregator = eventAggregator;
        baseCommands = new ToolBarCommands(eventAggregator);
        kickStartEvent = eventAggregator.GetEvent<KickStartEvent>();
        subscriptionToken = kickStartEvent.Subscribe(kickStartEventHandler, ThreadOption.UIThread, true, toolBarEventHandlerFilter);            
    }

    public ICommand NewTest
    {
        get
        {
            if (newTest == null)
            {
                newTest = new ActionCommand(baseCommands.NewTestAction);
            }
            return newTest;
        }
    }

    public ICommand OpenTest
    {
        get
        {
            if (openTest == null)
            {
                openTest = new ActionCommand(baseCommands.OpenTestAction);
            }
            return openTest;
        }
    }

    public ICommand SaveTest
    {
        get
        {
            if (saveTest == null)
            {
                saveTest = new ActionCommand(baseCommands.SaveTestAction);
            }
            return saveTest;
        }
    }

    public ICommand ExitApplication
    {
        get
        {
            if (exitApplication == null)
            {
                exitApplication = new ActionCommand(baseCommands.ExitApplicationAction);
            }
            return exitApplication;
        }
    }

    public ObservableCollection<IDocumentReference> RecentDocuments
    {
        get
        {
            return recentDocuments;
        }

        set
        {
            recentDocuments = value;
            onPropertyChanged("RecentDocuments");
        }
    }

    private void onPropertyChanged(string propertyChanged)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this,new PropertyChangedEventArgs(propertyChanged));
        }

    }

    private void kickStartEventHandler(KickStartEventsArgs e)
    {
        switch (e.EventType)
        {
            case KickStartEventsArgs.KickStartEventType.CREATE_PROJECT:
                onPropertyChanged("RecentDocuments");
            break;                

            case KickStartEventsArgs.KickStartEventType.UPDATE_RECENT_DOCUMENTS_LIST:
            RecentDocuments.Clear();

            foreach (IDocumentReference recentDocs in e.KickStartTestList)
            {
                RecentDocuments.Add(recentDocs);
            }
            onPropertyChanged("RecentDocuments");
            break;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-11T11:37:41.787

您还可以尝试在 UserControl 下方设置 Grid 或 Element 的 DataContext。对我来说，它奏效了。

示例（如果您使用 DependencyProperty，则**不起作用）：**

代码背后：

```
public MyUserControl()
{
     InitializeComponent();
     this.DataContext = new { LabelText = "Hello World!" };
} 
```

XAML

```
<UserControl x:Class="CoolProject.ViewModel.MyUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="450" d:DesignWidth="800">
<Label x:Name="myLabel" Content="{Binding LabelText}"/> 
```

示例 2（**我的工作代码**）：

代码背后：

```
public MyUserControl()
{
     InitializeComponent();
     this.myGrid.DataContext = new { LabelText = "Hello World!" };
} 
```

XAML

```
<UserControl x:Class="CoolProject.ViewModel.MyUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="450" d:DesignWidth="800">

<Grid x:Name="myGrid">
    <Label x:Name="myLabel" Content="{Binding LabelText}"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:30:22.707

您必须命名您的`UserControl`in`XAML`并在绑定中使用它。类似于以下代码：

```
<UserControl x:Name="uc" >
.
.
.
<TextBox Text="{Binding UserName, Mode=TwoWay, ElementName=uc}"/> 
```

`uc`您的名称在哪里`UserControl`，并且还尝试在加载 UserControl 时设置 DataContext。

希望这有帮助。

# java - 全局可访问的对象？

> ID：11875050
> 
> 赞同：0
> 
> 时间：2012-08-09T00:14:03.313
> 
> 标签：java, global-variables

我正在制作一个小型 rpg 游戏，并为对象之间的事件驱动通信实现了一种观察者设计模式。我有一个 EventManager 注册侦听器、接受新事件和调度事件。问题是每个需要发送或接收事件的对象都需要一个 EventManager 实例来调用 addEvent() 或 register()。由于我程序中的几乎每个对象都将使用该系统（以减少耦合并避免数据修改错误），因此我需要一种访问它的好方法。

目前，我正在将引用显式传递给它们的构造函数和方法中的大量对象，但随着规模的增加，这变得越来越混乱。特别是因为我开始在角色等对象中需要它，而角色不是在游戏中构建的；它们是从数据文件中反序列化的。

我知道全局变量通常是不好的设计，但这些是我可以看到的选项，所有这些都受到批评：

a) 使 EventManager 中的每个字段和方法都是静态的

b) 采用单例设计

c) 制作一个公共静态 EventManager

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:20:11.100

实际上，您目前正在做的是最佳实践。依赖注入很重要，不仅对于模块化，而且对于测试。您可以通过使用工厂来减轻传递参数的负担。

如果您要使用全局变量（您不应该这样做），那么在 Java 中执行此操作的方法是某个类的静态公共字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:29:01.850

我个人会推荐静态。静态和单例之间的巨大差异。我是注入的粉丝，但不是这样一个接收依赖项的类可以传递它。只是我自己的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T01:52:52.667

依赖注入框架 ( [Google Guice](http://code.google.com/p/google-guice/) ) 提供了一种跨大型应用程序管理引用的好方法。除了允许您更改应用程序（例如，您想要 2 个事件管理器或每个玩家一个) 仅更新相关的导出模块。

它还允许通过将类与其依赖项解耦来更轻松地进行单元测试（如果您有一个单例事件管理器，那么使用[模拟框架](http://code.google.com/p/mockito/)来测试每个类而不必构建整个对象层次结构将更加困难。

# silverlight - 具有 DependencyProperties 的 IMarkupExtension

> ID：11875051
> 
> 赞同：2
> 
> 时间：2012-08-09T00:14:18.540
> 
> 标签：silverlight, silverlight-5.0, markup-extensions

我正在尝试使用`IMarkupExtension<T>`具有一些 DependencyProperties 进行绑定的自定义标记扩展。但是，我正在努力解决在 XAML 解析时解决标记扩展的问题，以及稍后才解决绑定的问题。我似乎从来没有通过绑定得到任何东西：它们总是为空并且从不调用它们的更改回调。

[文档](http://msdn.microsoft.com/en-us/library/gg712747%28v=vs.95%29.aspx)提到了一些关于返回标记扩展实例的内容（在“返回当前标记扩展实例”下），但这似乎使事情爆炸，因为它是目标的错误类型。[这个 SL5 MultiBinding](http://www.codeproject.com/Articles/286171/MultiBinding-in-Silverlight-5)似乎将代理绑定返回到内部源对象，但我无法让它工作：我的绑定仍然没有设置。

我似乎找不到任何可靠的信息如何使用 DependencyProperties 实际实现标记扩展（尽管看起来很多人对 SL5 感到兴奋......）。任何人都可以提供任何指导或教程吗？

具体来说，我想要做的是创建一个标记扩展，它可以动态构造一个路径来绑定到一个列表，如下所示：

```
{my:ListLookup ListPath='List' Index={Binding Index}} 
```

我希望它基本上输出一个看起来像的 Binding `{Binding List[Index]}`，其中 Index 是动态的。这样做的目的是对列表和索引上的 MultiBinding 进行此操作，以便我们直接绑定到对象并获得更改通知。（如果有更好的方法来做到这一点......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:48:48.077

我已经对此进行了更多的摆弄，并且找到了解决方案。它基于我在问题中链接到的 SL5 MultiBinding 的实现。

诀窍是永远不会评估 MarkupExtension 上的绑定，因为它没有 DataContext 或其他东西，但是如果您从中获取 BindingExpression 并将其放入代理附加属性（附加到目标对象）中，那么您可以让绑定解决。

下面是一个简单的 MarkupExtension 来演示这一点。它所做的只是获取单个 Binding 并输出其值（适当地服从更改），但它显示了它是如何结合在一起的。这可以扩展到解决我正在谈论的字典问题，以及这个问题。

```
public class SimpleBindingMarkupExtension : DependencyObject, IMarkupExtension<object>, INotifyPropertyChanged
{
    public object Binding
    {
        get { return (object)GetValue(BindingProperty); }
        set { SetValue(BindingProperty, value); }
    }

    public static readonly DependencyProperty BindingProperty =
        DependencyProperty.Register(
            "Binding",
            typeof(object),
            typeof(SimpleBindingMarkupExtension),
            new PropertyMetadata(null));

    public static readonly DependencyProperty ProxyAttachedBindingProperty =
        DependencyProperty.RegisterAttached(
            "ProxyAttachedBinding",
            typeof(object),
            typeof(SimpleBindingMarkupExtension),
            new PropertyMetadata(null, OnProxyAttachedBindingChanged));

    public static readonly DependencyProperty AttachedMarkupExtensionProperty =
        DependencyProperty.RegisterAttached(
            "AttachedMarkupExtension",
            typeof(SimpleBindingMarkupExtension),
            typeof(SimpleBindingMarkupExtension),
            new PropertyMetadata(null));

    private object _bindingSource;
    public object BindingSource
    {
        get { return _bindingSource; }
        set
        {
            _bindingSource = value;
            OnPropertyChanged("BindingSource");
        }
    }

    private static void OnProxyAttachedBindingChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        // Pull the MarkupExtension from the attached property
        var markupExtension = (SimpleBindingMarkupExtension) d.GetValue(AttachedMarkupExtensionProperty);
        markupExtension.ProxyAttachedBindingChanged(e.NewValue);
    }

    private void ProxyAttachedBindingChanged(object value)
    {
        BindingSource = value;
    }

    public object ProvideValue(IServiceProvider serviceProvider)
    {
        IProvideValueTarget target = (IProvideValueTarget) serviceProvider.GetService(typeof (IProvideValueTarget));

        DependencyObject targetObject = target.TargetObject as DependencyObject;
        if (targetObject == null)
            return null;

        // Attach this MarkupExtension to the object so we can find it again from attached property change callbacks
        targetObject.SetValue(AttachedMarkupExtensionProperty, this);

        // Put binding onto proxy attached property, so it actually evaluates
        var localValue = ReadLocalValue(BindingProperty);
        var bindingExpression = localValue as BindingExpression;
        if (bindingExpression == null)
        {
            return localValue;
        }

        Binding originalBinding = bindingExpression.ParentBinding;
        BindingOperations.SetBinding(targetObject, ProxyAttachedBindingProperty, originalBinding);

        // Give the target a proxy Binding that binds to a property on the MarkupExtension
        Binding binding = new Binding
        {
            Path = new PropertyPath("BindingSource"),
            Source = this
        };

        return binding.ProvideValue(serviceProvider);
    }

    #region INotifyPropertyChanged

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

用法：

```
<TextBlock Text="{local:SimpleBindingMarkupExtension Binding={Binding Text}}"/> 
```

如前所述，此示例将产生与刚才说的相同的结果`Text="{Binding Text}"`，但显示了解决方案。

# android - 如何覆盖我的 android 应用程序外部的侧音量键

> ID：11875052
> 
> 赞同：1
> 
> 时间：2012-08-09T00:14:22.987
> 
> 标签：android, android-activity, volume

我想禁用侧面音量按钮，因此控制音量的唯一方法是通过我的 android 应用程序中的专用活动。通过添加以下代码，我设法为我的所有活动禁用它：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    Log.d(TAG, "onKeyDown = " + keyCode);
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        return true;
        }
    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
        return true;
    }
    return super.onKeyDown(keyCode, event); 
```

}

但我不知道如何为我从我的应用程序启动的活动禁用它（例如我启动图库应用程序）！

我知道“Volume Locker”应用程序可能会做类似的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T03:01:02.513

在公共 API 中不可能抑制您自己的活动之外的关键事件，如果有一个应用程序已经设法做到这一点，那么他们正在做的事情将被平台设计者认为是恶意的，并且会在某个时候得到修复。

根据对该应用程序的描述（注意：我从未亲自使用过）

> 防止意外更改您的音量设置，立即安装 Volume Locker。此应用程序通过托盘通知或弹出窗口确认您所做的更改，有助于防止意外的音量更改。如果您不批准更改，卷将在设定的秒数内重置...通过将超时设置为“即时”，锁定的卷将立即恢复而不会提示。

我怀疑这实际上是在使用与[此答案中](https://stackoverflow.com/questions/7130455/volume-change-listener)的技术类似的技术来监听音量按钮，并立即恢复所做的任何更改（ish）。这会让用户觉得按键好像什么也没做，但实际上发生的事情是音量改变了，然后很快又变回来了。

# php - 贝宝 IPN 集成到 PHP

> ID：11875053
> 
> 赞同：-1
> 
> 时间：2012-08-09T00:14:23.817
> 
> 标签：php, curl, paypal, paypal-ipn

我无法将 Paypal 的 IPN 集成到我的 php 中，我有以下脚本，当在 paypal 沙箱中进行付款时，它一直处于默认情况。

任何帮助，将不胜感激！

```
$request = "cmd=_notify-validate"; 
    foreach ($_POST as $varname => $varvalue){
        $email .= "$varname: $varvalue\n";  
        if(function_exists('get_magic_quotes_gpc') and get_magic_quotes_gpc()){  
            $varvalue = urlencode(stripslashes($varvalue)); 
        }
        else { 
            $value = urlencode($value); 
        } 
        $request .= "&$varname=$varvalue"; 
    } 
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,"https://www.sandbox.paypal.com/cgi-bin/webscr");
    //curl_setopt($ch,CURLOPT_URL,"https://www.paypal.com");
    curl_setopt($ch,CURLOPT_POST,true);
    curl_setopt($ch,CURLOPT_POSTFIELDS,$request);
    curl_setopt($ch,CURLOPT_FOLLOWLOCATION,false);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
    $result = curl_exec($ch);
    curl_close($ch);

    switch($result){
        case "VERIFIED":
                    mail('test@test.com','worked','worked');
            break;
        case "INVALID":
            mail('test@test.com','invaild','invaild');
            break;
        default:
            mail('test@test.com','failed','failed');
    } 
```

如果我给自己发电子邮件 $result 它只是空白。

编辑：我发现这是我的 LAMP 的服务器端问题，但不确定如何解决。

注意：我确实在服务器上安装了 curl，但我不确定它是否配置正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:25:26.330

我建议使用位于此处的 var_dump 和 Paypal 的测试工具进行一些调试：[https ://developer.paypal.com/cgi-bin/devscr?cmd=_ipn-link-session](https://developer.paypal.com/cgi-bin/devscr?cmd=_ipn-link-session)

我可以理解使用第三方服务会变得困难且耗时。

可能值得简单地获取 POST 数据，将其序列化并将其应用于变量，这样您就可以在 PayPal 不触发回调的情况下进行测试。

我最初会做这样的事情来获取 PayPal POST。

```
<?php
   file_put_contents(serialize($_POST), 'post.log');
   //Now you have the post request serialized we can grab the contents and apply it to a variable for fast testing.
?> 
```

您的代码的开始：

```
<?php
    $_POST = unserialize(file_get_content('post.log'));
    //Now you can execute the script via command line or within your browser without requiring PayPal's testing tool. Use var_dump to investigate what's the issue.
    $request = "cmd=_notify-validate"; 
    foreach ($_POST as $varname => $varvalue){
        $email .= "$varname: $varvalue\n";  
        if(function_exists('get_magic_quotes_gpc') and get_magic_quotes_gpc()){  
            $varvalue = urlencode(stripslashes($varvalue)); 
        }
        else { 
            $value = urlencode($value); 
        } 
        $request .= "&$varname=$varvalue"; 
    }
?> 
```

现在：这在测试方面更加有效和高效。在您的示例中，您正在给自己发送电子邮件，但在邮件功能正文中的任何位置都没有包含 $result。 [http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

PayPal 的 IPN 示例使用 fsock，尽管 CURL 更有效且更易于使用。PayPal 的沙盒更改最近也出现了一些问题。[https://www.paypal-community.com/t5/Selling-on-your-website/IPN-response-problem/mp/519862/message-uid/519862#U519862](https://www.paypal-community.com/t5/Selling-on-your-website/IPN-response-problem/m-p/519862/message-uid/519862#U519862)

另外：要确定主要原因是什么，正如您所说，这似乎是您的 LAMP 堆栈。通常从它们检查您的日志目录（通常是/var/log/），您将能够查明失败的原因。

# java - 在 Java 中插入和搜索大量数据

> ID：11875054
> 
> 赞同：0
> 
> 时间：2012-08-09T00:14:29.477
> 
> 标签：java, xml

我正在用 Java 编写一个程序来跟踪有关棒球卡的数据。我正在尝试决定如何持久存储数据。我一直倾向于将数据存储在 XML 文件中，但我不熟悉 XML API。（我已经阅读了一些在线教程并开始尝试`javax.xml`层次结构中的类。）

该软件具有主要用例：用户将能够添加卡片和搜索卡片。

当用户添加卡片时，我想立即将数据提交到持久存储。标准 API 是否允许我以随机访问的方式插入数据（甚至附加可能没问题）。

当用户搜索卡片时（例如，通过玩家的名字），我想从存储中加载一个列表，而不必加载整个文件。

我最担心的是我需要存储大量独特卡片的数据（大约数千张，可能更多）。我不想在程序打开时将所有卡的列表存储在内存中。我没有运行任何测试，但我相信我可以轻松地达到内存限制。

XML 可能不是最好的解决方案。但是，我想让它的安装尽可能简单，所以我试图避免使用 JDBC 或任何第三方库的成熟数据库。

所以我想我在问我是否朝着正确的方向前进，如果是这样，我在哪里可以了解更多关于以我想要的方式使用 XML 的信息。如果没有，是否有人对我可以使用哪些其他类型的存储来完成此任务有建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:25:55.503

虽然我当然不会反对使用 XML，但它在您的上下文中确实有一些缺点。

*“标准 API 是否允许我以随机访问方式插入数据”*

是的，在记忆中。不过，您必须将整个模型保存回文件。

*“当用户搜索卡片时（例如，通过玩家的名字），我想从存储中加载列表而不必加载整个文件”*

除非您希望多个用户读取/写入文件，否则我可能会在加载时将整个文件/模型拉入内存并保留在那里直到您想要保存（定期写入后台仍然是一个好主意）

*我不想在程序打开时将所有卡的列表存储在内存中。我没有运行任何测试，但我相信我可以轻松地达到内存限制*

那将是我关心的。但是，您可以使用 SAX 解析器将文件读入自定义模型。这将减少内存开销（因为 DOM 解析器可能对内存有点贪婪）

*“但是，我想让它尽可能简单地安装，所以我试图避免使用 JDBC 的成熟数据库”*

我会在这方面做更多的研究。我（个人）大量使用[H2](http://www.h2database.com/html/main.html)和[HSQLDB](http://hsqldb.org/)来存储大量数据。这些是小型的个人数据库系统，不需要任何额外的安装（链接到程序的 Jar 文件）或特殊的服务器/服务。

它们使您可以非常轻松地跨数据存储构建复杂的搜索，否则您需要自己创建这些搜索。

如果您要使用 XML，我可能会做以下三件事之一

1 - 如果您要在内存中维护 XML 文档，我会熟悉 XPath（[简单教程](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFwQFjAA&url=http://www.w3schools.com/xpath/&ei=8wIjUMz3H9OgiQeosoCYDA&usg=AFQjCNGnqfjNU8axSnUoUmwLFt90KJwLWw)和[Java 的 API](http://docs.oracle.com/javase/7/docs/api/javax/xml/xpath/package-summary.html)）进行搜索。

2 - 我将使用对象创建数据的“模型”来表示各种节点，并使用 SAX 读取它。写作可能有点棘手。

3 - 使用一个简单的 SQL DB（和对象模型） - 它只是整个过程（恕我直言）

**额外的**

好像我对你的倾诉还不够；）

如果您真的想要 XML（同样，我不会劝阻您），您可能会考虑查看 XML 数据库样式的解决方案

[Apache Xindice](http://xml.apache.org/xindice/)（显然已退休）

或者你可以看看其他人的想法

*   [在 Java 中使用 XML 作为数据库](https://stackoverflow.com/questions/4842813/use-xml-as-database-in-java)
*   [Java：将 XML 导入数据库，最简单的方法是什么？](https://stackoverflow.com/questions/4248378/java-xml-into-a-database-whats-the-simplest-way)

例如 ;）

# ioc-container - 如何使用 StructureMap 解决行为变化？

> ID：11875060
> 
> 赞同：0
> 
> 时间：2012-08-09T00:15:25.527
> 
> 标签：ioc-container, structuremap, multi-tenant

我有一组注册到 StructureMap 的组件。根据实际租户，解决组件的最佳方法应该是什么？

小例子：有两个租户，比如 Yellow 和 Green。我有一个`IValidator`有两个实现：`YellowValidator`和`GreenValidator`. 假设应用程序是 MVC，并且 tentant 来自 URL。所以，我只需要`IValidator`根据租户进行适当的注入。

我见过许多只处理多租户数据的多租户应用程序解决方案，通常根据租户配置不同的数据库。这仅涉及参数传递。但这种情况下，变化发生在行为中，而不是在数据中。我希望 IoC 容器透明地解析正确的实例。

编辑：更多信息： IValidator 接口有一个简单的方法`bool Validate()`，但实现需要一些注入。

还有其他自定义验证器，但两个租户都使用它们。

有一个基于 URL 的明确的 tentant 策略。这意味着每个请求可以有不同的租户，并且单个应用程序可以为两个租户提供服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:28:00.417

给猫剥皮的方法有很多种。我很难猜测您的应用程序的设计，所以这里有一个想法。想到的事情是将验证器隐藏在[组合](http://en.wikipedia.org/wiki/Composite_pattern)后面，以允许`IValidator`接口的用户对拥有许多实现一无所知。这样的组合看起来像这样：

```
public class ValidatorComposite : IValidator
{
    private IEnumerable<IValidator> validators;

    public ValidatorComposite(
        IEnumerable<IValidator> validators)
    {
        this.validators = validators;
    }

    public bool Validate(object instance)
    {
        return this.validators.All(v => v.Validate(instance));
    }
} 
```

您可以创建多个组合并通过键注册它们，其中键是租户的名称（但没有键注册可能同样容易）。这些组合可以包装在另一个组合中，该组合将委托给适当的租户特定组合。这样的租户选择组合可能如下所示：

```
public class TenantValidatorComposite : IValidator
{
    private ITenantContext tenantContext;
    private IValidator defaultValidator;
    private IDictionary<string, IValidator> tenantValidators;

    public ValidatorComposite(
        ITenantContext tenantContext,
        IValidator defaultValidator,
        IDictionary<string, IValidator> tenantValidators)
    {
        this.tenantContext = tenantContext;
        this.defaultValidator = defaultValidator;
        this.tenantValidators = tenantValidators;
    }

    public bool Validate(object instance)
    {
        string name = this.tenantContext.CurrentTenant.Name;

        return this.defaultValidator.Validate(instance) &&
            this.tenantValidators[name].Validate(instance);
    }
} 
```

这`ITenantContext`是一个抽象，允许您在当前上下文中获取当前租户。你可能已经有了类似的东西，但我想象一个实现看起来像这样：

```
class UrlBasedTenantContext : ITenantContext
{
    public Tenant Current
    {
        get
        {
            // Naive implementation.
            if (HttpContext.Current.Request.Url.Contains("tenant1"))
            {
                return Tenant1;
            }

            return Tenant2;
        }
    }
} 
```

创建一个`TenantValidatorComposite`很容易：

```
var defaultValidator = CompositeValidator(
    GetAllDefaultValidators());

var tenantValidators = new Dictionary<string, IValidator>()
{
    { "tenant1", new CompositeValidator(GetValidatorsFor("tenant1")) },
    { "tenant2", new CompositeValidator(GetValidatorsFor("tenant2")) },
};

var tenantValidator = new TenantValidatorComposite(
    new UrlBasedTenantContext(),
    defaultValidator,
    tenantValidators); 
```

我希望这有帮助。

# facebook - Facebook 分享无法识别完整 URL

> ID：11875063
> 
> 赞同：-1
> 
> 时间：2012-08-09T00:16:07.340
> 
> 标签：facebook, sharepoint, share, fbconnect, facebook-wall

我正在尝试分享这样的网址：

```
http://www.facebook.com/sharer/sharer.php?u=http://exemple.com?page=poster_info&sid=1 
```

...但 Facebook 忽略`&sid=1`. 我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:12:47.500

分享涉及调用此网址...

```
http://www.facebook.com/sharer.php?u=MY_LINK 
```

在**MY_LINK**上使用 php 函数**urlencode()**

# gwt - 我怎么知道 SingleSelectionModel.getSelectedObject() 是否为 NULL？

> ID：11875066
> 
> 赞同：0
> 
> 时间：2012-08-09T00:16:25.573
> 
> 标签：gwt, gwt-platform

让我解释。

```
SingleSelectionModel<UsuarioDTO> selectionModel = 
new SingleSelectionModel<UsuarioDTO>();

@Override
public UsuarioDTO getUsuarioSelecionado() {
   return selectionModel.getSelectedObject();
} 
```

当我想获得选定的 UsuarioDTO 时，我调用它，但是当我的应用程序启动时，我没有选择 UsuarioDTO，因此如果调用它，我将得到 NullPointerException。

我的问题是：我可以比较一些东西来避免 NullPointer 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:02:59.783

```
if (yourObject.getUsuarioSelecionado() == null) {
   // do something if it is null
} else {
   // do something with the DTO
   yourObject.getUsuarioSelecionado().callSomeMethod(); 
} 
```

那是你要找的吗？检查是否有东西`null`？

# mysql - mysql 在日期时间戳问题上按范围分区

> ID：11875068
> 
> 赞同：0
> 
> 时间：2012-08-09T00:16:36.200
> 
> 标签：mysql

我在使用日期时间列上的范围分区对表进行分区时遇到问题。

测试搜索结果仍然是全分区扫描。

我在网上看到了一些关于这个问题的帖子，但不确定是否有任何方法可以解决它或绕过这个问题。

mysql 服务器：Percona 5.5.24-55。

桌子：

`id`bigint(20) unsigned NOT NULL, `time`datatime unsigned NOT NULL, .... ....

键`id_time`( `id`, `time`)

引擎=InnoDB

分区声明：

alter table summary_201204 partition by range (day( `time`)) subpartition by key( `id`) subpartitions 5（partition p0 值小于（6），partition p1 值小于（11），partition p2 值小于（16），partition p3 值小于大于 (21)，分区 p4 值小于 (26)，分区 p5 值小于 (MAXVALUE) )；

检查：解释分区 select * from summary_201204 where `time`< '2012-07-21';

result: p0_p0sp0,p0_p0sp1,p0_p0sp2,p0_p0sp3,p0_p0sp4,p1_p1sp0,p1_p1sp1,p1_p1sp2,p1_p1sp3,p1_p1sp4,p2_p2sp0,p2_p2sp1,p2_p2sp2,p2_p2sp3,p2_p2sp4,p3_p3sp0,p3_p3sp1,p3_p3sp2,p3_p3sp3,p3_p3sp4,p4_p4sp0,p4_p4sp1,p4_p4sp2,p4_p4sp3, p4_p4sp4、p5_p5sp0、p5_p5sp1、p5_p5sp2、p5_p5sp3、p5_p5sp4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:21:12.410

我想这就是答案：访问[在此处输入链接描述](http://dev.mysql.com/tech-resources/articles/mysql_55_partitioning.html)

所以，mysql官网的文档对分区所需的数据类型不够清楚。在这种情况下，如果表数据类型是 datetime，那么我们应该使用 to_seconds，而如果数据类型是 DATE，那么我们可以使用 YEA

# arrays - Cuda 检索 3d 数组

> ID：11875069
> 
> 赞同：0
> 
> 时间：2012-08-09T00:16:42.393
> 
> 标签：arrays, 3d, cuda

我无法弄清楚如何从 GPU 中检索 3D 数组。我想在主机代码中为 3d 数组分配内存，调用内核，数组将在其中填充，然后将主机代码中的 3D 数组检索到 mexFunction（主机代码）中的返回变量。

我已经做了几次尝试，这是我最新的代码。结果都是'0'，它们应该是'7'。谁能告诉我哪里出错了？它可能与 3D 参数有关，我认为我不完全理解那部分。

模拟3DArrays.cpp

```
/* Device code */
__global__ void simulate3DArrays(cudaPitchedPtr devPitchedPtr, 
                             int width, 
                             int height, 
                             int depth) 
{
int threadId;
threadId = (blockIdx.x * blockDim.x) + threadIdx.x;

size_t pitch = devPitchedPtr.pitch; 

for (int widthIndex = 0; widthIndex < width; widthIndex++) {
    for (int heightIndex = 0; heightIndex < height; heightIndex++) {

        *((double*)(((char*)devPitchedPtr.ptr + threadId * pitch * height) + heightIndex * pitch) + widthIndex) = 7.0;

    }
}    
} 
```

mexFunction.cu

```
/* Host code */
#include <stdio.h>
#include "mex.h"

/* Kernel function */
#include "simulate3DArrays.cpp"

/* Define some constants. */
#define width  5
#define height 9
#define depth  6

void displayMemoryAvailability(mxArray **MatlabMemory);

void mexFunction(int        nlhs,
             mxArray    *plhs[],
             int        nrhs,
             mxArray    *prhs[])
{

double *output;
mwSize ndim3 = 3;
mwSize dims3[] = {height, width, depth};

plhs[0] = mxCreateNumericArray(ndim3, dims3, mxDOUBLE_CLASS, mxREAL);
output = mxGetPr(plhs[0]);

cudaExtent extent = make_cudaExtent(width * sizeof(double), height, depth);
cudaPitchedPtr devicePointer;
cudaMalloc3D(&devicePointer, extent);

simulate3DArrays<<<1,depth>>>(devicePointer, width, height, depth);

cudaMemcpy3DParms deviceOuput = { 0 };
deviceOuput.srcPtr.ptr = devicePointer.ptr;
deviceOuput.srcPtr.pitch = devicePointer.pitch;
deviceOuput.srcPtr.xsize = width;
deviceOuput.srcPtr.ysize = height;

deviceOuput.dstPtr.ptr = output;
deviceOuput.dstPtr.pitch = devicePointer.pitch;
deviceOuput.dstPtr.xsize = width;
deviceOuput.dstPtr.ysize = height;

deviceOuput.kind = cudaMemcpyDeviceToHost;
/* copy 3d array back to 'ouput' */
cudaMemcpy3D(&deviceOuput);

return;
} /* End Mexfunction */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:12:10.987

基本问题似乎是您正在指示`cudaMemcpy3D`复制零字节，因为您没有包含定义传输到 API 的大小的非零范围。

您的转移可能很简单：

```
cudaMemcpy3DParms deviceOuput = { 0 };
deviceOuput.srcPtr = devicePointer;
deviceOuput.dstPtr.ptr = output;
deviceOuput.extent = extent;

cudaMemcpy3D(&deviceOuput); 
```

我无法评论您使用的 MEX 接口是否正确，但内核看起来表面上是正确的，而且我没有看到任何其他明显错误的地方，而无需使用编译器并尝试使用 Matlab 运行您的代码，而我不能.

# .net - 存储过程中的无效 obj 名称

> ID：11875071
> 
> 赞同：0
> 
> 时间：2012-08-09T00:16:51.083
> 
> 标签：.net, sql-server, vb.net, stored-procedures, cross-apply

我有一个存储过程，我使用交叉应用从表中获取字段“tagtext”，然后将每个 tagtext 作为条目放在另一个表中名为 Tags 的新字段中。不过，我并不热衷于交叉应用的工作原理，而且似乎遇到了一个错误：无效的对象 myArticles。

我的 sp 中的相关代码是：

```
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    declare @RowStart int
    declare @RowEnd int
    IF (@Page=1)
        Begin

            set @RowStart=(@Page-1)*(@PageLen)
            set @RowEnd=(@RowStart+@PageLen);
        END
    ELSE
        BEGIN

            set @RowStart=((@Page-1)*(@PageLen))+1
            set @RowEnd=((@RowStart+@PageLen))-1
        END;
        With myArticles as 
(select ROW_NUMBER() over (ORDER BY publicationdate DESC) as 'RowNumber',*

From article_v
where articleID in(select articleID from savedarticle where userID= @UserID)  and
title like '%'+@keyword1+'%' and
title like '%'+@keyword2+'%' and
title like '%'+@keyword3+'%' and
title like '%'+@keyword4+'%' and
title like '%'+@keyword5+'%' 
)

(select mA.*,
isnull(left(Tags,len(Tags)-1),'') as Tags
from myArticles mA
  cross apply (select tagtext +', '
    from usertag uTag 
    where uTag.userID=@userID and uTag.usertagID in(select usertagID from articletag aTag where aTag.articleID=mA.articleID)
    for xml path('')) ca(Tags)
 )
        select 
            rownumber,journalID,journalname,articleID,title,publicationdate,medabbr, authors, Tags
            from  myArticles where RowNumber Between @RowStart  and @RowEnd
END

GO 
```

然后，我在其中使用 sp 的 Web 服务是：

```
<WebMethod()> _
Public Function GetSavedArticlesWithAbbr(ByVal mobileGUID As String, ByVal pageNum As Integer, ByVal pageLen As Integer, ByVal keywords As String) As List(Of ipadArticle)
    Dim result As New List(Of ipadArticle)
    keywords = HttpUtility.UrlDecode(keywords)
    Dim tempParamKW() As String = {"", "", "", "", ""}
    Dim tempKW() As String = keywords.Split(" ")
    Dim tempILoop As Integer = 0
    For Each s As String In tempKW
        tempParamKW(tempILoop) = s.Trim
        tempILoop += 1
    Next
    Dim simpuser As SimpleUser = utils.GetSimpleUserInfoFromMobileGUID(mobileGUID)
    If simpuser.isValid Then
        Dim lq As New lqDFDataContext
        Dim var = lq.mobile_GetSavedArticlesJW(simpuser.UserID, tempParamKW(0), tempParamKW(1), tempParamKW(2), tempParamKW(3), tempParamKW(4), pageNum, pageLen)
        For Each a_var In var
            Dim ipadartcicle As New ipadArticle()
            ipadartcicle.ArticleID = a_var.articleID
            ipadartcicle.PublishedOn = a_var.publicationdate
            ipadartcicle.Title = a_var.title
            ipadartcicle.MedAbbr = a_var.medabbr.Replace(" ", "-").ToLower()

            Dim tempTags() As String = a_var.Tags.Split(",")
            For Each t As String In tempTags
            ipadartcicle.Tags.Add(t)
            Next

            Dim tempAuthors() As String = a_var.Authors.Split(",")
            For Each a As String In tempAuthors
            ipadartcicle.Authors.Add(a)
            Next

            result.Add(ipadartcicle)
        Next     'this is where i get the error
    End If
    Return result
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:34:56.350

试试这个，就像你错过了第二部分

```
With myArticles as 
(select ROW_NUMBER() over (ORDER BY publicationdate DESC) as 'RowNumber',*

From article_v
---rest of query here
),
myArticles2 as
(
 select mA.*,
 isnull(left(Tags,len(Tags)-1),'') as Tags
 from myArticles mA
  cross apply (select tagtext +', '
   --- rest of query here
)
   select 
            rownumber,journalID,journalname, .... rest of query here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T00:34:34.343

我想说您想在以下代码中的右括号和左括号之间链接另一个 cte，但忘记了：

```
title like '%'+@keyword5+'%' 
)

(select mA.*, 
```

这应该是

```
title like '%'+@keyword5+'%' 
),
myArticles2 as (select mA.*, 
```

然后查询的最后部分应该使用 myArticles2。正如现在所写，最后一个选择不是 cte 查询的一部分。

# facebook - 如何进行 FQL NOW()+1HOUR？

> ID：11875075
> 
> 赞同：2
> 
> 时间：2012-08-09T00:17:12.203
> 
> 标签：facebook, time, facebook-fql

这是我的 FQL：

```
$fql = 'SELECT eid FROM event WHERE eid IN (...) AND start_time>now()' 
```

我想要类似的东西...

```
$fql = 'SELECT eid FROM event WHERE eid IN (...) AND start_time-1hour>now()' 
```

或者...

```
$fql = 'SELECT eid FROM event WHERE eid IN (...) AND start_time>now()+1hour' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:26:11.510

我认为您可以在程序代码中计算您想要的时间，然后输出到 fql 查询。这样您就不需要 fql 中的函数来减去或添加日期时间。

在应用设置（高级）中为事件启用 ISO 时间。然后暂时使用以下值：

```
$now = date("c", time()+60*60); 
```

# android - Fragment 可以在继承自 FragmentActivity 的基类扩展的 Activity 中使用吗？

> ID：11875080
> 
> 赞同：0
> 
> 时间：2012-08-09T00:17:39.103
> 
> 标签：android

我的 MyActivity 扩展了 MyBaseActivity，它实际上扩展了 Activity。如果我的 BaseActivity 扩展 FragmentActivity 是 MyActivity 使用 Fragment 所需要的全部，还是需要更多的重构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:35:26.513

如果你有这个：

```
public class MyBaseActivity extends FragmentActivity{}
public class MyActivity extends MyBaseActivity{} 
```

是的，MyActivity 可以使用片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:42:05.920

FragmentActivity 如果 MyBaseActivity 扩展了 FragmentActivity，那么 MyActivity 可以使用 Fragment。

在 pre-API11 设备上使用 Android 兼容包时使用 FragmentActivity，因此您还应该在 libs 目录中包含 android.support.v4。

# php - is_numeric() 是否消除了对数字数据的 mysql_real_escape_string() 的需要？PHP

> ID：11875086
> 
> 赞同：1
> 
> 时间：2012-08-09T00:18:49.350
> 
> 标签：php, mysql, security, escaping

我有一个将 MySQL 表 ID 作为输入的函数。

而不是应用 mysql_real_escape_string，我可以只使用 is_numeric 吗？

像这样：

```
protected function validId($id) {
    if(!is_numeric($id)) return false; 
    // else do stuff
} 
```

编辑：

我还想提一下，我有时会使用这个：

$val = (int)$val;

这是 PHP 文档中关于类型转换的部分：http: [//php.net/manual/en/language.types.type-juggling.php#language.types.typecasting](http://php.net/manual/en/language.types.type-juggling.php#language.types.typecasting)

另外，我相信 mysql_real_escape_string 每次使用都需要访问数据库。为什么在验证整数时这样做？

编辑2：

此外，is_int() 不适用于表单输入，这就是我使用 is_numeric 的原因。但也许这样做可以解决问题并更快地工作/减少服务器负载：

```
protected function validId($id) {
    if(!is_numeric($id)) return false;  // confirm it is number or numeric string
    $id = (int) $id; // cast to int (will chop off decimals I believe)
    // do stuff
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:21:44.077

这取决于。

`is_numeric`允许十六进制表示法。如果您在查询中将它用引号括起来，那么它只会导致`0`，但如果您不这样做，那么它将被正确解释。`is_numeric`也允许科学记数法，它会遇到同样的问题。

就个人而言，我会建议`intval()`，但`mysql_real_escape_string`更安全。

如果它是函数名的长度，只需执行此操作并忘记它：

```
function esc($str) {return mysql_real_escape_string($str);} 
```

# php - 来自外部计算机的 wordpress 博客上没有 CSS/格式

> ID：11875087
> 
> 赞同：3
> 
> 时间：2012-08-09T00:18:49.977
> 
> 标签：php, wordpress, blogs

我正在尝试使用[本教程](http://wpgarage.com/good-blogging-practice/how-to-set-up-wordpress-on-a-wampserver/)设置从我的计算机托管的 wordpress 博客。当我通过 localhost 或计算机的 IP 在其托管的计算机上访问该站点时，该站点看起来不错，但是当我从另一台计算机访问它时，它看起来像[这样](http://i.imgur.com/AZAug.png)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:56:48.757

所有 Wordpress 资源（至少是样式表和图像）都使用 Wordpress 的 URL 配置。您可以在管理员的常规配置页面中找到它作为第三个选项。这是由于主题的编程方式和使用使用这些配置值生成其余部分的[`bloginfo`函数创建博客标题的方式](http://codex.wordpress.org/Function_Reference/bloginfo)

可能发生的情况是此类 URL 使用的是 localhost 或 127.0.0.1。如果是这种情况，当从您自己的 PC 访问博客时，它会显示正常，因为两者都解析到本地计算机。如果您从外部 PC 访问它，它们将不会解析到为 Wordpress 提供服务的 PC，也不会解析到本地 PC - 它无法提供它们。

# css - 在 css 中使用 FontAwesome 或 Glyphicons :before

> ID：11875088
> 
> 赞同：80
> 
> 时间：2012-08-09T00:19:07.243
> 
> 标签：css, twitter-bootstrap, font-awesome

`content:`使用`:before`伪元素时，有没有办法将 HTML 嵌入到 css元素中？

我想在这样的用例中使用 Font Awesome（或 Glyphicon）：

```
 h1:before {
        content: "X";
        padding-right: 10px;
        padding-left: 10px;
        color: @orangeLight;
    } 
```

`X`类似的东西在哪里`<i class="icon-cut"></i>`。

我当然可以在 HTML 中手动执行此操作，但我真的想`:before`在这种情况下使用。

同样，有什么方法可以`<i>`用作列表项目符号吗？这有效，但对于多行项目符号项的行为不正确：

```
<ul class="icons">
  <li><i class="icon-ok"></i> Lists</li>
  <li><i class="icon-ok"></i> Buttons</li>
  <li><i class="icon-ok"></i> Button groups</li>
  <li><i class="icon-ok"></i> Navigation</li>
  <li><i class="icon-ok"></i> Prepended form inputs</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-08-12T04:14:55.793

您所描述的实际上是 FontAwesome 已经在做的事情。他们将 FontAwesome 字体系列应用于`::before`任何具有以“icon-”开头的类的元素的伪元素。

```
[class^="icon-"]:before,
[class*=" icon-"]:before {
  font-family: FontAwesome;
  font-weight: normal;
  font-style: normal;
  display: inline-block;
  text-decoration: inherit;
} 
```

然后他们使用伪元素`::before`将图标放置在具有类的元素中。我刚刚去了[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)并检查了代码以找到这个：

```
.icon-cut:before {
  content: "\f0c4";
} 
```

因此，如果您想再次添加图标，您可以使用该`::after`元素来实现此目的。或者对于您问题的第二部分，您可以使用`::after`伪元素插入项目符号字符，使其看起来像一个列表项。然后使用绝对定位将其放置在左侧，或类似的东西。

```
i:after{ content: '\2022';} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-18T12:30:24.897

@keithwyland 答案很棒。这是一个 SCSS 混合：

```
@mixin font-awesome($content){
    font-family: FontAwesome;
    font-weight: normal;
    font-style: normal;
    display: inline-block;
    text-decoration: inherit;
    content: $content;
} 
```

用法：

```
@include font-awesome("\f054"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:40:23.367

对于您的列表项，您可以使用一些 CSS 来实现所需的效果。

```
ul.icons li {
  position: relative;
  padding-left: -20px; // for example
}
ul.icons li i {
  position: absolute;
  left: 0;
} 
```

我在 OS X 上的 Safari 中对此进行了测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T14:42:59.327

应该避免这种方法。`vertical-align`的默认值为`baseline`。仅更改伪元素的字体系列将导致元素具有不同的字体。不同的字体可以有不同的字体规格和不同的基线。为了使不同的基线对齐，元素的整体高度必须增加。[看看这个效果](http://codepen.io/Keyamoon/pen/MYxpxQ)。

每个字体图标有一个元素总是更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-29T10:44:34.810

接受的[答案（截至 2019 年 7 月 29 日）](https://stackoverflow.com/a/11919684/3022387)仅在您尚未开始使用FontAwesome的最新**SVG-with-JS方法时仍然有效。**在这种情况下，您需要按照他们的[CSS Pseudo-Elements HowTo](https://fontawesome.com/how-to-use/on-the-web/advanced/css-pseudo-elements#with-svg-js)上的说明进行操作。基本上要注意以下三点：

*   将数据属性放在 SCRIPT-Tag “data-search-pseudo-elements” 加载 fontawesome.min.js
*   使伪元素本身具有 display:none
*   您需要的图标的正确字体系列和字体粗细组合：“Font Awesome 5 Free”和 300（fal/light）、400（far/regular）或 900（fas/solid）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-19T22:45:42.710

这是做你想做的最简单的方法：

[http://jsfiddle.net/ZEDHT/](http://jsfiddle.net/ZEDHT/)

```
<style>
 ul {
   list-style-type: none;
 }
</style>

<ul class="icons">
 <li><i class="fa fa-bomb"></i> Lists</li>
 <li><i class="fa fa-bomb"></i> Buttons</li>
 <li><i class="fa fa-bomb"></i> Button groups</li>
 <li><i class="fa fa-bomb"></i> Navigation</li>
 <li><i class="fa fa-bomb"></i> Prepended form inputs</li>
</ul> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-02-18T17:42:08.523

Re: using icon in `:before`– 最近的 Font Awesome 版本包括`.fa-icon()`SASS 和 LESS 的 mixin。这将自动包括`font-family`一些渲染调整（例如`-webkit-font-smoothing`）。因此，您可以这样做，例如：

```
// Add "?" icon to header.
h1:before {
    .fa-icon();
    content: "\f059";
} 
```

* * *

## 回答 #8

> 赞同：-14
> 
> 时间：2013-07-26T19:11:56.840

```
<ul class="icons-ul">
<li><i class="icon-play-sign"></i> <a>option</a></li>
<li><i class="icon-play-sign"></i> <a>option</a></li>
<li><i class="icon-play-sign"></i> <a>option</a></li>
<li><i class="icon-play-sign"></i> <a>option</a></li>
<li><i class="icon-play-sign"></i> <a>option</a></li>
</ul> 
```

Bootstrap 默认提供所有字体超棒的图标。

# c++ - 与单例相互包含

> ID：11875091
> 
> 赞同：1
> 
> 时间：2012-08-09T00:19:23.237
> 
> 标签：c++, singleton, circular-reference

我目前在我的项目（C++）中相互包含有问题。

通常，如果我有一个相互包含的问题，我会很容易地通过前向声明或重新设计类来解决它。但这一次，我被困住了：

我有一个名为*Game*的类，它创建和启动核心游戏系统，其中一个称为*GraphicsSystem*。在 Game 构造函数中，GraphicsSystem 对象被动态创建并存储在 GraphicsSystem* 指针中。看起来像这样：

```
Game::Game ()
{
    gfxSys = new GraphicsSystem(80, new Camera());
} 
```

现在我的 GraphicsSystem 类需要在某一时刻访问 Game 类的方法来获取存储在 Game 对象中的玩家对象。各自的部分看起来像这样（游戏是单例！）：

```
void GraphicsSystem::handleFrame ()
{
    ElementList elements = Game::instance()->getPlayer()->getEnvironment()->getElements();
} 
```

现在我已经尝试在两个方向上进行前向声明，但这不能满足编译器的要求。我当然也可以将玩家指针放入图形系统，但我真的不想这样做，因为他不属于那里。

有没有什么办法可以解决这个问题，而我不必过多地改变设计？我现在真的很困惑，所以我希望你们能帮助我。

我正在使用 Visual Studio 2010 (Visual C++)。

先感谢您！克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:23:35.013

有两种主要方法可以打破 C++ 中的循环依赖关系。

1）创建一个“接口”类，其中列出了您的真实类实现的方法以及您的真实类继承自的方法。然后你可以包含它而不是真实类的声明。

2) Pimpl - 一个类拥有一个指向其真实数据的不透明指针，解决了必须包含成员变量类型声明的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T00:25:45.167

在 Game.h 中前向声明 GraphicsSystem。如果需要，请在 GraphicsSystem.h 中包含 Game.h。在 Game.cpp 中包含 Game.h 和 GraphicsSystem.h。在 GraphicsSystem.cpp 中包含 Game.h 和 GraphicsSystem.h。这应该根据您发布的代码起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T00:25:36.103

我知道这听起来很狡猾，但是您是否考虑过`global reference`对已初始化的`Game`课程持有 a ？

我知道全局变量是邪恶的等等，我敢肯定很多人会愤怒，但*根据我个人的经验*，我已经屈服于类（以及其他）的**Singletonitis**`Game`并且发现有时它只是简单地没必要。

您需要问自己的最大问题是***“您要保护您的 Game 对象免受谁的侵害？您***是否有任何理由在***每次***需要游戏类时都需要请求一个实例？我很确定如果您的`Game`对象没有初始化，无论如何你不会在你的引擎中做很多其他事情。

希望这可以帮助您以不同的方式思考问题，即使它没有直接回答您的问题。

# jsp - 将属性从 JSP 传递到 Servlet 到 JSP

> ID：11875093
> 
> 赞同：1
> 
> 时间：2012-08-09T00:19:52.580
> 
> 标签：jsp, servlets, attributes, setattribute, getattribute

所以，我有一个 JSP 表单，它只接受一个查询字符串，将它传递给一个 servlet，然后设置一些 HttpServletRequest 属性并转发给另一个 jsp。出于某种原因，在最终的 jsp 中，所有属性都返回 null，就好像它们没有被设置一样。

猫查询.jsp

```
<html>
<head>
<title>Category Query</title>
        <meta http-equiv="Content-Type" content="text/html' charset=iso-8859-1">
</head>

<table width="500" border="0" cellspacing="0" cellpadding="0">
  <tr>
   <td>
     <form name="queryForm" method="post" action="CategoryRetrieve">
      <td><div align="left">Query:</div></td>
      <td><input type="text" name="queryStr"></td>
      <td><input type="Submit" name="Submit"></td>
     </form>
   </td>
  </tr>
 </table>
</body>
</html> 
```

它调用这个 servlet，CategoryRetrieveServlet.java

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws         ServletException, IOException {
            String queryStr  = request.getParameter("queryStr");

            CategoryIndex catIndex = new CategoryIndex(indexDir);
            Map<String, Float> weights = catIndex.queryCategory(queryStr, numTopWords, numTopDocs, numCategories);
            if(weights!=null){
                    request.setAttribute("CATWEIGHTS", weights);
                    request.setAttribute("HASRESULTS", "true");
            }
            else {
                    request.setAttribute("HASRESULTS", "false");
            }

            ServletContext context = getServletContext();
            RequestDispatcher dispatcher = context.getRequestDispatcher(target);
            dispatcher.forward(request, response);
    } 
```

进而转发到这个 JSP 页面 CatDisplay.jsp

```
<%@ page import="java.util.*" %>
<html>
<head>
<title>Category Search Results</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<table width="1000" border="5" cellspacing="0" cellpadding="0">
<% Map<String, Float> catweights = null;
   catweights=(Map<String,Float>)request.getAttribute("CATWEIGHTS");
%>
hasResults is
<%= request.getAttribute("HASRESULTS") %>
<% if (catweights==null){ %> Catweights is null
<% }
   else {
        for (Map.Entry<String,Float> e : catweights.entrySet()){
%>
        <tr><td>
<%=             e.getKey()%>
        </td><td>
<%=             e.getValue()%>
        </td></tr>
<%      }
    }
%>
</table>
</html> 
```

当我提交查询字符​​串时，结果页面显示“hasResults is null Catweights is null”。谁能告诉我为什么我的属性没有被设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:00:03.487

已解决：属性已正确传递，但需要重新启动我的 tomcat 实例，然后才能更新 servlet 代码中的更改。有点像herp-derp。JSP 页面，与任何 html 页面一样，会自动更新，但您必须在对 servlet 进行更改后重新编译并重新启动 Tomcat 实例。

# javascript - javascript Date.parse 和 Date.UTC 给出不同的结果

> ID：11875094
> 
> 赞同：4
> 
> 时间：2012-08-09T00:20:07.527
> 
> 标签：javascript, date

谁能向我解释为什么？

```
d = Date.parse('8/15/2012 '+'11:59:45 AM');
alert(d);
alert(Date.UTC(2012, 7, 15, 11, 59, 45)); 
```

​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T00:23:04.873

如果未指定，则 Date.parse 假定为本地时间。

然而，UTC 显然是 UTC。

例如，我的计算机是 UTC -5（实际上是芝加哥 CDT），所以这两个时间戳对我来说恰好相隔 5 小时。

如果您指定 UTC，您将得到相同的结果：

```
Date.parse('8/15/2012 '+'11:59:45 AM UTC'); //1345031985000
Date.UTC(2012, 7, 15, 11, 59, 45); //1345031985000 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T00:26:14.373

我会假设几个月的差异是您问题中的错字。

Date.parse 返回提供的日期与 1970 年 1 月 1 日午夜之间的差异。

**Date.UTC 返回您的日期与格林威治标准时间**1970 年 1 月 1 日午夜之间的差异。

如果您的时区设置为 GMT (UTC)，您应该会看到两个调用返回的值相同。

# jquery - Jquery Star Rating Plugin - 单击后如何使悬停提示粘住

> ID：11875102
> 
> 赞同：0
> 
> 时间：2012-08-09T00:20:46.290
> 
> 标签：jquery, html, jquery-plugins, jquery-hover

我正在使用这个[jQuery Star Rating 插件](http://www.fyneworks.com/jquery/star-rating/#tab-Testing)

它正在工作，但我试图让悬停提示在单击后留在页面上。目前，在您单击并将鼠标移开后它会消失。

```
<script> 
$(function(){
 $('.hover-star').rating({
  focus: function(value, link){
    var tip = $('#hover-test');
    tip[0].data = tip[0].data || tip.html();
    tip.html(link.title || 'value: '+value);
  },
  blur: function(value, link){
    var tip = $('#hover-test');
    $('#hover-test').html(tip[0].data || '');
  }
});
</script>

<form id="ratingform">
<table width="100%" cellspacing="10"> 
<tr><Td>Hover over the stars and then click</td></tr>
<tr>
<td valign="top" width="">
<div class="Clear">
<div>
<input class="hover-star" type="radio" name="rating" value="1" title="Very poor"/>
<input class="hover-star" type="radio" name="rating" value="2" title="Poor"/>
<input class="hover-star" type="radio" name="rating" value="3" title="OK"/>
<input class="hover-star" type="radio" name="rating" value="4" title="Good"/>
<input class="hover-star" type="radio" name="rating" value="5" title="Very Good"/>
<span id="hover-test" style="margin:0 0 0 20px;"></span>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:31:00.623

您可以使用“回调”函数并使用与“焦点”函数中相同的代码。单击星号时会执行“回调”函数：

```
$(function(){
 $('.hover-star').rating({
  focus: function(value, link){
    ..
  },
  blur: function(value, link){
    ..
  },
  callback: function(value, link){
    var tip = $('#hover-test');
    tip[0].data = tip[0].data || tip.html();
    tip.html(link.title || 'value: '+value);
  }
}); 
```

# c++ - 使用 Poco C++ 库，如何强制 POST 使用 SSL v3？

> ID：11875110
> 
> 赞同：2
> 
> 时间：2012-08-09T00:21:28.743
> 
> 标签：c++, openssl, 64-bit, debian, poco-libraries

我正在尝试使用 C++ Poco 库连接 SSL。我的程序能够在 Debian 32 位上正确执行 POST，但是当我使用 64 位机器时它会挂起。我也在 Windows 和 Darwin 上尝试过，并且两者都适用。

我得到`curl --sslv3 URI`了回应，但如果我不使用 v3，它就会挂起。有没有办法强制 Poco 使用 SSLv3？

# r - 如何在R中保存列表对象

> ID：11875112
> 
> 赞同：1
> 
> 时间：2012-08-09T00:21:48.913
> 
> 标签：r, analysis

我为我的数据做了 coxph 并得到这样的结果：

```
> z
称呼：
coxph(公式 = Surv(Years, Event) ~ y, data = x)

    coef exp(coef) se(coef) zp
是 0.0714 1.07 0.288 0.248 0.8

似然比检验 = 1 df 上的 0.06，p = 0.804 n = 65，事件数 = 49

```

我只想保存

```
是 0.0714 1.07 0.288 0.248 0.8

```

成一个文件。因为我做排列并生成 1000 z。

我想将它们保存到这样的文本文件中：

```
鳍片 -0.3794 0.684 0.1914 -1.983 0.0470
年龄 -0.0574 0.944 0.0220 -2.611 0.0090
种族 0.3139 1.369 0.3080 1.019 0.3100
wexp -0.1498 0.861 0.2122 -0.706 0.4800
三月 -0.4337 0.648 0.3819 -1.136 0.2600
帕罗 -0.0849 0.919 0.1958 -0.434 0.6600

```

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:34:56.377

系数很容易通过

```
summary(z)[['coefficients']] 
```

和置信区间信息

```
summary(z)[['conf.int']] 
```

找出`summary.coxph`对象的组成部分

```
str(summary(z)) 
```

我的建议是创建一个排列列表

```
data_list <- list(data_1, ...., data_1000) 
```

然后打电话

```
lots_models <- lapply(data_list, coxph, formula = Surv(Years, Event) ~ y) 
```

它创建了一个模型列表

您可以通过以下方式创建摘要

```
lots_summaries <- lapply(lots_models, summary) 
```

提取系数

```
all_coefficients <- lapply(lots_summaries, '[[', 'coefficients')
all_conf.int     <- lapply(lots_summaries, '[[', 'conf.int') 
```

添加排列 id 列（如果需要）

```
all_coefs_id <- lapply(seq_along(data_list), 
   function(i) cbind(all_coefficients[[i]],i))
all_ci_id <- lapply(seq_along(data_list), 
   function(i) cbind(all_conf.int[[i]],i)) 
```

然后组合成一个data.frame

```
all_coefs_df <- do.call(rbind, all_coefs_id)
all_ci_df <- do.call(rbind, all_ci_id) 
```

然后将其保存为文本文件

# .htaccess - 同一文件中的 URL 重写规则（使用锚列表）

> ID：11875118
> 
> 赞同：1
> 
> 时间：2012-08-09T00:22:14.703
> 
> 标签：.htaccess

我刚刚创建了一个基于唯一 index.html 文件的网站。您可以使用由锚定列表组成的菜单浏览文件。问题是 URL 是锚的名称，所以我有两个选择：

> 1.- 重命名整个锚定列表（但仍有一些问题）
> 
> 2.- 使用 .htaccess 重命名 URL，执行 RewriteEngine On。

访问首页时可以看到的URL是： **http ://domain.com/#!/page_home**

*注意：只有“domain.com”不是真实的。*

接下来的“页面”是：

**http://domain.com/#!/page_2**

**http://domain.com/#!/page_3**

**http://domain.com/#!/page_4**等等...

我想显示**http://domain.com/welcome**而不是**http://domain.com/#!/page_home**。

好吧，我没有运气遵循一些基本和高级教程。理论上使用这样的东西应该可以工作：

```
RewriteEngine On

RewriteRule ^#!/page_home welcome 
```

但是这个和其他组合对我不起作用。

.htaccess 正在工作，因为我还有另一个类似这样的规则：

```
Options -Indexes
ErrorDocument 404 /notfound.html 
```

你能给我一个提示吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:46:51.607

很抱歉告诉你这个，但它不会起作用。

如您所知，锚点是指向网页中内部资源的链接。当您单击锚点时，不会向服务器发送任何请求，只有浏览器会转到同一页面中请求的资源。如果没有请求发送到服务器，则不会调用 htaccess 并且不会进行重定向。

如果您希望链接像这样，您唯一的选择是在不使用锚点的情况下重做网站......

# reverse-engineering - 如何在 IDA Pro 中设置数组元素的大小？

> ID：11875119
> 
> 赞同：1
> 
> 时间：2012-08-09T00:22:18.617
> 
> 标签：reverse-engineering, disassembly, ida

如何在 IDA Pro 中设置数组元素的大小？我正在创建一个我想要拥有 DWORD 数组的结构。但它默认为字节。

我有 IDA Pro 6.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:09:15.173

您可以在本地类型窗口 ( )中使用纯 C 进行编辑`struct`和定义。请注意，IDA 不会在成员之间应用任何自动结构填充，因此有时您必须插入虚拟成员。`enum``Shift-F1`

`Shift-F9`或者，在结构`DWORD`窗口`*`（

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:39:34.353

在按下`Shift-8`定义数组之前，首先通过双击将类型定义为 Dword `d`，然后数组将是 dwords 而不是字节。

# xcode - Xcode：有没有让编辑器有焦点的键盘快捷键？

> ID：11875120
> 
> 赞同：0
> 
> 时间：2012-08-09T00:22:22.520
> 
> 标签：xcode, keyboard-shortcuts

在 xcode 中，轻弹到任何导航器后，比如 Project Navigator (⌘ 1)，我想轻弹回编辑器。

是否有使编辑器具有焦点的键盘快捷键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:30:29.643

是的，尝试按`Command`+ `J`。

# java - 选项菜单按钮代码卡住并挂起

> ID：11875126
> 
> 赞同：0
> 
> 时间：2012-08-09T00:22:59.783
> 
> 标签：java, android

在我点击选项菜单上的 NearBy 按钮后，我很难理解为什么我的代码没有进入 try 语句。它进入黑屏，但 IN NEAR CASE 字符串未显示在 Eclipse 中的 logcat 或 Android 手机上的 aLogCat 的输出中？我究竟做错了什么？

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.util.Base64;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ProfileActivity extends Activity {

private static final int NEAR = Menu.FIRST;

public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, NEAR, 0, "NearBy").setIcon(android.R.drawable.ic_menu_info_details);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

   switch (item.getItemId()) {
   case NEAR:
       try {
           Log.e(LOG_TAG,"IN NEAR CASE");
               Intent myIntent = new Intent(ProfileActivity.this,
                      AndroidClient.class);
        } catch (NumberFormatException nfe) {
            nfe.printStackTrace();
            Toast.makeText(this, "Value Age is not correct", Toast.LENGTH_LONG).show();
        } catch (NullPointerException npe) {
            npe.printStackTrace();
            Toast.makeText(this, "Error", Toast.LENGTH_LONG).show();
        }

        break;
    }

    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:40:50.333

您希望您的应用程序做什么？您发布的代码编译得很好。

你想启动 AndroidClient 吗？添加这个：

```
Intent myIntent = new Intent(ProfileActivity.this, AndroidClient.class);
startActivity(myIntent); 
```

请注意，您没有 onCreate() 方法，因此屏幕将始终为空白，除非您使用 setContentView() 加载布局。（我猜这是您的应用程序的缩短版本，但我想彻底。）

# jquery - jQuery 如果单击包含单击的类

> ID：11875134
> 
> 赞同：1
> 
> 时间：2012-08-09T00:23:52.580
> 
> 标签：jquery

如果我有一个*clicked*类的侦听器和另一个*click-option-1*、*click-option-2*和*click-option-3 的*侦听器，我如何在我的*clicked*事件侦听器中判断*click-option-3*是否被点击？

```
<div class="clicked">
   <div class="click-option-1">1</div>
   <div class="click-option-2">2</div>
   <div class="click-option-3">3</div>
</div>

$( '.clicked' ).on( "touchstart mousedown", function(event) {

if .click-option-3 was not clicked do something.

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T00:26:00.407

```
$('.clicked').on('touchstart mousedown', function(e){
    if(!$(e.target).hasClass('click-option-3')){
        //Do This.
    }
}); 
```

# java - VLCJ NullPointer（我只想要一个简单的跨平台java视频播放器）

> ID：11875136
> 
> 赞同：0
> 
> 时间：2012-08-09T00:24:04.753
> 
> 标签：java, video, vlcj

我想做一个简单的java应用程序来播放视频。我特别希望它播放 mpeg4 和 mov 格式。JMF 是我开始的，我有一个可爱的工作示例。但是，不支持 mov 或 mpeg4 格式。我看过 Xuggler，但看不到让它工作的简单方法。VLCJ 看起来很简单——我下载了 jar 文件并将它们附加到我的项目中（vlcj-2.1.0.jar、jna-3.4.0.jar、platform-3.4.0.jar、vlcj-2.1.0.jar））。我得到了示例代码并对其进行了调整（如下）。但是当我运行代码时，我得到一个 java.lang.NullPointerException 异常。我尝试调整文件名中斜线的数量和方向（向前和向后）。似乎没有任何效果。请问可以帮忙吗？？？

```
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.JFileChooser;

import uk.co.caprica.vlcj.component.EmbeddedMediaPlayerComponent;
import java.lang.Object;
import uk.co.caprica.vlcj.mrl.FileMrl;

import uk.co.caprica.vlcj.binding.LibVlc;
import uk.co.caprica.vlcj.runtime.RuntimeUtil;

import com.sun.jna.Native;
import com.sun.jna.NativeLibrary;

public class TestPlayer {

  private final JFrame frame;
  private EmbeddedMediaPlayerComponent mediaPlayer;

  public static void loadLibs(){
      NativeLibrary.addSearchPath(
        RuntimeUtil.getLibVlcLibraryName(), "C:/Program Files/VideoLAN/VLC/"
     );
        Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);
  }

  public static void main(final String[] args){
    loadLibs();   
      final String mrl = "file://C:/Test.mov";
        SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new TestPlayer().run(mrl);
        }
    });
  }
  public TestPlayer(){
      frame = new JFrame("test VLCJ");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.setLocation(100,100);
      frame.setSize(600,400);
      frame.setVisible(true);
  }
  private void run(String mrl){
    System.out.println(mrl);
    try{
        mediaPlayer.getMediaPlayer().playMedia(mrl);
    }catch(Exception e){
        System.err.println(e.toString());
    }

  }
} 
```

我在 Windows 32 位上使用 VLC 版本 2.0.2 和 VLCJ 2.1.0 源和 JDK 1.7。我希望这很简单...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:31:31.800

看起来您在使用`mediaPlayer`时没有对其进行初始化，因此在`run()`.

尝试在您的构造函数中初始化它。

# jquery - 如何使用 css3 创建悬停效果

> ID：11875138
> 
> 赞同：0
> 
> 时间：2012-08-09T00:24:34.537
> 
> 标签：jquery, html, css

在用户将鼠标悬停在我的图像之外后，我正在尝试将我的图像转换回原始大小..不知道在这里做什么..

我的 CSS

```
//doesn't work
.imgDiv img{

-webkit-transform:scale(1, 1);
-moz-transform:scale(1, 1);
-o-transform:scale(1, 1);
-ms-transform:scale(1, 1);
transform:scale(1, 1);

}

//enlarge the image but don't know how to shrink them back

.imgDiv:hover img{

-webkit-transform:scale(1.15, 1.15);
-moz-transform:scale(1.15, 1.15);
-o-transform:scale(1.15, 1.15);
-ms-transform:scale(1.15, 1.15);
transform:scale(1.15, 1.15);

} 
```

html...

```
<div class='imgDiv'>

     <img src='a.jpg' />
     <img src='b.jpg' />
     <img src='c.jpg' />
     <img src='d.jpg' />

</div> 
```

谢谢您的帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:30:12.430

只需`transform`从原始声明中删除所有属性。由于图像默认缩放为`1`，因此您无需声明。当鼠标移开时，您在元素的伪类中设置的任何内容都将`:hover`恢复为默认值。

[这](http://jsfiddle.net/purmou/RCjQd/)是一个例子。

这是最终的 CSS：

```
.imgDiv:hover img{
    -webkit-transform:scale(1.15, 1.15);
    -moz-transform:scale(1.15, 1.15);
    -o-transform:scale(1.15, 1.15);
    -ms-transform:scale(1.15, 1.15);
    transform:scale(1.15, 1.15);
} 
```

当然，如果您尝试将其应用于每个图像，那么您仍然会删除`.imgDiv img`声明并更改`.imgDiv:hover img`为`.imgDiv img:hover`.

[这](http://jsfiddle.net/purmou/RCjQd/1/)是一个实际应用的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:40:44.983

添加一个过渡，你会在悬停时获得一个很好的过渡效果：

```
.imgDiv img:hover{
    -webkit-transform:scale(1.15, 1.15);
    -moz-transform:scale(1.15, 1.15);
    -o-transform:scale(1.15, 1.15);
    -ms-transform:scale(1.15, 1.15);
    transform:scale(1.15, 1.15);
}

.imgDiv img {    
    -webkit-transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
    -o-transition: all .2s ease-in-out;
    -ms-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T00:28:09.453

只需将`:hover`放在您的图像上

```
.imgDiv img:hover{
    -webkit-transform:scale(1.15, 1.15);
       -moz-transform:scale(1.15, 1.15);
        -ms-transform:scale(1.15, 1.15);
         -o-transform:scale(1.15, 1.15);
            transform:scale(1.15, 1.15);
} 
```

[**演示**](http://jsfiddle.net/MqJwJ/)

# android - 我无法为 Eclipse 安装 PhoneGap 插件

> ID：11875140
> 
> 赞同：1
> 
> 时间：2012-08-09T00:24:42.683
> 
> 标签：android, eclipse, cordova, eclipse-plugin, phonegap-plugins

我尝试为 Eclipse 安装 PhoneGap 插件。所以我去了 Eclipse -> 帮助 -> 安装新软件 -> 添加 我复制了这个链接：

[http://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2.9/download/](http://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2.9/download/)

Eclipse 尝试安装它，在安装过程中出现了这个窗口：

[图片](http://uped.rupai.net/pic/d383ec94720d.jpg)

我应该怎么办？我想在 Eclipse 中有 PhoneGap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:30:39.737

您可能将它安装在您的办公室或大多数站点都被阻止的地方。但是您可以通过替换来安装它`http`，`https`然后尝试。

[https://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2.9/download/](https://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2.9/download/)

这将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T00:44:20.027

PhoneGap 现在由一个名为 Cordova 的 Apache 项目提供支持。您可以[在此处](http://phonegap.com/2012/03/19/phonegap-cordova-and-what%E2%80%99s-in-a-name/)阅读更多相关信息。

查看他们使用 Cordova 开发移动应用程序的分步“[入门](http://docs.phonegap.com/en/2.0.0/guide_getting-started_index.md.html#Getting%20Started%20Guides)”指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T00:43:22.933

您是否以管理员身份登录？为此，您需要管理员权限。在这篇文章中查看更多信息：http: [//ethellenterprises.com/2011/05/phonegap-blackberry-and-windows-7-access-denied/](http://ethellenterprises.com/2011/05/phonegap-blackberry-and-windows-7-access-denied/)

# php - MYSQL 按日期轮换行

> ID：11875142
> 
> 赞同：0
> 
> 时间：2012-08-09T00:24:52.343
> 
> 标签：php, mysql

`records`该查询从不早于给定日期的表中选择最旧的行。给定的日期是我从`records_queue`表中查询的最后一行。查询的目标是将行从旧行轮换到新行，每次为每个用户返回 1 行。

```
SELECT `records`.`record_id`, MIN(records.date_created) as date_created 
FROM (`records`) 
JOIN `records_queue` ON `records_queue`.`user_id` = `records`.`user_id` 
AND record_created > records_queue.record_date 
GROUP BY `records_queue`.`user_id` 
```

因此，在每个查询中，我`min(date_created)`从 中选择最旧的行`records`并返回大于`>`给定日期的下一个最旧的行`records_query`。查询不断返回行，直到它到达最新的记录。此时返回同一行。如果到达最新的行，我想返回最旧的（从底部重新开始 - 一个完整的旋转）。使用 1 个查询怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:44:26.047

从您发布的代码中，发生了两件事之一。此查询返回一个完整的记录集，然后您的应用程序可以使用它自己的逻辑遍历该记录集（如果页面没有重新加载或将参数传递给 PHP 代码，这可能是 JavaScript 的某种变体，然后用于选择哪个记录以显示页面是否每次都重新加载），或者应用程序正在更新`records_queue.record_date`以带回下一条记录-尽管我看不到在您发布的查询中仅获取一条记录的任何限制。

无论哪种方式，您都需要修改应用程序逻辑，而不是此查询来实现您要求的结果。

编辑：在更新队列的代码部分中，快速检查中的值`records_queue.record_date`是否等于最新记录。如果它运行类似的东西，`update records_queue set record_date = (select min(theDateColumn from records)`而不是当前的逻辑，它只是用正在查看的当前日期来更新它。

# objective-c - 如何在 iOS 中增加 UIView 的触摸区域

> ID：11875161
> 
> 赞同：1
> 
> 时间：2012-08-09T00:27:47.647
> 
> 标签：objective-c, ios, cocoa-touch

根据 Apple 的文档，任何可触摸视图至少应具有 44 x 44 点的可触摸区域。

我做了一些调查，看起来一个很好的解决方案是覆盖 pointInside ，如下所示：

```
- (BOOL) pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    CGRect l_bounds = self.bounds;
    float lengthOf44 = [self convertLengthFromScreen:44];
    CGFloat l_widthDelta = lengthOf44 - l_bounds.size.width;
    CGFloat l_heightDelta = lengthOf44 - l_bounds.size.height;
    if (l_widthDelta < 0)
    {
        l_widthDelta = 0;
    }

    if (l_heightDelta < 0)
    {
        l_heightDelta = 0;
    }

    l_bounds = CGRectInset(l_bounds, -0.5 * l_widthDelta, -0.5 * l_heightDelta);

    if (CGRectContainsPoint(l_bounds, point))
    {
        return YES;
    }
    return NO;
} 
```

然而，该解决方案有许多缺点。给定一个 5 x 5 像素大小的小视图。

1.  假设小视图非常靠近超级视图的边缘，那么这个方法会导致一半的可触摸区域延伸到超级视图之外，而可触摸区域实际上是22 x 44。这种情况下我需要进一步覆盖超级视图的pointInside .

2.  假设我们有三个彼此非常接近的小视图，那么上视图总是会赢得触摸。理想情况下，我希望最接近接触点的视图获胜。

请问除此之外还有更好或更优雅的解决方案吗？

为了更好地说明我的担忧，让我举个例子：每个人都应该熟悉iOS的Copy Blue Hint Dot（不确定我是否使用了正确的词，但请看图片）。 [http://i.stack.imgur.com/FtjYi.png](http://i.stack.imgur.com/FtjYi.png)

假设我们要实现它（复制蓝点）。对于那个蓝点，我不知道 Apple 是如何实现的。但是，我假设蓝点是一种 UIImageView，并假设它是一些 UITextView 的子视图（这可能不确定）。UIImageView 可以响应触摸吗？在我的解决方案中，它可以通过覆盖 pointInSide 来响应触摸。在这种情况下，我的两个问题可以翻译为：

1.  如果我们选中的词离 UITextView 边缘太近怎么办？所以那个蓝点的理想触摸区域甚至可能在超级视图（UITextView）之外。
2.  如果上蓝点离下蓝点太近，我们从两个点的中间拖动怎么办（看起来下蓝点有更高的获胜机会。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:31:42.007

您错过了文档的重点。

出于可用性原因，Apple UI 指南建议您不要将可触摸区域（通常由某种视图、按钮、图像等表示）小于 44X44。（指尖大小）

如果您有一个 5X5 视图，则它不是接收触摸事件的正确视图，您应该使用该视图的超级视图来接收孩子的触摸事件。

（编辑以删除我的错误声明，即这是不可能的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:07:44.017

你采取了错误的方法，首先你不应该混淆来自 ios 的触摸检测，它已经过预配置和优化，可以在手指触摸时正常工作，这就是为什么如果你触摸你的读数通常会比你实际触摸的地方高一点.

似乎您想做某种“用户在某个地方触摸的位置”，如果我是您，我会得到一个 uiview，例如，这是我的完整可触摸区域，只需在其中添加其余元素，您就可以放它们可以放在任何你想要的地方，它们甚至可以重叠或任何东西，只需确保超级视图是接收触摸的那个并做一些数学运算，看看哪个最接近元素中心。即使它们是按钮，您也可以禁用交互并以编程方式显示它们的状态变化。好像他们被按下或什么的。

重申我的观点。只使用 1 个大的触控区域，然后计算其余部分，这样您就可以完全控制触控区域等。

（然后我可能完全误解了你的目的）

# magento - Magento 在多域设置中使用 Web 服务器重写

> ID：11875165
> 
> 赞同：1
> 
> 时间：2012-08-09T00:28:13.557
> 
> 标签：magento

我必须有两个商店，每个商店都有不同的域。它们托管在禁用 SuExec 的专用服务器上。我已经复制了 .htaccess 和 index.php 并且一切正常。

我遇到的问题是我的第二个商店 Web 服务器重写。一旦我为使用符号链接到根目录的第二个商店启用了此功能，它就会开始给出找不到页面的错误。

domain2.com/index.php/abc.html ----- 在关闭使用 Web 服务器重写的情况下工作正常

domain2.com/abc.html ----- 不适用于使用 Web 服务器重写打开

基础商店工作没有任何问题。

任何帮助深表感谢。

法鲁克汗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T02:01:24.223

我在上面遇到了同样的问题，但现在我已经解决了。该问题的主要原因是 .htaccess 文件。通过将 .htaccess 文件替换为 magento 默认的 .htaccess 文件可以解决所有问题。Web Server Rewrites 打开或关闭，您可以随心所欲。

保存配置后，不要忘记清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:39:39.760

->**刷新 Magento 缓存**

转到系统 - >缓存管理

刷新目录重写

转到所有缓存并将下拉更改为刷新。

点击保存

在大多数服务器上，这应该去掉你 URL 中的 index.php。

如果您收到 404 错误，请继续阅读。

->**修复了 Mode_Rewrite 错误**

*   请检查您的网络服务器配置。你用阿帕奇吗？也许您的配置中有类似“AllowOverride none”的内容会禁用 .htaccess-files（magento-root-directory 中的 .htaccess-file 定义了重写规则）。最常见的原因是您的 ftp 中有一个不正确的 .htaccess 文件。

转到 magentocommerce.com 站点并再次下载 magento 文件。

提取文件，然后仅将 .htaccess 文件上传到您的 Magento 根目录。

这应该可以解决与在 Magento 中启用 Web 服务器重写相关的任何问题。

# javascript - 用户注销时如何清除cookie？

> ID：11875168
> 
> 赞同：0
> 
> 时间：2012-08-09T00:28:43.737
> 
> 标签：javascript, cookies

我有一些登录用户的代码。当点击触发该功能时发送cookie。然后，当用户注销时，我想清理这个 cookie。这个怎么做？

```
jQuery(document).ready( function() {
    var j = jQuery;
    j('a.logout').click( function() {
        // I want to clean the cookie that set below when user logout
    )};
    j("div.poll-panel a.flag").live('click',
        function() {
            my_get_loader().toggle();

            var doc = j(this).attr('id')
            doc = doc.split('-');

            j.post( Docs.url, {
                action: Docs.poll,
                'cookie': encodeURIComponent(document.cookie),
                'flag': doc[1],
                'doc_id': doc[2]
            },
            //other_functions here
    }
}); 
```

# python - 缓慢的嗖嗖声搜索

> ID：11875171
> 
> 赞同：3
> 
> 时间：2012-08-09T00:29:23.123
> 
> 标签：python, indexing, whoosh

在创建了一个带有简单模式的 whoosh 索引并为 150 万条记录编制索引后，我在 15 秒内获得了接近 1000 个搜索结果。

```
schema = Schema(tax_id=STORED, name=TEXT(stored=True)) 
```

MAIN*.seg 文件的大小约为 190 Mb。

我搜索的方式如下

```
 ix=open_dir("index")
  with ix.searcher() as searcher:
        query = QueryParser("name", ix.schema).parse(u'putrefaciens')
         results = searcher.search(query) 
```

我想知道这种性能是否符合预期，我们可以在给定索引大小的情况下使用 whoosh 进行更快的全文搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:45:00.990

不确定它是否对您的应用程序有帮助，但我只想指出 TEXT 字段比 ID 字段做的事情更复杂。

在我的 whoosh 应用程序中，我有一个“名称”TEXT 字段，用于“处理”索引/搜索。因此，只要输入一些单词，就会发现它是否在名称中。

我还有一个“name_exact”ID 字段，如果我只想“按原样”进行精确索引/查找。

如果后者足以满足您的应用程序，您可以尝试使用 ID 字段进行性能。

正如史蒂夫 K 已经指出的那样，使用最近的嗖嗖声（甚至是 repo 提示）也可能会有所帮助。

# jquery - 地理编码超过查询限制解决方法

> ID：11875173
> 
> 赞同：1
> 
> 时间：2012-08-09T00:29:36.330
> 
> 标签：jquery, google-maps, geocoding

我正在尝试对 1,000 多个地址进行地理编码并将值存储在 XML 文件中。问题是我在第十个地址之后收到了 OVER_QUERY_LIMIT 错误。我已经看到其他帖子建议在每个地理编码之间等待 X 秒，但这似乎对我不起作用。这是我的一段代码：

```
<div id="locations"></div>
$(xml).find('marker').each(function (i) 
{
    var storeName = $(this).attr('name');
    var address = $(this).attr('address');

    setTimeout(function(){
        g.geocode(address, function(data) 
        {
            if(data != null) 
            {
                olat = data.latitude;
                olng = data.longitude;

                var marker = "<marker name='" + storeName + "' lat='" + olat + "' lng='" + olng + "' />";

                $('#locations').append(marker);
            } 
            else 
            {               
                  //Unable to geocode
                  alert('ERROR! Unable to geocode address');                  
            }
        });
    }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:47:54.050

**首先是关于[Google 服务条款的说明](https://developers.google.com/maps/terms#section_10_12)**

不去想这样的事情很容易，但有时它确实很重要。除非您想[从今天早些时候加入该组，](https://stackoverflow.com/questions/11863709/google-maps-api-disabled-on-domain)但由于某种原因他们的服务被禁用，请确保在对这些地址进行地理编码时向用户显示地图。TOS 还禁止批量地理编码和存储性能缓存以外的任何结果。

不是指责！只是引起注意。

* * *

程序员回答：

`setTimeout`的回调和`geocode`都是异步函数。现在使用您的代码，虽然响应仍然从 API 返回，但您正在启动 1 秒计时器，该计时器也异步运行，同时您的循环继续立即迭代，没有延迟。一秒钟后，no-op 被调用一次，然后被丢弃。每次循环运行时都会发生这种情况。

因此，您一次可以处理一千个 API 请求。然后大约 1 秒后（给定或花费几毫秒），将运行 1,000 个无操作。

您的调用`g.geocode`需要在 的回调函数中`setTimeout`，然后回调函数的末尾需要在其中设置另一个超时，直到您完成为止。没有更多的无操作。

如果您想更正确地“解决”`OVER_QUERY_LIMIT`错误和其他 TOS 限制（例如整体地理编码），您将需要考虑没有此类限制的商业服务，例如*LiveAddress*（披露：我在 SmartyStreets[工作](http://smartystreets.com/products/liveaddress-api)）。

# ruby-on-rails - Rails：从视图中订购

> ID：11875174
> 
> 赞同：4
> 
> 时间：2012-08-09T00:29:41.673
> 
> 标签：ruby-on-rails, acts-as-commentable

我正在使用acts_as_commentable_with_threading gem。这个 gem 包括方法 'comment.children'，它创建了所有子评论的散列。默认情况下，它通过 created_at ASC 对子项进行排序。我想改变孩子的排序方式，但据我所知，我不能直接编辑这个方法。相反，我一直试图在视图中重新排序它们，如下所示：

```
<% @comments = comment.children.order('created_at DESC') %> 
```

不幸的是，这没有效果。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T00:36:30.387

您应该使用`sort`数组和散列。

```
<% @comments = comment.children.sort { |a,b| b.created_at <=> a.created_at } %> 
```

参考：[http ://apidock.com/ruby/Enumerable/sort](http://apidock.com/ruby/Enumerable/sort)

# actionscript-3 - 使用手机应用程序在舞台上重新加载或更新信息

> ID：11875176
> 
> 赞同：1
> 
> 时间：2012-08-09T00:30:02.137
> 
> 标签：actionscript-3

我有一个电话应用程序，可以在舞台上根据当天（例如周日、周一...）显示某些文本信息。当星期天到星期一发生变化时，它应该显示星期一的信息，但是当我在手机中测试时它不会更新。我认为这是因为手机保存了用户所在位置的记忆。所以，我需要以某种方式重新加载应用程序，以便它获得与当天匹配的正确信息。我正在考虑使用用户按钮（见下文）来执行此操作，但重新加载没有成功。请问有什么想法吗？先感谢您。

```
myButton.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler);
function fl_MouseClickHandler(event:MouseEvent):void {
if (myText1.stage) {
removeChild(myText1);
}
else {
addChild(myText1);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:06:12.560

那段代码只是从其父级中删除文本或将其添加回来。

您可能想要做的是使用当天更新它的 text 属性。

就像是 ：

```
myButton.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler);

function fl_MouseClickHandler(event:MouseEvent):void {
   var days:Object = { 
      0:"Sunday",1:"Monday",2:"Tuesday", 
      3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"};

   myText1.text = days[new Date().getDay()];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T01:56:46.417

我能够将获取信息的函数放在一个按钮函数中，当用户点击时它会更新。

# ruby-on-rails-3 - PG::Error: SSL SYSCALL 错误：检测到 EOF

> ID：11875180
> 
> 赞同：7
> 
> 时间：2012-08-09T00:30:18.913
> 
> 标签：ruby-on-rails-3

当我对我的 RoR 应用程序执行第一个 SELECT 请求时，我得到“PG::Error: SSL SYSCALL error: EOF detected”。我应该怎么做才能在我的 Postgresql 中关闭 SSL？

错误信息：

ActiveRecord::StatementInvalid: PG::Error: SSL SYSCALL error: EOF detected : SELECT "vacancies".* FROM "vacancies" WHERE (moderated_at IS NOT null) ORDER BY id DESC LIMIT 10

示例堆栈跟踪（显示 Rails）

```
…ases/20120808235942/app/controllers/home_controller.rb:   6:in `index'
…le/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:  68:in `block in call'
…le/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:  56:in `each'
…le/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:  56:in `call'
…dle/ruby/1.9.1/gems/warden-1.1.1/lib/warden/manager.rb:  35:in `block in call'
…dle/ruby/1.9.1/gems/warden-1.1.1/lib/warden/manager.rb:  34:in `catch'
…dle/ruby/1.9.1/gems/warden-1.1.1/lib/warden/manager.rb:  34:in `call'
…red/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:  23:in `call'
…/ruby/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:  25:in `call'
…/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb: 205:in `context'
…/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb: 200:in `call'
…/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:  21:in `call'
…/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:  17:in `call'
…red/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:  15:in `call'
…by/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb: 136:in `forward'
…by/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb: 245:in `fetch'
…by/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb: 185:in `lookup'
…by/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:  66:in `call!'
…by/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:  51:in `call'
…by/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb: 531:in `process_client'
…by/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb: 606:in `worker_loop'
…by/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb: 487:in `spawn_missing_workers'
…by/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb: 137:in `start' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:32:30.553

我找到了解决这个问题的方法。如果您使用 Capistrano 部署您的应用程序，请添加到 unicorn.rb

```
before_fork do |server, worker|
  defined?(ActiveRecord::Base) and
      ActiveRecord::Base.connection.disconnect!
end

after_fork do |server, worker|
   defined?(ActiveRecord::Base) and
      ActiveRecord::Base.establish_connection
end 
```

# asp.net - 如何更改附加了圆角扩展器的文本框的边框颜色。

> ID：11875182
> 
> 赞同：0
> 
> 时间：2012-08-09T00:30:22.803
> 
> 标签：asp.net, ajax, text

如何更改带有扩展器的文本框的边框颜色（焦点和模糊）？

我尝试了一些 JavaScript，它本身可以在文本框上工作，但没有附加圆角扩展器。

我现在没有 JS，但如果你看到代码，请告诉我，我会添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:20:56.737

我认为最简单的方法是使用 jQuery 为圆角选择元素，然后操纵其背景颜色。

1.  在页面中包含[jQuery](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)脚本
2.  在您的 onblur() 和 onfocus() 事件处理程序中，使用以下语法更改背景颜色。您可以使用 Firebug 或 Chrome 开发人员工具来获取元素 ID（请参阅随附的屏幕截图）。[例如 ctl00_SampleContent_Panel1]

    $("#ctl00_SampleContent_Panel1").css('背景色', '蓝色');

![在此处输入图像描述](../Images/9d62ab37ced739f6dd14b3044989d0e4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:46:13.027

您的问题不清楚，但在样式表中使用以下代码更改文本框 onfocus 的边框颜色

输入[type=text]:focus {border:#00F solid 2px}

# c++ - 有没有比 fseek 和 fwrite 更快的写法？

> ID：11875184
> 
> 赞同：4
> 
> 时间：2012-08-09T00:30:29.210
> 
> 标签：c++, c, visual-c++

我有 1GB 二进制文件，它基本上包含相同类型值的 3D 立方体。使用 fseek 和 fwrite 保存这种具有不同顺序（[x,y,z] 或 [zx, y]）的多维数据集会花费大量时间。但是其中一个软件包比我的程序要快得多。有什么方法可以使文件写入比使用 fseek/fwrite 更快？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T00:48:12.760

您不应该在文件 io 操作的内部循环中使用 fseek。为了使写入功能更快，它们会缓存写入。如果你到处寻找，你会不断地破坏缓存。

在内存中进行所有转换 - 例如在内存中旋转立方体，然后在几个连续的 fwrite 调用中写入文件。

如果您无法在内存中完全转换数据，则在内存中一次组装一个平面并写出每个平面。

@编辑：

在您的情况下，您根本不想使用 fseek 。一个也没有。

做这样的事情：

```
void writeCubeZYX( int* cubeXYZ, int sizeOfCubeXYZ, FILE* file )
{
   int* cubeZYX = malloc( sizeOfCubeXYZ );

   // all that monkey business you're doing with fseek is done inside this
   // function copying memory to memory. No file IO operations in here.
   transformCubeXYZ_to_ZYX( cubeXYZ, cubeZYX, sizeOfCubeXYZ );

   // one big fat very fast fwrite. Optimal use of file io cache.
   fwrite(  file, cubeZYX, 1, sizeOfCubeXYZ );

   free( cubeZYX ); // quiet pedantry.
} 
```

@edit2：

好的，假设您不能在内存中全部转换它，然后在平面中转换它并一次写出一个平面 - 按文件顺序 - 没有 fseeks。

假设一个 [XYZ] 立方体在内存中布置为一系列 Z [XY] 矩阵。那就是你的立方体的 [XY] 平面在内存中是连续的。你想写成[ZYX]。因此，您要在文件中写出一系列 X [ZY] 矩阵。每个 [ZY] 在文件中都是连续的。

所以你做这样的事情：

```
void writeCubeZYX( int* cubeXYZ, int x, int y, int z, FILE* file )
{
   int sizeOfPlaneZY = sizeof( int ) * y * z; 
   int* planeZY = malloc( sizeOfPlaneZY );

   for ( int i = 0; i < X; i++ )
   {
      // all that monkey business you're doing with fseek is done inside this
      // function extracting one ZY plane at a time. No file IO operations in here.
      extractZYPlane_form_CubeXYZ( cubeXYZ, planeZY, i );

      // in X big fat very fast fwrites. Near optimal use of file io cache.
      fwrite(  file, planeZY, 1, sizeOfPlaneZY );
   } 

   free( planeZY ); // quiet pedantry.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T06:29:29.687

如果你正在做大量的随机访问写作。我建议你使用 mmap。mmap 将内存页面映射到您的文件，它由操作系统控制。类似于内存交换机制。

另一种方法是您可以使用异步 IO。它由 GLIBC [http://www.gnu.org/software/libc/manual/html_node/Asynchronous-I_002fO.html提供](http://www.gnu.org/software/libc/manual/html_node/Asynchronous-I_002fO.html)

它只是将数据放入内存中的队列中，然后创建另一个线程来管理 IO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T00:45:47.030

如果您不介意磁盘上的文件是压缩文件，那么在写入时压缩它可能会更快。这加快了速度，因为瓶颈通常是将字节写入磁盘，并且通过在写入时进行压缩，可以减少需要写入的字节数。

这当然取决于您的数据是否适合压缩。在 c++ 中压缩输出的一种选择是 gzip。例如：[我如何读取/写入 gzip 压缩文件？](https://stackoverflow.com/questions/624250/how-do-i-read-write-gzipped-files)

但是在您的情况下，这可能不适用-您的问题尚不清楚您何时/为什么要寻找。您预期的写入模式是什么？

# emacs - 我可以在 Slime (Swank Emacs) 中运行一个正在运行的线程吗

> ID：11875186
> 
> 赞同：7
> 
> 时间：2012-08-09T00:30:39.557
> 
> 标签：emacs, clojure, lisp, slime, swank

我经常发现自己从 REPL 开始了一些长时间运行的进程，然后希望我可以在 REPL 运行时继续使用它来执行其他任务。**我可以使用 slime 来后台当前线程或启动一个新的 REPL 控制线程吗？**启动一个额外的 REPL 缓冲区也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:55:44.110

请原谅我有点陈词滥调和非粘液的具体答案；从好的方面来说，它可以与任何 clojure REPL 一起使用。

当我提前知道我正在从 REPL 开始一个长时间运行的任务时，我会在 deref-ing 之前使用`future`并检查它。`future-done?`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T01:18:01.917

编辑：

嗯，我不知何故错过了你问题上的 Clojure 标签。如果下面的解决方案适用于 Clojure，我会感到非常惊讶，因为您可能知道，不幸的是，Clojure 社区（至少对于我们这些使用 Clojure*和*CL 的人来说）维护着自己的 Slime 版本。我不会删除答案，因为它可能对搜索此功能的 CL 程序员有所帮助。

除非 Clojure 有类似的解决方案，它允许多个 REPL 在单个套接字上多路复用，否则您可以手动（从`*inferior-lisp*`缓冲区）启动第二个 Swank 服务器并通过连接到它`slime-connect`作为一种解决方法。（无法测试这个 ATM，因为我不久前就停止使用 Slime 和 Clojure。）

* * *

你试过`slime-mrepl`contrib吗？我自己并没有真正使用过它，但是在 CCL/Win/Emacs 24 下对我进行了快速测试。

我是这样测试的：`M-x slime`，进入`(sleep 10)`REPL，切换缓冲区，`M-x slime-new-mrepl`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T10:00:58.473

这可能无法回答您的问题，但它可能有助于意识到只要`(slime-communication-style)`是`:spawn`，使用完成的评估`C-x C-e`总是会产生自己的线程，并且可以与 REPL 线程中发生的任何事情并行运行。输出（来自`println`等）将出现在 REPL 缓冲区中。

# cuda - 有没有办法用一个模拟多个 GPU？

> ID：11875188
> 
> 赞同：1
> 
> 时间：2012-08-09T00:30:54.483
> 
> 标签：cuda, device-emulation

我正在设计一个多 gpu cuda 代码，但我仍然没有实际开发代码的机器。所以，直到我这样做，

**您知道是否有某种方法可以仅通过使用一个 gpu 来模拟多个 gpu 环境吗？**

我想这样的东西，如果存在的话，将会非常有限，但它可以让我测试我的想法，直到我得到我想要的硬件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:45:16.823

可以使用 CUDA 驱动程序 API (cuCtxCreate, cuCtxSetCurrent) 来近似近似值。请参阅 CUDA C 编程指南附录 G.4 运行时和驱动程序 API 之间的互操作性。在调用任何 cuda* 函数之前，使用 cuCtxCreate 在设备上创建两个上下文。使用 cuCtxSetCurrent 代替 cudaSetDevice。

# jquery - 停止连续滚动 smoothdivScroll

> ID：11875189
> 
> 赞同：0
> 
> 时间：2012-08-09T00:31:00.623
> 
> 标签：jquery, smooth-scrolling

我正在使用 Thomas Kahn 的 smoothdivscroll，想知道如何停止连续滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T12:17:42.987

```
$( "#makeMeScrollable" ).bind( "mouseover", function () { 
$( this ).smoothDivScroll( "stopAutoScrolling" );
} ).bind( "mouseout", function () {  
$( this ).smoothDivScroll( "startAutoScrolling" );
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:38:25.413

[在这里](http://www.smoothdivscroll.com/publicMethods.html)查看他的文档

搜索`stopAutoScrolling`或`disable`
我尝试使用 chrome 控制台 [在此处禁用它并且它有效](http://www.smoothdivscroll.com/demo.html)

```
$("#makeMeScrollable").smoothDivScroll("disable"); 
```

# c# - 如何使用工厂模式？

> ID：11875199
> 
> 赞同：0
> 
> 时间：2012-08-09T00:32:39.170
> 
> 标签：c#, .net, factory-pattern

> **可能重复：**
> [.NET Framework 中的构造函数与工厂](https://stackoverflow.com/questions/1869519/constructor-vs-factory-in-net-framework)

我了解工厂模式并已实施，但无法获得它将带来什么好处。例如，而不是：

```
MyType1 obj=new Mytype1();
MyType2 obj=new Mytype2(); 
```

写作：

```
IMyType obj1 = Factory.Create(1);
IMyType obj2 = Factory.Create(2); 
```

是我错过了还是没有怀孕。能否请您举出您自己的经验示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:47:39.023

工厂模式的一些好处：

1.  您可以跟踪您创建的对象。如果您想重用对象或强制限制创建的对象数量，工厂可以强制执行。
2.  您可以控制对象的创建方式。如果有一些参数用于创建对象，您可以在客户端为已创建的对象传递相同参数时返回现有对象。
3.  您可以让工厂返回一个接口，但在内部创建支持该接口的不同类型的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:36:26.863

jQuery 是一个工厂函数，它利用 JavaScript 的工作方式来创建内存占用非常低的对象。

让我们用一个极其简化的 jQuery 版本进行调查，以帮助了解潜在的好处：

```
var $ = jQuery = (function(){ //this anon function fires once, and returns a function

//defines all kinds of internal functions jquery uses here

function jQuery(selector,context){ // we're going to return this inner JQ later
    //defines only the logic needed to decide what to do with the arguments here
    //and then builds the jQuery object with 'return new jQuery.prototype.init();'
}

//defines jQuery.prototype properties here:
jQuery.prototype = {
    //...
    init:function(selector,context){ //gets used to build the JQ objects
        this.constructor.prototype = jQuery.prototype; //hands off the function prototype
    }
    //...
}

return jQuery; //this gets assigned to the outer jQuery and $ vars

})() 
```

所以......现在我们有一个工厂函数，它也类似于命名空间，我们可以扩展其原型，并期望这些方法在它吐出的对象上可用。此外，除了它们通常包装的 DOM 对象之外，对象本身在内存中的权重很小，因为所有函数都是从闭包中拉入的引用，或者作为引用传递的外部原型对象。除了一些逻辑和一些状态变量之外，当您向工厂函数的原型属性添加新方法时，当 jQuery 第一次从原型对象解析或传递时，就会构建对象所需的一切。

现在，试着用`new jQuery()`

如果有的话，在 JavaScript 中应用工厂模式可以非常强大且独特。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T01:01:41.820

工厂模式的好处在于它封装了构造的细节和具体的使用方式。这使您可以在以后以更少的地方进行更改，从而演变为更有趣的设计。

考虑这个例子：

```
public interface IStorage
{
    void Save(SomeObject toSave);
    SomeObject Get(SomeId id);
}

public class DatabaseStorage : IStorage
{
    public void Save(SomeObject toSave)
    {
       //persist to DB somehow
    }

    public SomeObject Get(SomeId id)
    {
       //get from db somehow and return
    }
}

public class StorageFactory
{
    public IStorage GetStorage()
    {
         return new DatabaseStorage();
    }
}

public class DatabaseStorage : IStorage
{
    public void Save(SomeObject toSave)
    {
       //persist to DB somehow
    }

    public SomeObject Get(SomeId id)
    {
       //get from db somehow and return
    }
} 
```

现在假设您稍后需要缓存一些结果或记录所有结果。您可以创建一个代理，如下所示：

```
public class LoggingStorage : IStorage
{
    private readonly IStorage _proxied;

    public LoggingStorage(IStorage proxied)
    {
        _proxied = proxied;
    }

    public void Save(SomeObject toSave)
    {
       //log this call
       _proxied.Save(toSave);
    }

    public SomeObject Get(SomeId id)
    {
       //log this call
       return _proxied.Get(id);
    }
} 
```

现在，如果您使用了构造函数，则必须替换它的每次使用以将其包装为 this。如果您使用工厂，您只需更改它：

```
public class StorageFactory
{
    public IStorage GetStorage()
    {
         return new LoggingStorage(new DatabaseStorage());
    }
} 
```

当然，投机工厂对此似乎有些笨拙，这就是我更喜欢[封装构造函数](http://www.netobjectives.com/competencies/encapsulate-constructors)的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T00:40:05.910

工厂模式之所以好的原因有很多

其中几个是：

*   您可以在工厂中初始化项目（默认值等）并使项目创建程序化（查看其他类/程序，获取默认值，检查配置值）。

构造函数是创建项目的一种方法，但如果不将类与这些依赖项紧密耦合，则无法检查其他类或运行新创建的实例之外的其他进程

*   它为项目创建提供了一个中央存储库，可以在团队中的开发人员之间强制执行模式/实践

这些是我能想到的一些原因:)

例如

此类依赖于 ConfigManager 进行实例化

```
class SomeClass 
{
    public int SomeValue;

    public SomeClass() 
    {
        // Check the config for some value
        SomeValue = ConfigManager.GetDefaultInt("SomeValue");
    }
} 
```

这个类不是因为它使用工厂

```
class SomeClass 
{
    public int SomeValue;

    public SomeClass() 
    {
    }
}

class SomeClassFactory 
{
    public SomeClass CreateSomeClass() 
    {
        SomeClass obj = new SomeClass();
        obj.SomeValue = ConfigManager.GetDefaultInt("SomeValue");
    }
} 
```

# jquery - 使用 jQuery 关闭 div 并在元素周围重新打开它

> ID：11875201
> 
> 赞同：0
> 
> 时间：2012-08-09T00:32:43.507
> 
> 标签：jquery

我的 HTML 如下所示：

```
<div class='background'>
    <div class='item' id='item1'>... </div>
    <div class='item' id='item2'>... </div>
    <div class='item' id='item3'>... </div>
    ... (more 'item's follow)
</div> <!-- background> 
```

我一直在尝试使用 jQuery 来完成`background`之前关闭 div的操作`item2`，然后再重新打开它。像这样：

```
$('#item2').before('</div>');
$('#item2').after('<div class="background">'); 
```

但是 jQuery 反常地坚持要解决这个问题：

```
<div class='background'>
    <div class='item' id='item1'>... </div>
    <div class="background"></div>
    <div class='item' id='item2'>... </div>
    <div class='item' id='item3'>... </div>
    ...
</div> <!-- background> 
```

这显然是无用的。

在越来越绝望的情况下，我尝试使用该`.html()`方法强制`</div>... <div>`标签出现。没用：jQuery 简直不敢相信我想插入那个标记。（这种折磨的语法：

```
var oldc = $('#item2').html();
var newc = '</div></div>'+oldc+'<div class="background"><div>';
$('#item2').html(newc); 
```

决议：

```
<div class="item" id="item2">...
<div class="background"><div></div></div>
</div> 
```

（如在 Firebug 中所见）。）

有没有一种简单的方法可以使用 jQuery 来解决这个问题，还是我从根本上被误导了？

澄清一下：我想要结束的是：

```
<div class='background'>
    <div class='item' id='item1'>... </div>
</div>
    <div class='item' id='item2'>... </div>
<div class="background">
    <div class='item' id='item3'>... </div>
    ... (more 'item's follow)
</div> <!-- background> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:40:48.757

您不能只使用 DOM 操作添加关闭标签。您可以创建所需的新 div，将其附加到现有的 div 之后，然后将一些 DOM 元素从原始背景 div 移动到新的背景 div。您可以使用以下代码执行此操作：

```
var newContainer = $("<div class='background'></div>");
$(".background").after(newContainer);
$("#item2").nextAll().appendTo(newContainer); 
```

这将创建新的背景 div，将其放在当前背景 div 之后，然后获取所有同级`#item2`并将它们移动到新的背景 div。

工作演示：http: [//jsfiddle.net/jfriend00/G3uyA/](http://jsfiddle.net/jfriend00/G3uyA/)

* * *

好的，根据您的说明，此代码将与上面相同，但还将 item2 拉出与背景处于同一级别：

```
var origContainer = $(".background");
var target = $("#item2");
$("<div class='background'></div>").insertAfter(origContainer).append(target.nextAll());
target.insertAfter(origContainer); 
```

工作演示：http: [//jsfiddle.net/jfriend00/7Dsqw/](http://jsfiddle.net/jfriend00/7Dsqw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T00:56:03.013

我认为最有效的方法是默认情况下不将这些元素包含在`.background`div 中。

然后，定位之后的所有元素`#item1`并使用以下内容`wrapAll()`包装它们`.background`：

```
$("#item1").nextAll().wrapAll( $("<div>").addClass("background") ); 
```

然后定位`#item1`并使用`wrap()`将其包装在第二个`.background`元素中：

```
$("#item1").wrap( $("<div>").addClass("background") ); 
```

你甚至可以链接它们：

```
$("#item1")
    .nextAll()
    .wrapAll( $("<div>").addClass("background") )
    .end()
    .wrap( $("<div>").addClass("background") ); 
```

[例子](http://jsfiddle.net/purmou/2GEpB/1/)。

我们在 first 之后包装的原因`#item1`是因为一旦`#item1`被包装， using`nextAll()`不会给我们任何东西，因为其余元素将不再是它的兄弟姐妹。

* * *

**编辑：**在你澄清之后，我稍微修改了上面的例子，不包括`#item2`在`nextAll()`. 这样，`#item1`将被放置在它自己的`.background`元素和任何东西之后`#item2`。`#item2`不会受到影响：

```
$("#item1")
    .nextAll(":not(#item2)")
    .wrapAll( $("<div>").addClass("background") )
    .end()
    .wrap( $("<div>").addClass("background") ); 
```

[例子](http://jsfiddle.net/purmou/2GEpB/2/)。

* * *

最后，如果您实际上无法`.background`从现有 HTML 中删除原始内容，则可以使用`unwrap()`删除父级但保留所有子级：

```
$("#item1")
    .unwrap()
    .nextAll(":not(#item2)")
    .wrapAll( $("<div>").addClass("background") )
    .end()
    .wrap( $("<div>").addClass("background") ); 
```

[例子](http://jsfiddle.net/purmou/2GEpB/3/)。

# php - 外部数据库上的 phpMyAdmin 配置

> ID：11875203
> 
> 赞同：0
> 
> 时间：2012-08-09T00:33:03.193
> 
> 标签：php, mysql, phpmyadmin

> **可能重复：**
> [使用 php myAdmin 连接到外部服务器](https://stackoverflow.com/questions/1722064/connect-to-external-server-by-using-php-myadmin)

我的网络主机在不同的服务器上提供数据库，所以“本地主机”不是我的选择。如何设置 phpMyAdmin 配置存储以使用外部服务器？

我试过： `$cfg['Servers'][$i]['pmadb'] = 'dbname.dbserver.host.com';` 和 `$cfg['Servers'][$i]['pmadb'] = 'dbname@dbserver.host.com';`

但那些没有用。有什么建议么？

这是我的设置...
FreeBSD 7.3-RELEASE-p2
Apache/2.2.22
MySQL 5.0.91-log
mysqlnd 5.0.8-dev
phpMyAdmin 3.5.2.1
使用配置身份验证

我将我的配置数据库的设置放入 config.inc.php 中常规非配置数据库的配置块中，并且使用以下内容可以正常工作：

```
$cfg['Servers'][$i]['verbose'] = 'pma';
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'dbuser';
$cfg['Servers'][$i]['password'] = 'dbpass';
$cfg['Servers'][$i]['only_db'] = array('dbname');
$cfg['Servers'][$i]['host'] = 'dbserver.host.com';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
$cfg['Servers'][$i]['extension'] = 'mysqli'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:47:41.460

```
$cfg['Servers'][$i]['host'] = 'dbserver.host.com'; // use host (I removed dbname.) 
```

**编辑 1**

测试直连：

```
mysql --host=dbserver.host.com --user=*** --password=*** 
```

您的设置应该可以工作。否则请寻求支持。（需要 SSL 连接？、安全证书？等）

# backbone.js - 与 Require.js (AMD) 的骨干关系

> ID：11875208
> 
> 赞同：3
> 
> 时间：2012-08-09T00:33:59.917
> 
> 标签：backbone.js, requirejs, marionette, backbone-relational

我正在开发一个相当大的网络应用程序，我将在其中使用 require.js，因此一旦它准备好用于生产，我就可以编译它，但我想使用骨干关系。我也将使用骨干木偶，但我不确定它将如何包含在模块的定义功能中。

有人对这个有经验么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T22:32:22.920

我正在将 Backbone Marionette 与 Relational 一起使用，并使用 Require.js 加载它们。基本思想是您需要确保已加载 Relational。一种方法是在定义关系模型时将关系作为要求包括在内。

在我的项目中，我创建了一个名为`bbloader.js`(Backbone Loader) 的简单脚本，用于加载所有相关的主干模型：

```
define([
  'backbone',
  'iosync',
  'iobind',
  'relational',
  'marionette',
  'marionette.async'
  ], function(Backbone) {
    return Backbone;
}); 
```

然后在整个项目中，我需要`bbloader`而不是 Backbone。例如：

```
define([
  'jquery',
  'underscore',
  'bbloader',
  // ...
], function($, _, Backbone) {
  // ...
}); 
```

Backbone Relational 已经与 AMD 兼容，因此您不需要在那里做任何额外的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:39:07.533

Marionette 100% 支持 AMD。有一些关于启动和运行的 wiki 页面，非常简单：

[https://github.com/derickbailey/backbone.marionette/wiki/Using-marionette-with-requirejs](https://github.com/derickbailey/backbone.marionette/wiki/Using-marionette-with-requirejs)

我会假设 BB-R 也可以，但我不使用这个插件，所以我不能 100% 确定。

# tsql - 如何防止以下 TSQL 查询以 100% 的速度运行我的服务器？

> ID：11875209
> 
> 赞同：1
> 
> 时间：2012-08-09T00:34:07.297
> 
> 标签：tsql, sql-server-2008-r2, query-optimization

以下查询在 SQL Server 2008R2 中针对 ItemData 表的存储过程中运行：

```
SELECT TOP(500) ItemListID, GeoCity, GeoState, GeoDisplay, Title, Link, Description, CleanDescription, OptimizedDescription, PubDateParsed, ImageBytes, DateAdded  FROM  (      SELECT TOP(500) ItemListID, GeoCity, GeoState, GeoDisplay, Title, Link, Description, CleanDescription, OptimizedDescription, PubDateParsed, ImageBytes, DateAdded, ROW_NUMBER()             
       OVER( ORDER BY ItemListID DESC )
       AS RowNumber  
       FROM ItemData  
       WHERE CONTAINS(Title, @FTSSearchTerm  ) -- ' + @OriginalSearchTerm + '"')   
       AND  ( WebsiteID=1 AND 
                                     (@GeoCity = '-1' OR GeoCity = @GeoCity)  AND
                                     (@GeoState = '-1' OR GeoState = @GeoState) )
                   ) ItemData   WHERE RowNumber >= ( @PageNum - 1) * @PageSize + 1   AND RowNumber <= @PageNum * @PageSize ORDER BY ItemListID DESC 

        SELECT @NumberOfResultsReturned = @@ROWCOUNT         

        SELECT @ActualNumberOfResults = COUNT(*) FROM ItemData WHERE CONTAINS(Title, @FTSSearchTerm  ) -- ' + @OriginalSearchTerm + '"')    AND  ( WebsiteID=1 AND       (@GeoCity = '-1' OR GeoCity = @GeoCity)  AND    (@GeoState = '-1' OR GeoState = @GeoState) ) 
```

根据查询使用的数据`CONTAINS`或`FREETEXT`。

在负载情况下，此查询运行速度非常慢，并且以 100% 的速度查看服务器。

我设置了以下索引：

![在此处输入图像描述](../Images/9992275206f352b256b2e97e21d13d21.png)

我需要怎么做才能使这些查询停止运行这么热？

谢谢。

**- 更新 -**

该表有一个仅由 ItemListID 和标题和描述上的 FTS 组成的聚集索引。

我添加了一个非聚集索引（在身份名称中错误地命名），如下所示：

![非聚集索引](../Images/6195633dc9649ff0f7f453924d105cf9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:25:15.093

在没有实际查看执行计划的情况下，您似乎需要一个关于 Title、GeoCity、GeoState 和 WebsiteID 的非聚集索引，其中包含以下列：ItemListID、GeoDisplay、Link、Description、CleanDescription、OptimizedDescription、PubDateParsed、ImageBytes、DateAdded

这将允许执行计划使用包含您在此查询中查找的所有信息的一个非聚集索引。没有它，它将使用您显示的索引之一，并且仍然必须去表中获取您需要的数据。

但是，这并不能完全解决您的问题，具体取决于您的表中有多少数据，执行包含标题进行搜索总是很昂贵。如果您可以利用[全文搜索](http://msdn.microsoft.com/en-us/library/ms142571.aspx)来完成搜索部分，那将是最好的。

希望这会有所帮助！

# ios - 自定义 UI 警报视图未正确显示

> ID：11875219
> 
> 赞同：0
> 
> 时间：2012-08-09T00:35:57.920
> 
> 标签：ios, uialertview, ios5.1

我正在创建一个自定义 ui 警报视图。一切正常，除了用于自定义警报的任何背景图像在其顶部都有标准的蓝色叠加层。无论如何我可以摆脱这个？

（电话是`backgroundImage`警报视图）

![在此处输入图像描述](../Images/d0779b9e826c5924b13b26643dfe274b.png)

.m 自定义类

```
 @synthesize backgroundImage, alertText;

 - (id)initWithImage:(UIImage *)image text:(NSString *)text {
 if (self = [super init]) {
    alertTextLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    alertTextLabel.textColor = [UIColor whiteColor];
    alertTextLabel.backgroundColor = [UIColor clearColor];
    alertTextLabel.font = [UIFont boldSystemFontOfSize:28.0];
    [self addSubview:alertTextLabel];

    self.backgroundImage = image;
    self.alertText = text;
   }
 return self;
 }

 - (void) setAlertText:(NSString *)text {
alertTextLabel.text = text;
}

- (NSString *) alertText {
return alertTextLabel.text;
}

- (void)drawRect:(CGRect)rect {
//CGContextRef ctx = UIGraphicsGetCurrentContext();

CGSize imageSize = self.backgroundImage.size;
//CGContextDrawImage(ctx, CGRectMake(0, 0, imageSize.width, imageSize.height),    self.backgroundImage.CGImage);
[self.backgroundImage drawInRect:CGRectMake(0, 0, imageSize.width, imageSize.height)];
 }

 - (void) layoutSubviews {
alertTextLabel.transform = CGAffineTransformIdentity;
[alertTextLabel sizeToFit];

CGRect textRect = alertTextLabel.frame;
textRect.origin.x = (CGRectGetWidth(self.bounds) - CGRectGetWidth(textRect)) / 2;
textRect.origin.y = (CGRectGetHeight(self.bounds) - CGRectGetHeight(textRect)) / 2;
textRect.origin.y -= 0.0;

alertTextLabel.frame = textRect;

alertTextLabel.transform = CGAffineTransformMakeRotation(- M_PI * .08);
}

- (void) show {
[super show];

CGSize imageSize = self.backgroundImage.size;
self.bounds = CGRectMake(0, 0, imageSize.width, imageSize.height);
} 
```

在我的 Viewcontroller 中调用警报

IBA动作：

```
 UIImage *backgroundImage = [UIImage imageNamed:@"Telephone.png"];
alert = [[JKCustomAlert alloc] initWithImage:backgroundImage     text:NSLocalizedString(@"Title", nil)];
[alert show];

[self performSelector:@selector(hideAlert) withObject:nil afterDelay:4.0]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:14:59.370

根据 ios 文档

> 子类化注释
> 
> UIAlertView 类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改。

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)

这可能就是您无法修改背景的原因。

无论如何，您要做的是一个简单的自定义视图。制作您自己的自定义视图，并使其表现得像一个警报视图。

这很容易。

# java - 可以向 ActiveMQ 代理发送消息的简单 Java 应用程序

> ID：11875220
> 
> 赞同：0
> 
> 时间：2012-08-09T00:36:00.880
> 
> 标签：java, jakarta-ee, activemq

我将编写一个简单的 Java（控制台）应用程序，它将一些消息发送到 ActiveMQ 代理。

*   我必须为此使用 Java EE 吗？我可以改用 Java SE 吗？
*   如果我必须使用 Java EE，我应该选择哪种类型的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:28:08.997

`javax.jms package`from `Java EE`with the足以[`Active MQ libraries`](http://activemq.apache.org/)实现您想要的功能。

这是[示例应用程序的链接](http://www.javablogging.com/simple-guide-to-java-message-service-jms-using-activemq/)

Java EE SDK 可以在[这里](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)下载，您只需要 Java EE SDK（“Java EE SDK 6”或“Java EE SDK 6 + JDK 7”，由您选择）。此任务既不需要`Glassfish Application Server`也不`WebProfile`需要。

# android - 我什么时候应该使用 engine.getTouchOptions().setRunOnUpdateThread(true);

> ID：11875221
> 
> 赞同：2
> 
> 时间：2012-08-09T00:36:12.853
> 
> 标签：android, andengine

我正在查看许多 andengine 示例，并试图了解何时需要使用“getTouchOptions().setRunOnUpdateThread(true)”。我知道当触摸事件触发精灵或实体的删除时，这可能会有所帮助。但是为什么在“PhysicsExample”中有

```
public Engine onLoadEngine() {
    Toast.makeText(this, "Touch the screen to add objects.", Toast.LENGTH_LONG).show();
    final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    final EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    engineOptions.getTouchOptions().setRunOnUpdateThread(true);
    return new Engine(engineOptions);
} 
```

由于 Box2D，我是否需要确保仅在更新线程中添加主体？我想要的是对那个引擎特性有一个很好的理解，什么时候使用它，什么时候不应该使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:55:57.923

据我所知，这条线意味着触摸输入只会在更新线程上处理，所以如果你在触摸时做任何事情......它通常会在更新线程上，如果你正在使用可以使用的东西同时由另一个线程，在 updateThread 上运行它[绘制精灵是在并行线程上完成的，这就是为什么你需要在更新线程上删除实体]

这同样适用于修改列表

# php - 使用 $var = eval("2 + 2") 不会在 PHP 中按预期进行评估？

> ID：11875227
> 
> 赞同：0
> 
> 时间：2012-08-09T00:37:10.933
> 
> 标签：php, eval

我使用 eval 命令尝试了许多不同的代码组合。但是我的答案总是空白。这是我试过的一个简单的。

```
$equation = "18 - (18 * 2) - 1";
$var = eval($equation);
echo "answer: " . $var; 
```

我知道这不需要 eval 代码，但我正在处理的真实代码需要。它总是显示为空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:38:08.720

您需要在传递它时在方程中设置变量，`eval()`以使其成为有效且完整的 PHP 表达式：

```
$equation = "18 - (18 * 2) - 1";
eval(  '$var = ' . $equation . ';');
echo "answer: " . $var; 
```

或者，您可以返回值：

```
$var = eval(  'return ' . $equation . ';'); 
```

现在您可以执行`echo $var;`此[演示](http://viper-7.com/PnREYn)了。

话虽如此，`eval()`通常不鼓励使用，因为潜在问题通常通过其他方式解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T00:41:01.707

## 解决方案

`return`在评估的语句中添加，否则`eval()`将不知道返回什么：

```
$equation = '2 + 2 * 2';
$var = eval("return $equation;"); 
```

证明，上述工作：http: [//ideone.com/bTtIH](http://ideone.com/bTtIH)

## 关于`return`与设置变量的优越性

更多来自[以下文档`eval()`](http://php.net/manual/en/function.eval.php)：

> `eval()`返回`NULL`除非`return`在评估代码中调用，在这种情况下`return`返回传递给的值。

换句话说：不需要污染命名空间，你可以直接从`eval()`返回的东西中得到你想要的东西。

# wcf - 同一合约的不同绑定

> ID：11875228
> 
> 赞同：1
> 
> 时间：2012-08-09T00:37:18.187
> 
> 标签：wcf, wcf-binding, wcf-client

我有一个带有操作合同的 wcf 服务，如下所示。

```
[OperationContract]       
bool IsUserAvailable(string userName);

[OperationContract]
[WebInvoke(
    Method = "GET",
    ResponseFormat = WebMessageFormat.Json,
    UriTemplate = "CreateUser?userId={userId}")]
bool CreateUser(string userId); 
```

注意一个是用 webInvoke 属性定义的。我有 2 个使用这些方法的应用程序。应用程序 1 通过 http web 请求调用 createUser 方法，应用程序 2（wcf 客户端）直接调用 IsUserAvailable。如果我尝试在下面的 web.config 中定义基本 http 绑定和 webhttpBinding - 我会遇到问题。（绑定实例已经关联到监听 URI 'http://localhost:xxxx/BookStore.svc'。如果两个端点想要共享同一个 ListenUri，它们也必须共享同一个绑定对象实例。两个冲突的端点要么在 AddServiceEndpoint() 调用中指定，要么在配置文件中指定，要么是 AddServiceEndpoint() 和配置的组合。）

```
 <endpoint binding="basicHttpBinding" contract="BookStore.IBook" address=""></endpoint>

  <endpoint address=""
            binding="webHttpBinding"
            behaviorConfiguration="webBehavior"
            contract="BookStore.IBook" />

  <endpoint address="mex"
              binding="mexHttpBinding"
              behaviorConfiguration="mexBehavior"
              contract="IMetadataExchange" /> 
```

我的问题是 - 我怎样才能在不遇到问题的情况下对同一份合同进行不同的绑定。如果我没有指定 basichttp 绑定，我会收到错误消息（没有端点监听）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T07:30:45.787

您需要有不同的地址 - webHttpBinding 和 basicHttpBinding （如您所料）都在 http 方案上，因此您需要通过地址区分两个端点。

# php - 7zip 字符串/流压缩 PHP/C？.7z 存档中没有文件名/日期存储，每个字节计数

> ID：11875230
> 
> 赞同：0
> 
> 时间：2012-08-09T00:38:01.903
> 
> 标签：php, c++, c, linux, 7zip

我想压缩 1 个小文件/数据，只有文件大小很重要。无需文件信息存储，如文件名、大小、日期等...

如果我使用 rar/7zip/zip 作为 CLI，则会将文件信息添加到存档中。这对我不好。我找到了文件大小的最佳压缩解决方案。

**在 PHP 中，我可以使用 gzdeflate() 或 bzcompress() 来压缩字符串，然后以压缩的形式保存到文件中。我找到了相同的或 CLI 解决方案。** 环境：Linux，32/64 位。

我想将 7zip/7za 用于字符串/流压缩。

如果我使用 7z 的二进制版本，例如：7za a -mx9 output.7z input.dat

但是这次在.7z 中找到了文件/日期/大小信息并且文件大小更大。

如何使用 7zip 或其他更好的压缩器（如 bzcompress 或 gzdeflate）仅压缩数据流，而无需文件信息？

也许我实际上不能在 PHP 中使用 7zip，因为还不支持。

**有人可以推荐/创建一个小型 C/C++ CLI 应用程序/源代码或其他语言，在 Linux CLI 中可以使用什么来压缩 1 个文件并输出到 1 个文件？**

例如我想要shell exec：

**7zcpp input.dat output.7z** 或 **7zcpp -mx9 input.dat output.7z**

**总结：压缩速度不重要，只有更好，文件更小。我只想压缩 1 个文件（字符串/流），每个字节计数，存档内不需要文件名/日期信息。我可以使用比 7zip 更好的压缩器，但我认为这实际上是最好的压缩器之一。有什么想法、建议吗？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-16T05:54:54.950

7Zip memory compression functions - You could check out their [SDK](http://www.7-zip.org/sdk.html) and try to look through the functions, - In (C, C++, Java and C#, too bad no php, unless you create your own php extension to bring 7z functionality into your app). In the LZMA SDK, go through the path C\Util\Lzma, find the LzmaUtil.c, it's a perfect example to help you . But I've personally used zlib, lzma compresses to 8% of data set size, compared to zlib's 12%, even though zlib is much faster. But since you don't give a shit about speed, lzma is best for you then

# ruby-on-rails - 如何使用ruby确定文本字段的内容是rails中的哈希还是字符串？

> ID：11875233
> 
> 赞同：0
> 
> 时间：2012-08-09T00:38:19.397
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我在 Rails 应用程序中有一个字段定义为文本（在数据库端）。现在，一些较旧的数据作为字符串直接写入其中。我想开始向它添加哈希。

当我检索数据时，如果它是一个哈希，我想以不同的方式呈现它。

这是我尝试过的，但它不起作用，因为acts_like？方法总是返回 false：

```
if suggestion.acts_like? Hash
  suggestion.each {|attr, value| puts(helper.t attr+": "+value.to_s)}
else
  puts suggestion
end 
```

我做错了什么？是acts_like吗？甚至在这里使用正确的东西？

* * *

我试图结束这个问题，因为我找到了答案，但它似乎没有正确保存。

这是我最终使用的：

```
if suggestion.is_a? Hash
....
else
...
end 
```

我还是不知道为什么acts_like？行不通，但 is_a? 确实有效！Oldergod 的 kind_of 建议？也有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:46:54.197

你可以

```
if suggestion.kind_of?(Hash)
  # ...
end 
```

或者

```
if Hash === suggestion
  # ...
end 
```

# eclipse - 在 Eclipse 中，我在 CVS 中的项目的这一系列操作会做我希望他们做的事情吗？

> ID：11875236
> 
> 赞同：0
> 
> 时间：2012-08-09T00:38:30.553
> 
> 标签：eclipse, version-control, cvs

我对 CVS 不是很熟悉，但在我的工作中，我有一个 CVS 项目，其形状如下：

```
------A-------B  D         Main branch
      |
      |----------C         My branch 
```

标签 A 处的项目有效。在标签 B，它没有，所以 A 正在生产中。这都是几年前完成的。我来了，想对A做些改动，但是对B了解不多，又不想碰，所以做了个分支。在 C，我认为我的改变很重要，而 B 无关紧要。我希望 C 中的任何内容都位于主分支的 D 中，并且从 A 到 B 的所有内容都被忽略。

我工作中的某个人建议我通过操作系统将我的分支的内容复制到主分支的内容上，但随后说它打破了历史，我应该先向 Stack Overflow 寻求更好的解决方案。

我在 Eclipse 中做这一切，所以我的想法是在工作区中打开 A，将 C 合并到其中，并将结果提交给头部，优先考虑我的每一个差异，以获得 D。但是，我'恐怕从 AC 到 D 的合并可能达不到我的预期，而且我不想破坏事情。

我的问题是：**这会像我期望的那样做吗？**如果没有，有什么比我同事的建议更安全的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:21:53.257

如果我必须使用 CVS，我更喜欢使用 WinCVS。我们的一些遗留的东西使用 CVS，这很痛苦。

您合并回主分支的方式与 SVN 完全相同，但看起来要复杂得多。看看 WinCVS 是否让它变得更容易并告诉我。但是不要复制和转发，这是一种非常糟糕的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:29:37.737

[http://www.eclipse.org/articles/article.php?file=Article-BranchingWithEclipseAndCVS/article2.html](http://www.eclipse.org/articles/article.php?file=Article-BranchingWithEclipseAndCVS/article2.html)简要展示了 CVS Merge 功能。您将希望找到代表您从 HEAD 分歧的点以使用它的标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T04:55:39.903

事实证明，**不**，它不会像我期望的那样。将 C 合并到 A 按预期工作，但在 B 上提交 AC 不会，因为我在 A 标签下工作，而不是在 HEAD 标签 (B) 下工作，并且提交只会更改旧标签。

而不是建议的方法，它应该以相反的顺序完成，或者一次完成。HEAD应该恢复为A，然后可以合并分支，也可以同时进行。Eclipse 中的 CVS 没有一种简单的方法可以干净地完成此操作，但它*确实*有一种*烦人*的方法可以干净地完成此操作：

*   在您的工作区中打开 HEAD。
*   右键单击项目 -> 比较 -> 另一个分支或版本...
*   选择分支分裂的点 (A) 或要用 (C) 替换 HEAD 的分支末端。
*   同步视图将向您显示两个版本之间不同的每个文件。
*   对于**每个**不同的文件，返回包资源管理器视图并右键单击 -> 历史...（不是“另一个分支或版本...”，因为这样您将一次使用多个标签并提交会去不同的地方）。然后选择包含您要保留的文件版本的标签（A 或 C，取决于您要比较的内容）。
*   一旦没有剩余的差异，就提交。

如果与 C 相比，两个分支都处于相同的状态。你完成了。D 会有你想要的。

相反，如果您与 A 进行比较，您现在可以将 C 合并到 HEAD 上。一旦你再次提交，D 就会得到你想要的。

# objective-c - 从php返回两个字符串到ios

> ID：11875238
> 
> 赞同：0
> 
> 时间：2012-08-09T00:38:37.370
> 
> 标签：objective-c, ios, xcode

我正在创建一个应用程序，它通过 php 从 mysql 数据库中获取一些值。我已经返回一个通过 php 回显的字符串并在目标 C 中使用它。

这是我到目前为止所拥有的：

```
 NSString * strURL = [NSString stringWithFormat:@"http://localhost/search.php?name=%@",name];
    NSData * dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];        
    NSString * result = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];
    NSLog(@"%@", result); 
```

是否可以从 php 返回 2 个不同的字符串并在 xcode 中分别使用它们，还是我必须对 php 文件进行 2 个不同的调用？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:52:04.097

伟大的开始！

考虑使用某种结构化方式从 PHP 返回数据。您可以学习的一种简单的格式是 JSON，它将有助于以后的其他 API 集成。

[Apple 使用NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)为 iOS5 中的转换提供了一些简单的代码

在 PHP 方面，使用[json_encode](http://php.net/manual/en/function.json-encode.php)。例如，您可以传入一个索引数组，这将在 iOS 端为您提供一个 NSArray。

iOS 端的更多示例： [如何使用 NSJSONSerialization](https://stackoverflow.com/questions/8356842/how-to-use-nsjsonserialization)

# php - PHP：从数组或 SQL 表中获取数据是否更快？

> ID：11875240
> 
> 赞同：1
> 
> 时间：2012-08-09T00:38:50.000
> 
> 标签：php, sql, database, arrays

我有一个 md5 哈希列表，每个哈希对应一个文件名。如果放入 PHP 数组，我会像这样`$md5['filename']`在 SQL 表中获取数据，我会使用`SELECT filename FROM hashes WHERE md5 = $md5`.

哪种方法更快？一个数据较少的情况下是否比另一个执行得更快，但数据更多时执行的时间更长？我正在查看的 md5 哈希值约为 1100 个哈希值。

这是静态数据，尽管散列的数量会随着时间的推移而增加。SQL 连接时间有很大的不同吗？一个比另一个更实用吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T00:39:33.250

从数组中获取数据更快，因为必须连接到所涉及的数据库的开销。PHP 正在以尽可能快的速度直接从内存中获取值。

# javascript - ui - empty() 和 append() 后手风琴不起作用

> ID：11875243
> 
> 赞同：0
> 
> 时间：2012-08-09T00:39:25.170
> 
> 标签：javascript, html, jquery-ui, accordion, jquery-ui-accordion

我有四个 DIV，我称之为手风琴功能。它最初工作正常。但是在我清除所有内容并再次附加四个 DIV 后它失败了。

请看一下链接 [http://jsfiddle.net/p7vUk/2/](http://jsfiddle.net/p7vUk/2/)

您将看到单击 divA 时，divAA 将滑动切换。单击 divB 时，divBB 将滑动切换。

单击“全部清除”按钮后，将清除 div=content 并附加相同的四个 DIVS，但 jquery 手风琴无法工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:45:39.207

手风琴样式和行为是在创建时定义的。看起来手风琴在内容更改时不会更新。似乎也没有可以调用来触发更新的方法。

你试过把它关掉再打开吗'？

```
//change content, then:
$("#content").accordion("destroy");
$("#content").accordion({ ... your options ... }); //create it again 
```

这可能需要更多相关的工作，例如设置最初选择的选项卡等。

# database - 错误给出消息“无法更新数据库，因为数据库是只读的。”

> ID：11875249
> 
> 赞同：0
> 
> 时间：2012-08-09T00:40:38.087
> 
> 标签：database

当我在 Visual Studio 中运行窗口窗体应用程序时，它可以工作，但是在进行设置时。出现两个问题：

1.  任何一个应用程序都没有运行。
2.  给出消息：

> 更新数据库失败，因为数据库是只读的。

我`.mdf`在项目中使用数据库文件。`.mdf`文件位于项目文件夹中。

请提供完整的细节来解决这个问题。

# emacs - 自定义 emacs-prelude 提供的包列表

> ID：11875250
> 
> 赞同：9
> 
> 时间：2012-08-09T00:40:41.153
> 
> 标签：emacs, elisp, emacs-prelude

我在[此链接](http://batsov.com/articles/2012/02/19/package-management-in-emacs-the-good-the-bad-and-the-ugly/)中看到 emacs prelude 如何确保在 emacs 启动时安装一组软件包。我想知道是否可以在`prelude-packages`不更改文件的情况下以某种方式扩展变量以添加一些其他包`prelude-packages.el`？

除非我想知道如何定义在启动时安装的软件包列表（如果当前未安装）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T13:20:47.453

您可以在 Prelude`.el`的目录中放置一个文件。`personal/`Prelude 按字母顺序加载它在其中找到的任何 .el 文件。以下是我的`personal/00-packages.el`文件内容：

```
(require 'package)
(add-to-list 'package-archives
             '("marmalade" .
               "http://marmalade-repo.org/packages/"))
(package-initialize)

;; My packages
(setq prelude-packages (append '(
                                 drupal-mode
                                 nginx-mode
                                 ) prelude-packages))

;; Install my packages
(prelude-install-packages) 
```

在文件名中添加“00”以确保在所有个人定制之前加载文件。将您需要的任何新包添加到要附加到的列表中`prelude-packages`。

此外，如果您想使用 MELPA 或 Marmalade 中不可用的任何模式，您只需将模式的文件放到个人文件夹中，Prelude 就会在加载时将其拾取。如果对该模式有任何自定义，只需创建另一个 .el 文件并在其中添加 Emacs Lisp 代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-24T15:51:52.700

[Prelude 推荐](https://github.com/bbatsov/prelude#personalizing)使用

```
(prelude-require-packages '(some-package some-other-package)) 
```

如果你有几个包。或者，如果您只想添加一个包：

```
(prelude-require-package 'some-package) 
```

* * *

如果你愿意，你仍然可以在一个变量中维护你的包列表：

```
(setq my-packages '(drupal-mode nginx-mode toto-mode)
(prelude-require-package my-packages) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T23:02:04.407

在您的 .emacs 文件中，您可以添加这样的代码（与您发送的链接中的代码非常相似）来检查每个包是否已安装，如果没有安装它：

```
(dolist (package '(eredis anything erlang elnode)) 
  (unless (package-installed-p package)
    (package-install package))) 
```

在回答您的问题时，您没有理由在前奏代码运行后不能这样做。

# asp.net - .net 自定义 httpmodule 错误页面问题

> ID：11875253
> 
> 赞同：0
> 
> 时间：2012-08-09T00:40:49.590
> 
> 标签：asp.net, httpmodule, custom-error-pages

我的应用程序有一个用于处理友好 URL 的自定义 HTTPModule。这是 web.config 文件的模块部分。

```
<modules>
<remove name="ScriptModule"/>
<remove name="Session"/>
<add name="Session" type="System.Web.SessionState.SessionStateModule" preCondition=""/>
<add name="NHibernateSessionModule" type="MyApp.Core.NHibernateBase.NHibernateSessionModule"/>
<add name="ApplicationModule" type="MyApp.ApplicationModule"/>
<add name="URLDispatcher" type="MyApp.URLDispatcher"/>
<add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
</modules> 
```

该模块还具有处理错误页面的逻辑。我现在遇到的问题是，当请求的 url 以 '.' 结尾时 发送到服务器，我的模块都没有被触发，用户看到默认的 asp.net 404 页面。

不确定发生了什么以及如何将用户重定向到我的自定义 404 页面。

我确实找到了与此相关的另一个问题，提供的解决方案是使用 web.config 文件中的 .Net 4 特定配置标签之一。目前我无法迁移到 .Net 4。所以，我正在寻找不同的解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:59:11.817

我猜您正在使用 http 重定向来获取友好的 url。

如果应用程序在 IIS7 下，请检查您是否安装了以下功能：

**控制面板 --> 程序 --> 关闭 windows 功能 --> 万维网服务 --> 通用 HTTP 功能 --> HTTP 重定向**

然后你需要配置你的自定义 http 模块，不仅在

```
<system.web>
    <httpModules>
        <add name="CustomModule" type="NameSpace.ClassName, AssemblyName" />
    </httpModules>
</system.web> 
```

但也在

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
        <add name="CustomHttpModule" type="NameSpace.ClassName" />
    </modules>
</system.webServer> 
```

# javascript - 使用 javascript 为 HTML 表格单元格分配颜色

> ID：11875261
> 
> 赞同：2
> 
> 时间：2012-08-09T00:41:31.557
> 
> 标签：javascript, jquery, html

我正在尝试创建一个 HTML 表格，用户可以在其中选择一种颜色，当拖动到表格单元格或列出相同的颜色时，应该将相同的颜色应用于这些表格单元格，这是我的表格应该如何看起来的示例[http://pekas .lbclients.info/SchedulesWorkManage.php](http://pekas.lbclients.info/SchedulesWorkManage.php) ,

这是另一个使用 jquery 的示例[http://jsfiddle.net/few5E/](http://jsfiddle.net/few5E/)，我想要一些与此类似的东西，但我想通过选择颜色向表中添加不同的颜色。

我是 javascript 的新手，所以任何有关这方面的帮助都会非常有帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:58:45.850

因此，如果您要拥有具有 .color-selection 类的 div 或表格单元格，那么当被单击时，您将拥有类似的内容：

```
<div style="background-color: blue;">Blue</div>
<div style="background-color: green;">Green</div>
<div style="background-color: red;">Red</div>

var selectedColor = "black";

$('.color-selection').click(function(){
   selectedColor = $(this).css('background-color');
 }); 
```

然后，当您单击表格单元格时，您只需通过执行以下操作将 selectedColor 变量分配给单元格的样式：

```
$('table td').click(function(){
   $(this).css('background-color', selectedColor);
}); 
```

# php - 如何判断我网络上的机器是否使用 PHP？

> ID：11875263
> 
> 赞同：0
> 
> 时间：2012-08-09T00:41:37.897
> 
> 标签：php, analysis, ping, enterprise, lan

我想编写一个类似于[Enterprise Network Console](http://eocdemo.solarwinds.com/)的 PHP 脚本，但用于 PC 和设备的 LAN，而不是服务器的 WAN。

我希望能够检查 PC、复印机等是否连接到网络。即使它们已关闭，我也想知道，但是这是不可能的，因为 PC 会忽略数据包，除非它是局域网唤醒数据包，对吗？

检查 PC 是否打开或关闭的最佳方法是什么？我曾经`fSocketOpen()`测试过服务器，但大多数 PC 都不是服务器。它们响应 ping，但没有为连接打开端口，这意味着 PHP`fSocketOpen()`无法工作，但 ping 可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:55:12.950

您可以使用系统命令并捕获标准输出以获取结果。

只需搜索 PHP 的 popen ( [http://uk3.php.net/popen](http://uk3.php.net/popen) ) 示例。

```
echo run('ping 192.168.1.5');

function run($command) {
    $command .= ' 2>&1';
    $handle = popen($command, 'r');
    $log = '';

    while (!feof($handle)) {
        $line = fread($handle, 1024);
        $log .= $line;
    }

    pclose($handle);
    return $log;
} 
```

# php - 尝试回显通过 mysql_fetch_array 获取的数组时出现“未定义的变量”

> ID：11875264
> 
> 赞同：0
> 
> 时间：2012-08-09T00:41:45.693
> 
> 标签：php, mysql, arrays

下面是我的代码：

```
session_start();
include_once "config.inc.php";
$tbl_name="members";

 $username=$_SESSION['username'];
$sql = "SELECT quiz1mark, quiz2mark, quiz3mark FROM $tbl_name WHERE username='$username'";
$query = mysql_query($sql);
$data = mysql_fetch_array($query, MYSQL_ASSOC); 
```

然后，在页面下方：

```
<p><?php echo $data; ?></p> 
```

这会生成一个通知：`Notice: Undefined variable: data in F:\xampp\htdocs\quiz_home.php on line 35`

我已经明确定义了变量，但不确定是什么导致了这个问题。

```
***Contents of config.inc.php***:

$host="localhost";
$username="root";
$password="";   //the default installation of xampp does not include a mysql password
$db_name="bda";
//connect to the database using the above information (variables)
mysql_connect("$host", "$username", "$password")or die("cannot connect to server");
mysql_select_db("$db_name")or die("cannot select database"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:53:39.643

尝试的结果是什么？：

```
var_dump($data); 
```

# windows - 控制台小部件 wxpython

> ID：11875269
> 
> 赞同：0
> 
> 时间：2012-08-09T00:43:29.803
> 
> 标签：windows, linux, wxpython, cross-platform, wxwidgets

我已经派生了一个用 C ( [Picoc](http://code.google.com/p/picoc/) ) 编写的解释器，我想为该解释器创建一个 GUI。

GUI 应该在底部有一个 textarea（pygtk 中的 TextView）和一个控制台，它将显示您刚刚编写的脚本的输出，并在需要时提示输入。

我确实创建了一个具有**VTE 控制台小部件的****PyGTK** GUI ，但问题是我想让**PyGTK 跨平台**，我正在使用 GTKSourceView 并且正如我在谷歌上寻找的那样，将 GTK 移植到 Windows 并不容易，所以，我研究了 WxPython（与 Code::Blocks 相同的窗口管理器），但问题是：

 ****它确实存在 wxPython 上的控制台小部件吗？

最重要的是，它的便携性如何？我可以将它移植到 Windows 上比 GTK 更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:59:31.597

我的理解是 PyGTK 是跨平台的。它只是不使用本机小部件。无论如何，我肯定在 Windows 上使用过用它编写的应用程序。诚然，我在 Windows 上实际使用它从来没有太多运气。

至于 wxPython，不，它没有控制台小部件。您必须使用 Python 的子进程来启动控制台窗口并与之通信。另一方面，wxPython 非常便携。我已经在所有 3 个主要平台上看到了应用程序的屏幕截图，并且我已经编写了几个在 Windows 和 Ubuntu 上工作的应用程序。****

# javascript - 是否可以对超出范围的 setInterval 变量调用 clearInterval 方法？

> ID：11875270
> 
> 赞同：1
> 
> 时间：2012-08-09T00:43:33.937
> 
> 标签：javascript

我有一个 setInterval 函数，它在 for 循环中使用它的 id 初始化一个变量，这导致在 for 循环中执行许多 setInterval 函数。现在我的问题是，每个 setInterval 函数都将分配给一个变量，一个变量是否可以包含所有 setIntervals id 的值或只包含一个？如果所有 id 都可以包含在单个变量中，是否可以通过包含在变量中的 id 清除某些 setIntervals，或者我需要为每个 setInterval 声明一个唯一变量才能执行此操作？

```
var intervalId;
for(var i = 0; i < 10; i++) {
     intervalId = setInterval(function() {}, 100);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T00:49:07.403

从`setInterval`和返回的值`setTimeout`是数字，因此只有一个“适合”变量。

你可以做一个数组：

```
var intervalId = [];
for(var i = 0; i < 10; i++) {
     intervalId.push( setInterval(function() { ... }, 100) );
} 
```

请注意，您的问题中缺少一些重要的东西，那就是区间函数中的代码。具体来说，如果该代码想要引用“i”，就会出现问题：所有单独的函数将**共享**相同的“i”变量（在循环头中声明的那个）。

为了解决这个问题，你可以这样做：

```
 function makeTimerFunction(i) {
   return function() {
     // the code
     if (whatever) { clearInterval(intervalId[i]); }
     // and so on
   };
 }

 var intervalId = [];
 for (var i = 0; i < 10; i++) 
   intervalId.push( setInterval( makeTimerFunction(i), 100 ) ); 
```

通过使用单独的函数，您可以创建另一个范围，并且可以将“i”的每个值“冻结”在单独的每个计时器变量中。

*编辑*——@pst 正确指出，如果你确实想从处理函数*内部*引用计时器 id ，那么根本不需要那个“intervalId”数组——你可以只使用包装器函数来隔离对`setInterval()`.

```
function createTimer() {
  var timerId = setInterval(function() {
    // the code
    if (whatever) { clearInterval( timerId ); }
    // ...
  };
}

for (var i = 0; i < 10; ++i)
  createTimer(); 
```

这样，每个计时器都设置了它自己的私有计时器 ID 变量。当然，如果您*确实*需要函数之外的计时器 id，那么您需要一个用于 id 的外部缓存。

# javascript - 通过 JavaScript 编写 cookie

> ID：11875273
> 
> 赞同：1
> 
> 时间：2012-08-09T00:43:50.800
> 
> 标签：javascript, cookies, popup

我正在使用此代码打开一个 html 弹出窗口，希望向其中添加一个“不再显示”按钮，该按钮将在 cookie 中存储首选项，以便不会再次显示弹出窗口 为什么不它工作吗？

这是应该写入 cookie 的行：

```
document.cookie = "dontShow=1; path=/; expires=Wednesday, 01-Jan-2020 12:00:00 GMT; domain=.qpcftw.co.cc"; 
```

**更新：**问题是 cookie 没有被存储，并且“alert(document.cookie);” （见下文）表明 cookie 为空（未显示任何内容）。

这是完整的JS代码：

```
/***************************/
//@Author: Adrian "yEnS" Mato Gondelle
//@website: www.yensdesign.com
//@email: yensamg@gmail.com
//@license: Feel free to use it, but keep this credits please!
/***************************/
var popupStatus = 0;

$(document).ready(function(){
        if (document.cookie != "dontShow=1; path=/; expires=Wednesday, 01-Jan-2040 12:00:00 GMT; domain=.qpcftw.co.cc"){
        $("#backgroundPopup").css({
            "opacity": "0.75"
        });
        $("#backgroundPopup").fadeIn(1000);
        $("#popupContact").fadeIn(1000);
        popupStatus = 1;
        }
    //CLOSING POPUP
        //Don't show again
        $("#dontShow").click(function(){
            document.cookie = "dontShow=1; path=/; expires=Wednesday, 01-Jan-2020 12:00:00 GMT; domain=.qpcftw.co.cc";
            alert(document.cookie); //4debugging
            disablePopup();
        });
        //Click the x event!
        $("#popupContactClose").click(function(){
            disablePopup();
        });
        //Click out event!
        $("#backgroundPopup").click(function(){
            disablePopup();
        });
        //Press Escape event!
        $(document).keypress(function(e){
            if(e.keyCode==27 && popupStatus==1){
                disablePopup();
            }
        });
});

//disabling popup with jQuery magic!
function disablePopup(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut(500);
        $("#popupContact").fadeOut(500);
        popupStatus = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:04:58.433

试试这个：

[**小提琴演示**](http://jsfiddle.net/uKwrM/)

```
document.cookie = 'dontShow=1; expires=Wed, 01 Jan 2020 12:00:00 GMT; path=/';

function readCookie(option) {
    var optionEQ = option + '=';
    var ca = document.cookie.split(';');

    for(var i = 0; i < ca.length; i++) {
        var c = ca[i];

        while(c.charAt(0) === ' ') {
            c = c.substring(1, c.length);
        }

        if (c.indexOf(optionEQ) === 0) {
            return c.substring(optionEQ.length, c.length);
        }
    }

    return false;
}

if (!readCookie('dontShow')) {
    //run your popup code
} 
```

**编辑：**或者，作为自定义 jQuery 插件：

[**插件版本小提琴**](http://jsfiddle.net/uKwrM/1/)

```
document.cookie = 'dontShow=1; expires=Wed, 01 Jan 2020 12:00:00 GMT; path=/';

(function($) {
    $.fn.readCookie = function(option) {
        var optionEQ = option + '=';
        var ca = document.cookie.split(';');

        for(var i = 0; i < ca.length; i++) {
            var c = ca[i];

            while(c.charAt(0) === ' ') {
                c = c.substring(1, c.length);
            }

            if (c.indexOf(optionEQ) === 0) {
                return c.substring(optionEQ.length, c.length);
            }
        }

        return false;
    }
})(jQuery);

if (!$(document).readCookie('dontShow')) {
    $('#cookie-status').html('<p>Cookie not set.</p>');
} else {
    $('#cookie-status').html('<p>Cookie has been set.</p>');
} 
```

希望这可以帮助！:)

# python - 如何验证 Entry 小部件的内容？

> ID：11875279
> 
> 赞同：1
> 
> 时间：2012-08-09T00:44:38.260
> 
> 标签：python, tkinter, widget, tkinter-entry

在我的 Tkinter 应用程序中，我有一个 Entry 小部件，用户应该用数字填充它。

是否可以将输入的值限制为`int`和？`float``long`

具体来说，用户应该只输入一个数字：

*   这可以是`float`, `int`, `long`.
*   用户只能放一个`.`（一个数字无论如何都没有 2 个点）。

* * *

```
import tkinter as tk

class App():
    def __init__(self):
        self.root = tk.Tk()
        vcmd = (self.root.register(self.on_validate), '%d', '%i', '%s', '%S')
        self.entry = tk.Entry(self.root, validate="key", validatecommand=vcmd)
        self.entry.pack()
        self.root.mainloop()

    def on_validate(self, d, i, s, S,):
        if S == "-" and s.count('-') != 1 and int(i) == 0:
            return True
        if d == "0":
            return True
        try:
            return int(S) >= 0 and int(S) <= 9
        except:
            if S == "." and s.count('.') != 1:
                return True
            return False

app = App() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:09:22.900

您不能限制数据类型，但可以限制允许的字符。请参阅问题[Python/Tkinter：交互式验证条目小部件内容的答案](https://stackoverflow.com/questions/4140437/python-tkinter-interactively-validating-entry-widget-content)

# iphone - iPhone - 将应用程序安装到应用程序文件夹

> ID：11875281
> 
> 赞同：0
> 
> 时间：2012-08-09T00:45:06.113
> 
> 标签：iphone, sandbox

我正在开发的应用程序出现问题（注意：它仅用于研究/学习目的，因此不需要经过苹果商店的批准）。我需要访问沙箱之外的系统文件。我想知道是否有人知道安装到根 /Applications/ 文件夹以避免被沙盒化的方法。从阅读其他问题来看，这对于 Xcode 来说似乎是不可能的，但是有没有办法使用其他编辑器构建非沙盒应用程序？如果有，有哪些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:52:38.523

看来您首先需要 root 权限，然后使用越狱设备的 SSH 功能才能安装到 /applications 文件夹。有关此主题的更多信息，请参阅此处：[在 iOS 上为 NSFileManager 获得 root 权限（越狱）](https://stackoverflow.com/questions/7841344/error-permission-denied-when-accessing-ios-filesystem-jailbreak?rq=1)

# python - OAuth：使用参数作为 POST 数据接收回调

> ID：11875285
> 
> 赞同：8
> 
> 时间：2012-08-09T00:46:28.040
> 
> 标签：python, oauth

我是 OAuth 的新手，我正在使用[`oauth2`Python 上的库](https://github.com/simplegeo/python-oauth2)来完成我的工作。

目前，当我收到来自服务器的回调时，URL 中的参数如下：

```
http://mydomain/?oauth_verifier=(SOME_DATA)&oauth_token=(SOME_DATA)&oauth_callback_confirmed=true 
```

我想知道是否可以指示服务器以某种方式将`POST`这些参数（`oauth_verifier`, `oauth_token`, `oauth_callback_confirmed`）作为回调而不是在 URL 中显示（作为 GET 请求）？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T02:46:10.330

不，不可能将回调参数编码为 POST 请求。[OAuth 1.0 规范](http://oauth.net/core/1.0/)说提供者向回调 URL 发出 HTTP 重定向：

> 如果消费者在 oauth_callback 中提供了回调 URL（如消费者将用户定向到服务提供者中所述），则服务提供者构造一个 HTTP GET 请求 URL，并使用以下参数将用户的 Web 浏览器重定向到该 URL：

由于 HTTP 重定向[只能是 GET 而不是 POST](https://stackoverflow.com/questions/46582/response-redirect-with-post-instead-of-get)，因此您的回调只能包含 URL 中的参数。

# jquery - 使用 css 控制 facebooks fb-like-box 样式

> ID：11875286
> 
> 赞同：-1
> 
> 时间：2012-08-09T00:46:34.497
> 
> 标签：jquery, css, facebook

我正在使用`SOCIAL PLUGINS` `LIKE BOX`
并希望控制[超出 FB 提供给您的样式](https://developers.facebook.com/docs/reference/plugins/like-box/)

这个例子我试图隐藏图标没有运气
**问题**：你如何定位这个 iframe 来控制它的元素？

这是我的代码`css`

```
.fb-like-box .connect_top a img{display:none !important;} 
```

与`jQuery`

```
$('.fb-like-box .connect_top a img').css({'display':'none'}); 
```

![在此处输入图像描述](../Images/edb2bb39adedb28001cd98282da2d032.png) ![在此处输入图像描述](../Images/02d6d7927e22c720250f1f57c0df212f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:18:21.623

试试这个 HTML：

```
<iframe id="fb_like_box" src="//www.facebook.com/plugins/like.php?href=<URL TO YOUR PAGE>&amp;send=false&amp;layout=button_count&amp;width=150&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" allowtransparency="true"></iframe> 
```

但是用真实的网址替换到喜欢的页面。

# iphone - 调度队列、并发和完成处理

> ID：11875288
> 
> 赞同：1
> 
> 时间：2012-08-09T00:46:43.343
> 
> 标签：iphone, ios, ipad, objective-c-blocks, grand-central-dispatch

我有一组要处理的对象。对象具有如下方法

```
@interface CustomObject : NSObject

- (void)processWithCompletionBlock:(void (^)(BOOL success))completionBlock;

@end 
```

每个对象的处理需要不同的时间，并且可能有不同的结果。并且已知处理本身是同时执行的。说实话，限制并发操作的数量会很棒，因为它们非常密集。

所以我需要枚举这个对象数组并处理它们。如果某些对象处理失败，我需要跳过所有其余对象。当然，在枚举和处理所有对象之后，我需要得到通知。

是否应该通过创建`NSOperationQueue`和`NSOperation`子类来解决？这个类如何满足这些要求？还有其他一些优雅的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:59:02.797

这正是`NSOperation`设计的目的。调度队列是低级得多的处理程序，您必须为此构建许多您需要的部分。你当然可以这样做（`NSOperationQueue`建立在 GCD 之上），但你会重新发明`NSOperation`.

在大多数情况下，您可以处理`NSOperation`两种方式。如果它很简单，您可以创建一个`NSBlockOperation`. 如果它有点复杂，您可以子类`NSOperation`化并覆盖该`main`方法以执行您想要的操作。

有几种方法可以取消所有其他操作。每个组可以有一个单独的操作队列。然后，您可以轻松调用`cancelAllOperations`以关闭所有内容。或者你可以有一个单独的控制器，它知道相关操作的列表，它可以调用`cancel`它们。

请记住，“取消”只是意味着“如果它没有盯着，就不要安排，如果有就设置`isCancelled`。” 它不会中止正在运行的操作。如果要中止正在运行的操作，该操作需要定期检查`isCancelled`.

您通常应该限制队列将运行的并发操作的数量。使用`setMaximimumConcurrentOperationCount:`.

有两种方法可以确定所有操作都已完成。您可以进行额外的操作（通常是 a `BlockOperation`）并使用`addDependency:`使其依赖于所有其他操作。这是一个很好的异步解决方案。如果您可以处理同步解决方案，那么您可以使用`waitUntilAllOperationsAreFinished`. 我通常更喜欢前者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T00:59:07.460

使用 NSOperationQueue 并使您的类成为 NSOperation

使用此方法排队您的工作

```
- (void)addOperations:(NSArray *)ops waitUntilFinished:(BOOL)wait 
```

将操作队列的引用添加到您创建的 NSOperation 子类

如果发生错误调用

```
- (void)setSuspended:(BOOL)suspend 
```

在 NSOperationQueue 上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:02:34.600

好的。为了帮助其他人了解如何处理这种方法，我分享了我自己的代码。

为了限制并发线程的数量，我们可以调用实例的`-(void)setMaximimumConcurrentOperationCount:`方法。`NSOperationQueue`

为了迭代对象并提供完成机制，我们可以定义以下方法：

```
- (void)enumerateObjects:(NSArray *)objects
{
    // define the completion block
    NSBlockOperation *completionOperation = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@"Update UI");
    }];

    // register dependencies
    for (CustomObject *obj in objects) {
        CustomOperation *operation = [[CustomOperation alloc] initWithCustomObject:obj];
        [completionOperation addDependency:operation]; // set dependencies for the completion block
        [_operationQueue addOperation:operation];
    }

    // register completionOperation on main queue to avoid the cancellation
    [[NSOperationQueue mainQueue] addOperation:completionOperation];
} 
```

覆盖子类的`- (void)start`方法，`NSOperation`开始我们的自定义操作：

```
- (void)start
{
    // We need access to the operation queue for canceling other operations if the process fails
    _operationQueue = [NSOperationQueue currentQueue];

    if ([self isCancelled]) {
        // Must move the operation to the finished state if it is canceled.
        [self willChangeValueForKey:@"isFinished"];
        _finished = YES;
        [self didChangeValueForKey:@"isFinished"];
        return;
    }

    [self willChangeValueForKey:@"isExecuting"];
    // We do not need thread detaching because our `-(void)processWithCompletionBlock:` method already uses dispatch_async
    [self main]; // [NSThread detachNewThreadSelector:@selector(main) toTarget:self withObject:nil];
    _executing = YES;
    [self didChangeValueForKey:@"isExecuting"];

} 
```

覆盖子类的`- (void)main`方法`NSOperation`来处理我们的自定义对象：

```
- (void)main
{
    @try {
        NSLog(@"Processing object %@", _customObject);
        [_customObject processWithCompletionBlock:^(BOOL success) {
            _processed = success;
            if (!success) {
                NSLog(@"Cancelling other operations");
                [_operationQueue cancelAllOperations];
            }
            [self completeOperation];
        }];
    }

    @catch (NSException *exception) {
        NSLog(@"Exception raised, %@", exception);
    }
} 
```

感谢@Rob 指出我缺少的部分。

# iphone - ipad 的背景被切成两半

> ID：11875297
> 
> 赞同：0
> 
> 时间：2012-08-09T00:48:02.660
> 
> 标签：iphone, css, ipad

我试图完成这个网站，在我整理代码的某个地方，我弄乱了背景在 ipad 和 iphone 上的外观。它在所有其他浏览器上看起来都很好，包括原生 android。火狐上有一个小错误，但我现在正在解决这个问题。有问题的网站：http: [//morzi.com/constantine/](http://morzi.com/constantine/)

简介页面有一个指向 ipad css 的链接，但忽略了我只是在胡闹试图解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:27:01.253

我不知道从哪里开始，我不知道你用什么软件来编码，但它绝对不是手工编码的：s。

无论如何，你的 CSS 真的搞砸了。三种解决方案：

*   手动编写 CSS 代码，在这种情况下，您可以调整背景位置，使背景与内容对齐，然后您可以重新设计图片以查看左侧的人。

    ```
    background-position:top center; 
    ```

*   重构您的 HTML 和 CSS 以使网站在隔间中工作：|aside|article|aside|

    ```
    <aside id='left'></aside>
    <article></article>
    <aside id='right'></aside>

    <style>
    aside#right,
    aside#left {
      width:5%;
    }
    article {
      width:90%;
      margin:0 auto;//centers the div
    }
    </style> 
    ```

*   为具有特定宽度的移动设备创建媒体类型，如下所示

    ```
    @media only screen and (max-device-width: 480px) {//Iphone and below
    //css for mobile device
    }
    @media only screen and (max-device-width: 768px) {//Ipad and below
    //css for mobile device
    } 
    ```

我希望这对您有所帮助并祝您好运：D

# ruby-on-rails - 一种防止用户意外发布两次的方法？

> ID：11875303
> 
> 赞同：2
> 
> 时间：2012-08-09T00:49:58.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有哪些方法可以防止用户单击按钮两次并无意中发布两次？有没有特定于rails的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:01:11.560

[button_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-button_tag)助手包括一个选项，`:disable_with`. 使用此选项将在提交表单时禁用按钮（使用不显眼的 JavaScript），从而防止额外的点击。

# r - 如何在 R 中安装 tcltk？

> ID：11875307
> 
> 赞同：9
> 
> 时间：2012-08-09T00:50:19.110
> 
> 标签：r

我的系统是：debian6 + r-2.15。

我已经安装`tcl-devel`并`tk-devel`使用`apt-get`：

```
apt-get install tcl8.5-dev tk8.5-dev 
```

但我收到以下错误

```
> library("tcltk") 
Error : .onLoad failed in loadNamespace() for 'tcltk', details:
call: fun(libname, pkgname)
error: Tcl/Tk support is not available on this system
In addition: Warning message:
S3 methods ‘$.tclvar’, ‘$<-.tclvar’, ‘as.character.tclObj’, ‘as.character.tclVar’,  
‘as.double.tclObj’, ‘as.integer.tclObj’, ‘as.logical.tclObj’, ‘as.raw.tclObj’, 
‘print.tclObj’, ‘[[.tclArray’, ‘[[<-.tclArray’, ‘$.tclArray’, ‘$<-.tclArray’, 
‘names.tclArray’, ‘names<-.tclArray’, ‘length.tclArray’, ‘length<-.tclArray’, 
‘tclObj.tclVar’, ‘tclObj<-.tclVar’, ‘tclvalue.default’, ‘tclvalue.tclObj’,
‘tclvalue.tclVar’, ‘tclvalue<-.default’, ‘tclvalue<-.tclVar’, ‘close.tkProgressBar’ were declared in NAMESPACE but not found 
Error: package/namespace load failed for ‘tcltk’
> install.packages('tcltk')
Warning message:
package ‘tcltk’ is not available (for R version 2.15.1) 
```

如何`tcltk`在我的 R 中安装？

* * *

### 编辑

```
> capabilities()["tcltk"]
tcltk 
FALSE 
```

我编译了 R-2.15.1 以将其安装在 debian6.04 上，但现在我该怎么做才能运行`tcltk`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T01:00:24.403

我认为你做错了。

阅读[http://cran.r-project.org/bin/linux/debian/](http://cran.r-project.org/bin/linux/debian/)上的 README以了解如何为您的 Debian 版本获取当前的 R 版本（无论是稳定版还是测试版）。这个版本*已经*支持`tcltk`R 附带的包，前提是 R 以正确的方式构建。使用适当的预构建版本最容易保证。

您可以通过查看`capabilities()`：

```
R> capabilities()["tcltk"]
tcltk 
 TRUE 
R> 
```

# android - 如何实现复合视图（android.view.InflateException 错误）

> ID：11875308
> 
> 赞同：0
> 
> 时间：2012-08-09T00:50:21.673
> 
> 标签：android

我是 Android 新手，我想了解 android 的复合视图概念。我不确定我的以下实现是否实用，但它是出于学习目的，我从 Wrox Android 书中获得了这个想法。所以，我有三个组件，即一个按钮、一个编辑文本和一个列表视图。编辑文本的目的是写一些文本，而列表会随着文本更新，按钮是清除按钮，假设清除编辑文本。我打算做的是保留清除按钮并在一个视图组中编辑文本。在它下面是它的 java 和 xml 代码。

```
public class CompoundView extends LinearLayout {

EditText editText;
Button clearButton;

public CompoundView (Context context, AttributeSet attr) {
    super(context, attr);
    String infService = Context.LAYOUT_INFLATER_SERVICE;
    LayoutInflater li;

    li = (LayoutInflater)getContext().getSystemService(infService);
    li.inflate(R.layout.clearable_edit_text, this, true);

    editText = (EditText) findViewById(R.id.editText);
    clearButton = (Button) findViewById(R.id.clearButton);

    hookUpButton ();
}

public void hookUpButton () {

    clearButton.setOnClickListener(new Button.OnClickListener () {
        public void onClick (View v) {
            editText.setText ("");

        }
    });
}

public EditText getEditText() {
    return this.editText;
}

} 
```

XML

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="match_parent"
android:layout_height="wrap_content">
<EditText 
    android:id="@+id/editText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    />
<Button
    android:id="@+id/clearButton"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Clear"
    />
</merge> 
```

我有一种强烈的感觉，这个实现很好。在下一部分中，我有 MainActivity.java 和 activity_main.xml。在这我面临的问题，很可能我做错了一些事情。

```
public class MainActivity extends Activity {

@SuppressLint({ "ParserError", "ParserError" })
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ListView myListView = (ListView)findViewById(R.id.myListView);

    final CompoundView textAndClear = (CompoundView) findViewById(R.id.myEditAndClear) ;
    final EditText editText = textAndClear.getEditText();
    final ArrayList<String> toDoItems = new ArrayList<String>();

    final ArrayAdapter<String> aa;
    int resId = R.layout.todolist_item;
    aa= new ArrayAdapter<String> (this, resId, toDoItems);
    myListView.setAdapter(aa);

    editText.setOnKeyListener(new View.OnKeyListener() {

        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if(event.getAction() == KeyEvent.ACTION_DOWN)
                if ((keyCode == KeyEvent.ACTION_DOWN) || (keyCode == KeyEvent.KEYCODE_ENTER)){
                    toDoItems.add(0,editText.getText().toString());
                    aa.notifyDataSetChanged();
                    editText.setText("");
                    return true;
                }
            return false;
        }
    });
    }
} 
```

和 XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<com.example.wroxexample.CompoundView
    android:id="@+id/myClearableEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    />
<ListView
    android:id="@+id/myListView"
    android:layout_below="@+id/myEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/>
</RelativeLayout> 
```

错误是

```
06-29 06:32:11.783: E/AndroidRuntime(5413): FATAL EXCEPTION: main
06-29 06:32:11.783: E/AndroidRuntime(5413): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.wroxexample/com.example.wroxexample.MainActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class com.example.wroxexmple.CompoundView
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.os.Looper.loop(Looper.java:137)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at java.lang.reflect.Method.invokeNative(Native Method)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at java.lang.reflect.Method.invoke(Method.java:511)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at dalvik.system.NativeStart.main(Native Method)
06-29 06:32:11.783: E/AndroidRuntime(5413): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class com.example.wroxexmple.CompoundView
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.app.Activity.setContentView(Activity.java:1835)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at com.example.wroxexample.MainActivity.onCreate(MainActivity.java:20)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.app.Activity.performCreate(Activity.java:4465)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-29 06:32:11.783: E/AndroidRuntime(5413):     ... 11 more
06-29 06:32:11.783: E/AndroidRuntime(5413): Caused by: java.lang.ClassNotFoundException: com.example.wroxexmple.CompoundView
06-29 06:32:11.783: E/AndroidRuntime(5413):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.view.LayoutInflater.createView(LayoutInflater.java:552)
06-29 06:32:11.783: E/AndroidRuntime(5413):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
06-29 06:32:11.783: E/AndroidRuntime(5413):     ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T05:55:32.457

在您发布的错误下方应该是异常的真正原因。我的猜测是，在简单查看您的代码之后，异常来自于您只实现了采用 a 的构造函数`Context`（这个构造函数通常在您实例化`View`in 代码时使用）。当您在 xml 布局中使用复合视图时，`AttributeSet`将使用也采用 a 的构造函数（而不是您实现的仅采用 a的构造函数`Context`）。

此外，作为旁注，您`View`在`onCreate`方法中搜索您的化合物并将其转换为`LinearLayout`. 然后，在回调中，`onKey`您尝试在其上调用未为该类实现的方法（您可能在自定义视图中拥有它们，但如果将视图转换为 a ，则方法将不可用）。`getText()``setText()``LinearLayout``LinearLayout`

此外，您可能希望阅读`merge`标签以改进您的化合物的布局`View`。

# python - 使用 sqlalchemy 在每组中的最高结果

> ID：11875309
> 
> 赞同：2
> 
> 时间：2012-08-09T00:50:23.460
> 
> 标签：python, sql, sqlalchemy

是否有一些很好的方法来表达查询从 SqlAlchemy 中的每个组返回前 N 个结果，或者我是否需要放入原始 SQL？

我的意思是像[按组查询中的最高值中提出的查询](https://stackoverflow.com/questions/2090804/top-values-in-a-query-by-group) ，例如，因为它需要在 MySQL 中手动计数，所以看起来我不能在代码中使用任何适当的抽象，但也许我遗漏了一些东西？

我正在寻找与 mysql、postgres、sqlite 兼容的解决方案。

# php - 从新 Wordpress 博客上的单独计算机访问时主题不起作用

> ID：11875310
> 
> 赞同：2
> 
> 时间：2012-08-09T00:50:44.703
> 
> 标签：php, css, wordpress, wamp

我正在将 WAMP 与一个新的 WordPress 博客一起使用。我在本地计算机上托管它。当我从另一台计算机访问此 URL 时，明显缺乏 CSS 外观。为了进一步澄清我自己，当我在另一个旨在计算应该加载的 CSS 的计算设备上查看这个站点时，它并没有执行其指定的任务。也许脚本没有执行它们的任务？WordPress 使用的 PHP 脚本可能存在影响外部设备整体性能的错误。我的英语，请原谅，并有我最深的敬意同志们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:18:10.593

也许您使用类似的 url 安装了您的博客`http://localhost/blog`

在 WordPress 数据库中，该 url 用于查找 CSS、主题文件等的链接......

使用您的 IP 地址（假设是 192.168.1.5）从另一台计算机访问会破坏 css，因为如果您查看 wordpress 页面的代码，您会看到指向 localhost 的链接，这对其他计算机没有任何意义机器（或者更好，因为另一台机器意味着“我自己”，所以它会在它的文件系统上而不是在你的远程电脑上寻找 css）。

抱歉英语不好。:P

# javascript - 从脚本后加载的处理程序中附加数据

> ID：11875311
> 
> 赞同：0
> 
> 时间：2012-08-09T00:50:54.623
> 
> 标签：javascript, jquery, jquery-events, jquery-on, jquery-append

我制作了一个显示用户 Facebook 照片的网站。下面的代码将照片附加到 div“facebook-images”。这部分工作正常。我遇到的问题是在加载下面的 Javascript 代码后附加图像；所以当浏览器读取底部的点击功能代码时不会创建处理程序“fb-image”，因此它不起作用。

我相信我需要使用 jQuery `on()`，但是在哪里呢？我试图`on()`在下面的代码中到处放置。我试过用 append 绑定，我试过现场直播（我知道它已被弃用但值得一试）。没有任何工作。

有任何想法吗？

```
<div class="target">

</div>

<div id="facebook-images">

</div>

<script>
    $.when(window.deferredes.fbLoaded, window.deferredes.fbLoggedIn).then(function () {
        $.getJSON('https://graph.facebook.com/me/photos?access_token=' + FB.getAccessToken(), function (data) {
            $.each(data.data, function (i, face) {
                $('#facebook-images').append("<div class='fb-image'><img src='" + face.source + "' ></div>");
            });
        });
    });

    $(".fb-image img").click(function () {
        $(".target").append("<h1>hi</h1>");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:52:53.770

解决此问题的最简单方法是在图像插入页面后添加点击处理程序。

```
<script>
    $.when(window.deferredes.fbLoaded, window.deferredes.fbLoggedIn).then(function () {
        $.getJSON('https://graph.facebook.com/me/photos?access_token=' + FB.getAccessToken(), function (data) {
            $.each(data.data, function (i, face) {
                $('#facebook-images').append("<div class='fb-image'><img src='" + face.source + "' ></div>");
            });
            $(".fb-image img").click(function () {
                $(".target").append("<h1>hi</h1>");
            });
        });
    });

</script> 
```

* * *

如果需要，您还可以使用委托事件处理。为此，您将事件处理程序设置在运行事件处理代码时确实存在的公共父级上，并通过向其传递如下选择器来`.on()`使用委托形式：`.on()`

```
<script>
    $.when(window.deferredes.fbLoaded, window.deferredes.fbLoggedIn).then(function () {
        $.getJSON('https://graph.facebook.com/me/photos?access_token=' + FB.getAccessToken(), function (data) {
            $.each(data.data, function (i, face) {
                $('#facebook-images').append("<div class='fb-image'><img src='" + face.source + "' ></div>");
            });
        });
    });

    $("#facebook-images").on('click', ".fb-image img", function () {
        $(".target").append("<h1>hi</h1>");
    });
</script> 
```

委托形式的`.on()`作品是这样的：

```
$(selector of static parent).on(event, selector that matches dynamic object, fn); 
```

# google-chrome-extension - Chrome 扩展 - 检查视图不显示

> ID：11875317
> 
> 赞同：6
> 
> 时间：2012-08-09T00:51:39.523
> 
> 标签：google-chrome-extension

我是 Chrome 扩展开发的新手。我尝试按照[http://developer.chrome.com/extensions/tut_debugging.html](http://developer.chrome.com/extensions/tut_debugging.html)上的“hello world”调试教程进行操作，但是当我正确时，我找不到检查弹出菜单或检查视图链接来打开调试器 -点击“你好世界”图标。

我注意到在我的 chrome 扩展选项卡：chrome://chrome/extensions/ 中，有一个“检查视图”链接，它使我能够打开我之前安装的 Google 翻译扩展的调试器。但是，“检查视图”链接没有显示“hello world”扩展（源代码：http: [//developer.chrome.com/extensions/examples/tutorials/getstarted.zip](http://developer.chrome.com/extensions/examples/tutorials/getstarted.zip)）。

我试图搜索是否有人有类似的问题，但我找不到。我正在为 Windows XP 使用 Google chrome 21.0.1180.60。

提前感谢您提供打开调试器的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T06:51:40.587

你是对的......试试这个：

*   通过单击打开 ext 弹出窗口
*   在显示的弹出窗口内右键单击并选择“检查元素”选项
*   这将为弹出窗口启动一个开发工具实例。

更多详情：[http ://samdutton.wordpress.com/2010/12/16/debugging-google-chrome-extensions/](http://samdutton.wordpress.com/2010/12/16/debugging-google-chrome-extensions/)

# php - fopen 带入 php 变量

> ID：11875319
> 
> 赞同：0
> 
> 时间：2012-08-09T00:52:09.240
> 
> 标签：php, html, parsing, strip

我试图在 php 中提取以下内容，但我的正则表达式或 egreg 不合适，我真的很困惑。请帮我把这些放到两个变量中：

```
 <a onmouseover="dgsa.sm(this)" onmouseout="dgsa.hm();" href="http://www.cnn.com/testpage.html#page_mostview">test titles</a> 
```

我想要变量：

```
$url="http://www.cnn.com/testpage.html#page_mostview";
$title="test titles"; 
```

非常感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:11:53.817

如果你有一个大字符串：

```
<?php
$str = '<a href="ABC.jpg">Hello</a>  <a href="DEF.jpg">Bye</a>';
$expr = '/<a[^>]*? href=\"(?<url>[^\"]+)\"[^>]*?>(?<text>.*?)<\/a>/';
echo preg_match_all($expr, $str, $amatches);
echo '<br><br>';
print_r($amatches);
?> 
```

您还可以使用：

```
preg_match_all($expr, $str, $amatches, PREG_SET_ORDER); 
```

哪个可能更适合（我通常更喜欢这种方法）

如果您有单独的字符串并在循环中处理，请改用 preg_match 。Tis 只会返回第一个，然后你循环。

* * *

编辑：根据要求，这是您的示例。

```
<?php

$str = '<a onmouseover="dgsa.sm(this)" onmouseout="dgsa.hm();" href="http://www.cnn.com/testpage.html#page_mostview">test titles</a>';

$expr = '/<a[^>]*? href=\"(?<url>[^\"]+)\"[^>]*?>(?<text>.*?)<\/a>/';

echo preg_match_all($expr, $str, $amatches, PREG_OFFSET_CAPTURE);

echo '<br><br>';

print_r($amatches);

?> 
```

# facebook-graph-api - 为什么我无法为我的 OpenGraph 对象获取页面“access_token”？

> ID：11875320
> 
> 赞同：0
> 
> 时间：2012-08-09T00:52:09.973
> 
> 标签：facebook-graph-api, facebook-opengraph, facebook-access-token

我有一个[非常简单的页面](https://dl.dropbox.com/u/3618086/willet/fb_admin2.html)，其中包含必要的 OpenGraph 标签，以便在喜欢时创建 OpenGraph 对象，并且我希望能够作为该页面发布。据我了解，我需要一个`access_token`页面，我可以通过访问 OpenGraph 页面来获取它......

```
https://graphs.facebook.com/PAGE_ID?fields=access_token 
```

...或者从我的帐户...

```
https://graphs.facebook.com/me/accounts 
```

...与适当的用户`access_token`。

但是，如果我检查其中任何一个，`access_token`我的页面都没有；如果我检查我帐户的页面，它甚至不在列表中。

我确保`fb:admins`在页面上包含一个带有我的用户 ID 的标签，并且我也喜欢该页面（[如 Open Graph 文档中的“页面管理”中所述](https://developers.facebook.com/docs/opengraphprotocol/)）。

**为什么我无法`access_token`为我的 OpenGraph 对象获取页面？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:56:36.467

> 为什么我无法为我的 OpenGraph 对象获取页面 access_token？

您无法获取 Open Graph 对象的页面访问令牌 - 这仅适用于 Facebook 页面。

[https://developers.facebook.com/docs/opengraphprotocol/#publishing](https://developers.facebook.com/docs/opengraphprotocol/#publishing)说您需要一个应用访问令牌来向喜欢您的 Open Graph 对象的用户发布更新。

# javascript - IE8 中的默认图像大小

> ID：11875323
> 
> 赞同：3
> 
> 时间：2012-08-09T00:53:11.110
> 
> 标签：javascript, image

我在 IE8 中加载图像如下：

```
var img = document.createElement('img');
img.src = 'images/starnohighlight.png'; 
```

图片为 30x30px @150dpi。

当我将图像添加到页面时：

```
td.appendChild(img); 
```

图像以 324x308 的放大尺寸显示。我知道我可以简单地将其强制为 30x30，因为我知道源图像的尺寸，但我更喜欢只在磁盘上提供 30x30 的图像并以其原始大小显示它。如果我需要更改图像的分辨率（比如 72dpi），那也可以，或者我至少可以在代码中说明这一点。

我没有在其他浏览器上测试过，只是因为我目前无权访问任何浏览器。

所以，总而言之，问题是：**如何以本机尺寸显示如上加载的图像？**

**编辑**：

我也试过这个，结果相同：

```
var imgObj = new Image();
imgObj.src = 'images/starnohighlight.png'; 
```

我已经从文档中删除了所有样式。还是同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:59:43.637

如果您显示这样的图像，并且没有其他设置影响它，它将*以*原始尺寸显示。

浏览器会忽略图像中的分辨率（PPI 或 DPI）设置，因此更改该设置将无效。

如果图像未以原始尺寸显示，则您有一些其他设置会影响图像标签。您可以使用 IE 中的开发人员工具 (F12) 来检查实际影响元素的样式。

# mongodb - 如何在 MongoDB 中每周查询数据？

> ID：11875325
> 
> 赞同：-1
> 
> 时间：2012-08-09T00:53:36.757
> 
> 标签：mongodb, database, nosql

我的实际文档比这更复杂，但像这样简化它们将解释我想要解决的问题。我有每天和每周的文件。

每日文件：`ObjectId, Type, Count, Date`

每周文件：`ObjectId, Type, Count, StartDate, EndDate`

如果我想要一份每日报告，我可以运行一个查询，该查询将选择日期字段值在 X 到 Y 范围内且类型等于“每日”的文档。我可以为每周报告做同样的事情，而且一切正常。

**问题：**

对于每周报告，如果开始日期不是一周的第一天并且结束日期不是一周的最后一天，选择类型为“每周”的文档将生成不准确的报告，因为每周文档存储整周的数据. 这可能看起来很奇怪，但 Google Analytics 可以让您这样做：

![在此处输入图像描述](../Images/94956f7fbf455ee0afa3456bd7fef257.png)

在上面的截图中，7 月 3 日不是该周的开始，7 月 17 日也不是该周的结束。但谷歌分析可以让你随心所欲地查看数据。

**可能的解决方案：**

一种可能的解决方案是生成溢出天数的每日报告，然后从每周报告中减去它。

**问题：**

有没有更好的解决方案来解决我描述的问题？我愿意重新设计文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:01:27.557

> 对于每周报告，如果开始日期不是一周的第一天并且结束日期不是一周的最后一天，选择类型为“每周”的文档将生成不准确的报告，因为每周文档存储整周的数据. 这可能看起来很奇怪，但 Google Analytics 可以让您这样做：

因为他们不存储这样的文件。

这种工作方式（我认为）是谷歌只是对日常文档进行总结，忽略你的“周”范围并应用他们自己的说法：

> 获得尽可能多的完整周数并汇总该范围内的每日文档

接着：

> 只需将其他人放在上面，使每个人成为终点和起点

我不会尝试在这里混合每周和每日文档，我只会查询每日文档并聚合客户端。

# c++ - C++ 如何通过可选的 typedef 选择类，使用 SFINAE 或其他

> ID：11875327
> 
> 赞同：2
> 
> 时间：2012-08-09T00:53:44.883
> 
> 标签：c++, templates, visual-c++, c++11, sfinae

用户通过定义指定所需选项的类来定制库模板类。称其为清单。这个想法是在清单中有可选的 typedef。例如，如果用户的清单包含 H 的 typedef，我希望库代码使用指示的类型作为其“H”。如果用户清单中没有 typedef，则库将使用默认值。

我怀疑有一种优雅的方法可以利用新的 C++11 特性来做到这一点，但我的想法是空的。我有一个基于 SFINAE 的 Wikipedia 条目的解决方案。这是丑陋的。对于每个新的 H ，它都需要一个新的模板函数**has_typedef_H**。我隐约感到不安的是，它利用了**0**可以表示整数或空指针的属性。只是看起来太笨拙了。

有没有更好的办法？最好是可以在 VC++ 2010 中使用的？

在玩具示例中，有五个类，H1、H2 和 U0、U1 和 U2。H1 和 H2 是库类 L 的“助手”示例。H1 是默认值。U 是用户定义类的示例。在示例中，我省略了定义库类 L，仅使用 main() 的主体根据 U 中的 typedef（或缺少该类型定义）来选择 H。H2 类型的主题。

```
 struct H1{
    void operator() (){ std::cout << "H1" << std::endl;}
};

struct H2{
    void operator() (){ std::cout << "H2" << std::endl;}
};

struct default_H: public H1 {};

struct U2 {
    typedef H2 H;
};

struct U1 {
    typedef H1 H;
};

struct U0 {
};

template <typename T>
class has_typedef_H {

    typedef char no[false+1];
    typedef char yes[true+1];

    template 
    static yes& test(typename C::H*);

    template 
    static no& test(...);

public:
    static const bool value = sizeof(test(0))-1; 
};

template<typename U, bool >
struct type_H_B: public default_H{};

template<typename U>
struct type_H_B<U, true>: public U::H {};

template<typename U>
struct H_type: public type_H_B<U, has_typedef_H<U>::value> {};

int main() {

    H_type<U0> h0;
    H_type<U1> h1;
    H_type<U2> h2;

    // Prints H1 H1 H2
    h0();
    h1();
    h2();
    return 0; 
} 

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T03:29:49.607

您实际上不需要为每个嵌套类型提供复杂的特征，这可以做得更简单一些。 [这](http://ideone.com/Gd4rQ)是一个例子：

```
// Helper to map any type to void, needed by SFINAE below
template <typename T>
struct void_type {
    typedef void type;
};

// Selects a nested typedef or a default type D (using a macro to reduce boilerplate):
#define SELECT_NESTED_TYPE( TYPE )                                       \
template <typename T, typename D, typename _ = void>                     \
struct select_##TYPE{                                                    \
    typedef D type;                                                      \
};                                                                       \
template <typename T, typename D>                                        \
struct select_##TYPE<T, D, typename void_type<typename T::TYPE>::type> { \
    typedef typename T::TYPE type;                                       \
};                                                                      

SELECT_NESTED_TYPE( int_t );
SELECT_NESTED_TYPE( float_t );
//...
#undef SELECT_NESTED_TYPE

// Use
template <typename T>
class TheTemplate {
public:
   typedef typename select_int_t<T,int>::type int_t;
   typedef typename select_float_t<T,double>::type float_t;
   //....
};

// Test:
template <typename T, typename U> struct same_type {
   static const bool value = false;
};
template <typename T> struct same_type<T,T> {
   static const bool value = true;
};
struct test1 {
};
struct test2 {
   typedef long long int_t;
   typedef float float_t;
};
int main() {
   // test1 has the default typedefs
   assert(( same_type< TheTemplate<test1>::int_t, int>::value ));
   assert(( same_type< TheTemplate<test1>::float_t, double>::value ));
   // test2 has the ones in the type
   assert(( same_type< TheTemplate<test2>::int_t, long long>::value ));
   assert(( same_type< TheTemplate<test2>::float_t, float>::value ));
} 
```

如果宏使用默认类型并在默认情况下注入它（未定义嵌套类型时），您可以选择提供稍微简单的解决方案。诚然，这需要为每个嵌套类型创建特征，但特征只是几行（并且不难定义为宏）。或者，如果只有几个潜在的 typedef，您可以不用额外的样板文件，直接在目标类型上使用 SFINAE。

* * *

完全不同的方法……如果可以的话

如果您可以修改库中使用的类型，那么您可以通过滥用继承来使用更简单（虽然不是那么*酷的解决方案）。*创建一个只包含要使用的默认类型的 typedef 的基类，并让每个用户类派生自提供默认值的类。如果用户想提供比默认更好的帮助器，他们只需要提供 typedef。如果它们不提供 typedef，则查找将在层次结构中找到更高的默认值：

```
struct default_helpers {
   typedef Helper1 helper1_t;
   typedef Helper2 helper2_t;
// ...
};
struct user_type_1 : default_helpers {
};
struct user_type_2 : default_helpers {
   typedef MyHelper helper1_t;           // I prefer this one...
};
int main() {
   assert( same_type< user_type1::helper1_t, default_helpers::helper1_t >::value );
   assert( !same_type< user_type2::helper1_t, default_helpers::helper1_t >::value );
   assert( same_type< user_type1::helper2_t, user_type2::helper2_t>::value );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:43:19.410

除了这里已经发布的好方法之外，另一种方法是使用[虚拟继承功能中很少使用的优势](http://en.wikipedia.org/wiki/Dominance_%28C%2B%2B%29)。我展示了两种可定制类型的解决方案，可以扩展为任意数量的 N（受基类编译器数量限制）：

```
#include <stdio.h>

struct A1 {};
struct A2 {};
struct B1 {};
struct B2 {};

struct DefaultManifest {
    typedef A1 A;
    typedef B1 B;
};

template<class T>
struct A_is : virtual DefaultManifest { typedef T A; };

template<class T>
struct B_is : virtual DefaultManifest { typedef T B; };

template<class T> struct Name { static char const* value; };
template<> char const* Name<A1>::value = "A1";
template<> char const* Name<A2>::value = "A2";
template<> char const* Name<B1>::value = "B1";
template<> char const* Name<B2>::value = "B2";

struct na1 : virtual DefaultManifest {};
struct na2 : virtual DefaultManifest {};

template<class T1 = na1, class T2 = na2>
struct Library {
    struct Manifest : T1, T2 {};
    typedef typename Manifest::A A;
    typedef typename Manifest::B B;

    Library() {
        printf("A is %s, B is %s\n", Name<A>::value, Name<B>::value);
    }
};

int main() {
    Library<> lib1;
    Library<A_is<A2> > lib2;
    Library<B_is<B2> > lib3;
    Library<A_is<A2>, B_is<B2> > lib4;
    Library<B_is<B2>, A_is<A2> > lib5;
} 
```

上述输出：

```
A is A1, B is B1
A is A2, B is B1
A is A1, B is B2
A is A2, B is B2
A is A2, B is B2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:01:09.720

正如大卫的[回答](https://stackoverflow.com/a/11876377/1053968)所表明的那样，宏将有助于减少样板代码。在我看来，David 的方法更胜一筹，但对于新的元程序员来说，它可能会让人望而生畏。因此，我想通过提供可能稍微更明确的潜在替代方案来帮助清理一些混乱。

* * *

当 no-case 不是模板时，`0`被视为`int`：

```
template <typename T>
class has_typedef_H {
  typedef char no[1];
  typedef char yes[2];

  template <typename C>
  static yes& test(typename C::H*);

//  template <typename>
  static no& test(...);

public:
  static const bool value = sizeof(yes) == sizeof(test(0)); 
}; 
```

在这个[例子](http://ideone.com/w0ksZ)中：

*   yes-case`C`被推导为 进行检查`int`，导致替换总是以 失败`int::H`。这发生在尝试`0`用作表示空指针的值之前，因为函数签名仍在尝试识别。
*   no-case 的可变参数为`int`. 这总是被选中，因为是的情况总是失败。

当 no-case 变成模板函数时，没有模板参数可以推导，所以 no-case 不是候选。

```
template <typename T>
class has_typedef_H {
  typedef char no[1];
  typedef char yes[2];

  template <typename C>
  static yes& test(typename C::H*);

  template <typename>
  static no& test(...);

public:
  static const bool value = sizeof(yes) == sizeof(test(0)); 
}; 
```

[如此处](http://ideone.com/9Iz9s)所示，编译失败是因为找不到匹配的函数`test(int)`。由于 no-case 不能进行推导，因此`test`调用必须明确选择要使用的特化：

```
template <typename T>
class has_typedef_H {
  typedef char no[1];
  typedef char yes[2];

  template <typename C>
  static yes& test(typename C::H*);

  template <typename>
  static no& test(...);

public:
   static const bool value = sizeof(yes) == sizeof(test<T>(0)); 
}; 
```

在这个[例子](http://ideone.com/9Fv1B)中，`0`的双重表示确实发挥了作用。

*   在是的情况下，`0`被检查为 的有效初始化值`T::H*`。
*   在没有的情况下，`0`是一个`int`.

为了消除这种双重表示，`int`在 yes-case 中添加了一个参数，并为该`C::H*`参数提供了一个默认值`NULL`.

```
template <typename T>
class has_typedef_H {
  typedef char no[1];
  typedef char yes[2];

  template <typename C>
  static yes& test(int, typename C::H* = NULL);

  template <typename>
  static no& test(...);

public:
  static const bool value = sizeof(yes) == sizeof(test<T>(1)); 
}; 
```

在此[示例](http://ideone.com/Qo5lT)中，`test<T>()`可以使用任何整数调用。

*   在是的情况下，`1`是一个`int`，并且`C::H*`明确设置为`NULL`。
*   在没有的情况下，`1`也是一个`int`.

因为`sizeof`正在评估一个表达式，而不是执行它，所以可以避免将编译时已知的值传递给`test`，如[本](http://ideone.com/dMlZX)例所示。

```
template <typename T>
class has_typedef_H {
  typedef char no[1];
  typedef char yes[2];

  template <typename C>
  static yes& test(T*, typename C::H* = NULL);

  template <typename>
  static no& test(...);

  static T* t;

public:
  static const bool value = sizeof(yes) == sizeof(test<T>(t)); 
}; 
```

* * *

最后，我发现这种情况`0`在 SFINAE 中相当普遍。话虽如此，如果有人了解使用 的方法`0`，那么稍微更明确的方法应该不难理解。

# css - 如何在已知高度的 div 中垂直居中未知高度的 div？

> ID：11875328
> 
> 赞同：0
> 
> 时间：2012-08-09T00:53:45.633
> 
> 标签：css, vertical-alignment

我想在`<div id="innner">`里面垂直居中`<div id="outer">`，当内容`<div id="innner">`是动态生成的，因此高度可变。那是，

```
<div id="outer">
    <div id="inner">
        // dynamically generated stuff
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:06:20.920

```
#outer{
    float:left; 
    height:50%; 
    margin-bottom:-120px;
}

#inner{
    clear:both; 
    height:240px; 
    position:relative;
} 
```

HTML

```
<div id="outer">
<div id="inner">
Content here
</div>
</div> 
```

# objective-c - 如何检查 NSString 格式是否包含与可变参数相同数量的说明符？

> ID：11875331
> 
> 赞同：4
> 
> 时间：2012-08-09T00:54:36.683
> 
> 标签：objective-c, nsstring, stringwithformat, variadic-functions

为了确保返回的格式化字符串`NSString initWithFormat:arguments:`符合预期，我需要确定格式说明符的数量是否与参数相同。下面是一个（略微做作和高度编辑的）示例：

```
- (void)thingsForStuff:(CustomStuff)stuff, ...
{
    NSString *format;
    switch (stuff)
    {
        case CustomStuffTwo:
            format = @"Two things: %@ and %@";
        break;

        case CustomStuffThree:
            format = @"Three things: %@, %@, and %@";
        break;

        default:
            format = @"Just one thing: %@";
        break;
    }

    va_list args;
    va_start(args, method);
    // Want to check if format has the same number of %@s as there are args, but not sure how
    NSString *formattedStuff = [[NSString alloc] initWithFormat:format arguments:args];
    va_end(args);

    NSLog(@"Things: %@", formattedStuff);
} 
```

使用此方法，`[self thingsForStuff:CustomStuffTwo, @"Hello", @"World"]`将记录

> “两件事：你好和世界”

...但`[self thingsForStuff:CustomStuffTwo, @"Hello"]`会记录

> “两件事：你好和”

......在它发生之前最好被抓住的东西。

有没有办法计算字符串中的格式说明符，最好是轻量级/便宜的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-13T08:16:41.420

好吧，我创建了自己的正则表达式，我不知道它是否会捕获所有这些，并且可能最终会发现一些误报，但似乎对我有用：

```
static NSString *const kStringFormatSpecifiers =
@"%(?:\\d+\\$)?[+-]?(?:[lh]{0,2})(?:[qLztj])?(?:[ 0]|'.{1})?\\d*(?:\\.\\d+)?[@dDiuUxXoOfeEgGcCsSpaAFn]"; 
```

您可以使用以下方法计算参数的数量：

```
NSRegularExpression *regEx = [NSRegularExpression regularExpressionWithPattern: kStringFormatSpecifiers options:0 error:nil];
NSInteger numSpecifiers = [regEx numberOfMatchesInString: yourString options:0 range:NSMakeRange(0, yourString.length)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T01:03:36.783

> 有没有办法计算字符串中的格式说明符，最好是轻量级/便宜的？

不——真的不是。至少，如果您希望它适用于所有可能的格式字符串，则不是。您将不得不复制`stringWithFormat:`. 即不要试图验证一切。

您可以计算 的数量`%`，但这不会捕获诸如`%%`或其他特殊情况之类的东西。这对于您的目的可能已经足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T03:20:20.813

由于 C 和 Objective-C 处理像您这样的可变参数函数/方法的方式，您通常无法判断用户提供了多少参数。

这里有两种方法来处理你的情况。

**首先**，寻找另一种方法来做到这一点。传递给方法的参数数量是在编译时确定的。因此，也许您应该只使用三种方法，而不是使用可变参数方法：

```
- (void)doStuff:(CustomStuff)stuff withThing:(Thing *)thing;
- (void)doStuff:(CustomStuff)stuff withThing:(Thing *)thing1 thing:(Thing *)thing2;
- (void)doStuff:(CustomStuff)stuff withThing:(Thing *)thing1 thing:(Thing *)thing2 hatWearer:(Cat *)cat; 
```

您可以根据要传递的参数数量选择正确的方法在编译时调用，从而完全消除 switch 语句。

**其次**，我看到您预定义的格式字符串仅使用该`%@`格式。这是否意味着您希望用户只将对象传递给您的方法（除了`(CustomStuff)stuff`参数）？

**如果**用户只将对象传递给您的方法，**并且**您要求这些参数不为零，**那么**您可以让编译器帮助您。更改您的方法以要求用户`nil`在参数列表的末尾传递。您可以通过声明方法（在您的 ）中告诉编译器参数列表必须以 nil 终止，`@interface`如下所示：

```
@interface MyObject : NSObject

- (void)thingsForStuff:(CustomStuff)stuff, ... NS_REQUIRES_NIL_TERMINATION

@end 
```

现在，如果用户调用您的方法时没有在参数列表末尾放置文字 nil，编译器将警告用户“在方法调度中缺少标记”。

因此，**将您的 API 更改**为需要一些非零参数后跟一个零参数，您可以更改方法来计算非零参数，如下所示：

```
- (void)thingsForStuff:(CustomStuff)stuff, ... {
    int argCount = 0;
    va_list args;
    va_start(args, stuff);
    while (va_arg(args, id)) {
        ++argCount;
    }
    va_end(args)

    int expectedArgCount;
    NSString *format;
    switch (stuff) {
        case CustomStuffTwo:
            expectedArgCount = 2;
            format = @"Two things: %@ and %@";
            break;

        case CustomStuffThree:
            expectedArgCount = 3;
            format = @"Three things: %@, %@, and %@";
            break;

        // etc.
    }

    NSAssert(argCount == expectedArgCount, @"%@ %s called with %d non-nil arguments, but I expected %d", self, (char*)_cmd, argCount, expectedArgCount);

    va_start(args, stuff);
    NSString *formattedStuff = [[NSString alloc] initWithFormat:format arguments:args];
    va_end(args);

    NSLog(@"Things: %@", formattedString);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T02:42:21.167

您可以计算格式说明符的数量，但 IIRC 您将永远无法计算传递给变量参数方法的参数*数量。*这是因为 C 将参数推送到堆栈上的方式没有指定它已经推送了多少。

大多数函数通过要求最后一个参数为 nil 或某种终止符来克服这个问题（参见 [NSArray arrayWithObjects:]）。甚至还有一个宏允许编译器检查这一点并在编译时发出警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-04T14:46:35.697

您可以`NS_FORMAT_FUNCTION`在函数原型的末尾使用，`stringWithFormat`如`NSString`.

所以你的方法的原型应该是这样的：

```
- (void)thingsForStuff:(CustomStuff)stuff, ... NS_FORMAT_FUNCTION(1,2); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-09T01:03:29.257

long specifierCount = [myFormatString componentsSeparatedByString:@"%"].count;

这会让你接近。它只是一个简单的拆分。您必须考虑转义的 % 值。

# ruby-on-rails - 关注 ruby 中的模块 - DRY

> ID：11875332
> 
> 赞同：1
> 
> 时间：2012-08-09T00:54:39.160
> 
> 标签：ruby-on-rails, ruby, module, dry

我的 Rails 项目中有一个名为“活动”的控制器，其中包含此模块“可排序”：

控制器：

```
class ActivitiesController < ApplicationController

  include Sortable
  ... 
```

模块（工作）：

```
module Sortable
  def save_positions
    @ids = params[:ids]
    # ~ Converting to array separating by ',' 
    @ids = @ids.split(",")

    count = 0
    # ~ Saving new positions
    for i in @ids
      Activity.update(i, {:position => count})
      count += 1
    end

    render :json => :success
  end
end 
```

但是当我重构代码时，我可以与其他控制器一起使用：

已编辑

```
require 'active_support/concern'

module Sortable
  extend ActiveSupport::Concern

  module InstanceMethods
    def save_positions
      @ids = params[:ids]
      # ~ Converting to array separating by ',' 
      @ids = @ids.split(",")

      count = 0
      # ~ Saving new positions
      for i in @ids
        update(i, {:position => count})
        count += 1
      end

      render :json => :success
    end
  end
end 
```

我做错了什么？

新错误消息：

```
ArgumentError (wrong number of arguments (2 for 0)): app/controllers/activities_controller.rb:61:in 
```

我从以下位置删除了“活动”：

```
Activity.update(i, {:position => count}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:42:26.787

控制器动作被实现为控制器上的实例方法，而不是类方法。从我所见，除了您定义`save_positions`为类方法而不是实例方法这一事实之外，您已将所有内容设置得非常好。

```
require 'active_support/concern'

module Sortable
  extend ActiveSupport::Concern

  module InstanceMethods ## <== just changed this
    def save_positions
      ...
    end
  end
end 
```

**更新以回答问题的下一部分：**

您正在尝试从共享控制器操作调用模型上的方法。您无法提前知道该模型是什么。如果你*真的*想让你的代码在控制器而不是模型中共享，我们可以在运行时找出模型并让事情正常工作

共同`save_positions`行动：

```
def save_positions
  @ids = params[:ids]
  # ~ Converting to array separating by ',' 
  @ids = @ids.split(",")

  count = 0
  # ~ Saving new positions
  for i in @ids
    AR_CLASS.update(i, {:position => count})
    count += 1
  end

  render :json => :success
end 
```

一些随机控制器：

```
class ActivitiesController < ApplicationController
  include Sortable
  AR_CLASS = Activity
  # ....
end

class FoosController < ApplicationController
  include Sortable
  AR_CLASS = Foo
  # ....
end 
```

然后，您的`save_postition`操作将`update`根据运行的控制器调用正确的模型。

# android - 警报对话框内的 EditText

> ID：11875333
> 
> 赞同：0
> 
> 时间：2012-08-09T00:54:45.387
> 
> 标签：android, textview, android-edittext, android-alertdialog

我想要做的是：当有人单击 TextView 时，它会打开一个带有 EditText 的 AlertDialog，该人在 EditText 中写一些东西，单击“Ok”，然后将 TextView 设置为该人在 EditText 上写的内容。

但我有两个问题。

第一：它不工作。当我单击“确定”时，我的应用程序崩溃了，我不知道自己做错了什么。

第二：我也有多个 TextView，我不知道如何设置特定 textview 的文本，而不必为每个 textview 创建一个新的 alertdialog。如果该人单击了 TextView A 或 B，我如何在对话框中识别？还是我应该创建另一个 AlertDialog？

我的代码：

```
public class Mec extends Activity implements OnClickListener {  
ImageView iv;

Button save;

TextView tSup, tInf;

EditText txt = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.loud);
    bts();
    Bundle extras = getIntent().getExtras();
    String vds = extras.getString("omec");
    if (vds.equals("Hello")) {
        iv.setImageResource(R.drawable.world);
    }
    else {
        return;
    }
}   
private void bts() {
    iv = (ImageView) findViewById(R.id.ivID);
    save = (Button) findViewById(R.id.btSave);
    tSup = (TextView) findViewById(R.id.txtSuperior);
    tInf = (TextView) findViewById(R.id.txtInferior);
    txt = (EditText) findViewById(R.id.et1);
}
private void poptxt() {
    AlertDialog InserirTXT = new AlertDialog.Builder(Mec.this).create();
    LayoutInflater infle = getLayoutInflater();
    View txtlayout = infle.inflate(R.layout.poptxt, null);
    InserirTXT.setView(txtlayout);
    InserirTXT.setButton("OK", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            String texto = (String) txt.getText().toString();
            tSup.setText(texto);
        }
    });
    InserirTXT.setCancelable(true);
    InserirTXT.setCanceledOnTouchOutside(true);
    InserirTXT.show();
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.btSave:
        //After
        break;

    case R.id.txtSuperior:
        poptxt();
        break;

    case R.id.txtInferior:
        poptxt();
        break;
    }
}
} 
```

非常感谢您的帮助！

编辑：布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFFFFF"
android:orientation="vertical"
android:weightSum="100" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_weight="73.68"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/ivID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:src="@drawable/badluck" />

    <TextView
        android:id="@+id/txtInferior"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/ivID"
        android:layout_alignParentLeft="true"
        android:clickable="true"
        android:gravity="center"
        android:onClick="onClick"
        android:text="Bottom text"
        android:textColor="#FFFFFF"
        android:textSize="35dp"
        style="@style/estilotxt" />

    <TextView
        android:id="@+id/txtSuperior"
        style="@style/estilotxt"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/ivID"
        android:clickable="true"
        android:editable="true"
        android:gravity="center"
        android:onClick="onClick"
        android:text="Top text"
        android:textColor="#FFFFFF"
        android:textSize="35dp" />

</RelativeLayout>

<Button
    android:id="@+id/btSave"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="20"
    android:text="Save" />

</LinearLayout> 
```

日志猫：

```
08-08 22:23:55.101: W/dalvikvm(322): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-08 22:23:55.121: E/AndroidRuntime(322): FATAL EXCEPTION: main
08-08 22:23:55.121: E/AndroidRuntime(322): java.lang.NullPointerException
08-08 22:23:55.121: E/AndroidRuntime(322):  at vds.cmc.Mec$1.onClick(Mec.java:89)
08-08 22:23:55.121: E/AndroidRuntime(322):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
08-08 22:23:55.121: E/AndroidRuntime(322):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 22:23:55.121: E/AndroidRuntime(322):  at android.os.Looper.loop(Looper.java:123)
08-08 22:23:55.121: E/AndroidRuntime(322):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-08 22:23:55.121: E/AndroidRuntime(322):  at java.lang.reflect.Method.invokeNative(Native Method)
08-08 22:23:55.121: E/AndroidRuntime(322):  at java.lang.reflect.Method.invoke(Method.java:521)
08-08 22:23:55.121: E/AndroidRuntime(322):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-08 22:23:55.121: E/AndroidRuntime(322):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-08 22:23:55.121: E/AndroidRuntime(322):  at dalvik.system.NativeStart.main(Native Method)
08-08 22:23:56.950: I/Process(322): Sending signal. PID: 322 SIG: 9 
```

编辑：谢谢你们。

我尝试在 AlertDialog 中启动 txt，但没有任何效果，所以我决定删除这部分并使用我找到的教程从头开始重写它。现在它正在工作，但我仍然不知道我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:03:45.013

请执行下列操作

创建一个xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/layout_root"
          android:orientation="horizontal"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:padding="10dp"
          >
<ImageView android:id="@+id/image"
           android:layout_width="wrap_content"
           android:layout_height="fill_parent"
           android:layout_marginRight="10dp"
           />
<TextView android:id="@+id/text"
          android:layout_width="wrap_content"
          android:layout_height="fill_parent"
          android:textColor="#FFF"
          />
 </LinearLayout> 
```

然后创建一个对话框并将布局设置为其内容视图

```
Context mContext = getApplicationContext();
Dialog dialog = new Dialog(mContext);

dialog.setContentView(R.layout.custom_dialog);
dialog.setTitle("Custom Dialog");

TextView text = (TextView) dialog.findViewById(R.id.text);
text.setText("Hello, this is a custom dialog!");
ImageView image = (ImageView) dialog.findViewById(R.id.image);
image.setImageResource(R.drawable.android); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:25:31.920

```
public class Mec extends Activity implements OnClickListener {

  AlertDialog.Builder builder;
  LinearLayout lila;
  EditText et;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
      // TODO Auto-generated method stub
      super.onCreate(savedInstanceState);
      setContentView(R.layout.loud);

      builder = new AlertDialog.Builder(this);
      lila = new LinearLayout(this);
      et = new EditText(this);

      lila.addView(et);

      builder.setView(lila);
      builder.show();
  } 

} 
```

这应该会给你一个很好的警报对话框，里面有一个 EditText！:) 现在，如果您将 builder.show() 放在另一个按钮的 onClickListener 中，则警报对话框只会在单击该按钮时显示。我希望这就是你要找的。

编辑：要设置文本视图，您只需说类似 textfield.setText(et.getText()); -- 您可能必须将其转换为字符串，但这是基本思想......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:41:48.310

让你的代码像这样

```
private void poptxt() {
AlertDialog InserirTXT = new AlertDialog.Builder(Mec.this).create();
LayoutInflater infle = getLayoutInflater();
View txtlayout = infle.inflate(R.layout.poptxt, null);
InserirTXT.setView(txtlayout);
tSup = (TextView) InserirTXT.findViewById(R.id.txtSuperior); //THE PROBLEM
txt = (EditText) InserirTXT.findViewById(R.id.et1);
InserirTXT.setButton("OK", new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        String texto = (String) txt.getText().toString();
        tSup.setText(texto);
    }
});
InserirTXT.setCancelable(true);
InserirTXT.setCanceledOnTouchOutside(true);
InserirTXT.show();
} 
```

您正在使用您设置布局`tSup and txt`的上下文进行初始化，但没有. 这两个视图在您的布局中。我对么？而你正在膨胀。 所以用对话框视图而不是视图来初始化它们。`Activity``loud``R.id.txtSuperior and R.id.et1``poptxt``poptxt``poptxt()``Activity's`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T01:04:55.147

您的布局文件和 LogCat 输出在这里会有所帮助，但即使没有它，我也会看到一个潜在的问题：

```
String texto = (String) txt.getText().toString();
tSup.setText(texto); 
```

鉴于您的描述，我相信这`txt`是您的编辑字段`AlertDialog`，因此它是在创建`bts()`之前调用的方法中初始化的`AlertDialog`，它将是`null`。将其初始化移至`AlertDialog`创建之后。

# mdx - 如何创建一个计算度量，它只是一个维度中的成员计数

> ID：11875334
> 
> 赞同：0
> 
> 时间：2012-08-09T00:54:48.350
> 
> 标签：mdx

如何在计算度量中显示来自维度的记录（帐户）计数。例如，以下表达式是列出所有帐户的 MDX。

```
 [Customer Credit].[Account Name].[Account Name].members 
```

是否可以创建一个包含所有帐户的 COUNT 的度量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:23:18.917

使用 MDX[计数](http://www.iccube.com/support/documentation/mdx/Count.html)功能：

```
with member [Measures].[My Count] as 
      [Customer Credit].[Account Name].[Account Name].members.count
select [Measures].[My Count] on 0
from [your-cube] 
```

# boost - boost::timer::cpu_timer 在 mingw64 下显示没有经过的时间

> ID：11875336
> 
> 赞同：0
> 
> 时间：2012-08-09T00:55:04.807
> 
> 标签：boost, mingw, cpu-usage

我在自己的代码中注意到了这一点，并决定使用 Boost.timer 附带的示例代码来验证它。也许它不适用于 tdm64 编译器？

结果如下：

```
% g++ --version
g++.exe (tdm64-1) 4.6.1
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

% 
% g++ -Wall -ggdb3 -o auto_cpu_timer_example boost_1_49_0/libs/timer/example/auto_cpu_timer_example.cpp -lboost_timer -lboost_chrono -lboost_system
% 
% g++ -Wall -ggdb3 -o timex boost_1_49_0/libs/timer/example/timex.cpp  -lboost_timer -lboost_chrono -lboost_system
%
% auto_cpu_timer_example.exe 
 0.000000s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (0.0%)
%
%
% ./timex -v auto_cpu_timer_example.exe 
 0.000000s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (0.0%)
command: "auto_cpu_timer_example.exe"
 0.000000s elapsed wall-clock time
% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:01:44.463

示例代码已损坏：

```
#include <boost/timer/timer.hpp>
#include <cmath>

int main()
{
  boost::timer::auto_cpu_timer t;

  for (long i = 0; i < 100000000; ++i)
    std::sqrt(123.456L); // burn some time

  return 0;
} 
```

该`std::sqrt`函数是一个纯函数。也就是说，除了仅根据其参数返回值外，它没有其他影响。如果未使用该值，则可以丢弃函数调用。由于未使用返回值，因此可以跳过该函数。这导致代码根本不使用任何时间。

您可以通过以下方式修复它：

```
 long t = 0;
  for (long i = 0; i < 100000000; ++i)
    t += std::sqrt(123.456L + i); // burn some time
  std::cout << "t = " << t << std::endl; 
```

现在，使用返回值，参数每次都不一样。这意味着该函数*将*被重复调用，给你一些时间。

# ruby-on-rails - 将 Ruby on Rails 配置为在 64 位 Windows 上的 Apache 下运行

> ID：11875338
> 
> 赞同：0
> 
> 时间：2012-08-09T00:55:13.717
> 
> 标签：ruby-on-rails, apache, windows-7, 64-bit

我继承了在 Ruby 1.8.7 和 Rails 2.3.2 上运行的 Ruby on Rails 站点的维护和开发。虽然我们尝试尽可能多地使用Passenger 部署到Linux 服务器，但我的老板告诉我，有时我们必须能够为我们的客户部署到Windows。

我已经很好地安装了我的 Rails 应用程序，当我使用 Webrick 服务器进行测试时，它运行良好。我还安装了 Apache 2.2，它完美地提供了通用 HTML 页面。但是，当我尝试在 Apache 下运行我的 Rails 应用程序时，出现 503 Service Temporarily Unavailable 错误

Apache 日志中没有列出任何错误，但是当我检查 RoR 日志时，它确实显示

```
127.0.0.1 - - [09/Aug/2012:10:31:02 +1000] "GET / HTTP/1.1" 503 323
127.0.0.1 - - [09/Aug/2012:10:31:02 +1000] "GET /favicon.ico HTTP/1.1" 503 323 
```

和

```
[Thu Aug 09 10:31:06 2012] [error] proxy: BALANCER: (balancer://mmapscluster). All workers are in error state
[Thu Aug 09 10:31:07 2012] [error] proxy: BALANCER: (balancer://mmapscluster). All workers are in error state 
```

您可能已经猜到，出于性能原因，我们将 Mongrel 作为代理服务器运行。

当我从 Apache 配置中删除所有代理时（顺便说一下，重新启动 Apache 对代理配置来说是不够的 - 我必须重新启动整个机器），我得到了一个看似无穷无尽的以下 Apache 错误列表，

```
[notice] Parent: Created child process 1944
[notice] Child 1944: Child process is running
[notice] Parent: child process exited with status 255 -- Restarting.
[notice] Apache/2.2.15 (Win32) configured -- resuming normal operations 
```

我对此进行了反复检查，并根据我们拥有的工作安装检查了我的配置，但我看不出设置中有任何差异。唯一真正的区别是正常工作的机器运行在 32 位机器上，而故障机器运行在 64 位机器上。

这可能是问题吗？有没有其他人在 64 位机器上运行 Apache 时遇到过类似的问题？

# android - 在 img 视图周围环绕文本视图

> ID：11875339
> 
> 赞同：3
> 
> 时间：2012-08-09T00:55:22.233
> 
> 标签：android, android-layout, android-imageview, textview

晚上好，

我正在尝试将我的文本包装在一个图像视图周围，就像问题在这里提出的那样：

[Textview环绕视图](https://stackoverflow.com/questions/3626750/textview-wrap-around-view)

在景观中。

但我不希望在 HTML / CSS 中这样做。另外，这个问题是 2 岁。我希望有人能解决这个问题。

此外，我希望将我的纵向视图与文本视图下的 img 视图保持一致，即不换行。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:27:50.140

我可以想到一个解决方法，从以前的`TextView`格式问题中考虑，最好的方法是拥有一个，例如，`RelativeLayout`在其中放置 3 个单独的视图。它将代表`TextView`图像`ImageView`旁边的那个，文本旁边的本身，然后是`TextView`第一个文本下的最后一个，但带有`layout_width="match_parent"`. 没有其他方法可以用`TextView`or来做到这一点`ImageView`。

**编辑：**

如果您非常想使用 1 TextView，我相信您可以做的唯一其他解决方法，我建议您使用`SpannableStringBuilder`with `SpannableString`。出于特定原因，我最初并没有给你这个选项。如果您返回您在问题上发布的链接，其中一个答案说他们找到了答案。我相信那个人与一个好的资源相关联，但他们对你的需求是错误的。使用时`SpannableStringBuilder`，您实际上是在创建一个字符串，该字符串可以将单个字符串的多个不同版本合并为一个，例如单个字符串上的 3 种不同颜色，或具有 3 种不同大小的字符串，全部合为一个`TextView`。喜欢你需要的。

现在链接谈到放置图像并让文本很好地环绕它，但它不是那么简单，而且那个例子不是你需要的。你可以做的`TextView`就是在你知道图像将在右边的前几行之后添加换行符，然后不要在图像之后这样做。但问题是它仍然需要进入`RelativeLayout`. 但是，您只需要一个而不是两个 TextView。只需将 TextView 放在父对象的左上角，将 ImageView 放在父对象的右上角。这模拟了一个`floating`元素。但我认为这样做比它的价值更麻烦。这确实是因为您必须进行计算才能确定在哪里放置换行符等。最好使用两个`TextView`s 在其中使它看起来像你需要的。所以在我看来，不要使用`SpannableStringBuilder`，但如果你不介意试图找出所有的间距，那确实可以为你提供一个 TextView 所需的东西。

# css - 页面在 iPad 视图中看起来不同 - CSS 问题

> ID：11875341
> 
> 赞同：0
> 
> 时间：2012-08-09T00:56:11.533
> 
> 标签：css, ipad

我在 iPad 上打开[此页面](http://pwtest.iurecsports.org)时遇到问题。深红色顶部标识标题向左移动，然后在右侧您可以看到一个空白区域。包括 Safari 在内的所有其他主要浏览器都会按原样显示页面，但 iPad 除外。[这是iPad 视图](http://imageshack.us/photo/my-images/401/photouu.png/)的屏幕截图。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:12:10.547

首先，看起来您将左上角的大学徽标设置为背景图像和`<a>`. 删除常规图像修复了在 iPad 屏幕截图和我的桌面浏览器中看到的问题，其中徽标在左侧被切断并且“ity”在“大学”中重复。

我面前没有 ipad，但也有可能用正确的空间解决问题。您可能需要考虑在页眉的表单中添加一个，这样“开始”按钮就不会在分辨率`margin-right`下正好靠在窗口的边缘。`1024px`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:11:17.807

#signature div 中的内容比#signature div 大，因此背景不会拉伸以适应内容（您可以通过缩小窗口大小并向左或向右滚动来获得相同的反应）。

修复：

*   `left: -5px;`从#signature a.iu 中删除
*   添加`background: #7D110C`到#signature
*   `right: 0`将#signature 表单更改为`right: 5px`.

那应该把事情理顺。

**编辑**

这是您更新后的样式的外观。

```
#identity #signature {
    height: 44px;
    margin: 0 auto;
    position: relative;
    text-align: left;
    width: 990px;
    background: #7D110C;
}

#identity #signature a.iu {
    background: url(pw_files/img/iu_crimson.gif) no-repeat 20px 0;
    display: block;
    height: 44px;
    position: relative;
    top: 0;
    width: 250px;
}

#identity form {
    height: 44px;
    position: absolute;
    right: 5px;
    top: 0;
} 
```

我从[screen.css中提取了这些样式](http://pwtest.iurecsports.org/pw_files/css/screen.css)

# shell - 通过 CLI 将密钥发送到 OpenSSL

> ID：11875345
> 
> 赞同：0
> 
> 时间：2012-08-09T00:56:55.323
> 
> 标签：shell, openssl, rsa, command-line-interface

如何在`openssl rsautl`不先将其放入文件的情况下发送 RSA 密钥。

我想做的事：

```
openssl rsautl -decrypt -inkey "MII3f....324==" 
```

代替

```
openssl rsautl -decrypt -inkey privateKey.pem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:20:25.563

好像是不可能的。文档没有显示任何允许这样做的参数。

我想我必须编写一个 C++ 包装器。

# text - 在 QTP 中处理文本文件

> ID：11875346
> 
> 赞同：0
> 
> 时间：2012-08-09T00:57:03.230
> 
> 标签：text, vbscript, text-files, qtp

我需要从文本文件中读取数据并将读取的数据保存到 Excel 中。

文本文件包含 111111111122222222223333333333Taaaaaaaassssssss。所以在这里我已经阅读了前 10 个字符并将它们保存到 Excel 中的一列中，以此类推，用于文本文件中的整个 1 行。

尝试在 QTP 中执行此操作，请求您对此提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:10:34.573

您可以使用的策略：

1.  通过自动化将 COM 实例创建到 Excel 文件。用于`CreateObject("Excel.Application")`在 QTP 中实现。将第一个单元格设为 ActiveCell

2.  打开文本文件并执行 a`.readall`以将结果存储在字符串中

3.  对所有行执行`for each line in split(readAllString, vbNewLine)`to 循环

4.  在 For 循环的主体中：

    *   `line`循环like:的长度`for characterPosition = 1 to len(line) step 10`，并在此循环内：
        *   做 a`mid(line, characterPosition, 10)`得到一组 10 个字符
        *   将结果写入 ActiveCell 并将 ActiveCell 移动一列
    *   将 ActiveCell 移动到第一列和下一行
5.  清理，关闭excel文件等。

第 1 步和第 2 步可以很容易地在 Internet 上查找，其他步骤是非常简单的 VBScript 功能。试一试，当您遇到问题时，将它们添加到您的帖子中，我们会看看在哪里可以解决它。

# c++ - C ++输入数据到用户定义类型的向量？

> ID：11875348
> 
> 赞同：1
> 
> 时间：2012-08-09T00:57:10.093
> 
> 标签：c++, vector, push-back

我必须创建一个银行系统程序，它可以添加、删除、查找、保存到文件等。为此，我需要使用与下面的私有数据成员匹配的 Vector，建议使用 push_back() 函数添加新的帐户。

我能想出从提示中获取数据到向量（没有编译错误）的唯一方法是为 Account 创建一个构造函数，其中包含 int accountID、int passcode、string firstname、string lastname、double balance。然后，此构造函数使用 set() 函数使用列出的相同名称初始化帐户中的所有私有数据成员。

问题是当我使用 accounts_.size() 函数查看向量是否发生变化时，它总是输出 1。

如何让向量将每个附加值输入到向量中？

更不用说在尝试任何矢量函数时我总是会遇到编译错误......

在不写出实际代码的情况下，你们都能为我指明正确的方向吗？谢谢！

----edit - 在下面添加了 main.cpp 和一个发布编译错误的 cout 循环示例

我遇到的问题是无论我输入数据多少次，大小都保持不变..所以当它编译时，它似乎没有将数据输入到向量中。

此外，当我尝试查看向量中的内容时，我会收到编译错误：

```
bankingsys.cpp(36): warning C4018: '<' : signed/unsigned mismatch
bankingsys.cpp(37): error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'Account' (or there is no acceptable conversion)
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(679): could be 'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const char *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(726): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,char)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(764): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const char *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(811): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,char)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(937): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const signed char *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(944): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,signed char)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(951): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const unsigned char *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(958): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,unsigned char)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(968): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>,Account>(std::basic_ostream<_Elem,_Traits> &&,_Ty)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ty=Account
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(1085): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const std::error_code &)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(186): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::basic_ostream<_Elem,_Traits> &(__cdecl *)(std::basic_ostream<_Elem,_Traits> &))'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(192): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::basic_ios<_Elem,_Traits> &(__cdecl *)(std::basic_ios<_Elem,_Traits> &))'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(199): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::ios_base &(__cdecl *)(std::ios_base &))'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(206): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::_Bool)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(226): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(short)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(260): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned short)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(280): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(int)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(305): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned int)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(325): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(long)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(345): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned long)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(366): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(__int64)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(386): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned __int64)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(407): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(float)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(427): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(double)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(447): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(long double)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(467): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(const void *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(487): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::basic_streambuf<_Elem,_Traits> *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          while trying to match the argument list '(std::ostream, Account)'
1>
1>Build FAILED. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:37:28.597

问题出在你的案例陈述中......

```
 switch ( inputcode )
  {     
  case 1:// Add Account
      {
      BankingSystem add;
      add.accAdd();
      }
      break;

  case 2:// Delete Account
      {
      BankingSystem del;
      del.accDelete();
      }
      break;

  case 3:// Account Inquiry
      {
      BankingSystem inquire;
      inquire.accInquiry();
      }
      break;        

  case 4: // Save Accounts to File
      {
      BankingSystem save;
      save.accSave();
      }
      break;

  case 5: // Load Accounts from File
      {
      BankingSystem load;
      load.accLoad();
      }
      break; 
```

您`BankingSystem`在每个 case 语句中创建和使用类的新实例，而不是使用您在`main()`函数开头创建的实例。这就是为什么你总是得到 1`size()`的原因。你想用你的`myBankingSystem`指针来代替......

```
 switch ( inputcode )
  {     
  case 1:// Add Account
      myBankingSystem->accAdd();
      break;

  case 2:// Delete Account
      myBankingSystem->accDelete();
      break;

  case 3:// Account Inquiry
      myBankingSystem->accInquiry();
      break;        

  case 4: // Save Accounts to File
      myBankingSystem->accSave();
      break;

  case 5: // Load Accounts from File
      myBankingSystem->accLoad();
      break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:40:00.297

如果您的代码无法编译，我不知道您如何在运行时遇到问题:) 从您发布的内容来看，该行

```
cout << accounts_[i]; 
```

不起作用，因为操作员 << 不知道由谁来处理 Account 类型。

当您编写 cout << something 时，编译器实际上会调用 ostream& operator<<(something) 。'something' 必须是基本类型（int、float 等...）或者您已为其定义了 ostream& operator<< 重载的类型。

所以，不用过多介绍细节，这里有 2 个简单的解决方案： - 编写一个自由函数 ostream& operator<< (ostream& out,const Account& val); 它负责逐个字段地输出帐户。

```
ostream& operator<< (ostream& out,const Account& val);
{
 out << val.getID() << endl;
 out << val.getPass() << endl;
 out << val.getLast() << endl;
 out << val.getFirst() << endl;
 out << val.getBalance() << endl;
} 
```

- 编写一个方法 std::string Account::toString() 将帐户序列化为字符串，然后调用

```
out << accounts_[i].toString(); 
```

这将解决您的编译错误，并允许您显示 Account 实例的内容。由于向量计数始终为 1，请参阅下面 Will 的回答。

高温高压

# c++ - 压扁树

> ID：11875350
> 
> 赞同：0
> 
> 时间：2012-08-09T00:57:54.180
> 
> 标签：c++

展平数据：当给定节点的二叉树时，如何编写返回节点链表的递归函数？（树可以修改）

在这个问题中，扁平化树是什么意思？我们是否需要将二叉树的所有元素及其左右指针保存在一个列表中，或者还有另一个我没有得到的问题？

其次（树可以修改）他们是否意味着乐趣应该能够处理树的任何修改以及构建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T01:09:04.497

假设你有一个像这样的二叉树：

```
 a
   / \
  b   c
 / \   \
0   0   d
       / \
      0   0 
```

其中`a`,`b`等是节点并且`0`为零。树有几种可能的递归[遍历](http://en.wikipedia.org/wiki/Tree_traversal)：

*   预订，在孩子之前拜访父母：`a b c d`

*   按顺序，在孩子之间拜访父母：`b a c d`

*   订购后，在孩子之后拜访父母：`b d c a`

树的“扁平化”仅仅是遍历产生的列表；您的数据结构不再是嵌套的，而是扁平的。要展平一棵树，请从一个空的链表开始。然后按照您选择的顺序遍历树，将每个访问过的节点附加到链表中。我认为“可以修改树”意味着您的函数可以在构建列表时更改树，如果您认为有必要这样做的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T01:08:02.823

扁平化只是意味着他们希望节点按线性顺序排列。树有几种常见的顺序：前序、中序或后序，其中父节点分别出现在其子节点之前、中间或之后。

# drupal - IE7 中的 Nivo 滑块

> ID：11875356
> 
> 赞同：0
> 
> 时间：2012-08-09T00:59:01.250
> 
> 标签：drupal, nivo-slider

我已经在我的 drupal 站点中实现了“Nivo Slider”。它在所有浏览器中都运行良好。但在 IE 的情况下，它会产生问题。当我在加载页面时刷新页面时，它会在闪烁后上升到网站的顶部，然后回到原来的位置。这是我的网站[http://demo3.vinspro.org/](http://demo3.vinspro.org/)的链接。在 IE 中单击我的投资组合。然后你会看到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:12:19.023

这在最新版本的滑块中已修复。在这里下载：

[http://nivo.dev7studios.com/pricing/](http://nivo.dev7studios.com/pricing/)

# php - 如何检查symfony2的树枝模板中是否存在某些变量

> ID：11875361
> 
> 赞同：0
> 
> 时间：2012-08-09T01:00:01.417
> 
> 标签：php, symfony, twig

在我需要使用此语句的每个模板中

```
{{ form_stylesheet(form) }}
{{ form_javascript(form) }} 
```

如果页面没有任何表单变量，即其正常页面，则模板会出错。

有什么方法可以检查是否`form`存在然后加载那些不存在的

```
if (form.present) then
{{ form_stylesheet(form) }}
    {{ form_javascript(form) }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:25:41.947

```
{% if form is defined  %}
    {{ form_stylesheet(form) }}
    {{ form_javascript(form) }}
{% endif %} 
```

[http://twig.sensiolabs.org/doc/tags/if.html](http://twig.sensiolabs.org/doc/tags/if.html)

# ipad - iPad 上的 Safari 与所有其他桌面浏览器相比

> ID：11875362
> 
> 赞同：0
> 
> 时间：2012-08-09T01:00:22.513
> 
> 标签：ipad, css, cross-browser

iPad 上的 Safari 显示的 div 元素的边框高度高于桌面浏览器，包括桌面 Safari、Chrome、Firefox。是否有任何理由说明 box-sizing 在移动 Apple 设备上的行为不同。在此处查看演示... [http://jsfiddle.net/froze1906/C43Gn/2/](http://jsfiddle.net/froze1906/C43Gn/2/)

# python - 这个“[.. for .. in ..]”在 Python 中是如何工作的？

> ID：11875364
> 
> 赞同：3
> 
> 时间：2012-08-09T01:00:41.033
> 
> 标签：python, list

请告诉我，它是如何工作的？为什么每次迭代结果都写入数组？

```
list_of_strings = [a.rstrip('\n') for a in list_of_strings] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T01:05:37.803

此[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
list_of_strings = [a.rstrip('\n') for a in list_of_strings] 
```

相当于这个更通用的代码：

```
temp_list=[]
for a in list_of_strings:
   temp_list.append(a.rstrip('\n'))

list_of_strings=temp_list 
```

在大多数情况下，列表推导式更快且更易于阅读。如果您想编写重要的 Python，请学习并使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T01:02:39.777

这需要一个字符串列表（存储在变量中`list_of_strings`），遍历它，每次都将每个字符串临时分配给变量`a`，并`\n`从每个字符串中删除字符。结果是分配回同一变量的字符串*列表。*

这是使用[List Comprehension](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。通常，大多数[涉及 append() 的 for 循环和列表操作](http://docs.python.org/tutorial/datastructures.html)都可以转换为等效的列表推导。这是一个简单的例子来证明这一点：

```
 new_list = []
   for i in range(10):
       new_list.append(i**2) 
```

可以简单地重写为

```
 new_list = [i**2 for i in range(10)] 
```

`for`您可能会发现获取列表理解并用-loop重写它以测试您的理解是有启发性的（两者都应该产生相同的结果）。

在大多数情况下，列表推导比等效的`for`-loop 更快，并且显然是一种更紧凑的算法表达方式。你也可以有嵌套的列表理解（就像你可以有嵌套`for`的循环一样），但是它们很快就会变得难以理解:)

此外，虽然上面的代码中没有显示，但您可以在列表理解中过滤值，即根据它们是否满足某些条件，将它们包含（或不包含）在结果列表中。

顺便说一句，Python 也提供了类似的集合推导和生成器表达式。所有这些都值得学习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T01:02:30.000

请阅读[An Introduction to List Comprehensions in Python](http://carlgroner.me/Python/2011/11/09/An-Introduction-to-List-Comprehensions-in-Python.html)以更好地理解 Python 的列表理解语法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T01:06:24.557

每个迭代结果都不会写入列表，而是在右侧创建一个全新的列表，然后将其分配给 = 符号左侧的变量 list_of_strings。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T01:02:43.543

这是 Python 的一个特性，称为列表推导。基本上，您在括号中写的内容是“执行此循环然后创建结果列表”的简写。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T02:18:23.977

**列表推导具有以下通用形式**

```
result = [ x for x in list] 
```

此列表推导的等效程序代码是：

```
for x in list:
    x 
```

**创建有用的列表推导的下一步是调用或应用函数到括号后的第一个 x。**

```
result = [function(x) for x in list]
result = [x.function(arg) for x in list]

list_of_strings = [a.rstrip('\n') for a in list_of_strings]

result = [x*2 for x in list_of_numbers] 
```

此列表推导的等效程序代码是：

```
for x in list:
    function(x) 
```

或者

```
for x in list:
    x.function() 
```

**要为您的列表推导添加更多功能，您可以添加如下条件：**

```
result = [function(x) for x in list if x == True]

list_of_strings = [a.rstrip('\n') for a in list_of_strings if '\n' in a]

result = [x*2 for x in [1,2,3,4,5,6,7] if x > 3] 
```

List Comprehensions 可以像函数一样制作出色的过滤器，并且通常与硬 c 编码的原语（如 cpython 中的 map 和 filter）一样快。

# android - 我应该使用什么权限来接收 android 通知？

> ID：11875371
> 
> 赞同：3
> 
> 时间：2012-08-09T01:01:41.407
> 
> 标签：android, android-notifications, android-permissions

我希望在使用单击通知时收到通知。我现在正在做的事情是

```
notification.contentIntent = PendingIntent.getBroadcast(context, 0,intent, 0);

<receiver
    android:name=".notificationsClickReceiver">
    <intent-filter >
        <action android:name="com.example.android.notification.CLICK" />
    </intent-filter>
</receiver> 
```

一切正常。但是，我收到一条警告“导出的接收器不需要许可”，这意味着每个应用程序都可以将广播发送到我的应用程序。我应该添加什么权限才能只允许系统通知托盘发送广播？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T01:24:55.620

只需添加[`android:exported="false"`](http://developer.android.com/guide/topics/manifest/receiver-element.html)到`<receiver ...>`标签。这可以防止您的接收器被其他应用程序访问。

# sql - “累计值”的 TSQL 查询

> ID：11875377
> 
> 赞同：0
> 
> 时间：2012-08-09T01:02:03.123
> 
> 标签：sql, tsql, sql-server-2008-r2, cumulative-sum

> **可能重复：**
> [在 SqlServer 中计算运行总计](https://stackoverflow.com/questions/860966/calculate-a-running-total-in-sqlserver)

我是 SQL 新手。这个问题似乎很基本，但我找不到答案，也许我没有找到正确的关键字。

在 SQL Server 2008 R2 中，我有一个这样的表：

```
Date      Value
---------------
2012-1-1    100
2012-1-2     50
2012-1-4    200 
```

我想创建一个具有累积值的视图，如下所示：

```
Date      Total
---------------
2012-1-1    100
2012-1-2    150
2012-1-4    350 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:24:39.383

这应该得到运行总数。试试这个：

```
SELECT dateHere,
       total,
       total + COALESCE(
                         (
                            SELECT SUM(total)
                            FROM myTable b
                            WHERE b.dateHere < a.dateHere
                          ), 0) AS RunningTotal
FROM     myTable a
ORDER BY dateHere 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/20257/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:14:31.743

这是使用相关子查询的一种方法：

```
select t.date, t.value,
       (select sum(t2.value)
        from t t2
        where t2.date <= t.date
       ) as cumvalue
from t 
```

# .htaccess - 如何屏蔽 url 并维护参数

> ID：11875378
> 
> 赞同：0
> 
> 时间：2012-08-09T01:02:11.330
> 
> 标签：.htaccess, dns, white-labelling

抱歉，如果之前回答过这个问题，但是在多次尝试找到答案后，没有任何与我的查询相似的返回 - 可能我使用了错误的术语。

我正在创建一个生活在 www.abc.com/1/232/554 的服务。我想让用户能够使用指向我的服务器的 C 名称 A 记录来设置域/子域，这样他们就可以有效地为我的服务贴上白标签。他们的 www.123.com/1/232/554 域将解析为 www.abc.com/1/232/554，但仍然在浏览器地址栏中保留 123.com 域。

这仅仅是我需要实施的 .htaccess 重写规则吗？

非常感谢您的回复

# javascript - 简单的Jquery变量问题

> ID：11875379
> 
> 赞同：1
> 
> 时间：2012-08-09T01:02:24.177
> 
> 标签：javascript, jquery

我正在尝试`div`使用`jquery`变量将我的图像连接到其中。不知道该怎么做。感谢您的帮助。

```
var pictureDiv = $('#pictureDiv');

pictureDiv.css('height','500');

//I want to change image within my pictureDiv and 
//want to use my pictureDiv variable..
pictureDiv.img??

//I also want to change p tag within my pictureDiv and
// want to use my pictureDiv variable..
pictureDiv.p?? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:08:25.373

如果图片 div 中有`<p>`标签，它是实际的图像还是包含`<p>`标签和`<img>`标签的容器？如果是容器，请使用如下`.find()`函数：

```
pictureDiv.find('img').attr('src',SomeValue);
pictureDiv.find('p').... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T01:08:48.440

如果你在 pictureDiv 中有 p 标签和 img 标签

```
var pictureDiv = $('#pictureDiv');

pictureDiv.css('height','500');

$("img",pictureDiv).attr("src","image path");

$("p",pictureDiv).html("insert text into p tag"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T01:09:44.670

jQuery('#pictureDiv').find("img"); jQuery('#pictureDiv').find("p");

这应该为您提供图像列表。

也就是说，如果我正确理解了这个问题。

hth

# javascript - TinyMCE dialog.css 未在图像弹出窗口中加载，抛出 404

> ID：11875384
> 
> 赞同：5
> 
> 时间：2012-08-09T01:02:51.183
> 
> 标签：javascript, jquery, css, tinymce, loading

单击图像图标并启动图像弹出窗口时，JS 工作但 CSS ( `dialog.css`) 无法加载，并且`404`由于 TinyMCE JS 使用的 URL 不正确。

我正在从路径中加载带有高级主题的 tinyMCE：

```
"/local/scripts/admin/tiny_mce/tiny_mce.js" 
```

编辑器工作正常，但是当我尝试加载图像弹出窗口时，没有加载 dialog.css 并且 Firebug 报告了`404`.

弹出代码尝试加载相对于加载 tinyMCE 编辑器的页面（在本例中为“/schools”）的 dialog.css，因此返回的图像弹出代码调用的最终 URL`404`是：

```
https://[domain name]/schools/themes/advanced/skins/default/dialog.css 
```

代替 `https://[domain name]/local/scripts/admin/tiny_mce/themes/advanced/skins/default/dialog.css`

我正在`init()`使用`tinyMCE.baseURL='/local/scripts/admin/tiny_mce';`并尝试过排列，包括完整的主机名和路径、尾部斜杠等，但没有成功。也尝试了一些`document_base_url`和`relative_urls`配置属性。

任何想法为什么`dialog.css`不加载？

非常感谢您的帮助。 `TinyMCE 3.4.9`（非 jQuery 版本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:07:14.247

我遇到了同样的问题，弹出窗口无法识别或将 base_url 用于 dialog.css。我也尝试了许多主机名变体和 baseURL/document_base_url/relative_urls 的组合......没有成功。

我想出了一个使用'popup_css_add'的解决方法。

浏览器仍然错过了最初的 dialog.css 调用，但随后找到了“popup_css_add”调用。

```
tinyMCE.init({
  popup_css_add : '/local/scripts/admin/tiny_mce/themes/advanced/skins/default/dialog.css'
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:45:53.583

试试 tinyMCE.baseURL = "/schools" – @UnLoCo 建议 8 月 9 日 1:12

# c++ - C ++迭代器与具有长度（）方法的对象

> ID：11875386
> 
> 赞同：2
> 
> 时间：2012-08-09T01:03:13.367
> 
> 标签：c++, iterator, idioms

我的问题引用了[Maya C++ API](http://download.autodesk.com/global/docs/mayasdk2012/en_us/index.html)的一个示例，我想知道它是特定于 Maya 还是通用 C++ 习惯用法

在 Maya API 中有一个名为 的对象`MSelectionList`，它是一个容器，表示场景中的对象。它还有一个同伴`MItSelectionList`，它是`MSelectionList`实例的迭代器。

现在我明白了迭代器的好处是它知道如何正确地循环对象，但在这种情况下，它`MSelectionList`有一个`.length()`方法，以及与迭代器相同的 getter，除了你提供索引。

例子...

**[选择列表](http://download.autodesk.com/global/docs/mayasdk2012/en_us/cpp_ref/class_m_selection_list.html)**

```
MSelectionList activeList;
MGlobal::activeSelectionList(activeList);

unsigned int length = activeList.length();
for (unsigned int i=0 ; i < length; i++ ) {
    MDagPath item;
    iter.getDagPath(i, item);
} 
```

**[选择列表](http://download.autodesk.com/global/docs/mayasdk2012/en_us/cpp_ref/class_m_it_selection_list.html)**

```
MSelectionList activeList;
MGlobal::activeSelectionList(activeList);
MItSelectionList iter( activeList );

for ( ; !iter.isDone(); iter.next() ) {
    MDagPath item;
    iter.getDagPath(item);
} 
```

迭代器在普通选择对象上提供的唯一功能是设置过滤器类型的能力，以便它只返回与过滤器匹配的对象。尽管您可以在第一个示例中明确执行相同的测试。

我的问题是，当迭代器和原始对象之间的功能重叠时，迭代器有什么好处？这只是一个特定于 Maya 的设计决策，还是一个通用的 C++ 习惯用法，总是出于一些我在这里不理解的额外原因创建迭代器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:49:46.750

我对 Maya 不熟悉，但我相信这个问题与“迭代器与索引”之间的争论有关。

根据迭代器的[维基百科文章，迭代](http://en.wikipedia.org/wiki/Iterator#Contrasting_with_indexing)器具有以下优点：

> *   计数循环不适用于所有数据结构，特别是对于没有随机访问或随机访问速度较慢的数据结构，如列表或树。
> *   迭代器可以提供一种一致的方式来迭代各种数据结构，从而使代码更具可读性、可重用性，并且对数据结构的变化不那么敏感。
> *   迭代器可以对访问施加额外的限制，例如确保元素不能被跳过或以前访问过的元素不能被第二次访问。
> *   迭代器可以允许在不使迭代器无效的情况下修改容器对象。例如，一旦迭代器超出了第一个元素，就有可能将其他元素插入容器的开头，并产生可预测的结果。使用索引这是有问题的，因为索引号必须更改。

对于您的特定示例，看起来第三个项目符号最适用，因为`MItSelectionList`仅公开一个`next()`成员函数以强制不跳过元素（除非应用了过滤器）。

# perl - 如何在 Aptana Studio 3 中传输到远程 Web 服务器的 cgi-bin 目录？

> ID：11875389
> 
> 赞同：0
> 
> 时间：2012-08-09T01:03:40.077
> 
> 标签：perl, apache, webserver, aptana, cgi-bin

我在虚拟机上运行 Ubuntu 11.10 64 位服务器，并希望在 Aptana Studio 3 中无缝开发，但遇到了问题。

我可以毫无问题地上传到 /var/www/，除了必须 ssh 进入 chmod 文件，但这是可以接受的。但是，我不能创建 Perl 文件并以相同的方式将其上传到 /usr/lib/cgi-bin。另外，如果我通过 ssh 在服务器上创建一个 Perl 文件，然后在 Aptana 中编辑它，我必须 chown root:root 它才能同步它。

对此问题的任何帮助将不胜感激。如果有帮助的话，Apache 日志中没有关于 Perl 上传尝试的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:17:15.510

也许 cgi-bin 目录不在 www 目录中是一个问题？如果您愿意，可以更新您的 Apache 配置以将其移动到那里。

# python - 微妙地访问和修改多维列表

> ID：11875392
> 
> 赞同：1
> 
> 时间：2012-08-09T01:04:04.757
> 
> 标签：python, list, python-2.7

当我今晚写了一点代码时，我遇到了一个问题，尽管它并没有阻止我，但还是引起了我的注意，因为我无法弄清楚。所以这是我写的一个函数（不应该是最好的方法，但没关系......）

```
def ownShuffle( origin ):
    export  = [[] for i in range( len( origin ) ) ]
    indices = range( len( origin ) )
    for n, item in enumerate( origin ):
        i = random.randrange( len( indices ) )
        export[indices[i]] = item
        indices.remove(indices[i])
    return export 
```

现在有一个这样的测试样本：

```
c = [[1, 2, 3], 
     [4, 5, 6], 
     [7, 8, 9]] 
```

有问题的部分。我使用几乎相同的代码得到不同的结果。如果这样写：

```
for i, line in enumerate(c):
    c[i] = ownShuffle(line)

print c
>>> [[3, 2, 1],
     [6, 4, 5],
     [7, 8, 9]] 
```

我得到一个洗牌的名单。但是使用以下代码：

```
for i, line in enumerate(c):
    line = ownShuffle(line)

print c
>>> [[1, 2, 3], 
     [4, 5, 6], 
     [7, 8, 9]] 
```

我得到测试样本不变。也许它来自我写的函数？我不知道...

所以我的问题是：**有人知道为什么吗？**

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:08:48.700

```
for i, line in enumerate(c):
    line = ownShuffle(line) 
```

您不断创建一个临时`line`但它与原始列表不同的引用`c`。您实际上需要影响其中的值`line`以反映原始对象。

您可以通过执行以下操作看到它改变了其中的值`line`：

```
for i, line in enumerate(c):
    line[:] = ownShuffle(line) 
```

这是一种可视化正在发生的事情的方法：

```
for i, line in enumerate(c):
    id_before = id(line)
    line = ownShuffle(line)
    print id_before, "=>", id(line)
# 4973032728 => 4973032656
# 4973034312 => 4973032656
# 4973034240 => 4973032656

for i, line in enumerate(c):
    id_before = id(line)
    line[:] = ownShuffle(line)
    print id_before, "=>", id(line)
# 4973032728 => 4973032728
# 4973034312 => 4973034312
# 4973034240 => 4973034240 
```

在第一个中，您可以看到它始终是一个临时对象。而在第二个中，该行仍然是您的原始行元素`c`

# nfc - 带有用户身份验证的 NFC 标签

> ID：11875393
> 
> 赞同：4
> 
> 时间：2012-08-09T01:04:09.697
> 
> 标签：nfc

目标是拥有一个 NFC 标签，它可以提供特定信息，保持解锁状态，并且只允许经过身份验证的用户（登录/通行证）更改该数据？那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T09:35:09.783

是的，这是可能的。严格来说，您的问题可能与编程无关。但与 NFC 相关的问题似乎倾向于模糊软件和硬件之间的界限，所以我仍然认为这是提出问题的正确位置。

NFC 标签可以包含具有不同功能的不同芯片，具体取决于制造商。当您查看 NFC 论坛类型标签时，有以下选项：

1.  类型 1 标签：提供锁定数据的可能性，但不支持身份验证，AFAICT。最初的制造商是 Innovision Research & Technology PLC，现在归 Broadcom 所有。
2.  类型 2 标签：提供锁定数据的可能性。有各种各样的制造商。一些芯片还提供身份验证和写保护，例如 MIFARE Ultralight C。
3.  类型 3 标签：基于 Sony FeliCa 技术，主要（唯一？）制造商是 Sony。FeliCa 芯片提供身份验证功能和写保护。FeliCa 系统主要用于东亚。
4.  4 类标签：基于 ISO 14443-4 和 ISO 7816-4 规范。提供指示写保护的可能性。支持这一点的芯片通常是微控制器卡，它们通常提供高级功能，例如身份验证、加密和写保护，例如 MIFARE DESFire 系列芯片。

其他普遍支持的 NFC 标签：

1.  MIFARE Classic：提供访问控制，包括写保护。还可以支持NDEF消息存储。
2.  基于 ISO 15693：一些芯片提供（有限的）认证功能和写保护，例如 ICODE SLIX-S（也可以支持 NDEF 消息存储）。

然后是 JavaCard 卡系列（通常兼容全球平台）和其他 ISO 7816-4 支持卡。这些通常提供非常高级的功能，例如文件系统和自定义程序，包括对身份验证、加密、数字签名等的支持。它们通常需要特殊的工具和培训才能使用它们。

我建议查看 MIFARE Classic，如果不满足您的安全要求，请查看 MIFARE DESFire。

# c - C、IRC 机器人。警告：不推荐将字符串常量转换为 char*

> ID：11875396
> 
> 赞同：1
> 
> 时间：2012-08-09T01:04:34.540
> 
> 标签：c, compiler-errors, char

我正在尝试编写一个 IRC 机器人。机器人连接到服务器，但我无法让它加入频道。

```
int conn;
char sbuf[512];

// Function I'm trying to use
void join(char *fmt, ...){
    va_list ap;
    va_start(ap,fmt);
    vsnprintf(sbuf,512, fmt,ap);
    va_end(ap);

    printf("<< %s",sbuf);
    write(conn,sbuf,strlen(sbuff));
}

// in main function 
int main(){
    const char * chanm = "test";

    // Here is where I get my error, line 38
    join("JOIN %s\r\n", chanm);
} 
```

有人可以告诉我我做错了什么吗？

我收到错误消息：ircbot.c:38 warning: deprecated conversion from string constant to char*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:06:31.113

将您的函数标题更改为：

```
void join(const char *fmt, ...){ 
```

问题是它`"JOIN %s\r\n"`是一个*常量*字符串，而您试图将它传递给一个非常量`char *`。由于您不打算`fmt`在`join`函数中进行修改，因此应将其声明为`const char *fmt`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:06:43.523

您可以使用以下方法解决此问题：

```
void join(const char *fmt, ...)
//        ^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T01:20:59.807

在 C 中，字符串文字具有非常量类型，即使尝试修改字符串文字的内容是未定义的行为。例如，这在 C 中是**不允许**的，即使允许编译器编译它而不发出警告或错误：

```
 char *str = "Hello World!";
    str[4] = 'x'; // undefined behaviour 
```

在上面，字符串文字`"Hello World!"`的类型为`char[13]`。为了防止意外修改字符串文字，一些编译器将字符串文字视为`const char[]`类型。它最多只能发出诊断/警告，因为从技术上讲它仍然是有效的 C。有两种方法可以解决您的问题：

1.  如果一个函数需要修改一个字符串，它必须是`char *`类型，所以这意味着你需要传递一个可修改的字符串，而不是字符串文字。这可以通过创建一个数组来实现：

    char buf[1000] = "字符串字面量"; 函数（缓冲区，缓冲区大小，...）；

2.  如果函数不需要修改字符串（例如在你的情况下），你可以[并且应该]让你的函数只接受`const char *`。这样，可修改和不可修改的字符串都可以毫无问题地传递给您的函数。

    ```
    function(const char *arg, ...);

    // somewhere else:

    function("Acceptable", 1, 2, 3);

    char buf[20] = "Also acceptable!";
    function(buf, 1, 2, 3); 
    ```

# r - 是否需要 facet_grid/wrap 按变量对箱线图进行分组，而不是用于填充/颜色？

> ID：11875397
> 
> 赞同：2
> 
> 时间：2012-08-09T01:04:36.110
> 
> 标签：r, ggplot2, boxplot

我进行了两次实验，其中一些复制了前一组的条件。我有一列用于唯一批次 ID，另一列包含来自实验 1 的 ID，来自实验 2 的批次复制了这些 ID。这是一些像这样存储的示例数据：

```
test <- data.frame(var1=c(rep("A",4), rep("B",4), rep("C",4), rep("D",4)),
                   var2=rep(c(rep("A",4), rep("B",4)),2),
                   value=runif(16,1,5)) 
```

这是我的ggplot代码：

```
ggplot(test, aes(x=var1, y=value, fill=var2)) + geom_boxplot() 
```

这给了我根据`var1`因子顺序排列的批次 ID。

![在此处输入图像描述](../Images/5682caa4ee3d8446f137d428ebbc6727.png)

我想要 A`var2`并排，B`var2`并排。是使用`facet_grid`or的唯一方法`facet_wrap`吗？

```
 ggplot(test, aes(x=var1, y=value, fill=var2)) + geom_boxplot() +
        facet_grid(. ~ var2, scales="free_x") 
```

![在此处输入图像描述](../Images/6002b136c65ff814d9ff01e6ce2bc969.png)

我尝试添加`group=var2`，但这给了我重叠且非常宽的箱线图，我也不明白：

```
ggplot(test, aes(x=var1, y=value, group=var2, fill=var2)) + geom_boxplot()
Warning message:
position_dodge requires non-overlapping x intervals 
```

![在此处输入图像描述](../Images/fa7827965d36b76931cff527674203e0.png)

我可以使用刻面；我主要是在问这个问题，因为当我无法按预期分组时，我感到很惊讶。我还在示例中查看`geom_bar()`了更多分组方法，但似乎大多数人并没有以这种方式对事物进行分组。

随意提供有关如何解决此问题的其他意见。我只是想比较成对的测试结果，以便轻松查看复制是否与原始试验相匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T01:20:09.740

`interaction`一种使用和调整`scale_x_discrete`标签的作弊方法

```
 ggplot(test, aes(x=interaction(var1,var2), y=value, fill=var2)) + 
  geom_boxplot() +
  scale_x_discrete(name = 'var1',breaks = c('A.A','C.A','B.B','D.B'), 
                   labels = c('A','C','B','D')) 
```

![在此处输入图像描述](../Images/7e428a9a6dc0ff03b7648e745351ddae.png)

**编辑**感谢@Andrie 的评论

或者，您可以创建一个适当有序的因子，**或（无序的）因子，其水平以正确的顺序指定**。

*   ggplot2 尊重因子水平的顺序（无论是否在`ordered`因子中）。
*   默认情况下， R 将按*字典*顺序对级别进行排序，因此对于任何其他顺序，您需要指定它。

.

```
library(plyr) # for arrange 
var1_order <- unique(as.character(arrange(test,var2)[['var1']]))

test$var1_order <- ordered(test$var1, levels = var1_order)
## or
test$var1_order_2 <- factor(test$var1, levels = var1_order)
## so that 
ggplot(test, aes(x=var1_order_2, y=value, fill=var2)) + 
 geom_boxplot() + 
 xlab('var1')
## or 
ggplot(test, aes(x=var1_order, y=value, fill=var2)) + 
 geom_boxplot() + 
 xlab('var1') 
```

两者都会给出相同的结果

## 编辑——另一种方法

您可以将 x 轴设置为`var2`并填充`var1`，然后按顺序进行`var2`闪避并填充`var1`

```
 ggplot(test, aes(x=var2,y=value)) + 
   geom_boxplot(aes(fill = var1)) 
```

![在此处输入图像描述](../Images/4c4f9bbab13db414009e6749982ba19c.png)

# google-apps-script - 如何在 GAS UI 中没有名称的小部件上使用 TAGS

> ID：11875398
> 
> 赞同：0
> 
> 时间：2012-08-09T01:04:38.050
> 
> 标签：google-apps-script

编辑：8 月 10 日修复，这是一个简短的 :-)

我最近学会了使用标签的值，`e.parameter.widgetName_tag`它在像或其他可以有名字的小部件上很好地工作`ListBox`，但我试图在一个按钮上使用它，使用它的 ID（因为它不能被命名）和一些东西只是奇怪的发生...

它曾经毫无问题地工作，今晚它突然停止返回它的值，而是给出了一个丑陋的“未定义”。

所以我的问题是：如何获取没有名称的小部件的标签值？

这是我编写的显示错误的测试代码（[在此处部署](https://script.google.com/macros/s/AKfycbyLpTcu7SuUHfLFAEKwL-6JWQmqJufpymlGlp3ZhkSwVxalkfIR/exec)）

```
function doGet(e) {
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  var lbl = app.createTextBox().setWidth('400').setId('lbl');
  lbl.setText('Click here').setTag('tag value UI');
  var btn = app.createButton('Test button with a tag value but no function').setId('btn').setTag('btn tag value')
  app.add(panel.add(lbl).add(btn));
  var CH = app.createServerHandler('showtag').addCallbackElement(panel);
  lbl.addClickHandler(CH)
  return app;
}

function showtag(e){
var app = UiApp.getActiveApplication();
var lbl = app.getElementById('lbl')
lbl.setText('TextBox tag value ='+e.parameter.lbl_tag+'---button tag ='+e.parameter.btn_tag);
return app
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:53:45.613

同样的问题在这里...

似乎无法访问没有“名称”参数可用的元素的“标签”值。在我的情况下，这是“标签”元素......

我能找到的唯一解决方案是创建隐藏的 TextBox 以使用它们的标签，就像我以前使用标签元素一样。

谷歌可能在他们的脚本引擎中做了一些改变。

# java - 迄今为止的 Android 倒数计时器

> ID：11875403
> 
> 赞同：17
> 
> 时间：2012-08-09T01:05:01.750
> 
> 标签：java, android, eclipse, android-layout, android-intent

我正在尝试为 android 中的游戏/日期制作倒数计时器。我想创建一个计时器，它显示天、小时、分钟和秒到我用 final 变量指定的日期。然后计时器设置文本视图以向用户显示天、小时、分钟和秒。

关于我如何编码的任何建议？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T06:55:04.207

CountDownTimer 将显示格式化为小时、分钟、天和秒的时间。

```
 public class DemotimerActivity extends Activity {
        /** Called when the activity is first created. */
         TextView tv;
         long diff;
         long oldLong;
         long NewLong;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            tv = new TextView(this);
            this.setContentView(tv);
            SimpleDateFormat formatter = new SimpleDateFormat("dd.MM.yyyy, HH:mm");
            String oldTime = "19.02.2018, 12:00";//Timer date 1
            String NewTime = "20.02.2018, 14:00";//Timer date 2
            Date oldDate, newDate;
            try {
                oldDate = formatter.parse(oldTime);
                newDate = formatter.parse(NewTime);
                oldLong = oldDate.getTime();
                NewLong = newDate.getTime();
                diff = NewLong - oldLong;
           } catch (ParseException e) {
                e.printStackTrace();
       }
         MyCount counter = new MyCount(diff, 1000);
         counter.start();
    }

    // countdowntimer is an abstract class, so extend it and fill in methods
    public class MyCount extends CountDownTimer {
    MyCount(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish() {
        txtNumber1.setText("done!");
    }

    @Override
    public void onTick(long millisUntilFinished) {
         long millis = millisUntilFinished;
        String hms = (TimeUnit.MILLISECONDS.toDays(millis)) + "Day "
                + (TimeUnit.MILLISECONDS.toHours(millis) - TimeUnit.DAYS.toHours(TimeUnit.MILLISECONDS.toDays(millis)) + ":")
                + (TimeUnit.MILLISECONDS.toMinutes(millis) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)) + ":"
                + (TimeUnit.MILLISECONDS.toSeconds(millis) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis))));
        txtNumber1.setText(/*context.getString(R.string.ends_in) + " " +*/ hms);
    }
}

    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-06-13T12:52:29.800

试试这个：

```
SimpleDateFormat formatter = new SimpleDateFormat("dd.MM.yyyy, HH:mm:ss");
        formatter.setLenient(false);

        String endTime = "25.06.2017, 15:05:36"

        Date endDate;
        try {
            endDate = formatter.parse(endTime);
            milliseconds = endDate.getTime();

        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

         startTime = System.currentTimeMillis();

         diff = milliseconds - startTime;

           mCountDownTimer = new CountDownTimer(milliseconds, 1000) {
            @Override
            public void onTick(long millisUntilFinished) {

                startTime=startTime-1;
                Long serverUptimeSeconds =
                        (millisUntilFinished - startTime) / 1000;

                String daysLeft = String.format("%d", serverUptimeSeconds / 86400);
                txtViewDays.setText(daysLeft);

                String hoursLeft = String.format("%d", (serverUptimeSeconds % 86400) / 3600);
                txtViewHours.setText(hoursLeft);

                String minutesLeft = String.format("%d", ((serverUptimeSeconds % 86400) % 3600) / 60);

                txtViewMinutes.setText(minutesLeft);

                String secondsLeft = String.format("%d", ((serverUptimeSeconds % 86400) % 3600) % 60);
                txtViewSecond.setText(secondsLeft);

            }

            @Override
            public void onFinish() {

            }
        }.start();

    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-09T02:07:37.043

这是一个 Android 内置的 CountDownTimer，它将在 TextView 中显示格式化为您的天、小时、分钟和秒的时间：

```
public class Example extends Activity {
    CountDownTimer mCountDownTimer;
    long mInitialTime = DateUtils.DAY_IN_MILLIS * 2 + 
                        DateUtils.HOUR_IN_MILLIS * 9 +
                        DateUtils.MINUTE_IN_MILLIS * 3 + 
                        DateUtils.SECOND_IN_MILLIS * 42;
    TextView mTextView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mTextView = (TextView) findViewById(R.id.empty);

        mCountDownTimer = new CountDownTimer(mInitialTime, 1000) {
            StringBuilder time = new StringBuilder();
            @Override
            public void onFinish() {
                mTextView.setText(DateUtils.formatElapsedTime(0));
                //mTextView.setText("Times Up!");
            }

            @Override
            public void onTick(long millisUntilFinished) {
                time.setLength(0);
                 // Use days if appropriate
                if(millisUntilFinished > DateUtils.DAY_IN_MILLIS) {
                    long count = millisUntilFinished / DateUtils.DAY_IN_MILLIS;
                    if(count > 1)
                        time.append(count).append(" days ");
                    else
                        time.append(count).append(" day ");

                    millisUntilFinished %= DateUtils.DAY_IN_MILLIS;
                }

                time.append(DateUtils.formatElapsedTime(Math.round(millisUntilFinished / 1000d)));
                mTextView.setText(time.toString());
            }
        }.start();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-14T05:59:16.137

这也是 kotlin 中的一个例子

```
fun printDifferenceDateForHours() {

        val currentTime = Calendar.getInstance().time
        val endDateDay = "03/02/2020 21:00:00"
        val format1 = SimpleDateFormat("dd/MM/yyyy hh:mm:ss",Locale.getDefault())
        val endDate = format1.parse(endDateDay)

        //milliseconds
        var different = endDate.time - currentTime.time
        countDownTimer = object : CountDownTimer(different, 1000) {

            override fun onTick(millisUntilFinished: Long) {
                var diff = millisUntilFinished
                val secondsInMilli: Long = 1000
                val minutesInMilli = secondsInMilli * 60
                val hoursInMilli = minutesInMilli * 60
                val daysInMilli = hoursInMilli * 24

                val elapsedDays = diff / daysInMilli
                diff %= daysInMilli

                val elapsedHours = diff / hoursInMilli
                diff %= hoursInMilli

                val elapsedMinutes = diff / minutesInMilli
                diff %= minutesInMilli

                val elapsedSeconds = diff / secondsInMilli

                txt_timeleft.text = "$elapsedDays days $elapsedHours hs $elapsedMinutes min $elapsedSeconds sec"
            }

            override fun onFinish() {
                txt_timeleft.text = "done!"
            }
        }.start()
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-14T05:27:29.987

`long startTime;`

```
private void start_countdown_timer()
{
    SimpleDateFormat formatter = new SimpleDateFormat("dd.MM.yyyy, HH:mm:ss");
    formatter.setLenient(false);

    String endTime = "18.09.2017, 15:05:36";
    long milliseconds=0;

    final CountDownTimer mCountDownTimer;

    Date endDate;
    try {
        endDate = formatter.parse(endTime);
        milliseconds = endDate.getTime();

    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    startTime = System.currentTimeMillis();

    mCountDownTimer = new CountDownTimer(milliseconds, 1000) {
        @Override
        public void onTick(long millisUntilFinished) {

            startTime=startTime-1;
            Long serverUptimeSeconds =
                    (millisUntilFinished - startTime) / 1000;

            String daysLeft = String.format("%d", serverUptimeSeconds / 86400);
            //txtViewDays.setText(daysLeft);
            Log.d("daysLeft",daysLeft);

            String hoursLeft = String.format("%d", (serverUptimeSeconds % 86400) / 3600);
            //txtViewHours.setText(hoursLeft);
            Log.d("hoursLeft",hoursLeft);

            String minutesLeft = String.format("%d", ((serverUptimeSeconds % 86400) % 3600) / 60);
            //txtViewMinutes.setText(minutesLeft);
            Log.d("minutesLeft",minutesLeft);

            String secondsLeft = String.format("%d", ((serverUptimeSeconds % 86400) % 3600) % 60);
            //txtViewSecond.setText(secondsLeft);
            Log.d("secondsLeft",secondsLeft);

        }

        @Override
        public void onFinish() {

        }
    }.start();

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-15T11:02:30.780

我已经阅读了您的问题，我已经遇到了这个问题，并且我在没有使用任何第三方库的情况下为其制作了自定义代码。

**这是代码：**

```
public class CountDownTimerDaysActivity extends AppCompatActivity {

/*Views declaration*/
private TextView months_left,weeks_left,daysLeft,hrsLeft,minLeft,secLeft,endDate;
/*Handler Declaration*/
private Handler handler;
/*set End Time for timer */
private String endDateTime="2019-03-21 10:15:00";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    /*inflate layout for activity*/
    setContentView(R.layout.activity_count_down_timer);
    /*invoke initView method  for views*/
    initView();
}
/*initView method for findviews by id*/
private void initView() {
    months_left = findViewById(R.id.months_left);
    weeks_left = findViewById(R.id.weeks_left);
    daysLeft = findViewById(R.id.days_left);
    hrsLeft = findViewById(R.id.hrs_left);
    minLeft = findViewById(R.id.min_left);
    secLeft = findViewById(R.id.sec_left);
    endDate = findViewById(R.id.end_date);
    endDate.setText(endDateTime);
    /*invoke countDownStart() method for start count down*/
    countDownStart();
}

/*countDownStart() method for start count down*/
public void countDownStart() {
    handler = new Handler();
    Runnable runnable = new Runnable() {
        @SuppressLint("SetTextI18n")
        @Override
        public void run() {
            handler.postDelayed(this, 1000);
            try {
                @SuppressLint("SimpleDateFormat") SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
                // Please set date in  YYYY-MM-DD hh:mm:ss format
                /*parse endDateTime in future date*/
                Date futureDate = dateFormat.parse(endDateTime);
                Date currentDate = new Date();
                /*if current date is not comes after future date*/
                if (!currentDate.after(futureDate)) {
                    long diff = futureDate.getTime()
                            - currentDate.getTime();

                    long days = diff / (24 * 60 * 60 * 1000);
                    diff -= days *(24  *60 * 60  *1000);
                    long hours = diff / (60 * 60*  1000);
                    diff -= hours * (60*  60 * 1000);
                    long minutes = diff / (60 * 1000);
                    diff -= minutes * (60  *1000);
                    long seconds = diff / 1000;
                    @SuppressLint("DefaultLocale") String dayLeft = "" + String.format("%02d", days);
                    @SuppressLint("DefaultLocale") String hrLeft = "" + String.format("%02d", hours);
                    @SuppressLint("DefaultLocale") String minsLeft = "" + String.format("%02d", minutes);
                    @SuppressLint("DefaultLocale") String secondLeft = "" + String.format("%02d", seconds);
                    daysLeft.setText(dayLeft + "D: ");
                    hrsLeft.setText(hrLeft + "H: ");
                    minLeft.setText(minsLeft + "M: ");
                    secLeft.setText(secondLeft + "S");

                } else {
                    textViewGone();
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    };
    handler.postDelayed(runnable, 1000);
}
private void textViewGone() {
    months_left.setVisibility(View.GONE);
    weeks_left.setVisibility(View.GONE);
    daysLeft.setVisibility(View.GONE);
    hrsLeft.setVisibility(View.GONE);
    minLeft.setVisibility(View.GONE);
    secLeft.setVisibility(View.GONE);
}
} 
```

我希望它对你有用

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-09T01:12:23.683

看看这篇文章，我想它会对你有所帮助：[如何在 android 中查看日期？](https://stackoverflow.com/questions/7389242/how-to-check-day-in-android)

使用 java.util.Calendar 类，我认为您应该能够弄清楚如何完成剩下的工作。

[http://developer.android.com/reference/java/util/Date.html](http://developer.android.com/reference/java/util/Date.html) - 您可以使用 getDate()、getHours()、getMinutes()、getSeconds() 等...希望对您有所帮助！

# ruby-on-rails - 找不到 rails-3.2.6 的可执行 rails

> ID：11875409
> 
> 赞同：0
> 
> 时间：2012-08-09T01:06:06.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3

尝试运行“rails s”时出现以下错误？

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:334:in `bin_path'：找不到rails-3.2.6的可执行rails（Gem::例外）来自 /usr/bin/rails:19

我正在使用 RVM，并且我确定我将它安装在不正确的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:28:12.170

如果您通过 RVM 安装，那么该消息将永远不会出现，因为它是 OS X 附带的 ruby​​ 发出的消息，它可能由 /usr/bin/rails 调用。

我猜你安装了 RVM 和 ruby​​，但没有通过 RVM 安装 rails。假设您使用的是 1.9.3-p194，您必须：

```
% rvm 1.9.3-p194 
```

然后，运行

```
% gem install rails 
```

现在，运行`which rails`，它应该在下面的某个地方显示铁轨的路径`~/.rvm`。就我而言：

```
% which rails
/Users/shigeya/.rvm/gems/ruby-1.9.3-p194/bin/rails 
```

如果不是，请检查您的路径变量。`PATH`如果您刚刚安装了 ruby​​ 和 RVM，您也可以重新登录以正确设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:54:46.483

以上工作，我也做了以下（完全没有拼写错误）：

```
rvmsudo gem install rails
rvmsudo gem install bundler
rvmsudo rubygems current

rvm gemset create rails31
rvm use 1.9.3p194@rails31 --default
rvm --rvmrc --create use 1.9.3-p194@uxolo 
```

# php - PHP 打印机网络服务器

> ID：11875411
> 
> 赞同：0
> 
> 时间：2012-08-09T01:06:11.307
> 
> 标签：php, networking, printers

现在，我建立了一个网站，该网站链接到 LAN 上的脚本，允许我安装我管理的许多网络打印机。基本上，它只是一个 HTML 页面，非常不安全地指向局域网另一部分的脚本，该脚本将其作为 TCP/IP 打印机安装在本地机器上。

```
<a href="file://server/prnt/HP3200.bat>HP 3200 (room C204)</a>
<a href="file://server/prnt/HP3200.bat>HP 3200 (room C206)</a>
<a href="file://server/prnt/DELL1500.bat>DELL 1500</a>
<a href="file://server/prnt/TOS120.bat>Toshiba 120</a> 
```

有谁知道我怎样才能使它更安全和高效？Linux 服务器还托管 PHP 页面，因此服务器端脚本不会成为问题。网站必须有更好的方法来管理打印机的许多 IP、名称和驱动程序。我希望网站能够以某种方式实际安装打印机，而不是在获取 .inf 驱动程序文件并添加打印机时向没有经验的 PC 用户显示丑陋的 DOS 窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:12:06.493

这真的不是你可以用 PHP 做的事情。PHP 的所有内容都在服务器本身上执行，因此它不能以我想的方式代表用户执行任何操作。Javascript 也不是一个选项，因为它具有安全限制（如果 javascript 可以更改这些类型的设置并执行这样的代码，那将是一件非常非常糟糕的事情）。

您正在做的事情非常简单，无需运行 SOE 并编写应用程序来执行您想要的操作。如果您担心这些 .bat 脚本的外观，我会建议您插入代码并使它们更具吸引力 - 或者让它们看起来更“技术性”。您目前拥有的是一种将打印机添加到 PC 的干净、简单且有效的方法。

编辑：该应用程序可能是一个[msi snapin](http://msdn.microsoft.com/en-us/library/windows/desktop/aa814986%28v=vs.85%29.aspx)。不过，这将是一些重要的编码，如果您不熟悉 Windows 编程，那就更是如此。

编辑 2：在重新阅读您的评论时，您可以执行以下操作：

制作一个 .VBS 文件，其中包含以下内容：

```
Set WshShell = CreateObject("WScript.Shell")
WshShell.Run chr(34) & "C:\Batch Files\syncfiles.bat" & Chr(34), 0
Set WshShell = Nothing 
```

让您的网页指向这些 VBS 文件，而不是 bat 文件。所有这一切都是在后台打开 bat 文件。请注意，bat 文件可以在文本中发布重要信息——例如“安装成功”或“安装失败”。如果您在不可见的情况下运行所有​​内容，您的用户将无法真正判断事情是否有效。

# linux - 厨师忽略 apt-get 更新

> ID：11875417
> 
> 赞同：1
> 
> 时间：2012-08-09T01:06:53.820
> 
> 标签：linux, ubuntu, chef-infra, vagrant, apt-get

我在 vagrant 中使用 chef 来配置一个精确的 32 虚拟机。

命令：

```
execute "apt-get update" do
    command "apt-get update"
end 
```

好像没有效果。

流浪者 1.0.3 虚拟机 4.1.18

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T01:15:08.543

添加这个食谱对我有用（这是一个“官方”食谱）：[https ://github.com/opscode-cookbooks/apt](https://github.com/opscode-cookbooks/apt)

# ios - 核心文本 - CTRunGetGlyphs 是垃圾 - iOS

> ID：11875418
> 
> 赞同：-2
> 
> 时间：2012-08-09T01:07:05.083
> 
> 标签：ios, core-text

这里的代码似乎大部分都有效——我可以打印出每次运行，看起来运行是有效的，但是当我打印出字形时，它们是垃圾。而且位置都在（0,0），我的界限对我来说看起来不正确。有人可以帮助我，也许我没有正确地做这些事情，顺便说一下，这只是一个示例程序，所以我可以查看运行中的实际数据。

```
-(void) printRuns:(CTFrameRef)ctframe {
    CFArrayRef lines;
    lines = CTFrameGetLines(ctframe);

    CGPoint origins[CFArrayGetCount(lines)];//the origins of each line at the baseline
    CTFrameGetLineOrigins(ctframe, CFRangeMake(0, 0), origins);

    NSUInteger lineIndex = 0;

    for(int i = 0; i < CFArrayGetCount(lines); i++)
    //for(id lineObj in lines)
    {
        CTLineRef line = CFArrayGetValueAtIndex(lines, i);

        NSLog(@"LineOrigin:%@", NSStringFromCGPoint(origins[i]));

        CFArrayRef runs = CTLineGetGlyphRuns(line);

        for(int j = 0; j < CFArrayGetCount(runs); j++)
        //for(id runObj in (__bridge NSArray*)CTLineGetGlyphRuns(line))
        {
            CTRunRef run = CFArrayGetValueAtIndex(runs, j);
            CFRange runRange = CTRunGetStringRange(run);

            CGRect runBounds;

            CGFloat ascent;//height above the baseline
            CGFloat descent;//height below the baseline
            runBounds.size.width = CTRunGetTypographicBounds(run, runRange, &ascent, &descent, NULL);
            runBounds.size.height = ascent + descent;

            CGFloat xOffset = CTLineGetOffsetForStringIndex(line, CTRunGetStringRange(run).location, NULL);
            runBounds.origin.x = origins[lineIndex].x + 0 + xOffset;
            runBounds.origin.y = origins[lineIndex].y + 0;
            runBounds.origin.y -= descent;

            CGGlyph glyphBuffer[runRange.length];

            CTRunGetGlyphs(run, runRange, glyphBuffer);

            //const CGGlyph *glyphs = CTRunGetGlyphsPtr(run);
            //NSLog(@"Glyph:%c", glyph);

            for(int i = 0; i < runRange.length; i++)
            {
                NSLog(@"Glyph:%c", glyphBuffer[i]);

                if(i % 10 == 0)
                {
                    NSString *test = @"";
                }
            }

            CFIndex glyphCount = CTRunGetGlyphCount(run);
            CGPoint *positions = calloc(glyphCount, sizeof(CGPoint));
            CTRunGetPositions(run, runRange, positions);

            for(int i = 0; i < glyphCount; i++)
            {
                CGPoint *position = &positions[i];
                NSLog(@"Position:%@", NSStringFromCGPoint(*position));
            }

            NSLog(@"%@", NSStringFromCGRect(runBounds));
        }
        lineIndex++;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:40:14.853

最可能的问题是您从中提取字形的字体与您尝试显示它们的字体不同。如果是这样，这将解释“垃圾”字形，因为一种字体中的字形可以表示与另一种字体中的相同字形不同的字母（CGGlyph 只是字体的单个字形表的索引，不同的字体可以布置其字符集字形不同）。这也可以解释边界框不匹配。

至于定位，您是否尝试使用 CTFontGetAdvancesForGlyphs 代替？我怀疑位置数据仅表示当前字形的边界框相对于“光标”当前位置的位置，而不是相对于运行开始的位置。

最后，上面的示例代码假设一个字符映射到一个字形。一般情况下这是不正确的。英语有时会用连字排版（其中两个或多个字符由一个字形表示），但许多语言到处都有连字。您需要使用 CTRunGetGlyphCount()。

# php - 教义 2 按功能排序

> ID：11875419
> 
> 赞同：2
> 
> 时间：2012-08-09T01:07:13.693
> 
> 标签：php, symfony, doctrine-orm

我正在尝试使用 Doctrine2 v. 2.1.7 在 Symfony2 中执行此操作：

```
$query = $this->em->createQuery(
            "SELECT a
            FROM ".$repo." a
            WHERE a.type_id = :typeid
              AND a.scenario = :scen
              AND a.contact_id = :cid
              AND a.row_type LIKE :rwtp
            ORDER BY SUBSTRING(a.row_type, 4, 1)  "
        )->setParameters(
            array(
                'typeid'    =>$sesData['type_id'],
                'scen'      =>$sesData['scenario'],
                'cid'       =>$sesData['contact_id'],
                'rwtp'      =>'%.'.$whereVal.'%'
            )
        );

$customValues =  $query->getResult(); 
```

Doctrine 2 在 ORDER BY 子句上失败了，因为它不喜欢其中的任何内容，除了列名和它出现的排序方向。

我查看了使用本机查询的文档，但这不起作用，因为此查询用于从多个表中提取数据（它位于我们使用的全局方法中）所以我不能做映射的东西，因为除了上面的 where 子句，其余的列名因表而异。

我认为为了实现这一目标，我需要一个真正的原生查询，它可以像所有其他非原生的 DQL 查询一样自动进行映射（水合？）。但那部分让我受阻。

我可以尝试什么来使它正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:06:49.677

如何创建另一个列，您已经存储了`SUBSTRING(a.row_type, 4, 1)`例如插入时的结果，映射该列并按此排序？无论如何，与为每一行的每个查询计算子字符串相比，它会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:04:08.567

它的效率会降低，但是您是否考虑过在从数据库中取回结果后使用其中一个 php 排序函数自己对结果进行排序的可能性？如果您的结果集不是很大，这可能是一种明智的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T10:41:07.450

试试这个：

```
SELECT a, SUBSTRING(a.row_type, 4, 1) AS row_type
        FROM ".$repo." a
        WHERE a.type_id = :typeid
          AND a.scenario = :scen
          AND a.contact_id = :cid
          AND a.row_type LIKE :rwtp
        ORDER BY row_type 
```

# php - AS3 Load Vars Read only PHP echoed vars？

> ID：11875421
> 
> 赞同：1
> 
> 时间：2012-08-09T01:07:30.220
> 
> 标签：php, actionscript-3, flash, variables, loadvars

我想知道是否可以从 AS3 调用 PHP 脚本并让它只识别回显的变量。例如。

**我的 PHP 脚本名为 GetMyVars.php**

```
<?
Some code...
more code..

// I want to get these vars below into flash as3

echo "$MyVars"
echo "$MoreVars"

?> 
```

**Flash AS3 脚本调用 GetMyVars.php**

```
var fl_TextLoader:URLLoader = new URLLoader();
var fl_TextURLRequest:URLRequest = new URLRequest("GetMyVars.php");

fl_TextLoader.addEventListener(Event.COMPLETE, fl_CompleteHandler);

function fl_CompleteHandler(event:Event):void
{
var textData:String = new String(fl_TextLoader.data);

 trace(fl_TextLoader.MyVars); /// I want this var in Flash
 trace(fl_TextLoader.MoreVars);  /// and this one too. :)
}

fl_TextLoader.load(fl_TextURLRequest); 
```

或者最好的方法是什么。简而言之，我想做的是有一个充满图像的文件夹。我希望 php 读取这些图像并将它们分解为数组。然后我希望能够让 Flash 将文件名放入一个数组中并加载相互叠加的图像。也许有一种更简单的方法可以做到这一点。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:17:41.400

要获取 php 目录中的所有文件：

```
<?php

   $files = glob("yourdir/*.*");

   echo json_encode($files);
?> 
```

在 AS3 端调用该 php 文件时，它会为您提供一个 json 编码的文件名数组，然后您可以对其进行解码以获取数组并加载图像：

```
var fl_TextLoader:URLLoader = new URLLoader();
var fl_TextURLRequest:URLRequest = new URLRequest("GetMyVars.php");

fl_TextLoader.addEventListener(Event.COMPLETE, fl_CompleteHandler);

function fl_CompleteHandler(event:Event):void
{
   var textData:String = new String(fl_TextLoader.data);
   var images:Array = JSON.decode(textData);
   for each (var imageFileName:String in images)
   {
      loadImage(imageFileName);
   }
}

function loadImage(imageFileName:String)
{
   //image loading code
}

fl_TextLoader.load(fl_TextURLRequest); 
```

显然我还没有测试过这段代码，但它应该能让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:21:15.157

我建议将 PHP 中的内容作为 XML 文件输出，然后在 ActionScript 中解析 XML。

**PHP**

```
//Output this file as XML (not really necessary)
header("Content-type: text/xml");

//Some code...

echo "<root>
<xmlNode1>" . $MyVars . "</xmlNode1>
<xmlNode2>" . $MoreVars . "</xmlNode2>
</root>"; 
```

**ActionScript** [从[这里](http://pixelfumes.blogspot.com/2007/05/easy-xml-parsing-using-as3-actionscript.html)]

```
var xmlString:URLRequest = new URLRequest("file.php");
var xmlLoader:URLLoader = new URLLoader(xmlString);
xmlLoader.addEventListener(Event.COMPLETE, init);

function init(event:Event):void{
  var xDoc:XMLDocument = new XMLDocument();
  xDoc.ignoreWhite = true;

  var myXML:XML = xmlLoader.data as XML;
  xDoc.parseXML(myXML.toXMLString());
  trace(xDoc.xmlNode1); //Outputs whatever $MyVars equals
} 
```

我没有测试上面的代码，但它应该可以工作。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:44:39.820

我不久前也这样做了。这实际上很容易。只需在您的输出中使用`&`和`=`，AS3 就会选择它。它类似于 URL 中的 GET 变量。

所以在你的 PHP 中：

```
echo "var1=fooooo&var2=barrrr"; 
```

现在，在你的闪光中：

```
var loader:URLLoader = new URLLoader();
loader.addEventListener(Event.COMPLETE,onLoaded);
loader.load(new URLRequest("your-script.php"));
var variables:URLVariables = new URLVariables();

function onLoaded(evt:Event):void
{
var data:URLVariables = new URLVariables(evt.target.data);

trace data.var1;// access var1 with data.var1
trace data.var2;//same with var2 (data.var2)

} 
```

要获取特定目录中的所有图像，您可以使用`glob()`. `glob()`将返回特定目录中所有图像文件名的 assoc 数组。

因此，假设您`jpg`在文件夹中有大量图像`bob`：

```
$imageNames = glob('bob/*.jpg');//you're probably wondering what the * is...it's a wildcard (which basically means any letter/number)

//define end var (the var that will contain the end content to print)
$flash_readMeNOW = '';

//define counter
$i = 0;

//now loop through that array and append it to a var
foreach ( $imageNames as $name )
{

//url-encode the name
$name = urlencode($name);

//increment i
$i++;

//append name with incremented number
$flash_readMeNOW .= '&imageName'.$i.'='.$name;

}

//and now print out the data
echo $flash_readMeNOW; 
```

现在使用我上面提供的 Flash 代码，并使用 、 、 等访问所有`data.imageName1`图像`data.imageName2`名称`data.imageName3`...

哦，还有一件事，请确保您没有在此脚本中打印**任何其他内容。**为什么？由于某种原因，Flash 将无法获取它。这包括不可见的东西，例如空格和换行符。因此，如果您使用结束 php 标记 ( `?>`)，请确保其下方没有内容（因为它将被打印出来）。

# java - Java 正则表达式提供任何性能优势？

> ID：11875424
> 
> 赞同：9
> 
> 时间：2012-08-09T01:07:37.007
> 
> 标签：java, regex, performance

在 Java 中，当我们尝试使用正则表达式进行模式匹配时。例如，获取一个输入字符串并使用正则表达式来确定它是否为数字。如果不是，则抛出异常。在这种情况下，我理解，使用正则表达式使代码比我们获取字符串的每个字符，检查它是否是一个数字，如果不是抛出异常更简洁。

但我假设正则表达式也使过程更有效率。这是真的？我找不到关于这一点的任何证据。正则表达式如何在幕后进行匹配？它不是也遍历字符串并逐个检查每个字符吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T01:25:04.457

只是为了好玩，我运行了这个微基准测试。最后一次运行的结果（即 JVM 预热 / JIT）如下（无论如何，从一次运行到另一次运行的结果相当一致）：

```
regex with numbers 123
chars with numbers 33
parseInt with numbers 33
regex with words 123
chars with words 34
parseInt with words 733 
```

换句话说，chars 非常有效，如果字符串是数字，则 Integer.parseInt 与 char 一样有效，但如果字符串不是数字，则非常慢。正则表达式介于两者之间。

**结论**

如果您将字符串解析为数字并且您希望字符串通常是数字，则使用 Integer.parseInt 是最佳解决方案（高效且可读）。如果字符串不是太频繁，则字符串不是数字时得到的惩罚应该很低。

ps：我的正则表达式可能不是最佳的，请随时发表评论。

```
public class TestNumber {

    private final static List<String> numbers = new ArrayList<>();
    private final static List<String> words = new ArrayList<>();

    public static void main(String args[]) {
        long start, end;
        Random random = new Random();

        for (int i = 0; i < 1000000; i++) {
            numbers.add(String.valueOf(i));
            words.add(String.valueOf(i) + "x");
        }

        for (int i = 0; i < 5; i++) {
            start = System.nanoTime();
            regex(numbers);
            System.out.println("regex with numbers " + (System.nanoTime() - start) / 1000000);
            start = System.nanoTime();
            chars(numbers);
            System.out.println("chars with numbers " + (System.nanoTime() - start) / 1000000);
            start = System.nanoTime();
            exception(numbers);
            System.out.println("exceptions with numbers " + (System.nanoTime() - start) / 1000000);

            start = System.nanoTime();
            regex(words);
            System.out.println("regex with words " + (System.nanoTime() - start) / 1000000);
            start = System.nanoTime();
            chars(words);
            System.out.println("chars with words " + (System.nanoTime() - start) / 1000000);
            start = System.nanoTime();
            exception(words);
            System.out.println("exceptions with words " + (System.nanoTime() - start) / 1000000);
        }
    }

    private static int regex(List<String> list) {
        int sum = 0;
        Pattern p = Pattern.compile("[0-9]+");
        for (String s : list) {
            sum += (p.matcher(s).matches() ? 1 : 0);
        }
        return sum;
    }

    private static int chars(List<String> list) {
        int sum = 0;

        for (String s : list) {
            boolean isNumber = true;
            for (char c : s.toCharArray()) {
                if (c < '0' || c > '9') {
                    isNumber = false;
                    break;
                }
            }
            if (isNumber) {
                sum++;
            }
        }
        return sum;
    }

    private static int exception(List<String> list) {
        int sum = 0;

        for (String s : list) {
            try {
                Integer.parseInt(s);
                sum++;
            } catch (NumberFormatException e) {
            }
        }
        return sum;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T01:18:57.960

我还没有技术答案，但我可以写一些代码看看。我不认为正则表达式是将字符串转换为数字的方法。在许多情况下，它们可以更有效，但如果写得不好，它会很慢。

但是我可以问一下，你为什么不只是使用： `Integer.parseInt("124")`？这将引发 NumberFormatException。应该能够处理它，并且它将对数字的检测留给核心 Java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T01:43:41.837

关于幕后的正则表达式......

有限**状态机 (FSM)**等价于正则表达式。FSM 是一台可以识别语言的机器（在您的情况下为数字）。FSM 具有字母表、状态、初始状态、N 个最终状态以及从一种状态到另一种状态的转换函数。字符串需要包含在字母表中（例如 ASCII）。FSM 从初始状态开始。当您输入一个字符串时，它会根据函数（状态，字符）=>状态从一个状态移动到另一个状态，逐个处理字符。当它达到最终状态时，您知道您的字符串是否为数字。

有关更多信息，请参阅[FSM](http://en.wikipedia.org/wiki/Finite-state_machine#FSM_logic)并参阅[Automata-based_programming](http://en.wikipedia.org/wiki/Automata-based_programming)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T01:45:18.343

I don't see how it could get any simpler or easier to read than:

`Integer.parseInt()`

or

`Double.parseDouble()`

They do exactly what you describe including throw an Exception for invalid input.

Regarding performance: I would expect a regex to be less efficient than the above.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T05:04:24.157

只是我的 5 美分 :) 一般来说，正则表达式语言不仅仅用于解析整数或字符串，它是一个非常强大的工具，可以识别任何“正则表达式”。它让我想起了我的大学时光（还记得 Automatas Theory 课程吗？:)，但这里的[链接](http://en.wikipedia.org/wiki/Regular_language)描述了常规语言的真正含义

现在由于它构建 FSM 引入了一些开销，所以对于`Integer.parseInt`正则表达式引擎来说可能不是一个很好的替代品，而且 Java 引入了更具体的 API。然而，正则表达式在处理更复杂的表达式以及我们有很多表达式时有好处。

必须明智地使用正则表达式。必须始终编译模式（否则不能有效地重用，因为每次编译模式都会消耗性能）

我建议在更复杂的输入上运行测试，看看会发生什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T01:39:12.667

具体回答你的问题：

为什么不对一些复杂的文本应用正则表达式模式匹配，然后尝试自己编写相同的匹配代码。

看看哪个更快。

答：正则表达式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T01:24:24.943

最后，它确实在遍历字符串并检查每个字符，试图为提供的模式找到匹配项。此外，它使用回溯（如果有很多可能匹配的方法，引擎会尝试所有方法），这可能会导致某些不寻常情况下的性能非常差（您不太可能遇到这种情况，但理论上可能）。在最坏情况下，java 正则表达式引擎的性能是 O(2 ^N )，其中 N 是输入字符串的长度。

有一些算法可以实现更快的模式匹配，提供 O(N) 性能，但与 Java 正则表达式相比，功能更少。

[这](http://swtch.com/~rsc/regexp/regexp1.html)是一篇详细讨论这个问题的文章。

但在大多数情况下，正则表达式引擎不会成为您应用程序的性能瓶颈。它足够快，所以一般不用担心它，除非你的分析器指向它。它提供了算法的声明性描述，这非常有用，因为几乎总是迭代算法实现会更冗长且可读性更低。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-09T01:20:41.587

好吧，很难确定，但在一般情况下，与显式字符检查相比，正则表达式不太可能更有效。RE 是最终状态自动机，因此自动机的构建和维护有一些开销。在我的实践中，显式代码总是比正则表达式更快（因此更有效）。

但这是两难的。从交付时间的角度来看，正则表达式几乎总是更有效，并且*在正确使用时*更具可读性。这是另一个困境。我很少看到正则表达式的*正确用法......*

在您的情况下，我建议使用番石榴库：

```
boolean isValid = DIGIT.matchesAllOf("1234"); 
```

# android - WebtrendsActivity 和 Fragments？

> ID：11875434
> 
> 赞同：1
> 
> 时间：2012-08-09T01:08:25.523
> 
> 标签：android, webtrends

有谁知道 WebtrendsActivity 是否支持 Fragments？是否有扩展 FragmentActivity 的版本。实际上是android.support.v4.app.FragmentActivity？（兼容性库）。

# jquery - 无法从嵌套的 ul li 中仅获取第一级 li

> ID：11875438
> 
> 赞同：0
> 
> 时间：2012-08-09T01:09:09.477
> 
> 标签：jquery, css, animation, accordion

我在 jsfiddle 上有这个，[示例](http://jsfiddle.net/sBssF/6/)

我怎样才能让这个只点击“手风琴”类并切换？单击嵌套的 li(testsubmenu) 时，它当前正在切换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:23:56.077

```
$('.accordion>a').click(function() {
    $('#nav > li:not(.accordion)').slideToggle();
    $('.subnav li').fadeToggle();
}); 
```

[jsfiddle](http://jsfiddle.net/unloco/sBssF/21/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:15:08.560

添加`$('.subnav li').bind("click",function(){ return false;});`

[编码](http://jsfiddle.net/2gHCw/)

```
 $('.accordion:not(.accordion li)').click(function() {
        $('#nav > li:not(.accordion)').slideToggle();
        $('.subnav li').fadeToggle();
    });
 $('.subnav li').bind("click",function(){ return false;}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T01:15:26.647

`a`仅在单击实际链接而不是整个链接时才执行操作`li`

```
$('.accordion:not(.accordion li) > a').click(function() {
    $('#nav > li:not(.accordion)').slideToggle();
    $('.subnav li').fadeToggle();
}); 
```

[http://jsfiddle.net/sBssF/6/](http://jsfiddle.net/sBssF/6/)

# iphone - 我的 iPhone 应用程序中没有调用 fbDidLogin

> ID：11875441
> 
> 赞同：0
> 
> 时间：2012-08-09T01:10:34.903
> 
> 标签：iphone, facebook, opengl-es

我有一个 iPhone 应用程序，我可以通过 safari 通过 Facebook 登录，然后它重定向回我的应用程序，但没有调用 fbDidLogin 并且没有调用 fbDidNotLogin。

我可以检测到我的应用何时重新获得焦点，但当时 m_pFacebook.accessToken 仍然为空。

我无法更改 Facebook.m，因为我没有。我的项目正在使用 Facebook 静态库，我不完全确定这意味着我们使用 Facebook.h 而不是 Facebook.m

```
- (void)attempt
{
m_pFacebook = [[Facebook alloc] initWithAppId:kAppId andDelegate:self];

    if (![m_pFacebook isSessionValid])
    {
        NSLog( @"\nFacebook session is not valid" );

        [m_pFacebook authorize:nil];
    }
    else
    {
        NSLog( @"\nFacebook session is valid" );
    }

}

// Pre iOS 4.2 support
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url
{
    NSLog( @"\nhandleOpenURL:%@", url );
    return [m_pFacebook handleOpenURL:url]; 
}

// For iOS 4.2+ support
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    NSLog( @"\nopenURL:%@", url );
    return [m_pFacebook handleOpenURL:url]; 
}

- (void)fbDidLogin
{
    NSLog(@"\nFacebook Did Log In");
    NSLog(@"\nAccess Token is %@", m_pFacebook.accessToken );
    NSLog(@"\nExpiration Date is %@", m_pFacebook.expirationDate );
}

- (void)fbDidNotLogin:(BOOL)cancelled
{
    NSLog(@"\n Facebook Failed to log in");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:47:06.963

确保您的视图控制器符合`<FBRequestDelegate>`协议。

# macos - CMake：FIXUP_BUNDLE 在 OS X 上创建空框架

> ID：11875442
> 
> 赞同：4
> 
> 时间：2012-08-09T01:10:43.117
> 
> 标签：macos, frameworks, cmake, bundle

我正在尝试使用 CMake 函数 FIXUP_BUNDLE 来修复应用程序包，但我收到了安装时警告，并且由于缺乏更好的术语，而不是修复包。

安装的包具有正确的结构，但它使用的框架没有正确复制。只有每个框架的目录结构被复制，而不是实际的共享库二进制文件。例如，我的包使用 SFML 2.0 的系统框架。请注意，我使用的所有 SFML 框架都存储在`/Library/Frameworks`. 以下是我`MyApp.app/Contents/Frameworks/`对这个 SFML 组件的了解：

```
sfml-system.framework/
    Versions/
        2.0.0/ 
```

这就是我所得到的，只是目录。实际的 SFML System 框架具有如下结构：

```
sfml-system.framework/
    Resources  (this is a symlink)
    sfml-system  (this is a symlink)
    Versions/
        2.0.0/
            Resources/
                Info.plist
            sfml-system  (this is the actual library binary)
        Current  (this is a symlink) 
```

在我的项目中，可执行文件都具有相同的格式，因此我有一个小功能可以使用这种通用格式添加它们。该函数只是添加可执行文件，设置要链接的库，并在安装时安装应用程序包并在其上调用 FIXUP_BUNDLE。这是该功能：

```
FUNCTION(ADD_CUSTOM_EXECUTABLE TARGET HEADERS SOURCES DEPENDENCIES)
    ADD_EXECUTABLE(${TARGET} MACOSX_BUNDLE ${HEADERS} ${SOURCES} ${ARGN})
    TARGET_LINK_LIBRARIES(${TARGET} ${DEPENDENCIES})

    INSTALL(TARGETS ${TARGET} BUNDLE DESTINATION .)

    INSTALL(CODE "
        INCLUDE(BundleUtilities)
        FIXUP_BUNDLE(${CMAKE_INSTALL_PREFIX}/${TARGET}.app \"\" \"\") 
    ")
ENDFUNCTION(ADD_CUSTOM_EXECUTABLE) 
```

我没有为 FIXUP_BUNDLE 的 LIBS 或 DIRS 参数传递任何内容，因为我目前没有使用任何插件。ALL_BUILD 项目在 Xcode 中构建良好，安装项目运行没有失败，但是对于通过`otool -L`. 这是一个示例，显示了 SFML 系统框架的警告开始，几乎在 FIXUP_BUNDLE 被调用之后：

```
fixup_bundle
    app='/Users/user/Desktop/SFML_Testing_BUILD/dist/MyApp.app'
    libs=''
    dirs=''
fixup_bundle: preparing...
warning: embedded item does not exist 'Users/user/Desktop/SFML_Testing_BUILD/
dist/MyApp.app/Contents/Frameworks/sfml-system.framework/Versions/2.0.0/
sfml-system'
warning: cannot resolve item '@executable_path/../Frameworks/
sfml-system.framework/Versions/2.0.0/sfml-system'

possible problems:
    need more directories?
    need to use InstallRequiredSystemLibraries?
    run in install tree instead of build tree? 
```

不久之后，像这样的东西：

```
warning: target '@executable_path/../Frameworks/sfml-system.framework/Versions/
2.0.0/sfml-system' is not absolute...
warning: target '@executable_path/../Frameworks/sfml-system.framework/Versions/
2.0.0/sfml-system' does not exist...
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/
usr/bin/otool: can't open file: @executable_path/../Frameworks/
sfml-system.framework/Versions/2.0.0/sfml-system (No such file or directory)
otool: can't open file: @executable_path/../Frameworks/
sfml-system.framework/Versions/2.0.0/sfml-system
(No such file or directory) 
```

有谁知道如何解决这个问题？我在互联网上搜寻解决方案，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:35:40.260

如果您尝试拉入的框架位于“/Library/Frameworks”中，则假定它是一个“系统库”，实际上不需要拉入...假设是，如果您依赖于已安装的系统库（而不是您自己在某个地方构建的系统库），那么您的最终用户也将拥有相同的已安装系统库。（在安装您的应用程序之前，您必须要求他们安装 SFML。）

我们这样做是为了阻止人们意外地在他们的捆绑软件中包含他们在法律上不应该包含的系统框架。捆绑 SFML 框架是否合法对您来说是一个严格的负担。

如果这种假设在您的情况下是错误的，并且您希望将 SFML 内容视为“非系统”，您可能必须自定义 BundleUtilities 来处理它。

不过，首先尝试这个会更容易：首先编写一个脚本，将它们复制到您的构建树包中，然后安装该包，并在尝试以下自定义覆盖之前查看 fixup_bundle 是否可以正常工作。

如有必要，您可以尝试如下自定义：

首先，将带有内联代码的 install(CODE 片段更改为 install(SCRIPT 调用，该调用调用配置/生成的脚本文件。否则，将有太多代码放入该块中，并且所有转义都会变得讨厌。

接下来，在脚本中包含 BundleUtilities 之前，为 GetPrerequisites gp_resolved_file_type 函数添加一个覆盖函数。这就是 BundleUtilities 用来声明库是否是“系统”库的方法。BundleUtilities 需要的每个文件类型解析都会调用名为 gp_resolved_file_type_override 的覆盖函数。您可以编写它以简单地将库名称与字符串“sfml”匹配，如果匹配，则将类型声明为“其他”，您的声明将获胜。

之后，上述一些警告应该会消失，但您可能会遇到其他需要进一步定制的问题。

这有点讨厌和复杂，但应该可以使用现有的 CMake ......

然而：

BundleUtilities 为系统库引入任何东西的事实是一个错误，应该在 CMake 错误跟踪器中报告为错误：[http ://www.cmake.org/Bug](http://www.cmake.org/Bug)

# apache-pig - 迭代数据包中的 orver 元组

> ID：11875445
> 
> 赞同：1
> 
> 时间：2012-08-09T01:11:19.620
> 
> 标签：apache-pig

我有以下格式的关系 A=(charrarry,{}) 其中 A 是数据包组。每个数据包都有一些元组，每个元组有五个字段。如何遍历数据包的元组，以及如何根据第一个元组字段对每个组进行排序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:04:02.040

如果你有这样的事情：
`(all,{(1.0,10.0),(4.0,12.0),(2.0,13.0),(3.0,14.0)})`

你不需要显式地遍历整个包，你可以像这样对它进行排序：
`data = LOAD 'cor.txt' AS (series1:double, series2:double);`
`rel = GROUP data ALL;`
`--Now rel has the data as shown above`
`rel = FOREACH rel GENERATE FLATTEN(data);`
`rel = ORDER rel by data::series1;`
`dump rel;`

输出：
`(1.0,10.0)`
`(2.0,13.0)`
`(3.0,14.0)`
`(4.0,12.0)`

如果您有其他级别的嵌套，请`FLATTEN`适当使用。

（你的问题陈述中的一个例子会让每个人都更容易！）

# java - 从文本文件中读取数据并求和数字

> ID：11875446
> 
> 赞同：2
> 
> 时间：2012-08-09T01:11:30.657
> 
> 标签：java, input, io, text-files

我想从一个充满整数的文本文件中读取数据，并让程序在对它们求和时将这些整数打印到屏幕上。这应该不难，但我想不通！！！

这是极其简化的文本文件：

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20 
```

这是我应该工作的代码：

```
import java.util.*;
import java.io.File;
import java.io.IOException;

public class ReadFile
{
    public static void main(String[] args)
    throws IOException
    {
        Scanner textfile = new Scanner(new File("Some_Numbers.txt"));

        filereader(textfile);
    }   

    static void filereader(Scanner textfile)
    {
        int i = 0;
        int sum = 0;

        while(i <= 19)
        {
            System.out.println(textfile.nextInt());
            sum = sum + textfile.nextInt();
            i++;
        }
    }

} 
```

最后，这是我得到的输出：

```
1
3
5
7
9
11
13
15
17
19
Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Scanner.java:838)
    at java.util.Scanner.next(Scanner.java:1461)
    at java.util.Scanner.nextInt(Scanner.java:2091)
    at java.util.Scanner.nextInt(Scanner.java:2050)
    at ReadFile.filereader(ReadFile.java:23)
    at ReadFile.main(ReadFile.java:12) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T16:59:20.977

您永远不会递增`i`，因此 while 循环会继续超出文件末尾。至于求和，做这样的事情。

```
static void addstuff(Scanner aScanner) {
        int sum = 0;

        while (aScanner.hasNextInt()) {
            sum += aScanner.nextInt();
        }

        System.out.println(sum);
} 
```

这将一直运行，直到[hasNextInt()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextInt%28%29)返回 false，当扫描仪看到的下一个项目不是整数时会发生这种情况。这可能是非数字输入或文件结尾。这意味着您不再局限于 25 个整数 - 它会在停止之前尽可能多地读取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T16:59:38.960

因为你从不递增`i`，所以它永远不会从 0 改变，所以它总是小于 25。这意味着它会在完成 25 个元素后尝试再次查看，但没有第 26 个，所以有一个例外。

`while`我建议使用循环而不是`for`循环。

总结它们，而不是打印出来，只需添加到累加器中。

```
int accumulator = 0;
for(int i = 0; i < 25; i++)
    accumulator += aScanner.nextInt();

System.out.println(accumulator); 
```

应该打印出总和。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T01:15:41.530

您在循环中调用 textfile.nextInt() 两次。尝试：

```
static void filereader(Scanner textfile)     
{         
    int i = 0;         
    int sum = 0;          
    while(i <= 19)         
    {       
        int nextInt = textfile.nextInt();          

        System.out.println(nextInt);             
        sum = sum + nextInt;
        i++;         
    }     
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T01:25:27.063

除了 lockstock 的答案之外，您可能还需要考虑为您的 while 循环添加 textfile.hasNext() 或 textfile.hasNextInt() 。

```
static void filereader(Scanner textfile) {
int sum = 0;          
while(textfile.hasNextInt()) {
    int nextInt = textfile.nextInt();
    System.out.println(nextInt);
    sum += nextInt;
} 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T17:02:02.747

你将不得不做以下事情

```
 while(i < 25)
    {
        System.out.println(aScanner.nextInt());
        i++ ;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-08T17:04:41.500

它会引发异常，因为您不会`i`在循环中递增。如果输入文件中的整数个数未知，您可以使用该[`Scanner.hasNextInt()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextInt%28%29)方法检查下一个整数是否存在（或仅用于`hasNext()`检查 EOF）。

您可以像下面的代码片段一样对数字求和：

```
 ...
    int sum = 0;
    while(i++ < 25)
    {
        sum += aScanner.nextInt();
    } 
```

或者

```
 ...
    int sum = 0;
    while(aScanner.hasNextInt())
    {
        sum += aScanner.nextInt();
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-08T18:48:39.550

您收到错误（异常），因为您的文件有非常大的数字，不适合**Integer**类型。你应该使用**Long**。

所以，使用:`aScanner.nextLong()`而不是`aScanner.nextInt()`.

**编辑：**您还应该将`sum`变量的类型从更改`int`为`long`。

您的代码将正常工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-08T17:07:33.563

**1.**你`i`的**永远不会增加。**

**2.**你**没有**把数字相加。

**3.** `addstuff(diskScanner)`是 a `static memeber`，所以**用带点运算符的类名来调用它。**

**例如：**

```
Add.addstuff(diskScanner);

   static void addstuff(Scanner aScanner)
{
    int i = 0;
    long l = 0;

    while(i < 25)
    {
        l = i + l;
        i++;
    }

    System.out.println(l);

} 
```

# google-apps-script - 回调时不再能够访问 FlexTable 元素

> ID：11875447
> 
> 赞同：1
> 
> 时间：2012-08-09T01:11:47.307
> 
> 标签：google-apps-script

[这里展示](https://sites.google.com/site/appsscripttutorial/miscellaneous/creating-form-elements-dynamically-using-google-apps-script-gas)了正在发生的事情的最佳示例。我的代码与该链接中使用的代码非常非常相似（我基于它）。

加载该站点并单击右侧的“+”按钮。您将收到一条错误消息，指出“遇到错误：无法将 NaN 转换为 .”。

我已将问题缩小到 _addRemoveRow 函数。最近似乎在回调中访问 FlexTable 属性的方式发生了一些变化。我的代码和我链接的网站昨晚运行良好。今天，我得到了错误。

我查看是否有任何更改日志/发行说明可以解释这一点，但空手而归。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:49:59.657

您遇到的问题似乎更可能与[我的问题中描述](https://stackoverflow.com/questions/11875398/how-to-use-tags-on-widgets-without-names-in-gas-ui)的 TAG 值有关，并附有示例测试代码。

它发生在 +-10 小时前，我们应该按照 Henrique 的建议[在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上提出问题，如果在接下来的几个小时内没有其他评论，我打算这样做，但如果这真的让你很烦，请考虑早点这样做； -)

# android - 如何在android上显示从我的位置到目标位置的路线方向

> ID：11875448
> 
> 赞同：3
> 
> 时间：2012-08-09T01:11:54.583
> 
> 标签：android, google-maps, routes

我想显示从我的位置到目标位置的方向，我为目标位置做了一个微调器，然后当我点击它时，有一条从我的位置到那里的路线..但是有一个我无法修复的错误。 ..有没有人可以帮我展示我的错误在哪里并帮助我解决它..？因为我需要它来做作业..

这是我的源代码：

```
public class MapRouteActivity extends MapActivity {
private SQLiteDatabase db = null;
private Cursor tmiiCursor = null;
private DataTmii datatmii = null;
private LinearLayout Linear01;
private Spinner dari,ke;
public static final String ID = "id";
public static final String KODE = "kode";
public static final String OBJ = "obj";
public static final String KET = "ket";
public static final String LAT = "lat";
public static final String LNG = "lng";

    static final String[] TMII= new String[] {"Anjungan","Museum","Tempat Ibadah","Taman","Wahana Rekreasi","Kereta Gantung","SHS-23 Aeromovel Indonesia","Kereta Api Mini","Mobil Keliling"
    ,"Perahu Angsa","Sepeda Keliling","Graha Wisata Remaja","Hotel Desa Wisata","Puri Caping Gunung","Pondok Pecel Madiun","Pasar Tiban","Gerbang Kalamakara"};

static final String[] ANJUNGAN= new String[] {"Anjungan NAD","Anjungan Sumatra Utara","Anjungan Sumatra Barat","Anjungan Sumatra Selatan","Anjungan Kepulauan Riau","Anjungan Jambi","Anjungan Bengkulu","Anjungan Riau","Anjungan Bangka Belitung","Anjungan Lampung","Anjungan Banten"
    ,"Anjungan DKI Jakarta","Anjungan Jawa Barat","Anjungan Jawa Tengah","Anjungan DI Yogyakarta","Anjungan Jawa Timur","Anjungan Bali","Anjungan Nusa Tenggara Barat","Anjungan Nusa Tenggara Timur","Anjungan Kalimantan Barat","Anjungan Kalimantan Selatan","Anjungan Kalimantan Timur"
    ,"Anjungan Kalimantan Tengah","Anjungan Sulawesi Utara","Anjungan Gorontalo","Anjungan Sulawesi Tengah","Anjungan Sulawesi Barat","Anjungan Sulawesi Tenggara","Anjungan Maluku","Anjungan Maluku Utara","Anjungan Papua Barat","Anjungan Papua","Anjungan Sulawesi Selatan"};

static final String[] MUSEUM= new String[] {"Museum Indonesia","Museum Asmat","Museum Pusaka","Museum Timor Timur","Museum Penerangan","Museum Perangko Indonesia","Museum Keprajuritan Indonesia","Museum Olahraga"
    ,"Museum Fauna Komodo Indonesia","Museum Serangga","Museum Minyak Gas & Bumi","Museum Listrik dan Energi Baru","Museum Telekomunikasi","Museum Bayt Al Qur'an & Museum Istiqlal","Museum Museum Purna Bhakti Pertiwi","Museum Transportasi",};

static final String[] TEMPATIBADAH= new String[] {"Masjid Pangeran Diponegoro","Gereja Katolik Santa Catharina","Gereja Kristen Protestan Haleluya","Pura Penataran Agung Kertabhumi","Wihara Arya Dwipa Arama","Sasono Adiroso Pangeran Sambernyowo","Klenteng Kong Miao"};    

static final String[] TAMAN= new String[] {"Taman Prasasti APEC","Taman Reptilia","Taman Akuarium Air Tawar","Monumen Persahabatan Negara Non Blok","Taman Budaya Tionghoa","Taman Melati"
    ,"Taman Kupu-Kupu","Taman Apotik Hidup","Taman Bekisar","Taman Burung","Taman Bunga Keong Mas","Taman Kaktus"};

static final String[] REKREASI= new String[] {"Teater Tanah Airku","Desa Seni","Sasana Kriya","Snowbay","Istana Anak Indonesia","Pusat Peragaan IPTEK"
    ,"Pemancingan Telaga Mina","Teater IMAX Keong Mas","Teater 4 Dimensi","Balon Udara Raksasa","Pasar Buku Langka"};

String loadata;
String dlat = "";
String dlng = "";
String klat ="";
String klng ="";
String spin_dari,spin_ke;

    TextView textView, keterangan;
    LinearLayout linearLayout;
    MapView mapView;
    View view;
    private Road mRoad;
    double ke_lat, ke_lng, dari_lat, dari_lng;

    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            ProgressDialog myProgressDialog = ProgressDialog.show(MapRouteActivity.this, "Loading", "Mohon Tunggu...!!!", true);
            new Thread() { 
                  public void run() { 
                       try{ 
                         loadata = ListPeta.petapa;
                        datatmii = new DataTmii(MapRouteActivity.this);
                        db = datatmii.getWritableDatabase();
                        datatmii.createTable(db);
                        datatmii.generateData(db);   
                       } catch (Exception e) {  } 
                       // Dismiss the Dialog 
                  } 
             }.start();
             myProgressDialog.dismiss();
             setContentView(R.layout.rutemap);

            ke = (Spinner) findViewById(R.id.spin_ke);
            if (loadata=="tmii"){
            ArrayAdapter adapter_ke = new ArrayAdapter(this,android.R.layout.simple_spinner_item, TMII);
            adapter_ke.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ke.setAdapter(adapter_ke);
    }
            else if (loadata=="anjungan"){
            ArrayAdapter adapter_ke = new ArrayAdapter(this,android.R.layout.simple_spinner_item, ANJUNGAN);
            adapter_ke.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ke.setAdapter(adapter_ke);
    }
            else if (loadata=="museum"){
            ArrayAdapter adapter_ke = new ArrayAdapter(this,android.R.layout.simple_spinner_item, MUSEUM);
            adapter_ke.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ke.setAdapter(adapter_ke);
    }
            else if (loadata=="tempatibadah"){
            ArrayAdapter adapter_ke = new ArrayAdapter(this,android.R.layout.simple_spinner_item, TEMPATIBADAH);
            adapter_ke.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ke.setAdapter(adapter_ke);
    }
            else if (loadata=="taman"){
            ArrayAdapter adapter_dari = new ArrayAdapter(this,android.R.layout.simple_spinner_item, TAMAN);
            adapter_dari.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            dari.setAdapter(adapter_dari);
            ArrayAdapter adapter_ke = new ArrayAdapter(this,android.R.layout.simple_spinner_item, TAMAN);
            adapter_ke.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ke.setAdapter(adapter_ke);
    }
        else if (loadata=="rekreasi"){
            ArrayAdapter adapter_ke = new ArrayAdapter(this,android.R.layout.simple_spinner_item, REKREASI);
            adapter_ke.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            ke.setAdapter(adapter_ke);
        }
    }

    public void Rutekan(final View view){
        final ProgressDialog myProgressDialog = ProgressDialog.show(MapRouteActivity.this, "Loading", "Mohon Tunggu...!!!", true);
        new Thread() { 
              public void run() { 
                   try{
                       Thread.sleep(1000);
                       spin_ke = ke.getSelectedItem().toString();

                       tmiiCursor = db.rawQuery("SELECT ID, OBJ, KET, LAT, LNG "
                               + "FROM tmii where OBJ='" + spin_ke
                               + "' ORDER BY OBJ", null);
                       if (tmiiCursor.moveToFirst()) {
                           klat = tmiiCursor.getString(3);
                           klng = tmiiCursor.getString(4);
                           for (; !tmiiCursor.isAfterLast(); tmiiCursor.moveToNext()) {
                               klat = tmiiCursor.getString(3);
                               klng = tmiiCursor.getString(4);
                           }
                       }
                       ke_lat = Double.parseDouble(klat);
                       ke_lng = Double.parseDouble(klng);

                       double toLat = ke_lat, toLon = ke_lng;
                       String url = RoadProvider.getUrl(toLat, toLon);
                       InputStream is = getConnection(url);
                       mRoad = RoadProvider.getRoute(is);
                       mHandler.sendEmptyMessage(0);
                   } catch (Exception e) {  } 
                   // Dismiss the Dialog
                   myProgressDialog.dismiss(); 
              } 
         }.start();
         Linear01.setVisibility(view.GONE);
    }

    public static void tampilDriveMap(double userLat, double userLng,
            double obLatitude, double obLongitude) {
            // TODO Auto-generated method stub
            Uri uri = Uri.parse("http://maps.google.com/maps?&saddr="+userLat+","+userLng+"&daddr="+obLatitude+","+obLongitude+"");
            Intent i_drive_map = new Intent(Intent.ACTION_VIEW,uri);
            startActivity(i_drive_map);
    } 
```

如果有人可以帮助我，我会很高兴并感激不尽...谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:23:30.597

请检查以下链接...

[在谷歌地图上绘制路线，android](https://stackoverflow.com/questions/5089351/to-draw-route-on-google-maps-android)

[如何在Android上的两个地理点之间绘制路线](https://stackoverflow.com/questions/2125357/how-to-draw-a-route-between-two-geopoints-on-the-android)

[http://djsolid.net/blog/android---draw-a-path-array-of-points-in-mapview](http://djsolid.net/blog/android---draw-a-path-array-of-points-in-mapview)

它的示例代码如何在地图上绘制路线...

谢谢

# ruby-on-rails - 让 Rails 应用程序在服务器上触发 AppleScript

> ID：11875449
> 
> 赞同：0
> 
> 时间：2012-08-09T01:11:58.597
> 
> 标签：ruby-on-rails, applescript

这似乎是一个奇怪的问题，但我想知道是否有一种首选或已建立的方法可以让 Rails 应用程序在服务器上执行 AppleScript？

到目前为止，我一直在让应用程序向服务器发送电子邮件，脚本会对此做出响应，但感觉不够健壮。

有任何想法吗？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:16:31.333

```
puts `/path/to/your/script` 
```

这只会在本地工作。如果您想远程做某事，您需要设置 ssh 并通过 ssh 调用进行调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:21:42.487

总是可以创建一个 shell 脚本并通过 执行它`ssh`，但是恕我直言，保证运行一个 shell 脚本并检索 shell 执行结果可能是一场噩梦。

有几个 gem 可以执行 AppleScript，因此，如果我需要稳健地执行 AppleScript，我将在远程端创建一个用 Rails 编写的服务器，并使用 REST 启动服务器。

而且，当然，出于安全原因，我**永远不会**通过 REST 调用传递脚本。我将一一创建程序。

# sql-server - Wso2 DSS 和 SQL Server exec 存储过程

> ID：11875452
> 
> 赞同：0
> 
> 时间：2012-08-09T01:12:17.073
> 
> 标签：sql-server, stored-procedures, wso2

当我放入 WSO2 查询以执行简单的存储过程（sp_xxx exec）时，调用服务时出现错误，但当我放入 SQL SELECT 时，它工作正常。有谁知道为什么？

这是错误日志：

```
[2012-08-09 09:01:55,071] ERROR {org.apache.axis2.transport.http.AxisServlet} -  
java.lang.AbstractMethodError
        at org.apache.commons.dbcp.DelegatingResultSet.isClosed(DelegatingResultSet.java:688)
        at org.apache.commons.dbcp.DelegatingResultSet.isClosed(DelegatingResultSet.java:688)
        at org.wso2.carbon.dataservices.core.description.query.SQLQuery.processStoredProcQuery(SQLQuery.java:904)
        at org.wso2.carbon.dataservices.core.description.query.SQLQuery.runQuery(SQLQuery.java:2071)
        at org.wso2.carbon.dataservices.core.description.query.Query.execute(Query.java:252)
        at org.wso2.carbon.dataservices.core.engine.CallQuery.execute(CallQuery.java:185)
        at org.wso2.carbon.dataservices.core.engine.CallQueryGroup.execute(CallQueryGroup.java:110)
        at org.wso2.carbon.dataservices.core.description.operation.Operation.execute(Operation.java:71)
        at org.wso2.carbon.dataservices.core.engine.DataService.invoke(DataService.java:592)
        at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.execute(DSOMDataSource.java:99)
        at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.serialize(DSOMDataSource.java:110)
        at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.internalSerialize(OMSourcedElementImpl.java:691)
        at org.apache.axiom.om.impl.util.OMSerializerUtil.serializeChildren(OMSerializerUtil.java:563)
        at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:875)
        at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally(SOAPEnvelopeImpl.java:283)
        at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize(SOAPEnvelopeImpl.java:245)
        at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:193)
        at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.sendUsingOutputStream(CommonsHTTPTransportSender.java:409)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:286)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.receivers.AbstractInOutSyncMessageReceiver.invokeBusinessLogic(AbstractInOutSyncMessageReceiver.java:45)
        at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
        at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
        at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
        at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source) 
```

有没有人有任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:44:32.627

您的问题很可能与此处报告的相同：[https](https://wso2.org/jira/browse/DS-550) ://wso2.org/jira/browse/DS-550 。这已在即将发布的 DSS 3.0.0 版本中得到修复。原因是，您使用的是 JDBC3 驱动程序，但在 DSS 2.6.3 中，我们使用 JDBC4 (Java6) 功能，因此您应该使用 JDBC4 驱动程序。但看起来，到目前为止我们专门使用的唯一 JDBC4 功能（可能会给旧驱动程序带来问题）是 ResultSet.isClosed，我们在新版本中为此提供了解决方法。如果您要修补数据服务核心 jar，则该补丁就在那里，否则，只需尝试使用 JDBC4 驱动程序。

干杯，安佳娜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:06:53.270

您应该能够使用 WSO2 数据服务服务器成功执行存储过程。当您遇到上述问题时，能否将打印在控制台或 DSS_HOME/repository/logs/wso2carbon.log 中的错误日志（如果有）发布？

问候， 普拉巴斯

# jquery - 动态菜单链接替换 Jquery

> ID：11875454
> 
> 赞同：-3
> 
> 时间：2012-08-09T01:12:28.197
> 
> 标签：jquery, menu

我需要隐藏所有列表元素，但根据导航栏按下的方向或按钮仅在特定时间显示一个。

我试过这个：

`$('ul li').hide().first().show();`

这向我展示了列表中的第一个元素。

但是现在我需要通过我不知道该怎么做的导航来控制列表。

基本上，我需要一个或多或少具有这种布局的菜单：

```
< - prev           LINK1            next - > 
```

所以基本上，id 有一个无序列表，所以 html 会是这样的

```
<ul>
    <li>LINK1</li>
    <li>LINK2</li>
    <li>LINK3</li>
</ul> 
```

所以，我一次只需要显示一个，一旦按下下一个或上一个按钮，如果它在结尾或开始，它将“循环通过”列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:23:55.967

也许这些代码可以帮助你 [http://jsfiddle.net/sechou/UmRph/7/](http://jsfiddle.net/sechou/UmRph/7/)

```
$("li").hide();   // hide every element first
$("li:first").show(); // only display the first one
var idx = 0;
$("nextbtn").click(function(){
     if(idx == $("li").size() -1)
          idx =0;
     else
          idx++;

     $("li").hide();
     $("li:eq("+ idx + ")").show();
});
$("prevbtn").click(function(){
     if(idx == 0)
          idx = $("li").size() -1;
     else
          idx--;

     $("li").hide();
     $("li:eq("+ idx + ")").show();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T02:59:11.600

请，如果你要上传一些东西，请确保它是正确的。

根据我的经验，您的语法和拼写不正确，当事情出错时很难解决问题，谢谢您的帮助，经过大约 2 个小时的摆弄，我仍然设法让您的代码正常工作。 .

```
var elem = '#collList li';    
$(elem).hide();
$(elem + ":first").show();
var count = 0;
$('#nextBtn').click(function() {
    if (count == $(elem).size() - 1) {
        count = 0;
    }
    else {
        count++;
    }
    $(elem).hide();
    $(elem + ":eq(" + count + ")").show();
});
$('#prevBtn').click(function() {
    if (count == 0) {
        count = $(elem).size() - 1;
    }
    else {
        count--;
    }
    $(elem).hide();
    $(elem + ":eq(" + count + ")").show();
}); 
```

# java - 与 Eclipse 集成的“待办事项”/错误数据库

> ID：11875455
> 
> 赞同：2
> 
> 时间：2012-08-09T01:12:31.630
> 
> 标签：java, eclipse

## 环境

```
Language: Java
IDE: Eclipse
Source control: SVN 
```

## 客观的

从 Eclipse 中跟踪/管理错误/待办事项

## 当前解决方案

使用 Eclipse Java“任务标签”：

```
/instance/org.eclipse.jdt.coreorg.eclipse.jdt.core.compiler.taskTags=TODO,MUST,SHOULD,COULD,... 
```

并简单地利用链接到任务标签的 IDE 的自动任务创建。

## 所需的解决方案

与外部数据库一起工作并可以返回报告的东西，直接集成到 Eclipse 中用于编码部分，并且对于“服务器”部分是免费的

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:51:05.067

您可以运行自己的[Bugzilla](http://www.bugzilla.org/)服务器或使用托管的问题跟踪器服务。有许多这样的服务，其中许多为用户数量少的项目提供免费帐户。

对于 Eclipse 集成，您将需要使用[Mylyn](http://www.eclipse.org/mylyn/)。它有许多用于开源和商业问题跟踪服务器的连接器。您可以直接从 Eclipse 查询问题跟踪器以及创建和修改任务。

# python - 如何修复此 Python BadValueError（'需要属性 %s' % self.name）

> ID：11875459
> 
> 赞同：0
> 
> 时间：2012-08-09T01:13:49.860
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有这堂课：

```
class Contract(db.Model):
    book_number = db.IntegerProperty(required = True)
    initial_page = db.IntegerProperty(required = True)
    final_page = db.IntegerProperty(required = True)
    contract_type = db.StringProperty(required = True)
    parties = db.ListProperty(str)
    date = db.DateTimeProperty (required = True, auto_now = True, auto_now_add = True) 
```

在我的代码的这一行：

```
 contract.parties = old_parties.append([str(person_id), person_condition]) 
```

从这个块：

```
 (...)
        party = []
        contract_record = Contract(book_number = int(numBook),
                                   initial_page = int(numInitialPage),
                                   final_page = int(numFinalPage),
                                   contract_type = choosed_contract_type,
                                   parties = party)
        contract_record.put()
        contract_key = contract_record.key()
        contract_id = contract_record.key().id()

        submit_button = self.request.get('submit_button')

        if submit_button:
            if (person_name and valid_name(person_name)) and (user_SSN and valid_SSN(user_SSN)):
                person_record = Person(person_name = person_name,
                nacionality = user_nacionality,
                profession = user_profession,
                marital_status = user_marital_status,
                driver_license = int(user_driver_license),
                SSN = int(user_SSN),
                address = address)
                person_record.put()
                person_key = person_record.key()
                person_id = person_record.key().id()

                contract = Contract.get_by_id(contract_id)
                old_parties = contract.parties
                contract.parties = old_parties.append([str(person_id), person_condition])
                contract.put() 
```

我收到了这个错误：

```
 File "C:\Users\Py\Desktop\contract\main.py", line 351, in post
    contract.parties = old_parties.append([str(person_id), person_condition])
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 614, in __set__
    value = self.validate(value)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 3435, in validate
    value = super(ListProperty, self).validate(value)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 641, in validate
    raise BadValueError('Property %s is required' % self.name)
BadValueError: Property parties is required 
```

我的目标是：在其属性中创建一个`contract`带有空列表的对象。`parties`之后，我想以`[person_id, person_condition]`这种方式将新列表附加到该空列表中：`[ [person_id, person_condition], [person_id2, person_condition2],...]`

我想知道是什么导致了这个错误以及如何解决它以实现我的目标。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T01:16:21.487

我不确定这是否是导致您看到的 GAE 引擎的原因，但`append`会附加到*适当*的列表并返回 None。所以你想做`contract.parties.append([str(person_id), person_condition])`。你这样做的方式，你最终设置`contract.parties`为无。

# iphone - iOS：拍照或从库中选择

> ID：11875460
> 
> 赞同：4
> 
> 时间：2012-08-09T01:14:06.003
> 
> 标签：iphone, ios, ios5

我想从用户那里获取图像，如此处所示。

![在此处输入图像描述](../Images/a42cf0702e54d77ce5feeab3eb0c8565.png)

这看起来需要做很多工作：

*   查看设备是否有摄像头
*   create action sheet with appropriate options
*   将“拍照”和“从库中选择”翻译成我的应用支持的每种语言
*   寻找回应
*   使用选定的图像拾取方法调出图像拾取器
*   获取响应，从字典中提取图像
*   解雇选择器

所以问题是：首先，我是否遗漏了任何步骤？其次，我之前在其他应用程序中已经看到过数百次了，真的没有更快的方法吗？最重要的是，如果 SDK 中已经有标准命名和翻译，我不期待在我的项目中添加字符串。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-15T03:29:20.437

我创建了一个库来拍照或从库中选择作为对上述问题的回答并在以下位置为您分享：[https ://github.com/fulldecent/FDtake](https://github.com/fulldecent/FDTake)

到目前为止，这对照片很有用。[更新] 现在也做视频。

主页在：[https ://www.cocoacontrols.com/controls/fdtake](https://www.cocoacontrols.com/controls/fdtake)

# javascript - 如何根据搜索查询更改着陆页

> ID：11875464
> 
> 赞同：0
> 
> 时间：2012-08-09T01:14:49.883
> 
> 标签：javascript, html, search-engine

我希望能够根据
a) 是否通过搜索引擎访问登录页面上的某些元素
b) 使用了哪些搜索关键字

有没有办法可以根据这些标准更改目标网页上的特定元素或目标网页本身？如何？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:17:08.153

在服务器端，检测`Referer:`（原文如此）标头是否包含“google.com”和查询字符串“q”。如果是这样，则搜索项在`q`参数中。然后使用您正在使用的任何服务器端引擎来适当地修改页面。

除非您打算通过客户端脚本修改页面，否则这与 Javascript 几乎没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T17:42:36.427

这个问题有点老了，但我觉得我应该插话。当前的答案在如何在服务器级别获取参数方面非常正确，我可以看到通过 javascript 获取参数的价值，甚至更好地将所述变量传递给谷歌分析用于跟踪目的。至于更改内容，您希望尽可能快地执行此操作，以帮助保持较高的用户体验排名。

# javascript - javascript双函数执行

> ID：11875467
> 
> 赞同：0
> 
> 时间：2012-08-09T01:15:07.897
> 
> 标签：javascript, function, time

我有一个 Javascript 代码，每次按下按钮时都会执行一个函数，但是，我的硬件设置偶尔会发送双重输入（即按下按钮两次） - 当这种情况发生时，它们相隔几毫秒。是否可以限制 javascript 在 50 毫秒内执行两次函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T01:27:29.380

> 是否可以限制 javascript 在 50 毫秒内执行两次函数？

是的，您必须跟踪上次运行该函数的时间。就像是：

```
var lastTime = 0; 
function buttonPressed() {
    var now = new Date().getTime();
    if(now-lastTime > 50) {
       // do stuff
    }
    lastTime = now; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:42:07.657

对于更通用的解决方案，这是一个包装器，可以防止任何功能的“反弹”：

```
var preventBounce = function(fn, ms) {
    var _fn = fn;
    var _firedAt = false;
    var _ms = ms;
    return function() {
        var now = new Date().getTime();
        if(!_firedAt || (_firedAt + _ms) <= now) {
            _firedAt = now;
            return _fn.apply(this, arguments);
        }
    }
} 
```

这允许您创建一个新函数，如果在`ms`最后一次调用后的几毫秒内调用该函数，则该函数不会触发。

例如：

```
test = preventBounce(alert, 5000);
test('example'); // alerts "example"
test('example'); // no action
// ...wait 5 seconds
test('example'); // alerts "example" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T01:30:56.860

是的你可以。在您第一次单击（或按键）时设置一个标志。设置一个计时器来清除它。仅在未设置标志时继续您的按键或单击操作。

```
var within50ms = false;
function clicked()
{
    if(within50ms)
    {
        //the faulty click
    }
    else
    {
        //Go ahead
    }
    within50ms = true;
    var timer = setTimeout(function()
                           {
                               within50ms=false; 
                           }, 50);
}​ 
```

完整示例（真实演示的延迟为 500 毫秒）：http: [//jsfiddle.net/nivas/FFLGw/](http://jsfiddle.net/nivas/FFLGw/)

也就是说，这是您机器上的硬件问题，还是预期在每台机器上都会使用此应用程序/页面？

# c# - HTML 表单 - 如何处理输入的动态数量？

> ID：11875473
> 
> 赞同：0
> 
> 时间：2012-08-09T01:15:28.790
> 
> 标签：c#, html, asp.net-mvc

我有一个提交食谱的网页。成分有 5 个字段。如果配方需要超过 5 种成分，则有一个“添加另一种成分”按钮，并且一些 java 脚本会加载另一种成分输入供他们使用。
我不确定如何将这些数据正确地发布到我的后端，即 MVC4/C#。

我可以给他们所有相同的 id=ingredient 并将它们作为字符串 ingrdient[] 收集吗？或者当输入的数量可以改变时，获取表单输入的最佳实践是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:19:55.563

如果您使用方括号给出相同的名称，您应该能够在提交表单时将它们作为数组访问。

```
<input type="text" name="data[]" value=""> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T06:07:41.583

好的，这是一个示例：您可以使用这种方法：

```
 <div class="editor-field">
        <input type="text" name="MyModelArray[0].Sugar" value="" />
        <input type="text" name="MyModelArray[1].Tea" value="" />
        <input type="text" name="MyModelArray[0].Sugar" value="" />
        <input type="text" name="MyModelArray[1].Tea" value=""/>
    </div>
    <p>
        <input type="submit" value="Create" />
    </p> 
```

现在你可以在你的控制器中使用：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
namespace MvcApplication1.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(List<Ingredient> MyModelArray) //Put a breakpoint here to see 
        {
            return View();
        }
        [HttpPost]
        public ActionResult About(List<string> MyStringArray) //Use this if you don't want a model
        {
            return View();
        }
    }
    public class Ingredient
    {
        public string Sugar { get; set; }
        public string Tea { get; set; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T01:20:09.377

就 MVC4 而言，我不确切知道什么是最好的方法，但是您绝对可以为所有输入提供*相同的名称*，并且在提交后，您应该能够通过查看`HttpContext.Request.Params`对象在服务器端检索它们。

# jquery - 选择标签插入表单后，表的 ID 消失

> ID：11875474
> 
> 赞同：0
> 
> 时间：2012-08-09T01:15:36.050
> 
> 标签：jquery, http-post, jquery-events

我有一个发布到服务器的网页，服务器返回一些 HTML：

```
<select id="selectmodel"><option value="0">Model</option></select> 
```

该 HTML 进入 TD 标记 (#td2)，如下所示，看起来一切正常：

```
$.post("/cgi-bin/gcp.dll/modelx",{ manufacturerVal: window.manufacturerVal}, function(data) {$('#td2').html(data)}); 
```

但是，似乎其他一些 ID 消失了。当我在帖子之前尝试下面的行时，它工作正常。之后，它不再起作用：

```
$("#td5").click(function() {if (document.getElementById("table2")){alert("table2 exists")}else{alert("table2 does not exist")}}); 
```

TD 标签 (#td5) 位于 TD 标签 (#td2) 下方。当我在#table1（包含#td2 和#td5 的表）上尝试相同的测试时，它并没有消失。这是 HTML 的简化：

```
<table id="table1"><tr>
<td id="td2"> ... </td>   <-- dynamically created select tag goes here
<td id="td4"><table id="table2"><tr><td> ... </td></tr></td> 
<td id="td5"> ... </td>
</tr></table> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T05:08:06.460

按照上面评论中的[链接](http://www.bullionvault.com.au)后：

`table`with id在with id`table2`内。您将函数绑定到元素的更改事件。该功能包括这一行：`td``td4``change1()``select`

```
$("#td4").html("&nbsp;"); 
```

它用不间断的空格覆盖原始 html。所以第2个`alert`是正确的。`table2 does not exist`.

# php - Zend Studio 9 使用内置调试器出错 - mac os 10.8

> ID：11875477
> 
> 赞同：1
> 
> 时间：2012-08-09T01:15:51.380
> 
> 标签：php, macos, zend-studio, osx-mountain-lion

我刚刚升级到运行 Mountain Lion (OS 10.8) 的新 Mac，但在使用 CLI 正确调试 Zend Studio 9 的全新安装时遇到了问题。

请注意，我正在尝试使用工作室的内置调试器运行和调试，并且**没有**连接到远程服务器。当我尝试将脚本作为 CLI 应用程序运行时，出现以下错误：

```
Error launching '[NAME OF FILE]'
The session could not be started.
In order to generate debug information, please make sure the debugger is 
properly configured as a php.ini directive. 
```

在我的旧机器上，使用相同版本的 Zend Studio 运行 Snow Leopard，打开 CLI 支持并运行文件运行良好。同样，我没有使用外部版本的 PHP，因此不必配置 php.ini。

我尝试了各种重新启动和重新安装的方式，但仍然出现此错误。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:03:45.533

这是我为解决问题所做的工作：

1.  打开 Zend Studio
2.  运行 -> 调试配置
3.  选择您的 PHP CLI 应用程序（或创建一个新应用程序）
4.  在 PHP 脚本选项卡中选择备用 PHP
5.  单击已安装的 PHP...
6.  点击添加
7.  填写表格
    *   名称：本地 Zend PHP-CLI
    *   可执行路径：/usr/local/zend/bin/php-cli
    *   PHP ini 文件：/usr/local/zend/etc/php.ini
    *   SAPI 类型：CLI
    *   PHP 调试器：Zend 调试器
8.  点击确定
9.  点击确定
10.  在 PHP Script 选项卡中选择：Local Zend PHP-CLI
11.  点击应用

在我的工作室中，备用 PHP 现在显示为：Local Zend PHP-CLI (Zend 5.3.14 CLI)

Debug 按钮现在将开始一个真正的调试会话！

对于所有新的 CLI 调试配置，只需选择 Alternate PHP: Local Zend PHP-CLI

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T18:11:08.387

终于想通了。这是与 OSX Mountain Lion 的不兼容。当我能够让 Zend Studio 控制台显示实际的内部错误消息时，我发现 Zend Server 也存在同样的问题（我认为 Zend 在那里解决了这个问题）。

Zend Server 中的相同问题在此处描述： [http ://www.andrew-kirkpatrick.com/2012/07/apache-not-starting-in-zend-server-with-mac-os-x-10-8- mountain-lion-upgrade/](http://www.andrew-kirkpatrick.com/2012/07/apache-not-starting-in-zend-server-with-mac-os-x-10-8-mountain-lion-upgrade/) 您必须为 Zend Studio 而不是 Zend Server 运行的命令有点不同，因为 PHP 的内部版本深藏在 Zend Studio 文件结构中。而不是链接中的那个，它是这样的：

sudo cp /usr/lib/libxslt.1.dylib /Applications/Zend\ Studio.app/Contents/Resources/Java/plugins/com.zend.php.debug.debugger.macosx_5.3.18.v20120625/resources/lib/。

希望这可以帮助某人。

# java - Java 正则表达式字符串

> ID：11875481
> 
> 赞同：0
> 
> 时间：2012-08-09T01:16:46.387
> 
> 标签：java, regex

嗨，我是正则表达式的新手，我需要提取这个字符串：

`{"Name":"John","Tagline":"Hi","Title":"Developer","Company":"Iconnexus","Industry":"Comp","What I Do":"Android","Who do I want to meet":"Android Developers","WHOOZNEAR_PROFILEPIC":"content://media/external/images/media/4"}`

从这个：

`{"nameValues":{"Name":"John","Tagline":"Hi","Title":"Developer","Company":"Iconnexus","Industry":"Comp","What I Do":"Android","Who do I want to meet":"Android Developers","WHOOZNEAR_PROFILEPIC":"content://media/external/images/media/4"},"profileId":1,"valid":false}`

我将使用什么正则表达式来获取该字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T01:18:35.250

不要使用正则表达式，[使用 JSON 解析器](https://stackoverflow.com/a/7663467/14955)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:04:28.840

或者，如果您真的想使用正则表达式来提取该部分： `^{"nameValues":(.*)$`并使用第一个捕获组。

# gwt - 如何使用触摸处理程序？（GWT 支持吗？）

> ID：11875484
> 
> 赞同：3
> 
> 时间：2012-08-09T01:17:09.013
> 
> 标签：gwt

我在面板上附加了一个 MouseDownHandler、MouseMoveHandler 和 MouseUpHandler。我也想让相应的触摸事件以同样的方式工作。有什么例子可以说明这如何与 GWT 一起工作吗？

文档中的事件和处理程序部分非常稀疏： [https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiHandlers](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiHandlers)

所以我一定在某个地方错过了它，

谢谢

- - - 更新 - - - - - -

好的，所以添加了这个，但它不会触发：

```
// touchTest is just a div with width/height = 100%
RootPanel rp = RootPanel.get("touchTest"); 
rp.sinkEvents(Event.TOUCHEVENTS);
rp.addHandler(new TouchStartHandler() {
    @Override
    public void onTouchStart(TouchStartEvent event) {
         // touch down!
    }
}, TouchStartEvent.getType()); 
```

我在上面的 div 上附加了一个 mousedownhandler，它在桌面浏览器中运行时工作正常。我们还需要做些什么吗？

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:34:18.100

这适用于 2.5，但我相信它与 2.3-2.4 类似。

这是活动

[触摸事件](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/TouchEvent.html)

和处理程序

[触摸开始](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/TouchStartHandler.html)

[触摸结束](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/TouchEndHandler.html)

[触摸取消](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/TouchCancelHandler.html)

[触摸移动](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/TouchStartHandler.html)

[touch all](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/event/dom/client/HandlesAllTouchEvents.html)注意：对于 touch all 有一个警告：

> 警告，请阅读：由于此类是为希望在 GWT 中处理所有鼠标事件的开发人员设计的，因此将向其中添加新的鼠标处理程序接口。因此，对 GWT 的更新可能会导致 API 更改中断。

# iphone - 在 iOS 设备上启动应用程序时出现 XCode 4.4 错误

> ID：11875491
> 
> 赞同：0
> 
> 时间：2012-08-09T01:19:20.993
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [Xcode 4.4 错误 - 等待应用程序启动超时](https://stackoverflow.com/questions/11683308/xcode-4-4-error-timed-out-waiting-for-app-to-launch)

我一直在编写应用程序并在模拟器上测试一段时间。但最近我尝试在我的 iOS 设备（iPhone 4、5.1.1）上测试它

为了让它在没有开发人员帐户的情况下运行，我必须正确编辑 SDK 列表（将代码签名要求更改为否，将权利要求更改为否）然后我将代码签名身份更改为“不要代码签名”。到这里为止一切都很好。

当我尝试在 iOS 设备上运行它时，我在 iPhone 上看到了我的应用程序图标，但 XCode 上出现错误提示“等待应用程序启动超时”，并且我注意到应用程序弹出时出现动画但是实际上什么都没有打开。

为了查看我的代码/项目是否有任何问题，我创建了一个新项目并尝试在 iOS 设备上运行它，我看到一个新应用的图标也出现了同样的问题。

一切都在模拟器上完美运行。

谁能告诉我这是什么问题？我该如何解决？

PS 我尝试重新启动我的 iPhone 和 XCode。但同样的结果。它已经在调试配置中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:21:39.897

您需要一个开发者帐户来构建设备。在 Xcode 中更改代码签名设置不会改变任何东西；iOS 仍然需要使用 Apple 颁发的开发人员证书对二进制文件进行签名。

# jquery - 如何将文本添加到 jQuery 滑块控件？

> ID：11875502
> 
> 赞同：0
> 
> 时间：2012-08-09T01:21:12.017
> 
> 标签：jquery, css, jquery-ui-slider

我正在使用**[jQuery UI Slider](http://jqueryui.com/demos/slider/)**插件为我的页面制作滑块，但我想为每个滑块句柄添加不同的标签。滑块的代码是一个简单的 div：

```
<div class="slider"></div> 
```

这通过 CSS 转换为滑块：

```
.ui-slider { position: relative; text-align: left; margin: 1.5em auto 1.5em auto; width:10% }
.ui-slider .ui-slider-handle { position: absolute; z-index: 2; width: 1.5em; height: 1.5em; cursor: default; }
.ui-slider .ui-slider-range { text-align:center; position: absolute; z-index: 1; font-size: .7em; display: block; border: 10; background-position: 0 0; }

.ui-slider-horizontal { height: .8em; }
.ui-slider-horizontal .ui-slider-handle { top: -.5em; margin-left: -.77em; }
.ui-slider-horizontal .ui-slider-range { top: 0; height: 100%; }
.ui-slider-horizontal .ui-slider-range-min { left: 0; }
.ui-slider-horizontal .ui-slider-range-max { right: 0; } 
```

然后，通过脚本添加类。我尝试将文本放在 div 标签之间，但这不起作用：

```
<div class="slider">Testing</div> 
```

![在此处输入图像描述](../Images/bf4c07a040cc4ce0d99ffaf8347ea2fe.png)

如何获取滑块手柄顶部的文本，并允许文本随其移动？

* * *

**编辑：**我得到了滑块手柄顶部的文本，但是当滑块移动时它不会移动。

CSS：

```
.label {
    z-index:999;
    position:relative;  
} 
```

HTML：

```
<div class="slider"><div class="label">Testing</div></div> 
```

结果：

![在此处输入图像描述](../Images/037eaf8f2393f6ed52e0ea23693a880f.png)

**编辑 2：**这是一个[Fiddle](http://jsfiddle.net/4KEdM/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:39:31.887

尝试

```
$('.slider .ui-slider-handle').text('Hello').css({width:70,'text-align': 'center'}); 
```

刚过`$( ".slider" ).slider( {step: 1}, {min:-1}, {max:1}, {value:0} );`

[jsfiddle](http://jsfiddle.net/unloco/4KEdM/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:40:49.450

您可以简单地使用 jQuery 来执行此操作：

**CSS**

> .ui-slider-handle { 字体大小：较小；文字装饰：无；}

**jQuery**

> $(".ui-slider-handle").text("测试").width(50);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:04:41.157

您可以移动任何/所有子元素，而不仅仅是移动文本。如果您想拖动较大的项目（例如按钮或图像），这将派上用场。

[演示](http://jsfiddle.net/scispear/xMCnL/)

我相信你可以想出更简洁的代码；但这只是抓住了所有子元素并将它们向下移动到新的锚点中。

```
var slider = $( ".slider" ).slider( {step: 1}, {min:-1}, {max:1}, {value:0} );

slider.each(function(){
    var this$ = $(this);
    var children = this$.children().filter(':not(.ui-slider-handle)');
    this$.find('.ui-slider-handle').append(children);
}); 
```

# jquery - jQuery 验证依赖于 required 和 notEqual

> ID：11875506
> 
> 赞同：0
> 
> 时间：2012-08-09T01:22:26.653
> 
> 标签：jquery, validation, jquery-validate, required

使用 jQuery 验证插件，我已经弄清楚了如何根据另一个字段的输入来使一个字段成为必需的，以及如何使一个字段不等于默认值——但是我正在努力将两者结合起来，例如只需要一个字段需要时不等于默认值。这是我的代码：

```
$(document).ready(function () {
$.validator.addMethod("notEqual", function(value, element, param) {
  return this.optional(element) || value !== param;
}, "Please specify a non-default value");

$("#request").validate({
  rules: {
        format: {
            required    : true,
        },
        citySuburb      :   {
            required    : function(element) {
                    return $("#format").val()=="print"
                    },
            notEqual    : "Please enter your city."
            },
      }
    });
}); 
```

正如您在上面的示例中看到的，citySuburb 字段始终检查它是否等于默认值，而不管该字段本身是否是必需的。我真的很想这样做，以便 citySuburb 仅在需要该字段时（即在格式字段中选择“打印”时）检查它是否是默认值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:29:02.757

更改您的 notEqual 方法，使其接受命名参数，例如

```
notEqual: { default: "Please enter your city.",
            otherField: "#format",
            otherFieldValue: "print"
          } 
```

then have the notEqual method check `$(param.otherField).val() == param.otherFieldValue`.

# iphone - iPhone游戏动画角色的正确术语

> ID：11875507
> 
> 赞同：0
> 
> 时间：2012-08-09T01:22:51.593
> 
> 标签：iphone, ios, animation, graphics

我在 freelancer.com 上有一个人正在为我的 iphone 游戏做艺术。好吧，我的游戏需要一个类似于 Temple Run 的 3D 角色（但还有很多其他的东西）。我知道这家伙真的很擅长 2d 和 3d 动画，但每当我试图解释我需要什么时，他都会说，“太酷了，你能给我看看这个游戏吗，这样我做起来会更容易你的视频。” 我只是有点紧张，他不明白我需要什么。我需要一个有几个短动画循环的角色，而不是“视频”。这家伙也来自印度，所以我认为英语有点糟糕，他可能不完全理解我。我能用术语说什么让他明白我需要什么。我很确定我要找的是“精灵”吗？但这是什么，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:25:43.200

Sprite 可能是一个安全的选择。即使它不是 iOS 标准，人们也会理解你，因为它是一种广泛使用的约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:26:57.953

您可能正在寻找的术语可能是“精灵”，例如在游戏“大金刚”中，预渲染的 3D 动画被转换为 2D 动画。

# java - 我将如何阻止这个整数溢出？

> ID：11875508
> 
> 赞同：0
> 
> 时间：2012-08-09T01:23:02.347
> 
> 标签：java, int, long-integer

好吧，所以我有这个问题，你可以得到比你实际支付的更多的钱。这有点难以解释，当你增加数量时，首先这是我的代码：

```
 public void setAmount(Player player, int button) {
        int amount = (Integer) player.getTemporaryAttribute("geAmount");
        int id = (Integer) player.getTemporaryAttribute("geItem");
        int price = (Integer) player.getTemporaryAttribute("price");
        long totalPrice = price * amount;
        switch(button) {
        case 157:
            if(player.getRights() > 1){
                player.sm(""+totalPrice+"");
            }
            if(amount > 1) {
                amount--;
            } else {
                amount = 1;
            }
            break;
        case 159:
            if(player.getRights() > 1){
                player.sm(""+totalPrice+"");
            }
            if(amount < Integer.MAX_VALUE && totalPrice <= Integer.MAX_VALUE && totalPrice >= 0) {
                amount++;
            }
            break;
        case 162:
            if(player.getRights() > 1){
                player.sm(""+totalPrice+"");
            }
            if(player.getTemporaryAttribute("buying") == Boolean.TRUE && totalPrice <= Integer.MAX_VALUE && totalPrice >= 0) {
                amount += 1;
            } else {
                amount = 1;
            }
            break;
        case 164:
            if(player.getRights() > 1){
                player.sm(""+totalPrice+"");
            }
            if(player.getTemporaryAttribute("buying") == Boolean.TRUE && totalPrice <= Integer.MAX_VALUE && totalPrice >= 0) {
                amount += 10;
            } else {
                amount = 10;
            }
            break;
        case 166:
            if(player.getRights() > 1){
                player.sm(""+totalPrice+"");
            }
            if(player.getTemporaryAttribute("buying") == Boolean.TRUE && totalPrice <= Integer.MAX_VALUE && totalPrice >= 0) {
                amount += 100;
            } else {
                amount = 100;
            }
            break;
        case 168:
            if(player.getRights() > 1){
                player.sm(""+totalPrice+"");
            }
            if(player.getTemporaryAttribute("buying") == Boolean.TRUE && totalPrice <= Integer.MAX_VALUE && totalPrice >= 0) {
                amount += 1000;
            } else {
                amount = player.getInventory().getContainer().getNumberOff(id);
            }
            break;
        case 171:
        case 173:
            if(player.getRights() > 1){
                player.sm(""+totalPrice+"");
            }
            player.getActionSender().sendConfig(1111, (Integer) player.getTemporaryAttribute("price"));
            break;
        }
        if(amount == 0){
            amount = 1;
        }
        if(amount >= Integer.MAX_VALUE || amount < 0) {
            amount = Integer.MAX_VALUE;
        }
        player.setTemporaryAttribute("geAmount", amount);
        player.getActionSender().sendConfig(1109, id);  
        player.getActionSender().sendConfig(1110, amount);
    } 
```

总价格一直在溢出，但我不确定如何让它停止。有人建议使用这样的东西：

```
int last = 0;
int current = 0;
while(last < current) //loop terminates on overflow
  last = current++; 
```

但我不知道如何在这段代码中使用它。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:25:23.990

使用`BigInteger`类

[http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:32:48.930

```
long totalPrice = price * amount; 
```

Cast `price`or `amount`to `long`so 计算以 long 形式执行：

```
long totalPrice = (long)price * amount; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T01:33:54.250

将您的总数初始化为零......类似的程序。转到[http://codejava.co.uk/download_code.html](http://codejava.co.uk/download_code.html)

# php - 一个用户的多列Mysql Rank

> ID：11875509
> 
> 赞同：0
> 
> 时间：2012-08-09T01:23:12.030
> 
> 标签：php, mysql, rank

我如何根据一个查询中其他所有人的统计信息来查找一个用户的三个统计信息的排名？

像

用户 -> 艾伦
等级 -> 25（等级 3）
获胜 -> 347（等级 1）
失败 -> 2（等级 145）

这就是我所拥有的

```
function get_rank($what,$user) {
$v = mysql_query("
    SELECT username, @curRank := @curRank + 1 AS rank FROM `users`,
    (SELECT @curRank := 0) r
    WHERE id = '".$user."' ORDER BY `".$what."`");
    $a = mysql_fetch_array($v);
        return $v['rank'];
} 
```

它永远不会起作用。

表结构

```
Id 用户名等级 胜负

1 Alan 25 347 2 

2 Joe 34 100 4

3 山姆 12 600 12

```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:47:29.050

```
SELECT * FROM
(SELECT m.name,rank_level,rank_win  ,rank_loss
FROM 
    (SELECT @rank := @rank + 1 AS rank_level,name,id FROM users ORDER BY level DESC) m 
    inner join  (SELECT @rankw := @rankw + 1 AS rank_win,name,id 
        FROM users ORDER BY win DESC) w on m.id=w.id 
    inner join  (SELECT @rankl := @rankl + 1 AS rank_loss,name,id 
        FROM users ORDER BY loss DESC) l on m.id=l.id 
     , (SELECT @rank := 0) m2,(SELECT @rankw := 0) w2,(SELECT @rankl := 0) l2
) k
WHERE k.name= 'Alan'; 
```

[SQL 小提琴在这里](http://sqlfiddle.com/#!2/ed3a2/1)

# c# - 是否可以在异步套接字上等待连接

> ID：11875510
> 
> 赞同：0
> 
> 时间：2012-08-09T01:23:36.733
> 
> 标签：c#, sockets, asynchronous

全部，我在 C# 中使用异步套接字。我的问题是：我想等待回调完成连接，因为我需要立即将信息发送到服务器。

这是一个代码片段：

```
class InternetConnector
{
    private struct ConnectionData
    {
        public Action<Exception> ErrorHandler { get; set; }
        public Socket Socket { get; set; }
    }
    public void ConnectToHost(Action<Exception> errorHandler)
    {
        IPEndPoint ip = new IPEndPoint(IPAddress.Parse(connector_host), connector_port);
        client = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        var ConnectionData = new ConnectionData { ErrorHandler = errorHandler, Socket = client };
        client.Blocking = true;
        client.BeginConnect(ip, new AsyncCallback(ConnectCallback), ConnectionData);
        connectDone.WaitOne(100);
    }

    private static void ConnectCallback(IAsyncResult ar)
    {
        ConnectionData connectionData = new ConnectionData();
        try
        {
            connectionData = (ConnectionData)ar.AsyncState;
            connectionData.Socket.EndConnect(ar);
            connectDone.Set();
            Connected = true;
        }
        catch (Exception e)
        {
            if (connectionData.ErrorHandler != null)
                connectionData.ErrorHandler(e);
        }
    }
}

public partial class Form1 : Form
{
    private bool isRunning = false;
    private InternetConnector client = new InternetConnector();

    private void AsyncErrorHandler(Exception e)
    {
        if (status.InvokeRequired)
        {
            status.BeginInvoke(new Action(() => AsyncErrorHandler(e)));
            return;
        }
        InternetConnector.Connected = false;
        isRunning = false;
        startStop.Text = "Start";
        status.ForeColor = Color.Red;
        status.Text = "Socket Error: " + e.Message;
    }

    private void startStop_Click(object sender, EventArgs e)
    {
        if (!isRunning || !InternetConnector.Connected)
        {
            if (!InternetConnector.Connected)
            {
                client.SetAddress(ipAddress.Text);
                client.SetPort(Convert.ToInt32(connectionport.Text));
                client.ConnectToHost( AsyncErrorHandler );
                status.Text = "Signals Receiver: Connected";
                status.ForeColor = Color.Green;
                startStop.Text = "Stop";
                isRunning = true;
     // if connection successful, send some data and start reading the socket
            }
            else
            {
                startStop.Text = "Start";
                client.DisconnectFromHost(AsyncErrorHandler);
                isRunning = false;
            }
        }
    }
} 
```

我可以处理连接中的异常。现在我还需要处理成功的连接。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:23:40.270

您可以遵循相同的模式，并提供一个在成功和错误时调用的处理程序：

```
class InternetConnector 
{ 
    private struct ConnectionData 
    { 
        public Action<Socket> SuccessHandler { get; set; } 
        public Action<Exception> ErrorHandler { get; set; } 
        public Socket Socket { get; set; } 
    } 

    public void ConnectToHost(Action<Socket> successHandler, Action<Exception> errorHandler) 
    { 
        IPEndPoint ip = new IPEndPoint(IPAddress.Parse(connector_host), connector_port); 
        client = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); 
        var ConnectionData = new ConnectionData 
        { 
            SuccessHandler = successHandler,
            ErrorHandler = errorHandler, 
            Socket = client 
        }; 
        client.Blocking = true; 
        client.BeginConnect(ip, new AsyncCallback(ConnectCallback), connectionData); // <--  make sure to use the lower-case connectionData here!  :)
        connectDone.WaitOne(100); 
    } 

    private static void ConnectCallback(IAsyncResult ar) 
    { 
        ConnectionData connectionData = new ConnectionData(); 
        try 
        { 
            connectionData = (ConnectionData)ar.AsyncState; 
            connectionData.Socket.EndConnect(ar); 
            connectDone.Set(); 
            Connected = true; 
            if (connectionData.SuccessHandler != null)
                connectionData.SuccessHandler(connectionData.Socket);
        } 
        catch (Exception e) 
        { 
            if (connectionData.ErrorHandler != null) 
                connectionData.ErrorHandler(e); 
        } 
    } 
} 
```

作为成功处理程序传递的函数的签名必须与`Action<Socket>`委托匹配，这看起来像：

```
void MySuccessHandler(Socket socket) 
{ 
    // do stuff with the connected socket..        
    Console.WriteLine("Connected to {0}", socket.RemoteEndPoint);         
}

void MyErrorHandler(Exception e)
{
    Console.WriteLine("Connection error {0}", e.Message);         
}

...

myConnector.ConnectToHost(MySuccessHandler, MyErrorHandler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-06T06:55:00.960

也许这种扩展方法的一些变体可以激发灵感。它需要一个动作和一个时间跨度，并等待任务或超时之一首先完成。

如果超时赢得比赛，则执行提供的操作。

```
public static async Task<bool> OnTimeout<T>(this T t, Action<T> action, TimeSpan timespan) where T : Task
{
    var timeout = Task.Delay(timespan);

    if (await Task.WhenAny(t, timeout) == timeout)
    {
      //Enter here on timeout
      action(t);
      return true;
    }
    else
    {
      return false;
    }
} 
```

像这样使用，在超时的情况下可以采取一些行动。

```
await socket.ConnectAsync().OnTimeout(t => {
  throw new TimeoutException();
}, TimeSpan.FromSeconds(5)); 
```

# javascript - 可以从自身调用一个函数吗？

> ID：11875512
> 
> 赞同：0
> 
> 时间：2012-08-09T01:23:52.630
> 
> 标签：javascript

我可以这样做：

```
function something(){

    for(x in y){
        if(x.toString() == "[object Object]"){
            something();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:25:05.867

是的。它被称为递归，它在 JavaScript 中可用。在您的情况下，这将是无限递归，这会导致堆栈溢出。确保您是否调用它的条件实际上会改变以避免无限递归。

# sql-server-2008 - SqlServer 默认路径

> ID：11875513
> 
> 赞同：0
> 
> 时间：2012-08-09T01:23:55.390
> 
> 标签：sql-server-2008

我在 C 盘上安装了 sql2008，所以默认的数据存储路径也在 C 盘上。现在，我想修改默认路径，以便我可以将我的数据库数据存储在另一个磁盘上，有什么解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:57:16.910

试试这个

```
->SQL Server Management Studio 
->right click on the Server 
->property 
->Database settings 
->Database default location 
```

# objective-c - 如何将 UIAlertView 与用户做出选择时发生的事情联系起来？

> ID：11875517
> 
> 赞同：0
> 
> 时间：2012-08-09T01:24:02.010
> 
> 标签：objective-c, xcode, ios5

我有设置 UIAlertView 的代码：

```
-(IBAction)showMessage
{
//NSInteger *buttonIndex = NULL;
UIAlertView *message = [[UIAlertView alloc] initWithTitle:nil 
message:nil 
delegate:nil 
cancelButtonTitle:@"Cancel" 
otherButtonTitles:@"Email",@"SMS",@"Facebook",@"Twitter", nil];
[message show];
} 
```

以及解释用户做出选择后要做什么的代码：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 1){
        [self openMail];
    }
    else if (buttonIndex == 2)
//etc.
} 
```

但我不知道如何将两者联系起来。`alertView: clickedButtonAtIndex`显而易见的答案是在调用的第一段代码中添加一行`UIAlertView *message`，但是如何分配`buttonIndex`呢？你如何`alertView`判断用户是否选择了 Facebook、Email 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:27:56.750

如果您还没有添加到头文件中：

```
@interface YourClass : UIViewController <UIAlertViewDelegate>
{
} 
```

...ETC

并在您的 AlertView 代码中将 delegate:nil 更改为 delegate:self

有关更多信息，请查看 Apple 文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)

来自文档： *按钮索引从 0 开始。如果这是取消按钮索引，则警报视图正在取消。如果为 -1，则不设置取消按钮索引。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:39:04.210

`delegate:self`(1)初始化消息时要设置。此外，在您的接口声明中，执行以下操作：

`@interface myClass: UIViewController <UIAlertViewDelegate>`

这样，当用户进行选择时，您的处理程序函数会自动被调用。

(2) 按钮按您列出的顺序编入索引。

(3) 由于您有很多选项供用户选择，因此最好使用 UIActionSheet 而不是 UIAlertView。警报通常用于简单的是/否类型选择。

希望这可以帮助！

# node.js - 节点 - 告诉请求的来源

> ID：11875522
> 
> 赞同：17
> 
> 时间：2012-08-09T01:24:33.693
> 
> 标签：node.js, request

是否可以区分直接来自浏览器中 URL 的请求与从远程网页调用的资源之间的区别？

[例如，当有人在网络浏览器中直接访问我的 URL（在http://mywebsite.com](http://mywebsite.com)中输入）时，我想提供一个网页，但是当用户通过来自单独域的 URL 调用我的应用程序上的资源时(like `<img src='http://mywebsite.com' />`) 那么我想提供不同的内容。

我查看了请求和标头，但无论

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-09T05:48:46.117

我认为您正在寻找`referer`.`request.header`

所以简单的版本看起来像这样：

```
http.createServer(function (req, res) {
  var ref = req.headers.referer;

  if(ref) {
    // serve special content
  }
  else {
    // serve regular homepage
  }
}).listen(1337, '127.0.0.1'); 
```

* * *

*编辑了答案以反映下面 anu 的输入 - 它应该是`referer`*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-31T20:32:35.183

在中间件中你必须使用这种方式“req.headers.origin”

```
app.use(function(req, res, next) {
    //var origin=req.headers.origin
    next();
}); 
```

# android - 如何使用 Adob e AIR / Flex 在 Android 中访问我的应用程序包文件夹？

> ID：11875524
> 
> 赞同：0
> 
> 时间：2012-08-09T01:24:45.267
> 
> 标签：android, apache-flex, directory

我有一个使用 Flex 构建的 Android 应用程序。我需要保存一些配置和数据，所以我想知道如何访问我的应用程序的特定于包的文件夹，而不是创建自己的文件夹并在那里写入。

我正在谈论的特定于包的文件夹位于**/sdcard/Android/data/com.mysite.myapp/**。我是直接通过该路径访问它，还是有一个我不知道的 File 类变量？

我想保存到这个文件夹的原因是，如果我创建自己的文件夹并保存在那里，那将需要我的应用程序请求访问 SD 卡内容的权限。我不想包含在我的权限列表中的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:05:38.213

对于应用程序特定文件，您可以选择`applicationDirectory`（只读）或`applicationStorageDirectory`.

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)

# objective-c - RestKit PUT 不工作

> ID：11875531
> 
> 赞同：0
> 
> 时间：2012-08-09T01:25:17.857
> 
> 标签：objective-c, ios, restkit, http-put

我正在尝试使用 RestKit 做一个相当基本的 HTTP PUT。我不想放置整个对象，因为 API 调用旨在接受单个查询参数并仅更新该字段。到目前为止，我尝试了两种方法，均不成功。

要发布到的 URL：`https://myserver/api/users/{userId}`

查询字符串参数：`verificationCode=`

示例用法：`PUT https://myserver/api/users/101?verificationCode=646133`

方法 #1：将查询参数放在 RKParams 对象中，并使用这些参数进行 PUT 调用。

```
 NSString *putUrl = [NSString stringWithFormat:@"/api/users/%i", [APIUserInfo sharedAPIUserInfo].apiUserIdx];
    NSLog(@"the PUT url is %@", putUrl);

    // Send a PUT to a remote resource. The dictionary will be transparently
    // converted into a URL encoded representation and sent along as the request body
    NSDictionary* paramsDict = [NSDictionary dictionaryWithObject:[_verificationCode text] forKey:@"verificationCode"];
    // Convert the NS Dictionary into Params
    RKParams *params = [RKParams paramsWithDictionary:paramsDict];

    [[RKClient sharedClient] put:putUrl params:params delegate:self]; 
```

方法 #2：构建整个 url 并尝试将参数设置为 nil 的 PUT。

```
 NSString *putUrl = [NSString stringWithFormat:@"/api/users/%i?verificationCode=%@", [APIUserInfo sharedAPIUserInfo].apiUserIdx, [_verificationCode text]];
    NSLog(@"the PUT url is %@", putUrl);

    [[RKClient sharedClient] put:putUrl params:nil delegate:self]; 
```

这两种方法都不适合我。第一个失败说“RestKit 被要求重新传输请求的新正文流。可能的连接错误或身份验证挑战？” 然后运行大约 10 秒并超时。第二种方法失败说 HTTP 状态 405 - 方法不允许。

谁能指出我哪里出错了，或者为我提供一个使用 RestKit 的简单 PUT 示例？我在那里找到的大多数示例都放置了我不想在这种情况下做的整个对象。

* * *

**更新：**

一旦我在服务器端整理了一些东西，方法 #2 就很有效。最终解决方案：

```
NSString *putUrl = [NSString stringWithFormat:@"/api/users/verify/%i?verificationCode=%@", [APIUserInfo sharedAPIUserInfo].apiUserIdx, [_verificationCode text]];
NSLog(@"the PUT url is %@", putUrl);

[[RKClient sharedClient] put:putUrl params:nil delegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:30:15.147

HTTP PUT 方法在您的网络服务器上被禁用。出于安全原因，默认情况下它在所有网络服务器上。

```
HTTP Status 405 - Method Not Allowed. 
```

# plsql - TYPE 原因 ORA-06502: PL/SQL: numeric or value error

> ID：11875542
> 
> 赞同：0
> 
> 时间：2012-08-09T01:25:43.033
> 
> 标签：plsql

我有以下 PL/SQL 包：

```
CREATE OR REPLACE PACKAGE PKG_JCSJ
AS      
TYPE  record_organ_cant  IS RECORD(CANT_CODE VARCHAR2(90),
        ORGAN_ID  VARCHAR2(90) ,
        CANT_NAME VARCHAR2(90),
        SUPP_TYPE VARCHAR2(20));

  --TYPE array_organ_cant IS TABLE of PKG_JCSJ.record_organ_cant;
  TYPE array_organ_cant IS TABLE of pub_organ_cant%ROWTYPE;

  function fn_transe_organ_cant return PKG_JCSJ.array_organ_cant PIPELINED;
 END PKG_JCSJ;

create or replace package body PKG_JCSJ is

function fn_transe_organ_cant return PKG_JCSJ.array_organ_cant PIPELINED
as
   cursor cursor_organ_cant is select * from pub_organ_cant ; 
   record_o_c pub_organ_cant%rowtype; 
   record_o_c2 pub_organ_cant%rowtype;        
   cant_code VARCHAR2(90); 

   TYPE ref_cursor IS REF CURSOR; 
   array_column_value ref_cursor;  
   sp_cant_code VARCHAR2(90); 

begin
   open cursor_organ_cant;
   loop
        fetch cursor_organ_cant into record_o_c;
        exit when cursor_organ_cant%notfound;
        cant_code := record_o_c.cant_code;
        if instr(cant_code, ',')>0 then
           open array_column_value for select * from  table(fn_split(cant_code));
           loop
                fetch array_column_value into sp_cant_code;
                exit when array_column_value%notfound;
                --DBMS_OUTPUT.put_line('---' || sp_cant_code);
                record_o_c2.CANT_CODE := sp_cant_code;
                record_o_c2.ORGAN_ID := record_o_c.ORGAN_ID;
                record_o_c2.CANT_NAME := record_o_c.CANT_NAME;
                record_o_c2.SUPP_TYPE := record_o_c.SUPP_TYPE;
                --DBMS_OUTPUT.put_line('++++++' || record_o_c2.CANT_CODE);

                PIPE ROW (record_o_c2);
           end loop;
           close array_column_value;
        else   
           PIPE ROW (record_o_c);
        end if;
   end loop;
   close cursor_organ_cant;
   return;
end fn_transe_organ_cant;
begin
   null;
end PKG_JCSJ; 
```

为什么这个声明失败了？

```
TYPE array_organ_cant IS TABLE of PKG_JCSJ.record_organ_cant; 
```

错误信息是`ORA-06502: PL/SQL: numeric or value error`。但是，当我使用下面的语句时，成功了！

```
TYPE array_organ_cant IS TABLE of pub_organ_cant%ROWTYPE; 
```

`record_organ_cant`与 TABLE 结构相同`pub_organ_cant`，我不知道为什么前者失败而后者成功，有什么区别？

然后，包装体如下，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:28:16.743

首先，在你的包体中你不必使用它，`PKG_JCSJ.`因为它在 pacakge 中声明并且应该可以被它的任何函数访问，比如

```
create or replace package body PKG_JCSJ is
function fn_transe_organ_cant return array_organ_cant PIPELINED
.... 
```

接下来，当您再次声明时，您不需要`PKG_JCSJ.`像

```
CREATE OR REPLACE PACKAGE PKG_JCSJ
AS      
  TYPE  record_organ_cant  IS RECORD(CANT_CODE VARCHAR2(90),
        ORGAN_ID  VARCHAR2(90) ,
        CANT_NAME VARCHAR2(90),
        SUPP_TYPE VARCHAR2(20));

  TYPE array_organ_cant IS TABLE of record_organ_cant;

  function fn_transe_organ_cant return array_organ_cant PIPELINED;
 END PKG_JCSJ; 
```

# sql - 我可以访问使用 SQL Developer 中的 Oracle Apex 在线托管的工作区吗？

> ID：11875545
> 
> 赞同：1
> 
> 时间：2012-08-09T01:25:58.463
> 
> 标签：sql, database, oracle, oracle-apex, oracle-sqldeveloper

我使用 Oracle CMS 在线创建了一个名为 ITCMS 的工作区。在名为 cmsonline 的内部有一个模式。在创建工作区时，APEX 没有询问我是要创建系统用户还是系统用户。

目前，我登录工作区的用户名是我的电子邮件 ID。

是否可以使用 SQL 开发人员访问此在线工作区？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T02:29:52.210

如果您谈论的是在[http://apex.oracle.com](http://apex.oracle.com)上创建的 APEX 工作区，则不，您无法从客户端计算机访问数据库 Oracle 主机。您可以在 APEX 开发人员环境中使用 SQL 工作表功能。如果您希望能够使用 SQL Developer 连接到数据库，则需要安装本地 Oracle 数据库并在那里创建工作区。

除了架构之外，请注意 APEX 用户不是 Oracle 数据库用户，APEX 工作区不是 Oracle 数据库。您可以在单个 Oracle 数据库中创建许多不同的工作区（apex.oracle.com 是托管数千个工作区的单个 Oracle 数据库）。而且 APEX 用户不是 Oracle 用户，因此您无法使用 APEX 用户的凭据连接到 Oracle 数据库。

# ruby-on-rails - 尝试将任务与 todolist 应用程序上的列表关联时，find_or_create_by_name 不起作用

> ID：11875546
> 
> 赞同：0
> 
> 时间：2012-08-09T01:26:04.647
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

Rails 新手致力于将任务与列表相关联，当我在启动 rails 服务器后尝试与表单交互时遇到麻烦。

这是我得到的错误。有任何想法吗？

谢谢！

```
NoMethodError in TasksController#create

undefined method `find_or_create_by_name' for #<Class:0x00000102a8bad0>
Rails.root: /Users/user/rails_projects/todolist

Application Trace | Framework Trace | Full Trace
app/models/task.rb:15:in `list_name='
app/controllers/tasks_controller.rb:43:in `new'
app/controllers/tasks_controller.rb:43:in `create'
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"B7g7u+v5USPRhefdFPt84xGkKjB1nVwy62IJj6SHJpc=",
 "task"=>{"description"=>"Milk",
 "list_name"=>"Shopping"},
 "commit"=>"Create Task"} 
```

列表控制器：

```
class ListsController < ApplicationController

      # GET /lists
      # GET /lists.json
      def index
      @lists = List.all

      respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @lists }
      end
    end

    # GET /lists/1
    # GET /lists/1.json
    def show
      @list = List.find(params[:id])

      respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @list }
      end
    end

    # GET /lists/new
    # GET /lists/new.json
    def new
      @list = List.new

      respond_to do |format|
        format.html # new.html.erb
        format.json { render json: @list }
      end
    end

    # GET /lists/1/edit
    def edit
      @list = List.find(params[:id])
    end

    # POST /lists
    # POST /lists.json
    def create
      @list = List.new(params[:list])

      respond_to do |format|
        if @list.save
          format.html { redirect_to @list, notice: 'List was successfully created.' }
          format.json { render json: @list, status: :created, location: @list }
        else
          format.html { render action: "new" }
          format.json { render json: @list.errors, status: :unprocessable_entity }
        end
      end
    end

    # PUT /lists/1
    # PUT /lists/1.json
    def update
      @list = List.find(params[:id])

      respond_to do |format|
        if @list.update_attributes(params[:list])
          format.html { redirect_to @list, notice: 'List was successfully updated.' }
          format.json { head :no_content }
        else
          format.html { render action: "edit" }
          format.json { render json: @list.errors, status: :unprocessable_entity }
        end
      end
    end

    # DELETE /lists/1
    # DELETE /lists/1.json
    def destroy
      @list = List.find(params[:id])
      @list.destroy

      respond_to do |format|
        format.html { redirect_to lists_url }
        format.json { head :no_content }
      end
    end
  end 
```

任务控制器：

```
class TasksController < ApplicationController

      # GET /tasks
      # GET /tasks.json
      def index
      @tasks = Task.all

      respond_to do |format|
       format.html # index.html.erb
       format.json { render json: @tasks }
    end
  end

  # GET /tasks/1
  # GET /tasks/1.json
  def show
    @task = Task.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @task }
    end
  end

  # GET /tasks/new
  # GET /tasks/new.json
  def new
    @task = Task.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @task }
    end
  end

  # GET /tasks/1/edit
  def edit
    @task = Task.find(params[:id])
  end

  # POST /tasks
  # POST /tasks.json
  def create
    @task = Task.new(params[:task])

    respond_to do |format|
      if @task.save
        format.html { redirect_to @task, notice: 'Task was successfully created.' }
        format.json { render json: @task, status: :created, location: @task }
      else
        format.html { render action: "new" }
        format.json { render json: @task.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /tasks/1
  # PUT /tasks/1.json
  def update
    @task = Task.find(params[:id])

    respond_to do |format|
      if @task.update_attributes(params[:task])
        format.html { redirect_to @task, notice: 'Task was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @task.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /tasks/1
  # DELETE /tasks/1.json
  def destroy
    @task = Task.find(params[:id])
    @task.destroy

    respond_to do |format|
      format.html { redirect_to tasks_url }
      format.json { head :no_content }
    end
  end
end 
```

任务模型：

```
class Task < ActiveRecord::Base

    attr_accessible :description, :list_name

    belongs_to :list, :foreign_key => "list_id" 

   def name
      @list = List.find(params[:id])
    end

    def list_name
      list.name if self.list 
    end

    def list_name=(str)
      self.list = List.find_or_create_by_name(str) 
    end

  end 
```

列表型号：

```
class List < ActiveRecord::Base

    attr_accessible :title
    has_many :tasks 

    def name
      @list = List.find(params[:id])
    end

  end 
```

部分任务：

```
 <%= form_for(@task) do |f| %>
    <% if @task.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@task.errors.count, "error") %> prohibited this task from being        saved:</h2>

      <ul>
      <% @task.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description %>
  </div>
  <div class="field">
    <%= f.label :list_name %><br />
    <%= f.text_field :list_name %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

部分列表：

```
 <%= form_for(@list) do |f| %>
    <% if @list.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@list.errors.count, "error") %> prohibited this list from being saved:</h2>

        <ul>
        <% @list.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= f.label :title %><br />
      <%= f.text_field :title %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-18T19:57:40.890

动态查找器`find_or_create_by_*...`在 Rails 4 中已被弃用，可以在[此处阅读](http://guides.rubyonrails.org/active_record_querying.html#find-or-build-a-new-object)。

不过`find_or_create_by`还是支持的。

换句话说，而不是

```
find_or_create_by_name( 'Alice' ) # DEPRECATED 
```

做

```
find_or_create_by( name: 'Alice' ) # OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T03:17:29.273

Rails 的动态查找器（`find_by_...`和`find_or_create_by_...`）是使用模型的属性生成的。您正在使用`find_or_create_by_name`when`name`不是`List`模型上的属性。

改变它来`find_or_create_by_title(...)`解决问题。

# mysql - 使用 mysqldump.exe 进行 MySQL 完整备份

> ID：11875548
> 
> 赞同：0
> 
> 时间：2012-08-09T01:26:23.553
> 
> 标签：mysql, mysqldump

```
set dateStr=%date:~-7,2%-%date:~-10,2%-%date:~-4,4%
"C:\Program Files (x86)\MySQL\MySQL Server 5.5\bin\mysqldump.exe" -u user -p password --all-

databases  --single-transaction --flush-logs --master-data=2 > full_backup_%dateStr%.sql 
```

它适用于我们拥有的另一台服务器。这是一个新服务器，但具有相同的数据库。它只创建一个 1 KB 的文件，其内容为：

```
Usage: mysqldump [OPTIONS] database [tables]
OR     mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...]
OR     mysqldump [OPTIONS] --all-databases [OPTIONS]
For more options, use mysqldump --help 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T23:53:34.057

当我试图备份我自己的 Mysql 数据库时发现了这个问题，并认为我会分享我最终是如何做到的。

该代码基本上遍历所有数据库并创建一个 .sql 文件，其中包含每个数据库的所有结构和数据。

```
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: MySQL Backup
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

:: MySQl DB user
set dbuser=BackupUser

:: MySQl DB users password
set dbpass=BackUpUserPassWord

:: Switch to the MySQL data directory and collect the folder names
pushd "C:\Server\databases\mysql\data"

:: Loop through the folders and use the file names for the sql files, collects all databases automatically this way
:: Pass each name to mysqldump.exe and output an individual .sql file for each

FOR /D %%F IN (*) DO (
  "C:\Program Files\MySQL\bin\mysqldump.exe" --user=%dbuser% --password=%dbpass% --databases %%F > "C:\Server\backups\mysql\%%F.%TODAY%.sql"
) 
```

要回答您的特定问题，请检查您是否以管理员身份运行脚本，以及您尝试备份的用户是否具有数据库的相关权限。在我以管理员身份运行我的 bat 文件之前，我一直被困在这个问题上。

要检查它是否是用户问题，请尝试使用 root 用户运行 mysqldump，看看是否有帮助，如果它知道它是数据库权限的问题。

要以管理员身份运行，请右键单击 bat 文件，然后选择以管理员身份运行，如果您正在使用，请不要忘记在计划任务中设置“以最高权限运行”复选框。

代码从这里复制： [http ://www.syntaxwarriors.com/2012/backup-up-a-windows-server-using-only-free-tools/](http://www.syntaxwarriors.com/2012/backup-up-a-windows-server-using-only-free-tools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:49:10.927

我测试了你的代码并且它有效。我认为你应该再次检查你的 bat 文件是否有任何语法错误。

```
set dateStr=%date:~-7,2%-%date:~-10,2%-%date:~-4,4%
"D:\Sync\Apps\Wamp\bin\mysql\mysql5.5.20\bin\mysqldump.exe" -u root --all-databases  --single-transaction --flush-logs --master-data=2 > full_backup_%dateStr%.sql 
```

我删除了 -pPASSWORD 部分，因为我的本地服务器上没有 root 密码。所以，如果你要从这里 C/P 它，不要忘记更改 mysqldump 的路径并添加 -p 部分。

# java - 部署后 Flex 空白/白屏

> ID：11875551
> 
> 赞同：0
> 
> 时间：2012-08-09T01:26:38.177
> 
> 标签：java, apache-flex, flash-builder, flash

刚刚上传了一个 .war 文件到服务器..那里一切正常..但登录页面没有加载任何内容..我在新工作中获得了这个 flex+java 项目..这对我来说有点奇怪..我什至不能在它上面使用萤火虫..它在 Eclipse 控制台上什么都没有显示。请有人帮我一把！

登录页面mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"      width="100%" height="100%" initialize="Spinner.init(this)" >
<mx:Style source="../flexdesign/css/Login.css"/>
<mx:Style source="../flexdesign/css/principal.css"/>
<mx:Style source="../flexdesign/css/conteudo.css"/>
<mx:Script>
    <![CDATA[
        import automacao.ui.Spinner;

        import flash.net.navigateToURL;

        import mx.controls.Alert;

        public function abreMenu(url:String):void{
            try {
                navigateToURL(new URLRequest(url),"_parent"); 
            } catch (e:Error) {
                trace("Error occurred!");
            }
        }
    ]]>
</mx:Script>
<mx:Move id="cimabaixo" duration="1100" yFrom="0" yTo="0" xFrom="300" xTo="0"/>
<mx:Iris id="zoom" duration="300" xFrom="0" xTo="1" yFrom="0" yTo="1"/>
<mx:Zoom id="zoomhide" duration="500" zoomWidthFrom="1" zoomWidthTo="0" zoomHeightFrom="1" zoomHeightTo="0"/>
<mx:Glow id="brilho" duration="300" alphaFrom="0" alphaTo=".4" blurXFrom="0" blurXTo="20" blurYFrom="0" blurYTo="20" color="0xBBBBBB" strength="3"/>
<mx:Glow id="sembrilho" duration="500" alphaFrom=".6" alphaTo="0" blurXFrom="20" blurXTo="0" blurYFrom="20" blurYTo="0" color="0xBBBBBB" strength="3"/>
<mx:Glow id="brilhoradio" duration="200" alphaFrom="0" alphaTo=".4" blurXFrom="0" blurXTo="15" blurYFrom="0" blurYTo="15" color="0xBBBBBB" strength="2"/>
<mx:Glow id="sembrilhoradio" duration="200" alphaFrom=".3" alphaTo="0" blurXFrom="15" blurXTo="0" blurYFrom="15" blurYTo="0" color="0xBBBBBB" strength="2"/>
<mx:Fade id="fadeOut" duration="300" alphaFrom="1.0" alphaTo="0.0"/>
<mx:Fade id="fadeIn" duration="300" alphaFrom="0.0" alphaTo="1.0"/>
<mx:ModuleLoader id="workspace" x="0" y="0" width="100%" height="100%" url="LoginView.swf"/>
  </mx:Application> 
```

它就像小菜一碟..我只是做了一些Java业务更改并部署项目..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:32:23.407

也没有使用过 Flex，但看看这些想法是否有帮助。

1）恢复备份并确认它仍然有效，这是您的更改。（只是把它排除在外） 2）确保您可以在类路径中找到这些导入（即 automacao.ui.Spinner 等）。您的 WAR 可能由于某种原因没有包含它们。3) 将某种通用输出添加到该 abreMenu 函数中，以查看它是否到达那里。我会怀疑它不是。4) 在 log4j/slf4j 或您正在使用的任何东西中打开跟踪级调试。

找到答案后，回帖。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:35:38.250

LoginView.swf 是否仍在同一目录中？还要下载[Flash 调试版本](http://www.adobe.com/support/flashplayer/downloads.html)，这样您就会看到“静音”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:31:41.767

如果您使用的是 Flex Builder，请转到项目 --> 属性 --> FlexModules。确保您已将模块 LoginView 添加到其中。这可能是模块未加载的原因。

# vb.net - 在 VB.net 中获取引用方法

> ID：11875556
> 
> 赞同：0
> 
> 时间：2012-08-09T01:27:59.127
> 
> 标签：vb.net

我正在尝试在 vb.net 中获取引用方法。

例如，我有 1 个处理电子邮件的通用方法 (sendMail)，任何其他方法都可以调用它。我希望 sendMail在发送电子邮件时将条目记录到数据库中*。*在此*日志*中，我想要调用 sendMail 的方法的名称。我可以通过传递参数来做到这一点，但我想知道 sendMail 是否可以访问调用它的方法的名称。

我发现这篇文章在 vs 中效果很好。 [是否可以在 VB.NET 中获得引用方法？](https://stackoverflow.com/questions/715216/is-it-possible-to-get-the-referring-method-in-vb-net) 但不幸的是，我在一个专有应用程序及其 IDE 中工作，我从 StackFrame 获得的输出是 'ExecuteAction at offset 1438 in file:line:column:0:0'。我认为这可能是因为 Jon 在示例中使用的 StackFrame 在调试模式下工作而不是发布。（MSDN 说了一些关于调试模式的事情，但我在这里不是 100% 确定）

还有另一种获取调用方法名称的方法吗？还是我错误地使用了 StackFrame？

提前喝彩。

dno

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:32:22.770

```
 public string GetStackTrace()
    {
        StackTrace st = new StackTrace(true);
        StackFrame[] frames = st.GetFrames();

        return frames[1].GetMethod().Name.ToString();
    } 
```

试一试：
这个方法很可能会返回它的调用者的名字，通过一些调整，你不能通过增加帧数组的索引来调整它来嵌套。
祝你好运

# php - 如何在一行中显示我的文本？

> ID：11875558
> 
> 赞同：-2
> 
> 时间：2012-08-09T01:28:35.070
> 
> 标签：php, mysql, css

我正在从 MySQL 中获取值，我想将它们显示在一个迷你行中。但是由于线路的长度，他们正在自己创建新线路。

我的CSS代码在下面；

```
position:absolute;
top:76px;
left:25%;
width:50%;
height:30px;
background-color:#d0d0d0; 
```

我的印刷品是； [http://666kb.com/i/c6810lb5lniu28x41.png](http://666kb.com/i/c6810lb5lniu28x41.png)

我想在你看到的第一行显示它们。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:20:45.660

做`white-space: nowrap;`你想做的事吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T02:29:50.067

您可以更改[`font-size`](http://www.w3schools.com/cssref/pr_font_font-size.asp)，将其放入[`<small></small>`](http://www.w3schools.com/tags/tag_font_style.asp)标签中，更改[`width`](http://www.w3schools.com/cssref/pr_dim_width.asp)或使用[`overflow`](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

# apache - 附加查询字符串的apache RedirectMatch

> ID：11875562
> 
> 赞同：1
> 
> 时间：2012-08-09T01:29:07.600
> 
> 标签：apache, wamp

我正在尝试在 Apache 中设置添加查询字符串的重定向。我不认为我想使用 RewriteRule 因为目标是不同的网络服务器。我现在有这样的事情：

```
<VirtualHost 127.0.0.5:4039>
    ServerName localhost.redirect
    RedirectMatch (.*) http://otherserver.com$1?originalHost=127.0.0.5
</VirtualHost> 
```

这适用于将请求`[http://127.0.0.5:4039/foo](http://127.0.0.5:4039/foo)`重定向到`[http://otherserver.com/foo?originalHost=127.0.0.5](http://otherserver.com/foo?originalHost=127.0.0.5)`. 问题是它也`[http://127.0.0.5:4039/foo?another=value](http://127.0.0.5:4039/foo?another=value)`被重定向到`[http://otherserver.com/foo?originalHost=127.0.0.5](http://otherserver.com/foo?originalHost=127.0.0.5)`，我想要`[http://otherserver.com/foo?another=value&originalHost=127.0.0.5](http://otherserver.com/foo?another=value&originalHost=127.0.0.5)`保留原始查询字符串的位置。

关于如何做到这一点的任何提示？我在 WAMP 上运行，并且不太擅长这个 apache 事情。

这里有一个相关的问题，有人有一个重定向，其中目标包含一个查询字符串：[Apache: Redirect domain to other domain with appended querystring](https://stackoverflow.com/questions/5355655/apache-redirect-domain-to-other-domain-with-appended-querystring)。他们并没有试图附加一个查询字符串，只是设置一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:49:24.600

您可能不得不硬着头皮使用 mod_rewrite。它有一个用于将现有查询字符串附加到目标查询字符串的标志。您将替换为`RedirectMatch`：

```
RewriteEngine On
RewriteRule ^(.*)$ http://otherserver.com$1?originalHost=127.0.0.5 [L,QSA,R=302] 
```

它看起来几乎一样，并且会用 302 重定向（如果您希望它是永久的，可以用 301 替换），除此之外，现有的查询字符串将整齐地附加到`?originalHost=127.0.0.5`.

# ruby - 在加载了许多光纤的所有数据后停止 evenmachine

> ID：11875563
> 
> 赞同：0
> 
> 时间：2012-08-09T01:29:20.830
> 
> 标签：ruby, eventmachine, fibers

我尝试使用http请求和evenmachine从rest api获取数据。为此，请使用[em-net-http](https://github.com/jfairbairn/em-net-http)、fibers(ruby1.9.2p290)。我的伪代码如下所示：

```
 EM.run do
    Fiber.new do
      api_client.get_data_1
    end.resume

    Fiber.new do
      api_client.get_data_2
    end.resume

    ...

    Fiber.new do
      api_client.get_data_n
    end.resume

    EventMachine.stop
  end 
```

问题：加载所有数据后如何停止 EM？我计算了请求，但这是一种不好的做法。有什么模式可以做到这一点吗？我也使用了[em-synchrony](https://github.com/igrigorik/em-synchrony/)，但这对我来说比较慢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:54:32.590

使用[em-http-request](https://github.com/igrigorik/em-http-request/)和[multi-http 接口](https://github.com/igrigorik/em-http-request/wiki/Parallel-Requests)，当所有请求完成时提供回调。第二个链接中提供的示例几乎可以满足您的需求。

# xcode - 使用逗号 Xcode 添加文本字段

> ID：11875564
> 
> 赞同：0
> 
> 时间：2012-08-09T01:29:22.420
> 
> 标签：xcode

我正在尝试在两个文本字段中添加值。当两个值都输入并按下按钮添加它时，文本字段被格式化为带有逗号：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc]init];
        [formatter setNumberStyle:NSNumberFormatterDecimalStyle];
        carPriceField1.text = [formatter stringFromNumber: [formatter numberFromString:carPriceField1.text]]; 
```

因此，如果您再次单击该按钮，逗号仍在文本字段内。所以计算忽略了逗号后面的所有数字。例如，如果将 20,000 和 30,000 相加，答案将是 50。

如何用逗号添加这些数字？我必须重新格式化，然后添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:01:02.907

`NSNumberFormatter`不打算以这种方式使用。在 Interface Builder 中，只需将 Number Formatter 拖到要使用逗号格式化的文本字段上。然后它将根据您在 Interface Builder 中提供的设置格式化它在文本字段中显示的文本。当您想要检索数值时，只需按如下方式获取它，例如，如果您想要整数：

```
int carPrice = [carPriceField1 intValue]; 
```

# jquery - jquery .on('改变' IE 问题

> ID：11875566
> 
> 赞同：0
> 
> 时间：2012-08-09T01:29:44.450
> 
> 标签：jquery

我已经阅读了几篇提到 jquery .on('change' 见下文的问题的帖子。

[让 jQuery 在 IE 中识别 .change()](https://stackoverflow.com/questions/208471/getting-jquery-to-recognise-change-in-ie/1080243)

[IE8 中的 jQuery on() 变化](https://stackoverflow.com/questions/9328598/jquery-on-change-in-ie8)

但我遇到的问题似乎与此略有不同。

当我在 ie9 中查看[http://jsfiddle.net/VNSam/19/并选择选择推销员时，什么也没有发生（在所有其他主要浏览器中都可以操纵表格）。](http://jsfiddle.net/VNSam/19/)

但是，当我按 f12 打开开发人员控制台并选择 salesman 并选择一个选项时，表格会被操纵。为什么是这样？我怎样才能在不按 f12 的情况下让它工作？

# ssl - 如何使用.net 自己创建 ssl 证书？

> ID：11875571
> 
> 赞同：1
> 
> 时间：2012-08-09T01:29:57.297
> 
> 标签：ssl, ssl-certificate, security

谷歌搜索了一下，但无法快速找到任何东西？是否可以使用 .net 4.0 创建适用于现场的 ssl 证书？MakeCert.exe 仅创建用于测试目的的证书？还有其他方法吗？我想创建一个 1536 位的 RSA 密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:49:32.723

如果您需要在代码中创建证书，那么我们的 SecureBlackbox 的 BouncyCastle 或[PKIBlackbox](http://www.eldos.com/sbb/net-pki.php)包就可以完成这项工作。但是，除非您是证书颁发机构或您拥有带有私钥的 CA 证书，否则您创建的证书的可用性将受到限制。您可以构建自己的证书层次结构，但不被信任（如果 CA 给您的话，也可以信任）浏览器和操作系统默认不会信任您的证书。

# javascript - node.js 需要问题

> ID：11875573
> 
> 赞同：0
> 
> 时间：2012-08-09T01:30:18.160
> 
> 标签：javascript, node.js

我正在执行此操作。

```
//to_s.js
(function(){
String.prototype.to_s = function(){
        var str = this.toString();
        var convert = function(s){
            return eval(s);
        };

        while(/#{(\w+)}/.test(str)){

            // bad  because I use eval...

            var matchStr =RegExp.$1;

            var str = str.replace(/#{(\w+)}/,convert(matchStr));

        }
        return str;
    };
})();

module.exports = String.prototype.to_s;

// test/to_s_test.js

require("./../to_s");

var name = 33;

"hello #{name}".to_s(); 
```

我运行 to_s_test.js，但它发生了“名称未定义”的错误。但我不知道为什么会发生。但是将 'var name = 33' 更改为 name = 33 ，它可以工作......你有什么想法? 提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:35:54.617

它只会在没有的情况下起作用，`var`因为它`eval`发生在另一个上下文中，因此只能使用您的方法访问全局变量。不声明变量时会自动创建一个全局变量；然而，在 node.js 中，模块中声明的变量不是全局的。

这就是为什么，[正如我之前提到](https://stackoverflow.com/questions/11868969/how-to-refactor-rubys-method-in-javascript-which-i-write/11869011#11869011)的，试图使语言符合其他语言的习语是一个*坏主意*。

# php - 使用输入添加对 href 的查询

> ID：11875577
> 
> 赞同：2
> 
> 时间：2012-08-09T01:30:57.007
> 
> 标签：php, input, href

我有一个

```
<input type=text name=search /> 
```

我想将 input 的值添加到我的 href

```
<a href='index.php?search=$search>submit</a> 
```

但我认为这不会单独在 php 上工作，对吧？

如何在单击时将输入的值添加到我的 href 中？

注意：需要以这种方式出现在浏览器 url 菜单中

```
index.php?search=anyvalue 
```

只要他们点击它。因为我正在使用分页

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T01:40:25.367

直接的 HTML - 不需要 PHP 或 JavaScript

```
<form action="index.php" method="get">
    <input type="text" name="search" />
    <button type="submit">Submit</button>
</form> 
```

单击后，它将带用户到：`index.php?search={value of input}`

要使分页起作用，它将是：

```
<a href="index.php?search=<?php echo $_GET['search']; ?>&page=2">Page 2</a>
<a href="index.php?search=<?php echo $_GET['search']; ?>&page=3">Page 3</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:47:15.183

试试这个：

```
<form method="get" action="index.php">
<input name="search"  type="text" />
<input type="submit" />
</form> 
```

如果那不是您想要的，请详细说明您要实现的目标。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T01:35:09.380

你必须像这样打开一个 php 标签：

```
<a href='index.php?search=<?php echo $search;?>' >submit</a> 
```

但它在提交表单后工作。使用 javascript

# regex - 正则表达式匹配不以模式结尾的字符串？

> ID：11875583
> 
> 赞同：3
> 
> 时间：2012-08-09T01:32:49.087
> 
> 标签：regex, regex-negation, lookahead, negative-lookahead, negative-lookbehind

我正在尝试形成一个正则表达式，它将匹配不以 DOT FOLLOWED BY NUMBER 结尾的字符串。

例如。

```
abcd1
abcdf12
abcdf124
abcd1.0
abcd1.134
abcdf12.13
abcdf124.2
abcdf124.21 
```

我想匹配前三个。
我尝试修改[这篇文章](https://stackoverflow.com/questions/11431295/regex-to-match-string-not-ending-with-pattern)，但它对我不起作用，因为数字可能有可变长度。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T02:06:11.903

你可以使用这样的东西：

```
^((?!\.[\d]+)[\w.])+$ 
```

它锚定在一行的开头和结尾。它基本上说：

```
Anchor at the start of the line
DO NOT match the pattern .NUMBERS
Take every letter, digit, etc, unless we hit the pattern above
Anchor at the end of the line 
```

所以，这个模式匹配这个（没有点，然后是数字）：

`This.Is.Your.Pattern`或者`This.Is.Your.Pattern2012`

但是它不会匹配这个（数字前的点）：

`This.Is.Your.Pattern.2012`

编辑：为了回应 Wiseguy 的评论，您可以使用这个：

`^((?!\.[\d]+$)[\w.])+$`- 在数字之后提供一个锚点。因此，它必须是一个点，然后只有一个数字......不是你在问题中指定的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T02:07:30.460

如果你可以稍微放宽你的限制，你可以尝试使用这个（扩展的）正则表达式： `^[^.]*.?[^0-9]*$`

如果您使用与整个字符串匹配的函数/工具，`^`您可以省略锚定元符号。`$`

**解释**：此正则表达式允许除点之外的任何符号，直到找到（可选）点，之后允许所有非数字符号。它不适用于格式不正确的数字，例如 string:`abcd1...3`或`abcd1.fdfd2`. 对于某些带有多个点的字符串，它也无法正常工作，例如`abcd.ab123cd.a`（问题描述有点模棱两可）。

**哲学解释**：当使用正则表达式时，通常你不需要完全按照你的任务似乎是什么，等等。所以即使是简单的正则表达式也可以完成这项工作。一个抽象的例子：你有一个文件，其中行要么是数字，要么是一些复杂的名称（没有数字），并且说，你想过滤掉所有的数字，然后简单的过滤`[^0-9]`-`grep '^[0-9]'`就可以了。

但是，如果您的任务更复杂，并且需要验证格式并在数据上做其他花哨的事情，为什么不使用简单的脚本（比如 in `awk`、`python`或`perl`其他语言）？或者一个简短的“手写”功能，如果你正在实现独立的应用程序。正则表达式很酷，但它们通常不是正确使用的工具。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T02:41:56.350

我会在最后使用一个简单的负面回顾：

```
.*(?<!\\.\\d+)$ 
```

# php - 回显用户喜欢的类别的分层 MySQL 表

> ID：11875587
> 
> 赞同：1
> 
> 时间：2012-08-09T01:33:17.603
> 
> 标签：php, mysql, sql

我有一个名为 category 的 MySQL 表，它将分层数据保存为相邻列表。然后，我将所有类别及其子项的列表作为 html 列表回显：

```
Food 
    Fruit  
        Red  
           Cherry  
        Yellow  
           Banana  
    Meat  
        Beef  
        Pork
Sports
    Soccer
        Spanish Soccer
        French Soccer
    Golf
        US Open
           Tiger Woods 
```

我使用的代码是：

```
$refs = array();
$list = array();

$sql = "SELECT catid, parentid, name FROM category ORDER BY name";
$result = mysql_query($sql);
while($data = mysql_fetch_assoc($result)) {
    $thisref = &$refs[ $data['catid'] ];

    $thisref['parentid'] = $data['parentid'];
    $thisref['name'] = $data['name'];
    $thisref['catid'] = $data['catid'];    

    if ($data['parentid'] == 0) {
        $list[ $data['catid'] ] = &$thisref;
    } else {
        $refs[ $data['parentid'] ]['children'][ $data['catid'] ] = &$thisref;
    }
}

function toUL($arr){
    $html = '<ul>';
    foreach ($arr as $v){
        $html .= '<li><a href="category.php?id=' . $v['catid'] . '">' . $v['name'] . '</a>';
        if (array_key_exists('children', $v)){
            $html .= toUL($v['children']);
        }
        $html .= '</li>';
    }
    $html .= '</ul>';
    return $html;
}

// build the list and output it
echo toUL($list); 
```

MySQL 表“类别”的行称为：`catid, name, description, parentid, and level`。

问题是我希望该表仅显示用户喜欢的类别。如：

```
Food 
    Fruit             
        Yellow  
           Banana  
    Meat  
        Beef    
Sports
    Soccer
        Spanish Soccer
        French Soccer
    Tiger Woods 
```

有`"likes"`行称为：`likeid, userid, catid`其中`userid`引用表的主键`"users"`和`userid`引用表的主键`"category"`。

我可以实现什么样的代码来创建用户喜欢的单个主题列表？我看到但目前没有答案的问题是：如果用户喜欢`"Tiger Woods"`但不喜欢 的父主题`"Golf"`怎么办？

我怎样才能输出用户可能喜欢的类别列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:56:12.010

首先，您需要将用户的所有匹配喜欢及其类别连接在一起，然后选择 catid、parentid 和连接的类别部分的名称。

```
$userid = 123; 
$sql = "SELECT c.catid, c.parentid, c.name
        FROM category c JOIN likes l ON c.catid=l.catid
        WHERE l.userid=$userid ORDER BY name"; 
```

请注意，您需要使用定义要从中选择哪个“catid”，否则mysql会给您一条错误消息（它无法在category中的catid或join的likes表之间做出决定；我们知道它不相关，因为它具有相同的值，但 mysql 没有“意识到”）。我给类别起了别名“c”并且喜欢别名“l”，所以你可以写 c.catid 而不是 category.catid。

关于第二个问题：如果用户不喜欢其中一个父类别。即使他不喜欢它们，您也应该显示父类别，但要以不同的方式显示（作为不同的颜色）。但是您至少需要所有父节点，因为您需要知道在哪里附加喜欢的节点。如果没有中间节点，您将无法实现这一点。

最简单的方法是选择表“类别”和“喜欢”的“外部”连接结果；“外部联接”意味着如果一个表的其他联接信息不可用（例如，该用户没有类似行的类别行），则表的这一行（例如类别）也将添加到结果中，但部分不可用的表（此处为“喜欢”）设置为 NULL。

更确切地说：我们想要一个“类别 LEFT OUTER JOIN likes”，这意味着：有或没有喜欢的类别 (=LEFT)，但没有没有类别的喜欢。这不应该发生。但是，如果出于某种原因，您删除了一个类别但不删除它的喜欢，您就会遇到麻烦......

匹配标准是 catid 列，因此我们写“ON c.catid=l.catid”（或“ON categories.catid = likes.catid”，如果您不想使用名称别名......如解释以下）。

让我们看一下这个 SQL 命令的 JOIN 结果：

```
$userid = 123;

$sql = "SELECT * FROM category c RIGHT OUTER JOIN likes l ON c.catid=l.catid
WHERE l.userid=$userid ORDER BY l.name"; 
```

现在我们从“like”表中获得所有类别的表，如果可用，则添加匹配列......或者如果不可用，则设置为NULL：

```
c.catid c.parentid c.name l.catid l.userid
1       0          Food   1       123
2       1          Fruits 2       123
...
9       0          Sports NULL    NULL
10      0          Sports 10      123
... 
```

所以，我们需要的是 c.catid AS catid, c.parentid AS parentid, c.name AS name（注意我们可以用“AS newname”重命名列名，所以我们不需要改变我们的程序）。此外，我们需要“（l.catid IS NOT NULL）AS like”，它为所有具有！= NULL和“false”（值：“0”）的l.catid提供“true”（值：“1”）如果l.catid == NULL。

在我们的 SQL 命令中，如下所示：

```
$userid = 123; 
$sql = "SELECT
          c.catid AS catid,
          c.parentid AS parentid,
          c.name AS name,
          (l.catid IS NOT NULL) as liked
        FROM category c RIGHT OUTER JOIN likes l ON c.catid=l.catid WHERE l.userid=$userid
        ORDER BY name"; 
```

好的，现在我们像以前一样实现 SQL-result-fetching。但是由于结果中的新“喜欢”字段而进行了一些修改。我们标记为每个节点添加一个“标记”值，该值最初是为每个“喜欢的”节点设置的。稍后我们还将标记“标记”节点的所有父节点。这些是我们要显示的节点...

```
$refs = array();
$list = array();

$userid = 1;
$sql = "SELECT c.catid, c.parentid, c.name, (l.catid IS NOT NULL) as liked FROM category c RIGHT OUTER JOIN likes l ON c.catid=l.catid WHERE l.userid=$userid ORDER BY name";
$result = mysql_query($sql);
while($data = mysql_fetch_assoc($result)) {
    $thisref = &$refs[ $data['catid'] ];

    $thisref['parentid'] = $data['parentid'];
    $thisref['name'] = $data['name'];
    $thisref['catid'] = $data['catid'];
    $thisref['liked'] = $data['liked']; // save information: user likes it
    $thisref['mark'] = $data['liked']; // initially mark all 'liked' nodes

    if ($data['parentid'] == 0) {
        $list[ $data['catid'] ] = &$thisref;
    } else {
        $refs[ $data['parentid'] ]['children'][ $data['catid'] ] = &$thisref;
    }
}
mysql_free_result($result); 
```

现在您递归地标记需要显示的树的部分。因此，对于 toUL() 函数，我们从图的根开始。由于我们要显示任何需要显示的具有子节点的节点（=被用户喜欢），我们首先分析子子树。如果最后，其中一个子树有我们需要显示的节点，或者该节点本身需要显示（喜欢），我们标记它。它与 toUL() 的工作方式没有太大区别......但遍历顺序不同（“先是子节点，然后是当前节点”与“当前节点，然后是子节点”）。这是代码：

```
function markLikedSubtree($arr){
  $needs_display = false;

  foreach ($arr as $v){
    // recursively mark subtree of child $v
    $child_marked = markLikeSubtree( $v['children'] );

    // if mark this node, if it was marked already OR any child of $v needs displaying
    $v['mark'] = $v['mark'] || $child_marked;

    // if $v needs to be displayed, the parent needs to be displayed too
    if ($v['mark']) $needs_display = true;
  }

  // return true, if parent is needed to be displayed.
  return $needs_display;
} 
```

现在我们需要修改 toUL() 函数以仅显示具有 $v["mark"] == true 的节点，如下所示：

```
function toUL($arr){
  $html = '<ul>';
  foreach ($arr as $v) {
    if ($v['mark']) {
      $html .= '<li><a href="category.php?id=' . $v['catid'] . '">' . $v['name'] . '</a>';
      if (array_key_exists('children', $v)){
          $html .= toUL($v['children']);
      }
      $html .= '</li>';
    }
  }
  $html .= '</ul>';
  return $html;
} 
```

最后我们调用标记喜欢节点的所有父节点的函数并调用我们的新 toUL() 函数：

```
markLikedSubtree($list);
echo toUL($list); 
```

此外，您可以将所有已设置 $v['mark'] 但未设置 $v['like'] 的节点变灰（=以不同方式显示）...或者您只需在类别后面添加一些“喜欢”符号名字，如果喜欢的话。这可能是这样的：

```
function toUL($arr){
  $html = '<ul>';
  foreach ($arr as $v) {
    if ($v['mark']) {
      $html .= '<li><a href="category.php?id=' . $v['catid'] . '">' . $v['name'] . '</a>';

      if ($v['liked']) $html .= " <img src='thumb_up.jpg'>";

      if (array_key_exists('children', $v)){
          $html .= toUL($v['children']);
      }
      $html .= '</li>';
    }
  }
  $html .= '</ul>';
  return $html;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:55:22.077

这是一种可能适合您的方式：

1.  创建一个查找特定节点的所有父节点的函数
2.  Foreach 节点，添加一个标志，表示用户是否“喜欢”该节点
3.  foreach 用户喜欢的节点，将该节点的所有父节点标记为“喜欢”

在您的情况下，“喜欢”相当于“可见”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T03:43:46.790

加入喜欢表。

```
SELECT catid, parentid, name
FROM category
JOIN likes ON likes.catid = category.catid
WHERE likes.userid = $user_id
ORDER BY name 
```

# php - Paypal IPN 帮助...从 Sandbox 获得无效响应

> ID：11875590
> 
> 赞同：1
> 
> 时间：2012-08-09T01:33:53.150
> 
> 标签：php, paypal, sandbox, paypal-ipn

谁能帮我解决这个错误。我收到来自贝宝沙盒的无效响应。

我的沙盒帐户已通过验证，IPN 在我的帐户中打开，我还在我的沙盒帐户中设置了通知 url。

这是我的按钮代码

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr"  method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="myverifiedpaypalemail@gmail.com">
<input type="hidden" name="item_name" value="My Business">
<input type="hidden" name="item_number" value="10101">
<input type="hidden" name="amount" value="101.35">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="lc" value="US">
<input type="hidden" name="bn" value="PP-BuyNowBF">
<input type="image" src="http://www.mydomain.com/wp-content/themes/MiniMeCity/images/paypalbutton.jpg" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<img alt="" border="0" src="https://www.paypal.com/en_GB/i/scr/pixel.gif" width="1" height="1">
<input type="hidden" name="return" value="http://www.mydomain.com/payment-confirmation/"> 
<input type="hidden" name="cancel_return" value="http://www.mydomain.com/">
<input type="hidden" name="rm" value="2"> 
<input type="hidden" name="notify_url" value="http://www.mydomain.com/paypalipn.php" /> 
</form> 
```

这是我的 IPN 代码： [http ://codepad.org/Xu0rhDBY](http://codepad.org/Xu0rhDBY)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:46:32.533

在您的 IPN 中，您正在打开一个到 www.paypal.com 而不是 www.sandbox.paypal.com 的套接字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:44:24.457

[https://www.paypal-community.com/t5/Selling-on-your-website/IPN-response-problem/m-p/521312#M2445](https://www.paypal-community.com/t5/Selling-on-your-website/IPN-response-problem/m-p/521312#M2445)

I recently experienced this problem, going from a code base that hadn't changed and was working correctly on the Paypal sandbox.

If you can provide more information was to what is occuring, i can point you more in the right direction. I'd suggest doing what's been talked about in that post first. Which is simply adding the new header.

$header .= "Host: www.sandbox.paypal.com\r\n";

Just be aware not to have this header on a production system.

Hope this helps. If it doesn't resolve your issue, use var_dump line 39 to see what the responses are.

I've posted a more detail response in a different topic which outlines debugging in an easier manner : [Paypal IPN Integration into PHP](https://stackoverflow.com/questions/11875053/paypal-ipn-integration-into-php/11875535#11875535)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:30:37.257

您需要在您的 php 配置中启用[OpenSSL](http://php.net/manual/en/book.openssl.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T07:19:28.093

[我有同样的问题，但我使用了来自https://developer.paypal.com/docs/classic/ipn/gs_IPN/](https://developer.paypal.com/docs/classic/ipn/gs_IPN/)的 paypal 新的更安全的按钮和 ipn API 。汤姆正如你所说，我使用了 var_dump 并且响应是 string(7) "INVALID"

# ruby - 如何判断是什么导致迭代搜索变慢？

> ID：11875599
> 
> 赞同：0
> 
> 时间：2012-08-09T01:35:26.103
> 
> 标签：ruby, search, iteration

我有一个[关于 gist 的迭代搜索算法](https://gist.github.com/3300144)—— [（或在此处查看完整的 github 存储库）](https://github.com/andrewcsmith/HD) ——在数万次迭代后会变慢。

概括：

*   从每个相邻点搜索最佳点
*   选择该点作为新点
*   如果该点是死胡同（即，每个相邻点都离期望的结果更远），那么它将该点添加到“禁止点”的哈希中以不再使用
*   该算法删除最近的点，并返回到点 n - 1

判断这些迭代何时以及如何变慢的最佳方法是什么？我正在考虑类似于“单圈时间”基准的东西，它可以让我绘制出我的代码的哪些部分正在增加成本。

从 切换`Array#include?`到`Hash#has_key?`已经将整个事情加快了许多数量级。但是随着禁用点的列表越来越长，会`Hash#has_key?`开始滞后吗？我可以期待看到显着放缓的点是什么？

被禁止`Hash`的点只是由 组成`{"string rep. of array" => 1}`，因为我只是用它来搜索密钥。

谢谢你的帮助。

# c# - 在 MS Forms 边框上绘制

> ID：11875604
> 
> 赞同：0
> 
> 时间：2012-08-09T01:36:09.970
> 
> 标签：c#, winforms, forms

我这里有点问题。我正在尝试在整个屏幕上绘制一些东西，我有一个没有可见边框的全屏表单，但是，我无法在边框位置上绘制，因此将有大约 20+ 像素的空间，上面什么都没有绘制边缘。我想我可以扩大窗口大小，使其从底部和右侧越过屏幕，但您不能将位置设置为小于 0,0，因此顶部和左侧边框仍然会挡住我的绘图。

简而言之：如何在边框上绘制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:50:46.950

One approach is to get rid of the border entirely. You can draw your own simulated border as needed.

To do that, set the ControlBox property to *false*. Set the form's Text property to string.Empty. Set the border to FixedDialog to make the form unresizable.

In order to still be able to move the form you must override WndProc like this:

```
protected override void WndProc(ref Message message)
{
    switch (message.Msg)
    {
      case 0x84: 
          message.Result = new IntPtr(0x2);
          return;
    }

    base.WndProc(ref message);
} 
```

That code tricks Windows into thinking that mouse clicks on the non-client area are actually on the title bar.

See [http://msdn.microsoft.com/en-us/library/ms645618%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms645618%28VS.85%29.aspx)

# c# - 这是我的防火墙或 chrome 的问题吗？Xmlhttprequest 到 C# 侦听器错误

> ID：11875609
> 
> 赞同：1
> 
> 时间：2012-08-09T01:37:00.920
> 
> 标签：c#, google-chrome, xmlhttprequest, firewall

我在 C# 中设置了一个 Httplistener，它读取 Get 参数并执行一个操作，只是一个小型个人项目。现在，当我从带有 127.0.0.1:port 的 chrome 中的 HTML 页面发送请求时，它工作正常。但是，如果我使用我的完整 IP（我通过谷歌搜索我的 IP），xmlhttp 请求将失败。当我在我的网站上托管文件时也是如此。这是 Chrome 或我的防火墙设置的问题吗？我打开了所有连接的端口，并从我的防火墙中排除了 Visual Studio

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:48:33.473

您从 Google（或其他任何地方）获得的 IP 地址就是您的互联网 IP 地址。在您的网络上，您的网络的 IP 地址很可能与您的 Internet 地址不同。

我进行了谷歌搜索，发现[此页面](http://kb.iu.edu/data/aapa.html)可帮助您按照各种操作系统所需的步骤来确定您计算机的 IP 地址是什么。

作为使用 IP 地址的替代方法，您可以使用计算机的名称。

如果您想使用您的互联网 IP 地址，以便您可以从互联网访问您的站点，而不仅仅是您的网络，您需要设置[端口转发](http://en.wikipedia.org/wiki/Port_forwarding)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:46:38.723

您需要在路由器上设置端口转发。

# kinect - Microsoft Kinect SDK 返回的深度图像是否已经不失真？

> ID：11875614
> 
> 赞同：7
> 
> 时间：2012-08-09T01:37:54.833
> 
> 标签：kinect, camera-calibration

假设 Microsoft SDK 可以访问 Kinect 的内在参数，但有人知道它返回的深度图像是否实际上没有失真？我找不到任何相关的东西。

让我知道我是否超出了主题，尽管我认为这是一个隐式编程问题:)

**编辑：**我发现一些其他有用的链接支持@Coeffect的回答

*   [http://ros.org/wiki/kinect_calibration/technical](http://ros.org/wiki/kinect_calibration/technical)
*   [Kinect 深度数据的准确性分析，作者：K.Khoshelham](https://wiki.rit.edu/download/attachments/52806003/ls2011_submission_40.pdf)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T03:06:10.943

所以 Kinect 显示的 IR 模式不是您的正常网格。例如，查看[这篇博文](http://www.futurepicture.org/?p=116)。Kinect 处理以此制作法线深度图。考虑这个系统的焦距等只会给自己挖一个洞。您对精度的想法可能是错误的。Kinect 不够准确，无法对此类事情挑剔。使用 Kinect 进行运动检测后，噪音很大。如果您有某种情况，您可能想发布有关它的信息。

**编辑**：[这是](http://mathnathan.com/2011/02/depthvsdistance/)一篇文章，显示深度不是线性的，更多的精度集中在更近的物体上。所以你离得越远，数据越不精确，噪声就会变得越严重（因为附近返回的深度变化 1 几乎没有什么，但离得越远，距离变化越大）。

# c++ - 为什么在循环中调用 ReadConsole 会破坏堆栈？

> ID：11875619
> 
> 赞同：6
> 
> 时间：2012-08-09T01:38:27.830
> 
> 标签：c++, windows, winapi, stack-corruption

我使用以下代码禁用了行输入：

```
DWORD dwConsoleMode;
GetConsoleMode(hStdIn, &dwConsoleMode);
dwConsoleMode ^= ENABLE_LINE_INPUT;
SetConsoleMode(hStdIn, dwConsoleMode); 
```

然后我在一个循环中调用 ReadConsole ......在一个循环中：

```
wchar_t cBuf;

while (1) {
    /* Display Options */

    do {
        ReadConsole(hStdIn, &cBuf, 1, &dwNumRead, NULL);
    } while (!iswdigit(cBuf));

    putwchar(cBuf);

    if (cBuf == L'0') break;
} 
```

如果我运行程序并立即按 0，它就干净地存在。
但是如果我按一堆键，然后按 0，当程序存在时它会崩溃：

> 运行时检查失败 #2 - 变量“cBuf”周围的堆栈已损坏。

为什么这会导致堆栈损坏？代码很简单，所以我不知道出了什么问题。

我可以重现问题的小程序：

```
#include <windows.h>
#include <stdio.h>

int wmain(int argc, wchar_t *argv[])
{
    DWORD dwNumRead;
    wchar_t cBuf;

    HANDLE hStdIn = GetStdHandle(STD_INPUT_HANDLE);

    DWORD dwConsoleMode;
    GetConsoleMode(hStdIn, &dwConsoleMode);
    dwConsoleMode ^= ENABLE_LINE_INPUT;
    SetConsoleMode(hStdIn, dwConsoleMode);

    while (true)
    {
        wprintf(L"\nEnter option: ");

        do {
            ReadConsoleW(hStdIn, &cBuf, 1, &dwNumRead, NULL);
        } while (!iswdigit(cBuf));

        putwchar(cBuf);

        if (cBuf == L'0') break;
    }

    return 0;
} 
```

你必须在你运行它之后把你的键盘捣碎，然后按 0，它会因堆栈损坏而崩溃。

我也无法每次都重现该问题，需要尝试几次。
在创建一个新的空控制台项目并添加一个包含该代码的文件之后，我在 Visual Studio 2010 下运行它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T04:46:37.003

据我所知，这是 Windows 中的一个错误。这是一个稍微简单的程序来演示这个问题：

```
#include <windows.h>
#include <crtdbg.h>

int wmain(int argc, wchar_t *argv[])
{
    DWORD dwNumRead;
    wchar_t cBuf[2];

    cBuf[0] = cBuf[1] = 65535;

    HANDLE hStdIn = GetStdHandle(STD_INPUT_HANDLE);
    SetConsoleMode(hStdIn, 0);

    while (true)
    {
        _ASSERT(ReadConsoleW(hStdIn, &cBuf[0], 1, &dwNumRead, NULL));
        _ASSERT(dwNumRead == 1);
        _ASSERT(cBuf[1] == 65535);
        Sleep(5000);
    }
} 
```

[睡眠使触发问题变得更容易一些，只要在您调用ReadConsoleW](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684958%28v=vs.85%29.aspx)时有多个字符在等待时，就会发生该问题。

查看`cBuf[1]`相关断言失败时的内容，ReadConsoleW 似乎正在缓冲区末尾写入一个额外的字节。

解决方法很简单：确保您的缓冲区至少有一个额外的字节。在您的情况下，请使用两个字符数组的第一个字符。

# graphviz - 你如何在两个不同的rankdirs中有一个图表？

> ID：11875620
> 
> 赞同：0
> 
> 时间：2012-08-09T01:38:44.163
> 
> 标签：graphviz

我正在尝试创建思维导图。目前我有一个`rankdir = LR`.

所以看起来，

节点 ----------> 节点1

我一直在努力，

节点2 <------------- 节点-----------> 节点1

但失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:40:23.363

`dot`除非您愿意以*错误*的方式（从 Node2 --> Node）定义边缘并添加`dir=back`到边缘的属性，否则您将无法做到这一点。这对于简单的一次性图表可能没问题，但难以自动化。

对于思维导图，我会使用不同的布局算法，`neato`例如。

# android - 在android mapview上绘制大量线条和图形的策略

> ID：11875621
> 
> 赞同：1
> 
> 时间：2012-08-09T01:38:50.813
> 
> 标签：android, android-mapview

我在 Mapview 上绘制多达 100 多个图标和 100 多条线。为每条线/图标创建和覆盖是否合适，或者我应该使用单个覆盖？使用单个或多个叠加层有哪些优势？

谢谢

# jquery - 如何在不同的域上加载带有 jquery 的页面，我设置了 Access-Control-Allow-Origin: *

> ID：11875624
> 
> 赞同：0
> 
> 时间：2012-08-09T01:39:16.333
> 
> 标签：jquery

我已经设定

```
Access-Control-Allow-Origin: * 
```

但我仍然无法

```
$('element').load('http://....') 
```

我设置的域上的页面

```
Access-Control-Allow-Origin: * 
```

关于，关于为什么我仍然无法使用 jQuery 加载该页面的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:48:31.173

如果在`$.support.cors = true;`加载请求之前添加行，它将强制 jQuery 批准跨域请求。

# algorithm - 按字典顺序生成排列与排序？

> ID：11875627
> 
> 赞同：3
> 
> 时间：2012-08-09T01:40:07.267
> 
> 标签：algorithm, sorting, permutation, lexicographic

我有点困惑。以字典顺序生成排列的问题与排序问题有何不同？有人可以用一个例子向我解释吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T02:07:37.517

这是两个不同的东西。有`N!`排列，但只有一个排序顺序（排序排列在字典上是最小的）。

下面是一个排序排列的例子：

```
brown fox quick 
```

以下是按字典顺序排列的列表：

```
brown fox quick
brown quick fox
fox brown quick
fox quick brown
quick brown fox
quick fox brown 
```

[这](http://ideone.com/avGE4)是一个 C++ 程序，用于按字典顺序生成排列：

```
#include <iostream>
#include <algorithm>
#include <string>
#include <vector>

using namespace std;

int main() {
    vector<string> s;
    s.push_back("quick");
    s.push_back("brown");
    s.push_back("fox");
    sort(s.begin(), s.end());
    do {
        for(int i = 0 ; i != s.size() ; i++) {
            cout << s[i] << " ";
        }
        cout << endl;
    } while (next_permutation(s.begin(), s.end()));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:55:36.703

`Permutations`的问题中没有解决`sorting`。

它们可能相关的一种方式是，如果您生成的排列不是按字典顺序排列的，那么您可以排序以按字典顺序排列。然而，这需要有阶乘空间。生成通常一次吐出一个元素，因此不必将所有元素都保存在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:52:51.013

有一种相当简单的方法可以按字典顺序生成第 n 个排列。您在选择置换元素时所做的一组选择是：从 N 中选择 1，然后从 N-1 中选择 1，然后从 N-2 中选择 1，......然后从 2 中选择 1，最后只剩下一个。这些选择，作为正在运行的“剩下的”列表中的索引值，可以被视为可变基数。

您可以将数字从右向左发展为 d[1] = n%2, d[2] = (n/2)%3, d[3] = (n/6)%4, ... d[ k] = (n/k!) % (k+1)。结果对于第一个 (N-1) 有 d[N-1]==0！排列，d[N-1]==1 用于下一个 (N-1)!，依此类推。您可以看到这些索引值将在 lex 中。命令。然后从排序集中选择符号（如果 syms[0], syms[1], ... 符合您想要的顺序，则任何随机访问集合都可以。）

这是我为解决 Project Euler 问题而编写的一些代码。它只生成索引值，并允许从 n 中选择 k 个符号的排列。头文件默认 k 为 -1，参数检查代码将其转换为 n 并生成全长排列。这里还有一个符号变化：“index”是排列的数量（上面的“n”），“n”是集合大小（上面的“N”）。

```
vector<int> pe_permutation::getperm(long long index, int n, int k)
{

if (n<0) throw invalid_argument("permutation order (n)");
if (k<0 || k>n) 
{
    if (k==-1) 
        k=n;
    else throw invalid_argument("permutation size (k)");
}
vector<int> sset(n, 0); // generate initial selection set {0..n-1}
for (int i=1; i<n; ++i)
    sset[i] = i;

//  Initialize result to sset index values.  These are "without replacement"
//  index values into a vector that decreases in size as each result value
//  is chosen.  

vector<int> result(k,0);
long long r = index;
for (int m=n-k+1; m<=n; ++m)
{
    result[n-m] = (int)(r % m);
    r = (r / m);
}

// Choose values from selection set:

for (int i=0; i<k; ++i)
{
    int j = result[i];
    result[i] = sset[j];
    sset.erase(sset.begin()+j);
}
return result;

} // getperm(long long, int, int) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T11:28:19.637

```
import java.util.*;
public class Un{

    public static void main(String args[]){
        int[]x={1,2,3,4};

        int b=0;int k=3;
        while(b!=(1*2*3*4)){

            int count=0;
            while(count!=6){
                for(int i=2;i>0;i--){
                    int temp=x[i];
                    x[i]=x[3];
                    x[3]=temp;
                    count++;
                    System.out.println(x[0]+""+x[1]+""+x[2]+""+x[3]);
                 }

            } 
            b+=count;
            int temp=x[0];
            x[0]=x[k];
            x[k]=temp;
            k--;
       }            
 }

} 
```

# regex - 如何使用正则表达式从 Perl 中的 URL 获取主机名？

> ID：11875630
> 
> 赞同：-2
> 
> 时间：2012-08-09T01:40:46.390
> 
> 标签：regex, perl, url, host

所以我想要做的是删除所有内容，包括出现在“。”之后的第一个“/”。所以： http: [//linux.pacific.net.au/primary.xml.gz](http://linux.pacific.net.au/primary.xml.gz) 会变成： http: [//linux.pacific.net.au](http://linux.pacific.net.au)

我如何使用正则表达式来做到这一点？我运行的系统无法使用 URI 工具。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T01:58:47.347

```
$url = 'http://linux.pacific.net.au/primary.xml.gz';
($domain) = $url =~ m!(https?://[^:/]+)!;
print $domain; 
```

输出：

```
http://linux.pacific.net.au 
```

这是可用于解码 URI 的官方正则表达式：

```
 my($scheme, $authority, $path, $query, $fragment) =
  $uri =~ m|(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?|; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T02:23:18.163

我建议您使用[`URI::Split`](https://www.metacpan.org/module/URI%3a%3aSplit)它将标准 URL 分成其组成部分并重新加入它们。您需要前两部分 -*方案*和*主机*。

```
use strict;
use warnings;

use URI::Split qw/ uri_split uri_join /;

my $scheme_host = do {
  my (@parts) = uri_split 'http://linux.pacific.net.au/primary.xml.gz';
  uri_join @parts[0,1];
};

print $scheme_host; 
```

**输出**

```
http://linux.pacific.net.au 
```

* * *

**更新**

如果您的评论*我正在运行的系统无法使用 URI 工具*意味着您无法安装模块，那么这里是一个正则表达式解决方案。

你说你想*删除之后的所有内容，包括出现在“.”之后的第一个“/”。*, 所以`/^.*?\./`找到第一个点，然后`m|[^/]+|`找到下一个斜线之后的所有内容。

输出与前面代码的输出相同

```
use strict;
use warnings;

my $url = 'http://linux.pacific.net.au/primary.xml.gz';

my ($scheme_host) = $url =~ m|^( .*?\. [^/]+ )|x;

print $scheme_host; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-09T09:07:54.570

> The system I'm running on can't use URI tool.

I really recommend doing whatever you can to fix that problem first. If you're not able to use CPAN modules then you'll be missing out on a lot of the power of Perl and your Perl programming life will be far more frustrating than it needs to be.

# ruby-on-rails-3 - Rails 3.2，RSpec，Factory Girl：NameError：未初始化的常量工厂

> ID：11875634
> 
> 赞同：40
> 
> 时间：2012-08-09T01:41:25.023
> 
> 标签：ruby-on-rails-3, testing, rspec, ruby-on-rails-3.2, factory-bot

我一直在关注[这个](http://everydayrails.com/2012/03/19/testing-series-rspec-models-factory-girl.html)Rails 测试介绍，我遇到了一个我似乎找不到解决方案的问题。我非常熟悉 Rails，但这是我第一次尝试测试。

无论如何，我有一个非常基本的模型测试，甚至没有完全实现，当我尝试运行`rspec spec/models/admin_spec.rb`. 我在该行中收到以下错误`Admin has a valid factory`（下面的完整代码）

```
Admin has a valid factory
 Failure/Error: Factory.create(:admin).should be_valid
 NameError:
   uninitialized constant Factory
 # ./spec/models/admin_spec.rb:6:in `block (2 levels) in <top (required)>' 
```

我认为 FactoryGirl 由于某种原因没有被加载，但我的印象是它应该自动加载。下面是我的 Gemfile 中的完整代码，/spec/models/admin_spec.rb 和 /spec/factories/admins.rb

非常感谢您的帮助

**宝石文件**

```
source 'https://rubygems.org'

gem 'rails', '3.2.2'
gem 'mysql2'
gem 'jquery-rails'
gem 'haml'
gem 'bcrypt-ruby', :require => 'bcrypt'
gem 'bootstrap-sass', '~> 2.0.2'
gem 'capistrano'
gem 'json'
gem "paperclip", '~>3.0'
gem 'airbrake'
gem 'acts_as_list'
gem 'nested_form', :git => 'https://github.com/ryanb/nested_form.git'
gem 'bootstrap-wysihtml5-rails'
gem 'will_paginate', '~> 3.0'
gem 'bootstrap-will_paginate'
gem 'thinking-sphinx', '2.0.10'

gem 'sass-rails', '~> 3.1'
gem 'coffee-rails'
gem 'uglifier'
# gem 'compass'

group :development do
  gem 'awesome_print'
  gem 'wirble'
end

group :development, :test do
  gem 'rspec-rails'
  gem 'factory_girl_rails'
end

group :production do
  gem 'execjs'
  gem 'therubyracer'
end

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
  gem 'faker'
  gem 'capybara'
  gem 'guard-rspec'
  gem 'launchy'
end 
```

**/spec/factories/admin.rb**

```
require 'faker'

FactoryGirl.define do
  factory :admin do |f|
    f.name Faker::Name.name
    f.email Faker::Internet.email
  end
end 
```

**/spec/models/admin_spec.rb**

```
require 'spec_helper'

describe Admin do
  it "has a valid factory" do
    Factory.create(:admin).should be_valid
  end
  it "is invalid without a name"
  it "is invalid without an email"
end 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-08-09T01:55:43.280

应该是`FactoryGirl.create`。显然`Factory`已被弃用，现在已被删除，请查看您提供的链接中的评论:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-09T18:03:55.380

其实在你的`spec_helper.rb`下`Rspec.configure do...end`你可以添加

```
RSpec.configure do |config|
  config.include FactoryGirl::Syntax::Methods
end 
```

这将为您彻底省去前缀的`FactoryGirl.` 麻烦：`:build``:create`

需要'spec_helper'

```
describe Admin do
  it "has a valid factory" do
    create(:admin).should be_valid
  end
  it "is invalid without a name"
  it "is invalid without an email"
end 
```

参考：[FactoryGirl 文档](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-12T05:12:11.593

这不是您的问题的答案，但我注意到您在使用 Faker 和 FactoryGirl 时存在一个模糊的错误。对于每个 FactoryGirl.create 或 FactoryGirl.build，*f.name*和*f.email都是相同的。*

```
f.name Faker::Name.name
f.email Faker::Internet.email 
```

在 Faker 调用周围添加花括号，这样每次对 Factory 的引用都会生成随机的 Faker 数据。

```
f.name { Faker::Name.name }
f.email { Faker::Internet.email } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-05T21:49:55.090

此外，请确保您在 spec_helper.rb 文件中包含了 require 语句。

```
require 'factory_girl_rails' 
```

# javascript - div的不透明度渐变过渡

> ID：11875636
> 
> 赞同：-3
> 
> 时间：2012-08-09T01:41:34.960
> 
> 标签：javascript, css, gradient, opacity

所以....我有一些 div 元素，我想通过鼠标单击另一个元素将它们淡化为完全透明。但我不想一下子把它们全部褪去。我想以渐变的方式从左到右淡化它们，从完全不透明开始到完全透明结束。

我没有任何代码，因为我在网上找不到任何谈论这个的东西。

我感谢任何人愿意提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:24:25.437

您可以使用jQuery创建fadeIn函数和fadeOut函数，并在同一函数内的回调中调用自身，直到所有元素都被处理：

[http://jsfiddle.net/UukNh/1/](http://jsfiddle.net/UukNh/1/)

```
allDivs = $(".container div").length; // get number of elements

$(".button").click(function() {
    $(this).toggleClass('fadeIn')
    if ($(this).hasClass('fadeIn')){
        fadeOut(0); // function to hide elements
    }else{
        fadeIn(0); // function to show elements
    }
}     

var fadeOut = function(i) {  
    $("div.container div:eq("+i+")").fadeTo('slow', 0, function() {
        if(i <= allDivs ){
           fadeOut(i+1);   
        }
    })
}

var fadeIn = function(i) {
    $("div.container div:eq("+i+")").fadeTo('slow', 1, function() {
        if(i <= allDivs ){
           fadeIn(i+1);   
        }
    })
}

// This just changes the text of the button.

$('.button').toggle(function() {
    $(this).text('Fade in');
}, function() {
    $(this).text('Fade Out');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:58:34.390

将您的 div 克隆到您想要的 (n) 个实例中，每个克隆的 div 具有 (a) 宽度并彼此相邻放置

```
Original
                                                Clones
-----------------             --------------------
|               |             |   |   |   |   |   |
|               |     =>      |   |   |   |   |   |
|               |             |   |   |   |   |   |
|               |             |   |   |   |   |   |
-----------------             -------------------- 
```

现在你可以运行一个循环从左到右淡入淡出

（此技术用于 nivo 滑块）

有一个边缘 js 库[http://www.netzgesta.de/edge/](http://www.netzgesta.de/edge/)。如果为边缘设置动画会发生什么？你能试一下吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:00:40.113

看看这个[小提琴](http://jsfiddle.net/YfHN6/3/)。

这是JS：

```
var fadeDivs = $('.fadeDiv'),
    fadeDiv = (function () {
        var maxDivs = fadeDivs.length,
            i = -1;
        return function () {
            i += 1;
            if (i === maxDivs) return;
            $(fadeDivs[i]).animate({opacity: '0'}, 500, fadeDiv);
        };  
    })();;

fadeDivs[0].onclick = fadeDiv; 
```

`fadeDiv`每次上一个`div`完成动画时都会调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T00:54:32.037

您或许能够：

1.  在 div 顶部放置一个透明的 HTML5 画布
2.  在 HTML5 画布中渲染 div
3.  隐藏 div
4.  使用[alpha 透明度](http://jakearchibald.com/scratch/alphavid/)创建透明渐变效果

首先，您必须找出[在 HTML5 画布中呈现 HTML5 元素](https://stackoverflow.com/questions/2732488/how-can-i-convert-an-html-element-to-a-canvas-element)的解决方案。

如果您的 div 只是一个图像或简单的东西，您仍然可以通过自己在画布中渲染 div 的每个组件来采用这种方法

# ios - iPhone 上的 AssetsLibrary 和音乐库

> ID：11875637
> 
> 赞同：1
> 
> 时间：2012-08-09T01:42:02.940
> 
> 标签：ios, assets

我的应用程序有问题，期待您的帮助。（请原谅我糟糕的英语）

我尝试访问 AssetsLibrary 获取照片和视频，还访问音乐库以获取从 iTunes 导入的音乐（导入到我的 iPhone 的音乐，我只想从我的 iPhone 获取音乐数据。）

* * *

现在麻烦来了：

1.AssetsLibrary - 我拿到了资产，可以查看它们（照片和视频）；但是我想上传它们，有什么办法吗？（我可以通过myAsset.defaultRepresentation.fullScreenImage获取图像数据，然后上传，但是我不能对videoAsset这样做，是否可以获取视频数据？）

2.music Library - 现在我只知道一种可以访问音乐的方式（[https://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/Introduction/Introduction.html](https://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/Introduction/Introduction.html)），我可以玩、暂停、查看这些项目；我的问题是：有什么方法可以获取音乐数据？

* * *

总而言之，有什么方法可以获取我 iPhone 上的视频数据和音乐数据？

感谢您的宝贵时间，任何帮助将不胜感激。有人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:04:29.303

Google TSLibraryImport - 它可以满足您的需求。

# powershell - Power-shell 输出和优化

> ID：11875641
> 
> 赞同：1
> 
> 时间：2012-08-09T01:43:09.293
> 
> 标签：powershell, foreach, richtextbox

我是 power-shell 的新手，正在尝试编写 VMreset 脚本。我一切正常，但对某些事情有一些疑问。

下面是运行几乎所有命令的函数

我注意到有时代码需要永远运行，在我添加 End-Process、Remove-Item 和 Copy-Item 命令之前它没有

现在似乎在所有命令执行后都显示了 Write-Output。

有没有更好的方法让我这样做？

```
function OS-Windows7 {
    Foreach ($Computer in $global:ComputerList) {

    Write-Output "Starting VMReset on $Computer"
    Write-Output "Looking for active VMWare Processes to kill on $Computer"
    End-Process 'vmware-vmx'
    End-Process 'vmware'
    End-Process 'vmware-tray'
    Write-Output "Removing altered virtual machines on $Computer"
    Remove-Item \\$Computer\C$\"My Virtual Machines\*" -Force -Recurse
    Write-Output "Replacing altered virtual machines on $Computer"
    Copy-Item "\\$Computer\C$\Program Files (x86)\VMware\VMware Workstation\VM\Child\*" "\\$Computer\C$\My Virtual Machines\" -recurse -force
    Write-Output "VMReset Finished on $Computer"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:57:31.873

使用 WS-Management 处理副本和删除会更快，因为所有任务都将在远程运行。当通过远程共享而不是本地完成时，对 VM 等大文件的操作非常昂贵。

WS-管理

*   设置：[http ://technet.microsoft.com/en-us/magazine/ff700227.aspx](http://technet.microsoft.com/en-us/magazine/ff700227.aspx)
*   使用：[http ://technet.microsoft.com/en-us/library/dd819505.aspx](http://technet.microsoft.com/en-us/library/dd819505.aspx)

# windows-phone-7 - How to authenticate programmatically to UAG for SharePoint with Windows Phone app using session cookie

> ID：11875646
> 
> 赞同：1
> 
> 时间：2012-08-09T01:44:40.823
> 
> 标签：windows-phone-7, sharepoint, authentication

In a Windows Phone application, I'm trying to read SharePoint data that is protected by UAG, and want to support passing a session cookie to UAG.

The white paper, Building Windows Phone 7 applications with SharePoint 2010 Products and Unified Access Gateway (UAG), [http://technet.microsoft.com/en-us/library/hh180841.aspx](http://technet.microsoft.com/en-us/library/hh180841.aspx), demonstrates passing user credentials each time to UAG.
But, how do I store and reuse the session cookie that UAG passes back to the client?

```
    //Example from white paper
    string url = String.Format(“{0}/my/_layouts/activityfeed.aspx?consolidated=true", AppSettings.Url);
    System.Uri authServiceUri = new Uri(url);
    HttpWebRequest client = WebRequest.CreateHttp(authServiceUri) as HttpWebRequest;
    client.Headers["User-Agent"] = "Microsoft Office Mobile";
    client.Headers["Authorization"] = "Basic " 
     + Convert.ToBase64String(Encoding.UTF8.GetBytes(AppSettings.Username + ":" 
     + AppSettings.Password))+ System.Environment.NewLine;
    // Call and handle the response...

```

This Blog Post, Developing Windows Phone 7 Applications for SharePoint 2010, [http://blogs.msdn.com/b/pstubbs/archive/2010/10/04/developing-windows-phone-7-applications-for-sharepoint-2010.aspx](http://blogs.msdn.com/b/pstubbs/archive/2010/10/04/developing-windows-phone-7-applications-for-sharepoint-2010.aspx), shows how to authenticate with FBA and pass a cookie with request. But I don't know how much of this applies to UAG.

```
    private void Authenticate()
    {
    System.Uri authServiceUri =new Uri("http://phone.contoso.com/_vti_bin/authentication.asmx");

    HttpWebRequest spAuthReq = HttpWebRequest.Create(authServiceUri) as HttpWebRequest;
    spAuthReq.CookieContainer = cookieJar;
    spAuthReq.Headers["SOAPAction"] = "http://schemas.microsoft.com/sharepoint/soap/Login";
    spAuthReq.ContentType = "text/xml; charset=utf-8";
    spAuthReq.Method = "POST";

    //add the soap message to the request
    spAuthReq.BeginGetRequestStream(new AsyncCallback(spAuthReqCallBack), spAuthReq);
    }

    // After authenticated and cookie is set
    ListsService.ListsSoapClient lists = new ListsService.ListsSoapClient();
    lists.CookieContainer = cookieJar;

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:17:41.620

在某些情况下，这两种方法都适用于 UAG。如果您使用 HttpWebRequest，您可以通过在每次调用中设置基本授权和用户代理标头来向 UAG 进行身份验证。您不必将 cookie 传递给 UAG。SharePoint 将在下一次响应时返回数据。

您还可以修改上述 FBA 示例，使其适用于 UAG：您必须在 Authenticate 方法中添加 useragent 和基本身份验证标头。

```
spAuthReq.Headers["User-Agent"] = "Microsoft Office Mobile";
spAuthReq.Headers["Authorization"] = "Basic " . . . 
```

情侣小贴士：

*   由于您将使用 HTTPS，因此您还需要将 clientconfig 安全模式更改为传输。
*   在开始开发之前，针对您的 UAG/SharePoint 环境测试[Office Hub 。](http://www.windowsphone.com/en-us/how-to/wp7/office/office-hub)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:30:35.750

UAG 对 cookie 进行签名，这意味着每次用户登录时都会对它们进行混淆。UAG 也不进行 cookie 登录 - 它使用它们进行会话。

# python - Python: Plot Similarity Values for each Key of the Dictionary

> ID：11875651
> 
> 赞同：1
> 
> 时间：2012-08-09T01:45:14.647
> 
> 标签：python, dictionary, matplotlib

I have extracted images and have constructed two dictionaries that has file path as the key and list containing image digest data as a list.

Just to give an example lets say we have dictionary `a = {}`, which eventually looks like `{'fileName' : [ 'x=1,2,3','y=1,2,3','z=1,2,3'... ]}`

Here is the how my actual dictionary looks like:

```
{'/Users/cannon/AmazonBasics-Wireless-Remote-Control-for-Nikon-P700030004040x50500051006070700070s80-and90igital-SLR-Cameras.jpg': [
'fcolor=2,3,0,80,125,15,5,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0', 'edge=1,224,3,98,48,4,66,72,70,32,4,34,16,14,161,9,68,128,7', 'texture=1,173,20,9,5,3,3,4,34'],

'/Users/cannon/Sony-50mm-f-1.4-Lens-for-Sony-Alphaigital-SLR-Camera.jpg': [
'fcolor=2,111,1,18,100,1,0,0,0,0,0,0,0,0,0,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0', 'edge=1,252,35,64,99,236,127,0,17,0,1,16,139,241,24,128,2,132,31', 'texture=1,92,52,25,17,14,9,7,34']} 
```

I have written a function that accepts two dictionaries like I have mentioned above and for each key in one dictionary iterate over for each key in the second dictionary and calculate the cosine values.

The dictionary has three type of values dumped into a list, fcolor, edge, and texture. My function calculates the dot product for each value in the list for each key in both dictionaries.

**Question:** What I want to do is for each key Ka dictionary A I want to plot all the values for Dictionary B, Kb.

Here is my current code:

```
def cosignSimilarity(aImageVectDict, eImageVectDict):
    #cx = lambda a, b : round(np.inner(a, b)/(LA.norm(a)*LA.norm(b)), 3)
    fo = open('/Users/AbovePointNine.txt','w')
    f1 = open('/Users/AbovePoint8.txt','w')
    pltfColor = []
    pltEdgeColor = []
    pltTexture = []
    #converting the string of vectors into numpy arrays and calculate cosine similarity
    for (fn1, lst1), (fn2, lst2) in product(aImageVectDict.iteritems(), eImageVectDict.iteritems()):
        print fn1
        print fn2
        fcolorCosine = None
        edgeColorCosine = None
        textureColorCosine = None
        for vector1, vector2 in zip(lst1, lst2):
            cx = None
            cx = lambda a, b : round(np.inner(a, b)/(LA.norm(a)*LA.norm(b)), 3)
            v1fColor = vector1.split('=')[1]
            debug1 = v1fColor
            v2fColor = vector2.split('=')[1]
            debug2 = v2fColor
            if (vector1.split('=')[0] == 'fcolor' and vector2.split('=')[0] == 'fcolor'):
                v1fColor =  np.array(map(int,v1fColor.split(',')))
                v2fColor =  np.array(map(int,v2fColor.split(',')))
                fcolorCosine = cx(v1fColor, v2fColor)
                print fcolorCosine
                pltfColor.append(fcolorCosine)
            v1Edge = vector1.split('=')[1]
            v2Edge = vector2.split('=')[1]
            if (vector1.split('=')[0] == 'edge' and vector2.split('=')[0] == 'edge'):
                v1Edge = np.array(map(int,v1Edge.split(',')))
                v2Edge = np.array(map(int,v2Edge.split(',')))
                edgeColorCosine = cx(v1Edge, v2Edge)
                print edgeColorCosine
                pltEdgeColor.append(edgeColorCosine)
            v1Texture = vector1.split('=')[1]
            v2Texture = vector2.split('=')[1]
            if (vector1.split('=')[0] == 'texture' and vector2.split('=')[0] == 'texture'):
                v1Texture = np.array(map(int,v1Texture.split(',')))
                v2Texture =  np.array(map(int,v2Texture.split(',')))
                textureColorCosine = cx(v1Texture, v2Texture)
                print textureColorCosine
                pltTexture.append(textureColorCosine)
            if (fcolorCosine > 0.9 and edgeColorCosine > 0.9 and textureColorCosine > 0.9):
                fo.write(fn1)
                fo.write('\n')
                fo.write(fn2)
                fo.write('\n')
                fo.write(str(fcolorCosine))
                fo.write('\n')
                fo.write(str(edgeColorCosine))
                fo.write('\n')
                fo.write(str(textureColorCosine))
            if (fcolorCosine > 0.8 and edgeColorCosine > 0.8 and textureColorCosine > 0.8):
                f1.write(fn1)
                f1.write('\n')
                f1.write(fn2)
                f1.write('\n')
                f1.write(str(fcolorCosine))
                f1.write('\n')
                f1.write(str(edgeColorCosine))
                f1.write('\n')
                f1.write(str(textureColorCosine))
    fo.close()
    f1.close()

    #Plotting 
    plt.plot(pltfColor, 'r.')
    #plt.plot(pltEdgeColor, 'b.')
    #plt.plot(pltTexture, 'g.')
    plt.ylabel('cosine values')
    #plt.yscale('log')
    plt.show()
    fo.close() 
```

Once again just to confirm what I really want is for each key in Dictionary `A` I want to find out all the results in dictionary `B`

# windows - 启动时未评估 Vim autocmd FileType

> ID：11875652
> 
> 赞同：0
> 
> 时间：2012-08-09T01:45:18.360
> 
> 标签：windows, vim

我已经写了

```
autocmd! FileType tex set nonumber 
```

在我的`_vimrc`（运行 Windows）中，但是当我打开我的时，`test.tex`我仍然看到行号。如果在打开文件后键入，`set filetype=tex`那么行号就会消失。

我如何在打开文件时对其进行评估？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:54:36.543

尝试

```
autocmd! FileType plaintex set nonumber 
```

# c# - 动态创建文本框并按像素设置其位置

> ID：11875655
> 
> 赞同：0
> 
> 时间：2012-08-09T01:45:28.470
> 
> 标签：c#, .net, wpf, textbox

在 WPF 应用程序中，我想动态创建一个文本框，它将显示在应用程序的前面，并且能够按像素自由设置其位置。（文本框将跟随鼠标光标）。

这很容易在 Winforms 中即时完成，但 WPF 让事情变得……在按像素设置控件的位置时有点奇怪，因为我必须将控件添加为容器的子项。我知道这在 Canvas 上肯定是可行的，但我实际上拥有的是一个停靠面板，左边有一个丰富的文本框，右边有一个数据网格。

那么我在这里有什么选择呢？我必须使用画布吗？我可以使用停靠面板（或网格）来实现我想要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:59:59.633

您可以使用 a`Canvas`或 a `Grid`。如果使用 a `Canvas`，请设置`Canvas.Left`属性和`Canvas.Top`属性。如果你使用 a `Grid`，你需要为你的`TextBox`，设置`HorizontalAlignment`to`Left`和`VerticalAlignment`to设置一个大小`Top`。要更改 的位置`TextBox`，请为其分配`MarginLeft`和的值`MarginTop`。

# php - 使用 AM 和 PM 将 MySQL 时间转换为标准时间

> ID：11875657
> 
> 赞同：0
> 
> 时间：2012-08-09T01:46:14.090
> 
> 标签：php, mysql, time

使用 PHP date() 函数时，无法从 MySQL fetch_array 转换 AM 时间值。不知道为什么下面的停止时间被打印为晚上 7:00，而应该是上午 11:00。有任何想法吗？任何帮助深表感谢！

```
<?php
$mysql_output = array('start' => '19:00:00','stop' => '11:00:00');

$start_time = date('g:iA',$mysql_output['start']);
$stop_time = date('g:iA',$mysql_output['stop']);

echo "<p>start_time: $start_time</p>";
echo "<p>stop_time: $stop_time</p>";
?> 
```

结果无法正确转换 AM 时间；**stop_time**应为上午**11:00**：

 **```
start_time: 7:00PM
stop_time: 7:00PM 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T01:54:58.070

该`date()`函数采用 Unix 时间戳，而不是字符串 datetimestamp。您需要先放置一个 MySQL 日期时间戳`strtotime()`。

```
$start_time = date('g:iA', strtotime($mysql_output['start']));
$stop_time = date('g:iA', strtotime($mysql_output['stop'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:58:58.353

如果您希望 mysql 为您转换它，只需使用[**DATE_FORMAT( )**](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数。

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/6861a/5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T01:55:29.020

日期函数误解了您的数据。

您应该首先创建一个时间对象，然后将其作为参数传递给日期。**

# c# - 导航到不同类别时，JQuery ASP.NET MVC 拖放购物车不保留购物车项目

> ID：11875658
> 
> 赞同：0
> 
> 时间：2012-08-09T01:46:24.940
> 
> 标签：c#, jquery, asp.net-mvc, json

我对 ASP.NET MVC 和 JQuery 非常陌生，我已经在 ASP.NET MVC、JQuery 和 C# 中建立了一个电子商务网站。[我使用了来自http://www.codeproject.com/Articles/301620/Drag-Drop-Shopping-Cart-Using-Asp-net-MVC-and-JQuery](http://www.codeproject.com/Articles/301620/Drag-Drop-Shopping-Cart-Using-Asp-net-MVC-and-JQuery)的拖放模型， 这很棒。我已经修改了 JQuery 以满足我在数据检索、回发数据等方面的所有需求。

我遇到的问题是我有不同的产品类别使用我的 products.cshtml（视图），所以当用户想要向当前购物车添加更多商品并导航到新类别时，购物车中的所有现有商品都会被删除回发发生。我的问题是导航到不同类别时如何将当前商品保留在购物车中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:05:23.993

您需要将购物车的更改保存在某处。某处可能是 cookie、数据库、会话等。我建议将其保存到数据库中。要将其保存到数据库，可能有多种方法，但您需要确保在服务器端调用操作，只要您使用 jQuery 和 Drag&Drop，这可能是对 MVC 操作的 ajax 调用，这将保存购物车内容.

如果您查看您提到的文章的评论，我认为有将购物车内容保存到数据库的解决方案。

# c - Detect multiple cycle in linked list

> ID：11875659
> 
> 赞同：0
> 
> 时间：2012-08-09T01:46:31.883
> 
> 标签：c, algorithm, pointers, data-structures, linked-list

I want to detect loop in following cases

```
1-2-3-4-5
|----------| ===> case 1

1-2-3-4-5
|-------|    ===> case 2 
```

In case 1 cycle detection algorithm works correctly but not for case 2. I did dry run for case 2 I found that hare pointer ends normally. Also I thought that case 2 is not valid singly linked list as it contains 2 next pointer. Is my assumption correct for case 2? The whole scenario is for singly linked list?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:54:39.687

这是一个不涉及分配堆内存的循环检测解决方案：

```
struct Node {
   int val;
   struct node * next;
};

bool containsCycle(Node * head)
{
   Node * walker = head;
   NOde * fastWalker = head;  
   while(walker && fastWalker)
   {
      fastWalker = fastWalker->next;
      if(walker == fastWalker)
         return true;
      if(fastWalker)
        fastWalker = fastWalker->next;
      if(walker == fastWalker)
         return true;
      walker = walker->next;
   }
   // Fell out of the loop, no cycle
   return false;
} 
```

该算法使用两个以不同速度前进的指针。如果列表中有一个循环，则其中两个指针将在某一点彼此相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:20:41.890

我将根据您所要求的一系列假设给出答案。

我猜你的格式搞砸了，你正在使用一个由节点结构构建的单链表，该节点结构有一个名为“next”的指针。

我还假设您有一个指向列表第一个元素的指针，称为 Root。

接下来，我假设您的算法包括存储根的副本，然后遍历列表以查看您是否回到根。

这将适用于以下情况：

```
A -> B -> C -> D -> E   //and E -> A. 
```

但如果

```
A -> B -> C -> D -> E   //and E -> B. 
```

一种方法是在您行走时标记每个访问过的节点，或者通过在结构中添加一个新字段，或者保留一个哈希表，然后查看是否获得了重复元素。

（实际上，您可以只将每十个节点添加到哈希表中，但根据哈希表检查每个访问的节点是否有重复项）。

如果您提前知道链表中有多少元素（并且它没有被修改），那么简单地走很多次，看看下一个节点是否为空。

# ruby-on-rails - link_to 不使用变量 url

> ID：11875661
> 
> 赞同：0
> 
> 时间：2012-08-09T01:46:38.460
> 
> 标签：ruby-on-rails, params, link-to

我有一个使用 link_to 将参数传递给控制器​​的视图。url 是一个变量。有些东西不工作。我会很感激任何线索。谢谢！

```
<% url1 = dialogs_path(@dialogId) %>
<%= url1 %>
<%= link_to "Go!", url1(:uid1 => @uid1, :uid2 => @uid2), :id => "my_link" %> 
```

url1 显示正确。但是，执行 link_to 会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:50:49.567

你应该`dialog_path(@dialogId)`改用。

您正在尝试查看特定对象，它是单一的并且是 rails 所期望的。看看这里： http: [//guides.rubyonrails.org/routing.html#paths-and-urls](http://guides.rubyonrails.org/routing.html#paths-and-urls)

你使用 url 的方式让我很困惑，试试这样的：

```
<%= link_to "Go!", dialog_path(@dialogId, :uid1 => @uid1, :uid2 => @uid2), :id => "my_link" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:45:10.883

url1 应定义为：

```
<% url1 = dialogs_path(@dialogId)+'?uid1=' + @uid1 + '&uid2=' + @uid2% , :id => "my_link" %> 
```

link_to 应该是：

```
<%= link_to "Go!", url1, :id => "my_link" %> 
```

# javascript - 登陆页面前的对话框

> ID：11875662
> 
> 赞同：0
> 
> 时间：2012-08-09T01:46:57.973
> 
> 标签：javascript, html, dojo

我有一个问题要问所有 html 和 dojo 的人。我希望当用户点击网页时，在一些纯色背景上登陆 dojo 对话窗口。在用户填写一些信息的几个对话框之后，我将加载所有 dojo 小部件并显示底层页面。如果可能的话，我还想尝试在后台加载 dojo。我找到了这篇文章：[http](http://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/) ://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/ ，但是如果我将小部件放在过度的 div 中，它不会显示小部件，只有如果我有一些文字或链接。我尝试在我的小部件上应用相同的 css 规则，并将其包含在 js 代码中，但仍然没有。如果可能的话，我也会感谢其他一些方法。

我要做的就是在开始时在纯背景上显示一些对话框，在用户准备好后，我将显示带有地图和小部件的页面。非常感谢提前

div里面的道场：

```
dojo.require("dijit.Dialog");
```

```
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.9.3/dojo/dojo.js.uncompressed.js" djConfig="parseOnLoad:true"></script>
<div id="overlay">
  <div>
    <div data-dojo-type="dijit.Dialog" style="width:100px; height:100px; background-color:#000077;" id="first">

      <button onclick="hideDialog();">
        Delete
      </button>
      <button onclick="cancel();">
        Cancel
      </button>
    </div>

    <a href='#' onclick='overlay()'>close</a>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:28:43.737

有一个简单的方法，只需将您的“真实”页面“包装”在隐藏元素中。由于您使用的是声明性标记 - 您需要完成 domReady 事件（即通常的 body.onload）才能显示对话框。事先，dojo.parser 没有运行，dojo-types 将只是 dom 节点。

所以，尝试这样设置：

```
dojo.require("dijit.Dialog");
```

```
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.9.3/dojo/dojo.js.uncompressed.js" djConfig="parseOnLoad:true"></script>

<body class="dijitThemeHere" style="display:none">
  <div id="wrapper" class="fakeBodyWrapper">
    Here is my homepage It has a blah blah blah - select you options on how page should render in dialog (this will never be visible to user)
  </div>
  <div data-dojo-type="dijit.Dialog" style="width:100px; height:100px; background-color:#000077;" id="first">
    This is my initial dialog contents
  </div>
  <script type="text/javascript">
    // dojo.js needs to be loaded here ofc
     // will use opacity - via dojo/dom-style to avoid having css hacks
     // doing so, will render the box model and calculate 
     // a width/height/position as opposed to setting display:none
     //
     // you should realize that any <script> tags above this
     // will delay hiding wrapper - so note that body has display none until now
    dojo.style(dojo.body(), "display", "");
    dojo.style(dojo.byId('wrapper'), "opacity", "0");
    dojo.addOnLoad(function() {
      dijit.byId('first').show();
      dijit.byId('first').onHide = function() {
        dojo.style(dojo.byId('wrapper'), "opacity", 1);
      };
    })
  </script>
</body>
```

# linux - 邮件：选项必须先于人

> ID：11875663
> 
> 赞同：1
> 
> 时间：2012-08-09T01:47:03.730
> 
> 标签：linux, email, shell, unix, solaris

我正在尝试通过使用 mail 指定 from 选项来发送电子邮件。

```
echo "This is the main body of the mail" | mail -s "Subject of the Email" 
recipent_address@example.com -- -f from_user@example.com 
```

每当我尝试上述命令时，我总是会收到错误 -

```
mail: Options MUST PRECEDE persons 
```

而且我没有收到任何电子邮件。为什么会这样？

我正在跑步`SunOS`

```
bash-3.00$ uname -a
SunOS lvsaishdc3in0001 5.10 Generic_142901-02 i86pc i386 i86pc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:32:32.583

**编辑** 您的标题表明一件事，现在我看到您想传递发件人是谁。根据下面手册页的引用，`-f`并不意味着`from`.

为什么需要这样做，您的邮件客户端和 sendmail 会正确设置您的“发件人”标头？（请通过编辑您的问题来回答这个问题，而不是作为下面的评论:-)）。

**结束编辑**

您收到错误消息的原因是，对于几乎所有 Unix 命令（包括`mail`），使用`--`指示程序（邮件）'END OF OPTIONS'。

因此，您`-f`将不会按预期处理。你为什么不做

```
echo "This is the main body of the mail" | mail -s "Subject of the Email" \
 -f from_user@example.com recipent_address@example.com 
```

？？？

对于我可以找到在线手册页的两个 mail(*) 程序，它们都有类似的`-f`选项：

```
 -f [file]       Read messages from file instead of  mailbox.
                     If no file is specified, the mbox is used. 
```

那是你的意图吗？而且，换句话说，`-f user@example.com`除非您有这样命名的邮箱文件，否则您的使用似乎没有意义。

IHTH

# django - django/tastepie 基本身份验证适用于开发，而不是生产

> ID：11875668
> 
> 赞同：1
> 
> 时间：2012-08-09T01:47:56.093
> 
> 标签：django, rest, authentication, basic-authentication, tastypie

我正在用 django/tastpie 构建一个 RESTful api。在我的开发（本地）环境中运行时，一切正常，并且验证正确。

```
Marks-MacBook-Pro:~ mshust$ curl http://127.0.0.1:8000/api/v1/speedscreen/ -H 'Authorization: Basic bXNodXN0MToyMjY3' -v
* About to connect() to 127.0.0.1 port 8000 (#0)
        *   Trying 127.0.0.1...
        * connected
        * Connected to 127.0.0.1 (127.0.0.1) port 8000 (#0)
                > GET /api/v1/speedscreen/ HTTP/1.1
                > User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
                > Host: 127.0.0.1:8000
                > Accept: */*
                > Authorization: Basic bXNodXN0MToyMjY3
>
* HTTP 1.0, assume close after body
< HTTP/1.0 200 OK
< Date: Thu, 09 Aug 2012 01:36:05 GMT
< Server: WSGIServer/0.1 Python/2.7.2
< Content-Type: application/json; charset=utf-8
<
* Closing connection #0
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 0}, "objects": []} 
```

但是，当我在生产服务器上运行它时（apache + wsgi over https），我不断收到 401 Unauthorized 响应（出于安全原因更改了域/IP）

```
Marks-MacBook-Pro:~ mshust$ curl https://www.domain.com/api/speedscreen/ -H 'Authorization: Basic bXNodXN0MToyMjY3' -v
* About to connect() to www.domain.com port 443 (#0)
*   Trying 231.23.102.140...
* connected
* Connected to www.domain.com (231.23.102.140) port 443 (#0)
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server key exchange (12):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using DHE-RSA-AES256-SHA
* Server certificate:
*    subject: O=www.domain.com; OU=Domain Control Validated; CN=www.domain.com
*    start date: 2012-07-18 13:30:31 GMT
*    expire date: 2014-07-18 13:30:31 GMT
*    subjectAltName: www.domain.com matched
*    issuer: C=US; ST=Arizona; L=Scottsdale; O=GoDaddy.com, Inc.; OU=http://certificates.godaddy.com/repository; CN=Go Daddy Secure Certification Authority; serialNumber=07969287
*    SSL certificate verify ok.
> GET /api/speedscreen/ HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: www.domain.com
> Accept: */*
> Authorization: Basic bXNodXN0MToyMjY3
> 
< HTTP/1.1 401 UNAUTHORIZED
< Date: Thu, 09 Aug 2012 01:36:00 GMT
< Server: Apache/2.2.22 (Ubuntu)
< Vary: Accept-Encoding
< Content-Length: 0
< Content-Type: text/html; charset=utf-8
< 
* Connection #0 to host www.domain.com left intact
* Closing connection #0
* SSLv3, TLS alert, Client hello (1): 
```

有人知道这里会发生什么吗？我完全被难住了。

谢谢，马克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T02:52:22.007

通常，对于 cURL，基本身份验证是这样完成的：

```
curl -u "user:password" 
```

也许在你的情况下：

```
curl -u "bXNodXN0MToyMjY3" 
```

如果将其更改为该格式不起作用，则可能您在`.htaccess`文件或 apache 配置中设置了基本身份验证，它在进入您的 WSGI 应用程序之前获取了身份验证。

此外，对于 apache 和 mod_wsgi，您需要根据[这篇文章](http://www.nerdydork.com/basic-authentication-on-mod_wsgi.html)`WSGIPassAuthorization On`添加设置。

# emacs - 如何在emacs lisp中指定变量的属性值

> ID：11875671
> 
> 赞同：3
> 
> 时间：2012-08-09T01:48:08.590
> 
> 标签：emacs, lisp, elisp, org-mode

我在 .emacs 文件中使用以下代码来设置默认发布行为。我将 org 基本目录放在不同计算机的不同位置：

```
;; define machine specific directories storing my org files
(cond ((system-name-is-home) (setq org-dir "/data/org"))
      ((system-name-is-work) (setq org-dir "~/org"))) 
```

因此，我想使用一个变量来指定`:base-directory`，`org-dir`而不是将其硬编码为`"~/org"`. 我怎样才能做到这一点？

```
(require 'org-publish)
(setq org-publish-project-alist
      '(
        ("org-notes"
         :base-directory "~/org"
         :base-extension "org"
         :publishing-directory "~/tmp/"
         :recursive t
         :publishing-function org-publish-org-to-html
         :headline-levels 4
         :auto-preamble t

         :auto-sitemap t          ; Generate sitemap.org automagically ...
         :sitemap-filename "sitemap.org" ; ... call it sitemap.org (the default) ...
         :sitemap-title "Sitemap" ; ... with title 'Sitemap'.
         )
        ("org-static"
         :base-directory "~/org"
         :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf"
         :publishing-directory "~/tmp/"
         :recursive t
         :publishing-function org-publish-attachment
         )
        ("org" :components ("org-notes" "org-static"))
        )) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T02:09:11.220

一种方法是使用```（反引号）和`,`（逗号）。来自[GNU Emacs Lisp 参考手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Backquote.html)，

> 反引号结构允许您引用列表，但有选择地评估该列表的元素。在最简单的情况下，它与特殊形式相同`quote`。(...) 反引号参数中的特殊标记 ' `,`' 表示一个不是常量的值。Emacs Lisp 求值器求值 ' `,`' 的参数，并将值放入列表结构中。

因此，您可以按如下方式编写程序：

```
(require 'org-publish)
(setq org-publish-project-alist
      `(                              ; XXX: backquote
        ("org-notes"
         :base-directory ,org-dir     ; XXX: comma
         :base-extension "org"
         :publishing-directory "~/tmp/"
         :recursive t
         :publishing-function org-publish-org-to-html
         :headline-levels 4
         :auto-preamble t

         :auto-sitemap t          
         :sitemap-filename "sitemap.org" 
         :sitemap-title "Sitemap"
         )
        ("org-static"
         :base-directory ,org-dir     ; XXX: comma
         :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf"
         :publishing-directory "~/tmp/"
         :recursive t
         :publishing-function org-publish-attachment
         )
        ("org" :components ("org-notes" "org-static"))
        )) 
```

# facebook - Like buttons showing different values for same link

> ID：11875674
> 
> 赞同：1
> 
> 时间：2012-08-09T01:49:02.293
> 
> 标签：facebook, facebook-like

Got a problem that has been bugging me for a few days now

On the following page:

```
notable.ca/stoli/CASIESTEWART/ 
```

for the first image the FB like button shows '9' (at the time of this post)

On this page for the same url

```
notable.ca/stoli/casiestewart/254/ 
```

the like button shows '2' (at the time of this post)

When i query using the facebook tool it also shows '2' (at the time of this post)

```
https://api.facebook.com/method/fql.query?query=SELECT+url%2C+normalized_url%2C+share_count%2C+like_count%2C+comment_count%2C+total_count%2C+commentsbox_count%2C+comments_fbid%2C+click_count+FROM+link_stat+WHERE+url%3D%22notable.ca/stoli/casiestewart/254/%22 
```

Does anyone know how two facebook buttons can be showing different numbers for the same URL?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:14:33.937

# iphone - 这是 iPhone 游戏的 3d 还是 2d 角色？

> ID：11875678
> 
> 赞同：0
> 
> 时间：2012-08-09T01:50:12.853
> 
> 标签：iphone, animation, graphics

我正在制作一个 iphone 游戏，并且需要一些图形。我想知道我需要的图形是 2d 还是 3d。我只有几个不同的动作，我的角色不会在用户交互时旋转。基本上，如果你能想象一个棋盘，我需要看到我的角色能够向前移动，向右转并向前移动，向左转并向前移动。所以基本上只是在鸟瞰图的各个方向上移动棋盘。然而，当他向后移动（或真正面对 180 度并向前移动）时，我需要他能够看到他的脸，我不希望他面对前面并从字面上向后走。那么，这是 3d 工作还是 2d 工作？这会被认为是精灵还是它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:57:02.960

我认为你需要一个 3D 的。考虑到您希望在角色上有一个鸟瞰视图（我假设您在 3rd view rpg 游戏中使用的视图），因此您不会通过可以用 sprite 实现的侧视图来查看它。

另一点是使用低多边形、皮肤良好的 3D 模型的最终产品会好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T02:12:21.360

Sprites 将是您的最佳答案。如果您查看旧的 RTS 游戏，您会注意到它们实际上是精灵，而不是真正的 3D 模型。这是为了在屏幕上显示更多的实体。处理你之前的问题。向您的设计师询问 3D 模型，然后将其输出为 2D gif。您甚至可能想在游戏中查看精灵和适当的 3D 模型之间的交换来完成您的要求，而不是只使用一种方法。

最后，与其打开一个新问题，不如编辑你以前的问题。这可以阻止重复条目的累积，并且更加整洁。我还建议去[UDK 论坛](http://forums.epicgames.com/forums/366-UDK)，甚至是专门用于 3D/游戏开发的堆栈交换姐妹网站（我没有检查过，但应该有一个）。即使您不使用 UDK 框架，也可以查看社区以了解更多信息。

# java - SQLite where 子句

> ID：11875679
> 
> 赞同：0
> 
> 时间：2012-08-09T01:50:17.177
> 
> 标签：java, android, sqlite, compiler-errors, where-clause

我想根据 LOCID 选择一些行。我怎么不能写 where 子句，它给出了一个编译错误，说不兼容的操作数类型说 String 和 int。

```
String selectQuery = "SELECT  * FROM " + TABLE_LOCATIONAPPS + " WHERE " 
    + KEY_LOCID == id; 
```

这是创建查询，

```
String query1 = "CREATE TABLE " + TABLE_LOCATIONLABLES + "("
            + KEY_LOCID + " INTEGER PRIMARY KEY," + KEY_LOCNAME + " TEXT,"
            +  ")"; 
```

LOCID 类型是 int 可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T01:53:30.927

您没有正确构造字符串。您需要将相等比较作为字符串的一部分。

```
String selectQuery = "SELECT  * FROM " + TABLE_LOCATIONAPPS + " WHERE " 
    + KEY_LOCID + " = " + id; 
```

这只是说明为什么手动构造 SQL 字符串不是一个好主意的一个例子。除了这些类型的错误之外，您还会遇到 SQL 注入问题。这是当您的输入未正确清理并且 SQL 命令最终执行您不打算执行的操作时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T02:04:19.903

我建议不要基于串联字符串执行过滤。这使您[面临 SQL 注入攻击](https://www.owasp.org/index.php/SQL_Injection)。（这里有一些[例子说明它是如何工作的](http://www.unixwiz.net/techtips/sql-injection.html)。）

更安全的解决方案是：

```
String selectQuery = "SELECT * FROM " + TABLE_LOCATIONAPPS + " WHERE KEY_LOCID = ?"
PreparedStatement pstmt = connection.prepareStatement(selectQuery);
pstmt.setInt(1, id);
ResultSet rs = pstmt.executeQuery(); 
```

（这也为通过准备好的语句重用提高性能打开了大门。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T01:54:39.520

在我看来，您实际上并没有在查询中进行比较，而是使用 Java 来比较 KEY_LOCID 和 ID。

尝试：`String selectQuery = "SELECT * FROM " + TABLE_LOCATIONAPPS + " WHERE KEY_LOCID == " + id;`

# javascript - Given a dom element, how could I flatten it in jquery and/or JavaScript?

> ID：11875684
> 
> 赞同：2
> 
> 时间：2012-08-09T01:51:03.317
> 
> 标签：javascript, jquery, html, dom, cross-browser

Let's say I get an element from the dom:

```
[<div id="generic-wrapper"> ... </div>] 
```

How could I flatten it to include all elements inside?

EDIT: "generic-wrapper" is an arbitrary id, it could be anything. It could also be nested, as in wrappers within wrappers.

EDIT2: I want the final array to include all of the content of the original array, just flattened. This includes the wrapper. Is there a systematic way to construct and iterate through an array such as the one I am describing? Thanks again and apologies for the confusion.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T01:55:49.767

一次全选：

```
var $allElements = $("#wrapper,#wrapper *") 
```

我不确定您是否要排除包装元素本身，但如果是这样，只需使用`"#wrapper *"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T01:55:04.267

**更新：**

“简单”的解决方案：

```
var domElements = [<div id="generic-wrapper">...</div>];

$.merge( domElements, $(domElements).find('*')); 
```

* * *

更好的解决方案：

听起来你想要做的是，给定一个 dom 元素数组，将它们的每个后代添加到数组中。如果您使用 jQuery 进行预期的 DOM 操作，您应该直接**选择它们**（*如下面的代码示例所示*）。这将返回一个 jQuery 对象，该对象具有可用于基本数组索引的底层数组结构。如果需要得到一个真正的数组，可以使用对象的[`.toArray()`](http://api.jquery.com/toArray/)方法。jQuery 对象通常更有用，因为您可以轻松地操作所有匹配的元素（并且您也可以使用 迭代它们[`.each()`](http://api.jquery.com/each/)）。

Select`#wrapper`及其所有后代（如果 id 存储在变量中，则替换`'#wrapper'`为`'#'`+ 变量名。）

```
var domElements = $('#wrapper, #wrapper *'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T01:53:19.430

An HTML string?

```
$('<div>').append($('#wrapper').clone()).html(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-03T17:17:03.437

这是您在展平选择时不必知道父选择器的 id 的地方：

```
var x = $('selector for the parent element');
var y = x.add($('*', x)); 
```

这个怎么运作：

假设你有一个这样的 html 结构：

```
<div id="foo">
  <ul>
    <li></li>
  </ul>
</div> 
```

所以第一行，`var x = $('#foo')`选择包装器。

第二行将`var y = x.add($('*', x))`获取您选择的包装器，并向其中添加包装器内包含的每个元素的递归选择。最终结果如下所示：

```
[<div id="foo">...</div>, <ul>...</ul>, <li></li>] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-05T19:55:34.600

这是一个**香草JS**解决方案。它接受一个 DOM 元素并返回一个列表。

```
function flatten(element) {
    const elements = [];
    for (let child of element.childNodes) {
        if (child.childElementCount == 0)
            elements.push(child)
        else
            elements.push(...flatten(child));
    }
    return elements
} 
```

例如，这将采用一个 DOM 对象，如：

```
<svg>
  <g>
    <g>
      <polygon points="..."/>
      <polygon points="..."/>
    </g>
    <path d="..."/>
    <path d="..."/>
  </g>
</svg> 
```

并输出：

```
[<polygon>, <polygon>, <path>, <path>] 
```

旁注：如果您需要的是就地展平 DOM 对象的东西，请查看[此 gem](https://github.com/Jack000/SVGnest/blob/1248dc21efd3f90d1aa52ba5785e27e5217ed2c9/svgparser.js#L453)。

# mysql - 我们可以从 select 命令（而不是其他表）中创建一个包含临时信息的虚拟表吗？

> ID：11875687
> 
> 赞同：0
> 
> 时间：2012-08-09T01:51:30.940
> 
> 标签：mysql, delphi, zeos

我需要用 ENUM 列的选项填充 TDBLookupComboBox：

```
MOD_MARKETING       ENUM('NENHUMA','CONSULTAR','CADASTRAR','GERENCIAR') 
```

但我不想仅仅为此在数据库项目中创建一个新表。我不想使用辅助表。仅包含用户内容的表格。

那么，每次打开我的应用程序并放置这四行而不触及服务器上的数据库结构时，如何创建一个临时虚拟表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:14:50.350

我找到了 DevArt 的一个名为 VirtualTable 的组件。

它完全符合我的需要。

[http://www.devart.com/vtable/](http://www.devart.com/vtable/)

# file - Test uploaded file using php system() function

> ID：11875688
> 
> 赞同：0
> 
> 时间：2012-08-09T01:51:31.927
> 
> 标签：file, upload, system

I see in the thread: [How to check file types of uploaded files in PHP?](https://stackoverflow.com/questions/310714/how-to-check-file-types-of-uploaded-files-in-php) davr suggests the use of:

```
system("file -bi $uploadedfile") 
```

to check the file type as a safety measure. porneL makes this suggested addition:

```
system("file -bi -- ".escapeshellarg($uploadedfile)) 
```

Could someone explain how executing a potentially hazardous file with the system() function is a safe way to determine a file type?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:13:51.900

unix 命令“file”没有执行该文件。

来自[http://en.wikipedia.org/wiki/File_(command](http://en.wikipedia.org/wiki/File_(command) )：

> file 是一个标准的 Unix 程序，用于使用幻数识别计算机文件中包含的数据类型。

这里建议检查文件类型的相同方法： [http ://www.php.net/manual/en/function.mime-content-type.php#91646](http://www.php.net/manual/en/function.mime-content-type.php#91646)

您还可以在这里查看参数 -bi 的含义：http: [//linux.about.com/library/cmd/blcmdl1_file.htm](http://linux.about.com/library/cmd/blcmdl1_file.htm)

> -b 不要将文件名添加到输出行（简要模式）。
> 
> -i 使 file 命令输出 mime 类型的字符串，而不是更传统的人类可读的字符串。因此它可能会说`text/plain; charset=us-ascii'' rather than`ASCII 文本''。为了使此选项起作用，file 更改了它处理命令本身识别的文件的方式（例如许多文本文件类型、目录等），并使用`magic'' file. (See`下面的替代 FILES'' 部分）。

# linux - Pipe the output from three echo statement to mail

> ID：11875689
> 
> 赞同：10
> 
> 时间：2012-08-09T01:51:32.110
> 
> 标签：linux, email, shell, unix, solaris

```
echo "Total items: `echo $QUERY1 | awk '{print $1}'`"
echo "Total Error: `echo $QUERY1 | awk '{print $2}'`"
echo "Percentage: $QUERY2" 
```

How can I send these three things in a single email using `mail command`. So the mail body should be like this below whenever I get any email, in each line there should be one echo statement-

```
Total items:-    Some Number
Total Error:-   Some Number
Percentage:-   Some Number 
```

I am running `SunOS`

```
bash-3.00$ uname -a 
SunOS lvsaishdc3in0001 5.10 Generic_142901-02 i86pc i386 i86pc 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-09T02:27:24.057

您的要求并不完全清楚，但试试这个

```
{
    echo "Total items: `echo $QUERY1 | awk '{print $1}'`"
    echo "Total Error: `echo $QUERY1 | awk '{print $2}'`"
    echo "Percentage: $QUERY2"
} | mail -s "subject" toUser1@xyz.com,toUser2@abc.com 
```

该`{ .. }`对创建一个进程组，所有标准输出都重定向到 1 `|`（管道），它连接到邮件程序的标准输入。

您可能需要使用`mailx`,`-s`指定主题，我从您似乎理解的关于此主题的其他问题中看到。

还`sendmail`需要运行并正确配置从您执行此脚本的机器发送的任何邮件。

IHTH

* * *

**编辑：2015-11-07**

刚刚为此获得了一个“不错的答案”星，在审查时，我很惊讶我没有评论过度使用流程。对于这种情况，这可以简化为对 的一次调用`awk`，即

```
awk -v q1="$QUERY1" -v q2="$QUERY2" \
 'END {
    split(q1,q1arr)
    print "Total items: " q1arr[1] \
          "Total Error: " q1arr[2] \
          "Percentage: " q2
}' /dev/null \
| mail -s "subject" toUser1@xyz.com,toUser2@abc.com 
```

或者对于单线人群;-)，即

```
awk -v q1="$QUERY1" -v q2="$QUERY2" 'END {split(q1,q1arr);print "Total items: " q1arr[1] "\nTotal Error: " q1arr[2] "\nPercentage: " q2 }' /dev/null | mail -s "subject" toUser1@xyz.com,toUser2@abc.com 
```

在这种`{ .. }`情况下不需要，因为只有一个进程连接到管道。

对于像每天发送一次摘要报告这样的情况，原始代码是完全可用的（但不是最佳的）。但是，非最佳编码会导致不良习惯。在一天内运行 1000 次的循环中调用 5 个进程就足够了，这将不必要地消耗计算资源。

最后，由于操作没有包含任何示例数据，因此代码仅经过轻微测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T03:45:59.947

只需在 bash 中创建一个函数，然后 | （管道）它发送邮件。

```
 #!/bin/bash

            echo_statement(){

            echo "Total items: `echo $QUERY1 | awk '{print $1}'`"
            echo "Total Error: `echo $QUERY1 | awk '{print $2}'`"
            echo "Percentage: $QUERY2"

            }
            echo_statement | mail -s "subject" you@yourdomain.com 
```

# clojure - What to use instead of str-utils functions?

> ID：11875690
> 
> 赞同：5
> 
> 时间：2012-08-09T01:51:39.703
> 
> 标签：clojure, deprecated, string-utils

In [http://clojure.github.com/clojure-contrib/str-utils-api.html](http://clojure.github.com/clojure-contrib/str-utils-api.html) it is written that

```
String utilities for Clojure
Deprecated since clojure-contrib version 1.2 
```

but it is not written what should I use instead. There are convenient functions like "chomp" or "re-partition" there.

What should I do to port old clojure v1.1 [code](https://github.com/tristan/clojure-infix) to the recent version? Should I just copy functions from clojure-contrib directly to the source code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:24:40.677

一些功能位于[clojure.string](http://clojure.github.com/clojure/clojure.string-api.html)命名空间中。例如，`chomp`作为 存在`trim-newline`，`str-join`是`join`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:29:05.173

您可以使用[clojure.contrib.string](http://clojuredocs.org/clojure_contrib/1.2.0/clojure.contrib.string)代替 str-utils contrib

```
(use 'clojure.contrib.string) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T02:15:23.973

是的，我认为 clojure/core 字符串和 re 库更适合你。

# delphi - Firemonkey / Delphi中的流体/动态布局

> ID：11875691
> 
> 赞同：8
> 
> 时间：2012-08-09T01:51:40.380
> 
> 标签：delphi, delphi-xe2, firemonkey

假设我想要一个表单上的两个形状并排放置，每个形状正好占据窗口的 50%，当窗口调整大小时，它们会调整大小。我怎样才能做到这一点？

我真正想要的是按比例设置.. 例如.. 上述形状之一占 25%，另一个占 75%

动态调整大小非常重要，我不想输入任何代码来实现这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T07:08:38.300

可以通过在表单上放置 TLayout 来实现 - 将 Align 选项设置为 'alscale'

然后为我的示例 TPanel 将 2 个项目添加到 TLayout Ie - 两个项目上的对齐选项也设置为“alscale”。将每个的宽度设置为您想要的比率。

创作形式：

![创作形式](../Images/0ef3bd8989bed78f2f76dc4a4f2c0a30.png)

调整大小时的表格： ![在此处输入图像描述](../Images/5d3580a07a530fc2ec946768829cf0d6.png)

可以使用“无代码”来实现，对于上面的图像，我只是添加了标签以在表单调整大小时显示面板宽度。希望这可以帮助保罗

# networking - 网络破解

> ID：11875692
> 
> 赞同：1
> 
> 时间：2012-08-09T01:51:43.703
> 
> 标签：networking, reverse-engineering, cracking

在计算机科学和设计方面，我和一个朋友很有竞争力。最近他提出了一个想法，我们应该看看谁可以通过远程访问其他人的计算机来完成什么，但我们不知道从哪里开始破解网络。是否有任何关于这个主题的广泛阅读的文本提供关于从哪里开始通过高级技术的见解？

编辑：要清楚我对黑客网络服务器或关闭网站或任何类似的东西不感兴趣，所以涉及 sql/javascript 注入等的事情不是我想要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:59:17.020

您将要研究网络渗透测试和道德黑客。话虽如此，这是一个编程论坛，您将更多地寻找网络。

如果您想真正进入网络*编程*，您可以在这些类型的事情上工作，请查看 Beej 的网络编程指南：http: [//beej.us/guide/bgnet/](http://beej.us/guide/bgnet/)

除此之外，一些工具，如 Wire Shark、EtherApe、OWASP 可能会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T02:02:54.880

在远程机器上获得特权涉及的不仅仅是网络。听起来您对计算机安全感兴趣。

我喜欢在《计算机安全》一书中了解计算机[安全](https://rads.stackoverflow.com/amzn/click/com/0132390779)。

![计算安全](../Images/8b35c3cd2b07970a42d63f443f385e53.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:18:53.600

google 和下载 backtrack 5，他们在 youtube 上有一些教程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-19T18:26:35.383

您可以使用 Kali 或 backtrack 的 metasploit 框架。下载《METASPLOIT The Penetration Tester's Guide》一书。并且不要在公共机器，服务器或未知目标上使用此技术。您可能会入狱！所以明智地使用它

# php - How to change a link on selection?

> ID：11875695
> 
> 赞同：0
> 
> 时间：2012-08-09T01:52:17.117
> 
> 标签：php, javascript, user-interface

I created some basic GUI where I read the identification of some items from a XML file via PHP.

So when you click on a item it would go to something like www.example.com/item_id001

Now, I have a menu in this application. But I just don´t seem to figure out what would be the wast way to change the menu links based on the item selected, PHP, javascript. Not sure what is the normal procedure for this.

Basically on the page there are 10 items. Now I have hardcoded the menu to go always to item1\. So if you click the button "Information" in the menu, it will go to the page that displays the information of item1.

Now this makes sense if you only have 1 thing listed, but not several. My idea is the user clicks on a item, and an arrow or selection is showed next to the item to indicate the users that ITEM is now active. Now if you would click on the menu "Information" again, it would go to the page (or pass via session) the ID of the user selected item.

I made it sound to complicated but this is the most basic thing in any web interface. What would be the best procedure to go with this? Change the links on the fly with javascript? Or change the PHP session? Can someone point to some very newbie basic examples?

Im not a coder so I just use what I find around. Usually I pay developers for stuff, but this is just to embarrassing as its something just to simple to actually hire someone to explain me how to do this. I found some ideas on the net, but im actually curious on what is the method most webapps use this days.

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:23:53.773

我认为您希望在总共 10 个链接中，当前/活动页面的链接应该被区分/突出显示。

你可以做这样的事情。

注意：你需要告诉 PHP 这是哪个页面。在这里，在这段代码中，我通过使用 $_GET 变量来告诉它。您当然可以使用 $_SESSION 或其他任何东西来传递此信息。

`SEE UPDATED CODE BELOW`
[Codepad.viper-7.com](http://codepad.viper-7.com/iKZ0ZX/54dev) 上的演示

**更新：**

```
index.php        //intial file, where all car models are shown

specific.php     //the file, where customized menu will be shown,
                 //based on the ID we got from index.php 
```

代码：

`index.php`（假设这个用户在他的 OWN xml 文件中有`Alpha Romeo`,模型。`T-100`

```
<a href="specific.php?carid=alpha_romeo" />Alpha Romeo</a>
<a href="specific.php?carid=t-100" />T-100</a> 
```

`specific.php`（用户来自 index.php 链接）

```
<?php
$carid = $_GET["carid"];
?>
<a href="show.php?info=car_info&carid=<?php echo $car_id; ?>" />Car Info</a>
<a href="show.php?info=p_list&carid=<?php echo $car_id; ?>" />Part Lists</a>
<a href="show.php?info=foo&carid=<?php echo $car_id; ?>" />Foo</a> 
```

`show.php`

```
$carid = $_GET["carid"];
$info = $_GET["info"];

//show INFO for CARID 
```

如您所见，在指向 的链接中`show.php`，动态汽车 ID 被回显/打印。`Show.php`应该得到 car_id 并进行相应的处理。

# wpf - Is a WPF Derived Dependency Property Possible?

> ID：11875697
> 
> 赞同：2
> 
> 时间：2012-08-09T01:52:38.360
> 
> 标签：wpf, dependency-properties, readonly

I want to expose a property that is a string format of two other dependency properties. How do I make this work so anything bound to the derived property is also updated when the true dependency property is updated?

```
public static readonly DependencyProperty DeviceProperty =
    DependencyProperty.Register("Device", typeof(string), typeof(SlaveViewModel));

public static readonly DependencyProperty ChannelProperty =
    DependencyProperty.Register("Channel", typeof(Channels), typeof(SlaveViewModel));

public string Device
{
    get { return (string)GetValue(DeviceProperty); }
    set { SetValue(DeviceProperty, value); }
}

public Channels Channel
{
    get { return (Channels)GetValue(ChannelProperty); }
    set { SetValue(ChannelProperty, value); }
} 
```

Now I would like to be able to bind to the following derived property and have it treated as a dependency property:

```
public string DeviceDisplay
{
    get 
    {
        return string.Format("{0} (Ch #{1})", Device, (int)Channel);
    }
} 
```

I'm able to do this by adding callbacks. It works well but it seems a bit verbose. Is there an easier way to do this other than the following?

```
public static readonly DependencyProperty DeviceProperty =
    DependencyProperty.Register("Device", typeof(string), typeof(SlaveViewModel),
    new FrameworkPropertyMetadata("", FrameworkPropertyMetadataOptions.None,
    new PropertyChangedCallback(OnDevicePropertyChanged)));

private static void OnDevicePropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs args)
{
    SlaveViewModel model = (SlaveViewModel)sender;
    model.DeviceDisplay = string.Format(string.Format("{0} (Ch #{1})",
        args.NewValue, (int)model.Channel));
}

public static readonly DependencyProperty ChannelProperty =
    DependencyProperty.Register("Channel", typeof(Channels), typeof(SlaveViewModel),
    new FrameworkPropertyMetadata(Channels.Channel1, FrameworkPropertyMetadataOptions.None,
    new PropertyChangedCallback(OnChannelPropertyChanged)));

private static void OnChannelPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs args)
{
    SlaveViewModel model = (SlaveViewModel)sender;
    model.DeviceDisplay = string.Format(string.Format("{0} (Ch #{1})",
        model.Device, (int)args.NewValue));
}

public static readonly DependencyPropertyKey DeviceDisplayPropertyKey =
    DependencyProperty.RegisterReadOnly("DeviceDisplay", typeof(string),
    typeof(SlaveViewModel), new FrameworkPropertyMetadata(""));

public static readonly DependencyProperty DeviceDisplayProperty =
    DeviceDisplayPropertyKey.DependencyProperty;  

public string DeviceDisplay
{
    get { return (string)GetValue(DeviceDisplayProperty); }
    protected set { SetValue(DeviceDisplayPropertyKey, value); }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:55:34.717

我看到复制粘贴的代码，您可以将两个回调都指向一个方法。不知道是否有更简单的方法，但我对此表示怀疑。

（也`typeof(SlaveViewModel)`暗示这是 VM 代码：由于线程关联，我永远不会在 VM 中使用 DP。）

# mysql - Basic Questions About Database Development

> ID：11875698
> 
> 赞同：0
> 
> 时间：2012-08-09T01:52:38.877
> 
> 标签：mysql, database, visual-studio

I searched for the answers to these questions before, but couldn't find them - so I apologize if they have been answered already, or appear stupid. I am new to learning about databases, and am pretty confused.

I am helping someone who wants to build a website with a database. It is supposed to have secure html links, secure password and username inputs, and relatively low bandwidth use. It will also handle financial transactions, and should work with Paypal.

1.  My partner is familiar with Visual Studio. Can the .net framework produce anything other than asp pages (like html or other language formats), or is every webpage produced a .asp?

2.  How is Visual Studio for working with MySQL?

3.  If the answer to #2 is terrible, then I was thinking of using PHPMyAdmin with MySQL. How is this for secure front-ends? Would this allow me to easily interface with a MySQL backend? Would this be my best bet considering #1? Or should I take a look at other programs/frameworks?

4.  Are there any programs that help with back-end work, or does it all have to be coded by hand? If there are any, does anyone have recommendations considering the above? Would PHPMyAdmin, Microsoft SQL Server, or Xataface have a GUI to help do any back-end work?

Thanks a lot,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:28:26.493

> 我的搭档熟悉 Visual Studio。.net 框架能否生成除 asp 页面（如 html 或其他语言格式）以外的任何内容，或者每个网页都生成一个 .asp？

ASP.NET 生成 HTML。这些页面可能具有`aspx`扩展名，`.html`但它们呈现的内容是常规 HTML。您可以同时使用 HTML 控件和 ASP.NET 控件。使用 ASP.NET 控件提供了一些优势，但如果您不想这样做，则不必这样做。

> Visual Studio 如何使用 MySQL？如果您担心能够在不使用其他管理工具的情况下从 VS 连接到 MySQL 数据库，那么答案是肯定的，[您可以做到](http://dev.mysql.com/doc/refman/5.1/en/connector-net-visual-studio-making-a-connection.html)；然而，VS 强大的原因不仅仅是这种能力：比如智能感知、大量可供您使用的库、开箱即用的强大控件等。
> 
> 如果#2 的答案很糟糕，那么我正在考虑将 PHPMyAdmin 与 MySQL 一起使用。这对于安全的前端来说如何？这能让我轻松地与 MySQL 后端交互吗？考虑到#1，这是我最好的选择吗？或者我应该看看其他程序/框架？

PHPMyAdmin 是一个与 MySQL 交互的工具；它允许您运行查询、创建数据库、表等，但它不会帮助您创建“安全前端”本身。有许多工具可以做与 PHPMyAdmin 相同的工作。其中之一是[MySQL Workbench](http://dev.mysql.com/downloads/workbench/)。就安全性而言，您几乎可以使用任何类型的数据库来构建安全网站；它实际上比任何工具提供的任何功能都更多地取决于您如何设计和编程您的应用程序。

> 是否有任何程序可以帮助后端工作，还是必须手动编码？如果有的话，考虑到上述情况，有人有建议吗？PHPMyAdmin、Microsoft SQL Server 或 Xataface 是否有 GUI 来帮助完成任何后端工作？

就 MS SQL Server 而言，您可以使用 SQL Server Management Studio。您可以从那里创建数据库、表、存储过程、函数、索引、视图、用户等，当您连接到 MS SQL Server 2008 DB 或更高版本时，它会提供智能感知。

# c++ - .h 文件包含在头文件和 cpp 文件中

> ID：11875705
> 
> 赞同：3
> 
> 时间：2012-08-09T01:53:58.110
> 
> 标签：c++, header-files

> **可能重复：**
> [前向声明的目的是什么？](https://stackoverflow.com/questions/3110096/what-is-the-purpose-of-forward-declaration)
> [前向声明与包含](https://stackoverflow.com/questions/3632818/forward-declaration-vs-include)

我`#include *.h`对头文件和 cpp 文件中包含的文件有点困惑。我看到一些 .h 文件包含在头文件中，一些包含在相应的 cpp 文件中。我猜想所有需要的 .h 文件都需要包含在头文件中，因此看不到将它们包含在 cpp 文件中的原因。这有什么具体原因吗？

另外，我看到一些需要的类已经包含在头文件中，使用`Class ClassName;`. 这与仅包含`ClassName.h`在头文件中有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:03:05.373

在您的第一段中，您似乎说相同的 .h 文件包含在类的头文件和类的 .cpp 文件中？这只是一个疏忽，因为根据定义，包含一个包含其他文件的文件也包括那些其他文件。您可以删除 .cpp 文件中的重复包含。

在您的第二段中，您看到的是一个类的前向声明。如果您不需要在标头中定义类的定义，有时最好只转发声明它。这样，包含标头的文件不依赖于类的定义。这减少了文件之间的依赖关系。只需要前向声明的一个例子是，如果一个类包含一个成员变量，它是一个指向类的指针，而不是类本身。

# mysql - 在不使用子查询的情况下限制结果

> ID：11875718
> 
> 赞同：0
> 
> 时间：2012-08-09T01:55:46.373
> 
> 标签：mysql, sql, database

我有 2 张桌子：

*   业务（ID，名称）
*   类别（id、名称、business_id）

我如何输出数据库中的所有类别，每个类别中有 5 个企业？

例如，如果数据库中有 3 个类别，那么我想要：

```
category 1
--------------
business 1
business 2
business 3
business 4
business 5

category 2
---------------
business 6
business 7
business 8
business 9
business 10

category 3
------------------
business 11
business 12
business 13
business 14
business 15 
```

我知道如何做到这一点的唯一方法是从 db 中获取所有类别，然后以编程方式循环遍历每个类别并触发另一个查询以获取每个类别中的所有业务。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:57:39.320

您可以使用 rank 方法，但这涉及子查询。

```
 select id,business_name,cat_name,cat_id from
(SELECT *,@i := CASE WHEN ( @temp_bid <> m.id ) THEN 1                      
            ELSE     @i+1      
            END AS rank ,
            @temp_bid:=m.id as dlset 
 FROM 
 ( Select a.id as id,a.name as business_name,b.name as cat_name,b.id as cat_id
   from business a left outer join categories b on a.id=b.business_id ) m)k,
 (SELECT @i:=0)i,(SELECT @i2:=0)i2
where rank<=5
 ORDER BY business_name,rank desc; 
```

[SQL 小提琴在这里。](http://sqlfiddle.com/#!2/ea78a/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T02:13:54.133

您可以使用 WHERE 子句中的相关子查询来执行此操作：

```
select b.name, c.id
from categories c join
     business b
     on c.business_id = b.id
where c.id in (select c2.id
               from categories c2
               where c2.business_id = c.business_id
               order by rand()
               limit 5
              ) 
```

在其他支持排名功能的数据库中，这要简单得多。

如果此子查询不支持限制，那么您必须使用自联接来完成。咳咳咳咳：

```
with bc as (
     select b.name, c.id
     from categories c join
          business b
          on c.business_id = b.id
   )
select bc.name, bc.id
from bc join
     bc bcprev
     on bc.name = bcprev.name and
        bcprev.id <= bc.id
group by bc.name, bc.id
having count(*) <= 5 
```

这不会得到 5 个随机类别。相反，它会获得 id 最低的五个。

**罗斯史密斯编辑：**

上面的查询在 MySQL 5.5.25 中返回错误，但下面的工作：

```
select bc.name, bc.id
from
  (
     select b.name, c.id
     from categories c join
          business b
          on c.business_id = b.id
   ) bc join
   (
     select b.name, c.id
     from categories c join
          business b
          on c.business_id = b.id
   ) bcprev
     on bc.name = bcprev.name and
        bcprev.id <= bc.id
group by bc.name, bc.id
having count(*) <= 5 
```

并且似乎返回了这个预期的结果。

见[http://sqlfiddle.com/#!2/ea78a/9](http://sqlfiddle.com/#!2/ea78a/9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:25:18.007

如果将类别-业务关系存储在单独的表中不是更好吗？如果是这样，那么您可以使用此查询：

```
SELECT
    c_name,
    b_name
FROM
(
    SELECT
        c.name AS c_name,
        b.name AS b_name,
        (@row := IF(@last = cat_id, @row + 1, 1)) AS row,
        @last := cat_id
    FROM
        (SELECT @row := 0, @last = '') a,
        cat_bus cb
    INNER JOIN
        cat c ON c.id = cb.cat_id
    INNER JOIN
        bus b ON b.id = cb.bus_id
    ORDER BY
        c.name,
        b.name
) d 
WHERE
    d.row <= 5
ORDER BY
    c_name,
    b_name 
```

有关结果，请参见[sqlfiddle.com](http://www.sqlfiddle.com/#!2/0836e/3)。

# asp.net-mvc - 从 ASHX 的 MemoryStream 显示 PDF

> ID：11875720
> 
> 赞同：0
> 
> 时间：2012-08-09T01:55:55.230
> 
> 标签：asp.net-mvc, pdf

我需要做的是；

1.  从 sharepoint 获取 pdf
2.  使用 PDFSharp 获取单页
3.  将其返回到视图并显示该页面

到目前为止，我所拥有的是；

```
 context.Response.ClearHeaders();
        context.Response.ContentType = "application/pdf";            
        context.Response.AddHeader("content-disposition", "inline; filename=Something.pdf");

        // Get a fresh copy of the sample PDF file from Sharepoint later on
        string filename = @"book.pdf";

        // Open the file
        PdfDocument inputDocument = CompatiblePdfReader.Open(filename, PdfDocumentOpenMode.Import);

        PdfDocument outputDocument = new PdfDocument();
        outputDocument.Version = inputDocument.Version;
        outputDocument.Info.Title = "Pages 1 to 30";
        outputDocument.Info.Author = "Slappy";

        outputDocument.AddPage(inputDocument.Pages[1]);

        MemoryStream ms = new MemoryStream();
        outputDocument.Save(ms, false);

        ms.WriteTo(context.Response.OutputStream); 
```

我不知道如何在网页中显示它。

我有这个;

```
<script src="../../Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.media.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.metadata.js" type="text/javascript"></script>

<script>
    $(function () {
        $.ajax({ url: '/GetBookPage.ashx',
            success: function (result) {
                $("a.media").attr('href', result);
                $('a.media').media({ width: 800, height: 600 });
            },
            async: false
        });
    });
</script>

<a class="media">PDF File</a> 
```

如果我将 pdf 保存到文件系统然后将 href 指向该文件，则上述方法有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:39:21.050

使用以下处理程序：

```
public class GetBookPage : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            string filePath = @"c:\somepath\test.pdf";
            context.Response.ContentType = "application/pdf";
            context.Response.AddHeader("content-disposition", "inline; filename=test.pdf");
            context.Response.WriteFile(filePath);
            context.Response.End(); 
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    } 
```

如果您执行以下操作，我可以让 PDF 内联显示：

```
<script type="text/javascript">
   $(function () {
        $('a.media').media({ width: 800, height: 600 });
    });
</script>

<a class="media" href="/GetBookPage.ashx?.pdf">PDF File</a> 
```

该插件使用 url（或更准确地说是扩展名）在页面上构建适当的媒体容器。如果您没有“.pdf”，它将无法按预期工作。

# c++ - 试图继承 STL 集的链接错误

> ID：11875722
> 
> 赞同：1
> 
> 时间：2012-08-09T01:56:35.920
> 
> 标签：c++, templates, stl

我正在尝试编写 STL 的派生类，`set<>`但发生了链接错误。

头文件`Set.h`：

```
#pragma once
#include <set>
using namespace std;

template <class Ty>
class Set : public set<Ty> {
public:
    Set(void);
    virtual ~Set(void);
}; 
```

辅助源文件`Set.cpp`：

```
#include "Set.h"
template <class Ty>
Set<Ty>::Set(void) {}
template <class Ty>
Set<Ty>::~Set(void) {} 
```

主程序：

```
#include <iostream>
#include "../myLibrary/Set.h"
#pragma comment(lib, "../x64/Debug/myLibrary.lib")

using namespace std;
int main() {
    Set<int> s;
    s.insert(1); s.insert(2); s.insert(3);
    for(Set<int>::const_iterator it = s.begin(); it!=s.end(); it++)
        wcout << *it << endl;
    return 0;
} 
```

这引发

> `Set.obj : *warning* LNK4221:`

和

> `_Entry_myLibrary_TEST.obj :error LNK2019: "public: virtual __cdecl Set<int>::~Set<int>(void)" (??1?$Set@H@@UEAA@XZ)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:58:28.390

您的直接问题是将模板函数放在 Set.cpp 中。模板函数需要对使用它们的代码可见，因此它们需要位于 .h 文件中，而不是单独的 .cpp 文件中。

辅助源文件Set.cpp：

```
#include "Set.h" 
template <class Ty> 
Set<Ty>::Set(void) {} 

template <class Ty> 
Set<Ty>::~Set(void) {} 
```

将函数放入标题中，它们需要在使用它们的地方可见。

我将留给其他人指出为什么从 set 继承可能不是您想要做的，因为这不是您的问题。

# git - 如何更新分叉的 git 存储库？

> ID：11875723
> 
> 赞同：10
> 
> 时间：2012-08-09T01:56:37.467
> 
> 标签：git, github, git-fork

我已经分叉了一个 git repo。如果源有更新，分叉的 repo 会自动更新吗？或者我应该在 cmd 中执行一些命令来更新这个分叉的 repo？这是什么命令？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-09T02:01:05.650

他们在 github 文档上对此主题有非常具体的帮助：[https ://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)

> 配置遥控器
> 
> 当一个 repo 被克隆时，它有一个名为 origin 的默认远程指向你在 GitHub 上的 fork，而不是它被 fork 的原始 repo。要跟踪原始仓库，您需要添加另一个名为 upstream 的远程：

```
git remote add upstream https://github.com/octocat/Spoon-Knife.git
# Assigns the original repo to a remote called "upstream"

git fetch upstream
# Pulls in changes not present in your local repository, 
# without modifying your files 
```

> 拉入上游更改
> 
> 如果您从 fork 项目的原始 repo 得到更新，您可以通过运行以下代码将这些更新添加到您的 fork：

```
git fetch upstream
# Fetches any new changes from the original repo

git merge upstream/master
# Merges any changes fetched into your working files 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:00:21.113

> 当一个 repo 被克隆时，它有一个名为 origin 的默认远程指向你在 GitHub 上的 fork，而不是它被 fork 的原始 repo。要跟踪原始仓库，您需要添加另一个名为 upstream 的远程：

正如他们在这篇[博文](https://help.github.com/articles/fork-a-repo)中所说的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-02T17:29:19.160

[最近，我按照这个URL](https://rick.cogley.info/post/update-your-forked-repository-directly-on-github/)更新了我的分叉存储库。此 URL 解释了使用 Web UI 和终端更新分叉存储库。

# ffmpeg - 使用具有相应帧号的 ffmpeg 提取帧

> ID：11875726
> 
> 赞同：7
> 
> 时间：2012-08-09T01:56:50.770
> 
> 标签：ffmpeg, frame, extract

我正在尝试使用以下命令使用 FFMPEG 提取帧：

```
 ffmpeg.exe ' -i ' videoFile ' -r 1/5 ' imgsFolder '\%5d.png' 
```

它以顺序方式提取帧并分配帧名称，例如 0、1、...

是否可以将实际帧号分配为提取的一部分？

例如，如果 ffmpeg 提取第 10、20... 帧，则应将其命名为 img00010、img00020 而不是 img00000、img00001...。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T22:28:01.023

您可以使用“-start_number XX”更改起始编号。

但是您不能更改该数字的增量（我仔细检查了 ffmpeg 的源代码）。

也许，最好运行一个 shell 脚本来重命名你的文件。我可以看到你在 Windows 下运行，所以我不确定你那里是否有 bash。但是在linux下它看起来像这样：

```
index=0
increment=10
prefix="new_"
for i in *.png; do printf "%s_%05d.png" $prefix $index; index=$[index+$increment]; done 
```

# scala - 在scala中传递默认参数？

> ID：11875727
> 
> 赞同：3
> 
> 时间：2012-08-09T01:56:51.403
> 
> 标签：scala, default-parameters

请考虑以下示例

```
def foo(a: Int, b: Int = 100) = a + b
def bar(a: Int, b: Int = 100) = foo(a, b) * 2 
```

这可行，但请注意，我必须在两个函数中为 b 提供相同的默认值。我的意图实际上是以下

```
def bar(a: Int, b: Int) = foo(a, b) * 2
def bar(a: Int)    = foo(a) * 2 
```

但是当您有更多可选参数和链中的其他函数（例如以相同方式调用 bar 的 baz ）时，这变得很麻烦。有没有更简洁的方式在scala中表达这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T04:02:00.753

我认为没有；如果你用加倍函数组成 foo ：

```
val bar = (foo _).curried((_: Int)) andThen ((_: Int) *2)
// (please, please let there be a simpler way to do this...) 
```

您会丢失默认参数，因为函数对象[没有它们](https://stackoverflow.com/q/5676301/770361)。

如果在您的用例中值得，您可以创建一个包含您传递的参数的案例类，而不是多个单独的，例如

```
case class Args(a: Int, b: Int = 100, c: Int = 42, d: Int = 69)
def foo(args: Args) = { import args._; a + b + c + d }
def bar(args: Args) = foo(args) * 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T06:07:01.857

我建议使用`Option`.

```
def bar(a: Int, b: Option[Int] = None) = b match {
  case Some(x) => foo(a,x) * 2
  case _ => foo(a) * 2
} 
```

这将完全满足您的需求。另一种方法是使用可变参数。

```
def baz(a: Int)(b: Int*) = b.headOption match {
  case Some(x) => foo(a,x) * 2
  case _ => foo(a) * 2
} 
```

我更喜欢第一种方式，因为很明显，参数是可选的。第二种解决方案是不处理 an 中的包装`Option`，但签名并不清楚，只考虑集合的第一个元素。`baz(1)(2) == baz(1)(2,3,4,5)`是真的。

**编辑**

要使`Option`看起来像您想要的调用，您可以使用隐式。

```
implicit def int2Some(i: Int) = Some(i) 
```

现在您可以调用以下函数：

```
bar(1,2)
bar(1,Some(2))
bar(1)
bar(1,None) 
```

只要有用，`implicit`就会自动调用。但是您的用户可能会感到困惑，为什么可以使用 an`Int`而不是`Option[Int]`.

# php - smarty 错误：模板中的语法错误

> ID：11875730
> 
> 赞同：0
> 
> 时间：2012-08-09T01:57:16.147
> 
> 标签：php, smarty

我有一个通过 php 设置的会话，但是当我尝试使用 smarty 获取数据时，出现以下错误

```
Error: Syntax Error in template "d:\server\theme\menu_inc.tpl" on line 10 "{if $smarty.session.user-permissions-ses.t_mgt == 1}" - Unexpected "." 
```

smarty 模板代码。

```
{if $smarty.session.user-permissions-ses.t_mgt == 1}
    information here
{/if} 
```

我似乎不知道可能导致此错误的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:09:26.313

问题是连字符，PHP 和 smarty 都不喜欢在变量中允许它们。

这应该使它工作：

```
{if $smarty.session.{"user-permissions-ses"}.t_mgt == 1}
    information here
{/if} 
```

[这](http://www.smarty.net/forums/viewtopic.php?t=18856)是 Smarty 论坛上的一个主题，其中包含更多信息。

# wcf - 客户端应用程序是否应该使用真实模型类或 DTO 对象与 WCF 服务通信？

> ID：11875736
> 
> 赞同：3
> 
> 时间：2012-08-09T01:58:15.787
> 
> 标签：wcf, domain-driven-design, dto

我知道我的 DDD 模型项目[应该完全隔离](https://stackoverflow.com/questions/1816764/ddd-projects-structure-with-wcf)，并且不引用我的应用程序的任何其他层，并且我的 WCF 服务将包含具有 WCF 服务所需的所有特殊属性的真实模型对象的 DTO 版本。该服务还将引用模型并知道如何[在 DTO 和“真实”模型对象之间进行转换](https://stackoverflow.com/questions/10278956/where-to-place-dto-entity-translator-in-wcf-service)。

我想知道的是使用此服务的客户端应用程序是否应该使用 DTO 对象或真实模型对象与其通信？客户端应用程序是否应该负责将其从服务接收到的 DTO 对象转换为模型版本，还是应该将其构建到服务中以便客户端不直接处理 DTO 对象？

我正在考虑创建一个包装器类，它包装服务实例并公开相同的功能，但作为模型对象而不是 DTO 版本。好主意？馊主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:54:51.787

以下文章应回答您的问题

*   [为什么你不应该通过你的服务暴露你的实体](http://davybrion.com/blog/2010/05/why-you-shouldnt-expose-your-entities-through-your-services/)
*   [DTO 应该传输数据，而不是实体](http://davybrion.com/blog/2012/02/dtos-should-transfer-data-not-entities/)

别忘了看看[微软](http://msdn.microsoft.com/en-us/library/ff649585.aspx)和[Martin Fowler](http://martinfowler.com/eaaCatalog/dataTransferObject.html)对数据传输对象的解释

此外。在客户端要小心，dto 更改不应导致大量编码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:22:20.967

WCF 不理解“真实模型类”，它只理解 DTO。客户端代码必须以一种或另一种方式理解这些 DTO（或序列化有效负载）。所以你的问题是你是否可以在客户端和服务器上使用相同的域模型类。

> 我正在考虑创建一个包装器类，它包装服务实例并公开相同的功能，但作为模型对象而不是 DTO 版本。好主意？馊主意？

这取决于您正在构建什么类型的应用程序以及您有什么部署限制。

直接从客户端和服务器引用域对象意味着您必须同时升级它们。例如，如果您的“用户”实体具有“名称”属性，并且您决定将其拆分为“第一”和“最后”，则需要同时更新客户端、服务器和数据存储。这只是一个简单的例子，模型行为的变化可能会带来更大的问题。如果您准备好在某些情况发生变化时重新部署整个堆栈，那么您的方法似乎没问题。在这种情况下，您甚至可以尝试避免使用“包装器”并尝试将此代码作为替代存储库实现。换句话说，您可以尝试使用两种存储库实现：一种用于客户端，一种用于服务。客户端存储库实现将使用 WCF 服务作为底层数据存储。

另一方面，最好将客户端与服务器上的更改隔离开来。在这种情况下，您的主域模型仅由服务引用，并作为特定于客户端的 DTO 向客户端公开。通过这种方式，您可以在不影响客户端的情况下自由地发展您的域模型和服务代码。客户端可能会有自己的模型类版本，如果你愿意的话，“子模型”，它将根据从服务器接收到的 DTO 进行填充。

# python - Django：按用户过滤草稿会导致错误

> ID：11875737
> 
> 赞同：2
> 
> 时间：2012-08-09T01:58:34.033
> 
> 标签：python, django

我正在尝试使用 request.user 变量过滤数据库中的一组草稿对象。他们是出于某种原因，我得到了下面列出的错误。我该如何修复这个错误？

功能：

```
def posting_draft(request):
    user = request.user
    user_drafts = Draft.objects.filter(user = user)
    drafts = dict()
    for d in user_drafts:
        drafts[d.title] = d.id
    return render_to_response('posting_draft.html', {'STATIC_URL':STATIC_URL, 'draft_l' : drafts}) 
```

错误：

```
int() argument must be a string or a number, not 'SimpleLazyObject' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T03:00:10.253

由于 request.user 是一个`SimpleLazyObject`直到它被访问。尝试将您的查询更改为以下内容：

```
user_drafts = Draft.objects.filter(user = user.pk) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T02:36:06.730

问题在于：

```
user = request.user 
```

阅读这篇文章以获取更多详细信息 [request.user 返回一个 SimpleLazyObject，我如何“唤醒”它？](https://stackoverflow.com/questions/11314905/request-user-returns-a-simplelazyobject-how-do-i-wake-it)

# php - 如何在 html 文件中使用 php 代码？

> ID：11875740
> 
> 赞同：-1
> 
> 时间：2012-08-09T01:58:56.800
> 
> 标签：php, function, templates, loading

我在我的项目中创建了 2 部分：part1：php 引擎和 part2：html 模板。

在第 1 部分中，我有一个变量：

```
$test1 = 'This is a var.';
$test2 = 'this is another var.'; 
```

在第 2 部分：我有一个内容：

```
{echo $test1; echo $test2} 
```

现在，我想创建一个函数，它可以在 part2 中加载模板并在 part1 中显示变量的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T02:03:01.030

最简单的方法：

*foo.php*

```
<?php

$test1 = 'This is a var.';
$test2 = 'this is another var.';

include 'foo.html'; 
```

*foo.html*

```
...
<?php echo $test1 ?>
<?php echo $test2 ?>
... 
```

# jquery - jQuery 更改锚点

> ID：11875743
> 
> 赞同：0
> 
> 时间：2012-08-09T01:59:01.603
> 
> 标签：jquery, html-lists

我有：

```
<li><a href="#" id="NAV1">Captain</a></li>
<li><a href="#" id="NAV2">Obvious</a></li>

<script>
//Load Display info when side-nav button is clicked 
 $(function() {
      $("[id^=NAV]").click(function(evt) {
         var currID = $(this).attr('id');
         $(currID).prev('li').attr('class', 'current');
         evt.preventDefault();
      });
    });
</script> 
```

当他们单击锚点时，我想更改 li 的类。我显然是 JQuery 的新手，请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:24:22.487

```
<script type="text/javascript">
//Load Display info when side-nav button is clicked 
 $(function() {
      $("a").click(function(evt) {

         $('.current').removeClass('current');
         $(this).parent().addClass('current');

         evt.preventDefault();
      });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:01:29.030

```
$("a[id^=NAV]").click(function(evt) {
    $(this).parent().addClass('current');
    evt.preventDefault();
}); 
```

我认为像上面这样的事情是你想要做的......

但更完整的解决方案是：

```
$("a[id^='NAV']").click(function(evt){
    evt.preventDefault();
    $('.current').removeClass('current'); //removes the current class from the previously current element.
    $(this).parent().addClass('current');   
}); 
```

# django - 仅当模板上下文变量不存在时如何注入它

> ID：11875747
> 
> 赞同：2
> 
> 时间：2012-08-09T01:59:41.013
> 
> 标签：django, django-templates, django-context

我有一个`base_template.html`使用上下文变量的`my_context_var`。我所有的其他模板都扩展了这个基本模板。你能帮我回答这些问题之一吗？（它们只是看待同一个潜在问题的不同方式）

1.  如何使`my_context_var`所有派生模板可用，但允许覆盖`my_context_var`特定视图的方法。

2.  `my_context_var`仅当该变量不存在时，我如何才能注入模板上下文。

本质上，我正在寻找上下文变量的 setdefaults() 功能。如果有帮助，`my_context_var`基本上是一个空白搜索表单，在我网站的大多数页面中都可用。我需要为一个同时显示表单和结果的页面覆盖它。当前的问题是，即使对于该结果页面，我也不断收到空白表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:05:01.207

你有几个选择：

您可以创建自己的 RequestContext 并通过您的站点包含您想要的所有变量：[文档](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)

或者您可以创建模板标签并在任何模板中访问它们：[文档](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:11:11.373

由于它应该适用于您的所有视图，因此最好的选择是[创建自定义上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)。模板标签的缺点是您必须在需要此变量的任何地方包含它们。`RequestContext`在我看来，像 DA 所说的那样创建自己的东西是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T00:59:04.513

如果您想在模板中设置变量（但仅当它不存在时），以下应该有效：

```
{% with my_context_var=my_context_var|default:"Value you want to set it to" %}
    {# The variable is accessible within then with block #}
    {{ my_context_var }}
{% endwith %} 
```

# java - Oracle 10g 中使用哪种数据类型来存储 DateTime？

> ID：11875750
> 
> 赞同：8
> 
> 时间：2012-08-09T01:59:58.117
> 
> 标签：java, oracle, oracle10g

Oracle 10g 数据库中使用哪种数据类型来存储日期时间（不仅是日期，还有时间）？我读过一些地方（可能是错误的）“ *Oracle 10g 中的 Date 数据类型可以存储日期时间*”，但是当我尝试这样做时，事情似乎没有发生。

> DATE 数据类型是日期时间数据类型。它存储日期和时间。日期部分基于自公元前 4712 年 1 月 1 日以来的天数。时间部分基于自午夜以来的秒数。[链接](http://it.toolbox.com/blogs/oracle-guide/learn-oracle-datatypes-for-sql-and-plsql-dates-10963)

我通过 Java 作为前端并直接在 Oracle 终端上使用以下 SQL 进行了尝试。

```
insert into discount 
values(7, 'Code', 12.5, to_date('11-AUG-2012 06:05:23', 'dd-mon-yyyy hh:mi:ss'), 
to_date('20-AUG-2012 07:50:23', 'dd-mon-yyyy hh:mi:ss')) 
```

它可以工作，但是（在这两种情况下）Oracle 只是忽略时间部分并只插入 SQL 中指定的日期而没有任何错误？

Oracle 10g 中使用哪种数据类型来存储日期时间？是`TimeStamp`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T02:24:59.573

Oracle 中的A`DATE`总是有一个日期组件和一个时间组件。假设表中的最后两列`DISCOUNT`被声明为`DATE`，Oracle 不太可能简单地忽略时间部分。

是什么让你相信时间部分被忽略了？我的猜测是您正在通过运行类似的查询来检查数据

```
SELECT *
  FROM discount 
```

来自 SQL*Plus、SQL Developer、TOAD 或其他一些 GUI。如果你这样做，默认情况下，显示的日期将只有一个日期部分，而不是一个时间部分。这并不意味着时间部分被丢弃。相反，它是具有`NLS_DATE_FORMAT`不显示时间组件的默认值的结果。您可以通过在查询中执行显式来强制显示时间组件`TO_CHAR`（请注意，我在猜测您的列的名称）

```
SELECT discount_id, 
       discount_type, 
       discount_amt, 
       to_char( discount_start_date, 'MM/DD/YYYY HH24:MI:SS' ),
       to_char( discount_end_date, 'MM/DD/YYYY HH24:MI:SS' )
  FROM discount 
```

或者通过更改您的默认值`NLS_DATE_FORMAT`

```
ALTER SESSION SET nls_date_format = 'MM/DD/YYYY HH24:MI:SS';
SELECT *
  FROM discount; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T02:25:16.877

甲骨文`DATE`也包括时间。从[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14220/datatype.htm#i1847%3a)：

> **DATE 数据类型概述**
> 
> DATE 数据类型将时间点值（日期和时间）存储在表中。DATE 数据类型存储年（包括世纪）、月、日、小时、分钟和秒（午夜之后）。

可能是您使用的工具（SQL Developer、SQL*Plus）在欺骗您。尝试

```
select to_char(your_date, 'dd-mm-yy hh:mi:ss') from discount 
```

另请注意，日期数据类型仅存储到秒。[`TIMESTAMP`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#i53219)或者[`TIMESTAMP WITH TIME ZONE`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#sthref125)更精确。

# jquery - 如何使 bPopup iframe 成为 div 的全宽

> ID：11875752
> 
> 赞同：0
> 
> 时间：2012-08-09T02:00:09.967
> 
> 标签：jquery, jquery-plugins, bpopup

我正在使用 jQuery 插件 bPopup，我无法发布链接，但是通过快速搜索 bPopup 很容易找到它

我有我的 div 的 CSS 作为

```
min-width:800px; 
```

并且弹出窗口本身以该大小显示，但 iframe 部分仅显示为大约 200 x 200 正方形，非常感谢有关如何使 iframe 成为 div 的全宽的任何想法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:14:06.563

在你的 CSS

```
iframe{min-width:800px} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T19:41:31.477

在您的 CSS 中执行以下操作：

```
.b-iframe{width:100%;} 
```

# plone - 修改 dropdown_sections.pt (webcouturier.dropdownmenu)

> ID：11875755
> 
> 赞同：2
> 
> 时间：2012-08-09T02:00:47.463
> 
> 标签：plone

有没有人有通过 ZMI 修​​改 dropdown_sections.pt 的经验？它是 webcouturier.dropdownmenu 附带的页面模板。我想修改它并使其成为一个大型菜单（支持列的菜单）？可能吗？

我正在使用 plone.app.theming 来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T04:14:31.917

该模板未在 portal_view_customizations 中公开。它是从文件系统调用的。

如果你想要超级菜单，试试[collective.collage.megamenu](https://plone.org/products/collective.collage.megamenu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:43:10.813

您可以在您的 Plone 站点中使用[http://pypi.python.org/pypi/plone.app.themingplugins](http://pypi.python.org/pypi/plone.app.themingplugins)插件来做到这一点。您只需在主题中添加一个文件夹：

```
overrides 
```

并添加一个名为

```
webcouturier.dropdownmenu.browser.dropdown_sections.pt 
```

与官方的内容（你可以从github复制粘贴它[https://github.com/collective/webcouturier.dropdownmenu/blob/master/src/webcouturier/dropdownmenu/browser/dropdown_sections.pt](https://github.com/collective/webcouturier.dropdownmenu/blob/master/src/webcouturier/dropdownmenu/browser/dropdown_sections.pt)

```
<tal:sections tal:define="portal_tabs view/portal_tabs"
 tal:condition="portal_tabs"
 i18n:domain="plone">
<h5 class="hiddenStructure" i18n:translate="heading_sections">Sections</h5>

<ul id="portal-globalnav"
    tal:define="selected_tab python:view.selected_portal_tab"
    ><tal:tabs tal:repeat="tab portal_tabs"
    ><li tal:define="tid tab/id;
                     subitems python:view.getTabObject(tabUrl = tab['url'], tabPath = tab.get('path'));
                     item_clickable python:view.enable_parent_clickable or not subitems"
         tal:attributes="id string:portaltab-${tid};
                         class python:selected_tab==tid and 'selected' or 'plain'"
        ><a href=""
           tal:content="tab/name"
           tal:attributes="href tab/url;
                           title tab/description|nothing;
                           class python:item_clickable and 'plain' or 'noClick'">
        Tab Name
        </a
        ><tal:block tal:condition="subitems">
            <ul class="submenu">
                <tal:subitems tal:replace="structure subitems">
                    <tal:comment replace="nothing">Submenu</tal:comment>
                </tal:subitems>
            </ul>
        </tal:block></li></tal:tabs></ul>
</tal:sections> 
```

你必须如何做一个megamenu，这取决于你。克隆的东西在这里解决了。

# git - 使用 git-p4 克隆部分 Perforce 存储库

> ID：11875760
> 
> 赞同：5
> 
> 时间：2012-08-09T02:01:24.297
> 
> 标签：git, perforce, git-p4

选择性导入大型 Perforce 存储库的正确方法是什么？

git-p4 文档提到您可以`-//depot/main/ignore`切换到过滤目录。这是否等同于`git filter-branch`在克隆后运行 a 以删除相同的目录？

此外，Perforce 似乎提供了另一个称为“客户端”视图的功能。之前没用过Perforce，所以对使用模型有点陌生。我目前的理解是，人们会`p4`在运行之前以某种方式设置正确的客户端视图`git p4 clone`。有没有人有完整的细节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-16T19:08:21.927

Perforce 客户端规范确定 Perforce 存储库的哪些部分对 Perforce 客户端可见（并将同步）。clientspec 还提供了从 Perforce 存储库路径到本地路径的映射。

您可以通过选择性地包含部分 Perforce 存储库来修剪 Perforce 客户端。例如

```
//depot/main/path1/... //your-perforce-client/main/path1/...
//depot/main/path2/... //your-perforce-client/main/path2/... 
```

将只包括`//depot/main/path1/`and`//depot/main/path2/`和 not `//depot/main/path3/`。正如您所指出的，您还可以显式排除路径。例如

```
//depot/main/path1/... //your-perforce-client/main/path1/...
-//depot/main/path1/foo/... //your-perforce-client/main/path1/foo/... 
```

将包括其子目录下`//depot/main/path1/` *除*文件之外的所有内容。`foo`

根据您的 Perforce 存储库的结构以及您想要包含（或排除）的内容，您可能可以`git-p4`直接告诉您要导入 Perforce 树的哪些部分：

```
git p4 clone --destination=/path/to/new/git/tree //depot/path1 //depot/path2 
```

如果您想使用排除项，或者如果您想调整 Perforce 软件仓库路径映射到本地路径的方式，则需要添加该`--use-client-spec`选项。`.p4config`您可以通过在 Git 树的父目录中创建一个文件来配置应该使用哪个 Perforce 客户端，该文件包含：

```
P4CLIENT=YOUR_PERFORCE_CLIENT_NAME 
```

然后设置环境变量：

```
P4CONFIG=.p4config 
```

这样做将导致在当前目录`p4`中查找`.p4config`文件（然后逐步搜索父目录）以获取 Perforce 配置数据。

将被导入的文件将是Perforce 客户端规范包含的路径和命令行上明确提供的路径的*交集。*`git p4 clone`

（正如您所提到的，`git-p4 clone`确实允许通过在路径前加上前缀来排除路径`-`。但是，我不建议这样做，因为这意味着这些路径将仅在初始导入时被排除。如果将来在 Perforce 中触及该路径中的文件，执行`git p4 rebase`/`git p4 sync`将拾取那些更改的文件（除非您记得再次在命令行上明确排除它们）。`--use-client-spec`但是，最初导入 using 将设置一个标志，允许在将来使用/`.git/config`时自动兑现。）`git p4 rebase``git p4 sync`

* * *

一个警告是，如果有一天你想包含 Perforce 存储库的其他部分，执行选择性克隆会增加额外的复杂性。如果您需要这样做，请参阅我对“[初始克隆后](https://stackoverflow.com/a/30279082/179715)[扩展客户端规范”的回答。`git-p4`](https://stackoverflow.com/a/30279082/179715)

# web - 我的 DW cs 6 有什么问题吗？

> ID：11875765
> 
> 赞同：2
> 
> 时间：2012-08-09T02:02:02.157
> 
> 标签：web, adobe, dreamweaver

当我运行dreamweaver cs 6 时，我的cpu 使用率在一个核心中显示出很高的百分比，当我打开进程选项卡时，dreamweacer.exe 使用我的四核的cpu 25。我使用的是 64 位的 windows 7 和 32 位的 adobe。mw DW cs 6有什么问题？我现在该怎么办？谢谢你们，，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T18:49:56.780

它似乎是由使用非法 amtlib.dll 引起的，因为大多数使用合法副本的人不受此问题的影响。

我怀疑这是一个故意影响海盗的错误，但它并没有给 Adob​​e 很大的动力来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:28:49.353

这是错误，可能与语言扩展有关。

但是 adobe 知道这一点并正在准备补丁 :-)

# oop - 还有一个“这是一种模式吗？如果是，叫什么名字”？

> ID：11875766
> 
> 赞同：2
> 
> 时间：2012-08-09T02:02:10.553
> 
> 标签：oop, design-patterns, refactoring

> 从另一个不同种类/类的实例创建一个实例。

快速示例：您正在使用 ORM，并且您在数据库中存储了一个电子邮件队列。然后在某些时候，您必须使用第三方库发送批量电子邮件。

您的对象（此处与 PHP 无关，为简单起见为公共属性）：

```
class Mail
{
    /**
     * @var string
     */
    public $senderText;

    /**
     * @var My\App\Entity\User
     */
    public $user;

    /**
     * @var \Doctrine\ORM\ArrayCollection
     */
    public $attachments;
} 
```

...而您的第三方“邮件”对象则大不相同。例如，您可能需要执行以下操作：

```
$mail = /* hydrated */;
$user = $mail->getUser();

$mailer = new ThirdPartyMailer();

// Fill message properties
$message = $mailer->createMessage();

$fullName = sprintf('%s %s', $user->getFirst(), $user->getLast());
$message->addFrom(array($fullName => $user->getEmail()))

// Create and add attachments
foreach($mail->getAttachments() as $attachment)
{
    $message->attach($mailer->createAttachment($attachment->getFullPath()));
} 
```

这是一种模式吗？对象转换器之类的东西，例如负责从另一个实例创建/转换一个实例的类...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:31:36.290

我不知道这种模式有一个广泛使用的名称，但一些常用名称是“translator”和“converter”——一个在表示相似实体的两个不同类之间进行转换的类。

一个相关的模式是[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)：如果第三方消息作为接口公开，您可以创建一个适配器类来包装您现有的邮件对象并实现第三方接口。

# python - 如何克服“datetime.datetime not JSON serializable”？

> ID：11875770
> 
> 赞同：1087
> 
> 时间：2012-08-09T02:02:51.010
> 
> 标签：python, json

我有一个基本的字典如下：

```
sample = {}
sample['title'] = "String"
sample['somedate'] = somedatetimehere 
```

当我尝试这样做时，`jsonify(sample)`我得到：

```
TypeError: datetime.datetime(2012, 8, 8, 21, 46, 24, 862000) is not JSON serializable 
```

我该怎么做才能使我的字典样本能够克服上述错误？

**注意：**虽然可能不相关，但字典是通过检索记录生成的`mongodb`，当我打印出来时`str(sample['somedate'])`，输出是`2012-08-08 21:46:24.862000`。

* * *

## 回答 #1

> 赞同：1162
> 
> 时间：2016-03-21T22:29:26.813

我快速而肮脏的 JSON 转储，它吃掉了日期和所有东西：

```
json.dumps(my_dictionary, indent=4, sort_keys=True, default=str) 
```

> `default`是应用于不可序列化对象的函数。
> 在这种情况下它是`str`，所以它只是将它不知道的所有内容转换为字符串。这对于序列化非常有用，但在反序列化（因此是“快速和脏”）时就不那么好了，因为任何东西都可能在没有警告的情况下被字符串化，例如函数或 numpy 数组。

* * *

## 回答 #2

> 赞同：521
> 
> 时间：2014-03-06T23:46:17.797

基于其他答案，一个基于特定序列化程序的简单解决方案，该序列化程序仅将`datetime.datetime`对象转换`datetime.date`为字符串。

```
from datetime import date, datetime

def json_serial(obj):
    """JSON serializer for objects not serializable by default json code"""

    if isinstance(obj, (datetime, date)):
        return obj.isoformat()
    raise TypeError ("Type %s not serializable" % type(obj)) 
```

正如所见，代码只是检查对象是否属于`datetime.datetime`or类`datetime.date`，然后`.isoformat()`根据 ISO 8601 格式 YYYY-MM-DDTHH:MM:SS 生成它的序列化版本（很容易被 JavaScript 解码） ）。如果寻求更复杂的序列化表示，可以使用其他代码代替 str()（有关示例，请参阅此问题的其他答案）。代码以引发异常结束，以处理使用不可序列化类型调用它的情况。

这个 json_serial 函数可以按如下方式使用：

```
from datetime import datetime
from json import dumps

print dumps(datetime.now(), default=json_serial) 
```

有关 json.dumps 的默认参数如何工作的详细信息，请[参阅 json 模块文档的基本用法部分](http://docs.python.org/2/library/json.html#basic-usage)。

* * *

## 回答 #3

> 赞同：496
> 
> 时间：2012-08-09T02:07:57.893

# 2018 年更新

原始答案适应了 MongoDB“日期”字段的表示方式：

`{"$date": 1506816000000}`

如果您想要一个用于序列化为`datetime`json 的通用 Python 解决方案，请查看[@jjmontes 的答案](https://stackoverflow.com/a/36142844/293064)以获得不需要依赖项的快速解决方案。

* * *

当您使用 mongoengine（根据评论）并且 pymongo 是一个依赖项时，pymongo 具有内置实用程序来帮助进行 json 序列化：
[http ://api.mongodb.org/python/1.10.1/api/bson/json_util.html](http://api.mongodb.org/python/1.10.1/api/bson/json_util.html)

示例用法（序列化）：

```
from bson import json_util
import json

json.dumps(anObject, default=json_util.default) 
```

示例用法（反序列化）：

```
json.loads(aJsonString, object_hook=json_util.object_hook) 
```

* * *

## 姜戈

Django 提供了一个本机`DjangoJSONEncoder`序列化程序，可以正确处理这种情况。

请参阅[https://docs.djangoproject.com/en/dev/topics/serialization/#djangojsonencoder](https://docs.djangoproject.com/en/dev/topics/serialization/#djangojsonencoder)

```
from django.core.serializers.json import DjangoJSONEncoder

return json.dumps(
  item,
  sort_keys=True,
  indent=1,
  cls=DjangoJSONEncoder
) 
```

我注意到`DjangoJSONEncoder`和使用这样的自定义之间的一个区别`default`：

```
import datetime
import json

def default(o):
    if isinstance(o, (datetime.date, datetime.datetime)):
        return o.isoformat()

return json.dumps(
  item,
  sort_keys=True,
  indent=1,
  default=default
) 
```

是 Django 剥离了一些数据：

```
 "last_login": "2018-08-03T10:51:42.990", # DjangoJSONEncoder 
 "last_login": "2018-08-03T10:51:42.990239", # default 
```

因此，在某些情况下，您可能需要注意这一点。

* * *

## 回答 #4

> 赞同：252
> 
> 时间：2014-11-21T09:52:44.897

我刚刚遇到这个问题，我的解决方案是子类`json.JSONEncoder`：

```
from datetime import datetime
import json

class DateTimeEncoder(json.JSONEncoder):
    def default(self, o):
        if isinstance(o, datetime):
            return o.isoformat()

        return json.JSONEncoder.default(self, o) 
```

在您的电话中，请执行以下操作：`json.dumps(yourobj, cls=DateTimeEncoder)`我`.isoformat()`从上述答案之一中得到。

* * *

## 回答 #5

> 赞同：140
> 
> 时间：2012-08-09T02:10:55.093

将日期转换为字符串

```
sample['somedate'] = str( datetime.utcnow() ) 
```

* * *

## 回答 #6

> 赞同：83
> 
> 时间：2013-04-04T23:15:58.543

对于不需要或不想为此使用 pymongo 库的其他人。您可以使用这个小片段轻松实现日期时间 JSON 转换：

```
def default(obj):
    """Default JSON serializer."""
    import calendar, datetime

    if isinstance(obj, datetime.datetime):
        if obj.utcoffset() is not None:
            obj = obj - obj.utcoffset()
        millis = int(
            calendar.timegm(obj.timetuple()) * 1000 +
            obj.microsecond / 1000
        )
        return millis
    raise TypeError('Not sure how to serialize %s' % (obj,)) 
```

然后像这样使用它：

```
import datetime, json
print json.dumps(datetime.datetime.now(), default=default) 
```

输出： 

```
'1365091796124' 
```

* * *

## 回答 #7

> 赞同：64
> 
> 时间：2013-05-03T06:38:32.587

这是我的解决方案：

```
import json

class DatetimeEncoder(json.JSONEncoder):
    def default(self, obj):
        try:
            return super().default(obj)
        except TypeError:
            return str(obj) 
```

然后你可以像这样使用它：

```
json.dumps(dictionnary, cls=DatetimeEncoder) 
```

* * *

## 回答 #8

> 赞同：39
> 
> 时间：2018-10-16T14:53:29.390

如果您使用的是 python3.7，那么最好的解决方案是使用 [`datetime.isoformat()`](https://docs.python.org/3/library/datetime.html#datetime.datetime.isoformat)and [`datetime.fromisoformat()`](https://docs.python.org/3/library/datetime.html#datetime.datetime.fromisoformat)；它们适用于幼稚和有意识的`datetime`对象：

```
#!/usr/bin/env python3.7

from datetime import datetime
from datetime import timezone
from datetime import timedelta
import json

def default(obj):
    if isinstance(obj, datetime):
        return { '_isoformat': obj.isoformat() }
    raise TypeError('...')

def object_hook(obj):
    _isoformat = obj.get('_isoformat')
    if _isoformat is not None:
        return datetime.fromisoformat(_isoformat)
    return obj

if __name__ == '__main__':
    #d = { 'now': datetime(2000, 1, 1) }
    d = { 'now': datetime(2000, 1, 1, tzinfo=timezone(timedelta(hours=-8))) }
    s = json.dumps(d, default=default)
    print(s)
    print(d == json.loads(s, object_hook=object_hook)) 
```

输出：

```
{"now": {"_isoformat": "2000-01-01T00:00:00-08:00"}}
True 
```

如果您使用的是python3.6或更低版本，并且您只关心时间值（而不是时区），那么您可以使用`datetime.timestamp()`and `datetime.fromtimestamp()`来代替；

如果您使用的是python3.6或更低版本，并且您确实关心时区，那么您可以通过 获取它`datetime.tzinfo`，但您必须自己序列化该字段；最简单的方法是`_tzinfo`在序列化对象中添加另一个字段；

最后，请注意所有这些示例中的精确度；

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2018-07-31T21:23:27.740

json.dumps 方法可以接受一个名为 default 的可选参数，该参数应该是一个函数。每次 JSON 尝试转换一个不知道如何转换的值时，它都会调用我们传递给它的函数。该函数将接收有问题的对象，并期望返回该对象的 JSON 表示。

```
def myconverter(o):
 if isinstance(o, datetime.datetime):
    return o.__str__()

print(json.dumps(d, default = myconverter)) 
```

* * *

## 回答 #10

> 赞同：21
> 
> 时间：2013-07-31T00:07:54.043

我的解决方案（我认为不那么冗长）：

```
def default(o):
    if type(o) is datetime.date or type(o) is datetime.datetime:
        return o.isoformat()

def jsondumps(o):
    return json.dumps(o, default=default) 
```

然后使用`jsondumps`而不是`json.dumps`. 它将打印：

```
>>> jsondumps({'today': datetime.date.today()})
'{"today": "2013-07-30"}' 
```

我想要，稍后你可以通过简单的`default`方法来添加其他特殊情况。例子：

```
def default(o):
    if type(o) is datetime.date or type(o) is datetime.datetime:
        return o.isoformat()
    if type(o) is decimal.Decimal:
        return float(o) 
```

* * *

## 回答 #11

> 赞同：21
> 
> 时间：2013-08-01T23:27:38.493

我有一个类似问题的应用程序；我的方法是将日期时间值 JSON 化为 6 项列表（年、月、日、小时、分钟、秒）；您可以将微秒作为 7 项列表，但我不需要：

```
class DateTimeEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, datetime.datetime):
            encoded_object = list(obj.timetuple())[0:6]
        else:
            encoded_object =json.JSONEncoder.default(self, obj)
        return encoded_object

sample = {}
sample['title'] = "String"
sample['somedate'] = datetime.datetime.now()

print sample
print json.dumps(sample, cls=DateTimeEncoder) 
```

产生：

```
{'somedate': datetime.datetime(2013, 8, 1, 16, 22, 45, 890000), 'title': 'String'}
{"somedate": [2013, 8, 1, 16, 22, 45], "title": "String"} 
```

* * *

## 回答 #12

> 赞同：19
> 
> 时间：2017-10-31T11:48:43.073

您应该在方法`.strftime()`上应用`.datetime.now()`方法以使其成为可*序列化*的方法。

这是一个例子：

```
from datetime import datetime

time_dict = {'time': datetime.now().strftime('%Y-%m-%dT%H:%M:%S')}
sample_dict = {'a': 1, 'b': 2}
sample_dict.update(time_dict)
sample_dict 
```

输出：

```
Out[0]: {'a': 1, 'b': 2, 'time': '2017-10-31T15:16:30'} 
```

* * *

## 回答 #13

> 赞同：18
> 
> 时间：2015-08-26T11:38:06.027

这个 Q 一次又一次地重复 - 一种修补 json 模块以便序列化支持 datetime 的简单方法。

```
import json
import datetime

json.JSONEncoder.default = lambda self,obj: (obj.isoformat() if isinstance(obj, datetime.datetime) else None) 
```

比像往常一样使用 json 序列化 - 这次将 datetime 序列化为 isoformat。

```
json.dumps({'created':datetime.datetime.now()}) 
```

导致：'{"created": "2015-08-26T14:21:31.853855"}'

在以下位置查看更多详细信息和一些注意事项： [StackOverflow：Python 和 JavaScript 之间的 JSON 日期时间](https://stackoverflow.com/questions/455580/json-datetime-between-python-and-javascript/32224522#32224522)

* * *

## 回答 #14

> 赞同：11
> 
> 时间：2012-08-09T03:08:10.347

您必须提供一个自定义编码器类，其`cls`参数为`json.dumps`. 引用[文档](http://docs.python.org/library/json.html)：

```
>>> import json
>>> class ComplexEncoder(json.JSONEncoder):
...     def default(self, obj):
...         if isinstance(obj, complex):
...             return [obj.real, obj.imag]
...         return json.JSONEncoder.default(self, obj)
...
>>> dumps(2 + 1j, cls=ComplexEncoder)
'[2.0, 1.0]'
>>> ComplexEncoder().encode(2 + 1j)
'[2.0, 1.0]'
>>> list(ComplexEncoder().iterencode(2 + 1j))
['[', '2.0', ', ', '1.0', ']'] 
```

这使用复数作为示例，但您可以轻松地创建一个类来编码日期（除了我认为 JSON 对日期有点模糊）

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2015-12-16T03:53:51.447

这是解决“日期时间不可序列化 JSON”问题的简单解决方案。

```
enco = lambda obj: (
    obj.isoformat()
    if isinstance(obj, datetime.datetime)
    or isinstance(obj, datetime.date)
    else None
)

json.dumps({'date': datetime.datetime.now()}, default=enco) 
```

**输出：->** {“日期”：“2015-12-16T04:48:20.024609”}

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2018-12-01T14:01:58.103

其实很简单。如果您需要经常序列化日期，请将它们作为字符串使用。如果需要，您可以轻松地将它们转换回日期时间对象。

如果您主要需要作为日期时间对象工作，那么在序列化之前将它们转换为字符串。

```
import json, datetime

date = str(datetime.datetime.now())
print(json.dumps(date))
"2018-12-01 15:44:34.409085"
print(type(date))
<class 'str'>

datetime_obj = datetime.datetime.strptime(date, '%Y-%m-%d %H:%M:%S.%f')
print(datetime_obj)
2018-12-01 15:44:34.409085
print(type(datetime_obj))
<class 'datetime.datetime'> 
```

如您所见，两种情况下的输出是相同的。只是类型不同。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2015-06-30T18:25:15.007

最简单的方法是将日期时间格式的dict部分更改为isoformat。该值实际上是一个 json 可以使用的 isoformat 字符串。

```
v_dict = version.dict()
v_dict['created_at'] = v_dict['created_at'].isoformat() 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2017-12-22T00:44:57.797

试试这个用一个例子来解析它：

```
#!/usr/bin/env python

import datetime
import json

import dateutil.parser  # pip install python-dateutil

class JSONEncoder(json.JSONEncoder):

    def default(self, obj):
        if isinstance(obj, datetime.datetime):
            return obj.isoformat()
        return super(JSONEncoder, self).default(obj)

def test():
    dts = [
        datetime.datetime.now(),
        datetime.datetime.now(datetime.timezone(-datetime.timedelta(hours=4))),
        datetime.datetime.utcnow(),
        datetime.datetime.now(datetime.timezone.utc),
    ]
    for dt in dts:
        dt_isoformat = json.loads(json.dumps(dt, cls=JSONEncoder))
        dt_parsed = dateutil.parser.parse(dt_isoformat)
        assert dt == dt_parsed
        print(f'{dt}, {dt_isoformat}, {dt_parsed}')
        # 2018-07-22 02:22:42.910637, 2018-07-22T02:22:42.910637, 2018-07-22 02:22:42.910637
        # 2018-07-22 02:22:42.910643-04:00, 2018-07-22T02:22:42.910643-04:00, 2018-07-22 02:22:42.910643-04:00
        # 2018-07-22 06:22:42.910645, 2018-07-22T06:22:42.910645, 2018-07-22 06:22:42.910645
        # 2018-07-22 06:22:42.910646+00:00, 2018-07-22T06:22:42.910646+00:00, 2018-07-22 06:22:42.910646+00:00

if __name__ == '__main__':
    test() 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2013-05-03T22:21:22.520

如果您在视图中使用结果，请确保返回正确的响应。根据 API，jsonify 执行以下操作：

> 使用 application/json mimetype 使用给定参数的 JSON 表示创建一个响应。

要使用 json.dumps 模拟这种行为，您必须添加几行额外的代码。

```
response = make_response(dumps(sample, cls=CustomEncoder))
response.headers['Content-Type'] = 'application/json'
response.headers['mimetype'] = 'application/json'
return response 
```

您还应该返回一个 dict 以完全复制 jsonify 的响应。因此，整个文件将如下所示

```
from flask import make_response
from json import JSONEncoder, dumps

class CustomEncoder(JSONEncoder):
    def default(self, obj):
        if set(['quantize', 'year']).intersection(dir(obj)):
            return str(obj)
        elif hasattr(obj, 'next'):
            return list(obj)
        return JSONEncoder.default(self, obj)

@app.route('/get_reps/', methods=['GET'])
def get_reps():
    sample = ['some text', <datetime object>, 123]
    response = make_response(dumps({'result': sample}, cls=CustomEncoder))
    response.headers['Content-Type'] = 'application/json'
    response.headers['mimetype'] = 'application/json'
    return response 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2013-11-08T02:36:09.497

这是我将日期时间转换为 JSON 并返回的完整解决方案。

```
import calendar, datetime, json

def outputJSON(obj):
    """Default JSON serializer."""

    if isinstance(obj, datetime.datetime):
        if obj.utcoffset() is not None:
            obj = obj - obj.utcoffset()

        return obj.strftime('%Y-%m-%d %H:%M:%S.%f')
    return str(obj)

def inputJSON(obj):
    newDic = {}

    for key in obj:
        try:
            if float(key) == int(float(key)):
                newKey = int(key)
            else:
                newKey = float(key)

            newDic[newKey] = obj[key]
            continue
        except ValueError:
            pass

        try:
            newDic[str(key)] = datetime.datetime.strptime(obj[key], '%Y-%m-%d %H:%M:%S.%f')
            continue
        except TypeError:
            pass

        newDic[str(key)] = obj[key]

    return newDic

x = {'Date': datetime.datetime.utcnow(), 34: 89.9, 12.3: 90, 45: 67, 'Extra': 6}

print x

with open('my_dict.json', 'w') as fp:
    json.dump(x, fp, default=outputJSON)

with open('my_dict.json') as f:
    my_dict = json.load(f, object_hook=inputJSON)

print my_dict 
```

输出

```
{'Date': datetime.datetime(2013, 11, 8, 2, 30, 56, 479727), 34: 89.9, 45: 67, 12.3: 90, 'Extra': 6}
{'Date': datetime.datetime(2013, 11, 8, 2, 30, 56, 479727), 34: 89.9, 45: 67, 12.3: 90, 'Extra': 6} 
```

JSON文件

```
{"Date": "2013-11-08 02:30:56.479727", "34": 89.9, "45": 67, "12.3": 90, "Extra": 6} 
```

这使我能够导入和导出字符串、整数、浮点数和日期时间对象。扩展其他类型应该不难。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-10-22T13:29:54.227

我的解决方案...

```
from datetime import datetime
import json

from pytz import timezone
import pytz

def json_dt_serializer(obj):
    """JSON serializer, by macm.
    """
    rsp = dict()
    if isinstance(obj, datetime):
        rsp['day'] = obj.day
        rsp['hour'] = obj.hour
        rsp['microsecond'] = obj.microsecond
        rsp['minute'] = obj.minute
        rsp['month'] = obj.month
        rsp['second'] = obj.second
        rsp['year'] = obj.year
        rsp['tzinfo'] = str(obj.tzinfo)
        return rsp
    raise TypeError("Type not serializable")

def json_dt_deserialize(obj):
    """JSON deserialize from json_dt_serializer, by macm.
    """
    if isinstance(obj, str):
        obj = json.loads(obj)
    tzone = timezone(obj['tzinfo'])
    tmp_dt = datetime(obj['year'],
                      obj['month'],
                      obj['day'],
                      hour=obj['hour'],
                      minute=obj['minute'],
                      second=obj['second'],
                      microsecond=obj['microsecond'])
    loc_dt = tzone.localize(tmp_dt)
    deserialize = loc_dt.astimezone(tzone)
    return deserialize 
```

好的，现在进行一些测试。

```
# Tests
now = datetime.now(pytz.utc)

# Using this solution
rsp = json_dt_serializer(now)
tmp = json_dt_deserialize(rsp)
assert tmp == now
assert isinstance(tmp, datetime) == True
assert isinstance(now, datetime) == True

# using default from json.dumps
tmp = json.dumps(datetime.now(pytz.utc), default=json_dt_serializer)
rsp = json_dt_deserialize(tmp)
assert isinstance(rsp, datetime) == True

# Lets try another timezone
eastern = timezone('US/Eastern')
now = datetime.now(eastern)
rsp = json_dt_serializer(now)
tmp = json_dt_deserialize(rsp)

print(tmp)
# 2015-10-22 09:18:33.169302-04:00

print(now)
# 2015-10-22 09:18:33.169302-04:00

# Wow, Works!
assert tmp == now 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-02-01T05:37:27.897

转换`date` 为 `string`

```
date = str(datetime.datetime(somedatetimehere)) 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2016-10-19T21:12:33.893

通常有几种方法可以序列化日期时间，例如：

1.  ISO 字符串，短且可以包含时区信息，例如@jgbarah 的[答案](https://stackoverflow.com/a/22238613/723090)
2.  时间戳（时区数据丢失），例如@JayTaylor 的[回答](https://stackoverflow.com/a/15823348/723090)
3.  属性字典（包括时区）。

如果你对最后一种方式没意见，[json_tricks](https://github.com/mverleg/pyjson_tricks)包会处理日期、时间和日期时间，包括时区。

```
from datetime import datetime
from json_tricks import dumps
foo = {'title': 'String', 'datetime': datetime(2012, 8, 8, 21, 46, 24, 862000)}
dumps(foo) 
```

这使：

```
{"title": "String", "datetime": {"__datetime__": null, "year": 2012, "month": 8, "day": 8, "hour": 21, "minute": 46, "second": 24, "microsecond": 862000}} 
```

所以你需要做的就是

```
`pip install json_tricks` 
```

然后导入 from`json_tricks`而不是`json`.

解码时不将其存储为单个字符串、int 或 float 的优点是：如果您遇到的只是一个字符串或特别是 int 或 float，您需要了解有关数据的一些信息才能知道它是否是日期时间。作为 dict，您可以存储元数据，以便自动解码，这`json_tricks`对您有用。它也很容易为人类编辑。

免责声明：它是由我制作的。因为我有同样的问题。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2021-05-01T20:58:17.753

根据@jjmontes 的回答，我使用了以下方法。对于烧瓶和烧瓶休息的用户

```
# get json string
jsonStr = json.dumps(my_dictionary, indent=1, sort_keys=True, default=str)
# then covert json string to json object
return json.loads(jsonStr) 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-12-02T22:13:38.660

在使用 sqlalchemy 编写类中的序列化装饰器时，我收到了相同的错误消息。所以而不是：

```
Class Puppy(Base):
    ...
    @property
    def serialize(self):
        return { 'id':self.id,
                 'date_birth':self.date_birth,
                  ...
                } 
```

我只是借用了 jgbarah 的使用 isoformat() 的想法，并将原始值附加到 isoformat()，所以它现在看起来像：

```
 ...
                 'date_birth':self.date_birth.isoformat(),
                  ... 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-04-09T00:17:15.810

如果您想要自己的格式，可以快速修复

```
for key,val in sample.items():
    if isinstance(val, datetime):
        sample[key] = '{:%Y-%m-%d %H:%M:%S}'.format(val) #you can add different formating here
json.dumps(sample) 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2018-08-08T12:48:23.400

如果您处于通信双方，则可以使用**repr()**和**eval()**函数以及 json。

```
import datetime, json

dt = datetime.datetime.now()
print("This is now: {}".format(dt))

dt1 = json.dumps(repr(dt))
print("This is serialised: {}".format(dt1))

dt2 = json.loads(dt1)
print("This is loaded back from json: {}".format(dt2))

dt3 = eval(dt2)
print("This is the same object as we started: {}".format(dt3))

print("Check if they are equal: {}".format(dt == dt3)) 
```

您不应该将日期时间导入为

```
from datetime import datetime 
```

因为 eval 会抱怨。或者您可以将日期时间作为参数传递给 eval。无论如何，这应该有效。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2013-07-20T17:21:41.800

在将 django 模型对象外部化为 JSON 转储时，我遇到了同样的问题。这是您可以解决的方法。

```
def externalize(model_obj):
  keys = model_obj._meta.get_all_field_names() 
  data = {}
  for key in keys:
    if key == 'date_time':
      date_time_obj = getattr(model_obj, key)
      data[key] = date_time_obj.strftime("%A %d. %B %Y")
    else:
      data[key] = getattr(model_obj, key)
  return data 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-02-27T20:15:47.623

```
def j_serial(o):     # self contained
    from datetime import datetime, date
    return str(o).split('.')[0] if isinstance(o, (datetime, date)) else None 
```

上述实用程序的用法：

```
import datetime
serial_d = j_serial(datetime.datetime.now())
if serial_d:
    print(serial_d)  # output: 2018-02-28 02:23:15 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-08-22T13:48:08.877

我今天遇到了这个问题，我发现了一个叫做`pickle`. 它是一个用于序列化 python 对象并从 pickle 文件中加载它的内置库。

`pickle`我发现和之间的唯一区别`json`是`pickle`文件是二进制文件，而`json`通常的文本文件也是如此。

它不会导致日期时间对象出现任何问题。

* * *

## 回答 #31

> 赞同：-2
> 
> 时间：2017-04-15T08:27:51.210

我可能不是 100% 正确，但这是进行序列化的简单方法

```
#!/usr/bin/python
import datetime,json

sampledict = {}
sampledict['a'] = "some string"
sampledict['b'] = datetime.datetime.now()

print sampledict   # output : {'a': 'some string', 'b': datetime.datetime(2017, 4, 15, 5, 15, 34, 652996)}

#print json.dumps(sampledict)

'''
output : 

Traceback (most recent call last):
  File "./jsonencodedecode.py", line 10, in <module>
    print json.dumps(sampledict)
  File "/usr/lib/python2.7/json/__init__.py", line 244, in dumps
    return _default_encoder.encode(obj)
  File "/usr/lib/python2.7/json/encoder.py", line 207, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib/python2.7/json/encoder.py", line 270, in iterencode
    return _iterencode(o, 0)
  File "/usr/lib/python2.7/json/encoder.py", line 184, in default
    raise TypeError(repr(o) + " is not JSON serializable")
TypeError: datetime.datetime(2017, 4, 15, 5, 16, 17, 435706) is not JSON serializable

'''

sampledict['b'] = datetime.datetime.now().strftime("%B %d, %Y %H:%M %p")

afterdump = json.dumps(sampledict)

print afterdump  #output : {"a": "some string", "b": "April 15, 2017 05:18 AM"}

print type(afterdump) #<type 'str'>

afterloads = json.loads(afterdump) 

print afterloads # output : {u'a': u'some string', u'b': u'April 15, 2017 05:18 AM'}

print type(afterloads) # output :<type 'dict'> 
```

# visual-c++ - 在 VC++ 中将字符串文字提升为 wchar_t 的标准宏

> ID：11875774
> 
> 赞同：3
> 
> 时间：2012-08-09T02:03:11.867
> 
> 标签：visual-c++, visual-studio-2005

是否有一个标准宏可以使用 Visual Studio 2005 将用预处理器宏替换的 char 字符串文字转换为 wchar_t 字符串？

例如这有效：

```
wchar_t* test = L"Hello World"; 
```

但这不是：

```
#define HELLOWORLD "Hello World"
wchar_t* test = L(HELLOWORLD); 
```

我正在与不同平台上的几个不同项目共享一个包含许多国际化字符串的头文件，因此我不想更改标头本身，也不想添加 _T() 因为这取决于平台。所以我希望 unicode 转换在我的源代码中，而不是在标题中。我知道我可以编写自己的替换宏，如此处所示[，](https://stackoverflow.com/questions/1690082/combining-wide-string-literal-with-string-macro)但我想知道 VS 中是否有标准方法？

对于任何编写国际化代码的人来说，这似乎是一个非常常见的场景，但我似乎找不到随 VS2005 提供的预定义宏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-19T10:13:11.080

我有一个类似的问题，我想出了这个解决方案：

```
#define HELLOWORLD "Hello World"
const wchar_t* test = L"" HELLOWORLD; 
```

我用 GCC 7 对此进行了测试，我必须确保转换（宽到字符）功能正常工作。

我很确定这也适用于其他编译器。即使是较旧的，也需要编写多行注释的功能。但也许它会抱怨使用空字符串文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:16:26.110

不，没有“标准”宏。标准是在宽字符串前加上 an`L`前缀，并在窄字符串中省略前缀。

甚至需要存在这样的宏的唯一原因是当您针对不支持 Unicode 的平台进行各种定位时。在这种情况下，一切都需要是一个窄字符串。如果您不是在处理缺乏 Unicode 支持的平台，那么*所有内容*都可能一直是一个宽字符串。

在Windows 头文件中提供了`_T`和`TEXT`宏正是为了这个目的：维护一个单一的代码库，可以为支持 Unicode 的 Windows NT 和缺乏 Unicode 支持的 Windows 9x 编译。

我无法想象如果您*还没有*包含 Windows 标头，为什么您需要这样的宏，但是如果您这样做了，那么您自己编写一个非常简单。除了您需要知道字符串文字何时应该是宽字符串以及何时应该是窄字符串之外。这也没有“标准” `#define`。Windows 标头使用`UNICODE`预处理器符号，但您不能依赖它在其他平台上定义。所以现在你回到了你开始的地方。

**为什么你认为你需要一个宏呢？如果您将字符串的类型硬编码为`wchar_t*`，那么您*总是*希望使用宽字符文字，因此您*总是*希望使用`L`前缀。**

当您使用 Windows 标头中的`_T`和/或`TEXT`宏时，您也没有将字符串的类型硬编码为`wchar_t*`. 相反，您使用的是`TCHAR`宏，它会根据符号的定义自动解析为适当的字符类型`UNICODE`。

# c# - 在其他线程工作时刷新页面

> ID：11875776
> 
> 赞同：3
> 
> 时间：2012-08-09T02:03:39.700
> 
> 标签：c#, asp.net, multithreading, asynchronous, webforms

**我的目标：**

1.  用户点击按钮
2.  按钮开始 myTimeConsumingProcess()
3.  同一页面中的 TextBox 每秒更新一次并添加一个“.”，直到该过程完成。

**我所拥有的（这有效，但不是我想要的）：**

1.  用户单击按钮开始 myTimeConsumingProcess() 的按钮
2.  一个新线程执行 myTimeConsumingProcess()
3.  用户被重定向到“处理”页面
4.  使用布尔 Session 变量，此页面会无休止地刷新，直到留在上一页中的线程将 Session 变量切换为 false。

**到目前为止的代码：**

**数据库检查器.aspx.cs**

```
protected void btnStartProcess_Click(object sender, EventArgs e)
{
    Session["Running"] = true;
    Session["TextBoxContent"] = "Beginning myTimeConsumingProcess()...";
    Thread thread = new Thread(new ThreadStart(MyTimeConsumingProcess));
    thread.Start();
    Response.Redirect("Processing.aspx");
}

private void myTimeConsumingProcess()
{
    //do stuff!
    Session["TextBoxContent"] += "SUCCESS!"
    Session["Running"] = false;
} 
```

* * *

**处理.aspx**

每秒刷新一次页面：

```
<meta http-equiv="refresh" content="1" /> 
```

**处理.aspx.cs**

停留在此页面上，每 1 秒刷新一次，直到线程（留在 DatabaseChecker.aspx.cs 中）将 Session 变量“Running”变为 false。

```
protected void Page_Load(object sender, EventArgs e)
{
    TextBox1.Text = Session["TextBoxContent"].ToString();
    Session["TextBoxContent"] += ".";

    if ((bool)Session["Running"] == false)
    {
        Response.Redirect("DatabaseChecker.aspx");
    }
} 
```

**我想要什么我无法弄清楚：**

如果可能的话，我想避免重定向到另一个页面，而只是更新单击按钮的页面中的 TextBox。我尝试使用 QueryString 重定向到同一页面以指示我在此过程中的位置。但是，这不起作用 --- 到达了重定向到同一页面的代码，并且更新了文本，但是在进程完成之前似乎什么都没有发生（这违背了线程的目的）。

我已经尝试了我能想到的所有替代方案，包括`UpdatePanel`、`Timer` `PageAsyncTask`控件以及通过将这些控件与 Threads 结合使用并且将 .aspx 页面的 Async 属性设置为 true 时我能想到的几乎所有组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:12:13.053

您是否尝试过使用 AJAX。

当他们单击触发 AJAX 功能的按钮时，该功能将启动您的耗时过程。

然后使用 AJAX 轮询页面的进度。

* * *

添加了一些代码来解释我过去是如何做到的。

我实际上不确定你是否需要一个更新面板，但我有一个。

这是一些我认为你想要的代码。原始代码处理图像，并向用户显示进度条。

我在项目中有 AjaxControlToolkit 和 Ajax 作为参考。

[http://ajaxcontroltoolkit.codeplex.com/](http://ajaxcontroltoolkit.codeplex.com/)

这会将脚本管理器添加到页面

```
<ajaxToolkit:ToolkitScriptManager runat="server" ID="scriptManageer" EnablePartialRendering="true" AsyncPostBackTimeout="900" /> 
```

这是页面的“重要”部分。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <div id="message">&nbsp;</div>

        <button id="btnSave" class="saveButton" onclick="doSomething();return false;">Save</button>
    </ContentTemplate>
</asp:UpdatePanel>` 
```

这个 javascript 使轮询工作。

```
<script type="text/javascript">
    function startPoll()
    {
        Default.DoThing();
        myInterval = setInterval("poll()", 1000); //If you really want to poll that often
    }

    function poll()
    {
        progress = Default.ThingProcess();
        if (progress == "100%")
        {
            clearInterval(myInterval);
        }
        document.getElemenyById("message").innerHTML = progress;
    }
</script> 
```

这是我的代码隐藏。

```
public partial class Default : System.Web.UI.Page
{
    protected void Page_load(object sender, EventArgs e)
    {
        Ajax.Utility.RegisterTypeForAjax(typeof(Default));
    }

    [Ajax.AjaxMethod]
    public void DoThing()
    {
        Thread thread = new Thread(new ThreadStart(MyTimeConsumingProcess));
        thread.Start();
        //The MyTimeConsumingProcess updates a var for thing progess
    }

    [Ajax.AjaxMethod]
    private String ThingProgress()
    {
        //Reads some var
        return progressNumber + "%"
    }
} 
```

由于剪切和粘贴，它可能有一些不需要但不应该阻止它工作的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:13:44.877

也许如果您将第二个参数设置为`Response.Redirect`to `true`，则它不会等待页面处理。

```
public void Redirect(string url, bool endResponse); 
```

# eclipse - Eclipse 显示一个不真实的错误？

> ID：11875777
> 
> 赞同：1
> 
> 时间：2012-08-09T02:03:40.407
> 
> 标签：eclipse, exception

今天，我在 Eclipse 中制作 Minecraft 模组，我的电脑不得不重新启动，它强制关闭了 Eclipse。现在，当我的计算机重新启动时，我之前修复的错误被突出显示。代码已修复并且运行良好，但 Eclipse 仍然指出了我之前的“错误”。

![日食是惊人的](../Images/6e371dca85e7cf4e04b40193b387ef09.png)

我尝试过刷新工作区、重新启动 Eclipse 以及任何通用的故障排除技术。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:07:42.513

尝试手动或通过 Project -> Clean 命令清理构建文件夹（通常是 bin），取消选择自动构建，然后重新构建整个项目。

之后它应该是正确的，您可以重新启用自动构建功能。

如果这不起作用，您还可以尝试删除项目（不是从磁盘中）并将其重新导入工作区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T02:17:15.767

您是否清理了项目 ( `Project->clean`) 并进行了构建？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T02:18:46.410

1.  从“标记”中删除错误
2.  运行“刷新”
3.  对您的项目运行“验证”。

# arrays - 2D 数组 - 不按我的意愿更新数量

> ID：11875787
> 
> 赞同：0
> 
> 时间：2012-08-09T02:04:55.757
> 
> 标签：arrays, session, asp-classic, multidimensional-array

我得到了一个购物车代码，它使用二维数组在会话中存储用户订单！
我们这里有一些常量：

```
CONST CART_Product_ID = 0
CONST CART_Product_NAME = 1
CONST CART_Product_PRICE = 0
CONST CART_Product_QUANTITY = 3 
```

我的第一个问题来了！！
为什么要定义这些常量？为什么得到价值 0-1-0-3 ？！

在下一步中，它从这样的表单中获取变量：

```
Dim Product_ID, Product_Name, Product_Price, Product_Qty
Product_ID      = trim(request("pro_id"))  
Product_Name    = trim(request("pro_name"))  
Product_Price   = trim(request("pro_price"))
Product_Qty     = trim(request("pro_qty")) 
```

在下一步中，它检查是否有一个会话，如果没有，则创建一个：

```
If not isArray(Session("Cart")) then  
    dim localCart(4,50)
ELSE  
    localCart = Session("Cart")  
End If 
```

在下一步中，它检查数组以添加或更新项目的数量，如下所示：

```
Dim FoundIt, i
if Product_ID <> "" then
    FoundIt = False
    For i = 0 to ubound(localCart)
        If localCart(CART_Product_ID,i) = Product_ID then
            localCart(CART_Product_QUANTITY,i) = localCart(CART_Product_QUANTITY,i)+1
            FoundIt = true
            EXIT For
        End If
    NEXT
    If NOT FoundIt then
        For i = 0 to ubound(localCart,2)
            If localCart(CART_Product_ID,i) = "" Then
                localCart(CART_Product_ID,i) = Product_ID
                localCart(CART_Product_NAME,i) = Product_Name
                localCart(CART_Product_PRICE,i) = Product_Price
                localCart(CART_Product_QUANTITY,i) = Product_Qty
                EXIT For
            End If
        NEXT
    End If
End If

Session("Cart") = localCart 
```

还有一些问题在这里！！
1-当我将相同的产品发布到此页面（product_ID = 1）时，它会添加越来越多而不是更新数量，为什么？！

2-当我想写这样的数组内容时：

```
Dim OrderTotal
OrderTotal = 0
for i = 0 to ubound(localCart,2)
   if localCart(CART_Product_ID, i) <> "" then
      orderTotal = orderTotal + (localCart(CART_Product_PRICE,i)) * localCart(CART_Product_QUANTITY,i)
      Response.Write("Product ID = "& localCart(CART_Product_ID,i) &"<br/>")
      Response.Write("Product Name = "& localCart(CART_Product_NAME,i) &"<br/>")
      Response.Write("Product Price = "& localCart(CART_Product_PRICE,i) &"<br/>")
      Response.Write("Product Qty= "& localCart(CART_Product_QUANTITY,i) &"<br/>")
   end if
next
Response.Write ("Total = "& formatCurrency(orderTotal) &"") 
```

它不是价格，而是显示产品 ID！
输出是这样的：

产品 ID = 1
产品名称 = 奶酪
产品价格 = 1 !!!!!!!!!
产品数量 = 1

请指导我！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:58:10.840

不是一个伟大的设计。这四个常量充当表索引，因此它们需要是四个不同的值。

```
CONST CART_Product_ID = 0
CONST CART_Product_NAME = 1
CONST CART_Product_PRICE = 2    <= this one was wrong
CONST CART_Product_QUANTITY = 3 
```

# html - CSS：使用像素设置父尺寸时的嵌套元素高度

> ID：11875792
> 
> 赞同：1
> 
> 时间：2012-08-09T02:05:07.977
> 
> 标签：html, css, layout

请看看[这个小提琴](http://jsfiddle.net/SbDJu/3/)。

这是更复杂形式的一个非常简化的版本。在`.dojoxAlertBar`中，出于编程原因，高度设置为 100%。一切都很好，直到我将高度设置`#registerform`为一组数字：

```
/*    height:117px;  */ 
```

没有这个，消息的高度是“尽可能大”。但是，在 CSS 中取消注释 117px 高度会导致高度`.dojoAlertBox`等于`#registerForm`.

有人可以解释为什么会这样吗？我一直误解 CSS 中的“高度”是如何工作的。这个“100%”到底是什么意思？如果它的意思是“100% 的包含元素”，那么为什么即使没有为父元素指定高度，它也不设置为“大”？

事实上，如果我可以请求，有一个简单的表格来说明如何为固定/绝对和相对/静态元素计算高度，那也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:11:21.357

> 没有这个，消息的高度是“尽可能大”。

为了给一个元素 ( `.dojoAlertBar`) 一个百分比高度，它的父元素 ( `#registerForm`) 必须有一个明确的高度。由于在您的示例中`.registerForm`具有自动高度，因此该块将采用其内容的高度。

> 但是，取消注释会导致评论框与#registerForm 一样大……“100%”实际上是什么意思？

100% 的高度意味着元素的高度是其父元素的 100%。因此，父 div 必须具有明确的高度属性。当您给出`#registerForm`117 像素的高度时，这意味着`.dojoAlertBar`将是该高度的 100%，即 117 像素。

# javascript - 未找到 JavaScript/jQuery 键

> ID：11875796
> 
> 赞同：0
> 
> 时间：2012-08-09T02:06:32.250
> 
> 标签：javascript, jquery, html, django

我有一本 Javascript 字典，我将它传递给 Django 中的一个函数。但是当我尝试访问 POST 中的数据时，它说当密钥明显存在时找不到密钥消息。我一直在为这个问题挠头。我是 Javascript 和 Jquery 的新手，所以我确定我犯了一个简单的错误。

继承人的代码：

```
function share(id) {
  var message = $('textarea#message').val();
  var postData = { message: message, id: id };
  $.post( "/{{ username }}/post/", postData, function ( json ) {
    $('#posts').load(' #posts', function(){$(this).children().unwrap()})
  } );
} 
```

确切的错误：

> /Mohammed/post/ 处的 MultiValueDictKeyError “在请求方法中找不到键‘消息’：POST

**更新** 所以我已经缩小了这个问题的范围，它的 var 消息没有得到一个值。我试图从中获取值的html如下：

```
 <textarea class="input-xlarge inputConvo"  value = "" name="message" id="textarea" rows="2" style="width:98%; min-width:98%; max-width:98%;" placeholder="Share something with <user>."></textarea> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:43:34.180

啊哈！你没有正确理解元素。试试这个：

```
var message = $('#textarea').val(); 
```

语法意味着使用*textarea*获取`#`元素`id`。不是名字。您可以将*消息*更改为并使用*`id`*`$('#message').val();`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T02:31:40.503

jQuery 部分对我来说看起来不错。确保您在服务器端执行以下操作：

```
message = request.POST['message'] 
```

如果这不起作用，您可以尝试以下操作，它将同时查看 GET 和 POST。

```
message = request.REQUEST['message'] 
```

如果您仍然没有任何运气，请尝试打印`request.POST`并`request.REQUEST`到控制台，例如

```
print request.REQUEST 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:35:05.607

您应该`dict`以更安全的方式从对象中提取数据，如下所示：

```
request.REQUEST.get('message', '') 
```

这将避免任何`Key not found`错误。只需根据需要设置默认值即可。**

# java - 使用java在windows中监控程序/进程执行

> ID：11875797
> 
> 赞同：0
> 
> 时间：2012-08-09T02:06:32.157
> 
> 标签：java

我正在尝试开发一个小型应用程序，它可以监视在 Windows 机器中执行的程序/进程。

如果程序/进程不应该运行，它应该被阻止。它的工作原理类似于防病毒软件。

这是基本思想。

我想知道如何连接到操作系统以获取有关试图在机器中运行的每个程序/进程的通知。

我想要它在java中......有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:15:37.490

Java 不会是你最好的答案，对不起，伙计。它不限于 JVM，可以在此之外访问，但对于您正在寻找的东西，不幸的是，它不是一种有效的语言。无论如何，看看你得到了什么其他答案。

# php - 代码本身可以正常工作，但包含在我的表单中时却不行

> ID：11875811
> 
> 赞同：0
> 
> 时间：2012-08-09T02:07:42.540
> 
> 标签：php

我有 2 个文件：**add.php**（将配方添加到数据库的表单和**numbers.php**（用于显示成分选项的列表）。

两个脚本/页面单独工作......但是当我包含（'numbers.php'）时，onchange代码不起作用。

```
//numbers.php
<form name="numbers" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<select name="select" onchange="javascript: document.numbers.submit();">
  <option value=0>-</option>
  <option value=1>1</option>
  <option value=2>2</option>
  <option value=3>3</option>
  <option value=4>4</option>
</select>
</form>
<?php
$num_ingredients = $_REQUEST["select"];
$count = 0;
while ($count < $num_ingredients) {
  $count++;
  include ('../ingredients/list.php');
  echo '<br />';
}
?>

//add.php
<form enctype="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
Recipe Title:
  <input type="text" name="recipe_name" maxlength="30" value="<?php echo $recipe_name; ?>" /><br />
Ingredients:
  <?php include ('numbers.php'); ?><br />
<input type="submit" value="Add Recipe" />
<input type="button" onclick="history.go(0)" value="Clear" /><br />
</form> 
```

一如既往地非常感谢任何帮助:)

- - - - 编辑 - - - - - - - - - - - - - - - - - - -

这是 add.php 请求的页面源

* * *

```
<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="Content Type" content="text/html; charset=UTF-8" />
<title>POWERCHEF</title>
  <meta name="robots" content="noindex, nofollow">
  <meta name="distribution" content="iu">
  <meta name="format-detection" content="telephone=yes">
  <meta name="copyright" content="Copyright 2012">
</head>
<body>
<!-- ON WITH THE SHOW --><h3>ADD RECIPE</h3><html>
<form enctype="multipart/form-data" action="/kitchen/recipes/add.php" method="POST">

Recipe Title:
  <input type="text" name="recipe_name" maxlength="30"
  value="" /><br />
Subtitle:
  <input type="text" name="recipe_subtitle" maxlength="50"
  value="" /><br />
Category:
  <input type="text" name="recipe_category" maxlength="50"
  value="" /><br />
Subcategory:
  <input type="text" name="recipe_subcategory" maxlength="50"
  value="" /><br />
  <br />
Photo:<br />
  <input type="hidden" name="MAX_FILE_SIZE" value="200000" />
  <input type="file" name="recipe_photo" value="" /><br />
  <br />
Ingredients:<br />
  <form name="numbers" method="post"
  action="/kitchen/recipes/add.php">
<select name="select" onchange="javascript: document.numbers.submit();">
  <option value=0>-</option>
  <option value=1>1</option>
  <option value=2>2</option>
  <option value=3>3</option>
  <option value=4>4</option>
  <option value=5>5</option>
  <option value=6>6</option>
  <option value=7>7</option>
  <option value=8>8</option>
  <option value=9>9</option>
  <option value=10>10</option>
  <option value=11>11</option>
  <option value=12>12</option>
  <option value=13>13</option>
  <option value=14>14</option>
  <option value=15>15</option>
  <option value=16>16</option>
  <option value=17>17</option>
  <option value=18>18</option>
  <option value=19>19</option>
  <option value=20>20</option>
  <option value=21>21</option>
  <option value=22>22</option>
  <option value=23>23</option>
  <option value=24>24</option>
  <option value=25>25</option>
  <option value=26>26</option>
  <option value=27>27</option>
  <option value=28>28</option>
  <option value=29>29</option>
  <option value=30>30</option>
</select>
</form>
<br />
<br />
Prep Instructions:<br />
  <textarea name="recipe_prep_instructions" class="" cols="88" rows="15"
  value="" /></textarea><br />
  <br />
Cooking Instructions:<br />
  <textarea name="recipe_prep_instructions" class="" cols="88" rows="15"
  value="" /></textarea><br />
  <br />
<input type="submit" value="Add Recipe" />
<input type="button" onclick="history.go(0)" value="Clear" /><br />
<br />
</form>
</html>
<footer>
  <p>
    <small><strong>&copy; 2012 </strong> -&nbsp;All Rights Reserved</small>
  </p>
</footer>
<!-- THANKS FOR STOPPING BY! -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:14:00.807

你有一个错字：

```
<input type="text" name="recipe_name" maxlength="30" value="<?php echo $recipe_name"; ?>" /><br /> 
```

应该是：（注意删除了 php 块中的引号）

```
 <input type="text" name="recipe_name" maxlength="30" value="<?php echo $recipe_name; ?>" /><br /> 
```

引用可能会弄乱其他脚本。

编辑：好的，这也只是复制粘贴错字吗？

```
<form name="numbers" method="post action="<?php echo $_SERVER['PHP_SELF']; ?>"> 
```

应该：

```
<form name="numbers" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"> 
```

EDIT2：好的，问题是“数字”表单在另一个表单内，因此无法使用`document.numbers`. 要修复它，您将需要以不同的方式访问它，例如给它一个 id 并使用`getElementById`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:23:10.643

add.php 上的表单没有名称

# .net - String.IsNullOrEmpty()

> ID：11875812
> 
> 赞同：0
> 
> 时间：2012-08-09T02:07:45.873
> 
> 标签：.net, vb.net, .net-3.5

最近我注意到，当我们在 .NET 代码中进行字符串比较时，我们一直在防范空引用。这个检查在 VB.NET 中似乎是不必要的，因为它重载了相等运算符并为我们执行这个 null ref 检查。大家同意吗？

请参阅以下示例：

```
 Dim myStringVariable As String

        ' Unnecessary in VB.NET
        If myStringVariable Is Nothing OrElse myStringVariable = "" Then
        End If

        ' Unnecessary in VB.NET
        If String.IsNullOrEmpty(myStringVariable) Then
        End If

        ' This will work
        If myStringVariable = "" Then
        End If

        ' Also acceptable if you don't like using hard coded constants
        If myStringVariable = String.Empty Then
        End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:10:41.440

特别是对于平等测试，您可能是对的。但是，相等性测试并不是您对字符串所做的唯一事情。

我没有做太多的VB.Net，但我强烈怀疑

```
myStringVariable.Length 
```

如果 myStringVariable 为空，就会爆炸，呃......什么都没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T02:11:02.523

从来没有必要明确说明你在做什么。如果正在处理您的代码的人阅读`String.IsNullOrEmpty`他们知道您的意思是用同样的方式处理 null 和 empty。

如果正在处理您的代码的人阅读`myStringVariable = String.Empty`，他们必须想知道您是否打算以相同的方式处理空值和清空，或者您是否疏忽了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:10:24.570

你是对的，结合所有这些检查是多余的。

为什么不将其简化为：

```
If String.IsNullOrEmpty(myStringVariable) Then
    ' do whatever
End If 
```

# java - BufferedWriter 表现得很奇怪

> ID：11875815
> 
> 赞同：2
> 
> 时间：2012-08-09T02:08:08.927
> 
> 标签：java, bufferedwriter

我正在尝试使用有效的高分机制制作游戏，并且正在使用 java.io.BufferedWriter 写入高分文件。我对高分没有加密，我使用 Slick2D 和 LWJGL 进行渲染和用户输入。程序执行这段代码：

```
FileWriter fstream = new FileWriter("res/gabjaphou.txt");

BufferedWriter writer = new BufferedWriter(fstream);

writer.write(score); // score is an int value

writer.close(); // gotta save m'resources! lol 
```

我打开由此生成的文本文件，它读取的只是一个问号。我不知道为什么会发生这种情况，我使用了我正在制作的另一个项目中的其他代码，我对此没有任何问题……有人知道为什么吗？这真的很烦人！：C

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T02:12:11.740

[BufferedWriter.write(int)](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html#write%28int%29)旨在写入单个字符，而不是整数。

> `public void write(int c)`
> `throws IOException`
> 
> 写入单个字符。
> 
> **覆盖**：写入类 Writer
> **参数：** `c` -`int`指定要写入的字符
> **抛出：** `IOException` - 如果发生 I/O 错误

尝试

```
writer.write(String.valueOf(score)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T02:11:58.760

请使用`writer.write(String.valueOf(score));`，否则它会[写成`score`一个字符](http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html#write%28int%29)。请参阅文档：

> 写入单个字符。要写入的字符包含在给定整数值的低 16 位中；16 个高位被忽略。

您要使用的是[`Writer.write(String)`](http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html#write%28java.lang.String%29)；转换`score`为`String`using`String.valueOf`或`Integer.toString`.

```
writer.write(String.valueOf(score)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:12:22.000

`BufferedWriter`正在尝试将一系列字节写入文件，而不是数字。数字仍然是一个字符。

考虑`FileWriter`改用，就像这样简单： `fileWriter.write(Integer.toString(score))` Write 在这里接受一个字符串，但输出应该是一样的。

# javascript - Jqueryui dialog("close") 结束当前的 javascript 线程

> ID：11875816
> 
> 赞同：1
> 
> 时间：2012-08-09T02:08:18.353
> 
> 标签：javascript, jquery, html, jquery-ui

嗨，我在关闭我的 jquery 对话框时遇到问题。我所拥有的是一个彗星连接，可以将消息发送到我的浏览器。我想做的是当我收到一条消息时我想做一些事情，关闭对话框然后做更多的事情。不幸的是，当我执行时： $('#dialog').dialog("close"); 它结束了我当前的 javascript 代码。有没有办法避免这种情况？还是我需要确保使用变量在最后运行关闭？

例如，在这里你可以看到我的文字在它之后不会改变：http: [//jsfiddle.net/hKhMC/](http://jsfiddle.net/hKhMC/)

这是一个简单的演示，我的实际代码之后会进行大量计算，所以我想知道是否有一个解决方案不涉及在关闭之前移动文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:56:32.687

您正在递归地触发对话框关闭事件。在 Chrome 中，您的 jsfiddle 示例会导致`Uncaught RangeError: Maximum call stack size exceeded`. 这是因为该 `.dialog('close')`方法`dialogclose`在关闭对话框后触发事件。`X`当有人单击对话框工具栏上的按钮或按下键时，也会触发此事件`ESC`。

但是，您在对话框初始化期间绑定此事件，然后调用可以再次触发它的相同方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:28:12.767

所以我找到了解决我的问题的方法。

下面是用于创建 JQueryUI 对话框的代码

```
$('#currentCallDialog').dialog({
    autoOpen : false,
    height : 350,
    width : 550,
    modal : true,
    buttons : {
        "Open" : function() {
            //.. Do something
        }
    },
    close : function() {
        $(this).dialog("close");
    }
}); 
```

问题出在关闭按钮上，我尝试调用对话框（“关闭”）；删除后一切正常，请参阅下面的代码以获取工作示例：

```
$('#currentCallDialog').dialog({
    autoOpen : false,
    height : 350,
    width : 550,
    modal : true,
    buttons : {
        "Open" : function() {
            //.. Do something
        }
    },
    close : function() {
        //.. Do something
    }
}); 
```

# c# - 如何使用反射来查找开放泛型类型上的哪个开放泛型参数实现了泛型接口？

> ID：11875819
> 
> 赞同：0
> 
> 时间：2012-08-09T02:08:39.767
> 
> 标签：c#, generics

在我的代码中，我将获得一个类型对象，该对象代表一个开放的通用类，该类实现（至少）2 个开放的通用接口。我知道这些接口中的至少一个（示例中为 IGiveOneValue）。这是一个完整的工作示例：

```
using System;
namespace ConsoleApplication22
{
    interface IGiveOneValue<T>
    {
        T Value { get; }
    }

    interface IGiveAnother<T>
    {
        T Value { get; }
    }

    class ValueImplementation<T1, T2> : IGiveOneValue<T1>, IGiveAnother<T2>
    {
        public ValueImplementation(T1 value1, T2 value2)
        {
            v1 = value1;
            v2 = value2;
        }

        T1 v1;
        T2 v2;

        T1 IGiveOneValue<T1>.Value { get { return v1; } }
        T2 IGiveAnother<T2>.Value { get { return v2; } }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var genericArguments = typeof(ValueImplementation<,>).GetGenericArguments();
            // genericArguments.Length == 2
            // how can I tell which argument will fulfill IGiveOneValue<T>?
            // assuming they could be implemented in any order

            // these parameters might be in the wrong order:
            var closedType = typeof(ValueImplementation<,>).MakeGenericType(new[] { typeof(int), typeof(string)});
            var instance = Activator.CreateInstance(closedType, 1, "2");
        }
    }
} 
```

如何使用反射来确定 ValueImplementation<,> 类中哪些*开放*的泛型参数对应于 IGiveOneValue 的成员，以便我可以在 MakeGenericType 方法中将特定类型传递给它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:42:27.720

[GetInterfaces](http://msdn.microsoft.com/en-us/library/system.type.getinterfaces.aspx)方法将获取该类型的接口，它还允许您使用 GetGenericArguments。因此，如果您想知道类型实现的接口使用哪种类型约束，您可以尝试：

```
var genericArguments = typeof(ValueImplementation<,>).GetGenericArguments();
var implementedInterfaces = typeof(ValueImplementation<,>).GetInterfaces();

foreach (Type _interface in implementedInterfaces) {
    for (int i = 0; i < genericArguments.Count(); i++) {
        if (_interface.GetGenericArguments().Contains(genericArguments[i])) {
            Console.WriteLine("Interface {0} implements T{1}", _interface.Name, i + 1);
        }
    }
} 
```

希望我已经理解了您的问题，并且这提供了一些指导。

# php - 检查 exec() 是否成功运行

> ID：11875820
> 
> 赞同：46
> 
> 时间：2012-08-09T02:08:45.453
> 
> 标签：php, exec

我一直试图让知道`exec()`php 中的命令是否成功执行，以便我可以相应地回显某些消息。我尝试了以下代码，但它的问题是它是否`exec()`始终成功运行，`echo "PDF not created"`并且永远不会成功创建 echo pdf。请让我知道如何检查 exec() 的执行情况，以便我可以相应地回显消息谢谢，

```
<?php
if (exec('C://abc//wkhtmltopdf home.html sample.pdf'))
echo "PDF Created Successfully";
else
echo "PDF not created";
?> 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-09T02:20:23.893

根据 PHP 的[exec quickref](http://php.net/manual/en/function.exec.php)，您可以传递指针以获取命令的输出和状态。

```
<?php
exec('C://abc//wkhtmltopdf home.html sample.pdf', $output, $return);

// Return will return non-zero upon an error
if (!$return) {
    echo "PDF Created Successfully";
} else {
    echo "PDF not created";
}
?> 
```

如果你想列举可能的错误，你可以在[hiteksoftware找到代码](http://www.hiteksoftware.com/knowledge/articles/049.htm)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-03-24T21:07:47.903

正确的方法是检查 $return_var 是否没有设置为零，因为它只有在成功时才设置为零。在某些情况下，exec 可能会失败，并且 return_var 未设置为任何值。例如，如果服务器在执行过程中磁盘空间不足。

```
<?php
exec('C://abc//wkhtmltopdf home.html sample.pdf', $output, $return_var);
if($return_var !== 0){ // exec is successful only if the $return_var was set to 0\. !== means equal and identical, that is it is an integer and it also is zero.
    echo "PDF not created";
}
else{
    echo "PDF Created Successfully";
}

?> 
```

注意：不要将 $return_var 初始化为零

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-09T02:24:24.640

一个简单的示例：

```
$ip = "192.168.0.2";
$exec = exec( "ping -c 3 -s 64 -t 64 ".$ip, $output, $return );
echo $exec;
echo "<br />----------------<br />";
print_r( $output );
echo "<br />----------------<br />";
print_r( $return ); 
```

**在不 ping 或 ERROR 的情况下。（ 一 ）**

```
----------------
Array ( [0] => PING 192.168.0.2 (192.168.0.2) 64(92) bytes of data. [1] => [2] => --- 192.168.0.2 ping statistics --- [3] => 3 packets transmitted, 0 received, 100% packet loss, time 2016ms [4] => )
----------------
1 
```

**如果成功（零）**

```
rtt min/avg/max/mdev = 4.727/18.262/35.896/13.050 ms
----------------
Array ( [0] => PING 192.168.0.2 (192.168.0.2) 64(92) bytes of data. [1] => 72 bytes from 192.168.0.2: icmp_req=1 ttl=63 time=14.1 ms [2] => 72 bytes from 192.168.0.2: icmp_req=2 ttl=63 time=35.8 ms [3] => 72 bytes from 192.168.0.2: icmp_req=3 ttl=63 time=4.72 ms [4] => [5] => --- 192.168.0.2 ping statistics --- [6] => 3 packets transmitted, 3 received, 0% packet loss, time 2003ms [7] => rtt min/avg/max/mdev = 4.727/18.262/35.896/13.050 ms )
----------------
0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-19T16:11:56.140

**我为我工作**

**对于系统 linux 和 lang:php,laravel**

```
exec('/usr/bin/tesseract 2.png out1 -l '.$lang,$output,$error);
           return (!$error)? "success":"Error"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-18T13:12:42.103

如果您不关心返回码，我建议使用下一种方法：

```
private function execCommand($command) {
    exec($command, $output, $return);

    return $return === 0;
} 
```

然后简单地称它为：

```
if ($this->execCommand("C://abc//wkhtmltopdf home.html sample.pdf")) {
    echo "Success";
} else {
    echo "Error";
} 
```

# javascript - jquery拖拽列表更新

> ID：11875825
> 
> 赞同：0
> 
> 时间：2012-08-09T02:09:31.123
> 
> 标签：javascript, jquery

我有一个使用 Jquery UI 拖放排序的列表，但是当我将选项之一放入列表时，我希望能够知道它在列表中的位置，如下所示：

[http://www.webresourcesdepot.com/dynamic-dragn-drop-with-jquery-and-php/](http://www.webresourcesdepot.com/dynamic-dragn-drop-with-jquery-and-php/)

唯一的问题是我不确定如何围绕我当前的 Jquery 执行此操作，当我尝试失败时，它一直给我 [object] [object] 错误:)

**这是我的代码：**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.min.js" type="text/javascript"></script>
    <script src="js/jquery.ui.core.js"></script>
    <script src="js/jquery.ui.widget.js"></script>
    <script src="js/jquery.ui.mouse.js"></script>
    <script src="js/jquery.ui.sortable.js"></script>
<script type="text/javascript>
$( "#example1, #example2" ).sortable({
stop: function(event, ui) { 
var item = $(ui.item).parent().attr("id"); 
var moveid = $(ui.item).attr("id");
var sortableid = $(ui.item).sortable;
alert(item);
alert(moveid);
}}).disableSelection();
    });
</script>

<div class="box">
<ul id="example1" class='droptrue'>
<li id="id1" class="ui-state-default boxclass">ABC</li>
</ul>
</div>

<div class="box">
<ul id="example2" class='droptrue'>
<li id="id2" class="ui-state-default boxclass">XYZ</li>
</ul>
</div> 
```

如果你们中的任何人能够向我展示如何使用 javascript 或 jquery 做到这一点的正确方向，我将不胜感激。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:35:07.197

假设我们的列表项有一个类“list_item”。

HTML ->

```
<ul>
   <li class="list_item" id="some_unique_identifier1"> List Item 197 </li>
   <li class="list_item" id="some_unique_identifier2"> List Item 3 </li>
   <li class="list_item" id="some_unique_identifier3"> List Item 55 </li>
   <li class="list_item" id="some_unique_identifier4"> List Item 104 </li>
   ...etc
</ul> 
```

jQuery 可排序 ->

```
$(function(){
  $('ul').sortable({
    stop: function(event, ui){
      var list_item_id = $(ui.item).prop('id');
      var list_item_position =$(ui.item).parent().children().index(ui.item);

      $.ajax({
        type: 'POST',
        url: '/path/to/my/controller.ext',
        data: { 'id' : list_item_id, 'list_position' : list_item_position}
      });
    }
  }).disableSelection();
}); 
```

PHP 控制器将是最困难的部分。您必须（显然）更新我们移动的行，并且我们必须用 +1 更新该行**之后**的所有其他行，因为它们都将在列表中获得 1 个索引位置。从这里创建正确的工作流程取决于您，但您可以从 jQuery 可排序的角度了解所需的内容。

*作为旁注*

老实说，我可能不会发送一堆 $.ajax 来更新我正在使用的表。我会创建一个临时表来存储所有值，删除多次提交的项目，这样你就没有重复项。然后我会要求用户在某个时候使用提交按钮（或每个确定的间隔）保存位置。然后我会用临时表中的值更新真实表。完成后，我也会删除临时表。

# sql - ActiveRecord - 在单个查询中更新不同记录的单列数据

> ID：11875827
> 
> 赞同：-1
> 
> 时间：2012-08-09T02:09:58.727
> 
> 标签：sql, ruby-on-rails

是否可以在一个查询中更新以下数据？

```
ID             Seq
2               2
1               4
4               1
3               3 
```

如果可以使用 rails 活动记录来完成，那将是最好的，否则使用 sql 查询也可以。

这样做的原因是我有一个场景，我需要根据 ajax 请求频繁更新一组 id。我相信在单个查询中完成它会更加优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:13:21.847

我猜您是在问是否可以在单个事务中完成一组更新。

在 Rails 中，您可以为此目的使用[ActiveRecord::Base.transaction 。](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)例如，对于 a `Model`，您可以：

```
Model.transaction do
  Model.update(2, {:seq => 2} )
  Model.update(1, {:seq => 4} )
  Model.update(4, {:seq => 1} )
  Model.update(3, {:seq => 3} )
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:25:56.673

我们不能使用 Active Record 在单个查询中直接调用多个更新。正如你所说，我们可以在 Rails 中将其作为 sql 查询运行。

```
sql = ActiveRecord::Base.connection();

sql.execute("INSERT into products (id,name,description) VALUES (id-1,'name4','desc4'),(id-2,'name5','desc5'),(id-3,'name6','desc7') ON DUPLICATE KEY UPDATE name=VALUES(name),description=VALUES(description);") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T03:23:51.843

[从这里](http://www.karlrixon.co.uk/writing/update-multiple-rows-with-different-values-and-a-single-sql-query/)和[这里](https://stackoverflow.com/questions/2528181/update-multiple-rows-with-one-query)找到我想要的解决方案。

这就是我使用活动记录的方式。

```
_params = ["12", "9", "13", "14", "15", "16"]
db = ActiveRecord::Base.connection();

query = "UPDATE #{self.table_name} SET display_order = CASE id "       
_params.each_with_index do |d,i|
  query += sanitize_sql(["WHEN ? THEN ? ",d,i])
end

query += "END "
query += "WHERE id in ('#{_params.join("','")}') " 
```

# ruby-on-rails - 有没有办法改变这种批量分配设计？

> ID：11875828
> 
> 赞同：0
> 
> 时间：2012-08-09T02:10:02.573
> 
> 标签：ruby-on-rails, ruby

我有 3 个模型，用户、陆军和工程师。当用户创建属于他们的军队时，他们可以选中一个名为的复选框，该复选框`siege`将创建一个属于该军队和用户的工程师。不过，我对批量分配感到担忧。工程师是在我的陆军模型中通过我的方法创建的：

```
attr_reader :siege
after_save :if_siege
private
 def if_siege
   if self.siege
    Engineer.create!( :user_id => self.user.id, :army_id => self.id )
   end
 end
end 
```

但我知道分配两个 ID 的唯一方法是在我的工程师模型中执行此操作：

```
class Engineer
 attr_accessible :user_id, :army_id 
```

即使工程师永远不能在表单上创建，但会通过链接或复选框自动创建，这似乎并不安全。理想的是自动分配这两个属性，就像在控制器中所做的那样。例如

`example = current_user.examples.build(params[:example])`

你怎么看？他们是这种设计的替代品吗？

批量分配对我来说是一个棘手的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:14:50.930

有什么问题：

```
engineer = Engineer.new
engineer.user_id = self.user.id
engineer.army_id = self.id
engineer.save! 
```

您也可以选择仅在此处指定您不关心批量分配问题：

```
params = { :user_id => self.user.id, :army_id => self.id }
Engineer.create!(params, without_protection: true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:23:22.167

为什么需要明确地将工程师与用户联系起来？如果您将工程师与军队联系起来，那工程师不会通过军队与用户建立关系吗？

# ruby-on-rails - .build 无法分配尚不存在的外键

> ID：11875829
> 
> 赞同：1
> 
> 时间：2012-08-09T02:10:14.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, nested-attributes

我有以下代码用于在我的用户控制器中为用户创建图片：

```
 def new
    @user = User.new
    @pictures = @user.pictures.build({:placement => "front"},{:placement => "profile"})
  end 
```

但是，当我创建一个新用户时，它不会自动构建带有“正面”或“个人资料”位置的图片。实际上，图片没有任何更新。图片模型有

```
attr_accessible :placement 
```

并在图片.rb

```
belongs_to :user 
```

并在 user.rb

```
has_many :pictures
accepts_nested_attributes_for :pictures, allow_destroy: true 
```

为什么我的构建命令静默失败？

# 更新

使用 .save!，我了解到`@pictures`正在分配，但问题是没有 user_id 与它们关联。当我故意分配 user_id 时，如：

```
def new
    @user = User.new
    @pictures = @user.pictures.build({:placement => "front", :user_id => @user.id},{:placement => "profile", :user_id => @user.id})
 end 
```

它仍然没有分配 user_id。

奇怪的是，当我在 rails 控制台中运行相同的命令时，它**确实正确分配**了 user_id。

似乎新的@user 直到@pictures 命令运行后才获得分配给他的自动ID，但控制台版本成功，因为它正在按顺序执行操作。

所以，这就是为什么我看到一个空白的 id。

为什么会这样？这种同时的 id 分配难道不是模型应该用`belongs_to`and 和`has_many`and来处理的`accepts_nested_attributes_for`吗？

如果在保存之后才创建将它们链接在一起的 ID，那么解决分配嵌套属性的适当方法是什么？

*为什么这不起作用？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:01:19.347

不确定这是否是您的问题，但您需要将 :user_id 添加到 picture.rb 中的 attr_accessible 行。您要读取/写入的任何属性都必须是 attr_accessible ，否则您将收到大量分配错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:43:28.113

它在文档中：用户 ID 在保存后由数据库分配。所以你必须先保存用户，然后才能使用 user_id。

如果您将 :user_id => @user.id 更改为 :user => @user 它应该可以工作，因为 Rails 能够以正确的顺序保存它们，它知道它尚未保存并需要更新这些关系。

# c++ - 类函数错误 C++

> ID：11875830
> 
> 赞同：1
> 
> 时间：2012-08-09T02:10:20.840
> 
> 标签：c++

我有 3 个类，比如说 ClassA、ClassB 和 Validator。我想将 classA 和 classB 的一个变量传递给验证器，验证器将比较这些值，并返回一个字符串结果。我收到以下错误：错误：

请求'validatorObject'中的成员'compareValues'，它是非类类型'Validator*'</p>

**主文件**

```
cout << classAobject.compareValues(computer1->getValue(), classBobject->getValue()); 
```

**验证器.cpp**

```
string Validator::compareValues(string classAvalue, string classBValue) {
if (classAvalue == "R") {
    if (classBvalue == "R") {
        return "Equal";
    }
}
// More will go in this function - just want to get it working first 
```

}

**验证器.h**

```
string compareValues(string classAvalue, string classBValue); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:13:54.113

出现此错误是因为您需要使用运算符从指向类的指针访问类成员`->`：`cout << classAobject->compareValues(.....)`

`Foo->bar()`等价于`(*Foo).bar()`, 并且`Foo->baz`等价于`(*Foo).baz`

# cakephp - CakePHP 2 - 许多表的外键

> ID：11875835
> 
> 赞同：2
> 
> 时间：2012-08-09T02:11:01.503
> 
> 标签：cakephp, model, foreign-keys, associations, cakephp-2.0

请帮助模型协会。架构看起来像： ![数据模型架构](../Images/c31ed23a02b7a11da6b3d22fb483fcc1.png)

translation_typeofs.typeof_id 是 typeof_[name] 外键

translation_typeofs.typeof_type 关系表名称的内容部分（天、颜色、建筑物或房间）。

TypeofDays 模型：

```
class TypeofDay extends AppModel {
    public $name = 'TypeofDay';

    public $hasMany = array(
        'GalleriesTypeofDay' => array(
            'className'  => 'GalleriesTypeofDay',
            'dependent' => true
        ),
        'TranslationTypeof' => array(
            'className'  => 'TranslationTypeof',
            'conditions' => array('TranslationTypeof.typeof_type' => 'days'),
            'dependent' => true
        )
    );
} 
```

TranslationTypeof 模型：

```
class TranslationTypeof extends AppModel {
    public $name = 'TranslationTypeof';

    public $belongsTo = array(
        'Language' => array(
            'className'    => 'Language',
            'foreignKey' => 'language_id',
        ),
        'TypeofBuilding' => array(
            'className'  => 'TypeofBuilding',
            'foreignKey' => 'typeof_id',
            'conditions' => array('TranslationTypeof.typeof_type' => 'buildings')
        ),
        'TypeofColour' => array(
            'className'  => 'TypeofColour',
            'foreignKey' => 'typeof_id',
            'conditions' => array('TranslationTypeof.typeof_type' => 'colours')
        ),
        'TypeofRoom' => array(
            'className'  => 'TypeofRoom',
            'foreignKey' => 'typeof_id',
            'conditions' => array('TranslationTypeof.typeof_type' => 'rooms')
        ),
        'TypeofDay' => array(
            'className'  => 'TypeofDay',
            'foreignKey' => 'typeof_id',
            'conditions' => array('TranslationTypeof.typeof_type' => 'days')
        )
    );
} 
```

当我尝试保存数据时

```
$this->TranslationTypeof->saveAll(array(
    'typeof_type'   => $this->data['type_name'],
    'typeof_id'     => $this->data['type_id'],
    'language_id'   => $languageId,
    'text'          => $translation
)); 
```

我收到错误 500（内部服务器错误）

错误日志：

错误：[PDOException] SQLSTATE[23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`schema`. `translation_typeofs`, CONSTRAINT `translation_typeofs_typeof_buildings_fkid1`FOREIGN KEY ( `typeof_id`) REFERENCES `typeof_buildings`( `id`) ON DELETE NO ACTION ON UPDATE NO ACTION）

我认为这与模型关联有关，但找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:42:42.500

就像提供给它`typeof_id`的外键一样。`typeof_type`所以不应该有任何数据库foreignKey约束可以适用。

所以你可以做的是：**“使用 PhpMyAdmin 从数据库中删除 foreignKey 约束，然后用 CakePHP 处理它”**。请询问它是否不适合您。

# yii - Yii 急切加载 vs 延迟加载

> ID：11875841
> 
> 赞同：3
> 
> 时间：2012-08-09T02:11:25.883
> 
> 标签：yii

我在玩 Yii 并且在 Yii **Eager Loading**与**延迟加载**数据库查询方面遇到了一些问题。例如比较两种方式：

1.  `$comment = Comment::model()->with(array('issue'=>array('condition'=>'project_ id='.$projectId)))->findAll();`

2.  2a.`$comment = Comment::model()->findAll`

2b。得到问题：

`$issue = $comment->issues`（假设我们在 Comment 模型中声明了“问题”关系）。

我不确定第一种方法有什么优点。据我了解，第一个代码将仅返回 Comment 但也运行 get Issue 查询（如 2b 代码）。但是，正如我所见（但不确定是否有更好的方法来利用“急切加载”），如果我想在第一个代码中获得评论问题，我还必须运行以下代码：

3.

```
$comment ->issues 
```

如果是这样，作为我的客人，我们必须使用 Eager 加载方法运行 2 个查询，因此它比“延迟加载”需要更长的时间，因为它运行了两次“获取问题查询”（我们运行第一个代码时的第一次） ，第二次我们运行第三个代码）。

那么，您能否验证我的观点，或者如果它错了，您能否告诉我如何从利用其效率的 Eager Loading 方法中获取所有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T03:19:35.260

急切/延迟加载的问题不是你需要多少行代码，而是它需要多少资源。当使用急切加载时，如在您的第一个示例中，将加载与任何评论关联的“问题”表的所有元素。它们将被检索并保存在内存中，以备使用。当您实际使用它们时（`$comment ->issues`），它们将从内存缓存中加载，而不是从数据库中加载。只执行一个初始“大”查询。但是，如果您关联的记录太多并且您不会使用其中的大部分，那么延迟加载是最好的选择，因为只要您不引用它，就不会从数据库中加载任何记录。因此，当您引用记录时，将执行查询。故事就是这样进行的。所以...急切加载或延迟加载，这就是问题所在。：

# html - 导航栏偏移？

> ID：11875842
> 
> 赞同：0
> 
> 时间：2012-08-09T02:11:28.827
> 
> 标签：html, css

正在修复我的导航菜单，因为我遇到了 google chrome 用户无法单击我网站上的导航栏链接的问题。新的解决方案修复了它，但是我现在有一个导航栏，它与一个页面上的布局偏离，而不是在另一个页面上。

访问[http://www.survivaloperations.net](http://www.survivaloperations.net)获取主站点视图（排列）和[http://www.survivaloperations.net/forums/](http://www.survivaloperations.net/forums/)获取论坛视图（左偏移）。

导航的 HTML 是：

```
<ul id="nav">
        <li><a id="home" href="./news" alt="Home"></a>
        <li><a id="members" href="./members"></a>
        <li><a id="forums" href="./forums/" alt="Forums"></a>
        <li><a id="about" href="./about"></a>
        <li><a id="guides" href="http://www.survivaloperations.net/forums/viewforum.php?f=10"></a>
        <li><a id="drawings" href="http://www.survivaloperations.net/forums/viewforum.php?f=6"></a>
        <li><a id="faq" href="./faq"></a>
        <li><a id="downloads" href="./downloads"></a>
        <li><a id="sponsors" href="./sponsors"></a>
        <li><a id="nav_break" href=''></a>
        <li><a id="apply" href="./forums/application.php"></a>
    </ul> 
```

导航的 CSS 是：

```
 #nav {   margin:297px 0 0 -40px;   position:absolute; }

 #nav a {   display:block;
     height:35px; }

 #nav li  {   display:inline-block; }

 #home {
     background: url('http://survivaloperations.net/images/home.jpg') no-repeat bottom;   width:106px; }
 #home:hover {
     background: url('http://survivaloperations.net/images/home_up.jpg') no-repeat
 bottom; }

 #members {
     background: url('http://survivaloperations.net/images/members.jpg') no-repeat
 bottom;   width:96px; }
 #members:hover {
     background: url('http://survivaloperations.net/images/members_up.jpg') no-repeat
 bottom; }

 #forums {
     background: url('http://survivaloperations.net/images/forums.jpg') no-repeat bottom;   width:96px; }
 #forums:hover {
     background: url('http://survivaloperations.net/images/forums_up.jpg') no-repeat
 bottom; }

 #about {
     background: url('http://survivaloperations.net/images/about.jpg') no-repeat bottom;   width:96px; }
 #about:hover {
     background: url('http://survivaloperations.net/images/about_up.jpg') no-repeat
 bottom; }

 #guides {
     background: url('http://survivaloperations.net/images/guides.jpg') no-repeat bottom;   width:96px; }
 #guides:hover {
     background: url('http://survivaloperations.net/images/guides_up.jpg') no-repeat
 bottom; }

 #drawings {
     background: url('http://survivaloperations.net/images/drawings.jpg') no-repeat
 bottom;   width:96px; }
 #drawings:hover {
     background: url('http://survivaloperations.net/images/drawings_up.jpg') no-repeat
 bottom; }

 #faq {
     background: url('http://survivaloperations.net/images/faq.jpg') no-repeat bottom;   width:96px; }
 #faq:hover {
     background: url('http://survivaloperations.net/images/faq_up.jpg') no-repeat bottom; }

 #downloads {
     background: url('http://survivaloperations.net/images/downloads.jpg') no-repeat
 bottom;   width:96px; }
 #downloads:hover {
     background: url('http://survivaloperations.net/images/downloads_up.jpg') no-repeat
 bottom; }

 #sponsors {
     background: url('http://survivaloperations.net/images/sponsors.jpg') no-repeat
 bottom;   width:100px; }
 #sponsors:hover {
     background: url('http://survivaloperations.net/images/sponsors_up.jpg') no-repeat
 bottom; }

 #nav_break {   background:url('http://www.survivaloperations.net/images/nav_spacer.jpg');
     width:254px; }

 #apply {
     background: url('http://survivaloperations.net/images/apply.jpg') no-repeat bottom;   width:108px; }
 #apply:hover {
     background: url('http://survivaloperations.net/images/apply_up.jpg') no-repeat
 bottom; } 
```

我在论坛和正常的网站样式表中看不到任何会导致这种情况的东西。如果我将 -40px 更改为 0，它会弄乱正常站点并修复论坛。

任何想法都会很棒！

注意：整个 CSS 可以在[http://www.survivaloperations.net/style.css找到](http://www.survivaloperations.net/style.css)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:16:53.693

首先，当页面调整大小时，您的导航会中断。

```
#nav {
    margin: 0 auto;
    position: relative;
    width: 100%;
} 
```

**编辑**

我注意到你也有填充问题。所以我也会添加`padding: 0;`到那个 CSS 中。

# vim - 如何在vim中复制一个单词而不将光标放在它前面

> ID：11875843
> 
> 赞同：1
> 
> 时间：2012-08-09T02:11:39.233
> 
> 标签：vim

据我所知，要在 vim 中复制一个单词，请使用命令 'byw'，有没有更短的方法可以做到这一点？只使用 'y' 和另一个字符，这样我就不必将光标移动到单词前面？删除一个单词就像上面一样，有什么想法吗？感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:14:55.930

`yiw`是 yank in word、`diw`delete in word、`ciw`change in word（删除并让您进入插入模式）

也许这有帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:30:54.170

`y``b` （取决于光标当前所在单词的位置/之后）

通常，您可以在`y`. `b`动作移动到单词的开头 。`w`移动到下一个单词的开头。如果您的光标当前位于下一个单词的开头， 那么`b``y``w`和是相同的。类似于，除了它只拉到当前单词的结尾（因此不包括它和下一个单词之间的空格）。`y``b``b``y``e``b``y``w`

只需将上述`y`每个中的替换`d`为删除即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T05:05:41.463

`daw`您可以为and`diw`命令创建一个操作符待定映射以仅使用两个键。例如：

```
onoremap I iw
onoremap A aw 
```

现在你可以使用它了，`dI`它会像.`diw``dA``daw`

# android - Jsoup，如何获取属性

> ID：11875852
> 
> 赞同：0
> 
> 时间：2012-08-09T02:12:35.613
> 
> 标签：android

我得到了一个如下的html文件：

```
 <a href="http://...123"><img src="http://...jpg?" border="0"/></a>

   <a href="http://...456">
              .
              .
              . 
```

我想将 href 链接和 img src 的属性获取到 HashMap，

但是几个（不是全部）`<a href="">`标签不与`<img src="">`标签一起使用，

那么我应该如何将属性 href 链接和 img src 分配给 HashMap？

如果 href 链接没有 img src，则放弃该行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:12:58.153

你想要没有标签的标签吗？还是其他？如果它是另一种方式，你可以试试这个把 xpath 当作 String path = "//a[@href]/img" 和另一个像 "//a[@href]" 的东西。存储子节点的 href 标记值和下一个解析，如果它包含 img 标记，则解析它并将其存储为键值对。

# objective-c - iOS 上的 libxml2 在使用 HTMLParser 解析 HTML 时导致 EXC_BAD_ACCESS 错误

> ID：11875853
> 
> 赞同：2
> 
> 时间：2012-08-09T02:12:42.137
> 
> 标签：objective-c, ios, exc-bad-access, libxml2

我一直在研究一个使用 libxml2 HTMLParser 模块在 iOS 上解析网页 HTML 的项目。每当我尝试解析包含以下行的网页时，我都会从 libxml2 的 htmlParseDocument 中收到 EXC_BAD_ACCESS 错误：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

如果我从 HTML 中去掉这一行，解析就完美了。

另请注意，我使用 DTHTMLParser 类将 libxml2 SAX 回调绑定到 Objective-C 代码。

由于 htmlParseDocument 中的 EXC_BAD_ACCESS 并没有太多的工作要做，因此我构建了一个示例 Xcode 项目来重现该错误。我在针对 iOS 5.1 的 Mountain Lion 上的 Xcode 4.4 中制作了它。首先，它解析一个不包含违规行的 HTML 文件，然后它尝试解析包含违规行的文档并崩溃。你可以在这里下载：http: [//michaelmanesh.com/code/libxml2-crash.zip](http://michaelmanesh.com/code/libxml2-crash.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:03:12.947

DTHTMLParser 中的问题显然是在 libxml 中准备 c 回调的方法没有将遇到处理指令时要调用的函数的函数指针设置为 NULL。因此，处理指令导致 libxml2 尝试在某个随机地址调用函数，从而导致 EXC_BAD_ACCESS。

我解决了 DTHTMLParser 中的问题，方法是实现对在遇到处理指令时调用的可选委托方法的支持，或者如果在委托中未实现，则在处理程序结构中为 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:53:53.690

我认为 LibXML 错误地将其视为具有几乎相同语法的*处理指令。*Libxml 将其中包含的每一行`<?`视为处理指令。虽然我不能确切地指出出了什么问题。如果您删除问号，它将作为常规元素解析，您将在`parser:didStartElement:attributes:`回调方法中获取属性。如果您在问号和 xml ( `<? xml`) 之间放置一个空格，它将在`parser:foundCharacters`方法中返回。我不知道您的要求是什么，但这是使其不会崩溃的两种方法。

# git - 无法暂存或添加我的目录 + 文件

> ID：11875857
> 
> 赞同：2
> 
> 时间：2012-08-09T02:13:33.070
> 
> 标签：git, github

我正在尝试将我的整个项目目录添加到我的 github 存储库中，但无法暂存它们（让我们将它们推送到存储库）。这是我到目前为止所做的。

```
cd masterfolder
git init
mkdir projectfolder
//add all my files + whatnot
git add projectfolder
git commit -m "this is my project"
git remote add origin https://github.com/myusername/myrepo.git
git push origin master 
```

当我在线查看我的仓库时，我的文件尚未提交。

我使用检查了状态`git status -s`，结果发现我的文件甚至还没有上演。有人可以指出我在这里做错了什么吗？

**更新**

我重新启动机器并`git status`再次检查。看起来我的文件夹已上演，但是当我尝试时

```
git push origin master 
```

我明白了

```
Everything up to date 
```

我的在线回购不包含任何文件。有什么想法吗？

**更新**

运行后，`git commit`我进入一个列出所有暂存文件的屏幕，但我无法从这里运行任何命令。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:54:06.120

> git commit -m "这是我的项目"
> 
> 我使用 git status -s 检查了状态，结果发现我的文件甚至还没有被暂存。有人可以指出我在这里做错了什么吗？

这些文件*被***暂存**到`staging index`，但随后您使用. 这**会将**它们从中删除，并在提交中将它们添加到存储库中。**`git commit`**`staging index`****

 ****正如其他人所提到的，当您在`git commit`没有`-m`. 有两种可能性：

1.  vi 或 vim。检查：当您进入 ( `git commit`) 时，您**将无法输入任何内容**。按下`i`，然后在左下角它应该说类似`--INSERT--`。写入`vi`或`vim的步骤：

    > 1.  按“i”进入“INSERT”模式。
    > 2.  写下你的提交信息。
    > 3.  按“ESC”*退出*插入模式。
    > 4.  类型：':wq'，**包括全冒号**。'w' 表示“写入”（或“保存”），“q”表示“退出”。

2.  纳米。检查：在屏幕底部有一堆东西，如“^G Get Help”、“^O Write Out”等。要使用 Nano：写一个提交消息，然后按“^O”保存，“ ^X" 退出。（**注意**：“^”符号表示 CTRL 键。当它显示“^O”时按“CTRL+O”等）。

> 我重新启动了机器并再次检查了 git 状态。看起来我的文件夹已上演，但是当我尝试时：`git push origin master`...

您不能`git push`从*暂存索引*更改为远程存储库。*暂存索引*用于构建*提交*，您可以使用`git commit`. 看看下面的图片 [取自[http://git-scm.org]](http://git-scm.org])，[阅读 Pro-Git 的书](http://git-scm.com/book/en/Getting-Started-Git-Basics)，它**会让**你对它的工作原理有一个很好的理解`git`。

![Git 暂存区](../Images/445e7506e79270ad97c7f36eeeec5c26.png)

[这个答案](https://stackoverflow.com/questions/10658195/simple-sequence-of-git-commands/10659298#10659298)更详细地介绍了暂存区域`git add`等`git commit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:05:45.990

您进入的屏幕可能是一个文本编辑器。如果您使用的是 unix/mac，则可能是 Vi(m)。

尝试按`i`，然后输入一些文本。然后`ESC`，然后`:wq`。它将写入提交消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T18:28:09.143

你不能提交一个空目录。您必须在其中创建一个文件`projectfolder`，然后添加它。如果您不想添加任何新文件，则只需放置一个`.gitignore`文件：

```
touch projectfolder/.gitignore
git add projectfolder/.gitignore
git commit # Continue as before 
```****

# android - android - 如何循环所有活动？

> ID：11875860
> 
> 赞同：2
> 
> 时间：2012-08-09T02:13:46.220
> 
> 标签：android, colors, themes, spinner

在我的 android 应用程序中，我可以更改主题，但要看到更改，我必须退出应用程序并再次打开它。

这就是我改变主题的方式。

```
ThemeSetterActivity.setStyle(signup.this); 
```

这发生在创建事件上。

但是是否有一些像这样（如下）的代码可以运行，并且会改变所有活动的主题。

```
foreach (activity act in app) {
    ThemeSetterActivity.setStyle(act.context);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:21:07.827

将主题应用于 Activity 或应用程序

要为应用程序的所有活动设置主题，请打开 AndroidManifest.xml 文件并编辑标签以包含带有样式名称的 android:theme 属性。例如：

```
<application android:theme="@style/CustomTheme"> 
```

如果您希望将主题应用于应用程序中的一个 Activity，则将 android:theme 属性添加到标签中。

正如 Android 提供其他内置资源一样，您可以使用许多预定义的主题，以避免自己编写它们。例如，您可以使用 Dialog 主题并使您的 Activity 看起来像一个对话框：

```
<activity android:theme="@android:style/Theme.Dialog"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:24:28.000

据我所知，你不能那样做。

我所做的是让每个活动跟踪它当前使用的主题。然后在恢复的每个活动中检查当前主题是否仍然是它应该是的，如果不是重新启动活动。

使该应用程序广泛使用的一种简单方法是让您的基本活动类实现该行为，然后让所有活动扩展该行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:30:50.877

使用静态字段并存储您的主题 ID；并在 onCreate 方法中使用：

```
yourActivityObj.setTheme(R.style.AppTheme); 
```

也许我工作；

# c# - 在gridview中隐藏选择按钮

> ID：11875861
> 
> 赞同：2
> 
> 时间：2012-08-09T02:13:50.697
> 
> 标签：c#, asp.net, select, gridview

我目前有一个gridview，允许您通过单击该行的任意位置来选择该行。但是，有一个问题。AutoGenerateSelectButton 必须设置为 true。这意味着选择按钮现在可见并且是网格视图的一部分。我想知道是否有办法在不破坏网格大小的情况下隐藏它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T04:15:17.753

您是否考虑过使用 CSS 隐藏该列？这可以在以下`RowDataBound`事件中完成：

```
protected void yourGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    e.Row.Cells[0].Style["display"] = "none";
    // or e.Row.Cells[0].CssClass = "hidden-cell";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:41:18.167

您可以像这样隐藏整行

```
protected void grdView_OnDataBound(object sender, EventArgs e)
{
    grdView.Rows[rowNumber].Visible = false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-08T08:03:32.033

```
 <asp:GridView ID="gv" runat="server" Width="100%" AutoGenerateColumns="False"
                    DataKeyNames="BillingAccountNo" OnRowDataBound="gv_RowDataBound"
                    OnSelectedIndexChanged="dgBillingInformation_SelectedIndexChanged">
                    <Columns>

                        <asp:BoundField DataField="field" HeaderText="field" />
                        <asp:BoundField DataField="field" HeaderText="field" />
                        <asp:CommandField ShowSelectButton="true" ButtonType="Button" ControlStyle-CssClass="hidden" ItemStyle-CssClass="hidden" HeaderStyle-CssClass="hidden" FooterStyle-CssClass="hidden" />
                    </Columns>                     
                </asp:GridView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T19:11:57.480

检查每一行并根据需要隐藏/调整标签：

```
foreach (GridViewRow r in gv.Rows)
            {
                if (r.RowType == DataControlRowType.DataRow)
                {
                    TableCell editCell = r.Cells[0];
                    if (editCell.Controls.Count > 0)
                    {
                        LinkButton editControl = editCell.Controls[0] as LinkButton;
                        // control[1] is a literal space
                        LinkButton selectControl = editCell.Controls[2] as LinkButton;
                        editControl.Text = "New Edit Label Text";
                        //Ensure "Select" control, not "Cancel" control 
                        selectControl.Text = selectControl.Text == "Select" ? "New Select Label Text" : selectControl.Text;
                    }
                }
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-12T06:56:27.803

基于德里克的回答，这就是我所做的

```
<asp:Panel ID="pnl" runat="server" Visible="false">
<asp:GridView ID="gv" runat="server" Width="100%" AutoGenerateColumns="False"
    DataKeyNames="BillingAccountNo" OnRowDataBound="gv_RowDataBound"
    OnSelectedIndexChanged="dgBillingInformation_SelectedIndexChanged">
    <Columns>>
        <asp:BoundField DataField="field" HeaderText="field" />
        <asp:BoundField DataField="field" HeaderText="field" />
        <asp:CommandField ShowSelectButton="true" ButtonType="Button" Visible="true" />
    </Columns>
    <SelectedRowStyle BackColor="LightCyan" ForeColor="DarkBlue" Font-Bold="true" />
</asp:GridView> 
```

我将选择按钮放在gridview 的末尾，并在后面使用derek 的代码来掩盖最后一行，从而消除了隐藏的选择按钮与表头混淆的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-28T17:01:07.633

您可以使用以下命令隐藏整个列，然后在完成后再次显示它。

```
YourGridView.columns(0).Visible = False //Will hide the entire first column with all the select links in there. 
```

还将标题列向左移动，以便它们正确匹配以进行打印等...

然后当你需要再次显示时，只需再次将属性更改为true即可。这是 VB 语法，您可能希望在 C# 中使用 [] 作为列索引。

# mysql - ORDER BY 中使用的计算值是否在排序期间重新计算过？

> ID：11875870
> 
> 赞同：3
> 
> 时间：2012-08-09T02:14:50.903
> 
> 标签：mysql, caching, sorting, sql-order-by

*假设我们有一个查询，它按未*选择的计算值排序，例如：

```
select * from table
order by col1 * col2 - col3 
```

在大多数语言的典型排序操作中，排序值在排序期间被多次使用是很常见的，因为给定的记录会与可能的许多其他记录进行比较。mysql有可能有这样的实现。

谁能*明确地*说mysql是否每行计算*一次*这些值并在排序完成时临时存储它们，或者是否在进行比较时重新计算这些值（可能是1-n次）？

我已标记此 mysql，但我欢迎有关/包括其他流行数据库的评论/答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:12:38.473

答案是...... mysql每行执行**一次计算。**

由于缺乏可靠的答案，我[对 sqlfiddle 进行了明确的测试，](http://sqlfiddle.com/#!2/152a0/2)该测试按函数的结果排序`not deterministic`（每次比较时都必须调用），该函数在调用时也会记录在另一个表中。它表明调用的次数=行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:55:47.670

我只是使用 MySQL 查询浏览器来解释一个对几列计算进行排序的查询，它说它使用了文件排序……所以看起来它使用了一个临时索引（计算一次）。

如果您有一个想要测试的特定示例 - 您可以确保它为您做同样的事情。

这是一个开发人员博客的链接，其中详细说明了 order by 的工作原理：

[http://s.petrunia.net/blog/?p=24](http://s.petrunia.net/blog/?p=24)

# git - 在 github 上的主要版本上远程协作

> ID：11875872
> 
> 赞同：0
> 
> 时间：2012-08-09T02:14:56.320
> 
> 标签：git, github

我对 git 还比较陌生，只使用了基本功能。我在 github 上有一个相当受欢迎的项目，我正在重写。社区中的其他人向我提供了帮助，但我想避免将我的重大更改推送到原始分支。我可以有一个本地开发分支，但 github 上的人看不到它。

在这种情况下，最佳实践是什么？在 github 上 fork 原始 repo，在 fork 上工作然后合并到原始版本中？有效地将叉子用作分支。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:30:02.573

我认为您应该创建自己的开发分支，该分支可以推送到 github。分叉很棒，但我认为当你有一个提交者团队并且你想确保在合并到 master 之前得到代码审查等时它最有效。由于您是该项目的所有者，除非您正在寻找其中的一些过程，否则我建议您创建一个功能分支并解决它。

# indexing - Postgres 查询优化

> ID：11875874
> 
> 赞同：1
> 
> 时间：2012-08-09T02:15:17.503
> 
> 标签：indexing, postgresql-9.0

在 postgres 9.0 上，将 index_scan 和 seq_scan 都设置为 Off。为什么它将查询性能提高了 2 倍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:40:16.940

这可能有助于*一些*查询运行得更快，但几乎肯定会使*其他*查询变慢。这是用于诊断目的的有趣信息，但对于长期“解决方案”来说是个坏主意。

PostgreSQL 使用基于成本的优化器，它根据通过扫描表（通常通过 autovacuum）收集的统计信息和成本因素来查看所有可能计划的成本。如果它没有选择最快的计划，通常是因为您的成本计算因素没有准确地模拟您的环境的实际成本，统计数据不是最新的，或者统计数据不够细粒度。

开启`index_scan`并`seq_scan`重新开启后：

*   我通常发现`cpu_tuple_cost`默认值太低；我经常看到通过将其设置为 0.03 而不是默认的 0.01 来选择更好的计划；而且我从未见过这种覆盖会导致问题。

*   如果数据库的活动部分适合 RAM，请尝试将`seq_page_cost`和都减小`random_page_cost`到 0.1。

*   确保设置为您的操作系统显示为缓存`effective_cache_size`的总和。`shared_buffers`

*   永远不要禁用 autovacuum。您可能想要调整参数，但要非常小心，进行小的增量更改和后续监控。

*   您可能需要偶尔运行显式`VACUUM ANALYZE`或`ANALYZE`命令，特别是对于临时表或刚刚进行大量修改并即将用于查询的表。

*   您可能想要增加`default_statistics_target`, `from_collapse_limit`, `join_collapse_limit`, 或一些 geqo 设置；但是如果没有比您迄今为止提供的更多细节，很难判断这些是否合适。

您可以尝试在单个连接上设置不同成本因素的查询。当您确认适合您的整个组合的配置（即，它准确地模拟了您的环境中的成本）时，您应该在您的`postgresql.conf`文件中进行更新。

如果您需要更有针对性的帮助，请显示表的结构、查询本身以及查询的运行结果`EXPLAIN ANALYZE`。对您的操作系统和硬件的描述以及您的 PostgreSQL 配置也有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:35:49.513

为什么 ？

最合乎逻辑的答案是因为您的数据库表的配置方式。

如果没有你发布你的表模式，我只能冒险猜测你的索引没有高基数。

也就是说，如果您的索引包含太多有用的信息，那么它的效率将大大降低，甚至更慢。

基数衡量索引中行的唯一性。基数越低，查询速度就越慢。

一个完美的例子是在你的索引中有一个布尔字段；也许您的数据库中有一个联系人表，它有一个布尔列，根据客户是否希望与第三方联系来记录真假。

平均而言，如果您确实“从 OptIn = true 的联系人中选择 *”；你可以想象你会返回*很多*联系人；想象一下我们案例中 50% 的联系人。

现在，如果您将此“Optin”列添加到同一张表的索引中；理所当然的是，无论其他选择器有多好，由于“OptIn”的值，您总是会返回 50% 的表。

这是一个低基数的完美例子；它会很慢，因为任何涉及该索引的查询都必须选择表中 50% 的行；然后能够应用进一步的 WHERE 过滤器来再次减少数据集。

长话短说; 如果您的索引包含错误字段或仅代表表中的每一列；然后 SQL 引擎不得不求助于逐行测试。

无论如何，以上对于您的情况是理论上的；但这是查询突然开始花费更长的时间的一个已知常见原因。

请填写有关您的数据结构、索引定义和实际查询速度非常慢的空白！

# asp.net-mvc - Jquery Ajax post 有时会转向获取MVC

> ID：11875877
> 
> 赞同：3
> 
> 时间：2012-08-09T02:15:48.527
> 
> 标签：asp.net-mvc, jquery

我的页面中有以下行，每当在表单中进行更改时都会调用它（表单中的更改被持久化并存储在会话中）：

```
function persistFormDetails() {
    $.post("<%= Url.Action<AvailabilityController>(action => action.PersistForm(null)) %>", $("form#availabilityForm").serialize());
} 
```

以上是从页面上发生的 3 个不同事件中调用的：$("select").change、$("#NumberOfNights").change、$("#PromoCode").change。

这些是对“PersistForm”的仅有的 3 次调用。这在大多数情况下都有效，但超过 5% 的时间，使用 get 而不是 post 调用“PersistForm”。从我们的博客中提取失败请求：

```
2012-08-07 06:17:34 120.151.214.16 - HTTP 10.12.0.151 80 POST /availability/persistform - 302 1151 434 0 HTTP/1.1 Mozilla/5.0+(iPhone;+CPU+iPhone+OS+5_1_1+like+Mac+OS+X)+AppleWebKit/534.46+(KHTML,+like+Gecko)+Version/5.1+Mobile/9B206+Safari/7534.48.3 __utma=212581192.532115380.1343637559.1343637559.1344320319.2;+__utmb=212581192.1.10.1344320319;+__utmc=212581192;+__utmz=212581192.1343637559.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none);+.BREAKFREEBOOKING=H7n50kf8yh2VLsbC2Czo6LALPpef1jqj4RtcC4l34Q-fA3WKG8dD5Dps9CFq2i3j-YEVMEH5qTh_b5f7IDRJ5NYeB28gBV_czMmGeSfnd26FHsw83WbwBpz2K3oAVYCg6dG_MiOKqrpn8ViaBizKMKXD4yw1;+stella_referrer=referrerGuestId=14076864270&additionalInfo=mantra_on_kent_24h_sale30aug12&referrerSite= http://m.mantra.com.au/check-availability
2012-08-07 06:17:34 120.151.214.16 - HTTP 10.12.0.152 80 GET /availability/persistform chkCookies=True 302 950 353 0 HTTP/1.1 Mozilla/5.0+(iPhone;+CPU+iPhone+OS+5_1_1+like+Mac+OS+X)+AppleWebKit/534.46+(KHTML,+like+Gecko)+Version/5.1+Mobile/9B206+Safari/7534.48.3 __utma=212581192.532115380.1343637559.1343637559.1344320319.2;+__utmb=212581192.2.10.1344320319;+__utmc=212581192;+__utmz=212581192.1343637559.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none);+.testCookie=.testCookie;+.BREAKFREEBOOKING=H7n50kf8yh2VLsbC2Czo6LALPpef1jqj4RtcC4l34Q-fA3WKG8dD5Dps9CFq2i3j-YEVMEH5qTh_b5f7IDRJ5NYeB28gBV_czMmGeSfnd26FHsw83WbwBpz2K3oAVYCg6dG_MiOKqrpn8ViaBizKMKXD4yw1;+stella_referrer=referrerGuestId=14076864270&additionalInfo=mantra_on_kent_24h_sale30aug12&referrerSite= http://m.mantra.com.au/check-availability 
```

请注意对“PersistForm”的第一次调用会发布一个帖子（正确），然后是 302（不确定为什么要重定向）。然后在同一会话和时间上来自同一用户的下一次调用调用“PersistForm”，这次它使用get。然后我们得到一个异常“在控制器'MG.Mobile.Controllers.AvailabilityController'上找不到公共操作方法'persistform'”。

这是有道理的，因为我的“PersistForm”操作具有 HttpPost 属性。

```
[HttpPost]
public ActionResult PersistForm(AvailabilityForm form)
{
    var model = _availabilityMapper.MapViewToDomain(form);
    _availabilitySession.SaveAvailabilityToSession(model);

     return new EmptyResult();
} 
```

我们不能允许获取此操作，因为它会发布大量数据。正如我之前所说，这只发生在大约 5% 的时间里（也许更少）。

关于为什么我有时会得到“get”而不是“post”或为什么有时会调用“persistform”302（重定向）的任何想法？

这是针对我们的移动网站的，问题只出现在 iPhone 上（但这可能只是巧合，因为我们网站的 75% 的移动访问是使用 iPhone 进行的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:14:04.790

有趣的问题。我在这里提出了一些我的假设。

我可以看到你的控制器是 Sessionfull。这意味着每个请求都会*锁定*Session 对象，因此来自同一个客户端的多个请求会被一个一个地处理（请求是等到 Session 锁被释放）。

一旦你得到很多，服务器可能会达到某个阈值，因此重定向请求。

尝试的选项：

1.  对于如此重载的 API，最好使用 Session-Less 模型。
2.  尝试利用 ASP.NET MVC 异步控制器。

# c# - 在 C# 中释放 Excel 对象时出现“检测到 DisconnectedContext”错误

> ID：11875879
> 
> 赞同：0
> 
> 时间：2012-08-09T02:15:57.187
> 
> 标签：c#, visual-studio, com

我试图在使用 Excel 对象后释放它们。这是我的代码：

```
Excel._Application app = new Excel.Application();
Excel._Workbook workbook = app.Workbooks.Add(Type.Missing);
Excel._Worksheet worksheet = null;
app.Visible = true;

worksheet.Cells[1, 1] = "test string";

workbook.SaveAs("C:\testfile.xlsx");

object misValue = System.Reflection.Missing.Value;
workbook.Close(true, misValue, misValue);
app.Quit();

releaseObject(worksheet);
releaseObject(workbook);
releaseObject(app); 
```

我的 releaseObject 方法：

```
private void releaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.FinalReleaseComObject(obj);
                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
                MessageBox.Show("Unable to release the Object " + ex.ToString());
            }
            finally
            {
                GC.Collect();
                GC.WaitForPendingFinalizers();
                GC.Collect();
                GC.WaitForPendingFinalizers();
            }
        } 
```

调试器第一次进入 releaseObject 时，它在第一个“GC.WaitForPendingFinalizers();”中给出错误 线：

> 上下文 0xdf76a0' 已断开连接。从当前上下文（上下文 0xdf7450）中释放接口。这可能会导致损坏或数据丢失。为避免此问题，请确保所有上下文/单元都保持活动状态，直到应用程序完全使用 RuntimeCallableWrapper 完成，这些 RuntimeCallableWrapper 代表生活在其中的 COM 组件。

![在此处输入图像描述](../Images/5cb5bb82b1a184f04ffd4dd56697bdc1.png)

我怎样才能弄清楚？

# ruby-on-rails - Rails 和查询日期选择器，如何在字段中获取与弹出日历更相关的日期

> ID：11875880
> 
> 赞同：0
> 
> 时间：2012-08-09T02:15:58.263
> 
> 标签：ruby-on-rails, ruby, forms

文本字段和弹出窗口链接在一起，我可以使用日历，并且该字段最初显示正确的值（或空白）。

但是它们没有链接，因为弹出窗口始终是当前月份，而不是 db 字段值的月份。

```
 = f.text_field :content_date, id: 'datepicker', size: 10 
```

我尝试添加`,value: @user.content_date`，但没有帮助。

我的jQuery是：

```
// jQueryUI Date Picker:
$(function (){
        $(".datepick").datepicker({ dateFormat: "yy-mm-dd"});
}); 
```

我添加了每个 dimuch 的 dateFormat，这似乎很有希望，但它还没有帮助。

我也尝试了 altFormat 但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:48:22.723

您可能在 datepicker 和 content_date 字段中有不同的日期格式。看看这个小提琴[http://jsfiddle.net/wKNXx/](http://jsfiddle.net/wKNXx/)

# django - 当 {% trans %} 标签没有被任何东西替换时，如何让 jinja2 引发错误

> ID：11875884
> 
> 赞同：2
> 
> 时间：2012-08-09T02:17:07.983
> 
> 标签：django, internationalization, jinja2

我正在为国际化网站使用 django 和 jinja2 模板。

在调试模式下，我希望 Jinja2 在找不到标记为的字符串的翻译时抛出错误

```
{% trans %}abc{% endtrans %} 
```

将其设置为在模板中找不到变量时引发错误有助于发现一堆问题，我认为这也有助于防止意外破坏翻译字符串。

# css - CSS重叠标签不同的宽度

> ID：11875886
> 
> 赞同：1
> 
> 时间：2012-08-09T02:17:44.097
> 
> 标签：css, tabs, overlapping

我发现许多 CSS 教程非常适合重叠选项卡，但它们都没有每个选项卡的不同宽度。甚至可以根据标题的大小改变宽度吗？

以下是 3 个选项卡作为它们如何变化的示例。

**关于我们 | 汽车玻璃 紧急和商务玻璃服务**

注意：选项卡的图形有阴影，当然是 PNG 24，所以它会重叠，但我无法想象如何改变宽度。

会有图形的一部分做一个repeat-x吗？如果是这样，您将如何放置端盖并仍然基于活动选项卡？

**编辑：** 这是一个链接，显示每个选项卡的长度如何与选项卡的静态图像相同。我需要弄清楚如何做完全相同的事情，但标签的中间部分能够根据标签的标题“增长”宽度：http: [//code-pal.com/examples/how-to-code-一个重叠的菜单/](http://code-pal.com/examples/how-to-code-an-overlapped-menu/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:31:42.793

我认为本教程将真正帮助您。它会完全按照您的要求重叠具有可变宽度的选项卡。它似乎不是无限宽，但您只需将较长边的长度调整为比它们需要的更长。

[http://www.codealamode.net/overlapping-tabs](http://www.codealamode.net/overlapping-tabs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:31:00.483

使用填充。

HTML

```
<ul>
    <li>Item 1</li>
    <li>Item 2 is really long</li>
    <li>Item 3</li>
</ul> 
```

CSS

```
ul li {
    display: inline-block;
    padding: 0 25px;
    background: #F00;
    color: #FFF;
} 
```

看看[小提琴](http://jsfiddle.net/9V8Q6/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T02:38:55.367

我相信您正在寻找CSS3 中支持的[多种背景](https://developer.mozilla.org/en-US/docs/CSS/Multiple_backgrounds)

我很快就会发布一个演示。

**编辑：**另一个答案被接受，我没有发布演示。

# facebook-graph-api - 约会后如何让朋友签到？

> ID：11875888
> 
> 赞同：1
> 
> 时间：2012-08-09T02:17:53.003
> 
> 标签：facebook-graph-api

所以我试图让朋友在“现在”之前的特定日期签到，
就像这样：

```
 search?type=checkin&since=1343613333633 
```

（1343613333633 = 2012 年 7 月 30 日 01:55:33 GMT）
而且我总是得到 {"data":[]}
没有“since”参数我一些签到（所有这些都在那个日期之后）
我得到相同的结果在图形 api 资源管理器和 Android Facebook SDK 上（不确定这是否重要）

我该如何解决这个问题？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:24:06.920

您可以轻松地使用[FQL](https://developers.facebook.com/docs/reference/fql/checkin/)来做到这一点：

```
SELECT coords, tagged_uids, page_id, timestamp FROM checkin WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) and timestamp > 1312971542 
```

*将为您提供自时间戳*以来当前登录用户的好友签到列表。获取访问令牌时，请确保拥有 friends_checkins 权限。

# c# - EF存储库查询方法，如何在表达式中提及其他实体？

> ID：11875889
> 
> 赞同：0
> 
> 时间：2012-08-09T02:18:21.887
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

在 EF 通用存储库中，我的 Query 方法如下：

```
public IEnumerable<T> Query(Expression<Func<T, bool>> filter)
    {
        return objectSet.Where(filter);
    } 
```

我已经使用这种方法来过滤数据，例如：

```
Repository.Query(a=>a.EntityId==selectedId); 
```

下面是我的表格结构。

1.  实体（ID、名称）
2.  标题（Id、名称、EntityId）
3.  级别（Id、名称、TitleId）

我知道 EntityId 并且基于我想从 Level 表中过滤数据，但是 Entity 和 Levle 表没有直接连接，Level 正在附加它们。

请指导我应该如何编写 lambda 表达式以传递给 Query 方法。

谢谢

**编辑** ObjectSet 的类型是 Level。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:39:01.737

假设您为导航属性使用标准名称，您应该能够做到这一点：

```
Repository.Query(level => level.Title.Entity.EntityId == selectedId); 
```

如果没有，您可以发布您的模型吗？

# c++ - Qt 中 PostgreSQL 和 MySQL 的优缺点？

> ID：11875895
> 
> 赞同：0
> 
> 时间：2012-08-09T02:19:45.830
> 
> 标签：c++, mysql, sql, qt, postgresql

`QSqlDatabase`PostgreSQL 和 MySql 与Qt中的类有什么优缺点？在使用 C++ 进行远程连接时，是否有首选数据库？这些是我目前唯一的选择，我应该寻求另一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:10:59.947

`QSqlDatabase`与数据库无关。类与不同驱动程序的行为方式可能存在一些细微差别`QtSql`，但仍然可以编写与数据库无关的应用程序。

我认为你*真的*应该选择你最熟悉的东西，除非有令人信服的理由特别喜欢一个。

我最喜欢 PostgreSQL 因为

*   *为我*工作
**   适合我的项目*   成熟可靠*   文档很棒*   社区很棒*   *对我*来说，设置起来更容易*   是的，我是一个非常狂热的 PostgreSQL 粉丝。*

 *在某些特定情况下，改用 SQLite 可能是有意义的。*

# iphone - 使用 Web 服务的教程？

> ID：11875896
> 
> 赞同：1
> 
> 时间：2012-08-09T02:19:51.820
> 
> 标签：iphone, ios, twitter, flickr

我是 xcode4 iphone 编程的新手，我正在尝试创建网络服务；例如搜索 flickr 或 twitter 并显示结果。

是否有任何示例或教程可以用来学习搜索和显示的工作原理？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:15:23.820

一些教程可能已经改变了 API，但会对你有很大帮助。

推特

[iOS 5 和 Twitter 框架：第一步](http://mobile.tutsplus.com/tutorials/iphone/ios-5-and-the-twitter-framework-first-steps/?search_index=7)

[iOS 5 和 Twitter 框架：高级技术](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_twitter-framework_twrequest/?search_index=26)

[iPhone SDK：使用 OAuth 连接到 Twitter](http://mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/?search_index=16)

Facebook

[如何从您的 iPhone 应用程序中使用 Facebook 的 New Graph API 获取用户配置文件](http://www.raywenderlich.com/1578/how-to-get-a-user-profile-with-facebooks-new-graph-api-from-your-iphone-app)

[如何在 iPhone 应用程序中使用 Facebook 的新图形 API](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)

[Facebook iOS SDK 教程：iPhone App Facebook 与 SSO（单点登录）集成 FBConnect](http://www.mobisoftinfotech.com/blog/iphone/iphone-fbconnect-facebook-connect-tutorial/)

[在 iOS 中集成 Facebook](https://parse.com/tutorials/integrating-facebook-in-ios)

弗里克

[iPhone JSON Flickr 教程 - 第 1 部分](http://mobiledevelopertips.com/networking/iphone-json-flickr-tutorial-part-1.html)

[iPhone JSON Flickr 教程 - 第 2 部分](http://mobiledevelopertips.com/networking/iphone-json-flickr-tutorial-part-2.html)

[iPhone JSON Flickr 教程 - 第 3 部分](http://mobiledevelopertips.com/networking/iphone-json-flickr-tutorial-part-3.html)

网络服务，共享工具包

[iOS 快速提示：与 Web 服务交互](http://mobile.tutsplus.com/tutorials/iphone/ios-quick-tip-interacting-with-web-services/)

[iOS 项目聚焦：ShareKit](http://mobile.tutsplus.com/tutorials/iphone/sharekit/?search_index=15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:14:56.223

您可以阅读这些教程，它们非常有用：

1.  [iOS 5 和 Twitter 框架：第一步](http://mobile.tutsplus.com/tutorials/iphone/ios-5-and-the-twitter-framework-first-steps/?search_index=10)
2.  [iPhone SDK：使用 OAuth 连接到 Twitter](http://mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/?search_index=18)

您可以在网站上搜索更多教程，它为每个领域、应用程序/游戏以及 iOS 和 Android 提供了非常好的教程。

# haskell - 需要帮助重写一个在 OCaml（或任何 ML）中按字谜对单词进行分组的 Haskell 程序？

> ID：11875898
> 
> 赞同：3
> 
> 时间：2012-08-09T02:19:59.183
> 
> 标签：haskell, functional-programming, pattern-matching, ocaml

我写了一个按字谜对单词进行分组的 Haskell 函数。我正在尝试学习 OCaml，但我对如何在 OCaml 中使用模式匹配感到有些困惑。有人可以帮我把它翻译成 OCaml 吗？谢谢！

此函数获取一个字符串列表，并将其划分为一个字符串列表列表，按字谜分组。

```
import Data.List

groupByAnagrams :: [String] -> [[String]]
groupByAnagrams []     = []
groupByAnagrams (x:xs) = let (listOfAnagrams, listOfNonAnagrams) = (partitionByAnagrams (sort x) xs)
                         in 
                         (x:listOfAnagrams):(groupByAnagrams listOfNonAnagrams) 
```

这个辅助函数接受一个排序的字符串`sortedStr`和一个字符串列表（字符串排序的原因是我不必在每次迭代时都对其调用排序）。字符串列表被分成两个列表；一个由 anagrams 的字符串`sortedStr`组成，另一个由不是的字符串组成。该函数返回由这两个列表组成的元组。

```
partitionByAnagrams :: String -> [String] -> ([String], [String])
partitionByAnagrams sortedStr []     = ([], [])
partitionByAnagrams sortedStr (x:xs) 
         | (sortedStr == (sort x))   = let (listOfAnagrams, listOfNonAnagrams) = (partitionByAnagrams sortedStr xs)
                                       in
                                       (x:listOfAnagrams, listOfNonAnagrams)
         | otherwise                 = let (listOfAnagrams, listOfNonAnagrams) = (partitionByAnagrams sortedStr xs)
                                       in
                                       (listOfAnagrams, x:listOfNonAnagrams) 
```

这只是一个测试用例：

```
test1 = mapM_ print (groupByAnagrams ["opts", "alerting", "arrest", "bares", "drapes", "drawer", "emits", "least", "mate", "mates", "merit", "notes", "palest", "parses", "pores", "pots", "altering", "rarest", "baser", "parsed", "redraw", "items", "slate", "meat", "meats", "miter", "onset", "pastel", "passer", "poser", "spot", "integral", "raster", "bears", "rasped", "reward", "mites", "stale", "meta", "steam", "mitre", "steno", "petals", "spares", "prose", "stop", "relating", "raters", "braes", "spared", "warder", "smite", "steal", "tame", "tames", "remit", "stone", "plates", "sparse", "ropes", "tops", "triangle", "starer", "saber", "spread", "warred", "times", "tales", "team", "teams", "timer", "tones", "staple", "spears", "spore"]) 
```

**编辑！！！这是我的函数的重写版本。感谢 jrouquie 指出效率低下！** 10/7 再次编辑 - 为了清楚起见，在元组上使用了模式匹配，不需要所有那些 fsts 和 snds。

```
groupByAnagrams2 :: [String] -> [[String]]
groupByAnagrams2 str = groupBySnd $ map (\s -> (s, (sort s))) str

groupBySnd :: [(String, String)] -> [[String]]
groupBySnd []           = []
groupBySnd ((s1,s2):xs) = let (listOfAnagrams, listOfNonAnagramPairs) = (partitionBySnd s2 xs)
                          in
                          (s1:listOfAnagrams):(groupBySnd listOfNonAnagramPairs)

partitionBySnd :: String -> [(String, String)] -> ([String], [(String, String)])
partitionBySnd sortedStr []                = ([], [])
partitionBySnd sortedStr ((s, sSorted):ss)
              | (sortedStr == sSorted)     = let (listOfAnagrams, listOfNonAnagramPairs) = (partitionBySnd sortedStr ss)
                                             in
                                             (s:listOfAnagrams, listOfNonAnagramPairs)
              | otherwise                  = let (listOfAnagrams, listOfNonAnagramPairs) = (partitionBySnd sortedStr ss)
                                             in
                                             (listOfAnagrams, (s, sSorted):listOfNonAnagramPairs) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:14:45.810

我不得不说我发现你的 Haskell 代码有点笨拙。也就是说，您的原始函数可以写得更简洁；例如：

```
import Control.Arrow ((&&&))
import Data.Function (on)
import Data.List (groupBy, sortBy)

anagrams :: Ord a => [[a]] -> [[[a]]]
anagrams =
  map (map fst) .
  groupBy ((==) `on` snd) .
  sortBy (compare `on` snd) .
  map (id &&& sortBy compare) 
```

那是：

*   `map (id &&& sortBy compare)`将列表中的每个字符串与其字符的排序列表配对；
*   `sortBy (on compare snd)`对您现在在其第二个组件上拥有的对列表进行排序，即已排序的字符列表；
*   `groupBy (on (==) snd)`将排序列表中具有相同排序字符列表的所有连续项目分组；
*   最后，`map (map fst)`删除已排序字符的列表，只留下原始字符串。

例如：

```
Prelude> :m + Control.Arrow Data.Function Data.List

Prelude Control.Arrow Data.Function Data.List> ["foo", "bar", "rab", "ofo"]
["foo","bar","rab","ofo"]

Prelude Control.Arrow Data.Function Data.List> map (id &&& sortBy compare) it
[("foo","foo"),("bar","abr"),("rab","abr"),("ofo","foo")]

Prelude Control.Arrow Data.Function Data.List> sortBy (compare `on` snd) it
[("bar","abr"),("rab","abr"),("foo","foo"),("ofo","foo")]

Prelude Control.Arrow Data.Function Data.List> groupBy ((==) `on` snd) it
[[("bar","abr"),("rab","abr")],[("foo","foo"),("ofo","foo")]]

Prelude Control.Arrow Data.Function Data.List> map (map fst) it
[["bar","rab"],["foo","ofo"]] 
```

“翻译”到 Caml 然后会给你留下一些类似的东西

```
let chars xs =
  let n = String.length xs in
  let rec chars_aux i =
    if i = n then [] else String.get xs i :: chars_aux (i + 1)
  in
  List.sort compare (chars_aux 0)

let group eq xs =
  let rec group_aux = function
    | [] -> []
    | [x] -> [[x]]
    | x :: xs ->
        let ((y :: _) as ys) :: yss = group_aux xs in
        if eq x y then (x :: ys) :: yss else [x] :: ys :: yss
  in
  group_aux xs

let anagrams xs =
  let ys = List.map chars xs in
  let zs = List.sort (fun (_,y1) (_,y2) -> compare y1 y2) (List.combine xs ys) in
  let zs = group (fun (_,y1) (_,y2) -> y1 = y2) zs in
  List.map (List.map fst) zs 
```

在这里，辅助函数`chars`将字符串带入排序的字符列表，同时`group`应该让您了解如何在 Caml 中的列表上进行模式匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T04:59:34.073

模式匹配最通用的形式是表达式，与Haskell`match`中的表达式相同。`case`

```
let rec groupByAnagrams lst =
  match lst with [] -> ...
               | x::xs -> ... 
```

但是，当只需要对函数的最后一个参数进行模式匹配时（就像这里的情况），有一个使用`function`语法的快捷方式：

```
let rec groupByAnagrams = function
    [] -> ...
  | x::xs -> ... 
```

至于守卫，没有确切的等价物。您可以`when`在模式匹配中使用，但这仅适用于特定模式，并且您必须针对所需的所有情况重复该模式。你也可以使用`if ... then ... else if ... then ... else ...`，但这不是那么漂亮。

```
let rec partitionByAnagrams sortedStr = function
    [] -> ...
    x::xs when ...(some condition here)... -> ...
    x::xs -> ... 
```

# xcode - 使用 performSelector 执行的方法中的 objc_retain 崩溃

> ID：11875900
> 
> 赞同：10
> 
> 时间：2012-08-09T02:20:44.973
> 
> 标签：xcode, automatic-ref-counting, performselector

我在我的代码中遇到了与 ARC 自动插入 objc_retains 相关的奇怪崩溃。

我有以下两个课程：

```
@interface MenuItem : NSObject
@property (weak, nonatomic) id target;
@property (unsafe_unretained, nonatomic) SEL action;
@property (strong, nonatomic) id object;
- (instancetype)initWIthTarget:(id)target action:(SEL)action withObject:(id)object;
- (void)performAction;
@end

@implementation MenuItem 
- (void)performAction
{
    if (self.target && self.action)
    {
      if (self.object)
      {
        [self.target performSelector:self.action withObject:self.object];
      }
      else
      {
        [self.target performSelector:self.action];
      }
    }
}
@end

@interface Widget : NSObject
- (void)someMethod:(id)sender;
@end 
```

在某些时候，我这样实例化一个 MenuItem：

```
MenuItem *item = [MenuItem alloc] initWithTarget:widget action:@selector(someMethod:) object:nil]; 
```

`performAction`然后在其他地方我在菜单项上调用：

```
 [item performAction]; 
```

在执行中`someMethod`我遇到了崩溃：

```
@implementation Widget
- (void)someMethod:(id)sender
{
  // EXEC_BAD_ACCESS crash in objc_retain
}
@end 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-09T02:28:54.740

崩溃的原因是因为我使用了错误的`performSelector`.

`NSObject`定义多个版本的`performSelector`. 我调用的是：

```
- (id)performSelector:(SEL)aSelector; 
```

但是我调用的方法带有一个`id`参数。例如：

```
- (void)someMethod:(id)sender; 
```

现在 ARC 是一个很好的安全内存管理系统，它试图确保在方法执行期间正确保留参数。因此，即使我`someMethod:`的 ARC 是空的，它也会生成如下所示的代码：

```
- (void)someMethod:(id)sender 
{
    objc_retain(sender);
    objc_release(sender);
} 
```

然而，这个问题是我正在调用`performSelector:`而不是为`sender`参数提供值。`sender`指向堆栈上的随机垃圾也是如此。因此，当`objc_retain()`被调用时，应用程序崩溃了。

如果我改变：

```
MenuItem *item = [[MenuItem alloc] initWithTarget:widget 
                                          action:@selector(someMethod:) 
                                          object:nil]; 
```

到

```
MenuItem *item = [[MenuItem alloc] initWithTarget:widget 
                                          action:@selector(someMethod) 
                                          object:nil]; 
```

和

```
- (void)someMethod:(id)sender; 
```

到

```
- (void)someMethod; 
```

然后崩溃消失。

同样我也可以改变

```
[self.target performSelector:self.action]; 
```

到

```
[self.target performSelector:self.action withObject:nil]; 
```

如果我想遵循采用单个参数的目标操作方法的“标准”形式。第二种形式的好处`performSelector`是，如果我调用一个不带参数的方法，它仍然可以正常工作。

# .net - 删除 CompilerResults.PathToAssembly 中的文件

> ID：11875902
> 
> 赞同：1
> 
> 时间：2012-08-09T02:20:45.920
> 
> 标签：.net, c#-4.0, delete-file, system.reflection

我已经生成了一个动态程序集，并希望将其保存在数据库中。为此，我在编译器参数中将 GenerateInmemory 设置为 false，然后将 outputassembly 路径作为 C:\xxx.dll 传递。然后我正在做 File.ReadAllBytes(CompilerResults.PathToAssembly) 并将这个 byte[] 保存到数据库中。完成所有这些后，我正在尝试删除我正在访问被拒绝错误文件打开错误的文件。有没有办法关闭文件然后删除文件？

```
 CompilerParameters cParams = new CompilerParameters();
                    cParams.GenerateInMemory = false;
                    cParams.IncludeDebugInformation = false;
                    CodeDomProvider cProvider =
    CodeDomProvider.CreateProvider("CSharp");
                    cParams.OutputAssembly = @"c:\xxx.dll";

                    cParams.ReferencedAssemblies.Add("System.dll");
                    cParams.ReferencedAssemblies.Add("System.Xml.dll");

                    CompilerResults cr =
    cProvider.CompileAssemblyFromSource(cParams, sw.GetStringBuilder().ToString());

                    if (cr.Errors.Count > 0)
                    {
                        foreach (CompilerError error in cr.Errors)
                        {
                            Console.WriteLine(error.ErrorText);
                        }
                    }
    Assembly assembly =cr.CompiledAssembly;
    byte[] assemblyAsArray = File.ReadAllBytes(cr.PathToAssembly);
      ...........
//save to database here 

File.Delete(@"c:\xxx.dll")  => getting error here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:37:26.580

由于我是从已编译的程序集中定义程序集，因此它在 appdomain 中加载到文件路径。一旦我创建了字节保存到数据库，然后从工作路径中删除文件并加载程序集。

```
 CompilerResults cr =
    cProvider.CompileAssemblyFromSource(cParams, sw.GetStringBuilder().ToString());

                    if (cr.Errors.Count > 0)
                    {
                        foreach (CompilerError error in cr.Errors)
                        {
                            Console.WriteLine(error.ErrorText);
                        }
                    }
    //Assembly assembly =cr.CompiledAssembly;
    byte[] assemblyAsArray = File.ReadAllBytes(cr.PathToAssembly);
      ...........
//save to database here 

File.Delete(@"c:\xxx.dll") ;
Assembly assembly = Assembly.Load(assemblyAsArray); 
```

# python - 如何在 Python for 循环中获取 GAE ndb 中当前记录的密钥？

> ID：11875903
> 
> 赞同：3
> 
> 时间：2012-08-09T02:20:50.557
> 
> 标签：python, google-app-engine, app-engine-ndb

我目前有一个网页，其中显示来自数据存储区的记录列表以及编辑链接。我想从 db 转换它。到ndb。我是 Python 和 GAE 新手。

当前代码=

```
 <tbody>
    {% for listtype in listtypes %}
    <tr>
      <td> {{ listtype.ListTypeName }} </td>
      <td><a href ="/listtypes/edit/{{ listtype.key().id() }}">edit </a></td>
    </tr>
    {% endfor %}    
  </tbody> 
```

然后在 .py 方面，我有：

```
def post(self, listtype_id):
    iden = int(listtype_id)
    listtypes = db.get(db.Key.from_path('ListTypes', iden))
    listtypes.ListTypeName = self.request.get('ListTypeName')
    listtypes.put() 
```

我通过复制别人的代码得到了这些，但它有效。我需要知道代码会是什么样子才能使其与 ndb 一起使用。（我对模型和包含语句没问题，我只需要知道如何在 jinja2 模板中检索密钥以及如何在 post 函数中使用它。

请提供实际代码应该如何使用 ndb。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T03:04:39.523

使用 NDB 键是属性而不是方法。所以你`listtype.key().id()`应该是`listtype.key.id()`

# javascript - 从父记录访问子故事

> ID：11875905
> 
> 赞同：2
> 
> 时间：2012-08-09T02:21:05.810
> 
> 标签：javascript, rally

我正在构建一个 rallygrid 来显示父级故事。对于每一行，我想迭代该故事的所有孩子并从每个孩子故事中提取一些信息。例如

```
 Ext.Array.each(data, function(record) {
        //Perform custom actions with the data here
        //Calculations, etc.
        recName=record.get('Name');
        if (recName.search(/\[Parent\]/i) != -1) {

            // Grab Child Iterations
            if (record.get('Children').length) {
                var childlist = record.get('Children');
                for (var child in childlist) {
                                       // I want to get each child's Iteration !!!
                }
            } else {
                childIter = "none";
            }

            records.push({
                FormattedID: record.get('FormattedID'),
                ScheduleState: record.get('ScheduleState'),
                Name: recName,
                NumChildren: record.get('Children').length,
                PRDNumber: record.get('PRDNumber')
            });
        }
    }); 
```

但是，record.get('Children') 会重新调整看起来像这样的对象：

```
_rallyAPIMajor "1"
_rallyAPIMinor "34"
_ref "https://rally1.rallydev.com/slm/webservice/1.34/hierarchicalrequirement/7272142216.js"
_refObjectName "[Comp] User Story"
_type "HierarchicalRequirement" 
```

我假设有一些 Ext 调用将获取 _ref URI，下载它并将 JSON 解析为一个不错的对象，我可以开始做 childrecord.get('field')，但对于我的生活，我可以' t 找到要调用的正确函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:09:42.713

您可以使用记录模型的加载方法来检索此问题/答案中提到的特定项目：

[Rally App2.0 - 检索特定故事](https://stackoverflow.com/questions/11846828/rally-app2-0-retrieve-a-specific-story)

在您的情况下，您可以从现有记录中获取模型：

```
var model = record.self;
model.load(child.get('ObjectID'), {
    //options
}); 
```

但是，在您的情况下，如果您只是在寻找有关每个子故事迭代的一些信息，您可能只需将其包含在用于加载父级的初始 WsapiDataStore 的提取中：

```
fetch: ['Children', 'Iteration', 'StartDate', 'EndDate'] 
```

# javascript - 调整平滑滚动代码

> ID：11875907
> 
> 赞同：0
> 
> 时间：2012-08-09T02:21:12.990
> 
> 标签：javascript, jquery

我正在尝试学习 jQuery，但此刻我的大脑一片空白。以下代码通过平滑过渡将我的页面滚动到顶部，但我希望这种平滑过渡适用于我网站上的所有锚/ID 链接（它只是一个寻呼机）。

```
$(document).ready(function() {

    $('a[href="#the-top"]').click(function (e) {
        $("html, body").animate({ scrollTop: $('#the-top').offset().top }, 1000);
        return false;
    });

}); 
```

我怎样才能改变我的代码来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:23:53.487

```
jQuery(function($) {

    $('a[href^=#]').bind('click', function (evt) {
        var $what = $('#' + $(this).attr('href').split('#')[1]);
        $('html, body').stop().animate({ scrollTop: $what.offset().top }, 1000);
        evt.preventDefault();
    });

}); 
```

此代码中建议的更改：

*   将全局`$`对象更改为`jQuery`
*   就像`jQuery(fn)`_`document.ready(fn)`
*   闭包：在该函数内部使用`jQuery`as`$`
*   防止锚定而不是默认事件`return false`（来源： http: [//fuelyourcoding.com/jquery-events-stop-misusing-return-false/](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)）
*   使用`$what`询问`#something`锚点href的一部分，以防止IE中的不当行为（因为如果你`href="#some"`有时会变成它`href="http://yoursite.com/yourcurrentpage/#some`）

所有这些都是可选的。你明白了。随意改变。

演示地址：http: [//jsfiddle.net/Nm3cT/](http://jsfiddle.net/Nm3cT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:25:08.763

看看[Chris Coyier 的流畅滚动脚本](http://css-tricks.com/snippets/jquery/smooth-scrolling/)。它正是这样做的，不需要进一步的配置。另外，它会更新浏览器上的地址。

# php - php mysqli bind_param 参数计数错误

> ID：11875910
> 
> 赞同：0
> 
> 时间：2012-08-09T02:21:52.100
> 
> 标签：php, mysql, mysqli, prepared-statement

有很多关于这个的问题在这里得到了回答，但我找不到我的问题。

使用存储为属性的 mysqli 的 DB 类。使用魔法调用方法触发准备、绑定和执行：

```
public static function __callStatic($name, $arg)
{
    echo '<pre>';
    var_dump($arg);
    echo '</pre>';
    if($name == 'Prepare'){
        self::$Stmt = self::$mysqli->prepare(implode(', ', $arg));
        $return = self::$Stmt;
    }elseif($name == 'Bind')
        $return = self::$Stmt->bind_param(implode(', ', $arg));
    elseif($name == 'Execute')
        $return = self::$Stmt->execute();
    else
        $return = self::$mysqli->$name(implode(', ', $arg));
    if(!self::GetErr())
        return $return;
} 
```

我还有一个生成 SQL 语句的类。这是准备语句中使用的输出：

```
INSERT INTO account (UName, FName, LName, Email, Password, RecQuestion, RecAnswer, Admin) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 
```

这是代码：

```
DB::Prepare(SQL::Table('account')->Insert([
    'UName' => '?',
    'FName' => '?',
    'LName' => '?',
    'Email' => '?',
    'Password' => '?',
    'RecQuestion' => '?',
    'RecAnswer' => '?',
    'Admin' => '?'
]));
DB::Bind('sssssssi', $userName, $fName, $lName, $email, $password, $recQ, $recA, $admin);
DB::Execute(); 
```

正如我所看到的，它有 8 种类型和 8 个值......

这里也是`var_dump($arg)`当 DB::Bind 被调用时的输出

```
array(9) {
  [0]=>
  string(8) "sssssssi"
  [1]=>
  string(4) "user"
  [2]=>
  string(5) "first"
  [3]=>
  string(4) "last"
  [4]=>
  string(15) "email@email.com"
  [5]=>
  string(64) "$2a$10$Tw4eOkUYA6SX8WP8XJfKZeFfOM9htVRJyP0d1iYlka0jNCV/qPGzazakT"
  [6]=>
  string(7) "recover"
  [7]=>
  string(64) "$2a$10$LrfK2EdkRi6pPdx1tUtPWe8p24T8ISdQHYhW0N06RjbvCrU4Flqiie4jU"
  [8]=>
  int(1)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:46:54.513

`implode(', ', $arg)`返回一个字符串，所以它只得到一个参数。解决这个问题的正确方法是使用`call_user_func_array();`

然而，它并不像看起来那么明显。`bind_param()`期望参数通过引用而不是值传递。`__callStatic($name, $arg)`有一个值数组而不是引用，因此需要一个包含对这些值的引用的本地副本。

**解决方案：**

```
elseif($name == 'Bind'){
    foreach($arg as &$v)
        $Arg[] = &$v;
    $return = call_user_func_array(array(self::$Stmt, 'bind_param'), $Arg);
} 
```

# asp.net-mvc - ASP.NET Web API 模型绑定

> ID：11875912
> 
> 赞同：6
> 
> 时间：2012-08-09T02:22:00.900
> 
> 标签：asp.net-mvc, asp.net-web-api

我在 ASP .NET MVC 4 RC 中使用 Web API，并且我有一个方法可以使用具有可为空的 DateTime 属性的复杂对象。我希望从查询字符串中读取输入的值，所以我有这样的东西：

```
public class MyCriteria
{
    public int? ID { get; set; }
    public DateTime? Date { get; set; }
}

[HttpGet]
public IEnumerable<MyResult> Search([FromUri]MyCriteria criteria)
{
    // Do stuff here.
} 
```

如果我在查询字符串中传递标准日期格式，例如 2012 年 1 月 15 日，这将很有效：

```
http://mysite/Search?ID=1&Date=01/15/2012 
```

但是，我想为 DateTime 指定一个自定义格式（可能是 MMddyyyy）......例如：

```
http://mysite/Search?ID=1&Date=01152012 
```

* * *

## 编辑：

我尝试应用自定义模型绑定器，但我没有任何运气将它仅应用于 DateTime 对象。我试过的 ModelBinderProvider 看起来像这样：

```
public class DateTimeModelBinderProvider : ModelBinderProvider
{
    public override IModelBinder GetBinder(HttpActionContext actionContext, ModelBindingContext bindingContext)
    {
        if (bindingContext.ModelType == typeof(DateTime) || bindingContext.ModelType == typeof(DateTime?))
        {
            return new DateTimeModelBinder();
        }
        return null;
    }
}

// In the Global.asax
GlobalConfiguration.Configuration.Services.Add(typeof(ModelBinderProvider), new DateTimeModelBinderProvider()); 
```

新的模型绑定器提供程序被创建，但`GetBinder`只被调用一次（对于复杂的模型参数，而不是模型中的每个属性）。这是有道理的，但我想找到一种方法让它使用我`DateTimeModelBinder`的 DateTime 属性，同时对非 DateTime 属性使用默认绑定。有没有办法覆盖默认值`ModelBinder`并指定每个属性的绑定方式？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:54:32.207

考虑将视图模型的`Date`属性设置为 type`string`

然后编写一个实用函数来处理视图模型类型和域模型类型之间的映射：

```
public static MyCriteria MapMyCriteriaViewModelToDomain(MyCriteriaViewModel model){

    var date = Convert.ToDateTime(model.Date.Substring(0,2) + "/" model.Date.Substring(2,2) + "/" model.Date.Substring(4,2));

    return new MyCriteria
    {
        ID = model.ID,
        Date = date
    };

} 
```

或使用[AutoMapper 之](http://automapper.codeplex.com/)类的工具，如下所示：

在 Global.asax

```
//if passed as MMDDYYYY:
Mapper.CreateMap<MyCriteriaViewModel, MyCriteria>().
    .ForMember(
          dest => dest.Date, 
          opt => opt.MapFrom(src => Convert.ToDateTime(src.Date.Substring(0,2) + "/" src.Date.Substring(2,2) + "/" src.Date.Substring(4,2)))
); 
```

在控制器中：

```
public ActionResult MyAction(MyCriteriaViewModel model)
{
    var myCriteria = Mapper.Map<MyCriteriaViewModel, MyCriteria>(model);

    //  etc.
} 
```

从这个例子来看，AutoMapper 似乎没有提供任何附加值。当您使用通常比本示例具有更多属性的对象配置多个或多个映射时，它的价值就出现了。CreateMap 将自动映射具有相同名称和类型的属性，因此它节省了大量的输入，而且更干燥。

# c# - C#多线程调试

> ID：11875913
> 
> 赞同：0
> 
> 时间：2012-08-09T02:22:06.967
> 
> 标签：c#, multithreading

我正在尝试构建一个多线程服务器，该服务器应该为每个传入的连接生成新线程，但是尽管我付出了所有努力，但它仅在需要时才生成新线程，有人可以帮我调试这段代码吗？我错过了一些明显的东西吗？

```
 while (true)
 {
   if (txtAddress.Text.Trim() == "Any" || txtAddress.Text.Trim() == "any")
      ipEndP = new IPEndPoint(IPAddress.Any, 778);
   else
      ipEndP = new IPEndPoint(IPAddress.Parse(txtAddress.Text.Trim()), 778);

      tcpL = new TcpListener(ipEndP);
      tcpL.Server.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);

      tcpL.Start();
      tempSock = tcpL.AcceptSocket();

 //t = new Thread(ConnectionHandler); //When new client is connected, new thread       //is created to handle the connection
 //t.Priority = ThreadPriority.Highest;
 //t.Start(tempSock);

 ThreadPool.QueueUserWorkItem(ConnectionHandler, tempSock);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T02:24:06.110

查看[QueueUserWorkItem的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)

> 排队执行的方法。该方法在线程池线程可用时执行。

将线程放入用户工作项队列并不能保证它会立即开始执行。这实际上是一件好事。如果您的连接如此之多，以至于需要数百或数千个线程，那很容易使您的服务器瘫痪（并且由于过多的上下文切换肯定会非常浪费）。

您注释掉的代码应该为每个连接启动一个新线程。那不工作吗？如果是这样，究竟是什么不起作用？请注意，为每个连接创建一个新线程比使用线程池要昂贵得多。

**更新**

根据您的评论，注释掉的代码也无法创建太多线程，我会添加......

如果发生这种情况，您正在创建太多线程。

> 我经常看到人们问为什么他们不能在一个进程中创建超过 2000 个线程。原因不是 Windows 固有的任何特定限制。相反，程序员没有考虑每个线程使用的地址空间量。
> 
> 线程由内核模式的一些内存（内核堆栈和对象管理）、用户模式的一些内存（线程环境块、线程本地存储等）以及它的堆栈组成。（如果您使用的是 Itanium 系统，则可以使用堆栈。）
> 
> 通常，限制因素是堆栈大小。

[http://blogs.msdn.com/b/oldnewthing/archive/2005/07/29/444912.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2005/07/29/444912.aspx)

# ios5 - 当uitableviewcontroller嵌入navigationcontroller时如何保持栏按钮不滚动

> ID：11875917
> 
> 赞同：0
> 
> 时间：2012-08-09T02:22:42.150
> 
> 标签：ios5, uinavigationcontroller, uiscrollview, uitableview

我在 UINavigationController 中手动嵌入了一个 uitableviewcontroller，如下所示。

```
navigationController = [[UINavigationController alloc] init];
jabBookModelTableViewController *vc = [[jabBookModelTableViewController alloc]init];
vc.booksPassed = booksToPass;
vc.user = user;
navigationController.viewControllers=[NSArray arrayWithObject:vc];
vc.navigationController = navigationController;
[self presentModalViewController:navigationController animated:YES]; 
```

我的问题是在我的 UITableViewController 类中我创建了一个条形按钮：

```
UIBarButtonItem *anotherButton = [[UIBarButtonItem alloc] initWithTitle:@"Save Books"
                                                                  style:UIBarButtonItemStylePlain
                                                                 target:self
                                                                 action:@selector(saveBooksAction)];
self.navigationItem.leftBarButtonItem = anotherButton; 
```

如果我在表中加载 30 行，然后向下滚动条形按钮向上滚动，那么用户必须滚动到顶部才能到达按钮。

如何让 UITableViewController 子类滚动，但 UINavigationController 留在一个地方？

我应该以某种方式使用 UIScrollView 并将我的 UITableViewController 子类放在滚动视图中吗？

**更新：**

我删除了为之创建的属性，`navigationController`但出现此错误：

```
jabFirstViewController.m:192:33: Assignment to readonly property 
```

# c# - 无法解析远程名称：使用 Recaptcha 的“www.google.com”

> ID：11875921
> 
> 赞同：1
> 
> 时间：2012-08-09T02:23:50.650
> 
> 标签：c#, asp.net, captcha, recaptcha

**我将 Recaptcha 用于我的 ASP.NET 站点。开发环境中一切正常，但是当我公开生产时，出现此错误：**

```
The remote name could not be resolved: 'www.google.com'
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Net.WebException: The remote name could not be resolved: 'www.google.com'

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[WebException: The remote name could not be resolved: 'www.google.com']
   System.Net.HttpWebRequest.GetRequestStream() +5322142
   Recaptcha.RecaptchaValidator.Validate() in D:\recaptcha-repo-dotnet\library\RecaptchaValidator.cs:134
   Recaptcha.RecaptchaControl.Validate() in D:\recaptcha-repo-dotnet\library\RecaptchaControl.cs:332
   System.Web.UI.Page.Validate() +141
   System.Web.UI.Page.Validate(String validationGroup) +8740369
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +84
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1565 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T02:25:50.650

您的虚拟主机不允许您的服务器连接到其他计算机。

要求他们改变这一点，或者换一个更好的主人。

# google-bigquery - 如何从 BigQuery 中获取多个列？

> ID：11875929
> 
> 赞同：1
> 
> 时间：2012-08-09T02:24:24.987
> 
> 标签：google-bigquery, data-mining, traminer

我在 BigQuery 上查询 github 公共数据集。目前，我对所需内容的最佳查询如下所示。

```
SELECT type, created_at, repository_name FROM [githubarchive:github.timeline]
WHERE
    (created_at CONTAINS '2012-')
AND repository_owner="twitter"
ORDER BY created_at, repository_name; 
```

这为我提供了来自该用户拥有的所有存储库（“repository_name”）的 repository_owner twitter（或任何其他用户）的所有事件（“type”），但在一个列中。

但是，我真正想要的是在列中包含所有事件（“类型”），每个存储库一列（“repository_name”），或多或少像这样：

```
bootstrap     commons    twui
WatchEvent    PushEvent  PushEvent
WatchEvent    WatchEvent PushEvent 
```

时间戳（“created_at”）仅与排序机制相关。列不必等长，单行上的事件不必同时发生。

我将使用它来将事件放入 R 包 TraMineR 中进行序列分析。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:16:07.317

这行得通吗？

```
SELECT type, created_at, repository_name 
FROM [githubarchive:github.timeline]
WHERE
    (created_at CONTAINS '2012-')
AND repository_owner="twitter"
GROUP BY type,created_at, repository_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:49:39.537

我不确定我是否完全理解您希望完成的任务，但可以通过以下方式获取列：

```
SELECT type, bootstrap, commons, twui
FROM   (
       SELECT type,
              SUM(IF(repository_name = 'bootstrap', 1, 0)) AS bootstrap,
              SUM(IF(repository_name = 'commons', 1, 0)) AS commons,
              SUM(IF(repository_name = 'twui', 1, 0)) AS twui
       FROM   [githubarchive:github.timeline]
       WHERE  created_at CONTAINS '2012-'
       AND    repository_owner = "twitter"
       GROUP BY type
       )
ORDER BY type 
```

# iphone - XCode - 在本地复制链接到项目的所有外部文件

> ID：11875931
> 
> 赞同：1
> 
> 时间：2012-08-09T02:24:38.993
> 
> 标签：iphone, xcode, file, xcode4, project

当我制作我的项目时，我只是通过链接添加了许多文件，而没有将它们复制到项目文件夹中。但是现在，我想要一个包含所有必要文件到项目文件夹中的包。

如何将所有这些外部文件复制到项目文件夹中而无需一一检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:51:13.933

简单地

1.  从您的项目中删除所有文件。
2.  收集所有要复制的文件。
3.  再次将它们全部拖到您的项目中，现在选中“将项目复制到目标文件夹”

我相信这是最快的方法。

# c++ - hg 忽略 VC6 项目

> ID：11875932
> 
> 赞同：0
> 
> 时间：2012-08-09T02:24:40.730
> 
> 标签：c++, mercurial, visual-c++-6, hgignore

VC6 项目的最佳 hgignore 列表是什么？它有点旧，我不能谷歌它。

我发现有一个 VS2010 和 VS2008 的列表，但是项目文件完全不同。

# javascript - .change() 在触发前有一点延迟

> ID：11875935
> 
> 赞同：1
> 
> 时间：2012-08-09T02:25:03.753
> 
> 标签：javascript, jquery, onchange, lag

这是我尝试过的一些代码的示例。

```
<input id="fileupload" type="file">
<button id="choosefile">Choose file</button>
<script>
$('#choosefile').click(function(){
    $('#fileupload').click();
});
$('#fileupload').change(function(){
    alert('changed!');
}); 
```

实际选择文件和弹出警告框之间似乎至少有 1-2 秒的延迟。每次我第一次访问该页面时都会发生这种情况。但在那之后它变成了瞬间。同样的事情发生在 Firefox 14.0.1 和 Chrome 上。

每次有新人来到我的页面时，他们都会有这种滞后。

# c++ - vector.push_back 右值和复制省略

> ID：11875939
> 
> 赞同：9
> 
> 时间：2012-08-09T02:25:15.063
> 
> 标签：c++, vector, copy-elision

我`push_back`一个临时对象变成了`vector`这样，

```
vector<A> vec;
vec.push_back(A("abc")); 
```

编译器是否会应用复制省略将临时对象`A("abc")`直接构造到.`vector``A``vec`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T02:31:09.660

如果你有一个支持右值引用的编译器，它将被移动到向量中，这有时很便宜。

另一种方法是直接在向量中构造对象，这可以用`vec.emplace_back("abc");`. 这只调用一个构造函数。

这两个都是 C++11 的特性。这里不允许复制省略，因此如果没有这些功能，仍然会制作副本。

但是，如果复制构造函数没有可观察到的副作用（无论如何它都不应该有），智能编译器仍然可以执行该优化，因为“as-if”规则允许任何导致相同可观察行为的优化。不过，我不知道是否有任何当前的编译器会这样做。如果没有，我怀疑有人会花精力添加这样的优化，因为右值引用结束了这种需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T02:48:17.693

在一般情况下，它无法完成，它可能在此处作为`vector`模板完成，并且代码可能被内联，为优化器提供更多信息以完成其工作并减轻函数调用的一些要求。

在一般情况下，复制省略的工作原理是将两个对象放在内存中的同一位置，并且只有两个名称来引用单个对象。这种情况下的问题是，一个参数必须位于向量内部（动态分配，在特定位置），另一个是函数的参数，它可能被调用约定绑定到特定位置在堆栈中。如果是这种情况，那么编译器将无法优化副本。

# r - R中曲线函数的3D等效？

> ID：11875941
> 
> 赞同：8
> 
> 时间：2012-08-09T02:25:31.413
> 
> 标签：r, 3d, rgl

R 中的`curve`函数提供了一种绘制函数的简单方法。例如，这将绘制一条直线

```
f1 <- function(x) x
curve(f1, from=-1, to=1) 
```

**R 中是否有一个等效函数，它接受一个带有两个参数（例如`x`和`y`）的函数和两个变量的范围并生成 3D 图？**

例如，假设我有以下功能

```
f2 <- function(x, y) x + y 
```

有没有类似下面的命令？

```
curve_3d(f2, x_range=c(-1, 1), y_range=c(-1, 1)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T02:33:20.087

package:rgl 中的`surface3d`函数看起来很匹配。创建一个包装器将非常简单，该包装器将采用您的函数，创建一组 xy 向量，`seq()`然后将这些向量传递给`outer`您的 f2 作为 FUN 参数，然后调用`surface3d`.

还有一个`persp3d`作者（邓肯默多克，也许还有其他人）说是“更高级别”，它似乎默认添加了轴，而 Surface3d 没有。

```
curve_3d <- function(f2, x_range=c(-1, 1), y_range=c(-1, 1), col=1:6 ){ 
       if (!require(rgl) ) {stop("load rgl")}
       xvec <- seq(x_range[1], x_range[2], len=15)
        yvec <- seq(y_range[1], y_range[2], len=15)
       fz <- outer(xvec, yvec, FUN=f2)
       open3d()
       persp3d( xvec, yvec, fz, col=col) }
curve_3d(f2)
snapshot3d("out3dplane.png") 
```

![平面的可旋转pseudo3d 图](../Images/56e1715fe9d2e58cf3b0e9e738c85002.png)

`persp()`现在我进一步考虑它，你可以用or做类似的事情`wireframe()`。“技巧”是使用外部（...，FUN=fun）。而且当我进一步考虑时……使用它的能力`outer`取决于它由所有矢量化操作组成。如果它们没有被矢量化，我们需要用`Vectorize`or重写`mapply`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-23T16:35:43.413

请参阅`curve3d()`，`package:emdbook`它是 、 等的包装`wireframe()`器`persp3d()`。

```
library(emdbook)
# bivariate normal density with emdbook::curve3d
curve3d(expr = dmvnorm(x=c(x,y), mu = c(0,0), Sigma = diag(2)), 
    from = c(-3,-3), to = c(3,3), n = 100, sys3d = "wireframe") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-29T15:17:21.923

您可以使用包进行交互式绘图`plot3Drgl`。

```
library(plot3Drgl)

f <- function(x,y) x+y
x <- y <- seq(-4,4,len=20)
z <- outer(x, y, f)

persp3Drgl(z=z) 
```

[![在此处输入图像描述](../Images/a31c76c83c025e4d1640478dbd645818.png)](https://i.stack.imgur.com/TgLWY.gif)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-22T19:06:08.540

该`persp3d()`函数可以将函数作为参数。见`?persp3d.function`。

它允许绘制两种类型的曲面： 和 的函数，`x`如`y`您所愿，以及参数曲面，其中`x`和`y`都是`z`其他两个变量的函数。

对于您的示例，它就像

```
f2 <- function(x, y) x + y
persp3d(f2) 
```

但当然你可以添加各种装饰，比如让颜色取决于，改变and`z`的范围等。`x``y`

# ruby - 将一行拆分为列

> ID：11875947
> 
> 赞同：0
> 
> 时间：2012-08-09T02:26:35.623
> 
> 标签：ruby

我有一个文件，内容是这样的：

```
first;48548a;48954a,48594B
second;58757a;5875b
third;58756a;58576b;5867d;56894d;45864a 
```

我想改变这样的格式：

```
first;48548a
first;48954a
first;48594B
second;58757a
second;5875b
third;58756a
third;58576b
third;5867d
third;56894d
third;45864a 
```

在 Bash 中，我可以使用这个命令来实现它：

```
awk -F\; '{for(n=2; n<=NF; n++) { printf("%s;%s\n",$1,$n); }}' input.txt 
```

但现在我正试图用 Ruby 来做这件事。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T03:06:34.950

这可以解决问题：

```
IO.readlines("input.txt").each do |line|
  num, *data = line.strip.split(/[;,]/)
  data.each do |s|
    puts "#{num};#{s}"
  end
end 
```

请注意，@evfwcqcg 和我都在考虑很可能是错字，逗号作为第一行的记录分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T02:43:51.507

```
s = <<-STR
first;48548a;48954a,48594B
second;58757a;5875b
third;58756a;58576b;5867d;56894d;45864a
STR

def disp(number, *elems)
  puts elems.map { |e| "#{number};#{e}" }
end

ar = s.split.each {|x| disp(*x.split(/[;,]/)) }

# => first;48548a
# => first;48954a
# => first;48594B
# => second;58757a
# => second;5875b
# => third;58756a
# => third;58576b
# => third;5867d
# => third;56894d
# => third;45864a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:01:24.860

假设您将其作为文本文件读入脚本中，我是否正确？为了让您开始，`File.open(textfile).each do (code code code) end` 从那里开始，看看 evfwcqcg 在拆分这些行时所说的话：

`File.open(textfile).each do |line| x = line.split(/[;,]/) end`

我想。我不太确定，但我认为这个论点是正则表达式？请有人解释一下。然后，将这些行分解为它们自己的数组（一次一个）。从那里，您只需遍历它们，将您的内容保持`line[0]`在每个打印行的开头。

# java - 如何在 Lucene ( JAVA ) 的 BM25 实现中计算 avgLengthPath

> ID：11875949
> 
> 赞同：0
> 
> 时间：2012-08-09T02:27:10.843
> 
> 标签：java, search, lucene, indexing

[谁能向我解释如何在 Lucene 的BM25](http://nlp.uned.es/~jperezi/Lucene-BM25/ "BM25")实现中计算“avgLengthPath”变量。我的理解是我必须在索引期间计算它。但仍然不清楚如何做到这一点。

提供的示例：

```
IndexSearcher searcher = new IndexSearcher("IndexPath");

//Load average length
BM25Parameters.load(avgLengthPath);
BM25BooleanQuery query = new BM25BooleanQuery("This is my Query", 
    "Search-Field",
    new StandardAnalyzer());

TopDocs top = searcher.search(query, null, 10);
ScoreDoc[] docs = top.scoreDocs;

//Print results
for (int i = 0; i $<$ top.scoreDocs.length; i++) {
      System.out.println(docs[i].doc + ":"+docs[i].score);
} 
```

建议有一个方法或类来加载平均长度。

将不胜感激任何帮助...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:44:41.483

我已经解决了这个问题，我想分享我的答案以获得任何更正或评论..

问题是*如何计算 avgLengthPath 参数*。当我查看采用此参数的方法时：`load()`可以看出它需要一个字符串，它是包含平均长度的文件的路径。所以**avgLengthPath**会是这样的：

```
/Users/admib/Study/avgLength 
```

`load()`方法如下：

```
 public static void load(String path) throws NumberFormatException,
        IOException {
    BufferedReader in = new BufferedReader(new FileReader(path));
    String line;
    while (null != (line = in.readLine())) {
        String field = line;
        Float avg = new Float(in.readLine());
        BM25Parameters.setAverageLength(field, avg);
    }
    in.close();
} 
```

现在，免得看看如何创建这样的文件。我们可以看到上述方法逐行读取文件，并将每两行发送到另一个名为`BM25Parameters.setAverageLength()`. avgLengthPath 文件的格式应该是这样的：

```
CONTENT 
459.2903f
ANCHOR
84.55523f 
```

其中第一行是文件名，第二行是该字段的平均长度。此外，第三行是另一个字段，第四行是该字段的平均长度。

此类文件的问题是我们无法从 Lucene 的默认位置获取文档长度。为了克服这个问题，我重新索引了我的集合并将文档长度添加为 Lucene 要索引的字段之一。

首先，我创建了一个获取文件并将文档长度作为字符串返回的方法。我称之为`getDocLength(File f)`：

```
 public static String getDocLength(File f) throws IOException {
    FileInputStream stream = new FileInputStream(f);
    try {
        FileChannel fc = stream.getChannel();
        MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());

        String doc = Charset.defaultCharset().decode(bb).toString();
        int length  = doc.length();
        return Integer.toString(length);
    } finally {
        stream.close();
    }
} 
```

在索引过程中调用此方法来添加文档长度字段，如下所示：

```
 protected Document getDocument(File f) throws Exception {
    Document doc = new Document();
    String docLength = Integer.toString(io.getDocLength(f));
    doc.add(new Field("contents", new FileReader(f), Field.TermVector.YES));
    doc.add(new Field("docLength", i, Field.Store.YES, Field.Index.NOT_ANALYZED));
    doc.add(new Field("filename", f.getName(), Field.Store.YES, Field.Index.NOT_ANALYZED));
    doc.add(new Field("fullpath", f.getCanonicalPath(), Field.Store.YES, Field.Index.NOT_ANALYZED));         
    return doc;
} 
```

最后，我创建了一个方法，循环遍历索引中的所有文档并计算平均文档长度，最后将结果以正确的格式保存到**avgLengthPath**文件中。我调用了这个方法`generateAvgLengthPathFile()`：

```
 public static void generateAvgLengthPathFile(String luceneIndexPath, String outputFilePath) {
    try {
        Directory dir = FSDirectory.open(new File(luceneIndexPath));
        IndexReader reader = IndexReader.open(dir);
        int totalLength = 0;
        //here we loop through all the docs in the index 
        for (int i = 0; i < reader.maxDoc(); i++) {
            if (reader.isDeleted(i)) {
                continue;
            }
            Document doc = reader.document(i);
            totalLength += Integer.parseInt(doc.get("docLength"));
        }
        //calculate the avarage length
        float avarageLength = totalLength * 1.0f / reader.maxDoc() * 1.0f;
        //create the a String varibale with the correct formate
        String avgLengthPathFile = "contents" + "\n" + avarageLength;

        //finally, save the file 
        Writer output = null;
        String text = "contents" + "\n" + avarageLength;
        File file = new File(outputFilePath);
        output = new BufferedWriter(new FileWriter(file));
        output.write(text);
        output.close();

    } catch (Exception e) {
System.err.println(e);
    }
} 
```

# c - 当主线程退出时，其他线程是否也退出？

> ID：11875956
> 
> 赞同：27
> 
> 时间：2012-08-09T02:28:32.677
> 
> 标签：c, multithreading, pthreads

我对同一进程中的主线程和其他线程有疑问。当主函数返回时，其他线程是否也退出？我对此感到困惑。

考虑以下测试代码：

```
void* test1(void *arg)
{
    unsigned int i = 0;
    while (1){
        i+=1;
    }
    return NULL;
}

void* test2(void *arg)
{
    long double i = 1.0;
    while (1){
        i *= 1.1;
    }
    return NULL;
}

void startThread ( void * (*run)(void*), void *arg) {
  pthread_t t;
  pthread_attr_t attr;
  if (pthread_attr_init(&attr) != 0
      || pthread_create(&t, &attr, run, arg) != 0
      || pthread_attr_destroy(&attr) != 0
      || pthread_detach(t) != 0) {
    printf("Unable to launch a thread\n");
    exit(1);
  }
}

int main()
{
    startThread(test1, NULL);
    startThread(test2, NULL);

    sleep(4);
    printf("main thread return.\n");

    return 0;
} 
```

当“主线程返回”。打印出来，线程test1和test2也退出了，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-09T02:31:21.813

您应该[`pthread_join()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_join.html)在每个新线程上使用，以通知调用线程等待子线程，暂停执行 - 并退出进程 - 直到这些线程终止。

在进程退出后，调用[`pthread_detach`](http://pubs.opengroup.org/onlinepubs/009604599/functions/pthread_detach.html)创建的线程**不会保留它们。**从 linux[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_detach.3.html)：

> detached 属性仅仅决定了线程终止时系统的行为；如果进程使用 exit(3) 终止（或者等效地，如果主线程返回），它不会阻止线程终止。

您有时会看到使用[`pthread_exit`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_exit.html)in`main`而不是显式`pthread_join`调用，其意图是以`main`这种方式退出将允许其他线程继续运行。事实上，[linux 手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_exit.3.html)明确说明了这一点：

> 为了允许其他线程继续执行，主线程应该通过调用 pthread_exit() 而不是 exit(3) 来终止。

但我不知道这是否是所有平台上的预期行为，我一直坚持使用`pthread_join`.

`pthread_join`需要`pthread_t`目标线程，因此您的代码需要进行一些更改，因为您需要在调用之前创建两个线程`pthread_join`以等待它们。所以你不能调用它`startThread`。您需要返回 a`pthread_t`或将指向 a 的指针传递`pthread_t`给您的`startThread`函数。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-09T02:41:00.810

当主线程返回时（即你从`main`函数中返回），它会终止整个进程。这包括所有其他线程。当你打电话时也会发生同样的事情`exit`。你可以通过调用来避免这种情况`pthread_exit`。

的目的`pthread_detach`是为了让你不需要加入其他线程来释放它们的资源。分离一个线程不会使其在进程终止后存在，它仍然会与所有其他线程一起被销毁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-15T16:09:10.950

当您从`main()`.

库`libc`负责通过`exit()`在`main()`函数返回时调用来实现这一行为。反过来，该`exit()`函数最终将调用一个名为`_exit()`which（从`libc`v2.3 开始）的瘦包装函数，最终将调用 [exit_group](https://man7.org/linux/man-pages/man2/exit_group.2.html)系统调用并结束您的进程并终止其所有线程。

最后一个系统调用负责您注意到的行为。

[我们可以在这里](https://man7.org/linux/man-pages/man2/exit.2.html)`_exit()`的手册中看到这个微妙的注释：

```
C library/kernel differences
       In glibc up to version 2.3, the _exit() wrapper function invoked
       the kernel system call of the same name.  Since glibc 2.3, the
       wrapper function invokes exit_group(2), in order to terminate all
       of the threads in a process. 
```

如果您的意图是避免这种行为，唯一的选择是调用`pthread_exit`它将结束您的主线程并阻止您返回到`libc`'s`__libc_start_main()`函数。

# ios - Xcode 4.4 故事板，如何更改选项卡栏中的第一个视图

> ID：11875960
> 
> 赞同：0
> 
> 时间：2012-08-09T02:29:10.827
> 
> 标签：ios, xcode

我有一个带有 5 个选项卡视图的故事板。它始终默认为 first。我希望它是应用程序启动时始终首先显示的第三个视图。

我怎么做？我无法从情节提要界面中弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:37:46.507

行。找到了答案：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  UITabBarController *tabBar = (UITabBarController *)self.window.rootViewController;
  tabBar.selectedIndex = 2;  // zero based index of desired default tab to launch with.
  return YES;
} 
```

# java - Java中的简单数字计数器方法

> ID：11875967
> 
> 赞同：0
> 
> 时间：2012-08-09T02:30:29.463
> 
> 标签：java, methods, counter

我正在尝试创建一种方法来计算字符串中数字出现的次数并将它们记录到数组中。

例如，如果输入到方法中的字符串是“1223000”，那么 counter[1] =1，counter[2] =2，counter[3] = 1，counter[0] = 3。

我不断收到 arrayindexoutofbounds 错误，这是我到目前为止的代码：

```
//method: count number of occurences for digits
    public static int[] count(String s){

        int[] counter = new int[10];

        for(int j= 0; j < s.length(); j++){
            if (Character.isDigit(s.charAt(j)))
                counter[s.charAt(j)] += 1;
        }

        return counter;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T02:35:06.957

请参阅[我的评论](https://stackoverflow.com/questions/11875967/simple-digit-counter-method-in-java#comment15801384_11875967)以了解如何更正该问题。

您还应该考虑直接循环字符串的字符，而不是跟踪字符串中的位置并使用`charAt`.

例如，

```
public static int[] countDigits(final String str) {
  final int[] freq = new int[10];
  for (final char c : str.toCharArray()) {
    if (Character.isDigit(c)) {
      ++freq[c - '0'];
    }
  }
  return freq;
} 
```

使用以下代码测试上述内容不会产生错误（`java -ea DigitFreqTest`）。

```
final String input = "1223000";
final int[] freq = countDigits(input);
assert freq[0] == 3 && freq[1] == 1 && freq[2] == 2 && freq[3] == 1; 
```

* * *

请注意，上面不支持 Unicode……在这种情况下，您可能希望改用[`Character.getNumericValue`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#getNumericValue(char)).

```
public static Map<Integer, Integer> countNumerals(final String str) {
  final Map<Integer, Integer> freq = new HashMap<Integer, Integer>(10);
  for (final char c : str.toCharArray()) {
    if (Character.isDigit(c)) {
      final int num = Character.getNumericValue(c);
      Integer occ = freq.get(num);
      if (occ == null) {
        occ = 0;
      }
      freq.put(num, occ + 1);
    }
  }
  return freq;      
} 
```

注意我不得不使用 a 即兴创作，`Map<Integer, Integer>`因为 Java 本身并不提供多重集合:-(

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T02:35:58.423

s.charAt(j) 将为您提供该数字的字符编号，而不是整数值。

这是非常正确的代码，但你会得到正确的想法： `String s = "1223000"; int[] counter = new int[10];`

```
 for(int j= 0; j < s.length(); j++){

        if (Character.isDigit(s.charAt(j))) {
            int i = Integer.parseInt(s.substring(j, j+1));
            counter[i] += 1;
        }
            //unter[s.charAt(j)] += 1;
    }</code> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T02:47:41.027

您得到的`ArrayIndexOutOfBoundsException`原因是`s.charAt(j)`in`counter[s.charAt(j)]`将返回`char`例如数字`'1'`，然后使用 ASCII 将 char 转换为 int ，因此`char '1'`将`int 49`超出数组索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T02:36:41.497

计数器数组（int[] 计数器）的大小应该是 s 的长度： int[] counter = new int[s.length()];

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-25T12:29:56.827

If you guys want a counter for anything, just turn it into a string, then use the string method .length() to figure out the length, if that's what you're looking for. And if I'm not mistaken, the length() method returns an integer, so there you go. And as shown somewhere on this page, arrays have the same attribute, but that's for how many spaces there are that have things stored in them.

# php - 使用 jQuery 的基本 Ajax - 执行 PHP 文件

> ID：11875973
> 
> 赞同：3
> 
> 时间：2012-08-09T02:30:54.597
> 
> 标签：php, jquery, ajax

出于某种原因，我无法让它工作。我想要做的是，当单击按钮时，（通过 ajax）执行一个 php 文件。Aka，如果我不使用 ajax，我们会看：

```
<a href="file.php">dfgdfg</a> 
```

我希望在不离开页面的情况下执行文件。

这就是我的atm：

```
$(".vote-up").live('click', function(e) {
$.ajax("file.php", function(){
       alert("Executed file");
   });
}); 
```

这似乎不起作用。我真的很困惑 jQuery ajax 函数一般是如何工作的，而没有处理任何远程复杂的事情。

添加的问题：

```
.ajax({
       url: 'includes/login-check-jquery.php',
       success: function (data) {
            if(data == 1){
                alert("Logged in!!!");
            }else{
                window.location = data;
            }
        error: function (xhr, status, error) {
        // executed if something went wrong during call
        if (xhr.status > 0) alert('Error: ' + status); // status 0 - when load is interrupted
        }
    });
}); 
```

在上面的代码中，如果返回的数据等于“logged in”，则会出现一个消息框。否则它将重定向到该位置（以数据形式发送）。由于某种原因，此 if 语句不起作用，但数据按预期返回。

我的 PHP 代码是：

```
<?php  
if (!$user->logged_in){
    echo "../login/index.php";
}else{
    echo "1";
} 
```

?>

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T02:59:44.797

如果您不想离开页面，请执行

```
$(".vote-up").live('click', function(e) {
    e.preventDefault();
    ... 
```

如果需要，可以更新 ajax

```
$.ajax({
    url: 'file.php',
    success: function (data) {
        // this is executed when ajax call finished well
        alert('content of the executed page: ' + data);
    },
    error: function (xhr, status, error) {
        // executed if something went wrong during call
        if (xhr.status > 0) alert('got error: ' + status); // status 0 - when load is interrupted
    }
}); 
```

如果您追求简单性而不是可用性，则可以删除错误回调部分，并且可以通过引用[jquery ajax doc](http://api.jquery.com/jQuery.ajax/)添加更多选项。

# c# - 使用正则表达式将一组字符串替换为另一个字符串

> ID：11875978
> 
> 赞同：-1
> 
> 时间：2012-08-09T02:31:23.747
> 
> 标签：c#, regex

我在表单上有一个相当讨厌的字符串：

```
<aa>b</aa><ccc>ddd</ccc> 
```

我想交换所有的标签，`<td>`所以我们会看到这个：

```
<td>b</td><td>ddd</td> 
```

我怎么能在 C# 中做到这一点？我猜是正则表达式，但已经有一段时间了，所以我需要一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:48:43.247

```
var startTag = new Regex(@"\<(?<tag>\w+)\s*\>");
var endTag = new Regex(@"\<\/\w+\>");
var result = startTag.Replace("<aa>b</aa><ccc>ddd</ccc>", "<td class=\"${tag}\">");
result = endTag.Replace(result,"</td>"); 
```

MSDN 上的正则表达式替换[http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx#Named](http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx#Named)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:06:19.960

很久以前，我因 Kessel 系统中的一些有限自动机而失去了我的正则表达式黑带。

看起来您正在尝试修改一些类似 XML 的结构。元素值中是否有可能包含 CDATA 记录？如果是这样，在 CDATA 部分内*不进行替换所需的正则表达式可能远高于我的工资等级。*否则，@Charlie 似乎有一个很好的答案！

如果可能存在包含内部标记的 CDATA 记录，则您可以将字符串作为 XML 使用并以这种方式对其进行操作。根据您的示例，我将字符串片段包装在单个根元素中，以便将其解析为 XElement，然后在重命名所有节点后将其解包。我敢肯定，它不如某些 7-th dan regex-fu 大师聪明，但可能会对您有所帮助。

**编辑**：基于希望输出字符串是这样的： `<td class='aa'>b</td><td class='ccc'>ddd</td>`，那么 XML 处理绝对是要走的路，恕我直言。

```
var s = @"<aa>b</aa><ccc>ddd</ccc>";

var prefix = "<wrapper>";
var suffix = "</wrapper>";
var wrapped = prefix + s + suffix;

var wrapper = XElement.Parse(wrapped);
foreach (var e in wrapper.Descendants())
{
    e.Add(new XAttribute("class", e.Name));
    e.Name = "td";
}

wrapped = wrapper.ToString(SaveOptions.DisableFormatting);

// extract the resulting string from the root element
var result = wrapped.Substring(prefix.Length, wrapped.Length - (prefix.Length + suffix.Length));

Console.WriteLine(result);  // --> "<td class=\"aa\">b</td><td class=\"ccc\">ddd</td>" 
```

这产生`<td class="aa">b</td><td class="ccc">ddd</td>`

不幸的是，我不知道如何让 XElement 为属性值生成单引号而不是双引号。但是，两者都是有效的 XML，所以也许没关系。

# youtube - 使用外部程序播放 Flash 视频/流媒体

> ID：11875983
> 
> 赞同：-1
> 
> 时间：2012-08-09T02:31:55.037
> 
> 标签：youtube, fullscreen, cpu, flash

这个问题的标题有点棘手。我需要知道的是是否可以在 Windows 上使用一些可以播放来自网站的 Flash 视频的程序。

我会解释为什么。我有第二台在 Windows XP 上运行速度非常慢的计算机（英特尔迅驰）。如果我尝试全屏观看在线视频（即 YouTube），它会吃掉 CPU，播放速度极慢，甚至最终会使计算机发热，导致计算机关机。

我知道一些手机（尤其是摩托罗拉 ex118）可以用自己的播放器播放 YouTube 视频，所以这是可能的。对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:03:36.140

有可以播放 Flash 视频的 AIR 应用程序。Adobe 曾经有一个在 AIR 上运行的软件：http: [//www.adobe.com/products/mediaplayer/](http://www.adobe.com/products/mediaplayer/)，但它看起来已经停产了。无论如何，你有几个选择。

1.  构建自己的在 Adob​​e AIR 中运行的 flv 播放器实际上并不难。有一些项目与 OSMF 相关联，您可以通过这些项目提供 flv。此外，还有一些浏览器插件（主要用于 firefox）可以从站点抓取 flv 文件，即使它们是流式传输的。
2.  谷歌桌面flv播放器。我发现这是第一个结果（http://www.wimpyplayer.com/products/wimpy_standalone_flv_player.html）

最后要注意的是，如果文件是 mp4，则有更多的播放器可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:56:37.520

可能是您的后台运行程序使您的 cpu 高首先停止运行更新和程序并提高 YouTube 中的视频流速度，必须注意删除第三方工具栏并优化互联网连接。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:23:44.143

你说得很好——闪存会吃掉 CPU。这就是为什么 Apple 和其他移动开发人员不在移动设备上支持它的原因。如果您在运行简单的闪存对象时观察 CPU 使用率，您会注意到您的 CPU 使用率超出了屋顶，这会将您的旧笔记本电脑加热到它会自行关闭以防止损坏其内部组件。（也使用大量的电源/耗尽移动设备的电池）您需要的是一种替代闪光灯的解决方案，而不是另一种观看闪光灯电影的方式。

If you're only attempting youTube I recommend uninstalling your flash player entirely. The way youTube codes their videos is: if Flash is not present it will serve the video via an HTML5 player, which may or may not have the same problem in fullscreen mode. Another thing to consider is something like an extension or plugin for chrome or firefox. There are countless of these that will isolate the flash video on the site you're on and let you download, and possibly convert it to another format. First google search i did returned this: [https://addons.mozilla.org/en-US/firefox/addon/video-downloadhelper/](https://addons.mozilla.org/en-US/firefox/addon/video-downloadhelper/)

One more suggestion: a laptop cooling pad. these have a fan or two on them, usually powered by your computer's USB (not sure if they're USB 1.0 or 2.0 and that may be an issue with a computer running a Centrino processor). They actually do help, my macbook pro gets super hot, and a simple cooling pad with two fans helps disperse that heat a lot for me.

If none of these suggestions work, sadly, you may have to simply avoid full screen... the internet couldn't imagine full screen internet streaming when the Centrino came out, so it may just be time to put down that old boy.

hope that helps, and good luck!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-22T18:57:52.120

There is a nice Greasemonkey script called "[Linterna Mágica](http://linternamagica.org/)" that does that.

# wcf - WCF Net.tcp VS SqlServer 在网上

> ID：11875984
> 
> 赞同：0
> 
> 时间：2012-08-09T02:32:11.133
> 
> 标签：wcf, sql-server-2008, net.tcp

我正在开始一个新项目，在那里我将拥有一台服务器。我对使用 WCF net.tcp、在服务器端使用 Windows 服务或从网络直接访问的 sql server 实现存在疑问。

我很想使用 wcf，但我不知道它们之间的性能。

系统会有大量的报表和交易流程。

我会很感激任何建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:18:26.983

当您为具有报告和事务处理的项目设计解决方案时，选择 WCF 服务及其绑定是考虑因素之一。如果您在 Intranet 内部使用，带有 net.tcp 绑定的 WCF 服务很好，因为它很快。

您还应该考虑其他方面。

1.  显示报告的机制是什么？
2.  生成报告的数据量是多少？
3.  您的数据库服务器的硬件配置是什么？
4.  该服务的用户并发数是多少？
5.  事实上数据库设计是一个主要考虑因素。

# c# - 缓存管理的最佳实践

> ID：11875987
> 
> 赞同：0
> 
> 时间：2012-08-09T02:32:32.390
> 
> 标签：c#, caching

我想使用 AOP 将缓存功能应用于我网站中 BLL 层的所有方法。就像下面这样：

```
[Cacheable(new string[] { "id" }, GroupName = "UserInfoByID", LiveTime = "00:05:00")]
public UserInfo GetUserInfoByID(int id)
{
    return UserDAO.GetUserInfo(id);
} 
```

属性的第一个参数`Cacheable`确定方法的哪个参数将用于创建缓存键。第二个参数`GroupName`计算出缓存键的前缀。如上例，将生成一个key-“UserInfoByID(123)”（假设查询id为123）。我创建另一个属性：

```
[PurgeCache(new string[] { "userInfo.ID" }, GroupName = "UserInfoByID")]
public void UpdateUserInfo(UserInfo userInfo)
{
    UserDAO.UpdateUserInfo(userInfo);
} 
```

它将使用 userInfo.ID 和相同的 GroupName-`UserInfoByID`来生成相同的键来清除缓存：`UserInfoByID(123)`。使用起来简单又优雅吗？然而，有一个非常棘手的问题。我有另一种方法：

```
public void ManageUser(int[] userID, int status)
{
    UserDAO.ManageUser(userID, status);
} 
```

该方法用于更改用户的状态。执行后如何刷新缓存？`int[] userID`我应该一一生成密钥并清除所有密钥吗？考虑到高性能缓存是否过于复杂，即使它只是一个非常简单的案例。假设我有一个列表查询方法：

```
[Cacheable(new string[] { "regionID" }, GroupName = "UserList", LiveTime = "00:05:00")]
public List<UserInfo> GetUserList(int regionID)
{
    List<UserInfo> result = UserDAO.GetUserList(regionID);
    return result;
} 
```

如果我将用户的状态更改为已停用，如何刷新上述方法的缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:43:06.730

前段时间我构建了一个小型 aop 缓存[固件 MbCache](http://code.google.com/p/mbcache/)，在那里我决定让失效成为“显式”操作而不是配置问题。让事情变得容易多了。

即使这个 fw 使用代码配置而不是属性（由于不同的原因，我不太喜欢这个属性 - 个人意见），但我想这同样适用于此。您可能应该删除您的 PurgeCacheAttribute ，而是让它成为一些运行时操作/方法？

这就是在 MbCache 中进行[失效](http://code.google.com/p/mbcache/wiki/Invalidate)的方式，也许这会给你一些想法？

# c++ - 这是使用 sizeof...() 运算符的错误吗？

> ID：11875988
> 
> 赞同：2
> 
> 时间：2012-08-09T02:32:40.657
> 
> 标签：c++, compiler-construction, sizeof, variadic-templates

我遇到了来自 clang++ 编译器的 sizeof...() 运算符的奇怪行为：

```
template <typename... Args>
void test(tuple<Args...> t) {
    cout << "size: " << sizeof...(Args) << endl;
}

...
test(make_tuple(1, 2)); // prints 'size: 10' 
```

我意识到更标准的方法是：

```
template <typename... Args>
void test(tuple<Args...> t) {
   cout << "size: " << tuple_size<tuple<Args...> >::value << endl;
}

test(make_tuple(1, 2)); // prints 'size: 2' 
```

但我仍然很好奇为什么我会得到第一个版本的奇怪值。在这种情况下 sizeof...() 的值是未定义的，还是编译器行为不端？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T02:47:26.370

这听起来很像旧的可变参数模板仿真和真正的可变参数模板之间的不匹配。

在可变参数模板出现之前，人们可以使用有限数量的默认模板参数来模拟它们：

```
struct void_ {}; // marker type not used anywhere else

template <typename T0 = void_,
          typename T1 = void_,
          typename T2 = void_,
          typename T3 = void_,
          typename T4 = void_,
          typename T5 = void_,
          typename T6 = void_,
          typename T7 = void_,
          typename T8 = void_,
          typename T9 = void_>
struct tuple { /* blah blah magic here */ }; 
```

这允许一个人写入`tuple<int>`、 和`tuple<int, double>`，依此类推，最多十个参数。

`tuple_size`然后可以通过计算第一个之前的模板参数的数量来实现`void_`。其余的功能集以类似的方式实现。

可悲的是，这个技巧与真正的可变参数模板的交互非常差。给定时`tuple<int, double>`，类型推导`tuple<Args...>`将推导出`Args`包为 { int, double, void_, void_, void_, void_, void_, void_, void_, void_ }。这就是`sizeof...(Args)`返回 10 的原因：该包中确实有 10 种类型，即使其中 8 种只是我们决定赋予“此处无类型，继续前进”含义的标记。

编译器不知道我们的约定，所以它计算一切。`tuple_size`知道这个约定并且只计算我们关心的实际类型。

# javascript - Google Apps 脚本中的格式化日期

> ID：11875989
> 
> 赞同：4
> 
> 时间：2012-08-09T02:32:48.990
> 
> 标签：javascript, datetime, google-apps-script

提交表单时，我正在尝试获取带有简单格式日期的电子表格，但是所有日期（包括时间戳）都被发布为“1969 年 12 月 31 日下午 2:00”......我做错了什么？任何帮助将不胜感激。

```
function formSubmitReply(e) {
  var sheet = SpreadsheetApp.getActiveSheet();
  var row = sheet.getActiveRange().getRowIndex();
  var lastRow = sheet.getLastRow();
  // Set the status of a new ticket to 'New'.

  sheet.getRange(lastRow, getColIndexByName("Status")).setValue("New");

  var ticketTime = sheet.getRange(row, getColIndexByName("Timestamp")).getValue();

  var subdate = Utilities.formatDate(new Date(ticketTime), "GMT-10", "EEE MM/dd/yyyy 'at' h:mm a");
  sheet.getRange(lastRow, getColIndexByName("Timestamp")).setValue(subdate);

  var sDate = sheet.getRange(row, getColIndexByName("Start Date")).getValue();
  var strtdate = Utilities.formatDate(new Date(sDate), "GMT-10", "EEE, MMM dd, yyyy");
  sheet.getRange(lastRow, getColIndexByName("Start Date")).setValue(strtdate);

  var sTime = sheet.getRange(row, getColIndexByName("Start Time")).getValue();
  var strttime = Utilities.formatDate(new Date(sTime), "GMT-10", "h:mm");
  //sheet.getRange(lastRow, getColIndexByName("Start Time")).setValue(strttime);

  var eDate = sheet.getRange(row, getColIndexByName("End Date")).getValue();
  var enddate = Utilities.formatDate(new Date(eDate), "GMT-10", "EEE, MMM dd, yyyy");
  sheet.getRange(lastRow, getColIndexByName("End Date")).setValue(enddate);

  var eTime = sheet.getRange(row, getColIndexByName("End Time")).getValue();
  var endtime = Utilities.formatDate(new Date(eTime), "GMT-10", "h:mm");
  //sheet.getRange(lastRow, getColIndexByName("End Time")).setValue(endtime);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:20:50.437

我认为电子表格中的“日期”不是日期对象，它们只是字符串，JavaScript 将其评估为 0，这就是为什么你得到“原点”（又名纪元）的日期值减去 GMT 偏移量......取决于如何这些值出现在单元格中，对此可能有不同的解决方案。您能否展示示例数据并说明它们是如何创建的？

要检查我的猜测是否正确，您可以简单地尝试使用电子表格界面更改“日期”单元格的显示格式。如果您可以在那里更改并获得一致的结果，那么我错了......如果不是......好吧，我想我是对的:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-25T23:06:14.473

我建议回顾一下：

[https://developers.google.com/apps-script/reference/utilities/utilities?hl=es#formatDate(Date,String,String)](https://developers.google.com/apps-script/reference/utilities/utilities?hl=es#formatDate(Date,String,String))

格式模式如下：

[http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

还有一个可以帮助你的例子

Utilities.formatDate(thisFile.getLastUpdated(),"GMT-5", "yyyy/MM/dd, HH:mm:ss")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-19T23:31:48.067

此代码采用带有“时间戳”的第一行的日期，即`new Date ("TimeStamp")`它返回错误的日期，因为 getRowIndex 返回 1：

```
function formSubmitReply(e) {
  var sheet = SpreadsheetApp.getActiveSheet();
  var row = sheet.getActiveRange().getRowIndex();
  //try to increment row as below to get row 2
  row++;
  var lastRow = sheet.getLastRow();
  //increment last row to write to new row to observe new date
  lastRow++;
  // Set the status of a new ticket to 'New'.

  sheet.getRange(lastRow, getColIndexByName("Status")).setValue("New");

  var ticketTime = sheet.getRange(row, getColIndexByName("Timestamp")).getValue();

  var subdate = Utilities.formatDate(new Date(ticketTime), "GMT-10", "EEE MM/dd/yyyy 'at'   h:mm a");
  //use log window select views-> logs to see your output
  Logger.log("subdate : "+subdate);
  sheet.getRange(lastRow, getColIndexByName("Timestamp")).setValue(subdate);

  var sDate = sheet.getRange(row, getColIndexByName("Start Date")).getValue();
  var strtdate = Utilities.formatDate(new Date(sDate), "GMT-10", "EEE, MMM dd, yyyy");
  sheet.getRange(lastRow, getColIndexByName("Start Date")).setValue(strtdate);

  var sTime = sheet.getRange(row, getColIndexByName("Start Time")).getValue();
  var strttime = Utilities.formatDate(new Date(sTime), "GMT-10", "h:mm");
  //sheet.getRange(lastRow, getColIndexByName("Start Time")).setValue(strttime);

  var eDate = sheet.getRange(row, getColIndexByName("End Date")).getValue();
  var enddate = Utilities.formatDate(new Date(eDate), "GMT-10", "EEE, MMM dd, yyyy");
  sheet.getRange(lastRow, getColIndexByName("End Date")).setValue(enddate);

  var eTime = sheet.getRange(row, getColIndexByName("End Time")).getValue();
  var endtime = Utilities.formatDate(new Date(eTime), "GMT-10", "h:mm");
  //sheet.getRange(lastRow, getColIndexByName("End Time")).setValue(endtime);
}

//enter code here 
```

# ios - 将缩放级别转换为区域跨度

> ID：11875991
> 
> 赞同：1
> 
> 时间：2012-08-09T02:33:11.033
> 
> 标签：ios, objective-c, mapkit, mkmapview, zooming

我想出了如何从 [http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/](http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/)计算地图的当前缩放级别（该博客的第一条评论） ，但它给了我一个介于 0 和 20 之间的值，而`region.span`具有诸如`0.1f, 0.01f`etc之类的值。

我想计算当前的缩放级别，然后如果用户进行“长按”，则必须删除注释。除了硬编码以下内容外，我什么都做了：

```
region.span.longitudeDelta = 0.2f;
region.span.latitudeDelta = 0.2f; 
```

因此`0.2f`，我想输入一个从缩放级别（0-20 之间）获得的数字，而不是 。那么有没有办法进行这种转换？

是这样做的吗？

```
(Current Zoom Level Output/Maximum Zoom Level); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:16:25.530

我用谷歌搜索了你的确切问题，第二个结果在这里指向 StackOverflow：[MKMapView Zoom and Region](https://stackoverflow.com/questions/1166444/mkmapview-zoom-and-region)，它有一个非常详细的答案。简短的版本是：尝试使用 [mapview region].span.latitudeDelta 和 longitudeDelta。

参考： http: [//developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/occ/instp/MKMapView/region](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/occ/instp/MKMapView/region) 和：http: [//developer.apple .com/library/ios/#documentation/MapKit/Reference/MapKitDataTypesReference/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKitDataTypesReference/Reference/reference.html)

# symfony - 尝试在 Symfony 2 中合并两个表单（实体）时出错

> ID：11875994
> 
> 赞同：0
> 
> 时间：2012-08-09T02:33:28.330
> 
> 标签：symfony, doctrine, doctrine-orm

我正在尝试合并两个实体（用户和学生）来创建一个表单，下面是我的 orm 文件

```
Ens\JobeetBundle\Entity\User:
  type: entity
  table: abc_user
  id:
    user_id:       { type: integer, generator: { strategy: AUTO } }
  fields:

    username: { type: string, length: 255, notnull: true, unique: true }
    email:    { type: string, length: 255, notnull: true, unique: true }
    password: { type: string, length: 255, notnull: true }
    enabled:  { type: boolean }
  oneToOne:
    student:
      targetEntity: Ens\JobeetBundle\Entity\Student
      mappedBy: user

Ens\JobeetBundle\Entity\Student:
  type: entity
  table: abc_student
  id:
    student_id: { type: integer, generator: { strategy: AUTO } }        
  fields:
    first_name: { type: string, length: 255, notnull: true }
    middle_name: { type: string, length: 255 }
    last_name: { type: string, length: 255, notnull: true }
  oneToOne:
    user:
      targetEntity: Ens\JobeetBundle\Entity\User
      joinColumn:
        name: user_id
        referencedColumnName: user_id 
```

创建实体和更新方案工作正常，

```
php app/console doctrine:generate:entities EnsJobeetBundle

php app/console doctrine:database:update --force 
```

但是当试图产生crud时

```
php app/console generate:doctrine:crud --entity=EnsJobeetBundle:Student 
```

我最终遇到以下错误，

```
[RuntimeException]

The CRUD generator expects the entity object has a primary key field named "id" with a getId() method. 
```

有谁知道如何摆脱这个？如何在 Symfony 2 中合并两个表单？

任何帮助都感激不尽...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:39:33.753

这是因为 CRUD 生成器不支持自定义的 id，例如 student_id 等...参见[代码](https://github.com/sensio/SensioGeneratorBundle/blob/master/Generator/DoctrineCrudGenerator.php#L69-71)。如下所示，如果 id 不在您的实体中，您将收到运行时异常。

```
//....
if (!in_array('id', $metadata->identifier)) 
{
    throw new \RuntimeException('The CRUD generator expects the entity object has a primary key field named "id" with a getId() method.');
}
//.... 
```

您必须在模型中重命名您的自定义 ID：

**用户：**

```
protected $id;

public function getId()
{
    return $this->id;
} 
```

**学生：**

```
protected $id;

public function getId()
{
    return $this->id;
} 
```

# sql-server - 如何使用游标填充存储过程

> ID：11875996
> 
> 赞同：0
> 
> 时间：2012-08-09T02:33:53.517
> 
> 标签：sql-server, tsql, stored-procedures

我想使用游标从存储过程中检索结果。请查看以下存储过程。

```
CREATE PROCEDURE Test
@ID INT
AS 
BEGIN

        DECLARE @Name VARCHAR(400);
        DECLARE ACursor CURSOR FOR EXEC AStoredProcedure @ID

    OPEN ACursor;
    FETCH NEXT FROM ACursor INTO @Name;

        WHILE @@FETCH_STATUS = 0
        BEGIN
            PRINT @NAME
        END
    CLOSE ACursor;
    DEALLOCATE ACursor;

END 
```

我有这个错误。但我想这样使用。我怎样才能做到这一点？

PS。我无法为存储过程插入 EXEC 语句。因为存储过程已经使用了这个语句，我不想​​对这个存储过程做任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:03:07.670

您忘记在循环中获取下一行：

```
CREATE PROCEDURE Test
@ID INT
AS 
BEGIN

        DECLARE @Name VARCHAR(400);
        DECLARE ACursor CURSOR FOR EXEC AStoredProcedure @ID

    OPEN ACursor;
    FETCH NEXT FROM ACursor INTO @Name;

        WHILE @@FETCH_STATUS = 0
        BEGIN
            PRINT @NAME
            FETCH NEXT FROM ACursor INTO @Name;
        END
    CLOSE ACursor;
    DEALLOCATE ACursor;

END 
```

这应该重写为：

```
 OPEN ACursor;
    WHILE 1 = 1
    BEGIN
        FETCH NEXT FROM ACursor INTO @Name;

        IF @@FETCH_STATUS <> 0
        BEGIN
            BREAK
        END
        PRINT @NAME
    END
    CLOSE ACursor;
    DEALLOCATE ACursor; 
```

这样`fetch`，您的代码中只有一个。现在很难忘记它，您也不必将添加到游标查询的列分别附加到每个提取中。

光标是邪恶的，但有时是必要的。为了加快它们的使用`fast_forward`和`static`关键字，并使用`local`以便代码中的错误不会留下打开的光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:49:41.110

您需要为@ID 指定数据类型，可能是@ID INT

# wcf - 当操作指定了 UriTemplate 时，使用 WebChannelFactory 访问 WCF REST 操作

> ID：11875999
> 
> 赞同：0
> 
> 时间：2012-08-09T02:34:23.753
> 
> 标签：wcf, rest, uritemplate, webchannelfactory

根据下面的代码片段，我有一个 WCF Rest 服务

```
[ServiceContract]
public interface IService
{
     [OperationContract]
        [WebInvoke(UriTemplate="/SaveList/Foos/",Method="POST")]
        bool SaveList(List<Foo> myFoos);

} 
```

该服务是自托管服务，并使用 webHttpBinding 公开一个端点。我有一个客户端控制台应用程序，它具有以下代码片段：

```
public void Send()
{
   var myObj = new Foo{Id=1, Name="Test"};
   using (WebChannelFactory<OurService.Services.IOurService> cf = new WebChannelFactory<IOurService>("WebHttpBinding_IService"))
   {
       IUtranetService channel = cf.CreateChannel();
       using (new OperationContextScope(channel as IContextChannel))
       {
           var status = channel.SaveList(new[] { myObj });

        }

    }

} 
```

客户端代码抛出如下异常：在“http://localhost:1133/Service/SaveList”处没有监听可以接受消息的端点。

我不确定我哪里出错了。如果我从服务合同中删除 UriTemplate，客户端会返回正确的响应。

任何帮助将不胜感激。

问候鲁奇特拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:32:03.900

您的 URI 模板不正确。您需要将其更改为：

```
 [WebInvoke(UriTemplate="/SaveList/Foos/SaveList",Method="POST")] 
```

它不会自动附加您的方法名称。

另外根据我留下的评论仅供参考，您不需要 Method="Post"