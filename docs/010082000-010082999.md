# StackOverflow 问答 10082000-10082999

# neural-network - 何时开始使用反向传播神经网络中的选择集？

> ID：10082003
> 
> 赞同：1
> 
> 时间：2012-04-10T01:31:42.067
> 
> 标签：neural-network, backpropagation

ANN 初学者：

我正在实施一个反向传播神经网络来预测黄金价格。我知道我必须将我的数据拆分为训练数据、选择数据和测试数据。

但是我不确定如何继续使用这些数据集。起初我用我的训练集训练数据网络，然后在训练之后，我从测试集中获得了我的网络的一些输入，并比较了输出。

我不确定我是否做对了，选择集是否进来了？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:04:08.713

总体思路是：

1.  在训练集上训练网络一会儿。
2.  在第二组（通常称为验证集）上评估网络。可能是您所说的选择集。
3.  在训练集上对网络进行更多训练。
4.  再次评估选择集上的新网络。
5.  旧网络和新网络哪个更​​好？如果新网络更好，我们仍然可以从训练中获得一些用处，所以转到 3。如果新网络更差，更多的训练可能只会带来伤害。使用以前版本的网络，因为它做得更好。

通过这种方式，您可以知道何时停止训练。

对此的一个简单修改是始终跟踪迄今为止看到的最佳网络，并且只有当我们看到一些（例如，三个）训练尝试连续表现更差时，我们才会停止训练。

第三组，即测试集，是必要的，因为选择集（如果间接地）参与了训练过程。最终评估必须对训练期间根本没有使用的数据进行。

这种事情对于简单的实验来说已经足够了，但通常你会想要使用[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)来更好地了解系统的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T04:10:06.707

我想发表评论只是说验证集是模型相关超参数调整的好地方，但我是新来的，因此缺乏这样做的声誉点。为了使这更值得单独发布，我已经包含了我自己的训练验证测试过程的大纲。在实践中，我的工作流程如下：

1.  识别、收集和清理数据。尝试在数据处理过程中限制抱怨。
2.  将数据分成三组：训练、验证、测试。
3.  建立两个“基础”模型，用于评估稍后在流程中构建的更复杂的模型。这些模型中的第一个通常是使用所有可能特征的基本线性/逻辑回归。第二种模型仅使用最明显的信息（信息特征的初始识别取决于用例，通常涉及领域知识、基本聚类、简单相关性的组合）。
4.  开始更多的经验特征选择（即无监督的 NN，但通常是随机森林）并使用训练集制作各种模型的原型。
5.  消除性能不佳的模型以及信息量不足的特征
6.  使用训练集的修改版本（相同的数据，但没有信息量不足的特征）比较剩余模型与“基础”模型的性能。抛弃表现不佳的模型。
7.  使用验证集，为每个模型调整适当的超参数（手动或网格搜索）。进一步减少所考虑的模型数量，理想情况下只需要 2-3 个（不包括基本模型）。
8.  最后，在测试集上评估模型性能（使用优化的超参数）。再次，比较模型之间以及与基础模型。根据特定问题的计算复杂性/成本、易于解释/透明度/“可解释性”以及相对于基础模型的改进和/或性能的适当组合做出最终模型选择。

# android - 在屏幕旋转时保留 ActivityGroup 子活动的状态

> ID：10082008
> 
> 赞同：5
> 
> 时间：2012-04-10T01:32:36.773
> 
> 标签：android, orientation, state, orientation-changes

我在 TabHost 的选项卡中有一个 ActivityGroup，并且该 ActivityGroup 有多个子活动。

旋转设备时，选项卡不会保留其状态（我知道在方向更改时会重新启动活动）。

保持屏幕旋转之前显示的 ActivityGroup 子活动状态的最佳做法是什么？

请注意，我可能需要保留 ActivityGroup 的每个子活动的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:35:34.383

我在 AndroidManifest 中使用以下内容来保存视图以免被破坏，但它不起作用：

```
 android:configChanges="orientation" 
```

我刚刚通过在 AndroidManifest.xml 中更改这一行来解决我的问题：

```
<uses-sdk android:minSdkVersion="11" android:targetSdkVersion="15" /> 
```

至

```
<uses-sdk android:minSdkVersion="11" android:targetSdkVersion="11" /> 
```

似乎我的环境在识别并自动添加它时遇到了不同的目标版本的问题。

# java - 枚举类型设置为 int 数组

> ID：10082024
> 
> 赞同：0
> 
> 时间：2012-04-10T01:35:24.587
> 
> 标签：java, arrays, enums, int

基本上我要做的是根据随机数将迷宫中的每个点设置为特定的枚举类型，即我在迷宫上随机放置 10 个墙，这 10 个空间将是墙枚举类型。这是我到目前为止的代码，我不知道如何让它工作。

```
public enum CellType {
   CHEESE, OPEN, WALL, VISITED, MOUSE
}

public class Cell {

private Color color;
private ImageIcon image;
CellType type;

public Color getColor() {
    return color;
}
public void setColor(Color color) {
    this.color = color;
}
public ImageIcon getImage() {
    return image;
}
public void setImage(ImageIcon image) {
    this.image = image;
}
public CellType getType() {
    return type;
}
public void setType(CellType type) {
    this.type = type;
} 
```

}

```
maze = new int[row][col];       
Random randomMaze = new Random();
for (int ran = 0; ran <= numWalls ; ran++)
    maze[randomMaze.nextInt(maze.length)][randomMaze.nextInt(maze.length)].setType(WALL); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T01:39:42.590

`maze`应该是 s 的二维数组`Cell`，而不是 s 的二维数组`int`。

# couchbase - 获取密钥集？

> ID：10082026
> 
> 赞同：2
> 
> 时间：2012-04-10T01:35:28.693
> 
> 标签：couchbase

当 Fetchinig 多个密钥集时，我可以看到客户端以一个长字符串发出请求并发送到连接的 couchbase 服务器（协议似乎也包括每个密钥的 vbucket 映射）

因此，来自客户端的一个网络调用包含所有密钥，即他们的 vbucketmaps。

服务器如何响应这个请求？

如果连接的服务器具有所有请求的值，那么我希望连接的服务器只提供请求的值。

但是，如果有多个集群，则连接的服务器可能没有请求的密钥。服务器在这种情况下会做什么？我可以看到请求包括 vbucket 映射，由此，我可以预期连接的服务器可以向特定 Key 的主服务器询问其值。这只是我的猜测，我想知道服务器在这种情况下如何响应。

此外，如果存在 Key 会发生什么，但是，由于“服务器忙”或其他一些错误，服务器无法返回该值。

总是感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T23:59:28.533

有两种不同的方式可以发生这种情况，使用 moxi 或不使用 moxi。

无磨西（智能客户端）

客户端与 Couchbase 建立连接，它将首先获取集群中所有服务器的列表和 vbucket 映射。然后它与集群中的每个服务器建立连接。当您执行多操作时，客户端将咨询它包含的 vbucket 映射并确定服务器属于哪个 vbucket。如果我们有三台服务器，那么客户端将最多组合三个多操作，并将每个操作发送到包含该多操作中所有密钥的相应服务器。每个服务器都会响应客户端，客户端会将所有结果放在一起，形成一组结果。

与磨西

在这种情况下，客户端不知道集群或 vbucket 映射，但 moxi 知道。客户端会将所有密钥发送到 moxi，然后 moxi 将负责将它们拆分并将它们发送到适当的服务器。

切断方案：

如果服务器关闭或忙碌，则该服务器特定的多操作中的所有键都将失败。客户端应该向您返回它可以从其他服务器获取的密钥并提醒您错误。

再平衡场景：

在重新平衡期间，请求被发送到错误服务器的可能性很小。在这种情况下，客户端应该在正确的服务器上重试操作。在重新平衡期间，每个客户端都应该收到一个“快进”vbucket 映射，说明重新平衡后所有 vbucket 的位置。它将使用此 vbucket 映射中的服务器进行重试。

# c++ - 如何在 QTreeWidget Header 中添加按钮或其他小部件？

> ID：10082028
> 
> 赞同：3
> 
> 时间：2012-04-10T01:35:49.423
> 
> 标签：c++, qt, button, header, qtreewidget

谁能给我一个提示，告诉我如何在 QTreeWidget 的标题中放置一个按钮 一个最小的例子非常受欢迎？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-10-06T17:14:29.937

对于评论中的人（基本上任何其他可能会因此而停下来的人），这里是以下代码的翻译 python 版本：

```
from PySide2 import QtWidgets, QtCore

import sys

class Header(QtWidgets.QHeaderView):
    def __init__(self, orientation, parent=None):
        super(Header, self).__init__(orientation, parent)

        self.button = QtWidgets.QPushButton('Button text', self)

class TreeWidget(QtWidgets.QTreeWidget):
    def __init__(self, parent=None):
        super(TreeWidget, self).__init__(parent)

        item0 = QtWidgets.QTreeWidgetItem(["Item 0"])
        item1 = QtWidgets.QTreeWidgetItem(["Item 1"])

        self.addTopLevelItem(item0)
        self.addTopLevelItem(item1)
        self.createHeader()

    def createHeader(self):
        header = Header(QtCore.Qt.Horizontal, self)
        self.setHeader(header)

if __name__ == '__main__':
    app = QtWidgets.QApplication(sys.argv)

    w = TreeWidget()
    w.show()
    sys.exit(app.exec_())

#QTreeWidget header is an "stand alone" widget - QHeaderView, so you can set the custom implementation of it. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:52:21.683

```
#include <QTreeWidget>
#include <QTreeWidgetItem>
#include <QHeaderView>
#include <QPushButton>

class Header
    : public QHeaderView
{
public:
    Header(QWidget* parent)
        : QHeaderView(Qt::Horizontal, parent)
        , m_button(new QPushButton("Button", this))
    {
    }

private:
    QPushButton* m_button;
};

class TreeWidget
    : public QTreeWidget
{
    Q_OBJECT
public:
    TreeWidget()
        : QTreeWidget(0)
    {
        QTreeWidgetItem* item0 = new QTreeWidgetItem(QStringList("Item 0"));
        QTreeWidgetItem* item1 = new QTreeWidgetItem(QStringList("Item 1"));
        addTopLevelItem(item0);
        addTopLevelItem(item1);
        createHeader();
    }

private:
    void createHeader()
    {
        m_header = new Header(this);
        setHeader(m_header);
    }

private:
    Header* m_header;

};

int main(int c, char** v)
{
    QApplication a(c, v);

    TreeWidget* tw = new TreeWidget();
    tw->show();

    return a.exec();
}

//QTreeWidget header is an "stand alone" widget - QHeaderView, so you can set the custom implementation of it. 
```

# javascript - 为什么使用 jQuery on() 而不是 click()

> ID：10082031
> 
> 赞同：87
> 
> 时间：2012-04-10T01:36:26.993
> 
> 标签：javascript, jquery

目前使用jQuery，当我需要在点击发生时做某事时，我会这样做......

```
$(".close-box").click( function() {
    MoneyBox.closeBox();
    return false;
}); 
```

我正在查看其他人在项目中的一些代码，他们这样做......

```
$(".close-box").live("click", function () {
    MoneyBox.closeBox();
    return false;
}); 
```

请注意，据我所知，它似乎在做同样的事情，除了他们正在使用现在已弃用的 live() 函数，jQuery 文档说要使用`on()`它，但无论哪种方式，为什么要使用 live/on() 而不是我的第一个示例？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-04-10T01:43:05.980

因为您可能有一个动态生成的元素（例如来自 AJAX 调用），您可能希望拥有之前绑定到同一个元素选择器的相同单击处理程序，然后使用`on()`选择器参数“委托”单击事件

展示：

[http://jsfiddle.net/AJRw3/](http://jsfiddle.net/AJRw3/)

`on()``click()`如果您没有指定选择器，也可以是同义词：

```
$('.elementClass').click(function() { // code 
}); 
```

是同义词

```
$('.elementClass').on('click', function() { // code
}); 
```

从某种意义上说，它只将处理程序一次添加到所有具有 class 的元素`elementClass`。`elementClass`例如，如果您有一个`$('<div class="elementClass" />')`新元素，则处理程序不会绑定在该新元素上，您需要执行以下操作：

```
$('#container').on('click', '.elementClass', function() { // code
}); 
```

假设`#container`是`.elementClass`的祖先

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-04-10T02:08:27.453

有很多答案，每个都涉及几点 - 希望这可以给你答案，并很好地解释什么是什么以及如何使用它。

Using`click()`是`bind('click' ...)`. Using`bind()`在设置事件侦听器时使用 DOM，并将函数绑定到 DOM 中的每个匹配元素。也就是说，如果您使用`$('a').click(...)`，您会将提供的函数绑定到该代码运行时找到的 DOM 中每个锚标记的 click 事件。

使用`live()`是 jQuery 中的旧方法；它被用来绑定事件`bind()`，但它不仅仅在代码运行时将它们绑定到 DOM 中的元素 - 它还监听 DOM 中的更改并将事件绑定到任何未来匹配的元素。如果您正在执行 DOM 操作并且您需要在某些元素上存在一个事件，这些事件可能会在以后被删除/更新/添加到 DOM 但在第一次加载 DOM 时不存在，这很有用。

现在贬值的原因`live()`是因为执行不力。为了使用`live()`，您最初必须能够在 DOM 中选择至少一个元素（我相信）。它还导致运行的函数副本绑定到每个元素 - 如果您有 1000 个元素，那就是很多复制的函数。

The creation of the `on()` function was to overcome those problems. It lets you bind a single event listener to an object that will not change in the DOM (so you can't use `on()` on an element that will be removed/added to the DOM later - bind it to a parent object), and simply apply an element "filter" so that the function is only run when it is bubbled up to an element that matches the selector. This means you have just one function that exists (not a bunch of copies) bound to a single element - a much better approach to adding "live" events in the DOM.

... and that is what the differences are, and why each function exists and why `live()` is depreciated.

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-04-10T01:39:32.310

*   [`$("a").live()`](http://api.jquery.com/live/)--> 它将适用于 all `<a>`，即使它是在调用 this 之后创建的。
*   [`$("a").click()`](http://api.jquery.com/bind/)--> 它只适用于`<a>`调用 this 之前的所有内容。（这是`bind()`, 和`on()`1.7 中的快捷方式）
*   [`$("a").on()`](http://api.jquery.com/on/)--> 提供附加事件处理程序所需的所有功能。（jQuery 1.7 中的最新版本）

[***行情***](http://api.jquery.com)：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。
> 此方法提供了一种将委托事件处理程序附加到页面的文档元素的方法，这在将内容动态添加到页面时简化了事件处理程序的使用。有关更多信息，请参阅 .on() 方法中对直接事件与委托事件的讨论。

> .on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。

> 对于早期版本， .bind() 方法用于将事件处理程序直接附加到元素。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-10T01:42:57.587

`click()`是 的非委托方法的捷径`on()`。所以：

```
$(".close-box").click() === $(".close-box").on('click') 
```

委托事件`on()`，即。在动态创建的对象中，您可以执行以下操作：

```
$(document).on('click', '.close-box') // Same as $('.close-box').live() 
```

但是，`on()`在任何静态元素中引入委托，而不是`document`像`live()`这样，所以：

```
$("#closestStaticElement").on('click', '.close-box') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-10T01:39:14.977

您应该阅读[和](http://www.alfajango.com/blog/the-difference-between-jquerys-bind-live-and-delegate/)[之间的区别`live``bind`](http://www.alfajango.com/blog/the-difference-between-jquerys-bind-live-and-delegate/)。

简而言之，`live`使用事件委托，允许您绑定到现在和将来存在的元素。

相反，通过`bind`（及其快捷方式，如`click`）附加的处理程序将处理程序*直接*附加到与选择器匹配的 DOM 元素，因此只绑定到现在存在的元素。

的灵活性的结果`live`是降低了性能，因此仅在需要它提供的功能时才使用它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-10T01:42:40.800

`$el.click(fn)`是一个捷径`$el.on('click', fn)`

有关详细信息，请参阅[http://api.jquery.com/click/](http://api.jquery.com/click/)和[http://api.jquery.com/on/](http://api.jquery.com/on/)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-10T01:41:12.657

当您需要绑定一些事件处理程序时，`dynamically added elements`您必须使用`live`（已弃用）或`on`使其工作。根本`$('element').click(...);`不会处理任何动态添加到 DOM 中的元素。

更多关于[jQuery 的 .bind()、.live() 和 .delegate() 之间的区别](http://www.alfajango.com/blog/the-difference-between-jquerys-bind-live-and-delegate/)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-10T01:39:48.663

$.click() 只是绑定或打开的快捷方式。来自 jQuery 文档：

> 在前两个变体中，此方法是 .bind("click", handler) 的快捷方式，以及 jQuery 1.7 中的 .on("click", handler) 的快捷方式。在第三个变体中，当不带参数调用 .click() 时，它是 .trigger("click") 的快捷方式。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-10T01:46:05.963

该`.on()`方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。该`click()`方法将事件处理程序绑定到“click”JavaScript 事件，或在元素上触发该事件。

如果`.click(...`选择器的目标即时更改（例如通过一些 ajax 响应），那么您需要再次分配行为。

这`.on(...`是非常新的（jQuery 1.7），它可以使用委托事件覆盖实时场景，无论如何这是一种更快的附加行为方式。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-18T11:54:09.703

In `on` method, event handler is attached to the parent element instead of target.

example: `$(document).on("click", ".className", function(){});`

In above example, click event handler is attached to document. And it uses event bubbling to know whether someone clicked on the target element.

# ios - 我需要帮助来破译这个堆栈跟踪

> ID：10082038
> 
> 赞同：0
> 
> 时间：2012-04-10T01:37:15.703
> 
> 标签：ios

在运行我的 ios 应用程序时，用户遇到了以下错误。它只发生过一次，我无法弄清楚如何重复错误。有人可以解释以下堆栈跟踪以帮助我找到错误的原因。

```
Signal 
```

未知信号堆栈跟踪 (9)

```
0 LeadsBoard 0x0001b5f2 testflight_backtrace + 142
1 LeadsBoard 0x0001c180 TFSignalHandler + 212
2 libsystem_c.dylib 0x3419d72e _sigtramp + 42
3 libsystem_c.dylib 0x341923ba pthread_kill + 58
4 libsystem_c.dylib 0x3418abfe abort + 78
5 libsystem_c.dylib 0x3419e828 szone_error + 216
6 libsystem_c.dylib 0x341a4f0e szone_realloc + 66
7 libsystem_c.dylib 0x341c60e6 malloc_zone_realloc + 62
8 Foundation 0x3486bcf4 NSZoneRealloc + 32
9 Foundation 0x3486bb40 _NSMutableDataGrowBytes + 336
10 Foundation 0x3486b96c -[NSConcreteMutableData appendData:] + 80
11 LeadsBoard 0x0000fd90 -[DataModelPeopleClass connection:didReceiveData:] (DataModelPeopleClass.m:152)
12 Foundation 0x3486b8f6 -[NSURLConnection(NSURLConnectionReallyInternal) sendDidReceiveData:originalLength:] + 150
13 Foundation 0x3486b822 _NSURLConnectionDidReceiveData + 90
14 CFNetwork 0x35a7406c _ZN19URLConnectionClient21_clientDidReceiveDataEPK8__CFDataPNS_26ClientConnectionEventQueueE + 172
15 CFNetwork 0x35a68fb4 _ZN19URLConnectionClient26ClientConnectionEventQueue33processAllEventsAndConsumePayloadEP20XConnectionEventInfoI12XClientEvent18XClientEventParamsEl + 212
16 CFNetwork 0x35a68e36 _ZN19URLConnectionClient13processEventsEv + 70
17 CFNetwork 0x35a68de8 _ZN13URLConnection24multiplexerClientPerformEP18RunLoopMultiplexer + 36
18 CFNetwork 0x35a68d5a _ZN17MultiplexerSource7performEv + 126
19 CFNetwork 0x35a68cd8 _ZN17MultiplexerSource8_performEPv + 8
20 CoreFoundation 0x36487a78 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
21 CoreFoundation 0x3648975e __CFRunLoopDoSources0 + 382
22 CoreFoundation 0x3648a4ea __CFRunLoopRun + 230
23 CoreFoundation 0x3641aec2 CFRunLoopRunSpecific + 230
24 CoreFoundation 0x3641adca CFRunLoopRunInMode + 58
25 GraphicsServices 0x35bd441e GSEventRunModal + 114
26 GraphicsServices 0x35bd44ca GSEventRun + 62
27 UIKit 0x352c4d68 -[UIApplication _run] + 404
28 UIKit 0x352c2806 UIApplicationMain + 670
29 LeadsBoard 0x000020fc main (main.m:14)
30 LeadsBoard 0x000020c7 start + 39 
```

环境

```
Device Name: iPhone
Model: iPhone 4
Version: 4.3.5
Language: en_AU (English)
Carrier: Virgin Mobile
Timezone: AEST
Architecture: armv7
Connection State: Wifi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T01:45:07.593

检查您的`NSURLConnection`代表，特别是在`DataModelPeopleClass`.

# c++ - 基于模板类及其子类的函数调用接收错误

> ID：10082040
> 
> 赞同：0
> 
> 时间：2012-04-10T01:37:29.140
> 
> 标签：c++, templates, visual-c++, inheritance

```
1>main.obj : error LNK2019: unresolved external symbol "public: virtual bool __thiscall LinkedSortedList<int>::getfirst(int &)" (?getfirst@?$LinkedSortedList@H@@UAE_NAAH@Z) referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol "public: virtual void __thiscall LinkedSortedList<int>::clear(void)" (?clear@?$LinkedSortedList@H@@UAEXXZ) referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol "public: virtual void __thiscall LinkedSortedList<int>::print(void)const " (?print@?$LinkedSortedList@H@@UBEXXZ) referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol "public: virtual bool __thiscall LinkedSortedList<int>::insert(int)" (?insert@?$LinkedSortedList@H@@UAE_NH@Z) referenced in function _main
1>main.obj : error LNK2001: unresolved external symbol "public: virtual bool __thiscall LinkedSortedList<int>::find(int)const " (?find@?$LinkedSortedList@H@@UBE_NH@Z)
1>main.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall LinkedSortedList<int>::size(void)const " (?size@?$LinkedSortedList@H@@UBEHXZ)
1>c:\users\chris\documents\visual studio 2010\Projects\lab0\Debug\lab0.exe : fatal error LNK1120: 6 unresolved externals 
```

这是我在尝试编译我的代码时收到的。我已经把它缩小到（我相信）这里的这段代码：

```
#ifndef _LinkedSortedListClass_
#define _LinkedSortedListClass_

    #include "LinkedNode.h"
    #include "SortedList.h"

    template <class Elm>
    class LinkedSortedList: public SortedList<int> {    
    public:

        void clear();

        bool insert(Elm newvalue);

        bool getfirst(Elm &returnvalue);

        void print() const;

        bool find(Elm searchvalue) const;

        int size() const;

    private:
            LinkedNode<Elm>* head;
    };

    #endif 
```

这是 SortedList 的子类，就是这样，以防万一。

```
#ifndef _SortedListClass_
#define _SortedListClass_

template <class Elm> class SortedList {
public:

  // -------------------------------------------------------------------
  // Pure virtual functions -- you must implement each of the following
  // functions in your implementation:
  // -------------------------------------------------------------------

  // Clear the list.  Free any dynamic storage.
  virtual void clear() = 0;          

  // Insert a value into the list.  Return true if successful, false
  // if failure.
  virtual bool insert(Elm newvalue) = 0;

  // Get AND DELETE the first element of the list, placing it into the
  // return variable "value".  If the list is empty, return false, otherwise
  // return true.
  virtual bool getfirst(Elm &returnvalue) = 0;

  // Print out the entire list to cout.  Print an appropriate message
  // if the list is empty.  Note:  the "const" keyword indicates that
  // this function cannot change the contents of the list.
  virtual void print() const = 0;

  // Check to see if "value" is in the list.  If it is found in the list,
  // return true, otherwise return false.  Like print(), this function is
  // declared with the "const" keyword, and so cannot change the contents
  // of the list.
  virtual bool find(Elm searchvalue) const = 0;

  // Return the number of items in the list
  virtual int size() const = 0;
};

#endif 
```

非常感谢您的帮助；我们的最后一堂课没有教我们任何继承，但这是这门课的项目#1，这里也没有教继承，所以这对我来说都是触手可及的，尽管我设法在谷歌上查找了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:39:29.890

你的方法没有定义。所以链接器抱怨，因为它不能链接到他们的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T14:02:15.683

如果您将函数的定义放在头文件中，也许会有所帮助。这使编译器更容易解析这些外部符号。

我希望这将有所帮助。

问候， Philinator

# visual-studio-2010 - 与 TFS 的初始连接非常慢

> ID：10082041
> 
> 赞同：4
> 
> 时间：2012-04-10T01:37:37.607
> 
> 标签：visual-studio-2010, tfs

我们在专用机器上运行 TFS 2010。SQL 数据库也在同一台机器上运行，因此那里没有外部 LAN/WAN 访问。

当我们从 TFS 签入/签出或获取任何东西时 - 初始连接和 VS 不活动后的任何连接都非常慢，有时长达 1 或 2 分钟。一旦它完成了它必须做的任何事情，事情就会开始快速运行并且没有任何问题。

我应该检查什么/在哪里找到这个瓶颈，或者在不活动后关闭的任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:15:15.843

我认为它类似于 SQL Server 报告服务。当它处于非活动状态一段时间（20 分钟？）时，工作进程进入睡眠状态并且唤醒时间相当长。 [SSRS 2008 - 如果一段时间不活动，则长时间延迟](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/d14aebe3-40b8-444d-bfac-b62b27543936)，[如何在首次运行时加速 MS SQL Server Reporting Services SSRS](http://www.mssqltips.com/sqlservertip/2197/how-to-speed-up-ms-sql-server-reporting-services-ssrs-on-first-run/)。TFS web 服务应该有类似的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:48:58.800

我怀疑这是您遇到的传统 ASP.NET 唤醒管道。如果您想尝试设置运行的计划任务，`PingTFS.exe`那么它将保持站点加载，这样您就不会在每次 TFS Web 服务冷却时看到此初始命中。

*   您可以`PingTFS.exe`在这里找到 Neno Loje： [https ://msmvps.com/blogs/vstsblog/archive/2011/03/02/how-to-ping-tfs-to-see-if-it-s-up-and -运行.aspx](https://msmvps.com/blogs/vstsblog/archive/2011/03/02/how-to-ping-tfs-to-see-if-it-s-up-and-running.aspx)

如果这没有帮助，那么很可能是环境中的硬件。您绝对不希望 TFS 环境的资源太少。如果第一个建议不起作用，请告诉我们。

# c - 单击鼠标时绘制多边形

> ID：10082050
> 
> 赞同：0
> 
> 时间：2012-04-10T01:38:39.990
> 
> 标签：c, opengl, glut

考虑这段代码：

```
#include <stdlib.h>
#include <stdarg.h>
#include <GLUT/GLUT.h>
#include <OpenGL/OpenGL.h>

double width=600;
double height=600;

void processMouse(int button, int state, int x, int y)
{
    glColor4f(1.0,0.0,0.0,0.0);
    glBegin(GL_POLYGON);
    glVertex3f(0.0, 0.0, 0.0);
    glVertex3f(1.0, 0.0, 0.0);
    glVertex3f(1.0, 1.0, 0.0);
    glVertex3f(0.0, 1.0, 0.0);
    glEnd();
    glFlush();
}

static void render()
{
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glClear(GL_COLOR_BUFFER_BIT);
    glOrtho(0.0, 1.0, 0.0, 1.0, -1.0, 1.0);
    glutMouseFunc(processMouse);
}

int main(int argc, char **argv)
{
    glutInit(&argc,argv);                                         
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);   
    glutInitWindowSize(width, height);
    glutCreateWindow("Board");  
    glutDisplayFunc(render);
    glutMainLoop();
} 
```

渲染函数执行完毕，每次点击，都要启动函数processMouse。因此，如果单击鼠标，所有窗口都应变为红色，并显示以下说明：

```
 glColor4f(1.0,0.0,0.0,0.0);
    glBegin(GL_POLYGON);
    glVertex3f(0.0, 0.0, 0.0);
    glVertex3f(1.0, 0.0, 0.0);
    glVertex3f(1.0, 1.0, 0.0);
    glVertex3f(0.0, 1.0, 0.0);
    glEnd();
    glFlush(); 
```

但是当我单击鼠标时，我注意到一个奇怪的行为：只有窗口的一部分被着色，左下角的部分（而不是整个屏幕）。窗口保持这种状态，直到我打开一个谷歌浏览器窗口。如果我打开一个谷歌浏览器（或其他图形应用程序），所有窗口都变成红色。为什么这个？我对更复杂的程序也有问题，似乎有时 glVertex 指令被忽略了。如果我尝试使用 fprintf 调试程序，似乎一切正常，一切似乎都如预期的那样（例如，我试图打印鼠标坐标在 processMouse 函数中，它们没问题），除了我画的东西被忽略了。

编辑：我已经修改了这段代码，但它仍然有同样的问题：

```
#include <stdlib.h>
#include <stdarg.h>
#include <GLUT/GLUT.h>
#include <OpenGL/OpenGL.h>

double width=600;
double height=600;
bool down=false;;

// http://elleestcrimi.me/2010/10/06/mouseevents-opengl/

static void render()
{
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glClear(GL_COLOR_BUFFER_BIT);
    glOrtho(0.0, 1.0, 0.0, 1.0, -1.0, 1.0);
    if(down)
    {
        glColor4f(1.0,0.0,0.0,0.0);
        glBegin(GL_POLYGON);
        glVertex3f(0.0, 0.0, 0.0);
        glVertex3f(1.0, 0.0, 0.0);
        glVertex3f(1.0, 1.0, 0.0);
        glVertex3f(0.0, 1.0, 0.0);
        glEnd();
        glFlush();
    }
}

void processMouse(int button, int state, int x, int y)
{
    if(state==GLUT_DOWN)
    {
        down=true;
        glutPostRedisplay();
    }
}

int main(int argc, char **argv)
{
glutInit(&argc,argv);                                         
glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);   
glutInitWindowSize(width, height);
glutCreateWindow("Board"); 
glutMouseFunc(processMouse);
glutDisplayFunc(render);
glutMainLoop();
} 
```

仍然只有屏幕的一部分变红。

PS：使用 glutSwapBuffers() 解决，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:06:16.360

当您对 GLUT 使用双缓冲时，您需要调用`glutSwapBuffers()`以查看绘制的结果。

将此添加到`render()`函数的末尾，它将正常工作。

# javascript - 浏览器对象和 HTML DOM 对象的 JavaScript 模拟库

> ID：10082053
> 
> 赞同：1
> 
> 时间：2012-04-10T01:39:12.867
> 
> 标签：javascript, unit-testing, mocking, wsh

我正在尝试使用 Windows Script Host 运行 JS 单元测试。但我遇到的问题是如何在不打开浏览器的情况下模拟浏览器对象和 DOM 对象。

我知道我可以使用模拟库来模拟每个实例的东西，但我想知道是否有库通常可以模拟 DOM 对象，如 Document、Event 等。浏览器对象如 Window、Screen 也是如此。

有人将我指向 MochiKit 我正在尝试查看是否可以将其用于预期任务，但如果有人可以将我指向模拟库，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T01:43:17.000

[jsdom](https://github.com/tmpvar/jsdom)是一个相当完整的 DOM 仿真。

只需在其中运行您的脚本，它们就可以与服务器端 DOM 一起使用。

这应该允许您对代码进行单元测试。

或者将您的依赖项注入您的单元并模拟您的单元应具有的任何依赖项。单位应该很小，模拟应该很容易

# java - 将 Jetty 与 RESTEasy 集成

> ID：10082055
> 
> 赞同：9
> 
> 时间：2012-04-10T01:39:29.150
> 
> 标签：java, jakarta-ee, servlets, jetty, resteasy

有关如何集成 Jetty 和 RESTEasy 的任何链接？我有点坚持尝试将 RESTEasy 与 Jetty 一起配置……而且似乎在网络上没有可靠的帮助。

```
public static void main(String[] args) throws Exception
{
        Server server = new Server(8080);

        WebAppContext context = new WebAppContext();
        context.setDescriptor("../WEB-INF/web.xml");
        context.setResourceBase("../src/webapp");
        context.setContextPath("/");
        context.setParentLoaderPriority(true);

        server.setHandler(context);

        server.start();
        server.join();
} 
```

我的 Web.xml 直接复制自： [http ://docs.jboss.org/resteasy/docs/1.0.0.GA/userguide/html/Installation_Configuration.html](http://docs.jboss.org/resteasy/docs/1.0.0.GA/userguide/html/Installation_Configuration.html)

当我尝试打开资源文件中的链接时，返回的错误是 HTTP 404。表面上看起来一切都很合理，有什么建议吗？

我的资源文件如下所示：

```
package webapp;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;

@Path("/*")
public class Resource {

   @GET
   public String hello() {
       return "hello";
   }

   @GET
   @Path("/books")
   public String getBooks() {
       return "books";
   }

   @GET
   @Path("/book/{isbn}")
   public String getBook(@PathParam("isbn") String id) {
       return "11123";
   }
} 
```

这是我在 Jetty 启动时看到的打印：

2012-04-10 09:54:27.163:INFO:oejs.Server:jetty-8.1.1.v20120215 2012-04-10 09:54:27.288:INFO:oejw.StandardDescriptorProcessor:NO JSP 支持 /，没有找到org.apache.jasper.servlet.JspServlet 2012-04-10 09:54:27.319:INFO:oejsh.ContextHandler:started oejwWebAppContext{/,file:/C:/Users/xyz/Anotherproj1/src/webapp} 2012-04 -10 09:54:27.319:INFO:oejsh.ContextHandler:started oejwWebAppContext{/,file:/C:/Users/xyz/Anotherproj1/src/webapp} 2012-04-10 09:54:27.381:INFO:oejs。 AbstractConnector：已启动 SelectChannelConnector@0.0.0.0:8080

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T04:03:35.253

以下对我有用：

网页.xml：

```
<web-app xmlns:javaee="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
   <context-param>
      <param-name>resteasy.scan</param-name>
      <param-value>true</param-value>     
   </context-param>

   <context-param>
    <param-name>resteasy.resources</param-name>
    <param-value>webapp.Resource</param-value>
   </context-param>
    <context-param>
      <param-name>javax.ws.rs.core.Application</param-name>
      <param-value>webapp.MyApplicationConfig</param-value>
   </context-param>

   <!-- set this if you map the Resteasy servlet to something other than /*
   <context-param>
      <param-name>resteasy.servlet.mapping.prefix</param-name>
      <param-value>/resteasy</param-value>
   </context-param>
   -->
   <!-- if you are using Spring, Seam or EJB as your component model, remove the ResourceMethodSecurityInterceptor -->
   <context-param>
      <param-name>resteasy.resource.method-interceptors</param-name>
      <param-value>
         org.jboss.resteasy.core.ResourceMethodSecurityInterceptor
      </param-value>
   </context-param>

   <listener>
      <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
   </listener>

  <servlet>     
    <servlet-name>Resteasy</servlet-name>
    <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>Resteasy</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

和

```
public class MyApplicationConfig extends Application {

    private static final Set<Class<?>> CLASSES;

    static {
        HashSet<Class<?>> tmp = new HashSet<Class<?>>();
        tmp.add(Resource.class);

        CLASSES = Collections.unmodifiableSet(tmp);
    }

    @Override
    public Set<Class<?>> getClasses(){

       return  CLASSES;
    }    

} 
```

资源

```
package webapp;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;

@Path("/")
@Produces("text/plain")
public class Resource {

   @GET
   public String hello() {
       return "hello";
   }

   @GET
   @Path("/books")
   public String getBooks() {
       return "books";
   }

   @GET
   @Path("/book/{isbn}")
   public String getBook(@PathParam("isbn") String id) {
       return "11123";
   }
} 
```

和主类

```
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.webapp.WebAppContext;
import org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap;

public class Main {
    public static void main(String[] args) throws Exception
    {
            Server server = new Server(8080);

            WebAppContext context = new WebAppContext();

            context.setDescriptor("./src/main/webapp/WEB-INF/web.xml");
            context.setResourceBase("./src/main/webapp");
            context.setContextPath("/");

            context.setParentLoaderPriority(true);            

            server.setHandler(context);

            server.start();
            server.join();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:36:19.213

你确定 @Path("/*") 是正确的路径。试试 @Path("/") 也许这个 * 是个问题。据我所知，路径表达式不接受正则表达式。

编辑

我错了，你可以在@Path 中使用正则表达式，至少[RESTEasy 支持](http://docs.jboss.org/resteasy/docs/1.0.0.GA/userguide/html_single/index.html#_Path_and_regular_expression_mappings)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T20:14:35.740

**要让 RESTEasy 和 Jetty 在没有**web.xml 的情况下一起工作，请确保您在 pom.xml 中依赖于 resteasy-servlet-initializer。

这可能会有所帮助（JBoss RESTEasy 文档）： [https ://docs.jboss.org/resteasy/docs/3.0.4.Final/userguide/html/Installation_Configuration.html#d4e111](https://docs.jboss.org/resteasy/docs/3.0.4.Final/userguide/html/Installation_Configuration.html#d4e111)

# doctrine - 500 | 内部服务器错误 | Doctrine_Record_UnknownPropertyException 未知记录属性

> ID：10082057
> 
> 赞同：-4
> 
> 时间：2012-04-10T01:39:31.810
> 
> 标签：doctrine, symfony-1.4

我将在线站点复制到 localhost。登录后出现以下错误。但在线服务器工作 gud。

500 | 内部服务器错误 | Doctrine_Record_UnknownPropertyException “Layer”上的未知记录属性/相关组件“id”

请帮助是什么问题。

这是 schema.yml。

```
##########
# USER
##########
Personal:
  columns:
    user_id:                { type: integer, notnull: true }
    full_name:              { type: string(255), notnull: true }
    sex:                    { type: integer(1), notnull: true } #use constant value, 1 = Male, 2 = Female
    birth_date:             { type: date, notnull: true }
    relationship_status:    { type: integer(1), notnull: true } #use constant value, 1 = Single, 2 = In a relationship, 3 = Engaged, 4 = Married, 5 = It's complicated, 6 = In an open relationship, 7 = Widowed, 8 = Separated, 9 = Divorced
    country_id:             { type: integer }
    zone_id:                { type: integer }
    occupation:             { type: string(255) }
    education:              { type: string(255) }
    hobbies:                { type: string(255) }
    professional_interests: { type: string(255) }
    about_me:               { type: string(1000) }
    alias:                  { type: string(255), notnull: true }
    primary_album_id:       { type: integer }
    primary_layer_id:       { type: integer }
    profile_picture_id:     { type: integer }
    alias_picture_id:       { type: integer }
  relations:
    User:           { class: sfGuardUser, local: user_id, foreign: id, onDelete: CASCADE }
    Country:        { local: country_id, foreign: id, onDelete: SET NULL }
    Zone:           { local: zone_id, foreign: id, onDelete: SET NULL }
    PrimaryAlbum:   { class: Album, local: primary_album_id, onDelete: SET NULL }
    PrimaryLayer:   { class: Layer, local: primary_layer_id, onDelete: SET NULL }
    ProfilePicture: { class: Picture, local: profile_picture_id, onDelete: SET NULL }
    AliasPicture:   { class: Picture, local: alias_picture_id, onDelete: SET NULL }

   Layer:
  columns:
    id:        {type:  integer, notnull:  true } 
    personal_id:     { type: integer, notnull: true }
    name:            { type: string(255), notnull: true }
    picture_id:  { type: integer, primary: true }

    privacy_setting: { type: string(64), notnull: true }  
  relations:
    Personal: { local: personal_id, foreign: id, onDelete: CASCADE }

    abstract class BasePersonal extends sfDoctrineRecord
       {
        public function setTableDefinition()
        {
            $this->setTableName('personal');
       $this->hasColumn('user_id', 'integer', null, array(
         'type' => 'integer',
         'notnull' => true,
         ));

             $this->hasColumn('primary_layer_id', 'integer', null, array(
         'type' => 'integer',
         ));

   public function setUp()
   {
    parent::setUp();
        $this->hasOne('Layer as PrimaryLayer', array(
         'local' => 'primary_layer_id',
         'foreign' => 'id',
         'onDelete' => 'SET NULL'));

       $this->hasMany('Layer', array(
         'local' => 'id',
         'foreign' => 'personal_id'));

           abstract class BaseLayer extends sfDoctrineRecord
            {
           public function setTableDefinition()
         {
              $this->setTableName('layer');
              $this->hasColumn('personal_id', 'integer', null, array(
               'type' => 'integer',
              'notnull' => true,
                ));

       public function setUp()
         {
             parent::setUp();
             $this->hasOne('Personal', array(
         'local' => 'personal_id',
         'foreign' => 'id',
         'onDelete' => 'CASCADE')); 
```

任何身体，帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:48:23.117

删除 schema.yml 中的这一行，让 Doctrine 做主键。

```
id:        {type:  integer, notnull:  true } 
```

# spring - 关于spring security 3.0的好视频教程

> ID：10082060
> 
> 赞同：1
> 
> 时间：2012-04-10T01:39:43.667
> 
> 标签：spring, security, spring-mvc, spring-security

我知道这个论坛有很多“类似”的问题，但是没有任何特定于我所问的问题。是否有任何从 Spring Security 3.0 基础开始的关于 Spring Security 的优秀视频教程。其他有用的文档是
1\. [simple-spring-security-webapp](http://www.springbyexample.org/examples/simple-spring-security-webapp.html)
2\. [spring-security-mvc-integration](http://krams915.blogspot.com/2010/12/spring-security-mvc-integration_18.html)

但是，我无法获得解释弹簧安全性的良好视频教程。

感谢
Nohsib

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:04:42.893

我喜欢这些：

[http://www.infoq.com/presentations/Spring-Security-3（2011](http://www.infoq.com/presentations/Spring-Security-3)年 1 月，您需要 Flash 播放器才能看到它）

[http://www.infoq.com/presentations/Spring-Security-3-1（2011](http://www.infoq.com/presentations/Spring-Security-3-1)年 12 月）

# php - 按字母顺序排列目录

> ID：10082066
> 
> 赞同：1
> 
> 时间：2012-04-10T01:40:12.487
> 
> 标签：php, directory

我有一些代码可以将目录的内容打印到网页上，似乎让我无法理解的是如何让它按字母顺序打印出来。

```
<?php

 $dir="../zpress/pages"; // Directory where files are stored

 if ($dir_list = opendir($dir))
 {
 while(($filename = readdir($dir_list)) !== false)
 if(!is_dir($filename))
 {
  ?>
  <p><a href="../zpress/pages/<?php echo $filename; ?>"><?php echo $filename;
  ?></a></p>
  <?php
  }
  closedir($dir_list);
  }

  ?> 
```

任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:48:32.927

```
$the_files = array();
while(($filename = readdir($dir_list)) !== false) {
    if(!is_dir($filename)) {
        array_push($the_files,$filename);
    }
}
sort($the_files);
foreach($the_files as $the_file) { ?>
   <p><a href="../zpress/pages/<?php echo $the_file; ?>"><?php echo $the_file;?></a></p>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T01:50:04.623

您可以使用`scandir`which 将返回按字母顺序排序的目录中的所有文件

```
$files = scandir($dir);

foreach($files as $file) {
   // your code here
} 
```

[扫描目录](http://php.net/scandir)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T01:49:38.333

您可以将整个目录列表 slurp 到内存中，然后应用`strnatcasecmp`对列表进行排序：

```
$dir = ".";
$files = glob("$dir/*");
usort($files, 'strnatcasecmp');
// $files is now sorted 
```

使用`strnatcasecmp`将为您提供自然大小写排序的顺序，从而获得更多人类可读的输出。见这里的解释： http: [//sourcefrog.n ​​et/projects/natsort/](http://sourcefrog.net/projects/natsort/)

# iphone - MKNetworkKit 文件上传在 iOS 中不起作用

> ID：10082076
> 
> 赞同：3
> 
> 时间：2012-04-10T01:41:41.607
> 
> 标签：iphone, ios, file-upload, upload, amazon-web-services

我对所有服务器请求都使用[MKNetworkKit非常好。](https://github.com/MugunthKumar/MKNetworkKit)但是，当尝试上传图像文件时，它会因以下错误而失败：

错误域=NSURLErrorDomain 代码=-1005 “网络连接丢失。” UserInfo=0x1010cb20 {NSErrorFailingURLStringKey=https://s3.amazonaws.com/net.myapp.upload, NSErrorFailingURLKey=https://s3.amazonaws.com/net.myapp.upload, NSLocalizedDescription=网络连接丢失。, NSUnderlyingError =0x1010ca60 "网络连接丢失。"}

有时错误代码是 405。我拥有上传所需的所有亚马逊凭据，并在终端中使用与应用程序相同的传出数据运行 cURL 会产生正确的返回。我用于此请求的方法在这里：

```
 - (MKNetworkOperation*)uploadMediaFromFile:(NSString*)file urlCommand:(NSString*)url    
 postField:(NSString*)field authDict:(NSMutableDictionary*)authDict onCompletion:(   
 MediaUploadBlock)completionBlock onError:(MKNKErrorBlock)errorBlock  {

    MKNetworkOperation *op = [self operationWithURLString:url params:authDict                           
     httpMethod:@"POST"];

    [op addFile:file forKey:field];

    // setFreezable uploads your images after connection is restored!
    [op setFreezable:YES];

    [op onCompletion:^(MKNetworkOperation* completedOperation) {
        NSLog(@"%@",[completedOperation responseString]);
        NSDictionary *jsonString = [completedOperation responseJSON];
        NSLog(@"%@",jsonString);
        completionBlock(jsonString);
    }
     onError:^(NSError* error) {
         errorBlock(error);
     }];

    [self enqueueOperation:op forceReload:YES];

    return op;
 } 
```

这是一个相当基本的请求，可以从终端运行，也可以使用此处提供的相同参数从浏览器运行。我不知道为什么这不起作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:32:04.480

“网络连接丢失”意味着您的 Wifi 连接很差，断断续续。

# mobile - 响应式网页设计和 Adwords 质量得分？

> ID：10082078
> 
> 赞同：2
> 
> 时间：2012-04-10T01:41:59.450
> 
> 标签：mobile, google-ads-api

我知道谷歌正在推动移动网页设计，甚至说拥有一个未经移动优化的网站会影响您的广告词质量得分。

如果您有响应式网页设计怎么办。谷歌的算法会足够聪明，可以接受这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:50:09.087

[通过他们的移动 Page Speed Online 工具](https://developers.google.com/pagespeed/#url=www.google.com&mobile=true)运行网站，您可以很好地了解 Google 对您的移动产品的看法，并尽可能解决他们提出的任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-09T14:56:55.300

响应式设计是一种配置，其中服务器将相同的 HTML 代码发送到任何设备，并且页面元素的大小使用 CSS。如果页面及其资源可供所有 Googlebot 用户代理使用，Google 算法可以自动识别此配置。响应式设计需要在所有设备上运行相同的代码，以自动更改不同屏幕上的页面格式。使用元`name = "viewport"`标记告诉浏览器如何改变它的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-25T13:30:39.410

响应式网页设计很好，只要它可以被移动屏幕正确阅读。谷歌[有一个适合移动设备的 URL 测试器，您可以使用](https://search.google.com/test/mobile-friendly)它来确保您的网站达到标准。Googlebot 现在在抓取页面时会模拟移动浏览器，因此页面需要响应并改变其设计，以便在移动屏幕上易于阅读。“移动优先”是谷歌的新座右铭，他们认为最好的做法是首先为移动读者设计一个网站，然后再对其进行调整以获得良好的桌面体验。一个好的响应式设计在移动设备和桌面设备上都会看起来不错。

# c++ - 分叉子进程花费的时间

> ID：10082079
> 
> 赞同：6
> 
> 时间：2012-04-10T01:42:03.463
> 
> 标签：c++, system, fork

[这是我上一个问题](https://stackoverflow.com/q/10066591/984260)的续集。我正在使用 fork 创建子进程。在孩子内部，我正在命令运行如下进程：

```
if((childpid=fork())==0)
{
system("./runBinary ");
exit(1)
} 
```

我的 runBinary 具有测量从开始到结束需要多少时间的功能。

令我惊讶的是，当我直接在命令行上运行 runBinary 时，大约需要 60 秒。但是，当我将它作为子进程运行时，它需要更多，比如 ~75 或更多。有什么我可以做或目前做错的事情，这会导致这种情况吗？

我在这里先向您的帮助表示感谢。更多细节：我在 linux RHEL 服务器上运行，有 24 个内核。我正在测量 CPU 时间。一次，我只 fork 8 个孩子（按顺序），每个孩子都绑定到不同的核心，使用任务集（代码中未显示）。除了我自己的程序，系统没有加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:21:32.120

system() 函数用于调用 shell。您可以在其中执行任何操作，包括运行脚本。这为您提供了很大的灵活性，但也有代价：您正在加载一个 shell，然后在其中运行二进制文件。虽然我不认为加载 shell 会造成这么大的时间差异（毕竟 15 秒很多），因为看起来你不需要那个 - 只是为了运行应用程序 - 尝试使用[exec中的一些东西()](http://linux.die.net/man/3/exec)家庭代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:23:39.067

如果不分析应用程序，如果派生的父进程具有较大的内存空间，您可能会发现尝试派生进程本身并尝试复制内存空间会花费时间。

这在 Red Hat Enterprise Linux 6 中不是问题，但在 Red Hat Enterprise Linux 5 的早期版本中存在。

# google-api - Google Calendar API V3 - 默认或主要日历

> ID：10082081
> 
> 赞同：4
> 
> 时间：2012-04-10T01:42:19.840
> 
> 标签：google-api, google-calendar-api

我正在尝试使用 VBA 访问 Google Calendar API V3。我不知道如何确定默认情况下应该将新事件写入哪个日历。Google Calendar API V3 下是否没有默认或主日历之类的东西？

默认日历的 CalendarID 是否始终是用户的电子邮件地址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-30T07:38:19.060

要回答您的问题，不，电子邮件地址不是默认的 CalendarID。您可以使用“primary”作为默认 CalendarID。如果需要，您可以获得所有用户日历 ID 的列表，甚至可以创建/删除日历。查看[https://developers.google.com/google-apps/calendar/v3/reference/calendarList](https://developers.google.com/google-apps/calendar/v3/reference/calendarList)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-15T04:37:54.133

您可以只使用 CalendarID 属性的字符串`"primary"`来获取默认日历

# asp.net - 为用户登录 VB.NET 创建会话

> ID：10082086
> 
> 赞同：1
> 
> 时间：2012-04-10T01:42:54.693
> 
> 标签：asp.net, vb.net

我班上的一些变量：

1-公司ID

2-公司名称（用户名）

3-公司密码（密码）

4-公司标志

5-电子邮件。

我想创建所有这些字段的会话内容以在 ctrls 中使用其中的一些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T01:48:29.007

将类对象存储在会话中

```
public class Company
{
  public int Id { set;get;}
  public string Name { set;get;}
  public string Logo { set;get;}  
} 
```

将其存储在会话中

```
Company objCompany=new Company();
objCompany.ID=34;
objCompany.Name="Chase";
objCompany.Logo="chase_logo.PNG";

Session["company"]=objCompany; 
```

从会话中检索，

```
Company objComp=null;
if(Session["company"]!=null)
{
  objComp=(Company) Session["company"];
} 
```

理想情况下，我会用这样的方法包装它

```
public Company GetCurrentCompany()
{
    Company objComp=null;
    if(Session["company"]!=null)
    {
      objComp=(Company) Session["company"];
    }
} 
```

这样`GetCurrentCompany`如果我想在不同的地方存储公司，我可以简单地调用方法。

# visual-studio-2010 - 如何修复/重新安装 Visual Studio 2010 的 SQL Express？

> ID：10082089
> 
> 赞同：1
> 
> 时间：2012-04-10T01:42:58.647
> 
> 标签：visual-studio-2010

当我尝试在 VS2010 中单击“显示表数据”时，我收到以下错误消息：

![](../Images/edade0787390f7fec28356cbcb644647.png)

![](../Images/1390bc00021b030f2efd41117d6a9e25.png)

这在我安装 VS11 Beta 然后卸载它之后开始发生。我尝试卸载并重新安装 VS2010，但它并没有解决问题。有没有办法强制为 VS2010 重新安装 SQL Express 插件/插件？

我似乎在 MS 网站上找不到任何类似的东西，他们一直在吹捧[SQL Server 2012 Express](http://www.microsoft.com/sqlserver/en/us/editions/express.aspx)。

# list - 反向列表列表

> ID：10082092
> 
> 赞同：2
> 
> 时间：2012-04-10T01:43:34.080
> 
> 标签：list, prolog, reverse

我的序言代码有问题。我需要反转列表的所有原子元素。

示例：[1,2,[3,4]] -> [[4,3],2,1]

我的解决方案：

```
myReverse([], []).
myReverse([H|T], X) :- myReverse(T, RT), myAppend(RT, H, X). 
```

但它只给了我： [[3,4],2,1] 我想，如果它不是原子的，我需要使用 is_list 函数和递归调用列表......但我被卡住了......你们知道如何写下来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:37:51.113

几乎。考虑这个解决方案：

```
myReverse([], []) :- !.

myReverse([H|T], X) :-
    !,
    myReverse(H, NewH),
    myReverse(T, NewT),
    append(NewT, [NewH], X).

myReverse(X, X). 
```

第一个子句是基本情况，它包括一个 cut ( `!`) 以排除由于最后一个子句而留下的选择。

第二个子句颠倒了 head `H`，它可以是一个原子或一个列表。如果`H`是一个原子，则切割后的递归子目标使用最后一个子句进行评估，并且原子通过不变。如果`H`是一个列表，则使用第二个子句对其进行评估，并且所有元素都被反转。下一个子目标对列表的其余部分（尾部，`T`）执行相同的操作，然后最终使用内置的`append/3`. 请注意，新的 head 元素`NewH`是单数的，因此需要根据其对列表进行操作`[NewH]`的定义添加到单例列表结构`append/3`中。

最后一个子句不变地传递所有其他事物（即原子、数字等 - 任何不是列表或变量的事物）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:27:03.517

```
revall(L, Y) :-
    revall(L, [], Y).
revall([], Y, Y).
revall([H|T], T2, Y) :-
    is_list(H),!,
    revall(H, Hr),
    revall(T, [Hr|T2], Y).
revall([H|T], T2, Y) :-
    revall(T, [H|T2], Y). 
```

这里没有附加

# python - 根据字符映射生成所有可能的密码——可能在 3 行 python 中？

> ID：10082094
> 
> 赞同：0
> 
> 时间：2012-04-10T01:43:43.810
> 
> 标签：python, string, algorithm, permutation

我在这个页面上遇到了这个面试问题：（http://newworld-alex.blogspot.com/2009/03/facebook-interviewzz.html）

> 技术问题：在 python 中，给定某个单词的字符变体字典，*例如 dictChars = {"e" : [E, 3], "x" : [X], "a" : [A, @], "m " : [M]}*实现一个类似密码破解器的部分字符串置换生成器，即产生*exaM, exAm, exAM, ex@m, ...*。我在 Python 中实现了一个简单的 3 行递归解决方案。

我在 Python 中有一个解决方案，但我似乎不知道如何像他那样让它变成 3 行。

仅供参考，这是我目前的解决方案：

```
def allPossiblePasswords(password, mapping):
   if len(password) == 0:
      return [""]
   else:
      next = allPossiblePasswords(password[1:], mapping)
      if password[0] in mapping:
         return [c + n for c in mapping[password[0]] for n in next]
      else:
         return [password[0] + n for n in next] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T01:57:47.013

[自我剽窃](https://stackoverflow.com/questions/6234395/how-to-print-password-combination-but-with-custom-constraints-for-each-index/6234417#6234417)不算数，对吧？

```
import itertools

def all_possibles(password, mapping):
    char_options = ([char]+mapping.get(char,[]) for char in password)
    for poss in itertools.product(*char_options):
        yield ''.join(poss) 
```

可以根据需要制作得尽可能紧凑，甚至是单行变体：

```
possibles = lambda p,m: map(''.join, itertools.product(*([c]+m.get(c,[]) for c in p))) 
```

编辑：啊。我没有注意到递归是必需的。在这种情况下，如何：

```
def all_recur(password, mapping):
    return [''] if not password else [c + n for c in [password[0]] + mapping.get(password[0], []) for n in all_recur(password[1:], mapping)] 
```

这基本上只是你的压缩版本。请注意，这两个都返回“exam”（即未修改的密码）；我不确定这是不是想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T01:55:50.007

```
mapping = {'a': ['A', '@'], 'x': ['X'], 'e': ['E', 3], 'm': ['M']}

password = "exam"

from itertools import product
allPossible = list(product(*([letter] + mapping[letter] for letter in password))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T02:15:07.973

这在很多方面都是错误的。但无论如何我都会发布它。根据要求，这是一个递归解决方案。

```
>>> def pw_vars(in_word, out_word, equivs):
...     if not in_word: return [out_word]
...     return sum((pw_vars(in_word[1:], out_word + c, equivs) for c in [in_word[0]] + equivs[in_word[0]]), [])
... 
>>> pw_vars('foo', '', {'f':['F', '='], 'o':['0', 'O']})
['foo', 'fo0', 'foO', 'f0o', 'f00', 'f0O', 'fOo', 'fO0', 'fOO', 'Foo', 'Fo0', 
 'FoO', 'F0o', 'F00', 'F0O', 'FOo', 'FO0', 'FOO', '=oo', '=o0', '=oO', '=0o', 
 '=00', '=0O', '=Oo', '=O0', '=OO'] 
```

我希望我不必说你永远不应该这样做。这个人真的得到了这份工作吗？我很怀疑。

实际上，虽然我已经意识到 DSM 的版本更好——几乎可以忍受！这是我的 DSM 版本，它的价值（不是那么多）。这也满足了 Mark Ransom 下面的观点。

```
>>> def pw_vars(pw, equivs):
...     if not pw: return ('',)
...     return (c + var for c in [pw[0]] + equivs.get(pw[0]) for var in pw_vars(pw[1:], equivs))
... 
>>> list(pw_vars('foo', {'f':['F', '='], 'o':['0', 'O']}))
['foo', 'fo0', 'foO', 'f0o', 'f00', 'f0O', 'fOo', 'fO0', 'fOO', 'Foo', 'Fo0', 'FoO', 'F0o', 'F00', 'F0O', 'FOo', 'FO0', 'FOO', '=oo', '=o0', '=oO', '=0o', '=00', '=0O', '=Oo', '=O0', '=OO'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T05:00:39.233

```
equivs = dict(e=['E', '3'], x=['X'], a=['A', '@'], m=['M'])

def gen(c, *cs):
    if cs: return (x + y for x in [c] + equivs.get(c, []) for y in gen(*cs))
    else: return [c] + equivs.get(c, [])

for each in gen(*'erxuam'):
    print each 
```

# c# - Assembly.ExecutingAssembly() GetType() 不返回任何内容

> ID：10082095
> 
> 赞同：0
> 
> 时间：2012-04-10T01:43:50.357
> 
> 标签：c#, .net, assemblies

这是我的代码，非常简单：

```
namespace EnumReflection
{
    enum Messengers
    {
      MSN,
      ICQ,
      YahooChat,
      GoogleTalk
    }

  class Program
  {
    static void Main(string[] args)
    {
      FieldInfo[] fields = typeof(Messengers).GetFields(BindingFlags.Static | BindingFlags.Public);

      foreach (var field in fields)
      {
        Console.WriteLine(field.Name);
      }

      var assembly = Assembly.GetExecutingAssembly();
      var type = assembly.GetType("Messengers");

      Console.ReadLine();
    }
  }
} 
```

但是，`type`变量始终为空，即使当我说它时`assembly.GetTypes()`，它也会返回所有类型，例如`Messengers`, `Program`。

这是我的即时窗口的副本：

```
assembly.GetType("Messengers");
null
assembly.GetTypes();
{System.Type[2]}
    [0]: {Name = "Messengers" FullName = "EnumReflection.Messengers"}
    [1]: {Name = "Program" FullName = "EnumReflection.Program"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T01:45:42.907

[Assembly.GetType()](http://msdn.microsoft.com/en-us/library/y0cd10tb.aspx)方法应该采用类型的全名，包括命名空间。尝试通过`EnumReflection.Messengers`，这应该可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T01:45:52.007

您应该在 GetType() 中指定全名（即不包括命名空间）以获得类型

# android - strings.xml 从我的 Eclipse 工作区中消失

> ID：10082096
> 
> 赞同：0
> 
> 时间：2012-04-10T01:43:58.943
> 
> 标签：android, eclipse

当我保存另一个文件时，我看到 strings.xml 从我眼前的 values/ 目录中消失了。

我尝试手动创建一个新的 strings.xml (New -> File)，但它也消失了。

是什么让它消失？是否有日志显示 Eclipse 在幕后所做的所有神奇事情？

**编辑**答案：values/ 已从 res/values/ 移动到 values/。如何？我一点也没有。但是当我在 res/ 下创建一个新的值目录时，我可以在其中创建一个新的 Android XML 文件，然后填充它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:46:45.607

可能有几件事——首先要尝试的是切换到资源视图。

无论哪种视图，您都可以单击文件夹选项卡/窗口事物右上角的向下箭头，您可以配置文件管理器。确保它没有出于某种原因过滤该文件。

# java - 如何在 javascript 中使用我在 java 中创建的包？

> ID：10082101
> 
> 赞同：1
> 
> 时间：2012-04-10T01:44:56.407
> 
> 标签：java, javascript

我有一个包登录，里面有几个类......我认为我的代码看起来像这样：

```
importPackage(login);
var password = document.form1.pword.value;
var hash = JPP7.toHash(password); 
```

JPP7 是我的哈希类？我正在使用同事的 javascript 代码，但我对 javascript 几乎一无所知。我是否必须提供包文件夹的绝对路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T01:56:08.947

^(*（从我上面的评论转换）*)

**您不能**（至少不容易也不能开箱即用）在 Javascript 中使用 Java 代码。尽管它们的名称相似，但它们却非常不同并且彼此不相容。另请参阅[Javascript 和 Java 有什么区别？](https://stackoverflow.com/questions/245062/whats-the-difference-between-javascript-and-java).

曾经有一个[用 Javascript 实现的 JVM](http://ejohn.org/blog/running-java-in-javascript/)，但[现在它似乎已经死了](https://stackoverflow.com/questions/1444681/does-anyone-know-where-i-can-find-the-orto-javascript-jvm)。无论如何，我都不建议在任何类型的生产代码中使用它。

# c# - 从文件夹中的树节点下载

> ID：10082104
> 
> 赞同：1
> 
> 时间：2012-04-10T01:45:14.247
> 
> 标签：c#, asp.net, treenode

```
protected void Page_Load(object sender, EventArgs e)
{

    field1.Text = (string)(Session["rolename"]); //from the page before. eg:IT Folder
    field2.Text = (string)(Session["fullname"]);

    if (Page.IsPostBack == false)
    {

        System.IO.DirectoryInfo RootDir = new System.IO.DirectoryInfo("C:\\Documents and Settings\\itdept\\Desktop\\Files\\"+ field1.Text);
        TreeNode RootNode = OutputDirectory(RootDir, null);
         MyTree.Nodes.Add(RootNode);
    }
}

protected void click(object sender, EventArgs e) //onselectednodechanged from the treenode in aspx page
{
   string file = ("C:\\Documents and Settings\\itdept\\Desktop\\Files\\" + field1.Text + "\\" + MyTree.SelectedValue);
     Response.Clear();
    Response.AppendHeader("Content-Disposition", "attachment;filename=" + file);
    Response.ContentType = "text/xml";
    Response.WriteFile(file); // here is the problem
    Response.End();

} 
```

**我可以从 IT 文件夹下载文件，但如果 IT 文件夹中有一个文件夹，而我想从该文件夹中下载某些内容，则无法下载。有没有人知道如何使文件夹中的所有东西即使在文件夹中也是可下载的？谢谢你。:D

# java - 当代码在 Solaris 5.9 上使用系统调用“connect()”时，jni (java6) 和 X25 本机代码（C 语言）出错

> ID：10082105
> 
> 赞同：5
> 
> 时间：2012-04-10T01:45:32.563
> 
> 标签：java, java-native-interface, solaris

在过去的几年中，我们创建了一个使用 X25 协议的程序。它是用 C 语言制作的，可以在装有 Solaris 5.9 的 Sun-Fire 机器上正常工作。最近，我们正在同一台机器上使用 java 6，我们正在尝试调整 C 中的旧程序以通过 jni 使用 java。所以我对旧的 C 程序做了一些修改，并创建了一个名为 `x25lib.so`

但是我在使用 jni 和 X25 时发现了一个运行时问题：当通过 jni 从 java 调用 C 函数时，C 代码的工作方式与从另一个 C 程序调用时不同。

具体来说，使用jni，共享库中的C代码可以正常工作，直到调用系统调用`connect()`，然后返回-1，

但是从另一个 C 程序调用我的共享库的相同 C 代码返回 0（确定）

在这两种情况下，共享库中的 C 代码都没有接收外部参数，因此条件相同，我不明白从 java 加载我的“x25lib.so”共享库是否有一点差异，导致`connect()`C 失败。

使用 java 中的“truss”命令我发现了错误：

```
/2: connect(5, 0xFD878B75, 112, 1)          Err#22 EINVAL 
```

相同，但从另一个 C 程序调用共享库：

```
connect(4, 0xFFBFE794, 114, 1)          = 0 
```

所以它只适用于纯C，

**在 solaris 5.9 中使用 jni 和 X25 是否还有其他考虑？**

重要提示：共享库中的 C 代码在这两种情况下都是相同的。

编译时间：

一个。创造`x25lib.so`

```
 cc  -w -fd -G -Kpic subs.o -L/opt/SUNWconn/lib -R/opt/SUNWconn/lib -lsockx25
        -lsocket -lnsl -I"/SDK/jdk/include/" -I"/SDK/jdk/include/solaris/"
        -o x25lib.so -h x25lib.so x25jni.c 
```

湾。使用该共享库创建测试 C 程序：

```
 cc -w x25lib.so -o x25test x25test.c

where `x25test.c` contains:

    #include <stdio.h>
    main()
    {
        java_x25();
    } 
```

C。使用java：

```
public class X25 {

        static {
           System.load("/home/x25lib.so");
        }
    public native void ejecutaComando();
} 
```

* * *

```
public class TestX25 {

    public static void main(String ... args) {
    X25 x25 = new X25();

    x25.ejecutaComando();
    }

} 
```

* * *

然后在 C 代码共享库中：

```
/*
 * Class:     X25
 * Method:    ejecutaComando
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_X25_ejecutaComando
  (JNIEnv *env, jobject obj)
{

        java_x25();

} 
```

* * *

所以最后两个程序（java y C）在共享库中调用完全相同的C代码：

java_x25()
没有参数，所以执行相同的代码。

**为什么从C调用时工作正常，但从java调用时失败？**

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:50:51.340

感谢您的意见。我在尝试另一种方法时找到了一个解决方案：我决定不使用 jni，而是调整了旧的 C 程序来侦听来自 java 的简单 tcp 连接，然后可以执行 x25 代码，但令人惊讶的是，我得到了相同的运行时错误，例如使用 jni：

```
connect(5, 0xFD8789C5, 112, 1)          Err#22 EINVAL 
```

包括 112 而不是 114 的大小，这是同样的问题。

所以我注意到问题是我在**"-lsockx25"之前使用****"-lsocket"** 选项编译了新的 C 程序，所以这是一个线索。然后我在谷歌搜索，我发现了一个类似的问题：

 **[链接到 java X25 错误 ID：4077576](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=33cfb04f1c1bf91436be2f2a2f8?bug_id=4077576)

在那篇文章的最后，提到了选项**LD_PRELOAD**强制首先加载 sockx25 库。最后解决方案是在运行时：

`bash$ export LD_PRELOAD=/opt/SUNWconn/lib/libsockx25.so`

`bash$ java TestX25`

然后使用 jni 一切正常。

LD_PRELOAD 参考：[指向 java 调优的链接](http://java.sun.com/performance/reference/whitepapers/tuning.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:36:27.440

一些观察（如果您希望我们更深入地了解这一点，请发布您的代码 - 特别是设置参数的部分`connect()`）：

*假设*X.25 over TCP（？）：

1.  从手册页`EINVAL`返回`connect(3socket)`“namelen 不是指定地址族的有效地址的大小”，其中定义`namelen`的`sockaddr`结构是`<sys/socket_impl.h>`. `namelen`通常是 16（一个 2 字节的地址系列（我期望`SOCK_STREAM`），后跟 14 个八位字节的地址数据）。您的程序返回`namelen`112 或 114。

2.  `name`0xFD878B75 以上的失败输出中的地址`truss(1)`是奇数（在“不偶数”的意义上是奇数）。鉴于 Solaris 的典型对齐要求，这似乎很奇怪。（SPARC 或 x86？什么编译器和标志？）。也许是指针或 sizeof 问题？

3.  从您的`truss(1)`输出可以看出，线程正在 java 调用中使用。你的库是线程安全的吗？**

# git - 禁止 git 中的外部文件

> ID：10082108
> 
> 赞同：3
> 
> 时间：2012-04-10T01:46:00.540
> 
> 标签：git

我们有一个常见的问题。我们正在使用 repo 工具将多个 git repos 放入构建树中。不幸的是，用户不断添加（可能使用 -f）并提交其他存储库中的文件。例子：

```
#ls
root/gitRepoA
root/gitRepoB
#cd root/gitRepoA
#git add -f ../gitRepoB/myFile
#git commit 
```

有没有办法避免这种情况？

编辑：这似乎只有在使用 repo 工具时才有可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:30:31.590

`.git`如果两个目录都是 git repos （即有一个），这应该是不可能的

我刚试过：

```
C:\prog\git\tests\multipleRepos\r2a>git add -f ..\r1\f1r1
fatal: '..\r1\f1r1' is outside repository 
```

# c# - 在父类中使用来自 C# DataReceived 线程的数据（无 UI，无法调用）

> ID：10082112
> 
> 赞同：0
> 
> 时间：2012-04-10T01:46:11.083
> 
> 标签：c#, multithreading

我有一个类需要使用来自 C# 串行 DataReceived 事件的数据更新属性。

我不是要更新 UI，但我发现的关于使用 DataReceived 事件（在不同的线程上运行）的结果的唯一参考说使用 .Invoke 将数据获取到 UI 控件中。我的课程与 UI 没有关联，因此 .Invoke 不可用。

当处理程序尝试更改类中的属性时，我收到可怕的错误：*“调用线程无法访问此对象，因为不同的线程拥有它。”*

将结果放入父线程的过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:46:27.967

如果您不想提供一直到 DAL 的 UI 参考，那么您可以使用[SynchronizationContext](http://www.codeproject.com/Articles/31971/Understanding-SynchronizationContext-Part-I)采用这种方法。

# xcode - UITextField int 数据类型 xcode

> ID：10082118
> 
> 赞同：0
> 
> 时间：2012-04-10T01:47:39.900
> 
> 标签：xcode, uitextfield

我试图获得一个数学方程来识别在 UItextfield（s1，s2）中输入的整数（-1 或 +1）的 + /- 符号。因此，如果用户输入不同的符号，则方程将彼此相减。似乎由于某种原因无法识别该标志，程序只是添加了 d1 和 d2。

```
-(IBAction)calculateD:(id)sender{
float n1, r1, n2, r1, d, d1, d2;
int s1, s2;

s1= [textfieldS1.text intvalue]; //etc for all variables

d1 = s1 * ((n1-1)/r1);
d2 = s2 * ((n2-1)/r2);

if (s1 != s2) { d = d1 - d2;} 
else { d = d1 + d2;
}} 
```

请问这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:00:32.787

我不知道你想在这里做什么。变量未初始化，并且 -calculateD: 方法内部没有对实际 UITextField 的特定引用。说到这里，这里有一些提示，希望它会派上用场。

符号 s1、s2 实际上被考虑了两次。一次产生d1，d2，然后决定（s1！= s2）。因此，后者将确保您添加两个相同符号的数字，可能会否定您在这里真正想要获得的内容。例子：

*   假设 s1=+1, s1=+1，那么你得到 d = ((n1-1)/r1) + ((n2-1)/r2);
*   假设 s1=+1, s1=-1，那么你得到 d = ((n1-1)/r1) + ((n2-1)/r2); 和以前一样；

只需放弃 if，并留下一个：d = d1 + d2。

# iphone - UITextField 从第一行的一半剪切/隐藏 - 直到触摸

> ID：10082121
> 
> 赞同：1
> 
> 时间：2012-04-10T01:47:54.297
> 
> 标签：iphone, objective-c, uitextfield

我有这个真正没有答案的问题.. 在网上寻找这个问题后，我和你一起运气.. 我有一个`UITextView`从 url 获取字符串。但是...文本字段从第一行的一半被剪切/隐藏，并且仅在我触摸它时才固定。

这是代码：

```
- (NSString *)getMonthValues{
            NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@",URL_ADDRESS2,URL_MONTH_ZODIAC]];
            NSString *Value = [[NSString alloc] initWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
            Value = [Value stringByReplacingOccurrencesOfString:@"\\n" withString:@"\n"];
}

-(void)getMonthValue{
    NSString *horoscope_daily = [self getMonthValues];
    [Month_horoscope setText:[NSString stringWithFormat:@"%@",horoscope_daily]];
} 
```

![在此处输入图像描述](../Images/1f0ffb533438c7f09a98589bc8d58cf6.png)

有人可以解释这个问题并帮我解决吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:18:43.307

它要么是 1) 被其他视图覆盖，要么是 2) 框架太小而无法看到整个文本。

1.  要检查封面问题，请尝试在所有其他可见视图上将背景属性设置为 [UIColor redColor]。

2.  如果是框架问题，请在 setText 之后立即发出**：**

    ```
    [Month_horoscope sizeToFit]; 
    ```

# java - 使用 Comparator 订购 ArrayList Java

> ID：10082123
> 
> 赞同：5
> 
> 时间：2012-04-10T01:48:16.040
> 
> 标签：java, sorting, arraylist, comparator

我必须按日期和时间订购约会。我有一个约会的 ArrayList，并试图创建一个比较器来比较他们的日期和时间。我正在尝试使用 Collections.sort 方法，将 ArrayList of Appointments 和我创建的 AppointmentComparator 传递给它。编译时我得到一个“没有合适的排序方法”。这是编译器生成的完整错误消息的链接：http: [//prntscr.com/7y4qb](http://prntscr.com/7y4qb)

比较器：

```
public class AppointmentComparator implements Comparator<Appointment>
{
public int compare(Appointment a, Appointment b)
{
    if (a.getDay() < b.getDay())
        return -1;

    if (a.getDay() == b.getDay())
    {
        if (a.getStart() < b.getStart())
            return -1;
        if (a.getStart() > b.getStart())
            return 1;
        return 0;
    }

    return 1;
} 
```

有语法错误的行：

```
Collections.sort(book, new AppointmentComparator()); 
```

变量 book 是约会的 ArrayList。`ArrayList<Appointment>`

预约书类：

```
import java.util.ArrayList;
import java.util.Collections;

public class AppointmentBook
{
private ArrayList<Appointment> book;

public AppointmentBook()
{
    book = new ArrayList<Appointment>();
}

public void addAppointment(Appointment appt)
{
    book.add(appt);
    Collections.sort(book, new AppointmentComparator());
}

public String printAppointments(int day)
{
    String list = "";

    for (int i = 0; i < book.size(); i++)
    {
        if (book.get(i).getDay() == day)
        {
            list = list + "Appointment description: " + book.get(i).getDescription() + "\n" + "Date of Appointment: " +
            book.get(i).getDay() + "\n" + "Time: " + book.get(i).getStart() + " - " + book.get(i).getEnd() + "\n" + "\n";
        }
    }

    return list;
} 
```

预约班：

```
public class Appointment
{
private String desc;
private int day; //in format mmddyyyy
private int start; //in format hhmm
private int end; //in format hhmm

public Appointment(String description, int aptDay, int startTime, int endTime)
{
    desc = description;
    day = aptDay;
    start = startTime;
    end = endTime;
}

public String getDescription()
{
    return desc;
}

public int getDay()
{
    return day;
}

public int getStart()
{
    return start;
}

public int getEnd()
{
    return end;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T01:52:40.680

从错误消息中，您似乎忘记将比较器声明为实现接口：

```
public class AppointmentComparator implements Comparator<Appointment> {} 
```

它需要具有实现部分，而不仅仅是包含方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T15:07:19.910

您需要投射新的 AppointmentComparator

```
Collections.sort(book, new (Comparator)AppointmentComparator()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-29T10:50:55.903

我们也可以在某些情况下使用内部类：

```
public int indexOfLargest(ArrayList<QuakeEntry> Data) {
    Comparator<QuakeEntry> cmtr = new Comparator<QuakeEntry>() {
        @Override
        public int compare(QuakeEntry t, QuakeEntry t1) {
            if (t.getMagnitude() < t1.getMagnitude())
                return -1;
            if (t.getMagnitude() == t1.getMagnitude()) 
                return 1;
            if (t1.getMagnitude() > t1.getMagnitude())
                return 0;
        return 1;
        }
    };

    QuakeEntry max = Collections.max(Data, cmtr);
    int maxIndex = Data.indexOf(max);
    //----------------------------------------------------------------------
    System.out.println("//---------------------------------------------------");
    System.out.println("ArrayList sorted by Magnitude using inner class with Comparator");
    System.out.println("//---------------------------------------------------");
    Collections.sort(Data, cmtr);
    for (QuakeEntry qe : Data) {
        System.out.println(qe);
    }

    return maxIndex;
} 
```

所有类的代码： [https ://github.com/Evegen55/Java_DukeEdu_Coursera_2/blob/master/Earthquakes_Programming%20and%20Interfaces/src/earthquakes_programming_and_interfaces/QuakeEntry.java](https://github.com/Evegen55/Java_DukeEdu_Coursera_2/blob/master/Earthquakes_Programming%20and%20Interfaces/src/earthquakes_programming_and_interfaces/QuakeEntry.java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T01:55:18.510

似乎您还没有实现 AppointmentComparator 的比较器接口

# bash - BASH 算术问题

> ID：10082124
> 
> 赞同：3
> 
> 时间：2012-04-10T01:48:16.327
> 
> 标签：bash, arithmetic-expressions

我在 BASH 工作，我现在有一个白痴时刻。我有一个正在处理的项目，我将需要使用一些非常基本的算术表达式，我刚刚意识到我的很多问题是因为我的变量没有更新。因此，我将一个基本算法组合在一起，该算法通过 while 循环将另一个变量递增一个变量，直到达到某个数字。

```
counter=1
counter2=0

while [[ counter2 < 10 ]]; do
   counter2=$(($counter2+$counter))
   echo $counter
   echo $counter2
done 
```

我运行脚本。什么也没做。我将其设置`<`为`>`仅用于踢球，并且重复输出以下内容会发生无限循环：

```
1
0
1
0 
```

永远永远，直到我停止它。所以很明显变量没有改变。为什么？我觉得自己像个白痴，因为它一定是我忽略的一些愚蠢的东西。为什么，当我`<`有时，它也不是无限循环？为什么它根本不打印任何东西？如果`counter2`总是小于 10，为什么它不一直持续下去呢？

提前谢谢各位。

编辑：嗯，我意识到为什么当检查是`<`......我应该一直使用它`$counter2`而不是仅仅`counter2`为了获得`counter2`. 但现在它只是输出：

```
1
2 
```

就是这样......我觉得自己像个笨蛋。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T01:50:51.383

在 内`$((...))`，不要使用印记 ( `$`)。

```
counter2=$((counter2+counter)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T01:55:02.390

If this is all bash (100% sure) then you could use `declare -i` in order to explicitly set type of your variables and then your code will be as simple as :

```
declare -i counter=1
declare -i counter2=0

while [[ $counter2 -lt 10 ]]; do
   counter2=$counter2+$counter
   echo $counter
   echo $counter2
done 
```

EDIT: In bash, you can do arithmatic comparison with double paranethesis. So, your while can be written as:

```
while (($counter2 <  10)) ; do 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T02:32:30.063

In bash, you can use c-like for loops:

```
for (( counter2=0; counter2<10; counter2+=counter ))
do
   echo $counter": "$counter2
done 
```

Often you will find this construct more appealing to use:

```
for counter2 in {0..9}
do
    echo $counter": "$counter2
done 
```

# c - C程序：新手试图将二维字符串数组传递给函数

> ID：10082127
> 
> 赞同：4
> 
> 时间：2012-04-10T01:49:02.473
> 
> 标签：c

用 C 编程（使用 -std=C89），并在尝试将字符串数组传递给函数时遇到错误。

在`main()`中，我已将数组声明如下：

```
#define ROWS 501
#define COLS 101
void my_function( char **);
...
char my_array[ROWS][COLS];
...
my_function(my_array); 
```

在`my_function`中，我已将数组声明为：

```
void my_function( char **my_array )
{
...
} 
```

我收到此错误：

`warning: passing argument 1 of 'my_function' from incompatible pointer type, note: expected 'char **' but argument is of type 'char (*)[101]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T01:51:33.390

一个二维字符数组仍然是一个字符数组，其原型为`char *my_array`. 因此，只需将您的函数定义更改为：

```
void my_function(char *my_array) 
```

请注意，这将使阵列变平。有不同的技术来保持数组的二维性，一个简单的方法是使用这个替代原型：

```
void my_function(char my_array[][COLS]) 
```

传递时将保留数组的尺寸。

`char **my_array`意味着完全不同的东西（例如指向数组的指针）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T01:56:39.290

您可以将`char[]`变量作为 a传递`char*`，但不能将 a`char[][]`作为 a传递`char**`。当您使用参数`char** my_array`时，您是在说它的`*my_array`类型为'pointer-to-char'。实际上，它具有“字符数组”类型。`char**`如果您使用声明为 like 的数组`char* x[];`并且每个元素都是指向动态分配缓冲区的指针，您将使用类型参数。

使用多维数组时，您必须记住只能将数组的“最内层”维度替换为`*`. 如果您尝试抽象出多个维度，编译器将不知道如何进行数组运算。如果您需要一个函数，该函数在所有维度上采用任意大小的多维数组，则将数组作为 a`void*`传递，将数组维度作为附加参数传递，然后手动执行所有数组运算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T02:10:03.993

您可以有一个带有多维数组的函数签名，即：

```
my_fun(char my_array[][COLS]); 
```

你可能会从中得到一些：

[C 中指针和数组的教程](http://www.gamedev.net/page/resources/_/technical/general-programming/a-tutorial-on-pointers-and-arrays-in-c-r1697)，请参见第 7 章。

* * *

编辑：我怀疑你正在尝试做一些你不需要的事情。

```
#include <stdio.h>

#define ROWS 501
#define COLS 101

char my_arr[ROWS][COLS];

void foo(char arr[][COLS])
{
    arr[44][23] = 'a';
    printf("foo_1:  %p\n", (void*) arr);
    printf("foo_2:  %p\n", (void*) &arr);
    printf("foo_3:  %p\n", (void*) arr[44]);
    printf("foo_4:  %p\n", (void*) &arr[44]);
}

int main(void)
{
    foo(my_arr);
    printf("my_arr[%03d][%03d] is %c\n", 44, 23, my_arr[44][23]);
    /* my_arr[44][23] is now 'a', (also here)  */

    printf("main_1: %p\n", (void*) my_arr);
    printf("main_2: %p\n", (void*) &my_arr);
    printf("main_3: %p\n", (void*) my_arr[44]);
    printf("main_4: %p\n", (void*) &my_arr[44]);

    return 0;
} 
```

示例输出：

```
foo_1:  0x804a040  <---+
foo_2:  0xbece91f0     |
foo_3:  0x804b19c  <--------+
foo_4:  0x804b19c  <--------+
my_arr[044][023] is a  |    |
main_1: 0x804a040 <----+    |
main_2: 0x804a040 <----+    |
main_3: 0x804b19c <---------+
main_4: 0x804b19c <---------+ 
```

# algorithm - 仅使用插入和删除进行堆排序？

> ID：10082133
> 
> 赞同：0
> 
> 时间：2012-04-10T01:50:08.997
> 
> 标签：algorithm, sorting, heap, heapsort

我正在对我的算法考试进行复习，这是我在没有示例解决方案的旧考试中发现的一个问题。我不确定这个问题的合理答案是什么：

```
Using a heap and its two operations Remove and Insert,  design an algorithm which sorts an array of size n in O(nlogn) time. 
```

对我来说，这个问题看起来像一个简单的堆排序问题，我认为我的答案是：
- 1）将每个元素插入到最小堆中
- 2）从顶部删除堆中的所有内容并将它们放入数组中为了...

不确定这是他们想要的，任何人有任何想法请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:28:57.320

我认为你走在正确的轨道上。见[这里](http://courses.csail.mit.edu/6.006/fall10/lectures/lec09.pdf)，幻灯片 39。

# c# - 如何将调试器附加到脚本

> ID：10082135
> 
> 赞同：2
> 
> 时间：2012-04-10T01:50:30.800
> 
> 标签：c#, .net, visual-studio, debugging

在我的 .NET 应用程序中有一个可以输入代码的窗口（脚本，语言是 C#。它们通过反射运行）

我需要在编译的应用程序中调试脚本的可能性，就像在 Visual Studio 中一样。是否可以使用 MS Debugger 或任何其他工具？如果是怎么办？

编辑：没有 Visual Studio 可以吗？

好吧，从广义上讲，它是这样的：用户输入代码，按“运行”。Sсript 是在 .dll 中构建的。然后它通过反射运行（而不是通过 methodInfo.Invoke() ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:07:20.673

使用 System.Diagnostics.Debugger.Break() 停止运行并打开调试器。或 System.Diagnostics.Debugger.Launch() 启动调试器并将调试器附加到进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T01:56:15.717

启动您的应用，然后在 Visual Studio 中，选择“调试”>“附加到进程”，然后选择您的进程。这肯定会让您调试应用程序的预编译部分。至于调试用户输入的脚本......我想这取决于你如何运行它们。

编辑：在重新阅读您的问题时，我认为您是在询问是否可以*使用您的应用程序*调试用户代码，而不是使用 Visual Studio。如果是这样，我不确定这是否可能。我觉得这可能非常困难，但这取决于您运行用户代码的方式。更多细节会有所帮助。

# django - 尝试使用 Django 创建用户时带有关键字“用户名”的 FieldError

> ID：10082138
> 
> 赞同：0
> 
> 时间：2012-04-10T01:51:01.373
> 
> 标签：django, django-registration, django-users, django-errors

我的 Models.py，这里我在这里使用 OneToOneField 来扩展 StudentProfile。

```
from django.db import models 
from django.contrib.auth.models import User, UserManager

class SecretQuestion(models.Model):
    question = models.CharField(max_length=200)
    def __unicode__(self):
        return self.question

class StudentProfile(models.Model):
    user = models.OneToOneField(User)
    batch = models.CharField(max_length=10)
    course = models.CharField(max_length=20)
    date_of_birth = models.DateField()
    secret_question = models.ForeignKey(SecretQuestion)
    answer = models.CharField(max_length=20)
    contact = models.CharField(max_length=20) 
```

在我的注册视图中，我正在创建新用户 main_user 并使用它来创建学生资料：-

```
def register_page(request):
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            main_user = User.objects.create_user(
              username= form.cleaned_data['username'],
              password = form.cleaned_data['password1'],
             )
            user = StudentProfile.objects.create(               
                user_id = main_user.id,http://stackoverflow.com/questions/ask
                batch=form.cleaned_data['batch'],
                course=form.cleaned_data['course'],
                date_of_birth=form.cleaned_data['date_of_birth'],
                secret_question=form.cleaned_data['secret_question'],
                answer=form.cleaned_data['answer'],
                contact=form.cleaned_data['contact']
              )
        return HttpResponseRedirect('/register/success/')
    else:
       form = RegistrationForm()

   variables = RequestContext(request, {'form': form})
   return render_to_response('registration/register.html',variables) 
```

在 Django 中注册后，我得到了，

```
FieldError at /register/

Cannot resolve keyword 'username' into field. Choices are: answer, batch, contact, course, date_of_birth, id, secret_question, user 
```

这是在填写注册字段并按下注册按钮后发生的。我无法解释这个错误。这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:07:12.740

您需要按照向 django-registration 表单添加额外字段中的说明进行子`RegistrationForm`类[化](https://stackoverflow.com/questions/5122542/adding-extra-fields-to-django-registration-form)

* * *

[`User.objects.create_user`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.UserManager.create_user)没有名为 的关键字参数`username`。用户名必须是第一个位置参数：

```
 main_user = User.objects.create_user(form.cleaned_data['username'],
          password = form.cleaned_data['password1'],
         ) 
```

以后，请至少包括发生错误的行号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:30:08.880

当前代码不应导致此错误。

该错误表明您正在按类的`username`关键字参数进行过滤，根据您的模型`StudentProfile`，该类没有字段。`username`

错误应该列出您的代码在哪一行中断，并准确告诉您发生这种情况的位置——这就是答案所在。你的代码？Django注册码？我不知道，直到你发布它。

仅供参考，如果您尝试通过无效字段过滤模型，则会出现此错误。

```
MyModel.objects.filter(non_existent_field=True) # would throw this error. 
```

将无效字段传入`create`会导致`TypeError`

# c - C 编程 - 检查游戏板的所有有效解决方案

> ID：10082142
> 
> 赞同：-3
> 
> 时间：2012-04-10T01:51:52.787
> 
> 标签：c, recursion

好的，所以我要在 C 中创建一个代码，它输出板的所有可能解决方案。该板是一个 nxn 板，一排看起来像这样（3x3）：AA BA BB。

游戏的目标是通过仅垂直或水平穿过棋盘来访问棋盘中的每个位置。另外，如果第一个或第二个字母相同，则只能转到下一个位置，因此我可以从 AA 转到 BA，但不能从 AA 转到 BB，并且每个位置只能访问一次。起始位置始终是左上角或 00 位置。

无论如何，我想到了一种算法，计算机从 00 开始并检查下一个有效位置，比如说 01。然后计算机使用 00 和 01 链作为起始位置检查所有可能的解决方案。当没有更多时，计算机检查一个新链，比如 00、10 等等。你怎么知道不重复以前的解决方案？我在想一些递归的东西。除了我的，还有更有效的寻路算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:11:53.803

回复：*你怎么知道不重复以前的解决方案？*

深度优先搜索算法的一部分涉及标记访问过的节点，以免访问它们两次。这可以通过多种方式完成：节点本身的备用位，在每次搜索之前初始化，或者在被搜索的图外部的动态集合数据结构。

顺便说一下，这个问题与格雷码有关，格雷码是一种排列二进制字的代码的方式，以便在连续代码之间只有一位变化。例如 000 001 011 010 110 100 101 111。

这意味着在您的板上，当且仅当它是两位格雷码后继或前任时，您​​才能导航到相邻的方格。

但是格雷码形成一个序列。所以这个问题是同构的，其中有一个从 0 到 3 的简单编号，并且允许您从 N 到 N+1 后继或 N-1 前驱。

这可以帮助你思考问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:53:16.513

这是 Python 中一个非常低效的解决方案。你应该能够跟上。我不想只是用你自己的语言给出答案：P

```
class Finder:
    def __init__(self, board, n, x, y):
        self.board = board
        self.n = n

        # Create a copy of the board.
        self.copy = []
        for i in range(n):
            row = []
            self.copy += [row]
            for j in range(n):
                row += [False]

        # The best move sequence (longest).
        self.best = []
        # The current move sequence.
        self.move = []

        self.find(x, y)

    def valid_move(self,x1, y1, x2, y2):
        # Don't move off the board!
        if x2 < 0 or x2 > self.n - 1 or y2 < 0 or y2 > self.n - 1:
            return False

        # Don't go somewhere we've gone before!
        if self.copy[y2][x2]:
            return False

        # See if this is a valid move.
        a = self.board[y1][x1]
        b = self.board[y2][x2]
        return a[0] == b[0] or \
               a[0] == b[1] or \
               a[1] == b[0] or \
               a[1] == b[1] 

    def find(self,x, y):
        self.move += [(x, y, board[y][x])]
        self.copy[y][x] = True

        # If this is the best path, then create a copy.
        if len(self.move) > len(self.best):
            self.best = list(self.move)

        # Short-circuit if the optimal route is found.
        if len(self.best) == self.n * self.n:
            return

        newX = x - 1
        newY = y
        if self.valid_move(x, y, newX, newY):
            self.find(newX, newY)

        newX = x
        newY = y - 1
        if self.valid_move(x, y, newX, newY):
            self.find(newX, newY)

        newX = x + 1
        newY = y
        if self.valid_move(x, y, newX, newY):
            self.find(newX, newY)

        newX = x
        newY = y + 1
        if self.valid_move(x, y, newX, newY):
            self.find(newX, newY)

        # Clean up by removing the last move.
        self.move = self.move[:-1]
        self.copy[y][x] = False

 # The board
board = \
[["AB", "XX", "DE"],
 ["BB", "FE", "DD"],
 ["BC", "CC", "CD"],
 ]

# The size of the board.
n = 3

# Find!!
finder = Finder(board, n, 0, 0)

for row in board:
    print(row)

# Print empty line.
print()

for move in finder.best:
    print(move) 
```

这是输出：

```
['AB', 'XX', 'DE']
['BB', 'FE', 'DD']
['BC', 'CC', 'CD']

(0, 0, 'AB')
(0, 1, 'BB')
(0, 2, 'BC')
(1, 2, 'CC')
(2, 2, 'CD')
(2, 1, 'DD')
(2, 0, 'DE') 
```

# actionscript-3 - 执行操作时禁用鼠标事件（单击）

> ID：10082143
> 
> 赞同：0
> 
> 时间：2012-04-10T01:52:17.180
> 
> 标签：actionscript-3, flash, flash-cs5

我目前正在设计一个应用程序，当按下按钮时它会展开以显示更多信息。我面临的一个主要问题是，如果在收缩时按下按钮以使其再次展开，则从单击时开始保存坐标，这意味着它永远不会恢复到原始状态。

我要么需要一种在 TweenMax 执行其收缩按钮的工作时禁用鼠标单击按钮的方法，要么需要从数组中提取坐标。

我已经设法将菜单类中的坐标数组放入主类中，但无法找到阻止问题发生的最佳方法。

--

```
expand = false;
(run menu function)
item.addEventListener(MouseEvent.CLICK, boxExCo);

private function boxExCo(e:MouseEvent):void
{
    if (!expand)
    {
        selectedBox = e.target as Box;
        boxX = selectedBox.x;
        boxY = selectedBox.y;
        expand = true;
        TweenMax.to.... (expand)
    }
    else
    {
        expand = false;
        TweenMax.to... (contract to coordinates)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:06:16.940

`item.removeEventListener(MouseEvent.CLICK, boxExCo);`当您不再希望事件能够触发时，您需要使用，然后只需将其添加回使用

`item.addEventListener(MouseEvent.CLICK, boxExCo);`当您希望事件能够再次触发时。

启动补间最大值后，请删除该事件。

完成后，重新添加事件。

# multithreading - 使用 GPU 进行并行 for 循环的最简单方法

> ID：10082154
> 
> 赞同：6
> 
> 时间：2012-04-10T01:53:22.797
> 
> 标签：multithreading, language-agnostic, parallel-processing, gpu, gpgpu

我目前有一个与此类似的并行 for 循环：

```
int testValues[16]={5,2,2,10,4,4,2,100,5,2,4,3,29,4,1,52};
parallel_for (1, 100, 1, [&](int i){ 
    int var4;
    int values[16]={-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1};
    /* ...nested for loops */
        for (var4=0; var4<16; var4++) {
            if (values[var4] != testValues[var4]) break;
        }
    /* ...end nested loops */
} 
```

我已经尽可能地优化到我唯一能做的就是添加更多资源。

我有兴趣利用 GPU 来帮助并行处理任务。我读过这样的令人尴尬的并行任务可以非常有效地利用现代 GPU。

**使用任何语言，将 GPU 用于像这样的简单并行 for 循环的最简单方法是什么？**

我对 GPU 架构或原生 GPU 代码一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:28:36.503

正如 Li-aung Yip 在评论中所说，使用 GPU 的最简单方法是使用支持数组操作并自动（或多或少）将这些操作移至 GPU 的 Matlab。但要使其工作，您需要将代码重写为纯基于矩阵的操作。

否则，大多数 GPU 使用仍需要在 CUDA 或 OpenCL 中编码（您需要将 OpenCL 与 AMD 卡一起使用）。即使您使用自己喜欢的语言的包装器，在 GPU 上运行的实际代码通常仍然是用 OpenCL 编写的（看起来有点像 C）。所以这需要大量的学习/努力。您可以从 AMD 下载 OpenCL 并阅读文档开始...

我怀疑这两种选择都需要学习新的想法。我认为，您真正想要的是针对 gpu 的高级但仍具有传统外观的语言。不幸的是，它们似乎还不存在。我能想到的唯一例子是[theano——](http://deeplearning.net/software/theano/introduction.html)你可以试试。即使在那里，您仍然需要学习 python/numpy，而且我不确定 theano 实现有多可靠，但这可能是最不痛苦的前进方式（因为它允许“传统”方法 - 在很多方面使用矩阵更容易，但从概念上讲，有些人似乎发现很难掌握）。

ps 顺便说一句，我不清楚 gpu 是否会帮助您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T21:24:51.467

您可能想检查阵列火灾。

[http://www.accelereyes.com/products/arrayfire](http://www.accelereyes.com/products/arrayfire)

如果您使用 openCL，则需要为不同的设备供应商、i​​ntel、AMD 和 Nvidia 下载单独的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T15:04:30.990

您可能想查看通过指令启用并行性的[OpenACC 。](http://www.openacc.org/)您可以将您的代码 (C/C++/Fortran) 移植到异构系统，同时保持在同构系统上仍能良好运行的源代码。看看这个介绍[视频](http://www.openacc.org/content/short-intro-openacc)。OpenACC 不是 GPU 编程，而是将并行性表达到您的代码中，这可能有助于在不了解 CUDA 或 OpenCL 等低级语言的情况下实现性能提升。OpenACC 可用于 PGI、Cray 和 CAPS 的商业编译器（PGI 为新用户提供 30 天免费试用）。

# html - 从 iframe 中删除滚动条

> ID：10082155
> 
> 赞同：161
> 
> 时间：2012-04-10T01:47:29.553
> 
> 标签：html, css, iframe

使用此代码

```
<iframe frameborder="0" style="height: 185px; overflow:scroll; width: 100%" src="http://www.cbox.ws/box/?boxid=439&boxtag=7868&sec=main" marginheight="1" marginwidth="1" name="cboxmain" id="cboxmain" seamless="seamless" scrolling="no" frameborder="0" allowtransparency="true"></iframe> 
```

这就是它的显示方式（[http://www.talkjesus.com](http://www.talkjesus.com)主页上的喊话框）

如何移除水平滚动条并修改垂直滚动条的css？

* * *

## 回答 #1

> 赞同：407
> 
> 时间：2014-01-20T02:04:10.467

将`scrolling="no"`属性添加到 iframe。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-02-24T05:09:49.530

这适用于所有浏览器

```
<iframe src="http://buythecity.com"  scrolling="no" style=" width: 550px; height: 500px;  overflow: hidden;" ></iframe> 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-07-17T19:19:58.877

添加`scroll="no"`和`style="overflow:hidden"`在 iframe 上不起作用，我必须添加`style="overflow:hidden"`在 iframe 中加载的 html 文档的正文。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-06-06T16:23:51.750

只需添加`scrolling="no"`和`seamless="seamless"`属性到 iframe 标记。像这样：-

```
 1\. XHTML => scrolling="no"
 2\. HTML5 => seamless="seamless" 
```

更新：

`seamless`属性已在所有主要浏览器中删除

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2019-06-19T04:16:59.567

尝试添加`scrolling="no"`如下属性：

```
<iframe frameborder="0" scrolling="no" style="height:380px;width:6000px;border:none;" src='https://yoururl'></iframe>
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-10-18T21:00:04.770

如果这里有人在禁用 上的滚动条时遇到问题`iframe`，可能是因为 iframe 的内容在元素*下方*的`html`元素上有滚动条！

一些布局将`html`and设置`body`为 100% 高度，并使用带有（或）的`#wrapper`div ，从而将滚动移动到元素。`overflow: auto;``scroll``#wrapper`

在这种情况下，除了编辑其他页面的内容之外，您所做的任何事情都不会阻止滚动条出现。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-09-25T06:17:23.907

```
<div id="myInfoDiv" seamless="seamless" scrolling="no" style="width:100%; height: 100%; float: left; color: #FFF; background:#ed8719; line-height:100%; font-size:100%; font-family: sans-serif>; 
```

使用上面的 div，它不会在任何浏览器中显示滚动条。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-09-09T05:09:09.600

在你的css中添加这个来隐藏两个滚动条

```
iframe 
{
  overflow-x:hidden;
  overflow-Y:hidden;
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-04-10T02:01:12.473

在你的 CSS 中：

```
iframe{
    overflow:hidden;
} 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-06-06T22:53:18.413

这是最后的手段，但值得一提的是：

您可以使用`::-webkit-scrollbar`iframe 父级上的伪元素来摆脱那些著名的 90 年代滚动条。

```
::-webkit-scrollbar {
    width: 0px;
    height: 0px;
} 
```

**编辑：**虽然它[相对受支持](https://caniuse.com/#feat=css-scrollbar)，`::-webkit-scrollbar`但可能不适合所有浏览器。谨慎使用:)

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2019-09-08T21:17:12.990

```
iframe {
  display: block;
  border: none;         /* Reset default border */
  height: 100vh;        /* Viewport-relative units */
  width: calc(100% + 17px);
}
div {
  overflow-x: hidden;
} 
```

像这样，您使 iframe 的宽度大于应有的宽度。然后用overflow-x: hidden 隐藏水平滚动条。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2013-09-25T06:26:03.667

在你的css中添加这个来隐藏水平滚动条

```
iframe{
    overflow-x:hidden;
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-08-16T14:22:02.510

以上答案都不适合我。这是我在 JS 中所做的：

选择 iframe 元素：

```
var iframe_name = document.getElementById("iframe_name"); 
```

将属性添加到它：

```
 iframe_name.scrolling = "no"; 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2022-01-15T02:59:23.267

当没有任何效果时， float:left 可以保护您。

iframe {浮动：左；清除：两者；}

# objective-c - 如何使用 ParseKit 过滤掉不需要的令牌？

> ID：10082156
> 
> 赞同：3
> 
> 时间：2012-04-10T01:53:36.090
> 
> 标签：objective-c, parsekit

我正在使用 PK 来尝试标记 .gift 文件格式。我正在尝试执行以下操作：

给定一个与此类似的字符串：@"= 2 + 2"

我试图返回“2 + 2”，而无需费力地确定越过该字符串的标记是否等于符号，然后定义输出字符串应该如何。我想要做的是，如果 [PKToken.stringValue isEqualToString: @"="] 将该值从 PKTokenizer 中弹出，然后返回字符串的其余部分，其格式仍然完好无损。

让我知道这是否足够清楚......

——斯凯拉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:03:57.483

[ParseKit](http://parsekit.com)的开发者在这里。这是我的**ParseKit Tokenizer Answer**。

首先，我必须说，使用正则表达式可能比 ParseKit 更好地完成单个字符的简单过滤。

也就是说，如果您尝试使用 ParseKit**标记**器执行此类操作，请执行以下操作：

```
NSString *s = @"= 2 + 2";
PKTokenizer *t = [PKTokenizer tokenizerWithString:s];
t.whitespaceState.reportsWhitespaceTokens = YES;

PKToken *eof = [PKToken EOFToken];
PKToken *tok = nil;

NSMutableArray *toks = [NSMutableArray array];
while ((tok = [t nextToken]) != eof) {
    if (![tok.stringValue isEqualToString:@"="]) {
        [toks addObject:tok];
    }
}

NSString *result = [toks componentsJoinedByString:@""];
NSLog(@"%@", result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T02:37:29.990

[ParseKit](http://parsekit.com)的开发者在这里。这是我的**ParseKit 语法答案**。

同样，我必须说，使用正则表达式可能比 ParseKit 更好地完成单个字符的简单过滤。

也就是说，如果您尝试使用 ParseKit**语法**做这种事情，这里有一种方法：

我的语法：

```
@reportsWhitespaceTokens = YES;

@start = (reject! | passThru)+;
reject = '=';
passThru = ~reject; 
```

这`!`意味着**丢弃这个令牌**。是`~`逻辑**非**。

定义这个汇编器回调：

```
- (void)parser:(PKParser *)p didMatchPassThru:(PKAssembly *)a {
    NSLog(@"%s %@", __PRETTY_FUNCTION__, a);
    PKToken *tok = [a pop];
    if (!a.target) {
        a.target = [NSMutableArray array];
    }
    [a.target addObject:tok];
} 
```

您可以看到，我们只是将**passThru**令牌累积在一个数组中，该数组存储为程序集的目标。

我的驱动程序代码：

```
NSString *g = // fetch grammar above
PKParser *p = [[PKParserFactory factory] parserFromGrammar:g assembler:self];
NSString *s = @"= 2 + 2";

NSArray *toks = [p parse:s];
NSString *result = [toks componentsJoinedByString:@""];
NSLog(@"res '%@'", result);
NSAssert([result isEqualToString:@"2 + 2"], @""); 
```

最后，我们只需获取累积的标记（程序集的目标）并将它们组合成一个字符串。

# android - Android：我可以通过 onRetainNonConfigurationInstance 保存 Drawable 或 Bitmap

> ID：10082160
> 
> 赞同：0
> 
> 时间：2012-04-10T01:53:59.900
> 
> 标签：android

通过 onRetainNonConfigurationInstance() 传递 Drawable 或 Bitmap 以节省再次调用 res.getDrawable() 的费用是否合理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T22:21:51.197

你不应该传递d​​rawables。改变方向后，Android 可能会从资源中选择不同的可绘制对象。在我的项目中，我只传递从互联网加载的数据。

[http://developer.android.com/resources/articles/faster-screen-orientation-change.html](http://developer.android.com/resources/articles/faster-screen-orientation-change.html)

这里写着：

> 不过，要非常小心通过 onRetainNonConfigurationChange() 传递的对象。如果您传递的对象由于某种原因与 Activity/Context 相关联，您将泄漏 Activity 的所有视图和资源。这意味着你永远不应该传递 View、Drawable、Adapter 等。

对不起我的英语=）

# objective-c - (Mac) 创建执行 shell 脚本的 Xcode 应用程序

> ID：10082162
> 
> 赞同：1
> 
> 时间：2012-04-10T01:54:09.067
> 
> 标签：objective-c, xcode, cocoa, shell

这似乎是我想要完成的一件简单的事情，远远低于 Xcode / Interface Builder 的能力。我已经搜索和搜索并没有给出我的答案，但大多数搜索都将我带到这里，所以我创建了一个帐户来询问专家。我想创建一个非常简单的 GUI，它有四到五个按钮，每个按钮执行一个简单的 shell 脚本，不需要终端窗口，但如果是这样的话，我可以用一个开始。除了 shell 脚本，我还需要在应用程序中安装 adb（Android 调试桥）和 fastboot 实用程序。我假设我需要将 adb 和 fastboot 以及我的其他文件放在 Resources 文件夹中，我还假设我需要将我的 shell 脚本放在 Classes 文件夹中。我真的只需要知道如何将按钮连接到脚本，我' 我希望这只是我忽略的一些简单的事情。提前致谢。

MacBook Pro 7,1 OSX 10.6.8 Xcode 3.2.6

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T01:58:25.607

**尝试这个 ：**

```
- (void)runCmd:(NSString *)cmd withArgs:(NSArray *)args
{
    if (task)
    {
        [task interrupt];

    }
    else
    {
        task = [[NSTask alloc] init];
        [task setLaunchPath:cmd];

        [task setArguments:args];

        [pipe release];

        pipe = [[NSPipe alloc] init];
        [task setStandardOutput:pipe];

        NSFileHandle* fh = [pipe fileHandleForReading];

        NSNotificationCenter* nc;

        nc = [NSNotificationCenter defaultCenter];
        [nc removeObserver:self];
        [nc addObserver:self 
               selector:@selector(dataReady:) 
                   name:NSFileHandleReadCompletionNotification 
                 object:fh];
        [nc addObserver:self selector:@selector(dataAvailable:) name:NSFileHandleDataAvailableNotification object:fh];
        [nc addObserver:self 
               selector:@selector(taskTerminated:) 
                   name:NSTaskDidTerminateNotification 
                 object:task];

        [task launch];
        [fh readInBackgroundAndNotify];
    }
}

- (void)dataAvailable:(NSNotification*)n
{
    NSLog(@"Data Available : %@",n);
}

- (void)dataReady:(NSNotification*)n
{
    NSData* d;

    d = [[n userInfo] valueForKey:NSFileHandleNotificationDataItem];

    if ([d length])
    {
        NSLog(@"Data Ready : %@",[[NSString alloc] initWithData:d encoding:NSUTF8StringEncoding]);
        [[[task standardOutput] fileHandleForReading] readInBackgroundAndNotify];
    }
}

- (void) taskTerminated:(NSNotification*)note
{
    [task release];
    task = nil;
} 
```

# android - Actionbarsherlock + 选项卡 + 多片段？

> ID：10082163
> 
> 赞同：17
> 
> 时间：2012-04-10T01:54:19.067
> 
> 标签：android, tabs, android-fragments, actionbarsherlock

我已经非常努力地让 actionbarsherlock + 选项卡 + 片段工作。

我只能让这个设置作为静态工作，我想创建这个像 android 市场应用程序（滑动移动）。

当您需要为内部包含多个片段的布局充气时，我会卡住。

在 Support4demos 中，我得到了 FragmentsTabsPager 作为示例。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-10T03:41:00.480

实际上，除了 ABS 库和支持库之外，我还设法让这个工作正常进行。这是我的代码：

```
public class ActionBarTabs extends SherlockFragmentActivity {
CustomViewPager mViewPager;
TabsAdapter mTabsAdapter;
TextView tabCenter;
TextView tabText;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    mViewPager = new CustomViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter.addTab(bar.newTab().setText("Home"),
            ToolKitFragment.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("FujiSan"),
            FujiFragment.class, null);
}

public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
}
} 
```

您根据以下内容加载选项卡内容。

```
mTabsAdapter.addTab(bar.newTab().setText("Home"),
            YOURFRAGMENTHERE.class, null); 
```

这将为您提供可爱的“滑动标签”效果，正如您所指的那样，带有 ABS、支持库和片段。ABS 确实使这与使用本机库几乎相同。实际上，我直接从 Google 的分页选项卡示例中复制了这段代码，并为 ABS 稍作修改。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-10T03:22:11.767

你需要正确的库来实现你想要的。

基本上，`ViewPager`图书馆是你所缺少的。我的建议：

**1.动作栏夏洛克**

使用起来非常容易，我不会解释它。

**2\. ViewPagerExtensions**

你可以在[这里](https://github.com/astuetz/ViewPagerExtensions)找到它。下载 ZIP 文件并从中创建一个新项目。

> 我只能让这个设置作为静态工作，我想创建这个像 android 市场应用程序（swype 运动）。

`com.astuetz.viewpager.extensions.SwipeyTabsView`从这个项目实施。有一些易于理解的例子。它完全符合您的要求。甚至还有其他选项卡样式可供选择（包括 ICS 附带的新人物选项卡）。此外，它的样式很容易与您的应用程序标识相匹配。

**3.`FragmentPagerAdapter`**

最后，来自支持库（v4）的那个类。

祝你好运，如果您需要更多帮助，请随时问我。

* * *

如果您使用我的建议`instantiateItem`，则无需覆盖。`FragmentPagerAdapter`你只需要

1.  提供带有 a 的构造函数`FragmentManager`并调用超级实现；
2.  覆盖`getCount`以返回寻呼机中的片段数，以及
3.  `getItem`，**这是您将用于返回片段以进行创建的内容。**

这是我在这里的代码示例（一个完整的工作示例）。它是实现寻呼机的活动的内部类：

```
static class MyFragmentPagerAdapter extends FragmentPagerAdapter {

    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return 2;
    }

    @Override
    public Fragment getItem(int position) {
        Fragment f;
        switch(position) {
        case 0:
            f= new ItemSalesDataFragment();
            break;
        case 1:
            f= new DepartmentChooserFragment();
            break;
        default:
            throw new IllegalArgumentException("not this many fragments: " + position);
        }
        return f;
    }
} 
```

如您所见，此寻呼机处理两个“页面”，左侧显示销售数据。右边的允许用户选择哪个部门。这些在`getItem`方法中返回。正确的片段（您可以使用已有的任何片段，无需修改）。

正如预期的那样，您可以通过以下方式将所有这些结合在一起：1）创建一个实例化的对象`MyFragmentPagerAdapter`，以及 2）将您的对象的适配器设置为`ViewPager`您刚刚实例化的那个类。如您所见，它的`getItem`方法将为寻呼机“提供”您需要的所有片段。例子：

```
mFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
mViewPager.setAdapter(mFragmentPagerAdapter); 
```

**当然，还有其他事情要做，比如自己创建标签按钮并将所有这些加入到交叉通信中。我建议查看从 GitHub 下载的 ViewPagerExtensions ZIP 文件中提供的示例。这只是您评论中问题的答案。如您所见，使用这个库的代码并不多。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T22:26:47.593

`IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first`很多示例在切换回之前选择的选项卡时通常会抛出异常 ( )。

我喜欢使用 a`FragmentStatePageAdapter`而不是 plain来调整 Google 的示例`FragmentPageAdapter`，它将为您替换片段并解决此错误。通常这会破坏它认为可以删除以节省空间的碎片；`destroyItem(ViewGroup, int, Object)`如果您想始终保留您的片段，请使用空块覆盖。

这是一个例子：

```
public class ActionBarTabs extends SherlockFragmentActivity {
    CustomViewPager mViewPager;
    TabsAdapter mTabsAdapter;
    TextView tabCenter;
    TextView tabText;
    ActionBar mActionBar;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

        mViewPager = new CustomViewPager(this);
        mViewPager.setId(R.id.pager);

        setContentView(mViewPager);
        mActionBar = getSupportActionBar();
        mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        mActionBar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

        mTabsAdapter = new TabsAdapter(this, mViewPager);

        mTabsAdapter.addTab(mActionBar.newTab().setText("Page 1"), 
            YOURFRAGMENT_A.class, null);
        mTabsAdapter.addTab(mActionBar.newTab().setText("Page 2"), 
            YOURFRAGMENT_B.class, null);
        mTabsAdapter.addTab(mActionBar.newTab().setText("Page 3"), 
            YOURFRAGMENT_C.class, null);
    }

    public static class TabsAdapter extends FragmentPagerAdapter
            implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
        private final Context mContext;
        private final ActionBar mActionBar;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        static final class TabInfo {
            private final Class<?> clss;
            private final Bundle args;

            TabInfo(Class<?> _class, Bundle _args) {
                clss = _class;
                args = _args;
            }
        }

        public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mActionBar = activity.getSupportActionBar();
            mViewPager = pager;
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
            TabInfo info = new TabInfo(clss, args);
            tab.setTag(info);
            tab.setTabListener(this);
            mTabs.add(info);
            mActionBar.addTab(tab);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext,
                info.clss.getName(), info.args);
        }

        @Override
        public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
        }

        @Override
        public void onPageSelected(int position) {
            mActionBar.setSelectedNavigationItem(position);
        }

        @Override
        public void onPageScrollStateChanged(int state) {
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            Object tag = tab.getTag();
            for (int i = 0; i < mTabs.size(); i++) {
                if (mTabs.get(i) == tag) {
                    mViewPager.setCurrentItem(i);
                }
            }
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
        }
    }
} 
```

与 ABS 配合良好，实施起来相对简单。

# c# - 实体框架不可为空的列映射到可空的实体属性

> ID：10082164
> 
> 赞同：8
> 
> 时间：2012-04-10T01:54:29.507
> 
> 标签：c#, entity-framework, mapping, poco, nullable

我在 Entity Framework 4.1 中收到此可为空的列错误消息 - 当该列实际上不可为空时：

```
Non-nullable column MyView.RunningTotal in table TransactionListView 
is mapped to a nullable entity property. 
```

但是您可以从下面的屏幕截图中看到，该列不可为空，并且实体属性也不可为空。那么为什么会出现这个错误呢？

![在此处输入图像描述](../Images/b348f9b0c8c603824825735143c754a4.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T13:10:55.653

直接的解决方案是手动将 Nullable 参数指定为 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-18T20:10:44.543

2017 更新 (Visual Studio 2017)

如果 lLya 提到的公认的直接解决方案对您没有帮助，那么这可能。您可能会注意到，当您保存图表时，它会执行一些工作，例如根据图表更改更改类属性。人们会认为生成器本身会意识到这些变化，对吧？！您可能仍然会收到此错误。

为我解决的问题是重新生成数据库（在图表中单击鼠标右键-> 从模型中重新生成数据库）。

# c# - DropDownList 中来自一个 SqlDataSource 的不同值

> ID：10082173
> 
> 赞同：1
> 
> 时间：2012-04-10T01:56:36.133
> 
> 标签：c#, asp.net, visual-studio-2010, drop-down-menu

我在一页上有十个 DropDownList。当我对所有人使用相同的数据源时，所有十个中都有重复的值。有没有一种方法可以为所有十个 DropDownList 使用一个 SqlDataSource，并且只为每个获取不同的值。

这是一个示例 Dropdown 和 SqlDataSource：

```
<asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SqlDataSource1" DataTextField="County" DataValueField="County"AppendDataBoundItems="true"></asp:DropDownList>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings %>" 
    SelectCommand="SELECT Distinct * FROM [Personal]"></asp:SqlDataSource> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:29:54.397

我怀疑您的 sql 查询返回了欺骗，因为您使用的是 select *. 如果表中的任何记录具有与其他字段不同的字段，例如自动增量主键，您也将返回这些记录。Distinct 确保整个记录集是唯一的。

尝试将您的查询限制在您需要的字段。

```
SELECT Distinct County FROM [Personal] 
```

检查此链接： [http ://www.w3schools.com/sql/sql_distinct.asp](http://www.w3schools.com/sql/sql_distinct.asp)

# cron - rsync 脚本有效，但在通过 cron 安排时无效

> ID：10082176
> 
> 赞同：4
> 
> 时间：2012-04-10T01:56:43.593
> 
> 标签：cron, crontab, rsync, nfs

我正在尝试执行一个 shell 脚本来运行一个“rsync”进程，该进程将服务器上的本地目录同步到安装在同一台服务器上的 NFS 挂载。我正在以“root”身份运行一个脚本，即“sudo”进入有权写入 NFS 挂载的用户，并运行另一个执行“rsync”的 shell 脚本。

当我以“root”身份手动运行此脚本时，脚本运行成功。但是，当我安排脚本通过 'cron' 运行时，'rsync' 过程开始，但没有完成，在构建文件列表的阶段停止。

这是我以“root”身份运行的脚本“exec_NFS_rsync.sh”：

```
#!/bin/bash

sudo -u nfsuser /path/to/scripts/nfs_rsync/scripts/NFS_rsync.sh 
```

这是“NFS_rsync.sh”的内容：

```
#!/bin/bash

##
## VARIABLES
##

# rsync binary
rsync="/usr/bin/rsync"

# Source
sourcedir="/path/to/source/files/"

# Destination
destdir="/path/to/destination/nfs/mount/"

# Exclude
exclude="--exclude=*.tmp --exclude=tmp/ --exclude=*.lck"

# Log file
log_file="/path/to/log/folder/NFS_rsync.log"

##
## SCRIPT
##

# Check if the log file exists
if [ ! -e $log_file ]; then
        touch $log_file
fi

if [ ! -d $destdir ]; then
        echo "Log destination directory doesn't seem to exist. Please investigate"
        exit 2
fi

# Start entry in the log
echo "$(date "+%Y-%m-%d %k:%M:%S") - Local Storage to NFS Sync started." >> $log_file

# Start sync NFS to Local
`$rsync -av --stats --delete $exclude $sourcedir $destdir >> $log_file`

echo "$(date "+%Y-%m-%d %k:%M:%S") - Local Storage to NFS Sync completed." >> $log_file

# End entry in the log
echo "" >> $log_file
exit 
```

这是我从“cron”运行时收到的输出：

```
2012-04-05 16:20:01 - Local Storage to NFS Sync started.
building file list ... 2012-04-05 16:20:01 - Local Storage to NFS Sync completed. 
```

请注意，“构建文件列表”永远不会被标记为“完成”。

不进行文件传输。

这是“crontab”条目：

```
*/10 * * * * /path/to/scripts/nfs_rsync/scripts/exec_NFS_rsync.sh 
```

如果我手动运行它，我会得到完整的详细输出并且传输成功完成，然后显示统计信息（我不会包括它，因为它很长）。

我不认为这是权限问题，因为我可以从 shell 以“root”身份执行“exec_NFS_rsync.sh”脚本，也可以直接以“nfsuser”身份执行“NFS_rsync.sh”脚本。

这是 NFS 挂载的“fstab”条目：

```
nfsfiler:/path/to/nfs/mount /path/to/destination/nfs/mount/      nfs     hard,intr,nfsvers=3,rw,rsize=32768,wsize=32768 0 0 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:50:04.993

怎么指定

```
*/10 * * * * su - l nfsuser -c /path/to/scripts/nfs_rsync/scripts/NFS_rsync.sh 
```

在你的根 crontab 中？

# php - Need help hiding some code

> ID：10082178
> 
> 赞同：0
> 
> 时间：2012-04-10T01:57:07.107
> 
> 标签：php, javascript, joomla, content-management-system, virtuemart

I am working on a Joomla(1.5.14)/Virtuemart(1.1.3) website and I have run into a problem implementing some AdWords code snippets due to being unable to use PHP in the Category Description areas in Virtuemart.

This is what I wanted to achieve.

I have the main AdWords snippet in the main 'index.php' file for the website as follows:

```
<?php if ($HideAdWords != "yes") : ?>

<!-- Google Code for Every user Remarketing List -->
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = ###;
var google_conversion_language = "en";
var google_conversion_format = "3";
var google_conversion_color = "666666";
var google_conversion_label = "###";
var google_conversion_value = 0;
/* ]]> */
</script>
<?php if ($_SERVER['HTTPS']) { ?>
<script type="text/javascript" src="https://www.googleadservices.com/pagead/conversion.js">
<?php } else { ?>
<script type="text/javascript" src="http://www.googleadservices.com/pagead/conversion.js">
<?php }?>

</script>
<noscript>
<div style="display:inline;">
<!--<img height="1" width="1" style="border-style:none;" alt="" src="###"/>-->
</div>
</noscript>

<?php endif; ?> 
```

On certain pages I included a different AdWords code along with the following PHP snippet, wanting to remove the original piece of code from the page when browsing this page:

```
<?php
$HideAdWords = "yes";
?> 
```

This did do what I wanted it to however on most of the pages I need to apply this I am not able to use PHP, when entering PHP into a category description in Virtuemart, upon saving changes it comments out any PHP code and makes it useless.

I have tried searching as much as I can, and tried the Joomla/Virtuemart specific websites/forums. I managed to get JavaScript working in these category description areas so I was wondering if maybe I can replicate this effect with JavaScript or maybe you guys can think of a better solution?

I hope I have been clear, any help would be really appreciated.

Kind Regards.

*edit: fixed unspecific title.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:41:02.053

Well, you could do that in js, you could use in js:

```
 //js part included in php file that loads as common file to all, like footer or header
var hideAdWords = "<?php if ($HideAdWords) { echo "yes"; } else { echo "no"; } ?> 
```

now your js variable hideAdWords can have either "yes" or "no". And you can use that as js variable. Did you mean something like that

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:51:26.617

If you want to do this in JavaScript, use this snippet in your main page:

```
<script>
(function() {
  if(window.hideAdWords) return;
  var google_conversion_id = "###",
      google_conversion_language = "en",
      google_conversion_format = "3",
      google_conversion_color = "666666",
      google_conversion_label = "###",
      google_conversion_value = 0;

  document.write(unescape("%3Cscript%20type%3D%22text/javascript%22%20src%3D%22//www.googleadservices.com/pagead/conversion.js%22%3E%3C/script%3E"));
}());
</script> 
```

Then your PHP just needs to write out:

```
<script>
  hideAdWords = <?php print ($HideAdWords == "yes" ? 'true':'false'); ?>;
</script> 
```

If you aren't able to guarantee that the hideAdWords line would be printed before the function block, you can change the function block so that it is wrapped in an event handler that fires when the page has finished loading (this example uses jQuery but you can easily do the same thing with an addEventListener call):

```
<script>
jQuery(function() {
  if(window.hideAdWords) return;
  var google_conversion_id = "###",
      google_conversion_language = "en",
      google_conversion_format = "3",
      google_conversion_color = "666666",
      google_conversion_label = "###",
      google_conversion_value = 0;

  document.write(unescape("%3Cscript%20type%3D%22text/javascript%22%20src%3D%22//www.googleadservices.com/pagead/conversion.js%22%3E%3C/script%3E"));
});
</script> 
```

Given that the only difference between the SSL and HTTP urls is the schema, you can drop the protocol and start the url with a double slash to just use the http or https that the current page has been accessed through.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:21:10.007

Did you take a look at some of the Google Analytics extensions for Virtuemart?

[BIT Virtuemart Google Analytics](http://extensions.virtuemart.net/component/sobi2/?sobi2Task=sobi2Details&catid=11&sobi2Id=762&Itemid=2)

[Google Analytics for Virtuemart](http://extensions.joomla.org/extensions/extension-specific/virtuemart-extensions/virtuemart-stats/15669)

I have no experience with them, but they seem to have a lot of options.

# wordpress - MediaElement WP 插件不起作用 IE9

> ID：10082182
> 
> 赞同：0
> 
> 时间：2012-04-10T01:57:41.933
> 
> 标签：wordpress, mediaelement.js

我们正在为 WordPress 使用 MediaElement.js 插件，该插件在除 IE9 on Win 之外的所有浏览器中都运行良好。我已经用 mp3 彻底测试了音频播放器，它只是无法播放大文件。

“本机”插件（HTML5）什么都不做。

调试模式下的“silverlight”插件显示状态为“正在打开...”，但没有任何反应。

“flash”插件只有在下载了大部分文件后才能播放大型 mp3。

有人对此有任何修复吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:18:34.997

原来Flash的缓慢是由Virtual PC接口引起的。

因此，解决方法是编辑 mediaelement-and-player.js，绕过 IE9 的“本机”播放器，将其置于“shim”模式。然后，绕过所有 IE 的“silverlight”播放器（也不能在 IE8 中工作）。

# java - 使用 Java 将一组月份转换为几天

> ID：10082186
> 
> 赞同：1
> 
> 时间：2012-04-10T01:58:09.263
> 
> 标签：java, helper

我正在尝试制作一种方法，您可以在其中输入当前月份的参数以及要追溯的月份数，并将所有这些转换为天数。例如，如果当前月份是 1 月，并且我想将过去 5 个月转换为天数，则答案将是 153。我有以下信息可供使用。

```
 private Calendar cal;

    private int currentMonth;

    private final int JANUARY = 31;
    private final int FEBRUARY = 28;
    private final int MARCH = 31;
    private final int APRIL = 30;
    private final int MAY = 31;
    private final int JUNE = 30;
    private final int JULY = 31;
    private final int AUGUST = 31;
    private final int SEPTEMBER = 30;
    private final int OCTOBER = 31;
    private final int NOVEMBER = 30;
    private final int DECEMBER = 31;

    public Constructor(){
        cal = new GregorianCalendar();
        currentMonth = cal.get(Calendar.MONTH);
    }

    private int convertMonthsToDays(int currentMonth, int months){
        int days;
        return days;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:16:08.573

当一切都在 Java 中时，为什么要创建自己的算法。

只需计算现在和 5 个月前之间的毫秒数。

```
 long now = System.currentTimeMillis();

    Calendar calendar = GregorianCalendar.getInstance();
    //Here I set the calendar to now. But you can set the date you want.
    // by using the method  calendar.set()
    calendar.setTimeInMillis(now);
    calendar.add(Calendar.MONTH, -5);
    long previous = calendar.getTimeInMillis();

    int numberOfDays =(int)( (now - previous) / (1000* 3600 *24)); 
```

希望有帮助。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T02:16:47.407

将此代码用于您想要的

```
package test;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.hibernate.Criteria;
import org.hibernate.Session;
import org.hibernate.criterion.Restrictions;

import com.ibm.icu.util.Calendar;
import com.ibm.icu.util.GregorianCalendar;
import com.mPower.fw.dao.ClassMaster;
import com.mPower.fw.impl.DaoServiceIMPL;
import com.mPower.fw.util.hibernateUtil;

public class runT {

    public static void main(String[] args) throws IOException {
        try{
            Calendar calendar = new GregorianCalendar();
            int CURRENT_MONTH = 0;
            int MONTH_BACK = 5;

            int totalDays = 0;

        calendar.set(Calendar.MONTH, CURRENT_MONTH);

            for(int i=0;i<MONTH_BACK;i++){
                totalDays += calendar.getMaximum(java.util.Calendar.DAY_OF_MONTH);
                calendar.add(Calendar.MONTH, -1);
            }

            System.out.println(totalDays);

        }catch(Exception e){
            e.printStackTrace();
        }
    }

} 
```

使用 calendar.add(Calendar.MONTH, **-1** ); 一个月前。

使用 calendar.add(Calendar.MONTH, **1** ); 向前一个月。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T02:06:41.473

这个实现的主要问题是它被固定到 2000 年，而不是当前年份。

```
private int convertMonthsToDays(int currentMonth, int months){
    int days = 0;

    for (int iter=0; iter < months; iter++)
    {
      currentMonth = (currentMonth - iter) % 12;
      this.cal.set(2000, currentMonth, 1);
      days = days + this.cal.getActualMaximum(Calendar.DAY_OF_MONTH);
    }

    return days;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:13:01.230

我不确定您是否可以使用 SimpleDateFormat 但是这是一个非常简单的 IMO 示例。不知道社区对此有何看法，但它确实有效：

```
private static SimpleDateFormat monthNumberFormat = new SimpleDateFormat("M");
private static SimpleDateFormat daysOfYearFormat = new SimpleDateFormat("DDD");

private static int convertMonthsToDays(int currentMonth, int months){
    try {
        Date startingDate = monthNumberFormat.parse(currentMonth + "");
        Date endingDate = monthNumberFormat.parse(currentMonth - months + "");
        return Integer.parseInt(daysOfYearFormat.format(startingDate)) - 
                Integer.parseInt(daysOfYearFormat.format(endingDate));
    } catch (ParseException e) {
        return -1;
    } catch (NumberFormatException nfe){
        return -1;
    }
} 
```

这里没有检查你是否传递了有效的参数，也没有考虑到一年多的时间。

使用这种方法，您可以传递所需的月份数和要返回的月份数，它将为您提供天数差异。

# javascript - jQuery/Javascript 取消（或覆盖？）

> ID：10082187
> 
> 赞同：0
> 
> 时间：2012-04-10T01:58:11.923
> 
> 标签：javascript, jquery, jquery-plugins, jquery-mobile, quicksand

我对 Javascript 不是很好，我目前正在尝试将手风琴功能添加到 div，以便我可以揭示更多细节。这是我目前的移动网站，**[http ://txf4199.cias.rit.edu/mobile-test-4/index.html#work](http://txf4199.cias.rit.edu/mobile-test-4/index.html#work)**

**问题：**我可以点击“查看更多”，手风琴效果会很好地显示内容。但是，如果我使用站点顶部的过滤器（“Mobile”、“Motion”等），手风琴效果将不再起作用。

*仅供参考：过滤器使用 quicksand.js（过滤插件）和 main.js（自定义脚本），但手风琴效果只是使用内联脚本，因为它太小了。*

这是我的 js 文件的列表：

```
<!-- jQuery -->
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/jquery.quicksand.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" language="javascript">
    $(document).ready(function() {
        $('.accordionButton').click(function() {
            $(this).next().slideToggle();
        });
    });
</script> 
```

我已经查找了文档就绪功能，认为问题不止一个，但这是可以接受的，所以我不知道该去哪里找。任何帮助将不胜感激，我会像鹰一样看这篇文章，提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:32:40.777

尝试删除您对 jquery 1.5 的引用。您同时包含 jquery 1.7.1 和 jquery 1.5。我想这可能会导致一些问题。还可以尝试使用 jqm 中的默认可折叠行为。在这里阅读更多[http://jquerymobile.com/demos/1.1.0-rc.2/docs/content/content-collapsible.html](http://jquerymobile.com/demos/1.1.0-rc.2/docs/content/content-collapsible.html)

更新：

哦，也不要使用准备好的文件。而是绑定到 pageinit 事件。

```
$(document).on('pageinit','[data-role=page]',function(){
    put code that you want for every page here.
}); 
```

# android - Android：如何安全地将数据发送到网站

> ID：10082189
> 
> 赞同：1
> 
> 时间：2012-04-10T01:58:38.197
> 
> 标签：android, database, security

我只是想知道如何安全地将数据发送到网站，以便网站可以在用户（网站）登录时显示信息。我对 MySQL 或类似的东西不太熟悉。数据只是文本，但如果任何人都可以包含代码示例，那就太好了。

干杯尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:56:24.023

人们通常会创建一个 RESTful API 以允许您的客户端访问数据。此 API 应通过 HTTPS。**不要信任该设备**，这一点很重要。您应该假设这与任何其他 Web 应用程序后端一样，并且攻击者可以直接访问它。

# jquery - 以不同的视图将表单发布到 rails

> ID：10082192
> 
> 赞同：0
> 
> 时间：2012-04-10T01:58:54.187
> 
> 标签：jquery, post, ruby-on-rails-3.1

我已经创建了一个我想在我的应用程序布局中提交的反馈表。

在`app/views/layout/application.html.erb`

```
<%= form_tag "/feedback_responses", :id => "feedback-form", do |f| %>
  <%= label_tag "feedback" %>
  <%= text_area_tag "feedback" %>
<% end %>

<button id="submit-feedback">Feedback</button> 
```

在`app/assets/javascripts/application.js`

```
//= require jquery
//= require jquery-ui
//= require twitter/bootstrap

$( "#feedback-form" ).dialog({
    autoOpen: false,
    height: 300,
    width: 350,
    modal: true,
    buttons: {
        "Send feedback": function() {
          $.post( this.action, $(this).serialize(), function(){
            $( this ).dialog( "close" );
          });
        },
        "No thanks": function() {
          $( this ).dialog( "close" );
        }
    },
    close: function() {
    }
});

$( "#submit-feedback" ).button().click(function() {
        $( "#feedback-form" ).dialog( "open" );
    }); 
```

当我尝试发布时，控制器会记录

```
Started POST "/feedback_responses" for 127.0.0.1 at 2012-04-09 21:54:40 -0400
  Processing by FeedbackResponsesController#create as */*
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"HOPejZ/me+tTVglsNZjLoMqs0+SLaz5+AYPWWhiTAoY=", "feedback"=>"asdf"}
  SQL (0.8ms)  INSERT INTO "feedback_responses" ("created_at", "feedback", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 10 Apr 2012 01:54:41 UTC +00:00], ["feedback", nil], ["updated_at", Tue, 10 Apr 2012 01:54:41 UTC +00:00]]
Redirected to http://myapp.dev/feedback_responses/7
Completed 302 Found in 51ms 
```

控制器是脚手架`app/controllers/feedback_responses_controller.rb`

```
 # POST /feedback_responses
  # POST /feedback_responses.json
  def create
    @feedback_response = FeedbackResponse.new(params[:feedback_response])

    respond_to do |format|
      if @feedback_response.save
        format.html { redirect_to @feedback_response, notice: 'Feedback response was successfully created.' }
        format.json { render json: @feedback_response, status: :created, location: @feedback_response }
      else
        format.html { render action: "new" }
        format.json { render json: @feedback_response.errors, status: :unprocessable_entity }
      end
    end
  end 
```

帖子或控制器上的某些配置错误，但我就是不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:21:20.027

我更深入地探索了我的其他形式并弄清楚了。

这是自从该帖子的关键以来使用的名称：

```
<%= form_tag "/feedback_responses", :id => "feedback-form", do |f| %>
  <%= label_tag "feedback" %>
  <%= text_area_tag "feedback" %>
<% end %> 
```

应该

```
<%= form_tag "/feedback_responses", :id => "feedback-form", do |f| %>
  <%= label_tag "feedback" %>
  <%= text_area_tag "feedback_response[feedback]" %>
<% end %> 
```

# mysql - 如何优化 ORDER 条件以防止文件排序？

> ID：10082194
> 
> 赞同：0
> 
> 时间：2012-04-10T01:59:17.760
> 
> 标签：mysql, counter-cache

当我想在 MySQL 中按条件排序查询时，如何避免文件排序？

```
ORDER BY (videos_count > 0) DESC, name 
```

`has_videos`缓存布尔列和计数会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:24:41.427

如何将查询分成两部分，首先是包含至少一个视频的部分，然后（仅在需要时）其余部分：

```
select *  from video_table  
where video_count > 0
order by name 
```

如果您需要超越这些：

```
select *  from video_table  
where video_count = 0
order by name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:00:36.337

一般来说，为了避免文件排序，您通常需要点击索引 - 为了点击索引，您通常需要对裸列值进行排序（因为通常为列创建索引）。

# javascript - 返回 false 和 true 的正则表达式

> ID：10082197
> 
> 赞同：-2
> 
> 时间：2012-04-10T02:00:28.253
> 
> 标签：javascript, regex

我创建了一个函数，用于检查输入文本字段是否有效，然后将类名附加到将对应于某些 css 代码的元素，或者如果有效则不执行任何操作。

```
function checkInputText(inputType, elem, oldClass, classError) {
    var inputT = document.getElementById(elem);
    var oldClass = oldClass;
    var b = regex[inputType].test(inputT.value)
    if (!b) {
        inputT.className = classError + ' ' + oldClass;
        return false;
    } else {
        inputT.className = oldClass;
    }
} 
```

但是，由于某种未知的原因，当函数调用 .test() 函数时，它第一次为某个事件返回 true，但当您再次尝试它时，它返回 false。

完整的代码在这里[http://jsfiddle.net/assuredlonewolf/cscyB/2/](http://jsfiddle.net/assuredlonewolf/cscyB/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T02:05:31.810

“与 exec（或与它结合使用）一样，在同一个全局正则表达式实例上多次调用的测试将超过上一次匹配。” [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)

您可以通过将 重置`lastIndex`为 0 或在每个测试中创建一个新的正则表达式来解决此问题。

# php - 根据脚本更改 OpenCart 中的价格

> ID：10082201
> 
> 赞同：1
> 
> 时间：2012-04-10T02:00:49.140
> 
> 标签：php, opencart

我正在建立一个零售企业，使用 opencart 通过互联网销售黄金。不同之处在于我只接受比特币（BTC），一种新的加密货币。

问题是贵金属价格和 BTC/GBP 交易所非常不稳定。因此，我需要我的 opencart 价格以相当频繁的速度自动更新，以避免因汇率变动而陷入困境并亏本出售。

我编写了一个附加的脚本，该脚本可以提取黄金、白银和铂金的价格，然后以比特币计价。

因此，对于网站上的每个金属物品，我希望目录中所有产品的价格自动更改（每 15 分钟一次比较理想）。

**我的问题是：如何根据脚本更新 opencart 数据库中的价格？**

价格必须根据四件事改变：物品所含贵金属的类型。该项目的百分比标记该项目包含的贵金属重量。物品的硬币类型。

我希望这些东西成为可在 opencart 中编辑的属性。对于每个项目，将有四个（额外）属性

金属类型 => 黄金 => 银 => 铂金 => 不是金属（对于其他物品，它会忽略所有重量、价格变化） 百分比标记百分比（整数？）重量整数硬币标记整数“所以，假设我' m 出售 1/4 盎司克鲁格朗型金币：

四分之一盎司金币重 7.77 克，因此在产品页面上，重量会与该数字一起列出。基本价格将设置为 7.77 克 * 以克为单位的黄金价格（这个数字是使用附加的 php 脚本获取的）。

我的批发黄金价格的默认加价为 10%，“基本”价格将增加 10%，这也将列在产品页面上。

由于历史原因，Krugerrands 倾向于包含超过黄金批发价的价值。所以硬币加价大约是 5 个比特币，价格会上涨以反映这一点。" 买家不应该看到这些价格变动，他们应该只看到价格变化以反映所有这些

每小时所有产品的价格都会发生变化，以反映黄金价格和 BTC 英镑汇率的变化。

下面是一个 PHP 脚本，用于提取黄金价格、白银价格和铂金价格，然后以比特币计价一克金属的价格。这是我编程过的第一件事，所以可能有点冗长，或者不遵循给定的约定。答案可能很复杂，所以我不指望一个完整的。很高兴收到一些指示！

```
 <?php
  /* This is a script that ultimately displays the price of gold in grams, denominated       in Bitcoins (BTC), a non fiat cryptographic currency. This is also the first thing I have ever programmed, so be nice */

 // line break variable
 $br = "<br> <br>";

    // CURL begin
//curl session 1: grab metal prices
$ch1 = curl_init();
curl_setopt( $ch1, CURLOPT_URL, 'http://drayah.no.de/metals/latest' );
curl_setopt( $ch1, CURLOPT_RETURNTRANSFER, 1 );
$metalsdata = curl_exec( $ch1 );

// curl session 2: Grab exchange rate for BTC/GBP
$ch = curl_init();
curl_setopt( $ch, CURLOPT_URL, 'https://mtgox.com/api/1/BTCGBP/public/ticker' );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt( $ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt( $ch, CURLOPT_FRESH_CONNECT, 1); 
curl_setopt( $ch, CURLOPT_TIMEOUT_MS, 1000);
curl_setopt( $ch, CURLOPT_USERAGENT, 'useragent');
$btcgbpdata = curl_exec( $ch );
curl_close( $ch );

// curl session 3: Grab  British pounds to USD exchange rates
$ch1 = curl_init();
curl_setopt( $ch1, CURLOPT_URL, 'https://raw.github.com/currencybot/open-exchange-rates/master/latest.json' );
curl_setopt( $ch1, CURLOPT_Rcheck if my code isETURNTRANSFER, 1 );
$currencydata = curl_exec( $ch1 );

//gold digest: turn JSON data into readable php, and extract the gold price
$metals  = json_decode( $metalsdata, true, 512 );
$goldprice = $metals['gold']['quote'];
$silverprice = $metals['silver']['quote'];
$platprice = $metals['platinum']['quote'];

//BTC digest of JSON

$btcgbp = json_decode( $btcgbpdata, true, 512 );
$btcgbpvwap = ($btcgbp['return']['vwap']['value']);
echo "$btcgbpvwap pounds per BTC";
echo $br;

//currency digest of JSON
$currency = json_decode( $currencydata, true, 512 );
$usdgbp = ($currency['rates']['GBP']);
echo "$usdgbp pence per USD dollar";
echo $br;
echo $br;
// convert metals into price per ounce in pounds

$goldpounds = $goldprice * $usdgbp;
$silverpounds = $silverprice * $usdgbp;
$platpounds = $platprice * $usdgbp;
echo "GBP $goldpounds per ounce of gold";
echo $br;
echo "GBP $silverpounds per ounce of silver";
echo $br;   
echo "GBP $platpounds per ounce of platinum";
echo $br;
echo $br;

//metals prices in grams
$goldpoundsgram = $goldpounds / 31.1034768;
$silverpoundsgram = $silverpounds / 31.1034768;
$platpoundsgram = $platpounds / 31.1034768;
echo "$goldpoundsgram pounds per gram of gold";
echo $br;
echo "$silverpoundsgram pounds per gram of silver";
echo $br;
echo "$platpoundsgram pounds per gram of platinum";
echo $br;
echo $br;
// metal prices denominated in BTC
$btcgoldgram = ($goldpoundsgram / $btcgbpvwap);
$btcsilvergram = ($silverpoundsgram / $btcgbpvwap);
$btcplatgram = ($platpoundsgram / $btcgbpvwap);
echo "<b>"; 
echo $btcgoldgram;
echo " bitcoins per gram of gold";
echo $br;   
echo $btcsilvergram;
echo " bitcoins per gram of silver";
echo $br;
echo $btcplatgram;
echo " bitcoins per gram of platinum";

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T05:56:11.383

实际上`price`只是表中的一个数字字段`product`，您可以根据`product_id`.

同一张表中还有一列`cost`，仅用于在管理面板中报告收入。如果您对此类报告感兴趣，您也可以更新它。

要恢复，`product_id`您可以使用产品名称`product_description`（注意名称已*本地化*）。假设您的数据库包含名为*gram of silver*的产品，那么您的更新可能是

```
update product p,product_description d set price=$btcsilvergram
 where p.product_id=d.product_id and name='gram of silver' 
```

价值是免税的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:37:54.763

我正在看类似的东西。由于我的供应商价格都是美元（即他们都不会接受比特币），我更愿意将这些价格硬编码到 Opencart 中，然后使用 Opencart 的内置汇率转换器收取足够的比特币来支付我的任何给定成本天。通过调整我的管理和主题设置，我可以仅以 BTC 显示价格，并取消访问者更改默认货币（菜单项、模块等）的能力。然后，我只需要定期更新 Opencart 中的 USD->BTC​​ 汇率，所有产品价格都会适当更新 - 每天、每天 4 倍、每小时等。

Opencart 数据库有一个名为“货币”的表，用于存储适当的汇率。

比特币通常以 BTC-USD 报价（每 1btc 美元 XXusd），但我需要 USD-BTC 汇率，因为我的价格以美元存储。我反转了一个样本比特币价格（1 / $4 => .25btc 每 1 美元）并将其存储在 Opencart 中。

```
CURRENCY:
(4, 'Bitcoin', 'btc', 'B⃦', 'BTC', '2', 0.25000000, 1, '2012-04-10 12:13:45'),  
(2, 'US Dollar', 'USD', '$', '', '2', 1.00000000, 1, '2012-04-10 12:12:33'); 
```

现在，我只是一个脚本，可以在需要时更新“.25000000”值。我打算回避整个 Opencart 系统并在服务器上设置一个 cron 作业以每天更新一次值。我在其他地方设置了几个警报，以通知我比特币价格是否出现大跌。如果价格发生极端变化，我可以登录 Opencart 并手动调整价格。

希望这可以帮助 ：-）

# linux - 仅在不存在时添加换行符

> ID：10082204
> 
> 赞同：42
> 
> 时间：2012-04-10T02:01:19.410
> 
> 标签：linux, bash, sed, newline

仅当文件不存在时，我才想在文件末尾添加换行符。这是为了防止文件末尾出现多个换行符。

我希望使用`sed`. 以下是我在当前代码中遇到的问题：

```
sed -i -e '/^$/d;$G' /inputfile

echo file1
name1
name2

echo file2
name3
name4
(newline) 
```

当我在文件上运行我的代码时；

```
echo file1
name1
name2
(newline)

echo file2
name3
name4 
```

如果没有换行符，它会添加一个换行符，但如果存在则将其删除......这让我感到困惑。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-24T17:45:52.363

### sed

GNU：

```
sed -i '$a\' *.txt 
```

操作系统：

```
sed -i '' '$a\' *.txt 
```

`$`解决最后一行。`a\`是附加功能。

### OS X 的 sed

```
sed -i '' -n p *.txt 
```

`-n`禁用打印并`p`打印图案空间。`p`在 OS X 的 sed 中添加了一个缺少的换行符，但在 GNU sed 中没有，所以这不适用于 GNU sed。

### awk

```
awk 1 
```

`1`可以替换为任何计算结果为真的东西。就地修改文件：

```
{ rm file;awk 1 >file; }<file 
```

### 重击

```
[[ $(tail -c1 file) && -f file ]]&&echo ''>>file 
```

从命令替换的结果中删除尾随换行符，因此只有以换行符结尾或为`$(tail -c1 file)`空时才为空。如果为空则为假。相当于在 bash 中。`file``-f file``file``[[ $x ]]``[[ -n $x ]]`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-10T02:37:43.053

与其用 see 处理整个文件，只是在末尾添加换行符，只需检查最后一个字符，如果它*不是*换行符，则追加一个。换行的测试有点有趣，因为 shell 通常会从字符串的末尾修剪它们，所以我附加“x”来保护它：

```
if [ "$(tail -c1 "$inputfile"; echo x)" != $'\nx' ]; then
    echo "" >>"$inputfile"
fi 
```

请注意，这会将换行符附加到空文件中，这可能不是您想要的。如果您想单独保留空文件，请添加另一个测试：

```
if [ -s "$inputfile" ] && [ "$(tail -c1 "$inputfile"; echo x)" != $'\nx' ]; then
    echo "" >>"$inputfile"
fi 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-10T02:18:12.773

因为如果它不存在它会删除换行符，你可以简单地使用：

```
echo "" >> file;  sed -ie '/^$/d;$G' file; sed -ie '/^$/d;$G' file 
```

添加换行符并删除所有内容，然后添加换行符。不是优雅的方式，但肯定有效:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-18T22:56:15.337

```
tail -c1 file | read -r _ || echo >> file 
```

将文件的最后一个字符通过管道输入`read`，如果在换行符之前遇到 EOF ，它将以非零退出代码退出（因此，如果文件的最后一个字符不是换行符）。如果`read`退出非零，则在文件上附加一个换行符`echo`（如果`read`退出 0，则满足`||`，因此该`echo`命令不运行）。

来自[http://backreference.org/2010/05/23/sanitizing-files-with-no-trailing-newline/](http://backreference.org/2010/05/23/sanitizing-files-with-no-trailing-newline/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-10T02:54:00.490

使用 awk ：

```
awk '/^$/{f=1}END{ if (!f) {print "\r"}}1' inputfile 
```

匹配空行`^$`（就像你做的那样）并设置一个标志。如果最后没有设置标志，则放置换行符。

注意：这`\r`是在 OS X 中。`\n`用于其他。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-16T20:21:12.100

尝试使用`vi`或`ex`：

```
ex -scwq foo.txt 
```

或多个文件：

```
vi -es +"bufdo wq" *.txt
ex -s +"bufdo wq" *.txt 
```

如果丢失，它会在文件保存时自动在 EOF 处添加 EOL。

要递归地申请某些文件，请使用[新的通配选项](http://www.linuxjournal.com/content/globstar-new-bash-globbing-option)( `**`)，例如`**/*.txt`(enable by `shopt -s globstar`)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-15T06:33:05.580

**仅使用 Bash**

您可以将命令替换（删除尾随换行符）与 Here Strings（附加换行符）一起使用：

```
 Command Substitution
       Command substitution allows the output of a command to replace the command  name.   There  are  two
       forms:

          $(command)
       or
          `command`

       Bash  performs  the expansion by executing command in a subshell environment and replacing the com-
       mand substitution with the standard output of the command,  with  any  trailing  newlines  deleted.
       Embedded newlines are not deleted, but they may be removed during word splitting.  The command sub-
       stitution $(cat file) can be replaced by the equivalent but faster $(< file).

   Here Strings
       A variant of here documents, the format is:

          [n]<<<word

       The word undergoes brace expansion, tilde expansion, parameter and variable expansion, command sub-
       stitution,  arithmetic expansion, and quote removal.  Pathname expansion and word splitting are not
       performed.  The result is supplied as a single string, with a newline appended, to the  command  on
       its standard input (or file descriptor n if n is specified). 
```

以下是它的工作原理：

```
cat <<<"$(<inputfile)" 
```

输出到文件：

```
cat <<<"$(<inputfile)" >outputfile 
```

如果您需要`inputfile`和`outputfile`要使用相同的文件名，您有几个选项 - 使用`sponge`命令，使用更多命令替换保存到临时变量，或保存到临时文件。

* * *

**使用 Sed**

其他人建议使用

```
sed '$a\' inputfile 
```

最后一行没有附加任何内容。这很好，但我认为

```
sed '$q' inputfile 
```

更清楚一点，因为它在最后一行退出。或者你可以做

```
sed -n 'p' 
```

它用于`-n`抑制输出，但使用`p`.

在任何这些情况下，`sed`将修复行并添加换行符，至少对于 GNU 和 BSD sed。但是，我不确定此功能是否由 POSIX 定义。的一个版本`sed`可能只是跳过你的行而没有换行，因为一行被定义为

> [零个或多个非字符加上一个终止字符的序列。](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_205)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-22T13:11:40.910

我通过使用`dos2unix`（或对应物）与`--newline`标志解决了这个任务。优点是这些工具可以自行检测二进制文件。我喜欢这个解决方案，`tail -c1`但事先过滤二进制文件对我来说*真的很*慢。

```
dos2unix --newline my_file.txt 
```

最终，我编写了一个脚本来搜索我的项目目录，将除文件 ( , ) 之外的所有文件转换为`LF`( )，并使用标志通过一次调用来正确获取换行符。`dos2unix``*.cmd``CRLF``unix2dos`

# ruby-on-rails - 新的 OS X Ruby on Rails 安装无法连接到数据库

> ID：10082205
> 
> 赞同：3
> 
> 时间：2012-04-10T02:01:34.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我将首先给出我的规格：

*   RVM 1.12.1
*   导轨 3.2.3
*   Ruby 1.9.3p125（2012-02-16 修订版 34643）[x86_64-darwin12.0.0]
*   RubyGem 1.8.21
*   OS X 10.8 山狮
*   Kenneth Reitz 的 OSX 10.7+ 的 GCC 安装程序，第 2 版（包括 X11 标头，错误修复）

我的 Gemfile 如下：

```
source 'https://rubygems.org'
gem 'rails', '3.2.3'
# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

    # See https://github.com/sstephenson/execjs#readme for more supported runtimes
    # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

我的 database.yml 是：

```
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000 
```

当我启动服务器并转到默认主页并单击“查看环境”按钮时，我收到“ActiveRecord::ConnectionNotEstablished”错误。

当我检查控制台时，我看到：

```
/Users/username/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.3/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': Please install the mysql adapter: `gem install activerecord-mysql-adapter` (mysql is not part of the bundle. Add it to Gemfile.) (LoadError)
from /Users/username/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/activerecord-3.2.3/lib/active_record/connection_adapters/mysql_adapter.rb:5:in `<top (required)>'
from /Users/username/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /Users/username/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
from /Users/username/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/username/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require' 
```

尽管我使用的是 SQLite 并且在任何地方都没有引用 MySQL。这可能是某种使用 10.8 的副作用吗？我难住了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:57:21.923

几个月前，我正在使用 java 和 Play 开发一个项目！框架，我们使用一个名为 DATABASE_URL 的环境变量来轻松管理开发和生产中的数据库配置。在我的情况下，变量设置为`mysql://root@localhost:3306/database_name`.

事实证明，它也`rails 3.2`尝试从名为 DATABASE_URL 的环境变量中获取数据库配置。

这是 rails 3.2 分支上的代码：

[https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb#L91-135](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb#L91-135)

rails 3.1 分支上的相同方法：

[https://github.com/rails/rails/blob/3-1-stable/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb#L23-82](https://github.com/rails/rails/blob/3-1-stable/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb#L23-82)

所以我只是删除了环境变量，一切又正常了。

# c# - 导入效果错误

> ID：10082209
> 
> 赞同：2
> 
> 时间：2012-04-10T02:01:58.817
> 
> 标签：c#, 3d, xna

我今天开始学习 3D 绘图，遵循这个 tut：

[http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/The_first_triangle.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/The_first_triangle.php)

本教程的第一页提供了文件 effects.fx。

但是，由于某种原因，调试时出现此错误：

错误：在执行任何绘制操作之前，必须在设备上设置顶点着色器和像素着色器。

我在谷歌上搜索了一个解决方案，但没有一个有效。

你能帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:55:39.120

在 draw 方法中放入：

```
foreach(EffectPass pass in effect.CurrentTechnique.Passes)
{
    pass.Apply();
    device.DrawUserPrimitives(PrimitiveType.TriangleList, vertices, 0, 1, 
    VertexPositionColor.VertexDeclaration);
} 
```

# css - 将浮动在另一个 div 内的 div 高度设置为 100%

> ID：10082210
> 
> 赞同：0
> 
> 时间：2012-04-10T02:02:24.020
> 
> 标签：css, html, height, css-float, parent

如果它是浮动的，我如何将 div 设置为父 div 的 100%？

这是我拥有的两种样式，其中侧边栏是容器的子项-

```
#container {
    width:1200px;
    margin-top:40px;
    overflow:hidden;
    text-align:center;
}
#sidebar {
    width:260px;
    float:left;
    overflow:hidden;
    height:1554px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:29:09.820

我会用 Javascript 或者更好的 jQuery 来做。看看这里：[如何使用 jQuery 使多个 DIV 保持相同的高度？](https://stackoverflow.com/questions/803688/how-do-i-keep-multiple-divs-the-same-height-using-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:38:59.370

仅包含浮动子元素的元素的高度折叠为 0。因此，如果要将子元素的高度设置为父元素的 100%，则需要手动设置父元素的高度。

# database - 在关系数据库中表示工作时间/时间表

> ID：10082211
> 
> 赞同：0
> 
> 时间：2012-04-10T02:02:27.063
> 
> 标签：database, relational-database, entity-relationship, schedule

我正在为临时工/兼职人员开发一个可搜索的数据库，但我没有实施他们的工作时间可用性的经验。我已经为员工、技能、代理和客户开发了模式。现在我需要捕获员工的每小时可用性。

系统应该能够表示 24/7 小时时间表的任意组合，即：

*   周一 8-9am，周二 1-5am，周三 3-10pm；
*   周一至周五下午 1 点至 4 点；
*   周六至周日上午 8 点至下午 6 点；

当然，偶尔也会有全职工作的异常值，尽管我认为在员工表中会有一个全职的布尔字段，并且只有在员工是兼职。

对此的任何经验/指导/方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:50:20.093

我将通过以下列关注每个用户每天的可用性来对其进行建模：

a) 第 (1-7) 天，其中 1 是星期日，7 是星期六，遵循 MySQL 约定

b) 开始时间 - 如果不可用，开始时间可以为空

c) 结束时间 - 如果不可用，结束时间可以为空

d) 备注 - 关于当天可用性的任何备注

e) userid（正在显示其日程的用户的 ID）

f) 不可用 - 是/否

这意味着每个用户将有 7 条可用性记录。但是，在用户面上，您可以进行调整以将数据从一天复制到另一天

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-10T17:03:49.653

为什么不只是在某个时间段的时间间隔和用户之间创建关联呢？如果您知道，这是 1 周的循环，您可以选择任何给定的一周。如果您知道，它是 1 个月的循环，您可以选择任何给定的月份等...

StartAvailableDateTime1 DATETIME,
AvailableDateTime2 DATETIME,
UserID INT

# linux - 如何实现快速屏障？

> ID：10082212
> 
> 赞同：0
> 
> 时间：2012-04-10T02:02:28.350
> 
> 标签：linux, pthreads

现在我实现了我的障碍。但效果不佳。

当我运行障碍时间计算代码 pthread_barrier_wait 消耗 180000 我们我的障碍消耗 390000 我们

我不知道为什么，我想做更快的屏障

这是我的屏障代码

```
 82 pthread_mutex_t     mutexwait1;
 83 int wait_count = NUM_THREADS;
 84 int barrier1234(void) {                                                     
 85 
 86     int status, cancel, tmp;
 87     status = pthread_mutex_lock(&mutexwait1);
 88     wait_count = wait_count - 1;
 89     if(wait_count == 0){ 
 90         pthread_cond_broadcast(&cond1);
 91         wait_count = NUM_THREADS ;  
 92     }   
 93     else
 94         status = pthread_cond_wait(&cond1, &mutexwait1);
 95 
 96     pthread_mutex_unlock(&mutexwait1);
 97     return status;
 98 
 99 } 
```

我找到了一些 barrier_wait 函数，但它没有用。（从 glibc 下载）=> 编译障碍时出现错误消息（结构变量不匹配）=> 我想知道这个错误是由版本引起的

我正在使用 ubuntu 10.04 请教我为什么我的屏障很慢。以及如何实现默认 pthread_barrier_wait （在我的平台上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T01:31:10.773

glibc 的屏障是使用较低级别的原语实现的，而不是互斥锁和条件。

您的基于互斥锁的实现有一个明显的问题，即它需要每个唤醒的线程重新获取互斥锁才能释放它。这与屏障的精神背道而驰：本身就是一流的原语。（当然，这是一种快速而肮脏的代码移植的好方法，它需要对只提供互斥体和条件的平台设置障碍。）

顺便说一句，大约十二年前，我编写了第一个存在于 glibc 中的 POSIX 屏障函数。*眨眼！*

# javascript - 表格行点击 - 两个目的地

> ID：10082215
> 
> 赞同：0
> 
> 时间：2012-04-10T02:03:23.407
> 
> 标签：javascript, html, css

我想让整个表格行可点击，包括空格。我已经看到了使用 JavaScript 和 TR 上的点击处理程序的方法，或者只是将每个 TD 设置为 display:block。

皱纹是我还希望在该行中有一些文本链接到其他地方，但不会触发整个其余行的基础链接。本质上，这个特殊的文本就像一个“徽章”。

像这样的东西：

```
T = Text
B = Badge
W = Whitespace 
```

行中的单个单元格可能如下所示：

```
TTTTT BB WWWWWWWWWWWWWWWWWWW 
```

单击 T 和 W 将转到一个链接，这是通常的情况。但是点击 B 会在新窗口中打开一个不同的链接，并且不会在主窗口中打开原始链接。

寻找正确方向的指针，这是否可以用纯 HTML/CSS 或 JavaScript 等完成。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:14:03.213

您可以使用 A 元素进行导航，然后如果该行从其中获得点击，则忽略它。

```
<tr onclick="doSomething(event);">
  <td>
    <a href="…">TTTTT</a><a href="…">BB</a>WWWWWWWWW…

function doSomething(evt) {
  var tgt = evt.target || evt.srcElement;
  if (tgt && tgt.tagName.toLowerCase() == 'a' && tgt.href) {
    // don't do click action
    return;
  } 
  // do click action
} 
```

哦，不要让 TRs *display: block*因为它们应该是*display: table-cell*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T02:13:26.567

查看事件的`target`FF/Chrome/Safari 或`srcElement`IE 属性。即使您正在收听 TR 上的事件，您也应该看到`event.target`实际点击的内容。然后，您可以查看元素（或其父元素）以确定要采取的操作。更多细节：[https ://developer.mozilla.org/en/DOM/event.target](https://developer.mozilla.org/en/DOM/event.target)

# html - 在字符串 (PowerShell) 中转义 HTML 特定字符的最佳方法是什么？

> ID：10082217
> 
> 赞同：37
> 
> 时间：2012-04-10T02:03:49.143
> 
> 标签：html, powershell, html-escape-characters

我正在使用 PowerShell 脚本生成一些简单的 HTML，并且我想转义结果 HTML 中使用的字符串（因为它们可以包含一些特定于 HTML 的符号）。

例如：

```
$a = "something <somthing else>"; 
```

应转换为以下内容：

```
"something &lt;something else&gt;" 
```

是否有任何内置功能？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-10T02:15:10.450

System.Web 中有一个类可以执行此操作。

```
Add-Type -AssemblyName System.Web
[System.Web.HttpUtility]::HtmlEncode('something <somthing else>') 
```

你甚至可以走另一条路：

```
[System.Web.HttpUtility]::HtmlDecode('something &lt;something else&gt;') 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-02-13T08:34:20.783

从 PowerShell 3.0 开始，可`[System.Net.WebUtility]`用于以下四种常见操作中的任何一种：

```
[System.Net.WebUtility]::HtmlEncode('something <somthing else>')
[System.Net.WebUtility]::HtmlDecode('something &lt;somthing else&gt;')
[System.Net.WebUtility]::UrlEncode('something <somthing else>')
[System.Net.WebUtility]::UrlDecode('something+%3Csomthing+else%3E') 
```

`[System.Web.HttpUtility]::HtmlEncode`是 .NET 4.0（PowerShell 2.0 或更早版本）之前的常用方法，但需要加载`System.Web.dll`：

```
Add-Type -AssemblyName System.Web 
```

从 .NET 4.0 (PowerShell 3.0) 开始`[System.Web.HttpUtility]::HtmlEnocde`内部调用`[System.Net.WebUtility]::HtmlEncode`，因此省略中间人 ( `System.Web.dll`) 是有意义的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-17T00:43:49.203

$SomeEmail = "user@domain.com"

$EncodedString = ([uri]::EscapeDataString($SomeEmail))

写主机 $EncodedString

[使用 [uri] 编码使它更容易](https://i.stack.imgur.com/vbbZ3.png)

# asp-classic - 返回 SCOPE_IDENTITY() 而不使用 CreateParam

> ID：10082218
> 
> 赞同：3
> 
> 时间：2012-04-10T02:03:50.540
> 
> 标签：asp-classic, vbscript, adodb

我正在尝试此操作，但`ADODB.Recordset error '800a0e78' Operation is not allowed when the object is closed.`使用此代码时出现错误`If ScopeID.EOF Then`

请不要回答使用该`CreateParam`方法，寻找没有该方法的解决方案。谢谢。

```
<%  
    set Cmd = Server.CreateObject("ADODB.Command")
    Cmd.ActiveConnection = conn

    Cmd.CommandText = "INSERT INTO TABLE (NAME) VALUES ('test')  SELECT SCOPE_IDENTITY() AS ID"
    Cmd.CommandType = 1
    Cmd.CommandTimeout = 0
    Cmd.Prepared = true

    Set ScopeID = Cmd.Execute()

    If ScopeID.EOF Then
        Response.Write "There was an Error in your request, Please try again"
        Response.End
    Else
        ID= ScopeID(0).Value
    End IF

    ScopeID.Close
    Set ScopeID = Nothing
    Set Cmd = Nothing

    Response.Write ID

%> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T07:14:27.367

尝试这个：

```
Cmd.CommandText = "SET NOCOUNT ON; INSERT INTO TABLE (NAME) VALUES ('test'); SET NOCOUNT OFF; SELECT SCOPE_IDENTITY() AS ID" 
```

据我了解，如果 SET NOCOUNT ON 没有“隐藏”实际插入语句，SQL Server 将返回一个（空）记录集。我认为错误消息是指正在关闭的记录集，而不是连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T13:56:29.140

`.NextRecordSet()`在命令之后应用就可以了：

```
<%  
    set Cmd = Server.CreateObject("ADODB.Command")
    Cmd.ActiveConnection = conn

    Cmd.CommandText = "INSERT INTO TABLE (NAME) VALUES ('test')  SELECT SCOPE_IDENTITY() AS ID"
    Cmd.CommandType = 1
    Cmd.CommandTimeout = 0
    Cmd.Prepared = true

    Set ScopeID = Cmd.Execute()
            ScopeID.NextRecordSet() // <---- Fix

    If ScopeID.EOF Then
        Response.Write "There was an Error in your request, Please try again"
        Response.End
    Else
        ID= ScopeID(0).Value
    End IF

    ScopeID.Close
    Set ScopeID = Nothing
    Set Cmd = Nothing

    Response.Write ID

%> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:56:22.097

如果您正在运行现代版本的 SQL Server（我认为是 2005 年），您可以使用输出子句：

```
Cmd.CommandText = "insert into [dbo].[test] (name) output inserted.id values ('test')" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T08:04:03.900

将您的查询分为两部分：

```
INSERT INTO TABLE (NAME) VALUES ('test'); SELECT SCOPE_IDENTITY() AS ID 
```

注意`;`. 我认为您查询的第二部分没有执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T02:26:16.480

你的连接打开了吗？似乎这就是错误消息所抱怨的内容。您无法针对已关闭的连接执行命令。

# php - PHP 让 GET 理解 0

> ID：10082221
> 
> 赞同：0
> 
> 时间：2012-04-10T02:04:15.507
> 
> 标签：php, get

我怎样才能让“GET”理解数字 0 而不理解 0 什么都不是？

```
if(empty($_GET['number'])) {
echo "No GET variables"; 
}

if($_GET['number']){
$number=strip_tags(addslashes(htmlspecialchars($_GET['number'])));
echo $number;
} 
```

如果变量“数字”= 1，它将回显“1”，但如果数字为 0，它将回显“无 GET 变量”

我怎样才能让它理解 0 以及其他数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T02:05:08.090

`empty``true`如果你给它一个`0`;返回 您可以`isset`改为检查它是否已设置（无论值如何）：

```
if(isset($_GET['number'])) 
```

来自[http://php.net/empty](http://php.net/empty)：

> 如果 var 具有非空且非零值，则返回 FALSE。
> 
> 以下内容被认为是空的：
> 
> *   `""`（一个空字符串）
> *   `0`（0 为整数）
> *   `0.0`（0 作为浮点数）
> *   `"0"`（0 作为字符串）
> *   `NULL`
> *   `FALSE`
> *   `array()`（一个空数组）
> *   `var $var;`（声明的变量，但在类中没有值）

我的测试：

```
$_GET['number'] = "0";
assert(isset($_GET['number']));

$_GET['number'] = 0;
assert(isset($_GET['number'])); 
```

您的代码应如下所示：

```
if(!isset($_GET['number'])) {
   echo "No GET variables"; 
}

if(isset($_GET['number'])) {
   $number=strip_tags(addslashes(htmlspecialchars($_GET['number'])));
   echo $number;
} 
```

或者更简洁

```
if(!isset($_GET['number'])) {
   echo "No GET variables"; 
} else {
   $number=strip_tags(addslashes(htmlspecialchars($_GET['number'])));
   echo $number;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T02:23:45.687

试试这个：使用运算符的第三个字符

```
if ($_GET['number'] !== '') 
```

# ios - 使自定义 UI 元素不在 TableViewController 中滚动

> ID：10082222
> 
> 赞同：0
> 
> 时间：2012-04-10T02:04:20.127
> 
> 标签：ios, uitableview

我制作了一个自定义 UIPickerView ，我想隐藏它，然后在按下按钮时将其动画到屏幕上。我通常对此没有问题。我只是将视图作为子视图添加到 self.view 但问题是我试图将它设置在 tableViewController 中。当我将它添加到 self.view 时，它最终只是被粘在 tableviewcontroller 上并随着 tableview 滚动......这不是我想要的。我尝试将它添加到 self.view.window 但这不起作用......我只是无法在任何地方看到我的自定义元素。

我觉得这很简单，但我只是错过了一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:15:35.163

听起来您希望此选择器在需要时向上滑动屏幕然后消失。可能有很多方法可以做到这一点，但第一件事是它不应该是视图控制器的子视图。更有可能它应该是视图控制器父视图的子视图。

我会寻找最好的方式来改变观点，也许是模态的，然后朝那个方向走。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:11:23.583

听起来您的表类继承自 UITableViewController。如果是这种情况，将选择器视图添加到 self.view 会将其添加到 tableView - 这就是它坚持使用它的原因。我会尝试让你的基类继承自高于 UITableViewController 的东西（也许是 UIViewController；你可以像 NSObject 一样高），然后给它两个属性 - 一个用于pickerView，一个用于 tableView。因此，当您将 pickerView 添加到 self.view 时，它会将其添加到表中，而不是作为其子项。

# c++ - 将 C 和 C++ 结合到什么程度是允许的？

> ID：10082223
> 
> 赞同：0
> 
> 时间：2012-04-10T02:04:45.510
> 
> 标签：c++, c, multiple-languages

我正在为课堂编写聊天服务器。我想使用 C 的网络协议，但我更喜欢用 C++ 编程，特别是在字符串操作方面。

据我了解，您可以将两者组合在一个文件中并为 C++ 编译，只要存在正确的#include，它仍然会接受 C 代码。

这有什么限制？我应该注意什么？有什么特别来自 C 的东西在.cpp 文件中不起作用*？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:58:35.327

不要将两者结合在同一个文件中。编写编译为 C++ 的 C 会导致 C 人对你大喊大叫，反之亦然。相反，制作一个小的 C 库，并有你的 C++ 链接反对它。然后你唯一需要做的就是添加

```
#ifdef __cplusplus
extern "C" {
#endif 
```

在 C lib 的头文件的开头，以及

```
#ifdef __cplusplus
}
#endif 
```

在最后。

它也很简单，也很漂亮：创建一个`Makefile`，因为您使用的是 gnu make，这真的很容易：

```
program: cstuff.o program.o 
```

这样，运行`make`将发出以下命令：

```
cc -c cstuff.c 
g++ -c program.cpp
cc cstuff.o program.o -o program 
```

所以一个目录列表将有 4 个文件：`program.cpp` `cstuff.c` `cstuff.h`和`Makefile`.

*   `cstuff.h`包含你所有的结构定义和函数原型，以及那些`extern "C"`东西，
*   `cstuff.c`是不言而喻的，并且
*   `program.cpp`开头`#include "cstuff.h"`可以调用头文件中列出的函数，并具有您喜欢的所有 C++ 优点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T01:53:39.753

您应该能够#include 并使用标准头文件，包括 C++ 中的网络头文件，而无需做任何特别的事情。

C 和 C++ 之间存在一些差异，但您不太可能因此而遇到任何问题。

一个区别是枚举。在 C 中，枚举只是一个 int。在 C++ 中，枚举是一种实际类型。此代码是有效的 C，但无效的 C++。

```
enum sport {
    hockey,
    baseball,
    soccer,
    vollyball
};

enum sport s = 5; 
```

用 g++ 编译它给出

> test.c:11: 错误：从“int”到“sport”的无效转换</p>

[这](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html)是有关混合 C 和 C++ 的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T02:10:13.960

通常在混合 C 和 C++ 时一切都很好，毕竟后者继承自最初的大部分语法。

可能最显着的区别是您必须显式转换动态分配的内存：

```
int *array = (int*) malloc(...) 
```

这是因为在 C`void*`中可以分配给任何类型的指针，而在 C++ 中并非如此，而在 C 中则不需要这样做。但在 C++ 中，您可以简单地避免 malloc 并直接使用 new 和 delete。

无论如何看[这里，总结了许多差异，但它们大多只是轻微的差异。](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C++)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T02:40:00.103

C++ 基本上只是添加了 OOP 方法的 C 的更新版本。因此，将它们结合起来并不是真正的问题。大多数编译器都支持两者，因此您可以即时组合它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T06:11:43.593

所有带有“C 接口”的库都可以在 C++ 代码中使用。在最坏的情况下，您必须添加`extern "C" { ... }`以指定封闭符号的“外部链接”是 la C 而不是 la C++。在最好的情况下，使用该库的标头已经考虑到在 C++ 代码中使用的可能性，因此您所要做的就是包含它，然后像在 C 中一样使用该库的函数。

我很确定在您的情况下（“net”/sockets 函数）包含标题并在要链接的标题之间添加库就足够了。（**添加**）当然，如果原型希望`char *`您不能传递字符串，则必须使用 c_str() 如果您将字符串保留为 C++ 字符串对象...

# ios - +[PayPal getPayPalInst]: 无法识别的选择器发送到类错误

> ID：10082224
> 
> 赞同：0
> 
> 时间：2012-04-10T02:04:49.463
> 
> 标签：ios, uibutton, paypal

我正在将我的 iOS 移动库更新到 11/2011 版本，并在视图尝试加载时收到此错误。

+[PayPal getPayPalInst]：无法识别的选择器发送到类 0x1c4e50 2012-04-09 15:32:06.201 Baublet[16789:15203] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'+[PayPal getPayPalInst]：无法识别的选择器发送到类 0x1c4e50' ***第一次抛出调用堆栈：

这是我得到 SIGABRT 的地方：

```
 UIButton *button = [[PayPal getPayPalInst] getPayButtonWithTarget:self andAction:@selector(payWithPayPal) andButtonType:BUTTON_278x43];
    [self.iPhonePayPalView addSubview:button]; 
```

我也试过这个方法：

```
 [self addLabelWithText:@"Simple Payment" andButtonWithType:BUTTON_294x43   withAction:@selector(payWithPayPal)];

- (void)addLabelWithText:(NSString *)text andButtonWithType:(PayPalButtonType)type withAction:(SEL)action {

UIButton *button = [[PayPal getPayPalInst] getPayButtonWithTarget:self andAction:action andButtonType:type];
CGRect frame = button.frame;
frame.origin.x = 15;
frame.origin.y = 130;
button.frame = frame;
[self.iPhonePayPalView addSubview:button];
} 
```

有什么想法吗？

# c++ - 模板类的子类也必须是模板类吗？

> ID：10082225
> 
> 赞同：3
> 
> 时间：2012-04-10T02:04:56.427
> 
> 标签：c++, visual-studio, templates, visual-c++, inheritance

我需要有一个类“LinkedSortedList”，它是“SortedList”的子类。SortedList 是一个模板类，那么我怎么能有一个不是模板的孩子呢？这里唯一的问题是我需要同时拥有 LinkedSortedList.h 和 .cpp，但显然你不能将模板的定义留在 .cpp 中，它们必须使用 .h 中的方法/函数声明来定义，所以我不会有 LinkedSortedList.cpp ....或者我只是一个彻头彻尾的白痴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:35:36.473

好吧，让我们假设您`LinkedSortedList`只使用类型`int`（否则它需要是它自己的模板）。

首先，编译器需要知道`SortedList<int>`必须在`sorted_list.cpp`（或实现模板的任何地方）可用时编译。编译后，链接器将找到它并能够成功链接它。

所以`linked_sorted_list.h`你会有类似的东西：

```
#include "sorted_list.h"

class LinkedSortedList : public SortedList<int> {
   ...
} 
```

在`sorted_list.cpp`，最后你必须包括这一行：

```
template class SortedList<int>; 
```

或者（这是更好的方法）您可以将模板的定义放入具有特殊扩展名的文件中（我倾向于使用`.icc`），该文件包含在`sorted_list.h`：

```
template <class type>
class SortedList { 
   ...
}

#include "sorted_list.icc" 
```

现在您可以即时编译任何类型的排序列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:17:28.297

您只能从完全定​​义的类派生，而不是类模板。这意味着代码

```
 template <class C>
    struct A{};
    struct B : public A{}; 
```

是无效的。然而，两者

```
 struct B : public A<int>{};
    template <class C>
    struct B : public A<C>{}; 
```

是有效的。所以看起来你会被模板困住。如果你*真的*想要一个 .cpp 文件，你可以将你的代码移动到一个 .cpp 中，然后将它包含在你的 .h 文件中（在你的类定义之后）。我真的不推荐它，因为（IMO）它混淆了你的代码。

# c - 有没有办法解决C中的单个位？

> ID：10082229
> 
> 赞同：15
> 
> 时间：2012-04-10T02:05:48.707
> 
> 标签：c, 8051

我已经对位可寻址微控制器进行了一些研究。在我的路径中遇到的唯一一个是英特尔 MCS-51（[维基页面](http://en.wikipedia.org/wiki/8051)），它今天仍然非常常用......我想知道你是否可以直接在 C 中解决一些问题，例如在 SFR 区域[wiki 8051内存架构](http://en.wikipedia.org/wiki/8051#Memory_architecture)。

我在 SFR 中寻址的位，它们是直接位寻址的，还是字节寻址的位域中的按位运算，或者完全是别的什么？

具体来说，从这里开始：[检查是否设置了单个位](https://stackoverflow.com/questions/3007541/8051-check-if-a-single-bit-is-set)，看起来该位是直接用 MOV 操作的，我想知道这在 C（带扩展名）中是否可行，或者它只是看起来像按位运算，但在背景有一些只使用字节的编译器吗？

作为后续问题，是否有任何可寻址的现代处理器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T02:42:31.910

在纯 C 中（没有任何扩展，无论它们是什么），您可以将变量声明为位字段。它可以节省大量打字时间，并且不易出错。

这是一个示例程序。它使用具有相同大小的常规类型的联合声明一个位字段。

```
#include <stdio.h>

int main(int argc, char *argv[])
{
    typedef struct 
    {
        union
        {
            struct {
                int bit0:1;
                int bit1:1;
                int bit2:1;
                int bit3:1;
                int bit4:1;
                int bit5:1;
                int bit6:1;
                int bit7:1;
            };
            unsigned char byte;
        };
    } EigthBits;

    EigthBits b;

    b.byte = 0;
    printf("Will be 0 ==> %d\n", b.byte);

    b.bit4 = 1;
    printf("Will be 16 ==> %d\n", b.byte);
} 
```

将打印此输出：

```
    将是 0 ==> 0
    将是 16 ==> 16

```

例如，将值设置为控制寄存器上的各个位很有用。您可以设置更多位（如`int two_bits:2;`）以满足您的需要。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-10T02:44:12.300

这并不少见。例如，[SDCC](http://sdcc.sourceforge.net/)（小型设备 C 编译器）是 MCS-51 的流行编译器。您可以[在此处找到手册](http://sdcc.sourceforge.net/doc/sdccman.pdf)。最相关的部分是 3.4.1，它描述了 MCS-51 的语言扩展：

> 3.4.1.6 __bit
> 
> 这是一个数据类型和一个存储类说明符。当一个变量被声明为位时，它被分配到 8051 的位可寻址内存中，例如：
> 
> ```
>  __bit test_bit; 
> ```
> 
> 向该变量写入 1 会生成汇编代码：
> 
> ```
>  D2*00 setb _test_bit 
> ```
> 
> 位可寻址存储器由 128 位组成，位于数据存储器中从 0x20 到 0x2f 的位置。除了这个 8051 特定的存储类之外，大多数架构都支持 ANSI-C 位域4。根据 ISO/IEC 9899 位和没有显式带符号修饰符的位域被实现为无符号。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-10T02:18:15.100

在 C 中，您通常读取一个字节，然后屏蔽您想要的位，但某些特定于处理器的编译器会为您预定义寄存器甚至单独的位。例如，Keil Cx51 User's Guide 定义了[bit](http://www.keil.com/support/man/docs/c51/c51_le_bit.htm)和[sfr](http://www.keil.com/support/man/docs/c51/c51_le_sfr.htm)数据类型。

你会使用这样的`sfr`类型：

```
sfr P0 = 0x80;    // Port 0 is accessed at address 80h.
P0 = 0x20;        // Write 20h to Port 0. 
```

要使用 byte-at-a-time 方法，您需要执行以下操作：

```
#define SFR (* (unsigned char *) 0x80)  // Address of SFR is 0x80.

#define BIT0 0x01  // LSB of any byte
#define BIT1 0x02
#define BIT2 0x04
. . .
#define BIT7 0x80  // MSB of any byte

// Read BIT1 of SFR. sfrBit1 is 1 if BIT1 is set, 0 if not.
unsigned char sfrBit1 = SFR & BIT1  ?  1 : 0;

// Set BIT0 of SFR.
SFR |= BIT0;

// Clear BIT2 of SFR.
SFR &= ~BIT2; 
```

为方便起见，您可以定义实用程序宏来设置和清除各个位：

```
#define SET(reg, bit) reg |=  (1 << bit)  // Sets a bit in reg.
#define CLR(reg, bit) reg &= ~(1 << bit)  // Clears a bit in reg.

SET(SFR, 1); // Set BIT1 
CLR(SFR, 2); // Clear BIT2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T12:41:52.740

处理器 8051 定义了一些指令来寻址单个位以清除为 0、设置为 1 或测试该值，如果该位被设置或清除，则在条件分支之后绕过以下代码。

这些指令非常有效，仅使用 2 个字节。第一个字节定义指令，第二个字节是操作数，用于标识要使用的位，总共 256 位。

前 128 位引用 16 个 SFR 字节（地址 0x80 的位 0 至 7 用于 P0，位 8 至 15 用于 SFR 的地址 0x88 用于 P1，等等，直到位 120 至 127 用于 SFR 0xF8）。

接下来的 128 位，如上面 Hans Pasant 所述，引用 0x20 和 0x2F 之间的 16 字节内部 RAM。

8051实际上读取整个字节，测试，设置或清除指定位并将所有8位写回同一位置（测试除外）。除了高效之外，这些指令也不会修改任何寄存器，例如 R0 到 R7、累加器等。

C 编译器可以轻松接受超过 128 个“__bit”变量，并用大多数人描述的经典二进制掩码操作替换上面提到的高效汇编代码。但是，Keil 编译器实现的最简单的解决方案是在使用超过 128 位变量时声明错误。

有一些 DSP 和图形处理器可以处理指定的位数。这在编写高效的压缩算法、一些绘图例程等时非常有用。例如，德州仪器 (TI) 的 TMS34010 可以为每个存储器访问定义两组使用不同位数的寄存器。例如，循环可以使用第一组中的寄存器一次读取 3 位，并使用第二组中的寄存器写入 11 位。在内部，内存控制器仍在读取 16 位，并回写 16 位，并且仅修改每个 16 位字内的指定位数。所有的内存操作都在引用一个位，而不是一个字。例如，程序计数器在执行每条指令时增加 16。如果低位不为零，硬件将创建异常，

The inventors of the C language predicted that one day there could be some processor which could be bit addressable. They explained that the current restriction of reading/writing an entire word when using the bit structures (as described by Ixe013) could be lifted in the future. Unfortunately, the bit addressable processors did not gain much attention in the software world.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T02:19:02.587

*在“C（带扩展）”*中一切皆有可能，因为带扩展的 C 可以是任何方言，为您带来相当于天上馅饼的编程。

在 ISO 标准 C 中，最小的单独可寻址存储单元是字节，由字符类型表示。

通过访问周围位的整个单元来执行对位（甚至结构的位字段成员）的访问。

如果处理器可以寻址位，那么可能的一种方法是通过 C 编译器的内联汇编语言，如果它有这样的东西。或外部链接的汇编语言例程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-10T02:26:10.680

这取决于您的意思，即“解决方法”。编写一些将执行此类操作`set_bit(address, bit, value)`的函数没有问题。`get_bit(address, bit, value)`但是至少`get_bit`会返回一个字节。`char`

字节寻址限制自然来自大多数现代计算机使用的硬件。这与硬盘驱动器的 512 字节扇区非常相似，这是读取或写入的最小 IO 操作。然而，这并不能阻止您向其写入单个字节和位。

# android - 为 Mono Android 正确扩展 EditText 类

> ID：10082232
> 
> 赞同：0
> 
> 时间：2012-04-10T02:06:21.000
> 
> 标签：android, inheritance, android-widget, android-edittext, xamarin.android

我正在尝试扩展 Android Mono 中的 EditText 类以实现覆盖目的。这是我到目前为止代码方面的内容。不幸的是，当我尝试运行它时它会崩溃（当我使用标准的 EditText 小部件时它当然不会崩溃）。

```
namespace testing
{
    public class SuperEditText : EditText
    {
        public SuperEditText(Context context) : base(context)
        {
        // Java has init() here - maybe that's an issue. If so, does C# have an equivalent?
        }
    }
} 
```

这是 XML：

```
<SuperEditText
    android:id="@+id/eta"      
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:gravity="top"
/> 
```

有任何想法吗？

****** *** ** *** ** *** *****编辑调试日志：**

 **```
04-13 17:44:13.743 D/AndroidRuntime(  476): 
04-13 17:44:13.743 D/AndroidRuntime(  476): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
04-13 17:44:13.743 D/AndroidRuntime(  476): CheckJNI is ON
04-13 17:44:14.713 D/AndroidRuntime(  476): Calling main entry com.android.commands.pm.Pm
04-13 17:44:14.773 I/ActivityManager(   79): Start proc com.android.defcontainer for service com.android.defcontainer/.DefaultContainerService: pid=484 uid=10003 gids={1015, 2001}
04-13 17:44:15.373 D/dalvikvm(  484): GC_EXPLICIT freed 286K, 54% free 2568K/5511K, external 410K/517K, paused 94ms
04-13 17:44:15.723 W/ActivityManager(   79): No content provider found for: 
04-13 17:44:15.763 W/ActivityManager(   79): No content provider found for: 
04-13 17:44:15.783 D/PackageParser(   79): Scanning package: /data/app/vmdl-636945189.tmp
04-13 17:44:16.093 D/dalvikvm(   79): GC_CONCURRENT freed 502K, 43% free 4211K/7367K, external 710K/1222K, paused 9ms+11ms
04-13 17:44:16.333 I/PackageManager(   79): Removing non-system package:HelloM4A.HelloM4A
04-13 17:44:16.333 I/ActivityManager(   79): Force stopping package HelloM4A.HelloM4A uid=10036
04-13 17:44:16.523 D/PackageManager(   79): Scanning package HelloM4A.HelloM4A
04-13 17:44:16.523 I/PackageManager(   79): Package HelloM4A.HelloM4A codePath changed from /data/app/HelloM4A.HelloM4A-2.apk to /data/app/HelloM4A.HelloM4A-1.apk; Retaining data and using new
04-13 17:44:16.523 I/PackageManager(   79): Unpacking native libraries for /data/app/HelloM4A.HelloM4A-1.apk
04-13 17:44:16.593 D/installd(   35): DexInv: --- BEGIN '/data/app/HelloM4A.HelloM4A-1.apk' ---
04-13 17:44:17.333 D/dalvikvm(  495): DexOpt: load 154ms, verify+opt 353ms
04-13 17:44:17.353 D/installd(   35): DexInv: --- END '/data/app/HelloM4A.HelloM4A-1.apk' (success) ---
04-13 17:44:17.363 W/PackageManager(   79): Code path for pkg : HelloM4A.HelloM4A changing from /data/app/HelloM4A.HelloM4A-2.apk to /data/app/HelloM4A.HelloM4A-1.apk
04-13 17:44:17.363 W/PackageManager(   79): Resource path for pkg : HelloM4A.HelloM4A changing from /data/app/HelloM4A.HelloM4A-2.apk to /data/app/HelloM4A.HelloM4A-1.apk
04-13 17:44:17.363 D/PackageManager(   79): Registered content provider: HelloM4A.HelloM4A.__mono_init__, className = mono.MonoRuntimeProvider, isSyncable = false
04-13 17:44:17.363 D/PackageManager(   79):   Providers: mono.MonoRuntimeProvider
04-13 17:44:17.363 D/PackageManager(   79):   Receivers: mono.android.Seppuku
04-13 17:44:17.363 D/PackageManager(   79):   Activities: hellom4a.Activity1
04-13 17:44:17.373 I/ActivityManager(   79): Force stopping package HelloM4A.HelloM4A uid=10036
04-13 17:44:17.543 I/installd(   35): move /data/dalvik-cache/data@app@HelloM4A.HelloM4A-1.apk@classes.dex -> /data/dalvik-cache/data@app@HelloM4A.HelloM4A-1.apk@classes.dex
04-13 17:44:17.543 D/PackageManager(   79): New package installed in /data/app/HelloM4A.HelloM4A-1.apk
04-13 17:44:17.713 I/ActivityManager(   79): Force stopping package HelloM4A.HelloM4A uid=10036
04-13 17:44:17.833 D/dalvikvm(  164): GC_EXPLICIT freed 59K, 52% free 2906K/5959K, external 1221K/1532K, paused 100ms
04-13 17:44:17.933 I/ActivityManager(   79): Start proc com.svox.pico for broadcast com.svox.pico/.VoiceDataInstallerReceiver: pid=496 uid=10009 gids={}
04-13 17:44:17.993 W/RecognitionManagerService(   79): no available voice recognition services found
04-13 17:44:18.783 I/ActivityThread(  496): Pub com.svox.pico.providers.SettingsProvider: com.svox.pico.providers.SettingsProvider
04-13 17:44:18.853 D/dalvikvm(   79): GC_CONCURRENT freed 560K, 43% free 4255K/7431K, external 710K/1222K, paused 9ms+29ms
04-13 17:44:19.103 D/dalvikvm(  295): GC_CONCURRENT freed 296K, 52% free 2738K/5703K, external 555K/1024K, paused 7ms+18ms
04-13 17:44:19.153 D/dalvikvm(   79): GC_EXPLICIT freed 47K, 44% free 4209K/7431K, external 710K/1222K, paused 252ms
04-13 17:44:19.493 I/installd(   35): unlink /data/dalvik-cache/data@app@HelloM4A.HelloM4A-2.apk@classes.dex
04-13 17:44:19.513 D/AndroidRuntime(  476): Shutting down VM
04-13 17:44:19.543 D/dalvikvm(  476): GC_CONCURRENT freed 100K, 72% free 293K/1024K, external 0K/0K, paused 2ms+2ms
04-13 17:44:19.553 I/AndroidRuntime(  476): NOTE: attach of thread 'Binder Thread #3' failed
04-13 17:44:19.553 D/jdwp    (  476): adbd disconnected
04-13 17:44:20.513 D/AndroidRuntime(  509): 
04-13 17:44:20.513 D/AndroidRuntime(  509): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
04-13 17:44:20.513 D/AndroidRuntime(  509): CheckJNI is ON
04-13 17:44:21.483 D/AndroidRuntime(  509): Calling main entry com.android.commands.am.Am
04-13 17:44:21.553 I/ActivityManager(   79): Start proc HelloM4A.HelloM4A for broadcast HelloM4A.HelloM4A/mono.android.Seppuku: pid=517 uid=10036 gids={3003, 1015}
04-13 17:44:21.893 I/ActivityThread(  517): Pub HelloM4A.HelloM4A.__mono_init__: mono.MonoRuntimeProvider
04-13 17:44:21.913 D/dalvikvm(  517): Trying to load lib /data/data/HelloM4A.HelloM4A/lib/libmonodroid.so 0x405135d8
04-13 17:44:21.913 D/dalvikvm(  517): Added shared lib /data/data/HelloM4A.HelloM4A/lib/libmonodroid.so 0x405135d8
04-13 17:44:22.253 I/monodroid-gc(  517): environment supports jni NewWeakGlobalRef
04-13 17:44:22.613 D/Zygote  (   33): Process 517 exited cleanly (255)
04-13 17:44:22.613 I/ActivityManager(   79): Process HelloM4A.HelloM4A (pid 517) has died.
04-13 17:44:22.623 D/AndroidRuntime(  509): Shutting down VM
04-13 17:44:22.663 I/AndroidRuntime(  509): NOTE: attach of thread 'Binder Thread #3' failed
04-13 17:44:22.663 D/dalvikvm(  509): GC_CONCURRENT freed 101K, 69% free 319K/1024K, external 0K/0K, paused 1ms+1ms
04-13 17:44:22.663 D/jdwp    (  509): adbd disconnected
04-13 17:44:23.563 D/AndroidRuntime(  531): 
04-13 17:44:23.563 D/AndroidRuntime(  531): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
04-13 17:44:23.563 D/AndroidRuntime(  531): CheckJNI is ON
04-13 17:44:24.733 D/AndroidRuntime(  531): Calling main entry com.android.commands.am.Am
04-13 17:44:24.793 I/ActivityManager(   79): Starting: Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=HelloM4A.HelloM4A/hellom4a.Activity1 } from pid 531
04-13 17:44:24.873 D/AndroidRuntime(  531): Shutting down VM
04-13 17:44:24.903 I/AndroidRuntime(  531): NOTE: attach of thread 'Binder Thread #3' failed
04-13 17:44:24.963 D/dalvikvm(  531): GC_CONCURRENT freed 100K, 69% free 318K/1024K, external 0K/0K, paused 2ms+2ms
04-13 17:44:24.963 D/jdwp    (  531): adbd disconnected
04-13 17:44:25.003 I/ActivityManager(   79): Start proc HelloM4A.HelloM4A for activity HelloM4A.HelloM4A/hellom4a.Activity1: pid=540 uid=10036 gids={3003, 1015}
04-13 17:44:25.743 I/ActivityThread(  540): Pub HelloM4A.HelloM4A.__mono_init__: mono.MonoRuntimeProvider
04-13 17:44:25.853 D/dalvikvm(  540): Trying to load lib /data/data/HelloM4A.HelloM4A/lib/libmonodroid.so 0x40513a08
04-13 17:44:25.853 D/dalvikvm(  540): Added shared lib /data/data/HelloM4A.HelloM4A/lib/libmonodroid.so 0x40513a08
04-13 17:44:26.233 I/monodroid-gc(  540): environment supports jni NewWeakGlobalRef
04-13 17:44:30.233 I/MonoDroid(  540): UNHANDLED EXCEPTION: Android.Views.InflateException: Exception of type 'Android.Views.InflateException' was thrown.
04-13 17:44:30.283 E/mono    (  540): 
04-13 17:44:30.283 E/mono    (  540): Unhandled Exception: Android.Views.InflateException: Exception of type 'Android.Views.InflateException' was thrown.
04-13 17:44:30.343 D/Zygote  (   33): Process 540 exited cleanly (1)
04-13 17:44:30.343 I/ActivityManager(   79): Process HelloM4A.HelloM4A (pid 540) has died.
04-13 17:44:30.492 W/InputManagerService(   79): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40676960
04-13 17:44:35.733 D/dalvikvm(  295): GC_EXPLICIT freed 57K, 53% free 2723K/5703K, external 555K/1024K, paused 86ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:17:08.330

您需要在元素名称前加上其所在名称空间的 Java 版本。例如，如果您的名称空间是`testing`，则 XML 应如下所示：

```
<testing.SuperEditText
    android:id="@+id/eta"      
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:gravity="top" /> 
```

有关查找/设置 Java 命名空间的更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/9826035/finding-the-com-to-use-in-android-layout/9826165#9826165)。

**编辑**

我在本地复制了这个以获取异常，最终结果是：

> System.NotSupportedException：无法在 MonoAndroidApplication23.SuperEditText 类型上找到具有签名（Android.Content.Context、Android.Util.IAttributeSet）的构造函数。请提供缺少的构造函数。

您可以通过将构造函数更新为如下所示来解决此问题：

```
public SuperEditText(Context context, IAttributeSet attrs)
    : base(context, attrs)
{
} 
```**

# ruby-on-rails - 在 Active Record 类中定义类方法

> ID：10082237
> 
> 赞同：3
> 
> 时间：2012-04-10T02:07:12.340
> 
> 标签：ruby-on-rails, ruby, metaprogramming

架构中的设置表：

```
create_table "settings", :force => true do |t|
  t.string   "name"
  t.string   "value"
  t.datetime "created_at"
  t.datetime "updated_at"
end 
```

设置表有这些记录：

```
{name: "notification_email", value: "hello@monkey.com"}
{name: "support_phone", value: "1234567"} 
```

我希望**Setting.notification_email**函数返回“ **hello@monkey.com** ”，并分别让**Setting.support_phone**函数返回“ **1234566** ”。

这是我在**setting.rb**中的内容：

```
class Setting < ActiveRecord::Base
  class << self
    all.each do |setting|
      define_method "#{setting.name}".to_sym do
        setting.value.to_s
      end 
    end 
  end 
end 
```

但是当我在控制台中输入 Setting.notification_email 时，它给了我一个错误：

```
NameError: undefined local variable or method `all' for #<Class:0x000000053b3df0>
    from /home/adam/Volumes/derby/app/models/setting.rb:7:in `singletonclass'
    from /home/adam/Volumes/derby/app/models/setting.rb:2:in `<class:Setting>'
    from /home/adam/Volumes/derby/app/models/setting.rb:1:in `<top (required)>'
    ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:12:05.427

使用 define_singleton_method - 即

```
class Setting < ActiveRecord::Base

  self.all.each do |instance|
    define_singleton_method(instance.name) do
      instance.value.to_s
    end
  end
end 
```

# image - 如何使用 Intelligencia.UrlRewriter 重写图像 url

> ID：10082240
> 
> 赞同：0
> 
> 时间：2012-04-10T02:08:04.393
> 
> 标签：image, url-rewriting

谁能说如何使用 Intelligencia.UrlRewriter 重写图像 url？

在页面 faqs.aspx 中，有一个图像。从数据库中检索图像并在 contentimage.aspx 中呈现。
图片来源是[http://localhost/MySite/SG/FAQs/images/en/bridge_singapore.jpg](http://localhost/MySite/SG/FAQs/images/en/bridge_singapore.jpg)。
我必须改写为[http://localhost/MySite/ContentImage.aspx?id=SG&type=FAQs&lang=en&filename=bridge_singapore.jpg](http://localhost/MySite/ContentImage.aspx?id=SG&type=FAQs&lang=en&filename=bridge_singapore.jpg)。

目前，我写如下，它根本不起作用。

```
<rewrite url="~/(.+)/faqs/images/(.+)/(.+).jpg" to="~/contentimage.aspx?id=$1&amp;type=faqs&amp;lang=$2&amp;filename=$3" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:10:08.333

At last, I know my problem. :) ... It is due to my IIS setting. In the Handler Mappings, it only allows .aspx extension to be handled by aspnet_isapi.dll. So, I added custom handlers for .jpg extension to be handled by aspnet_isapi.dll. Now, it works fine. :)

# python - 如何获取 python 函数的酸洗依赖项？

> ID：10082241
> 
> 赞同：1
> 
> 时间：2012-04-10T02:08:14.570
> 
> 标签：python, function, pickle

作为这个问题的后续： [如何腌制一个python函数及其依赖项？](https://stackoverflow.com/questions/10048061/how-to-pickle-a-python-function-with-its-dependencies)

确定方法的依赖关系的好方法是什么？例如，与上面的帖子类似，如果我有一个使用方法 g 和 y 的函数 f，是否有一种简单的方法可以动态获取对 g 和 y 的引用？

此外，我猜你会希望这个方法递归整个函数图，这样如果 y 依赖于 z，你也可以捆绑 z。

我看到迪斯科为此使用了以下模块： [https ://github.com/discoproject/disco/blob/master/lib/disco/worker/classic/modutil.py](https://github.com/discoproject/disco/blob/master/lib/disco/worker/classic/modutil.py)

关于如何解决这个问题的任何其他建议？迪斯科方法似乎是基于模块的，因此您可能需要捆绑比实际执行根方法所需的更多内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T21:21:18.620

为此，我会使用[dill](http://pythonhosted.org/dill)，它可以在 python 中序列化几乎任何东西。Dill 还提供[了一些很好的工具](https://github.com/uqfoundation/dill/blob/master/dill/detect.py)，可以帮助您了解在代码失败时导致酸洗失败的原因。

```
>>> import dill
>>> dill.loads(dill.dumps(your_bad_object))
>>> ...
>>> # if you get a pickling error, use dill's tools to figure out a workaround
>>> dill.detect.badobjects(your_bad_object, depth=0)
>>> dill.detect.badobjects(your_bad_object, depth=1)
>>> ... 
```

如果您绝对想要，您可以使用 dill `badobjects`（或其他检测功能之一）递归地潜入对象的引用链，并弹出不可腌制的对象，而不是像上面那样在每个深度调用它。

此外，[objgraph](http://mg.pov.lt/objgraph/)也是对测试套件的一个非常方便的补充。

```
>>> # visualize the references in your bad objects
>>> objgraph.show_refs(your_bad_object, filename='your_bad_object.png') 
```

或者，正如我在您上面提到的帖子中提到的，您可以使用 dill 在一个命令中腌制整个 python 会话。对于您的问题来说，这有点矫枉过正，但它也可以。

# ruby-on-rails - 使用 git checkout 恢复文件-无论如何要恢复它？

> ID：10082243
> 
> 赞同：1
> 
> 时间：2012-04-10T02:08:40.187
> 
> 标签：ruby-on-rails, git, restore, git-checkout, revert

我正在着手开发这个 Rails 系统，并被告知我可以修改服务器以进行一些测试。我对几个文件进行了小改动以进行测试，确认了我的怀疑，然后对根目录进行了递归 git checkout。

我重新启动乘客没有问题，但 MySQL 出现错误，即我的 database.yml 文件没有正确的凭据。事实证明，我之前的开发人员已将 database.yml 置于版本控制中，因此该系统上的用户名/密码恢复为递归 git checkout 上的先前提交。

有没有办法找回那个版本的 database.yml？似乎我想在我的 git 提交中向前迈进，但如果可以恢复这个文件，我不想到处乱搞。有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:22:17.983

您应该能够签出特定文件的特定版本：

```
git checkout 5ed99fd2 config/database.yml 
```

使用您认为可以解决问题的任何哈希（修订）。你可以很快地切换，直到你做对了。

正如您所观察到的，将其放入版本控制中只会导致悲伤和痛苦。

# javascript - 外部Javascript - 何时未定义函数？

> ID：10082244
> 
> 赞同：3
> 
> 时间：2012-04-10T02:08:44.050
> 
> 标签：javascript

在为这个 Web 应用程序在同一个 HTML 文件中编写 CSS、Javascript 和 HTML5 代码之后，我决定将 CSS 和 Javascript 拆分为各自的外部文件，并将它们包含到 HTML5 文件中。

在我添加以下内容之前，我遇到了一个关于 Javascript 代码不起作用的小问题：

```
window.onload = function() { //script code} 
```

现在看起来一切正常，但功能不加载。由于我使用 Firebug 发现的错误表明该函数尚未定义，但它显然是。

这是代码：

HTML 页面 [http://turing.cs.olemiss.edu/~sbadams2/RebelFlow.html](http://turing.cs.olemiss.edu/~sbadams2/RebelFlow.html)

JS 文件 [http://turing.cs.olemiss.edu/~sbadams2/RebelFlow.js](http://turing.cs.olemiss.edu/~sbadams2/RebelFlow.js)

我已经阅读了其他回复，其中指出路径可能不正确，但 Javascript 文件中的所有其他内容都可以正常加载，但实际函数除外。

我不确定是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T02:30:33.213

问题在于 javascript 具有函数作用域，这意味着在函数内部定义的变量/函数仅在该函数内部可见，而不是外部可见。`window.onload=function(){/*your code here*/}`创建一个额外的范围，例如，您的`createWellPump()`函数在 window.onload 包装函数之外是未知的。

最简单的解决方案是再次删除包装器，然后直接在结束标记`window.onload`之前加载脚本。`</body>`

# java - JPanel 添加事项

> ID：10082245
> 
> 赞同：3
> 
> 时间：2012-04-10T02:08:49.423
> 
> 标签：java, swing, inheritance, jframe, jpanel

我是向 JFrame 添加 JPanel 的新手，我需要一点帮助。在我做的一堂课中，我画了一个大矩形。此类是 JPanel 的子类。另一个类是 JFrame 的子类。当我创建该类的新 JPanel 对象时，矩形显示在框架上，但它比平时小得多，而且位置也不正确。这是代码，有什么问题？

```
 public void gameRender() {

    if( dbImage == null ) {
        dbImage = createImage( dbWIDTH, dbHEIGHT );
        if( dbImage == null )
            return;
    }
    //else
        dbg = dbImage.getGraphics();

    dbg.setColor( Color.white );
    dbg.fillRect( 0, 0, dbWIDTH, dbHEIGHT );
    dbg.setColor( Color.black ); 
```

这是程序早期的 while 循环（如动画循环）不断调用的方法的一部分。这是 JPanel 子类的一部分，这段代码用于双缓冲。dbWIDTH 为 500，dbHEIGHT 为 400。

此代码来自试图创建 JPanel 子类的对象的 JFrame 子类（JPanel 子类称为 WalkAndJump3）。

```
 wj = new WalkAndJump3();

    Container c = getContentPane();
    c.setLayout( new FlowLayout() );

    c.add( wj ); 
```

我尝试通过覆盖paintComponent 来做我在JPanel 子类中所做的事情，但它不起作用，我确实将WalkAndJump3 wj 声明为实例变量，因此第一行不应该是问题。怎么了？同样，问题是绘制的矩形太小而且不合适。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:07:51.803

它很小，因为您将 FlowLayout (c.setLayout( new FlowLayout() )) 作为面板的容器 (Container c = getContentPane()) 布局。这意味着您添加到该容器中的所有组件将“一个接一个”（嗯，实际上它是一个流程 :) 与默认的最小尺寸对齐。在你的情况下 - 我猜最小尺寸几乎为零。

有两种选择：
1\. 不是最好的一种 - 在 JPanel 上使用 setPreferredSize(Dimension) 来强制其扩展
2\. 好的一种 - 使用适当的布局在整个容器大小上拉伸面板，如下所示：

```
c.setLayout( new BorderLayout() ); 
```

这会有所帮助，但我强烈建议您阅读 Swing 介绍，了解布局的工作原理：http: [//docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

# linux - c++ 头文件中奇怪的 g++ 编译器错误

> ID：10082247
> 
> 赞同：0
> 
> 时间：2012-04-10T02:08:52.233
> 
> 标签：linux, header, compiler-errors, g++

因此，当谈到 g++ 和 linux 时，我是一个新手，但我正在尝试编译我编写的 C++ 程序，无论出于何种原因，g++ 与我的包含有问题，我得到了数千行C++ 的错误包括文件（如 stdio.h、string.h 等）。我在下面粘贴了一些：

```
 In file included from /usr/include/stdio.h:75,
             from /usr/include/root/Rtypes.h:33,
             from /usr/include/root/TObject.h:31,
             from /usr/include/root/TNamed.h:26,
             from /usr/include/root/TAxis.h:25,
             from /usr/include/root/TH1.h:25,
             from /usr/include/root/TH1F.h:25,
             from torusMC.cpp:10:
    /usr/include/libio.h: In function ‘int _IO_feof(_IO_FILE*)’:
    /usr/include/libio.h:462: error: expected primary-expression before ‘,’ token
    /usr/include/libio.h:462: error: ‘printf’ was not declared in this scope
    /usr/include/libio.h:462: error: ‘exit’ was not declared in this scope
    /usr/include/libio.h: In function ‘int _IO_ferror(_IO_FILE*)’:
    /usr/include/libio.h:463: error: expected primary-expression before ‘,’ token
    /usr/include/libio.h:463: error: ‘printf’ was not declared in this scope
    /usr/include/libio.h:463: error: ‘exit’ was not declared in this scope 
```

真正奇怪的是，我之前对不同目录中的不同程序使用了完全相同的包含，并且一切（仍然）编译得很好。如果我将它们全部注释掉，并且使用包含的代码，它编译得很好；如果我使用包含注释的代码保留代码，但即使在其中一个包含中进行注释，我也会再次收到所有错误。

我的环境是否有问题导致它在这个目录中失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:28:55.283

最可能的原因：您在`#include`之前使用*另一个*标题`TH1F.h`，而在另一个标题中，您缺少分号，例如

```
// some other header
struct Foo {
....
}
 ^ missing ; 
```

# iphone - Iphone UDID 和谷歌分析

> ID：10082249
> 
> 赞同：0
> 
> 时间：2012-04-10T02:09:08.707
> 
> 标签：iphone, google-analytics

据我所知，Apple 不再支持 UDID（不太确定）

我担心谷歌分析，因为我不确定它是否会使用 UDID 来收集报告数据

如果是，如果没有更多的 UDID 会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:54:21.063

确实，UDID 在 iOS 5.0 中已被弃用。

文档（[UIDevice Class Reference](https://developer.apple.com/documentation/uikit/uidevice)）建议使用[CFUUIDCreate](https://developer.apple.com/documentation/corefoundation/1542906-cfuuidcreate)（例如，您可以将其存储到 NSUserDefaults ）。

可以在这里找到一个非常有趣的解决方案（查询 en0 的 MAC）：

[不推荐使用 UIDevice uniqueIdentifier - 现在该怎么办？](https://stackoverflow.com/questions/6993325/uidevice-uniqueidentifier-deprecated-what-to-do-now)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:33:07.913

应用商店不再支持 UDID。我发现各种集成平台（类似于 Google Analytics）都会更新他们的 SDK 来处理 UDID 问题。我会联系他们或检查更新。

# drupal - 第一次接受信用卡。我需要做什么？

> ID：10082252
> 
> 赞同：2
> 
> 时间：2012-04-10T02:09:35.050
> 
> 标签：drupal, payment-gateway, credit-card

我正在建立一个第一次接受信用卡的网站。

我正在使用 Drupal 来管理产品和存储内容，但这并不重要。我想帮助建立一个社区生成的与平台无关的信用卡接受要求列表。

我正在寻找一份我需要准备的清单，以便安全、负责任地接受信用卡。

我已经做了相当多的研究。

下面的问题很好，但它的重点是获取商家帐户并在现场存储信用卡。我认为大多数 Web 开发人员和中小型组织不需要这样做： [支付处理器 - 如果我想在我的网站上接受信用卡，我需要知道什么？](https://stackoverflow.com/questions/51094/payment-processors-what-do-i-need-to-know-if-i-want-to-accept-credit-cards-on)

这是我认为我需要的：

1.  固定 IP 地址和 SSL 证书（通过网络主机购买，很容易做到）
2.  在所有购物车和结帐页面上启用 HTTPS（Drupal 功能）
3.  与支付处理器建立关系（Stripe、Authorize.net、Paypal Pro）
4.  开发网站以匹配支付处理器 API（对我来说，这意味着 Drupal 模块）
5.  做测试交易
6.  翻转生活
7.  做更多的测试交易

这真的是接受信用卡的全部吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:26:40.007

至少我会在您的服务中添加某种对关键活动的实时监控。密码尝试失败、虚假 URL 和 URL 参数、交易数量/美元金额等。这些指标可以帮助您在恶意行为成为问题之前将其捕获。

您还需要考虑诸如帐户安全性、如何存储密码（使用 BCrypt 或类似的东西加盐和散列）和其他个人身份信息等问题。

我会认真地重新考虑存储信用卡信息。即使您愿意遵守 PCI-DSS (http://en.wikipedia.org/wiki/PCI_DSS) 的要求，使用处理器提供的结帐服务也容易得多。

技术要求不是很困难。由于违规而远离聚光灯要困难得多。我经营着一家每天处理数千笔交易的公司……这是可能的，但需要持续关注大量风险因素。

如果你选择继续，我会在你上线之前投资一些高质量的道德黑客，以确保你没有错过任何东西。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:52:31.797

从本质上讲，您所说的内容涵盖了它。也就是说，Baldy 加强安全性的建议是正确的——你正在做交易，这会影响隐私和安全，所以把事情搞定。至于保存信用卡数据，您很可能将与支付网关合作，该网关将用户往返于他们的服务器并返回您的网站——信用卡详细信息实际上不会保留在您的网站上——所以不要通过添加您自己的收集敏感数据的表单（或修改您的用户页面）来结束此保护。

# jquery - 徽标不会向下滑动（HTML、CSS、jQuery）

> ID：10082253
> 
> 赞同：0
> 
> 时间：2012-04-10T02:09:54.310
> 
> 标签：jquery, html, css

当用户单击“登录”时，我正在使用 jQuery 向下滑动登录框。单击它时，我希望整个页面向下滑动，包括徽标。到目前为止，页面确实向下滑动，除了徽标。您可以在此处查看页面：

[http://mini.lukedude5.com](http://mini.lukedude5.com)

单击“登录”或“注册”时，页面的主体会向下滑动（将底部边距设置为 500 像素以夸大它）。但是，正如您所见，“mi.ni”徽标并没有滑落。

```
<div id = 'header'>
    <a href = '/' title = 'mi.ni' id = 'logo'>mi.ni</a>
</div> 
```

上面是徽标的 HTML，下面是 CSS。

```
#wrapper
{
    width: 1000px;
    margin-left: auto;
    margin-right: auto;
}

#wrapper #header
{
    height: 100px;
    width: 260px;
    background: url('/styles/images/logo2.png') no-repeat;
    margin: 20px auto 0px auto;
}

#wrapper #header #logo
{
    height: 100px;
    width: 260px;
    display: block;
    text-indent: -9999px;
} 
```

标头被包装在包装器中。登录框滑下的栏不在包装内。

登录/注册框的 CSS 是：

```
#topBar #signIn, #signUp
{
    width: 250px;
    float: right;
    color: #FFF;
    margin-top: 5px;
    font-weight: bold;
    display: none;
    margin-bottom: 500px;
} 
```

对此问题的任何帮助表示赞赏！

编辑：跨越页面顶部的栏的 HTML。

```
<div id = 'topBarWrapper'>
        <div id = 'topBar'>
            <div id = 'mainTop'>
                mi.ni is a URL shortening service. Learn more about mi.ni. I am trying my hardest to get the domain http://mi.ni.
            </div>
            <div id = 'rightTop'>
                <span id = 'signInText'>Sign In</span>
                |
                <span id = 'signUpText'>Sign up</span>
            </div>
            <div id = 'signIn'>
                <form action = '' method = 'POST'>
                    <table>
                        <tr>
                            <td>Username:</td>
                            <td><input type = 'text' name = 'username' id = 'usernameSignIn' class = 'input' /></td>
                        </tr>
                        <tr>
                            <td>Password:</td>
                            <td><input type = 'password' name = 'password' id = 'passwordSignIn' class = 'input' /></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><div class = 'signInSubmit'></div></td>
                        </tr>
                    </table>
                </form>
            </div>
            <div id = 'signUp'>
                <form action = '' method = 'POST'>
                    <table>
                        <tr>
                            <td>Username:</td>
                            <td><input type = 'text' name = 'username' id = 'usernameSignUp' class = 'input' /></td>
                        </tr>
                        <tr>
                            <td>Email:</td>
                            <td><input type = 'text' name = 'email' id = 'emailSignUp' class = 'input' /></td>
                        </tr>
                        <tr>
                            <td>Password:</td>
                            <td><input type = 'password' name = 'password' id = 'passwordSignUp' class = 'input' /></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><div class = 'signUpSubmit'></div></td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>
    </div> 
```

栏的 CSS：

```
#topBarWrapper
{
    width: 100%;
    height: 25px;
    padding-top: 5px;
    background: #000;
    color: #FFF;
}

#topBar
{
    width: 1050px;
    margin-left: auto;
    margin-right: auto;
}

#topBar #mainTop
{
    display: inline;
}

#topBar #rightTop
{
    display: inline;
    margin-left: 50px;
    font-weight: bold;
}

#topBar #rightTop #signInText
{
    cursor: pointer;
    margin-right: 5px;
}

#topBar #rightTop #signUpText
{
    cursor: pointer;
    margin-left: 5px;
}

#topBar #signIn, #signUp
{
    width: 250px;
    float: right;
    color: #FFF;
    margin-top: 5px;
    font-weight: bold;
    display: none;
    margin-bottom: 500px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:21:52.213

在包装器 div 上设置 clear:both。那里发生了一些崩溃。

```
#wrapper {
width: 1000px;
margin-left: auto;
margin-right: auto;
clear: both;
} 
```

# git - Git本地开发者live版如何？

> ID：10082257
> 
> 赞同：1
> 
> 时间：2012-04-10T02:10:31.860
> 
> 标签：git, repository, git-svn, git-branch, bitbucket

具体来说，我将在下面列出我的情况，

1.  我在我的 Windows 机器上安装了本地 git 版本，这是我进行开发的地方（在开发人员分支中）。

2.  然后我将它上传到开发者子域服务器进行测试，一旦测试完成，我将本地 git 提交到基于 bitbucket 的远程存储库（那里的开发者分支）。

3.  在我的本地和 bitbucket 中，当我到达特定点时，我都会合并它们。

这一切看起来都很好，对我来说工作正常，但是当我想将修改后的文件移动到实时服务器（真实的实时网站）时，我的问题就来了，最好的方法是什么？其中出来一一上传检查更改的文件...

我的实时服务器中也安装了 git，但我需要知道，

1.  如何从 bitbucket 拉取我的 live git？
2.  如果我拉动它会覆盖用户文件/文件夹，例如用户上传的图像（在 git 中显然没有跟踪）
3.  如果想取消跟踪文件，前用户上传文件/我使用 rm -rf {filename} 但在这种情况下它从操作系统中删除了文件，有没有办法在不删除的情况下取消跟踪。
4.  还是在 git 中跟踪包括用户文件在内的所有内容是个好主意？

我对 git 很陌生，所以请给我一些关于如何在 git 中进行适当开发、本地和实时版本的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:02:14.847

1.  您设置了一个可以推送到的裸仓库。然后，一个 post-receive 钩子可以切换回您的非裸实时 repo，并从您的裸 repo 中拉取 git。[“远程裸机上的 Git 子模块](https://stackoverflow.com/questions/9448682/git-submodule-on-remote-bare/9448794#9448794)
    ”中的所有详细信息（您可以忽略“子模块”部分）
2.  不，它不会覆盖未跟踪的文件
3.  如果这些文件最初未被跟踪，则您无需执行任何操作。
    如果您的 repo 包含您希望暂时忽略的任何文件，您可以使用`git update-index --assume-unchanged`它们。
    请参阅“ [git commit config on initial commit 但再也不会？](https://stackoverflow.com/questions/9345839/git-commit-config-on-initial-commit-but-never-again/9345868#9345868) ”
4.  不，如果文件纯粹是环境的本地文件，则不需要将它们包含到 git repo 中（它被克隆了很多）

# java - Java：找不到符号 - 继承方法

> ID：10082258
> 
> 赞同：1
> 
> 时间：2012-04-10T02:10:33.267
> 
> 标签：java, oop

我正在尝试使用另一个类文件中的方法。但是，我得到一个错误。

错误：找不到符号
符号：变量 dPUSe
位置：类 StatInput

这是我的主要课程：

```
DeterminePoints dPUse = new DeterminePoints();
if(choice == 1){
 dPUse.topLane(); 
} 
```

方法 topLane() 是我在同一文件夹中的另一个类文件中的空方法：

```
public void topLane(){
} 
```

但我收到了上述错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:17:35.567

您的代码和错误消息之间的大写是关闭的：

错误信息：`Symbol: variable dPUSe`

代码：`DeterminePoints dPUse`

您在任何地方都使用带有大写字母 S 的那个吗？因为你还没有定义那个，所以 Java 不知道那是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:20:02.103

看起来像是您使用的某个地方，dPUSe，而不是 dPUse

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T02:13:17.427

您必须创建该类的实例或使此类扩展该类以使用该类中的方法，

# python - Twisted (Python) - 合作和合作有什么区别？

> ID：10082259
> 
> 赞同：9
> 
> 时间：2012-04-10T02:10:50.157
> 
> 标签：python, twisted

这里的文档 [http://twistedmatrix.com/documents/current/api/twisted.internet.task.html#cooperate](http://twistedmatrix.com/documents/current/api/twisted.internet.task.html#cooperate) 表明不同之处在于合作返回一个 CooperativeTask 而 coiterate 返回一个 Deferred （由我自己的测试证明，未指定在文档中）。我已经在周末投入了学习 Twisted 的基础知识，所以我了解了什么是 Deferred，并且我一直是一个将我的阻塞代码发送到线程/进程的好孩子。我了解 coiterate 的运行速度与 Twisted 允许的一样快，而 LoopingCall 尝试以选定的时间间隔触发。

我的直觉是，cooperative() 任务在 CooperativeTask 对象中完成，而 coiterate() 在 Deferred 对象中完成。如果有人可以总结合作和合作之间的行为差​​异，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T05:38:29.190

几乎，但不完全是。 `cooperate`是一个比`coiterate`. `cooperate`通常只是一个稍微好一点的版本，`coiterate`你几乎总是想使用它。返回 a 有`CooperativeTask`两个好处。首先，您可以在不[停止任务的情况下](http://twistedmatrix.com/documents/current/api/twisted.internet.task.CooperativeTask.html#stop)[暂停](http://twistedmatrix.com/documents/current/api/twisted.internet.task.CooperativeTask.html#pause)和[恢复](http://twistedmatrix.com/documents/current/api/twisted.internet.task.CooperativeTask.html#resume)任务，其次，您可以生成[多个 Deferred](http://twistedmatrix.com/documents/current/api/twisted.internet.task.CooperativeTask.html#whenDone)，在任务完成时通知您，而不会相互干扰，而不仅仅是一个。

两者都在后台生成，`coiterate`并且都使用非常短的间隔作为默认调度程序。如果你想使用不同的任务调度器，你总是可以实例化你自己的.`cooperate``CooperativeTask``LoopingCall`[`Cooperator`](http://twistedmatrix.com/documents/current/api/twisted.internet.task.Cooperator.html)

（顺便说一句，如果还没有关于`coiterate`返回 a的文档错误`Deferred`，请提交一个。）

# android - ['; 在文本字段中显示而不是 ÅÄÖ

> ID：10082261
> 
> 赞同：0
> 
> 时间：2012-04-10T02:10:57.587
> 
> 标签：android, eclipse

我在我的 Android 应用程序的文本字段中遇到了 ÅÄÖ 的一些问题。我有`<?xml version="1.0" encoding="utf-8"?>`，`settings.xml`并且我在 Window > Preferences > General > Workspace 中有默认的文本文件编码。我已经测试将此设置更改为 Cp1252 以外的设置，但这并没有解决我的问题。它只是做得更糟！

这里有什么问题？如何让 ÅÄÖ 在文本字段中工作？

提前致谢。

# php - PHP文件上传错误

> ID：10082262
> 
> 赞同：1
> 
> 时间：2012-04-10T02:11:06.220
> 
> 标签：php, model-view-controller, file-upload

我正在使用模型-视图-控制器结构开发一个网站。在我的 html 中，我有一个表单，允许用户浏览和选择文件，然后通过单击按钮提交文件，然后调用控制器代码：

```
if(upload_quotes($_FILES['userfile'])){
    $msg = "Successful file upload";  
    $directory_list = array();

    // get contents of directory here
    // $directory_list = get_directory_contents($directory_list);

    include '../view/processFileUpload.php';
}else{
    $msg = "Unknown error occurred.  Error: ".print_r($_FILES);
    include '../view/errorPage.php';
} 
```

第一行：upload_quotes() 是位于模型代码中的函数。如果上传成功，该函数返回 true，如果不成功，则返回 false。我已经注释掉了获取目录列表的函数调用，因为它也有错误。2个模型代码片段：

```
function upload_quotes($_FILES){
    $uploadfile = '../../../TestSiteDataFiles/Quotes/'.$_FILES['userfile']['name'];
    if(move_uploaded_file($_FILES['tmp_name'], $uploadfile)){
        return true;
    }else{
        return false;
    }
}

function get_directory_contents($directory_list){
    $current_dir = '../../../TestSiteDataFiles/Quotes/';
    $dir = opendir($current_dir);

    //reads and outputs the directory
    while(false !== ($file = readdir($dir)))
    //strip out the two entries of . and ..
    if($file != "." && $file !=".."){
        array_push($directory_list, $file);
    }
    closedir($dir);
    return $directory_list;
} 
```

processFileUpload.php 和 errorPage.php 文件相应地输出 $msg 变量，但它从不输出成功。我花了几个小时研究我做错了什么，而我对 php 的有限知识没有任何帮助。查看页面输出“发生未知错误。错误：1。浏览器上弹出的错误是：

> 警告：move_uploaded_file() [function.move-uploaded-file]：copy() 函数的第二个参数不能是第 17 行 C:\xampp\htdocs\Test Site\model\model.php 中的目录
> 
> 警告：move_uploaded_file() [function.move-uploaded-file]：无法将 'C:\xampp\tmp\php487A.tmp' 移动到 C:\ 中的 '../../../TestSiteDataFiles/Images/' xampp\htdocs\Test Site\model\model.php on line 17 Array ([name] => Managerial Accounting Davers Connect.txt [type] => text/plain [tmp_name] => C:\xampp\tmp\php487A. tmp [错误] => 0 [大小] => 55 )

在我看来，模型代码 ( `upload_quotes()`) 是错误的根源，因为它每次都返回为 false。该`get_directory_contents()`函数永远不会有机会执行，但它也不会输出正确的结果。

我感谢任何和所有建议，并感谢您的投入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:18:45.410

通过`$_FILES`作为参数传递给您的函数，您在实际的`$_FILES`超全局中混淆了文件信息的来源。由于您`$_FILES['userfile']['name']`在函数中访问，但传递`$_FILES['userfile']`给函数，因此未定义名称键，并且您会收到目录错误。

使用用户输入文件名在文件系统上存储文件是非常危险的。相反，最好*创建*一个唯一的文件名。from 的原始输入文件名`$_FILES[]['name']`对于存储在数据库中并与磁盘上的文件关联作为要显示的元数据很有用，但它不应该用于存储在磁盘上。

```
// Use a different variable name. I've replaced it with $fileinfo
function upload_quotes($fileinfo){

    // Don't use the original filename to store it. Create one instead.
    $fname = uniqid();
    $finfo = pathinfo($fileinfo['name']);
    // Append the user's file extension to a random filename
    $fname .= "." . $finfo['extension'];

    $uploadfile = '../../../TestSiteDataFiles/Quotes/'.$fname;

    // Don't attempt to move the file unless its error container is empty
    if(empty($fileinfo['error']) && move_uploaded_file($fileinfo['tmp_name'], $uploadfile)){
        return true;
    }else{
        return false;
    }
} 
```

### 更新

该`get_directory_contents()`函数失败，因为数组`$directory_list`定义超出范围。在调用函数之前无需将其定义为数组。改为在里面做：

```
function get_directory_contents($directory_list){
    $current_dir = '../../../TestSiteDataFiles/Quotes/';
    $dir = opendir($current_dir);

    // Define $directory_list as an array IN HERE
    $directory_list = array();

    //reads and outputs the directory
    while(false !== ($file = readdir($dir)))
    //strip out the two entries of . and ..
    if($file != "." && $file !=".."){
        array_push($directory_list, $file);
    }
    closedir($dir);
    return $directory_list;
} 
```

这只是一个真正的问题，因为您使用`array_push()`而不是`[]`数组附加表示法。 `array_push()`必须将现有数组作为其第一个参数，并且它不会自己创建一个。

```
// Would have worked since the array would get initialized if it didn't exist in scope already.
$directory_list[] = $file; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:16:34.960

我想你会发现你的上传函数中的变量名不匹配。

一开始你有`$_FILES['userfile']['name']`，但在`move_uploaded_file`你使用的功能中`$_FILES['tmp_name']`

也许检查变量是否包含您的期望。您可能会发现他们正在评估一个空字符串，当与您正在设置的路径连接时，会导致设置一个目录。

**编辑**：实际上，您还传递了一个调用`$_FILES`到您的`upload_quotes`函数中的变量，但是`$_FILES`它是一个超级全局变量，因此在所有范围内（即任何地方）都可用。重命名 的参数`upload_quotes`（以及相应的任何相关变量）可能会解决您的问题。

# html - 如何显示选定的水平菜单

> ID：10082266
> 
> 赞同：1
> 
> 时间：2012-04-10T02:12:34.213
> 
> 标签：html, css

我有一个 4 项菜单，每个菜单都显示项目的名称以及导航图标（使用 css sprite）。这是我的标记/ CSS：

```
ul { list-style:none outside none; }
ul li {
    background-color:#000;
    float:left;
    height:100px;
}
ul li a {
    background-image:url('sprite.png');
    color:#FFF;
    display:block;
    height:10px;
    padding-top:20px;
    text-align:center;
    width:50px;
}

ul li.a a { background-position:0px 0px; }
ul li.b a { background-position:-50px 0px }
ul li.c a { background-position:-100px 0px }
ul li.d a { background-position:-150px 0px }    
-----------------------------------------------------------------
<ul>
    <li class="a"><a href="a">A</a></li>
    <li class="b"><a href="b">B</a></li>
    <li class="c"><a href="c">C</a></li>
    <li class="d"><a href="d">D</a></li>
</ul> 
```

这一切都很好，但是说我想对当前选定的项目显示不同的效果。具体来说，我想要不同的背景颜色、不同的图标和不同颜色的文本。最好的方法是什么？我能想到的唯一方法是向`<li>`我指定不同背景颜色的“选定”类添加一个“选定”类`<a>`，我指定不同背景图像和不同颜色的文本。
就像是：

```
ul li.selected { background-color:#FFF; }
ul li a { color:#000; }
ul li.a a.selected { background-position:-250px 0px; }
ul li.b a.selected { background-position:-300px 0px; }
ul li.c a.selected { background-position:-350px 0px; }
ul li.d a.selected { background-position:-400px 0px; }
--------------------------------------------------------------------------
<ul>
    <li class="a selected"><a class="selected" href="a">A</a></li>
    <li class="b"><a href="b">B</a></li>
    <li class="c"><a href="c">C</a></li>
    <li class="d"><a href="d">D</a></li>
</ul> 
```

这不会误会我的意思，我可以这样做，但我只是觉得这不是应该这样做的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:29:35.077

您可以使用 CSS 中的级联来用更少的代码获得您想要的效果。

应用`.selected`到`li`然后去双班。

```
ul li.selected { background-color:#FFF; }
ul li.a.selected a { background-position:-250px 0px; }
ul li.b.selected a { background-position:-300px 0px; }
ul li.c.selected a { background-position:-350px 0px; }
ul li.d.selected a { background-position:-400px 0px; } 
```

基本上，您正在*链接*这些类。

这样，您不需要同时向和中添加`selected`类。你的 HTML 会被简化，就像这样（没有第二类）`li``a``selected`

```
<ul>
    <li class="a selected"><a href="a">A</a></li>
    <li class="b"><a href="b">B</a></li>
    <li class="c"><a href="c">C</a></li>
    <li class="d"><a href="d">D</a></li>
</ul> 
```

规范中的详细信息：

[http://www.w3.org/TR/CSS2/selector.html#class-html](http://www.w3.org/TR/CSS2/selector.html#class-html)

# c# - MVC iTextSharp 页眉和页脚 c#

> ID：10082269
> 
> 赞同：1
> 
> 时间：2012-04-10T02:13:13.977
> 
> 标签：c#, asp.net-mvc, itextsharp

我正在使用 MVC2，页眉和页脚在 iTextSharp 4.1.6 中运行良好，但在 5.2 中却没有。这是我的代码：

```
 public FileStreamResult GridPDF()
            {
                MemoryStream workStream = new MemoryStream();

                //the document
                Document document = new Document();

                PdfWriter.GetInstance(document, workStream);//fs);

                document.Open();

                iTextSharp.text.Font font5 = iTextSharp.text.FontFactory.GetFont("Arial", 10);
                iTextSharp.text.Font font6 = iTextSharp.text.FontFactory.GetFont("Arial", 18);
                             //HeaderFooter header = new HeaderFooter(new Phrase(BPheader, FontFactory.GetFont("Arial", 8, Font.BOLD)), false);
            //header.Border = Rectangle.BOTTOM_BORDER;
            ////header.GrayFill=(Color.GRAY);
            //document.Header = header;

            //HeaderFooter footer = new HeaderFooter(new Phrase("Page: ", FontFactory.GetFont("Arial", 8, Font.ITALIC)), true);
            //footer.Border = Rectangle.TOP_BORDER;
            //document.Footer = footer;
                PdfPTable tableh = new PdfPTable(1);
                PdfPCell cellh = new PdfPCell(new Phrase("", FontFactory.GetFont("Arial", 10)));
                cellh.Colspan = 1;
                tableh.HorizontalAlignment = 0;
                tableh.WidthPercentage = 100;
                cellh.BorderWidth = 3;
                cellh.Padding = 0;
                Image image = Image.GetInstance(Server.MapPath("~/Content/images/logo_small.png"));
                //  image.Alignment = 6; // iTextSharp.text.Image.ALIGN_RIGHT;
                image.ScalePercent(40f); // change it's size
                image.SetAbsolutePosition(500, 750);
                document.Add(image);

                Paragraph p = new Paragraph("Certificate", font6);
                p.Alignment = 1;
                document.Add(p);
                tableh.DefaultCell.Border = Rectangle.TOP_BORDER;
                tableh.DefaultCell.Border = Rectangle.BOTTOM_BORDER;
                tableh.AddCell(cellh);

                //close the document
                document.Close();
                //prepare output stream
                byte[] byteInfo = workStream.ToArray();
                SendPdfToBrowser(byteInfo);
                r

eturn null;
        } 
```

有什么建议么！！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:19:47.887

我想我知道您的问题，iTextSharp 中的 HeaderFooter 属性已在版本 5+ 中删除。 [这个答案](https://stackoverflow.com/questions/2598917/itextsharp-is-missing-headerfooter-class)应该可以帮助您上路。基本上，您需要使用 PageEvents 类来添加页眉和页脚。

创建一个继承自 PdfPageEventHelper 的类并实现其成员。您只需要 OnStartPage 为您的页眉和 OnEndPage 为您的页脚。在 PDF 创建期间，iTextSharp 将为 PDF 中的每一页触发这些方法中的每一个。

此外，[这里有一个更详尽的示例](http://www.mazsoft.com/blog/post/2008/04/30/Code-sample-for-using-iTextSharp-PDF-library.aspx)（在 C# 中）。

# android - 在列表视图中加载图像

> ID：10082270
> 
> 赞同：1
> 
> 时间：2012-04-10T02:13:16.923
> 
> 标签：android, listview, android-asynctask

我正在尝试加载图像以显示在列表视图中的文本旁边。由于没有异步任务的滚动很糟糕，我正在尝试实现它。不幸的是，我的代码在 onPostExecute() 中给了我空指针错误，我似乎无法找出原因。我的代码如下：

```
class LoadImage extends AsyncTask<Object, Void, Bitmap>{

    private ImageView imv;
    private Object imageViewHolder;
    private String position;
    private Object path;

    public LoadImage(ImageView imv, String _position) {
        Log.w("MyApp", "creating LoadImage");
        this.imv = imv;
        Log.w("MyApp", "got image view");
        path = imv.getTag();
        Log.w("MyApp", "Got Imageview Path");
        position = _position;
        Log.w("MyApp", "LoadImage created");
    }

    @Override
    protected Bitmap doInBackground(Object... params) {
        Log.w("MyApp", "in doInBackground");
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 2;
        Log.w("MyApp", "made bitmap factory");

        Bitmap bm = null;

        Log.w("MyApp", "Getting URL ID");
        File dir = new File(PATH + position);
        Log.w("MyApp", "Have URL ID");

        if(dir.isDirectory()){
            Log.w("MyApp","Dir is a directory");

            File header = new File(dir.getAbsolutePath() + "/title");
            Log.w("MyApp", "Checking for title");
            if(header.isFile()){
                bm = BitmapFactory.decodeFile(header.getAbsolutePath(), options);
            }

            if(bm!=null){
                Log.w("MyApp", "Title is good");
            }else{
                Context c = ReadingList.this;
                bm = BitmapFactory.decodeResource(c.getResources(), R.drawable.ic_menu_gallery);
            }
        }else{
            Log.w("MyApp", "Dir Not Directory");
            Context c = ReadingList.this;
            bm = BitmapFactory.decodeResource(c.getResources(), R.drawable.ic_menu_gallery);
        }

        return bm;
    }
    @Override
    protected void onPostExecute(Bitmap result) {
        if (!imv.getTag().equals(path)) {
            Log.w("MyApp", "Not setting images");
            return;
        }

        if(result != null && imv != null){
            Log.w("MyApp", "setting bitmap");
            imv.setImageBitmap(result);
        }else{
            Log.w("MyApp", "Nothing happened");
        }
    }

} 
```

我要解决的问题是不让位图与回收的视图一起回收。我查看了此站点上的一些示例，但不确定为什么这不起作用。[从这个问题](https://stackoverflow.com/questions/7729133/using-asynctask-to-load-images-in-listview)的回答中借用了很多代码。onPostExecute 不会在日志中输入任何内容，也不会立即崩溃。崩溃似乎需要大约两分钟。图像是从 SD 卡中提取的，所以我不确定为什么要花这么长时间来决定它是否要崩溃。

```
in doInBackground
made bitmap factory
Getting URL ID
Have URL ID
Dir is a directory
Checking for title
Title is good
in doInBackground
made bitmap factory
getting URL ID
Have URL ID
Dir is a directory
Checking title
Shutting down VM
threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
FATAL EXCEPTION: main
java.lang.NullPointerException
at com.theholodev.glowreader.ReadingList$LoadImage.onPostExecute(ReadingList.java:305)
at com.theholodev.glowreader.ReadingList$LoadImage.onPostExecute(ReadingList.java:1) 
```

在此之后它继续重复前 7 行多次，但应用程序崩溃了，我看不到它们是否有任何作用。然而，onPostExecute 似乎再也没有被调用过。

以供参考：

```
304: if (!imv.getTag().equals(path)) {
305:    Log.w("MyApp", "Not setting images");
306:    return;
307: } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:59:28.603

我找到了一个适合我的解决方案。我使用了[aQuery](http://code.google.com/p/android-query/)，并使用了他们提供的文件中的 shouldDelay 和异步集图像。

```
if(header.isFile() && !aq.shouldDelay(position, convertView, parent, 
   header.getAbsolutePath())){
     bm = BitmapFactory.decodeFile(header.getAbsolutePath(), options);
     showcase.setImageBitmap(bm);
 } else {                    
     showcase.setImageResource(R.drawable.missing_image);
 } 
```

# iphone - iOS游戏是如何设置的？

> ID：10082272
> 
> 赞同：5
> 
> 时间：2012-04-10T02:13:18.517
> 
> 标签：iphone, ios, performance, installation

在我过去的所有 iOS 游戏中，我都将游戏设置为一个简单的基于视图的应用程序，其中包含一个视图控制器、.h 文件和 .m 文件。我设置了一个`NSTimer`每秒 30、40 或 60 帧的集合，称为主运行循环。后来进入开发阶段，我将图形更新（较高的 FPS）和游戏计算（较低的 FPS）分开来减少延迟。我从来不明白如何在游戏中实现多线程/并发，因为图形和计算相互依赖......

**鉴于我从未有机会阅读“真实”游戏的源代码，我是否以合理的方式设置它，或者我对游戏的主框架和运行循环采取了完全错误的方法？**

我问这个是因为我注意到我的应用程序与 App Store 上的其他应用程序相比有很多滞后（例如，我的应用程序在 iPhone 3G 上严重滞后，但 Doodle Jump、Fruit Ninja、Cut the Rope 等运行比较顺利）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T02:42:26.323

1.  您想在运行循环中使用[CADisplayLink](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)而不是 NSTimer。
2.  您想在 GPU 上进行尽可能多的绘图。这将释放 CPU 周期，并且硬件会加速您当前在软件中执行的大量计算。为此，您可以在 OpenGL 中将精灵绘制为 OpenGL 纹理。有像[Cocos2D](http://www.cocos2d-iphone.org/)这样的库可以为您执行此操作。[Cocos2D](http://www.cocos2d-iphone.org/)提供了一个简单的 API 来创建和动画精灵，它在底层完成了所有的 OpenGL，所以你不必这样做。

# ruby-on-rails - 如何在不知道其属性的情况下枚举 ActiveRecord 对象

> ID：10082275
> 
> 赞同：2
> 
> 时间：2012-04-10T02:13:28.890
> 
> 标签：ruby-on-rails, ruby, activerecord

我想像`Hash#each`Ruby 一样枚举 Active Record 数据对象，这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T02:15:29.420

每个单独的对象都可以访问[`attributes`](http://apidock.com/rails/ActiveRecord/Base/attributes)：

```
model.attributes.each do |attribute, value|
  # ...
end 
```

# ruby-on-rails - Rails 3 DateTime 和 Time beginning_of_day end_of_day 格式不正确

> ID：10082278
> 
> 赞同：7
> 
> 时间：2012-04-10T02:14:13.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我正在尝试使用以下代码查找特定日期的事件：

```
Event.where('starttime BETWEEN ? AND ?', DateTime.now.beginning_of_day, DateTime.now.end_of_day) 
```

在 Rails 控制台中，如果我运行，`DateTime.now.beginning_of_day`我会得到我所期望的：

2012 年 4 月 9 日星期一 00:00:00 -0700

我可以看到问题出在哪里，但可以查看 rails 控制台中的 SQL。不知何故，当日期进入 SQL 查询时，它会自动格式化为错误的日期和时间。

```
SELECT "events".* FROM "events" WHERE (starttime BETWEEN '2012-04-09 07:00:00' AND '2012-04-10 06:59:59') 
```

正如上面的 sql 所说，这给了我从今天到明天不同的结果。我可以看到，当 DateTime.now.beginning_of_day 和 DateTime.now.end_of_day 进入 sql 查询时，它们的格式不正确。我需要以某种方式对其进行格式化吗？知道为什么会到今天 7:00 和明天 7:00 吗？

我不知道这是否有区别，但我正在使用 PostgreSQL。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T02:25:26.857

请参阅：[http ://railscasts.com/episodes/106-time-zones-in-rails-2-1](http://railscasts.com/episodes/106-time-zones-in-rails-2-1)

我认为您在上面引用的时间实际上是同一时间，只有一个是 UTC 时间（您在太平洋时间对吗？）。要解决此问题，您可以尝试设置：

config.time_zone = "太平洋时间（美国和加拿大）"

在你的环境中.rb

你也可以试试：

```
DateTime.now.utc.beginning_of_day
DateTime.now.utc.end_of_day 
```

所以你根据数据库使用UTC

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T02:17:13.103

您可能在数据库中使用 UTC 时间。这是一件好事，但它会导致各种混乱。偏移量将`-0700`转换为，`07:00:00`因为那是您的一天以 UTC 时间开始的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T02:37:31.120

您可以使用[`AT TIME ZONE`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT)带有 UTC 时间戳的 PostgreSQL 构造：

```
SELECT e.*
FROM   events e
WHERE  starttime >= '2012-04-09 00:00' AT TIME ZONE 'UTC'
AND    starttime <  '2012-04-10 00:00' AT TIME ZONE 'UTC' 
```

我最近[在相关答案中解释了 PostgreSQL 时间戳和时区处理](https://stackoverflow.com/a/9576170/939860)。

# twitter - 从 twitter api 返回多个列表状态

> ID：10082280
> 
> 赞同：0
> 
> 时间：2012-04-10T02:14:15.130
> 
> 标签：twitter

为了执行更少的 api 调用，我想将多个列表的 api 调用合并为一个调用 - 这可能吗？例如，如果我有一个 id=123456789 的列表，我会调用 [https://api.twitter.com/1/lists/statuses.json?list_id=123456789&count=15&page=1&include_entities=true](https://api.twitter.com/1/lists/statuses.json?list_id=123456789&count=15&page=1&include_entities=true)

如果我还想使用 id=987654321 执行列表调用，我可以将其合并到一个 api 调用中吗？如果是这样，它会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:24:19.530

经过大量研究，这似乎是不可能的，我最终不得不使用 REST API 来获取每个列表的成员，然后使用 Streaming API 跟踪每个用户。

# c++ - 如何实现域用户的软件注册？

> ID：10082282
> 
> 赞同：0
> 
> 时间：2012-04-10T02:14:38.767
> 
> 标签：c++, windows, networking, dns, visual-c++

我的应用程序正在域中运行。它安装在此域中的每台 Windows PC 上。客户可以购买域许可证并注册一次，例如在服务器上。这样其他电脑上的域用户就不用重新注册了。在域中有很多 PC 的情况下，在每台 PC 上注册非常烦人。

是否可以通过这种方式实现注册？该应用程序用 C++ 编码并在 Windows 上运行，实现它的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:05:12.760

有一个[相关的问题](https://stackoverflow.com/questions/206172/how-do-you-programmatically-determine-whether-a-windows-computer-is-a-member-of)来确定 AD 域。我认为你想做类似的事情：获取域，并检查该域对象是否包含你的许可证信息。

（现在AD是在LDAP之上实现的，微软架构可以扩展）

# php - 从嵌套数组中获取总和

> ID：10082283
> 
> 赞同：2
> 
> 时间：2012-04-10T02:15:03.990
> 
> 标签：php, multidimensional-array, tree

我有一个由 PHP 中的数组形成的树结构，这些树具有以下结构。

```
 array(5) {
["guid"]=>
string(32) "bfd08465daebc6a624f81fb38fdcb357"
["name"]=>
string(7) "Activos"
["parent_guid"]=>
string(32) "3caed17eb39d20aa9d409f2e61d457ff"
["suma"]=>
NULL
["children"]=>
array(1) {
  [0]=>
  array(5) {
    ["guid"]=>
    string(32) "c0227d82bf3926d0517a0cffce66be31"
    ["name"]=>
    string(14) "Current Assets"
    ["parent_guid"]=>
    string(32) "bfd08465daebc6a624f81fb38fdcb357"
    ["suma"]=>
    NULL
    ["children"]=>
    array(3) {
      [0]=>
      array(5) {
        ["guid"]=>
        string(32) "c7bc90c45a5319a00f8a64c7ae1a5ca9"
        ["name"]=>
        string(16) "Cuenta de ahorro"
        ["parent_guid"]=>
        string(32) "c0227d82bf3926d0517a0cffce66be31"
        ["suma"]=>
        string(11) "111035.3800"
        ["children"]=>
        array(0) {
        }
      }
      [1]=>
      array(5) {
        ["guid"]=>
        string(32) "72a3ed3467cfd24671197ad7d7f9bb40"
        ["name"]=>
        string(17) "Cuenta de cheques"
        ["parent_guid"]=>
        string(32) "c0227d82bf3926d0517a0cffce66be31"
        ["suma"]=>
        string(6) "0.0000"
        ["children"]=>
        array(0) {
        }
      } 
```

如果一个节点有孩子，那么索引“孩子”将有一个包含值的嵌套数组。这里的问题是，对于给定“guid”的每个孩子，我如何将索引“suma”中的所有值相加？

例如，给定 guid c7bc90c45a5319a00f8a64c7ae1a5ca9，该函数必须返回 111035.3800，因为该子树没有子树。但是对于 c0227d82bf3926d0517a0cffce66be31，该函数必须对 Null + 111035.3800 + 0.0000 求和，这是给定 guid 及其相应子项的索引“suma”中的值。如果一个节点有“n”个嵌套的子节点，那么该函数应该遍历所有子节点并对索引“suma”中的值求和。

我已经有一个递归函数，它返回一个给定 guid 值的子树，但我不知道如何计算总和。

```
function getChildrenAccounts($array, $parent_guid)
  {
    if(!is_array($array))
      return null;
    if(isset($array['guid']) && $array['guid'] == $parent_guid)
      return $array['children'];
    foreach ($array as $item) {
        $return = $this->getChildrenAccounts($item, $parent_guid);
      if (!is_null($return)) 
        return $return;
    }
    return null;
  } 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:25:02.660

您的问题出在您的函数定义中。你还没有决定你的函数会做什么。

```
//What is the return value here?
function getChildrenAccounts($array, $parent_guid) { 
```

如果答案是“很多事情”，那么你就有问题了。在您的情况下，您有“null”、一个数组，可能还有一个值（“suma”字段的总和）。

我建议编写一个函数：

```
function sumChildrenAccounts($array, $parent_guid, &$sum) {
  if(!is_array($array)) { return null; }//this needs to be caught as an error!
  if(isset($array['guid']) && $array['guid'] == $parent_guid) { //a valid array
    foreach ($array['children'] as $child) {
      $sum = $this->sumChildrenAccounts($child, $parent_guid, $sum) + $array['suma'];
    }
    return $sum;
  }
  return null;//also an error!!!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:31:50.270

**代码 ：**

```
function getChildrenSum($array)
{
    $sum = 0;

    if (count($array)>0)
    {
        foreach ($array as $item)
        {
            $sum += $item['suma'];
            $sum += getChildrenSum($item['children']);
        }
    }
    else return 0;
}

function getSumFromArray($array,$guid)
{
    foreach ($array as $item)
    {
        if (isset($item['guid']))
            if ($item['guid']==$guid)
                return getChildrenSum($item['children']);
    }

    return 0;
} 
```

**用法 ：**

```
$total = getSumFromArray($array,"c0227d82bf3926d0517a0cffce66be31"); 
```

# c# - MVC3 带区域的路线......有点混乱

> ID：10082287
> 
> 赞同：2
> 
> 时间：2012-04-10T02:15:18.113
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我有一个 MVC3 站点，有 2 个区域和公共区域。我还指定了用于对项目列表进行分页的路线。我的`Register_Routes`方法如下所示：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Paginate", // Route name
            "{controller}/Paginate/{itemsPerPage}/{pageNumber}/{searchString}", // URL with parameters
            new { controller = "Home", action = "Index", itemsPerPage = SiteSettings.ItemsPerPage, pageNumber = 1, searchString = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

我注意到（但不明白）是如果我从主页注销，我的登录页面的重定向看起来像

```
http://localhost:62695/Account/LogOn?ReturnUrl=%2fHome%2fPaginate 
```

...登录后，我最终进入了我的主页，但 URL 为：

```
http://localhost:62695/Home/Paginate 
```

在这一点上，我相当肯定我已经把路线图搞砸了，但对我来说似乎是对的。我究竟做错了什么？

**根据建议更新** ，我将路线更改为如下所示：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Paginate", // Route name
            "{controller}/Paginate/{itemsPerPage}/{pageNumber}/{searchString}", // URL with parameters
            new { controller = "Home", action = "Index", searchString = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

...而且主页索引页面似乎确实可以正常工作，但现在分页没有：

```
 return RedirectToAction("Paginate", new { itemsPerPage = SiteSettings.ItemsPerPage, pageNumber = 1, searchString = string.Empty }); 
```

在 Admin\HomeController 中产生 URL：

```
http://localhost:62695/Admin/Users/Paginate?itemsPerPage=25&pageNumber=1 
```

所以我在这里仍然做错了什么。

**更新 2** 好的，这就是我让它按照我想要的方式工作的方式：我的`RegisterRoutes`方法现在看起来像这样：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            null,
            "{area}/{controller}/Paginate/{itemsPerPage}/{pageNumber}/{searchString}", // URL with parameters
            new {area = string.Empty, controller = "Home", action="Paginate", searchString = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Default", // Route name
            "{area}/{controller}/{action}/{id}", // URL with parameters
            new {area = string.Empty, controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    } 
```

...但这还不足以解决路由问题。除此之外，我需要将路线添加到我的区域注册中。我的 AdminAreaRegistration 如下所示：

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            null,
            "Admin/{controller}/Paginate/{itemsPerPage}/{pageNumber}/{searchString}", // URL with parameters
            new { controller = "Home", action = "Paginate", searchString = UrlParameter.Optional } // Parameter defaults
        );

        context.MapRoute(
            "Admin_default",
            "Admin/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        );
    } 
```

除了更改`RedirectToRoute`为我的连接之外，这还使我的 URL 变得漂亮并同时工作。所有答案都有助于实现我的目标，我为每个人 +1 并选择了让我最接近路径的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:25:36.303

路由按照它们注册的顺序进行评估。重定向是由您注册的第一条路由生成的，特别是因为您为所有段声明了默认值。您可能需要考虑定义更具体的路线

**更新** 使用 RedirectToRoute 而不是 RedirectToAction 来获得你想要的 URL 生成

```
RedirectToRoute("Paginate", new { itemsPerPage = SiteSettings.ItemsPerPage, pageNumber = 1, searchString = string.Empty }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T02:23:18.027

那么，您返回该URL的原因`http://localhost:62695/Home/Paginate`是因为您在登录时返回了指定的URL，即`?ReturnUrl=%2fHome%2fPaginate`. `http://localhost:62695/Account/LogOn?ReturnUrl=%2fHome%2fPaginate`这不是您主页的网址吗？你从来没有指定。

可能是第一个定义也优先，不确定我在哪里听到的，所以如果你把默认定义放在第一位，它会抓住它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T04:28:12.367

```
routes.MapRoute(null, // do not name your routes, it's a "magic string"
    "{controller}/Paginate/{itemsPerPage}/{pageNumber}/{searchString}",
        new 
        { 
            controller = "Home", 
            action = "Index", 
            searchString = UrlParameter.Optional
        } 
    );

// instead of RedirectToAction, try RedirectToRoute, and do not use the route name
return RedirectToRoute(new 
    { 
        controller = "Home",
        area = "AreaName",
        itemsPerPage = SiteSettings.ItemsPerPage, 
        pageNumber = 1, 
        searchString = string.Empty, 
    }
); 
```

# jquery - 将鼠标悬停在图像上时创建简单的 jQuery 滑动效果

> ID：10082291
> 
> 赞同：0
> 
> 时间：2012-04-10T02:15:48.023
> 
> 标签：jquery, image, jquery-animate

当有人将鼠标悬停在我页面上的图像上时，如何创建这种简单的 jQuery 效果？

[可以在此处找到](http://jsfiddle.net/9EFsE/)JSFiddle 示例。

![在此处输入图像描述](../Images/dcafb18a2519c58206520498a739125e.png)

我希望当有人输入图像或框的任何部分时，文本区域应该扩大以显示更多细节。

在鼠标离开时，文本区域应该缩小并且只允许图像可见。

这是我的尝试：

```
$("#free-roster .roster-container .champion").mouseenter(function () {
    $(this).find(".info").animate({ width: "116px" }, 400);
});

$("#free-roster .roster-container .champion").mouseleave(function () {
    $(this).find(".info").animate({ width: "0px" }, 400);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:49:19.723

这个 jQuery 对我有用：

```
$("#free-roster .roster-container .champion").mouseenter(function () {
    $(this).find(".info").animate({ width: "116px" }, 400);
});

$("#free-roster .roster-container .champion").mouseleave(function () {
    $(this).find(".info").animate({ width: "0px" }, 400);
});

$("#free-roster .roster-container .champion").mouseleave(); 
```

在您的 CSS 中添加：

```
color: white; 
```

至：

```
#free-roster .roster-container .champion .info 
```

[http://jsfiddle.net/9EFsE/1/](http://jsfiddle.net/9EFsE/1/)

# iphone - iphone，设置应用程序测试错误 _OBJC_CLASS__$_MyClass 未定义符号

> ID：10082295
> 
> 赞同：1
> 
> 时间：2012-04-10T02:16:21.680
> 
> 标签：iphone, ios, ios4

我正在尝试为我的 iOS 应用程序设置应用程序测试。我正在使用以下文章作为我正在做的事情的基础：http: [//cocoawithlove.com/2009/12/sample-iphone-application-with-complete.html](http://cocoawithlove.com/2009/12/sample-iphone-application-with-complete.html)

所以我可以创建我需要的其他目标。我现在有 3 个目标： - 原始目标 - 测试目标 - 重复目标

我已将原始目标作为目标依赖项添加到我的测试目标中。然后，我将测试目标添加为我的重复目标的目标依赖项。

但是，每当我尝试在测试用例中引用我的任何类时，我都会得到：

架构 armv7 的未定义符号：“_OBJC_CLASS_$_MyClass”，引用自：MyApplicationTests.o 中的 objc-class-ref “_OBJC_CLASS_$_AnotherClass”，引用自：MyApplicationTests.old 中的 objc-class-ref：未找到符号对于架构 armv7 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

是否有另一个位置需要我设置某种依赖关系来告诉我的测试目标它依赖于原始目标？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T00:06:07.537

所以我找到了这个问题的解决方案：http: [//twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/](http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/)

您需要执行以下操作以避免此问题：

返回您的应用程序目标（不是测试目标），将**Symbols Hidden by Default**构建设置设置为**NO**

现在，只要将原始目标设置为依赖项，就无需将任何源文件添加到测试目标的编译源中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:01:36.697

您必须在测试目标的已编译源列表中包含您从测试代码中引用的任何类的 .m 文件。从您提供的错误消息来看，这听起来像是您的问题。在 XCode 4.2 中，您可以通过在项目导航器中选择您的项目，然后选择您的测试目标、Build Phases 选项卡并展开 Compile Sources 部分来将编译源添加到目标。单击“编译源”部分下方的“+”，然后选择您的类的 .m 文件。

# qt - QVBoxLayout：如何将小部件垂直对齐到顶部而不是中心

> ID：10082299
> 
> 赞同：56
> 
> 时间：2012-04-10T02:16:46.597
> 
> 标签：qt, qlayout

在 Qt 中，当我将小部件添加到布局时，它们默认垂直居中。有没有办法从上到下“列出”小部件而不是垂直居中？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-10T04:31:48.827

使用`void QLayout::setAlignment ( Qt::Alignment alignment )`方法根据您的选择设置对齐方式。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2017-06-12T13:16:15.043

如果您有一个`QVBoxLayout`并且希望将固定大小的小部件堆叠在顶部，您可以简单地在末尾附加一个垂直拉伸：

```
layout.addStretch() 
```

如果您有多个拉伸器或其他拉伸项目，您可以指定一个整数拉伸因子参数来定义它们的大小比。

另请参见[addStretch](http://doc.qt.io/qt-4.8/qboxlayout.html#addStretch)和[addSpacerItem](http://doc.qt.io/qt-4.8/qboxlayout.html#addSpacerItem)。

`layout.addStretch()`在添加小部件之前和之后添加两个以使它们垂直居中：

```
 layout.addStretch()
    layout.addWidget(self.message)
    layout.addWidget(self.userid_field)
    layout.addWidget(self.password_field)
    layout.addWidget(self.loginButton)
    layout.addStretch() 
```

不确定这是否回答了您最初的问题，但它是我在谷歌搜索并被引导到此页面时的答案 - 所以它可能对其他人也有用。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-02-15T17:21:17.337

我发现这比仅使用`layout.setAlignment()`. 直到现在，它一直对我不起作用，当我发现如果您有扩展的小部件并为其设置了最大高度，那么该小部件将不会按照您想要的方式对齐。

这是示例代码，即使*我*调用. 抱歉，它是用 Python 编写的，但它很容易转换为 C++（我已经多次采用另一种方式）。`QTextBrowser()``layout.setAlignment(Qt.AlignTop)`

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class MyWidget(QWidget):
    """
    Create a widget that aligns its contents to the top.
    """

    def __init__(self, parent=None):

        QWidget.__init__(self, parent)

        layout = QVBoxLayout()

        label = QLabel('label:')
        layout.addWidget(label)

        info = QTextBrowser(self)
        info.setMinimumHeight(100)
        info.setMaximumHeight(200)
        layout.addWidget(info)        
        # Uncomment the next line to get this to align top.
#         layout.setAlignment(info, Qt.AlignTop)

        # Create a progress bar layout.
        button = QPushButton('Button 1')        
        layout.addWidget(button)        

        # This will align all the widgets to the top except
        # for the QTextBrowser() since it has a maximum size set.
        layout.setAlignment(Qt.AlignTop)

        self.setLayout(layout)

if __name__ == '__main__':

    import sys

    app = QApplication(sys.argv)

    widget = MyWidget()
    widget.show()
    widget.resize(QSize(900, 400))

    app.exec_() 
```

以下显式调用`layout.setAlignment(info, Qt.AlignTop)`以使扩展文本小部件工作。

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class MyWidget(QWidget):
    """
    Create a widget that aligns its contents to the top.
    """

    def __init__(self, parent=None):

        QWidget.__init__(self, parent)

        layout = QVBoxLayout()

        label = QLabel('label:')
        layout.addWidget(label)

        info = QTextBrowser(self)
        info.setMinimumHeight(100)
        info.setMaximumHeight(200)
        layout.addWidget(info)        
        # Uncomment the next line to get this to align top.
        layout.setAlignment(info, Qt.AlignTop)

        # Create a progress bar layout.
        button = QPushButton('Button 1')        
        layout.addWidget(button)        

        # This will align all the widgets to the top except
        # for the QTextBrowser() since it has a maximum size set.
        layout.setAlignment(Qt.AlignTop)

        self.setLayout(layout)

if __name__ == '__main__':

    import sys

    app = QApplication(sys.argv)

    widget = MyWidget()
    widget.show()
    widget.resize(QSize(900, 400))

    app.exec_() 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-04-16T14:07:50.550

比较两种解决方案后，似乎：

```
myLayout.setAlignment(Qt.AlignTop) 
```

适用于几个小部件对齐但：

```
myLayout.setAlignment(myWidget, Qt.AlignTop) 
```

仅适用于您添加到布局的第一个小部件。毕竟，解决方案还取决于您的小部件的 QSizePolicy。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-18T04:56:47.317

如果您使用的是 QT creator，您只需在小部件底部添加一个“垂直间隔”。

# nhibernate - nhibernate映射一个类别包含前n个产品

> ID：10082302
> 
> 赞同：0
> 
> 时间：2012-04-10T02:16:56.557
> 
> 标签：nhibernate, nhibernate-mapping

我有一个问题，那就是“品类类”包含了很多产品类。但是现在，我有一个 CategoryService 类，它将在相同的情况下实现 find IList 每个类别只包含前 n 个产品，而不是所有产品，我该怎么办？给我一个选择，谢谢！

代码清单：

```
 public class category
 {
    public int Id{get;set;}
    public int Categoryname{get;set;}
    public IList<Product> Products{get;set;}
 }

public class Product
{
   public int Id{get;set;}
   public string ProductName{get;set;}
   public Category Category{get;set;}
   etc...
} 
```

然后有一个域服务：

```
public class CategoryService
{
   private ICategoryRepository categoryRepository;

   public CategoryService(ICategoryRepository categoryRepository)
   {
     this.categoryRepository=categoryRepository;
   }

   public IList<Category> FindAll()
   {
     IList<Category> categories;
     categories=categoryRepository.FindAll();

     //and now i need categoryRepository find all category ,and every category contains top n product, what should i do;

   return categories;
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:05:03.567

```
var count = // it's your top
session.QueryOver<Category>
.Fetch(category => category.Product).Eager
.Take(count)
.TransformUsing(Transformers.DistinctRootEntity)
.List(); 
```

# java - 实例化子类时，是否只创建一个对象？

> ID：10082305
> 
> 赞同：0
> 
> 时间：2012-04-10T02:17:18.950
> 
> 标签：java, object

由于许多构造函数也调用超类构造函数，因此似乎可以认为在实例化子类时同时实例化子类和超类；即创建了多个对象。

仍然只创建一个对象吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T02:18:48.693

只有一个对象，即使调用了超级的构造函数，您也只是对一个对象执行额外的实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T02:18:42.540

是的，只创建了一个对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T02:19:15.080

在内存中只创建一个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T03:03:56.607

至少创建一个对象。谁知道构造函数中创建了多少对象？

```
class X extends Y
{
    Object [ ] objects ;

    X ( int n )
    {
         super ( ) ;
         objects = new Object [ n ] ;
         for ( int i = 0 ; i < n ; i ++ )
         {
              objects [ i ] = new Object ( ) ;
         }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-29T01:18:29.430

爱因斯坦有一句名言：解释应该尽可能简单，但不能简单。简单的答案“只有一个对象”可能是正确的，但错过了很多重要信息。

正如尼克所说，我们可以调用超类构造函数。这样超类构造函数就在“某处”，即使我只实例化了子类。很容易推理，子类的实例必须包括超类的所有成员（所有成员，直到 Object）。原则上，所有这些变量和方法都是子类实例。这些变量和方法还必须包括不被子类继承的变量。因此，实例不仅仅是子类声明或继承的内容。即猫是哺乳动物，即使哺乳动物声明了一些猫不继承的成员（一个糟糕的Java设计决策，IMO）。

例如，如果超类有一个私有变量“priv”，而公共访问器 getPriv() setPriv()，子类可以调用访问器，因此访问变量，修改状态等。但是“priv”本身并不存在在子类 .class 文件中找到。因此，实例不仅仅是“类”。

我将“子类不继承私有成员等”背后的基本原理留给其他讨论。对我来说从来没有任何意义（实例变量是这个实例的；那么你在说什么访问控制？一个对象不能访问它自己的部分？！......无论如何......这是设计师的决定）

顺便说一句，JVM 规范对如何实现继承语义只字未提（实际上也不应该说什么）。一种可能的解决方案（可能是也可能不是任何 JVM 所做的）是在创建子类的实例时创建所有祖先类的完整实例。为什么不？。不太可能有人会带着权威消息来源宣布不应该这样做。当然 JVM 规范没有这么说。

如果有人可以提供有关此主题的实际 JVM 实现信息的指针，那将很有启发性。我用google'ing找不到它。两者都找不到“只有一个对象”断言的权威证实。或许。我不知道。从概念上讲，作为一种 Java 语言结构？当然！但有“澄清”。实现方式，即“在内存中”？可能是，可能不是。

-马球

# sql - SQLPLUS 不打印受影响的行数

> ID：10082308
> 
> 赞同：3
> 
> 时间：2012-04-10T02:17:42.723
> 
> 标签：sql, oracle, sqlplus

我在 .sql 文件中执行下面的脚本。我正在使用 Windows 命令行控制台来调用 sqlplus。当脚本终止时，一切看起来都很好，除了我看不到 INSERT 语句添加的记录数。您还可以在下面看到输出：

**脚本**

```
WHENEVER SQLERROR EXIT 1 ROLLBACK
WHENEVER OSERROR EXIT 1 ROLLBACK
SET FEEDBACK  ON 
SET VERIFY ON
BEGIN
DBMS_OUTPUT.put_line('Output Nothing');
END;
/
INSERT INTO .........

COMMIT;
QUIT;
/ 
```

**输出显示**

```
SQL*Plus: Release 10.2.0.1.0 - Production on Mon Apr 9 22:08:47 2012

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production
With the Partitioning, Automatic Storage Management, OLAP, Data Mining
and Real Application Testing options

PL/SQL procedure successfully completed.

Commit complete.

Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64
bit Production
With the Partitioning, Automatic Storage Management, OLAP, Data Mining
and Real Application Testing options 
```

当我在 TOAD/SQLNavigator 之类的工具上执行相同的 SQL 时，我可以看到添加的行数（参见下面的 ** 标记行）。

**TOAD 上显示的输出**

```
Processing ...
SET FEEDBACK  ON 

SQL*Plus command ignored.
Processing ...
SET VERIFY ON

SQL*Plus command ignored.
Processing ...
BEGIN
DBMS_OUTPUT.put_line('Doing Nothing');
END;

Doing Nothing
Processing ...
INSERT INTO .......

**11 row(s) inserted**

Processing ...
COMMIT

Processing ...
QUIT;

SQL*Plus command ignored. 
```

你能告诉我哪个设置可能会帮助我获得受此 SQL 影响的行数，即使我通过 simple 运行此脚本`'sqlplus'`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:25:07.597

SQL*Plus 不会输出行数，但您可以通过以下方式显式执行此操作：

```
INSERT blah blah blah;
DBMS_OUTPUT.put_line (SQL%ROWCOUNT); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T04:12:15.667

SET FEEDBACK ON 的默认阈值为 6。如果您希望反馈较少的数字，请使用“SET FEEDBACK 1”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T10:39:59.903

利用

```
set echo on
set autotrace on 
```

在这种情况下显示执行的命令和有关语句的统计信息插入的行数

```
WHENEVER SQLERROR EXIT 1 ROLLBACK
WHENEVER OSERROR EXIT 1 ROLLBACK
SET FEEDBACK  ON 
SET VERIFY ON
set echo on
set autotrace on
BEGIN
DBMS_OUTPUT.put_line('Output Nothing');
END;
/
INSERT INTO .........

COMMIT;

QUIT;
/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:22:33.977

```
rem to see Pl/SQL "print" statements:
set serveroutput on 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T03:17:10.763

似乎适用于 11g 客户端：

```
C:\>sqlplus user/pw

SQL*Plus: Release 11.2.0.1.0 Production on Mon Apr 9 21:12:12 2012

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

SQL> insert into testing (select 1,'XX' from dual connect by level < 11);

10 rows created.

SQL> 
```

我不认为 10g 客户端的工作方式不同，但我现在无法测试它。

编辑：

与 10g SQLPlus 相同。我今天运行了您的确切脚本：

```
C:\>sqlplus user/pw@db

SQL*Plus: Release 10.2.0.1.0 - Production on Tue Apr 10 09:12:26 2012

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

Connected to:
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

DB> WHENEVER SQLERROR EXIT 1 ROLLBACK
DB> WHENEVER OSERROR EXIT 1 ROLLBACK
DB> SET FEEDBACK  ON
DB> SET VERIFY ON
DB> BEGIN
  2      DBMS_OUTPUT.put_line('Output Nothing');
  3  END;
  4  /
Output Nothing

PL/SQL procedure successfully completed.

DB> insert into xx (select 'AA' from dual connect by level < 10);

9 rows created.

DB> COMMIT;

Commit complete.

DB> QUIT;
Disconnected from Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

C:\> 
```

我插入 1 行还是 9 行都没关系。我收到了消息。我猜你的脚本示例中遗漏了一些东西。INSERT 是否在 BEGIN/END 块内？那会压制消息。

# c# - AudioQueueEnqueueBufferWithParameters 是否在 Monotouch 中实现？

> ID：10082309
> 
> 赞同：1
> 
> 时间：2012-04-10T02:17:46.253
> 
> 标签：c#, ios, xamarin.ios, pinvoke, audiotoolbox

我正在尝试将缓冲区添加到队列中，并希望`AudioQueueEnqueueBufferWithParameters`按照 iOS 音频工具箱文档中的说明使用。我看到它是 MonoTouch 程序集浏览器中的私有外部。

```
 [DllImport ("/System/Library/Frameworks/AudioToolbox.framework/AudioToolbox")]
    private static extern AudioQueueStatus AudioQueueEnqueueBufferWithParameters...... 
```

是否可以在其他地方声明这个外部以便使用它？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:10:58.107

通常**p/invoke**声明都`private`在 MonoTouch 中标记。然后提供更安全、更易于使用的托管替代方案。

在这种特定情况下，从公共方法`AudioQueueEnqueueBufferWithParameters`调用 p/invoke 。`AudioQueue.EnqueueBuffer`由于这是 MonoTouch 和 MonoMac 之间共享的代码的一部分，您可以在[此处](https://github.com/mono/maccore/blob/master/src/AudioToolbox/AudioQueue.cs#L382)查看完整的源代码。

当然，您仍然可以将先前的 p/invoke 声明复制粘贴到您自己的应用程序中，它也可以工作（但在某些情况下，让它与相关的托管 API 交互可能会更复杂）。

# java - Android 应用程序，从菜单项启动 tabActivity

> ID：10082312
> 
> 赞同：0
> 
> 时间：2012-04-10T02:18:10.153
> 
> 标签：java, android, xml

我正在尝试`tabActivity`从我的主菜单窗格中 启动一个`activity`（我的意思是在启动时加载的那个）。

虽然应用程序编译得很好，甚至可以运行，但只要我按下菜单按钮，相关图标`tabActivity`就会出现运行时错误：

```
$ 04-10 03:00:50.374: E/AndroidRuntime(6531): FATAL EXCEPTION: main
04-10 03:00:50.374: E/AndroidRuntime(6531): java.lang.RuntimeException: Unable to start activity ComponentInfo{Impek.Gen/Impek.Gen.Impekcals}: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2753)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.app.ActivityThread.access$2500(ActivityThread.java:129)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2117)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.os.Looper.loop(Looper.java:143)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.app.ActivityThread.main(ActivityThread.java:4717)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at java.lang.reflect.Method.invoke(Method.java:521)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at dalvik.system.NativeStart.main(Native Method)
04-10 03:00:50.374: E/AndroidRuntime(6531): Caused by: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.app.TabActivity.onContentChanged(TabActivity.java:105)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:229)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.app.Activity.setContentView(Activity.java:1677)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at Impek.Gen.Impekcals.onCreate(Impekcals.java:34)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-10 03:00:50.374: E/AndroidRuntime(6531):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2717)
04-10 03:00:50.374: E/AndroidRuntime(6531):     ... 11 more 
```

代码：

```
 $  main activitys oncreate and menu functions
     public class ImpekActivity extends Activity {
/** Called when the activity is first created. */
private Planner p;
public static Context curr;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    curr = this;
    GeoLocation.setup_GeoLocation();
    p = new Planner(curr);
    update();
    //p.addNewEntry("", latitude, longitude, arrival, postcode)
} 

        @Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.item2:
            Intent f = new Intent(curr, Impeksettings.class);
            startActivity(f);
            return true;
        case R.id.item1:
            Intent t = new Intent(curr,Impekadd.class);
            startActivity(t);
            return true;
        case R.id.calendars:
            Intent c = new Intent(curr,Impekcals.class);
            startActivity(c);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mainmenu, menu);
    return true;
}` 
```

此选项卡活动在按下时调用：

```
public class Impekcals extends TabActivity{

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.calendars);

            Resources res = getResources(); // Resource object to get Drawables
            TabHost tabHost = getTabHost();  // The activity TabHost
            TabHost.TabSpec spec;  // Resusable TabSpec for each tab
            Intent intent;  // Reusable Intent for each tab

            // Create an Intent to launch an Activity for the tab (to be reused)
            intent = new Intent().setClass(this, GlobalCal.class);

            // Initialize a TabSpec for each tab and add it to the TabHost
            spec = tabHost.newTabSpec("global").setIndicator("Global",
                              res.getDrawable(R.drawable.globalcal))
                          .setContent(intent);
            tabHost.addTab(spec);

            // Do the same for the other tabs
            intent = new Intent().setClass(this, GoogleCal.class);
            spec = tabHost.newTabSpec("Googlecal").setIndicator("Google",
                              res.getDrawable(R.drawable.googlecal))
                          .setContent(intent);
            tabHost.addTab(spec);

            intent = new Intent().setClass(this, LocalCal.class);
            spec = tabHost.newTabSpec("Local").setIndicator("Local",
                              res.getDrawable(R.drawable.localcal))
                          .setContent(intent);
            tabHost.addTab(spec);

            intent = new Intent().setClass(this, SearchEvent.class);
            spec = tabHost.newTabSpec("search").setIndicator("Search",
                              res.getDrawable(R.drawable.searchcal))
                          .setContent(intent);
            tabHost.addTab(spec);

     tabHost.setCurrentTab(1);

    }

}

    ` 
```

任何帮助表示赞赏：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:35:48.033

我想知道[这个问题](https://stackoverflow.com/questions/8430759/android-your-content-must-have-a-tabhost-whose-id-attribute-is-android-r-id-tab)或[这个](https://stackoverflow.com/questions/8538437/your-content-must-have-a-tabhost-whose-id-attribute-is-android-r-id-tabhost)问题是否解决了您的问题？

没有源代码，特别是看看你有没有：

```
setContentView(R.layout.main); 
```

或者

```
setContentView(R.layout.your_resource_id); 
```

很难提供任何进一步的帮助。

# android - Android 4.0.3 模拟器将不显示屏幕键盘

> ID：10082317
> 
> 赞同：6
> 
> 时间：2012-04-10T02:18:20.870
> 
> 标签：android, android-emulator

我已经尝试了一切，当我输入 EditText 时，我无法让我的 android 4.0.3 上的模拟器向我显示屏幕键盘。有任何想法吗？我尝试创建不同分辨率的模拟器（如另一篇文章中所建议的那样）无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T20:10:52.147

I had the exact same problem and fixed it by the solution provided here:

[Android 4.0 keyboard issue in emulator.?](https://stackoverflow.com/questions/7885563/android-4-0-keyboard-issue-in-emulator)

# c# - 如何查看文件或文件夹是否未选中“包含可继承权限”？

> ID：10082320
> 
> 赞同：9
> 
> 时间：2012-04-10T02:18:37.227
> 
> 标签：c#, .net, windows, permissions, filesystems

我正在用 C# 编写一个小实用程序，以确保指定的文件夹及其所有内容都具有适当的访问权限（我想授予`Authenticated Users`组完全访问权限）。以下代码似乎适用于更新顶级文件夹的 ACL（访问控制列表）：

```
SecurityIdentifier allUsers = new SecurityIdentifier(WellKnownSidType.AuthenticatedUserSid, null);
InheritanceFlags iFlags = InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit;
FileSystemAccessRule newRule = new FileSystemAccessRule(allUsers,
    FileSystemRights.FullControl, iFlags,
    PropagationFlags.None, AccessControlType.Allow);

DirectoryInfo info = new DirectoryInfo(folderPath);
DirectorySecurity security = info.GetAccessControl();
security.AddAccessRule(newRule);
info.SetAccessControl(security); 
```

但是，我注意到，这个新的访问规则不会传播到在其安全属性中未选中“包括可继承权限……”选项的子文件夹。这才有意义。所以，我想做的是为任何此类子文件夹重新打开安全权限继承。

我的挖掘发现了[`ObjectSecurity.SetAccessRuleProtection`](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.objectsecurity.setaccessruleprotection.aspx)应该是我需要的一半的方法。但是，对已经继承了其父 DACL 的对象盲目地使用上述方法似乎很草率。因此，我想确定哪些对象的权限继承已关闭，但我似乎找不到返回此信息的相应方法或属性。有吗？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T10:03:53.580

我记得使用过这样的东西：

```
DirectoryInfo d = new DirectoryInfo(@"e:\test1");
DirectorySecurity acl = d.GetAccessControl();
if (acl.GetAccessRules(false, true, typeof(System.Security.Principal.SecurityIdentifier)).Count >0)
    // -- has inherited permissions
else
    // -- has no inherited permissions 
```

我也试图找到一种方法来检查这一点，但我找不到任何方法（即使在 C++ 中）。所以我最终使用了上面的代码。它就像一个魅力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-11T22:02:22.433

C# 的`DirectorySecurity`类现在似乎包含在继承时`AreAccessRulesProtected`返回的属性，以及继承时返回的属性。`true``disabled``false``enabled`

因此，您可以简单地使用：

```
DirectorySecurity dirSecurity = Directory.GetAccessControl(pathToDir);
var isInheritanceEnabled = !dirSecurity.AreAccessRulesProtected 
```

感谢[@Wizou](https://stackoverflow.com/questions/10082320/how-to-see-whether-include-inheritable-permissions-is-unchecked-for-a-file-or#comment93481447_25751983)在这里的评论提醒！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-09T19:13:51.093

似乎有一种管理方法可以做到这一点：

```
DirectorySecurity ds = System.IO.Directory.GetAccessControl(@"C:\test");
byte[] rawBytes = ds.GetSecurityDescriptorBinaryForm();
RawSecurityDescriptor rsd = new RawSecurityDescriptor(rawBytes, 0);

if ((rsd.ControlFlags & ControlFlags.DiscretionaryAclProtected) == 
                        ControlFlags.DiscretionaryAclProtected)
{
    // "Include inheritable permissions from this object's parent" is unchecked
}
else
{
    // "Include inheritable permissons from this object's parent" is checked
} 
```

# solr - SOLR 查找准确的字段信息

> ID：10082328
> 
> 赞同：1
> 
> 时间：2012-04-10T02:19:41.587
> 
> 标签：solr, lucene

执行字段查询后，对于给定的搜索词，SOLR API 将返回文档 ID。我的问题是有没有办法获取仅包含最终用户搜索词的最小字段集？

例如，我有一个具有近 200 个属性的 SOLR 文档 我的查询是 (name:SOLR* OR Description:LUCENE*) AND (Publisher:Print* OR AUTHOR:ERIC etc)

在上面的示例中，如果名称字段匹配，我只想要名称等

# javascript - 通过 JavaScript 动态创建 Bootstrap 警报框

> ID：10082330
> 
> 赞同：61
> 
> 时间：2012-04-10T02:19:54.177
> 
> 标签：javascript, twitter-bootstrap

我正在为我的项目使用 Bootstrap 2.0，我想在我的页面中动态添加 Bootstrap 警报框 ( [http://twitter.github.com/bootstrap/javascript.html#alerts](http://twitter.github.com/bootstrap/javascript.html#alerts) )。我想做类似的事情：

```
bootstrap-alert.warning("Invalid Credentials"); 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-14T20:00:22.737

试试这个（请参阅 jsfiddle 中此代码的工作示例：http: [//jsfiddle.net/periklis/7ATLS/1/](http://jsfiddle.net/periklis/7ATLS/1/)）

```
<input type = "button" id = "clickme" value="Click me!"/>
<div id = "alert_placeholder"></div>
<script>
bootstrap_alert = function() {}
bootstrap_alert.warning = function(message) {
            $('#alert_placeholder').html('<div class="alert"><a class="close" data-dismiss="alert">×</a><span>'+message+'</span></div>')
        }

$('#clickme').on('click', function() {
            bootstrap_alert.warning('Your text goes here');
});
</script>​ 
```

**编辑**：现在有一些库可以简化和简化此过程，例如[bootbox.js](http://bootboxjs.com/)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-06-14T22:36:42.123

```
/**
  Bootstrap Alerts -
  Function Name - showalert()
  Inputs - message,alerttype
  Example - showalert("Invalid Login","alert-error")
  Types of alerts -- "alert-error","alert-success","alert-info","alert-warning"
  Required - You only need to add a alert_placeholder div in your html page wherever you want to display these alerts "<div id="alert_placeholder"></div>"
  Written On - 14-Jun-2013
**/

  function showalert(message,alerttype) {

    $('#alert_placeholder').append('<div id="alertdiv" class="alert ' +  alerttype + '"><a class="close" data-dismiss="alert">×</a><span>'+message+'</span></div>')

    setTimeout(function() { // this will automatically close the alert and remove this if the users doesnt close it in 5 secs

      $("#alertdiv").remove();

    }, 5000);
  } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-23T12:31:00.480

您还可以像这样创建 HTML 警报模板：

```
<div class="alert alert-info" id="alert_template" style="display: none;">
    <button type="button" class="close">×</button>
</div> 
```

所以你可以在这里用 JavaScript 做这个：

```
$("#alert_template button").after('<span>Some text</span>');
$('#alert_template').fadeIn('slow'); 
```

在我看来，这更清洁、更快。此外，在调用`fadeIn()`.

为保证此警报模板也适用于多个调用（因此它不会将新消息添加到旧消息中），请在此处将其添加到您的 JavaScript：

```
$('#alert_template .close').click(function(e) {
    $("#alert_template span").remove();
}); 
```

因此，每次您通过 x 按钮关闭警报时，此调用都会删除 span 元素。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-24T01:30:34.173

我创建了这个非常简单和基本的插件：

```
(function($){
    $.fn.extend({
        bs_alert: function(message, title){
            var cls='alert-danger';
            var html='<div class="alert '+cls+' alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>';
            if(typeof title!=='undefined' &&  title!==''){
                html+='<h4>'+title+'</h4>';
            }
            html+='<span>'+message+'</span></div>';
            $(this).html(html);
        },
        bs_warning: function(message, title){
            var cls='alert-warning';
            var html='<div class="alert '+cls+' alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>';
            if(typeof title!=='undefined' &&  title!==''){
                html+='<h4>'+title+'</h4>';
            }
            html+='<span>'+message+'</span></div>';
            $(this).html(html);
        },
        bs_info: function(message, title){
            var cls='alert-info';
            var html='<div class="alert '+cls+' alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>';
            if(typeof title!=='undefined' &&  title!==''){
                html+='<h4>'+title+'</h4>';
            }
            html+='<span>'+message+'</span></div>';
            $(this).html(html);
        }
    });
})(jQuery); 
```

用法是

```
<div id="error_container"></div>
<script>
$('#error_container').bs_alert('YOUR ERROR MESSAGE HERE !!', 'title');
</script> 
```

第一个插件，它可以很容易地变得更好

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-01T14:28:39.293

今天发现了这个，做了一些调整并结合了其他答案的功能，同时将其更新到 bootstrap 3.x。注意：这个答案需要 jQuery。

在 html 中：

```
<div id="form_errors" class="alert alert-danger fade in" style="display:none"> 
```

在 JS 中：

```
<script>
//http://stackoverflow.com/questions/10082330/dynamically-create-bootstrap-alerts-box-through-javascript
function bootstrap_alert(elem, message, timeout) {
  $(elem).show().html('<div class="alert"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><span>'+message+'</span></div>');

  if (timeout || timeout === 0) {
    setTimeout(function() { 
      $(elem).alert('close');
    }, timeout);    
  }
};
</script>​ 
```

然后你可以调用它：

```
bootstrap_alert('#form_errors', 'This message will fade out in 1 second', 1000)
bootstrap_alert('#form_errors', 'User must dismiss this message manually') 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-09-01T10:09:16.087

回顾一下：

```
$(document).ready(function() {

    $('button').on( "click", function() {

      showAlert( "OK", "alert-success" );

    } );

});

function showAlert( message, alerttype ) {

    $('#alert_placeholder').append( $('#alert_placeholder').append(
      '<div id="alertdiv" class="alert alert-dismissible fade in ' +  alerttype + '">' +
          '<a class="close" data-dismiss="alert" aria-label="close" >×</a>' +
          '<span>' + message + '</span>' + 
      '</div>' )
    );

    // close it in 3 secs
    setTimeout( function() {
        $("#alertdiv").remove();
    }, 3000 );

}
```

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css" />

<script  src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

<button onClick="" >Show Alert</button>

<div id="alert_placeholder" class="container" ></div>
```

[密码笔](https://codepen.io/antelove/pen/MWgvPVZ)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-02-02T12:14:01.947

FWIW 我创建了一个可以在运行时使用的 JavaScript 类。
它在[GitHub 上结束了，在这里](https://github.com/JustCarty/BootstrapAlerts)。

那里有一个自述文件，其中有更深入的解释，但我将在下面做一个简单的示例：

```
var ba = new BootstrapAlert();
ba.addP("Some content here");
$("body").append(ba.render()); 
```

上面将创建一个简单的主要警报，其中包含一个段落元素，其中包含文本“这里有一些内容”。

还有一些可以在初始化时设置的选项。
根据您的要求，您可以：

```
var ba = new BootstrapAlert({
    dismissible: true,
    background: 'warning'
});
ba.addP("Invalid Credentials");
$("body").append(ba.render()); 
```

该`render`方法将返回一个 HTML 元素，然后可以将其插入到 DOM 中。在这种情况下，我们将它附加到 body 标签的底部。

这是一个正在进行的库，但它仍然处于非常好的工作状态。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-15T19:42:44.023

我最终使用了带有样式修改 的 toastr ( [https://github.com/CodeSeven/toastr )](https://github.com/CodeSeven/toastr)[使 toastr 警报看起来像引导警报](https://stackoverflow.com/questions/15066882/make-toastr-alerts-look-like-bootstrap-alerts)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-12T23:04:05.203

```
function bootstrap_alert() {
        create = function (message, color) {
            $('#alert_placeholder')
                .html('<div class="alert alert-' + color
                    + '" role="alert"><a class="close" data-dismiss="alert">×</a><span>' + message
                    + '</span></div>');
        };
        warning = function (message) {
            create(message, "warning");
        };
        info = function (message) {
            create(message, "info");
        };
        light = function (message) {
            create(message, "light");
        };
        transparent = function (message) {
            create(message, "transparent");
        };
        return {
            warning: warning,
            info: info,
            light: light,
            transparent: transparent
        };
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-17T16:46:41.500

我发现[AlertifyJS](http://alertifyjs.com/alert.html)是一个更好的选择，并且有一个 Bootstrap 主题。

```
alertify.alert('Alert Title', 'Alert Message!', function(){ alertify.success('Ok'); }); 
```

也有**4 个组件**：**Alert**、**Confirm**、**Prompt**和**Notifier**。

示例：[JSFiddle](https://jsfiddle.net/loginet/1y6zzfhn/)

# java - Eclipse - 导入问题

> ID：10082333
> 
> 赞同：0
> 
> 时间：2012-04-10T02:20:11.063
> 
> 标签：java, eclipse, apache-cayenne

我有我正在尝试调试的项目，并且我确定它使用的是 Cayenne 3.2，我已经下载了 cayenne 3.2 源，现在如果我在选择 Import -> File System -> 后尝试将 Cayenne 源作为项目导入，然后选择根 Cayenne 目录或具有源的子目录之一，我得到“源在目标的层次结构中。” 并且 Eclipse 不允许我导入源代码。如果我不导入它，并且在引发异常时，我单击编辑源查找以附加源，我选择 cayenne 根目录或子目录之一，它不起作用。如果我选择 Jar 或 zip 文件，代码会显示 1 秒然后再次消失！

有人知道修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:21:34.540

目前还没有 Cayenne 3.2，所以您可能指的是 3.1 版本？

为了能够从您的项目中调试从您的代码调用的 Cayenne 代码，您不需要将 Cayenne 源代码导入 Eclipse。相反，您需要将您的依赖 jar 映射到位于其他地方的源。如果您使用 Maven（和 m2eclipse 插件），Maven 应该能够自动执行此操作。如果没有，您仍然可以从 Maven 存储库下载正确的源代码以简化您的任务。例如，如果您使用的是 3.1M3（当然要先确认您的版本），请转到此处：

[http://search.maven.org/#artifactdetails|org.apache.cayenne|cayenne-server|3.1M3|jar](http://search.maven.org/#artifactdetails|org.apache.cayenne|cayenne-server|3.1M3|jar)

下载 cayenne-server-3.1M3-sources.jar 并保存在本地。然后在 Eclipse 中找到 cayenne-server-3.1.jar（在您的库依赖项中的某个位置，具体取决于您的项目的设置方式），右键单击它，选择“Properties > Java Source Attachment > External File”，然后选择源文件你刚刚下载的。

# android - 在前面定义的特定位置将布局添加到另一个布局

> ID：10082334
> 
> 赞同：1
> 
> 时间：2012-04-10T02:20:14.240
> 
> 标签：android, android-layout

假设我在 xml 文件中创建了一个相对布局，并在此布局中的某个位置放置了一个占位符以供将来查看。这个未来视图是另一个 XML 视图中的另一个布局。如何在代码中做到这一点？我知道我必须膨胀未来视图，但是当我将它添加到主布局时，它最终成为左上角的核心，而不是我为它创建的占位符谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:23:49.393

忘记占位符，只需像正常一样添加视图并在创建时指定所需的参数。

```
View v = layoutInflater.inflate(R.layout.future_view, null);
RelativeLayout.LayoutParams relativeParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
v.addRule(RelativeLayout.ALIGN_WITH_PARENT_TOP);
relativeLayout.addView(v,relativeParams) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:46:19.247

您可以将任何视图添加到布局中的任何位置，将视图的父视图作为RelativeLayout，假设您要将视图放置在屏幕上的（x，y）点，通过方法找出布局在屏幕上的位置：

```
View.getLocationOnScreen() 
```

假设我们通过这种方法得到 x1 和 y1。现在通过视图的绝对 x, y 坐标 - 父级的绝对 x1, y1 找出视图相对于父布局的未来 (x, y) 位置。让我们假设我们发现差异为 x2，y2。

现在定义视图的 LayoutParams，如下所示：

```
 View v = layoutInflater.inflate(R.layout.future_view, null);
    RelativeLayout.LayoutParams params= new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
   params.setMargins(x2, y2, 0, 0);

    relativeLayout.addView(v,relativeParams) 
```

# grails - Grails JBOSSAS 插件——如何让它工作？

> ID：10082344
> 
> 赞同：0
> 
> 时间：2012-04-10T02:21:29.850
> 
> 标签：grails, plugins, jboss

新手问题：

我被要求将一个 grails 应用程序部署到 jboss 5。我花了很长时间弄清楚如何利用 grails jbossas 插件。我尽我所知地遵循了文档，但是我得到了同样的例外，就好像插件从来没有出现过一样。

这是我一直在关注的文档：http: [//grails-plugins.github.com/grails-jbossas/docs/manual/guide/2%20Usage.html](http://grails-plugins.github.com/grails-jbossas/docs/manual/guide/2%20Usage.html)

我已将该插件添加到 BuildConfig.groovy 插件{} 闭包中。然后我打电话`grails war`。什么都没有发生，我的战争部署了炸弹。

有人可以给新手一点手来让这个插件工作吗？不幸的是，我发现在实际告诉您如何使用它或插件何时发挥其魔力方面需要文档。

更新：

我的环境：

*   Mac OS X Lion 开发机器
*   圣杯 2.0.3
*   JBoss 5.1.0 -- 运行 Liferay 实例。

伯特，我做了以下事情：

1.  `grails generate-jboss-deploy 5`
2.  `grails war`.
3.  scp 生成的 war 文件到我的远程服务器上的 deploy-jboss 目录。

尽职尽责地，jboss 拿起了新的战争并试图部署它。我收到以下（现在很可怕）异常：

`Caused by: java.lang.NoSuchMethodException: org.hibernate.validator.ClassValidator`

根据使用说明，我修改了`Datasource.groovy`休眠配置：

```
hibernate {
cache.use_second_level_cache = true
cache.use_query_cache = true
cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
validator.apply_to_ddl = false
validator.autoregister_listeners = false
} 
```

似乎已通过运行`generate-jboss-delpoy 5`脚本修改或创建的唯一文件是`WEB-INF/jboss-web.xml`. 它的内容是：

```
<jboss-web>
<class-loading java2ClassLoadingCompliance="false">
    <loader-repository>
        sappi-label:loader=sappi-label.war
        <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
    </loader-repository>
</class-loading>
</jboss-web> 
```

我确认该`jboss-web.xml`文件存在于生成的战争文件中（爆炸，然后检查目录）。

`jboss-web.xml`Burt：除了应该更改的文件之外，还有哪些文件？

**更新**（再次）：

我不认为 jbossas 插件有什么问题。我做了更多的测试，发现插件正在做它应该做的事情：删除 jars，放入 jboss-web.xml。我无法确认它是否修改了休眠配置，但我认为它是。我认为问题出在我试图部署到的服务器上，即 Liferay 实例。

不管我在做什么，我都会收到一个异常，说 slf4j 无法成功加载。不多也不少。我会继续解决这个问题，但这超出了我最初的问题的范围。伯特，谢谢你的帮助。如果您对为什么 slf4j 在 Liferay/jboss 环境中呕吐有任何想法，请告诉我。

问候。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:59:07.917

我想我没有说清楚你需要运行`generate-jboss-deploy`脚本，传入你正在使用的 JBoss 的主要版本，所以在你的情况下`generate-jboss-deploy 5`。我已经更新了文档来描述这一点。

如果这没有帮助，请更新您的问题，说明您看到的错误是什么。

# python - Python 类字典有什么不同？

> ID：10082352
> 
> 赞同：2
> 
> 时间：2012-04-10T02:22:48.527
> 
> 标签：python, oop, class, dictionary

我在 Python 2.7 中遇到了类属性问题，设法找到了解决方案，但我不明白。

在下面的人为代码中，我希望每首歌曲都有自己的字典，其中包含所提到的一周中的几天的歌词。

```
class Song:
  name = ""
  artist = ""
  # If I comment this line and uncomment the one in the constructor, it works right
  week = {}
  def set_monday( self, lyric ):
    self.week[ "Monday" ] = lyric;

  .
  . # silly, I know
  .

  def set_friday( self, lyric ):
    self.week[ "Friday" ] = lyric;

  def show_week( self ):
    print self.week

  def __init__(self, name, artist):
    self.name = name
    self.artist = artist

    # Uncomment the line below to fix this
    # self.week = {}

def main():
  songs = {}

  friday_im_in_love = Song( "Friday I'm in Love", "the Cure" )
  friday_im_in_love.set_monday( "Monday you can fall apart" )
  friday_im_in_love.set_tuesday( "Tuesday can break my heart" )
  friday_im_in_love.set_wednesday( "Wednesday can break my heart" )
  friday_im_in_love.set_thursday( "Thursday doesn't even start" )
  friday_im_in_love.set_friday( "Friday I'm in love" )
  songs[ "Friday I'm in Love" ] = friday_im_in_love

  manic_monday = Song( "Manic Monday", "the Bangles" )
  manic_monday.set_monday( "Just another manic Monday" )
  songs[ "Manic Monday" ] = manic_monday

  for song in songs:
    # This shows the correct name and artist
    print songs[song].name + " by " + songs[song].artist
    # The dictionary is incorrect, though.
    songs[song].show_week()

if __name__ == '__main__':
   main() 
```

除了运行上述代码时，输​​出如下所示：

```
Manic Monday by the Bangles
{'Friday': "Friday I'm in love", 'Tuesday': 'Tuesday can break my heart', 'Thursday': "Thursday doesn't even start", 'Wednesday': 'Wednesday can break my heart', 'Monday': 'Just   another manic Monday'}
Friday I'm in Love by the Cure
{'Friday': "Friday I'm in love", 'Tuesday': 'Tuesday can break my heart', 'Thursday': "Thursday doesn't even start", 'Wednesday': 'Wednesday can break my heart', 'Monday': 'Just another manic Monday'} 
```

两本字典看起来都不像我期望的那样。所以回到代码，如果我`week = {}`在顶部注释，并`self.week={}`在构造函数中取消注释，字典就会以我期望的方式出现。

```
Manic Monday by the Bangles
{'Monday': 'Just another manic Monday'}
Friday I'm in Love by the Cure
{'Friday': "Friday I'm in love", 'Tuesday': 'Tuesday can break my heart', 'Thursday': "Thursday doesn't even start", 'Wednesday': 'Wednesday can break my heart', 'Monday': 'Monday you can fall apart'} 
```

**为什么是这样？**

我意识到`name = ""`and`artist = ""`行（可能）是不必要的，但由于它们*确实*有效，我必须问：由于名称和艺术家字符串属性似乎在构造函数之外“初始化”工作正常；为什么没有周字典？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:06:23.043

> 我意识到 name = "" 和 artist = "" 行（可能）是不必要的，但既然它们确实有效，我必须问：由于 name 和艺术家字符串属性似乎在构造函数之外“初始化”正常工作；为什么没有周字典？

该代码*完全有效，因为*它们是不必要的。但是，这些*行*不能“正常工作”，因为它们*根本不“工作”，*因为它们无关紧要，因为它们是不必要的。

如果您在其中设置了周字典，`__init__`即使您`week = {}`在课堂上离开，它也会起作用，因为相同的机制将启动。

让我们更仔细地看一下：

```
# If I comment this line and uncomment the one in the constructor, it works right
week = {} 
```

Python 遵循一个非常简单的规则：在`class`块中写入的东西属于类，而不是单个对象。要将某些东西附加到名为 的对象上`self`，请分配给其中一个`self.attributes`. 对此，`__init__`并不特别；它可能会被自动调用并具有特定目的，但它与对象的交互方式与任何其他方法相同。（因此即使在 . 中也需要一个`self`参数`__init__`。）

在你的`__init__`，你做：

```
self.name = name
self.artist = artist 
```

这为类的每个对象附加了一个属性（因为每个对象都被`__init__`调用），该属性**隐藏**了类中的对象。**查找**属性时，会在类和对象中查找它们（如果在对象中找不到它们），但是当它们被**分配**时，它们只是被分配给你说分配它的东西到。（要修改一个`Song`属性，你可以使用`Song.whatever = 42`，甚至在一个方法中。）

**当您在类中创建属性并且从未将属性分配给实例时，就会出现问题。**请注意，同样，`__init__`它并不特殊；您可以稍后创建该类的新属性。

现在，由于`__init__`不是特别的，假设我们完成了其中一个示例函数的工作`__init__`：

```
self.week["Friday"] = "gotta get down" 
```

你看得到差别吗？`week["Friday"]`不是属性名称；`week`是。所以我们*不能像这样创建一个新属性*。相反，我们正在**修改**查找为的**现有**`self.week`对象。哪个在类中找到一个，因为该对象没有一个。当我们再次抬头`self.week`时，我们会看到这种变化，即使`self`是不同的`Song`，因为只有一个`Song.week`。

*如果我们用`self.name = name`修改现有对象的东西替换，那么我们会看到相同的行为*。但是，我们实际上**不能**`self.name`这样做： is的初始值`''`，它是一个字符串，而 Python 字符串*没有提供就地修改它们的方法*。当您重新分配一个包含字符串的变量时，您就是这样做的：重新分配。您使变量不再是旧对象的名称，而是开始成为新对象的名称。由于我们只能`self.name`通过赋值来影响`Song.name`，除非我们明确引用`Song.name`.

简单的解决方案是在 中设置属性`__init__`：

```
self.week = {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:25:19.453

字符串是不可变的；你不能改变它们，只能*重新绑定*它们。

字典是可变的；它们可以更改，*每个人都可以看到更改*。

`self`通过分配给within的属性来创建它们`__init__()`。

# java - netbeans 7.1 中的“JVM 创建失败”

> ID：10082353
> 
> 赞同：4
> 
> 时间：2012-04-10T02:23:00.390
> 
> 标签：java, netbeans

我可以成功启动 Netbeans IDE。但是，当我在 IDE 中运行示例应用程序时，我总是会收到`JVM creation failed`消息。

如果我清理它，我可以成功运行它，但只能运行一次。所以，如果我必须运行一个应用程序，我必须重建它。为什么？

我用谷歌搜索`JVM creation failed`，但只找到了解决启动 Netbeans 本身问题的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-04T19:49:08.543

你可以在 netbeans.conf 下找到。

```
C:\Program Files\NetBeans\etc 
```

这是原始的 conf 行。

```
netbeans_default_options="-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true" 
```

只需将此额外参数添加到上面的行。

```
-J-XX:MaxPermSize=128m 
```

最后一行看起来像。

```
netbeans_default_options="-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-XX:MaxPermSize=128m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true" 
```

现在重新启动您的 NetBeans ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:34:31.957

此错误显示您是否打开了任何其他 IDE，例如 Visual Studio。只需关闭该应用程序即可解决该问题。

# java - 获取“主要” java.lang.UnsupportedOperationException

> ID：10082356
> 
> 赞同：0
> 
> 时间：2012-04-10T02:23:23.450
> 
> 标签：java

在执行此代码时，我在第 81 行收到了 java.lang.UnsupportedOperationException。我知道发布整个代码是违反赌注的做法，但我认为除非我发布整个代码，否则很难传达我在做什么。

基本上我想从列表中删除所有出现的元素，所以我正在做 List.removeAll(Collection)。我无法理解我在第 81 行做错了什么。感谢您的帮助！

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.*;
import java.util.Map.Entry;;

public class MinCutClass {

    /**
     * @param args
     */
    private HashMap verticeMap ;
    private List edgeList ;

    public MinCutClass()
    {
          verticeMap = new HashMap();
          edgeList = new ArrayList();
    }

    public static void main(String[] args) 

    {
        // TODO Auto-generated method stub
        MinCutClass minCutObj = new MinCutClass();

        minCutObj.populateVertices();
        minCutObj.printVerticeMap();
        minCutObj.printVerticeMap1();

        minCutObj.populateEdges();

        //minCutObj.printEdgeList();

        minCutObj.findMinCut();

//      minCutObj.printEdgeList();
    //  minCutObj.printVerticeMap();

    }

    private void printEdgeList()
    {
        Iterator i = edgeList.iterator();

        while(i.hasNext())
        {

            System.out.println(i.next());
        }

    }

    private void printVerticeMap()
    {

        Set s = verticeMap.entrySet();
        Iterator i = s.iterator();

        while(i.hasNext())
        {
            Entry e = (Entry)i.next();

            System.out.println("Key :" + e.getKey() + " Value :" + e.getValue());

        }

    }

    private void printVerticeMap1()
    {
        Collection c = new TreeSet();
        c.add("2");
        List temp = (List)verticeMap.get("1");
        System.out.println(temp.getClass().getName());
        temp.removeAll(c);

    }

    private void findMinCut()
    {

        while (verticeMap.keySet().size() > 2 ) // as long as there are more than two vertices
        {

            int randomEdgeIndex = chooseRandomEdgeIndex(); //choose a random edge basically any random index in edgeList
            String randomEdgeChosen = (String)edgeList.get(randomEdgeIndex);

            //Edge contraction

            //1\. remove the edges from edgeList. We want to avoid self loops. There may exist many edges of this type.
            Collection c = new TreeSet();
            c.add(edgeList.get(randomEdgeIndex));
            edgeList.removeAll(c); //removeAll , all edges are removed
            c.clear();

            //get edge vertices
            String [] tempArr = randomEdgeChosen.split("_");
            String v1 =  tempArr[0];
            String v2 = tempArr[1];

            //2.a Delete v2 from v1 vertices list, the contracting edge vanishes. Please note, all parallel edges are also being removed as they create self loops.
            List tempListV1 = (List)verticeMap.get(v1);
            c.add(v2);
            tempListV1.removeAll(c);
            c.clear();

            //2.b Now delete v1 from v2 vertices list, the contracting edge and all parallel edges are removed as they create self loops. 
            List tempListV2 = (List)verticeMap.get(v2);
            c.add(v1);
            tempListV2.removeAll(c);
            c.clear();

            //3\. Now add all vertices v2 is connected with in v1 list because the resultant merged node is v1
            Iterator i = tempListV2.iterator();

            List tempListEle;

            while (i.hasNext())
            {
                String ele = (String)i.next();
                tempListEle = (List)verticeMap.get(ele); //get the vertice list for the current element (from v2 list) being considered  as v1 has to be added to that list and v2 removed.

                tempListV1.add(ele);
                //tempListV2.remove(ele); //this is not needed , as entry for v2 in verticeMap will be deleted

                tempListEle.add(v1);
                tempListEle.remove(v2);

            }

            verticeMap.remove(v2); //once all v2 elements are added to entries for all v2 elements are also updated remove entry for v2 in verticeMap

        }

    }

    private int chooseRandomEdgeIndex()
    {
        return new Random().nextInt(edgeList.size()); 
    }

    private void populateVertices()
    {
        List list = readFile(); // get a list of String arrays
        Iterator i = list.iterator(); 
        while(i.hasNext())
        {
            String[] tempArr  = (String[])i.next(); // get current String array
            String node = tempArr[0]; //get the node number

            tempArr = Arrays.copyOfRange(tempArr, 1, tempArr.length ); //create a String array with 0th element removed 

            //System.out.println(node + "" + Arrays.asList(tempArr) + this.verticeMap.getClass().getName());
            //System.out.println(node + "" + Arrays.asList(tempArr));

            this.verticeMap.put(node, Arrays.asList(tempArr)); // put the node and the nodes it has edges with in a HashMap

            //System.out.println(node + "" + verticeMap.get(node).toString());

        }

        //System.out.println("1" + "" + verticeMap.get("1").toString());

    }

    private void populateEdges()
    {
        List list = readFile(); // get a list of String arrays
        Iterator i = list.iterator(); 
        while(i.hasNext())
        {
            String[] tempArr  = (String[])i.next(); // get current String array
            String node = tempArr[0]; //get the node number 

            for(int count = 1 ; count <= tempArr.length - 1; count++) 
            {
                if(getInt(node) < getInt(tempArr[count]) ) //add the edge to the edgeList only if the node is smaller than other node being considered. This way you only add each edge only once for each pair of vertices.
                {

                    //System.out.println(node + tempArr[count]);
                    edgeList.add(""+node+"_"+tempArr[count]);

                }
            }
        }

//       i = edgeList.iterator();
//       while (i.hasNext())
//       {
//           System.out.println(i.next().toString());
//           
//       }

    }

    private List readFile()
    {
        List list = new ArrayList(); // list of String arrays
            try
            {
                 FileInputStream fstream = new FileInputStream("C:/Users/ankura/Desktop/KargerAdj.txt");

                  DataInputStream in = new DataInputStream(fstream);
                  BufferedReader br = new BufferedReader(new InputStreamReader(in));
                  String strLine;
                  String[] strArr;
                  while ((strLine = br.readLine()) != null)   
                  {

                      strLine = strLine.trim();
                      strArr = strLine.split("\\W+");

                      list.add(strArr);

                  }

                  in.close();

             }

             catch (Exception e)
             {
                //Catch exception if any
              System.err.println("Error: " + e.getMessage());
             }

            return list;

    }

    public int getInt(Object o)
    {

        return Integer.parseInt((String)o);

    }
} 
```

输出/堆栈跟踪：

```
Exception in thread "main" java.lang.UnsupportedOperationException
    at java.util.AbstractList.remove(Unknown Source)
    at java.util.AbstractList$Itr.remove(Unknown Source)
    at java.util.AbstractCollection.removeAll(Unknown Source)
    at MinCutClass.printVerticeMap1(MinCutClass.java:81)
    at MinCutClass.main(MinCutClass.java:32)
Key :3 Value :[2, 4]
Key :2 Value :[1, 3, 4]
Key :1 Value :[2, 4]
Key :4 Value :[1, 2, 3]
java.util.Arrays$ArrayList 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T02:30:46.823

```
 Arrays.asList(tempArr) 
```

[返回](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)由该数组支持的*固定大小的列表。*您不能从中删除元素（或向其中添加元素）。

请注意，Arrays.asList 返回的列表仍然由该数组支持，因此当您更新列表中的元素时，它也会更改数组中的元素。

如果您需要可修改的副本，请使用

```
new ArrayList(Arrays.asList(tempArr)) 
```

# jquery - jOrgChart 配置选项（我应该把它们放在哪里让它们工作？）

> ID：10082364
> 
> 赞同：0
> 
> 时间：2012-04-10T02:24:22.707
> 
> 标签：jquery, css, jquery-ui

我正在尝试制作一个树形组织结构图，并开始使用一个名为 jOrgChart 的插件。在网站上它说它有 3 个配置选项，其中之一是 dragAndDrop。我不知道在我的代码中实际将它放在哪里才能使其工作，默认情况下它说它设置为false。请不要说只是将其设置为true。

jQuery

```
$(document).ready(function() {
    $('#org').jOrgChart();
}); 
```

这是网站区域的图片有 ![在此处输入图像描述](../Images/08e99f23fda76256d7bb6c48a2b64bcd.png) 什么想法吗？

这是链接：[jOrgChart](http://th3silverlining.com/2011/12/01/jquery-org-chart-a-plugin-for-visualising-data-in-a-tree-like-structure/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:41:17.607

我在 GitHub 上找到了它的文档：[https ://github.com/wesnolte/jOrgChart#readme](https://github.com/wesnolte/jOrgChart#readme)

它说为了使用拖放功能，您还必须在页面上包含 jQuery UI。因此，您需要包含该脚本：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script> 
```

在他们的[示例](http://dl.dropbox.com/u/4151695/html/jOrgChart/example/example.html)中，我查看了源代码以了解如何设置 dragAndDrop 选项：

```
jQuery(document).ready(function() {
  $("#org").jOrgChart({
    dragAndDrop  : true
  });
}); 
```

# java - 令牌跳过空格？

> ID：10082366
> 
> 赞同：0
> 
> 时间：2012-04-10T02:24:43.253
> 
> 标签：java, whitespace, token

好的，我已经问了另一个问题，我已经解决了这个问题，但这里是我想要做的事情的简要说明：我希望能够从文本文件中提取文本作为标记 - 例如，假设我有包含以下句子的文本文件：

这是一家不错的餐厅，

相信我！

我想把它的内容提取为“tokens”——例如，一个token是“It's”，下一个token是“”，之后是“a”，然后是“”，然后是“good” ，然后是“餐厅”，然后是“，”和“\n”，然后是“相信”、“”、“我”、“！”。所以我想一种说法是标记要么是单词，要么不是单词。

到目前为止，这是我的代码：

```
/**
* Returns the next token, or throws a NoSuchElementException if none remain.
*/
public Token next() {
  if (c == -1) {
        throw new NoSuchElementException();
    }

  Writer sw=new CharArrayWriter();
  boolean trf=false;
  try {
        while ( c != -1 && isWordCharacter(c) ) {
                sw.write(c);
                c = r.read();
                trf=true;
        }
        while ( c != -1 && !isWordCharacter(c)) {
            if (Character.isWhitespace(c)&&!(trf==true)){
                sw.write(c);
                c=r.read();
                }
            else if (Character.isWhitespace(c)&&(trf==true)){
                c=r.read();
            }
            else{
                sw.write(c);
                c = r.read();

            }
        }
    } catch (IOException e) {
        c = -1;
        return new Token(trf, sw.toString());
    }
    return new Token (trf, sw.toString());
} 
```

问题是我跳过了空格，所以我没有得到“It's”、“”、“a”、“”、“good”等，而是得到“It's”、“a”、“good”而不将空格作为令牌。有没有人有什么问题的提示？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:35:34.543

做就是了：

```
StringTokenizer str = new StringTokenizer(sentence);
ArrayList<String> arr = new ArrayList<String>();
while(str.hasMoreTokens())
{
    //arr.add(" "); Be careful to add this only after the first word
    arr.add(str.nextToken());
} 
```

`" "`在每个标记之后添加包含的逻辑。它很简单；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:09:39.190

这是[参考](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String,%20boolean%29)的链接。
`StringTokenizer(String str, String delim, boolean returnDelims)`

正如最后一个参数所暗示的，它也会返回分隔符。

`StringTokenizer str = new StringTokenizer(sentence," \n\r",true);`

```
while(str.hasMoreTokens())
{
    System.out.println(str.nextToken());
} 
```

这应该给你你想要的。希望能帮助到你。

# python - 在python中将具有大变量名的代码分成两行

> ID：10082368
> 
> 赞同：0
> 
> 时间：2012-04-10T02:25:05.587
> 
> 标签：python, coding-style

我想将python代码分成两行，我的代码类似于：

```
if long_named_three_d_array[first_dimension][second_dimension][third_dimension] == somevalue:
    //dosomething 
```

如果条件超过两行，我想在上面拆分。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T02:27:41.093

在 Python 中，LHS 可以用括号括起来。

```
>>> a = {}
>>> a[1] = {}
>>> a[1][2] = {}
>>> (a[1][2]
... [3]) = ''
>>> a
{1: {2: {3: ''}}}
>>> (b) = 2
>>> b
2 
```

这意味着您可以将您的行写为

```
if (long_named_three_d_array[first_dimension] 
    [second_dimension]
    [third_dimension] ) == somevalue:
# Rest of code here, obviously properly indented in for the if. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T02:30:14.483

您可以使用换行符继续字符`\`.

```
if long_named_three_d_array[first_dimension] \
    [second_dimension]\
    [third_dimension] == somevalue:
# Rest of code here, obviously properly indented in for the if. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T02:36:45.527

一种方法是使用临时变量：

```
tmp = long_named_three_d_array[first_dimension][second_dimension][third_dimension] 
if tmp == somevalue:
    //dosomething 
```

如果可能的话，虽然更短但描述性的变量标识符将是一个更好的选择。

# facebook - facebook 登录按钮

> ID：10082371
> 
> 赞同：0
> 
> 时间：2012-04-10T02:25:25.000
> 
> 标签：facebook, authentication, login

我正在我的网站上实施 facebook 身份验证（注册 + 登录）。一切正常，除了显示按钮，即使我已登录。在此先感谢

```
 <h1 id="welcome">Welcome to my website</h1>
<div id="fb-root"></div>
<span id="fb-login" class="hidden">
<fb:login-button registration-url="http://lemiart.com/register.php"></fb:login-button>
</span>
<script src="https://connect.facebook.net/en_US/all.js#appId=306738122732711&xfbml=1"></script>
<script type="text/javascript">
FB.init({appId: '306738122732711', status: true, cookie: true, xfbml: true});

FB.Event.subscribe('auth.login', function(){
    loggedIn();
});

FB.getLoginStatus(function(response){
    if (response.session){
    // user logged in. Let the auth.login subscription handle this
    } else {
        loggedOut();
    }
});

loggedIn = function() {
    FB.api('/me', function(response) {
    var welcome = document.getElementById('welcome');
    if (welcome) welcome.innerHTML += ' ' + response.id;
    document.getElementById('fb-login').className = "hidden";
    })
}

loggedOut = function() {
    document.getElementById('fb-login').className="";
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:10:08.443

您当前的实现将始终提示用户登录。您可能需要做的是以下几点：

将回调函数写入 FB.init，然后检查用户是否登录到您的应用程序，然后决定是否要显示 fb:login 按钮。

它看起来像这样：

```
window.fbAsyncInit = function() {
    FB.init({
        //...
    });

    FB.getLoginStatus(function(response){
        FB.getLoginStatus(function(response){
            if (response.session){
              // user logged in. Let the auth.login subscription handle this
        } else {
            loggedOut();
        }
    });
}; 
```

# java - 带有 System.in 的静态 BufferedReader

> ID：10082373
> 
> 赞同：1
> 
> 时间：2012-04-10T02:25:27.903
> 
> 标签：java

我看到许多使用 BufferedReader 作为静态成员而不是实例成员的 Java 示例。这是一些最佳实践吗？我什么时候应该或不应该这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:41:08.753

> 这是一些最佳实践吗？

当然不是。相反，在大多数情况下，这将被视为*最糟糕*的做法。静态成员需要非常小心地使用；经过适当的分析，成员应该只有在真正需要时才应该是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:08:51.343

我认为制作`BufferedReader`静态成员不是任何标准。这仅取决于您想要的行为。如果它在某种需要以静态方式访问其字段的 Utils 类中，则将其设为静态。否则，我认为将其设为实例或更好的方法级变量没有任何害处。

例如，写了*大量*关于 Spring、Hibernate 和 Java 的教程的 Yong Mook Kim 提供了[这个](http://www.mkyong.com/java/how-to-read-file-from-java-bufferedreader-example/)示例，他`BufferedReader`以非静态方式访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:17:09.460

我认为静态比任何东西都更清楚。我不知道有任何标准说最好以一种或另一种方式来做。我想这取决于您需要以这种方式访问​​它的频率和原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T02:16:43.780

我发现 BufferedReader 与 System.in 一起使用时不应关闭的情况；因为在这种情况下，Java 不允许重新打开它。在这种情况下，将此属性声明为静态是有意义的。

# sql-server - 如何在部署期间更新sql数据库，而不是创建新的

> ID：10082380
> 
> 赞同：0
> 
> 时间：2012-04-10T02:25:57.887
> 
> 标签：sql-server, visual-studio, visual-studio-2010, sql-server-2008, webdeploy

我有一个 Visual Studio 2010 网站项目，我正在为其创建部署包。我的网站依赖于我也包含在部署包中的 SQL 数据库。在第一次部署期间，在生产服务器上的 IIS 中导入已部署的程序包效果很好，当时还没有数据库。对于第二次以上的部署，我在导入过程中收到一个错误，指出已经有一个名为某某的对象。看起来它正在尝试再次创建数据库，而不是自上次部署以来更新数据库模式。

![在此处输入图像描述](../Images/2f49e3534977b1cd3f71493842f73522.png)

我正在创建部署包并将 zip 复制到生产服务器并通过 WebDeploy 2.1 直接导入 IIS。我怎样才能更新数据库？我尝试拥有一个 Visual Studio sql 数据库项目，并让包仅包含从该项目的“部署”中生成的 .sql 文件，但遇到了其他不相关的问题。不可能这么难。我应该如何部署数据库架构更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:39:00.107

您需要使用自定义脚本部署数据库更改（如果您想保留数据）。

或者，如果您只想删除并重新创建某个对象，您可以使用自动化脚本来执行此操作。

无论哪种方式，都不像推出原始数据库那么容易。

如果您没有数据库更改，您可以从部署中排除数据库（Package/Publish Web 选项卡 - 取消选中数据库）。

请参阅以下文章[http://msdn.microsoft.com/en-us/library/dd465343.aspx](http://msdn.microsoft.com/en-us/library/dd465343.aspx)

请特别注意“使用自动生成的脚本重新部署”和“使用自定义脚本部署数据库更改”部分。

# android - Android：查询sqlite打开数据库时的FC

> ID：10082381
> 
> 赞同：2
> 
> 时间：2012-04-10T02:25:59.127
> 
> 标签：android, sqlite, thread-safety

Android 系统会自动关闭一个打开的 SQLite 数据库吗？我已经实现了一个用于访问数据的单例类，有时那里的方法需要在工作线程上运行。我有一个在后台运行的查询的同步功能，这里是代码：

```
public ArrayList<ActualCall> getUnsentCalls(boolean forUnsentSignature) {
    ArrayList<ActualCall> calls = new ArrayList<ActualCall>();

    Cursor c;
    open();

    if (forUnsentSignature)
        c = db.rawQuery("SELECT * FROM " + TXN_ACTUAL_CALL_COMPONENT
                + " WHERE sentFlag=1 and sigSentFlag=?", new String[] {"0"});
    else
        c = db.rawQuery("SELECT * FROM " + TXN_ACTUAL_CALL_COMPONENT
                + " WHERE sentFlag=? AND signature != ''", new String[] {"0"});

    if (c.moveToFirst()) {
        do {
            if (!db.isOpen())
                open();
            ActualCall call = new ActualCall();

            call.setAcpComponentId(c.getString(c.getColumnIndex("acpComponentId")));
            call.setAcpDate(c.getString(c.getColumnIndex("acpDate")));
            call.setAcpId(c.getString(c.getColumnIndex("acpId")));
            call.setCallEndTime(c.getString(c.getColumnIndex("callEndTime")));
            call.setCallStartTime(c.getString(c.getColumnIndex("callStartTime")));
            call.setCoordinates(c.getString(c.getColumnIndex("coordinates")));
            call.setDeviceTimestamp(c.getString(c.getColumnIndex("deviceTimestamp")));
            call.setDoctorId(c.getString(c.getColumnIndex("doctorId")));
            call.setSignature(c.getString(c.getColumnIndex("signature")));
            call.setSigSentFlag(c.getString(c.getColumnIndex("sigSentFlag")));
            call.setTimeSpent(c.getString(c.getColumnIndex("timeSpent")));
            call.setSentFlag(c.getString(c.getColumnIndex("sentFlag")));
            call.setCoordinates(c.getString(c.getColumnIndex("coordinates")));

            calls.add(call);

        } while (c.moveToNext());
    }

    c.close();
    db.close();

    return calls;
} 
```

正如你所看到的，我已经在最初的几行中调用了 open() ，但是我收到了一个错误，表明我的数据库已经关闭。这是堆栈跟踪：

```
 java.lang.IllegalStateException: database    
 /data/data/com.***.****/databases/****.db (conn# 0) already closed
 at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2123)
 at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:398)
 at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:390)
 at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:74)
 at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:311)
 at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:292)
 at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:156)
 at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:233)
 at com.***.****.datalayer.ESCAndroidDataLayer.getUnsentCalls(ESCAndroidDataLayer.java:5340)
 at com.***.****.synchall.SynchAll$UnsentSignatureSender.run(SynchAll.java:1750) 
```

同样，如果有帮助，则在 Thread 类上调用上述方法。我找到了一个关于自动关闭 SQLite 的链接，但我不明白他的解决方案： http: [//darutk-oboegaki.blogspot.com/2011/03/sqlitedatabase-is-closed-automatically.html](http://darutk-oboegaki.blogspot.com/2011/03/sqlitedatabase-is-closed-automatically.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:05:21.767

尝试在**c.moveToFirst()**之前调用 db.acquireReference()

```
 db.acquireReference();

    if (c.moveToFirst()) { 
```

**或者只需将 db.close() 与“ if (db.isOpen())** ”括起来就足够了。

```
 if (db.isOpen())
    {
        db.close();
    } 
```

我不太确定，但这些会改变一些事情。

# iphone - 阻止 UIAlertViewDelegate

> ID：10082383
> 
> 赞同：25
> 
> 时间：2012-04-10T02:26:11.317
> 
> 标签：iphone, objective-c

我对目标 C 很陌生，我只是想弄清楚是否可以使用块或选择器作为 UIAlertView 的 UIAlertViewDelegate 参数 - 哪个更合适？

我尝试了以下方法，但它不起作用，所以我不确定我是否走在正确的轨道上？

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Checked In" 
    message:responseString
    delegate:^(UIAlertView * alertView, NSInteger buttonIndex)
                                                    {
                                                       NSLog(@"Done!");
                                                   } 
    cancelButtonTitle:@"OK" 
    otherButtonTitles: nil]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-10T02:52:39.517

很好的主意。这里是。就像警报视图一样，除了添加一个在解除警报时调用的块属性。（编辑 - 自原始答案以来我已经简化了这段代码。这是我现在在项目中使用的）

```
//  AlertView.h
//

#import <UIKit/UIKit.h>

@interface AlertView : UIAlertView

@property (copy, nonatomic) void (^completion)(BOOL, NSInteger);

- (id)initWithTitle:(NSString *)title message:(NSString *)message cancelButtonTitle:(NSString *)cancelButtonTitle otherButtonTitles:(NSArray *)otherButtonTitles;

@end

//
//  AlertView.m

#import "AlertView.h"

@interface AlertView () <UIAlertViewDelegate>

@end

@implementation AlertView

- (id)initWithTitle:(NSString *)title message:(NSString *)message cancelButtonTitle:(NSString *)cancelButtonTitle otherButtonTitles:(NSArray *)otherButtonTitles {

    self = [self initWithTitle:title message:message delegate:self cancelButtonTitle:cancelButtonTitle otherButtonTitles:nil];

    if (self) {
        for (NSString *buttonTitle in otherButtonTitles) {
            [self addButtonWithTitle:buttonTitle];
        }
    }
    return self;
}

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

    if (self.completion) {
        self.completion(buttonIndex==self.cancelButtonIndex, buttonIndex);
        self.completion = nil;
    }
}

@end 
```

你可以扩展这个想法来为其他委托方法提供块，但 didDismiss 是最常见的。

像这样称呼它：

```
AlertView *alert = [[AlertView alloc] initWithTitle:@"Really Delete" message:@"Do you really want to delete everything?" cancelButtonTitle:@"Nevermind" otherButtonTitles:@[@"Yes"]];

alert.completion = ^(BOOL cancelled, NSInteger buttonIndex) {
    if (!cancelled) {
        [self deleteEverything];
    }
};
[alert show]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-17T06:33:20.990

正如Apple文档所说，必须使用 UIAlertController 来实现这种方法

> UIAlertController 对象向用户显示警告消息。此类替换用于显示警报的 UIActionSheet 和 UIAlertView 类。使用您想要的操作和样式配置警报控制器后，使用 presentViewController:animated:completion: 方法呈现它。
> 
> 除了向用户显示消息之外，您还可以将操作与警报控制器相关联，以便为用户提供响应方式。对于您使用 addAction: 方法添加的每个操作，警报控制器会配置一个带有操作详细信息的按钮。当用户点击该动作时，警报控制器会执行您在创建动作对象时提供的块。 [苹果文档。](https://developer.apple.com/library/tvos/documentation/UIKit/Reference/UIAlertController_class/index.html)

```
UIAlertController* alert = [UIAlertController alertControllerWithTitle:@"My Alert"

       message:@"This is an alert."
                                   preferredStyle:UIAlertControllerStyleAlert];

    UIAlertAction* defaultAction = [UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault
       handler:^(UIAlertAction * action) {}];

    [alert addAction:defaultAction];
    [self presentViewController:alert animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T08:36:18.163

真棒的想法。我刚刚使用类别模式完成了您的想法，没有子类，直接调用 UIAlertView。请按照以下步骤操作：

1.  .h 文件中的类别 UIAlertView

    ```
    @interface UIAlertView (AlertWithBlock)

       - (void (^)(UIAlertView *alertView, NSInteger buttonIndex))delegateBlock;
       - (void)setDelegateBlock:(void (^)(UIAlertView *alertView, NSInteger buttonIndex))delegateBlock;

       + (id)alertWithTitle:(NSString *)title message:(NSString *)message cancelButtonTitle:(NSString   *)cancelButtonTitle otherButtonTitles:(NSArray *)otherButtonTitles delegate:(void (^)(UIAlertView *alertView, NSInteger buttonIndex))delegate;

    @end 
    ```

2.  在 .m 文件中

    ```
    @implementation UIAlertView(AlertWithBlock)

    static char const *delegateBlockTagKey = "delegateBlockTagKey";

    - (void (^)(UIAlertView *alertView, NSInteger buttonIndex))delegateBlock
    {
        return objc_getAssociatedObject(self, delegateBlockTagKey);
    }

    - (void)setDelegateBlock:(void (^)(UIAlertView *alertView, NSInteger buttonIndex))delegateBlock
    {
        objc_setAssociatedObject(self, delegateBlockTagKey, delegateBlock, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    }

    + (id)alertWithTitle:(NSString *)title message:(NSString *)message cancelButtonTitle:(NSString *)cancelButtonTitle otherButtonTitles:(NSArray *)otherButtonTitles delegate:(void (^)(UIAlertView *alertView, NSInteger buttonIndex))delegate
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title message:message delegate:nil cancelButtonTitle:cancelButtonTitle otherButtonTitles:nil];
        alert.delegate = alert;
        alert.delegateBlock = [delegate copy];

        for (NSString *buttonTitle in otherButtonTitles)
        {
            [alert addButtonWithTitle:buttonTitle];
        }

        [alert show];

        return alert;
    }

    #pragma mark - Delegate
    -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {
        if (alertView.delegateBlock)
        {
            alertView.delegateBlock(alertView, buttonIndex);
        }
    }

    @end 
    ```

3.  像这样打电话

    ```
    [UIAlertView alertWithTitle:@"Title" message:@"This is a message" cancelButtonTitle:@"Cancel" otherButtonTitles:@[@"Yes",@"No"] delegate:^(UIAlertView *alertView, NSInteger buttonIndex) {
    NSLog(@"Click at button index %ld", buttonIndex);
    }]; 
    ```

希望它有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T16:42:19.550

这是对 danh 实现的更新，它是不完整的，因为不可能添加多个按钮。将 va_list 传递给函数有点棘手:-)

所以你可以这样做，以便能够将多个按钮添加到`UIAlertView`：

```
- (id)initWithTitle:(NSString *)title message:(NSString *)message completion:(void (^)(NSInteger buttonIndex))completion cancelButtonTitle:(NSString *)cancelButtonTitle otherButtonTitles:(NSString *)otherButtonTitles, ... {

    self = [super initWithTitle:title message:message delegate:self cancelButtonTitle:cancelButtonTitle otherButtonTitles:nil ];

    if(self){
        _completion = completion;

        va_list _arguments;
        va_start(_arguments, otherButtonTitles);

        for (NSString *key = otherButtonTitles; key != nil; key = (__bridge NSString *)va_arg(_arguments, void *)) {
                [self addButtonWithTitle:key];
        }
        va_end(_arguments);

    }

    return self;
} 
```

**更新**：可能有更好的方法将 va_list 传递给`super`. 我想提一下，对我来说`va_list`，他们有一些神秘的东西:-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-06T03:16:50.157

我用 Swift 写了一个简单的扩展，希望对你有帮助

```
import UIKit

extension UIAlertView {

    func show(completion: (alertView: UIAlertView, buttonIndex: Int) -> Void){
        self.delegate = AlertViewDelegate(completion: completion)
        self.show()
    }

    class func showInput(title: String?, message: String?, cancellable: Bool, completion: (text: String?) -> Void){

        var strOK = NSLocalizedString("OK",comment: "OK")
        var strCancel = NSLocalizedString("Cancel",comment: "Cancel")
        var alert = UIAlertView(title: title, message: message, delegate: nil, cancelButtonTitle: cancellable ? strCancel : strOK)
        alert.alertViewStyle = UIAlertViewStyle.PlainTextInput
        if(cancellable) {
            alert.addButtonWithTitle(strOK)
        }
        alert.show { (alertView, buttonIndex) -> Void in
            if(cancellable && alertView.cancelButtonIndex == buttonIndex) {
                completion(text: nil)
                return
            }
            completion(text: alertView.textFieldAtIndex(0)?.text)
        }
    }

    private class AlertViewDelegate : NSObject, UIAlertViewDelegate {
        var completion :  (alertView: UIAlertView, buttonIndex: Int) -> Void
        var retainedSelf : NSObject?
        init(completion: (UIAlertView, Int) -> Void ) {
            self.completion = completion
            super.init()

            self.retainedSelf = self
        }

        func alertView(alertView: UIAlertView, didDismissWithButtonIndex buttonIndex: Int) {
            var retain = self
            retain.retainedSelf = nil
            retain.completion(alertView: alertView, buttonIndex: buttonIndex)
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-10T16:53:00.063

在 github 上查看这个[UIAlertView-Blocks类别。](https://github.com/jivadevoe/UIAlertView-Blocks)我使用它并且效果很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-25T08:53:27.790

这是另一个有用的库来做同样的事情。[http://bit.ly/ichalrtvw](http://bit.ly/ichalrtvw)

代码在这里：[http ://bit.ly/ichalertview](http://bit.ly/ichalertview)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-01T15:19:31.030

这是我的实现，似乎与这里的大多数答案相似：http: [//stavash.wordpress.com/2013/01/31/quick-tip-uialertview-with-a-block-callback/](http://stavash.wordpress.com/2013/01/31/quick-tip-uialertview-with-a-block-callback/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-14T18:12:45.460

查看[Github 上的 UIAlertView-Blocks 类别](https://github.com/GuyKahlon/UIAlertView-CompletionBlocks.git)。我写了这个并且非常易于使用并且运行良好。

祝你好运。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-14T07:38:28.657

只需使用[REKit](https://github.com/zuccoi/REKit)。它类似于 BlocksKit，但功能更强大。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-10-31T02:41:31.603

我不得不稍微编辑调用示例以停止编译器错误。只是一个小小的调整，xcode 很高兴。

```
UIAlertViewBlock *alert = [[UIAlertViewBlock alloc] initWithTitle:@"hi"
                                                          message:@"hi there"
                                                       completion:^(BOOL canceled,NSInteger buttonIndex) {
                                                           NSLog(@"canceled=%d", canceled);
                                                           NSLog(@"pressed=%d", buttonIndex);
                                                       }
                                               cancelButtonTitle:@"cancel"
                                                otherButtonTitles:@"ok", nil];
[alert show]; 
```

# django - 如何在将文件上传到文件夹之前使用 django-filebrowser 重命名文件

> ID：10082392
> 
> 赞同：2
> 
> 时间：2012-04-10T02:27:57.730
> 
> 标签：django, upload, django-filebrowser

像 django 的 upload_to

```
def upload_to(instance, filename):
    filename = time.strftime('%Y%m%d%H%M%S')
    ym = time.strftime('%Y%m')
    return 'uploads/%s/%s.jpg' % (ym,filename)

class Person(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30)
    photo = models.ImageField(u"Image (Upload)",upload_to=upload_to) 
```

文件已保存“上传/%s/%s.jpg”

但改变为

```
photo = FileBrowseField("Image", max_length=200, directory="uploads/", extensions=[".jpg"], blank=True, null=True) 
```

如何在将文件上传到 django 的 upload_to 之类的文件夹之前重命名文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T18:41:28.477

In filebrowser/sites.py you can create a hook for this when uploading / handling uploads:

```
def _upload_file(self, request):
    """
    Upload file to the server.
    """
    if request.method == "POST":
        folder = request.GET.get('folder', '')

        if len(request.FILES) == 0:
            return HttpResponseBadRequest('Invalid request! No files included.')
        if len(request.FILES) > 1:
            return HttpResponseBadRequest('Invalid request! Multiple files included.')

        filedata = list(request.FILES.values())[0]

        fb_uploadurl_re = re.compile(r'^.*(%s)' % reverse("filebrowser:fb_upload", current_app=self.name))
        folder = fb_uploadurl_re.sub('', folder)

        path = os.path.join(self.directory, folder)
        # we convert the filename before uploading in order
        # to check for existing files/folders
        file_name = convert_filename(filedata.name)
        filedata.name = file_name
        file_path = os.path.join(path, file_name
        .... 
```

You can modify file_path here to whatever you like, or modify the file name.

For those of you that just want to ensure that files are not overwritten, you can set the FILEBROWSER_OVERWRITE_EXISTING flag in your settings.py as such:

```
FILEBROWSER_OVERWRITE_EXISTING = False 
```

This will ensure that when you edit your files you give them a unique name, and it also ensures new uploads get their filename converted to something unique using filebrowsers convert_filename method defined in filebrowser/utils.py

More on filebrowser settings [here](http://django-filebrowser.readthedocs.org/en/latest/settings.html#main-url-paths-settings). Hope this helps :)

# javascript - Heroku 在 Heroku (Node.js) 上找不到本地模块

> ID：10082404
> 
> 赞同：7
> 
> 时间：2012-04-10T02:30:14.590
> 
> 标签：javascript, node.js, heroku, express

我正在开发一个 Node.js 应用程序，并且正在使用一个*config.js*文件来公开我的 twitter API 令牌/秘密。我这样做是因为我计划在完成应用程序后将其开源，并希望将其保密（因此，将该文件放在我的`.gitignore`.

无论如何，对于我的问题 - 我收到以下错误日志：

```
2012-04-09T22:41:12+00:00 app[web.1]: node.js:134
2012-04-09T22:41:12+00:00 app[web.1]:         ^
2012-04-09T22:41:12+00:00 app[web.1]:         throw e; // process.nextTick error, or 'error' event on first tick
2012-04-09T22:41:12+00:00 app[web.1]: Error: Cannot find module './config'
2012-04-09T22:41:12+00:00 app[web.1]:     at require (module.js:348:19)
2012-04-09T22:41:12+00:00 app[web.1]:     at Function._load (module.js:266:25)
2012-04-09T22:41:12+00:00 app[web.1]:     at Function._resolveFilename (module.js:320:11)
2012-04-09T22:41:12+00:00 app[web.1]:     at Object.<anonymous> (/app/app.js:6:19)
2012-04-09T22:41:12+00:00 app[web.1]:     at Module._compile (module.js:404:26)
2012-04-09T22:41:12+00:00 app[web.1]:     at Object..js (module.js:410:10)
2012-04-09T22:41:12+00:00 app[web.1]:     at Function._load (module.js:297:12)
2012-04-09T22:41:12+00:00 app[web.1]:     at EventEmitter._tickCallback (node.js:126:26)
2012-04-09T22:41:12+00:00 app[web.1]:     at Module.load (module.js:336:31)
2012-04-09T22:41:12+00:00 app[web.1]:     at Array.<anonymous> (module.js:423:10)
2012-04-09T22:41:13+00:00 heroku[web.1]: State changed from starting to crashed
2012-04-09T22:41:13+00:00 heroku[web.1]: Process exited with status 1 
```

我的文件名是`config.js`，我正在做：`var config = require('./config')`在我的应用程序中。我没有在我的文件中将它列为依赖`package.json`项，因为它不在 NPM 中。

与工头和 Procfile 一起在本地运行（就像 heroku 的文档所说的那样）效果很好。但是，我很困惑为什么当我需要本地文件时它会给我一个错误。`config.js`与我的目录位于同一目录级别`app.js`，因此要求它的路径是正确的。

**编辑**：下面是我使用的代码部分`app.js`：

```
var express     = require('express')
  , sys         = require('sys')
  , request     = require('request')
  , config      = require('./config') 
```

谢谢 - 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T06:35:28.433

因为您将`config.js`文件放入您的文件中，`.gitignore`所以它不会像您所说的那样被推送到 Heroku 服务器。对于您说要执行的操作，您通常会使用[Heroku 的配置变量](https://devcenter.heroku.com/articles/config-vars)来设置环境变量，然后您的应用程序会读取这些环境变量：

```
$ heroku config:add TWITTER_TOKEN=<token> TWITTER_SECRET=<secret> 
```

然后在您的`app.js`文件中，您可以使用以下命令访问这些环境变量：

```
var token = process.env['TWITTER_TOKEN'];
var secret = process.env['TWITTER_SECRET']; 
```

# objective-c - 不明白为什么我在 xCode 中收到 EXC_BAD_ACCESS

> ID：10082409
> 
> 赞同：0
> 
> 时间：2012-04-10T02:30:33.420
> 
> 标签：objective-c, xcode

我不明白为什么在我的 .m 文件中调用 mineHit 方法时会出现 EXC BAD ACCESS 错误。我知道这表明按钮数组已被释放，但我不明白为什么它会被释放。

```
#import "basicsViewController.h"

@implementation basicsViewController
@synthesize resetGame;
@synthesize scoreLabel;
@synthesize timeLabel;
@synthesize time;
@synthesize score;

-(void)newGame{
int index=0;
int yAxis=70;
for(int y=0;y<100;y=y+10){
    int xAxis=20;
    for( int x = 1; x < 11; x++) {
        buttonArray[index] = [[UIButton alloc]init];
        buttonArray[index] = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [buttonArray[index] setTag:index];
        [buttonArray[index] addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
        buttonArray[index].frame = CGRectMake(xAxis, yAxis, 26.0, 26.0);
        NSLog(@"tag:%d xAxis:%d yAxis:%d",buttonArray[index].tag,(int)buttonArray[index].frame.origin.x,(int)buttonArray[index].frame.origin.y);
        [self.view addSubview:buttonArray[index]];
        xAxis=xAxis+28;
        index=x+y;
    }
    yAxis=yAxis+28;
}

//generate bombs

for (int bombs=0;bombs<10;bombs++){

    bombArray[bombs]= (arc4random()%99);
    //TODO compare against bombArray to make sure of no duplicates
    NSLog(@"BOMB AT %d",bombArray[bombs]);

}

}

- (IBAction)resetPress:(id)sender {
[self newGame];
}

- (void)buttonClicked:(UIButton*)button
{
BOOL hit;
NSLog(@"SELECTED BUTTON:%d",button.tag);
for (int b=0;b<10;b++){
    if (button.tag==bombArray[b]){
        //BOMB HIT
        hit=YES;
        b=10;
    }
    else {
        //no bomb
        hit=NO;
    }
}
if (hit==YES){
    //if hit
    NSLog(@"HIT AT %d",button.tag);
    [self mineHit];

}
else {
    //if not hit
    NSLog(@"%d is clean",button.tag);
    [self cleanHit:button];

}
}

-(void)mineHit{

for (int d=0;d<100;d++){
    NSLog(@"%i",buttonArray[d].tag);
    buttonArray[d].enabled=NO;
    [buttonArray[d] setTitle:@"*" forState:UIControlStateDisabled];
}

}
-(void)cleanHit:(UIButton*)button{
button.enabled=NO;
[button setTitle:@"!" forState:UIControlStateDisabled];

}

- (void)viewDidLoad
{
[super viewDidLoad];
[self newGame];

}

- (void)viewDidUnload
{
[self setResetGame:nil];
[self setScoreLabel:nil];
[self setTimeLabel:nil];
[super viewDidUnload];

}
@end 
```

这是我的 .h 文件

```
#import <UIKit/UIKit.h>
NSInteger bombArray[];
UIButton *buttonArray[];
@interface basicsViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIButton *resetGame;
@property (weak, nonatomic) IBOutlet UILabel *scoreLabel;
@property (weak, nonatomic) IBOutlet UILabel *timeLabel;
@property int time;
@property int score;
-(void)newGame;
-(void)buttonClicked:(UIButton*)button;
-(void)mineHit;
-(void)cleanHit:(UIButton*)button;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:39:39.653

当我编译你的代码时，我收到四个警告。所有四个警告都是相同的，并说：

> 假设有一个元素的暂定数组定义

警告适用于接口 (.h) 文件中的`bombArray`和数组的定义。`buttonArray`

如果我们给这两个数组一个大小，您的`-mineHit`方法就可以正常工作。

将 .h 文件的开头更改为：

```
#import <UIKit/UIKit.h>
NSInteger bombArray[10];
UIButton *buttonArray[100];
@interface basicsViewController : UIViewController 
```

编译器生成警告是有原因的，最好尝试让您的代码干净地编译而没有警告或错误。

**更新：** 虽然我们在这里，但没有理由不能在接口内移动这些数组并将它们声明为实例变量。这样做意味着数组与视图控制器的单个实例相关联。您不太可能拥有此视图控制器的多个实例，但最好现在正确执行，而不是以后被咬。

```
#import <UIKit/UIKit.h>

@interface basicsViewController : UIViewController {
    NSInteger bombArray[10];
    UIButton *buttonArray[100];
} 
```

有趣的是，将声明移动到界面中会将警告变成错误。

# android - 带有 EditText 的 ExpandableListView

> ID：10082413
> 
> 赞同：7
> 
> 时间：2012-04-10T02:30:51.533
> 
> 标签：android, android-edittext, expandablelistview

我有一个 ExpandableListView，其中每个 parentView 都有一个 EditText（和一个 textview）。当我将 EditText 添加到布局时，它不再让我单击或展开 ExpandableListView，所有焦点都转到 EditText。有没有办法让 EditText 和 ExpandableListView 本身都可以点击？我希望能够单击 expandableListView 来展开列表，并且 EditText 能够输入文本。

谢谢

**编辑：添加了我的组视图的代码**

```
 public View getGroupView(int groupPosition, boolean isExpanded,
                             View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.group_row, null);
        }

        TextView playerName = (TextView) convertView.findViewById(R.id.playerName);
        playerName.setText(groupElements[groupPosition]);
        final EditText holeScore = (EditText) convertView.findViewById(R.id.score);
        holeScore.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Toast.makeText(scoreCard.this, "On CLick", Toast.LENGTH_SHORT).show();
                holeScore.setFocusable(true);
            }
        });
        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:35:53.597

问题是因为 EditText 的默认焦点。由于默认情况下它们能够获得焦点，这将使您的父视图不集中。因此，您要做的就是通过使用删除 EditText 的焦点功能，

```
andorid:focusable="false". 
```

同样，如果您的父级中有任何按钮，将 focusable false 设置为它也将有所帮助。这是使父视图被点击的唯一方法。

# c# - 如何将 control.background(brush) 转换为位图？

> ID：10082415
> 
> 赞同：1
> 
> 时间：2012-04-10T02:31:20.940
> 
> 标签：c#, wpf, bitmap, brush

如何将 system.windows.controls.control.background(brush) 转换为位图？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:35:39.980

```
public BitmapSource ConvertToBitmapSource(UIElement element)
{
    var target = new RenderTargetBitmap((int)(element.RenderSize.Width), (int)(element.RenderSize.Height), 96, 96, PixelFormats.Pbgra32);

    var brush = new VisualBrush(element);

    var visual = new DrawingVisual();
    var drawingContext = visual.RenderOpen();

    drawingContext.DrawRectangle(brush, null, new Rect(new Point(0, 0), new Point(element.RenderSize.Width, element.RenderSize.Height)));

    drawingContext.Close();

    target.Render(visual);

    return target;
} 
```

# grails - Grails 多选

> ID：10082423
> 
> 赞同：1
> 
> 时间：2012-04-10T02:32:23.497
> 
> 标签：grails, user-registration

我正在用一点 Ajax 在 Grails 中实现一个注册表单。我的目标是显示一个包含三个选项的单选组，并根据选择，相关域字段将出现在下方。

我有三个域对象：用户、捐赠者和教师。用户可以是捐赠者、教师或两者兼而有之，这就是包装对象的原因。

我看到的所有从列表或单选组中进行多项选择的示例都处理同一域类的不同实例。是否可以使用多个域对象来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:06:39.403

为每个域类创建 3 个模板，并根据您的选择或单选按钮的值呈现对应的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:45:50.170

看看这个：[AJAX Driven SELECTs in GSP](http://grails.org/AJAX-Driven+SELECTs+in+GSP)

也许可以解决您的问题

# iphone - 如何维护一个 plist，这样你就不会失去你的价值观

> ID：10082427
> 
> 赞同：0
> 
> 时间：2012-04-10T02:32:42.313
> 
> 标签：iphone, ios, plist

我有一个 plist，我从我的包中读取到一个新的 plist 对象，我将它放在根目录中以进行读写。我的问题是我该怎么做，或者应用程序在退出时会做什么，更好的是，当应用程序从 ios 的“多任务”菜单中被杀死时会发生什么。

还有一种方法可以将此 plist 保存到内存/捆绑包以供将来再次使用应用程序时使用。

我的代码如下供参考。

这是我的.h

```
 #import <Foundation/Foundation.h>

    @interface EngineProperties : NSObject {

    NSString *signature;
    NSNumber *version;
    NSNumber *request;
    NSNumber *dataVersion;
    NSMutableDictionary *cacheValue;
    //cachevalue Items
    NSNumber *man;
    NSNumber *mod;
    NSNumber *sub;

    }

    @property (copy, nonatomic) NSString *signature;
    @property (copy, nonatomic) NSNumber *version;
    @property (copy, nonatomic) NSNumber *request;
    @property (copy, nonatomic) NSNumber *dataVersion;
    @property (copy, nonatomic) NSMutableDictionary *cacheValue;
    //cachevalue Items
    @property (copy, nonatomic) NSNumber *man;
    @property (copy, nonatomic) NSNumber *mod;
    @property (copy, nonatomic) NSNumber *sub;

    //Singletton
+ (id)sharedManager;
    - (void) saveData:(NSString *)methodName signature:(NSString *)pSignature Version:(NSNumber *)pVersion request:(NSNumber *)rNumber dataVersion:(NSNumber *)dvReturned cacheValue:(NSNumber *)cValue;

    @end 
```

这是我的 .m

```
 #import "EngineProperties.h"

static EnginePropertiesController *sharedMyManager = nil;

    @implementation EngineProperties

    @synthesize signature;
    @synthesize version;
    @synthesize request;
    @synthesize dataVersion;
    @synthesize cacheValue;

    @synthesize man;
    @synthesize mod;
    @synthesize sub;

    #pragma mark Singleton Methods
+ (id)sharedManager {
    @synchronized(self) {
        if (sharedMyManager == nil)
            sharedMyManager = [[self alloc] init];
    }
    return sharedMyManager;
}
- (id)init {
    if (self = [super init]) {

        // Data.plist code
        // get paths from root direcory
        NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
        // get documents path
        NSString *documentsPath = [paths objectAtIndex:0];
        // get the path to our Data/plist file
        NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"EngineProperties.plist"];

        // check to see if Data.plist exists in documents
        if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath])
        {
            // if not in documents, get property list from main bundle
            plistPath = [[NSBundle mainBundle] pathForResource:@"EngineProperties" ofType:@"plist"];
        }

        // read property list into memory as an NSData object
        NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
        NSString *errorDesc = nil;
        NSPropertyListFormat format;
        // convert static property liost into dictionary object
        NSDictionary *tempRoot = (NSMutableDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&errorDesc];
        if (!tempRoot)
        {
            NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
        }
        // assign values
        self.signature = [tempRoot objectForKey:@"Signature"];
        self.version = [tempRoot objectForKey:@"Version"];
        self.request = [tempRoot objectForKey:@"Request"];
        self.dataVersion = [tempRoot objectForKey:@"Data Version"];

        man = [cacheValue objectForKey:@"Man"];
        mod = [cacheValue objectForKey:@"Mod"];
        sub = [cacheValue objectForKey:@"SubMod"];

        cacheValue = [tempRoot objectForKey:@"Cache Value"];
    }

    - (void) saveData:(NSString *)methodName signature:(NSString *)pSignature Version:(NSNumber *)pVersion request:(NSNumber *)rNumber dataVersion:(NSNumber *)dvReturned cacheValue:(NSNumber *)cValue;
    {
        // get paths from root direcory
        NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
        // get documents path
        NSString *documentsPath = [paths objectAtIndex:0];
        // get the path to our Data/plist file
        NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"EngineProperties.plist"];

        // set the variables to the values in the text fields
        self.signature = pSignature;
        self.version = pVersion;
        self.request = rNumber;
        self.dataVersion = dvReturned;

        //do some if statment stuff here to put the cache in the right place or what have you.
        if (methodName == @"manufacturers")
        {
            self.man = cValue; 
        }
        else if (methodName == @"models")
        {
            self.mod = cValue;
        }
        else if (methodName == @"subMod")
        {
            self.sub = cValue;
        }

        self.cacheValue = [NSDictionary dictionaryWithObjectsAndKeys:
                           man, @"Manufacturers",
                           mod, @"Models",
                           sub, @"SubModels", nil];

        NSDictionary *plistDict = [NSDictionary dictionaryWithObjectsAndKeys:
                                   signature, @"Signature",
                                   version, @"Version",
                                   request, @"Request",
                                   dataVersion, @"Data Version",
                                   cacheValue, @"Cache Value", nil];

        NSString *error = nil;
        // create NSData from dictionary
        NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

        // check is plistData exists
        if(plistData)
        {
            // write plistData to our Data.plist file
            [plistData writeToFile:plistPath atomically:YES];

            NSString *myString = [[NSString alloc] initWithData:plistData encoding:NSUTF8StringEncoding];
            //        NSLog(@"%@", myString);
        }
        else
        {
            NSLog(@"Error in saveData: %@", error);
            //        [error release];
        }
    }

    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:37:19.320

老实说，这取决于您要求和更改 plist 值的频率。例如，我的应用程序只需要检索一次，然后写几次（没什么），所以我所有的保存代码都在所述特定方法的末尾。

但是，如果您的 plist 是实时的（常量值更改），建议保留对您希望保存的可从 AppDelegate 访问的数据的引用。这样，您可以简单地调用：`beginBackgroundTaskWithExpirationHandler:`on -`applicationDidResignActive`并保存您的 plist 数据。

（注意，如果用户在完全保存之前足够快地杀死您的应用程序（如果），则无法保证您的 plist 的完整性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:59:22.400

按照他们还提供代码的链接中的打击链接。如何将数据写入/读取到 .plist 文件。

[列表](http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T21:53:54.820

您可以快速轻松地将 plist 保存到 NSUserDefaults

看看这个快速教程：

[http://www.cocoadev.com/index.pl?NSUserDefaults](http://www.cocoadev.com/index.pl?NSUserDefaults)

# php - PHP echo $_SERVER['PHP_SELF'] 添加了变量？

> ID：10082429
> 
> 赞同：5
> 
> 时间：2012-04-10T02:32:50.427
> 
> 标签：php

只是想`$_SERVER['PHP_SELF']`作为一个附加了 ?logout=1 的链接。

```
<a href="<?php echo ''$_SERVER['PHP_SELF']'.logout=1' ?>" id="add"><input type="button" value="LOGOUT" /></a> 
```

给

```
Parse error: syntax error, unexpected T_VARIABLE, expecting ',' or ';' in F:\export\srv\www\vhosts\main\htdocs\php\assign3\m_a2_functions.php on line 90 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T02:36:33.650

改变：

```
<?php echo ''$_SERVER['PHP_SELF']'.logout=1' ?> 
```

到：

```
<?php echo $_SERVER['PHP_SELF'], '?logout=1' ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T02:36:21.750

```
<a href="<?php echo $_SERVER['PHP_SELF'] . '?logout=1' ?>" id="add"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T02:36:31.853

你有没有尝试过：

```
<?php echo($_SERVER['PHP_SELF'] . "?logout=1") ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T02:34:18.393

你的报价到处都是：

```
<a href="<?php echo $_SERVER['PHP_SELF'] . '?logout=1'; ?>" id="add"><input type="button" value="LOGOUT" /></a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T02:38:42.770

这可能是一个可以`printf()`派上用场的地方。

```
<a href="<?php printf( '%s?logout=1', $_SERVER['PHP_SELF'] ); ?>">Foo</a> 
```

这减少了我们跳进跳出字符串的次数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T03:03:48.057

您正在定义一个锚点 (<a>) 并在其中放置一个按钮，但该按钮不会将您发送到该 URL。您应该使按钮的“onclick”事件将用户重定向到您想要的页面。

此外，如果您只是想在当前 URL 中添加一个变量，您实际上并不需要使用 PHP_SELF，浏览器会知道该做什么。

```
<input type="button" value="LOGOUT" onclick="window.location.href='?logout=1';"/> 
```

# hibernate - mappedBy 和 inverse 属性相同吗？

> ID：10082434
> 
> 赞同：5
> 
> 时间：2012-04-10T02:33:10.277
> 
> 标签：hibernate

我真的没有得到 mappedBy 属性的含义。请告诉我如果我们不使用它会有什么影响。如果你能举出对我来说很好的例子。

另外，属性 mappedBy 和 inverse 是一样的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T19:18:56.057

是的，在注解中映射的功能与在 XML 文件中的逆功能相同。

一个关系总是有 2 个实体参与其中。

在一对一或一对多或多对一的情况下，密钥将存储在其中一个实体中。将其存储在 2 个地方没有任何意义。

它必须告诉 hibernate 关键在关系的另一端。

因此，如果存在具有一对一关系的实体 A 和 B，并且您在 A 中看到 mappedBy 属性，则外键（指向 A）存储在 B 中。

# python - 一个非常简单的正则表达式的麻烦

> ID：10082436
> 
> 赞同：4
> 
> 时间：2012-04-10T02:33:59.707
> 
> 标签：python, regex

我正在使用 python 尝试编写一些简单的代码，通过正则表达式查看字符串并找到东西。在这个字符串中：

```
and the next nothing is 44827 
```

我希望我的正则表达式只返回数字。

我已经像这样设置了我的python程序：

```
buf = "and the next nothing is 44827"
number = re.search("[0-9]*", buf)
print buf
print number.group() 
```

number.group() 返回的是一个空字符串。但是，当正则表达式是：

```
number = re.search("[0-9]+", buf) 
```

完整编号 (44827) 已正确提取。我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T02:37:00.470

问题是`[0-9]*`匹配零个或多个数字，因此匹配零长度字符串非常高兴。

同时，`[0-9]+`匹配一个或多个数字，因此需要看到至少一个数字才能捕捉。

* * *

您可能想要使用[`findall`](http://docs.python.org/library/re.html#re.findall)和处理每行有多个数字的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T02:36:50.613

您的第一个正则表达式匹配字母“a”之前的空字符串，因此它停在那里。你的第二个没有，所以它一直在尝试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T02:37:28.763

这是因为第一次尝试匹配一个空字符串——你要求它输入“0 位或更多位”——所以第一次匹配在字符串的开头是空的。当您要求“一个或多个数字”时，第一个匹配从第一个 '4' 开始，并从那里继续直到数字结束。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-10T02:38:08.770

你自己看。

*   `[0-9]*` [http://regexr.com?30je4](http://regexr.com?30je4)
*   `[0-9]+` [http://regexr.com?30je7](http://regexr.com?30je7)

**暗示 ：**

*   `*`匹配 0 次或多次
*   `+`匹配 1 次或多次

显然，第一种情况优先于第二种情况。并且正则表达式引擎完全没有问题，不匹配任何东西。:-)

# php - Drupal 作为 CMS 和 CodeIgniter 作为框架？

> ID：10082448
> 
> 赞同：0
> 
> 时间：2012-04-10T02:35:56.880
> 
> 标签：php, codeigniter, drupal

是否可以使用 Drupal 作为 CMS 和 CodeIgniter 作为框架来创建 Web 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:01:16.553

首先决定是否要构建[CMS](http://en.wikipedia.org/wiki/Content_management_system)。

如果您想构建一个 CMS，那么您可以选择 Drupal 或[Expression Engine](http://ellislab.com/expressionengine)或任何其他 CMS 框架，如 Joomla。使用 Expression Engine 的优势在于它构建在 Codeigniter 之上，您可以使用 Codeigniter/php 编码风格添加自定义模块。

如果您不想构建 CMS，那么既然您熟悉 Codeigniter，请仅使用 Codeigniter 构建 Web 应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:49:46.880

Drupal 并不真正需要 CI 之类的东西，反之亦然。如果你在 Drupal 中构建一个 Web 应用程序，并且你真的觉得需要 CI 之类的东西，那么你应该简单地用 CI 编写整个应用程序。

Drupal 在某种程度上是一个 Web 应用程序的预构建库。您安装它，已经准备好后端、缓存、登录机制等一切。接下来您添加一些模块，自定义主题并完成。就像装饰客厅或建造额外的车库一样。

CI更像是建造房屋的坚实基础。它有一些功能，但如果你想要你需要的一切，你需要编写自己的功能。你需要建造墙壁和所有这些东西，但最终你对任何事情都有 100% 的控制权。

我看不出拥有 2 个 Web 应用程序基础的意义。只是让事情变得更复杂恕我直言。如果您想要一个更扩展的基础而不仅仅是一个框架，只需选择 Drupal。或者，如果您想从“只是一个框架”构建一切，请选择 CI。

# jquery - 触发.on时点击的jquery问题

> ID：10082450
> 
> 赞同：0
> 
> 时间：2012-04-10T02:36:21.493
> 
> 标签：jquery, click, live

我需要知道这里出了什么问题，当我尝试运行以下它不起作用时，没有警告框没有错误没有。

```
$(function() { 
$("tbody[name=leadstores]").on("click","tr",function(e){

alert("clicked");
});

}); 
```

只是想知道我做错了什么。

忘了说，这个脚本在我使用时正在工作

> 。居住

这是桌子

```
<table id="tableprod" style="width: 100%; ">
<thead id="storelocation" class="fixedHeader" style="min-width: 800px; ">
<tbody id="tbbody" name="leadstores">

<tr id="20">
<td name="street" class="company" style="width: 400px; padding-right: 2%; ">Shop 1012, Westfield Bondi Junction, 500 Oxford Street</td>
<td name="suburb" class="company" style="padding-right: 3%; ">Bondi Junction</td>
<td name="postcode" class="field" style="padding-right: 3%; ">2022</td>
<td name="state" class="field" style="padding-right: 3%; ">NSW</td>
<td name="phone" class="company">(02) 9388</td>
</tr>
<tr id="21">
<td name="street" class="company" style="width: 400px; padding-right: 2%; ">Kiosk KG17, Westfield Doncaster, 619 Doncaster Road</td>
<td name="suburb" class="company" style="padding-right: 3%; ">Doncaster</td>
<td name="postcode" class="field" style="padding-right: 3%; ">3108</td>
<td name="state" class="field" style="padding-right: 3%; ">VIC</td>
<td name="phone" class="company">(03) 9840</td>
</tr>
<tr id="23">
<td name="street" class="company" style="width: 400px; padding-right: 2%; ">Kiosk 66A, Macquarie Centre, cnr Herring & Waterloo Rd</td>
<td name="suburb" class="company" style="padding-right: 3%; ">North Ryde</td>
<td name="postcode" class="field" style="padding-right: 3%; ">2113</td>
<td name="state" class="field" style="padding-right: 3%; ">NSW</td>
<td name="phone" class="company">(02) 9889</td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:42:56.133

您的 table 元素必须有一个 name="leadstores" 的 tbody 元素才能让您的 js 工作：

```
<table>
<tbody name="leadstores">
 <tr><td>&nbsp;</td></tr>
</tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:52:26.313

**.live()**可以成为问题解决者

当您的目标 DOM（**在您的情况下为 tbody[name=leadstores]**）

在页面加载后动态添加。

.live() 侦听新添加的 DOM，以便您可以将事件与那些绑定

动态添加的 DOM。

**编辑：**

由于 .live() 在 jQuery 1.7.x 中已被弃用，

```
$("#tableprod").on("click","tr",function(e){
    alert("clicked");
}); 
```

试试这个

# jquery - Web 应用程序 - 如何在 Android 上滚动具有绝对位置样式的 div 和滚动溢出-y

> ID：10082452
> 
> 赞同：1
> 
> 时间：2012-04-10T02:36:25.767
> 
> 标签：jquery, android, web-applications

我叫尼克。我正在开发一个 Web 应用程序，其中包含一个包含在 div 中的下拉菜单，该菜单具有***绝对***位置和***滚动***溢出-y 的样式。如果用户想从菜单中看到更多选项（文本），他们需要向下滚动（使用鼠标滚轮或手指在触摸设备上）。

我的网络应用程序在所有流行的（台式机/笔记本电脑）网络浏览器、iPad 和 iPhone 上运行良好，但菜单在 Android（智能手机和平板电脑）上不可滚动。我尝试使用 Chris 的想法（[http://chris-barr.com/index.php/entry/scrolling_a_overflowauto_element_on_a_touch_screen_device/](http://chris-barr.com/index.php/entry/scrolling_a_overflowauto_element_on_a_touch_screen_device/)）和 Tom 的（[如何让 Android 响应触摸拖动？](https://stackoverflow.com/questions/7681894/how-do-i-get-android-to-respond-to-touch-drags)）来处理触摸事件，但它仍然没有奏效。

大家能给我一些提示来解决这个问题吗？您的帮助将不胜感激。

我只使用 HTML5、CSS 和 jQuery。下面给出的功能适用于您希望使其在触摸设备上滚动的信息提供（文本 + 图像）div 容器。

这是我的自定义代码：

```
/* Make scrollable texts scrollable on touch devices */

function touchScroll(id, option) {
    var scrollStartPosY = 0, scrollStartPosX = 0;
    var element = document.getElementById(id), jQueryId = '#' + id, jQueryElement = $(jQueryId);
    if (!element) {
        return;
    }

    if (option == "disable") {
        jQueryElement.unbind("touchstart");
        jQueryElement.unbind("touchmove");
        return;
    }

    /*
     * Note that Android browser doesn't support a web app featuring divs with overflow: scroll styling.
     * So we need to use touches and drags with our own custom functions
     */

    jQueryElement.bind("touchstart", function(event) {
        scrollStartPosY = jQueryElement.scrollTop() + event.originalEvent.touches[0].pageY;
        scrollStartPosX = jQueryElement.scrollLeft() + event.originalEvent.touches[0].pageX;
        event.preventDefault();
    });

    jQueryElement.bind("touchmove", function(event) {
        // These if statements allow the full page to scroll (not just the div) if they are
        // at the top of the div scroll or the bottom of the div scroll
        // The -5 and +5 below are in case they are trying to scroll the page sideways
        // but their finger moves a few pixels down or up.  The event.preventDefault() function
        // will not be called in that case so that the whole page can scroll.
        if (((jQueryElement.scrollTop() < (element.scrollHeight - element.offsetHeight)) &&
            ((jQueryElement.scrollTop() + event.originalEvent.touches[0].pageY) < scrollStartPosY - 5)) ||
            (jQueryElement.scrollTop() != 0 && ((jQueryElement.scrollTop() + event.originalEvent.touches[0].pageY) > (scrollStartPosY + 5)))) {
            event.preventDefault();
        }
        if (((jQueryElement.scrollLeft() < (element.scrollWidth - element.offsetWidth)) &&
            ((jQueryElement.scrollLeft() + event.originalEvent.touches[0].pageX) < (scrollStartPosX - 5))) ||
            (jQueryElement.scrollLeft() != 0 && ((jQueryElement.scrollLeft() + event.originalEvent.touches[0].pageX) > (scrollStartPosX + 5)))) {
            event.preventDefault();  
        }

        jQueryElement.scrollTop (scrollStartPosY - event.originalEvent.touches[0].pageY);
        jQueryElement.scrollLeft (scrollStartPosX - event.originalEvent.touches[0].pageX);
    });
} 
```

# php - 将两个数组插入一个mysql行

> ID：10082461
> 
> 赞同：0
> 
> 时间：2012-04-10T02:37:16.860
> 
> 标签：php, mysql, arrays, insert

我有两个数组：

```
name - facebook,google,yahoo
url - facebook.com,google.com,yahoo.com 
```

在我的数据库中，我有一个表 (tbl_websites)。
结构：id、site_name、site_url

我想将这两个数组中的数据插入到该表的单行中。

示例：（第 1 行）

```
id : 1
site_name : facebook
site_url : facebook.com 
```

（第 2 行）

```
id : 2
site_name : google
site_url : google.com 
```

（第 3 行）

```
id : 3
site_name : yahoo
site_url : yahoo.com 
```

我怎么做？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:42:23.667

假设数组之间存在直接的 1:1 匹配，您可以简单地循环其中一个，如下所示：

```
foreach ($name as $key => $value) {
  $name_value = mysql_real_escape_string($value);
  $url_value = mysql_real_escape_string($url[$key]);

  // Addendum: If there was a third array, just use `$key` as the array key
  // same as done with $url[$key]
  $thrid_value = mysql_real_escape_string($third_arr[$key]);

  $result = mysql_query("INSERT INTO tbl_websites (site_name, site_url, third_value) VALUES ('$name_value', '$url_value', '$third_value')");
} 
```

这假设`id`是一个自动增量值。为了简单起见，我在`mysql_query()`这里使用了该功能。但建议通过类似 PDO 的 api 使用准备好的语句。从数组中检索它们的过程是相同的。

### PDO 版本（假设已在 中建立连接`$db`）：

```
foreach ($name as $key => $value) {   
  $stmt = $db->prepare("INSERT INTO tbl_websites (site_name, site_url) VALUES (:name, :url)");
  $stmt->execute(array(':name' => $name_value, ':url' => $url_value));
} 
```

上面的代码不包括任何错误检查。阅读[PDO 手册](http://www.php.net/manual/en/class.pdostatement.php)以获取有关使用 PDO 语句进行错误检查的示例。它可以通过`try/catch`异常块或 PHP 警告来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T02:49:08.467

你可以做一个查询（更好的性能）：

```
$values = array_map(function($name, $url){
    return "('$name', '$url')";
}, array_map('mysql_real_escape_string', $name), array_map('mysql_real_escape_string', $url));

mysql_query("INSERT INTO `tbl_websites` (`site_name`, `site_url`) VALUES " . implode(' ', $values)); 
```

# java - IntelliJ productivity tips running tomcat

> ID：10082469
> 
> 赞同：2
> 
> 时间：2012-04-10T02:38:01.760
> 
> 标签：java, spring, tomcat, intellij-idea, jetty

I'm developing using IntelliJ 11u on a spring mvc application using tomcat.

I tried the maven jetty plugin, but after a few builds I keep getting java permGen issues and then it just hangs. I was told this was because spring uses log4j and it has some sort of leaks?

Anyhow, I'm asking for tips to help fire up a server, tomcat, with my updated code so I can make quick updates and have tomcat reloaded.

Here are my current annoyances with tomcat:

1.  Only code changes seem to get auto-reloaded, if I make changes to my view pages things don't get updated unless I redeploy. The maven jetty plugin seems to map to my view pages directly and I saw updates to my view pages instantly w/o it even redeploying.

2.  if I have more than 1 thing running in intelliJ, like say I have a main program that I run, or a unit test, IntelliJ seems to re-order what gets run in the run drop down menu and also the shortcut keys get changed to the last thing I ran.

3.  I use google chrome, for some reason when I start tomcat it brings firefox to the forefront and opens a new tab each and every time.

If someone can address any or all of the above issues that would be great as I hate this dance I have to go through just to update/redeploy my application. I wish it could just be a consitant method, using shortcuts or automatically without me having to close the tab created in firefox, and then minimizie it, or redploy for a simple view change etc.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T05:46:19.747

You should [configure IDEA to update classes and resources](http://www.jetbrains.com/idea/webhelp/updating-a-running-java-ee-application.html) and enable a checkbox in the Run configuration to do it automatically on frame deactivation.

[Browser can be changed in IDEA settings](http://www.jetbrains.com/idea/webhelp/web-browsers.html) and you can disable opening browser at all in [Tomcat Run/Debug configuration](http://www.jetbrains.com/idea/webhelp/run-debug-configuration-tomcat.html).

As for the Run panel tabs order, you can **pin** tabs using the tab right click menu, in this case they will remain in the Run or Debug panel in the order they were created.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:58:36.393

Look at JRebel if you want an even more productive environment (It costs, but I find it is worth it). As you can see here, [http://zeroturnaround.com/jrebel/features/](http://zeroturnaround.com/jrebel/features/), it increases the types of changes you can hot-swap (no waiting for a build). I am currently evaluating it myself and will probably pick up a full license.

BTW, if you develop in scala (it looks like you're not, but just in case) the plugin is free.

# java - 即使在更改应用名称和 apk 文件名后也更换应用？

> ID：10082471
> 
> 赞同：0
> 
> 时间：2012-04-10T02:38:03.797
> 
> 标签：java, android

我从修改互联网上的一些示例代码开始编写我的 android 应用程序。经过一些修改（包括 apk 文件名和应用程序名称），我有一个修改版本的应用程序。当我希望再次安装原始示例 apk 时，它会显示“您要替换应用程序吗？”的消息。我认为它想使用原始应用程序来替换应用程序的修改版本。我应该改变什么，以便 Android 不会认为它们是同一个应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:54:14.803

更改清单中的包名称。

# php - 如何将换行符转换为代码？

> ID：10082476
> 
> 赞同：0
> 
> 时间：2012-04-10T02:38:47.630
> 
> 标签：php, php-5.3, line-breaks

如何将换行符转换为代码？例如，

```
$array = array(
    'title' => 'abc',
    'content'  => 'a paragraph

    line break

    line break

    '
); 
```

我想转换`$array['content']`为

```
a paragraph\r\n\t\r\n\tline break\r\n\t\r\n\tline break\r\n\t\r\n\t 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:58:05.600

你也可以试试：

```
echo addcslashes($array['content'],"\n\r\t"); 
```

（如果您打算将换行符保留为原始示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:47:16.487

这些方面的东西？

```
$array['content'] = str_replace(array("\n", "\t"), array('\r\n', '\t'), $array['content']); 
```

# php - 有效地对节点进行分组？

> ID：10082477
> 
> 赞同：1
> 
> 时间：2012-04-10T02:38:51.603
> 
> 标签：php, javascript, containers, grouping, nodes

虽然大多数问题都是关于基于相似性（pidgeonholes）对节点进行分组，但我想仅根据节点的接近程度对节点进行分组。

我有大量密集的节点集合——可能有数百万。在屏幕上，它们占据了一定的空间，因此可以认为它们具有大小。

我要做的是将这些节点有效地分组为单个包含节点，无论是在处理时间还是在每个容器收集更多节点方面。

我目前的尝试要么太慢，要么不起作用，但都是基于我想到的相同解决方案：通过随机获取一个节点及其周围的节点并将它们分组来计算很多可能的容器，然后选择最有效的容器。

你的想法是什么，不是特别用任何语言，但我将为此使用 PHP 或 JavaScript。

```
Edit 
```

我忘了提到节点将被流式传输，因此它需要接受无限的节点，将它们放入容器中，创建新容器甚至根据需要删除它们，最多可容纳数百万个容器。那将是最理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:25:35.017

这个问题称为聚类。您有一组节点和一个`m`计算任意两个节点之间距离的函数。您现在搜索集群，以使每个集群内所有节点之间的所有距离之和最小。

有一些简单的算法可以做到这一点。搜索[`k-Means`](https://en.wikipedia.org/wiki/K-means_algorithm)和[`k-Medoid`](https://en.wikipedia.org/wiki/K-medoids)例如。这两个与您的方法非常相似。更有效的版本是`CLARANS`算法 [NH94]。我没有为你找到任何好的资源，但你去：

（德语）关于一般聚类的脚本。在第 45 页的伪代码中包含 CLARANS [http://www.informatik.hu-berlin.de/forschung/gebiete/wbi/teaching/archive/ws1112/vl_datawarehousing/15_clustering_12.pdf](http://www.informatik.hu-berlin.de/forschung/gebiete/wbi/teaching/archive/ws1112/vl_datawarehousing/15_clustering_12.pdf)

解释 CLARANS 的英文脚本 [http://bib.dbvis.de/uploadedFiles/232.pdf](http://bib.dbvis.de/uploadedFiles/232.pdf)

关于 CLARANS 的论文 [http://www.comp.nus.edu.sg/~atung/publication/pakdd002.pdf](http://www.comp.nus.edu.sg/~atung/publication/pakdd002.pdf)

名称中的“k”是集群的数量。对于这 3 种算法，您必须先验地指定集群的数量。

对于不同的方法，请参阅[DBSCAN](https://en.wikipedia.org/wiki/DBSCAN)算法。您不需要此算法的集群数量，但您必须提供有关节点的其他一些知识。维基百科文章很好地解释了这一点。:-)

# javascript - 检测 chrome.extension.sendRequest 失败

> ID：10082478
> 
> 赞同：1
> 
> 时间：2012-04-10T02:39:07.703
> 
> 标签：javascript, google-chrome, google-chrome-extension

嘿，Chrome 开发人员，如何检测何时`chrome.extension.sendRequest`失败？我试过这个，没有骰子：

```
chrome.extension.sendRequest({ /* message stuff here */ }, function(req){
    if(req == null || chrome.extension.lastError == null){
        alert("No response. :(");
    }
}); 
```

但是发生的情况是回调甚至从未触发，这是我一半的预期。有什么方法可以检测 sendRequest 何时失败？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:06:55.207

你可以用 a 包围它`try{}catch(err){}`来捕获任何抛出的错误，但如果没有响应，则不会抛出错误，也没有空响应。

这本来是按设计完成的，以允许消息接收者做这件事。例如，它可能涉及几个 Web 服务请求，或者可能需要一段时间的 ajax 请求。

如果你知道响应需要多长时间，你应该实现一个超时（如果 sendRequest 函数包含一个就好了）

所以，你可以这样做：

```
var noResponse = setTimeout(100, function() {
  alert('No response received within 100ms!');
});

chrome.extension.sendRequest({ /* message stuff here */ }, function(req){
  clearTimeout(noResponse);
  alert('I have a response!');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:25:57.967

你需要改变......

```
if(req == null || chrome.extension.lastError == null){
    alert("No response. :(");
} 
```

...至....

```
if(req == null){
    alert("No response. :( and the error was "+chrome.extension.lastError.message);
} 
```

正如文档所说的 sendRequest `If an error occurs while connecting to the extension, the callback will be called with no arguments and chrome.extension.lastError will be set to the error message.`
[http://code.google.com/chrome/extensions/extension.html#method-sendRequest](http://code.google.com/chrome/extensions/extension.html#method-sendRequest)
[http://code.google.com/chrome/extensions/extension.html#property-lastError](http://code.google.com/chrome/extensions/extension.html#property-lastError)

# c++ - 使用指向同一类对象的指针的 C++ 类构造函数

> ID：10082485
> 
> 赞同：1
> 
> 时间：2012-04-10T02:41:23.697
> 
> 标签：c++, constructor

让类构造函数接受指向同一类对象的指针是否有意义。这个想法是将所有数据从旧对象复制到新对象。

```
class Shape {
    ...
    public:
       Shape(string,string,...)
       Shape(Shape*)
}

Shape::Shape(Shape* ref) {
    layer = ref->layer;
    purpose = ref->purpose;
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:49:06.233

不，这只会导致混乱的歧义和难以捕捉的错误（从指针到对象的自动转换，有人吗？）。如果从指针初始化使其显式：

```
Shape s2 = *s1; 
```

# javascript - Fabric.js：覆盖图像后面的图像控件

> ID：10082486
> 
> 赞同：5
> 
> 时间：2012-04-10T02:41:49.197
> 
> 标签：javascript, canvas, fabricjs

我正在使用 jquery 和 fabric.js 库构建一个画布用户界面，并使用以下代码设置一个带有透明部分的覆盖 png 图像

```
var bgImgSrc = bgImg.attr('src');
canvas.setOverlayImage(bgImgSrc, function(img){
  canvas.renderAll();
}); 
```

我还在覆盖层后面添加了一个图像，并使用以下代码调整大小以适合容器

```
var photoImg = $('#img-photo');
var photoImgSrc = photoImg.attr('src');
fabric.Image.fromURL(photoImgSrc, function(img) {
  var photoImgWidth = photoImg.width();
  var photoImgHeight = photoImg.height();
  var hRatio = 380/photoImgWidth;
  var vRatio = 300/photoImgHeight;
  var ratio = Math.min(hRatio, vRatio);
  pImg = img.set({left: 380/2, top: 300/2, angle: 0})
  img.scale(ratio).setCoords();    
  canvas.add(pImg);
  canvas.sendToBack(pImg);
  canvas.renderAll();
}); 
```

它可以按预期工作，但是，当我单击图像进行缩放/调整大小时，我看不到控件，除非通过覆盖图像的透明空间。控件位于叠加图像后面，有没有办法强制显示图像控件而不必将整个图像放在叠加层前面？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-02T12:22:05.110

只需设置布尔值`controlsAboveOverlay`：

```
canvas.controlsAboveOverlay = true; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:14:04.997

这里的问题是覆盖图像呈现在对象的控件之上。这是预期的行为。看看[这篇 wiki 文章](https://github.com/kangax/fabric.js/wiki/How-fabric-canvas-layering-works)，它显示了织物画布上各种事物的 z-index 以及它们的呈现顺序。

有计划添加对始终位于顶部的对象控件的支持，正如您[从这张票](https://github.com/kangax/fabric.js/issues/22)中看到的那样，但我无法告诉您何时会发生这种情况。

您也可以尝试使用“after:render”回调并将图像手动绘制到画布上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T16:33:39.887

```
canvas.controlsAboveOverlay = true; //did the job... but: 
```

我不想在叠加图像上方呈现控件（因为叠加对我来说意味着叠加）。我只想完全按照 Wiki 中的描述来渲染堆栈（默认情况下）。

我只是想知道...如 Wiki 渲染堆栈中所述，控件应该呈现在所有对象之上（默认情况下始终可见），但它们没有（查看`kitchensink`演示）。

恕我直言，这种行为应该由像`canvas.controlsInStack = true`.

对了……那东西真的很漂亮！

# c++ - '{' 标记之前的预期类名。C++ 继承

> ID：10082488
> 
> 赞同：6
> 
> 时间：2012-04-10T02:41:58.283
> 
> 标签：c++, inheritance

我花了好几个小时研究并试图弄清楚为什么我会收到这个错误。基本上与继承有关的三个文件是 CollegeMember.h、Employee.h 和 EmpAcademicRecord.h。员工。是从 CollegeMember.h 继承的，而 EmpAcademicRecord.h 是从 Employee.h 继承的。喜欢这个 CollegeMember <- Employee <- EmpAcademicRecord。EmpAcademicRecord.h 中出现错误。这是三个文件。

学院会员.h

```
#include <cstdlib>
#include <iostream>
#include<ctype.h>
#include<string.h>
#include "Employee.h"
#include "Student.h"
using namespace std;

// ****************************************************************************  
// Class Definitions follow
typedef char* String;

// The CollegeMember class
class CollegeMember
{
  protected:
 int ID_Number;
 string FirstName, LastName;
 string AddressLine1, AddressLine2, StateProv, Zip;
 string Telephone;
 string E_Mail;
 string answer, answer2, answer3, answer4;//used as sort of booleans for use with        validation

 // member functions
public:
 CollegeMember ( ); // constructor
 CollegeMember(const CollegeMember&); //overloaded constructor
 void Modify (CollegeMember Member);
 void InputData(int x);
 string Summary ( ); //summary
 string PrintMe(); //fully describes
}; // End of CollegeMember class declaration 
```

员工.h

```
#include <cstdlib>
#include <iostream>
#include<ctype.h>
#include<string.h>
#include "EmpAcademicRecord.h"
#include "EmpEmploymentHistory.h"
#include "EmpExtraCurricular.h"
#include "EmpPersonalInfo.h"
#include "EmpPublicationLog.h"

using namespace std;

// ****************************************************************************
// Class Definitions follow
typedef char* String;

// The Employee Class
class Employee: protected CollegeMember
{
 float Salary;
 protected:
 string Department, JobTitle;
 // Member Functions
public: 
 Employee ( );      // constructor
void Modify (Employee ThisEmp);
 void InputData(int x);
 void SetSalary (float Sal) // Specified as an in-line function
 { Salary = Sal;}
 float GetSalary ( ) {return Salary;} // Specified as an in-line function
string Summary ( ); //summary 
 string PrintMe(); //fully describes
}; // End of Employee class declaration 
```

EmpAcademicRecord.h

```
#include <iostream>
#include <cstdlib>
#include<ctype.h>
#include<string.h>

using namespace std;

typedef char* String;

class EmpAcademicRecord: protected Employee{ //error occurs on this line
      protected:
                int ReferenceNumber;
                string Institution;
                string Award;
                string start;
                string end;

                public:
                       EmpAcademicRecord();
                       void InputData (int x);
                       void Modify(EmpAcademicRecord ThisRec);
                       void Summary();

      }; 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T02:45:17.980

这种错误通常是由于您尝试使用它时未定义类型引起的。

在这种情况下，您可能在`EmpAcademicRecord.h` *没有*首先包含的情况下包含`Employee.h`了（前者顶部的包含不显示后者）。

换句话说，在编译器看到的地方：

```
class EmpAcademicRecord: protected Employee { //error occurs on this line 
```

它不知道`Employee`类是什么。

*添加以下内容可能*很简单：

```
#include "Employee.h" 
```

到该文件的顶部，由于我们没有代码文件，因此有点难以确定。无论如何，这肯定是一个很好的第一步。

由于您已`EmpAcademicRecord.h`被 包含`Employee.h`，这可能会导致无限递归。

你可以用包含守卫来解决这个问题，但我不明白*为什么*你需要那个特殊的包含。`EmpAcademicRecord`取决于`Employee`，*而不是*相反。

# ios - managedObjectContext 为零

> ID：10082491
> 
> 赞同：3
> 
> 时间：2012-04-10T02:42:20.157
> 
> 标签：ios, core-data, xcode4

我正在尝试将核心数据添加到现有项目中。我有：

1）添加核心数据框架 2）添加访问器和属性到 AppDelegate 3）创建数据模型文件

现在，当我尝试 `NSManagedObjectContext *context = [self managedObjectContext];` 从视图控制器调用时，上下文为 nil，并且 managedObjectContext 永远不会触发。

这是 AppDelegate：

```
#import "XXXAppDelegate.h"
#import <CoreData/CoreData.h>

@implementation XXXAppDelegate 

@synthesize window=_window;
@synthesize navigationController=_navigationController;
@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    // Add the navigation controller's view to the window and display.
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];

    return YES;
}

// Explicitly write Core Data accessors
- (NSManagedObjectContext *) managedObjectContext {
    if (managedObjectContext != nil) {
        return managedObjectContext;
    }
    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        managedObjectContext = [[NSManagedObjectContext alloc] init];
        [managedObjectContext setPersistentStoreCoordinator: coordinator];
    }

    return managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel {
    if (managedObjectModel != nil) {
        return managedObjectModel;
    }
    managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];

    return managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    if (persistentStoreCoordinator != nil) {
        return persistentStoreCoordinator;
    }
    NSURL *storeUrl = [NSURL fileURLWithPath: [[self applicationDocumentsDirectory]
                                               stringByAppendingPathComponent: @"<Project Name>.sqlite"]];
    NSError *error = nil;
    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc]
                                  initWithManagedObjectModel:[self managedObjectModel]];
    if(![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                 configuration:nil URL:storeUrl options:nil error:&error]) {
        /*Error for store creation should be handled in here*/
    }

    return persistentStoreCoordinator;
}

- (NSString *)applicationDocumentsDirectory {
    return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
}

@end 
```

编辑：这是我的视图控制器代码

```
NSManagedObjectContext *context = [self managedObjectContext];
NSManagedObject *cardSet = [NSEntityDescription insertNewObjectForEntityForName:@"CardSet" inManagedObjectContext:context];
[cardSet setValue:@"Set 1" forKey:@"cardSetName"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:32:38.813

假设您的属性已声明......您正在将它们合成为 ivars，前面带有下划线。这是好事。但是，您要使用下划线访问它们的*唯一位置是在属性的 getter/setter 的实现中。*不幸的是，这些都没有发生。将其更改为...

```
- (NSManagedObjectContext *) managedObjectContext {
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }
    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator: coordinator];
    }

    return _managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel {
    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }
    _managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];

    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }
    NSURL *storeUrl = [NSURL fileURLWithPath: [[self applicationDocumentsDirectory]
                                               stringByAppendingPathComponent: @"<Project Name>.sqlite"]];
    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc]
                                  initWithManagedObjectModel:[self managedObjectModel]];
    if(![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                 configuration:nil URL:storeUrl options:nil error:&error]) {
        /*Error for store creation should be handled in here*/
    }

    return _persistentStoreCoordinator;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:32:12.587

如果您查看 Xcode 中的 Master-Detail Application 模板，您会看到它们在 AppDelegate 中传递 ManagedObjectContext，如下所示：

```
#import "AppDelegate.h"

#import "MasterViewController.h"

@implementation AppDelegate

@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    MasterViewController *controller = (MasterViewController *)navigationController.topViewController;
    NSLog(@"navigationController viewControllers: %@",[navigationController viewControllers]);
    NSLog(@"navigationController.topViewController: %@",navigationController.topViewController);

    controller.managedObjectContext = self.managedObjectContext;
    return YES;
} 
```

如果您的应用程序前面需要一个 TabBarViewController，则代码如下所示：

```
#import "AppDelegate.h"

#import "MasterViewController.h"

@implementation AppDelegate

@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    UITabBarController *tabController = (UITabBarController *)self.window.rootViewController;

    UINavigationController *navigationController = (UINavigationController *)[[tabController viewControllers] objectAtIndex:0];
    MasterViewController *controller = (MasterViewController *)[[navigationController viewControllers] objectAtIndex:0];
    controller.managedObjectContext = self.managedObjectContext;

    navigationController = (UINavigationController *)[[tabController viewControllers] objectAtIndex:1];
    controller = (MasterViewController *)[[navigationController viewControllers] objectAtIndex:0];
    controller.managedObjectContext = self.managedObjectContext;

    navigationController = (UINavigationController *)[[tabController viewControllers] objectAtIndex:2];
    controller = (MasterViewController *)[[navigationController viewControllers] objectAtIndex:0];
    controller.managedObjectContext = self.managedObjectContext;

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T05:14:51.357

尝试添加这些条件以检查您`managedObjectContext`是否`nil`在任何您想使用它的地方。如果`nil`它从`Appdelegate`文件中复制它。

```
 if (managedObjectContext == nil) 
 { 
    managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
    NSLog(@"After managedObjectContext: %@",  managedObjectContext);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:35:15.970

我不知道你是如何在没有编译器错误的情况下过去的，但是你`@synthesize`的 s 使用了你的 getter 永远不会访问的下划线变量。像这样做：

```
- (NSManagedObjectContext *) managedObjectContext {
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }
    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] init];
        [_managedObjectContext setPersistentStoreCoordinator: coordinator];
    }

    return _managedObjectContext;
} 
```

注意`_managedObjectContext`（带下划线）。`managedObjectModel`使用和进行相同的修复`persistentStoreCoordinator`。

# php - 如何测试8个字段中是否只有1个等于1

> ID：10082495
> 
> 赞同：2
> 
> 时间：2012-04-10T02:42:38.063
> 
> 标签：php, mysql

我有一个 8 列的 MySQL 表，每列都是`INT(1) default 0`.

如何测试以查看 8 个字段中是否只有一个等于 1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T02:54:54.393

尝试这个：

```
where 1 = (field1 = 1) + (field2 = 1) + ... 
```

这是在 MySQL 中的每个条件都转换为`1`or的基础上工作的`0`。如果所有条件相加是`1`，那么这意味着只有一个是`1`（或`true`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:40:29.817

这会起作用：

```
SELECT field1 + field2 + field3 + field4 + field5 + field6 + field7 + field8 = 1 
       AS ONLY_ONE 
```

如果总和为 1，则返回`1`(TRUE)，如果总和大于 1（多于一组）或小于 1（未设置），则返回 0（FALSE）。

如果您没有严格模式下的表/数据库（因此可以使用 0 和 1 以外的值），您可以执行以下操作：

```
SELECT (field1 > 0) + (field2 > 0) + (field3 > 0) ... = 1 AS ONLY_ONE 
```

因为表达式将为真 (1) 并因此被添加为`1`是否为 1 或更大（设置）的值。

如果没有默认集，那么您可以进一步细化查询：

```
SELECT COALESCE(field1 > 0, 0) + COALESCE(field2 > 0, 0) + COALESCE(field3 > 0, 0) ... 
= 1 AS ONLY_ONE 
```

所以覆盖你的基地的最好方法是：

```
SELECT 
COALESCE(field1 > 0, 0) + 
COALESCE(field2 > 0, 0) + 
COALESCE(field3 > 0, 0) +
COALESCE(field4 > 0, 0) +
COALESCE(field5 > 0, 0) +
COALESCE(field6 > 0, 0) +
COALESCE(field7 > 0, 0) +
COALESCE(field8 > 0, 0) +
= 1 AS ONLY_ONE
FROM my_table; 
```

# linux - Zoom Search Engine 类似搜索引擎，但适用于 Linux/UNIX

> ID：10082500
> 
> 赞同：2
> 
> 时间：2012-04-10T02:43:42.940
> 
> 标签：linux, search, indexing, search-engine

我最近发现了[Zoom 搜索引擎](http://www.wrensoft.com/zoom/)，这让我觉得很有趣，因为它的软件可以轻松地将索引过程和搜索过程解耦。

换句话说，您在本地计算机上运行索引器，然后上传此索引以及使用它搜索它们的 PHP 文件到您的网络服务器。

所以你的网络服务器不必做索引。我有一个共享环境中的主机，最好使用尽可能少的资源，所以这对我来说很棒。此外，我家里有一台大部分未使用的小型服务器（这不是我拥有的网络服务器），我可以将其用于索引目的。

但是，它只运行 Linux 和 SSH，因此不能选择 Zoom 搜索引擎。

有没有和Zoom Search Engine一样原理（本地索引，上传索引+PHP到网站），但可用于命令行Linux环境的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:56:03.113

狮身人面像搜索服务器：[http ://sphinxsearch.com/](http://sphinxsearch.com/)

绝对满足您的所有需求，也被 Craigslist、MySQL 等一些受欢迎的商店使用。

PHP 是 Sphinx 固有的。所有接口都在 PHP 中，实际引擎是用 C++ 编写的。它的速度很快。

我自己使用 Solr/Lucene，但我为你的任务给 Sphinx +1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:35:59.370

我的建议是看看[OpenSearchServer](http://www.open-search-server.com/)。一个基于 lucene 的搜索引擎。易于设置，成熟稳定。

对于您的要求：

OpenSearchServer 支持 Linux 和 windows 平台。

SSH 足以远程运行 OpenSearchServer。

您可以在本地爬取网站并通过复制或通过 FTP 将索引（OpenSearchServer 的数据目录）更新到远程计算机。对于更大的索引复制是最佳选择。

它有一个 PHP 客户端库，因此您可以轻松地在现有或新应用程序中启用搜索。

# c++ - C++ 中的设计问题：以接口为中心的设计中的代码重用

> ID：10082504
> 
> 赞同：1
> 
> 时间：2012-04-10T02:44:27.737
> 
> 标签：c++, oop

该项目有一个目标：使用以界面为中心的设计。基本上，我们声明只有公共纯函数的类，并让真正的类继承自它们。

现在出现了一个问题——如何重用效用函数？

这是一个例子：

```
class InterF1 {
  public:
    int f1() = 0;
    int g1() = 0;   
}; 

class InterF2 {
  public:
    int f2() = 0;
}; 

class C1: public InterF1 {
  public:
    int f1();
    int g1();
};

class C2: public InterF1, InterF2 {
  public:
    int f1();
    int g1();
    int f2();
}; 
```

在实现 C1::f1() 和 C2::f1() 时，我看到这两个函数之间的代码重复。我应该如何删除重复？

以下是我的想法：

1）我可以像这样向接口类添加保护：

```
class InterF1 {
  public:
    int f1() = 0;
    int g1() = 0;   
  protected:
    int util();
    int convenient_var_calculated_by_util;
}; 
```

在上述设计中，C1::f1() 和 C2::f2() 都可以调用 util()。

2）我可以抽象一个新接口：

```
class UtilI {
    public:
      int util(int in_var) = 0;
}; 
```

在本设计中，InterF1、C1 和 C2 更改为

```
class InterF1 {
  public:
    int f1(UtilI u) = 0;
    int g1() = 0;   
}; 

class C1: public InterF1 {
  public:
    int f1(UtilI u);
    int g1();
};

class C2: public InterF1, InterF2 {
  public:
    int f1(UtilI u);
    int g1();
    int f2();
}; 
```

C1::f1() 和 C2::f1() 都调用 UtilI API。

解决方案 2 似乎更符合我们的“以界面为中心”的目标，而且看起来确实更好。但我有一个担心，InterF1 和 InterF2 本身应该是比 UtilI 更高级别的抽象，它更多的是实现细节，我是否混合了 2 个级别？换句话说，如果稍后实现更改，我将需要再次更新 f1() 和 f2() 签名，这听起来不对。

解决方案 1 看起来确实很方便，但对我来说它看起来不那么“纯粹”，我在这里是不是太教条了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:11:51.123

通常我会说你应该把通用实现放在基类中——但是你要求基类是纯虚拟的。因此，我建议：

1.  **创建中间实现类**

    如果每个想要实现的类`InterF2`也想要实现，这种方法是可以的`InterF1`。

    方法是实现

    ```
    class InterF1Impl: public InterF1 {
      public:
        int f1();
        int g1();
    } 
    ```

    then`C1`和`C2`都可以派生自`InterF1Impl`其中实现了 common`f1()`和`g1()`方法。

    但是，如果您有另一个类`C3 : public InterF2`想要共享`f2()`with`C2`但不想实现的实现，则此方法将无法很好地扩展`InterF1`。

    另一种（更好的）方法是

2.  **使用组合来包含一个实现类**。

    在这种方法中，`InterF1Impl: public InterF1`如上所述实现，但不是*派生* `C1: public InterF1Impl`，而是让`InterF1Impl`成为`C1`类的一部分。

    ```
    class C1: public InterF1 {
      private:
        InterF1Impl * f1impl;
      public:
        int f1();
        int g1();
    } 
    ```

    `C1::f1()`and`C1::g1()`方法只是从 中调用相应的方法`f1impl`。

    这样，如果你需要一个通用的实现`f2()`，那么你也可以实现`InterF2: public InterF2`，并且`C2`可以以类似的方式实现：

    ```
    class C2: public InterF1, InterF2 {
      private:
        InterF1Impl * f1impl;
        InterF2Impl * f2impl;
      public:
        int f1(); /* calls f1impl->f1() */
        int g1(); /* calls f1impl->g1() */
        int f2(); /* calls f2impl->f2() */
    } 
    ```

    And another class could just use the implementation of `InterF2` without also implementing `InterF1` if you later needed such a class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:58:34.930

你的第二个解决方案比第一个更好，但我会做不同的事情。

首先，代码重用可以通过对象之间的继承或组合关系来实现。在这种情况下，组合方法更有意义，如下所述。

您的类的用户可能不关心`util()`方法的实现，甚至不关心它的存在。因此，拥有`UtilI`接口并将其作为公共 API 的一部分似乎是不必要的。由于实用程序逻辑是您的实现的一部分，而不是接口的一部分，因此此类应仅用于 C1 和 C2 类的实现。如果你这样做，你可能不需要`UtilI`接口，并且可以只替换为具体类`Util`。您可能可以使此类无状态，因此它只有静态方法。如果不是，那么它可能是单例，或者您的类可以创建自己的实例（取决于您的需要）。

以界面为中心的设计是一个很好的目标，但重要的是你只公开应该公开的东西。这是设计任何 API 的重要部分，它应该是**完整**的和**最小的**。

# scala - scala映射/类型实例化

> ID：10082505
> 
> 赞同：1
> 
> 时间：2012-04-10T02:44:35.737
> 
> 标签：scala, generics

有人可以解释解决以下相当奇怪的类型错误的最佳方法。假设我创建了一个元组列表，如下所示：

```
scala> val ys = List((1,2), (3,4), (5,6))
ys: List[(Int, Int)] = List((1,2), (3,4), (5,6)) 
```

现在，如果我想将其映射到 List(Int)

```
scala> ys.map((a: Int, b: Int) => a + b)
<console>:9: error: type mismatch;
found   : (Int, Int) => Int
required: ((Int, Int)) => ?
   ys.map((a: Int, b: Int) => a + b)
                           ^ 
```

有什么线索吗？我知道我可以使用 for 理解

```
scala> for ((a, b) <- ys) yield a + b
res1: List[Int] = List(3, 7, 11) 
```

但是在这种情况下打破理​​解感觉是错误的。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T02:46:24.337

尝试：

```
ys.map { case (a: Int, b: Int) => a + b } 
```

或者：

```
ys.map(p: (Int, Int) => p._1 + p._2) 
```

发生的事情是`ys`a `List`of `(Int,Int)`，所以`map`期望一个函数来自一个单独的参数，它恰好是一个 tuple `(Int,Int)`，到其他东西（从技术上讲，`map`期望一个参数`Function1[(Int,Int),Int]`。该函数`(a: Int, b: Int) => a+b`实际上不是一个来自单个参数的函数`(Int, Int)`；`Int`相反，它是两个参数的函数，都是`Int`s，到`Int`(a `Function2[Int,Int,Int]`). 区别是微妙的，但很重要，因为 Scala 做出了区分：

```
val f: Function1[(Int,Int),Int] = (p: (Int,Int)) => p._1 + p._2
ys.map(f) // fine

val g: Function1[(Int,Int),Int] = { case (a: Int, b: Int) => a + b }
ys.map(g) // fine, technically a PartialFunction[(Int,Int),Int]

val h: Function2[Int,Int,Int] = (a: Int, b: Int) => a + b
ys.map(h) // ERROR! 
```

为了解释我在答案顶部的建议：在第一个示例中，我们将给定的函数的定义更改`map`为 use `case`，它告诉 Scala 将单个`(Int,Int)`参数解压缩为两部分。（还要注意使用花括号而不是括号。）在第二个示例中，我们有一个单个元组参数的函数，`p`我们手动提取元组的每个部分。

最后，请注意您也不需要类型注释。这些工作也一样：

```
ys.map { case (a,b) => a + b }

ys.map(p => p._1 + p._2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:30:34.010

尝试：

  val ys = List((1,2),(3,4),(5,6))
  ys 映射 (t => t._1 + t._2)

# jquery - 通过文本检测更改图像源

> ID：10082506
> 
> 赞同：0
> 
> 时间：2012-04-10T02:44:56.870
> 
> 标签：jquery, flickr

我目前正在开发一个显示[Flickr](http://www.flickr.com)内容的[图形覆盖应用程序。](http://flickeflu.com/explore)

我想替换已选择退出的用户的图像。

我的html结构如下：

```
<ul>
  <li>
    <div class="imgbk">
      <img src='http://farm6.static.flickr.com/5312/7057785005_2966a34f1f.jpg'/>
      <a href='http://www.flickr.com/photos/85152114@N00/7057785005'>Link</a>
    </div>
  </li>
</ul> 
```

本例中要测试的字符串`85152114@N00`位于href中。

href 结构始终相同：**flickr.com/photos/userID/ImageID**

到目前为止，这是在服务器端完成的，但是我网站上的巨大流量迫使我在客户端做。我的jQuery知识有限，所以我寻求帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:52:27.733

不完全确定您在寻找什么。但是，如果您想获取该字符串，可以执行以下操作：

```
var a = $('.imgbk a').attr('href');
var b = a.split('/');
alert(b[4]); 
```

示例：http: [//jsfiddle.net/jasongennaro/AQw9X/](http://jsfiddle.net/jasongennaro/AQw9X/)

基本上，找到 href 属性，然后将其划分为`/`，将每个部分放在一个名为 的数组中`b`。我已经提醒了结果，因此您可以看到要选择数组中的哪个项目，但是您可以从那里做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:01:32.430

如果您正在寻找一种方法来检查页面中的所有图像以查找包含该特定代码的任何项目，您可以这样做；

```
var optOutstr = "85152114@N00";

$(img).each(function() {
   if (this.href.match(new RegExp("/" + optOutStr + "/")) {
       this.href = "whatever you want to replace the URL with";
       $(this).prev().attr("src", "whatever you want to replace the image with");
   }
}); 
```

如果您有要检查的完整代码列表，那么将有更有效的方法来检查一大堆代码。

```
var optOutMap = {"85152114@N00": true, ....};

$(img).each(function() {
   var matches = this.href.match(/flickr.com\/photos\/([^\/]+)\//);
   if (matches && matches[1] in optOutMap) {
       this.href = "whatever you want to replace the URL with";
       $(this).prev().attr("src", "whatever you want to replace the image with");
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:26:41.173

谢谢大家，这是我根据您的回答编写的新代码：

```
var OptOutArray = ["85152114@N00", "00000000@N00"];

$('img').each(function() {
  var matches = $(this).next().attr("href").split('/')[4];
  if ($.inArray(matches, OptOutArray) > -1) {
    $(this).attr("src", "http://core.flickeflu.com/doh.gif");
  }
});​ 
```

这里的例子：http: [//jsfiddle.net/jgYs8/](http://jsfiddle.net/jgYs8/)

# jquery - 具有两个事件功能的按钮。如何在第一个功能期间停止第二个？

> ID：10082508
> 
> 赞同：0
> 
> 时间：2012-04-10T02:45:54.780
> 
> 标签：jquery, forms

我有一个“删除”按钮，点击确认框上的取消，它仍然提交表单。鉴于这两个事件函数适用于同一个按钮，停止表单提交的最佳方法是什么？

*属性 data-confirm 包含确认消息。*

```
$(document).on('click', "[data-confirm]", 
     (function () { return confirm($(this).attr('data-confirm')); }));
$(document).on("click", "input[type='submit'], button", buttonSubmit); 
```

这是`buttonSubmit`省略了自定义代码的函数。

```
var buttonSubmit = (function (e)
{
    e.preventDefault();
    //...
    $(this).closest('form').submit();
}); 
```

鉴于取消确认，我如何防止`buttonSubmit`代码执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:49:34.683

你正在寻找[`e.stopImmediatePropagation()`](http://api.jquery.com/Event.stopImmediatePropagation/).

# message-queue - 将设备中的数据收集到消息队列中是个好主意吗？

> ID：10082511
> 
> 赞同：3
> 
> 时间：2012-04-10T02:46:28.810
> 
> 标签：message-queue, ironmq

假设您有 1000 台设备一直在发送数据，那么消息队列会是收集这些数据的好工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:58:35.580

Obviously, it depends:

*   Do you need to process every set of data, regardless of how old it is?
*   Will data arive in a stead stream, or be bursty?
*   Can a single application process all the data, or will it need to be load balanced?
*   Do you have any need for the "messaging" features, such as topics?
*   If your devices would be the clients, is there a client implementation that works on them?

If you have a stream of data that can be processed by a single application, and you are tolerant of occasional lost data, I would keep it simple and post the data via REST or equivalent. I would only look to messaging once you needed either scalability, durability, fault tolerance, or the ability to level out load of time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:06:54.560

使用队列在设计方面不会出错，但正如 Chris（其他响应者）所说，在基础设施方面可能不值得你付出努力，因为 Web 服务器非常擅长处理合理的负载。

在“现实世界”中，我已经看到商业仪器将状态报告到队列中进行处理，因此它肯定是一个有效的解决方案。

# java - 带矩形边框的drawString

> ID：10082512
> 
> 赞同：1
> 
> 时间：2012-04-10T02:46:35.043
> 
> 标签：java, graphics

我想在字符串外使用带有矩形边框的图形来绘制字符串。

这是我已经做的：

```
 public void paint(Graphics g) {
        Graphics2D g2d = (Graphics2D) g;
        FontMetrics fontMetrics = g2d.getFontMetrics();
        String str = "aString Test";

        int width = fontMetrics.stringWidth(str);
        int height = fontMetrics.getHeight();

        int x = 100;
        int y = 100;

        // Draw String
        g2d.drawString(str, x, y);
        // Draw Rectangle Border based on the string length & width
        g2d.drawRect(x - 2, y - height + 2, width + 4, height);
    } 
```

我的问题是，**我想用新行（“\ n”）绘制字符串，外面有矩形边框**：

这是新行的代码：

```
 public void paint(Graphics g) {
        Graphics2D g2d = (Graphics2D) g;
        FontMetrics fontMetrics = g2d.getFontMetrics();
        String str = "aString\nTest";

        int width = fontMetrics.stringWidth(str);
        int height = fontMetrics.getHeight();

        int x = 100;
        int y = 100;

        // Drawing string per line
        for (String line : str.split("\n")) {
            g2d.drawString(line, x, y += g.getFontMetrics().getHeight());
        }
    } 
```

谁能帮我解决这个问题？感谢您的帮助和建议...

**最终代码**

```
 int numberOfLines = 0;

        for (String line : str.split("\n")) {
            if(numberOfLines == 0)
                g2d.drawString(line, x, y);
            else
                g2d.drawString(line, x, y += g.getFontMetrics().getHeight());
            numberOfLines++;
        }

        g2d.drawRect(x - 2, y - height * numberOfLines + 2, width + 4, height * numberOfLines); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T02:53:55.763

如果我理解正确，您的问题在于矩形的高度。

尝试记录您有多少行，例如：

```
int numberOfLines=0;

for (String line : str.split("\n")) {
    g2d.drawString(line, x , y + (numberOfLines * height));
    numberOfLines++;
}

g2d.drawRect(x - 2, y - height + 2, width + 4, height * numberOfLines); 
```

这也改变了绘制字符串的 y 值的计算方式。

这样的东西会起作用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:08:07.300

您还可以创建一个常规的 JLabel 对象，然后使用 html 设置其文本并包含一个
标签。例如`myLabel.setText("<html>aString<br>Test</html>");`，然后在 JLabel 中添加一个带有单行的边框。

# git - 工作目录的 git ls-tree 输出？

> ID：10082514
> 
> 赞同：17
> 
> 时间：2012-04-10T02:47:11.863
> 
> 标签：git, git-ls-tree

我正在寻找一种以与`ls-tree`我的工作目录相同的方式输出的方法。每当我运行`git ls-tree .`它说`fatal: Not a valid object name .`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-10T04:39:47.737

`git ls-tree`仅适用于 git refs，例如`ls-tree HEAD`或`ls-tree 1.9.1`

试试`git ls-files`。您可能需要`-s`和/或`-m`标志。

* * *

正如您所指出的，`git ls-files -s`将列出索引中的文件（即已暂存的文件）。

理论上，你可以弄乱索引，运行`git ls-files -s`，然后尝试恢复它，例如

```
git commit
git add .
git ls-files -s
git reset .
git reset --soft HEAD^ 
```

似乎是对的，并且在一个简单的测试中工作，但可以吃掉你所有的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-01-21T13:14:02.903

这类似于@mikel 的答案，但按照 OP 的要求使用`git stash create`and 。`ls-tree`还避免使用`git reset`，这对于没有经验的用户来说更有可能破坏事情。

但是，这仅适用于跟踪的文件。

```
git ls-tree `git diff --quiet && echo HEAD || git stash create ls-tree` 
```

这将留下一个[悬空提交](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt-create)，最终应由`git gc`. （实际上是[两个悬空提交](https://stackoverflow.com/a/60218432/1012586)。）当然，您可以搜索包含 的悬空提交`ls-tree`，但我还没有找到一种简单的方法来做到这一点（至少不是没有相当多的`sed`魔法`grep`- 欢迎提出建议）。

**解释**

`git ls-tree`需要一个哈希。如果树是干净的（`git diff --quiet`返回`0`），可以使用`HEAD`。如果不是，`git stash create`将创建一个提交并返回它的哈希值。

**未追踪**

不幸`git stash create`的是不支持`-a`/`-u`或其他标志。因此不可能显示未跟踪文件的哈希值。获取他们的信息有点复杂：

```
git stash -a
git ls-tree stash
git ls-tree stash^3
git stash pop 
```

这将首先显示跟踪的文件 ( `git ls-tree stash`)，然后是未跟踪的文件 ( `git ls-tree stash^3`)。 [torek 很好地解释](https://stackoverflow.com/a/60218432/1012586)了为什么`stash^3`需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-13T13:48:03.410

试图找到一些不涉及 git repo 的东西。

这不仅仅是 git，它依赖于像 'grep' 这样的 linux

```
#from root of repo dir
git ls-tree -r HEAD 
#other dirs
git ls-tree -r HEAD | grep <relative_path_to_repo_root>/
# eg
git ls-tree -r HEAD | grep src/ 
```

还发现以下（仅限 git）在 repo root 的子目录中工作

```
git ls-tree -r --full-name HEAD 
```

然而手册页（man git-ls-tree）是刺激 git 逻辑

```
 --full-name
       Instead of showing the path names relative to the current working directory, show the full path names.

   --full-tree
       Do not limit the listing to the current working directory. Implies --full-name. 
```

# shell - C Shell 脚本打印带冒号的路径名

> ID：10082516
> 
> 赞同：0
> 
> 时间：2012-04-10T02:47:36.983
> 
> 标签：shell

我正在尝试打印位于文件 .chsrc 中的路径，该文件只需回显 $path 即可轻松打印，但我需要在列出的每个路径的末尾添加一些内容。IE：

/opt/local/bin: /usr/ucb: /usr/bin:

我无法编辑或更改 .chsrc 文件。我也试图在 C Shell 中找到一些关于连接的东西，但从我读到的内容来看，这似乎在 C Shell 中并不真正“存在”。无论如何，如果我听起来很自大，我很抱歉，我是 C Shell 的新手。如果有人有任何指示，建议总是很棒的！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:42:18.037

```
echo "$PATH" | sed 's/:/: /g;s/ *$//' 
```

' `s/`'=substitute, ' `/:/: /`'=targetPattern/replacementPattern, ' `g`'=全局替换（在当前行）, ' `;`'= 命令分隔符, ' `s/ *$//`'= 替换行尾的任何尾随空格 ' `$`', replacementPattern =' `//`'=(什么都没有，空的，nada，zilch;-)

最好始终回显由 dbl-quotes 包围的任何 env var，除非您希望变量中的任何空格导致命令行评估中的分词。特别是对于 PATH，因为空格字符在路径中是合法的。

一般来说，连接在 CSH 中的工作方式是这样的

```
set var1 = text1
set var2 = myText

echo "someText "$var1     "  more stuff"$var2
# -----------^^^^^^^^^^^^^^^^--- deliberate, copy paste as is 
```

我没有 csh 来打印输出，但是剪切并粘贴这些行，您会看到 之外的空格`" .... "`，减少到 1 个空格，内部的空格`"...."`保持原位，任意数量，以及变量，在“文本字符串”旁边碰到了不会自动插入空格字符，你必须把它们放进去。

我在这个问题上没有看到任何傲慢;-)

但是...在您使用 2nd rate shell (;-() 度过 8 年多的生命之前，请阅读[A great Unix Primer](http://www.grymoire.com/Unix/)中的所有内容，尤其是[为什么 csh 不是完美的脚本语言](http://www.grymoire.com/Unix/CshTop10.txt);-)

PS 欢迎使用 StackOverflow (SO) 请记住阅读常见问题解答，[http](http://tinyurl.com/2vycnvr) ://tinyurl.com/2vycnvr ，使用灰色三角形为好的 Q/A 投票， http: [//i.imgur.com/kygEP.png](http://i.imgur.com/kygEP.png)，并接受一个最能解决您的问题的答案，如果有的话，请按下复选标记， http: [//i.imgur.com/uqJeW.png](http://i.imgur.com/uqJeW.png)

# performance - 在Linux中测量C程序缓存命中/未命中和cpu时间的最简单工具？

> ID：10082517
> 
> 赞同：62
> 
> 时间：2012-04-10T02:47:56.353
> 
> 标签：performance, cpu-cache, measurement, context-switch, memcache-stats

我正在用 C 编写一个小程序，我想测量它的性能。

我想看看它在处理器中运行了多少时间，以及它有多少缓存命中+未命中。关于上下文切换和内存使用的信息也很高兴。

该程序的执行时间不到一秒钟。

我喜欢/proc/[pid]/stat的信息，但是程序死/被杀后不知道怎么看。

有任何想法吗？

**编辑：**我认为 Valgrind 增加了很多开销。这就是为什么我想要一个简单的工具，比如 /proc/[pid]/stat，它总是在那里。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-04-11T21:33:32.490

使用**性能**：

```
perf stat ./yourapp 
```

有关详细信息，请参阅[内核 wiki 性能教程](https://perf.wiki.kernel.org/index.php/Tutorial)。这使用了 CPU 的硬件性能计数器，因此开销非常小。

来自维基的示例：

```
perf stat -B dd if=/dev/zero of=/dev/null count=1000000

Performance counter stats for 'dd if=/dev/zero of=/dev/null count=1000000':

        5,099 cache-misses             #      0.005 M/sec (scaled from 66.58%)
      235,384 cache-references         #      0.246 M/sec (scaled from 66.56%)
    9,281,660 branch-misses            #      3.858 %     (scaled from 33.50%)
  240,609,766 branches                 #    251.559 M/sec (scaled from 33.66%)
1,403,561,257 instructions             #      0.679 IPC   (scaled from 50.23%)
2,066,201,729 cycles                   #   2160.227 M/sec (scaled from 66.67%)
          217 page-faults              #      0.000 M/sec
            3 CPU-migrations           #      0.000 M/sec
           83 context-switches         #      0.000 M/sec
   956.474238 task-clock-msecs         #      0.999 CPUs

   0.957617512  seconds time elapsed 
```

无需手动加载内核模块，在现代 debian 系统（带有 linux-base 包）上它应该可以工作。使用`perf record -a`/`perf report`组合，您还可以进行全系统分析。任何具有调试符号的应用程序或库都将在报告中显示详细信息。

对于可视化[火焰图](http://www.brendangregg.com/flamegraphs.html)似乎运作良好。（2020 年更新：[热点](https://github.com/KDAB/hotspot)UI 集成了火焰图。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-10T02:51:19.313

最适合您的工具称为**valgrind**。它能够进行内存分析、调用图构建等等。

```
sudo apt get install valgrind
valgrind ./yourapp 
```

但是，要获取程序执行的时间，您可以使用`time(8)`linux 实用程序。

```
time ./yourapp 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-22T13:36:34.727

你也可以使用

```
/usr/bin/time -v YourProgram.exe 
```

它将向您显示所有这些信息：

```
/usr/bin/time -v ls
    Command being timed: "ls"
    User time (seconds): 0.00
    System time (seconds): 0.00
    Percent of CPU this job got: 60%
    Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.00
    Average shared text size (kbytes): 0
    Average unshared data size (kbytes): 0
    Average stack size (kbytes): 0
    Average total size (kbytes): 0
    Maximum resident set size (kbytes): 4080
    Average resident set size (kbytes): 0
    Major (requiring I/O) page faults: 0
    Minor (reclaiming a frame) page faults: 314
    Voluntary context switches: 1
    Involuntary context switches: 1
    Swaps: 0
    File system inputs: 0
    File system outputs: 0
    Socket messages sent: 0
    Socket messages received: 0
    Signals delivered: 0
    Page size (bytes): 4096
    Exit status: 0 
```

您还可以使用 -f 标志来格式化输出以满足您的需要。

请务必使用它的完整路径调用这个程序，否则它将调用“时间”命令，这不是你需要的......

希望这可以帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-18T18:59:36.880

**Linux`perf_event_open`系统调用与`config = PERF_COUNT_HW_INSTRUCTIONS`**

`perf`可能是 OP 想要的，如[https://stackoverflow.com/a/10114325/895245](https://stackoverflow.com/a/10114325/895245)所示，但为了完整起见，如果您控制源代码，我将展示如何从 C 程序内部执行此操作。

这种方法可以更精确地测量程序中特定的感兴趣区域。它还可以获得每个不同缓存级别的单独缓存命中/未命中计数。此系统调用可能与`perf`.

[此示例与快速计算 C 程序中执行的指令数的方法](https://stackoverflow.com/questions/13313510/quick-way-to-count-number-of-instructions-executed-in-a-c-program/64863392#64863392)基本相同，但使用`PERF_TYPE_HW_CACHE`. 通过做：

```
man perf_event_open 
```

你可以看到，在这个例子中，我们只计算：

*   L1 数据缓存 ( `PERF_COUNT_HW_CACHE_L1D`)
*   读取 ( `PERF_COUNT_HW_CACHE_OP_READ`)，而不是写入预取
*   未命中 ( `PERF_COUNT_HW_CACHE_RESULT_MISS`)，未命中

perf_event_open.c

```
#define _GNU_SOURCE
#include <asm/unistd.h>
#include <linux/perf_event.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/ioctl.h>
#include <sys/types.h>
#include <sys/syscall.h>
#include <unistd.h>

#include <inttypes.h>

static long
perf_event_open(struct perf_event_attr *hw_event, pid_t pid,
                int cpu, int group_fd, unsigned long flags)
{
    int ret;

    ret = syscall(__NR_perf_event_open, hw_event, pid, cpu,
                    group_fd, flags);
    return ret;
}

int
main(int argc, char **argv)
{
    struct perf_event_attr pe;
    long long count;
    int fd;
    char *chars, c;

    uint64_t n;
    if (argc > 1) {
        n = strtoll(argv[1], NULL, 0);
    } else {
        n = 10000;
    }

    chars = malloc(n * sizeof(char));

    memset(&pe, 0, sizeof(struct perf_event_attr));
    pe.type = PERF_TYPE_HW_CACHE;
    pe.size = sizeof(struct perf_event_attr);
    pe.config = PERF_COUNT_HW_CACHE_L1D |
                PERF_COUNT_HW_CACHE_OP_READ << 8 |
                PERF_COUNT_HW_CACHE_RESULT_MISS << 16;
    pe.disabled = 1;
    pe.exclude_kernel = 1;
    // Don't count hypervisor events.
    pe.exclude_hv = 1;

    fd = perf_event_open(&pe, 0, -1, -1, 0);
    if (fd == -1) {
        fprintf(stderr, "Error opening leader %llx\n", pe.config);
        exit(EXIT_FAILURE);
    }

    /* Write the memory to ensure misses later. */
    for (size_t i = 0; i < n; i++) {
        chars[i] = 1;
    }

    ioctl(fd, PERF_EVENT_IOC_RESET, 0);
    ioctl(fd, PERF_EVENT_IOC_ENABLE, 0);

    /* Read from memory. */
    for (size_t i = 0; i < n; i++) {
        c = chars[i];
    }

    ioctl(fd, PERF_EVENT_IOC_DISABLE, 0);
    read(fd, &count, sizeof(long long));

    printf("%lld\n", count);

    close(fd);
    free(chars);
} 
```

有了这个，我得到的结果线性增加，如：

```
./main.out 100000
# 1565
./main.out 1000000
# 15632
./main.out 10000000
# 156641 
```

由此我们可以估计缓存行大小：100000/1565 ~ 63.9，[根据`getconf LEVEL1_DCACHE_LINESIZE`](https://superuser.com/questions/55776/how-to-find-the-l2-cache-size-in-linux)我的计算机，它几乎完全匹配 64 的确切值，所以我猜它正在工作。

# python - 如何在 Mako 模板中使用 Py3k 样式的字符串格式？

> ID：10082518
> 
> 赞同：3
> 
> 时间：2012-04-10T02:48:01.673
> 
> 标签：python, python-3.x, pyramid, mako

我正在使用 Mako 模板进行 Pyramid 项目，并且正在尝试显示一些浮点数。这些数字在我的代码中表示为浮点数，但我想将它们截断到小数点后 2 位以显示给用户。众所周知，这`round()`不是截断浮点数的好方法。由于我只想截断它们以进行显示，因此我倾向于只使用字符串格式而不是使用`Decimal`模块的长度。

我在[这里找到了一个较旧的问题，](https://stackoverflow.com/questions/1029965/formatting-with-mako)该问题显示了如何在 Mako 模板中使用 Python 2.x 字符串格式 - 但我如何才能使用 Python 3.x 字符串格式呢？

```
>>>> "We display two significant digits: {0:.2f}".format(34.567645765)
'We display two significant digits: 34.57' 
```

这可能在文档中和/或可以通过实验发现，但我也想用适用于 Python 3.x 的答案替换旧答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T02:52:33.290

完全一样的方式：

```
>>> from mako.template import Template
>>> Template("We display two significant digits: ${'{0:.2f}'.format(34.567645765)}").render()
'We display two significant digits: 34.57' 
```

# javascript - .Net MVC 3 添加 Javascript

> ID：10082522
> 
> 赞同：0
> 
> 时间：2012-04-10T02:48:23.977
> 
> 标签：javascript, asp.net-mvc-3, c#-4.0

我相信这个问题有一个非常简单的答案，我认为只是遇到了麻烦。我有animation.js 文件。它还有一个包含dependency_1.js 和dependency_2.js 的包含文件夹。在我的animation.js 文件中，我确实加载了相对于我的animation.js 文件的dependency_1.js 和dependency_2.js。

在我的 _Layout.cshtml 文件中，我确实有：

```
@RenderSection("JavaScript", required: false) 
```

我确实在我的视图中放置了 SomeView.cshtml

```
@section JavaScript
{
  <script type="text/javascript" src="@Url.Content("~/Scripts/animation.js")"</script> } 
```

但是当我的 animate.js 文件调用dependency_1.js 文件时，我得到一个 404 Not Found - [http://localhost:14611/includes/dependency_1.js](http://localhost:14611/includes/dependency_1.js) ”

我猜这与我的 MVC 项目中 Scripts 文件夹的 url 路由有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:51:30.750

Javascript 文件中的相对路径是相对于 HTML 页面的，而不是源 Javascript。
您需要使用绝对路径。

# java - Java：JITC 的反射膨胀是什么？

> ID：10082523
> 
> 赞同：17
> 
> 时间：2012-04-10T02:48:51.777
> 
> 标签：java, reflection, jit

我最近遇到了这个有趣的术语，并在网上搜索以了解更多信息。然而，我发现的信息是粗略的。有人可以请。给我一个详细的解释这是什么以及为什么有用？

从我发现的信息来看，这种机制似乎使反射方法的执行速度更快，但代价是创建了大量动态类并占用了 perm gen 内存区域，但我不确定。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-10T14:13:19.440

自己是否进行了一些源代码挖掘和编码来解决这个问题，这就是我发现的：

Java的'Method'类有一个'MethodAccessor'类型的成员变量'methodAccessor'，它是一个带有方法'invoke'的接口，类似于Method的invoke。方法的调用委托给 methodAccessor 的调用。

如果启用了通货膨胀（noInflation 为假），则此访问器指向使用 JNI 来运行此 Java 方法的实现（我认为使用 API，例如 GetObjectClass、GetMethodID 和 Call*Method）。这就像决斗调度，由于这个和其他原因，使用 JNI 执行很慢。（[是什么让 JNI 调用缓慢？](https://stackoverflow.com/questions/7699020/what-makes-jni-calls-slow)）

在通过反射（'15' 是默认值并且可以更改）和 noInflation false 执行 15 次方法后，基于 JNI 的访问器会动态创建一个类（名称是动态生成的，例如说'GeneratedMethodAccessor1'），它也有调用方法。现在，在这个 'invoke' 方法中，它将第一个 'obj' 参数转换为其对应的类，然后调用它的目标方法。然后它创建这个类的一个实例，并更改 methodAccessor 设置，以便以后每次执行该方法都委托给这个实例而不是 JNI 访问器。这被称为通货膨胀。

因为此实例是委托给 Java 对象的 Java 类，所以该委托从此成为普通的 Java 委托。它从不使用 JNI，因此节省了开销，而且 JITC 可以对其执行其他优化，因此它变得高效。

不利的一面是，如果很多方法都以这种方式膨胀，它们的类会占用 permgen 空间，并可能导致内存不足的错误。

有关详细信息，请参阅：

[http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/sun/reflect/ReflectionFactory.java](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/sun/reflect/ReflectionFactory.java)

[http://java.sun.com/docs/books/jni/html/fldmeth.html](http://java.sun.com/docs/books/jni/html/fldmeth.html)

[http://anshuiitk.blogspot.com/2010/11/excessive-full-garbage-collection.html](http://anshuiitk.blogspot.com/2010/11/excessive-full-garbage-collection.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-26T09:55:57.513

[Java Inflation](https://blogs.oracle.com/buck/entry/inflation_system_properties)是对通过[Java Reflection API](https://docs.oracle.com/javase/tutorial/reflect/)进行的方法调用的优化。[它将不频繁](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/reflect/ReflectionFactory.java#ReflectionFactory.0inflationThreshold)的方法调用委托给廉价、立即可用但速度较慢的[Java Native Interface](https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#calling_instance_methods)，并将[频繁](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/reflect/ReflectionFactory.java#ReflectionFactory.0inflationThreshold)的方法调用委托给快速但昂贵的运行时[生成的方法访问器](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b27/sun/reflect/MethodAccessorGenerator.java#MethodAccessorGenerator.generateMethod%28java.lang.Class%2Cjava.lang.String%2Cjava.lang.Class[]%2Cjava.lang.Class%2Cjava.lang.Class[]%2Cint%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T02:55:39.090

虽然不确定但在某处读到这个通货膨胀意味着对于反射方法/构造函数的前几次运行（默认 15 次）（从现在开始，对方法的任何引用也适用于构造函数），它通过 JNI 这样做；下一次之后，它会即时组装一个类文件并加载它。此时，应用完全 JITting，进一步调用该反射方法与直接调用该方法具有相同的性能

# asp.net - 文本框 + 按钮实际上是如何在 asp.net 中进行搜索的？

> ID：10082525
> 
> 赞同：-1
> 
> 时间：2012-04-10T02:49:06.840
> 
> 标签：asp.net, button, textbox

我只是好奇文本框 + 按钮搜索实际上是如何执行搜索以填充我的网格视图的，因为我看不到任何导致数据绑定或任何东西的地方。是回邮的事情吗？它是如何工作的？！哦

```
<asp:TextBox ID="SearchBox" runat="server"></asp:TextBox>
<input id="Submit1" type="submit" value="Search" /> 
```

谢谢大家:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:04:53.150

在名为“searchbox”的文本框和 asp.net 中的“提交”按钮之间没有魔法绑定。这项工作必须在某个地方完成，而且它可能只是隐藏在项目的某些部分中，而您无法轻易找到。

在这种情况下，似乎发生了正常的回发，并且后面代码中的一些逻辑正在询问“SearchBox”的 .Text 属性。

只需在 SearchBox.Text 上进行项目范围的搜索，您应该能够找到逻辑所在的位置。

# camera - 6DOF 中的四元数相机表示 - 抵御固有滚动

> ID：10082526
> 
> 赞同：1
> 
> 时间：2012-04-10T02:49:07.423
> 
> 标签：camera, quaternions

关于 SO 的第一个问题，尽管我已经通过 Google 来过这里很多次。我已经阅读了很多关于使用四元数表示旋转以及寻找有类似问题的人的主题。我还没有找到一个好的解决方案，或者我能理解的解决方案。所以我尝试提出一个足够清晰的问题来产生可靠的答案。

我目前正在使用四元数（特别是 Qt 4.7 四元数/C++）来表示我的相机的方向。在程序的每个步骤中，我都会检查鼠标移动并执行 fromAxisAndAngle(xaxis, x_mouse_movement) 和 fromAxisAndAngle(yaxis, y_mouse_movement)。我将这两个四元数相乘（yaxis * xaxis）。对于初始化，我有一个单位四元数 (w,x,y,z -> 1,0,0,0) 来相乘。我不断累积这些 fromAxisAndAngle 乘法与当前方向的旋转。这会产生一个滚动，称为李群问题（我认为），如果你连续应用俯仰和偏航，你可以产生一个纯滚动，这就是我在当前实现中所拥有的（这对于我的程序来说是正确的我可以告诉）。

我已经实现了另一种方法，其中俯仰、偏航、滚动增加，并且每次从这些值从头开始从 AxisAndAngle 构建四元数。这会产生一个正确的 FPS 风格的相机，但它会受到万向节锁定的影响。我的目标是保持纯四元数表示，同时消除（或补偿）仅由俯仰和偏航产生的滚动效果，这样我就可以将这款通用 6DOF 相机用作 FPS 相机或太空船式相机。我正在寻找更正此卷的建议（特定例程），或者可以满足我需要的替代表示。对不起，文字墙，但我想非常清楚。感谢您的时间和愉快的黑客攻击！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:48:50.527

目前尚不清楚您要完成什么。考虑：

1.  从规范方向开始（+x 是正确的，+y 是向上的，-z 是向前的）
2.  俯仰 90°。（-z 向上，-y 向前）
3.  向右偏航 90°。（+y 是正确的，+x 是向前的）
4.  俯仰 90°。（-x 向上，-z 向前）
5.  您现在再次面向规范前方，但向左滚动了 90°。

你想要发生什么？如果您始终将俯仰和偏航定义为相对于相机/身体参考系，这是正常行为。相反，如果您希望“偏航”始终围绕世界的 y 轴旋转，而“俯仰”始终围绕相机/身体的 x 轴旋转（以便相机的 x 轴始终平行于地平面），然后，如果您向下倾斜 90°，偏航运动在视觉上看起来像是滚动（您正在向下看并转了一圈）。保持该属性的四元数的“z”分量始终为零。您可以简单地对您的四元数强制执行该约束（确保始终重新规范化）。

但是，您单独跟踪俯仰和偏航的方法应该适用于这种情况。如果您一开始只使用两个轴，万向节锁就不是问题。你只需要确保你应用了俯仰然后偏航。

# android - 在 Android 应用中获取刷新的 Facebook 令牌的代码是什么？

> ID：10082531
> 
> 赞同：8
> 
> 时间：2012-04-10T02:49:59.257
> 
> 标签：android, facebook, facebook-android-sdk, facebook-access-token

我正在开发一个 Android 应用程序。随着 Facebook 的离线访问权限即将被弃用，我正在尝试使用 Graph API 来扩展 Facebook 令牌。

```
 https://graph.facebook.com/oauth/access_token?             
        client_id=APP_ID&
        client_secret=APP_SECRET&
        grant_type=fb_exchange_token&
        fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

谁能提供详细的代码来演示如何将上面的代码实现到android应用程序中并获取刷新的Facebook令牌？

感谢您的时间。

**更新二：**

进步（我认为）！

将完整 URL 与 facebook 请求方法一起使用会导致将基本 URL 添加到 URL 的开头所以而不是

```
String refreshUrl = "https://graph.facebook.com/oauth/access_token?client_id=12345678910&client_secret=abcdefghijklmnopqrstuvwxyz&grant_type=fb_exchange_token&fb_exchange_token="+currentAccessToken; 
```

应该使用

```
String refreshUrl = "oauth/access_token?client_id=12345678910&client_secret=abcdefghijklmnopqrstuvwxyz&grant_type=fb_exchange_token&fb_exchange_token="+currentAccessToken; 
```

但是我现在收到响应 {"error":{"message":"Error validating application. Invalid application ID.","type":"OAuthException","code":190}}

**更新一：**

这是我尝试过的。代码完成，即调用侦听器上的 OnComplete，但响应不包含新的访问令牌或到期值。

```
 void refreshWithGraph() {
        AsyncFacebookRunner extendingAsyncRunner = new AsyncFacebookRunner(facebook);
        Bundle parameters = new Bundle();

        //the variable currentAccessToken is obtained after authorisation is complete using currentAccessToken = facebook.getAccessToken();

        String refreshUrl = "https://graph.facebook.com/oauth/access_token?client_id=12345678910&client_secret=abcdefghijklmnopqrstuvwxyz&grant_type=fb_exchange_token&fb_exchange_token="+currentAccessToken;

    extendingAsyncRunner.request(refreshUrl, parameters, new RefreshListener(), null );
   } 
```

这是我的 RefreshListener 版本...

```
 //REFRESH LISTENER
    public class RefreshListener extends BaseRequestListener {

        public void onComplete(final String response, Object state) {

            try {
               final JSONObject json = Util.parseJson(response);

                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {             
                        tvRefreshResponse.setText("IN REFRESH LISTENER ONCOMPLETE\nResponse is " + response);
                        tvRefreshToken.setText("IN REFRESH LISTENER ONCOMPLETE\nToken is " + facebook.getAccessToken());
                        tvRefreshExpiry.setText("IN REFRESH LISTENER ONCOMPLETE\nFacebook expiry is " + millisecToDate(facebook.getAccessExpires()));

                    }

                }); //end runOnUiThread

            } catch (JSONException e) {
                runOnUiThread(new Runnable() {

                            @Override
                            public void run() {
                                tvRefreshResponse.setText("IN REFRESH LISTENER ONCOMPLETE CAUGHT JSON EXCEPTION \nResponse is " + response);

                            }

                         }); //end runOnUiThread

            } catch (FacebookError fe) {
                runOnUiThread(new Runnable() {

                            @Override
                            public void run() {
                                tvRefreshResponse.setText("IN REFRESH LISTENER ONCOMPLETE CAUGHT FACEBOOK ERROR \nResponse is " + response);

                            }

                         }); //end runOnUiThread
            } //end catch Facebook error

        }  //end onComplete

        @Override
        public void onIOException(IOException e, Object state) {
            tvRefreshResponse.setText("IN REFRESH LISTENER IOEXCEPTION \nException is "+ e.getLocalizedMessage());

        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e, Object state) {
            tvRefreshResponse.setText("IN REFRESH LISTENER FILE NOT FOUND EXCEPTION \nException is "+ e.getLocalizedMessage());
        }

        @Override
        public void onMalformedURLException(MalformedURLException e, Object state) {
            tvRefreshResponse.setText("IN REFRESH MALFORMED URL \nException is "+ e.getLocalizedMessage());

        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {
            tvRefreshResponse.setText("IN REFRESH ONFACEBOOK ERROR \nException is "+ e.getLocalizedMessage());

        }
    } //end RefreshListener 
```

代码完成，即调用侦听器上的 OnComplete，但响应不包含新的访问令牌或到期值。回应是...

```
 {"id":"https:\/\/graph.facebook.com\/oauth\/access_token","shares":78,"comments":1} 
```

当我将相同的 URL（带有字母数字当前令牌值）放入 Web 浏览器时，响应确实包含访问令牌。

* * *

**相关信息**

Facebook 的 offline_access 权限将于 2012 年 5 月 1 日弃用

请不要建议在 onResume() 中使用 extendAccessTokenIfNeeded 函数。[我也遇到了麻烦](https://stackoverflow.com/questions/10073426/is-it-possible-to-extend-facebook-tokens-with-extendaccesstokenifneeded-in-an-an)，这就是我正在研究 Graph API 令牌刷新的原因:-)

***相关堆栈溢出问题***

[是否可以在 Android 应用程序中使用 extendAccessTokenIfNeeded 扩展 Facebook 令牌？](https://stackoverflow.com/questions/10073426/is-it-possible-to-extend-facebook-tokens-with-extendaccesstokenifneeded-in-an-an)（我的问题）

[在 5 月 1 日后弃用后，offline_access 将如何工作？](https://stackoverflow.com/questions/9930311/how-would-offline-access-work-after-deprecation-after-may-1st)

[Facebook 访问令牌无法扩展](https://stackoverflow.com/questions/9190276/facebook-access-token-can-not-be-extended)

[保护用于 extendAccessToken 使用的应用程序机密 (Java/Android)](https://stackoverflow.com/questions/9549689/protecting-app-secret-for-extendaccesstoken-usage-java-android)

***相关 Facebook 链接***

[Facebook 安卓教程](http://developers.facebook.com/docs/mobile/android/build/)

[Facebook offline_access 权限弃用](http://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T21:15:04.330

老实说，我有点困惑——看起来你有一切可以完成它——而且很简单。但让我试着回答你的问题。这是我的 C# 项目中的代码，如果您不熟悉 C# 语言和类，我会在其中使用我的注释扩展应用程序的标记：

```
string currentToken = "token from somewhere";

// WebClient is used to send GET request to the given URL
// and receive the response
using (var req = new System.Net.WebClient())
{
    // create URL string and fill it in with data (app Id, secret, and current token)
    var extendTokenUrl = string.Format(
        "https://graph.facebook.com/oauth/access_token?client_id={0}&client_secret={1}&grant_type=fb_exchange_token&fb_exchange_token={2}",
        FB_APP_ID,
        FB_APP_SECRET,
        currentToken);

    // send GET request and download the response
    var response = req.DownloadString(extendTokenUrl);

    // if all is good, response will be a string which looks like this:
    // access_token=<<THE TOKEN GOES HERE>>
    var newToken = response.Substring("access_token=".Length);

    // now save newToken in your DB INSTEAD of currentToken - 
    // so all calls will be made with extended token
    SaveTokenInDB(newToken);
} 
```

希望对您有所帮助，并且将其翻译成 Java 应该很简单。

# android - 如何通过android中的蓝牙连接并向多个设备发送消息？

> ID：10082535
> 
> 赞同：3
> 
> 时间：2012-04-10T02:50:46.187
> 
> 标签：android, bluetooth, connection, mobile-devices

我想开发一个通过蓝牙向多个设备发送消息的应用程序。我知道蓝牙是点对点通信，即使我想按照以下步骤连接并发送消息：

1.获取配对设备列表

2.从配对列表中选择一个设备

3.连接到配对设备，向选定的配对设备发送消息

4.断开与设备的连接

5.Get连接到另一台设备等等（一个接一个）。

我正在获取配对设备地址列表，如下所示：

```
 mBtAdapter = BluetoothAdapter.getDefaultAdapter();

      Set<BluetoothDevice> pairedDevices = mBtAdapter.getBondedDevices();

    if (pairedDevices.size() > 0) {
     for (BluetoothDevice device : pairedDevices) {

        pairedList.add(device.getAddress());

        }

     Log.v("11111111", "11111111111"+dev);
    } 
```

我正在尝试连接到他们并在用户单击按钮时发送消息，如下所示：

```
 ((Button)findViewById(R.id.button1)).setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        String message = "Haiii";

        for(int i=0;i<dev.size();i++){
            Log.v("device", "111111  :  "+pairedList.get(i));
        mbService.connect(mBtAdapter.getRemoteDevice(pairedList.get(i)));

                    mbService.write(message.getBytes());

                    mbService.stop();
        }

    }
}); 
```

从上面的代码中，我在循环pairedList.get（0）时获得连接。但是消息没有发送到另一个设备。在另一个设备中安装了api示例应用程序。

如果我使用pairedList.get(i) 它不会连接到任何设备，甚至是单个设备。

请帮我 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:29:39.163

尝试为每个连接创建单独的线程 - 我有一个类似的问题，为每个连接创建一个新线程很好地解决了它。顺便说一句，我什至创建了一个新线程来建立连接——因此建立连接不会阻塞 UI。从 BT 示例代码中得到这个...

创建一个新线程建立连接：

```
 mConnectBluetoothThread = new ConnectBluetoothThread(device);
    mConnectBluetoothThread.start(); 
```

其中 ConnectBluetoothThread 的定义如下：

```
public ConnectBluetoothThread(BluetoothDevice device) {
        if (DEBUG)
        Log.i(this.getClass().getSimpleName(),
            this.getClass().getName()
                + " ->"
                + Thread.currentThread().getStackTrace()[2]
                    .getMethodName());

        mmDevice = device;
        BluetoothSocket tmp = null;

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice
        try {
        tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) {
        Log.e(this.getClass().getSimpleName(), "create() failed", e);
        }
        mmSocket = tmp;
    }

    public void run() {
        if (DEBUG)
        Log.i(this.getClass().getSimpleName(),
            this.getClass().getName()
                + " ->"
                + Thread.currentThread().getStackTrace()[2]
                    .getMethodName());
        // TODO
        setName("ConnectThread");

        // Always cancel discovery because it will slow down a connection
        mBluetoothAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
        // This is a blocking call and will only return on a
        // successful connection or an exception
        mmSocket.connect();
        } catch (IOException e) {

        connectionFailed();

        // Close the socket
        try {
            mmSocket.close();
        } catch (IOException e2) {
            Log.e(this.getClass().getSimpleName(),
                "unable to close() socket during connection failure",
                e2);
        }

        return;
        }

        // Reset the ConnectThread because we're done
        synchronized (InterBT.this) {
        mConnectBluetoothThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice);
    }

    public void cancel() {
        try {
        mmSocket.close();
        } catch (IOException e) {
        Log.e(this.getClass().getSimpleName(),
            "close() of connect socket failed", e);
        }
    }
    }

    public synchronized void connected(BluetoothSocket socket,
        BluetoothDevice device) {
    if (DEBUG)
        Log.d(this.getClass().getSimpleName(), "connected");

    // Cancel the thread that completed the connection
    if (mConnectBluetoothThread != null) {
        mConnectBluetoothThread.cancel();
        mConnectBluetoothThread = null;
    }

    // Cancel any thread currently running a connection
    if (mConnectedBluetoothThread != null) {
        mConnectedBluetoothThread.cancel();
        mConnectedBluetoothThread = null;
    }

    // Cancel the accept thread because we only want to connect to one
    // device
    // if (mAcceptThread != null) {mAcceptThread.cancel(); mAcceptThread =
    // null;}

    // Start the thread to manage the connection and perform transmissions
    mConnectedBluetoothThread = new ConnectionThreadBT(socket);
    mConnectedBluetoothThread.start();

    setState(STATE_CONNECTED);

    } 
```

并创建一个新类`ConnectionThreadBT`来处理读写连接：

```
public class ConnectionThreadBT extends ConnectionThreadBase {
    private static final boolean DEBUG = true;

    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;
    byte[] responseBuffer = new byte[4096 * 4]; 
    int responseBufferLen = 0;

    public ConnectionThreadBT(BluetoothSocket socket) {
    if (DEBUG)
        Log.i(this.getClass().getSimpleName(),
            this.getClass().getName()
                + " ->"
                + Thread.currentThread().getStackTrace()[2]
                    .getMethodName());

    mmSocket = socket;
    InputStream tmpIn = null;
    OutputStream tmpOut = null;

    // Get the BluetoothSocket input and output streams
    try {
        tmpIn = socket.getInputStream();
        tmpOut = socket.getOutputStream();
    } catch (IOException e) {
        Log.e(this.getClass().getSimpleName(), "temp sockets not created",
            e);
    }

    mmInStream = tmpIn;
    mmOutStream = tmpOut;
   }

    public void run() {
    if (DEBUG)
        Log.i(this.getClass().getSimpleName(),
            this.getClass().getName()
                + " ->"
                + Thread.currentThread().getStackTrace()[2]
                    .getMethodName());
    //we have successfully connected to BT

    //now inform UI 

    Home_Screen.sendMessageToHomeScreen(
        Home_Screen.MESSAGE_INTERBT_CONNECTION_TESTED,
        Home_Screen.CONNECTION_SUCCESS, true);
  } 
```

然后编写只需调用此方法，该方法也在 ConnectionThreadBT 中定义

```
public void sendMsg(MyBuffer buffer){
        try {
        mmOutStream.write(buffer);
        mmOutStream.flush();
        successfullyWritten = true;
        } catch (IOException e) {
        Log.e(this.getClass().getSimpleName(),
            "Exception during write", e);
        successfullyWritten = false;
        } 
```

to read either do the same or start a monitoring loop in the run method which keeps reading as long as the connectedThread is alive and reports back any read information through a handler similar to the UI screen update

# internationalization - 通过小部件外部的标记实现 Dojo 国际化

> ID：10082536
> 
> 赞同：3
> 
> 时间：2012-04-10T02:50:56.257
> 
> 标签：internationalization, dojo

Dojo 自定义小部件可以按照[此处](http://www.sitepen.com/blog/2011/08/25/how-do-i-create-a-dynamic-validating-internationalized-form-in-a-dialog/)和[此处](http://dojotoolkit.org/documentation/tutorials/1.7/templated/)`_templated`列出的步骤通过 mixin进行国际化。然后像这样的小部件模板中的占位符： 自动替换为适当的语言翻译。`${i18n.username}`

**在小部件之外进行类似 nls 语言替换的最简单方法是什么？**理想情况下，我想向标签添加一个属性，以替换其中的所有占位符，包括嵌套标签。是否有某种类型的容器小部件已经这样做了？

还是 Dojo 开发假设一切都在（自定义）小部件中？我需要本地化已经存在的不使用小部件的代码。

到目前为止，我发现的最佳解决方案是：

*   使用[dojox.mobile.i18n](http://dojotoolkit.org/reference-guide/1.7/dojox/mobile/internationalization.html)，它是“一个围绕 dojo.i18n 的薄包装，并且能够在 dojo 标记中替换字符串，例如 CDATA 或属性值”。但是，恐怕这仅限于移动标签/小部件的某个子集。
*   [在 dojo.addOnLoad() 中显式调用解析器之前禁用自动解析并手动搜索/替换适当的文本](http://www.webreference.com/programming/dojo/Localizing-Declaratively-Created-Widgets/index.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:14:53.897

我假设外部 html 中的符号是`${i18n.username}`. 这将找到任何具有`class="i18nReplace"`并替换节点的 innerHTML 的节点。我没有测试任何这些，但我希望你可以以此为起点。

```
dojo.require("dojo.i18n");
dojo.require("dojo.query");
dojo.requireLocalization("myI18n", "myI18N"); // This will need to be modified to get your i18n files

dojo.addOnLoad(function() {
  var i18n = dojo.i18n.getLocalization("myI18n", "myI18N");
  dojo.query(".i18nReplace").forEach(function(node, index, arr){

      node.innerHTML = dojo.replace(node.innerHTML, { i18n: i18n } );

      // blindly doing this, does not support nested tags.
      // you could add conditional logic to check for children 
      // and if they exist separately process them, otherwise 
      // replace the html.
  });
}); 
```

# meteor - 在 Meteor 中，如何在服务器确认之前将新插入的数据显示为灰色？

> ID：10082537
> 
> 赞同：31
> 
> 时间：2012-04-10T02:51:06.553
> 
> 标签：meteor

假设我的应用程序有一个项目列表，用户可以在列表中插入新项目。

Meteor 通常做的是：当用户在列表中插入一个项目时，它会立即出现在他们的浏览器中，而无需等待服务器确认。

我想要的是：当一个项目处于这种状态（已提交但服务器尚未确认）时，它会出现在列表中的正确位置，但显示为灰色。

有没有办法让 Meteor 做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-10T03:49:39.017

当然。制作一个进行插入的方法。当方法运行时，让它检查它是否在模拟中运行，如果是，在插入的项目上设置一个“临时”或“未确认”标志。使用它来决定是否将项目呈现为灰色。

假设您使用的是 MongoDB：

```
// Put this in a file that will be loaded on both the client and server
Meteor.methods({
  add_item: function (name) {
    Items.insert({name: name,
                  confirmed: !this.isSimulation});
  }
}); 
```

调用方法：

```
Meteor.call("add_item", "my item name"); 
```

这就是你需要做的。这样做的原因是，一旦服务器完成保存项目，客户端上的本地（模拟）更改将被撤销并替换为服务器上实际发生的任何内容（不包括“未确认”标志。）

以上是最简单的方法，但它会导致数据库中的所有记录都具有“已确认”属性为真。为避免这种情况，请仅在其为 false 时设置确认属性。

有关更多信息，请参阅文档的这一`isSimulation`部分`Meteor.methods`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T11:45:56.400

这就是我在服务器端添加了一个观察者的方法，我从客户端本身创建了一个名为 notify false 的变量，一旦服务器接收到 udpate，它将使 notify 为 true，并且客户端将在同一位置更新。

```
Collection.find({"notify":false}).observe({ 
    "added" : function(first){ 
        collection.update({"_id":first._id},{$set : {"notify":true}}); 
    }
}); 
```

# c# - 寻找可以表示时间值的WinForms控件

> ID：10082539
> 
> 赞同：0
> 
> 时间：2012-04-10T02:51:27.730
> 
> 标签：c#, winforms, timer, controls

我正在寻找可以表示以下值的第三方开源或商业 WinForms 控件：

任务的总持续时间。
时间流逝。
剩余时间。

一直没能找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:04:21.477

In the `System.Diagnostic` Namespace there is a [`Stopwatch` Class](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx), you should be able to use this to create your own control.

> A Stopwatch instance can measure elapsed time for one interval, or the total of elapsed time across multiple intervals. In a typical Stopwatch scenario, you call the Start method, then eventually call the Stop method, and then you check elapsed time using the Elapsed property.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:56:59.833

Infragistics 在 Winforms 中非常受欢迎，并且可以选择 DateTimePicker

```
... setting the MaskInput to {time} should get the behavior you are looking for. 
If you only set the FormatString property, the the time will display only when 
the control is in edit mode (when the cursor is in the control). 
```

来自[http://forums.infragistics.com/forums/t/4172.aspx](http://forums.infragistics.com/forums/t/4172.aspx)。

但我认为第三方将获得报酬。

如果您正在寻找 Windows 内部控件 DatePicker 有一个属性 Format 可以设置为时间。请务必将 ShowUpDown 设置为 True。

或者

```
this.dateTimePicker1.CustomFormat = "hh:mm";
this.dateTimePicker1.Format = System.Windows.Forms.DateTimePickerFormat.Custom; 
```

…………

```
private void dateTimePicker1_ValueChanged(object sender, EventArgs e)
{
    MessageBox.Show(dateTimePicker1.Value.TimeOfDay.ToString());
} 
```

# ruby - 如何从 XML 构建对象，修改，然后在 Ruby 中写入文件

> ID：10082541
> 
> 赞同：1
> 
> 时间：2012-04-10T02:51:41.083
> 
> 标签：ruby, xml, parsing, hash

我在尝试使用库将 XML 文件解析为类似对象的哈希，修改它，然后将其打印回 Ruby 中的另一个 XML 文件时遇到了很糟糕的事情。对于我正在学习的课程，我们应该使用类似 Java JAXB 的库，在其中我们将 XML 转换为对象。我们已经完成了 SAX 和 DOM 方法，因此我们不能使用这些 XML 反序列化方法。Nokogiri 在 Ruby 中帮助我解决了这两个问题。

唯一的问题是，除了我对对象进行的简单修改之外，当我写入文件时，它有很大的不同。是否有专门用于执行此操作的 Ruby 库？我尝试过：ROXML、XML::Mapping 和 ActiveSupport::CoreExt。我唯一可以运行的是 ActiveSupport，即使这样，它也会开始将元素属性作为子元素放入输出 XML 中。

我愿意尝试 XmlSimple，但我很好奇有没有人真的必须这样做之前/遇到同样的问题？同样，我不能像 SAX 那样一次读取一行，也不能像 DOM 那样构建树状结构，它需要是像对象一样的散列。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:46:51.943

你应该看看 nokogiri：[http ://nokogiri.org/](http://nokogiri.org/)

然后你可以像这样解析 XML：

```
xml_file = "some_path"
@xml = Nokogiri::XML(File.open xml_file)
@xml.xpath('//listing').each do |node| 
  style  = node.search("style").text
end 
```

使用 Xpath，您可以在 XML 中执行查询：

```
@xml.xpath("//listing[name='John']").first(10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T01:49:54.113

好的，我得到它的工作。查看 ActiveSupport::CoreExt 的源代码后，我发现它只使用了一个名为 xml-simple 的 gem。令人讨厌的是 gem、require 语句中的库名和类名是连字符和非连字符拼写的混合。为了将来参考，这是我所做的：

```
# gem install xml-simple
#             ^ all lowercase, hyphenated
require 'xmlsimple'
#        ^ all lowercase, not hyphenated
doc = XmlSimple.xml_in 'hw3.xml', 'KeepRoot' => true
#     ^ Camel cased (it's a class), not hyphenated
# doc.class => Hash
# manipulate doc as a hash
file = File.new('HW3a.xml', 'w')
file.write("<?xml version='1.0' encoding='utf-8'?>\n")
file.write(XmlSimple.xml_out doc, 'KeepRoot' => true) 
```

我希望这可以帮助别人。还要确保你注意这个宝石的大小写和连字符！！！

# perl - 如何使用 Net::SSH::Perl 运行 SSH 命令？

> ID：10082542
> 
> 赞同：2
> 
> 时间：2012-04-10T02:51:45.547
> 
> 标签：perl, ssh

我不知道我是否[`Net::SSH::Perl`](https://metacpan.org/module/Net%3a%3aSSH%3a%3aPerl)成功安装了模块，但我似乎无法运行以下代码：

```
my $ssh = Net::SSH::Perl->new($remote_host);
$ssh->login($username, $password);
print "login done", "\n";
my ($out, $err, $exit) = $ssh->cmd($cmd);
print "$out", "\n"; 
```

我可以登录，但无法打印`$out`. 我不断收到此错误：

```
Use of uninitialized value $out in string at test_ssh.pl line 28. 
```

第 28 行是指`print "$out", "\n";`.

我在 Cygwin 上运行此代码。我现在该怎么办？

编辑：我运行时收到以下错误消息`my $ssh = Net::SSH::Perl->new($remote_host, options => ["Debug yes"]);`：

```
Use of uninitialized value $out in string at test_ssh.pl line 29 (#1)
    (W uninitialized) An undefined value was used as if it were already
    defined.  It was interpreted as a "" or a 0, but maybe it was a mistake.
    To suppress this warning assign a defined value to your variables.

    To help you figure out what was undefined, perl will try to tell you the
    name of the variable (if any) that was undefined. In some cases it cannot
    do this, so it also tells you what operation you used the undefined value
    in.  Note, however, that perl optimizes your program and the operation
    displayed in the warning may not necessarily appear literally in your
    program.  For example, "that $foo" is usually optimized into "that "
    . $foo, and the warning will refer to the concatenation (.) operator,
    even though there is no . in your program. 
```

EDIT2：这是我的完整代码

```
use strict;
use warnings;
use Net::SSH::Perl;

my $remote_host = '<host ip address>';
my $password    = 'pass';
my $username    = 'user';
my $cmd         = 'copy run tftp:<my own ip address>';

warn "Starting SSH Services:...";
my $ssh = Net::SSH::Perl->new($remote_host, debug => 1);
print "done", "\n";

warn "Starting Login:...";
$ssh->login($username, $password);
print "login done", "\n";

warn "Starting command:...";
#$ssh->cmd($cmd);
#my($stdout, $stderr, $exit) = $ssh->cmd($cmd);
my ($out, $err, $exit) = $ssh->cmd($cmd);
print "$out", "\n"; 
```

"print "$out","\n";" 上的错误信息 线：

```
<Computername>: channel 1: new [client-session]
<Computername>: Requesting channel_open for channel 1.
<Computername>: Entering interactive session.
<Computername>: Channel open failure: 1: reason 4:
Use of uninitialized value $out in string at test_ssh.pl line 29. 
```

最后编辑：我决定使用 Net::Appliance::Session 通过 SSH 登录到网络设备。它比 Net::SSH::Perl 更容易使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:53:36.677

请显示更多您的代码。的价值是`$cmd`多少？

请注意，该`login`方法不执行登录：它仅存储为每次`cmd`呼叫建立连接时要使用的用户名和密码。

启用调试消息的正确方法是

```
my $ssh = Net::SSH::Perl->new($remote_host, debug => 1); 
```

这将为您提供来自该`cmd`方法的跟踪信息，除其他外

```
Sending command: xxx
Entering interactive session. 
```

并且应该给你一些关于出了什么问题的线索。

* * *

您的调试输出显示了问题。细看[`SSH2.h`](http://api.libssh.org/master/ssh2_8h_source.html)，打开失败原因4是`SSH2_DISCONNECT_HOST_AUTHENTICATION_FAILED`。您的用户名和密码不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-11T20:40:42.197

Net::SSH::Perl**确实支持通过用户名/密码登录**，我有一个工作示例，我刚刚让它工作。我使用上面的代码并取出双引号（“”）并使用单引号（''）代替。并且“debug => 1”适用于在出现问题时调试代码。如果设置了调试选项，它将在您尝试登录时向您显示信息。

我正在连接到基于 Windows Powershell 的 Win32-OpenSSH SSHD 服务器，非常类似于支持 SFTP 的 BSDLinux SSHD 服务器。支持相同的基于 Linux 风格的连接。

我整天都在尝试所有其他 SSH 模块。希望有人可以使用此代码来运行命令并在需要时获取输出。

您可以使用“cpan -i module-name”安装 Net::SSH::Perl

```
 use Net::SSH::Perl;

my $host = 'testmachine.acme.local';     #Or just IP Address
my $user = 'domain\username';            #Or just username
my $pass = 'Password@123';
my $cmd = 'dir C:\\Windows\\'; 

use Net::SSH::Perl;
my $ssh = Net::SSH::Perl->new($host, debug => 1);
$ssh->login($user, $pass);
my ($out, $err, $exit) = $ssh->cmd($cmd);
print "$out", "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:39:18.057

Net::SSH::Perl 不支持仅通过交互式密码输入或公钥通过用户名/密码登录。有关更多信息，请参阅此帖子。

[http://www.perlmonks.org/?node_id=590452](http://www.perlmonks.org/?node_id=590452)

# html - CSS悬停效果

> ID：10082553
> 
> 赞同：0
> 
> 时间：2012-04-10T02:53:20.337
> 
> 标签：html, css

当我们将鼠标悬停时，此代码将在 div 上输出一些闪烁。我想要的是当鼠标悬停在红色 div 上时显示隐藏 div 的内容。但随着“闪光”，效果无法正常工作。

有什么想法吗？

```
<div class="content">
     <div class="absolute"></div>
     <div class="new_l"><a href="#">---links</a></div>
</div>

.content {
    width: 195px;
    margin-top: 15px;
    border:1px solid red;
}

.content>.new_l {
    width: 195px;
    height: 20px;
    z-index: 0;
    position: relative;
    display: inline-block;
}

.content>.absolute {
    width: 195px;
    height: 20px;
    position: absolute;
    z-index: 1;
    background-color: red;
    display: inline-block;
}

.content>.absolute:hover {
    display: none;
} 
```

**[演示](http://jsfiddle.net/fcwJZ/1/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:01:20.167

不确定这是否是您正在寻找的东西，但它就在这里。诀窍是将隐藏的 div 放在另一个里面。

**HTML**

```
<div class="content">
    <div class="absolute">
        <div class="new_l"><a href="#">---links</a></div>
    </div>
</div> 
```

**CSS**

```
.content {
    width: 195px;
    margin-top: 15px;
    border:1px solid red;
}

.new_l {
    width: 195px;
    height: 20px;
    background-color: #ccc;
    display:none;
}

.absolute {
    width: 195px;
    height: 20px;
    background-color: red;
}

.absolute:hover .new_l {
    display: block;
}​ 
```

[http://jsfiddle.net/uFsUa/1/](http://jsfiddle.net/uFsUa/1/)

# json - 使用 VBA 为 Google Calendar API V3 构建 JSON

> ID：10082555
> 
> 赞同：3
> 
> 时间：2012-04-10T02:53:47.090
> 
> 标签：json, vba, ms-access, google-api, google-calendar-api

我正在尝试使用 Google API V3 将事件添加到 Google 日历。我没有使用任何谷歌的库，所以我真的很困惑如何做到这一点。[Google 的文档](https://developers.google.com/google-apps/calendar/v3/reference/events/insert)告诉我，我需要在请求正文中发送[“事件资源” 。](https://developers.google.com/google-apps/calendar/v3/reference/events#resource)我想我已经构建了一个有效的 JSON“字符串”，但我不知道如何正确准备它并将其发送到所谓的“请求正文”中。让我感到困惑的是字符串值用引号括起来而非字符串值不是这样的方式。这是否意味着我需要将整个内容包装为一个字符串并对每个双引号进行双引号/四引号？

这是我编写的 JSON，但我还没有弄清楚如何将它传递给 Google，所以我无法对其进行测试：

```
{
  "kind": "calendar#event",
  "start": {
    "dateTime": 04/10/2012 08:00 AM
  },
  "end": {
    "dateTime": 04/10/2012 08:00 AM
  },
  "attendees": [
    {
      "email": "myemailaddress@gmail.com",
      "displayName": "My Name",
      "organizer": True,
      "self": True
    }
  ],
  "reminders": {
    "useDefault": True
  }
} 
```

我的 Access/VBA 数据库中确实安装了一个 VBJSON 代码模块。我在那里看到一个名为 StringToJSON 的函数，它返回一个字符串。我还是一头雾水。当我将此 JSON 传递给 Google 时，它​​是否只是我代码中的一个大字符串值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:56:08.987

好的，所以我终于想出了如何构建和传递我的 JSON 字符串。我正在使用 VBJSON 来构建 JSON 字符串。请记住 JSON 区分大小写（或至少 Google 将其解释为区分大小写）。具有关键日期时间的一对与具有关键日期时间的一对不同，Google 将拒绝后者。

```
'Code to create JSON using Dictionary Objects and Collection Objects
Dim d As New Scripting.Dictionary
Dim c As New Collection

d.Add "kind", "calendar#event"
d.Add "summary", "Event Title/Summary"

Dim d2(4) As New Scripting.Dictionary

d2(0).Add "dateTime", "2012-04-14T16:00:00.000-04:00"
d.Add "start", d2(0)

d2(1).Add "dateTime", "2012-04-14T18:00:00.000-04:00"
d.Add "end", d2(1)

'First Attendee
d2(2).Add "email", "john.doe@gmail.com"
d2(2).Add "displayName", "John Doe"
d2(2).Add "organizer", True
d2(2).Add "self", True
'Add attendee to collection
c.Add d2(2)

'Second attendee
d2(3).Add "email", "suzy.doe@gmail.com"
d2(3).Add "displayName", "Suzy Doe"
'Add attendee to collection
c.Add d2(3)

'Add collection to original/primary dictionary object
d.Add "attendees", c

'Add more nested pairs to original/primary dictionary object
d2(4).Add "useDefault", True
d.Add "reminders", d2(4)

'Now output the JSON/results
'This requires the VBJSON module (named just JSON, a module, not a class module)
Debug.Print JSON.JSONToString(d) 
```

未经修饰的输出是这样的：

```
{"kind":"calendar#event","summary":"Event Title\/Summary","start":{"dateTime":"2012-04-14T16:00:00.000-04:00"},"end":{"dateTime":"2012-04-14T18:00:00.000-04:00"},"attendees":[{"email":"john.doe@gmail.com","displayName":"John Doe","organizer":true,"self":true},{"email":"suzy.doe@gmail.com","displayName":"Suzy Doe"}],"reminders":{"useDefault":true}} 
```

然后是使用 Google Calendar API V3 将其提交给 Google 的方法。在 V3 中，您必须使用 OAuth2.0，因此您需要有一个有效的访问令牌才能附加到您的 URL，如下所示。您还需要知道您的 CalendarID，它通常是您的电子邮件地址 URL 编码。例如，您的 calendarid 如下所示：john.doe%40gmail.com

```
Dim objXMLHTTP As MSXML2.ServerXMLHTTP
Set objXMLHTTP = New MSXML2.ServerXMLHTTP
Dim sPostData As String
sPostData = JSON.JSONToString(d)

Dim sURL As String
sURL = "https://www.googleapis.com/calendar/v3/calendars/{mycalendarid}/events?sendNotifications=false&fields=etag%2ChtmlLink%2Cid&pp=1&access_token={my oauth2.0 access token}"

With objXMLHTTP
    .Open "POST", sURL, False
    .setRequestHeader "Content-Type", "application/json"
    .Send (sPostData)
End With

Debug.Print objXMLHTTP.ResponseText

Set objXMLHTTP = Nothing 
```

# gcc - 如何为 Heroku 静态编译 gerbv

> ID：10082557
> 
> 赞同：0
> 
> 时间：2012-04-10T02:53:58.747
> 
> 标签：gcc, static, linker, libtool

我正在尝试编译[gerbv 2.6](http://sourceforge.net/projects/gerbv/files/)，以便我可以将它包含在我的 Heroku bin 目录中，但我似乎无法弄清楚。我尝试了以下各种组合：

```
CFLAGS='-static  -static-libgcc  -static-libstdc++' ./configure
./configure --enable-static
./configure --enable-static=yes --enable-shared=no 
```

但跑步后`make`我总是得到：

```
src/gerbv: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=0x401fe83e54660a42e80e4c529fde85799728cdcb, not stripped 
```

我的想法不多了。有人有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:21:58.493

这很可能是因为系统库或 gcc 运行时是链接共享的。使用“ldd”实用程序查看动态链接的内容。

ldd 源代码/gerbv

共享运行时可能是您想要的，但如果您希望运行时是静态的，那么如果您安装了静态运行时，可能会有一个选项。

# c++ - 如何使 wxScrolledWindow 居中对齐？

> ID：10082562
> 
> 赞同：0
> 
> 时间：2012-04-10T02:54:15.167
> 
> 标签：c++, wxwidgets

有一个带有逻辑坐标 (1000, 12040) 的 wxScrolledWindow。当窗口调整大小时，即最大化，我想在客户端视图中保持居中对齐。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:21:55.040

您需要捕获 wxEVT_SIZE，并根据旧尺寸与新尺寸手动调整滚动位置。

# objective-c - “应用环境”、“框架”、“API”的定义

> ID：10082563
> 
> 赞同：1
> 
> 时间：2012-04-10T02:54:21.267
> 
> 标签：objective-c, cocoa, api, frameworks, macos-carbon

是真的吗：

Cocoa 是一个`application environment`由几个`Frameworks` 组成的框架，每个框架由几个组成`API`

`Application Environment`-> `Framework`->`API`

Carbon 是 OSX 中的另一个应用程序环境吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:23:04.553

所有允许应用程序与计算机对话的东西都是“API”。这是一个非常广泛的术语。它可能指的是像 malloc 一样小的东西，或者像 Cocoa 一样大的东西。所有这些都是广义上的“API”。

在 Mac 和 iOS 上，“框架”可以有特定的含义，即特定格式的可动态加载的包。它还可以具有“协同工作的库集合”的广泛含义。有一个 Cocoa.framework，但也有更广泛的“Cocoa”架构，它是一种攻击问题的方式以及一组用于以这种方式攻击问题的工具。

“应用程序环境”是应用程序可以在其中运行的任何环境。因此可以将 Mac OS X 视为应用程序环境，或者您可以将 Darwin 视为应用程序环境、Cocoa 或 Carbon。这取决于您将其与什么进行比较。

所有这一切的关键在于，这些不是行业范围内定义明确的术语。它们习惯于表示很多重叠的东西，即使在 Apple 文档中，它们的使用方式有时也会略有不同。

如果您正在寻找关于一般术语以及 Apple 如何使用它们的良好参考，您可以阅读[Cocoa Core Competencies](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/AccessorMethod.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T02:59:04.987

维基是怎么说的：

> **Carbon**是 Apple Inc. 用于 Macintosh 操作系统的过程应用程序编程接口 (API) 之一。它提供对 Macintosh 系统服务的 C 编程语言访问。Carbon 为在现已过时的 Mac OS 8 和 9 上运行的程序提供了良好的向后兼容性，但是自从 Apple 于 2001 年 12 月发布最终的 OS 9 更新以来，这些系统不再受到积极支持。

简而言之，Cocoa 和 Carbon 都被视为 API。

* * *

***旁注：**你为什么这么关心术语？我绝对不会。恕我直言，重要的是内在逻辑和概念；不一定是我们如何称呼它。只是我的2美分....*

# css - 为什么设置 `right` CSS 属性会将元素推向左侧？

> ID：10082567
> 
> 赞同：2
> 
> 时间：2012-04-10T02:55:15.593
> 
> 标签：css, positioning

我有一个非常基本的页面，其中包含两个元素，一个外部绿色框和一个内部蓝色框。我很困惑为什么在内框上设置 right 属性会将其移到左侧？此外，我很困惑为什么`right:0`不将框右边缘与父框的右边缘对齐？这是我的简短示例页面...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <style type="text/css">
            #outer {
                background-color : green;
                width : 500px;
                height : 500px;
            }

            #inner {
                position : relative;
                background-color : blue;
                height : 400px;
                width : 400px;
                top : 10px;
                right : 20px;
            }
        </style>
    </head>
    <body>
        <div id="outer">
            <div id="inner">

            </div>

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:00:13.197

设置该`right`属性指示您的元素应该离右边缘多远。将其视为设置新的起点。默认情况下，您的来源是包含元素的左上角。你可以使用`bottom`and`right`来改变它。

当您的元素相对定位时，其右原点将是其右边缘的自然位置。这就是你的元素向左移动 20px 的原因。如果您将位置值更改为`absolute`，新的原点将是最近定位容器的右边缘，或视口本身。在您的情况下，它是视口。

有关更多信息，请参阅[http://www.w3.org/wiki/CSS/Properties/right](http://www.w3.org/wiki/CSS/Properties/right)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:01:30.777

扔一个

```
float:right; 
```

到您的内部 div，一切都会按您的预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T03:06:13.997

> *此外，我很困惑为什么`right:0`不将框右边缘与父框的右边缘对齐？*

如果您希望父框为所有后代建立新的坐标系，则需要将父框设置为`position:relative`（或`absolute`，或）。`fixed`否则，内盒仍然相对于主体定位。

例如，比较这两个演示：
[`position:relative`外层](http://jsfiddle.net/dRRzX/)
[`position:static`外层](http://jsfiddle.net/dRRzX/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:02:07.467

设置正确是你想从右边推多少

# java - java中如何区分xml和html链接

> ID：10082568
> 
> 赞同：0
> 
> 时间：2012-04-10T02:55:26.270
> 
> 标签：java, xml

我有一个链接列表，包含指向 html 和 xml 页面的链接，如何从列表中提取 xml 链接？在java中

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:03:35.710

您可以使用常见文件扩展名列表来判断存储在给定 URL 的数据类型，但这通常不是很可靠，尤其是对于 Web 2.0 站点（只需查看此 SO 问题本身的 URL）。此外，指向 PHP 脚本 (.php) 或其他动态内容站点的链接可能会返回 HTML 或 XML。或者它可以完全返回其他内容，例如 JPG 文件。

您可以使用许多简单的启发式方法来检测 HTML 与 XML，只需查看文件的开头即可。例如，您可以查找`<!DOCTYPE ...>`声明、检查`<?xml ...?>`指令并检查文件是否包含根`<html>`标记。当然，这些都应该是不区分大小写的检查。

您还可以尝试根据文件的[MIME 类型](http://en.wikipedia.org/wiki/Internet_media_type)（例如*text/html*或*text/xml*）来识别文件的类型。不幸的是，许多服务器返回不正确或无效的 MIME 类型，因此您经常不得不阅读文件的开头来判断其内容，正如您在下面的 getMimeType() 方法的前两个不完善版本中看到的那样。第三次尝试效果更好，但第三方 MimeMagic 库仍然提供了令人失望的结果。不过，您可以使用我之前提到的其他启发式方法来替换或改进 getMimeType() 方法。

```
package com.example.mimetype;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.FileNameMap;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import net.sf.jmimemagic.Magic;
import net.sf.jmimemagic.MagicException;
import net.sf.jmimemagic.MagicMatchNotFoundException;
import net.sf.jmimemagic.MagicParseException;

public class MimeUtils {

    // After calling this method, you can retrieve a list of URLs for each mimetype.
    public static Map<String, List<String>> sortLinksByMimeType(List<String> links) {
        Map<String, List<String>> mapMimeTypesToLinks = new HashMap<String, List<String>>();

        for (String url : links) {
            try {
                String  mimetype = getMimeType(url);

                System.out.println(url + " has mimetype " + mimetype);

                // If this mimetype hasn't already been initialized, initialize it.
                if (! mapMimeTypesToLinks.containsKey(mimetype)) {
                    mapMimeTypesToLinks.put(mimetype, new ArrayList<String>());
                }

                List<String> lst = mapMimeTypesToLinks.get(mimetype);
                lst.add(url);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        return mapMimeTypesToLinks;
    }

    public static String getMimeType(String url) throws MalformedURLException, IOException, MagicParseException, MagicMatchNotFoundException, MagicException {
        // first attempt at determining MIME type--returned null for all URLs that I tried
//      FileNameMap filenameMap = URLConnection.getFileNameMap();
//      return filenameMap.getContentTypeFor(url);

        // second attempt at determining MIME type--worked better, but still returned null for many URLs
//      URLConnection c = new URL(url).openConnection();
//      InputStream in = c.getInputStream();
//      String mimetype = URLConnection.guessContentTypeFromStream(in);
//      in.close();
//      return mimetype;

        URLConnection c = new URL(url).openConnection();
        BufferedInputStream in = new BufferedInputStream(c.getInputStream());
        byte[] content = new byte[100];
        in.read(content);
        in.close();

        return Magic.getMagicMatch(content, false).getMimeType();
    }

    public static void main(String[] args) {
        List<String> links = new ArrayList<String>();
        links.add("http://stackoverflow.com/questions/10082568/how-to-differentiate-xml-from-html-links-in-java");
        links.add("http://stackoverflow.com");
        links.add("http://stackoverflow.com/feeds");
        links.add("http://amazon.com");
        links.add("http://google.com");

        sortLinksByMimeType(links);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:02:44.623

我不确定您的链接是否是某种`Link`对象，但只要您可以将值作为字符串访问，我认为这应该可以工作。

```
List<String> xmlLinks = new ArrayList<String>();
for (String link : list) {
  if (link.endsWith(".xml") || link.contains(".xml")) {
    xmlLinks.add(link);
  }   
} 
```

# c - 无法用 C 中的指针计算十六进制转换

> ID：10082569
> 
> 赞同：0
> 
> 时间：2012-04-10T02:55:29.300
> 
> 标签：c, pointers, hex, decimal, atoi

所以我对此感到非常沮丧，并且觉得弄清楚我做错了什么的唯一方法就是问你们这些好人。我正在尝试将一串字符（包含数值）转换为十六进制。这是我的代码（请注意，我还没有将 10-15 的开关设置为字母；我只是想确保在运行此代码时返回整数值……不走运）：

```
void toHex(char *inString){
    char *charVal = inString;
    char decVal[100];

    for(int i = 0; decVal[i] != '\0'; i++){
        decVal[i] = *charVal;
        charVal++;
    }

    char storeMod[100];
    int i = 0;
    int testVal = atoi(decVal);

    for(i; testVal >= 16; i++){
        int a = testVal;
        testVal = testVal/16;
        storeMod[i] = a;
    }

   int a = 0;
   char hexval[100];
   hexVal[0] = '0';
   hexVal[1] = 'x';
   for(int j = i+2; j>=2; j--){
       hexVal[j] = storeMod[a];
       a++;
   }

   printf("%s hex valu\n", hexVal);
   return;
} 
```

例如，输入 300 返回 ,@

我也试过：

```
char hexVal[100];
sprintf(hexVal,"%x",*inString);
strcpy(instring,hexVal); 
```

它为 300 返回一个十六进制值 3fa844e0 ，这显然也是错误的。任何帮助表示赞赏，我也需要对八进制执行此操作，因此我必须弄清楚这个概念并看看我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T02:58:38.430

代替：

```
sprintf(hexVal,"%x",*inString); 
```

采用：

```
sprintf(hexVal, "%x", atoi(inString)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:35:45.993

正如已经指出的那样，您可以将整个功能替换为：

```
printf("%lx\n", strtol(inString, NULL, 10)); 
```

但是，如果这是为了学校或个人满足，您似乎知道两个主要步骤。

*   将字符串转换为整数
*   将整数编码回右基字符串。

第一步，从左到右逐步遍历数字（这在字符串中很容易）将运行结果乘以 10，然后添加当前数字。

对于第二步，只需一次遍历数字四位（一个十六进制数字），插入那个 plus `'0'`。如果您从 LSB 开始，请记住反转字符串。

# qt - 视图中的 MousePressEvent 和 Qt 中的项目

> ID：10082571
> 
> 赞同：3
> 
> 时间：2012-04-10T02:56:07.880
> 
> 标签：qt, mouseevent, mousepress

我有一个自定义 QGraphicsView 和一个自定义 QGraphicsItem。如果我单击项目，我希望项目处理我的点击，否则我希望点击由视图处理。

但是当我点击该项目时，该项目会处理点击。还行吧。但是，如果我单击其他地方，则根本不会处理单击。我的类中与 mouseEvents 有任何关系的所有代码都在下面。

```
class CustomView : public QGraphicsView
{
    Q_OBJECT

public:

    void mousePressEvent(QGraphicsSceneMouseEvent *event);

};

void CustomView::mousePressEvent(QGraphicsSceneMouseEvent *event){
    cout << "pressing in view";
}

class CustomItem : public QGraphicsItem
{
public:
    CustomItem(CustomView* widget)
    void mousePressEvent(QGraphicsSceneMouseEvent *event);
};

CustomItem::CustomItem(CustomView* widget){
    setFlag(ItemIsSelectable);
    setFlag(ItemIsMovable);
}

void CustomItem::mousePressEvent(QGraphicsSceneMouseEvent *event){
    cout << "pressing in item";
} 
```

似乎当我从 CustomItem 类中删除 mousePressEvent 函数并在 CustomView 中将 mousePressEvent 函数更改为：

```
void CustomView::mousePressEvent(QMouseEvent *event){
    cout << "pressing in view";
} 
```

CustomView 处理所有鼠标事件。

如何让 CustomItem 处理项目中的点击，而让 CustomView 处理所有其他点击？

谢谢你。

编辑

所以现在我把它改成了：

```
 class CustomView : public QGraphicsView
{
    Q_OBJECT

public:

};

 class CustomScene : public QGraphicsScene
{
protected:
    void mousePressEvent(QGraphicsSceneMouseEvent *event);
};

void CustomScene::mousePressEvent(QGraphicsSceneMouseEvent *event){
    cout << "pressing in scene";
}

class CustomItem : public QGraphicsItem
{
public:
    CustomItem(CustomView* widget)
protected:
    void mousePressEvent(QGraphicsSceneMouseEvent *event);
};

CustomItem::CustomItem(CustomView* widget){
    setFlag(ItemIsSelectable);
    setFlag(ItemIsMovable);
}

void CustomItem::mousePressEvent(QGraphicsSceneMouseEvent *event){
    cout << "pressing in item";
} 
```

场景中的单击而不是项目中的单击由场景处理。但是项目中的点击不会由项目本身处理，而是由场景处理。除非您在项目上快速单击 2 次，否则它将由场景和项目处理。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T04:40:17.517

QGraphicsView 并不是处理特定场景事件的好地方。相反，您需要覆盖 QGraphicsScene::mousePressEvent。我会推荐这样的东西：

```
void CustomScene::mousePressEvent(QGraphicsSceneMouseEvent *event)
{
  if (itemAt(event) == NULL)
  {
    // do stuff if not clicked on an item
  }
  else
  {
    QGraphicsScene::mousePressEvent(event); // this forwards the event to the item
  }
} 
```

请注意，如果您有 ItemIgnoresTransformations 标志设置为 true 的项目，QGraphicsScene::itemAt 可能会给您带来困难。查看 QGraphicsScene::itemAt 的文档以了解如何解决此问题。

# c++ - 你好，提升多指数

> ID：10082572
> 
> 赞同：0
> 
> 时间：2012-04-10T02:56:34.307
> 
> 标签：c++, boost, cmake

我已经开始研究一个包含一些 boost 库（线程和 MPI）的项目。我将在其中一个根本不使用 boost 的模块中使用 boost multi_index。仅供参考，这个项目之前没有使用 boost multi index)

一旦我试图包括

> boost/multi_index_container.hpp

到文件并构建项目，我收到了一些错误，从以下开始：

```
Building CXX object CMakeFiles/SimMobility.dir/main.cpp.o
/usr/bin/c++    -fmessage-length=0 -DBOOST_NO_HASH -O0 -g -I/usr/include/postgresql -I/usr/include/soci -I/usr/include/soci/postgresql -I/usr/include/xsd -I/home/vahid/workspace/Basic__Multi_index    -o CMakeFiles/SimMobility.dir/main.cpp.o -c /home/vahid/workspace/Basic__Multi_index/main.cpp
In file included from /usr/include/boost/multi_index/detail/node_type.hpp:22:0,
                 from /usr/include/boost/multi_index/detail/index_base.hpp:21,
                 from /usr/include/boost/multi_index/detail/base_type.hpp:21,
                 from /usr/include/boost/multi_index_container.hpp:33,
                 from /home/vahid/workspace/Basic__Multi_index/geospatial/RoadNetwork.hpp:10,
                 from /home/vahid/workspace/Basic__Multi_index/main.cpp:25:
/usr/include/boost/multi_index/detail/header_holder.hpp:41:16: error: expected unqualified-id before ‘)’ token
/usr/include/boost/multi_index/detail/header_holder.hpp: In constructor ‘boost::multi_index::detail::header_holder<NodeTypePtr, Final>::header_holder()’:
/usr/include/boost/multi_index/detail/header_holder.hpp:35:32: error: expected primary-expression before ‘)’ token 
```

我可以知道问题是什么吗？是cmake没有找到它需要的东西吗？知道如何解决吗？

**编辑：** 如果您想查看源代码，这是一个简化版本：

RoadNetwork.hpp:

```
#pragma once

#include <iostream>
#include <vector>
#include <set>

#include <boost/multi_index_container.hpp> //causing problem!!!!!!!

namespace geo {class Links_pimpl;}
namespace sim_mob
{

//Forward declarations
class Node;
class UniNode;
class MultiNode;
class Point2D;
class Link;

namespace aimsun
{
//Forward declaration
class Loader;
}

//typedef multi_index_container<
//sim_mob::Link,
//    indexed_by<
//      random_access<>,
////            ordered_unique< member<sim_mob::Link, std::string, &sim_mob::Link::linkID> >
//    >
//> Link_m;

class RoadNetwork {
public:
    RoadNetwork() { drivingSide=DRIVES_ON_LEFT; } //TEMP

    sim_mob::Node* locateNode(const sim_mob::Point2D& position, bool includeUniNodes=false, int maxDistCM=100) const;
private:
    std::vector<sim_mob::MultiNode*> nodes;
    std::vector<sim_mob::Link*> links;

    std::vector<sim_mob::MultiNode*>& getNodesRW() { return nodes; }
    std::set<sim_mob::UniNode*>& getUniNodesRW() { return segmentnodes; }
    std::vector<sim_mob::Link*>& getLinksRW() { return links; }

friend class sim_mob::aimsun::Loader;
friend class geo::Links_pimpl;
};

} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:02:54.193

我遇到了同样的问题并追踪了它。在包含或编译器设置`#define final`之前，您的源代码中是否有某个地方？就我而言，这就是问题所在，我在我的类中使用了 C++11 关键字，并且在使用旧编译器时必须定义它们。`boost/multi_index.hpp``-Dfinal``final``override`

`multi_index`或者，也许它是您在某处定义的其他标识符。[您可以按照此处](https://stackoverflow.com/questions/2224334/gcc-dump-preprocessor-defines)所述转储所有定义的宏，并检查禁用其中一个是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T03:39:49.090

我也遇到了类似的问题。

我得到了编译错误

multi_index header_holder 文件。

警告：最后的关键词是废话……废话……

所以我改变了

```
#include <boost/xxxxx> 
```

位置到其他地方。（例如：stdafx.h 等...）试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:32:38.073

我将您的标题修改为如下所示：

```
#pragma once

#include <iostream>
#include <vector>
#include <set>

#include <boost/multi_index_container.hpp> //causing problem!!!!!!!

using boost::multi_index_container;

namespace geo {class Links_pimpl;}
namespace sim_mob
{

//Forward declarations
class Node;
class UniNode;
class MultiNode;
class Point2D;
class Link;

namespace aimsun
{
//Forward declaration
class Loader;
}

//typedef multi_index_container<
//sim_mob::Link,
//    indexed_by<
//      random_access<>,
//            ordered_unique< member<sim_mob::Link, std::string, &sim_mob::Link::linkID> >
//    >
//> Link_m;

class RoadNetwork {
    int drivingSide;
    enum side { DRIVES_ON_LEFT, DRIVES_ON_RIGHT};
public:
    RoadNetwork() { drivingSide=DRIVES_ON_LEFT; } //TEMP

    sim_mob::Node* locateNode(const sim_mob::Point2D& position, bool includeUniNodes=false, int maxDistCM=100) const;
private:
    std::vector<sim_mob::MultiNode*> nodes;
    std::vector<sim_mob::Link*> links;
    std::set<sim_mob::UniNode*> segmentnodes;

    std::vector<sim_mob::MultiNode*>& getNodesRW() { return nodes; }
    std::set<sim_mob::UniNode*>& getUniNodesRW() { return segmentnodes; }
    std::vector<sim_mob::Link*>& getLinksRW() { return links; }

friend class sim_mob::aimsun::Loader;
friend class geo::Links_pimpl;
};

} 
```

然后我将它包含在一个实例化 RoadNetwork 对象的小文件中：

```
#include <iostream>
#include "roadnetwork.hpp"

int main() {
    sim_mob::RoadNetwork roads;
    return 0;
} 
```

这已编译、链接和执行（尽管没有产生输出）。

不完全确定你遇到了什么问题......

# android - 关闭前是否需要检查游标是否为空

> ID：10082575
> 
> 赞同：0
> 
> 时间：2012-04-10T02:57:01.733
> 
> 标签：android, android-contentprovider

我总是这样写代码：

```
Cursor c = getContentResolver().query(uri, 
        PHONE_LOOKUP_PROJECTION, null, null, null);

if (c != null) {
    if (c.moveToFirst()) { 
        bundle.contactId = c.getLong(LOOKUP_ID_COLUMN_INDEX);
        bundle.name = c.getString(LOOKUP_DISPLAY_NAME_COLUMN_INDEX);
    }

    c.close();
} 
```

但是如果有必要检查是否`c`为NULL，我会加倍。因为我觉得值查询返回总是不为空，即使它不包含任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:07:14.237

相信我，如果您想避免将来与光标相关的崩溃，特别是当您对数据源进行请求和数据更新时，您**必须**检查它是否为空（如果可以的话，我会让“必须”发光并跳来跳去） . 你现在做得很好。始终检查 null 并始终检查 moveToFirst() 返回的布尔值。

# php - How to pack a 64bit integer with PHP32?

> ID：10082578
> 
> 赞同：1
> 
> 时间：2012-04-10T02:57:42.863
> 
> 标签：php, 64-bit, pack

I want to use `$_REQUEST` to get a 64-bit integer, but it does not support 64-bit. (It will be turned to a float.) I need to pack this data and send to service. However it should be big endian byte order, so I can't use format `f` (float (machine dependent size and representation)) to pack it.

I tried to break it to four 16-bit integers, but I can't use `<<`,`>>`or `&` because it's a float.

How can I solve this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:01:38.653

Use [`gmp_div_qr()`](http://php.net/manual/en/function.gmp-div-qr.php) with 256 or 65536 multiple times to break it up into 8- or 16-bit chunks, then convert those chunks into strings.

# php - PHP 在尝试包含/需要一个包含/需要另一个脚本的脚本时抛出一个致命错误

> ID：10082579
> 
> 赞同：0
> 
> 时间：2012-04-10T02:57:58.277
> 
> 标签：php, include, xampp, pear, require-once

据我所知，基本上就是这样。我可以包含或 require_once 一个没有包含/require_once 的脚本，但如果是这样，那么 PHP 会抛出这个错误：

> 警告：require_once(../constants/constants.php) [function.require-once]：打开流失败：C:\Home\Workspace\PHP\DD\src\log\test.php 中没有这样的文件或目录在第 7 行
> 
> 致命错误：require_once() [function.require]：在 C 中打开所需的 '../constants/constants.php' (include_path='.;C:\Program Files\Xampp 1.7.7\php\PEAR') 失败： \Home\Workspace\PHP\DD\src\log\test.php 在第 7 行

路径是正确的。我担心我可能弄乱了 Apache Webserver 的一些配置文件（我创建了一个 .htaccess 文件来使用 mod_rewrite 以创建一些更好的 URL）。.htaccess 文件内容就是这样：

> 选项 +FollowSymLinks
> 
> 重写引擎开启
> 
> RewriteRule !.(gif|jpg|png|css)$ index.php

我的 apache 文档根目录是“C:/Home/Workspace/PHP”

**更新**：我发现使用绝对路径有效，如下所示：

> 需要一次 $_SERVER['DOCUMENT_ROOT']."/DD/src/constants/constants.php";

我想我不会使用相对路径，那么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:33:28.750

原因是相对路径来自第一个 require/include 的文件。例如，如果我有一组看起来像这样的文件：

```
|--bar
|   |--foo
|   |   |--foo.php
|   |--bar.php
|--test.php 
```

如果 test.php 有

```
require("./bar/bar.php") 
```

和 bar.php 有

```
require("./foo/foo.php") 
```

那么这将失败，因为相对 URL 必须相对于工作目录（调用 require/include 的顶级文件）。如果我将 bar.php 更改为，`require("./bar/foo/foo.php")`那么程序将成功完成。正如 Basti 所说，确保不会发生这种情况的最佳方法是不使用相对 URL。通常建议使用各种功能`dirname(__FILE__)`，例如构造 URL。

最后一件事，.htaccess 文件中的重写规则不会做任何事情，它只会操纵客户端 URL。我希望这能消除任何困惑。

# javascript - Send a message to a friend, I wonder Javascript API

> ID：10082581
> 
> 赞同：5
> 
> 时间：2012-04-10T02:58:28.050
> 
> 标签：javascript, facebook, facebook-graph-api

I am a developer from the Republic of Korea.

I am currently making Facebook and Twitter-based websites.

I want to use a JavaScript API that can send message to friends,

So I consulted the `iframe` Javascript API methods or using Facebook page looked as sending.

I wonder,

I use to send messages to friends as a Javascript API that provides a?

I do not know English well. So I used Google translator.

Please understand.

`(Edited, fixed some grammar and rewording)`

```
FB.api (path, "post", {

        message: msg,

        caption: "caption caption",

        link: "http://www.naver.com",

        description: "Description Description",

        picture: "http://sstatic.naver.net/search/img3/h1_naver.gif",

        tag: "Tag",

        name: "name names",

        access_token: accessToken

        }, Function (response) {

        if (! response | | response.error){

            alert ("error");

        }

        else{

            alert (response.id);

        }

    }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T04:55:33.047

您想在 Facebook 上向朋友发送消息，或发布到 Facebook 墙上供所有人查看？我将假设在 Facebook 上向朋友发送消息。

**手动的**

如果您想使用 JS SDK 向 Facebook 上的朋友发送消息，请按照以下说明操作：[https ://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)

这不是自动的，仍会显示一个对话框供用户确认。

**自动的**

如果您想通过 Graph API 在后台执行此操作，则不能。这是一个链接，详细解释了为什么你不能和其他选项：[https ://stackoverflow.com/a/4061298/540339](https://stackoverflow.com/a/4061298/540339)

# c++ - 编写函数以在 C++ 中复制链表

> ID：10082586
> 
> 赞同：13
> 
> 时间：2012-04-10T02:58:43.287
> 
> 标签：c++, linked-list

我需要实现一个名为 copyList 的辅助函数，它有一个参数，一个指向 ListNode 的指针。该函数需要返回一个指向原始链表副本的第一个节点的指针。因此，换句话说，我需要在 C++ 中编写一个函数，该函数采用链表的头节点并复制整个链表，返回指向新头节点的指针。我需要帮助来实现这个功能，这就是我现在所拥有的。

```
Listnode *SortedList::copyList(Listnode *L) {

    Listnode *current = L;  //holds the current node

    Listnode *copy = new Listnode;
    copy->next = NULL;

    //traverses the list
    while (current != NULL) {
       *(copy->student) = *(current->student);
       *(copy->next) = *(current->next);

        copy = copy->next;
        current = current->next;
    }
    return copy;
} 
```

此外，这是我正在使用的 Listnode 结构：

```
struct Listnode {    
  Student *student;
  Listnode *next;
}; 
```

注意：我在使用此函数时遇到的另一个因素是返回指向局部变量的指针的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T03:11:08.143

您需要问自己的第一个问题是复制语义是什么。特别是，您使用的是`Student*`as 节点内容。复制节点内容是什么意思？我们应该复制指针以便两个列表指向（共享）相同的学生实例，还是应该执行[深度复制](http://en.wikipedia.org/wiki/Object_copy#Deep_copy)？

```
struct Listnode {    
  Student *student; // a pointer?  shouldn't this be a `Student` object?
  Listnode *next;
}; 
```

您应该问自己的下一个问题是如何为第二个列表分配节点。目前，您仅在副本中分配 1 个节点。

我认为你的代码应该更像：

```
Listnode *SortedList::copyList(Listnode *L) {

    Listnode *current = L;

    // Assume the list contains at least 1 student.
    Listnode *copy = new Listnode;
    copy->student = new Student(*current->student);
    copy->next = NULL;

    // Keep track of first element of the copy.
    Listnode *const head = copy;

    // 1st element already copied.
    current = current->next;

    while (current != NULL) {
       // Allocate the next node and advance `copy` to the element being copied.
       copy = copy->next = new Listnode;

       // Copy the node contents; don't share references to students.
       copy->student = new Student(*current->student);

       // No next element (yet).
       copy->next = NULL;

       // Advance 'current' to the next element
       current = current->next;
    }

    // Return pointer to first (not last) element.
    return head;
} 
```

* * *

如果您更喜欢在两个列表之间共享学生实例，您可以使用

```
copy->student = current->student; 
```

代替

```
copy->student = new Student(*current->student); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T03:08:15.673

这是一个*很好*的问题，因为你自己完成了大部分工作，比大多数“请为我做作业”的问题要好得多。

几点。

首先，如果你传入一个空列表会发生什么？您可能想提前抓住它，然后将一个空列表返回给调用者。

其次，您只分配副本列表中的第一个节点，您需要为原始列表中的每个节点分配一个。

类似于（用于作业的伪代码（但类似于 C++），抱歉）：

```
# Detect empty list early.

if current == NULL:
    return NULL;

# Do first node as special case, maintain pointer to last element
# for appending, and start with second original node.

copy = new node()
last = copy

copy->payload = current->payload
current = current->next

# While more nodes to copy.

while current != NULL:
    # Create a new node, tracking last.

    last->next = new node()
    last = last->next

    # Transfer payload and advance pointer in original list.

    last->payload = current->payload
    current = current->next

# Need to terminate new list and return address of its first node

last->next = NULL
return copy 
```

而且，虽然您不应该返回指向本地堆栈变量的指针是正确的，但这*不是*您正在做的事情。您返回的变量指向*堆分配的*内存，它将在函数退出后继续存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T19:02:05.000

我一直在尝试做同样的事情。我的要求是：

1\. 每个节点都是一个非常基本和简单的类（我离开了结构模型）。
2.我想创建一个深拷贝，而不仅仅是一个指向旧链表的指针。

我选择这样做的方式是使用以下 C++ 代码：

```
template <class T>
Node <T> * copy(Node <T> * rhs)
{
    Node <T> * current = new Node<T>();
    Node <T> * pHead = current;
    for (Node <T> * p = rhs; p; p = p->pNext)
    {
        Node <T> * prev = current;
        prev->data = p->data;
        if (p->pNext != NULL)
        {
            Node <T> * next = new Node<T>();
            prev->pNext = next;
            current = next;
        }
        else
        {
            prev->pNext = NULL;
        }
    }
    return pHead;
} 
```

这很好用，没有错误。因为“头”是一个特例，所以我需要实现一个“当前”指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:07:48.413

说法 `copy->next = current->next` 是错误的。你应该做

```
Create the first node copy here
copy->student = current->student;
copy->next = NULL;
while(current->next!=NULL)
{
    Create new node TEMP here
    copy->next = TEMP;
    TEMP->student = current->student;
    TEMP->next = NULL;
    copy = TEMP;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T03:07:53.653

由于您需要链表的**副本**，因此您需要在遍历原始列表时在循环中创建一个新节点。

```
Listnode *startCopyNode = copy;

while (current != NULL) {
   *(copy->student) = *(current->student);
    copy->next = new Listnode;
    copy = copy->next;
    current = current->next;
}

copy->next = NULL;
return startCopyNode; 
```

记住`delete`链表的节点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T03:10:07.363

@pat，我猜你会得到一个 seg_fault，因为你只创建一次内存。您需要为每个节点创建内存（基本上称为“新”）。找出需要在哪里使用“new”关键字来为所有节点创建内存。

完成此操作后，您需要将其链接到前一个节点，因为它是一个单链表，您需要维护指向前一个节点的指针。如果您想学习并且应该能够记住所有生活，请不要看到上面提到的任何代码。尝试考虑上述因素并尝试提出自己的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T03:15:11.327

正如其他人指出的那样，您需要调用原始列表中`new`的*每个*节点来为副本分配空间，然后将旧节点复制到新节点并更新复制节点中的指针。

> 我在使用此函数时遇到的另一个因素是返回指向局部变量的指针的想法。

您没有返回指向局部变量的指针；当您调用时`new`，您在堆上分配了内存并返回了一个指向该内存的指针（这当然意味着您需要记住`delete`在完成新列表后从函数*外部*调用以释放它）。

# java - 如何尽可能使用 API 级别 8 类，否则什么也不做

> ID：10082591
> 
> 赞同：1
> 
> 时间：2012-04-10T02:59:23.020
> 
> 标签：java, android, reflection

我在我的 Android 应用程序中有一个自定义视图，它使用 ScaleGestureDetector.SimpleOnScaleGestureListener 来检测用户何时想要通过两根手指捏合或捏合来缩放视图。这很好用，直到我尝试在 Android 2.1 设备上进行测试，它立即崩溃，因为它找不到类。

我想在 2.2+ 上支持双指缩放，默认为无双指缩放 <2.1。问题是我不能声明我的：

```
private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener
{
    @Override
    public boolean onScale(ScaleGestureDetector detector)
    {
        MyGameActivity.mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        MyGameActivity.mScaleFactor = Math.max(0.1f, Math.min(MyGameActivity.mScaleFactor, 1.0f));

        invalidate();
        return true; 
    }
} 
```

完全在android <2.1上。有没有一种巧妙的方法可以使用 java 反射来解决这个问题？我知道如何通过反射测试方法是否存在，但是我可以测试一个类是否存在吗？我怎样才能拥有我的

```
private ScaleGestureDetector mScaleDetector; 
```

如果 API 甚至看不到 ScaleGestureDetector 类，在我的类的顶部声明？

似乎我应该能够声明某种内部接口，例如：

```
public interface CustomScaleDetector
{
    public void onScale(Object o);
} 
```

然后以某种方式...*尝试*扩展 ScaleGestureDetector 取决于反射是否告诉您该类是可访问的...

但我不确定从那里去哪里。任何指导或示例代码将不胜感激，如果不清楚我在问什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:05:39.643

好吧，你可以获取`ScaleGestureDetector`源代码并放入你的项目中，将其作为你自己的类，并使用它来代替 system `ScaleGestureDetector`，这样可以避免 android 2.2 及以下版本。

这是`ScaleGestureDetector`源代码： http: [//pastebin.com/r5V95SKe](http://pastebin.com/r5V95SKe)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T03:58:25.003

创建两个类 A 和 B。A 用于 2.2+，B 用于 2.1 或更早版本。

```
if(Build.VERSION.SDK_INT < 8) //2.2 version is 8
{
  Use the class B
}
else
{
 Use class A
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T03:41:02.860

Build.VERSION.RELEASE

使用上面的行来获取设备的操作系统版本。

如果其他情况，您可以有简单的情况。只需检查操作系统版本是否高于 2.2 即可放大缩小。否则使其不放大或缩小。

# c++ - Segfault After Registering Callback Functions

> ID：10082592
> 
> 赞同：1
> 
> 时间：2012-04-10T02:59:28.123
> 
> 标签：c++, segmentation-fault

I am registering four callback functions:

```
glfwSetMouseButtonCallback(procMouseButton);
glfwSetMousePosCallback(procMousePosition);
glfwSetCharCallback(procCharInput);
glfwSetKeyCallback(procKeyInput); 
```

Each callback function looks similar to this:

```
void GLFWCALL procMouseButton(int button, int action) { 
    Input::instance().processMouseButton(button, action); // doesn't do anything yet
} 
```

`Input` is a singleton:

```
Input& Input::instance()
{
    static Input instance;
    return instance;
} 
```

After the callback functions are registered, a segfault occurs. I have narrowed down the problem to two things.

**First:** Excluding any of the process functions causes the segfault to disappear. For example,

```
// this works
glfwSetMouseButtonCallback(procMouseButton);
//glfwSetMousePosCallback(procMousePosition);
glfwSetCharCallback(procCharInput);
glfwSetKeyCallback(procKeyInput);

// this works also
glfwSetMouseButtonCallback(procMouseButton);
glfwSetMousePosCallback(procMouseButton); // exclude procMousePosition
glfwSetCharCallback(procCharInput);
glfwSetKeyCallback(procKeyInput); 
```

**Second:** Segfault occurs when popping or pushing a std::vector declared here in singleton `Engine`:

```
class Engine
{
    public:
        static Engine& instance();

        std::list<GameState*> states;
    private:
        Engine() {}
        Engine(Engine const& copy);
        Engine& operator=(Engine const& copy);
};

// either causes segfault after registering functions
Engine::instance().states.push_back(NULL);
Engine::instance().states.pop_front(); 
```

I am completely baffled. I am assuming the problem is related to [static initialization order fiasco](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.14), but I have no idea how to fix it. Can anyone explain why this error is occurring?

Important notes:

*   If I reverse the linking order, it no longer segfaults.
*   I am using MinGW/GCC for compiling.
*   I am running single threaded.
*   The singletons do not have default constructors, everything is initialized by `Singleton::instance().initialize();`
*   The exact segfault call stack:

```
0047B487    std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*) ()
00000000    0x00401deb in std::list >::_M_insert()
00000000    0x00401dbb in std::list >::push_back()
00401D92    Engine::pushState(GameState*) ()
00404710    StartupState::initialize() ()
00402A11    Engine::initialize() ()
00000000    0x00403f29 in main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:43:29.223

如果没有看到程序的其余部分，很难说它为什么会出现段错误。这听起来与时间有关。您可以尝试以下几件事：

*   在引擎类、输入类（任何其他涉及的类）和回调设置代码的构造函数中放置断点。这将告诉您回调是否在他们使用构造的单例之前注册。请注意，断点可能会影响程序的计时，因此如果一个类首先命中，您可以禁用该断点并重新运行。多次尝试以检查结果是否一致。

*   您是否有理由不能尝试更改指针而不是引用（如“惨败”提及）？

（你在我写这篇文章时的更新使得这部分不是那么有用，因为调用堆栈显示它不在构造函数中。）这听起来像回调在某些类的构造过程中注册。如果是这样的话：

*   你可以移动注册调用，以便它们发生在 main() 下吗？这应该可以让你通过初始化。

*   将类构造分为两个阶段：普通构造函数和 init() 函数。将关键代码放在 init() 中，并在*每个人*都完成构建后调用。

您还可以阻止回调发生，直到以后发生。如果您无法在游戏启动时将回调注册移至稍后的时间，您可以放置​​标志，以便它们在“安全”时间之前不做任何事情。调整此标志*何时启*用可以让您看到“多晚”是“足够晚了”。额外的 if() 开销比崩溃要好。:)

```
volatile bool s_bCallbackSafe = false;    // set this at some point in your game/app

void GLFWCALL procMouseButton(int button, int action) {
    if (s_bCallbackSafe)
        Input::instance().processMouseButton(button, action); // doesn't do anything yet
} 
```

# android - 处理片段菜单选项

> ID：10082594
> 
> 赞同：3
> 
> 时间：2012-04-10T03:00:38.790
> 
> 标签：android, menu, android-fragments

我有两个片段，一个是 ListView，一个是“详细信息”视图。每个片段都有自己的菜单选项。在显示两个片段的横向模式下，每个菜单都合并为一个（我假设这是设计使然），但如果我将设备旋转到纵向，菜单保持合并，并显示不应该的选项在那里。不确定我是否需要在我的问题中包含任何代码。

编辑：

找到这个[问题](https://stackoverflow.com/questions/8472776/fragments-with-the-same-menu-on-the-same-layout-cause-duplicated-menuitem)，但添加 menu.clear() 仅显示详细信息视图的菜单选项，当处于横向并改回纵向时，菜单不会改变。

我想更大的问题是如何处理片段，每个片段都有自己的一组菜单选项。

更新：

需要明确的是，如果设备处于纵向或横向模式，菜单可以正常工作。从横向旋转到纵向时会出现此问题，反之亦然。`onCreateOptionsMenu`即使被调用，菜单似乎也不会重置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:46:50.167

我是新来的，所以很抱歉，如果我没有将所有内容都格式化为一流的。我也有关于菜单贡献和`Fragment`s 的类似问题。这是我在我的例子中所做的......

我有一个`FragmentActivity`托管一个`ListFragment`和一个附加`Fragment`的包含所选列表项的详细信息 - 非常典型的平板电脑配置。在选择列表项之前不会添加此附加详细信息`Fragment`...当我选择列表项时，我想阻止`ListFragment`s 菜单项对托管`FragmentActivity`操作栏做出贡献。（从 UI 的角度来看，用户主要关注的是新添加的 Fragment，要返回到之前的状态，他们会取消选择他们选择的项目。）由于不`ListFragment`应该知道其他 Fragment 以确保可重用性，我发现利用该`onPrepareOptionsMenu(..)`方法这个`FragmentActivity`水平对我来说是正确的前进方向。

将这段代码添加到托管`FragmentActivity`中，以快速获得您想要的行为；

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
 if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
   // 'Find' the menu items that should not be displayed - each Fragment's menu has been contributed at this point. 
   menu.findItem(id.sync).setVisible(false);
 }
return super.onPrepareOptionsMenu(menu);
} 
```

这种方法意味着您的 Fragment 仍然可以重用（它们仍然按照最初的设计进行贡献），但是您的主机`FragmentActivity`可以操作 Activity UI，这是它的授权角色之一。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:37:56.600

想通了这个问题，如果你正在使用`setRetainInstance(true)`那么菜单不会刷新。不幸的是，在改变方向时，删除这个中断其他东西，比如我的 AsyncTask 会被杀死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T02:16:31.847

由于您希望每次方向更改时都将膨胀的菜单刷新到操作栏尝试声明您在清单中的活动持有片段以侦听配置更改

然后重写 onConfigurationChanged 方法，并使用 invalidateOptionMenu API 看到这个链接：

活动无效选项菜单：

[http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29)

如果这对您有帮助，请将此帖子标记为答案。

谢谢。

# java - Java : Components position

> ID：10082601
> 
> 赞同：0
> 
> 时间：2012-04-10T03:01:32.973
> 
> 标签：java, swing, user-interface, awt

I am trying to place the components in the panel like this:

![sample of desired layout](../Images/0320e433119e8105a9d5cc57437377cf.png)

but in my code, it looks like this:

![actual layout](../Images/976fc109ab443c02f21dfae12dfe0df2.png)

I have tried without `FlowLayout` but the problem is the same. When I max the window size then it displays in a row, but when I try to resize the window size, components are out from border.

Will you please help me to resolve this issue? Here is my code:

```
 CNameLabel=new JLabel("Customer Name");

    CNameTextField = new JTextField (20); // create the Customer Name text field
    CNameTextField.setEditable(true);     // set editable text box

    CIDLabel=new JLabel("Customer ID");

    C_IDTextField = new JTextField (10);
    C_IDTextField.setEditable(true);      // set editable text box

    // Creating and populating the Top Panel 
```

The code below is for creating the panel, setting the border of the panel, and setting the flowlayout for the components:

```
 topPanel=new JPanel();
     topPanel.setLayout(new FlowLayout());
     topPanel.setBorder(new TitledBorder(new EtchedBorder(), "Customer Data"));
     topPanel.add(CNameLabel); topPanel.add(CNameTextField); topPanel.add(CIDLabel);
     topPanel.add(C_IDTextField);

     roomTypeLabel=new JLabel ("Room Type ");

        //Create and populate Room type combo box
        roomTypeCombo = new JComboBox();
        roomTypeCombo.addItem( "Budget($50)" );
        roomTypeCombo.addItem( "Standard($75)" );
        roomTypeCombo.addItem( "Executive($200)" );
        roomTypeCombo.addItem( "Luxury($400)" );

        mealLabel=new JLabel ("Meal ");

        //Create and populate Meal type combo box
        mealCombo = new JComboBox();
        mealCombo.addItem( "None" );
        mealCombo.addItem( "Breakfast Only($10)" );
        mealCombo.addItem( "Any Two($30)" );
        mealCombo.addItem( "All Three($50)" );

        daysLabel=new JLabel ("Days");

        //Create and populate Days combo box

        daysCombo = new JComboBox();

        for(int i=0;i<31 ; i++)
                {

         daysCombo.addItem(i); // populate combobox with days

            }

       //Adding components to top panel

        topPanel.add(roomTypeLabel);
        topPanel.add(roomTypeCombo);
        topPanel.add(mealLabel);
        topPanel.add(mealCombo);
        topPanel.add(daysLabel);
        topPanel.add(daysCombo); 
```

I have just skip the packages and declaration of the components. the program is running in fine condition

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:46:00.047

最后你可能需要调用 pack() ......我想如果你想在换行符中输入房间类型而不是你需要使用 gridlayout 但最后忘记调用 pack() 。

# php - PHP：如何创建一个链接到我的搜索脚本的搜索表单

> ID：10082607
> 
> 赞同：2
> 
> 时间：2012-04-10T03:02:13.767
> 
> 标签：php, forms, search

我有一个 PHP 搜索脚本，我对它稍作改动，对我来说效果很好。但是有一部分我不确定该怎么做，那就是将脚本链接到用户可以完成的搜索表单。

脚本如下，它在文本文件中搜索关键词。目前“关键词”直接输入到脚本中。但这对访问我网站的人来说并不好——所以我想创建一个搜索表单。但不确定我是否应该使用 POST 或 GET 或其他东西。而且我不知道如何将代码从表单链接到下面的脚本。我已经搜索了相当长的时间来找到它，但看不到任何覆盖它的东西，而且我试图让它连接起来并不顺利。如果有人可以提供帮助，将不胜感激。

（从 Lekensteyn 借来的原始代码 - [https://stackoverflow.com/a/3686246/1322744](https://stackoverflow.com/a/3686246/1322744)（谢谢））

```
<?php
$file = 'users.txt';
$searchfor = 'entersearchterm';

$contents = file_get_contents($file);
$pattern = preg_quote($searchfor, '/');
$pattern = "/^.*$pattern.*\$/m";

if(preg_match_all($pattern, $contents, $matches)){
   echo "Found matches:<br />";
   echo implode("<br />", $matches[0]);
}
else{
   echo "No matches found";
fclose ($file); 
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:07:00.597

**代码（一个粗略的想法）：**

```
<html>
      <head><title>Search Form</title></head>
      <body>
            <form action="search.php" method="GET">
                   <input type="text" name="keyword" id="keyword width="50" value="" />
                   <input type="submit" value="Search"/>
            </form>
      </body>
</html> 
```

**并从您的 PHP 脚本中获取关键字，如下所示：**

```
<?php
// script.php

$searchfor = $_GET['keyword'];

$file = 'users.txt';

$contents = file_get_contents($file);
$pattern = preg_quote($searchfor, '/');
$pattern = "/^.*$pattern.*\$/m";

if(preg_match_all($pattern, $contents, $matches)){
   echo "Found matches:<br />";
   echo implode("<br />", $matches[0]);
}
else{
   echo "No matches found";
fclose ($file); 
}
?> 
```

# java - Java / Eclipse (WindowBuilder plugin) - how do I effectively use Swing Actionlisteners?

> ID：10082608
> 
> 赞同：2
> 
> 时间：2012-04-10T03:02:14.587
> 
> 标签：java, eclipse, windowbuilder

My question is specific to Eclipse and the Swing WindowBuilder plugin.

To make simple Swing apps I normally create a class and extend a JFrame. I make my Swing components private class variables. This allows me to add an Actionlisteners and access the swing components in actionPerformed(), like this:

```
public class MyClass() extends JFrame implements ActionListener {
    private JButton btnClickMe = new JButton("Click me");

    public MyClass() {
        super("title");
        this.setLayout(null);
        btnClickMe.setBounds(1,1,100,100);
        this.add(btnClickMe);
        btnClickMe.addActionListener(this);
        this.setVisible(true);
    }

    public void actionPerformed(ActionEvent event) {
        Object source = event.getSource();
        if(source == btnClickMe) { // do something }
    }

    public static void main(String[] args) {
        new MyClass();
    }
} 
```

By default the WindowBuilder plugin create Swing component variables I guess in what would be considered the constructor (public MyClass()), rather than private class variables. As a result due to scope I am not able to use ActionListeners the way I am used to since the Swing variables are not visible to actionPerformed().

Can anyone advise how this can be overcome?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:04:56.173

What's stopping you from refactoring those local variables to fields? One of the best things about WindowBuilder is able to parse hand written code to some extent.

Besides, there's a configuration option in Window Builder to create field variables for controls. Look in Eclipse, `Preferences->WindowBuilder->Swing->Code generation` ;)

# c# - Can't get column types from database

> ID：10082609
> 
> 赞同：2
> 
> 时间：2012-04-10T03:02:28.593
> 
> 标签：c#, mysql, database, visual-studio, odbc

Here's some code:

```
OdbcConnection connection = new OdbcConnection(@"DRIVER={MySQL ODBC 5.1 Driver};SERVER=" + ip + ";DATABASE=db_name;USER=user;PASSWORD=" + dbPw + ";");
connection.Open();

string queryString = query;
OdbcCommand command = new OdbcCommand(queryString);

command.Connection = connection;
OdbcDataReader myReader = command.ExecuteReader();
int fieldsN = myReader.FieldCount;

StringBuilder sb = new StringBuilder();

while (myReader.Read())
{
    for (int i = 0; i < fieldsN; i++ )
    {
        sb.Append(myReader.GetString(i) + " ");
    }
    sb.Append(", ");
}

connection.Close();

//Console.WriteLine(sb.ToString()); 
```

This code works fine with queries like "SELECT * FROM some_table" or "SELECT (something, something_else) FROM some_table."

However it fails when I use "SHOW COLUMNS FROM some_table."

Here's the error I get:

> Unable to cast object of type 'System.DBNull' to type 'System.String'.

This error happens somewhere in the myReader.GetString() line.

I've tried creating an if statement that checks if myReader.GetString(i) is System.DBNull to no avail. Whatever I do it always errors out. I don't understand what is going on.

Thanks for any help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:07:45.293

You need to check for the DBNull before you call GetString(). [See this answer.](https://stackoverflow.com/questions/1855556/datareader-best-practices)

```
if (!myReader.IsDBNull(i))
    sb.Append(myReader.GetString(i)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:07:47.313

Generally, you need to pay attention to values of nullable columns. DB signals that the returned value is `null` by returning a special object called `DBNull`. You cannot cast it to `string` or anything else, so your code should check for null by using [`IsDBNull`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx) like this:

```
if (!myReader.IsDBNull(i)) {
    sb.Append(myReader.GetString(i) + " ");
} 
```

# facebook - Facebook batch calls with JSONP

> ID：10082618
> 
> 赞同：1
> 
> 时间：2012-04-10T03:04:23.397
> 
> 标签：facebook, api, batch-file, jsonp

As of 10.04.2012, There is a short paragraph in the [Facebook developer document for 'batch request'](http://developers.facebook.com/docs/reference/api/batch/) entitled: **Batch calls with JSONP**, which reads:

```
"The Batch API supports JSONP, just like the rest of the Graph API - 
 the JSONP callback function is specified using the 'callback' query string 
 or form post parameter." 
```

I thought that meant you can also do a batch request using JSONP from Javascript (which will be a GET request, as JSONP works only as a GET request), so I tried that, with adding a 'batch' parameter (containing objects describing requests for batch as in the doc) to the query string.
Response from FB server was:

```
Only POST is allowed for batch requests 
```

So, questions:
1\. What did they mean in that paragraph?
2\. Is there a way to do an asynchronous batch request from Javascript?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:02:34.797

我也一样。示例代码是

```
jQuery.support.cors = true;     
var AjaxRequest = jQuery.ajax( {
  url: "http://graph.facebook.com/",
  type: "POST",
  contentType: "application/x-www-form-urlencoded",
  data: { "access_token": AccessToken, "batch": BatchRequest },
  dataType: "jsonp",
  error: function( jqXHR, textStatus, errorThrown ) {
    ... show error stuff
    },
  success: function( Return, textStatus, jqXHR ) {
    showLog( "Return " + JSON.stringify( Return ) );
    showLog( "textStatus " + textStatus );
    showLog( "jqXHR " + JSON.stringify( jqXHR ) );
    if ( Return.error ) {
      ... go away
      }
    else {
      ... use the data
      }
    }
  } ); // eo ajax request 
```

这使

```
Return {"error":3,"error_description":"Only POST is allowed for batch requests"}
textStatus success
jqXHR {"readyState":4,"status":200,"statusText":"success"} 
```

即它成功地发回了一条错误消息。JSONP 将 POST 类型转换为 Facebook 不支持的 GET...

要回答 qu.2，您可以使用 FB.api 在 javascript 中执行异步批处理请求。我正在尝试 JSONP，因为 IE8 一直在使用 FB.api 从 Facebook 返回。

# java - Java 方法注释如何与方法覆盖结合使用？

> ID：10082619
> 
> 赞同：74
> 
> 时间：2012-04-10T03:04:24.497
> 
> 标签：java, inheritance, annotations, overriding

我有一个父类`Parent`和一个子类`Child`，定义如下：

```
class Parent {
    @MyAnnotation("hello")
    void foo() {
        // implementation irrelevant
    }
}
class Child extends Parent {
    @Override
    foo() {
        // implementation irrelevant
    }
} 
```

如果我获得`Method`参考`Child::foo`，`childFoo.getAnnotation(MyAnnotation.class)`会给我`@MyAnnotation`吗？还是会`null`？

我对注解如何或是否与 Java 继承一起工作更感兴趣。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-10T03:10:21.837

[从http://www.eclipse.org/aspectj/doc/released/adk15notebook/annotations.html#annotation-inheritance](http://www.eclipse.org/aspectj/doc/released/adk15notebook/annotations.html#annotation-inheritance)逐字复制：

> **注释继承**
> 
> 了解与注释继承相关的规则很重要，因为这些规则与基于注释存在或不存在的连接点匹配有关。
> 
> 默认情况下，注释不会被继承。给定以下程序

```
 @MyAnnotation
        class Super {
          @Oneway public void foo() {}
        }

        class Sub extends Super {
          public void foo() {}
        } 
```

> 然后`Sub`没有`MyAnnotation`注释，`Sub.foo()`也不是`@Oneway`方法，尽管它覆盖了`Super.foo()`which is。
> 
> 如果注解类型具有元注解`@Inherited`，则类上该类型的注解将导致该注解被子类继承。所以，在上面的例子中，如果`MyAnnotation`类型有`@Inherited`属性，那么`Sub`就会有`MyAnnotation`注解。
> 
> `@Inherited`当用于注释类型以外的任何内容时，注释不会被继承。实现一个或多个接口的类型永远不会从它实现的接口继承任何注释。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-20T13:20:44.013

您已经找到了答案：JDK 中没有方法注释继承的规定。

但是爬上超类链来寻找带注释的方法也很容易实现：

```
/**
 * Climbs the super-class chain to find the first method with the given signature which is
 * annotated with the given annotation.
 *
 * @return A method of the requested signature, applicable to all instances of the given
 *         class, and annotated with the required annotation
 * @throws NoSuchMethodException If no method was found that matches this description
 */
public Method getAnnotatedMethod(Class<? extends Annotation> annotation,
                                 Class c, String methodName, Class... parameterTypes)
        throws NoSuchMethodException {

    Method method = c.getMethod(methodName, parameterTypes);
    if (method.isAnnotationPresent(annotation)) {
        return method;
    }

    return getAnnotatedMethod(annotation, c.getSuperclass(), methodName, parameterTypes);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-08T13:07:00.160

使用 Spring Core 你可以解决

[AnnotationUtils.java](http://docs.spring.io/spring-framework/docs/3.2.x/javadoc-api/org/springframework/core/annotation/AnnotationUtils.html#findAnnotation(java.lang.reflect.Method,%20java.lang.Class))

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-24T17:08:49.483

虽然所问问题的答案是 Java`Method.getAnnotation()`不考虑被覆盖的方法，但有时找到这些注释很有用。这是我目前正在使用的 Saintali 答案的更完整版本：

```
public static <A extends Annotation> A getInheritedAnnotation(
    Class<A> annotationClass, AnnotatedElement element)
{
    A annotation = element.getAnnotation(annotationClass);
    if (annotation == null && element instanceof Method)
        annotation = getOverriddenAnnotation(annotationClass, (Method) element);
    return annotation;
}

private static <A extends Annotation> A getOverriddenAnnotation(
    Class<A> annotationClass, Method method)
{
    final Class<?> methodClass = method.getDeclaringClass();
    final String name = method.getName();
    final Class<?>[] params = method.getParameterTypes();

    // prioritize all superclasses over all interfaces
    final Class<?> superclass = methodClass.getSuperclass();
    if (superclass != null)
    {
        final A annotation =
            getOverriddenAnnotationFrom(annotationClass, superclass, name, params);
        if (annotation != null)
            return annotation;
    }

    // depth-first search over interface hierarchy
    for (final Class<?> intf : methodClass.getInterfaces())
    {
        final A annotation =
            getOverriddenAnnotationFrom(annotationClass, intf, name, params);
        if (annotation != null)
            return annotation;
    }

    return null;
}

private static <A extends Annotation> A getOverriddenAnnotationFrom(
    Class<A> annotationClass, Class<?> searchClass, String name, Class<?>[] params)
{
    try
    {
        final Method method = searchClass.getMethod(name, params);
        final A annotation = method.getAnnotation(annotationClass);
        if (annotation != null)
            return annotation;
        return getOverriddenAnnotation(annotationClass, method);
    }
    catch (final NoSuchMethodException e)
    {
        return null;
    }
} 
```

# python - Struct.Error, Must Be a Bytes Object?

> ID：10082623
> 
> 赞同：9
> 
> 时间：2012-04-10T03:05:09.817
> 
> 标签：python, python-3.x

I am attempting to execute the code:

```
 values = (1, 'ab', 2.7)    
    s.struct.Struct('I 2s f')
    packed = s.pack(*values) 
```

But I keep getting the error:

```
 Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
    struct.error: argument for 's' must be a bytes object 
```

Why? How do I fix this?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-10T03:09:16.047

在 Python 3 中，`'ab'`不是`bytes`对象，在 Python 2 中称为 a `str`，它是`unicode`. 你需要使用：

```
values = (1, b'ab', 2.7) 
```

它告诉 Python 这`'ab'`是一个字节文字。有关详细信息，请参阅[PEP 3112](http://www.python.org/dev/peps/pep-3112/)。

# objective-c - 如何在 Objective-C 中清除控制台

> ID：10082625
> 
> 赞同：8
> 
> 时间：2012-04-10T03:05:28.990
> 
> 标签：objective-c, macos, cocoa, console, console-application

我在 Objective-C 中制作了一个基于控制台的应用程序，它依赖于能够定期**清除控制台。**如何才能做到这一点？我在 SO 和 Google 上看到的只是让开发人员使用 X-Code 清除控制台的方法，但那是*行不通*的。

我在 Yahoo! 上找到的一种解决方案！答案告诉我执行以下操作，但由于找不到文件而无法运行：

```
NSTask *task;
task = [[NSTask alloc]init];
[task setLaunchPath: @"/bin/bash"];

NSArray *arguments;
arguments = [NSArray arrayWithObjects: @"clear", nil];
[task setArguments: arguments];

[task launch];
[task waitUntilExit]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T03:09:05.260

**尝试使用：**

```
system( "clear" ); 
```

**重要标题：**

```
#include <stdlib.h> 
```

* * *

***提示：*** *Objective-C 仍然是 C，对吧？*

* * *

**更新 ：**

* * *

*在**“未设置 TERM 环境变量”的情况下。**错误 ：*

1）直接从您的终端运行程序（或者在 Xcode 中测试它时忽略错误；无论如何它应该在普通终端中运行，对吧？）

2) 在您的方案设置中设置 TERM 变量。到什么？只需在终端中运行它，看看“TERM”应该是什么：

```
DrKameleons-MacBook-Pro:Documents drkameleon$ echo $TERM
xterm-256color 
```

* * *

![在此处输入图像描述](../Images/0dfcc8bc21f1c66bbaebffcaf8a10711.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T03:47:08.750

在不产生子进程的情况下执行此操作的方法是使用 ncurses。

```
#include <curses.h>
#include <term.h>
#include <unistd.h>

int main(void)
{
    setupterm(NULL, STDOUT_FILENO, NULL);
    tputs(clear_screen, lines ? lines : 1, putchar);
} 
```

用 编译`-lncurses`。

`setupterm()`呼叫只需进行一次。之后，使用`tputs()`呼叫清除屏幕。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T03:09:22.990

为什么`/bin/bash`？

做就是了：

```
NSTask *task = [NSTask launchedTaskWithLaunchPath:@"/usr/bin/clear" arguments:[NSArray array]]; 
```

或者，使用 C 方式：

```
#include <stdlib.h>

...
system("/usr/bin/clear");
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T06:08:52.980

你可以使用苹果脚本

```
tell application "Console"
    activate
    tell application "System Events"
        keystroke "k" using command down
    end tell
end tell 
```

使用 NSAppleScript 类从 obj-C 程序执行 applescript。

```
NSAppleScript *lClearDisplay = [[NSAppleScript alloc] initWithSource:@"tell application \"Console\"\n \
                                activate\n \
                                tell application \"System Events\"\n \
                                keystroke \"k\" using command down\n \
                                end tell\n \
                                    end tell "];
NSDictionary *errorInfo;
[lClearDisplay executeAndReturnError:&errorInfo]; 
```

**注意：**
如果 Apple 更改或删除 ⌘k 作为清除显示的关键命令，这将破坏脚本。

# emacs - 编译时在 Emacs 中查找缓冲区文件名

> ID：10082630
> 
> 赞同：1
> 
> 时间：2012-04-10T03:06:26.727
> 
> 标签：emacs

我正在尝试设置 Emacs，以便当我在菜单中选择“Compile..”时，Emacs 在命令行上执行“make filename”。我正在尝试类似的东西：

```
(setq compile-command (concat "make " (file-name-sans-extension
                                       buffer-file-name))) 
```

但它不起作用 - 看起来 Emacs 正在为`*scratch*`缓冲区寻找一个文件名，但它没有。有谁知道如何解决这一问题？

谢谢。

更新：正如 Cheeso 所建议的，一个钩子解决了这个问题。这是一个适合我的版本：

```
(defun cur-file ()
  (file-name-sans-extension
   (file-name-nondirectory (buffer-file-name (current-buffer)))))

(add-hook 'c++-mode-hook
          (lambda()
            (set (make-local-variable 'compile-command)
                 (concat "make " (cur-file))))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:23:06.987

是的 - 给你几个选择。

*   **很简单**：定义一个[文件局部变量](http://www.gnu.org/software/emacs/manual/html_node/elisp/File-Local-Variables.html)。在文件的标题注释中只包含类似

    ```
     // -*- compile-command: "gcc -Wall -O3 -o f file.c" -*- 
    ```

    有关更多详细信息，请参阅： [https ://stackoverflow.com/a/4540977/48082](https://stackoverflow.com/a/4540977/48082)

*   **更详细-**[在 marmalade repo 上](http://marmalade-repo.org/packages/smarter-compile/2012.4.9)有一个名为`smarter-compile.el`available的模块。它允许您定义一些规则来猜测特定缓冲区的使用。就像，如果有一个makefile，使用MAKE；否则，如果文件是 .c 文件，则使用 gcc；等等`compile-command`

    如果您不想在每个文件中插入注释，或者如果您有无数不同类型的文件和项目正在处理，这很好。

ps：`setq`我猜你的简单不起作用的原因是你没有在正在编辑的缓冲区中评估它。可能您想将其放入您的个人`xxxx-mode-hook-fn`xxx 中，其中 xxx 是您正在编辑的文件的模式。

# jquery - Day and month are being swapped on date property when saving entity on production server

> ID：10082633
> 
> 赞同：4
> 
> 时间：2012-04-10T03:06:52.773
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui-datepicker

I'm running into an issue on a clients production server where the month & day is being swapped on a view model property when saving an entity. For example if I were to select `April 9th 2012 (04/09/2012)` within the datepicker the date is being saved as `September 4th 2012 (09/04/2012)`.

The same controller actions are working correctly on local development / test server and I'm unsure of what to look at next?

*The property in the viewmodel*:

```
[DisplayName("Date")]
[Required]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:MM/dd/yy}")]
[DataType(DataType.Date)]
public DateTime StartDate { get; set; } 
```

*The helper within the relevant view*:

```
@Html.EditorFor(model => model.StartDate) 
```

*The jquery ui datepicker*:

```
$('#StartDate').datepicker({ dateFormat: 'mm/dd/yy' }); 
```

*The stripped down version of the controller*:

```
public ActionResult Create(BulletinBoardViewModel bulletin)
{
    var model = AutoMapper.Mapper.Map<BulletinBoardViewModel, BulletinBoard>(bulletin);
    _repository.Save(model);

    return RedirectToAction("Index");
} 
```

*The headers of the related post*:

```
StartDate:04/09/2012

Cache-Control:private, s-maxage=0
Content-Length:131
Content-Type:text/html; charset=utf-8
Date:Tue, 10 Apr 2012 02:43:16 GMT
Location:/BulletinBoard
Server:Microsoft-IIS/7.5
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0
X-Powered-By:ASP.NET 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:49:51.597

听起来客户端的服务器设置为英国英语而不是美国。这是一个常见的 CultureInfo 问题。无论哪种方式，当对象被持久化时，日期值应该仍然是正确的。由于 UI 文化选择，它只是以不同的方式显示。

你能识别出这是一个实际问题的特定代码，而不仅仅是一个明显的问题吗？

此外，它实际上并没有被保存为 9 月 4 日。你就是这么读的。尝试挑选，例如，12 月 31 日。保存实体后，您可能会看到 2012 年 12 月 31 日。服务器只是以 dd/MM/yyyy 格式显示日期。

# android - 通过 Android 使用 .NET Web 服务

> ID：10082641
> 
> 赞同：0
> 
> 时间：2012-04-10T03:07:51.313
> 
> 标签：android, web-services, ksoap2

我浏览了很多关于使用 android 使用 .net Web 服务的文章，但似乎我无法让它工作。

*   我已经下载了**“ksoap2-android-assembly-2.6.2-jar-with-dependencies”** 并将其作为外部 jar 添加到我当前的项目中。

*   我已经将 **uses-permission android:name="android.permission.INTERNET"**放在清单文件中。

当我调试程序并调用该函数时，应用程序说“应用程序*** (*** ) 已意外停止。请重试。”

我究竟做错了什么？这是我的代码：

```
private static final String NAMESPACE = "http://epson.com.ph/";
private static final String SOAP_ACTION = "http://epson.com.ph/TheMessage";
private static final String METHOD_NAME = "TheMessage";
private static final String URL = "http://10.0.2.2/DataAccess.asmx";

private void getData(){ 
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    //request.addProperty("selectStatement", "SELECT * FROM ALLDETAILS");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.dotNet=true; 
    envelope.setOutputSoapObject(request); 

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL); 
    TextView tv = (TextView)findViewById(R.id.txtPreview); 

    try { 
        androidHttpTransport.call(SOAP_ACTION, envelope); 
        Object result = (Object)envelope.getResponse();

        tv.setText(result.toString()); 
    } catch (Exception ex) { 
        messageBox(ex.getMessage()); 
        } 
} 
```

logcat 错误是：

```
04-10 11:04:46.156: E/AndroidRuntime(332): FATAL EXCEPTION: main
04-10 11:04:46.156: E/AndroidRuntime(332): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
04-10 11:04:46.156: E/AndroidRuntime(332):  at my.WSCA.WebServiceConsumptionActivity.getData(WebServiceConsumptionActivity.java:53)
04-10 11:04:46.156: E/AndroidRuntime(332):  at my.WSCA.WebServiceConsumptionActivity.access$0(WebServiceConsumptionActivity.java:52)
04-10 11:04:46.156: E/AndroidRuntime(332):  at my.WSCA.WebServiceConsumptionActivity$1.onClick(WebServiceConsumptionActivity.java:42)
04-10 11:04:46.156: E/AndroidRuntime(332):  at android.view.View.performClick(View.java:2485)
04-10 11:04:46.156: E/AndroidRuntime(332):  at android.view.View$PerformClick.run(View.java:9080)
04-10 11:04:46.156: E/AndroidRuntime(332):  at android.os.Handler.handleCallback(Handler.java:587)
04-10 11:04:46.156: E/AndroidRuntime(332):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-10 11:04:46.156: E/AndroidRuntime(332):  at android.os.Looper.loop(Looper.java:123)
04-10 11:04:46.156: E/AndroidRuntime(332):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-10 11:04:46.156: E/AndroidRuntime(332):  at java.lang.reflect.Method.invokeNative(Native Method)
04-10 11:04:46.156: E/AndroidRuntime(332):  at java.lang.reflect.Method.invoke(Method.java:507)
04-10 11:04:46.156: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-10 11:04:46.156: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-10 11:04:46.156: E/AndroidRuntime(332):  at dalvik.system.NativeStart.main(Native Method) 
```

请帮助我，我需要尽快完成这项工作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T02:38:21.657

谢谢大家的回复，我已经有了解决办法。就像弗兰肯斯坦所说的那样，他给出的链接上的情况略有相同。

我在项目上放了一个**libs**文件夹并导入 ksoap jar。我只是想知道，为什么 libs 文件夹不会自动包含在每个项目中，如果我用不同的文件夹名称命名它，解决方案是否会起作用。

# data-structures - 如何在 hbase 上存储图表并运行页面排名，如分析？

> ID：10082648
> 
> 赞同：3
> 
> 时间：2012-04-10T03:08:30.047
> 
> 标签：data-structures, graph, hadoop, graph-theory, hbase

抱歉，如果这个问题看起来有点复杂，但我认为这都是相关的，所以我想尝试一下子得到答案。基本上我有一个分层图*，它有各种数据集，它们只连接到下一组数据（所以 set1 的顶点与 set2 有边，依此类推，但 set1 没有任何东西连接到 set3 或除了 set2 之外的任何东西.这可能是相关的不确定）。通常，您可以将我的数据视为一个庞大的家谱（每个集合我添加大约十亿个节点），我会不断加载每个新集合的新一代（家庭创建新家庭并且没有边缘向后退）。

我有一个 Hbase/hadoop 系统正在运行，我知道如何使用 java 添加列和值，但我不知道该怎么做：

1.  以图形类型格式将数据添加到 hbase（因为它是 hbase，我想以一种可以添加大量数据并且它会扩展的方式加载它......不像其他将图形限制为系统大小的数据库） . 我知道如何添加数据，但不明白如何以可扩展的图形方式添加数据。
2.  加载图表后，我想知道如何对其应用某种分析。Pagerank 很受欢迎，所以我想我会这么说，但几乎所有基于处理图形的东西。

我想问这个问题的简化方法是我如何专门将一个图表放入 hbase，一旦它在那里，我该如何分析它？有教程吗？互联网上有很多 hbase 信息（我阅读了 hbase 书），但我找不到任何特定于图表的信息。我找到[了 giraph](http://incubator.apache.org/giraph/)，但我认为它不能连接到 hbase（还）。看到 hadoop/hbase 是 mapreduce/bigtables 的版本，我怀疑有一种方法可以处理图表，我只是没有运气找到任何东西。

*分层图是具有不同顶点集的级别的有向图，如下所示：[http ://en.wikipedia.org/wiki/Layered_graph_drawing](http://en.wikipedia.org/wiki/Layered_graph_drawing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:51:15.840

我认为这个关于 SO 的问题可能会有所帮助：

[https://stackoverflow.com/questions/9865738/is-it-possible-to-store-graphs-hbase-if-so-how-do-you-model-the-database-to-sup/9867563#9867563](https://stackoverflow.com/questions/9865738/is-it-possible-to-store-graphs-hbase-if-so-how-do-you-model-the-database-to-sup)

我对这个问题的回答的这一部分可能有用。

> 使用 HBase/Accumulo 作为 Giraph 的输入最近（2012 年 3 月 7 日）作为对 Giraph 的新功能请求提交：[HBase/Accumulo 输入和输出格式](https://issues.apache.org/jira/browse/GIRAPH-153)(GIRAPH-153)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:53:33.627

我们这样使用giraph，它只存储每个顶点的最小数据，然后用giraph运行图算法，然后我们用pig将结果与丰富的数据组装在一起，对于page rank算法，每个顶点只需要存储顶点id，排名，因此它可以扩展到近十亿的水平。

# bash - 似乎无法更改 OSX Lion 终端中的默认编辑器

> ID：10082650
> 
> 赞同：0
> 
> 时间：2012-04-10T03:08:52.933
> 
> 标签：bash, terminal, osx-lion

我似乎无法更改 OSX Lion 终端中的默认 bash 编辑器。

我试过设置：

```
export EDITOR='<editor symlink with parameter>' 
```

在 ~/.bashrc 和 ~/.bash_profile 中。符号链接是 subl，参数是 -w。根据提示，它是：

```
subl -w 
```

我每次输入后都重新启动了终端：

```
edit test-file.md 
```

它会打开 TextWrangler（不是我设置的编辑器）。我试过从命令行打开符号链接没有问题。我意识到我可能应该习惯于输入符号链接，但我的肛门想知道为什么我不能设置默认编辑器。

对于这个小问题的任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:16:20.437

我什至不确定编辑命令是什么。我的 Mac OS X Lion 上没有。不管它是什么，听起来它都会忽略 EDITOR 环境变量并使用您的 MacOS X 应用程序设置。你想要的可以通过 alias shell 命令来完成：

```
alias edit=/path/to/vim 
```

# c++ - C++ 包含头文件

> ID：10082657
> 
> 赞同：0
> 
> 时间：2012-04-10T03:09:52.977
> 
> 标签：c++, header, declaration

所以，我有一个问题：

A类需要了解B类，B类需要了解C，C类需要了解A。它本质上是一个圆圈，所以我得到定义错误。我尝试了前向声明，但无论顶部是什么，都不知道底部还有什么。

遇到这样的情况我该怎么办？

谢谢

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:47:51.147

假设这很简单，Adam Mihalcin 上面的评论是正确的，因为类似的问题回答了它。但无论如何我都会把它编码出来。

假设你有这个（方法定义无关紧要）：

```
class A
{
    B* ptrB;
}

class B
{
    C* ptrC;
}

class C
{
    A* ptrA;
} 
```

然后，正如 Adam 所链接的那样，您可以像这样对所有 3 个进行 forward-delcare：

```
class A;
class B;
class C; 
```

并将该块放在所有 3 个之上。但这里重要的是，这是当有*指向*其他类的指针时，而不是它们作为类的一部分的组合。您可以使用前向声明来允许在处理指针时正确编译，但不能在处理其他数据类型时正确编译。所以如果有这个：

```
class D
{
    B myB;
} 
```

在其他一切与上述相同的情况下，您需要将 B 的“真实”定义置于 D 的“真实”定义之上。但其余部分可能相同。前向声明仅对指针“有效”。

你必须在某个地方用一个指针打破你的依赖循环。如果从来没有指针，那么数据结构是“无限的”，因此不起作用。那是因为在我的示例中，D*始终*包含 B。但是如果 A 始终包含 B，B 始终包含 C，C 始终包含 A，该怎么办？好吧，最后的 A 需要另一个 B，它需要另一个 C，它......我希望你明白这一点。但是使用指针，您可以循环它。使用组合（不是指针）它不能循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:30:32.453

如果类是紧密耦合的，那么你可以这样做

*   声明没有方法实现的类，可能使用前向声明，然后实现方法（可能在实现文件中）。

否则，您可以

*   在不了解彼此的全部细节的情况下，分解出足以让类工作的更抽象的接口。

但很可能你有一个设计级别的错误，如果是这样，只需修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:40:34.770

您可以做的是在 C 类的头文件中前向声明 A 类，然后在 .cpp 文件中包含 A 类的头文件。

有关如何转发声明类 A 的参考，请查看此参考 - [C++ 中的转发声明](http://www.adp-gmbh.ch/cpp/forward_decl.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:44:30.633

最有可能的是，你刚刚遇到了设计级别的错误。

但是，如果你必须这样做，例如，只需尝试通过声明一个空类 A、B 来利用前向声明，而不在 C 的头文件中提供任何详细实现。然后当你需要使用它们时，在 C 的实现文件中包含 A 和 B 的头文件。

请记住，您只能在 C 类的声明中使用指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T03:53:00.980

在您的头文件中使用下一个构造：

```
#ifndef MYCLASS_HPP__20120410__0747
#define MYCLASS_HPP__20120410__0747
// Your definions of class, struct, etc...
#endif// 
```

并且所有包含的文件（self Myclass.hpp 除外）都应该在类头文件 Myclass.hpp 中。他必须包含在 Myclass.cpp 文件中。

# c# - 如果服务器不是本地服务器，则无法打开连接

> ID：10082660
> 
> 赞同：2
> 
> 时间：2012-04-10T03:09:59.063
> 
> 标签：c#, nhibernate, transactionscope

我在 Transaction.cs 中有这段代码

```
using (TransactionScope scope = new TransactionScope())
{
        // Setup nhibernate configuration
        Configuration config = new Configuration();            
        config.SetProperty("hibernate.connection.connection_string", GlobalVar.TRUECONNSTRING);
        config.SetProperty("hibernate.command_timeout", "3600");
        config.AddAssembly(typeof(ProductionMovein).Assembly);

        // Setup nhibernate session
        ISessionFactory factory = config.BuildSessionFactory();
        ISession session = factory.OpenSession();
        ITransaction transaction = session.BeginTransaction();

        //Recalculate Number
        PairData pairCabang = (PairData)comboCabang.SelectedItem;
        textNo.Text = FormFunction.getNumber(2, pairCabang.key, dtpTanggal.Value);

        // Insert data
        try
        {
            //ProductionMoveIn
            ProductionMovein productionMoveIn = new ProductionMovein();
            productionMoveIn.Nomor = textNo.Text;
            session.Save(productionMoveIn);    

            transaction.Commit();
            session.Close();
        }
        catch (Exception ex)
        {
            transaction.Rollback();
            session.Close();
            MessageBox.Show(ex.InnerException.Message);
            return 1;
        }

    scope.Complete();
} 
```

并且错误是从

> textNo.Text = FormFunction.getNumber(2, pairCabang.key, dtpTanggal.Value);

我在 Formfunction.cs 中有这段代码

```
public static string getNumber(int formID, int cabangID, DateTime date)
{
    string formNumber = "";
    string strQuery = "";

        formNumber += formNames[formID, 0] + "/" + + date.ToString("yy") + date.ToString("MM") + "/";

    // Setup nhibernate configuration
    NHibernate.Cfg.Configuration config = new NHibernate.Cfg.Configuration();        
        config.SetProperty("hibernate.connection.connection_string", GlobalVar.TRUECONNSTRING);
        config.SetProperty("hibernate.command_timeout", "3600");
    config.AddAssembly(typeof(Login).Assembly);

    //// Setup nhibernate session
    ISessionFactory factory = config.BuildSessionFactory();
    ISession session = factory.OpenSession();

            strQuery = "SELECT MAX(REVERSE(SUBSTRING(REVERSE(a.Nomor), 1, 5))) as 'latest' FROM " + formNames[formID, 1] +
                   " a WHERE a.cabang = " + cabangID +
                   " AND YEAR(a.tanggal) = '" + date.ToString("yyyy");

    Object result = session.CreateSQLQuery(strQuery)
        .AddScalar("latest", NHibernateUtil.Int32)
        .UniqueResult();
    session.Close();

    int nRow;
    if (result == null)
        nRow = 0;
    else
        nRow = (int)result;
    formNumber += (nRow + 1).ToString("d5");

    return formNumber;
} 
```

我试图将服务器更改为 10.10.7.10（我的 ip）并且它可以工作。但是，当我更改为其他 ip 时，它无法打开连接。我尝试在我的计算机和我尝试连接的另一台服务器上打开 msdtc，但仍然出现相同的错误。 ![在此处输入图像描述](../Images/9e96cf602f4965acd328074e42e63c28.png)

![在此处输入图像描述](../Images/f1754d3eb7b6ecce39f56b214159589e.png)

谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:43:43.833

您使用的是哪个数据库？（我假设是 MS SQL）你能发布异常详细信息吗？

这是一种方法。

1.  首先注释掉`using (TransactionScope)`/`scope.Complete` 并尝试连接到远程数据库 - 即确保您的本地 Sql 客户端配置为 TCP/IP，远程服务器允许远程 TCP/IP 连接（通常是端口 1433），以及您的登录凭据和访问权限是正确的。
2.  通常仅在使用 2 个或更多连接时才需要 DTC。如果您恢复 TransactionScope，但随后删除 NHibernate 事务，则可能根本不需要 DTC。另请注意，TransactionScopes 默认为 Read Serializable 隔离 - [TransactionScope 函数](https://stackoverflow.com/questions/7120738/transactionscope-functions)
3.  确保在您的 PC 和服务器上都配置了 DTC 以允许远程连接等 - ![图片](../Images/745c988fb6efd58cbc200acd37869a2b.png)。

    您还需要解决防火墙问题 [DTC 防火墙要求吗？](https://stackoverflow.com/questions/5343924/dtc-firewall-requirements)

**编辑**

默认情况下，SQL Express 不对远程连接开放 - 在远程服务器上，您需要在 SQL 配置管理器上启用 TCP/IP，打开 1433 / 1434 的防火墙，正如@Özgür 提到的，确保 SQL浏览器服务正在运行（或更改您的实例名称，或更改您的连接字符串以使用 ip、端口）。更多信息在这里：[http ://www.sevenforums.com/system-security/58817-remote-access-sql-server-express-2008-windows-7-a.html](http://www.sevenforums.com/system-security/58817-remote-access-sql-server-express-2008-windows-7-a.html)

# ajax - Web 2.0/Ajax 在服务器或浏览器中格式化 HTML

> ID：10082662
> 
> 赞同：0
> 
> 时间：2012-04-10T03:10:12.233
> 
> 标签：ajax, browser

我正在编写一个数据库应用程序，它将提取一些数据并将其显示在网络浏览器或移动应用程序上。是在回复AJAX命令之前先在服务器端格式化数据，还是让浏览器/手机app把浏览器端的数据格式化到屏幕上。

取一个简单的有序列表

```
<OL>
<LI>Number 1</LI>
<LI>Number 2</LI>
<LI> ....</LI>
</OL> 
```

我可以发送一个 json *（我的格式只是一个示例，不是真正的 JSON 数据*）数组，只包含数据，并让远端格式化它需要在远端进行更多处理

```
a[0]Number1;a[1]Number 2;a[3].... 
```

或者我可以将其在服务器上格式化的位置发回，而远端只是显示它，更少的处理

```
a[0]<OL>;a[1]<LI>Number 1</LI>;a[3]<LI>Number 2</LI>;a[4]<LI>....</LI>;a[5]</OL> 
```

只是寻找 +/- 理由来做一个与另一个。

谢谢/安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:18:52.527

我建议您的服务调用返回 JSON，并且避免返回 HTML。根据您的 AJAX 调用返回的数据量，性能损失可能可以忽略不计，但它是一种糟糕的形式并降低了服务的可重用性。

为避免在客户端创建列表时出现混乱，请在临时变量中添加标签和格式，并立即将整个结构添加到 DOM。

# jsp - Displaytag:column 将按钮（图标）添加到标题

> ID：10082664
> 
> 赞同：0
> 
> 时间：2012-04-10T03:10:25.800
> 
> 标签：jsp, grails, gsp, displaytag

我想在标签中的列标题旁边添加一个链接（图标）。我尝试了以下但得到一个错误：

```
<display:column title="Workflow<img src=\"blah.png\"/>" property="model.title" maxLength="15" sortable="true" /> 
```

URI /Test/admin/deploymentManagement Class org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException Message Expecting '=' after attribute name

有什么建议或其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:33:16.713

似乎您正在使用标记库，因为`display:column`它不是默认的 grails 标记之一。

基本上你不能在标签._中使用标签。
由于它是一个自定义标签库，我只能考虑 2 个选项：

1.  修改taglib代码
2.  在gsp上使用javascript“附加”图像

# uml - 存在哪些 UML 差异工具？

> ID：10082665
> 
> 赞同：1
> 
> 时间：2012-04-10T03:10:48.220
> 
> 标签：uml, diff, argouml

我需要获取 ArgoUML 图的差异。是否有任何工具提供 Diffing 功能来执行 UML？

我不断在 SVN 中更新我的 UML，但我没有办法比较不同的版本。

我已经看到存在来自 IntelliJ[的类似 UML 的差异工具。](http://blogs.jetbrains.com/idea/2010/02/uml-like-diff-tool/)但是还有其他不需要我使用 IntelliJ 的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:49:34.397

EMF 比较项目效果不佳。你得到的并不是真正有用的。

我在项目中所做的是将模型和图表保存在 SVN 上。然后我只看 svn 来查看修改。您无法真正看到图表中的差异，但通常很容易找出已修改的内容，因为模型由模型名称 > 包 > 分类器组成。因此可以追踪根，并且可以快速找出修改过的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:35:34.457

也许其中一些[模型版本控制工具](http://modeling-languages.com/version-control-tools-modeling-artifacts/)可以提供帮助。它们不是特定于 UML 的，但正如前面提到的 EMF-Compare 工具一样，它们与通用 EMF 模型一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T05:31:21.660

在 Eclipse 中使用 EMF，您可以比较两个 UML 图。

[http://wiki.eclipse.org/EMF_Compare/UML_Compare](http://wiki.eclipse.org/EMF_Compare/UML_Compare)

因此，您需要使用以下框架将您的 ArgoUML 转换为 EMF 标准。

[http://argo2ecore.sourceforge.net/](http://argo2ecore.sourceforge.net/)

# php - 如何从 MySql 数据库中的字段末尾删除字符

> ID：10082666
> 
> 赞同：17
> 
> 时间：2012-04-10T03:11:01.747
> 
> 标签：php, mysql

我正在寻找一种从 MySql 数据库中的字段末尾删除一些字符的方法。

假设我有一个名为“items”的表，并且有一个名为“descriptions”的字段，其中一些描述的末尾有 <br>。可能只有一个案例，或者该字段的末尾可能有 2-3 个 <br>。

我需要通过 PHP/MySql 找到一种方法来修剪这些 <br>。我想保留的描述中可能还有其他<br>，它只是我需要删除的最后的那些。

我知道我可以遍历每个条目，最后检查那个标签，如果它存在就把它去掉，然后用新值更新数据库。但这似乎是很长的路要走，我不确定如何最好地实现我想要做的事情。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-10T03:22:39.997

我没有要测试的 mysql 实例，但这样的事情可能会这样做：

```
UPDATE myTable
  SET myCol = TRIM(TRAILING '<br>' FROM myCol); 
```

看看一些[字符串函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-10T03:23:00.120

你可以在mysql中使用TRIM函数。

```
UPDATE items SET descriptions = TRIM(TRAILING "<br>" FROM descriptions) 
```

TRIM 用法在[这里](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T03:24:14.160

使用 SUBSTRING 和 LENGTH 修剪字段。就像是

```
UPDATE MyTable SET MyField=SUBSTRING(MyField,1,LENGTH(MyField)-4)
WHERE MyField LIKE '%<br>' 
```

# php - jQuery $.post 不返回 JSON 数据

> ID：10082676
> 
> 赞同：1
> 
> 时间：2012-04-10T03:13:59.063
> 
> 标签：php, json, jquery

我已经阅读了多个类似的帖子，我的代码似乎与建议相匹配，但仍然没有返回数据。

这是我的 JS：

```
 $.post('php/get_last_word.php', { user_id : userID },
        function( data ) {
            currentLanguage = data.language_id;
            currentWord = data.word_id;
            console.log("currentLanguage = " + currentLanguage)
            console.log("currentWord = " + currentWord);        
    },'json'); 
```

以及相关的php：

```
$user_id=$_POST['user_id'];

mysql_select_db(wordsicle_search); 

$sql = "SELECT `language_id`, `word_id` FROM `save_state` WHERE `user_id`=$user_id";
$result = mysql_query($sql,$con);

while ($row = mysql_fetch_assoc($result)) {
    $encoded = json_encode($row);
    echo $encoded;
} 
```

结果日志：

```
Connected successfully{"language_id":"1","word_id":"1"} 
```

所以 json 数组正在被回显，但它并没有以 , 结尾`data`，因为`currentLanguage`and`currentWord`没有被填充。这是异步的问题吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:17:17.270

确保您有一个有效的 json 从您的 PHP 脚本返回到您的变量

如果你的 json 对象是这样的，

```
{"language_id":"1","word_id":"1"} 
```

您可以访问这样的值

```
currentLanguage = data.language_id;
currentWord = data.word_id; 
```

示例 JsFiddle [http://jsfiddle.net/NuS7Z/8/](http://jsfiddle.net/NuS7Z/8/)

您可以使用[http://jsonlint.com/](http://jsonlint.com/)来验证您的 JSON 格式是否正确。

在您的发布请求中指定`json`为数据类型值将确保响应`json`以成功回调的格式返回。

```
$.post('php/get_last_word.php',{user_id:userID}, dataType:"json",function(data){
        currentLanguage = data.language_id;
        currentWord = data.word_id;
}); 
```

您也可以使用`getJson`简单地获取 json 数据。getJson 是 ajax Call 的简写，数据类型为 json

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:42:58.907

尝试将您的 JS 更改为：

```
 $.getJSON('php/get_last_word.php', { user_id : userID },
        function( response ) {
            if (response.success) {
                currentLanguage = response.data.language_id;
                currentWord = response.data.word_id;
                console.log("currentLanguage = " + currentLanguage)
                console.log("currentWord = " + currentWord);     
            } else {
                alert('Fail');
            }   
    }); 
```

和你的PHP：

```
<?php
$success = false;
$data = null;
$user_id=$_POST['user_id'];

mysql_select_db(wordsicle_search); 

$sql = "SELECT `language_id`, `word_id` FROM `save_state` WHERE `user_id`=$user_id";
$result = mysql_query($sql,$con);

while ($row = mysql_fetch_assoc($result)) {
    $success = true;
    $data = $row;
}

// I generally format my JSON output array like so:

// Response
header('Content-Type: application/json');
echo json_encode(array(
    'success' => $success,
    'data' => $data
));

?> 
```

这样它更有条理，不要忘记设置内容类型。

希望有帮助。

# java - 使用 startActivity() 时出现运行时错误

> ID：10082677
> 
> 赞同：0
> 
> 时间：2012-04-10T03:14:26.803
> 
> 标签：java, android, android-activity, nullpointerexception, runtime-error

我正在尝试使用以下方法切换到不同的应用程序：

```
private void switchAcitivty() {
    Intent intent = new Intent();
    intent.setClass(this, TeleJokeActivity.class);
    startActivity(intent);
} 
```

但我收到以下错误：

```
04-10 03:05:51.901: E/AndroidRuntime(831): FATAL EXCEPTION: main
04-10 03:05:51.901: E/AndroidRuntime(831): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.telejoke.mo/com.telejoke.mo.TeleJokeActivity}: java.lang.NullPointerException
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.os.Looper.loop(Looper.java:123)
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-10 03:05:51.901: E/AndroidRuntime(831):  at java.lang.reflect.Method.invokeNative(Native Method)
04-10 03:05:51.901: E/AndroidRuntime(831):  at java.lang.reflect.Method.invoke(Method.java:521)
04-10 03:05:51.901: E/AndroidRuntime(831):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-10 03:05:51.901: E/AndroidRuntime(831):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-10 03:05:51.901: E/AndroidRuntime(831):  at dalvik.system.NativeStart.main(Native Method)
04-10 03:05:51.901: E/AndroidRuntime(831): Caused by: java.lang.NullPointerException
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.app.Activity.findViewById(Activity.java:1637)
04-10 03:05:51.901: E/AndroidRuntime(831):  at com.telejoke.mo.TeleJokeActivity.<init>(TeleJokeActivity.java:11)
04-10 03:05:51.901: E/AndroidRuntime(831):  at java.lang.Class.newInstanceImpl(Native Method)
04-10 03:05:51.901: E/AndroidRuntime(831):  at java.lang.Class.newInstance(Class.java:1429)
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-10 03:05:51.901: E/AndroidRuntime(831):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
04-10 03:05:51.901: E/AndroidRuntime(831):  ... 11 more 
```

不知道为什么我会得到`NullPointerException`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:11:18.267

在您的活动类 TeleJokeActivity 中有一些 NullPointerException。确保在调用 findViewById 方法之前调用了 setContentView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:47:36.647

您不能在应用程序中切换到其他应用程序的活动。您可以在 AndroidManifest 文件中指定的相同应用程序活动之间切换。如果您在相同的应用程序活动之间切换，请检查您是否已在清单文件中声明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:26:45.477

如果您想从当前活动切换到另一个应用程序中的活动，请在意图中指定另一个应用程序的完整包名称。

例如：Intent i=new Intent(currentclassname.this,com.example.sample.class);

这将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T12:53:06.970

您可以从一个活动切换到另一个应用程序的另一个活动。我已经尝试过了，它奏效了。

# java - 使计划的方法线程安全

> ID：10082679
> 
> 赞同：0
> 
> 时间：2012-04-10T03:14:56.970
> 
> 标签：java, multithreading, performance, thread-safety, synchronized

我有一个方法，调度程序每分钟调用一次以从 ftp 获取文件，处理并将其记录保存到数据库中。我需要使这个线程安全，以便如果该方法必须一次执行多个文件，它以线程安全的方式运行..

```
public synchronized void processData(String data){
   //do processing
} 
```

这真的会是一种线程安全的方法，可以优雅地处理大量负载吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:16:28.143

只要它不使用封闭对象中的任何有状态字段，它就是线程安全的。

换句话说，如果有一个类级别的字段被操作或访问以`processData(String data)`跟踪正在发生的事情，那么它就不是线程安全的。

一个例子可能是一个类级别的字段，`private Boolean hasConnection;` 如果您需要检查是否存在与该字段的连接，那么您没有线程安全的方法。

如果您满足此要求，那么您甚至不必将`synchronized`关键字添加到您的方法中。默认情况下，它将是线程安全的，并且无限数量的线程可以同时访问它。

如果你不满足这个要求，那么你将需要发布整个类以确定它是否是线程安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T03:23:43.823

假设神秘的“处理文件”操作是自包含的，那么您最应该担心的是您的数据库连接：不要使其共享，每次从连接字符串中获取一个新的，并使用[连接池](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/conpool.html)。不要让你的方法同步，除非你需要访问你的类中的共享状态；否则，您的方法将无法在多个线程上同时取得进展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:20:19.983

请向我们描述您的方法使用了哪些资源，以及哪些资源是共享的。

如果不使用普通对象，则没有问题。

如果您确实使用公共资源，则需要确保这些资源可以以线程安全的方式访问，或者不被多个线程访问。

你的问题是关于性能的。一般来说，`processData`这似乎是一种需要一些时间才能完成的方法：您正在使用数据库。与数据库查询相比，获得锁所需的时间最少。所以不，`synchronized`关键字不会给您带来任何明显的性能影响。

# c - while循环没有执行

> ID：10082697
> 
> 赞同：0
> 
> 时间：2012-04-10T03:17:14.957
> 
> 标签：c, loops, while-loop

我在一个程序中做了一个while循环，程序到达了while循环，但它没有执行。我觉得我错过了一个非常小的错误，因为我已经查看了这么长时间的代码。

```
 int strbuf = 100;
  char string[strbuf];
  char *exit = "exit";
  while(!strcmp(string, exit)){
      printf("Enter a word to search. Enter exit to quit");
      scanf("%s", string);
      state = present(fIndex, string);
      if(state){
        printf("The word %s was found on line %d", string, state);
    }
} 
```

编辑：输入来自键盘。编辑编辑：新代码（同样的问题）

```
int strbuf = 100;
char string[strbuf];
char *exit = "exit";

printf("Enter a word to search. Enter exit to quit\n");
scanf("%s", string);
    while(!strcmp(string, exit)){
    state = present(fIndex, string);
    if(state){
        printf("The word %s was found on line %d", string, state);
    }
    else printf("The word %s was not found", string);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:24:19.040

阅读手册页`strcmp`：

> strcmp() 函数比较两个字符串 s1 和 s2。如果发现 s1 分别小于、匹配或大于 s2，则它返回一个小于、等于或大于零的整数。

如果有匹配，`strcmp`将返回 0，如果两个字符串*不*匹配，则返回非零值。

因此`while(!strcmp(string, exit))`真的是说，*当字符串匹配*时，继续循环。

`string`也未初始化并包含垃圾，导致未定义的行为。`do..while`如果你的循环必须*至少执行一次，*要么先初始化它，要么使用循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:25:02.453

是的，它*正在*执行。循环的*主体*可能没有被执行，`while`但那是因为你正在做的是未定义的行为，`string`在它被初始化为任何有用的东西之前使用。

一个简单的解决方法是更改​​：

```
char string[strbuf]; 
```

进入：

```
char string[strbuf] = {'\0'}; 
```

而且，为了便于阅读，您应该扩展您的比较，除非它们真的*是*布尔值，（而且，由于您在一些地方硬编码“退出”，我不确定您为什么将它作为一个变量）：

```
while (strcmp (string, "exit") != 0) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:21:26.003

在`string`将其与`exit`. 放一个：

```
printf("Enter a word to search. Enter exit to quit");
scanf("%s", string); 
```

在你的 while 循环之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:24:47.460

如果没有执行while循环，则表示`!strcmp(string, exit)`为假

这意味着`strcmp(string, exit)`必须是 tru（非 0）

strcmp 在匹配时返回 0，因此`string`与`exit`

这是什么原因？您永远不会在字符串中输入值。建议将其更改为“do while”循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T03:29:58.970

此外，*exit()*是一个标准的 C 函数（参见 stdlib.h）。*strExit 之*类的东西可能更适合您的目标。

# php - 将展开的文本换行

> ID：10082701
> 
> 赞同：2
> 
> 时间：2012-04-10T03:17:17.620
> 
> 标签：php, regex

例子：

```
<div>foo</div>
<p>bar</p>
Unwrapped text 
```

我想要的是：

```
<div>foo</div>
<p>bar</p>
<span>Unwrapped text</span> 
```

如何在**不**依赖新线路的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:55:41.600

我不会对 html 使用正则表达式。

你可以用[phpQuery做到这一点](https://github.com/punkave/phpQuery)

```
$doc = phpQuery::newDocument($html);
$doc->contents()->not($doc->children())->wrap("<span>");
$html = $doc->html(); 
```

不过没试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:45:23.650

从您的字符串中提取标记，例如：`<div>`, `foo`, `</div>`, `<p>`, `bar`, `</p>`, `Unwrapped text`. 您可以使用正则表达式来做到这一点。然后

```
for each token do
    if token is opening tag
        push token on stack
    else if token is closing tag (and matching opening tag is ontop of stack)
        pop token from stack
    else if token is text and stack is not empty
        ignore token (continue)
    else if token is text and stack is empty
        wrap token with <span> 
```

这将适用于任意嵌套的`XML`字符串。

# python - tkinter 读取通过 for 循环添加的检查按钮值

> ID：10082703
> 
> 赞同：2
> 
> 时间：2012-04-10T03:17:20.307
> 
> 标签：python, loops, checkbox, python-3.x, tkinter

我正在为我餐厅的员工进行菜单测试。该计划是让菜单项在“***此处循环项目***”中循环，此时他们选择正确的复选按钮（成分），然后单击“***提交并继续按钮***”。当他们单击提交按钮时，我首先需要读取检查按钮的打开和关闭值以确定他们选择了哪些项目，然后将这些与我在列表字典中定义的正确答案进行比较，然后清除所有检查按钮以及是否答案是错误的还是正确的，程序将继续运行，我最终会有一个结果屏幕，但现在我被困在如何读取检查按钮的开和关值上。我现在只是想打印选定的蔬菜，但无法弄清楚。

我认为这与它们采用不同的方法以及它们是在循环中添加的事实有关吗？我不确定，但我知道我的代码试图读取错误的内容，任何帮助将不胜感激！

很抱歉这个冗长的问题，我只是认为向您提供尽可能多的信息以了解我正在尝试做的事情是有益的..

![截图](../Images/9f1074e7ba8ea602bacd0651603517f3.png)

```
from tkinter import *

class GUI(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent)
        self.parent = parent
        self.initUI()

    def initUI(self):
        self.grid()
        self.parent.title("Wahoos Menu Test")
        self.create_buttons()

    global count
    count = -1

    def create_buttons(self):
        for r in range(20):
            for c in range(14):
                Label(self, text='',
                    borderwidth=0).grid(row=r,column=c)
        B = Button(self, text ="Begin Exam", relief=RIDGE, fg="black", command= self.on_button_press).grid(row=19, column=7)
        L = Label(self, text="What comes in the following", fg="blue").grid(row=6, column=0)
        self.veg = ['Lettuce', 'Cabbage', 'Cheese', 'Ahee Rice', 'Brown Rice', 'Banzai Veg', 'Red Cabbage', 'Black Beans', 'Cajun White Beans']
        self.vegboxes = []
        self.opt = []
        c = 1
        for ve in self.veg:
            c +=1
            self.v = IntVar()
            self.vegboxes.append(self.v)
            vo = Checkbutton(self, text=ve, variable=self.v, onvalue=1, offvalue=0).grid(row=c, column=11, sticky=W)

    def on_button_press(self):
        global count
        count = count + 1
        menuItems = {'nft': ['cabbage', 'cheese', 'corn', 'nf', 'salsa'],
        'nckt': ['lettuce', 'cheese', 'corn', 'nck', 'salsa']}
        menu = ['blackened fish taco', 'wahoos chicken salad']
        if count == len(menu):
            C = Button(self, text ="           Your Done!          ", relief=RIDGE, fg="black").grid(row=19, column=7)
        else:
            m = Label(self, text=menu[count], fg="black").grid(row=7, column=0)
            C = Button(self, text ="Submit and Continue", relief=RIDGE, fg="black", command= self.read_checks).grid(row=19, column=7)
    def read_checks(self):
        for v in self.veg:
            if self.v == 1:
                print(self.veg[v])

def main():
    root = Tk()
    app = GUI(root)
    root.mainloop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:12:51.567

您可以创建一个字典，并将每个键作为 Checkbutton 的标签，
并将值作为状态[“控制变量”。](http://infohost.nmt.edu/tcc/help/pubs/tkinter/control-variables.html)
然后，您将使用控制变量的 get() 方法检查状态，如下例所示。

```
import tkinter as tk

class GUI(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)

        self.buttonDic = {
        'Brown Rice':0,
        'Banzai Veg':0,
        'Red Cabbage':0,
        'Black Beans':0
        }

        for key in self.buttonDic:
            self.buttonDic[key] = tk.IntVar()
            aCheckButton = tk.Checkbutton(self, text=key,
                                            variable=self.buttonDic[key])
            aCheckButton.grid(sticky='w')

        submitButton = tk.Button(self, text="Submit",
                                        command=self.query_checkbuttons)
        submitButton.grid()

    def query_checkbuttons(self):
        for key, value in self.buttonDic.items():
            state = value.get()
            if state != 0:
                print(key)
                self.buttonDic[key].set(0)

gui = GUI()
gui.mainloop() 
```

这种方法允许您使用一个字典创建和分析 Checkbuttons。
请注意 items() 的使用，`for key, value in self.buttonDic.items():`
其中需要防止：
`ValueError: too many values to unpack`

可以找到有关 Checkbutton 小部件及其变量的更多信息：[这里](http://effbot.org/tkinterbook/checkbutton.htm)

* * *

我将包括我的第一次尝试，它基于
Checkbutton 小部件的`onvalue`and `offvalue`，
以防它帮助人们更多地理解控制变量。

```
import tkinter as tk

class GUI(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)

        self.bRiceV = tk.StringVar()
        bRice = tk.Checkbutton(self, text="Brown Rice",variable=self.bRiceV,
                                    onvalue="Brown Rice", offvalue="Off")
        bRice.pack()

        self.bVegV = tk.StringVar()
        bVeg = tk.Checkbutton(self, text="Banzai Veg",variable=self.bVegV,
                                    onvalue="Banzai Veg", offvalue="Off")
        bVeg.pack()

        self.varList = [self.bRiceV, self.bVegV]

        submitButton = tk.Button(self, text="Submit",
                                command=self.query_checkbuttons)
        submitButton.pack()

    def query_checkbuttons(self):
        for var in self.varList:
            value = var.get()
            if value != 'Off':
                print(value)
                var.set('Off')

gui = GUI()
gui.mainloop() 
```

# qt - 当您单击此标签时，如何使 QLabel 变成组合框或编辑控件

> ID：10082704
> 
> 赞同：0
> 
> 时间：2012-04-10T03:17:36.123
> 
> 标签：qt

它通常看起来像一个标签，一旦你将鼠标移到它上面，或者单击它，然后同样会变成一个编辑控件或组合框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T04:21:39.897

使用 QStackedWidget。根据文档，“QStackedWidget 类提供了一堆小部件，其中一次只有一个小部件可见。” 然后，您可以重新实现 QWidget::enterEvent 和 QWidget::leaveEvent 以检测鼠标悬停并显示适当的小部件。

# html - 避免网站中的代码重复

> ID：10082705
> 
> 赞同：3
> 
> 时间：2012-04-10T03:17:53.813
> 
> 标签：html

我将创建一个带有侧边栏的网页，侧边栏将包含指向其他页面和内容的链接。我编码的方式，对于侧边栏上的每个链接，我都有另一个 HTML 文档。侧边栏链接只是链接到另一个 .html 文件，其中包含您想要调用的网站模板/布局。所以我有一个 index.html 作为主页，然后是 about.html 等。对于每个 html 文档，该文件包含整个网站布局的代码（侧边栏、页脚等）。因此，在侧边栏链接到的不同链接之间，唯一的区别是内容。因此，如果我想更改网页的布局（例如侧边栏的颜色），我将不得不转到每个 HTML 文档并进行更改。

所以我的问题是人们应该如何去做这件事？我不认为我做对了。你只应该有一个包含模板的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:43:37.663

金钱开发，

您正在寻找的是一个模板系统。如果您想坚持使用纯 HTML，则必须使用外部工具来帮助您，因为它没有内置的模板方式。Dreamweaver 允许您在网页内定义区域以指示它们是同一区域，以便在整个网站中保持“一体”。

不过，这种工作方式实际上技术含量很低。它的作用是搜索 Dreamweaver 管理的网站中的所有文件，并在您从最初设置时确定的“主位置”编辑该部分时“搜索并替换”该部分。

Ali Hamze 建议在 PHP 项目中使用“包含”。这是 PHP 的常用方法，但我有偏见，并且更喜欢 ASP.NET 对模板的回答。它是“.master”（页面）和“.ascx”（控件）的组合，允许您以嵌套方式模板和重用它们。它远远超出了简单的“搜索和替换”（就像 Dreamweaver 使用您的 HTML 所做的那样），但需要您学习一个新的开发环境。

所以归根结底，你可以坚持使用 HTML，它会简单得多，让你可以专注于学习 HTML/CSS 和 JavaScript。这非常适合为开发奠定基础……但是，要真正进入“大联盟”，我建议选择 IDE。

作为一个长期使用 Windows 的人，我确实喜欢通过 Microsoft Visual Studio 和 Microsoft SQL 用于数据库的 ASP.NET。也就是说，我是那种会喝可口可乐的人，仍然喜欢百事可乐。如果您想研究 PHP 或 Java，这些也是不错的选择。如果我想要一个免费且功能强大的 IDE 来让我的 Web 开发生活有一个健康的开始，我会去以下地方：

ASP.NET (Microsoft Visual Studio) --- 阅读关于模板的“母版页”和“控制文件” [http://www.microsoft.com/express](http://www.microsoft.com/express) （我更喜欢 Microsoft SQL（Express Edition 很好）用于数据库，不过如果你愿意，你可以使用 mySQL）

PHP（用于 PHP 的 Eclipse IDE）---查看“包含”以进行模板化 [http://www.eclipse.org/projects/project.php?id=tools.pdt](http://www.eclipse.org/projects/project.php?id=tools.pdt)

Java（Java 的 Eclipse IDE）---查看“http://www.stringtemplate.org/”以获取模板 [http://www.eclipse.org/downloads/packages/eclipse-ide-javascript-web-developers/ indigosr2](http://www.eclipse.org/downloads/packages/eclipse-ide-javascript-web-developers/indigosr2) （以上，如果你想要一个后台数据库，查看mySQL） [http://www.mysql.com/](http://www.mysql.com/)

仅供参考：您可能会发现 Microsoft 的 IDE 最不令人生畏，尽管 PHP 入门并不难。如果您是新手，Java 可能具有挑战性。

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:22:45.887

您应该研究一下[PHP](http://php.net)，它将允许您有一个文件作为标题，另一个文件用于侧边栏以及所有其他内容在所有页面上都是相同的。然后你只需[将](http://php.net/manual/en/function.include.php)它包含在 index.php、about.php 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:22:54.160

将所有样式保存在每个 html 页面头部引用的外部 CSS 样式表中。然后，您可以在一处更改样式。这解决了您更改侧边栏颜色的示例。

如果你想为每个页面的侧边栏保持一致的 html 结构，请使用 php.ini。您将创建一个名为 sidebar.php 的文件，并使用该`include`方法将相同的代码导入每个页面。如果您想稍后更改它，请编辑单个 sidebar.php 文件，所有其他文件都将导入新代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:23:13.943

很多答案。最典型的是使用*预处理*HTML 的服务器端语言。这样您就可以拥有一个通用布局文件和单独的“视图”。视图只包含每个页面的唯一内容，布局包含围绕它的基本不变的包装。然后，您可以根据需要将这两者拼凑在一起，而无需重复代码。

学习任何您感兴趣的服务器端语言，从 PHP 到 Ruby 到 Python 或 *.NET。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T03:29:32.030

对我来说，解决这个问题的方法是用一种叫做 PHP 的语言编写一个小的服务器端脚本。我创建了 header.php、footer.php，在您的情况下，我还将创建一个 sidebar.php 文件。

那么什么是PHP？它是一种脚本语言，非常有用。在你的情况下，它并不是那么重要，但你可以用它做一件*超级*方便的事情——包括其他文件。您的 Web 服务器必须安装并运行 PHP。您还可以使用名为 Xampp 的免费工具在本地 PC 上运行它。

所以当我开始时，我会创建一个名为 index.php 的文件。在那个文件中，我会像往常一样从头部开始。包括您的 CSS（您正在制作 CSS 文件，对吗？它比样式部分好得多 - 您可以重复使用相同的样式表，并且它还有其他一些好处。）如果您正在使用它们，请设置任何脚本。在正文中，您将使用一个特殊的 PHP 标记来运行一些 PHP 代码：

```
<?php include("header.php"); ?> 
```

这将“包含”名为 header.php 的文件。当您加载它时，您放入的任何内容现在都将成为该文档的一部分。它可以是纯 PHP、HTML 甚至纯文本。用它来设置你的标题。在页脚所在的页面底部，使用更多 PHP：

```
<?php include("footer.php"); ?> 
```

在 footer.php 中，您猜对了 - 输入您的页脚代码。然后关闭body标签和html标签。您还可以使用相同的技术包含您的侧边栏。我建议您在包含文件中打开的任何 HTML 标记也关闭在同一个文件中。这将使管理页面的各个部分变得更加容易。

这是您可以用 PHP 做的最简单的事情，但它是一种非常方便的技术，可用于制作网站的可重用部分。掌握它后，您将节省大量时间和精力。

# arrays - 来自数组值的数据框列名

> ID：10082708
> 
> 赞同：1
> 
> 时间：2012-04-10T03:18:47.407
> 
> 标签：arrays, r, dataframe

我有一个名称数组，我想将这些名称用作数据框的列名，但出现了一些错误。我不确定该怎么做，但这就是我到目前为止所拥有的。

```
windspeeds = data.frame()
cities <- c("albuquerque_nm", "boston_ma", "charlotte_nc", "dallas_tx", "denver_co", "helena_mt", "louisville_ky", "pittsburgh_pa", "salt_lake_city_ut", "seattle_wa")
for(i in 1:10){
  fastest <- read.delim(paste("http://www.itl.nist.gov/div898/winds/data/nondirectional/datasets/", cities[i], ".prn", sep=""), col.names=c("NULL", "fastest", "NULL", "NULL"), skip=4, header=F, sep="")$fastest
  windspeeds$cities[i] = fastest
} 
```

我收到此错误：

```
Error in `$<-.data.frame`(`*tmp*`, "cities", value = 59L) : 
replacement has 1 rows, data has 0
In addition: Warning message:
In windspeeds$cities[i] = fastest :
number of items to replace is not a multiple of replacement length 
```

我必须将数组转换为某种类型的字符串或常量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:32:55.233

您的问题之一是您的查询不会为每个城市返回相同数量的记录（免责声明，我对您的数据或它应该是什么样子一无所知）。无论如何，这是将数据读入列表对象的一种方法，这可能是一种更“R-ish”的做事方式：

```
x <- lapply(cities, function(x) 
  read.delim(paste("http://www.itl.nist.gov/div898/winds/data/nondirectional/datasets/", x, ".prn", sep=""), 
             col.names=c("NULL", "fastest", "NULL", "NULL"), skip=4, header=FALSE, sep="")$fastest
            ) 
```

X 现在看起来像：

```
> str(x)
List of 10
 $ : int [1:46] 59 49 51 52 57 52 45 54 49 64 ...
 $ : int [1:42] 50 55 79 56 53 41 51 51 65 62 ...
 $ : int [1:29] 33 42 40 52 42 48 52 51 46 51 ...
 $ : int [1:32] 48 45 46 45 43 53 43 58 46 43 ...
 $ : int [1:33] 42 51 49 44 47 47 50 44 44 54 ...
 $ : int [1:48] 58 58 58 58 70 55 56 62 59 70 ...
 $ : int [1:39] 40 39 50 53 50 51 54 54 51 50 ...
 $ : int [1:18] 47 56 60 44 54 50 42 52 47 47 ...
 $ : int [1:46] 53 49 40 53 55 40 49 46 61 41 ...
 $ : int [1:10] 38 44 35 46 42 45 41 45 42 43 
```

并具有描述性统计数据：

```
> do.call(rbind, lapply(x, summary))
      Min. 1st Qu. Median  Mean 3rd Qu. Max.
 [1,]   45   49.50   53.0 55.02   57.00   85
 [2,]   41   49.25   54.5 56.26   60.75   85
 [3,]   33   39.00   42.0 44.86   51.00   65
 [4,]   39   45.75   48.0 49.16   51.50   67
 [5,]   42   44.00   48.0 48.67   51.00   61
 [6,]   42   49.00   55.0 54.04   58.00   71
 [7,]   38   43.50   49.0 48.74   52.50   66
 [8,]   39   45.00   47.0 48.44   53.50   60
 [9,]   40   45.25   49.0 50.41   54.00   69
[10,]   35   41.25   42.5 42.10   44.75   46 
```

您是否应该为每个城市拥有相同数量的记录尚不清楚，但希望这会让您走上正确的道路。

# jquery - 在 Backbone.js 中菊花链依赖的 AJAX 请求

> ID：10082712
> 
> 赞同：2
> 
> 时间：2012-04-10T03:19:43.713
> 
> 标签：jquery, backbone.js

我正在寻找菊花链 Backbone 请求，其中第二个请求取决于第一个请求的结果。我该如何以正确的方式做到这一点？jQuery`$.done()`似乎并不适合我。为了更好地解释，这里是一个假设的例子：

我有一份供应商清单，每个供应商都有一份他们提供给公司的零件清单。我想获取所有供应商，然后获取此供应商列表的所有零件。这是我试图在没有运气的情况下使用的示例代码。

```
var App = {};

App.Supplier = Backbone.Model.extend({ });
App.Part = Backbone.Model.extend({ });

App.Suppliers = Backbone.Collection.extend({
   model: App.Supplier 
});

App.Parts = Backbone.Collection.extend({
    model: App.Part
})

var suppliers = new App.Suppliers;
var parts = new App.Parts;

var supplier_request = suppliers.fetch();

supplier_request.done(function(){
    parts.fetch_by_suppliers([supplier1, supplier2, ...]);
}); 
```

发生的情况是第二个请求在收到第一个回复之后和**模型实例化****之前`App.Supplier`**立即触发。结果是——供应商列表保持为空，第二个请求以空的供应商列表触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:39:50.970

为了完成这种菊花链，您需要将成功回调传递给该`fetch`方法。`success`回调`(collection, response)`作为参数传递。您可以通过以下方式重写示例中的代码：

```
...

suppliers.fetch({success: 
  function(collection, response){
     parts.fetch_by_suppliers(collection);
  }
}); 
```

Backbone.js 文档很好地解释了它。 [http://documentcloud.github.com/backbone/#Collection-fetch](http://documentcloud.github.com/backbone/#Collection-fetch)

希望这对你有帮助！

# plugins - 如何编写notepad++自动完成插件

> ID：10082713
> 
> 赞同：1
> 
> 时间：2012-04-10T03:20:11.340
> 
> 标签：plugins, autocomplete, notepad++

我正在尝试开发一个小插件，该插件将执行某种自动完成功能以及其他一些高级功能，以创建一个原始 IDE，以与我们开发的自定义脚本语言一起使用。

所以我想知道，自动完成插件通常是如何工作的？我有一个我正在使用的基本插件模板（C# 模板），无论如何我从高层次了解命令是如何工作的，但我试图弄清楚我将如何创建我的自动完成功能。

我的第一个猜测是创建一个命令，该命令生成一个新线程，该线程每 100 次左右检索 notepad++ 文本的全部内容，然后弹出一个小选择框，或者在正确的模式为时直接编写自动完成的可能性匹配新输入的文本。

那些在我之前的人有什么智慧吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:59:12.797

Well I figured it out. Apparently there is a "beNotified" method in my project template that I downloaded and it handles all events/notifications from the Scintilla/Notepad++ environment. I will probably be using the SCN_CHARADDED event to check the current line of text each time a character is added to the GUI.

# actionscript-3 - as3 TouchEvent 与 MouseEvent

> ID：10082715
> 
> 赞同：1
> 
> 时间：2012-04-10T03:20:20.257
> 
> 标签：actionscript-3, air

只是对那些 Air 专家的一个快速问题。

我正在为 iPad 应用程序开发 Air，只是想知道 TouchEvent 更有效还是 MouseEevent 做得很好。我说的是性能方面，比如拖放等等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:55:34.270

是的，使用触摸而不是鼠标事件，您可以获得良好的性能、平滑的拖动以及多指操作。

# c# - MVC SQL 循环级联路径

> ID：10082716
> 
> 赞同：1
> 
> 时间：2012-04-10T03:20:24.990
> 
> 标签：c#, entity-framework-4.1, ef-code-first

我正在构建一个简单的代码优先 MVC 3 博客，例如应用程序。我的模型有三个表，用户、评论和教程。评论表对用户和教程都有一个 FK。教程还为用户提供了一个外键。

当我运行程序时，我收到以下错误：

```
Introducing FOREIGN KEY constraint 'FK_Comments_Users_UserID' on table 'Comments' 
may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON 
UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint. See previous errors. 
```

似乎问题是由称为级联删除的东西引起的。微软对此的解决方案是拥有更好的数据库设计，[http://support.microsoft.com/kb/321843](http://support.microsoft.com/kb/321843)。但是这个数据库似乎和你能得到的一样简单。

我发现了一些其他帖子（[Entity Framework Code first - FOREIGN KEY constraint problem](https://stackoverflow.com/questions/7363762/entity-framework-code-first-foreign-key-constraint-problem)）似乎通过在我的数据库上下文类中添加以下代码来解决这个问题：protected override void OnModelCreating(DbModelBuilder modelBuilder) {

```
 modelBuilder.Entity<User>()
                .HasMany(u => u.Comments)
                .HasRequired(c => c.User)
                .HasForeignKey(c => c.UserId)
                .WillCascadeOnDelete(false);
 } 
```

不幸的是，Visual Studio 对 '.HasRequired' 的语法很生气 实际错误是“错误 1 ​​'System.Data.Entity.ModelConfiguration.Configuration.ManyNavigationPropertyConfiguration' 不包含 'HasRequired' 的定义并且没有扩展方法 'HasRequired'可以找到接受“System.Data.Entity.ModelConfiguration.Configuration.ManyNavigationPropertyConfiguration”类型的第一个参数（您是否缺少 using 指令或程序集引用？）”

似乎这里有一些简单的东西我错过了。如何更好地重组我的数据库或如何解决这个循环冗余问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:06:57.707

使用[WithRequired](http://msdn.microsoft.com/en-us/library/gg671235%28v=vs.103%29.aspx)方法代替`HasRequired`

```
 modelBuilder.Entity<User>()
                .HasMany(u => u.Comments)
                .WithRequired(c => c.User)
                .HasForeignKey(c => c.UserId)
                .WillCascadeOnDelete(false);
 } 
```

# html - 如何选择在另一个具有 B 类的元素下的 A 类元素？

> ID：10082719
> 
> 赞同：0
> 
> 时间：2012-04-10T03:21:08.120
> 
> 标签：html, css

这是我的代码的简化片段：

```
<li id="work-5" class="work-5 class-B">
    <div>some other stuff</div>
    <div class="class-A"></div>
</li>
<li id="work-6" class="work-6 class-C">
    <div class="class-A"></div>
</li> 
```

我想将一些 CSS 样式应用于具有类 A 的元素，该元素位于具有 B 类的元素的树下。换句话说，我想将不同的样式应用于具有相同类（A 类）的两个元素，它们位于具有不同类的两个不同元素的树下的某个位置（不一定是第一个子元素）。我可以使用 CSS 选择器来实现这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T03:25:03.083

基本 CSS：

```
.class-B .class-A {
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:25:30.830

两个类选择器和一个后代组合器！

```
.class-B .class-A {
    /* ... */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:25:46.227

当然可以。只需使用父类来定位它。

[http://jsfiddle.net/DpddQ/](http://jsfiddle.net/DpddQ/)

```
.class-B .class-A { background: blue; color: white; }
.class-C .class-A { background: red; }
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:25:47.723

是的，有很多替代方案：

```
#work-5 .class-A { }
#work-6 .class-A { } 
```

或者

```
.work-5 .class-A { }
.work-6 .class-A { } 
```

或者

```
#work-5.work-5 .class-A { }
#work-6.work-6 .class-A { } 
```

或者

```
#work-5.work-5.class-B .class-A { }
#work-6.work-6.class-C .class-A { } 
```

根据您的需要，但您的选择器越具体，它的优先级就越高。

# playframework - 如何在开发和生产之间更改 PlayMorphia 中的种子/数据库设置？

> ID：10082722
> 
> 赞同：1
> 
> 时间：2012-04-10T03:21:49.130
> 
> 标签：playframework, morphia

我有一个带有 PlayMorphia 的 Play Framework (1.2.4) 项目，它有两个不同的数据库连接配置文件。一个用于开发，另一个用于生产，但我只看到一个静态配置文件托管这些值。

我正在阅读这一切是如何工作的，但在努力支持两种配置设置。Play中有一些人们使用的配置技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:43:13.720

在您的 application.config 文件中添加此行

```
morphia.db.seeds="127.0.0.1:27017"
%prod.morphia.db.name=production_db_name
morphia.db.name=mobilereal_dev 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:32:31.113

假设你有

```
morphia.db.name=test 
```

现在再添加一行：

```
%prod.morphia.db.name=prod 
```

并启动您的应用程序：

```
play start --%prod 
```

# android - 为什么videoview这么慢？

> ID：10082728
> 
> 赞同：4
> 
> 时间：2012-04-10T03:22:35.330
> 
> 标签：android, video-streaming, android-videoview

我在我的应用程序中放了一个视频视图，它工作正常，但是当你打开页面时，它需要永远加载/缓冲。

无论如何我可以解决这个问题。我的意思是这是一个*3秒的视频*。加载时间应该不会太长。正确的？

代码：

```
 package jslsoftware.co.nr;

    import android.app.Activity;

    import android.net.Uri;
    import android.os.Bundle;
    import android.widget.VideoView;
    import android.widget.MediaController;

    public class videoview1 extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.video1);

        Uri vidFile = Uri.parse("http://jslserver1.yolasite.com/resources/3gp_videos/Animal.3gp");
        VideoView videoView = (VideoView) findViewById(R.id.videoView1);
        videoView.setVideoURI(vidFile);
        videoView.setMediaController(new MediaController(this));
        videoView.start();
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:38:43.370

为什么不直接放置代码而不是子类呢？

```
private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    protected Bitmap doInBackground(String... urls) {
        return loadImageFromNetwork(urls[0]);
    }

    protected void onPostExecute(Bitmap result) {
        mImageView.setImageBitmap(result);
    }
} 
```

只需在 doInBackground 方法中替换你的东西。如果您在执行后有任何事情要做，请放在 onPostExecute 中。

# matlab - MATLAB 树构造

> ID：10082731
> 
> 赞同：0
> 
> 时间：2012-04-10T03:22:50.963
> 
> 标签：matlab, image-processing

现在，我将两个输入文件之间共有的任何对分开。像这样找出该对之间的平均值：（第一个文本文件中的相关性）X（第二个文本文件中的相关性）/（第一个文本文件中的相关性）+（第二个文本文件中的相关性）。再次将它们存储在单独的矩阵中。

构建树：现在，从两个输入文件中的所有元素中，选择 10 个最常见的元素。这些中的每一个形成单独的 K 树的根。算法如下：对于根级别的单词，检查其所有调和平均值与上一步中开发的矩阵中的其他标签。选取前两个最高调和均值，将标签对中的另一个词作为根的子节点。

有人可以指导我完成 MATLAB 的步骤吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:59:48.923

好的，首先将数据放入有用的格式；也许计算不同单词的数量，并制作一个 N×M 二进制值矩阵（我称之为`data1`）。N 行中的每一行都将描述与单个图像相关联的单词。M 列中的每一列都将描述标记了单个单词的图像。因此，如果标签 M 不在图像 N 中，则 (N, M) 处的值为 0，如果在图像 N 中，则为 1。

从此矩阵中，要找到所有单词对之间的相关性，您可以执行以下操作：

```
correlations1 = zeros(M, M);
for i=1:M
  for j=1:M
    correlations1(i, j) = corr(data1(:, i), data1(:, j));
  end
end 
```

现在矩阵`correlations`告诉你标签之间的相关性。对其他文本文件执行相同操作。您可以使用以下方法制作谐波均值矩阵：

```
h_means = correlations1.*correlations2./(correlations1+correlations2); 
```

您可以通过计算数据矩阵每列中 1 的数量来找到 30 个最常见的标签。由于我们想在两个文件中找到最常见的标签，我们将首先添加数据矩阵：

```
[~, tag_ranks] = sort(sum(data1 + data2, 1), 'descending'); %get the indices in sorted order
top_tags = tag_ranks(1:30); 
```

对于最后的树构建，您要么想要创建一个树类（参见[classdef](http://www.mathworks.co.uk/help/techdoc/ref/classdef.html)），要么将树存储在一个[数组](http://en.wikipedia.org/wiki/Binary_tree#Arrays)中。要找到前两个最高谐波均值，您需要查看 h_means 矩阵；对于标签 m1，我们可以这样做：

```
[~, tag_ranks] = sort(h_means(m1, :), 'descending');
top_tag = tag_ranks(1);
second_tag = tag_ranks(2); 
```

然后，您需要将这些标签插入到树中并重复。

# aptana3 - 在 Aptana Studio 中禁用 CSS 验证

> ID：10082737
> 
> 赞同：3
> 
> 时间：2012-04-10T03:23:24.903
> 
> 标签：aptana3

我正在使用 Aptana Studio 3.0.9，它目前在 CSS 文件上标记了许多错误。

我已经尝试过[这里](https://stackoverflow.com/questions/6652793/how-can-i-suppress-certain-css-errors-in-aptana-studio-3)的过程，包括按 .* 过滤（应该过滤每个 CSS 错误），但错误仍然存​​在。我已经清理，重新启动，它们不会消失。

[这里](https://stackoverflow.com/questions/7323107/disabling-css-validation-in-aptana-studio-3)的方法不是一个选项，因为右键单击错误不会提供删除选项。

有问题的文件是

*   boostrap.css
*   选择的.css

这两个都是积极开发的，经过良好测试的文件。问题是因为 Aptana 将它们标记为有错误，所以整个项目都被标记了。这既烦人又危险，因为我不太适应我在开发过程中实际可能犯的错误。

我怎样才能摆脱错误？我可以将它们隐藏在项目资源管理器中。我可以摆脱所有 CSS 验证（在任何情况下我都没有使用很多自己的 CSS）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:44:54.740

我正在使用适用于 Linux 的 Aptana 3.0.9。所以希望在你使用的任何操作系统上都是一样的。但我认为它应该非常接近。

此解决方案将完全关闭 css 的错误

基本上类似于您发布的第一个链接。

转到窗口 -> 首选项 -> Aptana Studio -> 验证

现在在此选项卡上，如果未选择 CSS，请选择它。

验证器应该有一部分。应检查 W3C 样式表验证器。如果您取消选中它，css 验证就会消失，并且您不会再收到错误。

# java - 我可以在 Java 中使用验证较少的 StAX 解析器吗？

> ID：10082738
> 
> 赞同：0
> 
> 时间：2012-04-10T03:23:34.823
> 
> 标签：java, xml, streaming, xml-parsing, stax

我有以下无效的 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<Page num="1" crop_box="0, 0, 595, 842" media_box="0, 0, 595, 842" rotate="0">
    <Flow id="1">
        <Para id="1">
            <Line box="90, 754.639, 120.038, 12">
                <Word box="90, 754.639, 22.6704, 12">This</Word>
            </Line>
        </Para>
    </Flow>
</Page>
<?xml version="1.0" encoding="utf-8" ?>
<Page num="1" crop_box="0, 0, 595, 842" media_box="0, 0, 595, 842" rotate="0">
    <Flow id="1">
        <Para id="1">
            <Line box="90, 754.639, 120.038, 12">
                <Word box="90, 754.639, 22.6704, 12">This</Word>
            </Line>
        </Para>
    </Flow>
</Page> 
```

虽然它在结构上是无效的（它有两个根元素并且 XML 序言出现了两次），但它仍然可以被正确解析（即标签正确且内容也正确）。

所以，问题是，Java 中是否有一个 StAX（或任何其他基于流的）XML 解析器可以让我这样做？我检查了**XMLInputFactory**中的所有选项，但它们似乎都不允许解析器接受这种格式错误的 XML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:54:58.187

我严重怀疑您是否能够获得任何标准的 Java 工具来按原样解析文档。但是，您可以自己找到边界并解析各个文档。只需查找`"<?xml"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:44:16.897

只需为自己编写一个`FilterReader`或`FilterInputStream`派生类，当它看到一个新的 XML 标头时返回一次 EOF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:00:29.433

我已经创建了一个解析方法，它返回我的消息，它是消息类型的类（它的我的类具有我需要过滤掉的 Rss 的内容）

我的方法如下

```
 @Override
public List<Message> parse() {
    // TODO Auto-generated method stub
    final Message currentMessage = new Message();
    RootElement root = new RootElement(RSS);
    final List<Message> message = new ArrayList<Message>();
    Element channel = root.getChild(CHANNEL);
    Element item = channel.getChild(ITEM);

    item.setEndElementListener(new EndElementListener() {

        @Override
        public void end() {
            message.add(currentMessage.copy());     
        }
    });

    item.getChild(TITLE).setEndTextElementListener(new EndTextElementListener(){
        public void end(String body) {
            currentMessage.setTitle(body);
        }
    }); 

    item.getChild(LINK).setEndTextElementListener(new EndTextElementListener() {
        @Override
        public void end(String body) {
            currentMessage.setLink(body);   
        }
    });
    item.getChild(DESCRIPTION).setEndTextElementListener(new EndTextElementListener(){
        public void end(String body) {
            currentMessage.setDescription(body);
        }
    });
    item.getChild(PUB_DATE).setEndTextElementListener(new EndTextElementListener(){
        public void end(String body) {
            currentMessage.setDate(body);
        }
    });
    /*item.getChild(IMAGE).setEndTextElementListener(new EndTextElementListener(){
        public void end(String body) {
            currentMessage.setImage(body);
        }
    });*/

    try {
        Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch(Exception e){
        e.printStackTrace();
    }

    return message;
} 
```

希望这可以帮助

# asp.net - ASP 中的 HTML 输入：UpdatePanel

> ID：10082739
> 
> 赞同：1
> 
> 时间：2012-04-10T03:23:42.177
> 
> 标签：asp.net, html, file-upload, updatepanel

我在 asp:UpdatePanel 中有一个 html 输入控件，并且在 asp:PostBackTrigger 标记中指定了其关联的上传按钮。这是aspx代码：

```
<asp:UpdatePanel ID="upGallery" UpdateMode="Conditional" runat="server">

<ContentTemplate>
    <portal:ModuleTitleControl id="Title1" runat="server" />
    <portal:OuterBodyPanel ID="pnlOuterBody" runat="server">
    <portal:InnerBodyPanel ID="pnlInnerBody" runat="server" CssClass="modulecontent">

<div id="Uploader" runat="server">
    <h2>Upload a docx file to be translated.</h2>
    <input id="input_FileUpload" runat="server" type="file" />
    <asp:Button ID="button_UploadFile" runat="server" OnClick="button_UploadFile_Click" Text="Upload" />
</div>

</portal:InnerBodyPanel>
</portal:OuterBodyPanel>
</ContentTemplate>
<Triggers>
    <asp:PostBackTrigger ControlID="button_UploadFile" />
</Triggers>
</asp:UpdatePanel> 
```

下面是检索输入控件“input_FileUpload”值的代码：

```
string filename = input_FileUpload.Value; 
```

当我单步执行代码时，文件名始终为空。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:28:57.513

FileUpload 控件的 UpdatePanel 存在已知问题。查看之前的讨论：[UpdatePanel 中的 FileUpload 控件而不刷新整个页面？](https://stackoverflow.com/questions/35743/fileupload-control-inside-an-updatepanel-without-refreshing-the-whole-page)

# algorithm - 有限制地对整数进行排序

> ID：10082745
> 
> 赞同：3
> 
> 时间：2012-04-10T03:24:52.547
> 
> 标签：algorithm, sorting, time-complexity

如果我们有一个整数数组，那么如果每一步唯一允许的操作是：将元素移动到任一极端，我们如何确定对它们进行排序所需的最小步骤（按升序排列）？例如，如果我们有

`7 8 9 11 1 10`

然后在第一步中可以将 11 移动到右端，在第二步中将 1 移动到左端以获得 1 7 8 9 10 11 。因此总步骤 =`2` 可以在这里应用冒泡排序吗？但最坏的情况复杂度将是 O(n^2) 。那么我们怎样才能更有效率呢？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:00:40.200

这是一个需要 O(n log n) 时间、O(n) 辅助空间和恰好 n 个 MoveToFront 操作的解决方案。

给定输入数组 A，使用值/索引对创建第二个数组 B，如下所示...

```
7 8 9 11 1 10  ->  (7 0) (8 1) (9 2) (11 3) (1 4) (10 5)
[this step takes O(n) time and O(n) space] 
```

然后按每对值的降序对 B 进行排序...

```
(7 0) (8 1) (9 2) (11 3) (1 4) (10 5) -> (11 3) (10 5) (9 2) (8 1) (7 0) (1 4)
[this step takes O(n log n) time] 
```

准备一棵二叉搜索树，T。

现在对 B 中的每个元素执行以下操作...

```
Let I be the index of this element.
Let V be the sum of I and the number of elements in T that are greater than I.
Do a MoveToFront operation on the Vth element of A.
Add I to T.
[Both of the operations on T take O(log n) time] 
```

这是适用于您的示例数组的算法

```
(11 3)
    I := 3
    V := 3 + 0 = 3
    MoveToFront(3): 7 8 9 11 1 10  ->  11 7 8 9 1 10
    T: ()  ->  (3)

(10 5)
    I := 5
    V := 5 + 0 = 5
    MoveToFront(5): 11 7 8 9 1 10  ->  10 11 7 8 9 1
    T: (3)  ->  (3 5)

(9 2)
    I := 2
    V := 2 + 2 = 4
    MoveToFront(4): 10 11 7 8 9 1  ->  9 10 11 7 8 1
    T: (3 5)  ->  (2 3 5)

(8 1)
    I := 1
    V := 1 + 3 = 4
    MoveToFront(4): 9 10 11 7 8 1  ->  8 9 10 11 7 1
    T: (2 3 5)  ->  (1 2 3 5)

(7 0)
    I := 0
    V := 0 + 4 = 4
    MoveToFront(4): 8 9 10 11 7 1  ->  7 8 9 10 11 1
    T: (1 2 3 5)  ->  (0 1 2 3 5)

(1 4)
    I := 4
    V := 4 + 1 = 5
    MoveToFront(5): 7 8 9 10 11 1  ->  1 7 8 9 10 11
    T: (0 1 2 3 5)  ->  (0 1 2 3 4 5) 
```

我想您可以找到对使用少于 n 个 MoveToFront/Back 操作的数组进行排序的方法，但我认为您无法在少于 O(n log n) 的时间内找到这些数组。但是，如果这些操作很慢，那么可能值得使用一种需要更多时间来计划的算法，这样您就可以减少这些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:49:19.967

你能稍微澄清一下这个问题吗？当您说列表时，您是指链表还是数组？如果它不是链表，我对有限的操作集有点困惑。如果它是一个链表，您可能可以修改以平均 O(nlgn) 时间运行的快速排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:50:28.653

本质上，您提到的数据结构是链表。对于链表，您可以使用快速排序或合并排序（ O(nlogn) ）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T07:29:24.493

这听起来不像是排序问题。你只需要找出你需要做多少动作，但你不需要对数组进行排序。我敢打赌，这可以比 O(n log n) 更快地完成

我提出这样的解决方案：只计算有多少 a[i] > a[i - 1]。这将是你的结果。

论证：如果您有 a[i] > a[i-1]，则意味着 a[i] 或 a[i-1] 不在它们的位置。这样你就可以：

1) 将 a[i-1] 移动到数组的开头

2) 将 a[i] 移动到数组的末尾。

**更新。**您需要定义要移动的 a[i] 或 a[i-1] ，对于数组的示例： 7 8 9 11 1 10 您有两个比较，显示了哪些不合适： 11 > 1 和 11 > 10。所以这绝对是**动态规划**的任务。但是，它仍然比 O(n log n) 快

# sql - 在数据库中存储多项选择测验 - 确定模式

> ID：10082751
> 
> 赞同：16
> 
> 时间：2012-04-10T03:25:20.627
> 
> 标签：sql, database, database-design

我正在尝试实施多项选择测验，并希望将我所有的问题和答案存储在 SQLite 数据库中。我会有很多问题，每个问题都会显示 2 个或更多可能的答案。

我的问题是，我应该如何将问题和答案存储在数据库中？我对模式有两个想法（粗体的主键）

1.  作为（多对多）

问题（**questionID** :int , questionString:String, correctAnswerID:int)

答案 ( **answerID** :int , answerString:String)

questions_and_answers ( **questionID** , **answerID** )

2.

问题（**questionID**：int，questionString：String，correctAnswerID：int）

答案（**answerID**：int， answerString：String， questionID：int*外键*）

我不确定哪个更好，或者是否有其他方法？

也许`questions_and_answers`会变得非常大并导致较长的检索时间和内存问题？再说一次，我假设`question_and_answers`会在主键上被索引。在第二个模式中，是否`answers`会被索引？意味着搜索时间会因为必须搜索整个表而增加？`answerID``questionID`

可能有大约 10,000 - 20,000 个答案。（测验可以在移动设备上运行，问题需要“立即”显示）

注意：我不希望问题之间的答案有太多重叠。`questions_and_answers`考虑到表所需的额外空间，我认为重叠量不会意味着存储的数据更少

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T03:44:13.107

你的第二个模式更好，因为它模拟了实际的域：每个问题都有一组答案。即使您可以通过存储一次重复的答案来“压缩”数据，但它*与实际域不匹配*。

以后你会想要编辑答案。对于模式 1，这意味着首先搜索该答案是否已经存在。如果确实存在，那么您将不得不检查是否有任何问题仍然依赖于旧答案。如果它不存在，您仍然需要检查是否有任何其他问题依赖于该答案，然后就地编辑该答案或创建一个新答案。

模式 1 只会让生活变得非常艰难。

要回答您的索引问题，您需要在 questionId 上添加索引。拥有该索引后，查找问题的答案应该可以扩展。

现在，完全不同的是，为什么要为此使用数据库？**考虑将它们存储为标准格式（如 json）的简单文档**。每当您查询一个问题时，您几乎总是想要答案，反之亦然。您可以一步加载整个文档，而不是执行多个查询。

如果您随后发现需要更高级的存储（查询、冗余等），您可以迁移到 MongoDB 或 CouchDB 等文档数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-31T04:40:24.497

似乎死锁（循环循环），因为**questionID**列在**答案**表中被称为外键，而**correctAnswerID列在****问题**表中被称为外键。

It's better to create a bit type column in answers table to marked the correct answer and remove **correctAnswerID** column.

# java - 在子类中设置超类字段

> ID：10082757
> 
> 赞同：2
> 
> 时间：2012-04-10T03:25:48.647
> 
> 标签：java, design-patterns

我有一个抽象的 Java 类，它有一个哈希码字段，应该由具体的子类初始化。我正在考虑使初始化方法抽象，即

```
abstract class A {
  protected int hashcode;
  // hashcode should be initialized in constructor
  protected A () { hashcode = setHashcode(); }
  abstract int setHashcode() {} // implemented by subclasses
} 
```

但不幸的是，不同的子类需要为`setHashcode`.不会工作。所以我想知道是否有不同的方式/设计模式来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:32:38.097

您实际上不需要将值存储在超类中，只需声明一个`getHashCode`子类将覆盖的抽象。

```
public abstract class Base {
  protected abstract int getHashCode();
} 
```

这更好，因为无论其存储要求如何，都保留了方法的“意图”。

顺便说一句，`hashCode`已经在 中定义`Object`，并且可以被子类覆盖。如果您的哈希码概念与`Object`提供的不同，也许您应该重命名它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T03:29:03.687

> 但是由于对 super 的调用必须是 B 的构造函数中的第一行，所以这个方案不起作用

为什么它不起作用？如果将哈希码的计算放在子类的静态函数中，则可以将预制的哈希码传递给超类的构造函数。

```
class BaseClass {
    private int hashCode;
    protected BaseClass(int hashCode) {this.hashCode = hashCode;}
}
class DerivedClass : BaseClass {
    private static int calcHash(String str) {
        return str.hashCode();
    }
    public DerivedClass(String s) {
        super(calcHash(str));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T03:32:59.407

听起来接口可能适合初始化，因此您创建的任何子类都可以重载接口实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:44:19.987

改变：

```
abstract int setHashcode(); 
```

至：

```
abstract int getHashcode(Object...objects); 
```

并且子类需要检查传递的对象的数量和类型。

然后您拨打以下电话：

```
 hashcode = getHashcode(); 
  hashcode = getHashcode(o1); 
  hashcode = getHashcode(o1,o2); 
```

# javascript - 自定义语音输入按钮？

> ID：10082760
> 
> 赞同：2
> 
> 时间：2012-04-10T03:26:06.453
> 
> 标签：javascript, html, google-chrome, speech-to-text

我正在尝试创建一个可以弹出[语音输入面板](http://slides.html5rocks.com/#speech-input)（在 HTML5 中）的按钮，并且我尝试使用`<label>`它：

```
<label>
    <input type="text" x-webkit-speech />
    ​&lt;button>Speak</button>
</label>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/DerekL/XzD2U/](http://jsfiddle.net/DerekL/XzD2U/)

但它只专注于`<input>`D：那不是我想做的。
有什么建议吗？（它不必支持 IE 或 Firefox，只支持谷歌浏览器）

## 添加

这就是我想要的：http: [//jsfiddle.net/DerekL/RWCJR/](http://jsfiddle.net/DerekL/RWCJR/)
但我想使用*真正的*按钮而不是这个假`<input>`按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:58:43.340

你能完成的事情非常有限。你所追求的是不可能的。触发语音的唯一方法是单击文本框中的麦克风图标。如果您愿意使用 javascript，那么我认为您可以塞进一些东西。这就是我的做法。

1.  创建一个仅足以包含麦克风图标的文本输入
2.  使用变换使其按钮大小
3.  使其透明并将其覆盖在真正的按钮上
4.  单击隐形麦克风时，使用 javascript 将新值复制到您的真实文本字段中。

[http://jsfiddle.net/Lu3Vb/](http://jsfiddle.net/Lu3Vb/)

你可以在这个例子中看到我是如何一起破解它的。有两个按钮，一个是麦克风覆盖完全透明，一个是部分透明并带有红色边框，以便您可以看到效果。

CSS

```
input.speechbutton {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    height: 20px;
    width: 20px;
    margin-left: 30px;
    -webkit-transform: scale(3.0, 1.0);
} 
```

HTML

```
<div style="position: relative;">
    <button>Speech</button>
    <input class="speechbutton" type="text" value="" x-webkit-speech />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:02:23.600

试试这个：

```
<label>
    <input onfocus="document.getElementById('myButton').focus();" type="text" x-webkit-speech />
    <button id="myButton"  >Speak</button>
</label> 
```

# java - 二叉树变量类型问题

> ID：10082761
> 
> 赞同：0
> 
> 时间：2012-04-10T03:26:15.643
> 
> 标签：java, tree, binary-tree

我在编写将字符串单词插入二叉树的方法时遇到问题。下面的代码是有问题的方法。基本上，如果单词尚未在树中（作为 a `BinaryTreeNode`），则插入该单词，如果它在树中，则其频率（在 内的计数变量`BinaryTreeNode`）增加一。我的问题是临时变量`searchWord`。将其定义为 a`String`会创建类型不匹配和声明`getFrequency()`未为 type 定义的语句`String`。泛型类型`T`仅作为占位符存在 - 它也不起作用。因此它应该被定义为什么？

buildBinaryTree 方法：

```
public static void buildBinaryTree(String word) {
    //if word is already in tree
    if(wordTree.contains(word)) {
        //find existing word node
        T searchWord = wordTree.find(word);  //problem here

        //increment frequency by 1
        searchWord.setFrequency(searchWord.getFrequency() + 1);
    } else {
        //add word to tree
        System.out.println(word);
        wordTree.addElement(word);
    }
} 
```

BinaryTreeNode 构造函数：

```
/**
 * Creates a new tree node with the specified data.
 * @param obj the element that will become a part of the new tree node
 */
BinaryTreeNode(T obj) {
   element = obj;
   left = null;
   right = null;
   frequency = 1;
} 
```

频率获取/设置方法：

```
/**
 * Gets the frequency.
 * @return the frequency
 */
public int getFrequency() {
   return frequency;
}

/**
 * Sets the frequency.
 * @param frequency the frequency to set
 */
public void setFrequency(int frequency) {
   this.frequency = frequency;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:31:00.883

聊天结束后，您应该定义一个类，它同时具有 a`String`和`int`您用作放置在二叉树中的类型，以替换类型变量`T`。然后，您可以定义诸如`getString()`返回`String`、`incrementFrequency()`频率加一等方法。当您从二叉树中获取对象时，调用这些方法将是正确的类型。

# c - 为什么输入（新行）不会退出scanf？

> ID：10082762
> 
> 赞同：3
> 
> 时间：2012-04-10T03:26:24.823
> 
> 标签：c

这是程序：

```
#include "stdio.h"

int main()
{
    int minx, x, y, z;

    printf("Enter four ints: ");
    scanf( "%i %i %i %i", &minx, &x, &y, &z);

    printf("You wrote: %d %d %d %d", minx, x, y, z);
} 
```

假设我输入如下：1 2 3 4（然后按`enter`）。运行并`scanf()`读取输入缓冲区 = 1 (space) 2 (space) 3 (space) 4 (space)(\n) 它读取直到 (\n) 并且 \n 将保留在缓冲区中。

如果我输入如下：1（然后按`enter`）2（然后按`enter`）3（然后按`enter`）4（然后按`enter`）。运行并`scanf()`读取输入缓冲区 = 1(\n)2(\n)3(\n)4(\n)(\n)。

在这两种情况下，`scanf()`跳过换行符、空格并尝试读取`int`.

但是如果我输入 1 （然后按`enter`）（然后按`enter`）...`scanf()`如果我继续按 ，则永远不会运行`enter`。

我的问题是：什么触发`scanf()`？它只会在它知道所有正确的东西`%d`都放在缓冲区中之后运行，然后如果用户按下回车就运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:30:44.993

因为`scanf()`忽略空格，而空格包括换行符。

每次都以相同的`scanf()`方式处理这四个数字：跳过空格，然后读取一个看起来像数字的候选序列（所以符号和数字），并在第一个不能成为候选序列一部分的字符处停止读取; 然后它转换候选序列（溢出等未定义的行为）。如果您在`4`（而不仅仅是换行符）之后输入了一个空格，则空格和换行符仍将等待下一次读取。如果没有空格，则换行符将等待读取。

如果您输入了非数字字符（标点符号或字母），`scanf()`则将返回错误（或转换的数字少于 4 个 - 除非字母在第四个数字之后）。

当您键入一个数字后跟任意数量的换行符时，您只是给`scanf()`空白区域以跳过。它不会停止，直到它收到 EOF（读取零字节）或读取错误（或转换错误，例如字母或标点字符而不是数字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:38:13.373

这是 c99 标准中 scanf 的预期行为：

转换规范按以下步骤执行： - 跳过输入的空白​​字符（由 isspace 函数指定），除非规范包含“[”、“c”或“n”说明符。

它在分隔符上进行标记（空格制表符换行符等..）最后一个换行符是标记化的一部分..否则它怎么知道你的整数何时完成？:D

我认为这解决了你的问题？我不知道 。希望这可以帮助

# python - SWIG、Python 和指针

> ID：10082767
> 
> 赞同：4
> 
> 时间：2012-04-10T03:27:07.677
> 
> 标签：python, swig

我正在尝试包装一个源不可用的 C API（静态库）。使用 API 的首要任务之一是设置环境结构。

```
env_t * my_env = NULL;
result = env_setup(&my_env); 
```

有声明

```
error_code env_setup(env_t ** env); 
```

考虑到 env 结构的布局是隐藏的，甚至可以在 SWIG 中制造这种类型的指针（env_t **）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:53:01.343

您可能需要对类型映射进行一些操作。

```
%typemap(in) env_t ** (env_t *temp) %{
    temp = env_alloc();
    PyObject *iter = PyObject_GetIter($input);
    for (PyObject *item; (item = PyIter_Next(it));) {
        PyObject *key = PyObject_Str(item);
        PyObject *val = PyObject_GetItem($input, key);
        env_set(temp, PyString_AsString(key), PyString_AsString(val), ENV_OVERRIDE);
        Py_DECREF(val);
        Py_DECREF(key);
        Py_DECREF(item);
    }
    Py_DECREF(iter);
    $1 = &temp;
%}
%typemap(argout) env_t** %{
    PyObject *o = PyDict_New();
    for (char **val = env_array(*$1); *val; val++) {
        char *eq = strchr(*val, '=');
        *eq = '\0';
        PyMapping_SetItemString(o, *val, eq + 1);
    }
    env_free(*$1);
    $result = SWIG_Python_AppendOutput($result, o);
%} 
```

完全未经测试且缺乏错误处理，但这里的目的是在从 Python 调用到 C 时将 a`dict`转换为 an ，在从 C 调用到 Python 时从to转换。`env_t **``env_t **``dict`

# mysql - 获取群组最新记录的标题

> ID：10082768
> 
> 赞同：0
> 
> 时间：2012-04-10T03:27:08.987
> 
> 标签：mysql, join

我正在做一个自我加入，我有以下查询：

```
select 
    max( wf1.id ) as latest_id, 
    max( wf1.created ) as latest_created, 
    wf1.id, wf1.created, wf1.title,
    wf2.id, wf2.created, wf2.title
from
    worksheet_forms wf1
join
    worksheet_forms wf2
on
    max( wf1.id ) = wf2.id
where 
    wf1.company_id = '000002'
group by 
    wf1.generated_id 
```

但我收到一个错误：

```
MySQL said: 

#1111 - Invalid use of group function 
```

我正在尝试做的是获取表中组的最新记录的标题。

编辑：

```
+-----------------------------------------------------------------------+
|  id |   generated_id  |  company_id  |  title  |      created         |
+-----------------------------------------------------------------------+
|  1  |  aaajdfie34343  |    000002    |   ws1   | 2012-02-08 17:27:30  |
|  2  |  aaajdfie34343  |    000002    |   ws2   | 2012-02-09 17:27:30  |
|  3  |  aaajdfie34343  |    000002    |   ws3   | 2012-02-10 17:27:30  |
|  4  |  bbbjdfie34343  |    000002    |   ws4   | 2012-02-11 17:27:30  |
|  5  |  bbbjdfie34343  |    000002    |   ws5   | 2012-02-12 17:27:30  |
|  6  |  bbbjdfie34343  |    000002    |   ws6   | 2012-02-13 17:27:30  |
|  7  |  bbbjdfie34343  |    000002    |   ws7   | 2012-02-14 17:27:30  |
|  8  |  cccjdfie34343  |    000002    |   ws8   | 2012-02-15 17:27:30  |
|  9  |  cccjdfie34343  |    000002    |   ws9   | 2012-02-16 17:27:30  |
+-----------------------------------------------------------------------+ 
```

现在，我想要一个结果：

```
+-----------------------------------------------------------------------+
|  id |   generated_id  |  company_id  |  title  |      created         |
+-----------------------------------------------------------------------+
|  3  |  aaajdfie34343  |    000002    |   ws3   | 2012-02-10 17:27:30  |
|  7  |  bbbjdfie34343  |    000002    |   ws7   | 2012-02-14 17:27:30  |
|  9  |  cccjdfie34343  |    000002    |   ws9   | 2012-02-16 17:27:30  |
+-----------------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:57:53.880

太好了，这更容易理解。运行这个：

```
select t1.* from t t1
left join t t2
on t1.generated_id = t2.generated_id and t1.created < t2.created
where t2.created is null 
```

你会得到这个：

```
+----+----------------+------------+-------+------- ----------------+
| 身份证 | GENERATED_ID | COMPANY_ID | 标题 | 创建 |
+----+----------------+------------+-------+------- ----------------+
| 3 | aaaajdfie34343 | 000002 | WS3 | 2012-02-10 17:27:30 |
| 7 | bbbjdfie34343 | 000002 | WS7 | 2012-02-14 17:27:30 |
| 9 | cccjdfie34343 | 000002 | ws9 | 2012-02-16 17:27:30 |
+----+----------------+------------+-------+------- ----------------+

```

只需选择您感兴趣的领域。

# java - 是否可以将 JavaVM * 和 JNIEnv * 保存为全局变量并在其他地方使用？

> ID：10082769
> 
> 赞同：2
> 
> 时间：2012-04-10T03:27:37.337
> 
> 标签：java, java-native-interface, jdk1.6, jrockit

JavaVM *javaVM = NULL; JNIEnv *jniEnv = NULL;

( *createJavaVM )( &javaVM, ( void ** )&jniEnv, &javaVMInitArgs )

其中 javaVM * 和 jniEnv * 是全局变量

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:38:21.063

> 可以将 JavaVM * 保存为全局变量并在其他地方使用吗？

是的。

> 可以将 JNIEnv * 保存为全局变量并在其他地方使用吗？

不，这代表特定 JNI 方法调用的上下文。它依赖于当前线程，当前方法的参数，当前方法创建的本地引用，各种各样的东西，一旦JNI方法返回就失效了。

# javascript - Ajax 函数用图像填充表格，但不能使用实时选择

> ID：10082773
> 
> 赞同：1
> 
> 时间：2012-04-10T03:29:05.587
> 
> 标签：javascript, jquery, ajax

我有一个带有标题和空正文的表格：

```
<table style="width:50%;" class="adminlist">
<thead>
<tr>
<th style="width:80%;">Number</th>
<th style="width:20%;">Quantity</th>
<th style="width:20%;"></th>
</tr>
</thead>
<tbody id="body_orderproducts">
<tr style="background-color: rgb(170, 170, 170);">                      <td class="kmx_nodata" colspan="3">NO DATA.</td>
</tr>
</tbody>
</table> 
```

现在，我加载数据并用 ajax 函数填充 tbody：

```
var baseurl = '<?php echo HtmlHelper::getComponentPath(true); ?>';
var urlquery_ajax = '<?php echo RouteHelper::urlQueryWithRawAndToken('order&task=');?>';
var order_id = <?php echo $this->item->id;?>;
var kmx = jQuery.noConflict();
kmx().ready(function() {
/**
* Ajax call to load the products linked to the order
*/
function loadTableProducts() {
    var myProductTableBody = kmx('#body_orderproducts');
    myProductTableBody.empty();
    kmx.ajax({
        type: "POST",
        url: baseurl,
        cache: false,
        data: urlquery_ajax + "getOrderProductsInJsonFormatAjax&order_id=" + order_id,
        success: function(data){
                    data = kmx.parseJSON(data);
                    var myProductTableBody = kmx('#body_orderproducts');
                    populateTable(myProductTableBody, data);
                 },
         failure: function(msg){
                    msg = kmx.trim(msg);
                    alert('Error: ' + msg.responseText);
                  }
    });
}
/**
* Populate the table
*/
function populateTable(myTBodyObj, myData) {
    if (myData.rows.length > 1) {
        kmx.each(myData.rows, function(index,item) {
            myTBodyObj.append('<tr><td>' + item.number + '</td><td align="right">' + item.quantity + '</td><td><img id="delete_product_' + item.id + '" name="delete_product_' + item.id + '" class="kmx_image_delete" alt="<?php echo JText::_( 'Delete this product'); ?>" src="components/com_cmpningbo/assets/images/delete.png" /></td></tr>');
        });
    }
    else {
        myTBodyObj.append('<tr><td colspan="2" class="kmx_nodata"><?php echo JText::_( 'NO DATA.'); ?></td></tr>');
    }
    return;
}}
loadTableProducts();
}); 
```

一切正常，结果类似于： ![表体加载成功](../Images/15a8c2a3538d96088a9dfe9bfc609cee.png)

现在，我想添加一个代码来处理单击图像“删除”时的事件：

```
kmx('img[name^="delete_product_"]').live('click', function() {
        alert('click');
        return false;
    }); 
```

每个“删除”图像都有一个 id 和名称，例如：delete_product_XX，其中 XX 是要删除的记录的 ID。当表格主体以 ajax 加载时，该代码不起作用，但在页面加载（无 ajax）上加载表格主体时，该代码有效。我已经检查过这个问题，似乎关于图像的直播有问题？我不知道如何解决？任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:35:12.267

由于您已经在所有删除按钮上都有一个公共类，您可以像这样创建一个委托事件处理程序，以使用一个事件处理程序来处理它们：

```
kmx("#body_orderproducts").on('click', '.kmx_image_delete', function() {
    // you can examine the other cells in this row to get the desired ID
    // or you can parse it off the end of the image id
    var deleteID = this.id.replace("delete_product_", "");
    // now do whatever you want to do to process the deleteID
}); 
```

为了使委托事件处理对动态创建的对象起作用，您将第一个选择器设置为非动态创建的静态父对象（在您运行代码以安装事件处理程序时存在）并将第二个选择器设置为与动态创建对象匹配的东西。

仅供参考，`.live()`已从所有版本的 jQuery 中弃用。对于 jQuery 1.7+，`.on()`推荐使用。对于 1.7 之前的 jQuery，`.delegate()`推荐使用。这是因为两者`.delegate()`和`.on()`都可以比 更有效`.live()`。

对于 1.7 之前的 jQuery 版本，它将是这样的：

```
kmx("#body_orderproducts").delegate('.kmx_image_delete', 'click', function() {
    // you can examine the other cells in this row to get the desired ID
    // or you can parse it off the end of the image id
    var deleteID = this.id.replace("delete_product_", "");
    // now do whatever you want to do to process the deleteID
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:37:52.977

如果您使用单个类选择器绑定我们所有的删除图像，则可以使用“this”关键字将 DOM 树爬到顶层`tr`行元素，然后向下挖掘以获取您感兴趣的项目。删除操作。

```
kmx('img.kmx_image_delete').live('click', function() {
    alert('click');
    alert("deleting row with id = " + kmx(this).parent().parent().find("td:first").html());
    return false;
}); 
```

这也应该更容易运行，因为 live 函数只需要查找添加到 DOM 中与该 CSS 类选择器匹配的所有新行。

使用此代码，如果我单击列表中的第二个删除图像，我应该会看到两个警报：

```
click

12 
```

最后一点，[jQuery live 文档](http://api.jquery.com/live/)已经明确表示 live 已被弃用。它被“on”方法取代：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

[jQuery 关于](http://api.jquery.com/on/)处理程序的使用与 live 非常相似：

```
kmx('img.kmx_image_delete').on('click', function() {
    alert('click');
    alert("deleting row with id = " + kmx(this).parent().parent().find("td:first").html());
    return false;
}); 
```

如果您仍然无法将事件附加到您的删除图像，我强烈建议您升级到最新版本的 jQuery 并尝试使用“on”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:48:53.713

好的，jfriend00提到的方法工作正常：

```
$kmx("#body_orderproducts").delegate('.kmx_image_delete', 'click', function() {
        var order_product_id = kmx(this).attr('id');
        order_product_id = order_product_id.replace('delete_order_product_', '');
        deleteProduct(order_product_id);
    }); 
```

但我不知道为什么 live 方法适用于我的应用程序的其他部分：

```
$('[class^="' + messageid_prefix + '"]').live('click', function() {
 var className = kmx(this).attr('className');
 var id = className.replace(messageid_prefix, '');
 [...]
}); 
```

jQuery 1.4

# c++ - 没有合适的构造函数，以及不兼容的声明错误

> ID：10082774
> 
> 赞同：1
> 
> 时间：2012-04-10T03:29:09.317
> 
> 标签：c++, constructor, switch-statement, declaration, header-files

我的头文件：

```
// Definition of class SunshineWeb that counts Product 1, Product 2
// and Product 3 retail prices. Refer to Project 2.cpp for member
// functions.
using namespace std;
#include <string> // program uses C++ standard string class
// SunshineWeb class definition
class SunshineWeb
{
public:
    SunshineWeb( string ); // constructor initialises customer name
    void setCustomerName( string ); // function to get customer name
    string getCustomerName; // function to retrieve customer name
    void displayMessage(); // displays a welcome message
    void inputProducts(); // inputs a number of products
    void displayProductTotal(); // total number of what products
private:
    string CustomerName; // customer's name
    int Product1Count;
    int Product2Count;
    int Product3Count;
}; // end of class SunshineWeb 
```

成员函数定义、开关计数器和所有这些：

```
// Project 2.cpp : Defines the entry point for the console application.
// Member-function definitions for class SunshineWeb that uses a switch
// statement to count Products, then calculate and display Product total.
#include "stdafx.h"
#include <iostream>
#include "SunshineWeb.h"
#include <iomanip>
using namespace std;

//constructor initialises CustomerName with string supplied as arguement;
//initialises counter data member to 0
SunshineWeb::SunshineWeb( string name )
{
    setCustomerName( name ); // validates and store CustomerName
    Product1Count = 0; // initialises count of Product 1 to 0
    Product2Count = 0; // initialises count of Product 2 to 0
    Product3Count = 0; // initialises count of Product 3 to 0
} // end SunshineWeb constructor

// function to set the customer's name; limits to 25 or fewer characters
void SunshineWeb::setCustomerName( string name )
{
    if ( name.length() <= 25 ) // if the name has 25 or fewer characters
        CustomerName = name;
    else // if name is longer than 25 characters
    { // sets CustomerName to the first 25 characters of parameter name
        CustomerName = name.substr( 0, 25 ); // selects first 25 characters
        cout << "Name \"" << name << "\" exceeds maximum length (25). \n"
            << "Limiting CustomerName to first 25 characters.\n" << endl;
    } // end if... else statement
} // end function setCustomerName

// function to retrieve customer's name
string SunshineWeb::getCustomerName()
{
    return CustomerName;
}

// displays a welcome message to the user
void SunshineWeb::displayMessage()
{
    cout << "Welcome to Sunshine Web's store application!" << endl;
} // end function displayMessage

void SunshineWeb::inputProducts()
{
    int products; // products entered by user
    cout << "Enter 1 for Product 1, 2 for Product 2, " << endl
        << "3 for Product 3, and EOF character to end input." << endl;

    // loops until user inputs end-of-file key sequence
    while( ( products = cin.get() ) != EOF )
    {
        // determine which product was entered
        switch (products) // switch statement nested in while
        {
        case '1': // The character 1 was inputted
            ++Product1Count; // increment Product1Count
            break; // necessary to exit the switch

        case '2': // The character 2 was inputted
            ++Product2Count; // increment Product2Count
            break; // necessary to exit the switch

        case '3': // The character 3 was inputted
            ++Product3Count; // increment Product3Count
            break; // necessary to exit the switch

        case '\n': // ignores new lines,
        case '\t': // tabs,
        case ' ' : // and spaces inbetween input
            break; // exit switch

        default: // catch all other characters
            cout << "Incorrect character entered."
                << "Please enter 1, 2, 3 or EOF key." << endl;
            break; // exit switch
        } // end switch
    } // end while
} // end function inputProducts

// displays the quantity of the product and retail total
void SunshineWeb::displayProductTotal()
{
    // output summary of user orders
    cout << "Quantity of each Product ordererd by the user:"
        << "\nProduct 1, at $22.98 per unit: " << Product1Count // displays number of Product 1
        << "\nProduct 2, at $34.50 per unit: " << Product2Count // displays number of Product 2
        << "\nProduct 3, at $99.98 per unit: " << Product3Count // displays number of Product 3
        << endl;
    // algorithim used to calculate total price
        int total = static_cast <double> (Product1Count*22.98) + static_cast <double>(Product2Count*34.50) + static_cast<double>(Product3Count*99.98);
    cout << "The total price of your order is: " << fixed << setprecision(2) << total << endl;
} // end function displayProductTotal 
```

问题从 开始`string SunshineWeb::getCustomerName()`，它强调`getCustomerName()`并说明以下内容：

```
Error:declaration is incompatible with "std::string SunshineWeb::getCustomerName"
(declared at line 12 of "c:\users\user\documents\visual studio 2010\projects\project 2\project 2\SunshineWeb.h") 
```

这是主文件/执行程序的东西：

```
// creates SunshineWeb object, inputs products and displays
// total quantity and retail price of products inputted.
#include "SunshineWeb.h" // includes definition of class SunshineWeb

int main()
{
    // creates SunshineWeb object
    SunshineWeb mySunshineWeb("Sunshine Web Store");
    mySunshineWeb.displayMessage();
    mySunshineWeb.inputProducts();
    mySunshineWeb.displayProductTotal();
} // end main 
```

我的第二个问题是`SunshineWeb mySunshineWeb("Sunshine Web Store");`，它强调`Sunshine Web Store`并指出：

```
 Error: no suitable constructor exists to convert from "const char[19]" to "SunshineWeb" 
```

刚开始学习 C++ 面向对象编程，这是我为课堂编写的程序 - 有什么用？我用谷歌搜索并浏览了我的笔记，但它根本没有帮助/解决这个问题。真正让我烦恼的是没有合适的构造函数部分，因为我可以简单地将所有与客户名称相关的函数扔出窗口，因为我什至还没有实现它，因为我无法让它工作；但也许我缺少一些东西。不管怎样……我需要帮助！请救救我的宝贝！

**编辑**：感谢您的帮助，我注意到我的错误并尝试按照建议进行调整，所以我的头文件现在看起来像：

```
// Definition of class SunshineWeb that counts Product 1, Product 2
// and Product 3 retail prices. Refer to Project 2.cpp for member
// functions.
#include <string> // program uses C++ standard string class
// SunshineWeb class definition
class SunshineWeb
{
public:
    SunshineWeb( std::string ); // constructor initialises customer name
    void setCustomerName( std::string ); // function to get customer name
    std::string getCustomerName(); // function to retrieve customer name
    void displayMessage(); // displays a welcome message
    void inputProducts(); // inputs a number of products
    void displayProductTotal(); // total number of what products
private:
    std::string CustomerName; // customer's name
    int Product1Count;
    int Product2Count;
    int Product3Count;
}; // end of class SunshineWeb 
```

这修复了之前的不兼容声明错误（一个简单的拼写错误），我不确定它是否在没有合适的构造函数的情况下修复了错误，因为虽然讨厌的红色下划线消失了，但我仍然无法运行程序：我打开 Visual Studio 2010 的错误列表，我看到几个错误：

```
Error   5   error C2065: 'mySunshineWeb' : undeclared identifier    c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 9
Error   7   error C2065: 'mySunshineWeb' : undeclared identifier    c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 10
Error   9   error C2065: 'mySunshineWeb' : undeclared identifier    c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 11
Error   2   error C2065: 'SunshineWeb' : undeclared identifier  c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 8
Error   3   error C2146: syntax error : missing ';' before identifier 'mySunshineWeb'   c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 8
Error   6   error C2228: left of '.displayMessage' must have class/struct/union c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 9
Error   10  error C2228: left of '.displayProductTotal' must have class/struct/union    c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 11
Error   8   error C2228: left of '.inputProducts' must have class/struct/union  c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 10
Error   4   error C3861: 'mySunshineWeb': identifier not found  c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 8
Warning 1   warning C4627: '#include "SunshineWeb.h"': skipped when looking for precompiled header use  c:\users\user\documents\visual studio 2010\projects\project 2\project 2\sunshineweb.cpp 3 
```

是的，我是一个完全的业余爱好者，犯了（大部分）愚蠢的错误，但为了我生命中的挚爱，我似乎无法找到解决我看似简单的问题的方法。这些问题毫无意义，我正在检查一切。感谢您的帮助（和耐心显示），我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:32:01.697

```
string getCustomerName; // member function missing () in class SunshineWeb definition. 
```

至

```
string getCustomerName(); // function to retrieve customer name 
```

*   使用 C++ 初始值设定项列表。
*   [为什么包括“使用命名空间标准；” 在一个标题是一个坏主意？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

# delphi - 使用 Delphi 是否有一种低开销的方法来挂钩鼠标双击？

> ID：10082776
> 
> 赞同：2
> 
> 时间：2012-04-10T03:29:39.033
> 
> 标签：delphi, delphi-xe, mouse-hook

这是我想在 Delphi XE 中做的事情：
捕获另一个应用程序中的双击，这样当它发生并且鼠标下方的文本被突出显示时，这会根据突出显示的文本在我的应用程序中触发一系列事件。

我知道使用系统范围的鼠标挂钩来执行此操作的方法，但是...由于我的应用程序和其他应用程序在许多情况下将托管在终端服务或 citrix 环境中，因此我不太愿意使用鼠标执行此操作挂钩，因为我担心资源成本。（我正在想象服务器托管数百个鼠标钩子，每个用户一个......不寒而栗）。我是不是太谨慎了？鼠标钩的性能和稳定性能打多少？TS或者citrix环境下呢？如果我的直觉是正确的并且多个钩子的成本太高，还有其他方法吗？

我无权访问其他应用程序的源代码，并且在其中发现文本的第 3 方 Richedit 控件已被修改得面目全非，并且在发布时不响应 API。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T04:16:19.733

如果不使用系统范围的鼠标挂钩 AFAIK，这是不可能的。

您担心开销是正确的。鼠标钩子（[MouseProc](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644988%28v=vs.85%29.aspx)）在每次窗口调用`PeekMessage`或`GetMessage`有鼠标消息被检索时被调用，并且它将为每个运行的应用程序的每个窗口调用。即使您的钩子只是使用 将事件传递给下一个处理程序`CallNextHookEx()`，它也会对系统产生影响。我怀疑在 TS 下运行的多个会话会非常讨厌。

# jquery - 用指针移动外部区域中的对象

> ID：10082779
> 
> 赞同：5
> 
> 时间：2012-04-10T03:30:04.760
> 
> 标签：jquery, mouseevent

任何人，我需要帮助，我从老师那里得到了一个任务，它是关于 jquery 的，但是我发现了问题，也许你可以帮忙。案例研究如下图所示。点是如果我在蓝框区域上移动鼠标指针，那么红框区域中的对象会跟随鼠标指针在蓝框区域上的移动而移动。

![在此处输入图像描述](../Images/0809284bff408ff574965f83d94c3bb5.png)

Caption:
1\. 白框、蓝框、红框为DIV。
2、红框和蓝框是白框内的绝对位置。
3、蓝框内的蓝色圆圈代表鼠标指针被移动。
4\. 黑圈表示当鼠标指针在蓝框内移动时，物体开始移动，黑圈位置必须仍在红框内

以下是我目前得到的结果。

```
 <!DOCTYPE html>
<html>
<head>
  <style>
  div.moved { position: relative; width:620px; height:620px; top: 10px; background:blue; border:2px groove; margin: 0 auto;}
    div.tujuan { position: absolute; width:400px; height:400px; top: 0; left: 0; background:red; border:2px groove; }
        div.korban { position: absolute; width:40px; height:40px; top: 0; left: 0; background:white; border:2px groove; }
    div.sumber { position: absolute; width:200px; height:200px; bottom:0; right: 0; background:yellow; border:2px groove; cursor: pointer;}

  p { margin:0; margin-left:10px; color:red; width:220px;
      height:120px; padding-top:70px;
      float:left; font-size:14px; }
  span { display:block; }
  </style>
  <script src="jquery-latest.js"></script>
</head>
<body>
  <p>
    <span>Move the mouse over yellow box.</span>
    <span>&nbsp;</span>
  </p>

    <div class="moved">
        <div class="sumber"></div>

        <div class="tujuan">
            <div class="korban"></div>
        </div>
    </div>
<script>
    $("div.sumber").mousemove(function(e){

        var moveX = e.pageX-this.offsetLeft;
        var moveY = e.pageY-this.offsetTop;
        $("span:first").text(" LEFT : " + moveX + " , TOP : " + moveY);

        var korban = $('div.korban').offset();
        var moveX2 = e.pageX - korban.left;
        var moveY2 = e.pageX - korban.top;
        $("span:last").text(" LEFT : " + moveX2 + " , TOP : " + moveY2);

        $('div.korban').css({'margin-left' : moveX , 'margin-top' : moveY })
    });
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:59:10.107

这是你想要的吗？我稍微简化了你的代码

[http://jsfiddle.net/P7PBx/8/](http://jsfiddle.net/P7PBx/8/)

```
$("div.sumber").mousemove(function(e){
        var left = e.pageX - $(this).offset().left;
        var top = e.pageY - $(this).offset().top;        
        $('span:first').text(left + ' ' + top);

        top*=2; left*=2;
        if(top > 360) top = 360;
        if(left > 360) left = 360;
        $('div.korban').css({
            'top':top,
            'left':left
        });           
});​ 
```

# php - html表单 - 按下回车时自动按钮焦点

> ID：10082783
> 
> 赞同：3
> 
> 时间：2012-04-10T03:30:56.177
> 
> 标签：php, mysql, html, forms, focus

我正在构建一个表，我想从中更新数据库的不同字段。输出当前值，然后是提交按钮和用于输入新值的文本字段。

当我为某个字段输入新值时，我希望该文本字段的提交按钮能够自动获得焦点，以便能够简单地按 ENTER 来更新数据库。这是如何实现的？我认为简单的HTML必须是可能的。这是一段代码：

```
echo "
<form method='post'>
    <table>
        <tr>
            <th>Amount to receive</th>
            <td>" . mysql_result($result, 0, "amountToReceive") . "</td>" . "
            <td><input type='submit' value='Change' name='btnChangeAmountToReceive'> <input type='text' name='txtChangeAmountToReceive'></td>
        </tr><tr>
            <th>Amount received</th>
            <td>" . mysql_result($result, 0, "amountReceived") . "</td>" . "
            <td><input type='submit' value='Change' name='btnChangeAmountReceived'> <input type='text' name='txtChangeAmountReceived'></td>
        </tr>
    </table>
</form>"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T03:49:41.993

实现这一点的方法是使用 javascript，我建议您使用 jQuery。

```
 $('#mytextfield').change(function(e) {
        $('input[type=submit]').focus();
    }); 
```

或者你可以试试 jarry's

```
<input type="text" onkeypress="return focusOnEnter(event)" /> 
<script type="text/javascript">
function focusOnEnter(e)
{
var keynum = e.keyCode || e.which;  //for compatibility with IE < 9
if(keycode == 13) //13 is the enter char code
    document.getElementsByName('btnChangeAmountReceived')[0].focus();
return true;
}
</script> 
```

您还可以通过添加属性在 HTML5 上自动聚焦元素`autofocus="autofocus"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T03:46:31.857

正如kinakuta所说，你必须使用一些javascript来做你想做的事。

像这样的东西可以解决问题

```
<input type="text" onkeypress="return focusOnEnter(event)" /> 
<script type="text/javascript">
function focusOnEnter(e)
{
var keynum = e.keyCode || e.which;  //for compatibility with IE < 9
if(keycode == 13) //13 is the enter char code
    document.getElementsByName('btnChangeAmountReceived')[0].focus();
return true;
}
</script> 
```

编辑

阅读 Frank S. 的回答后，我认为更好的解决方案是使用 onchange 事件：

```
<input type="text" onchange="focusOnEnter()" /> 
<script type="text/javascript">
function focusOnEnter()
{
    document.getElementsByName('btnChangeAmountReceived')[0].focus();
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:43:11.143

您可以使用 input 元素的“tabindex”属性来完成您的要求，即简单的 html。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T03:48:40.467

就像 Kinakuta 所说，我认为 JavaScript(jQuery) 会做得更好。这是一个链接，它解释了您需要的一切。[http://jqueryminute.com/set-focus-to-the-next-input-field-with-jquery/](http://jqueryminute.com/set-focus-to-the-next-input-field-with-jquery/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-04T17:53:10.693

```
<script type="text/javascript">
function focusbutton() 
{
  if( event.keyCode == 13 )
  document.getElementById('BUTTON_ID').click();
}
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-04T17:58:35.117

试试这个

```
<script type="text/javascript">
function focusbutton() 
{
 if( event.keyCode == 13 )
 document.getElementById('BUTTON_ID').click();
}
</script> 
```

13 : 输入的 ASCII 码

# sencha-touch - 如何在 sencha 中使表单不可滚动？

> ID：10082786
> 
> 赞同：1
> 
> 时间：2012-04-10T03:31:36.880
> 
> 标签：sencha-touch

如何在 sencha touch 中使表单不可滚动？我没有使用过类似的东西

```
scrollable:true or scroll: vertical. 
```

但我仍然可以把它们拖下来。拖动时，整个字段集会上下移动。谁能告诉我如何解决它？我什至尝试过设置

```
scrollable: false. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:50:47.630

您应该插入`scrollable: false`到您的组件中`config`，它应该可以工作。

# c - 如何从 C 中的 IPv4 地址获取主机名？

> ID：10082787
> 
> 赞同：2
> 
> 时间：2012-04-10T03:31:48.460
> 
> 标签：c, function, ip-address, hostname, ipv4

我需要一个简单的函数来输出 a `char* hostname`，给定 a `char* IPAddress`。有什么想法或提示吗？

此外，从主机名获取 IP 地址的最简单方法是正确的吗`gethostbyname()`？`inet_ntoa()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T03:50:46.117

使用`gethostbyaddr()`或`getnameinfo()`将 IP 转换为主机名。

使用`gethostbyname()`或`getaddrinfo()`将主机名转换为 IP。

`gethostby...()`仅支持 IPv4。`get...info()`支持包括IPv4和IPv6在内的多种协议，是新开发的首选功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T03:45:00.887

您需要的所有信息都在优秀[的 Beej 网络编程指南中](http://beej.us/guide/bgnet/output/html/multipage/index.html)。与您的问题相关的页面在[这里](http://beej.us/guide/bgnet/output/html/multipage/gethostbynameman.html)。

如果在阅读之后，您仍然遇到问题，请在此处发布有关特定问题的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T03:51:25.020

1.  要从地址中获取主机名，您通常使用 (这里是大惊喜) [`gethostbyaddr()`](http://www.manpagez.com/man/3/gethostbyaddr/)。

2.  很可能是。

# qt - 使用 Qt (VC++) 以 char 格式创建文件路径的字符串

> ID：10082789
> 
> 赞同：0
> 
> 时间：2012-04-10T03:31:57.743
> 
> 标签：qt, path, formatting

我想使用 Qt 创建一个 GUI 应用程序。为此，我需要使用以下方法获取文件名：

```
QString fileName=getOpenFileName(.....) 
```

我正在使用 Windows 并希望获得 C:\a\b\c 格式的文件名路径并将其传递给接受 char 变量的函数。我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:05:10.207

根据[Qt FAQ](http://qt-project.org/faq/answer/how_can_i_convert_a_qstring_to_char_and_vice_versa "Qt 常见问题")

```
QString path = QFileDialog::getOpenFileName(...);
QByteArray byteArray = path.toLocal8Bit();
const char *charPath = byteArray.data(); 
```

# ios - 这段记忆去哪儿了？

> ID：10082790
> 
> 赞同：2
> 
> 时间：2012-04-10T03:32:00.473
> 
> 标签：ios, memory, tvos, apple-tv

我正在 AppleTV 上进行开发，并且我有一个下载海报的线程。

在我的第一个版本中，我使用 [NSData dataWithContentsOfURL:...] 来执行此操作，尽管没有内存泄漏，但系统内存很快就会耗尽。

然后我转向 coneybeare 在这篇[memory-leak-problem-using-nsdata-in-iphone 中推荐的 ASIHTTPRequest](https://stackoverflow.com/questions/1250050/memory-leak-problem-using-nsdata-in-iphone)

事情变得更好，但仍然没有记忆。

奇怪的是，我的进程的常驻内存非常低且稳定，但系统的可用内存却越来越少。

这是 vm_stat 的输出：

```
Apple TV:/var/log root# vm_stat
Mach Virtual Memory Statistics: (page size of 4096 bytes)
Pages free:                     1012.
Pages active:                  22735.
Pages inactive:                11178.
Pages wired down:              16069.
"Translation faults":         600863.
Pages copy-on-write:           21787.
Pages zero filled:            559108.
Pages reactivated:              2922.
Pageins:                       15073.
Pageouts:                         11.
Object cache: 4 hits of 7781 lookups (0% hit rate)

Apple TV:/var/log root# vm_stat
Mach Virtual Memory Statistics: (page size of 4096 bytes)
Pages free:                      973.
Pages active:                   4568.
Pages inactive:                11067.
Pages wired down:              16076.
"Translation faults":         602533.
Pages copy-on-write:           21881.
Pages zero filled:            559767.
Pages reactivated:              3529.
Pageins:                       15087.
Pageouts:                         11.
Object cache: 4 hits of 7784 lookups (0% hit rate) 
```

这两个输出随后在很短的时间内得到。请注意“Pages active:”，大约有 18k 个页面消失了。他们去哪儿了？

PS。我在CoreGraphics和VideoToolBox中也发现了类似的问题，就是系统好像会占用很多内存，不释放。CoreAnimation 和 VideoToolBox 有缓存吗？如果是，我该如何清除这些缓存？

一些更新： 1）它似乎与 BRMarqueeTextControl 相关，我认为它是基于 CoreAnimation 的文本控件。

2）单独使用BRMarqueeTextControl不会导致内存问题，单独使用海报下载作业也不会。

3）当这两者结合在一起时，内存很快就会耗尽。

# ruby-on-rails - Rails+Cucumber+Capybara：将预期表格与 HTML 表格进行比较

> ID：10082792
> 
> 赞同：1
> 
> 时间：2012-04-10T03:32:16.173
> 
> 标签：ruby-on-rails, cucumber, capybara

我有以下步骤：

```
Then I should see the following games:
    | soccer      | 94040     | "friendly"  |
    | basketball  | 94050     | "competition"| 
```

我有以下步骤定义：

```
Then /^I should see the following games:$/ do |expected_table|
  table_results = page.find('#games_results_table')
end 
```

如果我这样做，`puts table_results`我会得到：

```
#<Capybara::Element tag="table" path="/html/body/div[2]/table"> 
```

我尝试这样做是为了将 expected_table 与 table_results 进行比较：

```
expected_table.diff!(table_results) 
```

但我得到这个错误：

```
undefined method `transpose' for #<Capybara::Element tag="table" path="/html/body/div[2]/table"> (NoMethodError) 
```

请注意，呈现表格的视图是这样的：

```
<div class="page-header">
  <h1>Games</h1>
  <table id="games_results_table" class="table table-striped">
    <tr>
      <th>Sport Type</th>
      <th>Zip Code</th>
      <th>Description</th>
    </tr>
      <% @games.each do |game| %>
        <tr>
          <td><%= game.sport_type %></td>
          <td><%= game.zip_code %></td>
          <td><%= game.description %></td>
        </tr>
      <% end %>
  </table>
</div> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:10:10.453

从[黄瓜书](http://pragprog.com/book/hwcuc/the-cucumber-book)，关于`table#diff!`方法：

> 它接受一个参数，它期望是一个表示行和列的 Array 的 Array。如果所有值都相等，则步骤定义通过。如果不是，则步骤定义失败并打印出差异。

因此，您需要将 Capybara 表映射到数组数组中，例如：

```
table_results = page.find('#games_results_table tr').map do |row|
    row.children.map do |cell|
        cell.text
    end
end 
```

您可能必须对此进行试验——我想不出确切的 Capybara 方法来做到这一点。目的是将 Capybara 元素转换为数组数组，相当于：

```
table_result = [
    ['Sport Type', 'Zip Code', 'Description'],
    ['Extreme Ironing', '12345', 'Participants perform ironing tasks in improbably extreme surroundings'],
    # etc - whatever is on the page
] 
```

# sql - 如何跟踪参考表的历史变化？

> ID：10082794
> 
> 赞同：3
> 
> 时间：2012-04-10T03:32:30.020
> 
> 标签：sql, oracle, history

这在 Web 应用程序中是很常见的事情。如果我有一个用户表并且我想跟踪对用户表所做的所有更改，我可以使用数据库插入和更新触发器将这些更改保存在 user_history 表中。

但是如果我有 user_products 表，其中有 user_id 、 product_id 和 cost。当我在系统中添加一个用户时，假设我有两个与该用户关联的产品。因此，我的 user_products 表将为该用户提供两行。

```
user_id product_id cost
1       10         1000
2       20         2000 
```

现在，如果我转到编辑用户页面并删除产品 1 ，添加产品 3 ，将产品 2 的成本从 2000 更改为 3000。

所以通常我从 user_product 表中删除 user_id 1 的所有记录，然后为新产品做一个新的插入。

所以它不是定期更新，而是删除然后插入。因此，我无法跟踪历史更改。

理想情况下，我想知道我删除了 product 1 ，添加了 product 3 ，将 product 2 的成本从 2000 更改为 3000。

**编辑1：-**

我不做更新。我正在删除然后插入。所以我正在删除产品 ID 为 2 且成本为 2000 的记录。然后再次插入产品 ID 为 2 但成本为 3000 的记录。所以从技术上讲，它的删除和插入但逻辑上只有成本从 2000 更改为 3000。如果我在执行两者时检查查询它会说我删除了 id 为 2 的产品，然后添加了相同的 id 为 2 的产品。但我希望能够看到成本从 2000 变为 3000

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:47:51.420

一种选择是创建一个`user_product_history`由触发器填充的表，`user_product`然后定义一个触发器，将历史表中的旧“删除”行转换为`update`如果该行随后被插入。

```
CREATE TABLE user_product_history (
  user_id         number,
  product_id      number,
  cost            number,
  operation_type  varchar2(1),
  operation_date  date
);

CREATE TRIGGER trg_user_product_history
  AFTER INSERT OR UPDATE OR DELETE ON user_product
  FOR EACH ROW
DECLARE 
  l_cnt integer;
BEGIN
  IF( deleting )
  THEN
    insert into user_product_history( user_id, product_id, cost, operation_type, operation_date )
      values( :old.user_id, :old.product_id, :old.cost, 'D', sysdate );
  ELSIF( updating )
  THEN
    insert into user_product_history( user_id, product_id, cost, operation_type, operation_date )
      values( :new.user_id, :new.product_id, :new.cost, 'U', sysdate );
  ELSIF( inserting )
  THEN
    select count(*)
      into l_cnt
      from user_product_history
     where operation_type = 'D' 
       and user_id        = :new.user_id
       and product_id     = :new.product_id;
    if( l_cnt > 0 )
    then
      update user_product_history
         set operation_type = 'U',
             operation_date = sysdate,
             cost           = :new.cost
       where operation_type = 'D' 
         and user_id        = :new.user_id
         and product_id     = :new.product_id;
    else
      insert into user_product_history( user_id, product_id, cost, operation_type, operation_date )
        values( :new.user_id, :new.product_id, :new.cost, 'I', sysdate );
    end if;
  END IF;
END; 
```

然而，从效率的角度来看，执行删除和插入而不是更新意味着您在数据库上施加的负载远远超过了必要的负载。您将执行比必要更多的 I/O。你最终会得到更复杂的代码来处理更改。几乎可以肯定，您会更好地弄清楚发生了什么变化，然后只更新这些行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:41:23.803

我不知道是否有“标准”方式或简单方式，但根据我的经验，你必须自己做......当然，你不需要为每个表编写特定的方法，而是一个通用的方法处理所有更新 SQL，根据您的表结构，这很聪明。示例：您可以定义一个历史表，该表将具有： id - 表名 - 表记录 id - 要更新的字段列表 - 更新前的值列表 - 更新后的值列表

然后，在您的代码中，您应该有一个处理 SQL 查询的抽象类：在更新时，您调用将解析 SQL 查询并将记录插入到该表中的方法，即使您必须查询 SELECT 来检索更新前的数据（开销最小，因为 SELECT 只使用很少的资源，您可以使用数据库服务器缓存）。最后，当您显示与记录相关的信息时，假设是用户，您可以添加代码以显示此表上的历史记录和此用户 ID。

希望它会帮助你。

# objective-c - 如何设置 Xcode 项目以生成静态库 + 示例代码以便于构建和分发

> ID：10082797
> 
> 赞同：1
> 
> 时间：2012-04-10T03:32:46.963
> 
> 标签：objective-c, xcode4, build-automation

我正在开发一个生成 iOS 静态库的项目，以及一些描述如何使用该库的示例代码......该库的代码不会公开，但示例代码显然会公开。我还将示例代码用作库的简单测试工具，因此在开发过程中，我将其直接指向私有源文件，并在没有库依赖项的情况下进行测试。问题是，我必须手动对示例代码项目进行更改，以使其为一般使用做好准备。我想要一种简单的方法来测试在开发模式下对库的更改，然后将库与示例代码（现在指向实际的 .a 文件 + 头文件）一起构建并打包到可发布的文件层次结构中。我知道如何以手动步骤构建所有内容，我的问题更多的是如何设置文件夹/项目结构，以及如何设置任何构建脚本以使整个过程自动化。我正在使用 Xcode v4.3.2

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T00:04:57.343

您应该设置一个仅构建静态库的项目。它应该是唯一包含库源的东西。然后，您可以有一个单独的项目来导入该静态库以及示例代码以对其进行测试。您不必将测试应用程序直接指向源代码。最好从将要使用它的人的角度来开发您的库（只能访问公共标头和静态库）。

# android - 如何为 Android 编写自己的 LocationService？

> ID：10082800
> 
> 赞同：2
> 
> 时间：2012-04-10T03:33:00.107
> 
> 标签：android, gps, location

我想实现我自己的位置服务。它将基于附近接入点的 wifi 信号强度的三角测量。

我知道确定我的位置的算法，但我不知道如何将它集成到我的代码中，以便我可以简单地将 LocationListener 添加到我的服务中。

```
MyWifiLocationService wifiLocationService = new MyWifiLocationService();
LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
        //has to be called, if there is a new location (via wifi triangulation)
    }
    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
};
wifiLocationService.setLocationListener(locationListener); 
```

我该如何编写 MyWifiLocationService 类？有人知道类似的教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:18:00.237

我认为您可以创建一个可以由 AlarmManager 控制的服务。在此服务中，实现您的获取位置的算法。

# objective-c - 如何以编程方式查找用户的日志目录？

> ID：10082801
> 
> 赞同：3
> 
> 时间：2012-04-10T03:33:01.190
> 
> 标签：objective-c, macos, cocoa

给定一个名为 ExampleApp 的应用程序，我想基本上不使用硬编码路径来查找“~/Library/Logs/ExampleApp”。存在 NSSearchPathForDirectoriesInDomains，您可以使用 NSApplicationSupportDirectory 搜索词来查找诸如“~/Library/Application Support/ExampleApp”之类的内容，但似乎没有用于日志记录的搜索词。

我不认为 ~/Library/Logs 是非标准的，因为 CrashReporter 将其日志放在那里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:35:47.853

**尝试这个 ：**

```
NSString* libraryPath = [NSHomeDirectory stringByAppendingPathComponent:@"Library/Logs"]; 
```

**更新*（~/Library/Logs/AppName）*：**

```
NSString* bundleName = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleName"];
NSString* logsPath = [NSString stringWithFormat:@"Library/Logs/%@",bundleName];

NSString* libraryPath = [NSHomeDirectory stringByAppendingPathComponent:logsPath]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:55:27.917

Cocoa 没有提供查找所有标准目录的方法。旧`FSFindFolder()`功能可以提供更多功能，但确实涉及从 FSRef 转换回路径或 URL。Apple 不鼓励使用它，但它仍然是获得某些标准目录而无需硬编码的唯一方法。也就是说，它永远不会包含您的应用名称。你必须附加它。

编辑添加：[旧文档的链接](https://developer.apple.com/legacy/mac/library/documentation/Carbon/Reference/Folder_Manager/Reference/reference.html#//apple_ref/doc/uid/TP30000238-CH1g-F16387)。

# ruby-on-rails - Rails - 活动和非活动数据的软删除或存档

> ID：10082813
> 
> 赞同：4
> 
> 时间：2012-04-10T03:36:10.303
> 
> 标签：ruby-on-rails, archive, soft-delete

我已经阅读了很多关于软删除和存档的内容，并且看到了所有的优点和缺点。我仍然对哪种方法最适合我的情况感到困惑。我将使用帖子和评论的概念，看看我是否可以更容易地解释它

```
Post -> Comments
Post.all

Outside RSS Feeds -> Post -> Comments
RSSFeed.posts (Return the ones that are deleted or not) 
```

帖子被“删除”，但我需要仍然可以从 RSS 提要访问帖子，但不是应用程序的管理员。

我听到很多关于软删除的头痛，但认为这对我的应用程序可能最有意义，并且觉得如果我使用存档，那么我将不得不运行多个查询

```
RSSFeed.posts || RSSFeed.archived_posts 
```

不确定@$$ 中哪个更有效或更痛苦。想法或例子？我知道这个例子听起来很愚蠢，但试图想出多种情况可以用来找出走哪条路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:29:22.427

只需在数据库中添加另一列并调用它`archivated`。

用于`link_to_if`链接：

```
<%= link_to_unless @post.archivated?, @post.name, post_path(@path) %> 
```

更多的轨道优点：

**应用程序/模型/post.rb**

```
class Post < ActiveRecord::Base
  default_scope where( active: true )

  def archivate
    unless self.archivated?
      self.archivated = true
      self.save
    end
  end

  def dectivate
    if self.archivated?
      self.archivated = false
      self.save
    end
  end
end 
```

**应用程序/模型/archive.rb**

```
class Archive < Post
  set_table_name :posts # make this model use the posts table

  default_scope where( active: false )
end 
```

现在你可以做这样的事情：

```
@post = Post.find(some_id)
@post.archivate
Archive.find(some_id) # should return the post you just archivated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:53:44.667

你肯定会明白的，看看：

[http://railspikes.com/2010/2/26/acts-as-archive](http://railspikes.com/2010/2/26/acts-as-archive)

# c - 关于链接数学库的一些问题

> ID：10082815
> 
> 赞同：0
> 
> 时间：2012-04-10T03:36:38.540
> 
> 标签：c, gcc, math.h

我正在编写 ac 项目，它必须使用 math.h 中定义的 pow 函数。当我尝试制作该项目时，gcc 给出了以下链接错误：未定义对 `pow' 的引用。

我知道 -lm 选项必须添加到我的链接指令中，但仍有几个问题让我感到困惑。

Q1：当我将两个常量传递给 pow 函数时，没有 -lm 链接是成功的。为什么？

Q2：-lm 在链接指令的末尾或开头会产生不同的结果。gcc -lm $(OBJS) -o exbin 是错误的，但 gcc $(OBJS) -o exbin -lm 是正确的。为什么？

我使用 ubuntu 11.10 和 gcc 4.4.4。

谢谢！请原谅我的泳池英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:54:02.627

编译器知道`pow(3, 4)`什么，并通过在编译时计算结果来优化程序，因此它在链接和运行时不需要库。

链接器不会从库中添加东西，除非它知道它需要它。使用静态库，这是完全正确的。对于共享库，某些版本的编译器会记录所有读取的共享库中的所有符号，即使在扫描库时不需要它们。如果在扫描时至少需要一个符号，则最新版本仅采用共享库。当库首先出现时，唯一需要的符号是`main()`（这就是为什么`main()`被指定为托管环境的起点），因此数学库被忽略了，因为其中没有需要的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T03:49:01.400

我无法回答问题 1（这似乎很奇怪），但关于问题 2，原因`gcc -lm $(OBJS) -o exbin`不起作用是因为您必须按使用顺序链接事物。这最好通过示例来解释：

```
/* File func_a.h */
/* Declare func_a */
void func_a();

/* File func_a.c */
#include "func_a.h"
void func_a()
{
    /* do stuff */
}

/* File func_b.c */
#include "func_a.h"
void func_b()
{
    /* Call func_a */
    func_a();
} 
```

要正确链接`func_a`并`func_b`进入可执行文件，您必须将它们链接为`gcc func_b func_a -o exec`因为`func_b`使用`func_a`. 简而言之，您总是希望最后链接您的库函数。

# c# - 后台工作人员的报告进度在操作完成之前不起作用

> ID：10082819
> 
> 赞同：3
> 
> 时间：2012-04-10T03:37:26.410
> 
> 标签：c#, backgroundworker

当我在事件中调用 worker.ReportProgress() 时`BackgroundWorker.DoWork`，它不起作用，并且`ProgressChanged`事件仅在`for`循环结束时引发。

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    string writePath = Path.Combine(bookPath, "bytes");
    DataTable dt = new DataTable();
    dt = Form1.book.Select("select * from book");
    Directory.CreateDirectory(writePath);
    foreach (DataRow dr in dt.Rows)
    {
        int pagenumber = Convert.ToInt32(dr["pageNumber"]);
        string text = dr["text"].toString();
        byte[] codes = tocode.convertTobyte(text.ToCharArray());

        File.WriteAllBytes(Path.Combine(writePath, pagenumber.ToString()),codes);
        backgroundWorker1.ReportProgress((pagenumber * 100) / dt.Rows.Count);
    }
}

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
     progressBarMain.Value = e.ProgressPercentage;
} 
```

# c++ - 获取字距信息

> ID：10082825
> 
> 赞同：4
> 
> 时间：2012-04-10T03:38:42.143
> 
> 标签：c++, gdi+, gdi, kerning

如何获取 GDI 的字距调整信息，然后在[GetKerningPairs](http://msdn.microsoft.com/en-us/library/dd144895%28v=vs.85%29.aspx)中使用？该[文件](http://msdn.microsoft.com/en-us/library/dd144895%28v=vs.85%29.aspx)指出

> lpkrnpair 数组中的对数。如果字体有多个 nNumPairs 字距对，则函数返回错误。

但是，我不知道要传入多少对，也没有办法查询它。

编辑#2

这是我也尝试过的填充应用程序，对于任何字体的对数，这始终为 0。GetLastError 也将始终返回 0。

```
#include <windows.h>
#include <Gdiplus.h>
#include <iostream>

using namespace std;
using namespace Gdiplus;

int main(void)
{
    GdiplusStartupInput gdiplusStartupInput;
    ULONG_PTR           gdiplusToken;
    GdiplusStartup(&gdiplusToken, &gdiplusStartupInput, NULL);

    Font* myFont = new Font(L"Times New Roman", 12);
    Bitmap* bitmap = new Bitmap(256, 256, PixelFormat32bppARGB);
    Graphics* g = new Graphics(bitmap);

    //HDC hdc = g->GetHDC();
    HDC hdc = GetDC(NULL);
    SelectObject(hdc, myFont->Clone());
    DWORD numberOfKerningPairs = GetKerningPairs(hdc, INT_MAX, NULL );

    cout << GetLastError() << endl;
    cout << numberOfKerningPairs << endl;

    GdiplusShutdown(gdiplusToken);

    return 0;
} 
```

**编辑** 我尝试执行以下操作，但是，它仍然给了我 0。

```
Font* myFont = new Font(L"Times New Roman", 10);
Bitmap* bitmap = new Bitmap(256, 256, PixelFormat32bppARGB);
Graphics* g = new Graphics(bitmap);

SelectObject(g->GetHDC(), myFont);
//DWORD numberOfKerningPairs = GetKerningPairs( g->GetHDC(), -1, NULL );
DWORD numberOfKerningPairs = GetKerningPairs( g->GetHDC(), INT_MAX, NULL ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:44:24.557

您首先调用它时将第三个参数设置为 NULL，在这种情况下，它会返回字体的紧缩对数。然后分配内存，并通过该缓冲区再次调用它：

```
int num_pairs = GetKerningPairs(your_dc, -1, NULL);

KERNINGPAIR *pairs = malloc(sizeof(*pairs) * num_pairs);

GetKernningPairs(your_dc, num_pairs, pairs); 
```

编辑：我做了一个快速测试（使用 MFC 而不是 GDI+）并得到了看起来合理的结果。我使用的代码是：

```
CFont font;
font.CreatePointFont(120, "Times New Roman", pDC);
pDC->SelectObject(&font);

int pairs = pDC->GetKerningPairs(1000, NULL);

CString result;
result.Format("%d", pairs);
pDC->TextOut(10, 10, result); 
```

结果打印出来`116`了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T02:36:50.383

问题在于您传递的是 a`Gdiplus::Font`而不是 HFONT `SelectObject`。您需要转换`Font* myFont`为`HFONT`，然后将其传递`HFONT`给 SelectObject。

首先，要将 a`Gdiplus::Font`转换为，`HFONT`您需要[从](http://msdn.microsoft.com/en-us/library/ms901140.aspx). `Gdiplus::Font`一旦你这样做了，剩下的就很简单了。获得紧缩对数量的工作解决方案是

```
Font* gdiFont = new Font(L"Times New Roman", 12);

Bitmap* bitmap = new Bitmap(256, 256, PixelFormat32bppARGB);
Graphics* g = new Graphics(bitmap);

LOGFONT logFont;
gdiFont->GetLogFontA(g, &logFont);
HFONT hfont = CreateFontIndirect(&logFont);

HDC hdc = GetDC(NULL);
SelectObject(hdc, hfont);
DWORD numberOfKerningPairs = GetKerningPairs(hdc, INT_MAX, NULL ); 
```

如您所知，我给出的唯一功能更改是创建一个`FONT`.

# javascript - Javascript 对象调用其他对象粉碎迭代器

> ID：10082827
> 
> 赞同：2
> 
> 时间：2012-04-10T03:38:57.713
> 
> 标签：javascript

好的，所以这很复杂，所以请耐心等待，我会尽量保持简单：

我有一个“类”结构，它创建了一个“类似结构”的骨架，以应用于 Javascript 中的 ArrayBuffers。问题是当我试图模仿允许结构包含其他结构的“c”类行为时。

问题是它破坏了调用方法的迭代器（显然是一个闭包问题），我似乎无法弄清楚。

这是一个被破坏的代码示例（希望这是足够的代码来获得答案，如果没有，我会根据需要添加更多，只是试图将无关代码排除在外）：

```
function StructObject(){
this.applyBuf = function(buf, start){
   var struct = {};
   for (obj in this){
       //problem is here:
       console.log(obj); //prints "c" on the way in
       struct[obj] = this[obj].__createFromBuf();
       console.log(obj); //prints "foo" (see the structs below)
   }
   return struct;
 }
}

function struct(strctObj, name){
var structObject = new StructObject();
...
//create the skeleton
for (item in strctObj){
//the specific code that fails me
structObject[item].__createFromBuf = function(buf, pos){
            return structs[this.name].applyBuf(buf, pos);
}
...
//store the skeleton for later application
structs[name] = structObject;
}

//Creating structs looks like this:
new struct({ foo: type.INT }, "bar");
new struct({
   a: type.INT, //defines size of memory (like c's sizeof)
   b: type.LONG,
   c: {type: type.STRUCT, name: "bar"},
   d: type.SHORT}, "myStruct");

structs.myStruct.applyBuf(new ArrayBuffer(35)); 
```

当我遍历类方法 applyBuf 上的第一个结构时，它会在结构骨架中的每个项目上调用 __createFromBuf，如果该项目是另一个结构 __createFromBuf 在另一个“结构骨架”对象上调用 applyBuf 并将该结构的实例返回给调用结构，按预期工作。

[JSFIDDLE——](http://jsfiddle.net/K5DLF/7/)这是一个工作示例的链接:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:21:03.703

清理你的`for`陈述：

如果未正确声明，则`for`循环索引将成为全局成员。

**示范：**

```
for (item in strctObj) // item becomes a global member

for (var item in strctObj) // item is scoped within the loop's owner function 
```

# ruby-on-rails - 仅与“www”子域共享会话

> ID：10082837
> 
> 赞同：1
> 
> 时间：2012-04-10T03:41:01.857
> 
> 标签：ruby-on-rails, apache, subdomain

我一次又一次地遇到这个问题，当我设置一个新的站点/虚拟主机时，我必须将会话域（或等效的框架）设置为“.example.com”，以便可以共享会话黑白“www.example.com”和“example.com”。

这样做是为了弄乱我的 staging 和 qa 环境的 cookie（比如 qa.example.com ..etc）。

这有什么解决办法？我应该设置一个重写规则，以便将所有 www.example.com 请求重写为“example.com”还是有其他方法？

我想知道是否有针对此问题的框架/语言特定解决方案，人们在遇到此类问题时会做什么，标准是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:03:37.407

> 这有什么解决办法？我应该设置一个重写规则，以便将所有 www.example.com 请求重写为“example.com”还是有其他方法？

与大多数编程问题一样，解决方案不止一种。面对这个确切的问题，我所做的是按照您所说的设置重写规则并使用子目录。它减少了麻烦，但在某些时候您可能需要子域，这完全取决于您的需求。所以，如果你可以使用`example.com/qa`而不是`qa.example.com`，我会去（并且去）它。我用这个：

```
#Redirect any www. to the page without it. Helps to keep user logged.
RewriteEngine On
rewriteCond %{HTTP_HOST} ^www.example.org [NC]
rewriteRule ^(.*)$ http://example.org/$1 [R=301,L] 
```

> 我想知道是否有针对此问题的框架/语言特定解决方案，人们在遇到此类问题时会做什么，标准是什么？

抱歉，我无法在第二部分为您提供帮助，因为我不知道以其他方式执行此操作的任何标准。希望有人可以完成答案。

# javascript - 为 Datatable 列定义多个 jQuery 变量

> ID：10082843
> 
> 赞同：0
> 
> 时间：2012-04-10T03:41:38.960
> 
> 标签：javascript, jquery, datatables

**背景：**我有一个 53x 列的 jQuery 数据表。第一列是用户名，不可编辑。接下来的 52 列代表一年中的几个星期，每个星期都需要可编辑。它们都包含完全相同的选项。

**问题：**有没有更好的方法来定义所有 52 周，而不必“复制和粘贴”列数据 52 次？

**我的代码：**

```
$(document).ready( function () {
  $('#example').dataTable().makeEditable({
                    sUpdateURL: function(value, settings)
                            {
                                    return(value);
                            },
                    "aoColumns": [
                        null,
                        {
                        tooltip: 'Click to change leave',
                        loadtext: 'loading...',
                        type: 'select',
                        onblur: 'cancel',
                        submit: 'Ok',
                        data: "{'':'Please select...', 'A':'A','B':'B','C':'C'}",
                        loadtype: 'GET'
                        },
                        {
                        tooltip: 'Click to change leave',
                        loadtext: 'loading...',
                        type: 'select',
                        onblur: 'cancel',
                        submit: 'Ok',
                        data: "{'':'Please select...', 'A':'A','B':'B','C':'C'}",
                        loadtype: 'GET'
                        },

                 {REPEAT 49 more times}

                        {
                        tooltip: 'Click to change leave',
                        loadtext: 'loading...',
                        type: 'select',
                        onblur: 'cancel',
                        submit: 'Ok',
                        data: "{'':'Please select...', 'A':'A','B':'B','C':'C'}",
                        loadtype: 'GET'
                        } ]                 
    }); 
```

})

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:01:02.150

使用循环构建列数组，然后在传递给 dataTables 的配置对象的 aoColumns 属性中使用它。

```
$(document).ready( function () { 

         // columns array
         var aoColumns = [];
         aoColumns.push(null);

         for(var i=0;i<52; i++) {
         var column = { 
               tooltip: 'Click to change leave', 
               loadtext: 'loading...', 
               type: 'select', 
               onblur: 'cancel', 
               submit: 'Ok', 
               data: "{'':'Please select...', 'A':'A','B':'B','C':'C'}", 
               loadtype: 'GET' 
               };
               aoColumns.push(column);
         }

         $('#example').dataTable().makeEditable({ 
              sUpdateURL: function(value, settings) 
              { 
                   return(value); 
              }, 
              "aoColumns": aoColumns 
         }); 
```

# jsf-2 - JSF 2.0 RenderResponse 和 ResponseComplete

> ID：10082846
> 
> 赞同：14
> 
> 时间：2012-04-10T03:42:12.347
> 
> 标签：jsf-2

我对JSF的理解还很浅。

我正在阅读文档并按照[FacesContext的 javadoc](http://docs.oracle.com/cd/E17824_01/dsc_docs/docs/jscreator/apis/jsf/javax/faces/context/FacesContext.html#responseComplete%28%29)

有 RenderResponse 和 ResponseComplete 允许您缩短生命周期。

我目前很困惑..你什么时候在实际情况下使用一个而不是另一个？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-10T16:16:11.627

`FacesContext#renderResponse()`如果您想立即进入渲染响应阶段，请使用。您经常看到这与在验证阶段运行的值更改侦听器黑客攻击相结合，应该跳过更新模型值并调用操作阶段。

用于`FacesContext#responseComplete()`向 JSF 发出信号，表明您已经**自己**处理了响应，因此 JSF 不需要呈现响应。您经常看到这与将文件下载写入响应的支持 bean 操作方法结合使用。这将确保 JSF 不会将文件下载附加到呈现的 HTML 的内容中，这可能会导致下载损坏或非法状态异常。

# jquery - JSF and Jquery AJAX - How can I make them work together?

> ID：10082858
> 
> 赞同：3
> 
> 时间：2012-04-10T03:44:38.150
> 
> 标签：jquery, ajax, jsf, jsf-2

I'm just starting out in JSF, looks awesome, but I can't seem to figure out this last barrier.

I'm used to traditional Jquery AJAX function, which is perfect in my book. But I was hoping to find a way to get it to work in harmony with JSF.

Here is a scenario to explain my situation.

I have a messaging page on my website, where users can send each other messages. So in my xhtml page I have something that looks like this:

```
<h:form>
<h:inputTextarea id="newMessageContent" value="#{conversationBean.newMessage}"/>
<h:commandButton value="#{siteLang.messages_send}" action="#{conversationBean.sendMessage}">
     <f:ajax render=":conversationMessages" execute="newMessageContent"/>
</h:commandButton>
</h:form> 
```

Works great. Users can post their message and it loads it in the conversation div above. But now I need to add some features. - When user clicks, the button and textarea should get disabled to avoid interaction until the action is completed. And a loader should appear - When the JSF finishes it's stuff, the textarea and button should get enabled and the loader should disappear...and the focus goes back to the textarea.

In Jquery I would simply do something like this:

```
$.ajax{
    beforeSend: function (){
         // Disable textarea and button, show loader
    },
    complete: function () {
         // Do the inverse of above
    }
} 
```

Thanks for the help!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T05:33:11.893

add the `onevent="jsFunctionName"` (no brackets) needed to your `<f:ajax`

and your `jsFunctionName` should look like

```
function openDeleteDevicesDialog(data) {
    console.log(data.status); //while ,data.status can be 1)"begin" 2)"complete" 3)"success"
    if (data.status === 'begin') {...}
    if (data.status === 'complete') {...}
    if (data.status === 'success') {...}
} 
```

so you should enter this function 3 times

the onclick of the `h:commandButton` is executed before the `f:ajax` even begins...)

**Note that usually you will execute your code in the when `data.status === 'success'` , its when your page is done rendering and your DOM is in its final shape/state**

[also take a look at BalusC answer over here...](https://stackoverflow.com/a/7044332/617373)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:05:14.307

is this what you are looking for? [How can I execute Javascript before a JSF <h:commandLink> action is performed?](https://stackoverflow.com/questions/73628/how-can-i-execute-javascript-before-a-jsf-hcommandlink-action-is-performed) (you will have to change the link to the button)

If you see this button being used everywhere on your web site, you can also create a custom tag.

# .net - 在哪里可以找到 dll 的 EcmaPublicKey.snk？

> ID：10082865
> 
> 赞同：0
> 
> 时间：2012-04-10T03:46:18.917
> 
> 标签：.net, .net-assembly, reflector, strongname, public-key

我对 .snk 文件不太熟悉，但我正在做一些棘手的事情（仅用于测试）

带有反射器和 .net 框架组件。

问题是我需要使用对应于这些值的**“EcmaPublicKey.snk”来签署这个程序集（重新编译时）：**

```
Public key is 00000000000000000400000000000000
Public key token is b77a5c561934e089 
```

因为当我从这个 dll 中删除强名称时，Visual Studio 中会出现错误（预期为：b77a5c561934e089）

有没有可能得到那个 .snk 文件？

我找到了这个链接：http: [//blogs.msdn.com/b/shawnfa/archive/2004/06/09/152097.aspx](http://blogs.msdn.com/b/shawnfa/archive/2004/06/09/152097.aspx)

还有这个（不起作用）：http: [//msdn.microsoft.com/net/ecma/default.asp](http://msdn.microsoft.com/net/ecma/default.asp)

请分享您的经验或解决此问题的任何想法（如果可能）:-)

提前致谢。

# javascript - 重置特定表单域

> ID：10082866
> 
> 赞同：1
> 
> 时间：2012-04-10T03:46:21.240
> 
> 标签：javascript, jquery, forms, mobile, field

我在网上找到了很多关于重置表单的信息。但是在重置特定表单字段方面还没有找到很多东西。

我有一个可折叠的集合（jquery mobile），它显示和隐藏表单的一部分，我想要它，所以当用户单击集合的标题时，它会重置它隐藏的部分。

例如，如果用户点击标题“Building / Business”，它会重置“Street”下的 3 个字段中的字段。

这是一个小提琴来帮助解释我的问题。[http://jsfiddle.net/CXc93/](http://jsfiddle.net/CXc93/)

任何反馈将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T05:02:17.207

像下面这样的东西呢。

```
<html>
    <head>
        <script>
          var div1;
          var div2;
          function resetter() {
            div1 = document.getElementById('dv1').innerHTML;
            div2 = document.getElementById('dv2').innerHTML;
          }
          window.onload = resetter;
        </script>
    </head>

    <body >
        <form>
            <input type="radio" name="sex" value="male" onclick="document.getElementById('dv1').innerHTML = div1" /> Div1<br />
            <div id="dv1">
                <input type="text" value=""/><br/>
                <input type="text" value=""/><br/>
            </div>
            <input type="radio" name="sex" value="female" onclick="document.getElementById('dv2').innerHTML = div2" /> Div2
            <div id="dv2">
                <input type="text" value=""/><br/>
                <input type="text" value=""/><br/>
            </div>
        </form>
    </body>
</html> 
```

# .net - Dapper 死锁问题

> ID：10082871
> 
> 赞同：2
> 
> 时间：2012-04-10T03:47:15.193
> 
> 标签：.net, sql-server-2008-r2, data-access-layer, dapper

我正在使用两个 Web 项目，并且都使用相同的 MS SQL Server 2008 R2 数据库，并且两个项目都通过 Dapper ORM 与数据库交互，我遇到了一些（7 到 8 次/天）死锁异常。是精致的问题还是我的错？有人可以建议我解决方案吗？如果您需要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:57:01.150

很可能是你。Dapper 将所有内容转换为普通的 ADO.Net 命令对象。它通过扩展方法从 IDbConnection 接口工作。我想不出它本身会导致死锁的方法。请提供一个最小的、可重复的例子来说明您的问题。

我相当确定这是您的代码中的并发问题。

如果这个示例可以在没有 Dapper（即纯 SQL）的情况下运行，那么我们可以将 Dapper 作为原因排除。

# jquery - 社交按钮的延迟加载

> ID：10082876
> 
> 赞同：0
> 
> 时间：2012-04-10T03:47:43.440
> 
> 标签：jquery, button, loading, social, lazy-evaluation

有人知道[http://googleblog.blogspot.com/](http://googleblog.blogspot.com/)上的社交按钮是如何加载的吗？我尝试通过 JQuery 异步加载它们，但与 Google 博客相比，实际按钮至少生成 2 个额外的 HTTP 请求，例如：

[http://connect.facebook.net/en_US/all.js](http://connect.facebook.net/en_US/all.js) https://apis.google.com/js/plusone.js

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T05:30:24.993

使用 Chrome 开发工具，您可以看到 Google 博客正在发出单独的请求以加载每个社交 API。它没有出现在控制台中，这让我觉得它正在执行类似 document.write 的操作。

要查看它加载资源，请打开开发工具 (ctrl+shift+i) 并单击 Network 选项卡。向下滚动到底部，然后将鼠标悬停在社交按钮上，以便它们加载。您将看到从 Twitter、Facebook 和 Google+ 加载的网络资源。

您的异步方法应该没问题。我不认为谷歌在这里发挥了任何作用。

更新

Google 正在使用不需要加载 Facebook all.js 脚本的“喜欢”按钮的 iframe 版本。这是来自[Facebook 文档](http://developers.facebook.com/docs/guides/web/#plugins)的代码示例。

```
<iframe src="http://www.facebook.com/plugins/like.php?href=YOUR_URL"
        scrolling="no" frameborder="0"
        style="border:none; width:450px; height:80px"></iframe> 
```

+1 按钮似乎使用了一种未记录的技术。它使用这样的 URL 加载 +1 按钮（类似于 Facebook 的 Like 按钮）：

```
https://plusone.google.com/_/+1/fastbutton?url=YOUR_URL_ENCODED&size=medium&count=true&width=300&annotation=bubble 
```

# linq - 如何将 linq 结果集作为自定义类型返回

> ID：10082879
> 
> 赞同：2
> 
> 时间：2012-04-10T03:47:58.433
> 
> 标签：linq, c#-3.0, custom-type

```
public class LearnerInfo
{
    public string Id { get; set; }
    public string Name { get; set; }

    public LearnerInfo(string id, string name)
    {
        this.Id = id;
        this.Name = name;
    }
}

public class LearnerCourse
{
    public string Id { get; set; }
    public string ExpiredCount { get; set; }
    public string Soonduecount { get; set; }
    public string Currentmonthcount { get; set; }
    public string Currentmonthplus1count { get; set; }
    public string Currentmonthplus2count { get; set; }
    public string Currentmonthplus3count { get; set; }
    public string Currentmonthplus4count { get; set; }
    public string Currentmonthplus5count { get; set; }
    public string Subtotal { get; set; }

    public LearnerCourse(string id, string exp, string soonDue, string current, string plus1, string plus2,
        string plus3, string plus4, string plus5)
    {
        this.Id = id;
        this.ExpiredCount = exp;
        this.Soonduecount = soonDue;
        this.Currentmonthcount = current;
        this.Currentmonthplus1count = plus1;
        this.Currentmonthplus2count = plus2;
        this.Currentmonthplus3count = plus3;
        this.Currentmonthplus4count = plus4;
        this.Currentmonthplus5count = plus5;
    }

    public LearnerCourse()
    { }
}

public class InfoList : IEnumerable<CombinedInfo>
{

    private List<CombinedInfo> _infoList = new List<CombinedInfo>();

    public InfoList()
    {
        _infoList = new List<CombinedInfo>();
    }

    public void Add(CombinedInfo i)
    {
        _infoList.Add(i);
    }

    public IEnumerator<CombinedInfo> GetEnumerator()
    {
        return _infoList.GetEnumerator();
    }

    //IEnumerable Members
    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        throw new NotImplementedException();
    }
}

public class CombinedInfo
{
    public string Id { get; set; }
    public string ExpiredCount { get; set; }
    public string Soonduecount { get; set; }
    public string Currentmonthcount { get; set; }
    public string Currentmonthplus1count { get; set; }
    public string Currentmonthplus2count { get; set; }
    public string Currentmonthplus3count { get; set; }
    public string Currentmonthplus4count { get; set; }
    public string Currentmonthplus5count { get; set; }
    public string Name { get; set; }
}

    static void Main(string[] args)
    {
        LearnerCourse lc1 = new LearnerCourse("777", "1", "1", "0", "1", "0", "0", "0", "0");
        LearnerCourse lc2 = new LearnerCourse("589", "1", "0", "0", "0", "0", "0", "0", "0");

        LearnerInfo li1 = new LearnerInfo("777", "moe");
        LearnerInfo li2 = new LearnerInfo("589", "larry");

        LearnerCourse[] lCourses = new LearnerCourse[2];
        lCourses[0] = lc1;
        lCourses[1] = lc2;

        LearnerInfo[] linfos = new LearnerInfo[2];
        linfos[0] = li1;
        linfos[1] = li2;

        //test linq join for object array
        var myJoin = (from c in lCourses
                     join i in linfos on c.Id equals i.Id
                    select new {
                         c.ExpiredCount, 
                         c.Soonduecount,
                         c.Currentmonthcount,
                         c.Currentmonthplus1count,
                         c.Currentmonthplus2count,
                         c.Currentmonthplus3count,
                         c.Currentmonthplus4count,
                         c.Currentmonthplus5count,
                         c.Subtotal,
                         i.Id,
                         i.Name
                     });

        foreach (CombinedInfo o in l)
        {
            //loop through and can add to list of type CombinedInfo
        }
} 
```

我没有通过 foreach 循环，而是在尝试从我的 linq 查询中获取结果集以仅返回一个列表时遇到问题。

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:54:05.020

两件事情：

a）项目到自定义类，而不是匿名类型。在您的情况下，您已经`CombinedInfo`定义了 - 使用它。

b)`ToList()`用于强制执行并将结果转换为`List<T>`

```
var list = (from c in lCourses
             join i in linfos on c.Id equals i.Id
            select new  CombinedInfo() {
                 ExpiredCount = c.ExpiredCount, 
                 Soonduecount = c.Soonduecount,
                 Currentmonthcount = c.Currentmonthcount,
                 Currentmonthplus1count = c.Currentmonthplus1count,
                 Currentmonthplus2count = c.Currentmonthplus2count,
                 Currentmonthplus3count = c.Currentmonthplus3count,
                 Currentmonthplus4count = c.Currentmonthplus4count,
                 Currentmonthplus5count = c.Currentmonthplus5count,
                 Subtotal = c.Subtotal,
                 Id  = i.Id,
                 Name = i.Name
             }).ToList(); 
```

# javascript - jquery是javascript的动态重新定义吗？

> ID：10082880
> 
> 赞同：-7
> 
> 时间：2012-04-10T03:48:00.330
> 
> 标签：javascript, jquery, ajax, json, node.js

[在学习 JQuery 之前学习 JavaScript？](https://stackoverflow.com/questions/10071308/learn-javascript-before-learning-jquery/10071626#10071626)

我已经阅读了那个帖子，但我仍然没有找到任何观点让我相信 Javascript 是在 jquery 之前必须学习的东西。

我认为 jquery 远不只是一个 javascript 库，我想称它为对动态语言的重新定义，取而代之的是新的 javascript。库作者显然在几乎完全改变旧 JavaScript 的面貌方面取得了最大的成功。Javascript 和 Jquery 是共存的，因为 Jquery 是 javascript 库，人们支持在 jquery 之前首先学习 JS 的事实可能是因为他们在 jquery 出现之前很久就已经是客户端编码人员，目前这使得他们对语言的调查更加容易更好的是，在心理上，他们肯定会说“哦，是的，程序方法更有效”。

关于通过鼠标/键盘事件编写函数调用的要点，我仍然同意 javascript 结构被保留并需要学习。但这是否真的有很大的不同，首先学习 jquery 是否应该更有益？前任：

```
function something()
{
   //jquery code
}
////
<input type="..." onclick="something();"/> 
```

需要建议和更正。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:54:19.417

除了 jQuery 库之外，学习原生 JavaScript 的重要性还有很多原因：

*   jQuery 是用 JavaScript 编写的，因此如果您遇到 jQuery 错误或需要修补它，您将需要了解 JavaScript
*   如果您想有效地使用 jQuery，在许多情况下，阅读底层 JavaScript 会很有帮助
*   不能保证 jQuery 永远是最好的库（像 Scriptaculous 这样的东西有一天可能会超过它），因此你不应该依赖于库
*   在许多情况下，您仍然需要在 jQuery 函数中运行 JavaScript
*   jQuery 可能使许多事情变得更简单（访问 DOM 元素），但在许多情况下它不是必需的

# javascript - 无法将鼠标坐标从 content_script 传递到弹出窗口（chrome 扩展）

> ID：10082881
> 
> 赞同：0
> 
> 时间：2012-04-10T03:48:13.740
> 
> 标签：javascript, google-chrome-extension, message-passing, mouse-coordinates

我希望这不是模糊的...

我正在开发我的第一个 google chrome 扩展程序，我正在尝试[将此脚本转换为](http://nickbriz.com/wired/code/divPlacer.html)^(下面)我制作的扩展程序弹出窗口。这个想法是出现在该页面右下角的框将出现在扩展的弹出窗口中，同时动态（实时）从实际页面中拉出鼠标坐标。我想这样做的方法是注入一个 content_script 来拉鼠标坐标->将它们发送到 background.html->然后将它们传递给 popup.js

我仔细研究了谷歌的文档，并遵循了解决这个问题的几篇帖子的建议，但我似乎无法让它发挥作用。我想也许我在弄清楚这个问题时遇到了问题`chrome.extension.sendRequest`，以前有没有人做过这样的事情？你有例子吗？我会以错误的方式解决这个问题吗？

//更新：

（注意：这不起作用）

```
manifest.json
====================
"browser_action": {
  "default_icon": "icon.png",
  "default_popup": "popup.html"
},
"content_scripts": [
  {
    "matches": ["<all_urls>","http://*/*","https://*/*"],
    "js": ["coord.js"]
  }
]

content_script (i.e. coord.js)
====================
var x = event.clientX,
    y = event.clientY;  //record down the x and y

chrome.extension.onRequest.addListener(         //listen to request
  function(request, sender, sendResponse) {
    if (request.greeting == "coord"){
      sendResponse({farewell: JSON.stringify([x,y])});//send coordinates to poupup
    }
  });

popup.js
====================
    chrome.tabs.getSelected(null, function(tab) {    //ask for coordinates
      chrome.tabs.sendRequest(tab.id, {greeting: "coord"}, function(response) {
        var x = JSON.parse(response.farewell)[0],
            y = JSON.parse(response.farewell)[1];

        document.getElementById("main").innerHTML = x + "," + y;
      });
    }); 
```

同样，我正在尝试修改我编写的这个脚本：

```
 var width, height, divObj, interval;
    var l, t, r, b;

    function setup() {
            width = window.innerWidth;
            height = window.innerHeight;
            interval = setInterval(loadDiv, 50);
    }

    document.onmousemove=getMouseCoordinates;

    function getMouseCoordinates(event) {
        ev = event || window.event;

        l = ev.pageX; t = ev.pageY;
        r = width - l; b = height - t;

        divObj.innerHTML = '<div style="position: absolute; left: 20px;">.class {<br>&nbsp;&nbsp;&nbsp;position: absolute;<br>&nbsp;&nbsp;&nbsp;left: ' + l + 'px;<br>&nbsp;&nbsp;&nbsp;top: ' + t + 'px;<br>}</div><div style="position: absolute; left: 250px;">.class {<br>&nbsp;&nbsp;&nbsp;position: absolute;<br>&nbsp;&nbsp;&nbsp;right: ' + r + 'px;<br>&nbsp;&nbsp;&nbsp;bottom: ' + b + 'px;<br>}</div>';      
    }

    function loadDiv() {
        divObj = document.getElementById("divPlacement");
    }

    document.write('<div id="divPlacement" style="position: absolute; right: 25px; bottom: 25px; z-index: 1000; color: #fff; font-family: monospace; background-color: #000; opacity:0.4; filter:alpha(opacity=40); -webkit-border-radius: 5px;-moz-border-radius: 5px; border-radius: 5px; padding: 10px; width: 420px; height: 80px; border: solid #ccc;"></div>');

    setup(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:16:51.750

阅读更多：[http ://code.google.com/chrome/extensions/messaging.html#simple](http://code.google.com/chrome/extensions/messaging.html#simple)

```
popup.html
===============
chrome.tabs.getSelected(null, function(tab) {    //ask for coordinates
  chrome.tabs.sendRequest(tab.id, {greeting: "coord"}, function(response) {
    var x = JSON.parse(response.farewell)[0],
        y = JSON.parse(response.farewell)[1];
    console.log(x);  //Will give you mouse x
    console.log(y);  //Will give you mouse y
  });
});

content script
===============
var x = event.clientX,
    y = event.clientY;  //record down the x and y

chrome.extension.onRequest.addListener(         //listen to request
  function(request, sender, sendResponse) {
    if (request.greeting == "coord"){
      sendResponse({farewell: JSON.stringify([x,y]));//send coordinates to poupup
    }
  }); 
```

# frameworks - Apple Accelerate 框架产生倒谱意外结果

> ID：10082882
> 
> 赞同：4
> 
> 时间：2012-04-10T03:48:17.643
> 
> 标签：frameworks, signal-processing, fft

我正在关注[一篇](http://iitg.vlab.co.in/?sub=59&brch=164&sim=615&cnt=1)关于如何生成倒谱以用于检测语音共振峰并使用 iPhone Accelerate 框架对其进行编码的文章。然而，结果并不像文章所期望的那样。对于清音部分（文章中的图 3），它在前几个 bin 中显示较小的值。但是，当我的代码运行时，清音部分的值很大（接近 1.0），看起来更像是浊音部分。

这是我的代码：

```
// copy buffer data into a separate array and apply hamming window
// don't use leadlength because we copied to beginning of buffer
int offset = (int)(s * stepSize);
float *hamBuffer = malloc(n*sizeof(float));
for (int i=0; i < n; i++)
    hamBuffer[i] = hpBuffer[offset+i] * ((1.0f-0.46f) - 0.46f*cos(TWOPI*i/((float)n-1.0f)));

// configure float array into acceptable input array format (interleaved)
vDSP_ctoz((COMPLEX*)hamBuffer, 2, &complexArray, 1, halfN);

// free ham buffer
free(hamBuffer);

// run FFT
vDSP_fft_zrip(setupReal, &complexArray, stride, log2n, FFT_FORWARD);

// Absolute square (equivalent to mag^2)
complexArray.imagp[0] = 0.0f;
vDSP_zvmags(&complexArray, 1, complexArray.realp, 1, halfN);
bzero(complexArray.imagp, (halfN) * sizeof(float));

// scale
float scale = 1.0f / (2.0f*(float)n);
vDSP_vsmul(complexArray.realp, 1, &scale, complexArray.realp, 1, halfN);

// get log of absolute values for passing to inverse FFT for cepstrum
float *logmag = malloc(sizeof(float)*halfN);
for (int i=0; i < halfN; i++)
    logmag[i] = log10f(fabsf(complexArray.realp[i]));

// configure float array into acceptable input array format (interleaved)
vDSP_ctoz((COMPLEX*)logmag, 2, &complexArray, 1, halfN/2);

// create cepstrum
vDSP_fft_zrip(setupReal, &complexArray, stride, log2n-1, FFT_INVERSE);

// scale again
scale = (float) 1.0 / (2 * n);
vDSP_vsmul(complexArray.realp, 1, &scale, complexArray.realp, 1, halfN);
vDSP_vsmul(complexArray.imagp, 1, &scale, complexArray.imagp, 1, halfN);

//convert interleaved to real
float *displayData = malloc(sizeof(float)*n);
vDSP_ztoc(&complexArray, 1, (COMPLEX*)displayData, 2, halfN);    

// print cepstrum to debug window
for (int i=0; i < halfN; i++)
    printf("%f\r\n", displayData[i]); 
```

以下是前几个 bin 的结果：

```
-1.036735
0.807992
-0.030310
0.201064
-0.048442
0.071084
-0.050529
0.108412
-0.037282
0.080372
-0.003775
0.102596
-0.027706
0.044470
0.010319
0.041597
-0.050533
0.012725
-0.003895
-0.016887
-0.010547 
```

他们确实“稳定”到零，但前几个数字比我对清音部分的预期要大得多。我的代码看起来不正确吗？我想我非常密切地关注了这篇文章。为什么我在清音部分的前几个 bin 中得到如此大的值？

# c# - 使用 Linq to XML 选择 Xml 节点

> ID：10082883
> 
> 赞同：6
> 
> 时间：2012-04-10T03:48:31.670
> 
> 标签：c#, xml, lambda, linq-to-xml

我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfCustomer xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Customer>
        <CustomerId>1f323c97-2015-4a3d-9956-a93115c272ea</CustomerId>
        <FirstName>Aria</FirstName>
        <LastName>Stark</LastName>
        <DOB>1999-01-01T00:00:00</DOB>
    </Customer>
    <Customer>
        <CustomerId>c9c326c2-1e27-440b-9b25-c79b1d9c80ed</CustomerId>
        <FirstName>John</FirstName>
        <LastName>Snow</LastName>
        <DOB>1983-01-01T00:00:00</DOB>
    </Customer>
</ArrayOfCustomer> 
```

我的尝试：

```
XElement toEdit = 
    (XElement)doc.Descendants("ArrayOfCustomer")
                 .Descendants("Customer")
                 .Where(x => Guid.Parse((x.Descendants("CustomerId") as XElement).Value) == customer.CustomerId)
                 .First<XElement>(); 
```

这会引发以下异常：

```
 Object reference not set to an instance of an object. 
```

`x`1 ）不是`XElement`吗？

2) 这是选择 Xml 节点的正确 where lambda 吗？

3）当然你会如何找到这个节点`CustomerId`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T03:55:54.313

你的问题是，`Descendents`并`Where`返回一个`IEnumerable<XElement>`不是`XElement`你所追求的。你可以像这样解决这个问题：

```
XElement toEdit = doc.Descendants("ArrayOfCustomer")
                     .Descendants("Customer")
                     .Where(x => Guid.Parse(x.Descendants("CustomerId").Single().Value) == customer.CustomerId)
                     .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T03:54:37.533

你不是在铸造`x`，你在铸造`x.Descendants()`。x.Descendants() 返回一个集合，因此是复数方法语义。在我的脑海中，你应该能够做到`x.Descendants("CustomerId").FirstOrDefault() as XElement`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T03:57:17.620

```
XElement toEdit = (from c in doc.Descendants("Customer")
     where Guid.Parse(c.Value) == customer.CustomerId
     select c).SingleOrDefault(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T04:00:32.353

我会像这样重组您的查询：

```
 XElement toEdit = doc.Descendants("Customer")
                      .Where(x => (Guid)x.Element("CustomerId") == customer.CustomerId)
                      .FirstOrDefault(); 
```

# wordpress - 如何将 DIV 浮动在 NAV 元素上？

> ID：10082890
> 
> 赞同：1
> 
> 时间：2012-04-10T03:49:45.700
> 
> 标签：wordpress, html, css

我有一个带有背景图像的 DIV 元素，我试图将它浮动在构成 2011 主题菜单栏的 NAV 元素上。但是 DIV 始终出现在 NAV 元素下方：

CSS

```
nav#access {
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    z-index: 9999;
}

div#logo {
    height: 122px;
    width: 120px;
    position: absolute;
    top: 20px;
    left: 280px;
    background: url(images/mylogo.png);
    z-index: 1;
} 
```

DIV 作为 body 元素内的第一个元素添加到 2011 主题的 header.php 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:27:53.537

您的`<div>`元素`z-index`比您的`<nav>`元素低，因此将始终出现在它的“下方”。

您只需要指定`div#logo { z-index:10000; }`或更高级别将其放在前面

# mouseover - 在鼠标悬停时使文本弧

> ID：10082893
> 
> 赞同：1
> 
> 时间：2012-04-10T03:50:07.167
> 
> 标签：mouseover, dhtml

尝试将代码放入此文本区域时，我从来没有太多运气。我的问题是如何修改鼠标悬停（jsfiddle），以便我从（DHTML）文本开始，当你将鼠标悬停在文本上时，鼠标移出它会返回到原始位置。甚至是指向有帮助的网站的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:13:53.623

使用以下方法之一生成圆弧和文本：

*   [SVG](http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Text#Text_on_a_Path)
*   [CSS3](http://css-tricks.com/set-text-on-a-circle/)
*   [拉斐尔.js](https://stackoverflow.com/questions/2612764/attach-text-on-path-in-raphael)
*   [CSSWarp 生成器](http://csswarp.eleqtriq.com/)

然后将鼠标悬停事件绑定到文本内容的容器以产生所需的效果。

# java - java getData().getPixels()有类似的android方法吗？

> ID：10082895
> 
> 赞同：0
> 
> 时间：2012-04-10T03:50:16.890
> 
> 标签：java, android, image, bitmap, getpixel

我正在尝试使用以下java代码来读取android上的图像数据。由于不支持 ImageIO，我可以通过哪些方式使用 getData().getPixels()？

通过将 BufferedImage 更改为 Bitmap，我可以让除 bi.getData().getPixels() 之外的所有其他代码正常工作吗？

我可以用android库中的任何方法来替换它吗？

在 android Bitmap 类中： public void getPixels (int[] 像素，int offset，int stride，int x，int y，int width，int height)

此方法支持 int[]，但不支持 double[]。我不熟悉图像处理它们会有所不同吗？

谢谢你。

```
 private double[] getImageData(String imageFileName) throws FaceRecError {
    BufferedImage bi = null;
    double[] inputFace = null;
    try{
        bi = ImageIO.read(new File(imageFileName));
    }catch(IOException ioe){
        throw new FaceRecError(ioe.getMessage());
    }
    if (bi != null){
    int imageWidth = bi.getWidth();
    int imageHeight = bi.getHeight();
    inputFace = new double[imageWidth * imageHeight];
    bi.getData().getPixels(0, 0, imageWidth, imageHeight,inputFace);
    }
    return inputFace;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:33:51.723

此代码用于获取 android 中 Bitmap 中所有像素的颜色。此返回颜色数组

```
 Bitmap bitmap=BitmapFactory.decodeFile("file path");
    int height=bitmap.getHeight();
    int width=bitmap.getWidth();
    int[] pixel=new int[height*width];
    bitmap.getPixels(pixel, 0, width, 0, width, width, height); 
```

所以你的颜色将保存在像素数组中。`getPixels()`有很多参数来自定义你想要的像素颜色

**更新了将整数数组转换为双精度**

```
public  double[] getDoubleNumbers(int[] numbers) 
//changed double to double[]
{double[] newNumbers = new double[numbers.length]; //changed 99 to numbers.length
for (int index = 0; index < numbers.length; index++)
newNumbers[index] = (double)numbers[index];

return newNumbers;
}
} 
```

# android - android中的java.lang.NoClassDefFoundError错误

> ID：10082896
> 
> 赞同：-1
> 
> 时间：2012-04-10T03:50:26.237
> 
> 标签：android

我尝试导入一个 .jar 库。添加代码，我导入它没有错误。

```
import my.lib.MyLib; 
```

我使用了 onCreate() 的 lib 中的 MyLib 类。但它显示以下错误：

```
java.lang.NoClassDefFoundError: my.lib.MyLib 
```

可能的原因是什么？以及如何修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:58:55.593

如果您已更新到 ADT r17。你可以看到[这个](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)。

# c++ - 如何进行腿部运动，OpenGL？

> ID：10082900
> 
> 赞同：1
> 
> 时间：2012-04-10T03:51:23.223
> 
> 标签：c++, opengl

当我试图围绕一个支点（腿的顶部）进行腿部运动时，反而会发生腿部开始围绕错误的点旋转，而我只想让腿来回摆动。

我该如何解决这个问题？

这是我的代码。

```
glPushMatrix();

    glTranslatef(x+0.0f, y+6.0f, z-1.5f);
    glRotatef(walk, 1.0f,0.0f,0.0f);
    glBegin(GL_QUADS);
        glTexCoord2f(0.5f,0.0f); glVertex3f(x-1.0f, y-6.0f, z-3.0f);
        glTexCoord2f(1.0f,0.0f); glVertex3f(x-1.0f, y-6.0f, z-0.5f);
        glTexCoord2f(1.0f,0.5f); glVertex3f(x-1.0f, y-18.0f, z-0.5f);
        glTexCoord2f(0.5f,0.5f); glVertex3f(x-1.0f, y-18.0f, z-3.0f);

        glTexCoord2f(0.5f,0.0f); glVertex3f(x+1.0f, y-6.0f, z-3.0f);
        glTexCoord2f(1.0f,0.0f); glVertex3f(x+1.0f, y-6.0f, z-0.5f);
        glTexCoord2f(1.0f,0.5f); glVertex3f(x+1.0f, y-18.0f, z-0.5f);
        glTexCoord2f(0.5f,0.5f); glVertex3f(x+1.0f, y-18.0f, z-3.0f);

        glTexCoord2f(0.5f,0.0f); glVertex3f(x-1.0f, y-6.0f, z-3.0f);
        glTexCoord2f(1.0f,0.0f); glVertex3f(x+1.0f, y-6.0f, z-3.0f);
        glTexCoord2f(1.0f,0.5f); glVertex3f(x+1.0f, y-18.0f, z-3.0f);
        glTexCoord2f(0.5f,0.5f); glVertex3f(x-1.0f, y-18.0f, z-3.0f);

        glTexCoord2f(0.5f,0.0f); glVertex3f(x-1.0f, y-6.0f, z-0.5f);
        glTexCoord2f(1.0f,0.0f); glVertex3f(x+1.0f, y-6.0f, z-0.5f);
        glTexCoord2f(1.0f,0.5f); glVertex3f(x+1.0f, y-18.0f, z-0.5f);
        glTexCoord2f(0.5f,0.5f); glVertex3f(x-1.0f, y-18.0f, z-0.5f);
glEnd();
glPopMatrix();
glPushMatrix();
    glTranslatef(x+0.0f, y+6.0f, z+1.5f);
    glRotatef(-walk, 0.0f,0.0f,1.0f);
    glBegin(GL_QUADS);
        glTexCoord2f(0.5f,0.0f); glVertex3f(x-1.0f, y-6.0f, z+3.0f);
        glTexCoord2f(1.0f,0.0f); glVertex3f(x-1.0f, y-6.0f, z+0.5f);
        glTexCoord2f(1.0f,0.5f); glVertex3f(x-1.0f, y-18.0f, z+0.5f);
        glTexCoord2f(0.5f,0.5f); glVertex3f(x-1.0f, y-18.0f, z+3.0f);

        glTexCoord2f(0.5f,0.0f); glVertex3f(x+1.0f, y-6.0f, z+3.0f);
        glTexCoord2f(1.0f,0.0f); glVertex3f(x+1.0f, y-6.0f, z+0.5f);
        glTexCoord2f(1.0f,0.5f); glVertex3f(x+1.0f, y-18.0f, z+0.5f);
        glTexCoord2f(0.5f,0.5f); glVertex3f(x+1.0f, y-18.0f, z+3.0f);

        glTexCoord2f(0.5f,0.0f); glVertex3f(x-1.0f, y-6.0f, z+3.0f);
        glTexCoord2f(1.0f,0.0f); glVertex3f(x+1.0f, y-6.0f, z+3.0f);
        glTexCoord2f(1.0f,0.5f); glVertex3f(x+1.0f, y-18.0f, z+3.0f);
        glTexCoord2f(0.5f,0.5f); glVertex3f(x-1.0f, y-18.0f, z+3.0f);

        glTexCoord2f(0.5f,0.0f); glVertex3f(x-1.0f, y-6.0f, z+0.5f);
        glTexCoord2f(1.0f,0.0f); glVertex3f(x+1.0f, y-6.0f, z+0.5f);
        glTexCoord2f(1.0f,0.5f); glVertex3f(x+1.0f, y-18.0f, z+0.5f);
        glTexCoord2f(0.5f,0.5f); glVertex3f(x-1.0f, y-18.0f, z+0.5f);
glEnd();

glPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:15:49.577

所有 OpenGL 旋转都是围绕点 (0, 0, 0) 完成的。因此，如果要围绕特定点（rx、ry、rz）旋转顶点，则必须进行以下转换：

```
Translate(-rx, -ry, -rz);
Rotate(alpha, beta, gamma);
Translate(rx, ry, rz); 
```

# excel - 通过检查值是否在 2 列范围内来检索 excel 行值

> ID：10082903
> 
> 赞同：1
> 
> 时间：2012-04-10T03:51:39.280
> 
> 标签：excel, excel-formula

如果输入的值大于*LowerRange*列但低于*UpperRange*列，则 Excel 公式应该接受输入并返回*Price列中***相关行**的值的任何想法。

 ***即输入 6 将返回 5，输入 18 将返回 10，输入 52 将返回 30。

```
LowerRange  UpperRange  Price
1           10          5 
11          20          10
21          30          15
31          40          20
41          50          25
51          60          30

InputCell:
InputFormula: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:55:41.823

`VLOOKUP(lookup_value, table_array, col_index_num, [range_lookup])`与`range_lookup`设置一起使用`TRUE`

从 Excel 帮助文件：

> > > 如果 range_lookup 为 TRUE 或被省略，则返回精确或近似匹配。如果未找到完全匹配，则返回小于 lookup_value 的下一个最大值。
> > > 
> > > 如果 range_lookup 为 TRUE 或被省略，则 table_array 第一列中的值必须按升序排列；否则，VLOOKUP 可能不会返回正确的值。

因此，对于您的数据，使用`=VLOOKUP(B10,$A$2:$C$8,3,1)`要查找`B10`的值（将值 61 添加到 col A 和 =NA() 到 col C 到数据的末尾以处理输入> 60）***

# ant - 在 ant build.xml 中使用 Emma for JUnit

> ID：10082904
> 
> 赞同：1
> 
> 时间：2012-04-10T03:51:41.477
> 
> 标签：ant, junit4, emma

我是使用 Emma 的新手。我正在尝试为 EAR 项目中的模块的 JUnit 测试用例添加 emma ant 任务。我这里没什么问题。

*   我应该使用仪表类来打包我的 EAR 项目吗？
*   为junit添加emma ant任务的好方法是什么？我应该使用 emmarun:on-th-fly 模式还是离线模式？对于 JUnit，我应该使用 fork 还是不使用 fork？

我正在使用 Emma 离线模式和带有 fork 的 Junit。这是我的 build.xml

```
<!--Target and task for EMMA -->
<taskdef resource="emma_ant.properties" classpathref="Emma.libraryclasspath" />
<target name="emma" description="turns on EMMA's instrumentation/reporting" >
    <property name="emma.enabled" value="true" />
    <mkdir dir="${out.instr.dir}" />
    <property name="emma.filter" value="" />
 </target>

<target name="test" depends="init, compile" description="Run JUnit Test cases under emma environment">
    <!-- Emma instrumentation -->
    <emma enabled="${emma.enabled}" verbosity="verbose">
        <instr instrpath="${class.dir}"
                     destdir="${out.instr.dir}"        
                     metadatafile="${coverage.dir}/metadata.em"
                     merge="true" 
                     mode="copy">
            <filter value="${emma.filter}" />
        </instr>
    </emma>

    <!-- JUnit Start -->
    <junit printsummary="yes" fork="yes">
        <test name="com.hf.platform.authorizer.WebTxnAuthorizerTest" todir="${test.report.dir}">
            <formatter type="xml"/>
        </test>
        <classpath>
            <path refid="HFPlatformWeb.classpath"/>
            <path refid="Emma.libraryclasspath"/>
        </classpath>
        <jvmarg value="-Demma.coverage.out.file=${coverage.dir}/coverage.ec" />
        <jvmarg value="-Demma.coverage.out.merge=false" />
    </junit>
    <!-- Junit End -->

    <emma enabled="${emma.enabled}" verbosity="verbose">
        <report>
            <sourcepath>
                <dirset dir="${basedir}">
                    <include name="src"/>
                    <include name="test-src"/>
                </dirset>
             </sourcepath>
            <fileset dir="${coverage.dir}">
                <include name="*.em"/>
                <include name="*.ec"/>
            </fileset>
        <xml outfile="${coverage.report.dir}/report.xml" />
        <txt outfile="${coverage.report.dir}/report.txt" />
        <html outfile="${coverage.report.dir}/report.html" />
        </report>
    </emma>

</target> 
```

当我运行它进行一项测试时，它没有生成任何报告。但是当我用 EclEmma 运行相同的单元测试时，它会给出正确的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:42:57.333

在上面的例子中，我们需要确保以下两件事

1.  元数据文件和覆盖率报告文件（即 .ec、.em 或 .emma 文件）的文件路径应该是相对于项目的绝对路径或相对路径。例如
2.  为了运行夹在检测和报告任务之间的 java/junit 任务，它必须使用检测的类文件路径。例如

    `<classpath> <pathelement location="${out.instr.dir}" /> <path refid="Emma.libraryclasspath"/> <path refid="HFPlatformEJB.classpath"/> </classpath>`

# javascript - 将 JavaScript 数据传递到页面，最佳实践？

> ID：10082911
> 
> 赞同：3
> 
> 时间：2012-04-10T03:53:46.160
> 
> 标签：javascript

我正在编写一个 Web 应用程序，我需要在页面加载时将一些用户数据传递给 JS 应用程序。我已经确定了 3 种不同的方法，我想知道这方面的最佳做法是什么。数据不是特别敏感，但最好是与其他数据相比更安全一些。

## 1.异步加载数据

使用类似`$.ajax()`. 我不喜欢这种方法，因为它通常会导致整个“加载”现象，我想避免。准备好数据而不是单独调用。

## 2\. 将数据烧录到页面中。

这可以通过做这样的事情来实现

```
<script>
    var userdata = { somekey: somevalue }
</script> 
```

## 3\. 使用脚本标签发出请求

这可以通过做这样的事情来实现

```
<script src="server/getdata"></script> 
```

我知道这有点像第一种方法，因为它向服务器发出另一个 get 请求。

我的问题是，上述 3 种方法中的任何一种在安全性方面是否不同或更好。我知道所有 3 种方法都不是特别安全，特别是因为它可以很容易地被嗅探到，但是上述任何一种方法是否比其他 2 种方法更好，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T03:55:52.720

在你给出的那些中，2 是最好的，正如你所说的那样。但是，我不会为它添加一个新的全局变量。相反，我会这样做：

```
<script type="text/javascript" src="application.js"></script> 
```

然后创建`someGlobal`（除其他外）：

```
<script>
    someGlobal.userdata = { somekey: somevalue }
</script> 
```

具有相同优点的另外几种方法是：

1.  [数据属性](http://dev.w3.org/html5/spec//global-attributes.html#custom-data-attribute)。就是这些`data-`。您可以放置​​与特定元素相关联的任意数据（有时特定元素有意义；否则，您可以使用`body`）。
2.  隐藏的表单域。

# python - tornado.httpserver.HTTPServer的组件之间的关系

> ID：10082918
> 
> 赞同：1
> 
> 时间：2012-04-10T03:55:04.130
> 
> 标签：python, tornado

考虑以下代码：

```
http_server = tornado.httpserver.HTTPServer(app) 
http_server.bind(options.port)
http_server.start(5) 
```

五个子流程之间是什么关系？？数据库连接实例是否与应用程序共享一起作为子流程的一部分启动？

使用 http_server.start(5) 的最佳实践是什么？

太谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:39:16.647

这取决于您连接到数据库的位置。最简单的方法是使用一个共享 DB 连接，它`Application`是`RequestHandler`. 在这种情况下，单个连接实例将在所有服务器进程之间共享。

有关示例实现，请参阅[博客演示应用程序](https://github.com/facebook/tornado/blob/master/demos/blog/blog.py)。

# python - 加入列表中的每四个字符串

> ID：10082926
> 
> 赞同：1
> 
> 时间：2012-04-10T03:56:11.453
> 
> 标签：python, list, join

我有一个这样的列表：

```
['Ww','Aa','Bb','Cc','ww','AA','BB','CC'] 
```

并继续以这种模式，使用不同的大写和小写。我想要做的是将这个列表中的每四个项目连接在一起。因此，生成的新列表（给定上面的列表）如下所示：

```
['WwAaBbCc', "wwAABBCC'] 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T04:01:28.017

```
>>> L = ['Ww','Aa','Bb','Cc','ww','AA','BB','CC']
>>> [''.join(x) for x in zip(*[iter(L)] * 4)]
['WwAaBbCc', 'wwAABBCC'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T04:00:49.190

```
my_list = ['Ww','Aa','Bb','Cc','ww','AA','BB','CC']
[''.join(my_list[i:i + 4]) for i in range(0, len(my_list), 4)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T04:10:06.100

你可以使用这样的东西：

```
def _get_chunks(lVals, size):
    for i in range(0, len(lVals), size):
        yield lVals[i: i + size]

data = ['Ww','Aa','Bb','Cc','ww','AA','BB','CC']

output = [''.join(chunk) for chunk in _get_chunks(data, 4)]
>>> ['WwAaBbCc', 'wwAABBCC'] 
```

# streaming - 使用 red5 重新流式传输

> ID：10082927
> 
> 赞同：0
> 
> 时间：2012-04-10T03:56:13.723
> 
> 标签：streaming, red5, icecast

我有 1 台运行 Red5 的服务器和大约 5-6 台运行 icecast2 作为频道的其他服务器现在我想使用 Red5 从 icecast2 重新流式传输

当用户请求内容时，Red5会知道该内容属于哪个icecast2服务器，并连接到正确的服务器以获取媒体并重新流式传输给用户

我的问题是，通常 Red5 流式传输静态内容，但在我的情况下，我必须以指定的速度和带宽从 icecast2 重新传输动态内容？那可能吗？有什么我可以看的例子来了解这个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:08:10.647

要将一个服务器重新流式传输到另一台服务器，请使用[StreamingProxy](http://dl.fancycode.com/red5/api/org/red5/server/stream/StreamingProxy.html)

```
import java.util.HashMap;
import java.util.Map;

import org.red5.server.adapter.MultiThreadedApplicationAdapter;
import org.red5.server.api.IBasicScope;
import org.red5.server.api.IConnection;
import org.red5.server.api.IScope;
import org.red5.server.api.stream.IBroadcastStream;
import org.red5.server.stream.IBroadcastScope;
import org.red5.server.stream.StreamingProxy;

public class Application extends MultiThreadedApplicationAdapter implements IStreamListener {

private Map<String, StreamingProxy> streamingProxyMap = new HashMap<String, StreamingProxy>();

public IBroadcastScope getBroadcastScope(IScope scope, String name) {
    IBasicScope basicScope = scope.getBasicScope(IBroadcastScope.TYPE,
            name);
    if (!(basicScope instanceof IBroadcastScope)) {
        return null;
    } else {
        return (IBroadcastScope) basicScope;
    }
}

/** {@inheritDoc} */
@Override
public boolean connect(IConnection conn, IScope scope, Object[] params) {
    return true;
}

public void streamBroadcastStart(IBroadcastStream stream)
{
    IScope scope = stream.getScope();
    IBroadcastScope bsScope = getBroadcastScope(scope, stream.getPublishedName());
    StreamingProxy proxy = new StreamingProxy();
    proxy.setHost("live.justin.tv");
    proxy.setApp("app");
    proxy.setPort(1935);
    proxy.init();
    bsScope.subscribe(proxy, null);
    proxy.start("MY_STRING", StreamingProxy.LIVE, null);
    streamingProxyMap.put(stream.getPublishedName(), proxy);
    stream.addStreamListener(this);
}

public void packetReceived(IBroadcastStream stream, IStreamPacket packet) 
{
    RTMPMessage m = RTMPMessage.build((IRTMPEvent) packet,packet.getTimestamp());
    streamer.pushMessage(null, m);
}       

synchronized public void streamBroadcastClose(IBroadcastStream stream) {
    StreamingProxy proxy =
            streamingProxyMap.get(stream.getPublishedName());
    if (proxy != null) {
            proxy.stop();
            IScope scope = stream.getScope();
            IBroadcastScope bsScope = getBroadcastScope(scope, stream.getPublishedName());
            if (bsScope != null) {
                bsScope.unsubscribe(proxy);
        }
    }
}

/** {@inheritDoc} */
@Override
public void disconnect(IConnection conn, IScope scope) {
    super.disconnect(conn, scope);
}

} 
```

# jquery - 从 JSON 数据创建联系人表

> ID：10082929
> 
> 赞同：3
> 
> 时间：2012-04-10T03:56:23.880
> 
> 标签：jquery, html, json, html-table

我最近开始了一个关于 HTML、JSON 和 jQuery 的演示项目。我现在想要实现的是从 JSON 文件中获取数据并将其加载到我的表中。我是 JSON 新手，所以我花了一天时间才一无所获，数据没有加载到我的表中。

这是我的 JSON 文件“contact.json”：

```
{
    "length": 2,
    "info": [
        {
            "fullname":"Noob Here",
            "email":"myemail@server.com",
            "phone":"123456",
            "badgeid": "11111",
        },
        {
            "fullname":"Newbie There",
            "email":"hisemail@server.com",
            "phone":"589433",
            "badgeid": "11112",
        }
    ]
} 
```

我加载数据的脚本：

```
window.onload = function () {
    var contacts;
    setTimeout(loadData(contacts, "contact"), 2000);
    $(contacts.info).each(function(index, element){  
        $('#contacts').append('<tr><td>' + element.fullname + '</td><td>'
            + element.email + '</td><td>'
            + element.phone + '</td><td>'
            + element.badgeid + '</td></tr>');       
    })
};

function loadData(myobject, myfile){
    myobject = $.parseJSON("../data/" + myfile + ".json");
}; 
```

请注意，我可能想从各种 JSON 文件中加载，所以 loadData 那里有一些参数。否则，它将直接解析 JSON 文件。

我已经在 HTML 中声明了一个“#contact”表。错误控制台说：

> 未捕获的 SyntaxError：意外的令牌。
> jQuery.extend.parseJSONjquery.min.js:442
> loadDataHomepage.html:23
> window.onload

为什么会出现这个错误？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T04:42:59.460

参考这个帖子

[JSON.parse 意外字符错误](https://stackoverflow.com/questions/8524933/json-parse-unexpected-character-error)

我知道你解析了已经解析的 JSON

您可以按如下方式替换脚本：

```
 window.onload = function () {
       var contacts;
       $.getJSON('contact.json',function(contacts)
        {
          $(contacts.info).each(function(index, element){  
               $('#contacts').append('<tr><td>' + element.fullname + '</td><td>'
                 + element.email + '</td><td>'
                 + element.phone + '</td><td>'
                 + element.badgeid + '</td></tr>');       
           })  
        });
     }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T04:02:24.993

通过 JSON 验证器运行您的 JSON，例如[JSONLint.com](http://jsonlint.com)。您的 JSON 中有语法错误：

```
{
    "length": 2,
    "info": [
        {
            "fullname":"Noob Here",
            "email":"myemail@server.com",
            "phone":"123456",
            "badgeid": "11111",  <---- Do not put a comma before a curly brace
        },
        {
            "fullname":"Newbie There",
            "email":"hisemail@server.com",
            "phone":"589433",
            "badgeid": "11112",  <---- remove comma before curly brace
        }
    ]
} 
```

您的 JSON 应如下所示：

```
{
    "length": 2,
    "info": [
        {
            "fullname":"Noob Here",
            "email":"myemail@server.com",
            "phone":"123456",
            "badgeid": "11111"
        },
        {
            "fullname":"Newbie There",
            "email":"hisemail@server.com",
            "phone":"589433",
            "badgeid": "11112"
        }
    ]
} 
```

# javascript - 如何使物体向鼠标指示方向移动？

> ID：10082930
> 
> 赞同：0
> 
> 时间：2012-04-10T03:56:54.583
> 
> 标签：javascript, jquery, css, jquery-ui

嗨，我正在尝试在使用左指针单击区域时使对象在该区域中移动。这在 javascript/jquery 中可行吗？如果可能的话，你能给我一些例子吗？

我的目标是在 javascript/html/css

[http://i.stack.imgur.com/mL8DX.gif](http://i.stack.imgur.com/mL8DX.gif) (1mb, 请让它加载)

（我不想让游戏只是一个很酷的“互动网站”）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:07:22.623

可以在这里看到一个工作示例：http: [//jsfiddle.net/XY8CA/2/](http://jsfiddle.net/XY8CA/2/)

每当单击事件发生时，都会使用它`pageX`和`pageY`值来找到画布对象中单击的确切位置。然后在 jQuery animate 函数中使用此坐标来更改对象 div 在其中的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T03:59:54.213

这是可能的，但您的答案可能包括通过将对象的位置设置为 CSS 中的绝对位置并修改其左侧和顶部位置直到它到达带有 setInterval 计时器的点击区域以详细说明 A* 路径查找，从而将对象移向点击位置。

# java - 如何从多个ClassLoader的不同位置加载同名资源？

> ID：10082933
> 
> 赞同：2
> 
> 时间：2012-04-10T03:57:35.970
> 
> 标签：java, classloader

我正在尝试编写一个可以部署 Tomcat 等应用程序的“应用程序服务器”。在部署应用程序时，我创建了一个自定义的 ClassLoader 实例并使用它来加载应用程序文件夹中的类和资源。关于 ClassLoader 有很多需要学习的地方，我仍然对它感到困惑。

我的问题是：不同的 ClassLoader 实例是否有不同的“类路径”？或者这些 ClassLoader 实例是否从同一位置寻找资源？

例如，'app1' 有一个资源位于`apps/app1/classes/log4j.properties`'app2' 也有一个位于`apps/app2/classes/log4j.properties`，如何让 app1 的 ClassLoader 以正确的路径读取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:04:01.523

那是您在自定义 ClassLoader 中实现的。

假设您从扩展`URLClassLoader`.

当您解压/部署您的“应用程序”时，您必须调用`void addURL(URL url)`您的类加载器，它将*指定的 URL 附加到 URL 列表以搜索类和资源。*

一个过程可能是这样的

*   让你的应用程序作为 zip/war
*   解压到目录
*   获取解压缩资源（jar、子目录等）的列表，您可以在其中调用为该应用程序实例化的类加载器上的方法，看起来像这样

_

```
public void addClassPaths( String[] classPaths ) throws IOException {

    for ( int i = 0; i < classPaths.length; i++ ) {

        String resource = classPaths [ i ];
        File file = new File( resource ).getCanonicalFile(  );

        if ( file.isDirectory(  ) ) {

            addURL( file.toURI(  ).toURL(  ) );
        } 
        else {

            URL url = new URL( "jar", "", "file:" + file.getCanonicalPath(  ) + "!/" );

            addURL( url );
        }
    }
} 
```

# google-app-engine - Appengine JPA 2 级缓存无法持久化

> ID：10082934
> 
> 赞同：1
> 
> 时间：2012-04-10T03:58:09.760
> 
> 标签：google-app-engine, jpa, datanucleus

我正在尝试将 datanucleus jpa 2 级缓存与 appengine 一起使用。

我真的不清楚如何为 appengine 配置。

我有以下

```
persistence.xml

<property name="datanucleus.cache.level2" value="true"/>
<property name="datanucleus.cache.level2.type" value="javax.cache"/>
<property name="datanucleus.cache.level2.cacheName" value="xxxxx"/> 
```

和 Maven 片段

```
pom.xml
<dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-jpa</artifactId>
    <version>1.1.5</version>
</dependency>
<dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-cache</artifactId>
    <version>1.1.1</version>
</dependency>
<dependency>
        <groupId>com.google.appengine.orm</groupId>
        <artifactId>datanucleus-appengine</artifactId>
        <version>1.0.10</version>            
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>1.1.5</version>
  </dependecny> 
```

现在的问题是，当我持久化一个实体时，它会返回一个主键，但它不能从数据存储查看器或其他查询中获得。我在本地开发、junit 测试或 appengine 的远程实例中遇到了这个问题。

删除缓存配置后，代码就可以正常工作。

测试片段

```
@Test
public void findById(){

    MerchantPromotion merchantPromotion1 = new MerchantPromotion();     

    em.persist(merchantPromotion1);

    MerchantPromotion  merchantPromotion = dao.findById( merchantPromotion1.getKey() );

    assertNotNull( merchantPromotion); <---- assert fails here

} 
```

问题是什么？

谢谢

-lp

# android - Android Facebook SDK：发布消息而不显示 Facebook 页面

> ID：10082942
> 
> 赞同：1
> 
> 时间：2012-04-10T03:59:11.807
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试将 Facebook 集成到我的 Android 应用程序以进行社交发布。我已经从[这里](https://github.com/facebook/facebook-android-sdk)下载了最新的 Facebook sdk并应用了发布到 Facebook 所需的所有设置。现在我可以发布到 Facebook。但问题是，当我从 facebook sdk 运行示例程序时，一个类似页面的浏览器是打开的，用户必须自己在那里输入消息。但我不希望这个页面出现。我希望在不打开 Facebook 对话框的情况下直接发布固定消息。但是如果没有办法避免这种情况，请告诉我如何修复消息的某些部分，以便用户无法修改它。提前致谢

**EDIT1：**这是我使用[这个](http://jona.than.biz/projects/fbrocket/?d=bin&v=0.1a)项目后得到的消息

```
04-10 11:44:34.691: I/dalvikvm(719): Failed resolving Lnet/xeomax/TestRocket/TestRocket; 

>interface 22 'Lnet/xeomax/FBRocket/LoginListener;'

>04-10 11:44:34.691: W/dalvikvm(719): Link of class 'Lnet/xeomax/TestRocket/TestRocket;' failed

>04-10 11:44:34.691: D/AndroidRuntime(719): Shutting down VM

>04-10 11:44:34.701: W/dalvikvm(719): threadid=1: thread exiting with uncaught exception (group=0x40015560)

>04-10 11:44:34.781: E/AndroidRuntime(719): FATAL EXCEPTION: main

>04-10 11:44:34.781: E/AndroidRuntime(719): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{net.xeomax.TestRocket/net.xeomax.TestRocket.TestRocket}: java.lang.ClassNotFoundException: net.xeomax.TestRocket.TestRocket in loader dalvik.system.PathClassLoader[/data/app/net.xeomax.TestRocket-1.apk]

>04-10 11:44:34.781: E/AndroidRuntime(719):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at android.os.Handler.dispatchMessage(Handler.java:99)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at android.os.Looper.loop(Looper.java:130)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at android.app.ActivityThread.main(ActivityThread.java:3683)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at java.lang.reflect.Method.invokeNative(Native Method)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at java.lang.reflect.Method.invoke(Method.java:507)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at dalvik.system.NativeStart.main(Native Method)

>04-10 11:44:34.781: E/AndroidRuntime(719): Caused by: java.lang.ClassNotFoundException: net.xeomax.TestRocket.TestRocket in loader dalvik.system.PathClassLoader[/data/app/net.xeomax.TestRocket-1.apk]

>04-10 11:44:34.781: E/AndroidRuntime(719):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)

>04-10 11:44:34.781: E/AndroidRuntime(719):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)

>04-10 11:44:34.781: E/AndroidRuntime(719):     ... 11 more 
```

**编辑 2：**通过引入微小的变化，现在我可以摆脱上述错误。只需将文件夹“libs”添加到项目中并在此文件夹中添加“fbrocket-0.1a.jar”。非常感谢大家花时间帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T04:07:29.373

您可以通过添加一个 jar 文件并按照一些简单的步骤轻松完成此操作。您必须在 facebook 上拥有开发者帐户。有关您的问题的完整信息可在[Facebook 共享](https://stackoverflow.com/questions/8162451/facebook-twitter-integration-in-my-android-application) 此链接上的文本和图像中找到。请参阅我在那里给出的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T04:04:54.470

使用 FacebookRocket API **[http://www.androidpeople.com/android-facebook-api-example-using-fbrocket#idc-cover](http://www.androidpeople.com/android-facebook-api-example-using-fbrocket#idc-cover)**如果你使用这个 api facebook 登录页面只来试试这个

尝试以下代码

```
 import net.xeomax.FBRocket.FBRocket;
     import net.xeomax.FBRocket.Facebook;
     import net.xeomax.FBRocket.LoginListener;
     import net.xeomax.FBRocket.ServerErrorException;
     import android.app.Activity;
     import android.os.Bundle;

    public class Fbook extends Activity implements LoginListener {

private FBRocket fbRocket;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    shareFacebook();
}

public void shareFacebook() {
    fbRocket = new FBRocket(this, "PitchFork TRY",
            "xxxxxxxxxxxxxxxxxxxx");

    if (fbRocket.existsSavedFacebook()) {
        fbRocket.loadFacebook();
    } else {
        fbRocket.login(R.layout.searchlist_view);
    }
}

public void onLoginFail() {
    fbRocket.displayToast("FaceBook Login failed!");
    fbRocket.login(R.layout.searchlist_view);
}

public void onLoginSuccess(Facebook facebook) {

    fbRocket.displayToast("FaceBook Login success!");
    try {
    final BaseApplication mlisturl = (BaseApplication)   getApplication();
        facebook.setStatus("posting ur custom status :::::::::::::::"
                +"data");
        fbRocket.displayDialog("Status Posted Successfully!! "
                + facebook.getStatus());
    } catch (ServerErrorException e) {
        if (e.notLoggedIn()) {
            fbRocket.login(R.layout.searchlist_view);
        } else {
            System.out.println(e);
        }
    }
} 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T04:38:49.767

这是不可能的。

您必须登录 Facebook 帐户才能在 Facebook 上发布消息。

仅当您将 facebook id 和密码静态存储到应用程序中时，您的要求才可能实现。

好吧，但有一个替代方案。如果您使用 facebook sdk 在 Facebook 上实现发布消息，那么它可能会对您有所帮助。使用它，您只能获得一次 facebook 登录屏幕。如果用户已使用该登录 ID 和密码进行注册，那么它将永远不会再次出现，并简单地发送消息已发布在 Facebook 上的验证 toast 消息。

对于上述示例，请参阅此示例。

1.  [示例 1](http://www.londatiga.net/it/how-to-use-facebook-sdk-to-post-status-from-android/)
2.  [示例 2](http://blog.doityourselfandroid.com/2011/02/28/30-minute-guide-integrating-facebook-android-application/)
3.  [演示示例](https://github.com/facebook/facebook-android-sdk/blob/master/examples/simple/src/com/facebook/android/Example.java)
4.  [示例 4](http://w2davids.wordpress.com/android-facebook-integration/)

希望它会帮助你。如果没有，请告诉我。

享受。:)

**更新**

要在 facebook 上发布静态消息，请在将 Facebook sdk 集成到项目中后执行以下操作：

```
System.out.println("Message is: "+postMessage); // My static post message

                        facebook.authorize(MainActivityPage.this, new String[]{ "user_photos,publish_checkins,publish_actions,publish_stream"},new DialogListener() {                     
                            @Override                     
                            public void onComplete(Bundle values) {   

                                Bundle params = new Bundle();              
                                params.putString(Facebook.TOKEN, facebook.getAccessToken());              
                                params.putString("message", postMessage);               

                                AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);              
                                mAsyncRunner.request("me/feed", params, "POST", new SampleUploadListener(),null);

                                Toast.makeText(getApplicationContext(), "Message Posted on Facebook.", Toast.LENGTH_SHORT).show();
                            }                      
                            @Override                     
                            public void onFacebookError(FacebookError error) {}                      
                            @Override                     
                            public void onError(DialogError e) {}                      
                            @Override                     
                            public void onCancel() {}                 
                        }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T05:09:10.253

试试这个

```
public void postMessageOnWall(String msg) {
    if (facebook.isSessionValid()) {
        Bundle parameters = new Bundle();
        parameters.putString("message", msg);
        try {
            String response = facebook.request("me/feed", parameters,"POST");
            System.out.println(response);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } else {
        login();
    }
} 
```

请按照[链接](http://blog.doityourselfandroid.com/2011/02/28/30-minute-guide-integrating-facebook-android-application/)

# perl - 如何在 perl 模块中引用此参数

> ID：10082944
> 
> 赞同：0
> 
> 时间：2012-04-10T03:59:30.993
> 
> 标签：perl, twitter

我正在尝试使用 AnyEvent::Twitter::Stream 模块，并且我想引用一个列出我想要关注的 Twitter uid 的文件。我可以将 uids 放在代码本身中，它的工作原理如下：

```
my $done = AnyEvent->condvar;
       my $nt_filter = AnyEvent::Twitter::Stream->new(
             username => $cf{account},
             password => $cf{password},
           method => 'filter',
           follow => '15855509,14760150,18598536',
            on_tweet => sub {
                 #some code.....
            },
            on_error => sub {
                my $error = shift;
                debug "ERROR: $error";
            },
            timeout => 45,
        );
       $done->recv; 
```

但是当我尝试使用这样的文件做同样的事情时：

```
my $done = AnyEvent->condvar;
       my $nt_filter = AnyEvent::Twitter::Stream->new(
           open UID_FILE, "/tmp/uids" or die $!;

           my @uid_line = <UID_FILE>;

             username => $cf{account},
             password => $cf{password},
           method => 'filter',
           follow => @uid_file,
            on_tweet => sub {
                  #some code....
            },
            on_error => sub {
                my $error = shift;
                debug "ERROR: $error";
            },
            timeout => 45,
        );
       $done->recv; 
```

它失败。uids 文件有以下内容：

```
'15855509,14760150,18598536' 
```

我从 Twitter 收到 406 错误，表明格式不正确。我猜引号不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:15:04.577

`AnyEvent::Twitter::Stream`模块子类，`AnyEvent`您根本不需要访问基本模块。所有功能都由`new`您在此处指定的方法和回调提供，您不应调用`AnyEvent->condvar`or `$done->recv`。

`open`调用和赋值`@uid_line`不属于对 的调用`AnyEvent::Twitter::Stream->new`。

此外，您用来为`follow`参数提供值的变量`@uid_file`不是`@uid_line`.

你*必须* `use strict;`并且`use warnings;`在你的程序开始时，特别是如果你正在寻求帮助。这将捕获像这样的简单错误，否则您可能会忽略这些错误。

您通常不能使用数组来提供单个标量值。在这种情况下，只要文件只有一行就可以了（因此数组中只有一个元素），但有很多可能出错的地方。

此外，您在不属于那里的值中传递单引号：它们出现在代码中仅用于标记 Perl 字符串的开始和结束。

我建议您像这样从文件中读取所有十进制字符串

```
open my $uid_fh, '<', '/tmp/uids' or die $!;
my @uids;
push @uids, /\d+/g for <$uid_fh>; 
```

（请注意，这些行属于调用*之前*`AnyEvent::Twitter::Stream->new`）

然后您可以`follow`通过编写来提供参数

```
follow => join(',', @uids), 
```

我希望这很清楚。如果您需要进一步的帮助，请再次询问。

* * *

**编辑**

合并到您的代码中的这些更改应该如下所示，但它是不完整的，我不能保证它会正常工作。

```
use strict;
use warnings;

use AnyEvent::Twitter::Stream;

open my $uid_fh, '<', '/tmp/uids' or die $!;
my @uids;
push @uids, /\d+/g for <$uid_fh>;

my %cf = (
  account => 'myaccount',
  password => 'password',
);

my $nt_filter = AnyEvent::Twitter::Stream->new(
  username => $cf{account},
  password => $cf{password},
  method => 'filter',
  follow => join(',', @uids),
  on_tweet => sub {
    #some code....
  },
  on_error => sub {
    my $error = shift;
    debug "ERROR: $error";
  },
  timeout => 45,
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:21:51.943

在我看来，您正在尝试在标量上下文中传递数组，因此您可能将 follow 设置为`1`数组中的元素数（文件中的行数）。

假设您的文件中只有一行 ID，请执行以下操作：

```
 open UID_FILE, "/tmp/uids" or die $!;

   # Load the first line of uids
   my $uid_line = <UID_FILE>;

   # Remove apostrophes from input.
   # This may or may not be necessary
   $uid_line =~ s/'//g;

   # Don't forget to close the file
   close(UID_FILE);

   my $done = AnyEvent->condvar;
   my $nt_filter = AnyEvent::Twitter::Stream->new(

         username => $cf{account},
         password => $cf{password},
       method => 'filter',
       follow => $uid_line,
        on_tweet => sub {
              #some code....
        },
        on_error => sub {
            my $error = shift;
            debug "ERROR: $error";
        },
        timeout => 45,
    );
   $done->recv; 
```

您可能需要从输入行中删除前导撇号和尾随撇号。例如：

```
$uid_line =~ s/^'//;
$uid_line =~ s/'$//; 
```

您可能只需删除所有撇号就可以逃脱，例如：

```
$uid_line =~ s/'//g; 
```

# jquery - 扫描表单字段并使用 jQuery 构建数组

> ID：10082945
> 
> 赞同：0
> 
> 时间：2012-04-10T03:59:44.107
> 
> 标签：jquery, ajax, forms

我有一个使用 AJAX 传递值的表单。该表单在某种程度上是动态的，具体取决于用户可以在后端添加的新字段。我最终得到了一些像这样可怕的东西：

```
 var collected = {     
      1 : $('#wpsc_checkout_form_1').val(),          
      2 : $('#wpsc_checkout_form_2').val(),
      3 : $('#wpsc_checkout_form_3').val(),
      4 : $('#wpsc_checkout_form_4').val(),
      5 : $('#wpsc_checkout_form_5').val(),
      6 : $('#wpsc_checkout_form_6').val(),          
      7 : $('#wpsc_checkout_form_7').val(),          
      8 : $('#wpsc_checkout_form_8').val(),
      9 : $('#wpsc_checkout_form_9').val(),
      10 : $('#wpsc_checkout_form_10').val(),
      11 : $('#wpsc_checkout_form_11').val(),          
      12 : $('#wpsc_checkout_form_12').val(),
      13 : $('#wpsc_checkout_form_13').val(),
      14 : $('#wpsc_checkout_form_14').val(),
      15 : $('#wpsc_checkout_form_15').val(),
      16 : $('#wpsc_checkout_form_16').val(),          
      17 : $('#wpsc_checkout_form_17').val(),          
      18 : $('#wpsc_checkout_form_18').val(),
      19 : $('#wpsc_checkout_form_19').val(),
      20 : $('#wpsc_checkout_form_20').val(),          
      21 : $('#wpsc_checkout_form_21').val(),          
      22 : $('#wpsc_checkout_form_22').val(),
      23 : $('#wpsc_checkout_form_23').val(),
      24 : $('#wpsc_checkout_form_24').val(),
      25 : $('#wpsc_checkout_form_25').val(),
      26 : $('#wpsc_checkout_form_26').val(),          
      27 : $('#wpsc_checkout_form_27').val(),          
      28 : $('#wpsc_checkout_form_28').val(),
      29 : $('#wpsc_checkout_form_29').val(),
      30 : $('#wpsc_checkout_form_20').val(),          
      31 : $('#wpsc_checkout_form_31').val(),          
      32 : $('#wpsc_checkout_form_32').val(),
      33 : $('#wpsc_checkout_form_33').val(),
      34 : $('#wpsc_checkout_form_34').val(),
      35 : $('#wpsc_checkout_form_35').val(),
      36 : $('#wpsc_checkout_form_36').val(),          
      37 : $('#wpsc_checkout_form_37').val(),          
      38 : $('#wpsc_checkout_form_38').val(),
      39 : $('#wpsc_checkout_form_39').val(),
      40 : $('#wpsc_checkout_form_40').val(),              
      41 : $('#wpsc_checkout_form_41').val(),          
      42 : $('#wpsc_checkout_form_42').val(),
      43 : $('#wpsc_checkout_form_43').val(),
      44 : $('#wpsc_checkout_form_44').val(),
      45 : $('#wpsc_checkout_form_45').val(),
      46 : $('#wpsc_checkout_form_46').val(),          
      47 : $('#wpsc_checkout_form_47').val(),          
      48 : $('#wpsc_checkout_form_48').val(),
      49 : $('#wpsc_checkout_form_49').val(),          
      } 
```

有人可以建议一种更清洁的方式来做到这一点，如果他们在某个时候由用户创建，这也将解释任何高于 49 的数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T04:01:40.777

如果您确实必须为此目的使用 object，并且您的输入 val ID 具有该格式，您可以：

```
var collected = {};
$('input[id^=wpsc_checkout_form_]').each(function(i) {
   collected[i] = $(this).val();
});

$.post('/your/url', collected, function(resp) {
   // handler
}); 
```

或者你可以使用 .serialize()

```
$('#formId').serialize() 
```

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

> .serialize() 方法以标准 URL 编码表示法创建文本字符串。它对表示一组表单元素的 jQuery 对象进行操作。表单元素可以有多种类型

然后在你的ajax中：

```
$.post('url.php', $('#formId').serialize(), function(responseText) {
   // handler
}); 
```

# c - 警告：从不兼容的指针类型初始化

> ID：10082949
> 
> 赞同：1
> 
> 时间：2012-04-10T04:00:14.120
> 
> 标签：c

大家好，自从我接触 C 以来已经有一段时间了，所以我对它真的很生疏。我编写了一个小程序来使用两个动态数组创建一个矩阵。但是，我收到此警告，但我不明白为什么？我想我不太确定指针的指针。有人可以帮我指出我的问题在哪里吗？谢谢。

```
sm.c: In function ‘main’:
sm.c:11:13: warning: initialisation from incompatible pointer type [enabled by default]
sm.c: In function ‘makeMatrix’:
sm.c:27:3: warning: return from incompatible pointer type [enabled by default]

#include <stdio.h>
#include <stdlib.h>

typedef int (**intptr) (); 
intptr makeMatrix(int n); 

int main(int argc, char *argv[]) {

  int n = 2;  

  int **A = makeMatrix(n);
  if(A) { 
    printf("A\n");
  }
  else printf("ERROR");
}

intptr makeMatrix(int size) {
  int **a = malloc(sizeof *a * size);
  if (a) 
  {
    for (int i = 0; i < size; i++)
    {   
      a[i] = malloc(sizeof *a[i] * size);
    }   
  }
  return a;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T04:06:03.650

你在这里遇到了一些问题：

```
typedef int (**intptr) (); 
intptr makeMatrix(int n); 

...

int **A = makeMatrix(n); 
```

`intptr`typedef 声明了一个指向函数的指针，该函数接受不确定数量的参数并返回一个`int`. `A`不是一个`int`。

你需要写：

```
int **makeMatrix(int n);

int **A = makeMatrix(n); 
```

在这里使用 a`typedef`没有多大帮助。

```
typedef int **(*intptr)(); 
```

这声明了一个指向函数的指针，该函数返回指向指向`int`. 但是写作

```
intptr makeMatrix(int n); 
```

将声明`makeMatrix()`返回指向函数的指针，而不是`int **`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:05:21.193

您的 typedef 有一个额外的`()`，使其成为零参数函数类型。删除它，你应该很好。

# c - 从文件系统读取数据与将数据直接编译到程序中

> ID：10082952
> 
> 赞同：0
> 
> 时间：2012-04-10T04:00:54.083
> 
> 标签：c, io

我有一个包含数据的文件（10-20MB），其中每一行都是一条数据。

我有一个从文件系统读取文件的 C 程序，然后根据命令行输入，它读取文件的每一行，对每一行进行计算以确定是否应该返回该行，然后返回数据。

假设程序在开始时做了一个 fread 并将整个文件读入内存，然后直接从内存中解析。

如果我不是从文件系统读取数据，而是通过创建如下所示的数组将数据直接编译到程序中，程序会执行得更快吗？

```
char *dataArray[] = {"data1", "data2", "data3"....}; 
```

由于操作系统需要从文件系统读取整个二进制文件，我的直觉是这两种技术的执行时间是相似的，因为从文件系统读取将是高位。但是，有人对此有更明确的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T04:07:55.920

将所有内容定义为程序文字肯定会更快。

您不需要对数据文件进行相对较慢的“打开”调用，也不需要将数据从缓冲区移动到存储中。

这是一个常见的优化。1970 年，从那以后的每一本编程/编码风格书籍都强烈建议**你不要这样做**。实际的性能提升是微乎其微的，而您获得的性能却失去了可维护性和灵活性。

如果您想对此类问题进行快速可维护的优化，请查看“ [mmap](http://en.wikipedia.org/wiki/Mmap) ”调用，它使缓冲区直接可用于您的程序并最大限度地减少数据移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:05:51.643

我怀疑执行时间的差异会很大，但从内存利用率的角度来看，将数据放入可执行文件（并对其`const`进行适当的限定）会产生很大的不同。

如果您从文件中读取 10-20 兆数据到程序中分配的内存中（例如 via `malloc`），这些数据最初存在于内存中的两个位置：文件系统缓存和程序的私有内存。如果内存紧张，可以丢弃前一个副本，但后者占用物理内存或永久交换，直到它被释放。

另一方面，如果 10-20 兆数据是程序映像的一部分（在可执行文件中），则数据将被按需分页，并且可以在需要时丢弃，因为操作系统知道如果它可以重新加载页面再次需要它们。

# jquery - 将 JSON 传递给 jQuery 插件

> ID：10082967
> 
> 赞同：0
> 
> 时间：2012-04-10T04:03:43.143
> 
> 标签：jquery, json, variables, plugins, default

我试图弄清楚如何以以下格式将设置传递给动画插件（我知道期望用户跳入并使用这样的设置是不好的，但我将构建一个 GUI 来配合它以及）：

```
 $('#animationContainer').plugin({
      'path':[
            {'path_on_x':[ // PATH_ON X IS AN ARRAY
                {'0':'0px','1':'0px','2':'0px'}, // object 1 starting X values (0,1,2)
                {'0':'0px','1':'0px','2':'0px'}, // object 2 starting X values (0,1,2)
                {'0':'150px','1':'150px','2':'150px'} // object 3 starting X values...
            ]},
            {'path_off_x':[ // PATH_ON X IS AN ARRAY
                {'0':'0px','1':'0px','2':'0px'},
                {'0':'0px','1':'0px','2':'0px'},
                {'0':'150px','1':'150px','2':'150px'}
            ]},
            {'path_on_y':[ // PATH_ON Y IS AN ARRAY
                {'0':'0px','1':'0px','2':'0px'},
                {'0':'0px','1':'0px','2':'0px'},
                {'0':'0px','1':'50px','2':'200px'}
            ]},
            {'path_off_y':[ // PATH_ON Y IS AN ARRAY
                {'0':'0px','1':'0px','2':'0px'},
                {'0':'0px','1':'0px','2':'0px'},
                {'0':'200px','1':'50px','2':'0px'}
            ]}
        ]
     }); 
```

此代码当前在插件中设置，我正在引用所有静态值。“PATH”包含与沿路径动画对象相关的所有设置。path_on_x、path_off_x、path_on_y 和 path_off_y 都包含从点 0 到点 1 到点 2 等动画的特定坐标值集。

数组中的每组坐标都包含特定于不同动画对象的值。（在上面的代码中注明）

我习惯于使用典型的 defaults= .... 代码并将其与用户选项合并，但在这种情况下我将如何设置默认值（或其他类型的后备设置）？我很确定标准默认值 = ... 代码不会削减它，并且简单地使用上面的代码代替默认值并不能说明可能有 20 个对象被动画而不是 3 个如上所示。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:41:06.320

我会建议这样的格式：

```
$('#animationContainer').plugin({
  "path": [
    {
      "x": [[0, 0, 0], [0, 0, 0]],
      "y": [[0, 0, 0], [0, 0, 0]]
    },
    {
      "x": [[0, 0, 0], [0, 0, 0]],
      "y": [[0, 0, 0], [0, 0, 0]]
    },
    {
      "x": [[150, 150, 150], [150, 150, 150]],
      "y": [[0, 50, 200], [200, 50, 200]]
    }
  ]
}); 
```

这样，您就可以在一个地方拥有属于一个对象的属性，而不是让它们均匀分布。它也更容易理解。*（顺便说一句，“路径”属性本身看起来很适合集成到单个对象中，而不是保持在顶层。）*

访问属性将是直截了当的：

```
options.path[0].x[0] // starting values
options.path[0].x[1] // stopping values 
```

并且对它们应用默认值变得很容易。它只需要一个 for 循环

```
for(var i=0; i<options.path.length; i++) {
  // merge options.path[i] with default values, e.g. via $.extend()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:40:20.127

您可以将 json 传递到您的插件中，然后将 json 转换为您的要求。插件中不需要使用这种 json 格式。相反，您可以轻松地循环和使用 if 条件。顺便说一下，这里有一个小工具可以帮助你。

[http://code.google.com/p/jquery-json/](http://code.google.com/p/jquery-json/)

# python - 如果 is_multipart 为真，python 子消息对象到底是什么，python 如何组织它们？

> ID：10082968
> 
> 赞同：0
> 
> 时间：2012-04-10T04:03:46.950
> 
> 标签：python, email, message, multipart, smtplib

我正在使用电子邮件模块并从本质上是电子邮件的 ASCII 和 Unicode 文件中创建一个消息对象。

这些电子邮件包括一位秘书在其中一部分回复，而在其他部分则由老板创建电子邮件。这些电子邮件是从 pst 文件中提取的（即从 Outlook 或类似文件中提取）。如果您熟悉公司电子邮件，那么您就会知道我在说什么。

另外，如果确实有多部分并且我在这些部分上使用 get_payload() 并指定一个索引，我，索引是如何排列的？就像指数中的内容一样？它们是电子邮件的组成部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:15:02.957

多部分消息基本上是嵌套的电子邮件消息。嵌入的消息按消息附加到包含电子邮件的顺序排列。电子邮件中没有嵌入索引（如果我正确理解您的问题） - get_payload() 将返回嵌入电子邮件消息的列表。

如果您看到原始电子邮件以及 MIME 部分的排列方式，它将阐明您的理解。

# magento - TopLinks 在 Magento 中被剥离

> ID：10082973
> 
> 赞同：0
> 
> 时间：2012-04-10T04:04:54.523
> 
> 标签：magento

我正在使用带有语言包`blank_seo`的 Magento 主题的修改版本。`ES_ES`

似乎该`topLinks`块正在剥离文本，从而遗漏了有意义的信息。在这种情况下，我图表中的文章数量：

注意`(rtículos)`应该有类似的东西`(4 artículos)`

![在此处输入图像描述](../Images/f7f62b42833b842dc91a3aa093e52f5d.png)

这来自`frontend/default/blank_seo/template/page/template/links.phtml`模板文件。

![在此处输入图像描述](../Images/594c4ce6b0523408584e3f6d91e6afae.png)

这是：

```
<?php $_links = $this->getLinks(); ?>
<?php if(count($_links)>0): ?>
<ul class="links"<?php if($this->getName()): ?> id="<?php echo $this->getName() ?>"<?php endif;?>>
    <?php foreach($_links as $_link): ?>
    <li<?php if($_link->getIsFirst()||$_link->getIsLast()): ?> class="<?php if($_link->getIsFirst()): ?>first<?php endif; ?><?php if($_link->getIsLast()): ?> last<?php endif; ?>"<?php endif; ?> <?php echo $_link->getLiParams() ?>><?php echo $_link->getBeforeText() ?><a rel="nofollow" href="<?php echo $_link->getUrl() ?>" title="<?php echo $_link->getTitle() ?>" <?php echo $_link->getAParams() ?>><?php echo $_link->getLabel() ?></a><?php echo $_link->getAfterText() ?></li>
<?php endforeach; ?> 
```

所以我的第一个推论是`$_link->getLabel()`剥离文本（当时也是如此`$_link->getTitle()`）。

所以第一个问题是**如何禁用字符串的剥离`getLabel()`**？

但也许这没有发生，而另一件完全不同的事情可能正在发生，这让我无法理解（也许与语言包有关？）

在这种情况下，我想知道是否有人在西班牙语语言包中遇到了这个问题，如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:10:43.960

在翻译 csv 文件 ( **app/locale/es_ES/Mage_Checkout.csv** ) 中，检查翻译字符串是否正确，应该是：`"My Cart (%s items)","Mi carrito (%s artículos)"`.
我检查了[语言包](http://www.magentocommerce.com/translations/7/es_ES)中的内容是否正确，您的翻译是从哪里得到的？（我只是要求通知作者）

# java - 如何在不在java中创建对象的情况下从包内的所有类中访问方法

> ID：10082975
> 
> 赞同：0
> 
> 时间：2012-04-10T04:04:56.263
> 
> 标签：java, class, methods, scope

如何在不创建该类的对象的情况下从包中的所有类访问方法。

> **主班**

```
public class mainclass
{
public void methodOne()
{
subclass obj = new subclass();
System.out.println("Height and Width" + obj.width()+" "+obj.height());
}
} 
```

> **我的第二节课**

```
public class subclass
{
public int width()
{
return (int)windowWidth;
}

public int height()
{
return (int)windowHeight;
}
} 
```

是否可以在不创建子类对象的情况下调用 width() 和 height()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:07:46.283

嗯，不，简而言之。没有办法在不改变某些东西的情况下调用这些方法。

您可以标记方法`static`，然后可以在不创建对象的情况下调用它们。但是，如果`windowWidth`并且`windowHeight`是实例成员，您将无法访问它们，因此方法本身的代码将无法编译。那么它们显然不再是相同的方法了——所以答案仍然是，真的，不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:07:33.843

不，对于非静态方法，您需要一个实例来调用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T04:07:49.693

你必须创建一个对象的实例来调用它的方法。除非该方法在调用对象上。

***编辑***

以上*仅*适用于非静态方法。另一方面，静态方法可以而且应该在类级别访问（即不需要实例）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T04:10:45.337

如果您想使用该方法而不创建该特定类的实例，则必须将该方法声明为静态

# scala - 如何重构 `IsAuthenticated` 的方法以提供更好的 api

> ID：10082977
> 
> 赞同：3
> 
> 时间：2012-04-10T04:05:14.820
> 
> 标签：scala, playframework-2.0

我有一个`IsAuthenticated`具有复杂参数类型的方法（我从 play2 的 zentasks 示例中复制了它）：

```
def IsAuthenticated(f: => String => Request[AnyContent] => Result): Action[(Action[AnyContent], AnyContent)] =
  Security.Authenticated(username, onUnauthorized) { userId =>
    Action { implicit request =>
      val email = request.session("user.email")
      f(email)(request)
    }
  } 
```

为了使用它，我的操作是：

```
def delete(id:String) = IsAuthenticated { email => request =>
   ...
} 
```

你可以看到`email`如果我不需要使用它，我必须声明事件。我可以`_`改用：

```
def delete(id:String) = IsAuthenticated { _ => _ =>
   ...
} 
```

但是`_ => _ =>`还是很无聊。

如何重构方法以使其使用更简单？例如，如果我不需要`email`and `request`，我可以：

```
def delete(id:String) = IsAuthenticated {
   ...
} 
```

如果我只需要`request`，我可以：

```
def delete(id:String) = IsAuthenticated { request =>
   ...
} 
```

如果我需要`email`，那么我将它们全部声明：

```
def delete(id:String) = IsAuthenticated { email => request =>
   ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T09:43:49.157

您可以重载`IsAuthenticated`以提供所需的不同风味。例如：

```
def IsAuthenticated(result: => Result) = IsAuthenticated { _ => _ => result } 
```

然后，您可以按如下方式使用它：

```
def delete(id:String) = IsAuthenticated {
   ...
} 
```

# jquery - 如何在jQuery中隐藏溢出的div的尺寸？

> ID：10082984
> 
> 赞同：0
> 
> 时间：2012-04-10T04:06:12.790
> 
> 标签：jquery

我有一个大 div 设置为 100% 的窗口宽度和高度。它可以滚动`overflow: hidden`。如何找出整个元素内部的宽度？`$('#gallery').scrollWidth`返回未定义和其他任何东西给我窗口宽度。

我知道窗口宽度是 div 的“正确”尺寸，但是有没有办法获得内部可滚动内容的尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:25:29.047

您是否尝试过在当前 div 的内部放置一个 div 并获取其尺寸？

# mouse - AutoIt脚本可以使用单独的鼠标对象而不是实际光标本身吗

> ID：10082985
> 
> 赞同：1
> 
> 时间：2012-04-10T04:06:29.867
> 
> 标签：mouse, autoit, emulation

我正在尝试在 AutoIt 中运行同一脚本的多个实例，这需要模拟鼠标点击和击键。当我运行它的单个实例时，我的脚本工作得很好。问题是我需要在我的桌面上立即为我的每个客户运行不同的实例。有没有一种方法可以为我的每个脚本创建不同的鼠标和键盘对象？我是使用 AutoIt 的新手，如果这是一个直截了当的问题，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:47:07.823

不是直接的。但是，您可以查看几种方法：

1.  如果不需要鼠标移动，请重写代码以使用`ControlClick`和`ControlSend`. 这些将允许多个脚本同时自动化，因为它们不使用鼠标。
2.  如果您知道 windows api，并且您正在自动化不同的窗口，那么请查看[windows 桌面 api](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687098%28v=vs.85%29.aspx)。这些将允许您在不同的桌面上运行程序，从而在后台自动运行。

总是推荐第一种方法，但并不总是可行的。

# atk4 - 以两个表格为源的表格

> ID：10082987
> 
> 赞同：3
> 
> 时间：2012-04-10T04:06:42.890
> 
> 标签：atk4

我有两张表master和detail。

当我向主表添加新记录时，之后我需要将记录添加到明细表。

是否可以有一个带有两个“setSource()”方法的表单？还是我必须制作第一个表单，然后添加第二个表单，其中第一个表单的 ID 作为参数？

哪个是最好的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:25:25.690

是的，您实际上可以在 atk4.2 中多次调用表单的 setModel()，它将从适当的模型中导入字段，并将它们同时保存在同一个 sql 事务中。