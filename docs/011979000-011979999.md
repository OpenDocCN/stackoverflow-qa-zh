# StackOverflow 问答 11979000-11979999

# objective-c - 带有随机对象的 NSMutableArray

> ID：11979002
> 
> 赞同：0
> 
> 时间：2012-08-16T00:06:15.057
> 
> 标签：objective-c, arrays, random

这是我在这个论坛上的第一个问题，希望你不要怪我。我正在尝试制作一个应用程序并需要一些帮助`NSMutableArray`。

我在 .h 文件中声明了一些 UIIMageView 对象，如下所示：

```
IBOutlet UIImageView *image1;
IBOutlet UIImageView *image2;
NSMuttableArray *images; 
```

在 .m 文件中，我设置了 Hidden:YES。我也将它们插入到 NSMuttableArray 中，如下所示：

```
images = [[NSMutableArray alloc] initWithCapacity:2];
    [images addObject:image1];
    [images addObject:image2]; 
```

1.  我现在如何从 Array 中设置一个随机的 UIImageView `setHidden:NO`？
2.  设置为不隐藏后如何从数组中删除该对象？
3.  在一个动作之后`-(IBAction) btnclick {}`，让它再次隐藏并显示来自这个 NSMuttableArray 的下一个随机图像，以防它们更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:20:03.007

这可能是你想要做的：

（我也将其设置为 UIImages 数组，因为这是您应该呈现随机图像 imo 的方式，但是您也可以使用 UIImageViews 来执行此操作，再次不推荐）

```
-(void)buttonClickedMethod
{
    if(images.count > 0)
    {
        int randomValue = arc4random_uniform(images.count); //get yourself a nice random value as used in http://stackoverflow.com/questions/160890/generating-random-numbers-in-objective-c
        myImageView.image = [images getObjectAtIndex:randomValue]; //get yourself the random image and set it to your UIImageView (which you probably want it to be image1 or image2 in your case)
        [images removeObjectAtIndex:randomValue]; //remove the random image from you list so that you want get it again the next you click the button
    }
} 
```

这可能是处理您的问题的最佳方法。

您可能想要添加一个方法，之后从图像视图中删除随机图像，但您可能不会再次这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:48:05.833

我认为您可以尝试的一种方法如下：

1.  为您的每个`UIImageView`. 假设你有 100`UIImageView`秒，所以你有 1 到 100 的标签。这可以通过`[view setTag:1];`类似的方式来完成。

2.  您创建一个`NSMutableSet`包含 1 - 100 的对象（它们必须是`NSNumber`s，因为`NSSet`只接受对象）。

3.  要从集合中检索对象，请执行`[set anyObject]`. 然后，您可以将其转换回整数并用于`viewWithTag:`获取视图。然后就可以了`setHidden:NO`。

4.  最后，您从`NSMutableSet`简单的东西中删除该对象。

数组根据定义是有序的。Set 更适合您的目的。`UIImageView`另外我认为将s 添加到数组中有点奇怪。

# oracle - 插入表格的有效方法

> ID：11979003
> 
> 赞同：0
> 
> 时间：2012-08-16T00:06:26.253
> 
> 标签：oracle, insert, oracle10g

再会。

我们需要将大约 800000 条记录插入到自定义表中，现在使用简单的插入语句需要大约 30 分钟。我们将从文件中读取记录并使用简单的插入语句创建一个 .sql 文件。我相信除了正常的方式之外，将会有一种有效的方式来插入记录。

我尝试了以下。

1.  /*追加*/…。由于在每个插入语句之后提交，它花费的时间比过去要多。所以这个被排除了
2.  将 ALL 插入 c_table (X,X,X) 值 (' ',' ',' ',)
    插入 c_table (X,X,X) 值 (' ',' ',' ',) 插入 c_table (X,X ,X) 值 (' ',' ',' ',) 从对偶中选择 1；

对于 1000 的计数，选项 2 很好，但对于批量插入，它再次需要 30 多分钟。如果有其他选择，请分享。

注意：我不能使用 sqloader 或 datapump，因为我们没有数据库密码。

问候， 普拉桑斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:10:04.413

不要从输入数据创建 sql 文件。相反，基于源文件创建一个[外部表](http://orafaq.com/node/848)并查询它 - 您应该能够使用 append 选项运行整个插入，并且它应该比所有单独的插入语句花费更少的时间。

# javascript - jQuery .clone setInterval

> ID：11979004
> 
> 赞同：0
> 
> 时间：2012-08-16T00:06:28.033
> 
> 标签：javascript, jquery, jquery-plugins

我有一个 div，其中包含文本/图像和这些图像的自定义 jQuery 插件。基本上插件所做的就是使用 setInterval 每 3 秒为一个淡入/淡出效果设置动画。这个 div 就像“缓存”div。当用户请求查看此 div 时，它使用 .clone() 将其加载到查看器 div 中。但是它不会复制计时事件，它只是复制画廊的当前状态。

我知道为什么会这样：因为我写的插件只适用于缓存 div 中的画廊，当我克隆它时，它无法复制插件。

图库代码片段如下所示：

```
var animateCb = function() {
    if($next_image.length == 0)
        $next_image = $images.filter(":first");
    $curr_image.fadeOut(settings.speed);
    $next_image.fadeIn(settings.speed);
    $curr_image = $next_image;
    $next_image = $curr_image.next();
}
setInterval(animateCb, settings.time); 
```

然后有一个这样的div：

```
<div class='cache' id='cache-1'>
    <div class='gallery' id='gallery-1'>
            <div class='gallery-item' id='gallery-item-1'><img src='img1.jpg' /></div>         
            <div class='gallery-item' id='gallery-item-2'><img src='img2.jpg' /></div>
    </div>
</div> 
```

我应用画廊插件使用

```
$(".gallery").gallery(); 
```

当我想将缓存 div 复制到我使用的查看 div

```
$("#viewing-div").empty();
$("#cache-1").clone(true).appendTo("#viewing-div"); 
```

有没有人有办法解决这个问题？当用户请求查看缓存时，我不想加载图库插件，它需要已经加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:08:58.580

使用`$.clone(true)`它将保留事件。

[http://api.jquery.com/clone/](http://api.jquery.com/clone/)

# jquery - 在单击功能的开头和结尾更改 .css 溢出

> ID：11979005
> 
> 赞同：-1
> 
> 时间：2012-08-16T00:06:35.600
> 
> 标签：jquery, overflow

在 Jquery 中，我试图在单击功能开始时让 ("html, body") overflowY 更改，并在最后再次更改 - 从隐藏到可见。函数中的 div 动画以向上移动 html 页面，浏览器在动画时添加滚动条并在完成时将其删除，从而使 div 看起来不是直线向上移动。这就是为什么我需要在点击事件开始时添加一个“溢出：隐藏”。当点击 html 页面上的其他元素并且内容扩展窗口的高度时，它需要返回可见。

这在 Jquery 中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:13:06.467

请参阅[http://api.jquery.com/mousedown/](http://api.jquery.com/mousedown/)和[http://api.jquery.com/mouseup/](http://api.jquery.com/mouseup/)。

# html - 对齐 ul li 元素

> ID：11979008
> 
> 赞同：0
> 
> 时间：2012-08-16T00:06:46.427
> 
> 标签：html, css, list, vertical-alignment

[JSFiddle](http://jsfiddle.net/aPkyQ/1/)

我有一个项目列表，其中每个项目都`<li>`包含一个应该在左侧的图像和一个应该在右侧的描述符。这两个元素应沿其顶轴对齐。出于某种原因，第一个描述符与第二个图像对齐，第二个描述符与第三个图像对齐，等等。我完全不确定发生了什么。有任何想法吗？

我创建了一个 JSFiddle（上图）和我想要的图像（下图）。

![在此处输入图像描述](../Images/2f91a757abace9c03481a9a49068c7f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:13:32.703

给你，这应该让你走上正确的道路：

[http://jsfiddle.net/aPkyQ/7/](http://jsfiddle.net/aPkyQ/7/)

# ruby-on-rails - Rails：标识符中变量的语法

> ID：11979012
> 
> 赞同：0
> 
> 时间：2012-08-16T00:08:07.687
> 
> 标签：ruby-on-rails, variables, syntax

任何人都知道在标识符中使用变量的语法是什么？IE：

```
for a in @issue.articles 
  f.select "article#{a.page}", options_from_collection_for_select(@articles, 'id', 'name', @issue.article2)
end 
```

`2`in`@issue.article2`可以是`for`循环中的迭代器。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:36:02.300

您的意思是动态方法名称。就是这样：

```
number = 2
@issue.send("article#{number}") 
```

请参阅[ruby​​ 方法名称中的变量](https://stackoverflow.com/questions/300705/variables-in-ruby-method-names)。

# csv - Excel（或数字）公式用Core Data的其他东西替换新行'\ n'？

> ID：11979014
> 
> 赞同：2
> 
> 时间：2012-08-16T00:08:15.350
> 
> 标签：csv, newline, spreadsheet

我需要将电子表格（xls 格式）转换为 CSV 文件并将其导入核心数据，电子表格有一个包含换行符的字段（在 Windows 上通过 Alt+Enter 或在 Mac 上通过 Option+Command+Enter 输入），但是当我将其转换为 CSV 时，我假设我会丢失所有换行符？如果是这样，我需要将文本中的 '\n' 替换为其他内容，谁能指出我正确的方向？

假设我有 B 列并且我希望 C 列成为转换后的文本，那么对于 C 列，我应该在顶部字段中设置什么？

或者有什么不同的方法可以做到这一点？

谢谢！

编辑：

我发现有一个 SUBSTITUTE 公式，但我不知道如何输入换行符，我发现在 Windows Excel 上你可以通过 Alt+0100(numpad) 做到这一点，问题是我只有一个 Mac ;- (

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T18:21:21.013

您不能在 Excel 中使用 Ctrl+H 来查找并用您需要的任何字符替换“\n”吗？如果您希望它为空白，只需在“替换为”字段中替换为空白字段即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T15:55:24.967

这里似乎有解释：

[http://blog.contextures.com/archives/2013/05/28/find-and-replace-line-breaks-in-excel/](http://blog.contextures.com/archives/2013/05/28/find-and-replace-line-breaks-in-excel/)

# python - 获取对象在 ManyToManyField 中被引用的次数

> ID：11979015
> 
> 赞同：1
> 
> 时间：2012-08-16T00:08:26.440
> 
> 标签：python, django, django-models, many-to-many

我有一些看起来像这样的模型：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    favorite_books = models.ManyToManyField(Book)

# ...

class Book(models.Model):
    title = models.CharField(max_length=255) 
```

如何知道 a`Book`被收藏了多少次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T00:33:43.980

您可以直接使用 ORM查询[“通过”表：](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.through)

```
UserProfile.favorite_books.through.objects.filter(book_id=book.id).count() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:28:39.447

您需要替换`appname_*`为数据库中 M2M 表的名称，但您可以执行以下操作：

```
from django.db import connections

cursor = connections['default'].cursor()
cursor.execute("""
    SELECT count(*) FROM appname_userprofile_books
    WHERE book_id = {book_id};
""".format(book_id=book_id))
favorited_count_list = cursor.fetchall() 
```

然后，您可以从中提取号码`favorited_count_list`。

# r - 在ggplot2中将构面标签更改为数学公式

> ID：11979017
> 
> 赞同：17
> 
> 时间：2012-08-16T00:08:52.093
> 
> 标签：r, ggplot2

我想知道如何将`facet`标签更改为`ggplot2`.

```
d <- ggplot(diamonds, aes(carat, price, fill = ..density..)) +
  xlim(0, 2) + stat_binhex(na.rm = TRUE) + opts(aspect.ratio = 1)
d + facet_wrap(~ color, ncol = 4) 
```

![在此处输入图像描述](../Images/6748b4318b8d9389f8ce6d2ca04ba245.png)

例如，我想将 facet label 从 更改`D`为`Y[1]`，其中 1 是下标。在此先感谢您的帮助。

我找到了这个[答案](https://stackoverflow.com/a/6539953/707145)，但它对我不起作用。我正在使用`R 2.15.1`和`ggplot2 0.9.1`。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-06T14:32:32.803

您可以在 gtable 中编辑 grobs，

```
ggplot(diamonds, aes(carat, price, fill = ..density..)) +
  xlim(0, 2) + stat_binhex(na.rm = TRUE) + facet_wrap(~ color, ncol = 4)

for(ii in 1:7)
grid.gedit(gPath(paste0("strip_t-", ii), "strip.text"), 
           grep=TRUE, label=bquote(gamma[.(ii)])) 
```

![在此处输入图像描述](../Images/597ca4859d2163bb3ba2825e1a58e3d1.png)

或者，如果你想保存一个 grob，

```
g <- ggplotGrob(d)
gg <- g$grobs

strips <- grep("strip_t", names(gg))
for(ii in strips)
  gg[[ii]] <- editGrob(getGrob(gg[[ii]], "strip.text", 
                               grep=TRUE, global=TRUE), 
                       label=bquote(gamma[.(ii)]))

g$grobs <- gg 
```

使用 ggsave 需要额外的（丑陋的）工作，因为必须欺骗 ggplot 类的测试......我认为`pdf() ; grid.draw(g); dev.off()`明确调用会更容易。

* * *

## 罗兰编辑：

我做了一个小修正并将其包装在一个函数中：

```
facet_wrap_labeller <- function(gg.plot,labels=NULL) {
  #works with R 3.0.1 and ggplot2 0.9.3.1
  require(gridExtra)

  g <- ggplotGrob(gg.plot)
  gg <- g$grobs      
  strips <- grep("strip_t", names(gg))

  for(ii in seq_along(labels))  {
    modgrob <- getGrob(gg[[strips[ii]]], "strip.text", 
                       grep=TRUE, global=TRUE)
    gg[[strips[ii]]]$children[[modgrob$name]] <- editGrob(modgrob,label=labels[ii])
  }

  g$grobs <- gg
  class(g) = c("arrange", "ggplot",class(g)) 
  g
} 
```

这可以很好地打印，甚至`ggsave`可以使用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-16T01:33:35.170

也许有人在某个时候更改了 edit-Grob 函数的名称。[（编辑：它在大约 8 个月前被@hadley 删除。）](https://github.com/hadley/ggplot2/commit/1bc4d1e179536e3404418a9589d982c242a40793)`geditGrob`只有 pkg `editGrob`​​:grid 似乎有效：

```
 d <- ggplot(diamonds, aes(carat, price, fill = ..density..)) +
              xlim(0, 2) + stat_binhex(na.rm = TRUE) + opts(aspect.ratio = 1)

 #Note: changes in ggplot2 functions cause this to fail from the very beginning now.
 # Frank Harrell's answer this year suggests `facet_warp` now accepts `labeller`

 d <- d + facet_wrap(~ color, ncol = 4)
 grob <- ggplotGrob(d)
 strip_elem <- grid.ls(getGrob(grob, "strip.text.x", grep=TRUE, global=TRUE))$name
#strip.text.x.text.1535
#strip.text.x.text.1541
#strip.text.x.text.1547
#strip.text.x.text.1553
#strip.text.x.text.1559
#strip.text.x.text.1565
#strip.text.x.text.1571
grob <- editGrob(grob, strip_elem[1], label=expression(Y[1]))
grid.draw(grob) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-23T12:09:14.840

从`ggplot2`2.1.0`labeller`开始，已经为`facet_wrap`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-02T22:50:21.283

刚刚从 roland 和 baptiste 发现了这个非常有用的函数，但需要一个稍微不同的用例，其中原始的 wrap headers 应该由函数转换而不是作为固定值提供。我发布了原始功能的略微修改版本，以防它对其他人有用。它既允许使用命名（固定值）表达式来换行，也允许使用自定义函数和 ggplot2 已经为`facet_grid` `labeller`参数提供的函数（例如`label_parsed`和`label_bquote`）。

```
facet_wrap_labeller <- function(gg.plot, labels = NULL, labeller = label_value) {
  #works with R 3.1.2 and ggplot2 1.0.1
  require(gridExtra)

  # old labels
  g <- ggplotGrob(gg.plot)
  gg <- g$grobs      
  strips <- grep("strip_t", names(gg))
  modgrobs <- lapply(strips, function(i) {
    getGrob(gg[[i]], "strip.text", grep=TRUE, global=TRUE)
  })
  old_labels <- sapply(modgrobs, function(i) i$label)

  # find new labels
  if (is.null(labels)) # no labels given, use labeller function
    new_labels <- labeller(names(gg.plot$facet$facets), old_labels)
  else if (is.null(names(labels))) # unnamed list of labels, take them in order
    new_labels <- as.list(labels)
  else { # named list of labels, go by name where provided, otherwise keep old
    new_labels <- sapply(as.list(old_labels), function(i) {
      if (!is.null(labels[[i]])) labels[[i]] else i
    })
  }

  # replace labels
  for(i in 1:length(strips))  {
    gg[[strips[i]]]$children[[modgrobs[[i]]$name]] <- 
       editGrob(modgrobs[[i]], label=new_labels[[i]])
  }

  g$grobs <- gg
  class(g) = c("arrange", "ggplot",class(g))
  return(g) 
} 
```

### 更新/警告

对于较新版本的`gridExtra`包，您将`Error: No layers in plot`在运行此函数时收到错误，因为`arrange`不再存在`gridExtra`并且 R 尝试将其解释为`ggplot`. 您可以通过（重新）引入该类的`print`函数来解决此问题`arrange`：

```
print.arrange <- function(x){
    grid::grid.draw(x)
} 
```

这现在应该允许绘图渲染，您可以`ggsave()`像这样使用例如：`ggsave("test.pdf", plot = facet_wrap_labeller(p, labeller = label_parsed))`

### 例子

几个用例示例：

```
# artificial data frame
data <- data.frame(x=runif(16), y=runif(16), panel = rep(c("alpha", "beta", "gamma","delta"), 4))
p <- ggplot(data, aes(x,y)) + geom_point() + facet_wrap(~panel)

# no changes, wrap panel headers stay the same
facet_wrap_labeller(p) 

# replace each panel title statically
facet_wrap_labeller(p, labels = expression(alpha^1, beta^1, gamma^1, delta^1)) 

# only alpha and delta are replaced
facet_wrap_labeller(p, labels = expression(alpha = alpha^2, delta = delta^2)) 

# parse original labels
facet_wrap_labeller(p, labeller = label_parsed) 

# use original labels but modifying them via bquote
facet_wrap_labeller(p, labeller = label_bquote(.(x)^3)) 

# custom function (e.g. for latex to expression conversion)
library(latex2exp)
facet_wrap_labeller(p, labeller = function(var, val) { 
  lapply(paste0("$\\sum\\", val, "$"), latex2exp)
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-12T15:55:36.503

感谢您提及的其他答案和评论`label_parsed`。仍然不清楚如何使用标签解析器，所以我在这里添加一个简单的可重现示例。

```
library(dplyr)
library(ggplot2)

# Create a first facet variable with examples of math formulas
iris2 <- iris %>%
    mutate(species_math = factor(Species,
                            levels = c("setosa", "versicolor", "virginica"),
                            labels = c("m^2",
                                       expression(bar(x) == sum(frac(x[i], n), i==1, n) * beta * Q[t-1]),
                                       bquote(pi == .(pi)))))

# Create a second facet variable with mean lengths
# This illustrates how to pass a numeric vector inside a formula
iris_mean <- iris2 %>%
    group_by(Species) %>%
    summarise(across(ends_with("Length"), mean), .groups="drop")

iris2$mean_length <- factor(iris2$Species,
                           levels =  c("setosa", "versicolor", "virginica"),
                           labels = mapply(function(p, s) bquote(bar(p) == .(p) ~ bar(s) ==.(s)),
                                            round(iris_mean$Petal.Length,3), round(iris_mean$Sepal.Length,3)))

iris2 %>%
    ggplot(aes(x = Petal.Length, y = Petal.Width)) +
    geom_point() +
    facet_wrap(species_math ~ mean_length + Species, labeller = labeller(species_math = label_parsed, mean_length = label_parsed))

ggsave("~/downloads/formula_in_facet.png",
       width = 12, height = 8, units = "cm") 
```

[![在此处输入图像描述](../Images/b731bb245b217b8f7748fc83555e79f1.png)](https://i.stack.imgur.com/RGcGd.png)

如上例所示，labeller 可以解析：

1.  用于简单公式的字符向量，例如“m^2”
2.  一个`expression`用于更复杂数学的索引
3.  `bquote`在公式中包含数值的输出。另请参阅[此答案](https://stackoverflow.com/a/58048944/2641825)，了解如何使用`bquote`多个值的数值向量。
4.  请参阅有关如何仅将贴标机应用于其中一个刻面变量的[其他答案。](https://stackoverflow.com/a/51863090/2641825)在我们的例子中，我们只将它应用于`species_math`变量。

语法与 Latex 数学公式不同，因为`label_parsed`将标签解释为`plotmath`表达式。例如，索引是用`x_i`Latex 和`x[i]`绘图数学表达式编写的，而希腊字母是直接编写的，`alpha`而不是`\alpha`用 Latex 编写的。[您可以在plotmath](https://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/plotmath.html)函数的帮助页面中找到许多公式 。祝你好运`plotmath`。

# c# - 如何让相同的 Actionscript 3.0 在时间轴上的任何位置执行？

> ID：11979019
> 
> 赞同：0
> 
> 时间：2012-08-16T00:09:02.210
> 
> 标签：c#, actionscript-3, flash

我有一部电影有多层。在动作层上，我在第一帧中有一个 Actionscript 3.0 脚本。在文本层中，我的文本在舞台上移动，总共 240 帧。从 C# 程序调用 swf。

我遇到的问题是除非电影在时间轴的第 1 帧中，否则动作脚本不会执行。如果我尝试在任何其他时间调用函数，则不会发生任何事情。如果我尝试将关键帧从第 1 帧复制到任何其他帧，我会收到一个错误，即存在重复的函数/变量。有没有办法在时间线上的任何地方调用相同的脚本？

谢谢您的帮助。

加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:23:13.567

影片剪辑的每一帧都保持独立，但最终看的概念`this`都是同一个对象。如果假设 1 帧具有函数名称`doStuff()`，则可以将所有帧复制到另一个帧`doStuff()`函数，如果不可用，则重复违规。因为所有帧最终都是相同的 MovieClip 参考。唯一的区别是那个框架。

这是解决方案的三个选项。

> 1.  每一帧都是用不同的名字定义函数名
> 2.  1 帧在 Main Stage Frame 中编写脚本代码。另一个符号内部框架用于函数调用。
> 3.  如果每帧都有变化帧应该dispatchEvent。并在 MainStage Frame 上侦听此事件并对其进行控制。

# sql - PostgreSQL 8.3 版中的正则表达式

> ID：11979022
> 
> 赞同：0
> 
> 时间：2012-08-16T00:09:57.950
> 
> 标签：sql, regex, postgresql

我在匹配我在 Postgres 8.3 实例上分析的日志文件中的模式时遇到问题。

我试图匹配的模式是

```
cs(User-Agent)=-

cs(Referer)=- 
```

我已经尝试了下面的转义符`like`和`~`运算符，但到目前为止还没有运气：

```
select * from database
where ~ E'\(Referer\)\=\-';

select * from database
where like 'cs\(User\-Agent\=\-)'; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:11:58.107

```
SELECT * FROM database WHERE [field name here] LIKE '%cs(User-Agent%' 
```

请注意选择从中提取您正在分析的数据的列，以及百分号（通配符），表明您希望在字段中的任何位置查找字符串。没有通配符，您将无法匹配任何内容。

# entity-framework - Entity Framework 5 需要 MigrationHistory 表中的 CreatedOn 列

> ID：11979026
> 
> 赞同：20
> 
> 时间：2012-08-16T00:10:52.077
> 
> 标签：entity-framework, entity-framework-5

我正在将 MVC 3 应用程序从 EF 4.3 迁移到 EF 5。我注意到 EF 5 需要表中的一`CreatedOn`列，该列`__MigrationHistory`不存在，因为迁移是由旧版本创建的。

```
SELECT TOP (1) 
[c].[CreatedOn] AS [CreatedOn]
FROM [dbo].[__MigrationHistory] AS [c] 
```

如何在不擦除迁移历史记录的情况下解决此问题？我正在考虑一个查询来从迁移名称中推断列的值，格式如下：

```
201203111201542_MigrationName 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T16:48:07.777

不再需要 CreatedOn 列。我们尝试从中查询以确定是否需要删除它。即您正在从 4.3 升级到 5。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T18:10:26.980

就像 Filip Cornelissen 说的，这是 MiniProfiler.EF 和 Entity Framework 5.0 之间的东西。

解决/隐藏问题实际上比您想象的要容易。这只是一个“调试问题”，因为您将得到的错误仅在实例化期间发生（检查新迁移），并且错误是“SQL Unhandeld Exception”。

所以，解决这个问题很容易：

在 Visual Studio 中转到“调试”选项卡。点击“例外”项。在新对话框中，打开树“公共语言运行时异常”。在“System.Data.SqlClient”下，取消选中“System.Data.SqlClient.SqlException”后的两个复选框。添加它，如果它不存在。

走吧！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T13:53:34.110

当您从 EF4.* 升级到 EF 5.0 时，在启用迁移的情况下，这似乎是 EF 代码中的一件事。并与 MiniProfiler 结合使用。该表存在于系统表下的 dbo._MigrationHistory 中。

你尝试做一些事情：

1.  您可以手动将 CreatedOn (DateTime) 列添加到系统表文件夹下的 dbo._MigrationHistory 表中。
2.  您可以通过设置 Configuration.AutoDetectChangesEnabled = false 来停止检测更改；
3.  注释此行 MiniProfilerEF.Initialize()，禁用 EF 分析。

这是添加 CreatedOn 列的种子方法示例。每次初始化上下文时都会删除此列。种子方法在上下文的配置类中。

```
internal sealed class Configuration : DbMigrationsConfiguration<MyContext>
{
    protected override void Seed(MyContext context)
    {
        //  This method will be called after migrating to the latest version.

        // Hide error Invalid column name 'CreatedOn' from mini profiler.
        context.Database.ExecuteSqlCommand(
            @"IF NOT EXISTS(SELECT * FROM sys.columns WHERE object_id = OBJECT_ID('__MigrationHistory') AND name = 'CreatedOn')
                ALTER TABLE dbo.__MigrationHistory ADD CreatedOn datetime NOT NULL CONSTRAINT DF___MigrationHistory_CreatedOn DEFAULT (SYSUTCDATETIME());
        ");
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-11T23:48:55.923

根据 Filip Cornelissen 的回答，下面的脚本解决了这个问题

```
--IF OBJECT_ID('dbo.__MigrationHistory') IS NOT NULL

ALTER TABLE dbo.__MigrationHistory ADD CreatedOn DateTime Default GETDATE()
GO
UPDATE dbo.__MigrationHistory SET CreatedOn = GETDATE() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-15T17:53:31.357

这是我正在使用的解决方法。就个人而言，我可以按两次绿色箭头（开始调试，然后继续），但如果您真的希望它停止中断，请尝试此构建后事件，它将删除 MiniProfiler PDB：

```
del "$(TargetDir)MiniProfiler.pdb" /q /s 
```

更新：如果这对您来说工作量太大，我创建了一个[NuGet 包](https://www.nuget.org/packages/MiniProfilerContrib.EFMigrationsFix)：

```
PM> Install-Package MiniProfilerContrib.EFMigrationsFix 
```

# javascript - 将按钮名称和值传递给另一个 javascript 页面

> ID：11979033
> 
> 赞同：0
> 
> 时间：2012-08-16T00:12:13.033
> 
> 标签：javascript, jquery, javascript-events

我需要检查jsp页面中的按钮是否被点击。

我有 1 个 jsp 页面和 2 个 javascript 页面。第一个 JSP 页面是一个索引，它从用户那里获取输入并发送到 javascript1，然后 javascript1 查询它并在索引页面中输出，每个输出都嵌入了按钮。我想要的是，如果用户单击一个特定按钮，javascript2 将检测该特定按钮的单击并将值作为下一个搜索查询，并再次将结果显示在索引页面上。

这是我的代码：

索引.JSP

```
<div>Please enter search keyword</div>
<input type="text" name="valueLiteral" class="input-box"/><br>
<input type="submit" name="indexsearch" value="Search" class="input-button"> 
```

哪个javascript1将检测输入名称“indexsearch”是否被点击并取值名称“valueLiteral”来查询结果。这部分工作得很好。

这是Javascript1.js中的代码：

```
$(document).ready(function() {
$("#result").hide();
$("input[name='indexsearch']").click(function() {
    and so on.......
    var stmt = [];

     $.each(arrayPredicate, function(k,v){
     stmt[k] = "<span class='subject' id="+arraySubject[k]+">" + arraySubject[k] + "</span> " + " -> " + v + " : "+ "<span class='object'>" + arrayObject[k] + "</span>" + "**<input type = 'submit' class = 'searchAgain-button' name = 'searchMore' value = " + arrayObject[k] + "></input>**<br><br>";
     });
            stmt = stmt.sort();
            $.each(stmt, function(k,v){
                $("#result").append(v);
            });
        } else {
            var $noresult = "No Result : Please enter a query";
            $("#result").append($noresult);
        }
    }); 
```

如您所见，我创建了按钮并将其附加到每个搜索结果的末尾。这部分仍然有效（按钮出现并显示下一个查询的名称）。

这是代码的最后一部分：Javascript2.js：

```
 $(document).ready(function() {
    $("input[name='searchMore']").click(function() {

    $("#result").show();
    $("#result").empty();

    loading_img();
    var $textInput = $(this).attr("Value");

            var stmt = [];
            //concat all related array into string (create triple statement)
            $.each(arrayPredicate, function(k,v){
                stmt[k] = "<span class='subject' id="+arraySubject[k]+">" + arraySubject[k] + "</span> " + " -> " + v + " : "+ "<span class='object'>" + arrayObject[k] + "</span><input type = 'submit' class = 'searchAgain-button' name = 'searchMore' value = " + arrayObject[k] + "></input><br><br>";
            });
            stmt = stmt.sort();
            $.each(stmt, function(k,v){
                $("#result").append(v);
            });
        } else {
            var $noresult = "No Result : Please enter a query";
            $("#result").append($noresult);
        }
    });        
}); 
```

上面的代码不起作用，经过一些测试，我认为这个 JavaScript 页面无法检测到按钮名称“searchMore”。并最终使其他部分代码不起作用。

有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:57:32.420

你有没有尝试

```
$("input[name='searchMore']").live("click", function() { ... 
```

?

在 [http://api.jquery.com/live/](http://api.jquery.com/live/)

描述：为匹配当前选择器的所有元素附加一个事件处理程序，现在和**将来**。

# java - Java 命令提示符错误

> ID：11979045
> 
> 赞同：-1
> 
> 时间：2012-08-16T00:13:48.947
> 
> 标签：java, command, prompt, language-translation

我正在研究将英语转换为摩尔斯电码的翻译器，反之亦然。我编写了代码并且能够编译它，但是在输入要转换的句子后，命令提示符破折号只是转到下一行，什么也没有出现。我的代码有问题吗？

这是我的代码：（不是最有效的，因为我还是 java 新手，所以任何提示也将不胜感激）

```
import javax.swing.JOptionPane;

public class translator {
    public static void main ( String [] args ) {

        String s1 = "Morse";

        //Decide whether Morse code or English
        String decide = JOptionPane.showInputDialog("Enter 'English' for Morse to English code translation and 'Morse' for English to Morse code translation.Pay attention to Caps.");

        //Enter String
        String phrasep = JOptionPane.showInputDialog("Enter the words you wish to translate.");

        if ( decide.equals( s1 ))
            toMorse( phrasep );

        else
            toEnglish( phrasep );

    }

    // Translate to Morse
    public static void toMorse( String phrase1 )
    {
        char[] english = new char[36];
        char[] number = { 1 };

        for (  int i = 65, j = 0; i < 91; i++, j++)
        {
            english[j] = (char)i;
        }

        english[26] = 1;
        english[27] = 2;
        english[28] = 3;
        english[29] = 4;
        english[30] = 5;
        english[31] = 6;
        english[32] = 7;
        english[33] = 8;
        english[34] = 9;
        english[35] = 0;

        String[] morse = new String[36];

        morse[0] =  " .- ";
        morse[1] =  " -.. ";
        morse[2] =  " -.-. ";
        morse[3] =  " -.. ";
        morse[4] =  " . ";
        morse[5] =  " ..-. ";
        morse[6] =  " --. ";
        morse[7] =  " .... ";
        morse[8] =  " .. ";
        morse[9] =  " .--- ";
        morse[10] =  " -.- ";
        morse[11] =  " .-.. ";
        morse[12] =  " -- ";
        morse[13] =  " -." ;
        morse[14] =  " --- ";
        morse[15] =  " .--. ";
        morse[16] =  " --.- ";
        morse[17] =  " .-. ";
        morse[18] =  " ... ";
        morse[19] =  " - ";
        morse[20] =  " ..- ";
        morse[21] =  " ...- ";
        morse[22] =  " .-- ";
        morse[23] =  " -..- ";
        morse[24] =  " -.-- ";
        morse[25] =  " --.. ";
        morse[26] =  " .---- ";
        morse[27] =  " ..--- ";
        morse[28] =  " ...-- ";
        morse[29] =  " ....- ";
        morse[30] =  " ..... ";
        morse[31] =  " -.... ";
        morse[32] =  " --... ";
        morse[33] =  " ---.. ";
        morse[34] =  " ----. ";
        morse[35] =  " ----- ";

        String phrase = phrase1.replace( "//s+", "|");

        String[] translation = new String[phrase1.length()];

        for ( int j = 0, t = 0, n = 1; j < phrase.length(); j++)
        {
            while ( j < phrase.length() )
            {
                if ( phrase.substring(t, n ).equals ( english[j] ) )
                {
                    translation[t] = morse[j];
                    t++;
                    n++;
                }
            }
        }
    System.out.println( translation );
    }

    public static void toEnglish( String phrase)
    {
        System.out.println( phrase );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:22:00.847

您的代码中有一个无限循环。

查看变量 J。您在 for/next 循环中设置变量，然后在 while 循环中测试变量。每次它完成 while 循环时，它都会测试是否 j <phrase.length()。但是由于 J 在您离开 while 循环之前不会改变，因此它永远不会离开。

你不需要这个测试两次。删除 while，让 for 循环处理它。

# php - 在 xmlhttprequest 响应中使用 svg web

> ID：11979047
> 
> 赞同：0
> 
> 时间：2012-08-16T00:13:55.637
> 
> 标签：php, javascript, svg, xmlhttprequest

我正在尝试加载由 php 文件生成的 svg 图像。如果我使用标准的 svg 表示法，它适用于支持 svg 的浏览器，这并不是什么新鲜事：

```
 <svg><rect x="20" y="40" width="100" height="200" /></svg> 
```

另一方面，如果我尝试相同但这次使用 svg 网络文档[http://svgweb.googlecode.com/svn/trunk/docs/UserManual.html](http://svgweb.googlecode.com/svn/trunk/docs/UserManual.html)中描述的符号（我在任何之前导入 svg 网络文件其他javascript文件），但没有任何反应：

```
 <script type="image/svg+xml"><svg><rect x="20" y="40" width="100" height="200" /></svg></script> 
```

我编写了一个脚本来执行 xmlhttprequest 响应文本中的所有 javascript，方法是使用 eval。所有“正常”的 javascript 都可以工作，但这不是。有谁知道我做错了什么？

这是 XHR 函数：

```
 function loadXMLDoc(file, div){var xmlhttp;
                            if(window.XMLHttpRequest){
                                xmlhttp = new XMLHttpRequest();
                            }

                            else{
                                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                            }

                            xmlhttp.open("GET", file, true);

                            xmlhttp.onreadystatechange = function(){

                            if(xmlhttp.readyState==4 && xmlhttp.status==200){
                                var myresponse = xmlhttp.responseText;
                                var mydiv = document.getElementById(div);
                                mydiv.innerHTML=myresponse;

                            }

                            if(xmlhttp.status==404){
                                document.getElementById(div).innerHTML="<h1>File not found</h1>";
                            }
                            }
                            xmlhttp.send();

                                                                                            } 
```

这是使用 xhr 加载的 php 文件之一的示例（我不包括实际上会生成 svg 的 php 类）：

```
 echo '<script type="image/svg+xml"><svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" version="1.1" baseProfile="full">
   <rect x="0" y="0" width="60" height="60" style="stroke: green;"/>
   <rect x="25" y="25" id="myRect" rx="0.6" ry="0.6" width="150" height="150" fill="green"   stroke="yellow" stroke-width="8"/>
   </svg></script>';

   ?> 
```

在 php 文件的情况下，如果删除标签，它将通过使用对 svg 的本机支持来工作，但 svg web 将不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:16:21.857

我没有使用过 SVGWeb，但这个答案完全基于您为文档提供的链接。

首先解释为什么你的方法不起作用。在没有阅读代码的情况下，我猜测 SVGWeb 的工作原理是解析 HTML 页面中的时髦`<script type="image/svg+xml">`标签，并在页面加载时将它们转换为 flash。

显然，这意味着添加到页面的任何内容都不会被解析，因为页面加载事件只触发一次。这就是为什么你的方法不起作用的原因。

幸运的是 SVGWeb 确实提供了一个 API 来在运行时在 IE 中渲染 SVG 对象。这是一种称为：（`svgweb.appendChild()`搜索文档）的方法。不幸的是，该`svgweb.appendChild`方法不接受字符串作为参数，但需要正确解析的 svg 对象。幸运的是，文档解释了如何在运行时获取该对象。但是你不能用`XMLHttpRequest`.

以下是文档所说的您可以做到的方式（阅读该`Dynamically Creating an SVG OBJECT`部分）：

```
var obj = document.createElement('object', true);
obj.setAttribute('type', 'image/svg+xml');
obj.setAttribute('data', 'rectangles.svg'); // <-------- this is where you
obj.setAttribute('width', '500');           //           load the file from
obj.setAttribute('height', '500');          //           your server

// And this is how you add the SVG object to your document:
obj.addEventListener('load', function() {
    svgweb.appendChild(obj, document.body);
}, false); 
```

请注意，它不必是`document.body`. 它可以是 div 或 table 等。

# node.js - 生产者和消费者之间的 RabbitMQ 消息延迟

> ID：11979049
> 
> 赞同：3
> 
> 时间：2012-08-16T00:14:26.097
> 
> 标签：node.js, messaging, rabbitmq, amqp, node-amqp

我在 RabbitMQ 服务器上运行 node.js amqp-node 客户端。我以两种不同的方式设置了一个简单的发布/消费测试——每种方式都会产生不同的延迟，我不知道为什么。延迟是从消息发送到传递的时间测量的。

第一种方法使用两个独立的进程 - 一个用于发布应用程序 - 一个用于消费应用程序。它产生大约 4 毫秒的延迟。第二种方法只使用一个应用程序来生产和消费。这会产生大约 40 毫秒的延迟。谁能向我解释这种行为，为什么？感谢您的时间。

**方法 #1 生产者：**

```
var amqp = require('amqp'),
    connection = amqp.createConnection({host:'localhost'}),
    testExchange = {};

connection.on('ready', function(){
    testExchange = connection.exchange('testExchange', {type:'topic', autoDelete:true});
    testMessage();
});

function testMessage(){
    console.log('message sent');
    testExchange.publish('test.message', { msg:'testMessage', time: new Date().getTime() });
    setTimeout(testMessage, 500);
} 
```

**方法 #1 消费者**

```
var amqp = require('amqp'),
    connection = amqp.createConnection({host:'localhost'}),

connection.on('ready', function(){
    var testExchange = connection.exchange('testExchange', {type:'topic', autoDelete:true});
    var testQ = connection.queue('testQ', function(queue){
        queue.bind('testExchange', 'test.#');
        queue.subscribe( function(message){
            console.log('message received');
            var now = new Date().getTime();
            console.log(now-message.time);
        });
    });
}); 
```

**方法#2 生产者和消费者**

```
var amqp = require('amqp'),
    connection = amqp.createConnection({host:'localhost'}),
    testExchange = {};

connection.on('ready', function(){
    testExchange = connection.exchange('testExchange', {type:'topic', autoDelete:true});
    var testQ = connection.queue('testQ', function(queue){
        queue.bind('testExchange', 'test.#');
        queue.subscribe( function(message){
            console.log('message received');
            var now = new Date().getTime();
            console.log(now-message.time);
        });
        testMessage();
    });
});

function testMessage(){
    console.log('message sent');
    testExchange.publish('test.message', { msg:'testMessage', time: new Date().getTime() });
    setTimeout(testMessage, 500);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:08:24.367

在第一种方法中，您有两个到 RabbitMQ 服务器的独立连接，而在第二种方法中，您为生产者（发送者）和消费者（接收者）共享相同的连接。诚然，考虑到 localhost RabbitMQ 服务器，您每秒 2 条的消息速率非常低，因此我们可以忽略任何网络延迟，但我怀疑 RabbitMQ 或 node.js amqp 实现会在发送者和接收者在同一连接上多路复用时减慢速度。

干杯!

# php - 在目录中找不到控制器

> ID：11979060
> 
> 赞同：1
> 
> 时间：2012-08-16T00:16:04.683
> 
> 标签：php, codeigniter, codeigniter-routing

我从我的开发人员下载了一个项目到本地，几乎完成了，我必须纠正其中的一些问题。由于我是 Code Igniter 的新手，我无法弄清楚控制器文件的位置？

**http://localhost/ric/view/store/3** 是我的 URL，通过查看 URL，控制器名称应该是“view”，功能是“store”，但在我的控制器目录中，没有这样命名的文件。任何机构都可以帮助我吗？完整的路由是这样的

```
$route['default_controller'] = "site";
$route['scaffolding_trigger'] = "";

$route['classifieds'] = "site/classifieds";
$route['specials'] = "site/specials";
$route['hot'] = "site/hot";
$route['joinus'] = "site/joinus";
$route['faq'] = "site/faq";

$route['browse'] = "product/browse";
$route['browse/:any'] = "product/browse/$1";
$route['stcat/:any'] = "store/browse/$1";
$route['search/:any'] = "product/search/$1";
$route['searchstore/:any'] = "store/search/$1";

$route['view/product/:num'] = "product/getOne/$1";

$route['view/store/:num'] = "store/getOne/$1";

$route['view/article/:any'] = "article/get/$1"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:21:02.107

~~我认为您正在使用 .htaccess 文件和 rewriteRule？添加一个 rewriteBase，反复试验是最好的方法，因为我不知道你的结构是什么样的。~~

~~请向我们提供更多信息和更详细的帖子，以便我们更好地为您提供帮助。~~

**再次阅读您的问题后**更新****

 **重新阅读您的问题后。你是说你找不到viewcontroller？看看你的路由。我猜 View 是到另一个控制器的路由。因为大多数时候不使用 ViewController。大多数情况下，它被称为具有视图操作的 PlaneController、StoreController 或 UserController，而不是具有存储操作的 ViewController。我希望这有帮助。

**在看到添加路由文件的更新后**更新 2 。****

 **```
 $route['view/store/:num'] = "store/getOne/$1"; 
```

就像我想的那样，您应该尝试使用 getOne 操作找到 StoreController。祝你好运。****

# bash - BASH 脚本暂停/继续脚本中的进程

> ID：11979061
> 
> 赞同：4
> 
> 时间：2012-08-16T00:16:28.887
> 
> 标签：bash

在我正在编写的 bash 脚本中，我试图在后台启动一个进程（睡眠），然后将其挂起。最后，该过程完成。由于某种原因，当我发送带有停止信号的 kill 命令时，它只是继续运行，就好像它什么也没收到一样。我可以从命令行执行此操作，但 bash 脚本未按预期工作。

```
sleep 15&
pid=$!
kill -s STOP $pid
jobs
kill -s CONT $pid 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:44:27.120

您可以通过在脚本中启用“监控模式”来使其工作：`set -m`

请参阅[Why-cant-i-use-job-control-in-a-bash-script](https://stackoverflow.com/questions/690266/why-cant-i-use-job-control-in-a-bash-script)了解更多信息

# python - 在 Python 中给定一个实例，创建一个类的新实例

> ID：11979062
> 
> 赞同：3
> 
> 时间：2012-08-16T00:16:46.653
> 
> 标签：python, oop

在 Python 中，如果我有一个对象，比如`x`，那么我如何创建一个新对象，`y`以便它们属于同一类？`x``y`

在 Java 中，我想要的代码如下所示：

```
Object y = x.getClass().newInstance(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T00:18:10.887

您可能可以执行以下操作：

```
y = x.__class__() 
```

或者

```
y = type(x)()  #New style classes only 
```

而且，如果你想知道如何创建一个新的样式类，你需要做的就是继承自`object`（或使用 python 3.x）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T00:18:24.863

与Java中的几乎相同：

```
y = x.__class__() 
```

# c - 使用字符串从十进制转换为二进制数字系统

> ID：11979063
> 
> 赞同：0
> 
> 时间：2012-08-16T00:17:04.393
> 
> 标签：c, string, binary, decimal

我需要帮助尝试修复程序的第二部分，将十进制转换为二进制，这是我到目前为止所拥有的，当我编译它时，我一直得到 0，所以我不确定我做错了什么。请问有什么帮助吗？

```
#include <stdio.h>
#include <string.h>
#include <math.h>

int main()
{

    char string[100];
    int s;
    char a;   
    char j;
    int sum = 0;
    int r;
    int q;

    printf("B = B to D\n");
    printf("D = D to B\n");
    printf("choose which one to convert to:");
    scanf("%c%c", &a, &j);

    if (a == 'B') 
    {
        printf("enter binary number to convert to decimal: ");
        scanf("%s", string);

        for(s = strlen(string)-1; s >= 0; s--)
        {

            if(string[s] == '1')
            {
                sum = sum + pow(2, strlen(string) - (s +1));
            }
        }
        printf("the decimal number is: %d\n", sum);
    }

    if (a == 'D')
    {
        printf("enter decimal number to convert to binary: ");
        scanf("%s", string);

        while (r > 0)
        {
            r = q%2;
            q = q%2;
        } 

        printf("the binary number is: %d\n", r);

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:37:04.137

如果您希望将负数打印为带符号的二进制数字字符串，则此 C99 代码可以解决问题：

```
if (a == 'D')
{
    int r;
    printf("enter decimal number to convert to binary: ");
    scanf("%d", &r);
    int i = 0;
    int p = (r >= 0) ? (r = -r, 1) : 0;
    string[i++] = '\0';

    do
    {
        string[i++] = (r % 2) == 0 ? '0' : '1';
        r /= 2;
    } while (r != 0);
    if (!p)
        string[i++] = '-';

    int k = 0;
    while (--i > k)
    {
        char t = string[i];
        string[i] = string[k];
        string[k++] = t;
    }

    printf("the binary number is: %s\n", string);
} 
```

例如，给定`-1234`（十进制），输出是`-10011010010`（二进制）。它还处理两个极端：`INT_MAX`,`-INT_MAX`和`INT_MIN`（假设 32-bit `int`）：

```
B = B to D
D = D to B
choose which one to convert to: D
enter decimal number to convert to binary: 2147483647
the binary number is: 1111111111111111111111111111111

B = B to D
D = D to B
choose which one to convert to: D
enter decimal number to convert to binary: -2147483647
the binary number is: -1111111111111111111111111111111

B = B to D
D = D to B
choose which one to convert to: D
enter decimal number to convert to binary: -2147483648
the binary number is: -10000000000000000000000000000000 
```

另一方面，如果您想要与该值相对应的位模式，那么[Joachim Pileborg](https://stackoverflow.com/users/440558/joachim-pileborg)的答案会为您做到这一点。

（它是 C99 代码，因为它在块中的方便点声明变量，而不是像 C89 要求的那样在块的开头。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T00:54:32.590

这里有几个问题。一方面，第一次检查 r 时，它是未初始化的。另一个问题是，每次通过 while 循环时，您都将 r 和 q 设置为相同的值。您可能想要 q = q/2 而不是 q = q%2。最后，您在每次循环中都覆盖 r，而不是构建一串位。这是您想要做的一些伪代码：

```
 output_string = ""

 while input > 0:
     output_string = concat(input%2, output_string)
     input /= 2

 print output_string 
```

请注意，您也永远不会将读入的字符串转换为整数并将其放入 q 中，因此您也需要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T05:52:42.923

最简单的事情可能是将字符串输入转换为适当的整数（使用 eg `strtol`），然后将该数字转换为仅包含 1 和 0 的字符串。

就像是：

```
/* Convert a (possibly signed) decimal number in a string to a long integer */
unsigned long number = (unsigned long) strtol(string, NULL, 10);

char output_string[65];  /* If longs are 64 bits, plus one for terminator */
char *output_ptr = output_string;

/* Start with the highest bit, go down to the lowest */
/* sizeof(long) is either 4 or 8 depending on 32 or 64 bit platforms */
/* Multiply with 8 to get the number of bits */
/* -1 because bits are numbered from 0 to 31 (or 63) */
for (int bit = (sizeof(unsigned long) * 8) - 1; bit >= 0; bit--)
{
    /* Using right shift to get the current bit into the lowest position */
    /* Doing bitwise AND to see if the lowest bit is a one or a zero */
    /* Adding '0' makes a a printable ASCII value of a digit */
    *output_ptr++ = ((number >> bit) & 1) + '0';

    /* `*output_ptr` gets the value that `output_ptr` points to */
    /* Then use the `++` operator to increase the pointer */
    /* Now `output_ptr` points to the next character in `output_string` */
}

/* Terminate string */
*output_ptr = '\0';

printf("%ld in binary is %s\n", number, output_string); 
```

# c++ - cin 对象 - c++

> ID：11979065
> 
> 赞同：0
> 
> 时间：2012-08-16T00:17:46.480
> 
> 标签：c++, cin

```
 #include <iostream>
    using namespace std;

    struct list
    {
        int data;
        list *next;
    };

    list *node, *tail = NULL, *head = NULL;
    void add2list();
    void extrem();

    int main()
    {
        add2list();
        extrem();

        return 0;
    }

    void add2list()
    {
        int input;
        cout << "Adding values to list :\n";
        cout << ">>";

        while(cin >> input)
        {
            node = new list;
            node->data = input;
            node->next = NULL;

            if (head == NULL)
            {
                head = node;
                tail = node;
            }
            else
             {
                tail->next = node;
                tail = node;
             }
        cout << ">>";
        }
    }

    void extrem()
    {
       int x, y;
       cin >> x >> y;
    } 
```

当我运行这个程序时，它只执行 add2list 函数？？？？

我添加了cin.clear()，但是问题没有解决，为什么？？

有人可以清楚地解释我该如何解决这个问题

以及何时使用 cin.clear() 对象有用吗？

抱歉 4 我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:26:45.267

你的逻辑被打破了：两者都`cin >> input`尝试`cin >> x >> y`从`int`流中提取 s 。当`while`循环 `add2list`中断时，不再可能`int`从流中提取 s。重置错误标志不会突然使可解析数据出现在流中。当您尝试读入时`x`，您将再次失败，原因与您从循环中中断的原因相同。

您需要找到一种更好的方法来读取输入的不同部分，即一种用于构建列表，另一种用于读取更多数据。一般的基于*行*的方法（通过`std::getline`）可能是一个好的开始，您可以实现一个简单的 shell，它接受诸如“创建列表”等命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:49:34.893

`std::cin >> value`失败的原因有两个：

1.  `std::cin`已经结束（例如，使用 Ctrl-D 或 Ctrl-Z，取决于您使用的系统）
2.  未决字符不能解析为`value`，即在您的情况下为`int`. 然而，有问题的字符没有被提取。

显然，在第一种情况下您无能为力：一旦到达标准输入流的末尾，就无法扩展它。因此，假设您输入了一个无效字符，例如一个字母。试图将这封信作为一个`int`将失败并导致`std::ios_base::failbit`被设置。在你可以对流做任何事情之前，你需要`clear()`它。清除后`std::ios_base::failbit`，您可以`ignore()`下一个字符，然后再试一次。也就是说，如果您在通话后添加`add2list()`以下两个电话，则应该没问题，假设只有一个违规字母（否则您可能需要忽略更多字符）：

```
std::cin.clear();
std::cin.ignore(); 
```

# birt - BIRT - 更改小数点分隔符 - 句点 v/s 逗号

> ID：11979066
> 
> 赞同：1
> 
> 时间：2012-08-16T00:18:01.713
> 
> 标签：birt

基于全局变量，我如何设置数字格式化程序，即设置逗号作为小数分隔符而不是句点。此外，根据全局变量更改日期格式模式。

即 1234.56 = 1234,56

我在哪里可以做到这一点？交叉表？以及使用什么表达方式？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T17:23:29.250

对于数字，您可以使用表达式：

```
params["SomeVar"].value == 'format1'? 
Formatter.format(valueToDisplay,"0,00"):
Formatter.format(valueToDisplay,"0.00"); 
```

不知道 Formatter 是否适用于 Date 值。

# javascript - 最小化javascript中客户端/服务器之间发送的数据

> ID：11979069
> 
> 赞同：1
> 
> 时间：2012-08-16T00:18:13.747
> 
> 标签：javascript, node.js, networking, socket.io

我正在尝试不使用库在 javascipt 中编写多人游戏演示。一切进展顺利，但为了获得更好的性能继续前进，我将不得不尝试最小化通过 websocket 发送的数据，否则我将无能为力。我一直在考虑最好的方法来做到这一点。我正在使用 Node.JS + Express + Socket.IO。

起初，我将所有键的键盘状态从每个客户端发送到服务器，并迅速将其缩小为仅针对我正在使用的键的真/假值。但现在我在想，我真的应该做一些事情，比如将十进制文字值（0、1、3、4）分配给允许的每个可能的输入*状态*（可能的输入组合），然后简单地将该值发送到服务器。

我在 C++、Java 等静态类型语言方面有更多经验，所以我知道如何在这些语言中做到这一点。但基本上我想知道的是我是否有少量可能的输入状态。在两端使用 javascript 发送此数据的最佳方式是什么。它将进入一个 JSON 对象。无论如何我要发送一个字节吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:25:14.993

[https://gist.github.com/1437195](https://gist.github.com/1437195)不知道这是否可行，但这可能是最优化的解决方案。我从来没有玩过 byteArray。我不知道他们是否与 socket.io 配合得很好。

# java - 足球预测程序encog：不一致的预测

> ID：11979073
> 
> 赞同：9
> 
> 时间：2012-08-16T00:18:43.800
> 
> 标签：java, neural-network, encog

我正在制作一个使用 encog 预测足球比赛结果的程序。我创建了一个神经网络，使用弹性传播训练方法用 90 个匹配的数据对其进行训练。我将比赛结果标记为 1 代表主场获胜，0 代表平局，-1 代表客场获胜。

问题在于预测。有时我得到 50% 的成功率，有时我得到低至 33%。这就像使用随机函数。我注意到的是，几乎总是最能预测的结果是 1（大约 70%）。我试过改变隐藏层的数量，训练的数量，但没有运气，它仍然在振荡。如果我做错了什么，任何人都可以帮助我或将我指向正确的方向。

这是神经网络的代码。我正在从数据库中获取训练数据和预测数据。

```
Predictor(NeuralDataSet trainingData){
    trainingSet = trainingData;
    network = new BasicNetwork();
    network.addLayer(new BasicLayer(16));
    network.addLayer(new BasicLayer(3));
    network.addLayer(new BasicLayer(1));
    network.getStructure().finalizeStructure();
    network.reset();
} 
```

训练

```
public void train(int epoch){
    int i =0;
    final Train train =new ResilientPropagation(network,trainingSet);
    while(i<=epoch){
        train.iteration();
        i++;
    }

} 
```

预测

```
public void successRate(NeuralDataSet trainingData){
    int counter = 0;
    int correct = 0;
    int home=0;
    int away=0;
    int draw=0;
    for(MLDataPair pair: trainingData ) {
        final MLData output = network.compute(pair.getInput());
        if(pair.getIdeal().getData(0)==Math.round(output.getData(0)))
            correct++;
        counter++;
    }
    System.out.println((double)correct/(double)counter);
} 
```

1.）我正在将数据提供给神经网络 1000。由于事情变得更好，目前正在测试更多/更少。

2,3.) 我有 16 个输入参数。它们包括：主队积分、主队主场胜、平、负、主队总赢、输、平和状态（最近 5 场比赛的得分）。相同的数据仅适用于客队，而不是使用主队主场胜、平、负客队客场胜、平、负。我将尝试使用不同的训练数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:03:54.923

鉴于信息，很难说什么是错误的，可能有多种原因。但这里有一些潜在的解决方案。

1）您将训练数据输入神经网络多少次？通常，您需要多次传递训练数据以使网络收敛。一次是不够的，尤其是如果您只有 90 个训练数据。

2）训练数据中有多少输入参数（它们是什么）？通常，您需要将隐藏层节点的数量调整为输入参数的数量。对此没有硬性规定，但我通常从至少两倍的隐藏层节点数作为输入参数开始。

3）您是否尝试过选择不同的测试数据？我假设您的训练和测试数据不同。您选择的测试数据可能有问题，因为它们与训练数据完全不匹配。也可能完全有可能无法从您的方法中获得任何可靠的估计。您的输入参数可能完全不足以预测谁会赢得任何给定的比赛。这是垃圾进，垃圾出，概念。

# matlab - 使用 surf 创建具有透明背景的 png 文件的 3D 图像

> ID：11979076
> 
> 赞同：3
> 
> 时间：2012-08-16T00:19:50.453
> 
> 标签：matlab, 3d, background, png, transparent

问题：使用 surf 绘图时图像失去透明度

我已经想出了如何创建具有透明背景的 png 文件，如许多其他线程中所述。[这里](https://stackoverflow.com/questions/10213320/make-a-pixel-transparent-in-matlab)

但是，当使用 surf.m 绘图时，图像不透明

这是我到目前为止的代码：

```
img = imread('image.png');

A1 = ones(size(img));A2 = ones(size(img));A3 = ones(size(img));
A1(img(:,:,1)==0)=0;A2(img(:,:,2)==0)=0;A3(img(:,:,3)==0)=0;

A = A1+A2+A3;
A= A(:,:,1);

imwrite(img,'test.png','alpha',A);
[img,map,alpha] = imread('test.png');

ximage = [-.5,.5;-.5,.5];
yimage = [0,0;0,0];
zimage = [.5,.5;-.5,-.5];

surf(ximage,yimage,zimage,'Cdata',img,'Facecolor','texturemap','Edgecolor','none','alphadata',alpha);
axis vis3d 
```

该代码将 image.png（蓝色方块）转换为具有透明背景的 test.png（摆脱黑色背景）。然后使用 test.png 生成一个不透明的冲浪图。知道我做错了什么吗？

![黑色背景的蓝色正方形 - 需要将其绘制为没有黑色背景的 3D 切片](../Images/cd7ed436ca95b1f4eb4e93ea1a33457b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:16:34.707

在 MATLAB 中调用了一个函数`alpha`，它为当前坐标区中的对象设置透明度。我建议`alpha`通过替换以下行将命名的变量更改为另一个名称

```
[img,map,alpha] = imread('test.png'); 
```

到

```
[img,map,alphaChannel] = imread('test.png'); 
```

现在，运行后`surf`，您可以通过`alpha`函数设置绘图的透明度。

**使用`alpha`功能**

```
surf(ximage,yimage,zimage,'Cdata',img,'Facecolor','texturemap','Edgecolor', ...
                          'none','alphadata',alpha);
alpha(0.5); %# line added
axis vis3d 
```

**使用`surf`功能**

如果要通过`surf`函数设置透明度，需要添加`'FaceAlpha'`参数：

```
surf(ximage,yimage,zimage,'Cdata',img,'Facecolor','texturemap','Edgecolor', ... 
                          'none','AlphaData',alphaChannel,'FaceAlpha',0.5); 
```

**结果**

![通过上述任何示例获得的图像](../Images/f3e31940dd998811225e965c5d414beb.png)

有关[`alpha`](http://www.mathworks.com/help/techdoc/ref/alpha.html)和[`surf`](http://www.mathworks.com/help/techdoc/ref/surface_props.html#FaceAlpha)功能的更多信息。

* * *

## 设置矩阵透明度

但是上面的那些函数设置了整个图的透明度。如果要设置原始透明度矩阵，则需要将`'FaceAlpha','texture'`参数传递给`surf`：

```
handler = surf( ximage , yimage , zimage , 'Cdata', img , ...
    'FaceColor','texturemap',                             ...
    'EdgeColor','none',                                   ... 
    'FaceAlpha','texture',                                ...
    'AlphaData', alphaChannel);
axis vis3d 
```

**结果**

![通过设置'FaceAlpha'获得的图像](../Images/37e10bc6dbba2d4df8ded887182e7a1c.png)

[更多细节](http://www.mathworks.com/help/techdoc/visualize/f3-5927.html)。希望能帮助到你！

# cross-compiling - 为 Windows 交叉编译 GLib 引发错误“'XDG_MIME_TYPE_UNKNOWN' undeclared”

> ID：11979078
> 
> 赞同：3
> 
> 时间：2012-08-16T00:20:10.067
> 
> 标签：cross-compiling, glib, undeclared-identifier

在使用 Mingw-w64 for Win32 交叉编译[GLib 2.32.4](http://www.linuxfromscratch.org/blfs/view/svn/general/glib2.html)时，我遇到了以下错误：

```
gcontenttype.c: In function 'g_content_type_guess':
gcontenttype.c:335:3: error: 'XDG_MIME_TYPE_UNKNOWN' undeclared (first use in this function)
gcontenttype.c:335:3: note: each undeclared identifier is reported only once for each function it appears in 
```

我只能假设以下两件事之一：

*   我缺少某种预处理器定义或`./configure`标志（目前我只通过`--host`and `--prefix`to `./configure`）。

*   源代码中有错误。

一些进一步的挖掘发现`XDG_MIME_TYPE_UNKNOWN`定义`gio/xdgmime/xdgmime.h`如下：

```
extern const char xdg_mime_type_unknown[];
#define XDG_MIME_TYPE_UNKNOWN xdg_mime_type_unknown 
```

但是，该文件似乎没有包含在任何地方`gcontenttype.c`。

这是我编译库的方式的问题还是库的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:11:56.787

我终于自己修复了源代码。

`gcontenttype.c`:335

```
g_return_val_if_fail (data_size != (gsize) -1,
                      g_strdup (XDG_MIME_TYPE_UNKNOWN)); 
```

……变成……

```
g_return_val_if_fail (data_size != (gsize) -1,
                      g_strdup ("application/octet-stream")); 
```

该库现在编译没有错误。

# python - 使用 oauth 将 GAE python 应用程序连接到谷歌的驱动器/文档/电子表格

> ID：11979079
> 
> 赞同：1
> 
> 时间：2012-08-16T00:20:12.923
> 
> 标签：python, google-app-engine, oauth, google-drive-api

我想让我的 Google App Engine 应用程序连接到客户 Google Drive 上的 Google 电子表格。我在过去的两天半里一直在尝试，但我一无所获。一半的 GAE Python 文档似乎已经过时了。例如，一些示例具有`webapp`，并且在我将它们更改为 之前它们`webapp2`不起作用，但这并不总是有效。

我在以下位置创建了一个 OAuth2.0 东西*（不太确定该叫什么）*： [https ://code.google.com/apis/console/](https://code.google.com/apis/console/)

所以现在我有一个客户端 ID 和客户端密码，但是一个文档谈到了一个`CONSUMER_KEY`和`CONSUMER_SECRET`. 那么它们是相同的还是？

我按照以下文档使用 OAuth 来读取我的任务*（我知道这是一个不同的 API）*，但我无法弄清楚步骤/任务 3。我不确定我是否有所有文件/库可以连接使用认证。我有这些`gdata-2.0.17`文件，我知道如何通过硬编码登​​录凭据来连接到驱动器和电子表格，但没有用户会给我他们的凭据。

我通常不要求代码，甚至不寻求帮助，但我完全迷失了整个 OAuth API/服务。

如果有人可以发布一些使用 OAuth 2.0 和 的示例代码`webapp2`，并且您已经测试过，那就太棒了。

如果有人可以将我链接到可以通过 Google 服务器进行身份验证并允许它使用 OAuth 2.0 和 webapp2 连接到用户电子表格的示例 GAE Python 项目，我会欣喜若狂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T00:25:21.087

[本文](https://developers.google.com/drive/examples/python)介绍了一个使用 GAE 的 Google Drive 的完整示例应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:25:01.610

如果您需要访问电子表格内容，请参阅[使用 Google App Engine (Python) 检索经过身份验证的 Google 数据馈送。](https://developers.google.com/appengine/articles/python/retrieving_gdata_feeds)

本文中的示例使用 Google Document List API，但它可以很容易地适应使用电子表格[范围](https://developers.google.com/google-apps/spreadsheets/#authorizing_requests_with_oauth_20)和电子表格[客户端](http://code.google.com/p/gdata-python-client/source/browse/src/gdata/spreadsheets/client.py)或[服务](http://code.google.com/p/gdata-python-client/source/browse/src/gdata/spreadsheet/service.py)。

如果您只需要列出文件，我建议您使用像 @SebastionKreft 建议的 Drive

# iphone - 将 NSInteger 与 int 相除

> ID：11979085
> 
> 赞同：1
> 
> 时间：2012-08-16T00:21:07.473
> 
> 标签：iphone, objective-c

我正在尝试将 NSInteger 与某个数字相除，但我收到错误消息。

这就是我想要做的：

```
length = [corner count];
for (int i=0; i<length; i++) {
    if ([resultDate rangeOfString:[corner objectAtIndex:i]].location != NSNotFound) {
        cornerResult++;
    }
}

cornerResultLabel.text = [NSString stringWithFormat:@"%i", cornerResult]; 
```

这可以正常工作..我搜索数组并计算结果并写入它。

但是，我需要将cornerResult除以4。当我添加cornerResult / 4时，它会显示错误（正如我在评论中所写的那样）。我不知道为什么会出现这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:46:29.000

您可能打算划分 的`intValue`，`NSNumber`而不是`NSNumber*`本身：

```
int num = number.intValue;
int result = num / 4; 
```

（完整的代码示例和错误消息会有所帮助）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T00:47:34.910

您正在划分一个变成 float 的 int ，请改用 %f 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T00:53:55.230

我这样修。首先我定义了 int ，然后我将 NSInteger 值设置为 int ，然后除法。

```
int helper = cornerResult;
helper = helper / 4; 
```

# c++ - OpenGL glTranslatef 无法正常工作

> ID：11979086
> 
> 赞同：0
> 
> 时间：2012-08-16T00:21:47.077
> 
> 标签：c++, opengl, sdl

所以我决定用 SDL 和 OpenGL 用 C++ 制作一个 3D Stars。我创建了一个包含 x、y 和 z 值的 Point 类。我创建了一个点数组并用随机坐标填充它。这似乎可行，但是当我执行 glTranslatef(0,0,0.1f) 或类似的操作时，星星并没有靠近，它们只是消失了。

```
//OpenGL Initialization Code
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(30.0f,640.0/480.0,0.3f,500.0f);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glEnable(GL_DEPTH_TEST);

//Random point generation
for(int i = 0; i < 200000; i++)
{
   float randomX = (float)rand()/((float)RAND_MAX/100.0f) - 50.0f;
   float randomY = (float)rand()/((float)RAND_MAX/20) - 10.0f;
   float randomZ = (float)rand()/((float)RAND_MAX/20) - 20.0f;
   points[i] = Point(randomX, randomY,randomZ);
}

//Render
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glBegin(GL_POINTS);
for(int i = 0; i < 200000; i++)
{
   glVertex3f(points[i]._x, points[i]._y, points[i]._z);
}
glEnd();
glTranslatef(0,0,0.1f);
SDL_GL_SwapBuffers();
SDL_Flip(screen); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:47:59.387

该代码是您的渲染功能吗？

如果是，那么您应该将点生成移到其他地方，以便它们只生成一次。

如果不是，那么您应该将初始化代码移动到渲染函数的开头。应该每帧清除矩阵。

如果这不起作用：

尝试暂时禁用深度测试。如果它们没有消失并且您看到线条，则需要调整视锥。尝试使用 gluLookAt

另外，尝试在负 z 轴上平移它们。如果我没记错的话，在opengl中，随着z的减小，对象空间坐标越远。（0 比 -1 更接近）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:33:26.477

我不确定它们为什么会消失，但在您的示例代码中它应该是惰性的。您在顶部为 MODELVIEW 矩阵加载一个新的 Identity 矩阵，然后在渲染*后*对其进行转换。尝试将 glTranslate 移到 glBegin 之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T00:51:52.303

我在初始化 SDL SetVideoMode 的代码之后移动了 OpenGL 初始化代码，它现在可以正常工作。

# mysql - RMySQL dbWriteTable 向表中添加列（动态？）

> ID：11979090
> 
> 赞同：0
> 
> 时间：2012-08-16T00:22:50.013
> 
> 标签：mysql, r

我刚刚开始使用名为 RMySQL 的 R 包，以解决我计算机上的一些内存限制。我正在尝试在 R 中获取一个包含 100 列的矩阵（称为 data.df），然后在具有“100 选择 2”（=4950）列的 SQL 数据库上创建一个新表，其中每列是两个的线性组合来自初始矩阵的列。到目前为止，我有这样的事情：

```
countnumber <- 1
con <- dbConnect(MySQL(), user = "root", password = "password", dbname = "myDB")
temp <- as.data.frame(data.df[,1] - data.df[,2])
colnames(temp) <- paste(pairs[[countnumber]][1], pairs[[countnumber]][2], sep = "")
dbWriteTable(con, "spreadtable", temp, row.names=T, overwrite = T)

for(i in 1:(n-1)){
for(j in (i+1):n){
    if(!((i==1)&&(j==2))){     #this part excludes the first iteration already taken care of
        temp <- as.data.frame(data.df[,i] - data.df[,j])
        colnames(temp) <- "hola"
        dbWriteTable(con, "spreadtable", value = temp, append = TRUE, overwrite = FALSE, row.names = FALSE)
        countnumber <- countnumber + 1
            }
        }
} 
```

我也尝试过使用 RMySQL::dbWriteTable() 的“field.types”参数，这是在[RMySQL dbWriteTable with field.types](https://stackoverflow.com/questions/8864174/rmysql-dbwritetable-with-field-types)建议的。可悲的是，它并没有帮助我太多。

问题：

1.  使您自己的 sql 数据库成为 R 的内存绑定性质的有效解决方案，即使它有 4950 列？
2.  dbWriteTable() 是在这里使用的正确函数吗？
3.  假设前面两个问题的答案都是“是”……为什么这不起作用？

谢谢你的帮助。

* * *

* * *

[编辑]：带有错误输出的代码：

```
names <- as.data.frame(index)
names <- t(names)
#dim(names) is 1 409
con <- dbConnect(MySQL(), user = "root", password = "password", dbname = "taylordatabase")

dbGetQuery(con, dbBuildTableDefinition(MySQL(), name="spreadtable", obj=names, row.names = F))
#I would prefer these to be double types with 8 decimal spaces instead of text
#dim(temp) is 1 409
temp <- as.data.frame(data.df[,1] - (ratios[countnumber]*data.df[,2]))
temp <- t(temp)
temp <- as.data.frame(temp)
dbWriteTable(con, name = "spreadtable", temp, append = T) 
```

在数据库中成功创建了表（我稍后会更改变量类型），但是 dbWriteTable() 行会产生错误：

```
Error in mysqlExecStatement(conn, statement, ...) : 
RS-DBI driver: (could not run statement: Unknown column 'row_names' in 'field list')
[1] FALSE
Warning message:
In mysqlWriteTable(conn, name, value, ...) : could not load data into table 
```

如果我稍作更改，我会收到不同的错误消息：

```
dbWriteTable(con, name = "spreadtable", temp, append = T, row.names = F) 
```

和

```
Error in mysqlExecStatement(conn, statement, ...) : 
RS-DBI driver: (could not run statement: Unknown column 'X2011_01_03' in 'field list')
[1] FALSE
Warning message:
In mysqlWriteTable(conn, name, value, ...) : could not load data into table 
```

我只想将“名称”用作一堆列标签。他们最初是约会。我想成为“温度”的实际数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:45:20.560

有一个 4950 行的查询是可以的，问题是你需要什么列。

如果你总是“选择 *”，你最终会耗尽你所有的系统内存（在表有 100 列的情况下）

如果您遇到任何问题，为什么不给我们一些错误信息呢？

# .net - P4API.NET 等效的“p4 文件”命令在仓库中查找文件

> ID：11979091
> 
> 赞同：1
> 
> 时间：2012-08-16T00:22:54.540
> 
> 标签：.net, perforce, p4api.net

我正在使用 Perforce .NET APIs P4API.NET 库，想知道是否可以调用“p4 文件”命令行等效项来在我的 //depot 中返回文件列表（例如 *.cpp）？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:56:19.793

快速浏览[文档](http://www.perforce.com/perforce/doc.current/manuals/p4api.net/p4api.net_reference/Index.html)并不会立即显示任何内容，但您始终可以使用它`P4Command.Run`来运行任意 Perforce 命令，因此您仍然可以运行`p4 files //depot/...cpp`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T16:59:18.177

这是一个适合我的代码片段。

```
IList<FileSpec> filesToFind = new List<FileSpec>();
FileSpec fileToFind = new FileSpec(new DepotPath("//depot/....cpp"), null, null, VersionSpec.Head);
filesToFind.Add(fileToFind);
IList<FileSpec> filesFound = pRep.GetDepotFiles(filesToFind, null); 
```

# php - 如果没有该名称的实体，我如何访问存储库 Doctrine2 Symfony2

> ID：11979092
> 
> 赞同：0
> 
> 时间：2012-08-16T00:23:08.173
> 
> 标签：php, symfony, doctrine-orm

我有一个叫做 Linked Bundle 的包。现在我已经把所有混合的东西都放在那里了，这些东西在所有捆绑包中都使用了。

但我没有任何名为 Linked 的实体。

我想创建 LinkedRepository 以便我可以在那里拥有所有常用功能。但是我将如何在其他捆绑包中获取该存储库。我的意思是如何称呼这个

```
$repository = $em->getRepository('LinkedBundle:"*What should I write here*"'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:16:49.930

我认为这是不可能的，因为你打算这样做。但我建议使用服务容器而不是存储库。在此服务容器中，您可以使用不同的存储库，这些存储库需要用于这些全局任务。服务容器也可以在每个控制器等中访问。

这是它的 Documentatino：[http](http://symfony.com/doc/current/book/service_container.html) ://symfony.com/doc/current/book/service_container.html 我认为您不需要整个注入部分。只需定义一个服务：

```
services:
    linked_service:
        class: Acme\LinkedBundleBundle\Service\LinkedService 
```

然后通过

```
public function indexAction()
{
    $service = $this->get('linked_service');
} 
```

希望这有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T07:23:14.393

您不能拥有单独的存储库类。存储库类链接到实体，因此您不能拥有“独立”存储库，但我可以看到两个选项：

1.  子类 EntityRepository 并将其命名为 LinkedRepository，您可以在此处添加常用方法。您所有的自定义 Repository 类都必须继承您的 LinkedRepository 类。如果您希望在所有实体的 Repository 实例中使用该通用功能，但不需要自定义 Repository 类，则可以将 LinkedRepository 类声明为实体的 repositoryClass`@ORM\Entity(repositoryClass="Acme\LinkedBundle\Repository\LinkedRepository")`假设您的 Repository 类在您的 Bundle 内的 Repository 文件夹中，并将 Acme 替换为您的公司名。
2.  创建一个[服务](http://symfony.com/doc/current/book/service_container.html)并在其中添加您的常用功能。

我想第一个更容易。

# jquery - jquery重叠效果问题

> ID：11979094
> 
> 赞同：1
> 
> 时间：2012-08-16T00:23:26.130
> 
> 标签：jquery

我正在尝试聆听元素对重叠元素的影响。当我悬停到元素 B 时，我只希望 itemB 上的悬停效果。但是，由于元素 B 位于元素 A 的顶部，因此元素 A 上的悬停效果也会出现。有没有办法解决这个问题？非常感谢。

我的 jsfiddle

[http://jsfiddle.net/pP7h3/](http://jsfiddle.net/pP7h3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:30:52.703

您可以使用`event.stopPropagation()`：http: [//jsfiddle.net/rcdmk/pP7h3/1/](http://jsfiddle.net/rcdmk/pP7h3/1/)

```
$('#b').hover(function(e){
    $('#itemB').css('display','block');
    e.stopPropagation(); // e is the event passed by jQuery to the function
},function(){
    $('#itemB').css('display','none');
}) 
```

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

> **描述：**防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

如果您需要，您还有`stopImediatePropagation()`：

[http://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

> **描述：**阻止其余的处理程序被执行，并防止事件在 DOM 树中冒泡。
> 
> 除了阻止执行元素上的任何其他处理程序外，此方法还通过隐式调用 event.stopPropagation() 来停止冒泡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T00:51:06.457

试试这个[http://codebins.com/bin/4ldqp8d/2](http://codebins.com/bin/4ldqp8d/2)

完全按照您想要的方式工作。jQuery 有 mouseleave 和 mouseout 事件，它们只触发一次。

您也可以使用悬停，但是当您在 A 和 B 中有许多元素时，每次您将鼠标位置从一个元素更改为另一个悬停时都会触发。除非鼠标移出 B，否则您不需要触发它。

```
$(document).ready(function() {

 var overA = function(){
    $('#itemA').css('display','block');
};
  var outOfA = function(){
    $('#itemA').css('display','none');
};

  var overB = function(e){
    outOfA();
    $('#itemB').css('display','block');
    e.stopPropagation();
};

var outOfB = function(){
    overA();
    $('#itemB').css('display','none');
}

$('#a').mouseenter(overA).mouseleave(outOfA);

$('#b').mouseenter(overB).mouseleave(outOfB);

}) 
```

# php - 替换特殊字符的方式与 Wordpress 完全相同

> ID：11979104
> 
> 赞同：0
> 
> 时间：2012-08-16T00:24:05.350
> 
> 标签：php, wordpress

我想重新格式化`the_title();`与 Wordpress 对永久链接所做的完全相同的方式。

“Borislav Pekić”变成“borislav-pekic”，“Alberto Méndez”变成“alberto-mendez”等等。

```
<?php
    $forfattare = the_title();
?> 
```

我试图找到 Wordpress 的方式，但我找不到。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:29:09.163

我用这个：

```
 <?php function createAlias($name)
 {
    setlocale(LC_ALL, 'en_US.UTF8');
    $name = iconv('UTF-8', 'ASCII//TRANSLIT', $name);
    $alias = preg_replace("/[^a-zA-Z0-9\/_|+ -]/", '', $name);
    $alias = strtolower(trim($alias, '-'));
    $alias = preg_replace("/[\/_|+ -]+/", "-", $alias);

    while (substr($alias, -1, 1) == "-") {
        $alias = substr($alias, 0, -1);
    }
    while (substr($alias, 0, 1) == "-") {
        $alias = substr($alias, 1, 100);
    }

    return $alias;
} 
```

# php - 大型 zip 下载仅在 IE 中失败

> ID：11979105
> 
> 赞同：1
> 
> 时间：2012-08-16T00:24:19.427
> 
> 标签：php, internet-explorer, http-headers

我有一个小脚本，它设置标题以强制下载 zip 文件：

```
 if(ini_get('zlib.output_compression')) {
         ini_set('zlib.output_compression', 'Off');
        }
    header("Pragma: public");
    header('Expires: '.gmdate('D, d M Y H:i:s').' GMT');
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Cache-Control: private",false);
    header("Content-Description: File Transfer");
    header("Content-type: application/octet-stream");
    header('Content-Disposition: attachment; filename="'.$mp3.'"');
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: ".@filesize($file));
    @readfile($file) OR die("<html>...</html>");
    exit; 
```

在 Chrome 和 Firefox 中一切正常，但在 IE 9 中失败。我在谷歌搜索后尝试了许多不同的方法来设置这些标题，但没有任何帮助。然后我尝试了一个不同的较小的 zip 文件，它成功了！然后我尝试了一个更大的 zip 文件并再次失败。这会是服务器或 php.ini 上的一些设置吗？为什么它只影响IE？

当它在 IE 中失败时，它看起来像是在下载.. 说已完成。但是文件是0字节。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:38:16.080

如果文件足够大，您可能会遇到与内存、执行时间等相关的问题。

您可以使用 x-sendfile 标头，而不是尝试读取文件：

```
header('x-sendfile: '.$file); 
```

查看这篇关于它的文章：[http ://www.jasny.net/articles/how-i-php-x-sendfile/](http://www.jasny.net/articles/how-i-php-x-sendfile/)

# c# - 使用 REGEX 和 C# 删除加号、破折号、冒号

> ID：11979106
> 
> 赞同：0
> 
> 时间：2012-08-16T00:24:39.323
> 
> 标签：c#, regex

我需要使用 REGEX 和 C# 删除文档中的这些事件。它们是：+-------------+（加号之间可以有任意数量的破折号）：：（冒号之间可以有任意数量的空格）我无法删除独立破折号或半破折号-冒号，因为它们可能出现在名称：或地址：之后并且是必需的。我无法删除两边有空格的单词之间的冒号。带空格的冒号会创建我需要删除的格式。中间带有破折号的加号会创建我需要删除的线条或框的一部分。

基本上，我需要删除所有带有加号的破折号，包括删除加号。我还需要删除每端带有冒号的所有空格，包括删除冒号。所有其他加号和冒号都需要保留。这是一个医学文本文件，所以我需要小心。我没有任何代码可以给你看，因为我尝试过的任何东西都没有接近工作。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:27:00.337

您可以使用以下正则表达式[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)：

```
s = Regex.Replace(s, @"\+-+\+|: +:", ""); 
```

在线查看它：[ideone](http://ideone.com/rKaG7)

# xcode - 如何使 ipad 应用程序无法关闭

> ID：11979111
> 
> 赞同：0
> 
> 时间：2012-08-16T00:25:43.860
> 
> 标签：xcode, uibutton, plist, exit

我正在为昆士兰大学心理学系的一项实验编写应用程序。该应用程序必须无法退出，或者至少如果无法退出它会更好。这不是病毒——它是用于对 Grute Eylandt 原住民进行的实验。无论如何，你们中的任何人都知道如何将应用程序设置为无法退出，甚至更好地设置它，以便您必须输入密码才能退出它？此外，关于一个单独的主题，你们知道如何将应用程序中的信息保存到 iPhone 上吗？此应用不会通过 App Store，因此不需要遵循 App Store 规则。因此，如果有一种方法可以在每次在应用程序中按下按钮时将“按钮（无论是什么按钮）在（时间和日期）按下”保存到 iPhone 的注释部分，和/或将使用 AudioToolbox 框架录制的音频保存到实际的 iPod 库中，这太棒了。否则我将不得不制作某种 db 或 plist 文件来使用 if-then 语句保存所有内容，我想。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:08:42.710

签出 iOS 6[辅助](http://www.apple.com/ios/ios6/#accessibility "可访问性")功能：

> 它允许家长、老师或管理员通过禁用主屏幕按钮将 iOS 设备限制为一个应用程序，以及限制屏幕某些区域的触摸输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T01:51:45.890

市场上最简单的解决方案——MOKIMOBILITY 开发了可以让您锁定主页按钮的软件。它是具有全方位安全功能的移动设备管理软件。它实质上锁定了您的 iPad，因此用户只能使用他们要使用的东西。它被称为 +MDM www.mokimobility.com 该软件可以通过中央界面进行移动管理。灵巧的软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T00:44:51.053

将设备放入“kiosk”外壳中，以免按下主页按钮。对于将数据存储到设备中，如果是少量数据，请使用`NSUserDefaults`，如果这是大量数据，我会更倾向于`Core Data`

# javascript - Firefox 中的“解析”触摸事件

> ID：11979112
> 
> 赞同：0
> 
> 时间：2012-08-16T00:25:45.360
> 
> 标签：javascript, firefox, multi-touch

我有一个演示，需要在 Windows 7 触摸平板电脑上的 Firefox 中运行。据此[，](https://developer.mozilla.org/en-US/docs/DOM/Touch_events) Mozilla 实现了标准化的触摸 API。但是，这不适用于 Windows 7 平板电脑。这些事件都不会在 FF 14 中触发。

我们必须使用`MozTouchMove`事件。但它所做的只是调度顺序事件。威。一指，二指，三指，以此类推。

甚至很难区分两个手指和一个手指。我必须测量更新之间的距离，将我自己的“ID”分配给每个“区域”。之后，要检测双指拖动，我们必须确保解析始终保持不变——如果一个手指向上，则可能会“取消拖动”，因为“第二”位置会被“第一”位置覆盖. 试图想出一个方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:26:07.640

```
// multitouch event handler for two finger scrolling in x or y
function onTouchMove(event) {

    var eventTouch = new point(event.clientX, event.clientY);

    if (previousTouch.x == 0 && previousTouch.y == 0) {
        previousTouch = new point(eventTouch.x, eventTouch.y);                
        return;
    }

    //filter really close touches
    //in this case, assume single touch and defer to system mouse
    if (previousTouch !== undefined) {
        if (eventTouch.distance(previousTouch) < 6) {
            return;
        }
    }

    fingerIndex ++;

    // only track every other touch to keep fingers consistent
    if( fingerIndex % 2 == 0)
    {
        document.getElementById("finger1").style.left = previousTouch.x + "px";
        document.getElementById("finger1").style.top = previousTouch.y + "px";

        document.getElementById("finger2").style.left = eventTouch.x + "px";
        document.getElementById("finger2").style.top = eventTouch.y + "px";
    }

    previousTouch = eventTouch;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:17:16.207

*您链接到的状态文档日期为*2010 年 7 月 -两年前 Mozilla 关闭。因此，您现在正在使用[已弃用](https://developer.mozilla.org/en-US/docs/DOM/Touch_events_%28Mozilla_experimental%29)的单点触控 API 并尝试实现多点触控——这势必会变得丑陋。该文档实际上为您指出了自 Firefox 12 以来可用的新[多点触控 API](https://developer.mozilla.org/en-US/docs/DOM/Touch_events)。这使您可以正确区分触控，并且该文档实际上详细解释了您将如何做到这一点。

# wpf - byte[] 到 ImageSource 流

> ID：11979120
> 
> 赞同：1
> 
> 时间：2012-08-16T00:26:53.683
> 
> 标签：wpf

我需要将 byte[] 转换为 BitmapImage 并在 WPF 图像控件中显示它。（img.Source = ...）。

如果我像这样转换它：

```
m_photo = new BitmapImage();

using (MemoryStream stream = new MemoryStream(photo.ToArray()))
{
    m_photo.BeginInit();
    m_photo.StreamSource = stream;
    m_photo.EndInit();
} 
```

它不能将 XAML 绑定到 Source 属性，因为“m_photo 拥有另一个流”......我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:48:39.130

在 begininit 之后将缓存选项设置为 OnLoad

```
m_photo.CacheOption = BitmapCacheOption.OnLoad; 
```

编辑：bmp 数组到图像源的完整代码

```
 DrawingGroup dGroup = new DrawingGroup();
                using (DrawingContext drawingContext = dGroup.Open())
                {
                    var bmpImage = new BitmapImage();
                    bmpImage.BeginInit();
                    bmpImage.CacheOption = BitmapCacheOption.OnLoad;

                    bmpImage.StreamSource = new MemoryStream(photoArray);
                    bmpImage.EndInit();
                    drawingContext.DrawImage(bmpImage, new Rect(0, 0, bmpImage.PixelWidth, bmpImage.PixelHeight));
                    drawingContext.Close();
                }
                DrawingImage dImage = new DrawingImage(dGroup);
                if (dImage.CanFreeze)
                    dImage.Freeze();
                imageControl.Source = dImage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:41:15.580

好的，我刚刚找到了解决方案。如果在类代码中使用此代码（将 byte[] 转换为 bitmapSource） - 您会遇到此错误，表明该对象位于另一个流中。但是，如果创建一个转换器 (IValueConverter) 并将其与 XAML 绑定中的相同转换代码一起使用 - 一切正常！

谢谢大家！

# c++ - OSX 上 Boost 和 C++ 的链接器错误

> ID：11979123
> 
> 赞同：0
> 
> 时间：2012-08-16T00:27:36.480
> 
> 标签：c++, gcc, boost, linker

我正在使用 Boost 的“program_options”支持编写一个小型 C++ 程序。以下代码：

```
boost::program_options::options_description desc("Allowed options");
desc.add_options()
    (".refreshrate", boost::program_options::value< int >()->default_value(50), "Delay between frames")
    (".location",    boost::program_options::value<std::string>(&__Location), "Camera Location")
    (".address",     boost::program_options::value<std::string>(&__Address), "Address of Camera")
    ;
boost::program_options::variables_map vm;
boost::program_options::store(boost::program_options::parse_config_file(ifile, desc, true), vm);
boost::program_options::notify(vm); 
```

编译，但不会链接。我收到神秘的链接错误，例如：

> 链接 CXX 可执行 main 架构 x86_64 的未定义符号：“boost::program_options::validation_error::what() const”，引用自：vtable for boost::program_options::invalid_option_value in IEEE1394_Camera.cxx.o vtable for boost::exception_detail ::clone_impl > in IEEE1394_Camera.cxx.o vtable for boost::exception_detail::error_info_injector in IEEE1394_Camera.cxx.o vtable for boost::exception_detail::clone_impl > in IEEE1394_Camera.cxx.o vtable for boost::exception_detail::error_info_injector在 IEEE1394_Camera.cxx.o "boost::program_options::validation_error::validation_error(boost::program_options::validation_error::kind_t, std::basic_string, std::allocator > const&, std::basic_string, std::allocator > const&)”，引用自：std::basic_string, std::allocator > const& boost::program_options::validators::get_single_string(std::vector, std::allocator >, std::allocator, std::allocator > > > const&, bool) 在 IEEE1394_Camera.cxx .o（也许你的意思是： boost::program_options::validation_error::validation_error(boost::program_options::validation_error::kind_t, std::basic_string, std::allocator > const&, std::basic_string, std::allocator > const&, int)) ld：未找到架构 x86_64 collect2 的符号：错误：ld 返回 1 退出状态program_options::validation_error::kind_t, std::basic_string, std::allocator > const&, std::basic_string, std::allocator > const&, int)) ld: 未找到架构 x86_64 collect2: 错误： ld 返回 1 个退出状态program_options::validation_error::kind_t, std::basic_string, std::allocator > const&, std::basic_string, std::allocator > const&, int)) ld: 未找到架构 x86_64 collect2: 错误： ld 返回 1 个退出状态

但是，只需删除“.refreshrate”选项，或将其更改为 std::string 而不是 int，即可修复它。

我正在使用 CMake 进行编译，并且尝试过 Boost 1.49 和 Boost 1.5（自己编译）。我已经使用 darwin（默认）和 gcc 工具链编译了 Boost，并使用了内置的 gcc4.2 和安装了 Macports 的 4.7 。没运气。

有任何想法吗？

*更新*：这是我的完整链接命令（来自“make VERBOSE=1”）：

> "/Applications/CMake 2.8-8.app/Contents/bin/cmake" -E cmake_link_script CMakeFiles/main.dir/link.txt --verbose=1 /opt/local/bin/g++-mp-4.7 -Wl,- search_paths_first -Wl,-headerpad_max_install_names CMakeFiles/main.dir/main.cxx.o -o main /Users/rhand/Development/boost-1.50/install/lib/libboost_program_options.a /Users/rhand/Development/boost-1.50/install /lib/libboost_timer.a /Users/rhand/Development/boost-1.50/install/lib/libboost_chrono.a /Users/rhand/Development/boost-1.50/install/lib/libboost_system.a /Users/rhand/Development/boost -1.50/install/lib/libboost_exception.a

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:37:31.817

好的，我想通了，尽管我对细节仍然有些模糊。

我清除了所有内容，从 XCode 回到库存 gcc4.2 并使用以下命令重建 Boost：

> ./b2 --prefix=/Users/rhand/Development/boost-1.50/install/ --layout=versioned --build-type=complete variant=release link=shared runtime-link=shared threading=single install

然后，我不得不修改我的 CMake 构建中的一些内容以使其正确链接：

```
set(Boost_COMPILER "-xgcc42") 
```

并设置一些环境变量：

```
BOOSTROOT=/Users/rhand/Development/boost-1.50/install/
BOOST_INCLUDEDIR=/Users/rhand/Development/boost-1.50/install/include/boost-1_50/
BOOST_LIBRARYDIR=/Users/rhand/Development/boost-1.50/install/lib 
```

然后，一切正常。我不确定问题出在哪里，除非它在指定发布版本或与所有共享库一起使用时有什么特别之处......

# linux - 壳括号和引号

> ID：11979128
> 
> 赞同：0
> 
> 时间：2012-08-16T00:28:06.033
> 
> 标签：linux, shell

```
find /ABC/ \
    -type f \
    -exec \
    sh -c  ' if [  echo "1" > ${1} ] ; then   if [ "$(cat ${1})" != "1" ]; then [ echo ${1} ]  ; fi ; fi ' _ {} \; 
```

我的脚本想要这样做：

找到文件夹中的所有文件。将 1 写入文件。检查“1”是否写错。打印此文件的名称。

前。我做了这2个步骤。(1) 写 (2) 读检查。现在我将这两个结合在一起。因为我想在写入一个文件后立即检查。

但是我的脚本现在有问题。需要帮忙。谢谢你。它给出了我的错误：

```
sh: 1: unknown operand 
```

我猜有些东西不匹配/因为我对外壳没有经验。需要各位帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:41:07.437

尝试这个：

```
 find . -type f -exec sh -c 'echo "1" >> "${1}"; if [ "$(cat ${1})" != "1" ]; then echo "${1}" ; fi' _ {} \; 
```

我没有测试你的命令，因为它从一开始就看起来不正确。

不过有几点注意事项：

`echo "1" > "${1}"`将破坏文件。`>>`如果要附加，请使用。

`[`是一个命令（也称为`test`.

`then [ echo ${1} ]`错误地使用了这个测试。你不需要在这里进行测试。

根据其他答案，您不需要`if [ echo...`，因此我完全对此进行了 if 测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T00:44:25.597

> ```
> if [  echo "1" > ${1} ] ; then 
> ```

`[`是一个普通的命令。它是几乎所有的内置函数`sh`，但它仍然可以正常解析。所以`> ${1}`意味着“将输出重定向到名称作为参数传递的文件”。如果要比较两个数字，请使用`-gt`运算符：

```
if [ 1 -gt "$1" ]; then … 
```

如果要写入`1`文件，请使用`echo`命令，而不是`[ … ]`条件命令（也可以在 name 下调用`test`）：

```
if echo 1 >"$1"; then … 
```

请注意，如果`echo 1 >"$1"`成功，那么文件很可能确实包含您放在那里的文本。唯一不会发生这种情况的是：

*   if`$1`是一个特殊文件，例如管道或设备（不会发生，因为它们不会被 匹配`-type f`）；
*   如果它们存在于一个特殊的文件系统上，你从文件中读取的内容不是最后写入的内容——这将是一个奇怪的文件系统，而不是用于磁盘存储的文件系统；
*   如果其他程序同时修改了文件，由于时间窗口小，这不太可能但并非不可能。

# c++ - 使用 OpenCV 的伯努利矩阵

> ID：11979129
> 
> 赞同：0
> 
> 时间：2012-08-16T00:28:07.700
> 
> 标签：c++, opencv, matrix

我正在尝试生成一个伯努利矩阵，其值介于 -1 和 1 之间。我使用 OpenCV`cv::Mat`作为数据结构来保存这些值。有没有一种简单的方法来生成这样的矩阵？据我所知，OpenCV 没有提供这样做的方法，所以如果需要，我很乐意使用另一个库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:20:22.777

您需要遍历这些值并一一分配一个随机数。

以下是如何做到这一点：

```
boost::random::mt19937 rng;         // produces randomness out of thin air
                                // see pseudo-random number generators
boost::random::uniform_int_distribution<> uni01(0,1);

Mat bernoulli; bernoulli.create(rows, cols,CV_32FC1);
MatIterator_<float> it = bernoulli.begin<float>(), it_end = bernoulli.end<float>();
for(;it!=it_end;++it)
  (*it) = uni01(rng) ? 1.0 : -1.0; 
```

# vb.net - 如何在 vb.net 中处理一个非常大的数组

> ID：11979134
> 
> 赞同：1
> 
> 时间：2012-08-16T00:28:48.577
> 
> 标签：vb.net, arrays, out-of-memory

我有一个程序会生成大量数据，它会逐行写入 csv 文件（在创建数据时）。如果我能够在 excel 中打开 csv 文件，它将大约有 10 亿个单元格（75,000*14,600）。每次我尝试访问它（甚至创建这个大小的数组）时都会抛出 System.OutOfMemoryException。如果有人知道如何将数据导入 vb.net，以便我可以做一些简单的操作（所有数据需要立即可用），那么我会尝试你的每一个想法。

我已经考虑增加使用的 ram 数量，但其他文章/帖子说这将在 10 亿大关之前运行。这里的时间没有问题，假设我可以处理它不超过几天/几周（我每年只运行一次或两次）。如果您无论如何都不知道该怎么做，我能想到的唯一其他解决方案是将excel中的列数增加到〜75,000（如果可能的话 - 不能以相反的方式写入数据），或者我想如果有另一种语言可以处理这个？

目前它在一开始就失败了：

```
 Dim bigmatrix(75000, 14600) As Double 
```

非常感谢，弗雷泽 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:34:47.517

首先，这将始终需要 64 位操作系统和相当大的 RAM，因为您尝试分配大约 8 GB。

如果您打开[gcAllowVeryLargeObjects](http://msdn.microsoft.com/en-us/library/hh285054%28v=vs.110%29.aspx) ，这在面向 .NET 4.5 的 Visual Basic 中理论上是可能的。话虽如此，如果可能的话，我建议使用[锯齿状数组](http://msdn.microsoft.com/en-us/library/hkhhsz9t%28v=vs.90%29.aspx)而不是多维数组，因为这将消除需要单个分配 8GB 的​​要求。（这也可能允许它在 .NET 4 或更早版本中工作。）

# nservicebus - 如何从 VS 2008 .Net 3.5 项目运行 NServiceBus 处理程序

> ID：11979136
> 
> 赞同：0
> 
> 时间：2012-08-16T00:28:50.897
> 
> 标签：nservicebus

NServiceBus 处理程序在 .net 4.0 上运行。我需要从具有 3.5 运行时的 VS 2008 项目（更具体地说是从 SSIS 2008）启动它。要发送到处理程序的消息是无参数的。我尝试了什么：

*   由于 .net 版本不同，我无法使用 NServiceBus API，只是无法添加对较新运行时库的引用。

*   我的另一个想法是使用 NServicebus 网关，但结果证明它太难运行（xml+jsonp+get 协议与一堆参数）并且缺乏文档。

*   然后我尝试发送MSMQ消息，但它没有正常工作，因为NServiceBus要求它具有我无法指定的特殊标题和扩展消息区域，即使我可以它也不够可靠。

关于如何运行简单的无参数处理程序还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:20:31.180

您可以使用支持 .net 3.5 的 2.6 版本的 NServiceBus - 可在此处获得：[http ://www.nservicebus.com/Downloads.aspx](http://www.nservicebus.com/Downloads.aspx)

# android - 在 C2DM 中指定多个应用程序包

> ID：11979139
> 
> 赞同：0
> 
> 时间：2012-08-16T00:29:10.160
> 
> 标签：android, registration, android-c2dm

我有一个使用 C2DM 的 Android 应用程序。我正在创建另一个派生自它的应用程序。目前，Google 不支持 C2DM，他们转向 GCM。

但我仍然想将 C2DM 用于派生应用程序。是否可以在清单中添加多个可以通过 C2DM 通知的包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:34:42.627

你很困惑。单个服务器可以通知多个应用程序，C2DM/GCM 规则不禁止这样做。应用程序将具有不同的包 ID，但服务器上的通知生成代码不需要知道它们。服务器需要知道的只是一个注册 ID。应用程序获取并以某种方式传输到服务器。

该应用程序需要在注册时提供 API 密钥 (GCM) 或 Google 帐户 (C2DM) 才能订阅通知。但反之亦然，服务器不需要针对包进行身份验证。

如果通知协议因一个应用程序而异，您需要将支持的协议与注册 ID 一起传送到服务器。

# c# - OrderBy Lambda 的通用列表

> ID：11979140
> 
> 赞同：3
> 
> 时间：2012-08-16T00:29:40.703
> 
> 标签：c#, entity-framework, lambda

我正在尝试构建一个通用查询机制来访问我的存储库。我希望使用 Lambda 表达式来过滤和排序查询。我正在努力寻找一种方法来传递一个通用 Lambda 表达式列表，特别是用于 order-by，并且希望能得到帮助。

编辑：我试图满足的两个要求是，不要将 IQueryable 暴露在存储库之外，但仍然能够在数据库级别进行一些过滤和排序。

为了更好地说明这一点，让我向您展示代码

```
public class Query<T>
{
    public class OrderBy<T>
    {
        public Expression<Func<T, **int**>> Clause { set; get; } // Order By clause
        public bool Descending = true;
    }

    public Expression<Func<T, bool>> Where { set; get; } // Where clause
    public IList<OrderBy<T>> OrderBys { set; get; } // Where clause

    public Query()
    {
        OrderBys = new List<OrderBy<T>>();
    }
}    

public IEnumerable<Person> FindBy(Query<Person> query)
{
    IQueryable<Person> Temp = GetObjectSet();
    if (query.Where != null) 
        Temp = Temp.Where(query.Where);
    foreach (var OrderByThis in query.OrderBys)
    {
        if (OrderByThis.Descending) 
            Temp = Temp.OrderByDescending(OrderByThis.Clause);
        else 
            Temp = Temp.OrderBy(OrderByThis.Clause);
    }

    return Temp.ToList<Person>();
} 
```

这一切都很好，但是 Expression< Func< T, **int** >> 不是通用的。我需要能够执行以下操作：

```
Query<Person> query = new Query<Person>();
Query<Person>.OrderBy<Person> clause1 = new Query<Person>.OrderBy<Person>();
clause1.Clause = m => m.Username;
Query<Person>.OrderBy<Person> clause2 = new Query<Person>.OrderBy<Person>();
clause2.Clause = m => m.DateOfBirth;
query.OrderBys.Add(clause1);
query.OrderBys.Add(clause2); 
```

即添加许多不同类型的不同字段。

我想必须有一种方法将这些存储为通用 Lambda 函数，然后在存储库中转换为它需要的强类型 Lambda 函数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:05:02.013

详细说明我的评论，我不明白为什么需要从 Expressions 构建自己的中间查询对象，然后从该中间对象重建 Expressions，而您可以完全跳过该翻译。

鉴于您的示例查询：

```
repository.FindBy(people => people.OrderBy(p => p.Username).ThenBy(p => p.DateOfBirth)); 
```

请注意，您仍然可以增量构建查询，例如，如果它是基于用户选择完成的。以下查询等效于上述查询：

```
Func<IEnumerable<Person>, IEnumerable<Person>> query = people => people.OrderBy(p => p.Username);
 query = query.ThenBy(p => p.DateOfBirth); 
```

我知道您不想`IQueryable`在存储库之外公开，但您仍然可以使用带有签名的 LINQ，例如：

```
public IEnumerable<Person> FindBy(Func<IEnumerable<Person>, IEnumerable<Person>> query)
{
    return query(GetObjectSet()).ToList();
} 
```

* * *

然而，谈到您的实际问题，您可以通过使用属性类型来完成您的任务`OrderBy`，或者如果这让您感到不安，您可以通过使用而不是对象来限制它，因为它实际上是您订购所需的全部，并且字符串和数字类型都实现了它。`Expression<Func<T, object>>``Clause``IComparable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:43:08.733

正如我在回答[您的其他问题](https://stackoverflow.com/questions/11964578/repository-iqueryable-query-object)时指出的那样，我一般不鼓励这种方法。`IQueryable<T>`仅仅暴露/更有意义`IOrderedQueryable<T>`。

话虽如此，在[如何将多个表达式传递给 EF 的 OrderBy 的选定答案中，有一个符合您意图的解决方案？](https://stackoverflow.com/questions/8190480/how-to-pass-multiple-expressions-to-orderby-for-ef).

它允许您使用如下语法：

```
var query = context.Users ... ;

var queryWithOrderBy = ApplyOrderBy(query,
    new OrderByExpression<User, string>(expression: u => u.UserName, descending: false),    // a string, asc
    new OrderByExpression<User, int>(expression: u => u.UserId, descending: true));  // an int, desc

var result = queryWithOrderBy.ToList(); // didn't throw an exception for me 
```

# knockout.js - Knockoutjs - 使用映射插件订阅

> ID：11979141
> 
> 赞同：4
> 
> 时间：2012-08-16T00:29:46.397
> 
> 标签：knockout.js

我正在使用淘汰赛映射插件，以前我会像这样设置订阅

```
self.selectedProduct.subscribe(function (name) {

}
  but I'm unsure of how to do this in this format below. The message I get is 
```

**“缺少：在属性 ID 之后”**

```
 var viewModel = {

    products: ko.mapping.fromJS([]),
    productOptions: ko.mapping.fromJS([]),
    productOptions.subscribe = function (name) {
        alert('somthing change');
    },
    loadInitialData: function () {
        ko.mapping.fromJS(serverData, viewModel.productOptions);
    }
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T02:21:31.617

如果您将视图模型定义为对象文字，那么您不能像内联那样进行函数调用。您必须在创建视图模型后执行此操作，或者以不同的方式创建视图模型。

如果你后来这样做，那么它看起来像：

```
 var viewModel = {
    products: ko.mapping.fromJS([]),
    productOptions: ko.mapping.fromJS([]),
    loadInitialData: function () {
        ko.mapping.fromJS(serverData, viewModel.productOptions);
    }
  };

   viewModel.productOptions.subscribe = function (name) {
        alert('somthing change');
   }; 
```

如果您使用构造函数创建视图模型，那么它看起来像：

```
var ViewModel = function() {
    this.products = ko.mapping.fromJS([]);
    this.productOptions = ko.mapping.fromJS([]);
    this.productOptions.subscribe = function(name) {
         alert("something change");
    };

    this.loadInitialData = function() {
        ko.mapping.fromJS(serverData, this.productOptions);
    };
};

var viewModel = new ViewModel(); 
```

# ruby-on-rails - 如何使用 Capybara 从多个 CSS 选择器中进行选择

> ID：11979151
> 
> 赞同：0
> 
> 时间：2012-08-16T00:31:45.173
> 
> 标签：ruby-on-rails, rspec, capybara, bdd

使用 RSpec 和 Capybara 测试 div 中是否存在具有类 'foo' 的元素。

```
<div class="foo">
  <p>Text zzz</p>
  Looking for element here
</div>
<div class="foo">
  <p>Text aaa</p>
  Element should not exist within this div.
</div> 
```

页面上有很多类 'foo' 的 div，我可以根据 foo 在数据库中的 ID 给它们不同的 ID。

但我不知道测试中 foo 的 ID。而且，我不想测试 div 的父级，因为一个元素应该出现在一个 div 中，而在另一个 div 中不存在。

在这种情况下，测试元素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:11:26.830

如果我正确理解了这个问题（而且我不是 100% 有信心这样做），我认为这应该有效：

```
el1 = find(:xpath, '//div[@class="foo"][./p[contains(.,"Text zzz")]]')
el2 = find(:xpath, '//div[@class="foo"][./p[contains(.,"Text aaa")]]') 
```

使用 css 而不是 xpath 可能有一种更简单的方法来执行此操作，但我发现这适用于这种情况。（注意：我还没有实际测试过这段代码。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:13:55.277

```
parent = find("p[text()='zzz']").find(:xpath,"..")
within parent do
  ... 
```

[https://github.com/jnicklas/capybara/pull/505](https://github.com/jnicklas/capybara/pull/505)

# oracle - Oracle数据库，将唯一索引转换为非唯一索引

> ID：11979152
> 
> 赞同：6
> 
> 时间：2012-08-16T00:31:47.267
> 
> 标签：oracle

我知道我不能通过研究 stackoverflow 和其他网站上的类似问题来直接做到这一点。

但是，我需要这样做，并且我愿意采用变通方法。

`online`我尝试使用and创建一个非唯一索引`parallel`，然后删除旧的唯一索引。但是，它没有说`ORA-01408: such column list already indexed`。

如何将唯一索引转换为非唯一索引？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T01:32:18.987

如果您不想在创建新索引之前删除旧索引，则可以通过使用额外的无用列创建新索引来作弊，例如：

假设一个表具有以下配置：

```
create table mytable (id number);

create unique index myunique on mytable (id); 
```

要将索引转换为非唯一的：

```
create index temp on mytable (id, 1);

drop index myunique;

create index mynonunique on mytable (id);

drop index temp; 
```

在实践中，我不确定这是多么必要 - 通常我只是在一些低活动期删除并重新创建索引，最好关闭应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-19T07:55:28.563

Oracle 现在支持应用于同一组列的多个索引，只要它们的唯一性（和/或其他一些属性，例如位图与 btree 和分区）不同，并且只要其中只有一个是可见的。

因此，您可以更改现有索引 - 将其更改为不可见而不删除它，然后创建一个新的非唯一索引。

```
CREATE TABLE mytable (id NUMBER);

CREATE UNIQUE INDEX mytable_unique_idx ON mytable(id);

ALTER INDEX mytable_unique_idx INVISIBLE;

CREATE INDEX mytable_nonunique_idx ON mytable(id); 
```

请注意，不可见索引仍由数据库维护，您可以通过将其中一个变为不可见并将第二个变为可见来在它们之间进行更改。

# c++ - 我可以 memcpy() 任何具有微不足道的析构函数的类型吗？

> ID：11979153
> 
> 赞同：10
> 
> 时间：2012-08-16T00:31:48.073
> 
> 标签：c++, c++11, memcpy

我*确实*意识到`is_pod`这是一个类型能够的充分条件`memcpy`，但`has_trivial_destructor` *也*足以达到这个目的吗？如果不是，为什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T00:38:59.733

不，要求是类型可以*简单地复制*（§3.9/2），它还有[一些要求](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special/7189821#7189821)，比如缺少非平凡的复制构造函数（§9/6）。

> 可简单复制的类是这样的类：
> 
> — 没有重要的复制构造函数（12.8），
> 
> — 没有重要的移动构造函数（12.8），
> 
> — 没有非平凡的复制赋值运算符（13.5.3、12.8），
> 
> — 没有非平凡的移动赋值运算符（13.5.3、12.8），并且
> 
> — 有一个微不足道的析构函数（12.4）。

所以你应该`is_trivially_copyable`改用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T00:39:02.277

一个对象有一个平凡的析构函数是不够的。它还需要进行简单的复制操作。例如，该对象可以维护指向内部缓冲区的指针。不需要销毁任何东西，但复制需要在复制的对象中设置指针，因为否则它们将指向源对象的缓冲区。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-16T00:38:50.813

尽管在实践中通常很少见，但可能存在类具有非平凡复制构造函数以及平凡析构函数的情况。考虑一个具有静态成员变量的类，该变量仅计算该类被复制了多少次。如果你`memcpy`这样做，计数器将不准确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T00:38:53.633

在我看来，一个带有普通指针的类符合条件`has_trivial_destructor`，但您通常想要制作一个深拷贝，而`memcpy`创建一个浅拷贝。

# postgresql - SELECT .. INTO 在 PL/pgSQL 中创建表

> ID：11979154
> 
> 赞同：34
> 
> 时间：2012-08-16T00:32:12.747
> 
> 标签：postgresql, plpgsql, postgresql-9.1

我想`SELECT INTO`在我的一个函数中创建一个临时表。`SELECT INTO`适用于 SQL 但不适用于 PL/pgSQL。

此语句创建一个名为 mytable 的表（如果`orig_table`作为关系存在）：

```
SELECT *
INTO TEMP TABLE mytable
FROM orig_table; 
```

但是把这个函数放到 PostgreSQL 中，你会得到错误：`ERROR: "temp" is not a known variable`

```
CREATE OR REPLACE FUNCTION whatever()
RETURNS void AS $$
BEGIN
    SELECT *
    INTO TEMP TABLE mytable
    FROM orig_table;
END; $$ LANGUAGE plpgsql; 
```

我可以在 PL/pgSQL`SELECT INTO`中使用类型变量`record`，但是当从该记录中获取数据时，我必须定义结构。`SELECT INTO`真的很简单——自动创建一个与`SELECT`查询结构相同的表。有没有人解释为什么这在函数中不起作用？

在 PL/pgSQL 中似乎`SELECT INTO`工作方式不同，因为您可以选择已声明的变量。不过，我不想声明我的临时表结构。我希望它会像在 SQL 中那样自动创建结构。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-16T00:38:59.187

尝试

```
CREATE TEMP TABLE mytable AS
SELECT *
FROM orig_table; 
```

根据[http://www.postgresql.org/docs/current/static/sql-selectinto.html](http://www.postgresql.org/docs/current/static/sql-selectinto.html)

> CREATE TABLE AS 在功能上类似于 SELECT INTO。CREATE TABLE AS 是推荐的语法，因为这种形式的 SELECT INTO 在 ECPG 或 PL/pgSQL 中不可用，因为它们对 INTO 子句的解释不同。此外，CREATE TABLE AS 提供了 SELECT INTO 提供的功能的超集。

# string - 如何从字符串中获取最大字节数？

> ID：11979155
> 
> 赞同：1
> 
> 时间：2012-08-16T00:32:21.783
> 
> 标签：string, .net-2.0

在 .NET 2.0 中，我需要通过网络发送一些字符串，但是在构建我的数据包时，我需要将它们限制为仅 255 个字节。

我打算用

```
UnicodeEncoding.GetBytes(char* chars,int charCount, byte* bytes, int byteCount) 
```

MSDN： http: [//msdn.microsoft.com/en-US/library/z2s6sc1d](http://msdn.microsoft.com/en-US/library/z2s6sc1d(v=vs.80) (v=vs.80 )

但我无法使用 /unsafe 编译我的应用程序，所以这已经过时了。

这是我需要填写的基本方法：

```
private void GenerateSNMPObjectPacket(String value, int maxByteCount)
{
    int byteCount = Encoding.UTF8.GetByteCount(value);

    if (byteCount > maxByteCount)
        byteCount = maxByteCount;

    byte[] valueBytes = new byte[byteCount];

    //somehow get UTF8 bytes into valueBytes

    //do what I do with my byte array
} 
```

# javascript - 移动 Safari 后退按钮

> ID：11979156
> 
> 赞同：37
> 
> 时间：2012-08-16T00:32:29.697
> 
> 标签：javascript, safari

我发现的问题与[这个问题](https://stackoverflow.com/questions/24046/the-safari-back-button-problem)非常相似，只是桌面上的 Safari 似乎已经解决了这个问题。本质上，问题是这样的：当客户端在移动 safari 上浏览并且页面在 上执行 javascript 函数`pageA.html`，然后导航到`pageB.html`，然后按后退按钮返回到`pageA.html`时，当客户端按下时，javascript 函数将不会运行返回按钮返回`pageA.html`。它将跳过 javascript 调用。

我已经尝试了上面链接中提到的解决方案，但似乎对移动 Safari 没有任何作用。有没有其他人遇到过这个错误？你是怎么处理的呢？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-09-29T11:04:26.860

这是由[后向缓存](https://developer.mozilla.org/en-US/docs/Using_Firefox_1.5_caching)引起的。当用户导航离开时，它应该保存页面的完整状态。当用户使用后退按钮导航返回时，页面可以非常快速地从缓存中加载。这与只缓存 HTML 代码的普通缓存不同。

为 bfcache`onload`事件加载页面时不会触发。相反，您可以检查事件的`persisted`属性`onpageshow`。它在初始页面加载时设置为 false。从 bfcache 加载页面时，它设置为 true。

```
window.onpageshow = function(event) {
    if (event.persisted) {
        alert("From back / forward cache.");
    }
}; 
```

由于某种原因，jQuery 在事件中没有这个属性。您可以从原始事件中找到它。

```
$(window).bind("pageshow", function(event) {
    if (event.originalEvent.persisted) {
      alert("From back / forward cache.");
    }
}); 
```

这些问题的快速解决方案是在按下后退按钮时重新加载页面。然而，这抵消了后向/前向缓存会产生的任何积极影响。

```
window.onpageshow = function(event) {
    if (event.persisted) {
        window.location.reload() 
    }
}; 
```

作为旁注，您可以看到许多使用空`onunload`处理程序作为解决方案的页面。自 iOS5 以来，这一直不起作用。

```
$(window).bind("unload", function() { }); 
```

# android - 为 TouchEvent 使用 ParticleSystem

> ID：11979157
> 
> 赞同：1
> 
> 时间：2012-08-16T00:32:52.620
> 
> 标签：android, andengine

当用户在屏幕上拖动手指或触摸屏幕时，我正在尝试使用 andengines 粒子系统来产生某种颜色的条纹。我希望它能够识别在 angegine 中非常简单的触摸事件。我似乎无法弄清楚我需要如何制作粒子系统以供我使用。

任何帮助将不胜感激！

# shell - 使用 shell 将图像重命名为有序序列

> ID：11979163
> 
> 赞同：1
> 
> 时间：2012-08-16T00:33:53.903
> 
> 标签：shell

我有一堆文件夹，其中包含按顺序排列但不按顺序排列的图像，如下所示：

```
/根
  /f1
    img21.jpg
    img24.jpg
    img26.jpg
    img27.jpg
  /f2
    img06.jpg
    img14.jpg
    img36.jpg
    img57.jpg

```

我想让它们看起来像这样，具有文件夹标题以及所有图像按顺序排列：

```
/根
  /f1
    f1_01.jpg
    f1_02.jpg
    f1_03.jpg
    f1_04.jpg
  /f2
    f2_01.jpg
    f2_02.jpg
    f2_03.jpg
    f2_04.jpg

```

我不确定如何使用 shell 脚本来做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:49:20.293

在一个目录中，`ls`将按词汇顺序为您提供文件，从而为您提供正确的排序。所以你可以做这样的事情：

```
let i=0
ls *.jpg | while read file; do
    mv $file prefix_$(printf "%02d" $i).jpg
    let i++
done 
```

这将获取所有`*.jpg`文件并将它们重命名为`prefix_00.jpg`，`prefix_01.jpg`依此类推。

这显然只适用于单个目录，但希望通过一些工作你可以使用它来构建一些你想要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T01:09:45.513

使用`for`循环遍历目录，使用另一个`for`循环遍历文件。维护一个计数器，为每个文件增加 1。

没有用前导零填充数字的直接便捷方法。你可以打电话`printf`，但是有点慢。一个有用的快速技巧是从 101 开始计数（如果您想要两位数 - 如果您想要 3 位数字，则为 1000，依此类推）并去掉前导的 1。

```
cd /root
for d in */; do
  i=100
  for f in "$d/"*; do
    mv -- "$f" "$d/${d%/}_${i#1}.${f##*.}"
    i=$(($i+1))
  done
done 
```

`${d%/}`strips `/`at the end `$d`, `${i#1}`strips `1`at the start `$i`and strips at the end, strips at the beginning and strips at the end, strips at the beginning and strips at the end, strips at the end and strips at the end, strips at the end and strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end, strips at the end 的 strips 和 strips at the start ， 并`${f##*.}`从`$f`除最后一个之外的所有内容中剥离`.`。这些构造记录在您的 shell 手册中的参数扩展部分中。

请注意，此脚本假定目标文件名不会与现有文件的名称冲突。如果您有一个名为 的目录`img`，则某些文件将被覆盖。如果这可能是一个问题，最简单的方法是首先将所有文件移动到不同的目录，然后在重命名它们时将它们移回原始目录。

# node.js - 为什么 mongodb 会话 MongoStore 在会话结束后不会消失？

> ID：11979164
> 
> 赞同：5
> 
> 时间：2012-08-16T00:34:00.643
> 
> 标签：node.js, session, mongodb, express

即使

```
app.use(express.session({
    secret: conf.secret,
    maxAge : new Date(Date.now() + 360000),
    expires: new Date(Date.now() + 360000),//I've tried both separately
    store : new MongoStore(conf.db),

})); 
```

mongodb 中的会话永远存在（据我测试）

即使在会话结束后，MongoDB 中的会话存储是否应该保留在那里？
因为即使在会话声明中使用 maxAge 或 expires，在 MongoDB 中，所有会话看起来都是这样的：

```
{ "_id" : "FU8k3kEzquG/hoSD308H5XHa", "session" : "{\"cookie
\":{\"originalMaxAge\":null,\"expires\":null,\"httpOnly\":true,
\"path\":\"/\"}}" } 
```

此外，在我的大多数_id 中都有某种类型的非数字/字母字符，即/、+ 等。它们应该是这样的吗？

每次我重新打开浏览器时，都会创建一个新会话，但旧会话仍在 MongoDB 中。我只想知道是否有解决此问题的方法，或者这是故意的。

谢谢，布兰登

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T05:10:08.713

> 即使在会话结束后，MongoDB 中的会话存储是否应该保留在那里？

如果您的浏览器的 cookie 过期但会话信息已保存在 MongoDB 等持久性后端数据存储中，这是预期的行为。两个数据存储（后端与基于浏览器的 cookie）可以有不同的到期时间。

假设你使用[connect-mongodb](https://github.com/masylum/connect-mongodb)来持久化会话，默认`reapInterval`应该每 60 秒触发一次过期会话的删除。

由于您的会话到期设置为“null”，因此这些会话永远不会过期。会话到期*应*与 cookie`expires`值相同.. 因此，如果未设置，您可能需要进行一些调试以跟踪问题。

这些可能是在您尝试设置之前保存的旧会话`maxAge`；我会检查新会话是否`expires`按照您的预期设置。如果是这样，您可能需要手动删除一些较旧的未到期会话。

> 此外，在我的大多数_id 中都有某种类型的非数字/字母字符，即/、+ 等。它们应该是这样的吗？

是的，Express sessionID 是 24 个字符长的字母数字字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:15:48.923

谢谢你的解释，斯坦尼！我发现我必须把

```
cookie: { maxAge: new Date(Date.now() + 360000)} 
```

代替

```
maxAge : new Date(Date.now() + 360000)
//or
expires: new Date(Date.now() + 360000) 
```

我在我的数据库中删除了旧会话集合（数据无关紧要，因为我只是在测试东西），所以现在我在测试时只能看到新会话。他们现在看起来像他们应该的那样，并清除每个 clear_interval （相当于 connect-mongo 中的 reapInterval ）

# php - 使用 DomDocument 为页面上宽度小于 480 像素的所有图像添加 CSS 类

> ID：11979166
> 
> 赞同：1
> 
> 时间：2012-08-16T00:34:31.997
> 
> 标签：php, wordpress, domdocument

我想为页面上所有低于特定宽度的图像（WordPress 帖子/页面）添加一个 CSS 类。

以下工作，但**setAttribute**正在用新的替换每个 img 中的所有类名。

如何在不替换现有类的情况下为每个图像添加新类？

```
function add_class_to_small_images( $content ) {

$dom = new DOMDocument();
@$dom->loadHTML( $content );
$dom->preserveWhiteSpace = false;

$images = $dom->getElementsByTagName('img');

foreach ($images as $image) {

    $width = $image->getAttribute('width');

    if( $width < 480) {
        $image->setAttribute('class', 'this-will-be-the-class'); // the new class
    }
}

  $content = $dom->saveHTML();

return $content;
}
add_filter('the_content', 'add_class_to_small_images'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:52:55.610

好的，这行得通。抓住现有的类并将它们添加回 setAttribute 和我想要的新类。如果有人有更好的方法，请告诉我。

```
function add_class_to_small_images( $content ) {

$dom = new DOMDocument();
@$dom->loadHTML( $content );
$dom->preserveWhiteSpace = false;

$images = $dom->getElementsByTagName('img');

foreach ($images as $image) {

    // get the widths of each image
    $width = $image->getAttribute('width');

    // the existing classes already on the images
    $existing_classes = $image->getAttribute('class');

    // the class we're adding
    $new_class = ' this-will-be-the-class';

    // the existing classes plus the new class
    $class_names_to_add = $existing_classes . $new_class;

    // if image is less than 480px, add their old classes back in plus our new class
    if( $width < 480) {
        $image->setAttribute('class', $class_names_to_add);
    }
}

  $content = $dom->saveHTML();

return $content;
} 
```

# php - jQuery发布到外部php文件不起作用

> ID：11979173
> 
> 赞同：0
> 
> 时间：2012-08-16T00:35:31.610
> 
> 标签：php, jquery

我不知道为什么，但我的外部 PHP 文件的帖子不起作用。由于没有输出任何内容，因此 PHP 文件未接收到 post 请求。

这是我的jQuery；

```
 $.post("AJAX/get_track_info.php", { url: "uploads/19c9aa51c821952c81be46ca9b2e9056.mp3"}, function(info){
 $('#loadInfo').html(info);
 }); 
```

而在PHP文件中只是一个

```
$trackurl = $_POST['url']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:40:28.997

尝试更多类似的东西

```
$.ajax({
            type: 'POST',
            url: 'AJAX/get_track_info.php',
            data: { url: "uploads/19c9aa51c821952c81be46ca9b2e9056.mp3" },
            dataType: 'text',
            success: function (data, textStatus, jqXHR) {  },
            error: function (data, textStatus, errorThrown) { }
}); 
```

# android - Android Sherlock Actionbar 新手

> ID：11979174
> 
> 赞同：0
> 
> 时间：2012-08-16T00:35:32.327
> 
> 标签：android, actionbarsherlock

我刚刚在我的应用程序中安装了 sherlock 操作栏，但我想知道如何使用它？

我的意思是如何放置下一个按钮或下拉菜单等。

搜索并没有得到很好的结果，我得到的只是如何安装它，这很容易，任何关于如何放置下一步按钮或下拉菜单等的指南......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T00:49:53.383

如果您想使用 ActionBarSherlock，您应该首先学习 API 14 上可用的内置操作栏 API。ActionBarSherlock 只是本机操作栏 API 的向后移植。

这里有一些很好的资源：

*   [`ActionBar`API](http://developer.android.com/reference/android/app/ActionBar.html)
*   [`Fragment`API](http://developer.android.com/reference/android/app/Fragment.html)
*   [“使用操作栏”](http://developer.android.com/guide/topics/ui/actionbar.html)
*   [“创建菜单”](http://developer.android.com/guide/topics/ui/menus.html)
*   [“使用 v4 库 API”](http://developer.android.com/sdk/compatibility-library.html#Using)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T00:58:47.490

应该有示例项目附带或在网站上可用。我只是通过查看其中提供的代码了解到的，它们是完整的项目，您可以将它们加载到手机上以查看它们的外观。

# vim - 这在编程中用在哪里 -->(')

> ID：11979176
> 
> 赞同：-2
> 
> 时间：2012-08-16T00:35:47.407
> 
> 标签：vim

`' -> "`我想在我的vimrc中将单引号映射到双引号。

除了在 C 中声明 chars 之外，`'`在编程中还使用了哪里？

我应该映射它吗？我将反向映射它们以访问两者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T00:42:57.377

单引号在编程中*无处不在。*

*   在 Bourne shell（以及派生类、`csh`派生类`Perl`和其他语言）中，它用于禁止字符串扩展，因此您可以这样做：

    ```
    $ echo '$VARIABLE'
    $VARIABLE 
    ```

*   在`C`中，单引号用于表示字符常量，而不是字符串。所以你可以这样做：

    ```
    char c = 'c'; 
    ```

    但这是一个错误：

    ```
    char c = "c"; 
    ```

*   当然，如果你用一种叫做“英语”的语言编程，单引号用来表示重要的东西，比如所有格（“snihalani 的问题似乎有点奇怪）以及收缩（“我不相信有人会想要做这个。”）。

这些只是几个例子。当然，还有更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T00:40:00.697

我几乎只使用单引号。当您在字符串中使用双引号时，它们很有用：

```
print 'Foo said, "Bar"' 
```

这比逃避它们更容易：

```
print "Foo said, \"Bar\"" 
```

此外，您也无法使用所有格输入正常句子：

```
# Attaches foo's signal to a slot
self.foo.bar.connect(self.baz) 
```

例如，当字符串用单引号引起来时，PHP 不会执行变量替换：

```
$var = 1;
echo('I will literally print $var'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T00:42:47.000

在许多语言（例如，C、C++、Ada）中，`'`分隔字符文字和`"`分隔字符串文字。

在其他（例如，Perl、Bourne shell）中，`'`或者`"`可以用于字符串文字，但具有不同的语义；`"`当字符串包含`'`字符时很方便，反之亦然，并`"`导致对变量的引用扩展为变量的名称，同时`'`防止这种情况发生。

Ada 用于`'`分隔属性的名称。

在*所有*语言中，您都需要`'`注释和字符串文字——例如，如果您想写“您需要`'`注释和字符串文字”。

他们是截然不同的人物。取消您键入其中一个的能力不是一个好主意。

您可能会考虑映射`'`到`"` *，反之亦然*，如果这样可以让您更轻松地打字。但是一旦你养成了使用映射的习惯，使用别人的设置或在 vim 以外的其他东西中输入文本可能会很尴尬。

# iphone - 将自定义 UI 对象 (UISwitch) 添加到 iOS 项目

> ID：11979177
> 
> 赞同：0
> 
> 时间：2012-08-16T00:36:28.840
> 
> 标签：iphone, ios, interface-builder, custom-controls

我正在尝试`UISwitch`使用[DCRoundSwitch](https://github.com/domesticcatsoftware/DCRoundSwitch)向我的应用程序添加自定义，但是我正在努力弄清楚如何正确实现它。将文件添加到我的项目后，我将 UISwitch 更改为 DCRoundSwitch 但遇到了几个问题，包括`unrecognized selector sent to instance`错误。

我试过（1）去 Xib，选择 Switch，打开身份选择器并更改自定义类，但我看到的唯一选项是`UISwitch`. (2) 我也尝试过在代码中更改`UISwitch`to `DCRoundSwitch`，但是当我运行它时会导致上面提到的错误。

我觉得我错过了一步，但我不确定是什么。我需要删除交换机并重新添加新交换机吗？我以前从未以编程方式完成此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:32:46.843

终于找到解决办法了！

在 IB 中添加自定义 UI 对象的方法（在将代码添加到项目之后）是*将通用 UIView 对象拖到 Xib 上*，*根据需要调整其大小*，然后*切换到身份检查器并将类从 UIView 更改为 DCRoundSwitch* (或其他自定义对象）。

**警告：**如果您没有看到列出的自定义对象，请尝试构建您的项目或关闭并重新打开 xCode。在您将代码添加到已编译的源代码后，xCode 4 及更高版本应该能够识别它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:32:10.320

`DCRoundSwitch`不是`UISwitch`自定义类。这是一个继承自`UIControl`. 这意味着在界面生成器中您没有设置`UISwitch`CustomClass。`UISwitch`之间`DCRoundSwitch`根本不相关。所以你必须以编程方式设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:22:04.087

你见过这个吗？[https://github.com/robertchin/rcswitch](https://github.com/robertchin/rcswitch)（我在我的应用程序中使用了该示例）

# grails - 如果用户单击不在 webflow 中的链接，我如何结束 Grails webflow？

> ID：11979179
> 
> 赞同：0
> 
> 时间：2012-08-16T00:36:43.770
> 
> 标签：grails, grails-2.0

我有一个 Grails 应用程序，它有一个显示在所有页面上的通用导航栏。当用户启动 webflow 时，它会将 URL 更改为如下所示：

```
http://localhost:8080/app/transaction/create?execution=e5s1 
```

但是当我点击一个不在 webflow 中的链接时，它仍然会附加查询字符串：

```
http://localhost:8080/app/profile/show/5?execution=e5s1 
```

如果链接不是 webflow 的一部分，如何将 Grails 配置为不附加查询字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:44:09.947

如果您使用 createLink taglib 生成链接，我认为这是不可能的。我能看到的唯一解决方法是调用一个操作，然后重定向到最终的 url 目标。就像是...

在普惠制中：

```
createLink(action: "proxy", params: [finalaction: 'gohere']) 
```

在控制器中：

```
def proxy = {
    redirect(action: params.finalaction)
}

def gohere = {
    render "look no querystring"
} 
```

# asp.net-mvc-3 - IIS 到 SQL Server 错误 26，相同的连接字符串在 IIS 外部有效，但在内部无效

> ID：11979181
> 
> 赞同：1
> 
> 时间：2012-08-16T00:37:34.567
> 
> 标签：asp.net-mvc-3, iis, .net-4.0, sql-server-2012

我已经浏览了所有我能找到的用于配置我能找到的 SQL Server 的清单。我在 Windows Server 2008 和 Windows 7 Pro 上遇到了同样的问题。先说环境：

*   SQL Server Express 2012——作为主实例安装（即没有命名实例）
*   IP 访问已开启
*   SQLServer 的防火墙异常
*   用于应用程序访问的 SQL Server 用户
*   Windows Server 2008 Service Pack 2（也使用 Windows 7 Service Pack 1 进行了测试）
*   IIS 7（也使用 7.5 进行了测试，结果相同）
*   .NET 4.0
*   我们自己的数据库代码集成在 .NET MVC 3 应用程序中

我们开发了一个工具来将数据从旧的 Ruby on Rails 应用程序导入到新的 ASP.NET MVC 3 应用程序中。该工具可以使用我们创建的用户帐户连接到数据库，这就是我发现访问存储过程的一些权限问题的方式。这是我们用来验证连接是否正常的工具。

> 数据源=SERVER_IP,1433；网络库=DBMSSOCN；数据库=MYDB；用户ID=webuser；密码=webpassword；multipleactiveresultsets=true；

我们使用的是直接 IP 地址，但为了保护我们的基础设施，我替换了 IP、用户名和密码。但这是我们正在使用的连接字符串的结构。按照清单，我能够使用导入工具从我们网络上的另一台机器连接到数据库并导入数据。我还能够从安装 IIS 的同一台机器上导入数据。

相同的连接字符串在 Windows Server 2008 和 Windows 7 Pro 上都提供了可怕的错误 26“找不到数据库服务器”消息：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

我已经用尽了我能找到的所有资源，似乎无法更接近答案。我没有尝试挂载基于文件的数据库，IIS 在任何情况下都具有对 Web 应用程序的读/写访问权限。

* * *

我已经排除了防火墙作为问题的原因。我已经尝试了打开防火墙并完全关闭的设置。必须有一些其他的权限级别问题正在发生。问题是我不知道我必须检查什么权限级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T13:08:47.420

在与微软开票后，事实证明我是自己最大的敌人。模型类在它们自己的 DLL 中设置，因此我可以将它们用于数据迁移和网站的其他支持工具。

DLL 在程序集配置中查找连接字符串，如果未找到，它将使用合理的默认值。问题是 Web 应用程序永远不会覆盖 Web.config 文件中的位置。

应用程序找不到它，因为我没有使用默认设置安装数据库。

# c# - 读取位对齐数据

> ID：11979184
> 
> 赞同：6
> 
> 时间：2012-08-16T00:38:06.380
> 
> 标签：c#, .net-3.5

我一直在阅读 Adob​​e 网站上提供的[SWF 格式](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf)，它提到为了节省空间，变量位用于存储整数或浮点数（pdf 中的第 17 页）

我一直使用字节对齐的数据，因此没有过多考虑位对齐的文件，或者信息存储在每个字节中的可变对齐。

例如，您可能有一个结构，其中包含顺序存储的四个 13 位整数（而不是将它们存储为四个 16 位整数）。

前 13 位是第一个整数，接下来的 13 位是第二个整数，依此类推。它填充最后一个字节以使结构与文件的其余部分字节对齐，因此 52 位将填充为 56 位，需要 7 个字节来存储这四个整数，而不是 8 个字节。

*   我该如何解决这类问题？
*   如何在位级别处理字节流？
*   有什么东西可以帮助我更轻松地处理这些数据吗？

我想解决方案归结为在字节数组上使用位操作。

解析四个 13 位整数的示例解决方案也可以很好地演示您建议的方法的使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T00:53:05.287

据我所知，有两种处理方法。第一种是手动进行 - 在字节数组上使用按位运算符、除法、模数等 [或整数/ulong 等，如果你觉得无聊的话]。 [IsBitSet 示例](https://stackoverflow.com/questions/2431732/checking-if-a-bit-is-set-or-not)

另一种方式是[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx) - 它为您处理大部分内容:)

* * *

> 最好添加一个示例，说明 BitArray 如何准确地将位 13..25 处理为 int，因为这将是主要操作。乍一看，我只看到一个循环。

很好......我写了一个快速而肮脏的概念测试证明：

```
var rnd = new Random();
//var data = Enumerable.Range(0, 10).ToArray();
var data = Enumerable.Range(0, 10).Select(x => rnd.Next(1 << 13)).ToArray();

foreach (var n in data) Console.WriteLine(n);

Console.WriteLine(new string('-', 13));

var bits = new BitArray(data.Length * 13);

for (int i = 0; i < data.Length; i++)
{
    var intBits = new BitArray(new[] { data[i] });
    for (int b = 12; b > -1; b--)
    {
        bits[i * 13 + b] = intBits[b];
        Console.Write(intBits[b] ? 1 : 0);
    }
    Console.WriteLine();
}
Console.WriteLine(new string('-', 13));

for (int i = 0; i < bits.Length / 13; i++)
{
    int number = 0;
    for (int b = 12; b > -1; b--)
        if (bits[i * 13 + b])
            number += 1 << b;

    Console.WriteLine(number);
}
Console.ReadLine(); 
```

哪个输出：

```
910
3934
7326
7990
7712
1178
6380
3460
5113
7489
-------------
0001110001110
0111101011110
1110010011110
1111100110110
1111000100000
0010010011010
1100011101100
0110110000100
1001111111001
1110101000001
-------------
910
3934
7326
7990
7712
1178
6380
3460
5113
7489 
```

除了简化访问之外，位数组并没有做太多的事情——它仍然是非常手动的。我希望您会编写自己的类来简化这一点并使其整洁且可重用 - 例如，这是另一个快速概念：

```
//Improved to take sign into account.
//Sign is in addition to bits allocated for storage in this version.
//Stored as {sign}{bits}
//E.g.  -5, stored in 3 bits signed is:
//       1 101
//E.g.   5, stored in 3 bits [with sign turned on]
//       0 101
//E.g.   5, stored in 3 bits no sign
//         101  
//This may differ from your exiting format - e.g. you may use two's compliments.
static void Main(string[] args)
{
    int bitsPerInt = 13;

    //Create your data
    var rnd = new Random();
    //var data = Enumerable.Range(-5, 10).ToArray();
    var data = Enumerable.Range(0, 10).Select(x => rnd.Next(-(1 << bitsPerInt), 1 << bitsPerInt)).ToArray();

    var bits = new BitSerlializer();

    //Add length header
    bits.AddInt(data.Length, 8, false);
    foreach (var n in data)
    {
        bits.AddInt(n, bitsPerInt);
        Console.WriteLine(n);
    }

    //Serialize to bytes for network transfer etc.
    var bytes = bits.ToBytes();

    Console.WriteLine(new string('-', 10));
    foreach (var b in bytes) Console.WriteLine(Convert.ToString(b, 2).PadLeft(8, '0'));
    Console.WriteLine(new string('-', 10));

    //Deserialize
    bits = new BitSerlializer(bytes);
    //Get Length Header
    var count = bits.ReadInt(8, false);
    for (int i = 0; i < count; i++)
        Console.WriteLine(bits.ReadInt(bitsPerInt));

    Console.ReadLine();
}

public class BitSerlializer
{
    List<byte> bytes;
    int Position { get; set; }

    public BitSerlializer(byte[] initialData = null)
    {
        if (initialData == null)
            bytes = new List<byte>();
        else
            bytes = new List<byte>(initialData);
    }

    public byte[] ToBytes() { return bytes.ToArray(); }

    public void Addbit(bool val)
    {
        if (Position % 8 == 0) bytes.Add(0);
        if (val) bytes[Position / 8] += (byte)(128 >> (Position % 8));
        Position++;
    }

    public void AddInt(int i, int length, bool isSigned = true)
    {
        if (isSigned) Addbit(i < 0);
        if (i < 0) i = -i;

        for (int pos = --length; pos >= 0; pos--)
        {
            var val = (i & (1 << pos)) != 0;
            Addbit(val);
        }
    }

    public bool ReadBit()
    {
        var val = (bytes[Position / 8] & (128 >> (Position % 8))) != 0;
        ++Position;
        return val;
    }

    public int ReadInt(int length, bool isSigned = true)
    {
        var val = 0;
        var sign = isSigned && ReadBit() ? -1 : 1;

        for (int pos = --length; pos >= 0; pos--)
            if (ReadBit())
                val += 1 << pos;

        return val * sign;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T09:43:43.123

另一方面，基于字节数组的方法可能是这样的：

```
 int extend(uint raw, int bits)
    {
        int sh = 32 - bits;
        int x = (int)raw << sh; // puts your sign bit in the highest bit.
        return x >> sh;  // since x is signed this is an arithmatic signed shift
    }

    int read(byte[] data, int pos, int bits, bool signed)
    {
        int fbi = pos / 8; // first byte index
        int lbi = (pos + bits - 1) / 8; // last byte index
        int cnt = lbi - fbi + 1; // bytes spanned
        if (cnt > 3 || lbi >= data.Length) { throw new ArgumentException(); }

        uint raw = (uint)(
            (data[fbi] << (24 + pos % 8)) + 
            (cnt < 2 ? 0 : data[fbi + 1] << (16 + pos % 8)) + 
            (cnt < 3 ? 0 : data[fbi + 2] << (8 + pos % 8))
            ) >> (32 - bits);
        return signed ? extend(raw, bits) : (int)raw;
    } 
```

对此进行测试：

```
 byte[] test = { 0x55, 0xAA, 0x10 };

    string s = "";
    s += read(test, 0, 8, false) + "\r\n";
    s += read(test, 0, 8, true) + "\r\n";
    s += read(test, 8, 8, false) + "\r\n";
    s += read(test, 8, 8, true) + "\r\n";
    s += read(test, 4, 8, false) + "\r\n";
    s += read(test, 7, 9, true) + "\r\n";
    s += read(test, 7, 10, true) + "\r\n";
    s += read(test, 7, 11, true) + "\r\n";
    s += read(test, 7, 12, true) + "\r\n";
    s += read(test, 7, 13, true) + "\r\n";
    s += read(test, 7, 14, true) + "\r\n";
    s += read(test, 7, 15, true) + "\r\n";
    s += read(test, 7, 16, true) + "\r\n";
    s += read(test, 7, 17, true) + "\r\n";
    s += read(test, 18, 2, true) + "\r\n";
    s += read(test, 18, 3, true) + "\r\n";
    s += read(test, 23, 1, true) + "\r\n";
    s += read(test, 23, 2, true) + "\r\n"; 
```

测试构建字符串，如下所示：

```
 85
    85
    170
    -86
    90
    -86
    -172
    -344
    -688
    -1375
    -2750
    -5500
    -11000
    -22000
    1
    2
    0 
```

然后在最后一行抛出异常。

# macos - 无法在 Mountain Lion OSX 上安装 subversion

> ID：11979188
> 
> 赞同：14
> 
> 时间：2012-08-16T00:38:28.610
> 
> 标签：macos, svn, installation

我在 collabnet 的“社区二进制文件”中下载了 subversion 安装程序：http: [//www.collab.net/downloads/subversion#tab-3](http://www.collab.net/downloads/subversion#tab-3)。当我尝试安装它时，我会阅读简介、自述文件和许可证。当我到达目的地选择时，“为这台计算机的所有用户安装”是灰色的。在这一点上我无法继续。有谁知道为什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-16T02:35:20.480

Mountain Lion 确实有来自 Apple 的 Subversion 版本 1.6.18。然而，得到它有点令人费解：

*   从 Mac OS X App Store 下载 Xcode（免费程序）
*   选择菜单项 Xcode->Preferences...
*   选择“下载”部分。
*   选择*命令行工具*并单击*安装*按钮。

之后，Subversion 命令行客户端将可用。`svnserve`服务器也包括在内。不幸的是，不再包括通过 Apache https 运行 Subversion 服务器所需的`mod_dav.so`和文件。`mod_dav_svn.so`我认为它们可能包含在 Mac OS X Server 中，但购买价格为 20 美元。

希望这可以帮助。*它不是 1.7.x 版本，但它比我不相信在 Mountain Lion 中工作的旧社区二进制*版本更容易工作（也是 1.6.18 版本）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T06:21:11.907

如果你不需要 Xcode，你可以直接从[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)下载开发者命令行工具，为自己节省大量的磁盘空间和时间......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T21:00:40.403

[显然它没有被更新](http://subversion.open.collab.net/ds/viewMessage.do?dsForumId=4&dsMessageId=440239)是 open.Collab.net 上的消息......

> 日期 2011-12-20 04:44:22 PST 消息 在我们网站上提供二进制文件的社区志愿者尚未针对 Lion 或 SVN 1.7 进行更新。所有 Mac 打包工具，如 MacPorts 和 HomeBrew 都已更新，您可以在那里获取。这里还有一个获取它们的地方列表：[http://subversion.ap](http://subversion.ap) ​ache.org/packages.ht​ml#osx

# python - 熊猫对象的子类与其他对象的子类的工作方式不同？

> ID：11979194
> 
> 赞同：5
> 
> 时间：2012-08-16T00:39:34.383
> 
> 标签：python, subclass, pandas, series

我正在尝试创建 Pandas 数据结构的子类，以在我的代码中将 a 的子类替换为 a**`dict`**的子类**`Series`**，我不明白为什么此示例代码不起作用

```
from pandas import Series    

class Support(Series):
    def supportMethod1(self):
        print 'I am support method 1'       
    def supportMethod2(self):
        print 'I am support method 2'

class Compute(object):
    supp=None        
    def test(self):
        self.supp()  

class Config(object):
    supp=None        
    @classmethod
    def initializeConfig(cls):
        cls.supp=Support()
    @classmethod
    def setConfig1(cls):
        Compute.supp=cls.supp.supportMethod1
    @classmethod
    def setConfig2(cls):
        Compute.supp=cls.supp.supportMethod2            

Config.initializeConfig()

Config.setConfig1()    
c1=Compute()
c1.test()

Config.setConfig2()    
c1.test() 
```

可能这不是更改某些对象的配置的最佳方法，无论如何我发现这在我的代码中很有用，最重要的是我想了解为什么使用**dict**而不是**series**它可以按预期工作。

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T07:34:54.043

# 当前答案（熊猫 >= 0.13）

Pandas 0.13 中的内部重构极大地简化了子类化。Pandas`Series`现在可以像任何其他 Python 对象一样被子类化：

```
class MySeries(pd.Series):
    def my_method(self):
        return "my_method" 
```

# 旧版答案（Pandas <= 0.12）

问题是 Series 使用`__new__`它来确保实例化 Series 对象。

你可以像这样修改你的类：

```
class Support(pd.Series):
    def __new__(cls, *args, **kwargs):
        arr = Series.__new__(cls, *args, **kwargs)
        return arr.view(Support)

    def supportMethod1(self):
        print 'I am support method 1'       
    def supportMethod2(self):
        print 'I am support method 2' 
```

但是，最好使用 has-a 而不是 is-a。或者猴子修补系列对象。原因是由于它的数据存储性质，您在使用 pandas 时经常会丢失您的子类。像这样简单的东西

```
s.ix[:5] 
s.cumsum() 
```

将返回一个 Series 对象而不是您的子类。在内部，数据存储在连续的数组中并针对速度进行了优化。数据仅在需要时与类一起装箱，并且这些类是硬编码的。另外，类似的东西`s.ix[:5]`是否应该返回相同的子类并不是很明显。这将取决于您的子类的语义以及附加到它的元数据。

[http://nbviewer.ipython.org/3366583/subclassing%20pandas%20objects.ipynb](http://nbviewer.ipython.org/3366583/subclassing%20pandas%20objects.ipynb)有一些注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T07:37:02.683

`Support()`返回一个`Series`对象。

关于 Series 和 DataFrame 的子类化，另请参见：[https ://github.com/pydata/pandas/issues/60](https://github.com/pydata/pandas/issues/60)

```
In [16]: class MyDict(dict):
   ....:     pass
   ....:

In [17]: md = MyDict()

In [18]: type(md)
Out[18]: __main__.MyDict

In [21]: class MySeries(Series):
   ....:     pass
   ....:

In [22]: ms = MySeries()

In [23]: type(ms)
Out[23]: pandas.core.series.Series 
```

# sql - 只用牛奶、鸡蛋、黄油、面粉、糖和盐，你能做出多少种食谱？

> ID：11979195
> 
> 赞同：8
> 
> 时间：2012-08-16T00:39:42.837
> 
> 标签：sql, postgresql

我有一个让我难过的 SQL 查询。基本上，我有一张`Recipes`表，其中包含（正如您毫无疑问地猜到的）许多食谱。我有一张`Ingredients`桌子，里面有各种配料。我有一张`RecipeIngredients`表格，将食谱与它使用的成分联系起来。最后，我有一张`PopularIngredients`桌子（它实际上是一个视图，但谁在乎呢？）其中包含人们在厨房里可能拥有的最受欢迎的食材：

```
CREATE Table Recipes
(
  RecipeId int4,
  Title varchar(100)
);

CREATE Table Ingredients
(
  IngredientId int4,
  Name varchar(100)
);

CREATE Table RecipeIngredients
(
  RecipeId int4,
  IngredientId int4,
  Amount int2
);

CREATE Table PopularIngredients
(
  IngredientId int4
); 
```

我的目标是列出所有*仅*使用流行成分的食谱。

**可以在[此处](http://sqlfiddle.com/#!1/9278b/6)找到带有示例数据的 SQL Fiddle 。**

我正在寻找的是一个将返回*Chicken Salad*和*Pancakes*的查询。 *Aligator Burgers*不会被退回，因为它使用了*不受欢迎*的成分。

我尝试了一些涉及子选择和`ALL`关键字的事情，但没有任何运气。我尝试了各种内部和外部联接，但只要其中至少一种成分很受欢迎，食谱行仍然会出现。任何帮助将非常感激！

我正在使用 Postgres 9.1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T00:52:30.753

这将获取所有没有不在 PopularIngredients 表中的成分的食谱。

```
select * from Recipes r where not exists (
  select * from RecipeIngredients ri 
  left join PopularIngredients pi on pi.IngredientId=ri.IngredientId
  where ri.RecipeId=r.RecipeId and pi.IngredientId is null
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T00:53:50.290

用于`WHERE NOT EXISTS`确保“PopularIngredients”视图中没有缺少任何使用的成分：

```
SELECT R.*
FROM Recipes R
WHERE NOT EXISTS (
    SELECT 1
    FROM RecipeIngredients RI
    LEFT JOIN PopularIngredients P ON P.IngredientId = RI.IngredientId
    WHERE RI.RecipeId = R.RecipeId AND P.IngredientId IS NULL
) 
```

更新了你的[SqlFiddle](http://sqlfiddle.com/#!1/c3d01/4)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T01:10:07.353

```
select r.Title
  from Recipes r
  join RecipeIngredients ri
    on r.RecipeId = ri.RecipeId
  left outer join PopularIngredients pi
    on ri.IngredientId = pi.IngredientId
 group by r.Title
 having count( case when pi.IngredientId is null then 1 end )=0 
```

或几乎相同

```
select r.Title
  from Recipes r
  join RecipeIngredients ri
    on r.RecipeId = ri.RecipeId
  left outer join PopularIngredients pi
    on ri.IngredientId = pi.IngredientId
 group by r.Title
 having count(pi.IngredientId)=count(ri.IngredientId) 
```

# asp.net - ASP.NET 母版页不更新子页

> ID：11979196
> 
> 赞同：1
> 
> 时间：2012-08-16T00:39:46.660
> 
> 标签：asp.net, master-pages

我创建了一个基于 MasterPage 的站点，在创建了几个页面后，我添加了一个新页面，`<asp:ContentPlaceHolder>`但似乎现有页面不会更新以包含它，但是新页面可以。

有没有办法强制更新，或者有没有合适的方法来做到这一点？我刚刚保存了母版页并希望最好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:44:38.250

您需要手动将新页面添加`<asp:ContentPlaceHolder>`到旧页面。`aspx`

在您的母版页中：

```
<asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
</asp:ContentPlaceHolder>
<asp:ContentPlaceHolder ID="new_one" runat="server"></asp:ContentPlaceHolder> 
```

在旧的 aspx 页面中，添加：

```
<asp:Content ID="Content3" ContentPlaceHolderID="new_one" runat="server">
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:43:57.280

如果您在母版页中创建新的内容占位符，则您的内容页不需要有对应的`<asp:Content>`. 如果您想替换母版页中的默认内容，它们只需要一个。

而且，如果您要使用自己的内容更新每个页面，那么添加`<asp:Content>`标签可能会带来相对较小的不便。

不幸的是，Visual Studio 无法搜索所有内容页面并使用新`<asp:Content>`控件更新它们。

但是，您可以通过使用现有`<asp:Content>`控件的 id 查找来相当快地完成此操作，然后执行`ctrl`++`shift`并`F`替换为新的`<asp:Content>`以及您搜索的内容。

例如，如果您的内容页面都已经有了

```
<asp:Content ID="Content3" ContentPlaceHolderID="old_one" ... /> 
```

然后你可以搜索并替换为

```
<asp:Content ID="Content4" ContentPlaceHolderID="new_one" runat="server" /><asp:Content ID="Content3" ContentPlaceHolderID="old_one" ... /> 
```

不完全漂亮，但它可以节省一些时间。

# html - html中拖拽组件

> ID：11979197
> 
> 赞同：-2
> 
> 时间：2012-08-16T00:39:56.317
> 
> 标签：html

有什么办法可以将一些 html 组件从一个 div 拖到另一个 div。就像 visualstudio 工具箱一样，我需要设计一个组件容器，我必须从中将 html 组件拖到另一个地方。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T00:48:33.193

jQuery UI 有一个相当灵活的拖放库。它可能是最著名的库之一，对于拖放工作，它比编写自己的库要容易得多。

*   [http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

HTML 5 增加了对拖放的支持，但浏览器支持并不是全面的。

*   [http://html5demos.com/drag](http://html5demos.com/drag)
*   [http://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

与 jQuery UI 相比，我更喜欢[Twitter Bootstrap 的](http://twitter.github.com/bootstrap/)美学和更轻量的 jQuery 组件，但它们目前没有拖放插件。然而，这是在 Bootstrap 上实现拖放的人的一个很好的演示。源代码可在 github 上找到。

*   [http://bootstrap-forms.heroku.com/#](http://bootstrap-forms.heroku.com/#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:01:18.263

有很多第三方框架可用于拖放功能。每个都有一定的好处或缺点。您应该问自己的第一个问题是我正在使用什么平台 - php、asp 等。然后问我想要定位哪些浏览器。jQuery 几乎可以在任何平台上运行，并且根据您的环境，实现可能会很棘手，而纯 HTML5 在旧浏览器中会失败。给定您的目标平台，您可以缩小选择范围。

除了 jQuery，我可以推荐 Telerik 的 .Net 平台套件和 KendoUI（带有 Guns 的 jQuery），用于与平台无关的集成。

# wpf - 延迟动作直到前一个动作完成后？

> ID：11979200
> 
> 赞同：0
> 
> 时间：2012-08-16T00:40:08.920
> 
> 标签：wpf, .net-4.0

所以我有一个用 .NET 4.0 编写的 WPF 应用程序。在应用程序中，有一个导入按钮，它执行 OpenFileDialog 搜索 XML 文件。打开文件后，它会读取 XML，从中检索数据并将其存储在 Properties.Settings.Default 中。基本上，它是一个人们可以导出和导入设置的系统。效果很好。

现在，我想做的是在导入后保存新设置，然后杀死应用程序并重新启动它。很简单，保存设置，启动应用程序的新实例，杀死旧实例。

```
Properties.Settings.Default.Save();
System.Diagnostics.Process.Start(Application.ResourceAssembly.Location);
System.Diagnostics.Process.GetCurrentProcess().Kill(); 
```

然而，问题是应用程序的新实例的启动通常是在设置完成保存之前。所以新实例开始检索旧设置。我想我可以通过在进程中添加一个简单的睡眠来解决这个问题；但这非常hacky。

```
System.Threading.Thread.Sleep(1000); 
```

如果保存过程需要超过 1000 毫秒怎么办？然后老问题仍然存在。我知道我可以增加睡眠定时器，但我确信必须有更好的方法。有没有办法让最后两行直到第一行完成后才激活？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:51:27.500

从来没有听说过`Save`异步，作为最后的手段，您可以使用 a[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)来监视受影响的文件并在没有更多更改时调用您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:44:49.000

为什么不让您的 save 方法在完成保存时执行返回，或者让它调用 Process Start。在这种情况下，您应该在第一个完成保存之前无法启动应用程序

# .htaccess - 带有 CakePHP htaccess 的通配符子域

> ID：11979201
> 
> 赞同：1
> 
> 时间：2012-08-16T00:40:14.177
> 
> 标签：.htaccess, cakephp, mod-rewrite, wildcard-subdomain

我目前有这个 CakePHP 设置：CakePHP[中的变量前缀路由](https://stackoverflow.com/questions/11463716/variable-prefixed-routing-in-cakephp)

用于处理通配符子域的DNS`*.example.com`和 Apache 条目已经存在。不幸的是，我似乎无法将 CakePHP 的默认 .htaccess 与通配符子域代码合并。

以下是 CakePHP 默认的 .htaccess 代码：

```
RewriteRule ^$ app/webroot/ [L]
RewriteRule (.*) app/webroot/$1 [L] 
```

我想做的例子： `example.com/controller/action/a`-> `example.com/global/controller/action/a`（`global`是文字）

`X.example.com/controller/action/a/b/c`->`example.com/X/controller/action/a/b/c` 本质上使 X 成为第一个“目录”，然后保留 URL 的其余部分。（`X`是任何字母数字字符串）

请注意，文件夹`X`绝对不存在，它只是简单地重写为 CakePHP 以`app/webroot`访问一次。我不想修改 CakePHP 部分的行为，我只需要将上面的 URL 示例重写为访问该页面的“等效”，然后它将由 CakePHP 的`htaccess`条目处理。

供参考，`app/webroot/.htaccess`：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:52:28.920

你的意思是这样的吗？（会超出您上面的 app/webroot 规则）：

```
RewriteCond %{HTTP_HOST} ^([a-z0-9]+)\.example\.com$ [NC]
RewriteRule ^controller/(.*)$ /%1/controller/$1 [L] 
```

这应该首先应用，然后 app/webroot 规则应该生效并将其指向：`/app/webroot/%1/controller/$1`。

# python - 如何使用原始数据模式和 pyUSB 从条形码阅读器获取数据？

> ID：11979204
> 
> 赞同：4
> 
> 时间：2012-08-16T00:40:51.637
> 
> 标签：python, barcode, pyusb

我需要使用 USB 条码阅读器（原始数据模式）读取条码数据。我已经知道我可以使用键盘模式设置阅读器，但它不符合我的要求，因为我将同时使用 4 个阅读器并且文本会重叠。

我是 python 新手，我尝试自己研究它无济于事。我通过文档得到了这些想法，我真的不知道它有什么问题。

这是我到目前为止提出的示例代码：

```
import sys
import usb.core
import usb.util

# got these using the command lsusb -vv

VENDOR_ID = 0x4b4
PRODUCT_ID = 0x100
DATA_SIZE = 1

device = usb.core.find(idVendor=VENDOR_ID, idProduct=PRODUCT_ID)

if device is None:
    sys.exit("Could not find Id System Barcode Reader.")

if device.is_kernel_driver_active(0):
    try:
        device.detach_kernel_driver(0)
    except usb.core.USBError as e:
        sys.exit("Could not detatch kernel driver: %s" % str(e))

#not really sure if these are correct configuration.

try:
    cfg = device.get_active_configuration()
    for i in cfg:
        for x in i:
            x = x
    device.set_configuration()
except usb.core.USBError as e:
    sys.exit("Could not set configuration: %s" % str(e))

data = []
swiped = False 

#i can't print the data when i try to read a barcode

data = device.read(x.bEndpointAddress, x.wMaxPacketSize, 0, 10000)
print data 
```

运行此程序并尝试条形码后，我收到此错误。

```
Traceback (most recent call last):
  File "barcodesensor.py", line 37, in <module>
    data = device.read(x.bEndpointAddress, x.wMaxPacketSize, 0, 10000)
  File "/usr/local/lib/python2.6/dist-packages/usb/core.py", line 654, in read
    self.__get_timeout(timeout)
  File "/usr/local/lib/python2.6/dist-packages/usb/backend/libusb10.py", line 559, in intr_read
    timeout)
  File "/usr/local/lib/python2.6/dist-packages/usb/backend/libusb10.py", line 641, in __read
    timeout))
  File "/usr/local/lib/python2.6/dist-packages/usb/backend/libusb10.py", line 403, in _check
    raise USBError(_str_error[ret], ret, _libusb_errno[ret])
usb.core.USBError: [Errno 110] Operation timed out. 
```

我愿意通过 PayPal 向任何可以帮助我获取原始数据并将格式转换为字符串的人捐款。提前致谢。

编辑：如何从条形码中获取正确的数据并将其转换为可读的字符串格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:59:32.283

从 USB 有效负载中提取文本数据是特定于供应商的。因此，您需要自己解决这个问题，尽管它并不太复杂。

至于您遇到的异常，请尝试启用调试日志记录，再次运行您的脚本并将内容发布到`pyusb.log`.

要启用调试，请设置几个环境变量，如出了**什么问题？**本[教程](http://pyusb.sourceforge.net/docs/1.0/tutorial.html)的部分。

对于 Linux/Mac：

```
$ export PYUSB_DEBUG_LEVEL=debug
$ export PYUSB_LOG_FILENAME=pyusb.log 
```

对于 Windows：

```
> set PYUSB_DEBUG_LEVEL=debug
> set PYUSB_LOG_FILENAME=pyusb.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T08:54:49.087

无法调试的原因是环境变量是 PYUSB_DEBUG 而不是 PYUSB_DEBUG_LEVEL。

尝试这个：

```
export PYUSB_DEBUG=debug
export PYUSB_LOG_FILENAME=pyusb.log

python yourscript.py

nano pyusb.log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T14:45:03.120

可以尝试从下面提到的 git 安装 pyusb

[https://github.com/walac/pyusb#installing-pyusb-on-gnulinux-systems](https://github.com/walac/pyusb#installing-pyusb-on-gnulinux-systems)

上面的程序只是通过减少 device.read() 中的参数来工作

将 data = device.read(x.bEndpointAddress, x.wMaxPacketSize, 0, 1000) 替换为 data = device.read(x.bEndpointAddress, x.wMaxPacketSize)

# ios - UITapGesture 错误，识别错误视图中的点击

> ID：11979207
> 
> 赞同：0
> 
> 时间：2012-08-16T00:41:14.680
> 
> 标签：ios, uiwebview, uigesturerecognizer, uitapgesturerecognizer

继承人的问题：我想用 NSLog 测试 TapGestureRecognizer，但 TapGestureRecognizer 在 UIWebView 之外的任何地方都可以运行，我不知道为什么......

这是我的代码：

```
-(void)viewDidLoad {
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(bookmarker:)];
tapGesture.numberOfTapsRequired = 2;
[self.view addGestureRecognizer:tapGesture];
[tapGesture release];
   } 
```

继承人IBAction：

```
-(IBAction)bookmarker:(UITapGestureRecognizer *)trecognizer{
NSLog(@"TAPPED");
} 
```

这是我希望它在其中发挥作用的视图：

[http://i.stack.imgur.com/3UPor.png](http://i.stack.imgur.com/3UPor.png)

这是它在其中起作用的视图：

[http://i.stack.imgur.com/nGmwq.png](http://i.stack.imgur.com/nGmwq.png)

（抱歉，不到 10 个代表点我无法发布图片）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:18:22.763

您正在将识别器添加到顶视图，该视图的任何子视图也将触发手势识别器的操作。

根据文档。

> 将手势识别器附加到视图定义了所表示手势的范围，使其接收对该视图及其所有子视图进行命中测试的触摸。该视图保留了手势识别器。

您可以检查识别器的触摸位置，看看它是否在您的子视图内。

```
- (CGPoint)locationInView:(UIView *)view 
```

然后进行检查。

```
bool CGRectContainsPoint (
   CGRect rect,
   CGPoint point
); 
```

凭记忆写，希望它有效：

```
CGPoint point = [recognizer locationInView:self.view];
CGRect rect = subView.frame;
bool inside = CGRectContainsPoint(rect, point);

if (!inside) {
    //do your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T16:07:21.630

我发现 webviews 不接受 TapGestureRecognizer 因为它有自己的一组手势，所以要实现它：

在 Header 中使 UIGestureRecognizer 委托

（在 viewDidLoad 中）

```
tapGesture.delegate = self; 
```

然后实现：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer

{
 return YES;
} 
```

# android - EditText 整数比较

> ID：11979209
> 
> 赞同：0
> 
> 时间：2012-08-16T00:42:00.327
> 
> 标签：android, integer, android-edittext, compare

比较来自 EditText 的输入整数时遇到问题。我找不到它有什么问题。请帮我。这是下面的代码。

```
 protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.problem2);
        textIn = (EditText) findViewById(R.id.probText);
        Button ans3 = (Button) findViewById(R.id.answer3);

        ans3.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                String probString = textIn.getText().toString();
                Integer probInt = Integer.parseInt(probString);
                Integer prob = 31;
                if (probInt.equals(prob)) {
                    Toast toast = Toast.makeText(answer3.this,"CORRECT!",Toast.LENGTH_SHORT);
                    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                    toast.show();
                    startActivity(new Intent("com.sample.androidsample.ANSWER4")    );

                } else {
                    Toast toast = Toast.makeText(answer3.this,"Wrong answer! Try again.",Toast.LENGTH_SHORT);
                    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                    toast.show();
                }
            }
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:57:28.507

尝试这个：

```
Integer probInt = Integer.parseInt(probString);
            Integer prob = 31;
            //changed from equals() to ==
            if (probInt == prob)) {
                Toast toast = Toast.makeText(answer3.this,"CORRECT!",Toast.LENGTH_SHORT);
                toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                toast.show();
                startActivity(new Intent("com.sample.androidsample.ANSWER4")    );

            } else {
                Toast toast = Toast.makeText(answer3.this,"Wrong answer! Try again.",Toast.LENGTH_SHORT);
                toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                toast.show();
            } 
```

据我了解`equals`是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:18:08.033

代替

```
 Integer probInt = Integer.parseInt(probString);
 Integer prob = 31;
 if (probInt.equals(prob)) {
 } else {
 } 
```

利用

```
int probInt = (int) Integer.parseInt(probString);
int prob = 31;
if (probInt == prob) {
} else {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T00:48:29.527

而不是`Integer probInt = Integer.parseInt(probString);`你可以使用`Integer probInt = Integer.valueOf(probString);`，但我不确定这是问题所在。并且`probInt.equals(prob)` 你也可以使用`probInt.equalIgnoreCase(prob)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T01:01:27.717

我认为这是错误的路线。

```
Integer prob = 31; 
```

这里 Integer 是一个类，所以你必须像下面这样实例化它。

```
Integer prob = new Integer(31); 
```

或者你可以使用

```
int prob =31; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T01:22:41.833

试试这个东西，它会工作

```
Integer probInt = Integer.parseInt(probString);
        Integer prob = 31;
        //changed from equals() to ==
        if (probInt.intValue() == prob.intValue()) {
            Toast toast = Toast.makeText(answer3.this,"CORRECT!",Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
            toast.show();
            startActivity(new Intent("com.sample.androidsample.ANSWER4")    );

        } else {
            Toast toast = Toast.makeText(answer3.this,"Wrong answer! Try again.",Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
            toast.show();
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T01:32:38.363

这是一个清理输入的示例。为简洁起见省略了异常处理。

```
private Pattern patternNum = Pattern.compile("^(\\d{1,5})$", 
                               Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE);

// Wrap it in a try/catch for PatternSyntaxException!
private boolean validateNum(String inputNum){
    return patternNum.matcher(inputNum);
} 
```

然后假设`validateNum`例程返回 true，这意味着它匹配至少 5 个数字，然后这样说：

```
if (validateNum(probString)){
   int probInt = Integer.parseInt(probString);
   if (probInt == prob){
      // Success
   }else{
      // Failure
   }
}else{
   // Whoops! Bad input caught!
} 
```

# ios - 自动调整大小 CCLabelBMFont

> ID：11979210
> 
> 赞同：1
> 
> 时间：2012-08-16T00:42:21.477
> 
> 标签：ios, cocos2d-iphone

想知道是否有人有任何调整大小`CCLabelBMFont`以适合给定盒子的经验。目前，它正在迭代完成（`while`循环）并且非常昂贵。它最初将比例设置为 1 并将宽度设置为框，然后在保持相同宽度的同时缩小比例（基本上就像减小字体大小），直到它看到它不再在框外流血。

它似乎不像缩放它那么简单，因为自动换行，想知道你们是否有任何不涉及缩放的解决方案，检查它，缩放它，检查它......

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:44:18.853

你有盒子的宽度和标签的宽度，比例为 1.0。因此，如果您将框宽度和标签宽度之间的差值除以框宽度，您将获得适合框内标签所需的比例因子（宽度方向）。

# php - 尝试使用 jquery ajax 和 php 更新新帖子

> ID：11979213
> 
> 赞同：0
> 
> 时间：2012-08-16T00:42:47.500
> 
> 标签：php, jquery, ajax, codeigniter

我正在尝试获取 url 的内容并将其附加到我的 div 中，每 10 秒一次，我对 javascript 很陌生，真的不知道为什么这不起作用，任何灯光都会很棒。

我的JavaScript：

```
$(document).ready(function() {
function get_new_posts(){
    var new_posts = $.ajax({
                        type: "POST",
                        url: "/ajax/get_latest_posts/",
                        dataType: "html",
                        cache:false,
                        async: false
                    }).success(function(){
                        setTimeout(function(){get_new_posts();}, 10000);
                    }).responseText;

    $("#posts_container").append(new_posts);        
});
}; 
```

我知道生成帖子的页面正在运行，因为我可以在浏览器中看到它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:44:46.893

您应该执行您的功能：

```
 $(document).ready(function() {
      get_new_posts();
 });

function get_new_posts(){
var new_posts = $.ajax({
                    type: "POST",
                    url: "/ajax/get_latest_posts/",
                    dataType: "html",
                    cache:false,
                    async: false
                }).success(function(){
                    setTimeout(function(){get_new_posts();}, 10000);
                }).responseText;

$("#posts_container").append(new_posts);        

}; 
```

# php - PHP 使用似乎是运算符“=>”

> ID：11979216
> 
> 赞同：-1
> 
> 时间：2012-08-16T00:43:10.027
> 
> 标签：php

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

以这段代码为例：

```
$files[] = array('name' => $d, 'tmp_name' => $fdata['tmp_name'][$i]); 
```

仅看似运营商的具体定义、名称和用法是什么？`=>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:44:44.397

它是数组中键值对的分隔符。有关更多详细信息，请参阅[文档](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:45:22.630

是`=>`一个数组赋值运算符。当您创建包含键和值的数组时，`=>`会将键映射到值。

例如：

```
$example = array("Person" => "SomeKittens");
$example["Person"]  === "SomeKittens"; //true
isset($example[0]);//false.  The 0 index was never set. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T00:47:47.747

它是数组定义中使用的赋值运算符。

```
$someVar=array('key1' => 3, 'key2' => 6); 
```

输出是一个数组，其中一个元素名为“key1”，值为 3，第二个元素名为“key2”，值为 6。

# css - 使用 webfonts 在输入字段中垂直定位文本

> ID：11979223
> 
> 赞同：0
> 
> 时间：2012-08-16T00:43:57.407
> 
> 标签：css, html, input, webfonts

很难破解这个问题——在使用网络字体时，在移动 Safari（和 Chrome）上，输入字段中文本的垂直定位总是很高。具体来说，来自 Monotype Webfonts 的 DIN Next [http://www.fonts.com/font/linotype/din-next?QueryFontType=Web#buying-options](http://www.fonts.com/font/linotype/din-next?QueryFontType=Web#buying-options)

我试过设置行高、调整填充和输入高度，但无济于事。文字总是比它应该的高。

当 webfonts 不应用于输入字段时，它看起来很棒。

使用 HTML5 样板，带有 normalize.css

截图在这里：[https ://www.evernote.com/shard/s4/sh/49486b48-98a6-4cf0-80ab-52c96f052bc6/a889ee43c1c08b7c2ee5433a139708ac](https://www.evernote.com/shard/s4/sh/49486b48-98a6-4cf0-80ab-52c96f052bc6/a889ee43c1c08b7c2ee5433a139708ac)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T23:57:15.683

该问题似乎与字体文件有关。使用 Typekit 字体进行测试，并能够解决问题。

# mysql - 在插入带有某些值的触发器之前，Mysql 的正确语法

> ID：11979227
> 
> 赞同：0
> 
> 时间：2012-08-16T00:44:42.960
> 
> 标签：mysql, triggers

我想创建一个使用新值插入的前插入触发器，以检查触发器是否应该让插入发生或在某些条件下停止它。我真的找不到该触发器的正确​​语法，但这是足够明确的伪代码：

```
CREATE TRIGGER my_first_trigger BEFORE INSERT COMMENT VALUES(comment, #commentPIID, #commentUserID)

FOR EACH ROW
BEGIN
IF
(SELECT USER.ID
FROM USER LEFT JOIN PI_REMINDER ON  PI_REMINDER.userID == USER.ID
WHERE PI_REMINDER.ID == commentPIID && USER.ID == commentUserID) IS NOT NULL)
OR
 ((SELECT userID
FROM pishared
WHERE PIID == commentPIID && userID ==commentUserID && acceot == 1) IS NOT NULL)

THEN
INSERT INTO COMMENT VALUES(comment, #commentPIID, #commentUserID)

END IF;
END; 
```

有人可以告诉我在那个伪代码案例中使用的正确语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:55:14.150

据我了解，触发器应该限制一些插入，在这种情况下，您可以检查条件，然后抛出错误以逃避插入。MySQL 中的错误可以使用MySQL 5.5 中的[SIGNAL](http://dev.mysql.com/doc/refman/5.5/en/signal-resignal.html)语句或调用未知过程（例如 CALL proc100）产生。

我使用了 COUNT(*) 函数来知道另一个表中是否有相应的记录。还有一件事 - 你的触发器中有一些语法错误，我已经纠正了它们。

所以，触发器可能看起来像这样 -

```
CREATE TRIGGER my_first_trigger BEFORE INSERT ON COMMENT
FOR EACH ROW
BEGIN
  SET @cnt = NULL;

  SELECT COUNT(*) INTO @cnt FROM USER
    LEFT JOIN PI_REMINDER
      ON PI_REMINDER.userID = USER.ID
  WHERE
    PI_REMINDER.ID = NEW.commentPIID AND USER.ID = NEW.commentUserID;

  IF @cnt = 0 THEN
    SIGNAL SQLSTATE '02000';
  END IF;

  SELECT COUNT(*) INTO @cnt FROM pishared
  WHERE
    PIID = NEW.commentPIID AND userID = NEW.commentUserID AND acceot = 1;

  IF @cnt = 0 THEN
    SIGNAL SQLSTATE '02000';
  END IF;

END; 
```

# opencv - 使用 OpenCV 分析相机运动

> ID：11979232
> 
> 赞同：0
> 
> 时间：2012-08-16T00:45:10.213
> 
> 标签：opencv

我想创建一个简单的程序，可以根据录制的视频计算相机的变换。这个想法是我可以在视频上放一些图片，图片的转换将与视频中的图像相匹配。

我在看光流，但后来不知道如何根据结果计算转换（平移、缩放、旋转）。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:12:44.277

它被称为姿态估计 - 有一个关于[POSIT 算法的教程](http://opencv.willowgarage.com/wiki/Posit)

如果你能得到一份副本，它会在[openCV 书中有所介绍](https://rads.stackoverflow.com/amzn/click/com/0596516134)

# iphone - iPhone图形在模拟器上工作而不是在设备上

> ID：11979234
> 
> 赞同：2
> 
> 时间：2012-08-16T00:45:25.753
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, ios-simulator

我正在编写一个使用平铺的应用程序来完成我的关卡。该应用程序在模拟器中运行良好，但是当我在设备上运行它时，关卡上的所有精灵都被推到左下角。地图完全没有扭曲，是同一个地方，只有精灵被扭曲了。我检查了文件名，它们匹配得很好。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T14:59:00.797

如果您不支持视网膜显示器，则必须禁用视网膜支持。为此，请转到 AppDelegate.m 文件找到如下所示的一行：

```
if( ! [director_ enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported"); 
```

并用这个改变它：

```
[director_ enableRetinaDisplay:NO] 
```

# java - Java 效率：全屏独占模式

> ID：11979235
> 
> 赞同：2
> 
> 时间：2012-08-16T00:45:35.427
> 
> 标签：java, performance, fullscreen, draw

最近我遇到了 Java 的全屏独占模式。当我自己尝试时，我遇到了一些问题：在全屏模式下在 JFrame 或 Frame 中渲染完全相同的内容需要更长的时间（40 fps），而不是在未装饰和最大化的窗口中（150-200 fps）。我的屏幕设置为 50 fps，即每帧 20 毫秒，我看不到这段时间在哪里丢失。我唯一的想法是，Jave——出于某种原因——决定在全屏时使用我的板载显卡。

```
GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
if(gd.isFullScreenSupported()) {
    try {
        gd.setFullScreenWindow(window);
    } finally {
        gd.setFullScreenWindow(null);
    }
} else {
    this.fullscreen = false;
} 
```

我用一个帧来管理重绘，它试图通过暂停计算的时间将帧速率保持在一定水平。

```
int delta = (int) (System.currentTimeMillis() - timestamp); //timestamp: start of this round
if(animated - delta > 0)
    pause(animated - delta); 
```

最后我使用双缓冲在框架上绘制：

```
public void render(Graphics2D a) { //window graphics are passed
    Graphics2D g = (Graphics2D) backBuffer.getGraphics();
    //Adjusting some rendering hints here...
    //Then drawing some stuff...
    g.dispose();
    a.drawImage(backBuffer, 0, 0, null);
} 
```

基本上就是这样，而且仍然：所谓的高效全屏模式非常慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:50:57.807

尝试`-Dsun.java2d.d3d=false`按照此处的建议设置系统属性[为什么我的 Java 应用程序在全屏模式下运行如此缓慢？（窗口化时很好）](https://stackoverflow.com/questions/8380323/why-does-my-java-application-run-so-slowly-in-full-screen-mode-and-fine-when-w)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T21:16:08.390

如果上述答案不起作用，则以不同的方式将窗口置于全屏状态。

代替：

```
GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
if(gd.isFullScreenSupported()) {
    gd.setFullScreenWindow(window);
} 
```

这样做（假设您使用的是`JFrame`）：

```
myFrame.setUndecorated(true);
myFrame.setExtendedState(JFrame.MAXIMIZED_BOTH); 
```

# ruby-on-rails - Rails 生成奇怪的 mysql 查询

> ID：11979237
> 
> 赞同：4
> 
> 时间：2012-08-16T00:46:19.497
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 Rails 应用程序中使用[rack-mini-profiler](https://github.com/SamSaffron/MiniProfiler/tree/master/Ruby)，当它加载页面时，有时会显示一些奇怪的查询，例如：

```
SHOW FULL FIELDS FROM `tablename`
SHOW TABLES LIKE 'tablename'
SHOW CREATE TABLE `tablename` 
```

他们说查询来自处理请求的控制器，来自具有

```
@model = Model.first() 
```

这些查询不会在连续页面加载时执行。

**为什么 rails 会生成这些奇怪的查询？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T00:57:44.633

您可能知道 Rails 按照惯例自动将数据库中的字段映射到模型中的属性，因此您不必在 ActiveRecord 类实现中显式定义“id”、“name”等。

为了让您的 ActiveRecord 模型生成正确的属性，Rails 必须询问您的数据库模式。Mysql 支持上述命令以检查模式。

ActiveRecord 假设您的模式在应用程序运行的生命周期内不会更改，但是，没有必要在后续请求中询问这些问题。

# android - locationManager.addProximityAlert 是否需要位置监听器

> ID：11979240
> 
> 赞同：2
> 
> 时间：2012-08-16T00:46:44.860
> 
> 标签：android, locationmanager, proximity

正如主题所说，我查看了 Android 开发人员指南，并没有真正找到答案。如果您只想知道何时进入某个区域，那么 Proximity 警报是否需要位置侦听器？我正在按如下方式设置接近警报：

```
private void addProximityAlert(double latitude, double longitude) {

        Intent intent = new Intent(PROX_ALERT_INTENT);
        PendingIntent proximityIntent = PendingIntent.getBroadcast(this, 0,
                intent, 0);

        locationManager.addProximityAlert(latitude, longitude, POINT_RADIUS,
                PROX_ALERT_EXPIRATION, proximityIntent);

        IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);
        proxalert = new ProximityIntentReceiver();
        registerReceiver(proxalert, filter);
    } 
```

然后调用如下：

```
addProximityAlert(SMASH_LAT, SMASH_LNG); 
```

问题是，我需要以下内容吗？

```
locationManager.requestLocationUpdates(
                // check every 10 minutes
                low.getName(), MINIMUM_TIME_BETWEEN_UPDATE,
                MINIMUM_DISTANCECHANGE_FOR_UPDATE, new MyLocationListener());

public class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location location) {
            Location pointLocation = retrievelocation();
            float distance = location.distanceTo(pointLocation);
            // txted.setText("Distance: " + distance);
        }

        @Override
        public void onStatusChanged(String s, int i, Bundle b) {
        }

        @Override
        public void onProviderDisabled(String s) {
            // try switching to a different provider
        }

        @Override
        public void onProviderEnabled(String s) {
            // try switching to a different provider
        }
    } 
```

或者位置管理器是否已经处理来自网络/gps 的位置更新，然后知道它何时在邻近区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:32:41.590

Nevermind, you do need it, but it can remain empty.

# windows-8 - 在页面导航上加载新数据

> ID：11979241
> 
> 赞同：0
> 
> 时间：2012-08-16T00:46:46.470
> 
> 标签：windows-8, microsoft-metro

嗨，我确定这是一个简单的问题，我只是遗漏了一些东西

到目前为止，我的应用程序下载了一个 JSON 文件，其中包含我用来填充分组项目页面的信息。

我想做的是当用户选择其中一个项目时，使用作为项目一部分的 URL 来加载另一个 JSON 文件，该文件包含有关已选择的特定项目的更多信息，然后使用中的信息此文件用于为项目详细信息页面创建数据，从分组详细信息页面转到项目详细信息页面时也是如此。

希望这是有道理的，如果您需要任何代码或更多信息，请问我

提前致谢，

克里斯·福克斯利-埃文斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:05:24.050

无论哪种方式，只需在从 Group/Item/Detail Page 导航时指定 page 参数。

```
private void ViewDetail_Click(object sender, RoutedEventArgs e)
    {
        FeedItem selectedItem = this.itemListView.SelectedItem as FeedItem;
        if (selectedItem != null && this.Frame != null)
        {
            this.Frame.Navigate(typeof(BasicPage), selectedItem);
        }   
    } 
```

其中 e 是您要在页面中传递的数据。

# php - PHP图像排序在本地工作，但不能在线

> ID：11979243
> 
> 赞同：0
> 
> 时间：2012-08-16T00:46:56.440
> 
> 标签：php, html

我只是 php 的初学者，并且有一个 PHP 脚本（我从 Internet 上的片段中组合而成），它可以从文件夹中获取缩略图和全尺寸图像。我希望图像按名称排序，但它们只在我的本地 MAMP 服务器上而不是在在线服务器上。我对两者都使用完全相同的 php 文件。

例如，3张图片（共12张）的在线顺序是“View window”、“40 Trees”、“Orphans Walking”，与本地排序是“40 Trees”、“Eva”、“For Caroline”，这就是我想要的。

```
 <?php

                $directory = 'images/slides/other/thumbnails';
                $link = 'images/slides/other/';

                $allowed_types=array('jpg','jpeg','gif','png');
                $file_parts=array();
                $ext='';
                $title='';
                $i=0;

                $dir_handle = @opendir($directory) or die("There is an error with your image directory!");

                while ($file = readdir($dir_handle)) 
                {
                    if($file=='.' || $file == '..') continue;

                    $file_parts = explode('.',$file);
                    $ext = strtolower(array_pop($file_parts));

                    $title = implode('.',$file_parts);

                    if(in_array($ext,$allowed_types))
                    {                                           

                    // Create a new row every four columns
                    if($i % 5 == 0 and $i != 0) 
                    {
                      echo "</tr><tr>";
                    }
                    echo '<td align="middle" valign="middle"><a class="fancybox-button" rel="fancybox-button" href="'.$link.'/'.$file.'" title="'.$title.'">
                                <img src="'.$directory.'/'.$file.'"/>
                                </a>
                            </td>
                            ';

                        $i++;
                    }
                }

                closedir($dir_handle);

                ?> 
```

谁能帮我吗？另外，我想知道是否有更简单的解决方案可以从文件夹中获取图像的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:05:35.760

您需要将所有文件名拉入一个数组，然后排序。

```
 <?php 

            $directory = 'images/slides/other/thumbnails'; 
            $link = 'images/slides/other/'; 

            $allowed_types=array('jpg','jpeg','gif','png'); 

            $aFiles = array();

            $dir_handle = @opendir($directory) or die("There is an error with your image directory!"); 

            while ($file = readdir($dir_handle))  
            { 
                if($file=='.' || $file == '..') continue; 

                $file_parts = explode('.',$file); 
                $ext = strtolower(array_pop($file_parts)); 

                $title = implode('.',$file_parts); 

                if(in_array($ext,$allowed_types)) 
                {                                            
                    $aFiles[] = $file;
                }

            } 

            closedir($dir_handle); 

            asort($aFiles);  // Use whichever sorting function suits you best!  http://www.php.net/manual/en/array.sorting.php

            $i=0; 
            foreach ($aFiles as $file) {

                $file_parts = explode('.',$file); 
                $ext = strtolower(array_pop($file_parts)); 

                $title = implode('.',$file_parts); 

                // Create a new row every four columns 
                if($i % 5 == 0 and $i != 0)  
                { 
                  echo "</tr><tr>"; 
                } 
                echo '<td align="middle" valign="middle"><a class="fancybox-button" rel="fancybox-button" href="'.$link.'/'.$file.'" title="'.$title.'"> 
                            <img src="'.$directory.'/'.$file.'"/> 
                            </a> 
                        </td> 
                        '; 

                    $i++; 
                } 
           }

            ?> 
```

注意：仅作为粗略示例；为了使它更好，将“爆炸”作为数组的一部分进行，以节省两次。未直接测试，因此您可能需要清理拼写错误。

# css - 输入上的CSS3插入/内部阴影？

> ID：11979244
> 
> 赞同：12
> 
> 时间：2012-08-16T00:47:12.413
> 
> 标签：css

有没有办法使用 CSS3 在文本输入框上获得插入/内部阴影？下面的插入代码只会做盒子

```
-moz-box-shadow:inset 0 0 10px #000000;
     box-shadow:inset 0 0 10px #000000; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T00:51:05.380

试试这个 - [http://jsfiddle.net/3TYTt/](http://jsfiddle.net/3TYTt/)

```
input {
    -webkit-box-shadow:inset 0 0 10px #000;
       -moz-box-shadow:inset 0 0 10px #000;
            box-shadow:inset 0 0 10px #000;

    background: transparent;
}​ 
```

# java - Java 编译器使用的是旧版本的源代码

> ID：11979245
> 
> 赞同：0
> 
> 时间：2012-08-16T00:47:12.380
> 
> 标签：java, javac

我遇到了一个非常烦人的问题，想象一下我编译了 FooBar.java 文件：

> $ javac FooBar.java

它编译成功，然后我像往常一样运行它：

> $ java FooBar < in.txt

我得到了预期的输出，交易是，如果我更改源代码（FooBar.java）以打印其他内容并再次编译它，我会得到与第一次相同的输出！

这真的让我很生气...... javac 有缓存吗？即使我删除 FooBar.class 并重新编译，我也会从早期源代码中获得输出。我发现解决这个问题的唯一方法是删除 FooBar.java 并创建一个具有不同名称的新文件（我只是复制粘贴了代码），这是可行的。

这个错误（？）真的困扰着我。我已经寻找解决方案或解释为什么会发生这种情况，但没有运气。

这似乎与我的问题有关，但并不完全因为我没有使用任何 IDE 并且 Classpath 指向我的工作文件夹： http: [//www.coderanch.com/t/519372/java/java/Executing-Old-Code](http://www.coderanch.com/t/519372/java/java/Executing-Old-Code)

我想找出导致这种情况的原因，因为我不想每次更新源代码时都创建一个新文件......我在 Windows 上使用 Java 1.6.0_27

谢谢阅读...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:00:04.177

有包装声明吗？自从您第一次编译它以来，您可能已经放入了一个包声明。如果你有 foo.bar 包，编译器将在 foo/bar/FooBar.class 中创建 .class 文件，你应该使用 .class 运行它`java foo.bar.FooBar`。如果没有包，它将创建 ./FooBar.class 并通过 ./FooBar.class 运行它`java FooBar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:06:51.080

问题不会是缓存。试试这个：

1.  查看 FooBar.class 文件上的时间戳（这就是 RUN）
2.  再次编译javac ...
3.  再次查看时间戳。它改变了吗？如果没有，你正在编译到某个地方。
4.  其他海报对包裹的评论可以解释这一点。也可以通过设置/更改您的类路径来解释

# python - 使用正则表达式和数学

> ID：11979246
> 
> 赞同：0
> 
> 时间：2012-08-16T00:47:23.447
> 
> 标签：python, regex

我试图从一个字符串中得到一些数学，没有小数它一切都很好，但是当我开始将它们添加到它停止工作时，它似乎并没有留下点在那里。我认为我的正则表达式是正确的，但有人可以纠正我吗？

```
result = re.findall('\d+\.?\d*\*\d+\.?\d*', e)
for x in result:
    lst = x.split("*")
    print lst
    e = e.replace(x, str(float(lst[0])*float(lst[1]))) 
```

因此，如果我输入`"1.0*1.0"`它应该以 1.0 出现，但它以 100.0 出现，这是因为正则表达式。

print lst 出来的是 ["10", "10"] 而不是 ["1.0", "1.0"] 所以我们可以说它不是在那之后的行。有任何想法吗？

我的理解是这`+`意味着一个或多个`?`意味着0或1并且`*`意味着0或更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:06:10.637

输入字符串仅以 10*10 的形式出现，所以我显然做错了什么，在另一个模块中，我在这里有这段代码，这是在我添加小数之前完成的......

```
acceptedChars = set(string.digits + "[]()+-/*^=!<>" + string.letters)
newL = ''.join([ x for x in e if x in acceptedChars])
e = newL 
```

这意味着`.`它将被删除，所以我需要重新添加它。所以现在我正在使用这段代码：

```
acceptedChars = set(string.digits + "[]()+-/*^=!<>." + string.letters)
newL = ''.join([ x for x in e if x in acceptedChars])
e = newL 
```

如果其他人能想到应该在其中的任何数学符号，那将在未来有所帮助。谢谢。

# birt - BIRT - 如何在生成的 pdf 文件上设置密码？

> ID：11979248
> 
> 赞同：3
> 
> 时间：2012-08-16T00:47:40.510
> 
> 标签：birt, birt-emitter

如何以`pdf`编程方式在生成的文件上设置密码？密码来自数据源（xml 字段）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-24T13:06:05.137

一个`pdf`-File 是从一个`birt-emitter`. 因此，您需要为现有（打开的）PDF-Emitter 编写扩展或编写一个全新的 PDF-Emitter，因为我认为默认 PDF-Emitter 中未实现此功能。

# actionscript-3 - AS3将孩子添加到影响精灵尺寸的精灵......奇怪

> ID：11979249
> 
> 赞同：2
> 
> 时间：2012-08-16T00:47:45.873
> 
> 标签：actionscript-3, flash, flash-cs5

我在 Flash 中有一个扩展 sprite 的“InvZone”类。这个想法是，这个类将创建一个 Sprite 子元素数组，计算并分配 x、y、width 和 height 属性给它们，然后按行添加它们（在参数中指定了多少行和子元素）。

精灵 (invZone) 及其子对象 (invWindow) 都在 Flash 库中。在那里，它们添加了符号以提供背景并确保它们的初始起始尺寸不为 0。

我的问题是 - 添加子项的行为似乎丢弃了 InvZone 实例的高度和宽度值。我希望如果孩子（行和列的总数）以某种方式超过了 InvZone 的初始尺寸，但我的代码应该阻止这种情况（除非我在某些问题上是代码盲）。

这是课程代码：

```
package pnc.gui {

import flash.display.Sprite;
import pnc.gui.InvWindow;

public class InvZone extends Sprite {

    public const PADDING_X:int = 5
    public const PADDING_Y:int = 5  
    public var invWindowArray = new Array();
    public var invArray = new Array();
    private var windows:int;
    private var rows:int;

    public function InvZone(inputX:int, inputY:int, inputHeight:int, inputWidth:int, inputWindows:int, inputRows:int) {
        //normally these would set by args, but today we'll set them by hand
        height = 100;
        width = 600;
        x=0;
        y=0;
        windows = 16
        rows = 3

        init()  
    }

    private function init() {
        var windowsPerRow:int = Math.ceil(windows/rows);
        var rowHeight:Number = (height - (2*PADDING_Y))/rows;
        var columnFullWidth:Number = (width - (2*PADDING_X))/windowsPerRow

        for (var i = 0; i<windows; i++) {
            var currentRow:int = Math.floor(i/windowsPerRow)
            var invWindow:InvWindow = new InvWindow();
            invWindowArray.push(invWindow);

            invWindowArray[i].x = (columnFullWidth * (i%windowsPerRow)) + PADDING_X;
            //trace("X:"+invWindowArray[i].x)

            invWindowArray[i].y = (rowHeight * currentRow) + PADDING_Y;
            //trace("Y:"+invWindowArray[i].y)

            invWindowArray[i].height = rowHeight - PADDING_Y;
            //trace("HEIGHT:"+invWindowArray[i].height)

            invWindowArray[i].width = columnFullWidth - PADDING_X;
            //trace("WIDTH:"+invWindowArray[i].width)

            trace(" ContainingSpriteHeight: " + height + " rowHeight: " + rowHeight + " currentRow: " + currentRow);
            if (invWindowArray[i]) {
                addChild(invWindowArray[i]);
            }
        }
    }       
}   
} 
```

这是跟踪：

```
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 0
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 0
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 0
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 0
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 0
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 0
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 1
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 1
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 1
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 1
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 1
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 1
 ContainingSpriteHeight: 100 rowHeight: 30 currentRow: 2
 ContainingSpriteHeight: 128.55 rowHeight: 30 currentRow: 2
 ContainingSpriteHeight: 128.55 rowHeight: 30 currentRow: 2
 ContainingSpriteHeight: 128.55 rowHeight: 30 currentRow: 2 
```

所以最后一行以某种方式推动了包含的精灵 - 但我不知道这是如何发生的。高度不是唯一受影响的值 - 包含的宽度可以用不同的变量放大。发生这种情况时，所有 InvWindow sprite 会一致地更改大小，但不会更改库中的原始背景符号。我尝试转移声明并添加 ADDED_TO_STAGE 侦听器，但没有任何变化。有人可以用线索棒打我吗？

更新：澄清：我不认为孩子的边缘应该超过包含精灵的边界 - 所以AFAIK它根本不应该扩展。Sanchez 已经修复了这个症状，但是包含 InvZone 扩展和拉伸 InvWindows 的原因是什么？

**带有解决方案的 UPDATE2：**根据 Sanchez 在下面的建议采取行动，看看可能会发生什么缩放 - 我意识到添加到库中的 invZone 以赋予它一个维度的背景精灵正在以意想不到的方式缩放，打破了界限。通过在代码中而不是在库中添加背景精灵，为其提供 h & w 类的参数并让它定义 invZone 的尺寸，问题就消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:20:49.403

如果我理解，您希望您的 InvZone 返回您设置的高度和宽度，而不是根据内容计算？

在这种情况下，您可以覆盖宽度和高度的 getter 以返回您的值。

代替：

```
height = 100;
width = 600; 
```

和：

```
_h = 100;
_w = 600; 
```

并添加：

```
private var _w;
private var _h;

override public function get height():Number 
{
   return _h;
}

override public function set height(value:Number):void 
{
   super.height = value;
}

override public function get width():Number 
{
   return _w;
}

override public function set width(value:Number):void 
{
   super.width = value;
} 
```

# python - 在 python 中使用 scapy 反向 dns 查找

> ID：11979250
> 
> 赞同：4
> 
> 时间：2012-08-16T00:47:47.237
> 
> 标签：python, scapy, reverse-dns

如何`scapy`在 Python 中使用反向 DNS 查找？我在 Google 中查找它，但找不到与此主题相关的内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T06:30:26.463

反向 DNS 已经写入 Python 的 Socket 模块。只需使用以下内容：

```
 >>> import socket
 >>> socket.gethostbyaddr("69.59.196.211")
 ('stackoverflow.com', ['211.196.59.69.in-addr.arpa'], ['69.59.196.211']) 
```

最初发布在这里，[Python lookup hostname from IP with 1 second timeout](https://stackoverflow.com/questions/2575760/python-lookup-hostname-from-ip-with-1-second-timeout)，由[https://stackoverflow.com/users/81179/christophed](https://stackoverflow.com/users/81179/christophed)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T20:28:13.943

好的。我找到了我的答案，我想在这里分享它，因为有人可能会寻找同样的东西。一行代码就足以在 scapy 中进行反向 dns 查询，即：

```
sr1(IP(dst="8.8.8.8")/UDP()/DNS(rd=1,qd=DNSQR(qname="211.196.59.69.in-addr.arpa", qtype='PTR'))) 
```

# linux - 在不支持别名的机器上替代 Linux 中的“别名”？

> ID：11979252
> 
> 赞同：0
> 
> 时间：2012-08-16T00:47:50.620
> 
> 标签：linux, alias

我正在一个相当锁定的集群上运行一些代码。我还在弄清楚我在这台机器上能做什么和不能做什么（例如，我不能编辑自己的 .bashrc，但我可以为 SSH 设置 RSA 身份验证）。

无论如何，集群似乎不允许使用`alias`. 当我这样做时`alias tinyName=/path/to/really_really_long_executable_filename`，键入命令`tinyName`给出`command not found`。

假设这`alias`是禁区，是否有任何替代方法可以`alias`让我避免`/path/to/really_really_long_executable_filename`每次都打字？

PS 我正在运行的机器是 NERSC Carver，我还没有找到在这个集群上哪些 Linux 命令是禁区的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:51:38.277

除了正确配置 shell 之外，您还可以创建别名“脚本”并将它们放入您的`PATH`. 这是次优的，但可能适合您的目标。

例如：

```
sudo sh -c "echo '/path/to/really_really_long_executable_filename' > /usr/local/bin/tinyname"
sudo chmod a+x /usr/local/bin/tinyname 
```

# vba - MS Access 过滤器连续表格

> ID：11979259
> 
> 赞同：1
> 
> 时间：2012-08-16T00:48:57.550
> 
> 标签：vba, ms-access

我需要使用从组合框中输入或选择的字符串来过滤连续形式。下面是我试图用来捕获过滤器字符串的代码。发生的情况是，当在列表中键入文本时，而不是在后面捕获字符串，而是抛出一个错误，指示组合框为 Null。

我把这个功能放在哪里？我正在考虑将代码添加到 Combobox_Selected 事件中，但这不会使用户能够键入任意关键字来进一步过滤表单的内容。

```
Private Sub txtUSPSKeySearch_Change()
On Error GoTo Err_txtUSPSKeySearch_Change
Dim searchStr As String

               searchStr = txtUSPSKeySearch.Value
                  If (Not IsNull(searchStr) And Len(searchStr) > 1) Then

                  Else

                    ' Move the cursor to the end of the combo box.
  Me.txtUSPSKeySearch.SetFocus
  Me.txtUSPSKeySearch.SelStart = Len(Me.txtUSPSKeySearch.Value)
                 End If

'Error Handling
Exit_txtUSPSKeySearch_Change:
    Exit Sub
Err_txtUSPSKeySearch_Change:
    If Err.Number = 5 Then
         MsgBox "You must make a selection(s) from the list" _
               , , "Selection Required !"
        Resume Exit_txtUSPSKeySearch_Change
    Else
        'Write out the error and exit the sub
        MsgBox Err.Description
        Resume Exit_txtUSPSKeySearch_Change
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:28:24.450

"*发生的情况是，当在列表中键入文本时，而不是在后面捕获字符串，而是抛出一个错误，指示组合框为 Null。* "

您声明`searchStr`必须是 String 数据类型：

```
Dim searchStr As String 
```

当`txtUSPSKeySearch`为 Null 时，此赋值将失败，因为 Null 不是字符串数据类型。

```
searchStr = txtUSPSKeySearch.Value 
```

当为 Null时，您可以使用该`Nz()`函数给出`searchStr`一个空字符串：`txtUSPSKeySearch`

```
searchStr = Nz(Me.txtUSPSKeySearch.Value, vbNullString) 
```

然后你可以改变这个`If`声明......

```
If (Not IsNull(searchStr) And Len(searchStr) > 1) Then 
```

对此...

```
If Len(searchStr) = 0 Then 
```

您正在从`txtUSPSKeySearch`更改事件中执行所有这些操作。考虑使用更新前事件来验证值，并使用更新后事件来执行您想要对有效值执行的任何其他操作（应用过滤条件？）。

# html - 在 quirks 模式下移除 ie9 周围的边框？

> ID：11979262
> 
> 赞同：3
> 
> 时间：2012-08-16T00:49:25.377
> 
> 标签：html, cross-browser, internet-explorer-9, quirks-mode

我想知道是否有任何解决方法可以使 2px 边框在 ie9 中消失，即使在怪癖模式下？以下是有关此问题的一些相关链接：

[删除 2px 灰色边框环绕边缘 IE9](https://stackoverflow.com/questions/11068543/remove-2px-gray-border-surrounds-edge-ie9)

[http://www.dasmirnov.net/blog/controlling-how-ie9-renders-pages](http://www.dasmirnov.net/blog/controlling-how-ie9-renders-pages)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:25:52.907

Add the following to your stylesheet:

```
html { border:none; } 
```

The border appears to be technically a default border around the `html` element, even though this cannot be seen in IE 9 inspector mode (F12), which shows 0px border for the element.

# javascript - 将 jQuery 选择器与 'this' 结合使用

> ID：11979264
> 
> 赞同：1
> 
> 时间：2012-08-16T00:49:47.377
> 
> 标签：javascript, jquery, jquery-selectors

我在组合这两个特定的选择器时遇到了一些麻烦，而简单的选择器没有同样的问题。

这是我通常使用的（结合 .btn 和 .toggle）：

```
$(".btn, .toggle").removeClass("on"); 
```

这些是我不能结合的两个（试图结合这个和#toggle + id attr）：

```
$(this).addClass("on");
$("#toggle" + $(this).attr("id")).addClass("on"); 
```

需要明确的是，我正在尝试组合上述 2 个选择器，因为它们做同样的事情（添加类），这是完整的代码。

```
$(".btn").click(function() {
    $(".btn, .toggle").removeClass("on"); 
    $(this).addClass("on");
    $("#toggle" + $(this).attr("id")).addClass("on");
}) 
```

而我正在尝试，那是行不通的：

```
$(this, "#toggle" + $(this).attr("id")).addClass("on"); 
```

我需要这样做的特殊方法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T01:08:57.227

您可以使用[`.add()`](http://api.jquery.com/add/)将元素添加到集合中：

```
$(this).add($("#toggle" + $(this).attr("id"))).addClass("on"); 
```

或者以更易读的方式：

```
var toggleId = "#toggle" + $(this).attr("id");
var $toggleElem = $(toggleId);
$toggleElem.add(this).addClass('on'); 
```

请注意，在这个例子中，变量`$toggleElem`本身没有被修改，它仍然只包含一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T00:54:56.103

我认为你需要一个`, #`

```
 $("#toggle, #" + $(this).attr("id")).addClass("on");
 //        ^ change here 
```

# c - 来自用户的 n 个整数的中位数

> ID：11979269
> 
> 赞同：1
> 
> 时间：2012-08-16T00:50:49.070
> 
> 标签：c

我似乎找不到错误，帮助：我正在尝试输入 n，然后输入 n 个整数。然后输出这 n 个整数的中位数。n 是奇数和正数。n 小于 100 万。

**样本输入** 5 37 28 21 44 49

**样本输出** 37

```
#include <stdio.h>
#include <stdlib.h>
#define INTEGERS 6

int numbers[6];

int compare(const void * a, const void * b) {
    return ( *(int*) a - *(int*) b);
}

int main() {
    int n, i;

    for (i = 0; i < 6; i++) {
        printf("Enter numbers:");
        scanf("%d", numbers[i]);

    }

    qsort(numbers, INTEGERS, sizeof (int), compare);
    for (n = 0; n < INTEGERS; n++) {
        printf("%d ", numbers[n]);
    }
    printf("\n%d ", numbers[INTEGERS / 2]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T00:57:41.223

Scanf 需要一个内存地址，而不是一个值。

尝试：

```
#include <stdio.h>
#include <stdlib.h>
#define INTEGERS 6

int numbers[INTEGERS];

int compare(const void * a, const void * b) {
    return ( *(int*) a - *(int*) b);
}

int main() {
    int n, i;

    printf("Enter numbers:");
    for (i = 0; i < INTEGERS; i++) {
        scanf("%d", &numbers[i]);
    }

    qsort(numbers, INTEGERS, sizeof (int), compare);
    for (n = 0; n < INTEGERS; n++) {
        printf("%d ", numbers[n]);
    }
    printf("\n%d ", numbers[INTEGERS / 2]);
    return 0;
} 
```

# grails - 不允许创建目录的可搜索插件

> ID：11979270
> 
> 赞同：0
> 
> 时间：2012-08-16T00:50:54.343
> 
> 标签：grails, plugins, searchable

我刚刚在 linux 机器上部署了一个 grails Web 应用程序，它也充当网络的防火墙。

我们使用 apache tomcat 网络服务器来运行网络应用程序，但它的可搜索插件似乎确实存在一些问题。在我的机器上运行，一切似乎都正常，但是当我尝试将它部署在防火墙服务器上时，它给了我一条消息，它没有创建必要目录的权限。

很抱歉，我无法显示实际的错误消息，但基本上我相信它没有创建目录的权限，而且我并不是真的要授予什么权限，以便 grails 应用程序可以做它的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:30:06.077

这在文档 ( [http://grails.org/plugin/searchable](http://grails.org/plugin/searchable) ) 中有描述 - 请参阅[http://grails.org/Searchable+Plugin+-+Configuration](http://grails.org/Searchable+Plugin+-+Configuration)。如果默认位置不适合您，请运行`install-searchable-config`脚本并将`compassConnection`属性设置为可以使用的位置。

# mysql - 如何在 MySQL 中为现有用户创建数据库？

> ID：11979275
> 
> 赞同：6
> 
> 时间：2012-08-16T00:51:46.927
> 
> 标签：mysql

我想为 MySQL 中的特定（现有）用户创建一个数据库。我怎么做 ？

我试过的 -

```
CREATE USER 'myuser' @'%' IDENTIFIED BY 'mypass';
CREATE DATABASE myuser.myDatabase; 
```

第二行是错误的。我找不到正确的语法。

请告诉我我的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T01:06:53.673

当我创建一个名为 test 的用户并在 phpmyadmin 中创建一个名为 test 的数据库时，它运行：

```
CREATE USER 'test'@'localhost' IDENTIFIED BY  '***';

GRANT USAGE ON * . * TO  'test'@'localhost' IDENTIFIED BY  '***' WITH MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0 ;

CREATE DATABASE IF NOT EXISTS  `test` ;

GRANT ALL PRIVILEGES ON  `test` . * TO  'test'@'localhost'; 
```

这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T01:31:11.087

我试过这段代码。好像没问题。

```
CREATE USER 'myuser'@'%' IDENTIFIED BY 'mypass';
CREATE DATABASE mydb;

GRANT ALL 
ON mydb.*
TO myuser; 
```

# python - 当不同用户的底层表更改时，MySQL 视图不会更新

> ID：11979276
> 
> 赞同：2
> 
> 时间：2012-08-16T00:51:48.907
> 
> 标签：python, mysql, mysql-python

我已经搜索过了，我似乎找不到任何东西。

情况如下：

*   t1 = 表 1
*   t2 = 表 2
*   v = 表 1 和表 2 的视图已连接

1.) 用户 1 登录到数据库。是否`SELECT * FROM v`；

2.) 用户 2 登录到同一个数据库并执行`INSERT INTO t1 VALUES(1, 2, 3)`；

3.）用户 1 在`SELECT * FROM v;`注销并重新登录之前，另一个用户 1 无法看到用户 2 插入的行。

似乎视图没有在“会话”之间同步？我怎样才能让用户 1 可以看到 INSERT？

仅供参考，我正在使用 python 和 mysqldb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:59:48.813

用户 2 可以简单地提交他们的事务，而不是注销并重新登录。

MySQL InnoDB 表使用事务，在一个或多个 SQL 语句之前需要一个 BEGIN，然后是 COMMIT 或 ROLLBACK，从而导致所有更新/插入/删除发生或不发生。但是有一个“功能”，如果没有明确发出，会导致自动 BEGIN，并且在连接关闭时会自动 COMMIT。这就是您在其他用户关闭连接后看到更改的原因。

你真的应该养成显式开始和提交事务的习惯，但还有另一种方法：设置 connection.autocommit = True，这将导致每个 sql update/insert/delete 都被包装在自己的隐式事务中，从而导致您最初预期的行为。

不要认为我上面所说的完全是事实正确的，但这足以解释正在发生的事情以及如何控制它的基本原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:24:02.847

它与使用 MySQL UPDATE 命令有关吗？ [http://dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)

# c++ - WM_SYSCOMMAND SC_MOVE 吃掉鼠标事件并且不会触发鼠标向上

> ID：11979278
> 
> 赞同：1
> 
> 时间：2012-08-16T00:51:57.733
> 
> 标签：c++, windows, atl, wtl

我的程序是一个无镶边窗口，当用户拖动我的对话框的任何部分时，我想移动窗口。一旦使用 WM_SYSCOMMAND，所有后续鼠标事件都将丢失。

首先，我编写了一个程序来捕获鼠标事件，并且所有的 WTL 都可以正常工作。

```
BEGIN_MSG_MAP(CMainDlg)
    MSG_WM_LBUTTONUP(OnMouseUp)
    MSG_WM_LBUTTONDOWN(OnMouseDown)
....
LRESULT OnMouseDown ( UINT uKeys, CPoint pt ) {
    print ("on mouse down");
    return 0;
}
LRESULT OnMouseUp ( UINT uKeys, CPoint pt ) {
    print ("on mouse up");
    return 0;
} 
```

然后我将上面的 onMouseDown 更改为，

```
LRESULT OnMouseDown ( UINT uKeys, CPoint pt ) {
    print ("on mouse down");
    this->SendMessageW(WM_SYSCOMMAND, SC_MOVE|0x0002);
    return 0;
} 
```

拖动工作正常，窗口随鼠标一起移动。但是，不再触发 OnMouseUp 事件。

使用 WM_NCHITTEST 尝试了许多不同的方法，或者将 ProcessMessage setHandled 设置为 true/false，但均未成功。

如果有人有任何建议，非常感谢:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:31:06.540

感谢您描述为什么要这样做，因为有一个更好的方法：[返回`HTCAPTION`以响应`WM_NCHITTEST`](https://stackoverflow.com/questions/7773771/how-do-i-implement-dragging-a-window-using-its-client-area).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T03:31:22.877

WM_SYSCOMMAND 的 DefWindowProc 处理程序将吃掉鼠标按钮向上消息，这就是您看不到它的原因。但是，在拖动完成之前，您的 SendMessage 调用实际上不会返回，因此您可以将其视为鼠标按钮向上的通知。

# python - 表示双向可遍历层次结构的最佳方法

> ID：11979280
> 
> 赞同：0
> 
> 时间：2012-08-16T00:52:04.810
> 
> 标签：python, parent, parent-child, hierarchy

我需要将一些数据表示为一个对象可以有一个父级和多个子级的层次结构。我还需要能够以与孩子相同的方式获得孩子的父母。

我试过这个

```
class Root():
    def __init__(self):
        self.child = Node(self)

class Node():
    def __init__(self, parent):
        self.parent = parent 
```

有没有解决这个问题的通用方法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T00:56:27.203

我认为这基本上是如何`Tkinter`做到的：

```
class Root(object):
    def __init__(self):
        self.children = []

class Node(object):
   def __init__(self,parent):
        self.parent = parent
        parent.children.append(self) 
```

现在，通过属性`Root`知道它的所有孩子`children`，孩子通过属性知道他们的父母`parent`。

```
r = Root()
n = Node(r)
r.children[0] is n  #True
n.parent is r  #True 
```

当然，你也可以通过给`Node`对象一个`children`属性来让事情变得更有趣——然后`Node`s 可以成为更多 s 的父`Node`级。整洁的。

这里有一些缺点（主要是循环引用）。如果您想避免这种情况，您可以使用`weakref.ref`s 来存储对孩子/父母的引用，但如有必要，我会将其推迟到另一个问题。

# jquery - JQuery 工具可滚动步骤不起作用？

> ID：11979282
> 
> 赞同：0
> 
> 时间：2012-08-16T00:52:18.843
> 
> 标签：jquery, carousel, jquery-tools, scrollable

我正在使用 JQuery 工具创建一个简单的图像/文本幻灯片（每行 5 个），工作正常，但每次移动 1 步，我将其设置为 5，但它不起作用。有什么线索吗？

[http://jsfiddle.net/L79La/3/](http://jsfiddle.net/L79La/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:27:27.747

我没有使用 jquery 工具中的可滚动插件，但是您可以尝试使用 size 值来查看它是否为您提供了所需的功能：

```
jQuery(".scrollable").scrollable({circular: true, size:5}).autoscroll({ 
        autoplay: false,
        interval: 3000,
        autopause: true,
        steps: 1
      });​ 
```

更新小提琴：http: [//jsfiddle.net/johnkoer/L79La/27/](http://jsfiddle.net/johnkoer/L79La/27/)

# objective-c - 如何发布 CTFramesetter？

> ID：11979283
> 
> 赞同：1
> 
> 时间：2012-08-16T00:52:23.040
> 
> 标签：objective-c, ios, core-graphics, core-text

我在我的应用程序中使用 CoreText，我有一个非常大的泄漏，但我无法找出它发生的原因。所以这是我的代码片段：

```
 _framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)_mAttributedString);

CFDictionaryRef frameOptionsDictionary = (CFDictionaryRef)[self frameOptionsDictionary];

_frame = CTFramesetterCreateFrame(_framesetter,
                                CFRangeMake(0, _mAttributedString.length),
                                path,
                                frameOptionsDictionary);

CFRelease(_framesetter), _framesetter = NULL; 
```

正如你所看到的，我正在释放我 CTFramesetter ......但是应用程序泄漏，并且仪器向我显示 CTFramesetter 导致了这种情况。那么我应该如何释放它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:37:32.683

0) 确保没有故障：

```
assert(_mAttributedString);
assert(0 == _framesetter);
_framesetter = CTFramesetterCreateWithAttributedString(
                             (CFAttributedStringRef)_mAttributedString);

CFDictionaryRef frameOptionsDictionary =
                   (CFDictionaryRef)[self frameOptionsDictionary];

assert(path);
assert(0 == _frame);
_frame = CTFramesetterCreateFrame(_framesetter,
                                CFRangeMake(0, _mAttributedString.length),
                                path,
                                frameOptionsDictionary);

CFRelease(_framesetter), _framesetter = NULL; 
```

# tsql - 具有 order by 的递归 CTE

> ID：11979289
> 
> 赞同：4
> 
> 时间：2012-08-16T00:53:29.633
> 
> 标签：tsql, recursion, sql-order-by, common-table-expression

我正在使用分层数据并使用递归 CTE 列出如下项目：

```
Eletronics
    Televisions
        Tube
        LCD
        Plasma
    Portable Electronic
        MP3 Players
            Flash
        CD Player
        Two Way Radios 
```

我的问题是：
如何按照标题排序并尊重层次结构？

像这样：

```
Eletronics
    Portable Electronic
        CD Player
        MP3 Players
            Flash
        Two Way Radios
    Televisions
        LCD
        Plasma
        Tube 
```

Tks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-23T21:15:04.963

这是正确的 CTE（仅适用于 asc）

```
;WITH CTE AS
(
SELECT  id, id_parent, name_product
        ,HierarchicalPath = CAST('\'+CAST(name_product AS VARCHAR(MAX)) AS VARCHAR(MAX)) 
FROM @tab where id_parent is null -- Starts with the first level

UNION ALL

SELECT  t.id, t.id_parent, t.name_product
        ,HierarchicalPath = CAST(c.HierarchicalPath + '\'+CAST(t.name_product AS VARCHAR(MAX)) AS VARCHAR(MAX))
FROM @tab t INNER JOIN CTE C
ON t.id_parent = C.id
)

select * from cte order by HierarchicalPath 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:57:58.743

这是我几乎完成了我想要的代码。现在的问题是按 desc 排序

```
declare @tab table(
    id int identity(1,1)
    ,id_parent int
    ,name_product varchar(100)
)

insert into @tab
select null, 'Eletronics'
union all
select 1, 'Televisions'
union all
select 2, 'Tube'
union all
select 2, 'LCD'
union all
select 2, 'Plasma'
union all
select 1, 'Portable Electronic'
union all
select 6, 'MP3 Players'
union all
select 7, 'Flash'
union all
select 6, 'CD Player'
union all
select 6, 'Two Way Radios'

;WITH CTE (id,id_parent,name_product,LEVEL,SORTKEY)AS
(
    SELECT id, id_parent, name_product, 1, CAST(name_product AS VARBINARY(MAX))
    FROM @tab where id_parent is null -- Starts with the first level

    UNION ALL

    SELECT t.id, t.id_parent, t.name_product, C.LEVEL + 1, CAST(C.SORTKEY + CAST(t.name_product AS VARBINARY(MAX)) AS VARBINARY(MAX))
    FROM @tab t INNER JOIN CTE C
    ON t.id_parent = C.id
)

select * from cte order by SORTKEY 
```

Tks

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-02T15:06:57.810

基于@onaiggac 的变体（您可以使用他的数据:-)）

```
;WITH CTE (id, id_parent, name_product, LEVEL, SORTKEY) AS
(
    SELECT id, id_parent, name_product, 1, 
        CAST(ROW_NUMBER() OVER (ORDER BY name_product) AS VARBINARY(MAX))
    FROM @tab where id_parent is null -- Starts with the first level

    UNION ALL

    SELECT t.id, t.id_parent, t.name_product, C.LEVEL + 1, 
        C.SORTKEY + CAST(ROW_NUMBER() OVER (ORDER BY t.name_product) AS VARBINARY(MAX))
    FROM @tab t 
    INNER JOIN CTE C ON t.id_parent = C.id
)

SELECT id, id_parent, REPLICATE('   ', LEVEL - 1) + name_product, LEVEL, SORTKEY FROM CTE ORDER BY SORTKEY 
```

这里的诀窍是使用

```
ROW_NUMBER() OVER (ORDER BY name_product) 
```

进行“内部”排序。就像在@onaiggac 中一样，然后将其组合成二进制文件`varbinary(max)`

```
CAST(ROW_NUMBER() OVER (ORDER BY name_product) AS VARBINARY(MAX)) 
```

然后递归添加...

```
C.SORTKEY + CAST(ROW_NUMBER() OVER (ORDER BY t.name_product) AS VARBINARY(MAX)) 
```

请注意，这`ROW_NUMBER()`将返回一个`bigint`... 您可以在将其转换为`int`之前将其转换为`VARBINARY(MAX)`，例如

```
CAST(CAST(ROW_NUMBER() OVER (ORDER BY name_product) AS INT) AS VARBINARY(MAX)) 
```

如果你真的想要......我认为除非你的树*真的*很深，否则没有必要。

# php - 是否可以在不编码的情况下保留 PHP $_GET vars 中的加号？

> ID：11979290
> 
> 赞同：10
> 
> 时间：2012-08-16T00:53:41.893
> 
> 标签：php, encoding, get

假设我请求此 URL：

[http://mydomain.com/script.php?var=2+2](http://mydomain.com/script.php?var=2+2)

$_GET['var'] 现在将是：“2 2”，应该是“2+2”

显然我可以在发送之前对数据进行编码然后对其进行解码，但我想知道这是否是唯一的解决方案。我也可以用加号替换空格，但我也想允许空格。我只是想要传递任何字符，而不需要进行任何 url 解码或编码。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T13:19:09.530

```
if(strpos($_SERVER["QUERY_STRING"], "+") !== false){
    $_SERVER["QUERY_STRING"] = str_replace("+", "%2B", $_SERVER["QUERY_STRING"]);
    parse_str($_SERVER["QUERY_STRING"], $_GET);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T00:56:34.893

当然。你可以读出`$_SERVER["QUERY_STRING"]`，自己分解，然后放弃通常的 URL 解码，或者只转换`%xx`占位符。

```
preg_match_all('/(\w+)=([^&]+)/', $_SERVER["QUERY_STRING"], $pairs);
$_GET = array_combine($pairs[1], $pairs[2]); 
```

（示例仅适用于字母数字参数，不进行上述 %xx 解码。只是分解原始输入。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T01:00:58.017

您可以使用`urlencode`，尽管这也会将任何空格转换为加号。这是有道理的，因为`+`URL 中的 a 通常代表一个空格。如果您确实需要一个加号来表示加号，您可能应该转义输入。这意味着 a`+`将成为`%2B`，您的 URL 将是`http://mydomain.com/script.php?var=2%2B2`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T01:11:37.113

在查询段中生成包含 a 的 URL 的`+`人都是错误的，除非他们打算用它来表示空格字符。查询中的A`+`是保留字符（re: [RFC2396 §3.4](https://www.rfc-editor.org/rfc/rfc2396#section-3.4)）。如果您需要`+`在查询字符串中插入文字，则必须将其编码为`%2B`（re: [RFC2396 §2.2](https://www.rfc-editor.org/rfc/rfc2396#section-2.2)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-17T08:04:59.247

为了将来参考，您可以在获取请求中显示“+”符号，而无需提交带有编码符号的 url。

```
PHP Version 5.3.8 
```

提交[http://mydomain.com/script.php?var=2+2](http://mydomain.com/script.php?var=2+2)

回声：

```
2+2 
```

使用以下代码：

```
<?php
echo urlencode($_GET['var']);
?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-28T20:22:30.903

执行此操作需要几个步骤。

*   只需在请求 url 之前将您的查询参数加号 (+) 替换为 url 中的 '%2B' 即可。

*   现在您将只检索查询参数。它将自动用加号替换“%2B”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-04T07:31:08.297

我只是习惯`urlencode()`了——嗯——对 URL 进行编码`urldecode($_Get())`并使字符串再次可用。

# java - 使用不同的事务属性调用 Spring Bean 的方法？

> ID：11979293
> 
> 赞同：0
> 
> 时间：2012-08-16T00:53:51.830
> 
> 标签：java, spring

如果具有某些事务属性的事务方法调用具有不同事务属性的同一 bean 的方法会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:47:24.257

使用 Spring 中的标准事务配置不会发生任何事情。从文档（查看[参考文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-declarative)以获取声明性事务管理的完整说明）：

> 在代理模式下（默认），只有通过代理传入的外部方法调用会被拦截。这意味着自调用，实际上是目标对象中的一个方法调用目标对象的另一个方法，在运行时不会导致实际事务，即使调用的方法被标记为@Transactional。

如果您需要在同一个 bean 上使用方法调用来更改事务行为（传播、只读状态等），您可以将事务模式更改为 AspectJ 并使用编译时执行（[查看此处](https://stackoverflow.com/a/11797230/1375049)如何执行此操作）。但我在实际实践中从未这样做过，只是为了测试。通常它是足够的默认事务设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:48:28.917

@Transactional 的 readOnly 属性有以下异常：

```
@Transactional(readOnly=true)
void methodA(){}

@Transactional
void methodB(){} 
```

如果您像这样调用该方法，并且使用 Hibernate 或其他 ORM 平台：

```
methodA();
methodB(); 
```

将抛出只读连接异常。

# proxy - 窗口中分布式文件共享系统的代理

> ID：11979298
> 
> 赞同：1
> 
> 时间：2012-08-16T00:54:31.123
> 
> 标签：proxy, distributed-system, windows-share

我们的应用程序部署在集群环境中，我们有五个服务器（节点）来服务应用程序。

并且数据源不是数据库，而是Windows中的共享文件系统。我们有两个文件服务器。

我们在每个节点的 web.config 中配置所需的文件/文件夹共享名。

这是[结构](http://i.stack.imgur.com/65J4f.png)。

如图所示，现在我们只支持单文件服务器。而且我们在另一台服务器上拥有所有数据的副本，如何同时使用它们？

我想知道http中是否有像nginx这样的代理（将请求分发到不同的后端）？我们在每个 web.config 中配置代理共享目录：

```
\\proxy\data 
```

然后`proxy`将请求重定向到不同的`file server`.

和解决方案？

# asp.net-mvc-3 - 使用 Ninject 时是否必须调用 kernel.Get 来实例化对象？

> ID：11979301
> 
> 赞同：1
> 
> 时间：2012-08-16T00:55:02.647
> 
> 标签：asp.net-mvc-3, c#-4.0, ninject

Ninject 的许多示例都非常非常基础。它要么只是一个控制器，要么他们在一个函数中创建内核和对象以用于演示目的。

所以出于某种原因，我认为你可以像正常一样实例化一个对象，Ninject 会拦截它并工作。例如：

```
public class foo 
{
    public foo(IInjectable injected)
    {
       //stuff
    }
} 
```

然后在另一个班级的某个地方你可以做：

```
var fooObject = new foo(); 
```

那么我应该改用 kernel.get 吗？

然后，如果我确实需要继续调用内核，我该如何将它传递给需要它的所有东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:02:12.293

如果您的应用程序设计得很好，那么您的应用程序中应该只`Kernel.Get`发生一个请求（通常通过类似的东西`Ninject.MVC3`）。通常这就是应用程序的根对象被实例化的地方（例如应用程序外壳的 MainViewModel）。所有其他类型只是在构造函数中声明它们的依赖关系，而不知道谁负责创建和管理它们的依赖关系。小例子

```
public class Main {
   // Somewhere
   var mainViewModel = Kernel.Get<MainViewModel>();
   mainViewModel.Initialize();
}

public class MainViewModel {
    ctor(ISectionViewModelFactory factory, ISectionViewModel sectionViewModel) {
    }

    public void Initialize() {
       // use injected factory etc.
    }
}

public class ApplicationModule : NinjectModule {

   public override void Load() {
      Bind<ISectionViewModel>().To<SectionViewModel>();
      Bind<ISectionViewModelFactory>().ToFactory(); // <-- requires factory extension
   }
} 
```

并且应用程序在不访问其他地方的内核的情况下自行构建。

请参阅该位[的工厂扩展](https://github.com/ninject/ninject.extensions.factory/wiki)`ToFactory()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:03:47.900

您的方法只有在您还注入*foo*时才有效（通常，开始将内核注入您的类不是一个好主意，因为它开始反转控制反转，可以这么说）。

没有上下文很难判断，但是假设您上面的代码包含在另一个类*bar*中。然后你会像这样继续：

```
public class bar
{
    foo _fooObject;

    public bar(foo fooObject)
    {
        _fooObject = fooObject;
    }
} 
```

然后当然会设置*foo的绑定，例如：*

```
Bind<foo>.ToSelf(); 
```

如果您需要在*bar中创建**foo*的多个实例，那么您可以使用工厂：

 *```
public class bar
{
    fooFactory _factory;

    public bar(fooFactory factory)
    {
        _factory = factory;
    }

    void baz()
    {
        foo fooObject = _factory.GetNew();
    }
} 
```*

# cocos2d-iphone - 如何根据点击的位置在按钮上调用不同的功能？(cocos2d, ios)

> ID：11979304
> 
> 赞同：0
> 
> 时间：2012-08-16T00:56:00.833
> 
> 标签：cocos2d-iphone

我有一个执行通用功能的按钮。但是，如果点击按钮的左下部分，我想调用不同的函数。我只是想问一下这样做的更好方法是什么？

我正在考虑覆盖 ccTouchesBegan 并获取点击它的位置并根据左下角的位置范围执行不同的功能。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:25:16.237

感谢 LearnCocos2D 的回答（作为对问题的评论）。

要回答这个问题：

*   为按钮的左下部分定义一个 CGRect。
*   然后使用 CGRectContainsPoint 来识别 UITouch 位置是否在矩形内。如果是，则调用function2。如果不是，则调用function1。

# c - 给定 C 中的字符串，我怎么知道它是用 ASCII 编码还是 Unicode 编码的？

> ID：11979306
> 
> 赞同：2
> 
> 时间：2012-08-16T00:56:18.923
> 
> 标签：c, string, unicode, encoding, ascii

给定 C 中的字符串，我怎么知道它是用 ASCII 编码还是 Unicode 编码的？

我们什么都不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T01:26:30.207

这实际上是一个深刻而微妙的问题。有一些简单的案例可以剔除。剩下的就不是那么容易了。

例如，如果字符串以 Unicode 字节顺序标记开头，则可以安全地假设该字符串是 Unicode。然而，并非所有 Unicode 字符串都以 BOM 开头。

如果字符串的每个字节都清除了第八位，那么可以安全地假设它是 7 位 ASCII。如果为真，那么它当然也是有效的 UTF-8。但它可以用很少见但定义明确的 UTF-7 编码，其中所有字节都保证只使用 7 位，为通信通道中的奇偶校验或其他损坏源留出空间。

您可以扫描字符串（或至少是字符串的前缀）并测试是否符合格式良好的 UTF-8。如果通过，它可能是 UTF-8。当然，它可能采用其他编码，只是碰巧符合。

扫描是否符合 UTF-16LE 或 UTF-16BE 也同样可行，但有相同的注意事项。

Raymond Chen[在他的博客中写过这个](http://blogs.msdn.com/b/oldnewthing/archive/2007/04/17/2158334.aspx)，从记事本应该如何处理文件的角度来看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:54:07.373

取决于您所说的“Unicode”是什么意思，它是一组字符及其属性的标准，而不是编码。Unicode 指定了几种编码，例如 UTF-8、UTF-16 和 UTF-32。

如果您想知道文本是 ASCII 还是 UTF-8，而这些是唯一的可能性，答案是它始终是 UTF-8，也可能是 ASCII（当且仅当它不包含大于 127 的字节时） .

如果它可能是 ASCII 或 UTF-16，如果它包含任何大于 127 的字节，您同样可以确定它是 UTF-16，但如果它只包含 0-127 范围内的字节，从技术上讲它可能是 ASCII 或UTF-16。您当然可以使用启发式方法来判断可能的字符/模式，并对预期的含义进行非常合理的猜测，除非文本非常短。

# matlab - 要索引的虚拟变量 - dummyvar 函数的逆？

> ID：11979309
> 
> 赞同：1
> 
> 时间：2012-08-16T00:56:34.010
> 
> 标签：matlab

我有一个虚拟变量矩阵，其中每一行都是 0，除了一个 1 表示该样本是哪个类的成员。例如`[1 0 0; 0 0 1]`表示第一个样本来自第 1 类，第二个来自第 3 类。我想要一个返回`[1; 3]`.

该功能`dummyvar`与我想要的相反。是否有不需要 for 循环的优雅解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T01:03:22.070

您可以使用该`find`命令。

```
dummy = [1 0 0; 0 0 1];
[idx,~] = find(dummy')
idx =
     1
     3 
```

*编辑*：为了保持更复杂假人的正确顺序，我们必须获取转置的行索引，而不是更直观的数组列索引。感谢@woodchips 发现了这一点！

# objective-c - 在 2D GLKit/iOS 游戏中实现滚动时的最佳实践是什么？

> ID：11979312
> 
> 赞同：0
> 
> 时间：2012-08-16T00:56:43.230
> 
> 标签：objective-c, ios, opengl-es, opengl-es-2.0, glkit

我设置了一个不错的场景，一切都渲染得很好，现在我想在世界上平移，类似于我如何使用 scrollToPoint() 调整 UIScrollView 或 CAScrollLayer 的原点。我已经确定我可以不断调整 GLKBaseEffect 上的 projectionMatrix 以改变我看到的内容，但我不确定这是否是适当的做事方式。

在其他代码中，我看到对 glViewport 等的调用，这*听起来*可能是正确使用的东西，但我不知道这个调用实际上做了什么，所以也许它只是一个红鲱鱼。

做这样的事情的典型方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T01:23:47.637

为此，您必须使用转换矩阵。换句话说，投影和视图矩阵是场景中的一种假相机，所以，如果你想滚动你的场景，你必须对世界（移动场景中的对象）或视图（移动场景）应用平移变换。相机）矩阵。

我向您推荐这本关于 OpengLS ES 的免费在线书籍：http: [//ofps.oreilly.com/titles/9780596804824/chmath.html](http://ofps.oreilly.com/titles/9780596804824/chmath.html)

# vim - MacVim 中的命令键

> ID：11979313
> 
> 赞同：17
> 
> 时间：2012-08-16T00:56:43.990
> 
> 标签：vim, macvim

如何在 MacVim 中使用命令键？例如，我希望能够按`Cmd``t`打开 CtrlP 或`Cmd``n`打开 NerdTree。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T03:16:33.947

见`:help <D-`。用于`<D-t>`映射到`⌘-T`; **但是**，`⌘-T`已经映射到 MacVim 菜单中的“新选项卡”。您必须删除它才能在 Vim 映射中使用它。

有些键是操作系统绑定的，您无法访问它们，但`⌘-T`可以使用它们，实际上是它们在帮助文件中使用的示例（请参阅`:help Actions.plist`并向上滚动几行至`4.`）。您需要取消设置“新标签”绑定

```
:macmenu File.New\ Tab key=<nop> 
```

然后`⌘-T`用映射`nnoremap <D-t> whatever`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T01:03:53.183

OS X 上的命令键在 Vim 中称为超级键，因此您可以执行以下操作：

```
map <D-t> :CtrlP<CR>
map <D-n> :NERDtree<CR> 
```

您可以在 中阅读有关不同键映射的更多信息`:help key-notation`。您不能将命令键用作引线，因为它不会*引导*命令，而是修饰符。

# python - 调整numpy或数据集大小的有效方法？

> ID：11979316
> 
> 赞同：3
> 
> 时间：2012-08-16T00:57:40.010
> 
> 标签：python, numpy, h5py

我想了解`resize()`function 对`numpy`array 与 an 的影响`h5py dataset`。在我的应用程序中，我正在逐行读取文本文件，然后在解析数据后写入`hdf5`文件。什么是实现这一点的好方法。我应该将每个新行添加到一个`numpy`数组中并继续调整numpy 数组*的大小（增加轴）**（最终将完整的 numpy 数组写入 h5py 数据集）*，还是应该直接将每个新行数据添加到内存中`h5py dataset`，从而调整`h5py dataset`内存的大小。`resize()`如果我们在每一行之后继续调整大小，函数如何影响性能？或者我应该在每 100 行或 1000 行之后调整大小？

每个数据集中可能有大约 200,000 行。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:43:50.543

我认为 resize() 会复制数组中的所有数据，如果你重复调用它会很慢。

如果要连续追加数据到数组中，可以先创建一个大数组，使用索引将数据复制进去。

或者您可以使用数组模块中的数组对象，它是一个动态数组，其行为类似于列表。将所有数据追加到数组对象后，您可以将其转换为 ndarray。这是一个例子：

```
import array
import numpy as np
a = array.array("d")
a.extend([0,1,2])
a.extend([3,4,5])
b = np.frombuffer(a, np.float).reshape(-1, 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:26:12.910

NumPy 数组不是为调整大小而设计的。这是可行的，但在内存方面很浪费（因为您需要创建第二个比第一个更大的数组，然后用您的数据填充它......这是您必须保留的两个数组）当然在时间方面（创建临时数组）。您最好从列表（或@HYRY 建议的常规数组）开始，然后在您有足够大的块时转换为 ndarrays。问题是，您何时需要进行转换？

# zeromq - ZeroRPC 发布订阅

> ID：11979319
> 
> 赞同：4
> 
> 时间：2012-08-16T00:58:03.850
> 
> 标签：zeromq, publish-subscribe, zerorpc

我想在我的服务器之间建立一个基于事件的系统。例如，当包装我的数据库逻辑的服务器更改状态时，我希望它通知我的其他服务器。发布/订阅设计似乎很适合这个，我听说过有关 ZeroRPC 的好消息。

有些人提到使用 zerorpc 流来完成发布/订阅，但是对我来说，使用流来触发事件如何工作并不明显。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T23:02:25.323

在 dotCloud，我们使用了大量的 pub/sub 槽 zerorpc 流。让我描述一下我们的做法。

### 总之

我们公开了一个用@zerorpc.stream 装饰的流方法。此方法在调用时会将 gevent.queue 添加到集合中。然后该方法将永远循环，产生到达队列的每条消息。当此方法终止时（因为客户端已断开连接），队列将从集合中移除。

要发布，只需将要发布的消息发布到集合中注册的每个队列上。这时你必须决定你想对慢消费者做什么（断开他们，为他们排队到一定的限制和/或丢弃新消息）。

## zerorpc-python 的实现示例：

### 订阅部分

```
class MyService(object):
    def __init__(self):
        self._subscribers = set()

    @zerorpc.stream
    def subscribe(self):
        try:
            queue = gevent.queue.Queue()
            self._subscribers.add(queue)
            for msg in queue:
                yield msg
        finally:
            self._subscribers.remove(queue) 
```

subscribe 方法只是将事件队列添加到集合中。然后永远使用队列，直到： - 队列由 StopIteration 消息结束（参见 gevent.queue.Queue 文档） - 运行订阅功能的 greenlet 被杀死（通常是因为客户端断开连接）

在这两种情况下，都将执行 finally 语句，并将队列从订阅者列表中删除。

请注意，此时可以限制队列的大小：`...Queue(maxsize=42)`.

### 出版部分

```
class MyService(object):
    [...]

    def _publish(self, msg):
        for queue in self._subscribers:
            if queue.size < 42:
                queue.put(msg) 
```

调用此方法发布消息。它将遍历所有订阅者队列以将消息放入其中。在我的示例中，如果队列达到特定大小，我将丢弃该消息。但是你想在那里应用什么样的模式是没有限制的。

您可以将订阅者的 greenlet 实例存储在集合中，然后在队列已满时将其终止，从而有效地断开慢速客户端（您甚至可以尝试发送消息通知客户端太慢）。您还可以等待所有消费者并行处理消息，然后从 _publish 等返回。朋友，我的朋友没有限制！

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T10:19:42.783

ZeroRPC 现在有一套完全不同的发布者/订阅者功能，它可以在网络上完美运行！

您可能有兴趣阅读 ZeroRPC 测试以获取有关如何使用它的更多提示，在本例中为 Publisher 和 Subscriber 类。[这是测试。](https://github.com/dotcloud/zerorpc-python/blob/master/tests/test_pubpush.py)

此外，ØMQ 文档中有很多关于发布者/订阅者模式的好信息等等。[你可以在这里找到它。](http://zguide.zeromq.org/page%3aall)

# c# - 获取数组的平均值

> ID：11979321
> 
> 赞同：3
> 
> 时间：2012-08-16T00:58:29.340
> 
> 标签：c#, arrays

我有一个任务，用户必须输入一个名字，然后是一个分数，然后重复这个过程直到他们完成，按 Q，然后数组将显示名字和分数，然后给出所有这些的平均值分数。我现在拥有的就是这个。

```
 static void inputPartInformation(string[] pl, double[] sc)
    {

        int i = 0;

        do
        {
            Console.Write("Enter The Player's Name: ");

            pl[i] = Console.ReadLine();

            Console.Write("Enter Their Score: ");

            sc[i] = double.Parse(Console.ReadLine());

        }
        while (pl[i++].CompareTo("Q") != 0);

    }

    static void displayParts(string[] pl, double[] sc)
    {
        int i = 0;
        while (pl[i].CompareTo("Q") != 0)
        {
            Console.WriteLine("{0,15}{1,6}", pl[i], sc[i]);
            ++i;
        }

    }

    static void Main(string[] args)
    {

        String[] players = new String[100];

        double[] scores = new double[100];

        inputPartInformation(players, scores);

        displayParts(players, scores);

        double average = scores.Average();
        Console.WriteLine("The Average is: {0}", average);

        Console.ReadLine();

    } 
```

当我尝试平均分数时，结果并不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T01:01:52.960

问题在于调用`Average`: 你正在平均所有内容，而不是`"Q"`对应`names`位置的所有内容。您将未写入的分数部分中的所有这些零相加，然后将其除以 100 - 整个数组的长度。

解决此问题的最简单方法是`"Q"`从方法中返回条目的位置`inputPartInformation`：

```
var count = inputPartInformation(players, scores); 
```

现在您可以使用 LINQ 的`Take`函数来获得正确的平均值：

```
double average = scores.Take(count).Average(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:06:51.357

我建议您计算已输入的分数（在变量中`N`）并使用该函数仅返回分数`.Take(N)`数组。`N`

例子：

```
double[] list = new double[100];
// assumed first N values are filled only.
// N = ...
list = list.Take(N).ToArray();

double average = list.Average(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T01:51:59.690

你必须使用数组吗？使用列表可能是更好的选择，因为只要他们不断添加分数，您只需将其添加到列表中即可。这样，当他们退出并且你去取平均值时，它不会包含任何未输入分数的 0。

# java - Java从用户那里获取用户输入

> ID：11979322
> 
> 赞同：0
> 
> 时间：2012-08-16T00:58:38.423
> 
> 标签：java, printing, input, java.util.scanner, system.out

```
import java.util.List;

import ShortHand.utilities.CollectionCreation;

public class MultipleChoice<Q,A,C>
{
    Q question;
    A answer;
    C choices;

    public MultipleChoice(Q q, A a, C c){
        question = q;
        answer = a;
        choices = c;
    }

    public Q getQuestion(){ return question;  }
    public A getAnswer(){ return answer;  }
    public C getChoices(){ return choices;  }

    public void addChoices(C c ){ choices = c; }
    public void addQuestion(Q q){ question = q; }
    public void addAnswer(A a){ answer = a; }

    public String toString(){
         return "Question: "+this.getQuestion()+ "\n"+
                "Choices: "+this.getChoices();
    }

    public static void main(String[] args){
        java.util.Scanner input = new java.util.Scanner(System.in);

        List<MultipleChoice<String,String,String>> mc = CollectionCreation.list();
        int numOfQuestions;
        System.out.print("Enter number of Question: ");
        numOfQuestions = input.nextInt();
        System.out.println();
        for(int i = 0; i< numOfQuestions; i++){
            System.out.println("Enter Question: ");
            String question = input.nextLine();
            System.out.println("Enter choices: ");
            String choices = input.nextLine();
            System.out.println("Enter Answer: ");
            String answer = input.nextLine();
            mc.add(new MultipleChoice(question,choices,answer));
        }

        for(MultipleChoice<String, String, String> items : mc)
            System.out.println(items+"\n");

    }
} 
```

我的问题是，当循环开始时，我似乎无法在“输入您的问题”下的问题本身中输入，其他人也是如此。知道为什么吗？

我所期待的是，一旦我单击输入，它将转到“输入选择”。

但似乎他们正在同时打印，因此让我无法回答“输入您的问题”我应该解决这个问题吗？

CollectionCreation 只是使用类型推断返回一个 arrayList()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:12:13.877

因为您正在阅读`System.in`，所以在您按 Enter 之前，扫描仪不会获得任何输入。因此，当您使用 仅读取一个 int 时`nextInt()`，缓冲区中会有一个额外的换行符未被读取，并且它会在下一次`input.nextLine()`调用中立即读取（这将是一个空的 String.

尝试将 nextInt() 更改为 nextLine()：

```
numOfQuestions = Integer.parseInt(input.nextLine().trim()); 
```

或者，您可以`reset()`在`nextInt()`通话后扫描仪。

# ftp - 通过 FTP 查找 cPanel 用户名和密码？

> ID：11979324
> 
> 赞同：0
> 
> 时间：2012-08-16T00:58:52.250
> 
> 标签：ftp, web-hosting, cpanel

我采用了一个没有人知道 cPanel 详细信息或谁实际托管它的站点。我可以与服务器交互的唯一方法是通过 FTP。

我知道这是一个很长的镜头，但有人知道我可以通过 FTP 检索/重置 cpanel 凭据的方法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T01:05:56.520

默认情况下，您的 cPanel 用户名/密码与您的主要 FTP 用户名/密码相同（除非您通过通过 cPanel 创建的辅助 FTP 用户登录）。

因此，如果您的 FTP 主机是 www.mywebsite.com，那么只需访问[http://www.mywebsite.com:2082](http://www.mywebsite.com:2082)并尝试使用您的 FTP 凭据登录。您的 cPanel 服务不太可能与您的 FTP 服务托管在不同的服务器上。

但要回答您的问题，不，不可能通过 FTP 重置或检索您的 cPanel 凭据。

要找出谁在托管该帐户，您可以对您的域名 ( [http://www.whois.sc/YOURDOMAINNAMEHERE.COM](http://www.whois.sc/YOURDOMAINNAMEHERE.COM) ) 执行 whois 并查看名称服务器。名称服务器（除非它们是匿名品牌的）通常会指示您托管的公司。

# jquery - ajaxsolr中的反向排序

> ID：11979326
> 
> 赞同：0
> 
> 时间：2012-08-16T00:59:10.657
> 
> 标签：jquery, sorting, solr

使用 ajaxsolr 并遇到浏览器兼容性排序问题。认为最好的方法是关闭 solr 排序并进行客户端控制。这是创建对象数组的代码以及我在反转排序方面的微弱尝试：

```
getFacetCountsMap: function (property) {
    var counts = [];
    for (var facet in this.manager.response.facet_counts[property] [this.field]) {
        counts.push({
            facet: facet,
            count:parseInt(this.manager.response.facet_counts[property][this.field][facet])
        });
    }
    return counts;
} 
```

我替换了'return counts; 具有以下内容：

```
counts:counts.sort(function(a, b){
 return b.count-a.count;
  });
 return counts;
 }, 
```

没有错误消息，但也没有排序。我在球场上还是不在比赛中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:36:07.153

您应该设置[facet.sort](http://wiki.apache.org/solr/SimpleFacetParameters#facet.sort) Solr 参数，而不是执行此客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:08:20.357

您的代码可能无法在 IE 中运行

```
counts = counts.sort(function(a, b){
     return (b.count - a.count) >0 ? 1 : -1 ;
}); 
```

你最好使用 1 & -1

# java - EJB 3 同一接口的多个无状态会话 Bean 实现

> ID：11979327
> 
> 赞同：2
> 
> 时间：2012-08-16T00:59:10.917
> 
> 标签：java, design-patterns, jakarta-ee, ejb-3.0

我想知道是否可以使用 EJB3 完成以下任务。

我有以下界面：

```
interface DateParser {
    Date parseDate(String input);
    String getType();
} 
```

然后，我有几个所述接口的实现，它们根据 getType 方法中给出的信息处理不同的格式。当我的 bean 启动时，它会创建一组 DateParser 的实现，当它需要解析一个日期时，它会遍历该集合以查看哪个匹配。如果一个匹配，它使用那个来解析日期。如果没有匹配，则应用默认策略。我想避免实例化这些委托，因为每次我添加一个新策略时，它都需要在 bean 中更改代码，从而使它变得一团糟。

我更希望容器注入它在部署时找到的所有实现。有没有合理的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:22:31.427

Implementation of this interface should be regular classes, not beans. EJB are meant to be business services. Parsing date is IMHO a responsabiltiy that is too fine-grained for a bean.

> I would much prefer to have the container inject all of the implementations it finds at deployment.

I don't think there is standard way to do that. I see only two options to dynamically fill the set with the instances:

1.  Use an external configuration files with list of class names. Reach each class name and instantiate one instance reflectively ([Class.forName](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#forName%28java.lang.String%29), [Class.newInstance](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#newInstance%28%29)). Then add it to the set.

2.  Iterate over all classes in the class path, identifiy those that are implementation of `DateParser`. Then instantiate it reflectively, and add it to the set. Note that iterating over loadable classes is kind of tricky, see [this answer](https://stackoverflow.com/a/1498134/217862).

> it requires a code change in the bean making it a huge mess.

That should require a code change in a class, but not the bean itself. The bean should delegate the creation of the set, the identification of the parser, etc. to another class, IMHO.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:28:20.930

是的，您可以，请参阅此示例；

```
 @EJB(beanName = "yourSessionEJB")
    DateParser dateParser; 
```

您可以将其他会话 bean 名称更改为**beanName**属性。但是建议使用一个本地接口使用一个会话 bean，不要混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-15T23:11:07.510

如果要获取某个接口的所有实现，可以使用 @Any 注释和 Instance 接口。

看看这个：[https ://goo.gl/Kbn0bP](https://goo.gl/Kbn0bP)

# windows - 使用 Log4j 时的记录延迟

> ID：11979328
> 
> 赞同：2
> 
> 时间：2012-08-16T00:59:20.247
> 
> 标签：windows, log4j, tomcat6, tomcat7

我在 Windows Server [2008] 上的 Tomcat6 中使用 log4j 进行日志记录。我已经正确定义了附加程序和记录器。org.apache 记录器的记录器已定义，我在日志中正确获取输出。问题是，部署的 webapp 的日志记录在输出中延迟。

当启动完成时，webapp 的整个日志记录会一次全部记录下来。在正常日志记录下（使用 tomcat 的 juli/logging.properties），日志记录语句会随着启动的进行而记录，但 log4j 日志记录不是这种情况。

对于另一个 webapp [使用 servicemix 组件]，日志记录工作正常并且没有延迟。我尝试将 BufferedIO 设置为 false [尝试将其设置为 true，仅用于检查] 和 ImmediateFlush [true 和 false，两者都尝试]，但结果仍然相同。

谁能帮帮我，我真的很困惑！

注意：我也尝试过使用 Tomcat7 并得到相同的结果，即日志记录延迟。

谢谢

诺曼 A.

# jquery - jQuery 动画仍然充当队列，即使 queue: false

> ID：11979330
> 
> 赞同：0
> 
> 时间：2012-08-16T00:59:26.047
> 
> 标签：jquery, jquery-animate

我目前正在制作一个小的淡入淡出子导航菜单。一切工作正常，除了当我鼠标悬停时，子导航菜单首先淡入，然后动画下来。我需要同时发生这种情况，所以我继续禁用队列，但由于某种原因它仍然会消失，然后按顺序动画：C。有趣的是：当我鼠标移出时，它会同时移动和消失！非常混乱。

```
$(document).ready(function(){
    $("ul.subNavMenu").fadeTo(0,0);
    $("ul.navMenu").hover(
        function() {
            $("ul.subNavMenu").animate({opacity: 1, marginTop: "20px"}, {duration: 1000, queue:false});
        },
        function() {
            $("ul.subNavMenu").animate({opacity: 0, marginTop: "0px"}, {duration: 1000, queue:false});
        }
    );
}); 
```

这是小提琴：http: [//jsfiddle.net/Hmvd3/2/](http://jsfiddle.net/Hmvd3/2/)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:03:29.580

你可以试试stop()。

```
$("ul.navMenu").hover(
        function() {
            $("ul.subNavMenu").stop().animate({opacity: 1, marginTop: "20px"}, {duration: 1000, queue:false});
        },
        function() {
            $("ul.subNavMenu").stop().animate({opacity: 0, marginTop: "0px"}, {duration: 1000, queue:false});
        }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:28:00.293

默认的缓动是*swing*。设置`easing: 'linear'`应该可以解决您的问题。

[http://jsfiddle.net/nickaknudson/Hmvd3/](http://jsfiddle.net/nickaknudson/Hmvd3/)

**资源**

*   [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# android - 尝试在 Kindle Fire 上安装 APK 时出现问题

> ID：11979336
> 
> 赞同：0
> 
> 时间：2012-08-16T01:00:09.940
> 
> 标签：android, kindle-fire

我正在尝试在 Kindle Fire 上测试我的应用程序。我按照这本书破解了 .ini 和 .inf 文件。我的电脑看到了 Kindle，但我按照书上的说明卸下（弹出）了 Kindle 并按下了 Kindle 上的断开按钮。

我是 eclipse 的新手，但我将运行配置设置为“设备”并尝试运行它。

我在控制台收到以下错误：

> [2012-08-15 17:51:19 - PS] 安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY
> 
> [2012-08-15 17:51:19 - PS] 请检查 logcat 输出以获取更多详细信息。
> 
> [2012-08-15 17:51:19 - PS] 在设备上启动失败：780C002600000001

logcat 很大。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:56:21.863

您的测试应用程序有一个`<uses-library>`元素引用了 Kindle Fire 没有的库。很可能，您正在尝试安装使用地图插件的应用程序，而 Kindle Fire 没有 Google 地图。

# c# - “不能通过实例引用访问；而是用类型名称限定它”帮助表示赞赏

> ID：11979337
> 
> 赞同：0
> 
> 时间：2012-08-16T01:00:21.440
> 
> 标签：c#

*固定的*

它在“form1.designer.cs”中的 6 个不同位置失败。它说我需要静态使用它，所以我将所有错误从“this.xxxx”更改为“form1.xxxx”并且它起作用了。不确定我是否完全理解我的所作所为......

*固定的*

对这里的编程相当陌生，只是在 C# 中处理一些基本的 OOP。我试图在我的 Button Click 事件中调用另一个类的方法。该方法传递一个参数，即用户输入的文本。我认为问题与静态方法有关，但参数是动态的，因为它是用户输入的。请帮帮我！

```
public partial class Form1 : Form
{
    string _yourName = textBox1.Text;

    public Form1()
    {
        InitializeComponent();
    }

    private void Button1Click(object sender, EventArgs e)
    {
        if (DogCheckBox.Checked)
        {
            AnimalNoise.Bark(_yourName);
        }

        if (CatCheckBox.Checked)
        {
            AnimalNoise.Meow(_yourName);
        }

        if (FishCheckBox.Checked)
        {
            AnimalNoise.Girgle(_yourName);
        }
    }
}

public class AnimalNoise 
{
    public static void Bark(String name) 
    {
        MessageBox.Show(name + " Bark");
    }

    public static void Meow(String name)
    {
        MessageBox.Show(name + " Meow");
    }

    public static void Girgle(String name)
    {
        MessageBox.Show(name + " Girgle");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T01:08:39.020

首先，`textBox1`在实际创建之前您无法访问。您应该在点击回调中捕获名称。我认为你看到的错误可能是因为在你的代码中的某个地方你有别的东西叫`AnimalNoise`你必须确保没有别的东西叫做 AnimalNoise 并将 AnimalNoise 放在它自己的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:21:57.057

您的确切问题没有明确说明，但我相信您从未设置过 textBox1.Text。在 ButtonClick 事件期间设置它。

```
 public Form1()
    {
        InitializeComponent();
    }

    private void Button1Click(object sender, EventArgs e)
    {
        string _yourName = textBox1.Text;

        if (DogCheckBox.Checked)
        {
            AnimalNoise.Bark(_yourName);
        }

        if (CatCheckBox.Checked)
        {
            AnimalNoise.Meow(_yourName);
        }

        if (FishCheckBox.Checked)
        {
            AnimalNoise.Girgle(_yourName);
        }
    }
} 
```

# excel - VBA 文本框日期格式

> ID：11979349
> 
> 赞同：1
> 
> 时间：2012-08-16T01:02:24.650
> 
> 标签：excel, vba

我有一堆控件、按钮、复选框等分散在 Excel 工作表中的一堆单元格上。我想用一个大的单个单元格中的控件替换所有这些混乱，这些控件链接到工作表单元格。除了日期之外，这一切似乎都很可能。如果我将文本框链接到包含日期的单元格，例如 =NOW()，则文本框会显示日期的内部表示，而不是用户看起来像日期的内容。文本框链接到的单元格被格式化为日期。

无论如何都会导致日期显示在链接到单元格的文本框中？

是否有一些代码可以添加到文本框中来执行此操作？

请注意，不涉及任何形式，只是工作表上的控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:13:46.353

我可能会误解，但您本质上想要一个可以显示日期的文本框？为了获得以下内容，我使用了一个 ActiveX 文本框，选择它并将公式从 更改`=EMBED("Forms.TextBox.1","")`为`=A1`：

![在此处输入图像描述](../Images/8562a26d75a4415bb3fcf37b17937f71.png)

这（到目前为止）反映了基础单元格中的格式。

# gwt - 无论 GWT 中包含什么类型，如何从 DataGrid 中提取字符串

> ID：11979350
> 
> 赞同：0
> 
> 时间：2012-08-16T01:02:29.777
> 
> 标签：gwt, datagrid, exporter

我正在编写一个通用的 DataGrid 到 Excel 导出器。我想做的是提取一个表示行的 ArrayList，对于每一行，我都有一个 Colomn 数组。所以基本上，我想提取一个`ArrayList<ArrayList<String>>`.

DataGrid 有一些方法，`dataGrid.getColumn(i)`但`dataGrid.getRowElement(i)`我找不到从特定单元格（行，列）获取字符串的任何方法。

任何的想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:22:56.903

您可以使用

```
dataGrid.getRowElement(i).getCells().getItem(j); 
```

您必须编写一个方法来提取所有数据并将其放入您的 ArrayList> 中。也许是这样的（请注意，这段代码是在没有任何 IDE 的情况下编写的）：

```
for(int i = 0; i < dataGrid.getRowCount(); i++){
  TableRowElement element = dataGrid.getRowElement(i);
  for(int j = 0; j < element.getCells().getLenght(); j++){
    list.add(element.getCells().getItem(j).toString();
  }
} 
```

希望这可以帮到你

# ruby - 使用 Mechanize (Ruby) 解析格式错误的 HTML

> ID：11979359
> 
> 赞同：0
> 
> 时间：2012-08-16T01:03:54.393
> 
> 标签：ruby, web-scraping, mechanize

我想处理一个包含大量 HTML 但本身不是有效 HTML 文件的 HTTP 响应。

我知道我可以按如下方式使用 Nokogiri： `page = Nokogiri::HTML.parse(page.body)`但是，我想访问`Mechanize`像`Mechanize::Page.search`. 有没有办法将此 HTML 作为[Mechanize::Page](http://mechanize.rubyforge.org/Mechanize/Page.html)或通过其他一些 Mechanize 类使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:23:17.713

实际上，看起来我已经找到了自己问题的答案：

```
 page  = Mechanize::Page.new(URI.parse('http://example.com'), {'content-type'=>'text/html'},(page.body), 200, agent) 
```

# lotusscript - 如何检索不存在的东西？

> ID：11979362
> 
> 赞同：0
> 
> 时间：2012-08-16T01:05:03.610
> 
> 标签：lotusscript

我有两个视图：view1 和 view2。

view1 包含 26 名员工 (AZ) 的列表。

view2 包含每个员工每天创建的文档列表（每个员工每天只能创建 1 个文档）。这些文档中的每一个都包含创建它的员工的姓名，以及它的创建日期（不是内置的笔记创建日期）。这意味着，对于 2012 年 1 月，员工 A 有 31 个文档，2012 年 2 月 - 29 个文档，依此类推，直到今天（2012 年 8 月 16 日 - 2012 年 8 月有 16 个文档）。

我目前的情况是，对于某些员工来说，缺少文档。例如，员工 A 在 2010 年 4 月 27 日缺少文档，员工 B 在 2011 年 5 月 12 日和 2012 年 3 月 4 日缺少文档，员工 C 等等。缺少的文档因每个员工而异。有些没有丢失的文档，有些缺少多达 10 个文档。

现在我想检索缺少文档的日期并将其放在文本文件中。假设上面的员工 B 在上述日期缺少 2 个文档，因此在我的文本文件中我将显示“员工 B - 5/12/2011,3/4/2012”。但是，如果一开始它甚至不存在，我该如何检索它呢？

到目前为止，我只想计算一段时间的日期范围，比如 2010 年 1 月 1 日到 2012 年 8 月 16 日。计算该范围内有多少天，然后计算员工的总文档数。如果总文档不等于该范围内的天数，则缺少一些文档。但我仍然需要在哪个日期丢失文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:54:37.127

您知道 LotusScript 中的 List 数据类型吗？我认为您应该创建一个涵盖日期范围的详尽的布尔值列表。即，该范围内的每一天都有一个列表条目，日期作为列表标签，条目值指示是否找到了文档。您从一个初始化的列表开始，以便每个日期都是错误的：

```
Dim theDate As New NotesDateTime("1/1/2005")
dim endDate as New NotesDateTime("8/16/2012")
dim foundDates List as Boolean

While theDate.Timedifference(endDate) <= 0
  foundDates(theDate.dateOnly) = false
wend 
```

您可能希望在函数中使用上述代码，以便可以为每个员工重新初始化列表。

现在，您需要代码遍历您的员工的一名成员的所有文档。从文档中读取日期项，并将相应的列表条目更改为 true。

```
dateObj = new NotesDateTime(doc.getItemValue("dateFieldName"))
foundDates(dateObj.dateOnly) = true 
```

在遍历员工的文档后，您将拥有一个列表，其中包含找到的每个文档的日期为 true，而每个未找到的日期为 false。

现在，您现在可以使用 forall 来输出未找到的日期列表，只需检查仍然为假的条目即可。

```
print #textfile, StaffName;
ForAll dateEntry in foundDates
   if dateEntry = false then
      print #textfile, listtag(dateEntry)
   end if
End ForAll
print #textfile, 
```

将上述所有内容包含在所有工作人员的循环中，确保在处理每个工作人员的文档之前将 foundDate 列表中的所有条目重新初始化为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T02:56:22.627

我认为解决此问题的最佳方法是遍历每个工作人员的日期范围并输出缺失的日期。

假设您正在考虑 lotusscript，例如（未经测试，视图的索引和日期的存储方式可能会导致问题）。

```
Sub Initialize
    Dim session As New NotesSession
Dim db As NotesDatabase
Dim viewStaff As NotesView
Dim viewDocs As NotesView
Dim docStaff As NotesDocument
Dim docDoc As NotesDocument
Dim keys(1) As String
Dim startDate As New NotesDateTime("1/1/2005") 'Start date of Range
Dim endDate As New NotesDateTime("1/1/2010") 'End date of Range  
Dim tempDate As NotesDateTime

'Initialise Views
Set db = session.currentDatabase
Set viewStaff = db.GetView("StaffView")
Set viewDocs = db.GetView("DocsByStaff")

'Iterate over staff to process
Set docStaff = viewStaff.Getfirstdocument()
While Not docStaff Is Nothing
    'Search for daily docs for this staff member (this will need a view indexed on the staff member name, then the date)
    keys(0) = docStaff.Fullname(0) 'Or whatever this item is called

    Set tempDate = startDate
    While tempDate.Timedifference(endDate) <= 0 'Go over each date up to and including the end date
        keys(1) = tempdate.Dateonly
        Set docDoc = viewDocs.getDocumentByKey(keys) 'Search for date using current user and date
        If docDoc Is Nothing Then 'Haven't found it
            Print "Can't find document for " + keys(0) + " on " + keys(1) ' Could output to file or something here.
        End If
        tempDate.Adjustday(1) 'Roll forward another day
    Wend

    Set docStaff = viewStaff.getNextDocument(docStaff) 'Next staff member
Wend

End Sub 
```

可能不是最有效的方法，但如果它只是偶尔出现并且您没有太多文档，那么这种方法就足够了。

# iphone - iOS 中的通讯录

> ID：11979373
> 
> 赞同：1
> 
> 时间：2012-08-16T01:07:54.513
> 
> 标签：iphone, ios, xcode, addressbook, vcf-vcard

我在当前的应用程序中使用通讯录时遇到问题。该应用程序应该能够让用户删除和恢复已删除的联系人。

为了恢复联系人，我想使用存档和 NSCoding 方法将 vCard 的副本保存到每个“人”对象，并将其保存到磁盘。这样我就可以用 vCard 作为 NSData 属性来拉出“人”对象图。

我的问题是由于 vCard 不支持 NSCoding，是否可以将 vCard 包装到 NSData 并在 NSCoding 协议中的编码和解码方法中使用它？

多谢你们！

# objective-c - 查询谷歌的纬度/经度需要很长时间，使得 UIViewController 需要永远加载

> ID：11979374
> 
> 赞同：0
> 
> 时间：2012-08-16T01:08:14.030
> 
> 标签：objective-c, ios, mkmapview, xcode4.3

我正在向 Google 查询地图视图的纬度/经度点。这可能需要很长时间，具体取决于用户在应用程序中输入了多少地址，因为地图会查看所有地址。我还在`for`循环中的查询之间引入了一个短暂的延迟，以确保谷歌给我很好的结果（如果你查询得太快，它不会给你有效的纬度/经度点，而是 0,0）。

因为这需要很长时间，一旦用户按下按钮进入这个`UIViewController`需要很长时间，我担心用户会认为应用程序坏了。理想情况下，我希望 ViewController “显示”，但有一个地图（最初没有注释），在地图上带有一个动画活动指示器，直到它完成查询，然后加载注释。这样，用户可以在等待地图加载时查看视图上的其他信息。

这是我的代码：

```
- (void) viewDidLoad {
    [mapScroll startAnimating]; // activity indicator outlet
    [self makeMap];
    // ... etc.
}

- (void)makeMap {
allRegions = [[NSMutableArray alloc] init];
[self getDistinctRegions]; //generates allRegions array

double maxLat = -90;
double maxLon = -180;
double minLat = 90;
double minLon = 180;

for (int i=0; i<[allRegions count]; i++) {
    NSString *tempString = [allRegions objectAtIndex:i];
    NSString *searchString = [tempString stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
    NSString *queryURL = [[NSString alloc] initWithFormat:@"http://maps.google.com/maps/geo?output=csv&q=%@",searchString];
    NSString *queryResults = [[NSString alloc] initWithContentsOfURL: [NSURL URLWithString:queryURL] encoding: NSUTF8StringEncoding error:nil];
    NSArray *queryData = [queryResults componentsSeparatedByString:@","];

    if ([queryData count] == 4) {
        double latitude = [[queryData objectAtIndex:2] doubleValue];
        double longitude = [[queryData objectAtIndex:3] doubleValue];

        if (latitude > maxLat) maxLat = latitude;
        if (latitude < minLat) minLat = latitude;
        if (longitude > maxLon) maxLon = longitude;
        if (longitude < minLon) minLon = longitude;

        CLLocationCoordinate2D coordinate;
        coordinate.latitude = latitude;
        coordinate.longitude = longitude;

        MKPlacemark *marker;
        marker = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
        [mapView addAnnotation:marker];

        NSLog(@"%d",i);

        [NSThread sleepForTimeInterval:0.12];
    }
}

MKCoordinateRegion overallRegion;

double latSpan = abs(maxLat - minLat);
double lonSpan = abs(maxLon - minLon);
double avgLatitude = (maxLat+minLat)/2;
double avgLongitude = (maxLon+minLon)/2;

overallRegion.center.latitude = avgLatitude;
overallRegion.center.longitude = avgLongitude;
overallRegion.span.latitudeDelta = latSpan;
overallRegion.span.longitudeDelta = lonSpan;

[mapView setRegion:overallRegion animated:YES];

[mapScroll stopAnimating];
mapScroll.hidden = TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:12:59.373

嗯，快速而肮脏的解决方案，但这是一般过程：

1) 当用户按下 Go 按钮时，你分配初始化你的下一个视图控制器

2) 假设您有一种下载纬度/经度信息的方法和一种渲染图钉的方法，在您的下一个视图控制器的 viewDidLoad 方法中，您可以执行以下操作：

```
-(void)viewDidLoad
{
    ....
    [self performSelectorInBackground:@selector(downloadMapData) withObject:nil];
}

// your download map data method
-(void)downloadMapData
{
    // download data from Google API. I assume you know how to do this part.

    // when done, add map annotation points to map on the main thread
    // interface changes must be done on the main thread
    [self performSelectorOnMainThread:@selector(addPinToMap)];
} 
```

# jquery - jQuery解析期间显示的空白页面

> ID：11979376
> 
> 赞同：2
> 
> 时间：2012-08-16T01:08:27.977
> 
> 标签：jquery, html, xml

我写了这个 XML 文件：

```
<!--bookstore.xml -->
<?xml version="1.0"?>

<!DOCTYPE reviews SYSTEM "bookstore.dtd">

<bookstore>
<location>Port Credit</location>
<address intersection="Hurontario And Lakeshore"/>
<book id="1000">
    <title> Intro to C</title>
    <copies>5</copies>
    <author name="John Fingle"/>
    <author name="Carrie Dingle"/>
<price>20.95</price>
</book>
<book id="1001">
    <title>C for Rocket Scientists</title>
    <copies>3</copies>
    <author name="Robert Johnson"/>
    <author name="B. King"/>
<price>28.95</price>
</book>
<book id="1011">
    <title>Les Miserables</title>
    <copies>5</copies>
    <author name="Victor Hugo"/>
<price>24.95</price>
</book>
</bookstore> 
```

我正在尝试使用这个 jQuery 方法来解析它

```
 $(document).ready(function() {

        $.ajax({
        type : "GET",
        url : "bookstore.xml",
        dataType : "xml",
        success : processXml
        });
    });
function processXml(xml)
{
  var name = $(xml).find('location').text();
    $('#nameDiv').html(name);
} 
```

这是我的 HTML 页面，

```
<title>Untitled Document</title>
</head>
<div id="nameDiv">

</div>

<body>

</body>
</html> 
```

我检查了我的 XML、HTML 和 jQuery 方法，似乎没有任何错误。但它仍然没有将值附加到 div 并显示一个空白页。可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:13:56.007

```
$(xml).find('location')[0].text(); 
```

应该给你你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:47:51.173

这里是：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>
   $(document).ready(function() {

        $.ajax({
        type : "GET",
        url : "bookstore.xml",
        dataType : "xml",
        success : processXml
        });

function processXml(xml) {
  $("#nameDiv").html($(xml).find("location").text());
}
});
</script>
<title>Untitled Document</title>
</head>
<body>
<div id="nameDiv">

</div>
</body>
</html> 
```

# ios - iOS 单元测试失败 - 无法访问 KeyChain

> ID：11979379
> 
> 赞同：0
> 
> 时间：2012-08-16T01:08:46.457
> 
> 标签：ios, xcode, testing, keychain, appcode

我正在尝试为我正在创建的 iOS 框架编写单元测试。在幕后，它使用 Nuance 的 Dragon Mobile SDK。当我在 Jetbrains 的 AppCode 中运行单元测试时，出现以下错误：

```
2012-08-15 17:43:48.874 otest[62547:707] *** Assertion failure in -[KeychainManager writeToKeychain], /checkout_120606-1556/NMSPClient/sdk/c/trunk/solutions/iPhone/NMSP/../../../source/oem/iphone/src/KeychainManager.m:285

Couldn't add the Keychain Item.
Unknown.m:0: error: -[NuanceVoiceRecognizerTest testExample] : Couldn't add the Keychain Item. 
```

当我在 XCode 中运行测试时，它工作正常。事实上，XCode 启动了模拟器来运行测试，而 AppCode 似乎不需要/不需要。

现在，Nuance 位相关的原因是，当我设置它时，它试图用钥匙串做一些事情：

```
[SpeechKit setupWithID:@"<snip>"
    host:@"sandbox.nmdp.nuancemobility.net"
    port:443
    useSSL:NO 
    delegate:self]; 
```

现在我知道一个答案就是在 XCode 中运行测试。但考虑到它在代码编辑方面的原始性，我对 XCode 的使用非常困难。更重要的是，我在这里遗漏了一些关键概念，这让我很恼火。

问题是：当单元测试运行时，可能缺少什么会导致我的代码无法访问密钥库？任何人以前都遇到过这种事情，即使是在 XCode 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T07:14:00.610

如果它们尚未设置，您可以尝试编辑单元测试目标的 BUNDLE_LOADER 和 TEST_HOST 构建设置以指向您的应用程序包（可能类似于 $(BUILT_PRODUCTS_DIR)/AppName.app/AppName）。

我的想法是钥匙串访问大概（我没有使用过）需要在正在运行的应用程序中进行。这两个设置是使 OCUnit 单元测试在应用程序进程中运行的原因（即，在 Apple 的术语中，使它们成为“应用程序测试”而不是“逻辑测试”）。

Xcode*在项目向导*中设置的单元测试包设置为应用程序测试，但随后添加的测试包是逻辑测试。如果您稍后添加了单元测试目标，则它可能没有上述构建设置。

至于 Xcode 为何按原样运行测试：从我的测试来看，Xcode 似乎总是启动模拟器，并在主应用程序中运行测试，而不管包加载器和测试主机设置如何。根据[Apple 的文档](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html#//apple_ref/doc/uid/TP40002143-CH3-SW5)，我认为这是不正确的行为，但它似乎就是这样做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:33:10.697

Here is the AppCode's forum discussion: [http://devnet.jetbrains.net/message/5466009#5466009](http://devnet.jetbrains.net/message/5466009#5466009)

# mathjax - 实时 MathJax 编辑器

> ID：11979382
> 
> 赞同：8
> 
> 时间：2012-08-16T01:09:24.823
> 
> 标签：mathjax

我知道 MathJax 和 MathQuill。

但是，我想知道是否有人采用了 MathJax，撕掉了 API，并用它构建了一个实时数学编辑器？

谢谢！

# java - 我的 java 程序可以使用磁盘作为一个巨大对象的堆吗？

> ID：11979387
> 
> 赞同：1
> 
> 时间：2012-08-16T01:10:23.513
> 
> 标签：java, object, memory, heap-memory

我想使用 java 来处理最终超过 100 GB 的数据结构。我需要以 1:1 的比例从事物中读写，每秒尽可能多的次数。在 Java 形式中，它是一个 HashMap>。我可以像在 RAM 中一样在磁盘中保存和操作它吗？这可以兼作持久性方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:18:11.860

这里有“缓存”包可以帮助你。想到了 Ehcache。它将允许您创建一个缓存，该缓存在内存中存储有限的对象，并将其他对象溢出到磁盘。这一切都是在幕后完成的，所以您所要做的就是从缓存中获取/放入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:15:36.713

你可以，但你可能想先了解访问模式。如果您正在随机寻找很多并且您没有使用 SSD，那么您将需要等待每个 IO 毫秒。如果您只在某些区域内寻找，您可能只想将这些部分放入内存中。尝试将其数据组织成尽可能集中在您的访问模式上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T02:03:25.480

不，您不能在 Java 中将磁盘文件用作堆。您可以将文件映射到地址空间，但它不会成为堆的一部分；即，您将无法使用它来保存常规 Java 对象。

最简单的方法（如果你有足够的 RAM 并且运行 64 位操作系统和 64 位 JVM）是​​简单地给 JVM 一个巨大的堆。但我想这不是你的选择。所以你的选择将是：

*   使用传统数据库
*   为 Java 使用现有的现成数据缓存产品
*   尝试滚动您自己的数据缓存。

# android - Android：可以在布局上使用 DP 并使其在不同设备上看起来相同吗？

> ID：11979388
> 
> 赞同：1
> 
> 时间：2012-08-16T01:10:32.373
> 
> 标签：android

我将逐步解决我的问题，以便更容易理解/回答。

第 1 步：根据[Android 开发者指南](http://developer.android.com/guide/practices/screens_support.html**)，“与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素”。这意味着在具有 233 dpi 的 Galaxy S 上，1 dp 等于 1.46 个物理像素 (233/160)。

第 2 步：鉴于 Galaxy S 的分辨率为 480x800，这意味着其屏幕高度为 548dp（800 物理像素除以 1.46）。因此，如果我将我创建的 LinearLayout 的高度设置为 274dp，它将恰好占据屏幕的一半。我测试过，它有效。

第 3 步：Galaxy S3 具有 306 dpi，因此该设备 1dp = 1.9125 物理像素 (306/160)。由于它的分辨率为 720x1280，其屏幕高度为 670dp (1280/1.9125)。同样，如果我制作一个大约 335 的 LinearLayout，它将占据屏幕的一半。测试和工作。

**问题**：如何使用与密度无关的像素制作一个在 Galaxy S 和 Galaxy S3 上占据一半屏幕的 LinearLayout？因为如果我使用 274dp，它只会在 S 上占据一半的屏幕，反之亦然。还是我的计算在任何步骤中都错了？

**更新**：考虑一下我想出了以下想法：使用“ScreenMetrics”来获取设备的 dpi 和屏幕分辨率。然后让我的应用程序以 DPs 计算屏幕的总大小（这将是分辨率除以（设备的 dpi/160），然后将布局的高度动态设置为其中的一半。很多工作，但是我想这是这样做的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T14:25:13.153

使用一个`LinearLayout`包含一个空的`View`，然后是你的真实内容，然后是另一个空`View`。将空视图设置为`android:layout_height="0dp" android:layout_weight="1"`并将您的内容设置为`android:layout_height="0dp" android:layout_weight="2"`。现在封闭`LinearLayout`将给你的内容一半的高度，在屏幕的中心，而空视图的另一半（在它们之间平均分割）。如果您希望您的内容仅位于屏幕的上半部分（或下半部分），而不是中心，请删除其中一个空视图并使用`android:layout_weight="1"`.

如果您尝试使事物相对于屏幕适合，请始终使用这样的结构。您应该只`dp`对较小的固定尺寸（如边距或图标高度）使用测量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:14:21.140

在星系 S 上，dp 为 1.5

```
ldpi: 1dp = 0.75px
mdpi: 1dp = 1px
hdpi: 1dp = 1.5px
xdpi: 1dp = 2dp 
```

真正的 px 将是 `(int)(density * x + 0.5)

你可以让你 dp

```
getResources().getDisplayMetrix().density. 
```

# python - 如何制作一个更慢的计时器？（Python）

> ID：11979389
> 
> 赞同：0
> 
> 时间：2012-08-16T01:10:39.363
> 
> 标签：python, timer, counter

我对使用 Python 还很陌生，我正在尝试设置一个命中计时器，以便在我的游戏中，当我的玩家被击中时，需要等待几秒钟才能再次被击中。

我以为我可以做类似的事情：

```
while hitTimer > 0:
    hitTimer -= 1 
```

并且被击中会将计数器重置为`10`，并要求计数器`> 0`能够再次被击中，但它的速度很快。

我尝试使用非常小的数字，`-= .00005`但这只会让我的程序滞后。

我怎样才能使它每秒带走 1 或类似的东西？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T01:17:18.700

为了准确检查 10 秒，请执行以下操作：

```
import time
# record when person was first hit.
previousHit = time.time()

if time.time() - previousHit > 10:
    # The rest of your logic for getting hit.
    previousHit = time.time() # Reset the timer to get the hit again. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T01:13:20.803

用于`time.clock()`检查时间和`time.sleep()`等待。

永远不要依赖 CPU 速度来计时代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T01:13:37.737

您只需记录某人被击中的时间，使用`time.time()`：

```
import time

lastHit = time.time() 
```

然后将当前时间与`lastHit`：

```
if time.time() - lastHit > NUMBER_OF_SECONDS:
  # ... do seomthing about getting hit ...
  lastHit = time.time() 
```

# javascript - JS/Jquery - 如果输入具有任何数组名称，则返回关联值

> ID：11979390
> 
> 赞同：0
> 
> 时间：2012-08-16T01:10:47.803
> 
> 标签：javascript, jquery, foreach, associative-array

这是我昨天问的一个[问题](https://stackoverflow.com/questions/11965183/if-input-contains-any-word-in-array/11965237#comment15946964_11965237)的延续，我问了如何确定输入是否与数组元素的任何部分匹配（'sun' & 'sunday' = 'sun'）。这是解决方案。

```
var _array = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];

for (var i = 0; i < _array.length; i++) {
    if (_val.indexOf(_array[i]) != -1) {
        $('span').text('it worked');
        return;
     }
}

$('span').text('nothing'); 
```

然而，我刚刚意识到，如果为真，我需要将它与关联数组中的全名值匹配。例如：如果您输入 ('sun'、'sund'、'sunda' 或 'sunday')，它会返回 'sunday'。理想情况下，它不区分大小写，但我可以自己解决。

```
var _array = {
    "sun" : "sunday",
    "mon" : "monday",
    "tue" : "tuesday",
    "wed" : "wednesday",
    "thu" : "thursday",
    "fri" : "friday",
    "sat" : "saturday"   
}; 
```

这是解决方案的[第二部分](http://jsfiddle.net/nosfan1019/j2u5K/4/)。我意识到我可以`else { $('p').text(''); }`在这个例子中删除，但这在我的项目代码中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:21:42.987

如果我从您之前的问题中了解到，如果文本输入的任何部分与数组中的项目匹配，那么它被认为是匹配的。

现在您似乎想将短数组版本映射到一个完整的单词。

如果这听起来不错，您可以从数组中获取短值，并创建一个短到长版本的映射。

```
var map = {
   sun: "sunday",
   mon: "monday",
   tue: "tuesday",
   wed: "wednesday",
   thu: "thursday",
   fri: "friday",
   sat: "saturday"
}; 
```

然后获取数组值，并将其作为键传递给映射。

```
var _array = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];

_val = _val.toLowerCase();

for (var i = 0; i < _array.length; i++) {
    if (_val.indexOf(_array[i]) != -1) {
        $('span').text('it worked');
        alert(map[_array[i]]);  
        return;
     }
} 
```

您还说您希望它不区分大小写，所以我将 toLowerCase() 添加到 _val。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:27:53.513

```
function parseDay(val) {
    val = val.toLowerCase();
    var days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
    for (var i = 0; i < days.length; i++)
        if (days[i].indexOf(val) == 0)
            return days[i];
}

parseDay('sun'); // 'sunday' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:22:28.047

听起来你需要使用`.match()`

示例：http: [//jsfiddle.net/t5pP8/](http://jsfiddle.net/t5pP8/)

# javascript - 在画布中创建自定义图像对象

> ID：11979401
> 
> 赞同：0
> 
> 时间：2012-08-16T01:12:44.947
> 
> 标签：javascript, image, html, object, canvas

我正在尝试创建一个将创建图像并将其绘制在画布上的对象。我不仅仅是常规图像对象的原因是我想知道对象在画布上的位置以进行鼠标操作。

这是我的构造函数：

```
function DisplayImg(src, x, y, w, h) {
            this.src = src;
            this.x = x;
            this.y = y;
            this.w = w;
            this.h = h;
        } 
```

我创建了一个绘制函数将其绘制到画布上：

```
DisplayImg.prototype.draw = function(context) {
            img = new Image();
            img.src = this.src;
            img.onload = function() {
            context.drawImage(img,this.x,this.y,this.w,this.h); 
            }
        } 
```

然后，我对 instagram 进行 API 调用并获取一些照片 url 并将它们放入一个数组中。在这里，我试图遍历该数组并为每个数组创建一个对象，并将其绘制到画布上。我可以 console.log 数据并查看图像 src，所以我知道数据在那里。这是我在取回数据后调用的函数：

```
function draw() {  
          for (var i = 0; i < srcArr.length; i++) { 
            var src = srcArr[i];
            x = Math.floor(Math.random()*8);
            y = Math.floor(Math.random()*8);
            var theImage = new DisplayImg(src,x,y,75,75); 
            theImage.draw(context);
          } 
        } 
```

我的日志返回正确的数据，但没有图像被绘制到画布上。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:12:33.363

你应该做的第一件事是修复你的原型函数：

```
DisplayImg.prototype.draw = function(context) {
    var display = this,
        img = new Image();
    img.onload = function() {
        context.drawImage(img,display.x,display.y,display.w,display.h); 
    }
    img.src = this.src;
} 
```

您将垃圾值传递给 context.drawImage 函数，因为“this”不再适用于该 onload 函数内的 DisplayImage 实例，这应该可以解决这个问题。

其次，确保您实际上传递了正确的上下文，我对此无能为力。我做了一个小提琴来举例说明你的代码，但我不得不改变你的“绘图”功能以使其理智：http: [//jsfiddle.net/yuaHF/2/](http://jsfiddle.net/yuaHF/2/)

# sql - IDENTITY 列 - 好还是坏？

> ID：11979402
> 
> 赞同：1
> 
> 时间：2012-08-16T01:12:52.607
> 
> 标签：sql, sql-server

我仍在努力确定是否将标识列用于 PK，当您可以使用现有列时，是否是正确的方法。

例子：

```
CREATE TABLE person_link
(
     person_link_id INT NOT NULL IDENTITY(1,1)
    ,owner_person_id INT NOT NULL
    ,link_person_id INT NOT NULL
    ,link_date_created DATETIME NOT NULL DEFAULT(GETDATE())
    ,deleted_person_id INT NULL

     CONSTRAINT pk_person_link PRIMARY KEY(person_link_id)
    ,CONSTRAINT fk_person_link_owner FOREIGN KEY (owner_person_id) REFERENCES person (person_id)
    ,CONSTRAINT fk_person_link_link FOREIGN KEY (link_person_id) REFERENCES person (person_id)
) 
```

或者，我应该删除 person_link_id，而是在我的两列中放置一个主键，这将始终是唯一的。IE：

```
CONSTRAINT pk_person_link PRIMARY KEY(owner_person_id, link_person_id) 
```

这只是个人选择，还是有充分的理由不使用身份（我赞成，纯粹是因为 - 我一直这样做）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T01:25:56.733

使用标识列作为聚集索引的一个优点是每次插入都会是最后一条记录，因此 SQL Server 不需要使用索引。

加入的时候还有一个好处，你只需要在子表中有1个引用。

这些可能不相关，具体取决于您添加的数据或数据库架构（如果您需要在其他地方使用它）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T01:17:10.507

我赞成身份列。反复地，我发现找到某物所在的确切行很有用。

例如，我几乎本能地编写以下查询来查找添加到表中的最新行：

```
select t.*
from t
order by 1 desc 
```

这行得通，因为我总是让身份成为表中的第一列。

此外，在对表进行连接时，将主键设置为单个字段也很有帮助。如果你想识别一个特定的实体，没有什么比拥有一个特定的实体 id 更好的了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T01:17:16.020

根据需要，我个人会在记录上使用自然主键，因此两列将始终是唯一的。

所以表格将是：

```
table:
owner_person_id int -- PK
link_person_id int -- PK 
```

但这实际上取决于您对表的计划以及选择哪个选项的数据库设计。

# mongodb - 使用传统 id 更新流星集合

> ID：11979403
> 
> 赞同：8
> 
> 时间：2012-08-16T01:13:05.720
> 
> 标签：mongodb, meteor

我试图做一个简单的更新

```
Collection.update(id, {$set:{name:value}}); 
```

甚至

```
Collection.update({'_id':id}, {$set:{name:value}}); 
```

`id`但是如果是传统的 mongodb id ，则集合不会更新。它似乎只适用于流星自己实现的唯一 ID。我该如何补救。流星可以接受mongo自己的id结构吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T00:19:00.417

你是对的：Meteor 的 DDP 协议不支持非 JSON 类型，例如 Mongo `ObjectId`。我们知道这是一个问题：这是我们[最古老的未解决问题](https://github.com/meteor/meteor/issues/61)，它在[我们的路线图](https://trello.com/card/official-ddp-specification/508721606e02bb9d570016ae/53)上。

虽然肯定有一些“简单”的快速修复可以解决这个问题，但我们更愿意在扩展我们的协议以处理其他非 JSON 类型（日期、二进制 blob 等）而不是特定的短长期黑客。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T09:47:18.803

可以使用 new ObjectID 将您的 ID 转换为 mongodb 对象（在服务器端），然后进行更新。：

```
var ObjectID, require;

require = __meteor_bootstrap__.require;

ObjectID = require("mongodb").ObjectID;

Meteor.methods({
  SomeUpdate: function(upd) {
    var id;
    id = new ObjectID(upd['_id']);
    return SomeDB.update({
      _id: id
    }, {
      $set: {
        field: value
      }
    }, function(res) {
      return console.log(res);
    });
  }
}); 
```

# c# - 确定组合框文本是 IP 地址还是主机名

> ID：11979404
> 
> 赞同：1
> 
> 时间：2012-08-16T01:13:12.123
> 
> 标签：c#

我在尝试确定地址是 IP 地址还是主机名时遇到问题。我发现的所有内容都说使用正则表达式。我不确定如何形成 IF 语句。这是我的代码：

```
private void btnPingAddress_Click(object sender, EventArgs e)
{
    intByteSize = Convert.ToInt32(numericDataSize.Value);
    intNumberOfPings = Convert.ToInt32(numericPing.Value);
    strDnsAddress = cmbPingAddress.Text;
    //If address is IP address:
    if (strDnsAddress Contains ((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?")
    {
       txtPingResults.Text = "Pinging " + strIpAddress + " with " + intByteSize + " bytes of data:" + "\r\n";
    }
    // If address is hostname:
    else
    {
       strIpAddress = Convert.ToString(Dns.GetHostEntry(strDnsAddress));
       txtPingResults.Text = "Pinging " + strDnsAddress + "  [" + strIpAddress + "]  with " + intByteSize + " bytes of data:" + "\r\n";
    }           
    Ping ping = new Ping();
    PingReply reply = ping.Send(cmbPingAddress.Text);
    txtPingResults.Text = "Pinging " + cmbPingAddress.Text + "  [" + Convert.ToString(reply.Address) + "]  with " + intByteSize + " bytes of data:" + "\r\n";
    for (int i = 0; i < intNumberOfPings; i++)
    {
       txtPingResults.AppendText("Reply from "+Convert.ToString(reply.Address)+": Bytes="+Convert.ToString(intByteSize) +" Time="+Convert.ToString(reply.RoundtripTime) +"ms"+" TTL="+Convert.ToString(reply.Options.Ttl)+ "\r\n");
       cmbPingAddress.Items.Add(cmbPingAddress.Text);
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-19T03:04:03.847

我最近需要这样做以分离 WebAPI 标头。`Uri.CheckHostName`可能是最简单的方法，它包括 ipv6 支持：

```
var dns = Uri.CheckHostName("www.google.com"); //UriHostNameType.Dns
var ipv4 = Uri.CheckHostName("192.168.0.1");   //IPv4
var ipv6 = Uri.CheckHostName("2601:18f:780:308:d96d:6088:6f40:c5a8");//IPv6
dns = Uri.CheckHostName("Foo");    //Dns 
```

最后一个很棘手，但在技术上是正确的。至少，您可以排除主机名与 IP 地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T01:26:44.047

尝试：

```
ValidIpAddressRegex = "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$";

ValidHostnameRegex = "^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$";

if(Regex.IsMatch(strDnsAddress, ValidIpAddressRegex )) {
    // the string is an IP
}
else if(Regex.IsMatch(strDnsAddress,ValidHostnameRegex )){
    // the string is a host

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T01:21:03.223

使用您的正则表达式：

```
if(Regex.IsMatch(strDnsAddress, "(2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?")) {
    // the string is an IP
} 
```

或者您可以使用[此](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)问题中提供的正则表达式（如 habib zare 在他的评论中建议的那样）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-01T19:25:52.707

对于像我这样的初学者，我尝试以非常基本且易于理解的方式解释这个概念！

**注意：**函数的参数定义为可选参数 ( `CheckHost(string host="127.0.0.0")`)

```
public static void CheckHost(string host="127.0.0.1")
    {
        if (host == null || host.Length == 0)
        {
            Console.WriteLine("no host is defined!");
        }
        else if (Uri.CheckHostName(host).ToString() == "Dns")
        {
            Console.WriteLine("The "+host+" is a DNS hostname.");

        }
        else if (Uri.CheckHostName(host).ToString() == "IPv4")
        {
            Console.WriteLine("The " + host + " is an IP Address v4.");
        }
        else if (Uri.CheckHostName(host).ToString() == "IPv6")
        {
            Console.WriteLine("The " + host + " is an IP Address v6.");
        }
        else
        {
            Console.WriteLine("The " + host + " is unknown!");
        }
    } 
```

# iphone - 获取被触摸按钮的标题

> ID：11979406
> 
> 赞同：1
> 
> 时间：2012-08-16T01:13:32.247
> 
> 标签：iphone, ios, c

我的 iPhone 应用程序上有三个按钮，我想以编程方式访问被触摸的按钮的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:16:37.533

在按钮的操作方法中，只需使用 sender.currentTitle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:18:33.037

如果您使用目标/动作模式（[链接](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)），动作的参数，通常命名为“发送者”，将是您的按钮。您可以从那里以编程方式访问按钮的属性。

# java - 必须定义显式构造函数 Error Java

> ID：11979411
> 
> 赞同：0
> 
> 时间：2012-08-16T01:13:57.300
> 
> 标签：java

菜鸟问题。

坚持以下代码。获取“默认构造函数无法处理由隐式超级构造函数抛出的异常类型 IOException。必须定义显式构造函数”粗体行错误

私有 FileWriter fileWriter = **new FileWriter(file);** 具体来说，我的问题是.....我如何为文件编写器创建一个显式构造函数？

第二个问题：我知道 appendtoLog 方法不正确。我只希望此方法执行 bufferWriter.write(logInfo) 但为此我需要调用已创建的 bufferWriter 对象。但是如您所见，我已在另一种方法中对其进行了实例化，以防止其可用于 appendtolog 方法。请在我的方法中提出解决方案或错误。

有什么帮助吗？谢谢。

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.io.File;
import java.io.FileWriter;
import java.io.BufferedWriter;
import java.io.IOException;

 public class Logging {

private DateFormat dateFormat = new SimpleDateFormat("MM-dd-yyyy");
private Date date = new Date();
private File file = new File("c:\\view\\" + dateFormat.format(date) + "\\"
        +"\\SmokesLog.txt");
private FileWriter fileWriter = **new FileWriter(file);**

public void createLogFile() throws Exception {
try{
if(!file.exists()){
    file.createNewFile();
    System.out.println("file name is "+ file.getName());
      BufferedWriter bufferWriter = new BufferedWriter(new     
  FileWriter(file.getName(),true));
       bufferWriter.write("Log Started for Test");
}
    } catch (IOException e) {
            System.out.println("code failed in creating logfile");
    }

}

public void appendToLog(String logInfo) throws IOException {
    System.out.println("code got to appendToLog method");
    // below does not append.need to find better method.
    if (file.exists()) {
        BufferedWriter bufferWriter = new BufferedWriter(fileWriter);
        bufferWriter.write(logInfo);
        System.out.println("Done");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:14:39.583

正如人们所说，这是因为创建 FileWriter 会引发异常。虽然我确实建议使用 Logger 包，但这里有一种方法可以克服这个问题：

使用显式构造函数，捕获异常，并很可能将其重新抛出并包装在 RuntimeException 中。

```
private FileWriter fileWriter;

public Logging() {
    super();
    try {
       fileWriter = new FileWriter(file);
    }
    catch (IOException e) {
       throw new RuntimeException(e);
    }
} 
```

或者使用实例初始化程序块，它在构造函数中对 super() 的任何调用之后执行，但在构造函数中的任何其他代码之前执行。在您的情况下，如果您没有构造函数，则会调用隐式 super() ，这没关系，因为您正在扩展 Object. 因此初始化程序块在此之后立即执行。所以下面的代码在功能上几乎等同于上面的代码。

```
private FileWriter fileWriter;
{
    try {
       fileWriter = new FileWriter(file);
    }
    catch (IOException e) {
       throw new RuntimeException(e);
    }
} 
```

正如我所说，我不建议这样做，真正的日志记录包（slf4j + log4j）会更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:23:35.983

由于该行*可能会*导致异常，因此您必须在类的构造函数中对其进行初始化*（*）`Logging`并**执行正确的异常处理**，而不是`FileWriter`！

您不能在可能导致异常的隐式构造函数中使用代码。

重新考虑何时创建日志文件。例如，当文件尚未打开时调用 createLogFile。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:30:25.810

看起来您只是为您的应用程序制作了一个记录器，但我建议您使用开源日志库，例如`Log4j`或 propper 日志库，而不是重新创建已经存在的东西（并且经常支持）。

[log4j 简介：Ceki Gülcü，2002 年 3 月](http://logging.apache.org/log4j/1.2/manual.html)

用法：

```
BasicConfigurator.configure();

Logger logger = Logger.getLogger("Foo");

logger.debug("Hello World");
logger.warn("it's me"); 
```

输出：`Thread Number` `Logging Option` `Class` `Output`

```
0 [main] DEBUG Foo  - Hello World
1 [main] WARN Foo  - it's me 
```

下载：[这里](http://logging.apache.org/log4j/1.2/download.html)

# git - git rebase 混淆

> ID：11979414
> 
> 赞同：2
> 
> 时间：2012-08-16T01:14:53.357
> 
> 标签：git, branch, rebase

假设我有 2 个分支 `topic`，`master` 如果我在`topic`分支上，运行`git rebase master`它是 rebase master 还是 rebase topic 分支？

做`git rebase --help`给了我这个

假设存在以下历史并且当前分支是“主题”：

```
 A---B---C topic
            /
       D---E---F---G master 
```

从这一点来看，以下任一命令的结果：

```
 git rebase master
       git rebase master topic 
```

将会：

```
 A'--B'--C' topic
                        /
           D---E---F---G master 
```

注意：后一种形式只是 git checkout topic 后跟 git rebase master 的简写。当 rebase 退出时，主题将保持签出分支。

如果我想实现这一点`D---E---F---G---A---B---C master`，我应该切换到 master 并运行`git rebase -i topic`吗？

如果我运行`git rebase -i topic`try to squash A,B,C to C to become `D---E---F---G---C master`，我得到`noop`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T01:31:05.593

假设你从一棵看起来像这样的树开始

```
 A---B---C topic
        /
   D---E---F---G master 
```

您需要运行 2 个命令`git rebase master`使其看起来像这样

```
 A'--B'--C' topic
                    /
   D---E---F---G master 
```

然后从`master`run 开始`git merge topic`，它将进行快进合并，你最终会得到一棵看起来像这样的树

```
 topic
                            /
   D---E---F---G---A---B---C -- master 
```

* * *

> 我可以只签出 master 并运行*git rebase topic*吗？

运行该命令将生成一棵看起来像这样的树

```
 topic
                            /
   D---A---B---C---E---F---G -- master 
```

* * *

这是（经过一些编辑的）git 文档`rebase`，希望这会有所帮助：

> 在当前分支中提交但不在*上游*的所有更改都将保存到临时区域。

如果你正在`topic`运行`git rebase master`，这意味着提交 A、B 和 C 将进入一个临时区域。

> 当前分支被重置为*upstream*。*这与 git reset --hard upstream*具有完全相同的效果。

此时树的临时状态如下所示

```
 topic
                /
   D---E---F---G -- master 
```

> 然后将之前保存到临时区域的提交按顺序一一重新应用到当前分支。

保存到临时区域的提交 A、B、C 将“重新提交”到您当前所在的分支`topic`。

```
 topic
                            /
   D---E---F---G---A---B---C -- master 
```

运行`git rebase topic`from`master`将执行完全相同的步骤，除了不是将提交 A、B、C 放入临时区域，而是将提交 E、FG 放入临时区域。

# javascript - 在 optgroup 中获取选择选项值以显示额外内容

> ID：11979415
> 
> 赞同：2
> 
> 时间：2012-08-16T01:14:59.400
> 
> 标签：javascript, html, dom

我浏览了论坛并尝试了这些链接中提到的一些事情： [检查下拉列表的选定选项是否不是第一个使用 JavaScript](https://stackoverflow.com/questions/2675694/how-to-get-option-value-javascript) [使用 jquery 在 optgroup 中获取选择选项的索引](https://stackoverflow.com/questions/2225901/get-index-of-select-option-in-an-optgroup-with-jquery)

我对 Javascript 的了解还是比较基础的，主要只是将它用于表单操作。我从来没有使用过 jQuery（还），从我读过的内容来看，我不需要做我正在做的事情（所以请不要使用 jQuery 解决方案！）

我想做的是根据单击/选择的按钮/选项显示内容。第 1 步工作正常（它只是在单击“不是学生”按钮时显示下拉框。那里没有问题。

第2步我目前卡住了。（而且我知道第 3 步会有问题，但我还没有看过它们）。

第 2 步需要根据下拉菜单中的选项是否被选中来显示一个表单。可能（我还不确定）我需要为每个选择的选项使用不同的形式（但我认为一旦我有了基本代码，我就可以使用“if”和“else”来解决这个问题）。

这是我的 HTML 文档，头部有 JS 编码。

```
<head>
<title>Tims Form</title>
<style type="text/css">
.errormsg {
    color: red;
    font-style: italic;
    display:none;
    }

#interest {
    display:none;
    }

#msgform {
    display:none;
    }
</style>

<script type="text/javascript">
    function reveal()
        {
            document.getElementById("interest").style.display="block";
        }

    function hide()
        {
            document.getElementById("interest").style.display = "none";
        }

    function showForm()
            /* to display form only when dropdown selection made and submit-button pressed */
        {
            var sel=document.getElementById('interest_choice');

            if (sel.options[sel.selectedIndex].value == "0")
                {
                    document.getElementById("msgform").style.display = "block";
                    document.getElementById("selection_error").style.display = "none";
                }

            else { document.getElementById("msgform").style.display = "none"; 
                    document.getElementById("selection_error").style.display = "block";
                }
        }

    function checkForm()
        {
            var is_valid=true;
            var email=document.getElementById("email");

            /* not a blank field validation */
            if (document.getElementById("firstname").value == "")
                {
                    document.getElementById("firstname_error").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("firstname_error").style.display = "none"; }

            if (document.getElementById("lastname").value == "")
                {
                    document.getElementById("lastname_error").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("lastname_error").style.display = "none"; }

            if (document.getElementById("subject").value == "")
                {
                    document.getElementById("subject_error").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("subject_error").style.display = "none"; }

            if (document.getElementById("message").value == "")
                {
                    document.getElementById("message_error").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("message_error").style.display = "none"; }

            /* email validation */
            if (email.value =="")
                {
                    document.getElementById("email_blank").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("email_blank").style.display = "none"; }

            if (email.value.indexOf("@") == -1)
                {
                    document.getElementById("email_valid").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("email_valid").style.display = "none"; }

            if (email.value.indexOf("@") ==0)
                {
                    document.getElementById("email_valid").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("email_valid").style.display = "none"; }

            if (email.value.lastIndexOf(".")<email.value.indexOf("@") )
                {
                    document.getElementById("email_blank").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("email_blank").style.display = "none"; }

            if (email.value.lastIndexOf(".")>((email.value.length*1)-3))
                {
                    document.getElementById("email_valid").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("email_valid").style.display = "none"; }

            /* Phone data must be numeric validation */
            if (document.getElementById("phone").value="")
                {
                    document.getElementById("phone_error").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("phone_error").style.display = "none"; }

            if (isNaN(document.getElementById("phone").value))
                {
                    document.getElementById("phone_error").style.display = "block";
                    is_valid=false;
                }
            else { document.getElementById("phone_error").style.display = "none"; }

        return is_valid;
        }

</script>

</head>

<body>
<!-- onclick to show the div with id="interest" when Not A Student is selected -->
    I am: <br/>
    <button id="student" onclick="hide()">A Student</button>
    <button id="not_student" onclick="reveal()">Not A Student</button>

<!-- if not a student -->
<div id="interest">
What area are you interested in studying?

<!-- dropdown (select) list with option groups 
need a submit button to return the value before the form will show?
-->
<form>
<select id="interest_choice">
    <optgroup label="Arts">
        <option value="arts">Arts degree</option>
    </optgroup>
    <optgroup label="Business/Economics">
        <option value="be_undergrad">My first degree (undergraduate)</option>
        <option value="be_postgrad">Postgraduate</option>
    </optgroup>
    <optgroup label="Science">
        <option value="science">Science degree</option>
    </optgroup>
    <optgroup label="Human Sciences">
        <option value="hs_undergrad">Undergraduate</option>
        <option value="psych_postgrad">Postgraduate Psychology</option>
        <option value="ling_postgrad">Postgraduate Linguistics</option>
        <option value="edu_postgrad">Postgraduate Education</option>
    </optgroup>
</select>
<button onclick="showForm()">Enquiry Form</button>
<div class="errormsg" id="selection_error">Please make a selection above.</div>
</form>
</div>

<!-- form -->
<div id="msgform">
<form onsubmit="return checkForm();">
    <fieldset>
        <label>
            First Name:
            <input type="text" name="firstname" id="firstname">
            <div class="errormsg" id="firstname_error">Please enter your first name</div>
        </label>
        <br/>
        <label>
            Last Name:
            <input type="text" name="lastname" id="lastname">
            <div class="errormsg" id="lastname_error">Please enter your last name</div>
        </label>
        <br/>
        <label>
            Email:
            <input type="text" name="email" id="email">
            <div class="errormsg" id="email_blank">Please enter your email address</div>
            <div class="errormsg" id="email_valid">Please enter a valid email address</div>
        </label>
        <br/>
        <label>
            Phone:
            <input type="text" name="phone" id="phone">
            <div class="errormsg" id="phone_error">Please enter a numeric phone number. Do not include ().</div>
        </label>
        <br/>
        <label>
            Subject: (Please only submit one question per enquiry. You can submit multiple enquiries.)<br/>
            <input type="text" name="subject" id="subject">
            <div class="errormsg" id="subject_error">Please enter a subject</div>
        </label>
        <br/>
        <label>
            Message:
            <textarea name="message" id="message"></textarea>
            <div class="errormsg" id="message_error">Please enter a message</div>
        </label>
    </fieldset>
    <input type="submit" value="Submit Form">
</form>
</div>

</body> 
```

目前，当我单击“查询表单”按钮时，它只是将页面刷新回第一个按钮。

解释和帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:49:42.340

两件事情...

首先，使用触发 showForm 的按钮，如下所示：

```
<button onclick="showForm()">Enquiry Form</button> 
```

将其放在表单元素之外，如下所示：

```
</form>
<button onclick="showForm()">Enquiry Form</button>
<div class="errormsg" id="selection_error">Please make a selection above.</div> 
```

该按钮在表单标签内时会自动提交表单，因此它会刷新页面。

其次，在您的 checkForm 函数中，您正在检查的值似乎是错误的......试试这个：

```
if (sel.options[sel.selectedIndex].value)
{
    document.getElementById("msgform").style.display = "block";
    document.getElementById("selection_error").style.display = "none";
}

else { document.getElementById("msgform").style.display = "none"; 
    document.getElementById("selection_error").style.display = "block";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:47:54.743

艾米丽，

`<button>`包含在 中时，`<form>`它充当`<submit>`按钮，单击时，调用 `showForm()`并刷新页面。`<button>`如果在表格之外，它应该可以工作。

```
</form>
<button onclick="showForm()">Enquiry Form</button>
<div class="errormsg" id="selection_error">Please make a selection above.</div> 
```

希望这可以帮助！

# java - Java ResultSet 内存不足，无法使用 PreparedStatement 更新

> ID：11979416
> 
> 赞同：0
> 
> 时间：2012-08-16T01:15:26.333
> 
> 标签：java, mysql, jdbc, resultset

我一直在将不断增长的 ResultSet 加载到内存中，直到现在它真的不是问题。它现在太大而无法合理使用。我已经研究过创建可滚动的结果集，但是我在实现它时遇到了一些麻烦。这是我尝试过的：

```
 Statement stmt = con.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY, java.sql.ResultSet.CONCUR_READ_ONLY);
    stmt.setFetchSize(Integer.MIN_VALUE);
    try {

        if (stmt.execute("SELECT text, value FROM " + db)) {
            rs = stmt.getResultSet();
        } else {
            System.err.println("select failed");
        } 
```

我缺少的 Statement 是否还有其他参数？还是我必须在其他地方设置另一个选项？

**编辑：**

原来问题不在于流本身，而在于我如何更新 RS。如果 RS 正在播放，我可以不更新它吗？控制台弹出以下内容：

```
SQLException: Operation not supported for streaming result sets
SQLState: S1009
VendorError: 0 
```

这是我在处理完数据库后用来更新数据库的代码：

```
rs.getDouble("value");
if (rs.wasNull()) {
StringValue analysis = new StringValue(dict);
int id = rs.getRow();
String entry = rs.getString("text");
double val = analysis.analyzeString(entry);
pst.setDouble(1, val);
st.setInt(2, id);
System.out.println(id+": " + val + " : " + rs.getString(5));
pst.executeUpdate(); 
```

准备好的语句的结构如下：

```
pst = conn.prepareStatement("UPDATE "+ db +" SET value=? WHERE id=?"); 
```

相当简单，StringValue 方法analyzeString 本质上是对输入字符串的情感分析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:32:02.310

限制你的行：

```
"select text, value from " + db  + " limit 100" 
```

或者

```
"select  text,value from " + db  + " where text like 'A%'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:29:02.473

我建议你为JVM添加一些参数以扩大JVM内存，例如-Xmx，-Xms，你可以参考[JVM内存结构](http://www.yourkit.com/docs/kb/sizes.jsp)以获得更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T02:28:56.370

> 语句 stmt = con.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY, java.sql.ResultSet.CONCUR_READ_ONLY);

您应该使用 Statement stmt = con.createStatement(java.sql.ResultSet.TYPE_SCROLL_SENSITIVE,java.sql.ResultSet.CONCUR_UPDATABLE);

# excel - EXCEL：在工作表的第一行查找今天的日期

> ID：11979421
> 
> 赞同：2
> 
> 时间：2012-08-16T01:16:26.967
> 
> 标签：excel, excel-formula, lookup

我有一张带有一系列日期作为列标题的表格。日期是手动输入的，不一定是连续的。

我想要一个可以在此表中查找今天的日期并从该列返回值的公式。我使用 HLOOKUP 将日期输入为字符串，即

```
HLOOKUP("16/08/2012", Statuses!$1:$5, 5, FALSE) 
```

但是，我不想手动输入日期，我想使用 TODAY() 公式。但是用这个公式替换字符串会返回#N/A。我猜是因为日期是在查找表上手动输入的，所以值不完全相同。

有没有办法解决这个问题，比如将 TODAY() 公式的返回限制在一天的开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T01:22:39.790

尝试`HLOOKUP(TEXT(TODAY(),"dd/mm/yyyy"),Statuses!$1:$5, 5, FALSE)`

那应该转换`TODAY()`为与您的上述格式相匹配的设定日期格式。

**编辑：**当然，这取决于您的日期列标题是文本，我认为它们是文本，因为只是查找`TODAY()`不起作用。

# hadoop - 一种为单节点 Hadoop 禁用 SSH 的方法？

> ID：11979425
> 
> 赞同：0
> 
> 时间：2012-08-16T01:16:38.970
> 
> 标签：hadoop

我工作的地方是使用 Centrify 进行身份验证，由于某种原因，当我 SSH 进入系统时，它没有运行 .bashrc / .bash_profile 。这意味着当它在本地通过 SSH 启动节点时，不会设置 JAVA_HOME 和一堆其他变量。SA 在找出原因并拒绝将其从我的开发机器中删除时毫无用处。截至目前，我正在尝试运行需要本机压缩库的 Hadoop 实例。因此，当 SSH 进入时，JAVA_LIBRARY_PATH 没有被设置。由于某种原因，在 hadoop-env.sh 中设置它不起作用。

有没有办法在不使用 SSH 的情况下以单节点模式运行 hadoop？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:58:48.767

`JAVA_HOME`从脚本中删除 SSH 比在脚本中添加等更痛苦`bin/hadoop`。所有的守护进程都是通过这个启动的，所以如果 env 不工作，这是改变这个的要点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:13:25.027

如果 .bash_profile 和 .bashrc 没有被调用，可能是因为你的 ssh 调用以非交互方式调用了 shell，这与 Centrify 无关。

这是一篇进一步描述这一点的文章：http: [//hacktux.com/bash/bashrc/bash_profile](http://hacktux.com/bash/bashrc/bash_profile)

如果要调用 .bash_profile 和 .bashrc，则需要更改 ssh 调用以使用交互式 shell，如下所述。

[为什么 SSH 远程命令在手动运行时获得的环境变量更少？](https://stackoverflow.com/questions/216202/why-does-an-ssh-remote-command-get-fewer-environment-variables-then-when-run-man)

让我举个例子。

这是我在运行 Centrify 和 OpenSSH 的系统上的 .bashrc

```
$ id
uid=1296041358(simon_schuster) gid=1296041358(simon_schuster) groups=1296040449(domain_u),1296041358(simon_schuster)
[simon_schuster@engcen5 ~]$ cat .bashrc
# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
    . /etc/bashrc
fi

# User specific aliases and functions
JAVA_HOME=/usr/local/java/
export JAVA_HOME 
```

如果我尝试使用远程 ssh 连接连接到系统并执行 env 命令，此 ssh 连接将调用非交互式 shell，如下所示，JAVA_HOME 变量未显示。那是因为如果以非交互方式调用 shell，则 .bashrc 不是来源。

```
ssh simon_schuster@engcen5.ocean.net env
CentOS release 5.5 (Final)
Kernel 2.6.18-194.el5 on an x86_64

Password:
SHELL=/bin/bash
SSH_CLIENT=192.168.81.26 44524 22
CDC_PREW2KHOST=engcen5
USER=simon_schuster
MAIL=/var/mail/simon_schuster
PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/share/centrifydc/bin
PWD=/home/simon_schuster
USER_PRINCIPAL_NAME=Simon.Schuster@OCEAN.NET
KRB5CCNAME=FILE:/tmp/krb5cc_cdc1296041358_TEcxjC
CDC_JOINED_DC=dc.ocean.net
SHLVL=1
HOME=/home/simon_schuster
CDC_JOINED_SITE=Ocean-Demo
DA_DASH_DEPTH=1
LOGNAME=simon_schuster
SSH_CONNECTION=192.168.81.26 44524 192.168.81.25 22
CDC_JOINED_ZONE=CN=Global,CN=Zones,OU=Unix,DC=ocean,DC=net
CDC_LOCALHOST=engcen5.ocean.net
CDC_JOINED_DOMAIN=ocean.net
_=/usr/bin/env 
```

这是同一用户的另一个会话，但这次用户以交互方式登录并键入 env 命令。注意显示了 JAVA_HOME 变量。这是因为 .bashrc 是在调用交互式（登录）shell 时获取的。

```
[simon_schuster@engcen5 ~]$ env
HOSTNAME=engcen5.ocean.net
TERM=xterm
SHELL=/bin/bash
HISTSIZE=1000
SSH_CLIENT=192.168.81.11 49519 22
CDC_PREW2KHOST=engcen5
SSH_TTY=/dev/pts/1
USER=simon_schuster
LS_COLORS=no=00:fi=00:di=00;34:ln=00;36:pi=40;33:so=00;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=00;32:*.cmd=00;32:*.exe=00;32:*.com=00;32:*.btm=00;32:*.bat=00;32:*.sh=00;32:*.csh=00;32:*.tar=00;31:*.tgz=00;31:*.arj=00;31:*.taz=00;31:*.lzh=00;31:*.zip=00;31:*.z=00;31:*.Z=00;31:*.gz=00;31:*.bz2=00;31:*.bz=00;31:*.tz=00;31:*.rpm=00;31:*.cpio=00;31:*.jpg=00;35:*.gif=00;35:*.bmp=00;35:*.xbm=00;35:*.xpm=00;35:*.png=00;35:*.tif=00;35:
MAIL=/var/spool/mail/simon_schuster
PATH=/usr/kerberos/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/share/centrifydc/bin:/home/simon_schuster/bin
INPUTRC=/etc/inputrc
PWD=/home/simon_schuster
JAVA_HOME=/usr/local/java/
LANG=en_US.UTF-8
USER_PRINCIPAL_NAME=Simon.Schuster@OCEAN.NET
SSH_ASKPASS=/usr/libexec/openssh/gnome-ssh-askpass
KRB5CCNAME=FILE:/tmp/krb5cc_1296041358
CDC_JOINED_DC=dc.ocean.net
SHLVL=1
HOME=/home/simon_schuster
CDC_JOINED_SITE=Ocean-Demo
DA_DASH_DEPTH=1
LOGNAME=simon_schuster
SSH_CONNECTION=192.168.81.11 49519 192.168.81.25 22
LESSOPEN=|/usr/bin/lesspipe.sh %s
CDC_JOINED_ZONE=CN=Global,CN=Zones,OU=Unix,DC=ocean,DC=net
CDC_LOCALHOST=engcen5.ocean.net
G_BROKEN_FILENAMES=1
CDC_JOINED_DOMAIN=ocean.net
_=/usr/bin/env 
```

为了让 ssh 获取您的 bash_profile 和 bashrc，您必须使用 --login 选项调用 bash，如下所示。如您所见，当通过 ssh 远程执行 env 命令时，现在可以看到 JAVA_HOME 变量。

```
ssh simon_schuster@engcen5.ocean.net "bash --login -c env"
CentOS release 5.5 (Final)
Kernel 2.6.18-194.el5 on an x86_64

Password:
HOSTNAME=engcen5.ocean.net
SHELL=/bin/bash
HISTSIZE=1000
SSH_CLIENT=192.168.81.26 58672 22
CDC_PREW2KHOST=engcen5
USER=simon_schuster
LS_COLORS=
PATH=/usr/kerberos/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/share/centrifydc/bin:/home/simon_schuster/bin
MAIL=/var/spool/mail/simon_schuster
INPUTRC=/etc/inputrc
PWD=/home/simon_schuster
JAVA_HOME=/usr/local/java/
LANG=en_US.UTF-8
USER_PRINCIPAL_NAME=Simon.Schuster@OCEAN.NET
SSH_ASKPASS=/usr/libexec/openssh/gnome-ssh-askpass
KRB5CCNAME=FILE:/tmp/krb5cc_cdc1296041358_qRHqro
CDC_JOINED_DC=dc.ocean.net
HOME=/home/simon_schuster
SHLVL=2
CDC_JOINED_SITE=Ocean-Demo
DA_DASH_DEPTH=2
LOGNAME=simon_schuster
SSH_CONNECTION=192.168.81.26 58672 192.168.81.25 22
LESSOPEN=|/usr/bin/lesspipe.sh %s
CDC_JOINED_ZONE=CN=Global,CN=Zones,OU=Unix,DC=ocean,DC=net
CDC_LOCALHOST=engcen5.ocean.net
G_BROKEN_FILENAMES=1
CDC_JOINED_DOMAIN=ocean.net
_=/usr/bin/env 
```

总之，您没有获取环境变量的事实与 Centrify 无关，而是与您的 shell 被非交互调用这一事实有关。

Centrify 仅负责身份验证、访问控制和策略执行，不会影响 OpenSSH 或您的 shell 的默认行为。

希望这可以帮助。

# java - 在 android 中执行 OAUth 身份验证

> ID：11979426
> 
> 赞同：1
> 
> 时间：2012-08-16T01:16:47.690
> 
> 标签：java, android, oauth, google-play-services

我已经尽可能多地扫描了有关此的信息并遇到了这个

```
WARNING:Google Play services is required to compile and run this sample. It will launch soon. Please check on https://developers.google.com/android/google-play-services for more details. For now, we have provided a dummy google-play-services.jar that only compiles the sample but will not run correctly.

Android application registration: You first need to register your Android application and sign up for access to the Google Calendar API in the Google APIs Console. First, you need the "Signing certificate fingerprint (SHA1)" for the debug and release builds: 
```

我想知道这是否可用，如果没有，我还有另一种方法可以有效地访问谷歌 API。此外，如果我能获得非常好的逐步资源来完成此任务，我将不胜感激。并且请下载的示例代码不起作用，我尝试了几次无济于事。最好坚持使用旧版本或使用客户端登录。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:35:45.673

遗憾的是，[Google Play 服务](https://developers.google.com/android/google-play-services/)API 尚不可用。您可以查看一些使用这些 API 的[示例代码](http://code.google.com/p/google-api-java-client/source/browse/calendar-preview-android-sample/?repo=samples&name=default)，但您将无法运行它们，因为您需要在手机上安装这些服务。

同时，您可以使用`AccountManager`检索匿名 OAuth 2.0 令牌，如本文[所述](http://googleappsdeveloper.blogspot.com/2011/08/using-google-tasks-api-and-oauth-20-on.html)；但请记住，使用此技术不适用于 Google Drive API，因为`?key=`不再支持查询参数。

# c++ - C++ 演练困境：

> ID：11979429
> 
> 赞同：1
> 
> 时间：2012-08-16T01:17:14.610
> 
> 标签：c++, operator-overloading, copy-constructor

我以为我擅长编程，直到我遇到了我教科书中（很方便地）没有的演练的魔鬼。

我的猜测是关于复制构造函数。

它涉及两个类，*Paragraph*和*Word*。*每个Paragraph*类中都有一个*Word*对象的动态数组。问题是当在 main() 中调用**Paragraph 类 += 运算符重载方法**时 - 教授评论说它调用*Word*构造函数，然后是*Word* = 运算符。

 *****如果我错了，请纠正我，但不应该有另一个运算符重载来处理左侧的*Word对象和右侧的**字符串*吗？

```
#include <iostream>
 using namespace std;
 #define WIDTH 8

 class Word {
     char* text;
     int nletters;
   public:
     Word() {
         text = NULL;
         nletters = 0;
         cout << 'W';
     }
     Word(const char* s) {
         nletters = 0;
         while(s[nletters] != '\0')
             nletters++;
         text = new char[nletters];
         for (int i = 0; i < nletters; i++)
             text[i] = s[i];
         cout << 'X';
     }
     Word(const Word& p) {
         text = NULL;
         *this = p;  // calls assignment operator below
         cout << 'Y';
     }
     ~Word() {
         if (text != NULL) delete [] text;
         cout << "~W" << nletters;
     }
     Word& operator=(const Word& p) {
         if (this != &p) {
             if (text != NULL) delete [] text;
             nletters = 0;
             if (p.text != NULL) {
                 text = new char[p.nletters];
                 while(nletters < p.nletters) {
                     text[nletters] = p.text[nletters];
                     nletters++;
                 }
             }
             else
                 text = NULL;
         }
         cout << 'V';
         return *this;
     }
     int nLetters() const { return nletters; }
     friend ostream& operator<<(ostream& os, const Word& w) {
         if (w.text != NULL)
             for (int i = 0; i < w.nletters; i++)
                 os << w.text[i];
         else
             os << "***";
         os << ' ';
         return os;
     }
 };

 class Paragraph {
     Word* word;
     int mwords;
     int nwords;
     int width;
   public:
     Paragraph() {
         word  = NULL;
         width = WIDTH;
         nwords = 0;
         mwords = 0;
         cout << 'P' << endl;
     }
     Paragraph(const Paragraph& c) {
         word  = NULL;
         *this = c;  // calls assignment operator below
         cout << "cP";
     }
     Paragraph& operator=(const Paragraph& c) {
         if (this != &c) {
             if (word != NULL) delete [] word;
             if (c.word != NULL) {
                 word = new Word[c.mwords];
                 cout << endl;
                 for (int i = 0; i < c.nwords; i++)
                     word[i] = c.word[i];  // calls Word assignment operator
             }
             else
                 word = NULL;
             width  = c.width;
             nwords = c.nwords;
             mwords = c.mwords;
         }
         cout << "=P";
         return *this;
     }
     ~Paragraph() {
         if (word != NULL) delete [] word;
         cout << '\n' << nwords << "~P" << endl;
     }
     void make(int m) {
         if (word == NULL) {
             word = new Word[m];
             mwords = m;
             nwords = 0;
             width  = WIDTH;
         }
     }
     void setWidth(int w) { width = w; }
     friend ostream& operator<<(ostream& os, const Paragraph& p) {
         int nextWord = 0;
         for (int i = 0; i < p.nwords; i++) {
             if (nextWord + p.word[i].nLetters() > p.width) {
                 os << '\n';
                 nextWord = 0;
             }
             cout << p.word[i];
             nextWord += p.word[i].nLetters() + 1;
         }
         return os;
     }
     Paragraph& operator+=(const char* w) {
         if (nwords < mwords) {
             cout << "\n+=";
             word[nwords] = w;  // calls Word constructor, then Word = operator
             nwords++;
         }
         return *this;
     }
 };

 int main() {

     Paragraph p;
     cout << "--------\n";
     p.make(5);
     p += "This";
     p += "is";
     p += "hard";
     cout << "\n--------\n";
     cout << p << endl;
     cout << "--------\n";
     Paragraph q = p;
     q.setWidth(6);
     q += "too";
     cout << "\n--------\n";
     cout << q << endl;
     cout << "---------------\n";
     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:22:02.287

你的教授是对的。您不需要另一个运算符，因为 a`const char*`可以直接（隐式）转换为 a `Word`，通过：

```
Word(const char* s) 
```

这称为**转换构造函数**。如果将其声明为`explicit`，则不应再编译。见这里 - [http://ideone.com/brjiIi](http://ideone.com/brjIi)

于是就上线了

```
word[nwords] = w; 
```

`Word`确实创建了一个临时对象`w`，然后`Word`调用赋值运算符 for 将临时对象分配给`words[nwords]`。

关于代码的其他一些注释：

*   既然你的教授教你 C++，你应该学习`std::string`和`std::vector`. 他不需要 C++ 或类来展示指针或动态内存分配的强大功能。
*   像这样的陈述`if (word != NULL) delete [] word;`是多余的。`delete`或`delete[]`在`NULL`指针上保证工作（而不做任何事情）。
*   构造函数中的逻辑是错误的（如果你自己没有管理内存就不会）。在您构造 a 之后`Paragraph`，在您调用 之前它是不可用的`make()`，这是糟糕的设计。*****

# validation - strut2 中是否不推荐使用验证注释？

> ID：11979432
> 
> 赞同：0
> 
> 时间：2012-08-16T01:17:21.740
> 
> 标签：validation, struts2, annotations, interceptor, convention

我从这里读到

[https://cwiki.apache.org/WW/annotations.html](https://cwiki.apache.org/WW/annotations.html)

注释已被 Conventions 插件弃用和更改。

我注意到 Convention 插件的文档仍然使用 @Actions 或 @Interceptor 注释，但他们使用验证拦截器而不是使用 @Validations。

那么，我应该忘记使用@Validation 并使用验证拦截器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:20:36.890

不，不推荐使用验证注释。查看 API 会告诉您这一点。

该评论专门在该[页面的 Action Annotations 部分中](https://cwiki.apache.org/WW/annotations.html#Annotations-ActionAnnotations)，并且仅适用*于*那些现在由约定插件提供的注释 - 如所述。

无论验证配置方法如何，都会使用验证拦截器。

# asp.net - 具有 N 层架构的 WCF

> ID：11979438
> 
> 赞同：0
> 
> 时间：2012-08-16T01:17:34.693
> 
> 标签：asp.net, wcf

我很难让 WCF 项目与我的 Web 应用程序一起工作。我在解决方案下有 3 个项目，包括 asp.net 项目、DAL、WCF，并且 WCF 尝试使用 DAL 中的函数，DAL 从 asp.net 项目下的 web.config 文件中查找数据库连接字符串。但是，每次我调用数据库函数时，它都会返回空连接字符串。似乎我无法从 WCF 项目访问 asp.net 项目中的 web.config。理想的场景是使用 asp.net 和 WCF 中的 DAL 而无需修改任何代码。

这个 DAL 库继承 CommonApplication

```
public abstract class BaseDatabaseApplication : BaseApplication
    {

        protected readonly string myConnection; // connection string to the publisher (master) database

        public BaseDatabaseApplication()
        {
            // all connection strings are configured here, in the base class
            myConnection = CommonApplication.Configuration.ConnectionStrings.ConnectionStrings["myConnection"].ConnectionString;               
            // some function here
        }
} 
```

**BaseApplication.cs**

```
public abstract class BaseApplication
    {
        // since its static, there will only be one instance of it.
        private static CommonApplication applications;

        public static CommonApplication Applications
        {
            get { return applications; }
            set { applications = value; }
        }
    } 
```

**CommonApplication.cs**

```
public class CommonApplication
    {
        // only want to process the config once.
        private static Configuration configuration;

        public static Configuration Configuration
        {
            get { return configuration; }
            set { configuration = value; }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:46:14.163

System.Configuration.ConfigurationManager 类应该处理这种情况。

```
string connectionString = ConfigurationManager.ConnectionStrings["connectionStringName"].ConnectionString; 
```

尝试调整您的应用程序以使用它。

# big-o - 如何确定这个方程的 Big-O 表示法？

> ID：11979439
> 
> 赞同：1
> 
> 时间：2012-08-16T01:17:34.850
> 
> 标签：big-o

0.0001*2^n + 10 * n^2 + 10000 * log(n) + 10000000

我们看最高指数幂吗？

这个的大 O 是 O(n^2)？我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T01:21:12.130

> 这个的大 O 是 O(n^2)？我对吗？

不，`2^n`尽管系数很小，但它会主导其他一切。

# javascript - 使用 javascript 将 .show() 替换为具有类的图像

> ID：11979440
> 
> 赞同：0
> 
> 时间：2012-08-16T01:17:47.090
> 
> 标签：javascript

为了使 jquery 插件正常工作，我必须将**img**设置为**惰性****显示类：无**来自 CSS。

我知道如何在需要时使用 jquery 让它出现：

```
$("img.lazy").show(); 
```

问题是我正在页脚中加载 jquery 库，并且我需要在页面开始加载时出现图像。

我无法将代码移动到标题，因为没有 jquery。

所以我正在考虑用javascript来做。

我已经尝试过 getElementbyID 但我无法使其工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:22:17.683

好吧，如果你的元素上有一个 Id 属性，

```
document.getElementById("YourId").style.display = "block"; //or inline 
```

应该工作得很好。

`querySelectorAll``getElementsByClassName`如果您愿意/能够忽略旧版浏览器，也是选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:23:39.617

试试这个 JavaScript。正如您所要求的，它是独立于 jQuery 的。此解决方案[不适用于 IE8 及以下版本](http://caniuse.com/getelementsbyclassname)：

```
window.onload = function() {
  var images = document.getElementsByClassName('lazy');

  for (var i = 0; i <= images.length - 1; i++) {
    images.style.display = 'block';
  }
}; 
```

如果您不希望 IE 对此提供支持，那么您需要为您的图像提供唯一的 ID 并像这样选择它们：

```
window.onload = function() {
  document.getElementById('lazy').style.display = 'block';
}; 
```

或者 jQuery 方法，即使你`<script>`在页脚中（当然是在加载 jQuery 库之后）：

```
$(document).ready(function() {
  $('img.lazy').show();
}); 
```

**快速说明：**在页面底部加载 jQuery（或任何 JavaScript）不会减少加载时间，但会减少感知的加载时间。Web浏览器仍然必须加载相同数量的内容，只是在页面的可见内容之后加载了庞大的JS文件。我在 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:47:27.297

您可以使用以下方法显示所有具有类名的`lazy`图像`querySelectorAll`

```
var el = document.querySelectorAll("img.lazy");
for(i=0;i<el.length;i++) el[i].style.display='block'; 
```

[**演示**](http://jsfiddle.net/HauvK/1/)。

对于单个元素，您可以使用`querySelector`

```
var el = document.querySelector("img.lazy"); // only one/the first img with class name lazy
el.style.display='block'; 
```

[**演示**](http://jsfiddle.net/HauvK/2/)。

[**querySelector/querySelectorAll 的浏览器兼容性**](http://caniuse.com/queryselector)。

替代方案（在每个浏览器中运行）

```
​var els=document.getElementsByTagName('img');
if(els)
{
    for(i=0;i<els.length;i++)
    {
        if(els[i].className.match(/lazy/)) els[i].style.display='block';
    }
} 
```

[**演示**](http://jsfiddle.net/A7vb5/1/)。

# android - 另一种静态与非静态方法

> ID：11979442
> 
> 赞同：0
> 
> 时间：2012-08-16T01:18:18.047
> 
> 标签：android, static

我按照[这个](http://helpdesk.objects.com.au/java/how-to-fix-cannot-make-a-static-reference-to-the-non-static-method)站点的示例来消除静态与非静态方法的问题。

```
public static void startVoiceRecognitionActivity() {
  Log.d("Buttons","Start voice called in buttons");         

  Buttons demo = new Buttons();
  Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
  intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
  intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");

  Log.d("Buttons","Intent to start the command is:  "  +intent);
  demo.startActivityForResult(intent,VOICE_RECOGNITION_REQUEST_CODE);           
} 
```

此代码在主要活动中有效，但`demo.startActivityForResult(intent,VOICE_RECOGNITION_REQUEST_CODE);`在“按钮”服务类中生成以下错误：

> 按钮类型的 startActivityForResult(Intent, int) 方法未定义

谁能告诉我我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:45:59.983

如果不了解更多关于 Buttons 类的信息，就无法真正回答这个问题...... Buttons 是一个 Activity 还是它有一个 Context？如果没有，那就是你的问题。看到[这个问题](https://stackoverflow.com/questions/2848775/use-startactivityforresult-from-non-activity)。

# c++ - 提升条件互斥锁性能不佳

> ID：11979454
> 
> 赞同：0
> 
> 时间：2012-08-16T01:20:59.557
> 
> 标签：c++, boost-thread

我是使用 conditional_variables 的新手，所以我很容易在这里做一些愚蠢的事情，但是当我使用 boost 线程而不是直接调用函数时，我得到了一些奇怪的性能。如果我将在 func 上创建 boost 线程的行更改为直接调用 func，则代码会更快地运行几个命令。我已经尝试使用源伪造的 boost 线程池软件，它没有任何区别......

这是代码：

```
#include <boost/thread.hpp>

using namespace boost;

condition_variable cond;
mutex conditionalMutex;
int numThreadsCompleted = 0;
int numActiveThreads = 0;

void func()
{
  {
    lock_guard<mutex> lock(conditionalMutex);
    --numActiveThreads;
    numThreadsCompleted++;
  }
  cond.notify_one();
};

int main()
{
  int i=0;
  while (i < 100000)
    {
      if (numActiveThreads == 0)
        {
          ++numActiveThreads;
          thread thd(func);
          //Replace above with a direct call to func for several orders of magnitude
          //performance increase...
          ++i;
        }
      else
        {
          unique_lock<mutex> lock(conditionalMutex);
          while (numThreadsCompleted == 0)
            {
              cond.wait(lock);
            }
          numThreadsCompleted--;
        }
    }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:38:01.140

性能肯定比直接调用函数差很多。您启动一个线程，然后等待该线程结束。即使您将启动线程的开销减少到零，您也可以与该线程进行通信。而且您将至少有一个上下文切换，并且由于您的 func() 基本上什么都不做，因此开销成为主要因素。在 func() 中添加更多有效负载，比率会发生变化。如果要做的事情很少，就在找到这个事情的线程上做。

顺便说一句：您有一个竞争条件，因为您在没有锁定互斥锁的情况下写入 numActiveThreads。上面的代码归结为：

```
int main()
{
    int i=0;
    while (i < 100000)
    {
        thread thd(func);
        thd.join();
        ++i;
    }

    return 0;
} 
```

确实没有理由说这应该比：

```
int main()
{
    int i=0;
    while (i < 100000)
    {
        func();
        ++i;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:12:57.070

除了创建和销毁线程的开销之外，[分支预测](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)可能会导致性能差异。

在没有线程的情况下，if 语句始终为真，就像`numActiveThreads`在`0`每个循环迭代的开始和结束时一样：

```
while (i < 100000)
{
  if (numActiveThreads == 0) // branch always taken
  {
    ++numActiveThreads; // numActiveThreads = 1
    func();             // when this returns, numActiveThreads = 0
    ++i;                
  }
} 
```

这导致：

*   分支预测永远不会失败。
*   没有线程创建/销毁的开销。
*   没有时间阻塞等待获取`conditionalMutex`。

使用线程，`numActiveThreads`可能会或可能不会`0`在顺序迭代中。在我测试的大多数机器上，都观察到了可预测的短模式，每次迭代时 if 语句和 else 语句之间的分支交替出现。但是，有时在顺序迭代中选择 if 语句。因此，时间可能会浪费在：

*   分支预测失败。
*   线程的创建和销毁。如果创建和销毁是并发的，则可能在底层线程库中发生同步。
*   阻塞等待获取`conditionMutex`或等待`cond`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:36:59.600

您正在创建和销毁线程，这些线程通常被实现为一些较低级别的操作系统构造，通常是某种轻量级进程。这种创建和破坏可能代价高昂。

最后，你基本上在做

1.  创建线程
2.  等待线程退出

一遍又一遍地。这意味着创建/销毁，并且您每次都在这样做，因此成本会增加。

# java - 使用 ORMLite 填充 Listview 并返回 ID

> ID：11979469
> 
> 赞同：2
> 
> 时间：2012-08-16T01:22:57.277
> 
> 标签：java, android, sqlite, listview, ormlite

我正在尝试使用一个表中的数据创建一个列表视图。I want to get the list with the field "name" of the table but when selected i want it to return the field "ID".

```
mapDao = new MapDao(connSource, Map.class);

List<Map> maps;
maps = mapDao.queryForAll();
ListView mapList = (ListView) findViewById(R.id.mapList);

//??????//
setContentView(mapList); 
```

如何在列表中插入“名称”然后获取 ID？

（对不起我的英语不好...）

**编辑：**

嗯，根据我的发现，我必须使用一个适配器......一个 ArrayAdapter？游标适配器？我不知道。我认为我不能在适配器上使用“列表”？

# sql-server - MSAccess 和 SQL Server 后端、比较和更新生产数据库架构

> ID：11979470
> 
> 赞同：0
> 
> 时间：2012-08-16T01:23:02.363
> 
> 标签：sql-server, tsql, vbscript, ms-access-2007

我正在运行一个带有 SQLEXpress 后端的 MSACCESS 2007 前端数据库，这是一个大学研究项目。如此便宜/免费很好，我的开发时间（免费）也是如此......

我想要一个 T-sql（或 vbscript）来比较和更新生产数据库。

我正在开发数据库中进行更改，并希望以一种简单的方式将 dev 中的更改传播到 Prod 中。不幸的是，我无法手动更新生产。

所以我认为这个过程是：

1) 将 Dev 恢复到 prod sql server 2) 比较 Prod 与 Dev 数据库（仅架构）3) 将 Prod 更新为等于 Dev（仅架构）4) 检查步骤 2。

选项 2：

比较 使用数据库在本地生成 SQL 脚本 比较：运行 SQL 脚本

在这个阶段没有数据输入

我知道数据库比较工具（由 Red-Gate 提供）

无论如何，感谢您的任何指点。

罗杰

# file - Matlab eval 在使用简单的 matlab 脚本时遇到问题

> ID：11979471
> 
> 赞同：0
> 
> 时间：2012-08-16T01:23:05.360
> 
> 标签：file, matlab, eval

所以我有一个脚本，它应该运行一系列其他脚本，从它们那里收集数据并使用这些数据。

我的文件结构如下所示：

```
Results
    -result001.m
    -result002.m
    ...
    -result100.m
    -DataFromICP.m 
```

现在 dataFromICP 此时应该简单地遍历所有结果并将它们连接到一个名为 pointsAndTimeS 的结构中：

```
resultsFiles = dir('result*');
pointsAndTimeS = struct('points', zeros(length(resultsFiles)), 'times', zeros(length(resultsFiles)));
resultsFiles
count = 1;
for i = 1:length(resultsFiles)
     resultsFiles(i).name
     eval(resultsFiles(i).name)
     pointsAndTimesS.points(i) = numberOfPointsRead;
     pointsAndTimesS.times(i) = PoseEstimates(length(PoseEstimates)).timeElapsed;

end 
```

现在它正确地遍历文件，即：

```
resultsFiles = 

3x1 struct array with fields:
name
date
bytes
isdir
datenum 
```

其中名称是 result001.m 到 result100.m

但我从 eval 得到错误说：

```
Undefined variable "result10" or class "result10.m".

Error in DataFromICP (line 7)
   eval(resultsFiles(i).name) 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:32:14.387

`eval`需要一个字符串作为输入，因此它试图将您给它的输入（不是字符串）评估为变量或脚本的名称。要在 resultsFiles(i).name 中赋予它值，这应该有效：

```
eval(sprintf('%s', resultsFiles(i).name)); 
```

# jquery - ASP.NET CheckBoxList 客户端验证

> ID：11979472
> 
> 赞同：3
> 
> 时间：2012-08-16T01:23:14.627
> 
> 标签：jquery, asp.net

是否可以为 ASP.NET CheckBox 列表的 jquery validate 插件添加自定义验证功能？我正在使用 jquery 插件来验证客户端的所有控件。它与文本框、下拉列表等普通输入完美配合。出于某种原因不适用于Checkboxlist。在纯html中，checkboxlist变成了一个带有html输入复选框的表。我编写了一个自定义函数来检查是否选中了任何复选框并将其添加到jquery validate中，但由于某种原因，该函数没有得到叫。

```
jQuery.validator.addMethod('cb_selectone', function (value, element) {

     return false;
 }, 'Please select at least one option'); 
```

我一直尝试返回 false ，但表单仍然被成功验证。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:37:32.687

这是一种方法，但不使用 jquery.validate。

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<script type="text/javascript" src="Scripts/jquery-1.8.0.js"></script>
<script type="text/javascript">
    function cb_selectone(src, args) {
        var items = $("input[name^='cblTest']");
        for (i = 0; i < items.length; i++) {
            if ($(items[i]).is(":checked")) {
                args.IsValid = true;
                return;
            }
        }
        args.IsValid = false;
    }
</script>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:CheckBoxList runat="server" ID="cblTest">
            <asp:ListItem Text="Test A" Value="A"></asp:ListItem>
            <asp:ListItem Text="Test B" Value="B"></asp:ListItem>
        </asp:CheckBoxList>
        <asp:CustomValidator ErrorMessage="Please select at least one.<br/>" ClientValidationFunction="cb_selectone" runat="server" />
        <asp:Button runat="server" ID="btnTest" Text="Submit" />
    </div>
    </form>
</body>
</html> 
```

# c - 文件读取和字符计数

> ID：11979474
> 
> 赞同：0
> 
> 时间：2012-08-16T01:23:27.057
> 
> 标签：c, file, newline, argv, fgetc

我正在尝试读取文件，然后按字符输出文件。我希望用户输入一个数字，该数字将是要显示的行数。

如果没有以下行，我的代码将显示整个文本文件。if (y == lineCount) 中断；

当计算的换行字符数等于用户输入的数字时，该行应该中断循环。

我可以计算 newLine 字符的数量并显示它，但是当我在达到一定数量的 newLines 后尝试中断循环时，代码在 1 个字符后中断

```
#include <stdio.h>

int main ( int argc, char *argv[] )
{
    FILE *file = fopen( argv[1], "r" );
    int lineCount, x, y;

    printf("enter a number of lines of lines to be displayed\n");
    scanf("&d", &y);

    while  ( ( x = fgetc( file )) != EOF )  //read characters
    {
        printf( "%c", x );       //print character

        if (x == '\n')           //check for newline character
            lineCount++;    

        if (y == lineCount)      //check for newLine character
            break;               //??? y = lineCount after 1 character???
    }

    printf( "%d lines in the text file\n", lineCount );  //testing the newline characters was being read

   fclose( file );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:30:42.427

你想要 scanf("%d", &y) 而不是 scanf("&d", &y)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:32:56.263

你想要`scanf("%d", &y)`而不是`scanf("&d", &y)`.

你也从不初始化`lineCount`，所以它的初始值不保证为 0。

# c# - C#中的压缩文件

> ID：11979479
> 
> 赞同：0
> 
> 时间：2012-08-16T01:23:51.490
> 
> 标签：c#, .net

我有下面的代码。基本上使用下面的代码，我试图从 C:\ 中的文件夹中抓取文件，然后将它们移动到 D:\ 并通过附加日期来压缩它们。我在“string outputfilename = Path.Combine ...”出现错误，我还想从文件夹中删除较旧的存档文件..请任何人指导我。

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace test1
{
   class Program
   {
      string folder = @"C:\folder1";
      string folder2 = @"D:\Test1";
      string outputFilename = Path.Combine(output, string.Format(Archive{0}.zip"),DateTime.Now.ToString("MMddyyyy"));      
      using (ZipFile zip = new ZipFile())
      {
         foreach (var file Directory.EnumerateFiles(folder))
         zip.Save(outputFilename)
      }
   }
} 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:27:02.363

试试这种方式：

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            using (FileStream zipToOpen = new FileStream(@"c:\users\exampleuser\release.zip", FileMode.Open))
            {
                using (ZipArchive archive = new ZipArchive(zipToOpen, ZipArchiveMode.Update))
                {
                    ZipArchiveEntry readmeEntry = archive.CreateEntry("Readme.txt");
                    using (StreamWriter writer = new StreamWriter(readmeEntry.Open()))
                    {
                            writer.WriteLine("Information about this package.");
                            writer.WriteLine("========================");
                    }
                }
            }
        }
    }
} 
```

从[这里取](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:43:50.407

尝试

```
Response.Clear();

        var downloadFileName = string.Format("" + FileName + ".zip");//string.Format("YourDownload-{0}.zip", DateTime.Now.ToString("yyyy-MM-dd-HH_mm_ss"));
        Response.ContentType = "application/zip";
        Response.AddHeader("Content-Disposition", "filename=" + downloadFileName);

        // Zip the contents of the selected files
        using (var zip = new ZipFile())
        {
            // Add the password protection, if specified
            if (!string.IsNullOrEmpty(txtZIPPassword.Text))
            {
                zip.Password = txtZIPPassword.Text;

                // 'This encryption is weak! Please see 
               // zip.Encryption = EncryptionAlgorithm.WinZipAes128;
            }

            // Construct the contents of the README.txt file that will be included in this ZIP
            var readMeMessage = string.Format("Your ZIP file {0} contains the following files:{1}{1}", downloadFileName, Environment.NewLine);

            // Add the checked files to the ZIP
            foreach (ListItem li in cblFiles.Items)
                if (li.Selected)
                {
                    // Record the file that was included in readMeMessage
                    readMeMessage += string.Concat("\t* ", li.Text, Environment.NewLine);

                    // Now add the file to the ZIP (use a value of "" as the second parameter to put the files in the "root" folder)
                    zip.AddFile(li.Value, "Your Files");
                }

            if (!String.IsNullOrEmpty(chkDocument.Value) && chkDocument.Checked == true)
            {
                zip.AddFile(chkDocument.Value, "Cover Sheet");
                readMeMessage += string.Concat("\t* ", lbldocName.Text.Trim(), Environment.NewLine);
            }
            // Add the README.txt file to the ZIP
            zip.AddEntry("README.txt", readMeMessage, Encoding.ASCII);

            // Send the contents of the ZIP back to the output stream
            //   zip.MaxOutputSegmentSize = 65536;
            zip.Save(Response.OutputStream);
            // int a=zip.NumberOfSegmentsForMostRecentSave;
            // txtZIPPassword.Text=a.ToString();
        }

        Response.Flush();
        HttpContext.Current.Response.End(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:40:25.297

我以前使用过 SharpZipLib，这里有很多示例[可以](http://wiki.sharpdevelop.net/SharpZipLib-Zip-Samples.ashx#Create_a_Zip_with_full_control_over_contents_0)帮助您入门。

谢谢

# http - REST 的资源和操作 URI 约定

> ID：11979480
> 
> 赞同：6
> 
> 时间：2012-08-16T01:24:07.667
> 
> 标签：http, rest

我正处于开发一些 REST API 的十字路口，我发现没有关于这个主题的真正讨论，更不用说对任何一个的坚定辩护了。

据我了解，使用 REST`/<resource>/<action>`作为您的 URL

因此，要禁用用户，您将拥有：

```
PUT /user/disable 
```

似乎有道理。但是，我们正在讨论更基本的方法：

应该是：

```
POST /user  (creates a user *implicitly*)
POST /user/create (creates a user *explicitly*)

DELETE /user/:id
DELETE /user/:id/delete 
```

第一个似乎被认为是“标准”，第二个显然在意图上更加清晰，并且与 /user/disable 等方法一致

也许这场辩论已经在其他地方肆虐，但我没有看到它。如果您对此持“宗教信仰”，那么现在是您进行教皇的机会

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T07:57:48.727

`/<resource>/<action>`作为您的 URL 不是 REST 。REST 使用 HTTP 动词来确定要对给定资源或资源集合执行的操作。这意味着：

*   创建资源是：`POST /users`
*   阅读资源是：`GET /users/<id>`
*   更新（实际替换）资源是：`PUT /users/<id>`
*   删除资源是：`DELETE /users/<id>`

那就是休息。

对于所有其他方法，您可以使用其他动词，例如`PATCH`. 禁用用户可能是：

```
PATCH /users/<id>/disable 
```

这不是纯 REST，但没关系。

**编辑：**如果你想符合 REST，禁用用户意味着你想改变他的状态。换句话说，你想改变它的一个属性，比如一个`state`标志。您可以“修补”您的资源：

```
PATCH /users/<id>?state=disabled 
```

这是 REST。您还可以`PUT`按照评论中的说明使用替换资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T07:56:44.093

@Christian Bongiorno

您正在对与 REST 无关的 URI 中的操作进行编码。它是最清晰的 RPC 形式。

您需要使用您使用的底层协议中定义的方法（即您的情况下的 HTTP）来识别资源并对这些资源执行操作。HTTP 规范为这些方法定义了语义，因此您必须执行以下操作，而不是直接在 URI 中编码操作：

*   GET /users - 返回用户列表（每个条目/项目都有自己指向特定用户的链接）
*   GET /users/:id - 返回特定用户
*   POST /users - 在 /users 资源下创建新用户
*   POST /users/:id - 编辑用户（也可以在这里使用 PATCH 方法）
*   PUT /users/:id - 替换用户
*   DELETE /users/:id - 删除用户

这就是你应该如何看待行动。但这还不够，您需要使用支持超媒体控件（例如链接）的媒体格式（至少），以便能够描述这些操作，例如：

*   HAL - [http://stateless.co/hal_specification.html](http://stateless.co/hal_specification.html)
*   Collection.JSON - [http://amundsen.com/media-types/collection/format/](http://amundsen.com/media-types/collection/format/)
*   链接关系注册表 - [http://www.iana.org/assignments/link-relations/link-relations.xml](http://www.iana.org/assignments/link-relations/link-relations.xml)

一些快速交互示例：

```
***Request***
GET /users HTTP/1.1
Host: service.org
Accept: application/x+json

***Response***
HTTP/1.1 200 OK
Content-Type: application/x+json
Content-Length: ...

[{
  "name": "john",
  "links": {
    "self": "/users/1",
    "edit": "/users/1"
  }
}, {
  "name": "jane",
  "links": {
    "self": "/users/2",
    "edit": "/users/2"
  }
}]

***Request***
GET /users/2 HTTP/1.1
Host: service.org
Accept: application/x+json

***Response***
HTTP/1.1 200 OK
Content-Type: application/x+json
Content-Length: ...
{
  "name": "jane",
  "links": {
    "self": "/users/2",
    "edit": "/users/2"
  }
}

***Request***
DELETE /users/2 HTTP/1.1
Host: service.org

***Response***
HTTP/1.1 200 OK
Content-Type: text/plain
Content-Length: ...

Resource was destroyed...

***Request***
POST /users/2 HTTP/1.1
Host: service.org
Content-Type: application/x+json
Content-Lenght: ...

{"status": "disabled"}

***Response***
HTTP/1.1 303 See Other
Location: /users/2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-27T17:20:35.137

在您的 URL 中执行操作不是 REST。

我解决这个问题的方法是定义一个动作子资源​​。

您可以执行以下操作：

`POST /users/123/actions`

并请求正文为 json：

`{ "type": "reset_password", "current_password": "mypassword", "new_password": "$myNewPass2#" }`

# c++ - 为什么 g++/ld 内存不足？

> ID：11979482
> 
> 赞同：6
> 
> 时间：2012-08-16T01:25:09.740
> 
> 标签：c++, qt, g++, mingw, ld

我正在尝试编译 Qt（Windows 7，msys 下的 mingw32-g++ 32 位）并且 ld 内存不足。有谁知道为什么？或者也许是一种解决方法？谢谢！

```
$ g++ -mthreads -shared -Wl,--out-imlib,i:/Programs/Qt/lib/libQtGuid4.a -o ../
../lib/QtGuid4.dll object_script.QtGuid.Debug -L'i:/Programs/Qt/lib' -L'i:/Pro
克/Qt/lib' -lgdi32 -lcomdlg32 -loleaut32 -limm32 -lwinmm -lwinspool -lws2_32
 -lole32 -luuid -luser32 -ladvapi32 tmp/obj/debug_shared/QtGuid_resource_res.o
-lmsimg32 -lshell32 -lQtCored4 -lz

我：/programs/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../../mingw32/bin/ld.exe：o
ut 内存分配 133614056 字节
collect2.exe：错误：ld 返回 1 退出状态

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:28:31.733

感谢所有帮助我找到解决此问题的方法的评论者。我所做的是`ld`用一个大地址感知版本替换。我从bin 文件夹中的[这个](https://pcxprj.googlecode.com/files/MinGW64CRT_gcc4.6.3pre_static_win32.7z)MinGW 版本下载了它。链接该发行版的人的帖子在[这里](http://sourceforge.net/mailarchive/message.php?msg_id=28487743)。我希望这可以帮助遇到此问题的其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T12:52:58.677

如果您安装当前版本的 MinGW 4.6 或更高版本，则编译 QT 应指定标志：

配置-平台 win32-g++-4.6

在 win32-g++4.6 的“mkspecs”中已经定义了标志 -fno-keep-inline-dllexport 可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-28T21:00:57.057

我试图从其他地方下载 ld.exe，但它不适合我的工具包 (TDM-GCC)。某些插件无法加载。希望制作 ld.exe LAA 并不难。我在十六进制编辑器中打开了 ld.exe，并在偏移量 0x96“0f 03”到“2f 03”处进行了修补。这对我有用。

# ubuntu - 在 ubuntu 12.04 上使用 libc++ 的 clang 3.1，找不到 iostream

> ID：11979484
> 
> 赞同：9
> 
> 时间：2012-08-16T01:25:19.180
> 
> 标签：ubuntu, clang, libc++

我正在尝试使用 clang 编译一个 C++ 程序，我在这里使用打包版本安装了[https://launchpad.net/~eudoxos/+archive/llvm-3.1](https://launchpad.net/~eudoxos/+archive/llvm-3.1)。这是命令：

```
clang++   -std=c++11 -stdlib=libc++ -g -v -c main.cpp 
```

我得到了这个结果：

```
ignoring nonexistent directory "/usr/include/c++/v1"
ignoring nonexistent directory "/usr/bin/../lib/clang/3.1/include"
ignoring nonexistent directory ""
ignoring duplicate directory "/usr/include/x86_64-linux-gnu"
#include "..." search starts here:
#include <...> search starts here:
/usr/local/include
/usr/include/clang/3.1/include
/usr/include/x86_64-linux-gnu
/usr/include

main.cpp:1:10: fatal error: 'iostream' file not found
#include <iostream> 
```

如您所见，它没有在正确的包含目录 /usr/include/c++/4.6 中搜索。但我认为问题远不止于此。即使我强制它在该目录中搜索，我也得到了这个：

```
In file included from main.cpp:1:
/usr/include/c++/4.6/iostream:38:10: fatal error: 'bits/c++config.h' file not found
#include <bits/c++config.h> 
```

并且该文件在该区域中不存在。我在想可能缺少 libc++，但是在我试图从源代码编译 libc++（我怀疑这会起作用）之前，因为我找不到任何专用的 libc++ ubuntu 包，所以我希望你们能帮忙。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:58:54.940

不幸的是，据我所知，您目前需要从源代码构建 libc++（可能还有 libc++abi），以便在 Linux 上使用 -stdlib=libc++ 和 clang。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-18T06:30:15.867

sudo apt-get install -y clang-3.6 lldb-3.6 libc++-dev libc++abi-dev

[https://gist.github.com/fyears/745da3cf6b19dbff3d0e](https://gist.github.com/fyears/745da3cf6b19dbff3d0e)

# python - 使用 lxml，如何找到父节点的兄弟节点？

> ID：11979486
> 
> 赞同：2
> 
> 时间：2012-08-16T01:25:44.877
> 
> 标签：python, xml, xpath, lxml

XML 不断向我抛出曲线球。我很难找到我能理解的手册。因此，对于过去几天的所有问题，我深表歉意。

无论如何，我有以下 XML：

```
 <clade>
        <clade>
          <branch_length>0.5</branch_length>
          <clade>
            <name>MnPV1</name>
            <annotation>
<desc>Iotapapillomavirus 1</desc></annotation><chart><group>Iota</group></chart><branch_length>1.0</branch_length>
          </clade>
          <clade> 
```

我想将其更改为：

```
 <clade>
    <clade>
      <branch_length>0.5</branch_length>
      <clade>
        <name bgstyle="green">MnPV1</name>
        <annotation><desc>Iotapapillomavirus 1</desc><uri>http://pave.niaid.nih.gov/#fetch?id=MnPV1REF&amp;format=Locus%20view&amp;hasStructure=none</uri></annotation><chart><group>Iota</group></chart><branch_length>1.0</branch_length>
      </clade>
      <clade> 
```

所以我想改变：

```
<name>MnPV1</name> 
```

到：

```
<name bgstyle="green">MnPV1</name> 
```

问题是，我正在寻找是否：

```
tree.xpath('//phylo:group[text()="Iota"] 
```

如果是，我想获得“组”节点的“叔叔”，这样我就可以编辑“名称”节点

到目前为止，这是我想出的：

```
tree = lxml.etree.XML(data)
nsmap = {'phylo': 'http://www.phyloxml.org'}
matches = tree.xpath('//phylo:group[text()="Iota"]', namespaces=nsmap) 
```

```
for e in matches:
    uncle=e.getparent().getsibling() #however, getsibling() does not exist... 
```

我将不胜感激任何帮助*（和/或针对傻瓜的 lxml 建议）*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T02:11:12.687

这个怎么样？

```
>>> data = r'''<clade>
...  <name>MnPV1</name>
...  <annotation>
...    <desc>Iotapapillomavirus 1</desc>
...  </annotation>
...  <chart>
...    <group>Iota</group>
...  </chart>
...  <branch_length>1.0</branch_length>
... </clade>'''
...
>>> tree = lxml.etree.XML(data)
>>> for name in tree.xpath('//group[text()="Iota"]/../preceding-sibling::name'):
...   name.attrib['bgstyle'] = 'green'
...
>>> print lxml.etree.tostring(tree, pretty_print=True)
<clade>
 <name bgstyle="green">MnPV1</name>
 <annotation>
   <desc>Iotapapillomavirus 1</desc>
 </annotation>
 <chart>
   <group>Iota</group>
 </chart>
 <branch_length>1.0</branch_length>
</clade>

>>> 
```

诀窍是使用 XML 工具（例如，XPath 和 XSLT）来操作 XML 文档。[w3schools 网站](http://www.w3schools.com/xsl/xpath_axes.asp)是很好的起点。XPath 本身就相当强大，一旦你掌握了它的窍门，它就非常易读。不过，这类问题最好使用 XSLT 解决。如果您要处理一堆 XML，请帮自己一个大忙，购买一份[Oxygen XML 编辑器](http://oxygenxml.com)或类似的东西。

如果您正在寻找使用更少 XPath 和更多 Python 的东西，那么使用[`getparent`](http://lxml.de/api/lxml.etree._Element-class.html#getparent)后跟调用[`getprevious`](http://lxml.de/api/lxml.etree._Element-class.html#getprevious). 我不确定支持的程度`getparent`和效果如何`getprevious`，但是它们已记录在案并且可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:18:53.187

**这是一个简单的 XSLT 解决方案：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="clade[chart/group='Iota']/name">
  <name bgstyle="green"><xsl:apply-templates/></name>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<clade>
    <clade>
        <branch_length>0.5</branch_length>
        <clade>
            <name>MnPV1</name>
            <annotation>
                <desc>Iotapapillomavirus 1</desc>
            </annotation>
            <chart>
                <group>Iota</group>
            </chart>
            <branch_length>1.0</branch_length>
        </clade>
    </clade>
</clade> 
```

**产生了想要的正确结果**：

```
<clade>
   <clade>
      <branch_length>0.5</branch_length>
      <clade>
         <name bgstyle="green">MnPV1</name>
         <annotation>
            <desc>Iotapapillomavirus 1</desc>
         </annotation>
         <chart>
            <group>Iota</group>
         </chart>
         <branch_length>1.0</branch_length>
      </clade>
   </clade>
</clade> 
```

解释：

1.  使用和覆盖**[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**，它“按原样”复制每个节点（为其选择执行）。

2.  简单的覆盖模板匹配所需`name`元素并将其替换为具有所需新属性的同名元素。

# oracle - 带有 utf8 的 SQL 加载器

> ID：11979495
> 
> 赞同：6
> 
> 时间：2012-08-16T01:27:09.463
> 
> 标签：oracle, utf-8, sql-loader

使用 SQL*Loader 加载日语数据时出现以下错误。我的数据库是 UTF8（NLS 参数），我的操作系统支持 UTF8。

```
Record 5: Rejected - Error on table ACTIVITY_FACT, column METADATA.
ORA-12899: value too large for column METADATA (actual: 2624, maximum: 3500) 
```

我的控制文件：

```
load data
characterset UTF8
infile '../tab_files/activity_fact.csv' "STR ';'"
APPEND
into tableactivity_fact
fields terminated by ',' optionally enclosed by '~'
TRAILING NULLCOLS
(metadata CHAR(3500)) 
```

我的桌子

```
create table actvuty_facr{
metadata varchar2(3500 char)
} 
```

为什么 SQL Loader 抛出错误的异常，`(actual: 2624, maximum: 3500)`. 2624 小于 3500。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T14:11:34.970

所有数据文件（UFT-16 除外）的默认长度语义是字节。因此，在您的情况下，您的 CHAR 为 3500 字节而不是字符。您的文件中有一些多字节字符，因此 2624 个字符使用了超过 3500 个字节，因此是（误导性的）消息。

您可以改用字符长度语义来解决这个问题

更改控制文件中的这一行

```
characterset UTF8 
```

对此

```
characterset UTF8 length semantics char 
```

它将适用于 CHAR 字段（和其他一些字段）的字符 - 与您设置表的方式相同，因此每个字符最多 3500 个字符，最多四个字节。

有关更多信息，请参阅[字符长度语义实用程序指南](http://docs.oracle.com/cd/E11882_01/server.112/e22490/ldr_control_file.htm#i1008619)

# java - 有没有办法在 java 中查询 argv 的运行时？

> ID：11979504
> 
> 赞同：1
> 
> 时间：2012-08-16T01:28:34.657
> 
> 标签：java, argv

有没有办法在 java 中查询 argv 的运行时？就像 python 中的 sys.argv 一样。

是的，我意识到在 java 中你通常只是从 main 传递参数。我意识到这在实践中可能不是一个好主意。我正在从 python 移植一个默认参数为 sys.argv 的库。我可能会决定最终包含或排除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:19:59.197

我认为不可能`main(String[])`通过任何其他方式掌握这些论点。

（我认为使用 API 可能是可能的。该`RuntimeMXBean`API 上有一个方法被调用`getInputArguments()`，但[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/management/RuntimeMXBean.html#getInputArguments%28%29)明确表示`main(...)`不包括传递给的参数。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T02:37:06.037

是的，我认为有一种有点笨拙的方法可以做到这一点。我在[这里](http://ideone.com/dauVk)放了一些代码。

# javascript - 使实体从 ImpactJS 中的另一个实体反弹

> ID：11979517
> 
> 赞同：3
> 
> 时间：2012-08-16T01:30:19.323
> 
> 标签：javascript, impactjs

我有一个受重力控制的玩家实体，我在屏幕底部有另一个可以移动的实体。

当我下落的玩家实体撞到底部的实体时，我希望它从它身上反弹。

理想情况下，我想使用玩家实体的 .bounciness 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T04:36:01.677

您希望底部实体包含以下属性：

```
checkAgainst: ig.Entity.TYPE.A, // player entity type
collides: ig.Entity.COLLIDES.ACTIVE 
```

然后，您希望您`check()`的 bottomEntity 方法在与玩家实体碰撞时反转玩家实体的速度。

```
check: function(other) {
  other.vel.y -= 100; // you could also use other.accel.y
} 
```

此外，如果您愿意，您也可以处理带有碰撞的偏转角（类似于 Arkanoid 游戏）：

如果玩家击中中心，您希望它直接向上。如果它击中右半边，你希望它向右；如果它撞到左边，你希望它向左走。

所以找到玩家击中底部实体的位置，并找到它相对于实体末端的角度。

```
var playerPos = player.pos.x - bottomEntity.pos.x;
var relativePos = ( bottomEntity.size.x - playerPos);
var angle = relativePos * ( Math.PI / bottomEntity.size.x ); // translate to radians - this finds the number of radians per bottom entity pixel 
```

一旦你得到了角度，就拿`cos`它来抓住方向。将方向乘以底部实体的速度，您就得到了底部实体的新速度。

```
var newVel = Math.cos( angle ) * bottomEntity.vel.x; 
```

然后您的`check()`方法将如下所示：

```
check: function(other) {
  var playerPos = other.pos.x - bottomEntity.pos.x;
  var relativePos = ( bottomEntity.size.x - playerPos);
  var angle = relativePos * ( Math.PI / bottomEntity.size.x ); // translate to radians - this finds the number of radians per bottom entity pixel
  other.vel.y -= newVel;
} 
```

# php - 使用 EXTJS4，如何将 multiselct 组合内容发布到 PHP

> ID：11979521
> 
> 赞同：0
> 
> 时间：2012-08-16T01:31:03.623
> 
> 标签：php, json, extjs4

使用 EXTJS4，我在表单中有一个多选组合控件，它在 JavaScript 中创建一个选定值的数组。我需要将此表单数据（3 个其他文本字段值）以及多选的输出（数组 - [“value1”、“value2”] 等）发送到 PHP 脚本，然后加载这些值到 Oracle 数据库中。我将需要表单中的静态值，以及传回的每个数组元素，以将新记录添加到数据库中。我不确定如何将从多选传入的数组转换为 PHP 可以理解的内容。

例如，如果表单传回 - “fname”：John，“lname”：Smith，“email”：jsmith@email.com，“fav_color”：[“red”，green”，“blue”]。我需要创建 3 个查询以将这些值写入数据库 - { "John, Smith, jsmith@email.com, red", "John, Smith, jsmith@email.com, green", "John, Smith, jsmith@email .com, blue" } 或者我如何“拆分”或分解来自 JSON 的值以允许 PHP 读取以便我可以编写查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:53:06.253

用 解码 PHP 中的 JSON，`json_decode()`它包含的任何数组都是 PHP 数组。例如：

```
$data = json_decode(

  '{ "fav_color" : [ "red", "green", "blue" ] }',

  TRUE

);

var_export( $data );

// Outputs:

array (
  'fav_color' =>
  array (
    0 => 'red',
    1 => 'green',
    2 => 'blue',
  ),
) 
```

这样您就可以访问 PHP 中的数组——不确定您需要运行哪些查询来完成您想要使用该数据完成的操作。

# 组合

> 那么如何将每个数组元素与传入的每个静态元素一起放入？

有不同的方法可以解决这个问题。这里有一对：

1)

```
$combinations = array();

foreach ( $data[ 'fav_color' ] as $color ) {

  $combination = $data;

  $combination[ 'fav_color' ] = $color;

  $combinations[] = $combination;

} 
```

2)

我不知道您如何从表单中提取数据以序列化为 JSON，但如果您的 HTML 看起来像这样......：

```
<form method="post">

<input type="text" name="static[fname]" value="First" />

<input type="text" name="static[lname]" value="Last" />

<input type="text" name="static[email]" value="Email" />

<select multiple name="fav_color[]">

<option value="red" selected>Red</option>

<option value="green" selected>Green</option>

<option value="blue" selected>Blue</option>

</select>

</form> 
```

...并且您将表单提交给 PHP，您将拥有以下数据结构`$_POST`：

```
array(

  'static' => array(

    'fname' => "First",

    'lname' => "Last",

    'email' => "Email"

  ),

  'fav_color' => array( 'red', 'green', 'blue' )

) 
```

那么，类似于#1，你可以这样做：

```
$combinations = array();

foreach ( $data[ 'fav_color' ] as $color ) {

  $combination = $data[ 'static' ];

  $combination[ 'fav_color' ] = $color;

  $combinations[] = $combination;

} 
```

# php - 有什么方法可以普遍影响 symfony2 中的所有学说查询

> ID：11979527
> 
> 赞同：1
> 
> 时间：2012-08-16T01:32:03.277
> 
> 标签：php, symfony, doctrine-orm

我有大约 30 个实体，并且都在查询数据库。现在我希望我应该只获得我拥有的那些记录`ACTIVE = 1`。我所有的表都有那个字段。

一种方法是更改​​我正在使用的所有查询。

是否有任何其他选择，我可以在执行之前获取查询并`where clause`像任何其他方法一样添加 from 单个函数`Listener or event`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T01:56:37.243

确实。它被称为“过滤器”——您可以根据需要激活和停用它们。请参阅此处的手册：http: [//docs.doctrine-project.org/en/latest/reference/filters.html](http://docs.doctrine-project.org/en/latest/reference/filters.html)。

您可以在 Symfony2 中使用配置文件中教义节点下的“过滤器”节点来配置它们。每个过滤器都应该有两个子节点：“class”和“enabled”（当然，enabled 应该是 true，class 应该是指向过滤器的 FQCN）。

# javascript - 从 getUserMedia 录制音频流

> ID：11979528
> 
> 赞同：13
> 
> 时间：2012-08-16T01:32:07.427
> 
> 标签：javascript, html, audio, webrtc, getusermedia

最近几天，我尝试使用javascript来录制音频流。我发现没有有效的示例代码。

有浏览器支持吗？

这是我的代码

```
navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||
                         navigator.mozGetUserMedia || navigator.msGetUserMedia; 

navigator.getUserMedia({ audio: true }, gotStream, null);
function gotStream(stream) {

        msgStream = stream;        
        msgStreamRecorder = stream.record(); // no method record :(
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-10-08T02:34:45.830

getUserMedia 使您可以访问设备，但录制音频取决于您。为此，您需要“监听”设备，构建数据缓冲区。然后，当您停止收听设备时，您可以将该数据格式化为 WAV 文件（或任何其他格式）。格式化后，您可以将其上传到您的服务器 S3，或直接在浏览器中播放。

要以对构建缓冲区有用的方式收听数据，您将需要一个 ScriptProcessorNode。ScriptProcessorNode 基本上位于输入（麦克风）和输出（扬声器）之间，让您有机会在音频数据流式传输时对其进行操作。不幸的是，实现并不简单。

你需要：

*   [getUserMedia](https://developer.mozilla.org/en-US/docs/Web/API/Navigator.getUserMedia)访问设备
*   [AudioContext](https://developer.mozilla.org/en-US/docs/Web/API/AudioContext)创建一个 MediaStreamAudioSourceNode 和一个 ScriptProcessorNode
*   MediaStreamAudioSourceNode 表示音频流
*   [ScriptProcessorNode](https://developer.mozilla.org/en-US/docs/Web/API/ScriptProcessorNode)通过 onaudioprocessevent 访问流式音频数据。该事件公开了您将用来构建缓冲区的通道数据。

把它们放在一起：

```
navigator.getUserMedia({audio: true},
  function(stream) {
    // create the MediaStreamAudioSourceNode
    var context = new AudioContext();
    var source = context.createMediaStreamSource(stream);
    var recLength = 0,
      recBuffersL = [],
      recBuffersR = [];

    // create a ScriptProcessorNode
    if(!context.createScriptProcessor){
       node = context.createJavaScriptNode(4096, 2, 2);
    } else {
       node = context.createScriptProcessor(4096, 2, 2);
    }

    // listen to the audio data, and record into the buffer
    node.onaudioprocess = function(e){
      recBuffersL.push(e.inputBuffer.getChannelData(0));
      recBuffersR.push(e.inputBuffer.getChannelData(1));
      recLength += e.inputBuffer.getChannelData(0).length;
    }

    // connect the ScriptProcessorNode with the input audio
    source.connect(node);
    // if the ScriptProcessorNode is not connected to an output the "onaudioprocess" event is not triggered in chrome
    node.connect(context.destination);
  },
  function(e) {
    // do something about errors
}); 
```

我建议您使用[AudioRecorder](https://github.com/cwilso/AudioRecorder)代码，而不是自己构建所有这些，这太棒了。它还处理将缓冲区写入 WAV 文件。 [这是一个演示](https://www.webaudiodemos.appspot.com/AudioRecorder/index.html)。

这是另一个[很棒的资源](http://typedarray.org/from-microphone-to-wav-with-getusermedia-and-web-audio/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-25T05:00:28.440

对于支持[MediaRecorder API](https://developer.mozilla.org/en/docs/Web/API/MediaRecorder_API)的浏览器，请使用它。

对于不支持 MediaRecorder API 的旧浏览器，有三种方法可以做到

1.  作为`wav`
    *   所有代码客户端。
    *   无压缩录音。
    *   源代码 --> [http://github.com/mattdiamond/Recorderjs](http://github.com/mattdiamond/Recorderjs)
2.  作为`mp3`
    *   所有代码客户端。
    *   压缩录音。
    *   源代码 --> [http://github.com/Mido22/mp3Recorder](http://github.com/Mido22/mp3Recorder)
3.  as `opus packets` （可以得到输出为`wav`,`mp3`或`ogg`）
    *   客户端和服务器（`node.js`）代码。
    *   压缩录音。
    *   源代码 --> [http://github.com/Mido22/recordOpus](http://github.com/Mido22/recordOpus)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-22T06:58:00.647

你可以查看这个网站： [https ://webaudiodemos.appspot.com/AudioRecorder/index.html](https://webaudiodemos.appspot.com/AudioRecorder/index.html)

它将音频存储到客户端的文件 (.wav) 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T08:46:16.667

有一个错误，目前只允许音频。请参阅[http://code.google.com/p/chromium/issues/detail?id=112367](http://code.google.com/p/chromium/issues/detail?id=112367)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-16T17:53:31.900

目前，如果不将数据发送到服务器端，这是不可能的。[但是，如果他们开始支持MediaRecorder 工作草案](http://www.w3.org/TR/mediastream-recording/)，这将很快在浏览器中成为可能。

# javascript - JavaScript 正则表达式匹配失败

> ID：11979535
> 
> 赞同：0
> 
> 时间：2012-08-16T01:32:33.230
> 
> 标签：javascript, regex

我在 javascript 中使用正则表达式匹配字符串时遇到问题。我试图让一切都达到“at”这个词。我正在使用以下内容，虽然它没有返回任何错误，但它也没有做任何事情。

```
var str = "Team A at Team B";
var matches = str.match(/(.*?)(?=at|$)/); 
```

在遇到此 SO 帖子之前，我尝试了多种正则表达式模式，[Regex to capture all before first optional string](https://stackoverflow.com/questions/5979342/regex-to-capture-everything-before-first-optional-string)，但它不会返回我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:36:15.317

`?`在您的第一个捕获组和第二个捕获组中删除`|$`，并添加`^`到标记字符串的开头：

```
str.match(/^(.*)(?=at)/) 
```

或者（我个人觉得下面更容易阅读，但你的电话）：

```
str.substr(0, str.search(/\bat\b/)) 
```

# javascript - 在 Node.js 中使用 Degugger 检查方法链

> ID：11979539
> 
> 赞同：0
> 
> 时间：2012-08-16T01:32:49.173
> 
> 标签：javascript, debugging, node.js, chaining, soda

我正在尝试调试这种事情：

```
browser
  .chain
  .session()
  .open('/')
  .type('q', 'Hello World')
  .click('btnG')
  .waitForTextPresent('Hello World')
  .getTitle(function(title){
    assert.ok(~title.indexOf('hello world'), 'Title did not include the query: ' + title);
  })
  .click('link=Advanced search')
  .waitForPageToLoad(2000)
  .assertText('css=#gen-query', 'Hello World')
  .assertAttribute('as_q@value', 'Hello World')
  .end(function(err){
    browser.testComplete(function(){
      console.log('done');
      if (err) throw err;
    });
  }); 
```

我已经设法直接使用`node debug app.js`或使用`node-inspector`and连接调试器`chrome`。但是，当我尝试在 处创建断点时`.click('btnG')`，它不起作用，它只会在链的末尾创建一个断点。`node.js`似乎将整个链条视为单个语句。

您如何逐步调试这种链接？如何在其中注入 REPL？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:35:12.360

试试 underscore.js 中的 tap 方法

*   [http://underscorejs.org/#tap](http://underscorejs.org/#tap)

# javascript - 在 Javascript 中更改 CSS 子类的值

> ID：11979542
> 
> 赞同：2
> 
> 时间：2012-08-16T01:32:54.870
> 
> 标签：javascript, jquery, css

所以在这里我有一个简单的类/子类，它位于 style.css 中。我无法为元素分配 id 或在 CSS 中使用 # 将其定义为 id。所以不容易 getElementById()。我需要使用 javascript 或 jquery 将“top”值动态更改为各种大小。

```
.slider-edit .bx-prev {
    position: absolute;
    top: 265px;
    left: -32px;
    width: 31px;
    height: 31px;
    text-indent: -999999px;
    background: url(../images/icon_arrow_left.png) no-repeat 0 -31px;
} 
```

我搜索了网站和网络，尝试这样的事情没有运气。

```
$("slider-edit bx-prev").css("top","100px");
$(".slider-edit .bx-prev").css("top","100px");
document.getElementsByClassName('slider-edit bx-prev').style.top = "100px";
document.getElementsByClassName('.slider-edit .bx-prev').style.top = "100px"; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T01:34:44.900

这个工作正常：

```
$('.slider-edit .bx-prev').css("top", "100px"); 
```

# ruby-on-rails - 递归调用 API 时堆栈级别太深

> ID：11979547
> 
> 赞同：0
> 
> 时间：2012-08-16T01:34:28.793
> 
> 标签：ruby-on-rails, recursion, stack-overflow

我不断调用 API 并在调用后的几分钟内不断收到堆栈级别太深的错误。我想我在这里遗漏了一些基本的东西：

```
Class SomeModel

  def self.call_api(index)
    ref = SomeModel.get_reference
    query ||=  Api.call(:parameter => ref.parameter, :offset => index)
    # .. doing stuff
    if index >= 949
      sleep(20)
      new_num = Integer(number) + 1000
      ref.update_attribute(:parameter, new_num)      
      SomeModel.call_api(1)
     else
       sleep(10)
       begin
             # This is a rescue for the case when API call returns nothing.
         SomeModel.call_api(index+50)
       rescue
         new_num = Integer(number) + 1000
         ref.update_attribute(:parameter, new_num)
         SomeModel.call_api(1)
       end
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:32:04.550

Ruby 不能很好地处理递归，并且最终总会给你一个太深的堆栈级别。你最好把它放在某种不递归调用该方法的循环中。如果你想让它比仅仅在无限循环中调用方法更聪明一点，你可以使用[EventMachine 之](https://github.com/eventmachine/eventmachine)类的东西来响应不同的事件。

# regex - 从行中捕获特殊字符

> ID：11979549
> 
> 赞同：1
> 
> 时间：2012-08-16T01:34:49.097
> 
> 标签：regex, bash, awk, grep

我想从一行中捕获特殊字符：

```
var=`echo "#this is comment" | grep "[^a-zA-Z0-9 \t]"`
echo $var 
```

预期输出：`#`

但是得到：`#this is comment`

有人可以帮我吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T01:37:38.280

似乎您想要更多类似的东西：

```
var=`echo "#this is comment" | sed 's/[^a-zA-Z0-9 \t]//g;'` 
```

使用`sed`将替换字符；using`grep`只是搜索字符。

编辑：请注意，`\t`不保证该构造可移植到所有系统或语言环境；我相信如果您`sed`支持 POSIX 正则表达式，使用`[:space:]`可能会更好。（感谢@ghoti！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T01:42:08.073

```
string="#this is comment"
var=$(echo "$string" | sed 's/[a-zA-Z0-9 ]//g')
echo "$var" 
```

我已经删除`\t`了，因为它不便携。

如果您想使用 awk 执行此操作，如您的标签所示，您可以使用以下内容：

```
var=$(echo "$string" | awk '{gsub(/[a-zA-Z0-9 ]/, "")} 1') 
```

请注意，这些可能*不是*实现您想要做的任何事情的好方法。如果您发布更多代码，向我们展示一些上下文，我们可以帮助您避免[XY 问题](http://mywiki.wooledge.org/XyProblem)。

当然，如果您愿意，您也可以直接在 bash 中进行这样的替换。

```
var=${string//[A-Za-z0-9 ]} 
```

通过避免在您真的不需要时调用额外的程序，您将节省 CPU 和时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:46:12.517

`sed`可以用于此，但`tr`更好的选择：

```
echo "#this is comment" | tr -d 'a-zA-Z0-9 \t' 
```

`tr`还支持字符类，例如`[:space:]`和`[:alpha:]`

# javascript - .pop() 可以用于 JavaScript 中的对象数组吗？

> ID：11979551
> 
> 赞同：1
> 
> 时间：2012-08-16T01:34:54.047
> 
> 标签：javascript, arrays

我正在为一个类项目编写一些代码，并且遇到了以下代码的问题：

```
 var sellEverything = function(gold)
{
    console.log("You decide to buy EVERYTHING.");

    var holder;
    while (storeStock.length > 0)
    {
        console.log(storeStock);
        var curItem = storeStock.pop();
        console.log(curItem);
        console.log("You buy a " + curItem.itemName + " for " + curItem.itemPrice + " gold.");
        gold -= curItem.itemPrice;
        console.log(gold + " gold remaining");
    };
}; 
```

从角度来看，storeStock 是一个包含 6 个对象的数组。curItem 变量在控制台中显示为未定义，因此甚至可以从数组中弹出对象还是问题出在什么地方？

以下是 storeStock 填充的数据：

```
 "items":
    [
        {"itemName":"Sword", "itemPrice":100},
        {"itemName":"Bow", "itemPrice":240},
        {"itemName":"Shield", "itemPrice":120},
        {"itemName":"Lance", "itemPrice":300},
        {"itemName":"Potion", "itemPrice":50},
        {"itemName":"Gem of supreme power", "itemPrice":5},
        {"itemName":"Better movie script", "itemPrice":139083882}
    ] 
```

如果这是一个明显的问题，请提前道歉。

编辑：好的，为了清楚起见，我觉得我需要显示整个代码：

```
var itemList =
{
"items":
    [
        {"itemName":"Sword", "itemPrice":100},
        {"itemName":"Bow", "itemPrice":240},
        {"itemName":"Shield", "itemPrice":120},
        {"itemName":"Lance", "itemPrice":300},
        {"itemName":"Potion", "itemPrice":50},
        {"itemName":"Gem of supreme power", "itemPrice":5},
        {"itemName":"Better movie script", "itemPrice":139083882}
    ]
};

//private class ItemStore
var ItemStore = function()
{
    var storeStock = [];

    //array in function
    var setStockList = function(stockArray)
    {
        if (stockArray instanceof Array)
        {
            var i = stockArray.length;
            for (i; i > 0; i--)
            {
                storeStock.push(stockArray[i]);
            }
            //yes, I could have just done the loop forwards, but wanted to do it this way.
            storeStock.reverse(); 
        };
    };

    //array out function
    var getStockList = function()
    {
        return (storeStock);
    };

    var sellEverything = function(gold)
    {
        console.log("You decide to buy EVERYTHING.");

        var holder;
        while (storeStock.length > 0)
        {
            console.log(storeStock);
            var curItem = storeStock.pop();
            console.log(curItem);
            console.log("You buy a " + curItem.itemName + " for " + curItem.itemPrice + " gold.");
            gold -= curItem.itemPrice;
            console.log(gold + " gold remaining");
        };
    };

    return{
        "setStockList": setStockList,
        "sellEverything": sellEverything,
        "getStockList":getStockList
    };
}; 
```

另外值得注意的是我如何调用 setStockList 方法：

```
 store.setStockList(itemList.items); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:40:34.960

```
var itemList = {
    items:[
        {itemName: "Sword", itemPrice: 100},
        {itemName: "Bow", itemPrice: 240},
        {itemName: "Shield", itemPrice: 120},
        {itemName: "Lance", itemPrice: 300},
        {itemName: "Potion", itemPrice: 50},
        {itemName: "Gem of supreme power", itemPrice: 5},
        {itemName: "Better movie script", itemPrice: 139083882}
    ]};

//private class ItemStore
var ItemStore = function()
{
    var storeStock = [];

    //array in function
    var setStockList = function(stock)
    {
        if (stock instanceof Array)
        {
            for (var item in stock)
            {
                storeStock.push(stock[item]);
            }

            storeStock.reverse(); 
        };
    };

    //array out function
    var getStockList = function()
    {
        return storeStock;
    };

    var sellEverything = function(gold)
    {
        var holder;

        console.log("You decide to buy EVERYTHING.");

        while (curItem = storeStock.pop())
        {
            console.log(curItem);
            console.log(
                "You buy a " + 
                curItem.itemName + 
                " for " + 
                curItem.itemPrice + 
                " gold."
            );

            gold -= curItem.itemPrice;

            console.log(gold + " gold remaining");
        };
    };

    return {
        setStockList: setStockList,
        sellEverything: sellEverything,
        getStockList: getStockList
    };
};

var store = new ItemStore();
store.setStockList(itemList.items);
console.log(store.getStockList());
store.sellEverything(100000); 
```

[http://jsfiddle.net/userdude/sS2fY/3/](http://jsfiddle.net/userdude/sS2fY/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:39:18.593

它看起来像是`storeStock`一个具有`items`数组的对象。如果是这样，这应该工作：

```
var sellEverything = function(gold)
{
    console.log("You decide to buy EVERYTHING.");

    var holder;
    while (storeStock.items.length > 0)
    {
        console.log(storeStock);
        var curItem = storeStock.items.pop();
        console.log(curItem);
        console.log("You buy a " + curItem.itemName + " for " + curItem.itemPrice + " gold.");
        gold -= curItem.itemPrice;
        console.log(gold + " gold remaining");
    };
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:39:27.757

`storeStock`是一个对象，`storeStock.items`是你想要的数组

# html - 如何防止文本包裹在浮动到左侧的元素下？

> ID：11979556
> 
> 赞同：0
> 
> 时间：2012-08-16T01:36:37.193
> 
> 标签：html, css, css-float

我有两个块元素。第一个浮动到左侧。我希望正确的元素也是一个块并保持其方形。相反，其中的文本包裹在浮动到左侧的元素下。

```
.comment-date {
  float: left;
}
```

```
<div class="comment-date">07/08 23:08</div>
<div class="comment-body">
  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.
</div>
```

lorem ipsum 文本在日期下方换行。我希望它保持块状，浮动到日期的右侧。我怎样才能做到这一点？

这是一个小提琴：http: [//jsfiddle.net/CS2Hs/](http://jsfiddle.net/CS2Hs/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:52:25.520

此处其他解决方案的替代方法是简单地将 a 添加`margin-left`到`.comment-body`. 将设置的宽度应用于`.comment-date`

```
.comment-date { 
  float: left;     
  font-weight: bold;    
  width: 90px;
}
.comment-body {
  margin-left: 90px;
} 
```

这将确保文本`.comment-body`不会出现在日期下方。

这是一个演示：

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/jackwanders/CS2Hs/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:44:35.793

主体块不在浮动模型中。只需设置一个`float: left`for `.comment-body`。此外，您可以使用一些宽度。见：http: [//jsfiddle.net/CS2Hs/3/](http://jsfiddle.net/CS2Hs/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:45:46.333

我会试着理解你的问题。据我了解，您希望 位于`.comment-body`右侧，而`.comment-date`位于左侧但在同一行。

如果我是对的，也许这会起作用：

```
.comment-date {
    display: inline-block;
    float: left;
    width: 15%;
    font-weight: bold;
}
.comment-body {
    display: inline-block;
    float: right;
    width: 85%;
} 
```

我为你做了一个[JSFiddle](http://jsfiddle.net/CS2Hs/4/) ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T09:56:22.317

jsfiddle 目前似乎已关闭，如果这不起作用/不是您想要的，那么很抱歉，但是您是否尝试将“overflow：hidden”添加到“comment-body”？这将创建一个新的布局上下文，阻止文本在下面换行。我发现这非常有用！希望有帮助！

# mysql - 根据日期获取 MySQL 中的最新行（按另一列分组）

> ID：11979558
> 
> 赞同：1
> 
> 时间：2012-08-16T01:36:51.257
> 
> 标签：mysql, performance, select

这种类型的问题时不时地被问到。提供的查询有效，但会影响性能。

我试过这个`JOIN`方法：

```
SELECT * 
FROM nbk_tabl
INNER JOIN (
        SELECT ITEM_NO, MAX(REF_DATE) as LDATE
        FROM nbk_tabl 
        GROUP BY ITEM_NO) nbk2 
ON nbk_tabl.REF_DATE = nbk2.LDATE 
AND nbk_tabl.ITEM_NO = nbk2.ITEM_NO 
```

元组一（速度较慢）：

```
SELECT * 
FROM nbk_tabl
WHERE REF_DATE IN (
                    SELECT MAX(REF_DATE) 
                    FROM nbk_tabl 
                    GROUP BY ITEM_NO
                  ) 
```

有没有其他性能友好的方式来做到这一点？

*编辑*：为了清楚起见，我将其应用于具有数千行的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:40:24.820

是的，有一种更快的方法。

```
select *
from nbk_table
order by ref_date desc
limit <n> 
```

您要返回的行数在哪里。

坚持，稍等。我看到您正在尝试为特定项目执行此操作。你可以试试这个：

```
select *
from nbk_table n
where ref_date = (select max(ref_date) from nbk_table n2 where n.item_no = n2.item_no) 
```

它可能比“in”版本优化得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:56:14.713

同样在 MySQL 中，您可以使用用户变量（假设 nbk_tabl.Item_no<>0）：

```
select *
from (
   select nbk_tabl.*,
      @i := if(@ITEM_NO = ITEM_NO, @i + 1, 1) as row_num,
      @ITEM_NO := ITEM_NO as t_itemNo
  from nbk_tabl,(select @i := 0, @ITEM_NO := 0) t
  order by Item_no, REF_DATE DESC
) as x where x.row_num = 1; 
```

# ios - 在iOS中如何做这样的自定义选项卡

> ID：11979559
> 
> 赞同：0
> 
> 时间：2012-08-16T01:36:51.590
> 
> 标签：ios, tabs

![iOS 中的选项卡](../Images/054edecb67a9cbc5f05598daa1058f2d.png)

大家好，如您所见，我怎样才能实现像上面这样的自定义标签栏？

当您单击一个选项卡时，该选项卡将变暗，并且该选项卡将位于另一个选项卡之上。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:26:48.643

cocoatouch 中没有标准的控制器有这种行为，所以，有两种方法可以做到——第一种方法是自己从头实现这个控件，第二种方法是使用自定义的第三方控件，例如：[http:/ /www.hollance.com/2011/11/mhtabbarcontroller-a-custom-tab-bar-for-ios-5-using-the-new-container-apis/](http://www.hollance.com/2011/11/mhtabbarcontroller-a-custom-tab-bar-for-ios-5-using-the-new-container-apis/)

# python - Python：Qt4：“QListView”对象没有属性“addColumn”

> ID：11979561
> 
> 赞同：2
> 
> 时间：2012-08-16T01:37:05.787
> 
> 标签：python, pyqt4, qlistview

由于某种奇怪的原因，这个`QListView`对象没有`addColumn`属性。你能解释一下我在这里做错了什么吗？

```
self.pointListBox = QtGui.QListView(self)

self.pointListBox.addColumn("test")
self.pointListBox.addColumn("another")

self.pointLabelBox.QListViewItem(QString("derp")) 
```

最终，我试图得到一个`QListView`与这个完全相似的简单工作。在 Python 中！

                               ![图片](../Images/46f6f6f20b7839eb788c9e1f8199acd4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:13:12.000

您指的是旧 Qt3 中 QListView 的功能，它确实具有以下`addColumn()`方法：[http ://doc.qt.nokia.com/3.3/qlistview.html](http://doc.qt.nokia.com/3.3/qlistview.html)

但是您使用的是 Qt4 / PyQt4，这不是同一个 API：[http ://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qlistview.html](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qlistview.html)

我建议你找到一个更新的教程/指南来学习或[拿起一本现代 PyQt4 书](http://www.qtrac.eu/pyqtbook.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:43:14.897

你看到的不是一个`QListView`物体。那是一个`QTreeWidget`。

要添加新的“列”，您需要使用`QTreeWidget.setHeader()`. 使用 . 添加顶级项目`QTreeWidget.addTopLevelItem()`。

您可以在此处找到该元素的 Qt 文档：http: [//doc.qt.nokia.com/latest/qtreewidget.html](http://doc.qt.nokia.com/latest/qtreewidget.html)

# email - Hotmail / Gmail中的澳大利亚邮政追踪号码

> ID：11979564
> 
> 赞同：1
> 
> 时间：2012-08-16T01:37:46.603
> 
> 标签：email, gmail, hotmail

在 Hotmail / Gmail 中，DHL 和 FedEx 跟踪号似乎是从电子邮件中提取的，并放在电子邮件顶部的一个漂亮的标题中。

是否有关于如何格式化电子邮件以使跟踪号码显示在顶部的 hotmail / gmail 的文档？

此外，这对于澳大利亚邮政等其他运营商是否可行？

# ruby-on-rails - 为什么我的数据库迁移不起作用，我该如何解决？

> ID：11979565
> 
> 赞同：2
> 
> 时间：2012-08-16T01:37:48.490
> 
> 标签：ruby-on-rails, postgresql, heroku

每个人。我正在尝试在 Heroku 上为我的数据库 (postgre) 运行迁移，当我运行它时，出现以下错误：

PGError：错误：列“morning_meds”不能转换为类型“pg_catalog.bool”：ALTER TABLE“users”ALTER COLUMN“morning_meds”TYPE boolean

有问题的迁移文件具有以下代码：

```
class ChangeUserMedsFieldsToBoolean < ActiveRecord::Migration
  def down
    change_column :users, :morning_meds, :string
    change_column :users, :lunch_meds, :string
    change_column :users, :night_meds, :string
  end

  def up
    change_column :users, :morning_meds, :boolean
    change_column :users, :lunch_meds, :boolean
    change_column :users, :night_meds, :boolean
  end
end 
```

我不确定如何修复错误或可能导致错误的原因，所以你能给我的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:36:15.327

Rails 似乎不支持指定转换或转换函数，PostgreSQL 需要在不存在该类型对的隐式转换的情况下进行数据类型更改。

您需要让 Rails 执行：

```
ALTER TABLE users ALTER COLUMN col_name SET DATA TYPE morning_meds USING bool(col_name) 
```

而且由于 Rails 显然不允许您`USING`通过迁移指定子句，因此您需要手动执行。看到[这个出色的答案](https://stackoverflow.com/a/11276990/398670)。

或者，您可以在迁移前运行：

```
CREATE FUNCTION bool(text) RETURNS BOOLEAN AS $$
SELECT bool($1); 
$$ LANGUAGE 'sql';

CREATE CAST (text AS boolean) WITH FUNCTION bool(text) AS IMPLICIT; 
```

`USING`这将允许 ALTER 在没有显式子句的情况下继续进行。您可以并且可能应该在迁移后删除 cast 和 bool(text) 函数：

```
DROP CAST (text AS boolean);
DROP FUNCTION bool(text); 
```

# ruby - Ruby/Nokogiri 检查揭示了更多然后类。我需要额外的项目检查显示

> ID：11979566
> 
> 赞同：0
> 
> 时间：2012-08-16T01:37:52.907
> 
> 标签：ruby, nokogiri

在以下代码中：

```
page = Nokogiri::HTML($browser.html)
page_links = page.css("a").select
page_links.each do |link|
    if not link.nil?
        if not link['href'].nil? and !!link['href']["/about"]
            puts link.class
            puts link.inspect
        end
    end
end 
```

`link.class`输出如下：

```
Nokogiri::XML::Element
#<Nokogiri::XML::Element:0x..fdb623d3c name="a" attributes=[#<Nokogiri::XML::Attr:0x..fdb623c7e name="action-type" value="8">, #<Nokogiri::XML::Attr:0x..fdb623c74 name="class" value="a-n g-s-n-aa g-s-n-aa I8 EjFvwd VP">, #<Nokogiri::XML::Attr:0x..fdb623c6a name="target" value="_top">, #<Nokogiri::XML::Attr:0x..fdb623c60 name="href" value="./104882190640970316938/about">] children=[#<Nokogiri::XML::Text:0x..fdb623792 "PetSmart Winchester">]> 
```

并`link.inspect`输出以下内容：

```
Nokogiri::XML::Element
#<Nokogiri::XML::Element:0x..fdb623666 name="a" attributes=[#<Nokogiri::XML::Attr:0x..fdb6235a8 name="action-type" value="8">, #<Nokogiri::XML::Attr:0x..fdb62359e name="class" value="a-n g-s-n-aa g-s-n-aa Gbb EjFvwd VP">, #<Nokogiri::XML::Attr:0x..fdb623594 name="target" value="_top">, #<Nokogiri::XML::Attr:0x..fdb62358a name="href" value="./104882190640970316938/about">] children=[#<Nokogiri::XML::Element:0x..fdb6230bc name="div" attributes=[#<Nokogiri::XML::Attr:0x..fdb62304e name="style" value="height:110px; width:110px;">] children=[#<Nokogiri::XML::Element:0x..fdb622e1e name="img" attributes=[#<Nokogiri::XML::Attr:0x..fdb622db0 name="style" value=" height: 110px; width: 110px;">, #<Nokogiri::XML::Attr:0x..fdb622da6 name="class" value="mja">, #<Nokogiri::XML::Attr:0x..fdb622d9c name="src" value="https://mts0.google.com/vt/data=TSwRVVf0DGlwBQqarpBU3wUz-i2gqbuWEbxTilWKINf30Au9l0oLM_ojk4KI0oPUi8kL5fJaJWte45O3abOXMzE3L7xDBg">]>]>]> 
```

在 Nokogiri 中，我可以通过 访问链接文本`link.content`和通过`link['href']`. 然而，这些方法都不适用于检查结果中的图像源。

我怎样才能`src`在这个示例代码中获得检查所揭示的 img？

更新：这是 HTML 代码

```
<div class="HWb">
<div class="erb">
    <div class="ubb">
        <div role="button" class="a-f-e c-b c-b-T c-b-Oe c-b-H-ra L0a X9" tabindex="0"
        data-placeid="6817440171144926830" data-source="lo-gp" data-inline="true"
        data-tooltip-delay="600" data-tooltip-align="b,l" data-oid="104882190640970316938"
        data-size="small">
            <span class="TIa c-b-fa"></span>
        </div>
    </div>
    <h3 class="drb">
        <a href="./104882190640970316938/about" target="_top" class="a-n g-s-n-aa g-s-n-aa I8 EjFvwd VP"
        action-type="8">PetSmart Winchester</a>
    </h3>
</div>
<div class="Qbb">
    <span class="vqb SIa">Pet Store</span>
    <span class="lja SIa">
        <a href="//www.google.com/url?sa=D&amp;oi=plus&amp;q=https://maps.google.com/maps?q%3DPetsmart%2Bloc:22601%26numal%3D1%26hl%3Den-US%26gl%3DUS%26mix%3D2%26opth%3Dplatter_request:2%26ie%3DUTF8%26cid%3D6817440171144926830%26iwloc%3DA"
        target="_blank" class="a-n uqb">2310 Legge Boulevard, Winchester, VA</a>
    </span>
    <span class="SIa">(540) 662-5544</span>
</div>
<div class="crb">
    <div class="Pbb a-f-e">
        <div class="Fbb">
            <div class="cca">
                <div class="tob">
                    <div class="xob">“Do not bother with the grooming salon, the staff are unusually stupid.
                        Otherwise the store is a typical petsmart.”&lt;/div>
                </div>
            </div>
        </div>
    </div>
    <div class="dWa">
        <a href="./104882190640970316938/about" target="_top" class="a-n g-s-n-aa g-s-n-aa Gbb EjFvwd VP"
        action-type="8"><div style="height:110px; width:110px;"><img src="https://mts0.google.com/vt/data=TSwRVVf0DGlwBQqarpBU3wUz-i2gqbuWEbxTilWKINf30Au9l0oLM_ojk4KI0oPUi8kL5fJaJWte45O3abOXMzE3L7xDBg" class="mja" style=" height: 110px; width: 110px;"></div></a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:15:31.713

您的两个输出看起来像是两个不同的链接（即两者`link.class`都有`link.inspect`）。

假设我们正在讨论在第二个输出中获取图像源，看起来 HTML 类似于：

```
<a href="href"><div><img src="image_src" /></div></a> 
```

假设这是真的，那么你需要做：

```
puts link.at_css("img")['src'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:07:34.050

如果没有 HTML，您会变得更加困难，但是在深入研究`inspect`输出之后，我认为我有一个合理的 HTML 片段。

这就是我如何获取`<img src="...">`标签：

```
require 'nokogiri'

doc = Nokogiri::HTML(<<EOT)
<a action-type="8" class="a-n g-s-n-aa g-s-n-aa Gbb EjFvwd VP" target="_top" href="./104882190640970316938/about">
    <div style="height:110px; width:110px;">
        <img style=" height: 110px; width: 110px;" class="mja" src="https://mts0.google.com/vt/data=TSwRVVf0DGlwBQqarpBU3wUz-i2gqbuWEbxTilWKINf30Au9l0oLM_ojk4KI0oPUi8kL5fJaJWte45O3abOXMzE3L7xDBg">
    </div>
</a>
EOT

doc.at('img')['src'] # => "https://mts0.google.com/vt/data=TSwRVVf0DGlwBQqarpBU3wUz-i2gqbuWEbxTilWKINf30Au9l0oLM_ojk4KI0oPUi8kL5fJaJWte45O3abOXMzE3L7xDBg" 
```

如果这不起作用，您需要花时间改进您的问题并提供更多详细信息。

* * *

如果您不确定是否会有 0、1 或 1+ 个标记实例，请使用它，`search`因为它返回一个 NodeSet，它的作用类似于 Array，从而可以轻松处理无、单次或多次出现：

```
doc.search('img').map{ |img| img['src'] } 
```

将以`<img src="...">`数组的形式返回文档中的所有值。您可以轻松地遍历那些或使用`empty?`来查看是否没有命中：

```
doc.search('img').map{ |img| img['src'] }.each do |src|
  # do something with src if any are found.
end 
```

如果您可能有没有参数`<img>`的标签，请在迭代之前将它们过滤掉：`src="..."``compact`

```
doc.search('img').map{ |img| img['src'] }.compact.each do |src|
  # do something with src if any are found.
end 
```

如果您只希望出现 0 或 1 次，请尝试：

```
src = doc.at('img') && doc.at('img')['src'] 
```

如：

```
doc = Nokogiri::HTML(<<EOT)
<html><body><p>foo</p>
<img src="blah">
<p>bar</p></body></html>
EOT
src = doc.at('img') && doc.at('img')['src']
=> "blah" 
```

或者，没有`src`参数：

```
doc = Nokogiri::HTML(<<EOT)
<html><body><p>foo</p>
<img>
<p>bar</p></body></html>
EOT
src = doc.at('img') && doc.at('img')['src']
=> nil 
```

或完全丢失`<img>`标签：

```
doc = Nokogiri::HTML(<<EOT)
<html><body><p>foo</p>
<p>bar</p></body></html>
EOT
src = doc.at('img') && doc.at('img')['src']
=> nil 
```

如果要继续使用`if`块：

```
if doc.at('img')
  puts doc.at('img')['src']
end 
```

将完成您的：

```
if not doc.at('img').nil?
  puts doc.at('img')['src']
end 
```

完成，但以更直接和简洁的方式，同时保持可读性。

进行两次`at`查找的缺点是在大文档中成本很高，尤其是在循环中。您可以获得所有 Perlish 并使用：

```
if (img = doc.at('img'))
  puts img['src']
end 
```

但这并不是真正的 Ruby 方式。为了清晰和长期维护，我可能会使用：

```
img = doc.at('img')
if (img)
  puts img['src']
end 
```

但这暴露了`img`变量，使事情变得混乱。在这一点上，这是程序员的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:29:52.523

我发现如果您从 获取结果`link.inspect`，因为它们是一个字符串，并且使用正则表达式，您可以获取图像 URL。

```
link.inspect[/http.*com.*"/].chop # Since all other urls are relative ./ 
```

我不相信这是最好的方法。我将首先尝试使用其他答案。

# ios - 在 iOS 上，如何将一组常用样式应用于 UILabel，而不必为每个最后的样式进行子类化？

> ID：11979568
> 
> 赞同：0
> 
> 时间：2012-08-16T01:38:13.980
> 
> 标签：ios, styles, uilabel

我的应用程序中有几个 UILabel。在不同的情况下（不同的字体大小、不同的字体颜色、斜体等），有几种不同的样式可以在整个应用程序中重复使用。有没有设置全局样式的合理方法，而无需 UILabel 的多个子类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:35:48.417

如何从 UITableViewCell 中获取线索。为所有样式创建一个枚举类型，并拥有一个类来处理不同样式的所有设置。就像是

```
MyStyledLabel* label = [[MyStyledLabel alloc] initWithFrame:frame style:MyStyledLabelDefaultStyle]; 
```

如果你想变得聪明，你可以使用位域以不同的方式组合。

```
MyStyledLabel* label = [[MyStyledLabel alloc] initWithFrame:frame style:MyStyledLabelRedColor|MyStyledLabelBoldText]; 
```

希望能给你一些想法。

# c# - 按字母顺序排列数组

> ID：11979571
> 
> 赞同：1
> 
> 时间：2012-08-16T01:38:28.417
> 
> 标签：c#, arrays

所以我的代码遇到了一些麻烦。对于初学者，我遇到了输出所有数组的问题。请注意，我只编码了 12 天，由于我所在大学的学习前景，我的老师在某种程度上跳过了 C# 编码的基础知识。而且我刚刚了解到它不会按字母顺序排列它们......

```
 static int inputPartInformation(string[] pl)
    {
        int i = 0;

        do
        {
            Console.Write("Enter a Name: ");
            //for the player
            pl[i] = Console.ReadLine();

        }
        while (pl[i++].CompareTo("Q") != 0);
        //if they write Q for the player it will quit
        return i - 1;
    }

    static void Main(string[] args)
    {
        String[] players = new String[100];
        Array.Sort(players);
        // Sort array.

        //defines players in this new instance

        var count = inputPartInformation(players);

        //for the portion of the code that handles the input

        //calculates the average score

        Console.WriteLine("List of People in Order: {0}, {1}, {2}, {3}, {4}, {5}, {6},", players);
        Console.ReadLine();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T01:48:43.423

*   您在填充名称之前进行排序；那什么也没做。
*   您正在使用参数引用的固定多项目列表打印单个项目`{0}, {1},{2}`，依此类推；它不会起作用，即使它起作用了，它也会将你的输出限制在前七项
*   您不知道要排序多少个项目。更改`void inputPartInformation(string[] pl)`为 return `count`（即`i-1`），并使用`Array.Sort(players, 0, count);`

将多个字符串转换为单个字符串的最简单方法是使用`string.Join`：

```
Console.WriteLine("List of People in Order: {0}", string.Join(", ", players.Take(count))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:54:54.783

*首先，“Q”被添加到输入列表中，因为在*输入被接受并插入到数组中之前，您不会测试“Q” 。对此进行修改的一种方法是将输入名称保存到一个临时变量中，测试*它*是否为“Q”，然后仅当它是其他东西时才将其添加到您的数组中。在您的循环中，将您的输入/测试修改为：

```
 bool enteringNames=true;
   do{
    String nextName = Console.ReadLine();
    if (nextName.CompareTo("Q")==0)
    {
       enteringNames=false;
    }
    else
    {
       p[i]=nextName;
    }
    i++;
  }
  while(enteringNames); 
```

这只是完成工作的一种方式。请记住，固定的 100 项数组并不是最可靠的方法……永远不知道可能会输入多少个名字！

现在，最后一个 WriteLine 有点奇怪，但我认为您可以自己解决该部分 - 遍历数组或将所有字符串连接在一起非常简单:)

其次，您的排序不起作用，因为您在调用 inputPartInformation(players)*之前*调用了 Array.Sort(players) 以实际加载数据 - 所以您在没有任何数据的情况下进行排序！在对 inputPartInformation 的调用之后移动 Array.Sort 调用。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T02:04:28.633

试试这个，它会工作，但首先尝试学习 API

```
static int inputPartInformation(string[] pl)
    {

        int i = 0;
        String temp;
        while (true)
        {
            Console.Write("Enter a Name: ");
            temp=Console.ReadLine();
            if (temp=="Q")
                break;
            else pl[i++] = temp;
        }
        return i;

    }

    static void Main(string[] args)
    {

        String[] players = new String[100];

        int size=inputPartInformation(players);

        for (int i = 0; i <= size; i++)
            Console.WriteLine(players[i]);

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T01:56:30.323

Q 出现在您的结果中，因为您将它分配给您的数组。

重写函数以在分配值之前检查值，例如

```
static void inputPartInformation(string[] pl)
    {
        int i = 0;
        do
        {
            Console.Write("Enter a Name: ");
            //for the player
            newStrInput = Console.ReadLine();

if (newStrInput == "Q")
break;//if they write Q for the player it will quit

pl[i]=newStrInput;
i++;
     }
        while (i>-1);//infinite loop        

    } 
```

# java - bufferedwriter 在写入过程中停止

> ID：11979572
> 
> 赞同：8
> 
> 时间：2012-08-16T01:38:38.353
> 
> 标签：java, text-files, bufferedwriter

由于某种原因，此代码会导致 text.txt 文件被截断。它应该（根据我）写出 1000 个结果，但输出文件有不同数量的行（取决于运行）。奇怪的是，对文件的写入在写入命令的中间停止，因此一行可能不完整。目前，最新运行的文本文件的最后三行如下：

```
749, 78.97988, 97.80454, 99.6625, 94.00000015258789
750, 4.1745043, 86.64212, 107.59311, 71.00000008583069
751, 
```

就是这样。之后就没有别的了。

这是代码：

```
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.io.Writer;
import java.util.Random;

public class ColorGrayScale {

/**
 * @param args
 * @throws IOException
 */
@SuppressWarnings("resource")
public static void main(String[] args) throws IOException {
    // TODO Auto-generated method stub
    Writer out = new BufferedWriter(new FileWriter("test.txt"),16*1024);
    Random generator = new Random();
    float red = 0, green = 0, blue = 0;
    int i = 0;

    while (i<1000) {

        float grey = generator.nextInt(127) + 64;
        int sequence = generator.nextInt(6) + 1; // to pick from 1 of six
                                                    // orders
        switch (sequence) { // the various orders that red green and blue
                            // are going to be in
        case 1:
            red = (float) (generator.nextFloat() * (grey / .21));
            green = (float) (generator.nextFloat() * ((grey - (red * .21)) / .71));
            blue = (float) ((grey - (red * .21) - (green * .71)) / 0.08);
            break;
        case 2:
            red = (float) (generator.nextFloat() * (grey / .21));
            blue = (float) (generator.nextFloat() * ((grey - (red * .21)) / .08));
            green = (float) ((grey - (red * .21) - (blue * .08)) / 0.71);
            break;
        case 3:
            green = (float) (generator.nextFloat() * (grey / .71));
            red = (float) (generator.nextFloat() * ((grey - (green * .71)) / .21));
            blue = (float) ((grey - (red * .21) - (green * .71)) / .08);
            break;
        case 4:
            green = (float) (generator.nextFloat() * (grey / .71));
            blue = (float) (generator.nextFloat() * ((grey - (green * .71)) / .08));
            red = (float) ((grey - (green * .71) - (blue * .08)) / .21);
            break;
        case 5:
            blue = (float) (generator.nextFloat() * (grey / .08));
            red = (float) (generator.nextFloat() * ((grey - (blue * .08)) / .21));
            green = (float) ((grey - (blue * .08) - (red * .21)) / .71);
            break;
        case 6:
            blue = (float) (generator.nextFloat() * (grey / .08));
            green = (float) (generator.nextFloat() * ((grey - (blue * .08)) / .71));
            red = (float) ((grey - (blue * .08) - (green * .71)) / .21);
            break;
        }
        if (red < 256 && blue < 256 && green < 256) {
             out.write("" + i + ", " + red + ", " + green + ", " + blue
                    + ", " + (.21 * red + .71 * green + 0.08 * blue + "\n"));
            i++;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T01:48:55.057

您忘记 close() 编写器，因此您从未给它机会将缓冲的输出刷新到磁盘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T01:45:28.467

您应该考虑在每次写入后刷新您的流。尝试这样的事情：

```
try{
    //your code
    out.write("" + i + ", " + red + ", " + green + ", " + blue
            + ", " + (.21 * red + .71 * green + 0.08 * blue + "\n"));
    i++;
}finally{
    //Close the stream
    out.close();
} 
```

此外，您应该确保在操作结束时关闭您的流。构建程序的一个好方法可能是：

```
Random generator = new Random();
float red = 0, green = 0, blue = 0;
int i = 0;

Writer out = null;

try{
    out = new BufferedWriter(new FileWriter("test.txt"), 16 * 1024);

    while (i < 1000) {
        //your logic
        if (red < 256 && blue < 256 && green < 256) {
                out.write("" + i + ", " + red + ", " + green + ", " + blue
                        + ", " + (.21 * red + .71 * green + 0.08 * blue + "\n"));
                i++;
        }
    }
}finally{
    if(out != null){
        out.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T01:45:51.347

两件事情。

1.  冲洗流
2.  关闭流

尝试类似：

```
 Writer out = null;
 try {
    out = new BufferedWriter(new FileWriter("test.txt"),16*1024);

    // Write some stuff

    out.flush();
 } finally {
    try {
        out.close();
    } catch (Exception exp) {
    }
} 
```

试着记住，它是一个“缓冲区”。这意味着它将内容存储在内存中，直到它决定需要写入或您明确要求它“刷新”它的内容。

此外，您应该始终使用`close`您的流。这可以防止可能的锁定文件问题和文件句柄问题：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-31T12:00:45.180

一旦打开 io（Reader、Writter 或 BufferR/W，...），您必须稍后关闭它以关闭该流并释放资源。如果您的代码有嵌套流 (File, FileReader, BufferedReader) 或 (Writer1, Writer2)，您必须在 (BufferedReader, FileReader, File) 或 (Writer1.close() 之后使用 Writer2 之前单独关闭它)

# ios - iOS推送导航控制器，第二个视图上没有栏

> ID：11979573
> 
> 赞同：3
> 
> 时间：2012-08-16T01:39:03.443
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uinavigationbar, pushviewcontroller

我有一个 iOS 应用程序，在 UINavigationController 中设计。然而，其中一个推送的视图控制器需要全屏视图，顶部没有导航栏。（要返回，只有一个小的圆形按钮）。但是，我尝试过的任何“隐藏”导航栏（navigationCtl.navigationBar.hidden=TRUE）的方法都会给我留下难看的伪影——在视图被推送之前调用（在 viewDidLoad 或 viewWillAppear 中）会导致之前的视图控制器栏左滑动画开始时闪烁白色。类似地，在 viewDidAppear 中调用它会在第二个视图的顶部留下一个白条，同时还有几个向下推的子视图。有什么办法可以让新视图像往常一样滑过，但是当它出现时，顶部根本没有导航栏？

* * *

请注意，为了帮助谷歌，这里的问题基本上是：

如何在两个 UIViewController 之间进行动画处理，一个在顶部有导航栏，另一个在顶部没有导航栏。那么，如何从带有导航栏的 UIViewController 导航到不带导航栏的 UIViewController - 避免可怕的闪烁。

Ev 在下面给出了惊人的答案……太棒了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T04:04:28.793

试一试，看看它是如何为您工作的。

在 viewWillAppear 的目标视图控制器中

```
- (void)viewWillAppear:(BOOL)animated {
    [self.navigationController setNavigationBarHidden:YES animated:YES];
} 
```

它实际上具有很酷的效果并且很有用。在 viewWillAppear 中，一切都发生在视图显示之前，因此它消除了奇怪的工件。

好起来

# vb.net - 点网中的电子邮件

> ID：11979575
> 
> 赞同：1
> 
> 时间：2012-08-16T01:39:14.080
> 
> 标签：vb.net, dotnetnuke

请求您的帮助以在 dot net nuke 的电子邮件中添加表格。

```
 Dim lnk As String = GetModLink()
        Dim msg As String = "Dear " & objUser.DisplayName & ",<br/><br/>"
        msg += "We are pleased to inform that you are approved. <br/><br/>"
        msg += "Thank you, we appreciate your support.<br/><br/>"

        msg += "Name                                            Code  <br/>"
        msg += "ABC                                             ABCD1   <br/>"
        msg += "zyx                                             zyxu1    <br/>"

        msg += DotNetNuke.Common.Globals.GetPortalSettings().PortalName

        Mail.SendMail(PortalSettings.Email, objUser.Email, "", "abc", msg, "", "HTML", "", "", "", "") 
```

只是我想要邮件中的名称、代码、ABC、ABCD1、zyx、zyxu1 字段）。我该怎么做。

名称 代码 abc abcd1 zyx zyxu1 表格格式

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:15:08.400

格式化“msg”中的文本，使其像 HTML 表格一样呈现（我可以看到您使用了 br 标记）。

例如

```
msg += "<table><tr><td>column data</td></tr></table>" 
```

编辑：将 '=' 更改为 '+='

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:07:05.987

如何在以下代码中添加边框。添加时显示错误。

```
 msg += "<table><tr> <td>Name of Company</td><td>Code</td> </table> <tr> <td>Agent </td><td>ABC</td></tr></table>" 
```

# php - php mvc 和 .htaccess url 重写

> ID：11979579
> 
> 赞同：4
> 
> 时间：2012-08-16T01:39:43.240
> 
> 标签：php, apache, .htaccess, url-routing

我是一名新程序员，目前正在学习 php mvc。我正在从头开始构建框架/mvc 系统......现在我面临 .htaccess 的问题。

```
 example.com = localhost // unable to post question for localhost link 
```

我的应用程序网址是这样的......

```
        http://example.com/mvc/index.php?go=test //test 是一个控制器的名字
```

在 .htaccess 的帮助下，我将 url 清理为....

```
        http://example.com/mvc/test
```

如果控制器不存在，它会显示一个错误视图，其中包含一些错误消息。

```
        http://example.com/mvc/doesnotexists
```

但是如果我在网址中输入“/”（正斜杠）......

```
        http://example.com/mvc/test/
```

它显示错误但不加载任何 css 或 js 文件。

我还在 url 中包含了控制器方法...

```
        http://example.com/mvc/test/viewresult
```

如果在该控制器中找不到匹配的方法显示错误消息，它会显示但同样的问题...没有 css 或 js。

如果我通过完整的 url，我已经完全加载了 css 和 js

```
        http://example.com/mvc/index.php?go=doesnotexists/
```

等等

我已经尝试了几个 .htaccess 规则，但无法让它工作。请提前帮助和感谢.. 我当前的 .htaccess 代码...

```
<IfModule mod_rewrite.c>  

    # Turn on 
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-l

    #RewriteCond %{REQUEST_URI} !^/assets/
    #RewriteCond $1 !^(favicon\.ico|favicon\.png|media|robots\.txt|crossdomain\.xml|.*\.css|.*\js)

    RewriteRule ^(.+)$ index.php?go=$1 [QSA,L]

   # Generic 404 for anyplace on the site  
   # ...  

</IfModule> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T03:29:12.820

css 和 js 的最佳解决方案是使用完整路径：

```
http://example.com/mvc/assets/style.css

http://cdn.example.com/style.css 
```

并重写

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) index.php?go=$1 
```

如果您的“测试”是您的控制器，而“参数”是“测试”控制器的操作，您可以使用

```
http://example.com/mvc/test/param 
```

$_GET['go'] 将是 'test/param' 您需要将其分解以获得 'param' 动作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:17:31.883

确保 html 中的 CSS 文件是**绝对**路径`/assets/mystyle.css`而不是**相对** `assets/mystyle.css`路径或`../assets/mystyle.css`

# java - 在 RESTEasy Web 服务器上缓存数据？

> ID：11979581
> 
> 赞同：0
> 
> 时间：2012-08-16T01:40:01.770
> 
> 标签：java, web-services, rest, resteasy

在 RESTeasy Web 服务器上缓存数据的最佳方式是什么？有人可以举一个简单的例子吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:55:34.230

我们使用ehcache。[http://ehcache.org/](http://ehcache.org/) 我喜欢的一件事是它可以持久化。

# php - MySQL 不允许我插入包含单引号 ( ' ) 的值

> ID：11979582
> 
> 赞同：0
> 
> 时间：2012-08-16T01:40:02.057
> 
> 标签：php, mysql

我有一个文本区域输入，我正在尝试发送到我的数据库

"istanbul'un kanayan yarası olan ulaşım, özellikle anadolu yakasından kartal'dan kadıköy'e ulaşımın neredeyse 2 saate varması yüzünden perişan. devletin de politikaları aşikar. 17 ağustos günü verilen söz tutulur mu merak ed."

文本。

它转到>

```
$bahisaciklamax = $_POST["bahisaciklama"];
$bbb=str_replace("\r\n", "<br />", $bahisaciklamax);
$bahisaciklama=strtolower(strip_tags($bbb, '<br><br /><br/><br />')); 
```

并给出这个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'un kanayan yarası olan ulaşım, özellikle anadolu yakasından kartal'dan kadıköy'e' at line 1 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T01:44:11.147

您的代码容易发生**[SQL 注入](http://bobby-tables.com/)**。使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php

    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
    $stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (?, ?)");
    $stmt->bindParam(1, $name);
    $stmt->bindParam(2, $value);

    // insert one row
    $name = 'one';
    $value = 1;
    $stmt->execute();

?> 
```

这将允许您使用单引号插入记录。

# javascript - 选择并拖动以获取所选元素

> ID：11979586
> 
> 赞同：2
> 
> 时间：2012-08-16T01:40:28.433
> 
> 标签：javascript, jquery, html

我想在我的代码中添加一个矩形拖动，这里是小提琴[http://jsfiddle.net/cyTUX/39/](http://jsfiddle.net/cyTUX/39/)，这段代码所做的是 onclick 它改变状态，它有 3 个状态，所以如果我们选择一个状态并拖动它围绕表格单元格，拖动所涉及的单元格获得该状态。

所以，我想要的是，不是以这种方式选择和拖动，而是选择一个状态并像矩形一样拖动，以便矩形中的所有表格单元格都获得该状态。

关于如何做到这一点的任何想法或例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-06T09:52:32.723

所以我正在编写一个电子应用程序并且遇到了完全相同的问题。因为我不想使用 jQuery，所以我自己写了一些东西。写它花了很长时间，所以我用它做了一个插件，你可以很容易地自己使用。它超级小，就是这样做的。我称它为[DragSelect](https://thibaultjanbeyer.github.io/DragSelect/)，你可以[从 Github](https://github.com/ThibaultJanBeyer/DragSelect)获得它。

很酷的一点是你有**0 个依赖项**，因此可以将它与你喜欢的任何框架一起使用。

选择算法就像一个魅力，甚至免费为您提供带有修饰键的独立多选。

所以取自[github 自述文件](https://github.com/ThibaultJanBeyer/DragSelect)：

# 1.安装

## 简单的

只需下载文件（缩小）并将其添加到您的文档中：

```
<script src="https://thibaultjanbeyer.github.io/DragSelect/ds.min.js"></script> 
```

## npm

```
npm install --save-dev npm-dragselect 
```

## 凉亭

```
bower install --save-dev dragselect 
```

就是这样，你准备好摇滚了！
当然，您也可以只在代码中包含该函数来保存请求。

# 用法

现在在您的 JavaScript 中，您可以像这样简单地将元素传递给函数：

## 简单的

选择可以选择的元素：

```
var ds = new DragSelect({
  selectables: document.getElementsByClassName('selectable-nodes')
}); 
```

你可以做更多的事情，所以一定要阅读[github 上的整个文档](https://github.com/ThibaultJanBeyer/DragSelect)

# 享受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T02:19:23.317

创建一个新的 div

```
<div style="position:absolute;border:1px solid green;display:none" id="rectangle"></div> 
```

然后像这样的事情，我希望你能解决问题并完成它，它是如何处理这个问题的简单粗暴的例子

```
var element = $("#rectangle");
// on mousedown
$(window).mousedown(function(e1){ 
   // first move element on mouse location
   element.show().css({top:e1.pageY, left:e1.pageX});
   // resize that div so it will be resizing while moouse is still pressed
   var resize = function(e2) {
       // you should check for direction in here and moves with top or left
      element.width(e2.pageX - e1.pageX);
      element.height(e2.pageY - e1.pageY);
   };
   $(window).mousemove(resize);
   // and finally unbind those functions when mouse click is released
   var unbind = function() {
       $(window).unbind(resize);
       $(window).unbind(unbind);
   };
   $(window).mouseup(unbind);
}); 
```

像这样您可以拖动以创建矩形，但只能从左到右方向，您可以在此处查看示例 [http://jsfiddle.net/dXduv/1](http://jsfiddle.net/dXduv/1) 您可以从事件中获取实际位置来计算哪些 div 在内部，哪些在外部该地区

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T02:15:26.860

[jQuery UI](http://jqueryui.com/)能够处理选择、拖放、调整大小和选择。如果您已经在使用 jQuery，那么添加 jQuery UI 非常容易。您还会发现它包含许多预制的 UI 元素，这些元素使表单创建变得快速而轻松。使用像 jQuery UI（也可以查看[Kendo UI](http://www.kendoui.com/)）这样的单独库通常比尝试自己编写复杂的 Javascript 功能要容易得多。您将节省时间并可能拥有更实用的产品。

[这个](http://jqueryui.com/demos/droppable/#photo-manager)来自 jQuery UI 的例子可能对你有用。

# java - JExcel (jxl)：将大型记录集写入 Excel 工作表失败（OutOfMemoryError：Java 堆空间）

> ID：11979588
> 
> 赞同：2
> 
> 时间：2012-08-16T01:40:44.677
> 
> 标签：java, jxl

我正在尝试使用 JExcel 2.6.9 将 Web 应用程序中的结果集（100,000 行，45 列）写入 excel。

该过程失败：

```
Caused by:
java.lang.OutOfMemoryError - Java heap space
at jxl.write.biff.WritableSheetImpl.getRowRecord(WritableSheetImpl.java:1179) 
```

我尝试了以下方法：

```
 WorkbookSettings ws = new WorkbookSettings();
        ws.setLocale(new Locale("en", "EN"));
        ws.setUseTemporaryFileDuringWrite(true);

        WritableWorkbook workbook = Workbook.createWorkbook(new File("tempExcel.xls"),ws); 
```

所以基本上在一个while循环中，`ResultSet`从数据库被迭代然后

`s.addCell(new Label(colIndex, rowIndex, value, format));`为每一行完成。

我不确定如何通过这个问题。运行此应用程序的环境中存在内存限制，因此除非绝对没有其他方法，否则简单地为 JVM 分配更多 RAM 不是一种选择。我将不胜感激对此的任何反馈。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:53:09.147

如果 X > Y，您不能将 X 磅的任何东西放入 Y 大小的袋子中。

那是 450 万个值。如果其中很多是字符串，每个平均大小为 1K 字节，那么您将拥有约 4.5GB 的数据。

如果你一下子把整件事都记在心里，那你就有麻烦了。解决方案是将其分块成更小的块，提交它们，然后创建下一个块。

我想知道是否有任何网络客户端一次需要这么多数据。另一种解决方案是更好地过滤以限制`ResultSet`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:38:28.833

我会看这个网页，尤其是第 8 章：

[http://www.teamdev.com/downloads/jexcel/docs/JExcel-PGuide.html#AEN566](http://www.teamdev.com/downloads/jexcel/docs/JExcel-PGuide.html#AEN566)

请记住，批量操作总是更好！

# c++ - 将 QSqlQueryModel 或索引值添加到 QListWidget

> ID：11979599
> 
> 赞同：0
> 
> 时间：2012-08-16T01:42:32.783
> 
> 标签：c++, qt, qt4

有没有办法将 my 添加`QSqlQueryModel`到 a 中`QListWidget`？如果没有，有没有办法将数据库行 ID 添加到`QListWidgetItem`？

我无法[从](http://qt-project.org/doc/qt-4.8/qlistwidgetitem.html). `QListWidget`我可以将项目添加到列表中，但只能考虑使用项目的行号作为隐藏索引，如果索引号无序，这将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:57:50.237

好的，这是交易：

这`QListWidget`是旧的 Qt3 数据小部件集的一部分。

您真正想要的小部件是较新的“采访”Qt MVC 框架的一部分。它被称为`QListView`。

这可能有点令人困惑。

一般来说：“ *QxxxxView* ”小部件可以绑定到“ *QxxxxModel* ”对象，例如`QSqlQueryModel`您询问的。

见：http: [//qt-project.org/doc/qt-4.8/qlistview.html](http://qt-project.org/doc/qt-4.8/qlistview.html)

并且：http: [//qt-project.org/doc/qt-4.8/model-view-programming.html](http://qt-project.org/doc/qt-4.8/model-view-programming.html)

很多很好的例子。例如：http:
[//qt-project.org/doc/qt-4.8/sql-querymodel.html](http://qt-project.org/doc/qt-4.8/sql-querymodel.html)

祝你好运。:)

# java - 将 Java 项目转换为 .exe

> ID：11979601
> 
> 赞同：1
> 
> 时间：2012-06-19T16:52:05.997
> 
> 标签：java, netbeans, executable

我在 NetBeans 6.9 中创建了一个游戏项目，我想在另一台计算机上运行该项目。问题是如果 NetBeans 没有安装在另一台计算机上，那么我肯定无法运行该项目。因此，我必须将我的项目转换为可以在其他计算机上运行而无需安装 NetBeans 的 .exe。

是否有可以将 .java 转换为 .exe 的免费应用程序？请帮我将我的项目转换为 .exe 文件。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:21:40.697

查看有关[打包和部署桌面 Java 应用程序](http://netbeans.org/kb/articles/javase-deploy.html)和[开发通用 Java 应用程序](http://netbeans.org/kb/docs/java/javase-intro.html)的这些官方 netbeans 文章。

从文章

### 在 IDE 中运行应用程序

在 IDE 中开发应用程序时，通常需要在分发它们之前对其进行测试和优化。您可以通过从 IDE 运行应用程序来轻松测试正在处理的应用程序。

要在 IDE 中运行 AnotherGrep 项目，请在“项目”窗口中右键单击项目的节点 (AnotherGrep)，然后选择“运行项目”。

xGrep 窗口应打开。您可以单击“浏览”按钮来选择要在其中搜索文本模式的文件。在“搜索模式”字段中，键入要匹配的文本或正则表达式模式，然后单击“搜索”。每个匹配的结果将出现在 xGrep 窗口的输出区域中。

可以在此应用程序中使用的正则表达式的信息可在此处以及万维网上的许多其他地方获得。

### 在 IDE 之外运行应用程序

一旦完成应用程序的开发并在分发它之前，您可能需要确保该应用程序也可以在 IDE 之外运行。

您可以按照以下步骤在 IDE 之外运行应用程序：

**在系统的文件管理器中（例如，在 Windows XP 系统上的“我的电脑”窗口中），导航到 PROJECT_HOME/dist 并双击 AnotherGrep.jar 文件。**

当 xGrep 窗口打开时，您将知道应用程序已成功启动。

如果 xGrep 窗口未打开，则您的系统可能在 JAR 文件和 Java 运行时环境之间没有文件关联。请参阅[排除 JAR 文件关联问题](http://netbeans.org/kb/articles/javase-deploy.html#troubleshooting)。

### 将应用程序分发给其他用户

既然您已经验证了应用程序在 IDE 之外工作，您就可以分发它了。
您可以按照以下步骤分发应用程序：

**1：**创建一个 zip 文件，其中包含应用程序 JAR 文件 ( `AnotherGrep.jar`) 以及`lib folder`包含`swing-layout-1.0.jar`.

**2：**将文件发送给将使用该应用程序的人。指示他们解压缩 zip 文件，确保`AnotherGrep.jar`文件和文件`lib folder`位于同一文件夹中。

应用程序的用户应该能够通过双击 JAR 文件来运行它。如果这对他们不起作用，请向他们显示[故障排除 JAR 文件关联部分](http://netbeans.org/kb/articles/javase-deploy.html#troubleshooting)中的信息。

[像Launch4j](http://launch4j.sourceforge.net/)这样的第三方工具也可以解决问题。有关更多信息，请参阅这篇关于[java-to-exe 的文章](http://www.excelsior-usa.com/articles/java-to-exe.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:21:54.330

请参阅[Launch4j](http://launch4j.sourceforge.net/)。我不喜欢使用批处理文件启动 Java 应用程序。这将所有内容从根 jar 一直包装到一个 exe 中的完整 Java 环境。您会在系统托盘中获得自己的图标，而不是普通的咖啡杯。我在一个下载量约为 300,000 的项目上成功使用了它，而且它从来都不是报告错误的来源。注意 确实需要仔细阅读才能为您的项目选择正确的选项。但是您可以使用 Netbeans 中的 Ant 构建脚本进行设置，以自动生成 .exe。非常漂亮和干净。我的项目包括本机库。他们也工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:28:23.687

我认为[NSIS](http://nsis.sourceforge.net/Main_Page)会帮助你。大多数应用程序使用 NSIS。因为它是开源的。

还有一个用于 NSIS 的 Eclipse 插件，使该过程变得简单。

[http://hmne.sourceforge.net/](http://hmne.sourceforge.net/)

# c# - 在 C# 中生成超大图像

> ID：11979605
> 
> 赞同：2
> 
> 时间：2012-08-16T01:43:50.293
> 
> 标签：c#, .net, memory, bitmap

我需要生成一些大图，其宽度和高度可以达到数百万像素。请注意，我不想缩小图像。每个点必须代表一个像素。

现在使用 Bitmap 和 Graphics 对象，如果我将图像分割成更小的方块，这很有可能，但它非常缓慢。

我已经计算了像素 RGB 值，所以想知道是否有办法用这些值创建一个字节数组并手动将它们保存为未压缩的 BMP 格式文件，而不是处理 Bitmap 类和 Graphics 类的绘图函数。

如果这有助于加快流程，我对不安全的代码感到满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:03:33.550

如果您要显示图形，为什么不使用像 SVG 这样的技术，它可以以非常小的处理能力即时渲染，但由于矢量扩展可以扩展到近乎无限的大小？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T01:48:27.113

（虽然有一个很好的问题，是否有任何东西能够读取这些文件......）

[BMP 格式](http://en.wikipedia.org/wiki/BMP_file_format)非常简单 - 您可以将其直接写入磁盘（我建议避免在内存中构建大文件，除非您有其他理由这样做）。有一个固定大小的标题，然后（对于 24bpp）在某个宽度上对齐的颜色序列。假设您可以选择宽度，您甚至不需要添加任何填充 - 只需为每个像素添加颜色行。

# android - Android 将应用程序与文件类型关联以允许在浏览器中下载

> ID：11979615
> 
> 赞同：1
> 
> 时间：2012-08-16T01:45:33.813
> 
> 标签：android, download, mime-types, tiff

我正在为 .tiff 图像转换器进行概念验证。我需要做的第一件事是让我的应用程序下载 .tif/.tiff 文件。它们可以来自任何地方——http、gmail、本地文件等……而且我无法控制网络服务器是否会正确地将文件识别为图像/tiff MIME 类型。

我无法下载 .tiff 文件。我相信做到这一点的方法是在我的主要活动中启用我。

这是我到目前为止所拥有的：

```
<intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="*/*" />
            <data android:scheme="http" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.tif" />
</intent-filter> 
```

我到处寻找并尝试了许多建议，但无法做到正确:(我对 Android 开发人员并不陌生，但我从未遇到过需要允许下载某种文件类型的情况。

谢谢

# visual-studio-2010 - IE 附加组件和自动先决条件安装的安装程序？

> ID：11979617
> 
> 赞同：-1
> 
> 时间：2012-08-16T01:45:36.463
> 
> 标签：visual-studio-2010, internet-explorer, add-in, installshield

我有一个项目给了我，他们有机地使用 Add-In Express 和 Visual Studio 创建了它。他们遇到的问题是，在安装实际加载项之前需要安装一些先决条件。所以有一个两步的过程。我对 InstallShield 有一些经验，相信我的版本是 2009。我想知道这是否会比 add-in express 更好地处理安装，或者我是否应该在 VS2010 中创建一个手动包。另外，有没有办法静默安装先决条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:17:27.730

作为常规的基于 .net 的应用程序，您基于 Add-in Express 的解决方案依赖于 .net 框架。因此，.net 框架应该安装在最终用户的 PC 上。您的解决方案还可能包含许多应在运行加载项安装程序之前安装的引用或依赖项（如果有）。

您可能对我们技术博客上的[视频：Office 解决方案的全功能设置项目文章感兴趣。](http://www.add-in-express.com/creating-addins-blog/2011/05/26/deployment-fully-featured-setup-video/)

# apache - apache .htaccess 将 301 旧域重定向到新域并更改页面名称

> ID：11979618
> 
> 赞同：0
> 
> 时间：2012-08-16T01:45:37.043
> 
> 标签：apache, .htaccess, redirect, http-status-code-301

我只是在为现有站点的新版本制定服务器配置。

有两个先前的站点正在合并为一个： www.domain1.com www.domain2.com

这些正在合并到 www.domain2.com。

www.domain2.com 的 DNS 条目将更改为指向与 www.domain2.com 相同的 IP 地址。

页面地址已更改，因此从旧页面到新页面之间没有一对一的映射。

我需要将两个旧站点的页面重定向到新站点。那就是：

1.  从 domain1.com 到 domain2.com 的页面以及更改的页面地址。
2.  从 domain2.com 的旧页面到具有不同地址的新页面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:42:49.960

您可以通过执行以下操作从 domain1.com 重定向到 domain2.com：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.)domain1\.com [NC]
RewriteRule ^(.*)$ http://www.domain2.com/$1 [QSA,L,R=301] 
```

但是，要将旧页面重定向到新页面，只有您知道该怎么做，您必须根据自己的情况编写 RewriteRules。

有关重写的更多信息，[请参阅此处的文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# java - Windows C++ 等效于 Java 的 LockSupport.parkNanos()

> ID：11979619
> 
> 赞同：3
> 
> 时间：2012-08-16T01:45:37.400
> 
> 标签：java, c++, concurrency, disruptor-pattern

我需要在 Win7 x64 上实现与此功能相同的功能。

我最初使用过`SwitchToThread()`，但这不起作用，因为它在极端条件下会导致死锁。我能找到的唯一选择是`Sleep()`，这可能会成为性能杀手，因为它仅适用于毫秒分辨率，我仍然不确定它是否与`LockSupport.parkNanos()`.

我发现 Java 以纳秒间隔调度（如果发生这种情况的话）线程的能力很可疑，所以我实现了我只能假设它们会做的事情......旋转。但是我不确定这是否能解决问题，它可能只是延迟不可避免的事情，因为 Java 函数似乎需要 JVM 的干预才能工作。没有可用的源代码`parkNanos`；它在本地 Sun 库中实现。

```
class LockSupport
{
public:
    static void ParkNanos(unsigned __int64 aNanos)
    {
        ULONGLONG start;
        ULONGLONG end;

        ::QueryUnbiasedInterruptTime(&start);
        do
        {
            // My issue with this is that nothing is actually 'Parked'.
            ::SwitchToThread();
            ::QueryUnbiasedInterruptTime(&end);
        }
        while ((end - start) < aNanos);
    }
}; 
```

调用代码如下所示：

```
void SomeClass::SomeFunction()
{
    while (someCond)
    {
        LockSupport.parkNanos(1L);
    }
} 
```

FWIW，我正在将 LMAX 的 Disruptor 模式移植到 C++。当一个线程进入`SingleThreadedClaimStrategy::WaitForFreeSlotAt()`而另一个线程进入`BlockingWaitStrategy::WaitFor`（没有超时）时，就会发生死锁。当 RingBuffer 的大小很小时，死锁会更加明显...... 1、2、4、8 等。

线程是通过正常`CreateThread`方式创建的。

编辑：我写这篇文章的时候已经很晚了，所以这里有更多信息。RingBuffer 持有`__int64`s。我有一个生产者线程和一个消费者线程。Consumer 线程还生成一个 Timer 线程，该线程每秒轮询 Consumer 以获取它上次消费的事件的序列号。当消费者没有进展并且生产者也没有完成时，就会出现这样的情况。Producer 只是在循环中运行了几亿次，发布了一个计数器。所以我的输出看起来像这样：

```
898
97
131
Timer: no progress
Timer: no progress
... 
```

它只有在发布模式下才能真正重现，一切都针对速度进行了优化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T04:19:33.553

再说`unpark()`一个线程的能力，`LockSupport.parkNanos(...)`无非就是一个睡眠。在 Windows 上的 OpenJDK Hotspot VM 中，它使用[实现](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/9b0ca45cd756/src/os/windows/vm/os_windows.cpp)（第 4436 行）`WaitForSingleObject(...)`，并且休眠至少 1ms。

LMAX 破坏者似乎从来没有`unpark()`线程。因此，您应该通过调用`Sleep(1)`. 您可能会做得更好`Sleep(0)`：您放弃当前线程中剩余的时间片，并立即可以重新安排。这相当于`SwitchToThread()`除了后者可能只是告诉你“还没有准备好运行，所以你可以保留 cpu”。另一方面，`Sleep(1)`如果您的调度粒度足够低，实际上可能会暂停 1 毫秒。

在[注释](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298(v=vs.85).aspx)中`Sleep()`指出，您可以通过调用[`timeBeginPeriod()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624(v=vs.85).aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:23:48.777

> parkNanos 没有可用的源代码；它在本地 Sun 库中实现。

该本地库的源代码应该是 OpenJDK 6 / 7 源代码的一部分，因此应该可以下载或浏览。

# css - 计算机和移动设备的网络用户界面相同吗？

> ID：11979621
> 
> 赞同：0
> 
> 时间：2012-08-16T01:45:41.887
> 
> 标签：css, layout, html, slice

我的问题是关于网站的分辨率和用户界面。我正在为一个有经验的非营利组织开发一个免费网站，但我没有使用过移动应用程序/网站。如果你能帮助我，将不胜感激。

您能否按照最佳实践指导我，计算机浏览器和移动设备的 UI 是相同的还是开发了两个不同的 UI？

我也很困惑什么是网站的标准分辨率以及如何管理不同屏幕尺寸的分辨率（当然不能为不同的屏幕尺寸开发）。

请指导。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:12:56.223

目前使用的一种常见技术是响应式设计。也就是说，您的页面设计和布局将适应显示它的设备的分辨率和方向，而无需更改任何内容。

最简单的入门方法是 CSS 媒体查询。查看这篇文章了解更多一般信息： http: [//kyleschaeffer.com/best-practices/responsive-layouts-using-css-media-queries/](http://kyleschaeffer.com/best-practices/responsive-layouts-using-css-media-queries/)

# ruby-on-rails - “上帝”没有启动 resque worker

> ID：11979629
> 
> 赞同：3
> 
> 时间：2012-08-16T01:46:18.273
> 
> 标签：ruby-on-rails, ruby, resque, god

我在启动和运行上帝宝石时遇到了一些麻烦。我基本上从 Github 复制了配置文件，但它似乎没有正确启动 resque 工作程序。我的配置文件如下所示：

```
rails_env   = "production"
rails_root  = "/path/to/root"
num_workers = 1

num_workers.times do |num|
  God.watch do |w|
    w.dir      = "#{rails_root}"
    w.name     = "emailer-#{num}"
    w.group    = 'emailer'
    w.interval = 30.seconds
    w.behavior(:clean_pid_file)
    w.env      = {"QUEUE"=>"emailer", "RAILS_ENV"=>rails_env}
    w.start    = "/usr/local/bin/rake -f #{rails_root}/Rakefile environment resque:work"

  end
end 
```

我正在使用以下命令运行上帝：

```
sudo god -c resque.god -D 
```

这给了我以下输出：

```
I [2012-08-15 19:32:00]  INFO: resque.god
I [2012-08-15 19:32:00]  INFO: Syslog enabled.
I [2012-08-15 19:32:00]  INFO: Using pid file directory: /var/run/god
I [2012-08-15 19:32:00]  INFO: Socket already in use
I [2012-08-15 19:32:01]  INFO: Socket is stale, reopening
I [2012-08-15 19:32:01]  INFO: Started on drbunix:///tmp/god.17165.sock
I [2012-08-15 19:32:01]  INFO: emailer-0 move 'unmonitored' to 'up'
I [2012-08-15 19:32:01]  INFO: emailer-0 moved 'unmonitored' to 'up' 
```

但是没有工作人员出现在 resque-web 界面中，也没有工作从队列中拉出。谁能发现我做错了什么？此外，我已经尝试使用我常用的脚本从命令行启动一个工作人员，并且按预期工作。哦，这在 Ubuntu 10.04 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T21:54:44.523

我认为您需要像这样在 w.start 上传递 queue_name：

```
w.start = "/usr/local/bin/rake -f #{rails_root}/Rakefile environment resque:work QUEUE=emailer" 
```

# php - 我想使用数字 0-9 作为 mysql 表名。我应该如何使用 `` 反引号编写 sql 查询以防止 sql 查询错误？

> ID：11979630
> 
> 赞同：0
> 
> 时间：2012-08-16T01:46:19.173
> 
> 标签：php, mysql

用户可以在我的网站上发布任何主题标题，包括纯数字（例如 12345）。主题标题成为mysql中表的名称。在测试数字作为主题标题时，我在各个地方都遇到了MYSQL错误，并确定问题是我没有使用反引号进行sql查询。

我应该如何正确编写所有查询以防止任何可能的标题（表）返回 mysql 错误？下面的代码示例。还有哪些其他潜在的表格标题可能会导致问题？

```
<?php
for ($i=0; $i<4; $i++) {
// select by rand
$offset_result = mysql_query( " SELECT FLOOR(RAND() * COUNT(*)) AS `offset` FROM `$random_slash[$i]` ");
$offset_row = mysql_fetch_object( $offset_result ); 
$offset = $offset_row->offset;
$result = mysql_query( " SELECT * FROM `$random_slash[$i]` LIMIT $offset, 1 " );

//$rs = @mysql_query($sql);
while ($row = mysql_fetch_array($result)) {?>
        <div class="quadrant">
            <h2 class="alignleft"><a href="/<?php echo $random_slash[$i]; ?>"> 
```

作为注释 - 刻度线似乎表示代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T01:48:26.273

> 用户可以在我的网站上发布任何主题标题，包括纯数字（例如 12345）。主题标题成为mysql中表的名称。

不！不要这样做。

主题标题应该成为一个值，而不是表的名称。

使用一张表来存储主题，每个主题一行。使用第二个表来存储该主题的子项。使用外键将子主题链接到父主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:06:34.573

马克的回答已经说明了真正的问题是什么，以及如何解决它。但是，由于您将问题表述为关于反引号的问题，因此这里有一些关于它们的信息：

*   它们应该用于转义表名和列名
*   `[a-zA-Z_]`如果您的表名和列名仅包含（已经是保留字的名称除外），则不需要它们
*   它们允许您使用任意字符串命名表和列，包含空格和许多特殊字符（不是*任何*），如您所愿，但**不建议**这样做（主要是为了兼容性）。

# c++ - C++ SDL，为什么 SDL_LoadBMP() 返回 NULL？

> ID：11979632
> 
> 赞同：1
> 
> 时间：2012-08-16T01:46:26.760
> 
> 标签：c++, sdl

在做了一些研究之后，我刚刚开始使用 SDL。我从本教程开始[http://lazyfoo.net/SDL_tutorials/lesson01/index2.php](http://lazyfoo.net/SDL_tutorials/lesson01/index2.php) << 使用完全相同的代码和 bmp 图像。

出于某种原因，当我在我的 IDE（Microsoft Visual Studio）中调试和运行程序时，屏幕会加载，但应该在屏幕上弹出的图片却没有。但是，当我去我的项目并手动运行程序时，它会顺利完成所有工作。在做了一些研究之后发现 SDL_LoadBMP() 返回 NULL（如果发生错误，它返回 NULL）。但为什么？另外，我怎样才能看到错误实际上是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T01:49:23.500

您尝试加载的位图是否在正确的目录中？从 Visual Studio 启动程序时，它会从包含项目（`.vcproj`或`.vcxproj`文件）的目录中的当前工作目录开始。确保您的路径都相对于该目录。

但是，如果您通过双击 Windows 资源管理器中的可执行文件（默认情况下通常位于 a`Debug\`或`Release\`子目录中）来启动，则它会从该文件夹的当前工作目录开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:50:08.417

可能会出现几个问题：

1.  你有安装 SDL_image 吗？
2.  您是否链接到 SDL_image？
3.  您在正确的文件夹中有实际的图形文件吗？
4.  你在刷屏吗？
5.  你在使用 SDL_Flip 吗？

# objective-c - 故事板-> XIB | 加载视图

> ID：11979633
> 
> 赞同：1
> 
> 时间：2012-08-16T01:46:28.820
> 
> 标签：objective-c, ios, xcode, storyboard, xib

我最近从 Storyboard 转换为 XIB。因为我有大量的视图，并且通过 git 存储库使用 XIB 更容易。（此外，该应用程序现在可用于 iOS 4）。

现在这是我曾经拥有的代码，但我想知道如果没有 Storyboard，但使用 XIB，我将如何实现相同的目标：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle bundleForClass:[self class]]];
infoView *infoViewController = [storyboard instantiateViewControllerWithIdentifier:[defaults objectForKey:@"launchScreen"]];
infoViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentViewController:infoViewController animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:19:14.207

首先，您应该`infoView`从 Storyboard 转换为`infoView.xib`，然后：

```
 infoView *infoViewController = [[infoView alloc]initWithNibName:@"infoView" bundle:nil];
    infoViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentViewController:infoViewController animated:YES completion:nil]; 
```

# git - 如何在不使用 .gitignore 的情况下保留本地版本的文件？

> ID：11979634
> 
> 赞同：4
> 
> 时间：2012-08-16T01:46:29.797
> 
> 标签：git, git-svn, gitignore

不想更改 .gitignore ，因为其他人想要 repo 中的文件。但我有自己想要使用的副本。

我编辑`.git/info/exclude`并添加了以下内容：

```
/Gemfile
/Gemfile.lock
/config/database.yml
/spec/spec_helper.rb 
```

这似乎没有任何作用。`git status`仍然显示：

```
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   Gemfile
#       modified:   Gemfile.lock
#       modified:   config/database.yml
#       modified:   spec/spec_helper.rb 
```

在不使用 .gitignore 的情况下保留本地文件版本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T02:02:58.257

您可能会调用`git update-index --assume-unchanged [file names]`或者如果有一堆文件，只需对 .gitignore 执行此操作并根据需要修改忽略文件。

从[文档](http://www.kernel.org/pub/software/scm/git/docs/git-update-index.html)（强调我的）：

> 当“假设不变”位打开时，git 停止检查工作树文件是否有可能的修改，因此您需要手动取消设置该位以告诉 git 当您更改工作树文件时。...
> **此选项也可以用作粗略的文件级机制，以忽略跟踪文件中未提交的更改（类似于 .gitignore 对未跟踪文件所做的）**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T01:51:21.010

`.gitignore`并且`.git/info/exclude`仅适用于*尚未*在存储库中的文件。如果文件在存储库中，则不能要求 Git 忽略它们。

您可以做的是在本地维护这些更改，或者作为您与主服务器上的传入工作合并的分支，或者作为您在主服务器之上重新设置的一组更改。然而，这两者都有点不方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T01:51:54.687

我在我的机器上使用了一个全局忽略文件，它也被使用了 - 这样你就可以拥有基于项目的 .gitignore 文件 + 你的机器本地的全局设置

例如，我在 ~/.gitconfig 中有这个

```
[core]
   excludesfile = /home/adrian/.gitignore 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T01:48:43.577

您已经开始使用前导的所有文件`/`。我认为如果您要删除一切都会正常工作：

```
Gemfile
Gemfile.lock
config/database.yml
spec/spec_helper.rb 
```

# c# - Newtonsoft.json 中的 ReferenceLoopHandling.Ignore 究竟做了什么？

> ID：11979637
> 
> 赞同：36
> 
> 时间：2012-08-16T01:47:23.623
> 
> 标签：c#, .net, json, json.net

谁能给我一个可以使用它的场景。我对**ReferenceLoopHandling.Ignore**的理解是，如果您有一个引用对象 B 的对象 A 和 B 引用 C 和 C 再次引用 A (A->B->C->A)，那么在序列化时，它将无休止地结束C和A之间的循环，可以使用下面的方法来避免。我对吗？

```
 JsonConvert.SerializeObject(data, 
     Formatting.Indented, 
     new JsonSerializerSetting()
         {
             ReferenceLoopHandling = ReferenceLoopHandling.Ignore 
         } 
 )); 
```

我遇到了通过使用上述方法解决的自引用循环问题，但我想确切了解它在做什么，因为上面的行是应用程序的核心（关键肉）

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-07T22:53:03.223

The documentation on this is available here: [http://james.newtonking.com/projects/json/help/html/SerializationSettings.htm](http://james.newtonking.com/projects/json/help/html/SerializationSettings.htm)

As of this writing, the behavior is described there as follows (with emphasis mine):

> `ReferenceLoopHandling.Error`: By default Json.NET will error if a reference loop is encountered (otherwise the serializer will get into an infinite loop).
> 
> **`ReferenceLoopHandling.Ignore`**: Json.NET will ignore objects in reference loops and not serialize them. **The first time an object is encountered it will be serialized as usual but if the object is encountered as a child object of itself the serializer will skip serializing it.**
> 
> `ReferenceLoopHandling.Serialize`: This option forces Json.NET to serialize objects in reference loops. This is useful if objects are nested but not indefinitely.

# json - 使用 play.api.libs.json 将对象序列化为 json

> ID：11979638
> 
> 赞同：16
> 
> 时间：2012-08-16T01:47:23.827
> 
> 标签：json, scala, playframework, playframework-2.0, playframework-json

我正在尝试将一些相对简单的模型序列化为 json。例如，我想获得以下的 json 表示：

```
case class User(val id: Long, val firstName: String, val lastName: String, val email: Option[String]) {
    def this() = this(0, "","", Some(""))
} 
```

我需要用适当的读写方法编写自己的 Format[User] 还是有其他方法？我看过[https://github.com/playframework/Play20/wiki/Scalajson](https://github.com/playframework/Play20/wiki/Scalajson)但我还是有点迷茫。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-16T02:39:50.233

是的，编写自己的`Format`实例是[推荐的方法](http://www.playframework.org/documentation/2.0.1/ScalaJson)。给定以下类，例如：

```
case class User(
  id: Long, 
  firstName: String,
  lastName: String,
  email: Option[String]
) {
  def this() = this(0, "","", Some(""))
} 
```

该实例可能如下所示：

```
import play.api.libs.json._

implicit object UserFormat extends Format[User] {
  def reads(json: JsValue) = User(
    (json \ "id").as[Long],
    (json \ "firstName").as[String],
    (json \ "lastName").as[String],
    (json \ "email").as[Option[String]]
  )

  def writes(user: User) = JsObject(Seq(
    "id" -> JsNumber(user.id),
    "firstName" -> JsString(user.firstName),
    "lastName" -> JsString(user.lastName),
    "email" -> Json.toJson(user.email)
  ))
} 
```

你会像这样使用它：

```
scala> User(1L, "Some", "Person", Some("s.p@example.com"))
res0: User = User(1,Some,Person,Some(s.p@example.com))

scala> Json.toJson(res0)
res1: play.api.libs.json.JsValue = {"id":1,"firstName":"Some","lastName":"Person","email":"s.p@example.com"}

scala> res1.as[User]
res2: User = User(1,Some,Person,Some(s.p@example.com)) 
```

有关更多信息，请参阅[文档](http://www.playframework.org/documentation/2.0.1/ScalaJsonGenerics)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-04T07:22:00.213

由于 User 是一个案例类，您还可以执行以下操作：

```
implicit val userImplicitWrites = Json.writes[User]
val jsUserValue = Json.toJson(userObject) 
```

无需编写自己的 Format[User]。你可以对读取做同样的事情：

```
implicit val userImplicitReads = Json.reads[User] 
```

我在文档中没有找到它，这里是 api 的链接：[http://www.playframework.com/documentation/2.2.x/api/scala/index.html#play.api.libs.json。 json](http://www.playframework.com/documentation/2.2.x/api/scala/index.html#play.api.libs.json.Json) $

# objective-c - 为什么这个 if 语句不起作用？

> ID：11979640
> 
> 赞同：0
> 
> 时间：2012-08-16T01:47:39.687
> 
> 标签：objective-c, ios, xcode, cocoa, if-statement

我有一个按钮来改变`BOOL` `showSquare`等于`YES`

这是按钮的代码

```
- (IBAction)Tap_Square:(id)sender {
    [graphicsView setNeedsDisplay];
    [graphicsView setShowSquare:YES];
} 
```

这就是 if 语句所在的位置

```
if (showSquare) {
    CGContextSetFillColorWithColor(context, white);
    CGContextFillRect(context, CGRectMake(90, 90, 100, 100));
} 
```

难道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:39:54.490

graphicsView 不是零？

尝试将 setter 设置为 showSquare，然后对其进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:12:47.693

如果您想使用属性而不是实例变量，最好使用访问器方法来获取和设置它的值。

```
// use self.showSquare if you call this code in graphicsView instance
if (self.showSquare) {
    CGContextSetFillColorWithColor(context, white);
    CGContextFillRect(context, CGRectMake(90, 90, 100, 100));
} 
```

还要检查您的属性是否已合成或具有 getter 和 setter。

# ms-access - 可以使用 VBA 更改的 Access 启动属性有哪些

> ID：11979648
> 
> 赞同：3
> 
> 时间：2012-08-16T01:48:36.007
> 
> 标签：ms-access, ms-access-2007, vba

我有一个应用程序，它使用以下过程来更改一些当前数据库属性。

```
Public Sub SetStartupOptions(propname As String, propdb As Variant, prop As Variant)
On Error GoTo Err_SetStartupOptions

  'Set passed startup property.

  'some of the startup properties you can use...
  ' "StartupShowDBWindow", DB_BOOLEAN, False
  ' "StartupShowStatusBar", DB_BOOLEAN, False
  ' "AllowBuiltinToolbars", DB_BOOLEAN, False
  ' "AllowFullMenus", DB_BOOLEAN, False
  ' "AllowBreakIntoCode", DB_BOOLEAN, False
  ' "AllowSpecialKeys", DB_BOOLEAN, False
  ' "AllowBypassKey", DB_BOOLEAN, False

  Dim dbs As Object

  Dim prp As Object

  Set dbs = CurrentDb

    If propname = "DBOpen" Then
        dbs.Properties("AllowBreakIntoCode") = prop
        dbs.Properties("AllowSpecialKeys") = prop
        dbs.Properties("AllowBypassKey") = prop
        dbs.Properties("AllowFullMenus") = prop
        dbs.Properties("StartUpShowDBWindow") = prop
    Else
        dbs.Properties(propname) = prop
   End If

  Set dbs = Nothing

  Set prp = Nothing

Exit_SetStartupOptions:
    Exit Sub

Err_SetStartupOptions:
    Select Case Err.Number
        Case 3270

           Set prp = dbs.CreateProperty(propname, propdb, prop)

           Resume Next

          Case Else
              Dim ErrAns As Integer, ErrMsg As String
              If ErrChoice = vbYesNoCancel Then
                  ErrMsg = Err.Description & ": " & Str(Err.Number) & vbNewLine & "Press 'Yes' to resume next;" & vbCrLf & _
                   "'No' to Exit Procedure." & vbCrLf & "or 'Cancel' to break into code"
             Else
                  ErrMsg = Err.Description & ": " & Str(Err.Number) & vbNewLine & "Press 'Yes' to resume next;" & vbCrLf & _
                    "'No' to Exit Procedure."
             End If
            ErrAns = MsgBox(ErrMsg, _
            vbCritical + vbQuestion + ErrChoice, "SetStartupOptions")
            If ErrAns = vbYes Then
                Resume Next
            ElseIf ErrAns = vbCancel Then
                On Error GoTo 0
                Resume
            Else
                Resume Exit_SetStartupOptions
            End If
    End Select

End Sub 
```

过程可用于添加和设置 DB.properties 的值，这些是在 Access 选项屏幕中设置的属性。我有一个有限的属性名称列表，但是，有人知道我在哪里可以找到被识别的属性的完整列表吗？（即启动表单名称，启动功能区名称，...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:25:59.857

您可以使用此处所示的非常简单的过程列出运行代码时存在的数据库的所有属性。

```
Public Sub ListDBProps()
    Dim db As Database
    Dim prp As Property

    Set db = CurrentDb

    For Each prp In db.Properties
        Debug.Print prp.Name
    Next prp

End Sub 
```

这有几个问题。请注意，我说“在您运行代码时存在”。也就是说，Access 在“根据需要”的基础上为数据库（可能还有其他对象）创建属性。例如，当您将数据库编译成以前称为 MDE，现在是 ACCDE 时，Access 将添加一个名为“MDE”的类型为“Text”[10] 的新属性，其值为“T”。您提供的列表中有几个属性也属于此类别，例如“AllowBypassKey”和“AllowBreakIntoCode”。

这是我在打开的一个简单数据库上运行此代码时得到的列表：
    Name
    Connect
    Transactions
    Updatable
    Collat ​​ingOrder
    QueryTimeout
    Version
    RecordsAffected
    ReplicaID
    DesignMasterID
    Connection
    ANSI Query Mode Themed
    Form Controls
    AccessVersion
    NavPane Category
    UseMDIMode
    ShowDocumentTabs
    Build
    CheckTruncatedNumFields
    ProjVer
    StartUpShowDBWindow
    StartUpShowStatusBar
    AllowShortcutMenus
    AllowFullMenus
    AllowBuiltInToolbars
    AllowToolbarChanges
    AllowSpecialKeys
    UseAppIconForFrmRpt
    AllowDatasheetSchema
    Show Values Limit
    Show Values in Indexed
    Show Values in Non-Indexed
    Show Values in Remote
    Auto Compact
    DesignWithData
    图片属性 存储格式
    NavPane Closed
    NavPane Width
    NavPane View By
    NavPane 按
    轨道名称排序 自动更正信息
    执行名称 自动更正
    HasOfflineLists

您可以轻松地将 Type 属性添加到输出中。它是一个与 DataTypeEnum 枚举对应的整数值。Property 的 Value 属性可能有点棘手。通常它是一个可以轻松转换为字符串值的值，但是当您尝试将它们打印出来或将它们存储在 String 变量中时，有一些会导致运行时错误。一个小函数中的一点错误处理可以毫无问题地处理它。

我的示例在 Microsoft Access 2007 中的 ACCDB 上运行。

享受 。. . 道格

# python - 如何输出到带有缩进的文本文件

> ID：11979652
> 
> 赞同：2
> 
> 时间：2012-08-16T01:48:53.380
> 
> 标签：python, django

我是 Django 新手，正在尝试将表单的结果输出到带有缩进的文本文件中。我已阅读文档，只能找到编写 CSV 输出的作者。最终，我试图根据表单的输入生成可下载的 Python 脚本。由于 Python 需要准确的缩进，因此我无法正确输出。

这是我用来生成输出的部分观点：

```
if form.is_valid():
        ServerName = form.cleaned_data.get('ServerName')
        response = HttpResponse(mimetype='text/plain')
        response['Content-Disposition'] = 'attachment; filename=script.py' 
        writer = csv.writer(response)
        writer.writerow(['def ping ():'])
        writer.writerow(['run ('ping ServerName')])
return response 
```

我希望 script.py 的输出是这样的：

```
def ping():
    run('ping server01') 
```

问题：

1.  我是否使用正确的编写器输出到文本文件？
2.  如何在输出中添加缩进？
3.  如何在输出中添加括号即：`( )` 或引号`' '`而不会在视图中出现错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:17:13.043

如果您只是希望能够写出文本的原始原始表示，同时也可以保护您免受可能的转义问题，只需使用三引号和一些简单的 dict 关键字格式：

```
ServerName = form.cleaned_data.get('ServerName')

py_script = """
def ping():
    run('ping %(ServerName)s')
""" % locals()

response.write(py_script) 
```

或具有更多值：

```
ServerName = form.cleaned_data.get('ServerName')
foo = 'foo'
bar = 'bar'

py_script = """
def ping():
    run('ping %(ServerName)s')
    print "[%(foo)s]"
    print '(%(bar)s)'
""" % locals()

response.write(py_script) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:58:31.943

从[文档](https://docs.djangoproject.com/en/dev/ref/request-response/#httpresponse-objects)中：

> ...如果要增量添加内容，可以将响应用作类似文件的对象：

```
response = HttpResponse()
response.write("<p>Here's the text of the Web page.</p>")
response.write("<p>Here's another paragraph.</p>") 
```

因此，只需写信给您的回复：

```
response = HttpResponse(mimetype='text/plain')
response['Content-Disposition'] = 'attachment; filename=script.py'
response.write("def ping(): \n")
response.write("    run('ping server01')\n") 
```

# sql - Sql 外键错误 - 无法更新子行错误

> ID：11979654
> 
> 赞同：0
> 
> 时间：2012-08-16T01:48:54.653
> 
> 标签：sql, error-handling

我总共有 6 个表，但我正在尝试将外键添加到一个表（用户）以引用方表

我收到无法更新子行错误 1452 的错误

我对sql相当陌生。任何人都可以帮助我的空值错误吗？

```
grant all on election.* to 'user_id'@'localhost';
set password for 'user_id'@'localhost' =password('userpassword');

CREATE TABLE user
(
    const_id INT (11) ,
    username VARCHAR (25) NOT NULL, 
    passwd VARCHAR (25) NOT NULL,
    const VARCHAR (40) NOT NULL,
    PRIMARY KEY (const_id)
);

ALTER TABLE user ADD Foreign Key (passwd) references party (party_id); 
```

宴会桌......

```
CREATE TABLE party
( 
    party_id VARCHAR (25) ,
    member VARCHAR (20),
    leader VARCHAR (20),
    address VARCHAR (25),
    PRIMARY KEY(party_id)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:02:28.727

首先创建聚会表然后创建用户。在 mssql 中，您不能将表名设置为“用户”。如果您**引用派对（party_id）时派对表不存在；**餐桌派对不存在。它的错误。

# c++ - 如何将时间转换为纪元时间？

> ID：11979655
> 
> 赞同：16
> 
> 时间：2012-08-16T01:49:17.073
> 
> 标签：c++, time

假设我有一个特定的时刻，我知道小时、分钟、日、秒、月、年等；如何转换这个纪元时间（自 1970 年以来的秒数）？

我不能使用 Boost，所以请不要建议 Boost 解决方案。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-16T01:50:57.527

使用该[`mktime(3)`](http://linux.die.net/man/3/mktime)功能。例如：

```
struct tm t = {0};  // Initalize to all 0's
t.tm_year = 112;  // This is year-1900, so 112 = 2012
t.tm_mon = 8;
t.tm_mday = 15;
t.tm_hour = 21;
t.tm_min = 54;
t.tm_sec = 13;
time_t timeSinceEpoch = mktime(&t);
// Result: 1347764053 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-05T09:26:27.003

在 Linux 上，使用 timegm 来避免减去本地时区：

```
struct tm tm;

// set tm.tm_year, tm.tm_mon, tm.tm_mday, tm.tm_hour, tm.tm_min and tm.tm_sec

tm.tm_year -= 1900; // year start at 1900
tm.tm_mon--;        // months start at january
TIME_STAMP t = timegm(&tm); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T01:51:10.640

`mktime()`可以转换`struct tm`为自纪元以来的秒数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-30T13:48:27.533

将某种格式的日期字符串转换为 unix 纪元时间的示例代码。

```
struct tm tm;
double dateInEpoch;

if (strptime("06 Jul 2022", "%d %b %Y", &tm)) {
    time_t curTime;
    struct tm * timeinfo;

    time(&curTime );
    timeinfo = localtime(&curTime);

    timeinfo->tm_year = tm.tm_year
    timeinfo->tm_mon = tm.tm_mon;
    timeinfo->tm_mday = tm.tm_mday;

    dateInEpoch = mktime( timeinfo );
} 
```

日期格式请访问[http://www.cplusplus.com/reference/ctime/strftime/](http://www.cplusplus.com/reference/ctime/strftime/)

要测试纪元日期，请访问[https://www.epochconverter.com](https://www.epochconverter.com)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-28T09:47:10.653

mktime 和 memset 对我来说是最便携的：

```
struct tm t;
memset(&t, 0, sizeof(tm)); // Initalize to all 0's
t.tm_year = 112; // This is year-1900, so 112 = 2012
t.tm_mon = 8;
t.tm_mday = 15;
t.tm_hour = 21;
t.tm_min = 54;
t.tm_sec = 13;
time_t time_since_epoch = mktime(&t); 
```

# apache - Apache 上的特定端口配置

> ID：11979656
> 
> 赞同：0
> 
> 时间：2012-08-16T01:49:20.793
> 
> 标签：apache, localhost

所以我想在我的macbook上本地开发一个php网站。我使用 apache 作为我的网络服务器，我安装了 php 和 mysql，我可以使用我的站点文件夹中的 php 索引文件，但我想将我的所有开发转移到不同的地方。

我一直在尝试将 apache 配置为在不同的端口上运行，到目前为止，我已经对我的 /etc/apache2/extras/httpd-vhost.conf 进行了这些更改

```
<VirtualHost *:2727>
ServerAdmin foobar@gmail.com
DocumentRoot "/Users/brianWheeler/Foobar"
ServerName local.foobar.com
</VirtualHost> 
```

我已经编辑了我的 /etc/apache2/httpd.conf 说

```
listen 127.0.0.1:2727 http 
```

我已经启动了 apache，但是当我去的时候，`127.0.0.1:2727`我得到了 google chrome page not found 类型的东西。

我已经运行`apachectl -t`命令看看出了什么问题，我只是得到这个错误

`httpd: Could not reliably determine the server's fully qualified domain name, using Foo-Bars-MacBook.local for ServerName`

所以我的问题是，如何配置 DocumentRoot/index 页面，我可以运行什么样的诊断程序来查看为什么这不起作用？

-布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:04:19.333

httpd：无法可靠地确定服务器的完全限定域名，使用 Foo-Bars-MacBook.local 作为 ServerName - 此错误可能与您的问题无关。我的大多数测试服务器都给出了这个错误，但它们运行没有问题。

请尝试插入没有ip和http的行，

```
listen 2727 
```

编辑：您可以尝试以下操作：

```
NameVirtualHost *:2727
Listen 2727 
```

# mdx - 如何查询蒙德里安 MDX 查询中两个日期之间的结果？

> ID：11979658
> 
> 赞同：0
> 
> 时间：2012-08-16T01:49:24.073
> 
> 标签：mdx, pentaho

> **可能重复：**
> [如何在多维数据集中不存在日期的两个日期之间查询 mdx](https://stackoverflow.com/questions/12049835/how-to-query-in-mdx-between-two-dates-where-the-date-is-not-exist-in-the-cube)

我对查询两个日期之间记录的 MDX 有疑问，比如 DateFrom 和 DateTo。

这是我的 MDX 查询（在 pentaho 中）：

```
WITH 
    SET [metrics] AS ${myType}
    SET [dates] AS (

                    [Date].[${DateFrom,date,"yyyy"}].[${DateFrom,date,"M"}].[${DateFrom,date,"d"}]

        :

                    [Date].[${DateTo,date,"yyyy"}].[${DateTo,date,"M"}].[${DateTo,date,"d"}]                    

    )
SELECT  
     NON EMPTY [metrics] ON COLUMNS,
     NON EMPTY [dates] ON ROWS
FROM 
    ${ActivityList}

WHERE  
    ([Product].[${Product}],[Subscription].[${Subscription}], [Operator].[${Carrier}].[${Distributor}], [Instance].[${Instance}]) 
```

这是 mondrian xml 文件部分：

```
<Dimension type="TimeDimension" highCardinality="false" name="Date">
      <Hierarchy hasAll="false">
        <Level name="Year" column="TS_YEAR" type="Numeric" uniqueMembers="false" levelType="TimeYears" hideMemberIf="Never">
        </Level>
        <Level name="Month" column="TS_MONTH" type="Numeric" uniqueMembers="false" levelType="TimeMonths" hideMemberIf="Never">
        </Level>
        <Level name="Day" column="TS_DAY" type="Numeric" uniqueMembers="false" levelType="TimeDays" hideMemberIf="Never">
        </Level>
      </Hierarchy>
    </Dimension> 
```

当我在用户界面中选择 DateFrom 和 DateTo 时，即使数据库中这两个日期之间有一些记录，它也没有显示任何结果。任何想法？

# iphone - iPhone - 设置应用程序宽导航栏后退按钮，不带文字

> ID：11979659
> 
> 赞同：3
> 
> 时间：2012-08-16T01:49:32.073
> 
> 标签：iphone, uinavigationcontroller, uiappearance

我使用外观属性将图像设置为我的应用程序中所有导航栏后退按钮的背景图像。我在 applicationDidLoad 方法中使用以下代码来执行此操作。

```
UIImage *backButton = [UIImage imageNamed:@"btn-nav-back"];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButton forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

我的问题是，每当后退按钮出现时，由于前一个视图的名称被设置为后退按钮的标题，图像就会被拉伸。有没有一种系统范围的方法可以停止设置标题？还尝试在实际视图控制器中将后退按钮的标题设置为空白没有效果:(

```
[self.navigationItem.backBarButtonItem setTitle:@""]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-27T13:38:42.597

我找到了一种方法来实现你想要的。

首先使您的后退图像可调整大小，以便它不会被拉伸到后退按钮的长度：

```
UIImage* backImage = [[UIImage imageNamed:@"back"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 20, 0, 0)]; 
```

通过 UIAppearance 将此图像设置为 backButtonBackgroundImage：

```
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

最后，将标题移出可见区域：

```
[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(-1000, -1000) forBarMetrics:UIBarMetricsDefault]; 
```

唯一的缺点是，backButton 的宽度没有改变，因此您的`UINavigationBar`标题可能会偏离中心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:11:06.437

```
UIBarButtonItem *customItem = [[[UIBarButtonItem alloc] initWithCustomView:plainButton] autorelease];
self.navigationItem.leftBarButtonItem = customItem; 
[(UIButton*)self.navigationItem.leftBarButtonItem.customView addTarget:self.navigationController action:@selector(popViewControllerAnimated:) forControlEvents:UIControlEventTouchUpInside]; 
```

制作一个自定义 barButtonItem 并将其交换为默认的后退按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T01:56:23.667

发现这个问题告诉我不幸的是我不能做我想做的事:(

[可以用 UIAppearance 来设置 UINavigationItem 的 titleview 吗？](https://stackoverflow.com/questions/11230952/can-you-use-uiappearance-to-set-the-titleview-of-uinavigationitem?rq=1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T03:50:28.553

如果您需要与默认图像相同的外观，您也可以在不使用后退栏按钮图像的情况下执行此操作`BackBarButton`。只需在导航到其他控制器之前编写以下行：

```
 UIBarButtonItem *backButton = [[[UIBarButtonItem alloc]
      initWithTitle:@"Back"
              style:UIBarButtonItemStyleBordered
             target:nil
             action:nil] autorelease];
  [[viewcontroller navigationItem] setBackBarButtonItem:backButton]; 
```

这将解决您的问题。此外，您将能够根据需要使用另一种方法更改图像`barButton`。如果您发现任何问题或您正在寻找其他问题，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-11T05:16:20.570

我绕过它的方法是：

```
 UIBarButtonItem.appearance().setTitleTextAttributes([NSForegroundColorAttributeName : UIColor.clearColor()], forState: UIControlState.Normal) 
```

这适用于 iOS 8。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-02T04:02:46.120

我知道这是一个旧帖子，但如果我遇到了这个帖子，一定还有其他人也在寻找它。

只是添加到斯蒂芬的答案：这会使正常和选定状态的文本变为白色。这使得它在系统范围内只有 2 行。但是，图像占用了白色文本的空间，看起来很糟糕。

对于系统范围的后退按钮，您使用上面的代码

```
UIBarButtonItem.appearance().setTitleTextAttributes([NSForegroundColorAttributeName : UIColor.clearColor()], forState: UIControlState.Normal)
UIBarButtonItem.appearance().setTitleTextAttributes([NSForegroundColorAttributeName : UIColor.clearColor()], forState: UIControlState.Highlighted) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-15T09:18:41.573

**斯威夫特 3.x**

在 AppDelegate 文件中添加这一行
`UIBarButtonItem.appearance().setBackButtonTitlePositionAdjustment(UIOffsetMake(0, -60), for:UIBarMetrics.default)`

# c# - 如何插入段落和标题

> ID：11979662
> 
> 赞同：1
> 
> 时间：2012-08-16T01:49:35.533
> 
> 标签：c#, office-interop

我正在尝试将带有标题和一些文本的段落插入到 word 文档中。

一切正常，*除了*当我应用标题样式时，它会更改以下文本的样式，或者，当我将段落正文更改回“正常”时，它将标题更改回纯文本。我无法将它们识别为单独的段落，显然我做错了什么，但我看不出是什么。附上实际代码：-

```
Word.Paragraph p2 = wD.Paragraphs.Add(R.End);
Word.Range r2 = p2.Range;
r2.InsertAfter("If any updates were made then link to  the follow on program "
        + curTarget.followOn + ".\n");
string style = "Normal";
object objStyle = style;
r2.set_Style(ref objStyle);
r2.InsertParagraphAfter();
Word.Paragraph p3 = wD.Paragraphs.Add(r2);
Word.Range r3 = p3.Range;
r3.Text = "Call follow on process.\n";
style = "Heading 4";
objStyle = style;
r3.set_Style(ref objStyle);
r2.InsertParagraphAfter(); 
```

为凌乱的代码道歉，但它被重新（de）分解了大约 20 次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:11:41.743

正如我在评论中指出的那样，您的某些代码[看起来很像 J#](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.style%28v=office.11%29.aspx)而不是 C#。不确定这会造成多少混乱。

我注意到`Word.Range.set_Style`正在`ref`争论。而且我注意到您传入的引用是同一个变量，您在调用之间重新分配`set_Style`：

```
string style = "Normal";
object objStyle = style;
r2.set_Style(ref objStyle);
...
style = "Heading 4";
objStyle = style;
r3.set_Style(ref objStyle); 
```

相反，请尝试为第二种样式重新声明一个新变量：

```
string style = "Normal";
object objStyle = style;
r2.set_Style(ref objStyle);
...
string style2 = "Heading 4";
object objStyle2 = style2;
r3.set_Style(ref objStyle2); 
```

老实说，这是一个疯狂的猜测 - 使用`ref`和重新分配在这里应该无关紧要，[至少在 C#](https://stackoverflow.com/a/1866416/697449)中，但是当我查看您的代码时它确实引发了一个标志。

如果代码实际上是 J#，则使用 可能`ref`会导致导致您的问题的替代行为 - 我无法找到足够的 J# 文档来证明或反驳这个理论。

# facebook - 从 Node 发送 Facebook 应用程序通知？

> ID：11979664
> 
> 赞同：0
> 
> 时间：2012-08-16T01:49:55.867
> 
> 标签：facebook, node.js

Facebook [JavaScript API](https://developers.facebook.com/docs/reference/javascript/)允许您从客户端应用程序发送应用程序通知：

```
FB.ui({ method: 'apprequests', message: 'Test Request' }) 
```

...这会导致应用通知：

![](../Images/ab7b165495ed42937767a0f400c16d35.png)

如何通过 Node 在服务器端重现此行为？

（[Graph API](https://developers.facebook.com/docs/reference/api/)没有办法做到这一点。我看了。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:35:04.090

您在谈论请求，并且文档[在对话框部分结束](https://developers.facebook.com/docs/reference/dialogs/requests/)（另请参阅[请求文档](https://developers.facebook.com/docs/requests/)）。如果您获得用户发送无摩擦请求的许可，您可以通过编程方式执行此操作；否则，您必须显示一个请求对话框（通过使用重定向的弹出窗口）。

# c# - 调试连接字符串

> ID：11979680
> 
> 赞同：3
> 
> 时间：2012-08-16T01:53:01.500
> 
> 标签：c#, asp.net-mvc-3, web-applications, connection-string

我有一个使用本地 SqlExpress 在本地模式下运行良好的网站。当我发布并放置最终的服务器连接字符串时，我一直很无奈`500 - Internal server error`。

我尝试在本地调试模式下使用最终的服务器连接字符串，但即使它使用本地 SqlExpress 实例，我也不知道为什么！所以又是没用的。这是连接字符串：

```
<add name="MainDbContext" connectionString="Data Source=rose.arvixe.com;Initial Catalog=mydb;Persist Security Info=True;User ID=myuser;Password=mypassword" providerName="System.Data.SqlClient" /> 
```

我使用这些信息通过 Management Studio 连接到服务器，它工作正常。

是否有可能至少得到一个明确的错误信息？

在这个问题上 7 小时后，我请求帮助。

编辑：如果我从页面中删除所有数据访问，它会起作用。一旦我创建上下文，就会发生错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:33:35.707

如果您想要查看一些有用的调试信息而不仅仅是“服务器 500”，您需要 a) 关闭自定义错误（这样 IIS 将提供错误的技术描述）和 b) 打开跟踪。

1.  在 web.config 的节点中，添加以下内容：

> ```
> <trace
>  enabled="true"
>  requestLimit="100"
>  pageOutput="false"
>  traceMode="SortByTime"
>  localOnly="false"
>     />
> 
> <customErrors mode="Off" /> 
> ```

1.  保存文件

2.  导航到出现服务器 500 错误的页面。希望您现在会看到一些更详细的信息。

3.  导航到 [您的 Web URL]/trace.axd 并单击其中一个跟踪。这应该为您提供有关页面中正在发生的事情的更多信息。

# python - 为什么 Python 内置的“all”函数为空的可迭代对象返回 True？

> ID：11979683
> 
> 赞同：36
> 
> 时间：2012-08-16T01:53:18.187
> 
> 标签：python

我知道它有一个很好的理由，但我想知道是什么原因？

```
>>> print all([])
True 
```

如果 all() 旨在检查 iterable 上的每个项目是否评估为“True”，并且我们知道空列表被评估为 False

```
>>> bool([])
False 
```

那么为什么 all() 为空列表返回 True 呢？

<编辑>

我已经阅读了文档，并且我知道实现

```
 def all(iterable):
    for element in iterable:
        if not element:
            return False
    return True 
```

但问题是为什么不呢？

```
def all(iterable):
    if not iterable:
        return False
    for element in iterable:
        if not element:
            return False
    return True 
```

这有逻辑吗？如果您有已完成任务的列表

```
today_todo_status = [task.status for task in my_todo if task.date == today]
can_i_go_home = all(today_todo_status) 
```

好的，在上面的**假设**示例中，如果我没有任务，那么我就可以回家了。

但是还有其他情况，我不认为 all() 是为待办事项列表制作的。哈哈

</编辑>

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-16T01:57:16.247

这表示为“对于 S 中的所有 X，X 为真”。如果 S 为空，则没有 X。然而，真值陈述仍然是 True，因为对于所有 X，X 都是真的……只是没有任何 X！

这是[使用逻辑](http://bytes.com/topic/python/answers/474051-any-all-empty-list)的解释。

> 考虑两个集合 A 和 B，其中 A+B 是这两个集合的并集。
> 
> 如果 any(A+B) = True -> any(A) 或 any(B) = True 但我们不能断言 any(A)=True 或 any(B)=True。
> 
> 如果 any(A+B) = False -> any(A) = False 并且 any(B) = False。
> 
> 如果 all(A+B) = True -> all(A)=True 并且 all(B)=True
> 
> 如果 all(A+B) = False -> all(A)=False 或 all(B)=False 但我们不能断言 all(A)=False 或 all(B)=False。
> 
> 现在代替 B，让我们将空集 Ø 添加到 A。我们想要提出这样的逻辑，即添加空集不会改变 all() 或 any() 的值，因为 A+Ø=A。
> 
> 任意（A+Ø）=任意（A）或任意（Ø）
> 
> any(Ø) 必须为 False，因此如果 any(A) 为 True，则 any(A+Ø) 为 True，如果 any(A) 为 False，则 any(A+Ø) 为 False。
> 
> 全部（A+Ø）=全部（A）和全部（Ø）
> 
> 如果 all(A) 为 True，则 all(A+Ø) 为 True。因此，all(Ø) 为真。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-16T01:56:50.697

[`all()`](http://docs.python.org/library/functions.html#all)（记录为“*如果可迭代对象的所有元素都为真（**或可迭代对象为空**），则返回 True。* ”）等价于以下内容：

```
def all(iterable):
    for element in iterable:
        if not element:
            return False
    return True 
```

由于没有元素，它将跳过循环并返回`True`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-23T16:55:36.747

假设`all([])`是`False`。

然后，对于所有非空列表`A`，`all(A + [])`也应`False`为

```
all(A + []) = all(A) and all([])
            = all(A) and False
            = False 
```

因为`A + [] = A`，我们知道

```
all(A + []) = all(A) for any non empty list A 
```

但是，`all(A)`可能是`True`（例如，`A = [True]`）

因此，

> 对于所有非空列表`A`，`all(A + [])`也应该是`False`

这自相矛盾。结果，第一个假设是错误的，并且

`all([])`是`True`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T01:56:58.247

因为*所有*元素都是 True。当没有元素时，你可以说'所有元素都是......任何东西'

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T02:24:00.793

这来自数理逻辑。

“空集的元素一切都是真的”（[http://en.wikipedia.org/wiki/Empty_set](http://en.wikipedia.org/wiki/Empty_set)）

另见[http://en.wikipedia.org/wiki/Vacuous_truth](http://en.wikipedia.org/wiki/Vacuous_truth)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-04T13:09:41.567

ELI5 版本。

获取数字列表

```
L = [1,2,3,4,6]

all([isintance(l, int) for l in L]) 
```

`all`以这样一种方式定义，唯一的方法`False`是提供`at least`一个非整数。

类似`any`的定义方式是，要使它成为`True`你所需要的只是`at-least`一个正整数。

因为是一个必须是而另一个必须`all()`是的补码`any()``True``False`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-28T01:03:45.090

在测试条件时，我们希望始终将第一个元素添加到列表中。例如，如果我们只想将小于最小数字或大于最大数字的数字添加到列表中，我们可以这样做：

```
def addToList(less,num):
    if less:
        if any( num >= savedNum for savedNum in numbers):
            print('{} is not less'.format(num))
            return
    elif any( num <= savedNum for savedNum in numbers):
        print('{} is not greater'.format(num))
        return

    numbers.append(num)

numbers = []
doLess = True
doMore = False
addToList(doLess,5) #numbers is empty, but will be added
addToList(doLess,2)
addToList(doLess,7)
addToList(doMore,15)
addToList(doMore,9)
print(numbers) 
```

输出：

```
7 is not less [5, 2]
9 is not greater [5, 2, 15]
[5, 2, 15] 
```

# c++ - C++ 虚拟析构函数和符号引用错误

> ID：11979684
> 
> 赞同：0
> 
> 时间：2012-08-16T01:53:22.097
> 
> 标签：c++, inheritance, virtual-destructor

只是因为我想在我的父类和子类中使用虚拟方法来应用多态性，所以我放入了虚拟析构函数。但是我确实，不断收到错误

> 孩子:: 〜孩子（）
> 
> Child:: Child() 作为符号引用错误。

```
class Parent {
public: Parent();
        virtual ~Parent();
};

class Child {
public:
      Child();   
       ~Child();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:55:43.127

您必须定义析构函数，而不仅仅是声明它。

```
virtual ~Parent() {}; 
```

# javascript - 如何将 dojox.mobile.View 设置为高度 100%

> ID：11979687
> 
> 赞同：0
> 
> 时间：2012-08-16T01:54:04.430
> 
> 标签：javascript, mobile, dojo, dojox.mobile

是否可以将 dojox.mobile.View 设置为 100% 的高度？

示例：http: [//jsfiddle.net/sLP4S/6/](http://jsfiddle.net/sLP4S/6/)

使用 dojox.mobile.ScrollableView 代替工作。但我的意图是在视图上添加一个触摸事件，因此视图不需要滚动。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T19:27:05.777

我知道这很旧，但我就是这样做的。我使用了 mbecker 提到的内容并创建了一个扩展常规视图的新视图::

```
define([
    "dojo/_base/declare",  
    "dojo/dom",
    "dojo/dom-geometry",
    "dojo/dom-style",
    "dojo/window",
    "dojox/mobile/View",
], function( declare,dom,domGeometry, domStyle, win,View){

    // module:
    //      custom/widget/View2
    console.log("Loading View2");

    return declare("custom.widget.View2", [View], {
        tabName:"outertabbar",

        resize: function(){
        //this is for a fixed tabbar 
            //if you dont have one remove this and the tabbox
            var tabBar = dom.byId(this.tabName);
            var tabBox = domGeometry.getMarginBox(tabBar);

                var winBox = win.getBox();
            var height=winBox.h - tabBox.h + "px";
            domStyle.set(this.domNode, "height",height);
            // summary:
            //      Calls resize() of each child widget.
            this.inherited(arguments); // scrollable#resize() will be called

        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T17:41:08.267

我玩过 ContentPaneResizeMixin，但最终还是选择了这个。不要指望直接复制和粘贴 - 但这种模式会起作用。在这里，我在标头中的 dojoConfig 中设置了来自服务器的 has 变量。我检测桌面（通过 phpMobileDetect）。

```
 <script src="/dojo/dojo.js" type="text/javascript" data-dojo-config="parseOnLoad: false, async: 1, isDebug: 1, mblAlwaysHideAddressBar: false, has: { 'isDesktop': <?= json_encode($isDesktop) ?>  }"></script> 
```

然后，我使用条件插件加载器加载不同的基类，并使用一些大小调整逻辑来处理标题。繁荣。桌面本机获得滚动条，iPad 获得工作正常的 ScrollablePane。

```
define([
    "dojo/_base/declare",
    "dojo/_base/lang",
    "dojo/has",
    "dojo/has!isDesktop?dojox/mobile/Pane:dojox/mobile/ScrollablePane"
], function(declare, lang, has, Pane) {

    return declare("tt.app.ScrollableAwarePane", [ Pane ], {

        resize: function(){
            this.inherited(arguments);
            if(has('isDesktop')){
                this.containerNode.style.overflowY = "scroll";
                var height = rightPane.offsetHeight - this.getPreviousSibling().domNode.offsetHeight;
                this.containerNode.style.height = height + "px";
            }
        }

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:59:35.750

我在网页设计方面不是很有天赋，但我及时了解到 100% 的高度总是带来麻烦。相反，我会以像素为单位获取文档高度并从中减去标题、菜单等。然后以像素为单位给出绝对高度。

# c# - 如何组织和命名在 WCF Web 服务中用作数据协定的 DTO

> ID：11979688
> 
> 赞同：18
> 
> 时间：2012-08-16T01:54:13.720
> 
> 标签：c#, wcf, dto, datacontract

我们在 WCF Web 服务中使用 DTO 作为数据协定。这些 DTO 的目的是仅公开与特定 API 方法相关的信息。

我向你们寻求的是关于这里的最佳实践的一些建议。

例如，考虑以下简单模型：

```
class Order
{
    int CreatedBy { get; set; }
    DateTime CreatedOn { get; set; }
    string Description { get; set; }
    int Id { get; set; }
    string Name { get; set; }
} 
```

假设我们的 API 允许消费者*创建*、*更新*和*获取*订单，我们创建了以下 DTO。为简单起见，删除了 DataMember 和 DataContract 属性。

*Create*方法：用户不能指定*Id*和*CreatedOn*属性，因此 DTO 如下所示：

```
class CreateOrderData
{
    int CreatedBy { get; set; }
    string Description { get; set; }
    string Name { get; set; }
} 
```

*更新*方法：用户不能指定*Id*、*CreatedOn*和*CreatedBy*属性，因此 DTO 如下所示：

```
class UpdateOrderData
{
    string Description { get; set; }
    string Name { get; set; }
} 
```

*Get*方法：用户应该能够看到 Order 的所有内容，因此 DTO 如下所示：

```
class OrderData
{
    int CreatedBy { get; set; }
    DateTime CreatedOn { get; set; }
    string Description { get; set; }
    int Id { get; set; }
    string Name { get; set; }
} 
```

所以这是我的问题：

*   假设 Order 模型中有更多属性，并且其中许多属性在“创建”和“更新”DTO 之间共享，那么让这些类从公共基类扩展是否有意义？如果是，“获取”DTO（OrderData）是否也应该从该类扩展？如果我们这样做，是不是让这些 DTO 过于依赖彼此？

*   如果“创建”和“更新”DTO 之间的所有属性都是通用的，我们还应该创建两个不同的 DTO 吗？如果是，为什么？如果不是，（现在这只是一个命名问题）应该调用什么“CreateOrUpdate”DTO 以便名称明显不同于“Get”DTO？

*   是否可以在所有 DTO 后面加上“Data”或“DataObject”或“Dto”之类的东西？

*   我们在正确的轨道上吗？如果没有，如何才能使这个设计更好？

更新：

我认为我不喜欢 DTO 中的继承，因为基类也将在 WSDL 中公开，并且客户端将能够看到它并实例化它，这对我来说似乎很脏（参见：[WCF Serialization with object inherit?](https://stackoverflow.com/questions/658361/wcf-serialization-with-object-inheritance)） . 如何在 DTO 中使用接口来强制执行公共属性而不是继承？由于 DTO 中不应该有任何行为，因此我们不会因为替换继承而损失太多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T18:48:57.757

由于这与个人喜好有关，因此我会这样做..

1.  我不会创建一个公共基类，因为它不会遵守 SOLID 中的 L。如果您担心 DRY，那么您可以创建一个聚合。

2.  如果所有属性都是通用的，那么创建一个接收该对象的 Save 就很有意义，订单 Dto 类将具有一个关键属性，该属性将指示其是否存在订单。

3.  我会用 Dto 作为后缀，因为很多 Dto 类名称与域类相同，它们会让人感到困惑，因为它们会一起存在于同一个方法中。然后你可以用 DataContract(Name="Order", Namespace="htp://yourdomain/.."] 装饰你的 Dtos。这样他们就会根据你自己的喜好暴露给外界。

我参与过多个使用相同通用架构的项目，我通常使用 AutoMapper 将 dto 映射到域。它对我很有用！

# objective-c - 为什么没有保留指针需要使用释放？

> ID：11979691
> 
> 赞同：0
> 
> 时间：2012-08-16T01:55:13.863
> 
> 标签：objective-c, ios

我有两个问题，但让我们先从更容易混淆的问题开始。

```
-(void)OnNewFrameData:(NSData *)FrameData 
{
    UIImage * I = [UIImage imageWithData:FrameData];
    [I release];
} 
```

如果我不释放`I`，我会遇到内存泄漏。然而，我从未保留`I`. 有人可以解释一下吗？（`FrameData`完全由调用者管理。）

然后我有另一个关于保留属性的问题。取上面相同的代码，分配`I`给一个保留属性`J`，然后将 nil 分配给相同的保留属性，应该没有任何泄漏，但我又泄漏了内存。我也可以释放保留的属性，但我仍然会泄漏。

```
@property (retain) UIImage * J;

...

-(void)OnNewFrameData:(NSData *)FrameData 
{
    UIImage * I = [UIImage imageWithData:FrameData];
    self.J = I;
    // I can also add here [self.J release]; and it still leaks...
    self.J = nil;
    [I release];
} 
```

非常感谢我从文档和 stackoverflow 的线程中了解到的这两个令人困惑的明显矛盾。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T07:24:11.093

`[UIImage imageWithData]`是一种方便的方法，可以执行以下操作。

```
-(UIImage*)imageWithData:(NSData*)data{
   UIImage *img = [[UIImage alloc] initWithData:data];
   [img autorelease];

   return img;
} 
```

如您所见，有一个 alloc 将保留计数设置为 1。希望这可以澄清。如果我可以进一步澄清，请发表评论。我刚刚被提示该图像将被放置在一个自动释放池中，如果您想在池耗尽后保留它，则应该在创建时保留它。

正确的方法是使用。

```
 [[UIImage imageWithdata:data]retain]; 
```

在这样做时，它的保留计数为 2，在池耗尽时将减少 1。因此，您仍然应该只需要一个版本。

ps 你可能还想运行分析器。它将指出任何内存问题。(CMD + shift + b)

另一个想法。你能检查一下 i 不是零吗？文档说如果创建 UIImage 不成功，它将返回 nil，这可能是一个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T22:24:00.517

所以我尝试了以下代码的实验......

```
 NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    UIImage * Img = [[UIImage imageWithData:FrameData] retain];
    [pool drain];

    int n = [Img retainCount]; 
```

在上面的代码中，Img 的保留计数返回 1。如果我删除自动释放池，则为 2。这绝对清楚地证明了 imageWithData: 返回一个自动释放的对象，这正是我们所期望的。

所以我唯一的结论是，池没有足够快地释放 Img，他们正在池中通过网络传输的每个连续图像。最终我的记忆力耗尽了。

如果没有人对原始问题的第一部分有任何其他想法，我将不得不以此作为答案。

关于第二个问题，我仍然没有任何线索。

更新：

一直让我感到困惑的是，主线程上标记为自动释放的对象如何及时释放？我一直认为自动释放就像一个垃圾收集器，只要内存池内存不足，它就会运行。但回顾文献，很明显 GB 不是自动释放池的意义所在，因为它在非 GB 环境中可用。自动释放池不会释放任何对象，直到池被耗尽消息销毁。

那么主线程对象呢？为什么他们不累积直到程序结束？因为（我在这里推测，但这是最合乎逻辑的解释）每次框架调用我们的一个类对象（更新：我说的是框架在调度事件时调用我们的代码），它首先设置一个新的自动释放池。因此，框架对我们的类对象之一的任何方法调用中的所有对象都被一个新池包围，并且当框架从我们的代码接收控制权时，所有标记为自动释放的对象都将被释放。

如果有人有任何信息可以更清楚地说明这一点，我非常希望收到您的来信。

# c# - 我如何使用 BinaryReader 出现错误？

> ID：11979692
> 
> 赞同：1
> 
> 时间：2012-08-16T01:55:19.593
> 
> 标签：c#

我需要读取二进制文件。但是出现错误。我该怎么做 ？我试图解释我还能写什么？

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace BinaryReader
{
    public partial class Form1 : Form1
    {

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        public void R()
        {
            using (BinaryReader br = new BinaryReader(File.Open("file.bin", FileMode.Open)))
            {
                // 2.
                // Position and length variables.
                int pos = 0;
                // 2A.
                // Use BaseStream.
                int length = (int)b.BaseStream.Length;
                while (pos < length)
                {
                    // 3.
                    // Read integer.
                    int v = b.ReadInt32();
                    Console.WriteLine(v);

                    // 4.
                    // Advance our position variable.
                    pos += sizeof(int);
                }
            }
        }
    }

} 
```

在这一行我得到错误：

```
using (BinaryReader br = new BinaryReader(File.Open("file.bin", FileMode.Open))) 
```

错误“BinaryReader”是“命名空间”，但用作“类型”

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T01:57:08.133

您与自己的命名空间发生名称冲突。例如，将其重命名为，或使用的类的`BinaryReaderTest`全名：`System.IO.BinaryReader``System.IO``BinaryReader`

```
using (var br = new System.IO.BinaryReader(File.Open("file.bin", FileMode.Open))) 
```

# jquery - 如何结合 ko.js 和 jQuery 淡入动态绑定的 DOM 对象？

> ID：11979695
> 
> 赞同：1
> 
> 时间：2012-08-16T01:55:38.570
> 
> 标签：jquery, mvvm, knockout.js

我让我们说我有以下 HTML：

```
<input data-bind="value: numberOne, valueUpdate: 'afterkeydown'" />
<p/>
<input data-bind="value: numberTwo, valueUpdate: 'afterkeydown'" /><p/>
<span data-bind="text: comp"></span>
<ul data-bind="foreach: stuff">
    <li><span data-bind="text: name"></span></li>
</ul> 
```

以及 ko.js 中的以下 ViewModel。

```
function myVm() {
   var self = this;
   var counter = 0;
   var myArray = new Array(5);
    for(i = 0; i < myArray.length; i++){
        myArray[i] = { name: "Blah "+( i + 1 ) };
    }
   self.stuff = ko.observableArray(myArray);
   self.numberOne = ko.observable(0);
   self.numberTwo = ko.observable(5);
   self.comp = ko.computed(function(){ 
    if(counter > 0){ 
        if(self.stuff().length > ( parseInt(self.numberOne(), 10) + parseInt(self.numberTwo(), 10) )){

            for(i = ( parseInt(self.numberOne(), 10) + parseInt(self.numberTwo(), 10) ); i < self.stuff().length; i++){
                self.stuff.pop();
            }
        }else{

                for(i = self.stuff().length; i < ( parseInt(self.numberOne(), 10) + parseInt(self.numberTwo(), 10) ); i++){
                self.stuff.push({ name: "Blah "+( i + 1 ) });
            }
        }

            }
            counter++;
            return parseInt(self.numberOne(), 10) + parseInt(self.numberTwo(), 10); 
           });
}
var vm = new myVm();
ko.applyBindings(vm); 
```

如何将 jQuery`.fadeIn()`函数添加到动态添加的列表项中，以便它们随着数字的变化而淡入？这里是上面代码的 JSFiddle 链接：http: [//jsfiddle.net/HdR8L/2/](http://jsfiddle.net/HdR8L/2/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T02:28:39.013

一种选择是添加一个简单的`fadeText`绑定，您可以使用它来代替`text`绑定。它看起来像：

```
ko.bindingHandlers.fadeText = {
    update: function(element, valueAccessor) {
        $(element).hide();
        ko.bindingHandlers.text.update(element, valueAccessor);
        $(element).fadeIn(1000);
    }        
}; 
```

然后，您将使用它来代替现有的`text`绑定，例如：http: [//jsfiddle.net/rniemeyer/HdR8L/3/](http://jsfiddle.net/rniemeyer/HdR8L/3/)

其他选项是使用`afterAdd`此处描述的回调：http: [//knockoutjs.com/documentation/foreach-binding.html#note_5_postprocessing_or_animating_the_generated_dom_elements](http://knockoutjs.com/documentation/foreach-binding.html#note_5_postprocessing_or_animating_the_generated_dom_elements)

# ibm-midrange - 逻辑文件不适用于 SUBFILE/SETLL？

> ID：11979697
> 
> 赞同：0
> 
> 时间：2012-08-16T01:55:56.377
> 
> 标签：ibm-midrange, rpgle, rpg

我正在使用三个具有不同记录格式的逻辑文件，在第一个子文件上我使用 LF1 和 LF2，在第一个子文件上我不能使用 *LOVAL SETLL 它会给我运行时错误。不知道为什么？

然后程序将引导我进入第二个子文件，我正在使用 LF3 看起来不错。

但是如果我回到第一个子文件，子文件就会变成空白。？？？？为什么？

这是我构建子文件的子程序：

```
C     CLRSR         BEGSR                                                                                             
C                   EVAL      *IN55='0'                                                                               
C                   WRITE     USQLSCTL                                                                                
C                   EVAL      *IN55='1'                                                                               
C                   ENDSR                                                                                             
C*                                                                                                                    
C*BUILDING SUBFILE                                                                                                    
C     BLDSR         BEGSR                                                                                             
C     *LOVAL        SETLL     USRLGX                                                                                 
C                   EVAL      RECNO=0                                                                                 

C                   EXSR      TMISR1                                                                                  
C                   EXSR      REDSR1                                                                                  

C                   DOW       NOT %EOF                                                                                
C                   IF        USRID<>IDD                                                                              
C                   EXSR      MVESR                                                                                   
C                   EXSR      DIMSR                                                                                   
C                   MOVE      USRID         IDD                                                                       
C                   EVAL      RECNO=RECNO+1                                                                           
C                   WRITE     USQLS                                                                                   
C                   ENDIF                                                                                             

C                   EXSR      TMISR1                                                                                   
C                   EXSR      REDSR1                                                                                   

C                   ENDDO                                                                                             
C                   ENDSR 
```

和相关的子程序

```
C     TMISR1        BEGSR                                                                                             
C                   READ      USRLGX                                                                                  
C                   MOVE      USRTI         MINTI                                                                     
C                   ENDSR                                                                                             

C     REDSR1        BEGSR                                                                                             
C                   READ      USRLG                                                                                   
C                   MOVE      USRTO         MAXTO                                                                     
C                   ENDSR                                                       6 
```

n 我使用的 LF 是 USRLG 和 USRLGX。其中两个 LF 指的是相同的记录格式。但每个 LF 都有不同的排序顺序。*记录格式已在 F-Spec 上重命名

*   我有这两个问题是：
*   我只能使用一次 *LOVAL setll 逻辑文件。
*   n上面的编码结果有时会给出UserTime的结果在某些时候它等于空白。（000000）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:41:37.283

当您使用 *LOVAL 时，您必须使用记录地址类型“k”（表示程序中的键）

# svn - 我正在尝试使用 SVN 而不是 Dropbox

> ID：11979698
> 
> 赞同：0
> 
> 时间：2012-08-16T01:56:06.027
> 
> 标签：svn, dropbox

我打算购买一个保管箱帐户，因为我真的需要一个，但后来我问自己“为什么不使用 SVN？”

所以我在我的 Debian 服务器上设置了一个 SVN 服务器。然后在我的 Windows 桌面上安装 TortoiseSVN，在我的 Apple 笔记本电脑上安装 Versions。

我尝试在 Windows 上创建 cronjobs 到`/command:update`每个`/comment:commit`小时，但这里有一些我遇到的问题：

*   如果我删除一个文件，我必须完成它`TortoiseSVN | Delete`，我不能像普通文件一样删除它。

*   如果我`*.txt`在服务器上有一个但我的机器上有一个更新的，TortoiseSVN 不知道我更新时要做什么。我如何精确地希望它只保留最后一个编辑？

我做错了吗？我应该只写一个脚本来“监视”文件夹并同步它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:00:14.230

您可能需要研究[SparkleShare](http://sparkleshare.org/)，它是一个开源的 Dropbox 替代品，`git`用作其传输和版本控制系统。有适用于 Windows、Linux 和 OS X 的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:04:39.177

您正在尝试将 SVN 用于它不适合做的事情。存储库的全部意义在于您要小心提交和删除的内容。它可以跟踪文档的增量更改。

您将不得不按照 SVN 的使用方式开始使用 SVN。那是：

*   您的文件托管在您的服务器上；
*   在进行任何本地更改之前，您从服务器签出/更新最新版本；
*   您使用 SVN delete 删除不再需要的文档；
*   完成编辑后，将更改提交回服务器。

如果这不方便或不适合您的目的，我建议您找到旨在完成 DropBox 功能的软件。哦，我看到一个答案刚刚提供了一个建议的产品来尝试。

# java - 使用等待/通知创建事件类

> ID：11979704
> 
> 赞同：1
> 
> 时间：2012-08-16T01:56:46.047
> 
> 标签：java, concurrency

这是一个我之前考得很差的考试题，但这次我想把它做对。如果有人能指出我正确的方向，我将不胜感激，谢谢。

我的问题是，提供的解决方案是否以任何方式正确解决问题？怎么可能改进。

我的代码遵循这个问题。

问题：

> 事件对象具有信号或非信号两种状态之一。当事件处于信号状态时，所有或一个等待线程被释放。当它重置为非信号状态时，所有用户线程将被迫等待。一个事件保持在信号状态，直到它被重置为非信号状态。基本思想是一个或多个线程可以等待某个事件发生。当等待的事件发生时，线程会采取任何需要的操作。使用等待/通知编写一个事件类。

我的尝试：

```
class Event  {
    boolean signal;
    String obj = new String();

    public Event(boolean signal) {
        this.signal = signal;
    }
    synchronized void getSignal(){
        while(!signal)
            try{
                wait();
            }
            catch(InterruptedException e) {}
    }
    public void setSignal(boolean signal) {
        synchronized (this) {
            this.signal = signal;
            this.notifyAll();           
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:48:42.810

我做了这个测试课，我认为它回答了这个问题，我的事件在某种程度上与你的相似。

一个线程正在等待事件发生（发出信号时），然后等待重置，而另一个线程不时地激活和停用信号。

**编辑：**我不知道你的简单问题，所以也许这段代码对你没用。无论如何，您的 Event 课程应该可以工作，那我能说什么呢？

```
public class SynchronizationTest {

public class Event  {

    boolean signal = false;
    synchronized String getEvent(){
        while(!signal) {
            try{
                wait();
            }
            catch(InterruptedException e) {}
        }
        return "This is an event";
    }

    synchronized public void waitNextEvent(){
        while(signal) {
            try{
                wait();
            }
            catch(InterruptedException e) {}
        }
    }

    synchronized public void setSignal(boolean signal) {
        this.signal = signal;
        this.notifyAll();
    }
}

class EventChecker extends Thread {

    private Event event;
    public EventChecker(Event event) {
       this.event=event;
    }

    public void run(){
        while (true) {
            String eventStr = event.getEvent();
            System.out.println("EventChecker: Got event '"+eventStr+"'");
            System.out.println("EventChecker: wait for new event.. \n");
            event.waitNextEvent();
        }
    }
}

class EventSignaler extends Thread {

    private Event event;
    public EventSignaler(Event event) {
       this.event=event;
    }

    public void run(){
        while (true) {
            event.setSignal(true);
            System.out.print("EventSignaler: Sending new signal\n");
            try {
                sleep((int) (Math.random()*2200));
            } catch(Exception e){}

            event.setSignal(false);
            System.out.print("EventSignaler: Deactivating signal\n\n");
            try {
                sleep((int) (Math.random()*4200));
            }
            catch(Exception e){}
       }
    }
}

public void startTest() {

    Event event=new Event();
       EventSignaler eventSignaler = new EventSignaler(event);
       EventChecker eventChecker=new EventChecker(event);
       eventSignaler.start();
       eventChecker.start();
}

public static void main(String arg[]) {

    SynchronizationTest synchro = new SynchronizationTest();
    synchro.startTest();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T03:44:06.547

您的代码将正确回答您提出的问题。

可以做一些轻微的优化：

*   该`setSignal()`方法可以同步，无需额外的同步代码区域。
*   即使信号状态没有改变，也会唤醒`notifyAll()`所有线程。如果信号从锁定/阻塞状态变为解锁状态`wait()`，您可以通过检查来避免一些开销。`setSignal()`如果是，您通知。如果没有，什么也不做。
*   `obj`是不必要的。

# objective-c - 将 Storyboard 中的 UINavigationController 链接到 AppDelegate

> ID：11979705
> 
> 赞同：1
> 
> 时间：2012-08-16T01:56:48.637
> 
> 标签：objective-c, cocoa-touch, appdelegate

所以我用单视图模板启动了一个 iOS 应用程序。然后我通过将导航控制器拖到情节提要中来添加它。如何从我的应用委托中引用它？我尝试将它按 ctrl 拖动到我的 AppDelegate 插座样式中，但这显然不起作用。我该怎么办？实例化一个，然后将其分配为 rootview 控制器？

最后，我想使用 AppDelegate 将视图设置到导航控制器的顶部。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T03:44:18.507

在 IB 中，您应该选择导航控制器，然后单击检查器中的“是初始视图控制器”复选框——这会自动使该控制器成为窗口的根视图控制器。在您的应用程序委托中，您可以使用 self.window.rootViewController 获取对导航控制器的引用，并根据需要将其分配给属性。

# node.js - Mongodb插入和查找节点js？

> ID：11979710
> 
> 赞同：0
> 
> 时间：2012-08-16T01:57:19.400
> 
> 标签：node.js, mongodb

在我的查找功能中。参数“item”始终为 Null。我想知道插入或查找我的代码是否有问题。我该怎么解决？？

```
 var express = require('express');
    var routes = require('./routes');
    var socket = require('socket.io');
    var fs = require('fs');
    var app = module.exports = express.createServer();
    var Server = require('mongodb').Server,
        Db = require('mongodb').Db,
        Connection = require('mongodb').Connection;
    var host = 'localhost';
    var port = Connection.DEFAULT_PORT;
    var db = new Db('node-mongo-examples', new Server(host, port, {}), {native_parser:false});
    var id ;

    db.open(function(err, db) {
        //console.log('opened');   
        app.listen(3000); 

    });

    db.collection('locations', function(err, collection) {
         var object= ({'word':'TEST'},{'word':'HELL'},{'img':'terr'});
         collection.insert(object,  function(err, result) {
            console.log(result);
            id = object._id;
            collection.find({'word':'TEST'}).toArray(function(err, items){

                    console.log('item' +items);// <-- The item is always NULL
            });  

        });
     }); 
```

然后我将我的代码更改为....

但它仍然有关于“无法调用null的方法集合”的错误。

```
 db.open(function(err, db) {
            db.collection('locations', function(err, collection) {
                var object= ({'word':'TEST'},{'word':'HELL'},{'img':'terr'});
            collection.insert(object,  function(err, result) {
                console.log(result);
                id = object._id;
                collection.find({'word':'TEST'}).toArray(function(err, items){
                    if(err)
                        console.log(err);
                    else
                        console.log('item' +items);
                });  

                });
        });
        app.listen(3000); 

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:09:31.133

这一行：

```
var object= ({'word':'TEST'},{'word':'HELL'},{'img':'terr'}); 
```

使用`console.log(object);`并准确查看您要插入 MongoDB 的内容。这段代码相当于

```
var object = {'img':'terr'}; 
```

这就是为什么你总是得到`null`- 你不插入你正在寻找的文档。

如果要传递多个文档，请使用**数组**：

```
var object= [{'word':'TEST'},{'word':'HELL'},{'img':'terr'}]; 
```

# architecture - 为来自多个国家的大量用户提供服务的在线服务的系统架构

> ID：11979717
> 
> 赞同：1
> 
> 时间：2012-08-16T01:58:47.297
> 
> 标签：architecture, system, distributed

我真的很想了解一个网站的网络系统架构是什么样子的

1.  随时为数万用户提供在线服务

2.  提供对多种语言的支持，以便来自多个国家/地区的人们可以使用它

基本上，我想知道必须考虑哪些因素。分布式服务器（其他国家的服务器）？添加故障转移？整个事情如何运作？

我注意到 google 有 google.com、goolge.run、google.cn 等。这背后的原理是什么？每个网址是否提供不同或相同的内容？

任何指针或信息都非常感谢。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:49:02.693

与架构相关的任务没有灵丹妙药。但通常对于一个大型且长期存在的项目，您应该考虑以下任务：

定义您应该开始的目标容量。您无法在一次迭代中构建高可用性系统。最初，您可能可以从全球最大用户会话数 = 1000 开始，但您现在应该准备好进行扩展。并且不要害怕支付[技术债务](http://en.wikipedia.org/wiki/Technical_debt)。

更加关注底层技术细节。您无法想象这一点对于大型项目的重要性。对于大量数据，一些通用解决方案可以替换为针对您自己的目的优化的您自己的解决方案。这与任何情况有关：数据库方案、处理对服务器的请求或排序算法。例如，拥有更具体的排序算法，收益非常小，但数据量巨大，可以节省数十亿美元。在这个级别，您可能必须在请求处理序列级别调整您的 Web 服务器，以便您应该了解底层细节及其源代码。开源项目在这方面做得很好，因为您可以随时改进实现或修复错误。

最后，您应该了解一些广为人知的缩放方法。平衡和缓存是微不足道的，它可能是[分片](http://en.wikipedia.org/wiki/Shard_%28database_architecture%29)、延迟数据处理，甚至是数据的完全重复（考虑一下当 Mark Tsukenberg 发布到 Facebook 时，由于他拥有广泛的订阅者社区，数据库中发布的记录不止一条）

# asp.net-mvc - 如何指定明确的 ScriptBundle 包含顺序？

> ID：11979718
> 
> 赞同：91
> 
> 时间：2012-08-16T01:58:59.790
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundle, asp.net-optimization

我正在尝试[MVC4 System.Web.Optimization 1.0 ScriptBundle 功能](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)。

我有以下配置：

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        // shared scripts
        Bundle canvasScripts =
            new ScriptBundle(BundlePaths.CanvasScripts)
                .Include("~/Scripts/modernizr-*")
                .Include("~/Scripts/json2.js")
                .Include("~/Scripts/columnizer.js")
                .Include("~/Scripts/jquery.ui.message.min.js")
                .Include("~/Scripts/Shared/achievements.js")
                .Include("~/Scripts/Shared/canvas.js");
        bundles.Add(canvasScripts);
    }
} 
```

和以下观点：

```
<script type="text/javascript" src="@Scripts.Url(BundlePaths.CanvasScripts)"></script> 
```

`BundlePaths.CanvasScripts`在哪里`"~/bundles/scripts/canvas"`。它呈现：

```
<script type="text/javascript" src="/bundles/scripts/canvas?v=UTH3XqH0UXWjJzi-gtX03eU183BJNpFNg8anioG14_41"></script> 
```

到目前为止一切顺利，除了`~/Scripts/Shared/achievements.js`捆绑源中的第一个脚本。这取决于`ScriptBundle`. **如何确保它遵守我将包含语句添加到包的顺序？**

**更新**

这是一个相对较新的 ASP.NET MVC 4 应用程序，但它引用了优化框架预发布包。我删除了它并从[http://nuget.org/packages/Microsoft.AspNet.Web.Optimization](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization)添加了 RTM 包。使用 web.config 中带有 debug=true 的 RTM 版本，`@Scripts.Render("~/bundles/scripts/canvas")`以正确的顺序呈现各个脚本标签。

在 web.config 中使用 debug=false 时，组合脚本首先具有成就.js 脚本，但由于它是稍后调用的函数定义（对象构造函数），因此它运行时不会出错。也许缩小器足够聪明，可以找出依赖关系？

我还尝试了`IBundleOrderer`Darin Dimitrov 建议的带有两个调试选项的 RTM 实现，它的行为相同。

所以缩小版本不是我期望的顺序，但它可以工作。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-08-16T05:40:57.497

您可以编写一个自定义捆绑订购程序 ( [`IBundleOrderer`](http://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer%28VS.110%29.aspx))，以确保捆绑包含在您注册它们的顺序中：

```
public class AsIsBundleOrderer : IBundleOrderer
{
    public virtual IEnumerable<FileInfo> OrderFiles(BundleContext context, IEnumerable<FileInfo> files)
    {
        return files;
    }
} 
```

接着：

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        var bundle = new Bundle("~/bundles/scripts/canvas");
        bundle.Orderer = new AsIsBundleOrderer();
        bundle
            .Include("~/Scripts/modernizr-*")
            .Include("~/Scripts/json2.js")
            .Include("~/Scripts/columnizer.js")
            .Include("~/Scripts/jquery.ui.message.min.js")
            .Include("~/Scripts/Shared/achievements.js")
            .Include("~/Scripts/Shared/canvas.js");
        bundles.Add(bundle);
    }
} 
```

在您看来：

```
@Scripts.Render("~/bundles/scripts/canvas") 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-05-08T09:44:50.383

谢谢达林。我添加了一个扩展方法。

```
internal class AsIsBundleOrderer : IBundleOrderer
{
    public virtual IEnumerable<FileInfo> OrderFiles(BundleContext context, IEnumerable<FileInfo> files)
    {
        return files;
    }
}

internal static class BundleExtensions
{
    public static Bundle ForceOrdered(this Bundle sb)
    {
        sb.Orderer = new AsIsBundleOrderer();
        return sb;
    }
} 
```

用法

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js",
                    "~/Scripts/jquery-migrate-{version}.js",

                    "~/Scripts/jquery.validate.js",
                    "~/Scripts/jquery.validate.messages_fr.js",
                    "~/Scripts/moon.jquery.validation-{version}.js",

                    "~/Scripts/jquery-ui-{version}.js"
                    ).ForceOrdered()); 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2014-03-26T04:12:31.957

更新了 SoftLion 提供的答案以处理 MVC 5（BundleFile 与 FileInfo）中的更改。

```
internal class AsIsBundleOrderer : IBundleOrderer
{
    public virtual IEnumerable<BundleFile> OrderFiles(BundleContext context, IEnumerable<BundleFile> files)
    {
        return files;
    }
}

internal static class BundleExtensions
{
    public static Bundle ForceOrdered(this Bundle sb)
    {
        sb.Orderer = new AsIsBundleOrderer();
        return sb;
    }
} 
```

用法：

```
 bundles.Add(new ScriptBundle("~/content/js/site")
        .Include("~/content/scripts/jquery-{version}.js")
        .Include("~/content/scripts/bootstrap-{version}.js")
        .Include("~/content/scripts/jquery.validate-{version}")
        .ForceOrdered()); 
```

我喜欢使用流利的语法，但它也适用于单个方法调用和所有作为参数传递的脚本。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-08-16T21:47:14.680

我在 RTM 位上没有看到这种行为，您是否使用 Microsoft ASP.NET Web 优化框架 1.0.0 位： http: [//nuget.org/packages/Microsoft.AspNet.Web.Optimization](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization)？

我根据一个新的 MVC4 Internet 应用程序网站使用了与您的示例类似的复制品。

我添加到 BundleConfig.RegisterBundles：

```
 Bundle canvasScripts =
            new ScriptBundle("~/bundles/scripts/canvas")
                .Include("~/Scripts/modernizr-*")
                .Include("~/Scripts/Shared/achievements.js")
                .Include("~/Scripts/Shared/canvas.js");
        bundles.Add(canvasScripts); 
```

然后在默认索引页面中，我添加了：

```
<script src="@Scripts.Url("~/bundles/scripts/canvas")"></script> 
```

我验证了在压缩包的 javascript 中，results.js 的内容是在modernizr 之后......

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-06-17T10:16:48.380

您应该能够在 BundleCollection.FileSetOrderList 的帮助下设置顺序。看看这篇博文：[http](http://weblogs.asp.net/imranbaloch/archive/2012/09/30/hidden-options-of-asp-net-bundling-and-minification.aspx) ://weblogs.asp.net/imranbaloch/archive/2012/09/30/hidden-options-of-asp-net-bundling-and-minification.aspx 。您实例中的代码将类似于：

```
BundleFileSetOrdering bundleFileSetOrdering = new BundleFileSetOrdering("js");
bundleFileSetOrdering.Files.Add("~/Scripts/modernizr-*");
bundleFileSetOrdering.Files.Add("~/Scripts/json2.js");
bundleFileSetOrdering.Files.Add("~/Scripts/columnizer.js");
bundleFileSetOrdering.Files.Add("~/Scripts/jquery.ui.message.min.js");
bundleFileSetOrdering.Files.Add("~/Scripts/Shared/achievements.js");
bundleFileSetOrdering.Files.Add("~/Scripts/Shared/canvas.js");
bundles.FileSetOrderList.Add(bundleFileSetOrdering); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-18T21:15:06.337

@Darin Dimitrov 的答案非常适合我，但我的项目是用 VB 编写的，所以这是他的答案转换为 VB

```
Public Class AsIsBundleOrderer
    Implements IBundleOrderer

    Public Function IBundleOrderer_OrderFiles(ByVal context As BundleContext, ByVal files As IEnumerable(Of FileInfo)) As IEnumerable(Of FileInfo) Implements IBundleOrderer.OrderFiles
        Return files
    End Function
End Class 
```

使用它：

```
Dim scriptBundleMain = New ScriptBundle("~/Scripts/myBundle")
scriptBundleMain.Orderer = New AsIsBundleOrderer()
scriptBundleMain.Include(
    "~/Scripts/file1.js",
    "~/Scripts/file2.js"
)
bundles.Add(scriptBundleMain) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-02T13:11:41.340

您应该考虑使用 Cassette [http://getcassette.net/](http://getcassette.net/)它支持根据在每个文件中找到的脚本引用自动检测脚本依赖项。

如果您更喜欢坚持 MS Web 优化解决方案，但喜欢根据脚本参考安排脚本的想法，您应该阅读我在[http://blogs.microsoft.co.il/oric/2013/12/27/building-single上的博客文章-page-application-bundle-orderer/](http://blogs.microsoft.co.il/oric/2013/12/27/building-single-page-application-bundle-orderer/)

# debugging - 为什么会出现异常 java.security.cert.CertificateException: Certificate has been denied

> ID：11979719
> 
> 赞同：0
> 
> 时间：2012-08-16T01:59:04.113
> 
> 标签：debugging, exception, https, applet, certificate

在***某些***环境下使用jre1.7访问https时，提示java.security.cert.CertificateException: Certificate has been denied

小程序很简单，比如

小程序代码库="https://xxx.xx.com/CheckJava.class"

该错误似乎是出于安全原因，jre 不允许下载任何类或 jar。

如果在代码库上将 https 更改为 http，它可以工作。

如果您能提供任何解决问题的线索，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T18:46:25.787

如上所述：

> 刚发现是JRE1.7.0.5的问题，升级到最新的JRE1.7.0.6，问题就消失了。

# bash - 从文件读取时，通过 SSH 编写脚本 sudo 行为异常

> ID：11979721
> 
> 赞同：2
> 
> 时间：2012-08-16T01:59:16.777
> 
> 标签：bash, ssh, sudo

我发现我可以从 bash 脚本中在远程系统上运行单个 sudo 命令。例如：

```
#!/bin/bash

ssh -t <REMOTE_IP> 'sudo ls /root' 
```

但是，如果我尝试通过对包含远程系统 IP 的文件的循环运行相同的命令，它就会开始变得奇怪。它无法使用 -t 选项分配 TTY，因此我使用了两个 (-t -t)。这样做会得到密码提示。然后它告诉我我的密码不正确，我什至没有输入密码，显示第二个提示，它回显我的密码，然后在我按 Enter 后挂起。

这种脚本的一个例子：

```
#!/bin/bash

while read i
do
    ssh -t -t $i "sudo ls /root"
done < ip.list 
```

我看到的结果示例：

```
user@opensuse:~/bin> ./test.sh 
10.153.171.131

[sudo] password for user: 
Sorry, try again.
[sudo] password for user: Pa55w0rd
^CKilled by signal 2\. *This is where it hangs and I have to kill it.* 
```

我没有找到太多的解释方式，所以如果有人能对此有所了解，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:04:17.883

`stdin`您正在循环内重定向：

```
while read i
do
    ssh -t -t $i "sudo ls /root"
done < ip.list 
```

这意味着 (a)`ssh`不再连接到您的 TTY，并且 (b) 它可能会吃掉您的输入。理想情况下，您会将输入重定向到 ssh`/dev/null`并配置`sudo`为不需要 TTY。但是，您可以尝试：

```
ssh -t $i "sudo ls /root" < /dev/tty 
```

# sql - cakephp 查找数组

> ID：11979722
> 
> 赞同：0
> 
> 时间：2012-08-16T01:59:31.877
> 
> 标签：sql, database, cakephp, find

大家好，我在'where子句'中不断得到一个未知列'Array' `$receiverName`，当我调试时`$receiver`我得到这个输出

```
array(
    (int) 0 => array(
        'Invoice' => array(
            'receiver_id' => '3',
            'id' => '1'
        ),
        'FieldsInvoice' => array(
            (int) 0 => array(
                'id' => '1',
                'field_id' => '9',
                'invoice_id' => '1',
                'entered_value' => '1000.00'
            )
        )
    ),
    (int) 1 => array(
        'Invoice' => array(
            'receiver_id' => '4',
            'id' => '2'
        ),
        'FieldsInvoice' => array(
            (int) 0 => array(
                'id' => '2',
                'field_id' => '9',
                'invoice_id' => '2',
                'entered_value' => '2000.00'
            )
        )
    ),
    (int) 2 => array(
        'Invoice' => array(
            'receiver_id' => '7',
            'id' => '3'
        ),
        'FieldsInvoice' => array()
    ),
    (int) 3 => array(
        'Invoice' => array(
            'receiver_id' => '8',
            'id' => '4'
        ),
        'FieldsInvoice' => array()
    ),

    //returns receiver_id from the invoices table where sender_id=current user account

$receiver=$this->Invoice->find('all',array(
        'fields'=>('receiver_id'),'conditions'=>array(
        'sender_id'=>$accounts2)));

    //returns company_name from the accounts tables where receiver_id=account.id 
```

我想要做的是`receiver_id`从数组中抓取，然后将其与`account.id`然后打印进行比较，但它与我的find`company_name`中的 where 语句引发了问题`$receiverName`

```
$receiverName=$this->Account->find('all',array(
        'fields'=>('company_name'),'conditions'=>array(
        'id'=>$receiver))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:45:22.077

那是因为您正在传递数组，请将您的 $receiver 行更改为以下

```
$receiver=$this->Invoice->field('receiver_id',array('sender_id'=>$accounts2)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T02:39:25.320

1) 下载并安装[DebugKit](https://github.com/cakephp/debug_kit/)（这是任何 CakePHP 项目的必备 - 认真）

2）点击右上角的DebugKit图标展开它的选项

3）点击“Sqllog”选项卡，看看它在哪里显示“Array”而不是你想要的值

4）将值更改为不是数组

5）给自己买一个冰淇淋或啤酒或其他什么，然后休息一晚，因为你的查询现在有效。

* * *

**PS-**也根据评论，应该是`'fields'=>array('company_name')`，不是`'fields'=>('company_name')`

# javascript - 如何将要在地图上显示的文本添加到传单中的 geojson 对象

> ID：11979729
> 
> 赞同：19
> 
> 时间：2012-08-16T02:00:45.967
> 
> 标签：javascript, leaflet

所以我在传单中有一个 geojson 图层，我可以将 geojson 对象添加到该图层以显示在结果地图上。

现在我想添加一个文本标签以显示在对象附近。

此示例显示使用自定义`L.control()`对象在地图上显示附加信息。这似乎接近我想做的事情。

鉴于此示例，我想在每个状态上添加状态初始文本标签（即“TX”、“FL”）。可以`L.control()`用来做这个，还是有别的方法？

[http://leaflet.cloudmade.com/examples/choropleth.html](http://leaflet.cloudmade.com/examples/choropleth.html)

```
var info = L.control();

info.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    this.update();
    return this._div;
};

// method that we will use to update the control based on feature properties passed
info.update = function (props) {
    this._div.innerHTML = '<h4>US Population Density</h4>' +  (props ?
        '<b>' + props.name + '</b><br />' + props.density + ' people / mi<sup>2</sup>'
        : 'Hover over a state');
};

info.addTo(map); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-03-19T08:53:54.220

**使用标记类和具有“html”属性的 DivIcon 类的传单中的标签覆盖**

就个人而言，我使用这种方法来实现地图上的文本标签。这样我就可以毫不费力地使用所有现有的标记类方法和事件。我猜这有点像使用文本标签代替图标。

```
 var textLatLng = [35.1436, -111.5632];  
        var myTextLabel = L.marker(textLatLng, {
            icon: L.divIcon({
                className: 'text-labels',   // Set class for CSS styling
                html: 'A Text Label'
            }),
            zIndexOffset: 1000     // Make appear above other map features
        }); 
```

我的 CSS 看起来像：

```
 .text-labels {
            font-size: 2em;
            font-weight: 700;
            color: white;
            /* Use color, background, set margins for offset, etc */
        } 
```

另外，我还没有探索过这个，但也许你可以在 CSS 中添加一个 png，然后偏移文本，这样你就可以使用 Leaflet DivIcon 类将图标和标签包装在同一个 Marker 对象中？使用 div 形状（例如框、圆）会很容易，但我不确定是否要为 Marker 对象在 CSS 中添加 png - 因为无论如何我都不是 CSS 专家。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-31T07:52:26.060

我最近在寻找同样的问题，昨天刚刚根据谷歌组中的帖子实现了它。 [https://groups.google.com/forum/#!topic/leaflet-js/sA2HnU5W9Fw](https://groups.google.com/forum/#!topic/leaflet-js/sA2HnU5W9Fw)

感谢 Adrian 提供的原始代码示例。

这是解决方案：

扩展如下类：

```
<script>

    L.LabelOverlay = L.Class.extend({
        initialize: function(/*LatLng*/ latLng, /*String*/ label, options) {
            this._latlng = latLng;
            this._label = label;
            L.Util.setOptions(this, options);
        },
        options: {
            offset: new L.Point(0, 2)
        },
        onAdd: function(map) {
            this._map = map;
            if (!this._container) {
                this._initLayout();
            }
            map.getPanes().overlayPane.appendChild(this._container);
            this._container.innerHTML = this._label;
            map.on('viewreset', this._reset, this);
            this._reset();
        },
        onRemove: function(map) {
            map.getPanes().overlayPane.removeChild(this._container);
            map.off('viewreset', this._reset, this);
        },
        _reset: function() {
            var pos = this._map.latLngToLayerPoint(this._latlng);
            var op = new L.Point(pos.x + this.options.offset.x, pos.y - this.options.offset.y);
            L.DomUtil.setPosition(this._container, op);
        },
        _initLayout: function() {
            this._container = L.DomUtil.create('div', 'leaflet-label-overlay');
        }
    });   

</script> 
```

此外添加这个CSS：

```
<style>
    .leaflet-popup-close-button {
        display:none;
    }

    .leaflet-label-overlay {
        line-height:0px;
        margin-top: 9px;
        position:absolute;
    }
</style> 
```

然后显示如下文本标签：

```
<script>
    var map = L.map('map').setView([51.898712, 6.7307100000001], 4);

    // add markers
    // ...

    // add text labels:
    var labelLocation = new L.LatLng(51.329219337279405, 10.454119349999928);
    var labelTitle = new L.LabelOverlay(labelLocation, '<b>GERMANY</b>');
    map.addLayer(labelTitle);

    var labelLocation2 = new L.LatLng(47.71329162782909, 13.34573480000006);
    var labelTitle2 = new L.LabelOverlay(labelLocation2, '<b>AUSTRIA</b>');
    map.addLayer(labelTitle2);

    // In order to prevent the text labels to "jump" when zooming in and out,
    // in Google Chrome, I added this event handler:

    map.on('movestart', function () {
        map.removeLayer(labelTitle);
        map.removeLayer(labelTitle2);
    });
    map.on('moveend', function () {
        map.addLayer(labelTitle);
        map.addLayer(labelTitle2);
    });
</script> 
```

结果：

![在此处输入图像描述](../Images/4f99363ef235ea0ae8bf75a422f2ff59.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-28T05:15:28.800

我正在为当前版本采用此代码。

```
 <style>
        .leaflet-popup-close-button {
            display:none;
        }

        .leaflet-label-overlay {
            line-height:0px;
            margin-top: 9px;
            position:absolute;
        }
    </style>    

    <script>
        L.LabelOverlay = L.Layer.extend({
            initialize: function(/*LatLng*/ latLng, /*String*/ label, options) {
                this._latlng = latLng;
                this._label = label;
                L.Util.setOptions(this, options);
            },
            options: {
                offset: new L.Point(0, 2)
            },
            onAdd: function(map) {
                this._map = map;
                if (!this._container) {
                    this._initLayout();
                }
                map.getPanes().popupPane.appendChild(this._container);
                this._container.innerHTML = this._label;
                map.on('movestart', this._update_start, this);
                map.on('moveend', this._update_end, this);
                this._update_end();
            },
            onRemove: function(map) {
                map.getPanes().popupPane.removeChild(this._container);
                map.off('movestart', this._update_start, this);
                map.off('moveend', this._update_end, this);
            },
            _update_start: function(){
                L.DomUtil.setPosition(this._container, 0);
            },
            _update_end: function() {
                var pos = this._map.latLngToLayerPoint(this._latlng);
                var op = new L.Point(pos.x + this.options.offset.x, pos.y - this.options.offset.y);
                L.DomUtil.setPosition(this._container, op);
            },
            _initLayout: function() {
                this._container = L.DomUtil.create('div', 'leaflet-label-overlay');
            }
        });   
    </script> 
```

# mysql - SQL 包含不返回任何结果

> ID：11979730
> 
> 赞同：1
> 
> 时间：2012-08-16T02:00:59.853
> 
> 标签：mysql, contains

我正在尝试升级我网站上的搜索。

我偶然发现了包含。

我已将要搜索的列设置为 FULLTEXT。

我错过了什么？

```
title = Test is what i'm doing

SELECT * FROM test WHERE title LIKE "%Test%" 
```

工作正常。

```
SELECT * FROM test WHERE CONTAINS('*', "'Test*'") 
```

什么都不返回。

我努力了

```
SELECT * FROM test WHERE CONTAINS(title, "Test") 
```

以及我能想到的一切。

包含 Contains 的所有内容均不返回任何内容。

这是我的表结构。

```
Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   PRIMARY BTREE   Yes No  ID  15642   A           
 Edit    Drop   title   FULLTEXT    No  No  title   1       YES 
```

我在这里想念什么？

我正在使用 MySQL 5.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:07:28.270

CONTAINS 仅在您拥有全文索引列时才有效。据推测，这并不到位。

按照[http://msdn.microsoft.com/en-us/library/ms142497](http://msdn.microsoft.com/en-us/library/ms142497)上的文档帮助进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:18:28.510

1.  `title`必须为该列编制索引才能`CONTAINS`工作。列是否被`title`索引？

2.  根据[这篇文章](https://stackoverflow.com/questions/10685444/sql-server-contains-full-text-function-not-returning-expected-results)，在 contains 关键字中使用通配符是有限制的。

3.  根据您的数据库实现，双引号可能会导致意外结果。将其更改为单引号以确保安全。（[MSDN](http://msdn.microsoft.com/en-gb/library/ms187787%28v=SQL.90%29.aspx)上的一些示例使用双引号和单引号，但外引号是单引号（与您的示例不同）。

4.  您确定您的数据库中有记录具有指定的字符串“Test”吗？

5.  根据[http://forums.asp.net/t/1639440.aspx](http://forums.asp.net/t/1639440.aspx)上的回复之一，该`CONTAINS`运算符在 SQL Express 中不可用。您没有提及您正在使用哪个数据库，因此这可能适用也可能不适用。

# android - 用于椭圆曲线加密的 NFC 兼容标签

> ID：11979732
> 
> 赞同：0
> 
> 时间：2012-08-16T02:01:14.013
> 
> 标签：android, nfc, elliptic-curve, javacard

我有一个 Android 项目，要求我使用 NFC 标签使用椭圆曲线算法对数据进行加密/签名。

我需要标签能够使用我在外部生成的密钥对来执行加密本身。重要的是，私钥存储在标签上，而不是传输到 Android 来执行签名。

我还需要写保护所有标签，这样只有我签名的数据才能写入它们。

我希望标签的外形尺寸尽可能小。

从我目前的研究来看，看起来我必须使用 Java Cards，但我不确定这一点。

任何人都可以确认我可以使用的适当设备吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:19:34.320

你需要一些微控制器卡。除了标准信用卡表格 (ID-1) 之外，我从未见过其他任何形式的表格。

Java Card 卡当然是一种选择，例如 NXP JCOP 或 Gemalto TOP 卡。它们可以在各个地方在线购买。要为此类卡编写小程序，需要您有权访问该卡的 SDK（通常仅在 NDA 下可用）。Java Card 编程与 Java 编程完全不同，此外，它需要了解诸如 ISO 7816-4 和（在您的情况下）加密之类的知识。

另一种可能性可能是[ZeitControl BasicCard](http://en.wikipedia.org/wiki/BasicCard)。这些卡可从各种在线智能卡商店和 ZeitControl 本身购买（并非所有卡都可以执行 ECC）。SDK 是免费的，可从[ZeitControl 网站](http://www.basiccard.com/)获得。不过，卡的编程语言需要一些时间来适应，但很多通信细节都是自动处理的。如果您需要帮助将 BasicCard 小程序与 Android 应用程序连接，您可以向 ZeitControl 索取更多信息（当我联系他们时，他们非常有帮助）。不过，它并不过分复杂。

# python - 如何使用 Python 3.x 成功导入 numpy？

> ID：11979734
> 
> 赞同：3
> 
> 时间：2012-08-16T02:01:39.223
> 
> 标签：python, import, numpy

*类似于[How to import numpy in python shell](https://stackoverflow.com/questions/11906575/how-to-import-numpy-in-python-shell)，但有不同的错误和上下文。*

现在，关于问题。我成功地安装了 numpy 1.7.0，虽然我必须先做一些注册表版本，但在尝试将它导入 shell 时，我得到了这么多错误：

```
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    from numpy import *
  File "C:\Python32\lib\site-packages\numpy\__init__.py", line 137, in <module>
    from . import add_newdocs
  File "C:\Python32\lib\site-packages\numpy\add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
  File "C:\Python32\lib\site-packages\numpy\lib\__init__.py", line 4, in <module>
    from .type_check import *
  File "C:\Python32\lib\site-packages\numpy\lib\type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
  File "C:\Python32\lib\site-packages\numpy\core\__init__.py", line 5, in <module>
    from . import multiarray
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

*注意*：我使用了 from numpy import *. 当我导入 pygame 时没有发生这种情况，那么问题是什么？我知道不同的模块有不同的问题（例如必须制作注册表版本才能安装......）。出了什么问题，我该如何解决问题？[我在这里](https://groups.google.com/forum/?fromgroups#!topic/google-appengine-python/0SNCNqN8H2s%5B1-25%5D)发现了类似的投诉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:12:52.490

Python 和 numpy 之间存在 32 位与 64 位的不匹配。如果您使用的是 32 位版本的 Python，则必须使用任何预编译 DLL 的 32 位版本。64 位版本的 Python 需要包含预编译 DLL 的 64 位版本的库。

纯 Python 库不受影响，但任何包含已编译代码的库必须匹配必须匹配 Python 本身。

# ios - 用另一个动态 UIImage 遮罩 UIImage

> ID：11979738
> 
> 赞同：2
> 
> 时间：2012-08-16T02:02:11.067
> 
> 标签：ios, ios5, uiimage, uigesturerecognizer, mask

我已经被困在必须非常简单的事情上好几天了，我已经搜索了几天，但我似乎无法获得正确的代码来工作。

我有两个图像，一个背景图像和另一个将掩盖第一个图像的图像。我可以用手势移动蒙版图像。我可以缩放、旋转和移动它。

[http://i45.tinypic.com/dyq2k8.png](http://i45.tinypic.com/dyq2k8.png)

当我按下测试按钮时，我希望她的脸从蒙版图像的当前位置被裁剪/蒙版到另一个 UIImage 中。

关于我应该做什么的任何想法？

帮助会非常非常好:) 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:56:25.250

:P

好笑。不久前我写了一个演示应用程序，它可以完成你想要的一切，捏缩放，平移照片。

您必须提供自己的图像，因为我只复制了源代码，但这里是：

```
// ------------------------------------------------
// view controller header file
// ------------------------------------------------
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIGestureRecognizerDelegate>
{
    UIButton *btnEdit;
    BOOL isEditing;
    UIImageView *displayImage;
    UIImageView *photoView;
    UIImageView *maskView;
}

@end

// ------------------------------------------------    
// view controller implementation file
// ------------------------------------------------

#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    isEditing = false;

    photoView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    [photoView setImage:[UIImage imageNamed:@"photo.png"]];
    photoView.hidden = YES;

    maskView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    [maskView setImage:[UIImage imageNamed:@"maskguide.png"]];
    maskView.hidden = YES;

    displayImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];

    UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handlePinch:)];

    [panGesture setDelegate:self];
    [pinchGesture setDelegate:self];

    [photoView addGestureRecognizer:panGesture];
    [photoView addGestureRecognizer:pinchGesture];
    [photoView setUserInteractionEnabled:YES];

    [panGesture release];
    [pinchGesture release];

    btnEdit = [[UIButton alloc] initWithFrame:CGRectMake(60, 400, 200, 50)];
    [btnEdit setBackgroundColor:[UIColor blackColor]];
    [btnEdit setTitle:@"Start Editing" forState:UIControlStateNormal];
    [btnEdit addTarget:self action:@selector(toggleEditing) forControlEvents:UIControlEventTouchUpInside];

    [[self view] addSubview:displayImage];
    [[self view] addSubview:photoView];
    [[self view] addSubview:maskView];
    [[self view] addSubview:btnEdit];

    [self updateMaskedImage];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(void)dealloc
{
    [btnEdit release];

    [super dealloc];
}

#pragma mark -
#pragma mark Update Masked Image Method
#pragma mark -

-(void)updateMaskedImage
{
    maskView.hidden = YES;

    UIImage *finalImage = 
    [self maskImage:[self captureView:self.view]
           withMask:[UIImage imageNamed:@"mask.png"]];

    maskView.hidden = NO;

    //UIImage *finalImage = [self maskImage:photoView.image withMask:[UIImage imageNamed:@"mask.png"]];

    [displayImage setImage:finalImage];
}

- (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage {

    CGImageRef maskRef = maskImage.CGImage; 

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                        CGImageGetHeight(maskRef),
                                        CGImageGetBitsPerComponent(maskRef),
                                        CGImageGetBitsPerPixel(maskRef),
                                        CGImageGetBytesPerRow(maskRef),
                                        CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);
    return [UIImage imageWithCGImage:masked];

}

#pragma mark -
#pragma mark Touches Began
#pragma mark -

// adjusts the editing flag to make dragging and drop work
-(void)toggleEditing
{
    if(!isEditing)
    {
        isEditing = true;

        NSLog(@"editing...");

        [btnEdit setTitle:@"Stop Editing" forState:UIControlStateNormal];

        displayImage.hidden = YES;
        photoView.hidden = NO;
        maskView.hidden = NO;
    }
    else
    {
        isEditing = false;

        [self updateMaskedImage];

        NSLog(@"stopped editting");

        [btnEdit setTitle:@"Start Editing" forState:UIControlStateNormal];

        displayImage.hidden = NO;
        photoView.hidden = YES;
        maskView.hidden = YES;
    }
}

/*
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{   
    if(isEditing)
    {
        UITouch *finger = [touches anyObject];
        CGPoint currentPosition = [finger locationInView:self.view];

        //[maskView setCenter:currentPosition];
        //[photoView setCenter:currentPosition];
        if([touches count] == 1)
        {
            [photoView setCenter:currentPosition];
        }
        else if([touches count] == 2)
        {

        }
    }
}
*/

-(void)handlePan:(UIPanGestureRecognizer *)recognizer
{    
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
}

-(void)handlePinch:(UIPinchGestureRecognizer *)recognizer
{    
    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;
}

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
}

#pragma mark -
#pragma mark Capture Screen Function
#pragma mark -

- (UIImage*)captureView:(UIView *)yourView 
{
    UIGraphicsBeginImageContextWithOptions(yourView.bounds.size, yourView.opaque, 0.0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [yourView.layer renderInContext:context];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
}

#pragma mark -

@end 
```

# javascript - 使用backbone.js将表单对象保存到模型

> ID：11979740
> 
> 赞同：0
> 
> 时间：2012-08-16T02:02:18.707
> 
> 标签：javascript, backbone.js

我无法让表单对象发布，这是我到目前为止使用测试数据得到的结果，我得到的 setTarget.save 是未定义的。我能够使用类似的结构成功获取 fetch/get 调用。

**风景**

```
define([
'jquery',
'underscore',
'backbone',
'text!templates/default/parent.html'
], function($, _, Backbone, parentTemplate) {
var defaultView = Backbone.View.extend({

    initialize: function() {
      $(this.el).html(parentTemplate);
                this.render();
    },

            events: {
                'click #busNext': 'showTarget'
            },

            showTarget: function() {
      this.model.set({
        businessName: $('#busInfoName').val(),
      });
                this.model.save();
    },

            render: function() {
                this.setValidator();
      return this;
    }

});
return new defaultView;
}); 
```

**该模型**

```
define([
  'underscore',
  'backbone'
], function(_, Backbone) {
  var setTarget = Backbone.Model.extend({

    initialize: function() {
        console.log('set target initialize');
    },

    url: 'test.htm',

    defaults: {
        businessName: "",
        businessPhone: ""
    }

    });

  return setTarget;
}); 
```

**收藏品**

```
define([
  'jquery',
  'underscore',
  'backbone',
'models/setTarget'
], function($, _, Backbone, setTarget){
  var target = Backbone.Collection.extend({

    model: setTarget,

  });

  return new target;
}); 
```

**路由器**

```
define([
  'jquery',
  'underscore',
  'backbone',
'validate',
'views/default/parent',
'models/setTarget',
'collections/target'
], function($, _, Backbone, validate, defaultView, setTarget, target) {
var AppRouter = Backbone.Router.extend({

    routes: {
                    '': 'defaultAction',
                    'index': 'defaultAction',
    },

    defaultAction: function(actions) {
      this.changePage(defaultView, 'fade');
    },

    changePage: function(page, pageTransition) {
        $('body').append($(page.el));
        $.mobile.changePage($(page.el), { changeHash: true, transition: pageTransition     });
        }

    });

    var initialize = function() {
        var app_router = new AppRouter;
        Backbone.history.start();
    };

    return {
        initialize: initialize
    };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:20:29.993

感谢您的评论，在阅读它们后，我决定以不同的方式解决这个问题。我没有使用 model.save，而是使用了 collectioninstancename.fetch 方法，并在集合中覆盖了设置，以便它可以 POST 而不是 GET，它似乎工作正常。

# apache-zookeeper - 使用 Supervisord 监督 ZooKeeper

> ID：11979741
> 
> 赞同：11
> 
> 时间：2012-08-16T02:02:22.347
> 
> 标签：apache-zookeeper, supervisord

正如 ZooKeeper 的文档中所说，有必要使用 daemontools 之类的工具对其进行监督。但是文档没有提供任何示例，我知道启动 ZooKeeper 的唯一方法是运行 bin/zkServer.sh start。我打算使用 supervisord 来完成这项工作，但是如何编写 [program:zookeeper] 部分超出了我的范围。任何例子都会很棒。谢谢。

到目前为止，有两种解决方案：

1.  使用来自 github 的最新代码，它提供 stopasgroup 和 killasgroup 选项。
2.  执行 bin/zkServer.sh print-cmd，并将输出复制到 supervisord 的 'command' 选项，删除管道参数，并添加 stdout_logfile、stderr_logfile。如下所示：

```
    [程序：动物园管理员]
    命令 = /usr/lib/jvm/java-1.7.0-openjdk.x86_64/bin/java -Dzookeeper.log.dir="." -Dzookeeper.root.logger="INFO,CONSOLE" -cp "/home/jizhang/Applications/zookeeper/bin/../build/classes:/home/jizhang/Applications/zookeeper/bin/../build/lib /*.jar:/home/jizhang/Applications/zookeeper/bin/../lib/slf4j-log4j12-1.6.1.jar:/home/jizhang/Applications/zookeeper/bin/../lib/slf4j-api -1.6.1.jar:/home/jizhang/Applications/zookeeper/bin/../lib/netty-3.2.2.Final.jar:/home/jizhang/Applications/zookeeper/bin/../lib/log4j -1.2.15.jar:/home/jizhang/Applications/zookeeper/bin/../lib/jline-0.9.94.jar:/home/jizhang/Applications/zookeeper/bin/../zookeeper-3.4.3 .jar:/home/jizhang/Applications/zookeeper/bin/../src/java/lib/*.jar:/home/jizhang/Applications/zookeeper/bin/../conf:”-Dcom.sun.management .jmxremote -Dcom.sun.management。
    stdout_logfile = /home/jizhang/Applications/zookeeper/zookeeper.out
    stderr_logfile = /home/jizhang/Applications/zookeeper/zookeeper.err
    自动重启 = 真

```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T05:07:26.567

[这里](https://stackoverflow.com/questions/9090683/supervisord-stopping-child-processes)有一个类似的问题

```
[program:zookeeper]
command=zkServer.sh start-foreground
autorestart=true
stopsignal=KILL 
```

该问题提到了终止进程的问题，我不确定是否有解决方案。

# c# - 如何使用ffmpeg为所有视频文件生成缩略图？

> ID：11979743
> 
> 赞同：3
> 
> 时间：2012-08-16T02:02:27.243
> 
> 标签：c#, asp.net, ffmpeg, getfiles

我使用 ffmpeg 成功为视频文件生成了一个缩略图，现在我想为目录中的每个视频创建一个缩略图。如何使用 ffmpeg 读取目录中的所有视频文件并为每个视频生成缩略图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:19:34.040

**DirectoryIntoThumbNails(@"C:\VideoFolder", "*.mpg")**

```
void DirectoryIntoThumbNails(string sDir, string extension) 
{
    try 
    {
       foreach (string d in Directory.GetDirectories(sDir)) 
       {
        foreach (string f in Directory.GetFiles(d, extension)) 
        {
           SystemDiagnostics.Process.Start(@"C:\Ffmpeg.exe " + f + commandYouUsedSuccessfullyOnOneFile)
        }
        //Uncomment this if you want it to be recursive - all sub folders
        //DirSearch(d, extension);
       }
    }
    catch (System.Exception excpt) 
    {
        Console.WriteLine(excpt.Message);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:09:01.233

尝试这个

```
using System.IO;

string[] filePaths = Directory.GetFiles(@"c:\MyDir\"); 
```

浏览此链接以[获取从目录中获取文件](http://www.csharp-examples.net/get-files-from-directory/)

现在操作数组`filePaths`并为视频生成缩略图。.

# jquery - 如何使用 jquery 检索 li 元素的文本

> ID：11979746
> 
> 赞同：-8
> 
> 时间：2012-08-16T02:02:53.437
> 
> 标签：jquery, html

我想使用 jquery 检索 li 元素的文本（例如事件）并显示它。我怎样才能做到这一点？我的 HTML 如下所示：

```
<ul>
<li class="t-item t-state-active">
<a class="t-link" href="#TabStrip-5">Happening</a>
</li>
<li class="t-item t-state-active">
<a class="t-link" href="#TabStrip-5">Birthday</a>
</li>
<li class="t-item t-state-active">
<a class="t-link" href="#TabStrip-5">Events</a>
</li>
</ul> 
```

请看下面的实现

```
function Gettext() {
    var tabstrip = $("#TabStrip").data("tTabStrip");
    $("li", tabstrip.element).each(function () {
        var item = $(this)[0];
         if (item.textContent == 'Events'
           return tabstrip.select(item);
    }); 
```

但我想优化代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:49:27.670

我不确定我是否理解这个问题，但你为什么不使用属性选择器呢？

```
$('a[href*="#TabStrip"])… 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:09:10.140

使用元素的类（例如`$('.classname')`）或Id（例如`$('#id')`），然后调用`text()`函数

```
$('.classname').text();
$('#id').text(); 
```

对于事件，您可以执行以下操作：

```
$('.t-link:last-child').text(); 
```

但我建议为这样的单例添加一个 Id：

```
<a class="t-link" href="#TabStrip-5" id="events-link">Events</a> 
```

然后...

```
$('#events-link').text(); 
```

**编辑**

对于动态位置，如果您尝试获取单个单元格，您肯定希望为每个单元格分配 ID。

也许类似于（没有特定的服务器端语言）

```
$name = "Events";

print '<a class="t-link" href="#TabStrip-5" id="' .  strtolower($name) . '-link">' . $name . '</a> 
```

# python - 在 Mac 上安装 Pyramid 和 Distribute

> ID：11979748
> 
> 赞同：3
> 
> 时间：2012-08-16T02:02:58.680
> 
> 标签：python, macos, installation, pyramid, distribute

```
Last login: Wed Aug 15 18:31:40 on console
unknown68a86d4e0c2c:~ pessimisticoptimism$ curl -O http://python-distribute.org/distribute_setup.py
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 16295  100 16295    0     0   3389      0  0:00:04  0:00:04 --:--:--  5813
unknown68a86d4e0c2c:~ pessimisticoptimism$ python distribute_setup.py
Downloading #
Extracting in /var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpqkrkH0
Now working in /var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpqkrkH0/distribute-0.6.28
Installing Distribute
Before install bootstrap.
Scanning installed packages
Setuptools installation detected at /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python
Non-egg installation
Removing elements out of the way...
Renaming /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/setuptools-0.6c12dev_r85381-py2.7.egg-info into /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/setuptools-0.6c12dev_r85381-py2.7.egg-info.OLD.1345081179.88
Traceback (most recent call last):
  File "setup.py", line 131, in <module>
    _before_install()
  File "/private/var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpqkrkH0/distribute-0.6.28/distribute_setup.py", line 363, in _before_install
    _fake_setuptools()
  File "/private/var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpqkrkH0/distribute-0.6.28/distribute_setup.py", line 420, in _fake_setuptools
    res = _remove_flat_installation(setuptools_location)
  File "/private/var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpqkrkH0/distribute-0.6.28/distribute_setup.py", line 224, in __no_sandbox
    return function(*args, **kw)
  File "/private/var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpqkrkH0/distribute-0.6.28/distribute_setup.py", line 279, in _remove_flat_installation
    patched = _patch_egg_dir(pkg_info)
  File "/private/var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpqkrkH0/distribute-0.6.28/distribute_setup.py", line 224, in __no_sandbox
    return function(*args, **kw)
  File "/private/var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpqkrkH0/distribute-0.6.28/distribute_setup.py", line 347, in _patch_egg_dir
    _rename_path(path)
  File "/private/var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpqkrkH0/distribute-0.6.28/distribute_setup.py", line 259, in _rename_path
    os.rename(path, new_name)
OSError: [Errno 13] Permission denied
Something went wrong during the installation.
See the error message above.
unknown68a86d4e0c2c:~ pessimisticoptimism$ python3 distribute_setup.py
Extracting in /var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpdpzzpn
Now working in /var/folders/nf/kkw6hklx1zd2kpcmq5xvrxqw0000gn/T/tmpdpzzpn/distribute-0.6.28
Installing Distribute
creating build
creating build/src
creating build/src/docs
creating build/src/docs/_templates
creating build/src/docs/_theme
creating build/src/docs/_theme/nature
creating build/src/docs/_theme/nature/static
creating build/src/docs/build
creating build/src/docs/build/html
creating build/src/docs/build/html/_sources
creating build/src/docs/build/html/_static
creating build/src/setuptools
creating build/src/setuptools/command
creating build/src/setuptools/tests
creating build/src/setuptools/tests/indexes
creating build/src/setuptools/tests/indexes/test_links_priority
creating build/src/setuptools/tests/indexes/test_links_priority/simple
creating build/src/setuptools/tests/indexes/test_links_priority/simple/foobar
creating build/src/tests
creating build/src/tests/python3.3_bdist_egg_test
creating build/src/tests/shlib_test
copying setuptools/__init__.py -> build/src/setuptools
copying setuptools/archive_util.py -> build/src/setuptools
copying setuptools/depends.py -> build/src/setuptools
copying setuptools/dist.py -> build/src/setuptools
copying setuptools/extension.py -> build/src/setuptools
copying setuptools/package_index.py -> build/src/setuptools
copying setuptools/sandbox.py -> build/src/setuptools
copying setuptools/script template (dev).py -> build/src/setuptools
copying setuptools/script template.py -> build/src/setuptools
copying setuptools/tests/__init__.py -> build/src/setuptools/tests
copying setuptools/tests/doctest.py -> build/src/setuptools/tests
copying setuptools/tests/py26compat.py -> build/src/setuptools/tests
copying setuptools/tests/server.py -> build/src/setuptools/tests
copying setuptools/tests/test_bdist_egg.py -> build/src/setuptools/tests
copying setuptools/tests/test_build_ext.py -> build/src/setuptools/tests
copying setuptools/tests/test_develop.py -> build/src/setuptools/tests
copying setuptools/tests/test_dist_info.py -> build/src/setuptools/tests
copying setuptools/tests/test_easy_install.py -> build/src/setuptools/tests
copying setuptools/tests/test_packageindex.py -> build/src/setuptools/tests
copying setuptools/tests/test_resources.py -> build/src/setuptools/tests
copying setuptools/tests/test_sandbox.py -> build/src/setuptools/tests
copying setuptools/tests/test_upload_docs.py -> build/src/setuptools/tests
copying setuptools/command/__init__.py -> build/src/setuptools/command
copying setuptools/command/alias.py -> build/src/setuptools/command
copying setuptools/command/bdist_egg.py -> build/src/setuptools/command
copying setuptools/command/bdist_rpm.py -> build/src/setuptools/command
copying setuptools/command/bdist_wininst.py -> build/src/setuptools/command
copying setuptools/command/build_ext.py -> build/src/setuptools/command
copying setuptools/command/build_py.py -> build/src/setuptools/command
copying setuptools/command/develop.py -> build/src/setuptools/command
copying setuptools/command/easy_install.py -> build/src/setuptools/command
copying setuptools/command/egg_info.py -> build/src/setuptools/command
copying setuptools/command/install.py -> build/src/setuptools/command
copying setuptools/command/install_egg_info.py -> build/src/setuptools/command
copying setuptools/command/install_lib.py -> build/src/setuptools/command
copying setuptools/command/install_scripts.py -> build/src/setuptools/command
copying setuptools/command/register.py -> build/src/setuptools/command
copying setuptools/command/rotate.py -> build/src/setuptools/command
copying setuptools/command/saveopts.py -> build/src/setuptools/command
copying setuptools/command/sdist.py -> build/src/setuptools/command
copying setuptools/command/setopt.py -> build/src/setuptools/command
copying setuptools/command/test.py -> build/src/setuptools/command
copying setuptools/command/upload.py -> build/src/setuptools/command
copying setuptools/command/upload_docs.py -> build/src/setuptools/command
copying setuptools/tests/win_script_wrapper.txt -> build/src/setuptools/tests
copying setuptools/cli-32.exe -> build/src/setuptools
copying setuptools/cli-64.exe -> build/src/setuptools
copying setuptools/cli.exe -> build/src/setuptools
copying setuptools/gui-32.exe -> build/src/setuptools
copying setuptools/gui-64.exe -> build/src/setuptools
copying setuptools/gui.exe -> build/src/setuptools
copying tests/install_test.py -> build/src/tests
copying tests/manual_test.py -> build/src/tests
copying tests/test_distribute_setup.py -> build/src/tests
copying tests/test_python33_bdist_egg.py -> build/src/tests
copying tests/shlib_test/setup.py -> build/src/tests/shlib_test
copying tests/shlib_test/test_hello.py -> build/src/tests/shlib_test
copying tests/python3.3_bdist_egg_test/module.py -> build/src/tests/python3.3_bdist_egg_test
copying tests/python3.3_bdist_egg_test/setup.py -> build/src/tests/python3.3_bdist_egg_test
copying tests/shlib_test/hello.c -> build/src/tests/shlib_test
copying tests/shlib_test/hellolib.c -> build/src/tests/shlib_test
copying tests/shlib_test/hello.pyx -> build/src/tests/shlib_test
copying tests/api_tests.txt -> build/src/tests
RefactoringTool: Skipping implicit fixer: buffer
RefactoringTool: Skipping implicit fixer: idioms
RefactoringTool: Skipping implicit fixer: set_literal
RefactoringTool: Skipping implicit fixer: ws_comma
RefactoringTool: Refactored build/src/tests/api_tests.txt
--- build/src/tests/api_tests.txt   (original)
+++ build/src/tests/api_tests.txt   (refactored)
@@ -39,7 +39,7 @@
     >>> dist.py_version == sys.version[:3]
     True

-    >>> print dist.platform
+    >>> print(dist.platform)
     None

 Including various computed attributes::
@@ -199,7 +199,7 @@
 You can ask a WorkingSet to ``find()`` a distribution matching a requirement::

     >>> from pkg_resources import Requirement
-    >>> print ws.find(Requirement.parse("Foo==1.0"))    # no match, return None
+    >>> print(ws.find(Requirement.parse("Foo==1.0")))    # no match, return None
     None

     >>> ws.find(Requirement.parse("Bar==0.9"))  # match, return distribution
@@ -211,7 +211,7 @@
     >>> try:
     ...     ws.find(Requirement.parse("Bar==1.0"))
     ... except VersionConflict:
-    ...     print 'ok'
+    ...     print('ok')
     ok

 You can subscribe a callback function to receive notifications whenever a new
@@ -219,7 +219,7 @@
 once for each existing distribution in the working set, and then is called
 again for new distributions added thereafter::

-    >>> def added(dist): print "Added", dist
+    >>> def added(dist): print("Added", dist)
     >>> ws.subscribe(added)
     Added Bar 0.9
     >>> foo12 = Distribution(project_name="Foo", version="1.2", location="f12") 
RefactoringTool: Files that were modified:
RefactoringTool: build/src/tests/api_tests.txt
copying setuptools/tests/indexes/test_links_priority/external.html -> build/src/setuptools/tests/indexes/test_links_priority
copying setuptools/tests/indexes/test_links_priority/simple/foobar/index.html -> build/src/setuptools/tests/indexes/test_links_priority/simple/foobar
copying docs/conf.py -> build/src/docs
copying docs/easy_install.txt -> build/src/docs
copying docs/index.txt -> build/src/docs
copying docs/pkg_resources.txt -> build/src/docs
copying docs/python3.txt -> build/src/docs
copying docs/roadmap.txt -> build/src/docs
copying docs/setuptools.txt -> build/src/docs
copying docs/using.txt -> build/src/docs
copying docs/build/html/_sources/easy_install.txt -> build/src/docs/build/html/_sources
copying docs/build/html/_sources/index.txt -> build/src/docs/build/html/_sources
copying docs/build/html/_sources/pkg_resources.txt -> build/src/docs/build/html/_sources
copying docs/build/html/_sources/python3.txt -> build/src/docs/build/html/_sources
copying docs/build/html/_sources/roadmap.txt -> build/src/docs/build/html/_sources
copying docs/build/html/_sources/setuptools.txt -> build/src/docs/build/html/_sources
copying docs/build/html/_sources/using.txt -> build/src/docs/build/html/_sources
copying docs/_theme/nature/theme.conf -> build/src/docs/_theme/nature
copying docs/build/html/_static/basic.css -> build/src/docs/build/html/_static
copying docs/build/html/_static/nature.css -> build/src/docs/build/html/_static
copying docs/build/html/_static/pygments.css -> build/src/docs/build/html/_static
copying docs/_theme/nature/static/pygments.css -> build/src/docs/_theme/nature/static
copying docs/_theme/nature/static/nature.css_t -> build/src/docs/_theme/nature/static
copying docs/Makefile -> build/src/docs
copying docs/_templates/indexsidebar.html -> build/src/docs/_templates
copying distribute_setup.py -> build/src
copying easy_install.py -> build/src
copying pkg_resources.py -> build/src
copying release.py -> build/src
copying setup.py -> build/src
copying site.py -> build/src
copying CHANGES.txt -> build/src
copying CONTRIBUTORS.txt -> build/src
copying DEVGUIDE.txt -> build/src
copying README.txt -> build/src
copying MANIFEST.in -> build/src
copying launcher.c -> build/src
Skipping implicit fixer: buffer
Skipping implicit fixer: idioms
Skipping implicit fixer: set_literal
Skipping implicit fixer: ws_comma
Before install bootstrap.
Scanning installed packages
Setuptools installation detected at /Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages
Non-egg installation
Removing elements out of the way...
Already patched.
/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/setuptools-0.6c11-py3.2.egg-info already patched.
running install
running bdist_egg
running egg_info
writing distribute.egg-info/PKG-INFO
writing top-level names to distribute.egg-info/top_level.txt
writing dependency_links to distribute.egg-info/dependency_links.txt
writing entry points to distribute.egg-info/entry_points.txt
reading manifest file 'distribute.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
writing manifest file 'distribute.egg-info/SOURCES.txt'
installing library code to build/bdist.macosx-10.6-intel/egg
running install_lib
running build_py
creating build/lib
copying build/src/pkg_resources.py -> build/lib
copying build/src/easy_install.py -> build/lib
copying build/src/site.py -> build/lib
creating build/lib/setuptools
#
copying build/lib/site.py -> build/bdist.macosx-10.6-intel/egg
byte-compiling build/bdist.macosx-10.6-intel/egg/easy_install.py to easy_install.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/pkg_resources.py to pkg_resources.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/__init__.py to __init__.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/archive_util.py to archive_util.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/__init__.py to __init__.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/alias.py to alias.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/bdist_egg.py to bdist_egg.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/bdist_rpm.py to bdist_rpm.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/bdist_wininst.py to bdist_wininst.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/build_ext.py to build_ext.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/build_py.py to build_py.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/develop.py to develop.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/easy_install.py to easy_install.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/egg_info.py to egg_info.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/install.py to install.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/install_egg_info.py to install_egg_info.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/install_lib.py to install_lib.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/install_scripts.py to install_scripts.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/register.py to register.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/rotate.py to rotate.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/saveopts.py to saveopts.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/sdist.py to sdist.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/setopt.py to setopt.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/test.py to test.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/upload.py to upload.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/command/upload_docs.py to upload_docs.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/depends.py to depends.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/dist.py to dist.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/extension.py to extension.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/package_index.py to package_index.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/sandbox.py to sandbox.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/script template (dev).py to script template (dev).cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/script template.py to script template.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/__init__.py to __init__.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/doctest.py to doctest.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/py26compat.py to py26compat.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/server.py to server.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/test_bdist_egg.py to test_bdist_egg.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/test_build_ext.py to test_build_ext.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/test_develop.py to test_develop.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/test_dist_info.py to test_dist_info.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/test_easy_install.py to test_easy_install.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/test_packageindex.py to test_packageindex.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/test_resources.py to test_resources.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/test_sandbox.py to test_sandbox.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/setuptools/tests/test_upload_docs.py to test_upload_docs.cpython-32.pyc
byte-compiling build/bdist.macosx-10.6-intel/egg/site.py to site.cpython-32.pyc
creating build/bdist.macosx-10.6-intel/egg/EGG-INFO
copying distribute.egg-info/PKG-INFO -> build/bdist.macosx-10.6-intel/egg/EGG-INFO
copying distribute.egg-info/SOURCES.txt -> build/bdist.macosx-10.6-intel/egg/EGG-INFO
copying distribute.egg-info/dependency_links.txt -> build/bdist.macosx-10.6-intel/egg/EGG-INFO
copying distribute.egg-info/entry_points.txt -> build/bdist.macosx-10.6-intel/egg/EGG-INFO
copying distribute.egg-info/top_level.txt -> build/bdist.macosx-10.6-intel/egg/EGG-INFO
copying distribute.egg-info/zip-safe -> build/bdist.macosx-10.6-intel/egg/EGG-INFO
creating dist
creating 'dist/distribute-0.6.28-py3.2.egg' and adding 'build/bdist.macosx-10.6-intel/egg' to it
removing 'build/bdist.macosx-10.6-intel/egg' (and everything under it)
Processing distribute-0.6.28-py3.2.egg
creating /Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/distribute-0.6.28-py3.2.egg
Extracting distribute-0.6.28-py3.2.egg to /Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages
Removing distribute 0.6.27 from easy-install.pth file
Adding distribute 0.6.28 to easy-install.pth file
Installing easy_install script to /Library/Frameworks/Python.framework/Versions/3.2/bin
Installing easy_install-3.2 script to /Library/Frameworks/Python.framework/Versions/3.2/bin

Installed /Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/distribute-0.6.28-py3.2.egg
Processing dependencies for distribute==0.6.28
Finished processing dependencies for distribute==0.6.28
After install bootstrap.
/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/setuptools-0.6c11-py3.2.egg-info already exists 
```

* * *

```
unknown68a86d4e0c2c:~ pessimisticoptimism$ easy_install pip
error: can't create or remove files in install directory

The following error occurred while trying to add or remove files in the
installation directory:

    [Errno 13] Permission denied: '/Library/Python/2.7/site-packages/test-easy-install-414.write-test'

The installation directory you specified (via --install-dir, --prefix, or
the distutils default setting) was:

    /Library/Python/2.7/site-packages/

Perhaps your account does not have write access to this directory?  If the
installation directory is a system-owned directory, you may need to sign in
as the administrator or "root" account.  If you do not have administrative
access to this machine, you may wish to choose a different installation
directory, preferably one that is listed in your PYTHONPATH environment
variable.

For information on other options, you may wish to consult the
documentation at:

  #

Please make the appropriate changes for your system and try again. 
```

* * *

```
unknown68a86d4e0c2c:~ pessimisticoptimism$ pip install distribute
-bash: pip: command not found
unknown68a86d4e0c2c:~ pessimisticoptimism$ pip -U pyramid
-bash: pip: command not found
unknown68a86d4e0c2c:~ pessimisticoptimism$ 
```

以上是我在 Mac OS X Lion 上安装 Distribute 和 Pyramid 的尝试。它没有用，所以任何输入将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T16:35:05.460

一个月前，这对我来说是一个很大的谜团——我将把它全部列出来，请原谅我的冗长：

当使用`python setup.py`（或类似的）安装时，您将安装到您的系统范围（即您计算机上的所有用户都可以使用）安装。与安装应用程序类似，它需要（管理员）权限。pre-pending commands with`sudo`是您使用管理员权限从命令行安装的方式。

话虽如此 - 正如 D.Shawley（和许多其他人）所指出的那样，现在的普遍做法是使用 virtualenv。这允许与系统分离的 python 安装 - 您可以安装/更改各种东西而不会搞砸您的系统。

这是我在（干净安装的）**Mountain Lion**上使用 virtualenv 设置 Pyramid 的方法。
（首先需要安装[XCode Command Linen Tools](https://developer.apple.com/downloads/index.action#) - 需要开发者 ID）

```
george$ sudo easy_install pip
george$ sudo pip install virtualenv
george$ sudo pip install virtualenvwrapper 
```

使用 virtualenv 在您选择的目录中创建一个 virtualenv。下面，我创建了一个名为 Projects 的目录，将其更改为该目录，然后创建我的 virtualenv 并将其命名为 pyramid。

```
george$ mkdir ~/Projects
george$ cd ~/Projects
george$ virtualenv myVirtualenv        -- this just creates the environment.
george$ cd myVirtualenv                -- change into the directory
george$ ls                        -- list contents of the direcotry 
```

安装后 ls 的输出应显示 3 个文件夹：`bin`、`include`和`lib`. virtualenv 将必要的工具放在该`bin`目录的文件夹中，包括`pip`和`python`. 因此，在此文件夹中工作时，请始终参考这些目录中的版本。

**不正确：** `pip install pyramid`
**正确：** `bin/pip install pyramid`

运行`bin/pip install pyramid`将在您的 virtualenv 中安装金字塔。重新运行相同的命令，替换`pyramid`为您需要安装的任何其他命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:04:52.627

您可以运行它，`sudo pip install distribute`也可以先创建一个 virtualenv，激活它，然后运行这些命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T02:28:32.740

我建议将其安装到虚拟环境中。[`virtualenv`](http://www.virtualenv.org)首先使用*easy_install*安装。这实际上是您应该安装到全局环境中的唯一东西。你将不得不`sudo`安装它。

```
unknown68a86d4e0c2c:~ sudo easy_install virtualenv
Password:
.... lots of output here ....
Installing virtualenv script to /usr/local/bin
Installing virtualenv-2.7 script to /usr/local/bin

Using /Library/Python/2.7/site-packages/virtualenv-1.7.2-py2.7.egg
Processing dependencies for virtualenv
Finished processing dependencies for virtualenv
unknown68a86d4e0c2c:~ which virtualenv
/usr/local/bin/virtualenv
unknown68a86d4e0c2c:~ virtualenv --no-site-packages pyramid
The --no-site-packages flag is deprecated; it is now the default behavior.
New python executable in pyramid/bin/python
Installing setuptools............done
unknown68a86d4e0c2c:~ cd pyramid
unknown68a86d4e0c2c:pyramid source bin/activate
(pyramid)unknown68a86d4e0c2c:pyramid which pip
/Users/unknown68a86d4e0c2c/pyramid/bin/pip
(pyramid)unknown68a86d4e0c2c:pyramid pip install pyramid
Downloading/unpacking pyramid
  Downloading pyramid-1.3.3.tar.gz (2.4Mb): 2.4Mb downloaded
  Running setup.py egg_info for package pyramid
.... lots of output ....
Successfully installed pyramid Chameleon Mako WebOb repoze.lru zope.interface 
zope.deprecation venusian translationstring PasteDeploy MarkupSafe
Cleaning up...
(pyramid)unknown68a86d4e0c2c:pyramid which pserve
/Users/unknown68a86d4e0c2c/pyramid/bin/pserve 
```

一旦你习惯了和你一起开发，`virtualenv`你将永远不会完全理解没有它你做了什么。Pyramid 教程是我第一次体验`virtualenv`-[教程的设置部分简要介绍了它](http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/humans/setup.html)。

# ios - 如果方法“[aClass respondsToSelector:@selector(fun)]”的 fun 有三个参数

> ID：11979753
> 
> 赞同：11
> 
> 时间：2012-08-16T02:04:04.813
> 
> 标签：ios

有人可以告诉我

我使用这种方法“[aClass respondsToSelector:@selector(fun)]”来查找任何课程中是否有乐趣

但是当乐趣有三个参数时，我该如何处理呢？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-16T02:13:02.210

在选择器中，每个冒号 (:) 都是一个参数。对于方法`- (id)funWithA:(id)a B:(id)b C:(id)c`

```
[aClass respondsToSelector:@selector(funWithA:B:C:)]; 
```

如果参数之间没有文字`- (id)fun:(id)a :(id)b :(id)c`

```
[aClass respondsToSelector:@selector(fun:::)]; 
```

# java - 单击 JMenuItem 时如何获取 JMenu 的名称

> ID：11979763
> 
> 赞同：1
> 
> 时间：2012-08-16T02:04:53.093
> 
> 标签：java, exception, jmenu, jmenuitem

如何获得持有点击的 JMenuItem 的 JMenu 的名称？我试过这样做：

```
public void actionPerformed(ActionEvent arg0) {
    JMenu menuthing = (JMenu)(arg0.getSource());
    String menuString =  menuthing.getText();
    JMenuItem source = (JMenuItem)(arg0.getSource());
    String colorType = source.getText(); 
```

但它给了我这个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: javax.swing.JMenuItem cannot be cast to javax.swing.JMenu 
```

那么有没有办法转换为 JMenu，或者其他方式来确定名称？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:14:28.250

我建议您添加一个`MenuListener`并将`JMenu`您的代码添加到`public void menuSelected(javax.swing.event.MenuEvent evt)`.

由于这是 a `MenuEvent`，该`getSource()`方法将返回`JMenu`对象

如果您想从您的 中获取它，请`ActionEvent`尝试以下操作：

```
JPopupMenu menu = (JPopupMenu) ((JMenuItem) evt.getSource()).getParent();
JMenu actMenu = menu.getInvoker(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:32:21.667

无需转换为 JMenu，只需转换为 JMenuItem。然后从中获取 JMenu。

```
JMenuItem jmi = (JMenuItem) arg0.getSource();
JPopupMenu jpm = (JPopupMenu) jmi.getParent();
JMenu menu = (JMenu) jpm.getInvoker(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T03:30:44.937

假设 JMenuItems 是 JMenu 的子项，您仍然可以使用 ActionEvent 执行此操作：

```
JPopupMenupopup = new JPopupMenu();
popup.setName("popup"); 
```

……

```
@Override
public void actionPerformed(ActionEvent e) {
    JMenuItem source = (JMenuItem)(e.getSource());
    try{
        JMenuItem menuItem = (JMenuItem) e.getSource(); 
        JPopupMenu popupMenu = (JPopupMenu) menuItem.getParent(); 
        Component invoker = popupMenu.getInvoker();      
        JPopupMenu popup = (JPopupMenu) invoker.getParent();
        System.out.println("NAME OF JMENU: "+popup.getName());

        //If you need the selection of cell(s)
        JTable table = (JTable)popup.getInvoker();
        int row = table.getSelectedRow();
        int col = table.getSelectedColumn();
        System.out.println("Selected cell: "+row+"-"+col);
    }catch(Exception ex){
        ex.printStackTrace();
    }
} 
```

# php - 从 xml 文件中检索主要记录/项目标签名称

> ID：11979769
> 
> 赞同：0
> 
> 时间：2012-08-16T02:06:30.627
> 
> 标签：php, xml, parsing, xmlreader, items

我是 xml 解析和 xpath 的新手。我需要制作一个可以找到记录标签名称的解析器。例如，如果给定这个 xml ：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<items>
<item>
  <name>first item</name>
  <description>first item description</description>
</item>
<item>
  <name>second item</name>
  <description>second item description</description>
</item>
</items> 
```

脚本应该能够确定**“item”**是我正在寻找的标签名称，而无需在代码中的某处指定它。对我来说，每个“item”元素都是一条记录；给定 xml 的示例响应将是“**找到 2 个项目**”。

这可以用 xpath 和 php 完成吗？

我正在为我的解析器使用 xmlreader。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:49:45.710

您可以使用此库将 xml 转换为 php 数组

```
function xml2array($contents, $get_attributes=1, $priority = 'tag') { 
    if(!$contents) return array(); 

    if(!function_exists('xml_parser_create')) { 
        //print "'xml_parser_create()' function not found!"; 
        return array(); 
    } 

    //Get the XML parser of PHP - PHP must have this module for the parser to work 
    $parser = xml_parser_create(''); 
    xml_parser_set_option($parser, XML_OPTION_TARGET_ENCODING, "UTF-8"); # http://minutillo.com/steve/weblog/2004/6/17/php-xml-and-character-encodings-a-tale-of-sadness-rage-and-data-loss 
    xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0); 
    xml_parser_set_option($parser, XML_OPTION_SKIP_WHITE, 1); 
    xml_parse_into_struct($parser, trim($contents), $xml_values); 
    xml_parser_free($parser); 

    if(!$xml_values) return;//Hmm... 

    //Initializations 
    $xml_array = array(); 
    $parents = array(); 
    $opened_tags = array(); 
    $arr = array(); 

    $current = &$xml_array; //Refference 

    //Go through the tags. 
    $repeated_tag_index = array();//Multiple tags with same name will be turned into an array 
    foreach($xml_values as $data) { 
        unset($attributes,$value);//Remove existing values, or there will be trouble 

        //This command will extract these variables into the foreach scope 
        // tag(string), type(string), level(int), attributes(array). 
        extract($data);//We could use the array by itself, but this cooler. 

        $result = array(); 
        $attributes_data = array(); 

        if(isset($value)) { 
            if($priority == 'tag') $result = $value; 
            else $result['value'] = $value; //Put the value in a assoc array if we are in the 'Attribute' mode 
        } 

        //Set the attributes too. 
        if(isset($attributes) and $get_attributes) { 
            foreach($attributes as $attr => $val) { 
                if($priority == 'tag') $attributes_data[$attr] = $val; 
                else $result['attr'][$attr] = $val; //Set all the attributes in a array called 'attr' 
            } 
        } 

        //See tag status and do the needed. 
        if($type == "open") {//The starting of the tag '<tag>' 
            $parent[$level-1] = &$current; 
            if(!is_array($current) or (!in_array($tag, array_keys($current)))) { //Insert New tag 
                $current[$tag] = $result; 
                if($attributes_data) $current[$tag. '_attr'] = $attributes_data; 
                $repeated_tag_index[$tag.'_'.$level] = 1; 

                $current = &$current[$tag]; 

            } else { //There was another element with the same tag name 

                if(isset($current[$tag][0])) {//If there is a 0th element it is already an array 
                    $current[$tag][$repeated_tag_index[$tag.'_'.$level]] = $result; 
                    $repeated_tag_index[$tag.'_'.$level]++; 
                } else {//This section will make the value an array if multiple tags with the same name appear together
                    $current[$tag] = array($current[$tag],$result);//This will combine the existing item and the new item together to make an array
                    $repeated_tag_index[$tag.'_'.$level] = 2; 

                    if(isset($current[$tag.'_attr'])) { //The attribute of the last(0th) tag must be moved as well 
                        $current[$tag]['0_attr'] = $current[$tag.'_attr']; 
                        unset($current[$tag.'_attr']); 
                    } 

                } 
                $last_item_index = $repeated_tag_index[$tag.'_'.$level]-1; 
                $current = &$current[$tag][$last_item_index]; 
            } 

        } elseif($type == "complete") { //Tags that ends in 1 line '<tag />' 
            //See if the key is already taken. 
            if(!isset($current[$tag])) { //New Key 
                $current[$tag] = $result; 
                $repeated_tag_index[$tag.'_'.$level] = 1; 
                if($priority == 'tag' and $attributes_data) $current[$tag. '_attr'] = $attributes_data; 

            } else { //If taken, put all things inside a list(array) 
                if(isset($current[$tag][0]) and is_array($current[$tag])) {//If it is already an array... 

                    // ...push the new element into that array. 
                    $current[$tag][$repeated_tag_index[$tag.'_'.$level]] = $result; 

                    if($priority == 'tag' and $get_attributes and $attributes_data) { 
                        $current[$tag][$repeated_tag_index[$tag.'_'.$level] . '_attr'] = $attributes_data; 
                    } 
                    $repeated_tag_index[$tag.'_'.$level]++; 

                } else { //If it is not an array... 
                    $current[$tag] = array($current[$tag],$result); //...Make it an array using using the existing value and the new value
                    $repeated_tag_index[$tag.'_'.$level] = 1; 
                    if($priority == 'tag' and $get_attributes) { 
                        if(isset($current[$tag.'_attr'])) { //The attribute of the last(0th) tag must be moved as well

                            $current[$tag]['0_attr'] = $current[$tag.'_attr']; 
                            unset($current[$tag.'_attr']); 
                        } 

                        if($attributes_data) { 
                            $current[$tag][$repeated_tag_index[$tag.'_'.$level] . '_attr'] = $attributes_data; 
                        } 
                    } 
                    $repeated_tag_index[$tag.'_'.$level]++; //0 and 1 index is already taken 
                } 
            } 

        } elseif($type == 'close') { //End of tag '</tag>' 
            $current = &$parent[$level-1]; 
        } 
    } 

    return($xml_array); 
} 
```

**$xml = xml2array('[xml 内容]');**

现在轻松使用 foreach :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:31:43.890

```
<?
  $dom = simplexml_load_file("lectures.xml");
  $items = 0;

  foreach ($dom->item as $item) {
    //what u want to do here
    $items += 1;
  }
?> 
```

我认为您不需要 xpath，最好在您想在大 xml 文件中查找特定元素时使用它。

```
xpath query: /child::items/child::item 
```

# html - 带有下拉菜单的 Twitter Bootstrap 内联输入

> ID：11979771
> 
> 赞同：56
> 
> 时间：2012-08-16T02:06:45.747
> 
> 标签：html, twitter-bootstrap, textinput

我正在尝试使用下拉按钮显示文本输入。我无法弄清楚如何做到这一点。这是我尝试过的 HTML（我将所有内容放在一行中，但没有任何结果）：

```
<div class="input-append">
  <input type="text" placeholder="foo" class="input-mini">
  <div class="btn-group">
    <a id="amount_type" class="btn dropdown-toggle" data-toggle="dropdown" href="#">10<span class="caret"></span></a>
    <ul id="amount_type_options" class="dropdown-menu">
      <li class="selected"><a href="#">10</a></li>
      <li><a href="#">100</a></li>
      <li><a href="#">1000</a></li>
    </ul>
  </div>
</div> 
```

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-16T02:11:23.640

## 当前状态：文档中的默认实现

目前这里的文档中有输入+下拉组合的默认实现[（](http://twitter.github.io/bootstrap/base-css.html#forms)搜索“按钮下拉菜单”）。我将原始解决方案留作记录，并留给那些无法使用文档中现在包含的解决方案的人。

## 原始解决方案

对的，这是可能的。事实上，在[Twitter Bootstrap 文档](http://twitter.github.com/bootstrap/base-css.html)中有一个示例（点击链接并搜索“*示例*”以获取下拉按钮）：

```
<div class="btn-group">
    <a class="btn btn-primary" href="#">
        <i class="icon-user icon-white"></i> User
    </a>
    <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
        <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li><a href="#"><i class="icon-pencil"></i> Edit</a></li>
        <li><a href="#"><i class="icon-trash"></i> Delete</a></li>
        <li><a href="#"><i class="icon-ban-circle"></i> Ban</a></li>
        <li class="divider"></li>
        <li><a href="#"><i class="i"></i> Make admin</a></li>
    </ul>
</div> 
```

如果包含在文本中，它可能看起来像这样（按钮上的文本已更改，没有其他内容）：

![文本中的 Twitter Bootstrap 下拉按钮](../Images/02c4d9b24f15c0a3a4472c62930845a0.png)

**编辑：**

如果您尝试`<input>`在下拉按钮中使用附加的下拉菜单来实现，那么这是解决方案之一：

1.  `btn-group`向具有类的元素添加一个类`input-append`，
2.  添加带有类的元素，`dropdown-toggle`并`dropdown-menu`在带有类的元素末尾添加`input-append`，
3.  覆盖元素匹配的样式，`.input-append .btn.dropdown-menu`使其没有`float: left`（否则它将进入下一行）。

生成的代码可能如下所示：

```
<div class="input-append btn-group">
    <input class="span2" id="appendedInputButton" size="16" type="text">
    <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
        <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li><a href="#"><i class="icon-pencil"></i> Edit</a></li>
        <li><a href="#"><i class="icon-trash"></i> Delete</a></li>
        <li><a href="#"><i class="icon-ban-circle"></i> Ban</a></li>
        <li class="divider"></li>
        <li><a href="#"><i class="i"></i> Make admin</a></li>
    </ul>
</div> 
```

在这种样式覆盖的一些支持下：

```
.input-append .btn.dropdown-toggle {
    float: none;
} 
```

并为您提供与此完全相同的结果：

![在此处输入图像描述](../Images/bca33f233e97d425eda078158974ff0c.png)

**编辑 2：**更新了 CSS 选择器（是`.dropdown-menu`、是`.dropdown-toggle`）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-02-16T15:32:57.547

从 Bootstrap 3.x 开始，这里的文档中有一个示例：http: [//getbootstrap.com/components/#input-groups-buttons-dropdowns](http://getbootstrap.com/components/#input-groups-buttons-dropdowns)

```
<div class="input-group">
  <input type="text" class="form-control" aria-label="...">
  <div class="input-group-btn">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Action <span class="caret"></span></button>
    <ul class="dropdown-menu dropdown-menu-right" role="menu">
      <li><a href="#">Action</a></li>
      <li><a href="#">Another action</a></li>
      <li><a href="#">Something else here</a></li>
      <li class="divider"></li>
      <li><a href="#">Separated link</a></li>
    </ul>
  </div><!-- /btn-group -->
</div><!-- /input-group --> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-10T18:36:04.510

搜索“datalist”标签。

```
<input list="texto_pronto" name="input_normal">
<datalist id="texto_pronto">
    <option value="texto A">
    <option value="texto B">
</datalist> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-10T10:25:13.780

这是带有输入搜索下拉菜单的 Bootstrap 代码。我搜索了很多然后我用引导程序在javascript和html中尝试它，

HTML 代码：

```
<div class="form-group">
    <label class="col-xs-3 control-label">Language</label>
    <div class="col-xs-7">
        <div class="dropdown">
          <button id="mydef" class="btn dropdown-toggle" type="button" data-toggle="dropdown" onclick="doOn(this);">
            <div class="col-xs-10">
                <input type="text" id="search" placeholder="search" onkeyup="doOn(this);"></input>
            </div>
            <span class="glyphicon glyphicon-search"></span>
         </button>
      <ul id="def" class="dropdown-menu" style="display:none;" >
            <li><a id="HTML" onclick="mydef(this);" >HTML</a></li>
            <li><a id="CSS" onclick="mydef(this);" >CSS</a></li>
            <li><a id="JavaScript" onclick="mydef(this);" >JavaScript</a></li>
      </ul>
      <ul id="def1" class="dropdown-menu" style="display:none"></ul>
    </div>
</div> 
```

> Javascript代码：

```
function doOn(obj)
     {

        if(obj.id=="mydef")
        {
            document.getElementById("def1").style.display="none";
            document.getElementById("def").style.display="block";
        }
        if(obj.id=="search")
        {
            document.getElementById("def").style.display="none";

            document.getElementById("def1").innerHTML='<li><a id="Java" onclick="mydef(this);" >java</a></li><li><a id="oracle" onclick="mydef(this);" >Oracle</a></li>';

            document.getElementById("def1").style.display="block";
        }

    }
    function mydef(obj)
    {
        document.getElementById("search").value=obj.innerHTML;
        document.getElementById("def1").style.display="none";
        document.getElementById("def").style.display="none";
    } 
```

您也可以根据需要使用 jquery 和 json 代码。

输出如： [![在此处输入图像描述](../Images/4e6c582c337bdbb936be5947f0283f20.png)](https://i.stack.imgur.com/Hu9h0.png)

[![在此处输入图像描述](../Images/04a64a83180f90afcafa45f9c09c3a2e.png)](https://i.stack.imgur.com/qUHwI.png)

[![在此处输入图像描述](../Images/6ac37f107bb6fb87a594016962b0502c.png)](https://i.stack.imgur.com/0MkDi.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-10-22T21:01:36.087

这是我的解决方案是使用 **display: inline**

```
Some text <div class="dropdown" style="display:inline">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Dropdown
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="#">Action</a></li>
    <li><a href="#">Another action</a></li>
    <li><a href="#">Something else here</a></li>
    <li><a href="#">Separated link</a></li>
  </ul>
</div> is here 
```

一个

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" rel="stylesheet" />
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" />Your text
<div class="dropdown" style="display: inline">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Dropdown
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="#">Action</a>
    </li>
    <li><a href="#">Another action</a>
    </li>
    <li><a href="#">Something else here</a>
    </li>
    <li><a href="#">Separated link</a>
    </li>
  </ul>
</div>is here
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-16T04:56:58.247

[Daniel Farrell 的 Bootstrap Combobox](https://github.com/danielfarrell/bootstrap-combobox)完美地完成了这项工作。这是他的 GitHub 存储库中的一个示例。

```
$(document).ready(function(){
  $('.combobox').combobox();

  // bonus: add a placeholder
  $('.combobox').attr('placeholder', 'For example, start typing "Pennsylvania"');
});
```

```
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-combobox/1.1.8/css/bootstrap-combobox.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-combobox/1.1.8/js/bootstrap-combobox.min.js"></script>

<select class="combobox form-control">
  <option></option>
  <option value="PA">Pennsylvania</option>
  <option value="CT">Connecticut</option>
  <option value="NY">New York</option>
  <option value="MD">Maryland</option>
  <option value="VA">Virginia</option>
</select>
```

作为额外的奖励，我在脚本中包含了一个占位符，因为将其应用于标记不成立。

# java - Java - 理解 servlet

> ID：11979773
> 
> 赞同：3
> 
> 时间：2012-08-16T02:06:50.983
> 
> 标签：java, servlets

我正在做一个家庭作业项目，该项目应该通过 HttpServlet 在 2 个客户端之间实现棋盘游戏。我有几个问题：

1）我读到HttpServlets必须是无状态的，但是，为了游戏，我必须保留很多状态（轮到谁，棋盘的状态等）。我必须将其保留在客户中吗？HttpServlet 是否确实必须是无状态的，即没有跟踪状态的字段？

2) 我知道客户端会通过 doGet/doPost 方法与 servlet 对话，但是 servlet 如何与客户端对话（例如，如果玩家 1 刚刚移动并将其发送到 servlet，则 servlet 必须告诉客户 2 移动是什么）。

谢谢

另外，如果您能指出一个有用的、简单的在线类似代码示例，我将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:18:15.713

1.  HTTP 协议是无状态的，因此是 HttpServlet。您可以使用 servlet api 在服务器端维护会话状态。阅读[会话管理教程](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html)。

2.  有几种技术，例如 H [TML auto-refresh](http://en.wikipedia.org/wiki/Meta_refresh)，[Comet](http://www.ibm.com/developerworks/web/library/wa-cometjava/)和[HTML 5 的 WebSocket等技术](http://ajeeshwrites.blogspot.com/2011/02/peek-at-websockets.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:14:50.880

Servlet 需要能够处理多个请求——它们不需要是无状态的，但它们必须*管理*该状态以避免典型的多线程问题。显然，如果您有两个用户需要访问同一个世界，您需要一种机制。假设服务器将帮助跟踪游戏状态，如果没有其他原因，只是为了避免作弊或恶意客户端。

有多种选择；客户端可以轮询移动更新，您可以使用长轮询等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T02:25:41.313

其他人已经涵盖了#1。

我只会对#2 提出建议。另一种选择是快速了解 AJAX（异步 Javascript 和 XML）。您可以触发“幕后”HTTP 请求并调整页面，而无需用户刷新页面。客户端可以加载 HTML 页面，该页面可以包含每隔几秒钟与服务器检查一次更新并刷新其板的 javascript。

[这是一个小例子](http://www.w3schools.com/ajax/ajax_example.asp)。此外，如果您不想担心特定于浏览器的 javascript，您可以使用 jQuery。它具有非常用户友好的 api，用于触发 ajax 请求，并处理特定于浏览器的内容。

编辑

好的，对于＃1 - 您的 servlet 将用于服务所有请求，可能是并行的。你不能将你的游戏板直接放在 servlet b/c 中，那么你可能有 20 个人试图编辑同一个游戏。

```
public class GameServlet extends HttpServlet {
   private GameBoard board; // everyone would share the same board! 
```

您有几个选择，您可以将板存储在用户访问的某个集合中。您可能还想看看 HttpSession。HttpSession 是服务器端内存的一部分，servlet 将为您跟踪它，您可以跨请求访问它。

```
public void doGet(HttpServletRequest req, HttpServletResponse resp) {

  HttpSession session = req.getSession();
  session.setAttribute("board", new GameBoard());  // this way each user will have their own game board

  // and you can retrieve it in another HTTP request
  GameBoard board = session.getAttribute("board");
} 
```

使用 HttpSession 对您来说可能有点棘手，因为板更新实际上必须更新两个用户的板。您可能只喜欢 servlet 上由用户索引的集合成员。希望这足以让你开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T02:51:41.093

HTTP 作为一种协议是无状态的（正如人们所提到的）。但是，一小部分 http 在服务器和客户端之间来回传递“Cookies”。这些 cookie 是一个单独的 RFC (http://www.ietf.org/rfc/rfc2109.txt)，由 HTTP 客户端（即浏览器）进行交互。在 HTTP 方面，cookie 只是另一个头字段，但它们对浏览器具有特殊的意义。

将这些 cookie 用于基于 servlet 的程序将会话 ID 传递回客户端浏览器的一种用途。当客户端发送后续请求时，相同的 cookie 会自动发送回发出它的服务器。服务器识别那个并且那个标识符用户会话。这对程序员来说大多是透明的。

通常，tomcat（或其他一些容器）会为您处理这个，您所要做的就是询问会话的 servlet 请求：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
    throws ServletException, IOException {

    // the parameter determines if session can be created if one does not exist for the client
    HttpSession session = req.getSession(true); 

    session.setAttribute("attName", attValue);
} 
```

您可以使用会话来存储/检索属性。至于常见的游戏状态，很可能应该存储在其他地方（某种游戏管理器对象），但是您可以在用户的​​会话中存储用户当前的游戏 id，这将允许 servlet 为用户找到合适的游戏. 当用户移动时，游戏状态会通过指示这一点的 http 请求更新。两个用户都必须定期发出 http 请求来询问游戏的当前状态、最近的动作等......

# knockout.js - 使用 Knockoutjs 为每个项目选择一个自定义模板

> ID：11979775
> 
> 赞同：2
> 
> 时间：2012-08-16T02:07:03.297
> 
> 标签：knockout.js, knockout-2.0

给定一个映射到`knockout.js`并使用[自定义模板](http://knockoutjs.com/documentation/template-binding.html)的数组，如何让数组中的每个项目使用不同的模板呈现？

这是[jsFiddle 上所需功能示例](http://jsfiddle.net/bmh_ca/QxVK6/1/)的链接- 有点像人们希望的那样。

简单来说，给定一个这样的数组：

```
people: ko.observableArray([
    { name: 'Rod', age: 123, template: 'personItem' },
    { name: 'IBM', incorporated: 1911, template: 'corporateItem' },
]) 
```

如何设置一个`foreach:`绑定，对某些项目使用一个模板，而对其他项目使用不同的模板。

（注意：我知道下划线模板的使用在某种程度上混淆了相关问题，并对任何不必要的混淆表示歉意。）

我考虑过使用一个带有一组`if`绑定的模板 - 每个模板类型一个，如下所示：

```
<div data-bind='foreach: people'>
   <div data-bind='if: people.template() == "personItem"'>
   </div>
   <div data-bind='if: people.template() == "corporateItem"'>
   </div>
</div> 
```

这似乎很不优雅，我怀疑（希望）有一个更优雅和相当简单的选择。

任何想法将不胜感激并感谢您的阅读。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T02:35:25.567

您实际上可以传递一个函数来确定模板，而不是将字符串传递给绑定的`name`参数。`template`您必须将此与`foreach`在您的案例中使用该选项相结合，而不是通过您的项目执行“每个”。

因此，您的视图模型将如下所示：

```
var viewModel = {
    people: ko.observableArray([
        { name: 'Rod', age: 123, template: 'personItem' },
        { name: 'IBM', incorporated: 1911, template: 'corporateItem' },
    ]),
    getTemplate: function(item) {
        return item.template;   
    }
}; 
```

你的标记就像：

```
<ul data-bind="template: { name: getTemplate, foreach: people }"></ul>

<script type="text/html" id="personItem">
        <li>
            <b data-bind="text: name"></b> is <%= age %> years old
        </li>
</script>

<script type="text/html" id="corporateItem">
        <li>
            <b data-bind="text: name"></b> is <%= incorporated %> years old
        </li>
</script> 
```

这是一个例子：http: [//jsfiddle.net/rniemeyer/xF2xe/](http://jsfiddle.net/rniemeyer/xF2xe/)

以下是一些额外的参考资料：

*   [http://www.knockmeout.net/2011/03/quick-tip-dynamically-changely.html](http://www.knockmeout.net/2011/03/quick-tip-dynamically-changing.html)

*   [http://knockoutjs.com/documentation/template-binding.html#note_4_dynamically_choosing_which_template_is_used](http://knockoutjs.com/documentation/template-binding.html#note_4_dynamically_choosing_which_template_is_used)

# android - 将 HTML5 与 eclipse android 插件一起使用

> ID：11979778
> 
> 赞同：2
> 
> 时间：2012-08-16T02:07:31.217
> 
> 标签：android, eclipse, html, eclipse-plugin

我对 Android 完全陌生，所以如果这是微不足道的，请原谅我。我已经安装了 eclipse Android 插件，它有实现 UI 的工具箱。有没有办法在这里使用 HTML 代码。

谢谢，萨拉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:12:37.803

要将 WebView 添加到您的应用程序，只需在活动布局中包含该元素。例如，这是一个 WebView 填满屏幕的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/>

String summary = "<html><body>Awesome Content Here</body></html>";
 webview.loadData(summary, "text/html", null); 
```

[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T02:38:45.030

也许你可以试试 phonegap api

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T02:40:19.427

您是否正在寻找开发 HTML 5 应用程序？那么你需要一些其他框架，这将帮助你使用 HTML、CSS、Javascript 代码构建 Android 应用程序

我用的是[Phonegap](http://phonegap.com/)

还有更多可用的框架。你可以谷歌一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-16T19:21:21.307

在 Android 应用程序中包含 HTML 代码。您可以按照上面的示例，您可以将所有 HTML 代码放在**res**文件夹中并创建一个新文件夹**www**并将以下行放在您的活动类中

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
WebView webView = (WebView)findViewById(R.id.webView);
webView.getSettings().setJavaScriptEnabled(true);
webView.setWebChromeClient(new WebChromeClient());
webView.loadUrl("file:///android_assest/www/index.html"); 
```

# jquery - 通过jquery在var中存储元素高度

> ID：11979781
> 
> 赞同：1
> 
> 时间：2012-08-16T02:08:18.597
> 
> 标签：jquery

编辑：

这是与我的文件中完全相同的代码：

相关HTML：

```
<a href="javascript:void(0);" onmouseover="return overlib('Farewell - N.C. Hunter Hayden', HEIGHT, -1, WIDTH, -1, ABOVE);" onmouseout="return nd();" onclick="andherewego(1); setTimeout(function(){document.getElementById('farewell').play();},965);"><div id="note_1"></div></a> 
```

点击这里将调用函数andherewego(p)。这是该功能：

```
function andherewego(p){    // p is the # of the note pressed

initiatestafffade();    // set times for notes and notation to fade,
                        // and fades them
setTimeout(function(){
    changingoftheguard(p);  // show writing_p, paper, marginline,
                            // back_p
    hackemoff(p);           // re-define height for paper, marginline,
                            // back
    hidingfromjudgement(p); // determines how many covers to show and
                            // shows
                            // them
    nowheretohide(p);       // set times for covers to fade, and fades
                            //them

}, 950); 
```

}

这个函数调用了 hackemoff(p)，我把它放在下面：

```
function hackemoff(p){
var writingheight = $("writing_"+p).height();
alert(writingheight);
$("#paper").height(writingheight-300+50);
$("#marginline").height(writingheight+50);
$("#back_"+p).height(writingheight+50); 
```

}

那就是代码。如果我的语法确实如你所说的那样完美无瑕

```
 var writingheight = $("writing_"+p).height(); 
```

然后我不明白为什么 writingheight 为空。我很感激你能看到这个。

原帖：

我正在尝试将元素高度的值存储在变量中，因此我可以使用它来设置其他元素的高度。我的问题是存储高度。我想我可以试试这个：

```
var writingheight = $("#writing_"+p).height; 
```

（有几个 div#writing_ *x*元素。）

为什么这会存储一个很长的混乱`writingheight`而不是高度值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:11:57.757

您需要通过 执行它`()`，或者您只是将 jquery 函数分配给变量。

```
var writingheight = $("#writing_"+p).height(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:15:23.583

不要忘记 ()，你应该写 height()

# php - mysql在表A中查找一系列记录，复制到表B

> ID：11979782
> 
> 赞同：1
> 
> 时间：2012-08-16T02:08:19.490
> 
> 标签：php, mysql, copy, multiple-entries

我现在正在尝试编写一个 PHP 脚本

1.  使用唯一的主 ID 搜索数据库中的特定记录。
2.  然后它应该在表中搜索与第一条记录的某些字段匹配的记录（例如，查找名称和日期与“记录一个”相同的所有条目）
3.  然后它应该将所有匹配的条目复制到一个新表中。

现在我让它只抓取一个匹配的条目然后停止。如何格式化它以复制所有条目？

```
$query = sprintf("SELECT name, date FROM original_table
WHERE id='%s'",
mysql_real_escape_string($id)); 
$result = mysql_query($query);

$row=mysql_fetch_array($result);

//find and copy all matching entries
$query = sprintf("INSERT into second_table(all fields)
SELECT all fields FROM original_table WHERE name='%s' AND date='%s'") 
```

关于我能做些什么来实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:14:48.373

在 SQL 中，您想要的查询是：

```
INSERT into second_table(all fields)
    SELECT ot.all fields
    FROM (select *
          from original_table ot
          where key = <thekey>
         ) rec join
         original_table ot
         on rec.name = ot.name and
            rec.date = ot.date 
```

是否要排除原始密钥？如果是这样，包括“and rec.key <> ot.key”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T02:17:47.497

您可以使用单个查询进行选择和插入，例如：

```
INSERT INTO new_table (name, date, etc)
SELECT name, date, etc FROM old_table
WHERE name='%s' AND date='%s' 
```

*解释：*

第 1 行：定义要插入新表的列
第 2 行：从旧表中选择数据
第 3 行：使用 WHERE 或 ON 语句指定要复制的内容

潜在地，您也可以动态创建 new_table，但在此示例中它已经存在。

# actionscript-3 - AS3：更改精灵内对象的变量

> ID：11979783
> 
> 赞同：0
> 
> 时间：2012-08-16T02:08:27.570
> 
> 标签：actionscript-3, flash, variables, actionscript, sprite

我在尝试编辑容器精灵内的 MovieClip 类实例中的变量值时遇到问题。

电影剪辑都是精灵“容器”的孩子，但是当我尝试`container.getChildAt(i).variable = value;`在 for 循环中循环它们时，我得到了错误-

```
Scene 1, Layer 'AS', Frame 1, Line 87   1119: Access of possibly undefined property name_ through a reference with static type flash.display:DisplayObject. 
```

如何编辑这些变量？出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:39:05.263

最有可能的问题是 getChildAt() 返回了一个 DisplayObject。DisplayObject 不是动态类，这意味着您不能随意创建和访问变量。另一方面，MovieClip 是一个动态类，因此您可以在尝试时创建和访问任意变量。问题是，即使*您*知道您正在访问的对象是一个 MovieClip，Flash 也不知道这一点，并将您限制为 DisplayObject 的功能，如前所述，这是 getChildAt() 返回的内容。

为了解决这个问题，您必须明确让 Flash 知道您正在处理的对象是一个 MovieClip。这是通过所谓的铸造完成的：

```
MovieClip(container.getChildAt(i)).variable = value; 
```

由于您现在已经让 Flash 知道该对象将是一个 MovieClip，因此您可以利用 MovieClip 是一个动态类这一事实并访问您的变量。

# jquery - 为什么 pageX 和 pageY 相对于包装器，而不是文档？

> ID：11979784
> 
> 赞同：4
> 
> 时间：2012-08-16T02:08:40.843
> 
> 标签：jquery, css, mouse

好的，所以我想让 div '.prodimg' 跟随鼠标位置。这有效，除了它相对于#wrapper 的左位置定位，它是'.details' 和'.prodimg' 的父div。为什么会这样？有什么建议可以修复它或跟踪鼠标的替代方法吗？

'.prodimg' 顶部位置相对于 #wrapper 顶部，然后我将其更改为 padding-top 并更正了 .prodimg。这与我的问题有关，但我找不到左侧位置的类似解决方案。理想情况下，我不必更改包装器以使 pageX 和 pageY 与整个窗口相关。

我已经尝试使用 '#wrapper' position:relative 并且没有任何改变。'.details' 必须是相对的，以便它可以内联浮动。我在包装器下面输入了 jquery。我试过用'document'代替'window'。不知道这是否与它有关...请帮助！我在这个问题上损失了将近 3 个小时：/

这是我的小提琴：http: [//jsfiddle.net/vg2zL/](http://jsfiddle.net/vg2zL/)

```
$(document).ready(function() {
var mouseX;
var mouseY;
$(window).mousemove( function(e) {
 mouseX = e.pageX; 
 mouseY = e.pageY;
});  
$(".details").hover(
  function () {
$(this).children(".prodimg").css("visibility","visible");
$(window).bind('mousemove', function(e){
    $(".details").children(".prodimg").css({'top':mouseY,'left':mouseX});
});
 },
  function () {
    $(".prodimg").css("visibility","hidden");

   });
}); 
```

这是我的风格

```
#wrapper {
 width: 700px;
 padding-top: 130px;
 position: absolute;
 left:50%;
 margin-left: -351px;
 font-size: 30px;
 font-family: 'cmu_serifroman';
}

.details {
 text-align:center;
 width:200px;
 display:inline-block;
 line-height:40px;
 margin-right:50px;
 cursor:pointer;
}

.prodimg {
 visibility:hidden;
 position:absolute;
 z-index:-1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:33:48.420

绝对定位元素的`top`and`left`属性是相对于该元素的第一个非静态定位祖先的，因此（根据您网页上的代码）`.prodimg`将相对于`#wrapper`

您可以使用固定位置元素和客户端坐标（即[clientX](https://developer.mozilla.org/en-US/docs/DOM/event.clientX?redirectlocale=en-US&redirectslug=DOM%3Aevent.clientX)，clientY）代替

[http://jsfiddle.net/vg2zL/1/](http://jsfiddle.net/vg2zL/1/)

```
$(document).ready(function() {
var mouseX;
var mouseY;
$(document).mousemove( function(e) {
 mouseX = e.clientX; 
 mouseY = e.clientY;
});  
$(".details").hover(
  function () {
$(this).children(".prodimg").css("visibility","visible");
$(document).bind('mousemove', function(e){
    $(".details").children(".prodimg").css({'top':mouseY,'left':mouseX});
});
 },
  function () {
    $(".prodimg").css("visibility","hidden");

   });
});
```

```
#wrapper {
 width: 280px;
 padding-top: 130px;
 position: absolute;
 left:50%;
 margin-left: -141px;
 font-size: 10px;
 font-family: 'cmu_serifroman';
}

.details {
 text-align:center;
 width:60px;
 display:inline-block;
 margin-right:20px;
 cursor:pointer;
}

.prodimg {
 visibility:hidden;
 position:fixed;
 z-index:-1;
 background-color:blue;
 width:50px;
 height:50px;

}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="wrapper">
  <div class="details">
      <a>Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text  </a>
  <div class="prodimg"></div>
  </div>
  <div class="details">
      <a>Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text </a>
  <div class="prodimg"></div>
  </div>
      <div class="details">
      <a>Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text  </a>
  <div class="prodimg"></div>
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:15:04.937

你有没有研究`offset`过 jQuery 是如何工作的？您可以在此处找到更多信息：http: [//api.jquery.com/offset/](http://api.jquery.com/offset/)。这可能有助于解决您的问题。是否可以将相关内容放入 jsFiddle 以更轻松地为您提供帮助？

jquery 有一些关于鼠标位置如何工作的很好的文档：http://docs.jquery.com/Tutorials: [Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

我刚刚在这里的一个类似问题中找到了一个很好的解释：[jQuery get mouse position within an element](https://stackoverflow.com/questions/4249648/jquery-get-mouse-position-within-an-element)。希望这有助于回答您的问题。

# assembly - ARM 汇编循环

> ID：11979788
> 
> 赞同：5
> 
> 时间：2012-08-16T02:09:31.153
> 
> 标签：assembly, for-loop, arm

```
for (int i = 0; i < 10000; i++)
  a[i] = b[i] + c[i] 
```

这种高级语言的 ARM 程序集是什么样的？

编辑：我还假设 A 的基地址在 R8 中，B 的基地址在 R9 中，C 的基地址在 R10 中，A、B、C 都是 int 数组

非常感激

我试过了：

```
MOV  R0, #0  ; Init r0 (i = 0)

Loop:

        a[i] = b[i] + c[i]   //How to fix this? 

        ADD  R0, R0, #1 ;Increment it

        CMP  R0, #1000 ;Check the limit

        BLE  Loop  ;Loop if not finished 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T06:50:38.820

假设这种高级语言与 C 没有任何冲突，您可以使用 arm C 编译器从您的代码片段创建汇编代码。例如，如果您在 test.c 中有以下内容，

```
void test() {
        register int i asm("r0");
        register int *a asm("r8");
        register int *b asm("r9");
        register int *c asm("r10");

        for (i = 0; i < 10000; i++) {
                a[i] = b[i] + c[i];
        }
} 
```

你可以跑

```
arm-linux-androideabi-gcc -O0 -S test.c 
```

创建一个 test.s 文件，该文件将包含您的测试功能的汇编代码以及一些额外的东西。你可以在下面看到你的循环是如何编译成程序集的。

```
<snipped>
.L3:
        mov     r2, r8
        mov     r3, r0
        mov     r3, r3, asl #2
        add     r3, r2, r3
        mov     r1, r9
        mov     r2, r0
        mov     r2, r2, asl #2
        add     r2, r1, r2
        ldr     r1, [r2, #0]
        mov     ip, sl
        mov     r2, r0
        mov     r2, r2, asl #2
        add     r2, ip, r2
        ldr     r2, [r2, #0]
        add     r2, r1, r2
        str     r2, [r3, #0]
        mov     r3, r0
        add     r3, r3, #1
        mov     r0, r3
.L2:
        mov     r2, r0
        ldr     r3, .L5
        cmp     r2, r3
        ble     .L3
        sub     sp, fp, #12
        ldmfd   sp!, {r8, r9, sl, fp}
        bx      lr
<snipped> 
```

现在这种方法的问题是相信编译器会为您的研究生成最佳代码，这可能并非总是如此，但您将得到的是对上述问题的快速答案，而不是等待人们:)

- 额外的 -

GCC 允许您将变量放入某些寄存器，请参阅[相关文档](http://gcc.gnu.org/onlinedocs/gcc/Explicit-Reg-Vars.html)。

[您可以在此处](http://infocenter.arm.com/help/topic/com.arm.doc.qrc0001l/QRC0001_UAL.pdf)获取 arm 指令备忘单。

正如预期的那样，较新版本的 GCC 创建了更好的 arm 代码。以上截图由 4.4.3 版本生成，我可以确认[Linaro](https://launchpad.net/gcc-linaro)的 4.7.1 证明了我的主张。因此，如果您采用我的方法，请使用您可以获得的最新工具链。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T02:18:35.107

[http://www.peter-cockerell.net/aalp/html/ch-5.html](http://www.peter-cockerell.net/aalp/html/ch-5.html)

```
;Print characters 32..126 using a FOR loop-type construct

;R0 holds the character
MOV  R0, #32  ;Init the character
.loop
SWI  WriteC  ;Print it
ADD  R0, R0, #1 ;Increment it
CMP  R0, #126 ;Check the limit
BLE  loop  ;Loop if not finished
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T03:48:58.823

```
for (int i = 0; i < 10000; i++)
  a[i] = b[i] + c[i]

mov r0,#0x2700
orr r0,#0x0010
top:
ldr r1,[r9],#4
ldr r2,[r10],#4
add r1,r1,r2
str r1,[r8],#4
subs r0,#1
bne top 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T09:15:57.583

以@alpera 的答案为基础 - 您也可以展开循环以一次执行 4 个操作 - 尽管您是否获得性能优势取决于分支周围的内存访问或管道停顿是否是更大的影响

```
mov r11,#0x2700
orr r11,#0x0010
top:
ldmia r9!, {r0-r3}
ldmia r10!, {r4-r7}
add r0,r0,r4
add r1,r1,r5
add r2,r2,r6
add r3,r3,r7
stmia r8!, {r0-r3}
subs r11,#4
bne top 
```

如果你手边有 NEON 单元，我们也可以这样做——在这种情况下，它将并行加载、存储和添加——实际上将问题减少到 5 条指令，一次执行两次循环迭代。

AC 编译器默认不会生成如此紧密的代码（或 NEON 的并行化），因为它必须假设用于读取和写入的缓冲区（r8、r10 和 r11）可能会重叠 - 因此通过 r8 的写入可能会立即被读入通过 r9 或 r10 循环的下一次迭代。您可以使用`restrict`(`__restrict`在 C++ 中) 修饰符告诉编译器情况并非如此。

# mysql - 试图将数据列插入到 mySQL 表中

> ID：11979791
> 
> 赞同：0
> 
> 时间：2012-08-16T02:10:23.577
> 
> 标签：mysql, select, insert

我正在使用带有连接的 select 语句来尝试将列插入到 mySQL 数据库表中。

我的代码：

```
insert into trips_last_arrival_time(start_time)
select min_arrival_time.start_time
from min_arrival_time 
            inner join trips_last_arrival_time 
            on min_arrival_time.trip_id = trips_last_arrival_time.trip_id; 
```

我正进入（状态 ：

```
[Err] 1364 - Field 'trip_id' doesn't have a default value
trip_id is the primary key of both tables. 
```

start_time 列是空白的，未填充空值。

我也尝试过 UPDATE 子句

```
update trips_last_arrival_time
set trips_last_arrival_time.start_time  = (
select start_time from min_arrival_time )
where exists(
select trip_id from trips_last_arrival_time
where trips_last_arrival_time.trip_id = min_arrival_time.trip_id) 
```

在表 min_arrival_time 中有一个列 trip_id （实际上它是两个表的主键！）但是这个 UPDATE 子句给了我：

```
[Err] 1054 - Unknown column 'min_arrival_time.trip_id' in 'where clause' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:23:15.453

你有几个问题。

在您的第一个更新查询中，问题是trip_id 是主键，但没有获得默认值。这应该声明为 auto_increment 以便您可以轻松插入新值。创建表语句应该是这样的：

```
 trip_id int NOT NULL AUTO_INCREMENT,
 . . .
 primary key (trip_id) 
```

您可以使用 alter table 语句解决此问题，例如：

```
ALTER TABLE trips_last_arrival_time CHANGE trip_id trip_id UNSIGNED NOT NULL AUTO_INCREMENT; 
```

您的更新语句的问题是不同的。格式化，以便我可以阅读它：

```
update trips_last_arrival_time
    set trips_last_arrival_time.start_time = (
        select start_time from min_arrival_time )
    where exists(select trip_id
                 from trips_last_arrival_time
                 where trips_last_arrival_time.trip_id = min_arrival_time.trip_id
                ) 
```

WHERE 子句指的是一个表 min_arrival_time，它不在 FROM 子句中，也不在外部查询中。相反，它在另一个子查询中。此参考是断章取义的，这会导致您的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T02:27:51.700

您正在尝试在现有行上插入（它存在是因为您尝试选择它）。不管是否`trip_id`有默认值，这都不是正确的操作。您需要进行更新。

对于您的更新，我很确定您需要这样做：

```
UPDATE trips_last_arrival_time AS t, min_arrival_time AS m
    SET t.start_time = m.start_time
    WHERE t.trip_id = m.trip_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T02:28:58.393

在我看来，您已将`trip_id`表的主键设置为`trips_last_arrival_time`不能`null`也没有默认值。你自己手动生成`trip_id`吗？如果没有，请将您的`trip_id`列设置为`AUTO_INCREMENT`ed，以便每次插入新记录时，服务器都会自动`trip_id`为您生成。确保如果将其设置为`AUTOINCREMNT`列，则其数据类型应为`int`.

```
ALTER TABLE trips_last_arrival_time CHANGE trip_id UNSIGNED AUTO_INCREMENT; 
```

你的更新查询看起来很复杂，试着简单一点

```
UPDATE trips_last_arrival_time a 
            INNER JOIN min_arrival_time b
                ON a.trip_id = b.trip_id
SET     a.start_time  = b.start_time 
```

# vb.net - VB动态创建表单

> ID：11979793
> 
> 赞同：0
> 
> 时间：2012-08-16T02:11:11.467
> 
> 标签：vb.net, winforms, dynamically-generated

我有一个默认创建的表单。这是按照我想要的方式设计的，现在我想动态创建一个新表单，但我想将新表单设置为与默认创建的表单完全相同。在 VB.NET (WinForms) 和环境 VS2010 中编程。

我到目前为止：

```
Dim newWindow As new Form

newWindow = Me

newWindow.Show() 
```

我知道应该有类似 newWindow 继承 Form1 但不知道把它放在哪里=S

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:25:36.240

您当前正在创建一个表单，然后将您当前的表单分配给它。您需要`New`创建表单的另一个实例，然后您可以将其与主表单一起显示。

```
Dim newWindow As New Form1 'Name of my Default Form's Class assuming Form1.
newWindow.Show() 
```

# ios - ios：以编程方式设置静态 UITableViewCell（不使用 tableView:heightForRowAtIndexPath :)

> ID：11979795
> 
> 赞同：2
> 
> 时间：2012-08-16T02:11:13.763
> 
> 标签：ios, tableview

我有一个表视图，其中包含一组静态的 2 行（在情节提要中创建）。我有一个特定的 UITableViewCell ，其中包含一个动态生成大小的文本框。我还想动态设置包含 UITableViewCell 的高度，但是为 UITableViewCell 设置 .frame 似乎不起作用。有没有人在不使用 tableView:heightForRowAtIndexPath: 的情况下以编程方式完成此操作？

当前代码：

```
CGSize maximumLabelSize = CGSizeMake(296,9999);
CGSize expectedLabelSize = [self.place.details sizeWithFont:self.descriptionLabel.font 
                                  constrainedToSize:maximumLabelSize 
                                      lineBreakMode:self.descriptionLabel.lineBreakMode]; 

CGRect labelFrame = self.descriptionLabel.frame;
labelFrame.size.height = expectedLabelSize.height;
// this does not change the height of the UITableViewCell....
self.descriptionTableViewCell.frame = labelFrame; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:26:50.060

As you've noticed regardless of the height of the `UITableViewCell`, it is clipped to the height of the `UITableView`'s row for that index path. By the time `tableView:cellForRowAtIndexPath:` is called the row heights have already been laid out. Just use `tableView:heightForRowAtIndexPath:` as this is what it is intended for. A key point is that the table view needs to know the height of *all* its rows to set up its scroll view, scroll bars, etc. On the other hand it only needs to have the actual cells for what is on screen. See [this answer](https://stackoverflow.com/a/7363668/1441264) for more discussion on why the UITableViewDelegate works this way.

# mysql - 所有站点记录都从我的表中删除

> ID：11979799
> 
> 赞同：1
> 
> 时间：2012-08-16T02:11:54.290
> 
> 标签：mysql, database, records

什么可以从数据库中的所有表中删除所有记录。我在 codeignitor 上创建了一个网站。该网站工作正常，直到几天前。

我正在使用 MySQL

从数据库驱动的所有记录都消失了！在检查 PHPmyAdmin MYSQL 时，我发现该站点所需的所有表都是空的 0 记录。

这有可能自己发生吗？代码可以一次删除所有表中的所有数据吗？还是我应该怀疑网站被黑客入侵？

该网站的硬编码部分都可以正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:27:44.963

如果您不采取预防措施防止 SQL 注入，很可能有人通过您的网站使用 SQL 注入删除了这些记录。恢复备份后（您做了备份，对吗？）您将需要查看您的查询以查找漏洞。至少要确保您正在逃避用户输入。理想情况下，您将切换到参数化查询。默认情况下转义查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:30:46.393

如果您在任何地方允许表单输入、对这些输入执行计算并对数据库进行更改，那么您的站点可能容易受到 SQL 注入的攻击。如果没有正确转义，输入可能包含删除或截断数据库中信息的恶意命令。

有关 SQL 注入的更多信息：http: [//bobby-tables.com/](http://bobby-tables.com/)

# javascript - jQuery 不接受编程 element.onchange() 调用

> ID：11979802
> 
> 赞同：0
> 
> 时间：2012-08-16T02:11:58.983
> 
> 标签：javascript, jquery, forms

**这更像是一个教育问题，而不是一个需要解决的问题。**

所以我有一个`input`使用[Ryan Fait 的自定义元素插件的](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)样式。

```
<input type="checkbox" class="styled" id="no-favourite" /> 
```

我绑定了一个 jQuery`change()`处理程序：

```
$("#no-favourite").change(function(){
    console.log("changed"); 
}); 
```

并编辑了自定义元素插件的`check`方法以包括：

```
try{
    element.onchange(); 
}catch(err){
    console.log(err);
} 
```

这没有用。我期待一个`console.log`“改变”，最坏的情况是一个`console.log`错误，虽然没有收到。单击`change`关联的`label`.

我通过使用解决了这个问题：

```
$(element).change(); 
```

所以我想知道，为什么 jQuery 不接受对 的编程调用`element.onchange()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:15:59.280

假设`element`是一个 DOM 元素（如果它是一个 jQuery 元素，它只会爆炸），您正在尝试调用该元素的 property `onchange`。

当您通过 jQuery 绑定事件处理程序时，它不会添加任何`onchange`属性 - 只有当您将处理程序内联（在标记中）或通过本机 javascript 绑定时，这些属性才会存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T02:19:05.860

`jQuery`将使用其 api 绑定的事件存储在每个对象内的特殊`data`容器中，因此您不能真正使用`on*`本地方法调用它（只能使用`.onchange = function()`或 inline本地设置`onchange=`）。

如果您启动控制台 (chrome) 并键入`$.event`，您将看到 jQuery 内部事件表示，并且“默认”事件存储在 中`$.event.global`，并且在内部进行管理。

`jQuery.event.global[ type ]`在[http://code.jquery.com/jquery-1.8.0.js](http://code.jquery.com/jquery-1.8.0.js)搜索

```
 if ( (!elem || jQuery.event.customEvent[ type ]) && !jQuery.event.global[ type ] ) {
        // No jQuery handlers for this event type, and it can't have inline handlers
        return;
    }

    // Caller can pass in an Event, Object, or just an event type string
    event = typeof event === "object" ?
        // jQuery.Event object
        event[ jQuery.expando ] ? event :
        // Object literal
        new jQuery.Event( type, event ) :
        // Just the event type (string)
        new jQuery.Event( type ); 
```

# android - 来自不同类的Android getResources

> ID：11979806
> 
> 赞同：0
> 
> 时间：2012-08-16T02:12:58.660
> 
> 标签：android, resources, bitmap

我有两个类，A 类称为 Apply 和 B 类称为 Option 我希望 A 类从 B 类获取资源，但我收到错误

我得到的错误

```
Cannot make a static reference to the non-static method getResources() from the type ContextWrapper 
```

A类的功能

```
public static void applyBitmap(int resourceID) {
    BitmapFactory.Options opt = new BitmapFactory.Options();
    opt.inScaled = true;
    opt.inPurgeable = true;
    opt.inInputShareable = true;
    Bitmap brightBitmap = BitmapFactory.decodeResource(getResources(), resourceID, opt);
    brightBitmap = Bitmap.createScaledBitmap(brightBitmap, 100, 100, false);
    MyBitmap = brightBitmap;

} 
```

和 B 类中的资源按钮示例

```
 // the 34th button
    Button tf = (Button) findViewById(R.id.tFour);
    tf.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Apply.applyBitmap(R.drawable.tFour);

        }
    }); 
```

注意*：在该函数在 B 类中工作得很好之前，但知道我认为我需要静态资源但是如何？我不知道

我试过`Option.getResources()`但它没有用，它给出了一个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:25:05.753

您正在访问`getResources()`而没有引用`Context`. 因为这是一个静态方法，所以您只能访问该类中的其他静态方法，而无需提供引用。

相反，您必须将 the`Context`作为参数传递：

```
// the 34th button
Button tf = (Button) findViewById(R.id.tFour);
tf.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Apply.applyBitmap(v.getContext(), R.drawable.tFour); // Pass your context to the static method
    }
}); 
```

然后，您必须参考它`getResources()`：

```
public static void applyBitmap(Context context, int resourceID) {
    BitmapFactory.Options opt = new BitmapFactory.Options();
    opt.inScaled = true;
    opt.inPurgeable = true;
    opt.inInputShareable = true;
    Bitmap brightBitmap = BitmapFactory.decodeResource(context.getResources(), resourceID, opt); // Use the passed context to access resources
    brightBitmap = Bitmap.createScaledBitmap(brightBitmap, 100, 100, false);
    MyBitmap = brightBitmap;
} 
```

# android - 使用处理程序从另一个服务中启动服务

> ID：11979811
> 
> 赞同：0
> 
> 时间：2012-08-16T02:14:12.803
> 
> 标签：android, timer, handler

每当连接蓝牙设备时，我都会使用我的广播接收器设置共享首选项（BT_Device_connected）。

现在，当您插入手机时，我正在编写的应用程序会自动打开蓝牙（是的，我知道不建议这样做。重点！；）。

我要做的是在手机插入后等待 2 分钟，然后检查在这两分钟内手机是否已连接到蓝牙设备（如果 BT_device_connected 为真，它有，如果为假，它没有't）。

所以，我正在尝试从一个服务中启动一个计时器/处理程序，然后等待 2 分钟，然后启动一个新服务，或者一种检查设备是否已连接的方法。

并且...我必须在后台执行所有这些操作，因为这些都不会真正影响 ui。

我拥有但不起作用的光荣代码如下：

```
public void onDeviceConnectTimer(){

TimerTask wait;
final Handler handler = new Handler();
Timer t = new Timer();
wait = new TimerTask() {
        public void run() {
                handler.post(new Runnable() {
                        public void run() {
                            Intent serviceIntent = new Intent(CheckIfDeviceConnectService.class.getName());
                            getApplicationContext().startService(serviceIntent);
                         Log.d("TIMER", "Timer set off");
                        }
               });
        }};
    t.schedule(wait, initializeDate()); 
 } 
```

我做错了什么，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:20:01.900

尝试`handler`像这样使用：

```
final Handler handler = new Handler();
Runnable myRunnable=new Runnable()
{
public void run()
  { 
    //Start sevice here.

  }
}; 
```

现在开始运行：

```
handler.postDelayed(myRunnable, 120000); 
```

这将在 2 分钟后启动您的服务。

# excel - .Net 中是否有任何免费库支持删除整个 excel 列？

> ID：11979818
> 
> 赞同：1
> 
> 时间：2012-08-16T02:14:52.073
> 
> 标签：excel, npoi

我想找到一个支持在 excel 中删除整个列和行的库。不幸的是，EPPLUS 和 NPOI 不支持这个，他们的路线图也没有提到这个功能。

目前，我将宽度和高度设置为零，但这不是最佳解决方案。.Net 中是否有任何免费库支持删除整个 excel 列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:58:34.690

在您的项目中引用 Microsoft Excel 10.0 对象库。

设置以下 using 语句：

```
using Excel = Microsoft.Office.Interop.Excel; 
```

在您的类中，声明以下变量：

```
private Excel.Application _app;
private Excel.Workbooks _books;
private Excel.Workbook _book;
protected Excel.Sheets _sheets;
protected Excel.Worksheet _sheet; 
```

然后用以下方法打开工作簿：

```
protected void OpenExcelWorkbook(string fileName) 
{
_app = new Excel.Application();

if (_book == null) 
{
_books = _app.Workbooks;
_book = _books.Open(fileName, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
_sheets = _book.Worksheets;
}
} 
```

确保您有一个可以关闭工作簿的方法

```
protected void CloseExcelWorkbook() {
_book.Save();
_book.Close(false, Type.Missing, Type.Missing);
} 
```

并且您需要一种方法来清理对 Excel 对象的引用（因为它们是 COM），否则 Excel 将继续运行。

```
protected void NAR(object o) {

try {
if(o != null)
System.Runtime.InteropServices.Marshal.ReleaseComObject(o);
}

finally {
o = null;
}
} 
```

现在您可以选择要删除一行的工作表：

```
OpenExcelWorkbook(@"d:\temp\yourworkbook.xls");
_sheet = (Excel.Worksheet)_sheets[1];
_sheet.Select(Type.Missing);
Excel.Range range = _sheet.get_Range("A7:A7", Type.Missing);
range.Delete(Excel.XlDeleteShiftDirection.xlShiftUp);
NAR(range);
NAR(_sheet);
CloseExcelWorkbook();
NAR(_book);
_app.Quit();
NAR(_app); 
```

# ios - AIR：第 3 方 iOS 本机扩展的链接器错误

> ID：11979819
> 
> 赞同：1
> 
> 时间：2012-08-16T02:14:55.767
> 
> 标签：ios, xcode4, air, flash-builder4.5, air-native-extension

我目前正在尝试将 .ane 合并到我的 iOS 应用程序中。.ane 由第 3 方提供，我没有它的来源。

我已将随附的 .swc 链接到我的项目中（[Adobe 和第 3 方推荐的外部链接](http://blogs.adobe.com/airodynamics/2012/06/11/common-issues-faced-in-developing-native-extensions-for-air-on-ios/)）并成功构建了 .swf。我的问题始于使用 adt 构建 .ipa 进行部署。下面是我正在使用的模拟 adt 命令。您可以假设所有 <> 的内容都已正确填写，因为我已经详尽地检查了所有内容，并且构建运行了很长时间。不过，我可能会错过一些甜蜜的善良……

```
adt -package -target ipa-ad-hoc -provisioning-profile <the-file> -storetype <the-store-type> -storepass <the-password> -keystore <the-certificate> ./../myapp.ipa MyApp-app.xml MyApp.swf -extdir <path-to-ane-files> 
```

一切进展顺利，直到我收到以下错误，我们突然停下来：

```
ld: library not found for -lsqlite3 
```

这告诉我的是，第 3 方 .ane 是[通过指定 -platformoptions xml 文件](http://blogs.adobe.com/rajorshi/2011/11/16/ios5-support-for-airusing-external-sdks-to-package-apps/)或以其他方式尝试链接 sqlite3 库，并且在要构建底层 Xcode 项目的 adt 过程中，找不到那个库。

我的设置如下：
Mac OSX Lion
Adob​​e Flash Builder 4.5 w/PHP
Xcode 4.4.1 Flex 4.6.0 (AIR 3.3) SDK

现在，sqlite3 位于 /usr/lib 中，所以我知道它在那里，实际上它可以是任何库。由于这是一个命令行 AIR 实用程序，我无权访问底层 Xcode 项目（据我所知）[来告诉它库在哪里](http://www.youtube.com/watch?v=qM79_itR0Nc#t=0m58s)，所以我现在有点卡住并且没有想法。

我可能还应该注意到，我在使用任何其他（本地或其他）扩展时都没有遇到这个问题，但这很可能是因为它们几乎没有依赖关系。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:50:35.930

好的，我认为这最终成为我的设置的一个问题。 [通过将 adt 命令指向我明确使用的 iOS SDK 版本](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d128cdca935b-8000.html)，问题已得到解决。这就是我认为发生的事情：

*   前几天下载了Flex 4.6.0AIR3.3，安装好了。Adobe 说它带有一个内置的 iOS 版本（但我找不到它），所以我假设它使用 /Developer/Platforms/iPhoneIS.platform 每个 Snow Leopard 和 Xcode 3 中的那些。

*   然后我升级到 Lion，这样我就可以升级到 Xcode 4，这样我就可以构建 iOS 5 的东西了。Xcode 4 现在是从 App Store 安装的，所以我首先[完全删除 Xcode](https://stackoverflow.com/questions/5255959/how-to-fully-remove-xcode-4)，然后从 App Store 重新安装它。

*   Xcode 4 将 SDKS 放在其应用程序包中，而不是放回 /Developer/Platforms。有可能“从下面拉出地毯” Adob​​e？

无论如何，它已经解决了，只需要意识到 SDK 已经“消失”了......哦，并意识到 sqlite3.a 不是链接器正在寻找的，而是 libsqlte3.dylib。

这是修改后的 adt 命令，请注意 -platformsdk 开关的存在：

```
adt -package -target ipa-ad-hoc -provisioning-profile <the-file> -storetype <the-store-type> -storepass <the-password> -keystore <the-certificate> ./../myapp.ipa MyApp-app.xml -plaformsdk /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/<version> MyApp.swf -extdir <path-to-ane-files> 
```

:)

# wcf - 多个 WSDL 定义

> ID：11979825
> 
> 赞同：0
> 
> 时间：2012-08-16T02:15:27.733
> 
> 标签：wcf, web-services, wsdl

我在我的本地主机服务器和单独的应用服务器上托管 WCF 服务。从每个服务器查看 WSDL 时，它们的定义完全不同。

这是正常的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:48:27.397

根据您的绑定，您的 wsdl 可能会“出现”不同，但如果您的服务中的数据类型在两台服务器上部署相同，则每台服务器上这些类型的架构应该是一致的（尽管它们可能具有不同的命名空间或位于不同的网址）。

wsdl 用于序列化/反序列化，如果您在两台服务器上都以相同的方式完成，它们应该以相同的方式显示，但情况可能并非总是如此（您认为是相同的，尤其是 wcf 并不总是这种情况，除非您已经手动编写了所有代码，因为 wcf 往往主要是配置驱动的）。

# mysql - Cakephp 从另一个视图中检索 id

> ID：11979828
> 
> 赞同：4
> 
> 时间：2012-08-16T02:16:06.833
> 
> 标签：mysql, forms, cakephp, views, identifier

尝试创建一个表单和一个确认页面，该页面要求确认用户是否要与用户建立关系。该表单只有一个字段，该字段采用 id 并将用户定向到确认页面。确认页面有两个按钮，当用户点击确认时，确认和拒绝将提交到数据库，如果用户点击拒绝，来自表单的数据将被丢弃。确认页面还将打印他们尝试添加的用户的用户名。

我似乎无法从添加页面 (add_admin.ctp) 检索 id。

如何从原始添加页面 (add_admin.ctp) 访问 id 以在确认页面 (confirm.ctp) 中使用它？

```
public function add_admin() {
    $this->set('title_for_layout', 'Send A Relationship Request');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png'); 
    $this->layout='home_layout';

    $account_id=$this->User->find('list', array(
    'fields'=>array('account_id'),'conditions' => array(
    'id' => $this->Auth->user('id'))));

    if ($this->request->is('post')) {

      $this->Relationship->save($this->request->data);
      if ($this->Relationship->validates(array('fieldList'=>array('receiver_id','Relationship.accountExists'))))
      {

        $this->Relationship->save($this->request->data);
        $this->Session->setFlash('The relationship has been saved');
        $this->redirect(array('controller'=>'Relationships', 'action'=>'confirm'));
      } else {
        $this->Session->setFlash('The relationship could not be saved. Please, try again.');
      } 
    }
    $this->set('account_id', $account_id);
  }

public function confirm($id){
        $this->set('title_for_layout', 'Relationships');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.png');   
        $this->layout='home_layout';

        //$id = $this->request->data(`Relationship.receiver_id`);
        //$id = $this->params('Relationship.id');
        $id = $this->params['Relationship']['id'];
        $compName = $this->request->data(`Account.company_name`);

        $findName=$this->Account->find('list', array(
        'fields'=>array('company_name'),'conditions' => array(
        'id' => $id)));

        debug($id);
        pr($compName);
        pr($findName);

        $this->Relationship->unbindModel(array('hasMany'=>array('Invoice')));
        if ($this->request->is('get')) {
        $this->request->data = $this->Relationship->read(NULL, $id);
        }
        else 
        {
            if ($this->Relationship->save($this->request->data)) {

                //$this->Session->setFlash('You have successfully confirmed the relationship.');

                if($this->request->data['submit'] == "type_1") 
                { 
                    $this->Session->setFlash('The relationship has been confirmed');  
                    $this->redirect( array('controller' => 'fields','action' => 'add'));
                } 
                if($this->request->data['submit'] == "type_2") 
                { 
                    $this->Session->setFlash('The relationship was denied'); 
                    $this->redirect( array('controller' => 'templates','action' => 'index'));
                } 

            } else {
                $this->Session->setFlash('Unable to update your post.');
            }
        }
        $this->set('compName', $compName);
        $this->set('findName', $findName);
        $this->set('id', $id);
    } 
```

add_admin.ctp

```
<?php
echo $this->Form->create('Relationship', array('action'=>'add_admin'));
echo $this->Form->hidden('sender_id',array('label'=>'Enter your eBox ID: ', 'type'=>'text', 'default'=>$account_id)); 
echo $this->Form->input('receiver_id',array('label'=>'Receiver eBox ID: ', 'type'=>'text'));
echo "<br />";
echo $this->Form->end('Submit');
?> 
```

确认.ctp

```
Do you want to create a relationship with <?php echo $findName ?> 
    <?php
    echo $this->Form->create('Relationship', array('action'=>'confirm'));
    echo $this->Form->input('id', array('type'=>'hidden'));

    echo $this->Form->button('Confirm', array('name' => 'submit', 'value' => 'type_1'));
    echo $this->Form->button('Deny', array('name' => 'submit', 'value' => 'type_2'));

    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T02:34:27.467

将 ID 添加到重定向：

```
$this->redirect(array('controller' => 'Relationships', 'action' => 'confirm')); 
```

变成这样的东西：

```
$this->redirect(array('controller' => 'Relationships', 'action' => 'confirm', $this->request->data['Relationship']['receiver_id'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:19:55.923

您可以直接访问 $id，而无需使用 $this->request->params。您可以将它用于您的 confirm() 方法。

# java - Android 中 ActivityManager.getRecentTasks() 的替代方案？

> ID：11979830
> 
> 赞同：3
> 
> 时间：2012-08-16T02:16:24.537
> 
> 标签：java, android, android-activity

目前，我发现通过 android 框架检索最近启动的应用程序历史的唯一方法是使用`ActivityManager.getRecentTasks()`.

自从 Android 文档站点 UI 大修以来，我现在看到在这个方法中添加了一个注释：

> 注意：此方法仅用于调试和呈现任务管理用户界面。这绝不应该用于应用程序中的核心逻辑，例如根据此处找到的信息来决定不同的行为。此类用途不受支持，将来可能会中断。例如，如果多个应用程序可以同时主动运行，则出于控制流的目的对此处数据的含义所做的假设将是不正确的。

有什么更安全的替代方法来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-27T01:05:50.090

Lollipop 已弃用该方法；但是有一个新的 API 允许您查看应用程序的使用情况。

UsageStatsManager 有一些有用的方法来查看时间间隔之间的活动。希望这足以满足您的需求！

[https://developer.android.com/reference/android/app/usage/package-summary.html](https://developer.android.com/reference/android/app/usage/package-summary.html)

# php - php mvc将动态数量的变量传递给类/函数

> ID：11979831
> 
> 赞同：0
> 
> 时间：2012-08-16T02:16:27.860
> 
> 标签：php, arrays, dynamic

我对此进行了研究，找不到我想要的东西。尝试过 ReflectionClass 但这对我不起作用。

我有一个功能类。进入函数的变量数量是动态的。

例子：

包含类：

```
class Home {
  function test($var1, $var2, $var3){
    // do stuff here
  }
}

// this class is included based on url params, i.e. example.com/home/test/1/2/3
// where home is class, test is function and 1 2 3 are variables

$variables = array('1','2','3'); // static for this example, but array can have any number of elements to it.

$foo = new Home();
$foo->test($variables);

call_user_func_array('test', $variables); 
```

所以我想要实现的是获取变量数组并将它们发送到函数测试，就像代码示例中一样，我可以在其中列出每个变量。

下面的这个例子做了我想做的事情，但是我如何将它应用到类/mvc 框架中呢？

```
$colors = array('test','maroon','blue','green');
call_user_func_array('setLineColor', $colors);

function setLinecolor($var1, $var2, $var3, $var4){
  echo $var1;
  echo $var2;
} 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:18:48.027

为对象使用[适当的回调](http://php.net/manual/en/language.types.callable.php)：

```
$foo = new Home();
call_user_func_array( array( $foo, 'test'), $variables); 
```

这将调用对象`test()`上的`$foo`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:28:00.193

您是否考虑过发送关联数组，然后在函数中使用[extract with ？](http://php.net/manual/en/function.extract.php)

喜欢：

```
// using 
$variables = array('var1'=>'1', 'var2'=>'2', 'var3'=>'3');
// instead of
$variables = array('1','2','3'); 
```

并且，功能：

```
function test($variables)
{
extract($variables);
echo $var1;
echo $var2;
} 
```

# macos - Sketchup 的 Mac 插件：它应该是一个“应用程序”还是一个包？

> ID：11979834
> 
> 赞同：1
> 
> 时间：2012-08-16T02:17:05.353
> 
> 标签：macos, app-store, osx-mountain-lion, packagemaker

好的，所以我有点困惑...首先，请允许我描述一下我在做什么：

我有一个我创建的 Sketchup 插件。这个插件由一些需要安装到 Sketchup 目录中的 Ruby 脚本组成，只有这些 Ruby 文件没有实际的“应用程序”。在 PC 上，我创建了一个可执行安装程序，它会自动获取这些文件并将它们安装在正确的目录中，并有一个更新服务来通知用户更新，如果用户选择接受，可以推送它们。

在 Mac 上，我必须获取相同的几个 Ruby 文件并将它们复制到 Libray/Application Support/Google/Sketchup 8/plugins 文件夹中。

在 Mountain Lion 之前，我创建了一个包安装程序来完成此任务。它工作得很好，虽然因为我的包不包含“应用程序”，我无法使用任何 Mac 的第三方更新服务来推送更新......

所以现在，快进到山狮。Package Maker 不再包含在 XCode 中，虽然您仍然可以从 Apple 获得它，但我很清楚在不久的将来他们不希望人们使用它。他们想要“应用程序”，并且希望它们出现在他们的应用商店中。

我同意他们的观点，我想进入 Mac App Store。它会给我带来很好的曝光率，我可以推送更新。

这是我看到的问题，我的插件是 Sketchup 的插件，它不是应用程序，甚至不是官方的“Mac 插件”，它实际上是几个需要直接进入 Sketchup 的 Ruby 文件（我们在云端）

我遇到的另一个障碍是我的软件包没有“签名”，因此 Mountain Lion 用户很难安装它，除非他们知道安全窗格周围的方式。

所以这是一个大问题：

随着 Mac 和 Mac App Store 上的沙盒应用程序的发展，我的 Sketchup 插件是否会变得毫无用处，除非它是一个“应用程序”？使用应用沙盒，是否允许将文件转储到应用程序支持目录？

这些可能是基本问题，但我是 Sketchup 的人，而不是 Mac 开发人员，所以任何帮助都将不胜感激！

# css - Twitter Bootstrap 工具提示在超出窗口时未正确对齐

> ID：11979837
> 
> 赞同：9
> 
> 时间：2012-08-16T02:17:22.367
> 
> 标签：css, twitter-bootstrap, tooltip

当我有一个与 Twitter 引导工具提示关联的元素并且工具提示将在浏览器窗口外重叠时，它会尝试在窗口内重新对齐，但它会垂直未对齐（即，工具提示的顶部对齐现在居中而不是在目标元素上方）

以前有没有人遇到过这种情况，如果有，解决/修复/更新的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T03:21:50.090

是的，其他人以前遇到过这种情况。例如，[问题 #4125：工具提示位置错误](https://github.com/twitter/bootstrap/issues/4125)或[问题 #3556：窗口边缘附近的工具提示未正确激活](https://github.com/twitter/bootstrap/issues/3556)。

在前者中，建议*禁用文本换行*或*设置固定高度*。

在后者中，建议（相当开玩笑-但仍然可能有用）在您知道将靠近窗口边缘的*工具提示上设置不同的位置。*例如，`placement: 'left'`或`placement: 'right'`。

在这一点上，似乎没有任何动力在回购中处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T10:32:08.937

我遇到了这个问题，发现了以下问题。

导致问题

```
<a href="https://www.facebook.com/ComfortEstatePlanning" data-toggle="tooltip" 
data-placement="bottom" title="" data-original-title="follow us on Facebook" 
><i class="fa fa-facebook-official fa-lg fa-2x pull-right"></i></a> 
```

注意**pull-right**类在**i**标签上

```
<a href="https://www.facebook.com/ComfortEstatePlanning" data-
toggle="tooltip" data-placement="bottom" title="" data-original-
title="follow us on Facebook" class="pull-right"><i class="fa fa-facebook-
official fa-lg fa-2x"></i></a> 
```

解决方案是将**pull-right**类放在**a**标签上

# mongodb - Mongo C驱动，尽快更新文档

> ID：11979848
> 
> 赞同：0
> 
> 时间：2012-08-16T02:18:27.630
> 
> 标签：mongodb, mongodb-c, nosql

很简单，我需要将时间序列数据存储在文档中。我认为有一份负责 30 分钟数据的文件是合理的。该文档可能如下所示：

但这只是每秒将更新的大约几十万个文档中的一个。

```
{
    _id: "APAC.tky001.cpu.2011.12.04:10:00",
    field1: XX,
    field2: YY,
    1322971800: 22,
    1322971801: 23,
    1322971802: 21,

    // and so on
 } 
```

这意味着每 30 分钟，我使用`_id`和`field1`创建文档`field2`。然后，每一秒我都想添加一个时间戳/值组合。

我正在使用 mongo c 库，我假设它会超快，但我这样做的方式需要一个`mongo_update`不能批量完成的。我认为没有办法使用`mongo_insert_batch`.

不幸的是，它的速度非常慢 - 性能很糟糕。我这样做完全不正确吗？糟糕，我的意思是通过做一些粗略的工作，我得到 600/秒，在备用数据库（不命名名称）中，我得到 27,000/秒。

代码大约是：

```
for (i=0;i<N;i++) {
    if (mongo_update(c,n,a,b,MONGO_UPDATE_UPSERT,write_concern) != MONGO_OK)
        // stuff
} 
```

关闭或打开注销关注没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:02:50.270

您的更新可能每次都会使文档超出范围。这意味着更新不再便宜，因为 mongo 必须将文档复制到新位置。您可以通过在创建文档时插入一些大的虚拟值并稍后将其删除来手动填充文档，以便您的更新就地发生。我不确定您是否可以直接操作集合级别的 paddingFactor。

在另一个未命名的数据库中，您可能会为每个条目插入一行，这与您在此处所做的操作完全不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-11T13:09:50.327

Mongo 最新的 c-driver 确实支持批量插入：

[http://api.mongodb.org/c/current/bulk.html#bulk-insert](http://api.mongodb.org/c/current/bulk.html#bulk-insert)

```
#include <assert.h>
#include <bcon.h>
#include <mongoc.h>
#include <stdio.h>

static void
bulk1 (mongoc_collection_t *collection)
{
   mongoc_bulk_operation_t *bulk;
   bson_error_t error;
   bson_t *doc;
   bson_t reply;
   char *str;
   bool ret;
   int i;

   bulk = mongoc_collection_create_bulk_operation (collection, true, NULL);

   for (i = 0; i < 10000; i++) {
      doc = BCON_NEW ("i", BCON_INT32 (i));
      mongoc_bulk_operation_insert (bulk, doc);
      bson_destroy (doc);
   }

   ret = mongoc_bulk_operation_execute (bulk, &reply, &error);

   str = bson_as_json (&reply, NULL);
   printf ("%s\n", str);
   bson_free (str);

   if (!ret) {
      fprintf (stderr, "Error: %s\n", error.message);
   }

   bson_destroy (&reply);
   mongoc_bulk_operation_destroy (bulk);
}

int
main (int argc,
      char *argv[])
{
   mongoc_client_t *client;
   mongoc_collection_t *collection;

   mongoc_init ();

   client = mongoc_client_new ("mongodb://localhost/");
   collection = mongoc_client_get_collection (client, "test", "test");

   bulk1 (collection);

   mongoc_collection_destroy (collection);
   mongoc_client_destroy (client);

   mongoc_cleanup ();

   return 0;
} 
```

# javascript - 类型错误：e[h] 不是函数

> ID：11979852
> 
> 赞同：19
> 
> 时间：2012-08-16T02:18:49.780
> 
> 标签：javascript, jquery

我一直在使用 jquery 1.6 没有问题。今天我切换到 jquery 1.8，突然在尝试提交表单时出现此错误：

```
TypeError: e[h] is not a function. 
```

形式：

```
<form method="post" action="login?login" name="login" id="login">
<input class="input" type="text" name="user_mail" id="user_mail" autocomplete="on" />
<input class="input" type="password" name="password" id="password" autocomplete="off" />
<a class="green_button" href="javascript:void(0)" id="login_button">Login</a>
<input type="submit" name="login" id="submit" style="visibility:hidden" />
</form>
<script language="javascript">
$("#login_button").click(function(){
    $("#login").submit();   
});
</script> 
```

我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-16T02:24:51.713

删除下面的行。

```
<input type="submit" name="login" id="submit" style="visibility:hidden" /> 
```

***更新：***

或者如果您必须使用提交输入，那么您需要将 id 更改`submit`为其他内容。`id`原因是，如果您有一个带有of的输入元素`submit`，它将`submit`使用 HTMLInputElement 为表单设置一个属性。所以你不能调用`.submit`HTMLFormElement 上的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T07:29:30.093

我浪费了 3 个小时试图解决同样的问题，我使用 name='submit' 作为我的提交按钮并调用 $("#form_name").submit(); 在一个函数中并得到了错误。有时我忽略的小事情最终会浪费很多时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T02:48:36.050

我想这是因为这条线

```
<input type="submit" name="login" id="submit" style="visibility:hidden" /> 
```

你可以删除它并重试吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T05:59:57.170

当我们在表单中使用提交类型元素时，该元素将被设置为表单的提交属性。所以不能用表单的其他元素调用 submit() 函数。

有两种方法可以做到这一点。第一个只是删除第一个答复中给出的行。

或**使用 $("#submit").trigger("click"); 而不是 $("#login").submit();** . 它也会**在按输入关键字时提交表单。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T02:28:27.077

您的`form`和`input`具有相同的 name 属性值，`login`.

`name`将on更改`input`为其他内容，例如`submit`. 这应该可以清除您的错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-14T14:08:00.387

使用 jQuery 1.7（也可能在上面），如果您`name`还调用了该属性`submit`，它将中断。

例如

`<input type="submit" name="submit" value="Upload">`

但是将不起作用：

`<input type="submit" name="sendSubmit" value="Upload">`

没问题。

# magento - magento admin url 自动重定向到主页

> ID：11979853
> 
> 赞同：1
> 
> 时间：2012-08-16T02:18:55.623
> 
> 标签：magento, redirect

我遇到了一个奇怪的问题：当我想登录管理页面时，它会自动重定向到主页。

我们的商店网址是 www.bestinnature.ca，管理页面是 www.bestinnature.ca/index.php/admin。

有人能给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-21T03:33:42.080

与 site.com/magento/custom_admin_name 一起玩到 site.com/magento/index.php/custom_admin_name

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T11:45:01.307

您需要在数据库中的 core_config_data 表中进行更改。

问候维克

# php - stripslash 行为怪异还是正常？

> ID：11979855
> 
> 赞同：0
> 
> 时间：2012-08-16T02:19:10.053
> 
> 标签：php, sql, wordpress

我有一个数据库变量，其中包含

```
5/8\" Cabinet Grade Plywood 
```

WP 或 SQL 添加的 \ 以转义 ".

检索此变量时，我在用于编辑该表的字段的值中使用 stripslashes()（以便下次有人想要编辑该字段时，他/她将看到该输入中的内容）和实际网站它应该出现的地方。

奇怪的是..

在现场，它从 5/8\" 橱柜级胶合板切割到仅 5/8

在它应该出现的网站上，它正常显示，没有斜线或任何不寻常的东西。

这就是我剥离该字段的方式：

```
$somevar = '<input value="'.stripslashes($currentselected['something']).'" class="niceclass" name="something" type="text" />'; 
```

这就是我在页面上出现时使用它的方式：

```
 <td><span style="font-size: larger;"><?php echo stripslashes($goods['verygood']); ?></span></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:23:55.080

它只是与 HTML 标记冲突

```
<input value="'.stripslashes($currentselected['something']).'"/> 
```

将导致

```
<input value="5/8" Cabinet Grade Plywood" /> 
```

看看那些“，它就在那里坏了，你需要逃离那些”

解决这个问题在 php 中使用 urlencode 函数

```
<input value="'.urlencode(stripslashes($currentselected['something'])).'"/> 
```

或 htmlspecialchars 函数，它应该用

```
&quot; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:27:40.657

您可以`htmlspecialchars`在输出中使用一些。在`"`HTML 中具有特殊含义，在这种情况下实际上将被视为.`value`属性的关闭`input`。因此，您应该逃避它（`htmlspecialchars`将转换`"`为`&quot;`）。

# javascript - 下拉产品，在文本字段中输入价格

> ID：11979861
> 
> 赞同：1
> 
> 时间：2012-08-16T02:19:57.627
> 
> 标签：javascript, button, drop-down-menu, textfield

我需要创建一个简单的下拉菜单，其中包含 5 个项目（widget1、widget2、widget3 等）和一个相应的值，即价格。当用户在选择小部件后单击“价格按钮”时，我需要价格显示在文本框中。这是我从其他片段中提取的内容，但无法弄清楚“var x”之后的第二部分以将其插入文本区域。

```
function displayResult()
{
var x=document.getElementById("dropdown").value;
} 
```

而html...

```
<form action="">
<select id="dropdown" >
<option value="$1">widget1</option>
<option value="$2">widget2</option>
<option value="$3">widget3</option>
<option value="$4">widget4</option>
</select>

<button type="button" onclick="displayResult()">Price</button>
</form>
<textarea = id="showprice" size="10" maxlength="10"></textarea> 
```

我发现的大多数示例在选择下拉菜单后都会更改文本框，单击按钮后我需要它工作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:29:46.970

你已经这么近了。只需反转用于*获取*值的过程，但使用文本框的 id 并*设置*其`value`属性：

```
function displayResult() {
   var x=document.getElementById("dropdown").value;
   document.getElementById("showprice").value = x;
} 
```

如果这是唯一`displayResult()`不需要`x`变量的东西：

```
document.getElementById("showprice").value = document.getElementById("dropdown").value; 
```

# jquery - 缩放和定位图像效果

> ID：11979863
> 
> 赞同：-1
> 
> 时间：2012-08-16T02:20:11.257
> 
> 标签：jquery, html, css

这是我的小提琴

[http://jsfiddle.net/ocinisme/vqAwJ/5/](http://jsfiddle.net/ocinisme/vqAwJ/5/)

实际上我想要实现的是，所有的小红框一一放大到屏幕的中心，然后缩小到原来的位置，然后放到灰框内。

这个概念是所有的红色小盒子最终都将被放置在框架内。我愿意接受有关如何实现这一目标的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:31:28.183

我不确定你是否真的是指这种行为，

```
$('button').on('click', function() {
    $('button').attr('disabled', 'true');
    $('#a').animate({
        width: '100px',
        height: '100px',
    }, 1500, 'linear', function() {
        $('#a').animate({
            width: '30px',
            height: '30px',
        }, 1500, 'linear', function() {
            $('#a').animate({
                top: '165px',
            }, 1500, 'linear', function() {
                $('#b').animate({
                    width: '100px',
                    height: '100px',
                }, 1500, 'linear', function() {
                    $('#b').animate({
                        width: '30px',
                        height: '30px',
                    }, 1500, 'linear', function() {
                        $('#b').animate({
                            top: '205px',
                        }, 1500, 'linear', function() {
                            $('#c').animate({
                                width: '100px',
                                height: '100px',
                            }, 1500, 'linear', function() {
                                $('#c').animate({
                                    width: '30px',
                                    height: '30px',
                                }, 1500, 'linear', function() {
                                    $('#c').animate({
                                        top: '245px',
                                    }, 1500, 'linear');
                                });
                            });
                        });
                    });
                });
            });
        });
    });
}); 
```

​</p>

看看更新的[小提琴](http://jsfiddle.net/thujeevan/vqAwJ/6/)

# facebook - 如何通过 facebook graph api 获取顶级故事讲述者用户 ID

> ID：11979866
> 
> 赞同：0
> 
> 时间：2012-08-16T02:20:44.643
> 
> 标签：facebook, facebook-graph-api, social-networking, facebook-page

我使用 facebook 洞察力来获得顶级故事讲述者。我可以得到他们的计数，但不能得到那个特定故事讲述者的用户 ID。任何人都可以知道获取特定故事讲述者用户 ID 的查询吗？

```
 https://graph.facebook.com/140902935963424/insights/page_storytellers&access_token=[removed Gayan's access token] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:46:45.767

不，Insights API 中没有可让您检索此类数据的函数。

# html - 使用 Perl 和 WWW::Mechanize 获取带有填充表单的 HTML 并将其保存到文件

> ID：11979868
> 
> 赞同：2
> 
> 时间：2012-08-16T02:21:09.727
> 
> 标签：html, forms, perl, www-mechanize

我正在尝试获取我使用的所有内容的会话记录[`WWW::Mechanize`](https://metacpan.org/module/WWW%3a%3aMechanize)。将带有输入字段的 HTML 填充并保存到文件中非常重要。

我的代码：

```
$m->save_content($file); # Saves the page without any forms filled

$m->field('user_name', $user); #fills the form
# I need to save the html with the filled form
# $m->save_content($file_2); won't do it
# $m->dump_forms; shows that mechanize knows about the filled forms

$m->click('SUBMIT.x');
$m->save_content($file); # Too late, already in a different page 
```

有任何想法吗？我已经看到它可以使用，[`LWP::UserAgent`](https://metacpan.org/module/LWP%3a%3aUserAgent)但我无权访问代码。

我已经尝试了所有我能想出的东西，但没有任何东西会用`$m->forms()`.

编辑：基本上我想要的是具有以下类型的功能：

`$updated_content = merge($m->content, $m->dump_forms);`

因此，当我保存它时，我可以看到表单中的输入内容是 html 幻灯片。

我不需要保存对象的当前状态或在会话关闭后恢复会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:01:24.800

解决方案取决于您要实现的目标。该[`save_content`](http://p3rl.org/WWW%3a%3aMechanize#mech-save_content-filename-)方法只保存最后一个 HTTP 响应的内容，而不是整个`WWW::Mechanize`状态。

如果您想存储一个`WWW::Mechanize`对象以便可以从给定点随时进行浏览，那么您需要研究*序列化*一个受祝福的对象。

我的选择是使用[`Data::Dump`](http://p3rl.org/Data%3a%3aDump). 如果你写

```
use Data::Dump 'dump';
use WWW::Mechanize;

my $mech = WWW::Mechanize->new;
$mech->get('http://www.mysite.com/path/resource.html');
$mech->form_with_fields(qw/ username password /);
$mech->set_fields( username => 'me', password => 'secret');

open my $dump, '>', 'mechanize_freeze.pl' or die $!;
print { $dump } dump $mech;
close $dump or die $!; 
```

…那么你应该有一个文件，你可以在一个单独的程序中使用它来恢复

```
my $oldmech = do 'mechanize_freeze.pl'; 
```

# java - Java processbuilder - 如何执行 xargs 命令

> ID：11979869
> 
> 赞同：0
> 
> 时间：2012-08-16T02:21:12.627
> 
> 标签：java, linux, shell, command-line, execute

我正在尝试使用 java processbuilder 执行以下命令

`ls | xargs cat > pathtonewFile`

目前我的代码是

```
 String command="ls | xargs cat >t"

 ProcessBuilder probuilder = new ProcessBuilder(command);
 probuilder.start() 
```

目前这执行没有错误，但没有创建新文件。

我根据此处的另一篇文章在下面尝试过：[Problem Using Java ProcessBuilder to Execute a Piped Command](https://stackoverflow.com/questions/3776195/problem-using-java-processbuilder-to-execute-a-piped-command)

```
 ProcessBuilder probuilder = new ProcessBuilder("sh", "-c", "ls  | xargs cat >        pathtonewfile"); 
```

该命令执行但会创建一个 0 字节文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:40:13.470

尝试将文件扩展名添加到路径，或将文件扩展名添加到文件名。

# gwt - GWT Chart API googlecode，如何将 RoleType 设置为 DataTable 的列

> ID：11979871
> 
> 赞同：1
> 
> 时间：2012-08-16T02:21:42.203
> 
> 标签：gwt, google-visualization

我想将 GWT com.googlecode.gwt.charts.client 的 DataTable 的列中的 RoleType 列设置为“确定性”，但似乎没有设置它的方法。只有一种方法可以访问它。我该如何设置？

我尝试用 JSNI 编写手动设置方法，但似乎不起作用。dataTable.addColumn(ColumnType.BOOLEAN); dataTable.setColumnProperty(4, "确定", false);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-25T04:45:40.660

我只是扩展了 DataTable 并添加了这个方法：

```
public final native int addCertaintyColumn()/*-{
     return this.addColumn({type:'boolean',role:'certainty'});
     }-*
/; 
```

然后，在添加数据时，在此列上设置 true 或 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T08:59:27.043

我认为应该使用 DataColumn.setRole() 来明确指定角色：

```
DataColumn col = DataColumn.create(ColumnType.BOOLEAN);
col.setRole(RoleType.CERTAINTY);
dataTable.addColumn(col); 
```

但是，这对我也不起作用。它给了我以下错误：

```
(Error) @com.googlecode.gwt.charts.client.DataTable::addColumn(Lcom/googlecode/gwt/charts/client/DataColumn;)([JavaScript object(110832)]): Invalid type: function() {
      var result = __static(dispId, this);
      if (result[0]) {
        throw result[1];
      } else {
        return result[1];
      }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:29:22.720

角色似乎仍然是“实验性的”，我找不到问题/票

[http://code.google.com/p/google-visualization-api-issues/issues/list?can=2&q=DataType+roles&colspec=ID+Type+Status+Priority+Milestone+Owner+Summary+Stars&cells=tiles](http://code.google.com/p/google-visualization-api-issues/issues/list?can=2&q=DataType+roles&colspec=ID+Type+Status+Priority+Milestone+Owner+Summary+Stars&cells=tiles)

如果我同意就好了。

我不确定您是否能够覆盖 DataTable 的本机方法来添加： addColumn(type, role, param...) 现在您只有类型而没有角色:(

# asp.net-mvc - 来自不同控制器且参数/路由值不起作用的 RedirectToAction

> ID：11979875
> 
> 赞同：1
> 
> 时间：2012-08-16T02:22:27.553
> 
> 标签：asp.net-mvc, redirecttoaction

我正在尝试从不同的控制器调用操作方法，但它不起作用。它只是跳过 RedirectToAction

这是我的代码：

```
public ActionResult sendPolicy(TempPoliciesUpload TempPolicy)
        {
            return RedirectToAction("Insert", "Policies", new { tempPolicy = TempPolicy });
        } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T05:46:29.397

重定向时不能发送复杂对象。您必须将每个属性包含为查询字符串参数。这仅适用于简单的标量属性。

```
public ActionResult sendPolicy(TempPoliciesUpload TempPolicy)
{
    return RedirectToAction("Insert", "Policies", new 
    { 
        id = TempPolicy.Id,
        prop1 = TempPolicy.Prop1,
        prop2 = TempPolicy.Prop2,
        ...
    });
} 
```

如果您有复杂的属性，您还必须包含它们，以便默认模型绑定器能够将模型绑定到来自查询字符串参数的目标操作中：

```
public ActionResult sendPolicy(TempPoliciesUpload TempPolicy)
{
    return RedirectToAction("Insert", "Policies", new RouteValueDictionary
    {
        { "id", TempPolicy.Id },
        { "prop1", TempPolicy.Prop1 },
        { "prop2", TempPolicy.Prop2 },
        { "prop3.subprop1", TempPolicy.Prop3.SubProp1 },
        { "prop3.subprop2", TempPolicy.Prop3.SubProp2 },
        ...
    });
} 
```

和你的目标行动：

```
public ActionResult Insert(TempPoliciesUpload TempPolicy)
{
    ...
} 
```

另一种可能性是在重定向之前将此对象保留在您的后端，然后仅传递 id：

```
public ActionResult sendPolicy(TempPoliciesUpload TempPolicy)
{
    int id = Repository.Save(TempPolicy);
    return RedirectToAction("Insert", "Policies", new { id = id });
} 
```

在你的目标行动中：

```
public ActionResult Insert(int id)
{
    TempPoliciesUpload TempPolicy = Repository.Get(id);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T17:50:24.363

有没有人尝试过使用复杂对象的第一个解决方案？我的意思是这个：

“……和你的目标行动：……”

公共 ActionResult 插入（TempPoliciesUpload TempPolicy）{ ... }

我认为 RouteValueDictionary 不会转换或转换为复杂对象。（我认为必须使用序列化）

我的解决方案是将参数作为 RouteValueDictionary 传递，并在目标操作中单独接收每个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:23:16.060

我希望你有

```
public ActionResult Insert(TempPoliciesUpload tempPolicy) 
```

PoliciesController 类中的操作方法。

请在[此处查看 RedirectToAction 的重载](http://msdn.microsoft.com/en-us/library/dd505283.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T04:04:30.287

从您要重定向到的控制器中删除参数并删除`new { tempPolicy = TempPolicy }`. 看看这是否有效（然后您将问题本地化为参数）。

很可能您需要将其转换为您重定向到的操作类型（因此马克要求您提供该签名）或以其他方式使用它，可能会加上引号（我怀疑但很好尝试）

如果即使这样也不起作用，请检查您的拼写（这就是我*不喜欢*魔术字符串并喜欢[T4MVC](http://t4mvc.codeplex.com/)的原因） - 但我怀疑命名看起来是否正确。

另一种*可能*的可能性是在这里为其他人解决的问题：[RedirectToAction not working](https://stackoverflow.com/questions/2225030/redirecttoaction-not-working)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-18T21:32:59.730

如果您需要发送一个复杂的对象，您可以尝试从另一个控制器返回视图，如下所示：

`public ActionResult sendPolicy(TempPoliciesUpload TempPolicy) { return View("~Views/Policies/Insert.cshtml", TempPolicy ); }`

如果您希望此视图回发到正确的控制器方法，则需要在“BeginForm”Html Helper 中指定：

`... @using(Html.BeginForm("Insert", "Policy") { ... }`

这确实不是最佳实践，但它是一种解决方法，您可以使用它，直到您修复了足够的应用程序其余部分，以便您可以正确使用重定向。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-02T11:56:39.143

对于解耦，@Darin Dimitrov 的回答最适合。但是，如果您不希望在 URL 中传递详细信息，例如用户无法处理数据，您可以使用短暂的持久性 TempData 功能，如下所示：

```
public ActionResult sendPolicy(TempPoliciesUpload TempPolicy)
{
    TempData["Policy"] = TempPolicy;
    return RedirectToAction("Insert", "Policies");
} 
```

然后在插入中检索它：

```
public ActionResult Insert()
{
    TempPoliciesUpload TempPolicy = (TempPoliciesUpload)TempData["Policy"];
} 
```

# linux - 如何在 python 中使用 xcb ConfigureWindow 正确配置窗口

> ID：11979888
> 
> 赞同：1
> 
> 时间：2012-08-16T02:24:24.077
> 
> 标签：linux, x11, xcb

我正在开发一个 X11 窗口管理器，用 python 编写它。我遇到了一个问题，我在哪里得到并处理 ConfigureWindowEvents。但是，即便如此，当一个窗口被映射时，它仍显示为一个高 2 个像素、宽 1 个像素的窗口。我整理了以下示例代码，以便其他人可以测试它，并告诉我我是否做错了。我基于 qtile 的 ConfigureEvent 处理代码

```
import xcb
import xcb.xproto as xproto
from xcb.xproto import ConfigWindow as cw

conn = xcb.connect()
root = conn.get_setup().roots[0].root
eventmask = [xproto.EventMask.SubstructureRedirect]
err =conn.core.ChangeWindowAttributesChecked(root, xproto.CW.EventMask, eventmask)
check = err.check()
if check:
    print check

while True:
    e = conn.wait_for_event()

    if isinstance(e, xproto.MapRequestEvent):
        conn.core.MapWindow(e.window)

    if isinstance(e, xproto.ConfigureRequestEvent):
        y = x = w = h = bw = 0
        if e.value_mask & cw.X:
            x = e.x
            print "x:", x
        if e.value_mask & cw.Y:
            y = e.y
            print "y:", y
        if e.value_mask & cw.Height:
            h = e.height
            print "h:", h
        if e.value_mask & cw.Width:
            w = e.width
            print 'w:', w
        if e.value_mask & cw.BorderWidth:
            bw = e.border_width
            print 'bw:', bw
        mask = cw.X | cw.Y |  cw.Width | cw.Height | cw.BorderWidth
        values = {cw.X: x, cw.Y: y, cw.Width:  w, cw.Height: h, cw.BorderWidth: bw}
        err = conn.core.ConfigureWindowChecked(e.window, mask, values)
        err.check()
    conn.flush()
    print e 
```

我正在使用 Checked 函数来捕捉错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:45:00.247

我从 xcb 邮件列表中得到了答案，它非常快：

```
values = {cw.X: x, cw.Y: y, cw.Width:  w, cw.Height: h, cw.BorderWidth: bw} 
```

应该

```
values = [x, y, w, h, bw] 
```

然后，世界又恢复了正常。

# c# - 我收到错误无法读取超出流末尾的内容，为什么？

> ID：11979889
> 
> 赞同：7
> 
> 时间：2012-08-16T02:24:31.923
> 
> 标签：c#

testing.res 文件大小为 240MB。我想读它。但是我在这一行得到了错误：

```
int v = br.ReadInt32(); 
```

EndOfStreamException 无法读取超出流末尾的内容

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            R();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        public void R()
        {
            using (var br = new System.IO.BinaryReader(File.Open(@"d:\testing.res", FileMode.Open)))
            {
                // 2.
                // Position and length variables.
                int pos = 0;
                // 2A.
                // Use BaseStream.
                int length = (int)br.BaseStream.Length;
                while (br.BaseStream.Position < length)
                {
                    // 3.
                    // Read integer.
                    int v = br.ReadInt32();
                    textBox1.Text = v.ToString();
                }

            }
        }
    }
} 
```

例外：

```
System.IO.EndOfStreamException was unhandled
  Message=Unable to read beyond the end of the stream.
  Source=mscorlib
  StackTrace:
       at System.IO.BinaryReader.FillBuffer(Int32 numBytes)
       at System.IO.BinaryReader.ReadInt32()
       at WindowsFormsApplication1.Form1.R() in D:\C-Sharp\BinaryReader\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs:line 41
       at WindowsFormsApplication1.Form1..ctor() in D:\C-Sharp\BinaryReader\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs:line 19
       at WindowsFormsApplication1.Program.Main() in D:\C-Sharp\BinaryReader\WindowsFormsApplication1\WindowsFormsApplication1\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T02:29:58.333

您应该使用更可靠的方法来确定您何时处于流的末尾，而不是使用`sizeof(int)`. 您的方法可能不够精确，而且您为此使用了不安全的代码这一事实也不太好。

探测您是否在流的末尾的一种方法是使用该`PeekChar`方法：

```
while (br.PeekChar() != -1)
{
    // 3.
    // Read integer.
    int v = br.ReadInt32();
    textBox1.Text = v.ToString();
} 
```

一个更常见的解决方案是将`int`要保存在二进制文件中的 s 的数量写在实际整数列表的前面。这样您就知道何时停止，而无需依赖流的长度或位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T02:40:31.457

您的代码可能失败的一个原因是文件是否包含额外的字节（即 7 字节长的文件）。您的代码将在最后 3 个字节跳闸。

修复 - 考虑提前计算整数数量并使用`for`读取：

```
var count = br.BaseStream.Length / sizeof(int);
for (var i = 0; i < count; i++)
{
  int v = br.ReadInt32();
  textBox1.Text = v.ToString();
} 
```

请注意，如果存在最后 ​​1-3 个字节，此代码将简单地忽略它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-22T09:47:03.150

二进制读取器未指向流的开头。

在读取整数值之前使用此代码：

```
br.BaseStream.Seek(0, SeekOrigin.Begin); 
```

# git - git推送/合并配置

> ID：11979893
> 
> 赞同：1
> 
> 时间：2012-08-16T02:25:02.783
> 
> 标签：git

有以下输出`git remote show`

```
git remote show origin
remote origin
Fetch URL: https://user@server/path
Push  URL: https://user@server/path
HEAD branch: master
Remote branch:
  master tracked
Local branch configured for 'git pull':
  master merges with remote master
Local ref configured for 'git push':
  master pushes to master (up to date) 
```

在哪里`Local branch configured for 'git pull':`配置`Local ref configured for 'git push':`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:35:01.153

您可以运行`git config --list`以查看完整的`git`配置，其中将包括名为`branch.<BRANCHNAME>.merge`和的部分`branch.<BRANCHNAME>.remote`。这些定义了给定本地分支的上游分支。`branch.<name>.merge`从in的条目`git-config(1)`：

> 与 branch..remote 一起定义
> 给定分支的上游分支。它告诉 git fetch/git pull/git rebase
> 要合并哪个分支，并且还可以影响 git push（参见 push.default）。

该`push.default`选项`git push`会影响命令行上没有显式引用的情况。

# google-app-engine - 定期更新数据和搜索 API

> ID：11979898
> 
> 赞同：1
> 
> 时间：2012-08-16T02:26:25.120
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, gae-search

我有一个需要非常灵活的搜索功能的应用程序。作为其中的一部分，用户将需要能够对多个文本字段进行全文搜索，但也需要通过一些数字字段进行过滤，这些字段记录定期更新的数据（有时不止一次或两次一分钟）。此数据存储在 NDB 数据存储中。

我目前正在使用 Search API 创建文档对象和索引来搜索文本数据，并且我知道我还可以将数值添加到这些文档中以进行索引。但是，由于这些数字字段的动态特性，我将不断更新（删除和重新创建）搜索 API 索引的文档。即使我允许搜索 API 在一段时间内使用旧数据，它仍然需要每天更新几次。对我来说，这似乎不是存储这些数据以进行搜索的有效方法，特别是考虑到搜索查询的数量将大大少于数据更新的数量。

有没有一种有效的方法可以比不断修改搜索文档更有效地处理这些动态数据？

我对这个想法的唯一想法是实现一个两步过程，然后将全文搜索的结果用于针对 NDB 数据存储的查询或使用 Python 手动过滤。两者似乎都不理想，但我没有想法。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:10:39.293

确实，搜索 API 的文档可以包含数字数据，并且可以轻松更新，但正如您所说，如果您要进行大量更新，那么频繁地修改文档可能不是最佳选择。

您可能会考虑的一种设计是将数字数据存储在 Datastore 实体中，但也会大量使用缓存——memcache 或后端内存缓存。交叉引用文档及其关联实体（即，设计实体以包含具有关联文档 ID 的字段，并设计文档以包含具有关联实体键的字段）。如果您的应用程序域使得 doc id 和数据存储实体键名可以是相同的字符串，那么这更加简单。

然后，在缓存中，按 doc id 索引数字字段信息。这将使您可以有效地获取查询检索到的文档的相关数字信息。您当然需要管理更新数据存储实体的缓存。

只要缓存的大小不需要太大，这可能会很好。

如果您的 doc id 和关联的实体键名称可以是相同的字符串，那么我认为您可以利用 ndb 的缓存支持来完成大部分工作。

# mysql - 在 iPage 上托管的 MySQL 上创建程序

> ID：11979904
> 
> 赞同：-1
> 
> 时间：2012-08-16T02:27:09.107
> 
> 标签：mysql, stored-procedures

> **可能重复：**
> [mysql存储过程语法错误](https://stackoverflow.com/questions/753331/mysql-stored-procedure-syntax-error)

为什么我不能在我的 iPage 托管服务上创建程序。

当我尝试创建一个内部没有任何命令的过程时，一切都很顺利。但是，即使我尝试像下面这样一个非常简单的过程，我总是会得到一个错误：

```
CREATE PROCEDURE \`LOGAR_USUARIO\` ()
BEGIN
   SELECT * FROM TB_USUARIO;
END; 
```

你能帮我理解我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:46:11.793

最可能的错误是分隔符错误：

```
DELIMITER //
CREATE PROCEDURE `LOGAR_USUARIO` ()
BEGIN
SELECT * FROM TB_USUARIO;
END//
DELIMITER ; 
```

现在语法应该没问题。但是您的程序没有任何用处：它选择了表 TB_USUARIO 中的所有记录，没有别的。所选记录不用于任何用途。

# html - href 到 7z 存档在浏览器中显示内容而不是下载

> ID：11979905
> 
> 赞同：0
> 
> 时间：2012-08-16T02:27:24.110
> 
> 标签：html

我的网站上有一个指向 7z 存档的链接，但是当我和我的少数用户在 FireFox 中单击该链接时，它会在浏览器中打开该文件的文本视图。

```
EG: 7z��'�^�j�t������#�������葰����&�N�חa�����O��db�~��K����Ҍ2�|qi�铄��[� 
```

我检查了我的 FireFox -> 应用程序设置，并且 7zip 设置为始终询问。

这是我的页面代码：

```
<table class="main" width="100%" height="10" cellpadding=10>
    <tr>
        <td class="thintext_grey" valign="top" align=right height=10>
        DOWNLOAD IT :: <a href="imgGet5000_v1.7z"> imgGet5000 v1 </a><br>
        Written in Python <br>
        Completed and added on 2012-08-15 by Jimmy <br>
        <hr size=1>
        </td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:39:26.990

问题是`Content-Type`来自您的服务器的标头不正确。您需要更改服务器的配置，以便将其用于`.7z`文件：

```
application/x-7z-compressed 
```

您可以使用浏览器的内置工具或[Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具轻松验证此问题。

# r - 如何在R中的向量上做映射函数？

> ID：11979919
> 
> 赞同：4
> 
> 时间：2012-08-16T02:28:47.227
> 
> 标签：r

我有一个像 (1,100,2,30,20,...) 这样的向量

我想做的是将这些值映射到另一个值。实际上我可以对这些值做一个循环，但我想知道我是否可以使 map 函数矢量化。例如，我想将值映射到它的存储桶，如下所示

```
1 ->  "< 10",
20 -> "10 to 50", 
60 -> "50 to 100", 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:17:13.060

这样的事情呢？

```
test <- c(1,24,2,30,20)

sapply(
    # bin the data up
    findInterval(test,seq(0,30,10)),
    # apply a particular function to the data element
    # dependent on which bin it was put into
    function(x) switch(x,sqrt(x),sin(x),cos(x),tan(x))
    )

[1]  1.0000000 -0.9899925  1.0000000  1.1578213 -0.9899925 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-31T21:01:03.300

使用 Purrr `map`( [https://www.rdocumentation.org/packages/purrr/versions/0.1.0/topics/map](https://www.rdocumentation.org/packages/purrr/versions/0.1.0/topics/map) )

例如

```
xx=c(1,4,0,3,1)

f = function(s) return(c((10*s):(10*s+9)))
xx %>% map(f) 
```

# ldap - ruby-ldap gem 在 rails3 应用程序中不起作用，但在 rails 控制台中起作用

> ID：11979920
> 
> 赞同：1
> 
> 时间：2012-08-16T02:28:55.130
> 
> 标签：ldap, ruby-on-rails-3.2

我想建立一个使用 LDAP 认证的 rails3 网站，所以我选择了我们在旧的 rails2 应用程序中使用的 ruby​​-ldap gem（不是 net/ldap），并且运行良好。

但是我在 rails3 应用程序中不断出现奇怪的错误，请参阅下面的代码：

```
require 'ldap'
class WelcomeController < ApplicationController

  def index  
    begin
      @test = LDAP::Conn.new('10.72.64.11', 389)
    rescue LDAP::Error
      p LDAP::Error
    end  
    render :text => "ok"
  end
end 
```

Welcome#index 是我的根路由。大多数时候，应用程序在访问 LDAP::Conn.new('10.72.64.11', 389) 时会崩溃，即使我尝试使用“pry”来调试和跟踪，也会抛出

```
[1]    24797 trace trap  rails s 
```

并且 WEBrick 服务器将在那时终止。

有时当我使用“pry”步进时它会引发另一个类型错误， `#<NameError: uninitialized constant WelcomeController::LDAP>`

在控制台中尝试时，一切顺利。

```
1.9.3-p194 :001 > require 'ldap'
 => true 
1.9.3-p194 :002 > @test = LDAP::Conn.new('10.72.64.11', 389)
 => #<LDAP::Conn:0x00000101289568> 
1.9.3-p194 :003 > 
```

你能引导我摆脱这些疯狂的事情吗？我正在使用 ruby​​ 1.9.3p194 和 rails 3.2.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:20:18.917

几个月后，我有点弄清楚问题是什么......

ruby-ldap gem 在 Rails 默认服务器上运行时出现问题：Webrick。

试试 Pow 或Passenger，效果很好！

阅读此页面后：[http ://www.ruby-forum.com/topic/62920](http://www.ruby-forum.com/topic/62920)

我尝试将 require 'ldap' 从控制器或模型文件中移到我的环境文件（xxxlocal.rb）的最上面一行

在我这样做之后，我也可以在 webrick 中运行它。

# php - 使用 exec() 打印 Word Doc

> ID：11979926
> 
> 赞同：0
> 
> 时间：2012-08-16T02:29:17.377
> 
> 标签：php

使用[此处](http://www.autohotkey.com/community/viewtopic.php?t=10600)的说明，我可以使用网络服务器上的命令行成功打印 Word 文档。例如：

```
"C:/Program Files (x86)/Microsoft Office/Office12/WINWORD.EXE" c:\temp\test.docx /q /n /mFilePrintDefault /mFileExit 
```

但是我现在想使用 PHP 来运行这个命令。例如：

```
echo exec('"C:/Program Files (x86)/Microsoft Office/Office12/WINWORD.EXE" c:\temp\test.docx /q /n /mFilePrintDefault /mFileExit'); 
```

当我在浏览器中通过网络服务器运行 PHP 文件时，使用任务管理器我可以看到 WINWORD.EXE *32 启动并运行，但是它保持运行并且不打印或自退出。

PHP 自然会返回超时错误。命令行方法在15秒内成功运行，所以我认为时间长度不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:32:00.143

尝试

```
echo exec('"C:/Program Files (x86)/Microsoft Office/Office12/WINWORD.EXE" c:\\temp\\test.docx /q /n /mFilePrintDefault /mFileExit'); 
```

这可能是由于未转义`\`。

# sql - Oracle sql查询需要根据时区变化

> ID：11979929
> 
> 赞同：0
> 
> 时间：2012-08-16T02:30:09.020
> 
> 标签：sql, oracle, timezone, oracle11g, epoch

我有一个 sql 查询来获取日期范围的记录。当我分析数据时，我的查询工作 find byut，我发现记录是基于 GMT 时区值而被检索的，因此导致结果不正确。

我从数据库中的 unix epoch 值中获取时间。

```
SELECT tableA.columnA,tableB.columnB 
FROM tableA INNER JOIN tableB ON  tableA.aId = tableB.aId 
WHERE (to_date('1970-01-01 00:00:00 +10:00','yyyy-MM-dd hh24:mi:ss') +    (tableB.epochValue/60/60/24/1000)) >  to_date('--FROM_DATE--', 'yyyy-MM-dd hh24:mi:ss') 
AND (to_date('1970-01-01 00:00:00 +10:00','yyyy-MM-dd hh24:mi:ss') + (tableB.epochValue/60/60/24/1000)) <= to_date('--TO_DATE--', 'yyyy-MM-dd hh24:mi:ss'); 
```

我想根据我的时区 GMT+10 获取记录，但此脚本根据 GMT 时区获取数据。我想知道如何通过我的时区来获取正确的日期对象

使用[http://www.epochconverter.com/](http://www.epochconverter.com/)，我获得了这些值 我的纪元值 - 1345079730 GMT：Thu, 16 Aug 2012 01:15:30 GMT 您的时区：Thu Aug 16 2012 11:15:30 GMT+10

我的数据库是 - Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T02:24:40.190

找到了我的问题的答案。

显然，您在计算纪元值时也需要考虑时区设置

1.  将 10 小时（10*60*60*1000 毫秒）添加到纪元值 - 纪元当前值在 GMT 中，所以为了使其成为 EST（GMT+10），我添加了这个。
2.  使用 TO_TIMESTAMP_TZ 而不是 to_date

    ```
    SELECT tableA.columnA,tableB.columnB 
    FROM tableA INNER JOIN tableB ON  tableA.aId = tableB.aId 
    WHERE (TO_TIMESTAMP_TZ('1970-01-01 00:00:00 +10:00','yyyy-MM-dd hh24:mi:ss TZH:TZM') +    ((tableB.epochValue+(10*60*60*1000))/60/60/24/1000)) >  to_date('##FROM_DATE## +10:00', 'yyyy-MM-dd hh24:mi:ss TZH:TZM') 
    AND (TO_TIMESTAMP_TZ('1970-01-01 00:00:00 +10:00','yyyy-MM-dd hh24:mi:ss TZH:TZM') + ((tableB.epochValue+(10*60*60*1000))/60/60/24/1000)) <= to_date('##TO_DATE## +10:00', 'yyyy-MM-dd hh24:mi:ss TZH:TZM'); 
    ```

# python - 如何在 Python 中将具有多种类型的列表转换为二进制？

> ID：11979931
> 
> 赞同：2
> 
> 时间：2012-08-16T02:30:21.320
> 
> 标签：python

我有一个包含两个元素的数组：第一个是类型，第二个是我需要转换的数据数组。

```
[['string','int32','string','int64','float32','string','string'],['any string','19','any string','198732132451654654','0.6','any string','any string']] 
```

我知道如何将整数转换为二进制，但是在上面具有多种类型的数组中，如何将其转换为二进制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:16:12.423

这是一个很好的方法：

```
data = [['string','int32','string','int64','float32','string','string'],
        ['any string','19','any string','198732132451654654','0.6',
         'any string','any string']]

type_map = {'string': str, 'int32': int, 'int64': long, 'float32': float}
results = [type_map[t](d) for t, d in zip(data[0], data[1])]
print results 
```

结果：

```
['any string', 19, 'any string', 198732132451654654L, 0.6, 'any string', 'any string'] 
```

这通过使用类型字符串作为第一个列表中每个项目的键在字典中查找转换函数来创建结果列表`type_map`，然后使用第二个列表中的相应数据项调用它。可以`for`通过使用称为列表推导的东西在列表声明中使用循环[来](http://docs.python.org/reference/expressions.html?highlight=comprehension#grammar-token-list_comprehension)创建列表。该`zip`函数在这里用于为循环的每次迭代从每个子列表创建值对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T03:03:10.277

我不确定这是否正是您想要的，但我认为这就是您要寻找的：

```
casts = { 'string': lambda x: str(x), \
    'int32': lambda x: int(x), \
    'int64': lambda x: int(x), \
    'float32': lambda x: float(x) }

types_to_cast = [['string','int32','string','int64','float32','string','string'],['any string','19','any string','198732132451654654','0.6','any string','any string']]

print [casts[types_to_cast[0][i]](types_to_cast[1][i]) for i in range(len(types_to_cast[0]))] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:00:19.677

尽管您已经接受了我的其他答案，但在注意到您的评论解释说您真正想要的是使用 将数据转换为二进制文件`struct.pack()`之后，我编写了另一个可能更适合您的答案（尽管更长且更复杂）。

```
import struct

class TypeConv(object):
    BSA = '='  # native Byte order, standard Size, with no Alignment
    def __init__(self, conv_func, fmt_chr):
        self.__dict__.update(conv_func=conv_func, fmt_chr=fmt_chr)

    def pack(self, data):
        py_value = self.conv_func(data)
        count = str(len(py_value)) if self.conv_func is str else ''
        return struct.pack(self.BSA+count+self.fmt_chr, py_value)

type_conv = {'string': TypeConv(str, 's'),
             'int32': TypeConv(int, 'i'),
             'int64': TypeConv(long, 'q'),
             'float32': TypeConv(float, 'f'),
            }

array = [['string', 'int32', 'string', 'int64', 'float32', 'string', 'string'],
         ['any string', '19', 'any string', '198732132451654654',
          '0.6', 'any string', 'any string']]

binary_values = [type_conv[type_id].pack(data)
                     for type_id, data in zip(array[0], array[1])
                         if type_id in type_conv]  # to skip any unknown type_ids
print binary_values 
```

输出：

```
['any string', '\x13\x00\x00\x00', 'any string', '\xfe\x9b<P\xd2\t\xc2\x02',
 '\x9a\x99\x19?', 'any string', 'any string'] 
```

该`TypeConv.pack()`方法首先将字符串值转换为其等效的 Python 值`py_value`，然后用于`struct.pack()`将其转换为 C 二进制值——我认为这就是您所寻求的。

# java - JSP 中的结果集

> ID：11979932
> 
> 赞同：2
> 
> 时间：2012-08-16T02:30:43.010
> 
> 标签：java, jsp, servlets, resultset

我需要一些帮助将结果集（rs）转发到 jsp 。我已经在 J​​AVA 中实现了 MVC 结构（注意：我是新手）。相同的逻辑流程如下：

1.  基本形式：用户输入他的选择。
2.  在提交时，流程被定向到一个 servlet。
3.  流程从 servlet 转到 Java 文件，在该文件中处理数据库检索和其他逻辑。
4.  然后将结果发送回 servlet。
5.  Servlet 将结果转发到 JSP 以供显示。

小服务程序：

```
package com.example.web;
import com.example.model.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import java.util.*;
public class CoffeeSelect extends HttpServlet {

  public void doPost( HttpServletRequest request, 
                      HttpServletResponse response) 
                      throws IOException, ServletException {
            String c = request.getParameter("type");
            CoffeeExpert ce = new CoffeeExpert();
            List result = ce.getTypes(c);
            request.setAttribute("styles", result);
            RequestDispatcher view = request.getRequestDispatcher("result.jsp");
            view.forward(request, response); 
          }
        } 
```

的java文件：

```
 package com.example.model;

    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.util.*;

    public class CoffeeExpert {
       public List<Types> getTypes(String test) {

          ResultSet rs = null;
         List<Types> list = new ArrayList();
         String Name = "na";
         String PCANo = "NotFound";
         String IP = "NotFound";
         Types type=new Types(); 
         if (test.equals("ABC")) {
         try{
         Connection con = getConnection();
         String Query = "select * from Table1";
         // System.out.println(Query);

          rs = con.createStatement().executeQuery(Query);

                 while (rs.next()) {
                     type.setName(rs.getString(1));
                     type.setPCANo(rs.getString(2));
                     type.setIP(rs.getString(3));
                   System.out.println(Name+"  "+PCANo+"  "+IP);
                   list.add(type);
                   }
                   rs.close();
                   con.close();

               }catch (SQLException e) {
                System.out.println("SQLException");
                e.printStackTrace();
             }
         }
         else {
            System.out.println("Didn't find any data");
         }
         return(list);
       }

       public static Connection getConnection() {

             Connection con = null;
             String Res = "na";
             String BusinessUnit = "NotFound";
             ResultSet rs = null;
             try {
                 // Load the JDBC driver
                String driverName = "oracle.jdbc.driver.OracleDriver";

                // String driverName = "oracle.jdbc.OracleDriver";
                 Class.forName(driverName);
                 // Create a connection to the database
                 //Dev
                 String serverName = "xx.xx.xx.xx";
                 String portNumber = "1521";
                 String sid = "SSSS";
                 String url = "jdbc:oracle:thin:@" + serverName + ":" + portNumber + ":" + sid;
                 String username = "SSSSS";
                 String password = "password";
                 con = DriverManager.getConnection(url, username, password);
                  return con;
                  } catch (ClassNotFoundException e) {
                System.out.println("ClassNotFoundException");
                e.printStackTrace();
             } catch (SQLException e) {
                e.printStackTrace();
            }
            return con; 
          }
     } 
```

正如下面的解决方案中所建议的，另一个模型类

```
 package com.example.model;

    public class Types {
        private String Name;  
        private String PCANo;
        private String IP; 
        //constructors   //getter-setters 
        public String setName(String Name){     
            return this.Name = Name;  
         }   
         public String getName() { 
            return this.Name; 
         }
         public String setPCANo(String PCANo) { 
            return this.PCANo = PCANo;  
         }  
         public String getPCANo() {  
            return this.PCANo;   
         }  
         public String setIP(String IP) { 
                return this.IP = IP;  
             }  
             public String getIP() {  
                return this.IP;   
             }  
    } 
```

最终的 JSP 显示文件

```
<%@ page import="java.util.*" %>
<%@ page import="com.example.model.Types" %> 
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 

<html>
<body>
<h1 align="center">Final Data JSP View</h1>
<p>

<%

List<Types> styles = (List<Types>) request.getAttribute("styles");
if(styles!=null){
    for(Types type: styles){  
        out.println("<br/>" + type.getName() + " " + type.getPCANo()+ " " + type.getIP());  
        }  
    } 
%>
            </body>
</html> 
```

结果是只获取所有显示行数的最后一行，即数据库表有三行，最后一行显示了 3 次。

> ABC PCA100 XXX.1.0.0
> ABC PCA100 XXX.1.0.0
> ABC PCA100 XXX.1.0.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T02:53:08.543

您必须创建一个`model`代表 `Name`和的`PCANo`类`IP`。

```
public class Types
{
  private String name;
  private String pcaNo;
  private String ip;
  //constructors
  //getter-setters
} 
```

和类的`getTypes`方法返回`List<Types>`。`CoffeeExpert`

```
 public List<Types> getTypes(String type) {
     Connection con = getConnection();
     String Query = "select * from ABC";
     List<Types> list=new ArrayList();
     rs = con.createStatement().executeQuery(Query);

      while (rs.next()) {
         Types type=new Types();
         type.setName(rs.getString(1));
         type.setPcaNo(rs.getString(2));
         type.setIp(rs.getString(3));
         list.add(type);
      }
      rs.close();
      con.close();
    return list;
  } 
```

要显示`List<Types>` in .jsp 页面：

JSP 标签：

```
<%
  List<Types> styles = (List<Types>) request.getAttribute("styles");
  if(styles!=null){
    for(Types type: styles){
       out.println("<br/>" + type.getName() + " " + type.getPcaNo());
     }
  }
%> 
```

JSTL：

```
<c:forEach var="type" items="${styles}">
  <br/>
  <c:out value="${type.name}" />
  <c:out value="${type.pcano}" />
  <c:out value="${type.ip}" />
</c:forEach> 
```

参考 SO 线程：

1.  [JSTL FAQ](https://stackoverflow.com/tags/jstl/info) - 使用 JSTL 1.2 它需要单个[http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar](http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar) jar 文件。
2.  [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)

# .net - VB.Net 计算器错误值

> ID：11979937
> 
> 赞同：1
> 
> 时间：2012-08-16T02:31:50.963
> 
> 标签：.net, vb.net, console-application

我在 VB.Net 上编写了一个代码，要求用户输入两个数字，控制台程序将输出这两个数字的相加。但是我不知道为什么，当我运行程序时，输入的数字的返回值和答案完全错误。

这是代码：

模块模块1

```
Sub Main()
    Dim a As Integer = 0
    Dim b As Integer = 0
    Dim c As Integer = 0
    Console.Write("Write a number: ")
    a = Console.Read()
    Console.ReadLine()
    Console.Write("Write the second number:")
    b = Console.Read()
    c = a + b
    Console.ReadLine()
    Console.Write("Answer:")
    Console.WriteLine(a & "+" & b & "=" & c)
    Console.Read()
End Sub 
```

端模块

因此，当我运行程序时，会发生以下情况：

写一个数字：5 写第二个数字：3 答案：53+51=104

如您所见，返回值完全错误，我尝试了许多其他数字，但返回值仍然错误，我有点困惑。如果您能帮助我，那将是非常好的，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:44:15.713

`Console.Read()`返回一个与输入字符的字符代码相对应的整数。您假设您输入的数据被解释为十进制数字，但这是不正确的。

你真正想要设置`a`和`b`等于的是：

`Convert.ToInt32(Convert.ToChar(Console.Read()).ToString())`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:35:58.243

你在你的混合类型

```
Console.WriteLine(a & "+" & b & "=" & c) 
```

线。

53 是字符串“5”的数字表示，51 与“3”相同。

如果您要将输入更改为 5 和 5；它会打印。

53+53=106

作为一个有趣的实验，看看当你按下字母“a”而不是数字时会发生什么。

编辑 ：

请参阅 Smartcavemans 答案，了解解决您问题的正确语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T16:01:33.730

尝试这个：

```
Sub Main()
    Dim a As Integer = 0
    Dim b As Integer = 0
    Dim c As Integer = 0

    Console.Write("Write a number: ")
    a = Convert.ToInt32(Console.ReadLine())

    Console.Write("Write the second number:")
    b = Convert.ToInt32(Console.ReadLine())

    c = a + b

    Console.Write("Answer:")
    Console.WriteLine("{0} + {1} = {2}", a, b, c)

    Console.ReadLine
End Sub 
```

注意：如果您输入任何不是有效整数的内容，这可能会引发异常。

# java - 当其他人（从另一台计算机）登录时，用户记录的更改

> ID：11979942
> 
> 赞同：0
> 
> 时间：2012-08-16T02:32:27.793
> 
> 标签：java, tomcat, servlet-filters

我真的需要任何帮助。我有一个在 tomcat 6 上运行 PrimeFaces 的 JSF 应用程序。

我以为我已经完成了应用程序，但是在测试它时，我发现了一个巨大的问题。当我在计算机 1 上使用用户（例如“admin”）登录应用程序，然后在计算机 2 上使用另一个用户（例如“peter”）登录时，computer1 现在无法访问允许用户 admin 访问的页面。如果我稍后以管理员用户身份再次登录计算机 1，那么现在在计算机 2 中，彼得可以访问所有允许管理的页面。

就像我对所有的 tomcat 会话或类似的东西都有一个会话。

我搜索了抛出我的应用程序，但没有发现 @applicationScoped 的任何内容，我拥有所有 @sessionScoped bean。

我不知道该怎么办。请帮忙。

我在这里附上我的自定义过滤器：

```
public abstract class AbstractLoginFilter implements javax.servlet.Filter {

protected ServletContext servletContext;

@Override
public void init(FilterConfig filterConfig) {
    servletContext = filterConfig.getServletContext();
}

@Override
public void doFilter(
        ServletRequest request, ServletResponse response, FilterChain chain)
        throws IOException, ServletException {
    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse resp = (HttpServletResponse) response;
    String pageReq = req.getRequestURL().toString();        
    HttpSession session = req.getSession(false);

    String[] temp = pageReq.split("/faces", 2);

    String url = temp[1];
    resp.setCharacterEncoding("UTF-8");
    req.setCharacterEncoding("UTF-8");

    if ("/login.xhtml".equals(url)) { 

        continueExecution(chain, request, response);
    } else {

        if (session == null) {

            //session timeout check.
            if (req.getRequestedSessionId() != null && !req.isRequestedSessionIdValid()) {

                System.out.println("La sesión ha expirado");
                session = req.getSession(true);

                //si es un ajax
                if ("partial/ajax".equals(req.getHeader("Faces-Request"))) {
                    resp.setContentType("text/xml");
                    resp.getWriter().append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>").printf("<partial-response><redirect url=\"%s\"></redirect></partial-response>", "/Autorack/faces/login.xhtml");
                } else {
                    resp.sendRedirect("/Autorack/faces/login.xhtml");
                }
            }
        } else {
            if (Global.getLoggedUser() == null) {
                resp.sendRedirect("/Autorack/faces/login.xhtml");
            } else {
                if (isPublicPage(url) || isAuth(url)) {
                    continueExecution(chain, request, response);
                } else {

                    resp.sendRedirect("/Autorack/faces/noAutorizacion.xhtml");
                }
            }
        }
    }
}

private void continueExecution(FilterChain chain, ServletRequest request, ServletResponse response) throws ServletException, IOException {
    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse resp = (HttpServletResponse) response;

    //when i make a BACK
    if (!req.getRequestURI().startsWith(req.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) { // Skip JSF resources (CSS/JS/Images/etc)
        resp.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        resp.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        resp.setDateHeader("Expires", 0); // Proxies.
    }
    chain.doFilter(request, response);
}

private boolean isPublicPage(String url) {
    List<String> urlsPublicas = new ArrayList<String>();
    urlsPublicas.add("/inicio.xhtml");
    urlsPublicas.add("/noAutorizacion.xhtml");
    urlsPublicas.add("/usuario/CambioPassword.xhtml");

    return urlsPublicas.contains(url);

}

@Override
public void destroy() {
}

/**
 * logic to accept or reject access to the page, check log in status
 * @return true when authentication is deemed valid
 */
protected abstract boolean isAuth(String reqPage);
} 
```

这是我的 web.xml

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<filter>
    <description>Customizable Filter</description>
    <filter-name>customFilter</filter-name>
    <filter-class>com.oriuken.autorack.security.LoginFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>customFilter</filter-name>
    <url-pattern>*.xhtml</url-pattern>                
</filter-mapping>
<error-page>
    <error-code>401</error-code>
    <location>/noAutorizacion.xhtml?faces-redirect=true</location>
</error-page>
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>30</session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list>
<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>casablanca</param-value>
</context-param>
<context-param>
    <param-name>primefaces.PUSH_SERVER_URL</param-name>
    <param-value>ws://localhost:8088</param-value>
</context-param>
<context-param>
<param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
<param-value>true</param-value> 
```

感谢您提供任何线索！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:28:30.170

而不是使用

```
Global.getLoggedUser() 
```

获取一些`ThreadLocal`我们已经实施的方法来实现相同的目标。

这是一些可能对您有所帮助的代码片段...

```
public class UserHolder {

private static ThreadLocal<User> userThreadLocal = new ThreadLocal<User>();

private static Log log = LogFactory.getLog(UserHolder.class);

public UserHolder(User user) {
    if (userThreadLocal.get() == null) {
        userThreadLocal.set(user);
        log.debug("User bound to thread " + user.getUsername()); 
    } else {
        log.debug("User already bound to thread " + user.getUsername());
    }
}

public static User getUser() {
    return userThreadLocal.get();
}

public static void setUser(User user) {
        userThreadLocal.set(user);
}

public static void remove() {
    userThreadLocal.remove();
}
} 
```

`UserHolder`在应用程序过滤后身份验证中，我们通过从会话变量中读取用户来设置用户，例如：

```
 new UserHolder((User) session.getAttribute("USER_ATTR_KEY"));
 // deliver request to next filter
 chain.doFilter(request, response); 
```

# apache-flex - 在 Flex 中关闭视图内的标注

> ID：11979943
> 
> 赞同：0
> 
> 时间：2012-08-16T02:32:37.700
> 
> 标签：apache-flex, flex-spark, callout

我在标注中有这个 ViewNavigator，标注使用 firstView="views.ListMenusHomeView" 在其中显示一个视图。现在如何关闭 ListMenusHomeView 的标注？希望有人可以提供帮助。

这是我的标注代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Callout xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark"
           contentBackgroundAppearance="none"
           height="300" width="300"> 
    <fx:Declarations>
        <fx:XML id="menu" source="xmldata/menu2.xml" /> 
    </fx:Declarations>

    <fx:Script>
        <![CDATA[

            import spark.events.PopUpEvent;
            protected function back(event:MouseEvent):void {

                if(viewNav.length>1)
                    viewNav.popView();
            }

        ]]>
    </fx:Script>

    <s:ViewNavigator id="viewNav" width="100%" height="100%" firstView="views.ListMenusHomeView">
        <s:navigationContent>
            <s:Button label="Back" click="back(event)"/>
        </s:navigationContent>
        <s:actionContent>
            <s:Button label="Cancel" click="close(false)"  emphasized="true"/>
        </s:actionContent>
    </s:ViewNavigator>

</s:Callout> 
```

您会看到有一个 ViewNavigator 包含 ListMenusHomeView。这是 ListMenusHomeView 的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="Main Menu" creationComplete="onCreationComplete()">

<fx:Declarations>
    <fx:XML id="menu" source="xmldata/menu2.xml" /> 
</fx:Declarations>

<fx:Script>
    <![CDATA[

        import com.adobe.serializers.xml.XMLDecoder;

        import mx.collections.ArrayCollection;

        import spark.events.IndexChangeEvent;

        [Bindable]
        private var dataArray:ArrayCollection = new ArrayCollection();  

        private var object:DataArray = new DataArray();

        private function onCreationComplete() : void{

            var decoder:XMLDecoder = new XMLDecoder();
            var resultObj:Object = decoder.decode(menu);    

            dataArray = object.onCreationComplete(menu, menu.menuitem, resultObj, resultObj.menuitem); 

        }

        protected function list1_changeHandler(event:IndexChangeEvent):void
        {

        }

    ]]>
</fx:Script>

<s:List id="tileLayout"
        width="100%" height="100%"
        verticalScrollPolicy="off" horizontalScrollPolicy="on"
        pageScrollingEnabled="true" dataProvider="{dataArray}"
        itemRenderer="renderers.iconList2" change="list1_changeHandler(event)">
    <s:layout>
        <s:TileLayout orientation="columns" requestedRowCount="3" 

                      verticalGap="20" horizontalGap="20"/>

    </s:layout>

</s:List> 
```

现在，每当我单击 ListMenusHomeView 中的图标时，我都想关闭 MyCallout。函数 list1_changeHandler(event:IndexChangeEvent) 负责那个。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:30:06.697

该类`Callout`有一个`close()`方法，因此您基本上只需要访问`ListMenusHomeView`s `parentDocument`（这将是您的“viewNav” `ViewNavigator`）及其`parentDocument`应该是您的 ListMenusHomeView。

我尚未对其进行测试，但您可能会摆弄`parentDocument`,`parent`和`owner`属性来访问正确的对象。通过简单的跟踪尝试它们，您将立即启动并运行。

# c++ - 线程池的 C++ std::thread 停止条件

> ID：11979945
> 
> 赞同：0
> 
> 时间：2012-08-16T02:32:58.643
> 
> 标签：c++, multithreading

我正在编写一个程序，该程序利用线程池来搜索指定扩展名的文件以匹配正则表达式。

我的线程池如下所示：

```
for( int i = 0; i < _nThreads; ++i )
    {
            _threads.push_back( thread( &ThreadPool::GrepFunc, this ) );
    } 
```

运行函数如下所示：

```
void ThreadPool::GrepFunc()
{
    // implement a barrier

while( !_done )
{
    while( !_tasks.empty() )
    {
        fs::path task;
        bool gotTask = false;
        {
            lock_guard<mutex> tl( _taskMutex );
            if( !_tasks.empty() )
            {
                task = _tasks.front();
                _tasks.pop();
                gotTask = true;
            }
        }

        if( gotTask )
        {
            if( std::tr2::sys::is_directory( task ) )
            {
                for( fs::directory_iterator dirIter( task ), endIter; dirIter != endIter; ++dirIter )
                {
                    if( fs::is_directory( dirIter->path() ) )
                    {
                        { lock_guard<mutex> tl( _taskMutex );
                        _tasks.push( dirIter->path() ); }
                    }
                    else
                    {
                        for( auto& e : _args.extensions() )
                        {
                            if( !dirIter->path().extension().compare( e ) )
                            {
                                SearchFile( dirIter->path() );
                            }
                        }
                    }
                }
            }
            else
            {
                for( auto& e : _args.extensions() )
                {
                    if( !task.extension().compare( e ) )
                    {
                        SearchFile( task );
                    }
                }
            }
        }
    }
}
} 
```

本质上，该程序从用户那里接收一个初始目录，并将递归地搜索它和所有子目录以查找与扩展名匹配的文件，以寻找正则表达式匹配。我无法弄清楚如何确定何时达到 _done 的停止情况。我需要确保初始目录中的所有目录和文件都已被扫描，并且在我重新加入线程之前，_tasks 中的所有项目都已完成。任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:55:30.750

我建议有一个线程（可能是产生文件处理线程的同一线程）专门用于递归文件系统搜索匹配文件；它可以将文件添加到工作队列中，文件搜索线程可以从中获取工作。您可以使用条件变量来协调这一点。

正如您所发现的，协调关机有点棘手。文件系统搜索线程完成搜索后，它可以设置一些对工作线程可见的“刚刚完成排队的内容”标志，然后向它们发出信号以唤醒并尝试处理另一个文件：如果他们发现文件/工作队列为空他们退出。然后文件系统搜索线程加入所有工作人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:04:53.703

关于您在托尼回答的评论中更新的问题，我建议有两种任务：一种用于递归探索子目录，另一种用于 grep。你需要一个`SynQueue<TaskBase>`,`TaskSubDir: TaskBase`和`TaskGrep: TaskBase`. `TaskBase`具有虚拟接口功能`Run()`。然后线程可以从重复弹出`SynQueue`，并调用`TaskBase::Run()`：

1.  如果它得到 a `TaskSubDir`，那么它将在给定路径中找到子目录和文件： (a) 如果它是一个文件夹，则将新`TaskSubDir`的子目录添加到`SynQueue`，以便使用线程池递归搜索文件夹；(b) 如果它是具有匹配扩展名的文件，则将 a 推`TaskGrep`送到`SynQueue`.
2.  如果它得到一个`TaskGrep`，那么它执行`SearchFile`.
3.  如果队列为空，则`break`退出工作函数。

这样做，您不需要有 2 个队列并在启动 grep 队列之前等待子目录队列完成。

所以回答你的问题：要确定加入条件，你需要做的就是等待所有线程`break`退出工作函数。

最后说明：`_tasks.empty()`您的代码中的第一个不受互斥锁保护，可能会受到竞速条件的影响。我建议你将互斥锁和 cond_var 隐藏在一个`SynQueue`类中，并添加一个`SynQueue::empty()`成员函数（受互斥锁保护）。如果您关心效率，您可能需要考虑*使用无锁队列*来替换`SynQueue`.

# php - 如何加入每一行的输入并保存到数据库

> ID：11979951
> 
> 赞同：2
> 
> 时间：2012-08-16T02:33:39.620
> 
> 标签：php, codeigniter, checkbox, codeigniter-2

我有这个问题

这是我 view.php 的显示

```
id menu  +1 +2 +3

 1   bla_1 [] [] []
 2   bla_2 [] [] []
 3   bla_3 [] [] [] 
```

这是我的视图代码

```
<?php $i=1; foreach ($test as $row) : ?>
<tr>
<td><input type='hidden' name='id[]' value="<?php echo $row->menu_id ?>" /></td>
<td><input type="text" name="Menu" value="<?php echo $row->menu_nama ?>" disabled <td>
<td><input type="checkbox" name="<?php echo 'menu_id[]'; ?>" value="+1"  /></td>
<td><input type="checkbox" name="<?php echo 'menu_id[]'; ?>" value="+2"  /></td>
<td><input type="checkbox" name="<?php echo 'menu_id[]'; ?>" value="+3"  /></td>
</tr>
<?php $i++; endforeach ; ?> 
```

如果我选中第一个复选框，我将获得 +1，第二个复选框我将获得 +2

我的目标是加入每个选中复选框的输入并根据 id 保存到数据库

这是我在模型上加入复选框值的代码

```
$menu_id= $this->input->post('menu_id');        
        $menu_idc = '';

        $count = count($menu_id);
        $i=0;
        foreach($menu_id as $e){ 
            if($i < $count -1)
            {
                $menu_idc .= $e.'';
                echo $i ;
            }
            else{
                $menu_idc .= $e.'+';
                }
                $i++;
            }
            var_dump($menu_idc);
            die; 
```

例如，如果我选中此复选框

```
 id menu   +1   +2  +3

         1   bla_1 [v] [v] [v]
         2   bla_2 []  [v] []
         3   bla_3 []  []  [v] 
```

使用我编写的代码，我将得到 +1+2+3+2+3+（第 1 行 +1+2+3，第 2 行 +2，第 3 行 +3）

我想要的是从每一行获取值并保存到数据库表中

+1+2+3+ 存入数据库

+2+ 存入数据库

+3+ 存入数据库

```
 Database
id   | isi     |
1    | +1+2+3+ |
2    | +2+     |
3    | +3+     | 
```

我想我必须在我的模型上循环代码，但我不知道我必须写什么代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:33:46.797

你需要的是一个二维数组。第一个维度用于行，第二个维度用于列。

首先稍微更改您的标记以使提交的值是二维的：

```
<?php $i=1; foreach ($test as $row) : ?>
  <tr>
    <td><input type='hidden' name="menu[<?php echo $i ?>][id]" value="<?php echo $row->menu_id ?>" /></td>
    <td><input type="text" name="menu[<?php echo $i ?>][menu]" value="<?php echo $row->menu_nama ?>" disabled <td>
    <td><input type="checkbox" name="menu[<?php echo $i ?>][plus][]" value="+1"  /></td>
    <td><input type="checkbox" name="menu[<?php echo $i ?>][plus][]" value="+2"  /></td>
    <td><input type="checkbox" name="menu[<?php echo $i ?>][plus][]" value="+3"  /></td>
  </tr>
<?php $i++; endforeach ; ?> 
```

此代码应该可以正常工作：

```
$menus = $this->input->post('menu');        

foreach ($menus as $menu)
{
  $id = $menu['id'];
  $name = $menu['name'];
  $menu_ids = "";

  if (is_array($menu['plus']))
  {
    $menu_ids = join('', $menu['plus'])).'+';
  }

  // here you can save it now by executing a sql update or whatever
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:33:16.830

您需要一个二维数组，第一维是行，第二维是复选框。在表格中，您应该有：

```
<td><input type="checkbox" name="<?php echo 'menu_id['.$row->menu_id.'][]'; ?>" value="+1"  /></td>
<td><input type="checkbox" name="<?php echo 'menu_id['.$row->menu_id.'][]'; ?>" value="+2"  /></td>
<td><input type="checkbox" name="<?php echo 'menu_id['.$row->menu_id.'][]'; ?>" value="+3"  /></td> 
```

然后在您的处理脚本中，您可以执行以下操作：

```
foreach ($_REQUEST['id'] as $id)
  $isi[$id] = implode('', $menu_id[$id]); 
```

# python - 是否可以通过 django 中的 URL 查询文件？

> ID：11979952
> 
> 赞同：1
> 
> 时间：2012-08-16T02:33:41.253
> 
> 标签：python, django, file, django-models, django-queryset

如果我有一个由 FileField 组成的模型 MyImages，有没有办法可以通过文件的 URL 来查询它？我知道 Django 允许类似的东西：

```
my_image.file.url 
```

但我不确定 URL 是否可以在 FileField 中查询。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:41:27.010

您可以在模型中创建一个 url 字段并覆盖 save 方法以将其设置为 file.url，因此您可以通过此 url 查询您的模型。

```
class MyModel(model.Model):
    image=models.ImageField(upload_to='folder')
    url=models.CharField(...) 

    def save(self, *args, **kwargs):
        self.url = self.image.url
        super(Model, self).save(*args, **kwargs) 
```

然后将 url 字段隐藏在表单中（在模型字段上设置 editable=False。因此，通过 ModelForm 从模型创建的任何表单都不会包含该字段。[更多信息在这里](http://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)）

# jquery - 在调整大小时启用/禁用 jquery 调用

> ID：11979954
> 
> 赞同：2
> 
> 时间：2012-08-16T02:33:43.243
> 
> 标签：jquery

我正在构建一个响应式站点，因此根据窗口的大小需要不同的功能。

所以如果屏幕宽度小于 964px，我想禁用我的 jquery 调用。如果它超过 964 像素，我想启用相同的调用。

这就是我得到的：http: [//jsfiddle.net/frogfacehead/2Mdem/1/](http://jsfiddle.net/frogfacehead/2Mdem/1/)

问题是，禁用部分不起作用。一旦启用，即使屏幕低于 964 像素，它也不会禁用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:51:58.417

当屏幕尺寸大于 964px 时，您将动画绑定到 .test 元素，因此要取消绑定，您需要这样做

```
else {
        $body.html('Viewport is ' + mywidth + 'px wide. <span class="disable">[Disable Animation]</span>');
        $(".test").unbind("hover");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:52:21.997

当页面大小发生变化时，与其使用所有这些资源将悬停函数附加到该元素，为什么不在这些回调函数期间检查页面大小呢？

```
$(".test").hover(function() {
            if (width > 964) {
                $(this).animate({
                    width: "100px"
                })
            }
        }, etc. 
```

问题是您添加了一个函数来处理悬停事件，但该函数永远不会被删除。随着页面宽度的变化，您正在重复添加它。只需添加一次，然后检查该函数的处理程序中应该发生的事情。作为正确工作的奖励，它应该更有效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T03:22:46.533

第一个问题是您正在加载`.test`基于您的调整大小事件绑定的悬停/动画绑定队列。

您的实现可以改进（见下文），但如果您想在调整大小完成后触发函数调用，请考虑以下事项。

```
var resizeTimeout;
$win.resize(function() {
  clearTimeout(resizeTimeout);
  // handle normal resize as needed
  resizeTimeout = setTimeout(function() {
    // handle after finished resize
    checkwidth($win.width());
  }, 250); // delay by quarter second
}); 
```

您可以考虑这种方法：

```
// pull hover binding out, setup once to prevent building up queue
$(".test").hover(function() {
  if( $(".test").data('annimate') ){
    $(this).animate({
      width: "100px"
    });
  }
}, function() {
  if( $(".test").data('annimate') ){
    $(this).animate({
      width: "50px"
    });
  }
});

function checkwidth(mywidth) {
  if (mywidth > 964) {
    $body.html('Viewport is <strong>' + mywidth + 'px</strong> wide. <span class="enable">[Enable Animation]</span>');
    // set flag to allow annimation
    $(".test").data('annimate', true);
  } else {
    $body.html('Viewport is ' + mywidth + 'px wide. <span class="disable">[Disable Animation]</span>');
    // set flag to prevent annimation
    $(".test").data('annimate', false);
  }
} 
```

# facebook - 如何通过本机 Facebook oauth 登录 facebook？

> ID：11979962
> 
> 赞同：1
> 
> 时间：2012-08-16T02:34:59.683
> 
> 标签：facebook, oauth

通常我们在 iphone 应用程序上使用弹出式 webview 连接 facebook。但是，我看到了一些应用程序，通过 facebook 原生应用程序授权链接到 facebook，如果 iphone 已经安装在官方应用程序上。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:07:27.503

您的应用将包含适用于 Facebook 的 iOS 或 Android SDK。

[https://developers.facebook.com/docs/sdks/](https://developers.facebook.com/docs/sdks/)

具体如何使用 iOS 登录： [https ://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

和安卓： [https ://developers.facebook.com/docs/reference/androidsdk/authentication/](https://developers.facebook.com/docs/reference/androidsdk/authentication/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T03:05:30.677

这是通过 Facebook iOS SDK 完成的，在 GitHub 上可用：[https ://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

这是无缝的，如果设备上安装了应用程序，Facebook 会处理这种情况。这是通过“fb://”URL 方案完成的。[你可以在这里](https://stackoverflow.com/questions/4756728/seamless-facebook-login-experience-for-ios-using-custom-url-scheme)了解更多

要使用 SDK 在 Facebook 上进行身份验证，请执行以下操作：

```
Facebook *facebook = [[Facebook alloc] init];
NSArray *fb_perms =  [NSArray arrayWithObjects:@"email", @"user_photos", @"offline_access",nil];
[facebook authorize:fb_perms delegate:self]; 
```

不要忘记释放！

# javascript - jquery 每个成 js 对象

> ID：11979965
> 
> 赞同：0
> 
> 时间：2012-08-16T02:35:05.837
> 
> 标签：javascript, jquery

我试图创建一个包含数据的最终对象，所有元素都是数字，除了其中一个，那个是容纳更多对象。这是我到目前为止所拥有的。

```
var data = '';
$(".item-element").each(function(e) {
    var id  = this.id;
    var qty = parseInt($("#" + this.id + " .element-qty").text());

});

var sale_data = {
                 "id"     : $('#sales_id').val(),
                 "cid"    : $('#sales_custom').val(),
                 "status" : $('#sales_status').val(),
                 "data"   : {
                             "services" : service_data,
                             "products" : product_data
                            },
                 "total"  : Number($('#sale-total').text().substr(1)),
                }; 
```

我试图让 product_data 从每个循环中的 id 和 qty 的值中保存以下类型结构。基于每个循环的最终数据条目看起来像这样。

```
 "data"   : {
                             "services" : service_data,
                             "products" : {
                                            {id:qty},
                                            {id:qty},
                                            {id:qty}
                                          }
                            }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:50:46.313

[我想你想要的是这样的](http://jsfiddle.net/2HC5T/)

```
var product_data = {};
$.each($('.item-element'), function(i,obj){
    product_data[this.id] = $("#" + this.id + " .element-qty").text();
});

var sale_data = {
    "id"     : $('#sales_id').val(),
    "cid"    : $('#sales_custom').val(),
    "status" : $('#sales_status').val(),
    "data"   : {
        "services" : service_data,
        "products" : product_data
    },
    "total"  : Number($('#sale-total').text().substr(1)),
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:54:33.950

看起来“产品”更适合作为数组。

考虑以下。

```
...
"data" : {
  "services" : service_data,
  "products" : []
},
... 
```

根据您提供的内容，您可以更新每个循环以使用与此类似的内容。

```
$(".item-element").each(function(e) {
  sale_data.data.products.push( { this.id : parseInt($("#" + this.id + " .element-qty").text()) } );
}); 
```

# python - 循环遍历 Python 中的映射

> ID：11979969
> 
> 赞同：2
> 
> 时间：2012-08-16T02:35:30.507
> 
> 标签：python

我想像这样创建一个映射：

```
assets = {'first': ['type1','type2','type3'], 'second': ['type1','type2']} 
```

只是一个简单的映射*（关联数组）*。我不确定上面的语法是否正确*（python 的新手）*，但这就是我想要的想法。

现在，我希望能够遍历映射：

```
for key, value in assets: 
```

但这会返回一个错误：

```
ValueError: too many values to unpack 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:36:13.207

尝试：

```
for key, value in assets.items(): 
```

a 的默认迭代器`dict`只是键值。的使用`items()`产生一系列（键，值）元组。

# django - EmailMessage“发件人”问题

> ID：11979971
> 
> 赞同：0
> 
> 时间：2012-08-16T02:35:48.257
> 
> 标签：django, email

我正在制作一个联系表格来接收来自用户的电子邮件。我正在使用 EmailMessage（django 1.3）。问题是，我能够接收电子邮件，但“发件人”或“发件人”显示 email_host_user 电子邮件而不是用户的电子邮件。

所以如果用户有电子邮件地址 user@gmail.com，当我收到电子邮件时

```
from: email@gmail.com
subject: some subject
to: moderator@email.com 
```

代替

```
from: user@gmail.com
subject: some subject
to: moderator@email.com 
```

这是设置的一部分

```
EMAIL_HOST = 'smtp.googlemail.com'
EMAIL_HOST_PASSWORD = 'password'
EMAIL_HOST_USER = 'email@gmail.com'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
REVIEW_MODERATOR ='moderator@email.com'

#heres part of the helpers.py
def run(self):
            html = get_template(self.kwargs['template'])
            html_content = html.render(Context(self.kwargs['context']))
            msg = EmailMessage(
                       self.kwargs['subject'],
                       html_content,
                       self.kwargs['sender'],
                       [self.kwargs['email']],
                       bcc=[a[1] for a in settings.ADMINS])
            msg.content_subtype = "html"  # Main content is now text/html
            try:
                path = self.kwargs['file_path']
            except KeyError:
                pass
            else:
                msg.attach_file(path)
            msg.send()

#heres part of the contact view

if contact_form.is_valid(): 
            cdata = contact_form.cleaned_data

            c={'name':cdata['name'], 'email':cdata['email'],'message':cdata['message']}    

            EmailThread(**{
                'email':settings.REVIEW_MODERATOR,
                'sender':cdata['email'],
                'subject':email_subject,
                'context':c,
                'template':template
            }).start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:20:37.943

Gmail 不允许您以任意发件人的身份发送邮件。

解决这个问题的方法（我正在处理确切的问题：向我们发送电子邮件的客户服务表格）是使用一种非常便宜的 SMTP 服务，或者只是使用仍然非常实用的“回复”标题（电子邮件来自 me@gmail.com 但单击回复将指向回复地址）。

# linkedin - 在 LinkedIn 上进行身份验证

> ID：11979973
> 
> 赞同：0
> 
> 时间：2012-08-16T02:35:50.893
> 
> 标签：linkedin

我在Linkedin上创建了两个应用程序，但是当我进行身份验证时，它显示了两个不同的对话框，我不知道为什么，每个人都可以帮助我吗？？？？？？

1.第一个显示验证对话框的应用程序：

[http://www.freeimagehosting.net/do7xm](http://www.freeimagehosting.net/do7xm)

2.第二个显示验证对话框的应用程序：

[http://www.freeimagehosting.net/do7xm](http://www.freeimagehosting.net/xorio)

我想更改第二个应用程序以验证相同的第一个应用程序，但我不知道，你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:21:01.423

LinkedIn 最近[更改了他们的身份验证流程](https://developer.linkedin.com/blog/making-it-easier-you-develop-linkedin)，引入了细粒度用户权限的概念。

您看到的第二个对话框正在使用这个与应用程序密钥绑定的新流程。基本上，第一个应用程序使用的是在 8 月 7 日之前发布的密钥，您将看到旧的身份验证屏幕；对于较新的应用程序密钥，您将看到新的基于权限的屏幕。

# java - HTML 表 id 和类 id

> ID：11979978
> 
> 赞同：1
> 
> 时间：2012-08-16T02:36:29.527
> 
> 标签：java, html, css, jsoup

如何在以下网址中找到大表的表 ID：[http ://en.wikipedia.org/wiki/States_and_territories_of_India](http://en.wikipedia.org/wiki/States_and_territories_of_India)

我能够看到课程`wikitable sortable jquery-tablesorter`

这是包含印度各州列表的表格。我能够从萤火虫确认此表 =`wikitable sortable jquery-tablesorter`具有状态列表。如何获取该表的 ID？

获取该表中所有名称的 CSS 等效项是什么？

我只想得到州......第一列。我正在使用[jsoup](http://jsoup.org/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:24:26.567

如果这仍然是悬而未决的问题，您可以通过以下方式获取印度的州列表：

```
public static void main(String[] args) throws IOException
    {

        Document doc = Jsoup.connect("http://en.wikipedia.org/wiki/States_and_territories_of_India").get();

        Elements tables = doc.select("table");

        for (Element table : tables) {
            Element tableCaption = table.getElementsByTag("big").first();
            if (tableCaption != null && tableCaption.text().equals("States of India")) {
                Document statesDoc = Jsoup.parse(table.toString());
                Elements states = statesDoc.select("tr td:eq(0)");
                for (Element state : states) {
                    System.out.println(state.text().replaceAll("\\[\\d\\]", ""));
                }
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:42:17.037

所以看起来你正试图截屏这个表。

你的问题的答案是那个特定的**没有 id**`<table>`。

开始表格的 html 是：

```
<table class="wikitable sortable jquery-tablesorter" style="width:70%;"> 
```

如您所见，该元素没有`id`属性。

您使用哪些库来解析 HTML？在 JavaScript 中，您可以使用`document.getElementsByClassName('wikitable')[0]`并在页面上唯一地找到它。但是您将使用的语法将取决于您可以使用哪种 HTML DOM 遍历。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T02:42:30.437

该`id`元素是可选的；并非页面上的每个元素都有一个。这张表没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T02:51:30.733

那张桌子上没有身份证。如果您想获取具有“wikitable”类的表的内容。将此代码与[Jsoup](http://jsoup.org)一起使用

```
package com.main;

import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

public class Main {
    public static void main (String args[]){
        Document doc;
        try {

            doc = Jsoup.connect("http://en.wikipedia.org/wiki/States_and_territories_of_India").get();
            Elements newsHeadlines = doc.select("table.wikitable").get(0).select("td:eq(0) a");

            System.out.println(newsHeadlines.html());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T03:07:05.500

使用 jQuery。你想要第一个带有类 wikitable sortable jquery-table-sorter 的表。

```
$(".wikitable.sortable.jquery-table-sorter").first() 
```

虽然，css 类可以随时更改，所以我不会依赖它。让可以编辑 wiki 页面的人为所有表添加一个 id 可能是值得的。

# module - Sitecore 日历模块未在周视图中显示

> ID：11979979
> 
> 赞同：1
> 
> 时间：2012-08-16T02:36:30.357
> 
> 标签：module, calendar, sitecore

在我们的员工内部网上实施了 Sitecore (6.5 rev.120427) 日历模块 (2.4.0 rev.110602)。

除了在 IE 中从“日”或“月”视图切换到“周”视图（所有其他浏览器工作正常）之外，一切都很好。当尝试切换到“周”视图时，应该显示时间和事件的日历部分根本不会出现。

当我直接进入具有“周”视图的页面时，它将显示，但只要我单击“切换到周视图”按钮，该部分就会消失。

有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:04:53.903

我能够在“可比性视图”中的 IE7 和 IE9 中重现这一点。似乎将高度`0px`应用于周视图 - 可能是为了尝试将 HasLayout 应用于元素以实现 IE6 兼容性。

我的建议是联系 Sitecore 支持并让他们知道这一点。我听起来像是一个简单的修复，他们可以提供修复。

同时，您可以使用以下 CSS 规则覆盖高度设置：

```
<style type="text/css">
    table.weekGrid tr > td > div { height: auto !important; /* use a fixed height in px if you need to preserve scrolling */ }
</style> 
```

# notifications - 如何向 Growl/NotifyOSD 发送 RubyMine 通知？

> ID：11979980
> 
> 赞同：2
> 
> 时间：2012-08-16T02:36:30.703
> 
> 标签：notifications, rubymine, rake-task, growl

我只想在从 Rubymine 开始的一些长 rake 任务之后发送命令行通知（如“notify-send 'done'”）。也许我需要一些 rake 包装器？感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T11:47:08.583

我不知道 RubyMine 但这应该在终端中执行：

```
rake db:setup && growlnotify -m 'Finished DB setup' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T09:56:22.660

1.  将`terminal-notifier`gem 添加到 Gemfile
2.  在 Project/bin/rake 文件中添加几行：[https ://gist.github.com/skydan/f333cd1fc2900f4b4ed7](https://gist.github.com/skydan/f333cd1fc2900f4b4ed7)

# java - 列表数组（Int，Int）

> ID：11979981
> 
> 赞同：3
> 
> 时间：2012-08-16T02:36:33.033
> 
> 标签：java

正如您将看到的，我对面向对象编程相当陌生。我正在尝试自学，但被困在这一点上，无法弄清楚该怎么做。

我正在尝试编写一些代码来将矩形网格布局为行和列。想想“把小方块放在一个大矩形上”。用户将输入他们有多少个“小方块”。我的目标是将这个整数映射到行和列的最佳布局中。

用户可以输入从 20 到 100 的任何整数。对于 81 个不同的可能条目中的每一个，我已经确定了在行和列中布置这些小方块的最佳方式。我现在需要做的是将这 81 种不同的布局放入我的程序中，然后识别并返回适用于用户输入的布局。

由于只有 81 个值并且它们的范围是连续的整数，因此我认为数组是最好的主意（而不是映射、哈希映射、向量等）。这是我到目前为止所拥有的。这有点乱，但我想你会明白我在做什么。谁能帮我？我似乎无法返回我需要的行和列值。

谢谢！

```
public static void getLayout (int numSquares) {

    int rows;
    int columns;        

    Layouts myLayout = new Layouts();

    rows = myLayout[numSquares].r; //this is where it fails
    columns = myLayout[numSquares].c;
}

class RowCol<R, C> {

    /* Class Variables */
    public final R r;
    public final C c;

    public RowCol(R r, C c) {
        this.r = r;
        this.c = c;
    }

    public R getRow() {return r;}
    public C getCol() {return c;}
}

class Layouts {

    RowCol[] myLayouts;

    public Layouts() {

        /* Set the numbers of Rows and Columns for each possible
         * number of squares requested.
         */
            myLayouts[20] = new RowCol(5, 4);   // 20 Problems
            myLayouts[21] = new RowCol(7, 3);   // 21 Problems
            myLayouts[22] = new RowCol(5, 4);   // 22 Problems
            myLayouts[23] = new RowCol(5, 4);   // 23 Problems
            myLayouts[24] = new RowCol(6, 4);   // 24 Problems
            myLayouts[25] = new RowCol(5, 5);   // 25 Problems
            myLayouts[26] = new RowCol(6, 4);   // 26 Problems
            myLayouts[27] = new RowCol(6, 4);   // 27 Problems
            myLayouts[28] = new RowCol(7, 4);   // 28 Problems
            //etc... 
```

编辑：应用下面的响应，我需要在 Layouts 类中实例化一个对象，我这样做了。然后，我修改了 getLayout 类以隔离返回的 RowCol 值。这是更新的课程。此时我的问题是我无法将行和列转换为整数，以便我可以这样使用它们。

```
public static void getLayout(int numSquares) {

    Layouts myLayout = new Layouts();
    RowCol myRC = myLayout.getLayout(numProbs);
    int rows = Integer.parseInt(myRC.getRow());
    int cols = Integer.parseInt(myRC.getCol());
} 
```

错误是：

> 没有找到适合 parseInt(Object) 方法的 Integer.parseInt(String) 方法不适用（实际参数 Object 无法通过方法调用转换转换为 String）方法 Integer.parseInt(String,int) 方法不适用（实际和形式参数列表长度不同）

编辑：解决。谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:53:08.667

我可以在那里看到一个快速的问题。Layouts 类不以任何方式支持基于索引的访问。所以下面的代码会报错：

```
rows = myLayout[numSquares].r; 
```

您可能希望在 Layouts 类中创建一个方法，该方法返回其私有数组 myLayouts，该数组可进一步与索引一起使用。

而且，正如 DaoWen 7 指出的那样，该数组需要在某个地方进行初始化。

我是用手机写的，所以不能输入太多:-P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:46:02.510

当您混合使用数组和泛型时，由于类型擦除会发生奇怪的事情。

我可能不会创建`RowCol`一个泛型类，而只是`int`用于字段类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T03:35:48.317

你初始化你的数组了吗？

```
RowCol[] myLayouts = new RowCol[81]; 
```

如果您不初始化数组，则`myLayouts`引用是，当您尝试分配或读取任何索引时`null`，您将得到一个。`NullPointerException`

**更新：**

您遇到的问题`parseInt`源于您在数组中使用原始类型的泛型这一事实。您在类的声明中具有类型参数`RowCol`（`class RowCol<R, C>`具有类型参数`R`和`C`），但是在声明 的实例时没有指定类型`RowCol`，因此它们只是默认为假定一切都是`Object`. 这应该解决它：

```
@SuppressWarnings("unchecked")
RowCol<Integer,Integer>[] myLayouts = new RowCol[81];
// . . .
myLayouts[20] = new RowCol<Integer,Integer>(5, 4);   // 20 Problems
myLayouts[21] = new RowCol<Integer,Integer>(7, 3);   // 21 Problems
// . . . 
```

由于 Java 对泛型和数组的限制，上面会生成一个警告，但是`@SuppressWarnings`注释应该处理它。您还可以通过使用`ArrayList`（具有完整的通用支持）而不是数组来完全避免这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T03:48:21.360

请在下面做

```
public static void getLayout (int numSquares) {

    int rows;
    int columns;        
    //Create object here currently if i create it then it will be my class specific
    Layouts myLayout = new Layouts();

    rows =myLayout.myLayouts[numSquares].r; //this is where it fails
    columns = myLayout.myLayouts[numSquares].c;
}

class RowCol<R, C> {

    /* Class Variables */
    public final R r;
    public final C c;

    public RowCol(R r, C c) {
        this.r = r;
        this.c = c;
    }

    public R getRow() {return r;}
    public C getCol() {return c;}
}

class Layouts {

    RowCol<Integer, Integer>[] myLayouts = new RowCol[81];

    public Layouts() {

        /* Set the numbers of Rows and Columns for each possible
         * number of squares requested.
         */
            myLayouts[20] = new RowCol<Integer, Integer>(5, 4);   // 20 Problems
            myLayouts[21] = new RowCol<Integer, Integer>(7, 3);   // 21 Problems
            myLayouts[22] = new RowCol<Integer, Integer>(5, 4);   // 22 Problems
            myLayouts[23] = new RowCol<Integer, Integer>(5, 4);   // 23 Problems
            myLayouts[24] = new RowCol<Integer, Integer>(6, 4);   // 24 Problems
            myLayouts[25] = new RowCol<Integer, Integer>(5, 5);   // 25 Problems
            myLayouts[26] = new RowCol<Integer, Integer>(6, 4);   // 26 Problems
            myLayouts[27] = new RowCol<Integer, Integer>(6, 4);   // 27 Problems
            myLayouts[28] = new RowCol<Integer, Integer>(7, 4);   // 28 Problems
            //etc...
    }
} 
```

# c# - 如何确定给定磁盘的 SATA 通道？

> ID：11979982
> 
> 赞同：7
> 
> 时间：2012-08-16T02:36:45.460
> 
> 标签：c#, .net, disk, hard-drive, sata

使用`DISKPART`命令行实用程序，我可以得到一个名为“位置路径”的东西，它似乎给了我我需要的东西，你可以`detail disk`在`diskpart`.

看来我可以通过此类以编程方式获取此信息：[MSFT_Disk](http://msdn.microsoft.com/en-us/library/windows/desktop/Hh830493%28v=vs.85%29.aspx)

我不确定如何获取此类的实例。我有一些使用`ManagementObjectSearcher`for`WMI`类的示例，但该方法对我不起作用，我也不确定`MSFT_Disk`' 在 Windows 7 中的可用性，因为该页面提到这是针对 Windows 8 的。

有谁知道获取 SATA 通道信息或磁盘“位置路径”的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:22:09.720

如果您不想使用 Windows 8，我相信 WMI 是可行的方法：

```
using System;
using System.Linq;
using System.Management;

namespace DiskScanPOC
{
    class Program
    {
        static void Main()
        {
            var managementScope = new ManagementScope();

            //get disk drives
            var query = new ObjectQuery("select * from Win32_DiskDrive");
            var searcher = new ManagementObjectSearcher(managementScope, query);
            var oReturnCollection = searcher.Get();

            //List all properties available, in case the below isn't what you want.
            var colList = oReturnCollection.Cast<ManagementObject>().First();
            foreach (var property in colList.Properties)
            {
                Console.WriteLine("Property: {0} = {1}", property.Name, property.Value);
            }

            //loop through found drives and write out info
            foreach (ManagementObject oReturn in oReturnCollection)
            {
                Console.WriteLine("Name : " + oReturn["Name"]);
                Console.WriteLine("Target Id: " + oReturn["SCSITargetId"]);
                Console.WriteLine("Port: " + oReturn["SCSIPort"]);
            }
            Console.Read();
        }
    }
} 
```

我没有打开我的机箱来验证 SATA 端口号，但上面的应用程序看起来在我的带有 3 个 SATA 硬盘驱动器的机器上给出了合理的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-22T07:52:39.460

如果您想获取位置路径，[SetupDiGetDeviceRegistryProperty](https://msdn.microsoft.com/en-us/library/windows/hardware/ff551967(v=vs.85).aspx)就是您要查找的函数。将属性值设置为`SPDRP_LOCATION_INFORMATION`。

我假设您已经知道如何枚举设备以获取`DeviceInfoSet`and `DeviceInfoData`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-09T08:03:56.567

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

using System.Management;

namespace Hard_Disk_Interface
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void btnCheck_Click(object sender, EventArgs e)
        {
            WqlObjectQuery q = new WqlObjectQuery("SELECT * FROM Win32_IDEController");
            ManagementObjectSearcher res = new ManagementObjectSearcher(q);
            lblHDDChanels.Text = string.Empty;
            foreach (ManagementObject o in res.Get())
            {
                string Caption = o["Caption"].ToString();

                lblHDDChanels.Text += Caption + "\n\n";
                if (Caption.Contains("Serial"))
                {
                    lblInterface.Text = "S-ATA";
                }
            }
        }
    }
} 
```

[![这是演示...](../Images/93106e8a6bcf230e21c3edd6820e0ad5.png)](https://i.stack.imgur.com/FGFc6.jpg)

注意：首先添加.net framwork 4.0的System.Management.dll的引用

# c# - 我想从 XML 文件加载数据并显示在列表框中？

> ID：11979986
> 
> 赞同：0
> 
> 时间：2012-08-16T02:37:46.683
> 
> 标签：c#, c#-4.0

我有一个三类：

首先是人：

```
 public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }

    public Person()
    {
    }

    public override string ToString()
    {
        return FirstName + " " +LastName + "\t" +Email;
    }
} 
```

二是：

```
 public class Student:Person
{

    public Student()
    {
    }
    public double AssessmentGrade { get; set; }
    public double AssignmentGrade { get; set; }

    public override string ToString()
    {
        return base.ToString() + "," +AssessmentGrade + "," + AssignmentGrade;
    }
} 
```

第三是：

```
 public class Teacher:Person
{
    public int RoomNumber
    {
        get;
        set;
    }

    public override string ToString()
    {
        return base.ToString() + "," + RoomNumber;
    }
} 
```

我还有一门课，我只是从 PeronDB （类）中调用数据

```
 public class Persons
{
     private List<Person> persons = null;

       public void Fill()
    {
        persons = PersonDB.GetPersons();
    }
 } 
```

InPersonDB 类如果它的 Student 节点然后读取数据，如果它的 Teacher 节点也读取数据并且如果它 Person 它也读取数据，我正在做。

```
 public class PersonDB
{
    private const string path = @"..\..\Persons.xml";

    public static List<Person> GetPersons()
    {
        List<Person> persons = new List<Person>();

        XmlReaderSettings settings = new XmlReaderSettings();
        settings.IgnoreWhitespace = true;
        settings.IgnoreComments = true;

        XmlReader xmlIn = XmlReader.Create(path, settings);

        if (xmlIn.ReadToDescendant("Student"))
        {
            do
            {
                Person person = new Person();
                Student student = (Student)person;
                xmlIn.ReadStartElement("Student");
                student.FirstName = xmlIn.ReadElementContentAsString();
                student.LastName = xmlIn.ReadElementContentAsString();
                student.Email = xmlIn.ReadElementContentAsString();
                student.AssessmentGrade = xmlIn.ReadElementContentAsInt();
                student.AssignmentGrade = xmlIn.ReadElementContentAsInt();

                persons.Add(student);
            } while (xmlIn.ReadToNextSibling("Student"));

        }

        else if (xmlIn.ReadToDescendant("Teacher"))
        {
            do
            {
                Person person = new Person();
                Teacher teacher = (Teacher)person;
                xmlIn.ReadStartElement("Teacher");
                teacher.FirstName = xmlIn.ReadElementContentAsString();
                teacher.LastName = xmlIn.ReadElementContentAsString();
                teacher.Email = xmlIn.ReadElementContentAsString();
                teacher.RoomNumber = xmlIn.ReadElementContentAsInt();

                persons.Add(teacher);
            } while (xmlIn.ReadToNextSibling("Teacher"));
        }

        if (xmlIn.ReadToDescendant("Person"))
        {
            do
            {
                Person person = new Person();

                xmlIn.ReadStartElement("Person");
                person.FirstName = xmlIn.ReadElementContentAsString();
                person.LastName = xmlIn.ReadElementContentAsString();
                person.Email = xmlIn.ReadElementContentAsString();

                persons.Add(person);
            } while (xmlIn.ReadToNextSibling("Person"));
        }

        xmlIn.Close();

        return persons;
    }
   } 
```

在表单加载中我正在做：

```
 Persons personList = null;

        private void FillPersonlstBox()
    {
        Person p;
        listBox1.Items.Clear();
        for (int i = 0; i < personList.Count; i++)
        {
            p = personList[i];
            listBox1.Items.Add(p.ToString());
        }
    }

    private void Load_Click(object sender, EventArgs e)
    {
        personList.Changed += new Persons.ChangeHandler(HandleChange);
        personList.Fill();
        FillPersonlstBox();
    } 
```

它显示在 ** personList.Changed += new Persons.ChangeHandler(HandleChange); ** 此行错误。它显示“对象引用未设置为对象的实例。” 这个错误。请各位大神帮帮我如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:44:36.987

在某些时候，您必须实例化`personList`.

在您的代码中，您无法处理`Changed`personList 上的事件，因为它仍然为空。

所以而不是

```
Persons personList = null; 
```

也许试试

```
Persons personList = new Persons(); 
```

# ruby-on-rails - 如何在与 Capybara 的链接中测试 http ref

> ID：11979987
> 
> 赞同：0
> 
> 时间：2012-08-16T02:38:33.167
> 
> 标签：ruby-on-rails, rspec, capybara

```
<div id="look_here">
  <a href="stackoverflow.com"><img src="xxxxxxxxxx.xxx"></a>
</div> 
```

您将如何在 Capybara（和 RSpec）中测试此链接？

图像是动态生成的，所以我只想通过`href`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:48:44.630

这应该有效：

```
page.should have_xpath("//a[@href='stackoverflow.com']") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T02:59:07.947

```
page.should have_selector "a[href='stackoverflow.com']" 
```

请参阅[http://www.w3.org/TR/CSS2/selector.html上的第 5.8.1 节匹配属性和属性值](http://www.w3.org/TR/CSS2/selector.html)

# android - 服务共享

> ID：11979991
> 
> 赞同：0
> 
> 时间：2012-08-16T02:38:58.177
> 
> 标签：android, android-service

我有一项提供设备当前位置的服务。我的应用程序中的多个活动可以同时调用此服务。如果我在一个活动中调用 stopService() ，它可以使在不同活动中运行的服务停止吗？我已经阅读了 Android 文档，但仍然对此感到困惑。请给我说清楚。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:02:47.473

该服务只有一个实例。您可以从多个活动中调用 startService()，但它只有一个实例。一旦任何活动调用 stopService() ，它将停止所有活动。

# php - 从 200 个数字中随机选择 30 个数字

> ID：11979997
> 
> 赞同：4
> 
> 时间：2012-08-16T02:39:38.320
> 
> 标签：php, mysql

目前我正在尝试做的是从一组 200 个数字中获取一大块 30 个数字。例如，由于这将与 MySQL 一起使用，我想从 200 个图像的数据库中选择 30 个随机图像。我希望能够在 limit 语句中使用两个数字（一个高和低），这将返回 30 行数据，如下所示：`SELECT * FROM 'images' LIMIT 20,50`或`SELECT * FROM 'images' LIMIT 10,40`. 我知道这可能听起来像是一个愚蠢的问题，尽管我的大脑现在有点难过。非常感谢所有帮助！谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:42:01.703

只需添加`ORDER BY RAND()`到您的查询。它是“足够”随机的。

```
 SELECT FOO FROM BAR ORDER BY RAND() LIMIT 30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:53:52.857

Using`ORDER BY RAND()`被认为是一种反模式，因为您强制数据库执行全表扫描和昂贵的排序操作。

要从查询缓存中受益，您可以制作一个混合解决方案，例如：

```
// take all image ids
$keys = $db->query('SELECT image_id FROM images')->fetchALL(PDO::FETCH_COLUMN, 0);

// pick 30
$random_keys = join(',', array_rand(array_flip($keys), 30));

// query those images only
$values = $db->query("SELECT * FROM images WHERE image_id IN ($random_keys)")->fetchAll(PDO::FETCH_ASSOC); 
```

上面对键的查询可以在 PHP 中缓存，因此可以用于更频繁的请求。**但是**，当您的表格在 100k 或更多的范围内时，我建议您创建一个单独的表格，其中图像 ID 以随机顺序排列，您可以将其加入图像表格。您可以每天使用`ORDER BY RAND()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T02:41:31.890

我建议使用 PHP 的`array_rand()`.

[http://php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php)

把你想选择的任何东西放在一个数组中，让它为你挑选 20 个条目。然后，您可以使用所需的任何文件名，而不必依赖它们按数字顺序排列。