# StackOverflow 问答 11719000-11719999

# c# - Linq To XML：在 XML 中按名称查找 XElement 并获取父属性

> ID：11719001
> 
> 赞同：1
> 
> 时间：2012-07-30T09:49:44.813
> 
> 标签：c#, wpf, xml, linq

我有这个 XML：

```
<?xml version='1.0' encoding='UTF-8'?>
<applications>
    <category cat="Player">
        <app>
            <name>4Media Blu Ray Creator</name>
        </app>
    </category>
    <category cat="Burning">
        <app>
            <name>Nero Micro</name>
        </app>
</category>
</applications> 
```

现在我想搜索**应用程序**名称并返回包含类别名称（父猫属性）的 XApplications 列表。

这是我的**XApplication** 类：

```
class XApplication
{
    public string Name { set; get; }
    public string Category { set; get; }

    public XApplication(string name, string category)
    {
        Name = name;
        Category = category;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:03:42.640

这是我的方法：

```
XApplication[] appList = (from xapp in applicationXml.Elements("category").Elements("app")
                           where xapp.Element("name").Value.ToLower().Contains(txtSearch.Text.ToLower())
                           select new XApplication
                           {
                                Name = xapp.Element("name").Value,
                                Category = xapp.Parent.Attribute("cat").Value

                           }).ToArray(); 
```

# android - sqlite android替换字符

> ID：11719002
> 
> 赞同：0
> 
> 时间：2012-07-30T09:49:47.040
> 
> 标签：android, sqlite

我想在 ORDER BY 语句中用 char(20) 替换 char(160)，但是

```
ORDER BY REPLACE(column,CHAR(160),CHAR(20)) 
```

抛出异常，因为 CHAR() 未知。如何在 SQLITE 中转换 ascii 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:29:50.707

```
ORDER BY REPLACE(column, CAST(X'A0' AS TEXT), CAST(X'14' AS TEXT)) 
```

`A0`并且`14`是十六进制格式

# php - PHP 正则表达式标签和特殊字符

> ID：11719004
> 
> 赞同：3
> 
> 时间：2012-07-30T09:49:54.070
> 
> 标签：php, regex, character-encoding

好的，不确定是愚蠢还是星期一。

其实很简单。我有一个文本框，我在其中输入文本。一个单词会用一个井号 (#) 标记，然后作为该句子的井号标签保存到数据库中。

现在，我的功能看起来像这样：

```
 public function getHashtag($text)
{
    print_r($text);
    preg_match_all('/(#\w+)/', $text, $hashTag);
    print_r($hashTag);
    die();
    if (isset($hashTag[0][0])) {
        $hashTag = $hashTag[0][0];
        return $hashTag;
    } else {
        return '';
    }

} 
```

print_r 只是调试的东西。我想要实现的只是得到带有哈希的单词。效果很好，除非有人输入法语单词，其中包含 àèé 或其他字符。然后输出就停在第一个特殊字符处。

```
#dfsdfaàèé asda sda sd asd aArray ( [0] => Array ( [0] => #dfsdfa ) [1] => Array ( [0] => #dfsdfa ) ) 
```

有任何想法吗？:D

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T09:51:26.423

只需使用此表达式`/(#[^\s[:punct:]]+)/`。

读作*“一个`#`加至少一个非空格或标点符号的字符”。*

这`[:punct:]`是[POSIX 字符类](http://www.regular-expressions.info/posixbrackets.html)之一。

# javafx - 画一个半环 - JavaFX

> ID：11719005
> 
> 赞同：8
> 
> 时间：2012-07-30T09:49:56.730
> 
> 标签：javafx, draw, geometry

我想知道如何在 JavaFX 中画一个半圆。我尝试使用 Shape 和 QuadCurve，但无法制作出完美的半圆。

这是我正在尝试绘制的图片：

![在此处输入图像描述](../Images/7f9c0442615376f980223815ddba9046.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T11:44:56.000

您链接的图片实际上是一个半环。您可以通过绘制嵌套的 2 条弧线和一些线在 JavaFX 中获得它。但我首选的方法是使用`Path`.

```
public class SemiDemo extends Application {

    @Override
    public void start(Stage primaryStage) {

        Group root = new Group();
        root.getChildren().add(drawSemiRing(120, 120, 100, 50, Color.LIGHTGREEN, Color.DARKGREEN));
        root.getChildren().add(drawSemiRing(350, 350, 200, 30, Color.LIGHTSKYBLUE, Color.DARKBLUE));

        Scene scene = new Scene(root, 300, 250);
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    private Path drawSemiRing(double centerX, double centerY, double radius, double innerRadius, Color bgColor, Color strkColor) {
        Path path = new Path();
        path.setFill(bgColor);
        path.setStroke(strkColor);
        path.setFillRule(FillRule.EVEN_ODD);

        MoveTo moveTo = new MoveTo();
        moveTo.setX(centerX + innerRadius);
        moveTo.setY(centerY);

        ArcTo arcToInner = new ArcTo();
        arcToInner.setX(centerX - innerRadius);
        arcToInner.setY(centerY);
        arcToInner.setRadiusX(innerRadius);
        arcToInner.setRadiusY(innerRadius);

        MoveTo moveTo2 = new MoveTo();
        moveTo2.setX(centerX + innerRadius);
        moveTo2.setY(centerY);

        HLineTo hLineToRightLeg = new HLineTo();
        hLineToRightLeg.setX(centerX + radius);

        ArcTo arcTo = new ArcTo();
        arcTo.setX(centerX - radius);
        arcTo.setY(centerY);
        arcTo.setRadiusX(radius);
        arcTo.setRadiusY(radius);

        HLineTo hLineToLeftLeg = new HLineTo();
        hLineToLeftLeg.setX(centerX - innerRadius);

        path.getElements().add(moveTo);
        path.getElements().add(arcToInner);
        path.getElements().add(moveTo2);
        path.getElements().add(hLineToRightLeg);
        path.getElements().add(arcTo);
        path.getElements().add(hLineToLeftLeg);

        return path;
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

有关代码中使用的形状的更多信息，请参阅JavaFX 的[Shape API 。](http://docs.oracle.com/javafx/2/api/javafx/scene/shape/package-summary.html)
截屏：

![在此处输入图像描述](../Images/e44bb102b06e476faca536381cb7b703.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T10:50:18.573

建议：

*   如果您不需要完整的大纲路径，则可以使用 Arc。
*   如果不需要填充圆弧，只想跟踪圆弧的轮廓路径，则将圆弧的填充设置为空。
*   如果你想要圆弧的轮廓路径粗，那么在圆弧上设置笔画参数。
*   如果您需要也概述的粗弧，那么最好像 Uluk 的回答那样定义一个完整的弧。

示例代码：

```
import javafx.application.Application;
import javafx.scene.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.*;
import javafx.stage.Stage;

public class SemiCircleSample extends Application {
  @Override public void start(Stage stage) {
    Arc arc = new Arc(50, 50, 25, 25, 0, 180);
    arc.setType(ArcType.OPEN);
    arc.setStrokeWidth(10);
    arc.setStroke(Color.CORAL);
    arc.setStrokeType(StrokeType.INSIDE);
    arc.setFill(null);

    stage.setScene(new Scene(new Group(arc), 100, 80));
    stage.show();
  }

  public static void main(String[] args) { launch(args); }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-28T23:43:37.297

作为一个实验，我尝试在 Canvas 上做同样的事情。这就是我想出的，利用 RadialGradient 和函数 GraphicsContext.fillArc：

```
/**
 *
 * @param x Coordinate x of the centre of the arc
 * @param y Coordinate y of the centre of the arc
 * @param outer Outer radius of the arc
 * @param innerPercentage Inner radius of the arc, from 0 to 1 (as percentage)
 * @param arcStartAngle Start angle of the arc, in degrees
 * @param arcExtent Extent of the arc, in degrees
 */
private void drawSemiCircle(float x, float y, float outer, float innerPercentage, float arcStartAngle, float arcExtent) {
    RadialGradient rg = new RadialGradient(
            0,
            0,
            x,
            y,
            outer,
            false,
            CycleMethod.NO_CYCLE,
            new Stop((innerPercentage + (.0 * innerPercentage)), Color.TRANSPARENT),
            new Stop((innerPercentage + (.1 * innerPercentage)), Color.RED),
            new Stop((innerPercentage + (.6 * innerPercentage)), Color.YELLOW),
            new Stop((innerPercentage + (1 * innerPercentage)), Color.GREEN)
    );
    gc.setFill(rg);
    gc.fillArc(
            x - outer,
            y - outer,
            outer * 2,
            outer * 2,
            arcStartAngle,
            arcExtent,
            ArcType.ROUND
    );
} 
```

这里的重点是弧形类型为 ArcType.ROUND 以及使用 Color.TRANSPARENT 作为第一种颜色。

然后可以沿线使用它：

```
drawSemiCircle(100, 100, 100, .5f, -45, 270); 
```

这不是一个完美的解决方案，但它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-26T00:59:03.143

Path.arcTo() 参数 SweepAngle 是指旋转度数，如果 sweepAngle 为正则弧为顺时针，如果 sweepAngle 为负则弧为逆时针。

这段代码在我的生产环境中使用，它使用位图图像绘制一个半圆环，路径在外半径上顺时针，在内半径上逆时针：

```
drawpercent = 0.85; //this draws a semi ring to 85% you can change it using your code.
DegreesStart = -90;
DegreesRotation = 180;

radiusPathRectF = new android.graphics.RectF((float)CentreX - (float)Radius, (float)CentreY - (float)Radius,  (float)CentreX + (float)Radius, (float)CentreY + (float)Radius);
innerradiusPathRectF = new android.graphics.RectF((float)CentreX - (float)InnerRadius, (float)CentreY - (float)InnerRadius, (float)CentreX + (float)InnerRadius, (float)CentreY + (float)InnerRadius);

Path p = new Path(); //TODO put this outside your draw() function,  you should never have a "new" keyword inside a fast loop.

                degrees = (360 + (DegreesStart)) % 360;
                radians = (360 - degrees + 90) * Math.PI / 180.0;
                //radians = Math.toRadians(DegreesStart);
                int XstartOuter = (int)Math.round((Math.cos(radians) * Radius + CentreX));
                int YstartOuter = (int)Math.round((Math.sin(-radians)* Radius + CentreY));
                int XstartInner = (int)Math.round((Math.cos(radians) * InnerRadius + CentreX));
                int YstartInner = (int)Math.round((Math.sin(-radians) * InnerRadius + CentreY));

                degrees = (360 + (DegreesStart + drawpercent * DegreesRotation)) % 360;
                //radians = degrees * Math.PI / 180.0;
                radians = (360 - degrees + 90) * Math.PI / 180.0;
                //radians = Math.toRadians(DegreesStart + drawpercent * DegreesRotation);
                int XendOuter = (int)Math.round((Math.cos(radians) * Radius + CentreX));
                int YendOuter = (int)Math.round((Math.sin(-radians) * Radius + CentreY));
                int XendInner = (int)Math.round((Math.cos(radians) * InnerRadius + CentreX));
                int YendInner = (int)Math.round((Math.sin(-radians) * InnerRadius + CentreY));

                //draw a path outlining the semi-circle ring.
                p.moveTo(XstartInner, YstartInner);
                p.lineTo(XstartOuter, YstartOuter);
                p.arcTo(radiusPathRectF, (float)DegreesStart - (float)90, (float)drawpercent * (float)DegreesRotation);
                p.lineTo(XendInner, YendInner);
                p.arcTo(innerradiusPathRectF, (float)degrees - (float)90, -1 * (float)drawpercent * (float)DegreesRotation);
                p.close();

                g.clipPath(p);

                g.drawBitmap(bitmapCircularBarImage, bitmapRect0, bitmapRectXY, paint); 
```

# android - 一项并发服务或多项服务

> ID：11719008
> 
> 赞同：1
> 
> 时间：2012-07-30T09:50:05.203
> 
> 标签：android, concurrency, broadcastreceiver, android-service

我正在开发一个应用程序来实现`BroadcastReceiver`监听传入的短信。

例如，根据收到的短信，应用程序将：

*   发送包含 SIM 信息的回复
*   回复 IMEI 信息
*   发送带有当前 GPS 位置的回复
*   ETC

这应该如何实施？

我想到了两种方法，第一种是为每个功能提供一个服务，但我觉得这有点矫枉过正。另一方面，我想创建一个行为类似于控制器的服务，并为每个请求创建一个线程。

它需要并发，因为某些操作可能需要 1 秒，而另一些操作可能需要 1 或 2 分钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:00:48.540

我建议创建一个并发的单一服务。您可以使用线程池并在作业到达时向其提交作业。这样您就不必担心长期运行的作业会影响您的整个服务。

但是，这确实意味着您将不得不担心对各种不同服务的并发访问。如果每个服务一次只处理一个事务，那么为每种类型的请求创建一个服务可能会更容易。

如果您决定使用并发服务，那么以下代码是您如何使用`ExecutorService`线程池的示例。

```
// create a thread pool with a dynamic number of workers
ExecutorService threadPool = Executors.newCachedThreadPool();
while (!shutdown) {
    // read your SMS job into an object
    SmsMessage message = receiveSmsMessage();
    threadPool.submit(new SmsJob(message));
}
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown();
...
public class SmsJob implements Runnable {
    private SmsMessage message;
    public MyJobProcessor(SmsMessage message) {
        this.message = message;
    }
    public void run() {
        // process the message
    }
} 
```

# linux - sed - 将匹配传递给外部命令

> ID：11719011
> 
> 赞同：7
> 
> 时间：2012-07-30T09:50:14.337
> 
> 标签：linux, bash, sed, css

我用 sed 编写了一个小脚本来转换它：

```
kaefert@Ultrablech ~ $ cat /sys/class/power_supply/BAT0/uevent
POWER_SUPPLY_NAME=BAT0
POWER_SUPPLY_STATUS=Full
POWER_SUPPLY_PRESENT=1
POWER_SUPPLY_TECHNOLOGY=Li-ion
POWER_SUPPLY_CYCLE_COUNT=0
POWER_SUPPLY_VOLTAGE_MIN_DESIGN=7400000
POWER_SUPPLY_VOLTAGE_NOW=8370000
POWER_SUPPLY_POWER_NOW=0
POWER_SUPPLY_ENERGY_FULL_DESIGN=45640000
POWER_SUPPLY_ENERGY_FULL=44541000
POWER_SUPPLY_ENERGY_NOW=44541000
POWER_SUPPLY_MODEL_NAME=UX32-65
POWER_SUPPLY_MANUFACTURER=ASUSTeK
POWER_SUPPLY_SERIAL_NUMBER= 
```

转换成这样的 csv 文件格式：

```
kaefert@Ultrablech ~ $ Documents/Asus\ Zenbook\ UX32VD/power_to_csv.sh 
"date";"status";"voltage µV";"power µW";"energy full µWh";"energy now µWh"
2012-07-30 11:29:01;"Full";8369000;0;44541000;44541000 
2012-07-30 11:29:02;"Full";8369000;0;44541000;44541000 
2012-07-30 11:29:04;"Full";8369000;0;44541000;44541000
... (in a loop) 
```

我现在想要将这些数字中的每一个除以 1.000.000，这样它们就不会代表 µV，而是 V 和 W，而不是 µW，这样一目了然就可以轻松解释它们。当然，一旦我在 libre office calc 中打开了这个 csv，我就可以手动执行此操作，但我想自动化它。

所以我发现，我可以在 sed 之间调用外部程序，如下所示：

```
...
s/\nPOWER_SUPPLY_PRESENT=1\nPOWER_SUPPLY_TECHNOLOGY=Li-ion\nPOWER_SUPPLY_CYCLE_COUNT=0\nPOWER_SUPPLY_VOLTAGE_MIN_DESIGN=7400000\nPOWER_SUPPLY_VOLTAGE_NOW=\([0-9]\{1,\}\)/";'`echo 0`'\1/ 
```

并且我可以通过以下方式获得我想要的值：

```
echo "scale=6;3094030/1000000" | bc | sed 's/0\{1,\}$//' 
```

但现在的问题是，我如何将匹配“\1”传递给外部命令？

如果您有兴趣查看完整的脚本，可以在此处找到：http: [//koega.no-ip.org/mediawiki/index.php/Battery_info_to_csv](http://koega.no-ip.org/mediawiki/index.php/Battery_info_to_csv)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T10:20:31.367

如果您的 sed 是 GNU sed。您可以使用 'e' 将匹配的组传递给 sed 命令中的外部命令/工具。

一个例子可能有助于说清楚：

说，你有一个问题：
你现在有一个字符串`"120+20foobar"`，你想得到120+20部分的计算结果，并将“foobar”部分中的“oo”替换为“xx”。

> 注意这个例子不是为了解决上面的问题，只是为了展示 sed 'e' 的用法

所以你可以`120+20`在第一个匹配组中进行，然后在第二组中休息，然后将两组传递给不同的命令/工具，然后得到结果。像：

```
 kent$  echo "100+20foobar"|sed -r 's#([0-9+]*)(.*)#echo  \1 \|bc\;echo \2 \| sed "s/oo/xx/g"#ge'
    120
    fxxbar 
```

这样，您可以将许多 sed 一个接一个地嵌套，直到迷路。:D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:08:38.160

由于`sed`不自己做算术，我建议使用`awk`这样的东西，例如将第 3、第 5 和第 6 个字段除以一百万，请执行以下操作：

```
 awk -F';' -v OFS=';' '
   NR == 1
   NR != 1 { 
     $3 /= 1e6
     $5 /= 1e6
     $6 /= 1e6
     print
   }' 
```

### 解释

*   `-F';'`并`-v OFS=';'`指定输入和输出字段分隔符。
*   `NR == 1` 通过第一行而不改变。
*   `NR != 1`如果不是第一行，则分开打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:09:25.067

要直接除以 1,000,000，您可以这样做：

```
Q='3094030/1000000'
sed ':r /^[[:digit:]]\{7\}/{s$\([[:digit:]]*\)\([[:digit:]]\{6\}\)/1000000$\1.\2$;p;d};s:^:0:;br;d' 
```

# git - Git 有多少个命令？

> ID：11719013
> 
> 赞同：3
> 
> 时间：2012-07-30T09:50:18.510
> 
> 标签：git

Git 有多少个命令？尤其是 ：

*   有多少高级命令？
*   总共有多少命令，包括非常低级的命令，例如 git-read-tree` ？

*可选：命令平均有多少个标志？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T10:26:44.330

```
git help -a 
```

将列出*所有*命令，但不区分[瓷器和管道](https://stackoverflow.com/questions/6976473/what-does-the-term-porcelain-mean-in-git/6978402#6978402)命令。
对于 git 1.7.11.3 那将是 152

# css - CSS3渐变背景

> ID：11719019
> 
> 赞同：10
> 
> 时间：2012-07-30T09:50:30.513
> 
> 标签：css

从下到上从浅灰色到白色将渐变背景应用于身体是否正确？

```
body {
    background: -webkit-gradient(linear, bottom, top, from(#e7e7e7, to(#ffffff));
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-30T10:01:08.117

[**DEMO**](http://jsfiddle.net/WbHCd/)支持所有支持的浏览器

```
body {
  background-color: #ffffff;
  background-image: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#999999));
  background-image: -webkit-linear-gradient(top, #ffffff, #999999);
  background-image:    -moz-linear-gradient(top, #ffffff, #999999);
  background-image:      -o-linear-gradient(top, #ffffff, #999999);
  background-image:         linear-gradient(to bottom, #ffffff, #999999);
} 
```

[CSS3 请](http://css3please.com/)可能有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T13:58:16.397

对于 Zoltan 的解决方案，您还可以添加：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#999999'); 
```

支持较旧的 IE 浏览器。

# javascript - jquery on() 不适用于点击事件？

> ID：11719023
> 
> 赞同：1
> 
> 时间：2012-07-30T09:50:56.480
> 
> 标签：javascript, jquery, ajax, events, click

这是我的jQuery：

```
$(document).ready(function(){
    $("div#overlay div#getFBid div#overlayClose").on("click", function(){
        console.log("test")
    });
}); 
```

这是我的 html，用 ajax 调用：

```
<div id="overlay">
    <div id="getFBid">
        <div id="overlayClose">&nbsp;</div>
        <h1>Wat is mijn Facebook page ID?</h1>
        <div id="fbPageURLholder">
            <input type="text" id="fbPageURL">
        </div>
    </div>
</div> 
```

我无法弄清楚我做错了什么，我显然错过了一些我认为应该非常简单的东西。有什么想法吗？

PS。我应该补充一点，我在 jquery.com 上看到的 live 功能已被弃用，我应该使用委托或 on。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T09:53:41.693

这：

```
$("div#overlay div#getFBid div#overlayClose") 
```

可以简化为

```
$('#overlayClose') 
```

因为您的文档中只会有该 ID 的一个元素。

至于问题；如果您使用 AJAX 加载了内容，那么当您绑定侦听器时，它在 DOMReady 中将不可用。

要绑定到尚未添加的元素，您需要使用实时委托：

```
$(document).on('click', '#overlayClose', function() {
    console.log('test');
}); 
```

where`$(document)`应该是尽可能接近元素的东西，在 DOMReady*中*可用，并且不会被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:07:16.297

你导入了 jQuery 吗？

这对我有用，单击关闭将在控制台中记录一条测试消息：

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"       type="text/javascript"></script>
</head>
<body>
    <div id="overlay">
        <div id="getFBid">
            <div id="overlayClose">Close</div>
                <h1>Wat is mijn Facebook page ID?</h1>
                <div id="fbPageURLholder">
                    <input type="text" id="fbPageURL">
                </div>
            </div>
     </div>
</body>
</html>

<script type="text/javascript">
    $(document).ready(function(){
        $("#overlayClose").on("click", function(){
            console.log("test")
        });
    });
</script> 
```

希望有帮助。

# android - 未选中复选框时Android禁用按钮

> ID：11719024
> 
> 赞同：2
> 
> 时间：2012-07-30T09:51:00.163
> 
> 标签：android, button, checkbox

我有一个多个复选框和一个按钮。如果没有选中任何复选框，我应该怎么做才能禁用按钮，如果选中则启用按钮？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T09:56:16.030

试试这个，

```
 Button mButton=(Button)findViewById( R.id.button01);
    CheckBox mCheckBox= ( CheckBox ) findViewById( R.id.checkbox01);
    mCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if ( isChecked )
            {
              mButton.setEnabled(true);

            }else{
  mButton.setEnabled(false);
}

        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:56:09.773

当您进入该视图时，禁用按钮（在您的 XML 中），并且每当用户点击任何复选框时管理一个全局变量，例如，如果全局计数 > 1，则在该活动中启用按钮。

管理全局变量的方式是，如果用户打开复选框，则增加它，如果他关闭复选框，则减少计数器。

我希望你明白这个概念。

基本上，这都是关于管理打开多少复选框的计数；如果打开了多个按钮，则启用该按钮，否则将其禁用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T10:27:22.263

您可以对按钮使用 setVisibility() 方法，而不是启用和禁用按钮。按照以下方式。

```
Button btn =(Button)findViewById( R.id.mybutton);
CheckBox checkBox= ( CheckBox ) findViewById( R.id.checkbox01);
mCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {
          btn.setVisibility(VISIBLE);
        }
          else{
                btn.setVisibility(GONE);
               }
     }
}); 
```

通过使用此方法，您可以设置视图的可见性。您的按钮只有在 checkBox 被欺骗时才可见，否则您的按钮将不可见。让我知道它是否适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-02T06:14:46.910

```
 mCheckbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {        
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            mButton.setEnabled(isChecked);
        }
    }); 
```

就如此容易 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T09:54:45.183

用这个：

```
myButton.setEnabled(false); 
```

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/4384890/how-to-disable-an-android-button)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T09:56:22.050

您可以使用以下代码禁用按钮。

```
mBtn.setEnabled(false); 
```

并且可以稍后使用以下代码启用它

```
mBtn.setEnabled(true); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-07T05:45:38.220

试试这个 termsAndConditionsCheckBox.setOnClickListener(new OnClickListener() {

```
 @Override
        public void onClick(View v) {

            if (termsAndConditionsCheckBox.isChecked() && privacyPolicyCheckBox.isChecked()){
                agreebutton.setEnabled(true);
                agreebutton.setTextColor(getResources().getColor(android.R.color.white));
                agreebutton.setBackgroundColor(getResources().getColor(android.R.color.holo_blue_light));
            }
            else {
                agreebutton.setEnabled(false);
                agreebutton.setTextColor(getResources().getColor(android.R.color.white));
                agreebutton.setBackgroundColor(getResources().getColor(android.R.color.darker_gray));
            }
        }   
    });
    privacyPolicyCheckBox.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            if (termsAndConditionsCheckBox.isChecked() && privacyPolicyCheckBox.isChecked()){
                agreebutton.setEnabled(true);
                agreebutton.setTextColor(getResources().getColor(android.R.color.white));
                agreebutton.setBackgroundColor(getResources().getColor(android.R.color.holo_blue_light));
            }
            else {
                agreebutton.setEnabled(false);
                agreebutton.setTextColor(getResources().getColor(android.R.color.white));
                agreebutton.setBackgroundColor(getResources().getColor(android.R.color.darker_gray));
            }

        }
    }); 
```

# google-visualization - 谷歌运动图初始状态 - 为滑块设置时间单位

> ID：11719025
> 
> 赞同：3
> 
> 时间：2012-07-30T09:51:00.880
> 
> 标签：google-visualization

我正在使用**Google 动态图表**，底部有一个播放按钮和滑块，可以为图表设置动画。我想设置滑块使用的时间单位/步长。默认值似乎是一天（“D”）。

我的 drawChart 方法设置了初始状态，我尝试将 timeUnit 设置为 "M" - **"duration":{"multiplier":1,"timeUnit":"M"}** - 一个月，但这并没有改变任何东西。我找不到任何关于初始状态变量可能设置的文档。

下面是我设置状态的方法：

```
function drawChart(data) {
        var evalObj = eval("(" + data + ")");
        var dataTbl = new google.visualization.DataTable(evalObj);
        var motionchart = new google.visualization.MotionChart(document.getElementById('chart'));
        var options = {};
        options['state'] =
        '{"iconKeySettings":[],"stateVersion":3,"time":"notime","xAxisOption":"_NOTHING","playDuration":15,
"iconType":"BUBBLE","sizeOption":"_UNISIZE","xZoomedDataMin":null,
"xZoomedIn":false, "duration":{"multiplier":1,"timeUnit":"M"},"yZoomedDataMin":null,"xLambda":1,"colorOption":"_UNIQUE_COLOR",
"nonSelectedAlpha":0.4,"dimensions":{"iconDimensions":   []},"yZoomedIn":false,"yAxisOption":"_NOTHING","yLambda":1,"yZoomedDataMax":null,
"showTrails":false,"xZoomedDataMax":null};';
        options['width'] = 800;
        options['height'] = 400;
        motionchart.draw(dataTbl, options);
    } 
```

“M”是月份的设置吗？如何更改滑块以使用月而不是天来执行其步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T04:04:04.543

[文档](https://developers.google.com/chart/interactive/docs/gallery/motionchart#Configuration_Options)说：

> 第二列必须包含时间值。时间可以用以下任何一种格式表示：
> 
> *   年 - 列类型：“数字”。示例：2008 年。
> *   月、日和年 - 列类型：“日期”；值应该是 javascript Date 实例。
> *   周数- 列类型：'string'；值应使用符合 ISO 8601 的模式 YYYYWww。例如：“2008W03”。
> *   Quarter - 列类型：'string'；这些值应具有符合 ISO 8601 的模式 YYYYQq。例如：“2008Q3”。

阅读另一个[线程](https://code.google.com/p/google-visualization-api-issues/issues/detail?id=54)，看起来谷歌正在把它扔进垃圾桶，并且不会增加时间单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T13:26:21.800

尝试这个。

您可以指定动态图表以特定状态开始：即一组选定的实体和视图自定义。为此，您需要**首先创建**并显示图表，然后进行任何您希望图表显示的状态更改（选择值、更改设置等），然后**将这些设置导出**为字符串，最后使用它代码中的字符串，将其分配给“状态”选项。接下来的两节描述如何导出然后使用状态代码。

1.  打开一个工作图表并设置您要捕获的设置。您可以指定的设置包括不透明度级别、缩放以及对数与线性缩放。
2.  单击图表右下角的扳手符号打开设置面板。
3.  单击左下角的“高级”链接以将“高级”面板添加到集合中。
4.  展开 Advanced 面板并将 State 文本框的内容复制到剪贴板。（注意：您可以在页面上插入一个调用 getState() 并在消息框中显示当前状态的按钮，而不是使用步骤 2-4 中描述的菜单。）
5.  将您在上一步中复制的状态字符串分配给代码中的“状态”选项参数，如此处所示。当传入 draw() 方法时，图表将被初始化为启动时指定的状态。

# javascript - 在 iPad 上播放声音时有延迟

> ID：11719031
> 
> 赞同：3
> 
> 时间：2012-07-30T09:51:25.263
> 
> 标签：javascript, ipad, html

在我的小型 HTML5 网络应用程序中，我想播放声音以响应用户操作。当用户单击按钮时，在 onclick 处理程序中我会播放如下声音：

```
 url = "assets/sounds/buzz" + (this.canPlayMP3 ? ".mp3" : ".ogg");
    sound = new Audio(url);
    sound.load();
    sound.play(); 
```

这在 Firefox 上效果很好。不幸的是，在 iPad（运行 iOS 5.1.1 的 iPad 2）上，我在播放声音之前有 2 秒的延迟。每次我播放声音样本时都会发生这种情况，而不仅仅是第一次。

MP3 文件长 9KB。iPad 使用与运行 Firefox 的计算机完全相同的 Wifi 连接连接到网络。

我怎样才能弄清楚发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:03:35.107

您可能希望为每个声音创建一个音频元素实例：

```
var Sounds = {
    cat: new Audio('/sounds/meow.ogg'),
    bird: new Audio('/sounds/tweet.ogg')
}; 
```

然后你可以一遍又一遍地播放相同的元素：

```
function playSound(name) {
    Sounds[name].currentTime = 0;
    Sounds[name].play();
}

playSound('cat'); 
```

如果 iOS 销毁您的对象，您可以在[缓存清单](http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5)`Audio`中缓存声音文件：

```
CACHE MANIFEST
# 2012-08-09:v1.3

NETWORK:
*

CACHE:
/sounds/meow.ogg
/sounds/tweet.ogg 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:55:48.983

如何将负载移到处理程序之外，例如使其全局/预加载？然后内部处理程序仅调用播放方法。

# iphone - 无效的二进制文件，已收到电子邮件

> ID：11719035
> 
> 赞同：0
> 
> 时间：2012-07-30T09:51:30.637
> 
> 标签：iphone, app-store, app-store-connect

我正在尝试将应用程序上传到应用程序商店，但遇到了很多麻烦。

现在我收到了这封电子邮件：

```
Dear developer,
We have discovered one or more issues with your recent delivery for "usualBike". To process your delivery, the following issues must be corrected: 
Invalid Code Signing Entitlements - Your application bundle's signature contains code signing entitlements that are not supported. Please check your Xcode project's code signing entitlements configuration, and remove any unneeded entitlements. 
Specifically, key "com.apple.developer.default-data-protection" is not supported. 
Invalid Code Signing Entitlements - Your application bundle's signature contains code signing entitlements that are not supported. Please check your Xcode project's code signing entitlements configuration, and remove any unneeded entitlements. 
Specifically, key "com.apple.developer.pass-type-identifiers" is not supported. 
Once these issues have been corrected, go to the Version Details page and click "Ready to Upload Binary." Continue through the submission process until the app status is "Waiting for Upload." You can then deliver the corrected binary. 
Regards,
The App Store team 
```

第二个我发现了这个：

[iTunes连接中的无效二进制文件](https://stackoverflow.com/questions/11431929/invalid-binary-in-itunes-connect)

但我有 iOS 5.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:02:46.450

这可能意味着您在 iOS 配置门户中为您的 App ID 启用了数据保护和通行证。iOS 5.1 不支持此功能

您应该通过以下方式禁用此功能：

*   转到 iOS 配置门户
*   打开应用 ID 选项卡
*   单击您当前使用的 App ID 旁边的配置
*   取消选择 Enable for Passes 和 Enable for Data Protection 选项
*   重新下载应用程序的规定并使用此新规定重建它。

# php - Foreach 只循环一次

> ID：11719043
> 
> 赞同：0
> 
> 时间：2012-07-30T09:51:41.020
> 
> 标签：php, arrays, foreach

我的 PHP 代码有问题：我一直在使用 PHP 生成静态 HTML 文件（通过 fopen/fwrite），具体取决于一些 SQL 请求（以及其他），我遇到了 foreach 循环的问题：

```
$maincats = array('/boutique' => 'TOUS LES OBJETS',
                    '/boutique/nouveautes' => 'NOUVEATES',
                    '/boutique/luminaires' => 'LUMINAIRES',
                    '/boutique/assises' => 'ASSISES',
                    '/boutique/rangements' => 'RANGEMENT',
                    '/boutique/objets-deco' => 'OBJETS DECO',
                    '/boutique/tables' => 'TABLES',
                    '/boutique/art-de-la-table' => 'ARTS DE LA TABLE',
                    '/boutique/high-tech' => 'HIGH-TECH',
                    '/boutique/enfants' => 'ENFANT');

    $page .= '
<div id="menuWrap">
<div id="menu">
    <ul>';
    $i = 0;
    foreach ($maincats as $url => $name);
    {
        $i++;
        $page .= '
        <li><a ';
        $page .= 'href="'.$url.'">'.$name.'</a></li>';
    } 
```

我在 foreach 之前尝试了 print_r，我可以看到数组的所有元素（它工作得很好）。但是每次我执行这个 $page 只包含 ONE `<li>`，数组的最后一项，和`$i = 1`. 我想不出我做错了什么。

任何人都知道这是从哪里来的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T09:53:25.107

删除**；**从

```
foreach ($maincats as $url => $name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T09:58:01.753

消除`;`

**错误代码**

```
 foreach ($maincats as $url => $name);
    { 
```

**正确的代码**

```
 foreach ($maincats as $url => $name)
    { 
```

# sql-server - 如何通过使用 T-SQL 将两个整数值相除来获得浮点结果？

> ID：11719044
> 
> 赞同：226
> 
> 时间：2012-07-30T09:51:43.003
> 
> 标签：sql-server, sql-server-2008, division, rounding

使用 T-SQL 和 Microsoft SQL Server，当我在 2 个整数之间进行除法时，我想指定小数位数，例如：

```
select 1/3 
```

目前返回`0`。我希望它返回`0,33`。

就像是：

```
select round(1/3, -2) 
```

但这不起作用。我怎样才能达到预期的效果？

* * *

## 回答 #1

> 赞同：352
> 
> 时间：2012-07-30T12:05:44.533

如果您正在寻找一个常数，来自 stb 和 xiowl 的建议很好。如果您需要使用现有的整数字段或参数，您可以先将它们转换为浮点数：

```
SELECT CAST(1 AS float) / CAST(3 AS float) 
```

或者

```
SELECT CAST(MyIntField1 AS float) / CAST(MyIntField2 AS float) 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-07-30T09:55:53.733

因为 SQL Server 执行整数除法。试试这个：

```
select 1 * 1.0 / 3 
```

当您将整数作为参数传递时，这很有帮助。

```
select x * 1.0 / y 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2015-06-04T08:55:51.633

没有必要同时施放它们。除法的结果数据类型始终是具有较高[数据类型优先级](https://msdn.microsoft.com/en-us/library/ms190309.aspx)的数据类型。因此，解决方案必须是：

```
SELECT CAST(1 AS float) / 3 
```

或者

```
SELECT 1 / CAST(3 AS float) 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-07-30T09:55:21.117

采用

```
select 1/3.0 
```

这将完成这项工作。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-01-24T09:41:45.237

我知道MySQL 中不允许`CAST`ing to ，并且当您尝试按照[MySQL dev](http://dev.mysql.com/doc/refman/5.7/en/cast-functions.html#function_cast)中的说明进行操作时会引发错误。`FLOAT``CAST(1 AS float)`

解决方法很简单。做就是了

```
(1 + 0.0) 
```

然后使用`ROUND`来实现特定的小数位数，例如

```
ROUND((1+0.0)/(2+0.0), 3) 
```

上面的 SQL 将 1 除以 2 并将浮点数返回到小数点后 3 位，如`0.500`.

可以`CAST`使用以下类型：**binary、char、date、datetime、decimal、json、nchar、signed、time**和**unsigned**。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-02-11T15:32:27.793

看起来这个技巧在 SQL Server 中有效并且更短（基于以前的答案）

```
SELECT 1.0*MyInt1/MyInt2 
```

或者：

```
SELECT (1.0*MyInt1)/MyInt2 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-13T04:22:44.470

## 用这个

`select cast((1*1.00)/3 AS DECIMAL(16,2)) as Result`

在此 sql 中，首先转换为浮点数或乘以 1.00。输出将是浮点数。这里我考虑 2 个小数位。你可以选择你需要的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-08T10:33:21.340

如果你（和我一样）来这里是为了找到**整数值**的解决方案，答案如下：

```
CAST(9/2 AS UNSIGNED) 
```

返回 5

# php - 如何使用 PHP 检索列表中目录中的文件

> ID：11719045
> 
> 赞同：2
> 
> 时间：2012-07-30T09:51:43.820
> 
> 标签：php

我如何能够在某个目录中检索不同的文件扩展名。假设我有一个名为“downloads/”的文件夹，该文件夹内有不同类型的文件，如 PDF、JPEG、DOC 文件等。所以在我的 PHP 代码中，我希望检索这些文件并列出文件名和文件扩展名. 示例：在“downloads/”文件夹中是不同的文件

```
downloads/

 - My Poem.doc
 - My Photographs.jpg
 - My Research.pdf 
```

所以我想查看那些我可以得到文件名、文件扩展名和文件目录的文件。所以在视图中会是这样的

```
Title: My Poem
Type: Document
Link: [url here] 

Title: My Photographs
Type: Image
Link: [url here] 

Title: My Research
Type: PDF
Link: [url here] 
```

任何人都知道如何在php中做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T09:56:30.273

这很简单。老实说，我不知道您为什么不在 php.net 上进行搜索。他们为此提供了很多例子。在这里查看：[点击](http://php.net/manual/en/function.readdir.php)

例子：

```
<?php

  function process_dir($dir,$recursive = FALSE) {
    if (is_dir($dir)) {
      for ($list = array(),$handle = opendir($dir); (FALSE !== ($file = readdir($handle)));) {
        if (($file != '.' && $file != '..') && (file_exists($path = $dir.'/'.$file))) {
          if (is_dir($path) && ($recursive)) {
            $list = array_merge($list, process_dir($path, TRUE));
          } else {
            $entry = array('filename' => $file, 'dirpath' => $dir);

 //---------------------------------------------------------//
 //                     - SECTION 1 -                       //
 //          Actions to be performed on ALL ITEMS           //
 //-----------------    Begin Editable    ------------------//

  $entry['modtime'] = filemtime($path);

 //-----------------     End Editable     ------------------//
            do if (!is_dir($path)) {
 //---------------------------------------------------------//
 //                     - SECTION 2 -                       //
 //         Actions to be performed on FILES ONLY           //
 //-----------------    Begin Editable    ------------------//

  $entry['size'] = filesize($path);
  if (strstr(pathinfo($path,PATHINFO_BASENAME),'log')) {
    if (!$entry['handle'] = fopen($path,r)) $entry['handle'] = "FAIL";
  }

 //-----------------     End Editable     ------------------//
              break;
            } else {
 //---------------------------------------------------------//
 //                     - SECTION 3 -                       //
 //       Actions to be performed on DIRECTORIES ONLY       //
 //-----------------    Begin Editable    ------------------//

 //-----------------     End Editable     ------------------//
              break;
            } while (FALSE);
            $list[] = $entry;
          }
        }
      }
      closedir($handle);
      return $list;
    } else return FALSE;
  }

  $result = process_dir('C:/webserver/Apache2/httpdocs/processdir',TRUE);

 // Output each opened file and then close
  foreach ($result as $file) {
    if (is_resource($file['handle'])) {
        echo "\n\nFILE (" . $file['dirpath'].'/'.$file['filename'] . "):\n\n" . fread($file['handle'], filesize($file['dirpath'].'/'.$file['filename']));
        fclose($file['handle']);
    }
  }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:55:17.810

你可以使用[`glob`](http://php.net/manual/en/function.glob.php)& [`pathinfo`](http://php.net/manual/en/function.pathinfo.php)：

```
<?php
foreach (glob(__DIR__.'/*') as $filename) {
    print_r(pathinfo($filename));
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:03:42.423

您将尝试此代码：

```
$Name = array();
$ext = array();
$downloadlink = array();
$dir = 'downloads'
while ($file= readdir($dir))
{

    if ($file!= "." && $file!= "..")
    {
         $temp = explode(".",$file);
         if (count($temp) > 1) 
            {
                $Name[count($Name)] = $temp[0];
                swich($ext)
                {
                    case "doc" :
                    {
                        $ext[count($ext)] = "Document"; 
                        break;
                    }
                    [...]
                    default :
                    {
                        $ext[count($ext)] = "Error"; 
                        break;
                    }
                }
                $downloadlink[count($downloadlink)] = "http://yourdomain.com/".$dir."/".$file;
            }
    }
}
closedir($dir);

for($aux = 0; $aux < count($Name); $aux++)
{
    echo "Name = " . $Name[$aux]."<br />
    Type = " . $ext[$aux]."<br/>
    Link = " . $downloadlink[$aux]."<br/>
    ";
} 
```

# joomla2.5 - 刷新页面的一部分

> ID：11719046
> 
> 赞同：0
> 
> 时间：2012-07-30T09:51:47.137
> 
> 标签：joomla2.5, joomla1.7, joomla1.6

在 joomla 2.5 中，如何在不刷新整个页面的情况下，用同一页面的超链接刷新页面内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:52:40.460

您需要使用 Ajax 来执行此操作，有很多有用的方法可以完成此操作。

也试试这个

[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

如果你还不熟悉 jQuery，你可能想看看它。

# c# - 文件路径太长 - FTP 传输崩溃

> ID：11719049
> 
> 赞同：0
> 
> 时间：2012-07-30T09:51:59.057
> 
> 标签：c#, asp.net, ftp

我正在使用CuteFTP 的许可版本将一台服务器的文件（数以千计）传输到另一台服务器。

我现在面临的问题是大多数 FTP 传输都失败了，因为文件路径太长了。

平均而言，我的文件路径的字符长度在 200 到 250 之间。

由于文件数量巨大，我无法单独手动缩短文件标题。

有什么想法或建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:58:13.887

这是 Windows 尤其是 NTFS 文件系统的限制。MAX_PATH 定义确实允许您创建总长度（路径和文件名）为 260 个字符的文件。简单的方法是使用可以处理此类文件名的 Robocopy，或者如果您绑定到 FTP，当目标文件名太长时会出现错误。解决此问题的唯一简单方法是为相关文件创建一个 zip 文件并传输该 zip 文件。无论如何，这应该是一个好主意，因为通过网络传输比简单地传输一个比原始数据小 2-4 倍的大文件要慢得多。

作为奖励，您可以摆脱长文件名，直到您尝试解压缩它们。但是，您应该选择具有浅根目录的文件夹结构。

# configuration - 自定义导航栏中的后退按钮

> ID：11719050
> 
> 赞同：1
> 
> 时间：2012-07-30T09:52:01.397
> 
> 标签：configuration, navigation, sencha-touch-2, back, navigationbar

关于 Sencha Touch 2 导航栏元素中的后退按钮，我有两个问题。

**我的代码**

```
var oNavigationbar = {
        docked: 'top',

        backButton : {
            margin: 7,
            docked: "left",
            ui : 'back'
        },
        items: [
            Ext.create("Ext.Button", {
                text: "Button1"                
            },
            Ext.create("Ext.Button", {
                text: "Button2",
                align: "right",
            }

        ],
    }; 
```

**问题1**
如何将后退按钮粘在导航栏的左侧？
如果我设置`align:"left"`Button1 仍然在它的左侧。
但是如果我将它停靠在左侧，我必须设置一个边距，我宁愿避免。

**问题 2**
如何将后退按钮的默认文本设置为“后退”。
我必须设置哪些配置属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:46:19.287

不确定你在 q1 中的意思... AFAIK 导航栏（作为 Ext.navigation.View 的子组件）的后退按钮已经左对齐。

Q2：

```
Ext.define('MyNavigator', {
extends: 'Ext.navigation.View',
    xtype: 'mynavigator',
    config: {
        defaultBackButtonText: 'Go Back',
        // back button a-la iPhone 
        // useTitleForBackButtonText: true
....
}) 
```

有关更多信息，请参见[http](http://docs-devel.sencha.com/touch/2-0/#!/api/Ext.navigation.View-cfg-defaultBackButtonText) ://docs-devel.sencha.com/touch/2-0/# !/api/Ext.navigation.View-cfg-defaultBackButtonText...

干杯，奥列格

# ruby-on-rails - 在使用设计注册时更新未设计模型的表？

> ID：11719051
> 
> 赞同：0
> 
> 时间：2012-07-30T09:52:02.307
> 
> 标签：ruby-on-rails, devise

如何将设计注册表中的值添加到另一个不是设计表的表

这是示例代码

```
<div class="signin">
  <h2>Register</h2>
  <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
    <%= devise_error_messages! %>

    <div><%= f.label :email %><br />
    <%= f.email_field :email %></div>

    <div><%= f.label :password %><br />
    <%= f.password_field :password %></div>

    <div><%= f.label :password_confirmation %><br />
    <%= f.password_field :password_confirmation %></div>

      <div><%= f.label :full_name %><br />
    <%= f.text_field :full_name %></div>

    <div><%= f.submit "Register" %></div>
  <% end %>

  <%= render :partial => "devise/shared/links" %>
</div> 
```

全名是配置文件表的字段，我在用户表上设置设备，如果用户输入名称我想将全名存储在配置文件表中，我不知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:51:49.157

您可以使用活动记录模型提供的众多钩子之一：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#creating-an-object](http://guides.rubyonrails.org/active_record_validations_callbacks.html#creating-an-object)

IE。您可以检索用户的配置文件对象，更新记录并将其保存回`before_save`挂钩中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:17:58.077

我得到了答案在设计模型定义名称中放置一个与字段名称相同的定义，然后设计允许您将该字段传递给模型，在模型/控制器中，您可以通过任何表中的参数插入值。

# c# - 为什么 TimeSpan.ParseExact 不起作用

> ID：11719055
> 
> 赞同：45
> 
> 时间：2012-07-30T09:52:24.520
> 
> 标签：c#, parsing, timespan

这有点奇怪。如果我试图准确，解析具有有效时间跨度的文本字段会失败！

```
const string tmp = "17:23:24";
//works
var t1 = TimeSpan.Parse(tmp);
//fails
var t2 = TimeSpan.ParseExact(tmp, "hh:mm:ss", System.Globalization.CultureInfo.InvariantCulture); 
```

第二次解析失败，出现异常“输入字符串的格式不正确”。从日期时间。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-07-30T09:57:23.523

从[文档](http://msdn.microsoft.com/en-us/library/ee372287.aspx#Other)中：

> 格式字符串中的任何其他未转义字符（包括空格字符）都被解释为自定义格式说明符。在大多数情况下，任何其他未转义字符的存在都会导致 FormatException。
> 
> 有两种方法可以在格式字符串中包含文字字符：
> 
> *   将其括在单引号中（文字字符串分隔符）。
>     
>     
> *   在它前面加上一个反斜杠（“\”），它被解释为一个转义字符。这意味着，在 C# 中，格式字符串必须用 @ 引号括起来，或者文字字符前面必须有一个额外的反斜杠。
>     
>     
> 
> .NET Framework 没有为时间间隔中的分隔符定义语法。这意味着天和小时、小时和分钟、分钟和秒以及秒和秒的小数部分之间的分隔符都必须被视为格式字符串中的字符文字。

因此，解决方案是将格式字符串指定为

```
TimeSpan.ParseExact(tmp, "hh\\:mm\\:ss", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-30T10:01:12.720

试试这个：

```
var t2 = TimeSpan.ParseExact(tmp, "c", System.Globalization.CultureInfo.InvariantCulture); 
```

来源： [标准 TimeSpan 格式字符串](http://msdn.microsoft.com/en-us/library/ee372286.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-28T04:00:09.560

如果您不想处理 和 之间格式说明符的差异`TimeSpan.ParseExact`，`DateTime.ParseExact`您可以将字符串解析为 a`DateTime`并像这样获取`TimeOfDay`组件`TimeSpan`：

```
var t2 = DateTime.ParseExact(tmp, "hh:mm:ss", CultureInfo.InvariantCulture).TimeOfDay; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-30T09:55:36.607

看来HH并不是真的适合`TimeSpan`

> 自定义 TimeSpan 格式说明符不包括占位符分隔符，例如将天与小时、小时与分钟或秒与小数秒分开的符号。相反，这些符号必须作为字符串文字包含在自定义格式字符串中。例如，“dd.hh\:mm”将句点 (.) 定义为天和小时之间的分隔符，将冒号 (:) 定义为小时和分钟之间的分隔符。

因此，正确的方法是乔恩提到的使用**“\”来逃避** [阅读更多](http://msdn.microsoft.com/en-us/library/ee372287.aspx#Other)

~~您`TimeSpan`的是**“17:23:24”**，它采用 24 小时格式，应该使用`HH`格式解析，而不是`hh`12 小时格式。~~

 ~~```
TimeSpan.ParseExact(tmp, "HH:mm:ss",System.Globalization.CultureInfo.InvariantCulture); 
```~~ 

~~查看[格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)~~

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-10T05:03:43.497

使用这个它可以使用

```
TimeSpan.ParseExact(value, “h\\:mm”, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T09:56:25.517

试试这个：

```
 var t2 = TimeSpan.ParseExact(tmp, "HH:mm:ss", System.Globalization.CultureInfo.InvariantCulture); 
```

# solr - SOLR 排序表达式

> ID：11719056
> 
> 赞同：0
> 
> 时间：2012-07-30T09:52:29.663
> 
> 标签：solr

我正在使用 solr 进行搜索。我需要执行一个表达式排序，这样：

ORDER BY ((如果在 (1,2,3),100,IF(在 (4,5,6),80,100)) + IF(PRICE>1000,70,40)) DESC

# iphone - 将数组写入文件 ArchiveRootObject

> ID：11719057
> 
> 赞同：0
> 
> 时间：2012-07-30T09:52:34.890
> 
> 标签：iphone, objective-c, nskeyedarchiver

```
 NSMutableArray *esami = [[NSMutableArray alloc] init];
    NSArray *paths = NSSearchPathForDirectoriesInDomains
    (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    //make a file name to write the data to using the
    //documents directory:
    NSString *fullFileName = [NSString stringWithFormat:@"%@/new", documentsDirectory];
    esami = [NSKeyedUnarchiver unarchiveObjectWithFile:fullFileName];
    Esame *add=[[Esame alloc]initWithNome:materia voto:voto crediti:crediti anno:anno];
    [esami addObject:add];
    [NSKeyedArchiver archiveRootObject:esami toFile:fullFileName]; 
```

我无法理解为什么这段代码不起作用..如果我使用已经写在我的根目录中的文件，我可以将新元素添加到我的数组中并写入它但是如果我使用另一个文件（在这种情况下是新的）它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:41:01.787

我不知道为什么，但我用这段代码解决了这个问题

```
NSMutableArray *esami = [NSKeyedUnarchiver unarchiveObjectWithFile:fullFileName];

if(esami.count==0){
    NSMutableArray *esamiNew=[[NSMutableArray alloc] init];
    [esamiNew addObject:[[Esame alloc]initWithNome:materia voto:voto crediti:crediti anno:anno]];

    [NSKeyedArchiver archiveRootObject:esamiNew toFile:fullFileName];

}
else{

    [esami addObject:[[Esame alloc]initWithNome:materia voto:voto crediti:crediti anno:anno]];
    NSLog(@"num %d",esami.count);
    [NSKeyedArchiver archiveRootObject:esami toFile:fullFileName];

} 
```

难道是bug？？

# windows-phone-7 - Windows Phone 不使用 $getJSON 加载本地 JSON 文件

> ID：11719060
> 
> 赞同：1
> 
> 时间：2012-07-30T09:52:46.940
> 
> 标签：windows-phone-7, jquery-mobile, cordova

我现在正在使用 Phonegap Cordova 2.0.0 和 Jquery Mobile 1.1.1 final 实现 Windows Phone，由于 Window Phone Emulator 没有将 JSON 数据加载到`<select>`元素，而 iOS 和 Android 模拟器都运行顺利，我一直坚持使用本地 JSON 文件. 这是我的代码片段

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Page Title</title> 

        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
        <link rel="stylesheet" href="css/jqm-icon-pack-2.1.2-fa.css" />
        <script type="text/javascript" src="js/cordova-2.0.0.js"></script>
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript" src="js/json2.js"></script>
        <script type="text/javascript" charset="utf-8">

            function changeBaseAmount() {
                alert($('#baseAmount').val());
            }

        $.getJSON('json/currencies.json',
            function (data) {
                alert("get json");
                $.each(data, function (key, value) {

                    $('#currency1').append("<option value='" + key + "'>" + value + "</option>");

                    $('#currency2').append("<option value='" + key + "'>" + value + "</option>");

               });

           });

    </script>
    </head> 

    <body> 
        <!-- Home Page -->
        <div data-role="page" data-theme="b">
            <div data-role="header" data-theme="b">

                <h1>Convert Currency</h1>
                <a href="#" data-role="button" data-icon="wrench" data-iconpos="notext"></a>
            </div> 

            <div data-role="content" data-theme="b">

                <div id="baseAmountDiv" data-role="fieldcontain">
                    <label for="baseAmount">Amount:</label>
                    <input id="baseAmount" type="text" value="" onchange="changeBaseAmount()"></input>
                </div>
                <div id="currency1Div" data-role="fieldcontain">
                    <label for="currency1">Currency From:</label>
                    <select id="currency1" onchange="changeCurrency1()">
                        <option value="ZZ">Please Select Currency From</option>
                    </select>
                </div>
                <div id="currency2Div" data-role="fieldcontain">
                    <label for="currency2">Currency To:</label>
                    <select id="currency2" onchange="changeCurrency2()">
                        <option value="ZZ">Please Select Currency To</option>
                    </select>
                </div>
                <div id="resultAmountDiv" data-role="fieldcontain">
                    <label for="resultAmount">Result:</label>
                    <input id="resultAmount" type="text" value="" readonly="readonly" style="background-color: silver"></input>
                </div>
            </div> 

            <div data-role="footer" data-theme="b"></i></div> 
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:01:15.357

WP7 的 Cordova 有自己的 XHR 请求实现，以支持获取本地数据。请参阅以下内容：

[https://issues.apache.org/jira/browse/CB-208](https://issues.apache.org/jira/browse/CB-208)

您可能必须使用`$.ajax`它才能正常工作。

# java - 保留 CSS 注释而不修改 YUI 压缩器中的内容

> ID：11719061
> 
> 赞同：1
> 
> 时间：2012-07-30T09:53:02.943
> 
> 标签：java, yui

如何在 yui 压缩器中压缩 css 文件转义注释。例如，我想保留评论。根据 yui 文档，如果我把 ! 在评论中，它将保留评论。但我不想更改 CSS 内容。有什么办法可以在 yui 压缩机中做到这一点。您可以建议任何其他适合此类需求的基于 Java 的工具。

# macos - App Store 并启用 App Sandoxing

> ID：11719063
> 
> 赞同：0
> 
> 时间：2012-07-30T09:53:18.920
> 
> 标签：macos, app-store, sandbox

在我的目标摘要中，我注意到有一个`App Sandbox [ ] Enable App Sandboxing`选项。

是否需要检查我的 Mac 应用程序才能被 App Store 接受？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:14:13.530

是：[“App Sandboxing，对提交到 Mac App Store 的所有应用程序的要求”](https://developer.apple.com/devcenter/mac/checklist/)

# ios - UINavigationController 和 UINavigationItem 有什么关系

> ID：11719067
> 
> 赞同：1
> 
> 时间：2012-07-30T09:53:34.550
> 
> 标签：ios, uinavigationcontroller

这些天我对使用 UINavigationController 感到困惑；我想自定义 UINavigationController，更改其背景图像并添加按钮；我在 2 个项目中尝试过这个。首先，我通过使用

`self.navigationController.navigationItem.leftBarButtonItem = customItem;` 但在 secoenter 代码中，此方法不起作用。我必须使用

```
self.navigationItem.leftBarButtonItem = customItem; 
```

如果 ViewController 是 NavigationController 的 rootViewController，它有两个属性：

```
self.navigationController
self.navigationItem 
```

导航有 3 个属性：

```
self.navigationController.navigationController
self.navigationController.navigationBar
self.navigationController.navigationItem 
```

为什么 NavigationController 也有一个属性 NavigationController？

为什么有时我使用

```
self.navigationController.navigationItem 
```

但有时我必须使用

```
self.navigationItem 
```

我真的很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:59:10.977

```
why the NavigationController also has a property NavigationController? 
```

因为它继承自`UIViewController`具有此属性的 。

作为一般规则，您不想直接操作包含视图控制器的导航控制器的属性（这些属性包括导航控制器的导航项和导航栏）。修改`self.navigationItem.whateverPropertyYouWannaSet`；导航项的属性在将视图控制器推送到其堆栈时由导航控制器读取，并且它将根据这些属性设置**自己的导航栏。**

# java - ehcache 程序未运行

> ID：11719071
> 
> 赞同：2
> 
> 时间：2012-07-30T09:53:52.657
> 
> 标签：java, ehcache, terracotta

我是新手`EHcache`。我最近安装`EHcache-2.6.0`在我的`Ubuntu 12.04`系统上。我一直在尝试在 java 中运行一个简单的缓存 put,get 程序，但它给了我以下错误： `We couldn't load configuration data from the server at 'localhost:9510'; retrying. (Error: Connection refused.)` 有人可以帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:58:34.287

Ehcache 用作单 JVM 缓存时不需要连接到远程服务器。

因此，您应该从编写一个简单的 ehcahe 开始（许多文档可以在 Google 上找到）。当你的单 JVM 工作时，转移到分布式的。

编辑：这里有一些简单的代码示例：[http ://ehcache.org/documentation/code-samples](http://ehcache.org/documentation/code-samples)

迅速地 ：

*   创建一个包含缓存配置的 ehcache.xml。

*   实例化一个 CacheManager。

*   使用 CacheManager 检索一个 Cache。

*   使用这个 Cache 来做 put、get 等...

# sqlite - SQLITE - 插入或更新而不更改 ROWID 值

> ID：11719073
> 
> 赞同：9
> 
> 时间：2012-07-30T09:53:59.120
> 
> 标签：sqlite, sql-update

如果存在，我需要更新表行，否则插入新行。我试过了：

```
INSERT OR REPLACE INTO table VALUES ... 
```

但是如果行行存在，则此语句会更改行的 ROWID，这就是我要避免的（我需要 rowid :D）

我还试图找到一种从更新中获取某种返回值的方法，在发生更新的情况下，但我仍然不明白如何......如果我可以从更新语句中获取返回值，我可以选择是否继续插入。

您对这个问题有什么建议或解决方案吗？或者我是否需要制作 ROWID 的副本并使用它而不是“纯”表 ROWID？

在此先感谢，最好的问候

ps：我在看[这里](https://stackoverflow.com/questions/700786/sql-update-a-row-and-returning-a-column-value-with-1-query)，我想知道sqlite是否也有 OUTPUT 特殊词，但谷歌没有帮助我..

----阅读评论后编辑：

表架构示例

```
CREATE TABLE test (
    table_id TEXT NOT NULL,
    some_field TEXT NOT NULL,
    PRIMARY KEY(table_id)
)

INSERT or REPLACE INTO test (table_id, some_field) VALUES ("foo","bar") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T20:57:36.177

我测试了 Chris 的建议，但 rowid 仍然发生了变化。我认为最好的选择是执行 SELECT 以查看是否已经存在具有该键的行。如果是这样，请更新，否则，插入...不错的旧时尚，但保证可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-18T10:50:49.110

把它和select结合起来，像这样

```
INSERT or REPLACE INTO test (ROWID, table_id, some_field)
VALUES ((SELECT ROWID from test WHERE table_id = 'foo' UNION SELECT max(ROWID) + 1 from test limit 1), 'foo','bar') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T14:28:34.890

您需要指定您的`table_id`is`unique`除了是主键：

```
sqlite> CREATE TABLE test (
    table_id TEXT NOT NULL,
    some_field TEXT NOT NULL,
    PRIMARY KEY(table_id),
    UNIQUE(table_id)
);

sqlite> insert or replace into test values("xyz", "other");
sqlite> select * FROM test;
xyz|other
sqlite> insert or replace into test values("abc", "something");
sqlite> insert or replace into test values("xyz", "whatever");
sqlite> select * FROM test;
abc|something
xyz|whatever 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-12T17:10:29.473

From version 3.24.0 (2018-06-04), SQLite now supports an UPSERT clause that will do exactly what the OP needed: [https://www.sqlite.org/lang_UPSERT.html](https://www.sqlite.org/lang_UPSERT.html)

The insert would now look like this:

```
INSERT INTO test (table_id, some_field) VALUES ("foo","baz")
ON CONFLICT(table_id) DO UPDATE SET some_field=excluded.some_field; 
```

# dotnetnuke - 决定在 DotNetNuke 中卸载模块时应删除哪些文件

> ID：11719074
> 
> 赞同：2
> 
> 时间：2012-07-30T09:54:00.510
> 
> 标签：dotnetnuke

假设我们有两个使用 blahblah.dll 的模块。

当我卸载其中一个时，它会删除此 dll 并导致第二个模块停止工作。

有没有办法在清单文件中提到卸载后必须删除哪些文件，哪些不应该？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:49:12.033

使用 DNN 5.x 和更高版本的清单格式，如果您将共享 DLL 注册为程序集并为其设置版本号，它应该足够聪明，如果有其他模块需要它，则不会将其删除。

现在，我一定会在依赖它之前自己检查一下。但除此之外，您可以选择创建第三个模块（共享组件），它本质上将存储公共项目。

# oracle-adf - 元素 f：事件不是预期的。ADF

> ID：11719077
> 
> 赞同：1
> 
> 时间：2012-07-30T09:54:12.053
> 
> 标签：oracle-adf

我正在尝试将一个 f:event 关联到我的片段（jsff）中的一个 af:table，就像在其他页面中读取的那样。

这是代码：

```
< jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1" xmlns:f="http://java.sun.com/jsf/core"
          xmlns:af="http://xmlns.oracle.com/adf/faces/rich" >

    <af:table value="#{bindings.Departments.collectionModel}" var="row" rows="#{bindings.Departments.rangeSize}"
              emptyText="#{bindings.Departments.viewable ? 'No data to display.' : 'Access Denied.'}"
              fetchSize="#{bindings.Departments.rangeSize}" rowBandingInterval="0" id="t1"> 
```

就在下面我想我把这条线：

```
< f:event listener="#{managedBean.listenForEvent}" type="preRenderComponent"/ > 
```

问题是我在设计时出错：Element f:event not expected。但我不知道为什么，因为在我的 JDeveloper 11g2.2.0 版本中包含 JSF 2.0，并且元素 f:event 属于 2.0 版本。

有谁知道为什么我不能引用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:07:12.790

这似乎是设计时的一个错误。您是否尝试过运行时行为？它在运行时工作吗？JDeveloper 11g R2 支持 JSF 2 系统事件。因此，如果设计时间不同，则 IDE 中的页面源验证不正确。我将使用 JDeveloper 11.1.2.2 进行验证并提交错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:14:17.117

问题是您不能将 f:event 附加到 af:table 因为它不知道表的事件（在您的版本中）。这可能会随着 12c 改变（对此不确定）。

但是，您可以用面板组围绕表格并将事件放入。这可以帮助您归档您的用例。

由于您没有告诉我们您要做什么，因此我们无法提供帮助。

# android - 调用函数android

> ID：11719078
> 
> 赞同：0
> 
> 时间：2012-07-30T09:54:12.570
> 
> 标签：android

我有一个 onCreate 函数，除了我有另外两个函数，名称分别为函数 a() 和 b()。我想调用这样的函数：函数 a()、b()、b()、a()，然后我想完成活动。问题是我不能从函数 a() 调用函数 b()。因为那样，我需要从函数 b() 再次调用函数 b() 和 a() ，这不起作用。有没有像我提到的那样调用函数的有效方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:56:05.140

```
 @Override
 public onCreate()
 {
     a(); b(); b(); a();
     finish();
 } 
```

但这看起来太容易相关了，想详细说明您的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:59:19.807

首先。了解如何命名您的方法： [https ://sites.google.com/site/yacoset/Home/naming-tips](https://sites.google.com/site/yacoset/Home/naming-tips)

第二。发布您的代码，使其可见。

第三：

```
public void onCreate(bundledInstance){
super.onCreate(bundledInstance);
a();
b();
b();
a();
} 
```

将为您完成工作。

# sql-server - 将数据从同一个数据库 SSIS 中的一个表传输到另一个表

> ID：11719080
> 
> 赞同：1
> 
> 时间：2012-07-30T09:54:24.297
> 
> 标签：sql-server, ssis

我想使用 SSIS 将数据从 tableA 传输到 tableB。这些表位于我使用 OLEDB 源和 OLEDB 目标的同一服务器和数据库中。但是，它不会写入任何行，也不会报告任何错误。如果我将 OLEDB 源更改为从具有相同数据库名称的不同服务器读取，则它可以工作。如何重新创建 SSIS 包？所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:16:21.793

尝试使用 ADO.NET 源和目标而不是 OLEDB。如果表在同一台服务器和数据库上，那不会有问题。

创建一个执行 SQL 任务，它会截断您的目标表。创建数据流任务，并在任务内创建 ADO.NET 源和目标。如果您之前没有创建过包：

您还可以使用 ImportExportTool 创建 SSIS 包，如下所示： [SSIS Tutorial](http://www.accelebrate.com/sql_training/ssis_2008_tutorial.htm)，然后选中 Save SSIS package 复选框。该工具创建包后，您可以在Visual Studio中打开它并对其进行修改。该包将包含 OLEDB 源和目标。它应该工作。

数据转换组件对于几个问题非常有用。

# sql - WCF oData 表关系

> ID：11719081
> 
> 赞同：1
> 
> 时间：2012-07-30T09:54:29.647
> 
> 标签：sql, wcf, wcf-data-services, odata

我正在尝试从我的 wcf 服务返回一个自定义类。我的代码在下面并出现错误。

服务器在处理请求时遇到错误。异常消息是 'DealerModel' 类型的属性 'UserList' 不是有效属性。不支持类型为基元或复杂类型集合的属性。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：

我正在尝试获取如下所示的 json 值；

```
<Dealer>
        <DealerName/>
        <DealerAdress/>
        <Users>
              <FirstName/>
              <LastName/>
              <FirstName/>
              <LastName/>
        </Users>
</Dealer> 
```

我的代码

```
using System;
using System.Linq;
using System.Data.Objects;
using System.Data.Objects.DataClasses;

public class DataModel:IDisposable
{
    private xModel.xEntities _dbContext = new xSocialModel.xEntities();

    public DataModel()
    {
        Users = from e in _dbContext.Users
                select new UserModel
                {
                    UserID = e.UserID,
                    Firstname = e.Firstname,
                    Lastname = e.Lastname
                };

        Dealers = from e in _dbContext.Dealers
                  select new DealerModel
                  {
                      DealerID = e.DealerID,
                      DealerName = e.Name,
                      DealerAddress = e.Address,
                      UserList = e.Users
                  };

    }

    /// <summary>Returns the list of users.</summary>
    public IQueryable<UserModel> Users { get; private set; }

    public IQueryable<DealerModel> Dealers { get; private set; }

    void IDisposable.Dispose()
    {
        _dbContext.Dispose();
    }
}

    using System;
    using System.Data.Services.Common;
    using System.Runtime.Serialization;
    using System.Collections.Generic;
    using System.ServiceModel;
    using System.Data.Objects.DataClasses;
    using System.Linq;

    /// <summary>Represents a User.</summary>

    [DataServiceKey("UserID")]
    public class UserModel
    {
        public Guid UserID { get; set; }

        public string Firstname { get; set; }

        public string Lastname { get; set; }

    }

    [DataServiceKey("DealerID")]
    public class DealerModel
    {
        public Guid DealerID { get; set; }

        public string DealerName { get; set; }

        public string DealerAddress { get; set; }

        **public EntityCollection<xModel.User> UserList { get; set; }**

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:06:43.223

我也遇到了很多麻烦。投影似乎不如 RIA 服务使用的那么好。我将继续假设您使用的是实体框架。我发现这样做的唯一方法是在您的 edmx 中创建复杂类型。

为此，请打开您的 EDMX，然后在右侧窗格中选择模型浏览器。在“模型”节点下，您将看到“复杂类型”，右键单击并选择“创建复杂类型”。然后在同一个窗口中，您可以命名您的类型并为其提供各种罐装类型的属性。

从您的问题看来，您有一个列表属性。我无法使用包含其他实体的属性创建这些复杂类型。并不是说不可能，只是我无法弄清楚。

现在在您的 DataService 中，创建一个返回类型为新复杂类型的服务方法。在服务方法中，使用投影来填充对象（或列表）并像处理任何其他实体一样返回它。在前端，您需要将其称为服务方法而不是实体，否则 JSON 将与其他实体查询相似。

Sam Mueller 有一个关于使用这种技术的非常好的博客，请查看：[http ://samuelmueller.com/2009/11/working-with-projections-and-dtos-in-wcf-data-services/](http://samuelmueller.com/2009/11/working-with-projections-and-dtos-in-wcf-data-services/)

# c++ - FIR 滤波器（实现）

> ID：11719084
> 
> 赞同：1
> 
> 时间：2012-07-30T09:54:43.303
> 
> 标签：c++, implementation, signal-processing

我想做一个 FIR 滤波器。我有一个系数数组（buffer[size]）和一个数据数组（filter[size_filter]）。我必须在两个数组之间进行卷积：

```
for(j = 0;j < size+size_filter;j++)
{
  output[j] = 0;
  for(i = 0;i < size_filter;i++)
  {         
    output[j] += buffer[i]*filter[j-i];
  }
} 
```

output[size+size_filter] 是结果。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-01T04:58:44.070

据我所知，给出的答案都不起作用。我正在从网站上复制它，但下面的代码非常适合处理文件中的样本：

```
#include <stdio.h>
#include <stdint.h>

//////////////////////////////////////////////////////////////
//  Filter Code Definitions
//////////////////////////////////////////////////////////////

// maximum number of inputs that can be handled
// in one function call
#define MAX_INPUT_LEN   80
// maximum length of filter than can be handled
#define MAX_FLT_LEN     63
// buffer to hold all of the input samples
#define BUFFER_LEN      (MAX_FLT_LEN - 1 + MAX_INPUT_LEN)

// array to hold input samples
double insamp[ BUFFER_LEN ];

// FIR init
void firFloatInit( void )
{
    memset( insamp, 0, sizeof( insamp ) );
}

// the FIR filter function
void firFloat( double *coeffs, double *input, double *output,
       int length, int filterLength )
{
    double acc;     // accumulator for MACs
    double *coeffp; // pointer to coefficients
    double *inputp; // pointer to input samples
    int n;
    int k;

    // put the new samples at the high end of the buffer
    memcpy( &insamp[filterLength - 1], input,
            length * sizeof(double) );

    // apply the filter to each input sample
    for ( n = 0; n < length; n++ ) {
        // calculate output n
        coeffp = coeffs;
        inputp = &insamp[filterLength - 1 + n];
        acc = 0;
        for ( k = 0; k < filterLength; k++ ) {
            acc += (*coeffp++) * (*inputp--);
        }
        output[n] = acc;
    }
    // shift input samples back in time for next time
    memmove( &insamp[0], &insamp[length],
            (filterLength - 1) * sizeof(double) );

}

//////////////////////////////////////////////////////////////
//  Test program
//////////////////////////////////////////////////////////////

// bandpass filter centred around 1000 Hz
// sampling rate = 8000 Hz

#define FILTER_LEN  63
double coeffs[ FILTER_LEN ] =
{
  -0.0448093,  0.0322875,   0.0181163,   0.0087615,   0.0056797,
   0.0086685,  0.0148049,   0.0187190,   0.0151019,   0.0027594,
  -0.0132676, -0.0232561,  -0.0187804,   0.0006382,   0.0250536,
   0.0387214,  0.0299817,   0.0002609,  -0.0345546,  -0.0525282,
  -0.0395620,  0.0000246,   0.0440998,   0.0651867,   0.0479110,
   0.0000135, -0.0508558,  -0.0736313,  -0.0529380,  -0.0000709,
   0.0540186,  0.0766746,   0.0540186,  -0.0000709,  -0.0529380,
  -0.0736313, -0.0508558,   0.0000135,   0.0479110,   0.0651867,
   0.0440998,  0.0000246,  -0.0395620,  -0.0525282,  -0.0345546,
   0.0002609,  0.0299817,   0.0387214,   0.0250536,   0.0006382,
  -0.0187804, -0.0232561,  -0.0132676,   0.0027594,   0.0151019,
   0.0187190,  0.0148049,   0.0086685,   0.0056797,   0.0087615,
   0.0181163,  0.0322875,  -0.0448093
};

void intToFloat( int16_t *input, double *output, int length )
{
    int i;

    for ( i = 0; i < length; i++ ) {
        output[i] = (double)input[i];
    }
}

void floatToInt( double *input, int16_t *output, int length )
{
    int i;

    for ( i = 0; i < length; i++ ) {
        if ( input[i] > 32767.0 ) {
            input[i] = 32767.0;
        } else if ( input[i] < -32768.0 ) {
            input[i] = -32768.0;
        }
        // convert
        output[i] = (int16_t)input[i];
    }
}

// number of samples to read per loop
#define SAMPLES   80

int main( void )
{
    int size;
    int16_t input[SAMPLES];
    int16_t output[SAMPLES];
    double floatInput[SAMPLES];
    double floatOutput[SAMPLES];
    FILE   *in_fid;
    FILE   *out_fid;

    // open the input waveform file
    in_fid = fopen( "input.pcm", "rb" );
    if ( in_fid == 0 ) {
        printf("couldn't open input.pcm");
        return;
    }

    // open the output waveform file
    out_fid = fopen( "outputFloat.pcm", "wb" );
    if ( out_fid == 0 ) {
        printf("couldn't open outputFloat.pcm");
        return;
    }

    // initialize the filter
    firFloatInit();

    // process all of the samples
    do {
        // read samples from file
        size = fread( input, sizeof(int16_t), SAMPLES, in_fid );
        // convert to doubles
        intToFloat( input, floatInput, size );
        // perform the filtering
        firFloat( coeffs, floatInput, floatOutput, size,
               FILTER_LEN );
        // convert to ints
        floatToInt( floatOutput, output, size );
        // write samples to file
        fwrite( output, sizeof(int16_t), size, out_fid );
    } while ( size != 0 );

    fclose( in_fid );
    fclose( out_fid );

    return 0;
} 
```

摘自：

[https://sestevenson.wordpress.com/implementation-of-fir-filtering-in-c-part-1/](https://sestevenson.wordpress.com/implementation-of-fir-filtering-in-c-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:00:31.097

```
output[j] += filter[i]*buffer[j-i]; 
```

并确保 ji 不会是负数

# javascript - Timeago jquery插件时区

> ID：11719089
> 
> 赞同：0
> 
> 时间：2012-07-30T09:54:52.193
> 
> 标签：javascript, c#, jquery, asp.net, timeago

我正在开发一个 asp.net 应用程序，在该应用程序中我使用[`timeago`](http://timeago.yarp.com/)jQuery 插件，我面临这样一个事实，即每当我的本地时间是 GMT + 5.00 并且在服务器端我得到 UTC 时间时，我都会得到 UTC 时间。

所以现在的问题是如何将 UTC 转换为 GMT+5.00，如果我现在得到时间，那么它会给我 5 小时前的输出，这表明输出是 GMT 格式的。

我知道这个问题在重复，但我无法理解之前讨论的问题。

该插件的代码如下：

```
(function ($) {
    $.timeago = function (timestamp) {
        if (timestamp instanceof Date) {
            return inWords(timestamp);
        } else if (typeof timestamp === "string") {
            return inWords($.timeago.parse(timestamp));
        } else if (typeof timestamp === "number") {
            return inWords(new Date(timestamp));
        } else {
            return inWords($.timeago.datetime(timestamp));
        }
    };
    var $t = $.timeago;

    $.extend($.timeago, {
        settings: {
            refreshMillis: 60000,
            allowFuture: false,
            strings: {
                prefixAgo: null,
                prefixFromNow: null,
                suffixAgo: "ago",
                suffixFromNow: "from now",
                seconds: "less than a minute",
                //minute: "about a minute",
                minute: "a minute",
                minutes: "%d minutes",
                //hour: "about an hour",
                hour: "an hour",
                //hours: "about %d hours",
                hours: "%d hours",
                day: "a day",
                days: "%d days",
                //month: "about a month",
                month: "a month",
                months: "%d months",
                //year: "about a year",
                year: "a year",
                years: "%d years",
                wordSeparator: " ",
                numbers: []
            }
        },
        inWords: function (distanceMillis) {
            var $l = this.settings.strings;
            var prefix = $l.prefixAgo;
            var suffix = $l.suffixAgo;
            if (this.settings.allowFuture) {
                if (distanceMillis < 0) {
                    prefix = $l.prefixFromNow;
                    suffix = $l.suffixFromNow;
                }
            }

            var seconds = Math.abs(distanceMillis) / 1000;
            var minutes = seconds / 60;
            var hours = minutes / 60;
            var days = hours / 24;
            var years = days / 365;

            function substitute(stringOrFunction, number) {
                var string = $.isFunction(stringOrFunction) ? stringOrFunction(number, distanceMillis) : stringOrFunction;
                var value = ($l.numbers && $l.numbers[number]) || number;
                return string.replace(/%d/i, value);
            }

            var words = seconds < 45 && substitute($l.seconds, Math.round(seconds)) ||
        seconds < 90 && substitute($l.minute, 1) ||
        minutes < 45 && substitute($l.minutes, Math.round(minutes)) ||
        minutes < 90 && substitute($l.hour, 1) ||
        hours < 24 && substitute($l.hours, Math.round(hours)) ||
        hours < 42 && substitute($l.day, 1) ||
        days < 30 && substitute($l.days, Math.round(days)) ||
        days < 45 && substitute($l.month, 1) ||
        days < 365 && substitute($l.months, Math.round(days / 30)) ||
        years < 1.5 && substitute($l.year, 1) ||
        substitute($l.years, Math.round(years));

            var separator = $l.wordSeparator === undefined ? " " : $l.wordSeparator;
            return $.trim([prefix, words, suffix].join(separator));
        },
        parse: function (iso8601) {
            var s = $.trim(iso8601);
            s = s.replace(/\.\d+/, ""); // remove milliseconds
            s = s.replace(/-/, "/").replace(/-/, "/");
            s = s.replace(/T/, " ").replace(/Z/, " UTC");
            s = s.replace(/([\+\-]\d\d)\:?(\d\d)/, " $1$2"); // -04:00 -> -0400
            return new Date(s);
        },
        datetime: function (elem) {
            var iso8601 = $t.isTime(elem) ? $(elem).attr("datetime") : $(elem).attr("title");
            return $t.parse(iso8601);
        },
        isTime: function (elem) {
            // jQuery's `is()` doesn't play well with HTML5 in IE
            return $(elem).get(0).tagName.toLowerCase() === "time"; // $(elem).is("time");
        }
    });

    $.fn.timeago = function () {
        var self = this;
        self.each(refresh);

        var $s = $t.settings;
        if ($s.refreshMillis > 0) {
            setInterval(function () { self.each(refresh); }, $s.refreshMillis);
        }
        return self;
    };

    function refresh() {
        var data = prepareData(this);
        if (!isNaN(data.datetime)) {
            $(this).text(inWords(data.datetime));
        }
        return this;
    }

    function prepareData(element) {
        element = $(element);
        if (!element.data("timeago")) {
            element.data("timeago", { datetime: $t.datetime(element) });
            var text = $.trim(element.text());
            if (text.length > 0 && !($t.isTime(element) && element.attr("title"))) {
                element.attr("title", text);
            }
        }
        return element.data("timeago");
    }

    function inWords(date) {
        return $t.inWords(distance(date));
    }

    function distance(date) {
        return (new Date().getTime() - date.getTime());
    }

    // fix for IE6 suckage
    document.createElement("abbr");
    document.createElement("time");
 (jQuery));
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:39:37.797

尝试将[Livestamp.js](http://mattbradley.github.com/livestampjs)与以下内容一起使用：

`date`是`DateTime`您要输出的对象。

```
<span data-livestamp="<%= (date - new DateTime(1970,1,1,0,0,0)).TotalSeconds) %>">
</span> 
```

您正在输出 Unix 时间戳，它始终采用 UTC，因此用户计算机所在的时区并不重要。它总是会打印出正确的“timeago”文本。

# sql-server - 在 MS Access 中使用 Visual Basic 从 SQL Server 数据库中读取数据

> ID：11719092
> 
> 赞同：1
> 
> 时间：2012-07-30T09:54:59.337
> 
> 标签：sql-server, ms-access

从 MS Access 从 VB 中的 SQL Server 数据库读取数据的最佳方法是什么？

我设置了一个 SQL Server 数据库，并且正在 Access 中处理表单等。现在我需要读取一个布尔值并在 VB 中这样做。

我想在不打开新连接的情况下这样做。这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:49:48.910

您可以对链接表运行查询。据我所知，SQL Server 中布尔值的通常选择是位：

```
SELECT dbo_Table1.ID, dbo_Table1.ABoolean
FROM dbo_Table1
WHERE dbo_Table1.ABoolean=True 
```

在 MS Access 中，True 显示为 -1，在 SQL Server 中显示为 1。

如果您需要这样做，查询也可以通过 VBA 运行。

```
Dim rs As DAO.Recordset

Set rs = CurrentDb.OpenRecordset("dbo_table_1")
Do While Not rs.EOF
    If rs!ABoolean = True Then
        Debug.Print rs!ID
    End If
    rs.MoveNext
Loop 
```

或者

```
sSQL = "SELECT ID, ABoolean FROM dbo_table_1 WHERE ABoolean=True"
Set rs = CurrentDb.OpenRecordset(sSQL)
rs.MoveLast
Debug.Print rs.RecordCount 
```

或者

```
Debug.Print DLookup("Aboolean", "dbo_table_1", "ID=37") 
```

# c++ - 使用 CSerial (C++) 打开虚拟 COM 端口

> ID：11719093
> 
> 赞同：3
> 
> 时间：2012-07-30T09:55:05.470
> 
> 标签：c++, winapi, visual-c++, serial-port

我正在使用[Ramon de Klein 的 CSerial 库](http://www.codeproject.com/Articles/992/Serial-library-for-C)从我的 C++ 代码中打开和管理串行端口。

我的硬件实现了一个带有 FTDI 芯片的串行 tu USB 转换器，因此我能够将串行端口连接到我 CPU 中的 USB 插头。安装 FTDI 驱动程序后，“设备管理器”(Windows) 中会显示一个虚拟 COM 端口。

如果我尝试打开它，它可以工作。

但现在我已经安装了一个这样的 USB 到以太网[服务器](http://www.visionsystems.de/produkte/413.html)。所以我安装了它的驱动程序和软件，在将一些 USB 设备连接到它之后，它被检测到并作为虚拟串行端口添加到“设备管理器”窗口。

但是当我尝试打开端口时，它不起作用。**如果我使用类似超级终端的应用程序打开端口，它确实可以工作，就像它是一个普通的串行端口一样，但不是在我的代码中。**

CSerial 库就像在创建一个新文件一样工作，并且给定 LastErrorCode 为 2：“找不到文件”。这是 CSerial 库中的 Open 方法：

```
LONG CSerial::Open (LPCTSTR lpszDevice, DWORD dwInQueue, DWORD dwOutQueue, bool fOverlapped)
{
    // Reset error state
    m_lLastError = ERROR_SUCCESS;

    // Check if the port isn't already opened
    if (m_hFile)
    {
        m_lLastError = ERROR_ALREADY_INITIALIZED;
        _RPTF0(_CRT_WARN,"CSerial::Open - Port already opened\n");
        return m_lLastError;
    }

    // Open the device
    m_hFile = ::CreateFile(lpszDevice,
                           GENERIC_READ|GENERIC_WRITE,
                           0,
                           0,
                           OPEN_EXISTING,
                           fOverlapped?FILE_FLAG_OVERLAPPED:0,
                           0);
    if (m_hFile == INVALID_HANDLE_VALUE)
    {
        // Reset file handle
        m_hFile = 0;

        // Display error
        m_lLastError = ::GetLastError();
        _RPTF0(_CRT_WARN, "CSerial::Open - Unable to open port\n");
        return m_lLastError;
    }

#ifndef SERIAL_NO_OVERLAPPED
    // We cannot have an event handle yet
    _ASSERTE(m_hevtOverlapped == 0);

    // Create the event handle for internal overlapped operations (manual reset)
    if (fOverlapped)
    {
        m_hevtOverlapped = ::CreateEvent(0,true,false,0);
        if (m_hevtOverlapped == 0)
        {
            // Obtain the error information
            m_lLastError = ::GetLastError();
            _RPTF0(_CRT_WARN,"CSerial::Open - Unable to create event\n");

            // Close the port
            ::CloseHandle(m_hFile);
            m_hFile = 0;

            // Return the error
            return m_lLastError;
        }
    }
#else

    // Overlapped flag shouldn't be specified
    _ASSERTE(!fOverlapped);

#endif

    // Setup the COM-port
    if (dwInQueue || dwOutQueue)
    {
        // Make sure the queue-sizes are reasonable sized. Win9X systems crash
        // if the input queue-size is zero. Both queues need to be at least
        // 16 bytes large.
        _ASSERTE(dwInQueue >= 16);
        _ASSERTE(dwOutQueue >= 16);

        if (!::SetupComm(m_hFile,dwInQueue,dwOutQueue))
        {
            // Display a warning
            long lLastError = ::GetLastError();
            _RPTF0(_CRT_WARN,"CSerial::Open - Unable to setup the COM-port\n");

            // Close the port
            Close();

            // Save last error from SetupComm
            m_lLastError = lLastError;
            return m_lLastError;    
        }
    }

    // Setup the default communication mask
    SetMask();

    // Non-blocking reads is default
    SetupReadTimeouts(EReadTimeoutNonblocking);

    // Setup the device for default settings
    COMMCONFIG commConfig = {0};
    DWORD dwSize = sizeof(commConfig);
    commConfig.dwSize = dwSize;
    if (::GetDefaultCommConfig(lpszDevice,&commConfig,&dwSize))
    {
        // Set the default communication configuration
        if (!::SetCommConfig(m_hFile,&commConfig,dwSize))
        {
            // Display a warning
            _RPTF0(_CRT_WARN,"CSerial::Open - Unable to set default communication configuration.\n");
        }
    }
    else
    {
        // Display a warning
        _RPTF0(_CRT_WARN,"CSerial::Open - Unable to obtain default communication configuration.\n");
    }

    // Return successful
    return m_lLastError;
} 
```

我不明白为什么它与将 USB 直接插入计算机的方式不同：我一直认为如果 COM 列在“设备管理器”中，它应该可以工作，而与它真正连接的位置无关。

总的来说，数据的来源是：

**RS232--->转换为USB--->USB CPU接口--->在COM口中虚拟化为RS232**

现在是：

**RS232--->转换为USB--->通过“netUSB服务器”转换为以太网--->CPU的以太网/WiFi--->虚拟化为USB设备--->虚拟化为COM中的RS232港口**

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:29:18.000

问题的出现不是因为硬件元素，而是因为分配给 COM 端口的编号。

当 COM 端口超过 9 时，CreateFile 函数无法打开设备，并返回一个 INVALID_HANDLE_VALUE。

[报告了Bug，这里](http://support.microsoft.com/kb/115831)报告了解决方案。

# sql-server - 使用 SQL Server 循环遍历记录

> ID：11719094
> 
> 赞同：0
> 
> 时间：2012-07-30T09:55:06.480
> 
> 标签：sql-server, ms-access

作为一个 MS Access 团队，我们的 IT 团队不允许我过多地接触 SQL 服务器，所以我不知道如何在其中循环记录集以完成我需要的计划工作。我已经对我想做的事情进行了伪编码，但如果有人能指出这是如何完成的，我将不胜感激......

```
for every record in qry_deliveryqueue
loop
if not fail then
  send docID field to SP_sendfile
  set delivereddate=getdate()
else
 insert into tbl_errors (errdate,docid) values (getdate(), docid)
endif
next record 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:58:15.387

您所追求的语法是`CURSOR`. 该文档有很好的示例，可以为您指明正确的方向。您可能想围绕逻辑编写一个存储过程并从调度程序调用它。

游标通常效率低下，但我假设您的 sp_sendfile 有一些更复杂的逻辑，无法将所有记录视为一个集合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:01:05.517

您可以[使用 Sql while 语法](http://msdn.microsoft.com/en-us/library/ms178642.aspx)或[Sql Cursor 语法](http://msdn.microsoft.com/en-us/library/ms180169.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:07:07.857

试试这个 ion SQL server（这个代码是 while 循环的示例。所以你必须根据你的要求调整它）

--在sql服务器中

```
Declare @idmin int,@idmax int
select @idmin=MIN(id) from  qry_deliveryqueue --This is first record in qry_deliveryqueue
select @idmax=MAX(id) from  qry_deliveryqueue --This is last record in qry_deliveryqueue
--You can 
While(@idmin <= @idmax)
begin
IF @flag<>'Fail'
begin
--  send docID field to SP_sendfile
--  set delivereddate=getdate()
end
else
begin
insert into tbl_errors (errdate,docid) values (getdate(), docid)
end
SET @idmin=@idmin+1
end 
```

# java - 获取由查询更新的行的 ID

> ID：11719096
> 
> 赞同：4
> 
> 时间：2012-07-30T09:55:10.880
> 
> 标签：java, mysql, sql, jdbc, prepared-statement

我想获取受 Java 查询影响的行的主键列值。我正在使用 MySql 数据库。假设查询是这样的，

```
update user set pincode = 390023 where area like '%ABC Road%' 
```

然后在java中，我想要更新每行的id（每行的主键）。Java 中的 Statement 对象可能会发生一些事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T09:56:17.433

在更新之前选择行。使用`select id from user where area like '%ABC Road%'`.

请记住将这两个操作包含在事务中以避免这两个操作之间的行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:05:03.713

```
SELECT id FROM user WHERE area LIKE '%ABC Road%'; 
```

或替代方式：

```
SET @ids = NULL;

UPDATE user
SET pincode = 390023
WHERE area LIKE '%ABC Road%'
      AND (SELECT @ids := CONCAT_WS(',', id, @ids));

SELECT @ids; 
```

# php - 简单的 html dom - 除了第一个之外的所有 tr

> ID：11719099
> 
> 赞同：1
> 
> 时间：2012-07-30T09:55:25.487
> 
> 标签：php, simple-html-dom

我想`<tr>`从第二个开始找到所有内容，但我不知道如何正确..

```
$items = $html->find('tr'); 
```

那段代码得到所有 trs 但我想要除了第一个之外的每个人，因为那个包含`<th>`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T09:58:51.567

只需切断第一个元素。

```
$items = array_slice($html->find('tr'), 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:11:03.757

如果 Simple html dom 像 Jquery 一样工作，请尝试像这样使用：

```
$items = $html->find('tr:not(:has(th)'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T09:57:19.603

当您使用`$html->find('tr');`不关心第一个“索引/行”的循环来获取列表时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:03:14.690

您可以从 $html->find('tr'); 获取所有 trs；从此，您可以添加条件以忽略如果对象的下一个元素是“th”标签，那么您可以忽略该 tr。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T10:04:04.127

正如 PoulsQ 建议的那样，您可以这样做

```
$firstTr = true;

foreach($html->find('tr') as $tr) {
  if(!$firstTr) {
    // YOUR LOGIC FOR A TR HERE
  }
  else {
    $firstTr = false;
  }
} 
```

但我认为如果您查询 DOM 以忽略第一个元素，它会是更好的代码。

# boolean - 使用值 0 和 1（布尔值）

> ID：11719120
> 
> 赞同：0
> 
> 时间：2012-07-30T09:56:33.703
> 
> 标签：boolean, boolean-logic, boolean-expression, boolean-operations

是

```
f = a'ab; 
```

一样

```
f = 1 
```

这可能吗？当我简化某些事情时，我得到了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:01:06.977

如果这是为了代表（我认为这是可能的情况）：

```
NOT-a AND a AND b 
```

那么，不，无论`a`or的值如何，它都是错误的`b`。那是因为其中一个`a`or`NOT-a`肯定是假的，`FALSE AND anything`是假的并且操作是关联的：`(a AND b) AND c == a AND (b AND c)`。

如果它是为了代表：

```
NOT-a OR a OR b 
```

那么，是的，无论`a`or的值如何，它都是正确的`b`。那是因为其中一个`a`或`NOT-a`绝对是真的并且`TRUE OR anything`是真的。关联性规则也适用于此。

# android - 加载高分辨率 3598 x 3598 的精灵表

> ID：11719121
> 
> 赞同：0
> 
> 时间：2012-07-30T09:56:36.657
> 
> 标签：android, bitmap, out-of-memory

我正在尝试将 spritesheet 图像加载为位图，图像分辨率为 3598 x 3598，大小为 1.21MB。但是当我尝试从以下代码加载它时

```
AssetManager assets = this.getAssets();
try {
        InputStream inputStream = assets.open("spritesheet.png");
        BufferedInputStream bufferedStream = new BufferedInputStream(inputStream);
        Bitmap bitMap = BitmapFactory.decodeStream(bufferedStream);
} catch (Exception e) {} 
```

我收到OOM（内存不足）异常：'（，请指导我该怎么办？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:00:02.473

您应该减小精灵表的大小。您试图将 3598 x 3598 x 8 字节加载到内存中......这很多。

也许你可以把它分成更小更易于管理的部分？

# php - 获取内容 使用 PHP 获取 id 或类

> ID：11719122
> 
> 赞同：0
> 
> 时间：2012-07-30T09:56:39.383
> 
> 标签：php, javascript, jquery, ajax, get

我正在使用这个[脚本](http://shubhamtipstricks.com/2052/facebook-like-extract-url-data-using-jquery-php-and-ajax/)，它允许在元标记“描述”中显示 url 内容。它使用这样的php：

```
$tags = get_meta_tags($url); 
```

然后这样称呼它：

```
<label class="desc">
    <?php  echo @$tags['description']; ?>
</label> 
```

如何修改它以获取 p、div、id、class 而不是元标记的内容（纯文本）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:02:46.587

不，你不能修改它来得到你想要的，这个功能是针对元标签的。

您可以改用[DOM API](http://php.net/manual/en/domdocument.loadhtmlfile.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:02:43.970

p、div 等中包含的内容与元数据不同。元数据是标题中的特殊内容，如下所示：

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

这是`get_meta_tags();`函数返回的唯一数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:04:09.600

您可能会获取文件内容，然后使用 xmlreader 解析内容

$rContent = file("someHtmlFile.html"); $content = join(" ", $rContent); ...

这是 XML 阅读器文档的链接：http: [//de.php.net/manual/de/book.xmlreader.php](http://de.php.net/manual/de/book.xmlreader.php)

格雷茨，卢波

# android - Android：共享多种内容类型

> ID：11719125
> 
> 赞同：1
> 
> 时间：2012-07-30T09:56:43.793
> 
> 标签：android, android-intent, sharing

我想分享音频文件。我有一个服务器，我可以上传我的文件。我想共享音频文件本身（例如使用 Dropbox）或将文件上传到我的服务器并仅共享指向它的链接（通过电子邮件）。当我创建选择器时，我希望显示所有应用程序，它们可以共享音频、文本或两者兼而有之。而且我只想通过只能共享音频的应用程序发送音频文件。我怎样才能做到这一点？

# sql-server-2008 - 一个错误停止了复制代理的运行

> ID：11719128
> 
> 赞同：0
> 
> 时间：2012-07-30T09:56:56.840
> 
> 标签：sql-server-2008, replication, merge-replication

'正在两个数据库之间运行合并复制，一切都很好。从昨天开始，我在运行作业步骤从复制作业中收到此错误消息：

```
Executed as user: NT AUTHORITY\SYSTEM. String or binary data would be truncated. [SQLSTATE 22001] (Error 8152).  The step failed. 
```

什么原因会导致这个错误信息？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:09:57.670

一个非常长的存储过程导致了问题，因为复制将更改的过程更新到订阅者的更改。负责采用 Alter 脚本的列只有 (4000) 个字符容量，然后这个特定过程的 Alter 脚本不适合。罕见的情况，但发生了！

# ios - UILabel 在 UIViewControllers 的底栏出现和消失

> ID：11719130
> 
> 赞同：0
> 
> 时间：2012-07-30T09:57:05.420
> 
> 标签：ios

我想在导航控制器推送和弹出的所有 UIViewControllers 的底部工具栏中添加一个 UILabel：

```
- (void)init
{        
    //Bottom toolbar label
    self.titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0 , 11.0f, 320, 21.0f)];
    [self.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
    [self.titleLabel setBackgroundColor:[UIColor clearColor]];
    [self.titleLabel setTextColor:[UIColor whiteColor]];
    [self.titleLabel setText:@"Selected Comics: 0"];
    [self.titleLabel setTextAlignment:UITextAlignmentLeft];

}

- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{

    UIBarButtonItem *labelButton = [[UIBarButtonItem alloc] initWithCustomView:self.titleLabel];

    UIBarButtonItem *flex = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil] autorelease];

    [viewController setToolbarItems:[NSArray arrayWithObjects:labelButton, flex, sortButton, nil] animated:animated];

    [labelButton release];
} 
```

但是，在我推送并弹出视图控制器后，标签出现并立即消失。另一个按钮 (sortButton) 仍然可见。

我应该怎么做才能保持标签可见？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:42:09.397

你的问题是这样的：self.titleLabel。

多个 labelButton 实例都引用该视图，并且当您设置工具栏项目时（我假设为动画 == YES），titleLabel 将从您不期望的超级视图中删除。

为每次使用创建一个新的 titleLabel，您的问题就会消失。

# xaml - 从 XAML 中的图像数组绑定

> ID：11719135
> 
> 赞同：0
> 
> 时间：2012-07-30T09:57:18.883
> 
> 标签：xaml, binding

在 XAML 中我有

```
<Image x:Name="optionImage1" Source="{Binding OptionsImage}"/> 
```

OptionsImage 正在返回 ImageSource[] -array。

如何绑定到数组的特定点，即 {Binding OptionsImage=[1]}

正如您从问题中看到的那样，我对 XAML 完全陌生，感谢“傻瓜答案”！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:10:15.903

我假设您使用的是 WPF 或 Silverlight。

你快到了。[使用此语法](http://msdn.microsoft.com/en-us/library/ms742451.aspx)。

```
<Image x:Name="optionImage1" Source="{Binding OptionsImage[1]}"/> 
```

另请参阅此问题：[在 WPF 中绑定到由属性指定的数组元素](https://stackoverflow.com/questions/4100690/binding-in-wpf-to-element-of-array-specified-by-property)

# xcode - 无法在 OSX Mountain LIon 的代码中找到代码签名选项

> ID：11719137
> 
> 赞同：0
> 
> 时间：2012-07-30T09:57:24.717
> 
> 标签：xcode, macos, osx-gatekeeper

尝试对应用程序进行代码设计以兼容 OSX 10.8 中引入的 Gatekeeper

按照[https://developer.apple.com/resources/developer-id/Developer-ID-Tutorial.pdf中的说明进行操作](https://developer.apple.com/resources/developer-id/Developer-ID-Tutorial.pdf)

*   创建开发者账号，等待确认
*   从 Xcode 4.4 创建和导出开发者证书
*   创建了一个新的 OSX/Cocoa 应用程序并设置产品名称和公司标识符字段以提供正确的捆绑标识符

然后在 pdf 的第 9 页上，**使用开发人员 ID 证书进行代码签名**部分 告诉我去构建设置，然后搜索“代码签名”以仅显示代码签名设置。

但我看不到代码签名选项，

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:29:49.347

在 Xcode 中选择您的目标并搜索“代码签名身份”（CODE_SIGN_IDENTITY），然后输入“开发人员 ID 应用程序”。

您还可以在终端中手动签署应用程序：

```
codesign -f -s "Developer ID Application" MyApp.app 
```

您可以验证您的应用程序是否正确签名：

```
codesign -vvv MyApp.app 
```

# sql-server - 如何在数据库中插入数据而不插入重复项？(vb.net)

> ID：11719138
> 
> 赞同：0
> 
> 时间：2012-07-30T09:57:26.627
> 
> 标签：sql-server, vb.net, sql-server-2008

我一直在网上搜索，这个查询应该有效：

```
INSERT INTO Groep(Naam) SELECT ? WHERE NOT EXISTS (SELECT * FROM Groep Where Naam=?) 
```

但它没有..我得到一个`OleDbException`：

> 关键字“DEFAULT”附近的语法不正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:02:40.997

尝试这个 ：

```
INSERT INTO TableName (ColumnName) SELECT '" + value + "' WHERE NOT EXISTS ( SELECT ColumnName from TableName WHERE Name = '" + value + "')"; 
```

后跟一个 ExecuteNonQuery()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:03:55.060

假设数据库是 SQL Server ...

## 方法#1

**创建唯一键**

`Alter Table TableName ADD CONSTRAINT ConstraintName PRIMARY KEY (ColumnName)`

* * *

## 方法#2

```
If Not Exists(Select PrimaryKey From TableName Where ColumnName = 'Value')
Begin
    Insert Into TableName(Columns....)
    Values(......)
End 
```

* * *

## 方法#3

```
Declare @Var int
select @Var = column1 from TableName Where Column2 = 'Value'
if(@Var is null)
Begin
    Insert Into TableName(Columns....)
    Values(......)
End 
```

# spring-webflow - SWF：渲染片段不渲染

> ID：11719139
> 
> 赞同：2
> 
> 时间：2012-07-30T09:57:36.460
> 
> 标签：spring-webflow

我正在使用 SWF，在一个视图中我有一张桌子。调用一些动作，这个表的内容在数据库中发生了变化，所以应该在界面上显示不同的值。这些值包括一个复选框，该复选框在运行操作后仍处于选中状态。

这是我的代码，遵循[文档](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/htmlsingle/spring-webflow-reference.html#event-handlers-render)：

**流.xml**

```
<transition on="someTransition" to="overview">
            <evaluate expression="bean.someAction(someValue)" />
            <render fragments="tableForm" /> <!--I have also tried tableForm:row -->
        </transition> 
```

**页面.jsp**

```
<form:form method="POST" id="tableForm">
     <display:table id="row">
           <display:column title="">
            <form:checkbox path="chosenIds" value="${row.id}"/>
          </display:column>
          <display:column title="Value to change">
            <c:out value="${row.changedValue}"/>
        </display:column>
          <display:footer>
            <div class="tableFooter" >
                <input type="submit" name="_eventId_someTransition" value="Send" processIds="*"/>
            </div>
        </display:footer>
      </display:table>
  </form:form> 
```

我究竟做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:21:54.280

部分更新不适用于我认为的表格。它适用于所有输出面板，无论是核心 jsf、primefaces 还是 a4j。

[http://static.springsource.org/spring-webflow/docs/2.0.x/reference/htmlsingle/spring-webflow-reference.html](http://static.springsource.org/spring-webflow/docs/2.0.x/reference/htmlsingle/spring-webflow-reference.html)

很好的参考项目 spring-webflow-2.3.1.RELEASE\projects\spring-webflow-samples\booking-faces 与 spring 版本捆绑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:45:05.797

就我而言，我确实需要进行新搜索才能从数据库中检索新值。一旦我再次填写我正在显示的数据类型，新值就在那里，我不需要额外的渲染。
无论如何，我只是出于好奇而遵循相同的步骤，在其他情况下，我没有让渲染工作。即使我的问题解决了，我也希望看到一个渲染工作！如果有人能告诉我我的代码有什么问题，那将来会有所帮助。

谢谢！

# windows-7 - Windows Phone 8 SDK 会在 Windows 7 上运行吗？

> ID：11719142
> 
> 赞同：20
> 
> 时间：2012-07-30T09:58:02.377
> 
> 标签：windows-7, windows-phone-8

你怎么想？我可以使用我的 Sony Vaio 进行开发吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T13:00:07.993

您可以修改安装文件以允许它安装在 Windows 7 上。
以下是 WP8 SDK 9900 的修改安装文件：

1.  运行`InstallWP8SDK.bat`开始安装！
2.  下载：[http ://www5.zippyshare.com/v/67777536/file.html](http://www5.zippyshare.com/v/67777536/file.html)

在旧的 Windows 7 上开发愉快。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T10:03:25.807

不可以，WP8 SDK 只能在 Windows 8 上运行。请参阅以下参考：

[http://www.wpcentral.com/windows-phone-8-sdk-preview-release-leaks-online](http://www.wpcentral.com/windows-phone-8-sdk-preview-release-leaks-online)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-30T13:26:45.393

要使用@Milkman 的解决方案，您需要执行以下操作：

1.  使用. `/layout`_`WPexpress_full.exe`
2.  将提供的存档解压缩到目标文件夹，替换现有文件。
3.  继续...

确认 WP8 项目至少在 VS2012 中打开和构建。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-30T10:03:58.823

不要认为有什么官方的呢。但首先消息是仅支持 Windows 8。

也看看这个，即： http: [//www.wpcentral.com/windows-phone-8-sdk-preview-release-leaks-online](http://www.wpcentral.com/windows-phone-8-sdk-preview-release-leaks-online)

# java - 如何在 Java 应用程序中导入 com.ms.com.*

> ID：11719143
> 
> 赞同：1
> 
> 时间：2012-07-30T09:58:05.687
> 
> 标签：java, visualj#, j++

需要在 java 应用程序中导入 com.ms.com.* 我找不到任何库可供下载。我在搜索时看到了这个链接，但它对我没有帮助。

[http://msdn.microsoft.com/en-us/library/t3wab6f3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/t3wab6f3(v=vs.80).aspx)！

谁能告诉我它是否在java中受支持，以及如何在其他地方使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:14:10.947

哎呀，j#....

1）获取来源

2）编译一个JAR

3) 将该 JAR 添加到您的构建路径中

4）你会在你的项目中看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:05:49.023

谢谢，我已经使用了 jacob 库并替换了 import com.ms.com。*; 导入 com.jacob.com。*; 由于 com.jacob 类旨在与 Microsoft® com.ms 类兼容

# ruby-on-rails - rjs 中的确认对话框

> ID：11719148
> 
> 赞同：1
> 
> 时间：2012-07-30T09:58:19.923
> 
> 标签：ruby-on-rails, rjs

我的 rjs 模板中有以下代码，它显示一个确认框：

```
page << "r = confirm('Would you like to link this newly created author to the book?')" 
```

我试过了

```
`page << "if r == true {"`   
 #do action a
`page << "} else {"`  
 #do action b
`page << "}"` 
```

上面的代码不正确。

我的问题是如何获得在确认框中所做的选择（真或假）的值？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:18:42.140

试试这个语法：

```
page << "var r = confirm('Would you like to link this newly created author to the book?');"

page << "if (r == true) {" 
  #do action a
page << "} else {"
  #do action b
page << "}" 
```

我试过了，它似乎工作。

# python - django 比较 datetime.now 和 pub_date

> ID：11719149
> 
> 赞同：1
> 
> 时间：2012-07-30T09:58:28.853
> 
> 标签：python, django, view

```
class event_archive(models.Model):
event_id            = models.AutoField(primary_key=True)
date_submitted      = models.DateTimeField()
event_start_time    = models.DateTimeField()
event_end_time      = models.DateTimeField()
event_closed        = models.BooleanField() 
```

我想这样做：这是伪代码：

* * *

```
event = event_archive.objects.all()
for e in event:
if event_start_time > datetime_now()
    print "upcoming";
elif event_start_time < datetime_now() < event_end_time
    print "now";
elif event_end_time < datetime_now() < **24 hours passed the event ends**
    print "%d hours ago",%hour;
elif event_end_time < datetime_now() > **24 hours passed the event ends** and event_end_time < datetime_now() < **48 hours passed the event ends**
    print "yesterday";
else
    print "recorded"
endif;
endfor; 
```

* * *

** 我在编程和 python 方面很新。如果我问了非常愚蠢的问题或没有明确提出问题，请不要介意。在粗线中我不确定我应该使用什么？

我需要帮助来编写我的 django 视图功能..请提供任何帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:35:41.583

```
import datetime

if some_datetime > datetime.datetime.now() + datetime.timedelta(days=10):
    return "some_date is greater than the current datetime plus 10 days" 
```

请参阅 timedelta 文档：[http ://docs.python.org/library/datetime.html#datetime.timedelta](http://docs.python.org/library/datetime.html#datetime.timedelta)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:16:37.097

如果您为模板执行此操作，请使用为此任务设计的[`timeuntil`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#timeuntil)和过滤器。[`timesince`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#timesince)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:09:13.233

```
from datetime import datetime

datetime_now = datetime.now() 
```

'datetime_now' 变量现在具有当前时间。

使用此变量与事件开始时间进行比较，并针对该条件打印或执行相关操作。

例如：

```
if event_start_time > datetime_now:
  print "upcoming" 
```

# javascript - 使用 javascript 将“mdyyyy”转换为“yyyy-mm-dd”

> ID：11719150
> 
> 赞同：0
> 
> 时间：2012-07-30T09:58:33.163
> 
> 标签：javascript

如何使用 javascipt 将格式为“dmyyyy”的字符串转换为另一种格式，例如“yyyy-mm-dd”？我试过使用 new Date('9.5.1989')。但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:01:37.627

尝试

```
new Date('9.5.1989'     // your input string
          .split(/\./)  // split into [9,5,1989]
          .reverse()    // reverse into [1989,5,9]
          .join('/')    // join into '1989/5/9', which is valid input for Date
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:09:42.357

如果您需要将结果作为 a`string`而不是 a `Date`，则可以尝试以下操作：

```
var d = new Date('9.5.1989');​
var str = d.getFullYear() + "-" + (d.getMonth() + 1 /*months are 0 based */) + "-" + d.getDate();
alert(str); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:05:55.523

```
function pad(number, length) { 
    var str = String(number);
    return (str.length >= length) ? str : ( new Array(length - str.length + 1).join('0') ) + str;
}

var pieces = "10.2.2012".split('.');
var wanted = pieces[2] + '-' + pad(pieces[0], 2) + '-' + pad(pieces[1], 2); 
```

之后，结果在`wanted`变量中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:17:23.847

尝试下一个代码来获取 Date 对象 var tmp = str.split('.'); var dateObj = new Date(tmp[2], tmp[0], tmp[1]); 然后根据需要对其进行格式化。如果您使用 jquery 库，则可以使用 jQuery dateFormat 插件。

# java - java - 如何将java cmd参数与正则表达式匹配？

> ID：11719152
> 
> 赞同：1
> 
> 时间：2012-07-30T09:58:39.197
> 
> 标签：java, regex, arguments, cmd, expression

我有这样的cmd：

```
java Test -p 127.0.0.1:8080 -d D:\Desktop\temp.exe -o mingw -s 1024 -t 2000 
```

我想用`-p`,`-d`或`-s`（排除`-p`, `-d`,`-s`本身）获取 args，并丢弃其他 args。

我尝试了几个小时但没有结果，有没有人可以帮助我？

我尝试了arg[i]和arg[i+1]的方式，但是如果args是这样的：-p -d xxx，用户不输入-p值，这个解决方案将不起作用并导致问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:05:13.043

使用这个正则表达式`-(\w) ([\w!@#$%^&*():\\/.]+)` `group[1]`包含标志，`group[2]`包含参数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:06:06.727

如果您的所有选项都采用相同的形式`-x value`，那么您可以将您的 args 数组拆分为以下形式的组`-d 127.0.0.1:8080`，`-d D:...`

```
for(int i=0; i < args.length; i+=2){
    //group args
}

for each group in groups:
    if group[0].equals("-d"){
          //do something
    }
} 
```

或者，只需查看 Java 中现有的 OptionParser 库。[如何在 Java 中解析命令行参数？](https://stackoverflow.com/questions/367706/is-there-a-good-command-line-argument-parser-for-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:05:10.213

怎么样...

```
for(int i = 0; i < args.length; i+=2) { 
 if(args[i].equals("-p") {
   //args[i+1] is the value
 } 
 ... 
} 
```

它不使用正则表达式，耶 :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T10:08:43.883

此解决方案将您的 args 组装到地图中：

```
public static void main(String[] args) {
  final Map<Character, String> am = new HashMap<Character, String>();
  for (int i = 0; i+1 < args.length; i++)
    if (args[i].matches("-[pds]") && !args[i+1].startsWith("-"))
      am.put(args[i].charAt(1), args[++i]);
  System.out.println(am);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T10:07:49.567

尽量不要创造一个大的表达，而是各种小的表达。例如，匹配 -p 部分的表达式是：（`-p ?(.*?)`未经测试）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T10:14:10.310

你不需要正则表达式，因为参数来自一个数组，所以你只需循环它：

```
public static void main(String[] args) {
  Map<String, String> argsMap = new HashMap<String, String>();
  int i = 0;
  while(i < args.length - 1 && args[i].startsWith("-")) {
    argsMap.put(args[i].substring(1), args[++i]);
  }

  System.out.println("-p arg was " + argsMap.get("p"));
  // etc.
} 
```

# r - 计算 R 中的二次变分

> ID：11719153
> 
> 赞同：0
> 
> 时间：2012-07-30T09:58:41.633
> 
> 标签：r, volatility

为了计算 R 中时间序列的二次变化，我想对每个点求和当前点和最后 x 点的对数返回的平方。

我知道您可以通过键入来构建 py 的对数返回平方

```
diff(log(py))^2 
```

但是，我怎样才能建立一个时间序列，它在每个点上求和最后 5 个点以建立二次变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:07:32.303

`embed`与 结合的功能`rowSums`可以满足您的需求：

```
cbind(
  AirPassengers, 
  sum5=c(rep(NA, 4), rowSums(embed(AirPassengers, 5)))
)

         AirPassengers sum5
Jan 1949           112   NA
Feb 1949           118   NA
Mar 1949           132   NA
Apr 1949           129   NA
May 1949           121  612
Jun 1949           135  635
Jul 1949           148  665
... 
```

* * *

什么`embed`是创建一个具有初始向量滞后值的矩阵：

```
embed(AirPassengers, 5)
       [,1] [,2] [,3] [,4] [,5]
  [1,]  121  129  132  118  112
  [2,]  135  121  129  132  118
  [3,]  148  135  121  129  132
  [4,]  148  148  135  121  129
  [5,]  136  148  148  135  121
  [6,]  119  136  148  148  135
  [7,]  104  119  136  148  148
  [8,]  118  104  119  136  148
  ... 
```

您可以`rowSums`在此矩阵的行上使用或任何其他操作。

# java - 通过链接更新桌面背景

> ID：11719160
> 
> 赞同：1
> 
> 时间：2012-07-30T09:59:09.183
> 
> 标签：java, windows

我已经有一个链接[http://cam.sheratonamsterdamairportview.com/view_live1.jpg](http://cam.sheratonamsterdamairportview.com/view_live1.jpg)。此链接链接到史基浦机场的相机，每 20 秒拍摄一张照片。

我真的很想每 20 秒更新一次这张照片作为我的桌面背景。那可能吗？

我需要制作程序还是可以将其与技巧联系起来？我正在运行 Windows 7 顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:05:45.547

如果您使用的是 Windows XP，您可以简单地在桌面上添加活动内容。

> 桌面上的鼠标右键 -> 属性 -> 桌面选项卡 -> 自定义桌面 -> Web 选项卡 -> 新建 -> 位置“www”

设置您的 URL 并激活内容。您将有一个小的桌面窗口，其中包含来自相机的图片。如果它不会自动刷新，则创建一个简单的页面，在 20 秒后使用元刷新和 img 标签，并为您的链接设置 src 属性。

我不确定以上是否适用于 Vista/7。

* * *

否则

这可能对您有用：

```
'Set the wallpaper
 strComputer = "."
 Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
 Set colItems = objWMIService.ExecQuery("Select * from Win32_VideoController",,48)
 Set WshShell = WScript.CreateObject("WScript.Shell")
 Set WshSysEnv = WshShell.Environment("Process")
 Set objFSO = CreateObject("Scripting.FileSystemObject")
   WinPath = WshSysEnv("SystemRoot") & "\YourWallpaper.bmp"

 If Not objFSO.FileExists(winpath) then
 'If the file does not exist then copy it
     For Each objItem in colItems 
         sourcePath = "\\path\here\"
         rightSize = "NameHere" & objItem.CurrentHorizontalResolution & "x" & objItem.CurrentVerticalResolution & ".bmp"
         objFSO.CopyFile sourcePath & rightSize, WSHShell.ExpandEnvironmentStrings ("%SystemRoot%") & "\NameYourWallpaper.bmp", overwrite = True
     Next
 End If
 '************************************************************************************************************************************************
 'Set Wallpaper Bitmap to Default
 Set WshShell = CreateObject("WScript.Shell")
 Set objFSO = CreateObject("Scripting.FileSystemObject")

 sWinDir = objFSO.GetSpecialFolder(0)
 sWallPaper = sWinDir & "\NameYourWallpaper.bmp"

 ' update in registry
 WshShell.RegWrite "HKCU\Control Panel\Desktop\Wallpaper", sWallPaper
 WshShell.Regwrite "HKCU\Software\Microsoft\Internet Explorer\Desktop\General\Wallpaper", sWallPaper
 WshShell.Regwrite "HKCU\Software\Microsoft\Internet Explorer\Desktop\General\BackupWallpaper", sWallPaper
 ' let the system know about the change
 WshShell.Run "%windir%\System32\RUNDLL32.EXE user32.dll,UpdatePerUserSystemParameters", 1, True 
```

这是 VBscript，它将更改桌面背景并在之后重新加载您的配置文件以让您看到更改。

或者，如果您想要更多内容，请查看以下代码：

此示例演示了许多有用的技术，包括： 从随机列表中挑选文件。设置桌面壁纸。设置桌面墙纸样式（居中、平铺或拉伸）。编写注册表项。将文件移入废纸篓。使用系统的默认编辑器编辑文件。当程序启动时（并且当您单击应用按钮时），程序会调用 ReadFiles。该例程读取指定目录中的文件名，并保存以 BMP、GIF、JPG 和 JPEG 结尾的文件名。在加载所有文件名之后，例程调用 RandomizeNames 来随机化列表。

```
Sub ReadFiles()
Dim file As String
Dim ext As String

    ' Create the new file name collection.
    Set FileNames = New Collection

    ' Get the file names.
    file = Dir(DirName & "\*.*")
    Do While file <> ""
        If LCase$(file) <> "temp.bmp" Then
            ext = UCase$(Right$(file, 4))
            If ext = ".BMP" Or ext = ".GIF" Or _
               ext = ".JPG" Or ext = "JPEG" _
               Then _
                    FileNames.Add file
        End If
        file = Dir()
    Loop

    NumNames = FileNames.Count
    RandomizeNames
End Sub 
```

子例程 RandomizeNames 创建一个索引数组，其中 FileNames 集合中的每个名称都有一个条目。对于 i = 1 到 NumNames - 1，例程选择一个随机索引并将其交换到位置 i。

```
Private Sub RandomizeNames()
Dim idx As Integer
Dim tmp As Integer
Dim i As Integer

    ReDim Indexes(1 To NumNames)
    For i = 1 To NumNames
        Indexes(i) = i
    Next i

    ' Randomize them.
    For i = 1 To NumNames - 1
        idx = Int((NumNames - i + 1) * Rnd + i)
        tmp = Indexes(i)
        Indexes(i) = Indexes(idx)
        Indexes(idx) = tmp
    Next i

    ' Point to the index to display.
    NextIndex = 1
End Sub 
```

当 Timer 触发时，程序调用 ShowFile 以显示随机列表中的下一个文件。

```
Private Sub SwitchTimer_Timer()
Dim secs As Long
Dim pic As Integer

    ' See if it's time yet.
    secs = DateDiff("s", Now, NextTime)
    If secs <= 1 Then
        If FileNames.Count > 1 Then
            pic = Indexes(NextIndex)
            NextIndex = NextIndex + 1
            If NextIndex > NumNames Then RandomizeNames

            ShowFile FileNames(pic)
        End If
        NextTime = DateAdd("s", Pause, Now)
        secs = Pause
    End If

    If secs <= 60 Then
        SwitchTimer.Interval = secs * 1000
    Else
        SwitchTimer.Interval = 60000
    End If
    SwitchTimer.Enabled = True
End Sub 
```

子例程 ShowFile 检查样式组合框并设置注册表项以使桌面图像居中、平铺或拉伸。接下来，如果文件是位图文件，程序只需调用 SystemParametersInfo API 函数来设置桌面背景图像。

如果文件不是位图文件，程序会将其加载到隐藏的 PictureBox 中，然后将图像保存为位图文件。然后它调用 SystemParametersInfo。

```
Private Sub ShowFile(ByVal file_name As String)
Const STYLE_CENTERED As String = "0"
Const STYLE_TILED As String = "1"
Const STYLE_STRETCHED As String = "2"
Const TILE_NO As String = "0"
Const TILE_YES As String = "1"

Dim had_error As Boolean

    ' Set the display style.
    had_error = False
    Select Case cboStyle.Text
        Case "Centered"
            If SetRegistryValue(HKEY_CURRENT_USER, _
                "Control Panel\Desktop", "TileWallpaper", _
                    TILE_NO) _
                    Then had_error = True
            If SetRegistryValue(HKEY_CURRENT_USER, _
                "Control Panel\Desktop", "WallpaperStyle", _
                    STYLE_CENTERED) _
                    Then had_error = True
        Case "Tiled"
            If SetRegistryValue(HKEY_CURRENT_USER, _
                "Control Panel\Desktop", "TileWallpaper", _
                    TILE_YES) _
                    Then had_error = True
            If SetRegistryValue(HKEY_CURRENT_USER, _
                "Control Panel\Desktop", "WallpaperStyle", _
                    STYLE_TILED) _
                    Then had_error = True
        Case "Stretched"
            If SetRegistryValue(HKEY_CURRENT_USER, _
                "Control Panel\Desktop", "TileWallpaper", _
                    TILE_NO) _
                    Then had_error = True
            If SetRegistryValue(HKEY_CURRENT_USER, _
                "Control Panel\Desktop", "WallpaperStyle", _
                    STYLE_STRETCHED) _
                    Then had_error = True
    End Select
    If had_error Then
        MsgBox "Error saving desktop style to registry.", _
            vbOKOnly, "Registry Error"
    End If

    ' Display the file.
    FileLabel.Caption = file_name
    m_CurrentFile = DirName & "\" & file_name
    If UCase$(Right$(file_name, 4)) = ".BMP" Then
        SystemParametersInfo SPI_SETDESKWALLPAPER, _
            0, m_CurrentFile, SPIF_UPDATEINIFILE
    Else
        HiddenPict.Picture = LoadPicture(m_CurrentFile)
        SavePicture HiddenPict.Picture, DirName & _
            "\temp.bmp"
        SystemParametersInfo SPI_SETDESKWALLPAPER, _
            0, DirName & "\temp.bmp", _
            SPIF_UPDATEINIFILE
    End If
End Sub 
```

当您单击编辑按钮时，程序使用 ShellExecute API 函数编辑当前图片文件。

```
Private Sub cmdEdit_Click()
    ShellExecute ByVal 0&, "edit", m_CurrentFile, _
        vbNullString, vbNullString, SW_SHOWMAXIMIZED
End Sub 
```

当您单击 Delete 按钮时，程序调用子例程 DeleteFile 将文件移动到废纸篓。然后显示下一张图片。

```
Private Sub cmdDelete_Click()
    ' Delete the file.
    DeleteFile m_CurrentFile, False

    ' Display the next file.
    cmdNext_Click
End Sub 
```

子例程 DeleteFile 使用 SHFileOperation API 函数将文件移动到废纸篓，可选地要求用户确认。

```
Public Sub DeleteFile(ByVal file_name As String, ByVal _
    user_confirm As Boolean)
Dim op As SHFILEOPSTRUCT

    With op
        .wFunc = FO_DELETE
        .pFrom = file_name
        If user_confirm Then
            ' Make the user confirm.
            .fFlags = FOF_ALLOWUNDO
        Else
            ' Do not make the user confirm.
            .fFlags = FOF_ALLOWUNDO Or FOF_NOCONFIRMATION
        End If
    End With
    SHFileOperation op
End Sub 
```

取自[这里](http://www.vb-helper.com/howto_backer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:03:04.783

一个相当简单的方法是创建一个程序来覆盖目录中的单张照片。然后让 Windows（在后台设置中）制作幻灯片，并从该目录中每 20 秒随机选择一张照片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:28:59.933

像这样的东西呢，大约需要 30 秒才能打开一个 winforms 应用程序。不是最好的解决方案，而是一个快速而肮脏的起点。

1) 创建一个文件夹，例如`C:/wallpaper`并告诉 Windows 使用该文件夹为您的背景使用幻灯片。

2) 用于下载最新图像的快速 .NET 脚本

```
public bool running = true;
while(running){
string local= @"C:\wallpaper\localFile.jpg";
using(WebClient client = new WebClient())
{
    client.DownloadFile("http://cam.sheratonamsterdamairportview.com/view_live1.jpg", 
    System.Threading.Thread.Sleep(20000);  //Wait 20 seconds.
}

} 
```

然后有一个按钮，当你想退出时会运行假。Windows 将始终在此处查看，并且会在图像更改时更改 - 或者如果您在该文件夹上使用幻灯片，则应该这样做。（幻灯片是一种无需大量代码即可快速解决缓存问题的方法） - 此外，即使您没有机器的管理员权限，这也可以工作。

# linux - 为什么会在此处出现歧义重定向错误？

> ID：11719165
> 
> 赞同：0
> 
> 时间：2012-07-30T09:59:23.010
> 
> 标签：linux, bash, shell

我正在尝试收听管道并编写此代码，但我得到了模棱两可的重定向错误，这是为什么呢？

```
pipe = "./$1"

# trap enables to execute a command when a signal is sent to your script
trap "rm -f $pipe" EXIT

if [[ ! -p $pipe ]]; then
    mkfifo $pipe
fi

while true
do
    if read line <$pipe; then
        if ["$line" == 'EXIT'  -o  "$line" == 'exit' ]; then
            break
        else 
            echo $line
        fi
    fi
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:10:22.400

我怀疑您的第一行因错误而失败：

> 管道：找不到命令

因为变量赋值`bash`不支持变量名和`=`符号之间的空格。因此，`$pipe`未定义并`read line < $pipe`失败。尝试：

```
pipe="./$1" 
```

# java - 使用android加速远程数据检索

> ID：11719167
> 
> 赞同：1
> 
> 时间：2012-07-30T09:59:26.253
> 
> 标签：java, android, sql

好的，所以我正在为大学做这个项目，并且正在努力思考优化我的应对方式以使其运行得更快的方法。

首先，我通过连接到 facebook 来获取用户数组列表，这根本不需要很长时间。但是，对于每个用户，我都需要获取存储在远程 MySQL 数据库中的数据。所以要做到这一点，我使用以下方法......

```
// gets arraylist of users
ArrayList<User> userList= getList();
// ok so for the next bit, for each user in the arraylist i get their data on the   
database.
  for (User u: userList){
    u.setResultList(retireveData(u));
    if (u.getResultList()!=null){
        //do some magic :)
    }
  } 
```

好的，就是这样......我的想法是，第一次需要很长时间，但是我可以将数据存储在本地 sqlite 数据库中，以便将来运行得更快，并且只有在添加新数据时才更新它。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:12:10.853

嗯...我认为您需要一个 CursorAdapter。

当新数据进入时，它会更新您的视图。请参阅此链接 - [http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/](http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/)

# math - 如何从 3 个点和半径中找到球体中心？

> ID：11719168
> 
> 赞同：2
> 
> 时间：2012-07-30T09:59:37.263
> 
> 标签：math, graphics, 3d

我有三个 3D 点 p1、p2 和 p3 以及球体半径。如何从 3 个点和半径中找到球体中心？

我期望两个 3D 点作为解决方案，因为有 2 个球体满足要求。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T10:16:04.713

1.  找到包含所有三个点的平面 P。在那个平面上，这些点确定了一个三角形。

2.  找到这个三角形周围的圆圈。让 C 表示这个圆的中心。

3.  找到垂直于 P 并与 C 相交的线。

4.  在这条线上，找到与圆具有所需距离的那两个点。

我忽略了退化的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:33:34.210

有多种方法可以将其形式化。这是其中之一（与阿里建议的基本相同，但更多数学）：你想找到点

(a) 与 p1、p2、p3 等距，与

(b) 距离正好是 R。

[首先，根据http://en.wikipedia.org/wiki/Circumscribed_circle](http://en.wikipedia.org/wiki/Circumscribed_circle)找到外接圆的中心（参见“嵌入 d 维的三角形的外接圆”部分）：

```
p0 = cross(
    dot(p21, p21) * p31 - dot(p31, p31) * p21,
    n
) / 2 / dot(n, n) + p1, 
```

与`p21=p2-p1`, `p31=p3-p1`, `n=cross(p21,p31)`.

项目 (a) 中的点位于通过该点的直线上，并且与包含 p1、p2、p3 的平面正交，因此其方程为

```
p(t) = p0 + n * t 
```

将其代入

```
dist(p1, p)^2 = dot(p - p1, p - p1) = R^2 
```

得到二次方程

```
dot(n, n) * t^2 - 2*dot(n, p0-p1) * t + dot(p0-p1, p0-p1) = R^2 
```

实际上`n`和`(p0-p1)`是正交的，所以左边的第二个加数是 0，并且

```
t1 = sqrt((R^2 - dot(p0-p1, p0-p1))/ dot(n, n)),
t2 = -sqrt((R^2 - dot(p0-p1, p0-p1))/ dot(n, n)) 
```

（注意如何取消）`p1`。`p0`将这些代入`p(t)`以获得答案。

# java - jpa 考试对交易和锁定感到困惑

> ID：11719169
> 
> 赞同：3
> 
> 时间：2012-07-30T09:59:42.277
> 
> 标签：java, exception, jpa-2.0

给出了以下来源：

```
public void create ()
{
  try {
   doA () {
 } catch (PersistenceException e) {}
   try (doB) ();
 } catch (PersistenceException e) {} 
} 
```

调用方法 doA 将导致抛出 NonUniqueResultException。调用方法 doB 将导致抛出 EntityExistsException。哪两个选项描述了在应用程序中调用创建的方法时会发生什么，使用容器管理的事务？（选择两项）：

*   A.`doB()`永远不会调用方法。
*   `doA()`B. 当前事务在执行后将继续。
*   C.当前事务执行后将继续`doB()`。
*   D. 当前事务在`doA()`被调用时会被标记为回滚。
*   E. 当前事务在`doB()`被调用时会被标记为回滚。

在我看来，正确的答案是 B、E。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:31:58.833

假设语法正确的版本：

```
public void create() {
    try {
        doA ();
    } catch (PersistenceException e) {}
    try {
        doB();
    } catch (PersistenceException e) {}
} 
```

*A. 永远不会调用方法 doB()*是**错误**声明，因为抛出 NonUniqueResultException，即扩展 PersistenceException 被捕获，流程中的下一步是调用 doB()。

*B. 在 doA() 执行为**true***后，当前事务将继续*，因为如文档所述，[NonUniqueResultException](http://docs.oracle.com/javaee/6/api/javax/persistence/NonUniqueResultException.html)不会导致事务被标记为回滚。*

 **C. doB() 执行*为**false**后，当前事务将继续执行，因为[EntityExistsException](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityExistsException.html)将活动事务标记为回滚。

*D. 当调用 doA() 时，当前事务将被标记为回滚。*由于声明 B 的原因，这是**错误**的，NonUniqueResultException 不会将事务标记为回滚。

*E. 当调用 doB() 为*true**时**，当前事务将被标记为回滚，由于声明 C 的原因，EntityExistsException 将事务标记为回滚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:28:52.023

这不是“关于事务和锁定”的问题，而是关于 JPA 异常语义的问题：

*   `NonUniqueResultException`不需要将当前事务标记为回滚，因为它不会对持久化上下文造成任何损害

*   `EntityExistsException`将当前事务标记为回滚，因为它表明持久性上下文和数据库之间存在严重的不一致。

    另请注意，此异常可能是由提交期间的数据库约束失败引起的 - 在这种情况下，事务无论如何都会回滚，因此异常的语义应保证在所有情况下都回滚。

因此，B,E 是正确答案。

另请参阅他们的 Javadocs: [`NonUniqueResultException`](http://docs.oracle.com/javaee/6/api/javax/persistence/NonUniqueResultException.html), [`EntityExistsException`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityExistsException.html).*

# java - Java：从 Linux 查找打印机以查找 Windows 机器中的打印机

> ID：11719171
> 
> 赞同：2
> 
> 时间：2012-07-30T09:59:57.980
> 
> 标签：java, windows, linux, lookup, printers

我在尝试**直接**（没有任何对话框）在 Java Web 应用程序（在 Websphere Application Server 6.1 上）和 Java 程序（两者共享一些包含此打印代码的代码）上与打印机打印 PDF 时遇到问题。打印机位于 Windows 主机上，Web 应用程序和非 Web 应用程序在 Linux 上运行。

我已经读到这可能是一个权限问题，因为我会尝试在 Linux 中使用打印系统 (Windows) 上不存在或没有权限的用户进行打印。

服务器和 Java 应用程序使用 root 用户运行，所以我被困在这里（如果是权限问题），因为客户端告诉我，在打印服务器上具有权限的用户是另一个用户。我知道允许在该服务器上打印的用户名。

我认为如果可以通过 Samba 将 Linux 的 root 用户与 Windows 上的用户（有权打印）相关联，它就可以做到。但我一直没能做到（我对 Samba 知识非常陌生）。即使我能做到这一点，我也不确定它是否允许代码在 Windows 机器中查找打印机。我也没有找到任何方法来验证或连接到服务器。

有关更多信息，我使用该类`javax.print.PrintServiceLookup`来查找打印机，这似乎没有允许我在服务器或类似设备上进行身份验证的方法。这是代码：

```
 PrinterJob job = PrinterJob.getPrinterJob();
    /* Create an array of PrintServices */
    AttributeSet aset = new HashAttributeSet();
    aset.add(new PrinterName(pObjImpresora, null));
    aset.add(new RequestingUserName("user", null));

    PrintService[] services = PrintServiceLookup.lookupPrintServices(null, aset);
    if (services.length > 0) {
        aObjLog.info("IMPRESORA SELECCIONADA: " + pObjImpresora);
        job.setPrintService(services[0]);
        PrintRequestAttributeSet printRequestAttributeSet = new HashPrintRequestAttributeSet();
        printRequestAttributeSet.add(MediaSizeName.ISO_A4);
        printRequestAttributeSet.add(new Copies(1));
        JRPrintServiceExporter exporter = new JRPrintServiceExporter();
        exporter.setParameter(JRPrintServiceExporterParameter.JASPER_PRINT, pObjJasperPrint);
        /* We set the selected service and pass it as a paramenter */
        exporter.setParameter(JRPrintServiceExporterParameter.PRINT_SERVICE, services[0]);
        exporter.setParameter(JRPrintServiceExporterParameter.PRINT_SERVICE_ATTRIBUTE_SET, services[0].getAttributes());
        exporter.setParameter(JRPrintServiceExporterParameter.PRINT_REQUEST_ATTRIBUTE_SET, printRequestAttributeSet);
        exporter.setParameter(JRPrintServiceExporterParameter.DISPLAY_PAGE_DIALOG, Boolean.FALSE);
        exporter.setParameter(JRPrintServiceExporterParameter.DISPLAY_PRINT_DIALOG, Boolean.FALSE);
        exporter.exportReport();
    } 
```

`pObjImpresora`是`String`具有打印机名称的。我应该有办法到达服务器，然后是上面的打印机。我试过这个名字`"\\\\printserver\\MYPRINTER"`，`printserver`Windows 主机名在哪里，`MYPRINTER`是我的打印机；）

# windows-phone-7.1 - 我们可以检索当前在 windows phone 7 中运行的应用程序吗？

> ID：11719172
> 
> 赞同：0
> 
> 时间：2012-07-30T09:59:59.537
> 
> 标签：windows-phone-7.1

任何人请告诉我任何 API/其他方式来检索当前在 Windows Phone 7 中运行的应用程序。

在 android 和 iPhone 中得到那个在 windows phone 7 中怎么样。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:05:01.047

[没有办法确定当前正在运行的程序，严格来说，根据 WP7.1 生命周期](http://www.scottlogic.co.uk/blog/colin/2011/10/a-windows-phone-7-1-mango-mvvm-tombstoning-example/)（除了代理），只有一个正在运行。Windows Phone 7 在这方面有一个刻意限制的 API。

# c# - 如何在 ASP.NET 中创建动态弹出窗口

> ID：11719180
> 
> 赞同：1
> 
> 时间：2012-07-30T10:00:29.427
> 
> 标签：c#, asp.net, webforms, popup, controls

我编写了一个显示来自 Active Directory 的用户信息的 ASP.NET 应用程序。我使用两个 WebForms。在我的第一个 WinForm 中，我可以列出 AD 中的所有用户或搜索用户。使用按钮，我可以在第二个 WinForm 中看到有关所选用户的更多信息。现在我不想在第二个 WinForm 中看到有关所选用户的主要信息，而是在一种弹出窗口中。此弹出窗口未固定在桌面上，但已选中。

例如：

![在此处输入图像描述](../Images/8ef35d2873c99bcd9cc734680c12fff3.png)

我如何创建这个以及控件是什么？任何帮助链接都会帮助我：P

塔拉索夫

# ruby - 非 Rails 应用程序中的 DatabaseCleaner 错误

> ID：11719183
> 
> 赞同：2
> 
> 时间：2012-07-30T10:00:53.317
> 
> 标签：ruby, sequel

我试图让 DatabaseCleaner 在我使用 Sequel 的非 Rails 应用程序上运行，但我遇到了各种各样的问题。看起来数据库设置不正确 -

```
RSpec.configure do |config|
  config.before(:suite) do    
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:truncation)
    p DatabaseCleaner.connections
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end
end 
```

运行 rspec 返回 -

```
ruby-1.9.2-p290/gems/database_cleaner-0.8.0/lib/database_cleaner/sequel/truncation.rb:12:in `clean': undefined method `url' for :default:Symbol (NoMethodError)
  from /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/database_cleaner-0.8.0/lib/database_cleaner/base.rb:39:in `clean_with'
  from /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/database_cleaner-0.8.0/lib/database_cleaner/configuration.rb:62:in `block in clean_with'
  from /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/database_cleaner-0.8.0/lib/database_cleaner/configuration.rb:62:in `each'
  from /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/database_cleaner-0.8.0/lib/database_cleaner/configuration.rb:62:in `clean_with' 
```

The line this is failing on -

```
case db_type= db.url.sub(/:.+/,'').to_sym 
```

If I remove 'DatabaseCleaner.clean_with(:truncation)' I get the following, notice the DB is set to :default and not :test

```
[#<DatabaseCleaner::Base:0x007fdbe41825f0 @autodetected=true, @orm=:sequel, @strategy=#<DatabaseCleaner::Sequel::Transaction:0x007fdbe416b328 @db=:default>>]

An error occurred in an after hook
NoMethodError: undefined method `resume' for nil:NilClass occurred at /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/database_cleaner-0.8.0/lib/database_cleaner/sequel/transaction.rb:22:in `clean' 
```

Both errors indicate that the DB hasn't been set, but I can't see why. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:30:00.973

这已在 database_cleaner 中修复（请参阅[https://github.com/bmabey/database_cleaner/commit/adb0d438dbfabaea2588f3058b1e75914706e53d](https://github.com/bmabey/database_cleaner/commit/adb0d438dbfabaea2588f3058b1e75914706e53d)），但看起来没有包含修复的新版本。在新版本发布之前，您必须使用 git 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T22:26:04.153

我有同样的问题。我只是`database_cleaner`在我的 Gemfile 中替换，直到下一个版本出来。

```
group :test do
  # The release version does not support sequel properly. See
  # https://github.com/bmabey/database_cleaner/commit/e5cb8cea.
  # FIXME: Update this, when DatabaseCleaner 0.8.1 is released!
  gem 'database_cleaner', :git => "git://github.com/bmabey/database_cleaner.git", 
    :ref => "e5cb8cea"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T18:57:07.613

> 我没有用 DatabaseCleaner 明确定义 [a connection]，我在文档中看不到如何做到这一点。

您可以像这样将现有连接传递给 DatabaseCleaner：

```
connection = Sequel.connect("mysql2://user:password@host:port/database_name")
DatabaseCleaner[:sequel, { :connection => connection) }] 
```

# sed - 合并图案之间的线条

> ID：11719188
> 
> 赞同：0
> 
> 时间：2012-07-30T10:01:00.083
> 
> 标签：sed

我有一个需要解析的大文件（~20GB）。我需要合并所有不以整数开头的行。文件看起来像这样：

```
 1647 Lorem ipsum dolor sit amet, consectetur adipisicing elit
     1906 ut perspiciatis unde omnis iste natus error sit 
     1909  Nemo enim ipsam voluptatem
            dolores eos qui ratione
       quia non numquam eius
         nisi ut aliquid ex ea com
     1820 zt enim ad minim veniam 
```

最后我需要它看起来像这样：

```
 1647 Lorem ipsum dolor sit amet, consectetur adipisicing elit
     1906 ut perspiciatis unde omnis iste natus error sit 
     1909  Nemo enim ipsam voluptatem dolores eos qui ratione quia non numquam eius nisi ut aliquid ex ea com
     1820 zt enim ad minim veniam 
```

我尝试了很多东西，例如：

使用注册表...在较小的文件上效果很好，在大文件上内存不足

```
sed ':a;N;$!ba;s/\n[\t ]*\([a-zA-Z]\+\)/ \1/g' 
```

使用保持缓冲区（这仅打印以整数开头的行）：

```
sed -n '
/^[ \t]\+[0-9]\+/ {
    p
    h
}
/^[ \t]\+[0-9]\+/ !{
    H
}
' 
```

或者：

```
sed -n '
/^[ \t]\+[0-9]\+/ b jumpTO
        H
        $ b jumpTO
        b
:jumpTO
x
p
' 
```

它错过了从没有整数的行中替换空格和制表符的代码，它们并不重要并且实现起来很简单。

请查看代码并指出我做错了什么。 **谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:17:33.120

`sed`通常不太擅长将行组合在一起，因为它被设计为在每行的基础上工作。

使用的解决方案`awk`可能会更好：

输入.txt：

```
$ cat input.txt
1647 Lorem ipsum dolor sit amet, consectetur adipisicing elit
1906 ut perspiciatis unde omnis iste natus error sit 
1909  Nemo enim ipsam voluptatem
       dolores eos qui ratione
  quia non numquam eius
    nisi ut aliquid ex ea com
1820 zt enim ad minim veniam 
```

脚本.awk：

```
/^[0-9]+/ {
    if (NR==1) {
        printf "%s", $0
    } else {
        printf "\n%s", $0
    }
}

/^[^0-9]+/ {
    gsub(/^ /,"",$0);
    gsub(/ $/,"",$0);
    printf "%s", $0
}

END {
    printf "\n"
} 
```

输出：

```
$ awk -f script.awk input.txt
1647 Lorem ipsum dolor sit amet, consectetur adipisicing elit
1906 ut perspiciatis unde omnis iste natus error sit 
1909  Nemo enim ipsam voluptatemdolores eos qui rationequia non numquam eiusnisi ut aliquid ex ea com
1820 zt enim ad minim veniam 
```

**更新：改进代码以删除空格**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:29:54.810

这个单线有帮助吗？(awk)

```
 awk '$1~/[0-9]+/{printf "\n"$0;next}{printf $0}' yourfile 
```

**测试**

```
kent$  cat test.txt
1647 Lorem ipsum dolor sit amet, consectetur adipisicing elit
1906 ut perspiciatis unde omnis iste natus error sit 
1909  Nemo enim ipsam voluptatem
       dolores eos qui ratione
  quia non numquam eius
    nisi ut aliquid ex ea com
1820 zt enim ad minim veniam

kent$  awk '$1~/[0-9]+/{printf "\n"$0;next}{printf $0}' test.txt

1647 Lorem ipsum dolor sit amet, consectetur adipisicing elit
1906 ut perspiciatis unde omnis iste natus error sit 
1909  Nemo enim ipsam voluptatem       dolores eos qui ratione  quia non numquam eius    nisi ut aliquid ex ea com
1820 zt enim ad minim veniam 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T11:21:27.767

可能这对你有用：

`->nawk '{if($1~"^[a-zA-Z]"){p=p" "$0;flag=1}else{if(flag==1)print p;p=$0;print p;flag=0}}' temp`

```
> cat temp
1906 ut perspiciatis unde omnis iste natus error sit 
1909  Nemo enim ipsam voluptatem
dolores eos qui ratione
quia non numquam eius
nisi ut aliquid ex ea com
1820 zt enim ad minim veniam

> nawk '{if($1~"^[a-zA-Z]"){p=p" "$0;flag=1}else{if(flag==1)print p;p=$0;print p;flag=0}}' temp
1906 ut perspiciatis unde omnis iste natus error sit 
1909  Nemo enim ipsam voluptatem
1909  Nemo enim ipsam voluptatem dolores eos qui ratione quia non numquam eius nisi ut aliquid ex ea com
1820 zt enim ad minim veniam

> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T11:23:19.397

一种使用方式`awk`：

```
awk '/[0-9]/ { if (line) print line; line = $0; next } { sub(/^[ \t]+/, " "); line = line $0 } END { print line }' file.txt 
```

结果：

```
 1647 Lorem ipsum dolor sit amet, consectetur adipisicing elit
     1906 ut perspiciatis unde omnis iste natus error sit 
     1909  Nemo enim ipsam voluptatem dolores eos qui ratione quia non numquam eius nisi ut aliquid ex ea com
     1820 zt enim ad minim veniam 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T11:36:29.473

`sed`=没有什么是不可能的

```
sed -n '/^[0-9]/{x;p};/^[^0-9]/{H;x;s/\n\s*\([^0-9]\)/ \1/;x};${x;p}'
```

```
 1647 Lorem ipsum dolor sit amet, consectetur adipisicing elit
1906 ut perspiciatis unde omnis iste natus error sit
1909  Nemo enim ipsam voluptatem dolores eos qui ratione quia non numquam eius nisi ut aliquid ex ea com
1820 zt enim ad minim veniam
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T12:48:32.513

这可能对您有用（GNU sed）：

```
sed ':a;$!N;s/\n\s*\([^0-9 ]\)/ \1/;ta;P;D' file 
```

# javascript - 无效的 Json 用法？

> ID：11719193
> 
> 赞同：-1
> 
> 时间：2012-07-30T10:01:07.387
> 
> 标签：javascript, jquery, json

有时我**[看到](http://o2platform.wordpress.com/2011/07/12/using-jquery-to-consume-an-asp-net-ashx-from-json-in-two-files/)**人们将 json 发送到服务器：

```
$.ajax({
url: ...
contentType: "application/json; charset=utf-8",
dataType: "json",
data: { 'page': '100AAAAAf00' },
responseType: "json",
success: ...,
error: ...
}); 
```

但`{ 'page': '100AAAAAf00' }`不是*Json*。

并说 contentType 是 json ...

Json 是文本表示。

例如：`"{ 'page': '100AAAAAf00' }"`

我在这里错过了什么吗？（jQuery 是否在幕后进行一些翻译？）

维基：

> JSON 或 JavaScript 对象表示法，是一种基于文本 (!!) 的开放标准，专为人类可读的数据交换而设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:30:22.453

```
$.ajax("/", {

    contentType: "application/json; charset=utf-8",
    dataType: "json",
    data: {
        'page': '100AAAAAf00'
    },
    type: 'POST',
    responseType: "json"

}); 
```

**错了**。这将发送一个`application/x-www-form-urlencoded`带有请求正文的普通请求：

```
page=100AAAAAf00 
```

但是由于标头是`"application/json; charset=utf-8"`，它实际上是在向服务器**撒谎。**

要使用 jQuery 向服务器发送真实的、纯粹的、实际的 JSON，您可以使用：

```
$.ajax("/", {

    contentType: "application/json; charset=utf-8",
    dataType: "json",
    data: JSON.stringify({ //If data is string, jQuery will not try to process it
        'page': '100AAAAAf00'
    }),
    type: 'POST',
    responseType: "json"

}); 
```

现在请求正文将是：

```
{"page":"100AAAAAf00"} 
```

这根本不能与 php 一起使用，`$_POST`因为它基于`application/x-www-form-urlencoded`..

可以在开发者工具中使用 Chrome 的网络标签来验证我的声明：

[http://jsfiddle.net/sV5m4/1/](http://jsfiddle.net/sV5m4/1/) - 带有 json 标头的实际 json

![在此处输入图像描述](../Images/27b94b29cf43f9b8e8d2e4e9e1babd0f.png)

和这里：

[http://jsfiddle.net/sV5m4/2/](http://jsfiddle.net/sV5m4/2/) - x-www-form-urlencoded 标头声称是 json

![在此处输入图像描述](../Images/1c29723d2c038b050513a09792fa858e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:06:18.883

有一个简单的函数可以将对象转换为 JSON 字符串...

```
JSON.stringify({ 'page': '100AAAAAf00' }) // => '{ "page": "100AAAAAf00" }' 
```

另一种方式...

```
JSON.parse('{ "page": "100AAAAAf00" }') // => { page: '100AAAAAf00' } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:07:28.077

在您的示例中，一切都是正确的，并且`data`属性是一个对象。

由于[jQuery.ajax(); docs](http://api.jquery.com/jQuery.ajax/) `data`属性可以是对象、数组或字符串。

如果它是一个数组或一个对象，jQuery 会对其进行序列化。

# c - 停止使用某些 C 系统调用的编译器方法

> ID：11719195
> 
> 赞同：3
> 
> 时间：2012-07-30T10:01:08.450
> 
> 标签：c

我希望人们停止使用类似的功能，`sprintf`因为它被认为是*不安全的功能*。`sprintf`如果在代码中使用或任何其他技巧，是否有编译器方法给出编译错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T10:17:50.677

[GCC](http://gcc.gnu.org/onlinedocs/cpp/Pragmas.html)通过`#pragma GCC poison`. 使用此 pragma 后跟标识符列表将导致在程序中使用*任何*标识符引发错误。例如，这个程序不会编译：

```
#include <stdio.h>

#pragma GCC poison fprintf sprintf

int main (void)
{
  char foo[100];
  sprintf (foo, "bar");
  return 0;
} 
```

如果在扩展为标识符*之前*定义的宏`pragma`，则不会影响该事件的发生。例如，这个程序将编译：

```
#include <stdio.h>

#define print_to_string sprintf
#pragma GCC poison sprintf

int main (void)
{
  char foo[100];
  print_to_string (foo, "bar");
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T10:15:37.997

```
#define sprintf COMPILE_TIME_ERROR
#define COMPILE_TIME_ERROR switch(0){case 0:case 0:;}

int main(void) {
 char hi[50];
 sprintf(hi,"hi");
 return 0;
} 
```

编译器输出将类似于：

```
prog.c: In function ‘main’:
prog.c:6: error: duplicate case value
prog.c:6: error: previously used here 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T11:03:16.807

其他人提到触发编译错误。

不幸的是，如果您想区分错误，错误消息通常不是很明确。一件好事是有一个未定义的对象，其名称嵌入错误消息，如下所示：

```
#define sprintf (do_not_use_sprintf_call = 0) 
```

因此，何时`sprintf`调用`gcc`错误消息将更加明确：

```
tst.c: In function `main':
tst.c:11: error: `do_not_use_sprintf_call' undeclared (first use in
this function)
tst.c:11: error: (Each undeclared identifier is reported only once
tst.c:11: error: for each function it appears in.) 
```

请注意，使用 C11，您还可以使用静态断言获得自己的错误消息：

```
#define sprintf _Static_assert(0, "do_not_use_sprintf_call") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:16:05.687

是的。

您将 LD_PRELOAD 设置为库列表，所有这些库将在其他库之前加载。您定义需要覆盖的函数，使文件成为共享库，将此变量设置为该库的名称，然后运行您的可执行文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T10:35:08.067

不是答案，但我太笨了，不知道如何在回复中发布格式化代码。

IMO，@myrkos 已经给出了这个问题的正确答案。

但是，他谈到了编译时错误，我也想概括为`compile time assert`（又名`static assert`）。

谷歌这些条款，你会得到一堆建议。根据您的编译器，有些会给出比其他的更令人愉悦的错误消息，因此请制作一个小型测试程序。我个人（ymmv）更喜欢这个带有 GCC 的版本（向原作者道歉，因为我不记得我从哪里“借来”它 - 这是很久以前的事了，它仍然对我有用）：

```
/** A "static assert", which checks a condition at compile time, rather  
 * than run time. The sooner problems are found, the sooner they can be fixed
 * (and with less effort).
 *
 * Use this one where you don't even want the code to begin running
 * if something is wrong. If you don't use this, you need a test case,
 * but sometimes tests don't get run, so use this for the sort of thing
 * that should never be released to the customer (or even the test department).
 *
 * Example: ASSERT_AT_COMPILE_TIME(1==2), one_does_not_equal_two);
 *          gives this error message under GNU on Linux:
 *             size of array one_does_not_equal_two is negative
 *
 * Note: this is very useful checking the size of user defined types, like uint64_t
 * or for doing things like this:
 *
 * struct foo {
 *       int x;
 *       int y;
 * };
 * ASSERT_AT_COMPILE_TIME(offsetof(struct foo, y) == 4, y_is_at_offset_4);
 */
#define ASSERT_CAT1(x) ASSERT_CAT ## x
#define ASSERT_CAT0(x) ASSERT_CAT1(x)
#define ASSERT_AT_COMPILE_TIME(expression, message)  \
         struct ASSERT_CAT0(__LINE__) {char message[2*!!(expression)-1]; } 
```

# java - 从类路径中读取几个 ValidationMessages.properties

> ID：11719198
> 
> 赞同：5
> 
> 时间：2012-07-30T10:01:18.693
> 
> 标签：java, hibernate-validator, properties-file

我对 JSR303 和特殊的 Hibernate-Validator 有疑问。

我想从属性文件中读取验证消息。此属性文件位于部署到 servlet 容器的 war 文件中。问题是，它没有被访问。我有以下项目结构。

*   项目网络（战争文件）
    *   project-web-core（project-web.war 的 WEB-INF/lib 中的 jar 文件）
        *   hibernate-validator jars（project-web-core 的 maven 依赖项）
        *   ValidationMessages.properties（在 project-web-core.jar 的 src/main/resources 中；访问这个）
    *   ValidationMessages.properties（在 project-web.war 的 src/main/resources 中；这个**没有被**访问）

如何访问 ValidationMessages.properties？或者这是不可能的？

除此之外，如果 Hibernate-Validator 首先在战争中读取属性文件，如果找不到密钥，然后从 jar 中读取属性文件等等，那将是完美的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T18:50:56.777

不可能有多个`ValidationMessages.properties`文件。但是您可以使用 Hibernate Validators [AggregateResourceBundleLocator](http://docs.jboss.org/hibernate/stable/validator/api/index.html?org/hibernate/validator/resourceloading/AggregateResourceBundleLocator.html)从具有不同名称的包中检索消息，如下所示：

```
ValidatorFactory validatorFactory = configuration
    .messageInterpolator(
        new ResourceBundleMessageInterpolator(
            new AggregateResourceBundleLocator(
                Arrays.asList("foo", "bar"), 
                configuration.getDefaultResourceBundleLocator())))
    .buildDefaultValidatorFactory(); 
```

# facebook - 如何在不同的 Facebook 墙上自动发布评论

> ID：11719200
> 
> 赞同：-1
> 
> 时间：2012-07-30T10:01:25.147
> 
> 标签：facebook, codeigniter, login, facebook-wall

我正在为用户开发一个带有登录和私人部分的 codeigniter 网页。在该私人部分，用户可以选择介绍他们的 Facebook 登录名和密码。

我想要的是在他们的墙上自动发布一些网页活动，只需点击一个按钮。我不知道这种方法是否正确或是否可行。有谁知道这是否可能或该主题中是否存在教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:19:48.953

您不应该询问用户的 Facebook 密码。Facebook API 将为您处理登录过程。从那里，您可以轻松地将内容发布回 Facebook。如果您请求`publish_stream`或`publish_action`许可，您将能够在后台将内容发布到 Facebook。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:05:55.977

使用 FB.api 是可能的：

文档：http: [//developers.facebook.com/docs/reference/javascript/FB.api/](http://developers.facebook.com/docs/reference/javascript/FB.api/)

教程： [http ://daipratt.co.uk/using-fb-api-to-make-a-full-post-to-a-users-wall/](http://daipratt.co.uk/using-fb-api-to-make-a-full-post-to-a-users-wall/)

# javascript - 如何使用javascript将文本框中输入的日期与当前日期进行比较？

> ID：11719202
> 
> 赞同：0
> 
> 时间：2012-07-30T10:01:35.707
> 
> 标签：javascript

如何使用 java 脚本检查在文本框中输入的日期是否小于今天的日期？

我正在使用代码

```
var currentDate_Month = new Date().valueOf().getMonth();
        var currentDate_Date = new Date().getDate();
        var currentDate_Year = new Date().getFullYear();
        var EnterDate_Month = new Date(document.getElementById('ctl00_ContentPlaceHolder1_txtDateReceived').value).getMonth();
        var EnterDate_Date = new Date(document.getElementById('ctl00_ContentPlaceHolder1_txtDateReceived').value).getDate();
        var EnterDate_Year = new Date(document.getElementById('ctl00_ContentPlaceHolder1_txtDateReceived').value).getFullYear();

        if(EnterDate_Year<currentDate_Year) {
          if(EnterDate_Month<currentDate_Month) {
            if(EnterDate_Date<currentDate_Date) {
            }
           }
          }
         else {   
            str += '</br>* Date should be Less than or equals to current Date.';
            return false;
         } 
```

但令我惊讶的是，文本框控件中的当前日期是 2014 年 6 月 7 日星期六，当查看它时 -

```
new Date(document.getElementById('ctl00_ContentPlaceHolder1_txtDateReceived').value).toDateString(); 
```

为什么它以这种格式返回日期？（文本框中的日期格式为 dd/mm/yyyy）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:14:08.280

您可以简化代码：

```
var today = new Date();

var enterDate = new Date(Date.Parse(document.getElementById('ctl00_ContentPlaceHolder1_txtDateReceived')));

if (enterDate.valueOf() < today.valueOf())
{
    // To what you have to do...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:15:09.657

Date() 可以初始化为

```
Date("mm/dd/yyyy") 
```

由于这是采用的方法，所以 dd/mm/yyyy 的格式是不可能的。在您的情况下，最好的方法是执行以下操作

```
dateFields = (document.getElementById('ctl00_ContentPlaceHolder1_txtDateReceived').value.split('/')

date = Date(dateFields[2],dateFields[1]-1, dateFields[0]) 
```

这将是格式

```
Date(year, month, date) 
```

然后，您可以将文本框日期与当前日期进行比较

```
date < Date.now() 
```

# asp.net - 是否可以在 ASP.NET 中绘制 GDI 对象？

> ID：11719204
> 
> 赞同：1
> 
> 时间：2012-07-30T10:01:42.237
> 
> 标签：asp.net, gdi

我有一个用于 winform 应用程序的用户控件。基本功能是绘制和修改 GDI 对象并将其保存到数据库中。现在我的组织正计划为同样的目的开发 Web 应用程序。现在我正在寻找一种在 asp 面板上绘制 gdi 对象的方法。如果有人有任何想法，请分享一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:06:48.667

您可以在 ASP.NET 中使用 GDI 在 Bitmap 对象中进行绘制。显然，您不能在客户端屏幕上绘图。如果要显示图像，则应将其保存并以 img 标记的形式提供给客户端。但是不推荐在 ASP.NET 环境中使用 GDI。如果我没记错的话，原因是多线程问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:17:57.000

System.Drawing 命名空间提供对 GDI+ 功能的访问。

# jakarta-mail - 如何使用 Javamail 访问其他邮箱（IMAP、Exchange 2010）

> ID：11719205
> 
> 赞同：3
> 
> 时间：2012-07-30T10:01:44.560
> 
> 标签：jakarta-mail, exchange-server

我想通过 Javamail API (1.4.5) 使用 IMAP(s) 和普通登录访问共享邮箱 (NOT FOLDER)。邮件服务器是 Exchange Server 2010。

用户：user1 (user1@domain.com) 密码：xxxx

共享邮箱：shared_MB@domain.com

我设法访问了 user1 - 邮箱：

```
 Session session = Session.getInstance(properties, new ExchangeAuthenticator(username, password));
        session.setDebug(true);

        Store store = session.getStore("imaps");

        store.connect(imapHost, username, password); 
```

特性：

mail.imaps.socketFactory.port = 993

mail.imaps.starttls.enable = true

mail.imaps.socketFactory.class = javax.net.ssl.SSLSocketFactory

mail.imaps.socketFactory.fallback = false

用户名 = user1@domain.com

密码 = xxxx

--> 这很好用！但现在我想通过更改登录字符串来访问附加邮箱：

用户名=user1@domain.com/shared_MB

--> 不幸的是，我收到一条“NO AUTHENTICATE”消息：

```
 DEBUG IMAP: AUTHENTICATE PLAIN command result: A1 NO AUTHENTICATE failed. 
```

我能够使用 Thunderbird 访问，所以我认为我的代码中缺少一些东西......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T19:42:44.157

我正在执行以下操作，对我来说效果很好

```
properties = System.getProperties();
properties.setProperty("mail.imaps.auth.plain.disable", "true");
properties.setProperty("mail.imaps.auth.ntlm.disable", "true");
Session session = Session.getInstance(properties, null);
store = session.getStore("imaps");
store.connect("HOST", PORT, "DOMAIN\\USER\\SHAREDACCOUNT","pwd"); 
```

这里 DOMAIN\\USER\\SHAREDACCOUNT 会是这样
的假设电子邮件帐户是 tarun@abc.com 然后
abc\\tarun\\shared_MB

您还必须输入 tarun@abc.com 帐户的密码。

# powershell - - 与输出类似

> ID：11719208
> 
> 赞同：1
> 
> 时间：2012-07-30T10:02:00.393
> 
> 标签：powershell, sql-like

仍在尝试学习 Powershell 并且遇到了一些简单但没有意义的问题，因为它适用于我编写的其他脚本，所以一定缺少一些愚蠢的东西。基本上我需要确定 Nic 是否已启用但未附加到任何东西，因此我可以添加另一个命令来禁用它。如果它已经被禁用，我只需要它输出 True 。.netconnectionstatus 值返回为 0，所以我期待 -like 命令我自己使用 $disabled 只是为了仔细检查我的输出。

```
$disabled = gwmi win32_networkadapter | where {$_.PhysicalAdapter -eq "True"-and $_.netenabled -ne "True"}`
| % { '{0,10} {1,20}' -f $_.netenabled,$_.netconnectionstatus}
$disabled
$_.netconnectionstatus -like "0" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:32:07.210

-like 和 -match 运算符仅在字符串比较中有意义。如果您期望整数，这里 -eq 将是最好的选择，不带引号。另外 - 如果您有布尔值，则无需将其与任何东西进行比较。在这里，如果您要更改：`$_.NetEnabled -ne 'False'`您将获得完全相同的结果...请改用：`where { $_.PhysicalAdapter -and (-not $_.NetEnabled)}`。如果你决定改变它，你会因为 PS 处理字符串的方式（[bool]'False' -eq $true）而对自己开枪。

另外：您的 $_ 在 foreach-object 脚本块之外是空白的。因此，您会得到 $false 的结果。

# ruby-on-rails - 无法使 AJAX CRUD 工作

> ID：11719211
> 
> 赞同：0
> 
> 时间：2012-07-30T10:02:12.320
> 
> 标签：ruby-on-rails, ajax, crud

我想做完全的 AJAX CRUD 动作，但是当我点击一些动作时它告诉我，

```
 Template missing 
```

这是我的控制器：

```
before_filter :load

def load
 @posts = Post.all
 @post = Post.new 
```

结尾

```
def index
end

def create
 @post = Post.new(params[:post])
 if @post.save
   flash[:notice] = "Successfully created post."
  @posts = Post.all
end 
```

结尾

```
def edit
 @post = Post.find(params[:id])
end

 def update
  @post = Post.find(params[:id])
  if @post.update_attributes(params[:post])
    flash[:notice] = "Successfully updated post."
    @posts = Post.all
   end
 end

def destroy
 @post = Post.find(params[:id])
 @post.destroy
 flash[:notice] = "Successfully destroyed post."
 @posts = Post.all
end 
```

这是我的 application.erb.html：

```
 <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag 'http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'%>
  <%= javascript_include_tag 'rails' %>
 </head>
<body>
 <div id="container">
  <div id="flash_notice" style="display:none"></div>
  <%= yield %>
 </div>
</body> 
```

我的 index.html：

```
 <h1>Listing posts</h1>
 <div id="post_form"><%= render :partial => 'form' %></div>
<div id="posts_list"><%= render :partial => "posts" %></div> 
```

表格部分：

```
<table>
 <tbody><tr>
<th>Title</th>
<th>Content</th>
 </tr>
  <% @posts.each do |post| %>
 <tr>
  <td><%= post.title %></td>
  <td><%= post.content %></td>
  <td><%= link_to "Edit", edit_post_path(post), :remote => true %></td>
  <td><%= link_to "Destroy", post, :remote => true, :confirm => 'Are you sure?', :method =>:delete %></td>
</tr>
<% end %>
 </tbody>
</table> 
```

我为所有操作创建了 js.erb 文件；创建.js.erb：

```
 <% if @post.errors.any? -%>
  /*Hide the flash notice div*/
  $("#flash_notice").hide(300);

 /*Update the html of the div post_errors with the new one*/
 $("#post_errors").html("<%= escape_javascript(error_messages_for(@post))%>");

 /*Show the div post_errors*/
 $("#post_errors").show(300);
 <% else -%>
/*Hide the div post_errors*/
$("#post_errors").hide(300);

/*Update the html of the div flash_notice with the new one*/
$("#flash_notice").html("<%= escape_javascript(flash[:notice])%>");

 /*Show the flash_notice div*/
 $("#flash_notice").show(300);

 /*Clear the entire form*/
 $(":input:not(input[type=submit])").val("");

 /*Replace the html of the div post_lists with the updated new one*/
 $("#posts_list").html("<%= escape_javascript( render(:partial => "posts") ) %>");
<% end -%>
/*Hide the div post_errors*/
$("#post_errors").hide(300);

 /*Update the html of the div flash_notice with the new one*/
 $("#flash_notice").html("<%= escape_javascript(flash[:notice])%>");

 /*Show the flash_notice div*/
 $("#flash_notice").show(300);

 /*Clear the entire form*/
 $(":input:not(input[type=submit])").val("");

 /*Replace the html of the div post_lists with the updated new one*/
 $("#posts_list").html("<%= escape_javascript( render(:partial => "posts") ) %>");
<% end -%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:22:08.933

看来你只有`create.js.erb`. 既然你有

```
<td><%= link_to "Edit", edit_post_path(post), :remote => true %></td>
<td><%= link_to "Destroy", post, :remote => true, :confirm => 'Are you sure?', :method =>:delete %></td> 
```

所以`destroy.js.erb`，`edit.js.erb`需要。

我有一个非常干净的项目，专注于在单个页面中执行 AJAX。也许您可以结帐并看看。[https://github.com/camsong/AjaxCRUD](https://github.com/camsong/AjaxCRUD)

# javascript - 将代码传递给要执行的函数

> ID：11719217
> 
> 赞同：2
> 
> 时间：2012-07-30T10:02:27.767
> 
> 标签：javascript, jquery

我想知道这是否可以使用 JavaScript 或使用 JQuery？

我想将参数传递给函数一些代码，一旦满足其他条件，它将执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:05:41.237

您可以传递要作为函数对象执行的代码，例如：

```
function executeCode(condition, code) {
    if (condition) code();
}

executeCode(true, function() { alert('executed'); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:10:42.450

函数是 JavaScript 中的第一类对象。您可以将它们传递给变量，就像数组和其他任何东西一样。

棘手的一点是“一旦满足其他条件”，因为它取决于这些条件是什么。

您可以[监听一个事件](https://developer.mozilla.org/en/DOM/element.addEventListener)，也可以通过轮询来伪造它`setInterval`。

```
var bar = false;

function doWhenBarIsTrue(func) {
    var interval = setInterval(function () {
        if (bar) { 
            clearInterval(interval);
            func(); 
        }
    }, 1000);
}

doWhenBarIsTrue(function () { alert('true!'); });

setTimeout(function () { bar = true; }, 3000); 
```

# log4j - OSGi 的类加载问题

> ID：11719218
> 
> 赞同：2
> 
> 时间：2012-07-30T10:02:28.540
> 
> 标签：log4j, osgi, classloader, apache-felix

我使用了来自 Maven 存储库的 log4j-1.2.17 包。我尝试在包中执行此代码（我的包调用 log4j-1.2.17 包）

```
 PropertyConfigurator.configure(props());
private static Properties props() {
    Properties props = new Properties();
    props.put("log4j.rootLogger", "INFO, R");
    props.put("log4j.appender.R",
            "org.apache.log4j.DailyRollingFileAppender");
    props.put("log4j.appender.R.File", "logs/IhtikaClient.log");
    props.put("log4j.appender.R.Append", "true");
    props.put("log4j.appender.R.Threshold", "INFO");
    props.put("log4j.appender.R.DatePattern", "'.'yyyy-MM-dd");
    props.put("log4j.appender.R.layout", "org.apache.log4j.PatternLayout");
    props.put("log4j.appender.R.layout.ConversionPattern",
            //"%d{HH:mm:ss,SSS} %c - %m%n");
            //"[%5p] %d{yyyy-MM-dd mm:ss} (%F:%M:%L)%n%m%n%n");
            "[%5p] %d{yyyy-MM-dd mm:ss} %c (%F:%M:%L)%n%m%n");
    return props;
} 
```

但我有错误

`log4j:ERROR A "org.apache.log4j.DailyRollingFileAppender" object is not assignable to a "org.apache.log4j.Appender" variable. log4j:ERROR The class "org.apache.log4j.Appender" was loaded by log4j:ERROR [org.apache.felix.framework.BundleWiringImpl@9da1dd] whereas object of type log4j:ERROR "org.apache.log4j.DailyRollingFileAppender" was loaded by [sun.misc.Launcher$AppClassLoader@4b222f]. log4j:ERROR Could not instantiate appender named "R". log4j:ERROR A "org.apache.log4j.DailyRollingFileAppender" object is not assignable to a "org.apache.log4j.Appender" variable. log4j:ERROR The class "org.apache.log4j.Appender" was loaded by log4j:ERROR [org.apache.felix.framework.BundleWiringImpl@9da1dd] whereas object of type log4j:ERROR "org.apache.log4j.DailyRollingFileAppender" was loaded by [sun.misc.Launcher$AppClassLoader@4b222f]. log4j:ERROR Could not instantiate appender named "R".`

Bundles 已按顺序加载

```
.getBundleContext().installBundle("......../log4j-1.2.17.jar")
.getBundleContext().installBundle("......../I_MainForm-1.0-SNAPSHOT.jar") 
```

如何修复此错误？请，对不起我的英语。最好的问候，亚瑟。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T10:05:33.690

基本上，不要使用`org.osgi.framework.system.packages`or将你的类“泄漏”到框架中`org.osgi.framework.system.packages.extra`，除非你真的需要在你的代码中而不是修复一些其他问题。显然，这是 log4j 问题。

您可以通过设置系统属性来修复它：

```
-Dlog4j.ignoreTCL=true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T10:29:09.877

由于您的 Log4j 类似乎已由`sun.misc`类加载器加载，我认为某些东西正在从 OSGi 外部提供 log4j 类。有 Log4J 条目解释了它为什么不能加载 Log4J 类的事实意味着*已经存在*某些版本的 Log4J 。

您使用的是定制版的 Felix 吗？如果是这样，您是否可以找到带有`org.osgi.framework.system.packages=...`条目或`org.osgi.framework.system.packages.extra=...`条目的配置文件之类的东西？

如果您只是删除 Log4j 包会发生什么？那么它还能找到 Log4j 类吗？

问候， 弗兰克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T22:09:30.803

在您自己的代码中设置 log4j 在 OSGi 中不是一个好主意。你应该看看 ops4j pax logging。它负责日志框架的设置，你可以简单地在你的包中使用 log4j api。参见：[http ://team.ops4j.org/wiki/display/paxlogging/Pax+Logging](http://team.ops4j.org/wiki/display/paxlogging/Pax+Logging)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-23T17:15:25.303

这对我有用：

```
mvn install -D log4j.ignoreTCL=true 
```

# javascript - Ember.JS 和 ember-data 在使用路由器时抛出神秘的错误消息

> ID：11719219
> 
> 赞同：1
> 
> 时间：2012-07-30T10:02:28.353
> 
> 标签：javascript, ember.js, ember-data

我正在为 Ember 应用程序开发保存的搜索功能，一般的想法是在进行搜索后，您可以选择输入搜索的短名称并将其保存到`localStorage`下拉列表中并稍后从下拉列表中检索它，同时也能够与其他用户共享当前 URL 并让他们看到相同的搜索。

这通过结合使用`Router`URL 中的 Ember 处理搜索参数和处理用户单击“保存”的视图（视图包含在小提琴中，但由于不包含模板而无法运行 - 见下文）。

每当我运行应用程序时，我都会收到以下错误：

```
Uncaught TypeError: Cannot call method 'set' of undefined 
```

您可以在下面列出的小提琴中看到跟踪，但它似乎源于 ember-data 中的控制器存储注入。不幸的是，我对 Ember[-data] 的了解还不足以了解这与应用程序的其余部分有何关系。

我已经采用了应该独立工作的应用程序的相关部分并在 JSFiddle 中运行它们，但这仍然会导致相同的错误。小提琴位于[http://jsfiddle.net/fetcU/](http://jsfiddle.net/fetcU/)。目前没有车把模板或该小提琴中的任何东西，因为它们不会导致问题。

在`localStorage`引入路由器之前，适配器和其他部分独立工作，因此它可能与现在正在运行的代码有关`Checklist.initialize()`（在添加路由器之前没有必要）。

我已经将此与其他类似的项目和示例进行了比较，尤其是那些为 ember-data 提供的项目和示例，但我在这里做错了什么并不完全清楚。我会很感激任何见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:51:48.397

第一件事：当您使用路由器创建应用程序时，您不必创建 Store、Controllers、Views 的实例。当调用 App.initialize() 时，ember 会为你进行实例化和注入。

然后，您将可以访问：

*   控制器，通过路由器（在 connectOutlets() 中），通过 router.get(xxxController)，其中 xxx 是例如应用程序（访问基本控制器），或 savedSearch 访问您的 savedSearchController。
*   商店，通过调用 router.get('store') 从路由器
*   通过调用 this.get('controller') 从 xxxView 获取 xxxController，或者从带有 view.controller 的模板获取
*   来自控制器的路由器，通过调用 this.get('target')

好吧，我让你尝试修改代码。当你再次被卡住时让我现在:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:33:47.813

你试过让你的控制器成为一个类吗？因此，请尝试 Checklist.SavedSearchController，而不是 Checklist.savedSearchController。

# actionscript-3 - 灵活的 expandAll 带子函数

> ID：11719221
> 
> 赞同：1
> 
> 时间：2012-07-30T10:02:33.410
> 
> 标签：actionscript-3, apache-flex, datagrid, flexicious

我使用新选项 getChildrenFunction 来创建我的网格。所有工作正常，所有级别的手动扩展工作正常，但是当我无法扩展所有级别（使用 grid.expandAll()）时，它会在结束前停止一个级别。我能怎么做 ？我的孩子在这里工作：

```
private function getCustomChildren(object:Object,level:FlexDataGridColumnLevel):Object
            {
                if(object is Flow && ExplorationManager.getInstance().suggestionsXML != null)
                {
                    var wrappedKeyParamXML:ArrayCollection = new ArrayCollection;
                    for each (var xml:XML in ExplorationManager.getInstance().suggestionsXML..keyParameter)
                    {
                        wrappedKeyParamXML.addItem(new XMLWrapper(xml.copy(),object.id,xml.length()));
                    }
                    return wrappedKeyParamXML;
                }
                else if(object is Element)
                    return object.children;
                else if(object is XMLWrapper)
                {
                    return object.children;
                }   
                else 
                    return null;
            } 
```

感谢您的回答

# python - 当我想为不规则值网格中的坐标找到良好的插值时，我有哪些选择？

> ID：11719222
> 
> 赞同：1
> 
> 时间：2012-07-30T10:02:33.757
> 
> 标签：python, spatial-interpolation

我有一个列表点及其覆盖区域的值，如下所示：

```
#x, y, value
list  = [
(1.123, 1.232, 15),
(1.121, 2.323, 12),
(1.124, 3.451, 17),
(1.120, 4.593, 06),
(1.121, 5.638, 09),
(2.123, 1.232, 19),
(2.121, 2.323, 72),
(2.124, 3.451, 13),
(2.120, 4.593, 99),
(2.121, 5.638, 04), and so on...] 
```

我想编写一个函数`interpolateValueAtCoordinate(x, y)`，它可以很好地插值特定坐标处的值。

我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:10:17.983

如果您有可用的 SciPy，请查看[interp2D](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp2d.html)

# mysql - 在 RoR 模式中添加主键约束

> ID：11719228
> 
> 赞同：1
> 
> 时间：2012-07-30T10:02:47.437
> 
> 标签：mysql, ruby-on-rails, sqlite, primary-key

在我们的 Web 应用程序中，我们的表在 id 字段中保存了一个“GUID”ID。通过调查用于创建数据库的实际 SQL 代码，我们看到我们的 ID 实际上并没有作为主键延迟。似乎没有强制执行唯一性，也没有创建索引。

这感觉很糟糕，所以我们想解决这个问题。我们的目标只是将我们的 ID 字段设置为“主键”

这是我们的 schema.rb 的示例

```
 create_table "projects", :id => false, :force => true do |t|
    t.string   "id"
    t.string   "name"
    t.string   "objective"
    t.datetime "created_at",                              :null => false
    t.datetime "updated_at",                              :null => false
    t.string   "client_account_id"
    t.string   "default_project_name"
    t.boolean  "quota_exceeded",       :default => false, :null => false
  end 
```

在开发中，我们使用 SQLite3 数据库，而在生产中，我们依赖 MySQL。

我知道不可能在现有的 SQLite3 DB 上添加这样的约束，但我准备删除它并在需要时重新创建它。如果可能的话，我想避免删除 MySQL 数据库，但如果确实有必要，我可以备份它并将数据插入新模式。

最好的方法是什么？（轨道 V3.2.6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:58:08.137

如果你想在 Rails 中设置一个非标准的主键，你应该看看[composite_primary_keys gem](https://github.com/drnic/composite_primary_keys)

在您的迁移使用中，就像您已经做过的那样，

```
:id => false 
```

然后在您的模型中尝试以下操作

```
require 'composite_primary_keys'
class User < ActiveRecord::Base
  self.primary_keys = :your_custom_id
end 
```

gem 覆盖了默认的 Rails 行为，因此您要使用的密钥由 create 语句设置。这样，您也可以根据需要使用复合主键。

另一种方法是`:primary_key`在迁移中使用该选项

```
create_table "projects", :primary_key => 'your_id' do 
  ...
end 
```

或者，

如果您只想确保唯一性，可以使用 ActiveRecord 验证，如下所示：

```
validates_uniqueness_of :your_id, :message => "ID needs to be unique" 
```

希望这可以帮助。

# python - f2py 的问题：子程序中对模块的未定义引用

> ID：11719229
> 
> 赞同：0
> 
> 时间：2012-07-30T10:02:52.723
> 
> 标签：python, fortran, f2py

我正在尝试用 f2py 编译一个 Fortran f90 文件，以便在 Python 中使用。该文件是从另一个文件调用模块的子程序。该模块基本上是用于分配的。我可以在命令窗口中使用“gfortran my_dec.f90”来编译模块，但是在尝试编译子例程文件时出现错误。这尤其困难，因为我几乎没有使用过 Fortran，而且这是别人的代码。

这是模块和子程序的一部分，因为它很长，包括它的开始和结束：

```
 module my_dec

    integer ndir, nfreq
    integer ihmax,ier
    integer nk,nth,nspec

    real hspmin
    real wsmult
    real wscut

    logical flcomb, flc 

    parameter(ndir=24)
    parameter(nfreq=23)

    parameter(nk=nfreq)
    parameter(nth=ndir)
    parameter(nspec=nk*nth)

    REAL DTH, SIG(0:nk+1), DSII(0:nk+1), DSIP(0:nk+1)
    REAL ECOS(nspec+nth), ESIN(nspec+nth), XFR 
    REAL FACHFE, TH(nth), FTE

    REAL ES2(nspec+NTH),EC2(nspec+NTH),ESC(nspec+NTH)
    REAL DDEN(NK),DDEN2(nspec)
    REAL SIG2(nspec)

    INTEGER IAPROC, NAPERR, NDSE, NDST

    INTEGER year, TIME 

    real pcg ! percentage either side of peakfor gamma estimate

    data pcg/0.3/ 

end module my_dec 
```

子程序：

子程序 my_init

```
use my_dec
use constants

iaproc=1
naperr=1
ndset=1
ndst=1

IHM    = 100
HSPM   = 0.05
WSM    = 1.7
WSC    = 0.333
FLC    = .true.

IHMAX  = MAX ( 50, IHM )
HSPMIN = MAX ( 0.0001 , HSPM )
WSMULT = MAX ( 1\. , WSM )
WSCUT  = MIN ( 1.0001 , MAX ( 0\. , WSC ) )
FLCOMB = FLC

...      

    return

    end 
```

当我尝试使用“f2py -c my_init.f90 -m my_init_m”编译子例程文件“my_init.f90”时，我在子例程中收到一大堆消息，关于从模块中引用变量：

```
c:\users\lwl\appdata\local\temp\tmptlve6z\Release\my_init.o:my_init.f90:(.text+0
xb): undefined reference to `__my_dec_MOD_iaproc'
c:\users\lwl\appdata\local\temp\tmptlve6z\Release\my_init.o:my_init.f90:(.text+0
x15): undefined reference to `__my_dec_MOD_naperr'
c:\users\lwl\appdata\local\temp\tmptlve6z\Release\my_init.o:my_init.f90:(.text+0
x26): undefined reference to `__my_dec_MOD_ndst'
c:\users\lwl\appdata\local\temp\tmptlve6z\Release\my_init.o:my_init.f90:(.text+0
x4f): undefined reference to `__my_dec_MOD_flc' 
```

然后是错误，对我来说并没有太多启示：

```
collect2: ld returned 1 exit status
error: Command "C:\Python27\Scripts\gfortran.exe -Wall -Wall -shared c:\users\lw
l\appdata\local\temp\tmptlve6z\Release\users\lwl\appdata\local\temp\tmptlve6z\sr
c.win-amd64-2.7\my_init_mmodule.o c:\users\lwl\appdata\local\temp\tmptlve6z\Rele
ase\users\lwl\appdata\local\temp\tmptlve6z\src.win-amd64-2.7\fortranobject.o c:\
users\lwl\appdata\local\temp\tmptlve6z\Release\my_init.o -Lc:\python27\egg-info\
mingw\usr\lib\gcc\x86_64-w64-mingw32\4.5.2 -LC:\Python27\libs -LC:\Python27\PCbu
ild\amd64 -lpython27 -lgfortran -o .\my_init_m.pyd" failed with exit status 1 
```

这几天我一直在尝试解决这个问题，包括搜索互联网，但无济于事。有人有想法么？这可能是一个非常简单的问题。谢谢你的帮助。

编辑：如果我将模块复制并粘贴到与子例程相同的文件中，我就可以使用它了，但是让它作为单独的文件使用它们会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:23:21.230

对不起，如果这个解释涵盖了你已经知道的基础，但你确实写了你几乎不知道 Fortran。

您的例程`my_init`使用名为`my_dec`（和一个名为`constants`）的模块。这就是`use`声明所说的。错误消息如

```
c:\users\lwl\appdata\local\temp\tmptlve6z\Release\my_init.o:my_init.f90:(.text+0
xb): undefined reference to `__my_dec_MOD_iaproc' 
```

如果您尝试在不提供链接到`my_init`的编译版本的情况下进行编译，我希望看到的内容。`my_dec`诸如由编译器生成的名称，`__my_dec_MOD_iaproc`您可以将该名称读取为标识`iaproc`. 如果根本没有定义，`MODule` `my_dec`您会收到类似的消息，但这里不是这种情况。`my_dec``iaproc`

撇开`f2py`您（在大多数情况下）不谈，只需确保`used`首先编译另一个模块或子程序或程序的任何模块，链接器就会发挥它的魔力（只要设置了路径等等）。

我不知道你怎么知道`f2py`在哪里寻找`my_dec`.

我看到您现在在编辑中找到了解决方案。我很困惑为什么您认为将子例程的源代码放在单独的文件中会很好。如果你真的想写 Fortran 90 子程序也属于模块。

# vb.net - VB发送图片到TcpClient

> ID：11719230
> 
> 赞同：0
> 
> 时间：2012-07-30T10:02:53.643
> 
> 标签：vb.net, image, tcpclient

我对 Visual Basic 比较陌生。目前正在使用 Visual Studio 2005。我有一个应用程序，它使用 Visual Basic 中的 TcpClient 向客户端（在我们的域上）发送文本消息。就文字而言，我可以轻松发送，客户收到。但是，我打算将图片发送给客户并强制它们保存在特定位置。关于如何在 VB 中执行此操作的任何建议。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:06:54.933

将图片读入字节数组，发送字节数组，然后将字节数组保存到另一端的文件中。[来自该站点](http://arsalantamiz.blogspot.co.uk/2008/12/image-to-byte-array-and-byte-array-to.html)的一些（未经测试的）示例代码进行转换：

```
Private Function BytesToImage(ByVal ImageBytes() As Byte) As Image
    Dim imgNew As Image
    Dim memImage As New System.IO.MemoryStream(ImageBytes)
    imgNew = Image.FromStream(memImage)
    Return imgNew
End Function

Private Function ImageToBytes(ByVal Image As Image) As Byte()
    Dim memImage As New System.IO.MemoryStream
    Dim bytImage() As Byte

    Image.Save(memImage, Image.RawFormat)
    bytImage = memImage.GetBuffer()

    Return bytImage
End Function 
```

# iphone - 自定义 TableView 并在 iOS 中使用 didSelectRowAtIndexPath

> ID：11719248
> 
> 赞同：0
> 
> 时间：2012-07-30T10:03:55.920
> 
> 标签：iphone, objective-c, ios, ios5, uinavigationcontroller

我按照这个[Custom UITableViewCell创建了一个自定义 TableView](http://www.youtube.com/watch?v=d_kO-J3DYvc)

我创建了一个 CustomerCell，然后在 ViewController 中像这样使用它：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *uniqueIdentifier = @"cutomerCell";

    CustomerCell *cell = nil;
    cell = (CustomerCell *) [self.tableview dequeueReusableCellWithIdentifier:uniqueIdentifier];

    Customer *customer = [self.customers objectAtIndex:[indexPath row]];
    if(!cell)
    {
        NSArray *topLevelObject = [[NSBundle mainBundle] loadNibNamed:@"CustomerCell" owner:nil options:nil];
        for(id currentObject in topLevelObject)
        {
            if([currentObject isKindOfClass:[CustomerCell class]])
            {
                cell = (CustomerCell *) currentObject;
                break;
            }
        }
    }
    cell.nameLabel.text = customer.name;

    return cell;
} 
```

一切正常。但随后我开始下一个链接[UINavigationController](http://www.youtube.com/watch?v=XN4JRic6TM8)

问题是当我使用这种方法时：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@ "hi");   
} 
```

当我单击 TableView 中的一个项目时，什么也没有发生。可能是因为我实现了`Custom TableView`然后我不能使用`didSelectRowAtIndexPath`方法，但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:12:45.603

您得到的错误与您的笔尖有关，而不是您的 UITableView。您应该检查 Customer Detail 类的视图是否已连接到 nib 中的所有者。这就是为什么你一尝试使用它就会崩溃

```
[self.navigationController pushViewController:self.customerDetail animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:09:53.217

你设置代理了吗？tableView.delegate = self; 我猜你应该没事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:11:49.270

对表视图进行子类化不应该导致这样的问题——根据定义，子类所做的一切都比它的超类更多。似乎您只设置了数据源但委托：

```
tableView.delegate = self; 
```

# android - Android 构建系统：如何包含 .tar 文件中的预构建文件？

> ID：11719253
> 
> 赞同：1
> 
> 时间：2012-07-30T10:04:15.237
> 
> 标签：android, makefile, build, tar, android-source

我正在构建一个定制的 Android 系统（JellyBean）。

**我有一个项目（来自上游），其中包含一个 .tar 文件，该文件应在构建时解压缩，其内容应复制到生成的目录树中的某个位置。我应该如何构建makefile来做到这一点？**

我尝试了以下方法：

1) 使用 un-tar 指令并使用“PRODUCT_COPY_FILES += ...”编写 Android.mk（在带有 tar 的 git 中）

这不起作用，因为 PRODUCT_COPY_FILES 不能在 Android.mk 中使用

2) 使用 untar 指令和 AndroidProducts.mk 中包含的一些产品定义 mk 文件编写 Android.mk，其中包含“PRODUCT_COPY_FILES += ...”

这不起作用，因为解压缩发生在 "PRODUCT_COPY_FILES += (ls /untared/dir/*)" 之后，因此 PRODUCT_COPY_FILES 结果为空。

3) 编写产品定义 mk 文件进行解压缩，然后 "PRODUCT_COPY_FILES += ..."

这行得通，但不是很好，因为构建系统在多个位置包含此文件，并且 untar 发生了很多次（~10），这会减慢构建速度并且不好......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:20:55.280

这可能需要几次迭代。

重申问题：

有一个对变量的赋值，以及一个创建文件的规则（通过解压缩 tar 文件）。我们事先不知道这些文件的名称是什么，但我们希望它们在变量中。对变量的赋值（和修改）往往发生在规则之外，因此它们将在规则之前执行。

这里有几种方法。（如果不深入了解您的系统，很难知道哪个是最好的。）

**1) 将初始分配**从

```
PRODUCT_COPY_FILES := ... 
```

到

```
PRODUCT_COPY_FILES = ... 
```

Make中有[两种类型的变量](http://www.gnu.org/software/make/manual/make.html#Flavors)：*简单*扩展变量和*递归*扩展变量。（这与递归调用 makefile 无关。）选择是通过使用`=`or分配来确定的`:=`。如果您有一个简单的扩展变量，例如

```
LIST := $(shell ls foo/) 
```

然后它将包含`foo/` *分配时*所有文件的列表。如果您执行将文件放入的规则`foo/`，然后另一个使用 的规则`$(LIST)`，则第二条规则将只看到原始文件名。但是，如果您使用*递归*扩展变量：

```
LIST = $(shell ls foo/) 
```

那么它将包含`$(shell ls foo/)`. 这在使用变量之前不会被扩展（评估），因此第二条规则将看到所有文件名。

如果更改`PRODUCT_COPY_FILES`为递归扩展变量，则可以使用

```
PRODUCT_COPY_FILES += $(shell ls /untared/dir/*) 
```

并且在`ls`使用该变量之前，该命令不会执行。

**2) 使用 tar -t**

该`tar`实用程序允许您获取 tar 文件的内容列表，而无需实际解压缩它。

```
PRODUCT_COPY_FILES += $(shell tar -tf tarfile) 
```

（您可能必须使用一些过滤或其他路径操作来获得您想要的东西。）

**3）递归使用Make**

[Make 的递归使用](http://www.gnu.org/software/make/manual/make.html#Recursion)是当 Make 使用相同的 makefile 或不同的 makefile 执行 Make 时。

也许`definition.mk`解压缩 tar 文件，然后调用`android.mk`：

```
# definition.mk

all:
    tar -xvf ...
    $(MAKE) -f android.mk 
```

开始时`android.mk`，文件已经存在于`/untared/dir/`.

或者，如果您想`android.mk`成为调用其他 makefile 的主 makefile，您可以简单地交换名称。

# css - 样式最后和倒数第二 使用 CSS 的标签

> ID：11719255
> 
> 赞同：1
> 
> 时间：2012-07-30T10:04:23.287
> 
> 标签：css, css-selectors, html-lists

有没有办法`<li>`使用 CSS 设置最后一个和第二个标签的样式。我尝试使用`ul li:nth-child(6)`并给`padding-top:10px;`它一个，但填充顶部正在改变所有菜单。

```
<ul>
    <li><a href="#"><span>Menu 1</span></a></li>
    <li><a href="#"><span>Menu 2</span></a></li>
    <li><a href="#"><span>Menu 3</span></a></li>
    <li><a href="#"><span>Menu 4</span></a></li>
    <li><a href="#"><span>Menu 5</span></a></li>
    <li><a href="#"><span>Menu 6</span></a></li>
    <li><a href="#"><span>Menu 7</span></a></li>
</ul> 
```

有没有其他方法可以解决这个问题，或者我的 CSS 中遗漏了什么？对你的帮助表示感谢！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:28:39.507

与其他类似建议一样，此解决方案不适用于某些较旧的浏览器：

```
ul li:last-child, ul li:nth-last-child(2) {
  padding-top: 10px;
} 
```

这样，样式表不依赖于列表中的具体项目数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:07:45.280

```
ul li :nth-child(6)
     {
       padding-top:10px;
     }
ul li:last-child
    {
      padding-top:10px;
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:09:41.023

```
<ul>
        <li><a href="#"><span>Menu 1</span></a></li>
        <li><a href="#"><span>Menu 2</span></a></li>
        <li><a href="#"><span>Menu 3</span></a></li>
        <li><a href="#"><span>Menu 4</span></a></li>
        <li><a href="#"><span>Menu 5</span></a></li>
        <li class="last"><a href="#"><span>Menu 6</span></a></li>
        <li class="last"><a href="#"><span>Menu 7</span></a></li>
    </ul> 
```

并在css文件中

```
.last
        {
            padding-top: 10px;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T10:57:11.090

试试这个方法

```
 ul li:nth-child(6), ul li:nth-child(7) {
    padding-top:10px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T10:16:05.253

如上所述，代码确实有效：

HTML：

```
<ul>
    <li><a href="#"><span>Menu 1</span></a></li>
    <li><a href="#"><span>Menu 2</span></a></li>
    <li><a href="#"><span>Menu 3</span></a></li>
    <li><a href="#"><span>Menu 4</span></a></li>
    <li><a href="#"><span>Menu 5</span></a></li>
    <li><a href="#"><span>Menu 6</span></a></li>
    <li><a href="#"><span>Menu 7</span></a></li>
</ul>​ 
```

CSS：

```
ul li:nth-child(6)
{
    padding-top:10px;
}​ 
```

可能您的浏览器没有兼容的 CSS3 选择器（如果您使用的是 IE，则没有机会）。这是一个简单的浏览器支持列表：[nth-​​child support](http://reference.sitepoint.com/css/pseudoclass-nthchild)

# android - 游戏开发过程中如何回收位图？

> ID：11719257
> 
> 赞同：-1
> 
> 时间：2012-07-30T10:04:26.750
> 
> 标签：android, android-intent

我有三个活动，每个活动都包含一个视图

1.  主要活动-> 进度条视图

2.  帮助活动

3.  游戏活动 -> 游戏视图（具有多个类）

就像那样，当我从游戏切换到主要活动时，我怎样才能回收我的位图？我怎样才能使我的精灵图像无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:12:53.427

在你的方法中调用`Bitmap.recycle()`every ，并在. 将从内存中释放您的对象，因此您不必将它们显式设置为 null 。`Bitmap``onPause()``onResume()``Bitmap.recycle()`

# c# - 通用可空枚举

> ID：11719258
> 
> 赞同：3
> 
> 时间：2012-07-30T10:04:27.647
> 
> 标签：c#, generics, enums, nullable

我想有一种方法可以从可为空的数据库列中解析一个枚举。我在下面编写了这个方法（并且必须将 T 限制为一个结构才能使其编译）。

它确实可以编译，但我认为它是错误的，因为枚举不是结构？如果是这样，我如何限制通用方法说我期待一个 ValueType 你不必向我抱怨“只有不可为空的值类型可能是 'System.Nullable' 的基础

```
private static T? ParseEnum<T>(DataRow row, string columnName)
    where T : struct
{
    T? value = null;
    try
    {
        if (row[columnName] != DBNull.Value)
        {
            value = (T)Enum.Parse(
                typeof(T),
                row[columnName].ToString(),
                true);
        }
    }

    catch (ArgumentException) { }

    return value;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:07:00.323

不幸的是，C# 中没有可用的约束允许您限制给定类型是枚举。但在 IL 中有这样的概念。乔恩[在博客中谈到了它](http://msmvps.com/blogs/jon_skeet/archive/2009/09/10/generic-constraints-for-enums-and-delegates.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T00:30:28.760

我认为您可以尝试使用动态并在运行时创建通用枚举列表

```
 public static dynamic ToValues(this Type enumType)
    {
        var values = Enum.GetValues(enumType);
        Type list = typeof(List<>);
        Type resultType = list.MakeGenericType(enumType);
        dynamic result =  Activator.CreateInstance(resultType);
        foreach (var value in values)
        {
            dynamic concreteValue = Enum.Parse(enumType, value.ToString());
            result.Add(concreteValue);
        }
        return result;
    } 
```

结果，您将获得具体枚举列表

# php - Jquery Post 方法在本地工作，但不在服务器上

> ID：11719260
> 
> 赞同：1
> 
> 时间：2012-07-30T10:04:43.077
> 
> 标签：php, javascript, jquery, html, json

我有一个必须在文件上写入的简单函数，它可以在我的本地服务器上运行，但是当我将它部署到服务器上时它不会写入文件？怎么了 ？

foo.php

```
<?
if (isset($_POST['data'])) {
         $stringData = $_POST['data'];
         $file = "ciao.txt"; 
         $fh = fopen($file, 'w') or die("can't open file");
         fwrite($fh, $stringData);
         fclose($fh); 
 }
 ?> 
```

函数.js

```
function WriteToFile() 
{
    var data = "foo baaar";
    $.post("JS/foo.php", {data: data}, function(result){ alert("label updated!!");}, "json");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:13:04.787

检查服务器上的文件权限。使其可写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:46:47.927

```
<?
if (isset($_POST['data'])) {
         $stringData = $_POST['data'];
         $file = "ciao.txt"; 
         $fh = fopen($file, 'w') or die("can't open file");
         fwrite($fh, $stringData);
         fclose($fh); 
 }
 ?> 
```

fwrite() 返回写入的字节数，错误时返回 FALSE。改变 fwrite($fh, $stringData);

$written = fwrite($fh, $stringData); 打印$写入；

现在您可以了解您的数据是否被写入的天气。

或者您可以使用 php 代码 chmod("/somedir/somefile", 0755);//750 设置文件权限或使用 777 进行测试，然后恢复为 750 或您的管理员建议

/* 试试这个 */

```
 if (isset($_POST['data'])) {
             $stringData = $_POST['data'];
             $file = "ciao.txt"; 
             chmod($file, 0755);
             $fh = fopen($file, 'w') or die("can't open file");
             fwrite($fh, $stringData);
             $written = fwrite($fh, $stringData);
             print $written;
             fclose($fh); 
     } 
```

# mysql - 使用排名拾取元组进行更新

> ID：11719263
> 
> 赞同：0
> 
> 时间：2012-07-30T10:04:57.153
> 
> 标签：mysql, date, inner-join, ranking

我有一张桌子 ProductPrice

```
INSERT INTO ProductPrice
(
ProductId,
EffectiveDt,
InactiveDt,
Price
) 
```

我的日期之间有间隔或重叠

到目前为止我所拥有的表格按最早生效日期排名第一，然后是产品ID

这使用

```
SELECT 
    pp.ProductId,
    pp.EffectiveDt,
    pp.InactiveDt, 
    ROW_NUMBER() OVER (PARTITION BY pp.ProductId ORDER BY pp.EffectiveDt ASC) AS         RankByDate
INTO
    #ProductrankByDate
FROM 
    ProductPrice pp
ORDER BY 
    pp.ProductId 
```

现在我想做的是更新

是否需要 InactiveDt 并使用下一个等级有效Dt 更新它

所以

```
01/07/2012 , 10/07/2012
15/07/2012 , 20/07/2012 
```

和

```
01/07/2012 , 10/07/2012
08/07/2012 , 20/07/2012 
```

会成为

```
01/07/2012 , 14/07/2012
15/07/2012 , 20/07/2012 
```

和

```
01/07/2012 , 07/07/2012
08/07/2012 , 20/07/2012 
```

我到目前为止

```
UPDATE pp
SET 
    pp.InactiveDt = DATEADD(DAY, -1, pdb.EffectiveDt)
FROM 
    #ProductrankByDate AS pp
INNER JOIN 
    #ProductrankByDate AS pdb 
ON 
    pp.ProductId  = pdb.ProductId
WHERE
    pp.RankByDate = pdb.RankByDate + 1
AND pp.ProductId  = pdb.ProductId 
```

但显然这不起作用，所以修改这个或新语句的任何帮助都会有很多帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:34:57.133

我设法让它工作我所要做的就是将 +1 移到 pp.RankByDate 后面而不是 pbd.RankByDate

```
UPDATE pp
SET 
    pp.InactiveDt = DATEADD(DAY, -1, pdb.EffectiveDt)
FROM 
    #ProductrankByDate AS pp
INNER JOIN 
    #ProductrankByDate AS pdb 
ON 
    pp.ProductId      = pdb.ProductId
WHERE
    pp.RankByDate + 1 = pdb.RankByDate
AND pp.ProductId      = pdb.ProductId 
```

# android - Android expandablelistview子点击监听器不起作用

> ID：11719266
> 
> 赞同：1
> 
> 时间：2012-07-30T10:05:06.350
> 
> 标签：android

在我正在使用的 android 项目`Expandablelistview`中`SimpleExpandableListAdapter`，它的`onGroupexpand`功能正在运行，但`onChildClick`下面的功能`setOnChildClickListener(new OnChildClickListener() )`不起作用。
我已阅读有关此的所有 stackoverflow 文章，但它不起作用。可能是什么错误....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:04:32.160

否则请使用 LayoutInflater 概念。也许你的问题可以解决。

# c# - C#：任何数字的正则表达式加上没有限制的小数点

> ID：11719272
> 
> 赞同：0
> 
> 时间：2012-07-30T10:05:17.760
> 
> 标签：c#, regex

我正在寻找一个正则表达式，它能够验证字符串是否包含从 0 开始的任何数字，并且还允许小数点位于除 .1 或 .45 之外的任何位置。小数点在任何点我的意思是该数字应该能够具有任意数量的精度位。

数字实际上可以是任何东西：

```
1
2
3.5
3.58278723475
6523424.82347265 
```

我有这个当然失败了，因为我的正则表达式没有考虑小数点：

```
 foreach (string[] coorPairArray in extents.Select(t => t.Trim().Split(' ')))
 {
     Regex isnumber = new Regex("^[0-9]+$");

     if ((!isnumber.IsMatch(coorPairArray[0]) || (!isnumber.IsMatch(coorPairArray[1]))))
     {
         dataBaseConnection.Close();

         throw new ArgumentException("Error: An extent value contained alphanumeric data. GetExtentsAsGml().");
     }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:09:32.387

这应该做的工作：

```
 Regex isnumber = new Regex(@"^[0-9]+(\.[0-9]+)?$"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T10:09:25.953

你甚至需要一个正则表达式吗？不会这样的工作：

```
foreach (string[] coorPairArray in extents.Select(t => t.Trim().Split(' '))) 
{
    var lat = Decimal.MinValue;
    var lng = Decimal.MinValue;
    if (!Decimal.TryParse(coorPairArray[0], out lat) || !Decimal.TryParse(coorPairArray[1], out lng))
    {
         dataBaseConnection.Close(); 
         throw new ArgumentException("Error: An extent value contained alphanumeric data. GetExtentsAsGml().");
    }

    // do something with lat/lng
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:11:42.833

```
[1-9][0-9]*(\.[0-9]+)? | 0\.[0-9]+ 
```

第一个是正常数字。第二个处理像 0.1 这样的事情

当然根据需要添加 ^ 和 $。

我宁愿选择詹姆斯的回答而不是这个。这只是为了好奇。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T10:20:03.083

最好像@James回答那样做一个tryparse，如果你想通过正则表达式，那么这里是一个示例：

```
[Test]
[TestCase("1")]
[TestCase("2")]
[TestCase("3.5")]
[TestCase("3.58278723475")]
[TestCase("6523424.82347265")]
public void FluentCalculator_Test(string testSource)
{
    var match = Regex.Match(testSource, @"^(?:[-+]?[1-9]\d*|0)?(?:\.\d+)?$");
    Assert.IsTrue(match.Success);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-03T10:46:53.567

这对我很好

```
 @"^\d*(?:\.\d+)?$" 
```

# google-maps - 用户键入位置时的 ajax 提示

> ID：11719274
> 
> 赞同：0
> 
> 时间：2012-07-30T10:05:34.267
> 
> 标签：google-maps, search, google-maps-api-3

我正在构建一个搜索引擎，当用户输入我想要提示他们的位置时，就像谷歌地图一样。我看到 www.skillpages.com 确实如此。好像是用google api来提示位置的。但是像monster.com这样也提示位置的网站似乎没有使用google api，并且似乎有自己的城镇数据库（我在查看源代码并测试了几个位置后得出了这个结论）。

最好的方法是什么？如果使用 google map api 提示位置，是否存在过度使用的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:09:02.333

如果您担心 API 的过度使用，您可以随时缓存结果，因此如果您收到大量查询，您只需将它们从缓存中拉出即可。

另一个提示：只在一定数量的字母后提示。如果您在输入一个字母后开始调用 API，您将进行大量调用，最终不需要调用。我永远无法用一封信找到我想要的任何位置。

# c++ - 虚拟表是为 Diamond Inheritance 中的哪个类创建的？

> ID：11719275
> 
> 赞同：3
> 
> 时间：2012-07-30T10:05:37.530
> 
> 标签：c++

考虑下面的代码片段：

```
class A
{
};

class B:public virtual A
{
};

class C:public virtual A
{
};

class D:public B,public C
{
};

int main()
{
    cout<<sizeof(A)<<" "<<sizeof(B)<<" "<<sizeof(C)<<" "<<sizeof(D));
    return 0;
} 
```

我得到的[输出](http://ideone.com/U362b)为：

```
1 4 4 8 
```

由于. `B`_ `C`_ `vptr`这是否意味着它`virtual table`是为类`B`和创建的`C`？怎么样`A`？

一般来说，**编译器究竟为哪些类创建了`virtual table`菱形继承？**
**创建虚拟表的决定是编译器特定的吗？**

请在上述示例或任何其他更好示例的上下文中回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:21:38.840

将为 B、C 和 D 创建虚拟表。B 和 C 将各有一个 VPTR，而 D 将有 2 个 VPTR。一个指向 VTable 的 B 部分，另一个指向 VTable 的 C 部分。

注意：VTable 不是强制性的，只要可以正确建模继承关系，编译器就可以提供自己的实现。（然而大多数编译器都实现了 VTables）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:22:35.313

没有什么说编译器*必须*为任何类创建一个`vptr`。也就是说，在现实生活中编译器生成`vptr`s 有两个原因：

1.  虚拟调度（明显）
2.  RTTI，例如`dynamic_cast`（不那么明显）所要求的

通常，`vtable`类中的条目将指向某种“类型信息”结构，该结构为 RTTI 工作提供了足够的信息。

正是这些相同的信息使编译器能够计算出如果您将任何一个`B*`, `C*`, `D*`to `A*`, so for`B`和`C`a都强制转换的话该怎么做`vptr`。`D`简单地聚合它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:18:02.927

是的，具有虚拟基础的类需要某种类型的 vtable 或等价物。您需要一些机制来在运行时查找实际的基础子对象！（请记住，虚拟基础子对象是*最派生*对象的职责，而不是直接继承对象的职责。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:20:09.250

如果编译器生成 VTABLES，他将为任何需要的类（包含虚函数，...）。

**A**不需要 VTABLE => size == 1 [最小尺寸]

**B**需要一个 => 大小 == 4 [你在 32 位...]

**C**也需要一个 => 大小 == 4

**D**也需要一个 => 大小 == 8（2 个条目，每个 VTABLE D 引用一个）

# javascript - querySelector 中的父 > 子选择器

> ID：11719279
> 
> 赞同：3
> 
> 时间：2012-07-30T10:05:49.550
> 
> 标签：javascript, selector

如何获得[> p > a](http://api.jquery.com/child-selector/)在 querySelector 中工作？

```
<div id="container">
    <p>
        <a href="#">Link</a>
    </p>
</div>

<script type="text/javascript">    
console.log(document.getElementById("container").querySelector("> p > a"));
</script> 
```

> SyntaxError：指定了无效或非法的字符串

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T10:11:25.927

阻止你的是领导`>`。如果您要使用`querySelector`，您也可以通过这种方式获取容器，而不是使用`getElementById`.

```
document.querySelector("#container > p > a") 
```

# c# - 如何使用计时器在 10 秒后关闭（自动隐藏）WPF 窗口

> ID：11719283
> 
> 赞同：10
> 
> 时间：2012-07-30T10:05:57.203
> 
> 标签：c#, wpf

如何使用 C# 中的计时器在 10 秒后关闭（自动隐藏）WPF 窗口？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-30T10:57:07.777

这样做：

```
private void StartCloseTimer()
{
    DispatcherTimer timer = new DispatcherTimer();
    timer.Interval = TimeSpan.FromSeconds(10d);
    timer.Tick += TimerTick;
    timer.Start();
}

private void TimerTick(object sender, EventArgs e)
{
    DispatcherTimer timer = (DispatcherTimer)sender;
    timer.Stop();
    timer.Tick -= TimerTick;
    Close();
} 
```

# performance - 打包大量文件以便它们可以快速部署在 Azure 上的好方法是什么？

> ID：11719284
> 
> 赞同：1
> 
> 时间：2012-07-30T10:05:58.747
> 
> 标签：performance, deployment, azure, zip, packaging

我的 Azure 角色依赖于一个庞大的本机库，该库作为一组总共约 700 兆字节的目录提供。图书馆每年更新一次。当前的解决方案是将整个树打包成一个 .zip 文件，然后将其拆分为块并上传到 Blob 存储中。当角色实例启动时，它会一一下载块并将它们按顺序保存到单个文件中，从而恢复原始 .zip。`unzip`然后使用 Info-ZIP程序解压缩 .zip 。

现在下载大约需要 25 秒，但解包可能需要 2-4 分钟，这还不够快。我查看了每个进程的性能计数器，它看起来`unzip.exe`消耗的 CPU 时间不超过 25%，因此问题可能是 I/O 繁重 - 必须从磁盘读取 .zip，然后提取的数据需要写入磁盘。我正在寻找一些其他方法来打包（和解包）库，以加快部署速度。

我如何打包库，以便在我的代码在 Azure 上运行时尽快解包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:31:51.143

长时间运行的安装（即使在您的情况下大约需要 5 分钟）是您使用 VM 角色的完美理由。您构建自定义图像（包含这些库），上传它并将该图像用作您的实例的图像。现在，如果您查看文档，则不应将 VM 角色用于生产部署 - [http://msdn.microsoft.com/en-us/library/windowsazure/gg433107](http://msdn.microsoft.com/en-us/library/windowsazure/gg433107)

一个替代方案可能是云驱动器。这是您在实例中作为 NTFS 驱动器挂载的页 blob。您在这里遇到的问题是只有一个实例可以挂载云驱动器（对多个实例没有真正的支持）。

我的建议是：

1.  在本地计算机上创建包含所需库的 VHD
2.  将其作为页 Blob 上传到您的存储帐户
3.  确保缓存足够大，以便它可以保存所有文件以避免网络延迟（更多信息：[CloudDrive.InitializeCache 方法](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.clouddrive.initializecache%28v=MSDN.10%29.aspx)）
4.  对于每个实例，创建一个快照并将该快照装载为云驱动器。这是一种能够在多个实例上使用“相同”云驱动器的解决方法。（更多信息：[CloudDrive.Snapshot 方法](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.clouddrive.snapshot.aspx)）

另一种解决方案可能是将 VHD 下载到 LocalResource 并使用**diskpart**安装它（在启动任务中）。

**注意：**我将 VHD 文件视为打包文件的另一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:23:58.920

25% CPU 通常意味着你的盒子有 4 个核心，其中一个被 100% 使用。压缩数据通常是单线程的。

所以你受CPU限制。

您可以单独压缩每个块，以便单独解压缩它们。像这样拆分工作允许并行化。您可能会因此获得 3 至 4 倍的加速。

如果您需要更快，则需要寻找更快的压缩实用程序，例如 QuickLZ。

# gwt - 如何使用 GWT 处理 404 错误？

> ID：11719290
> 
> 赞同：2
> 
> 时间：2012-07-30T10:06:13.547
> 
> 标签：gwt, error-handling, http-status-code-404, web.xml

我有一个 GWT 2.4 网络应用程序。我想以下列方式处理 HTTP 错误代码：根据代码将用户发送到不同的 GWT 页面。是的，我知道 GWT 只有一个动态页面，所以我想为此使用 Places。我在 web.xml 中添加了以下几行：

```
 <error-page>
        <error-code>404</error-code>
        <location>/index.html#error:404</location>
    </error-page> 
```

我认为这应该将用户重定向到我的 GWT 应用程序并显示与该位置对应的视图。但这根本行不通。当我尝试访问不存在的资源时会显示一个空白页面。

一个地方本身就存在，可以通过 ../index.html#error:404 URL 毫无问题地访问。所以问题出在服务器端。可能是服务器无法将我重定向到实际上不存在的页面？

那么，如何使用 GWT 处理 404 和其他错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:35:38.360

你在使用谷歌应用引擎吗？如果是，则无法定义自定义 404 处理程序。看看这里的文档：

[https://developers.google.com/appengine/docs/java/config/webxml#Error_Handlers](https://developers.google.com/appengine/docs/java/config/webxml#Error_Handlers)

无论如何，不​​管怎样，您需要定义您的 /* （捕获所有）servlet 映射，该映射在它上面的所有其他映射失败后执行。在该 servlet 中，您应该重定向到您的自定义页面。

```
<!-- ERROR 404 replacement -->
<servlet>
    <servlet-name>missingPageServlet</servlet-name>
    <servlet-class>com.myproject.MissingPageServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>missingPageServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:51:53.347

当客户端从服务器取回数据时，需要在客户端进行错误处理和重定向。

您是否使用 RequestBuilder 或 RequestFactory 来处理该通信？如果是这样，您可以在 RequestBuilder 响应状态上检测到 404 并使用`placeController.goTo(new ErrorPlace(404));`（或者您设置了场所）

# python - 使用 pyinstaller (windows) 捆绑应用程序时出错

> ID：11719292
> 
> 赞同：0
> 
> 时间：2012-07-30T10:06:18.103
> 
> 标签：python, py2exe, pyinstaller

我正在尝试捆绑一个使用 scikits-image/skimage、numpy、scipy、wx 和 reportlab 的相当广泛的应用程序。我在 Windows 7 顺便说一句。

它似乎构建得很好：

```
1091 INFO: wrote C:\Users\IEUser\Desktop\pyinstaller\sasdm\sasdm.spec
1200 INFO: Testing for ability to set icons, version resources...
1923 INFO: ... resource update available
1993 INFO: UPX is not available.
12236 INFO: checking Analysis
12246 INFO: building Analysis because out00-Analysis.toc non existent
12246 INFO: running Analysis out00-Analysis.toc
12256 INFO: Adding Microsoft.VC90.CRT to dependent assemblies of final executabl
e
69579 INFO: Searching for assembly x86_Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_9.0.2
1022.8_none ...
69589 INFO: Found manifest C:\Windows\WinSxS\Manifests\x86_microsoft.vc90.crt_1f
c8b3b9a1e18e3b_9.0.21022.8_none_bcb86ed6ac711f91.manifest
69640 INFO: Searching for file msvcr90.dll
69650 INFO: Found file C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b
_9.0.21022.8_none_bcb86ed6ac711f91\msvcr90.dll
69650 INFO: Searching for file msvcp90.dll
69660 INFO: Found file C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b
_9.0.21022.8_none_bcb86ed6ac711f91\msvcp90.dll
69660 INFO: Searching for file msvcm90.dll
69660 INFO: Found file C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b
_9.0.21022.8_none_bcb86ed6ac711f91\msvcm90.dll
70089 INFO: Analyzing C:\Users\IEUser\Desktop\pyinstaller\support\_pyi_bootstrap
.py
72563 INFO: Analyzing C:\Users\IEUser\Desktop\pyinstaller\PyInstaller\loader\arc
hive.py
72713 INFO: Analyzing C:\Users\IEUser\Desktop\pyinstaller\PyInstaller\loader\car
chive.py
72864 INFO: Analyzing C:\Users\IEUser\Desktop\pyinstaller\PyInstaller\loader\iu.
py
72904 INFO: Analyzing C:/Users/IEUser/Desktop/sasdm/sasdm.py
90069 INFO: checking Tree
90078 INFO: building because out00-Tree.toc missing or bad
90078 INFO: building Tree out00-Tree.toc
91530 INFO: checking Tree
91530 INFO: building because out01-Tree.toc missing or bad
91530 INFO: building Tree out01-Tree.toc
98730 INFO: Hidden import 'encodings' has been found otherwise
98742 INFO: Looking for run-time hooks
98742 INFO: Analyzing rthook C:\Users\IEUser\Desktop\pyinstaller\support/rthooks
/pyi_rth_Image.py
98772 INFO: Analyzing rthook C:\Users\IEUser\Desktop\pyinstaller\support/rthooks
/pyi_rth_PIL_Image.py
98802 INFO: Analyzing rthook C:\Users\IEUser\Desktop\pyinstaller\support/rthooks
/pyi_rth_Tkinter.py
98911 INFO: Analyzing rthook C:\Users\IEUser\Desktop\pyinstaller\support/rthooks
/pyi_rth_encodings.py
100013 INFO: Adding Microsoft.Windows.Common-Controls to dependent assemblies of
 final executable
123457 INFO: Warnings written to C:\Users\IEUser\Desktop\pyinstaller\sasdm\build
\pyi.win32\sasdm\warnsasdm.txt
123556 INFO: checking PYZ
123556 INFO: rebuilding out00-PYZ.toc because out00-PYZ.pyz is missing
123556 INFO: building PYZ out00-PYZ.toc
155382 INFO: checking PKG
155393 INFO: rebuilding out00-PKG.toc because out00-PKG.pkg is missing
155393 INFO: building PKG out00-PKG.pkg
199075 INFO: checking EXE
199085 INFO: rebuilding out00-EXE.toc because sasdm.exe missing
199085 INFO: building EXE from out00-EXE.toc
199164 INFO: Appending archive to EXE C:\Users\IEUser\Desktop\pyinstaller\sasdm\
dist\sasdm.exe 
```

但是当我尝试运行应用程序时，我遇到了以下错误：

```
_MEIPASS2 is NULL
archivename is C:\Users\IEUser\Desktop\pyinstaller\sasdm\dist\sasdm.exe
Extracting binaries
Executing self as child with Setting up to run child
Creating child process
Waiting for child process to finish...
_MEIPASS2 is C:/Users/IEUser/AppData/Local/Temp/_MEI39282/
archivename is C:\Users\IEUser\Desktop\pyinstaller\sasdm\dist\sasdm.exe
Already in the child - running!
manifestpath: C:/Users/IEUser/AppData/Local/Temp/_MEI39282/sasdm.exe.manifest
Activation context created
Activation context activated
C:/Users/IEUser/AppData/Local/Temp/_MEI39282/python27.dll
Manipulating evironment
PYTHONPATH=C:/Users/IEUser/AppData/Local/Temp/_MEI39282;C:/Users/IEUser/Desktop/
pyinstaller/sasdm/dist
PYTHONHOME=C:/Users/IEUser/AppData/Local/Temp/_MEI39282/
importing modules from CArchive
extracted iu
extracted struct
extracted archive
Installing import hooks
out00-PYZ.pyz
Running scripts
Traceback (most recent call last):
  File "<string>", line 10, in <module>
  File "C:\Users\IEUser\Desktop\pyinstaller\PyInstaller\loader\iu.py", line 386,
 in importHook
    mod = _self_doimport(nm, ctx, fqname)
  File "C:\Users\IEUser\Desktop\pyinstaller\PyInstaller\loader\iu.py", line 480,
 in doimport
    exec co in mod.__dict__
  File "C:\Users\IEUser\Desktop\pyinstaller\sasdm\build\pyi.win32\sasdm\out00-PY
Z.pyz\cell_analysis", line 13, in <module>
  File "C:\Users\IEUser\Desktop\pyinstaller\PyInstaller\loader\iu.py", line 431,
 in importHook
    mod = self.doimport(nm, ctx, ctx + '.' + nm)
  File "C:\Users\IEUser\Desktop\pyinstaller\PyInstaller\loader\iu.py", line 480,
 in doimport
    exec co in mod.__dict__
  File "C:\Users\IEUser\Desktop\pyinstaller\sasdm\build\pyi.win32\sasdm\out00-PY
Z.pyz\skimage.data", line 11, in <module>
  File "C:\Users\IEUser\Desktop\pyinstaller\PyInstaller\loader\iu.py", line 386,
 in importHook
    mod = _self_doimport(nm, ctx, fqname)
  File "C:\Users\IEUser\Desktop\pyinstaller\PyInstaller\loader\iu.py", line 480,
 in doimport
    exec co in mod.__dict__
  File "C:\Users\IEUser\Desktop\pyinstaller\sasdm\build\pyi.win32\sasdm\out00-PY
Z.pyz\skimage.io", line 76, in <module>
  File "C:\Users\IEUser\Desktop\pyinstaller\sasdm\build\pyi.win32\sasdm\out00-PY
Z.pyz\skimage.io", line 56, in _update_doc
ValueError: max() arg is an empty sequence
RC: -1 from sasdm
OK.
Deactivating activation context
Releasing activation context
Done
Back to parent...
Freeing status for C:\Users\IEUser\Desktop\pyinstaller\sasdm\dist\sasdm.exe 
```

这让我相信 skimage / scikits-image 有问题，但我对如何解决这个问题一无所知。有没有人遇到过类似的事情？

**更新**

我还用 py2exe 对此进行了测试，得到了以下相同的响应：

```
Traceback (most recent call last):
  File "sasdm.py", line 10, in <module>
    import cell_analysis
  File "cell_analysis.pyc", line 13, in <module>

  File "skimage\data\__init__.pyc", line 11, in <module>
  File "skimage\io\__init__.pyc", line 76, in <module>
  File "skimage\io\__init__.pyc", line 56, in _update_doc
ValueError: max() arg is an empty sequence 
```

**更新 2**

我现在已经缩小了问题的范围。在 skimage/io/_plugins/plugin.py 中，skimage 将尝试通过以下方式从文件中读取其插件：

```
pd = os.path.dirname(__file__)
ini = glob(os.path.join(pd, '*.ini')) 
```

但是，**文件**评估为一个不存在（并且看似随机命名）的目录。现在，skimage 需要将其插件文件（.ini 和 .py）包含在包中，然后在运行时需要在包中查找它们。我想第一部分可以通过收集数据文件来完成，但第二部分呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:20:20.570

我对 cx_Freeze 有同样的问题。我的解决方法是将整个文件夹 skimage 从 Python\Lib\site-packages 复制到带有 exe 文件的文件夹中。

之后我收到一个新错误“ **ImportError: no module named signal** ”，我通过在构建中添加 scipy.signal 来修复它。

顺便说一句，以下错误：

```
ValueError: max() arg is an empty sequence 
```

由我的代码中的这一行触发：

```
from skimage import data 
```

# c# - 隐式转换在泛型中失败

> ID：11719293
> 
> 赞同：1
> 
> 时间：2012-07-30T10:06:22.153
> 
> 标签：c#, generics

```
 public class ExternalUserService : ServiceBase<ExternalUser>, IServiceBase<ExternalUser>, IDisposable
        {
            public ExternalUserService():base()
            {enter code here

            }

            public ExternalUserService(IBusinessEntityMap entityMap,string ConnectionString)
            {
                repository = new BusinessModelRepository(typeof(ExternalUserMap), ConnectionString);
        }
    }

 [ServiceContract(ConfigurationName = "IServiceBase", Namespace = "http://xyz.com")]

    public interface IServiceBase<TEntity> where TEntity : BusinessEntityBase<TEntity>, new()
    {
        [OperationContract]
    }

 [DataContract(IsReference = true)]
    public class ExternalUser : BusinessEntityBase<ExternalUser>
    {
//some entity work
        } 
```

> 我正在尝试编写服务主机工厂，以便我可以拥有单个主机并基于实体。这样我就可以有一个主机。就像是

```
<%@ ServiceHost Factory="Service.BaseServiceFactory`1[BusinessEntityBase<ExternalUser>,IServiceBase<ExternalUser>,ExternalUser]" 
```

Language="C#" Debug="true" Service="一些通用服务"%>

```
public class BaseServiceFactory<x,y,z> : ServiceHostFactory
       where x : BusinessEntityBase<y>,new()
        where z : IServiceBase<x>
        where y : class,new()
    {

        protected override System.ServiceModel.ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
        {

            ServiceHost host = new ServiceHost(serviceType, baseAddresses);
            ServiceEndpoint endpoint = host.AddServiceEndpoint(typeof(z), new BasicHttpBinding(), "");

            return host;
        }
    }

 public abstract class BusinessEntityBase<TEntity> : IBusinessEntity<TEntity>
        where TEntity : class, new()
    {
} 
```

我在第 10 行遇到错误（BaseServiceFactory 类的声明）。

类型“x”不能用作泛型类型或方法“Service.IServiceBase”中的类型参数“TEntity”。没有从“x”到“BusinessModel.BusinessEntityBase”的隐式引用转换。D:\Service\BaseServiceFactory.cs 10 18 安全服务

# javascript - 获取此 html 字符串中的第二个 tds 标记文本

> ID：11719295
> 
> 赞同：0
> 
> 时间：2012-07-30T10:06:37.677
> 
> 标签：javascript, jquery

如何获取此 html 字符串中第二个 td 标记中的文本，我可以将 html 字符串传递给 JQUERY 对象并像这样过滤它吗？

```
var t = '<td>a</td><td>b</td><td>c</td><td>f</td>g<td>h</td>';

$(t).find("td:eq(1)").html(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:07:35.977

`.find`用于在当前集合中查找后代，该集合实际上是 td 元素本身，因此您需要对其进行操作，例如使用以下[`.eq`](http://api.jquery.com/eq/)方法：

```
var t = '<td>a</td><td>b</td><td>c</td><td>f</td>g<td>h</td>';
$(t).eq(1).html();
//"b" 
```

演示：http: [//jsfiddle.net/NxcUk/](http://jsfiddle.net/NxcUk/)

* * *

```
var t = '<td>a</td><td><div>firstdiv</div><div>seconddiv</div></td><td>c</td><td>f</td>g<td>h</td>';
$(t).eq(1).find("div:first").html();
//"firstdiv" 
```

# magento - 如何将自定义图像字段添加到 Magento 中的类别？

> ID：11719296
> 
> 赞同：12
> 
> 时间：2012-07-30T10:06:38.340
> 
> 标签：magento

我是magento的新手。我想将两个自定义图像字段添加到一个类别。我已经为我的模块创建了一个带有安装程序文件的模块：

```
$installer = $this;
$installer->startSetup();

$setup = new Mage_Eav_Model_Entity_Setup('core_setup');
$entityTypeId     = $setup->getEntityTypeId('catalog_category');
$attributeSetId   = $setup->getDefaultAttributeSetId($entityTypeId);
$attributeGroupId = $setup->getDefaultAttributeGroupId($entityTypeId, $attributeSetId);

$setup->addAttribute('catalog_category', 'image1', array(
    'input'         => 'image',
    'type'          => 'file',
    'group' => 'General',
    'label'         => 'Additional image 1',
    'visible'       => 1,
    'required'      => 0,
    'user_defined' => 1,
    'frontend_input' =>'',
    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
    'visible_on_front'  => 1,
));

$setup->addAttributeToGroup(
 $entityTypeId,
 $attributeSetId,
 $attributeGroupId,
 'image1',
 '999'  //sort_order
);

$installer->endSetup(); 
```

我可以在编辑或添加新类别时看到图像字段，但它没有保存到数据库中。如何让它发挥作用？谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-30T11:53:58.503

要为类别添加新的图像属性，您需要在设置中使用这些值：

```
'type'    => 'varchar',
'input'   => 'image',
'backend' => 'catalog/category_attribute_backend_image', 
```

而不是那些：

```
'input' => 'image',
'type'  => 'file', 
```

# android - 如何从android中的xml访问大括号内的数据

> ID：11719297
> 
> 赞同：0
> 
> 时间：2012-07-30T10:06:39.590
> 
> 标签：android, web-services, android-emulator, android-ksoap2

我使用 ksoap webservice 访问数据，如果只有数据不存在大括号，我会得到结果。但是在 web 服务中，数据在大括号{} 中可用，在这种情况下，我无法访问数据，我只得到空数据，它看起来像这样，

{“消息”：“需要处理贷款类型。”}

这是一个 ksoap webservice 输出，现在我如何访问大括号内的值，请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:38:58.583

好的..

```
SoapObject response = (SoapObject)envelope.getResponse();
String rate =  response.getProperty(0).toString();
String pi =  response.getProperty(1).toString();
String apr = response.getProperty(2).toString();
txtbox.setText = rate + " " + pi + " " + apr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:53:10.997

好的..您的 Web 服务在响应中返回 JSON 数据，以便您在代码中解析 Json 数据，我已经给出了一些基本逻辑如何解析 JSON Web 服务，

//=================================================

```
 private ArrayList<HashMap<String, String>> MyArray = new ArrayList<HashMap<String,String>>();
    private HashMap<String, String> MyTempHas;

    private JSONObject JSONObj;
    Private SoapObject responce = (SoapObject) envelope.getResponse();
    /* gets our result in JSON String */
    private String ResultObject = responce.getProperty(0).toString();

    if (ResultObject.startsWith("{")) { // if JSON string is an object
        JSONObj = new JSONObject(ResultObject);
        Iterator<String> itr = JSONObj.keys();
        MyTempHas = new HashMap<String, String>();
        while (itr.hasNext()) {
            String Key = (String) itr.next();
            String Value = JSONObj.getString(Key);
            MyTempHas.put(Key, Value);
            // System.out.println(bundleResult.getString(Key));
        }
        MyArray.add(MyTempHas);
    } else if (ResultObject.startsWith("[")) { // if JSON string is an array
        JSONArr = new JSONArray(ResultObject);
        System.out.println("length" + JSONArr.length());
        for (int i = 0; i < JSONArr.length(); i++) {
            JSONObj = (JSONObject) JSONArr.get(i);
        Iterator<String> itr = JSONObj.keys();
            MyTempHas = new HashMap<String, String>();
            while (itr.hasNext()) {
                String Key = (String) itr.next();
                String Value = JSONObj.getString(Key);
                MyTempHas.put(Key, Value);
                // System.out.println(bundleResult.getString(Key));
            }
            MyArray.add(MyTempHas);
        } 
    } 
```

//==========================================

在此示例中，如果您只返回一个对象，则它以“{”开头并将所有属性保存在 Hasmap 中，然后添加到 ArrayList 中。如果您的响应发送多个对象，则它以“[”数组开头，然后按照上述逻辑逐个解析对象。

然后简单地从存储在 ArrayList 中的 Hasmap 中获取所有值。如果您无法从 ArrayList 中获取价值，请告诉我我会帮助您。

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:15:45.363

试试这个示例代码 :: 它会帮助你 ::

```
public class Mywebservice1Activity extends Activity implements OnClickListener {

EditText edtuname, edtpwd;
Button btnok, btncancel;

private static final String namespace = "http://tempuri.org/";
private static final String address = "http://192.168.1.138/test/Service.asmx";
private static final String method = "login1";
private static final String action = namespace + method;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    edtuname = (EditText) findViewById(R.id.edtname);
    edtpwd = (EditText) findViewById(R.id.edtpwd);

    btnok = (Button) findViewById(R.id.btnok);
    btncancel = (Button) findViewById(R.id.btncancel);

    btnok.setOnClickListener(this);
    btncancel.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    if (v == btnok) {

        String name = edtuname.getText().toString();
        String pass = edtpwd.getText().toString();

        SoapObject request = new SoapObject(namespace, method);
        SoapSerializationEnvelope envelop = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);

        request.addProperty("user", name.toString().trim());
        request.addProperty("pass", pass.toString().trim());

        envelop.setOutputSoapObject(request);
        envelop.dotNet = true;

        HttpTransportSE transport = new HttpTransportSE(address);

        try {
            transport.call(action, envelop);
            Object res = envelop.getResponse();

            Toast.makeText(this, res.toString(), Toast.LENGTH_SHORT).show();

            // txt.setText(res.toString());

        } catch (Exception e) {
            // txt.setText(e.toString());
        }

    }

} 
```

}

# jquery - 使用 jquery BlockUI 插件阻止表行

> ID：11719303
> 
> 赞同：2
> 
> 时间：2012-07-30T10:07:12.420
> 
> 标签：jquery, jquery-ui

我试图阻止表格行，但我无法这样做。我正在使用 jquery 插件，blockUI。

我的代码：

```
var dis_tr = $("input[name=abc]").closest('tr')
dis_tr.block({message: null}); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:29:24.933

问题是，在 table 的情况下，除了 td 元素之间我们不能写任何东西。而且我们不能阻止整行。取而代之的是，我们必须阻止每个 td 元素。为此，我编写了使用 blockUI 的阻止/解除阻止函数的新函数。

```
// Functions added to block/unblock table rows by using blockUI jquery library
$.fn.block_row = function(opts) {
    row = $(this)
    height = row.height();
    $('td, th', row).each(function() {
        cell = $(this);
        cell.wrapInner('<div class="holderByBlock container" style="width:100%; height: ' + height + 'px; overflow: hidden;"></div>');
        cell.addClass('cleanByBlock');
        cell.attr('style', 'border: 0; padding: 0;')
        $('div.holderByBlock', cell).block(opts);
    })
};

$.fn.unblock_row = function(opts) {
    row = $(this)
    $('.cleanByBlock', row).each(function() {
    cell = $(this);
    $('div.holderByBlock', cell).unblock({
        onUnblock: function(cell, opts) {
            this_cell = $(cell).parent('td, th');
            this_cell.html($('.holderByBlock', this_cell).html());
            this_cell.removeAttr('style');
            this_cell.removeClass('cleanByBlock');
        }
    });
    })
}; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-30T10:11:10.743

控制台中是否有任何错误？我从来没有使用过blockUI，所以我怀疑我会不会有很大帮助，但只是从看起来我建议尝试这个：

```
var dis_tr = $('input[name="abc"]').closest('tr');
dis_tr.block({message: null}); 
```

# java - 爪哇玩！框架开发

> ID：11719306
> 
> 赞同：3
> 
> 时间：2012-07-30T10:07:17.763
> 
> 标签：java, scala, amazon-web-services, playframework-2.0

2 个月前，我开始使用 python/gae 进行 Web 开发。我们从 gae 切换到 amazon AWS 和 Java Play!。

1.  如果我想在 AWS 上部署我的应用程序，我会遇到问题吗？目前我可以使用 Elasticbeanstalk，它是一个单击解决方案。Elasticbeanstalk 是否与 Play 兼容！?

2.  我不知道斯卡拉。由于教程写得很好，我在模板/路由系统中使用 Scala 没有问题。但也许我会遇到未来的问题。如果我想使用 Play，你会推荐我学习 Scala！?

3.  我可以在本地运行我的应用程序而无需部署它，这给了我一个非常好的工作流程。是否可以为 AWS 开发并在本地测试我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:31:39.493

哪个版本的播放！你在问什么？

Beanstalk 托管 Tomcat 并期望使用 servlet 技术（servlet、过滤器、捆绑为 WAR），而 Play！Scala 2.0 版产生了一个可运行的基于 Netty（非 servlet）的程序，该程序绑定到您选择的端口。玩！2.1 将支持 servlet 3.0。[有关里程碑信息，请参阅此票证。](https://play.lighthouseapp.com/projects/82401/tickets/8)

因此，您可能想要监视 Play 的 servlet 支持或 Beanstalk 对基于 Netty 的技术的支持的进度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:21:25.080

回答您的问题

1.  由于 AWS Elastic Bean Stalk 支持在其上部署 Java Web 应用程序。部署您的 Play 不会有任何问题！项目。

2.  您无需成为 Scala Pro 即可使用 Play！。您将在使用 Play 时习惯 Scala！并最终精通它，然后如果你愿意，你可以学习它。

3.  当然，您可以为 AWS 开发应用程序并在本地进行测试。Eclipse IDE 有一个很棒的插件。

    [http://aws.amazon.com/eclipse/](http://aws.amazon.com/eclipse/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T09:14:49.273

如果您愿意升级到 Play 2.3.x 或更新版本，[Boxfuse](https://boxfuse.com)有原生 Play 2 支持来解决这个问题。

Boxfuse 为您在 VirtualBox 和 AWS 上运行不变的 Play 应用程序创建了一个最小图像。

您可以使用 Java 或 Scala 编写您的应用程序，但来自 Typesafe Play 2 对后者有很大的偏见。

要使用 Boxfuse 部署到 AWS，您现在可以简单地执行`boxfuse run my-play-app-1.0.zip -env=prod`，这将自动执行：

*   为您的 Play 2 应用程序量身定制一个最小的 AMI
*   创建弹性 IP
*   创建具有正确权限的安全组
*   启动您的应用程序的实例

所有未来的更新都作为**蓝/绿部署执行，停机时间为零**。

这也适用于 Elastic Load Balancer 和 Auto-Scaling Groups，Boxfuse 免费套餐旨在适应 AWS 免费套餐。

您可以在此处阅读更多相关信息：[https ://boxfuse.com/blog/playframework-aws](https://boxfuse.com/blog/playframework-aws)

*免责声明：我是 Boxfuse 的创始人兼 CEO*

# iphone - 如何用 CAShapeLayer 绘制图形？

> ID：11719308
> 
> 赞同：2
> 
> 时间：2012-07-30T10:07:22.690
> 
> 标签：iphone, ios, ipad, core-animation, cashapelayer

是否可以使用 CAShapeLayer 仅绘制具有给定线宽的曲线？它似乎只能绘制填充形状。我想绘制一个动画绘图图。只是一条线，不是一个形状。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:22:39.780

看来您实际上可以使用 CAShapeLayers 画线。尝试这样的事情：

```
UIBezierPath *graphPath = [UIBezierPath bezierPath];
[graphPath moveToPoint:CGPointMake(x, y)];
[graphPath addLineToPoint:CGPointMake(x, y + h)];
[graphPath closePath]; 
```

然后把它放在一个 CAShapeLayer 中：

```
CAShapeLayer *shapeLayer = [[CAShapeLayer alloc] init];
[shapeLayer setFrame: aFrame];
[shapeLayer setPath: [graphPath CGPath]];
[shapeLayer setStrokeColor:[[UIColor blackColor] CGColor]];
[shapeLayer setMasksToBounds:YES]; 
```

您可以更改`graphPath`以绘制您想要绘制的任何曲线/线。

希望这可以帮助！

# c++ - 头文件中的类 - 无法编译？

> ID：11719318
> 
> 赞同：1
> 
> 时间：2012-07-30T10:07:41.293
> 
> 标签：c++

我是 C++ 的新手。我正在尝试在 C++ 中创建头文件以将类放入其中并将其包含在主 fn 中。当我在 .h 文件中仅声明函数（而不是类成员 fns。）并将它们的定义在同名的 .cpp 文件中时，一切正常。但是当头文件中定义了类时，它在编译项目时会出现一些错误！请帮助我解决这个问题，因为我在网上（谷歌）上没有找到任何有用的东西。

这是我的代码：

```
// STUDENT.h
#ifndef STUDENT
#define STUDENT

class STUDENT
{
private :
int marks;
public :
void setMarks(int);
void getMarks();
};

#endif 
```

//学生.cpp

```
#include <iostream>
#include "STUDENT.h"

void STUDENT :: setMarks(int x)
{
marks = x;
}

void STUDENT :: getMarks()
{
cout << marks;
} 
```

// main.cpp

```
#include <cstdlib>
#include <iostream>
#include "STUDENT.h"

using namespace std;

int main(int argc, char *argv[])
{
system("PAUSE");
return EXIT_SUCCESS;
} 
```

dev c++ 上显示的其他详细信息错误：

(3) 在 main.cpp 包含的文件中 (5) 匿名联合不能有 fn。成员 (11) 抽象声明符 ' ' 用作声明 (11) 命名空间范围的匿名聚合必须是静态的

PS我还没有在main中使用类对象。只是想测试它 b4 编写实际程序

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T10:09:30.613

预处理器看到这个：

```
#define STUDENT

class STUDENT
{
    …
}; 
```

编译器（预处理后）看到：

```
class
{
    …
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:10:30.787

你的问题是这两行：

```
#define STUDENT

class STUDENT 
```

其中第一个告诉预处理器定义一个名为和空主体的*宏。*`STUDENT`当预处理器看到任何提及`STUDENT`它时，它会用主体*替换*它，在这种情况下什么都没有（因为宏主体是空的）。

要解决此问题，请更改`#define`或更改类名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:14:17.123

如下重命名标题保护，你应该没问题

```
#ifndef STUDENT_H
#define STUDENT_H 
```

# c++ - Delphi XE - 无法从系统菜单中删除项目

> ID：11719322
> 
> 赞同：1
> 
> 时间：2012-07-30T10:08:00.173
> 
> 标签：c++, c, delphi, winapi, menuitem

我有以下代码，将项目添加到系统菜单。我的问题是 DeleteMenu(SysMenu, cLANGMENU, MF_BYCOMMAND) 没有删除添加到系统菜单的弹出菜单。我无法理解的是为什么为添加的项目（扫描组件）工作，而不是为“程序语言”工作

```
procedure TForm1.Button1Click(Sender: TObject);
const aBaseItem : string = 'Programm-Sprache';
      cSepSYSTEM_MENU = wm_user + 100;
      cScanCompSystemMenu = wm_user + 101;
      cLANGMENU = wm_user + 102;
      SC_ITEM = $FF00;
var
  MenuItemInfo: TMenuItemInfo;
  PopupMenu: HMENU;
  Result: Boolean;
  SysMenu: HMenu;
  iPos, NumItems : Integer;
  wTemp1, wtemp2 : string;
  Buffer: array[0..79] of Char;
begin
  {Create the popup menu}
  PopupMenu := CreatePopupMenu;
  {Insert an item into it}
  for iPos := 5 downto 0 do
  begin
    FillChar(MenuItemInfo, SizeOf(MenuItemInfo), iPos);
      with MenuItemInfo do
      begin
        cbSize := SizeOf(MenuItemInfo);
        fMask := MIIM_TYPE or MIIM_ID;
        fType := MFT_STRING;
        wID := SC_ITEM + iPos;
        dwTypeData := PChar(inttostr(iPos));
        cch := Length(dwTypeData) * 2 + 2; //4; {'Item' is 4 chars}
      end;
    Result := InsertMenuItem(PopupMenu, 0, True, MenuItemInfo);
    Assert(Result, 'InsertMenuItem failed');
  end;

  SysMenu := GetSystemMenu(Handle, False);
  //why this isn't working???
  if not DeleteMenu(SysMenu, cLANGMENU, MF_BYCOMMAND) then
   begin
     ShowMessage('System Error Message: '+ SysErrorMessage(GetLastError)) ;
     //error message is - operation completed succesfully
   end;

  {Insert the popup into the system menu}
  FillChar(MenuItemInfo, SizeOf(MenuItemInfo), 0);
  with MenuItemInfo do
  begin
    cbSize := SizeOf(MenuItemInfo);
    fMask := MIIM_SUBMENU or MIIM_TYPE or MIIM_ID;
    fType := MFT_STRING;
    hSubMenu := PopupMenu;
    wId := cLANGMENU;
    dwTypeData :=  PChar('Test');//Before editing the question it was Program Language
    cch := Length(dwTypeData) * 2 + 2; //7; {'SubMenu' is 7 chars}
  end;

  Assert(SysMenu <> 0);
  Result := InsertMenuItem(SysMenu, GetMenuItemCount(SysMenu), True, MenuItemInfo);
  Assert(Result, 'InsertMenuItem failed');

      SysMenu := GetSystemMenu(Handle, False);
  //delete menu if exists - this is working
  DeleteMenu(SysMenu,cSepSYSTEM_MENU,MF_SEPARATOR);
  DeleteMenu(SysMenu,cScanCompSystemMenu,MFT_STRING);
  //add new ones
  InsertMenu(SysMenu, Word(-1), MF_SEPARATOR, cSepSYSTEM_MENU, '');
  FillChar(MenuItemInfo, SizeOf(TMenuItemInfo), #0);
  with MenuItemInfo do
   begin
   cbSize := SizeOf(TMenuItemInfo);
    fMask := MIIM_TYPE or MIIM_ID or MIIM_STATE;
    fType := MFT_STRING;
    wId := cScanCompSystemMenu;
    dwTypeData := PChar('Scan components');
    cch := Length('Scan components');
   end;
  Result := InsertMenuItem(SysMenu, GetMenuItemCount(SysMenu), True, MenuItemInfo);
  Assert(Result, 'InsertMenuItem failed');
end; 
```

LE：这段代码运行了好几次，所以我需要删除每次添加的项目。LE2：即使这段代码是用Delphi（Object Pascal）编写的，它也从Windows 调用WinApi 函数。也许有人在这方面进行了大量工作并且是 C/C++ 程序员可以提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:32:42.457

[该文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647578.aspx)表明您需要设置`miim_ID`标志以使用`wID`. 没有它，操作系统会忽略该字段，因此您创建的菜单项不会获得您指定的 ID 值。因此，您进一步尝试通过该 ID 引用该项目失败。

您在添加“扫描组件”项时设置了该标志，但为“测试”项省略了它。

您可以致电`GetSystemMenu(Handle, True)`. 这将在您每次调用它时重置菜单，因此您不必撤消任何先前的自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:46:22.590

`Program Language`Delphi XE2 -每次单击按钮都会添加一个系统菜单项，`Scan components`尽管您说它已为您删除，但没有任何影响。

我建议这是因为它`Scan components`是一个没有子菜单的顶级菜单项，而“程序语言”有子菜单项 0 -> 5。我怀疑如果你先删除这些，你应该可以删除父菜单（嗯，它不应该清理它自己的孩子吗？）。

很抱歉，但我没有时间编码/验证这一点，因为我要赶飞机，而且我们似乎对不同的 Delphi 版本有不同的行为——但这就是两者之间的区别，你应该看看.

我希望我能提供更多帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:26:47.157

根据 Rob Kennedy 和 David Heffernan 的回答，我解决了这个问题。解决方法不是删除菜单项，而是重新获取系统菜单的句柄。代码如下：

```
procedure TForm1.Button1Click(Sender: TObject);
const 
      cSepSYSTEM_MENU = wm_user + 100;
      cScanCompSystemMenu = wm_user + 101;
      cLANGMENU = 65444;
      SC_ITEM = $FF00;
var
  MenuItemInfo: TMenuItemInfo;
  PopupMenu: HMENU;
  Result: Boolean;
  SysMenu: HMenu;
  iPos, NumItems : Integer;
  wTemp1, wtemp2 : string;
  Buffer: array[0..79] of Char;
  subMenu : HMENU;
begin

  SysMenu := GetSystemMenu(Handle, True);
  SysMenu := GetSystemMenu(Handle, False);

  //add new ones
  InsertMenu(SysMenu, Word(-1), MF_SEPARATOR, cSepSYSTEM_MENU, '');
  FillChar(MenuItemInfo, SizeOf(TMenuItemInfo), #0);
  with MenuItemInfo do
   begin
   cbSize := SizeOf(TMenuItemInfo);
    fMask := MIIM_TYPE or MIIM_ID or MIIM_STATE;
    fType := MFT_STRING;
    wId := cScanCompSystemMenu;
    dwTypeData := PChar('Scan components');
    cch := Length('Scan components');
   end;
  Result := InsertMenuItem(SysMenu, GetMenuItemCount(SysMenu), True, MenuItemInfo);
  Assert(Result, 'InsertMenuItem failed');

  {Create the popup menu}
  PopupMenu := CreatePopupMenu;
  {Insert an item into it}
  for iPos := Random(10) downto 0 do
  begin
    FillChar(MenuItemInfo, SizeOf(MenuItemInfo), 0);
      with MenuItemInfo do
      begin
        cbSize := SizeOf(MenuItemInfo);
        fMask := MIIM_TYPE or MIIM_ID;
        fType := MFT_STRING;
        wID := SC_ITEM + iPos;
        dwTypeData := PChar(inttostr(iPos));
        cch := Length(dwTypeData) * 2 + 2; //4; {'Item' is 4 chars}
      end;
    Result := InsertMenuItem(PopupMenu, 0, True, MenuItemInfo);
    Assert(Result, 'InsertMenuItem failed');
  end;

  FillChar(MenuItemInfo, SizeOf(MenuItemInfo), 0);
  with MenuItemInfo do

  begin
    cbSize := SizeOf(MenuItemInfo);
    fMask := MIIM_SUBMENU or MIIM_TYPE;
    fType := MFT_STRING;
    hSubMenu := PopupMenu;
    wId := cLANGMENU;
    dwTypeData :=  PChar('Programm-Language');
    cch := Length(dwTypeData) * 2 + 2; //7; {'SubMenu' is 7 chars}
  end;

  Assert(SysMenu <> 0);
  Result := InsertMenuItem(SysMenu, GetMenuItemCount(SysMenu), True, MenuItemInfo);
  Assert(Result, 'InsertMenuItem failed');
end; 
```

# iphone - 检查 ASIFormDataRequest 是否仍在进行中或完成获取数据的最佳方法是什么？

> ID：11719325
> 
> 赞同：1
> 
> 时间：2012-07-30T10:08:06.880
> 
> 标签：iphone, ios, xcode4.2, asihttprequest

在我的应用程序中，我遇到了多个 Web 服务同时被占用的场景。我想知道检查特定 ASIFormDataRequest 是否仍在进行中的最佳方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T10:11:16.597

您可以像 yourRequest.tag 一样将标签设置为 ASIHttpRequest 并使用以下委托方法。如果完全成功完成，它将进入 requestFinished，如果出现问题，它将进入 requestFailed。

```
- (void)requestFinished:(ASIHTTPRequest *)request
{
   // Use when fetching text data
   NSString *responseString = [request responseString];
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
   NSError *error = [request error];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:25:06.357

检查以下代码它可能对您有所帮助

```
 if (!networkQueue) 
        {
            networkQueue = [[ASINetworkQueue alloc] init];  
        }
        [networkQueue reset];
        [networkQueue setRequestDidFinishSelector:@selector(requestDone:)];
        [networkQueue setRequestDidFailSelector:@selector(requestWentWrong:)];
        [networkQueue setShowAccurateProgress:TRUE];
        [networkQueue setDelegate:self];
        ASIHTTPRequest *requestqueue;
         requestqueue = [[[ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:str_imageurl]] autorelease];
         [requestqueue setDownloadDestinationPath:[str_downloadpath stringByAppendingPathComponent:str_imgname]];
       NSMutableDictionary *dictinfo=[[NSMutableDictionary alloc]init];
       [dictinfo setValue:str_settingvalue forKey:@"SettingValue"];
       [requestqueue setUserInfo:dictinfo];
       [networkQueue addOperation:requestqueue];
      [networkQueue go]; 
```

**关于代表方法**

```
 //queue responder....
   -(void)requestDone:(ASIHTTPRequest *)request
     {
         NSLog(@"%@",[request userInfo]);
         if ([[[request userInfo]valueForKey:@"SettingValue"]isEqualToString:kAppSplashScreenDOWNLOADURL]) 
         {
           //FORM DATA REQEUST FOR PARTICULAR REQUEST HAS BEEN SUCCESS FULL
         }
     } 
    -(void)requestWentWrong:(ASIHTTPRequest *)request
    {
        NSLog(@"%@",[request userInfo]);
         if ([[[request userInfo]valueForKey:@"SettingValue"]isEqualToString:kAppSplashScreenDOWNLOAD]) 
         {
           //FORM DATA REQEUST FOR PARTICULAR REQUEST HAS BEEN FAIL
         }

    } 
```

问候尼基尔

# c++ - 在 C++ Eigen 库中变换向量数组

> ID：11719326
> 
> 赞同：4
> 
> 时间：2012-07-30T10:08:09.993
> 
> 标签：c++, eigen

从[Eigen](http://eigen.tuxfamily.org/)数学库开始，我遇到了一个非常简单的任务：使用四元数转换一系列向量。似乎我所做的一切都没有`operator*`找到，或者将数组与矩阵混合。

```
Eigen::Quaternionf rot = …;
Eigen::Array3Xf series = …;

// expected this to work as matrix() returns a Transformation:
series.matrix().colwise() *= rot.matrix();

// expected these to work as it's standard notation:
series = rot.matrix() * series.matrix().colwise();
series = rot.toRotationMatrix() * series.matrix().colwise();

// Also tried adding .homogeneous() as one example used it… no dice 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:07:21.363

嗯......不知道你为什么在你的例子中使用一个数组。我猜你想通过 rot 转换 m 3 向量，对吧？您可以为此使用 3xm 矩阵。

怎么样

```
using namespace Eigen;
Quaternionf rot = ...;
Matrix<float,3,Dynamic> series = ...;

series = rot.toRotationMatrix() * series; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:24:45.283

这可能是一个非常生硬但有效的解决方案：

```
for (int vector = 0; vector < series.cols(); ++vector)
   series.col(vector) = rot * series.col(vector).matrix(); 
```

这里的重点是，在某个地方，必须有人阅读您的代码。一个简单的`for`循环通常最容易理解。

# winforms - 在 Windows 窗体应用程序中隐藏 cmd 窗口

> ID：11719328
> 
> 赞同：0
> 
> 时间：2012-07-30T10:08:36.150
> 
> 标签：winforms, cmd, hide

我必须在 WFA 中使用 cmd 命令，例如：

```
system(erase /q); 
```

所以，现在我有两个窗口 - cmd 和我的应用程序。它正在工作，但我想隐藏 cmd 窗口。

有任何想法吗？

* * *

哦，我忘了添加语言名称，抱歉，它是 C++。您的代码看起来不错，我尝试为 C++“更改”它：

```
System::Diagnostics::Process process = gcnew System::Diagnostics::Process();
System::Diagnostics::ProcessStartInfo ^ startInfo = gcnew
System::Diagnostics::ProcessStartInfo();
startInfo->WindowStyle = System::Diagnostics::ProcessWindowStyle::Hidden;
startInfo->FileName = "cmd.exe";
startInfo->Arguments = "system(linkStr)";
process->StartInfo = startInfo;
process->Start(); 
```

但它返回错误：

> 'System::Diagnostics::Process' : 类没有复制构造函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:12:00.853

这是在c#中隐藏cmd窗口。

```
 System.Diagnostics.Process process = new System.Diagnostics.Process();
    System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
    startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
    startInfo.FileName = "cmd.exe";
    startInfo.Arguments = "system(erase /q)";
    process.StartInfo = startInfo;
    process.Start(); 
```

# database - 在 cakephp 中删除 HABTM 的数据

> ID：11719331
> 
> 赞同：0
> 
> 时间：2012-07-30T10:08:56.457
> 
> 标签：database, cakephp, has-and-belongs-to-many

我是 cakephp 的新手。我正在尝试根据 HABTM 关系进行删除，但失败了。请帮我。

我有三个表：`products`和`users`表`users_products`。

一个产品可以有很多用户，一个用户可以有很多产品。users_products 表的结构是：`id`, `user_id`, `product_id`, `renew_id`.

当满足某些条件时，我想删除表中的所有数据`users_products`，但我不想触摸表上的任何东西。`products``renew_id``users`

我正在考虑编写一个while循环来删除记录，但担心会导致很多查询并且不使用cakephp功能。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:38:15.747

对于 Has Many 和 HABTM 数据删除，我们更喜欢这种方法

```
//delete(int $id = null, boolean $cascade = true);
  $this->Product->delete($id,true); 
```

只有在模型中定义了关系时，级联才会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:25:27.323

您可以像任何其他模型一样从联接中删除行。

`$this->UsersProduct->delete()`或者`$this->UsersProduct->deleteAll()`

如果您使用的是 HABTM，则该关系可能不可用，因此您可以在模型中定义关系，例如 User hasMany UsersProduct 和 Product hasMany UsersProduct，这将允许双方访问。

你也可以使用`ClassRegistry::init('UsersProduct')->deleteAll()`

作为旁注，您的连接模型被错误地命名为它应该是 ProductsUser 根据约定，即连接表是连接模型的字母顺序。以下约定将为您提供一个名为`products_users`

# php - 我的脚本不上传带有空格但带有下划线的文件

> ID：11719332
> 
> 赞同：-1
> 
> 时间：2012-07-30T10:08:56.813
> 
> 标签：php, file-upload

**当我上传一个带有空格的文件时，它会出现一个下划线，但我想允许空格。也许解决方案在这段代码中：**

```
$_CONFIG['check_file_name_regex'] = '^[a-zA-Z0-9\-\_]+[a-zA-Z0-9\-\_\.]+[a-zA-Z0-9\-\_]$'; 
```

**如何在我的脚本中允许空格？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:14:23.743

更改`^[a-zA-Z0-9\-\_]`为`^[a-zA-Z0-9\-\_\s]`

并且，在`[]`和`_`中`.`不需要转义。如果`-`是最后一个字符，也不需要转义。所以`^[a-zA-Z0-9_\s.-]`没关系。

# javascript - 带图像的 TweenJS

> ID：11719338
> 
> 赞同：2
> 
> 时间：2012-07-30T10:09:19.917
> 
> 标签：javascript, html, html5-canvas, tween, createjs

我在将图像从 x=0 设置为 x=400 时遇到问题。我正在使用easeljs 和tweenjs。这是我的代码： Javascript：

```
<!doctype html>
<html>
<head>
    <title></title>
    <script src="js/easeljs-0.4.1.min.js"></script>
    <script src="js/tweenjs-0.2.0.min.js"></script>

    <script type="text/javascript">
        function init() {
            var canvas = document.getElementById("canvas");
            var stage = new Stage(canvas);
            var img=new Image();

            img.src="http://exampledomain.com/exampleimage.jpg";
            img.onload = function(e){
                var title = new Bitmap(e.target);
                stage.addChild(title);
                stage.update();
            }
            var tween = Tween.get(img).to({x:400},400).call(tweenComplete);
        }

        function tweenComplete(){
            alert('done');
        }
    </script>
</head>
<body onload="init();">
    <canvas id="canvas" width="430" height="446"></canvas>
</body>
</html> 
```

我确定补间开始了，因为 400 毫秒后会打开警报，但图像不会移动一个像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:58:35.237

看起来有几件小事正在密谋破坏代码。

首先，有点竞争条件。您正确地创建了 Bitmap 并将其添加到 Stage 中`img.onload()`，但是`var tween = ...`在它之后的代码可以随时运行，包括在创建/添加 Bitmap**之前。**

尝试将`var tween = ...`线移动到函数的末尾`img.onload`并将其更改为`get(img)`，`get(title)`以便您可以对位图而不是图像进行操作。

最后，您需要让 Ticker 移动，以便 Stage 会更新。在结尾尝试这样的事情`init()`：

```
Ticker.addListener(stage); 
```

[请注意，对于使用更高版本 CreateJS 的任何人，您需要命名空间/前置“createjs”。到 Stage、Bitmap、Ticker 等的使用]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T21:48:49.017

您必须为您的位图设置动画，而不是其中的图像。存储对您创建的位图实例的引用，并设置它的 x/y。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T12:58:01.780

设置您要为其设置动画的 tile(image) 的初始 x,y 坐标。尽管在补间中使用了 get(img)，但仍使用图像对象标题作为 get(title)，并且还使用股票代码进行计数更新 cretajs.Ticker.addEventListener('tick',function(){stage.update();})

# mysql - MySQL：更新具有最大值的“where”子句的表

> ID：11719346
> 
> 赞同：0
> 
> 时间：2012-07-30T10:09:32.560
> 
> 标签：mysql

我想更新最后生成的行（该`max(id)`行。

我试过这段代码，但它不起作用

```
update person t1
set t1.age = 25
where t1.id = (select max(t2.id)  from person t2
            where t2.address = 'LA, California'); 
```

MySQL 告诉我：`Error Code: 1093\. You can't specify target table 't1' for update in FROM clause`

所以，我想在执行更新等操作时我无法达到相同的故事。

我该如何解决这个问题？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:12:52.007

您不能在子查询中引用同一个表，但您可以在 JOIN 中执行它（在`UPDATE`and`DELETE`语句中是允许的）：

```
UPDATE person a
JOIN   (SELECT MAX(id) AS id FROM person WHERE address = 'LA, California') b
       ON a.id = b.id
SET    a.age = 25 
```

另一种方法是使用`ORDER BY`/`LIMIT`技术：

```
UPDATE   person
SET      age = 25
WHERE    address = 'LA, California'
ORDER BY id DESC
LIMIT    1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:14:24.180

您可以尝试如下：

```
UPDATE person t1
    INNER JOIN (SELECT MAX(id) AS id  FROM person
            WHERE t2.address = 'LA, California') t2
        ON t1.id = t2.id
SET t1.age = 25; 
```

或者

```
SELECT MAX(t2.id)
INTO @var_max_id
FROM person t2
WHERE t2.address = 'LA, California';

UPDATE person t1
SET t1.age = 25
WHERE t1.id = IFNULL(@var_max_id, -1); 
```

# windows - 使用具有多种文件类型的 forfiles 进行搜索掩码？

> ID：11719347
> 
> 赞同：20
> 
> 时间：2012-07-30T10:09:37.077
> 
> 标签：windows, search

以下命令适用于一种类型的文件，

```
forfiles -p "C:abc\del" -s -m *.exe -d -70 -c "cmd /c echo @path" 
```

是否可以通过多个文件扩展名进行过滤？`*.exe`, `*.dll`, `*.xyz`?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T10:41:00.183

没有我希望的那么好，但这个 oneliner 可以提供帮助。但是请注意，您不能使用 * 作为过滤器，因为在这种情况下 IN 函数会开始选择文件。

```
for %G in (.exe, .dll, .xyz) do forfiles -p "C:abc\del" -s -m *%G -d -70 -c "cmd /c echo @path" 
```

以此作为[参考](http://ss64.com/nt/for.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-23T00:03:19.510

也可以一次遍历目录结构并使用`IF`.

```
forfiles -p c:\ -s  -c "cmd /c (if @ext==\"exe\" echo @path) & ( if @ext==\"dll\" echo @path) &  ( if @ext==\"xyz\" echo @path)" 
```

请记住转义内部引号 `\"dll\" instead of "dll"`，因为整个命令都在一个字符串中。

# java - 在现有的 Cassandra 集群中添加节点

> ID：11719348
> 
> 赞同：2
> 
> 时间：2012-07-30T10:09:38.687
> 
> 标签：java, cassandra

我现在创建了一个有 2 个节点的集群。我想向它添加另一个节点，使其成为一个 3 节点集群。我已阅读 datastax 的文档。我想知道，当我添加第 3 个节点时，我是否必须更改前 2 个节点的令牌值，我是否必须重新启动集群？
另外我想知道，除了基本设置（监听地址、rpc 地址、令牌、种子）之外，我是否需要更改其他任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:17:24.703

如果您在不更改令牌的情况下将单个新节点添加到 2 节点集群，您最终将拥有一个节点拥有 50% 的密钥，而 2 个节点各拥有 25% 的密钥。相反，当您使新节点联机时，您应该指定初始令牌（在 cassandra.yaml 中）。然后，您应该使用`nodetool move`移动节点 2 上的令牌，然后`nodetool cleanup`删除任何不需要的数据。

您应该使用以下令牌：

```
Node 1: 0 -- should already be set
Node 2: 56713727820156407428984779325531226112 -- will require the move
Node 3: 113427455640312814857969558651062452224 -- will be set using initial token 
```

# jquery - jqGrid警告请选择行位置

> ID：11719349
> 
> 赞同：0
> 
> 时间：2012-07-30T10:09:39.240
> 
> 标签：jquery, jqgrid

有没有办法将对话框消息“请选择行”定位在所选网格的左上角？

我只想要警报警告中的相同行为，就像编辑和删除表单一样。

这个主题解决方案对我不起作用.. [AlertMod 警告消息的 JQGrid 位置](https://stackoverflow.com/questions/9182989/jqgrid-position-of-the-alertmod-warning-message)

我在同一页面中有 3 个网格，如果您单击最后一个网格的一行，警告消息会出现在页面顶部，并且用户无法察觉...

谁能帮我？

提前致谢

**解决方案：**

```
var orgViewModal = $.jgrid.viewModal;

$.extend($.jgrid, {
    viewModal: function (selector, o) {
        if (selector === '#alertmod') {
            var $gbox = $(o.gbox), $selector = $(selector);
            var of = $gbox.offset(), w = $gbox.width(), h = $gbox.height(); 
            var w1 = $selector.width(), h1 = $selector.height();
            $selector.css({
                'top': of.top + ((h-h1)/2),
                'left': of.left + ((w-w1)/2)
            });
        }
        orgViewModal.call(this, selector, o);
    }
}); 
```

对于其他感兴趣的人，这个解决方案对我有用。仅更改警报框的位置并保持其他所有内容相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:20:22.603

看看这个答案

[http://www.ok-soft-gmbh.com/jqGrid/CenterEditForm.htm](http://www.ok-soft-gmbh.com/jqGrid/CenterEditForm.htm)

你需要改变你的 beforeShowForm 事件

或者您可以在 afterShowform 事件上实现此功能

 `````
function centerForm ($form) {
                    $form.closest('div.ui-jqdialog').position({
                        my: "center",
                        of: $('#grid').closest('div.ui-jqgrid')
                    });
                    } 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:33:32.607

如果我理解正确您的问题，您可以使用[navGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator#definition)`alerttop`和`alertleft`选项。参数可以包含在选项中。[答案](https://stackoverflow.com/a/11230619/315935)描述了另一个未记录的选项。`parameters``navGrid``navGrid`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T17:25:27.823

正如我在评论中写的那样，我有一张长桌子，我需要警报窗口始终位于视口的中心。所以我需要动态定位警报窗口。我需要在用户向下滚动页面并单击“编辑”或“删除”后设置位置。

据我了解，导航没有警报模式窗口的“beforeShowForm”或“beforeShowSearch”等事件。我也无法在寻呼机上点击。

Oleg 和 Paulo Pinto 提供的解决方案对我不起作用。我不知道为什么。我什至不明白它是如何工作的:)

所以我找到了自己的直...不是很好的方式。

```
loadComplete: function(){
    $(window).scroll(function() {
        $('#alert_window_id').center();
    });
} 
```

其中“中心（）”是

```
jQuery.fn.center = function () {
    this.css("position","absolute");
    this.css("top", ( $(window).height() - this.height() ) / 2+$(window).scrollTop() + "px");
    this.css("left", ( $(window).width() - this.width() ) / 2+$(window).scrollLeft() + "px");
    return this;
} 
```

在 loadComplete 之后，警报 div 似乎已经存在，并且网格具有其完整高度，因此窗口滚动也存在。因为我没有单击“编辑”按钮或显示警报对话框的事件 - 我在每次滚动事件后重新定位警报对话框。``

# php - 用户表 wordpress 中的最后一个插入 id 问题

> ID：11719354
> 
> 赞同：0
> 
> 时间：2012-07-30T10:09:54.013
> 
> 标签：php, wordpress

我的 wordpress 网站上有一个注册表单。我使用以下代码插入用户。

```
$username = $wpdb->escape(trim($_POST['txtFullName']));
$email = $wpdb->escape(trim($_POST['txtEmail']));
$password = $wpdb->escape(trim($_POST['txtPassword']));
$confirmpassword = $wpdb->escape(trim($_POST['txtConfirmPassword']));
$gender = $wpdb->escape(trim($_POST['gender']));

 $user_id = wp_insert_user( array ('user_pass' => apply_filters('pre_user_user_pass', $password), 'user_login' => apply_filters('pre_user_user_login', $username), 'user_email' => apply_filters('pre_user_user_email', $email), 'role' => 'author' ) ); 
```

我使用以下代码来获取上述行下插入的 id。

```
$authid = $wpdb->insert_id; 
```

用户表中的 AUTO_INCREMENT 主键与插入的 id 不同。我无法追踪错误。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:36:59.083

`wp_insert_user()`返回新创建用户的 ID。在您的示例`$user_id`中已包含新 ID。

# php - 如何将php代码包装在函数中？

> ID：11719362
> 
> 赞同：-4
> 
> 时间：2012-07-30T10:10:34.380
> 
> 标签：php, function

嗨，我需要将此代码包装在一个函数中以供以后使用，我是 php 新手，请提供任何帮助

```
$term_slug = get_query_var( 'term' );
$taxonomyName = get_query_var( 'taxonomy' );
$current_term = get_term_by( 'slug', $term_slug, $taxonomyName );
$args = array( 'child_of' => $current_term->term_id, 'hide_empty'=>false);
$terms = get_terms( 'tagportifolio', $args);
$assoc = taxonomy_image_plugin_get_associations();

if (!empty($terms)):
?>

<?php foreach( $terms as $child ): ?>
<?php if(array_key_exists( $child->term_taxonomy_id, $assoc )){echo wp_get_attachment_image( $assoc[$child->term_taxonomy_id], array(), false, 'thumbnail'); }
?>
<a href="<?php echo get_term_link( $child->name, $taxonomyName );?>">
<?php echo $child->name; ?></a ><br/>
<?php endforeach; ?>
<?php else: ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:32:01.813

如果需要使它起作用，它可能会有所帮助，格式很少，并使用变量返回整个 html，

```
<?php
function formatOutput()
{
    $term_slug = get_query_var( 'term' );
    $taxonomyName = get_query_var( 'taxonomy' );
    $current_term = get_term_by( 'slug', $term_slug, $taxonomyName );
    $args = array( 'child_of' => $current_term->term_id, 'hide_empty'=>false);
    $terms = get_terms( 'tagportifolio', $args);
    $assoc = taxonomy_image_plugin_get_associations();
    $output = '';
    if (!empty($terms))
    {
        foreach($terms as $child ) 
        {
            if(array_key_exists( $child->term_taxonomy_id, $assoc ))
            {
                $output .= wp_get_attachment_image( $assoc[$child->term_taxonomy_id], array(), false, 'thumbnail'); 
            }
            $output .= "<a href=get_term_link( $child->name, $taxonomyName ) >$child->name;</a >";  
        }
    }
    else
    {
        /* else code  : might be empty output*/
        $output .= '';
    } 
    return $output;
}
 ?> 
```

# javascript - 区分向下滚动和向上滚动

> ID：11719365
> 
> 赞同：2
> 
> 时间：2012-07-30T10:10:45.497
> 
> 标签：javascript, html

我正在开发无限滚动功能。它工作正常，唯一的问题是向下滚动和向上滚动时会发生 ajax 加载。如何检查事件是在 jquery 或 javascript 中向下滚动。如何获取当前滚动位置。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:12:46.220

您可以`scrollTop`为此使用属性。它为您提供有关垂直滚动位置的信息。记住变量中的旧值，然后将其与新值进行比较以确定滚动方向。

我相信您可以在传递给事件处理程序的对象中找到此属性。更多信息在这里[http://help.dottoro.com/ljnvjiow.php](http://help.dottoro.com/ljnvjiow.php)

# caching - grails中的缓存设置

> ID：11719366
> 
> 赞同：2
> 
> 时间：2012-07-30T10:10:48.100
> 
> 标签：caching, grails, associations, ehcache

我的数据源配置：

```
hibernate {
 cache.use_second_level_cache = true
 cache.use_query_cache = true
 cache.provider_class='org.hibernate.cache.EhCacheProvider'
} 
```

我有一个名为 Category 的实体，它可以有一个或多个类别（子）

```
class Category{
 int ordering
 static hasMany = [categories: Category]

 static mapping = {
    categories(sort: "ordering", order: "asc")
    sort "ordering"
    cache usage: 'nonstrict-read-write'
    categories cache: 'nonstrict-read-write'
} 
```

当我从管理页面更改一个属性时，假设来自类别实例的排序属性，该更改不会从与父类别的关联中反映出来，因此 assoc 集合具有更改后的子项的旧属性。我试图删除这个：

```
 categories cache: 'nonstrict-read-write' 
```

然后类别关联总是最新的。

如何确保每次更新类别实例时，都会通知父类别的类别关联更改？默认情况下不应该这样工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:46:56.573

好的，我找到了！我不得不像这样驱逐整个集合： sessionFactory.evictCollection(Category.class.name + '.categories')

# jquery - 删除 JQuery UI 选项卡中的填充

> ID：11719371
> 
> 赞同：8
> 
> 时间：2012-07-30T10:11:03.007
> 
> 标签：jquery, jquery-ui, layout

我想将文本更靠近左侧...

![我想将文本更靠近左侧](../Images/834540cf71af7a934b34c06af23dd43e.png)

好的，上面显示的图片，我想覆盖我的 jquery-ui-tab 页面的填充。我已经尝试了下面的代码，但似乎不起作用。

```
$(".ui-tabs.panel").css('padding','0px'); 
```

现在我怎样才能做到这一点？

**注意**：我想要一个 css 或 jquery 覆盖，我不想改变任何 jquery-ui css 文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T12:44:52.327

你可以用普通的 CSS 来做到这一点；试试这个，例如：

将此包含在您的主样式表中：

```
.ui-tabs .ui-tabs-panel {
    padding: 1em 1.4em 1em 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T14:20:47.780

老问题，但这很好用。假设您有一个包含 div 类的“样式标签”，如下所示：

```
<div id="tabs" class="style-tabs">
<ul>
<li><a href="ajax/MyTab.php">My Tab</a></li>
<li><a href="ajax/MyTab2.php">My Tab 2</a></li>
<ul>
</div>

This CSS works nicely (setting a negative margin)...

.style-tabs li a { 
    margin: -0.3em; 
    padding: 0; 
 } 
```

# http - 在 Scala 中执行 HTTP 请求

> ID：11719373
> 
> 赞同：78
> 
> 时间：2012-07-30T10:11:03.397
> 
> 标签：http, scala, scalaz

我正在尝试向 Web 服务发出一个简单的 POST 请求，该请求在 Scala 中返回一些 XML。

似乎[Dispatch](http://dispatch.databinder.net/Dispatch.html)是用于此任务的标准库，但我找不到它的文档。我在上面链接的主站点详细解释了什么是承诺以及如何进行异步编程，但实际上并未记录 API。有一个[元素周期表](http://www.flotsam.nl/dispatch-periodic-table.html)- 看起来有点吓人 - 但它似乎只对已经知道该怎么做并且只需要提醒神秘语法的人有用。

[Scalaz](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc.sxr/scalaz/http/request/Method.scala.html)似乎也有一些 HTTP 工具，但我也找不到任何文档。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-07-30T11:20:23.440

我使用以下内容：[https](https://github.com/scalaj/scalaj-http) ://github.com/scalaj/scalaj-http 。

这是一个简单的 GET 请求：

```
import scalaj.http.{Http, HttpOptions}

Http("http://example.com/search").param("q", "monkeys").asString 
```

和一个 POST 的例子：

```
val result = Http("http://example.com/url").postData("""{"id":"12","json":"data"}""")
  .header("Content-Type", "application/json")
  .header("Charset", "UTF-8")
  .option(HttpOptions.readTimeout(10000)).asString 
```

Scalaj HTTP 可通过 SBT 获得：

```
libraryDependencies += "org.scalaj" % "scalaj-http_2.11" % "2.3.0" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-07T18:43:41.603

您可以使用[spray-client](http://spray.io/documentation/1.2.1/spray-client/)。缺少文档（我花了一些时间来了解[如何使用查询参数发出 GET 请求](https://stackoverflow.com/questions/13463387/scala-url-with-query-string-parser-and-builder-dsl)），但如果您已经在使用 Spray，这是一个不错的选择。而且文档比调度好。

我们在[AI2](http://allenai.org/)中使用它而不是[调度](http://dispatch.databinder.net/Dispatch.html)，因为操作符的符号性较低，而且我们已经在使用喷雾/演员。

```
import spray.client.pipelining._

val url = "http://youruri.com/yo"
val pipeline: HttpRequest => Future[HttpResponse] = sendReceive

// Post with header and parameters
val responseFuture1: Future[String] = pipeline(Post(Uri(url) withParams ("param" -> paramValue), yourPostData) map (_.entity.asString)

// Post with header
val responseFuture2: Future[String] = pipeline(Post(url, yourPostData)) map (_.entity.asString) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-30T11:33:04.137

我正在使用调度：[http ://dispatch.databinder.net/Dispatch.html](http://dispatch.databinder.net/Dispatch.html)

他们刚刚发布了一个新版本（0.9.0），其中包含我非常喜欢的全新 api。它是异步的。

项目页面的示例：

```
import dispatch._
val svc = url("http://api.hostip.info/country.php")
val country = Http(svc OK as.String)

for (c <- country)
  println(c) 
```

编辑：这可能会帮助你[https://github.com/dispatch/reboot/blob/master/core/src/main/scala/requests.scala](https://github.com/dispatch/reboot/blob/master/core/src/main/scala/requests.scala)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-31T10:18:54.880

使用我的[Requests-Scala](https://github.com/lihaoyi/requests-scala)库：

```
// Mill
ivy"com.lihaoyi::requests:0.1.8"
// SBT
"com.lihaoyi" %% "requests" % "0.1.8" 
```

这很简单

```
val r = requests.get("https://api.github.com/users/lihaoyi")

r.statusCode
// 200

r.headers("content-type")
// Buffer("application/json; charset=utf-8")

r.text
// {"login":"lihaoyi","id":934140,"node_id":"MDQ6VXNlcjkzNDE0MA==",... 
```

```
val r = requests.post("http://httpbin.org/post", data = Map("key" -> "value"))

val r = requests.put("http://httpbin.org/put", data = Map("key" -> "value"))

val r = requests.delete("http://httpbin.org/delete")

val r = requests.head("http://httpbin.org/head")

val r = requests.options("http://httpbin.org/get") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-13T01:32:45.237

另一个选择是 Typesafe 的 play-ws，它是作为独立库分解的 Play Framework WS 库：

[http://blog.devalias.net/post/89810672067/play-framework-seperated-ws-library](http://blog.devalias.net/post/89810672067/play-framework-seperated-ws-library)

我不一定会将此作为最佳选择，但值得一提。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-31T07:37:57.893

如果我可以做一个无耻的插件，我有一个名为[Bee-Client](https://bitbucket.org/rickb777/bee-client/overview)的 API ，它只是 Scala 中用于 Java 的 HttpUrlConnection 的包装器。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-07T09:22:48.320

我必须做同样的事情来测试一个端点（在集成测试中）。下面是从 Scala 中的 GET 请求中获取响应的代码。我正在使用 scala.io.Source 从端点和 ObjectMapper 读取 json 到对象的转换。

```
private def buildStockMasterUrl(url:String, stockStatus:Option[String]) = {
      stockStatus match  {
        case Some(stockStatus) => s"$url?stockStatus=${stockStatus}"
        case _ => url
    }
  }

    private def fetchBooksMasterData(stockStatus:Option[String]):  util.ArrayList[BooksMasterData] = {
    val url: String = buildBooksMasterUrl("http://localhost:8090/books/rest/catalogue/booksMasterData",stockStatus)
    val booksMasterJson : String = scala.io.Source.fromURL(url).mkString
    val mapper = new ObjectMapper()
    apper.readValue(booksMasterJson,classOf[util.ArrayList[BooksMasterData]])
}

case class BooksMasterData(id:String,description: String,category: String) 
```

这是我的测试方法

```
test("validate booksMasterData resource") {
    val booksMasterData = fetchBooksMasterData(Option(null))
    booksMasterData.size should be (740)
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-30T10:16:18.340

为什么不使用[Apache HttpComponents](http://hc.apache.org/)？这是[应用程序常见问题解答](http://wiki.apache.org/HttpComponents/FrequentlyAskedApplicationDesignQuestions#GET_with_Query)，它涵盖了广泛的场景。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-13T11:45:53.487

这是我正在上的一堂课。它有 GET 和 POST 请求。不带参数的 GET - 带参数的 POST 我用它与 StreamSets 通信以启动管道或检查管道状态。

它只需要 build.sbt 文件中的以下依赖项：

```
libraryDependencies += "org.scalaj" %% "scalaj-http" % "2.3.0" 
```

您可以在此处找到文档：[https ://github.com/scalaj/scalaj-http#post-raw-arraybyte-or-string-data-and-get-response-code](https://github.com/scalaj/scalaj-http#post-raw-arraybyte-or-string-data-and-get-response-code)

```
 import scala.collection.mutable.ArrayBuffer
import scalaj.http.{Http, HttpResponse}

object HttpRequestHandler {

  val userName: String = "admin"
  val password: String = "admin"

  def sendHttpGetRequest(request: String): String = {

    println(" Send Http Get Request (Start) ")

    try {

      val httpResponse: HttpResponse[String] = Http(request).auth(userName,password)
                                                            .asString

      val response = if (httpResponse.code == 200) httpResponse.body
      else{
        println("Bad HTTP response: code = "+httpResponse.code )
        return "ERROR"
      }

      println(" Send Http Get Request (End) ")

      return response

    } catch {
      case e: Exception => println("Error in sending Get request: "+e.getMessage)
        return "ERROR"
    }

  }

  def arrayBufferToJson(params:ArrayBuffer[(String,String)]): String ={

    var jsonString = "{"
    var count: Int = 0
    for(param <- params){
      jsonString+="\""+param._1+"\":\""+param._2+"\""+ ( if(count!=params.length-1) "," else "")
      count+=1
    }
    jsonString+="}"

    return jsonString

  }

  def sendHttpPostRequest(request: String,params: ArrayBuffer[(String,String)]): String = {

    println(" Send Http Post Request (Start) ")

    try {
      val postData : String = arrayBufferToJson(params)
      println("Parameters: "+postData)
      val httpResponse: HttpResponse[String] = Http(request).auth(userName,password)
                                                            .header("X-Requested-By","sdc")
                                                            .header("Content-Type", "application/json;charset=UTF-8")
                                                            .header("X-Stream" , "true")
                                                            .header("Accept", "application/json")
                                                            .postData(postData.getBytes)
                                                            .asString

      val response = if (httpResponse.code == 200) httpResponse.body
      else{
        println("Bad HTTP response: code = "+httpResponse.code )
        "ERROR"
      }

      println(" Send Http Post Request (End) ")

      return response

    } catch {
      case e: Exception => println("Error in sending Post request: " + e.getMessage)
        return "ERROR"
    }
  }

} 
```

# c++ - 如何防止双值被截断？

> ID：11719376
> 
> 赞同：-2
> 
> 时间：2012-07-30T10:11:18.833
> 
> 标签：c++

* * *

这是一个可重现的 C++ 程序：

```
#include <RInside.h>
#include <Rcpp.h>

int main (int argc, char *argv[])
{
    RInside R (argc, argv);
    SEXP ans = R.parseEval ("m <- 40.702147");

    Rcpp::NumericVector v (ans);           

    for (int i=0; i< v.size(); i++) 
    {           
        std::cout << "In C++ element " << i << " is " << v[i] << std::endl;
    }

    return 0;
} 
```

* * *

Makefile在这里：

```
## -*- mode: make; tab-width: 8; -*-
##
## Simple Makefile
##
## TODO: 
##  proper configure for non-Debian file locations,   [ Done ]
##  allow RHOME to be set for non-default R etc

## comment this out if you need a different version of R, 
## and set set R_HOME accordingly as an environment variable
R_HOME :=       $(shell R RHOME)

sources :=      $(wildcard *.cpp)
programs :=         $(sources:.cpp=)

## include headers and libraries for R 
RCPPFLAGS :=        $(shell $(R_HOME)/bin/R CMD config --cppflags)
RLDFLAGS :=         $(shell $(R_HOME)/bin/R CMD config --ldflags)
RBLAS :=        $(shell $(R_HOME)/bin/R CMD config BLAS_LIBS)
RLAPACK :=      $(shell $(R_HOME)/bin/R CMD config LAPACK_LIBS)

## if you need to set an rpath to R itself, also uncomment
#RRPATH :=      -Wl,-rpath,$(R_HOME)/lib

## include headers and libraries for Rcpp interface classes
RCPPINCL :=         $(shell echo 'Rcpp:::CxxFlags()' | $(R_HOME)/bin/R --vanilla --slave)
RCPPLIBS :=         $(shell echo 'Rcpp:::LdFlags()'  | $(R_HOME)/bin/R --vanilla --slave)

## include headers and libraries for RInside embedding classes
RINSIDEINCL :=      $(shell echo 'RInside:::CxxFlags()' | $(R_HOME)/bin/R --vanilla --slave)
RINSIDELIBS :=      $(shell echo 'RInside:::LdFlags()'  | $(R_HOME)/bin/R --vanilla --slave)

## compiler etc settings used in default make rules
CXX :=          $(shell $(R_HOME)/bin/R CMD config CXX)
CPPFLAGS :=         -Wall $(shell $(R_HOME)/bin/R CMD config CPPFLAGS)
CXXFLAGS :=         $(RCPPFLAGS) $(RCPPINCL) $(RINSIDEINCL) $(shell $(R_HOME)/bin/R CMD config CXXFLAGS)
LDLIBS :=       $(RLDFLAGS) $(RRPATH) $(RBLAS) $(RLAPACK) $(RCPPLIBS) $(RINSIDELIBS)

all:            $(programs)
            @test -x /usr/bin/strip && strip $^

run:            $(programs)
            @for p in $(programs); do echo; echo "Running $$p:"; ./$$p; done

clean:
            rm -vf $(programs)
            rm -vrf *.dSYM

runAll:
            for p in $(programs); do echo "Running $$p"; ./$$p; done 
```

* * *

该程序的输出：

```
In C++ element 0 is 40.7021 
```

* * *

**问题是该值`40.702147`被“截断”为`40.7021`.**
我要满满的
出路是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T10:14:03.523

值本身没有被截断^((a))，`cout`输出流使用默认值进行输出。

您可以查看`iomanip`标题以找到强制特定输出格式的方法，例如：

```
std::cout << std::setprecision (9) << v[i] << '\n'; 
```

这个完整的程序在这里：

```
#include <iostream>
#include <iomanip>

int main (void) {
    double d = 40.702147;
    std::cout << d << '\n';
    std::cout << std::setprecision (9) << d << '\n';
    return 0;
} 
```

输出：

```
40.7021
40.702147 
```

* * *

^((a))：请记住，如果它不能完全表示为 IEEE754 双精度值，则它*可能会被截断，但这里不是这种情况 - 双精度值大约有 15 位十进制数字，而您只看到 6 位。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T10:15:54.620

您可以通过以下方式指定`std::cout`精度：

```
std::cout.precision(16); 
```

或使用

```
std::cout << std::setprecision (9) << val; 
```

正如 paxdiablo 和 Joachim 建议的那样

# extjs - 将行拖放到列

> ID：11719380
> 
> 赞同：0
> 
> 时间：2012-07-30T10:11:27.260
> 
> 标签：extjs

我是 Ext JS 的新手，我尝试过“拖放”，当我拖动行时它工作正常。我现在正在尝试从左侧网格中拖动一行（来自 MySQL 的字段）并将其放在右侧网格上，从而将数据库表中的数据作为一列提供。

我现在使用的代码是，

```
Ext.require([
        'Ext.grid.*',
        'Ext.data.*',
        'Ext.dd.*'
    ]);

    Ext.define('DataObject', {
        extend: 'Ext.data.Model',
        fields: ['Field']
    });

    Ext.onReady(function(){

            var firstGridStore = Ext.create('Ext.data.Store', {
            model: 'DataObject',

                autoLoad: true,
                pageSize: 4,
                proxy: {
                    type: 'ajax',
                    url : 'user.php',
                    reader: {
                    type: 'json',
                    root: 'users'            
                }
            }
        });

        // Column Model shortcut array
        var columns = [
            {text: "Fields", sortable: true, width: 50, dataIndex: 'Field'}
        ];

        var firstGrid = Ext.create('Ext.grid.Panel', {
            multiSelect: true,
            viewConfig: {
                plugins: {
                    ptype: 'gridviewdragdrop',
                    dragGroup: 'firstGridDDGroup',
                    dropGroup: 'secondGridDDGroup'
                },
                listeners: {
                    drop: function(node, data, dropRec, dropPosition) {
                        var dropOn = dropRec ? ' ' + dropPosition + ' ' + dropRec.get('name') : ' on empty view';
                        Ext.example.msg("Drag from right to left", 'Dropped ' + data.records[0].get('name') + dropOn);
                    }
                }
            },
            store            : firstGridStore,
            columns          : columns,
            stripeRows       : true,
            title            : 'First Grid',
            margins          : '0 2 0 0'
        });

        var secondGridStore = Ext.create('Ext.data.Store', {
            model: 'DataObject'
        });

        // create the destination Grid
        var secondGrid = Ext.create('Ext.grid.Panel', {
            viewConfig: {
                plugins: {
                    ptype: 'gridviewdragdrop',
                    dragGroup: 'secondGridDDGroup',
                    dropGroup: 'firstGridDDGroup'
                },
                listeners: {
                    drop: function(node, data, dropRec, dropPosition) {
                        var dropOn = dropRec ? ' ' + dropPosition + ' ' + dropRec.get('name') : ' on empty view';
                        Ext.example.msg("Drag from left to right", 'Dropped ' + data.records[0].get('name') + dropOn);
                    }
                }
            },
            store            : secondGridStore,
            columns            : columns,
            stripeRows       : true,
            title                   : 'Second Grid',
            margins             : '0 0 0 3'
        });

        //Simple 'border layout' panel to house both grids
        var displayPanel = Ext.create('Ext.Panel', {
            layout: 'fit',
            height       : 300,
            layout       : {
                type: 'hbox',
                align: 'stretch',
                padding: 5
            },
            renderTo     : 'panel',
            defaults     : { flex : 1 }, //auto stretch
            items        : [
                firstGrid,
                secondGrid
            ],
            dockedItems: {
                xtype: 'toolbar',
                dock: 'bottom',
                items: ['->', // Fill
                {
                    text: 'Reset both grids',
                    handler: function(){
                        //refresh source grid
                        firstGridStore.loadData(myData);

                        //purge destination grid
                        secondGridStore.removeAll();
                    }
                }]
            }
        });
    }); 
```

根据我的要求，左侧网格中的字段应该是右侧网格上数据（来自数据库）的标题。

左侧网格将有网格数据，如：
**字段**
id
名称
数据
从左侧网格拖动数据后，右侧网格应具有如下数据：
**id**
1
2
3
注意：这里只拖动 id。

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T23:01:50.967

您可以使用“beforedrop”而不是“drop”事件，但是您可以通过为 dropFunction 属性分配一个新函数来设置自己的自定义 drop 处理程序，希望成为帮助您解决问题的聚光灯！还看到[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.DragDrop](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.DragDrop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T15:33:42.193

有几件事要记住..

1.  您的模型驱动布局 - 您正在定义一个字段“字段”的“数据对象”，由 users.php json 调用/返回填充，如果您希望 json-return 中的所有字段都是可拖动的，那么您需要包含模型中的所有字段，即

    ```
    Ext.define('DataObject', {
        extend: 'Ext.data.Model',
        fields: [
           'id',
           'name',
           'data'
        ]
    }); 
    ```

2.  字段名称必须在源和目标之间匹配以进行拖放 - 只要您想要的拖放字段名称相同（dataField 定义），那么您的拖放代理将拉出所有您想要的项目。

3.  自然，如果您只想显示标题，那么您的显示将是：

    ```
    items: [
       { dataIndex: 'id', hidden: true } ,
       { dataIndex: 'name', hidden: true },
       { text: 'title', dataIndex: 'data', width: xx }   // loose example
    ] 
    ```

拖放代理将拉动网格/表单行中的所有内容，无论是显示还是隐藏..

希望这可以帮助

# jquery - jquery .append() 区分大小写的元素

> ID：11719384
> 
> 赞同：4
> 
> 时间：2012-07-30T10:11:44.020
> 
> 标签：jquery, append, case-sensitive

嗨，我需要从表单中的数据创建 xml 以将其发送到 web 服务。问题是`.append()`不区分大小写，所以`.append('<EDO />')`会创建`<edo>`. 但是xml是区分大小写的，那么有没有办法解决这个问题呢？而且我选择使用 domObject 而不是字符串，因为这样我就不必编写结束标签，这在我的场景中会非常困难。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T10:16:45.030

尝试使用[$.parseXML()](http://api.jquery.com/jQuery.parseXML/)创建 XML 元素：

```
yourObject.append($.parseXML("<EDO />").documentElement); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T11:17:35.600

最后正如@Frédéric Hamidi 所说，为了使xml 区分大小写，我使用了这些函数：

`var domA = $.parseXML("<EDO_A />").documentElement;`创建元素

`$(domA ).append($.parseXML('<EDO_Child />').documentElement);`从字符串中添加子项

`$(domA).append(domB)`或`domA.appendChild(domB)`添加子对象

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-09T03:09:45.257

[`jQuery.parseXML`](http://api.jquery.com/jQuery.parseXML/)总是会创建一个新的`DOMParse`和一个新的`Document`，所以它很重。

更好的方法是使用 (unintuitive) [`parseHTML`](http://api.jquery.com/jQuery.parseHTML/)，使用`context`参数：

```
// Create the context XML document; doc and $doc is reusable
var doc = (new DOMParser()).parseFromString( '<root/>', 'text/xml' ); 
var $doc = $( doc.documentElement )

// Create case-sensitive XML element;
// this will call doc.createElement( 'EDO' ), as of jQuery 2.1.3
$doc.append( $.parseHTML( '<EDO />', doc ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-12T09:12:16.757

笔记：

```
$.parseHTML("<AddPerson>Adel</AddPerson>"); //result: <addperson>Adel</addperson>

$.parseXML("<AddPerson>Adel</AddPerson>"); //result: <AddPerson xmlns="">Adel</AddPerson> 
```

我想你需要这些行：

```
var request = $.parseXML(HtmlOrXmlStringSource);
$(request).find(someElementInside).append(HtmlOrXmlStringSource_2);

//Serialize XML
var oSerializer = new XMLSerializer();
request = oSerializer.serializeToString(request);
request = request.replace(new RegExp(' xmlns=""', "igm"), ""); 
```

现在请求已准备好通过 $.ajax() 发送；

谢谢

# mysql - 向此 mysql 查询添加 JOIN

> ID：11719386
> 
> 赞同：0
> 
> 时间：2012-07-30T10:11:51.260
> 
> 标签：mysql, join

```
SELECT t1.* FROM HOSTS AS t1
WHERE
t1.BOSS = 'BRUCE'
OR ( t1.BOSS_TYPE = 'manager'
 AND t1.BOSS_ID = 'BRUCE' )
OR t1.BOSS IN ( SELECT t2.STORES FROM
  FOLLOW_STORES AS t2 
 WHERE t2.BOSSES = 'BRUCE' ) 
```

上面的查询效果很好，但我想添加一个 JOIN 来获取额外的信息

我想添加这个 JOIN 但我无法让它工作。我一定是把它插错了地方。

```
 JOIN MANAGER_POSTS AS t3 ON ( t1.POSTER_ID = t3.POSTER_ID
    AND t1.SUBMISSION_TYPE =  'post' ) 
```

添加连接以获取此额外信息的正确方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:16:38.847

在这里试试这个：

```
SELECT  t1.* , t3.*
FROM    HOSTS AS t1 
            INNER JOIN MANAGER_POSTS AS t3 
                ON ( t1.POSTER_ID = t3.POSTER_ID AND 
                     t1.SUBMISSION_TYPE =  'post' )
WHERE   t1.BOSS = 'BRUCE' 
        OR (t1.BOSS_TYPE = 'manager' AND t1.BOSS_ID = 'BRUCE' )
        OR t1.BOSS IN   ( 
                            SELECT t2.STORES 
                            FROM FOLLOW_STORES AS t2 
                            WHERE t2.BOSSES = 'BRUCE' 
                        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:16:27.947

您需要在您的之后和之前添加您的`JOIN`子句`FROM Hosts``WHERE`

```
SELECT t1.* 
FROM HOSTS AS t1
INNER JOIN MANAGER_POSTS AS t3 
    ON ( t1.POSTER_ID = t3.POSTER_ID
    AND t1.SUBMISSION_TYPE =  'post' )
WHERE t1.BOSS = 'BRUCE'
    OR ( t1.BOSS_TYPE = 'manager'
          AND t1.BOSS_ID = 'BRUCE' )
    OR t1.BOSS IN ( SELECT t2.STORES 
                    FROM FOLLOW_STORES AS t2 
                    WHERE t2.BOSSES = 'BRUCE' ) 
```

# php - array_search() 错误

> ID：11719391
> 
> 赞同：1
> 
> 时间：2012-07-30T10:12:28.770
> 
> 标签：php, arrays

数组替换无法正常工作或我遗漏了一些东西。

我想将任何等于“读取时发生错误”的文本替换为“在 XML 文件中出现致命错误后读取已停止，但是当我使用低于键**0**的值的 PHP 代码时会更新，这是错误的！

任何的想法？

谢谢

**原始状态：**

```
Array
(
    [0] => Element 'item', attribute 'isd': The attribute 'isd' is not allowed.
    [1] => Element 'item', attribute 'avai0lable': The attribute 'avai0lable' is not allowed.
    [2] => Unimplemented block at ..\xmlschemas.c:28274
    [3] => An Error Occured while reading
) 
```

**PHP代码：**

```
$errors = array_unique($errors);
$key = array_search('An Error Occured while reading', $errors);
$errors[$key] = 'Reading has stopped after fatal error in you XML file';
echo '<pre>'; print_r($errors); echo '</pre>'; 
```

**错误结果：**

```
Array
(
    [0] => Reading has stopped after fatal error in you XML file
    [1] => Element 'item', attribute 'avai0lable': The attribute 'avai0lable' is not allowed.
    [2] => Unimplemented block at ..\xmlschemas.c:28274
    [3] => Reading has stopped after fatal error in you XML file
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:21:33.503

尝试下面的代码，我无法重现你所说的：

```
<?php
$errors = Array
( "Element 'item', attribute 'isd': The attribute 'isd' is not allowed.",
    "Element 'item', attribute 'avai0lable': The attribute 'avai0lable' is not allowed.",
    'Unimplemented block at ..\xmlschemas.c:28274',
    'An Error Occured while reading',
);
echo '<pre>'; print_r($errors); echo '</pre>';
$errors = array_unique($errors);
$key = array_search('An Error Occured while reading', $errors);
$errors[$key] = 'Reading has stopped after fatal error in you XML file';
echo '<pre>'; print_r($errors); echo '</pre>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:21:51.903

脚本：

```
<?php

$data = array (
    0 => "Element 'item', attribute 'isd': The attribute 'isd' is not allowed.",
    1 => "Element 'item', attribute 'avai0lable': The attribute 'avai0lable' is not allowed.",
    2 => "Unimplemented block at ..\xmlschemas.c:28274",
    3 => "An Error Occured while reading"
);

$new_data = array();
$a = "An Error Occured while reading";
$b = "Reading has stopped after fatal error in you XML file";

foreach ( $data as $key => $value ) {
    $new_data[$key] = str_replace( $a, $b, $value );
}

?> 
```

输出`$new_data`：

```
Array
(
    [0] => Element 'item', attribute 'isd': The attribute 'isd' is not allowed.
    [1] => Element 'item', attribute 'avai0lable': The attribute 'avai0lable' is not allowed.
    [2] => Unimplemented block at ..\xmlschemas.c:28274
    [3] => Reading has stopped after fatal error in you XML file
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:27:30.943

**正确的代码是：**

```
$errors = array_unique($errors);
$key = array_search('An Error Occured while reading', $errors);
if($key)
 $errors[$key] = 'Reading has stopped after fatal error in you XML file';
echo '<pre>'; print_r($errors); echo '</pre>' 
```

# java - Mahout：标准化 UserSimilarity 距离

> ID：11719392
> 
> 赞同：1
> 
> 时间：2012-07-30T10:12:32.227
> 
> 标签：java, mahout

我有一个这样的模型（非Hadoop）：

```
DataModel data = new FileDataModel(new File("file.csv"));
UserSimilarity userSimilarity = new PearsonCorrelationSimilarity(dataModel);
userSimilarity.setPreferenceInferrer(new AveragingPreferenceInferrer(data));
UserNeighborhood userNeighborhood = new NearestNUserNeighborhood(1, userSimilarity, data); 
```

例如，userSimilarity 在 [0,100] 之间没有标准化，所以如果我想向最终用户显示它，我使用以下解决方案：

```
long maxSim = userSimilarity.userSimilarity(userId1, userNeighborhood.getUserNeighborhood(userId1)[0]);
long finalSimilarity = Math.min(100, Math.max((int) Math.ceil(100 * userSimilarity.userSimilarity(userId1, userId2) / maxSim), 0)) 
```

我观察到性能问题（每个用户的不同秒数），对于每个给定用户，是否有另一种可能性或最快的方法让 min(similarity) = 0 和 max(similarity) = 100？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:56:58.903

您的性能问题与您的规范化无关，而与计算的其余部分有关。

顺便说一句，我不会使用`AveragingPreferenceInferrer`。它会减慢速度并且很少有帮助。您可能还会发现简单地遍历所有用户并计算相似度以找到最相似的用户会更快。计算 1 的邻域大致相同，但更接近一些。

Pearson 相关性在 [-1,1] 中。如果您希望它在 [0,100] 的范围内，只需使用 50*(1+correlation)。

# extjs4 - 需要树商店的副本

> ID：11719402
> 
> 赞同：0
> 
> 时间：2012-07-30T10:13:14.007
> 
> 标签：extjs4, clone, store, treepanel

ExtJS4

我创建了一个 TreePanel 作为

```
var tree = Ext.create('Ext.tree.TreePanel', <some config>);
tree.store.setRootNode(treeJSON); 
```

现在我想创建另一个具有相同存储数据但不同存储对象的树。如果我这样做：

```
var tree1 = tree.cloneConfig(<separate listeners>); 
```

然后，它会创建一棵不同的树。但两者仍然是联系在一起的。当我折叠或展开一个树节点时，另一棵树中的相应节点也表现类似。

store 也没有 cloneConfig 属性，因此我可以复制它。我试图从 JSON 为这棵树重新创建商店。

```
var store2 = Ext.create('Ext.data.TreeStore', {store: treeJSON});
var tree1 = tree.cloneConfig({store: store2}); 
```

我认为`store2`会与`tree`s商店不同。但是问题就在那里，因为我使用的是相同的 treeJSON。

我可以做的一件事是将 JSON 转换为字符串，对其进行解码以创建另一个 JSON 对象并将其分配给新存储。那将与以前的商店不同。但是必须有一个快速的方法来做到这一点。

**如何创建具有不同存储对象的重复树，以便当我展开/折叠树中的一个节点时，它不会以相同的方式在另一个节点中展开/折叠？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T11:52:31.643

Ext.data.NodeInterface 具有方法“copy”，参数为“deep”，但在 ExtJs 4.1.3 之前，深度克隆不起作用。更详细：他们只是在调用 childNode.clone 时忘记传递“id”参数。

对于仍在使用 ExtJS < 4.1.3 的人，使用它来执行树的深度克隆：

```
/**
 * Because of a bug in Ext.data.NoteInterface in ExtJs < 4.1.3
 * we have to do deep cloning.
 */
var clone = function(node) {
  var result = node.copy(),
      len = node.childNodes ? node.childNodes.length : 0,
      i;
  // Move child nodes across to the copy if required
  for (i = 0; i < len; i++)
    result.appendChild(clone(node.childNodes[i]));
  return result;
};

var oldRoot = store1.getRootNode(),
    newRoot = clone(oldRoot);

store2.setRootNode(newRoot); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:21:09.473

我做过类似的事情。

解析旧树以创建新树

```
var root = existingTree.getRootNode ();
if (root) {
  var rootNode = this.getClonedTreeRoot(root);
  newTree.store.setRootNode (rootNode);
}

getClonedTreeRoot: function (node) {

  var me = this;
  var rootData;
  var childData = [];

  if (node.hasChildNodes ()) {
    var childNodes = node.childNodes;
    Ext.Array.each (childNodes, function (child) {
       if (child.get ('checked')) {
    childData.push (me.getClonedTreeRoot(child));           
       }        
    });
  }

  if (node.isLeaf ()) {
    rootData = {
        "text" : node.get ('text'),
        "leaf" : true,
        "expanded" : false,
        "children" : childData
    };
  } else {
    rootData = {
        "text" : node.get ('text'),
        "leaf" : false,
        "expanded" : true,
        "children" : childData
     };
   }

   return rootData;
} 
```

# android - 安卓 facebook 上的 SSO

> ID：11719404
> 
> 赞同：2
> 
> 时间：2012-07-30T10:13:21.040
> 
> 标签：android, facebook, single-sign-on

我在 android 中开发了一个 facebook 应用程序。我的设备具有默认的 android facebook 应用程序。当我运行我的应用程序时，如果我输入凭据，默认 fb 也会登录。当我注销我的应用程序时，默认应用程序不会被注销。那么我怎么能从我的应用程序中获取注销默认 fb 呢。我也使用了 SSO。但仍然有同样的问题。

我的代码：

```
public class SampleApp extends Activity {

// Set Application ID to your registered app client_id
// See http://www.facebook.com/developers/createapp.php
public static final String APP_ID = "APP ID";

private static final String[] PERMISSIONS = new String[] {
        "publish_stream", "read_stream", "offline_access" };
private TextView mText;
private Handler mHandler = new Handler();

private Facebook mFacebook;
private AsyncFacebookRunner mAsyncRunner;
byte[] raw;
private SharedPreferences mPrefs;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Make sure the app client_app has been set
    if (APP_ID == null) {
        Util.showAlert(this, "Warning",
                "Facebook Applicaton ID must be set...");
    }

    // Initialize the content view
    setContentView(R.layout.main);
    // Get the status text line resource
    mText = (TextView) SampleApp.this.findViewById(R.id.txt);

    // Setup the ListView Adapter that is loaded when selecting
    // "get friends"

    // Define a spinner used when loading the friends over the network

    // Initialize the Facebook session
    mFacebook = new Facebook(APP_ID);
    mAsyncRunner = new AsyncFacebookRunner(mFacebook);

    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    if (access_token != null) {
        mFacebook.setAccessToken(access_token);
    }
    if (expires != 0) {
        mFacebook.setAccessExpires(expires);
    }

}

// ////////////////////////////////////////////////////////////////////

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Log.d("FB Sample App", "onActivityResult(): " + requestCode);
    mFacebook.authorizeCallback(requestCode, resultCode, data);
}

private class LogoutRequestListener implements RequestListener {

    /** Called when the request completes w/o error */
    public void onComplete(String response) {

        // Only the original owner thread can touch its views
        SampleApp.this.runOnUiThread(new Runnable() {
            public void run() {
                mText.setText("Thanks for using FB Sample App. Bye bye...");

            }
        });

        // Dispatch on its own thread
        mHandler.post(new Runnable() {
            public void run() {
            }
        });
    }

    @Override
    public void onComplete(String response, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onIOException(IOException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e,
            Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onMalformedURLException(MalformedURLException e,
            Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFacebookError(FacebookError e, Object state) {
        // TODO Auto-generated method stub

    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {

    MenuItem loginItem = menu.findItem(R.id.login);

    if (mFacebook.isSessionValid()) {
        loginItem.setTitle("Logout");

    } else {
        loginItem.setTitle("Login");

    }
    loginItem.setEnabled(true);
    return super.onPrepareOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    // Login/logout toggle
    case R.id.login:

        if (!mFacebook.isSessionValid()) {

            mFacebook.authorize(this, new DialogListener() {
                @Override
                public void onComplete(Bundle values) {
                    Log.v("Entered ", "No ERRRRRRRRRRRR");
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token",
                            mFacebook.getAccessToken());
                    editor.putLong("access_expires",
                            mFacebook.getAccessExpires());
                    editor.commit();
                    Intent i=new Intent(SampleApp.this,second.class);
                    startActivity(i);
                }

                @Override
                public void onFacebookError(FacebookError error) {
                }

                @Override
                public void onError(DialogError e) {
                }

                public void onCancel() {
                }
            });
        }else{

            mFacebook.setAccessToken(null);
            mFacebook.setAccessExpires(0);

            AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(mFacebook);
             asyncRunner.logout(this.getBaseContext(), new  LogoutRequestListener());
        }

        break;

    default:
        return false;

    }
    return true;
}

}
} 
```

# castle - 使用 LifeStyle.PerWebRequest 配置时，Castle 3.0 不会释放 Entity Framework.DbContext 组件

> ID：11719405
> 
> 赞同：2
> 
> 时间：2012-07-30T10:13:25.987
> 
> 标签：castle, perwebrequest

想知道是否有人在使用 Castle Windsor 3.0 时遇到过这种奇怪的行为？我已经为 DbContext 设置了容器配置，使其具有 PerWebRequest 的生活方式，但 Castle 不会在 WebRequest 之后处理组件。它将组件跨 Web 请求保留在 Container 中，就好像它是 Singleton 一样。

显而易见的问题是当 DbContext 中存在数据库错误时，它会阻止所有未来的 CRUD 操作，直到 IIS 重新启动（即手动销毁 DbContext）！正如我们所知，这是不可接受的。

如果 DbContext 被 PerWebRequest 回收，那么当页面重新加载时，其他 CRUD 操作将成功执行，因为我们现在有了一个新的 DbContext。

我的配置如下：

```
 private static IWindsorContainer InitializeWindsor()
    {
        var container = new WindsorContainer();

        // Add Factory facility
        container.AddFacility<TypedFactoryFacility>();

        // Add AOP facility
        container.AddFacility<AdditionalFunctionalityFacility>();

        // Register all controllers from this assembly
        foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())
        {
            container.Register(
                Classes.FromAssembly(assembly).BasedOn<Controller>().Configure(c => c.LifestyleTransient())
                );
        }

        // Adding logging facility. This has to happen after Controller registration, otherwise it bombs out
        container.AddFacility<LoggingFacility>(f => f.UseLog4Net());

        // Register HTTP Handlers
        container.Register(Component.For<HttpRequestBase>().LifeStyle.PerWebRequest
                   .UsingFactoryMethod(() => new HttpRequestWrapper(HttpContext.Current.Request)));
        container.Register(Component.For<HttpContextBase>().LifeStyle.PerWebRequest
                               .UsingFactoryMethod(() => new HttpContextWrapper(HttpContext.Current)));

        // Register components
        container.Register(

            // Factories - singletons
            Component.For<IServiceFactory>().LifeStyle.PerWebRequest.LifeStyle.Is(LifestyleType.Thread).AsFactory(),
            Component.For<IDataFactory>().LifeStyle.PerWebRequest.LifeStyle.Is(LifestyleType.Thread).AsFactory(),

            // Services
            Component.For<IRegionService>().ImplementedBy<RegionService>().LifeStyle.PerWebRequest,

            // Data Managers
            Component.For<IRegionManager>().ImplementedBy<RegionManager>().LifeStyle.PerWebRequest,

            // Data Contexts
            Component.For<DbContext>().ImplementedBy<MyDataContext>().LifeStyle.PerWebRequest.LifeStyle.Is(LifestyleType.Thread)
            );

        return container;
    } 
```

我的 DbContext 类如下：

```
public partial class MyDataContext : DbContext
{
    static MyDataContext()
    { 
        Database.SetInitializer<MyDataContext>(null);
    }

    public MyDataContext() : base("name=MyDataContext")
    {
    }

    public MyDataContext(string nameOrConnectionString) : base(nameOrConnectionString)
    {   
    }

    public MyDataContext(string nameOrConnectionString, DbCompiledModel model) : base(nameOrConnectionString, model)
    {
    }

    public MyDataContext(DbConnection existingConnection, bool contextOwnsConnection) : base(existingConnection, contextOwnsConnection)
    {
    }

    public MyDataContext(DbConnection existingConnection, DbCompiledModel model, bool contextOwnsConnection) : base(existingConnection, model, contextOwnsConnection)
    {
    }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<IncludeMetadataConvention>();
        modelBuilder.Configurations.Add(new Region_Mapping());
    }

    public DbSet<Region> Regions { get; set; }

} 
```

任何帮助/建议将不胜感激。

谢谢。

# emacs - 如何使用emacs为rails获取自动缩进和“结束”块

> ID：11719406
> 
> 赞同：0
> 
> 时间：2012-07-30T10:13:26.407
> 
> 标签：emacs

我正在使用 emacs 上的 rails 进行开发。我已经安装了 rinari 模式。我有两个问题——

1）自动缩进 - 当我编写代码并转到新行时，默认情况下它不会识别它。我必须按制表符才能缩进该行。

如何让 emacs 在所有新行以及编写代码时设置正确的缩进？

2）关闭“结束”。我之前正在编写 lisp 代码，并且喜欢默认包含右括号的方式。然后parendit模式甚至禁止我错误地删除括号并突出显示任何丢失的括号。

如何为缺少“结束”块获得相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:10:16.993

对于`begin`/`end`块，您可能可以使用`autopair`或`skeleton-pair`。这不会像`paredit`朝着正确方向迈出的一步那么棒。

对于缩进：通常`RET`绑定到`newline`while`C-j`绑定到`newline-and-indent`. 我强烈建议开始使用`C-j`over`RET`或更改绑定。

# jquery - 使用 jQuery 检查 div 是否有文本和某个类的跨度

> ID：11719407
> 
> 赞同：2
> 
> 时间：2012-07-30T10:13:36.860
> 
> 标签：jquery, css-selectors

```
<div class="testDivClass">
    Some text!
    <div>
        <span class="testSpanClass">
        </span>
    </div>
</div> 
```

我想返回 true 或一个不为 null 的对象（基本上是一个要测试的布尔值）——这告诉我这个 div（属于 testDivClass 类）确实包含“一些文本！” 并且确实有一个类“testSpanClass”的跨度（请注意，它不是“根”div的直接子级）。

非常感谢您的任何建议。

到目前为止，我有：

```
$("div.testDivClass:contains('Some text!')"); 
```

这很好，但我不知道从这里去哪里。使用`.children(".testSpanClass")`没有给我任何东西。

编辑：我已经尝试过 .has() - 这也没有返回任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:16:58.983

```
$('.testDivClass').is(function() {
    return $(this).text().indexOf("Some text!") > -1 && $(this).find("span.testSpanClass").length
}); 
```

演示：http: [//jsfiddle.net/Y2KVp/](http://jsfiddle.net/Y2KVp/)

带选择器：

```
$('.testDivClass').is(':contains("Some text!"):has(span.testSpanClass)'); 
```

选择器演示：http: [//jsfiddle.net/Y2KVp/2/](http://jsfiddle.net/Y2KVp/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:19:50.403

我创建了一个[小提琴](http://jsfiddle.net/kcpH2/5/)来演示如何做到这一点......

```
!!$("div.testDivClass:contains('Some text!')").find(".testSpanClass").length; 
```

两个感叹号将 0 转换为 false，将任何其他数字转换为 true。

# iphone - 创建 UIImageView 的子类

> ID：11719409
> 
> 赞同：2
> 
> 时间：2012-07-30T10:13:41.260
> 
> 标签：iphone, uiimageview

在创建objective-c 类的过程中，我没有找到UIImageView 的选项可以从下拉列表中进行选择。我正在使用 xcode 4.3。我想知道我们是否允许扩展 UIImageView 类。

还是我必须继承 UIView ？自定义 UIImageView 类的任何示例结构都会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T10:20:41.043

我相信子类化 UIImageView 被认为是不好的做法。如果你看一下[这个](https://stackoverflow.com/questions/2453120/is-there-any-reason-why-we-dont-use-subclasses-of-uiimageview)问题，有很多例子说明你为什么不应该这样做：

> *   Gang of Fours 设计模式哲学的一部分是“支持‘对象组合’而不是‘类继承’”。这减少了对象之间的紧密耦合。那么更改一个类将对系统中的其他类产生较小的影响。这使更改更容易，从而使系统更稳定、更易于维护。
>     
>     
> *   它继承 UIView 的原因是，例如，您应该在下载图像时显示 UIActivityIndi​​cator。他们没有在他们的示例中显示这一点，但我已经使用了这段代码，它真的很好。另请查看这篇文章的评论，您会发现更多代码示例，还包括一些缓存和好东西。

但是，可以继承 UIImageView。看看这个[问题](https://stackoverflow.com/questions/5539103/objective-c-subclass-uiimageview)。

上述问题中建议的一个很好的选择是使用类别而不是子类化 UIImageView：

> *   我建议使用Objective-C“类别”而不是继承UIImageView。只要您不必添加任何成员变量，Category 就是更好的解决方案。当您使用类别时，您可以在原始类的任何实例上调用您的扩展函数（在您的情况下为 UIImageView。这消除了您在可能想要使用新函数的任何地方有意识地使用子类的需要。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:34:34.073

你可以继承 UIImageView。即使 qegal 的答案包含很多您应该记住的正确内容，只需将光标放在下拉列表中并开始输入您想要继承的任何类的名称，它就会开始自动完成。

# objective-c - 奇怪的 NSString 泄漏

> ID：11719410
> 
> 赞同：0
> 
> 时间：2012-07-30T10:13:46.270
> 
> 标签：objective-c, ios, nsstring

这段代码给了我一个漏洞——100 次迭代超过 100 mb。如果我写 [imageName release] 它会因“发送到已释放实例的消息”而崩溃。我什至想不出问题的根源是什么。

```
NSString* imageName=[NSString stringWithUTF8String:(const char*)sqlite3_column_text(statement, 5)];
imageName =[imageName stringByReplacingOccurrencesOfString:@"-" withString:@"_"];
imageName =[imageName stringByReplacingOccurrencesOfString:@"." withString:@"-"];

[ret setQuestionImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:imageName ofType:@"jpg"]]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:19:07.237

问题是这些便捷方法创建的字符串和图像是自动释放的，而自动释放没有足够早地发生。但是，如果您显式释放它们，它们将在自动释放时被双重释放。尝试将所有迭代包装到一个自动释放池中：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSString *imageName=[NSString stringWithUTF8String:(const char *)sqlite3_column_text(statement, 5)];
imageName = [imageName stringByReplacingOccurrencesOfString:@"-" withString:@"_"];
imageName = [imageName stringByReplacingOccurrencesOfString:@"." withString:@"-"];

[ret setQuestionImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:imageName ofType:@"jpg"]]];
[pool release]; 
```

# android - 从数据库获取数据时的 SQLite 问题

> ID：11719415
> 
> 赞同：0
> 
> 时间：2012-07-30T10:14:14.957
> 
> 标签：android, sqlite

我有这样的`DatabaseHandler`课：

```
public class DatabaseHandler extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 1;

private static final String DATABASE_NAME = "CaseDatabase";
private static final String TABLE_CASES = "cases";
private static final String KEY_ID = "id";
private static final String DATE = "date";
private static final String RIGHTFINGER = "rightFinger";
private static final String LEFTFINGER = "leftFinger";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

      String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CASES + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + DATE + " TEXT,"
                + RIGHTFINGER + " BLOB," + LEFTFINGER +" BLOB" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

      db.execSQL("DROP TABLE IF EXISTS " + TABLE_CASES);

        // Create tables again
        onCreate(db);

}

public void addContact(Case c) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_ID, c.getCaseNumber()); // PCN
    values.put(DATE, c.getDate()); // Date

    ByteArrayOutputStream out1 = new ByteArrayOutputStream();
    c.getLeftIndexFinger().compress(Bitmap.CompressFormat.PNG, 100, out1); 

    ByteArrayOutputStream out2 = new ByteArrayOutputStream();
    c.getRightIndexFinger().compress(Bitmap.CompressFormat.PNG, 100, out2); 

    values.put(LEFTFINGER, out1.toByteArray()); // LFINGER
    values.put("RIGHTFINGER", out2.toByteArray()); //RFINGER

    // Inserting Row
    db.insert(TABLE_CASES, null, values);
    db.close(); // Closing database connection
}

public ArrayList<Case> getAllContacts() {
    ArrayList<Case> caseList = new ArrayList<Case>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_CASES;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Case c = new Case();

            c.setCaseNumber(cursor.getString(0));
            c.setDate(cursor.getString(1));

            byte[] blob1 = cursor.getBlob(cursor.getColumnIndexOrThrow("2"));
            Bitmap bmp1 = BitmapFactory.decodeByteArray(blob1, 0,blob1.length);

            c.setLeftIndexFinger(bmp1);

            byte[] blob2 = cursor.getBlob(cursor.getColumnIndexOrThrow("3"));
            Bitmap bmp2 = BitmapFactory.decodeByteArray(blob1, 0,blob2.length);
            c.setRightIndexFinger(bmp2); 

            // Adding contact to list
            caseList.add(c);
        } while (cursor.moveToNext());
    }

    // return contact list
    return caseList;
} 
```

}

该`add`方法完美运行，但是当我尝试调用该`getAllContacts`方法时，如下所示：

```
public ArrayList<Case> getFromDatabase() {

    ArrayList<Case> c = db.getAllContacts();    
    return c; 
}

list = getFromDatabase(); 
```

应用程序崩溃，LogCat 打印出以下内容：

```
07-30 12:07:56.570: E/AndroidRuntime(13040): FATAL EXCEPTION: main 
```

我尝试从数据库中获取记录的方法是在另一个活动中，而不是该`add`方法

这是我的`getAllContacts`方法：

```
public ArrayList<Case> getAllContacts() {
    ArrayList<Case> caseList = new ArrayList<Case>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_CASES;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Case c = new Case();

            c.setCaseNumber(cursor.getString(0));
            c.setDate(cursor.getString(1));

            byte[] blob1 = cursor.getBlob(cursor.getColumnIndexOrThrow("2"));
            Bitmap bmp1 = BitmapFactory.decodeByteArray(blob1, 0,blob1.length);

            c.setLeftIndexFinger(bmp1);

            byte[] blob2 = cursor.getBlob(cursor.getColumnIndexOrThrow("3"));
            Bitmap bmp2 = BitmapFactory.decodeByteArray(blob1, 0,blob2.length);
            c.setRightIndexFinger(bmp2); 

            // Adding contact to list
            caseList.add(c);
        } while (cursor.moveToNext());
    }

    // return contact list
    return caseList;
} 
```

日志信息：

```
 E/AndroidRuntime(15058): FATAL EXCEPTION: main
E/AndroidRuntime(15058): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.package.hello/com.package.hello.History}: java.lang.NullPointerException
E/AndroidRuntime(15058):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
E/AndroidRuntime(15058):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
E/AndroidRuntime(15058):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
E/AndroidRuntime(15058):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
E/AndroidRuntime(15058):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(15058):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(15058):    at android.app.ActivityThread.main(ActivityThread.java:4517)
E/AndroidRuntime(15058):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(15058):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(15058):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
E/AndroidRuntime(15058):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
E/AndroidRuntime(15058):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(15058): Caused by: java.lang.NullPointerException
E/AndroidRuntime(15058):    at com.package.hello.History.getFromDatabase(History.java:153)
E/AndroidRuntime(15058):    at com.package.hello.History.onCreate(History.java:49)
E/AndroidRuntime(15058):    at android.app.Activity.performCreate(Activity.java:4533)
E/AndroidRuntime(15058):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
E/AndroidRuntime(15058):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934) 
```

History.java 中的第 153 行是这样的：

```
 ArrayList<Case> c = db.getAllContacts(); 
```

在历史类中，该`db`对象尚未被声明为它，因为该类继承自该`add`方法所在的类。

**编辑 3**

我的历史课

```
public class History extends SuperClass {

ListView lv;
ArrayList<Case> list; 
ArrayList<Case> tempCaseList; 
TextView header;
EditText ed; 
String[] tempList; 
int textLength; 
TextView error;
Boolean[] isPresent;
DatabaseHandler db;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setTabBar(R.layout.history); 

    lv = (ListView)findViewById(R.id.listOfCases); 
    list = new ArrayList<Case>(); 

    list = getFromDatabase();

    lv.setAdapter(new CustomAdapter(this, list)); 
    lv.setTextFilterEnabled(true);

    header = (TextView)findViewById(R.id.textView1);
    header.setText("History");
    error = (TextView)findViewById(R.id.error);

    // db = new DatabaseHandler(this);

    tempList = getCaseNumberToTempList(list);
    tempCaseList = createTempList(list); 

    ed = (EditText)findViewById(R.id.editText1);

    ed.addTextChangedListener(new TextWatcher() {

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1,
                int arg2, int arg3) {

        }

        @Override
        public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {

            textLength = ed.getText().length();
            list.clear(); 
            isPresent = initIsPresentArray(); 

            for (int i = 0; i < tempList.length; i++) {
                for (int j = 0; j < (tempList[i].length()-(textLength-1)); j++) {
                    if (textLength <= tempList[i].length()) {
                        if(isPresent[i] == false){
                            if (ed.getText().toString().equalsIgnoreCase((String) tempList[i].subSequence(j,(j+textLength)))) {
                                list.add(tempCaseList.get(i));
                                isPresent[i] = true;
                        }
                    }
                }
            }
            if(list.size() == 0) {
                error.setText("Not Found"); 
            }
            else {
                error.setText(""); 
            }

            lv.setAdapter(new CustomAdapter(History.this, list)); 
        }
        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub

        }
    });

}

public Boolean[] initIsPresentArray() {
    Boolean[] isPresent = new Boolean[tempCaseList.size()];
    for(int i = 0; i < isPresent.length; i++) {
        isPresent[i] = false; 
    }
    return isPresent; 
}

public ArrayList<Case> createTempList(ArrayList<Case> listOfCases) {

    ArrayList<Case> temporaryList = new ArrayList<Case>(); 

    for(Case c : listOfCases) {
        temporaryList.add(c);
    }

    return temporaryList;
}

public String[] getCaseNumberToTempList(ArrayList<Case> caseList) {

    String[] objectCaseNumber = new String[caseList.size()];  

    for(int i = 0; i < caseList.size(); i++) {
        objectCaseNumber[i] = caseList.get(i).getCaseNumber();  
    }

    return objectCaseNumber;

}

public ArrayList<Case> getFromDatabase() {

    ArrayList<Case> c = db.getAllContacts();    
    return c; 
}

 } 
```

**最终编辑**

发现我的错误..我只是忘记了初始化。调用使用该`db`对象的方法之前的对象。但是我遇到了另一个错误，这不是这个线程的主题，所以如果我再次卡住，我会发布一个新线程。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:28:30.567

在您进行编辑后，代码在此处崩溃：

```
ArrayList<Case> c = db.getAllContacts(); 
```

这里唯一可能导致 a 的`NullPointerException`是`db`它本身`null`。您需要检查`db`此时是否已正确初始化。

* * *

我之前的回答仍然有效：

如果没有看到完整的 stracktrace 就很难确定，但这看起来肯定是错误的：

```
byte[] blob1 = cursor.getBlob(cursor.getColumnIndexOrThrow("2")); 
```

这正在寻找一个名为 的列`"2"`，该列不存在。由于您已经知道要查找的 blob 的列索引，因此您的意思可能是：

```
byte[] blob1 = cursor.getBlob(2); 
```

或者，如果您确实想按列名查找索引：

```
byte[] blob1 = cursor.getBlob(cursor.getColumnIndexOrThrow("rightFinger")); 
```

# ruby-on-rails - 已经创建了一个数据库，我正在尝试将它连接到我的模型并仅通过模型执行 SQL 查询。该怎么办？

> ID：11719423
> 
> 赞同：0
> 
> 时间：2012-07-30T10:14:42.793
> 
> 标签：ruby-on-rails

这段代码到底有什么问题？以及如何运行这段代码？由于我是红宝石新手，请彻底解释一下。请帮忙！！！

# my_connection_base.rb

类 MyConnectionBase < ActiveRecord::Base

client = Mysql2::Client.new(:host => "localhost", :database => "flipkart_project_development", :table => "users" , :username => "flipkart_project", :password => "mypass")

结果 = client.query("SELECT * FROM users")

把结果

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:28:46.693

给定的代码很难按需执行：它将在加载模型时执行。它应该放在一个方法中：

```
class MyConnectionBase < ActiveRecord::Base   
  def some_method
    client = Mysql2::Client.new(:host => "localhost", :database => "flipkart_project_development", :table => "users" , :username => "flipkart_project", :password => "mypass")
    results = client.query("SELECT * FROM users")
    puts results
  end
end 
```

然后可以在您的控制器中使用`MyConnectionBase.some_method`. 但是你为什么要这样做，我完全不知道。用 Rails 的方式来做会更好（见我上面的评论）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:30:01.867

在 Rails 中，您不需要编写原始 SQL 查询。

只需将所有数据库配置放在 config/database.yml 文件中，如下所示。

```
development:
  adapter: mysql2
  database: flipkart_project_development
  username: flipkart_project
  password: yourpass
  pool: 5
  timeout: 5000
test:
  adapter: mysql2
  database: flipkart_project_test
  username: flipkart_project
  password: yourpass
  pool: 5
  timeout: 5000

production:
  adapter: mysql2
  database: flipkart_project_production
  username: flipkart_project
  password: yourpass
  pool: 5
  timeout: 5000 
```

Rails 将负责建立连接和执行查询。

在您的情况下，生成一个名为 user 的模型

```
 rails g model user 
```

在您的项目中，您可以获取所有用户，如下所示。

```
User.all
#This will generate the SQL query "select * from users" 
#and will return the records as user objects. 
```

也看看[迁移](http://guides.rubyonrails.org/migrations.html)。

# jquery - jQuery 中的验证不起作用

> ID：11719424
> 
> 赞同：0
> 
> 时间：2012-07-30T10:14:50.730
> 
> 标签：jquery, jquery-validate

我正在尝试使用 jquery 立即验证表单中的用户输入。我已经写了这个片段，但实际上它并没有达到我想要的效果。我想如果用户不同意它应该显示一条消息。而且，它在一段时间内正常工作，但后来就不起作用了。感谢您的帮助。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Form</title>
<script src="lib/jquery.js" type="text/javascript"></script>
<script src="lib/jquery.metadata.js" type="text/javascript"></script>
<script src="jquery.validate.js" type="text/javascript"></script>

<script type="text/javascript">

$.metadata.setType("attr", "validate");

$(document).ready(function() {
$("#form1").validate({
messages: {
checkbox1: {required: 'you must agree'}
        }
}
);
});
</script>

</head>

<body>
<div id="apDiv1">
<h1 style="text-align:center">STEP ONE</h1>
</div>

<form  id="form1" action="action.php"  method="post">

 Enter Your Number
    <label>
      <input name="textfield1" type="text" id="textfield1" />
    </label>

 <p/>
 I agree
<input type="checkbox" name="checkbox1" id="checkbox1" validate="required:true"/>

 <p/>   
<input type="submit" name="submit" value="Next"  />

</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:26:06.357

只是在黑暗中拍摄...

不要使用名称“提交”作为提交按钮的名称属性...

这让我有几次偶尔使用插件的机会。

多姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:08:58.603

最后，它已经解决了。这就是我所做的：

我将 lib 文件夹移动到上层目录，因此关联的标签看起来像这样

```
<script src="../lib/jquery.js" type="text/javascript"></script>
<script src="../lib/jquery.metadata.js" type="text/javascript"></script> 
```

我也将文件 jquery.validate.js 提高了一级，脚本将是：

```
<script src="../jquery.validate.js" type="text/javascript"></script> 
```

实际上，我不知道目录有什么问题，但它以这种方式工作。感谢您的回答和评论。

# birt - 如何将参数传递给BIRT中数据立方体后面的数据集？

> ID：11719425
> 
> 赞同：1
> 
> 时间：2012-07-30T10:14:51.183
> 
> 标签：birt, data-cube

我有一个基于数据集的数据立方体。数据集采用许多参数。到目前为止，我还没有弄清楚如何将参数传递给该数据集。我看到可以在数据立方体上设置过滤器，但这对我没有帮助。

如何将必要的参数传递给数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:10:51.950

将参数传递给 BIRT 中的关系数据源：

*   设置适当的报告参数（通过数据资源管理器）。
*   将参数标记（即`?`s）添加到您想要参数化查询的 SQL 查询中（例如，如果您想按国家/地区选择客户，请将您的数据源查询更改为`SELECT * FROM CUSTOMER WHERE COUNTRY = ?`）。
*   按照它们在 SQL 查询中出现的顺序将数据集参数添加到数据集（通过“编辑数据集”对话框的“参数”选项卡），并在`Linked to Report Parameter`“新参数”对话框的值中指定相应的报表参数。（这是您手动将报表参数绑定到查询中的参数的方式 - 您需要为 SQL 查询中的每个参数标记设置数据集参数。）

如果您现在预览报告，它应该会提示您输入参数值，然后显示报告（适当过滤）。

如果您使用的是非关系数据源，您将在数据集级别设置过滤器，而不是对查询进行参数化 - 这里有一个这种方法的[示例](http://www.eclipse.org/birt/phoenix/examples/reports/parameters/)。（您也可以使用基于 SQL 的报告来执行此操作，但它的效率低于查询级别的过滤。）

# visual-studio-2010 - Qt 使用 Visual 创建新翻译 (ts) 会出错 - (ExitCode 1)

> ID：11719427
> 
> 赞同：1
> 
> 时间：2012-07-30T10:15:02.650
> 
> 标签：visual-studio-2010, qt4, exit-code, code-translation, language-translation

我在 VS 2010 中使用 QTranslator。使用下面的过程时，我收到一条错误消息，指出插件已退出并出现错误（退出代码 1）。我已经使用 Qt Linguist 和 Qt Creator 完成了整个过程（代码到可执行的翻译工作）。但是，我什至无法在 Visual Studio 中创建 ts 文件（在菜单上添加它们应该在的所有位置）。有人有什么想法吗？

为项目创建 Qt 翻译文件 要向项目添加新的翻译文件，请选择 Qt|Create New Translation File。在“添加翻译”对话框中，您可以选择语言来创建翻译文件。提供了一个建议的文件名，并在您单击“确定”时创建。翻译文件位于 Visual Studio 解决方案资源管理器的 Translation Files 文件夹中。右键单击翻译文件会显示一个菜单，允许您调用 lupdate、lrelease 和 Qt Linguist。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:46:42.663

使用 qt 插件版本 1.1.11，我遇到了类似的错误。我做了一个翻译（VS 2010 File Menu > Qt > Create New Translation），后来当我在完成两个翻译后进行构建时，它给出了 Qt Add in 的错误 ExitCode 1。

在每次构建时在此错误对话框上单击确定几天后，我发现在输出中列出了输出源的组合框。

将此组合框从“Debug”更改为“Qt Visual Studio Add-in”，然后您应该会在输出中看到错误的来源。对我来说，其中一个 ts 文件有一行无法解析。我删除了那个 ts 文件并创建了一个新文件，错误就消失了。

希望有帮助。

# jquery - Cufon 不排除带有选择器的元素：不

> ID：11719432
> 
> 赞同：1
> 
> 时间：2012-07-30T10:15:14.277
> 
> 标签：jquery, jquery-selectors, fonts, font-face, cufon

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:06:21.507

即使在这种情况下排除所有跨度元素。

```
Cufon.replace('#main #slogan section article p',{ignore:{span:true}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:18:07.277

该类`small`实际上是由后代`<span>`元素公开的，而不是由`<p>`元素公开的。

尝试使用[:has()](http://api.jquery.com/has-selector/)选择器：

```
Cufon.replace("#slogan section article p:not(:has(.small))"); 
```

再三考虑，这将忽略`<p>`包含匹配元素的元素`.small`，这可能不是您想要的。指定`ignoreClass`选项看起来是一个更好的主意：

```
Cufon.replace("#slogan section article p", {
    ignoreClass: "small"
}); 
```

# javascript - Jquery 搜索 - 不区分大小写

> ID：11719434
> 
> 赞同：1
> 
> 时间：2012-07-30T10:15:25.070
> 
> 标签：javascript, jquery, search

我在创建可搜索、可切换的常见问题解答的 Jquery 脚本上获得了一些帮助。代码可以在这里看到：

[http://jsfiddle.net/pT6dB/62/](http://jsfiddle.net/pT6dB/62/)

麻烦的是，如果有一个大写字母“H”的单词“How”，我搜索“h”，它不会找到它。如何使此脚本不区分大小写？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T10:30:55.593

## 更新

或者，您可以使用正则表达式显着减少代码量。[jsFiddle 演示](http://jsfiddle.net/GeekyEggo/pT6dB/72/)

```
$('#search').keyup(function(e) {
    // create the regular expression
    var regEx = new RegExp($.map($(this).val().trim().split(' '), function(v) {
            return '(?=.*?' + v + ')';
        }).join(''), 'i');

    // select all list items, hide and filter by the regex then show
    $('#result li').hide().filter(function() {
        return regEx.exec($(this).text());
    }).show();
});​ 
```

## 原来的

根据您当前确定相关元素的算法，您可以使用 jQuery`filter`方法根据`keywords`数组过滤结果。这是一个粗略的想法：

```
// select the keywords as an array of lower case strings
var keywords = $(this).val().trim().toLowerCase().split(' ');

// select all list items, hide and filter then show
$('#result li').hide().filter(function() {
    // get the lower case text for the list element
    var text = $(this).text().toLowerCase();        

    // determine if any keyword matches, return true on first success
    for (var i = 0; i < keywords.length; i++) {
        if (text.indexOf(keywords[i]) >= 0) {
            return true;
        }
    }
}).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:19:34.940

更改此行

```
$('#result LI:not(:contains('+keywords[i]+'))').hide(); 
```

到

```
$('#result LI').each(function()
{
    if(this.innerHTML.toLowerCase().indexOf(keywords[i].toLowerCase()) === -1)
    {
        $(this).hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:22:06.610

```
// split the search into words
var keywords = s.toLowerCase().split(' ');

// loop over the keywords and if it's not in a LI, hide it
for(var i=0; i<keywords.length; i++) {
    $('#result LI').each(function (index, element) {
        if ($(element).text().toLowerCase().indexOf(keywords) != -1) {
            $(element).show();
        } else {
            $(element).hide();
        }
    });
} 
```

# mysql - How many concurrent connections can I allow to MySQL database for best performance?

> ID：11719443
> 
> 赞同：2
> 
> 时间：2012-07-30T10:15:51.227
> 
> 标签：mysql, performance, connection

I have installed MySQL server on Linux CentOS remote server. The **mysql -V** tells -

**mysql Ver 14.14 Distrib 5.1.61, for redhat-linux-gnu (i686) using readline 5.1**

I have 2GB of RAM with 15 GB disk space. My Database size is 2GB with 12 tables from which one table of 20 Million records. This database is used for mobile application through **REST** webservice.

**So I want to know that How many concurrent connections can I allow to this database for best performance?**

I was told that there will be **100000** concurrent access to the database.

Please Gurus help me.

Thank You

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:20:11.960

If you are using `MYISAM` tables then you can use following formula to calculate memory requirements:

```
key_buffer_size + (read_buffer_size + sort_buffer_size) * max_connections = K bytes of memory 
```

have a look [here](http://dev.mysql.com/doc/refman/5.5/en/memory-use.html)

# selenium - 我们如何使用 Web 驱动程序选择 html 元素值

> ID：11719445
> 
> 赞同：1
> 
> 时间：2012-07-30T10:15:54.150
> 
> 标签：selenium, webdriver

嗨，我想使用 Web 驱动程序获取 html 元素的值，我怎样才能得到它？我正在解释如下场景。我有一个跨度元素，如下所示，开始和结束标签之间的值。我怎样才能得到它？

```
<span id="foo">
    some value
</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:24:59.983

你必须为此使用`webElement.getText()`。

我为你写了一个小单元测试：

```
public class TestGetText
{
    @Test
    public void shouldReadSomevalue()
    {
        final WebDriver webDriver = new HtmlUnitDriver();
        webDriver.get("http://s2server.de/stackoverflow/11719445.html");

        final WebElement webElement = webDriver.findElement(By.id("foo"));
        final String text = webElement.getText();

        assertEquals("some value", text);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:47:38.130

尝试以下解决方案 -

```
String test = driver.findElement(By.id("lbHome")).getText();
System.out.println(test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:17:08.447

尝试使用 XPath 而不是 ID 定位元素，然后使用

`driver.findElement(By.xpath(“xpath for your lbl“)).getText()`

或者

`String st = driver.findElement(By.xpath(“xpath to your lbl“)).getAttribute(“value”);`

来源：[SeleniumWiki](http://www.seleniumwiki.com/webdriver/using-gettext-in-selenium-2-webdriver/)

# objective-c - 在未知类型的类中调用静态方法

> ID：11719448
> 
> 赞同：3
> 
> 时间：2012-07-30T10:16:04.490
> 
> 标签：objective-c, selector, performselector

我有一个有趣的问题，我试图在一个类上调用类方法，而我在测试方法中基本上一无所知。我可以检查它的继承和它可能实现的任何协议，但看不到一种简单的方法来调用它的方法而不被 NSInvocation 束缚。下面的代码虽然很粗略，但试图证明我遇到的问题。

```
@interface ClassA : NSObject

+ (Class)classIsPartialClassOf;

@end

@implementation ClassA

+ (Class)classIsPartialClassOf {
    return [NSString class];
}

@end

@interface ClassB : NSObject

@end

@implementation ClassB

- (id)init {

    [ClassB testClass:[ClassA class]];

}

+ (void)testClass:(Class)classDecl {

    /* obviously if you know the type you can just call the method */
    [ClassA classIsPartialClassOf];

    /* but in my instance I do not know the type, obviously there are no classmethods to perform selector such as the fictional one below */
    [classDecl performSelector:@selector(classIsPartialClassOf)];

}

@end 
```

获取实现的方法似乎返回实例变体，我无法让它们在静态类本身上触发。

我的选择仅限于调用还是我错过了一些明显的东西并且应该踢自己？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:53:33.760

问题是什么？你的代码

```
[classDecl performSelector:@selector(classIsPartialClassOf)]; 
```

应该管用。随心所欲（写起来更简单）

```
[classDecl classIsPartialClassOf]; 
```

类对象是对象。类方法只是在类对象上调用的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:23:28.047

> “获取实现的方法似乎返回实例变体，我无法让它们在静态类本身上触发。”

然后使用`objc_getMetaClass("ClassName")`而不是`objc_getClass`. 类对象是对象本身并且是它们的元类的实例。如果您将元类对象传递给 eg `class_getMethod()`，一切都会好起来的。

# powershell - Powershell 无法绑定参数 ForegroundColor

> ID：11719451
> 
> 赞同：9
> 
> 时间：2012-07-30T10:16:07.220
> 
> 标签：powershell

我创建了以下 Powershell 脚本，希望将其用于将文件复制到网络共享。

```
function Copy-Deploy
{
 param(
  [Parameter(Position=0,Mandatory=$true,HelpMessage="Path to scripts")]
  [Alias("pth")]
  [string]$ScriptPath,

  [Parameter(Position=1,Mandatory=$true,HelpMessage="Deployment script filename")]
  [Alias("dep")]
  [string]$PowershellDeploymentScript,

  [Parameter(Position=2,Mandatory=$true,HelpMessage="MSI filename")]
  [Alias("m")]
  [string]$MSI,

  [Parameter(Position=3,Mandatory=$true,HelpMessage="Filename of the MSBuild script (.btdfproj)")]
  [Alias("msb")]
  [string]$MSBuildScript,

  [Parameter(Position=4,HelpMessage="UNC path to target server folder")]
  [Alias("server")]
  [string]$TargetServerPath

  )

 $ErrorActionPreference="Stop"

 #Step 1 : copy the MSI, .btdfproj script and control powershell script to the remote server
 Write-Host " Going to enter the mis script block"
 $misScript =
 {
    Write-Host " Path+Filename = {0}({1})" -f $ScriptPath, $PowershellDeploymentScript
    Write-Host " Going to copy files" 
    Write-Host " ScriptPath = $ScriptPath"
    Write-Host " PowershellDeploymentScript = $PowershellDeploymentScript"
    Write-Host " MSI = $MSI"
    Write-Host " MSBuildScript = $MSBuildScript"
    Write-Host " TargetServerPath = $TargetServerPath"

    Copy-Item -Path "$ScriptPath" + "$PowershellDeploymentScript" -Destination "$TargetServerPath"
    Copy-Item -Path "$ScriptPath" + "$MSI" -Destination "$TargetServerPath"
    Copy-Item -Path "$ScriptPath" + "$MSBuildScript" -Destination "$TargetServerPath"
 }
 Invoke-Command -scriptblock $misScript

 #Step2 : Execute the powershell script ExecuteBizTalkAppMSI.ps1 remotely on the target server
 #using syntax... invoke-command -computer $MachineName -command { $TargetServerPath + ExecuteBizTalkAppMSI.ps1 }" 

} 
```

我使用以下行从 Powershell ISE 运行此脚本：

```
Copy-Deploy "C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment\" "ExecuteBizTalkAppMSI.ps1" "bin\debug\x.Int.MIS-3.0.0.msi" "x.Int.MIS.Deployment.btdfproj" "\\d-vasbiz01\BizTalkDeployment" 
```

然后我收到以下错误：

```
Cannot bind parameter 'ForegroundColor'. Cannot convert value "C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment\,ExecuteBizTalkAppMSI.ps1" to type "System.ConsoleColor" due to invalid enumeration values. Specify one of the following enumeration values and try again. The possible enumeration values are "Black, DarkBlue, DarkGreen, DarkCyan, DarkRed, DarkMagenta, DarkYellow, Gray, DarkGray, Blue, Green, Cyan, Red, Magenta, Yellow, White".At C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment\CopyDeployScriptThenExecute.ps1:79 char:16 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-30T10:22:11.120

该行：

```
Write-Host " Path+Filename = {0}({1})" -f $ScriptPath, $PowershellDeploymentScript 
```

是问题所在。

像这样写：

```
Write-Host (" Path+Filename = {0}({1})" -f $ScriptPath, $PowershellDeploymentScript) 
```

被`-f`作为`-ForegroundColor`参数而不是字符串格式运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:54:19.260

将消息包装在括号中。您还可以使用变量扩展并嵌入变量而不使用 -format 运算符（就像您在其他 write-host 调用中所做的那样）：

```
Write-Host " Path+Filename = $ScriptPath($PowershellDeploymentScript)" 
```

# delphi - 为什么 TStringGrid 的子控件不能正常工作？

> ID：11719454
> 
> 赞同：4
> 
> 时间：2012-07-30T10:16:10.170
> 
> 标签：delphi, checkbox, mouseevent, delphi-xe2, tstringgrid

我将复选框 ( ) 放在第一列`TCheckBox`的字符串网格 ( ) 中。`TStringGrid`复选框显示良好，位置正确，鼠标悬停时会发光以响应鼠标。但是，当我单击它们时，它们不会切换。他们对点击做出反应，并突出显示，但最终，实际`Checked`属性没有改变。更令人费解的是，一旦它们存在，我没有任何代码更改这些值，我什至没有`OnClick`为这些复选框分配事件。另外，我将这些复选框默认为*unchecked*，但是当显示时，它们被*选中*。

复选框与添加到列表中的每条记录一起创建，并在记录指针内引用，该记录指针分配给要放置复选框的单元格中的对象。

用于单元格突出显示的字符串网格破解：

```
type
  THackStringGrid = class(TStringGrid); //used later... 
```

包含复选框的记录：

```
 PImageLink = ^TImageLink;
  TImageLink = record
    ...other stuff...
    Checkbox: TCheckbox;
    ShowCheckbox: Bool;
  end; 
```

复选框的创建/销毁：

```
function NewImageLink(const AFilename: String): PImageLink;
begin
  Result:= New(PImageLink);
  ...other stuff...
  Result.Checkbox:= TCheckbox.Create(nil);
  Result.Checkbox.Caption:= '';
end;

procedure DestroyImageLink(AImageLink: PImageLink);
begin
  AImageLink.Checkbox.Free;
  Dispose(AImageLink);
end; 
```

将行添加到网格：

```
//...after clearing grid...
//L = TStringList of original filenames
if L.Count > 0 then
  lstFiles.RowCount:= L.Count + 1
else
  lstFiles.RowCount:= 2; //in case there are no records
for X := 0 to L.Count - 1 do begin
  S:= L[X];
  Link:= NewImageLink(S); //also creates checkbox
  Link.Checkbox.Parent:= lstFiles;
  Link.Checkbox.Visible:= Link.ShowCheckbox;
  Link.Checkbox.Checked:= False;
  Link.Checkbox.BringToFront;
  lstFiles.Objects[0,X+1]:= Pointer(Link);
  lstFiles.Cells[1, X+1]:= S;
end; 
```

Grid 的 OnDrawCell 事件处理程序：

```
procedure TfrmMain.lstFilesDrawCell(Sender: TObject; ACol, ARow: Integer;
  Rect: TRect; State: TGridDrawState);
var
  Link: PImageLink;
  CR: TRect;
begin
  if (ARow > 0) and (ACol = 0) then begin
    Link:= PImageLink(lstFiles.Objects[0,ARow]); //Get record pointer
    CR:= lstFiles.CellRect(0, ARow); //Get cell rect
    Link.Checkbox.Width:= Link.Checkbox.Height;
    Link.Checkbox.Left:= CR.Left + (CR.Width div 2) - (Link.Checkbox.Width div 2);
    Link.Checkbox.Top:= CR.Top;
    if not Link.Checkbox.Visible then begin
      lstFiles.Canvas.Brush.Color:= lstFiles.Color;
      lstFiles.Canvas.Brush.Style:= bsSolid;
      lstFiles.Canvas.Pen.Style:= psClear;
      lstFiles.Canvas.FillRect(CR);
      if lstFiles.Row = ARow then
        THackStringGrid(lstFiles).DrawCellHighlight(CR, State, ACol, ARow);
    end;
  end;
end; 
```

这是单击时的外观...

![对鼠标点击有反应但不改变](../Images/3516660879f30d0faf3c502aeaa1a92a.png)

这可能是什么原因造成的？它绝对不会改变`Checked`我代码中任何地方的属性。当放置在网格中时，复选框本身会出现一些奇怪的行为。

**编辑**

我做了一个简短的测试，我`TCheckBox`在表格上放了一个常规。检查/取消检查很好。然后，在我的表单`OnShow`事件中，我将复选框更改`Parent`为这个网格。这一次，我得到了相同的行为，单击时不切换。`TCheckBox`因此，当 a有另一个控件作为其父控件时，它似乎没有正确反应。如何克服这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T14:53:20.010

`TStringGrid`的`WMCommand`处理程序不允许子控件处理消息（InplaceEdit 除外）。

因此，您可以使用例如插入类（基于[Peter 的代码](http://www.delphipages.com/forum/showthread.php?t=46951)）或手动绘制控件，正如某些人所建议的那样。这是插入类的代码：

```
uses
  Grids;

type
  TStringGrid = class(Grids.TStringGrid)
  private
    procedure WMCommand(var AMessage: TWMCommand); message WM_COMMAND;
  end;

implementation

procedure TStringGrid.WMCommand(var AMessage: TWMCommand);
begin
  if EditorMode and (AMessage.Ctl = InplaceEditor.Handle) then
    inherited
  else
  if AMessage.Ctl <> 0 then
  begin
    AMessage.Result := SendMessage(AMessage.Ctl, CN_COMMAND,
      TMessage(AMessage).WParam, TMessage(AMessage).LParam);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T11:59:46.010

在 Delphi7 中，至少我这样做：

`fChecked[]`您需要在单元格上绘制一个复选框，并使其与指示每行中复选框状态的布尔值数组（此处）保持同步。然后，在`DrawCell`部分`TStringGrid`：

```
var
 cbstate: integer;
begin
...
if fChecked[Arow] then cbState:=DFCS_CHECKED else cbState:=DFCS_BUTTONCHECK;
DrawFrameControl(StringGrid.canvas.handle, Rect, DFC_BUTTON, cbState);
...
end; 
```

要让复选框响应空格键，请使用`KeyDown`事件并强制重绘：

```
if (Key = VK_SPACE) And (col=ColWithCheckBox) then begin
  fChecked[row]:=not fChecked[row];
  StringGrid.Invalidate;
  key:=0;
end; 
```

该方法需要类似的`OnClick`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:39:14.980

1.  您可以在 toReportMode（TListView 仿真）模式下使用 VirtualTreeView 而不是网格吗？

2.  您可以在诸如 NexusDB 或 TClientDataSet 之类的内存表上使用 TDBGrid 吗？

3.  丑陋的方法会像带有自定义字体的字母一样呈现复选框 - 例如 WinDings 或[http://fortawesome.github.com/Font-Awesome](http://fortawesome.github.com/Font-Awesome)

*后者最容易实现，但最难看，最难维护——业务逻辑混入 VCL 事件处理程序*

# actionscript-3 - 是否可以将条形码阅读器与 flex3 浏览器应用程序集成

> ID：11719457
> 
> 赞同：-4
> 
> 时间：2012-07-30T10:16:22.747
> 
> 标签：actionscript-3, apache-flex, barcode

我尝试将条形码阅读器与 flex3 浏览器应用程序而不是 AIR 集成。有可能.. 否则对任何组件负责.. 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:58:07.373

有一个名为 zxing 的库，最初是为 Android 条码扫描创建的。似乎这个库的一个版本已被移植到 ActionScript [http://zxing.riaforge.org/](http://zxing.riaforge.org/)我认为它应该可以满足您的需求。不过我还没有测试过。

# android - 选择默认值时接受 RatingBar 值

> ID：11719465
> 
> 赞同：0
> 
> 时间：2012-07-30T10:16:44.180
> 
> 标签：android, ratingbar

我有一个ratingbar，它最初显示了用户输入的平均评分，以及我的问题是，额定栏忽略其默认值（或平均值）时。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:22:22.727

你可以检查

```
if(ratingBar.getRating() == AVERAGE_RATING && ratingBar.getRating() == DEFAULT_VALUE)
{
     // ignore
}
else
{
    // Go on..
} 
```

# jquery - JQuery .load() 问题

> ID：11719470
> 
> 赞同：2
> 
> 时间：2012-07-30T10:16:48.377
> 
> 标签：jquery, function, variables, load

```
var img = $('.container img');

$(img).load(function () { 
   // do something
}); 
```

我的`.load()`功能有问题。这是我上面的代码片段，它在变量`img`存在时运行一个函数。但有时，此功能不会运行。这与`img`没有及时存储变量有关吗？如果您认为是这种情况，是否有人知道如何延迟`.load()`调用以确保功能发生。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:23:46.673

在标签出现在 DOM`on`之前尝试使用该方法：`img`

```
$('.container img').on('load', function() {
    console.log(this);
}); 
```

[JSF](http://jsfiddle.net/faceleg/LnZTj/)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:26:32.137

问题可能是您在 DOM 准备好之前绑定了事件。尝试将您的代码放在这样的包装器中：

```
//HTML
<img src="https://www.google.se/logos/2012/fencing-2012-hp.jpg">​

//JS
$(function(){
    //This will be run after DOM is loaded
    $("img").load(function(){
        alert("loaded");
    });
});​ 
```

[http://jsfiddle.net/NX6Hj/](http://jsfiddle.net/NX6Hj/)

# node.js - Azure Node.js 在辅助角色中运行服务总线队列消息

> ID：11719474
> 
> 赞同：1
> 
> 时间：2012-07-30T10:17:10.717
> 
> 标签：node.js, azure

如何设置工作人员角色以使用 windows azure sdk 侦听服务器总线队列消息？

目前我在我的 server.js 工作角色中有这个来监听队列消息

```
var http = require('http')
    , config = require('./config')
    , azure = require('azure')
    , uuid = require('node-uuid');

http.createServer(function (req, res) {
    processServices(function () {
        res.writeHead(200, { 'Content-Type': 'text/plain' });
        res.end('hello world');
    });
}).listen(process.env.port);

function processServices(callback) {
    var sb1 = azure.createServiceBusService(config.serviceBusNamespace, config.serviceBusAccessKey);
    sb1.receiveQueueMessage('startup', function (error, m) {
        if (!error) {
            writeMessage(JSON.stringify(m), function () {
                callback();
            });
        }
        else {
            writeMessage(JSON.stringify(error), function () {
                callback();
            });
        }
    });
}

function writeMessage(message, callback) {
    var serviceClient = azure.ServiceClient;
    var ts1 = azure.createTableService(serviceClient.DEVSTORE_STORAGE_ACCOUNT, serviceClient.DEVSTORE_STORAGE_ACCESS_KEY, serviceClient.DEVSTORE_TABLE_HOST);

    ts1.getTable('Messages', function (error) {
        if (error === null) {
            var messageEntity = {
                PartitionKey: '0',
                RowKey: uuid(),
                Message: message
            };

            ts1.insertEntity('Messages', messageEntity, function (error, newMessage) {
                callback();
            });
        }
        else callback();
    });
} 
```

这在我的 server.js 网络角色中设置队列

```
var sb1 = azure.createServiceBusService(config.serviceBusNamespace, config.serviceBusAccessKey);
sb1.getQueue('startup', function (error, queue) {
    if (error) {
        sb1.createQueueIfNotExists('startup', function (error, queue) {
            if (!error)
                console.log("created startup queue 1: " + JSON.stringify(queue) + "\n");
            else
                console.log("don't got startup queue 1: " + JSON.stringify(error) + "\n");
        });
    }
    else console.log("created startup queue 2: " + JSON.stringify(queue) + "\n");
});
sb1.getQueue('serialnumbers', function (error, queue) {
    if (error) {
        sb1.createQueueIfNotExists('serialnumbers', function (error, queue) {
            if (!error)
                console.log("created serialnumbers queue 1: " + JSON.stringify(queue) + "\n");
            else
                console.log("don't got serialnumbers queue 1: " + JSON.stringify(error) + "\n");
        });
    }
    else console.log("created serialnumbers queue 2: " + JSON.stringify(queue) + "\n");
}); 
```

这在我的网络角色 index.js 文件中向队列发送消息

```
var azure = require('azure')
    , config = require('../utils/config');

exports.index = function (req, res) {
    var sb1 = azure.createServiceBusService(config.serviceBusNamespace, config.serviceBusAccessKey);
    var startupMessage = {
        body: ''
    };

    sb1.getQueue('startup', function (error, queue) {
        if (!error) {
            sb1.sendQueueMessage('startup', startupMessage, function (error) {
                if (!error) {
                    console.log("sent startup message 1\n");

                    res.render('index', {
                        locals: {
                            pageTitle: 'Home'
                        }
                    });
                }
                else {
                    console.log("didn't send startup message 1: " + JSON.stringify(error) + "\n");

                    res.render('index', {
                        locals: {
                            pageTitle: 'Home'
                        }
                    });
                }
            });
        }
        else {
            res.render('index', {
                locals: {
                    pageTitle: 'Home'
                }
            });
        }
    });
}; 
```

当 web 角色运行 index.js 文件时，如何获取它以便工作角色侦听并执行？

目前它没有这样做，消息坐在队列中但没有被工作角色读取？

如何让工作者角色从队列中读取消息？

我应该运行 cron 作业还是使用 socket.io？我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-06T14:14:15.187

npm **azure**包存在问题，它通过下面的 HTTP 工作，并且如您所知，HTTP 是请求/响应协议。（不幸的是，在这个应用层中没有像 SignalR 或类似的其他“推送”类型的通信）。所以唯一的方法是拉取消息 -((.

但是，如果您使用 AMQP 协议，还有另一种消费（监听）消息的方法。

有一个名为[amqp10](https://www.npmjs.com/package/amqp10)的 npm 包（基于 Promise，符合 AMQP 1.0 的 node.js 客户端），您可以在其中订阅消息并开始监听，类似于 httpServer 或 expressjs 的概念。在他们的 npmjs 包主页上，您可以找到文档和示例。

简而言之，它看起来像这样：..

```
async function sample( {connectionString, topicSubscriptionPath} ){
   const { Client, Policy } = require('amqp10');
   const client = new Client(Policy.Utils.RenewOnSettle(1, 1, Policy.ServiceBusTopic));
   const connection = await client.connect(connectionString);
   const receiver = await connection.createReceiver(topicSubscriptionPath);

   receiver.on('message', (message) => {
         try {
           // here is your brokered message, do whatever u need to do
           receiver.accept(message); //if can be marked as processed, aka can be deleted from service bus
         } catch (error) {
           this.receiver.reject(message); //return back to service bus
         }
       });
   }
sample(buildConnectionString(), 'subscriptionNameInYourTopic');

function buildConnectionString(){
  //very specific format, keys you can find in your azure subscription
   return `amqps://${sharedAccessKeyName}:${sharedAccessKey}@${queueEndpoint}`;
}
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T14:48:05.407

您只需要使用 .receiveQueueMessage 方法不断轮询队列，直到收到来自队列的消息。民意调查之间的时间间隔完全取决于您。

# xcode4.2 - Applescript-ObjC 打开新窗口

> ID：11719477
> 
> 赞同：0
> 
> 时间：2012-07-30T10:17:20.000
> 
> 标签：xcode4.2, applescript-objc

我有另一个问题。

当用户点击“退出”按钮或使用“Cmd-Q”时，我制作了一个退出窗口。窗口本身有自己的“退出”按钮。如何使窗口可以在 Cmd-Q 或点击“退出”按钮时显示？我也无法将 AppDelegate 附加到窗口。（在 IB 中缺少代表 appdelegate 的蓝色框）如果需要，我会提供更多信息。

我正在使用 OSX 10.6.8 雪豹，Xcode 4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:14:26.377

您可以将按钮连接到应用程序的**终止操作，并从应用程序委托的****applicationWillTerminate**方法调用退出窗口代码。通过添加一个新对象（来自对象库）并将其类设置为您的 AppDelegate，可以在界面编辑器中恢复应用程序委托实例。

# web-applications - 发生事件时触发 Google 日历

> ID：11719482
> 
> 赞同：2
> 
> 时间：2012-07-30T10:17:49.467
> 
> 标签：web-applications, synchronization, google-calendar-api

我正在构建一个网络应用程序，它通过 OAuth2 与 Google Calendar 的新 API 集成，我想知道是否有任何方式“订阅”事件并在事件发生时得到通知，比如回调。

我在他们的官方文档中没有看到任何提示，但我想我可以尝试一下：[https ://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/)

主要问题是，如果您想在应用程序和 GC 之间进行双向同步，则需要不断查询 GC API 以进行更改。如果同一系统中的集成数量增加，则完整同步周期之间的总时间也会增加很多。

此外，如果有人知道其他与 GC 很好地集成并对其实现进行创新的 Web 应用程序，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T08:44:24.530

我现在看不到任何订阅谷歌日历触发器的方式（尽管我同意，这将非常有用）。您只能使用保存在 google drive 上的电子表格、文档和表单来执行此操作。

根据谷歌开发文档：

> “它们适用于绑定到电子表格、文档或表单的脚本。”
> 
> [https://developers.google.com/apps-script/understanding_triggers](https://developers.google.com/apps-script/understanding_triggers) [https://developers.google.com/apps-script/understanding_events](https://developers.google.com/apps-script/understanding_events)

# javascript - 更新面板回发后，Javascript 块不会运行，更复杂

> ID：11719485
> 
> 赞同：0
> 
> 时间：2012-07-30T10:17:53.430
> 
> 标签：javascript, jquery, asp.net, updatepanel, postback

我正在开发名为“TimePicker”的用户控件，

此用户控件利用 jquery timepicker，并将其包装以使其易于在 asp.net 中使用。

我正在使用一个简单的脚本将 jquery timepicker 绑定到一个文本框：

```
$('#<%= timepicker_textbox.ClientID %>').timepicker({
    onClose: function() {
        __doPostBack('<%= timepicker_textbox.ClientID %>', '');
    }        
}); 
```

我还选择将此文本框放在更新面板中，以避免在用户选择时间并导致回发之后刷新整页。

问题是在更新面板重新加载后，页面中的任何脚本都不会再次运行，因此 jquery timepicker 不会应用于文本框。

我设法通过添加以下代码来解决这个问题：

```
Sys.Application.add_load(function () {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(<%= timepicker_textbox.ClientID %>_onControlLoad());
});

function <%= timepicker_textbox.ClientID %>_onControlLoad()
{
    $('#<%= timepicker_textbox.ClientID %>').timepicker({
        onClose: function() {
            __doPostBack('<%= timepicker_textbox.ClientID %>', '');
        }        
     });
} 
```

这会导致函数被注册，然后在每个部分回发时再次运行。

问题是这仅解决了这个特定时间选择器的问题，而不是同一页面中的任何其他元素！

这对我来说是个主要问题，因为我在一个页面中有多个时间选择器，并且在一个时间选择器上选择时间时，其他时间选择器不起作用......

欢迎任何建议。

谢谢，

艾坦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:28:14.963

一个简单的解决方案是将 class="timepicker" 添加到您想要该功能的任何文本框中，然后使用它：

```
$(document).ready(function(){
    $('.timepicker').timepicker({
        onClose: function() {
            __doPostBack($(this).attr('id'), '');
        }        
     });
}); 
```

一般来说，学会摆脱从服务器驱动客户端行为，因为这种心态与 jQuery 极其简单的选择/添加行为范例不相符。整个更新面板/回发的东西也很老派，但如果你必须使用它，你必须`Sys.WebForms.PageRequestManager.getInstance().add_endRequest`像你一样注册我上面显示的功能。或者只是将`$(document).ready`更新面板放在里面，这也可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:44:04.483

使用页面中的 Updatepanel 更改控件的 Id 并且 jquery`document.ready`事件没有被正确调用，您可以从这里阅读更多信息-

[http://www.dotnetfunda.com/articles/article471-jquery-and-aspnet-ajax-updatepanel.aspx](http://www.dotnetfunda.com/articles/article471-jquery-and-aspnet-ajax-updatepanel.aspx)

[带有更新面板的 jquery](https://stackoverflow.com/questions/3406145/jquery-with-update-panel)

# jquery - 输入文本字段在 Firefox 中不起作用

> ID：11719486
> 
> 赞同：1
> 
> 时间：2012-07-30T10:17:56.350
> 
> 标签：jquery, firefox, text, input

我正在 jQuery UI 中创建一些应用程序，我注意到如果我使用 JS 创建输入文本字段，它根本不起作用。这是创建此字段的代码部分。我有一个这样的变量：

```
var AddNewDepartment = "<br /><br />\
<form>\
<table class='AddNewDepartment-table'>\
<td>\
Department Name:<span style='color: red'>*</span>&nbsp;\
<input type='text' name='departmentName' id='departmentName' class='expanded-input-    text' />\
<input type='button' name='save' id='save' onclick='createDepartment()' Value='Save' class='newDepartment-submit' />\
<input type='button' name='cancel' Value='Cancel' class='newDepartment-submit'  />\
</td>\
</table>\
</form>\
"; 
```

后来我用 jQuery 创建这个表单 $("#someId").html(AddNewDepartment);

# c++ - 我可以使用 %p 说明符输出 Windows 句柄吗？

> ID：11719489
> 
> 赞同：4
> 
> 时间：2012-07-30T10:17:59.280
> 
> 标签：c++, winapi, pointers, handle, format-specifiers

[这是对这个问题](https://stackoverflow.com/q/11688162/57428)的一种跟进。Windows SDK 具有如下`HANDLE`定义的数据类型：`WinNT.h`

```
typedef void *HANDLE; 
```

此数据类型用于表示句柄。从技术上讲，句柄不是指针——它是只能用于 Win32 函数的神奇值。然而，它被声明为使用`void*`typedef 的数据类型来表示。

如果我想使用以下代码输出句柄十六进制值：

```
HANDLE handle = ...;
printf("%p", handle); 
```

会合法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:25:40.773

是的，这很好，有两个原因。首先，它实际上是一个指针（指向 void 的指针），其次 %p 不会神奇地检查堆栈上的值是否是指针 - 它只是抓取下一个指针大小的值并将其打印出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:09:54.860

```
HANDLE handle = ...;
printf("%p", handle); 
```

这会合法吗？这将是正确的，因为这将起作用。同时也没有打印手柄的“合法途径”。Microsoft 可以自由地将句柄的定义更改为不同的定义，例如：

```
struct HANDLE { DWORD dummy; }; 
```

我什至记得这个定义出现在一些旧书中。

32 位 NT 有 2 种句柄类型：32 位和 64 位。因此，仍然有必要检查您拥有的手柄。

# c# - 单个 ascx 页面可以使用多个作为部分类的代码文件吗

> ID：11719491
> 
> 赞同：2
> 
> 时间：2012-07-30T10:18:16.927
> 
> 标签：c#, ascx

我们可以将两个部分类链接到一个 ascx 页面吗？

我浏览了一些链接，但找不到合适的解决方案。例如，假设我有文件，例如

Collection.ascx.cs 和 Collection.Search.cs
与 Collection.ascx

我有像按钮单击事件这样的事件，它是否可以放在部分类中，因为这样做会使方法不可用。
我的意图是处理部分类中的按钮单击事件和下拉更改事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:40:11.793

是的，在 WebApplication 中，它是 .aspx（网页）和 .ascx（用户控件）的默认属性。

默认情况下，这些文件带有两个 .cs 文件，将部分类中的代码分开（文件名.aspx.designer.cs 和文件名.aspx.cs 具有相同的部分类）

您还可以添加更多 .cs 文件来扩展这些部分类定义。

但是在网站上，它不会工作，对于 aspx 或 ascx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:31:04.560

是的，部分类的 C# 编译器规则不会因为它的 ASP.NET 而改变。只要确保你的命名空间和类名匹配，源文件不必是`ascx`解决方案资源管理器中文件的子文件，但如果你真的想要它，你可以编辑项目文件并添加适当的依赖 xml分割。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-01T05:35:04.143

答案位于 default.aspx 第一行：

```
Language="C#" CodeBehind="Default.aspx.cs" ... 
```

将设置每个部分类工作。

反而，

```
Language="C#" CodeFile="Default.aspx.cs" ... 
```

会导致偏类出错。

但是，在 vs2017 old-style-webForm 中只能使用 CodeFile，所以你必须尝试另一种方式：只需创建一个文件 ..\WebF8\App_Code\Class3.cs 内容为：

```
 public static class Class3 {
            public static int gg3=33;
     } 
```

那么你就可以在 default.aspx.cs 中正确看到 Class3.gg3 了。注意，这个 Class3.cs 文件必须在 \App_Code 文件夹中。

# c++ - 如何使用可选值初始化 shared_ptr 映射

> ID：11719492
> 
> 赞同：1
> 
> 时间：2012-07-30T10:18:19.813
> 
> 标签：c++, boost

我正在尝试使用具有可选值的映射初始化 shared_ptr。我将在程序的稍后阶段初始化这些值。

我阅读了以下帖子并将其用作指南：[如何在不为 std::map 指定值的情况下添加有效键？](https://stackoverflow.com/questions/3577060/how-to-add-valid-key-without-specifying-value-to-a-stdmap)

但我的情况有点不同，因为我使用的是 shared_ptr。废话不多说，这是我写的代码：

着色程序.h

```
...
#include <map>
#include <boost/shared_ptr.hpp>
#include <boost/optional.hpp>

typedef map<string, optional<GLuint> > attributes_map;

class ShaderProgram
{
public:
    ShaderProgram(vector<string> attributeList);
    ...
private:
    shared_ptr<attributes_map> attributes;
}; 
```

着色器程序.mm

```
ShaderProgram::ShaderProgram(vector<string> attributeList)
{
    // Prepare a map for the attributes
    for (vector<string>::size_type i = 0; i < attributeList.size(); i++)
    {
        string attribute = attributeList[i];
        attributes[attribute];
    }
} 
```

编译器通知我以下错误：类型“shared_ptr”不提供下标运算符。

有人知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:26:26.397

`attributes`是一个`shared_ptr`并且没有`operator[]`但一个`map`有。您需要取消引用它：

```
(*attributes)[attribute]; 
```

请注意`map`，在构造函数中没有分配任何对象，`attributes`因此一旦解决了编译器错误，您将获得一些描述的运行时故障。要么分配一个`map`实例：

```
ShaderProgram::ShaderProgram(vector<string> attributeList) :
    attributes(std::make_shared<attributes_map>())
{
    ...
} 
```

或者不要使用 a `shared_ptr`，因为在这种情况下为什么需要动态分配并不明显：

```
private:
    attributes_map attributes; 
```

通过`attributeList`引用传递以避免不必要的复制，因为`const`构造函数不会修改它：

```
ShaderProgram::ShaderProgram(const vector<string>& attributeList) 
```

# ruby-on-rails - Ubuntu 在代理问题后面安装 Nginx

> ID：11719493
> 
> 赞同：0
> 
> 时间：2012-07-30T10:18:29.850
> 
> 标签：ruby-on-rails, ubuntu, nginx, passenger

**我想安装带有 Phusion 乘客支持的 Nginx**

我有：

```
Ubuntu 12.04 LTS  
ruby-1.9.3-p194  
Rails 3.2.7  
I am behind the proxy(http://10.10.16.8:3128) 

test@U205-UBUNTU:~$ printenv | grep htt  
http_proxy=http://10.10.16.8:3128  
https_proxy=https://10.10.16.8:3128 
```

当我运行**rvmsudopassenger-install-nginx-module**时，出现超时错误：

```
 PCRE (required by Nginx) not installed, downloading it...  
    # wget -O /tmp/root-passenger-5079/pcre.tar.gz http://downloads.sourceforge.net/project/pcre/pcre/8.30/pcre-8.30.tar.gz  
    --2012-07-30 13:12:27--  http://downloads.sourceforge.net/project/pcre/pcre/8.30/pcre-8.30.tar.gz  
    Resolving downloads.sourceforge.net (downloads.sourceforge.net)... 216.34.181.59  
    Connecting to downloads.sourceforge.net (downloads.sourceforge.net)|216.34.181.59|:80... failed:
    Connection timed out.  
    Retrying. 
```

看起来没有通过代理访问。

但是当我尝试`wget -O /tmp/root-passenger-5079/pcre.tar.gz http://downloads.sourceforge.net/project/pcre/pcre/8.30/pcre-8.30.tar.gz`单独运行时，一切正常。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:41:08.643

我找到了解决方案。
问题是 sudo 削减了环境变量。
要持久化环境变量，例如 http_proxy、ftp_proxy，您必须在 /etc/sudoers 文件中添加这一行：

```
Defaults env_keep="no_proxy http_proxy https_proxy ftp_proxy XAUTHORIZATION \
XAUTHORITY TZ PS2 PS1 PATH MAIL LS_COLORS KRB5CCNAME HOSTNAME HOME DISPLAY COLORS" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T10:02:35.220

这对我有用：

`sudo vim /etc/wgetrc`

并编辑这些行：

```
https_proxy = http://<proxyaddress>:<port>/
http_proxy = http://<proxyaddress>:<port>/
ftp_proxy = http://<proxyaddress>:<port>/ 
```

（替换`<proxyaddress>`并`<port>`与您一起设置）

# wordpress - PHP 警告：8978294 字节的 POST 内容长度超过第 0 行未知中 8388608 字节的限制

> ID：11719495
> 
> 赞同：267
> 
> 时间：2012-07-30T10:18:33.257
> 
> 标签：wordpress, xampp, php

尝试在我的 XAMPP 本地开发环境中的 WordPress 上上传导入时出现此错误：

警告：8978294 字节的 POST 内容长度超出第 0 行未知中 8388608 字节的限制

我将`upload_max_filesize`from更改`2M`为`1000M`，但这似乎没有任何作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：408
> 
> 时间：2012-07-30T10:20:15.113

8388608 字节为 8M，PHP 中的默认限制。将您的 in php.ini 更新`post_max_size`为更大的值。

`upload_max_filesize`设置用户可以上传的最大文件大小，同时 `post_max_size`设置可以通过表单中的 POST 发送的最大数据量。

所以你可以设置`upload_max_filesize`为 1 兆，这意味着用户可以上传的最大单个文件是 1 兆字节，但如果`post_max_size`设置为 5，他们可以一次上传 5 个。

更改将在服务器重新启动后生效。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2014-08-04T14:00:23.733

只需在 php.ini 中设置这些：

```
upload_max_filesize = 1000M;
post_max_size = 1000M; 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2017-12-20T12:44:04.373

***1.*** **首先你会找到 php.ini 文件。**

> 你可以从这个路径 中找到**php.ini文件。****C:\xampp\php** 或来自 **xampp**文件夹。

***2.*** **现在打开 php.ini 文件并更改以下内容：**

> **1\.** ***post-max-size***（将**8M**更改为**800M**）。
> 
> **2.upload** ***-max-filesize***（将**2M**改为**2000M**）。

***3.*** **现在停止 Apache 服务器和 MySQL。**

***4.*** **现在重新启动 Apache 服务器和 MySQL。**

之后它工作得很好。

享受你现在的工作:)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-07-30T10:20:06.270

这是一个 8MB 的`post_max_size`错误。

将其设置为您喜欢的值。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-07-30T10:22:05.737

已经重新启动您的网络服务器？

这将强制 php 重新加载`php.ini`

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-03-28T10:36:51.673

您将不得不更改

```
post-max-size
upload-max-filesize 
```

两者都可以在**php.ini中找到**

重新启动服务器将有助于它开始工作。在运行 XAMIP 的本地测试服务器上，我不得不停止 Apache 服务器并重新启动它。之后它工作得很好。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-04-05T14:37:49.333

去`C:\xamppp\php`。在 php.ini 中设置这些值：

```
upload_max_filesize = 1000M
post_max_size = 0M 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-07-09T13:33:44.653

1.  在您的目录根目录中创建新的文本文件`wp-admin`并将其命名为`info.php`.

2.  打开`info.php`并添加这一行：

    `<?php phpinfo(); ?>`

3.  保存。

4.  转到`yourwebsitename(probably localhost)/wp-admin/info.php`任何网络浏览器。

5.  在第 8 行，您将看到：**Configuration File (php.ini) Path**，在我的情况下是`C:\Windows`，这意味着它位于我的 C 驱动器上。

6.  在第 9 行你会看到：**Loaded Configuration File**，旁边写着`C:\xampp\php.ini`

所以我找到了`php.ini`与我的 wordpress 网站相关联的页面。

7.  走到那条路，找到`php.ini`。

8.  打开它，然后编辑：

    搜索`post_max_size=8M`，并将其更改为`post_max_size=1000M`

    搜索`upload_max_filesize=2M`，并将其更改为`upload_max_filesize=1000M`

9.  返回您的管理页面 → 媒体 → 添加新

10.  在底部，您会看到 2MB 已更改为 1000M。

完成此过程后，您必须重新启动 Web 服务器或重新启动计算机。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-10-24T18:33:00.387

1.  找到 php.ini [\xampp\php]
2.  只需在 php.ini 中设置这些：

```
upload_max_filesize = 1000M;
post_max_size = 1000M; 
```

3.  机器人服务器
    *   停止 Apache 和 MySQL
    *   重新开始 Apache 和 MySQL

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-11-19T05:13:07.797

去

```
C:\drive\xampp(where xampp installed) 
```

只需找到 php.ini 文件然后在文件搜索中

```
post_max_size=XXM
upload_max_size=XXM 
```

使用此代码进行更改

```
post_max_size=100M
upload_max_filesize=100M 
```

不要忘记重新启动xampp

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-04-30T06:17:42.473

使用 wamp 执行以下操作，希望它能解决问题

在 PHP 选项中进行这些更改以更正：

```
max_execution_time   180

memory_limit   512M or your highest available

post_max_size  32M

upload_max_filesize   64M 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-07-30T10:20:31.400

您还需要更改[post-max-size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2018-08-06T17:29:25.657

在 XAMPP 面板中，单击 Apache 站点上的 ADMIN 按钮。然后选择编辑 php.ini 并将缺少的 post_max_size 添加到您喜欢的值。

```
post_max_size = 100M 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-08-08T19:27:14.977

去

```
C:\ drive 
```

或者安装xampp的驱动器点击xampp find php并打开它，在那里你找到`php.ini`文件夹用记事本打开php.ini文件并找到`upload_max_filesize`并`post_max_size`在“向上和向下查找选项”中，将两个值更改为`1000M`

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-02-24T03:49:29.100

我通过将以下参数更改为**/etc/php/7.2/apache2/php.ini**文件中的预期值解决了同样的问题

```
upload_max_filesize = 8M;
post_max_size = 8M; 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-01-04T07:53:50.010

```
upload_max_filesize = 8M;
post_max_size = 8M; 
```

想象一下，您已经更改了上述值。但是当用户尝试上传大于 8M 的大文件时会发生什么？

这就是发生的事情，PHP 显示此警告！

```
Warning: POST Content-Length of x bytes exceeds the limit of y bytes in Unknown on line 0 
```

你可以通过添加来避免它

```
ob_get_contents();
ob_end_clean(); 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-07-19T01:22:03.083

对于此错误，您有 2 个选项：

1.  您上传的文件太大，您需要使用较小的文件。
2.  将 php.ini 中的上传大小增加到

`upload_max_filesize = 9M; post_max_size = 9M;`

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-07-03T12:25:34.607

您可能没有上传正确的 zip 文件。就我而言，作为 wordpress 的新手（我曾经进行硬编码），我安装了包含另一个 zip 文件的压缩文件，这是需要上传的实际主题。那么在这种情况下需要做的是解压文件并找到里面的“theme_name.zip”。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-06-21T17:08:39.380

转到浏览器并搜索`php.ini`然后打开它，并更改这两个值：

```
post_max_size= 1000000000000M 
```

```
upload_max_filesize= 10000000000000M 
```

如果您`php.ini`使用记事本打开文件，您可以通过单击搜索这两个值：
`cmd`+`f`

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-08-01T09:04:32.870

如果从文件夹更改 post_max_size 设置`XAMPP`。它不适合你试试这个。

从`XAMPP`控制面板，然后单击配置，然后在此文件中`PHP (php.ini)`编辑`post_max_size`和`upload_max_filesize`到更高的数字。停止 Apache 服务器。启动 Apache 服务器。这对我有用。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-02-26T04:02:04.223

如果您的目标是将主题导入您的 Wordpress，那么您可以手动将主题复制粘贴到您的 wp-content->themes 文件夹中并提取它。我刚遇到这个，找不到 WAMP 的 php.ini 文件。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-10-01T05:46:12.263

我通过更新`/etc/php.ini`这些设置解决了我在 centos 7 上的 php7 问题：

```
 post_max_size = 500M
 upload_max_filesize = 500M 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-04-24T19:15:13.640

正如[Optimaz ID](https://stackoverflow.com/users/5719038/optimaz-id)指出的那样，在用户上传的文件大于 php.ini 中设置的 upload_max_filesize 和 post_max_size 的情况下，下面的代码帮助我隐藏了 PHP 错误消息（这在设置大值时几乎是不可能的）。

```
ob_get_contents();
ob_end_clean(); 
```

# sql-server-ce - ASP.NET 网页无法将新列添加到 UserProfile 表（SQL Server CE）

> ID：11719497
> 
> 赞同：0
> 
> 时间：2012-07-30T10:18:38.360
> 
> 标签：sql-server-ce, webmatrix, asp.net-webpages

使用 SQL Server CE，我试图`UserProfile`在 ASP.NET 网页中的表中添加一个新列，但在尝试保存数据库时不断收到错误消息。

有任何想法吗？

> 数据库管理器
> 
> 无法删除该约束，因为它被另一个约束引用。[约束名称=用户配置文件]
> 
> System.Data.SqlServerCe.SqlCeException (0x80004005)：约束不能被删除，因为它被另一个约束引用。[约束名称=用户配置文件]
> 
> 在 System.Data.SqlServerCe.SqlCeCommand.ProcessResults(Int32 hr)
> 在 System.Data.SqlServerCe.SqlCeCommand.ExecuteCommandText(IntPtr& pCursor, Boolean& isBaseTableCursor)
> 在 System.Data.SqlServerCe.SqlCeCommand.ExecuteCommand(CommandBehavior 行为，字符串方法，ResultSetOptions 选项)
> 在 System.Data.SqlServerCe.SqlCeCommand.ExecuteNonQuery()
> 在 Microsoft.WebMatrix.DatabaseManager.SqlCeDatabase.SqlCeDatabaseProvider.DropTable(TableInfo tableInfo, DbConnection connection, DbTransaction transaction)
> 在 Microsoft.WebMatrix.DatabaseManager.SqlCeDatabase.SqlCeDatabaseProvider.EditTable(String connectionString , 字符串模式, TableInfo tableInfo)
> Microsoft.WebMatrix.DatabaseManager.IisDbManagerModuleService.EditTable(DatabaseConnection databaseConnection, String schema, Object tableInfoData, String configPathState)
> 在 Microsoft.WebMatrix.DatabaseManager.Client.ClientConnection.EditTable(String schema, Object tableInfoData)
> 在 Microsoft.WebMatrix.DatabaseManager.Client .ClientTable.CommitChanges()
> 在 Microsoft.WebMatrix.DatabaseManager.Client.TableDesignerViewModel.PerformSave()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:26:23.417

肖恩，

这是 WebMatrix 2.0RC 代码中的一个已知错误。我找到了一个快速的解决方法，添加一行数据，然后添加您的列。

通常报告此类问题的地点是：webmatrix.uservoice.com

干杯，一晒

# android - 在 micromax funbook 中打开 pdf 文件时出现错误，因为文档为空（大小 0kb）

> ID：11719504
> 
> 赞同：0
> 
> 时间：2012-07-30T10:19:13.223
> 
> 标签：android

我正在尝试从服务器下载 pdf 并在 android micromax funbook 中显示它。

我收到错误，因为文档大小为空（0 KB）。打开 pdf 文件时...

我是 android 新手，建议我使用的编码是正确的还是不适合下载

```
 public static void DownloadFile(String fileURL, File directory) {
    try {

                    FileOutputStream f = new FileOutputStream(directory);
                    URL u = new URL(fileURL);
                    HttpURLConnection c = (HttpURLConnection) u.openConnection();
                    c.setRequestMethod("GET");
                    c.setDoOutput(true);
                    c.connect();
                    InputStream in = c.getInputStream();
                    byte[] buffer = new byte[1024];
                    int len1 = 0;
                    while ((len1 = in.read(buffer)) > 0) {
                            f.write(buffer, 0, len1);
                    }
                    f.close();
            } catch (Exception e) {
                    e.printStackTrace();
            }
    } 
```

以及显示pdf的代码。

```
 public void showPdf() {
            File file = new File(Environment.getExternalStorageDirectory()
                    + "/pdf/Read.pdf");
            PackageManager packageManager = getPackageManager();
            Intent testIntent = new Intent(Intent.ACTION_VIEW);
            testIntent.setType("application/pdf");
            List list = packageManager.queryIntentActivities(testIntent,
                    PackageManager.MATCH_DEFAULT_ONLY);
            Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            Uri uri = Uri.fromFile(file);
            intent.setDataAndType(uri, "application/pdf");
            startActivity(intent);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:49:58.620

您应该使用`c.openStream();`而不是`c.getinputstream();`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:28:20.837

使用[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)而不是编写自己的下载代码。

# html - 为 IE 优化网站

> ID：11719505
> 
> 赞同：1
> 
> 时间：2012-07-30T10:19:16.317
> 
> 标签：html, internet-explorer

我刚刚失去了一个小时试图为 IE 优化网站。我没有以正常的方式做到这一点，我对一些 div 使用了这样的技巧来解决它：

```
<!--[if !IE]><!-->
div1 for non IE
<!--<![endif]-->

<!--[if IE]>
div1 for IE
<![endif]--> 
```

现在它在 IE 中可以正常工作，但是可以使用这些解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:50:21.540

当我开发一个网站时，我总是清楚不同的浏览器对 HTML 的解释不同，并且他们的网站在 IE 中看起来可能与在 Chrome、Safari 等中略有不同，但整体外观、含义和功能都会起作用。另外我总是让他们知道我不是为 IE6 和更早版本构建的，网站将可见，但一些基本功能和布局原则将无法正常工作。（我还向他们展示了仍在使用 IE6 的用户百分比）。客户是否明确要求 <IE6 网站？额外收费！

这是您应该问的问题：您的网站在所有浏览器中看起来完全一样对您来说有多重要？

其余的，可以使用针对不同浏览器的不同样式表来优化跨浏览器兼容性。但是，我建议尽量减少样式表的数量，并尽可能多地使用适用于所有浏览器的 CSS 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:39:39.833

这是一个相当糟糕的解决方案，根据我的经验，在大多数情况下没有必要。您应该尝试使您的标记保持一致，并且不要针对不同的版本进行更改（除了可能像 IE6 的下拉列表的表格布局这样奇怪的情况）
但是，可以为不同的 IE 版本使用多个样式表来处理不同 IE 版本的错误。

```
<!--[if IE 6]>
    <link rel="stylesheet" type="text/css" href="ie6.css" />
<![endif]-->
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7.css">
<![endif]-->
<!--...-->
<!--[if !IE]><!-->
    <link rel="stylesheet" type="text/css" href="standard-style.css" />
<!--<![endif]--> 
```

从 IE-8 开始，您的 IE 特定样式表应该是非常新的行 - 幸运的是，从那个版本开始，它们非常符合标准。

# google-analytics - 谷歌分析在一个页面中有多个跟踪代码

> ID：11719510
> 
> 赞同：1
> 
> 时间：2012-07-30T10:19:45.270
> 
> 标签：google-analytics

我最近一直在研究谷歌分析，因为我需要在某种情况下弄清楚，我真的找不到任何令人满意的答案。

我讨厌某个网站。这个非常相同的网站响应 www.site1.com 和 site2.com。在两个单独的 Google Analytics（分析）帐户上。

开始处理这件事的人在主页上放了两个单独的分析代码片段。所以现在在我的分析面板上，我说 site1.com 有 100 名访问者，site2.com 有 120 名访问者

我的问题是，我是否认为通过这个，这个网站复杂地接收了 220 次访问？

第二个问题是，如果我选择将 site1.com 重定向到 site2.com，这对我在分析层面意味着什么？

我在不久的将来想做的是将两个域的数据合并为一个，同时仍然保留它们，因为我试图然后淡出 site1.com

如果有人能对此有所了解，我将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:33:17.853

Google 建议不要将 2 个片段放在同一页面上。但是你可以把新的放在同一个网站的另一个页面上。

# java - AspectJ：如何获得线程名称？

> ID：11719515
> 
> 赞同：1
> 
> 时间：2012-07-30T10:20:01.243
> 
> 标签：java, multithreading, logging, log4j, aspectj

我需要获取线程名称并将它们记录在 AspectJ 类中。此解决方案不起作用

```
`@Around("call(void method*())")  
public Object condition(ProceedingJoinPoint joinPoint) throws Throwable 
{   
    PropertyConfigurator.configure("log4j.properties");

    long before = System.currentTimeMillis();
    Object res = joinPoint.proceed();
    long diff = System.currentTimeMillis() - before;

    logger.info(Thread.currentThread().getName() + "\t" + diff ); 

    return res;
} 
```

` 因为结果是例如：

`main 717`

我的方面是`around`一些方法。如何获取执行方法的线程的名称（不是方面创建的线程）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:43:57.013

**1.**首先它**不是执行方法**的线程，而是**执行方法的线程。**

**2.**您可以在此处**识别****执行**该方法的线程：

**- 初始化线程。**

```
 Thread t = new Thread(MyClass); 
```

// MyClass 是分别扩展或实现 Thread 或 Runnable 的类。

**- 命名执行线程。**

```
 t.setName("T1"); 
```

**- 在方法内部获取正在执行它的线程。**

```
 public void go(){

     Thread.currentThread().getName();

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:26:09.260

```
**You can setName() method** 

  //get currently running thread object
                Thread currentThread = Thread.currentThread();
                System.out.println(currentThread);

                /*
                 * To set name of thread, use
                 * void setName(String threadName) method of
                 * Thread class.
                 */

                currentThread.setName("Set Thread Name Example");

public void run() {
  System.out.println(th.getName()+" is starting.....");
  System.out.println("Current thread name : "+
  Thread.currentThread().getName());
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:26:09.297

对我来说，当前的执行线程是当前线程的**主**线程。如果要转储所有线程，请使用以下命令：

```
 public static String getDumpFor(Thread thread) {
    StringBuilder st = new StringBuilder();
    if (thread.isAlive()) {
        StackTraceElement[] stackTrace = thread.getStackTrace();
        st.append(thread.toString()).append("\n")
                .append(String.format(" State - %s,", thread.getState()))
                .append(String.format(" Is daemon = %s,", thread.isDaemon()));
        for (StackTraceElement s : stackTrace)
            st.append("\tat ").append(s.getClassName()).append(".").append(s.getMethodName()).append("(").append(s.getFileName()).append(":").append(s.getLineNumber()).append(")")
                    .append("\n");
    } else {
        st.append(" No thread ");
    }
    return st.toString();
}

/**
 * print thread dump for each active thread over logger API.
 */
public static void dumpActiveThreads() {
    Map<Thread, StackTraceElement[]> stackTraces = Thread.getAllStackTraces();
    Set<Thread> keySet = stackTraces.keySet();
    System.out.println("\nThread dump begin:");
    for (Thread thread : keySet)
        dumpActiveThread(thread);
    System.out.println("\nThread dump end.");

} 
```

但是我仍然可能误解了“如何获得真正的线程名称？”这个问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:28:37.170

无论您在哪里创建线程，都以您想要的格式设置它们的名称，如下所示，否则它将给出默认分配的名称。

```
public static void main(String[] args) {

    System.out.println("Thread : "+Thread.currentThread().getName());
    Thread.currentThread().setName("My Main Thread");

    Thread t1=new Thread(new Runnable() {

        @Override
        public void run() {
            System.out.println("Thread : "+Thread.currentThread().getName());

        }
    });
    t1.setName("t1 thread");
    System.out.println("Thread : "+Thread.currentThread().getName());
    t1.start();
} 
```

**结果：**

```
Thread : main
Thread : My Main Thread
Thread : t1 thread 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T10:05:17.240

我没有尝试重现线程情况，但我想另一种方法可能对您的情况更有帮助：您可以将您的`around`建议与介绍（又名[类型间声明](http://www.eclipse.org/aspectj/doc/released/progguide/starting-aspectj.html#inter-type-declarations)）结合起来。声明一个成员，将您想要提取的线程信息存储在`Runnable`感兴趣的类中，或者可能在它们调用的类中，并在您的日志记录建议中访问该信息。

**编辑：**您可能希望使用 a`ThreadLocal`来存储信息。;-)

**编辑 2：**您是否尝试过使用`execution()`切入点而不是`call()`切入点来进入执行上下文并可能直接获取正在运行的线程而无需任何技巧？

# c++ - XGetOpt 的 C++ 解析参数问题

> ID：11719523
> 
> 赞同：0
> 
> 时间：2012-07-30T10:20:15.300
> 
> 标签：c++, visual-studio-2010, command-line, command-line-arguments, getopt

我是一名 C# 软件开发人员。我正在尝试使用 C++ 本机编码，并且我想从一些简单的 C++ 控制台应用程序开始。

作为 IDE，我使用的是 Visual Studio 2010。

我还使用了一个名为 Xgetopt 的 getopt 函数的 Win32 端口。

这是我的主要功能：

```
#include "stdAfx.h"
#include <iostream>
#include "XGetopt.h"

using namespace std;

int main(int argc, TCHAR *argv[])
{
    for (int i = 0; i < argc; i++)
    {
        printf(("argv[%d]=<%s>\n"), i, argv[i]);
    }

    bool add=false;
    bool subtract=false;
    bool multiply=false;
    bool divide=false;

    int val1 = 0;
    int val2 = 0;

    if(argc != 7)
    {
        cout << "\n Usage : <binary-name> -o <operation> -x <val1> -y <val2>\n";
        return 1;
    }

    int opt = 0;

    while ((opt = getopt(argc, argv, _T("o:x:y:"))) != EOF)
    {
        switch( opt ) 
        {
            case 'o':
                if(_tcscmp(_T("add"), optarg))
                {
                    add = true;
                }                                
                else if(_tcscmp(_T("subtract"), optarg))
                {
                    subtract = true;
                }                                
                else if(_tcscmp(_T("divide"), optarg))
                {
                    divide = true;
                }                                
                else if(_tcscmp(_T("multiply"), optarg))
                {
                    multiply = true;
                }  
                else
                {
                    //printf("\n Wrong option \n");
                    return 1;
                }
                break;

            case 'x':
                //printf("\n 'x' detected \n");
                val1 = _ttoi(optarg);
                //printf("\n val1 = [%d]\n",val1);
                break;
            case 'y':
                //printf("\n 'y' detected \n");
                val2 = _ttoi(optarg);
                //printf("\n val2 = [%d]\n",val2);
                break;
            case '?':
                //printf("\n '?' detected \n");
                //printf("\n Usage : <binary-name> -o <operation> -x <val1> -y <val2>\n");
                return 1;

            default :
                //printf("\n Wrong argument passed \n"); //shouldn't ideally get here
                return 1;
       }
    }
} 
```

这是 Xgetopt.cpp 文件：

```
#include "stdafx.h"
#include "XGetopt.h"

TCHAR   *optarg;        // global argument pointer
int     optind = 0;     // global argv index

int getopt(int argc, TCHAR *argv[], TCHAR *optstring)
{
    static TCHAR *next = NULL;
    if (optind == 0)
        next = NULL;

    optarg = NULL;

    if (next == NULL || *next == _T('\0'))
    {
        if (optind == 0)
            optind++;

        if (optind >= argc || argv[optind][0] != _T('-') || argv[optind][1] == _T('\0'))
        {
            optarg = NULL;
            if (optind < argc)
                optarg = argv[optind];
            return EOF;
        }

        if (_tcscmp(argv[optind], _T("--")) == 0)
        {
            optind++;
            optarg = NULL;
            if (optind < argc)
                optarg = argv[optind];
            return EOF;
        }

        next = argv[optind];
        next++;     // skip past -
        optind++;
    }

    TCHAR c = *next++;
    TCHAR *cp = _tcschr(optstring, c);

    if (cp == NULL || c == _T(':'))
        return _T('?');

    cp++;
    if (*cp == _T(':'))
    {
        if (*next != _T('\0'))
        {
            optarg = next;
            next = NULL;
        }
        else if (optind < argc)
        {
            optarg = argv[optind];
            optind++;
        }
        else
        {
            return _T('?');
        }
    }

    return c;
} 
```

这是 Xgetopt.h 源代码：

```
#ifndef XGETOPT_H
#define XGETOPT_H

extern int optind, opterr;
extern TCHAR *optarg;

int getopt(int argc, TCHAR *argv[], TCHAR *optstring);

#endif //XGETOPT_H 
```

这是我的命令行参数：

**Test.exe -o 添加 -x 4 -y 5**

我不知道为什么，但我无法进入 while 循环。

我已经调试过了，不知怎的，我总是输入这个 if 条件（在“Xgetopt.cpp”文件中）：

```
 if (optind >= argc || argv[optind][0] != _T('-') || argv[optind][1] == _T('\0'))
    {
        optarg = NULL;
        if (optind < argc)
            optarg = argv[optind];
        return EOF;
    } 
```

# codeigniter - CodeIgniter RESTful 和控制器

> ID：11719530
> 
> 赞同：1
> 
> 时间：2012-07-30T10:20:29.993
> 
> 标签：codeigniter

嗨，我是 CI 和 MVC 的新手，我正在尝试制作一个 RESTful 应用程序。

我已经阅读了很多（真的）并且我有以下规范

**RESTful**

读取（获取）

```
/object
/object.xml 
/object.json 
```

读取 ID (GET)

```
/object/id
/object/id.xml 
/object/id.json 
```

创建（发布）

```
/object
/object.xml 
/object.json 
```

更新 (PUT)

```
/object/id
/object/id.xml 
/object/id.json 
```

删除（删除）

```
/object/id
/object/id.xml 
/object/id.json 
```

基于上述当扩展名是.xml时返回xml，当.json返回json并且扩展名返回html时

当谈到 CI CRUD 我有以下网址

```
 /object
 /object/edit/id
 /odject/delete/id 
```

我的问题是

我是否需要 2 个控制器 1 个用于 RESTful，1 个用于 CI CRUD，或者我只能有 1 个，我怎样才能拥有多个响应（html、xml、json）。

任何帮助（阅读链接）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:50:11.847

看看： http: [//net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

你也可以用不同的方式来做这件事，但是我认为上面可能是最好的起点。

**更新**

另一种方式，可能是使用路线。

```
$routes['object\.(xml|http|json)'] = 'process_object/$1';
$routes['object/(:num)\.(xml|http|json)'] = 'process_object/$2/$1';
$routes['object/crud/\.(xml|http|json)'] = 'process_object/$1/null/true';
$routes['object/crud/(:num)\.(xml|http|json)'] = 'process_object/$2/$1/true'; 
```

然后你的`process_object`行动：

```
function process_object($Format = 'xml', $ID = null, $CRUD = false)
{
    $method = $this->_detect_method(); // see http://stackoverflow.com/questions/5540781/get-a-put-request-with-codeigniter
    $view = null;
    $data = array();
    switch($method)
    {
        case 'get' :
        {
            if($CRUD !== false)
                $view = 'CRUD/Get';
            if($ID === null)
            {
                // get a list
                $data['Objects'] = $this->my_model->Get();
            }
            else
            {
                $data['Objects'] = $this->my_model->GetById($ID);
            }
        }
        break;
        case 'put' :
        {
            if($CRUD !== false)
                $view = 'CRUD/Put';
            $this->my_model->Update($ID, $_POST);
        }
        break;
        case 'post' :
        {
            if($CRUD !== false)
                $view = 'CRUD/Post';
            $this->my_model->Insert($_POST);
        }
        break;
        case 'delete' :
        {
            if($CRUD !== false)
                $view = 'CRUD/Delete';
            $this->my_model->Delete($ID);
        }
        break;
    }
    if($view != null)
    {
        $this->load->view($view, $data);
    }
    else
    {
        switch(strtolower($Format))
        {
            case 'xml' :
            {
                // create and output XML based on $data.
                header('content-type: application/xml');
            }
            break;
            case 'json' :
            {
                // create and output JSON based on $data.
                header('content-type: application/json');
                echo json_encode($data);
            }
            break;
            case 'xml' :
            {
                // create and output HTML based on $data.
                header('content-type: text/html');
            }
            break;
        }
    }
} 
```

**注意：**无论如何我都没有测试过这个代码，所以它需要工作。

# css - Firefox中的水平搜索按钮对齐

> ID：11719533
> 
> 赞同：0
> 
> 时间：2012-07-30T10:20:38.203
> 
> 标签：css, forms, firefox, alignment

我被难住了——我已经尝试了所有方法，但无法弄清楚发生了什么……</p>

[我正在开发的http://energybubble.net/](http://energybubble.net/)这个站点底部的搜索表单在Opera、Chrome 和 Safari 中看起来与我期望的一样，但在 Firefox 中查看时，搜索按钮比搜索输入。（我还没有进行任何 IE 测试，但是当我到达那里时，我会越过那座桥！）救命！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:24:11.240

像这样更改css：

```
footer input {
 border: 2px solid #999;
 display: block;
 float: left;
 height: 40px;
} 
```

# c# - SmtpClient 发送没有认证

> ID：11719534
> 
> 赞同：14
> 
> 时间：2012-07-30T10:20:39.170
> 
> 标签：c#, asp.net, email, authentication, smtpclient

我正在从 Java 向我们的客户发送电子邮件。我们的 SMTP 没有任何身份验证。因此，我在 Java 中使用以下代码无需身份验证即可发送它：

```
Properties props = new Properties();
Session session;
props.put("mail.smtp.auth", "false");
session = Session.getInstance(props, null); 
```

此代码适用于从 Java 发送电子邮件。但我想使用 ASP.NET 和 C# 发送电子邮件。但我无法发送。为了使用 C# 发送它，我使用以下代码：

```
SmtpClient smtp = new SmtpClient();
smtp.Host = "<My smtp.Host>";
smtp.EnableSsl = false;
smtp.Credentials = CredentialCache.DefaultNetworkCredentials;
smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
smtp.Send(message); 
```

但它给了我以下错误：

> SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应是：5.7.1 不允许中继：`<Here email address of To>`

不认证如何发送？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-30T10:24:07.810

来自女士。`If the UseDefaultCredentials property is set to false and the Credentials property has not been set, then mail is sent to the server anonymously.`

# jquery - jquery/javascript 中的静态变量

> ID：11719537
> 
> 赞同：1
> 
> 时间：2012-07-30T10:21:05.050
> 
> 标签：jquery, variables, static

我想让我的 URL 成为一个 html 文件中的静态变量，并且我想从其他 html 文件访问该 URL。谁能建议我如何在 jquery 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:39:59.817

您需要确保 JS 文件包含在所有页面中 - 例如在模板头文件中，然后执行以下操作：

简易方法：

```
var myDomain = document.location.hostname; 
```

功能：

```
function getDomainName(url) {
    var domain = ((url||'')+'').match(/^http:\/\/[^/]+/);

    return domain ? domain[0] : null;
} 
```

您需要将 URL 作为字符串传递，如下所示：

```
function getDomainName('http://www.domain.com') {} 
```

这可能会有所帮助

[http://jquery-howto.blogspot.co.uk/2009/09/get-url-parameters-values-with-jquery.html](http://jquery-howto.blogspot.co.uk/2009/09/get-url-parameters-values-with-jquery.html)

# c++ - 如何使用 stringstream 分隔逗号分隔的字符串

> ID：11719538
> 
> 赞同：155
> 
> 时间：2012-07-30T10:21:16.957
> 
> 标签：c++, tokenize, stringstream

我有以下代码：

```
std::string str = "abc def,ghi";
std::stringstream ss(str);

string token;

while (ss >> token)
{
    printf("%s\n", token.c_str());
} 
```

输出是：

> abc
> def,ghi

所以`stringstream::>>`运算符可以用空格分隔字符串，但不能用逗号分隔。无论如何修改上面的代码，以便我可以获得以下结果？

> **输入**：“abc，def，ghi”
> 
> **输出**：
> abc
> def
> ghi

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2012-07-30T10:26:46.420

```
#include <iostream>
#include <sstream>

std::string input = "abc,def,ghi";
std::istringstream ss(input);
std::string token;

while(std::getline(ss, token, ',')) {
    std::cout << token << '\n';
} 
```

> abc
> def
> ghi

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-22T08:19:49.677

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std;
int main()
{
    std::string input = "abc,def,   ghi";
    std::istringstream ss(input);
    std::string token;
    size_t pos=-1;
    while(ss>>token) {
      while ((pos=token.rfind(',')) != std::string::npos) {
        token.erase(pos, 1);
      }
      std::cout << token << '\n';
    }
} 
```

# java - eclipse中的“源文件夹不是Java项目”错误

> ID：11719545
> 
> 赞同：44
> 
> 时间：2012-07-30T10:21:37.737
> 
> 标签：java, eclipse, maven

我正在尝试将 maven 项目导入 eclipse 4.2 版本。它没有正确导入项目。当我尝试在其中创建新调用时，它给了我错误“源文件夹不是 Java 项目”。即使 ctrl+鼠标单击也不起作用。我不明白这个问题。即使我右键单击项目并选择构建路径，它也显示没有可用的操作。任何人都面临同样的问题

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-30T10:23:27.877

在maven项目目录下试试

```
mvn eclipse:eclipse 
```

这可能会奏效。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-01-14T21:16:28.623

我遇到了同样的问题并通过将我的项目转换为[faceted form](https://eclipse.org/proposals/fproj/)来解决它。

右键单击您的项目 > *Properties* > *Project Facets* > *Convert to Faceted Form*，然后选择 Java。

![Java 项目方面](../Images/4034b51fdbf07e4471b126d898924235.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-04T23:45:56.783

我有同样的问题......但你只需要更新“源文件夹”以从弹出窗口中提到的任何内容中更正源“src/main/java”：

[ ![在 Eclipse 中更新源文件夹](../Images/4c871a4167fd418b79617ec56d0eba62.png)]

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-30T10:29:00.137

使用 将您的项目转换为 Eclipse 项目`mvn eclipse:eclipse`，或者安装 Maven Integration for Eclipse 插件，例如[m2eclipse](http://www.eclipse.org/m2e/)，并将项目作为 Maven 项目导入。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-20T14:01:02.273

我在稍微不同的上下文中遇到了同样的错误（Indigo with m2eclipse）：

我将一个多模块（1 个 jar 模块和 1 个 war 模块）maven 项目导入 Eclipse。一切正常（干净，安装好），直到我尝试向其中一个模块添加一个新类并得到“源文件夹不是 Java 项目”错误。

我通过打开父项目的属性并选择以下项目方面解决了这个问题：
Java
Dynamic Web Module

这解决了问题。我的猜测是，因为多模块项目的父项目有pom打包`<packaging>pom</packaging>`（ ; 如果包装是战争，它会知道它是一个静态或动态的 web 模块等）

这只是我的猜测，但修复对我有用，而且很有意义。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-10-17T19:38:37.023

对于那些已经看到 java 被选中的人，取消选中并再次选中它。选择应用以覆盖现有设置。终于成功了！

右键单击您的项目 > 属性 > 项目构面 > 转换为分面形式，然后选择 Java

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-03-03T06:58:26.687

右键单击您的`project > Maven > Update Project`

此步骤将添加您的项目，以便问题轻松解决。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-08-20T20:31:41.467

mvn eclipse:eclipse 将解决这个问题。转换为 Maven 项目。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-23T22:19:05.660

我遇到了这个错误，因为我尝试通过执行“Ctrl+N”创建一个新项目，在向导的输入标签上键入“Project”，然后按“Enter”直到它被创建。我通过键入**“Java Project”**而不是“Project”解决了这个问题。您还可以通过转到文件 > 新建 > Java 项目来创建 JAVA 项目。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-04-15T13:23:31.460

打开 cmd 并在项目的文件夹中运行以下命令-

```
mvn eclipse:eclipse 
```

这对我有用

# joomla - Joomla 1.7 呈现为 html

> ID：11719546
> 
> 赞同：0
> 
> 时间：2012-07-30T10:21:38.080
> 
> 标签：joomla, joomla1.7

我试图在前端登录失败时显示一条错误消息。

我之前已经添加`<jdoc:include type="message">`到我的模板中`<jdoc:include type="component" />`，但它呈现为 HTML。

IE。

```
 <jdoc:include type="message">
      <div class="blog-featured">
      <div class="items-row cols-1 row-0">
      <div class="item column-1">

      ... etc. etc.

   </jdoc:include> 
```

我怎样才能让它工作？

谢谢，

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:03:51.353

没有必要关闭`</jdoc:include>`

只需使用它来回显消息...

```
<jdoc:include type="message" /> 
```

# c++ - 从队列中访问作为数组一部分的元素（C++）

> ID：11719557
> 
> 赞同：0
> 
> 时间：2012-07-30T10:22:12.303
> 
> 标签：c++, arrays, queue

我有一个可能非常简单的问题，但我看不到解决方案。

首先，我有一个名为 Seed 的结构，代码如下：

```
struct Seed
{
    int x, y;
    int i, j;
    int Type;
}; 
```

然后我分别创建一个二维数组和一个队列，如下所示：

```
Seed Grid[ROW][COL];
std::queue<Seed> SeedsToUpdate; 
```

我用循环填充网格：

```
void CApp::LoopSeeds(int function, int Type)
{
    for(int i = 0;i < ROW;i++)
    {
        for(int j = 0;j < COL;j++)
        {
            switch (function)
            {
                case SET:
                    SetSeed(i, j, Type);
                    break;
                case DRAW:
                    DrawSeed(i,j);
                    break;
                case GROW:
                    GrowSeed(i,j,Type);
            }
        }
    }
} 
```

然后，我将数组中的单个种子设置为其他类型，例如`GREEN`. `GREEN`然后，我通过遍历数组并用所有具有以下类型的数组元素填充队列来填充队列：

```
void CApp::BuildQueue()
{
    for(int i = 0;i < ROW;i++)
    {
        for(int j = 0;j < COL;j++)
        {
            if (Grid[i][j].Type != SEED_EMPTY)
            {
                SeedsToUpdate.push(Grid[i][j]);
            }
        }
    }
} 
```

在这一点上，一切都很好（我认为）。但是，我想做的是以下内容：对于队列中的每个种子，编辑数组中的相邻单元格，例如 `Grid[i+1][j].Type = GREEN;`

这是我的问题：给定上面的代码，我该怎么做？

谢谢你的耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:52:44.087

它实际上非常简单。在你的内部循环中，做一些事情

```
if (i+1 < ROW) {
   Grid[i+1][j].Type = GREEN;
   SeedsToUpdate.push(Grid[i+1][j]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:51:50.950

在 C++11 中

```
for(const Seed& seed: SeedsToUpdate){
    if (seed.i + 1 < ROW){
        Grid[seed.i+1][seed.j].type = seed.type
    }
} 
```

C++03 与 Boost

```
BOOST_FOREACH(const Seed& seed, SeedsToUpdate){
    if (seed.i + 1 < ROW){
        Grid[seed.i+1][seed.j].type = seed.type
    }
} 
```

在 C++03 中（没有 Boost）

```
for(std::queue<Seed>::const_iter it = SeedsToUpdate.begin(); it != SeedsToUpdate.end(); ++it) {
    const Seed& seed = *it;
    if (seed.i + 1 < ROW){
        Grid[seed.i+1][seed.j].type = seed.type
    }
} 
```

此外，您应该使用 std::array/boost::array 而不是原始数组。

# javascript - Facebook 应用程序发布到 Facebook 页面

> ID：11719559
> 
> 赞同：0
> 
> 时间：2012-07-30T10:22:16.717
> 
> 标签：javascript, facebook, api, sdk

有人可以提供有关如何设置链接到业务页面以允许从外部网站发布的 Facebook 应用程序的最新指南吗？

我已经使用 Facebook 登录应用程序创建了一个网站，并且我正在使用 JavaScript SDK 将内容从我们的网站发布到我们的业务页面。

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
<title>My Feed Dialog Page</title>
</head>
<body>
<div id='fb-root'></div>
<script src='http://connect.facebook.net/en_US/all.js'></script>
<p><a onclick='postToFeed(); return false;'>Post to Feed</a></p>
<p id='msg'></p>

<script> 
  FB.init({appId: "OURAPPID", status: true, cookie: true, frictionlessRequests: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      link: 'http://www.ourdoamin.com/test.jsp',
      picture: 'http://www.ourdoamin.com/image.jpg',
      name: 'Test Article',
      caption: 'Here We GO',
      description: 'This is a test.'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  }

</script> 
```

当我单击 Post to Feed 链接时，我会看到一个对话框，在 Via 字段中正确识别了该应用程序，如果我输入状态并单击 Share，我会收到一个 Post ID。

然而，尽管应用程序被正确引用并接收到一个帖子 ID，但帖子实际上出现在当前登录的用户帐户的墙上，而不是业务页面上。

我宁愿根本不登录，只是使用应用程序直接发布到业务页面，而不是用户个人帐户。

有人可以告诉我哪里出错以及如何纠正这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:05:47.237

您可以使用 page 直接发布到页面`access_token`。为此，您需要获得`manage_pages`许可。请求许可后，您可以`access_token`通过调用`/me/accounts`并记下您要发布到的页面的正确令牌来获取该页面。

在您的 API 调用中使用它`access_token`以管理员/页面的身份发布到页面。

# c# - 正则表达式缺少字符

> ID：11719562
> 
> 赞同：0
> 
> 时间：2012-07-30T10:22:25.690
> 
> 标签：c#, regex

下面的代码在正则表达式与字符串匹配时有效。如果其中一个字符不存在，例如 MONEY-STAT 丢失怎么办？

```
string s = "MONEY-ID123456:MONEY-STAT43:MONEY-PAYetr-1232832938";
Regex regex =
    new Regex(@"MONEY-ID(?<moneyId>.*?)\:MONEY-STAT(?<moneyStat>.*?)\:MONEY-PAYetr-(?<moneyPaetr>.*?)$");
Match match = regex.Match(s);
if (match.Success)
{
    Console.WriteLine("Money ID: " + match.Groups["moneyId"].Value);

    Console.WriteLine("Money Stat: " + match.Groups["moneyStat"].Value);
    Console.WriteLine("Money Paetr: " + match.Groups["moneyPaetr"].Value);

}

Console.WriteLine("hit <enter>");
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:35:34.453

我`MONEY-STAT`改为`(?:MONEY-STAT)?`

```
MONEY-ID(?<moneyId>.*?)\:(?:MONEY-STAT)?(?<moneyStat>.*?)\:MONEY-PAYetr-(?<moneyPaetr>.*?)$ 
```

解释：

```
(?: subexpression)        Defines a noncapturing group. 
?                         Matches the previous element zero or one time. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:37:12.747

也许我误解了你的问题..但这适合你吗？

```
(MONEY-ID(?<moneyId>.*?)\:)?(MONEY-STAT(?<moneyStat>.*?)\:)?(MONEY-PAYetr-)?(?<moneyPaetr>.*?)$ 
```

它基本上使每个标记都是可选的。它还包括冒号，因为这显然是某种分隔符。

**免责声明** 我在正则表达式方面很糟糕..但这在我的测试中有效：http: [//ideone.com/0pdFk](http://ideone.com/0pdFk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:41:00.843

你可以试试这个：

```
(MONEY-ID[\d]+|(:?)MONEY-STAT[\d]+|:MONEY-PAYetr-[\d]+) 
```

这将匹配如下模式：

> MONEY-ID123456:MONEY-STAT43:MONEY-PAYetr-1232832938
> 
> MONEY-STAT43:MONEY-PAYetr-1232832938
> 
> MONEY-ID123456：MONEY-PAYetr-1232832938

# ruby-on-rails - 在每个循环中仅显示活动（布尔）项目

> ID：11719564
> 
> 赞同：0
> 
> 时间：2012-07-30T10:22:33.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我的循环。在我的地区页面上，我显示了所有有活动、事件等的城市

```
- @cities.each do |city|
    %li
     %h4.h6.icon_mappoint
      = link_to city.name, region_city_path(@region, city)
       %ul
         - city.events.each do |thing|
         %li
          = link_to event.name, region_city_event_path(@region, city, event)
       %ul
         - city.activities.each do |activity|
         %li
         = link_to activity.name, region_city_activity_path(@region, city, activity) 
```

每个事件和活动模型在 DB 中都有一个名为 active 的属性。（布尔值）。并且只想在视图中显示活动的事件和活动。

我的控制器现在看起来像这样。

```
def show
    @region = Region.find(params[:id])
    @cities = @region.cities
end 
```

楷模

```
region has_many cities 
city has_many events, activities 
```

如何仅显示活动事件，每个循环中的活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:27:47.480

而不是`city.events.each`使用`city.events.select { |x| x.active }.each`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:33:37.637

如果您将范围添加到您的`Event`和`Activity`模型

```
scope :active, where(:active => true) 
```

你可以写你的观点，比如

```
city.events.active.each do |thing| 
```

和

```
city.activities.active.each do |activity| 
```

# android - 如何在布局中包含空白视图

> ID：11719565
> 
> 赞同：0
> 
> 时间：2012-07-30T10:22:33.380
> 
> 标签：android, android-layout, layout

我设计了一个登录视图。我想插入一个放置在父视图中心的片段布局。我硬编码输入一些片段布局来产生这种效果。但是，是否存在更好的方法来做到这一点。

这是我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<FrameLayout 
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1">
</FrameLayout>

<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="2"
    android:orientation="horizontal">

    <FrameLayout 
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="1">
    </FrameLayout>

    <FrameLayout 
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="2">
    </FrameLayout>

    <FrameLayout
            android:id="@+id/login_frame" 
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="1">
    </FrameLayout>

</LinearLayout>

<FrameLayout 
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1">
</FrameLayout>

</LinearLayout> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:30:56.483

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"    
android:layout_width="fill_parent"
android:layout_height="fill_parent"       
android:gravity="center_vertical">

<TableRow
    android:id="@+id/row1"
    android:layout_marginTop="25dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/txtUserName"
        android:layout_marginLeft="50dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="2dp"                
        android:text="Username"
        android:textSize="16sp" />
</TableRow>

<TableRow
    android:id="@+id/row2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <EditText
        android:inputType="text"
        android:id="@+id/editUsername"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="2"
        android:singleLine="true"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="2dip"
        android:layout_marginRight="50dp"   
        android:padding="10dp"/>
</TableRow>
<TableRow
    android:id="@+id/row3"
    android:layout_marginTop="5dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/txtPassword"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="2dp"
        android:layout_marginLeft="50dp"
        android:text="password"               
        android:textSize="16sp" />
</TableRow> 
<TableRow
    android:id="@+id/row4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">   
    <EditText
        android:inputType="textPassword"
        android:id="@+id/editPassword"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="2"      
        android:layout_marginTop="2dip"
        android:layout_marginRight="50dp"   
        android:layout_marginLeft="50dp"        
        android:padding="10dp"
        android:password="true"                
        android:singleLine="true"/>
</TableRow>
<TableRow
    android:id="@+id/row5"          
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <CheckBox
        android:id="@+id/chkRememberPassword"
        android:layout_width="wrap_content"      
        android:layout_height="wrap_content"            
        android:layout_marginLeft="52dp"
        android:padding="10dp" 
        android:textSize="15sp"
        android:text="rememberme"
        />
</TableRow>
<TableRow
    android:id="@+id/row6"            
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/login"
        android:layout_width="100dp"
        android:layout_height="35dp"
        android:text="login"
        android:textStyle="bold"
        android:layout_marginLeft="102dp"/>
</TableRow> 
```

# javascript - 单击跨度时javascript更改div html

> ID：11719568
> 
> 赞同：0
> 
> 时间：2012-07-30T10:22:42.303
> 
> 标签：javascript, onclick, html

好的，我有一个小问题。

我有以下

```
<div><span class="spanright" onclick"">Update</span><label class="myinfo"><b>Business information:</b></label></div> 
```

我想要做的是当用户单击跨度时，它会在标签后更改 html，并添加一个输入框和提交按钮。

我想我需要做一个`this.document`但不确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:27:58.243

我添加了一个表单来保存输入

JavaScript：

```
function showInput()
{
    document.getElementById('container').innerHTML += '<input type="text"/><input type="submit"/>';
} 
```

HTML：

```
<div id="container">
    <span class="spanright" onclick"showInput()">Update</span>
    <label class="myinfo"><b>Business information:</b></label>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:38:12.950

嗨，希望这可以让您对注册活动时的操作有一个小小的了解。StackOverflow 是关于你学习如何做某事的，所以我们不会为你编写脚本，我们只是试图为你指明正确的方向。

[http://jsfiddle.net/WKWFZ/2/](http://jsfiddle.net/WKWFZ/2/)

如果可能的话，我建议您按照示例中的方式导入 jQuery 库。它使 javascript 的世界变得更加容易！

要查找的文档：

[http://api.jquery.com/insertAfter/](http://api.jquery.com/insertAfter/)

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

查找一些 jQuery 教程！那里有很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:47:29.903

Summoner 的回答是正确的，但我更喜欢使用 jquery（它几乎加载在我使用的每个页面上）：

HTML：

```
<div id="container">
    <span class="spanright">Update</span>
    <label class="container"><b>Business information:</b></label>
</div>​ 
```

Javascript：

```
​$(".spanright").click(function(){
    $("#container").append('<br /><input type="text"/><input type="submit"/>');
    $(".spanright").unbind('click');
})​​;​ 
```

这样，click 事件将工作一次，因为它可能是您想要的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T10:30:21.880

在 jquery 风格中试试这个——

```
$(document).ready(function(){
    $(".spanright").click(function(){
    $(".myinfo").css("color","red");

    });
}); 
```

检查小提琴——

[http://jsfiddle.net/swapnesh/yHRND/](http://jsfiddle.net/swapnesh/yHRND/)

# networking - 如何模拟不同的 NAT 行为

> ID：11719572
> 
> 赞同：23
> 
> 时间：2012-07-30T10:22:51.307
> 
> 标签：networking, network-programming, udp, nat, hole-punching

我正在使用 UDP 和 UDT 进行打孔。对于最终测试，我需要在不同的 NAT 类型（对称、全锥、受限锥、端口受限 NAT）上测试应用程序。

有什么方法可以模拟这些吗？我在这里期望的是某种虚拟框设置。我可以将PC用作路由器，以便我可以根据需要进行配置吗？

一般来说，我们如何针对不同的网络条件测试应用程序？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-15T10:10:51.273

以防万一其他人想要这样做，[这个](https://wiki.asterisk.org/wiki/display/TOP/NAT+Traversal+Testing)网站解释了如何使用 IPTables 设置不同的 NAT 环境。

## 更新

自从我这样做以来已经有几年了，鉴于链接放在登录后面，并且倒带也放在登录后面，我从后面浏览了我的笔记，发现了以下内容。请注意，这些未经测试。

## 全锥 NAT；

```
iptables -t nat -A POSTROUTING -o eth1 -j SNAT --to-source "public IP"
iptables -t nat -A PREROUTING -i eth1 -j DNAT --to-destination "private IP" 
```

## 受限锥形 NAT；

```
iptables -t nat -A POSTROUTING -o eth1 -p udp -j SNAT --to-source "public IP"
iptables -t nat -A PREROUTING -i eth1 -p udp -j DNAT --to-destination "private IP"
iptables -A INPUT -i eth1 -p udp -m state --state ESTABLISHED,RELATED -j ACCEPT
iptables -A INPUT -i eth1 -p udp -m state --state NEW -j DROP 
```

## 端口受限锥形 NAT；

```
iptables -t nat -A POSTROUTING -o eth0 -j SNAT --to-source "public IP" 
```

## 对称 NAT；

```
echo "1" >/proc/sys/net/ipv4/ip_forward
iptables --flush
iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE --random
iptables -A FORWARD -i eth1 -o eth0 -m state --state RELATED,ESTABLISHED -j ACCEPT
iptables -A FORWARD -i eth0 -o eth1 -j ACCEPT 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-16T15:18:33.627

我认为您已经回答了自己的问题，请使用 VirtualBox（或 VMware、Xen 等）。

通过设置虚拟机的迷你局域网，我已经成功地完成了这件事。如果您正在寻找在 VM 中充当路由器的软件，我会从[http://www.pfsense.org/](http://www.pfsense.org/)开始，看看是否满足您的需求。它是一个 FreeBSD 发行版，专为易于安装的路由器/防火墙而设计，具有漂亮的 Web 管理 UI 和所有这些。

如果 pfsense 不能满足您的需求，还有很多其他 linux/bsd 发行版专为这类东西量身定制，您可以安装在 VM 中：[http](http://en.wikipedia.org/wiki/List_of_router_or_firewall_distributions) ://en.wikipedia.org/wiki/List_of_router_or_firewall_distributions一个好的列表:)（我也听说过关于 OpenWRT 和 ClearOS 的好消息。）

# clojure - 使用 Clojure 和 apache.commons.MultiPartEmail：邮件通过，但没有附件

> ID：11719574
> 
> 赞同：1
> 
> 时间：2012-07-30T10:23:15.877
> 
> 标签：clojure, email-attachments

我正在尝试使用以下代码从 Clojure 发送电子邮件：

发送电子邮件的辅助函数：

```
(defn- send [recipient from subject msg host content-type & attachments]
  (let [att-ds (map (fn [at] {:ds (ByteArrayDataSource. (:source at)
                                                        (:type at))
                              :name (:name at)
                              :description (:description at)})
                    attachments)
        mpmail (MultiPartEmail.)]
    (doto mpmail
      (.setHostName host)
      (.setFrom from)
      (.setSubject subject)
      (.setContent msg content-type)
      (.setCharset "utf-8"))
    (.addTo mpmail recipient)
    (doseq [ds att-ds]
      (.attach mpmail (:ds ds) (:name ds) (:description ds)))
    (.send mpmail))) 
```

用法：

```
(send "sender@my.domain" 
      "recipient@my.domain" 
      "SUBJECT"
      "MSG"
      "my.smtp.server"
      "text/plain"
      {:source (.getBytes "Attachment") 
      :type "text/plain"
      :name "test.txt"
      :description "test"}) 
```

从 REPL（或我的应用程序）运行上述内容会导致接收者@my.domain 收到主题为“SUBJECT”和正文“MSG”但没有任何附件痕迹的电子邮件。任何地方都不会引发异常。

我已经用两个不同的 smtp 服务器试过了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:06:05.733

尝试替换`(.setContent msg)`为`(.setMsg msg)`. 可能是当您调用`setContent`它时认为您手动设置内容并忽略以下`attach`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T18:33:38.337

尝试使用我的代码片段[http://middlesphere-1.blogspot.ru/2014/11/clojure-how-to-send-mail-with-attachment.html](http://middlesphere-1.blogspot.ru/2014/11/clojure-how-to-send-mail-with-attachment.html)

附件文件名可以是 unicode。

# javascript - 转义 javascript 变量双引号

> ID：11719575
> 
> 赞同：0
> 
> 时间：2012-07-30T10:23:16.960
> 
> 标签：javascript, escaping

我正在使用 Ajax 调用从数据库中获取一些变量数据。我存储在数据库中的一些数据包含双引号 (")。

当我尝试显示变量时：

```
value="'+ucontent+'" 
```

绳子在中间被切断（当然）

我曾尝试使用 escape() 但我得到一个不可读的结果 - 与 %4%2 等的东西......

我怎样才能转义变量中的双引号并仍然保持可读字符串...顺便说一句 - 我使用的是 UTF8 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:31:14.513

取决于您使用的服务器端的语言。

如果是 php，则使用`json_encode`对响应字符串进行编码。

如果是 ruby​​(rails)，则使用`escape_javascript`转义响应字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:41:56.853

```
decodeURIComponent() 
```

可能会有所帮助

转义实际上是用十六进制转义序列替换一些字符。这就是为什么你得到像 %4%2 这样的不可读字符串的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:27:55.170

`\"`如果您不使用编码器，则可以使用。看到[这个](https://stackoverflow.com/questions/2732409/how-can-i-put-double-quotes-inside-a-string-within-an-ajax-json-response-from-ph)。

# xpath - 根据上一个和下一个兄弟姐妹提取文本

> ID：11719583
> 
> 赞同：2
> 
> 时间：2012-07-30T10:23:51.823
> 
> 标签：xpath, web-scraping

我正在尝试从以下结构中提取数据：

```
<span>Heading</span>
<br />
<br />
<span>Heading1</span>
<br />
data#1
<br />
<br />
<span>Heading4</span><br />
&acirc;&euro;&cent; data#4.1
<br />
&acirc;&euro;&cent; data#4.2
<br />
&acirc;&euro;&cent; data#4.3
<br />
&acirc;&euro;&cent; data#4.4
<br />
<br />
<span>Heading5</span>
<br />
&acirc;&euro;&cent; data#5.1
<br />
&acirc;&euro;&cent; data#5.2
<br />
&acirc;&euro;&cent; data#5.3
<br />
<br /> 
```

我可以使用以下方法提取数据#1：

`span[text()='Heading1']/following-sibling::br[1]/following::text()[1]`

但我不知道如何提取 Heading4 下的数据。我需要提取`data#4.1`, `data#4.2`, `data#4.3`& `data#4.4`。点数不是固定的，可以变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:39:27.137

**这个 XPath 1.0 表达式准确地选择了想要的节点**：

```
 /*/span[.='Heading4']
        /following-sibling::text()
           [count(.|/*/span[.='Heading5']/preceding-sibling::text())
           =
            count(/*/span[.='Heading5']/preceding-sibling::text())
            ]
                  [normalize-space()] 
```

它是由著名的 Kayessian 方法产生的，用于两个节点集的交集`$ns1`和`$ns2`：

```
$ns1[count(.|$ns2) = count($ns2)] 
```

如果在 Kayessian 公式中我们替换为：我们得到上面的第一个表达式`$ns1`：

```
 /*/span[.='Heading4']/following-sibling::text() 
```

并`$ns2`与：

```
 /*/span[.='Heading5']/preceding-sibling::text() 
```

最后一个谓词`[normalize-space()]`从这个交集中过滤掉只有空格的文本节点。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:template match="/">
     <xsl:copy-of select=
      "/*/span[.='Heading4']
            /following-sibling::text()
               [count(.|/*/span[.='Heading5']/preceding-sibling::text())
               =
                count(/*/span[.='Heading5']/preceding-sibling::text())
                ]
                [normalize-space()]
      "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档**时（替换了实体——因为我们没有定义它们可用的 DTD，这在这里不是必需的）：

```
<html>
    <span>Heading</span>
    <br />
    <br />
    <span>Heading1</span>
    <br /> data#1 
    <br />
    <br />
    <span>Heading4</span>
    <br /> #acirc;#euro;#cent; data#4.1 
    <br /> #acirc;#euro;#cent; data#4.2 
    <br /> #acirc;#euro;#cent; data#4.3 
    <br /> #acirc;#euro;#cent; data#4.4 
    <br />
    <br />
    <span>Heading5</span>
    <br /> #acirc;#euro;#cent; data#5.1 
    <br /> #acirc;#euro;#cent; data#5.2 
    <br /> #acirc;#euro;#cent; data#5.3 
    <br />
    <br />
</html> 
```

**计算 Xpath 表达式，并将计算结果复制到输出：**

```
 #acirc;#euro;#cent; data#4.1 
     #acirc;#euro;#cent; data#4.2 
     #acirc;#euro;#cent; data#4.3 
     #acirc;#euro;#cent; data#4.4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:23:47.837

您可以使用

```
span[text()='Heading4']/following-sibling::text()[. != ""] 
```

获取 Heading4 之后的所有文本，然后使用。

```
span[text()='Heading5']/following-sibling::text()[. != ""] 
```

获取 Heading5 之后不需要的文本，然后从主程序中的第一个结果集减去第二个结果集。

如果你有 XPath 2，你可以直接用`except`操作符排除它们：

```
span[text()='Heading4']/following-sibling::text()[. != ""] except span[text()='Heading5']/following::text()[. != ""] 
```

你只能得到`data`没有`&acirc;&euro;&cent;`before 的`substring(.,5)`函数，所以最终的 XPath 2 表达式变为：

```
(span[text()='Heading4']/following-sibling::text()[. != ""] except span[text()='Heading5']/following::text()[. != ""])/substring(., 5) 
```

而且由于您没有明确说明您的语言要求，您可能还想查看我[的基于 pascal 的查询语言](http://videlibri.sourceforge.net/cgi-bin/htmlparserExampleCGI)，因为它是 imho 方式要好得多：

```
 <span>Heading4</span><br />
 <t:loop>
    {filter(text(), "data.*")}<br/>
 </t:loop>
 <br/>
 <span>Heading5</span><br /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:02:25.690

[在此处](https://stackoverflow.com/questions/1489326/xpath-get-elements-that-are-between-2-elements)的答案的帮助下，我终于最终使用了它

`//text()[preceding-sibling::span[1] = 'Heading4']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:01:43.150

我会用

```
span[text()='Heading4']/following-sibling::text() 
```

然后分别解析结果文本。

# iphone - 确定 ivar 是否为 BOOL

> ID：11719589
> 
> 赞同：6
> 
> 时间：2012-07-30T10:24:11.793
> 
> 标签：iphone, objective-c, ios

我有一个方法，我正在传递一个变量的参数列表。我`isKindOfClass`为字符串等做。但是如何确定 ivar 是否为 BOOL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:34:10.220

不，不是在运行时。BOOL 是原始类型，而不是类。实际上 BOOL 是一个有符号的字符。

```
typedef signed char     BOOL; 
// BOOL is explicitly signed so @encode(BOOL) == "c" rather than "C" 
// even if -funsigned-char is used.
#define OBJC_BOOL_DEFINED

#define YES             (BOOL)1
#define NO              (BOOL)0 
```

作为一种解决方法，您可以将 BOOL 包装在 NSNumber 中以从中生成 Obj-C 对象。然后您可以进行运行时检查：

```
NSNumber * n = [NSNumber numberWithBool:YES]; // @(YES) in Xcode 4.4 and above
if (strcmp([n objCType], @encode(BOOL)) == 0) {
    NSLog(@"this is a bool");
} else if (strcmp([n objCType], @encode(int)) == 0) {
    NSLog(@"this is an int");
} 
```

编辑：此代码可能不适用于 BOOL，因为它在内部编码为 char 。请参阅此答案以获取替代解决方案：[https ://stackoverflow.com/a/7748117/550177](https://stackoverflow.com/a/7748117/550177)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:28:16.073

键值编码可能可以帮助您解决这个问题。有一些原语（例如`valueForKey:`）能够检查对象的 ivars 并执行内置函数的转换。从这个意义上说，您可以将*键*（ivar 名称作为字符串）传递给函数，并让系统执行`NSNumber`类型为 C 原语的转换。当然，这会引入一些开销。

您也可以使用 objc 运行时来解决此问题，但 KVC 可能会做您需要的事情，而无需求助于使用 objc 运行时（您自己）。

如果要确定`va_list` *参数*是否为 a `BOOL`，则需要指定它（这就是需要格式说明符的原因）。在某些情况下，您看到的替代方案是`-[NSArray initWithObjects:...]`——在这种情况下，初始化程序需要每个参数的 objc 对象，以及零终止；您需要进行`BOOL`-> 对象提升。

备选方案：C++ 可以为您提供所有这些类型的信息（例如，使用模板）。

# php - 如何在 php 中按降序对 id 和 sub_id 进行排序

> ID：11719593
> 
> 赞同：-2
> 
> 时间：2012-07-30T10:24:22.153
> 
> 标签：php, sql, sorting

> **可能重复：**
> [如何按降序对 id 和 sub_id 进行排序？](https://stackoverflow.com/questions/11718434/how-can-i-sort-id-and-sub-id-in-descending-order)

我有一个名为`gallery`.

```
id    sub_id    name
1       10      jack
2       10      jack
3       11      rom
4       11      rom
5       12       win
6       12       win
7       13      shivam
8       13      shivam 
```

有 4 个不同的 sub_id，但都有不同的 id。所以我只想从每个 sub_id 中按降序获取一个 id，如下所示：

```
id     sub_id      name
8        13        shivam
6        12        win
4        11         rom
2        10        jack 
```

我使用了这个查询，但它对我没有帮助。

```
$sql="SELECT MAX(id), sub_id, name FROM gallery GROUP BY sub_id ORDER BY id DESC LIMIT 4"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:53:32.537

您应该选择每个组的最大“sub_id”以获得所需的结果，如果“id”已经订购，则无需放置订单语句。所以查询必须如下所示：

```
SELECT MAX(  `id` ) ,  `sub_id` ,  `name` 
FROM  `gallary` 
GROUP BY  `sub_id` 
```

对于限制，您可以轻松添加它。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:36:15.383

您可以通过以下查询尝试

```
$sql="SELECT MAX(id), sub_id, sub_name FROM gallery GROUP BY sub_id ORDER BY id DESC LIMIT 4"; 
```

# javascript - Javascript - 将 XML 加载到多维数组中

> ID：11719596
> 
> 赞同：0
> 
> 时间：2012-07-30T10:24:32.270
> 
> 标签：javascript, xml, html

我一直在用 HTML5 和 javascript 创建游戏，但遇到了一个问题。

游戏使用瓦片系统来加载地图。目前我的地图保存在一个多维数组中，如下所示：

```
var map = [ [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 3, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]] 
```

我想通过使用 XML 文件来更新数组来添加移动级别。

我的 XML 文件当前如下所示：

```
<TileMaps>
<Level level="1">
<map>[  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    [1, 3, 0, 0, 0, 0, 2, 4, 0, 1],
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]
</map>
</Level>
<Level level="2">
<map>[  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    [1, 3, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
    [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
    [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
    [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
    [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]
</map>
</Level>
</TileMaps> 
```

如果有人可以帮助我将 level="1" 加载到我的地图变量中，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:09:26.977

不要使用xml，使用json。这是一个关于它的链接，[http://www.json.org/](http://www.json.org/)。

虽然不*完全*准确，但将 json 视为 javascript 的子集是相当安全的。

例如：

```
{
    "levels":[ 
        [    
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 3, 0, 0, 0, 0, 2, 4, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ],

        [
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 3, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 2, 0, 4, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ]
    ]
} 
```

使用[http://jsonlint.org](http://jsonlint.org)来验证 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:53:53.820

对于任何想知道的人，我使用以下代码解决了这个问题：

```
req=new XMLHttpRequest();
req.open("GET","my.xml",false);
req.send();
xmlDoc = req.responseXML;
map = JSON.parse(xmlDoc.getElementsByTagName('map')[0].firstChild.nodeValue); 
```

# jquery - jQuery Cycle - 在使用淡入淡出效果动画到下一张幻灯片之前完成“之前”功能

> ID：11719597
> 
> 赞同：0
> 
> 时间：2012-07-30T10:24:35.937
> 
> 标签：jquery

我正在使用 jQuery Cycle 插件作为滑块 - 我需要在每张幻灯片中制作一些淡入淡出效果。
有没有人有这方面的经验？不幸的是，我在创建 JavaScript 方面毫无用处，而且我无法找到任何出色的支持文档。
[这是一个示例](http://jsfiddle.net/qnuj4/6/)
，我的功能代码如下。

```
$('#yslider ul').cycle({
           fx:     'fade',
           speed:   'slow',
           timeout: 1000,
           before: first,
           after:    second,
           pager:    '#number',
           pause: 1
        });
        function first(){
            $('.left').fadeOut(800).delay(100).animate({opactiy: 0.5 });
            $('.middle').delay(800).fadeOut(1300).animate({opactiy: 1.0 });
            $('.right').delay(2500).animate({right:'-1980px'}, 700);
        }
        function second(){
            $('.left').fadeIn(1000).delay(300).animate({opactiy: 1.5 });
            $('.middle').fadeIn(1500).delay(500).animate({opactiy: 2.5 });
            $('.right').delay(2500).animate({right: '-26px'}, 700);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:04:06.063

所有你需要的是调用之前：循环选项.. onBefore 初始化你的动画并放置一些延迟，然后完成你的动画。我让 eq() 仅执行当前的“li”，因为您对所有滑动选项卡使用相同的类。

```
$(document).ready(function(){
    $('#yslider ul').cycle({
       fx:     'fade',
       speed:   'slow',
       timeout: 10000,
       before: pehla,
       pager:   '#number',
       pause: 1
    });
});
var sliderSize = $('#yslider ul li').size();
function pehla(){
    if(i == sliderSize)
        i = 0;
    $('.left:eq('+i+')').fadeIn(800, function(){
        $('.middle:eq('+i+')').fadeIn(1300, function(){
            $('.right:eq('+i+')').animate({right:'0px'}, 700, function(){
                $('.right:eq('+i+')').delay(4400).animate({right: '-1980px'}, 200, function(){
                    $('.middle:eq('+i+')').fadeOut(1300, function(){
                        $('.left:eq('+i+')').fadeOut(800);
                        i++;
                    });
                });
            });
        });
    });
} 
```

您还需要编辑一些 CSS

```
.left{left:0;display:none;}
.middle{ left: 13px;top: -75px;display:none;}
.right{right:-1980px;} 
```

根据您的整体动画持续时间设置超时 + 每张幻灯片的延迟在这里我设置 10000 毫秒 = 开始动画（800 + 1300 + 700）+ 延迟（4400）+ 最终动画（900+1300+800）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:16:09.700

您将拥有 `currentSlideElement`并`nextSlideElement`作为参数传递给转换回调函数，这将使您能够执行以下操作：

```
function beforeCallback(currSlideElement, nextSlideElement) {
    //find something inside the current Element
    $(currSlideElement).find('.left').fadeIn();
    $(currSlideElement).find('.right').fadeIn();

    //find something inside the next Element
    $(nextSlideElement).find('.left').fadeOut();
    $(nextSlideElement).find('.right').fadeOut();
} 
```

或者

```
function afterCallback(currSlideElement, nextSlideElement) {
    $(currSlideElement).find('.left').fadeOut();
    $(currSlideElement).find('.right').fadeOut();

    $(nextSlideElement).find('.left').fadeIn();
    $(nextSlideElement).find('.right').fadeIn();
} 
```

见[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

# javascript - 将 y 轴上的单位从百万 (M) 更改为在 HighCharts 中显示数百万 (MM)

> ID：11719600
> 
> 赞同：1
> 
> 时间：2012-07-30T10:24:55.953
> 
> 标签：javascript, highcharts

我正在通过 Javascript 将数据绑定到柱形图。Y 轴以百万为单位显示数据单位，因此它在绘图点值旁边显示字符“M”。我检查了文档，但没有帮助。有没有办法可以将单位格式化为数百万的 MM？

这是 Y 轴上的“M”，我想将其更改为“MM” [http://jsfiddle.net/r6V8Z/](http://jsfiddle.net/r6V8Z/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T06:41:26.760

将 Y 轴格式化程序更新为：

```
yAxis: {
    labels: {
        formatter: function () {
            return this.value / 1000000 + 'MM';
        }
    },
    min: 0,
    title: {
        text: 'Rainfall (mm)'
    }
} 
```

# facebook - facebook打开图：对象未更新

> ID：11719601
> 
> 赞同：0
> 
> 时间：2012-07-30T10:24:57.427
> 
> 标签：facebook, api, facebook-opengraph

这是我的对象的一个​​例子：

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# openfever: http://ogp.me/ns/fb/openfever#">

 <meta property="fb:app_id"                      content="260740230708137" /> 
 <meta property="og:type"                        content="openfever:plan" /> 
 <meta property="og:url"                         content="http://app.feverup.com/openFever/index.html" /> 
 <meta property="og:title"                       content="Sutton Club" /> 
 <meta property="og:image"                       content="http://www.gettyimages.es/images/marketing/frontdoorStill/PanoramicImagesRM/FD_image.jpg" /> 
 <meta property="openfever:precio"               content="18€" /> 
 <meta property="openfever:fevers_dentro"        content="12" /> 
 <meta property="openfever:porcentaje_de_chicas" content="60%" /> 
 <meta property="openfever:price" content="40€" /> 
```

这是发布操作的代码：

```
FB.api(
                '/me/openfever:getin',
                'post',
                { 
                    plan: 'http://app.xxx.com/openxxx/index.html',
                    //place: 'suttonoficial', 
                    place: 'Opiummar',
                    tags: '728885016',
                },
                function(response) {
                   if (!response || response.error) {
                      console.log(response.error);

                   } else {
                      console.log(response.id);
                   }
        }); 
```

动作和对象已发布。但我有一个问题。我如何发布不同的对象？这意味着，改变价格，图像..

如果我更改对象的某些属性，则不会更新对象。但是，如果我使用对象调试器，所有已发布的对象都会更新。不止一个。

我的问题：可以发布多个对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:29:38.010

> 我如何发布不同的对象？

*通过在不同*的URL 下提供数据……</p>

Open Graph 对象基本上只是*URL*。因此，如果您想拥有多个对象，请设置多个 URL，并让它们各自交付一个带有适当 OG 元标记集的 HTML 文档。

# c# - 在 LINQ 中写出“AND”和“OR”

> ID：11719604
> 
> 赞同：0
> 
> 时间：2012-07-30T10:25:17.187
> 
> 标签：c#, linq

你如何在 LINQ 中写出“AND”和“OR”。我试过'AND'关键字以及'&&'和','。

我也用谷歌搜索了它，并没有遇到任何有帮助的东西。

任何帮助将不胜感激谢谢

编辑：

```
 int[] moreScores = new int[]{12,12,45,45,87,96};
int[] scores = new int[] { 97, 92, 81, 60 };
        // Define the query expression.
        IEnumerable<int> scoreQuery =
            from score in scores
    and moreScores
            where score > 80
            select score; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:27:21.977

这取决于您使用的语言

在**C#**中，`&&`对于*AND*和`||`对于*OR*
在**VB**中，`AND`对于*AND*和`OR`对于*OR*

现在，您使用什么语言？

**更新 1**

你想先加入这两个表对吗？

`UNION`方法从返回集中排除重复项。

```
IEnumerable<int> scoreQuery =  from score in (scores.Union(moreScores))
                               where score > 80
                               select score; 
```

![在此处输入图像描述](../Images/3cf2ca38890ea01ef430372d0b668379.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:41:25.310

如果你给我们正确的例子，你应该使用 Union，而不是 AND：

```
 IEnumerable<int> scoreQuery =
    from score in scores.Union(moreScores)
    where score > 80
    select score; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:33:03.263

您不能通过在它们之间放置 AND 来简单地查询两个不同的数组。试试下面的代码：

```
var moreScores = new int[] { 12, 12, 45, 45, 87, 96 };
var scores = new int[] { 97, 92, 81, 60 };
var scoreQueryResults =
    from score in (scores.Union(moreScores))
    where score > 80
    select score; 
```

还有一些 Linq 的通用示例。

```
var list = new List<string>();
// ... add some items

// Searching for the strings that starts with J AND ends K
// Method Chain Format
var results1 = list.Where(item => item.StartsWith("J") && item.EndsWith("K"));
// Query Format
var results2 = from item in list
                where item.StartsWith("J") && item.EndsWith("K")
                select item;

// Searching for the strings that starts with J OR K
// Method Chain Format
var results3 = list.Where(item => item.StartsWith("J") || item.StartsWith("K"));
// Query Format
var results4 = from item in list
                where item.StartsWith("J") || item.StartsWith("K")
                select item; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T10:41:52.753

我想你正在尝试写这样的东西......

```
int[] moreScores = new int[]{12,12,45,45,87,96}; 
int[] scores = new int[] { 97, 92, 81, 60 };         
// Define the query expression.         
IEnumerable<int> scoreQuery = from score in scores.Union(moreScores) 
                              where score > 80             
                              select score; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T10:47:18.997

Linq 不是那样工作的，你首先必须将你的两组结合起来。

```
var allScores = scores.Concat(morescores); 
```

那么你可以这样做，

```
var scoreGreaterTham80 = allScores.Where(s => s > 80); 
```

* * *

如果您想排除之间的重复项`scores`并`morescores`使用`Union`而不是`Concat`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T10:49:04.513

你想要的是[`Concat`](http://msdn.microsoft.com/en-us/library/bb302894.aspx)因为我假设你通常不想排除任何*分数*`Union`，这会做。

```
int[] moreScores = new int[] { 12, 12, 45, 45, 87, 96 };
int[] scores = new int[] { 97, 92, 81, 60 };

IEnumerable<int> scoreQuery = from score in moreScores.Concat(scores)
                              where score > 80
                              select score; 
```

# .net - 重新抛出遇到的异常后，使用块中的sql连接状态会怎样？

> ID：11719606
> 
> 赞同：0
> 
> 时间：2012-07-30T10:25:33.007
> 
> 标签：.net, exception, ado.net, sqlconnection

```
Try
    xConn.ConnectionString = xConnBuilder.ConnectionString
    xConn.Open()
    Throw New Exception("Something")
Catch ex As Exception
    Throw
Finally
    If xConn.State = ConnectionState.Open Then
        xConn.Close()
    End If
End Try 
```

在抛出异常并重新抛出维护堆栈跟踪后连接对象会发生什么情况，它是否已关闭，因为在发生异常时未到达 finally 块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:33:05.150

finally 块包含无论天气是否存在错误/异常都必须执行的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:04:19.273

在您的示例代码中，连接将被关闭。无论是否发生异常，都会始终执行 finally 代码块。

# javascript - audio.onloaded 功能

> ID：11719609
> 
> 赞同：1
> 
> 时间：2012-07-30T10:26:06.033
> 
> 标签：javascript, html, audio

我想这是一个愚蠢的问题，但我无法解决这个问题。

当我打电话

```
audio.onloadeddata = function(){
    alert('hello');
} 
```

它不起作用，但是当我打电话时

```
audio.onloadeddata = alert('hello'); 
```

它确实有效。还在其他关于音频标签的网站上，它们使用与我相同的语法功能，那么为什么它对我不起作用？

我在这里有点绝望……

------------ 添加完整功能 -------------

```
jQuery('.btn-play-single').click(function(){
    var statusTemp = jQuery('#statusTemp');
    var button = jQuery(this);
    var loader = jQuery('.ajax-loader',jQuery(this).parent());
    var el = document.getElementById('record'+jQuery(this).attr('alt'));

    if (el.paused){
        statusTemp.append('<div>Sound is paused and i will play it</div>');
        button.hide();
        loader.show();

        el.onloadeddata = function(){
            statusTemp.append('<div>Sound has loaded and Im changing buttons</div>');
            button.css({backgroundPosition:'0px -40px'});
            loader.hide();
            button.show();
            el.play();
        };

        el.onended = function(){
            statusTemp.append('<div>Sound has finished and changing buttons back</div>');
            button.css({backgroundPosition:'0px 0px'});
        };

    } else {
        button.css({backgroundPosition:'0px 0px'});
        el.pause();
        el.currentTime = 0;
        statusTemp.append('<div>Sound was playing and I stopped it</div>');
    }

}); 
```

# python - 寻找在 Win x64 上使用 Pywinauto 的方法

> ID：11719619
> 
> 赞同：3
> 
> 时间：2012-07-30T10:26:54.803
> 
> 标签：python, user-interface, 64-bit, pywinauto

我已经使用 pywinauto 进行 gui 自动化很长一段时间了。现在我必须迁移到 x64 操作系统。64位操作系统似乎没有正式版本。有些克隆声称他们支持 64，但实际上他们不支持。

在安装时，有几个关于错误获胜结构大小的断言。如果注释掉，lib 会设法安装，但某些 API 不起作用。例如 win32functions.GetMenuItemInfo() 返回错误 87：参数错误。此 API 取决于 struct MENUITEMNFOW（最初的大小未通过断言）。

有谁知道如何处理这种情况？是否有一个纯 pywinauto 版本可以在没有额外补丁的情况下工作？

最后，如果没有答案，您是否可以建议用于 gui 自动化的强大 Python 库？支持64位？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-11T05:11:28.207

下载这个：[pywinauto/pywinauto](https://github.com/pywinauto/pywinauto)，然后安装`python.exe setup.py install`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:54:02.357

Azurin，你总是可以在你的 x64 操作系统上使用 python32bit + pywinauto。如果你真的需要 python64，你也可以使用 py2exe 在 .exe 中编译测试并在任何地方使用它，即使在没有安装 python 的操作系统上也是如此。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-25T06:28:01.387

我最近才知道`pywinauto`并且运行没有问题

```
pip install pywinauto 
```

在Win10 64位上。所以你的问题似乎已经解决了 - ≤ 4 年后。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-03-24T09:32:29.323

`win32structure.py`

1.  确保`HANDLE`是`c_void_p`
2.  `HBITMAP`重新定义其他句柄`HANDLE`
3.  确保指针是指针且不长

# html - 空 div 标签的背景图像超链接

> ID：11719621
> 
> 赞同：0
> 
> 时间：2012-07-30T10:27:06.933
> 
> 标签：html, css, hyperlink, background-image

在我的网站上，我有一个空`<div>`的`background-image`. 我的`<div>` **宽度**是**280px**和`background-image` **宽度**是**165px**。所以我只需要**165px**的链接（仅适用于`background-image`）。可以这样给予吗？

![在此处输入图像描述](../Images/c6a44585299f2b4358b6f969b4577d4b.png)

在这里，`border` `black`是我的`<div>`，**阅读更多**是我的`background-image`。

**注意：**如果我`<img>`直接在标签内`<div>`使用标签而不是使用 as a `background-image`，那么我的问题就解决了。但我想知道是否可以`background-image`作为空链接提供`<div>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:31:38.240

两种解决方案：

1.  在背景图像上放置一个空的“A”标签。

2.  使用“A”标签并将图像放置为“A”标签的背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:31:28.053

我想你可以试试这样

```
#box-link { 
        position: absolute; 
        top: 8px; /*what ever*/
        left: 20px;  /*what ever*/
        width: 83px; /*what ever*/
        height: 83px; /*what ever*/
        background-color: transparent; 
        border: 1px solid yellow; /*what ever*/
}   

        <div class="box1">
        <a id="box-link" href="#"></a>
        </p>
        </div> 
```

试试这个链接

[http://www.position-relative.com/tutorials/tute1_css_bg_image.php](http://www.position-relative.com/tutorials/tute1_css_bg_image.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:34:38.727

不，你不能从背景图片做链接。但是您可以模拟：添加到主 div 位置：相对，并在其中添加 div（位置：绝对和背景：0）到您想要链接的位置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T10:36:30.973

您需要为 a 标签提供高度和宽度。

```
a{
    background:red;
    height:25px;
    width:50px;
    display:block;
} 
```

*   根据您的图像尺寸的高度和宽度

参考[http://jsfiddle.net/3se2E/](http://jsfiddle.net/3se2E/)

# iphone - 具有文本字段的 uitableview 中的滚动问题

> ID：11719622
> 
> 赞同：0
> 
> 时间：2012-07-30T10:27:09.977
> 
> 标签：iphone, ios, uitableview, scroll, uitextfield

我有一个`UItableview`包含多个部分的部分，每个部分都有两行包含**标签和文本字段**。滚动数据时，文本字段会更改其位置。

[1]：[UITableView 滚动问题](https://stackoverflow.com/questions/7482289/uitableview-scrolling-issue) 这个问题和我的问题类似，但我无法得到确切的解决方案。

这是我的数据源，即 cellForAtIndexPath 方法。

```
static NSString *CellIdentifier = @"Cell";

UILabel *   mainLabel;    
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];        
    cell.accessoryType = UITableViewCellAccessoryNone;        
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    mainLabel = [[[UILabel alloc] initWithFrame:CGRectMake(20.0, 8.0, 100.0, 30.0)] autorelease];
    mainLabel.tag = MAINLABEL_TAG;
    mainLabel.font = [UIFont systemFontOfSize:17.0];
    mainLabel.textColor = [UIColor blackColor];
    mainLabel.backgroundColor = [UIColor clearColor];
    [cell.contentView addSubview:mainLabel];
    mainTF = [[[UITextField alloc]initWithFrame:CGRectMake(150, 8.0, 140.0, 30)] autorelease];
    mainTF.tag = MAINTEXTFIELD_TAG;
    mainTF.font = [UIFont systemFontOfSize:17.0];
    mainTF.textColor = [UIColor blackColor];
    mainTF.backgroundColor = [UIColor clearColor];
    mainTF.borderStyle = UITextBorderStyleRoundedRect;
    mainTF.delegate = self;
    mainTF.autocorrectionType = UITextAutocorrectionTypeNo;
    mainTF.keyboardType = UIKeyboardTypeNumbersAndPunctuation;
    mainTF.returnKeyType = UIReturnKeyDone;
    mainTF.clearButtonMode = UITextFieldViewModeWhileEditing;
    mainTF.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    [cell.contentView addSubview:mainTF];
}
else{
    mainLabel = (UILabel *)[cell.contentView viewWithTag:MAINLABEL_TAG];
    mainTF = (UITextField *)[cell.contentView viewWithTag:MAINTEXTFIELD_TAG];
}

if (indexPath.row == 0) {
    mainLabel.text = @"Quantity";
    //mainTF.text =@"1";
}
else{
    mainLabel.text = @"Unit";
    //mainTF.text = @"100 grams";
}

// Configure the cell...
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:34:49.150

如果您将单元格出列，它们将包含先前放入其中的数据。每次加载单元格时，您都应该将 textfield.text 初始化为 @""。

# c# - 您可以使用 Mono/LLVM 生成比使用 Microsoft 的 C# 编译器更快的 .NET 应用程序吗？

> ID：11719628
> 
> 赞同：16
> 
> 时间：2012-07-30T10:27:51.973
> 
> 标签：c#, performance, optimization, mono, llvm

[Mono with LLVM](http://www.mono-project.com/Mono_LLVM)项目能够使用LLVM 编译器后端，它具有一些非常强大的优化来编译 C# .NET 项目，这使它在计算密集型应用程序中的运行速度提高了大约 20%。

> 除了 Mono 的内置 JIT 编译器之外，Mono 现在能够使用 LLVM 作为代码生成的后端。这允许 Mono 从 LLVM 中完成的所有编译器优化中受益。例如，SciMark 分数从**482**到**610**。

那么是否可以针对现有的 C# .NET 项目使用 Mono/LLVM 以获得更快的 Windows 或 Unix 应用程序？是不是很容易，还是您必须重构/修改应用程序代码？这甚至可以在常规的 .NET Framework 下工作，还是专门针对 Mono Framework 项目？考虑到这一点，有人说：

> 这种额外的性能是有代价的：使用 LLVM 进行 JIT 编译会消耗更多时间和更多内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:32:11.610

LLVM 后端连接到 Mono 的 JIT 编译器（运行应用程序时将 IL 程序集转换为本机程序集的东西），因此您需要使用 Mono 运行应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T20:31:05.677

您需要做的第一件事是[在分析器下](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)运行您的程序，然后查看结果以找到经常调用的热点或方法。

对于普通的普通桌面应用程序，依靠 .NET/Mono 中的低级优化不会在显着性能方面获得太多收益。这不是 C/C++。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-31T23:21:32.610

虽然在这种情况下，基于 CPU 或时间的分析器将帮助您将指标与基准进行比较，但热路径或方法热点不会在更改编译器时发生变化，而是通过测试的不同执行路径发生变化。

热路径、具有高独占字节的方法是应用程序代码的产物，而不是代码在本机 CPU 上的翻译和优化方式。话虽如此，使用 Windows 事件跟踪 (ETW) 的 perfview 等工具提供了特定于 JIT 的统计信息，并且可以使用大量采样或基于时间的分析器进行微基准测试，但这可能很难做到正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-22T18:48:13.087

[我的基准测试](http://www.codeproject.com/Articles/212856/Head-to-head-benchmark-Csharp-vs-NET)表明，Mono 执行相同任务所需的时间通常是 MS .NET 的 2 倍左右。因此，使用 LLVM 让 Mono 速度提高 20% 并不足以使其赶上微软。此外，由于某种原因，当我在 Windows 上使用 --llvm 标志时，几乎没有什么区别；也许 LLVM 甚至出于某种原因在 Windows 上被禁用（或者早在 2011 年我做基准测试时）。

# php - 一旦我有密码，PHP 就可以检索需要密码页面的内容？

> ID：11719630
> 
> 赞同：1
> 
> 时间：2012-07-30T10:27:56.517
> 
> 标签：php, curl, permissions, passwords, file-get-contents

我需要检索页面的 html 内容（源），例如：www.google.com 页面。然后我可以使用：`file_get_contents`或`curl_init`使用 PHP。

就像有人在此之前提出的问题一样：
[如何在 PHP 中获取网页的 HTML 代码？](https://stackoverflow.com/questions/819182/how-do-i-get-the-html-code-of-a-web-page-in-php)

但对我来说更重要的是，有些页面是**Access Required**。
**但我已授予访问权限并知道密码。**

（假设它用表格询问密码，密码是“abcd”。）

那么我如何使用 PHP 以编程方式读取这些页面呢？

更新（对我来说是答案）：
我在`curl-setopt` [下面找到了 Bekzat Abdiraimov 建议](https://stackoverflow.com/questions/11719630/php-to-retrieve-the-content-of-the-password-required-pages-once-i-have-password#11719798)的解决方案。然后现在我在这里详细发布了我在某处找到并修改的代码：

```
<?php
function curl_grab_page($url, $ref_url, $data, $login, $proxy, $proxystatus){
    if($login == 'true') {
        $fp = fopen("cookie.txt", "w");
        fclose($fp);
    }

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
    curl_setopt($ch, CURLOPT_TIMEOUT, 40);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

    if ($proxystatus == 'true') {
        curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
        curl_setopt($ch, CURLOPT_PROXY, $proxy);
    }

    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_REFERER, $ref_url);

    curl_setopt($ch, CURLOPT_HEADER, TRUE);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
    curl_setopt($ch, CURLOPT_POST, TRUE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

    curl_exec($ch);

    curl_setopt($ch,CURLOPT_URL,$ref_url);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER, 1);

    ob_start();
    $data = curl_exec($ch);
    ob_end_clean();

    curl_close($ch);
    return $data;
}

/*
 * $auth_processing_url .. is the posted 'action' url in login form like <form method=post action='http://www.abc.com/login.asp'> So it should be like: "http://www.abc.com/login.asp"
 * $url_to_go_after_login .. is the url you want to go (to be redireced) after login
 * $login_post_values .. are the form input names what Login Form is asking. E.g on form: <input name="username" /><input name="password" />. So it should be: "username=4lvin&password=mypasswd"
 */
echo curl_grab_page($auth_processing_url, $url_to_go_after_login, $login_post_values, "true",  "null", "false");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:39:02.887

使用 curl curl_setopt （资源 $ch ， int $option ，混合 $value ）

```
option = CURLOPT_HTTPAUTH
value = choose auth type (CURLAUTH_BASIC, ...) 
```

[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:33:19.057

看看使用饼干罐。

当您第一次进行身份验证时，存储您的身份验证的“Cookie”会丢失（假设您尚未使用 Cookie Jar），因此您发出的下一个请求将不知道您已经登录。

因此，您需要使用 Cookie Jar 来存储身份验证 cookie。

[http://www.electrictoolbox.com/php-curl-cookies/](http://www.electrictoolbox.com/php-curl-cookies/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:33:23.970

这取决于所需的身份验证类型。如果它是广泛使用的基本身份验证类型，它是添加到请求中的一个微不足道的标头。[您可以在 Wikipedia](http://en.wikipedia.org/wiki/Basic_access_authentication)上查看详细解释的技术细节。要使用 向请求添加标头，请使用`file_get_contents`参数[`$context`，](http://php.net/file_get_contents)[此处](http://php.net/manual/en/function.stream-context-create.php)以示例说明其用法。

# c# - 使用 Xsd2Code 将 PMML XML 架构 (xsd) 转换为 C# 对象时出错

> ID：11719634
> 
> 赞同：0
> 
> 时间：2012-07-30T10:28:05.200
> 
> 标签：c#, .net, xml, xsd, xsd2code

我尝试使用 Xsd2Code ( [Xsd2Code ) 从 PMML 3.0 Schema (](http://xsd2code.codeplex.com/) [PMML 3.0 Schema](http://www.dmg.org/pmml-v3-0.html) ) 创建 C# 对象，但我得到的只是以下错误：

> 错误：元素“http://www.dmg.org/PMML-3_0:Array”的多重定义导致内容模型变得不明确。必须形成一个内容模型，使得在元素信息项序列的验证过程中，直接、间接或隐含包含在其中的粒子可以唯一地确定，用它来尝试依次验证序列中的每个项目，而无需检查其内容或属性。该项目，并且没有关于序列其余部分中的项目的任何信息。

我很确定这个规范是正确的。我也尝试了 VS 中的 xsd.exe，但没有成功。

有没有其他方法可以进行这种转换？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:11:30.207

我发现了这个老问题：[XSD 序列显示为模棱两可！](https://stackoverflow.com/questions/2611312/xsd-sequence-shows-as-abiguous)，所以我检查了xsd [http://www.dmg.org/v3-0/pmml-3-0.xsd](http://www.dmg.org/v3-0/pmml-3-0.xsd)，我发现了这部分：

```
<xs:element name="ContStats">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="Extension" minOccurs="0" maxOccurs="unbounded" />
        <xs:element minOccurs="0" maxOccurs="unbounded" ref="Interval" />
        <xs:group minOccurs="0" ref="INT-ARRAY" />
        <xs:group minOccurs="0" maxOccurs="2" ref="NUM-ARRAY" />
      </xs:sequence>
      <xs:attribute name="totalValuesSum" type="NUMBER" />
      <xs:attribute name="totalSquaresSum" type="NUMBER" />
    </xs:complexType>
  </xs:element> 
```

就像我链接的问题的答案一样，如果验证器发现一个数组无法判断它是 INT-ARRAY 还是最大 2 NUM-ARRAY 之一。

我不知道是否有办法在不修改 xsd 的情况下进行这种转换。

# javascript - npapi webkit 插件数组处理

> ID：11719636
> 
> 赞同：1
> 
> 时间：2012-07-30T10:28:28.857
> 
> 标签：javascript, webkit, npapi, qtwebkit, browser-plugin

我想处理来自 java 脚本的数组。（即，从 html 页面到插件代码。我想从 html 代码中获取值到插件中的变量，以便我可以在代码中修改它们并出于其他目的进行处理。）。

但我在这方面面临一个问题。我知道内部数组将作为 NPObject 处理。我正在尝试从此 NPObject 检索数组的长度和数组的元素，但即使数组的长度不是零，返回的数组长度也为零。

欢迎任何建议....

我有一个包含数组的 html 页面 HTML 页面如下：

```
<html>
<script type="text/javascript">
var arrayData = [9,1,2,3,4,5,6,7,8,9];
function handleEvent(e) {
    if (e.keyCode == 55) {
        document.getElementById('arrayint_ele_disp').innerHTML = arrayData;
        process_intarray(arrayData);
    }
}
function  process_intarray(arrayData){
    obj = document.getElementById("Obj");
    if(obj){
        obj.process_array_intval(arrayData); 
    }
}
</script>

<body onload="init()" onkeydown="handleEvent(event)">
<div id ="arrayint_ele_disp" style="position:absolute;left:100px;top:250px"> 
ARRAY_INT VAL </div>
</body>

</html> 
```

我处理数组元素的插件代码如下：

```
bool ScriptableObject::process_intarray(const NPVariant* args, uint32_t 
     argCount, NPVariant* result)
{

    //Get the Length of the array
    //NPObject *inobject = args[0].value.objectValue;
    NPObject *inobject = args->value.objectValue;

    bool bRetval = false;
    NPVariant npvlength;
    //NPIdentifier id;

    bRetval = 
   NPN_GetProperty(m_npp,inobject,NPN_GetStringIdentifier("length"),&npvlength);
    printf("\n NPN_GetProperty length type %d value : %d\n"
  ,npvlength.type,npvlength.value.intValue);

    //Get the array elements
    int i = 0;
    for(i = 0; i < npvlength.value.intValue; i++)
    {
        NPVariant CurVal;
        NPN_GetProperty(m_npp,inobject,NPN_GetIntIdentifier(i),&CurVal);
        m_prop_array_intval[i] = CurVal.value.intValue;
    }
    return true;

} 
```

在这个函数中 NPN_GetProperty(m_npp,inobject,NPN_GetStringIdentifier("length"),&npvlength); 正在返回一个真实的。

但是在检查 npvlength 的长度时，它给出 0 并且它的类型为 NPVariantType_Double。我无法理解为什么..

欢迎任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:44:00.587

你不应该依赖数字是`Int32`or之一`Double`。如果数字类型是双重使用`value.doubleValue`来获取长度，否则你会得到意想不到的值（由于`value`是 a并`union`因此引用相同的内存）。 理想情况下，为转换编写自己的辅助函数，这样您就不必担心无处不在的具体问题。`doubleValue``intValue`
`NPVariantType`

您还应该缓存`NPIdentifier`s：在最坏的情况下`NPN_Get*Identifier()`，除了字符串比较/散列/ ...

# c# - 如何将录制的音频序列化为 XML 并反序列化以在 c#/xaml Metro 应用程序中播放？

> ID：11719637
> 
> 赞同：0
> 
> 时间：2012-07-30T10:28:29.080
> 
> 标签：c#, xml, xaml, audio, microsoft-metro

我正在为我的应用程序关注[这个](http://code.msdn.microsoft.com/windowsapps/media-capture-sample-adf87622)媒体捕获示例。现在我不想将 MP3 中的音频保存在文件夹中，但我想以 XML 序列化该 MP3 文件，然后想要反序列化该 XML 以播放录制的 MP3 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:46:02.990

我不确定您为什么要这样做而不是保存 RAW MP3 数据。但是，该过程将如下所示：

1.  base64 编码你的 MP3 数据
2.  将 base64 编码的数据存储在 XML 文档中。base64 数据可以被视为任何字符串。例如：

    ```
    <?xml version="1.0" encoding="UTF-8" ?>
    <root>
        <mp3>...BASE64DATA....</mp3>
    </root> 
    ```

3.  将文件保存到磁盘。

要取回 MP3 数据，只需反转过程即可。

# eclipse-plugin - 找不到 Eclipse 声纳插件的 startserver.bat 文件

> ID：11719640
> 
> 赞同：0
> 
> 时间：2012-07-30T10:28:35.967
> 
> 标签：eclipse-plugin, sonarqube

我看过下面的网址

*   [在 Eclipse 中启动声纳服务器？](https://stackoverflow.com/questions/9542252/start-sonar-server-inside-eclipse)

启动声纳服务器。但我找不到 startserver.bat 文件。我已经通过 Eclipse 市场将声纳作为插件安装在 Eclipse 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T00:00:07.930

Sonar 仪表板旨在从在项目的自动构建服务器上运行的构建进行更新。构建服务器通常针对取自项目共享开发分支的代码工作。

另一方面，Eclipse 插件旨在针对位于 Eclipse 工作区中的代码运行，这些代码可能已提交，也可能未提交。

两个不同的用例，Eclipse 插件用于测试代码修复对报告的 Sonar 违规的影响。显然，当这些修复被提交时，这最终会更新 Sonar 仪表板。

# web-services - SOAP Web 服务的 XML 响应格式

> ID：11719643
> 
> 赞同：0
> 
> 时间：2012-07-30T10:28:46.320
> 
> 标签：web-services, google-app-engine, soap, wsdl

嗨，我正在尝试在 Google 应用引擎上创建一个 SOAP Web 服务，我正在关注这篇[文章](https://developers.google.com/appengine/articles/soap)

本教程展示了一个简单的 hello world 教程，我成功运行了该程序并获得了响应

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header/>
<SOAP-ENV:Body>
<ns3:sayHelloResponse xmlns:ns3="http://example.com/">
<return>Hello, hello!</return>
</ns3:sayHelloResponse>
</SOAP-ENV:Body>

</SOAP-ENV:Envelope> 
```

这是 SOAP1.1 格式我必须得到 SOAP 1.2 格式的响应，例如

```
<?xml version="1.0"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope"
xmlns:e="http://[app-id].appspot.com/gevents-service">
<env:Body>
</env:Body> 
```

为此，我在 Greeter 类的顶部添加了一行：

```
@BindingType(javax.xml.ws.soap.SOAPBinding.SOAP12HTTP_BINDING) 
```

，然后在 Greeter 类上运行 wsgen 命令：

```
C:\Users\Lenovo\workspace\HelloSoapServer1>wsgen -extension -wsdl:Xsoap1.2 -cp "
./war/WEB-INF/classes" -wsdl -keep -r "./war" -d "./war/WEB-INF/classes" -s "./s
rc" com.example.Greeter 
```

其中 HelloSoapServer1 是项目名称，它成功创建了 SOAP1.2 格式的 wsdl 文件，然后我再次将其部署到 appengine 我期待 SOAP1.2 版本的响应输出，但响应仍然与以前相同。这里是一些代码

迎宾班

```
package com.example;
import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.xml.ws.BindingType;

@WebService
@BindingType(javax.xml.ws.soap.SOAPBinding.SOAP12HTTP_BINDING)
public class Greeter {
  @WebMethod
  public String sayHello(String name){
    return "Hello, " + name+ "!";
  }
  @WebMethod
  public String sayGoodbye(String name){
    return "Goodbye, " + name + "!";
  }
} 
```

生成 GreeterService.wsdl 代码

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.6 in JDK 6\. -->
<definitions targetNamespace="http://example.com/" name="GreeterService" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://example.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/">
  <types>
    <xsd:schema>
      <xsd:import namespace="http://example.com/" schemaLocation="GreeterService_schema1.xsd"/>
    </xsd:schema>
  </types>
  <message name="sayHello">
    <part name="parameters" element="tns:sayHello"/>
  </message>
  <message name="sayHelloResponse">
    <part name="parameters" element="tns:sayHelloResponse"/>
  </message>
  <message name="sayGoodbye">
    <part name="parameters" element="tns:sayGoodbye"/>
  </message>
  <message name="sayGoodbyeResponse">
    <part name="parameters" element="tns:sayGoodbyeResponse"/>
  </message>
  <portType name="Greeter">
    <operation name="sayHello">
      <input message="tns:sayHello"/>
      <output message="tns:sayHelloResponse"/>
    </operation>
    <operation name="sayGoodbye">
      <input message="tns:sayGoodbye"/>
      <output message="tns:sayGoodbyeResponse"/>
    </operation>
  </portType>
  <binding name="GreeterPortBinding" type="tns:Greeter">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <operation name="sayHello">
      <soap12:operation soapAction=""/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
    </operation>
    <operation name="sayGoodbye">
      <soap12:operation soapAction=""/>
      <input>
        <soap12:body use="literal"/>
      </input>
      <output>
        <soap12:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="GreeterService">
    <port name="GreeterPort" binding="tns:GreeterPortBinding">
      <soap12:address location="http://onemoredemo.appspot.com/hellosoapserver1"/>
    </port>
  </service>
</definitions> 
```

GreeterService_schema1.xsd 代码是

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" targetNamespace="http://example.com/" xmlns:tns="http://example.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="sayGoodbye" type="tns:sayGoodbye"/>

  <xs:element name="sayGoodbyeResponse" type="tns:sayGoodbyeResponse"/>

  <xs:element name="sayHello" type="tns:sayHello"/>

  <xs:element name="sayHelloResponse" type="tns:sayHelloResponse"/>

  <xs:complexType name="sayHello">
    <xs:sequence>
      <xs:element name="arg0" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="sayHelloResponse">
    <xs:sequence>
      <xs:element name="return" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="sayGoodbye">
    <xs:sequence>
      <xs:element name="arg0" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="sayGoodbyeResponse">
    <xs:sequence>
      <xs:element name="return" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

据我阅读一些关于 SOAP1.2 Web 服务的文章，wsgen 工具正在生成正确的 wsdl 文件，但是当我部署它时，它以 SOAP1.1 的格式给出响应，任何人都可以请帮助我为什么没有得到格式的输出SOAP1.2协议如下图

```
 <?xml version="1.0"?>
    <env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope"
    xmlns:e="http://[app-id].appspot.com/gevents-service">
    <env:Body>
    </env:Body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-07T18:11:42.590

我看到你的命令开始了：

`wsgen -extension -wsdl:Xsoap1.2`, 但后来有`-wsdl -keep -r`等... 是否有可能第二次出现`-wsdl`覆盖第一次使用默认值 1.1？

# android - 谷歌分析上的 Android 设备 ID

> ID：11719644
> 
> 赞同：0
> 
> 时间：2012-07-30T10:28:47.363
> 
> 标签：android

有什么方法可以在使用该应用程序的谷歌分析页面上显示移动设备 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:49:12.397

是的，您可以显示它。您可以在调用 EasyTracker.getTracker().trackView("Mobile ID"+ yourmobileid) 时发送任何值，如移动设备 ID 或任何字符串值，然后您可以在屏幕下的 Google Analytics（分析）仪表板上查看此信息意见。

# java - arraylist isEmpty() 疑惑和疑问

> ID：11719646
> 
> 赞同：1
> 
> 时间：2012-07-30T10:28:52.817
> 
> 标签：java, list, arraylist

我有问题。我想检查我的指定索引的 ararylist 索引是否为空。用户可能在我的数组列表中输入了 7 个项目（索引 0 到 6）。所以我想检查索引 7 是否为空，如果为空，我将循环回我的 RoomSelection()。

我正在使用 roomInfo(4+ xx)IsEmpty。

IsEmpty 命令是否用于检查整个数组列表是否为空？

如果要检查整个 arraylist ，我可以使用什么其他方法来检查索引 7 是否为空？

```
for (int x = 0; x < (Integer) roomInfo.get(2); x++) {//start of number of room loop(to check how many rooms user input)

    for (int i = 0; i < (Integer) roomInfo.get(4 + xx); i++) { //start of number of add-on loop(to check how many add-on user input)

        System.out.println("addOns array contains what? : " + addOns);    // for my own reference
        System.out.println("Enter Add-On option");
        ao2 = input.nextInt();
        while (ao2 > 4) {
            System.out.println("Please enter again! Choose only option 1 to 4");
            ao2 = input.nextInt();
        }
        addOnOpt = addOn[ao2 - 1];
        addOns.add(addOnOpt);
        addOnPrice = priceAdd[ao2 - 1];
        addOns.add(addOnPrice);
        System.out.println("Enter quantity required for Add-On option " + (i + 1) + ": ");
        quan = input.nextInt();
        addOns.add(quan);
        xx += 3;
        System.out.println(" not null yet");
        if ((roomInfo.isEmpty(4 + xx) == true) {//if condition to check whether is the arrayllist of position is not null
            System.out.println("null!");
            xx = 0;
            Selection();
        }

    }// end of add-on loop

}//end of number of room loop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:34:36.077

`isEmpty()`如果列表中没有项目，则返回 true。

要知道是否有第 7 项，请使用该`size()`方法检查列表的大小（是否高于或等于 7）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:36:11.843

> isEmpty() 测试此列表是否没有元素。
> 
> “如果要检查整个数组列表，我可以用什么其他方法来检查索引 7 是否为空？”

假设你有这个：

```
ArrayList<abc> list=new ArrayList<abc>(); 
```

`abc.size()`返回列表中元素的数量。如果要检查索引 8 处的元素是否存在，简单的方法是查看 size 是否至少返回 9。所以：

```
int indexExists=8;
if(abc.size()>indexExists)
  //do whatever with abc.get(indexExists)
else
  //abc.get(8) will return a null pointer exception 
```

检查此链接以了解 ArrayList [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html上的其他方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:38:14.063

`isEmpty()`arraylist 上的功能是检查整个arraylist 是否为空。您可能可以拿起每个元素并检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:37:19.583

如果 ArrayList 有七个或更少的项目，或者您在索引 7 中添加，第八个项目（索引 7）将为“空” `null`；您需要测试这两个条件：

```
if(roomInfo.size() < 8 || roomInfo.get(7) == null) {
    // index 7 is "empty"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T10:37:39.570

IsEmpty() 方法仅检查列表是否没有元素。

[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#isEmpty%28%29](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#isEmpty%28%29)

当元素被添加到 ArrayList 时，它的容量会自动增长，因此要检查第 7 个位置，请使用 .size() 检查列表的大小

# android - 当用户长按电源按钮时禁用关机对话框

> ID：11719653
> 
> 赞同：2
> 
> 时间：2012-07-30T10:29:05.987
> 
> 标签：android, dialog

我试图禁止用户对安全应用程序使用电源按钮的长键按下，并且我已经尝试过长键按下方法，但对话框仍然出现有没有办法禁用对话框出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:17:49.110

试试这个

```
 @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);

            Log.d("Focus debug", "Focus changed !");

        if(!hasFocus) {
            Log.d("Focus debug", "Lost focus !");

            Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
            sendBroadcast(closeDialog);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:34:23.627

如此处所述，Android API 无法做到这一点：

[如何禁用电源按钮？](https://stackoverflow.com/questions/8036701/how-to-disable-power-button)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T10:34:13.050

我相信这是不可能的。但是，即使您可以做到，也不可能卸下电池，这会破坏整个观点。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-30T10:30:29.183

只需使用 disable() 方法。

$Button1->Shutdown.disable();

# php - 如何检查给定的 url 在 php 中是否存在？

> ID：11719656
> 
> 赞同：0
> 
> 时间：2012-07-30T10:29:32.177
> 
> 标签：php

我有这样的网址“ **http://example.com/index.php?id=10** ”。如何检查此 URL 是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:32:11.037

使用该[`get_headers`](http://php.net/manual/en/function.get-headers.php)功能。

```
$url = 'http://www.example.com';    
$headers = get_headers($url, 1);

if ($headers !== false && substr($headers[0], 9, 3) == 200) {
    echo 'Page exists';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:34:06.447

如果网站设置正确，`200 OK`如果 URL 存在并且允许您查看，您应该获得状态代码。您可以使用 curl 进行检查：

```
$http = curl_init("http://example.com/index.php?id=10");
curl_exec($http);
$responseCode = curl_getinfo($http, CURLINFO_HTTP_CODE);
if($responseCode == 200)
    //Page exists 
```

*代码未测试*

# android - 无法查看选项卡

> ID：11719659
> 
> 赞同：0
> 
> 时间：2012-07-30T10:29:38.887
> 
> 标签：android

```
 <?xml version="1.0" encoding="UTF-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background" >

        <TabHost
            android:id="@android:id/tabhost"
            android:layout_width="match_parent"
            android:layout_height="fill_parent" >

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_above="@+id/tabs" />

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:background="@drawable/button"
                    android:divider="@drawable/dividerd" />
            </RelativeLayout>
        </TabHost>

    </RelativeLayout>

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.mainpage);

        System.out.println("..........after layout...........");

        tabHost = getTabHost();
   tabHost.addTab(tabHost.newTabSpec("Payment").setIndicator("Acticvity 1",getResources().getDrawable(R.drawable.homed))
                        .setContent(new Intent(this, Activity 1.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))); 
```

请找到 xml 文件代码和活动代码。当我打开应用程序时，我看不到任何选项卡。请帮助我。像上面一样，我有 4 个这样的标签要显示，但它们都没有显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:39:45.703

改变你的框架布局

```
<FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_above="@+id/tabs" /> 
```

使用 android:layout_above="@android:id/tabs"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:52:46.403

```
 public class TabsActivity extends TabActivity {

private TabHost tabHost;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.tabs_layout);

    tabHost = (TabHost) findViewById(android.R.id.tabhost);
    tabCreation();
    tabHost.setOnTabChangedListener(new OnTabChangeListener() {
        public void onTabChanged(String tabId) {
            if (tabId.equals("Contacts")) {
                Log.i("Tab", "change");
            }
        }
    });
}

void tabCreation() {

    tabHost.setup();

    TabSpec spec1 = tabHost.newTabSpec("Accounts");

    spec1.setIndicator(createTabView(TabsActivity.this, "Accounts",
            R.drawable.tab_home));
    spec1.setContent(new Intent(TabsActivity.this, AccountsActivity.class));

    TabSpec spec2 = tabHost.newTabSpec("Contacts");

    spec2.setIndicator(createTabView(tabHost.getContext(), "Contacts",
            R.drawable.tab_account));
    spec2.setContent(new Intent(TabsActivity.this, ContactsActivity.class));

    TabSpec spec3 = tabHost.newTabSpec("Chats");

    spec3.setIndicator(createTabView(tabHost.getContext(), "Chats",
            R.drawable.tab_settings));
    spec3.setContent(new Intent(TabsActivity.this, ChatsActivity.class));

    TabSpec spec4 = tabHost.newTabSpec("More");
    spec4.setIndicator(createTabView(tabHost.getContext(), "More",
            R.drawable.tab_more));
    spec4.setContent(new Intent(TabsActivity.this, ChatsActivity.class));

    tabHost.addTab(spec1);
    tabHost.addTab(spec2);
    tabHost.addTab(spec3);
    tabHost.addTab(spec4);

    tabHost.setCurrentTab(0);
}

private static View createTabView(final Context context, final String text,
        final int id) {

    View view = LayoutInflater.from(context).inflate(
            R.layout.tab_indicator, null);
    TextView tv = (TextView) view.findViewById(R.id.title);
    tv.setText(text);
    ImageView icon = (ImageView) view.findViewById(R.id.icon);
    icon.setImageResource(id);
    return view;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:19:41.123

```
MAin Activity
 import android.app.TabActivity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
import android.widget.Button;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class AndroidTabLayoutActivity extends TabActivity {
  /** Called when the activity is first created. */
   @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
        TabHost tabHost = getTabHost();

      // Tab for Photos
       TabSpec photospec = tabHost.newTabSpec("photos");
       photospec.setIndicator("chat",     getResources().getDrawable(R.drawable.icon_photos_tab));
    Intent photosIntent = new Intent(this, PhotosActivity.class);
    photospec.setContent(photosIntent);

    // Tab for Songs
    TabSpec songspec = tabHost.newTabSpec("songs");
    // setting Title and Icon for the Tab
    songspec.setIndicator("contacts", getResources().getDrawable(R.drawable.icon_songs_tab));
    Intent songsIntent = new Intent(this, SongsActivity.class);
    songspec.setContent(songsIntent);

    // Tab for Videos
    TabSpec videospec = tabHost.newTabSpec("videos");
    videospec.setIndicator("Accounts", getResources().getDrawable(R.drawable.icon_videos_tab));
    Intent videosIntent = new Intent(this, VideosActivity.class);
    videospec.setContent(videosIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(photospec); // Adding photos tab
    tabHost.addTab(songspec); // Adding songs tab
    tabHost.addTab(videospec); // Adding videos tab
 }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:37:03.797

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="0dp" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="55dp"
            android:tabStripEnabled="false" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

# python - 应用引擎休息服务器 Python 2.7 示例

> ID：11719662
> 
> 赞同：1
> 
> 时间：2012-07-30T10:29:46.777
> 
> 标签：python, google-app-engine, rest, python-2.7

我下载了[appengine-rest-server](http://code.google.com/p/appengine-rest-server) (1.0.6) 并尝试在我的应用程序中使用这个模块，但我得到了一些错误。有人有 python 2.7.2 的工作示例吗？

按照我的代码初始化模块：

```
rest.Dispatcher.base_url = '/rest'
rest.Dispatcher.add_models({
  "customer": customer.customer,
  "place": customer.place})
application = webapp.WSGIApplication([<Some other Routs> ,
                                  ('/rest/.*', rest.Dispatcher)], debug=True) 
```

我收到此错误：

```
File "\src\rest\__init__.py", line 1551, in initialize
  request.disp_query_params_ = None
AttributeError: 'NoneType' object has no attribute 'disp_query_params_' 
```

也许是我的错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:02:49.310

修改以下功能，它似乎工作。

```
 def initialize(self, request, response):
        if request != None and response != None: 
            super(Dispatcher, self).initialize(request, response)
            request.disp_query_params_ = None
            response.disp_cache_resp_ = True
            response.disp_out_type_ = TEXT_CONTENT_TYPE 
```

# java - Android 的 Eclipse debug.keystore 签名错误

> ID：11719667
> 
> 赞同：1
> 
> 时间：2012-07-30T10:29:58.103
> 
> 标签：java, android, eclipse

我已经使用平台证书创建了一个密钥库证书。

我使用以下方式创建调试密钥库：-

```
keytool-importkeypair -k ~/.android/debug.keystore -p android -pk8 platform.pk8 -cert platform.x509.pem -alias platform 
```

现在要在 Eclipse 中使用这个密钥库来调试应用程序，我将“Documents and Settings\raj.android\”中的默认密钥库替换为我创建的新密钥库。现在，当我尝试调试任何应用程序时，eclipse 会说：

> “生成最终存档时出错：无法获取调试签名密钥”

我尝试重新启动 Eclipse，将 JRE 更改为 1.5，但不起作用。

问候， 拉吉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:12:44.403

我解决了这个问题。为创建证书提供的密码不正确。密码“platform”用于设备时有效。要使用模拟器在模拟器上调试应用程序，密码应为“androiddebugkey”

因此生成证书的命令将是：-

```
keytool-importkeypair -k ~/.android/debug.keystore -p android -pk8 platform.pk8 -cert platform.x509.pem -alias androiddebugkey 
```

谢谢您的帮助。

# javascript - 如何在客户端代码中设置环境变量？

> ID：11719674
> 
> 赞同：6
> 
> 时间：2012-07-30T10:30:21.430
> 
> 标签：javascript, html, node.js

我需要根据我们是在开发还是生产中设置不同的密钥。在没有固有运行时环境的客户端中执行此操作的好方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-23T00:29:09.017

一种方法是将环境变量从服务器注入到客户端的全局命名空间中。

例如，如果您在 PHP 中执行此操作：

```
<script>
    var env = <?php echo $your_env_variable; ?>; // globally accessible variable
</script> 
```

现在，您可以从在该脚本标记之后执行的任何 javascript 文件中访问该环境变量。

在节点中你会做同样的事情，但使用模板（例如 Jade）：

```
script(type='text/javascript').
    var env = passedInEnvVar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T00:49:43.757

在 nodejs 中，指定环境的“官方”方式是使用“NODE_ENV”。由于您没有提到您用于提供 HTML 内容的框架，因此我将使用 expressjs 作为我的答案。

您可以在视图模板中简单地执行此操作（我正在使用 EJS）

```
 var key = '<%= keys[process.env.NODE_ENV] %>' 
```

您将需要准备一组与每个环境相对应的密钥

```
var keys = {
  'development': 'dev-key',
  'production': 'prod-key'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:34:55.670

为什么不直接加载不同的脚本？您可以根据 GET 参数动态创建脚本，例如[http://example.org/script.js?development=1](http://example.org/script.js?development=1)，然后使用 PHP 等服务器端语言根据该参数更改代码内容。

您还可以在 Web 服务器上使用重写规则以使其看起来更干净。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-30T06:46:00.743

页面头部的A`<meta name='environment' content='<%= yourVariable %>' />`非常适合（ejs 示例，但你明白了）。

此方法将帮助您保持更严格的 Content-Security-Policy (no `inline-script`)，并且您无需在服务器中添加路由即可获得所需的值。

# php - 如何优雅地翻译？

> ID：11719683
> 
> 赞同：1
> 
> 时间：2012-07-30T10:31:14.987
> 
> 标签：php, translation

我们目前正在开发具有多语言功能的自定义 php 框架。到目前为止，它很容易处理翻译，但现在我们有更复杂的带有链接的消息。例如，这个：

```
"hello user <a href="/register">register</a> here!" 
```

可以使用包含的 HTML 标记进行翻译吗？

```
"fkds vkelip <a href="/register">regiximi</a> fácő ea!" 
```

或者我应该分 3 步执行此操作：

```
"hello user" -> translation
"register" -> translation
"here" -> translation 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:34:47.773

您可以使用[gettext](http://www.php.net/manual/en/function.gettext.php)扩展名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:43:43.903

您应该使用 gettext 函数来处理您的所有翻译要求。正如大多数当前的 cms 和框架所做的那样。

```
"<?=__('hello user')?> <a href="/register"><?=__('register')?></a> <?=__('here!')?>" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:52:57.780

您应该将所有文本放入 translate 函数，因为它是整个句子：

```
__('hello user <a href="/register">register</a> here!'); 
```

# c# - 以编程方式更改多行文本框中的行 - Silverlight

> ID：11719684
> 
> 赞同：0
> 
> 时间：2012-07-30T10:31:15.907
> 
> 标签：c#, silverlight, silverlight-4.0

我们如何以编程方式更改 Silverlight 中多行文本框中的文本。我想设置或获取文本框中的每一行。我已经通过 C# 中的属性在 Windows 窗体中进行了此操作。

```
textbox1.lines = aStringArray;

textbox1.lines[1] = "Hello stackoverflow Folks!!" 
```

但是我们如何在 Silverlight 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:39:07.583

要获取特定行的文本，可以使用 GetLineText ( [http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.getlinetext.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.getlinetext.aspx) ) 方法：

```
var text = textBox.GetLineText(1); 
```

现在，似乎没有现有的方法来设置特定行的文本。

# java - 谁能解释一下输出？

> ID：11719685
> 
> 赞同：1
> 
> 时间：2012-07-30T10:31:17.390
> 
> 标签：java

我知道输出是四一三二。谁能解释一下如何？由于有五个项目，但只打印了四个。

```
TreeSet map = new TreeSet();

map.add("one");
map.add("two");
map.add("three");
map.add("four");
map.add("one");
Iterator it = map.iterator();
while (it.hasNext() ) 
{
    System.out.print( it.next() + " " );
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T10:33:21.643

TreeSet 不允许重复条目。当它被访问时，它将以自然顺序（字母顺序）返回元素。

参考： [http ://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:40:43.783

[集合](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)不允许重复。如果您再次添加重复项，例如“一个”，则不会添加。

```
TreeSet map = new TreeSet();

    System.out.println(map.add("one"));
    map.add("two");
    map.add("three");
    map.add("four");
    System.out.println(map.add("one"));

    Iterator it = map.iterator();
    while (it.hasNext() )
    {
        System.out.print( it.next() + " " );
    } 
```

**结果：**

```
true
false 
```

第二个元素没有被添加到 set 中。

添加它时检查是否`if(e==null ? e2==null : e.equals(e2))`为真，然后只添加元素，`Set`否则不要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:38:37.350

TreeSet 是 Set 接口的实现

**并且 Set 总是只包含唯一的元素**

因此，即使您放置了 5 个元素，TreeSet 实际上只包含 4 个，因为“一个”重复了两次。

# java - 如何将本地 jar 作为依赖项添加到 maven 项目？

> ID：11719687
> 
> 赞同：3
> 
> 时间：2012-07-30T10:31:28.040
> 
> 标签：java, dependencies, maven-3

我是 Maven 新手，我想将[SSJ](http://www.iro.umontreal.ca/~simardr/ssj/indexe.html)库添加到 Maven 项目中的依赖项中，我尝试在 POM.xml 中添加它：

```
 <dependency>
        <groupId>ca.umontreal.iro</groupId>
        <artifactId>ssj</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency> 
```

但是eclipse给出了这个错误：`Missing artifact ca.umontreal.iro:ssj-2.5`

似乎在存储库中找不到它。我有jar文件，如何将其添加到依赖项中？如果可能的话。如果没有，在项目中包含这个 jar 的替代方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:40:35.027

您需要将 jar 添加到您的 Maven 本地存储库中。

```
mvn install:install-file -Dfile=/path/to/ssj.jar -DgroupId=ca.umontreal.iro -DartifactId=ssj -Dversion=2.5 -Dpackaging=jar 
```

（将 /path/to/ssj.jar 更改为您计算机中文件的路径）

当您构建应用程序时，这将使 Maven 可以使用上面定义的依赖项从本地存储库解析此 JAR。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T10:36:51.733

您可以手动将 jar 安装到本地存储库[http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)或将文件存储路径设置为依赖项，例如

```
<dependency>
    <groupId>com.3dpaty</groupId>
    <artifactId>abc</artifactId>
    <version>0.0.3</version>
        <systemPath>lib/3party.jar</systemPath>
</dependency> 
```

# javascript - javascript - 两次之间的小时差

> ID：11719688
> 
> 赞同：-1
> 
> 时间：2012-07-30T10:31:33.313
> 
> 标签：javascript, time

我需要 JavaScript 中的代码，它以小时为单位返回两个字符串之间的时间差。

例如，字符串是： `20.07.2012, 01:00:00`和`22.07.2012, 15:00:00`：

A 结果是 62 小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:39:38.877

```
var re = /[.:]|, /,
    date1 = "22.07.2012, 15:00:00".split(re).map(Number),
    date2 = "20.07.2012, 01:00:00".split(re).map(Number);

var diffMs = Date.UTC( date1[2], date1[1] - 1, date1[0], date1[3], date1[4], date1[5] ) -
             Date.UTC( date2[2], date2[1] - 1, date2[0], date2[3], date2[4], date2[5] );

var hours = diffMs / (3600 * 1000);
//62 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:39:15.670

如果可用，我建议使用 Dojo Toolkit：请参阅[http://dojotoolkit.org/api/1.7/dojo/date/difference](http://dojotoolkit.org/api/1.7/dojo/date/difference)

# macos - 为 mac 创建 dmg 安装程序

> ID：11719691
> 
> 赞同：-1
> 
> 时间：2012-07-30T10:31:38.300
> 
> 标签：macos, applescript

我需要构建一个 mac 应用程序的 dmg 安装程序。听说可以通过苹果脚本实现。任何人都可以帮助如何轻松完成这项工作。我也不知道 Apple Script。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:35:47.093

使用`hdiutil`命令创建 dmg。

> hdiutil 使用 DiskImages 框架来操作磁盘映像。常见动词包括附加、分离、验证、创建、转换、压缩和刻录。

```
hdiutil create -ov -srcfolder source applicationName.dmg 
```

看看[如何使用命令行工具为 Mac OS X 创建漂亮的 DMG？](https://stackoverflow.com/questions/96882/how-do-i-create-a-nice-looking-dmg-for-mac-os-x-using-command-line-tools)

# java - Java 类加载器：如何替换 3pp 类的方法

> ID：11719694
> 
> 赞同：0
> 
> 时间：2012-07-30T10:31:50.143
> 
> 标签：java, classloader

我尝试替换 3pp 类中的一个方法，该方法由另一个 3pp 类调用。我知道我是否重写了洞类，并修改了类路径顺序；或将其放入 java home 的 lib/ext 中，扩展类加载器将加载我的类而不是原始类。

但是如何从替换类扩展原始类：

```
package com.example
public class Foo extends com.example.Foo {
    @Override
    public void m1() {
    }
} 
```

我知道这个例子不起作用，但我尝试描述目标：这个类扩展了具有相同规范名称的原始类，一个方法已被覆盖，所有其他方法都被继承。所以如果我们增加 3pp 产品的版本，我们不需要修改我们的类，因为我们只覆盖了我们想要覆盖的那个方法。

有人有好的解决方案或好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:43:02.480

你在做什么是一件非常困难的事情，如果你正在开发一个 web 应用程序，如果你试图扩展的类在库中使用，它将不起作用，因为如果在你的 JAR 中有一个类*SomeService*使用类*Foo*类加载器将加载 JAR 中的类。
另一件事是以这种方式覆盖类不太好，我可以建议做的是使用*AOP*覆盖该方法。
如果您使用的是 spring，它有一个强大的系统来执行它[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html)，但它只在 spring 上下文中工作。
否则你可以使用*AspectJ*（真诚地我从未使用过它）。

最后一件事，这个类只是在 3pp 库中使用吗？

# filter - 在 GA 中排除推荐不起作用

> ID：11719695
> 
> 赞同：1
> 
> 时间：2012-07-30T10:31:58.027
> 
> 标签：filter, google-analytics

我在 Google Analytics 中添加了一个过滤器来排除来自我们内部服务的流量，它在源代码中显示为“localhost:4444”。{自定义过滤器、排除、过滤器字段 = 推荐、过滤器模式 = localhost:4444、区分大小写 = 否}

但是，当我查看 Traffic Source -> Referrals 时，localhost:4444 仍显示为源的 1。我认为它应该被排除在外。

这是GA的错误吗？还是我做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-09T23:31:07.497

我有完全相同的问题。这是您需要做的：

*   Google Analytics（分析）管理员 > 过滤器
*   新过滤器
*   称它为“排除本地主机”或任何你想要的
*   过滤器类型 > 自定义
*   过滤字段 > 广告系列来源（我知道，这没有任何意义）
*   过滤模式 > localhost*（不要忘记星号 - 这将过滤掉所有 localhost 流量）
*   验证过滤器 - 如果您有任何流量可言，它将显示在此处。
*   节省

全部完成！你已准备好出发！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:05:44.100

配置文件过滤器只会影响未来的数据，而不是现有数据。如果您尝试过滤现有数据，请创建一个高级段以排除包含 localhost:4444 的“源”。

您还可以尝试将正则表达式添加到您的过滤器以扩大您的网络并希望抓住源头。尝试将过滤器模式更改为`.*localhost:4444.*`。

# php - 如何编写 mysql scipt 来过滤给定日期时间的数据而无需秒？

> ID：11719703
> 
> 赞同：0
> 
> 时间：2012-07-30T10:32:16.903
> 
> 标签：php, mysql

我有这样的日期时间数据：

```
2012-07-30 09:18:20
2012-07-30 09:18:20
2012-07-30 09:18:22
2012-07-30 09:18:23
2012-07-31 19:08:14
2012-07-31 19:08:15
2012-07-31 19:08:15 
```

如何获取日期为 2012-07-30 09:18 的数据计数（没有第二信息）？

选择计数 * 在哪里............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:37:47.007

尝试

```
 SELECT COUNT(*) FROM TABLE GROUP BY STR_TO_DATE('datecolumn','%Y-%m-%d %h:%i'); 
```

有关更多信息，请参见 mySQL：[`STR_TO_DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:39:49.953

```
SELECT COUNT(1) AS cnt
FROM my_table
GROUP BY SUBSTRING_INDEX(datetime_column, ':', 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:44:56.027

还有一种变体——

```
SELECT
  COUNT(*)
FROM
  table
GROUP BY
  datetime_column - INTERVAL EXTRACT(SECOND FROM datetime_column) SECOND 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:45:50.303

你可以试试这个：

这将为您提供总计数，输出日期。

```
select count(*),DATE_FORMAT(created, '%Y-%m-%d') 
from MY_TABLE
group by DATE_FORMAT(created, '%Y-%m-%d'); 
```

如果你想使用 where 作为单个日期（假设你从 PHP 传递变量）

```
select count(*),DATE_FORMAT(created, '%Y-%m-%d') 
from MY_TABLE 
WHERE DATE_FORMAT(created, '%Y-%m-%d') = '2000-02-14' ; 
```

希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T11:17:24.357

```
SELECT DISTINCT count(*), DATE_FORMAT(created, '%Y-%m-%d') as my_date FROM YOUR_TABLE     [WHERE DATE_FORMAT(created, '%Y-%m-%d') = <date needed>] 
```

# c# - LCP 的投影 Gauss-Seidel

> ID：11719704
> 
> 赞同：10
> 
> 时间：2012-07-30T10:32:33.753
> 
> 标签：c#, algorithm

我正在寻找用于解决[线性互补问题](http://en.wikipedia.org/wiki/Linear_complementarity_problem)的 Projected Gauss-Seidel 算法的 C# 实现。到目前为止，我在[Bullet](http://bulletphysics.com/Bullet/BulletFull/classbtSequentialImpulseConstraintSolver.html)库中找到了用 C++ 编写的那个，但不幸的是，它经过了高度优化（因此很难将其翻译成 C#）。

在[类似](https://stackoverflow.com/questions/10865308/do-you-know-a-c-sharp-implementation-of-gauss-newton-and-levenberg-marquardt-met)的问题中，有人提议查看[.NET 的数值库](http://en.wikipedia.org/wiki/List_of_numerical_libraries#.NET_Framework_Languages_C.23.2C_F.23_and_VB.NET)。它们都只包含求解[线性方程组的](http://en.wikipedia.org/wiki/System_of_linear_equations)算法。

**编辑：**即使我找到了一个，它似乎并不完整，所以问题仍然存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-23T03:32:39.737

您在没有投影的情况下实现了 Gauss Seidel。对于投影的 Gauss Seidel，您需要在下限和上限内投影（或钳制）解：

```
public static double[] Solve (double[,] matrix, double[] right,
                              double relaxation, int iterations, 
                              double[] lo, double[] hi)
{
    // Validation omitted
    var x = right;
    double delta;

    // Gauss-Seidel with Successive OverRelaxation Solver
    for (int k = 0; k < iterations; ++k) {
        for (int i = 0; i < right.Length; ++i) {
            delta = 0.0f;

            for (int j = 0; j < i; ++j)
                delta += matrix [i, j] * x [j];
            for (int j = i + 1; j < right.Length; ++j)
                delta += matrix [i, j] * x [j];

            delta = (right [i] - delta) / matrix [i, i];
            x [i] += relaxation * (delta - x [i]);
    // Project the solution within the lower and higher limits
            if (x[i]<lo[i])
                x[i]=lo[i];
            if (x[i]>hi[i])
                x[i]=hi[i];
        }
    }
    return x;
} 
```

这是一个小的修改。这是一个要点，展示了如何从 Bullet 物理库中提取 A 矩阵和 b 向量并使用投影的 Gauss Seidel 解决它：[https ://gist.github.com/erwincoumans/6666160](https://gist.github.com/erwincoumans/6666160)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-02T09:53:51.290

经过一周的搜索，我终于找到[了这本](http://www.gamedev.ru/community/gd_physcomm/articles/?id=709)出版物（俄文，基于 Kenny Erleben 的作品）。在那里描述了一个投影的 Gauss-Seidel 算法，然后用[SOR](http://en.wikipedia.org/wiki/Successive_over-relaxation)和终止条件进行了扩展。所有这些都带有 C++ 中的示例，我用于这个基本的 C# 实现：

```
public static double[] Solve (double[,] matrix, double[] right,
                              double relaxation, int iterations)
{
    // Validation omitted
    var x = right;
    double delta;

    // Gauss-Seidel with Successive OverRelaxation Solver
    for (int k = 0; k < iterations; ++k) {
        for (int i = 0; i < right.Length; ++i) {
            delta = 0.0f;

            for (int j = 0; j < i; ++j)
                delta += matrix [i, j] * x [j];
            for (int j = i + 1; j < right.Length; ++j)
                delta += matrix [i, j] * x [j];

            delta = (right [i] - delta) / matrix [i, i];
            x [i] += relaxation * (delta - x [i]);
        }
    }

    return x;
} 
```

# c# - 在 C# 中创建侦听套接字时，“尝试对不是套接字的东西进行操作”

> ID：11719705
> 
> 赞同：1
> 
> 时间：2012-07-30T10:32:35.493
> 
> 标签：c#, tcplistener

我写了一个服务器程序，有时会出现以下异常。

```
System.Net.Sockets.SocketException: An operation was attempted on something that is   not a socket
   at System.Net.Sockets.Socket..ctor(AddressFamily addressFamily, SocketType  socketType, ProtocolType protocolType)
   at System.Net.Sockets.TcpListener..ctor(IPAddress localaddr, Int32 port) 
```

在极少数情况下会观察到此异常

代码片段如下：

```
listener = new TcpListener(IPAddress.Loopback, port);
                        listener .Start(100); 
```

任何机构都可以帮助我找到造成这种情况的根本原因。我在许多论坛上进行了搜索，但无法得出明确的结论，为什么会发生这种情况。

# ruby - 在 ruby 中解析日期/时间

> ID：11719706
> 
> 赞同：0
> 
> 时间：2012-07-30T10:32:45.093
> 
> 标签：ruby

我正在尝试用 ruby​​ 解析日期，所以我尝试了以下代码：

```
str = "Mon Jul 02 22:19:00 UTC 2012"
puts DateTime.strptime(str, "%a %b %d H%:M%:S% UTC %Y") 
```

但我收到此错误消息：

```
/usr/lib/ruby/1.8/date.rb:1576:in `new_by_frags': invalid date (ArgumentError)
        from /usr/lib/ruby/1.8/date.rb:1601:in `strptime'
        from get-bid.rb:38 
```

当我从字符串中删除时间时`H%:M%:S%`，解析工作得很好。我误用了`strptime`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:17:33.610

您是否尝试过解析功能？

```
Date.parse("Mon Jul 02 22:19:00 UTC 2012") 
```

或者

```
Time.parse("Mon Jul 02 22:19:00 UTC 2012") 
```

这可能会让您从知道确切的输入格式中解放出来

# php - PHPEXCEL在单元格中添加分隔符

> ID：11719710
> 
> 赞同：0
> 
> 时间：2012-07-30T10:33:15.120
> 
> 标签：php, phpexcel

我使用 PhpExcel 将我的一些数据库导出到 csv 中。因为我有很多损坏的数据，所以我会检查它们并在必要时显示错误。

所以当一个字段包含我的分隔符时，我想在我的错误消息中显示（否则它会弄乱我的分页）：

```
$objWriter = PHPExcel_IOFactory::createWriter($this->_objErrorPHPExcel, 'CSV');
    $objWriter->setDelimiter('|');
    $objWriter->setEnclosure( '' );
    $objWriter->setUseBOM( true );
    $objWriter->setPreCalculateFormulas( false );
    $objWriter->save( $strOutputFile );
    unset( $objWriter ); 
```

当我保存我的错误消息时（对于像 em|ail@email.com 这样的电子邮件地址）：

```
$this->$strExcelFileName->getActiveSheet()->setCellValueExplicit('F' . $intRow, $strError ); 
```

而不是保存在我的 F 单元格中

> 电子邮件包含“|” 特点

我结束了

> 电子邮件包含

在 F 中，并且

> |

G中的字符。

然后，当我将电子邮件保存在电子表格中时，我遇到了同样的问题，它被分成 2 个单元格。

感谢您的时间和建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:39:20.693

该解决方案由 DaveRandom 提供！：

> 好吧，我相当确定您的问题将与 $objWriter->setEnclosure( '' ); - 您正在指定一个空字段外壳，这意味着无法引用包含分隔符的字符串，因此显然它将被视为字段分隔符而不是文字字符。我认为你需要做类似 $objWriter->setEnclosure( '"' );

# java - 使用 Apache VFS 恢复文件下载

> ID：11719711
> 
> 赞同：2
> 
> 时间：2012-07-30T10:33:16.920
> 
> 标签：java, apache-commons-vfs

我有一个使用 VFS 通过 FTP 或 SFTP 下载文件的应用程序。当文件很大并且网络连接丢失时，我目前必须重新开始下载。

是否可以使用 VFS 进行可恢复的文件下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:50:46.493

我在公共电子邮件档案中找到了答案：

您可以使用 RandomAccessContent：

```
FileObject fo = VFS.getManager().resolveFile("ftp://..."); 
RandomAccessContent rac = fo.getContent().getRandomAccessContent(RandomAccessMode.READ);
rac.seek(4711); 
```

如果您需要一个 InputStream，您可以使用以下方法获取一个：

```
InputStream is = rac.getInputStream(); 
```

# plugins - Joomla 1.5 安装多个插件

> ID：11719713
> 
> 赞同：3
> 
> 时间：2012-07-30T10:33:19.963
> 
> 标签：plugins, joomla, installation, package

我为 Joomla 2.5 开发了两个插件并将它们打包到一个包中，以简化用户的安装过程。但是现在我正在尝试为Joomla 1.5优化这个包，我找不到任何方法将这两个插件组合成一个包进行安装。分开安装它们可以正常工作，但为 Joomla 2.5 包创建的清单文件 (.xml) 不适用于 Joomla 1.5。任何人都可以给我一些提示或者可能是另一个存在的 Joomla 1.5 包作为例子吗？

谢谢你。

编辑：这两个插件是不同类型的插件。一个用于“内容”，一个用于“editors-xtd”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:06:47.113

对于 1.5，这并不容易。

*   此处发布了一个类似的问题：[如何在一个包中安装组件和路由插件？](https://stackoverflow.com/questions/8543857/how-to-install-component-and-route-plugin-in-one-package)
*   可以在此处找到 1.5 的一些进一步文档：[使用安装程序 API 支持软件包安装](http://docs.joomla.org/Using_the_installer_API_to_support_package_installation)
*   或者在这里：[在一个包中安装多个 Joomla 扩展](http://jeffchannell.com/Joomla/install-multiple-joomla-extensions-in-a-single-package.html)

我不认为您可以创建一个仅安装多个插件的包（在 Joomla 1.5 中）。您必须创建一个虚拟组件，以便该组件的安装 php 文件可以为您安装插件。然后，您可以使用该组件来提供通用配置选项、通用信息和单个位置来更新/卸载您的包。

**注意：** [Joomla 1.5 已于 2012 年 4 月结束生命周期](http://docs.joomla.org/Upgrading_and_Migrating_Joomla)

# algorithm - 一种简单的封闭多边形曲线生成算法

> ID：11719716
> 
> 赞同：6
> 
> 时间：2012-07-30T10:33:29.493
> 
> 标签：algorithm, polygon, curve, maze

我需要一种算法来生成封闭的简单（无自相交）多边形曲线。这将为我的游戏打造一个完美的迷宫。

![我需要的一个粗略的例子](../Images/931de6fb08130ccb7be0771155c31e55.png)

你能指点我正确的关键字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:45:59.373

一个想法：生成一堆随机点，然后使用[alpha 形状](http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.html)将它们包围起来。

您可以调整一个参数来决定生成的多边形有多“紧密”。

* * *

另一个想法：生成一堆随机形状*（例如，生成随机更简单的多边形，或者使用[metaballs](http://en.wikipedia.org/wiki/Metaballs)）*，然后[计算它们的 union](https://stackoverflow.com/questions/9910459/compute-the-area-covered-by-cards-randomly-put-on-a-table/9911857#9911857)。

不过，您可能需要使用一些技巧来确保联合只是一个单一的形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:57:23.010

我用 C++ 编写了以下关于几何算法的单元测试，这些算法需要非自相交的多边形才能工作。它的设计目的不是高效，不可读，而且多边形有时在边缘之间具有相当小的角度。看看你喜不喜欢，如果你愿意，可以扩展它。没有保证。

文件`rpoly.h`：

```
#include <vector>
#include <list>
#include <algorithm>
#include <iterator>
#include <stdexcept>
#include <iostream>

using namespace std;

struct HalfEdge
{
    HalfEdge() {};
    HalfEdge(size_t start, size_t end) : start(start), end(end) {};

    size_t start;
    size_t end;
};

typedef vector<HalfEdge>::iterator edge_iterator;
typedef vector<HalfEdge>::const_iterator const_edge_iterator;

template <class Point>
struct non_intersecting_edges
{
    non_intersecting_edges(const vector<Point>& vertices, vector<HalfEdge>& edgelist)
        : vertices(vertices), edgelist(edgelist) {}

    void operator() (size_t i)
    {
        const Point &p = vertices[i];
        for (edge_iterator it=edgelist.begin(); it!=edgelist.end(); ++it)
        {
            HalfEdge edge = *it;
            Point start_vertex = vertices[it->start];
            Point end_vertex   = vertices[it->end];

            if (point_intersects_edge(p, start_vertex, end_vertex))
                return; // skip this point

            if(!edge_intersects_polygon(start_vertex, p) &&
               !edge_intersects_polygon(end_vertex, p) )
            {
                edgelist.push_back( HalfEdge(i,it->end) );
                it->end = i;
                return;
            }
        }

        cerr << "[rpoly] Warning: no possible edge found for vertex " << p << endl;
    }

private:
    bool point_intersects_edge(const Point& p, const Point& A, const Point& B) const
    {
        double d = (A.y-p.y) * (B.x-p.x) - (B.y-p.y) * (A.x-p.x);
        if (abs(d) < 1e-14)
        {
            return ((A.x <= p.x && p.x <= B.x) || (A.x >= p.x && p.x >= B.x))
                && ((A.y <= p.y && p.y <= B.y) || (A.y >= p.y && p.y >= B.y));
        }
        else return false;
    }

    bool edge_intersects_polygon(const Point& A, const Point& B) const
    {
        double dx = B.x-A.x;
        double dy = B.y-A.y;

        for (const_edge_iterator it=edgelist.begin(); it!=edgelist.end(); ++it)
        {
            double d,u1,u2;

            const Point &C = vertices[it->start];
            const Point &D = vertices[it->end];

            d  = (D.y-C.y)*dx - (D.x-C.x)*dy;

            if (d != 0) {
                u1 = ((D.x-C.x)*(A.y-C.y) - (D.y-C.y)*(A.x-C.x)) / d;
                u2 = (dx*(A.y-C.y) - dy*(A.x-C.x)) / d;

                if (u1 > 0 && u1 <= 1 && u2 > 0 && u2 <= 1) // half-open edges
                    return true;
            }
        }

        return false;
    }

    const vector<Point>& vertices;
    vector<HalfEdge>& edgelist;
};

bool start_index_less(const HalfEdge &a, const HalfEdge &b)
{
    return a.start < b.start;
}

bool start_index_equals(const HalfEdge &a, size_t idx)
{
    return a.start == idx;
}

template <class Point>
struct random_point
{
    Point operator () () const
    {
        return Point( rand() % 1000 - 500, rand() % 1000 - 500 );
    }
};

const HalfEdge& find_edge(const vector<HalfEdge>& list, size_t start)
{
    for (const_edge_iterator it=list.begin(); it!=list.end(); ++it)
        if (it->start == start) return *it;

    throw runtime_error("find_edge: requested edge not found");
}

/// \brief Outputs random, non self-intersecting polygon with \a N vertices
template <class Point, class OutputIterator>
void generate_random_polygon(unsigned int N, OutputIterator out)
{
    if (N<3) return;

    vector<Point> vertices(N);
    generate(vertices.begin(), vertices.end(), random_point<Point>());

    vector<HalfEdge> edgelist(2);
    edgelist.reserve(N);
    edgelist[0] = HalfEdge(0,1);
    edgelist[1] = HalfEdge(1,0);

    non_intersecting_edges<Point> generator(vertices,edgelist);
    for (size_t i=2; i<vertices.size(); ++i)
        generator(i);

    int index=0;
    for (unsigned int i=0; i<N; ++i)
    {
        const HalfEdge &edge = find_edge(edgelist, index);
        *out++ = vertices[edge.start];
        index = edge.end;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:51:18.747

抱歉，我没有任何好的关键字供您查找。

我试图想象一些由 3d 中的三角形近似的 3d 地形。如果在等高线内形成了一个湖泊，使得该湖没有岛屿——那么湖泊的轮廓将是你想要的多边形——并且对于基于现实世界景观的游戏来说，这可能是相当直观的。

如果你能找到用三角形制作 3d 风景的众所周知的算法，我会找到最高点并找到一条循环路径，以使循环中的最低点最大化。根据地形，您可能会得到一些有趣的多边形。

再一次 - 抱歉，我不知道任何完美的算法，但我只是认为这是一个非常有趣的问题。

# mysql - MySQL 高效查询大表统计信息

> ID：11719719
> 
> 赞同：1
> 
> 时间：2012-07-30T10:33:38.363
> 
> 标签：mysql, performance, innodb

**我在一个记录用户配置文件视图的网站上工作**的情况，该数据稍后仅使用 SELECT 语句以各种自定义方式使用。****

 **如果我有一个`profile_views`包含字段`view_id`、`view_date`和的表`profile_id`，我建议使用`view_id`具有自动增量的 as INT(25) 以允许大量 ID。`profile_id`对应于包含用户配置文件的一般字段的表`profile_id`。`profiles`

一个基本的选择语句是“SELECT v.view_id FROM `profile_views`v WHERE v.profile_id='125'”

即使表进入数千行，我也需要 SELECT 语句的速度。

**我的问题是：** -> 添加索引是否明智`profile_id`？这是否有助于加快“where”条款？-> 如果我想在一页上显示多个配置文件的详细信息，我应该索引`profile_id`并为表创建外键约束吗`profiles`？`profile_id`

（使用 mySQL 5.* INNODB）

感谢您的任何建议！不确定什么最适合可扩展性（或者我可能完全错了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:49:28.310

您可以添加覆盖指数以获得最佳性能：

```
SELECT v.view_id 
FROM profile_views v 
WHERE v.profile_id='125'; 
```

例如对于上述查询，您可以添加覆盖索引`KEY(profile_id, view_id)`

看看[这里](https://stackoverflow.com/questions/11578241/is-there-any-way-to-check-the-performance-of-mysql-indexing/11578264#11578264)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:19:53.743

**简短回答：是的，**向您打算定期搜索的任何字段添加索引将提高选择性能。

*但要注意的是，添加到许多索引会影响 SELECT 性能，并且引擎必须确定哪种索引组合最适合您的查询（这通常只会在索引数量荒谬的情况下成为真正的问题）。*

外键始终是保持数据库清洁的好方法，但会略微降低插入/更新性能。关于外键检查的优缺点已经有几个线程。

如果您打算定期显示配置文件的查看次数，对于大规模应用程序，最好使用配置文件表中的计数器。在大型数据集上频繁使用 group by 语句（例如 count(*)）很容易使数据库崩溃。

对于索引优化，EXPLAIN 运算符是您最好的朋友。 [http://www.databasejournal.com/features/mysql/article.php/1382791/Optimizing-MySQL-Queries-and-Indexes.htm](http://www.databasejournal.com/features/mysql/article.php/1382791/Optimizing-MySQL-Queries-and-Indexes.htm)**

# components - 如何在 joomla 2.5 中的项目中添加多个类别

> ID：11719726
> 
> 赞同：0
> 
> 时间：2012-07-30T10:34:12.223
> 
> 标签：components, joomla2.5

我正在尝试在 Joomla 中构建一个组件，我希望一个项目属于多个类别。

每当我在 xml 表单中选择 ]multiple=multiple 并提交表单时，catid 设置为零。

```
//this is the code
    <code section>

  <field
 name="catid"
 multiple="multiple"
 type="category">
<option value="0">JOPTION_SELECT_CATEGORY</option>
</field>
How do I achieve that?

Secondly where is code to insert catid values in db.
protected function loadFormData()
{
// Check the session for previously entered form data.
 $data = JFactory::getApplication()->getUserState('com_xyz.edit.xyz.data', array());
if (empty($data))
 {
  $data = $this->getItem();
   }
    print_r($data);
     return $data;
  } 
```

任何人都可以帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:42:30.663

我建议使用自定义“复选框”字段而不是“类别”字段，因为我认为它不支持“多个”值。

我似乎[这个线程正在描述同样的问题并且有解决方案](http://forum.joomla.org/viewtopic.php?t=717387)。

# entity - xtraGrid NewRow 和实体框架

> ID：11719728
> 
> 赞同：0
> 
> 时间：2012-07-30T10:34:16.960
> 
> 标签：entity, xtragrid

```
orderBindingSource.DataSource = _orderEntity;
orderLineBindingSource.DataSource = _orderEntity.OrderLines;
xtraGridOrderLine.DataSource = orderLineBindingSource; 
```

如何实现以下任务？

1/ 当用户开始在 NewRow 上键入时，应将一个实体添加到 _orderEntity.OrderLines。

2/ 当用户取消 NewRow 时，插入的实体应该从 _orderEntity.OrderLines 中移除。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:32:31.343

```
 void viewOrderLine_InitNewRow(object sender, InitNewRowEventArgs e)
    {
        var row = (OrderLine)viewOrderLine.GetRow(viewOrderLine.FocusedRowHandle);
        row.Order = _orderEntity;
        _orderEntity.OrderLines.Add(row);
        viewOrderLine.FocusedColumn = viewOrderLine.VisibleColumns[0];
    } 
```

# r - R中的均方根函数

> ID：11719737
> 
> 赞同：17
> 
> 时间：2012-07-30T10:34:53.923
> 
> 标签：r, function, statistics

一个非常简短的问题。经过大量搜索，我找不到计算一组整数的 RMS 的函数。R中是否存在这样的功能？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-30T10:43:31.860

我没有搜索函数，但你可以编写它

```
x <- 1:10
sqrt(sum(x^2)/length(x))
6.204837 
```

更好的选择是使用`mean`函数

```
> sqrt(mean(x^2))
[1] 6.204837 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-21T11:27:15.633

`rms(x)`包中的函数[`{seewave}`](http://rug.mnhn.fr/seewave/HTML/MAN/rms.html)必须产生相同的值。

# jquery - jQuery点击事件android

> ID：11719738
> 
> 赞同：0
> 
> 时间：2012-07-30T10:34:54.087
> 
> 标签：jquery, mobile, touch

我对点击事件和触摸屏有点困惑，我觉得它不适用于移动设备，但我只是在使用 jquery 1.7 进行测试并点击事件，例如：“$("#testlink").on("click.. .” 在我的带有 android 2.2 的手机上完美运行，我不使用任何额外的库，只是标准 jquery 1.7。这是否意味着 jquery 1.7 已经适用于触摸屏并且我们不必使用 touchstart 事件？

# java - 使用 SAAJ 进行 Java SOAP 调用的 Blowfish 加密

> ID：11719743
> 
> 赞同：0
> 
> 时间：2012-07-30T10:35:10.737
> 
> 标签：java, soap, encryption, blowfish, saaj

我们使用标准 Java/SAAJ 功能来创建 SOAP 消息并执行 Web 服务 (WS) 调用。到目前为止，跨 HTTP 传输的通信未加密，并且使用这种方法在端点上调用 WS 可以正常工作：

```
SOAPConnectionFactory scf = SOAPConnectionFactory.newInstance();
SOAPConnection con = scf.createConnection();
URL endpoint = new URL(endpointUrl); // configured HTTP URL

// "message" is passed as parameter (a SOAPMessage object)
SOAPMessage response = con.call(message, endpoint);
con.close(); 
```

现在我们的客户希望我们使用 Blowfish 加密所有流量。我知道我可以使用以下简单方法加密任意数据（此示例仅使用随机密钥）：

```
KeyGenerator kgen = KeyGenerator.getInstance("Blowfish");
SecretKey skey = kgen.generateKey();
byte[] raw = skey.getEncoded();
SecretKeySpec skeySpec = new SecretKeySpec(raw, "Blowfish");

Cipher cipher = Cipher.getInstance("Blowfish");
cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
String inputString = "This is just an example";
byte[] encrypted = cipher.doFinal(inputString.getBytes());

Cipher decCipher = Cipher.getInstance("Blowfish");
decCipher.init(Cipher.DECRYPT_MODE, skeySpec);
byte[] decrypted = decCipher.doFinal(encrypted);

assertEquals(inputString, new String(decrypted)); 
```

但是，缺少的链接是：**如何将这两个部分放在一起，以便我可以使用 Blowfish 加密有效负载并在收到响应后对其进行解密？**

Java 提供的标准工具（`SOAPMessage`等`SOAPConnection`）似乎根本不支持任何加密。我已经看到 Spring`WebServiceTemplate`支持的`ClientInterceptor`实例可能对此有所帮助。但是，我将不得不重写我们的 WS 代码以使用 spring-ws。而且我还没有在[他们的参考文档](http://static.springsource.org/spring-ws/site/reference/html/security.html)中找到解释如何使用 spring-ws 进行这种加密的示例。

我错过了一些加密通信的简单方法吗？如果是，那是什么？如果没有，有哪些好的选择可以实现客户的要求？

更新：使用 HTTPS 作为安全传输不是一种选择。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:47:47.267

这篇文章很长，所以很难在这里总结，但是您可能想要使用 Web Services Security，IBM 有一篇很棒的文章。

[http://www.ibm.com/developerworks/java/library/j-jws5/index.html](http://www.ibm.com/developerworks/java/library/j-jws5/index.html)

但是，你会有几个问题，一个是密钥交换，对于 Blowfish，因为它在客户端和服务器端需要相同的密钥，所以你冒着有人拦截密钥的风险，除非你可以在跳跃驱动器上走过它例子。

您可能想查看数据并查看需要加密的部分，然后您可以使用 RSA 加密对称密钥，将其作为参数传递到您的 SOAP 服务中，该密钥用于加密任何需要加密的字段受保护。

通过使用公钥加密来执行此操作，您可以在每次调用时更改 Blowfish 密钥，并且密钥交换仍然是安全的，因为需要私钥（在服务器上）来恢复密钥。

# ruby-on-rails - 如何在 Facebook、Twitter 和 Linkedin 上发布或分享我的 Rails 应用程序事件

> ID：11719744
> 
> 赞同：-1
> 
> 时间：2012-07-30T10:35:21.487
> 
> 标签：ruby-on-rails, facebook, twitter, linked-list

嗨，我想与 facebook、twitter 和 linkedin 分享我的 rails 应用程序问题、答案、评论等。我使用的是 rails 3.2.0。

是否只有一颗宝石可以做这些事情。

如果不是您将推荐的宝石，我已经使用这些宝石进行登录

```
 omniauth-facebook
  omniauth-twitter
  omniauth-linkedin 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:40:43.887

这太棒了，不需要任何宝石。

[https://www.addthis.com/get/sharing#.UBZkUTQgeZw](https://www.addthis.com/get/sharing#.UBZkUTQgeZw)

您需要将给定的脚本添加到您的网站，您还可以自定义小部件。

# objective-c - 将 NSImage 转换为 NSData

> ID：11719747
> 
> 赞同：2
> 
> 时间：2012-07-30T10:35:37.163
> 
> 标签：objective-c, xcode, macos, image, cocoa

我得到这样的 NSImage ：

```
imageG = [[[NSImage alloc] initWithSize:NSMakeSize(imageN.size.width, imageN.size.height)] autorelease];
[imageG addRepresentation:[NSCIImageRep imageRepWithCIImage:result]]; 
```

结果真的很好。所以我认为没有错误。然后我尝试像这样将此图像转换为 NSData：

```
 NSData *imgData = [imageG TIFFRepresentation]; 
```

我收到错误：

```
Thread 1: EXC_BAD_ACCESS (code=13, adress=0x0) 
```

在那条线上。我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:43:42.157

您在创建**对象时****需要`retain`**它，当您要求它进行数据重新定向时，它似乎正在被重新分配。

`imageG = [[[[NSImage alloc] initWithSize:NSMakeSize(imageN.size.width, imageN.size.height)] retain] autorelease];`

通常，如果您从初始化程序创建对象 - 而不是工厂方法 - 您应该保留并自动释放它。这样做的好处以及其他关于内存管理的好技巧可以在以下位置找到：[为什么要自我实现的 getter 保留并自动释放返回的对象？](https://stackoverflow.com/questions/801828/why-should-a-self-implemented-getter-retain-and-autorelease-the-returned)

还需要注意，这`BAD_ACCESS`表明存在某种内存问题。

# sql-server - SQL Server 端点端口

> ID：11719749
> 
> 赞同：1
> 
> 时间：2012-07-30T10:35:56.480
> 
> 标签：sql-server, sql-server-2008, cluster-computing

我有两台安装了 SQL Server 2008 R2 的虚拟机。他们都可以看到对方，但我无法创建镜像集群，因为它们具有相同的端点端口号。

有可能改变它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:00:43.507

解决了

```
USE master; GO CREATE ENDPOINT [CustomConnection] STATE = STARTED AS TCP (LISTENER_PORT = 1500, LISTENER_IP =ALL) FOR TSQL() ; GO 
```

# netbeans - netbeans 亚马逊弹性 bean 连接

> ID：11719750
> 
> 赞同：0
> 
> 时间：2012-07-30T10:36:01.823
> 
> 标签：netbeans, amazon-ec2, region, amazon-elastic-beanstalk

当我尝试将我的 Netbeans 与 Amazon 连接时，我遇到了一个问题，由于某种原因，它可以找到我的环境设置，并且我发现了问题所在。我在非默认区域有一个环境（即我在欧盟而不是 USA-Verginia））

有没有能力切换这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:10:07.613

我认为这个问题已经解决： http://netbeans.org/bugzilla/show_bug.cgi?id= [219665](http://netbeans.org/bugzilla/show_bug.cgi?id=219665)

将您的 Netbeans 版本更新到 7.3 以查看新版本的 Beanstalk 插件。

# jquery - 每当有人单击或悬停在具有 4-5 个超链接（菜单项）的菜单上时，如何使用 jquery 更改 Div 中的图像

> ID：11719751
> 
> 赞同：0
> 
> 时间：2012-07-30T10:36:04.840
> 
> 标签：jquery, html

我可以想到各种解决方案，例如创建 3 个不同的 HTML 文档，每个文档都有不同的图像，并将这些 HTML 文件链接到我想要更改图像的菜单。

我知道 jquery 是可能的，我只需要一些帮助来理解，这样我就可以实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:48:17.577

可能你正在寻找这样的东西（***见[演示](http://jsfiddle.net/fWpJz/1/)***）：

HTML

```
​&lt;div class="menu">
  <a href="#" data-image-src="1.jpg">link 1</a>
  <a href="#" data-image-src="2.jpg">link 2</a>
  <a href="#" data-image-src="3.jpg">link 3</a>
  <a href="#" data-image-src="4.jpg">link 4</a>
  <a href="#" data-image-src="5.jpg">link 5</a>
</div>

​&lt;div id="container">
  <img src="">
</div>​ 
```

JavaScript

```
​$(document).ready(function () {
    $('.menu a').hover(function () {
        $('#container img').attr('src', $(this).data('image-src'));
    });
});​ 
```

*在此代码中，您放置图像源，当您将鼠标悬停在链接的数据属性中的链接上时应显示该源。当您将鼠标悬停在链接上时，它会调用回调，其中当前的图像来源会发生变化。*

**更新**

***见[演示](http://jsfiddle.net/fWpJz/1/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:49:21.383

我建议您查看以下内容：

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

只需创建一个函数来处理图像交换，然后为元素绑定一个事件处理程序以悬停/单击。

您也可以使用 CSS 来实现这一点，例如 .class:hover { background-image: .... }

# iphone - Instruments .trace 文件问题

> ID：11719753
> 
> 赞同：4
> 
> 时间：2012-07-30T10:36:10.080
> 
> 标签：iphone, ios, instruments, ui-automation, ios-ui-automation

*   当我检查来自 SVN 的测试脚本（我朋友提交的文件）时，我不知道为什么脚本不可编辑，播放脚本和停止脚本选项被禁用，并且根本没有发生录制。
*   当我创建一个新的自动化项目并导入相同的脚本文件时，它工作正常。

**其他人提交的 .trace 文件无法正常工作的原因可能是什么？可能的解决方案是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:54:05.600

您好，我认为您应该检查所有标头路径，例如用户标头路径，如果标头路径将正确定义，您还应该检查您是否使用正确的版本我的意思是您的所有脚本都可以在所有设备上进行通信，

你可以检查你的 .trace 文件听到

转到 Finder，获取文件的上下文菜单，选择“显示包内容”。在命令行 shell 中，只需将其导航到文件，就好像它是一个目录一样。

希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:39:39.580

不确定这是不是答案。但是如果你打开 .trace 文件的内容，其实有一个模板文件。仪器模板的位置对于不同的用户在同一时间是不同的，这取决于您安装的 xcode 版本。也许您朋友的模板文件提供的模板路径与您计算机上的模板路径不同。只是我的猜测。

# vba - 如何在 Visual Basic 中识别 MS Office 使用的显示语言（即工具栏/菜单）？

> ID：11719754
> 
> 赞同：3
> 
> 时间：2012-07-30T10:36:10.437
> 
> 标签：vba, office-2007

我有一个从 MS Excel 电子表格生成 MS Word 报告的宏。我在报告中使用的样式在宏中用英文编码。

我的一些团队将他们的 MS Office 显示语言设置为法国（这并不奇怪，我在法国工作）。因此，我的宏不起作用，因为样式标题（英文）用于设置样式。例如，我告诉 MS Word 使用样式“List Bullet 1”，而 MS Word 中的相应样式是“Liste à puce 1”，因此找不到匹配项。

所以我的问题是，如何检测 MS Office 显示语言，然后以正确的语言设置样式值？

另一个问题是，除了标题之外，还有其他引用样式的方式吗？

此致，

科尔姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:59:55.087

科尔马空中客车公司，

GSerg 的链接为 Microsoft VBA 如何处理语言设置提供了极好的参考。

使用 VBA，您可以为各种目的引用 word 中的语言。例如，您可以确定当前语言，将其存储在变量中，并将其显示在消息框中：

```
 Sub LanguageMessageBox()

        CurrentLanguage = Selection.LanguageID
        MsgBox (CurrentLanguage)

    End Sub 
```

您可以在此处找到语言 ID 列表：http: [//msdn.microsoft.com/en-us/library/bb213877 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb213877(v=office.12).aspx)

您也可以简单地引用语言本身，特别是如果您不想查看数字或以某种算法方式使用数字：

```
Sub LanguageMessageBox()

    CurrentLanguage = Selection.LanguageID
    MsgBox (Languages(CurrentLanguage))

End Sub 
```

至于更改语言设置，您可以通过引用语言 ID 轻松更改语言设置：

```
Sub ChangeLanguage()

    ' 1033 is wdEnglishUS
    ' 1034 is wdSpanish        
    ' 1036 is wdFrench

    If Selection.LanguageID = 1033 Then
        Selection.LanguageID = 1034
        Else
        Selection.LanguageID = 1036
    End If

'Set the grammar dictionary for error checking purposes
Set dicGrammar = Languages(Selection.LanguageID).ActiveGrammarDictionary

End Sub 
```

# java - 如何在 SOAPHandler 中不进行任何转换就发送 xml

> ID：11719756
> 
> 赞同：1
> 
> 时间：2012-07-30T10:36:12.890
> 
> 标签：java, web-services, websphere, jax-ws, handlers

IBM WebSphere Jax-WS RI 框架。我有一个chunckHandler。我需要向客户端发送一行 xml 响应。我制作单行 xml。调试显示一切正常 - xml 是单行的。但在发送框架之前进行“漂亮打印”输出。它需要签名并且不需要任何 xml 转换。一般问题：如何在 SOAPHandler 中不进行任何转换就发送 xml 数据。

```
public class SignHandler implements SOAPHandler<SOAPMessageContext>{

        private String makeOneLineXml(String xml) throws IOException{
            BufferedReader br = new BufferedReader(new StringReader(xml));
            String line=null;
            StringBuilder sb = new StringBuilder();

            while((line=br.readLine())!= null){
                sb.append(line.trim());
            }
            return sb.toString();

        }

 public boolean handleMessage(SOAPMessageContext context) {

    Boolean isRequest = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

    //for response message only, true for outbound messages, false for inbound
    if(isRequest){

    try{
        SOAPMessage soapMsg = context.getMessage();
        SOAPEnvelope soapEnv = soapMsg.getSOAPPart().getEnvelope();
        SOAPHeader soapHeader = soapEnv.getHeader();                   
        Document orig = soapEnv.getOwnerDocument();
        orig = 
// I need  send to client one-line-xml
        XmlUtils.deserialize(makeOneLineXml(XmlUtils.serializeNode(signedSoap, false, false)));
        soapMsg.saveChanges();

           //tracking
           soapMsg.writeTo(System.out); // In CONSOLE ALL ok. Xml is one line

        }catch(SOAPException e){
            System.err.println(e);
        }catch(IOException e){
            System.err.println(e);
        }

        }

      //continue other handler chain
      return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:40:20.170

我在 SoapUI 中进行的所有测试。但默认情况下，soapUI 响应是漂亮打印格式的。所有的问题都在这。

要替换 SoapMessage 中的可选soap xml，您可以使用以下命令：

```
 private SOAPMessage makeSOAPMessage(String msg)
        {
        try {

            SOAPMessage message = MessageFactory.newInstance().createMessage();

            StringReader sReader = new StringReader(msg);                        

            message.getSOAPPart().setContent(new StreamSource(sReader));
            message.saveChanges();
             return message;
        }
        catch (Exception e) {
            return null;
        }
        }   
.....................

 context.setMessage(makeSOAPMessage(yours_xml_string)); 
```

在此之后，您会在客户端收到这个 xml_string。它对 xmldsig、​​jax-wss 安全问题很有用。

# c - 寻找起点，int main()

> ID：11719761
> 
> 赞同：0
> 
> 时间：2012-07-30T10:36:37.590
> 
> 标签：c, gcc, compilation, linker, main

我目前正在用 C 编译一个购买的数据堆栈。我使用他们自己的工具来编译它，在后台使用 gcc。我可以将标志和参数传递给我认为合适的 gcc。我想知道，使用的 main() 来自哪个文件。也就是在项目中，哪个文件是起点。有没有办法告诉 gcc 生成文件列表或类似文件，因为我不知道 main() 是从哪个文件中获取的？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:46:31.990

您可以反汇编最终的可执行文件以找到起点。尽管您没有提供任何其他信息来为您提供更多帮助。我正在使用示例代码来演示该过程。

```
#include <stdio.h>

   int main() {
           printf("hello world\n");
           return 0;
   } 
```

现在该对象`main.o`具有以下内容

```
[root@s1 sf]# gcc -c main.c
[root@s1 sf]# nm main.o
0000000000000000 T main
                 U puts 
```

你可以看到 main 没有初始化。因为它会在链接阶段发生变化。现在链接后：

```
$gcc main.o
$nm a.out
                 U __libc_start_main@@GLIBC_2.2.5
0000000000600874 A _edata
0000000000600888 A _end
00000000004005b8 T _fini
0000000000400390 T _init
00000000004003e0 T _start
000000000040040c t call_gmon_start
0000000000600878 b completed.6347
0000000000600870 W data_start
0000000000600880 b dtor_idx.6349
00000000004004a0 t frame_dummy
00000000004004c4 T main 
```

您会看到 main 现在有一个地址。但它仍然不是最终的。因为这个 main 将由 C 运行时动态调用。您可以看到谁将参与其中`U __libc_start_main@@GLIBC_2.2.5`：

```
[root@s1 sf]# ldd a.out 
    linux-vdso.so.1 =>  (0x00007fff61de1000)  /* the linux system call interface */
    libc.so.6 => /lib64/libc.so.6 (0x0000003c96000000) /* libc runime , this will invoke your main*/
    /lib64/ld-linux-x86-64.so.2 (0x0000003c95c00000) /* dynamic loader */ 
```

现在您可以通过查看反汇编来验证这一点：

```
00000000004003e0 <_start>:
..........
4003fd: 48 c7 c7 c4 04 40 00    mov    rdi,0x4004c4 /* address of start of main */
400404: e8 bf ff ff ff          call   4003c8 <__libc_start_main@plt> /* this will set up the environment for main, like pushing argc and argv to stack */
........... 
```

如果您没有源代码，那么您可以在可执行文件中搜索对`libc_start_main`或`main`或的引用，`start`以查看您的可执行文件如何初始化并启动`main`.

现在所有这些都是在使用默认链接描述文件完成链接时完成的。许多大项目会使用自己的链接器脚本。如果您的项目有自定义链接描述文件，那么根据所使用的链接描述文件查找起点会有所不同。有些项目不使用`glibc's`运行时。在这种情况下，仍然可以通过破解目标文件、库档案等来找到起点。

如果您的二进制文件`stripped`来自符号，那么您实际上必须依靠您的汇编技能来找到它的开始位置。

我假设您没有源代码，即堆栈仅与一些库和一些标头定义一起分发。（商业软件供应商的常见做法）。

但是，如果您有资源，那么它就太微不足道了。只是`grep`你的方式。一些答案已经指出了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:40:10.393

从哪里`main()`被调用是依赖于实现的——使用 GCC，它很可能是 /usr/lib 中的存根对象文件被调用`crt0.o`或`crt1.o`从中调用它。（此文件包含操作系统相关的符号，当您的应用程序加载到内存时，内核会自动调用该符号。在 Linux 和 Mac OS X 上，这称为`start`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:57:32.733

您使用调试符号编译项目，从`gdb`可执行文件开始，然后编写`list main`，然后是 ' `break`' 或直接`break main`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:02:17.437

您可以使用`objdump -t`列出目标文件中的符号。因此，假设您在 Linux 上，并且还假设目标文件仍在某处，您可以这样做：

```
find -name '*.o' -print0 \
| xargs -0 objdump -t \
| awk '/\.o:/{f=$1} /\.text\.main/{print f, $6}' 
```

这将打印一个目标文件列表以及`main`它们包含的引用。通常应该有一个从目标文件到源文件的简单映射。如果有多个包含该符号的目标文件，那么这取决于其中一个实际链接到您正在查看的二进制文件中，因为`main`每个可执行二进制文件不能超过一个（可能除了一些非常奇特的黑魔法）。

链接应用程序并去除调试符号后，通常没有迹象表明特定函数来自哪个源文件。例外情况是包含函数名称作为字符串文字的文件，例如使用`__FILE__`宏。在剥离调试符号之前，您可以使用调试器来获取该信息。如果包含调试符号，那就是。

# php - 带有 foreach 循环的 PHP 多维数组，仅以随机顺序显示 15 个值中的 9 个值

> ID：11719763
> 
> 赞同：0
> 
> 时间：2012-07-30T10:36:43.503
> 
> 标签：php

我有一个带有 foreach 循环的多维数组，它以随机顺序显示 15 个中的 9 个值
//Array Values

```
$sponsors = array(
    array('facebook','The biggest social network in the world.','http://www.facebook.com/'),
    array('adobe','The leading software developer targeted','http://www.adobe.com/'),
    array('microsoft','One of the top software companies','http://www.microsoft.com/'),
    array('sony','A global multibillion electronics','http://www.sony.com/'),
    array('dell','One of`enter code here` the biggest computer','http://www.dell.com/'),
    array('ebay','The biggest online auction and shopping websites.','http://www.ebay.com/'),
    array('digg','One of the most popular web 2.0 social networks.','http://www.digg.com/'),
    array('google','The company that redefined web search.','http://www.google.com/'),
    array('ea','The biggest computer game manufacturer.','http://www.ea.com/'),
    array('mysql','The most popular open source database engine.','http://www.mysql.com/'),
    array('hp','One of the biggest computer manufacturers.','http://www.hp.com/'),
    array('yahoo','The most popular network of social media portals','http://www.yahoo.com/'),
    array('cisco','The biggest networking and communications techno','http://www.cisco.com/'),
    array('vimeo','A popular video-centric social networking site.','http://www.vimeo.com/'),
    array('canon','Imaging and optical technology manu facturer.','http://www.canon.com/'));

//Shuffling the values
shuffle($sponsors);

//To process all values
foreach($sponsors as $company)
{
  if(isset($company[0]) && !in_array($company[0],$sponsors))
     {//to print only 9 values out of 15
      for($j=1; $j<=9; $j++)
      {
        echo'
           <div class="sponsor" title="Click to flip">
           <div class="sponsorFlip">
           <img src="img/sponsors/'.$company[0].'.png" alt="More about '.$company[0].'" />
           </div>
           <div class="sponsorData">
           <div class="sponsorDescription">'.$company[1].'</div>
           <div class="sponsorURL"><a href="'.$company[2].'">'.$company[2].'</a>
           </div>
           </div>
           </div>
          ';
      }
      }
}//end of for each 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:41:24.493

使用[array_slice](http://php.net/manual/en/function.array-slice.php)获取前 9 个元素。

```
foreach (array_slice($sponsors, 0, 9) as $company) {
  echo'
    <div class="sponsor" title="Click to flip">
    <div class="sponsorFlip">
    <img src="img/sponsors/'.$company[0].'.png" alt="More about '.$company[0].'" />
    </div>
    <div class="sponsorData">
    <div class="sponsorDescription">'.$company[1].'</div>
    <div class="sponsorURL"><a href="'.$company[2].'">'.$company[2].'</a>
    </div>
    </div>
    </div>
    ';
}//end of for each 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:40:05.837

使用 array_slice 从打乱的数组中选择前 9 个值。

```
$sponsors = array_slice($sponsors, 0, 9);

foreach($sponsors as $company)
{
    echo'
       <div class="sponsor" title="Click to flip">
       <div class="sponsorFlip">
       <img src="img/sponsors/'.$company[0].'.png" alt="More about '.$company[0].'" />
       </div>
       <div class="sponsorData">
       <div class="sponsorDescription">'.$company[1].'</div>
       <div class="sponsorURL"><a href="'.$company[2].'">'.$company[2].'</a>
       </div>
       </div>
       </div>
      ';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:41:15.850

`array_rand()`是最简单最整洁的方式，我觉得：

```
$sponsors = array(
    array('facebook','The biggest social network in the world.','http://www.facebook.com/'),
    array('adobe','The leading software developer targeted','http://www.adobe.com/'),
    array('microsoft','One of the top software companies','http://www.microsoft.com/'),
    array('sony','A global multibillion electronics','http://www.sony.com/'),
    array('dell','One of`enter code here` the biggest computer','http://www.dell.com/'),
    array('ebay','The biggest online auction and shopping websites.','http://www.ebay.com/'),
    array('digg','One of the most popular web 2.0 social networks.','http://www.digg.com/'),
    array('google','The company that redefined web search.','http://www.google.com/'),
    array('ea','The biggest computer game manufacturer.','http://www.ea.com/'),
    array('mysql','The most popular open source database engine.','http://www.mysql.com/'),
    array('hp','One of the biggest computer manufacturers.','http://www.hp.com/'),
    array('yahoo','The most popular network of social media portals','http://www.yahoo.com/'),
    array('cisco','The biggest networking and communications techno','http://www.cisco.com/'),
    array('vimeo','A popular video-centric social networking site.','http://www.vimeo.com/'),
    array('canon','Imaging and optical technology manufacturer.','http://www.canon.com/')
);

for ($i = 0; $i < 9; $i++) {
  $company = array_splice($sponsors, array_rand($sponsors), 1);
  echo'
           <div class="sponsor" title="Click to flip">
           <div class="sponsorFlip">
           <img src="img/sponsors/'.$company[0].'.png" alt="More about '.$company[0].'" />
           </div>
           <div class="sponsorData">
           <div class="sponsorDescription">'.$company[1].'</div>
           <div class="sponsorURL"><a href="'.$company[2].'">'.$company[2].'</a>
           </div>
           </div>
           </div>
          ';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:41:34.217

使用[`array_slice`](http://php.net/manual/en/function.array-slice.php)或[`array_splice`](http://php.net/manual/en/function.array-splice.php)

**注意**：这两个功能有细微的差别。因此请查看手册并根据您的需要进行选择。

祝你好运

# mysql - 选择所有记录但排除链接记录

> ID：11719766
> 
> 赞同：1
> 
> 时间：2012-07-30T10:36:58.660
> 
> 标签：mysql, database

我有以下带有一些示例数据的 mysql 表。

**1) 表：ai_shipment**

```
+----+---------------------+---------------------+------------------+
| id | booking_date        | loading_date        | container_number |
+----+---------------------+---------------------+------------------+
|  1 | 2012-08-03 00:00:00 | 2012-08-04 00:00:00 | ABB987987BBC6    |
|  2 | 2012-08-05 00:00:00 | 2012-08-07 00:00:00 | BHJKKU78786GH    |
+----+---------------------+---------------------+------------------+ 
```

**2）表：ai_purchase_item**

```
+----+---------+----------+-----------+-----------+
| id | item_id | quantity | cost      | rate      |
+----+---------+----------+-----------+-----------+
|  1 |       1 |       50 | 1200.0000 | 1355.0000 |
|  2 |       2 |       20 |  550.0000 |  675.0000 |
|  3 |       4 |       70 |   70.0000 |   70.0000 |
|  4 |       6 |       90 |   90.0000 |   90.0000 |
|  5 |       7 |       80 |   80.0000 |   80.0000 |
+----+---------+----------+-----------+-----------+ 
```

**3) 表：shipping_purchase_item**

```
+----+-------------+------------------+
| id | shipment_id | purchase_item_id |
+----+-------------+------------------+
|  1 |           1 |                2 |
|  2 |           2 |                3 |
+----+-------------+------------------+ 
```

基本上，我将所有购买的物品详细信息存储在 中`ai_purchase_item`，`ai_shipment`存储运输详细信息，并`ai_shipment_purchase_item`存储已运输物品的记录。

我想做的是，我想从中选择所有`ai_purchase_item`未发货的记录。这意味着外键不应该存在于`ai_shipment_purchase_item`.

参考上面的记录，我期望得到的结果是。

```
+----+---------+----------+-----------+-----------+
| id | item_id | quantity | cost      | rate      |
+----+---------+----------+-----------+-----------+
|  1 |       1 |       50 | 1200.0000 | 1355.0000 |
|  4 |       6 |       90 |   90.0000 |   90.0000 |
|  5 |       7 |       80 |   80.0000 |   80.0000 |
+----+---------+----------+-----------+-----------+ 
```

我尝试过这样的事情（我知道 sql 查询不正确）

```
 SELECT 
    pi.id, 
    pi.item_id, 
    pi.quantity, 
    pi.cost,
    pi.rate 
 FROM 
    ai_purchase_item pi 
 JOIN 
    ai_shipment_purchase_item spi ON spi.purchase_item_id = pi.id
 WHERE NOT EXISTS (SELECT spi.purchase_item_id WHERE spi.purchase_item_id = pi.id) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:40:05.107

在 MySQL 中，有三种常见的方法来查找一个表中存在但在另一个表中缺失的值：

*   `LEFT JOIN`
*   `NOT EXISTS`
*   `NOT IN`

这是使用的方法`NOT EXISTS`：

```
SELECT 
    pi.id, 
    pi.item_id, 
    pi.quantity, 
    pi.cost,
    pi.rate 
FROM 
    ai_purchase_item AS pi 
WHERE NOT EXISTS
(
    SELECT *
    FROM ai_shipment_purchase_item AS spi
    WHERE spi.purchase_item_id = pi.id
) 
```

这是一个`LEFT JOIN`：

```
 SELECT 
    pi.id, 
    pi.item_id, 
    pi.quantity, 
    pi.cost,
    pi.rate 
 FROM 
    ai_purchase_item AS pi 
 LEFT JOIN 
    ai_shipment_purchase_item AS spi ON spi.purchase_item_id = pi.id
 WHERE spi.purchase_item_id IS NULL 
```

这是`NOT IN`：

```
SELECT 
    pi.id, 
    pi.item_id, 
    pi.quantity, 
    pi.cost,
    pi.rate 
FROM 
    ai_purchase_item AS pi 
WHERE pi.id NOT IN
(
     SELECT purchase_item_id
     FROM ai_shipment_purchase_item
) 
```

Quassnoi 的以下文章比较了每种方法的性能：

*   [NOT IN vs. NOT EXISTS vs. LEFT JOIN / IS NULL: MySQL](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)

结论是：

> 在 MySQL 中搜索缺失值的最佳方法是使用 LEFT JOIN / IS NULL 或 NOT IN 而不是 NOT EXISTS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:41:53.440

```
select * from ai_purchase_item where id not in (select distinct(purchase_item_id) from shipment_purchase_item ) 
```

# c# - 可缓存的认证响应

> ID：11719768
> 
> 赞同：2
> 
> 时间：2012-07-30T10:37:05.760
> 
> 标签：c#, html, browser-cache

有人告诉我有这个

```
<meta http-equiv='pragma' content='no-cache'>
<meta http-equiv='cache-control' content='no-store'> 
```

我不确定这是否需要。我使用了 .net 4、IIS 7.5 和 mvc 应用程序。该站点有一些安全区域可以查看敏感内容。而且我相信这对于 .net 项目来说是不必要的。

如果我在这方面错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:39:43.267

这些标签试图告诉浏览器不要缓存您的页面。这通常不需要，但是在 Ajax 页面中使用（作为标题）以防止浏览器缓存响应。

您通常会添加一个`Expires`标头以防止缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:42:27.947

在 IIS 中默认情况下两者都不会添加。如果您不希望（行为良好的）客户端缓存页面内容，则需要这些服务器标头（或元 http 等效项）。

有关 HTTP 缓存的更多信息，HTTP 中的[标头字段定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)和[缓存](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html)

在我看来，一个更好的方法是将它们设置为 HTTP 标头，如此处，[如何将站点范围的无缓存标头添加到 MVC 3 应用程序](https://stackoverflow.com/questions/7087859/how-do-i-add-site-wide-no-cache-headers-to-an-mvc-3-app)

# android - 作为静态属性的方法的 Android 结果

> ID：11719770
> 
> 赞同：0
> 
> 时间：2012-07-30T10:37:07.960
> 
> 标签：android

下面的代码会有效吗？我的意思是，它实际上是否只运行一次并且结果将缓存在属性中，因此下一次调用将不再重新运行该方法？

```
public static final String LOG_TAG = MyApplication.getContext().getApplicationInfo().name; 
```

不知何故，我无法在任何地方找到它。

评论。

由于你们似乎专注于不重要的事情，这里是更改后的代码：

```
public static final String SomeVar = MyApplication.someMethod(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:40:46.653

你不能这样做，因为`Application.getContext()`方法不是`static`.

**编辑：**我看到您编辑了您的问题：因此，如果您的`MyApplication.someMethod()`方法是`static`，那么它当然可以工作，并且`someMethod()`只会被调用一次，除非您的类被垃圾收集器销毁并重新创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:40:56.227

我不确定。我通常是这样理解的：

My(Activity)Class.class.getSimpleName();

# php - 如何使用 PHP 和 javascript 在我的网站中使用 Google API 类？

> ID：11719772
> 
> 赞同：-3
> 
> 时间：2012-07-30T10:37:07.913
> 
> 标签：php, google-apps-script

* * *

> var jasonData = UrlFetchApp.fetch("http://graph.facebook.com/"+url);
> var object = Utilities.jsonParse(jasonData.getContentText());

* * *

像这些类一样，我需要包含在我的代码中并使用它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:29:30.730

您只能在[https://script.google.com](https://script.google.com)上编写的 Apps 脚本代码中使用这些特定功能。如果您需要使用 JavaScript 或 PHP 访问 Google API，您可以选择：

[谷歌 JavaScript API 客户端](https://code.google.com/p/google-api-javascript-client/)

[谷歌 PHP API 客户端](http://code.google.com/p/google-api-php-client/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:53:47.097

Google Apps Script 是一种类似于 PHP 的服务器端脚本语言。你不能混合这两个。PHP 已经具有获取 url（即`load(url, options)`）和解析 json（即[json_decode](http://php.net/manual/en/function.json-decode.php)）的函数。

[在此处](http://www.php.net/manual/en/funcref.php)检查PHP 中的所有可用函数等

# porting - 在应用程序移植中出现错误

> ID：11719776
> 
> 赞同：1
> 
> 时间：2012-07-30T10:37:20.237
> 
> 标签：porting, bada

我正在使用 ecllipse（版本 2.0.2）将应用程序从 HVGA（Bada 2.0.2 设备）移植到 WVGA（Bada 1.2）。

为此，我在我的项目中做了以下更改

1.  项目-> 属性/Bada 构建

    设置 Model WVGA 并设置 AutoScaling true(480x800)

2.  我创建了一种分辨率为 480x800 的表格。

3.  对于图像，我在 Resouce 文件夹中添加了一个文件夹

    -> 480x800 ->屏幕密度-高

并将我所有的资源放在这些文件夹中。

但是，当我单击应用程序中的按钮以在我的应用程序中选择更多图像作为要求并且日志显示输出为显示信息时，我的应用程序崩溃，安装完成。

```
0080.772,EXCEPTION,P32,T00,A125,Osp::Media::__Image::HasAlphaChannels (1547) > [E_UNSUPPORTED_FORMAT]
0080.774,EXCEPTION,P32,T00,A125,Osp::Media::Image::HasAlphaChannels (599) > [E_UNSUPPORTED_FORMAT] Propagated.
0080.851,EXCEPTION,P32,T00,A125,Osp::Media::__Image::HasAlphaChannels (1547) > [E_UNSUPPORTED_FORMAT]
0080.851,EXCEPTION,P32,T00,A125,Osp::Media::Image::HasAlphaChannels (599) > [E_UNSUPPORTED_FORMAT] Propagated. 
```

我在 Bada 帮助中检查过这个问题，但找不到解决方案。请给出解决这个问题的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:43:41.197

正如我所见，您刚刚将您的图像（针对 HVGA 优化）移动到一个新文件夹以将它们用于 WVGA。

如果我理解正确，我建议您参考 SDK 中的 bada 开发文档（通过 bada IDE 帮助系统），其中指定 WVGA 屏幕的特定图像属性是什么，将图像属性更改为兼容的（重新-调整它们的大小）并重建您的项目。

我认为问题会解决，我们喜欢您的反馈。

此致。

我为你找到了参考：[使用定制和优化的资源](http://developer.bada.com/help_2.0/topic/com.osp.appuiguide.help/html/multiple_screen/using_customized_and_optimized_resources.htm)

# python - 在 Pyqt 中从 QAbstractListModel 实现 StringListModel 时出错

> ID：11719782
> 
> 赞同：0
> 
> 时间：2012-07-30T10:38:04.013
> 
> 标签：python, model-view-controller, pyqt4

此代码的目的是显示带有继承自模型的字符串列表`QtCore.QAbstractListModel`

```
import sys
from PyQt4 import QtGui, QtCore

class StringListModel(QtCore.QAbstractListModel):
    def __init__(self, strings):
        QtCore.QAbstractListModel.__init__(self)
        self._string_list = strings
    def rowCount(self):
        return len(self._string_list)
    def data(self, index, role):
        if not index.isValid() : return QtCore.QVariant()
        if role != QtCore.Qt.DisplayRole : return QtCore.QVariant()
        if index.row() <= self.rowCount() : return QtCore.QVariant()
        return QtCore.QVariant(self._string_list[index.row()])
    def headerData(self, section, orientation, role = QtCore.Qt.DisplayRole):
        if role != QtCore.Qt.DisplayRole : return QtCore.QVariant()
        if orientation == QtCore.Qt.Horizontal : return QtCore.QVariant("Column %s"%section)
        else:
            return QtCore.QVariant("Row %s"%section)

if __name__ == '__main__':
    a = QtGui.QApplication(sys.argv)
    lines = ["item 1", "item 2", "item 3"]
    model = StringListModel(lines)
    view = QtGui.QListView()
    view.setModel(model)
    view.setWindowTitle("String list model")
    view.show()
    a.exec_() 
```

我得到的错误是

> TypeError：rowCount() 正好采用 1 个位置参数（给定 2 个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:41:24.797

问题是 QAbstractItemModel.rowCount 采用“父”参数。以下调整抑制了错误（虽然我不知道它是否真的实现了正确的逻辑）

```
def rowCount(self, parent=None):
    return len(self._string_list) 
```

另外，您确定 QListWidget 不提供您需要的功能吗？

# php - Ajax - 与在后台运行的 PHP 脚本通信？

> ID：11719791
> 
> 赞同：4
> 
> 时间：2012-07-30T10:38:24.413
> 
> 标签：php, jquery, ajax, codeigniter

我怀疑这个问题看起来太......愚蠢，但我试图让我的头脑围绕一个很好的解决方案，我有点卡住了。

**所以，这是我的情况：**

*   我正在使用**Ajax**执行一系列任务。实际上，我正在排队（或有时并行，对我来说并不重要）1 个或多个请求。
*   以百分比形式显示*进度*（执行 X 个任务中的 1 个）
*   完成后，显示最终结果。

**我正在尝试做的事情：**

*   我不想运行 3-4 个不同的任务（= 3-4 个通过 Ajax 异步调用的不同 PHP 脚本），我希望只有 1 个（= 1 个脚本）——换句话说，**将 X 脚本组合成一个**. （这很容易）。

**我面临的问题：**

*   我怎么还能报告完成百分比（X 个任务中的 1 个）？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T10:58:10.693

`Memcached`每次任务完成时，我都会更新一个密钥。然后你会让你的 ajax 调用简单地从你的 memcached 键中获取值。

[http://php.net/manual/en/book.memcached.php](http://php.net/manual/en/book.memcached.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:41:06.263

如果您通过原始 ajax 将请求放入数据库，然后启动脚本，您仍然有时间（假设请求需要一些时间才能完成）将后续任务放入同一数据库以由仍在运行的脚本。

至于报告它，也许运行一个快速的 jquery 来查看队列中有多少项目？或者让 task.php 文件更新数据库（甚至可能是另一个表），以说明它已经完成了多少作业以及当前仍有多少作业在队列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:17:41.187

如果您不需要向 PHP 脚本发送太多数据，则可以使用“[长轮询](http://en.wikipedia.org/wiki/Comet_%28programming%29#Script_tag_long_polling)”方法。有了这个，你不使用 AJAX，而是插入一个脚本标签，如下所示：

```
<script src="my_php_script?task1=x&param_t1_1=42&task2=y"></script> 
```

然后 PHP 文件可以发回一个 JavaScript 命令，例如

```
updatePercent(12); 
```

每项任务完成后。这些命令应该在它们进入时由浏览器执行。确保`flush`在每个任务之后调用。

[研究 Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)可能会给您关于如何处理客户端-服务器连接的其他想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T10:47:35.157

您可以管理队列 - 在发送 AJAX 请求之前 - 将任务放入队列（可以是对象或数组）。使用函数异步运行 AJAX，`complete`该函数将在完成后从队列中删除作业。您可以在从队列中删除作业的同时更新进度或单独处理它`setTimeout()`，这将检查队列中有多少任务以及总共放入了多少任务：% = (submitted_tasks - items_in_queue) / submit_tasks * 100

# asp.net-mvc - Html.EditorFor 不加载自定义模板路径

> ID：11719794
> 
> 赞同：7
> 
> 时间：2012-07-30T10:38:39.153
> 
> 标签：asp.net-mvc, asp.net-mvc-2

在我的程序中，我放了，

```
<%: Html.EditorFor(m => m.EducationData
                      , "~/Views/HTML/Shared/EditorTemplates/Foo/CustomTemplate.ascx")%> 
```

但它不会从我给出的路径加载编辑器模板。我在一些示例中看到了[链接](https://stackoverflow.com/questions/4055805/html-editorfor-editor-template-in-portable-area)，它们为模板提供了自定义路径。任何人都可以提出一些建议吗？还是 MVC2 支持编辑器模板的自定义路径？或者有没有办法自定义 web.config 或一些配置，所以我可以更改默认模板位置？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T12:39:26.477

我认为你的文件夹太多了。使用 EditorTemplates 和 DisplayTemplates 时应遵循特定约定。尝试将您的模板放在此文件夹中，它应该可以工作：

```
"~/Views/Shared/EditorTemplates/CustomTemplate.ascx" 
```

**更新：**

并非所有编辑器模板都需要进入 Shared 文件夹。您也可以将特定于控制器的模板放入特定于控制器的文件夹中：

```
"~/Views/Home/EditorTemplates/CustomTemplate.ascx" 
```

# scala - Scala Play Framework Anorm SQL.on 禁用带有“”的包装替换

> ID：11719802
> 
> 赞同：3
> 
> 时间：2012-07-30T10:39:15.090
> 
> 标签：scala, playframework, playframework-2.0, anorm

每当我使用`on`它替换 SQL 查询中的占位符时，用 '' 包围替换，有没有办法防止这种情况发生？

这意味着我不能做类似的事情

```
SQL("SELECT * FROM {table} blah").on("table" -> tabletouse) 
```

因为它用 '' 包装表名，这会导致 SQL 语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:53:08.267

你当然可以结合这两种方法，对你不想被转义的数据使用格式函数

```
SQL(
  """
    select %s from %s
    where
      name = {name} and
      date between {start} and {end}
    order by %s
  """.format(fields, table, order)
).on(
  'name     -> name,
  'start    -> startDate,
  'end      -> endDate
) 
```

请注意，您使用 format 函数发送的数据不应来自用户输入，否则应正确清理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:54:31.767

你不能做你正在尝试的事情。Anorm 的替换基于 PreparedStatements。这意味着所有数据将自动转义，这意味着您不能使用替换：

*   表名，
*   列名，
*   任何操作数、SQL 关键字等。

您可以在这里做的最好的事情是字符串连接（在我看来，这确实是一种糟糕的方式）：

```
SQL("SELECT * FROM " + tabletouse + " blah").as(whatever *) 
```

PS：[在 PreparedStatements 中查看有关表名的问题。](https://stackoverflow.com/questions/1208442/using-prepared-statements-to-set-table-name)

# c# - C# WebClient 上传速度

> ID：11719804
> 
> 赞同：1
> 
> 时间：2012-07-30T10:39:23.117
> 
> 标签：c#, performance, upload, webclient

我想知道是否可以在 WebClient 异步数据上传时增加缓冲区大小，因为目前它最大推动 ~320kB/s。

我当前的代码：

```
using (WebClient Client = new WebClient())
{
    byte[] Buffer = File.ReadAllBytes(this.WorkItem.FileLocation);

    Client.UploadProgressChanged += new UploadProgressChangedEventHandler(Client_UploadProgressChanged);
    Client.UploadDataCompleted += new UploadDataCompletedEventHandler(Client_UploadDataCompleted);
    Client.UploadDataAsync(new Uri("-snip-"), Buffer);
} 
```

**编辑**
连接不是限制因素。（它的 300mbit 连接，网络服务器以 ~30-40mB/s 的速度推送内容）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T04:00:23.027

如果您想更好地控制数据的缓冲方式，则需要使用`HttpWebRequest`该类。使用此类，您可以选择从 a 读取的读取缓冲区`FileStream`，然后选择写入网络流的量。进行 4MB 读取和 32KB 写入是最大化我的网络吞吐量的最佳选择（尽管您必须进行自己的基准测试才能查看哪些缓冲区在您的场景中效果最佳）。

# asp.net - 已将 ajaxcalendar 控件的格式保留为“dd/mm/yyyy”，并希望在数据库中保存为 mm/dd/yyyy

> ID：11719805
> 
> 赞同：0
> 
> 时间：2012-07-30T10:39:31.003
> 
> 标签：asp.net, datetime-format, 3-tier, calendarextender

我将 ajax 日历控件用于文本框，已将其格式设置为`"dd/mm/yyyy" .`

```
 Bapur.Date = txtdate.Text; 
```

在数据访问层

```
 cmd.Parameters.Add("@Date", SqlDbType.DateTime).Value = bapur.Date; 
```

在保存时，就像上面一样（`Date`字符串`Bapur`是业务层类的对象）在数据库中，其中数据库中的数据表具有日期作为`datetime`格式。我得到一个错误：`cant convert string to datetime`当格式是我dint得到错误 `"mm/dd/yyyy" .`

基本上，我希望用户查看日期，`dd/mm/yyyy`但在保存时我想要它

```
mm/dd/yyyy 
```

已经尝试了很多，但没有工作。

这是我的答案---- [https://stackoverflow.com/a/11720162/1445836](https://stackoverflow.com/a/11720162/1445836) -----

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:55:31.167

您可以使用：

`DateTime.ParseExact("yourDate","formatinWhichYouWant",culture of current string);`

前任：

```
DateTime dt =DateTime.ParseExact("yourDate","formatinWhichYouWant",culture of current string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:52:48.027

```
string myDate = bapur.Text.Split("/");
string dateString = myDate[1] + "/" + myDate[0] + "/" + myDate[2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:02:42.210

得到了我的答案

```
 string old = txtdate.Text;
            string newDate = DateTime.ParseExact(old, "dd/MM/yyyy", null).ToString("MM/dd/yyyy");

            Bapur.Date = newDate.ToString(); 
```

# java - 页面包含带参数的写入功能

> ID：11719807
> 
> 赞同：1
> 
> 时间：2012-07-30T10:39:36.353
> 
> 标签：java, jsf, parameter-passing

另一个例子是把一个文件底部的一个按钮和一个函数参数用于 ActionListener 想运行。

例如;

主工具栏.xhtml

```
<p:commandButton id="warnButton" value="#{BtnWarn}" actionListener="#{action}" update="messages" rendered="#{render2}"/> 
```

索引.xhtml：

```
<ui:include src="MainToolbar.xhtml">
     <ui:param name="BtnWarn" value="Uyarı Mesajı"/>
     <ui:param name="Alisten" value="#{mesajlar.addWarn}"/>
     <ui:param name="render2" value="true"/>
</ui:include> 
```

measajlar.java

```
@ManagedBean(name="mesajlar")
@SessionScoped

public class MessageController implements Serializable
{
   public void addWarn(ActionEvent actionEvent) 
   {
            FacesMessage message = new FacesMessage("Invalid password length");
            FacesContext context = FacesContext.getCurrentInstance();
            context.addMessage(null, message);
   }
} 
```

根据上面的数据，我想做；

页面中的该死按钮只会在页面中包含这些按钮，并且我想要 çalıştıracağım 相关功能。所以如果 Maintoolbar.xhtml 我想在哪个页面运行它，在 Button 中键入它的功能。

a页函数=aClass.save函数b=bClass.delete页。

参数包括哪个页面是同一个按钮，我写了一会儿，同时删除按钮会保存在某处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:14:45.577

```
<ui:param name="Alisten" value="#{mesajlar.addWarn}"/> = fail code
<ui:param name="Alisten" value="#{mesajlar.addWarn("in fnc parameters")}"/> = Succes code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:03:59.290

尝试使用 action 而不是 actionListener 参数，因为 actionListener 引用 JavaScript，而 action 调用常规 http 请求。

# java - 如何验证将哪些参数传递给java中的静态方法

> ID：11719814
> 
> 赞同：4
> 
> 时间：2012-07-30T10:39:47.930
> 
> 标签：java, unit-testing, junit, mockito, powermock

作为我的 Junit 测试的一部分，我想验证我是否正在使用正确的参数调用外部类的静态方法。

例如：-假设我有以下作为被测类。

```
class A {
    public static void someMethod(String param){
          some.thirdpartyClass.someStaticMethod(param);
    }      
} 
```

现在我想作为 someMethod 测试的一部分进行测试，我用参数*param调用了 someStaticMethod*

最简单的方法是什么？我尝试通过电源模拟，但找不到方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:43:06.620

最简单的方法是使用**powermock**。

看看这里[http://code.google.com/p/powermock/source/browse/trunk/modules/module-test/easymock/junit4-test/src/test/java/samples/junit4/singleton/MockStaticTest。爪哇](http://code.google.com/p/powermock/source/browse/trunk/modules/module-test/easymock/junit4-test/src/test/java/samples/junit4/singleton/MockStaticTest.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:01:21.423

It's not difficult with PowerMock, but here is an easier solution using JMockit:

```
public class ATest
{
    @Test
    public void testSomeMethodInIsolation(@Mocked ThirdPartyClass tpc)
    {
        final String param = "testing";

        new A().someMethod(param);

        new Verifications() {{ ThirdPartyClass.someStaticMethod(param); }};
    }
} 
```

# html - html5中的文件系统存储在真实文件系统的什么位置？

> ID：11719816
> 
> 赞同：4
> 
> 时间：2012-07-30T10:39:48.557
> 
> 标签：html, html5-filesystem

如果我使用 JavaScript 在 HTML5 文件系统上创建文件，我可以在计算机的真实文件系统上找到它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:34:49.993

最初我认为所有文件都存储在虚拟文件系统上，因此可以保护文件。但事实并非如此。对于 chrome，文件位于“C:\Users\user name\AppData\Local\Google\Chrome\User Data\Default\File System”，在 windows 7 上使用混淆名称。因此您可以将其作为本地文件进行操作。

# facebook - 使用 Facebook Graph API 检索用户的喜欢有时会失败

> ID：11719818
> 
> 赞同：0
> 
> 时间：2012-07-30T10:39:55.280
> 
> 标签：facebook, facebook-graph-api, facebook-fql

在我们的游戏中，我正在检查用户是否喜欢我们的一些 Facebook 网站。对于大多数用户来说，它可以正常工作，但有些人抱怨他们在使用此功能时遇到问题。

1) 我在登录 Facebook 期间请求“user_likes”权限（必须登录用户）。

2) 我还考虑了通过 Graph API 对结果进行所谓的“分页”。（我正在分段检索所有用户的like-ids，经过多次测试，我认为它工作正常：o））

3) 那些报告此检查不工作的用户真的“喜欢”这些网站（在运行此检查之前）。

所以我的假设是请求“我/喜欢”在某些情况下失败或无法按预期工作。有人可以帮我解决这个问题吗？

似乎我并不孤单，因为我发现了这些（不幸的是没有回答）：

*   [https://stackoverflow.com/questions/10772814/checking-facebook-graph-api-for-user-likes-fails-for-some-users](https://stackoverflow.com/questions/10772814/checking-facebook-graph-api-for-user-likes-fails-for-some-users)

*   [http://facebook.stackoverflow.com/questions/10109773/cant-obtain-user-likes-in-some-cases-using-facebook-graph-api](http://facebook.stackoverflow.com/questions/10109773/cant-obtain-user-likes-in-some-cases-using-facebook-graph-api)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:02:06.477

我能想到的唯一原因是 Graph 缓存没有与用户的 Like 数据保持同步。如果用户只是喜欢一个页面，然后您通过 Graph API 请求了 Like 数据，则数据可能尚未更新，因此将显示为“非喜欢”页面。

尝试使用 FQL 查询进行相同的检查 - 但不是通过用户的喜欢分页，而是直接检查页面 ID、用户 ID 和喜欢状态。您必须跨多个表加入才能使其正常工作。

# symfony - 加载validation.yml 文件

> ID：11719827
> 
> 赞同：0
> 
> 时间：2012-07-30T10:40:17.323
> 
> 标签：symfony

> **可能重复：**
> [在 Symfony2 中，validation.yml 文件可以使用导入拆分为多个文件吗？](https://stackoverflow.com/questions/9403609/in-symfony2-can-the-validation-yml-file-be-split-into-multiple-files-using-impo)

在 yml 文件中添加验证约束之前有什么需要做的。我很难找到有关如何加载validation.yml文件的文档信息：

```
# src/Acme/BlogBundle/Resources/config/validation.yml
Acme\BlogBundle\Entity\Author:
    properties:
        firstName:
            - NotBlank: ~
            - MinLength: 3 
```

**从验证文件加载验证约束的过程是什么？**

## 编辑

```
public function load(array $configs, ContainerBuilder $container)
{
    $configuration = new Configuration();
    $config = $this->processConfiguration($configuration, $configs);

    $ymlValidationFile = $container  ->getParameter('validator.mapping.loader.yaml_files_loader.mapping_files');
    $ymlValidationFile[] = __DIR__.'/../Resources/config/validation.yml';
        $container->setParameter('validator.mapping.loader.yaml_files_loader.mapping_files',$ymlValidationFile);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:11:12.383

我认为，这个[漂亮的文档](http://symfony.com/doc/current/cookbook/bundles/extension.html)完全解释了你的问题 :)

# emacs - 如何在 Emacs Lisp 中连接模式？

> ID：11719830
> 
> 赞同：0
> 
> 时间：2012-07-30T10:40:40.930
> 
> 标签：emacs

我认为标题无法清楚地描述问题。但我会尽量用更详细的词来描述。

这是我设置备份文件夹的 Emacs lisp 代码：

```
(setq backup-directory-alist '(("" . "/hom/test/.backups"))) 
```

但是如果我想通过以动态方式生成备份路径来完成这项工作，它会根据用户的路径生成路径。

这是我正在尝试做的事情：

```
(setq temp-file-folder "/home/test")
(setq backups-save-folder (concat temp-file-folder "/.backups"))
(setq backup-directory-alist '(("" . backups-save-folder))) 
```

但它不起作用。上述代码的最终输出为：

```
(("" . backups-save-folder)) 
```

我认为我想要得到的应该是：

```
(("" . "/home/test/.backups")) 
```

那么，生成路径动态的正确代码是什么？是什么意思。在代码中？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:55:55.423

首先，一个点。您可以使用该`format`函数而不是 concat 来执行此操作（类似于`printf`）。这是一个例子

```
(let ((home_dir "/home/noufal")
      (posts_dir "posts"))
  (format "%s/%s" home_dir posts_dir)) 
```

评估为`"/home/noufal/posts"`

`setq`临时变量不是惯用的lisp 。您应该在可以将值绑定到一些临时符号的构造范围内工作`let`，然后完成您的工作。

在您的最后一种情况下，您`'`在第二个参数之前使用了 a 。这将阻止它被评估（它是“逐字引用”的同义词），因此`backups-save-folder`不会用值替换。如果您想这样做，请执行以下操作。

```
(setq backup-directory-alist (list (cons ""  backups-save-folder))) 
```

这`.`是一种表示`cdr`不是列表的列表的方式。有关详细信息，请参阅[elisp 文档。](http://www.gnu.org/software/emacs/manual/html_node/elisp/Dotted-Pair-Notation.html#Dotted-Pair-Notation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:34:15.827

根据[Noufal Ibrahim](https://stackoverflow.com/users/229602/noufal-ibrahim)的回答，这是我的最终代码：

```
(setq backup-directory-alist (list (cons "" 
                                     (let ((backups_dir "/.backups")
                                           (temp_folder desktop-temp-file-folder))
                                       (format "%s/%s" temp_folder backups_dir))))) 
```

有用。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:25:33.723

似乎您不需要旨在存储配对值的关联列表，而是一个简单的列表：

获取当前用户目录（getenv "HOME"）

可能与另一个任意字符串“-BACKSTAGE-AREA”组合

(setq my-dir (list (concat (getenv "HOME")"-BACKSTAGE-AREA")))

获取以这种方式存储的目录名称

（汽车我的目录）

# magento - 安装新主题后 Facebook 喜欢按钮不显示？

> ID：11719835
> 
> 赞同：0
> 
> 时间：2012-07-30T10:40:51.563
> 
> 标签：magento, magento-1.6

我添加了一个赞按钮扩展，它在默认主题中显示非常好，但在安装新主题后不再显示。谁能告诉我原因..？

我正在使用magento 1.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T02:58:24.667

您可能应该将插件的模板文件移动到新扩展的目录。

将它们从 /app/design/frontend/default/default/template/ 移动到 /app/design/frontend/newtheme/default/template/ ...

# android - 我想将我的数据从 mysql 加载到 sqlite

> ID：11719843
> 
> 赞同：2
> 
> 时间：2012-07-30T10:41:08.763
> 
> 标签：android, mysql, sqlite

是否可以连接或将数据从mysql复制到sqlite？我只需要将数据从mysql存储到sqlite。

我使用 mysql 是因为我正在开发 android 中的在线应用程序并用于更新目的。我想将数据从 mysql 复制到 sqlite，因此即使没有互联网并且由于该 sqlite 数据库，我的 android 应用程序仍将运行。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:44:20.700

如果您想将您的应用程序与我的 sql server 连接，您可以使用一些 rest 服务连接数据库，并将结果返回给调用应用程序。

通过以下链接检查创建、使用 rest php 服务的示例：

[http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

[http://www.helloandroid.com/tutorials/connecting-mysql-database](http://www.helloandroid.com/tutorials/connecting-mysql-database)

通过这些方法，您可以从 mysql 服务器获取数据，进一步在设备数据库上创建和执行数据库操作，请使用以下链接：

[http://www.devx.com/wireless/Article/40842](http://www.devx.com/wireless/Article/40842)

# java - 事件调度线程上的java自定义事件

> ID：11719844
> 
> 赞同：2
> 
> 时间：2012-07-30T10:41:10.250
> 
> 标签：java, events, event-dispatch-thread

我正在构建一个 java 应用程序，并且我已经实现了自定义侦听器和事件。现在的问题是有许多事件和侦听器，并且当侦听器处理事件时应用程序 GUI 线程被阻塞。这可以使用事件调度线程解决吗？如果有怎么办？

监听器的代码：

```
public class ProjectChangeObserver
{
    private List<ProjectChangeListener> listeners = new ArrayList<ProjectChangeListener>();

    public void addProjectChangeListener(ProjectChangeListener l)
    {
        listeners.add(l);
    }

    public void removeProjectChangeListener(ProjectChangeListener l)
    {
        listeners.remove(l);
    }

    public void removeAllProjectChangeListeners()
    {
       listeners.clear();
    }

    public void fireProjectChange(ProjectChangeEvent e)
    {
      if(listeners.size() > 0)
       { 
          ArrayList<ProjectChangeListener> safeCopy = new ArrayList<ProjectChangeListener>(listeners);
          for (ProjectChangeListener cl : safeCopy ) {
              cl.onProjectChange(e);
        }
       } 
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:57:27.303

Swing 的特点之一是它是[单线程的](http://en.wikipedia.org/wiki/Event_dispatching_thread)。

但是，没有什么能阻止您产生自己的线程来进行后台处理。只要您只调用`revalidate()`或`repaint()`然后所有绘图仍将在 Swing 线程中处理。

（请记住，如果您要生成其他线程来执行后台工作，那么`volatile`如果您希望 Swing 线程看到与您的线程中相同的值，请确保声明您的变量。或者通过另一个侦听器将信息传递回。）

如果您打算在单独的线程中进行绘画本身（例如自定义组件），那么根据具体情况，这是不可能或非常不鼓励的。（一些特殊情况可能允许在自定义线程安全缓冲类中多 CPU 生成场景，但您不太可能这样做）。

如果您发现您`Listener`的 s 是 CPU/网络密集型的，那么您可能需要考虑谁在做大部分的喊叫和谁在听的架构。我总是尽量减少“视图”代码中的喊叫声，以便它简单地响应事件。

顺便说一句，我发现[Project Lombok](http://projectlombok.org/features/index.html)和它的 Beta 姐妹[Lombok PG](https://github.com/peichhorn/lombok-pg/wiki)可以大大减少`Listener`使用[`@ListenerSupport`](https://github.com/peichhorn/lombok-pg/wiki/%40ListenerSupport).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:47:26.050

恰恰相反，必须**避免**使用 Event Dispatch Thread 来解决这个问题（“GUI 线程”只是同一事物的另一个名称）。您必须使用`SwingWorker`它在自己的线程中启动异步任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T11:28:15.590

如果您想防止 UI 阻塞，您应该为您的事件运行单独的线程。

如果您想对事件使用单个线程，那么您可以创建线程，然后可以使用存储事件的队列将命令传递给事件线程。

但是，如果可能，您应该为您的事件打开异步线程，并且您应该确保在需要时刷新 UI。

# r - 在特定节点合并两个树状图

> ID：11719847
> 
> 赞同：2
> 
> 时间：2012-07-30T10:41:17.913
> 
> 标签：r, dendrogram, dendextend

我想：

1.  删除一个子树，然后将一个新的子树合并到原始树状图中，使其与被删除的位置相同。
2.  或用另一个子树替换子树。

我知道`merge()`可以合并顶部的两个树状图。它是否也在指定节点合并它。如果有怎么办？如果没有，是否有另一种方法可以做到这一点？

我知道`cut()`将树状图切割成一定高度或特定数量的节点。但是如何让它只删除一个特定的子树呢？

子树的规范将是其中第一个节点的属性。例如`attr(n,"attribute")== something`，可以通过`dendrapply()`.

* * *

这是如何制作树状图的示例代码。

```
library("stats")
library("fastcluster")

x=matrix(c(1:20),ncol=4)
y=matrix(c(21:40),ncol=4)

#creating hclusters
xcl=hclust.vector(x)
ycl=hclust.vector(y)

#converting to dendrograms
xdend=as.dendrogram(xcl)
ydend=as.dendrogram(ycl)

# merging two dendrograms at the top
zdend=merge(xdend,ydend) 
```

- 注意：我发现了如何通过以下方式替换子树。

```
 merging <- function(n,subtree){
    if (attr(n,"members")==2){
    treeMerged2<<- merge(n,subtree)}}

     D=rbind(
    + c(1,1,1,1,1),
    + c(1,2,1,1,1),
    + c(2,2,2,2,2),
    + c(2,2,2,2,1),
    + c(3,3,3,3,3),
    + c(3,3,3,3,2))

Ddend=as.dendrogram(hclust.vector(D))

    tr=dendrapply(Ddend,merging, xdend) 
```

问题：

1) 它替换了它的姊妹子树而不是期望的那个。

2）原始树没有改变。

3）创建的新树“treeMerged2”只有添加的子树和姐妹子树，没有树的其余部分。

问题：

*   如何使输出成为其中包含新子树的原始树？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-11T08:50:28.570

您可以使用包`prune`中的功能[`dendextend`](http://cran.r-project.org/web/packages/dendextend/)，专为此类事情设计。（看`?prune`）。修剪后，您可以使用该`merge`功能。

如果您需要替换树的特定子部分中的树，我相信目前使用通用功能是不可能的。您可以使用 nestes 手动添加子树`[[ ]]`，但请注意您将获得的属性将不再正确（尤其是成员数，可能还有高度）。因此，您需要更认真地考虑这一点才能普遍解决此问题（如果您要解决此问题，请提交补丁以进行dendextend，或者只是通过电子邮件发送给我：tal.galili@gmail.com）

# mysql - dbWriteTable(..., append = T) 在 R 中被覆盖

> ID：11719850
> 
> 赞同：11
> 
> 时间：2012-07-30T10:41:31.473
> 
> 标签：mysql, r, analytics

我正在使用 RJDBC 从 R 访问 MySQL。之前我曾经使用 RMySQL，它不适用于 R 2.15。围绕 SO 进行了很多讨论，但我仍然无法在 R 2.15 中使用 RMySQL 包，因此切换到 RJDBC。

当我使用`dbWriteTable(..., append = T)`命令将记录附加到 MySQL 表中时，它只是覆盖，请参见下面的代码。

# 为 MySQL 服务器设置环境变量

```
Sys.setenv(MYSQL_HOME='C:/Program Files (x86)/MySQL/MySQL Server 5.1')

library(RJDBC) 
```

# MySQL 连接

```
drv <- JDBC("com.mysql.jdbc.Driver","mysql-connector-java-5.0.5.jar", "`")
conn <- dbConnect(drv, "Retail", user="root", password="abc")
..................
..................
..................
dbWriteTable(conn, "Customer_Tbl", x, row.names=F,append = T) 
```

`Customer_Tbl`每次都覆盖而不是附加。

有人可以帮助解决这个问题吗？

谢谢苏雷什

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-20T17:10:21.563

您需要使用 overwrite=FALSE，示例代码如下：

```
dbWriteTable(connection, name=tableName, value=rows , append=T, row.names=F, overwrite=F); 
```

# c# - 重启 WPF 应用程序：等到新进程加载完毕后再退出当前进程

> ID：11719856
> 
> 赞同：1
> 
> 时间：2012-07-30T10:41:54.673
> 
> 标签：c#, wpf, restart

我正在使用 blend 4 开发 wpf 应用程序。在某些条件下，我需要重新启动应用程序。

我目前使用以下代码：

```
System.Diagnostics.Process.Start(Application.ResourceAssembly.Location);
System.Threading.Thread.Sleep(1000);
Application.Current.Shutdown(); 
```

哪个有效。

我的问题是当前实例在加载新实例之前关闭，使它看起来像程序崩溃了。我使用 thread.sleep 来停止shutdoen，但时间不同。

有什么方法可以在关闭当前进程之前等待新进程启动？

类似于：

```
System.Diagnostics.Process.Start(Application.ResourceAssembly.Location);

if (newProcess.IsLoaded == true)
{
    Application.Current.Shutdown();
} 
```

编辑：

这是在更改设置时的上下文，我需要重新启动应用程序以应用更改，并且我会使用启动屏幕说（应用新设置请稍候），这将显示直到加载新进程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:45:38.507

那怎么样：将旧进程ID作为启动参数传递给新实例，并让新实例在加载时杀死旧实例。

使用`Process.GetCurrentProcess`方法读取旧实例 pid。`Arguments`使用 中的属性将参数传递给新实例`ProcessStartInfo`。然后`Process.GetProcessById`在传递参数时在新实例中使用来获取和杀死旧实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:08:43.623

只需在新创建的进程上调用[WaitForInputIdle ：](http://msdn.microsoft.com/en-us/library/8d7363e2.aspx)

```
Process p = Process.Start(...);
p.WaitForInputIdle();
Application.Current.MainWindow.Close(); // perhaps better than Shutdown 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T11:17:55.610

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    Process[] myProcess = Process.GetProcessesByName(Process.GetCurrentProcess().ProcessName); 
    foreach (Process process in myProcess) 
    {
        if (process.Id != Process.GetCurrentProcess().Id)
        {
            process.Kill();
        }
    } 
} 
```

# java - 每 3 秒更新一次 TextView 值

> ID：11719857
> 
> 赞同：0
> 
> 时间：2012-07-30T10:41:55.840
> 
> 标签：java, android, textview

我是一名 PHP 开发人员，对 Android 开发和 Java 不熟悉，所以请多多包涵。

我正在开发一个非常简单的应用程序用于测试和学习目的。

当用户点击我的应用程序图标时，他们会看到一个加载屏幕。我有一个 TextView，下面有一个进度条。

文本视图 XML 代码：

```
<TextView
        android:id="@+id/loadingMessage1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/progressBar1"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="22dp"
        android:text="@string/loading1" /> 
```

该值设置为 strings.xml 中的字符串 loading1

```
<string name="loading1">Loading Message 1</string> 
```

在我的 loadingscreen.java 我有：

```
package com.example.myfirstapp;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;

public class LoadingScreen extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_loading_screen);

        TextView loadingMessage1 = (TextView)this.findViewById(R.id.loadingMessage1);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_loading_screen, menu);
        return true;
    }
} 
```

注意我有代码：

TextView loadingMessage1 = (TextView)this.findViewById(R.id.loadingMessage1);

我认为这引用了文本视图。

我想要发生的是每 3 秒出现一条不同的消息。

所以加载消息 1...（3 秒）加载消息 2...（3 秒）加载消息 3..

加载消息 3 后，我想要一个按钮来替换进度条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:45:12.893

您可以使用`Handler`该类：

```
final Handler handler = new Handler();
handler.post(new Runnable(){

    @Override
    public void run(){
        // change your text here
        handler.postDelayed(this, 3*1000L);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:45:20.720

您可能需要使用每 1 秒执行一次的计时器。阅读[这篇](http://android-developers.blogspot.kr/2007/11/stitch-in-time.html)精彩的 android 开发者博客文章，了解使用计时器和处理程序进行定期执行。

# android - 如何使用带有按钮的android两行列表项？

> ID：11719862
> 
> 赞同：0
> 
> 时间：2012-07-30T10:42:36.413
> 
> 标签：android

android 设计指南包含一系列列表项，鼓励在设计 android 应用程序时使用这些列表项。订单项在[此处](http://developer.android.com/design/building-blocks/lists.html)的构建基块部分中有特色。然而，对我来说，不清楚是否有一个 xml 文件或类应该用于使用这些带有按钮的行项目，或者是否应该为此创建一个自定义 xml。这是 Android 库中的内置功能还是应该使用自定义 xml 文件构建，即应该如何创建带有按钮的两个行列表项？

![在android中列出视图项目](../Images/132c4fb14957f7947aa8dbc30dcb7f16.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:10:24.603

有关公开公开的布局参考 API，请参阅[http://developer.android.com/reference/android/R.layout.html](http://developer.android.com/reference/android/R.layout.html)。另请参阅[TwoLineListItem](http://developer.android.com/reference/android/widget/TwoLineListItem.html)。你必须为你的列表项设计你自己的自定义 XML 布局，没有一个你可以从 API 获得。

# java - 使用 Android 媒体播放器从手机内存写入和播放媒体

> ID：11719864
> 
> 赞同：0
> 
> 时间：2012-07-30T10:42:53.013
> 
> 标签：java, android, mp3, android-mediaplayer, file-transfer

我正在尝试获取一个 mp3 文件并将其保存在手机内存而不是 SD 卡上，然后立即使用媒体播放器播放。当我以前用它在 SD 卡上做同样的事情时，这段代码运行良好，所以在我保存和读取 mp3 的位置似乎可能有一些错误。

这是我的代码：

```
try {

            MediaPlayer player = new MediaPlayer();
            URI uri = null;
            try {
                uri = new URI(
                        "http://translate.google.com/translate_tts?tl="
                                + oLanguage + "&q=" + text);
            } catch (URISyntaxException e) {
                e.printStackTrace();
            }

            String FileName = "Audio2.mp3";
            URL u = new URL(uri.toASCIIString());
            HttpURLConnection c = (HttpURLConnection) u.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

//          FileOutputStream f = new FileOutputStream(new File(
//                  Environment.getExternalStorageDirectory()
//                          + "/download/" + FileName));

            FileOutputStream f = openFileOutput(FileName, MODE_PRIVATE);                
            InputStream in = c.getInputStream();
            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = in.read(buffer)) > 0) {
                f.write(buffer, 0, len1);
            }
            f.close();

//          player.setDataSource(Environment.getExternalStorageDirectory()
//                      + "/download/" + FileName);

            player.setDataSource("/data/data/com.comm/files/" + FileName);              
            player.prepare();
            player.start() 
```

日志猫：

```
 07-30 12:23:47.319: W/MediaPlayer(22426): info/warning (1, 26)
    07-30 12:23:47.319: E/MediaPlayer(22426): error (1, -4)
    07-30 12:23:47.319: W/System.err(22426): java.io.IOException: Prepare failed.: status=0x1
    07-30 12:23:47.329: W/System.err(22426):    at android.media.MediaPlayer.prepare(Native Method)
    07-30 12:23:47.329: W/System.err(22426):    at com.comm.Connect.Text(Connect.java:396)
    07-30 12:23:47.329: W/System.err(22426):    at com.comm.Connect$7.onClick(Connect.java:233)
    07-30 12:23:47.329: W/System.err(22426):    at android.view.View.performClick(View.java:2485)
    07-30 12:23:47.329: W/System.err(22426):    at android.view.View$PerformClick.run(View.java:9080)
    07-30 12:23:47.329: W/System.err(22426):    at android.os.Handler.handleCallback(Handler.java:587)
    07-30 12:23:47.329: W/System.err(22426):    at android.os.Handler.dispatchMessage(Handler.java:92)
    07-30 12:23:47.329: W/System.err(22426):    at android.os.Looper.loop(Looper.java:130)
    07-30 12:23:47.329: W/System.err(22426):    at android.app.ActivityThread.main(ActivityThread.java:3687)
    07-30 12:23:47.329: W/System.err(22426):    at java.lang.reflect.Method.invokeNative(Native Method)
    07-30 12:23:47.329: W/System.err(22426):    at java.lang.reflect.Method.invoke(Method.java:507)
    07-30 12:23:47.329: W/System.err(22426):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    07-30 12:23:47.329: W/System.err(22426):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    07-30 12:23:47.329: W/System.err(22426):    at dalvik.system.NativeStart.main(Native Method) 
```

最后，我是否需要指定任何权限以允许我保存到手机内存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:10:15.477

几件事：

1.  外挂是什么样的？确保您正在做一些有用的事情，例如捕获异常并吐出堆栈跟踪，这将更加有用，并且应该给您一个更具描述性的错误
2.  如果您尝试将任何内容写入磁盘，请确保您 `android.permission.WRITE_EXTERNAL_STORAGE`的[清单](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)文件中有

试着给我们一个堆栈跟踪，这将帮助**我们**帮助**你**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:43:14.860

After doing some research it seems I needed to use I found I needed to use an input stream the code below solved the problem

```
 FileOutputStream f = null;
            try {
                f = openFileOutput(FileName, MODE_PRIVATE);
            } catch (Exception e) {
                e.printStackTrace();
            }

            InputStream in = c.getInputStream();
            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = in.read(buffer)) > 0) {
                f.write(buffer, 0, len1);
            }
            f.close();

            player = new MediaPlayer();
            FileInputStream fis = new FileInputStream("/data/data/com.comm/files/"+ FileName);
            player.reset();
            player.setDataSource(fis.getFD());
            player.prepare();
            player.start();
            fis.close(); 
```

# c++ - 将 libxml2 与 cocos2d-x 一起使用

> ID：11719865
> 
> 赞同：3
> 
> 时间：2012-07-30T10:42:57.380
> 
> 标签：c++, xcode, xml-parsing, libxml2, cocos2d-x

我是 C++ 和 cocos2d-x 的新手。我需要知道如何使用 cocos2d-x 中的元素和属性 libxml2 解析 XML。我试过谷歌，但我无法提交任何确切的代码示例。cocos中libxml2的使用情况到底如何？

我从官方网站找到了这段代码，但我不知道如何将其转换为 cocos 代码。[http://www.xmlsoft.org/examples/reader1.c](http://www.xmlsoft.org/examples/reader1.c)

我正在为 IDE 使用 XCode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:57:44.970

如果您查看 CCSAXParser.cpp 和 CCUserDefault.cpp，您将看到 cocos2d-x 使用 libxml 解析数据的示例。或者也有[这个](http://www.siddhanttewari.com/site/?p=8)解决方案（我从未尝试过）。

# silverlight-4.0 - Silverlight 中的自动注销

> ID：11719868
> 
> 赞同：0
> 
> 时间：2012-07-30T10:43:02.593
> 
> 标签：silverlight-4.0

我正在开发一个使用 WCF RIA 服务的 SL 应用程序。如果用户在指定的时间内保持空闲状态，我必须实现一个登录页面以及自动注销。现在因为这是我的第一个基于 Web 的应用程序。我不确定如何实现自动注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:39:10.200

检查这个.. [http://forums.silverlight.net/t/220571.aspx/1?Auto%20Logout%20](http://forums.silverlight.net/t/220571.aspx/1?Auto%20Logout%20)

[http://developersvoice.com/silverlight-auto-logout-user-after-10-minutes-of-inactivity.html](http://developersvoice.com/silverlight-auto-logout-user-after-10-minutes-of-inactivity.html)

# ios - 源视图控制器在自定义 segue 期间隐藏

> ID：11719871
> 
> 赞同：5
> 
> 时间：2012-07-30T10:43:27.103
> 
> 标签：ios, core-animation, uistoryboard, uistoryboardsegue

我正在尝试制作自定义 segue，以便目标视图控制器从顶部向下滑动。

我根据[文档](http://developer.apple.com/library/IOs/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html)中的示例编写了我的代码。

问题是执行segue时，源视图控制器变黑，然后出现动画。如何防止源视图控制器变黑？

（我已经尝试实现[这个答案](https://stackoverflow.com/questions/10779563/custom-segue-animation)中提出的解决方案，但是屏幕在转换后变黑，或者恢复到源视图控制器。）

这是我的代码：

```
-(void)perform{

    UIViewController *splashScreen = self.sourceViewController;
    UIViewController *mainScreen = self.destinationViewController;

    //Place the destination VC above the visible area        
    mainScreen.view.center = CGPointMake(mainScreen.view.center.x,
                                          mainScreen.view.center.y-600);

    //Animation to move the VC down into the visible area
    [UIView animateWithDuration:1
                     animations:^{
                         mainScreen.view.center = CGPointMake(mainScreen.view.center.x, [[UIScreen mainScreen] bounds].size.height/2 );
                     }
     ];

    [splashScreen presentModalViewController:mainScreen animated:NO];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:18:39.697

您的源视图控制器似乎被隐藏的原因是目标视图控制器立即出现。

当您编写自定义 segue 时，您不会同时拥有两个视图。你也可以

*   推送视图控制器，将源视图添加到目标视图控制器并制作动画
*   将目标视图添加到源视图控制器并制作动画，然后推送视图控制器
*   推送到中间视图控制器，添加两个视图，动画，推送到目标视图控制器。

在上述所有我说推送视图控制器的情况下，您可以改为以模态方式呈现视图控制器。事实上，这可能更适合中间视图控制器解决方案。

# actionscript-3 - AIR 中的垃圾收集第三方 SWF

> ID：11719877
> 
> 赞同：2
> 
> 时间：2012-07-30T10:43:53.737
> 
> 标签：actionscript-3, flash, apache-flex, air

考虑一个 AIR 应用程序，它可以一次加载任意数量的第三方 SWF 文件以进行显示。就像一个网络浏览器。

问题是这些 SWF 文件可能具有尚未删除的 EventListener 等。

Loader.unloadAndStop() 是否足以垃圾收集这些 SWF？

如果没有 - 是否有一种方法可以（可能每个 SWF 都有一个新的 NativeWindow，然后在完成后关闭 NativeWindow。这会完全 GC 吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:41:12.063

单独的本机窗口或在浏览器控件中加载可能是您无法控制的第三方 SWF 的一种方式。否则这会增加很多开销。

不幸的是，您无法确保加载代码的正确沙盒（显示对象，最重要的是，阶段不能从加载的代码中隐藏）。如果加载的代码在舞台上添加了一个侦听器（如果您需要键盘事件，这很常见），那么它将不会卸载。

然而，这在 SWF 格式本身不同的移动设备上是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:28:48.780

不久前，我在没有源代码的外部开发组件中遇到了类似的问题，它被夹在了我们的应用程序中。我能做/想到的最好的事情就是做核工业所做的事情——*当事情变糟时，至少将它包含在混凝土中，这样它就不会传播得比它必须的更多*。

我的解决方案是建立一个“组件池”，这样当被污染的对象被要求“清洁”时，它们被放在一个单独的存放区域中，以便在需要时重复使用——这样在运行期间只创建了所需的最少数量会议。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T11:05:09.257

在 GC 之前，您应该创建一个公共静态函数来删除加载的 swf 文件中的所有侦听器。

# list - 如何在 Sencha Touch 2 中过滤列表？

> ID：11719882
> 
> 赞同：0
> 
> 时间：2012-07-30T10:44:13.073
> 
> 标签：list, filter, sencha-touch-2, dataview

我正在按代码过滤股票列表，但它不起作用。也许代码有问题？我错过了什么？以下是我尝试过的一些事情：

```
function filterBySymbol: function(select, value) {

    var ordersStore = this.getBrokerageOrderHistoryList().getStore();

    ordersStore.clearFilter();

    if (value !== '') {
        ordersStore.data.filterBy(function (record, id) {
            // log to make certain this gets called (and it is)
            console.log(id, record.get('symbol') === value);
            return record.get('symbol') === value;
        });

// Other things I've tried (nothing worked):
// 1)
//          var f = new Ext.util.Filter({
//             filterFn: function(record) {
//                return record.get('symbol') === value;
//             }
//          });
//          ordersStore.filterBy(f);
// 2)
//          ordersStore.filter(function (record) {
//              return record.get('symbol') === value;
//          });
// 3)
//          this.getBrokerageOrderHistoryList().setStore(ordersStore);
//          this.getBrokerageOrderHistoryList().refresh();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:25:43.813

事实证明，我们必须在商店中禁用远程过滤，这应该默认为 false，但事实并非如此：

```
this.getOrderList().getStore().setRemoteFilter(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:00:53.910

其中之一应该工作

```
// 1
ordersStore.filter("symbol", value);

// 2
ordersStore.filter([    
    { filterFn: function(item) { return item.get("symbol") === value; }}
]);

// 3
ordersStore.filterBy(function(item) { 
return item.get("symbol") === value; 
} 
```

**更新：**有效的样本：

```
Ext.define('ST.store.Products', {
    extend: 'Ext.data.Store',

    config: {
        fields: ["title", "category" ],
        storeId: "Products",

        data: [
            { title: 'Text1', category: 'cat1'},
            { title: 'Text2', category: 'cat2'},
            { title: 'Text3', category: 'cat3'},
        ]
    }
});

 console.log("before");
        Ext.getStore("Products").each(function(item){
            console.log(item.data.title);

        });        

        Ext.getStore("Products").filterBy(function(item){
            return item.get('title') == 'Text1';    
        });

        console.log("after");
        var store = Ext.getStore("Products").each(function(item){
            console.log(item.data.title);

        }); 
```

就我而言，我在开发者控制台中看到以下内容

```
before 
Text1
Text2
Text3
after
Text1 
```

# asp.net - asp.net、sql server中的连接字符串问题

> ID：11719884
> 
> 赞同：0
> 
> 时间：2012-07-30T10:44:50.880
> 
> 标签：asp.net, sql-server, connection-string, custom-errors

我使用 SQL Server Management Studio 在主机上创建了一个数据库，并上传了我的网站、App_Code 和 App_Data 文件夹。我的连接字符串如下：

```
<connectionStrings> 
    <add name="abc" 
    connectionString="Data Source=serverNane; 
    Initial Catalog=dbname;       
    Integrated Security=false;
    User ID=user;
    Password=pwd" 
    providerName="System.Data.SqlClient" />
</connectionStrings> 
```

在使用我的登录页面时，我收到一个错误，因为我没有将 customErrors 添加到我的 web.config 文件中。添加 customErrors 和默认错误页面后，由于堆栈跟踪不可见，我无法理解发生了什么错误。我的连接字符串有问题吗？

# cmake - CMake/CTest & gcovr：文件扩展名？

> ID：11719890
> 
> 赞同：5
> 
> 时间：2012-07-30T10:45:09.520
> 
> 标签：cmake, code-coverage, gcov, ctest

在使用带有标志 --coverage 的 CMake 编译并运行我的 boost 单元测试程序后，将创建扩展名为 .cpp.gcda 和 .cpp.gcno 的文件。如果我然后运行 ​​gcovr 它声称它找不到 .gcno 文件（错误消息“.gcno：无法打开图形文件”）。我可能会移动所有输出文件，但这真的很尴尬/愚蠢。

其他人的相关问题可以通过使用 CTest 来解决，但是当我使用 Jenkins 时，我想坚持使用 gcovr 并使用 cobertura xml 输出。

附言。也许我应该简单地问：我应该如何将 CMake 与 gcovr 结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T13:55:34.770

这是我们在 jenkins 中用于相同设置的解决方案：[http](http://www.semipol.de/archives/320) ://www.semipol.de/archives/320 。您可以出于自己的目的从链接的 RSC 库中获取 CMake 宏。

除此之外，阅读有关最近 gcc 版本中覆盖文件格式略有变化的内容，似乎 gcovr 没有跟上这一点。但我不记得我在哪里读到的。

# iphone - UITableViewCellSelectionStyleNone 在编辑模式下仍然显示复选标记

> ID：11719891
> 
> 赞同：0
> 
> 时间：2012-07-30T10:45:10.340
> 
> 标签：iphone, ios, uitableview

在编辑模式下，我在分组表格单元格上设置单元格背景颜色时遇到问题。似乎选中标记显示必须设置选择样式，唯一的选项是 UITableViewCellSelectionStyleBlue 或 UITableViewCellSelectionStyleGray。我所追求的是选中复选标记，并且在选中时单元格保持白色。

你会认为 UITableViewCellSelectionStyleNone 会有这种行为，但这会停止显示的复选标记。

![UITableViewCellSelectionStyleNone 选中时不显示复选标记](../Images/32b40c6f8fd821f82baf7addcfdaa740.png)

我曾尝试使用 setSelectedBackgroundView。如果未对单元格样式进行分组，但不会绘制圆角，这将起作用。

![角落的自定义背景视图问题。](../Images/c408e8bcb71fd4e54dbe960bdccd2a78.png)

上面单元格的属性是

```
 cell.selectionStyle = UITableViewCellSelectionStyleGray;
    cell.backgroundView = [self tableViewCellRowBackground]; 
```

其中 tableViewCellRowBackground 是橙色背景的 UIView。editMode 是 iOS 内置的表格编辑模式，在表格上设置了以下属性

```
 self.tblFiles.allowsSelectionDuringEditing=YES;
    self.tblFiles.allowsMultipleSelectionDuringEditing = YES; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:57:56.313

```
cell.backgroundView = [self tableViewCellRowBackground]; 
```

此方法为您选择的单元格设置图像。您应该检查这个以使选择样式图像为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:25:54.803

最后，我必须通过覆盖 drawrect 方法来创建自己的自定义单元格。

# interface - Facebook Like 点击显示 URL 不到一秒

> ID：11719894
> 
> 赞同：0
> 
> 时间：2012-07-30T10:45:32.967
> 
> 标签：interface, facebook-like

我正在使用 Facebook Like 的 iFrame 版本。有时，在“赞”点击时，它会在几分之一秒内显示被赞页面的 URL。之后，它会显示喜欢它的人的名字。有没有办法阻止它显示 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:54:38.180

Like 按钮是 Facebook 的功能，因此无论如何都无法更改。您最好[向 Facebook 提交](http://developers.facebook.com/bugs)具有确定性重现步骤的错误，以便他们可以为您解决问题。

# svn - 同一工作区上的并发 SVN 更新

> ID：11719895
> 
> 赞同：4
> 
> 时间：2012-07-30T10:45:33.890
> 
> 标签：svn, svn-lock

在我的公司，我们使用 Jenkins 来构建我们的 C++ 应用程序。由于项目之间紧密相连，并且我们使用分层的 make 结构，我们将整个源代码作为一个大工作区进行检查。

然后，我们使用不同的 Jenkins 项目在构建之前对同一工作区的不同子文件夹进行更新，有时这些项目是同时构建的。使用 Subversion 1.6 可以正常工作，但是使用 Subversion 1.7 我们经常会遇到以下错误：

> 工作区似乎被锁定，因此获得一个新的工作区

我认为这是因为如果更新正在运行，subversion 1.7 会锁定整个工作区（而 1.6 只锁定了相关的子文件夹）。

有没有办法在不锁定 Subversion 1.7 中的 subversion 工作区的情况下进行 SVN 更新？此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T06:03:23.127

不，我认为您将必须有一个 jenkins 工作来更新所有项目的工作区，然后生成可以同时构建的其他工作 - 但不更新工作副本。

# cucumber - 如何使用 Cucumber 重新运行失败的场景？

> ID：11719898
> 
> 赞同：46
> 
> 时间：2012-07-30T10:45:37.953
> 
> 标签：cucumber

我正在使用 Cucumber 进行测试。如何仅重新运行失败的测试？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-30T11:45:07.897

使用重新运行格式化程序运行 Cucumber：

```
cucumber -f rerun --out rerun.txt 
```

它将所有失败场景的位置输出到此文件。

然后你可以使用重新运行它们

```
cucumber @rerun.txt 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-02T00:09:25.780

这是我简单而整洁的解决方案。

**第 1 步**：编写你的黄瓜 java 文件，如下所述`rerun:target/rerun.txt`。Cucumber 将失败的场景行号写入`rerun.txt`如下所示。

```
features/MyScenaios.feature:25
features/MyScenaios.feature:45 
```

稍后我们可以在**步骤 2**中使用此文件。将此文件命名为`MyScenarioTests.java`. 这是运行标记场景的主要文件。如果您的场景测试用例失败，将在目标目录下`MyScenarioTests.java`写入/标记它们。`rerun.txt`

```
@RunWith(Cucumber.class)
@CucumberOptions(
    monochrome = true,
    features = "classpath:features",
    plugin = {"pretty", "html:target/cucumber-reports",
              "json:target/cucumber.json",
              "rerun:target/rerun.txt"} //Creates a text file with failed scenarios
              ,tags = "@mytag"
           )
public class MyScenarioTests   {

} 
```

**第 2 步：**创建另一个场景文件，如下所示。让我们这样说`FailedScenarios.java`。每当您发现任何失败的场景时，都会运行此文件。该文件将`target/rerun.txt`用作运行场景的输入。

```
@RunWith(Cucumber.class)
@CucumberOptions(
    monochrome = true,
    features = "@target/rerun.txt", //Cucumber picks the failed scenarios from this file 
    format = {"pretty", "html:target/site/cucumber-pretty",
            "json:target/cucumber.json"}
  )
public class FailedScenarios {

} 
```

每次如果您发现任何失败的场景，请在**步骤 2中运行该文件**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-14T09:31:36.903

```
task cucumber() {
    dependsOn assemble, compileTestJava
    doLast {
        javaexec {
            main = "io.cucumber.core.cli.Main"
            classpath = configurations.cucumberRuntime + sourceSets.main.output + sourceSets.test.output
            args = ['--plugin', 'json:target/cucumber-reports/json/cucumber.json',
                    '--plugin', "rerun:target/rerun.txt",
                    '--glue', 'steps',
                    'src/test/resources']
        }
    }
}

task cucumberRerunFailed() {
    doLast {
        javaexec {
            main = "io.cucumber.core.cli.Main"
            classpath = configurations.cucumberRuntime + sourceSets.main.output + sourceSets.test.output
            args = ['--plugin', 'json:target/cucumber-reports/json/cucumber.json',
                    '@target/rerun.txt']
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-28T20:16:41.560

我知道这很旧，但我先在这里找到了自己的方式，然后又找到了一个更新的答案（不是公认的 Cyril Duchon-Doris 的答案）： [https ://stackoverflow.com/a/41174252/215789](https://stackoverflow.com/a/41174252/215789)

Since cucumber 3.0 you can use `--retry` to specify how many times to retry a scenario that failed. [https://cucumber.io/blog/open-source/announcing-cucumber-ruby-3-0-0/](https://cucumber.io/blog/open-source/announcing-cucumber-ruby-3-0-0/)

Just tack it on to your cucumber command: `cucumber ... --retry 2`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-24T20:08:53.807

您至少需要 1.2.0 版才能使用 @target/rerun.txt 新功能。之后，只需创建一个在最后运行并使用此文件的运行器。此外，如果您使用 Jenkins，您可以在随机失败功能上添加标签，这样构建不会失败，除非运行两次。

# delphi - Delphi REST 生命周期

> ID：11719899
> 
> 赞同：1
> 
> 时间：2012-07-30T10:45:39.267
> 
> 标签：delphi, delphi-xe2, datasnap

为什么 REST 客户端连接，如果在服务器类上使用 Session LifeCycle，它的行为就像 Invocation LifeCycle？

# perl - 在 CGI 中运行 DOS 命令时出错

> ID：11719903
> 
> 赞同：0
> 
> 时间：2012-07-30T10:45:55.363
> 
> 标签：perl, cgi, dos

我尝试使用 Perl 将一个文件的简单副本运行到另一个文件夹

```
system("copy template.html tmp/$id/index.html"); 
```

但我收到错误错误：`The syntax of the command is incorrect.`

当我将其更改为

```
system("copy template.html tmp\\$id\\index.html"); 
```

系统将另一个文件复制到文件`tmp\$id`夹

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:15:04.727

我建议您使用[`File::Copy`](http://perldoc.perl.org/File/Copy.html)Perl 发行版附带的 .

```
use strict; use warnings;
use File::Copy;

print copy('template.html', "tmp/$id/index.html"); 
```

您无需担心 Windows 上的斜杠或反斜杠，因为该模块会为您处理这些问题。

请注意，您必须从当前工作目录设置相对路径，因此目录`template.html`和目录都`tmp/$id/`需要在那里。如果您想即时创建文件夹，请查看[`File::Path`](http://perldoc.perl.org/File/Path.html).

* * *

**更新：**回复下面的评论。

您可以使用此程序创建文件夹并通过就地替换 ID 来复制文件。

```
use strict; use warnings;
use File::Path qw(make_path);

my $id = 1; # edit ID here

# Create output folder
make_path("tmp/$id");
# Open the template for reading and the new file for writing
open $fh_in, '<', 'template.html' or die $!;
open $fh_out, '>', "tmp\\$id\index.html" or die $!;
# Read the template
while (<$fh_in>) {
  s/ID/$id/g;       # replace all instances of ID with $id
  print $fh_out $_; # print to new file
}
# Close both files
close $fh_out;
close $fh_in; 
```

# c# - 这个 lambda 表达式的返回类型应该是什么？

> ID：11719911
> 
> 赞同：1
> 
> 时间：2012-07-30T10:46:36.037
> 
> 标签：c#, lambda

目前我`join`在两个表上执行，结果可能是多行。

返回类型是`IList<string>`当前，但我收到一个错误

**错误：**

```
Cannot implicitly convert type System.Collections.Generic.List<AnonymousType#1> to System.Collections.Generic.IList<string> 
```

这是我的表达

```
public IList<string> GetPendingSubGroups()
{
    using (var db = new DataClasses1DataContext())
    {
        var pendingSubGroup =
            db.sys_Log_Account_SubGroups.Where(subGroup => subGroup.cAuthorizedStatus.Equals("Pending")).Join(
                db.sys_Account_Primary_Groups, subGroup => subGroup.nGroupCode, group => group.nGroupCode,
                (subGroup, group) => new
                                         {
                                             cSubGroupName = subGroup.cSubGroupName,
                                             cAddedBy = subGroup.cAddedBy,
                                             dAddedOn = subGroup.dAddedOn
                                         }).ToList();
        return pendingSubGroup;
    }
} 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:51:11.990

创建一个类来表示您的结果

```
public class SubGroup
{
    public string Name {get; set;}
    public string AddedBy {get; set;}        
    public DateTime AddedOn {get; set;}
} 
```

并返回该类的列表

```
public IList<SubGroup> GetPendingSubGroups()
    {
        using(var db=new DataClasses1DataContext())
        {
            var pendingSubGroup = db.sys_Log_Account_SubGroups.Where(subGroup => subGroup.cAuthorizedStatus.Equals("Pending")).Join(db.sys_Account_Primary_Groups, subGroup => subGroup.nGroupCode, group => group.nGroupCode,(subGroup, group) => new SubGroup
            {
                Name = subGroup.cSubGroupName,
                AddedBy = subGroup.cAddedBy,
                AddedOn = subGroup.dAddedOn 
            }).ToList();  
            return pendingSubGroup; 
        }
    } 
```

注意这个隐藏在 linq 中的变化

```
(subGroup, group) => new *SubGroup*
            {
                Name = subGroup.cSubGroupName,
                AddedBy = subGroup.cAddedBy,
                AddedOn = subGroup.dAddedOn 
            }).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T10:50:35.413

您在此处使用投影方法创建[匿名类型：](http://msdn.microsoft.com/en-us/library/bb397696.aspx)`Select`

```
new
{
    cSubGroupName = subGroup.cSubGroupName,
    cAddedBy = subGroup.cAddedBy,
    dAddedOn = subGroup.dAddedOn 
} 
```

该类型由编译器创建（作为具有只读属性的类）。此实例中的属性名称是`cSubGroupName`、`cAddedBy`和`dAddedOn`。

如果您需要返回 a `string`，也许您需要返回其中一个属性而不是整个类型？

您将无法实现匿名类型和字符串之间的转换，因此您可能需要首先不创建类型，只需选择字符串属性。

如果您需要返回一个类型而不仅仅是 a `string`，那么只需创建一个具有此属性的自定义类，而不是创建一个匿名类型，而是创建一个类的实例，如[NinjaNye 的回答](https://stackoverflow.com/a/11719992/358221)中所示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T10:50:56.843

错误消息几乎说明了一切，您将返回一个匿名类型列表：

```
(subGroup, group) => new
{
    cSubGroupName = subGroup.cSubGroupName,
    cAddedBy = subGroup.cAddedBy,
    dAddedOn = subGroup.dAddedOn 
} 
```

如果您只想要 SubGroupName：

```
(subGroup, group) => subGroup.cSubGroupName 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T10:51:05.530

返回类型是匿名类型。您应该使用这些属性创建一个新类并像这样使用它：

```
public IList<SomeClass> GetPendingSubGroups()
    {
        using(var db=new DataClasses1DataContext())
        {
            var pendingSubGroup = db.sys_Log_Account_SubGroups
            .Where(subGroup => subGroup.cAuthorizedStatus.Equals("Pending"))
            .Join(db.sys_Account_Primary_Groups, subGroup => subGroup.nGroupCode, group => group.nGroupCode,(subGroup, group) => new SomeClass(subGroup.cSubGroupName, subGroup.cAddedBy, subGroup.dAddedOn)).ToList();  

            return pendingSubGroup; 
        }
    } 
```

但似乎您只想返回一个字符串？在这种情况下，您可以只投影一个字段：

```
return pendingSubGroup.Select(p => p.cSubGroupName).ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T10:53:14.610

您可以返回 IList。但是每次尝试使用它时都必须打开它。我不建议这样做。最好在返回时定义自己的类

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T10:59:10.023

正如已经回答的那样，您创建了一个由三个属性组成的匿名类型：

```
cSubGroupName 
cAddedBy 
dAddedOn 
```

如果**SubGroupName**是您想要获得的，那么您可以或修改您的 qu

```
public IList<string> GetPendingSubGroups()
        {
            using(var db=new DataClasses1DataContext())
            {
                var pendingSubGroup = db.sys_Log_Account_SubGroups.Where(subGroup => subGroup.cAuthorizedStatus.Equals("Pending")).Join(db.sys_Account_Primary_Groups, subGroup => subGroup.nGroupCode, group => group.nGroupCode,(subGroup, group) => subGroup.cSubGroupName).ToList();  
                return pendingSubGroup; 
            }
        } 
```

# backbone.js - 使用 Backbone.js 和 Rivets.js 的简单示例

> ID：11719914
> 
> 赞同：4
> 
> 时间：2012-07-30T10:46:43.483
> 
> 标签：backbone.js, rivets.js

我正在寻找一个非常简单的示例，例如，在`span`文本和`input`使用 Backbone.js 和[Rivets.js](http://rivetsjs.com/)的元素之间有两种方式绑定。也许在 Rivets.js 文档中有一个，但我找不到。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T00:20:23.330

假设您的意思是输入元素上的双向绑定（模型到视图和视图到模型）和跨度元素上的单向绑定（模型到视图），那么下面的视图就可以了你描述的。

```
<div id="user-view">
  <span>{ user:name }</span>
  <input rv-value="user:name">
</div> 
```

这是一个演示实际操作[的小提琴。](http://jsfiddle.net/eH4zG/252/)它在界面上包含一个 Backbone 适配器，`:`并展示了如何将模型绑定到视图（这只是主页上已经显示的内容的一个更简单的示例）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T02:44:38.203

推荐你使用： [https://github.com/theironcook/Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder) 可以满足所有视图和模型的双向绑定需求。</p>

这是我做的嵌套视图绑定示例： [http://files.cnblogs.com/justinw/Nested_Model_bi_Binding.zip](http://files.cnblogs.com/justinw/Nested_Model_bi_Binding.zip)

# c# - TRANCOUNT 不匹配

> ID：11719915
> 
> 赞同：0
> 
> 时间：2012-07-30T10:46:45.473
> 
> 标签：c#, sql-server, entity-framework

这是我正在使用的示例存储过程

```
CREATE PROCEDURE [dbo].[CreateCustomer]
        @firstName nvarchar(50) = null,
        @lastName nvarchar(50) = null,
        @emailAddress nvarchar(50),
        @contactNumber varchar(15) =null,
        @street1 nvarchar(50) = null,
        @street2 nvarchar(50) = null,
        @city nvarchar(50) = null,
        @State nvarchar(50)= null,
        @Country nvarchar(50)=null,
        @postalCode varchar(5) = null,
        @middleName nvarchar(50),
        @password nvarchar(50),
        @membershipExpieryDate datetime,
        @status int OUT

    AS
        BEGIN TRY
            BEGIN TRANSACTION
            SAVE TRANSACTION initialP
                DECLARE @lastAccessed datetime = GETDATE()
                DEClARE @uniqueCustomerID UNIQUEIDENTIFIER= NEWID()
                BEGIN TRANSACTION
                    INSERT INTO Customers(CustomerID, FirstName, LastName, EmailAddress, LastAccessed, ContactNumber, 
                        Street1, Street2, City, State, Country, PostalCode, MiddleName, Password, MembershipExpieryDate)
                        VALUES(@uniqueCustomerID,@firstName, @lastName, @emailAddress, @lastAccessed, @contactNumber, @street1, @street2,
                         @city, @State, @Country, @postalCode, @middleName, @password, @membershipExpieryDate)

     INSERT INTO Roles(CustomersCustomerID,Role) VALUES(@uniqueCustomerID,'V') 
            COMMIT

            SELECT CustomerID, FirstName, LastName, EmailAddress, LastAccessed, ContactNumber, 
                Street1, Street2, City, State, Country, PostalCode, MiddleName, MembershipExpieryDate FROM Customers WHERE EmailAddress = @emailAddress  

        SET @status =1
        COMMIT
    END TRY 
    BEGIN CATCH
        IF(@@TRANCOUNT > 0)
        BEGIN
            ROLLBACK TRANSACTION initialP
        END
        SET @status =2
    END CATCH 
```

这是我用来获取查询数据的代码：

```
ObjectParameter status = new ObjectParameter("status", typeof(int));
var dataSet = Entity.CreateCustomer(newCustomer.FirstName, newCustomer.LastName,
newCustomer.EmailAddress, newCustomer.ContactNumber, newCustomer.Street1, newCustomer.Street2,
newCustomer.City, newCustomer.State, newCustomer.Country, newCustomer.PostalCode, newCustomer.MiddleName,
newCustomer.Password, newCustomer.MembershipExpieryDate, status); 
```

但是当执行这个存储过程时，它会给出一个错误，说 Trans count 不匹配。据我所知，当 a 发生时，它会被 1归罪。`trans count`当 a发生时，它会被 1减刑。我已经在**函数导入**中映射了该函数，因为它可以返回一个复杂类型。`begin transaction``commit`

 **我无法理解这个问题。对我来说，这似乎还可以。我想知道天气我这样做是否正确与一些细节。谢谢。

编辑：这是我通过编写示例代码发现的。我首先认为是开始交易和提交。但事实并非如此。**它允许选择甚至在提交语句之前插入的值**（如果我错了，请纠正我。）。我创建了一个包含 3 列（test1 唯一标识符、test2 int、test3 int）的测试表，并创建了一个存储过程调用测试：它在下面给出：

```
CREATE PROCEDURE dbo.TestForCommit

    (
    @test11 int,
    @test111 int,
    @status int OUTPUT
    )

AS
    begin try
        declare @test1 uniqueidentifier  = NEWID()
        begin transaction
            insert into TestT1(Test1, Test11, Test111) values(@test1, @test11, @test111)
        commit
        select Test1, Test11, Test111 from TestT1 where Test1 = @test1
        SET @status = 1
    end try
    begin catch
        Rollback Transaction
        set @status =2
    end catch
    /* SET NOCOUNT ON */
    RETURN 
```

我在实体模型中创建了一个功能导入，我像这样使用它：

```
 ObjectParameter status = new ObjectParameter("status", typeof(int));
            SchoolEntities test = new SchoolEntities();
            var dataSet = test.TestForCommit(1, 1, status);
                //A:
                //(XXXXXXXXXXXXX)Console.WriteLine((int)status.Value);
                foreach (var item in dataSet)
                {
                    TestForCommit_Result t = item;
                    Console.WriteLine("{0} , {1} , {2}", t.Test1, t.Test11, t.Test111);

                }
                //B:
                Console.WriteLine((int)status.Value);
                Console.ReadLine(); 
```

***这个 //A: 部分导致了问题。这给出了一个空引用异常。但是 //B: 部分正在工作并给出状态值。我仍在寻找为什么它会这样工作。谢谢！！***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:55:39.000

## 我的建议。（设置 Xact_Abort 开）

```
Begin Try
    Set NoCount On
    Set Xact_Abort On
    Begin Tran
        --Your Query
    Commit Tran
End Try

Begin Catch
    Rollback Tran
End Catch 
```

* * *

```
CREATE PROCEDURE [dbo].[CreateCustomer]
    @firstName nvarchar(50) = null,
    @lastName nvarchar(50) = null,
    @emailAddress nvarchar(50),
    @contactNumber varchar(15) =null,
    @street1 nvarchar(50) = null,
    @street2 nvarchar(50) = null,
    @city nvarchar(50) = null,
    @State nvarchar(50)= null,
    @Country nvarchar(50)=null,
    @postalCode varchar(5) = null,
    @middleName nvarchar(50),
    @password nvarchar(50),
    @membershipExpieryDate datetime,
    @status int OUT

AS
BEGIN TRY
    Set NoCount ON
    Set XAct_Abort ON
    DECLARE @lastAccessed datetime = GETDATE()
    DEClARE @uniqueCustomerID UNIQUEIDENTIFIER= NEWID()

    BEGIN TRANSACTION
    INSERT INTO Customers(CustomerID, FirstName, LastName, EmailAddress, LastAccessed, ContactNumber, 
    Street1, Street2, City, State, Country, PostalCode, MiddleName, Password, MembershipExpieryDate)
    VALUES(@uniqueCustomerID,@firstName, @lastName, @emailAddress, @lastAccessed, @contactNumber, @street1, @street2,
    @city, @State, @Country, @postalCode, @middleName, @password, @membershipExpieryDate)

    INSERT INTO Roles(CustomersCustomerID,Role) VALUES(@uniqueCustomerID,'V') 
    COMMIT

    SELECT CustomerID, FirstName, LastName, EmailAddress, LastAccessed, ContactNumber, 
    Street1, Street2, City, State, Country, PostalCode, MiddleName, MembershipExpieryDate FROM Customers WHERE EmailAddress = @emailAddress  

    SET @status =1
    COMMIT Tran
END TRY 
BEGIN CATCH
    ROLLBACK TRANSACTION
    SET @status =2
END CATCH 
```**

# java - 将“init”中定义的 servlet 实例变量标记为“volatile”

> ID：11719916
> 
> 赞同：5
> 
> 时间：2012-07-30T10:46:45.187
> 
> 标签：java, servlets, concurrency

是否有必要将所有 servlet 实例变量标记为“易失性”（或从同步部分中访问它们）？包括那些在“init”方法中定义的，之后没有修改的？

我了解“init”方法是由一个线程调用的，而变量会被另一个线程访问，所以似乎是必要的。或者可能不是？当“init”方法完成时，是否有任何机制保证实例变量的当前值对所有其他线程可见？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T10:56:49.977

servlet 容器将确保 servlet 的初始化和它们的调用之间存在内存屏障。你不应该做任何事情。

注意：我在规范中没有找到这样的要求，但我认为容器不这样做是失败的。`ServletConfig config`顺便说一句，在 GenericServlet 中，由 init 方法初始化的实例变量没有标记为 volatile。

# java - 如何清除 JDateChooser 字段？

> ID：11719917
> 
> 赞同：2
> 
> 时间：2012-07-30T10:46:46.090
> 
> 标签：java, jdatechooser

我使用 JDateChooser 作为 JForm 中的组件。我设置了一个 JButton，它将此表单上的所有字段重置为空白。我对 actionListener 或清除方法没有问题，但不确定如何清除 JDateChooser 组件。

更具体地说，我想知道如何从日期选择器的 JTextField 组件中清除日期，使其为空白。

此外，我想在清除后将此字段设置为当前日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T13:37:41.120

If you want to clear the JDateChooser field:

```
JDateChooser dateChooser = new JDateChooser();
dateChooser.setCalendar(null); 
```

This code will set the field to `null`.

To set the date to today you can use for example:

```
dateChooser.setDate(new Date()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:50:32.710

如果 dateChooser 是您的 JDateChooser 实例：

```
dateChooser.setDate(new Date()); 
```

编辑：我不确定“设置今天的日期”是什么意思。我假设您的意思是将 JDateChooser 中的日期设置为今天的日期（这就是我的代码所做的）。如果这不是您想要的，请澄清您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:13:00.253

```
((JTextField)dateChooser.getDateEditor().getUiComponent()).setText("");
dateChooser.setDate(new Date()); 
```

# android - 获取网页图标

> ID：11719918
> 
> 赞同：-2
> 
> 时间：2012-07-30T10:46:49.717
> 
> 标签：android, web-applications

我正在开发一个基于网络的应用程序。该应用程序将使用很多不同的图标，我想知道是否有从网络加载它的地方。我注意到几乎每个网页的主页按钮旁边都有一个小图标，例如纽约时报图标：

![在此处输入图像描述](../Images/36440aed27aabba3081e5291455f07e5.png)

如何仅使用 url 获取此图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:53:06.157

它通常位于站点的根目录 /favicon.ico

但是在 /img/favicon.ico 的堆栈上，

您可以通过网站的头部搜索链接标签，其 rel 属性为 icon

```
 <link rel="shortcut icon" href="http://cdn.sstatic.net/stackoverflow/img/favicon.ico"> 
```

这是堆栈溢出如何链接到自己的图标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:49:40.093

它被称为[favicon](http://en.wikipedia.org/wiki/Favicon)，您可以像浏览器一样获取它：通过 HTTP 请求图像。正如 Wikipedia 文章所述，URL 通常`<link>`以`<head>`.

例如，如果您查看此页面的源代码，则会告诉我们 URL：

```
<link rel="shortcut icon" href="http://cdn.sstatic.net/stackoverflow/img/favicon.ico"> 
```

# iphone - 适用于 iPad 和 iPhone 的应用程序；删除 iPad 组件预发布

> ID：11719919
> 
> 赞同：1
> 
> 时间：2012-07-30T10:46:53.937
> 
> 标签：iphone, ios, ipad, app-store, device

我即将发布一款我已经开发了很长一段时间的应用程序，目前它已针对 iPhone 和 iPad 构建。该应用程序具有 iPhone 和 iPad 故事板以及各种特定于设备的代码和视图。我现在希望删除 iPad 引用并发布仅针对 iPhone 的应用程序。

可以通过这种方式更改项目而不会有太大困难吗？可能出现的潜在并发症是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:58:01.603

您应该能够将 Xcode 中的设备目标更改为仅 iPhone，然后验证构建在 iPad 上的 iPhone 模拟器窗口中运行。您还可以检查捆绑 plist 以验证 UIDeviceTarget 仅包含 1，而不是 1 和 2。

如果要删除 iPad 资源，请单击情节提要（或其他文件），选中属性窗格，然后取消选中目标。这将阻止文件被复制到应用程序包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:57:15.670

在此图像中，您可以看到仅选择了**设备**`iPhone`。你可以从这里改变它。

![在此处输入图像描述](../Images/e418afcca227815f9fab91ec89432294.png)

# android - 在 Android 应用中更改语言

> ID：11719921
> 
> 赞同：1
> 
> 时间：2012-07-30T10:47:02.270
> 
> 标签：android, locale

我想以编程方式更改我的应用程序中的语言。第一个 onCreate(Bundle) 方法有效，图像以中文显示。第二个不起作用。我必须在“TODO”评论中插入什么？我想在创建视图后更改语言并想要更新它。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TranslationHelper.changeLanguage(this, Locale.CHINESE);
    setContentView(R.layout.main_activity);
    doBindService();
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);
    TranslationHelper.changeLanguage(this, Locale.CHINESE);
    // TODO recreate view to display chinese version
    doBindService();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:03:32.960

第一个示例有效，因为它在`setContentView`调用方法之前更改了语言环境。您需要`changeLanguage`在`setContentView`. 之后所有视图都已膨胀，`setContentView`因此此时更改区域设置将无效。如果要在创建视图后更改语言，则需要手动更新它。

# git - 哪些提交得到了精心挑选

> ID：11719926
> 
> 赞同：1
> 
> 时间：2012-07-30T10:47:20.317
> 
> 标签：git, cherry-pick

可能是一个基本问题。我已经在分支中挑选了一些提交。现在我想获得一个从分支 A 提交到分支 B 的提交列表。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-17T18:29:51.207

尝试这个：

```
git log --oneline --cherry A...B 
```

这列出了 B 中但不在 A 中的所有提交，并将在 A 中具有等效提交的提交标记为`=`

# git - git仓库克隆日志

> ID：11719936
> 
> 赞同：8
> 
> 时间：2012-07-30T10:47:48.357
> 
> 标签：git, logging, repository

我希望监视我的 git 存储库中的克隆活动，但是我找不到任何显示如何设置或如何检索此信息的内容。

这甚至可能吗？如果是这样，如何设置以及如何检索日志信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:30:57.787

您可以使用`post-checkout`挂钩来更新服务器上的数据库或文件。这个钩子在客户端运行（也就是说，做克隆的人将执行脚本），所以你需要从这个角度来设计你的脚本。此外，可以通过将`--no-checkout`选项添加到`git clone`.

一种简单可靠的方法是让服务器运行一个小型 RESTful Web 服务，您的钩子可以使用该服务`curl`或类似的工具调用该服务。例如：

```
#!/usr/bin/env python

import socket, sys, urllib, pycurl

service_url = "https://my.server.dns/service.php"
data = urllib.urlencode({
  'prev':   sys.argv[1],
  'new':    sys.argv[2],
  'branch': sys.argv[3],
  'host':   socket.gethostname()
  })

c = pycurl.Curl()
c.setopt(pycurl.URL, service_url)
c.setopt(pycurl.POSTFIELDS, data)
c.perform() 
```

请参阅[http://www.kernel.org/pub/software/scm/git/docs/githooks.html](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:58:47.930

我认为克隆上的存储库的服务器端没有任何钩子或类似的东西。git 可能只是使用指定的协议（ssh、http、...）并获取适当的文件。您可以尝试以某种方式监控该活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:38:46.373

我打算发布同样的问题，但找到了这个。我能找到的更好的是包装`git-upload-pack`命令以记录呼叫。这仅适用于 ssh，但请参阅：[pre-fetch hook features in git](https://stackoverflow.com/questions/1243729/pre-fetch-hook-functionality-in-git)

但只有 root 才能做到这一点。它对我不起作用，但也许对其他人来说是一个解决方案。

您可以始终安装“git 服务器”来控制访问，例如 gitolite ( [http://sitaramc.github.com/gitolite/master-toc.html](http://sitaramc.github.com/gitolite/master-toc.html) )。您可以直接记录它，也可以扩展它的功能。

# cocoa - 列表的可可控件？

> ID：11719938
> 
> 赞同：0
> 
> 时间：2012-07-30T10:47:50.927
> 
> 标签：cocoa, interface-builder

有没有等效于 WPF 的 itemscontrol 的 Cocoa 控件？我一直在使用单列、基于视图的 NSTableView，但似乎无法调整各个行的大小以适应其内容，甚至无法获得不同高度的行（所有视图的大小都与最高的一样高）。更一般地说，有没有办法让视图大小适合其内容？我一直在使用约束，但似乎只能根据容器的大小来制作视图大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:23:16.137

您应该使用`NSTableViewDelegate`它的`-tableView:heightOfRow:`方法来指定单个行高。

# iphone - 在 Xcode 4 中隐藏标签栏项目

> ID：11719940
> 
> 赞同：0
> 
> 时间：2012-07-30T10:48:08.097
> 
> 标签：iphone, objective-c, uitabbar, uitabbaritem

我有一个带有 loginViewController 的选项卡栏控制器，我想隐藏与 loginViewController 相关的选项卡栏项目并显示具有不同 ViewController 的不同选项卡栏项目

我正在 iPhone 的基于标签栏的应用程序中使用 Storyboard

我已经尝试过[这个解决方案](https://stackoverflow.com/questions/8150389/how-can-i-hide-a-tab-bar-item)，但它不起作用（Xcode 不允许我使用“隐藏”选项）

拜托，任何关于我如何在 Xcode 4 中做到这一点的帮助都会很棒！

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:02:45.387

我想假设您将 TabBarController 子类化。

通过协议/委托，您可以处理来自 loggingViewController 的数据（也许，单击按钮以隐藏 TabBarItem）。将该协议实现到您的 TabBarController，这样您就可以接收这些协议方法来轻松添加/隐藏/删除项目。

试试看！或者进一步的问题？

# jquery - 使用 jQuery 将默认文本更改为输入文本

> ID：11719941
> 
> 赞同：1
> 
> 时间：2012-07-30T10:48:11.640
> 
> 标签：jquery, html

我有一个简单的表单，其中包含三个输入文本，每个文本具有不同的值。我希望当我单击一个以清除默认值时，如果用户不插入文本，我想在外出时将默认文本放入输入中。我在 jQuery 中编写了一个代码，问题是当我点击它时，它采用第一个输入类型的相同默认值，而不是它的文本，为什么？这是代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.testo').each(function() {
    var default_value = this.value;
        $(".testo").focus(function() {
            $(this).attr('value','');
        });
        $(".testo").blur(function() {
            if ($(this).attr('value')==''){
                $(this).attr('value',default_value);
            }
        });
    });
});

<p><input type="text" name="nome" class="testo"  value="Nome e Cognome"/> </p>
            <p><input type="text" name="telefono" class="testo" value="un tuo Recapito Telefonico"/></p>
            <p><input type="text" name="email"  class="testo" maxlength="60" value="una E-Mail Valida"/></p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:52:53.127

您可以使用输入的占位符属性在没有 javascript 的情况下实现此目的：

```
<input type="text" name="telefono" class="testo" placeholder="un tuo Recapito Telefonico"/> 
```

[在此处](http://jsfiddle.net/MNWxE/)查找示例

编辑：

考虑到这是 html5，虽然[它被浏览器广泛支持](http://caniuse.com/#feat=input-placeholder)，但如果你想支持它们，你应该遵循@liam 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:50:32.890

每次绑定焦点和模糊事件时，您的 javascript 都没有使用相同的值。所以这些将始终绑定到每个中的最后一个，请尝试：

```
$(document).ready(function() {
    $('.testo').each(function() {
    var default_value = this.value;
        $(this).focus(function() {
            $(this).val('');
        });
        $(this).blur(function() {
            if ($(this).val()==''){
                $(this).val(default_value);
            }
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:56:43.143

***[工作演示](http://jsfiddle.net/5mCFt/)***。

```
$(document).ready(function() {
    $('.testo').each(function() {
        var default_value = this.value;
        // you could do chain method to avoid call $(this) twice.
        $(this).focus(function() {
            $(this).val('');
        }).blur(function() {
            if ($(this).val() == ''){
                $(this).val(default_value);
            }
        });
    });
});​ 
```

# codeigniter - 为什么我的电子邮件功能在 CodeIgniter 中不起作用

> ID：11719945
> 
> 赞同：0
> 
> 时间：2012-07-30T10:48:23.457
> 
> 标签：codeigniter, gmail, incoming-mail

此邮件功能不起作用。

在下面的代码中，`$tomail`和`$frommail`参数是正确的，但邮件没有到达我的 Gmail 帐户。

```
$this->load->library('email');

$config['mailtype'] = 'html';
$config['wordwrap'] = TRUE;

$this->email->initialize($config);
$this->email->to($to);
$this->email->from($from);
$this->email->cc($cc);
$this->email->subject($subject);
$this->email->message($message);
$this->email->send();
if ( ! $this->email->send())
{
    echo $this->email->print_debugger(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:58:54.283

试试这个：

```
$this->load->library('email');
 $config['mailtype'] = 'html';
 $config['protocol'] = 'sendmail';
 $this->email->initialize($config);  
 $this->email->from('yourmailid', 'Admin');
 $this->email->to($email);
 $this->email->subject('hello world');
 $this->email->message($body);

 if($this->email->send()) 
     echo "email send"; 
```

# php - PHP 和 Oracle 会话登录

> ID：11719948
> 
> 赞同：0
> 
> 时间：2012-07-30T10:48:32.503
> 
> 标签：php, oracle11g

这是我的 PHP 代码 + Oracle 登录表单有问题。
在这个 PHP 文件中，我创建了登录功能。但我有这样的错误：

```
 Warning: oci_num_rows() expects parameter 1 to be resource, string given in C:\xampp\htdocs\developers\it\session.php on line 12
Wrong 
```

-

```
<?php
session_start();
include ("config.php");
$username = $_POST['username'];
$password = $_POST['password'];
$do = $_GET['do'];
if($do=="login")
{
    $cek = "SELECT PASSWORD, USER_LEVEL FROM T_USERS WHERE USERNAME='$username' AND PASSWORD='$password'";
    $result = oci_parse($conn, $cek);
    oci_execute($result);
    if(oci_num_rows($cek)==1)
    {
        $c = oci_fetch_array($result);
        $_SESSION['username'] = $c['username']; ociresult($c,"USERNAME");
        $_SESSION['USER_LEVEL'] = $c['USER_LEVEL']; ociresult($c,"USER_LEVEL");
        if($c['USER_LEVEL']=="ADMINISTRATOR")
        {
            header("location:supervisor.php");
        }
        else if($c['user_level']=="User")
        {
            header("location:user.php");
        }
        else if($c['user_level']=="Root")
        {
            header("location:administrator.php");
        }
        else if($c['user_level']=="Manager")
        {
            header("location:manager.php");
        }
        else if($c['user_level']=="Admin")
        {
            header("location:admin.php");
        }
        else if($c['user_level']=="Director")
        {
            header("location:director.php");
        }
    }
    else
    {
        echo "Wrong";
    }
}
?> 
```

我试图在谷歌搜索，但仍然没有找到任何东西。有人知道，有什么问题吗？感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:53:50.647

根据您的脚本而不是

```
if(oci_num_rows($cek)==1) 
```

你应该打电话

```
if(oci_num_rows($result)==1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:56:57.537

当您询问`$result`从. 但是，您*确实*希望避免像这样直接在字符串中使用and 。它会让您对 SQL 注入攻击敞开心扉，因此请考虑与[oci_bind_by_name](http://no.php.net/manual/en/function.oci-bind-by-name.php)一起使用。`$cek``oci_num_rows()`*`$username``$password``oci_parse`*

 *之后，您还应该始终`exit()`在重定向序列之后调用，因为如果您不这样做，脚本将继续运行（这可能是其他地方的安全问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-25T20:01:48.040

我也遇到了同样的情况，所以我用这样的脚本欺骗了它，但我不知道是否有影响。因为会话和验证进展顺利。

```
 $username =$_POST['username'];
    $password = $_POST['password'];

    $conn = oci_connect('xxx', 'xxx', 'localhost/MYDB');
    $pass_encription = md5($password);
    $query = "SELECT * from *table_name* WHERE *field1*='".$username."' and *field2*='".$password."'";
    $result = oci_parse($conn, $query);
    oci_execute($result);
    $exe = oci_fetch($result);
     if ($exe > 0)
     {
        oci_close($conn);
        oci_execute($result);
        $row        =oci_fetch_array($result);

        $sid        = $row['field_1_parameter'];
        $snama      = $row['field_2_parameter'];
        $sjab       = $row['field_3_parameter'];

        $session    = array     ( 
                                    'field_1_array'             =>$sid,
                                    'field_2_array'             =>$snama,
                                    'field_3_array'             =>$sjab 
                                );

        if($sjab == 'Administrator')
            {
                $this->session->set_userdata($session);
                redirect('redirecting_page');
            } 
```

`*

# grails - Grails-Gsp 如何使复选框组只选择三个复选框中的一个

> ID：11719954
> 
> 赞同：1
> 
> 时间：2012-07-30T10:49:13.933
> 
> 标签：grails, gsp

我有三个复选框

```
 <g:checkBox name="startAccountingStatus" value="Yes" />
 <g:checkBox name="startAccountingStatus" value="No" />
 <g:checkBox name="startAccountingStatus" value="NA" /> 
```

我想要 RadioGroup 之类的东西。现在我可以在这里选择所有的复选框。我不想要那个.. 我只能检查一个复选框。

我可以在我不想的 jQuery 中做到这一点。

有没有办法在 Grails Gsp 中实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:49:58.040

您为什么不使用[同样出现在 Grails 中的](http://grails.org/doc/latest/ref/Tags/radioGroup.html)[HTML 广播](http://www.w3.org/TR/html-markup/input.radio.html)组？

您可以[使收音机项目看起来像 checkbxes](https://stackoverflow.com/questions/279421/can-you-style-an-html-radio-button-to-look-like-a-checkbox)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:10:17.990

如果您希望在客户端浏览器上进行检查，而不是在提交后在服务器端进行检查，唯一的方法是通过 javascript（jquery、原型或简单的 javascript，这并不重要）

# mysql - 从 Group By 获取最后一个元素

> ID：11719955
> 
> 赞同：0
> 
> 时间：2012-07-30T10:49:16.173
> 
> 标签：mysql, group-by

我有这个查询...

```
 $sQuery = "
        SELECT SQL_CALC_FOUND_ROWS ".str_replace(" , ", " ", implode(", ", $aColumns))."
        FROM   dominios left join datas on dominios.id_dominio=datas.id_dominio
left join dnss on dominios.id_dominio=dnss.id_dominio
left join entidades_gestoras on dominios.id_dominio=entidades_gestoras.id_dominio
left join estados on dominios.id_dominio=estados.id_dominio
left join ips on dominios.id_dominio=ips.id_dominio
left join quantidade_dnss on dominios.id_dominio=quantidade_dnss.id_dominio
left join responsaveis_tecnicos on dominios.id_dominio=responsaveis_tecnicos.id_dominio
left join titulares on dominios.id_dominio=titulares.id_dominio 
        WHERE dominios.estado not like 2 and dominios.estado not like 0 AND data_expiracao > '".date("Ymd")."' $sWhere $where 
        GROUP BY dominio 
        $sOrder
        $sLimit
        "; 
```

它返回我“需要”的结果......但是 Group By，它向我显示了出现在数据库中的第一个结果，而我需要最后一个......

我怎样才能做到这一点？：秒

**已编辑** 这是最终查询，没有这些变量

```
 SELECT SQL_CALC_FOUND_ROWS `datas`.`data_insercao`, `datas`.`data_expiracao`, `datas`.`data_registo`, 
`dominios`.`dominio`, 
`titulares`.`nome`, `titulares`.`morada`, `titulares`.`email`, `titulares`.`localidade`, `titulares`.`cod_postal`, 
`entidades_gestoras`.`nome`, `entidades_gestoras`.`email`, 
`responsaveis_tecnicos`.`nome`, `responsaveis_tecnicos`.`email`, 
`ips`.`ip`, `dominios`.`id_dominio` FROM dominios left join datas on dominios.id_dominio=datas.id_dominio 
left join dnss on dominios.id_dominio=dnss.id_dominio 
left join entidades_gestoras on dominios.id_dominio=entidades_gestoras.id_dominio 
left join estados on dominios.id_dominio=estados.id_dominio 
left join ips on dominios.id_dominio=ips.id_dominio 
left join quantidade_dnss on dominios.id_dominio=quantidade_dnss.id_dominio 
left join responsaveis_tecnicos on dominios.id_dominio=responsaveis_tecnicos.id_dominio left join titulares on dominios.id_dominio=titulares.id_dominio WHERE dominios.estado not like 2 and dominios.estado not like 0 AND data_expiracao > '20120730' GROUP BY dominio ORDER BY `datas`.`data_insercao` asc LIMIT 0, 10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:51:29.480

默认情况下，MySQL 按升序对记录进行排序，要首先获取最后的记录，您需要对记录进行排序`DESCNDING ORDER`：

```
$sOrder DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:01:16.593

# 一般注意事项

我不确定您在哪个列中`aColumns`，或者该`dominio`列来自哪个表。当您使用 对多行进行分组时`GROUP BY`，您为结果选择的列应该对于组的所有行具有相同的值（即在功能上依赖），或者应该是一些[聚合函数](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html)，将所有行的值组合在群组。

一些 SQL 方言强制执行此操作。MySQL 没有，但是如果您选择在组内具有不同值的未聚合列，则无法保证实际返回给您的值是什么。它可能来自组内的任何一行。所以没有办法得到这些行的“最后一个”，因为没有任何固有的顺序。在简单的情况下，您可以使用`MIN`或`MAX`选择您需要的值。在更复杂的情况下，您很可能必须使用子查询从组中进行选择。

例如，[此答案](https://stackoverflow.com/a/11415413/1468366)根据升序为每个`Name`（对应于您的`dominio`分组列）计算最后一个值。或者更确切地说，使用降序排列的第一个值是相同的。`Action``Time`

# 你的申请

由于您在下面的评论表明您想要`id_dominio`每个`dominio`in的最大值`dominios`，我建议如下：

```
SELECT …
FROM (SELECT MAX(id_dominio) AS id_dominio
      FROM dominios
      GROUP BY dominio
      WHERE estado <> 2
        AND estado <> 0
     ) domIds
LEFT JOIN datas ON domIds.id_dominio=datas.id_dominio
… 
```

因此将有一个子查询来计算`id_dominio`每个`dominio`组的最大值，并且所有后续连接都可以使用该子查询中的 ID 而不是整个`dominio`表。如果您还需要表中的其他列，则`dominio`可能必须再次将其包含在连接中，以便您可以从您在子查询中选择其 ID 的那些 row3 中获取所有值。

# javascript - javascript从html输入中删除“禁用”属性

> ID：11719961
> 
> 赞同：128
> 
> 时间：2012-07-30T10:49:38.613
> 
> 标签：javascript, input, attributes

如何使用 javascript 从 HTML 输入中删除“禁用”属性？

```
<input id="edit" disabled> 
```

在 onClick 我希望我的输入标签不包含“禁用”属性。

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-07-30T10:50:56.953

将元素的`disabled`属性设置为 false：

```
document.getElementById('my-input-id').disabled = false; 
```

如果您使用的是 jQuery，则相当于：

```
$('#my-input-id').prop('disabled', false); 
```

对于多个输入字段，您可以按类访问它们：

```
var inputs = document.getElementsByClassName('my-input-class');
for(var i = 0; i < inputs.length; i++) {
    inputs[i].disabled = false;
} 
```

Where`document`可以替换为表单，例如，仅查找该表单内的元素。您还可以使用`getElementsByTagName('input')`来获取所有输入元素。在您的`for`迭代中，您必须检查`inputs[i].type == 'text'`.

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-03-31T13:40:41.783

为什么不直接删除该属性？

1.  香草JS：`elem.removeAttribute('disabled')`
2.  jQuery：`elem.removeAttr('disabled')`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-06-01T11:07:11.893

最好的答案就是 removeAttribute

```
element.removeAttribute("disabled"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-08T13:19:28.873

要使用输入的属性将设置`disabled`为 false ：`name`

```
document.myForm.myInputName.disabled = false; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-19T14:25:16.867

```
$("#input-id").attr("disabled", false) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-18T13:19:37.103

```
method 1 <input type="text" onclick="this.disabled=false;" disabled>
<hr>
method 2 <input type="text" onclick="this.removeAttribute('disabled');" disabled>
<hr>
method 3 <input type="text" onclick="this.removeAttribute('readonly');" readonly> 
```

先前答案的代码似乎不适用于内联模式，但有一种解决方法：方法 3。

见演示[https://jsfiddle.net/eliz82/xqzccdfg/](https://jsfiddle.net/eliz82/xqzccdfg/)

# sockets - Node.js REPL 评估

> ID：11719963
> 
> 赞同：0
> 
> 时间：2012-07-30T10:49:41.023
> 
> 标签：sockets, node.js, read-eval-print-loop

我正在尝试对 Node.JS REPL 进行评估。我收到错误消息`TypeError: Property 'eval' of object #<REPLServer> is not a function`。这是我的源代码：

```
repl.start("> ", socket, socket, true, function(cmd, context, filename, callback){
etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:55:37.773

repl.start() 接受一个带有这些选项的对象，而不是单个参数：

例如（注意大括号）

```
repl.start({
  prompt: "node via stdin> ",
  input: process.stdin,
  output: process.stdout
}); 
```

请参阅以下示例：[http ://nodejs.org/docs/v0.8.4/api/repl.html#repl_repl_start_options](http://nodejs.org/docs/v0.8.4/api/repl.html#repl_repl_start_options)

# iphone - UIButton：突出显示按钮状态时的背景图像设置问题？

> ID：11719966
> 
> 赞同：0
> 
> 时间：2012-07-30T10:49:48.813
> 
> 标签：iphone, ios, ipad, uibutton

我有一个 UIButton，我需要在点击按钮时更改按钮的图像。Button 的背景图片在 ViewDidLoad 方法中设置。请参考此线程上附加的图像。

1.  当我第一次点击按钮时，按钮属性将更改为选中，并且“arrow_right.png”图像将设置为我们的按钮。

![在此处输入图像描述](../Images/8a78b0a29997fcd4a32a461317046862.png)

2.在第二次点击时，我观察到当按钮状态突出显示时，但它的背景图像没有设置。您可以看到一些模糊效果。

![在此处输入图像描述](../Images/f8b4197e617c6e1b620e8b5ff6d2e2af.png)

我担心的是我在切换 UIButton 时看到，图像未设置为突出显示状态。当按钮的状态从 Selected 变为 Normal 时。这是一个错误还是我的错误？

谢谢你。

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  [testButton setBackgroundImage:[UIImage imageNamed:@"btn_normal.png"] forState:UIControlStateNormal];
  [testButton setBackgroundImage:[UIImage imageNamed:@"btn_pressed.png"] forState:UIControlStateSelected];
  [testButton setBackgroundImage:[UIImage imageNamed:@"btn_pressed.png"] forState:UIControlStateHighlighted];

}
- (IBAction)buttonPressed:(id)sender 
{
  UIButton *button = (UIButton*)sender;
  button.selected = !button.selected;

  if (button.selected)
  {
      [button setImage:[UIImage imageNamed:@"arrow_right.png"] forState:UIControlStateNormal];
      [button setImage:[UIImage imageNamed:@"arrow_right.png"] forState:UIControlStateHighlighted];
      [button setImage:[UIImage imageNamed:@"arrow_right.png"] forState:UIControlStateSelected];
  }
  else
  {
      [button setImage:[UIImage imageNamed:@"arrow_left.png"] forState:UIControlStateNormal];
      [button setImage:[UIImage imageNamed:@"arrow_left.png"] forState:UIControlStateHighlighted];
      [button setImage:[UIImage imageNamed:@"arrow_left.png"] forState:UIControlStateSelected];
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:27:31.553

尝试这个

```
- (IBAction)buttonPressed:(id)sender 
{
  UIButton *button = (UIButton*)sender;
 if(button.selected) {
 [button setSelected:NO]
} else {
 [button setSelected:YES]
}

} 
```

我不明白为什么你需要再次设置图像，你需要做的就是设置它的 selected 属性，按钮会像你预期的那样表现

# c# - Convert double to round up using C#

> ID：11719968
> 
> 赞同：0
> 
> 时间：2012-07-30T10:49:55.760
> 
> 标签：c#, asp.net, c#-4.0

I want to convert the double value to round up value. That means if a number 12.2 means it converted to 13\. How can i convert this using c#

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:51:25.873

Simple:

```
int result = (int)Math.Ceiling(value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:28:57.187

Using `System.Math.Ceiling` is nice. Example:

```
int output = (int)Math.Ceiling(12.2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:52:27.987

Use [`System.Math.Ceiling`](http://msdn.microsoft.com/en-us/library/zx4t0t48.aspx) method, which does the job

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:15:40.763

Using `Math.Ceiling` is the simplest way:

```
double input = 12.2;
int output = (int)Math.Ceiling(input);
textBox1.Text = output.ToString(); //if you want to show it in a textBox 
```

# python - XML文件的Python比较

> ID：11719972
> 
> 赞同：0
> 
> 时间：2012-07-30T10:50:12.607
> 
> 标签：python, xml, comparison, saxparser

我有两个包含许多项目的大型 XML 文件（c.100MB）。我想输出它们之间的区别。

每个项目都有一个 ID，我需要检查它是否在两个文件中。如果是，那么我需要比较该项目的各个值以确保它是同一个项目。

SAX 解析器是解决这个问题的最佳方法吗？它是如何使用的？我使用了元素树和 findall，它们适用于较小的文件，但现在我不能适用于大文件。

```
srcTree = ElementTree()
srcTree.parse(srcFile)

# finds all the items in both files
srcComponents = (srcTree.find('source')).find('items')
srcItems = srcComponents.findall('item')
dstComponents = (dstTree.find('source')).find('items')
dstItems = dstComponents.findall('item')

# parses the source file to find the values of various fields of each
# item and adds the information to the source set
for item in srcItems:
  srcId = item.get('id')
  srcList = [srcId]
  details = item.find('values')
  srcVariables = details.findall('value')
  for var in srcVariables:
    srcList.append((var.get('name'),var.text))
srcList = tuple(srcList)
srcSet.add(srcList) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:10:31.783

您可以将 elementtree 用作拉式解析器（如 sax）[http://effbot.org/zone/element-pull.htm](http://effbot.org/zone/element-pull.htm) 以及 elementree [http://effbot.org/zone/element-iterparse 中的 iterparse 函数。 htm](http://effbot.org/zone/element-iterparse.htm) 这两者都允许您处理大文件，而无需将所有内容加载到内存中。

但是 sax 可以工作（我已经用它处理了比 100MB 大得多的数据）但我现在会使用 elementtree 来完成这项工作。

还可以查看基于 lxml 的增量/事件解析（与 etree 兼容）[http://lxml.de/tutorial.html#event-driven-parsing](http://lxml.de/tutorial.html#event-driven-parsing)

这是一篇关于使用 iterparse 处理文件 > 1GB [http://www.ibm.com/developerworks/xml/library/x-hiperfparse/的好文章](http://www.ibm.com/developerworks/xml/library/x-hiperfparse/)

# mysql - 排序存储在 MYSQL 数据库中的文本字段中的数字

> ID：11719975
> 
> 赞同：0
> 
> 时间：2012-07-30T10:50:19.923
> 
> 标签：mysql, asp-classic

我有一个带有文本字段的 mySQL 数据库，其中存储了一个数字。我需要生成按数字降序排序的记录集。这工作正常，直到我们得到大于 10 的数字，即

```
9
8
7
6
5
4
3
2
10
1

```

有没有一种“正确”排序的简单方法？（是的，我知道我应该在数字字段中有数字，但我正在使用我所拥有的 :)）

我在 asp/vbscript/jquery 页面上使用结果，所以即使是客户端解决方案也是可行的......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:52:22.397

```
ORDER BY ABS(text_column) DESC 
```

或者，如果您还必须处理负值：

```
ORDER BY CAST(text_column AS SIGNED) DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:54:42.303

您需要将其类型转换为`INTEGER`使用 `CAST`MySQL 中的函数：

```
ORDER BY CAST(text_column AS UNSIGNED INTEGER) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:56:58.340

试试这个——

```
... ORDER BY text_column * 1 
```

# android - 如何在 Android 的 BroadcastReceiver 类中访问数据库？

> ID：11719981
> 
> 赞同：2
> 
> 时间：2012-07-30T10:50:43.680
> 
> 标签：android, broadcastreceiver

我有一`BroadcastReceiver`堂课来接听来电。我想将传入的号码与我数据库中的号码进行比较。现在我不明白如何在`BroadcastReceiver`课堂上使用数据库。我以这种方式在方法中创建`DBAdapter`类的对象：`onReceive()`

```
@Override
public void onReceive(Context context, Intent intent) {

  DBAdapter db = new DBAdapter(contenxt);
  Cursor c = d.getAllData();
  while(c.moveToFirst){
      do{
            Log.v("Data : "+c.getString(2));
        }
        while(c.moveToNext);
  }
} 
```

上面的代码片段抛出 NullPointerException。请有人帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:23:35.110

最大和最简单的方法如下，

```
SQLiteDatabase db;
@Override
public void onReceive(Context context, Intent intent) {
    db = context.openOrCreateDatabase("PhoneDB2", 0, null);
    Cursor cur = db.rawQuery("SELECT * From checkedNumbers", null);

    if(cur.moveToFirst()) {
        do {

        } while(cur.moveToNext())
    }
} 
```

这是解决上述问题的好方法............

# java - 将文件上传到 google appengine 的代码段中生成的错误

> ID：11719988
> 
> 赞同：0
> 
> 时间：2012-07-30T10:50:58.790
> 
> 标签：java, google-app-engine, jsp, blobstore

以下代码段在 IDE 中以及当我单击部署应用程序时生成错误。

```
 <form  action="<%= blobstoreService.createUploadUrl("/upload") %>" method="post" enctype="multipart/form-data">
          <input type="file" name="myFile"/>
          <input type="submit" value="submit"/> 
```

错误：

```
error: cannot find symbol
[javac]       out.print( blobstoreService.createUploadUrl("/upload") );
[javac]                  ^
[javac]   symbol:   variable blobstoreService
[javac]   location: class UploadTester_jsp
[javac] 1 error 
```

我需要添加什么？为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:01:15.750

您必须声明然后初始化变量`blobstoreService`。

```
<%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService" %>
....

<%
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
%> 
```

以上直接来自[文档](https://developers.google.com/appengine/docs/java/blobstore/overview)。

# java - onCreate中出现NullPointerException，调试后似乎找不到原因

> ID：11719989
> 
> 赞同：0
> 
> 时间：2012-07-30T10:51:00.560
> 
> 标签：java, android, nullpointerexception

我对 Android 编程相当陌生，并且一直在寻找一些解决此问题的指针，但我似乎无法解决确切的问题。

我想我只需要一些指示它为什么以及在哪里抛出 NullPointerException 以便我将来可以自己追踪它。

部分相关代码：

```
 private static final long TWO_MINUTES = 1000 * 60 * 2;
    private static final long TEN_SECONDS = 10000;
    private static final float TEN_METERS = 10;
    public static final String LOG_TAG = "Locally";
    private static LocationManager locMan;
    Button StopButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Toast.makeText(getApplicationContext(), "Attempting to start service",
                Toast.LENGTH_SHORT);

        startService(new Intent(LocallyActivity.this, LocallyService.class));

        StopButton = (Button) findViewById(R.id.button1);

        LocationManager locMan = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        double lat = 0;
        double longi = 0;
        TextView t = (TextView) findViewById(R.id.textView1);
        Criteria crit = new Criteria();
        String strLoc = locMan.getBestProvider(crit, true);
        Location lastKnown = locMan.getLastKnownLocation(strLoc);
        if (lastKnown != null) {
            lat = lastKnown.getLatitude();
            longi = lastKnown.getLongitude();
            long tsLong = System.currentTimeMillis() / 1000;
            long lastTime = lastKnown.getTime();
            long difference = tsLong - lastTime;

            Time time = new Time();
            time.set(Long.valueOf(lastTime));
            t.setText("" + lat + ", " + longi + " (" + strLoc + ", time: "
                    + time.hour + " " + time.minute + ")");

            Object networkLocation = requestUpdatesFromProvider(strLoc, 32);
        } else {
            t.setText("No last location from " + strLoc);
        }
    }

    private Location requestUpdatesFromProvider(final String provider,
            final int errorResId) {
        Location location = null;
        Log.v(LOG_TAG, provider);
        if (locMan.isProviderEnabled(provider)) {
            locMan.requestLocationUpdates(provider, TEN_SECONDS, TEN_METERS,
                    listener);
            location = locMan.getLastKnownLocation(provider);
        } else {
            Toast.makeText(this, errorResId, Toast.LENGTH_LONG).show();
        }
        return location;

    } 
```

和错误跟踪：

```
07-30 12:41:12.644: E/AndroidRuntime(20697): FATAL EXCEPTION: main
07-30 12:41:12.644: E/AndroidRuntime(20697): java.lang.RuntimeException: Unable to start         activity ComponentInfo{com.somnu.locally/com.somnu.locally.LocallyActivity}:     java.lang.NullPointerException
07-30 12:41:12.644: E/AndroidRuntime(20697):    at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at android.os.Looper.loop(Looper.java:137)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at java.lang.reflect.Method.invokeNative(Native Method)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at java.lang.reflect.Method.invoke(Method.java:511)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at dalvik.system.NativeStart.main(Native Method)
07-30 12:41:12.644: E/AndroidRuntime(20697): Caused by: java.lang.NullPointerException
07-30 12:41:12.644: E/AndroidRuntime(20697):    at com.somnu.locally.LocallyActivity.requestUpdatesFromProvider(LocallyActivity.java:67)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at com.somnu.locally.LocallyActivity.onCreate(LocallyActivity.java:57)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at android.app.Activity.performCreate(Activity.java:4465)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-30 12:41:12.644: E/AndroidRuntime(20697):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-30 12:41:12.644: E/AndroidRuntime(20697):    ... 11 more 
```

第 67 行是：

```
if (locMan.isProviderEnabled(provider)) { 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T10:55:04.877

我认为`locMan is null so NPE...`

利用

```
locMan = (LocationManager) getSystemService(Context.LOCATION_SERVICE); 
```

**代替**

```
LocationManager locMan = (LocationManager) getSystemService(Context.LOCATION_SERVICE); 
```

# plone - 用于比较 Plone 中的数字输入的 TALES 表达式？

> ID：11719994
> 
> 赞同：2
> 
> 时间：2012-07-30T10:51:19.067
> 
> 标签：plone, zope, ploneformgen

TALES 表达对我来说是新的。我可以得到一些很好的参考吗？实际上，我希望使用 ploneformgen 为数字输入字段定义内容规则。就像是：

```
python: request.form.get('amt', False) <= 5000 
```

然后应用规则。

这里的“amt”是输入表单上的数字/整数字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:51:37.283

作为参考，您应该查看官方[TALES 规范](http://wiki.zope.org/ZPT/TALESSpecification13)，或参考[Zope Page Templates 参考的 TALES 部分](http://docs.zope.org/zope2/zope2book/AppendixC.html#tales-overview)。

在这种情况下，您使用的是纯 Python 表达式，因此适用 Python 代码的正常规则。

表达式 request.form.get('amt', False) 将从请求中返回请求参数`'amt'`，如果缺少该参数，则返回 boolean `False`，然后将其与整数值进行比较。

该表达式有两点错误：首先，您假设`'amt'`参数是整数值。然而，即使是 PFG 整数字段，仍然是请求对象中的字符串。因此，您需要先将其转换为整数，然后才能进行比较。

此外，你回退到一个布尔值，它在整数比较中将被视为等效于`0`，最好是明确的并使用它来代替：

```
python: int(request.form.get('amt', 0)) <= 5000 
```

请注意，对于 PFG 条件，您还可以返回字符串错误消息而不是布尔 True：

```
python: int(request.form.get('amt', 0)) <= 5000 or 'Amount must be not be greater than 5000' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:08:51.203

如果表单参数未在应用程序级别定义，则通常作为字符串传入，否则例如

Zope 将在后台使用字段名 amt:int 将值转换为整数。

因此，您可能想尝试在第一个表达式周围放置一个 int(....)。