# StackOverflow 问答 11161000-11161999

# java - 套接字断开错误

> ID：11161008
> 
> 赞同：0
> 
> 时间：2012-06-22T17:12:26.483
> 
> 标签：java, sockets

我制作了一个程序来保持与服务器的连接。它总是有许多来自接收和发送的数据包，从不断开连接（就像游戏一样）。它一直运行完美，但是当**服务器失去**与客户端的连接时，会发生以下情况之一：

1.  `channel.read`返回 -1。它断开连接，没有错误。

2.  `channel.write`抛出异常。它调用 to `closeServer()`，`channel.read`返回 -1 并毫无问题地断开连接。

3.  `channel.read` **永远不会回来**。`channel.write`被调用太多次，它总是抛出一个异常，但`channel.read`永远不会返回。

4.  `channel.read`永远不会回来。`channel.write`永远不要抛出异常。过了一会儿，`channel.write`就再也回不来了。它堆叠起来没有错误。有时它永远不会被堆叠，它总是写入字节，但连接结束了。

5.  `channel.read`从不返回，`channel.write`从不抛出异常。我`closeServer()`用手打电话，但它被堆积起来，`channel.close();`永远不会回来。

我对此越来越疯狂。这是源代码：

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.nio.ByteBuffer;
import java.nio.channels.SocketChannel;

public class Client {
    Boolean close = false;
    SocketChannel channel = null;
    JFrame window;

    public Client(JFrame window){
        this.window = window;
    }
    public void send (String s){
        try {
            channel.write(StringToByteBuffer(s));
        } catch (IOException ex) {
            window.error("Error writing data\n");
            closeServer();
        }
    }

    public void Connect (){

        ByteBuffer buffer = ByteBuffer.allocateDirect(1024);
        InetSocketAddress socketAddress = new InetSocketAddress("xx.xx.xx.xx", 800);
        try {
            channel = SocketChannel.open();
            channel.connect(socketAddress);
        } catch (IOException ex) {
            window.error("Unable to connect to server\n");
        }

        send("Login String");

        try {
            while ((channel.read(buffer)) != -1) {
                buffer.flip();
                proccessBuffer(buffer);
                buffer.clear();
                if (close){
                    channel.close();
                    break;
                }
            }
        } catch (IOException ex) {
            window.error("Error reading data\n");
            closeServer();
        }
        window.setServerOffline();
    }

    public void closeServer(){
        try {
            channel.close();
        } catch (IOException ex) {
            window.error("Error closeing socket");
        }
        close = true;
    }
} 
```

我从主 JFrame 为此类创建了一个线程，例如：

```
new Thread() {
                @Override
                public void run() {

                client = new Client(window);
                client.Connect();

            }}.start(); 
```

`window`是一个 JFrame 并且`client`是 Client 类。

# c++ - OpenCV Haar 分类器阈值

> ID：11161013
> 
> 赞同：3
> 
> 时间：2012-06-22T17:12:54.327
> 
> 标签：c++, opencv, object-detection

我正在尝试理解 oepncv XML haar 分类器，它看起来像这样：

```
 <_>
      <!-- tree 0 -->
      <_>
        <!-- root node -->
        <feature>
          <rects>
            <_>3 7 14 4 -1.</_>
            <_>3 9 14 2 2.</_></rects>
          <tilted>0</tilted></feature>
        <threshold>4.0141958743333817e-003</threshold>
        <left_val>0.0337941907346249</left_val>
        <right_val>0.8378106951713562</right_val></_></_> 
```

如原始论文中所述，阈值应与特征（积分图像）的总和进行比较。但是，图像的像素值应为 0 - 255（灰度图像）。一个特征的总和怎么会那么小（例如在这个特征中，阈值是 0.004014...）？你们能给我一些方向来理解吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T01:06:06.350

这个问题已经解决了。opencv 团队为实现该算法而发表的论文提到，他们实际上使用以下等式对像素进行了归一化：

```
Pixel = (Pixel_old - average)/(2*sigma) 
```

Pixel是每个像素的归一化值，Pixel_old是原始整数值（0-255） average是检测窗口的平均值（应该是20*20的窗口） sigma是20*20像素的标准差窗户。

# android - 混淆资源字符串可能会泄露太多关于编程逻辑的信息

> ID：11161024
> 
> 赞同：2
> 
> 时间：2012-06-22T17:13:27.740
> 
> 标签：android, obfuscation, proguard, android-resources, android-lvl

我目前使用 LVL 和 Proguard 的组合作为抵御盗版的第一道防线。

但是，资源字符串呢？例如，如果存在诸如“许可证检查失败”之类的资源字符串，那么盗版者是否只需将该资源 id 追溯到它在代码中的使用位置？事实上，如果字符串是诸如“请联系开发人员”之类的通用字符串，也是如此。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-24T15:27:17.397

如果您定义一个资源字符串，您可能会在以下位置定义或使用它：

*   字符串资源文件*res/values/strings.xml*，
*   布局文件*res/layout/*.xml* ,
*   生成的资源文件*R.java*，
*   你的 java 代码*src/**.java*。

编译后，资源字符串、它的名称和它的整数代码结束于：

*   资源文件*resources.arsc*（字符串、名称和代码），
*   资源类*R$string.class*（名称，代码），
*   您编译的代码***.class*（内联代码）。

ProGuard 将完全删除*R$string.class*，但 Android 反编译器可以从*resources.arsc*重建所有信息。它仍然需要一些工作，但字符串可能确实暗示了代码的目的（以及某些 API 调用）。

[正如 Google 的演示文稿Evading Pirates 和 Stopping Vampires](http://www.youtube.com/watch?v=TnSNCXR9fbY&lr=1)中所建议的那样，您可以通过加密/混淆代码中的字符串以及使用反射来访问某些 API 来改进这一点。

ProGuard 的 Android [DexGuard](http://www.saikoa.com/dexguard)的闭源兄弟可以为您加密字符串（以及 API 调用和整个类），可能比您手动实现的更有效，而且不会增加源代码的负担。

（我是 ProGuard 和 DexGuard 的开发者）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-21T00:12:23.427

当我想在 android 中隐藏重要的字符串时，我将它们放在 ac/c++ 库中。然后我使用 JNI 调用来检索它们。在 c 库中，我走得更远，我将字符串转换为十六进制，当我检索相同的字符串时，我再次将它从十六进制转换为整数。当黑客试图查看 c/c++ 库时，将很难找到您的秘密字符串（特别是如果将其转换为十六进制）。

这是一篇不错的[文章](https://androidsecurity.info/storing-your-secure-information-in-the-ndk/)以及如何开始这样做。

# c# - 解决方案中找不到自定义用户控件？

> ID：11161026
> 
> 赞同：1
> 
> 时间：2012-06-22T17:13:38.070
> 
> 标签：c#, winforms

我创建了一个简单的数独应用程序，其中每个 3x3 方块是一个用户控件，其中包含此框架代码，`CellBlock.Designer.cs`除了自动生成的代码之外什么都没有`CellBlock.cs`：

```
namespace Sudoku
{
    partial class CellBlock
    {

        private System.ComponentModel.IContainer components = null;

        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        private void InitializeComponent()
        {
            this.CellOne = new System.Windows.Forms.MaskedTextBox();
            this.CellFour = new System.Windows.Forms.MaskedTextBox();
            this.CellFive = new System.Windows.Forms.MaskedTextBox();
            this.CellSix = new System.Windows.Forms.MaskedTextBox();
            this.CellTwo = new System.Windows.Forms.MaskedTextBox();
            this.CellThree = new System.Windows.Forms.MaskedTextBox();
            this.CellSeven = new System.Windows.Forms.MaskedTextBox();
            this.CellEight = new System.Windows.Forms.MaskedTextBox();
            this.CellNine = new System.Windows.Forms.MaskedTextBox();
            this.SuspendLayout();
            // 
            // CellOne
            // 
            this.CellOne.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
            this.CellOne.Font = new System.Drawing.Font("Microsoft Sans Serif", 12F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.CellOne.Location = new System.Drawing.Point(8, 8);
            this.CellOne.Mask = "0";
            this.CellOne.Name = "CellOne";
            this.CellOne.PromptChar = ' ';
            this.CellOne.Size = new System.Drawing.Size(26, 26);
            this.CellOne.TabIndex = 0;
            this.CellOne.TextAlign = System.Windows.Forms.HorizontalAlignment.Center;

            //CellTwo through CellNine omitted for brevity

        // 
        // CellBlock
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
        this.Controls.Add(this.CellNine);
        this.Controls.Add(this.CellEight);
        this.Controls.Add(this.CellSeven);
        this.Controls.Add(this.CellThree);
        this.Controls.Add(this.CellTwo);
        this.Controls.Add(this.CellSix);
        this.Controls.Add(this.CellFive);
        this.Controls.Add(this.CellFour);
        this.Controls.Add(this.CellOne);
        this.Name = "CellBlock";
        this.Size = new System.Drawing.Size(107, 107);
        this.ResumeLayout(false);
        this.PerformLayout();

    }

    private System.Windows.Forms.MaskedTextBox CellOne;
    private System.Windows.Forms.MaskedTextBox CellFour;
    private System.Windows.Forms.MaskedTextBox CellFive;
    private System.Windows.Forms.MaskedTextBox CellSix;
    private System.Windows.Forms.MaskedTextBox CellTwo;
    private System.Windows.Forms.MaskedTextBox CellThree;
    private System.Windows.Forms.MaskedTextBox CellSeven;
    private System.Windows.Forms.MaskedTextBox CellEight;
    private System.Windows.Forms.MaskedTextBox CellNine;
} 
```

}

`Sudoku.cs`这些文件与主文件在同一个解决方案中。我只是通过项目菜单在解决方案中添加了一个用户控件。这是`Sudoku.Designer.cs`Visual Studio 自动生成的代码。

```
namespace Sudoku
{
    partial class Sudoku
    {

        private System.ComponentModel.IContainer components = null;

        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        private void InitializeComponent()
        {
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Sudoku));
            this.cellBlock1 = new Sudoku.CellBlock();
            this.cellBlock2 = new Sudoku.CellBlock();
            this.cellBlock3 = new Sudoku.CellBlock();
            this.cellBlock4 = new Sudoku.CellBlock();
            this.cellBlock5 = new Sudoku.CellBlock();
            this.cellBlock6 = new Sudoku.CellBlock();
            this.cellBlock7 = new Sudoku.CellBlock();
            this.cellBlock8 = new Sudoku.CellBlock();
            this.cellBlock9 = new Sudoku.CellBlock(); //errors occur at these lines

}

        private CellBlock cellBlock1;
        private CellBlock cellBlock2;
        private CellBlock cellBlock3;
        private CellBlock cellBlock4;
        private CellBlock cellBlock5;
        private CellBlock cellBlock6;
        private CellBlock cellBlock7;
        private CellBlock cellBlock8;
        private CellBlock cellBlock9;

    }
} 
```

我认为这一切都是正确的，即使为了简洁起见我省略了一些自动生成的代码。当我构建解决方案时，我收到 9 个这样的错误：类型名称 'CellBlock' 在类型 'Sudoku.Sudoku' 中不存在

引用读取的行：`this.cellBlock1 = new Sudoku.CellBlock();`等。我想也许我需要添加对`CellBlock, even though it's within the same solution, but when I click`Add Reference` 的引用，项目下没有列出任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:35:02.733

将您的命名空间重命名为新的`Sudoku`，然后清理解决方案并重建它。

删除当前 `CellBlock` 控件并再次添加它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:21:05.940

我认为这可能是因为您的类`Sudoku`与您的命名空间相同，`Sudoku`所以编译器认为应该在 class 内部调用一个内部`CellBlock`类`Sudoku`。我没有方便的 ac# 运行时和编译器，所以我无法尝试重现。

尝试重构命名空间或类名，使其拥有自己的标识符。

# python - PyEphem 角度说明

> ID：11161028
> 
> 赞同：4
> 
> 时间：2012-06-22T17:13:40.173
> 
> 标签：python, astronomy, pyephem

我只是想确保我了解 PyEphem 对角度所做的事情。

假设我有一个观察者在 30° S、60° W 今天中午看着天空。所以我这样做：

```
obs = ephem.Observer()
obs.lat, obs.lon = '-30', '-60'
obs.date = '2012/6/22 12:00:00' 
```

现在我想找出观察者在观察某个方位角和高度时看到的天球的哪一部分（在 RA 和赤纬中）。我可以：

```
obs.radec_of(az,alt) 
```

这是我感到困惑的地方。据我了解，PyEphem 以弧度的形式使用所有角度，所以我应该把`az`和`alt`作为弧度。那么，0°高度是地平线，90°高度是直接在头顶，-90°是直接指向地面吗？在这种情况下，PyEphem 是否认为 95° 高度与 85° 相同，还是会翻转到 -85°？

另外，如果观察者想看南极，这是正确的代码吗？

```
az = float( ephem.degree('180') )
alt = float( ephem.degree('30') )
ra, dec = obs.radec_of(az,alt) 
```

或者高度应该是-30°？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T03:48:53.433

您对高度和方位角的理解听起来是正确的！对于南纬30°的人来说，南天极确实位于南部地平线上方30°，正如您所描述的那样。

但是我们可以对您的代码进行一两个修复。

首先，拼写错误。您正在寻找的将度数转换为弧度的函数被命名`ephem.degrees()`（注意复数） - 如果您尝试`ephem.degree`作为函数调用，那么您将得到异常：

```
TypeError: 'float' object is not callable 
```

因为`ephem.degree`实际上是浮点数 0.0174532925199 因为那是一个度数的弧度。而且您不能像调用函数一样调用浮点数！解决这个问题，我们会为您的示例获得正确且有效的代码：

```
az = float(ephem.degrees('180'))
alt = float(ephem.degrees('30'))
ra, dec = obs.radec_of(az,alt)
print ra, dec

→ 12:30:10.05 -89:53:54.7 
```

但是我们可以让代码更简单！

首先， 的返回值`ephem.degrees()`已经是一个浮点数，所以`float()`围绕它的调用实际上是没有必要的；你可以说：

```
az = ephem.degrees('180')
alt = ephem.degrees('30') 
```

并且这两个值作为`radec_of()`. 事实上，你可以做得更好：因为`radec_of()`函数知道方位角和高度传统上以度为单位，你可以将字符串交给函数本身，它会假设你的字符串中的数字是以度为单位的。因此，如果我们愿意，我们可以完全消除`az`and`alt`变量，然后说：

```
ra, dec = obs.radec_of('180', '30') 
```

最后，您可能想知道为什么我们返回的 RA 和赤纬并不*完全*在南极，即使它们很接近。

第一个原因是 PyEphem 考虑了大气折射，它提高了低空物体在地平线以上的视高度。如果我们告诉`Observer`物体忽略大气影响（通过告诉它我们居住的地方没有空气——大气压力为零），那么返回值将更接近南极：

```
obs.pressure = 0
ra, dec = obs.radec_of('180', '30')
print ra, dec

→ 12:24:25.48 -89:55:15.9 
```

显然，这让我们更接近。剩下一两个涉及进动甚至章动的问题，我们需要解决这些问题才能真正将偏角降低到完整的 –90°，但是当我可以更好地可视化角度时，我将不得不在早上查看它们！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T04:32:44.350

回答你的另一个问题：像 95° 这样的高度*既不能*简单地认为与 85° 相同， PyEphem*也不*认为它在 -85° 高度的最低点附近低于我们的脚。相反，它认为 95° 的意思是“一直沿着你所遵循的方位线向上走——向上、向上、向上，直到最终到达天顶并处于 90°——然后*继续*向上5 度进入天空的另一边，将你带到完全相反的方位线下 5 度。”</p>

因此，如果您询问方位角和高度（15°、95°）处的点，那么 PyEphem 会认为这是一直向上 15° 线，然后更进一步，以便您开始回到*195* ° 方位角天顶线的另一侧。所以你所说的方位角和高度的“标准化”名称是（195°，90° - 5°）=（195°，85°）。

# php - mysqli 连接 - 如何创建用户名和密码？视窗服务器 2008

> ID：11161029
> 
> 赞同：0
> 
> 时间：2012-06-22T17:13:40.847
> 
> 标签：php, mysql, windows, mysqli

我正在尝试将 mysql 与移动应用程序结合起来。

我刚刚将 mySQLi php 扩展添加到我的 Windows Server 2008，但无法弄清楚如何使用 php 代码进行连接： $this->db = new mysqli('localhost', 'admin', 'XXXXX', 'admin_mySQL') ; 此代码位于我的服务器上托管的 php 文件中。

当我尝试使用用于通过远程桌面连接到服务器的用户名和密码登录时收到此反馈：警告：mysqli::mysqli() [mysqli.mysqli]: (28000/1045): Access denied for user 'admin'@'localhost'（使用密码：YES）

当我尝试使用我在 Plesk Panel 中为数据库访问设置的用户名和密码登录时收到此反馈：无效请求

我不确定问题是我的用户名和密码，还是我设置了错误或我的服务器上的设置错误。我可以做些什么来检查问题并纠正它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:16:12.870

如果您使用 plesk，首先要问的是，您是否在 Plesk 的数据库控制面板中创建了用户和数据库？

当您选择一个域时，您有一堆图标，其中有“数据库”。在数据库内部，如果我没记错的话，您可以先创建用户，然后再创建数据库，但不确定，我有一段时间没有使用 Horriplesk 了；）

# visual-c++ - 如何从 mfc 应用程序调用 IE 或任何其他浏览器？

> ID：11161031
> 
> 赞同：3
> 
> 时间：2012-06-22T17:13:48.747
> 
> 标签：visual-c++, mfc

我有一个 html 文件，我想从我的 mfc 应用程序中打开它，一种方法是 shellexecute，它可以工作，但问题是你必须将 iexplorer.exe 位置作为参数传递给 shellexecute，通常是 c:\程序文件....但是如果 IE 不在 c: 中怎么办？如果 Windows 位于另一个驱动器中，例如 d:，该怎么办？有没有其他方法可以做到这一点？或者是否有任何函数可以返回 Windows 驱动器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T17:42:57.157

你想多了。只需使用 URL 调用 ShellExecute：

ShellExecute(0, NULL, pszURL, NULL, NULL, SW_SHOWDEFAULT);

它将使用默认浏览器打开。

# python - 如何将文本框添加到 GTK+ 菜单？

> ID：11161035
> 
> 赞同：1
> 
> 时间：2012-06-22T17:14:01.353
> 
> 标签：python, gtk

有谁知道如何将文本框或其他控件添加到 gtk 菜单项？我想对我的指示器应用程序执行此操作，例如 Rhytmbox 在 linux 上的指示器菜单中添加这样的控件（它添加了一些按钮而不是文本框，但我们仍然在同一页面上，对吧？）。谢谢

# mysql - 是否可以从 Microsoft SQL 表更新 MYSQL 表

> ID：11161040
> 
> 赞同：0
> 
> 时间：2012-06-22T17:14:24.167
> 
> 标签：mysql, sql-server-2008

您好我希望在远程 MYsql 表上运行更新（更新库存级别），但我拥有的数据位于本地 Microsoft SQL 表中。

我目前在 Microsoft SQL 中本地处理我的所有数据，通常使用 ssis 只是截断然后重新填充相关的远程 MYSQL 表，这工作正常但速度很慢，我不想每天执行 4 次。

有人可以为我指出正确的方向，使用 SSIS 工具或在 Microsoft SQL 中运行将加入本地 MIcrosoft SQL 表和远程 MYsql 表的 UPDATE 查询的方式。

谢谢。

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:16:06.967

您可以在指向 MySQL 服务器的 MS SQL 上设置链接服务器（在服务器对象下）。然后使用同义词指向远程表。

您可能需要使用 ODBC 来建立连接。[首先，从http://dev.mysql.com/downloads/connector/odbc/](http://dev.mysql.com/downloads/connector/odbc/)下载并安装 MySQL ODBC 驱动程序。然后您将需要使用新驱动程序创建一个系统 ODBC 源。

# javascript - java脚本拆分错误

> ID：11161041
> 
> 赞同：1
> 
> 时间：2012-06-22T17:14:31.100
> 
> 标签：javascript, split

我正在使用 Sigma Grid 的 onCellClick 函数来允许用户从网格中进行选择，并使用所选信息更新表单。

当我尝试拆分从 onCellClick 返回的记录（返回与网格行关联的记录）时，我得到一个指向拆分线的“对象不支持此属性或方法”。

```
onCellClick : function(value, record, cell, row, colNO, rowNO, columnObj, grid){
            var recordCurrent = record;
            var recordSplit = recordCurrent.split(",");
            alert("Participant is " + recordSplit[1]);
            } 
```

如果我发出警报，显示来自 onCellClick 事件的未拆分记录，它会显示我期望的数据。

我错过了一些明显的东西。您可以提供的任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:43:25.993

您收到的错误`"Object doesn't support this property or method"`表明您正在尝试调用`.split`没有它的东西（不是字符串）。

在使用它们之前，您应该检查您的参数是否是您期望的类型：

```
if (typeof record !== 'string') {
    throw new Error('You must pass a string as the record to onCellClick!');
} else {
    var recordCurrent = record;
    var recordSplit = recordCurrent.split(",");
    alert("Participant is " + recordSplit[1]);
} 
```

经过进一步调查，[Sigma 网格文档](http://www.sigmawidgets.com/products/sigma_grid2/docs/sigma_grid.html#oncellclick)指出`record`参数的类型是`Object`或`Array`，不是`String`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:27:44.967

您应该执行两项检查：

1）实际上有记录

2) 拆分记录中包含多个对象

```
onCellClick : function(value, record, cell, row, colNO, rowNO, columnObj, grid){
    if (record.length) {
        var recordSplit = record.split(",");
        if (recordSplit.length > 1) {
            alert("Participant is " + recordSplit[1]);
        }
    }
} 
```

# php - PHP：根据键条目合并/组合数组上的值

> ID：11161042
> 
> 赞同：-1
> 
> 时间：2012-06-22T17:14:38.750
> 
> 标签：php, arrays

好吧，我必须说，我迷失了一种操作应该足够快的感觉，所以正在寻找性能快速的联合收割机。

我的数组看起来像

```
Array
(
    [0] => Array
        (
            [id] => 35
            [item] => Ball Pen
            [qty] => 1
            [price] => 23
            [total] => 23
        )

    [1] => Array
        (
            [id] => 34
            [item] => Summer vest
            [qty] => 1
            [price] => 23
            [total] => 23
        )

    [2] => Array
        (
            [id] => 34
            [item] => Summer vest
            [qty] => 3
            [price] => 23
            [total] => 69
        )
) 
```

作为输出，如果 id 出现不止一次，我想要一个 qty 的总和

```
Array
(
    [35] => Array
        (
            [id] => 35
            [item] => Ball Pen
            [qty] => 1
            [price] => 23
            [total] => 23
        )

    [34] => Array
        (
            [id] => 34
            [item] => Summer vest
            [qty] => 4
            [price] => 46
            [total] => 92
        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:23:00.257

像这样的东西应该工作

```
$sum = array();
$input = array(); // Your array
array_walk( $input, function( $el) use( &$sum) {
    if( !isset( $sum[ $el['id'] ] ))
        $sum[ $el['id'] ] = 0;
    $sum[ $el['id'] ] += $el['qty'];
}); 
```

[](http://codepad.viper-7.com/ZLwOaB)**这是一个显示正确输出[**的演示。**](http://codepad.viper-7.com/ZLwOaB)**

 **```
array(2) { [35]=> int(1) [34]=> int(4) } 
```

您可以通过以下方式获取更新的输出：

```
$output = array();
$input = array(); // Your array
array_walk( $input, function( $el) use( &$output) {
    if( !isset( $output[ $el['id'] ] ))
        $output[ $el['id'] ] = array( 
            'id' => $el['id'], 
            'item' => $el['item'], 
            'qty' => 0, 
            'price' => 0, 
            'total' => 0
        );

    $output[ $el['id'] ]['qty'] += $el['qty'];
    $output[ $el['id'] ]['price'] += $el['price'];
    $output[ $el['id'] ]['total'] += $el['total'];
});
var_dump( $output); 
```**

# php - 使用 PHP 从选择框更新 XML，反之亦然

> ID：11161043
> 
> 赞同：0
> 
> 时间：2012-06-22T17:14:39.980
> 
> 标签：php, xml

我在这样的文件中有一系列选择框：

```
<form method="post" action="update.php">

<table>
<tr>
    <td>Lane 1:</td>
    <td>
        <select name="lane1Status">
            <option value="closed">Closed</option>
            <option value="cue">Cue</option>
            <option value="registration">Registration</option>
            <option value="finAid" selected>Financial Aid & Scholarships</option>
            <option value="admisssions">Admissions</option>
        </select>
    </td>
</tr> 
```

有 8 条独立的“通道”（这是学生排队用的）。当用户更改任何这些框中的选择并点击提交时，它需要在 xml 文件中更新该“通道”，如下所示：

```
<?xml version='1.0'?>
<update>
<Lane1Status>registration</Lane1Status>
<Lane2Status>registration</Lane2Status>
<Lane3Status>registration</Lane2Status>
<Lane4Status>registration</Lane2Status>
<Lane5Status>registration</Lane2Status>
<Lane6Status>registration</Lane2Status>
<Lane7Status>registration</Lane2Status>
<Lane8Status>registration</Lane2Status>
</update> 
```

设置该值后，当用户拉起页面时，它又需要成为该特定通道的默认选择。因此，如果 Lane1Status 更新为“关闭”，则每当用户打开表单时，该通道需要默认设置为关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:33:38.480

首先，让我们确保我们清楚包含我们数据的 XML 文件。这应该是这样的：

```
 <?xml  version="1.0" ?>
   <lanes>
       <lane>
           <order>1</order>
           <status>registration</status>
       </lane>
       <lane>
           <order>2</order>
           <status>registration</status>
       </lane>
       <lane>
           <order>3</order>
           <status>registration</status>
       </lane>
       <lane>
           <order>4</order>
           <status>registration</status>
       </lane>
       <lane>
           <order>5</order>
           <status>registration</status>
       </lane>
   </lanes> 
```

接下来，我们需要考虑如何使用 PHP 将这些信息加载到页面上。因此，我们需要知道这个 XML 文件的位置，并且知道如果您移动它或更改文件名，您将需要更改您的 PHP 代码。此外，无需设置单独的页面来处理所有更新。所以，让我们在同一个页面上处理这一切——我们将调用一个文件 myProcess.php

首先，我们需要创建全局变量并检查是否有 POST 数据需要处理：

```
 <?php
     $file = "myFile.xml";
     $arrXml = array();
     $count = 5; // number of lanes

     if (count($_POST) > 0) {
             // we're returning to the page with
             // form data and need to update our XML
             updateXMLFile();
             unset($_POST);
     }

     // regardless we want to load the XML
     readXMLFile();
     ?> 
```

接下来，我们需要设置我们的功能：

```
 function readXMLFile() {
         global $file;
         global $arrXml;
         global $count;

         $xmlStr = file_get_contents($file);
         $arrXml = xml2array($xmlStr);
     }

     function updateXMLFile() {
        global $file;
        global $arrXml;
        global $count;

        $string = '<?xml version="1.0" ?><lanes>';
        for ($i = 1; $i <= $count;$i++)
        {
            $string .= "<lane><order>$i</order>";
            $string .= "<status>".$_POST['lane'.$i.'status']."</status></lane>";
        }
        $string .= "</lanes>";

        $string = utf8_encode($string);
        file_put_contents($file, $string);
    } 
```

这是一个很棒的 XML -> 数组函数，可以在 PHP 文档的注释中找到：

```
 function xml2array($xml){ 
        $opened = array(); 
        $opened[1] = 0; 
        $xml_parser = xml_parser_create(); 
        xml_parse_into_struct($xml_parser, $xml, $xmlarray); 
        $array = array_shift($xmlarray); 
        unset($array["level"]); 
        unset($array["type"]); 
        $arrsize = sizeof($xmlarray); 
        for($j=0;$j<$arrsize;$j++){ 
           $val = $xmlarray[$j]; 
           switch($val["type"]){ 
               case "open": 
                  $opened[$val["level"]]=0; 
               case "complete": 
                  $index = ""; 
                  for($i = 1; $i < ($val["level"]); $i++) 
                      $index .= "[" . $opened[$i] . "]"; 
                  $path = explode('][', substr($index, 1, -1)); 
                  $value = &$array; 
                  foreach($path as $segment) 
                     $value = &$value[$segment]; 
                  $value = $val; 
                  unset($value["level"]); 
                  unset($value["type"]); 
                  if($val["type"] == "complete") 
                    $opened[$val["level"]-1]++; 
                  break; 
              case "close": 
                  $opened[$val["level"]-1]++; 
                  unset($opened[$val["level"]]); 
                  break; 
           } 
       } 
       return $array; 
   } 
```

现在，我们已经完成了构建表单的所有设置。我假设您知道如何创建 HTML 页面，所以我将只关注表单部分。

```
 <form name="myForm" method="POST" action"myProcess.php">
    <?php
        for($i = 1;$i <= $count;$i++)
        {
            echo '<label for="lane'.$i.'status">Lane '.$i.': </label>';
            echo '<select name="lane'.$i.'status">';
            if ($arrXml[$i-1][1]['value'] == "closed")
                echo '<option value="closed" selected="selected">Closed</option>';
            else
                echo '<option value="closed">Closed</option>';
            if ($arrXml[$i-1][1]['value'] == "cue")
                echo '<option value="cue" selected="selected">Cue</option>';
            else
                echo '<option value="cue">Cue</option>';
            if ($arrXml[$i-1][1]['value'] == "registration")
                echo '<option value="registration" selected="selected">Registration</option>';
            else
                echo '<option value="registration">Registration</option>';
            if ($arrXml[$i-1][1]['value'] == "finAid")
                echo '<option value="finAid" selected="selected">Financial Aid & Scholarships</option>';
            else
                echo '<option value="finAid">Financial Aid & Scholarships</option>';
            if ($arrXml[$i-1][1]['value'] == "admissions")
                echo '<option value="admissions" selected="selected">Admissions</option>';
            else
                echo '<option value="admissions">Admissions</option>';            
            echo '</select>';
        }
    ?>
    <input type="submit" value="Submit" />
    </form> 
```

因此，将所有这些放在一起，myProcess.php 如下所示：

```
 <?php
     $file = "myFile.xml";
     $arrXml = array();
     $count = 5; // number of lanes

     if (count($_POST) > 0) {
             // we're returning to the page with
             // form data and need to update our XML
             updateXMLFile();
             unset($_POST);
     }

     // regardless we want to load the XML
     readXMLFile();

     function readXMLFile() {
         global $file;
         global $arrXml;
         global $count;

         $xmlStr = file_get_contents($file);
         $arrXml = xml2array($xmlStr);
     }

     function updateXMLFile() {
        global $file;
        global $arrXml;
        global $count;

        $string = '<?xml version="1.0" ?><lanes>';
        for ($i = 1; $i <= $count;$i++)
        {
            $string .= "<lane><order>$i</order>";
            $string .= "<status>".$_POST['lane'.$i.'status']."</status></lane>";
        }
        $string .= "</lanes>";

        $string = utf8_encode($string);
        file_put_contents($file, $string);
    }

    function xml2array($xml){ 
        $opened = array(); 
        $opened[1] = 0; 
        $xml_parser = xml_parser_create(); 
        xml_parse_into_struct($xml_parser, $xml, $xmlarray); 
        $array = array_shift($xmlarray); 
        unset($array["level"]); 
        unset($array["type"]); 
        $arrsize = sizeof($xmlarray); 
        for($j=0;$j<$arrsize;$j++){ 
           $val = $xmlarray[$j]; 
           switch($val["type"]){ 
               case "open": 
                  $opened[$val["level"]]=0; 
               case "complete": 
                  $index = ""; 
                  for($i = 1; $i < ($val["level"]); $i++) 
                      $index .= "[" . $opened[$i] . "]"; 
                  $path = explode('][', substr($index, 1, -1)); 
                  $value = &$array; 
                  foreach($path as $segment) 
                     $value = &$value[$segment]; 
                  $value = $val; 
                  unset($value["level"]); 
                  unset($value["type"]); 
                  if($val["type"] == "complete") 
                    $opened[$val["level"]-1]++; 
                  break; 
              case "close": 
                  $opened[$val["level"]-1]++; 
                  unset($opened[$val["level"]]); 
                  break; 
           } 
       } 
       return $array; 
    } 

    ?>

    <html>
    <head></head>
    <body>
    <form name="myForm" method="POST" action"myProcess.php">
    <?php
        for($i = 1;$i <= $count;$i++)
        {
            echo '<label for="lane'.$i.'status">Lane '.$i.': </label>';
            echo '<select name="lane'.$i.'status">';
            if ($arrXml[$i-1][1]['value'] == "closed")
                echo '<option value="closed" selected="selected">Closed</option>';
            else
                echo '<option value="closed">Closed</option>';
            if ($arrXml[$i-1][1]['value'] == "cue")
                echo '<option value="cue" selected="selected">Cue</option>';
            else
                echo '<option value="cue">Cue</option>';
            if ($arrXml[$i-1][1]['value'] == "registration")
                echo '<option value="registration" selected="selected">Registration</option>';
            else
                echo '<option value="registration">Registration</option>';
            if ($arrXml[$i-1][1]['value'] == "finAid")
                echo '<option value="finAid" selected="selected">Financial Aid & Scholarships</option>';
            else
                echo '<option value="finAid">Financial Aid & Scholarships</option>';
            if ($arrXml[$i-1][1]['value'] == "admissions")
                echo '<option value="admissions" selected="selected">Admissions</option>';
            else
                echo '<option value="admissions">Admissions</option>';            
            echo '</select>';
        }
    ?>
    <input type="submit" value="Submit" />
    </form>
    </body>
    </html> 
```

这回答了你的问题了吗？

# facebook - 将 Facebook 整合到 google+

> ID：11161047
> 
> 赞同：-1
> 
> 时间：2012-06-22T17:14:48.377
> 
> 标签：facebook, google-plus

我希望这个问题属于这个网站……
我的主要社交网络在 Facebook，但我真的很想开始扩展到其他网站。我做的第一件事是整合 Twitter，而且非常简单——现在我在 FB 上发布的任何内容都会自动发布到 TW。
现在我想开始在 Google+ 中工作，但找不到方法。我想在 FB 上发帖，同时在 G+ 上发帖。我找到了一个相反的应用程序——在 G+ 中发布，然后分享到 FB，但问题是在 FB 中是“分享”，因为它们主要是图片，所以客户想要在他们的时间轴中显示大图片（“分享” ' 应用程序太小了）。
所以总结一下：我需要一种在 FB 页面 (http://www.facebook.com/pages/Bajo-Tus-Alas/197298890366783) 中发布内容并在 G+ 页面中分享的方法 (https:// plus.google.com/108219055045707680914/posts)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:20:13.710

您应该明确地在服务器端使用一些编程语言。

# assembly - 如何使用相对跳跃？

> ID：11161048
> 
> 赞同：5
> 
> 时间：2012-06-22T17:14:49.240
> 
> 标签：assembly, nasm, x86

关于相对跳跃，我有以下问题：

1.  我知道这`JMP SHORT <displacement>`将跳转到`<displacement>`相对于当前 PC 的字节。那是对的吗？
2.  汇编器是否会自动生成相对跳转的操作码？即当我刚刚写的时候`JMP <label>`，如果该标签位于当前PC 128 字节之外，它会产生相对跳转？
3.  如果我确实想使用`JMP SHORT <displacement>`，计算位移的正确方法是什么？通过检查列表文件并计算偏移量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:34:29.260

每个汇编器（程序）和汇编器的每个版本都可以选择默认为长或短。因此，我不会寻找所有汇编程序默认为一件事的笼统声明。如果好奇，试试看会发生什么。

使用 x86 和可变长度指令，简单地编写位移代码将非常棘手，必须提醒自己永远不要接触跳转和目标之间的代码。

是的，我首先让汇编器使用标签对指令进行编码，然后获取指令集参考手册和带有地址的反汇编，并弄清楚如何计算位移。如果汇编器允许您自己设置位移，这可能是汇编器特定的东西，并且您需要知道它可能需要该位移的单位。x86 可能是字节，但是固定字长指令集可能必须以指令为单位而不是字节来给出位移。或字节不是指令，所以我会使用位移然后再次反汇编以查看它计算了正确的指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T20:24:46.253

假设汇编器自动使用短编码或普通编码。乍一看，如果可能，总是切换到短编码似乎没问题，但实际上有可能这样做，以便必须再次将其他一些分支更改为长编码。

例如（未经测试或任何东西，只是为了得到这个想法）：

```
 jmp _skip          ; relative offset depends on
               the size of "other code", which may include other jumps
  ; other code
_skip: 
```

所以你不能做一个“向前”传球来确定尺寸——当你在那个跳跃时，你还不知道它是否适合，因为你还没有决定如何处理其他跳跃.

那么倒退？（未经测试或任何东西，只是为了得到这个想法）

```
 .fill 124
  jmp _somewhere     ; 2 bytes, or 5?
  jmp _quiteFarAway  ; relative offset is either 130 or 127
  .align 256
_quiteFarAway: 
```

不，也不能向后传递，在决定跳转到 _quiteFarAway 的编码时，您还不知道它是否适合，因为您还没有决定如何处理其他跳转。

做你的第 2 点很难，有很多不同的方法可以解决这个问题。例如采用显式“短”修饰符，显式“长”修饰符，进行安全猜测并最终得到在极少数情况下不需要的长版本等。

# jsoup - 使用 jsoup 确定 HTML 元素位置

> ID：11161050
> 
> 赞同：5
> 
> 时间：2012-06-22T17:14:58.123
> 
> 标签：jsoup

我正在使用 jsoup 解析 HTML 页面。有没有办法使用 jsoup 确定每个元素在页面上相对于页面顶部的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:11:05.137

不，因为 Jsoup 只解析 HTML。你需要一些东西来考虑 CSS 和 JavaScript——根据你在做什么，看看[Selenium](http://seleniumhq.org/)、[Cobra](http://lobobrowser.org/cobra.jsp)或[PhantomJS](http://phantomjs.org/)。

# jquery - 从 jQuery 数组中提取的链接列表

> ID：11161052
> 
> 赞同：0
> 
> 时间：2012-06-22T17:15:18.667
> 
> 标签：jquery

我正在使用具有下一个/上一个功能的图像数组来浏览图像。我还希望有一个单独图像的无序列表，以便用户可以单击特定图像，但我不确定如何实现它。我可以直接链接图像，但我不确定如何在单击下一个/上一个时让它们显示在其他图像的位置。

大批：

```
var myImg= new Array()
  myImg[0]= "Home";
  myImg[1]= "Solutions";
  myImg[2]= "About";
  myImg[3]= "Careers";
  myImg[4]= "Contact";

myImgSrc = "images/";
myImgEnd = ".png"
var i = 0;

function loadImg(){
  document.imgSrc.src = myImgSrc + myImg[i] + myImgEnd;
}

function prev(){
  if(i<1){
    var l = i
  } else {
    var l = i-=1;
  }
  document.imgSrc.src = myImgSrc + myImg[l] + myImgEnd;
}

function next(){
  if(i>3){
    var l = i
  } else {
    var l = i+=1;
  }
  document.imgSrc.src = myImgSrc + myImg[l] + myImgEnd;
}

window.onload=loadImg; 
```

标记：

```
<div id="top">
<div class="box">
<p class="l"><a href="#" onClick="prev();">&laquo; Previous Image</a></p>

<ul id="list">
<li><a href="#">Home</a></li>
<li><a href="#">Solutions</a></li>
<li><a href="#">About</a></li>
<li><a href="#">Careers</a></li>
<li><a href="#">Contact</a></li>
</ul>

<p class="r"><a href="#" onClick="next();">Next Image &raquo;</a></p>

<div class="clear"></div>
</div>
</div>

<div id="container">

<div id="image">
<img name="imgSrc" id="imgSrc" />
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:40:10.830

获取点击的'锚的父'li'的索引让它成为 indexOfLi ，使用 jquery index() 或编写一个javascript函数来计算索引。

```
function goToImg(index){
    document.imgSrc.src = myImgSrc + myImg[indexOfLi] + myImgEnd;
    } 
```

在jQuery中，绑定点击事件

```
$(document).on('click','#list li a',function(){
    goToImg($(this).parent().index());
    return false; // to prevent default action
    }); 
```

请查看使用 javascript 和使用 jQuery 的绑定事件。

要使 on 函数起作用，您必须使用 ~ jQuery 1.7.2

对于早期版本

```
$('#list li a').click(function(){
    goToImg($(this).parent().index());
    return false; // to prevent default action
    }); 
```

# php - 需要遍历具有特定分组的多个语句

> ID：11161057
> 
> 赞同：-1
> 
> 时间：2012-06-22T17:15:29.030
> 
> 标签：php

我有以下 php 代码：

```
$k=1;
for($i=0; $i < 5; $i++)
{
    $stmt = $db->query('SELECT * FROM services_main');
    while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

        if ($row['ID'] == $i) {

            for($j=1; $j <= 3; $j++)
            {
                echo $row['name'].' - k='.$k++.' - j='.$j.' | ';
                echo $row['color'].' - k='.$k++.' - j='.$j.'<br />';

            }

        }
    }
} 
```

此代码生成：

```
John - k=1 - j=1 | Blue - k=2 - j=1
John - k=3 - j=2 | Blue - k=4 -  j=2
John - k=5 - j=3 | Blue - k=6 -  j=3
Paul - k=7 - j=1 | Green - k=8 -  j=1
Paul - k=9 - j=2 | Green - k=10 -  j=2
Paul - k=11 - j=3 | Green - k=12 -  j=3
George - k=13 - j=1 | Red - k=14 -  j=1
George - k=15 - j=2 | Red - k=16 -  j=2
George - k=17 - j=3 | Red - k=18 -  j=3 
```

我希望它生成这个：

```
John - k=1 - j=1 | Blue - k=1 - j=1
John - k=2 - j=2 | Blue - k=2 -  j=2
John - k=3 - j=3 | Blue - k=3 -  j=3
Paul - k=4 - j=1 | Green - k=4 -  j=1
Paul - k=5 - j=2 | Green - k=5 -  j=2
Paul - k=6 - j=3 | Green - k=6 -  j=3
George - k=7 - j=1 | Red - k=8 -  j=1
George - k=8 - j=2 | Red - k=8 -  j=2
George - k=9 - j=3 | Red - k=9 -  j=3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:18:17.610

这两个`echo`语句都有`$k++`，这会增加它 - 基本上，你在每次运行时将 2 添加到 $k 。

```
echo $row['name'].' - k='.$k.' - j='.$j.' | ';
echo $row['color'].' - k='.$k.' - j='.$j.'<br />';
$k++; 
```

应该做你想做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:18:28.593

```
for ($j=1; $j <= 3; $j++)
{
    echo $row['name'].' - k='.$k.' - j='.$j.' | ';
    echo $row['color'].' - k='.$k.' - j='.$j.'<br />';
    $k++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T17:23:40.730

为什么`ID`不是`WHERE`你的条件`SELECT`？

```
$k = 1;
for ($i = 0; $i < 5; $i++) {
    $stmt = $db->query('SELECT * FROM services_main WHERE ID = ' . $i);
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        for ($j = 1; $j <= 3; $j++) {
            echo $row['name'].' - k=' . $k . ' - j=' . $j . ' | ';
            echo $row['color'] . ' - k=' . $k++ . ' - j=' . $j . '<br />';
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T17:21:31.473

问题是，每当您制作“$k++”时，您都会增加 $k 值，并且在 for 循环中每轮将其增加两次，请尝试更改为：

```
for($j=1; $j <= 3; $j++)
{
    echo $row['name'].' - k='.$k.' - j='.$j.' | ';
    echo $row['color'].' - k='.$k.' - j='.$j.'<br />';
    $k++;
} 
```

# c# - 如何为多个标签编写一个通用的 ClickEvent？

> ID：11161063
> 
> 赞同：1
> 
> 时间：2012-06-22T17:16:06.930
> 
> 标签：c#, winforms, click

我在面板上有 10 个标签 - 和 10 个相同的 ClickEvents（更改背景颜色）。
我怎样才能减少代码，即编写一个通用程序？
就像是：

```
foreach (Control c in panelA.Controls)
if (c.Tag == "abc" && c.is clicked)
c.BackColor = Color.Crimson; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:17:53.220

您不能将每个按钮连接到同一个事件处理程序吗？

```
button1.Click += ChangeBackColor;
button2.Click += ChangeBackColor;
...
button10.Click += ChangeBackColor;

private void ChangeBackColor(object sender, EventArgs e)
{
    Control control = (Control)sender;
    control.BackColor = Color.Crimson;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T17:18:40.467

您可以将每个标签的单击事件分配给同一个事件处理程序，然后在您的事件处理程序中查看*发送者*对象。它会告诉你点击了哪个标签。

```
private void OnLabelClick(object sender, EventArgs e)
{
    var label = sender as Label;
    if(label != null)
        label.BackColor = Color.Crimson;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T17:21:14.430

遍历标签并将处理程序连接到 Click 事件：

```
foreach (Control c in panelA.Controls)
{
    c.Click += HandleClick;
} 
```

然后，在点击处理程序中，您可以使用`sender`包含点击标签的参数来更改背景颜色：

```
private void HandleClick(object sender, EventArgs e)
{
    ((Control)sender).BackColor = Color.Crimson;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T17:19:15.303

使用发件人：

尝试这样的事情：

```
private void label_Click(object sender, EventArg e){
  ((Label)sender) = ..your code
} 
```

# sql - SQL IF 语句被忽略

> ID：11161065
> 
> 赞同：2
> 
> 时间：2012-06-22T17:16:08.383
> 
> 标签：sql, sql-server-2008, if-statement

我有一个很长的脚本，我希望能够在需要时运行整个文件，而不用担心它的某些部分是否已经运行。但是下面的脚本给我带来了问题。出于某种原因，即使“EntityID”和“EntityType”列不存在，它也会通过 IF 语句，在这种情况下，它不应该通过 IF 语句。有人可以告诉我有什么问题吗？

```
IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Notes' AND COLUMN_NAME IN ('EntityId', 'EntityType'))
BEGIN
    BEGIN TRANSACTION
        --Delete notes where EntityType and EntityID are both NULL
        DELETE FROM [dbo].[Notes]
        WHERE [EntityId] = NULL 
        AND [EntityType] = NULL
        --Delete notes where the corresponding contact or account has been deleted.
        OR [ID] IN (9788, 10684, 10393, 10718, 10719)

        --Populate new columns with all existing data
        UPDATE [dbo].[Notes]
        SET [AccountId] = [EntityId]
        WHERE [EntityType] = 1

        UPDATE [dbo].[Notes]
        SET [ContactId] = [EntityId]
        WHERE [EntityType] = 2

        --Delete EntityId and EntityType columns from the Notes table
        ALTER TABLE [dbo].[Notes]
        DROP COLUMN [EntityId], [EntityType]
    COMMIT
END
GO 
```

表的脚本

```
CREATE TABLE [dbo].[Notes](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [AnnotationID] [uniqueidentifier] NULL,
    [CreatedBy] [int] NULL,
    [CreatedDate] [datetime] NULL,
    [NoteText] [ntext] NULL,
    [OriginalAnnotationID] [uniqueidentifier] NULL,
    [Active] [bit] NULL,
    [ContactId] [int] NULL,
    [AccountId] [int] NULL,
 CONSTRAINT [PK_Notes] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO

ALTER TABLE [dbo].[Notes]  WITH CHECK ADD  CONSTRAINT [FK_Account_ID] FOREIGN KEY([AccountId])
REFERENCES [dbo].[Account] ([ID])
GO

ALTER TABLE [dbo].[Notes] CHECK CONSTRAINT [FK_Account_ID]
GO

ALTER TABLE [dbo].[Notes]  WITH CHECK ADD  CONSTRAINT [FK_ContactId_ID] FOREIGN KEY([ContactId])
REFERENCES [dbo].[Contact] ([ID])
GO

ALTER TABLE [dbo].[Notes] CHECK CONSTRAINT [FK_ContactId_ID]
GO 
```

错误：

```
Msg 207, Level 16, State 1, Line 6
Invalid column name 'EntityId'.
Msg 207, Level 16, State 1, Line 7
Invalid column name 'EntityType'.
Msg 207, Level 16, State 1, Line 12
Invalid column name 'EntityType'.
Msg 207, Level 16, State 1, Line 16
Invalid column name 'EntityType'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:46:18.583

马丁肯定是在做某事。`IF`解析器在解析时处理里面的东西，而忽略你是否`IF`会成功。这与您不能这样做的原因相同：

```
IF 1 = 1
  CREATE TABLE #x(a INT);
ELSE
  CREATE TABLE #x(b INT); 
```

一种解决方法是使用动态 SQL：

```
IF EXISTS ...
BEGIN
  BEGIN TRANSACTION;

  DECLARE @sql NVARCHAR(MAX);

  SET @sql = N'
        DELETE FROM [dbo].[Notes]
        WHERE [EntityId] IS NULL 
        AND [EntityType] IS NULL
        --Delete notes where the corresponding contact or account has been deleted.
        OR [ID] IN (9788, 10684, 10393, 10718, 10719)

        --Populate new columns with all existing data
        UPDATE [dbo].[Notes]
        SET [AccountId] = [EntityId]
        WHERE [EntityType] = 1

        UPDATE [dbo].[Notes]
        SET [ContactId] = [EntityId]
        WHERE [EntityType] = 2

        --Delete EntityId and EntityType columns from the Notes table
        ALTER TABLE [dbo].[Notes]
        DROP COLUMN [EntityId], [EntityType]';

    EXEC sp_executesql @sql;

    COMMIT TRANSACTION;
END 
```

但是您仍然应该确保*两*列都在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:00:45.827

我怀疑问题是其中一列存在，但不是两者都存在。尝试以下操作：

```
IF 2 = (SELECT count(*) FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Notes' AND COLUMN_NAME IN ('EntityId', 'EntityType')) 
```

# c# - jQuery DatePicker - 从不工作的代码中填充日期值

> ID：11161066
> 
> 赞同：0
> 
> 时间：2012-06-22T17:16:08.423
> 
> 标签：c#, jquery, asp.net, datepicker

我有一个使用 jQuery DatePicker 的文本框。当文本框没有值时它工作正常。我有一个按钮，单击该按钮我将使用日期值填充此文本框。然后，如果我单击文本框，日期选择器不会出现。我尝试以两种格式填充日期。

```
<script>
$(function () {
    $('#InputNamesBirthday').datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: "dd-mm-yy",
        defaultDate:null,
        altFormat: "yy-mm-dd"
    });
});
 </script>

birthDate = Convert.ToDateTime(dataReaderNames["BORN"]);
InputNamesBirthday.Text = birthDate.ToString("yyyy-MM-dd", CultureInfo.CreateSpecificCulture("en-US")); 
```

谢谢，开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:22:23.980

问题很可能是 jquery 选择器。这是网络表单的常见问题。服务器 ID 很少与客户端 ID 匹配。这是因为 webforms 会根据控件嵌套的容器自动生成 ID。例如，转发器中的文本框、用户控件中、页面上的母版页将生成类似这样的客户端 ID。

```
master$usercontrol$repeater$0$textbox 
```

解决这个问题的最简洁方法是使用类选择器来访问元素，而不是 ID。

# c - 如何在C中按优先级对列表项进行排序？

> ID：11161070
> 
> 赞同：1
> 
> 时间：2012-06-22T17:16:24.057
> 
> 标签：c, sorting

我想按用户输入的优先级对列表项进行排序，它做得很好。但是，当有多个具有相同优先级的项目时，它不会像预期的那样按到达顺序对它们进行排序。

对不起，如果我说得不够清楚，以便您理解。变量的名称是葡萄牙语，所以如果您不明白，请询问。

这是代码：

```
typedef struct pedido pedido, *ppedido;

struct pedido{
    char id[5];
    int prioridade;
    int mesa, n_pratos;
    struct prato *prato[TAM];
    ppedido prox;
};

struct prato{
    char id[5];
};

ppedido novo_pedido(ppedido lista)
{
    ppedido novo, aux, anterior = NULL;
    int i;

    novo = (struct pedido*)malloc(sizeof(pedido));

    if(novo == NULL){
        printf("Erro na alocacao de memoria...\n");
        return;
    }

    printf("Number of menus: ");
    scanf("%d", &novo->n_pratos);

    printf("Table number: ");
    scanf("%d", &novo->mesa);

    printf("Priority of request? ");
        scanf("%d", &novo->prioridade);

        printf("Introduza o ID do pedido: ");
        scanf("%s", &novo->id);

    for(i=0;i<novo->n_pratos;i++){
        printf("ID of menu %d: ", i+1);  //something like "M1, M4..." doesn't matter
        scanf("%s", &novo->prato[i]);
        fflush(stdin);
    }

    novo->prox=NULL;

    if(lista == NULL || novo->prioridade > lista->prioridade) { 
        novo->prox = lista; 
        lista = novo; 
    }
    else
    { 
        aux = lista;

        while(aux != NULL && novo->prioridade < aux->prioridade)   //this is where it should be sort requests by their priority and order of arrival
            aux = aux->prox; 
        novo->prox = aux->prox; 
        aux->prox = novo;
    }
    return lista;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:32:02.847

我在您发布的代码中没有看到任何排序，但大多数排序算法都不稳定。这意味着它们通常不会保留被认为“相等”的元素的顺序。

您要么需要切换到稳定排序，要么更改比较函数以在优先级相等时考虑“到达时间”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:38:26.677

我想你想改变这个：

```
while(aux != NULL && novo->prioridade < aux->prioridade) 
```

到：

```
while(aux->prox != NULL && novo->prioridade <= aux->prox->prioridade) 
```

这样，它将超越所有具有相同优先级的优先级，并靠近列表的末尾。当您遍历到列表末尾时，这将保留对 aux 的引用。

我假设在您的搜索中，一旦找到最高优先级，您就会停止。

这假设进入列表的顺序与到达的顺序相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:38:43.450

因此，假设我们有优先级，项目元组`(priority, item)`，并且`item`是我们示例的字符。

```
NULL 
```

列表开始为空。我们开始插入。

```
(1, x)
NULL 
```

...

```
(3, z)
(2, y)
(1, x)
NULL 
```

现在我们插入`(0, a)`.

评估`if`为假，`aux = lista`指向`(3, z)`.

`while`前进直到`aux`指向。`NULL`

然后：

```
 novo->prox = aux->prox; 
    aux->prox = novo; 
```

但是`aux`是`NULL`。

至于到达顺序，您是指调用函数的到达顺序，还是属于您数据一部分的其他到达顺序？

# mongodb - mongoDB唯一索引不起作用

> ID：11161072
> 
> 赞同：1
> 
> 时间：2012-06-22T17:16:28.750
> 
> 标签：mongodb, pymongo, unique-index

我有很多由 url 索引的文档。我像这样在 pymongo 的 url 上创建了一个索引

```
coll.create_index('url',unique=True,background=True)      //coll is the name of the collection 
```

但我仍然可以插入具有重复 url 的文档。

我从 mongo shell 检查了索引是否确实存在，它显示了这个

```
{
        "v" : 1,
        "key" : {
            "url" : 1
        },
        "ns" : "dbname.coll",
        "name" : "url_1",
        "background" : true
}, 
```

设置是否`background=True`也意味着`url`插入文档时不会检查的唯一性？我完全困惑为什么唯一性不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:24:30.110

首先，`db.collection.getIndexSpecs()`应该报告`"unique" : true`。

在插入方面，我的猜测是，您正在进行不安全的写入。违反唯一索引约束的不安全`save`实际上返回一个新`ObjectId`文档，但数据库中的文档没有更改，也没有保存新文档。

如果您`pymongo.errors.DuplicateKeyError`尝试使用`safe=True`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:16:44.050

如果遇到超过 100 万个由于索引键重复而需要删除的文档，则使用 dropDups=True 构建唯一索引将失败。如果您可以手动删除一些重复项，使总重复数低于 100 万，那么您应该可以成功构建索引。

如果您无法获得低于 100 万的副本数量，另一种选择是使辅助节点脱机并将其作为独立节点启动，而不是副本集的一部分。然后您可以使用 mongodump -d -c 转储需要新索引的集合，然后删除该集合，创建索引，然后使用 mongorestore 恢复数据。然后该次要文件将具有相同的文档，但删除了重复项并建立了索引。然后，您可以将该辅助节点放回副本集中并在另一个辅助节点上重复该过程。最后，您可以让您的主节点下台并在该节点上执行相同的操作，一个新的主节点已被选出。

# javascript - 让 UI 优先

> ID：11161077
> 
> 赞同：0
> 
> 时间：2012-06-22T17:16:49.283
> 
> 标签：javascript

如何在客户端 javascript 中创建与用户界面和视图相关的任何代码优先于其他代码的环境？

我知道你可以将事情推到下一个刻度`setTimeout([function],0);`

我怎样才能建立一个系统来广泛地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:25:31.063

Javascript 是单线程的（最新浏览器中的 webworkers 除外），因此您只有两个选择：

1.  将非 UI 相关的工作放到一个或多个 webworkers 中，以便可以在后台完成。
2.  在小块中完成所有非 UI 相关的工作，其中每个工作块都在 enxt 上完成`setTimeout()`。这允许在非 UI 工作的每个滴答之间完成待处理的 UI 交互。编写代码需要做很多工作，但如果真的值得付出努力，就可以让它工作。

这是一个示例，我改编自其他一些长时间运行的代码：http: [//jsfiddle.net/jfriend00/JJUgv/](http://jsfiddle.net/jfriend00/JJUgv/)

# ios - NSData writeToFile:atomically: 不会立即保存文件

> ID：11161079
> 
> 赞同：6
> 
> 时间：2012-06-22T17:16:53.213
> 
> 标签：ios, nsdata

我正在将一个 SQLite 数据库从网上下载到我的 iPad 应用程序中。如果我将它写入磁盘设置，`atomically: YES`我不能立即使用它，因为即使文件在那里，sqlite 也会抱怨表不在那里。如果我使用`atomically = NO`或延迟打开文件几秒钟，那么我就没有这个问题。

我想我可以通过设置来解决这个问题，`atomically = NO`但又**是否有某种保证在 writeToFile: 调用之后*整个*文件已写入磁盘？**到目前为止，我的数据库并没有那么大，但最终会，而且我不知道在其他设备上要等多久。

Apple 文档说，`YES`如果操作成功，此方法将返回，但显然这没有考虑保存文件的“滞后”。

任何帮助是极大的赞赏！

编辑：我看到其他人也有[同样的问题](https://stackoverflow.com/questions/11134483/nsdata-writetofile-not-completely-written-when-reading)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:01:15.257

根据链接，操作将完全写入或失败。

考虑到这一点，在另一个线程上原子地编写，然后做这样的事情！

```
while (![[FileManager defaultFileManager] fileExistsAtPath:yourEventualDBPath]) {

[NSThread sleepForTimeInterval:.5];

} 
```

# ios - 组合 scep 和 mdm 有效负载时出错 - 注册服务器未提供有效的身份证书

> ID：11161082
> 
> 赞同：5
> 
> 时间：2012-06-22T17:17:14.380
> 
> 标签：ios, configuration, certificate, mdm, ota

我正在开发自己的 MDM 服务，并且我正在尝试将 SCEP 和 MDM 有效负载结合起来，就像 Apple 的 MDM 协议文档所建议的那样。我在 C# .Net 中创建了自己的 SCEP Web 服务，并且我知道当我发送 SCEP 有效负载时设备可以获得有效证书。但是，当我还包含一个通过 IdentityCertificateUUID 密钥指向 SCEP 有效负载的 UUID 的 MDM 有效负载时，我收到以下错误，“**注册服务器没有提供有效的身份证书。** ”此配置是在用户之后发送的配置选择安装初始注册配置（[此](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/OTASecurity/OTASecurity.html)图中第 2 阶段的第 1 步）。

该设备似乎甚至没有尝试连接到我的服务器，并且由于服务器端日志记录，我知道它永远不会到达我的 SCEP Web 服务页面。这似乎表明我用来签署有效负载的证书有问题。我已经分别尝试使用我的 SSL 证书（来自预信任的根颁发机构）、我的客户 MDM 推送证书（从我们的供应商证书链接）和我的自签名根证书颁发机构证书（通过 makecert.exe 创建）对其进行签名SCEP 服务用于颁发新证书（即设备身份证书）。

当我使用 MDM 和 SCEP 有效负载创建配置文件时，我查看了 iPCU（iPhone 配置实用程序）的输出，但它不是有效的配置文件（我什至尝试过几乎批发复制它）。但是，当我通过 iPCU 安装配置文件时，不会出现错误，它会毫无问题地开始 SCEP 注册过程。

附带说明 - 此处不能选择使用预先存在的 MDM 供应商。

以下是我正在使用的配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
  <plist version="1.0">
    <dict>
      <key>PayloadContent</key>
      <array>
        <dict>
          <key>PayloadContent</key>
          <dict>
            <key>Challenge</key>
            <string>this is a challenge</string>
            <key>Key Type</key>
            <string>RSA</string>
            <key>Key Usage</key>
            <integer>5</integer>
            <key>Keysize</key>
            <integer>1024</integer>
            <key>Name</key>
            <string>mycompany</string>
            <key>Retries</key>
            <integer>3</integer>
            <key>RetryDelay</key>
            <integer>0</integer>
            <key>Subject</key>
            <array><array><array>
              <string>CN</string>
              <string>mycompany</string>
            </array></array></array>
            <key>URL</key>
            <string>https://mysite.com/scep.aspx</string>
          </dict>
          <key>PayloadDescription</key>
          <string>Configures SCEP</string>
          <key>PayloadDisplayName</key>
          <string>SCEP (mycompany)</string>
          <key>PayloadIdentifier</key>
          <string>com.mycompany.mdm.scep1</string>
          <key>PayloadOrganization</key>
          <string></string>
          <key>PayloadType</key>
          <string>com.apple.security.scep</string>
          <key>PayloadUUID</key>
          <string>57225d3d-0758-4d23-8093-e4d8c9bbd47c</string>
          <key>PayloadVersion</key>
          <integer>1</integer>
        </dict>
        <dict>
          <key>AccessRights</key>
          <integer>3</integer>
          <key>CheckInURL</key>
          <string>mysite.com/checkin.aspx</string>
          <key>CheckOutWhenRemoved</key>
          <false/>
          <key>IdentityCertificateUUID</key>
          <string>57225d3d-0758-4d23-8093-e4d8c9bbd47c</string>
          <key>PayloadDescription</key>
          <string>Configures MobileDeviceManagement.</string>
          <key>PayloadIdentifier</key>
          <string>com.mycompany.mdm.mdm2</string>
          <key>PayloadOrganization</key>
          <string></string>
          <key>PayloadType</key>
          <string>com.apple.mdm</string>
          <key>PayloadUUID</key>
          <string>ed0ae41d-1aa7-4721-9fe9-139c1072132c</string>
          <key>PayloadVersion</key>
          <integer>1</integer>
          <key>ServerURL</key>
          <string>https://mysite.com/checkin.aspx</string>
          <key>SignMessage</key>
          <false/>
          <key>Topic</key>
          <string>com.apple.mgmt.mypushsubject</string>
          <key>UseDevelopmentAPNS</key>
          <true/>
        </dict>
      </array>
      <key>PayloadDescription</key>
      <string>Profile description.</string>
      <key>PayloadDisplayName</key>
      <string>Test Profile</string>
      <key>PayloadIdentifier</key>
      <string>com.mycompany.mdm</string>
      <key>PayloadOrganization</key>
      <string>mycompany</string>
      <key>PayloadRemovalDisallowed</key>
      <false/>
      <key>PayloadType</key>
      <string>Configuration</string>
      <key>PayloadUUID</key>
      <string>13321058-4037-478c-9b1e-ef6f810065cb</string>
      <key>PayloadVersion</key>
      <integer>1</integer>
    </dict>
  </plist> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:39:15.433

我就此事与苹果取得了联系。

显然，您想在问题中链接的图表的第 3 阶段的第 2 步中发送组合的 MDM 和 SCEP 有效负载，这是在 OTA 注册后发送的配置文件。根据 Apple 的说法，您需要两个单独的证书（这意味着两个 SCEP 注册）——一个用于 OTA 注册，一个用于 MDM 注册。

# logging - 关于logback的查询

> ID：11161085
> 
> 赞同：0
> 
> 时间：2012-06-22T17:17:30.233
> 
> 标签：logging, logback

我正在编写一个 logback 文件以将所有内容打印到一个文件中。

```
 <root level="debug">
    <appender-ref ref="FILE" />
  </root> 
```

我为此创建了一个附加程序，它工作正常。问题是我希望在控制台中显示一行，说明控制台输出正在打印到文件中以供其他人知道。无论如何在不创建类的情况下在 logback 中打印特定行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:41:10.380

您可能会考虑指示 logback 打印自己的状态。这将打印有关已配置哪些附加程序以及日志将转到哪些文件的所有信息。有关[logback 配置手册](http://logback.qos.ch/manual/configuration.html)的更多信息。

# c - 节点的链表插入不显示任何内容

> ID：11161086
> 
> 赞同：1
> 
> 时间：2012-06-22T17:17:33.977
> 
> 标签：c, memory, pointers, linked-list, heap-memory

```
#include<stdio.h>
#include<stdlib.h>

struct node
{
    int data;
    struct node *next;
};

void insert( struct node *q,int num)
{
    struct node *temp;

    if( q == NULL)
    {
        q = (struct node*)malloc(sizeof(struct node));
        q->data = num;
        q->next = NULL;
    }
    else
    {
        temp = q;
        while( temp != NULL)
        {
            temp = temp->next;
        }
        temp = (struct node*)malloc(sizeof(struct node));
        temp->data = num;
        temp->next = NULL;
    }
}

void display(struct node *q)
{
    struct node *temp;
    temp = q;
    while(temp != NULL)
    {
        printf("%d",temp->data);
        temp = temp->next;
    }
}

int main()
{
    struct node *a;
    a = NULL;
    insert( a,13);
    insert( a,13);
    display(a);
    return 0;
} 
```

`insert`函数`q`中有一个指向结构节点的指针，该指针被初始化为 NULL 。

在这里，如果 q 是否为 NULL，我会看到第一个。如果它为空，那么我将分配堆内存、数据和下一个指针，这样 q 现在是一个指向第一个数据的指针。如果 q 不为 NULL，那么我使用一个 temp 指针，它指向一个 q 所指向的结构节点，所以直到 temp 变为 NULL temp 转到 temp->next，然后它分配堆内存，将数据和下一个指针指向空值。

但它没有显示我的显示功能，请纠正我，以及如何在链表中使用堆栈和堆内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:22:17.413

回想一下，在 C 中，参数是**按值传递的**，包括指针参数。

当 时`q == NULL`，您正在分配内存并将该内存分配给`q`，但这**不会**在您的函数之外更改：只会更改函数*内部*`q`的副本。`q`

 *为了更改参数`q` *指向的*内容，并将这些更改反映在函数之外，您需要将指针传递给指针，例如：

```
void insert(struct node **q, int num) 
```

并改变你的使用方式`q`，例如

```
if (*q == NULL)
    *q = (struct node *) malloc(sizeof(struct node)); 
```

此外，在你的 else 情况下，你应该循环直到`temp->next == NULL`，然后添加你的新节点：

```
temp->next = (struct node*) malloc(sizeof(struct node)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:21:17.017

改变

`insert( struct node *q,int num)`到`insert( struct node **q,int num)`

在里面`main()`，改变

`insert( a,13)`到`insert( &a,13)`

您需要修改实际参数而不是形式参数，因此使用**按地址**传递而不是**按值传递**，
这意味着，`insert()`当您为其赋值时，内部`q`不会反映到`a`，因为您只是传递 a 的值，以便更改反映到 pass a 的地址。

此外，还有
**一个问题**是在`else`块内 `insert()`
更改`while( temp != NULL)`为`while( temp->next != NULL)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T17:23:10.673

您必须在函数处使用指向指针的指针`insert()`，因为您使用 分配新内存`malloc()`，但指针仍将指向 NULL。因此，要修改指针本身，如果您使用参数进行修改，则必须使用指向指针的指针。恕我直言，如果您返回指针会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T17:29:51.253

您需要返回在插入中分配的指针。

在 main 中，a 是指向 NULL 的指针。在第一次插入之后，a 仍然是指向 NULL 的指针，因为 q 有指针，而不是 a。

a 的值是您可以找到结构节点的地址。q 是 a 值的副本，NULL 也是如此。当你 malloc() 它为 q 分配一个值，这是一个结构节点的地址，*但*它不会改变 a！

任何一个：

```
/* a 有一个值，它不 malloc q */
主要的（） {
   结构节点 a = {0};

   插入(&a, 13);
}

```

或者

```
/* 你返回 q 的值（结构节点的地址）并将它分配给一个 */
结构节点*插入（结构节点*q，int num）{
   胡说八道

   返回q；
}

主要的（） {
   结构节点 *a = NULL;

   一=插入（一，13）；
}

```

或者

```
/* 由于 2 个重定向，我发现这很难解释 */
无效插入（结构节点**q，int num）{

   如果 ( *q == NULL ) {
   *q = malloc() 等等
   }
}

主要的（） {
   结构节点 *a = NULL;

   插入(&a, 13);
}

```

但是你在插入的后半部分也犯了类似的错误。您需要分配内存并将其分配给下一个，而不是相反。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T17:23:00.937

看起来问题在于您迭代了列表的末尾。因此，当 temp 变为 null 时，您会说，嘿，我找到了终点。然后创建一个新节点。但是你永远不会将前一个节点指向你的新节点。

我会改变这个：

```
while( temp != NULL) 
```

对此：

```
while( temp->next != NULL) 
```

因此，当您到达末尾时，您仍然可以参考您的列表。然后，您将需要相应地更改其余逻辑，但至少这是可能的。

正如其他人所说，您的功能也不适用于初始节点。我会考虑有一个单独的函数来初始化一个空列表。但这主要是一种风格选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T17:24:18.257

从您的代码中替换此代码：

```
 while( temp != NULL)
    {
        temp = temp->next;
    }
    temp = (struct node*)malloc(sizeof(struct node));
    temp->data = num;
    temp->next = NULL; 
```

经过

```
 while( temp->next != NULL)
    {
        temp = temp->next;
    }
    temp->next = (struct node*)malloc(sizeof(struct node));
    temp->next->data = num;
    temp->next->next = NULL; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T17:26:07.647

这是您的程序的固定版本。问题是指针是**按 value**复制到函数中的，所以当你的函数退出时，`a`在这种情况下传入的指针不会分配给任何东西。你所做的唯一一件事就是通过分配一些而不是`free`'ing它来泄漏内存。

**解决方案是通过引用**传递指针，并且在 C 中使用指针指向指针来完成。

```
#include<stdio.h>
#include<stdlib.h>

struct node
{
    int data;
    struct node *next;
};

void insert( struct node **q,int num)
{
    struct node *temp;

    if( *q == NULL)
    {
        *q = (struct node*)malloc(sizeof(struct node));
        (*q)->data = num;
        (*q)->next = NULL;
    }
    else
    {
        temp = *q;
        while( temp != NULL)
        {
            temp = temp->next;
        }
        temp = (struct node*)malloc(sizeof(struct node));
        temp->data = num;
        temp->next = NULL;
    }
}

void display( struct node *q)
{
    struct node *temp;
    temp = q;
    while(temp != NULL)
    {

        printf("%d",temp->data);
        temp = temp->next;
    }
}

int main()
{
    struct node *a;
    a = NULL;
    insert( &a,13);
    insert( &a,13);
    display(a);
    free(a->next); //de-alloc memory
    free(a);
    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-24T07:06:58.927

您可以通过两种方式解决此问题。

1.  在函数中传递 q 的地址。
2.  将返回类型从 void 更改为 node。每次插入新节点后都返回根节点（此方法简单但不可取）。*

# objective-c - 在 Objective-C 中使用递归

> ID：11161090
> 
> 赞同：-2
> 
> 时间：2012-06-22T17:17:45.960
> 
> 标签：objective-c, xcode, recursion, boolean

我尝试使用 Xcode 在 C 中进行递归循环。该代码适用于 7boom 游戏，我应该将其作为我的作业尝试。我尝试使用递归，但我的 Xcode 是堆栈并显示错误。

这是我的代码：

```
#import <Foundation/Foundation.h>
    int main(int argc, const char * argv[])
     {
       BOOL reverse( int num);
       @autoreleasepool {
            int i;
            int num1;
            int num2;
            NSLog(@"Hello, World!");
           for ( i = 1; i<=20; i++){
               num1 = i / 10;
               num2 = i;
               if(i == 7){
                  NSLog(@"boom, i=%d", i);
                 i++;
              }
             if(i % 7 ==0){
                 NSLog(@"boom i=%d", i);
                 i++;
             }
            if(!reverse(i)){
               NSLog(@"boom reverse");
               i++;
             }
        NSLog(@"%d", i);
      }  
    }
   return 0;
  }
BOOL reverse (int num)
{
   if(num == 7)
       return (true);
   else
       reverse(num % 10); 
    return (false);
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T17:40:17.470

对于像 6 （或大多数数字）这样的数字，这将永远不会返回

```
BOOL reverse (int num)
{
    if(num == 7)
        return (true);
    else
        reverse(num % 10); 
    return (false);
} 
```

6 不等于 7，6 mod 10 = 6 重复直到堆栈溢出。

您的其余代码似乎也有点可疑，您应该始终避免在循环内操作 for 循环的控制变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:01:23.927

这是家庭作业，所以只是提示......

您似乎了解 an 的`if`作用和`else`.

要执行的*功能*或*算法*是`reverse`什么？

`true`当且仅当整数的最高有效（最左边）数字是 a 时才返回`7`？

所以你有两种情况：小于 10 的数字，以及不小于 10 的数字。编写一些代码来区分这两种情况。

现在你必须在第一种情况下做什么？将其添加到您的代码中。

在第二种情况下你必须做什么（提示：可能递归？）？将其添加到您的代码中。

完毕。

*（除了其他人提出的关于`for`迭代的担忧之外，它定义了两个变量`num1`并且`num2`您不使用和更改控制变量`i`- 这个循环可能不会像您认为的那样做！）*

# symfony - Silex + Twig：未找到 form_widget()，即使安装了 Symfony Bridge

> ID：11161092
> 
> 赞同：4
> 
> 时间：2012-06-22T17:17:50.000
> 
> 标签：symfony, twig, symfony-forms, silex

我一直在关注以下资源中的文档

[http://silex.sensiolabs.org/doc/providers/form.html](http://silex.sensiolabs.org/doc/providers/form.html)

但我收到以下错误

```
Twig_Error_Syntax: The function "form_widget" does not exist in "layout.html.twig" 
```

我已经多次检查文档和源代码，但我仍然看不到哪里出错了，我错过了什么？我安装了 Symfony Twig Bridge。

```
<?php
require_once __DIR__.'/vendor/autoload.php';

use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Yaml\Parser;

use Silex\Provider\FormServiceProvider;

$app = new Silex\Application();
$app['debug'] = true;

$app->register(new Silex\Provider\TwigServiceProvider(), array(
    'twig.path'     => __DIR__. '/src/views',
    'twig.options'  => array(
        'debug' => true,
        'cache' => false
    ),
));

$app['twig']->addExtension(new Twig_Extension_Debug());

$app['yaml'] = new Parser();

//.....

$app->register(new FormServiceProvider());

$app->register(new Silex\Provider\ValidatorServiceProvider());

$site['name']  = 'My Site';
// More definitions for $site

$app->match('/', function() use($app, $site) { 
    return $app['twig']->render('layout.html.twig', $site);
})->method('POST|GET');

$app->match('/form/', function(Request $request) use($app, $site) { 

    $data = array(
        'name' => 'Your name',
        'email' => 'Your email',
    );

    $form = $app['form.factory']->createBuilder('form', $data)
        ->add('name')
        ->getForm();

    if ('POST' == $request->getMethod()) {
        $form->bindRequest($request);

        if ($form->isValid()) {
            $data = $form->getData();

            // do something with the data - I haven't got that far yet

            // redirect somewhere
            return $app->redirect('/');
        }
    }

    $site['form'] = $form->createView();

    return $app['twig']->render('form.html.twig', $site);

})->method('POST|GET');

$app->run(); 
```

编辑：composer.json 文件

```
{
    "require": {
        "silex/silex"       : "dev-master",
         "symfony/config"   : "dev-master",
         "symfony/yaml"     : "dev-master",
         "doctrine/common"  : ">=2.1,<2.3-dev",
         "doctrine/dbal"    : ">=2.1,<2.3-dev",
         "symfony/dependency-injection": "dev-master",
         "symfony/console"  : "dev-master",
         "monolog/monolog"  : ">=1.0.0",
         "twig/twig"        : ">=1.2.0",
         "symfony/form"     : "2.1.*",
         "symfony/translation": "2.1.*",
         "symfony/twig-bridge": "2.1.*",
         "symfony/validator": "2.1.*"
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T07:17:11.657

您需要先注册表单提供程序，然后再注册树枝提供程序。

twig 提供程序[检查表单提供程序是否已注册](https://github.com/fabpot/Silex/blob/master/src/Silex/Provider/TwigServiceProvider.php#L66)，并且仅在必要时启用与表单相关的 twig 扩展。

# asp.net-mvc - MVC Razor 选项卡 - 更改选项卡值

> ID：11161098
> 
> 赞同：0
> 
> 时间：2012-06-22T17:18:19.287
> 
> 标签：asp.net-mvc, razor

在我的代码中，我有以下内容：

```
 <ul>
         ..
          <li><a href="@Url.Action("SplEdit", "Spk", new { id = Model.Cntr}) ">Module</a></li>

      </ul> 
```

查看 url，它将 #ui-tabs-3 附加到 url。如何将值更改为不同的值，例如 #ui-tabs-mytab

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:34:07.410

你在使用 Jquery UI 选项卡吗？如果是这样，你为什么要在你的锚标签上放一个 url？Jquery UI 选项卡旨在动态显示和隐藏页面上每个相应选项卡的 DIV。还有一个选项允许您通过 AJAX 检索内容，您可以在其中指定 URL，但不附加 #tab-xxx。

这是来自 JQuery UI 网站的示例。

```
<script>
    $(function() {
        $( "#tabs" ).tabs();
    });
    </script>

<div class="demo">

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
    <div id="tabs-2">
        <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
    </div>
    <div id="tabs-3">
        <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
        <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
    </div>
</div>

</div><!-- End demo -->

<div class="demo-description">
<p>Click tabs to swap between content that is broken into logical sections.</p>
</div><!-- End demo-description --> 
```

# java - 我在哪里可以获得访问驱动程序以连接到 java？

> ID：11161099
> 
> 赞同：0
> 
> 时间：2012-06-22T17:18:23.040
> 
> 标签：java, database

我已经构建了一个使用 ms 访问数据库的 java 应用程序。我还使用 nsis 创建了一个安装包。该软件在我的电脑上运行良好。但它不适用于未安装 ms 访问权限的计算机。所以我必须将一个访问 odbc 驱动程序与我的安装包捆绑在一起。但我应该选择哪个。在哪里得到它..我完全糊涂了。我希望你能有一个很好的答案。提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:23:44.023

如果您正在远程连接，您可能可以使用[jdbc 驱动程序，或者](http://www.easysoft.com/applications/microsoft-access/jdbc-odbc.html)[这里](http://www.coderanch.com/t/304252/JDBC/java/JDBC-driver-MS-Access)有一个非常老的线程说 JavaSDK 内置了 JDBC/ODBC 桥驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:02:03.220

看来，您需要 Microsoft 数据访问组件 ( [MDAC](http://msdn.microsoft.com/en-us/data/aa937729.aspx) )。它包括 Jet 数据库引擎，它是 Access 数据库的后端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:37:40.303

根据我的经验，连接到 MS Access 的 ODBC 驱动程序是每个 Windows 安装的一部分。

您可以使用 JDBC/ODBC 桥通过不需要 ODBC 数据源定义的 JDBC URL 连接到它。

假设您的 Access 数据库文件位于 c:\Data\mydb.mdb，您应该能够使用以下 JDBC url 进行连接：

```
jdbc:odbc:DRIVER={Microsoft 访问驱动程序 (*.mdb)};DBQ=c:\Data\mydb.mdb
```

我从未在我的 Windows PC 上安装 MS Access，我可以使用该 url 毫无问题地连接到 mdb 文件。

这甚至适用于非英语安装。我安装了德语 Windows，但上面使用“英语”驱动程序名称的 URL 可以正常工作。

# php - 在数据库中保存哈希并生成 URL

> ID：11161103
> 
> 赞同：0
> 
> 时间：2012-06-22T17:18:30.217
> 
> 标签：php, mysql

我正在使用与会话 id 一起使用的开放式 api。一点背景知识：用户进入我的站点并获得一个 url 和会话：domain.tld/ somelongsessionhash *（*通常为 50 个字符长） 用户现在可以共享此 url 以对文件进行一些协作工作。

我现在想缩短我从 api 服务获得的*somelongsessionhash 。*

我以为我可以这样做：

1.  *将somelongsessionhash*保存在数据库中
2.  生成我自己的较短哈希
3.  如果调用了自己的较短 url，php 会检查 db 并获取真正的会话。

我是 php 新手，很想解决这个问题。任何提示表示赞赏！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:33:23.410

好吧，我会给你一个简短的例子来说明你可以做什么。

假设您将哈希存储在临时变量 ($hash) 中。要为您的 URL 生成一个短字符串，您可以使用以下内容：

```
$short_hash = substr(str_shuffle($hash), 0, 8); 
```

使用该变量并将值存储在数据库中。剩下要做的就是检查当前 URL（例如 www.example.com/f65fcb33/ - 例如）是否与数据库中的记录匹配，然后做任何你想做的事情。

这只是一个示例方法，您可以随时在互联网上搜索更多内容以进行扩展。

# java - 是否可以实时跟踪正在执行的 Java 语句的数量？

> ID：11161111
> 
> 赞同：3
> 
> 时间：2012-06-22T17:18:52.037
> 
> 标签：java, profiling

我们希望防止 Java 插件中的无限循环，并限制执行的语句数量。我们查看了许多 Java 分析工具，但没有看到任何明确的方法来跟踪它，因为 Java 类正在运行，而不是在它完成后获取一些统计信息。

我应该补充一点，我们知道 jProfiler，这不是一个选项，因为我们需要以最小的开销跟踪潜在的数千个单独的类，我们需要在代码中完成这一切，这样我们就可以在某个特定的执行类超过预设限制时终止它.

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:34:28.643

像 Yourkit 和 JProfiler 这样的分析器无济于事 - 实际上没有任何帮助。就像您无法限制特定 Java 类使用的内存量一样，您也无法限制 CPU。基本上所有类共享相同的 CPU/调度器和内存空间。

您可以在单独的低优先级线程中运行您的插件类，并等待给定的时间让插件完成。不幸的是，如果它没有完成（例如由于无限循环），您将无能为力。客户端代码必须支持中断线程，不推荐停止线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:50:49.073

### 简答

不，没有任何现有的 JVM 实现。

### 长答案

理论上是的，如果您愿意广泛研究 JVM 的源代码。如果可能的话，这将是一件很激烈的事情。

### 边注：

Erlang 的运行时在管理其轻量级进程的方式上正是您所要求的。在它们被关闭并运行其他东西之前，它们会在每个线程中执行 N 条语句。这就是 Erlang VM 在中等硬件上支持成千上万个进程的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:42:37.030

WCET 分析工具很少，但它们假设代码是专门注释的。例如，参见[Volta 工具](http://volta.sourceforge.net/doc/manual/single-page/index.html#Loop_Bound_Strategy)。

如果您需要在运行时检测此类问题，唯一的方法是将插件执行包装到单独的线程中并处理执行时间。这是一个[例子](https://stackoverflow.com/a/2759040/223429)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T21:54:29.730

您可能会发现这很有帮助 - [http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html)。

JVMTI 是一个帮助工具在运行时分析 JVM 的 API。您需要编写代码，但这为您想要测量和监控的内容提供了很大的自由度。

# javascript - Javascript 下拉菜单在 iphone/ipad 上不起作用

> ID：11161114
> 
> 赞同：3
> 
> 时间：2012-06-22T17:19:12.813
> 
> 标签：javascript, iphone, drop-down-menu

我的网站上有一个 javascript 下拉菜单，但它不能在 iphone/ipad 上运行，有谁知道我应该修改代码以使其在这些设备上运行？（例如黑莓菜单工作正常）。

JS文件：

```
var timeout         = 500;
var closetimer      = 0;
var ddmenuitem      = 0;

// open hidden layer
function mopen(id)
{   
    // cancel close timer
    mcancelclosetime();

    // close old layer
    if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';

    // get new layer and show it
    ddmenuitem = document.getElementById(id);
ddmenuitem.style.visibility = 'visible';

}
// close showed layer
function mclose()
{
    if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';
}

// go close timer
function mclosetime()
{
    closetimer = window.setTimeout(mclose, timeout);
}

// cancel close timer
function mcancelclosetime()
{
    if(closetimer)
    {
        window.clearTimeout(closetimer);
        closetimer = null;
    }
}

// close layer when click-out
document.onclick = mclose; 
```

下拉列表的 HTML：

```
<ul id="rentals">
    <li><a href="#" 
        onmouseover="mopen('m1')" 
        onmouseout="mclosetime()">Verhuur</a>
        <div id="m1" 
            onmouseover="mcancelclosetime()" 
            onmouseout="mclosetime()">
        <a href="shortterm2bed1.html">2 Slk. Vakantie <font color="172983">&nbsp;|     </font></a>
        <a href="shortterm3bed1.html">3 Slk. Vakantie <font color="172983">&nbsp;| </font></a>
        <a href="longtermrentals1.html"> Lange Termijn</a>
        </div>
    </li>
</ul> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:29:31.133

iOS 不支持`mouseover`或`mouseout`. 您将要使用`touchstart`和`touchend`。IE;

```
<div id="m1" 
    touchstart="mcancelclosetime()" 
...> 
```

这是[Apple 的 Javascript 开发指南](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/HandlingEvents/HandlingEvents.html)的链接。

希望它有所帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:22:44.960

Ipad/Iphone 不支持 onmouseover、onmouseout 事件。

查看此页面以获取支持的事件：

[http://backtothecode.blogspot.ca/2009/10/javascript-touch-and-gesture-events.html](http://backtothecode.blogspot.ca/2009/10/javascript-touch-and-gesture-events.html)

您可能只需更改为 onclick。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T21:33:29.710

我确实发现创建下拉菜单的 GoLive Menumachine 遇到了同样的问题。它不会在移动设备上显示下拉菜单。当我将主菜单按钮链接到页面时，它开始工作。换句话说，如果我有服务>维修和服务>更新，我必须有服务链接到一个页面，以便下拉菜单在我的 ipad 和 ipod 上工作。不要问我为什么。

# .net - MethodImplOptions.InternalCall 的意义何在？

> ID：11161120
> 
> 赞同：35
> 
> 时间：2012-06-22T17:19:42.707
> 
> 标签：.net, clr, cil, framework-design

BCL 中的许多方法都标有该 `[MethodImpl(MethodImplOptions.InternalCall)]`属性。这[表明](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions.aspx)“方法是在公共语言运行时本身内实现的”。

以这种方式设计框架而不是指定运行时将被迫实现的显式 CIL 指令有什么意义？最终，该属性为运行时创建了合同义务，但在我看来，这种方式令人困惑，而且不是立即显而易见的。

例如，`Math.Pow`可以这样写（如果我的 C# + IL 和 IL 本身不好，请原谅我的非正式混合；这只是解释我的观点的一个示例）：

```
public static double Pow(double x, double y)
{
    ldarg.0
    ldarg.1
    pow // Dedicated CIL instruction
    ret
} 
```

而不是当前的方式：

```
[MethodImpl(MethodImplOptions.InternalCall)]
public static double Pow(double x, double y); 
```

为什么`MethodImplOptions.InternalCall`存在？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T18:02:14.120

我认为一个重要的原因是创建一个新的 IL 指令非常困难，它可能会影响很多工具，包括外部工具（`ILGenerator`、ilasm、ildasm、PEVerify、Reflector、PostSharp，...）。

但是创建一个新`InternalCall`方法？这几乎就像在 C# 中编写方法一样简单（我假设，我没有查看 Rotor 来验证）并且它不会影响任何东西。

这不仅仅是关于创建它，我认为这同样适用于维护。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T17:34:43.837

我认为这是为了不要使 CLR 过于复杂。当我第一次研究 CIL 时，我不禁注意到与汇编语言的相似之处，不仅如此，有限的指令集，几乎就像它们让它直接在处理器上运行一样。

从理论上讲，当 CLR JIT 的示例代码`Pow`包含在您的帖子中时，它必须向自己发布指令的本机代码`pow`，因为没有本机指令（或者是它？还没有与新的 x86 保持同步）几年前的指令集）。从性能和实现的角度来看，只为`pow`代码调用 mscorlib 比直接“粘贴”它要容易得多。

或者，他们可以有一个用于常见 mscorlib 函数的查找表，这些函数是`InternalCall`并且用对函数本身的调用来替换指令。但话又说回来，并非所有事情`InternalCall`都那么容易。

我认为这是为了方便而进行的权衡；对于 CLR 的可维护性，更统一的 CLI 标准并允许调用者具有一定的灵活性。

底线是我还没有开发 CLR，这只是我的想法。我想我会做的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-27T22:35:01.413

该方法是原生的，真正原生的，在运行时本身中实现。不要忘记，CLR 毕竟来自 C++。就像在编译器中一样。在现实世界中，CIL 并未真正执行。它是 JIT-ted，然后像编译器一样由 C/C++ 运行时执行。Math.Pow 很可能是 [推测] 对本机 C/C++ math.h pow 方法的调用，它是实现定义的——现在 NET 和 Mono 实现了 CLR。

在 UnityEngine.dll 中，`[MethodImpl(MethodImplOptions.InternalCall)]`用于大多数本机外部方法。然而，这些 C++ 方法直接使用 Mono C++ CLR 库，并且它们可以以比 P/INVOKE 本身更亲密的方式与 C# 协作。而且性能更高（PInvoke 隐藏了一些实现细节，使一些难以理解）

但是，唯一的使用方法`[MethodImpl(MethodImplOptions.InternalCall)]`是如果您是 CLR 运行时本身 - 但是我只测试过这样的 Mono。我不知道是否有可能更改 Microsoft 的 CLR 实现，但使用 Mono，您可以随意滥用此功能。

另外，不要把这个弄乱`[MethodImpl(MethodImplOptions.Unmanaged)]`- 这是完全不同的故事。

有关内部调用和 Mono 工作原理的更多信息，请访问：[http ://www.mono-project.com/docs/advanced/embedding/](http://www.mono-project.com/docs/advanced/embedding/)

免责声明：我与 Unity 或 Mono 无关！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-28T22:34:26.030

它是一个 C# 属性（向单声道运行时表明它是对本机方法的调用），它调用与嵌入单声道运行时的可执行文件链接的 .dll 中的本机 C/C++ 代码（并且 .dll 导出函数）或在嵌入运行时的可执行文件中（在 DLLImport 中使用“__Internal”）。

它是单声道调用本机代码的两种方法之一，一种是 P/invoke（使用 DLLImport），另一种是内部调用（MethodImplOptions.InternalCall）。[P/invoke 提供编组](https://stackoverflow.com/a/61426657/7194773)，而内部调用仅编组 blittable 类型。见这里：[https](https://www.mono-project.com/docs/advanced/embedding/) ://www.mono-project.com/docs/advanced/embedding/ 。

When the virtual machine detects a C# attribute that indicates an internal call, it will look up the name of the function in its database of pairings (built by the c++ code e.g. `mono_add_internal_call ("MonoEmbed::gimme", (const void *)gimme)`) and it will then call the address of the function. For Dllimport, it will make API calls `LoadLibrary` and `GetProcAddress` for the .dll or if `__Internal`, passes hModule = `GetModuleHandle(NULL)` for its own module to `GetProcAddress`, which will be your C++ executable it you embedded mono (linked libmono statically), and if you linked it dynamically then your have to specify the .exe name I'd imagine.

# c++ - 什么导致 SIGABRT 故障？

> ID：11161126
> 
> 赞同：42
> 
> 时间：2012-06-22T17:20:13.560
> 
> 标签：c++

你能告诉我什么可能导致 C++ 中的 SIGABRT 错误吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-24T22:32:46.313

根据[维基百科](http://en.wikipedia.org/wiki/SIGABRT#section_3)，

> `SIGABRT`由进程在调用`abort`libc 函数时发送给它自己，定义在`stdlib.h`. 信号可以被捕获，`SIGABRT`但不能被阻塞；如果信号处理程序返回，则所有打开的流都将关闭并刷新，程序终止（如果合适，转储核心）。这意味着`abort`调用永远不会返回。由于这个特性，它经常被用来表示支持库中的致命情况，即当前操作无法完成但主程序可以在退出前执行清理的情况。它在断言失败时使用。

这意味着如果您的代码没有`abort`直接调用，也没有通过 向自身发送`SIGABRT`信号`raise`，并且您没有任何失败的断言，那么原因一定是支持库（可能是 libc）遇到了内部错误。如果您提供程序的详细信息，我们可能会提出可能的原因。更好的是，如果您检查内核或在调试器中运行程序，您应该能够收集堆栈跟踪，这将显示哪个库导致您的程序中止。

（也有可能您系统上的另一个程序正在发送您的程序`SIGABRT`，但在大多数情况下，这几乎是不可能的。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-22T17:31:46.170

这通常发生在库遇到内部错误时，因此它们调用 abort()，因为它们无法继续。当您覆盖其中一种数据结构（例如，属于 libc 中的函数的数据结构）时，可能会发生这种情况。所以这可能是例如 libc 调用，因为您确实覆盖了某些内容。然后应用程序必须终止，因为无法继续或处理它，这称为失败断言。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-24T22:39:47.220

在实践中，这通常由 assert 宏触发：

```
char* foo = NULL;
assert( foo != NULL ); 
```

会导致 SIGABRT

# ruby - 如何与来自 Ruby 的节点 REPL 交互

> ID：11161130
> 
> 赞同：2
> 
> 时间：2012-06-22T17:20:22.570
> 
> 标签：ruby, node.js, io, read-eval-print-loop

我正在尝试编写一个与 Node.js REPL 交互的 Ruby 脚本。当我做：

```
i = IO.popen('node', 'r+')
i.write("console.log('hi')") 
```

write 调用返回写入的大小。但是如何取回 REPL 的输出进行处理？我试过#read，它不返回输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:19:22.213

当您通过管道传输内容时`node`，它希望从标准输入读取整个脚本。要使上述代码正常工作，您需要先关闭输入，然后才能读取输出。

```
i = IO.popen('node', 'r+')
i.write("console.log('hi')")
i.close_write
print i.read   # => hi 
```

显然，您需要先编写所有命令，然后才能读取任何输出。如果你想正确地与 REPL 交互，你需要创建[一个 PTY](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pty/rdoc/PTY.html)。这是一个运行一些命令并打印其输出的小示例。

```
require 'pty'
require 'expect'

commands = ["console.log('hi')", "var a = 1", "console.log(a)"]

PTY.spawn("node") do |r,w,pid|
  # r is node's stdout/stderr and w is stdin
  r.expect('>')
  commands.each do |cmd|
    puts "Command: " + cmd
    w.puts cmd
    r.expect(/(.*?)\r\n(.*)>/m) {|res| print "Output: " + res[2] }
  end
end 
```

不过，这种与 REPL 的交互往往是脆弱的。我不知道您要做什么，但是通过编写一个小型 JavaScript 程序来评估您的命令并以某种易于解析的格式返回结果，您可能会成为更好的服务器。

# c - 指针到函数指针错误之间的转换

> ID：11161137
> 
> 赞同：0
> 
> 时间：2012-06-22T17:20:51.817
> 
> 标签：c, casting, typedef, gcc-warning

所以我试图解决这个警告：`nonstandard conversion between pointer to function and pointer to data`我还没有找到一个好的方法来做到这一点。这一切都是在 c 而不是 c++ 中完成的。

目前我有一个头文件：

```
typdef struct myConnection_s
{
    ...
    void*   Callback
} myConnection_t, *Connection

typdef HRESULT (*HttpHook)(Connection, char*); 
```

在其他文件 foo.c 我有：

```
....
Connection myConnection;
...

HttpHook myHook = (HttpHook) myConnection->Callback;
...
return myHook(.....); 
```

有没有一种好方法来解决这个警告而不必改变太多？如果不是，那么重写它的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:23:31.087

```
typedef struct myConnection_s
{
    /* ... */
    HttpHook Callback;
} myConnection_t, *Connection; 
```

您也可以稍后删除显式转换：

```
HttpHook myHook = myConnection->Callback;

if (myHook)
    myHook(/* ... */); 
```

**编辑：** 看起来你有一个订购问题......试试这个：

```
struct myConnection_s;

typedef HRESULT (*HttpHook)(struct myConnection_s *, char*);

typedef struct myConnection_s
{
    /* ... */
    HttpHook Callback;
} myConnection_t, *Connection; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:08:16.100

请参阅此对类似问题的[答案。](https://stackoverflow.com/a/5579907/266392)C 标准不允许将数据指针转换为函数指针，反之亦然。您可能可以在某些平台上执行此操作，但它不是可移植代码。

肖恩·布莱特的回答是处理这个问题的正确方法。您还可以使用泛型函数指针（不带参数的 void 返回）并转换为/从该类型转换，但在我看来这很危险。如果您使用特定的函数指针类型，当您尝试使用具有不同签名的函数时，编译器会警告您。

# java - Java 支持 "(? 模式）”在模式

> ID：11161149
> 
> 赞同：12
> 
> 时间：2012-06-22T17:21:17.820
> 
> 标签：java, regex, matcher

我想知道 Java 是否有等效于 C# 的命名模式匹配。例如，在 C# 中，我可以执行以下操作：

```
var pattern = @";(?<foo>\d{6});(?<bar>\d{6});";
var regex = new Regex(pattern , RegexOptions.None);
var match = regex.Match(";123456;123456;");

var foo = match.Groups["foo"].Success ? match.Groups["foo"].Value : null;
var bar = match.Groups["bar"].Success ? match.Groups["bar"].Value : null; 
```

这似乎是一种吸引群体的干净方式。Java可以做类似的事情，还是我需要根据索引位置抓取组？

```
String foo = matcher.group(0); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-22T17:25:32.687

[从Java 7](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#groupname)开始支持此功能。你的 C# 代码可以翻译成这样的：

```
String pattern = ";(?<foo>\\d{6});(?<bar>\\d{6});";
Pattern regex = Pattern.compile(pattern);
Matcher matcher = regex.matcher(";123456;123456;");
boolean success = matcher.find();

String foo = success ? matcher.group("foo") : null;
String bar = success ? matcher.group("bar") : null; 
```

您必须创建一个`Matcher`在您调用[`find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find()).

（我使用`find()`它是因为它可以在输入字符串的任何位置找到匹配项，就像[`Regex.Match()`](https://msdn.microsoft.com/en-us/library/twcw2f1c(v=vs.110).aspx)方法一样。[`.matches()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches())只有当正则表达式匹配整个输入字符串时，该方法才返回 true。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T17:27:20.503

Java v1.7 现在支持 Perl 标准的命名组，例如`(?<name>...)`和`\k<name>`模式。

您不能在同一模式中有重复的组名，这在非常复杂的情况下可能会很烦人，因为您正在从无法控制的较小部分构建较大的模式。它也缺乏相对索引。

但是，对于您似乎正在编写的这些简单的事情，这应该足够了。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-22T17:23:30.360

我相信你需要进口

> org.apache.commons.lang3.StringUtils；

为了这

```
 private Boolean validateEmail(String email)
    {
        return email.matches("^[-!#$%&'*+/0-9=?A-Z^_a-z{|}~](\\.?[-!#$%&'*+/0-9=?A-Z^_a-z{|}~])*@[a-zA-Z](-?[a-zA-Z0-9])*(\\.[a-zA-Z](-?[a-zA-Z0-9])*)+$");
    }

    private Boolean validateIP(String IP)
    {
        return IP.matches("^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$");
    }

    private Boolean validateHostname(String Hostname)
    {
        return Hostname.matches("^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\\-]*[A-Za-z0-9])$");
    } 
```

# unix - 从 Windows 编辑开发框会添加奇怪的字符

> ID：11161152
> 
> 赞同：4
> 
> 时间：2012-06-22T17:21:47.167
> 
> 标签：unix, ssh, editor, mount

我正在使用 Dokan 安装一个开发盒，因此我可以从 Windows 编辑开发盒上的文件。问题是从 Windows 到 UNIX 的转换会弄乱文件。即使这些文件包含相同的代码，如果我在 Windows 中键入代码与开发框相比，它们会产生不同的结果。这导致了一些我无法弄清楚的令人讨厌的错误。如何确保 Windows 到 UNIX 代码编辑之间的过渡更加顺利？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T05:12:10.120

> 如何确保 Windows 到 UNIX 代码编辑之间的过渡更加顺利？

您需要使用可以读取和写入带有 UNIX 行尾标记的文件的 Windows 编辑器。

检查您的编辑器选项，看看是否可以将其配置为执行此操作，以及是否无法找到另一个编辑器。

当我需要在 Windows 上执行此操作时，我使用 Zeus 编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:53:35.843

您的问题可能不完整，但无论如何我都会尝试回答。如果用讨厌的字符表示文件末尾的 ^M，那么问题出在 Windows 行末尾的 CR LF 字符上。Unix 行仅以 LF 结尾，因此您可以在 Unix 中看到 ^M。

这个额外的字符可能会弄乱一些 unix 程序，我为您看到了两种解决方法：

a) 使用不会损坏文件的 Windows 编辑器（notepad++、editplus2 等）

b) 在 Unix 中使用“dos2unix”命令从 Unix 文件中删除多余的字符。

您还可以通过使用 cat 查看文件来查看这是否真的是您的问题： cat -v "yourFile"

# css - 为什么我的精灵在 Firefox 中无法正确显示？

> ID：11161155
> 
> 赞同：1
> 
> 时间：2012-06-22T17:21:57.767
> 
> 标签：css, wordpress, firefox, sprite

我为我的网站的中间导航栏构建了一个 CSS 精灵。在所有其他浏览器中，它都能正确显示 - 全部整齐划一。但是，在 Firefox 中，最终按钮/链接的显示比栏的其余部分略低，我不知道为什么。

这是我正在使用的代码：

```
<div id="midnavbar">
<ul id="midnav">
<li id="midnav-1"><a href="http://127.0.0.1:4001/wordpress/?page_id=13"    title="Community Connections">Community Connections</a></li>
<li id="midnav-2"><a href="http://127.0.0.1:4001/wordpress/?page_id=18 " title="Community Living">Community Living</a></li>
<li id="midnav-3"><a href="http://127.0.0.1:4001/wordpress/?page_id=118" title="Autism Spectrum">Autism Spectrum</a></li>
<li id="midnav-4"><a href="http://127.0.0.1:4001/wordpress/?page_id=123" title="Positive Support">Positive Support</a></li>
<li id="midnav-5"><a href="http://127.0.0.1:4001/wordpress/?page_id=121" title="Medically Fragile">Medically Fragile</a></li>
</ul>
</div> 
```

CSS：

```
#midnavbar {
display:block;
}

ul#midnav {
width:955px;
height:48px;
list-style:none;
overflow:hidden;
}

ul#midnav li {
display:inline;
list-style:none;
}

ul#midnav li a {
height:48px;
float:left;
text-indent: 100%;
white-space: nowrap;
overflow: hidden;
}
ul#midnav li#midnav-1 a {
width:223px;
background: transparent url("http://127.0.0.1:4001/wordpress/wp-    content/themes/thoriumific/images/midnav.jpg") no-repeat 0 0; /* X and Y position at 0 */
}
ul#midnav  li#midnav-1 a:hover {
background-position:0 -48px; /* Y position -45px for Over instance image */
}
ul#midnav li#midnav-2 a {
width:178px;
background: transparent url("http://127.0.0.1:4001/wordpress/wp-   content/themes/thoriumific/images/midnav.jpg") no-repeat -223px 0;
}
ul#midnav  li#midnav-2 a:hover {
background-position:-223px -48px;
}
ul#midnav li#midnav-3 a {
width:179px;
background: transparent url("http://127.0.0.1:4001/wordpress/wp-content/themes/thoriumific/images/midnav.jpg") no-repeat -401px 0;
}
ul#midnav  li#midnav-3 a:hover {
background-position:-401px -48px;
}
ul#midnav li#midnav-4 a {
width:186px;
background: transparent url("http://127.0.0.1:4001/wordpress/wp-content/themes/thoriumific/images/midnav.jpg") no-repeat -580px 0;
}
ul#midnav  li#midnav-4 a:hover {
background-position:-580px -48px;
}
ul#midnav li#midnav-5 a {
width:189px;
background: transparent url("http://127.0.0.1:4001/wordpress/wp-content/themes/thoriumific/images/midnav.jpg") no-repeat -766px 0;
}
ul#midnav  li#midnav-5 a:hover {
background-position:-766px -48px;
} 
```

我不确定我做错了什么，所以我不知道如何解决它。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T00:21:18.963

You should avoid using `display: inline;` because it's buggy, and as you've figured it out it doesn't really work the same in all browsers. I suggest you use `float: left;` Also I cleaned up your css a bit.

```
#midnav {
    width: 955px;
    height: 48px;
    list-style: none;
    overflow: hidden;
}

#midnav li {
    float: left;
}

#midnav a {
    height: 48px;
    display: block;
    text-indent: 100%;
    white-space: nowrap;
    overflow: hidden;
}

#midnav-1 a {
    width: 223px;
    background: transparent url("http://127.0.0.1:4001/wordpress/wp-    content/themes/thoriumific/images/midnav.jpg") no-repeat 0 0; /* X and Y position at 0 */
}

#midnav-1 a:hover { background-position:0 -48px }

#midnav-2 a {
    width:178px;
    background: transparent url("http://127.0.0.1:4001/wordpress/wp-   content/themes/thoriumific/images/midnav.jpg") no-repeat -223px 0;
}

#midnav-2 a:hover { background-position:-223px -48px }

#midnav-3 a {
    width:179px;
    background: transparent url("http://127.0.0.1:4001/wordpress/wp-content/themes/thoriumific/images/midnav.jpg") no-repeat -401px 0;
}

#midnav-3 a:hover { background-position:-401px -48px }

#midnav-4 a {
    width:186px;
    background: transparent url("http://127.0.0.1:4001/wordpress/wp-content/themes/thoriumific/images/midnav.jpg") no-repeat -580px 0;
}

#midnav-4 a:hover { background-position:-580px -48px }

#midnav-5 a {
    width:189px;
    background: transparent url("http://127.0.0.1:4001/wordpress/wp-content/themes/thoriumific/images/midnav.jpg") no-repeat -766px 0;
}

#midnav-5 a:hover { background-position:-766px -48px }​ 
```

# reporting-services - SSRS 设备信息配置更改被忽略

> ID：11161157
> 
> 赞同：2
> 
> 时间：2012-06-22T17:22:20.997
> 
> 标签：reporting-services

运行 SQL Server 2008（不是 R2）。

我有一些报告将 URL 作为对图表和文本框的操作，这些操作在报表查看器控件中以 HTML 形式呈现。选择链接后，它们将在新选项卡（或窗口）中打开，我希望它们在包含 reportviewer 控件的现有框架中打开。我已经阅读了解决此问题的两种方法：（1）在 URL 中设置目标或使用 javascript，以及（2）更新 rsreportserver.config 中的 LinkTarget 设备信息配置参数。我决定选择选项（2）

使用以下内容更新 rsreportserver.config 后，我发现呈现的报告中链接的目标值没有变化。我不断将 _top 作为目标。

```
<RENDER>
...
<Extension Name="HTML4.0" Type="Microsoft.ReportingServices.Rendering.HtmlRenderer.Html40RenderingExtension,Microsoft.ReportingServices.HtmlRendering" Visible="False" LogAllExecutionRequests="False">
         <Configuration>
            <DeviceInfo>
               <LinkTarget>_self</LinkTarget>                  
            </DeviceInfo>
         </Configuration>
      </Extension>
...
</RENDER> 
```

在报表查看器控件中呈现报表时，SSRS 似乎忽略了这些更改。

有没有人遇到过这个问题？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:01:26.703

看来使用 rsreportserver.config 文件设备信息部分的文档 (http://msdn.microsoft.com/en-us/library/ms155395(v=sql.100).aspx) 对我不起作用.

挖掘后，我发现如果我将 ReportViewer Control HyperLinkTarget 参数设置为“_self”，它会纠正问题，并且我的 URL 现在出现在框架内。这是一个快照：

```
<rs:ReportViewer ID="ReportViewer1" runat="server" ProcessingMode="Remote"
        SizeToReportContent="true"
        ShowParameterPrompts="false"
        ShowToolBar="false"
        ShowPageNavigationControls="false"
        ShowCredentialPrompts="false"
        ShowFindControls="false"
        ShowRefreshButton="false"
        ShowWaitControlCancelLink="false"
        ShowZoomControl="false"
        ShowPrintButton="false"
        HyperlinkTarget ="_self">
    </rs:ReportViewer> 
```

# c# - C# UserControl 可见属性不变

> ID：11161160
> 
> 赞同：19
> 
> 时间：2012-06-22T17:22:29.443
> 
> 标签：c#, winforms, user-controls

```
Debug.WriteLine(ucFollow.Visible);
ucFollow.Visible = true;
Debug.WriteLine(ucFollow.Visible); 
```

ucFollow 是一个自定义的 UserControl，没什么花哨的。上面的代码打印出来：

```
False
False 
```

最糟糕的是，这***确实会***切换 UserControl 的实际可见性（即，一旦调用此代码，ucFollow 就会出现），但似乎 Visible 属性不......好吧，在后端可见，并且不反映变化，即使 UI 本身确实如此。

我什至不知道从哪里开始解决这个问题。有没有人知道什么可能会导致这种疯狂？

编辑：这是 Visual Studio 2010 中的标准 C# WinForm。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-22T17:44:39.013

我没有破坏 C#！:)

原来罪魁祸首是 Form.Visible 属性。在 Form.Visible 设置为 true 之前，表单上的任何和所有控件都将不可见（Visible = false）无论如何。

但是，您仍然可以*设置*Visible 属性 - 在 Form.Visible 属性设置为 true 之前，它们不会生效。

换句话说，当我调用 时`ucFollow.Visible = true`，我的程序确实在注册它——然而，在代码中，ucFollow 的父 Form.Visible 仍然是错误的。因此，调试器和我的打印语句都识别出，“嘿，这个控件的父窗体仍然不可见，所以这个控件不可见。句号。”

一旦表单可见，所有更改都会生效，并且一切正常。

故事的寓意：不要依赖控件的 Visibility 属性，除非包含它们的表单已经可见并正在运行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-05T09:17:16.050

罪魁祸首是控件 Visible 属性实际上是一个属性（带有 get; set;），并且该 set 将分配给内部 m_Visible 成员，但 get 将查看所有父控件，并且只有在所有父控件都具有 m_Visible == true 时才会返回 true

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T17:32:05.527

这是假设属性和字段是同一事物的危险。它们在*概念上*当然非常相似（这就是重点），但它们在机械上却明显不同。看看`ucFollow.Visible = true`实际做了什么：

```
protected virtual void SetVisibleCore(bool value)
{
    try
    {
        HandleCollector.SuspendCollect();
        if (this.GetVisibleCore() != value)
        {
            if (!value)
            {
                this.SelectNextIfFocused();
            }
            bool flag = false;
            if (this.GetTopLevel())
            {
                if (this.IsHandleCreated || value)
                {
                    SafeNativeMethods.ShowWindow(new HandleRef(this, this.Handle), value ? this.ShowParams : 0);
                }
            }
            else
            {
                if (this.IsHandleCreated || (value && this.parent != null && this.parent.Created))
                {
                    this.SetState(2, value);
                    flag = true;
                    try
                    {
                        if (value)
                        {
                            this.CreateControl();
                        }
                        SafeNativeMethods.SetWindowPos(new HandleRef(this.window, this.Handle), NativeMethods.NullHandleRef, 0, 0, 0, 0, 23 | (value ? 64 : 128));
                    }
                    catch
                    {
                        this.SetState(2, !value);
                        throw;
                    }
                }
            }
            if (this.GetVisibleCore() != value)
            {
                this.SetState(2, value);
                flag = true;
            }
            if (flag)
            {
                using (new LayoutTransaction(this.parent, this, PropertyNames.Visible))
                {
                    this.OnVisibleChanged(EventArgs.Empty);
                }
            }
            this.UpdateRoot();
        }
        else
        {
            if (this.GetState(2) || value || !this.IsHandleCreated || SafeNativeMethods.IsWindowVisible(new HandleRef(this, this.Handle)))
            {
                this.SetState(2, value);
                if (this.IsHandleCreated)
                {
                    SafeNativeMethods.SetWindowPos(new HandleRef(this.window, this.Handle), NativeMethods.NullHandleRef, 0, 0, 0, 0, 23 | (value ? 64 : 128));
                }
            }
        }
    }
    finally
    {
        HandleCollector.ResumeCollect();
    }
} 
```

（代码由 ILSpy 提供。）

你的答案就在那个饱受折磨的逻辑迷宫中。

# c# - File.exists 带有 .avi 扩展名

> ID：11161164
> 
> 赞同：0
> 
> 时间：2012-06-22T17:22:48.613
> 
> 标签：c#, asp.net

我得到了这个功能

```
private void setLink(TableCell tc, string sFileName)
{
    string filepath = Server.MapPath("../Documents/" + m_cbCategory.SelectedItem + "/" + sFileName);
    string[] sSupportedExt = { ".pdf", ".doc", ".docx", ".avi" };

    foreach (string sExt in sSupportedExt)
    {
        FileInfo file = new FileInfo(filepath + sExt);
        if (file.Exists)
        {
            LinkButton link = new LinkButton();
            link.ID = sFileName + sExt;
            link.Click += new EventHandler(DownloadItems);
            link.Text = "";
            var img = new Image();
            img.Attributes.Add("src", "../images/" + sExt.Substring(1) + ".png");
            img.Attributes.Add("alt", "");
            link.Controls.Add(img);
            tc.Controls.Add(link);
        }
    }
} 
```

我正在尝试阅读 pdf、doc 或 avi 等文件。此功能适用于 pdf 和 doc 文档，但 avi 视频呢？file.exists 是否有理由为该文件返回 false 而为其他文件返回 true？我查看了文件拼写，路径，一切都很好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:25:38.327

我打赌你在 sFileName 中有空格

# c++ - 调用 COM 方法永远阻塞

> ID：11161167
> 
> 赞同：0
> 
> 时间：2012-06-22T17:22:55.430
> 
> 标签：c++, debugging, com, rpc

在调试我的应用程序挂起时，我发现其中一个 COM 组件调用了另一个 COM 组件的方法。但第二种方法永远无法控制。调用阻塞在 rpcrt4.dll 中它们之间的某处！这怎么可能发生？

# chef-infra - Chef 可以检测未使用的食谱吗？

> ID：11161173
> 
> 赞同：4
> 
> 时间：2012-06-22T17:23:07.723
> 
> 标签：chef-infra

Chef 是否可以检测我的存储库中是否有一些 Cookbook 未被使用？

它能否仅针对单个食谱检测未使用的食谱？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T09:26:32.950

Chef 自己无法真正判断，但您可以使用`knife search node`收集每个节点的扩展运行列表（存储在“recipes”属性中），然后使用常规 Unix 工具对其进行清理。这将为您提供使用的食谱列表。将此与您的仓库中的内容进行比较以确定未使用的食谱

```
$ knife search node '*:*' -a recipes | \
    grep "^ " | sort | uniq | tr -d ' '
apache2
apt
chef-client
chef-client::config
chef-client::delete_validation
... 
```

用“::”过滤掉每一行以删除食谱并只留下食谱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T11:51:45.870

我用了

```
ls /var/cache/chef/cookbooks 
```

找出所有缓存食谱的列表。此列表是厨师客户上次使用的所有食谱的列表。请注意，厨师客户端会从缓存中删除未使用的食谱。

# php - php重复输出

> ID：11161178
> 
> 赞同：2
> 
> 时间：2012-06-22T17:23:36.197
> 
> 标签：php, mysql, export-to-csv

我使用此代码将查询提取到 csv 文件中，但它复制了打印的字段。

下面这段代码有问题吗？

```
if ( !$result1 ) { echo mysql_error(); }
while ($row = mysql_fetch_array($result1)) {
    fputcsv($fh, $result1, ',');
}
fclose($fh); 
```

这一切都发生在我插入`,`fputcsv 之后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:25:08.887

改变：

```
fputcsv($fh, $result1, ','); 
```

至：

```
fputcsv($fh, $row, ','); 
```

**更新：**尽管您拒绝提供更多详细信息，但我猜测进行此更改后的问题是`mysql_fetch_array`默认情况下返回组合的数字索引/关联数组。你会想要通过`MYSQL_NUM`以获得你想要的结果。所以完整的代码是：

```
if (!$result1)
    echo mysql_error();

while ($row = mysql_fetch_array($result1, MYSQL_NUM)) /* <-- Added MYSQL_NUM */
    fputcsv($fh, $row, ','); /* <-- $row, not $result1 */

fclose($fh); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T17:26:27.607

```
fputcsv($fh, $result1, ','); 
```

你不想要这个吗？

```
fputcsv($fh, $row, ','); 
```

# sql - 某些列的 SQL 行总和

> ID：11161181
> 
> 赞同：1
> 
> 时间：2012-06-22T17:23:44.187
> 
> 标签：sql, sql-server, tsql, sum

我正在尝试开发一个 SQL 字段，它是除前两个之外的行的所有列的总和。下面是我的代码，它返回 MonthYear、Total、Sum1、Sum2 和 Sum3 列。我想要一个总计 Sum1、Sum2 和 Sum3 的 FinalSum。这将用于反检查 Total 列的准确性。有没有办法做到这一点？运行 Microsoft SQL Server 2005 - T-SQL

```
SELECT MonthYear,
            COUNT(*) AS Total,
            ISNULL(
                SUM(
                    CASE 
                    WHEN Status='Sum1'                  THEN 1
                    ELSE 0
                    END
                )
            ,0) AS [Sum1],
ISNULL(
                SUM(
                    CASE 
                    WHEN Status='Sum2'                  THEN 1
                    ELSE 0
                    END
                )
            ,0) AS [Sum2],
ISNULL(
                SUM(
                    CASE 
                    WHEN Status='Sum3'                  THEN 1
                    ELSE 0
                    END
                )
            ,0) AS [Sum3]
FROM tablename

GROUP BY
    MonthYear 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T17:37:01.950

您在查询中遗漏了一个`FROM`。无论如何，一种方法是使用派生表：

```
SELECT *, [Sum1]+[Sum2]+[Sum3] AS TotalSum
FROM (Your Current Select Here) AS T 
```

对于 SQL Server 2005+，您还可以使用 CTE：

```
;WITH CTE AS 
(
    Your Current Select Here
)
SELECT *, [Sum1]+[Sum2]+[Sum3] AS TotalSum
FROM CTE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:18:20.657

好的 - 可能不是最优雅的方式（副本保存[在 SqlFiddle 上](http://sqlfiddle.com/#!3/8ecfd/13)）

```
CREATE TABLE this_name 
(
    monthYear DateTime,
    status varchar(20), 
   );

INSERT INTO this_name
(monthYear, status)
VALUES
('01 jan 2012', 'Sum1'),
('01 jan 2012', 'Sum1'),
('01 feb 2012', 'Sum2'),
('01 feb 2012', 'Sum1'),
('01 apr 2012', 'Sum3'),
('01 jan 2013', 'Sum3'),
('01 jan 2013', 'Sum3'),
('01 jan 2012', 'Sum3')

;WITH myCTE (MonthYear,Total, Sum1, Sum2, Sum3)
AS
(
SELECT MonthYear,
       COUNT(*) AS Total,
       SUM(CASE WHEN ISNULL(Status,'X')='Sum1' THEN 1 ELSE 0 END) AS [Sum1],
       SUM(CASE WHEN ISNULL(Status,'X')='Sum2'THEN 1 ELSE 0 END ) AS [Sum2],
       SUM(CASE WHEN ISNULL(Status,'X')='Sum3' THEN 1 ELSE 0 END) AS [Sum3] 
FROM this_name
GROUP BY MonthYear
)   
SELECT 
  MonthYear,
  Total, 
  Sum1, 
  Sum2, 
  Sum3,
  (Sum1 + Sum2 + Sum3) [CountTotal]
FROM myCTE 
```

另一种选择是这个（[[SQLFiddle]](http://sqlfiddle.com/#!3/41e7c/2) ;

```
SELECT MonthYear,
   COUNT(*) AS Total,
   SUM(CASE WHEN ISNULL(Status,'X')='Sum1' THEN 1 ELSE 0 END) AS [Sum1],
   SUM(CASE WHEN ISNULL(Status,'X')='Sum2'THEN 1 ELSE 0 END ) AS [Sum2],
   SUM(CASE WHEN ISNULL(Status,'X')='Sum3' THEN 1 ELSE 0 END) AS [Sum3], 

   SUM(CASE WHEN ISNULL(Status,'X')IN('Sum1','Sum2','Sum3') THEN 1 ELSE 0 END) AS [SumExtra]  
FROM this_name
GROUP BY MonthYear 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:49:59.313

```
declare @sum1 int, @sum2 int, @sum3 int
declare @totalSum int = 0

select @sum1 = ISNULL(SUM(CASE WHEN Status='Sum1' THEN 1 ELSE 0 END), 0)
from tablename

select @sum2 = ISNULL(SUM(CASE WHEN Status='Sum2' THEN 1 ELSE 0 END), 0)
from tablename

select @sum3 = ISNULL(SUM(CASE WHEN Status='Sum3' THEN 1 ELSE 0 END), 0)
from tablename

set @totalSum = @sum1 + @sum2 + @sum3

SELECT MonthYear, COUNT(*) AS Total,
            ISNULL(SUM(
                    CASE 
                    WHEN Status='Sum1' THEN 1
                    ELSE 0
                    END
                ), 0) AS [Sum1],
            ISNULL(SUM(
                    CASE 
                    WHEN Status='Sum2' THEN 1
                    ELSE 0
                    END), 0) AS [Sum2],
            ISNULL(SUM(
                    CASE 
                    WHEN Status='Sum3' THEN 1
                    ELSE 0
                    END), 0) AS [Sum3],
            @totalSum
FROM tablename

GROUP BY
    MonthYear 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:06:33.983

使用临时表的一种方法

```
CREATE TABLE #Table2
(
    MonthYear VARCHAR(6) NOT NULL PRIMARY KEY,
    Total INT NOT NULL,
    Sum1 INT NOT NULL,
    Sum2 INT NOT NULL,
    Sum3 INT NOT NULL
) ;

INSERT INTO #Table2
SELECT
        MonthYear,
        COUNT(*) AS Total,
        SUM(CASE WHEN ISNULL(Status, '') = 'Sum1' THEN 1 ELSE 0 END),
        SUM(CASE WHEN ISNULL(Status, '') = 'Sum2' THEN 1 ELSE 0 END),
        SUM(CASE WHEN ISNULL(Status, '') = 'Sum3' THEN 1 ELSE 0 END)
FROM tablename
GROUP BY MonthYear ;

SELECT *, Sum1Count + Sum2Count + Sum3Count AS FinalSum FROM #Table2 ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T18:09:37.667

重复计算的另一种方法

```
SELECT
        MonthYear,
        COUNT(*) AS Total,
        SUM(CASE WHEN ISNULL(Status, '') = 'Sum1' THEN 1 ELSE 0 END) AS [Sum1],
        SUM(CASE WHEN ISNULL(Status, '') = 'Sum2' THEN 1 ELSE 0 END) AS [Sum2],
        SUM(CASE WHEN ISNULL(Status, '') = 'Sum3' THEN 1 ELSE 0 END) AS [Sum3],
        SUM(CASE WHEN ISNULL(Status, '') = 'Sum1' THEN 1 ELSE 0 END) +
        SUM(CASE WHEN ISNULL(Status, '') = 'Sum2' THEN 1 ELSE 0 END) +
        SUM(CASE WHEN ISNULL(Status, '') = 'Sum3' THEN 1 ELSE 0 END) AS [FinalSum]
FROM tablename
GROUP BY MonthYear ; 
```

# c# - 在 VB.NET 中与 GUI 控件异步工作

> ID：11161192
> 
> 赞同：0
> 
> 时间：2012-06-22T17:24:27.890
> 
> 标签：c#, vb.net, asynchronous, delegates, callback

我有一个需要处理的项目列表框，我想在单独的线程上异步处理它们。（以前从未这样做过）。

所以我创建了一个委托，一个回调，称为对列表框项目执行工作的方法。

我收到异常“System.InvalidOperationException”：跨线程操作无效：控件“ListBoxBlah”从创建它的线程以外的线程访问。

对单个项目执行异步操作对我来说没有意义，因为我这样做只是为了在后台执行大量操作（列表框可能有 20000 个项目），同时允许用户执行其他操作。

要与 GUI 交互，这必须变得更加复杂......我只是不知道如何：

```
Public Sub F(ByVal ext As String)
    If ListBoxBlah.SelectedIndex = -1 Then Return
    'Process ListBoxBlah
End Sub

Delegate Sub E(ByVal ext As String)

Sub Callback(ByVal ar As IAsyncResult)
    Dim t As E = CType(CType(ar, System.Runtime.Remoting.Messaging.AsyncResult).AsyncDelegate, E)
    t.EndInvoke(ar)
End Sub

Public Sub Ex()
    Dim t As E = AddressOf F
    t.BeginInvoke("ext", AddressOf Callback, "state")
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:30:54.253

在 c# 中，当您想从未创建 GUI 的线程访问 GUI 时，您使用“需要调用”
我假设在 VB.NET 中它是相同的。
试试这个：[http ://www.vbdotnetforums.com/database-general-discussion/19740-how-use-invokerequired.html](http://www.vbdotnetforums.com/database-general-discussion/19740-how-use-invokerequired.html)

# struts2 - freemarker 和 struts2 标签

> ID：11161194
> 
> 赞同：1
> 
> 时间：2012-06-22T17:24:46.030
> 
> 标签：struts2, freemarker

我正在尝试在 freemarker 模板（jboss 服务器）中使用 struts2 标签。

在某处我看到它很简单，只是代替

问题是在尝试用代码加载我的 ftl 之后

```
<@s.form id="testId" namespace="/">
  <@s.select label="What's your favor search engine"
      name="roomModif[0].type"
      value="modifiedRooms[0].type"
      list="searchEngine" />
</@s.form> 
```

我有例外

```
[FreemarkerTemplateEngine] Could not load the FreeMarker template named 'form':
[FreemarkerTemplateEngine] Attempted: /template/xhtml/form.ftl
[FreemarkerTemplateEngine] Attempted: /template/simple/form.ftl
[FreemarkerTemplateEngine] The TemplateLoader provided by the FreeMarker 
 Configuration was a: freemarker.cache.FileTemplateLoader
[ClosingUIBean] Could not open template
java.io.FileNotFoundException: Template /template/xhtml/form.ftl not found. 
```

有人可以告诉我我的配置中缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:52:16.337

第一步：

您在 Web-inf/lib 中的战争中是否有**struts2-core.jar ？**

如果是这样，你能在那个 jar 中找到“ *template/xhtml/form.ftl* ”或“ *template/simple/form.ftl ”吗？*

如果没有，你的 struts2-core 库有问题。确保您使用最新版本的 Struts2。

# c# - 仅当类型为 T 时才从面板中删除子项

> ID：11161195
> 
> 赞同：9
> 
> 时间：2012-06-22T17:24:46.530
> 
> 标签：c#, .net, wpf, panel

我有一个 WPF `Panel`（`Canvas`例如），并且`Children`仅当这些子项为 type时，我才想将其删除`T`，例如所有 type `Button`。

我怎样才能做到这一点？我可以使用 LINQ 吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T17:48:41.747

您可以使用 LINQ，这是一种方法。

```
canvas1.Children.OfType<Button>().ToList().ForEach(b => canvas1.Children.Remove(b)); 
```

或者，您可以循环遍历所有子元素，如果是按钮，则将它们添加到列表中，最后删除它们。不要删除 foreach 循环内的按钮。

```
List<Button> toRemove = new List<Button>();
foreach (var o in canvas1.Children)
{
    if (o is Button)
        toRemove.Add((Button)o);
}
for (int i = 0; i < toRemove.Count; i++)
{
    canvas1.Children.Remove(toRemove[i]);
} 
```

LINQ 方式更易读，更简单，编码更少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T17:29:14.440

只需进行类型比较。棘手的部分是在循环时修改集合；我通过使用两个 for 循环来做到这一点：

```
var ToRemove = new List<UIElement>();
Type t = typeof(Button);
for (int i=0 ; i<MyPanel.Children.Count ; i++)
{
     if (MyPanel.Children[i].GetType()) == t)
         ToRemove.Add(MyPanel.Children[i]);
}
for (int i=0 ; i<ToRemove.Length ; i++) MyPanel.Children.Remove(ToRemove[i]); 
```

**编辑**

这种方式更干净，从集合的末尾循环，以便从循环内部删除项目。

```
Type t = typeof(Button);
for (int i=MyPanel.Children.Count-1 ; i>=0 ; i--)
{
     if (MyPanel.Children[i].GetType()) == t)
         MyPanel.Children.RemoveAt(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:28:59.790

一些LINQ：

```
panel1.Controls.OfType<Button>().ToList().ForEach((b) => b.Parent = null); 
```

对不起，伙计们所有的错误。进行了修正并进行了测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T17:38:05.947

把这个从我的手机上取下来：

```
foreach(object o in MyPanel.Children)
{
    if(o.GetType() == typeof(Button))
    {
        MyPanel.Children.Remove(o);
    }
} 
```

# php - PHP在他评论时显示用户的图像

> ID：11161196
> 
> 赞同：1
> 
> 时间：2012-06-22T17:24:49.183
> 
> 标签：php, sql, comments

我开发了一个 PHP 代码，它接受用户的评论并将它们存储在数据库中。但是当他发表评论时，我也想输出用户的图像。此外，如果数据库中没有用户的图像，则应显示默认图像。目前我的 PHP 代码如下所示：

```
<?php
if($pid && $sess_uid && $comment_text){
    $sql = "INSERT INTO ttl_comments (comment_pid, comment_text, comment_uid) VALUES ('".$pid."', '".$comment_text."', '".$sess_uid."')";

    $result = mysql_query($sql);
    $comment_id = mysql_insert_id();
    if($comment_id > 0)
    echo '<div class="usercomment">
            <div class="clr"></div>
            <a href="profile.php?uid='.$sess_uid.'"></a>
            <a href="profile.php?uid='.$sess_uid.'">
                <span class="commentsuser">'.$sess_fname." ".$sess_lname.'</span>
            </a>
            <span class="comments">'.$comment_text.'</span>
        </div>
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:37:54.980

我假设您没有将图像数据作为 BLOB 存储在数据库中。如果你是，我会请你不要那样做:)

为您提供对存储在数据库中的图像位置的引用，如下所示

`/images/users/user0001.jpg`

然后，您只需将该数据作为文本获取，并将其作为标签的来源进行回显。

有点像这样：

```
$row = mysql_fetch_result($result);

< img src ="< ?php echo $row['name_of_image_col']; ? >" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:35:39.757

首先，我建议您将图像存储在文件系统上，然后将图像的路径放在数据库中，而不是将实际图像存储在数据库中。

但是，如果图像作为 BLOB 存储在数据库中，那么您必须显示一个带有该 PHP 脚本引用的 IMG 标记，该 PHP 脚本将图像作为该标记的 src 转储到响应中。

要从数据库中转储图像，您必须执行[以下操作](http://cookbooks.adobe.com/post_Display_an_image_stored_in_a_database__PHP_-16637.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:37:16.427

处理大量数据时，应始终将图像实例存储在数据库中。一个人不能继续命名 1000 张图像。我想以下链接将帮助您改进它： [将图像存储在数据库中还是系统文件中？](https://stackoverflow.com/questions/766048/store-image-in-database-or-in-a-system-file)

# javascript - 前置所有 CSS 选择器

> ID：11161198
> 
> 赞同：15
> 
> 时间：2012-06-22T17:24:58.960
> 
> 标签：javascript, jquery, css, regex, css-selectors

是否有一个文本过滤器或 javascript/jquery 函数将在样式表中的所有 css 选择器前面加上一些东西？我试图用 twitter bootstrap 只影响一个 div，但它正在影响它之外的侧边栏，有没有办法做到这一点？（我不想使用 iframe。）

编辑：

我想要的只是能够为css文件中的每个选择器添加一个ID“#content”。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-22T18:59:26.247

您在 sabithpocker 的回答下的评论告诉我，您希望静态修改 CSS，而不是动态更改样式。我认为使用正则表达式最简单：

查找：`([,|\}][\s$]*)([\.#]?-?[_a-zA-Z]+[_a-zA-Z0-9-]*)`
替换为：`$1#content $2`

**正则表达式的细分**

*   `([,|\}][\s$]*)`- 从前面的样式中查找`}`or`,`后跟空格（空格/制表符：`\s`，换行符：）`$`。右大括号\逗号可防止正则表达式查看样式的内部。
*   `[\.#]?`- 匹配起始名称`#`或`.`样式名称（如果存在）。
*   `-?[_a-zA-Z]+`- CSS 样式名称可以以下划线或字母开头。此外，样式名称可以在前面加上破折号。
*   `[_a-zA-Z0-9-]*`- 匹配样式名称的其余部分。这可以省略，但最好知道所有已修改样式的样式名称。
*   `$1#content $2`- `}`（或`,`）和空格保留其被发现的方式（`$1`）。它后面是您插入的文本`#content`（注意空格），然后是样式名称 ( `$2`)。

我在 Notepad++ 中对此进行了测试，它适用于我的样式表。
应该注意的是，如果你的 CSS 没有被压缩（并且是多行的），你将需要支持多行正则表达式的编辑器（Notepad++ 支持）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-08T06:50:45.043

改进了 RustyTheBoyRobot 和 BoltClock♦ 答案以允许评论和媒体查询。

寻找：`([,|\}][\s$]*)((?|\/\/.*[\s$]+|.*\/\*.*\*\/[\s$]*|@media.*\{[\s$]*|)*)([\.#]?-?[_a-zA-Z]+[_a-zA-Z0-9-]*)`

用。。。来代替：`$1$2 #content $3`

# 编辑

我注意到我提供的代码仅适用于 PHP。

这是一个应该在 Javascript 和 PHP 中工作的改进版本

**正则表达式***

```
(^(?:\s|[^@{])*?|[},]\s*)(\/\/.*\s+|.*\/\*[^*]*\*\/\s*|@media.*{\s*|@font-face.*{\s*)*([.#]?-?[_a-zA-Z]+[_a-zA-Z0-9-]*)(?=[^}]*{) 
```

**完整示例***

```
var outputString = inputString.replace(
    /(^(?:\s|[^@{])*?|[},]\s*)(\/\/.*\s+|.*\/\*[^*]*\*\/\s*|@media.*{\s*|@font-face.*{\s*)*([.#]?-?[_a-zA-Z]+[_a-zA-Z0-9-]*)(?=[^}]*{)/g,
    "$1$2 #content $3"
); 
```

这也应该解决@Mariano Martinez Peck 问题`background: linear-gradient(to bottom, #ae9e9e, #454545);`和问题`@font-face`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-22T22:58:50.653

这可以通过使用 SCSS 更轻松地完成。只需使用您现有的 CSS，使用 #my-new-selector { ... } 将其全部嵌套，然后通过 SCSS 到 CSS 编译器运行它（有在线工具可以做到这一点，而无需安装任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T18:14:28.267

一种解决方法（如果你真的需要这样做）：

1.  等到窗口加载并应用所有样式
2.  抓取您希望应用样式完整的元素
3.  获取他们的样式并内联应用它

对于跨浏览器实现，您可以使用如下所示的 jquery 插件：

```
$('#mydiv *').each(function(){
    $(this).css($(this).getStyleObject());
    }); 
```

然后禁用原始样式表

```
document.stylesheets[n].disabled = true;
//or use this : $('link[title=mystyle]')[0].disabled=true;

//n should be index of style sheet -- counts external + internal style sheets 
```

插入：

```
/*
 * getStyleObject Plugin for jQuery JavaScript Library
 * From: http://upshots.org/?p=112
 */

(function($){
    $.fn.getStyleObject = function(){
        var dom = this.get(0);
        var style;
        var returns = {};
        if(window.getComputedStyle){
            var camelize = function(a,b){
                return b.toUpperCase();
            };
            style = window.getComputedStyle(dom, null);
            for(var i = 0, l = style.length; i < l; i++){
                var prop = style[i];
                var camel = prop.replace(/\-([a-z])/g, camelize);
                var val = style.getPropertyValue(prop);
                returns[camel] = val;
            };
            return returns;
        };
        if(style = dom.currentStyle){
            for(var prop in style){
                returns[prop] = style[prop];
            };
            return returns;
        };
        return this.css();
    }
})(jQuery); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T17:55:13.440

不，样式表只是一个复制粘贴文件。你必须用唯一标识符包装所有你想要的东西，然后使用这个唯一标识符来引用它。

# javascript - jQuery $.post() 数据未正确读取

> ID：11161199
> 
> 赞同：0
> 
> 时间：2012-06-22T17:25:00.540
> 
> 标签：javascript, jquery, ajax, .post

在尝试使用 jQuery 和 AJAX 在页面之间进行通信时，我遇到了一个奇怪的错误。我根本无法让 $.post() 函数工作！

```
$(document).ready(function() {
    $('#form').submit(function() {  
        $.post('test.php', {'name': 'joey', 'age': 12}, function(data){
                     alert(data);
        });

        return false;
    });
}); 
```

测试.php：

```
<php?
    print_r($_POST);
?> 
```

当我这样做时会发生什么是我收到带有 [object XMLDocument] 的警报，但是如果我添加“文本”作为 post 中的最后一个参数，它会使用文件的完整 php 代码发出警报。

我的问题是当我打电话时：

```
$.post('test.php', {'name': 'joey', 'age': 12}, function(data){
                 $('#content').html(data);
       }); 
```

这会在 firebug 上引发错误。“内容”是一个 div。它在我执行 .html('test') 时有效，但在执行 .html(data) 时无效。

知道我做错了什么吗？

**编辑：** 这是一个包含我的整个项目（如 3 个文件）的保管箱文件夹，如果有人可以花 3-4 分钟浏览它，那将对我有很大帮助！我在这里被困了几天

[https://www.dropbox.com/sh/ns73titud46kea7/aElaYx728G](https://www.dropbox.com/sh/ns73titud46kea7/aElaYx728G)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:27:44.543

```
<php?
    print_r($_POST);
?> 
```

应该读

```
<?php
    print_r($_POST);
?> 
```

我假设 php 被解释为 XML 节点，但显然它不是有效的 html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:38:23.437

没关系，但尝试将数据的类型设置为`'html'`

```
$.post('test.php', {'name': 'joey', 'age': 12}, function(data){
    $('#content').html(data);
}, 'html'); 
```

或尝试使用`.load()`

```
$('#content').load('test.php', {'name': 'joey', 'age': 12}); 
```

您可能还想尝试将 12 放在引号中，以排除某些情况......

```
$('#content').load('test.php', {'name': 'joey', 'age': '12'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:07:17.503

我的回复有点晚了，但可能是你有无效的 json 吗？

```
{'name': 'joey', 'age': 12} 
```

应该

```
'{"name": "joey", "age": "12"}' 
```

# asp.net - System.Web.Security.MembershipProvider 在哪里？

> ID：11161203
> 
> 赞同：20
> 
> 时间：2012-06-22T17:25:07.667
> 
> 标签：asp.net, asp.net-membership, asp.net-4.0

我有一个库项目，它应该是几个 Web 应用程序的基础。我正在尝试实现 System.Web.Security.MembershipProvider 但由于某种原因 Visual Studio 找不到它。它设法找到 System.Web.Security.SqlMembershipProvider 但不是 MembershipProvider。

知道为什么吗？

我正在使用带有 .NET 4 的 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-22T17:31:03.923

从 .NET 4 开始，[MembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)在**System.Web.ApplicationServices.dll**中声明（很奇怪），因此您需要添加对该程序集的引用。在 .NET 3.5 及更早版本中，MembershipProvider 在 System.Web.dll 中声明。

* * *

**提示：**要找出哪个程序集包含任何 .NET Framework 类，只需在 MSDN Library 中搜索该类。这是[.NET 4 的 MembershipProvider 页面](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider%28v=vs.100%29.aspx)所说的：

> **命名空间：** System.Web.Security
> **程序集：** System.Web.ApplicationServices（在 System.Web.ApplicationServices.dll 中）

这是[.NET 3.5 的 MembershipProvider 页面](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider%28v=vs.90%29.aspx)所说的：

> **命名空间：** System.Web.Security
> **程序集：** System.Web（在 System.Web.dll 中）

# android - 分析 Android 内存使用情况。

> ID：11161205
> 
> 赞同：0
> 
> 时间：2012-06-22T17:25:21.127
> 
> 标签：android, memory

当我的应用程序运行时，任务管理器显示 10MB 的 RAM 使用量。我想分析它，但是当我创建 hprof 转储时，它只显示总共 2MB。谁能指出我正确的方向，其他 8MB 来自哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:34:35.810

您可以使用 DDMS 获得更准确的结果。这种差异可能来自不同的查询。已用内存和保留（但可用）内存之间存在差异。也许TaskManager（我不太相信）显示了空白空间，而hprof也显示了保留空间。

# php - PHP & Mysql 如何从一个字段返回多个值

> ID：11161206
> 
> 赞同：1
> 
> 时间：2012-06-22T17:25:22.953
> 
> 标签：php, mysql

请原谅我的新手问题。

我正在尝试将 mysql 表中的数据显示到图表中（phpChart [http://phpchart.net](http://phpchart.net)）我需要的是显示区域“CA”的所有字段成本值

例如

```
ID  Cost  Region
----------
1   500    CA
----------
2   100    DP
----------
3   280    CA
----------
4   40     ST
----------
5   80     CA
----------

<?php
include 'config.php';
$query = "SELECT Cost From tblForecast where Region='CA' =";
$rs = mysql_query($query);

if (!$rs) {
    echo "Could not execute query: $query";
    trigger_error(mysql_error(), E_USER_ERROR); 
} else {
    echo "Query: $query executed\n";
} 

$nrows = mysql_num_rows($rs);

for ($i = 0; $i < $nrows; $i++) {
    $row = mysql_fetch_row($rs);
    echo $row[0];
    echo "<br/>";
}

$pc = new C_PhpChartX(array(array($row[0])),'basic_chart');
\\"This where i'm stuck as to how display the other values within the array"

$pc->set_title(array('text'=>'Basic Chart with Bar Renderer'));
$pc->set_series_default(array('renderer'=>'plugin::BarRenderer'));

$pc->draw();
mysql_close();

?> 
```

我只能在图表中显示第一行值。

任何人的帮助将不胜感激提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T17:29:27.747

您不断地将查询结果提取到单个变量中，并在循环的每次迭代中覆盖该数据。

试试这个：

```
$data = array();
while ($row = mysql_fetch_array($rs)) {
   $data[] = $row[0];
}

$pc = new C_PhpChartX($data, 'basic_chart'); 
```

另外，尽管这很可能是剪切/粘贴类型，但无论如何您的查询中都会出现语法错误：

```
$query = "SELECT Cost From tblForecast where Region='CA' =";
                                                         ^---syntax error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:33:12.393

你可以使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
include 'config.php';
$query = "SELECT GROUP_CONCAT(Cost) cost
         From tblForecast
         where Region='CA'";
$rs = mysql_query($query);
$row = mysql_fetch_row($rs);
echo $row['cost'] 
```

# ruby - 从 Ruby 调用 Mongoexport

> ID：11161210
> 
> 赞同：0
> 
> 时间：2012-06-22T17:25:34.317
> 
> 标签：ruby, mongodb

就像在 Ruby 中调用 Mongo 函数一样，如何从 Ruby 中使用 Mongoexport。现在我正在通过系统调用做 mongoexport

```
system("/mongodb/bin/mongoexport -d surya -c users -q \"#{query}\"  -o "test.json"") 
```

我想调用 mongoexport 就像我们调用 mongo 命令一样。

```
@coll3 = @db.collection("tasks")
data3 = @coll3.find({"parameters.user2"=>username}) 
```

我不想使用系统调用，因为我担心它可能不适用于所有平台或所有版本。

有没有办法像其他 mongo 命令一样做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:28:21.270

`mongoexport`是命令行实用程序，而不是命令。但它的核心非常简单：读取所有文档，将它们转储到文件中。

如果你不想使用系统调用，那么你可以复制它的基本功能。我会说，它不到 100 行代码。

> 它可能不适用于所有平台或所有版本

您关注哪些平台？如果你在谈论 mongo 版本，那么`mongoexport`某些版本应该与`mongod`相同版本兼容（至少）。

我认为你正在想象那里的问题。最好花时间做一些有用的事情:)

# css - 为什么overflow-x:hidden 会夹住我的后代？

> ID：11161216
> 
> 赞同：21
> 
> 时间：2012-06-22T17:25:49.263
> 
> 标签：css, overflow

我想要一个带有`overflow-x:hidden`and的标题元素`overflow-y:visible`。但是，由于某种原因，该`overflow-y`属性似乎没有被遵守。您可以在此处观察（在 Chrome 和 Firefox 上测试）：http: [//jsfiddle.net/YgsAw/3/](http://jsfiddle.net/YgsAw/3/)

在那个演示中，我希望看到“jjjjj”，但 j 被截断，看起来更像 1。

如果我`overflow-x:visible`在`h1`标签上设置，那么突然可以看到文本的整个高度，但是设置`overflow-x:hidden`会使其被剪裁。我希望这种行为来自`overflow-y`，但这似乎没有效果。为什么会这样，我该怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T20:45:25.937

[我在上一个问题](https://stackoverflow.com/questions/5072467/why-does-overflow-yhidden-affect-the-visibility-of-items-overflowing-on-the-x)中找到了一些答案。根据[规格](http://www.w3.org/TR/css3-box/#overflow)：

> 和的计算值`overflow-x`与`overflow-y`它们的指定值相同，除了某些组合`visible`是不可能的：如果一个被指定为`visible`，另一个是`scroll`或`auto`，则`visible`设置为`auto`。的计算值`overflow`等于`overflow-x`if的计算值`overflow-y`相同；`overflow-x`否则它是和的计算值对`overflow-y`。

此外，在[此页面上](http://www.brunildo.org/test/Overflowxy2.html)，作者提到许多浏览器施加了额外的限制：

> 在 Gecko、Safari、Opera 中，当与“隐藏”组合时，“可见”也变为“自动”（换句话说：当与“可见”不同的任何其他内容组合时，“可见”变为“自动”）。

同一页面还提供了可以观察到这种效果的所有可能组合的演示。

对于我的情况，我不知道可行的解决方法。

**编辑**

我很确定我可以通过将我的标题标签嵌套在另一个标签中来做我想做的事情：`<div><h1>title</h1></div>`. 内部`h1`必须`line-height:normal`使所有内容垂直可见，并`overflow:hidden`使其截断。外部元素可以具有严格限制的高度和`overflow:visible`. 这并不理想，但它似乎是最好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T18:12:39.067

似乎将 H1 元素更改为内联元素将为您提供所需的结果：

```
h1 {
    margin: 10px;
    padding: 0;        
    overflow-x: hidden;
    overflow-y: visible;
    line-height: 0.5em;
    display:inline;
} 
```

只需确保以下元素是块元素，因此它不会在同一行开始。或者使用正确的行高，然后使用负边距。毕竟，我只能猜到你想做什么......祝你好运！

# html - 在预标签中插入图像标签

> ID：11161218
> 
> 赞同：2
> 
> 时间：2012-06-22T17:25:54.560
> 
> 标签：html, pre

我正在使用 pre 标签在网页上编写代码示例问题是，当我有类似的东西时

```
<img src="foo.jpg"> 
```

浏览器实际生成图像。如何在没有图像的情况下显示图像标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T17:28:24.090

使用 HTML 实体而不是角度引号：

```
<pre>&lt;img src="foo.jpg"&gt;</pre> 
```

`<pre>`标签只保留空格，其中的 HTML 标签仍然被渲染

# jquery - 选择文件对话框关闭后提交表单

> ID：11161225
> 
> 赞同：1
> 
> 时间：2012-06-22T17:26:33.767
> 
> 标签：jquery, triggers, dialog, form-submit

完成“文件选择”后，我需要提交我的上传文件表格。
我的文件输入是，

```
<input type="file" id="myfile" name="myfile" /> 
```

我的表格是

```
<form id="uploadform" action="includes/upload_img.php" ......"> 
```

我正在使用这种方法：

*   我正在动态创建表单和 i-frame（通过图像点击 - img.sendimage）
*   执行选择文件对话框（在表单中创建）
*   通过 PHP 将选定的文件发送到目录和
*   显示返回的消息

但是，当我触发“选择文件对话框”并选择一个文件时，表单正在（立即）提交而没有选择文件。

我的代码如下所示：

```
$("img.sendimage").live('click',function(){
    $('<form id="uploadform" action="includes/upload_img.php" method="post" enctype="multipart/form-data" target="uploadframe" style="position: absolute;top: -1000px;">
    <input type="file" id="myfile" name="myfile" />
    <input type="submit" value="Submit" />
    <iframe id="uploadframe" name="uploadframe" src="includes/upload_img.php" width="0" height="0" scrolling="no" frameborder="0" style="visible:false;"></iframe>
    </form>').appendTo("body");
    $('#myfile').click();
    $('#uploadform').submit();
}); 
```

#myfile 输入关闭（并且文件也被选中）后，如何触发表单提交事件？

注意：如果我在单独的单击事件上使用相同的方法（例如；单击一个按钮以选择一个文件，然后单击另一个以发送选定的文件），则没有问题。它正在工作，但是当我立即触发事件时，没有成功。

马上谢谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:01:37.850

我已经用[那个](https://stackoverflow.com/a/4856946/218010)解决方案解决了我的问题。

# android - Android 设备的 VLAN

> ID：11161227
> 
> 赞同：2
> 
> 时间：2012-06-22T17:26:36.453
> 
> 标签：android, networking

有谁知道我可以为我的 Android 设备设置 VLAN 的方法吗？Android 自带的busybox 版本`iproute2`是`ip link add ...`不允许的，`ip`会声称这`add`是一个无效的命令。也没有副本`vconfig`。Android内核甚至支持VLAN吗？如果是这样，在 Android 上获取用于管理 VLAN 的用户空间工具的最简单方法是什么。我在 2.3.3 版上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:01:25.117

除了在 IP Header 中设置 DiffServ/TOS 字段外，Android 4.0.4 自动使用 VLAN 标记 (IEEE_802.1Q)。

较旧的 Android 版本（与 2.2.1 和 2.3.3 确认）似乎忽略了这些数据包 - 一种解决方案可能是在这些较旧的 Android 版本上启用 VLAN。

# programming-pearls - 最大子数组

> ID：11161234
> 
> 赞同：0
> 
> 时间：2012-06-22T17:27:13.423
> 
> 标签：programming-pearls

在“编程珍珠”第8栏。存在最大子数组问题。

**问题 ：**

输入是一个包含 n 个浮点数的向量 x；输出是在输入的任何连续子向量中找到的最大和。为了完成问题定义，我们将说当所有输入为负时，最大和子向量是空向量，其和为零。

**最有效的解决方案：**

```
maxsofar = 0
maxendinghere = 0
for i = [0, n)
    maxendinghere = max(maxendinghere+x[i], 0)
    maxsofar = max(maxsofar, maxendinghere) 
```

**本专栏有一个练习：** 我们将负数数组的最大子向量定义为零，即空子向量之和。*假设我们将最大子向量定义为最大元素的值*；您将如何更改各种程序？

**我对这个练习有两个问题** （1）我对“假设我们已经将最大子向量定义为最大元素的值”感到有点困惑。这是否意味着负数数组的最大子向量是数组中的最大元素？

例如：数组：[-1 -2 -3]，最大子向量：-1 数组：[-1 2 3]，最大子向量：[2 3]

对不起这个愚蠢的问题，英语不是我天真的语言。

(2)作者给出了解决方案：“将赋值maxsofar=0替换为maxsofar = -infinity。” 根据我对问题的理解，这个解决方案似乎是不正确的。

例如：数组：[-1 -2 -3]，答案应该是-1。但是根据解决方案，它是0。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:33:47.593

我同意你的看法。如果作者的解决方案只是改变 maxsofar 的初始化，那么它根本不会改变算法。

# sql - Magento 访问 SQL 数据库

> ID：11161236
> 
> 赞同：2
> 
> 时间：2012-06-22T17:27:23.677
> 
> 标签：sql, magento

我正在为 Magento 开发一个模块，该模块涉及获取每个提交的订单的总价格并将其存储在 SQL 表中。我的第一直觉是使用原始 SQL 命令来执行此操作，但根据我迄今为止阅读的有关该主题的大多数 Magento 文章，似乎我应该使用 Magento/Zend 类来执行此操作。

我将如何使用 Magento 类访问 SQL 数据库，这样做有什么好处而不是仅使用原始 SQL 命令？

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:57:28.747

关于“为什么使用 ORM/ActiveRecord 比使用原始 SQL 更好”的问题的答案与“为什么我需要使用 MVC 或编程模式？”的答案相同。这是一个有点哲学的问题，所以你可以使用谷歌找到很多关于它们的答案。

您必须创建业务和资源模型。此外，您还需要使用模块 etc 文件夹中的 config.xml 文件以及每个模型类的 _construct 方法将资源模型分配给业务模型。

例如，您有一个具有**My_Module_Model_Bussines**和资源类**My_Module_Model_Resource_Bussines**的业务类。这些类的最小实现（并且必须是）是

**第一个**：

```
class My_Module_Model_Business extends Mage_Core_Model_Abstract
{

    protected function _construct()
    {
        $this->_init('my_module/business');
    }
} 
```

**第二**：

```
class My_Module_Model_Resource_Business extends Mage_Core_Model_Mysql4_Abstract
{
    protected function _construct()
    {
        $this->_init('my_module/table', 'id');
    }
} 
```

其中每个类中方法 _init 的第一个参数是 XML 配置中的 xpath，第二个参数（在资源类中）是主键名称。

同样在 config.xml 你必须有这样的东西：

```
<?xml version="1.0"?>
<config>
    <modules>
        <My_Module>
            <version>YOUR_VERSION_OF_MODULE(e.g. 0.0.1)</version>
        </My_Module>
    </modules>
    <global>
        <models>
            <my_module>
                <class>My_Module_Model</class>
                <!-- name of the resource model node -->
                <resourceModel>my_module_resource</resourceModel>
            </my_module>
            <my_module_resource>
                <class>My_Module_Model_Resource</class>
                <entities>
                    <table>
                        <table>your_table_name</table>
                    </table>
                </entities>
            </my_module_resource>
        </models>
    <!-- another config nodes -->
    </global>
</config> 
```

之后你可以使用这样的东西：

```
Mage::getModel('my_module/business')->setFirstField('some data')
   ->setTotal('100.1')
   ->setOrderId(10)
   ->save(); 
```

如果您使用比 1.5.1 更新的 Magento 版本，则需要将类名中的**Mysql4更改为****Resource**

# c - 快速 ARM NEON memcpy

> ID：11161237
> 
> 赞同：4
> 
> 时间：2012-06-22T17:27:35.103
> 
> 标签：c, assembly, arm, memcpy, neon

我想在 ARMv7 内核上复制图像。天真的实现是每行调用 memcpy。

```
for(i = 0; i < h; i++) {
  memcpy(d, s, w);
  s += sp;
  d += dp;
} 
```

我知道以下

```
d, dp, s, sp, w 
```

都是 32 字节对齐的，所以我的下一个（仍然很天真）实现是沿着

```
for (int i = 0; i < h; i++) {
  uint8_t* dst = d;
  const uint8_t* src = s;
  int remaining = w;
  asm volatile (
    "1:                                               \n"
    "subs     %[rem], %[rem], #32                     \n"
    "vld1.u8  {d0, d1, d2, d3}, [%[src],:256]!        \n"
    "vst1.u8  {d0, d1, d2, d3}, [%[dst],:256]!        \n"
    "bgt      1b                                      \n"
    : [dst]"+r"(dst), [src]"+r"(src), [rem]"+r"(remaining)
    :
    : "d0", "d1", "d2", "d3", "cc", "memory"
  );
  d += dp;
  s += sp;
} 
```

在大量迭代中，它比 memcpy 快 150%（在不同的图像上，因此不利用缓存）。我觉得这应该远非最佳，因为我还没有使用预加载，但是当我这样做时，我似乎只能使性能大大降低。有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T16:46:55.910

ARM 对此有很好的技术说明。

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka13544.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka13544.html)

您的性能肯定会因微架构而异，ARM 的注释在 A8 上，但我认为它会给您一个不错的想法，底部的摘要是对各种优缺点的很好讨论，而不仅仅是常规数字，例如哪些方法导致寄存器使用量最少等。

是的，正如另一位评论者所提到的，预取很难做到正确，并且在不同的微架构下工作方式不同，这取决于缓存有多大、每行有多大以及有关缓存的许多其他细节设计。如果你不小心，你最终可能会颠簸你需要的线条。对于可移植代码，我建议避免使用它。

# python - 比较谷歌应用引擎数据存储中的许多日期范围（多对多，Python）

> ID：11161238
> 
> 赞同：1
> 
> 时间：2012-06-22T17:27:37.593
> 
> 标签：python, google-app-engine, python-2.7, datastore, date-range

我在谷歌应用引擎数据存储中有两个数据集。

```
class First_Set(db.Model):
  start_time = db.DateTimeProperty()
  end_time = db.DateTimeProperty()
  data1 = db.FloatProperty()
  ...

class Second_Set(db.Model):
  start_time = db.DateTimeProperty()
  end_time = db.DateTimeProperty()
  data2 = db.FloatProperty()
  ... 
```

（他们有其他不同的数据，这就是他们在不同数据集中的原因。）

我想在两个数据集中找到所有重叠的 start_time 和 end_time 的数据存储 ID，理想情况下不要从一个数据集中提取结果并在另一个数据集上迭代第一个结果。

初始数据集的一个很好的可视化来自[这里](http://www.artfulsoftware.com/infotree/queries.php#807)（它也有在 SQL 中解决的问题）：

```
1     |-----| 
2        |-----| 
3                 |--| 
4                       |-----| 
5                          |-----| 
6                                  |---| 
7                                        |---|  
8                           |---| 
9                                       |-----| 
```

我需要的最终结果是（来自同一个[例子](http://www.artfulsoftware.com/infotree/queries.php#807)）：

```
+----+---------------------+----+---------------------+ 
| id | start               | id | end                 | 
+----+---------------------+----+---------------------+ 
|  2 | 2008-09-01 15:02:00 |  1 | 2008-09-01 15:04:00 | 
|  5 | 2008-09-01 16:19:00 |  4 | 2008-09-01 16:23:00 | 
|  8 | 2008-09-01 16:20:00 |  4 | 2008-09-01 16:22:00 | 
|  8 | 2008-09-01 16:20:00 |  5 | 2008-09-01 16:22:00 | 
|  7 | 2008-09-01 18:18:00 |  9 | 2008-09-01 18:22:00 | 
+----+---------------------+----+---------------------+ 
```

SQL 解决方案在下面的示例中进行了描述，但由于缺少 JOIN，我无法在数据存储中执行此操作：

```
SELECT v1.id, v1.start, v2.id, LEAST(v1.end,v2.end) AS end 
FROM visits v1 
JOIN visits v2 ON v1.id <> v2.id and v1.start >= v2.start and v1.start < v2.end  
ORDER BY v1.start; 
```

我知道使用 ListProperty() 的一对多版本相当简单（来自[这个问题](https://stackoverflow.com/questions/3860571/using-the-app-engine-datastore-to-find-overlapping-ranges)）。

谁能想到找到重叠时间的解决方案（最好是在 Python 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:11:05.610

查看[Marzullo 的算法](http://en.wikipedia.org/wiki/Marzullo%27s_algorithm)，其时间效率为 O(n log n)。
Stackoverflow上也有[许多问题](https://stackoverflow.com/questions/4542892/possible-interview-question-how-to-find-all-overlapping-intervals)涉及重叠间隔，可用于解决您在 AppEngine 上的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:51:41.897

多亏了 Shay 的指导，我发布了没有 JOIN 的解决方案。应该能够通过少量编辑找到任意数量的数据集的重叠（至少这是理论）。

我的 Python 不是那么好，但下面应该给出这个想法：

```
from operator import itemgetter

class Find_Overlaps(webapp2.RequestHandler):
    def get(self):
        all_dates = []
        first_dates = db.GqlQuery("SELECT * FROM First_Set")
        for date in first_dates:
            row = {'dataset':'First_Set', 'dbkey':date.key(), 'offset':date.start_time, 'type': -1}
            all_dates.append(row)
            row = {'dataset':'First_Set', 'dbkey':date.key(), 'offset':date.end_time, 'type': 1}
            all_dates.append(row)

        second_dates = db.GqlQuery("SELECT * FROM Second_Set")
        for date in second_dates:
            row = {'dataset':'Second_Set', 'dbkey':date.key(), 'offset':date.start_time, 'type': -1}
            all_dates.append(row)
            row = {'dataset':'Second_Set', 'dbkey':date.key(), 'offset':date.end_time, 'type': 1}
            all_dates.append(row)

        newlist = sorted(all_dates, key=itemgetter('offset','type'))
        number_datasets = 2 #goal is to find overlaps in all sets not only the best overlaps, that's why this is needed
        loopcnt = 0
        update_bestend = 0
        overlaps = []
        for row in newlist: #Below is mostly from Marzullo's alghorithm
            loopcnt = loopcnt - row['type']#this is to keep track of overall tally
            if update_bestend == 1:
                if loopcnt == (number_datasets - 1):
                    bestend = row['offset']
                    end_set = row['dataset']
                    end_key = row['dbkey']
                    overlaps.append({'start':beststart,'start_set':start_set,'start_key':start_key,'end':bestend,'end_set':end_set,'end_key':end_key})
                    update_bestend = 0
            if loopcnt == number_datasets:
                beststart = row['offset']
                start_set = row['dataset']
                start_key = row['dbkey']
                update_bestend = 1

        for overlap in overlaps: #just to see what the outcome is
            self.response.out.write('start: %s, start_set: %s, end: %s, end_set: %s<br>' % (overlap['start'], overlap['start_set'], overlap['end'], overlap['end_set'])) 
```

# macos - osX 和 html5 不兼容

> ID：11161239
> 
> 赞同：1
> 
> 时间：2012-06-22T17:27:39.460
> 
> 标签：macos, html

我使用 html5 创建了一个示例 hello world 代码，并尝试在 osX 上的 firefox、chrome 和 safari 上运行它。当我尝试在屏幕上查看它时，我没有看到输出，而是看到了整个 html 代码。相同的代码似乎在 ubuntu 机器上运行良好。我也检查了我当前浏览器的兼容性，它们似乎是兼容的。

这是我正在使用的代码

```
 <!DOCTYPEhtml>
 <html lang="en">
<head>
    <title>Hello World</title>
</head>
<body>
    <h1>Hello World</h1>
    <p>
        Jamie was here.
    </p>
</body> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:31:08.603

DOCTYPE 和 html 之间应该有一个空格，如下所示：

```
 <!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T17:31:34.747

你的第一行是假的。

尝试这个：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>Hello World</title>
</head>
<body>
    <h1>Hello World</h1>
    <p>
        Jamie was here.
    </p>
</body>
</html> 
```

此外，这并不是真正的 HTML5 特定的 HTML，而只是纯 HTML。

# macos - Mono：使用 Mac 安装程序更改“解包”目录

> ID：11161246
> 
> 赞同：0
> 
> 时间：2012-06-22T17:27:59.947
> 
> 标签：macos, mono, monomac

我在 MonoDevelop 中创建了一个应用程序，该应用程序运行正常（据我所知），因为我通过 MoMA 运行它，它基本上是来自 Windows 的直接端口。

我将 MonoDevelop 降级到 2.8，因此我可以使用“创建 Mac 安装程序”，因为 mkbundle 失败了很多，并且互联网上几乎没有关于它所具有的错误的信息（mkbundle 在 OS X 10.7 上运行以构建 OS X 应用程序）

所以，基本上，在降级之后，我终于把它正确打包并创建了一个安装程序。安装程序工作。我在终端中运行“安装程序”以测试它是否正常工作，并且确实如此。

安装位置除外。它将 .app 文件“解包”到项目的 bin 文件夹中。这必须是某个地方的设置，因为我正在从我的 Dropbox 文件夹运行安装程序，该文件夹甚至不包含该项目。

我的问题是：如何更改 .app 文件将部署到的目录？（如果我把它放在哪里很重要，它将成为一个守护进程，请告诉我，因为在此之前我从未为 OS X 开发过。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:59:31.580

不必要。

打包程序将查找预先存在的 .app 并覆盖它，而不是将其放在 /Applications 中。

问题是开发者的机器上总会有一个 .app 文件。一切都会正常工作，只是无法在开发机器上正常工作。

# java - 设置 JAVA_HOME

> ID：11161248
> 
> 赞同：4
> 
> 时间：2012-06-22T17:28:09.973
> 
> 标签：java, windows, command-line, environment-variables

从命令行运行使用 Java 的程序时遇到问题。我收到一条消息，说找不到 Java.exe。

![在此处输入图像描述](../Images/b9ce7628942f519c03f23de0d08506c1.png)

我已经按照[在 Windows 7 中设置 JAVA_HOME 的几个地方的说明进行操作](https://confluence.atlassian.com/display/CONF26/Set+JAVA_HOME+variable+in+Windows)。

![在此处输入图像描述](../Images/fcaa6ca181cd59d529381ac1de5da7bb.png)

从图像中可以看出，我按照指示指向 JDK 文件夹，我还尝试了几种变体，包括链接到 bin 文件夹（java.exe 所在的位置）。

我在做什么错，我该如何调试。

*编辑：*

在命令提示符输出中键入 Set

![在此处输入图像描述](../Images/f0052ecaf523b89760ebf1b3669b3cca.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T17:29:29.230

确保 jdk.xxxxx/jre/bin 文件夹在您的 PATH 中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:46:06.477

正如许多人提到的，我不得不补充......

```
C:\Program Files\Java\jdk_version\bin 
```

...到路径变量。

但是没有提到并且阻止它工作的是我必须确保 java\bin 目录位于 windows\system32 目录之前的路径语句中，否则这将不起作用。

我能够在[这里](https://stackoverflow.com/a/5734845/773263)找到信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-10T12:35:06.007

1.  设置**JAVA_HOME**变量

    **Windows 7** – 右键单击​​我的电脑并选择属性 > 高级

    **Windows 8** – 转到控制面板 > 系统 > 高级系统设置

    **Windows 10** – 搜索环境变量，然后选择编辑系统环境变量

[![在此处输入图像描述](../Images/0e6bf7badaa7f58271183c3da26d3837.png)](https://i.stack.imgur.com/WAorQ.png)

2.  单击**环境变量**按钮。

3.  在**系统变量**下，单击**新建**。

4.  在**变量名称**字段中，输入：

    **如果您安装了 JDK（Java 开发工具包），则为**JAVA_HOME****

     **或者

    **如果您安装了 JRE（Java 运行时环境），则为**JRE_HOME 。**在**变量值**字段中，输入您的 JDK 或 JRE 安装路径。**** 

 ****[![在此处输入图像描述](../Images/2d5619165cace8d196619fe2b4d8dc33.png)](https://i.stack.imgur.com/KOB4s.png)

5.  **以管理员**身份打开命令提示符。

6.  将**Environment 变量**的值设置为您的 JDK（或 JRE）安装路径，如下所示：

    > setx -m JAVA_HOME "C:\path_to_Java\jdk_version"

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-01-11T05:33:40.620

如果您**没有管理员权限，请使用以下命令使用****命令提示符**为 java 设置环境变量

 **```
setx JAVA_HOME "C:\Program Files\Java\jdk1.8.0"
setx PATH "%PATH%;%JAVA_HOME%\bin"; 
```

**修改**环境变量。

```
setx -m JAVA_HOME "C:\Program Files\Java\jdk1.8.0"
setx -m PATH "%PATH%;%JAVA_HOME%\bin"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T17:34:18.393

在桌面上，右键单击计算机图标。

**1.**从上下文菜单中选择**属性。**
**2.**单击**高级系统设置**链接。
**3.**单击**环境变量**。在**System Variables**部分中，找到**PATH 环境** 变量并选择它。单击编辑。如果 PATH 环境变量不存在，请单击新建。
**4.**在**编辑系统变量**（或新系统变量）窗口中，指定 PATH 环境变量的值。单击确定。单击确定关闭所有剩余的窗口。

有关更多详细信息.. [PATH 和 CLASSPATH](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T17:36:42.597

2个错误：

*   您缺少该`bin`文件夹。通常正确的路径是`C:\Program Files\Java\jdk_version\bin`

*   `JAVA_HOME`通常由某些脚本或程序使用，如果您对运行 java 工具感兴趣，则`cmd`必须将该目录添加到`PATH`******

# javascript - 如何在 node/express 中管理配置

> ID：11161250
> 
> 赞同：1
> 
> 时间：2012-06-22T17:28:13.873
> 
> 标签：javascript, node.js, express

我想从我的 app.js 中删除配置并将其拆分为多个文件：

`/config/app.js`（对于整个`app.configure(function(){});`）

和`/config/view.js`（用于模板引擎配置）

不幸的是，javascript 不知道任何包含函数，我想避免自己编写。

那么从配置中拆分配置的最佳方法是什么`app.js`？

**配置.js**

```
module.exports = function(app, express, passport){
app.configure(function(){
    app.use(express.logger());
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.session({ secret: 'kitty'}));
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
    app.use(express.errorHandler());
    app.set('views', __dirname + '/views');
    app.set('view options', { layout: false });
});
};

var config = require('./config/app.js')
var app = module.exports = express.createServer(); 
```

**应用程序.js**

```
var app = express.createServer();
var config = require('./config/app.js')(app, express, passport); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:09:58.687

你好像用`require`错了。像这样做：

**应用程序.js**

```
var app = express.createServer();
var config = require('./config')(app); 
```

**配置.js**

```
module.exports = function(app) {
    app.configure(function () {
        app.use(express.logger());
        /* etc */
    });
}; 
```

# java - twilio 上的 Java 获取方法

> ID：11161257
> 
> 赞同：0
> 
> 时间：2012-06-22T17:28:38.043
> 
> 标签：java, jsp, servlets, get, twilio

我正在使用 Twilio API 在我的应用程序中做一些事情。我想录制用户语音并将其发送到 java 文件。因此，服务器上有一个 XML 文件，其中有 get 方法，它将数据发布到 java 文件，java 文件将对其进行操作。像-> [http://www.twilio.com/docs/api/twiml/record#examples-2](http://www.twilio.com/docs/api/twiml/record#examples-2)

那么如何使用 Java 来完成，我想从这个文件中获取记录，而不是使用 .php 文件，我必须使用 Java 技术。

如何实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:35:45.257

我想你指的是

```
<Record
action="http://foo.edu/handleRecording.php"
method="GET"
maxLength="20"
finishOnKey="*"
/> 
```

在示例中。action 属性定义了将调用的回调方法。如果您将其更改为

```
<Record
action="http://foo.edu/handleRecording.jsp"
method="GET"
maxLength="20"
finishOnKey="*"
/> 
```

将调用一个 JSP 页面。这绝对是语言中立的，他们只是以 php 为例。

无论使用什么语言`action`的代码，它都必须是符合[其规范](http://www.twilio.com/docs/api/twiml/record#attributes-action)的服务，即代码必须能够处理它将接收的三个参数`RecordingUrl`，`RecordingDuration`和`Digits`。请参阅（优秀的）文档。

# android - 我可以将通过 Expression Blend 创建的 Storyboard 用于 WP7.5 进行 Android 开发吗？

> ID：11161273
> 
> 赞同：0
> 
> 时间：2012-06-22T17:29:57.100
> 
> 标签：android, windows-phone-7, windows-phone-7.1, xamarin.android

我创建了一个 Windows Phone 7.5 Silverlight 应用程序。大多数设计和动画都是使用 Expression Blend 完成的。

这是一个故事书应用程序，用户可以在其中从一个页面导航到另一个页面。每个页面都有 4-5 个故事板动画正在运行（ScaleX、Y、TransformX、Y、Rotation 等）。当单击某些元素时，我也会播放 SoundEffect。

现在我计划为 Android 手机提供相同的应用程序。我读了一些关于商业产品[MonoforAndroid](http://xamarin.com/monoforandroid)的信息。

我可以使用 monoForAndroid 重用哪些代码和所有代码？我相信导航和播放声音应该不难，但我主要关心故事板动画。请问有什么建议吗？

或者

我是否应该使用传统的 Android 开发方式从头开始开发它。（到目前为止，我对android dev一无所知）。

谢谢你的时间。

**更新：** 例如，我的应用程序有一个页面，该页面有一个文本块和一些图像元素，其中大部分都带有某种动画。用户可以拖动页面上的元素并单击某些元素播放小音频剪辑。那么想知道 MVVM 如何适应这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:55:37.190

如果您在 UI 和模型之间有很好的分离（并且 ViewModel 是您实现了 MVVM 模式），您应该能够重用所有模型 + ViewModel 层。但是，您需要重写 UI 部分，因为每个平台都有不同的 UI 元素框架。[如何开发跨平台](http://ndc2011.macsimum.no/mp4/Day2%20Thursday/Track4%201620-1720.mp4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:46:37.910

对您的问题的简短回答是：不，您不能。

通过使用 Mono for Android，您将能够跨不同平台共享非 UI 和非平台代码，但您仍然可以在此共享基础之上为您所针对的每个平台开发本机 UI。Mono for Android 提供了与底层 Android SDK 的完整绑定，允许您通过 C# 而不是 Java 定义此本机 UI。通过使用这种方法，您可以提供原生体验，而无需每次都重写核心应用程序逻辑。在这种情况下，听起来您希望共享 UI 本身，而不是业务逻辑。

# android - 为xml中的布局指定边框，只有左右边缘可见

> ID：11161278
> 
> 赞同：1
> 
> 时间：2012-06-22T17:30:19.083
> 
> 标签：android, view, border, line, shape

我目前使用矩形 xml 标记为我的视图指定边框，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
  <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
    <stroke android:width="1dp" android:color="#FF000000"/> 
    <padding android:left="0dp" android:top="0dp" android:right="0dp" android:bottom="0dp"/>
    <solid android:color="#DDDDDD"/>
  </shape> 
```

这适用于视图所有 4 个边缘上的正常边框，但我想要的是类似的东西，它只显示视图左右边缘的边界线，顶部或底部没有线......我在形状类中查看了可绘制的线条，但它似乎只能做水平线，对吗？为什么不能指定垂直线？

有一个更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:38:05.677

使用 9-patch 图像，左右两侧有边框，中间有透明空间。那会产生你的效果。

# android - Android NumberPicker 如何查找更改的金额？

> ID：11161282
> 
> 赞同：1
> 
> 时间：2012-06-22T17:30:36.600
> 
> 标签：android, android-widget, android-ui

我想显示从用户开始滚动到最终值时数字选择器值的变化量。我找到了 OnValueChangeListener 但问题是它会在每个滚动过去的数字上被调用，而我想要值的总变化。我查看了 OnScrollListener ，但这似乎也不是我想要的。

当用户第一次开始滚动时会触发一个事件吗？同样，当数字选择器停止旋转时的事件？

似乎它应该很容易实现，但我正在努力。例如 NumberPicker 从 20 的初始值开始，用户滚动到 11，因此更改的数量为 9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:36:36.700

答案真的很简单......只需存储初始值和最终值并取两者之间的差异。

1.  在膨胀/实例化 之前`NumberPicker`，请注意其初始起始值。例如，创建一个私有实例变量`private int mInitialValue`。然后，当您`NumberPicker`将初始值设为 20 时，

    ```
    mInitialValue = 20; 
    ```

2.  当用户退出活动时（或当您确定已设置“最终”值时），存储其值（即`mFinalValue`）。然后用 取差值`mFinalValue - mInitialValue`。

# objective-c - 制作 Global NSUinteger - 目标 c

> ID：11161286
> 
> 赞同：0
> 
> 时间：2012-06-22T17:30:52.373
> 
> 标签：objective-c, ios

如何使以下 NSUinteger 成为实例变量，以便我可以在整个班级中访问它？

```
NSUInteger indexArr[] = {1,2,3,4}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:35:29.727

我认为在Objective C中进行此类初始化的唯一真正方法是将NSUinteger indexArr [4]放在对象的接口描述中，然后在init例程中使用循环对其进行初始化！

例子：

在您的对象头文件 myObject.h

```
@interface myObject{
    NSUInteger indexArr[4];
}

@end 
```

在您的 myObject.m 文件中

```
@implementation myObject

-(id)init{
    self = [super init];

    for(int i = 1; i < 5; i++)
        indexArr[i] = i;

    return self;
}

@end 
```

# javascript - 移动 Safari 键盘表单提交

> ID：11161289
> 
> 赞同：5
> 
> 时间：2012-06-22T17:30:59.160
> 
> 标签：javascript, mobile, mobile-safari

我有一个基本`form`的 a`search input`和 a `submit button`inside。当焦点发生在 中时`input`，键盘将按预期显示。当我按下`button`时，会发生表单提交事件，我在其中调用`event.preventDefault()`并进行 ajax 调用。但是，当我按下键盘上的**搜索**按钮时，键盘只是隐藏并且没有发生提交事件。

为什么我在键盘上按搜索时表单不提交？如何通过键盘搜索按钮触发此事件？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T20:33:00.413

键盘搜索按钮必须绑定到 keypress 事件并且`keycode`具有`13`.

基本上，监听`keypress`事件并返回所有呼叫，除了`e.which === 13`

```
$('input').on('keypress', function ( e ) {
    if ( e.which !== 13 ) {
        return;
    }

    // ajax code
} 
```

# c++ - 检索标签之间的值 XML Xerces C++ Parser

> ID：11161290
> 
> 赞同：1
> 
> 时间：2012-06-22T17:31:02.023
> 
> 标签：c++, c, xml, xerces

我目前正在使用 Xerces 库来解析 C++ 中的 XML 文件。我已经编写了算法解析器，唯一缺少的是如何检索两个标签之间的值？例如 `<name>John</name>`，我希望能够获得 John 的值，因此我可以将其存储在我为此目的而拥有的字符串变量中。我知道使用

```
DOMElement * current = root->getFirstChildElement();
const XMLCh * tag = current->getTagName();
cout << XMLString::transcode(tag) << endl; 
```

我将能够打印该标签，但我对标签之间的值更感兴趣。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T22:49:43.400

`DOMNode::getTextContent()`会从你的例子中给你**约翰**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:11:42.280

你试过`current->getNodeValue()`吗？

# python - 告诉我这个 python 代码有什么问题？

> ID：11161292
> 
> 赞同：0
> 
> 时间：2012-06-22T17:31:06.890
> 
> 标签：python

我对编码比较陌生，所以请在这里帮助我。代码只会运行到第 5 行。这段代码可能是一个通通的，但请幽默我。

编辑：没有例外，没有任何反应。在要求我在 1 和 2 之间进行选择后，代码就停止了。

```
print('This program will tell you the area some shapes')
print('You can choose between...')
print('1\. rectangle')
print('or')
print('2\. triangle')

def shape():
    shape = int(input('What shape do you choose?'))

    if shape == 1: rectangle
    elif shape == 2: triangle
    else: print('ERROR: select either rectangle or triangle')

def rectangle():
    l = int(input('What is the length?'))
    w = int(input('What is the width?'))
    areaR=l*w
    print('The are is...')
    print(areaR)

def triangle():
    b = int(input('What is the base?'))
    h = int(input('What is the height?'))
    first=b*h
    areaT=.5*first
    print('The area is...')
    print(areaT) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T17:31:45.463

您的问题是您已将代码放入函数中，但从未调用它们。

定义函数时：

```
def shape():
    ... 
```

要运行该代码，您需要调用该函数：

```
shape() 
```

请注意，Python 按顺序运行代码 - 因此您需要在调用它之前定义该函数。

还要注意，要调用一个函数，你总是需要括号，即使你没有传递任何参数，所以：

```
if shape == 1: rectangle 
```

什么都不会。你想要`rectangle()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:52:21.107

更好的编码风格是将所有内容都放在函数中：

```
def display():
    print('This program will tell you the area some shapes')
    print('You can choose between...')
    print('1\. rectangle')
    print('or')
    print('2\. triangle')

def shape():
    shap = int(input('What shape do you choose?'))
    if shap == 1: rectangle()
    elif shap == 2: triangle()
    else:
        print('ERROR: select either rectangle or triangle')
        shape()

def rectangle():
    l = int(input('What is the length?'))
    w = int(input('What is the width?'))
    areaR=l*w
    print('The are is...')
    print(areaR)

def triangle():
    b = int(input('What is the base?'))
    h = int(input('What is the height?'))
    first=b*h
    areaT=.5*first
    print('The area is...')
    print(areaT)

if __name__=="__main__":
    display() #cal display to execute it 
    shape() #cal shape to execute it 
```

# php - 从 openssl.cnf 获取默认 DN

> ID：11161294
> 
> 赞同：1
> 
> 时间：2012-06-22T17:31:08.800
> 
> 标签：php, openssl, distinguishedname

我希望能够从 openssl.cnf 获取默认 DN。 [http://www.php.net/manual/en/openssl.installation.php](http://www.php.net/manual/en/openssl.installation.php)讨论了 openssl.cnf 文件的默认存储位置，但是当它讨论 OPENSSL_CONF 时......似乎那是一个操作系统环境变量 - 不是 PHP 能够访问的变量，除非它执行诸如 exec('echo %OPENSSL_CONF%') 之类的操作。

我想我可以使用 OpenSSL 创建一个 X.509 证书并从中获取 DN，但这似乎有点过分。另外，如果 openssl.conf 文件不存在，那也不会很优雅地失败。至少据我所知..

有任何想法吗？

# sparql - 如何使用 SPARQL 从 DBpedia 查询地理数据

> ID：11161296
> 
> 赞同：2
> 
> 时间：2012-06-22T17:31:23.183
> 
> 标签：sparql, dbpedia

我想从 DBpedia 获取特定资源的地理数据，例如，城市、建筑物或其他东西。两个例子是：

*   [http://dbpedia.org/resource/Eiffel_Tower](http://dbpedia.org/resource/Eiffel_Tower)
*   [http://dbpedia.org/resource/Paris](http://dbpedia.org/resource/Paris)

我试过这个查询，但我不能让它工作：

```
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
SELECT ?subject ?label ?lat ?long WHERE {
  <http://dbpedia.org/resource/Eiffel_Tower>
  ?subject geo:lat ?lat .
  ?subject geo:long ?long .
  ?subject rdfs:label ?label .
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T17:12:13.873

```
SELECT ?subject ?label ?lat ?long WHERE {  
?subject owl:sameAs <http://dbpedia.org/resource/Eiffel_Tower> .
<http://dbpedia.org/resource/Eiffel_Tower> geo:lat ?lat.
<http://dbpedia.org/resource/Eiffel_Tower> geo:long ?long.
<http://dbpedia.org/resource/Eiffel_Tower> rdfs:label ?label . } 
```

您可以随时在[http://dbpedia.org/isparql/](http://dbpedia.org/isparql/)或[http://dbpedia.org/snorql/上尝试查询](http://dbpedia.org/snorql/)

# css - 属性浮动使父元素忽略其高度

> ID：11161303
> 
> 赞同：0
> 
> 时间：2012-06-22T17:31:56.187
> 
> 标签：css, css-float

我认为现场看到效果比在这里发布代码更好。所以你可以在这里找到它：[jsfiddle](http://jsfiddle.net/9GGTr/4/)

如您所见，添加按钮位于边框上。如果没有为按钮设置浮动，一切都将是完美的。一旦我设置了浮动（无论是向左还是向右），盒子就不会像它应该的那样扩展。

知道如何解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:34:18.740

添加`overflow: hidden`到父元素 - [http://jsfiddle.net/9GGTr/5/](http://jsfiddle.net/9GGTr/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:35:01.067

您只需要使用 clearfix 或“clear:both”css 样式清除浮动：

[http://jsfiddle.net/BumbleB2na/9GGTr/6/](http://jsfiddle.net/BumbleB2na/9GGTr/6/)

这会将浮动元素放回页面的“常规流程”中，允许其容器尊重浮动元素的宽度和高度。

# c - C理解valgrind，堆栈粉碎错误

> ID：11161306
> 
> 赞同：4
> 
> 时间：2012-06-22T17:32:10.927
> 
> 标签：c, stack-overflow, valgrind

我做了一个程序，有时它会抛出堆栈粉碎检测到的错误。它在 99% 的时间都可以工作，但是对于某些文件，它会引发错误。我使用 valgrind 尝试识别错误，但我无法理解日志文件。所以这里是：

```
==3797== Memcheck, a memory error detector
==3797== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==3797== Using Valgrind-3.6.1 and LibVEX; rerun with -h for copyright info
==3797== Command: ./pargrep de nuevo.txt
==3797== Parent PID: 2367
==3797== 
==3797== 
==3797== HEAP SUMMARY:
==3797==     in use at exit: 33,339 bytes in 5 blocks
==3797==   total heap usage: 12 allocs, 7 frees, 35,025 bytes allocated
==3797== 
==3797== 4 bytes in 1 blocks are still reachable in loss record 1 of 5
==3797==    at 0x4026864: malloc (vg_replace_malloc.c:236)
==3797==    by 0x8048FDB: maestro (padre.c:39)
==3797==    by 0x8048ABF: main (main.c:62)
==3797== 
==3797== 55 bytes in 1 blocks are still reachable in loss record 2 of 5
==3797==    at 0x4026864: malloc (vg_replace_malloc.c:236)
==3797==    by 0x40B878B: __libc_message (libc_fatal.c:138)
==3797==    by 0x413D09F: __fortify_fail (fortify_fail.c:32)
==3797==    by 0x413D049: __stack_chk_fail (stack_chk_fail.c:29)
==3797==    by 0x8049665: contar_palabra (funcion.c:51)
==3797==    by 0x80494C5: hilos_hijos (hilos.c:90)
==3797==    by 0x4041E98: start_thread (pthread_create.c:304)
==3797==    by 0x41279ED: clone (clone.S:130)
==3797== 
==3797== 136 bytes in 1 blocks are possibly lost in loss record 3 of 5
==3797==    at 0x4025315: calloc (vg_replace_malloc.c:467)
==3797==    by 0x4010CD7: allocate_dtv (dl-tls.c:300)
==3797==    by 0x401146B: _dl_allocate_tls (dl-tls.c:464)
==3797==    by 0x40425C6: pthread_create@@GLIBC_2.1 (allocatestack.c:570)
==3797==    by 0x80490E1: maestro (padre.c:84)
==3797==    by 0x8048ABF: main (main.c:62)
==3797== 
==3797== 352 bytes in 1 blocks are still reachable in loss record 4 of 5
==3797==    at 0x4026864: malloc (vg_replace_malloc.c:236)
==3797==    by 0x40B3537: __fopen_internal (iofopen.c:76)
==3797==    by 0x40B360B: fopen@@GLIBC_2.1 (iofopen.c:107)
==3797==    by 0x804907D: maestro (padre.c:66)
==3797==    by 0x8048ABF: main (main.c:62)
==3797== 
==3797== 32,792 bytes in 1 blocks are still reachable in loss record 5 of 5
==3797==    at 0x4026864: malloc (vg_replace_malloc.c:236)
==3797==    by 0x40EBA18: __alloc_dir (opendir.c:186)
==3797==    by 0x40EBB49: opendir (opendir.c:141)
==3797==    by 0x8049013: maestro (padre.c:53)
==3797==    by 0x8048ABF: main (main.c:62)
==3797== 
==3797== LEAK SUMMARY:
==3797==    definitely lost: 0 bytes in 0 blocks
==3797==    indirectly lost: 0 bytes in 0 blocks
==3797==      possibly lost: 136 bytes in 1 blocks
==3797==    still reachable: 33,203 bytes in 4 blocks
==3797==         suppressed: 0 bytes in 0 blocks
==3797== 
==3797== For counts of detected and suppressed errors, rerun with: -v
==3797== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 15 from 8) 
```

我真的不明白错误是什么。感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T17:51:05.303

您需要区分堆栈粉碎和堆内存错误。

Valgrind 告诉你，有些内存没有被释放，有些可能丢失了。但这可能与您的真正问题无关：堆栈粉碎。

stack 表示：局部变量（通常是 char 数组）、任何其他未分配的数组等。

heap: 任何已经用 malloc、calloc、realloc 等分配的东西。

因此，如果你得到一个堆栈粉碎，那么很有可能你在某个地方写了一个数组的末尾。首先检查 strcpy、memcpy 和数组访问（在此处写入未分配的内存）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T22:22:57.750

使用 Valgrind 3.7.0，您可以尝试使用实验工具 exp-sgcheck 来查找堆栈和全局溢出。如前所述，这是一个实验性工具，因此质量可能不如 memcheck 和其他非实验性 Valgrind 工具。（例如可能给出假阳性和/或假阴性）。然而，exp-sgcheck 曾经帮助我找到了一个讨厌的数组溢出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:51:21.310

valgrind 没有检测到[数组溢出](http://valgrind.org/docs/manual/faq.html#faq.overruns)，这可能是您观察到的堆栈粉碎的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T17:41:59.997

通过这些消息，Valgrind 告诉您内存已被分配（并向您显示对 malloc 的调用如何发生的堆栈跟踪），但这些分配的内存从未被释放。

更多信息可在[http://valgrind.org/docs/manual/mc-manual.html#mc-manual.leaks](http://valgrind.org/docs/manual/mc-manual.html#mc-manual.leaks)

# mysql - 尝试从 mysql 查询最新的唯一结果时遇到问题

> ID：11161307
> 
> 赞同：0
> 
> 时间：2012-06-22T17:32:31.423
> 
> 标签：mysql, max

我的表（示例）

```
id - console - zone - timestamp - temp 
1  - 1       - 1    - 12:00     - 123
2  - 1       - 1    - 12:01     - 234
3  - 1       - 1    - 12:02     - 236
4  - 2       - 1    - 12:01     - 567
5  - 2       - 1    - 12:02     - 657
6  - 1       - 2    - 12:00     - 864
7  - 1       - 2    - 12:02     - 436 
```

我的表格每 30-45 秒更新一次，其中包含来自各种设备的新数据。我的目标是查询每个控制台 + 区域的表以获取最新的临时条目（我可以从 id 执行此操作，因为该表是自动递增的）

理想的输出是（示例）

```
 id - console - zone - timestamp - temp
 3  - 1       -  1   -  12:02    - 236
 5  - 2       -  1   -  12:02    - 657
 7  - 1       -  2   -  12:02    - 436 
```

我试图`max()`在我的查询中使用，但它没有按预期执行。我得到了 id 的最大值，但不是该行的 temp

```
select max(id), console, zone, timestamp, temp from TABLE group by console, zone order by console, zone; 
```

上面的查询返回正确的条目数，但是正如我提到的那样临时将不正确。我总是在控制台和区域的表格中输入第一个温度。我已经看了很多，要么不知道要问什么问题，要么答案很简单，为了让众神开心而躲避我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:02:30.307

这称为检索所谓的*分组最大值*，这是一个非常常见的问题，因为直观地说，您会认为与 with 结合使用`MAX()`会为您提供正确的相应行，但事实并非如此。`SELECT``GROUP BY`

相反，您必须将最大值的选择包装在子查询中，然后在子查询的最大值等于您要从中检索最大值的任何字段的条件下进行自联接，以便检索正确的行：

您的表结构使解决方案相当简单，因为您的最大值基本上只是一个唯一的自动递增 ID：

尝试这个：

```
SELECT
    b.*
FROM
    (
        SELECT MAX(id) AS maxid
        FROM tbl
        GROUP BY console, zone
    ) a
INNER JOIN
    tbl b ON a.maxid = b.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:42:45.590

```
select m.mid, m.console, m.zone, timestamp, temp 
from TABLE t
, (select max(id) mid,console,zone from table group by console,zone ) m
where t.id = m.mid
and t.zone = m.zone
and t.console = m.console
group by m.console, m.zone 
order by 2,3; 
```

# mongodb - 通过 numactl 作为守护进程启动 mongodb

> ID：11161308
> 
> 赞同：5
> 
> 时间：2012-06-22T17:32:31.660
> 
> 标签：mongodb, numa

我试图让 mongodb 在 NUMA 机器上作为守护进程启动。当我跑

```
numactl --interleave=all mongod & 
```

Mongo 启动并正常运行，但所有输出仍然显示。（例如，Fri Jun 22 12:10:29 [initandlisten] 接受来自 127.0.1.1:51837 的连接）

但是，当我自己启动 mongo（如下所示）时，它会失败（下面的日志）：

```
service mongodb start 
```

我在日志中得到以下信息

```
Fri Jun 22 12:08:41 [initandlisten] MongoDB starting : pid=3348 port=27017 dbpath=/var/lib/mongodb 64-bit host=beckett
Fri Jun 22 12:08:41 [initandlisten]
Fri Jun 22 12:08:41 [initandlisten] ** WARNING: You are running on a NUMA machine.
Fri Jun 22 12:08:41 [initandlisten] **          We suggest launching mongod like this to avoid performance problems:
Fri Jun 22 12:08:41 [initandlisten] **              numactl --interleave=all mongod [other options]
Fri Jun 22 12:08:41 [initandlisten]
Fri Jun 22 12:08:41 [initandlisten] db version v2.0.6, pdfile version 4.5
Fri Jun 22 12:08:41 [initandlisten] git version: e1c0cbc25863f6356aa4e31375add7bb49fb05bc
Fri Jun 22 12:08:41 [initandlisten] build info: Linux ip-10-110-9-236 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_41
Fri Jun 22 12:08:41 [initandlisten] options: { auth: "true", command: [ "run" ], config: "/etc/mongodb.conf", dbpath: "/var/lib/mongodb", logappend: "true", logpath: "/var/log/mongodb/mongodb.log" }
Fri Jun 22 12:08:41 [initandlisten] journal dir=/var/lib/mongodb/journal
Fri Jun 22 12:08:41 [initandlisten] recover : no journal files present, no recovery needed
Fri Jun 22 12:08:42 [initandlisten] couldn't open /var/lib/mongodb/admin.ns errno:13 Permission denied
Fri Jun 22 12:08:42 [initandlisten] error couldn't open file /var/lib/mongodb/admin.ns terminating
Fri Jun 22 12:08:42 dbexit:
Fri Jun 22 12:08:42 [initandlisten] shutdown: going to close listening sockets...
Fri Jun 22 12:08:42 [initandlisten] shutdown: going to flush diaglog...
Fri Jun 22 12:08:42 [initandlisten] shutdown: going to close sockets...
Fri Jun 22 12:08:42 [initandlisten] shutdown: waiting for fs preallocator...
Fri Jun 22 12:08:42 [initandlisten] shutdown: lock for final commit...
Fri Jun 22 12:08:42 [initandlisten] shutdown: final commit...
Fri Jun 22 12:08:42 [initandlisten] shutdown: closing all files...
Fri Jun 22 12:08:42 [initandlisten] closeAllFiles() finished
Fri Jun 22 12:08:42 [initandlisten] journalCleanup...
Fri Jun 22 12:08:42 [initandlisten] removeJournalFiles
Fri Jun 22 12:08:42 [initandlisten] shutdown: removing fs lock...
Fri Jun 22 12:08:42 dbexit: really exiting now 
```

我不知道当我以 root 身份运行时 admin.ns 会如何出现权限问题，或者为什么用 numactl 包装时它可以正常启动。理想情况下，我想在 start_server() 函数中使用 numactl，如下所示：

```
start_server(){
    /usr/bin/numactl --interleave=all -- \
    start-stop-daemon --background --start --quiet --pidfile $PIDFILE \
        --make-pidfile --chuid $DAEMONUSER \
        --exec $DAEMON -- $DAEMON_OPTS
    errcode=$?
    return $errcode
} 
```

底线，我怎样才能让 mongo 作为 NUMA 机器上的守护进程启动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T19:06:17.537

原来我的问题是 numa 和权限问题的结合。谢谢，@Mark 的帮助。要将 mongodb 作为 NUMA 设置上的守护进程启动，请将 /etc/init.d/mongodb 中的 start_server() 函数替换为以下内容：

```
start_server() {
# check for numactl
NUMACTL=$(which numactl)
if [ -n "$NUMACTL" ]; then
    DAEMON_OPTS="--interleave=all ${DAEMON} ${DAEMON_OPTS}"
    DAEMON="$NUMACTL"
fi

# Start the process using the wrapper
            /usr/bin/numactl --interleave=all -- \
            start-stop-daemon --background --start --quiet --pidfile $PIDFILE \
                        --make-pidfile --chuid $DAEMONUSER \
                        --exec $DAEMON -- $DAEMON_OPTS
            errcode=$?
        return $errcode
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T12:54:12.013

我想你知道关于 'mongo & numa' 的常见警告 (http://www.mongodb.org/display/DOCS/NUMA)，所以我不会继续讨论它们。

这是带有 numa 的 mongodb 的示例 upstart 配置文件 - [https://gist.github.com/1364716](https://gist.github.com/1364716)。

基于此[Google Group 线程](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/k2SqkKruUF8)，在 init 脚本中的 start_server 函数中添加了以下几行，并且成功 -

```
start_server() { 
# check for numactl 
NUMACTL=$(which numactl) 
if [ -n "$NUMACTL" ]; then 
    DAEMON_OPTS="--interleave=all ${DAEMON} ${DAEMON_OPTS}" 
    DAEMON="$NUMACTL" 
fi 

# Start the process using the wrapper 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-28T12:07:27.670

对于 Ubuntu 16.04

```
[Unit]
Description=High-performance, schema-free document-oriented database
After=time-sync.target network.target

[Service]
Type=forking
User=mongod
Group=mongod
LimitNOFILE=65000
PermissionsStartOnly=true
EnvironmentFile=/etc/default/mongod
ExecStartPre=/usr/bin/percona-server-mongodb-helper.sh
ExecStart=/usr/bin/env bash -c "numactl --interleave=all /usr/bin/mongod $OPTIONS > ${STDOUT} 2> ${STDERR}"
#ExecStart=/usr/bin/env bash -c "/usr/bin/mongod $OPTIONS > ${STDOUT} 2> ${STDERR}"
PIDFile=/var/run/mongod.pid

[Install]
WantedBy=multi-user.target 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T14:35:35.047

上面的两个解决方案对我没有用，所以下面是让我的 mongodb 运行的原因：

替换下面代码中 的`start_server()`函数`/etc/init.d/mongodb`

```
start_server() {
    test -e "$RUNDIR" || install -m 755 -o mongodb -g mongodb -d "$RUNDIR"

    NUMACTL=$(which numactl)

    if [ ! "$NUMACTL" ]; then
        # start original
        start-stop-daemon --background --start --quiet --pidfile $PIDFILE --make-pidfile --chuid $DAEMONUSER --exec $DAEMON -- $DAEMON_OPTS
        errcode=$?
        return $errcode
    else
        # Start the process using the wrapper
        $NUMACTL --interleave=all -- start-stop-daemon --background --start --quiet --pidfile $PIDFILE --make-pidfile --chuid $DAEMONUSER --exec $DAEMON -- $DAEMON_OPTS
        errcode=$?
        return $errcode
    fi
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-04T07:48:13.323

对于 Ubuntu 14

```
# apt-get -y install numactl 
```

添加到 /etc/sysctl.conf 行`vm.zone_reclaim_mode = 0`

`# sysctl -p`

`# service mongod restart`

# date - 喜欢框只显示某个日期的帖子

> ID：11161309
> 
> 赞同：1
> 
> 时间：2012-06-22T17:32:54.010
> 
> 标签：date, filter, facebook-likebox

我在我的网站上添加了一个类似框，但只想显示从特定日期开始的帖子。有没有办法做到这一点？任何帮助，将不胜感激。

# c# - 代码说明

> ID：11161311
> 
> 赞同：0
> 
> 时间：2012-06-22T17:33:09.270
> 
> 标签：c#, network-programming, ip-address, network-protocols

我正在查看代码，但我不确定它的功能。我查看了函数的文档，但是它们并没有做太多的正义。这是代码：

```
 private void m_InitUdpSock()
    {
        m_sockBroadcast = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        m_sockBroadcast.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.Broadcast,1);

        m_localhost     = new IPEndPoint(IPAddress.Parse(m_localHostIP),BIND_PORT);
        m_remotehost    = new IPEndPoint(IPAddress.Broadcast,SCAN_PORT);

        m_sockBroadcast.Bind(m_localhost);
        m_sockBroadcast.BeginReceiveFrom(m_rxBuffer,0,m_rxBuffer.Length,SocketFlags.None,ref m_HostEp,new AsyncCallback(ReceiveBroadcastData),m_sockBroadcast);
    } 
```

据我了解：此功能正在设置一个套接字来广播 UDP 消息。它正在使用`m_localhost`发送广播。`m_localhost` **曾经**是：

```
m_localhost     = new IPEndPoint(IPAddress.Any,BIND_PORT); 
```

然后，我想[选择](https://stackoverflow.com/questions/11035230/windows-7-vs-xp-getisnetworkavailable-difference "请参阅此链接中的代码块")我选择与之通信的网络适配器，所以我检索了我想使用的网络适配器的 IP 地址并将其更改`m_localhost`为第一个示例。然后使用该`Bind`功能，它应该使用特定的网络适配器，并使用端口 ,`BIND_PORT`来监听响应消息。

我希望有人可以确认我确实在使用我通过 localhost 的 IP 的网络适配器。

这`m_remotehost`只是一个`IPEndPoint`，它将保存响应的数据包的 IP 地址，以及端口 ，`SCAN_PORT`它是传出广播端口。

`SCAN_PORT`并`BIND_PORT`获得以前开发人员的意见；但是我不知道它们是否准确。m_remotehost 是否指定了它应该用来与我通信的端口？*（这对我来说听起来像是不好的做法）*

```
SCAN_PORT  // Outgoing broadcast port.
BIND_PORT  // Incoming response listen port. 
```

接下来，在 中`BeginReceiveFrom`，文档大部分都很清楚，但是以前的开发人员使用的参数“ref HostEp”让我失望，因为它被声明为：

```
m_HostEp = new IPEndPoint(IPAddress.Any,0); 
```

所以当我打电话时`BeginReceiveFrom`，它是否仍然使用任何本地 IP 地址来广播消息，这不是我想要的？ `m_HostEp`也用在通话中`EndReceiveFrom(iar,ref m_HostEp)`。

我正在寻求澄清：
1.`BIND_PORT`和`SCAN_PORT`
2\. 什么是`m_HostEp`用法，它如何影响我的沟通？

如果您需要任何澄清，请询问！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:57:00.573

查看代码片段，`m_remotehost`未使用，因此您无法从中确定含义 `SCAN_PORT`，但显然广播消息可以在与接收传入消息的端口不同的端口上发送。

*   `BIND_PORT`是您将接收消息的端口。
*   `m_HostEp`将包含`EndPoint`您收到的消息的发件人。

在学习套接字时，我阅读了[http://tangentsoft.net/wskfaq/](http://tangentsoft.net/wskfaq/)，如果您想了解更多关于“幕后”的事情，因为广播网络可能很棘手，它是一个很好的参考。它不是专门针对 c# 的。

# jquery - 与 jQuery 的 find() 行为不一致

> ID：11161312
> 
> 赞同：3
> 
> 时间：2012-06-22T17:33:12.043
> 
> 标签：jquery, mediaelement.js

使用 jQuery 1.7.2。使用早于 1.5.1 的版本进行测试。结果相同。

在小于 9 的 FF 和 IE 中，它可以正常返回 DOM 元素的预期 jQuery 对象。但是，在其他所有内容中，它都会返回 DOM 元素的 jQuery 对象的 jQuery 对象。由于 jQuery 中的那些函数最终期望传递的元素是 DOM 元素（我做了很多跟踪），因此这对任何试图获取宽度或高度的东西都产生了影响。另外，我以前从未遇到过这个问题。[这是一切都出错的网站](http://www.commercialsonhold.com)。如果您想查看它的实际效果，我还没有修复上一个和下一个按钮。它应该调用`click()`下一个播放列表元素。不是因为这个问题。

代码取自[MediaElementJS](http://mediaelementjs.com)。

```
t.controls = t.container.find('.mejs-controls');
t.layers = t.container.find('.mejs-layers'); 
```

我最终想出的解决方法。

```
if(!mf.isFirefox && !(/MSIE [876]/.test(navigator.userAgent))){
    t.controls = t.container.find('.mejs-controls').get(0);
    t.layers = t.container.find('.mejs-layers').get(0);
}else{
    t.controls = t.container.find('.mejs-controls');
    t.layers = t.container.find('.mejs-layers');
} 
```

现在，为什么在上帝的绿色地球上它在新浏览器上很糟糕，除了 FF？

如果要设置断点，请使用以下行：

*   jquery+mep.js （以前这里是捆绑jQuery的，拿出来测试一下）
    *   下一个：4595
    *   上一个：4600
*   jquery-1.7.2.js
    *   jQuery.next(): 5582
    *   jQuery.prev(): 5585
    *   jQuery.nth(): 5666

**更新**

其他页面似乎不受影响；像[http://www.commercialsonhold.com/messagesamples/aesthetics.htm](http://www.commercialsonhold.com/messagesamples/aesthetics.htm)。我开始认为页面上的其他东西正在与 jQuery 混淆。该网站是Joomla！我经常在 Joomla 上使用 MooTools！但是，通常是 jQuery 根本不工作，而不仅仅是一个功能异常。

**更新**

jsFiddle：http: [//jsfiddle.net/h5ahY/4/](http://jsfiddle.net/h5ahY/4/)

![jQuery 对象中的 jQuery 对象的插图](../Images/d8a55cb2f86d65485e7e2cd115b66e8e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:26:25.190

发现问题。它是 MooTools。我不知道怎么做，也不知道为什么。

通过将 jQuery 包含移动到 MooTools 包含上方并使用`jQuery`而不是`$`到处使用来修复。

现在我知道如何使用它，很快就会得到一个 jsFiddle。

# java - Maven项目设计——共享一个通用项目

> ID：11161314
> 
> 赞同：6
> 
> 时间：2012-06-22T17:33:12.800
> 
> 标签：java, maven

我是 Maven 新手，我正在尝试将一些项目转换为在 Maven 上工作，但我不确定构建它们的正确方法是什么——这就是我所拥有的：

我有一个共同的模块命名`Common`和两个不同的应用程序，它们没有任何共同之处，因为它们都依赖于事实`Common`。让我们称它们为`A`and `B`。

`A`->`Common`和`B`->之间的依赖关系`Common`既适用于运行时也适用于测试——这意味着`A`'s 的测试类需要`Common`'s 的测试类。

我尝试了各种我能想到的组合——但没有一个能产生我想要的。奇怪的是我的代码可以编译，但是 JUnits 失败了，因为在`Common`类路径中找不到测试类。

我应该向 2 个配置文件添加 2 个配置文件以`Common`创建 2 个工件并在两个工件中添加 2 个依赖项`A`吗`B`？（这可能吗？）有没有正确的方法来做我想做的事？我应该重组我的代码以适应 Maven 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T17:40:05.820

这是一个常见的 Maven 陷阱。当您依赖该工件时，该工件的测试类不可用。这实际上是合理的：当您依赖 时`Common`，您依赖于生产类（JAR 文件）。测试类仅用于运行测试，甚至不包含在最终 JAR 中。

假设您的测试类包含所有测试和测试`Common`所需的一些实用方法，这是一个建议的结构：`Common``A``B`

*   `Common-test`- 在 (!) 中包含常见的实用程序测试类（不是测试用例`/src/main/java`！）
*   `Common`取决于`Common-test`与`<scope>test</scope>`
*   `A`并`B`依赖于`Common`（具有默认范围）和`Common-test`（具有`test`范围）

[![UML](../Images/4ddf4406d53a868c129d2be83cfabc55.png)](https://i.stack.imgur.com/Rm67V.png)
[（来源：[yuml.me](https://yuml.me/59899186)）]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T17:38:04.960

你可以像这样构造它

*   共同项目
*   一个专案
*   B项目

现在将 CommonProject 添加到`<dependency>`for `A`& `B`，这将使 commonproject 在编译时可用，因此构建会很好，

如果您的 A & B 是或 webapp 架构类型，那么您需要确保您的依赖项在 WEB-INF/lib 中可用，以便它可以在运行时获取依赖项

要使依赖项仅在某个`test`时间可用，您可以使用[`test`范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T17:42:06.587

你必须在你的项目中运行`test-jar`目标。`maven-jar-plugin``Common`

这会生成一个带有`tests`分类器的新工件，其中包含`src/test`树中的所有类和资源。

所以，共同添加这个：

```
<plugins>
  ...
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <executions>
      <execution>
        <id>test-jar</id>
        <goals>
          <goal>test-jar</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
  ...
</plugins> 
```

并`A`添加`B`这个

```
<dependency>
  <groupId>common.group.id</groupId>
  <artifactId>Common</artifactId>
  <version>1.0</version>
  <classifier>tests</classifier>
  <scope>test</scope>
</dependency> 
```

请注意`<classifier>tests</classifier>`此依赖项声明。

# python - 在 python 2.7 中，如何将行数与列表中的项目数进行比较？

> ID：11161316
> 
> 赞同：-1
> 
> 时间：2012-06-22T17:33:18.230
> 
> 标签：python, loops, if-statement, python-2.7

如果有 4 个项目，我正在尝试打印行 [4]，如果有 4 个以上的项目，我正在尝试打印行 [4] 和 [5]。

```
def onlinedoc(test):
    for line in test:
        lines = line.split()
        if 'report' in lines:
            if lines > [4]:      #<---- this is where i need help
                doc = lines[4] + lines[5]
            else:
                doc = lines[4]
    return doc

if __name__ == '__main__':
    test = open('test_documentation.txt', 'r')
    print
    onlinedoc(test) 
```

如果行> [4]，我不确定我应该把什么放在我拥有的地方。我总是得到`IndexError: list index out of range`。我已经仔细检查过，我想要的信息将在 [4] 或 [5] 中。如果我将这些行复制到单独的文本中并在没有 if else 的情况下执行它并且只是

```
if 'report' in lines:
    host = lines[4] + lines[5] 
```

然后它可以工作（与 5 一致）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:38:32.577

使用`len`：

```
def onlinedoc(test):
    for line in test:
        lines = line.split()
        if 'report' in lines:
            if len(lines) > 4:
                doc = lines[4] + lines[5]
            else:
                doc = lines[4]
    return doc 
```

你应该阅读 Python 的内置函数[文档](http://docs.python.org/library/functions.html#len)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:37:14.137

您可以使用 len(lines) 或 try/except

```
if 'report' in lines:
    if len(lines) > 4:
        doc = lines[4] + lines[5]
    else:
        doc = lines[4] 
```

或尝试/除外

```
if 'report' in lines:
    try:
        doc = lines[4] + lines[5]
    except IndexError:
        doc = lines[4] 
```

这假设您总是至少有四个项目！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T17:41:38.553

你应该使用`if len(lines)> 4`

# android - 具有相同意图名称的应用

> ID：11161317
> 
> 赞同：0
> 
> 时间：2012-06-22T17:33:22.067
> 
> 标签：android, android-intent

我有两个具有相同意图名称的应用程序，称为 videoPlayer，当我运行其中一个应用程序时，选择器要求我为意图选择默认操作。如何告诉应用程序从默认包执行操作

```
Intent menuIntent = new Intent("android.intent.action.Videoplayer");
            startActivity(menuIntent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:37:01.280

您是否试图告诉系统使用预装的应用程序而不是您自己的应用程序？Android 并不是这样工作的。所有应用程序都是平等创建的，系统默认值和第三方。如果不使用明确的意图解析，实际上没有办法做到这一点。您将不得不向意图提供更多信息或使用弹出对话框将您的操作设为默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:51:39.313

使用[setComponent](http://developer.android.com/reference/android/content/Intent.html#setClassName%28java.lang.String,%20java.lang.String%29)使其具体化.....

```
menuIntent .setComponent(new ComponentName("<package>", "com.android.< Activity >")); 
```

喜欢[如何在默认浏览器或 webview 中打开按钮单击 url](https://stackoverflow.com/questions/11031348/how-to-open-button-click-url-in-default-browser-or-webview/11031564#11031564)

# evaluation - 给定上下文的布尔表达式求值

> ID：11161319
> 
> 赞同：0
> 
> 时间：2012-06-22T17:33:24.073
> 
> 标签：evaluation, boolean-expression

考虑到某些上下文为真，有哪些算法可以评估布尔表达式？

例如，取表达式 A & (B || C) || (E && F) 我们知道表达式 B || F 是真的。什么是创建新表达式的算法？

对于某些上下文、单个谓词或它们中的一系列谓词，这很容易做到。但我不确定一般程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:36:07.583

停止编码，关闭编译器并打开布尔代数书。

# asp.net - 限制datalist中的行数和列数

> ID：11161320
> 
> 赞同：0
> 
> 时间：2012-06-22T17:33:30.310
> 
> 标签：asp.net, vb.net, datalist

如上所述，是否可以在代码后面制作一个。以及如何从数据库中检索它？我确实在网站上看到了详细信息，但这有点令人困惑。有没有更简单的方法来做到这一点？谢谢

好的。抱歉，这是我的代码

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Not Page.IsPostBack Then
            UpdateDatabind()
        End If
    End Sub
    Sub UpdateDatabind()
        Dim Product As New Product
        Dim dataset As New DataSet
        Dim count As Integer
        Dim Pds As New PagedDataSource
        dataset = Product.GetProduct()
        If dataset.Tables(0).Rows.Count > 0 Then
            'For paging 
            Pds.DataSource = dataset.Tables(0).DefaultView
            Pds.AllowPaging = True
            Pds.PageSize = 1
            Pds.CurrentPageIndex = 0
            Session("Pds") = Pds            
            'Bind the datalist
            dlProducts.DataSource = dataset
            dlProducts.DataBind()
            count = dataset.Tables(0).Rows.Count
            lblCount.Text = "Total records:" & count
            lbl1.Text = "Showing Page: " & Pds.CurrentPageIndex.ToString() & " of " & Pds.PageCount.ToString()
        Else
            lblCount.Text = "No records is found"
        End If
    End Sub
    Private Sub dlProducts_UpdateCommand(source As Object, e As System.Web.UI.WebControls.DataListCommandEventArgs) Handles dlProducts.UpdateCommand
        dlProducts.DataBind()
    End Sub

    Public Sub PrevNext_Command(source As Object, e As CommandEventArgs)
        ' Request.CurrentExecutionFilePath
        Dim pds As PagedDataSource = Session("pds")
        Dim CurrentPage As Integer
        If Not CurrentPage = 0 Or CurrentPage < pds.PageCount Then
            CurrentPage = pds.CurrentPageIndex
            If e.CommandName = "Next" Then
                CurrentPage += 1
                Response.Redirect("~/Products.aspx?PageIndex=" & CurrentPage)
            ElseIf e.CommandName = "Previous" Then
                CurrentPage -= 1
                Response.Redirect("~/Products.aspx?PageIndex=" & CurrentPage)
            End If
        Else
            If pds.IsFirstPage Then
                lbPrev.Visible = False
                lbPrev1.Visible = False
            End If
            If pds.IsLastPage Then
                lbNext.Visible = False
                lbNext1.Visible = False
            End If
        End If
    End Sub 
```

我可以在 datalist 中得到结果，但我似乎没有限制行和列。示例我想检索 3x3 数据列表。

# c - sizeof (int) * p 在语义上是什么意思？

> ID：11161333
> 
> 赞同：2
> 
> 时间：2012-06-22T17:34:49.990
> 
> 标签：c, sizeof

`sizeof (int) * p`语义上是什么意思？是：
1.`sizeof( (int) *p )`
还是
2.`( sizeof(int) ) * p`
是什么规则使表达式以这种方式被评估？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:12:19.203

`sizeof`是一元运算符，其优先级高于二元`*`，因此表达式`sizeof (int) * p`被解析为`(sizeof (int)) * p`. 这是解析树：

```
 *
           /   \
       sizeof   p
         |
       (int) 
```

**编辑**

来自 onezero 的评论：

> 但是不能像 sizeof( (int) *p ) 那样评估表达式，因为 sizeof 运算符、类型转换运算符和 *(dereference) 运算符具有相同的优先级并且从右到左关联？

以下是相关语法（来自C2011 标准的[投票草案）：](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1539.pdf)

```
(6.5.3) *unary-expression* :
     *postfix-expression* 
    ++ *unary-expression* 
    -- *unary-expression* 
    *unary-operator cast-expression* 
    sizeof *unary-expression* 
    sizeof ( *type-name* )
    alignof (*类型名*)

```

如您所见， the`(int)`被解释为`sizeof`表达式的一部分，句号。它不被解释为*cast-expression*的一部分。语法不允许`sizeof`直接跟在*cast-expression*后面；它们之间必须有一个*一元运算符*（`&`, `*`, `+`, `-`, `~`,之一`!`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T17:42:46.280

这不取决于 p 是什么吗？

```
无效的主要（）
{
   诠释 p = 3;

   printf("%d", sizeof(int) *p);
}

```

将输出 12。

```
无效的主要（）
{
   字符 *p = "a";

   printf("%d", sizeof((int) *p));
}

```

将输出 4。

# vb.net - 想在 Visual Studio (httpwebrequest) Visual Studio 2010 中创建一个机器人

> ID：11161337
> 
> 赞同：0
> 
> 时间：2012-06-22T17:35:00.630
> 
> 标签：vb.net, httpwebrequest

所以我做了一个机器人，里面有一个查看器，可以访问文本框中的特定网址。现在我用 webbrowser1.navigate 函数做到了。

我听说我需要创建一个 httpwebrequest 函数而不是使用 webbrowser1 函数。

我应该使用此代码而不是 webbrowser1.navigate ：这是我正在使用的代码：

> 公开课形式1

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Timer1.Enabled = True
End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    Timer1.Enabled = False
End Sub

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    WebBrowser1.Navigate(txtUrl.Text, "", Nothing, "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5" & vbCrLf & "Accept-Language: en-us" & vbCrLf)
    lblCount.Text += 1
End Sub 
```

结束类

> 块引用

我希望将它作为 webrequest 而不是浏览器，所以我应该在下面使用它吗？

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://google.it/");
 WebProxy a=new WebProxy(); a.Address=new Uri("http://97.107.137.97:8080"); 
 request.Proxy = a; 
 var response = (HttpWebResponse)request.GetResponse();
 Stream dataStream = response.GetResponseStream();
 StreamReader reader = new StreamReader(dataStream);
 string responseFromServer = reader.ReadToEnd(); 
```

并想将 URL 放在文本字段中？有谁知道我该怎么做？

先进的Thnx :)

# php - MySQL 查询不返回任何内容

> ID：11161341
> 
> 赞同：1
> 
> 时间：2012-06-22T17:35:12.917
> 
> 标签：php, mysql

我在堆栈上搜索有关此问题的信息，但一无所获。这可能是一个语法问题，但我不明白。

```
//Include necessary files
include_once("inc/mysql.inc.php");
include_once("inc/security.inc.php");

//SECURITY: Check input before adding them into the table.
$u = security_checkinput($u);

//Connect to the MySQL database.
mysql_dbconnection();
//Go get users id corresponding to the search
$u = mysql_query("SELECT id FROM users
            WHERE name LIKE \"%$u%\" OR active LIKE \"%$u%\" 
            ORDER BY name ASC") or die("There is a server error : " . mysql_error());
$u = mysql_fetch_row($u);
//Close database connection
mysql_dbclose();

//Return the array.
return $u; 
```

查询后我在 $u 上尝试了 mysql_num_rows，它返回 0。不幸的是，用户表和名称列中有一些东西。

有什么帮助吗？非常感谢 ！！

编辑：问题出在 security_check 功能。我想尽可能避免sql注入，所以我做了这个：

```
 function security_checkinput ($s)
{
    $s = stripslashes($s);
    if (!is_numeric($s))
        $s = "'".addslashes($s)."'";
    return $s;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:45:19.923

**第 1 点：**您将查询分配给 $u 并在 LIKE 语句中使用相同的变量。

**第 2 点：** 您***[写错了 LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)***语句。它应该是

```
$query = mysql_query("SELECT id FROM users
            WHERE name LIKE '%$u%' OR active LIKE '%$u%' 
            ORDER BY name ASC") or die("There is a server error : " . mysql_error()); 
```

## 或者

```
$query = mysql_query("SELECT id FROM users
            WHERE CONCAT(name, ' ,' , active) LIKE '%$u%' 
            ORDER BY name ASC") or die("There is a server error : " . mysql_error()); 
```

我更喜欢 CONCAT，因为如果有很多变量，您不需要编写 n 个 OR 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:41:03.357

您是否首先回显您的查询并尝试直接在数据库中运行它？

无论如何，正确使用[LIKE](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)子句..

```
$u = mysql_query("SELECT id FROM users
            WHERE name LIKE '%$u%' OR active LIKE '%$u%' 
            ORDER BY name ASC") or die("There is a server error : " . mysql_error()); 
```

您不需要在此处使用“/”，phpvariable 将在此处自行处理。尝试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:43:49.037

我不完全确定这是否是您的问题的唯一原因，但这

```
WHERE name LIKE \"%$u%\" OR active LIKE \"%$u%\" 
```

应该

```
WHERE name LIKE '%$u%' OR active LIKE '%$u%' 
```

您是否尝试过直接针对您的数据库运行此查询？它在那里返回什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T17:44:09.013

$u 是什么？您的查询很好，看起来您没有任何匹配的行。

[看演示](http://sqlfiddle.com/#!2/81a7f/3)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T18:59:40.370

您的安全功能似乎是问题所在。例如，只要 $u 是单词 test，它就会返回 SQL 语句中已经存在的“test”。

将其从您的安全功能中删除，您会没事的。但是，我确实建议更改条形斜杠并将斜杠添加到更体面的东西上，例如 mysql_real_escape_string

基于旧代码的修复示例：

```
function security_checkinput ($s)
{
    $s = stripslashes($s);
    if (!is_numeric($s))
        $s = addslashes($s);
    return $s;  
} 
```

mysql_real_escape_string 用法示例*（您应该真正使用这个）*：

```
function security_checkinput ($s){
$s = mysql_real_escape_string($s);
return $s;  
} 
```

确保您还应用了 Nishu Tayal 的解决方案。斜线不属于那里。

# c# - 绑定在 WPF 窗口用户控件中不起作用

> ID：11161349
> 
> 赞同：0
> 
> 时间：2012-06-22T17:35:39.800
> 
> 标签：c#, .net, wpf

我有这个用户控制 XAML：

```
<Window x:Class="MyProj.Dialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation/shell"
        mc:Ignorable="d">

    <Grid>
        <ItemsControl ItemsSource="{Binding Foos}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="ASd" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>

</Window> 
```

以及后面的相应代码：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Media.Effects;
using System.Windows.Threading;

namespace MyProj
{
    public partial class Dialog : Window
    {
        public Dialog() : base()
        {
            InitializeComponent();

            //DataContext = this;
        }

        public ObservableCollection<string> Foos = new ObservableCollection<string> { "foo", "bar" };
    }
} 
```

我遇到的问题是由于某种原因`ItemsControl`没有显示任何内容。奇怪的是，我什至没有在输出中收到绑定警告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T17:39:02.853

在 WPF 中，[`Path`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx)绑定的组件只能引用属性（或属性路径），不能引用字段。尝试将您的集合封装在一个属性中：

```
private ObservableCollection<string> foos = 
    new ObservableCollection<string> { "foo", "bar" };

public ObservableCollection<string> Foos
{
    get { return foos; }
} 
```

此外，您需要取消注释您设置的行`DataContext`：

```
DataContext = this; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T17:46:27.450

您还可以绑定字段（如果您命名组件最简单，但您需要以某种方式引用它）：

```
<ItemsControl ItemsSource="{Binding}" Name="myItems">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}"/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

和

```
private ObservableCollection<string> Foos = 
  new ObservableCollection<string> { "foo", "bar" };

public Dialog() : base
{
    InitializeComponent();
    myItems.DataContext = Foos;
} 
```

这比在 XAML 中硬编码绑定更灵活，因为您没有绑定到类的特定属性，而是绑定到任何公开正确属性的对象。假设您有许多集合，您可以轻松地在 ItemsControl 中显示它们中的任何一个，只需将其 DataContext 更改（以编程方式）为您希望显示的任何集合。

# objective-c - 对象数学十进制

> ID：11161352
> 
> 赞同：0
> 
> 时间：2012-06-22T17:36:04.107
> 
> 标签：objective-c, math, calculus

我有一个有趣的问题要解决，它更像是一个测验:)

我必须重新创建一个简单的计算器，并且我有两个带有向上/向下的按钮。这两个按钮的功能很简单，它们取当前值并求和 1 或取 1。所以我设法创建了一个小函数，将值转换为字符串，如果是 34.1，我创建新值 0.1加或减。

```
- (float)findFloatValueToAdd:(NSString *)aString
{
  NSMutableString *val = [NSMutableString stringWithCapacity:aString.length];

  for (int i = 0; i < aString.length; i++)
    [val appendFormat:@"0"];

  if ([aString rangeOfString:@"."].location != NSNotFound)
    [val replaceCharactersInRange:NSMakeRange([aString rangeOfString:@"."].location, 1)
                       withString:@"."];

  [val replaceCharactersInRange:NSMakeRange(aString.length-1, 1)
                     withString:@"1"];

  return [val floatValue];
} 
```

主要问题是当我有很多像 23.1234212 这样的小数时。如果我必须上涨，它会直接跳到 23.12342，同样下跌。如果我继续从 23.12342 下降，它将变为 23.12341 > 23.1234，但随后变为 23.1233>23.1232>23.1231...

那么，如何才能真正解决这个问题呢？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:48:30.940

正如其中一条评论所说，这听起来确实有点像家庭作业……您可以探索两个想法：

1）你如何显示结果？如果您不知道诸如 %5.2f 之类的格式是什么意思，请查明 - 查找格式规范。这可以解释明显的截断，但是......

使用数字来做你想做的事情是很棘手的。计算机使用以 2 为底的算术，而浮点数的精确数字范围有限——这与数学不同。如果这没有意义，请考虑分数 1/3，它的十进制表示形式是什么？0.333333333 ad nasuem。一种表示形式的值在另一种表示中可能没有完全等价的值，这对于您编写的十进制数及其计算机以二进制浮点形式表示的值是相同的。所以：

2）您的代码以浮点数的*字符串表示形式开始，它似乎仅限于数字和小数点 - 即没有指数。*然后，您创建一个要添加的数字*字符串。*然后你转换为浮点数，事情就开始出错了。为什么要转换为浮点数？*你可以用strings*来做这一切。从最后一个字符（最右边）开始，查找并“添加”一个 - 所以如果它是`'1'`你想要的`'2'`，如果字符是`'9'`你想要 a`'0'`和 1 的“进位”。现在移动到下一个字符......

# c - 使用 SSE 内在函数对 2D 模板进行矢量化

> ID：11161355
> 
> 赞同：1
> 
> 时间：2012-06-22T17:36:20.797
> 
> 标签：c, memory, sse, icc

我正在尝试仅使用对齐、加载和存储来矢量化 2D 模板。为此，我想基本上使用`_mm_load_ps`并`_mm_shuffle_ps`获得所需的地址。

我的代码标量版本是：

```
 void FDTD_base (float *V, float *U, int dx, int dy, float c0, float c1, float c2, float c3, float c4)
    {
    int i, j, k;

            for (j = 4; j < dy-4; j++)
            {
                    for (i = 4; i < dx-4; i++)
                    {

                            U[j*dx+i] = (c0 * (V[j*dx+i]) //center
                                    + c1 * (V[j*dx+(i-1)] + V[(j-1)*dx+i] + V[j*dx+(i+1)] + V[(j+1)*dx+i] )
                                    + c2 * (V[j*dx+(i-2)] + V[(j-2)*dx+i] + V[j*dx+(i+2)] + V[(j+2)*dx+i] )
                                    + c3 * (V[j*dx+(i-3)] + V[(j-3)*dx+i] + V[j*dx+(i+3)] + V[(j+3)*dx+i] )
                                    + c4 * (V[j*dx+(i-4)] + V[(j-4)*dx+i] + V[j*dx+(i+4)] + V[(j+4)*dx+i] ));

                    }
            }

      } 
```

到目前为止，我的向量查看代码版本：

```
 for (j = 4; j < dy-4; j++)
    {
            for (i = 4; i < dx-4; i+=4)
            {
                    __m128 b = _mm_load_ps(&V[j*dx+i]);
                    center = _mm_mul_ps(b,c0_i);
                    a = _mm_load_ps(&V[j*dx+(i-4)]);
                    c = _mm_load_ps(&V[j*dx+(i+4)]);

                    d = _mm_load_ps(&V[(j-4)*dx+i]);
                    e = _mm_load_ps(&V[(j+4)*dx+i]);

                    u_i2 = _mm_shuffle_ps(a,b,_MM_SHUFFLE(1,0,3,2));//i-2
                    u_i6 = _mm_shuffle_ps(b,c,_MM_SHUFFLE(1,0,3,2));//i+2

                    u_i1 = _mm_shuffle_ps(u_i2,b,_MM_SHUFFLE(2,1,2,1));//i-1
                    u_i5 = _mm_shuffle_ps(b,u_i6,_MM_SHUFFLE(2,1,2,1));//i+1

                    u_i3 = _mm_shuffle_ps(a,u_i2,_MM_SHUFFLE(2,1,2,1));//i-3
                    u_i7 = _mm_shuffle_ps(u_i6,c,_MM_SHUFFLE(2,1,2,1));//i+3

                    u_i4 = a; //i-4
                    u_i8 = c; //i+4 
```

有人可以帮我获得 j-1,j+1 .....j-4,j+4 的位置吗？

这不起作用：

```
 u_j2 = _mm_shuffle_ps(d,b,_MM_SHUFFLE(1,0,3,2));//j-2 (this is incorrect)
                    u_j6 = _mm_shuffle_ps(b,e,_MM_SHUFFLE(1,0,3,2));//j+2

                    u_j1 = _mm_shuffle_ps(u_j2,b,_MM_SHUFFLE(2,1,2,1));//j-1
                    u_j5 = _mm_shuffle_ps(b,u_j6,_MM_SHUFFLE(2,1,2,1));//j+1

                    u_j3 = _mm_shuffle_ps(d,u_j2,_MM_SHUFFLE(2,1,2,1));//j-3
                    u_j7 = _mm_shuffle_ps(u_j6,e,_MM_SHUFFLE(2,1,2,1));//j+3

                    u_j4 = d; //j-4 (this is fine)
                    u_j8 = e; //j+4 
```

我只需要帮助来确定如何获得`(j-1)*dx+i`，`(j+1)*dx+1`......`(j-4)*dx+i`并且`(j+4)*dx+i`不使用未对齐的负载。

作为一种潜在的解决方案，我想在`3*dx`存储的地址中添加位移`d`以获得`(j-1)*dx+i`. `3*dx`并减去存储的地址的位移`e`以获得`(j+1)*dx+i`。类似地添加`2*dx`到地址`d`以获得`j-2`等等。但我不知道使用 SSE 内在函数来实施此策略。

请帮忙。我正在使用英特尔 icc 编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:12:10.000

“谁能帮我获得 j-1,j+1 .....j-4,j+4 的位置。” - 这些不需要洗牌；它们已经与您的 SIMD 通道对齐。

```
u_j2 = _mm_load_ps(&V[(j-2)*dx+i]); 
u_j6 = _mm_load_ps(&V[(j+2)*dx+i]); 
u_j1 = _mm_load_ps(&V[(j-1)*dx+i]); 
u_j5 = _mm_load_ps(&V[(j+1)*dx+i]); 
// and so forth 
```

您*绝对*不能从您标记为的变量中获得这些，`d`并且`e`通过任何可能的重新排列，因为`d`（例如）中的值是`V[j-4, i], V[j-4, i+1], V[j-4, i+2], V[j-4, i+3]`，并且您无法`V[j-2, i]`摆脱它。

提示：考虑 SIMD 通道；这清楚地表明您需要水平而不是垂直重新排列。

提示：考虑当内部循环计数器递增 ( `i+=4`) 时会发生什么。`V[j, i+1..i+5]`上一个循环中的 u_i5 ( ) 现在是`V[j, i-3..i+1]`当前循环中的 u_i3 ( )。您正在计算行中数据的每个偏移版本至少两次。您可能可以多次展开循环并避免做所有额外的工作。

提示：为什么不使用 AVX？使用 _mm256_permute_ps （和 _mm256_permute2f128_ps 如果需要）洗牌，以及相应的加载指令。它几乎快两倍，因为你有两倍宽的 SIMD 寄存器，并且大多数 AVX 指令在现代 CPU 上仍然只需要一个周期，与 SSE 指令相同。

# sql - 访问查询错误

> ID：11161359
> 
> 赞同：1
> 
> 时间：2012-06-22T17:36:39.367
> 
> 标签：sql, ms-access

我收到此访问查询的语法错误，但我看不到它是什么。

> 错误：SELECT 语句包含拼写错误或缺失的保留字或参数名称，或者标点符号不正确。

询问：

```
 SELECT W.[skid number]             AS SkidNum,
       W.job                       AS JobNum,
       W.[job skid number]         AS JobSkidNum,
       W.form                      AS Form,
       W.DATE                      AS DATE,
       W.shift                     AS Shift,
       W.[team member number]      AS Operator,
       W.[roll tender number]      AS Helper,
       W.weight                    AS Weight,
       W. lbs                      AS Pounds,
       ( W.weight / W.lbs ) * 1000 AS Sheets,
       W.press                     AS Press
FROM   [press 1a skid entry] W
UNION ALL
SELECT SF.[skid number]        AS SkidNum,
       SF.job                  AS JobNum,
       SF.[job skid number]    AS JobSkidNum,
       SF.form                 AS Form,
       SF.DATE                 AS DATE,
       SF.shift                AS Shift,
       SF.[team member number] AS Operator,
       SF.[roll tender number] AS Helper,
       ""                      AS Weight,
       ""                      AS Pounds,
       SF.[total sheets]       AS Sheets,
       SF.press                AS Press
FROM   [sheet fed 1a skid entry] SF; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T17:40:01.017

您有一个名为的列`DATE`，这是[MS Access 中的保留字](http://support.microsoft.com/kb/286335)。

如果要使用，请`DATE`在其周围放置括号`[DATE]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T17:43:34.823

你使用了日期这个词，那是一个保留词。

[您可以在此处](http://support.microsoft.com/kb/286335)查看保留字列表

# android - 如何从主屏幕栏修改默认快捷方式目标？

> ID：11161360
> 
> 赞同：0
> 
> 时间：2012-06-22T17:36:41.127
> 
> 标签：android, android-4.0-ice-cream-sandwich, galaxy, rom, homescreen

我正在从我的提供商 ROM 中删除过时软件。我已经毫无问题地做到了这一点。我的问题是，当我尝试从主屏幕栏打开彩信快捷方式时，它显示“未安装应用程序”。有趣的是，如果我从应用程序菜单打开彩信应用程序，它会毫无问题地打开。

这种行为让我相信在安装过程中生成的应用程序快捷方式有错误的目标。

我在哪里可以修改此快捷方式的“目标”？我是否必须反编译 MMS apk 才能解决此问题？

请记住我不是在创建应用程序。我正在修改现有的 rom。

# django - 用 git 覆盖文件夹

> ID：11161363
> 
> 赞同：1
> 
> 时间：2012-06-22T17:36:46.413
> 
> 标签：django, git

我正在学习如何在 EC2 服务器上使用 django，但我正在本地计算机上编辑代码。当我运行以下内容时：

```
python manage.py startapp polls 
```

它创建一个包含各种文件的文件夹。与其将文件单独添加到 git 中，否则我可能会忘记添加每个新创建的文件，这是一种很好的做法：

```
git add (the root django project directory) 
```

每次 django 创建新文件？

如果这不是一个好习惯，你们使用什么方法来确保每次创建新文件时所有文件都被添加到 git 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:57:10.517

我觉得你想多了。忽略您认为应该的文件（如 *.pyc）。添加所有文件或单独执行，无论您喜欢哪个。如果您不小心添加了不应该添加的文件，请检查该文件，以免添加它。如果您已经提交了一个文件，请 git 删除该文件并提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:07:26.907

您使用`git status`，它将为您提供当前未跟踪的所有文件的列表，因此如果您担心会忘记某些内容，可以将其用作参考。

此外，我想说你不想忘记正确设置你的*.gitignore*，然后你可以指示 git 添加所有内容，否则，就像[Mark](https://stackoverflow.com/a/11161642/1476449)建议的那样，你可能会添加 **.pyc* 文件，你不想做。

# ruby-on-rails - Rails 3联系表格，未定义的方法？

> ID：11161364
> 
> 赞同：0
> 
> 时间：2012-06-22T17:36:48.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, contact-form

我正在使用此 Railscast 在 Rails 3 中构建联系表格：[http: //railscasts.com/episodes/326-activeattr?view=asciicast](http://railscasts.com/episodes/326-activeattr?view=asciicast)

我知道我做错的唯一一件事就是填写应该发送消息的位置。我使用以下代码发送消息：

```
mail(:to => "me@myemail.com") 
```

但是，这似乎不起作用，因为每次我提交表单时，都会收到此错误：

```
NoMethodError in MessagesController#create

undefined method `mail' for #<MessagesController:0x00000103734bd8>

Application Trace | Framework Trace | Full Trace
app/controllers/messages_controller.rb:10:in `create' 
```

我应该用什么替换这条线来发送消息？

**消息控制器.rb**

```
class MessagesController < ApplicationController

  def new
    @message = Message.new
  end

  def create
    @message = Message.new(params[:message])
    if @message.valid?
      UserMailer.contact_message(@message).deliver
      redirect_to root_url, notice: "Message sent! Thank you for contacting us."
    else
      render "new"
    end
  end

end 
```

**user_mailer.rb**

```
class UserMailer < ActionMailer::Base

def contact_message(message)
@message = message
mail(:to => "myemail@mymail.com", :subject => "New Message")
end

end 
```

**setup_mail.rb**

```
ActionMailer::Base.smtp_settings = {
:address              => "smtp.gmail.com",
:port                 => 587,
:domain               => "mywebsite.com",
:user_name            => "myemail",
:password             => "secret",
:authentication       => "plain",
:enable_starttls_auto => true
}

ActionMailer::Base.default_url_options[:host] = "localhost:3000" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T02:52:17.920

我刚刚在这里回答了一个类似的问题：[https ://stackoverflow.com/a/17883328/307308](https://stackoverflow.com/a/17883328/307308)

`from`您的邮件方法中缺少该属性。

```
mail(:from => 'system@mymail.com', :to => "myemail@mymail.com", :subject => "New Message") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:52:48.823

您的控制器上的邮件变量上没有创建任何对象。实际上，对于 Rails 上的用户 Mailer，您不必实例化变量，只需使用该方法调用您的 mailer。喜欢：

```
YourMailer.send(params) 
```

你总是可以去 Rails 指南看看一些东西是如何工作的：http: [//guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:53:07.237

您正在创建的 Message 对象只是一个可以在带有验证的表单中使用的对象。您仍然需要实际创建一个 Mailer 对象，并用您从 @message 对象获得的名称/电子邮件/消息填充它。

如果你创建了一个 Mailer（参见[Episode 206 - Action Mailer](http://railscasts.com/episodes/206-action-mailer-in-rails-3)），并且你会在创建一个之后在你的控制器中做这样的事情`MessageMailer`

```
def create
  if @message.valid?
    MessageMailer.contact_message(@message).deliver
    redirect_to root_url, notice: "Message sent! Thank you for contacting us."
  else
    render "new"
  end
end 
```

# maven - 如何使用 Mahout 成功运行 kmeans 集群（尤其是获得人类可读的输出）

> ID：11161372
> 
> 赞同：0
> 
> 时间：2012-06-22T17:37:25.497
> 
> 标签：maven, hadoop, cluster-analysis, mahout, k-means

我尝试按照许多在线教程来运行 Mahout 中的 kmeans 示例。但尚未成功获得有意义的输出。我面临的主要问题是，从文本文件到序列文件的转换并返回。

1.  当我按照“Mahout Wiki”的“合成控制数据聚类”的步骤（https://cwiki.apache.org/MAHOUT/clustering-of-synthetic-control-data.html）我可以运行聚类过程（使用 $MAHOUT_HOME/bin/mahout org.apache.mahout.clustering.syntheticcontrol.kmeans.Job) 并创建了一些可读的控制台输出。但我希望从聚类过程中获取输出文件（因为大小很大）。Mahout 聚类生成的输出文件都是序列文件，我无法将它们转换为可读文件。当我尝试执行“clusterdump”（$MAHOUT_HOME/bin/mahout clusterdump --seqFileDir output/clusters-10...）时出现错误。首先它抱怨“seqFileDir”选项出乎意料，我猜集群转储没有“seqFileDir”或者我遗漏了一些东西。

2.  尝试以“mahout in action”的方式使用 Mahout 似乎很棘手。我不确定编译该代码所需的类（“import ??”）是什么。

您能否建议我在 Mahout 上成功运行 kmeans 的步骤？特别是如何从序列文件中获得可读的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:14:59.567

[关于第二个问题 - 您可以从存储库](https://github.com/tdunning/MiA)获取本书的源代码。分支中的代码`master`适用于 Mahout 0.5，而分支`mahout-0.6`&`mahout-0.7`中的代码适用于对应的 Mahout 版本。

源代码也发布到[书的网站](http://manning.com/owen/)，所以你可以在那里下载（但这是仅适用于 Mahout 0.5 的版本）

PS 如果你现在正在看书，那么我建议使用 Mahout 0.5 或 0.6，因为所有代码都检查了 0.5 版本，而对于其他版本，它会有所不同——尤其是 Mahout 0.7 中的集群代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:39:00.343

至于clusterdump中的seqFileDir，需要使用--input而不是--seqFileDir。

我正在使用 Mahout 0.7。我用来（例如）获取简单转储的对 clusterdump 的调用是：

```
mahout clusterdump --input output/clusters-9-final --pointsDir output/clusteredPoints --output <absolute path of dir where you want to output>/clusteranalyze.txt 
```

确保上面的目录**output/clusters-9-final**的路径对于您的系统是正确的。根据聚类算法，此目录可能不同。查看输出目录并确保使用带有“final”init 一词的目录。

要将数据转储为 CSV 或 GRAPH_ML，您需要在上述调用中添加 -of CSV 参数。例如：

```
mahout clusterdump --input output/clusters-9-final -of CSV --pointsDir output/clusteredPoints --output <absolute path of dir where you want to output>/clusteranalyze.txt 
```

希望有帮助。

# shell - 列出busybox中的所有环境变量名

> ID：11161373
> 
> 赞同：3
> 
> 时间：2012-06-22T17:37:28.163
> 
> 标签：shell, unix, busybox, env

具有多行值的环境变量可能会混淆`env`的输出：

```
# export A="B
> C=D
> E=F"
# env
A=B
C=D
E=F
TERM=xterm
SHELL=/bin/bash
USER=root
MAIL=/var/mail/root
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PWD=/root
LANG=en_US.UTF-8
PS1=\h:\w\$
SHLVL=1
HOME=/root
LOGNAME=root
_=/usr/bin/env 
```

在这种情况下，我**不能**只使用`awk -F=`提取所有名称，因为它显示错误的名称`C`和`E`：

```
# env | awk -F= '{print $1}'
A
C
E
TERM
SHELL
USER
MAIL
PATH
PWD
LANG
PS1
SHLVL
HOME
LOGNAME
_ 
```

然后我发现`env`支持标志`-0`以 0 字节而不是换行符结束每个输出行，因此使用`sed`我可以切断以下值`bash`：

```
# env -0 | sed -e ':a;N;$!ba;s/\([^=]\+\)=\([^\x00]*\)\x00/\1\n/g'
A
TERM
SHELL
USER
MAIL
PATH
PWD
LANG
PS1
SHLVL
HOME
LOGNAME
_ 
```

但是 BusyBox 的版本`env` [不支持](http://www.busybox.net/downloads/BusyBox.html#env)flag `-0`。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T03:50:56.570

如果您使用的是 linux（我认为busybox 只在 linux 上运行，但我可能错了），它包含一个 NUL 分隔的环境，与给您`/proc/self/environ`的形式相同。`env -0`您可以替换`env -0 |`为`< /proc/self/environ`.

```
sed -e ':a;N;$!ba;s/\([^=]\+\)=\([^\x00]*\)\x00/\1\n/g' < /proc/self/environ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T03:08:22.763

这可能不是一个优雅但有效的解决方案。它首先从 的输出中提取所有可能的名称`env`，然后使用 shell 的扩展来验证它们中的每一个`${parameter:+word}`。最后它会删除重复项，因为相同的变量名可以打印在`env`'s 输出中的多行上（作为真正的变量名和其他变量的多行值的一部分）：

```
env | awk -F= '/[a-zA-Z_][a-zA-Z_0-9]*=/ {
        if (!system("[ -n \"${" $1 "+y}\" ]")) print $1 }' | sort | uniq 
```

PS：该`| sort | uniq`部分也可以在`awk`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-09T23:46:25.863

如果您的环境变量*值*包含空值，这将中断。但这也会破坏[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html)兼容性。

所以它应该工作。

...除非您希望遇到包含换行符的环境变量*名称。*在这种情况下，换行符在显示时将被截断。但是我似乎无法理解如何在busybox shell中创建一个带有换行符的环境变量。无论如何，我当地的贝壳都对此犹豫不决。所以我认为这不会是一个大问题。据 POSIX 所说，`Other characters may be permitted by an implementation; applications shall tolerate the presence of such names.`所以我认为剥离它们而不是错误是*可以容忍*的。

```
# Read our environment; it's delimited by null bytes.
# Remove newlines
# Replace null bytes with newlines
# On each line, grab everything before the first '='
cat /proc/self/environ | tr -d '\n' | tr '\0' '\n' | cut -d '=' -f 1 
```

# python - 无法使用织物中的python将字符串转换为整数

> ID：11161374
> 
> 赞同：2
> 
> 时间：2012-06-22T17:37:30.530
> 
> 标签：python, ssh, fabric

这让我发疯了。我正在使用织物通过 SSH 在远程服务器上执行一些视频处理任务。

在我们进入这个函数之前，我在远程机器上调用 ffprobe 来获取我将发送到该服务器的视频信息。我正在尝试从 ffprobe 的输出中解析出有关 Duration: 的信息，以便我可以以秒为单位获得视频的长度。这是函数的麻烦部分，我似乎无法将字符串转换为整数。

```
with cd("~/videos"):
   command = "ffprobe  "
   command += videoNameOnly
   output = run(command)
   durationIndex = output.find("Duration:")
   durationIndex = durationIndex + 10
   duration = output[durationIndex:]
   durationFrags = duration.split(":")
   print "====================================="
   print durationFrags[0].strip()
   print durationFrags[1].strip()
   print durationFrags[2].strip()
   hours = int(durationFrags[0].strip()) 
```

输出如下

```
00
00
52.90, start
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/fabric/main.py", line 712, in main
    *args, **kwargs
  File "/usr/local/lib/python2.7/dist-packages/fabric/tasks.py", line 298, in execute
    multiprocessing
  File "/usr/local/lib/python2.7/dist-packages/fabric/tasks.py", line 197, in _execute
    return task.run(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/fabric/tasks.py", line 112, in run
    return self.wrapped(*args, **kwargs)
  File "/home/amyface/fabfile.py", line 26, in main
    encode();
  File "/home/amyface/fabfile.py", line 34, in encode
    runJobs(jobs,cursor)
  File "/home/amyface/fabfile.py", line 60, in runJobs
    getMiddleFrame(sourceVideo,videoNameOnly,cursor)
  File "/home/amyface/fabfile.py", line 96, in getMiddleFrame
    hours = int(durationFrags[0].strip())
ValueError: invalid literal for int() with base 10: '\x1b[0m\x1b[0;39m\x1b[0m\x1b[0;39m\x1b[0m\x1b[0;39m00'
Disconnecting from [I have removed the server name from here] 
```

为什么它不允许我将“00”转换为整数？“以 10 为基数：”之后的错误中的奇怪值是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:40:30.197

我对面料一无所知，但根据`ValueError`, `durationFrags[0].strip()`is `'\x1b[0m\x1b[0;39m\x1b[0m\x1b[0;39m\x1b[0m\x1b[0;39m00'`, not `'00'`。这会产生设计用于终端的输出吗？对我来说，这些看起来像 ANSI 转义码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:54:14.900

关键是这样的：

```
ValueError: invalid literal for int() with base 10:  '\x1b[0m\x1b[0;39m\x1b[0m\x1b[0;39m\x1b[0m\x1b[0;39m00' 
```

如此处所示[，](https://stackoverflow.com/questions/1833873/python-regex-escape-characters)这些是 ANSI 终端代码。在字符串中，`\x1b`是`ESC`字符

您可以使用上面链接的答案中所示的正则表达式来删除不需要的代码并提取最后一个“00”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-25T12:32:59.443

执行的命令 ( `ffprobe`) 正在编写[终端颜色代码](https://misc.flogisoft.com/bash/tip_colors_and_formatting)。

`AV_LOG_FORCE_NOCOLOR`尝试通过设置环境变量来告诉这个程序不要使用它们

# javascript - 使用 Sencha touch 2 在应用程序中登录 Facebook

> ID：11161375
> 
> 赞同：-1
> 
> 时间：2012-06-22T17:37:35.413
> 
> 标签：javascript, facebook, html, extjs, sencha-touch-2

我是 Sencha touch 2 的新手，尝试了 Sencha2 的初学者指南。我正在我的应用程序中寻找一个 facebook 登录按钮。我无法弄清楚如何将 js 部分等放入 sencha 入门应用程序中。

有人可以指点吗？

我也不确定如何在框架中添加自定义 js 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T12:32:23.017

看看[Jog with Friends 的例子](http://docs.sencha.com/touch/2-0/#!/example/jog-with-friends)。我不得不说，这个例子的很多部分我不喜欢或者不是很 Sencha-y（在我看来），但我几乎复制粘贴了我自己的概念验证应用程序的 facebook 登录部分.

要查看代码，只需下载 sencha touch 2 代码（您可能已经下载过），您可以访问其中的文件。

# c# - 获取表的关系

> ID：11161385
> 
> 赞同：2
> 
> 时间：2012-06-22T17:38:12.167
> 
> 标签：c#, sql-server, ado.net, foreign-keys

我想`Table`在我的 c# 代码中获取 Sql Server 的关系（或外键）。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:05:49.237

这将获得所有`dbo.YourTableName`引用的外键：

```
SELECT 
    FK = OBJECT_NAME(pt.constraint_object_id),
    Referencing_col = pc.name, 
    Referenced_col = rc.name
FROM sys.foreign_key_columns AS pt
INNER JOIN sys.columns AS pc
ON pt.parent_object_id = pc.[object_id]
AND pt.parent_column_id = pc.column_id
INNER JOIN sys.columns AS rc
ON pt.referenced_column_id = rc.column_id
AND pt.referenced_object_id = rc.[object_id]
WHERE pt.parent_object_id = OBJECT_ID('dbo.YourTableName'); 
```

如果你想获取所有引用的外键`dbo.YourTableName`，它只是略有不同：

```
SELECT 
    -- add these two columns:
    [Schema] = OBJECT_SCHEMA_NAME(pt.parent_object_id),
    [Table] = OBJECT_NAME(pt.parent_object_id),
    FK = OBJECT_NAME(pt.constraint_object_id),
    Referencing_col = pc.name, 
    Referenced_col = rc.name
FROM sys.foreign_key_columns AS pt
INNER JOIN sys.columns AS pc
ON pt.parent_object_id = pc.[object_id]
AND pt.parent_column_id = pc.column_id
INNER JOIN sys.columns AS rc
ON pt.referenced_column_id = rc.column_id
AND pt.referenced_object_id = rc.[object_id]
WHERE pt.referenced_object_id = OBJECT_ID('dbo.YourTableName');
---------^^^^^^^^^^ change this 
```

你可以把它放在一个存储过程中，参数化你传递给函数的由两部分组成的名称`OBJECT_ID`，然后从你的 C# 代码中调用这个存储过程。

# c - 如何从文件中读取变量

> ID：11161387
> 
> 赞同：1
> 
> 时间：2012-06-22T17:38:15.290
> 
> 标签：c, file, variables, file-io

我正在开发的程序会创建一个包含高分部分的文件（about.txt）。

.txt 的第 12 行是...

纯文本（没有高分）：

```
- with <0> 
```

C：

```
fprintf(about,"-%s with <%ld>",highname,highscore); 
```

在写入新的分数之前，我需要从文件中读取分数并测试它是否大于当前的高分。

我需要...

```
if(score > highscore)
  highscore=score; 
```

唯一的问题是我如何从文件中获得高分。

我自己做了一些研究，我确信这比我做的要容易得多，但是当我环顾四周时，我找不到任何方法来做到这一点。

谢谢你。/////////////////////////////////编辑//////////////// //////// 创建文件：

```
 FILE *about;
    fpos_t position_name;
    fpos_t position_score;
    ...
    fprintf(about,"\n\nHIGHSCORE:\n\n");
    fprintf(about,"-");
    fgetpos(about,&position_name);
    fprintf(about,"%s",highname);
    fprintf(about,"with");
    fgetpos(about,&position_score);
    fprintf(about,"%ld",highscore);
    fclose(about);
    ... 
```

获得分数：

```
 FILE *about;
      about = fopen("about.txt","r");

      fseek(about,position_name,SEEK_SET);
      fscanf(about,"%s",highname);
      fseek(about,position_score,SEEK_SET);
      fscanf(about,"%ld",highscore);
      fclose(about); 
```

更改变量（注意.. highscore/highname 是全局变量）

```
if(score >= highscore) //alter highscore
    {
      highscore = score;
      highname = name;
      puts("NEW HIGHSCORE!!!\n");
    } 
```

我得到错误：

```
error: incompatible types when assigning to type 'char[3]' from type 'char' 
```

在这条线上：

```
highname = name; 
```

此处声明的名称/分数/高名称/高分数（在头文件中）：

```
char name[3];
char highname[3];
long score;
long highscore; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:42:13.940

你需要使用它`fscanf`来做到这一点；这有点像 fprintf 的倒数。

看看这里的文档：http: [//cplusplus.com/reference/clibrary/cstdio/fscanf/](http://cplusplus.com/reference/clibrary/cstdio/fscanf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:00:40.483

您可以使用`fscanf`的鲜为人知但非常强大的正则表达式功能，以及它基于正则表达式跳过条目的能力：

打开文件，然后循环跳过前 11 行。然后读取分数，如下所示：

```
FILE *f = fopen("about.txt","r");
int i, score;
char buf[1024];
for (i = 0 ; i != 11 ; i++) {
    fgets(buf, 1024, f);
}
fscanf(f, "%*[^<]%*[<]%d", &score);
printf("%d\n", score); 
```

这将跳过文件中的所有内容直到开始`<`括号，然后跳过括号本身，并读取一个整数条目。请注意，`%*`在格式字符串中指定要跳过的条目`fscanf`。[这是 ideone 的一个片段](http://ideone.com/j88OK)。

**EDIT** -- In response to the additional question from your edit: you cannot assign arrays like that, you should use [`memcpy`](http://www.cplusplus.com/reference/clibrary/cstring/memcpy/) instead:

```
memcpy(highname, name, 3); 
```

# php - 使用 NuSOAP 检索结果时出现 XML 错误（无效字符）

> ID：11161391
> 
> 赞同：4
> 
> 时间：2012-06-22T17:38:23.967
> 
> 标签：php, xml, nusoap

我正在使用 NuSOAP 与第三方 API 进行交互，包括运行数据库查询和检索结果。它的工作非常可靠，但我只是遇到了一个特定查询的问题。NuSOAP 没有返回结果，而是生成了一个错误： `XML error parsing SOAP payload on line 2: Invalid character`

原来，结果集包含以下内容： `Léa Lincoln`. 当我手动将重音字符更改为“常规”字符时，查询运行良好，NuSOAP 没有错误。

所以，我的问题是如何处理这个问题。我无法控制来自数据库的数据，并且我需要 NuSOAP 每次出现非标准字符时不要抛出错误并停止。谢谢。——杰夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T22:38:21.317

经过搜索和测试后，似乎 CAZypedia 工作人员的破解是解决方案：

```
function nusoap_parser($xml,$encoding='UTF-8',$method='',$decode_utf8=true){
    parent::nusoap_base();

    // Hack by CAZypedia crew to fix character encoding of NCBI XML data from SOAP
    // This prevents non-English characters from causing the parser to choke.
    $xml = iconv("ISO-8859-1", "UTF-8//TRANSLIT", $xml);
    // End hack.
    $this->xml = $xml;
    $this->xml_encoding = $encoding;
    $this->method = $method;
    $this->decode_utf8 = $decode_utf8; 
```

链接：http: [//sourceforge.net/projects/nusoap/forums/forum/193579/topic/3718945](http://sourceforge.net/projects/nusoap/forums/forum/193579/topic/3718945)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-28T02:35:34.507

我遇到了同样的问题，我通过更改文件 nusoap.php 和 class.nusoap_base.php 中的行 var $soap_defencoding = 'UTF-8' 解决了这个问题

在这些文件中有两行，$soap_defencoding = 'UTF-8' 和 $soap_defencoding = 'ISO-8859-1'，一行被注释，另一行没有。

我尝试将评论从一个选项移到另一个选项，它奏效了！

# javascript - Javascript 变量意外未定义

> ID：11161399
> 
> 赞同：2
> 
> 时间：2012-06-22T17:38:44.513
> 
> 标签：javascript, scope, undefined

对于此代码块：

```
 if(!skipit)
    {
    var update_argument='';
    if (document.formname.fieldname)
      {
        update_argument=document.formname.fieldname[document.formname.fieldname.selectedIndex].value;
      }
    window.setTimeout('updatepcols(update_argument)',250);
       return false;
    } 
```

我在 setTimeout 调用中收到一个错误，即“update_argument”未定义。当我将分配空字符串值的行从“var”更改为“window.”时，错误消失了，代码工作了。我猜这里存在范围问题，但我不遵循它。为什么在这种情况下 update_argument 是未定义的，但是将它放在窗口对象中让我可以使用它？（updatepcols 是一个更新定价列的函数。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T17:41:47.757

试试这个。以这种方式使用[闭包](https://developer.mozilla.org/en/JavaScript/Guide/Closures)可以保留对`update_argument`

```
setTimeout(function(){
    updatepcols(update_argument);
},250); 
```

我有一种有趣的感觉，您作为*text*传递的脚本在评估时会在全局范围内执行，即在`update_argument`声明的本地范围之外。

```
setTimeout('updatepcols(update_argument)',250); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:48:32.113

我不确定这是否是范围问题，但改变你的 setTimeout 调用应该可以解决问题：

```
window.setTimeout('updatepcols('+update_argument+')',250); 
```

这个小提琴演示：http: [//jsfiddle.net/mLrqZ/](http://jsfiddle.net/mLrqZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:57:19.980

改变你的表情。如果要将局部变量传递给回调函数，应该这样写：

```
window.setTimeout('updatepcols('+update_argument+')', 250); 
```

或者，如果您想改用闭包，请执行以下操作：

```
window.setTimeout(function(){ updatepcols(update_argument) }, 250); 
```

是的，就像其他人说的那样，使用闭包是更好的做法。

# mysql - 添加没有外键约束的索引性能提升

> ID：11161400
> 
> 赞同：0
> 
> 时间：2012-06-22T17:38:47.860
> 
> 标签：mysql, database, database-design

我正在使用一个相当旧的 Web 应用程序，它使用 MySQL 作为数据库。90% 的表是 MyISAM，它们的外键大部分没有索引。

我正在考虑将整个事情移植到 InnoDB，这样我就可以应用外键约束等。然而，由于应用程序很旧而且有点笨拙，它一直依赖代码来强制执行参照完整性，我担心在数据库中进行这种更改可能会导致多个代码失败。我没有时间浏览整个代码库并确保一切都按预期进行，我没有理由怀疑它不是我只是意识到添加外键约束的可能性导致不可预见问题。

我在想另一种方法可能是简单地在外键字段上添加索引而不创建约束。我认为这将提高性能，而不会损害现有功能。谁能告诉我是否有理由不这样做？这样做会获得与添加索引和外键约束相同的性能提升吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:46:31.383

是的，只需添加索引就可以为您带来几乎相同的性能提升。外键约束更多地是为了参照完整性而不是性能。

在某些情况下，添加这些约束有助于 DB 引擎构建更有效的执行计划；但与将目标明确的索引添加到无索引数据库的好处相比，这是一个次要考虑因素。

# android - 广播接收器未接收

> ID：11161402
> 
> 赞同：0
> 
> 时间：2012-06-22T17:38:56.917
> 
> 标签：android, service, broadcastreceiver

我已经阅读了 SO questions 中的说明和示例，但仍然无法实现一个简单的 BroadcastReceiver，它根本没有收到任何东西，有人可以就以下代码提供一些建议吗？

tnx

我的活动：

```
public class Receiver1Activity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        IntentFilter filter = new IntentFilter(MyService.MY_ACTION);
        registerReceiver(new MyReceiver(), filter);
        Intent intent = new Intent();
        startService(intent);
    }
} 
```

我的接收器：

```
public class MyReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context arg0, Intent arg1) {
        Log.i("MyReceiver", "onreceive");       
    }
} 
```

我的服务，它发送广播：

```
public class MyService extends Service {

    public static final String MY_ACTION = "com.receiver1.myaction";
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Intent intent2 = new Intent(MY_ACTION);
        sendBroadcast(intent2);
        return START_NOT_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.receiver1"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Receiver1Activity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name=".MyService"></service>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:48:34.883

你确定你的服务已经开始了吗？看起来您只是创建了一个空白意图并调用 startService()。

您的 broadcastReceiver 似乎是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:42:25.557

您需要[在 AndroidManifest.xml 中注册您的接收器](http://developer.android.com/guide/topics/manifest/receiver-element.html)。在您这样做之前，Android 操作系统将无法找到您的 BroadcastReceiver。

# collada - 有没有快速将 .dae 文件转换为 .osg 文件的方法？

> ID：11161420
> 
> 赞同：2
> 
> 时间：2012-06-22T17:40:38.583
> 
> 标签：collada, openscenegraph

那么有没有一种快速的方法可以将 .dae 文件（COLLADA）转换为 .osg（OpenSceneGraph）文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:45:36.700

你有 collada loader 插件和标准命令行 osg utils 吗？如果是这样，

```
osgconv FILE.dae FILE.osg 
```

从命令行会做到这一点。

如果您没有 COLLADA 插件，您可以使用带有 Ryan Pavlik 的 osg 导出器的 sketchup：[https ://github.com/rpavlik/sketchupToOSG](https://github.com/rpavlik/sketchupToOSG)

附带说明一下，这意味着将 Google 3D 仓库中的任何内容转换为 osg 原生格式非常简单，这意味着大量的优秀模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:54:05.223

据我所知，Blender 2.49 能够导入 Collada 文件并导出 OpenSceneGraph 文件。

您可以给它一个托盘并下载此版本的 Blender 以及 OSG 的导出器。

[http://forum.openscenegraph.org/viewtopic.php?p=40070#40070](http://forum.openscenegraph.org/viewtopic.php?p=40070#40070)

[http://download.blender.org/release/](http://download.blender.org/release/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:01:24.307

还有一个 3DS Max 的 .osg 导出器：http: [//osgmaxexp.wiki.sourceforge.net](http://osgmaxexp.wiki.sourceforge.net)

您可以在那里导入您的 .dae，然后使用导出器创建一个 .osg。

# linux - 如何在未签出的分支上应用 git 补丁？

> ID：11161423
> 
> 赞同：1
> 
> 时间：2012-06-22T17:41:11.390
> 
> 标签：linux, git, tags

我想知道是否可以在未签出的分支上应用 git 补丁？

我想这样做是因为我不想在我的工作分支上使用这个补丁，而是在我现在不使用的专用分支上。这是一个大分支，检查它会：

1.  使我的繁茂标签无用或损坏。重建它们需要很长时间。
2.  另外，如果我签出这个分支并回滚到我的工作分支，我的内核将强制重建......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:13:13.763

这是非常间接的，但有可能。您可以通过仅将其应用于索引来做到这一点。

简单的方法：

```
$ git read-tree <branch>
$ git apply --cached <patch>
$ git update-ref refs/heads/<branch> \
    -m "<optional reflog message>" \
    $(git commit-tree $(git write-tree) -m "<message>" -p <branch>) 
```

如果您希望一切都“更干净”（即，提交的 reflog 看起来很正常），那么这里有一个更长的方法，更冗长：

```
$ git checkout -b temp             # Create a temp branch
$ git reset --mixed <branch>       # Reset the index to the branch you want
$ git apply --cached <patch>       # Apply the patch to the index
$ git commit                       # Create a commit object

  # Move the branch's reference to the new commit
$ git update-ref refs/heads/<branch> refs/heads/temp

  # Clean up
$ git checkout --force <original_branch>
$ git branch -d temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:56:55.850

您可以从当前存储库克隆到另一个目录，然后检查您想要在那里工作的分支吗？AFAIK，您只能将补丁或樱桃选择提交等应用于您工作目录中的文件。

对于我从事的一些项目，我的系统上有多个存储库副本，每个副本都签出不同的分支。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:07:54.773

我认为这不可能，主要是因为这个原因：

您将如何处理补丁失败？

# c# - 使用带有 WebBrowser 和 WebRequest 的代理，如何包含用户名和密码？

> ID：11161434
> 
> 赞同：1
> 
> 时间：2012-06-22T17:42:08.223
> 
> 标签：c#, proxy

我从[Load web browser with web response](https://stackoverflow.com/questions/6172239/how-to-load-web-browser-with-web-response)得到这个。并且想知道如何使用此代码来使用需要用户名和密码才能工作的代理。

```
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("http://example.com");
webRequest.Proxy = new WebProxy(host, port);

HttpWebResponse response = (HttpWebResponse)webRequest.GetResponse();
Stream receiveStream = response.GetResponseStream();

WebBrowser webBrowser = new WebBrowser();
webBrowser.DocumentStream = receiveStream; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:48:49.337

```
var webProxy = new WebProxy(host,port);
webProxy.Credentials = new NetworkCredential("username", "password", "domain");
var webRequest = (HttpWebRequest)WebRequest.Create("http://example.com");
webRequest.Proxy = webProxy; 
```

# c - 使用一个结构到另一个结构 c

> ID：11161438
> 
> 赞同：3
> 
> 时间：2012-06-22T17:42:14.280
> 
> 标签：c, struct

`struct`我在**C**语言 中使用 a 时遇到问题。
这很奇怪！
我不能`course`在结构中使用`student`结构。
我之前已经定义过了，但是……为什么？

```
struct course
{
    int no;
    char name[30];
    int credits;
    float score;
};

struct student   
{
int no;
char name[50];
course c[3];
}; 
```

我的语言是**c**而不是**c++**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T17:45:36.867

`class`C++ 和 C 之间的区别之一是您可以省略类型关键字，例如`struct`在使用 C++ 类型时。

问题是线路`course c[3];`。为了让它工作，你有两个选择——你可以在你的`struct course`:

```
typedef struct _course  // added an _ here; or we could omit _course entirely.
{
    int no;
    char name[30];
    int credits;
    float score;
} course; 
```

`struct`或者您可以在虚线前添加关键字，即。**`struct`**`course c[3];`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T17:44:06.810

您需要在结构名称前加上`struct`关键字：

```
struct course
{
    int no;
    char name[30];
    int credits;
    float score;
};

struct student   
{
    int no;
    char name[50];
    struct course c[3];
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T17:43:19.587

```
struct course c[3]; 
```

应该管用...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T17:46:07.683

```
struct student {
    /* ... */
    struct course c[3];
} 
```

或者

```
typedef struct _course {
    /* ... */
} course;

struct student {
    /* ... */
    course c[3];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T17:52:40.757

您实际上应该能够定义一个匿名结构然后 typedef 它，所以：

```
typedef struct {
    /* stuff */
} course; 
```

然后正如其他人所说，

```
struct student {
    course c[3];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T23:14:08.397

typedef 很有帮助，因为它们允许您缩短声明，因此您不必总是输入单词`struct`.

这是一个涉及对结构进行类型定义的示例。它还在学生结构中包含一个课程结构。

```
#include <stdio.h>
#include <string.h>

typedef struct course_s
{
    int no;
    char name[30];
    int credits;
    float score;
} course;

typedef struct student_s   
{
int no;
char name[50];
course c[3];
} student;

bool isNonZero(const int x);

int main(int argc, char *argv[])
{
    int rc = 0;

    student my_student;
    my_student.c[0].no = 1;

    return rc;
} 
```

# git - 裸存储库权限。

> ID：11161442
> 
> 赞同：5
> 
> 时间：2012-06-22T17:42:22.357
> 
> 标签：git, ubuntu, git-bare

我在 ubuntu 服务器上设置了 git，我将本地 repo 推送到服务器并收到以下错误。当我更改两个文件夹的权限时，它可以工作。我只是想了解为什么当我设置`git init --bare`它时，它不仅仅适用于它创建的权限。`777`这些文件夹的最佳权限也是如此吗？有没有更合法的方法来解决这个问题？

第一个错误：

```
error: insufficient permission for adding an object to repository database ./objects 
```

第一个解决方案：

```
sudo chmod 777 objects/ 
```

第二个错误：

```
fatal: Unable to create '/srv/git/example.com.git/refs/heads/master.lock': Permission denied 
```

第二种解决方案：

```
sudo chmod 777 refs/heads/ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T18:06:38.830

跑步

```
$ git init --shared=0777 --bare 
```

应该做你想做的。

来自[http://git-scm.com/docs/git-init](http://git-scm.com/docs/git-init)

或者，您可以在您的服务器上设置一个 openssh 服务器，并让用户通过 ssh 访问此存储库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T06:58:54.297

您想要使用 777 权限是一个非常糟糕的信号。你做错了什么。

首先，正如已经建议的那样，考虑使用[gitolite](http://github.com/sitaramc/gitolite)。

如果你不可能为一两个贡献者拥有超过一两个 repos，gitolite 可能看起来是一种开销，特别是如果你以前从未使用过它。（但我仍然建议使用它。）

在我开始使用 gitolite 之前，我使用[这个脚本](https://github.com/agladysh/misc/blob/master/git/new-shared-git-repo)来创建我的共享 git 存储库。这个怎么运作：

1.  所有 Git repo 用户（特定 repo 的）都应该在同一个组中。
2.  回购目录应归该组所有。
3.  应该在这个目录上设置粘性组位（确保不要在文件上设置它），所以当用户提交内容时，组将被保留。
4.  Git repo 应该使用`--shared`选项初始化，以赋予它组写入权限。

# java - 如何在 Eclipse 中为 Java 匿名方法设置代码格式化程序

> ID：11161444
> 
> 赞同：6
> 
> 时间：2012-06-22T17:42:30.837
> 
> 标签：java, eclipse, coding-style

我正在使用 Eclipse 进行 Android 开发，并且我已经设置了我的代码格式化样式，但仍然有我无法弄清楚如何在 Eclipse 中格式化的匿名方法。这就是 Eclipse 现在格式化匿名方法的方式：

```
// The BroadcastReceiver that listens for discovered devices and
    // changes the title when discovery is finished
    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
                                                  @Override
                                                  public void onReceive(Context context, Intent intent) {
                                                      String action = intent.getAction();
                                                      Utils.Log.i("BLUETOOTH: " + action);
                                                      if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                                                          // Get the
                                                          // BluetoothDevice
                                                          // object from the
                                                          // Intent
                                                          BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                                                          // If it's already
                                                          // paired, skip it,
                                                          // because it's been
                                                          // listed already
                                                          if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                                                              if (mNewDevicesArrayAdapter.getCount() == 0) {
                                                                  mNewDevicesArrayAdapter.add(device);
                                                              }
                                                              btDevicesUpdateList.add(device);
                                                          }
                                                      }
                                                      else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                                                          mNewDevicesArrayAdapter.setItems(btDevicesUpdateList);
                                                          mNewDevicesArrayAdapter.notifyDataSetChanged();
                                                          btDevicesUpdateList.clear();
                                                          mBtAdapter.startDiscovery();
                                                      }
                                                      else if (BluetoothAdapter.ACTION_STATE_CHANGED.equals(action)) {
                                                          if (mBtAdapter.getState() == BluetoothAdapter.STATE_ON) {
                                                              switchToView(viewBluetoothOn);
                                                              firstTimeDiscover();
                                                          }
                                                          else if (mBtAdapter.getState() == BluetoothAdapter.STATE_OFF) {
                                                              switchToView(viewBluetoothOff);
                                                          }
                                                      }
                                                  }
                                              }; 
```

看？它非常糟糕。将匿名方法声明格式化为保留在左侧并且不在`=`等号下的正确设置是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T09:19:11.547

我相信导致这种错误格式的设置是“对齐列中的字段”，如果你关闭它，类/接口实现应该从行首缩进而不是等号。

我在 Eclipse 中打开了一个错误，以修复默认行为或为类/接口实现添加另一个设置。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=385901](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385901)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:25:40.113

这个问题的解决方法是稍微改变你的编码风格。剪切并粘贴以下内容并运行您的格式化程序。风格#2 看起来不那么蹩脚。

```
// **Style #1** - Formatter handles poorly
JDialog jDialog1 = new JDialog(new JFrame()) {
    public void setBackground(final Color c) {
       super.setBackground(c);
    }
};

// **Style #2** - Formatter handles well.
JDialog jDialog2;
{
    jDialog2 = new JDialog(new JFrame()) {
        public void setBackground(final Color c) {
            super.setBackground(c);
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:49:21.827

似乎您有某种自定义格式化程序设置。转到项目属性/Java 代码样式/格式化程序/启用项目特定设置，然后选择“Java 约定”内置格式化程序配置文件。

# php - 引用自增列？

> ID：11161448
> 
> 赞同：1
> 
> 时间：2012-06-22T17:42:42.547
> 
> 标签：php, mysql

我有 2 个正在使用的表使用相同的列；一个表包含文本，另一个表包含图像；他们使用列 listing_id 以便正确的文本与正确的图像一起显示；

我的问题是，因为列listing_id 是自动递增的，所以我的第一个表能够插入能够插入文本的查询，然后+1 列listing_id；但是我使用另一个 INSERT INTO 查询的第二个表没有正确的listing_id，

因为listing_id的一些条目已被删除，这意味着第二个表的listing_id将永远在第一个表listing_id的后面；

如何引用列listing_id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:45:22.413

您需要在从属表中创建一个名为“parent_id”的 INT 列，该列存储它所引用的主表的 id。当您从第一个选择记录时，您将使用第一个字段的 auto_increment 字段与第二个字段的“parent_id”连接表。

正如 MrSlayer 提到的，使用新插入的第一个表的 ID 来更新“parent_id”。为了唯一性，您通常*应该*在第二个表中有一个唯一的 ID 字段，但它不应该是与第一个表的关系的一部分。

如果您不清楚如何获取插入时第一个表 auto_increments 的 id，请使用[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php).

```
mysql_query("INSERT INTO table1 ...");
echo "Last inserted record_id in table1 was " .  mysql_insert_id();

INSERT INTO table1 (mytextcolumn) VALUES('text');
INSERT INTO table2 (parent_id,image_name) VALUES(LAST_INSERT_ID(),'someimage.png'); 
```

# django - mongodb 何时关闭连接以及何时使它们持久化

> ID：11161450
> 
> 赞同：2
> 
> 时间：2012-06-22T17:42:44.900
> 
> 标签：django, mongodb, database-connection

我正在使用 mongodb 编写一个 Django 应用程序。对于一个简单的 GET 请求，我需要从我在 HTTPRequestHandler 中建立连接的数据库中获取结果。HTTPRequest 的 db 操作不是繁重的操作。我是否应该关闭该处理程序本身的连接。她是代码片段。

```
def search(request):
    dbConnection = Connection('hostname', int('port-no'))
    ... made a small query to db. (not a heavy operation)
    dbConnection.close()
    return HTTPResponse(result) 
```

此代码是否适合连接和关闭连接。我想知道的是它在性能方面是否很快。我希望这个“搜索”HTTPRequestHandler 能够快速工作。如果这不是要走的路，有人可以解释一下我们应该何时以及如何关闭连接以及何时使它们在 mongo 中持久化。

# google-apps-script - 如何将数组中的字符串转换为 ISO Latin-1

> ID：11161459
> 
> 赞同：0
> 
> 时间：2012-06-22T17:43:26.513
> 
> 标签：google-apps-script

我正在尝试根据电子表格中的值构建一个 HTML 报告，如下所示：

* * *

```
Ereigniszeilen += EreignisVorlage 
          .replace("<ZeileNr>", BerichtZaehler)
          .replace("<KindName>", AlleEintraege[j][ColumnNameKind-1])
          .replace("<LeistungsArt>", LeistungsArt)
          .replace("<Datum>", DatumLeistung)
          .replace("<CheckIn>", CheckIn)
          .replace("<CheckOut>", CheckOut)
          .replace("<TotalStunden>", TotalStunden)
          .replace("<Bemerkung>", AlleEintraege[j][ColumnBemerkung-1]);

var AttachmentInhalt = AttachmentVorlage.replace("<EVENTS>", Ereigniszeilen);
var AttachmentInhalt = AttachmentVorlage
   .replace("<BerichtsDatum>", BerichtsDatumFormatiert)
   .replace("<EVENTS>", Ereigniszeilen); 

var Bericht = [{fileName:"Bericht-Rapport.html", content: AttachmentInhalt}] 
```

* * *

然后通过电子邮件发送：

* * *

```
MailApp.sendEmail("heinz.ruffieux@tfv-lac.org", TitelMitKind, "", //Versand des Emails
          {htmlBody: "Guten Tag liebe Eltern,<br> Bonjour chers Parents, <br><br> \
          Beiliegend senden wir Ihnen den wöchentlichen Bericht für die Betreuungsleistungen für <b>" 
          +KindName +" von " +StartDatumFormatiert +" bis " +EndDatumFormatiert +"</b>.<br><br> \
          Nous vous envoyons ci-desous le rapport heptomadaire sur les services d'accueil du <b>" 
          +KindName + " du " +StartDatumFormatiert +" au " +EndDatumFormatiert +".</b><br><br>\
          Mit freundlichen Grüssen <br> \
          Meilleurs salutations <br><br> \
          Tagesfamilienverein des Seebezirks <br> \
          Association d'accueil familial de jour du district du Lac <br><br>" +ZusatztextDeutsch +"<br>" 
          +ZusatztextFranz, attachments: Bericht}); 
```

* * *

结果是一封带有一些文本的简单邮件和作为 HTML 附件的报告。此电子邮件仅发送给瑞士用户。

原则上，几个月以来一切都很好，但我确实在字符编码方面遇到了一些问题。电子表格（来源）包含无法正确显示的德语和法语特殊字符。尤其是在 iPhone 和一些 Windows IE9 系统上。在我自己的带有 Chrome 和 Firefox 的 Linux 系统上，一切看起来都很棒。

然而，到目前为止，上述电子邮件的 HTML 正文文本在每个系统上都能正确显示。

谁能帮助我如何在 Google Apps 脚本中应用正确的字符集？

非常感谢

亨氏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:53:58.603

我不是 HTML 专家，但我想你应该在你的 html 正文中建立一个标题来告诉浏览器（或电子邮件客户端应用程序）使用正确的字符集。您可以通过在 gmail 上手动向自己发送相同的消息（使用您最喜欢的邮件客户端应用程序）轻松地做到这一点，并分析消息的 html 内容以查看它是如何完成的？

只是一个建议;-)

编辑：（另一个建议；-）如果附件中出现问题，为什么不将其转换为 pdf 格式？DocsList 服务中有一个内置转换器。

```
 var docN = 'docname';
   var ID = 'ID you have get prior to this'
   var pdf = DocsList.getFileById(ID).getAs('application/pdf').getBytes();
   var attach = {fileName: docN+".pdf",content:pdf, mimeType:'application/pdf'};
   MailApp.sendEmail('email@xxx.com', 'Your document as PDF ('+docN+')', 'see attachment', {attachments:[attach]}); 
```

# javascript - WinJS 中未处理的异常

> ID：11161461
> 
> 赞同：1
> 
> 时间：2012-06-22T17:43:38.380
> 
> 标签：javascript, windows-8, winjs

谁能告诉我如何处理 WinJS 代码中未处理的异常。有没有更好的方法来处理它们而不是使用 try/catch 块。我已经在我的代码的某些部分使用了 try/catch 块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:44:49.453

try/catch 是处理异常的语言机制。

您是在处理常规异常，还是在异步代码中（在 Promise 中）有未处理的异常？如果是后者，try/catch 将不起作用，因为设置 try/catch 的堆栈帧在异步操作完成时已经消失。

在这种情况下，你需要在你的 Promise 中添加一个错误处理程序：

```
doSomethingAsync().then(
    function (result) { /* successful completion code here */ },
    function (err) { /* exception handler here */ }); 
```

异常沿着承诺链传播，因此您可以在最后放置一个处理程序，它将处理该承诺链中的任何异常。您还可以将错误处理程序传递给 done() 方法。结果可能如下所示：

```
doSomethingAsync()
    .then(function (result) { return somethingElseAsync(); })
    .then(function (result) { return aThirdAsyncThing(); })
    .done(
        function (result) { doThisWhenAllDone(); },
        function (err) { ohNoSomethingWentWrong(err); }
    ); 
```

最后，未处理的异常最终会出现在 window.onerror 中，因此您可以在那里捕获它们。我现在只会做日志记录；尝试恢复您的应用程序并继续从顶级错误处理程序运行通常是一个坏主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:04:28.360

我认为您要求的等效于 ASP.NET Webforms Application_Error 包罗万象。WinJS 等效于 ASP.NET 的 Application_Error 方法是[WinJS.Application.onerror](http://msdn.microsoft.com/en-us/library/windows/apps/hh974768.aspx)。

使用它的最佳方法是在您的 default.js 文件（或类似文件）中并添加一个侦听器，例如：

```
 WinJS.Application.onerror = function(eventInfo){

            var error = eventInfo.detail.error;
    //Log error somewhere  using error.message and error.description..

  // Maybe even display a Windows.UI.Popups.MessageDialog or Flyout or for all unhandled exceptions

    }; 
```

这将允许您优雅地捕获应用程序中出现的所有未处理的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T20:51:11.980

这是我必须自己发现的所有这些解决方案的替代方案。每当您使用 promise 对象时，请确保您的 done() 调用同时处理成功和错误情况。如果您不处理故障，系统最终将抛出一个异常，该异常不会被 try/catch 块或通常的 WinJS.Application.onerror 方法捕获。

在我自己发现它之前，这个问题已经让我损失了 2 次 Windows Store 拒绝... :(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T06:21:15.727

链接：[操作方法：WinJS 应用程序中的最后机会异常处理](http://blog.markedup.com/2012/08/how-to-last-chance-exception-handling-in-winjs-applications/)

要处理未处理的异常，您真正需要做的就是挂钩[WinJS Application.onerror](http://msdn.microsoft.com/en-us/library/windows/apps/Hh974768.aspx)事件，就像这样（来自 default.js 文件：）

```
(function () {
"use strict";

var app = WinJS.Application;
var activation = Windows.ApplicationModel.Activation;
var nav = WinJS.Navigation;
WinJS.strictProcessing();

app.onerror = function (error) {
    //Log the last-chance exception (as a crash)
    MK.logLastChanceException(error);
};

/* rest of the WinJS app event handlers and methods */

app.start();})(); 
```

请记住，当 WinRT 崩溃时，您无法访问网络 IO，但您可以写入磁盘。

# linux - 为什么 glibc 和 pthread 库都定义了相同的 API？

> ID：11161462
> 
> 赞同：15
> 
> 时间：2012-06-22T17:43:39.070
> 
> 标签：linux, gcc, pthreads, glibc

为什么 glibc 和 pthread 库都定义了相同的 API？这是快照

```
ubuntu@ubuntu:/lib$ objdump -T /lib/i386-linux-gnu/libc.so.6 |grep pthread_cond_signal
000f8360 g    DF .text  00000039  GLIBC_2.3.2 pthread_cond_signal
0012b940 g    DF .text  00000039 (GLIBC_2.0)  pthread_cond_signal

ubuntu@ubuntu:/lib$ objdump -T /lib/i386-linux-gnu/libpthread.so.0 |grep pthread_cond_signal
0000b350 g    DF .text  0000007c (GLIBC_2.0)  pthread_cond_signal
0000af90 g    DF .text  000000fc  GLIBC_2.3.2 pthread_cond_signal 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T15:13:39.940

`libpthread.so`也是 glibc 的一部分，它们都包含一些符号的~~（相同~~的）定义。

如果你寻找它，`pthread_create`你会发现它只存在于`libpthread.so`- 这意味着程序必须链接到`libpthread.so`才能实际创建线程~~，但可以在仅链接到的单线程程序中使用互斥锁和条件变量`libc.so`。这对于存在于共享内存中并用于与单独进程同步的进程间互斥锁和进程间条件变量很有用~~。（更正感谢 Zan Lynx 在下面的评论）。

链接到两者都不是问题`libpthread.so`，`libc.so`即使它们都定义了符号。ELF 链接器允许多个共享库包含相同符号的定义，链接器将选择它看到的第一个并将其用于对该符号的所有引用，这称为[符号插入](http://www.airs.com/blog/archives/307)。允许定义多个符号的另一个特性是，如果一个库包含[弱符号](http://www.airs.com/blog/archives/42)，这些符号将被同名的非弱符号覆盖。在这种情况下，~~两个库中的定义是相同的，因此使用哪个~~ `libpthread.so`覆盖`libc.so`. 如果您使用`LD_DEBUG` ~~并更改链接器的参数顺序~~您应该能够看到该符号实际上是在哪个库中找到的。

除了定义相同符号的两个库外，每个库都有两个符号定义，具有不同的符号[版本](http://sourceware.org/binutils/docs/ld/VERSION.html)和. 这种符号版本控制允许多个定义在同一个库中共存，以便将新的改进版本的函数添加到库中，而不会破坏与旧实现链接的代码。这允许相同的共享库为使用 LinuxThreads 的应用程序和使用 NPTL 的应用程序工作。链接到库时引用将绑定到的默认符号对应于该函数的[NPTL](http://en.wikipedia.org/wiki/Native_POSIX_Thread_Library)实现（NPTL 首次包含在 glibc 2.3.2 中）。较旧的符号，`GLIBC_2.0``GLIBC_2.3.2``pthread_cond_signal@GLIBC_2.3.2``pthread_cond_signal@GLIBC_2.0`, 是较旧的 LinuxThreads 实现，在提供 NPTL 之前是默认的。与旧版本（2.3.2 之前）glibc 链接的应用程序将绑定`pthread_cond_signal@GLIBC_2.0`并使用该符号。

# algorithm - 在约束条件下存在排列（采访街 - 操纵数字）

> ID：11161465
> 
> 赞同：3
> 
> 时间：2012-06-22T17:43:49.653
> 
> 标签：algorithm, constraints, permutation

我正在尝试解决这个问题：[https ://www.interviewstreet.com/challenges/dashboard/#problem/4f9a33ec1b8ea](https://www.interviewstreet.com/challenges/dashboard/#problem/4f9a33ec1b8ea)

假设 A 是 n 个数字 (A1, A2, A3, ... , An) 的列表，B (B1, B2, B3, ..., Bn) 是这些数字的排列。我们说 B 是 K 操作的当且仅当它的以下值：

M(B) = min( B1 Xor B2, B2 Xor B3, B3 Xor B4, ... , Bn-1 Xor Bn, Bn Xor B1 ) 不小于 2^K。给你 n 个 A1 到 An，你必须找到最大的 K 使得这些数字的排列 B 是 K 操纵的。

输入：

在输入的第一行有一个整数 N。在输入的第二行有 N 个整数 A1 到 An N 不超过 100。Ai 是非负数，适合 32 位整数。

输出：

在输出中打印一个整数作为测试的答案。如果没有这样的 K 打印 -1 到输出。

样本输入

3 13 3 10

样本输出

2

样本输入

4 1 2 3 4

样本输出

1

解释

第一个样本测试 这里列表 A 是 {13, 3, 10}。A 的一种可能排列是，B = (10, 3, 13)。

对于 B，min( B1 xor B2, B2 xor B3, B3 xor B1 ) = min( 10 xor 3, 3 xor 13, 13 xor 10 ) = min( 9, 14, 7 ) = 7。

所以存在 A 的置换 B 使得 M(B) 不小于 4 即 2^2。然而，不存在 A 的任何排列 B 使得 M(B) 不小于 8 即 2^3。所以 K 的最大可能值为 2。

==================================================== =================================

这是我迄今为止所做的尝试。

* * *

尝试 1：贪心算法

1.  将输入放入数组 A[1..n]
2.  计算值 M(A)。这给出了最小异或值的位置 (i, (i + 1) % n)
3.  检查将 A[i] 或 A[(i + 1) % n] 与数组的任何其他元素交换是否会增加 M(A) 的值。如果存在这样的元素，请进行交换。
4.  重复步骤 2 和 3，直到 M(A) 值无法提高。

这肯定给出了一个局部最大值，但我不确定这是否给出了全局最大值。

* * *

尝试 2：在给定邻居约束的情况下检查置换是否存在

1.  给定输入 A[1..n]，对于 i = 1..n 和 j = (i+1)..n 计算 x_ij = A[i] XOR A[j]
2.  计算最大值（x_ij）。请注意，对于某些 p，2^p <= max(x_ij) < 2^(p+1)。
3.  收集所有 x_ij 使得 x_ij >= 2^p。请注意，此集合可以视为具有节点 {1, 2, .. n} 的图 G，如果 x_ij >= 2^p，则节点 i 和 j 在它们之间具有无向边。
4.  检查图 G 是否有一个循环恰好访问每个节点一次。如果存在这样的循环，则 k = p。否则，令 p = p - 1，转到步骤 3。

这给出了正确的答案，但请注意，在第 4 步中，我们实质上是在检查一个图是否具有哈密顿循环，这是一个非常困难的问题。

* * *

有什么提示或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-15T04:35:10.520

无需深入研究图论就可以解决这个问题。

# 关键推断

, 建议的性质`rich`是解决这个问题的关键：

> 跟进我的评论：B1 Xor B2 < 2^K 当且仅当 B1 和 B2 同意除 K 低位之外的所有位

基于上述性质，我们只需要找到`n/2`每个 A[i] 的每个唯一高阶位最多出现的最高 k。

换句话说，在一组值`A[i] >> k`中，如果每个值在大多数情况下重复`n/2`，则存在与 的 k 操作排列`all the XOR values >= (2^k)`。

# 为什么 n/2

假设如果您确实有多个`n/2`唯一的高阶位出现，则不可能获得置换 B，所有循环 XOR 均非零，即至少有一个`B[i] XOR B[(i+1) % N]`具有所有高阶位变为零，因此使`M(B) < 2^k`

# 伪代码

```
k = -1
for (bit = (MAX_BITS - 1) to 0) {
    HashMap count
    for (i = 0 to N - 1) {
        higherOrderVal = A[i] >> bit
        if (higherOrderVal exists in count) {
            count[higherOrderVal] += 1
        }
        else {
            count[higherOrderVal] = 1
        }
    }

    isValid = true
    for (element in count) {
        if (element > N/2) {
            isValid = false
            break
        }
    }
    if (isValid) {
        k = bit
        break
    }
} 
```

`O(M * N)`此解决方案的时间复杂度是`M`表示用于表示数字（32 位、64 位等）的最大位数的常数因子，并且`N`是输入数组 A 的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T23:27:58.670

跟进我的评论：B1 Xor B2 < 2^K 当且仅当 B1 和 B2 同意除 K 个低位之外的所有位，因此 G 具有非常特殊的结构，即完全多部分，分区标签由除K 个低位。当且仅当不存在多数分割时，完整的多部图是哈密顿图。将此事实插入尝试 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-28T15:18:57.997

# 贪婪方法#priority_queue

首先插入所有对 xor 值和连续索引 i 和 j ->pq.push(tuple(v[i]^v[j],i,j)) 现在弹出第一个 maxm xor 值并设置索引 i 和 j现在再次弹出来自 i 或 j 的 maxm xor 值，此操作最多执行 1 到 n 然后返回第 n 个弹出的 xor 值

# c# - C# 中 WFA 中的 groupBox 有什么意义？

> ID：11161471
> 
> 赞同：0
> 
> 时间：2012-06-22T17:44:10.063
> 
> 标签：c#, winforms, groupbox

C# 中 WFA 中的 groupBox 是否**对**“仅说此 groupBox 内的这些组件属于一个组”有用？例如，我能否以某种方式获取任何信息（从 groupBox 而不是从内部组件获取）内部发生了什么或类似有用的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:51:42.090

以下是 Microsoft 使用 Group Boxes 的设计指南：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa511459.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511459.aspx)

他们说，“除了可能为一组控件提供访问密钥之外，它不提供任何功能”。在单选按钮案例中最常用的访问密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:46:58.460

我喜欢将 groupBoxes 用于“一次只能选择一个单选按钮”功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:47:43.930

好吧，它作为一个容器很有用，您出于某种原因想要隐藏或显示其内容......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T17:49:19.410

组框的典型用途是包含一个逻辑组 RadioButton 控件。如果有两个组框，每个组框包含几个选项按钮（也称为单选按钮），每组按钮是互斥的，设置一个选项每组价值。 [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.groupbox.aspx)

# php - 如何在 CodeIgniter 的钩子中访问路由系统给控制器的参数？

> ID：11161474
> 
> 赞同：1
> 
> 时间：2012-06-22T17:44:22.067
> 
> 标签：php, codeigniter, hook, url-routing, codeigniter-2

我想记录我的应用程序使用`post_controller_constructor`钩子收到的请求。

下面的钩子代码说明了我需要什么：

```
public function log() {
  $controller = $this->router->fetch_class();
  $action = $this->router->fetch_method();

  $post_params = $this->input->post();
  $get_params = $this->input->get();

  $url_params = ???;
...
  $this->log_model->log($id_user, $controller, $action, time(), $post_params, $get_params, $url_params);
}

function __get($key){
  $CI =& get_instance();
  return $CI->$key;
} 
```

对于我所看到的，解决方案必须与“URI”类和从那里提取的段相关。但我不能依赖这种方法，因为我有一些控制器比其他控制器更深，比如这个例子：

*   `/folder/set_controllers/controller_a/action/(:any)`
    `/folder/set_controllers/controller_a/action/7``$url_params`的值为`array('7')`。
*   `/folder/controller_b/action/(:any)/(:any)`
    `/folder/controller_b/action/first_param/second_param/7``$url_params`的值为`array('first_param', 'second_param')`。
*   `/controller_c/action/(:any)`
    `/controller_c/action/hello``$url_params`的值为`array('hello')`。

我需要知道有什么价值观`$url_params`。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:19:49.907

也许这个问题的答案可以帮助您[如何使用 CodeIgniter 获取控制器、操作、URL 信息，](https://stackoverflow.com/questions/2062086/how-to-get-controller-action-url-informations-with-codeigniter)看起来您正在寻找相同的，或多或少。

# php - PHP变量“默认值”

> ID：11161480
> 
> 赞同：6
> 
> 时间：2012-06-22T17:45:13.343
> 
> 标签：php, variables, default-value

我想从会话中获取一个值，但如果未定义则使用默认值。当然，我想绕过 PHP 通知。

您可以编写一个执行此操作的函数

```
function get(&$var, $default){
    if(isset($var)) return $var;
    return $default;
}

echo get($foo, "bar\n");
$foobar = "foobar";
echo get($foobar, "ERROR"); 
```

[实例](http://codepad.org/FzTPuvBO)

有没有办法做到这一点而不在每个文件中定义这个函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T17:46:30.627

您可以在一个脚本中定义它，然后`require_once`在其他脚本中定义该脚本

您也可以只使用三元运算符：

```
$myVar = isset($var)?$var:$default; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-11-07T09:57:36.643

从 PHP 7 开始，您现在可以使用 null 合并运算符：

```
$var ?? $default 
```

这和你的功能完全一样

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-24T21:19:58.767

使用这个简洁的替代方案：

```
isset($myVar) || $myvar=$default; 
```

`||`运算符是短路 的，如果第一个被评估为真，它将不会评估第二个运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T15:16:48.927

使用更少的代码来做你需要的事情。

您无需使用该`_?_:_`格式再次指定变量。

```
echo $var?:"default"; 
```

是相同的

```
echo $var?$var:"default"; 
```

现在，就空支票而言，您可以使用`@`静音通知，我不确定技术后果，但您在使用此格式时已经在进行自己的检查：

```
echo @$non_existing_var?:"default"; 
```

一些例子：

```
<?php

    $nope = null;
    $yup = "hello";
    echo ($nope?:$yup) . "\n" ;
    echo ($yup?:$nope)  . "\n" ;

    $items = [ 'one', 'two', false, 'three', 'four', null ];

    foreach($items as $item):
        echo($item?:"default shown (".var_export($item,true).")")."\n";
    endforeach;

    echo(@$non_existing?:"default for non-existant variable!");

?> 
```

输出：

```
$ php variabledefault.php
 hello
 hello
 one
 two
 default shown (false)
 three
 four
 default shown (NULL)
 default for non-existant variable!% 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-09T10:17:16.693

在这种情况下，您可以使用我的小型库[ValueResolver](https://github.com/LapaLabs/ValueResolver)，例如：

```
$myVar = ValueResolver::resolve($var, $default); 
```

并且不要忘记使用命名空间`use LapaLabs\ValueResolver\Resolver\ValueResolver;`

也有类型转换的能力，例如如果你的变量的值应该是`integer`，所以使用这个：

```
$id = ValueResolver::toInteger('6 apples', 1); // returns 6
$id = ValueResolver::toInteger('There are no apples', 1); // returns 1 (used default value) 
```

查看[文档](https://github.com/LapaLabs/ValueResolver)以获取更多示例

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-29T09:01:50.663

[Null 合并运算符](https://www.php.net/manual/en/migration70.new-features.php#migration70.new-features.null-coalesce-op)已添加到 PHP 7.0 版中，它的作用是替换

```
$username = isset($_GET['user']) ? $_GET['user'] : 'nobody'; 
```

使用较短的版本：

```
$username = $_GET['user'] ?? 'nobody'; 
```

上面的行所做的是检查是否`$_GET['user']`已设置，而不是 null，然后它将分配给`$username`变量，如果`$_GET['user']`未设置（因此为 null），它将默认为`'nobody'`字符串所以`$username`is `nobody`。

您的代码应如下所示：

```
echo $foo ?? "bar\n";
$foobar = "foobar";
echo $foobar ?? "ERROR"; 
```

# automapper - AutoMapper 异常

> ID：11161487
> 
> 赞同：-1
> 
> 时间：2012-06-22T17:45:39.720
> 
> 标签：automapper

这是我第一次被automapper陷入困境。我正在尝试将存储过程返回的结果集映射到我的实体。L2S 有可用的结果集，它是我当前测试的一行，可以是多个。通常，如果处理不当，返回类型可为空时会引发 automaper 异常。我将其保留原样并将其更改为某个值，但在这两种情况下我仍然遇到异常。我在这里遗漏了一些非常基本的东西，但不能动手。需要第二双眼睛...谢谢。

**代码调用**

```
var annualReportOutreachEditionResult = ClientsContext.AnnualReportOutreachEditionInfoGet(fice, reportYear).ToList();
            if (annualReportOutreachEditionResult != null)
            {
                annualReportOutreachEditionDetail = Mapper.Map<List<AnnualReportOutreachEditionInfoGetResult>, List<AnnualReportOutreachEditionDetail>>(annualReportOutreachEditionResult); 
```

**年度报告外展版详细实体**

```
public class AnnualReportOutreachEditionDetail
    {

        public string Edition { get; set; }

        public DateTime MailDate { get; set; }

        public string CardId { get; set; }

    } 
```

**AnnualReportOutreachEditionInfoGetResult L2S 实体**

```
public partial class AnnualReportOutreachEditionInfoGetResult
    {

        private string _Edition;

        private System.Nullable<System.DateTime> _MailDate;

        private string _CardId;

        public AnnualReportOutreachEditionInfoGetResult()
        {
        }

        [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Edition", DbType="VarChar(50)")]
        public string Edition
        {
            get
            {
                return this._Edition;
            }
            set
            {
                if ((this._Edition != value))
                {
                    this._Edition = value;
                }
            }
        }

        [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_MailDate", DbType="Date")]
        public System.Nullable<System.DateTime> MailDate
        {
            get
            {
                return this._MailDate;
            }
            set
            {
                if ((this._MailDate != value))
                {
                    this._MailDate = value;
                }
            }
        }

        [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_CardId", DbType="Char(9)")]
        public string CardId
        {
            get
            {
                return this._CardId;
            }
            set
            {
                if ((this._CardId != value))
                {
                    this._CardId = value;
                }
            }
        }
    } 
```

**映射**

我还检查/测试了日期的默认值，但我的异常仍然存在。那是唯一可以为空的类型。

```
 public static void MapAnnualReportOutreachEditionDetail()
        {
            Mapper.CreateMap<AnnualReportOutreachEditionInfoGetResult, AnnualReportOutreachEditionDetail>()

                ;
        } 
```

**异常详情**

```
AutoMapper.AutoMapperMappingException was unhandled by user code
  Message=Trying to map System.Collections.Generic.List`1[[Nrccua.LinqToSql.AnnualReportOutreachEditionInfoGetResult, Nrccua.LinqToSql, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] to System.Collections.Generic.List`1[[Nrccua.BusinessEntities.AnnualReportOutreachEditionDetail, Nrccua.BusinessEntities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]].
Exception of type 'AutoMapper.AutoMapperMappingException' was thrown.
  Source=AutoMapper
  StackTrace:
       at AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context)
       at AutoMapper.MappingEngine.Map(Object source, Type sourceType, Type destinationType)
       at AutoMapper.MappingEngine.Map[TSource,TDestination](TSource source)
       at AutoMapper.Mapper.Map[TSource,TDestination](TSource source)
       at Nrccua.LinqToSql.DataAccess.AnnualReportAccess.GetAnnualReportOutreachEditionDetails(String fice, String reportYear) in C:\Users\tahir\Documents\DATA\Projects\NrccuaWebSite\NrccuaWebSiteTahirj\Core\BusinessEntities\Nrccua.LinqToSql\DataAccess\AnnualReportAccess.cs:line 211
       at Nrccua.Repositories.AnnualReportRepository.GetAnnualReportOutreachEditionDetails(String fice, String reportYear) in C:\Users\tahir\Documents\DATA\Projects\NrccuaWebSite\NrccuaWebSiteTahirj\Core\Repositories\Nrccua.Repositories\AnnualReportRepository.cs:line 199
       at RepositoryTests.AnnualReportTest.GetOutreachDetailsTest() in C:\Users\tahir\Documents\DATA\Projects\NrccuaWebSite\NrccuaWebSiteTahirj\Core\Tests\RepositoryTests\AnnualReportTest.cs:line 55
  InnerException: AutoMapper.AutoMapperMappingException
       Message=Trying to map Nrccua.LinqToSql.AnnualReportOutreachEditionInfoGetResult to Nrccua.BusinessEntities.AnnualReportOutreachEditionDetail.
Exception of type 'AutoMapper.AutoMapperMappingException' was thrown.
       Source=AutoMapper
       StackTrace:
            at AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context)
            at AutoMapper.Mappers.EnumerableMapperBase`1.Map(ResolutionContext context, IMappingEngineRunner mapper)
            at AutoMapper.Mappers.CollectionMapper.Map(ResolutionContext context, IMappingEngineRunner mapper)
            at AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context)
       InnerException: AutoMapper.AutoMapperMappingException
            Message=Trying to map Nrccua.LinqToSql.AnnualReportOutreachEditionInfoGetResult to Nrccua.BusinessEntities.AnnualReportOutreachEditionDetail.
Missing type map configuration or unsupported mapping.
Exception of type 'AutoMapper.AutoMapperMappingException' was thrown.
            Source=AutoMapper
            StackTrace:
                 at AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context)
            InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:20:39.300

It was a problem at my end, I forgot to add the definition for my mapper method. Fixed.

# ios5 - iOS 应用程序工具栏底部的箭头

> ID：11161488
> 
> 赞同：0
> 
> 时间：2012-06-22T17:45:42.537
> 
> 标签：ios5, navigation, toolbar, xcode4.3, arrow-keys

想知道是否有人知道如何在底部工具栏中实现箭头，如下所示？如果有人能让我对此有所了解，将不胜感激。我已经看到很多带有此类箭头的应用程序来浏览页面，但似乎无法在 XCode 中找到它们。见下文...

谢谢 ：）

![在此处输入图像描述](../Images/3aa43edc1bb20e4c5f40d01fb94e91f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:15:39.770

只需设置一个 UIToolbar 并附加这两个图像（我会给你标准图像和视网膜图像的存档链接）：[链接](https://dl.dropbox.com/u/20375801/arrows.zip)

```
//Creating UIToolbar
    toolBar = [[UIToolbar alloc]init];
    toolBar.frame = CGRectMake(//set some frame);
    toolBar.barStyle = UIBarStyleBlackOpaque;
    [toolBar sizeToFit]; 

    //Creating buttons
    UIBarButtonItem *prev = [[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"previous.png"] style:UIBarButtonItemStylePlain target:self action:@selector(myaction:)] autorelease]; 
UIBarButtonItem *next = [[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"next.png"] style:UIBarButtonItemStylePlain target:self action:@selector(myaction:)] autorelease]; 

     //Creating the array with the buttons
     NSArray *items = [NSArray arrayWithObjects:prev,next, nil];

//Assigning the array to the toolbar
[toolBar setItems:items];
    [self.view addSubview:toolBar];
    [toolBar release]; 
```

你完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:08:09.317

我猜这些箭头是 Apple 为 Safari、Photo Library 等定制的。
如果你没有 Photoshop 类似的东西，我认为你可以在 Paint 中制作这些箭头。

# php - 打印带有循环的查询和条件

> ID：11161489
> 
> 赞同：0
> 
> 时间：2012-06-22T17:45:56.447
> 
> 标签：php, mysql

我有一个 foreach 函数，它允许我打印数据库中的字段，

`$row[value]="photo"`如果不只是打印`$row[value]`另一件事，我想做到这一点。

我可以做吗？

代码是这样的：

```
while($row = mysql_fetch_array($result)) {
    echo "<tr>";
    foreach($checked1 as $key => $value){
        echo "<td>" . $row[$value] . "</td>"; 
    } 
```

我需要有一个条件`if $row[value]=photo`来回应另一件事，而不是：`echo "<td>" . $row[$photo] . "</td>"`;

有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:47:52.747

这不需要很复杂。

```
foreach ($result as $row) {
    if ($row['value'] === 'photo') {
        // print "another thing"
    } else {
        // print "something"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:48:34.807

当然，只需包含一个 if 语句。您的代码将类似于以下代码：

```
$arr = array("one", "two", "three");

foreach ($arr as $value) {
    if($value == "one")
       echo "Not gonna print one.";
    else
       echo "Value: $value<br />\n";
} 
```

使用您的代码，您可以查看该值是否*不是* `photo`，回显它。

```
while($row = mysql_fetch_array($result)) {
    echo "<tr>";
    foreach($checked1 as $key => $value){
        if($row[value] == "photo") {
            echo "some other thing";
        } else {
            echo "<td>" . $row[$value] . "</td>"; 
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:55:57.280

由于我无法打印要`if($row['value'] == photo)`检查的内容，因此请在下面编写的代码中自己添加该代码。

```
while($row = mysql_fetch_array($result)){
    echo "<tr>";
    foreach($checked1 as $key => $value){
        if($value == 'photo'){
            echo "<td><img src = '".$row[$value]."'></td>"; 
        }else{
        echo "<td>" . $row[$value] . "</td>"; 
        }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:47:06.763

如果你想打印 img src 如果字段是“照片”字段（键），那么试试这个：

```
 while($row = mysql_fetch_array($result)){
        echo "<tr>";
        foreach($checked1 as $key => $value){
            if($key == 'photo'){
                echo "<td><img src = '".$row[$value]."'></td>"; 
            }else{
            echo "<td>" . $row[$value] . "</td>"; 
            }
       }
    } 
```

# spring - 从数据库或 Java 对象动态加载 spring bean 属性）

> ID：11161490
> 
> 赞同：4
> 
> 时间：2012-06-22T17:45:58.347
> 
> 标签：spring, web-services, properties

我有一个场景，我需要将属性从数据库或 java 对象加载到 bean 中。

考虑这个例子：

```
<bean id="ConfigAsstDemoBeanParent" class="gps.springconfig.DemoClass" lazy-init="true">
  <property name="demoValueFromBean" value="demoValue"></property>
  <property name="demoValueForKeyFromProperties" value="${DEMO_KEY}"></property>
</bean> 
```

而不是`${DEMO_KEY}`从属性文件加载值的属性占位符，我需要从数据库中加载一个值，我使用 Java 类中的存储过程检索该值。

请向我建议一种机制，我可以在上述情况下利用它。目前我正在研究扩展 SpringMain 和/或 PropertyPlaceholderConfigurer 类并编写我自己的自定义 BootStrapper。

还请建议为上述场景编写 BootStrapper 的提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T17:55:09.493

Java配置似乎是一个很好的选择的一种情况：

```
@Configuration
public class Config {

    @Resource
    private DataSource dataSource;

    @Bean
    @Lazy
    public DemoClass configAsstDemoBeanParent() {
        DemoClass demo = new DemoClass();
        demo.setDemoValueFromBean("demoValue");
        demo.demoValueForKeyFromProperties( /* query the database here */);
        return demo;
    }

} 
```

请注意，您可以将`DataSource`（或`JdbcTemplate`）注入到您的`@Configuration`类中，前提是它是在其他地方定义的。

# c# - 将 AIX 5.3 crypt 函数迁移到 C#

> ID：11161499
> 
> 赞同：0
> 
> 时间：2012-06-22T17:46:42.693
> 
> 标签：c#, .net, encryption, aix, des

我有一个在旧 AIX 系统上的项目，我们正在将它迁移到新的 Windows 服务器系统。我正在尝试设置身份验证系统，但我似乎无法匹配创建密码加密的方式。

C# 可以模仿 AIX [crypt](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.basetechref/doc/basetrf1/crypt.htm)函数吗？我了解该函数使用 DES 的一种形式，但我似乎无法设置 C# DES 以匹配 AIX crypt 的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:41:52.233

快速搜索通用 unix 的实现`crypt()`似乎指向[代码项目](http://www.codeproject.com/Articles/9183/A-C-implementation-of-Unix-crypt)的实现。

请注意，这只是`crypt()`AIX 试图模拟的通用 Unix。最好先针对 AIX 代码对其进行测试，同时牢记输入和输出参数的特定编码（字符）编码。

# javascript - jqplot 使用函数返回值生成绘图

> ID：11161501
> 
> 赞同：1
> 
> 时间：2012-06-22T17:46:49.667
> 
> 标签：javascript, jquery, jqplot

抱歉这个基于问题的问题。我对 jqplot 很陌生，想用它来根据从函数计算的数据生成条形图。

现在，我有一个保存数据的参数。另外，我有简单的代码来生成条形图。那么，谁能给我一个关于如何将这两个部分联系在一起的提示？

谢谢！

这是代码：

```
x_data=function(a,b,c,d) 
#this is the data generated from a function and it needs to be 
#sent to jqplot function, i.e., x_data=[165.33, 102.9, 89.04, 181.54, 114.92]. 
#In order to pass the parameter to jqplot, do I need to print it out in the HTML?

<script type='text/javascript'> 
$(document).ready(function(x_data){
        $.jqplot.config.enablePlugins = true;
        var s1=x_data; //I need to find a way to link s1 to x_data 

        $.jqplot('chart1', [s1], {
            seriesDefaults:{
                renderer:$.jqplot.BarRenderer,
                pointLabels: { show: true },
                rendererOptions: {
                barWidth: 3
                }
            }
        })   
    })
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:44:14.667

您需要确保作为`$.jqplot()`方法的第二个参数输入的任何内容，在您的情况下，它`x_pre_irr`的形式是，例如

`[[[1,2],[2,3],[3,6],[4,5]],[[1,2],[2,3],[3,6],[4,5]]]`.

[您可以在此处的示例中找到更多详细信息。](http://www.jqplot.com/tests/bar-charts.php)

**编辑** 你有几个重要的错误：

1.  使用条形图`CategoryAxisRenderer`应该使用：

    ```
     axes:{
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer
            }
        } 
    ```

2.  `jQuery`要使用`text()`(or `html()`) 方法获取 HTML 标记内的内容，而不是`val()`返回标记在其`value`参数中的任何内容。

3.  那么无论你得到什么都将是一个字符串，因此你必须将它转换为值数组，例如使用`$.parseJSON($('#x_pre_irr_val').text());`.

[本示例中对此进行了介绍。](http://jsfiddle.net/Boro/JWhmQ/223/)

# xml - 什么时候应该使用 xhtml，什么时候应该使用 xslt？

> ID：11161509
> 
> 赞同：0
> 
> 时间：2012-06-22T17:47:24.963
> 
> 标签：xml, xhtml

这可能是个愚蠢的问题，但我没有抓住重点。

我尝试更多地了解 xml 和 xhtml。我正在阅读这本书，并且我了解这两种“语言”的上下文。对我来说，这两种技术似乎都可以实现相同的目标。看来使用xthml + css 还是xml + xslt 都无所谓，都可以创建同一个网页。

我一直认为 xml 作为数据源。我知道 Xhtml 意味着基于 xml 规则的更清晰的呈现，但 xml 有一些额外的用途吗？我的意思是，有什么建议何时使用 xhtml 或 xml（或使用 xml 作为 xhtml 的一些元数据，我不知道一些速度原因等）？？

感谢您的回答。

最好的祝福，

朱拉伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:58:54.770

对不起，伙计们 - 会有点简单化。

1.  XML - 一种通过标记数据等来描述数据的方式，例如`<car colour="red">mustang</car>`
2.  XHTML - 仅使用带有有限标签列表的 XML。例如，这个位是`<title>`
3.  XSLT - 描述如何将 XML 文档转换为另一种形式的 XML 文档
4.  CSS - 让它变得漂亮。把那个标题放在绿色的地方，等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:59:25.833

当您将 xhtml 发送到浏览器时，您会告诉它“这里有一些东西，为我渲染它”。使用 XML 和 XSLT，您可以向它发送数据 (xml) 和“配方” (xslt) 如何将这些数据转换为可渲染的东西。之后，渲染它。尽管最终结果是相同的（浏览器中呈现的页面），但其基本原理是完全不同的。

发送 xml+xslt 的一个参数可能是您减少了客户端的工作量，因为通常在您发送 xhtml 的场景中，您的服务器必须在某处获取数据并将其与某种模板结合以创建完整的 xhtml。

对于其他一些论点，我认为您可能会对 HTML 与 XHTML 的并行辩论感到困惑。XHTML 是对 HTML 的重新定义，以使其与 XML 兼容（例如，通过强制打开-关闭标记对 -`<BR>`在 HTML 与`<br/>` XHTML 中考虑）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:08:57.823

使用 xml+xslt 在浏览器中显示信息的唯一原因是允许用户在以下情况下轻松查看 XML 文档：

1.  使此类 XML 文档可用的目的主要是允许用户以他们想要的任何方式处理原始 XML；和
2.  在浏览器中显示的主要目的是允许用户预览该数据。

如果您只想在浏览器中向您的用户显示内容，那么远离 XSLT 几乎肯定会更容易（编程一点也不好玩）。

# apache-flex - mx：图例字体大小不起作用

> ID：11161510
> 
> 赞同：1
> 
> 时间：2012-06-22T17:47:30.877
> 
> 标签：apache-flex, adobe

我有一个 PieChart……现在我也开始支持平板电脑，我需要使图例的 fontSize 更大。但是，以下内容无效：

```
<mx:Legend dataProvider="{industryChart}"
       height="110" bottom="40"
       height.groupTablets="220" bottom.groupTablets="80"
       fontSize="8" fontSize.groupTablets="16"
       markerHeight="10" markerHeight.groupTablets="20"
       verticalGap="3"
       /> 
```

我知道状态是正确的，因为其他属性发生了变化。

我还尝试添加样式部分：

```
<fx:Style> 
  .legend { 
      fontSize:24; 
  } 
</fx:Style> 

<mx:Legend dataProvider="{industryChart}"
       height="110" bottom="40"
       height.groupTablets="220" bottom.groupTablets="80"
       markerHeight="10" markerHeight.groupTablets="20"
       verticalGap="3"
       styleName="legend"
       /> 
```

不用找了。如果我将样式移到 Main.css，它也不起作用。

使用它会发出警告：组件中不支持 CSS 类型选择器：“mx.charts.LegendItem”：

```
 <fx:Style>
  @namespace mx "library://ns.adobe.com/flex/mx";
  mx|LegendItem { 
      fontSize:24; 
  } 
  </fx:Style> 
```

但是，如果我在 Main.css 中放入相同的内容，它确实有效：

```
 @namespace mx "library://ns.adobe.com/flex/mx";
  mx|LegendItem { 
      fontSize:24; 
  } 
```

我遇到的问题是我必须能够在平板电脑状态下使字体更大，而不仅仅是针对所有状态，否则手机上的字体会太大。

伪选择器似乎不起作用：

```
 mx|LegendItem:groupTablets { 
      fontSize:24; 
  } 
```

在 Main.cc 或 fx:Style 中，ID 不起作用：

```
 #pieLegend { 
      fontSize:24; 
  } 

<mx:Legend  id="pieLegend"
    dataProvider="{industryChart}"
    height="110" bottom="40"
    height.groupTablets="220" bottom.groupTablets="80"
    markerHeight="10" markerHeight.groupTablets="20"
    verticalGap="3" 
   /> 
```

但是，即使这种方法有效，当 mxml 背后的代码需要通过 id 引用特定组件时也会遇到困难。

我什至感到沮丧并在代码中尝试了这个：

```
pieLegend.setStyle("fontSize", 24); 
```

没有。呸呸呸。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T05:43:10.537

抓住了同样的问题。这里来自 adobe 论坛，可能需要等待 apache flex 才能真正修复：

该问题是基于延迟的错误 ( [http://bugs.adobe.com/jira/browse/FLEXDMV-1656](http://bugs.adobe.com/jira/browse/FLEXDMV-1656) )。有几种解决方法，但最简单的是在 LegendItem 类型选择器上设置 fontSize，如下所示：

```
<mx:Style> 
LegendItem { 
fontSize:24; 
} 
</mx:Style> 
```

# c# - 请求中止：连接意外关闭

> ID：11161516
> 
> 赞同：6
> 
> 时间：2012-06-22T17:47:52.787
> 
> 标签：c#, asp.net, web-services, httpwebrequest

我正在使用 Jon Skeet 的 ReadFully 方法在这里实现：

```
public static byte[] ReadFully(Stream stream)
{
    var buffer = new byte[32768];
    using (var ms = new MemoryStream())
    {
        while (true)
        {
            int read = stream.Read(buffer, 0, buffer.Length);
            if (read <= 0)
                return ms.ToArray();
            ms.Write(buffer, 0, read);
        }
    }
} 
```

它在该行引发异常：

```
int read = stream.Read(buffer, 0, buffer.Length); 
```

错误消息是`The request was aborted: The connection was closed unexpectedly`。

我正在向 Web 服务发送 xml 请求。我的发送方法如下所示：

```
private static string SendRequest(XElement request, string url)
{
    var req = (HttpWebRequest)WebRequest.Create(url);
    req.ContentType = "application/soap+xml;";
    req.Method = "POST";
    req.KeepAlive = false;
    req.Timeout = System.Threading.Timeout.Infinite;
    req.ReadWriteTimeout = System.Threading.Timeout.Infinite;
    req.ProtocolVersion = HttpVersion.Version10;
    req.AllowWriteStreamBuffering = false;

    using (var stm = req.GetRequestStream())
    {
        using (var stmw = new StreamWriter(stm))
        {
            stmw.Write(request.ToString());
        }
    }

    Stream responseStream;
    using (var webResponse = req.GetResponse())
    {
        responseStream = webResponse.GetResponseStream();
    }

    // Do whatever you need with the response
    var myData = ReadFully(responseStream);
    string responseString = Encoding.ASCII.GetString(myData);

    return responseString;
} 
```

我尝试了没有和没有设置以下变量，它给了我同样的信息：

```
req.KeepAlive = false;
req.Timeout = System.Threading.Timeout.Infinite;
req.ReadWriteTimeout = System.Threading.Timeout.Infinite;
req.ProtocolVersion = HttpVersion.Version10;
req.AllowWriteStreamBuffering = false; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T17:56:05.340

问题出在代码的这一部分：

```
// wrong way to do it!
Stream responseStream;
using (var webResponse = req.GetResponse())
{
    responseStream = webResponse.GetResponseStream();
}

// Do whatever you need with the response
var myData = ReadFully(responseStream); 
```

在从其流中读取之前，您正在处理您的响应对象。尝试这样的事情：

```
byte[] myData;
using (var webResponse = req.GetResponse())
{
    var responseStream = webResponse.GetResponseStream();
    myData = ReadFully(responseStream);    // done with the stream now, dispose of it
}

// Do whatever you need with the response
string responseString = Encoding.ASCII.GetString(myData); 
```

# batch-file - 使用参数批量启动 exe

> ID：11161519
> 
> 赞同：2
> 
> 时间：2012-06-22T17:48:09.207
> 
> 标签：batch-file, arguments, exe, launch

我正在尝试将此行转换为 Batch 如何使用参数启动此 exe！？

```
Run("""C:\Program Files\Pro Inc\v420\commonfiles\TCL\bin\intel\cron.exe""  ""C:\Program Files\Pro Inc\v420\CommonFiles\Launcher\dank.thc"" -runae") 
```

如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:26:27.353

似乎是什么问题？我猜应该这样做（如果您正在谈论 Windows 批处理文件）：

```
"C:\Program Files\Pro Inc\v420\commonfiles\TCL\bin\intel\cron.exe" "C:\Program Files\Pro Inc\v420\CommonFiles\Launcher\dank.thc" -runae 
```

也就是说，只需指定要调用的可执行文件的名称，包括必要的路径（如果名称和/或路径包含空格和/或其他特殊字符，则用双引号括起来），然后是参数列表。如果一个参数有可能被误解为几个参数（或者同样地，如果它包含具有特殊含义的字符），则也可能需要引用一个参数。

# php - __destruct 如何处理 $_SESSION 中的对象

> ID：11161521
> 
> 赞同：3
> 
> 时间：2012-06-22T17:48:17.310
> 
> 标签：php, oop, session

如果PHP中的一个对象存储在会话中，什么时候会调用`$_SESSION`它的方法？`__destruct`我无法在手册中找到任何明确的答案。它确实说`__destruct`将在脚本执行结束时自动调用，所以我的期望是无论它是否存在于`$_SESSION`.

那么这是否意味着`__destruct`在会话中对对象的每个请求都可能会调用它？

**补充**：对象会在序列化之前还是之后`__destruct`？中的修改`__destruct`会反映在下一个请求中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:02:38.650

您实际上并没有将对象存储在会话中，而是将其序列化为字符串。然后，您可以覆盖对象上的魔法`__sleep`和`__wakeup`方法。`__sleep`在对象被序列化`__wakeup`时被调用，并且在您尝试反序列化对象时被调用。

有关详细信息，请参阅：

[__sleep 和 __wakeup 的手动文档](http://php.net/manual/en/language.oop5.magic.php)

[在会话中存储序列化对象的手动文档](http://www.php.net/manual/en/language.oop5.serialization.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:04:46.040

`__construct`并`__destruct`在每次使用该对象的实例运行脚本时调用。如果您将对象放入会话中，则该对象在页面浏览量中不具有相同的值，它只是一个对象。我写了一个简单的例子来证明这一点：

```
class MyClass{
    var $myVar=1;
    function __construct(){
        $this->myVar++;
    }
    function __destruct(){
        echo "destruct";
    }
}
session_start();
$_SESSION['object']=new MyClass;
echo $_SESSION['object']->myVar; 
```

这个的输出是：

> 破坏2破坏

这部分让我陷入了一个小循环，如果我错了，我希望有人能纠正我。 `__destruct()`被调用两次，因为该对象是在将其放入会话时创建然后销毁的。回声`$_SESSION['object']->myVar`重新启动对象，然后随后被销毁。

如果您修改代码并取出`$_SESSION['object']=new MyClass;`并重新运行脚本，它将产生：

> 2破坏

同样，当对象被调用时，对象被销毁，函数完成执行。基本上，如果您将对象存储在会话中，预计每次访问该对象时它都会被销毁。

# javascript - JavaScript - 所有 onClick 事件都不起作用？

> ID：11161522
> 
> 赞同：1
> 
> 时间：2012-06-22T17:48:18.050
> 
> 标签：javascript, jquery, html

好的，所以我正在进行 Facebook 式聊天。但这并不重要。

见这里：http: [//jsfiddle.net/SkHme/7/](http://jsfiddle.net/SkHme/7/)

漂亮又漂亮，对吧？嗯，有问题。注意这一行：

```
<div class="conversation EmperorCuzco" onclick="setActive('EmperorCuzco')"> 
```

看到`onclick`属性了吗？好吧，它不工作。但是，我已经确认该功能本身确实有效。`onclick`（如果您像在 JavaScript 中那样运行它，它会像梦一样运行）我通过尝试将值替换为 simple进一步确认该函数不是问题`alert('blah')`，但这也不起作用。

那么这是什么一回事？我猜我的 JavaScript 中的某些东西以某种方式禁用了某些东西，但我完全不知道它可能是什么，也不知道如何修复它。我做了一些网络搜索，但找不到任何有用的东西。

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:52:22.243

您的`setActive`函数是在处理程序*的范围内*`$(document).ready`定义的。将函数移到该函数之外，使其处于全局范围内。

现在它看起来像这样：

```
$(document).ready(function()
{
    // ...
    function setActive(new_conversation)
    {
        // ...
    }
}); 
```

现在将其更改为：

```
$(document).ready(function()
{
    // ...
});

function setActive(new_conversation)
{
    // ...
} 
```

但实际上，您应该将内容与交互分开，并将这些事件处理程序绑定到脚本本身中。就像是：

```
// Refers to the last clicked conversation *button*
// Initialize to empty jQuery object
var $active_conversation = $([]);

// Binding on #chat, targeting click events on .conversation_button children
$("#chat").on("click", ".conversation_button", function() {
    // Hide currently active conversation
    $active_conversation.hide();
    $active_conversation.siblings('.conversation_button').removeClass("selected");

    // Set as currently active conversation button
    // Note: this refers to the clicked <div class="conversation_button">
    var $this = $(this);
    $active_conversation = $this.siblings('.conversation');

    // Show this conversation
    $active_conversation.show();
    $this.removeClass("alert").addClass("selected");
}); 
```

这种方法的一些优点：

*   不同的对话不需要不同的课程。通过将实际对话 DOM 元素（作为 jQuery 对象）存储在 中`$active_conversation`，无需任何额外处理即可识别对话。
*   您可以使用 a 添加和删除整个列表项，`conversation`而无需分配新的事件处理程序。*在上面的示例中，所有* 元素的事件处理程序都`.conversation_button`定义在`#chat`. 有关此绑定机制的更多信息，请继续阅读[`.on`](http://api.jquery.com/on/)（或[`.delegate`](http://api.jquery.com/delegate/)1.7 之前的版本）。

在这里，有一个[更新的小提琴](http://jsfiddle.net/MattiasBuelens/9ptFh/)！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:54:00.010

如果您所说的一切都是真的（发生了严重错误），那么唯一可以做到这一点的是另一个事件处理程序在使用之前获取您的事件`stopPropagation()`或`return false;`

可以做的快速检查是`onclick`用`onmousedown`or替换`onmouseup`，看看你的警报是否变得可见。

# javascript - 跨子域请求

> ID：11161526
> 
> 赞同：8
> 
> 时间：2012-06-22T17:48:26.833
> 
> 标签：javascript, html, nginx

我有两个网址：

一种是应用程序 URL = [http://domain.com/app](http://domain.com/app) 一种是应用程序 API URL = [http://api.domain.com/](http://api.domain.com/)

如何让应用程序能够从不同子域的 api 请求内容。

我已经尝试将 Access-Control-Allow-Origin: * 放在两边都没有运气。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:21:08.870

两台服务器（不是客户端）需要发送以下标头：

1.  Access-Control-Allow-Origin ：决定哪个源可以调用服务器
2.  Access-Control-Allow-Methods ：允许访问资源的方法（GET 或 POST）
3.  Access-Control-Max-Age : 缓存保存多长时间

如果服务器支持跨源资源共享，您可以检查从服务器返回的标头（使用 Firebug 或其他）。

如果您无法修改两台服务器以添加标头，另一种可能是设置位于您的请求和两台服务器之间的代理。如果您需要访问它们，此代理可以添加标题

如果您拥有服务器的管理员权限，[此 CORS 页面](http://enable-cors.org/)将显示如何在各种平台中添加标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:51:15.623

将 cookie 域设置为`.domain.com`，你应该都设置好了..这就是我在我的应用程序中所做的..

# asp.net - 在 ASP.net 的报表中显示数据

> ID：11161531
> 
> 赞同：0
> 
> 时间：2012-06-22T17:48:35.877
> 
> 标签：asp.net, vb.net, sql-server-2008, crystal-reports, report

我是在 ASP.net 中创建报告的新手，我想知道是否有任何东西可以显示与数据库中存储的数据不同的数据。

这是我的例子。我有一个名为 Active 的列，在 DB 表中，0 表示 Active，-1 表示 InActive。

在我的报告中，当显示列表是否处于活动状态时，我宁愿使用单词 Active 和 Inactive 而不是 0 和 -1。

这会在自定义表达式中找到吗？我不知道从哪里开始...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:34:26.293

替代解决方案：如果您不想对其建模，那么最简单的方法是更改​​您的数据库查询并在该列为 -1 和 -0 时返回“非活动”和“活动”字符串。如果是 MS SQL Server，您可以通过“CASE WHEN...”来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:07:00.523

如果您将 SSRS 用于报告或 Crystal Reports，则可以在运行时替换文本。在 Crystal Reports 中，您可以使用 IF ... ELSE 条件添加公式字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:59:55.523

将您的数据库表建模为类对象表示。例如：

```
public class MyDataModel
{
    public int Active { get; set; }

    public string ActiveDisplay 
    {
      get 
      {
        return (this.Active==-1) ? "Inactive" : "Active";
      }
    }
} 
```

当您从数据库中获取数据时，创建一个模型集合，该集合将从返回的数据中加载所有行；例如

```
var myData = new List<MyDataModel>() 
```

您现在可以将此模型对象集合绑定到数据网格并显示“ActiveDisplay”属性而不是“Active”属性。

# linux - $$在linux脚本中是什么意思？

> ID：11161532
> 
> 赞同：2
> 
> 时间：2012-06-22T17:48:41.387
> 
> 标签：linux

> **可能重复：**
> [$$ 在 shell 中是什么意思？](https://stackoverflow.com/questions/78493/what-does-mean-in-the-shell)
> [什么是特殊的 Dollarsign 变量（可能仅限 bash）？](https://stackoverflow.com/questions/5163144/what-are-the-special-dollarsign-variables-possibly-bash-only)

我是 linux 环境的新手。我正在处理一个具有这样命令的特定脚本

```
ps -p $$ 
```

-p 应该遵循进程 ID，但我不明白 $$ 是什么意思。\ 一些 linux 大师能解释一下吗？isit 一个 var 它来自哪里等等，，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:01:19.510

特殊`$$`变量计算为当前进程的 PID（进程 ID）——它是一个整数；它没有被列出，`env`因为它*不是*环境变量。它是 BASH 提供的一个特殊的内置变量。

# c# - C#中事件处理的差异

> ID：11161534
> 
> 赞同：-1
> 
> 时间：2012-06-22T17:48:49.313
> 
> 标签：c#, event-handling

如果在 C# 中，事件处理有什么不同吗？例如，如果我使用不同类型的项目。例如 WPF 与 WFA，...

**编辑更具体：** 差异**是**指，如果我在其他类型的项目中为某些组件（如按钮、单选按钮、组框等）编写事件处理程序，则实际代码将不同。我想不应该。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:53:39.917

是的，存在差异。事件仍然以相同的方式添加和删除，但事件本身是不同的。

阅读 RoutedEvents：http: [//msdn.microsoft.com/en-us/library/ms742806.aspx](http://msdn.microsoft.com/en-us/library/ms742806.aspx)

# ant - ANT 中有没有办法从 JAR 中提取一个类文件并将其放入另一个 JAR 中？

> ID：11161539
> 
> 赞同：2
> 
> 时间：2012-06-22T17:49:14.253
> 
> 标签：ant, jar

我的 ANT 构建脚本使用一个名为 createEJBStubs 的 WebSphere 命令，该命令生成一个 JAR 文件，其中包含所有内容以及一个新生成的类，即：`com/myapp/services/_User_Service_Stub.class`.

由于这个存根类仅用于在开发时运行 JUnit 测试，我希望它位于它自己的 JAR 文件中。

我如何告诉 ANT 复制`AAA.JAR`匹配项中的所有内容，例如，`_*Stub.class`仅将这些文件复制到其中`BBB.JAR`（同时，保持相同的目录/包结构）？

任何想法或指示将不胜感激！谢谢，

抢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T18:16:22.670

好的——回答我自己的问题——这非常容易。对不起，我问了。

```
<unzip src="AAA.JAR" dest="./temp">
  <patternset>
    <include name="**/_*Stub.class" />
  </patternset>
</unzip>

<zip destfile="BBB.JAR" basedir="./temp" /> 
```

谢谢蚂蚁。

# c++ - C++中两个/两个以上对象的重载加法赋值运算符？

> ID：11161541
> 
> 赞同：18
> 
> 时间：2012-06-22T17:49:21.123
> 
> 标签：c++, operator-overloading

我已经像这样重载了 + 运算符

```
class sample
{
private : 
  int x;
public :
  sample(int x1 =0)
  {
    x = x1;
  }

  sample operator+(sample s);
};

sample sample::operator+(sample s)
{
  x = x + s.x;
  return *this;
}

int  main()
{
  sample s1(10);
  sample s2;
  s2 = s2 + s1;
  return 0;    
} 
```

这个对吗？我的问题是如果我想添加两个不同的示例对象，我将如何重载操作符；例如对于`s = s1 + s2`;

我喜欢`s = s + s1 + s2`使用现有的实现。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-22T17:56:26.470

使用友元运算符重载应该可以解决问题，并且是定义二元运算符的常用方法，只需添加：

```
friend sample operator+(const sample& a, const sample& b); //in class

sample operator+(const sample& a, const sample& b) { //outside the class
    return sample(a.x + b.x);
} 
```

如果您希望它保持成员身份（在一些罕见的情况下有缺点，并且没有优点），您必须使操作符成为一个`const`函数：

```
sample operator+(sample s) const; //in class

sample sample::operator+(const sample& b) const { //outside the class
    return sample(this->x + b.x);
} 
```

其中任何一个都将允许运算符链接。您之前`s = s + s1 + s2`失败的原因是`s + s1`会执行并返回一个*临时* `sample`对象。然后，它会尝试添加`s2`到该样本中。但是，临时对象只能是`const`引用^([1])，因此只能使用`const`成员函数。由于您的`operator+`成员函数不是`const`函数，因此您不能在`const`临时上使用该函数。请注意，要制作它`const`，我必须重写它，因为您的版本修改了`+`.

^([1] 例外在这里不是特别相关，即右值)

# ios - xib 未在默认 MonoTouch 应用程序中的 Xcode 中打开

> ID：11161544
> 
> 赞同：4
> 
> 时间：2012-06-22T17:49:29.620
> 
> 标签：ios, xcode, xamarin.ios, xib, xamarin

我刚刚使用 MonoDevelop 创建了一个 MonoTouch 解决方案，在我尝试在 XCode 中打开 xib 进行编辑后，出现以下异常（并且 xib 未打开）：

```
System.NotSupportedException: Custom attribute type 0x43 is not supported.
at ICSharpCode.NRefactory.TypeSystem.CecilLoader+BlobReader.ReadCustomAttributeFieldOrPropType () [0x00000] in <filename unknown>:0 
at ICSharpCode.NRefactory.TypeSystem.CecilLoader+BlobReader.ReadNamedArg (IType attributeType) [0x00000] in <filename unknown>:0 
at ICSharpCode.NRefactory.TypeSystem.CecilLoader+CecilResolvedAttribute.DecodeBlob (System.Collections.Generic.List`1 positionalArguments, System.Collections.Generic.List`1 namedArguments) [0x00000] in <filename unknown>:0 
at ICSharpCode.NRefactory.TypeSystem.CecilLoader+CecilResolvedAttribute.DecodeBlob () [0x00000] in <filename unknown>:0 
at ICSharpCode.NRefactory.TypeSystem.CecilLoader+CecilResolvedAttribute.get_PositionalArguments () [0x00000] in <filename unknown>:0 
at MonoDevelop.MacDev.ObjCIntegration.NSObjectInfoService.ConvertType (MonoDevelop.Ide.TypeSystem.ProjectContentWrapper dom, ITypeDefinition type) [0x00000] in <filename unknown>:0 
at MonoDevelop.MacDev.ObjCIntegration.NSObjectInfoService+<GetRegisteredObjects>c__Iterator2.MoveNext () [0x00000] in <filename unknown>:0 
at MonoDevelop.MacDev.ObjCIntegration.NSObjectProjectInfo.Update () [0x00000] in <filename unknown>:0 
at MonoDevelop.MacDev.ObjCIntegration.NSObjectProjectInfo.Update (Boolean force) [0x00000] in <filename unknown>:0 
at MonoDevelop.MacDev.XcodeSyncing.XcodeProjectTracker.UpdateTypes (IProgressMonitor monitor) [0x00000] in <filename unknown>:0 
```

该应用程序可以编译并运行良好......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T14:39:26.083

重启XCode和MonoTouch，应该可以解决这个问题了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:22:25.767

我重新启动了 MonoDevelop 和 XCode，但仍然遇到同样的问题。在我找到更好的解决方案之前，我是这样做的：

1.  在 XCode 中打开现有解决方案。
2.  打开 xib 文件以启动 Interface Builder（从 XCode 中）。
3.  在 Interface Builder 中，转到 File>Open。
4.  导航到在 MonoDevelop 中创建的 xib 文件。

如果不打开现有的 XCode 解决方案，我找不到启动 Interface Builder 的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:43:42.410

我尝试重新启动/重新安装/重新启动无济于事。

我通过删除对我在同一解决方案中创建的**便携式库项目的引用解决了我的问题。**Portable Library 声称它支持 MonoTouch，但也许它并不是要引用 MonoTouch 本身（因为那样它就不能移植到其他平台。）我确实收到了一些与它引用 MonoTouch 相关的编译警告。

相反，我从**MonoTouch Library Project**项目模板创建了一个新项目，将我的文件移到那里，然后我可以再次在 MonoDevelop 的 Interface Builder 中编辑 XIB/Storyboards。

替代方案：我实际上没有创建一个新项目并移动我的文件，而是更改了我的 csproj 文件中的 <ProjectTypeGuids>...</ProjectTypeGuids> 以匹配 MonoTouch 库项目，因为这对我来说更容易：

```
<ProjectTypeGuids>{786C830F-07A1-408B-BD7F-6EE04809D6DB};{FAE04EC0-301F-11D3
-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

# c# - 遍历树时查找节点

> ID：11161546
> 
> 赞同：9
> 
> 时间：2012-06-22T17:49:33.073
> 
> 标签：c#, linq, data-structures, tree

我想实现一种方法，使我能够在树中找到一个节点。我这样做的方式是递归地使用全局变量来知道何时停止。

**我有课：**

```
class Node    // represents a node in the tree
{ 
     // constructor
     public Node() {
          Children = new List<Node>();
     }

     public List<Node> Children; 
     public string Name;
     public string Content;            
} 
```

**而我现在的方法是：**

```
 private bool IsNodeFound = false; // global variable that I use to decide when to stop

    // method to find a particular node in the tree
    private void Find(Node node, string stringToFind, Action<Node> foundNode)
    {
        if(IsNodeFound)
           return;

        if (node.Content.Contains(stringToFind)){
            foundNode(node); 
            IsNodeFound =true;               
        }

        foreach (var child in node.Children)
        {
            if (child.Content.Contains(stringToFind)){
                foundNode(node);
                IsNodeFound =true;               
            }

            Find(child, stringToFind, foundNode);
        }

    } 
```

**我使用 Find 方法的方式是：**

```
 // root is a node that contain children and those children also contain children
   // root is the "root" of the tree
   IsNodeFound =false;
   Node nodeToFind = null;
   Find(root, "some string to look for", (x)=> nodeToFind=x); 
```

**所以我的问题是**如何让这种方法更优雅。我希望方法的签名看起来像：

```
 public Node FindNode(Node rootNode); 
```

我认为这是多余的我在做什么，并且可能有更好的方法来创建该方法。或者也许我可以更改 Node 类，以便我可以使用 linq 查询来实现相同的目的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T17:56:53.563

我会这样做：

编写一个实例方法来生成节点的子树（如果您不控制`Node`类，可以将其作为扩展）：

```
public IEnumerable<Node> GetNodeAndDescendants() // Note that this method is lazy
{
     return new[] { this }
            .Concat(Children.SelectMany(child => child.GetNodeAndDescendants()));    
} 
```

然后你可以用一点 LINQ 找到节点：

```
var foundNode = rootNode.GetNodeAndDescendants()
                        .FirstOrDefault(node => node.Content.Contains(stringToFind));

if(foundNode != null)
{
    DoSomething(foundNode);
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-22T18:02:19.383

您可以使用使用 Linq 的其他答案之一，也可以使用使用递归的深度优先搜索机制：

```
public Node Find(string stringToFind)
{
    // find the string, starting with the current instance
    return Find(this, stringToFind);
}

// Search for a string in the specified node and all of its children
public Node Find(Node node, string stringToFind)
{
    if (node.Content.Contains(stringToFind))
        return node;

    foreach (var child in node.Children) 
    { 
        var result = Find(child, stringToFind);
        if (result != null)
            return result;
    }

    return null;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T18:06:54.447

您可以使用递归使用深度优先搜索（不需要全局变量知道何时终止）：

```
Node FindNode1( Node rootNode, string stringToFind ) {
    if( rootNode.Content == stringToFind ) return rootNode;
    foreach( var child in rootNode.Children ) {
        var n = FindNode1( child, stringToFind );
        if( n != null ) return n;
    }
    return null;
} 
```

或者，如果您希望避免递归，您可以使用堆栈以非递归方式完成同样的事情：

```
Node FindNode2( Node rootNode, string stringToFind ) {
    var stack = new Stack<Node>( new[] { rootNode } );
    while( stack.Any() ) {
        var n = stack.Pop();
        if( n.Content == stringToFind ) return n;
        foreach( var child in n.Children ) stack.Push( child );
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T18:06:01.623

如果 linq 的回答让你和我一样困惑，这就是我用简单递归的方法。请注意它是深度优先，如果这对您的模型更有意义，您可能希望先将其更改为广度。

```
public Node FindNode(Node rootNode)
{
    if (rootNode.Content.Contains(stringToFind))
       return rootNode;

    foreach (Node node in rootNode.Children)
    {
        if (node.Content.Contains(stringToFind))
           return node;
        else
           return FindNode(node);
    }

    return null;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T18:24:46.403

递归和PLinq

```
 private Node Find(Node node, Func<Node, bool> predicate)
    {
        if (predicate(node))
            return node;

        foreach (var n in node.Children.AsParallel())
        {
            var found = Find(n, predicate);
            if (found != default(Node))
                return found;
        }
        return default(Node);
    } 
```

并调用代码：

```
 var found = Find(root, (n) => n.Content.Contains("3"));
     if (found != default(Node))
         Console.Write("found '{0}'", found.Name);
     else Console.Write("not found"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T17:55:26.610

考虑制作类似 LINQ 的 API：拆分“查找”和“操作”部分以使其简单。您甚至可能不需要任何“Act”部分的特殊自定义代码，现有的 LINQ 就可以了。

```
public IEnumerable<Node> Where(Func<Node, bool> condition); 
```

根据您的需要，您可以遍历整个树一次并检查每个节点以实现 Where，或者使用惰性迭代正确执行。对于惰性迭代，您需要某种能够记住当前位置的结构（即要访问的节点堆栈和子节点的索引）。

注意：请避免使用全局变量。即在您当前的代码中简单地从 Find 函数返回 true/false 并在返回 true 时停止迭代将是更好的方法。

# jquery - 带溢出的 DIV：添加内容时自动停止滚动

> ID：11161550
> 
> 赞同：0
> 
> 时间：2012-06-22T17:50:08.947
> 
> 标签：jquery, asp.net, scroll, updatepanel, ajaxcontroltoolkit

我在 asp:UpdatePanel 内有一个带有 style="overflow:auto" 的 DIV 容器，由 asp:Timer 触发

DIV 的内容每秒更新一次，但一旦内容溢出 div 的宽度和高度限制，DIV 会随着每次内容添加自动滚动回顶部；我希望它留在当前设置滚动的位置，或者更好地保持 DIV 的底部内容可见。

我尝试使用一些 javascript 来使用 scrollHeight 操作 scrollTop，但它会创建一个不可用的 DIV 对象，因为自动滚动总是在发生。

我可以添加一些 javascript 以不自动向下滚动 onfocus，但这不会修复添加新内容时自动滚动到 DIV 内容顶部的问题。

我必须对所有 ajax 使用 ASP.NET 对象，但我有 jQuery 1.7（最新版本）来补充任何功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:51:56.383

您需要 _endRequest、_beginRequest 处理程序。在后面的代码中添加这个。

```
public object endRequestHandle { get; set; }

public object beginRequestHandle { get; set; } 
```

在您的 aspx 页面中，添加以下内容：

```
Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);
        function beginRequestHandle(sender, Args) {
           //call any function if you want before Ajax update/request begins
        }

        function endRequestHandle(sender, Args) {
         //Call the function to scroll the div all the way down
        } 
```

# objective-c - 在另一个类的正在运行的 CCScene 上执行选择器

> ID：11161551
> 
> 赞同：0
> 
> 时间：2012-06-22T17:50:16.873
> 
> 标签：objective-c, cocos2d-iphone

我`GameScene`在那个场景中有一个和一个 CCMenu，第一个调用`[self pauseSchedulerAndActions]`然后弹出一个警报。警报有它自己的类。

我想要的是，当我在警报中按下 Resume 时，计划的选择器和要恢复的操作（也就是调用`[self resumeSchedulerAndActions]`）。

问题是我所做的一切似乎都不起作用。

我试过的：

```
[[[CCDirector sharedDirector]runningScene]resumeSchedulerAndActions]; 
```

它应该返回当前场景（GameScene）然后执行选择器..但它没有

```
[[CCScheduler sharedScheduler]resumeTarget:[GameScene node]]; 
```

我错过了什么……还是做错了……还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:28:37.227

好的..解决了问题

我所做的是：

-`self.tag=111;`在init方法中添加`GameScene`

- 在 GameScene 中创建了一个恢复选择器的实例方法

- 在弹出菜单中，我调用了这样的方法：

```
[[[CCDirector sharedDirector]runningScene]getChildByTag:111]performSelector:@selector(resumeGame)]; 
```

# python - web2py 错误：对等方重置连接

> ID：11161553
> 
> 赞同：1
> 
> 时间：2012-06-22T17:50:40.593
> 
> 标签：python, web2py

几天来，我一直在谷歌上搜索，试图找到一个直接的答案来解释为什么会发生这种情况，但找不到任何有用的东西。我有一个 web2py 应用程序，它只是读取数据库并向 REST api 发出一些请求。它是一个健康检查监视器，因此它每分钟都会自行刷新。在任何给定时间大约有 20 个用户。这是我在日志文件中经常看到的错误：

```
ERROR:Rocket.Errors.Port8080:Traceback (most recent call last):
  File "/opt/apps/web2py/gluon/rocket.py", line 562, in listen
    sock = self.wrap_socket(sock)
  File "/opt/apps/web2py/gluon/rocket.py", line 506, in wrap_socket
    ssl_version = ssl.PROTOCOL_SSLv23)
  File "/usr/local/lib/python2.7/ssl.py", line 342, in wrap_socket
    ciphers=ciphers)
  File "/usr/local/lib/python2.7/ssl.py", line 121, in __init__
    self.do_handshake()
  File "/usr/local/lib/python2.7/ssl.py", line 281, in do_handshake
    self._sslobj.do_handshake()
error: [Errno 104] Connection reset by peer 
```

根据一些谷歌搜索，最有希望的信息是有人试图通过防火墙进行连接，因此它正在终止连接，但是我不明白为什么它会关闭实际的应用程序。该进程仍在运行，但没有人可以连接，我必须重新启动 web2py。

我将非常感谢这里的任何输入。我已经超越了挫败感。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:03:35.743

最常见的`Connection reset by peer`错误来源是远程客户端决定他不想再联系您，并取消交互（使用[`shutdown`](http://linux.die.net/man/2/shutdown)/an`RST`数据包）。如果用户在网站加载时导航到不同的页面，就会发生这种情况。

在您的情况下，远程主机甚至在您读取或写入任何内容之前就放弃了连接。使用当前的 web2py，这应该只输出你看到的警告，而不是终止任何东西。

如果您有当前的web2py，则无法连接的错误与这些错误消息无关。如果你有旧版本的 web2py，你应该更新。

# jquery - 将 .off() 与 emberjs 的 willDestroyElement() 一起使用

> ID：11161563
> 
> 赞同：0
> 
> 时间：2012-06-22T17:51:32.247
> 
> 标签：jquery, ember.js

提前感谢您查看此内容。

本质上，我正在调用 didInsertElement() 并将事件绑定到 DOM`$(document).on(...)`

我正在努力成为一个有礼貌的开发人员并`$(document).off(...)`使用 willDestroyElement 进行调用。

但是，由于我可能绑定了多个东西，因此`$(document)`我需要指定要删除的功能。当我这样做时，jQuery`this`用它自己的劫持 Ember`HTMLElement`

**JsFiddle：http:** [//jsfiddle.net/brennan/H65Ax/](http://jsfiddle.net/brennan/H65Ax/)

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:03:57.090

像这样修改你的代码：

```
didInsertElement: function(){
    var self = this;
    //storing `click` handler on new property `addedListener`
    $(document).off('click', self.addedListener = function(){
        self.set('isActive', false);
    });
},
willDestroyElement: function(){
    var self = this;
    $(document).off('click', self.addedListener);
}, 
```

# python - 无法导入 Python 包

> ID：11161568
> 
> 赞同：1
> 
> 时间：2012-06-22T17:51:57.827
> 
> 标签：python, import, filesystems, include, pydev

仅在从 cmdline/console 运行 python 时，我无法导入 python 包。但是，当使用 pydev 时，一切似乎都运行良好。

我有以下文件系统...

```
---MarketData
   ---Parser
      ---Parser.py
      ---__init__.py
   ---IO
      ---__init__.py
      ---MarketSocket.py 
```

目前，Parser 和 IO 被定义为 python 包（它们有**init .py 文件，虽然****Parser.init** .py 文件中没有代码。

我正在尝试在 MarketSocket.py 中运行以下代码行

```
from Parser import Parser 
```

应该在包'Parser'中导入模块'Parser'但是，我收到以下错误。

```
ImportError: No Module Named Parser 
```

任何帮助，将不胜感激！这应该根据 stackOverflow 上的类似问题起作用，但由于某些奇怪的原因，它不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:56:41.337

`MarketSocket.py`在目录中`IO`。因此无法找到包`Parser`。

解决此问题的最佳方法是相对导入：`from ..Parser import Parser`但如果您启动以下脚本，它们可能不起作用：`python MarketSocket.py`. 要使用它，您还必须将一个添加`__init__.py`到您的`MarketData`目录中。

如果它不起作用，请扩展`sys.path`如下：

```
import sys
sys.path.append('../') 
```

有了这个附加功能，Python 还会搜索您想要的路径。

如果我是你，我也会考虑重组你的项目。在我看来，可执行文件应该（大部分时间）位于工作树的顶部，这也类似于 Python 的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:56:24.070

MarketSocket.py 比 Parser 低一级，因此看不到它

做这个：

```
import os
import sys
sys.path.insert(0, os.path.join(os.path.dirname(__file__), ".."))
sys.path.append(os.path.dirname(__file__)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:02:25.813

在 MarketData 目录中放置一个（空的）`__init__.py`将使整个东西成为一个包（并避免丑陋的路径黑客）。如果你从包的顶层调用模块，那应该就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-30T20:35:42.863

您遇到了相对导入的问题。只有在父目录中，您才能访问任何子包/模块。所以在 MarketSocket.py 中，你需要

从..解析器导入解析器

然后，当您使用 -m 选项运行它时，诀窍是您必须在顶级目录中运行它。所以在这种情况下 1) 你将转到 MarketData 的父目录 2) 在该父目录中，运行 python -m MarketData.IO.marketSocket

# c# - 不同泛型的数组

> ID：11161569
> 
> 赞同：3
> 
> 时间：2012-06-22T17:52:01.903
> 
> 标签：c#, arrays, generics, inheritance, invariants

长话短说，我希望能够通过对所有使用的类型使用父类型，在数组中使用不同类型参数存储泛型。MSDN 提到这是不可能的，因为泛型是不变的类型，但有评论指出自 4.0 框架以来这发生了变化。

这是我想做的一个基本示例：

```
 public class Animal
    {
    }
    public class Dog : Animal
    {
    }
    public class Cat : Animal
    {
    }

    public class MyGeneric<T>
    { }
    public class MyInheritedGeneric<T> : MyGeneric<T>
    { }

    static void Main(string[] args)
    {
        MyGeneric<Animal>[] myGenericArray = new MyGeneric<Animal>[] 
        {
            new MyGeneric<Dog>(),
            new MyInheritedGeneric<Cat>()
        };
    } 
```

这将返回类似的错误：

```
Cannot implicitly convert type
'InheritanceTest.Program.MyGeneric<InheritanceTest.Program.Dog>' to
'InheritanceTest.Program.MyGeneric<InheritanceTest.Program.Animal>'

Cannot implicitly convert type
'InheritanceTest.Program.MyInheritedGeneric<InheritanceTest.Program.Cat>'
to 'InheritanceTest.Program.MyGeneric<InheritanceTest.Program.Animal>' 
```

有没有办法使用类型的父类将泛型存储在数组中，或者这根本不可能？我真的希望这是可能的，否则它会让我的程序成为一场噩梦......

**编辑：更多的上下文！**

我正在制作课程以在游戏中生成敌人。我称它们为模板（与实际的模板类无关，我完全可以称它们为蓝图或工厂）。一个敌人的构造函数接受一个模板，它用它来确定自己的值。当游戏加载时，模板用于生成所有敌人，使用它们的 Generate() 函数，该函数返回一个对应类型的数组，它们被分配生成。使用模板创建的所有对象都有一个以模板为唯一参数的构造函数。

```
public class Template<T>
{
    protected static Random random = new Random(); 
    protected int _amount;

    public int Amount
    {
        get { return _amount; }
    }

    public virtual T CreateInstance()
    {
        return (T)Activator.CreateInstance(typeof(T), this);
    }
    public virtual T[] Generate()
    {
        T[] objects = new T[Amount];
        for (int i = 0; i < Amount; ++i)
            objects[i] = CreateInstance();
        return objects;
    }
} 
```

这是 BasicZombie.cs 文件的摘要，其中包含实际的敌人类和模板。

```
 class Tpl_BasicZombie : Tpl_Enemy<BasicZombie>
{
    public Tpl_BasicZombie()
    {
        _hp = 4;
        _speed = 3;
        _amount = 10;
    }
}

class BasicZombie : GroundEnemy
{
    public BasicZombie(Tpl_BasicZombie template)
        : base(template, TextureManager.Get("zombie_base"), 1, 8)
    { }

    public void StuffHappens()
    { }
} 
```

加载游戏时，我想遍历数组中的所有模板以从中加载敌人。我知道我可以手动执行此操作，但每次创建新类型的敌人时，我都需要手动将其添加到代码中（因此可能会忘记不止一次）。

我的两个选择是：1-使用泛型，然后出现上述问题。2- 使用非泛型，并将类型存储在其中，这将锚定返回类型 Generate() 函数。这意味着 generate 函数将输出一个对象数组，该数组需要在模板每次生成敌人数组时转换为合适的类型。

我的脑海中有一个空间告诉我有一个优雅的解决方案来解决这一切，我希望它是正确的！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T17:55:50.610

是的，C# 4 支持[泛型变体](http://msdn.microsoft.com/en-us/library/dd799517.aspx)- 但仅在接口和委托的声明中，因此在这种情况下您将无法做到这一点。当然，您可能会创建一个接口：

```
public interface IGeneric<out T> 
```

然后在你的类中实现它，此时你可以创建一个`IGeneric<Animal>`.

如果您可以提供有关您想要实现的目标的更多详细信息，我们或许可以帮助您找到替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:30:46.527

除了 Jon Skeet 的信息，您也许可以执行以下操作：

```
public MyGeneric<T2> ToOtherType<T2>()
{
    if (typeof(T2).IsAssignableFrom(typeof(T)))
    {
        // todo: get the object
        return null;
    }
    else
        throw new ArgumentException();
}

        new MyGeneric<Dog>().ToOtherType<Animal>(),
        new MyInheritedGeneric<Cat>().ToOtherType<Animal>() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T19:58:17.447

如果一个数组要保存不止一种类型的项，则这些项必须存储在与数组本身分开的堆对象中（如果某些类型是结构，则它们必须被装箱或存储为从非泛型派生的泛型类型中的字段）。在大多数情况下，最简单的做法是为要存储在数组中的所有内容识别一个共同的祖先类型，并根据需要简单地对数组元素进行类型转换。然而，在少数情况下这是不可行的。例如，如果您的集合要保存类型未知但受多个接口约束的对象，则有必要将这些对象传递给其方法类型参数同样受约束的泛型例程，

如果您的集合中的对象将仅传递给少数例程，则可以使用通用方法添加项目构造委托以适当地调用所有必要的例程并将这些委托存储为集合的一部分。Lambda 表达式或匿名委托可能对此很方便。

例如，假设需要能够将存储在列表中的项目提供给`Wibble<T>`各种`IWibbler`对象的`Wobble<T>`方法和各种对象的方法`IWobbler`，其中`T`类型具有接口约束`I1`和`I2`.

```
    接口 IWibbler { void Wibble<T>(T param, int param) 其中 T : I1,I2; }
    interface IWobbler { void Wobble<T>(T param, string param) where T: I1,I2; }

    私有结构 WibbleWobbleDelegateSet
    {
        公共动作<IWibbler, int> Wibble;
        公共动作<IWobbler，字符串> 摆动；
        静态 WibbleWobbleDelegateSet Create<T>(T param) where T: I1, I2
        {
            var ret = 新的 WibbleWobbleDelegateSet ();
            ret.Wibble = (IWibbler wibbler, int p2) => { wibbler.Wibble<T>(param, p2); };
            ret.Wobble = (IWobbler wobbler, string p2) => { wobbler.Wobble<T>(param, p2); };
            返回 ret;
        }
    }

```

`WibbleWobbleDelegateSet.Create<T>(T param)`使用适当约束的调用`param`将产生一个非泛型结构，其中包含可用于将创建结构时提供的参数传递给任何`IWibbler.Wibble<T>()`或`IWobbler.Wobble<T>()`方法的委托。

这种方法只有在将要调用的例程列表已知时才能直接使用。如果需要能够使用受约束的泛型参数调用任意例程，则可以使用一些棘手的接口或使用反射来做到这一点，但这样的事情会变得更加复杂。

# function - 将while循环转换为函数？Python

> ID：11161570
> 
> 赞同：0
> 
> 时间：2012-06-22T17:52:04.270
> 
> 标签：function, while-loop, python-2.7

为了压缩我的代码，我试图将我的一个 while 循环变成一个函数。我已经尝试了很多次，但在编译时还没有收到与我刚刚离开 while 循环相同的结果。

这是while循环：

```
while True:
    i = find_lowest_i(logs)
    if i == -1:
        break
    print "i=", i
    tpl = logs[i].pop(0)
    print tpl
    out.append(tpl)
    print out 
```

到目前为止，这是我的功能：

```
def mergesort(list_of_logs):
    i = find_lowest_i(logs)
    out = []
    while True:
        if i == -1:
            break
        print "i=", i
        tpl = logs[i].pop(0)
        print tpl
        out.append(tpl)
        print out
    return out 
```

提前致谢。这个地方是初学者程序员的避风港。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:54:42.960

看起来您的函数的参数是`list_of_logs`并且您仍在`logs`函数体内使用。最简单的解决方法可能是将参数重命名为`mergesort`from `list_of_logs`to `logs`。否则，对我来说看起来完全正确。

# twitter-bootstrap - 如何在 Windows 8 上的 Metro IE 10 上检测窄捕捉模式

> ID：11161573
> 
> 赞同：6
> 
> 时间：2012-06-22T17:52:21.363
> 
> 标签：twitter-bootstrap, windows-8, responsive-design, internet-explorer-10

在 Windows 8 中，使用基本的 Twitter Bootstrap 模板，如果我将 IE 10 桌面浏览器缩小到一个窄窗口（见右下方），它将回退到使用适用于智能手机的宽度样式：窄、高窗口和非常可读。但是，如果您将 IE 10 Metro 浏览器捕捉到窄视图（见左下方），它会将整个页面视图缩小，因此不可读，而不是使用窄窗口样式。

这是不幸的，并且可能是 Metro 浏览器设计或错误的意外结果。

假设它在最终版本中没有得到纠正，我的问题是：

1.  有没有办法确定 IE 10 Metro 正在捕捉模式下查看该页面？我宁愿以 Modernizr 风格的方式执行此操作，测试行为，而不是硬编码 IE Metro，这在未来可能会成为一个问题。但是，在这一点上，工作修复更为重要。

![IE 10 窄幅 Metro 与桌面](../Images/90bb1a9f6f63c7193bc5df1191bd7762.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:12:03.680

在 Raymond Chen在上述评论中[建议](http://blogs.msdn.com/b/ie/archive/2012/06/19/adapting-your-site-to-different-window-sizes.aspx)的 IEBlog 帖子的帮助下，我能够通过在引导响应样式之后添加以下 CSS 来纠正问题：

```
@media screen and (max-width: 320px) {
   @-ms-viewport { width: 320px; }
} 
```

这停止了​​ IE 10 Metro（快照侧边栏模式）中的缩放行为，并正确显示了针对窄屏幕优化的视图。

**最后一点：** Twitter Bootstrap 模板优化的最小宽度是 480 像素（可能是因为 iPhone）。因此，可能需要对 320 像素进行进一步优化，以改进用于 Metro 侧边栏快照查看的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T19:46:53.617

我最近想出了一个解决方案。它基于 JavaScript 并根据要求测试行为。

[http://menacingcloud.com/?c=targetSnapMode](http://menacingcloud.com/?c=targetSnapMode)

当与@viewport 声明结合使用时，它可以实现有效的组合。

@-ms-viewport { 宽度：设备宽度；} @viewport { 宽度：设备宽度；}

上述@viewport 声明在[http://menacingcloud.com/?c=cssViewportOrMetaTag进行了讨论](http://menacingcloud.com/?c=cssViewportOrMetaTag)

希望有帮助:)

# c++ - 灵活、兼容的替代 FILE / fopen I/O

> ID：11161576
> 
> 赞同：1
> 
> 时间：2012-06-22T17:52:28.840
> 
> 标签：c++, file-io, iostream, fopen

我有一堆使用 C 样式文件 I/O（使用`FILE*`流、、、`fprintf`等`fscanf`）的遗留代码，我想更新这些代码以操作其他数据源（例如，从网络下载或发布到网络，或来自或来自自定义数据传输电缆）。

如果它使用 iostreams，这将是一个简单的更新，但事实并非如此。

`FILE*`是否有任何用于 I/O 的 C 或 C++ 库支持不同类型的流但与 C 的流函数源兼容或大部分源兼容？

如果源兼容性要求太高，我会选择“能够用 Perl 脚本进行搜索和替换”。 `fprintf`并且`fscanf`似乎是这里的主要障碍；我还没有找到`iostream`这些的任何兼容版本。

我正在寻找一种适用于 Windows 和 Linux 的解决方案。

**例子**

作为一个简单的例子，我有如下代码：

```
FILE *input = fopen(filename, "rt");
fscanf(input, "%d,%d,%d,%f", &f_id, &f_units, &h_index, &h_default);
fclose(input); 
```

我想更新它以处理格式相同但可能来自其他来源的数据，而不必担心自己如何准确复制`fscanf`'s 语义的复杂性（因为我有很多很多需要的`fscanf`调用`fprintf`更新）。像这样的东西会起作用，除了我找不到类似的东西`istream_scanf`：

```
std::istream *input = make_http_istream(url);
istream_scanf(*input, &f_id, &f_units, &h_index, &h_default);
delete input; 
```

# vagrant - 哪个命令可以在实例上获取 vagrantfile 更改

> ID：11161577
> 
> 赞同：27
> 
> 时间：2012-06-22T17:52:36.403
> 
> 标签：vagrant

我对我的 Vagrantfile 进行了更改（添加了`config.vm.share_folder`,`config.vm.customize`行），现在我希望它们出现在盒子上。我需要跑步吗

```
vagrant destroy && vagrant up 
```

或者运行就足够了

```
vagrant reload 
```

? 我不清楚 vagrant reload 是否会从 Vagrantfile 中读取任何内容，因为它似乎关闭了 VM 并运行了配置程序。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-22T18:23:05.083

我认为您不需要销毁您的虚拟机。当 VM 未运行且已关闭时，您可以更改 VM 配置。

尝试使用`vagrant halt`然后`vagrant up`.

它应该按照 Vagrantfile 中的指定对 VM 进行修改。

并且您还`vagrant up --no-provision`可以避免在启动 VM 时重新配置。

并且`vagrant reload [vm-name] --no-provision`应该做同样的伎俩。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-31T09:52:27.770

`vagrant reload`与运行相同`vagrant halt`，`vagrant up`请参阅[文档以获取 reload](https://docs.vagrantup.com/v2/cli/reload.html)。这是文档的摘录

“通常需要此命令才能使在 Vagrantfile 中所做的更改生效。对 Vagrantfile 进行任何修改后，应调用重新加载。” 所以在你的情况下，我建议你只使用，

```
vagrant reload 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-06T03:01:01.183

利用：

```
vagrant reload --provision 
```

# jquery - jQuery - 从选择菜单显示内容（更通用的方法）

> ID：11161591
> 
> 赞同：0
> 
> 时间：2012-06-22T17:53:40.840
> 
> 标签：jquery

我在这里看到过类似的解决方案，但它们太具体了。我的案例需要更通用的解决方案。基本上，无论显示 DIV 中使用的类如何，都可以重用。

旁注：我不太擅长 jQuery 或 JavaScript，正在研究它。

**我的 HTML 代码**

```
<select name="business-law" id="business-law" class="filter">
  <option value="view-all">&mdash; View All</option>
  <option value="firm-name">Firm name 1</option>
  <option value="other-firm">Firm name 2</option>
  <option value="another-one">Firm name 3</option>
  <option value="final-firm-name">Firm name 4</option>
</select>

<div class="firm-name">Author 1 info</div>
<div class="firm-name">Author 2 info</div>
<div class="other-firm">Author 3 info</div>
<div class="another-one">Author 4 info</div>
<div class="final-firm-name">Author 5 info</div>
<div class="final-firm-name">Author 6 info</div> 
```

**我的情况**

我正在建立一个列出律师事务所作者的页面。名单上有很多作者，而且很多都属于同一家律师事务所。

**我的问题**

由于页面可以有很多作者，我需要实现一个“过滤器”功能。过滤器将按公司过滤。因此，访问者从选择菜单中选择了其中一家公司，并且只应显示为该公司工作的作者。其他人应该躲起来。

还有一个“查看全部”选项，这显然会显示页面上的每个作者。这是默认选项。

**我的问题**

知道如何使用在类似情况下可重用的代码来完成此任务吗？（也许过滤国家、语言或水果，你知道我的意思）。

在这里查看其他解决方案时，我发现[了这个](https://stackoverflow.com/questions/10132331/on-change-the-select-value-display-certain-div-content)，但这对他的情况来说太具体了。这也有点过头了，所以我不知道如何适应这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:59:31.570

像这样的东西怎么样：

```
$('.filter').on('change',function(){
    if($(this).val()=='view-all'){
        $('div').show();
    }else{
        $('div').hide();
        $('.'+$(this).val()).show();
    }
}); 
```

这是一个小提琴：http: [//jsfiddle.net/MHPPE/](http://jsfiddle.net/MHPPE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:02:18.427

这个怎么样？

[http://jsfiddle.net/4PsTM/](http://jsfiddle.net/4PsTM/)

```
<select name="business-law" id="business-law" class="filter">
  <option value="view-all">&mdash; View All</option>
  <option value="firm-name">Firm name 1</option>
  <option value="other-firm">Firm name 2</option>
  <option value="another-one">Firm name 3</option>
  <option value="final-firm-name">Firm name 4</option>
</select>

<div class="firms">
<div class="firm-name">Author 1 info</div>
<div class="firm-name">Author 2 info</div>
<div class="other-firm">Author 3 info</div>
<div class="another-one">Author 4 info</div>
<div class="final-firm-name">Author 5 info</div>
<div class="final-firm-name">Author 6 info</div>
</div>​ 
```

使用这个 Javascript：

```
$("#business-law").change(
    function()
    {
        var selected = $(this).val();
        if (selected == 'view-all') {
            $('.firms').children().show();
        }
        else {
            $('.firms .'+selected).show();
            $('.firms :not(.'+selected+')').hide();
        }
    });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:01:45.977

其他解决方案是正确的，但它们忽略了“查看全部”：

```
$('#business-law').on('change', function() {
    if ($(this).val() == 'view-all') {
        $('div').show();
    } else {
        $('div').hide();
        $('.' + $(this).val()).show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:00:05.353

```
$('.filter').on('change',function(e){
  var val = $(this).val();
  $('.'+val).show();
}); 
```

这将显示类名与所选选项的 value 属性匹配的任何元素。

# css - SASS 缩小器可以删除重复的样式吗？

> ID：11161595
> 
> 赞同：23
> 
> 时间：2012-06-22T17:54:04.680
> 
> 标签：css, sass

我知道 css 规则相当复杂。但是，优化器不能以多种方式简单地减少以下 css 吗？如果是这样，在 rails-sass gem 中是否有一个选项？

```
span {
    background: red;
    color: green;
}

.test2 {
    background: red;
    color: green;
}

span {
    background: green;
    color: inherit;
}

.test2 {
    background: inherit !important;
    color: inherit;
    color: inherit;
    color: inherit;
} 
```

**附加背景：**

为了帮助澄清，我还将提出以下建议......

资源：

```
span {
    background: red;
}
span {
    background: orange;
    color: green;
}
span {
    background: yellow;
}
span {
    background: blue;
    color: green;
} 
```

而且，我希望编译器生成以下内容：

```
span {
    background: blue;
    color: green;
} 
```

我知道有多余的样式，但是在不断修改样式表时会发生很多次，我想消除死代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T16:51:18.057

我认为我可能已经找到了一种方法，至少可以在 css 和 sass/less 模板中找到重复的样式：

开源csscss gem [http://zmoazeni.github.io/csscss/](http://zmoazeni.github.io/csscss/)

它似乎能够检测到重复项，尽管我不得不在 bootstrap-sass gem 的 css 与我的 css 资产不在同一个文件夹中进行修补。

从文档中，您可以运行：

```
$ csscss -v path/to/styles.css 
```

或者

```
$ csscss -v path/to/styles.css.scss 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:11:58.273

Not that I know of, SASS will only format your code differently but not optimize it for you [http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#output_style](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#output_style)

Expanding on Whymarrh's comment, CSSTidy has a command line utility that could be integrated in a build process or similar, [http://packages.ubuntu.com/hardy/csstidy](http://packages.ubuntu.com/hardy/csstidy)

# objective-c - 从 NSDictionary , Plist 中检索数据

> ID：11161596
> 
> 赞同：0
> 
> 时间：2012-06-22T17:54:05.493
> 
> 标签：objective-c, arrays, xcode4, nsdictionary

嗨，我对 objC 还很陌生，我希望有人可以帮助我。

我正在制作一个示例位置应用程序。它有一个带有 locationNames 和坐标的 plist。我已将 plist 读入 NSDictionary，我还使用带有 allkeys 的 NSarray 来返回键。

每个键包含 2 个刺，我希望能够专门返回其中 1 个。

这是我的清单：

```
 <dict>
        <key>orleans</key>
        <dict>
            <key>lat</key>
            <string>100192</string>
            <key>lon</key>
            <string>990099</string>
        </dict>
        <key>arras</key>
        <dict>
            <key>lon</key>
            <string>122121</string>
            <key>lat</key>
            <string>878737</string>
        </dict>
 </dict> 
```

这是我的代码：

```
 NSString *myFile = [[NSBundle mainBundle] 
                        pathForResource:@"vluchten" ofType:@"plist"];

    coordinaten = [[NSDictionary alloc]initWithContentsOfFile:myFile];
    vluchten    = [coordinaten allKeys];  

    NSLog(@"coordinaat lon :%@" ,[coordinaten objectForKey:[vluchten objectAtIndex:1]]); 
```

-- 返回：

```
 2012-06-22 19:39:27.075 Pigeons[6817:11603] coordinaat lon :{
    lat = 100192;
    lon = 990099;
  } 
```

我只希望返回**lat**值（稍后我想要 lon）

我希望有人可以在这里帮助我。

问候，哈科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:02:35.353

您的 plist 定义了一个字典，其中每个成员也是一个字典，因此：

```
NSDictionary *arras = [coordinaten objectForKey:[vluchten objectAtIndex:1]];
NSString *arrasLat = [arras objectForKey:@"lat"]; 
```

# php - 如何使用 cookie 和不使用 cookie 检测对网站的首次访问

> ID：11161598
> 
> 赞同：1
> 
> 时间：2012-06-22T17:54:06.600
> 
> 标签：php, cookies, visited

我正在向网站添加“欢迎加载程序”。

我可以使用 cookie 检测访问是否是新的：

```
function show_loader()
{
 setcookie("loader_shown", "1", time() + 80,"/"); 

 echo "<div class='loader'>hello</div>";    

}

if(! $_COOKIE['loader_shown'])
{
 die(show_loader());
}

// the rest of the code to show the site....... 
```

对于启用了 cookie 的浏览器来说一切都很好....但是对于未启用 cookie 的浏览器，我将如何处理这种情况？考虑设置另一个cookie，然后在运行此位之前查看它是否已设置....

明信片上的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:00:18.013

您可以将用户的 IP 和用户代理存储在服务器上，如果给定的 IP/UA 组合最近看到它，则不显示该消息。

如果您只想使用 cookie，则必须这样做（伪代码）：

```
# page 1
if(isset($_COOKIE['welcome_shown'])) {
  redirect('home page')
  exit
}
setcookie('has_cookies', true)
redirect(page 2)

# page 2
if(isset($_COOKIE['has_cookies']) && !isset($_COOKIE['welcome_Shown'])) {
  show_welcome_message()
  setcookie('welcome_shown', true)
  exit
}
redirect('home page') 
```

# iphone - 如何在 iPhone 的 MPMoviePlayerController 中播放播放列表？

> ID：11161599
> 
> 赞同：1
> 
> 时间：2012-06-22T17:54:21.683
> 
> 标签：iphone, mpmovieplayercontroller

我想使用 MPMoviePlayerController 从我的应用程序中播放电影文件列表 (.mp4)。我使用以下代码创建了 Player，但我只能看到三个播放按钮，快进和后退。默认 MPMoviePlayerController 是否有上一个和下一个按钮来播放我列表中的下一个和上一个视频。如果可用，我们如何将这些按钮带入我的控制器中，如果不可用，我们如何通过自定义 MPMoviePlayerController 来实现它。

```
 movie = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];
       // movie.controlStyle =  MPMovieControlStyleNone;
          [movie setControlStyle:MPMovieControlStyleFullscreen];
       [movie.view setFrame:CGRectMake(30, 15, 400, 250)];
       [self.view addSubview:movie.view];
       [self registerForMediaPlayerNotifications];
       [movie play]; 
```

# javascript - 计算文本区域/输入框中字符数的优雅方法

> ID：11161600
> 
> 赞同：3
> 
> 时间：2012-06-22T17:54:41.510
> 
> 标签：javascript, jquery, html

所以我想动态地告诉用户他们输入了多少个字符。我在网上看到了几个使用“Onchange”或“OnKeyUp”的例子，但它们都是旧例子，而且看起来有点笨拙。

有没有更好的办法？也许某种绑定/分配（可能未正确使用该术语）值到变量的方法，然后在每次进行更改时进行检查？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T18:02:01.907

当您谈论动态显示已键入的字符数时，您将需要事件，例如`onchange`或`onkeyup`......真的没有其他方法。

更重要的是：“将值分配给变量并在每次进行更改时检查”还有其他方式，但通过`onchange`您将知道您需要检查什么以及何时检查？

一种快速、简单的方法：

```
document.getElementById('aninputId').onchange= function(e)
{
    console.log(this.value.length);//or alert(); do with this value what you want
}; 
```

要记住的重要一点是，如果您要处理很多元素，您可能需要考虑委派事件。[在这里，](https://stackoverflow.com/questions/11141678/how-can-i-capture-the-url-clicked/11141987#11141987)您可以找到一个类似（不重复）的问题，其中包含 2 个处理事件委托的答案。谷歌它以了解有关此强大功能的更多信息！

* * *

**更新**（带小提琴）

好的，我设置了[这个快速小提琴](http://jsfiddle.net/6kset/)作为使用事件委托的示例。我用`onchange`了，所以在失去焦点之前不会显示长度，有一些注释告诉你代码的作用，但是写得比较仓促。如果您对此示例有任何疑问，请告诉我。

PS：如果你想*实时*改变长度，只需更换

```
mainDiv.addEventListener('onchange',showLength,false); 
```

和

```
mainDiv.addEventListener('keyup',showLength,false); 
```

仅此而已！

* * *

**更新2**

回应您的最后评论：不，该代码不起作用。该`alert(e);`行将尝试提醒`event object`，因此您只会看到 '[object object]'，如果不是`undefined`在 IE 上。

为了帮助您理解我的 jsfiddle 中的代码是做什么的，我将逐步分解并通过它：

在我的示例中，输入字段（只有 1 个，但可能有 100 个）都是主 div 元素的子项`#allInputs`。所以首先，我们得到一个对该元素的引用：

```
var mainDiv = document.getElementById('allInputs');//Here's where we'll listen for events 
```

然后，我们想要一个附加到该 div 的事件侦听器。由于 IE 中的事件冒泡，以及所有其他浏览器中的事件捕获，在此元素内触发的所有事件都将通过 div。[这里](http://www.quirksmode.org/js/events_order.html)有一些图表可能会阐明我的意思。这是事件委托的关键概念。一旦你得到了这个，剩下的就很容易了。

现在，回到监听事件：`addEventListener`做它在锡上所说的：它附加到一个元素并监听在该元素内触发/调度的事件。如果这些事件中的任何一个属于指定类型，它就会调用一个函数。这个函数就是所谓的回调，或者 - 在这种情况下 - 事件处理程序。与往常一样，IE 并不像所有其他浏览器一样工作，所以首先我们检查该`addEventHandler`方法是否对我们可用。

```
if (!(mainDiv.addEventListener))
{//if not: this is the IE way
    mainDiv.attachEvent('onfocusout',showLength);
}
else
{
    mainDiv.addEventListener('change',showLength,false);
} 
```

在这两种情况下，第一个参数都是一个字符串，说明我们要监听的事件类型，在大多数情况下，从事件类型的名称中`addEventListener`删除。`on`IE，又是固执的不支持`onchange`委托的事件（它不会冒泡），我们通过监听另一个事件来解决这个问题：IE 自己的 onfocusout 事件（如果输入元素失去焦点，它很可能是用于输入，并且有一个新值。这使得检查值长度的正确时机。
`addEventListener`有第三个参数，用于*捕获*事件，在这种情况下这无关紧要，但是在 quirksmode （上面的链接）上，你可以阅读有关此主题的更多信息，我建议您这样做。

```
function showLength(e)
{
    e = e || window.event;
    var target = e.target || e.srcElement;//ie== srcElement, good browsers: target
    if (target.tagName.toLowerCase() === 'input' && target.type === 'text')
    {
        document.getElementById(target.id + 'Span').innerHTML = target.value.length;
    }
} 
```

现在是实际的回调。声明这个函数，就像你声明任何其他函数一样，并指定 1 个参数，在这种情况下`e`，或者`event`- 不管你叫什么。（可能有多个参数，但是我们必须进入闭包，我将尝试在这里坚持基础知识）。
事件对象在大多数浏览器调用时都会传递给处理函数，猜猜哪个浏览器没有传递这个对象？是的，我们的老朋友 IE，但这很容易解决：函数的第一行`e = e || window.event;`可以写成：

```
if (e === undefined)
{
    e = window.event;
} 
```

为什么？因为我们亲爱的朋友 Internet Explorer 不会将事件对象传递给处理程序，而是将其保存在全局对象中，我们可以通过`window.event`.

接下来我们需要确定事件是在哪个元素上触发的。假设您有一个包含 20 个输入字段、10 个单选按钮和 16 个选择元素的表单，我们正在检测 级别的事件`div#allInputs`，我们只知道该事件是在该元素内触发的。幸运的是，事件对象有一个属性，它包含对我们需要的元素的引用：

```
var target = e.target || e.srcElement; 
```

再次，IE 是不同的。如果您已经阅读（并记得）quirksmode 页面上的内容：IE 事件首先在元素级别触发，然后在 DOM 中向上冒泡，而所有 W3C 浏览器都在顶层调度事件并传递它到实际的元素。这解释了本质上相同属性的不同名称：W3C 事件被调度，然后寻找它们的`target`元素，IE 事件在元素处调度，并从它们的源冒泡。——我飘了。

在这个阶段我们知道什么？我们需要知道的一切，真的。我们知道触发了什么事件（`e.type`会告诉我们 - 在这种情况下是更改或聚焦）。我们什么元素已经改变/失去焦点，并且在变量中有对该元素的引用`target`，所以我们可以得到它的值（`target.value`），它的 id（`target.id`），更重要的是：我们可以检查我们是否想做进一步的事情：

```
if (target.tagName.toLowerCase() === 'input' && target.type === 'text') 
```

还记得我谈到过一种情况，即您正在处理一个包含 30 多个元素的表单，而不是所有文本输入？如果在 select 元素中选择了一个新选项，我们不想显示 select 的 value 属性的长度，是吗？所以我们检查是否`target`是一个`input`标签。
这仍然可以是任何可以想象的输入元素，所以我们还要检查它的类型，只有当`target`是文本输入时才会显示长度：

```
document.getElementById(target.id + 'Span').innerHTML = target.value.length;
//or, if you want:
alert(target.value.length); 
```

* * *

与直接绑定事件相比，这有什么优势？同样：如果您将更改事件单独绑定到多个元素，您的用户会*注意到*。作为额外的奖励：选择、文本输入、收音机等的更改事件都可以由 1 个函数处理。只需要一个 switch 语句。代替：

```
if (target.tagName.toLowerCase() === 'input' && target.type === 'text')
{
    document.getElementById(target.id + 'Span').innerHTML = target.value.length;
} 
```

尝试这个：

```
if (target.tagName.toLowerCase() === 'select')
{
    alert('You\'ve selected option number: ' + (target.selectedIndex + 1));
}
if (target.tagName.toLowerCase() !== 'input')
{//suppose I only want to deal with input and select elements
    return;
}
switch(target.type)
{
    case 'text':
        alert(target.value.length);//alerts length of input value
        return;//this event is done, return
    case 'radio':
        alert('The radio button is ' + (target.checked ? '' : 'un') + 'checked');
        return;
    case 'password': 
        if (target.value.length < 8)
        {
            alert('The password is too short, add '+(8 - target.value.length)+'chars');
            return;
        }
        var verifyPass = 'passIn_' + (target.id.match(/_1$/) ? '2' : '1');
        verifyPass = document.getElementById(verifyPass);
        if (verifyPass.value.length > 0 && target.value.length > 0 && verifyPass.value !== target.value)
        {
            alert('password confirmation failed');
        }
}
return; 
```

如您所见，可以在单个函数中处理大量事件，绑定 1 个事件侦听器。如果您直接绑定，则需要绑定大量处理程序，可能需要编写几个函数，这可能更难维护，甚至更糟：使您的网站对用户来说变得迟缓。

* * *

好的，我现在完成了，准备睡觉了。我希望这可以为您解决一些问题。阅读关于 quirksmode 的页面，如果这个运球对您来说不是很清楚，请在谷歌上搜索有关事件委托的教程，但我希望我确实为您提供了对我提供的代码的充分解释，并让您了解事件委托的原因正确的做事方式，以及为什么——在幕后——大多数图书馆也以这种方式工作。
如果您真的对包含您无法理解的代码犹豫不决，您可能会发现知道 jQuery 委托几乎所有事件而不是直接绑定它们很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:03:43.823

您需要一个侦听器来检测添加/删除的字符，并相应地更改计数器。所以你必须要么使用一个关键的监听器，要么使用`onchange`

这是一个示例： [带有内联警报的类似 Twitter 的文本框字符计数](https://stackoverflow.com/questions/7529792/twitter-like-textbox-character-count-with-inline-alert)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:11:41.893

如果你使用 jQuery，有一个插件可以做到这一点。我已经在生产中使用它并且效果很好。

[http://cssglobe.com/post/7161/jquery-plugin-simplest-twitterlike-dynamic-character-count-for-textareas](http://cssglobe.com/post/7161/jquery-plugin-simplest-twitterlike-dynamic-character-count-for-textareas)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:15:37.380

有各种提供此功能和各种配置的 jquery 插件
您可以查看：

[http://youhack.me/2010/04/22/live-character-count-with-progress-bar-using-jquery/](http://youhack.me/2010/04/22/live-character-count-with-progress-bar-using-jquery/)

[http://qwertypants.me/counter/](http://qwertypants.me/counter/)

希望，它会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T18:12:25.650

用jQuery

```
$('input[name='the name of the input']').bind('keyup',function(){
 $('#show').val($(this).length)
}); 
```

# sql - 如何“合并”多个“ActiveRecord::Associations”和一个或多个范围方法？

> ID：11161603
> 
> 赞同：0
> 
> 时间：2012-06-22T17:55:08.943
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在使用 Ruby on Rails 3.2.2 和 MySQL。*我想“合并”多个`ActiveRecord::Associations`和一个或多个范围方法*的结果。也就是说，我有：

```
class User < ActiveRecord::Base
  has_many :a_user_relationships, :foreign_key => 'a_key'
  has_many :b_user_relationships, :foreign_key => 'b_key'

  has_many :a_articles, :through => :a_user_article_associations # Returns objects kind of 'Article'
  has_many :b_articles, :through => :b_user_article_associations # Returns objects kind of 'Article'
end

class Article < ActiveRecord::Base
  # Note: This is a scope method.
  def self.public
    where(:status => 'public')
  end
end 
```

鉴于上面的代码，我想运行一些方法（如下所示），以便通过执行尽可能少的数据库查询来检索所有*公共“a”和“b”用户文章：*

```
@user.all_articles

class User < ActiveRecord::Base
  # Note: Code in the following method is incorrect, but maybe it helps
  # understanding what I mean.
  def all_articles
    self.(a_articles & b_articles).public
    (self.a_articles.public & self.b_articles.public)
  end
end 
```

**可能吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:37:39.537

由于您有两个独立的关联，因此您至少需要两个查询。

如果您总是想要来自这两个地方的文章，除了这两个独立的关联之外，还有什么阻止您拥有一个简单的“文章”关联？这样，您可以使用`self.articles.public`.

# jquery - IE8 中的 jquery 错误：“对象”不支持此属性或方法

> ID：11161607
> 
> 赞同：2
> 
> 时间：2012-06-22T17:55:15.860
> 
> 标签：jquery, internet-explorer-8

我做了类似的事情：[http](http://tympanus.net/codrops/2012/01/04/thumbnail-proximity-effect/) : //tympanus.net/codrops/2012/01/04/thumbnail-proximity-effect/ 就像原来它在FF，Safarei中工作一样......但我在IE 8 /中遇到错误7（不确定 9）。

由于我对 JD 和 jQuery 非常陌生，尤其是我不知道为什么会发生这种情况。任何人都可以帮忙吗？

调试器将其跟踪到这个块：

```
_getScaleVal= function() {              
                        var st = window.getComputedStyle($jelems.get(0), null),
                            tr = st.getPropertyValue("-webkit-transform") || 
                                st.getPropertyValue("-moz-transform") || 
                                st.getPropertyValue("-ms-transform") || 
                                st.getPropertyValue("-o-transform") || 
                                st.getPropertyValue("transform") || 
                                "fail...";

                        if( tr !== 'none' ) {    

                            var values = tr.split('(')[1].split(')')[0].split(','),
                                a = values[0],
                                b = values[1],
                                c = values[2],
                                d = values[3];

                            return Math.sqrt( a * a + b * b );

                             }

                    }, 
```

调试器抱怨这些问题：

第 2 行字符 8：对象不支持此属性或方法

第 3 行字符 9：“未定义”为空或不是对象

第 18 行字符 9：“未定义”为空或不是对象

第 19 行字符 10：'0' 为空或不是对象

第 20 行字符 10：“1”为空或不是对象

第 21 行字符 10：'2' 为空或不是对象

第 22 行字符 10：'3' 为空或不是对象

非常感谢您的输入！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T17:58:01.920

[getComputedStyle](https://developer.mozilla.org/en/DOM/window.getComputedStyle)在版本 9 之前的 IE 上不可用。

互联网上有修复，比如[这个](http://snipplr.com/view/13523/)（未经我测试）。

# python - 我可以从字符串中删除所有字母并只保留数字吗？

> ID：11161608
> 
> 赞同：0
> 
> 时间：2012-06-22T17:55:16.057
> 
> 标签：python, string

我正在使用python 2.6，我想使用“gpmtisfile.txt.part.4”并只返回数字4。（通常我会关闭并保存最终值，但它的长度和排列可能会改变未来，我宁愿安全，只从字符串本身按顺序获取数字）。

2009 年有一个与我类似的问题，但答案相互矛盾。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:57:39.527

以下是您的问题答案所说的：删除除数字之外的所有内容。那是你需要的吗？

```
In [1]: s = 'gpmetisfile.txt.part.4'

In [2]: import re

In [3]: re.sub('\D', '', s)
Out[3]: '4' 
```

我问的原因是，例如，`'gpmetisfile.txt.06_2012.part.4'`将成为`'0620124'`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T19:23:15.977

```
>>> s = 'as!das42!fsd'
>>> ''.join(filter(str.isdigit, s))
'42' 
```

# c - 使用 strcpy 时打印垃圾

> ID：11161609
> 
> 赞同：2
> 
> 时间：2012-06-22T17:55:22.450
> 
> 标签：c, parsing, text, malloc, strncpy

我有一个函数可以解析一些传入的数据。我的问题是，在使用 strncpy 之后，当我尝试打印它时会得到一些垃圾。我尝试使用 malloc 使 char 数组具有确切的大小。

代码：

```
void parse_data(char *unparsed_data)
{
char *temp_str;
char *pos;
char *pos2;
char *key;
char *data;
const char newline = '\n';

int timestamp = 0;

temp_str = (char*)malloc(strlen(unparsed_data));

g_print("\nThe original string is: \n%s\n",unparsed_data);

//Ignore the first two lines
pos = strchr(unparsed_data, newline);
strcpy(temp_str, pos+1);
pos = strchr(temp_str, newline);
strcpy(temp_str, pos+1);

//Split the line in two; The key name and the value
pos = strchr(temp_str, ':'); // ':' divides the name from the value
pos2 = strchr(temp_str, '\n'); //end of the line
key = (char*)malloc((size_t)(pos-temp_str)-1); //allocate enough memory
data = (char*)malloc((size_t)(pos2-pos)-1);

strncpy(key, temp_str, (size_t)(pos-temp_str));
strncpy(data, pos + 2, (size_t)(pos2-pos));

timestamp = atoi(data);

g_print("size of the variable \"key\" = %d or %d\n", (size_t)(pos-temp_str), strlen(key));
g_print("size of the variable \"data\" = %d or %d\n", (size_t)(pos2-pos), strlen(data));

g_print("The key name is %s\n",key);
g_print("The value is %s\n",data);
g_print("End of Parser\n");
  } 
```

输出：

```
The original string is: 
NEW_DATAa_PACKET
Local Data Set 16-byte Universal Key
Time Stamp (microsec): 1319639501097446
Frame Number: 0
Version: 3
Angle (deg): 10.228428

size of the variable "key" = 21 or 22
size of the variable "data" = 18 or 21
The key name is Time Stamp (microsec)
The value is 1319639501097446
F32
End of Parser 
```

再次运行它：

```
 The original string is: 
  NEW_DATAa_PACKET
  Local Data Set 16-byte Universal Key
  Time Stamp (microsec): 1319639501097446
  Frame Number: 0
  Version: 3
  Angle (deg): 10.228428

  size of the variable "key" = 21 or 25
  size of the variable "data" = 18 or 18
  The key name is Time Stamp (microsec)ipe 
  The value is 1319639501097446
  F
  End of Parser 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T17:57:52.337

您的结果是因为`strncpy`没有在字符串末尾放置空字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:01:21.693

您需要 malloc() +1 字节的字符串，因此当您执行 strcpy() 时它可以附加零，但 strncpy 也不会附加零，因为您需要一个额外的字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T18:06:25.733

您`strncpy(data, pos + 2, (size_t)(pos2-pos));`没有`\0`在字符串末尾添加终止字符。因此，当您稍后尝试打印它时，`printf()`打印您的整个数据字符串以及紧随其后的内存中的任何内容，直到它达到零 - 这就是您得到的垃圾。您需要在数据末尾显式附加零。也需要它`atoi()`。

**编辑：** 您需要为您的 再分配一个字节`data`，并在那里写一个终止字符。`data[len_of_data] = '\0'`. 只有在那之后，它才成为一个有效的 C 字符串，并且您可以将它用于`atoi()`and `printf()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T17:59:42.413

一个问题：如果没有换行符怎么办？

未定义的行为：

```
pos = strchr(temp_str, newline);
strcpy(temp_str, pos+1); 
```

的来源和目的地`strcpy`不得重叠。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T16:48:50.260

您必须记住在为字符串分配空间时为终止 '\0' 字符添加一个字节。您必须小心使用`strncpy`，尤其是如果您习惯使用`strcpy`、`strcat`或`sprintf`。这三个函数以 '\0' 结束字符串。`strncpy`复制您指定的多个字节，并且不假设终止字符串。

您通过确保在复制到的字符缓冲区的末尾放置一个“\0”来承担该责任。这意味着您必须知道副本的起始位置和长度，并在起始位置和长度之和之后放置一个 '\0' 字节。

我选择稍微不同地解决示例问题，但它仍然涉及知道我复制的内容的长度。

在这种情况下，我使用`strncpy`了前 9 个字符`pcszTestStr1`并将它们复制到 szTestBuf。然后，我使用 strcpy（以零结尾的字符串）来附加句子的新部分。

```
#include <stdio.h>
#include <string.h>

int n;
int argv_2;

char szTestBuf[100] = {0};
char * pcszTestStr1 = 
"This is a very long, long string to be used in a C example, OK?";

int main(int argc, char *argv[])
{
    int rc = 0;

    printf("The following sentence is too long.\n%s\n", pcszTestStr1);
    strncpy(szTestBuf, pcszTestStr1, 9);
    strcpy(szTestBuf + 9, " much shorter sentence.");
    printf("%s\n", szTestBuf); 

    return rc;
} 
```

这是运行 test.c 的输出`gcc -o test test.c`。

```
cnorton@hiawatha:~/scratch$ ./test
The following sentence is too long.
This is a very long, long string to be used in a C example, OK?
This is a much shorter sentence.
cnorton@hiawatha:~/scratch$ 
```

# indexing - Map/Transform 中的 Distinct()

> ID：11161611
> 
> 赞同：0
> 
> 时间：2012-06-22T17:55:33.393
> 
> 标签：indexing, mapreduce, distinct, ravendb

我正在创建以下索引以获取特定用户的所有权限。在转换中，`roles.SelectMany(x => x.Permissions)`可能包含重复项，所以我想放上`.Distinct()`它。但是，当我这样做时，它似乎被翻译到`Enumerable.Distinct(roles.SelectMany(x => x.Permissions)`了 Raven 内部，它没有返回任何结果。如果我直接在 Raven 中将索引更改为 use`.Distinct()`而不是`Enumerable.Distinct(...)`，它可以完美运行。

如何编写才能在 Raven 中正确翻译？

```
public class PermissionsByUser : AbstractIndexCreationTask<User, UserWithPermissions>
{
    public override string IndexName
    {
        get
        {
            return "Users/PermissionsByUser";
        }
    }
    public PermissionsByUser()
    {
        Map = users => from user in users
                       from role in user.Roles
                       select new {role.Id};

        TransformResults = (database, users) => from user in users
                                                let roles = database.Load<Role>(user.Roles.Select(x => x.Id))
                                                select new
                                                        {
                                                            Id = user.Id,
                                                            Username = user.Username,
                                                            Password = user.Password,
                                                            Roles = user.Roles,
                                                            Permissions = roles.SelectMany(x => x.Permissions)//.Distinct()
                                                        };
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:59:45.200

我认为，这实际上只是一个陈旧结果的问题。[在https://groups.google.com/forum/?fromgroups#!topic/ravendb/0hO8TOQicwc](https://groups.google.com/forum/?fromgroups#!topic/ravendb/0hO8TOQicwc)回答

# python - 在 mac 上编写 python 以在 Windows 上使用

> ID：11161613
> 
> 赞同：2
> 
> 时间：2012-06-22T17:55:47.453
> 
> 标签：python, windows, macos, ironpython

我从一些来源看到，虽然你可以使用 py2exe 或 py2app 制作一个 exe 或 mac 等效应用程序，但你只能制作你的系统。当我想到它时，这是有道理的。

但我的问题是有时我想编写 python 脚本并将它们发送给使用 Windows 的朋友进行测试和玩。但是 Windows 没有安装 python，我不想让他们必须安装 Python。

有什么方法可以使用 MAC 创建一个 python 制作的文件，无需 python 或任何安装在 WINDOWS 上即可打开？

如果没有，我想我可以尝试在我的系统上使用模拟的 Windows 来使其成为一个 exe，但我不想每次我需要更改某些东西时都启动它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T17:57:54.003

您无法在 Mac 上制作原生 py2exe 样式的可执行文件。使用 Virtualbox 在您的 Mac 环境中运行 Windows。无需重新启动整个机器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T19:45:49.663

根据您愿意在您的机器上安装多少依赖项（您的 Windows 朋友不应该进行任何安装），另一种选择是使用 IronPython。它不会编译*所有*python 代码，但它适用于它的一个非常大的子集。

生成的 .exe 文件可以使用 Mono 运行时在您的 Mac 上运行，也可以使用很可能已经安装的 .NET 运行时在您朋友的 Windows 系统上运行。

这是您需要做的：

1.  安装[Mono](http://www.go-mono.com/mono-downloads/download.html)运行时。
2.  安装[IronPython 2.7.2 或更高版本](http://ironpython.codeplex.com/releases/)。
3.  跑`mono ipy.exe pyc.py /main:your_program.py /target:exe /embed`
4.  这将生成一个可以在 Windows、Mac 和 Linux 上运行的 .exe 文件。在你的 Mac 上，你会做`mono your_program.exe`. 在 Windows 上，如果您的朋友安装了 .NET 4.0，他们只需双击 .exe 文件（他们很有可能这样做）。

# c# - C# 中 PrintForm 控件的问题

> ID：11161620
> 
> 赞同：0
> 
> 时间：2012-06-22T17:56:06.517
> 
> 标签：c#, printing, visual-c#-express-2010

我用过这个：

```
Margins margins = new Margins(5, 5, 5, 5); 
        printForm1.PrinterSettings.DefaultPageSettings.Margins = margins;
        printForm1.Print(); 
```

但是由于某种原因打印的表格向左对齐，所以我对其进行了编辑并使用了以下代码：

```
Margins margins = new Margins(10, 5, 10, 5); 
        printForm1.PrinterSettings.DefaultPageSettings.Margins = margins;
        printForm1.Print(); 
```

出于某种原因，这对将表格移到纸上或使其居中没有任何作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:15:01.610

PrintForm 类是用于打印表单内容的简单 Microsoft.VisualBasic.PowerPacks 功能，我认为它不会允许您更改 Margin 或其他打印选项。如果您想自定义打印，您最好使用 BitBlt win32 功能，就像这里建议的那样：http: [//msdn.microsoft.com/en-us/library/aa287529%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa287529%28v=vs.71%29.aspx)，或者如果您需要打印一些特定元素，而不是整个表单，您可以使用休闲文章[http://www.c-sharpcorner.com/uploadfile/mgold/howtoprintingformcontrolsincsharpand.net11212005063649am/howtoprintingformcontrolsincsharpand.net.aspx中提供的代码](http://www.c-sharpcorner.com/uploadfile/mgold/howtoprintingformcontrolsincsharpand.net11212005063649am/howtoprintingformcontrolsincsharpand.net.aspx)

# css - 否决溢出：隐藏

> ID：11161622
> 
> 赞同：0
> 
> 时间：2012-06-22T17:56:23.407
> 
> 标签：css, position, overflow

这与[保持溢出相反：隐藏真的隐藏](https://stackoverflow.com/questions/10464803/keeping-overflowhidden-really-hidden)，因为我需要一个子元素变得可见，尽管它在父元素之外。

这是一个幻灯片：父 div（例如 500x250px）有宽度、高度、位置：相对（需要这个）和左边：15px、溢出：隐藏有一些包含图像（+文本）的子 div 和一个上一个/下一个分区。上一个/下一个 div 分别离开了。对 -15 像素。在屏幕上看起来很酷......

但由于溢出：从父级隐藏（加上位置：相对），prev/next-div 的一半不可见 [http://imageshack.us/photo/my-images/857/lookactually.png/](http://imageshack.us/photo/my-images/857/lookactually.png/) [http： //imageshack.us/photo/my-images/33/shouldlook.png/](http://imageshack.us/photo/my-images/33/shouldlook.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:04:56.770

溢出的子元素：隐藏元素在其父框之外永远不可见（这些是规则）

为了解决这个问题，您可以将导航放在溢出：隐藏元素之外，或者您可以增加父 div 的高度以适应导航。

# jquery - 将样式添加到附加项目

> ID：11161625
> 
> 赞同：0
> 
> 时间：2012-06-22T17:56:26.767
> 
> 标签：jquery, jquery-plugins

我不知道如何表达这个问题，所以我想这也是我找不到答案的原因..

我正在附加我在 jQuery 中创建的元素。我想为这些元素添加样式，但我的猜测是这些元素还不存在，所以它不起作用。附加这些样式的好方法是什么？我读了一些关于 documentFragments 的东西，但我不明白它们是如何工作的..

（我第一次尝试 jquery 插件:)

```
(function($) {
    $.fn.flPushbox = function(options) {
    settings = $.extend({
        pager: 'true'
    }, options);

    return this.each(function() {
        // set local variables  
        var $pushbox = $(this),
        $slides = $(this).children(),
        $viewport = $('<div class="fl-viewport" />'),
        init,
        initPager;

        //wrap ul with viewport
        init = function (){
            $pushbox.wrap($viewport);

            if (settings.pager) initPager();
        }

        initPager = function() {
            var $pager = $('<ul class="fl-pager" />');

            for (i=0; i<$slides.length; i++) {
                var $pagerSlide = $('<li>'+ i +'</li>');
                $pagerSlide.appendTo($pager);
            }

            $pager.insertAfter($pushbox);
        }

        initStyling = function() {
            var pushboxWidth = 0;

            $slides.each(function(index, slide) {                   
                pushboxWidth += parseInt($(slide).outerWidth());
            });

            $viewport.css({
                'position'  : 'relative',
                'overflow'  : 'hidden'
            });

            $slides.css({
                'float' : 'left'

            });

            $pushbox.css({
                'position'  : 'absolute',
                'top'       : 0,
                'left'      : 0,
                'width'     : pushboxWidth
            });
        }

        init();
        initStyling();
    });
}
})(jQuery); 
```

# python - Tornado 服务器抛出错误 Stream is closed

> ID：11161626
> 
> 赞同：4
> 
> 时间：2012-06-22T17:56:27.720
> 
> 标签：python, asynchronous, websocket, comet, tornado

我正在尝试实现一个非常基本的聊天/回声网页。

当客户端访问 /notify:8000 加载一个简单的站点时，在客户端发起请求以建立侦听器，在后端更新云计数并将其发送到所有现有客户端。

每当用户在文本框中输入内容时，都会向后端发送一个 POST，并且所有其他客户端都会收到包含该文本的更新。

这是前端模板

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
</head>
<body>
    <p>session: <span id="session">{{ session }}</span><br/>
    client count: <span id="clientCount">{{ clientCount }}</span><br/>
    <span id="welcome">...registering with notify...</span></p>

    <div style="width: 600px; height: 100px; border: 1px solid black; overflow:auto; padding: 4px;" id="chatText">

    </div>

    <div>
    <span>enter text below:</span><br />
    <input type="text" id="textInput"></textarea>
    <div>

<script>

$(document).ready(function() {
    document.session = $('#session').html();
    setTimeout(initializeListener, 100);

    $('#textInput').keypress(function(e) {
    //    e.preventDefault(); 
        if(e.keyCode == 13 && !e.shiftKey) {
            var text = $('#textInput').val();
            submitChatText(text);
            return false;
        }
    });
});

var logon = '1';

function initializeListener() {
    console.log('initializeListener() called');
    jQuery.getJSON('//localhost/notify/listen', {logon: logon, session: document.session},
        function(data, status, xhr) {
            console.log('initializeListener() returned');
            if ('clientCount' in data) {
                $('#clientCount').html(data['clientCount']);
            }
            if ('chatText' in data) {
                text = $('#chatText').html()
                $('#chatText').html(data['chatText'] + "<br />\n" + text);
            }
            if (logon == '1') {
                $('#welcome').html('registered listener with notify!');
                logon = '0';
            }
            setTimeout(initializeListener, 0);
        })
        .error(function(XMLHttpRequest, textStatus, errorThrown) {
            console.log('error: '+textStatus+' ('+errorThrown+')');
            setTimeout(initializeListener, 100);
        });
}

function submitChatText(text) {
    console.log('submitChatText called with text: '+text)
    jQuery.ajax({
        url: '//localhost/notify/send',
        type: 'POST',
        data: {
            session: document.session,
            text: ''+text
        },
        dataType: 'json',
        //beforeSend: function(xhr, settings) {
        //    $(event.target).attr('disabled', 'disabled');
        //},
        success: function(data, status, xhr) {
            console.log('sent text message')
            $("#textInput").val('');
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            console.log('error: '+textStatus+' ('+errorThrown+')');
        }
    });

}

</script>
</body>
</html> 
```

这是服务器代码：

```
import tornado.ioloop
import tornado.web
import tornado.options
from uuid import uuid4
import json

class Client(object):
    callbacks = {}
    chat_text = ''

    def register(self, callback, session, logon=False):
        self.callbacks[session] = callback
        if logon == '1':
            self.notifyCallbacks()

    def notifyCallbacks(self):
        result = {}
        result['clientCount'] = self.getClientCount()
        if self.chat_text:
            result['chatText'] = self.chat_text

        for session, callback in self.callbacks.iteritems():
            callback(result)

        self.callbacks = {}

    def sendText(self, session, text):
        self.chat_text = text
        self.notifyCallbacks()
        self.chat_text = ''

    def getClientCount(self):
        return len(self.callbacks)

class Application(tornado.web.Application):
    def __init__(self):
        self.client = Client()
        handlers = [
            (r"/notify", MainHandler),
            (r"/notify/listen", ListenHandler),
            (r"/notify/send", SendHandler)
        ]
        settings = dict(
            cookie_secret="43oETzKXQAGaYdkL5gEmGeJJFuYh7EQnp2XdTP1o/Vo=",
            template_path="templates/notify",
        )
        tornado.web.Application.__init__(self, handlers, **settings)

class ListenHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        logon = self.get_argument('logon')
        session = self.get_argument('session')
        self.application.client.register(self.on_message, session, logon)

    def on_message(self, result):
        json_result = json.dumps(result)
        self.write(json_result)
        self.finish()

class SendHandler(tornado.web.RequestHandler):
    def post(self):
        text = self.get_argument('text')
        session = self.get_argument('session')
        self.application.client.sendText(session, text)

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        session = uuid4()
        client_count= self.application.client.getClientCount()
        self.render("testpage.html", session=session, clientCount=client_count)

if __name__ == '__main__':
    application = Application()
    application.listen(8000)
    tornado.ioloop.IOLoop.instance().start() 
```

然后，当我关闭一个选项卡并尝试从另一个选项卡广播时，有时服务器会抛出错误。错误是这样的：

```
 ERROR:root:Uncaught exception POST /notify/send (127.0.0.1)
HTTPRequest(protocol='http', host='localhost', method='POST', uri='/notify/send', version='HTTP/1.1', remote_ip='127.0.0.1', body='session=e5608630-e2c7-4e1a-baa7-0d74bc0ec9fc&text=swff', headers={'Origin': 'http://localhost', 'Content-Length': '54', 'Accept-Language': 'en-US,en;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'X-Forwarded-For': '127.0.0.1', 'Accept': 'application/json, text/javascript, */*; q=0.01', 'User-Agent': 'Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'Host': 'localhost', 'X-Requested-With': 'XMLHttpRequest', 'X-Real-Ip': '127.0.0.1', 'Referer': 'http://localhost/notify', 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'})
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/tornado/web.py", line 1021, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "test.py", line 66, in post
    self.application.client.sendText(session, text)
  File "test.py", line 30, in sendText
    self.notifyCallbacks()
  File "test.py", line 24, in notifyCallbacks
    callback(result)
  File "test.py", line 60, in on_message
    self.finish()
  File "/usr/lib/python2.7/site-packages/tornado/web.py", line 701, in finish
    self.request.finish()
  File "/usr/lib/python2.7/site-packages/tornado/httpserver.py", line 433, in finish
    self.connection.finish()
  File "/usr/lib/python2.7/site-packages/tornado/httpserver.py", line 187, in finish
    self._finish_request()
  File "/usr/lib/python2.7/site-packages/tornado/httpserver.py", line 223, in _finish_request
    self.stream.read_until(b("\r\n\r\n"), self._header_callback)
  File "/usr/lib/python2.7/site-packages/tornado/iostream.py", line 153, in read_until
    self._try_inline_read()
  File "/usr/lib/python2.7/site-packages/tornado/iostream.py", line 381, in _try_inline_read
    self._check_closed()
  File "/usr/lib/python2.7/site-packages/tornado/iostream.py", line 564, in _check_closed
    raise IOError("Stream is closed")
IOError: Stream is closed 
```

显然这是因为选项卡已关闭，所以客户端不再监听，但这应该是正常的事情，我怎样才能更优雅地处理这种情况？

关于这个错误，我唯一能找到的是另一个 stackoverflow 帖子，建议是在调用 finish() 方法之前检查连接是否完成：

```
if not self._finished:
    self.finish() 
```

但是，当我尝试这样做时，它似乎没有帮助我仍然遇到相同的错误，或者我会收到另一个错误**AssertionError: Request closed**，我找不到任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:32:11.460

查看一些旧代码，我发现我在异步代码中遇到了类似的问题，在我回复之前客户端就离开了。我使用[on_connection_close](http://www.tornadoweb.org/documentation/web.html#tornado.web.RequestHandler.on_connection_close)如下处理它（以您的代码为例）。

```
def on_message(self, result):
    json_result = json.dumps(result)
    if not self.connection_closed:
        try:
            self.write(json_result)
            self.finish()
        except:
            # Catch all, as the client could go away while we're replying.
            self.connection_closed = True

def on_connection_close(self):
    # The client has given up and gone home.
    self.connection_closed = True 
```

# java - Webclient 中的 ClassCastException

> ID：11161627
> 
> 赞同：4
> 
> 时间：2012-06-22T17:56:30.870
> 
> 标签：java, webclient

我正在使用 Web 客户端获取页面源。我第一次获得页面源。在我使用相同的对象获取不同 URL 的页面源之后，它显示了一个异常，例如：

```
java.lang.ClassCastException: com.gargoylesoftware.htmlunit.UnexpectedPage cannot be cast to com.gargoylesoftware.htmlunit.html.HtmlPage 
```

这是我正在使用的代码。

```
HtmlPage firstPage = webClient.getPage("firsturl");
HtmlPage downloadPage = null;
        try {
            webClient.setJavaScriptEnabled(true);

            downloadPage = (HtmlPage) webClient.getPage("secondurl");
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:24:01.063

它说得很清楚，你的代码正在做：

```
downloadPage = (HtmlPage) webClient.getPage("secondurl"); 
```

所以你假设你得到了一个类型的对象`HtmlPage`，但你实际上得到了一个类型的对象 `UnexpectedPage`。

您应该添加对 instanceof 的检查：

```
If (webClient.getPage("secondurl") instanceof HtmlPage){
downloadPage = (HtmlPage) webClient.getPage("secondurl");
}
else{
//do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:29:03.737

我假设（不再非常了解库） UnexpectedPage 是 HtmlPage 的子类型（如果不是 - 这就是你的问题的原因）。

在这种情况下，您可能在类路径上有两次这些类。虽然 HtmlPage 类的“名称”看起来像合法的超类，但类加载器可以访问两个同名的类并首先加载“另一个”类。

检查（仔细检查）在您的类路径中出现两次的 HtmlUnit 类。

# javascript - 为什么需要 CDATA 而不是在所有地方都以相同的方式工作？

> ID：11161628
> 
> 赞同：0
> 
> 时间：2012-06-22T17:56:40.607
> 
> 标签：javascript, xml, cross-browser, greasemonkey, e4x

在 Firefox 和 Chrome 的控制台中，这有效（警报脚本内容）：

```
var script = document.createElement("script");
script.textContent = (
    function test() {
        var a = 1;
    }
);
document.getElementsByTagName("head")[0].appendChild(script);
alert(document.getElementsByTagName("head")[0].lastChild.textContent); 
```

将此代码用作 Firefox 的 Greasemonkey 脚本也可以。

现在，如果想在 Firefox/Chrome 控制台和 Greasemonkey 脚本中添加“私有方法” `do()`，`test()`它不再起作用：

```
var script = document.createElement("script");
script.textContent = (
    function test() {
        var a = 1;
        var do = function () {
            var b = 2;
        };
    }
);
document.getElementsByTagName("head")[0].appendChild(script);
alert(document.getElementsByTagName("head")[0].lastChild.textContent); 
```

为了在 Greasemonkey 脚本中完成这项工作，我必须将所有代码放在一个`CDATA` ~~标签~~块中：

```
var script = document.createElement("script");
script.textContent = (<![CDATA[
    function test() {
        var a = 1;
        var do = function() {
            var b = 2;
        };
    }
]]>);
document.getElementsByTagName("head")[0].appendChild(script);
alert(document.getElementsByTagName("head")[0].lastChild.textContent); 
```

这仅适用于 Greasemonkey 脚本；它从 Firefox/Chrome 控制台引发错误。我不明白为什么我应该使用`CDATA`标签，因为我没有使用 XHTML，所以这里没有要遵守的 XML 规则。

为了使它在 Firefox 控制台（或 Firebug）中工作，我需要`CDATA`放入标签，如`<>`and `</>`：

```
var script = document.createElement("script");
script.textContent = (<><![CDATA[
    function test() {
        var a = 1;
        var do = function() {
            var b = 2;
        };
    }
]]></>);
document.getElementsByTagName("head")[0].appendChild(script);
alert(document.getElementsByTagName("head")[0].lastChild.textContent); 
```

这在 Chrome 控制台中不起作用。我试过`.toString()`像很多人一样在末尾添加（`]]></>).toString();`），但它没用。

我试图用标签名称替换`<>`和，但这也不起作用。`</>``<foo>` `</foo>`

`var do = function(){}`如果我在另一个函数中定义，为什么我的第一个代码片段不起作用？

`CDATA`即使我不使用 XHTML，为什么还要使用它作为解决方法？

如果它在没有 Greasemonkey 脚本的情况下工作，我为什么要`<>` `</>`为 Firefox 控制台添加？

最后，Chrome和其他浏览器的解决方案是什么？

**编辑：**

我的错，我从来没有在 JS 中使用过 do-while 并且我在一个简单的文本编辑器中创建了这个示例，所以我没有看到“do”是保留关键字：p

但是问题仍然存在，我没有在我的示例中初始化 Javascript 类。有了这个新示例，`CDATA`Greasemonkey 需要`CDATA`，E4X`<>` `</>`和 Chrome 之间的 Firefox 需要失败：

```
var script = document.createElement("script");
script.textContent = (
<><![CDATA[var aClass = new AClass();
function AClass() {
    var a = 1;
    var aPrivateMethod = function() {
        var b = 2;
        alert(b);
    };
    this.aPublicMethod = function() {
        var c = 3;
        alert(c);
    };
}
aClass.aPublicMethod();]]></>
);
document.getElementsByTagName("head")[0].appendChild(script); 
```

问：为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T05:37:53.743

这里有多个错误/问题：

1.  添加私有方法`do()`不起作用，因为[`do`是保留字](https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words)！
    此代码在 FF 和 Chrome（以及 GM 脚本）中都可以正常工作：

    ```
    var functionVar = (
        function test() {
            var a = 1;
            var properlyNamedVariable = function() {
                var b = 2;
            };
        }
    );
    console.log (functionVar.toString() ); 
    ```

    如果你使用描述性的变量名，你不仅会在将来为自己省去很多麻烦，而且你几乎不会不小心使用保留字。

2.  回复：`"To make this work in a Greasemonkey script, I have to put all code in a CDATA tag"`。

    不，**该代码*不起作用*。** 发生的事情是错误发生在`eval`Greasemonkey 沙箱中的 'd 范围内，并且没有报告给 Firefox 的错误控制台。也就是说，它默默地失败了。
    如果您尝试`test();`从控制台执行，则会收到错误消息：`ReferenceError: test is not defined`. 然而，如果您删除`var do = function ...`代码并重新加载页面，那么您可以`test()`从控制台调用。

3.  同样，`script.textContent = (<><![CDATA[ ...`代码也**不起作用**。它也默默地失败并且`test()`没有被定义。这是一种与前面的示例略有不同的静默故障。

4.  依赖该`(<><![CDATA[ ...`技巧的代码在 Chrome 中不起作用，因为 Chrome 不支持在 javascript 中对 XML 进行内联处理。[这是支持 E4X](https://developer.mozilla.org/En/E4X/Processing_XML_with_E4X)的 Firefox 的一项额外功能，而 Chrome 不支持。

5.  请[格式化您的代码](http://jsbeautifier.org/)，这样阅读起来就不会那么麻烦了。

* * *

所以，**总结一下：**

1.  对变量、函数等使用描述性名称。
2.  请注意您使用的语言中的保留字。
3.  谨防无声的失败。不幸的是，这些发生在各种 Greasemonkey 场景中。
4.  不同的浏览器支持不同的功能。

这是一种适用于 Firefox、Chrome、其他几种浏览器以及 Greasemonkey、Tampermonkey、Scriptish 等的技术。它还有助于调试和测试，因为代码与内联变量声明是分开的：

1.  定义您的函数或正常代码：

    ```
    function testMyAdhocCode () {
        "use strict";    
        var importInteger   = 1;
        var imA_PrivateFunction = function () {
            var someOtherInteger = 2;

            console.log (
                "importInteger = ", importInteger,
                "  ||  someOtherInteger = ", someOtherInteger
            );
        };

        console.log ("Greetings from testMyAdhocCode()!");
        imA_PrivateFunction ();
    } 
    ```

2.  然后像这样将它注入到页面中（如果必须的话。最好不要注入代码，如果你能提供帮助的话。）：

    ```
    addJS_Node (testMyAdhocCode);   //-- Function is just created.

    // OR
    addJS_Node (null, null, testMyAdhocCode); //-- Function is created and immediately run.

    // OR
    addJS_Node ("var someVar = 86;") //-- Adhoc code

    // OR
    addJS_Node ("preExistingFunction (42); ") //-- Run a preexisting function. 
    ```

3.  `addJS_Node()`您的脚本中包含的位置为：

    ```
    function addJS_Node (text, s_URL, funcToRun, runOnLoad) {
        var D                                   = document;
        var scriptNode                          = D.createElement ('script');
        if (runOnLoad) {
            //--- Doesn't always fire on Chrome. Needs @run-at document-start.
            scriptNode.addEventListener ("load", runOnLoad, false);
        }
        scriptNode.type                         = "text/javascript";
        if (text)       scriptNode.textContent  = text;
        if (s_URL)      scriptNode.src          = s_URL;
        if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

        var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
        targ.appendChild (scriptNode);
    } 
    ```

* * *

* * *

## 更新附加问题：

新问题更是如此。

*   这是不正确的代码，因此它会在 Firefox 控制台中引发错误。
*   它使用 E4X 功能，因此无法在 Chrome 中运行。
*   它*应该*在 Greasemonkey 中引发与在 Firefox 中相同的错误（它们名义上是相同的 JS 引擎），但由于 GM 沙箱脚本的方式纯属愚蠢，您可以摆脱该***错误代码***（目前）。
*   不要这样编码！使用类似的函数`addJS_Node()`。

如果你真的*必须*注入代码，正确的方法是这样的：

```
function main () {
    "use strict";   // Keep this line!
    var aClass = new aClass();

    function aClass() {
        var a = 1;
        var aPrivateMethod = function() {
            var b = 2;
            alert(b);
        };
        this.aPublicMethod = function() {
            var c = 3;
            alert(c);
        };
    }

    aClass.aPublicMethod();

    //-- PUT ALL OF THE REST OF YOUR INJECTED CODE HERE.
}

addJS_Node (null, null, main); 
```

* * *

将所有内容都放在目标页面的*全局*范围内是个坏主意！但是，如果你坚持这样做，代码是这样的：

```
function aClass() {
    "use strict";   // Keep this line!
    var a = 1;
    var aPrivateMethod = function() {
        var b = 2;
        alert(b);
    };
    this.aPublicMethod = function() {
        var c = 3;
        alert(c);
    };
}

addJS_Node (aClass);
addJS_Node (
      'var aClass = new aClass();'
    + 'aClass.aPublicMethod();'
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:00:51.790

@BrockAdams 的所有权利[为什么需要 CDATA 而不是在所有地方都以相同的方式工作？](https://stackoverflow.com/questions/11161628/why-is-cdata-needed-and-not-working-everywhere-the-same-way/11167187#11167187)对于将所有内容写入函数并将内容插入脚本标签的想法，谢谢。

感谢@polygenelubricants [javascript get function body](https://stackoverflow.com/questions/3179861/javascript-get-function-body/3180012#3180012)仅用于获取 main() 函数内容，而不是包含其内容的函数。

```
var script = document.createElement("script");
function main()
{
var aClass = new AClass();
function AClass()
{
    var a = 1;
    var aPrivateMethod = function() {
        var b = 2;
        alert(b);
    };
    this.aPublicMethod = function() {
        var c = 3;
        alert(c);
    };
}
aClass.aPublicMethod();
}
var entire = main.toString();
var body = entire.substring(entire.indexOf("{") + 2, entire.lastIndexOf("}"));
script.textContent = body;
document.getElementsByTagName("head")[0].appendChild(script); 
```

`entire.indexOf("{")`不选择“{”字符并且在脚本标记内容的开头没有空白新行需要“+2” 。

Javascript类函数不应该和我们保存类实例的变量同名，在Firefox`aClass.aPublicMethod();`中只会在你第一次执行代码时自动调用（你不能覆盖类函数），Chrome不关心符号，它的工作原理。

因此，我为类名选择了 AClass，为类对象选择了 aClass。

奇怪的是，当我们使用 .toString() 方法时，Firefox 似乎正在以他喜欢的方式解析/显示函数，例如当插入脚本时，它在 Firefox Inspector 中的内容将仅显示在一行中。即使我们在插入 main() 函数时删除了空格，Firebug 也会在每个新行之前使用“制表符”空格格式化代码（因为 Firebug 知道在子字符串之前有 main() 函数，所以它添加了自动空格）。Firebug 在 AClass() 函数前后也增加了一个新行；当函数返回值保存在变量中时，如 aPrivateMethod 或 aPublicMethod，它显示在 1 行。Firebug 的另一个奇怪变化是`var aClass = new AClass();`变成`var aClass = new AClass;`.

```
function AClass()
{
    // code
} 
```

变成

```
function AClass() {
    // code
} 
```

等等...

Chrome 控制台始终尊重您在 main() 函数中编写的空格/换行符。

我认为这是调试控制台的创建方式，它并不重要。顺便说一句，我谈到的所有这些修改在使用 E4X 扩展时都不会出现在 Firebug 中。

使用 function.toString() 方法而不是 E4X 扩展时看到差异很有趣。也许有人有解释:)

带有 function.toString() 方法的 Firefox 控制台结果：

```
var aClass = new AClass; function AClass() { var a = 1; var aPrivateMethod = function () {var b = 2;alert(b);}; this.aPublicMethod = function () {var c = 34;alert(c);}; } aClass.aPublicMethod(); 
```

带有 E4X 扩展的 Firefox 控制台结果：

```
var aClass = new AClass(); function AClass() { var a = 1; var aPrivateMethod = function () { var b = 2; alert(b); }; this.aPublicMethod = function () { var c = 34; alert(c); }; } aClass.aPublicMethod(); 
```

带有 function.toString() 方法的 Firebug 结果：

```
 var aClass = new AClass;

    function AClass() {
        var a = 1;
        var aPrivateMethod = function () {var b = 2;alert(b);};
        this.aPublicMethod = function () {var c = 3;alert(c);};
    }

    aClass.aPublicMethod(); 
```

带有 E4X 扩展的 Firebug 结果和带有 function.toString() 方法（不支持 E4X）的 Chrome 控制台结果是相同的：

```
var aClass = new aClass();
function aClass() {
    var a = 1;
    var aPrivateMethod = function() {
        var b = 2;
        alert(b);
    };
    this.aPublicMethod = function() {
        var c = 3;
        alert(c);
    };
}
aClass.aPublicMethod(); 
```

可以相关，E4X 是一种干净的方法，没有子字符串破解，但仅受 Firefox 支持：[在 JavaScript 中创建多行字符串](https://stackoverflow.com/questions/805107/how-to-create-multiline-strings/805111#805111)

# html - 寻找可编辑 CSS 属性的交互式用户界面学习工具

> ID：11161631
> 
> 赞同：1
> 
> 时间：2012-06-22T17:56:44.583
> 
> 标签：html, css

我正在尝试学习 css 属性关系。以我目前的知识，我敢说，大多数网页都是围绕着大约 30 个属性构建的，但是如何匹配它们才是让页面看起来更干净、功能更好、整体性更好的原因。给用户更好的体验。目前，我收到反馈，“唯一”的学习方法是结合经验和查看具有我想要的功能的网页上的实现示例，并尝试复制。我认为这太耗时了，对于想要开发可靠的 CSS 方法的人来说，这不是一个有效的工具。您是否/是否使用过类似于以下任何工具的工具来帮助您理解属性的交互以进行语义标记的基本操作？

当前具有 GUI 的工具可以快速反馈属性/元素操作：

*   [JSFIDDLE](http://jsfiddle.net/) : 一个在线平台，用于在一个窗口中查看 HTML、JS、CSS 和结果，允许公共共享代码。

*   [Button Maker](http://css-tricks.com/examples/ButtonMaker/#)：图形按钮的动态 CSS/HTML 生成。

*   [SourceTree](http://www.sourcetreeapp.com/)：用于了解 Git、Mercurial 和 SVN 版本控制系统的存储库结构。

*   [Eclipse](http://www.eclipse.org/)：具有多个实现、代码和信息窗格的“桌面”组织的 IDE。

*   [CodingBat](http://codingbat.com/)：一个在线控制台，用于通过“片段”编码和查看不同传递参数的结果来学习 Python 或 Java。

*   [Codeyear / CodeAcademy](http://www.codecademy.com/tracks/code-year)：一个在线 IDE，允许在多个结构化学习路径中进行“片段”编码和查看 CSS/HTML/JS/结果。

具体来说，我想了解基于位置的样式的关系，例如固定、浮动等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:02:30.993

对我来说，最好的学习方式：想出你想做的事情。做了。通过找出哪些有效，哪些无效的过程。弄清楚如何解决它。修理它。惊讶于结果是多么糟糕。重复。

您不会通过查看独立示例来学习所有小技巧。通过“看”任何东西，你不会学到很多东西。去做吧。一旦你对正在发生的事情有了基本的了解，就可以做点什么。复制一些东西。耗时的？是的，当然……如果你这么说。经验随着时间而来。

复制别人的问题是你不知道他们经历的过程。他们为什么以某种方式做某事？甚至是对的吗？仅仅因为有人把它放在网上并不意味着它有任何好处。

那么具体来说，你想实现什么功能呢？谷歌，阅读人们做这件事的所有不同方式。找到一个你喜欢的，实施它。调整它。如果你不明白，那就去看看。

我认为当你试图找到一些东西时，你会从一件（相关的）事情到另一件事情，直到你忘记你最初的问题......当你需要提高生产力时，这很糟糕。在这里很好，你只想学习一切。

对于某些事情，有结构很重要。一旦你学习了基础知识，我认为拥有某种结构或系统只会让你慢下来。我喜欢去解决问题，边做边学。当我试图弄清楚一些事情时，除了记事本和 Chrome 之外，我什么都没有，并且打开了很多 Google 搜索结果选项卡。您不需要所有这些 GUI 工具。当然，他们可能会通过自动完成或错误警告使您的开发更快一些，但是您急什么？

不要花费太多时间来寻找完美的工具集，而您却永远无法找到您正在寻找这些工具的东西。去做就对了。

# javascript - 是否有可能使用 node.js 作为一种更快、更优雅、支持数据库的替代方式来代替greasemonkey？

> ID：11161633
> 
> 赞同：1
> 
> 时间：2012-06-22T17:56:51.120
> 
> 标签：javascript, node.js, greasemonkey, scriptish

本周我使用[Greasemonkey 早期](https://stackoverflow.com/questions/11141611/csv2json-and-then-json-back-to-csv-with-escape-characters)自动调用页面以从网站上抓取一些数据，这很尴尬，原因有两个：

1.  它基于 GUI 而不是基于命令行）
2.  我必须将所有持久化信息存储在 JSON 中，而不是直接存储在数据库中。

是否有可能使用 node.js 作为 Greasemonkey 的替代品，因为 node.js 可以将记录直接存储在数据库中，并且不需要像 Greasemonkey 那样在视觉上加载页面？

此外，我认为 node.js 会更容易使用，因为您不必像使用 GreaseMonkey 那样将其脚本重新部署到 Firefox，从而使您可以轻松地在单独的脚本项目上使用版本控制。

另一方面，使用 node.js 来做 GreaseMonkey 的工作可能只是用锤子敲打螺丝，所以我想我会在这里检查一下我是否弄错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:17:03.617

> 另一方面，使用 node.js 做 GreaseMonkey 的工作可能只是用锤子敲螺丝

我会说事实恰恰相反。我相信您正在使用 Greasemonkey 来完成服务器端处理库的工作。Greasemonkey 在浏览器中运行，旨在通过在您访问的页面上运行脚本来修改您的 Web 体验。

事实上，我相信 Node.js 会非常适合这项任务。使用[jsdom](https://github.com/tmpvar/jsdom)和[node-jquery](https://github.com/coolaj86/node-jquery)等库，您可以轻松地对 DOM 进行 JavaScript 解析。您可能还想看看[node.io](https://github.com/chriso/node.io)，一个“分布式数据抓取和处理框架”。最后，您可能会研究基于非 Node（但仍然是 JavaScript）的工具，例如[PhantomJS](http://phantomjs.org/)和[CasperJS](http://casperjs.org/)，它们可以进行抓取、DOM 操作、屏幕截图等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T03:40:27.917

这个问题有点不合逻辑。

**Greasemonkey**是让*客户在客户****端***调整*他们的个人*浏览体验。

 ***Node.js**是供*开发人员*向*大众*（希望如此）交付*应用程序的****服务器端***.

 *** * *

对于***抓取数据***，以一种自动化的方式，使用 Node.js 或一些服务器端库（Python 运行良好）。

对于您浏览的网页的***“混搭” ，请使用 Greasemonkey。******

# php - 访问 JFormField 中自定义字段的自定义属性

> ID：11161640
> 
> 赞同：4
> 
> 时间：2012-06-22T17:57:05.783
> 
> 标签：php, joomla, joomla2.5

我在 Joomla 中创建了一个自定义字段类型，需要将参数传递给它。例如，我的 JForm XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<form>
    <fieldset addfieldpath="/administrator/components/com_gallery/models/fields">

        <field name="images" 
            type="MultiImage"                         
                    label="Images"
            description="" 

            imagetable="#__gallery_images" 
            imagedir="../images/gallery/originals/"                        

                /> 

    </fieldset>

</form> 
```

我想访问我的自定义字段中的`imagetable`和属性：`imagedir`

```
<?php
// No direct access to this file
defined('_JEXEC') or die;

jimport('joomla.form.formfield');

class JFormFieldMultiImage extends JFormField
{
    protected $type = 'MultiImage';

    public function getInput() {

        //this is where i want to access it
        $input = $this->imagetable;     

        return $input;
    }
} 
```

我假设您刚刚使用`$this->attributename`，当我`var_dump($this)`看到属性已定义但它们是`:protected`。

我会很感激这方面的帮助:)

谢谢，汤姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T14:12:59.057

你是如此接近！试试这个，让我知道它是否适合你，因为它适合我。(Joomla 2.5.6)

```
echo $this->element['imagedir'];
echo $this->element['imagetable']; 
```

# android - Android：使用代码中的 dimen.xml

> ID：11161643
> 
> 赞同：4
> 
> 时间：2012-06-22T17:57:10.307
> 
> 标签：android, dimensions

我正在使用 dimen.xml 来支持多种屏幕尺寸。

如何访问文件并从代码中获取维度以便在应用程序中使用？

约夫

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T18:06:06.200

您可以使用以下内容：

```
float yourDimen = getResources().getDimension(R.dimen.your_dimen_name); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T17:59:03.743

是的，只需创建具有不同限定符的不同值文件夹，例如 res/values-320x480/ ，您可以使用此[链接](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)和链接2中的[提及](http://droiddevelop.tumblr.com/post/9993651158/part-93-using-a-dimension-xml-file-with-different)

```
Resources res = getResources();
float fontSize = res.getDimension(R.dimen.font_size); 
```

# c# - SlimDX for c# XAudio2 效果器（混响）

> ID：11161646
> 
> 赞同：0
> 
> 时间：2012-06-22T17:57:21.907
> 
> 标签：c#, effects, slimdx, xaudio2

如何为声音添加混响效果？我找不到任何 XAudio2Reverb 类或任何东西。但是，我确实遇到了[这个页面](http://code.google.com/p/slimdx/source/browse/branches/v2/Source/SlimDX.XAudio2/Fx/Reverb.cs?r=1779)。

看起来混响效果的代码是写的，但在下载的 SDK 和可再发行的这个类（甚至不是 XAudio2.FX 命名空间）上不存在，所以有一个链接或其他东西我可以这个版本的 SlimDX2 或做我必须下载源代码并编译它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:17:53.570

我现在正在使用 SharpDX。它更加完整和有据可查。

# struct - OpenCL floatn 与自定义结构有何不同

> ID：11161650
> 
> 赞同：3
> 
> 时间：2012-06-22T17:57:26.073
> 
> 标签：struct, opencl

我在将向量结构传递给 OpenCL 内核时遇到问题。

长话短说，我发现我可以通过 C 结构：

```
typedef struct {
    cl_float4 vec;
} my_type; 
```

. . . 到内核​​，如果我这样声明：

```
typedef struct { float s[4]; } my_float4;
typedef struct { my_float4 vec; } my_type; //use custom float4
__kernel void function(const my_type test) {} 
```

. . . 但不是，如果我这样声明：

```
typedef struct { float4 vec; } my_type; //use built-in float4
__kernel void function(const my_type test) {} 
```

所以我的问题是，是什么让 float4 与众不同？在第二个示例中，我在 clSetKernelArg 上获得 CL_INVALID_ARG_SIZE。在主机代码中，我使用的是 cl_float4——它不*应该*与内核中的 float4 配对吗？

编辑：根据要求，clSetKernelArg 代码（错误处理被裁剪）：

```
template <typename type_data> void set_argument(int arg_index, const type_data* data) {
    cl_int err = clSetKernelArg(kernel,arg_index,sizeof(type_data),data);
    if (err!=CL_SUCCESS) throw "ERROR"; /*simplified*/
} 
```

我使用与上面完全一样声明的结构调用该函数：

```
my_type test;
my_kernel->set_argument(0,&test); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T21:10:26.480

这听起来像是你的实现的一个错误——你应该能够毫无问题地将该用户定义的类型传递给内核。您使用的是什么平台/SDK？我能够在主机代码中成功声明这种类型：

```
typedef struct _mytype {
    cl_float4 val;
} mytype; 
```

...然后稍后使用它：

```
mytype t;
status = clSetKernelArg(kernel, argc++, sizeof(mytype), &t);
check_status("clSetKernelArg:mytype t", status); 
```

check_status 执行您所期望的操作：检查非`CL_SUCCESS`返回值。

内核看起来像这样：

```
typedef struct _mytype {
  float4 value;
} mytype;

kernel void do_it(/* ... */, const mytype test) { /* ... */ } 
```

这会编译并执行，在 CPU 设备上给出正确的结果。

# asp.net - ASP 页面在 UpdatePanel 更新时滚动到顶部

> ID：11161652
> 
> 赞同：2
> 
> 时间：2012-06-22T17:57:30.807
> 
> 标签：asp.net, asp.net-ajax, updatepanel

我有一个问题，我有一个 UpdatePanel，它使用计时器触发以更新具有新点的 ASP 图（基本上是[http://www.4guysfromrolla.com/articles/121609-1.aspx](http://www.4guysfromrolla.com/articles/121609-1.aspx)下“创建真实时间表”）。我遇到了一个问题，每当计时器滴答作响时，整个页面都会滚动到顶部。计时器滴答时如何保持页面中的滚动位置？我已经尝试了[http://www.4guysfromrolla.com/articles/111704-1.aspx](http://www.4guysfromrolla.com/articles/111704-1.aspx)上的说明和其他几个类似的 JavaScript 解决方案，但是只要计时器滴答作响，x 和 y 变量就会消失。

代码：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication4._Default" %>
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent"></asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:ScriptManager ID="scmManager" runat="server"></asp:ScriptManager>
    <asp:UpdatePanel ID="updRealtimeChart" UpdateMode="Conditional" runat="server">
        <ContentTemplate>
            <asp:Chart ID="chtRandomData" ...></asp:Chart><br />
            <asp:Repeater ID="valueRepeater"...></asp:Repeater>
            <asp:Label ID="errorLabel" Font-Bold="true" Font-Size="Larger" ForeColor="Firebrick" BackColor="Khaki" runat="server"></asp:Label>
            <asp:Timer ID="tmrRefreshChart" runat="server" Interval="300"></asp:Timer>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="periodUpdate" />
        </Triggers>
    </asp:UpdatePanel>
    ...etc rest of the page... 
```

**编辑：**在后面的代码中，我试过这个来检查发生了什么：

```
public partial class _Default : System.Web.UI.Page
{
    public int count = 0;
    protected void Page_Init(object sender, EventArgs e)
    {
        Page.MaintainScrollPositionOnPostBack = true;
        count++;
    }
    protected void Page_Load(object sender, EventArgs e)
    {
        errorLabel.Text += count;
        ... } 
```

当我运行它时，UpdatePanel 不断在 errorLabel 中添加一个“1”，表示 Page_Load 和 Page_Init 函数只发生一次，但更新面板仍在移动滚动位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:01:46.693

您可以在 javascript 中使用 document.body.scrollTop 来存储滚动位置，然后再将其分配回去。我用过它，它对我有用。

也试试

```
Page.MaintainScrollPositionOnPostBack = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-06T12:59:34.370

我有类似的情况。在我的情况下，我只需要一个勾号来触发数据同步，所以我用来避免在更新面板进行更新时页面滚动到顶部的解决方案是**在关闭 ScriptManager 标记之后**插入这个 JavaScript ：

```
<script type="text/javascript">
            var prm = Sys.WebForms.PageRequestManager.getInstance();
            prm.add_beginRequest(beginRequest);
            function beginRequest() {
                prm._scrollPosition = null;
            }
</script> 
```

我希望它对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T19:40:31.860

这看起来像一个熟悉的 .NET 错误。在 Timer 控件上设置 ClientIDMode=Auto 应该可以修复它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T19:18:36.073

Stack Overflow 中有几个答案。检查这个：

[如何避免在 AutoPostBack 上滚动 UpdatePanel？](https://stackoverflow.com/questions/5151656/how-to-avoid-updatepanel-scrolling-on-autopostback)

# c# - 锁定资源（图像文件）管理

> ID：11161653
> 
> 赞同：1
> 
> 时间：2012-06-22T17:57:33.507
> 
> 标签：c#, wpf, resources, caliburn.micro

该应用程序是一个桌面文档管理系统。（扫描文档的）图像文件存储在共享网络文件夹中，其索引存储在数据库中。现在，当显示所选文档页面的图像时，用户可以选择删除它（通过上下文菜单）。问题是，如果我尝试这样做，那么它会抛出一个异常（资源被锁定），鉴于它正在屏幕上显示，它具有所有意义。所以，目前我维护一个持久删除队列。应用程序启动后，我进入队列并删除其索引已从数据库中删除的文档的页面，并且鉴于它们未显示删除成功，但这似乎是非常糟糕的代码（我的意思是它有效，但不是我猜应该尽可能干净）。

我的快速解决方案有多糟糕。鉴于该应用是单用户应用，因此用户需要为该应用加注星标才能使用它。这是一个非常糟糕的主意还是我可以使用其他路径来实现。

通过将图像绑定到当前文件来显示图像（在文档查看器中）：

看法：

```
<Image Name="PageViewedPath" Margin="20" Grid.Column="0" /> 
```

视图模型：

```
public string PageViewedPath { get; set; } 
```

一旦用户单击下一个或上一个，我就会更改（在 ViewModel 中的 PageViewedPath）。也许问题是我无法详细控制的绑定，我使用的是 Caliburn Micro，所以这就是为什么只需设置图像名称即可完成绑定。

我认为也许覆盖此绑定并在显示之前创建图像的硬拷贝必须有效，但我不确定它是否会，更糟糕的是，如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:24:09.500

在我开发的使用图像池的应用程序中，我遇到了类似的问题。虽然图像不再显示，但文件已被锁定，无法删除。

我通过加载图像解决了我的问题`BitmapCacheOption.OnLoad`，如下所示：

```
Image myImage = new Image();
BitmapImage bi = new BitmapImage();
bi.BeginInit();

bi.CacheOption = BitmapCacheOption.OnLoad;
bi.UriSource = imageUri;

// End initialization.
bi.EndInit();
myImage.Source = bi; 
```

这是一个 msdn 帖子的链接，该帖子显示了如何使用 xaml 中的 BitmapCacheOption：

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/3cb97997-941f-42a8-a03b-f84b152c1139/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/3cb97997-941f-42a8-a03b-f84b152c1139/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:03:43.470

如果您使用自己的代码对文件进行代码锁定 - 停止锁定。您可能在加载图像的某个地方错过了一些`using`/调用。`Dispose`

如果它不是您的代码，或者您需要处理由于使用共享文件位置而导致的故障 - 您的解决方案可能没问题。大多数用户也不会期望这种行为 - 我的正常期望是文件被立即删除或永远不会删除。

# android - 更改 MediaPlayer 的 SurfaceViews

> ID：11161661
> 
> 赞同：3
> 
> 时间：2012-06-22T17:58:05.923
> 
> 标签：android, surfaceview, android-videoview, android-mediaplayer

我试图在播放期间更改 MediaPlayer 的 SurfaceView。我正在使用 MediaPlayer 的 setDisplay 方法，但是一旦设置了新的 Surface 视图，播放并不总是在设置新的 SurfaceView 之前的同一位置继续。我查看了 StackOverflow 和其他论坛，似乎 MediaPlayer 存在许多不规则行为问题。是否可以在不重新加载 MediaPlayer 的情况下切换 MediaPlayer 的 SurfaceViews？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:22:20.633

据我所知，这是不可能的。我遇到过类似的问题，在播放开始后设置表面会导致出现声音的空白屏幕。

# actionscript-3 - 子弹只会向右发射？

> ID：11161662
> 
> 赞同：0
> 
> 时间：2012-06-22T17:58:06.050
> 
> 标签：actionscript-3

我正在为我在大学的课程制作一个 Flash 游戏，我一直在学习一个教程，但为了我自己的缘故一直在把它改掉。我撞到的一堵墙是，当我发射一颗子弹时，它只会向右侧发射，上下移动一点，我一直试图修复它一段时间，但没有任何反应，也没有任何作用。

包裹 {

```
import flash.display.MovieClip;
import flash.events.Event;
import flash.events.MouseEvent;

public class Wizard extends MovieClip {

    private var dx:Number;
    private var dy:Number;
    private var Bulletspeed:int;
    public var Angle:Number;
    public var newAngle:Number;
    var shotCoolDown:int;
    const MAX_COOLDOWN=20;
    public function Wizard() {
        //constructor
        //Shot cool down
        shotCoolDown=MAX_COOLDOWN;
        addEventListener(Event.ENTER_FRAME, update);
        //set up an event listener for when the turret is added to stage
        addEventListener(Event.ADDED_TO_STAGE, initialise);

    }
    function initialise(e:Event) {
        //reduce shot cool down by one
        shotCoolDown=shotCoolDown-1;

        //add a click listener to the stage
        stage.addEventListener(MouseEvent.CLICK, fire);
    }
    function fire(m:MouseEvent) {
        //Able to shoot
        if (shotCoolDown<=0) {
            //resets cool down
            shotCoolDown=MAX_COOLDOWN;
            //spawn bullet
            var B = new Bullet();
            //set position and rotation of the bullet
            B.rotation=rotation;
            B.x=x;
            B.y=y;
            //add the bullet the the wizard
            parent.addChild(B);
        }
    }

    function update():void {
        //Shot cool down
        shotCoolDown--;
        //Make the Wizard face the mouse
        if (parent!=null) {
            dx=stage.mouseX-this.x;
            dy=stage.mouseY-this.y;
            Math.abs(dx);
            Math.abs(dy);
            var Angle=Math.atan2(dy,dx);
            var newAngle = Angle * (180 / Math.PI);

            if ((0 < newAngle) && (newAngle <= 90)) {
                gotoAndPlay("Right");
            } else if ((90 < newAngle) && (newAngle <= 180)) {
                gotoAndPlay("Down");
            } else if ((-180 < newAngle) && (newAngle <= -90)) {
                gotoAndPlay("Left");
            } else if ((-90 < newAngle) && (newAngle <= 0)) {
                gotoAndPlay("Up");
            }

            this.rotation=Angle;

        }
    }
} 
```

}

那是我的玩家类的代码，包括子弹发射等等。我想我知道问题所在，我需要将其链接到向导更新的其余部分。但我不知道如何，如果需要，这是我的子弹课。

包裹 {

```
import flash.display.Sprite;
import flash.events.Event;

public class Bullet extends Sprite {

    private var speed:int;
    private var myCharacter:Wizard;

    public function Bullet() {
        //constructor
        speed = 10;
        addEventListener(Event.ENTER_FRAME, update);

    }

    function update (e:Event) {
            //Move in the direction the bullet is facing
        x=x+Math.cos(rotation/180*Math.PI)*speed;
        y=y+Math.sin(rotation/180*Math.PI)*speed;
        //Clears bullet once it leaves the stage
        if (x<0 || x>500 || y<0 || y>500) {
            //removes the update listner
            removeEventListener(Event.ENTER_FRAME, update);

            parent.removeChild(this);

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:20:15.480

您将`Wizard`'s设置`rotation`为`Angle`，以弧度表示；然后将旋转传递给`Bullet`，它期望其旋转以度为单位。最好`this.rotation=newAngle;`在 末尾设置`update()`，因为`UIComponent`该类期望以度为单位的值并将其用于旋转其绘图。

# ruby-on-rails - 查找 vs find_by vs where

> ID：11161663
> 
> 赞同：154
> 
> 时间：2012-06-22T17:58:10.060
> 
> 标签：ruby-on-rails, rails-activerecord, dynamic-finders

我是新来的轨道。我看到有很多方法可以找到记录：

1.  `find_by_<columnname>(<columnvalue>)`
2.  `find(:first, :conditions => { <columnname> => <columnvalue> }`
3.  `where(<columnname> => <columnvalue>).first`

看起来它们最终都生成了完全相同的 SQL。另外，我相信查找多条记录也是如此：

1.  `find_all_by_<columnname>(<columnvalue>)`
2.  `find(:all, :conditions => { <columnname> => <columnvalue> }`
3.  `where(<columnname> => <columnvalue>)`

是否有关于使用哪一个的经验法则或建议？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2014-04-03T09:49:47.277

**其中**返回 ActiveRecord::Relation

现在看一下 find_by 的实现：

```
def find_by
  where(*args).take
end 
```

如您所见， **find_by与****where**相同，但它只返回一条记录。此方法应用于获取 1 条记录，以及应使用**where获取具有某些条件的所有记录。**

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2012-06-22T18:17:32.763

**编辑：** 这个答案已经很老了，自从发表这篇文章以来，已经出现了其他更好的答案。我建议查看@Hossam Khamis 在下面发布的更多详细信息。

使用您认为最适合您需要的任何一种。

该`find`方法通常用于按 ID 检索行：

```
Model.find(1) 
```

值得注意的是，`find`如果您提供的属性未找到该项目，则会引发异常。使用`where`（如下所述，如果未找到该属性，它将返回一个空数组）以避免引发异常。

的其他用途`find`通常替换为以下内容：

```
Model.all
Model.first 
```

`find_by`当您在列中搜索信息时，它被用作帮助器，它通过命名约定映射到此类。例如，如果您`name`的数据库中有一个名为的列，您将使用以下语法：

```
Model.find_by(name: "Bob") 
```

`.where`更多的是让您在常规助手无法使用的情况下使用更复杂的逻辑，并且它返回一个与您的条件匹配的项目数组（否则返回一个空数组）。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2016-12-27T00:32:15.430

**`Model.find`**

1- 参数：要查找的对象的 ID。

2- 如果找到：它返回对象（仅一个对象）。

3- 如果未找到：引发`ActiveRecord::RecordNotFound`异常。

**`Model.find_by`**

1-参数：键/值

例子：

```
User.find_by name: 'John', email: 'john@doe.com' 
```

2- 如果找到：它返回对象。

3- 如果没有找到：返回`nil`。

***注意：***如果你想让它提高`ActiveRecord::RecordNotFound`使用`find_by!`

**`Model.where`**

1-参数：相同`find_by`

2- 如果找到：它返回`ActiveRecord::Relation`包含一个或多个与参数匹配的记录。

3-如果找不到：它返回一个 Empty `ActiveRecord::Relation`。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2012-06-22T18:20:56.463

`find`和之间有区别，`find_by`如果`find`未找到将返回错误，而`find_by`将返回 null。

有时，如果您有类似的方法`find_by email: "haha"`，而不是`.where(email: some_params).first`.

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-06-22T13:51:09.887

从 Rails 4 开始，您可以执行以下操作：

```
User.find_by(name: 'Bob') 
```

`find_by_name`这在 Rails 3中是等价的。

使用`#where`时`#find`和`#find_by`不够。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-05-12T07:36:45.943

接受的答案通常涵盖了所有内容，但我想添加一些内容，以防您计划以更新等方式使用模型，并且您正在检索单个记录（`id`您不知道），然后`find_by`是要走的路，因为它检索记录并且不将其放入数组中

```
irb(main):037:0> @kit = Kit.find_by(number: "3456")
  Kit Load (0.9ms)  SELECT "kits".* FROM "kits" WHERE "kits"."number" = 
 '3456' LIMIT 1
=> #<Kit id: 1, number: "3456", created_at: "2015-05-12 06:10:56",   
updated_at: "2015-05-12 06:10:56", job_id: nil>

irb(main):038:0> @kit.update(job_id: 2)
(0.2ms)  BEGIN Kit Exists (0.4ms)  SELECT 1 AS one FROM "kits" WHERE  
("kits"."number" = '3456' AND "kits"."id" != 1) LIMIT 1 SQL (0.5ms)   
UPDATE "kits" SET "job_id" = $1, "updated_at" = $2 WHERE  "kits"."id" = 
1  [["job_id", 2], ["updated_at", Tue, 12 May 2015 07:16:58 UTC +00:00]] 
(0.6ms)  COMMIT => true 
```

但是如果你使用`where`那么你不能直接更新它

```
irb(main):039:0> @kit = Kit.where(number: "3456")
Kit Load (1.2ms)  SELECT "kits".* FROM "kits" WHERE "kits"."number" =  
'3456' => #<ActiveRecord::Relation [#<Kit id: 1, number: "3456", 
created_at: "2015-05-12 06:10:56", updated_at: "2015-05-12 07:16:58", 
job_id: 2>]>

irb(main):040:0> @kit.update(job_id: 3)
ArgumentError: wrong number of arguments (1 for 2) 
```

在这种情况下，您必须像这样指定它

```
irb(main):043:0> @kit[0].update(job_id: 3)
(0.2ms)  BEGIN Kit Exists (0.6ms)  SELECT 1 AS one FROM "kits" WHERE 
("kits"."number" = '3456' AND "kits"."id" != 1) LIMIT 1 SQL (0.6ms)   
UPDATE "kits" SET "job_id" = $1, "updated_at" = $2 WHERE "kits"."id" = 1  
[["job_id", 3], ["updated_at", Tue, 12 May 2015 07:28:04 UTC +00:00]]
(0.5ms)  COMMIT => true 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-08-06T10:46:10.937

除了接受的答案外，以下也是有效的

`Model.find()`可以接受 id 数组，并将返回所有匹配的记录。 `Model.find_by_id(123)`也接受数组，但只会处理数组中存在的第一个 id 值

```
Model.find([1,2,3])
Model.find_by_id([1,2,3]) 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-07-12T16:23:43.003

到目前为止给出的答案都是可以的。

但是，一个有趣的区别是`Model.find`按 id 搜索；如果找到，它会返回一个`Model`对象（只有一条记录），`ActiveRecord::RecordNotFound`否则会抛出一个。

`Model.find_by`非常类似于`Model.find`并且允许您搜索数据库中的任何列或列组，但`nil`如果没有记录与搜索匹配，它会返回。

`Model.where`另一方面，返回一个`Model::ActiveRecord_Relation`对象，它就像一个包含**所有与搜索匹配的记录**的数组。如果没有找到记录，则返回一个空`Model::ActiveRecord_Relation`对象。

我希望这些可以帮助您决定在任何时候使用哪个。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-10-14T09:07:18.377

假设我有一个模型`User`

1.  `User.find(id)`

返回主键 = id 的行。返回类型将是`User`对象。

2.  `User.find_by(email:"abc@xyz.com")`

在这种情况下，返回具有匹配属性或电子邮件的第一行。返回类型将`User`再次是对象。

注意：-`User.find_by(email: "abc@xyz.com")`类似于`User.find_by_email("abc@xyz.com")`

3.  `User.where(project_id:1)`

返回用户表中属性匹配的所有用户。

这里的返回类型将是`ActiveRecord::Relation`对象。`ActiveRecord::Relation`类包含 Ruby 的`Enumerable`模块，因此您可以像数组一样使用它的对象并在其上遍历。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-06-22T18:15:21.440

您列表中的两个 #2 都已被弃用。你仍然可以使用`find(params[:id])`。

通常，`where()`在大多数情况下都有效。

这是一个很棒的帖子：[https ://web.archive.org/web/20150206131559/http://m.onkey.org/active-record-query-interface](https://web.archive.org/web/20150206131559/http://m.onkey.org/active-record-query-interface)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-06T04:21:24.857

使用任何开源技术的最佳部分是您可以检查它的长度和广度。 [签出此链接](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/finder_methods.rb)

find_by ~> 查找符合指定条件的第一条记录。没有隐含的顺序，所以如果顺序很重要，您应该自己指定。如果没有找到记录，则返回 nil。

find ~> 查找符合指定条件的第一条记录，但如果没有找到记录，则会引发异常，但这是故意的。

请查看上面的链接，它包含以下两个功能的所有说明和用例。

* * *

## 回答 #12

> 赞同：-5
> 
> 时间：2017-05-03T11:41:16.873

我个人会推荐使用

```
where(< columnname> => < columnvalue>) 
```

# python - Python - 发出 POST 请求

> ID：11161671
> 
> 赞同：1
> 
> 时间：2012-06-22T17:59:02.667
> 
> 标签：python, django, oauth, youtube, youtube-api

我正在尝试按照本指南在我的网络应用程序中使用 Youtube api [https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Server_Side_Web_Applications_Flow](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Server_Side_Web_Applications_Flow)我已经成功完成了第 3 步并获得了**授权码** .

现在我坚持向这个网址发出 POST 请求`https://accounts.google.com/o/oauth2/token`

我想提出这样的请求：（取自我上面给出的链接）

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

code=4/ux5gNj-_mIu4DOD_gNZdjX9EtOFf&
client_id=1084945748469-eg34imk572gdhu83gj5p0an9fut6urp5.apps.googleusercontent.com&
client_secret=hDBmMRhz7eJRsM9Z2q1oFBSe&
redirect_uri=http://localhost/oauth2callback&
grant_type=authorization_code 
```

我试过这样的事情：

```
headers = {'Content-Type': 'application/x-www-form-urlencoded code=4/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&client_id=xxxxxxxxxxx.apps.googleusercontent.com&client_secret=xxxxxxxxxxxxxxxxx&redirect_uri=http://127.0.0.1:8000/information/youtube/&grant_type=authorization_code'}

r = requests.post(url, headers) 
```

我收到了这个错误：

```
<Response [411]>
u'<!DOCTYPE html>\n<html lang=en>\n  <meta charset=utf-8>\n  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">\n  <title>Error 411 (Length Required)!!1</title>\n  <style>\n    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}\n  </style>\n  <a href=//www.google.com/><img src=//www.google.com/images/errors/logo_sm.gif alt=Google></a>\n  <p><b>411.</b> <ins>That\u2019s an error.</ins>\n  <p>POST requests require a <code>Content-length</code> header.  <ins>That\u2019s all we know.</ins>\n' 
```

我知道我对发布请求有误，我需要您指导如何使其发挥作用。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T18:02:23.393

不要将数据放在标题中。改用[`data`kwarg](http://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests)。`.post()`_ 由于 urlencoded POST 正文是默认值，因此也无需通过`headers`参数指定它。

```
data = {
    'code': '4/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
    'client_id': 'xxxxxxxxxxx.apps.googleusercontent.com',
    'client_secret': 'xxxxxxxxxxxxxxxxx',
    'redirect_uri': 'http://127.0.0.1:8000/information/youtube/'.
    'grant_type': 'authorization_code'
}
r = requests.post(url, data=data) 
```

[*您可以通过requests-oauth*](http://pypi.python.org/pypi/requests-oauth)扩展让*请求*处理 OAuth 身份验证，从而使此代码更好： [https ://github.com/maraujop/requests-oauth#readme](https://github.com/maraujop/requests-oauth#readme)[](http://pypi.python.org/pypi/requests-oauth)

 *然后，您可以在不手动处理 OAuth 参数的情况下执行您的请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T18:02:15.213

您需要使用的`data`参数`requests.post`

文档应该有所帮助：[http ://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests](http://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests)*

# javascript - 使用控件拖动和单击对象

> ID：11161674
> 
> 赞同：3
> 
> 时间：2012-06-22T17:59:11.890
> 
> 标签：javascript, webgl, three.js

现在我有一个包含两个球体和一个点光源的场景（0,0,0）。球体使用控件围绕该点旋转，但是当我尝试拖动球体时无法移动球体。有人可以快速看一下我的代码吗，谢谢！

编辑：是的，它们会移动，但我需要它们可以独立于 THREE.Controls 拖动，就像这个例子一样：http: [//mrdoob.github.com/three.js/examples/webgl_interactive_draggablecubes.html](http://mrdoob.github.com/three.js/examples/webgl_interactive_draggablecubes.html)

当一个球体被选中时，我需要阻止 THREE.Controls() 并将该球体拖动到我想要的任何地方，而无需“旋转”场景。

[http://jsfiddle.net/bmd0031/MhB2u/3/](http://jsfiddle.net/bmd0031/MhB2u/3/)

布伦特

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T18:46:58.210

您需要做的是根据您的对象是否被选中动态禁用控件。

所以这里是我正在使用的控件：

```
controls = new THREE.TrackballControls(camera);
controls.rotateSpeed = 1.0;
controls.zoomSpeed = 1.2;
controls.panSpeed = 0.8;
controls.noZoom = false;
controls.noPan = false;
controls.staticMoving = true;
controls.dynamicDampingFactor = 0.3; 
```

现在，THREE.JS 中的控件对象创建允许它们更改相机视图的鼠标事件。我们想要的是在选择对象时禁用控件，否则允许控件在拖动时更改视图。

为了做到这一点，我们可以声明一个作为标志的全局变量

```
var killControls = false; 
```

当我们单击并投射光线时，这将设置为 true，如果光线与我们指定的对象发生碰撞，我们将 killControls 设置为 true。

```
/** Event fired when the mouse button is pressed down */
function onDocumentMouseDown(event) {
    event.preventDefault();

    /** Calculate mouse position and project vector through camera and mouse3D */
    mouse3D.x = mouse2D.x = (event.clientX / window.innerWidth) * 2 - 1;
    mouse3D.y = mouse2D.y = -(event.clientY / window.innerHeight) * 2 + 1;
    mouse3D.z = 0.5;
    projector.unprojectVector(mouse3D, camera);

    var ray = new THREE.Ray(camera.position, mouse3D.subSelf(camera.position).normalize());

    var intersects = ray.intersectObject(maskMesh);

    if (intersects.length > 0) {
        SELECTED = intersects[0].object;
        var intersects = ray.intersectObject(plane);
        offset.copy(intersects[0].point).subSelf(plane.position);
        killControls = true;
    }
    else if (controls.enabled == false)
        controls.enabled = true;
}

/** This event handler is only fired after the mouse down event and
    before the mouse up event and only when the mouse moves */
function onDocumentMouseMove(event) {
    event.preventDefault();

    /** Calculate mouse position and project through camera and mouse3D */
    mouse3D.x = mouse2D.x = (event.clientX / window.innerWidth) * 2 - 1;
    mouse3D.y = mouse2D.y = -(event.clientY / window.innerHeight) * 2 + 1;
    mouse3D.z = 0.5;
    projector.unprojectVector(mouse3D, camera);

    var ray = new THREE.Ray(camera.position, mouse3D.subSelf(camera.position).normalize());

    if (SELECTED) {
        var intersects = ray.intersectObject(plane);
        SELECTED.position.copy(intersects[0].point.subSelf(offset));
        killControls = true;
        return;
    }

    var intersects = ray.intersectObject(maskMesh);

    if (intersects.length > 0) {
        if (INTERSECTED != intersects[0].object) {
            INTERSECTED = intersects[0].object;
            INTERSECTED.currentHex = INTERSECTED.material.color.getHex();
            plane.position.copy(INTERSECTED.position);
        }
    }
    else {
        INTERSECTED = null;
    }
}

/** Removes event listeners when the mouse button is let go */
function onDocumentMouseUp(event) {
    event.preventDefault();
    if (INTERSECTED) {
        plane.position.copy(INTERSECTED.position);
        SELECTED = null;
        killControls = false;
    }

}

/** Removes event listeners if the mouse runs off the renderer */
function onDocumentMouseOut(event) {
    event.preventDefault();
    if (INTERSECTED) {
        plane.position.copy(INTERSECTED.position);
        SELECTED = null;
    }
} 
```

在我们的主动画循环中，以下条件将导致控件仅在我们单击且不与指定对象碰撞时更新：

```
if (!killControls)
    controls.update(delta);
else
    controls.enabled = false; 
```

编辑：我今天看到这个答案，当这个答案被投票并查看上面的最后一段代码时，我认为我认为这更清楚，所以我在我的代码中更改为这个，当然下面和上面都是等价的：

```
if (killControls) 
    controls.enabled = false;
else 
    controls.update(delta); 
```

# file-upload - CFSCRIPT - 如何在上传前检查文件名的长度

> ID：11161675
> 
> 赞同：1
> 
> 时间：2012-06-22T17:59:22.187
> 
> 标签：file-upload, coldfusion, long-filenames

我在上传具有超长名称的文件时遇到了这个问题 - 我的数据库字段仅设置为 50 个字符。从那时起，我增加了我的数据库字段长度，但我想有办法在上传之前检查文件名的长度。下面是我的代码。验证返回 '85' 作为字符长度。它为我上传的每个不同文件返回相同的计数（没有一个文件名长度为 85）。

```
 <cfscript>
    missing_info = "<p>There was a slight problem with your submission. The following are required or invalid:</p><ul>";
    // Check the length of the file name for our database field
    if ( len(Form["ResumeFile1"]) gt 100 )
    {
    missing_info = missing_info & "<li>'Resume File 1' is invalid. Character length must be less than 100\. Current count is " & len(Form["ResumeFile1"]) & ".</li>";
    validation_error = true;
    ResumeFileInvalidMarker  = true;
    }
    </cfscript> 
```

有人看到这有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:14:05.760

[http://www.cfquickdocs.com/cf9/#cffile.upload](http://www.cfquickdocs.com/cf9/#cffile.upload)

上传文件后，变量“clientFileName”将为您提供上传文件的名称，不带文件扩展名。

在上传之前读取文件名的唯一方法是使用 JavaScript 读取和解析文件字段中的值（文件路径）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:56:13.603

快速澄清您问题的措辞。当您的代码执行文件上传时，文件上传已经发生。该文件位于 ColdFusion 服务器上的临时目录中，与文件上传相关的表单字段包含该文件的临时文件名。除了检查是否已指定文件之外，**不要直接对该文件执行任何操作，**否则您将绕过一些内置的安全性。

您想使用带有[操作](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-738f.html)`cffile`的标签（[或等效的 udf](https://stackoverflow.com/questions/2231289/script-function-for-file-upload-in-coldfusion-9)）将临时文件移动到您选择的文件夹中。此时，您可以访问包含大量信息的结构。通常我“上传”到应用程序的临时目录中，为了安全起见，该目录应该在 webroot 之外。[`upload`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-738f.html)

此时，您将需要对文件进行任何验证，例如文件名长度、文件类型、文件大小等，如果文件未通过任何检查，则删除文件。如果它通过了所有检查，那么您将它移动到它的最终目的地，它可能位于 webroot 内部。

在您的情况下，您需要检查 cffile 结构元素`clientFile`，它是包含扩展名的原始文件名（您需要检查，因为扩展名不需要存在并且可以是任何长度）。

# javascript - 带有 jQ uery 的 SVG 元素中的 HTML5 Canvas

> ID：11161680
> 
> 赞同：2
> 
> 时间：2012-06-22T17:59:36.743
> 
> 标签：javascript, jquery, html, html5-canvas, jquery-svg

我需要将画布插入 SVG 元素。我需要 SVG 中的画布，因为我正在使用 d3js，它使用 SVG 和 jquery 迷你图来创建画布。有没有办法让迷你图成为 svg 元素的一部分？我试图在 SVG 中绘制带有迷你图的图形，但返回的 c.innerHTML 未定义。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:31:14.647

请参阅问题下方的 Phrogz 评论。我只是把它作为关闭线程的答案。我的问题的答案是我需要在我的 SVG 中放置一个元素来放置一个 html 标记，例如 div。迷你图生成的画布需要 div。

所以我只需要添加这个

```
svgObj.append("foreignObject")
  .attr("width", "20")
  .attr("height", "20")
  .append("xhtml:div"); 
```

然后对于迷你图，我只是将它指向异物的 div，现在我在 SVG 中有一个画布:)

谢谢Progz！

# android - 如何下载和使用 ShareCompat 库

> ID：11161681
> 
> 赞同：0
> 
> 时间：2012-06-22T17:59:39.800
> 
> 标签：android

我需要将我的应用程序中的一些文本分享给 google plus，我用 google 搜索并发现许多链接说
要使用 ShareCompat，我找到了这个代码示例

```
 Intent shareIntent = ShareCompat.IntentBuilder.from(ShareActivity.this)
.setText("This site has lots of great information about Android!
  http://www.android.com")
.setType("text/plain")
.getIntent()
.setPackage("com.google.android.apps.plus");

 startActivity(shareIntent); 
```

但我想知道从哪里下载这个 ShareCompat API。任何人都可以为此提供一个链接。任何形式的帮助将不胜感激。非常感谢，莫娜

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:15:11.717

`ShareCompat`是 Android 支持包的一部分，可在您的 SDK 管理器的 Extras 中获得。

`ShareCompat`可以在[Android 开发者网站](http://developer.android.com/reference/android/support/v4/app/ShareCompat.html)上找到有关使用的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:18:55.813

您可以通过使用提取所有其他 SDK 包/更新的 android SDK 应用程序来获取它。

这是描述它是什么以及如何获取它的官方链接：http: [//developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

# c++ - 堆上的内存地址会被重用吗？

> ID：11161682
> 
> 赞同：5
> 
> 时间：2012-06-22T17:59:40.707
> 
> 标签：c++, memory

对标题问题的进一步解释是有序的，让我解释一下我的场景。

我有一个指向堆上几个对象的指针的列表容器。每当创建一个新对象时，就会将指向它的指针添加到列表中，而每当删除一个对象时，它的指针就会被删除。可以肯定地说，此列表上的所有指针始终有效。

列表中的许多对象都包含指向同一列表中其他对象的指针。

在我取消引用这些指针中的任何一个之前，我想使用一个`CheckAgainstList(ptr*)`函数来确保一个对象指向同一个列表中的另一个对象，因此没有指向一个已经被删除的对象。

现在戴上你的锡纸帽子，这可能吗？

1.  对象 A 有一个指向对象 B 的指针，其内存地址为 `0x00988e50`。
2.  对象 B 被删除。
3.  对象 C 被创建并被放置到新释放的内存空间`0x00988e50`中。
4.  `CheckAgainstList(ptr*)`当我们检查指针时返回 true，因为对象 C 在列表中并且与 B 曾经占用的内存地址相同。

现在我们有一个错误，因为 A 认为它有一个指向 B 的指针，但是 B 消失了，可以说是 C 取而代之。

这个潜在的错误甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T18:04:02.640

不仅有可能，而且很有可能。一个好的内存分配器会尝试尽可能频繁地重用内存，以减少碎片和膨胀。

您尝试解决的问题可能适用于[weak_ptr](http://en.cppreference.com/w/cpp/memory/weak_ptr)，可以在使用之前检查其有效性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T18:01:39.480

是的，这个错误是完全可能的。

基本上你正在做的事情是非常危险的，并且会很快导致错误。您最好使用某种引用计数的智能指针。C++11 包含 std::shared_ptr ，这意味着您可以使用它来代替普通指针。这样，在一切都完成之前，内存不会被释放，并且会缓解您所描述的问题。

您唯一的其他选择是扫描所有其他对象以查看它们是否引用已删除的“B”并执行“null”之类的操作，使其指向现已删除的指针。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T18:02:35.507

内存地址确实会被重用 - 取决于操作系统。否则，如果一个程序进行了大量的分配和释放，超过了机器中的 RAM，它将无法继续。

最后，答案更多的是关于操作系统及其内存管理方案，而不是 C++ 本身。毕竟，当您分配自由存储（动态）内存时，最原始的情况是进程（通过标准库函数）调用特定的操作系统例程来分配请求的内存量并将地址返回给分配的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T18:03:58.567

如果您只创建一种类型的对象，则更有可能出现该错误。但这总是完全可能的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T18:04:48.503

是的，这可能发生。为了防止这种情况，当您删除一个对象时，请遍历列表并将任何指向已删除对象的指针设置为指向 NULL。

# mongodb - 我如何才能在 MongoDB 中与集合中的记录子集不同？

> ID：11161687
> 
> 赞同：0
> 
> 时间：2012-06-22T17:59:54.840
> 
> 标签：mongodb, distinct

我知道并使用它：（我正在使用 PHP）

```
$db->command(array('distinct' => 'cars', 'key' => 'manufacturer')); 
```

但这给了我整个系列中不同的汽车模型。

我想要做的是指定例如**本田汽车**并获得他们独特的车型。

就像是：

```
$db->find(array('manifacturer' => 'Honda'))->distinct('model') 
```

我不明白语法是错误的，但我找不到任何好的方法来做到这一点。我的收藏量很大，处理数据后是一个糟糕的解决方案。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:06:09.017

我找到了解决方案，所以我会在这里发布：

```
$db->command(
    array(
        "distinct" => "cars",
        "key" => "model", 
        "query" => array("manufacturer" => "Honda")
    )
); 
```

我希望有人觉得这很有用。

# ruby-on-rails - 为什么我的 Ember-Rails“Hello World”应用程序无法运行？

> ID：11161689
> 
> 赞同：2
> 
> 时间：2012-06-22T17:59:58.823
> 
> 标签：ruby-on-rails, ember.js

我一直在尝试为 Rails 项目评估 emberjs。

有人可以建议（或理想情况下为我失败的项目）如何让我的数据显示在视图中？我只运行`rails g ember:bootstrap`并创建了一个`User`具有单个属性的表`username`。

回购链接：[https ://github.com/Rhodee/ember-hello-world](https://github.com/Rhodee/ember-hello-world)

控制台仅提供以下线索：

```
Uncaught TypeError: Cannot call method 'extend' of undefined application_controller.js:1
Uncaught TypeError: Cannot call method 'extend' of undefined user_controller.js:1
Uncaught TypeError: Object <Ember.Object:ember282> has no method 'removeArrayObserver' ember.js:11068 
```

我已经利用这些资源进行研究：

*   [https://github.com/emberjs/data#readme](https://github.com/emberjs/data#readme)
*   [http://www.cerebris.com/blog/2012/01/26/beginning-ember-js-on-rails-part-2/](http://www.cerebris.com/blog/2012/01/26/beginning-ember-js-on-rails-part-2/)
*   [http://jsfiddle.net/C7LrM/59/](http://jsfiddle.net/C7LrM/59/)
*   [http://emberjs.com/documentation/](http://emberjs.com/documentation/)

我在哪里可以找到最新的教程，这些教程反映了如何将事物连接起来以简单地显示索引模板的状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T06:50:12.720

您看到的前两个错误是一个[未解决的问题](https://github.com/emberjs/ember-rails/issues/67)。

我正在努力解决这一切，就像你一样。我通过更改样板来解决错误

```
MyApp.ApplicationController = Ember.ObjectController.extend 
```

到

```
MyApp.ApplicationController = Ember.Object.extend 
```

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T10:58:50.297

我遇到了同样的问题，经过一番挖掘发现以下内容：

控制台错误是指`Ember.ObjectController`当前稳定的 ember 版本中没有。`Ember.ObjectController`曾经在旧版本的 ember 中，已被取出，现在正在返回，[如此 stackoverflow 答案](https://stackoverflow.com/questions/8864337/does-ember-js-still-support-objectcontroller-if-not-what-replaces-it#answer-8868217)中所述。该答案中还有一个（临时）解决方案。

*最新*的ember 版本（可通过 ember github repo 获得）包括此更改，我一直在尝试将其与 ember-rails 一起使用，同时阅读[Ember 应用程序结构指南](http://emberjs.com/guides/outlets/)。经过一番挖掘，我发现`Ember.State`已经更新为，并且回调`Ember.Route`也有一些更新，详见[本次提交](https://github.com/joliss/ember.js/commit/b35b0aee2e927380cb09bfc56db183a98e358c93)。`connectOutlets`

引用 ember-rails 贡献者[的话，ember-rails 生成器是一团糟](https://github.com/emberjs/ember-rails/issues/67)。因此，您可能必须使用上述修复程序更新一些生成的代码。

或者，我建议使用他们使用的确切设置（在他们的示例应用程序代码中可用）来完成 cerebris 教程。

# php - 为什么 array_unique 不返回唯一项目列表？

> ID：11161696
> 
> 赞同：0
> 
> 时间：2012-06-22T18:00:19.963
> 
> 标签：php, web-scraping, array-unique

我正在尝试抓取客户网站主页上的所有网址，以便将其迁移到 wordpress。问题是我似乎无法获得去重的 url 列表。

这是代码：

```
$html = file_get_contents('http://www.catwalkyourself.com');

$dom = new DOMDocument();
@$dom->loadHTML($html);

// grab all the on the page
$xpath = new DOMXPath($dom);
$hrefs = $xpath->evaluate("/html/body//a");

for ($i = 0; $i < $hrefs->length; $i++) {
   $href = $hrefs->item($i);
   $url = $href->getAttribute('href');

   if($url = preg_match_all('((www|http://)(www)?.catwalkyourself.com\/?.*)', $url, $matches[0])){
    $urls = $matches[0][0][0];
    $list = implode( ', ', array_unique( explode(", ", $urls) ) );
    echo $list . '<br/>';
    //print_r($list);
   }
} 
```

（也张贴[在这里](https://gist.github.com/2974247)。）

相反，我得到这样的重复：

```
http://www.catwalkyourself.com/rss.php
http://www.catwalkyourself.com/rss.php 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:15:03.217

现在使用循环构造代码的方式，您总是`array_unique`使用大小为 1 的数组进行调用。

您需要构建一个 URL 列表，然后调用 array_unique。试试这个：

```
<?php

$html = file_get_contents('http://www.catwalkyourself.com');

$dom = new DOMDocument();
@$dom->loadHTML($html);

// grab all the on the page
$xpath = new DOMXPath($dom);
$hrefs = $xpath->evaluate("/html/body//a");
$urls  = array();

for ($i = 0; $i < $hrefs->length; $i++) {
    $href = $hrefs->item($i);
    $url  = $href->getAttribute('href');

    if( ($count = preg_match_all('((www|http://)(www)?.catwalkyourself.com\/?.*)', $url, $matches[0])) > 0) {
        $urls[] = $matches[0][0][0]; // build list of URLs in the loop
    }
}

$list = implode( ', ', array_unique( $urls ) );
echo $list . '<br/>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:17:41.533

代码的最后一部分不应该在循环中。您正在遍历包含页面上每个链接的数组。由于此数组的每个元素仅包含一个链接，因此您正在应用`array_unique`一个不能包含多个元素的数组。

尝试这样的事情：

```
$html = file_get_contents('http://www.catwalkyourself.com');

$dom = new DOMDocument();
@$dom->loadHTML($html);

// grab all the on the page
$xpath = new DOMXPath($dom);
$hrefs = $xpath->evaluate("/html/body//a");
$urls = array();

for ($i = 0; $i < $hrefs->length; $i++) {
    $href = $hrefs->item($i);
    $url = $href->getAttribute('href');

    if($url = preg_match_all('((www|http://)(www)?.catwalkyourself.com\/?.*)', $url, $matches[0])){
        $urls[] = $matches[0][0][0];
    }
}
$list = implode(', ', array_unique($urls));
echo $list . '<br/>'; 
```

# c++ - OpenGL 上的多个视口

> ID：11161699
> 
> 赞同：0
> 
> 时间：2012-06-22T18:00:23.650
> 
> 标签：c++, opengl, viewport

我正在尝试制作赛车游戏，但在屏幕上显示多个视口时遇到问题。我希望在屏幕的右下角放一个小的“迷你地图”（这实际上是与主相机场景不同的视图）但是不知何故，第二个视口没有出现，我所能看到的只是主摄像头的视图。

下面是我的代码：

```
 void mainRender() {
        updateState();

        setViewport(0, windowWidth, 0, windowHeight);
        setWindow();
        renderScene();

        setViewport(0, windowWidth, 0, windowHeight/2);
        renderScene();
        gluLookAt(0,88,0,
                  1 ,0 ,0,
                  0.0,1.0,0.0);

        Sleep(30);
    }

    void setWindow() {
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(45.0f,(GLfloat)windowWidth/(GLfloat)windowHeight,0.1f, 100.0f);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        gluLookAt(posX,posY + 0.025 * std::abs(sin(headPosAux*PI/180)),posZ,
        posX + sin(roty*PI/180),posY + 0.025 * std::abs(sin(headPosAux*PI/180)) + cos(rotx*PI/180),posZ -cos(roty*PI/180),
        0.0,1.0,0.0);

    }

    void setViewport(GLint left, GLint right, GLint bottom, GLint top){
        glViewport(left, bottom, right - left, top - bottom);
     }

    int main(int argc, char **argv) {
        glutInit(&argc, argv);
        glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA | GLUT_DEPTH);
        glutInitWindowSize(windowWidth,windowHeight);
        glutInitWindowPosition(windowXPos,windowYPos);

        /**
        Store main window id so that glui can send it redisplay events
        */
        mainWindowId = glutCreateWindow("TF");

        glutDisplayFunc(mainRender);

        glutReshapeFunc(onWindowReshape);

        /**
        Register keyboard events handlers
        */
        glutKeyboardFunc(onKeyDown);
        glutKeyboardUpFunc(onKeyUp);

        mainInit();

        glutMainLoop();

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:31:26.633

> 我没有在第二个视口中绘制，我只是改变了相机的位置，所以它可以从上方看地图，它看起来像一个小地图（这就是我使用 lookAt 函数的目的）。

我认为您对 opengl 的工作方式有一些严重的误解。只是改变 gluLookAt 不会做任何事情。如果您想从不同的角度查看场景，则必须在更改视口后重新绘制整个场景。如果要显示小地图，则应正常绘制整个场景，将视口设置为小地图，设置顶置摄像头，然后再次绘制整个场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:14:05.223

您需要开始使用`glGetError`.

您对函数的左右参数混淆了。您将左侧作为宽度/ 2 传递，右侧作为 0 传递。这会产生负宽度，因此会产生错误。你的身高看起来也是负数。

# php - PHP While 循环和 DIV 的

> ID：11161706
> 
> 赞同：0
> 
> 时间：2012-06-22T18:00:49.790
> 
> 标签：php, css, html

`while`我正在使用的循环有问题。我试图在我的网页上显示几个模块，每个模块都存储在我的数据库中。

我运行以下`mysql query`.

`$modules = mysql_query("SELECT * FROM category WHERE active = '1' ORDER BY ordering ASC");`接着`while($allmodules = mysql_fetch_array($modules)) {`

然后返回我正在寻找的相关数据，一切正常。

我可以轻松地在网页上显示这些“模块”，但我试图将它们存储在其他 DIV 中，然后创建行。所以我可以在网页上有3排模块来帮助定位等等。

我用`<div id="module-row">`了3次以上。当我不使用 PHP 时，我可以让它工作。我想将我从`while`语句中获取的第一个模块插入到第一个“模块行”DIV，第二个模块插入第二个“模块行”DIV，第三个模块插入第三个DIV。

这样我每一行都会有一个模块。然后我想继续它，所以第四个模块将被放置在第一个“模块行”DIV中，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:07:11.060

您的问题有点模糊，但听起来您无法将获取的数据插入到适当的 DIV 标签中。

假定 ID 属性是唯一的，即一旦使用了 ID，就不会在该页面上再次使用它。尝试用类属性替换 ID 属性，就像这样`<div class="module-row">`，然后通过类名而不是 ID 访问 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:40:02.750

如果你的表有一个**id**和**data**列，它看起来像这样：

```
while($allmodules = mysql_fetch_assoc($modules)) {
    echo '<div class="module-row'.$allmodules['id'].'">'.$allmodules['data'].'</div>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T07:39:59.083

如果你的表有一个**id**和**data**列，它看起来像这样：

```
while($allmodules = mysql_fetch_assoc($modules)) {
    echo '<div class="module-row'.$allmodules['id'].'">'.$allmodules['data'].'</div>';
} 
```

上面的答案是正确的，但我建议使用 php 查询，在你必须包含 insert_db.php 之前使用 require_once 函数属于 [head] 所以变成只是使用

echo [div class="require_one $database_name"] *请将符号 [div] 改为 <...> ... 是 div 标签

注意：请记住，如果您对页面使用 sql 查询，可能会危及安全系统。

# java - android在相同布局上设置的webviews之间切换

> ID：11161708
> 
> 赞同：0
> 
> 时间：2012-06-22T18:00:58.597
> 
> 标签：java, android, eclipse

我试图在两个不同的活动之间切换，每个活动都包含一个 webview。我在切换它们时遇到了很多内存问题，我现在正在尝试以下操作：我在同一布局上设置了 VISIBLE 或 GONE 两个 webview。当我从 webviewA 按下一个按钮时，在 webviewB 上加载一个 url，当 webviewB onPageFinished() 时，A 设置为 GONE，B 设置为 VISIBLE。从 B 到 A 相同。问题是 url 仅在第一次加载...

两个 webviews 设置在相同的布局上，例如，

```
<RelativeLayout
                android:id="@+id/aLayout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_below="@+id/barraSocial">

                <WebView
                    android:id="@+id/webviewA"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:autoLink="web"
                    android:textColor="@android:color/black" 
                    android:scrollbars="none"/>
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/bLayout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_below="@+id/barraSocial">
                <WebView
                    android:id="@+id/webviewB"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:autoLink="web"
                    android:textColor="@android:color/black" 
                    android:scrollbars="none"/>   
            </RelativeLayout> 
```

onCreate 活动，

```
final RelativeLayout LayoutA = (RelativeLayout)findViewById(R.id.aLayout);
final RelativeLayout LayoutB = (RelativeLayout)findViewById(R.id.bLayout);

webviewA = (WebView) findViewById(R.id.webviewA);
webviewB = (WebView) findViewById(R.id.webviewB); 
```

在 webview 上单击一个按钮，

```
webviewB.loadUrl(UrlVista); 
```

然后，来自 webviewB 的 onPageFinished() 被触发，

```
 webviewB.setWebViewClient(new WebViewClient() 
        {   
                    @Override
                    public void onPageFinished(WebView view, String url) 
                    {
                        LayoutA.setVisibility(View.GONE);
                        LayoutB.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:44:28.553

你有两个RelativeLayouts。一个本质上是将另一个推离屏幕。而不是你所拥有的，只有一个具有 2 个 webviews 的相对布局：

在您的 xml 文件中：

```
<RelativeLayout android:id="@+id/aLayout"                 
    android:layout_width="fill_parent"                 
    android:layout_height="fill_parent"                 
    android:layout_below="@+id/barraSocial">

    <WebView android:id="@+id/webviewA"                     
        android:layout_width="fill_parent"                                
        android:layout_height="fill_parent"                     
        android:autoLink="web"                     
        android:textColor="@android:color/black"                      
        android:scrollbars="none"
        android:alignParentLeft="true"
        android:alignParentTop="true"//>

    <WebView android:id="@+id/webviewB"                     
        android:layout_width="fill_parent"                                
        android:layout_height="fill_parent"                     
        android:autoLink="web"                     
        android:textColor="@android:color/black"                      
        android:scrollbars="none"
        android:alignParentLeft="true"
        android:alignParentTop="true"/>

</RelativeLayout> 
```

然后在你的 onPageFinished

```
webviewB.setWebViewClient(new WebViewClient(){
    @Override
    public void onPageFinished(WebView view, String url{                               
        webviewA.setVisibility(View.GONE);
        webviewB.setVisibility(View.VISIBLE);
    }
}); 
```

这本质上是让您设置 WebView 本身而不是布局的可见性。在这种情况下，布局可以是一个在彼此之上，并且您正在使用它们的可见性来关闭和打开一个。

# c# - 实例化一个知道通用基类的泛型类型

> ID：11161709
> 
> 赞同：1
> 
> 时间：2012-06-22T18:01:11.793
> 
> 标签：c#

我试图完成一些看起来有点复杂但对我的情况很有帮助的事情，看起来像这样。

```
 public class CommonBaseClass {}
    public class Type1Object : CommonBaseClass {}
    public class Type2Object : CommonBaseClass {}
    public class Type3Object : CommonBaseClass {}

    public static Dictionary<string, Type> DataTypes = new Dictionary<string, Type>()
    {
        { "type1" , typeof(Type1Object) },
        { "type2" , typeof(Type2Object) },
        { "type3" , typeof(Type3Object) }
    };

    public static CommonBaseClass GetGenericObject(string type)
    {
        return new DataTypes[type]();     //How to instantiate generic class?
    } 
```

因为我可以保证所有构造函数都具有相同的签名，所以我知道这会起作用，只是不确定如何让编译器知道。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T18:04:11.810

我真的在这里看不到任何泛型，但看起来你想要：

```
return (CommonBaseClass) Activator.CreateInstance(DataTypes[type]); 
```

如果您需要使用参数化构造函数，请使用`Activator.CreateInstance`.

或者，考虑将您的字典更改为代表：

```
private static Dictionary<string, Func<CommonBaseClass>> DataTypes =
    new Dictionary<string, Func<CommonBaseClass>>
    {
        { "type1", () => new Type1Object() }
        { "type2", () => new Type2Object() },
        { "type3", () => new Type3Object() }
    };

public static CommonBaseClass GetGenericObject(string type)
{
    return DataTypes[type]();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T18:05:50.017

尝试这个：

```
public class Foo
{
   public static CommonBaseClass GetGenericObject<T>() where T : CommonBaseClass
   {
      return (CommonBaseClass)Activator.CreateInstance<T>();
   }

   public void Test()
   {
      CommonBaseClass b = GetGenericObject<Type1Object>();
   }
} 
```

使用泛型可以比使用类型映射的字典更好地解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T18:06:11.717

一个小测试应用程序：

```
namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            var dataTypes = new Dictionary<string, Type>
            {
                {"type1", typeof (Type1Object)},
                {"type2", typeof (Type2Object)},
                {"type3", typeof (Type3Object)}
            };

            Func<string, CommonBaseClass> GetGenericObject = t =>
            {
                return (CommonBaseClass)Activator.CreateInstance(dataTypes[t]);
            };

            var myGenericObject = GetGenericObject("type1");
        }
    }

    public class CommonBaseClass { }
    public class Type1Object : CommonBaseClass { }
    public class Type2Object : CommonBaseClass { }
    public class Type3Object : CommonBaseClass { }
} 
```

# apache - 如何在 Apache 上配置子域以指向另一个 Web 应用程序或目录；后端有tomcat

> ID：11161713
> 
> 赞同：0
> 
> 时间：2012-06-22T18:01:23.293
> 
> 标签：apache, tomcat, amazon-web-services, subdomain

我正在使用 AWS。我有一个 AMI，它有 apache、tomcat、mysql 堆栈。Apache 使用 ajp 与 tomcat 连接良好。如何在 apache 上配置子域，如 images.xyz.com（应指向 Ubuntu 服务器上的目录）、test.xyz.com（应指向在 tomcat 上运行的另一个 webapp）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:01:23.743

我真的很难弄清楚这一点，最后不得不求助于我的朋友。

修改文件 $APACHE/sites-available/default

```
<VirtualHost *:80>
   ServerName test.xyz.com
   ProxyPass / ajp://localhost:8009/test
   ProxyPassReverse / ajp://localhost:8009/
</VirtualHost>

<VirtualHost *:80>
   ServerName images.xyz.com
   DocumentRoot /usr/share/uploads
   <Directory "/usr/share/uploads">
        Options Includes FollowSymLinks MultiViews
        AllowOverride None
         Order allow,deny
      Allow from all
   </Directory>
</VirtualHost> 
```

# oop - OOP（面向对象编程）

> ID：11161721
> 
> 赞同：-1
> 
> 时间：2012-06-22T18:01:49.297
> 
> 标签：oop

我想开始学习OOP。知道如何开始吗？

谁能给我书籍或视频。

我还需要知道什么才能成为优秀的 WEB 开发人员。

我知道 HTML、CSS、Javascript (jQuery)、PHP、MySQL。

我会感谢你的帮助。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:08:18.393

查看四人帮网站。这是开始模式的好地方。

[http://www.blackwasp.co.uk/GofPatterns.aspx](http://www.blackwasp.co.uk/GofPatterns.aspx)

这个看起来也很有前途……

[http://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep](http://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-09T17:48:06.763

> 命令式语言使用排序、决策和重复作为解决问题的主要方法。创建变量以存储数据并进行处理。过程式编程始终使用自上而下的方法。当我们执行程序代码时，它从开始到底部结束。通过这个简单的代码片段，我们可以进行简单的算术运算。当您对事物有一组固定的操作并且随着代码的发展而主要添加新事物时，面向对象的语言是很好的。这可以通过添加实现现有方法的新类来完成，而现有类则不理会。在面向对象编程中，它在需要时调用对象，而不是一直获取它。这可以节省计算机的进程负载和内存。事件驱动编程总是使用事件触发功能。引入基于不同范式的编程语言的首要动机是提高程序员的生产力。范式可以被认为是一个哲学或理论框架。然后将该框架用作显示问题的新方法的基础。

* * *

**从这里开始：http:**
[//harmful.cat-v.org/software/OO_programming/](http://harmful.cat-v.org/software/OO_programming/)

# c++ - C++ String to Int 使用 StringStream 不准确

> ID：11161722
> 
> 赞同：0
> 
> 时间：2012-06-22T18:01:50.337
> 
> 标签：c++, string, int, stringstream

我正在尝试执行以下操作：

```
stringstream convert1(Model_str.substr(2, 12));
cout << (Model_str.substr(2, 12)) << endl; //output = 0.999999
convert1>>vertex1[VertexCounter];
cout << vertex1[VertexCounter] << endl; //output = 0 
```

将其放入我的数组时，是否有理由不精确到小数点后 6 位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:08:59.707

当您`int`从带有 的流中提取 时`>>`，只要有可以被视为 的一部分的字符，它就会读取`int`。整数不允许小数部分，因此`int`值中没有小数点。它`0`从流中读取 ，将其存储在您的`vertex1`数组元素中（假设`vertex1`是 的数组`int`），并将剩余的字符留在输入缓冲区中以供以后的读取操作使用。

如果要从流中读取浮点字符串，则*至少*需要读入支持浮点值的类型，例如`float`or `double`。你是否得到你期望的精确值是另一回事。您选择的目标类型可能无法代表您想要的确切值。

# php - 有没有办法在 PHP 中继承 ffmpeg_movie 类？

> ID：11161723
> 
> 赞同：1
> 
> 时间：2012-06-22T18:01:51.977
> 
> 标签：php, class, ffmpeg

当我运行以下代码时，我得到`B`了预期：

```
class A {
    public function __construct($file){}
}

class B extends A {
    public function __construct() {
        parent::__construct('test.flv');
    }
}

$b = new B();
print get_class($b); 
```

但是，请考虑对这段代码稍作修改的版本（这里`ffmpeg_movie`的类是[http://ffmpeg-php.sourceforge.net](http://ffmpeg-php.sourceforge.net)库的一部分）：

```
class B extends ffmpeg_movie {
    public function __construct() {
        parent::__construct('test.flv');
    }
}

$b = new B();
print get_class($b); 
```

它返回`ffmpeg_movie`而不是`B`. 此外，事实证明`B`在使用`$b`对象时无法访问类中定义的方法：

```
class B extends ffmpeg_movie {
    public function __construct() {
        parent::__construct('test.flv');
    }

    public function test() {
        print 'ok';
    }
}

$b = new B();
$b->test(); 
```

`Fatal error: Call to undefined method ffmpeg_movie::test() in .../test.php on line 13`

这里到底发生了什么，是否有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:17:55.867

I didn’t find out what was the origin of the problem. I managed to solve it though by not extending ffmpeg_movie class directly and instead using `__call`, `__get` and `__set` PHP magic methods to mimic inheritance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:16:07.413

这是 get_class() 的未定义行为，之前已经讨论过很多次。

自 PHP 4.3.0 起，常量**CLASS**存在并包含类名。

在有人提出解决方案之前，您可能会在 B 类中摆弄类似这样的东西：

```
public function whoAmI() {
    return __CLASS__;
} 
```

或者（来自谷歌搜索）也许

```
public function whoAmI() {
    return getClass($this);
} 
```

# mysql - 显示现在和 XX 天之间的 MySQL DOB 记录

> ID：11161728
> 
> 赞同：0
> 
> 时间：2012-06-22T18:02:14.410
> 
> 标签：mysql

我希望从我的 MySQL 数据库中提取记录，其中出生日期 (dob) 的 DAY 介于现在和 XX 天之间。例如，显示从现在到 15 天之间的所有生日。我正在使用下面的公式，直到今天的日期接近月底。所以，如果今天是 6 月 1 日，我想提取从现在到 15 天之间的所有生日......它工作正常。但如果今天是 6 月 25 日，则表示没有找到任何记录，因为 15 天的结束是在另一个月份。

```
SELECT contacts._id FROM `contacts` LEFT JOIN `groups` ON groups._id = "2"
WHERE (DAY(`dob`) BETWEEN DAY(CURDATE())
AND DAY(ADDDATE(CURDATE(), INTERVAL 15 DAY))
AND MONTH(`dob`) BETWEEN MONTH(CURDATE())
AND MONTH(ADDDATE(CURDATE(), INTERVAL15 DAY)) 
```

我也尝试过使用类似下面的代码，但它不适用于 DOB 数据，因为永远不会找到当前年份之前的年份。因此，年份必须忽略。

```
SELECT contacts._id FROM `contacts` LEFT JOIN `groups` ON groups._id = "2"
WHERE dob BETWEEN CURDATE() AND CURDATE() + 15 
```

日期在数据库中存储为 2012-08-27、1982-06-18、1963-07-26 等。我只对 MONTH-DAY 信息感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:10:29.797

由于您的日期已经以日期格式存储，只需将 15 天添加到当前日期，以便您找到介于该范围之间的结果：

```
SELECT * FROM table WHERE date_col BETWEEN CURDATE() AND DATE_ADD(CURDATE(), INTERVAL 15 DAY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:10:53.610

使用`DAYOFYEAR()`和`MAKEDATE()`：

```
SELECT
    a._id
FROM 
    contacts a
LEFT JOIN
    groups b ON b._id = 2
WHERE
    MAKEDATE(YEAR(NOW() + INTERVAL 15 DAY), DAYOFYEAR(a.dob)) BETWEEN NOW() AND NOW() + INTERVAL 15 DAY 
```

**解释：**

`MAKEDATE(YEAR(NOW() + INTERVAL 15 DAY), DAYOFYEAR(a.dob))`

这会根据出生日期（1 到 365 或 366）获取出生日期，但在当前年份（如果 15 天范围介于两年之间，则为下一年）。

说出生日期是`1986-07-04`。它会创建`2012-07-04`，并且从现在到 15 天之间的比较很简单。

# sitecore - 如何为 Sitecore 设备划定浏览器代理选择？

> ID：11161732
> 
> 赞同：2
> 
> 时间：2012-06-22T18:02:23.293
> 
> 标签：sitecore

我正在尝试为 Sitecore 设备中的浏览器代理字段输入多个浏览器代理类型，但我尝试过的分隔符都不起作用，有什么想法吗？

当我输入一个浏览器代理类型时，它可以工作，但是当我尝试输入多个时，例如：“Chrome，Firefox”，它就无法工作。

这些都是我尝试过的所有分隔符（[],/\|&;:)。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:39:02.850

开箱即用的 Sitecore 设备解析器尝试将用户代理与代码匹配：

```
return Request.UserAgent.IndexOf(agent, StringComparison.OrdinalIgnoreCase) >= 0; 
```

因此，如您所见，这里没有任何分隔符的位置。

您仍然可以轻松创建自己的设备解析器并将其插入到**<httpRequestBegin>**管道之前（或代替）**DeviceResolver**处理器

```
 <processor type="Sitecore.Pipelines.HttpRequest.DeviceResolver, Sitecore.Kernel"/> 
```

您需要在处理器中做的是找到合适的**DeviceItem**并将其设置为**Sitecore.Context.Device**

```
public class MyDeviceResolver : HttpRequestProcessor
{
    public override void Process(HttpRequestArgs args)
    {
        DeviceItem deviceItem = TryToMatchTheDevice();
        Context.Device = deviceItem;
    }
} 
```

# jquery - 同一页面上的两个 jQuery 按钮不起作用

> ID：11161734
> 
> 赞同：-2
> 
> 时间：2012-06-22T18:02:24.010
> 
> 标签：jquery

我在我的 SMOF 框架中添加了 jQuery 开/关按钮，但我在这里几乎没有错误[http://www.screenr.com/q8l8](http://www.screenr.com/q8l8)

[https://gist.github.com/2973585](https://gist.github.com/2973585) (jquery.iphone-switch)

(www) gist.github.com/2973599 (myjs.js)

感谢您的时间和所有建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:08:00.257

简单的！问题出在您的 HTML 中。您需要在两个输入元素上使用不同的 id。

# java - 使用 logback-classic/slf4j 配置默认警告/错误日志

> ID：11161737
> 
> 赞同：1
> 
> 时间：2012-06-22T18:02:32.207
> 
> 标签：java, slf4j, logback

我正在尝试配置 logback-classic 来处理以下情况：所有来自 my.class 且具有 debug 或更高级别的消息都应发送到 stdout appender。

并且所有警告级别或更高级别的错误消息**也**应该发送到 altout 附加程序，无论它们来自何处。但我似乎无法让它工作。

我已经尝试过这个配置，但问题是如果我将 additivity 设置为 true，那么所有记录到 stdout 的消息也会被发送到 altout，无论它们的警告级别如何。但是，如果我设置 additivity=false 则不会将来自 my.server 的消息发送到 altout，即使它们具有警告/错误级别。

```
<configuration>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>Stdout: %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
  </appender>

  <appender name="ALTOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>Altout: %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
  </appender>

  <logger name='my.class'  level='debug' additivity="false">
    <appender-ref ref="ALTOUT" />
  </logger>

  <root level="warn">
    <appender-ref ref="STDOUT" />
  </root>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:57:45.363

Your configuration seems to be correct, except that you inverted STDOUT and ALTOUT (as per your initial description). Setting `additivity="true"` will log messages to both STDOUT and ALTOUT using the specified level.

```
<configuration>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>Stdout: %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
  </appender>

  <appender name="ALTOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>Altout: %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
  </appender>

  <logger name="Flop"  level="error" additivity="true">
    <appender-ref ref="STDOUT" />
  </logger>

  <root level="warn">
    <appender-ref ref="ALTOUT" />
  </root>
</configuration> 
```

With the following Java classes:

```
public class Flop {

    private Logger log = LoggerFactory.getLogger(Flop.class);

    public void plop() {
        log.debug("Flop debug");
        log.warn("Flop warn");
        log.error("Flop error");
    }
}

public class Main {

    private Logger log = LoggerFactory.getLogger(Main.class);

    public void prout() {
        log.debug("Main debug");
        log.warn("Main warn");
        log.error("Main error");
    }
    public static void main(String[] args) {
        new Main().prout();
        new Flop().plop();
    }
} 
```

The result will be:

```
Altout: 14:55:26.288 [main] WARN  com.excilys.Main - Main warn
Altout: 14:55:26.292 [main] ERROR com.excilys.Main - Main error
Stdout: 14:55:26.292 [main] ERROR com.excilys.Flop - Flop error
Altout: 14:55:26.292 [main] ERROR com.excilys.Flop - Flop error 
```

I.e. Main logs warn and above on STDOUT and Flop logs error and above on both STDOUT/ALTOUT. Setting `additivity="false"` will cause Flop to log only in STDOUT (but that's not what you want, as I understand from your question).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:53:44.777

使用 ALTOUT 上的[http://logback.qos.ch/manual/filters.html#thresholdFilter](http://logback.qos.ch/manual/filters.html#thresholdFilter)过滤所有低于警告的事件。

# r - 如何为 xyplot 中的每个面板指定不同的 ylim 值？

> ID：11161739
> 
> 赞同：3
> 
> 时间：2012-06-22T18:02:33.490
> 
> 标签：r, lattice

我试图为 xyplot 中每个面板的 y 轴指定不同的限制，但结果与不同的数据子集不一致。

当我用两个不同的分组变量定义面板切片并且一个或多个子组没有数据值时，就会出现问题。

似乎 xyplot 正在跳过没有数据的面板的轴准备。

这是一个例子：

```
library(lattice)

df1<-data.frame(
          x=rep(1, 4),y=rep(1, 4), cat1=c('A','B','A','B'), cat2=c('1','1','2','2'))
df2<-data.frame(
          x=rep(1, 3),y=rep(1, 3), cat1=c('A','B','A'), cat2=c('1','2','1'))

myFun <-  function(df)  {
  print(
      xyplot(y ~ x | cat1 * cat2,
      data=df,
      scales=list(
          y=list(
              relation='free', 
              limits=rep(list(c(0,10), c(-100,10)) , 2)))
  ) )
}

myFun(df1)
myFun(df2) 
```

df1 有每个子组的可用数据，而 df2 没有。当我调用 myFun(df1) 时，它按预期工作，但 myFun(df2) 会引发以下错误。

```
>   myFun(df2)
Warning message:
In limitsFromLimitlist(have.lim = have.ylim, lim = ylim, relation = y.relation,  :
  number of items to replace is not a multiple of replacement length 
```

我希望我的函数适用于原始数据框的任何子集，因此一个或多个子组很可能没有数据值。

如果子组没有数据值，我仍然希望看到具有正确限制的 y 轴。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:50:35.430

由于该问题仅发生在没有数据的因子组合中，因此您可以通过为每个因子组合“补充”数据来回避它。只要附加点位于绘制区域之外，它们的唯一作用就是确保触发设置适当 y 限制所需的面板和预面板准备工作。

这很有效，并且比使用`prepanel.default.xyplot()`、`prepanel.null()`、`limits.and.aspect()`和`limitsFromLimitList()`任何其他函数来设置没有数据的面板的限制更简单！

这是一个例子：

```
## Create a supplementary data frame with one data point for each factor level
dummy <- with(df2, expand.grid(cat1=levels(cat1), cat2=levels(cat2)))
dummy <- data.frame(x=1, y=1e6, dummy)

## Append it to your data frame
df2 <- rbind(df2, dummy)

## Now try plotting it
myFun(df2) 
```

![在此处输入图像描述](../Images/8d474c834f0c80aac22be8c9dd0bc18a.png)

# php - 尝试在 PHP 中进行 json_encode

> ID：11161744
> 
> 赞同：0
> 
> 时间：2012-06-22T18:02:44.963
> 
> 标签：php, json

这是我的小脚本

```
$item="Inception";

$query="SELECT * FROM items WHERE item = '{$item}' LIMIT 1";
$result=mysql_query($query);
while ($row = mysql_fetch_array($result)) { 
    $item_id = $row['items_id'];
}   

$sql="SELECT AVG(rating) AS AverageRating FROM ratings WHERE item_id = '{$item_id}'";
$result=mysql_query($sql);
$row=mysql_fetch_array($result);

print(json_encode($row)); 
```

输出是这样的：

```
 {"0":"4.5","AverageRating":"4.5"} 
```

我的问题是：行“0”来自哪里？这是正常的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:04:37.707

这是正常的。`mysql_fetch_array`返回具有数字索引和关联索引的行。这不是 O，而是 0，表示第一个返回的列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:05:55.260

mysql_fetch_array 返回一个字符串关联和一个数字关联。单独尝试 mysql_fetch_assoc 或 mysql_fetch_row。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:07:14.807

[请参阅mysql_fetch_array](http://www.php.net/manual/en/function.mysql-fetch-array.php)的文档：默认情况下，它返回一个包含数字和字符串索引的数组。如果您只想要一个关联数组，请使用[mysql_fetch_assoc](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)或添加 MYSQL_ASSOC 作为 mysql_fetch_array 的第二个参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:07:39.537

发生这种情况是因为，正如[文档](http://php.net/manual/en/function.mysql-fetch-array.php)所述，默认情况下`mysql_fetch_array`会返回关联数组和数字数组。如果您只想要关联结果，您可以传递一个额外的参数，如下所示：

```
$row = mysql_fetch_array($result, MYSQL_ASSOC); 
```

或者，如果您只想对数组进行数字索引：

```
$row = mysql_fetch_array($result, MYSQL_NUM); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T18:09:32.043

只需更换

```
$row = mysql_fetch_array($result); 
```

和

```
$row = mysql_fetch_array($result, MYSQL_ASSOC); 
```

零将消失。

您可以选择 3 种结果类型。**MYSQL_NUM**将返回一个数值数组，**MYSQL_ASSOC**将返回一个关联数组，这也是您似乎需要的，而**MYSQL_BOTH**是默认值并返回两者。

# python - 如何使用 python 访问 MTP USB 设备

> ID：11161747
> 
> 赞同：25
> 
> 时间：2012-06-22T18:03:03.277
> 
> 标签：python, mtp

如何在 python 中通过 USB 电缆使用 MTP 读取和写入我的 Galaxy Nexus 手机？我在 Windows 7 电脑上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-03T20:03:39.750

我也在寻找同样的东西。似乎有用于跨平台的[pymtp](https://pypi.python.org/pypi/PyMTP)和用于 Windows的[wmdlib 。](https://pypi.python.org/pypi/wmdlib/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T23:13:18.643

一种方法是安装 ADB（Android 调试桥，SDK 的一部分）并将其作为 python 的子进程启动。除其他外，ADB 可用于读取或写入 Android 设备。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-11T13:58:59.163

Calibre 是一种流行的电子书管理程序，具有 python 和 C 源代码，可通过 MTP 连接传输文件。 [http://code.google.com/p/calibre-ebook/downloads/list](http://code.google.com/p/calibre-ebook/downloads/list)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-10-03T13:12:33.140

只需在手机和计算机之间连接一根**USB数据线即可。**

可能需要在手机的设置菜单中启用**MTP**传输。不同的安卓版本和不同的手机型号，菜单选择位置可能会有所不同。尝试谷歌搜索“galaxy nexus enable mtp”。确保在搜索中包含您的安卓和手机版本。

确保它是优质的**USB**电缆。质量差的电缆无法建立良好的连接，因此无法可靠工作。

在我的手机和笔记本电脑之间连接一条 USB 电缆后，我的桌面上立即出现一个文件管理对话框，显示手机内部存储和 SD 卡。这使我可以将文件直接传输到手机 SD 存储（**Linux Mint** <-> **LG Android 版本 5.1**）

请注意，也可以使用蓝牙传输文件。

建立连接后，您需要找到设备名称。然后可以使用标准的 python 文件结构打开设备`popen()`，例如，等等。

# sql - 使用join在oracle语句中更新sql

> ID：11161748
> 
> 赞同：0
> 
> 时间：2012-06-22T18:03:06.210
> 
> 标签：sql

请问这个语句中的错误在哪里，我想用表2的field2更新表1的field1，在字段3上加入两个表

```
UPDATE 
     (SELECT IP_ANAGRAFICACOMPLESSO.id_complesso, COORDOK6.AZIENDA , IP_ANAGRAFICACOMPLESSO.COORD_GB_E,  COORDOK6.WGSE 
      FROM ip_anagraficacomplesso 
      INNER JOIN COORDOK6  ON IP_ANAGRAFICACOMPLESSO.ID_COMPLESSO = COORDOK6.AZIENDA )
SET IP_ANAGRAFICACOMPLESSO.COORD_GB_E = COORDOK6.WGSE 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:09:04.917

不确定您使用的是哪种 SQL，但至少在 TSQL 中您需要重新排列它，以便`SELECT`在`SET`

```
UPDATE IP
SET IP.COORD_GB_E = C.WGSE
FROM IP_ANAGRAFLICACOMPLESSO IP
    INNER JOIN COORDOK6 C ON IP.ID_COMPLESSO = C.AZIENDA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T02:11:28.947

要在 ORACLE 中执行此类`UPDATE`操作，您的查询应如下所示。永远记得创建适当的联接，否则您可能最终会更新错误的记录。

```
 update DAILY D
  set
    (
      D.DEPARTMENT_CODE,
      D.COSTCENTRE_CODE,
      D.USER_ID
    )
    =
    (select distinct DEPT.DEPT_CODE,
      DEPT.CENTRE_CODE,
      PRT.EMP_ID
    from EMP PRT
    inner join DEPT  DEPT
    on DEPT.DEPARTMENT_ID = PRT.DEPARTMENT_ID
    where PRT.LOGIN_ID     = D.LOGIN_ID
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T03:01:17.517

根据这个 URL，语法是：

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/update_statement.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/update_statement.htm)

（ORACLE 提供的语法示例）：

```
 UPDATE employee_temp SET (first_name, last_name) =
  (SELECT first_name, last_name FROM employees
   WHERE employee_id = employee_temp.employee_id); 
```

这将是这样的：您只能从 SELECT 子查询中选择一列 - 确保子查询对于您的列和表名是有效的 INNER JOIN：

```
 UPDATE  COORD_GB_E
 SET     IP_ANAGRAFICACOMPLESSO =

 (SELECT COORDOK6.WGSE 
  FROM   ip_anagraficacomplesso INNER JOIN COORDOK6  
  ON     IP_ANAGRAFICACOMPLESSO.ID_COMPLESSO = COORDOK6.AZIENDA ); 
```

该文档说明是否有一个列正在更新以省略更新列周围的括号。

# sql-server-2008 - 使用 FTP 进行 SQL Server 复制

> ID：11161749
> 
> 赞同：4
> 
> 时间：2012-06-22T18:03:30.077
> 
> 标签：sql-server-2008, replication, publisher, subscriber

我有： SQL A - 发布者 (SQL 2008 R2 Dev) SQL B - 订阅者 (SQL 2008 R2 Standard)

SQL A 和 SQL B 在不同的网络上，不允许直接连接。

我在 SQL A 上启用 FTP 发布。在 SQL B 上创建订阅以从 FTP 获取文件。

但是由于某种原因，当我在 SQL B 上运行代理时，它给出了一个错误，无法连接到 SQL A。嗯，嗯？当然因为是FTP复制，所以没有连接。

我究竟做错了什么？

```
-- THIS IS ON PUBLISHER:
-- Enabling the replication database
use master
exec sp_replicationdboption @dbname = N'Publisher_DB', @optname = N'publish', @value = N'true'
GO

exec [Publisher_DB].sys.sp_addlogreader_agent @job_login = null, @job_password = null, @publisher_security_mode = 1
GO
exec [Publisher_DB].sys.sp_addqreader_agent @job_login = null, @job_password = null, @frompublisher = 1
GO
-- Adding the snapshot publication
use [Publisher_DB]
exec sp_addpublication @publication = N'Test_S', @description = N'Snapshot publication of database ''Publisher_DB'' from Publisher ''SQL-A''.', @sync_method = N'native', @retention = 0, @allow_push = N'true', @allow_pull = N'true', @allow_anonymous = N'true', @enabled_for_internet = N'true', @snapshot_in_defaultfolder = N'false', @alt_snapshot_folder = N'\\SQL-A\D$\SqlReplica', @compress_snapshot = N'true', @ftp_address = N'SQL-A', @ftp_port = 21, @ftp_subdirectory = N'\\SQL-A\D$\SqlReplica', @ftp_login = N'anonymous', @allow_subscription_copy = N'true', @add_to_active_directory = N'false', @repl_freq = N'snapshot', @status = N'active', @independent_agent = N'true', @immediate_sync = N'true', @allow_sync_tran = N'false', @autogen_sync_procs = N'false', @allow_queued_tran = N'false', @allow_dts = N'false', @replicate_ddl = 1
GO    

exec sp_addpublication_snapshot @publication = N'Test_S', @frequency_type = 1, @frequency_interval = 0, @frequency_relative_interval = 0, @frequency_recurrence_factor = 0, @frequency_subday = 0, @frequency_subday_interval = 0, @active_start_time_of_day = 0, @active_end_time_of_day = 235959, @active_start_date = 0, @active_end_date = 0, @job_login = null, @job_password = null, @publisher_security_mode = 1
exec sp_grant_publication_access @publication = N'Test_S', @login = N'sa'
GO
exec sp_grant_publication_access @publication = N'Test_S', @login = N'NT AUTHORITY\SYSTEM'
GO
exec sp_grant_publication_access @publication = N'Test_S', @login = N'NT AUTHORITY\NETWORK SERVICE'
GO
exec sp_grant_publication_access @publication = N'Test_S', @login = N'DOMAIN\Developers & Test Admins'
GO
exec sp_grant_publication_access @publication = N'Test_S', @login = N'distributor_admin'
GO

-- Adding the snapshot articles
use [Publisher_DB]
exec sp_addarticle @publication = N'Test_S', @article = N'test_table', @source_owner = N'dbo', @source_object = N'test_table', @type = N'logbased', @description = N'', @creation_script = N'', @pre_creation_cmd = N'drop', @schema_option = 0x000000000803509D, @identityrangemanagementoption = N'none', @destination_table = N'test_table', @destination_owner = N'dbo', @status = 24, @vertical_partition = N'false', @ins_cmd = N'SQL', @del_cmd = N'SQL', @upd_cmd = N'SQL'
GO

-- Adding the snapshot subscriptions
use [Publisher_DB]
exec sp_addsubscription @publication = N'Test_S', @subscriber = N'SQL-B', @destination_db = N'Publisher_DB', @subscription_type = N'Pull', @sync_type = N'automatic', @article = N'all', @update_mode = N'read only', @subscriber_type = 0
GO

-----------------BEGIN: Script to be run at Publisher 'SQL-A'---------------
use [Publisher_DB]
exec sp_addsubscription @publication = N'Test_S', @subscriber = N'SQL-B', @destination_db = N'Publisher_DB', @sync_type = N'Automatic', @subscription_type = N'pull', @update_mode = N'read only'
GO
-----------------END: Script to be run at Publisher 'SQL-A'-----------------       

-----------------BEGIN: Script to be run at Subscriber 'SQL-A'--------------
use [Publisher_DB]
exec sp_addpullsubscription @publisher = N'SQL-A', @publication = N'Test_S', @publisher_db = N'Publisher_DB', @independent_agent = N'True', @subscription_type = N'pull', @description = N'', @update_mode = N'read only', @immediate_sync = 1

exec sp_addpullsubscription_agent @publisher = N'SQL-A', @publisher_db = N'Publisher_DB', @publication = N'Test_S', @distributor = N'SQL-B', @distributor_security_mode = 1, @distributor_login = N'', @distributor_password = null, @enabled_for_syncmgr = N'False', @frequency_type = 64, @frequency_interval = 0, @frequency_relative_interval = 0, @frequency_recurrence_factor = 0, @frequency_subday = 0, @frequency_subday_interval = 0, @active_start_time_of_day = 0, @active_end_time_of_day = 235959, @active_start_date = 20120622, @active_end_date = 99991231, @alt_snapshot_folder = N'\\SQL-B\D$\SqlReplica\ftp', @working_directory = N'\\SQL-B\D$\SqlReplica\ftp', @use_ftp = N'False', @job_login = null, @job_password = null, @publication_type = 0
GO
-----------------END: Script to be run at Subscriber 'SQL-A'--------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:05:09.813

`添加

```
@ftp_address = N'SQL-A', 
@ftp_port = 21, 
@ftp_subdirectory = N'\SQL-A\D$\SqlReplica', 
@ftp_login = N'anonymous' 
```

到`sp_addpullsubscription_agent`命令并更改`@use_ftp`为`N'True'`

# excel - 如何从Excel工作表的多列中选择一列的单元格

> ID：11161759
> 
> 赞同：0
> 
> 时间：2012-06-22T18:04:04.290
> 
> 标签：excel, random, sampling

我想知道是否有人知道如何从 Excel 工作表的多列中选择一列的单元格？例子 ：

ABC 0 1 2

我希望在 (0-2) 之间随机选择一个数字 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:07:17.553

> 我希望在 (0-2) 之间随机选择一个数字

如果您正在寻找 Excel 公式，那么您可以使用

```
=RANDBETWEEN(0,2) 
```

如果您正在尝试`A1 to C2`从那时起的组合，您可以试试这个。省略`0`，因为没有单元格范围是`A0`, `B0`,`C0`

```
=CHAR(RANDBETWEEN(65,67)) & RANDBETWEEN(1,2) 
```

此公式将为您提供来自`A1`, `A2`, `B1`, `B2`, `C1`, 的结果`C2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:14:26.737

=RAND() * (b−a) + a 进行随机化，与 =RANDBETWEEN(a,b) 一样

您需要的另一件事是 =CONCATENATE( text1, text2, ... text255 )

所以，你要做的就是 =concatenate('a',randbetween(0,2)) 会给你一个 A 列中的随机单元格。如果是跨列，则对 b、c 执行此操作。如果是随机字母 2，我需要多看一点。

您现在只需要选择该单元格。我确定有一种方法可以从该内容访问该单元格。我正在查找[http://excel.bigresource.com/Choose-Return-Cell-Based-On-Text-In-Another-JQVjkhos.html#oYwiAspH](http://excel.bigresource.com/Choose-Return-Cell-Based-On-Text-In-Another-JQVjkhos.html#oYwiAspH) 并将在一秒钟内进行编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:35:57.100

通常要从任何范围内随机选择一个单元格，您可以使用此公式

`=INDEX(range,ROWS(range)*RAND()+1,COLUMNS(range)*RAND()+1)`

这将适用于任何大小的连续范围

# node.js - 如何使用 node.js 将较少的 css 编译到另一个目录中？

> ID：11161761
> 
> 赞同：0
> 
> 时间：2012-06-22T18:04:18.260
> 
> 标签：node.js, express, less

我的目录`/public/less`包含我所有的 less 文件。

如何配置 node.js 将这些文件编译到另一个目录？例如`/public/compiled-stylesheets`

我的默认快速配置是：

```
app.configure(function () {
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.compiler({ src:__dirname + '/public', enable:['less']}));
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:58:50.040

编译完成后你不能总是做一个文件复制/移动吗？

[https://gist.github.com/992478](https://gist.github.com/992478)

# c# - 为什么 Toad 喜欢我的 Like 查询，但 C# 不喜欢我的 Like 查询？

> ID：11161764
> 
> 赞同：2
> 
> 时间：2012-06-22T18:04:32.873
> 
> 标签：c#, sql, oracle, sql-like

如果我在 Toad 中运行此查询：

```
SELECT BANDID, BANDNAME
FROM WOODSTOCK
WHERE BANDNAME LIKE '%THE%' 
```

..它只是花花公子，并返回一堆行。但是，代码中大概是等价的：

```
const string sql = @"SELECT BANDID, BANDNAME
            FROM WOODSTOCK
            WHERE BANDNAME LIKE '%:BANDNAMEPORTION%'";
. . .
ocmd.Parameters.Add("BANDNAMEPORTION", BandNamePortion);
. . . 
```

...不返回任何记录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T18:07:21.233

好吧，“大概等价”显然不等价，因为它不起作用。您的参数名称在引号内，因此不会被视为参数。我怀疑你想要：

```
const string sql = @"SELECT BANDID, BANDNAME
            FROM WOODSTOCK
            WHERE BANDNAME LIKE :BANDNAMEPORTION";
. . .
ocmd.Parameters.Add("BANDNAMEPORTION", "%" + BandNamePortion + "%"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T18:10:37.940

另一种选择是

```
const string sql = @"SELECT BANDID, BANDNAME
        FROM WOODSTOCK
        WHERE BANDNAME LIKE '%' + @BANDNAMEPORTION + '%';";
. . .
ocmd.Parameters.Add("BANDNAMEPORTION", BandNamePortion); 
```

# visual-studio-2010 - 在 Visual Studio 设计器中添加右键单击文本框用户控件？

> ID：11161769
> 
> 赞同：4
> 
> 时间：2012-06-22T18:04:50.500
> 
> 标签：visual-studio-2010, events, visual-studio-designer

我有一个文本框用户控件，当我双击时，它会将`Text_Changed`监听方法添加到我可以填写的代码中。

我如何让它添加我的`Right_Click`听力方法或`Left_Click`听力方法或`Double_Click`听力方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:24:34.357

右键单击文本框并打开属性窗口。在属性中，点击事件（如下图），双击`MouseDown`事件。

![在此处输入图像描述](../Images/29df007a473ad9864b6bbd7707b508df.png)

这将创建方法。然后输入以下代码：

```
private void TextBox1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        // do something
    }
} 
```

对于左键单击，您可以使用相同的方法，也可以添加`MouceClick`仅在左键单击时触发的事件。

如果你需要这个来改变`ContextMenu`然后检查这个：[Add ContextMenu to TextBox](http://www.java2s.com/Tutorial/CSharp/0460__GUI-Windows-Forms/AddContextMenutoTextBox.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:56:49.880

在 Visual Studio 中，可以通过单击“属性”窗口顶部的闪电图标（事件）来访问所有事件。

您可以双击事件的名称来创建新的处理程序，或从下拉列表中选择现有的处理程序。

# php - zend https 重定向所有请求

> ID：11161771
> 
> 赞同：0
> 
> 时间：2012-06-22T18:04:58.003
> 
> 标签：php, zend-framework, .htaccess, https, apache2

我想将所有请求重定向到我的 zend Web 应用程序到 https url 我在 .htaccess 文件中尝试过这个并且得到一个无限重定向

```
RewriteEngine On

RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

有任何想法吗？我已经尝试了几件事，但到目前为止没有一个能始终如一地工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:41:09.490

如果我复制您的规则，我似乎不会以无限重定向结束，它工作正常。

这是我用来强制 https 的 ZF 插件，而不是使用`.htaccess`. 你可以试试这个，看看它是否有效：

```
<?php

class Application_Plugin_SslCheck extends Zend_Controller_Plugin_Abstract
{
    public function routeShutdown(Zend_Controller_Request_Abstract $request)
    {
        $sslModules = array('admin', 'default'); // modules that require ssl
        $module     = $request->getModuleName();

        if (in_array($module, $sslModules)) { // require SSL
            if (APPLICATION_ENV == 'production') { // only require ssl in production mode
                if (!isset($_SERVER['HTTPS']) || !$_SERVER['HTTPS']) { // if request is not secure, redirect to secure url
                    $request    = $this->getRequest();

                    $url        = 'https://'
                                . $_SERVER['HTTP_HOST']
                                . $request->getRequestUri();

                    $redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('redirector');
                    $redirector->gotoUrl($url);
                }
            }
        }
    }
} 
```

要运行它，只需在引导程序中将其注册到前端控制器：

```
Zend_Controller_Front::getInstance()->registerPlugin(new Application_Plugin_SslCheck()); 
```

# vim - 如何配置 Vim WindowManager 自动聚焦文件窗口？

> ID：11161772
> 
> 赞同：0
> 
> 时间：2012-06-22T18:04:58.457
> 
> 标签：vim

如何将 WinManager 配置为自动执行此操作：

*   当所有文件都关闭时，退出 vim。
*   当一个文件（或缓冲区）关闭时，显示下一个。
*   vim 启动时，焦点转到文档窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:43:26.663

来自 WinManager 文档：（使用[脚本 #1440](http://www.vim.org/scripts/script.php?script_id=1440)，从[脚本 #95](http://www.vim.org/scripts/script.php?script_id=95)更新）

```
g:persistentBehaviour: if set to 0, then as soon as you quit all the files      
  and only the explorer windows are the ones left, vim will quit. the         
  default is 1, which means that the explorer windows persist even if         
  they are the only ones visible.

let g:persistentBehaviour=0 
```

哪个应该解决您的第一个问题。

至于其他的，我承认我很快扫描了 3500 多行 vimL，没有发现任何让我印象深刻的对其他问题的调整，而无需更深入地了解代码和作者是如何做事的。

# sql-server - SQL Server 速度很慢

> ID：11161773
> 
> 赞同：0
> 
> 时间：2012-06-22T18:05:05.477
> 
> 标签：sql-server, optimization, common-table-expression, with-statement

我正在使用 SQL Server 2008 并尝试运行：

```
WITH results (Row, code, p_name, phone, intake_date, shipped_status, shipped_date,
 event_status, intake_status, slsperson, referral_source, dr )
AS
( 
    SELECT ROW_NUMBER() OVER (ORDER BY intake_date ASC)AS Row, code, p_name, phone, 
    intake_date, shipped_status, shipped_date, event_status, intake_status, slsperson, 
    referral_source, dr
    FROM db.schema.sales_referral_list('2012-05-1', '2012-06-1', 'CXJ7')
)
SELECT Row, code as p_id, p_name, phone, intake_status, intake_date, shipped_status,
 shipped_date, event_status, slsperson, referral_source, dr 
FROM results 
WHERE Row BETWEEN 0 AND 50 ORDER BY Row 
```

当我在没有 With AS 语句的情况下运行它（即只是内部选择语句）时，它会在大约 1 秒内执行。当我使用用于在网站上进行分页的 With 语句时，执行时间超过 15 秒。我可以做一些优化来提高这个语句的性能吗？（sales_referral_list是一个表值函数，需要3个参数。它一直在1秒内运行，所以我比较确定不是问题）。谢谢你提供的所有帮助。

==========更新=========

表值函数如下： 表值函数如下：

```
 (   
-- Add the parameters for the function here
@START DATE,
@END DATE,
@SLSCODE VARCHAR(4)

 )
RETURNS TABLE 
AS
RETURN 
(
-- Add the SELECT statement with parameter references here
    SELECT 
    A.code,
    B.last+', '+B.first AS p_name,
    B.phoneday AS Phone,
    B.slcode,
    B.regdate as intake_date,
    CASE
        WHEN CAST(C.newdate AS  DATE) is not null THEN 'SHIPPED'
        WHEN B.udef1='03' THEN 'NON-SERV'
        ELSE 'NOT SHIPPED'
    END as shipped_status,
    CASE
        WHEN CAST(C.newdate AS  DATE)='1900-01-01' THEN ''
        ELSE CAST(C.newdate AS  DATE)
    END as shipped_date,
    CASE
        WHEN E.status='1' THEN 'ACTIVE'
        WHEN E.status='2' THEN 'COMPLETE'
        WHEN E.status='0' THEN 'DELETED'
        ELSE 'NO EVENT'
    END event_status,
    F.file_status as intake_status,
    D.employee as slsperson,
    B.rfname as referral_source,
    B.dcname as doctor
FROM event.dbo.distinct_account() a
LEFT OUTER JOIN event.dbo.patient_dg() B ON A.code=B.code
LEFT OUTER JOIN event.dbo.newdate() c on a.code=c.ACCOUNT
LEFT OUTER JOIN event.dbo.employee D ON B.slname=D.employee
LEFT OUTER JOIN(
    SELECT
        id,
        patient_id,
        status
    FROM event.dbo.event A
    WHERE A.task_id IN ('WF','WT')
    group by id,patient_id,status
    ) E ON A.code=E.patient_id
LEFT OUTER  JOIN event.dbo.taskWF F ON E.id=F.event_id
    WHERE b.regdate>=@START
AND b.regdate<=@END
AND slcode=@SLSCODE
) 
```

正常返回的结果介于 100 - 500 条记录之间。表值函数 patient_dg 大约有 60,000 条记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:36:32.863

您可以尝试将结果存储到临时表中（这已经以类似的方式隐式发生在您的查询中）。如果您可以保留会话从而保留#Results 临时表，那么您可以执行具有不同行范围的语句。填充#Results 后会很快。

我忘了说，我猜到了字段的数据类型。您可能需要更改其中的一些。准确匹配类型也有助于提高性能，这就是我所听到的。

```
CREATE TABLE #WholeResultSet
(
    Id INT NOT NULL PRIMARY KEY,
    [Row] INT NOT NULL,
    p_id INT NOT NULL,
    p_name VARCHAR(MAX) NOT NULL,
    phone VARCHAR(MAX) NOT NULL,
    intake_date DATETIME NOT NULL,
    shipped_status VARCHAR(MAX) NOT NULL,
    shipped_date DATETIME NOT NULL,
    event_status VARCHAR(MAX) NOT NULL,
    intake_status VARCHAR(MAX) NOT NULL,
    slsperson VARCHAR(MAX) NOT NULL,
    referral_source VARCHAR(MAX) NOT NULL,
    dr VARCHAR(MAX)  NOT NULL
) ;

INSERT INTO #WholeResultSet
(
    [Row], p_id, p_name, phone, intake_status, intake_date, shipped_status,
    shipped_date, event_status, slsperson, referral_source, dr 
)
SELECT
    ROW_NUMBER() OVER (ORDER BY intake_date ASC),
    code, p_name, phone,  intake_date, shipped_status,
    shipped_date, event_status, intake_status, slsperson, 
    referral_source, dr
FROM db.schema.sales_referral_list('2012-05-1', '2012-06-1', 'CXJ7') ;

SELECT * FROM #WholeResultSet WHERE Row BETWEEN 0 AND 50 ORDER BY Rownumber ; 
```

# python - pip：不一致的权限问题

> ID：11161776
> 
> 赞同：16
> 
> 时间：2012-06-22T18:05:13.657
> 
> 标签：python, centos, pip, python-module

通过`sudo pip-python`（CentOS 6 软件包：）安装软件包时`python-pip-0.8-1.el6.noarch`，我有时会遇到权限问题，因为已安装的软件包只能由 root 读取。

重新安装一到两次通常可以解决问题。有没有人经历过这个？或者任何人都可以提出任何故障排除步骤来确定原因吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T11:27:36.970

当您使用 运行命令`sudo`时，它将保留用户`umask`。`pip`只是安装文件，它不会更改访问权限，因此您最终会得到具有与当前用户的 umask 一致的访问权限设置的文件，这可能是所有者可读的 (0077)，因此只能由 root 读取。

这意味着您可以`umask 0022`在运行之前将 umask 设置为合理的值`sudo pip install`。或使用`sudo su`以默认设置打开根 shell，然后`pip install`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T13:10:55.673

如果使用 sudo 执行 pip，您可能需要 sudo 的 -H 标志

-H, --set-home 将 HOME 变量设置为目标用户的主目录

例如

`sudo -H pip install virtualenv`

# jquery - 为 ColorBox 灯箱中的图像添加标题的简单方法？

> ID：11161777
> 
> 赞同：2
> 
> 时间：2012-06-22T18:05:17.707
> 
> 标签：jquery, colorbox

就像示例一样，我有一个非常简单的 ColorBox 画廊设置。组名与其类相同的简单标签。我想要一种简单的方法来为每张图片显示标题或标题。理想情况下只是取自图像的 alt 属性或类似的东西。我找到了一些涉及调用 title() 函数的解决方案，但我不明白如何实现它们。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T17:14:08.967

插件提供了最简单的方法。只需将您的文本放在相关图像的 TITLE 属性中即可。这是插件演示页面的代码片段：

```
<a class="group1 cboxElement" href="../content/ohoopee1.jpg" title="Me and my grandfather on the Ohoopee.">Grouped Photo 1</a> 
```

# javascript - jQuery，使元素以不同的速度滚动

> ID：11161787
> 
> 赞同：1
> 
> 时间：2012-06-22T18:06:10.000
> 
> 标签：javascript, jquery, css, html

我试图弄清楚所有这些视差滚动是如何工作的，没有什么大不了的，只是微妙的元素，我把 dave gamache 的网站拆开并用它来亲眼看看。

然而，当窗口滚动时，我似乎无法让我的内部标题失去透明度。也不让背景图像滚动。

我创建了一个小提琴来向您展示我正在使用什么，我认为它与我的 windowScroll var 只是我不确定，任何帮助都非常感谢！

[http://jsfiddle.net/jzmQJ/](http://jsfiddle.net/jzmQJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:34:59.073

您需要处理滚动事件并将您编写的用于实现视差效果的代码放入事件处理程序中。

因为它是修改位置的代码，`$artHeaderInner`并且仅在触发事件`$artHeader`时运行一次。`ready`为了达到您想要的效果，您需要在每次滚动位置更改时运行该代码。

这可能会让你开始：

[http://jsfiddle.net/LtrPV/1/](http://jsfiddle.net/LtrPV/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T09:49:59.630

我建议使用 JavaScript 库，例如 Skrollr.js。

您将完美控制动画和时间。

查看这两个教程以帮助您入门：

*   [简单的视差滚动教程](http://ihatetomatoes.net/simple-parallax-scrolling-tutorial/)
*   [如何创建视差滚动网站](http://ihatetomatoes.net/how-to-create-a-parallax-scrolling-website/)

# php - 无法使用带有 curlopt_stderr 和 curlopt_file 的 PHP cURL 写入文件

> ID：11161788
> 
> 赞同：5
> 
> 时间：2012-06-22T18:06:10.803
> 
> 标签：php, logging, curl

我正在尝试将来自 cURL 命中的信息记录到日志文件中，但我无法这样做，我使用 wamp 运行 Windows 并完全控制了机器中的所有用户，并且调用 cURL 的日志和 php 文件在此测试的相同目录。我使用了以下代码：

```
$session = curl_init();
$logfh = fopen("my_log.log", 'a+');
if ($logfh) {
  print "Opened the log file without errors";
}
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
// Optional settings for debugging
curl_setopt($session, CURLOPT_VERBOSE, true);
curl_setopt($session, CURLOPT_FILE, $logfh); // logs curl messages
// curl_setopt($session, CURLOPT_STDERR, $logfh); // logs curl messages
curl_exec($session);
curl_close($session); 
```

日志文件打开时没有错误，我的 cURL 返回成功，但没有任何内容记录到文件中。我使用过`CURLOPT_FILE`，`CURLOPT_STDERR`或者，但都没有帮助，也不确定我是否在这里出错了。任何有关调试的建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:50:36.077

注意：如果您尝试 curl 的 URL 重定向到另一个 URL，则将输出写入文件将失败。

请确保您还添加以下行 -

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); 
```

另外作为旁注，请确保关闭文件`fclose()`以确保文件完整。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T20:39:23.693

如果您已添加`fclose()`，并进行了上述评论中列出的各种“小修复”，但仍然无法正常工作......那么我怀疑您看到的选项相互冲突：

*   `CURLOPT_RETURNTRANSFER`告诉 curl 返回响应作为调用的返回*值*`curl_exec()`。

*   `CURLOPT_FILE`并`CURLOPT_STDERR`告诉 curl 将响应（或错误输出）写入指定的文件句柄。

似乎这些可能是相互排斥的。我建议您使用其中一种，但不要同时使用：

要么使用`CURLOPT_RETURNTRANSFER`，像这样：

```
$session = curl_init();
$logfh = fopen("my_log.log", 'a+');
if ($logfh !== false) {
  print "Opened the log file without errors";
}
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
curl_setopt($session, CURLOPT_VERBOSE, true);
$result = curl_exec($session);
curl_close($session);
fwrite($logfh, $result);
fclose($logfh); 
```

*或*使用`CURLOPT_FILE`，像这样：

```
$session = curl_init();
$logfh = fopen("my_log.log", 'a+');
if ($logfh !== false) {
  print "Opened the log file without errors";
}
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_FILE, $logfh);
curl_setopt($session, CURLOPT_VERBOSE, true);
curl_exec($session);
curl_close($session);
fclose($logfh); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T16:30:07.010

`CURLINFO_HEADER_OUT`使用= true时也可能存在问题。我想有一些东西`CURLINFO_VERBOSE`使用这个选项，只是抑制了 VERBOSE 信息......

```
curl_setopt($ch, CURLINFO_HEADER_OUT, false);
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_STDERR, fopen('log.log', 'a+')); 
```

顺便提一下，您可以使用：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_STDERR, fopen('log.log', 'a+')); 
```

如果您想将输出记录到文件并且仍然能够返回`curl_exec`.

# jquery - jQuery Easing 插件不是 Easing？

> ID：11161792
> 
> 赞同：0
> 
> 时间：2012-06-22T18:06:28.113
> 
> 标签：jquery, jquery-plugins, easing

我不知道为什么这对我不起作用。也许其中一位 jQuery Guru 可以帮助我完成这项工作！

从下面的脚本中，您可以看到我有一个名为 5 的 UL 块，我想将它放在那里锚（#web）。当我单击菜单项时，我确实收到了要激活的警报，所以我认为那部分是正确的。

```
$(function() {
$('ul.five a').bind('click',function(event){
    var $anchor = $(this);
    alert('hellooo')
    $('html, body, section').stop().animate({
        scrollTop: $($anchor.attr('href')).offset().top
    }, 500,'easeInOutExpo');

    event.preventDefault();
}); 
```

});

这就是我的一个部分的样子，以防万一这会有所帮助？

```
<section class="row divider-down" id="section1">
<header>
    <h1><img src="image/image1.png" alt="Alt"></h1>
    <p>some text</p>
</header> 
```

有没有人在这里看到任何明显错误的东西？就像我说的警报弹出但它没有“缓解”到该部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:08:20.820

我想你很接近。两件事情：

1.  更改您要制作动画的内容`$('body')`
2.  除非您包含 jQuery UI（请参阅下面的编辑），否则您不能使用“easeInOutExpo”。

尝试这个：

```
$(function() {
    $('ul.five a').bind('click',function(event){
        var $anchor = $(this);
        var $section = $($anchor.attr('href')); 
        if (!$section.length) { return; } // bail if there is no section

        $('body').stop().animate({ // only scroll the body
            scrollTop: $section.offset().top
        }, 500); // must remove 'easeInOutExpo' or include jQuery UI

        event.preventDefault();
    });
}); 
```

**编辑：**来自 JQUERY 文档：

> **缓和**
> 
> .animate() 的剩余参数是一个字符串，用于命名要使用的缓动函数。缓动函数指定动画在动画中不同点的进展速度。jQuery 库中唯一的缓动实现是默认的，称为摇摆，以及以恒定速度进行的一种，称为线性。使用插件可以使用更多的缓动功能，尤其是 jQuery UI 套件。

因此，除非您在页面上添加了 jQuery UI，否则您不能使用“easeInOutExpo”。

# macos - Mac Shell 脚本获取主目录

> ID：11161793
> 
> 赞同：8
> 
> 时间：2012-06-22T18:06:33.360
> 
> 标签：macos, bash, cp, home-directory

我需要在我的 shell 脚本中获取主目录，以便我的同事可以运行它。我的 shell 所做的非常简单，它只是将一些目录复制到另一个目录。我用过：

> $HOME,
> $(whoami)
> 即使这样：
> ABSPATH=$(cd "$(dirname "$0")"; pwd),

但是当我像这样使用变量时：

> DIR= $ABSPATH/文件夹/afolder/bfolder/

并运行它我收到这个：

> /Users/theUser/Desktop/FusionTest.command：第14行：/Users/theUser/Desktop/folder/afolder/bfolder：是一个目录
> 复制到用法：cp [-R [-H | -L | -P]] [-fi | -n] [-apvX] 源文件目标文件 cp [-R [-H | -L | -P]] [-fi | -n] [-apvX] source_file ... target_directory 注销
> [过程完成]

我正在使用命令 cp -r 复制所有文件和目录。

为什么我失踪了？或者我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T18:10:40.017

正如错误消息所暗示`-r`的那样，递归复制的标志不正确。您想要的标志是`-R`（标志区分大小写）。至于主目录，`$HOME`应该始终有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T20:34:22.827

在这里谈几件事：

1.  Mac 如何处理`HOME`目录以及在未设置实际目录的情况下检索实际`HOME`目录的方法。
2.  如何正确使用命令行参数，因为`cp`Linux 上的 GNU 命令允许您以错误的方式进行操作，这导致了很多问题。
3.  如何`set -xv`在脚本中用于调试。这将帮助您调试您遇到的大约 90% 的 shell 脚本错误。
4.  我认为您的脚本实际上是错误的。不幸的是，由于缺乏信息，这是一个疯狂的猜测，但这是一个很好的猜测。

* * *

## Mac 如何处理主目录

Mac OS X 是真正的 Unix 版本。事实上，它甚至比 Linux 更像 Unix。因此，它应该与几乎所有系统都相当兼容。

Mac 主目录存储在该`/Users`目录下。在 Mac 使用的默认 BASH shell 中（甚至在旧的 Turbo Csh 中），您可以将`~`其用作`$HOME`.

```
 $ echo "$HOME"   # Use quotes around directory and file names to avoid 
 $                # problems with white spaces.
 $ echo ~         # Echos the `$HOME` directory. 
```

如果有人更改了`HOME`环境变量，您可以使用`~userName`来获取目录的*正确*值`HOME`：

```
$ echo $HOME
/Users/david
HOME=/tmp
$ echo $HOME
/tmp
$ echo ~
/tmp
$ echo ~david
 /Users/david
$ HOME=~david   #Fixed! 
```

## 命令行参数

该错误可能与您计算机的*Macness*没有任何关系。这可能是您在几乎任何计算机上都能找到的标准问题。Mac 的`cp`命令采用`-r`or`-R`命令。与`cp`Linux 系统上的 GNU 不同，Mac 可以*正确*处理命令行参数。

例如，在 Linux 上，这是可以接受的：

```
$ cp "$dir" "$dir2" -r 
```

在 Unix 系统上，这可能会失败。您需要`-r`命令后的参数：

```
$ cp -r "$dir" "$dir2" 
```

如果您`cp`像第一个示例中那样执行命令，它将无法在 Unix 上运行，也无法在 Mac 上运行。

## 调试 Shell 脚本

现在，我们已经完成了一些初步准备，让我们看看如何调试您的问题......

放在`set -xv`第 14 行之前（可能在前面几行以确定）。这将打开脚本调试。该`-x`参数将在执行该行之前使用插值回显命令行。这样，您可以看到正在执行的实际命令。

该参数将按*原样*`-v`回显该行，无需插值。这样，您可以看到命令的外观，并可能检测到环境变量设置中的错误。

 *这是一个简单的脚本：

```
 name="David"
 echo "Hello $name!" 
```

执行脚本，我们得到：

```
 $ test.sh
 Hello David!
 $ 
```

现在，我会这样做：

```
 set -xv
 name="David"
 echo "Hello $name!"
 set +xv     #Turns off the -xv flags 
```

现在，我会得到这个：

```
 $ ./test.sh
 name="David"
 + name=David
 echo "Hello $name!"
 + echo 'Hello David!'
 Hello David! 
```

另一个巧妙的技巧是设置`PS4`为“ `${LINENO}:`”。这将在每一行前面加上行号，而不仅仅是`+`上面的 a：

## 可能的解决方案

我有一种感觉，问题在于您的目录名称中带有空格。引用目录和文件名以防止这些空格给您带来问题：

```
my_pictures=$HOME/"My Pictures"
cp -R $my_pictures $target     #Won't work due to the space between "My" & "Pictures"
cp -R "$my_pictures" "$target" #The quotes solve the problem. 
```

## 结论

不用担心您的 Mac*与众不同*。它只是另一个 Unix 系统。确保您正确使用命令行参数，`cp -R $dir1 $dir2`而不是`cp $dir $dir2 -R`. 用于`set -xv`帮助您定位错误，并养成引用环境变量的习惯，因为环境变量值中的空格或制表符可能会导致程序失败。

* * *

### Mac OS X 上的注意事项 - Lion

根据手册页，`-r`不再记录为选项。但是它确实有效。根据手册页：

> cp 实用程序的历史版本有一个 -r 选项。此实现支持该选项；但是，强烈建议不要使用它，因为它不能正确复制特殊文件、符号链接或文件。

但是，`cp -R`应该可以在 Linux 上运行，并且在 Mac OS X 中作为递归复制标志记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:20:38.737

$HOME 应该设置，但不能保证。用户可以覆盖此变量。另一种选择是使用`getent`.

```
IFS=: read -r _ _ _ _ _ homedir _ < <(getent passwd myuser)
echo "$homedir" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-23T04:38:33.693

我不喜欢脚本中的 ~ 并且 $HOME 有时会失败，具体取决于您使用的外壳 - 也许不是在 OSX 上，但我不在乎..

不知何故，系统记录了用户的主目录在哪里，并且 $HOME 是从那里设置的。

具体来说，我通常试图找到另一个用户的主目录（同样不喜欢脚本中的〜缩写 - 称之为偏好）对于OSX，我使用这个 -

```
 finger $username | awk '/^Directory/ {print $2}' 
```

在其他任何地方，我通常 grep /etc/passwd，但仔细想想，finger 可能会更通用。

这是我快速而肮脏的答案。如果您更好地了解 OSX 内部，将会有更好的解决方案 - 但关心因素？这对我有用*

# c# - 使用 Mono 选择带有 FolderBrowserDialog 的映射设备

> ID：11161800
> 
> 赞同：1
> 
> 时间：2012-06-22T18:06:45.523
> 
> 标签：c#, .net, macos, mono, folderbrowserdialog

有什么方法可以让 FolderBrowserDialog 在 OSX 中显示其他设备或映射驱动器？我有一个网络映射目录，它没有出现在列表中。

# ruby-on-rails - 更改 Sublime 中使用的 Ruby 版本

> ID：11161802
> 
> 赞同：7
> 
> 时间：2012-06-22T18:06:47.333
> 
> 标签：ruby-on-rails, sublimetext2

如何更改 Sublime 在测试时使用的 Ruby 版本。它目前使用的是 1.8，但我希望它使用 1.9.3，它在 RVM 中设置为我的默认值。当我输入 which ruby​​ 时，我得到 1.9.3，但 Sublime 没有使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T05:54:19.970

从这个要点：[https ://gist.github.com/fny/8008316](https://gist.github.com/fny/8008316)

在此处列出的相应文件中包含以下配置：

*   OS X ST2：~/Library/Application Support/Sublime Text 2/Packages/Ruby/Ruby.sublime-build
*   OS X ST3：~/Library/Application Support/Sublime Text 3/Packages/User/Ruby.sublime-build
*   Linux ST2：~/.config/sublime-text-2/Packages/Ruby/Ruby.sublime-build
*   Linux ST3：~/.config/sublime-text-3/Packages/User/Ruby.sublime-build

    { "working_dir": "${project_path}", "env": { "PATH": "${HOME}/.rvm/bin:${PATH}" }, "cmd": [ "rvm-auto-ruby ", "$file" ], "file_regex": "^(... *?):([0-9]* ):?([0-9]*)", "selector": "source.ruby" }

# javascript - 嵌入一 个 slickgrid 图形以填充浏览器窗口

> ID：11161810
> 
> 赞同：0
> 
> 时间：2012-06-22T18:07:27.147
> 
> 标签：javascript, html, css, slickgrid

我想知道是否有任何 CSS/HTML/JavaScript 魔法可以在这里做我想做的事。现在，应用程序的代码有一些硬编码的尺寸，1100x600，但我想让 WIDTH 与浏览器窗口的宽度匹配。

```
<DIV id="dynamic1" style="width:1100px;height:600px;">
<script> ... java script slickgrid graph ... </script>
</DIV> 
```

我正在考虑像这样包含一个 CSS 块：

```
#dynamic1 {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
} 
```

但不幸的是，这会使图表填满整个屏幕。我真正想要的是将图表嵌入页面上的特定位置；我不希望它占据整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:44:52.903

我稍微改变了你的 CSS，我希望这是你需要的：

```
#dynamic1 {
  position: absolute;
  left: 0;
  right: 0;
  height:600px;
} 
```

不要忘记删除`style="width:1100px;height:600px;"`div 的一部分。

# .net - 保护或比较 PDF 文档

> ID：11161815
> 
> 赞同：1
> 
> 时间：2012-06-22T18:07:45.993
> 
> 标签：.net

我有一个要求，我们需要确保我们以电子方式收到的文件 [PDF] 与我们发出的文件相同。

我们是一家文件交换公司，我们从外部接收和发送大量文件，有时用户必须向我们发送我们之前发送的文件，我们要确保文件相同并且没有更改使用photoshop或pdf编辑器等工具制作。

我看到的一种方法是比较每个字节，但不确定我们是否还有其他工具..？

我们的项目使用 .Net 3.5，VB 构建

任何帮助都会很棒

谢谢维努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:13:11.453

我建议使用哈希算法。它比逐字节比较每个文件要快得多。

此示例是 c#，但您可以根据需要轻松转换为 VB.Net - [http://www.c-sharpcorner.com/uploadfile/kirtan007/compare-two-files-with-hash-algorithm/](http://www.c-sharpcorner.com/uploadfile/kirtan007/compare-two-files-with-hash-algorithm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:27:14.973

您可以将所有内容提取到 txt 文件中`Ghostscript`，`pstotext`然后对 txt 文件进行操作。（sizeof、diff 等）。或者也许采用`digital signature`？

# javascript - 谷歌仪表图表仅在 Safari 移动设备中引发错误

> ID：11161817
> 
> 赞同：1
> 
> 时间：2012-06-22T18:07:56.823
> 
> 标签：javascript, mobile-safari, google-visualization

下面列出的是我在我的应用程序中使用的谷歌仪表图表的 javascript 代码。这适用于 Safari、Firefox、IE 和 Chrome，但不适用于 Safari Mobile。运行时，我收到一条错误消息，指出“表达式 'c[G]' [null] 的结果不是对象”。这是一个 asp.net 页面，使用 Visual Basic 作为服务器端代码 - <%= donevalue %> 是来自服务器端的值，它是仪表的值 - 将其更改为任何数字仍然会引发相同的错误。

注意 - 我查看网站并收到此错误的方式是通过[http://code.google.com/p/ibbdemo2/](http://code.google.com/p/ibbdemo2/) - 一个 adobe air ipad 模拟器。

```
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>

    var percent = <%= donevalue  %>;
    google.load('visualization', '1', { packages: ['gauge'] });
    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var data = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      ['%complete', percent]
    ]);

        var options = {
            width: 120, height: 100
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
        chart.draw(data, options);
    }
</script> 
```

谢谢你的帮助。

# ruby-on-rails - heroku toolbelt 断轨

> ID：11161820
> 
> 赞同：14
> 
> 时间：2012-06-22T18:08:01.390
> 
> 标签：ruby-on-rails, ruby, heroku

我正在学习rails，我正在尝试让heroku启动并运行。但是，当我安装 heroku 工具带时，会产生许多错误。如果我尝试运行任何 rails 命令，我会得到如下信息：

```
C:\Users\Ezra\Desktop\Sites\demo_app>rails -v 
C:/Program Files (x86)/ruby-1.9.3/lib/ruby/site_ruby/1.9.1/rubygems.rb:926:in `r
eport_activate_error': Could not find RubyGem railties (>= 0) (Gem::LoadError)
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/site_ruby/1.9.1/rubygems
.rb:244:in `activate_dep'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/site_ruby/1.9.1/rubygems
.rb:236:in `activate'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/site_ruby/1.9.1/rubygems
.rb:1307:in `gem'
    from C:/RailsInstaller/Ruby1.9.3/bin/rails:18:in `<main>' 
```

此外，运行 ruby​​ -v 会给我 ruby​​ 1.9.2p290，即使我安装了 ruby​​ 1.9.3。在尝试解决这个问题时，我发现卸载 ruby​​ 1.9.2p290 会导致我的 ruby​​ 版本简单地恢复到 1.9.3p125，但这样做之后 heroku 不再工作：

```
C:\Users\Ezra\Desktop\Sites\demo_app>heroku login
'"C:\Program Files (x86)\ruby-1.9.3\bin\ruby.exe"' is not recognized as an inter
nal or external command, operable program or batch file. 
```

* * *

安装heroku toolbelt后的gem环境：

RubyGems 环境：

> *   红宝石版本：1.7.2
>     *   红宝石版本：1.9.2（2011-07-09 补丁级别 290）[i386-mingw32]
>     *   安装目录：C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1
>     *   RUBY 可执行文件：“C:/Program Files (x86)/ruby-1.9.3/bin/ruby.exe”
>     *   可执行目录：C:/Program Files (x86)/ruby-1.9.3/bin
>     *   红宝石平台：
>         *   红宝石
>         *   x86-mingw32
> *   宝石路径：
>     *   C:/程序文件 (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1
>     *   C:/Users/Ezra/.gem/ruby/1.9.1
> *   宝石配置：
>     *   :update_sources => 真
>     *   :详细 => 真
>     *   :基准 => 假
>     *   ：回溯 => 假
>     *   :bulk_threshold => 1000
> *   远程资源：
>     *   [http://rubygems.org/](http://rubygems.org/)

卸载ruby1.9.2p290后的Gem环境：

RubyGems 环境：

> *   红宝石版本：1.8.16
> *   红宝石版本：1.9.3（2012-02-16 补丁级别 125）[i386-mingw32]
> *   安装目录：C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
> *   RUBY 可执行文件：C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe
> *   可执行目录：C:/RailsInstaller/Ruby1.9.3/bin
> *   红宝石平台：
>     *   红宝石
>     *   x86-mingw32
> *   宝石路径：
>     *   C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
>     *   C:/Users/Ezra/.gem/ruby/1.9.1
> *   宝石配置：
>     *   :update_sources => 真
>     *   :详细 => 真
>     *   :基准 => 假
>     *   ：回溯 => 假
>     *   :bulk_threshold => 1000
> *   远程资源：
>     *   [http://rubygems.org/](http://rubygems.org/)

我正在运行 Windows 7，我没有使用 rvm，因为 cygwin 让我哭了。
任何和所有的建议将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T19:39:44.160

这里也是一个新手，试图让heroku运行起来。我今天遇到了完全相同的问题，首先是“找不到 RubyGem railties”问题，然后在卸载 Ruby 1.9.2 后，heroku 的问题不再工作了。我找到了两种解决方法，但不确定其中一种是否很棒。

不要卸载工具带附带的 ruby​​ 版本。相反，要么

(1)：将其从 PATH 中删除。对我来说，工具带安装将 c:\program files\ruby1.9.3 添加到我的 PATH 系统变量中。**我的用户**PATH 变量中已经有 c:\ruby193 （我之前自己安装了 ruby​​） 。在从 PATH 中删除工具带添加的那个之后，事情开始起作用了。
（注意：c:\ruby193 应该放在 c:\program files\heroku\bin int PATH 系统变量之前，否则它将不起作用）

(2): 或者，我将 c:\ruby193 从我的**用户**PATH 移动到我的**系统**PATH。重新安装了工具带，现在 ruby​​ 和 heroku 都可以工作了。但是我的 PATH 变量中确实有两个版本的 ruby​​。

不确定这两种方法是否很棒，因为我怀疑我现在安装了两个版本的 ruby​​，并且根据我正在做的事情被使用。但至少让我继续解决下一个问题，现在我一直在尝试安装 heroku 插件。

我认为 ruby​​ on rails 应该让事情变得简单。尝试配置 30 种不同的新工具已经 4 天了（结束咆哮）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T01:12:19.693

我放弃了 Heroku Toolbelt（卸载了 Heroku 以及它附带的 Ruby 1.9.2 运行时）并改用了 gems：

```
gem install heroku
gem install foreman 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T03:10:20.097

瑞维亚娜你的回答很好，但是，

您应该担心安装了两个版本的 ruby​​。我是初学者，但我听说这会导致以后出现严重的头痛。

由于 Herokubelt 安装了 ruby​​(1.9.2) 的附加版本，我将从您的用户路径 (Path) 和系统路径 (PATH) 中删除它。然后卸载 ruby​​(1.9.2)。

当我这样做时，rails(1.9.3) 和 heroku 腰带仍在工作。我在带有 rails 1.9.3 的 Windows 7 上

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T04:25:22.683

我建议你在开发 ruby​​ on rails 时使用 linux，我之前在 window 中开发过，它有很多问题，你无法解决（超出你的范围）。此外，当您使用某些 gem 时，某些 gem 配置在您在窗口中时也会有所不同。更改为 linux shld 帮助您更好地进行 ruby​​ on rails 开发:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T23:15:13.653

在 Windows 上，我删除了 Ruby 1.9.2（Heroku 安装的）并编辑了 heroku.bat 中的路径以指向现有的 Ruby1.9.3

就我而言，它变成了：

```
:x64
set HerokuRubyPath=C:\RailsInstaller\Ruby1.9.3
goto launch 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-03T16:04:03.433

这可能与可执行文件有关......当我输入时：

```
which heroku 
```

输出是：

```
/usr/bin/heroku 
```

你应该把它放在你的 $PATH

```
...   :/usr/bin:  ... 
```

heroku gem 已被贬低，因此请下载“heroku toolbelt”

# c++ - 将 boost::function 转换为 std::function

> ID：11161825
> 
> 赞同：18
> 
> 时间：2012-06-22T18:08:10.953
> 
> 标签：c++, boost, stl, c++11, std-function

我正在更新我们的一些旧代码以使用 C++11 功能代替 boost 等价物。然而，并非一切都是简单的命名空间替换，如无序容器和智能指针。

例如`boost::function`有方法`empty()`但`clear()`没有`std::function`。

有一个我一直用来替换引用的`operator()`定义，但是我应该用什么来替换引用？`std::function``empty()``clear()`

我考虑过使用`std::function`赋值运算符并赋值`nullptr`来清除它，但我担心可能会产生无意的副作用，不仅会清除底层函数，还会使对象不可用。

显然，更好的解决方案是默认初始化任何可重用的成员函数对象，这样总是有一个有效的回调，可以简单地用用户提供的回调来更新，但我现在的目标是直接替换以前的用法而不是代码审查。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-22T18:10:50.223

> 有一个我一直用来替换的`operator()`定义`std::function``empty()`

你的意思是一个`operator!`？

使用`empty`该运算符在布尔上下文中对其进行测试：

```
if (f.empty()) 
```

变成：

```
if (!f) 
```

或者

```
if (!f.empty()) 
```

变成：

```
if (f) 
```

（这也适用于`boost::function`，它也有`operator!`和`operator bool`。）

对于`clear`分配`nullptr`给它，它不会使其不可用，它只是将其设置为默认构造状态：

```
f.clear(); 
```

变成

```
f = nullptr; 
```

或者（感谢 Paul Groke 的建议）：

```
f = {}; 
```

这相当于：

```
f = decltype(f){}; 
```

但更高效，更容易打字和阅读！

# ruby - 在加载之前将数据注入到延迟加载的 Mongoid 模型中

> ID：11161828
> 
> 赞同：1
> 
> 时间：2012-06-22T18:08:21.880
> 
> 标签：ruby, mongoid

我正在为 Mongoid 开发一个版本控制模块（Mongoid::Versioning 不适合我的需要），每当我创建一个对象时，我都可以选择“及时返回”。这可行，但是一旦我拥有 has_many 或 has_and_belongs_to_many，我不想急切加载所有引用。

如何在代理对象从数据库中填充数据并在创建之前处理回调之前将变量“注入”到代理对象中（因此用户只需调用一次 Object.find(id).atTimestamp(yesterday)孩子们自动处于相同的时间状态？）

# javascript - 数组数组或对象数组

> ID：11161834
> 
> 赞同：1
> 
> 时间：2012-06-22T18:09:23.227
> 
> 标签：javascript

存储具有 4 个整数属性的长度为 10,000 的数组的更有效（就内存消耗而言）方法是什么：

**选项 1：对象数组**

```
var array = [];
array[0] = {p1:1, p2:1, p3:1, p4:1} 
```

或者

**选项 2：四个整数数组**

```
var p1 = [], p2 = [], p3 = [], p4 = [];
p1[0] = 1;
p2[0] = 1;
p3[0] = 1;
p4[0] = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:13:31.470

选项 2。4 个对象（数组也是对象）与 10001 个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:23:50.423

我实际上使用 Google Chrome 任务管理器测试了这两个选项，它显示了有关打开的选项卡 ( `Shift+ESC`) 的信息，虽然这可能不是 100% 准确，但它确实显示出显着差异：

对于第一个选项，创建一个包含 10,000 个元素的数组，每个元素是一个具有您指定的 4 个属性的对象，初始化数组后内存使用量增加了大约**10MB 。**

第二个选项，创建 4 个数组，每个数组包含 10,000 个元素，使内存使用量增加了大约**5MB**。

一些内存使用跳跃可能与创建和内部浏览器内容的实际处理有关，但关键是 -**正如预期的那样**- 创建对象会为您存储的数据增加更多开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:13:19.490

就内存而言，四个包含 10,000 个元素的数组可能更好，因为您只存储四个复杂对象（数组），然后是 40,000 个整数——而另一种方式是存储 10,000 个数组和 40,000 个整数（每个数组 4 个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:13:35.830

我的猜测是，纯粹从位和字节的角度来看，单个多维数组的占用空间最小：

```
var p = [];
p[0] = [1,1,1,1]; 
```

# cocoa - 急救人员问题

> ID：11161840
> 
> 赞同：0
> 
> 时间：2012-06-22T18:09:46.413
> 
> 标签：cocoa, nsview, nswindow, first-responder

我的应用程序是一个菜单栏应用程序。它有一个面板，其中包含另一个视图。这个观点改变了，我每个人都应该做自己的钥匙处理。当我更改第一响应者时，显然只有当前的第一响应者会收到按键通知。

但是面板本身也应该有一个全局键处理。

我该怎么做？多重实现非常难看:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:01:19.713

好的，我已经想通了。我猜超类正在调用超视图的事件方法。然后superview通知它的superview。等等。如果你打电话`[super keyDown:theEvent];`，它已经为你完成了。

```
- (void)keyDown:(NSEvent *)theEvent {
     [super keyDown:theEvent];

     // Do you your stuff here 
} 
```

# sql - SQL Server：没有锚的层次递归 CTE

> ID：11161843
> 
> 赞同：2
> 
> 时间：2012-06-22T18:10:08.197
> 
> 标签：sql, sql-server, hierarchy, common-table-expression

我能够使用递归 CTE 生成层次结构，但我一直使用锚点......带有一些顶级指标的顶级记录（parentID IS NULL）。我想建立一个不一定有定义锚的层次结构。我有一个带有 parentID 和 childID 的多对多参考表。任何父母都可以是孩子，反之亦然（当然要避免循环引用）。我认为这将是一种自下而上的方法，而不是自上而下的方法。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T15:25:23.527

如果没有至少一个锚成员和一个递归成员，则无法使用 CTE 构建递归查询。

虽然使用递归 CTE 生成层次结构，但这种情况下的问题是表中的数据不代表层次结构，因为层次结构是有向无环图的一种，因此它必须有一个元素（层次结构）这优于所有其他元素。

# silverlight - 如何加密silverlight应用程序的下载？

> ID：11161844
> 
> 赞同：2
> 
> 时间：2012-06-22T18:10:09.003
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0, silverlight-5.0

当为 silverlight 应用程序选中“通过使用应用程序缓存减少 XAP 大小”时，引用的程序集可以被压缩为单独的 zip 文件并由用户在访问应用程序时下载。

如何加密这些 zip 文件和 xap 文件以保护您的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:49:32.867

您需要将 XAP 视为可查看的 jQuery。除非你混淆代码，否则很容易环顾四周，看看发生了什么，使用反射器或类似的东西。正如评论中提到的，获取 XAP 的传输可以通过 HTTPS。保护您从客户端应用程序接收到的内容的方法是不信任它发送的任何内容。

# ruby - 使用 Ruby 的 Rally API：如何引用测试用例方法（自动/手动）？

> ID：11161845
> 
> 赞同：1
> 
> 时间：2012-06-22T18:10:10.733
> 
> 标签：ruby, rally

我正在使用 Ruby 来处理 Rally API。我正在尝试引用测试用例方法。该方法是手动或自动，但我总是得到一个错误。我正在使用 Ruby，所以我不知道 method 是否是 Ruby 中的保留字，或者发生了什么。你能告诉我如何引用测试用例方法吗？

我能够做到：

测试用例.objective

测试用例优先级

等等

但我做不到

**测试用例.方法**

我总是收到这个错误。

“方法”：参数数量错误（0 代表 1）（ArgumentError）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:19:05.047

您使用的是 rally_rest_api 还是 rally_api？

如果您使用 rally_rest_api - Charles 是正确的。尝试 testcase.elements[:method] （字段名小写和下划线作为符号）

如果您使用 rally_api - [http://rubygems.org/gems/rally_api](http://rubygems.org/gems/rally_api) - 获取字段可以是：testcase["FieldName"]

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-06T00:32:23.677

在尝试访问内置字段（即*非*自定义字段）时，您只需要将名称大写。我自己遇到了这个问题并使用`tc.Method`而不是`tc.method`修复它。

出现此错误的原因可以在[Object#method](http://ruby-doc.org/core-2.3.0/Object.html#method-i-method)的文档中看到，正如您现在可能已经发现的那样，它会导致您的代码调用该方法`method`而不是访问名为`method`.

# django - Django如何编写这个查询

> ID：11161846
> 
> 赞同：0
> 
> 时间：2012-06-22T18:10:12.407
> 
> 标签：django, django-queryset

我有模型`Product`和`Category`. `Category`可以有很多产品。（`Product`有外键`category`）。

我需要选择至少包含一种产品的类别。

我不知道如何在 Django 中执行此操作。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:11:41.713

```
Category.objects.filter(product__isnull=False) 
```

# c - 项目中没有 Makefile.am 的 Makefile.in

> ID：11161847
> 
> 赞同：3
> 
> 时间：2012-06-22T18:10:13.073
> 
> 标签：c, build, makefile, build-automation, autotools

在几个项目中，我看到了没有 Makefile.am 的 Makefile.in 。例如 bash [http://git.savannah.gnu.org/cgit/bash.git/tree/](http://git.savannah.gnu.org/cgit/bash.git/tree/)和 dtach [http://dtach.cvs.sourceforge.net/viewvc/dtach/dtach/](http://dtach.cvs.sourceforge.net/viewvc/dtach/dtach/)

我一直以为Makefile.in是automake生成的。另外，由于 Makefile.am 是用户编写的文件，我不会想到它会从代码存储库中省略。在 bash 源代码树中，Makefile.in 太大而无法手写，而且 dtach 中的 Makefile.in 看起来也已生成。这两个项目中的 Makefile.in 是如何生成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T19:55:10.340

和autotools 可以彼此独立使用`libtool`（`automake`或根本不使用），这取决于您需要`autoconf`做什么。因此，*不需要*使用`automake`来生成`Makefile.in`.

该`automake`工具还显着地输出它已被使用：

> # Makefile.in 由来自 Makefile.am 的 automake 1.11.1 生成。

因此，`Makefile.in`您看到的 s 很可能是“手动”编辑的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:23:49.727

Makefile.in 看起来像一个常规的 Makefile，但通常它期望由配置脚本完成（例如，用户在不同目录中的库的位置）。

Automake 使用 Makefile.am 来构建这样的 Makefile.in。如果制作您正在使用的软件包的开发人员已经有一个 Makefile 并为此编写 Makefile.am 太费力了，他们只需将其转换为 Makefile.in。

# awk - awk 无法将值存储到数组中

> ID：11161848
> 
> 赞同：1
> 
> 时间：2012-06-22T18:10:23.967
> 
> 标签：awk

我正在使用如下脚本

脚本

```
declare -a GET

i=1

awk -F "=" '$1 {d[$1]++;} {for (c in d) {GET[i]=d[c];i=i+1}}' session

echo ${GET[1]} ${GET[2]} 
```

描述

问题是在外面打印的 GET 值不是正确的值......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:41:38.460

我将您的问题理解为“如何在调用 awk 的外壳中使用我的 awk 脚本的结果”。事实是，这并不是微不足道的。您不会期望能够在 shell 中轻松使用 C 程序或 python 脚本的输出。awk 也是如此，它本身就是一种脚本语言。

有一些解决方法。对于一个健壮的解决方案，将 awk 脚本中的结果以适当的简单格式写入文件，然后从 shell 中读取它们。作为 hack，您还可以尝试使用`$()`. 将其与`set`命令结合起来，您可以执行以下操作：

```
set -- $(awk <awk script here>) 
```

然后使用`$1` `$2`等，但你必须小心 awk 输出中的空格。

# codeigniter - 从另一个视图中加载带有表单的 codeigniter 视图

> ID：11161853
> 
> 赞同：3
> 
> 时间：2012-06-22T18:10:40.750
> 
> 标签：codeigniter

使用codeigniter，我一直在尝试在foreach循环中加载一个视图，如下所示：

```
$posts = $this->postslibrary->getAllPosts();
foreach($posts as $post){
  $home['content'][$i] = $this->load->view('post', $post['data'], true);
  $i++;
}
$this->load->view('head');
$this->load->view('home', $home);
$this->load->view('footer'); 
```

这些帖子视图中的每一个看起来都像这样：

```
<div class="postnum<?=$post_num?>">
  <p>Posted by: <?=$poster_name?></p>
  <p>Reply to: <?=$poster_name?></p>
  <form>
  <input type='text' />
  <input type='submit' />
  </form>
</div> 
```

并且它们在“主页”视图中大部分成功加载（为了彻底性，在下面）。

```
<div ="posts">
  <?php
    for($i=0;$i<$count;$i++)
    {
      echo($content[$i]);
    }
  ?>
  <div class="clear"></div>
  <a href='/posts/browse/'>Load more items</a>
</div> 
```

但我的输出最终看起来像：

```
<div class='posts'>
  <div class='postnum1'>
    <p>Posted By: Jim</p>
    <p>Reply to Jim</p>
    <input type='text' />
    <input type='submit' />
  </div>
</div> 
```

为什么我的表单标签没有通过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:51:33.970

检查您是否已经有一个围绕当前表单的表单。Chrome 是不接受这一点并删除第二种形式的浏览器之一。在表单中使用表单是不好的做法，我建议您找到不同的解决方案来处理表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:52:10.163

稍微偏左的答案，但看看[CodeIgniter Form Generator](http://code.google.com/p/codeigniter-form-generator/)。我已经用过几次了，它似乎非常适合从数组生成表单。一开始就绕开它有点棘手，但是一旦你进入它，它就会很好地工作。

基本思想是您从普通控制器实现一个表单控制器，然后将其输出到您的视图文件中。对于您正在尝试的东西，它可能是一个更优雅（和可持续）的解决方案。

# c++ - O(log n) 索引更新和搜索

> ID：11161858
> 
> 赞同：2
> 
> 时间：2012-06-22T18:10:57.143
> 
> 标签：c++, time-complexity, stdmap

我需要跟踪大型文本文件中的索引。我一直保留一些`std::map`索引和随附的数据作为快速破解。如果用户在文本中的第 230,400 个字符上，我可以显示文本的任何元数据。

现在我的地图越来越大，我遇到了一些速度问题（如预期的那样）。

例如，如果文本在开头被修改，我需要将地图中该位置之后的索引加一，这是一个 O(N) 操作。

将其更改为 O(log N) 复杂度的好方法是什么？我一直在看[AVL Arrays](http://avl-array.sourceforge.net/)，它很接近。

我希望 O(log n) 时间进行更新和搜索。例如，如果用户在文本数组中的字符 500,000 上，我想非常快速地查找该字符是否有任何元数据。

（忘记添加：用户可以随时添加元数据）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:44:44.637

简单的。制作偏移量的二叉树。

任何偏移量的值都是通过从叶子到根遍历树来计算的，只要节点是右子节点，就添加偏移量。

然后，如果您在文件的早期添加文本，您只需要更新节点的偏移量，这些节点是更改的偏移量的父节点。也就是说，您在第一个偏移量之前添加了文本，您添加了添加到根节点的字符数。现在您的一半偏移量已得到纠正。现在遍历左孩子并再次添加偏移量。现在 3/4 的偏移量已更新。继续遍历左孩子添加偏移量，直到所有偏移量都被更新。

@OP：

假设您有一个包含 8 个字符的文本缓冲区，以及奇数字节的 4 个偏移量：

```
the tree:              5
                      / \
                     3   2
                    / \ / \
                    1 0 0 0
sum of right
children (indices) 1  3 5  7 
```

现在假设您在偏移量 4 处插入了 2 个字节。缓冲区是：

```
01234567 
```

现在它的

```
0123xx4567 
```

因此，您只修改支配数组中已更改部分的节点。在这种情况下，只需要修改根节点。

```
the tree:              7
                      / \
                     3   2
                    / \ / \
                    1 0 0 0
sum of right
children (indices) 1  3 7  9 
```

求和规则是从叶到根我对自己求和，如果我是父母的正确孩子，我的父母的价值。

要查找我当前位置是否有索引，我从根开始并询问此偏移量是否大于我的位置。如果是，我会向左移动并且什么都不添加。如果没有，我会向右遍历并将值添加到我的索引中。如果在遍历结束时我的值等于我的索引，那么是的，有一个注释。您可以使用最小和最大索引进行类似的遍历，以找到支配范围内所有索引的节点，找到我正在显示的文本的所有索引。

哦..这只是一个玩具示例。实际上，您需要定期重新平衡树，否则如果您继续在文件的一部分中添加新索引，您将得到一棵失去平衡的树，最坏情况下的性能将不再是 O( log2 n) 但将是 O(n)。为了保持树的平衡，您需要实现一个平衡的二叉树，如“红/黑树”。这将保证 O(log2 n) 性能，其中 N 是元数据的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:00:15.770

不要存储索引！没有办法做到这一点，同时性能更好`O(n)`- 在数组的开头添加一个字符，你将不得不增加`n - 1`索引，没有办法解决它。

但是，如果您改为存储子字符串长度，则只需更改每一级树结构的一个，即可将您提升到`O(log n)`. 我的（未经测试的）解决方案是使用带有附加到节点的元数据的[绳索](https://en.wikipedia.org/wiki/Rope_%28computer_science%29)- 您可能需要稍微尝试一下，但我认为这是一个坚实的基础。

希望有帮助！

# sql - Insert int variable into xml type

> ID：11161860
> 
> 赞同：1
> 
> 时间：2012-06-22T18:11:17.410
> 
> 标签：sql, sql-server-2005, xquery

What a want to do is something like that:

```
declare @id int
set @id = (select ID from tbUsers where Name = 'John_Stack')

declare @xml xml
set @xml = '<users> <user id = "' + @id + '"/></users>' 
```

The server aborted saying

> Operand type clash: int is incompatible with xml.

What is the best way to do this?

I'm working with SQL Server 2005.

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:16:31.327

```
declare @id int
set @id = (select ID from tbUsers where Name = 'John_Stack')

declare @xml xml
set @xml = '<users> <user id = "' + CONVERT(varchar,@id) + '"/></users>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T23:50:58.740

You may wish to avoid constructing your own XML from scratch with string concatenation. It feels unclean, at least to me, particularly when you have better tools already available to you. For instance, in SQL Server 2005, you could do this and get your desired result:

```
Declare @xml xml;
Set @xml = (
    Select id As [@id]
    From tbUsers
    Where Name = 'John_Stack'
    For XML Path('user'), Root('users'), Type); 
```

Or, if you think tbUsers will not have your user, but you still want a root `<users />` element even if no rows are returned, you could use this variation:

```
Declare @xml xml;
Set @xml = (
    Select (
        Select id As [@id]
        From tbUsers
        Where Name = 'John_Stack'
        For XML Path('user'), Type)
    For XML Path('users'), Type); 
```

# c - 出现一个额外的输入

> ID：11161861
> 
> 赞同：1
> 
> 时间：2012-06-22T18:11:19.983
> 
> 标签：c, input, scanf

例如，当我为 num1 输入 2 并为 num2 输入 3 时，我希望在输入第二个数字后立即得到 8 作为输出。但是，程序希望我再输入一个整数，而我只是输入了一个像 242 这样的随机数，它仍然输出 8，这意味着它不会影响结果。所以我的问题是为什么会有第三个输入？感谢您的帮助！

```
#include "stdafx.h"

int Power (int num1, int num2);

int main ()
{
    int a, b;
    puts ("Enter two numbers, a and b:\n");  
    scanf ("%i\n", &a);
    scanf ("%i\n", &b);
    printf ("%i\n", Power(a, b));
    return 0;
}

int Power (int num1, int num2)
{
    int sum=1;
    for (int i=1; i<=num2; i++){
        sum= sum*num1;
    }
    return sum;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:18:09.763

去掉换行符：`\n`，在你的`scanf`格式字符串中，或​​者只使用一个`scanf`，例如：

```
scanf("%i%i", &a, &b); 
```

或者：

```
scanf ("%i", &a);
scanf ("%i", &b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:17:42.517

你`scanf()`不需要`"\n"`.

```
scanf ("%i", &a);
scanf ("%i", &b); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:17:56.657

您应该在调用`scanf`.

# javascript - 带有下一个/上一个的 jQuery UI 选项卡

> ID：11161866
> 
> 赞同：0
> 
> 时间：2012-06-22T18:11:46.953
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试通过下一个/上一个功能控制选项卡。我正在使用在此[网站](http://3.s3.envato.com/files/9725958/index.html)中找到的一组特定选项卡。我尝试应用的方法是在这个[css-tricks WEBSITE](http://css-tricks.com/jquery-ui-tabs-with-nextprevious/)中找到的。我已经复制了我的示例中的所有内容，但我没有得到想要的或任何结果。谁能解释为什么它不起作用？谢谢你。

**jquery 用于下一个/上一个函数**

```
<script type="text/javascript">
    $(function() {

        var $tabs = $('#convertThis').tabs();

        $(".ui-tabs-panel").each(function(i){

          var totalSize = $(".ui-tabs-panel").size() - 1;

          if (i != totalSize) {
              next = i + 2;
              $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
          }

          if (i != 0) {
              prev = i;
              $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
          }

        });

        $('.next-tab, .prev-tab').click(function() { 
               $tabs.tabs('select', $(this).attr("rel"));
               return false;
           });

    });
</script> 
```

**html**

```
<div id="convertThis">
<div id="tabs">
      <div rel="a" href="#a" title="./img/icons/accept.png">Lorem</div>
      <div rel="b" href="#b" title="./img/icons/add.png">Ipsum</div>
      <div rel="c" href="#c" title="./img/icons/application_home.png">Dolor</div>
</div>
<div id="divs">
      <div id="a" class="ui-tabs-panel">
            Content for tab item
      </div>
      <div id="b" class="ui-tabs-panel">
            Content for tab item
      </div>
      <div id="c" class="ui-tabs-panel">
            Content for tab item
      </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:27:33.163

您引用的第一个站点上的 html 不是 jQueryUI 选项卡面板的 html - 它对选项卡使用 a`<ul>`和`<li>`标签，而不是 div。

这是 jQueryUI 选项卡面板的 HTML 语法。

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
    <div id="tabs-2">
        <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
    </div>
    <div id="tabs-3">
        <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
        <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
    </div>
</div> 
```

[更新：这是一个使用 jQueryUI 的示例： http](http://andrewgormley.com/articles/view/jquery-ui-tabs-with-previous-and-next-buttons) ://andrewgormley.com/articles/view/jquery-ui-tabs-with-previous-and-next-buttons

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:37:06.087

我不确定 div 标签是否有一个属性标签为 href ，它必须与一个以标签开头的超链接相关联`<a>`

其次，tabs 对其相应的内容分区执行 href，您需要在列表元素中有一个 href 标签才能工作

[在这里](http://fundapass.blogspot.in/2012/06/v-behaviorurldefaultvmlo_22.html)看到这个例子

# c# - 当询问当前用户的 TMP 文件夹时，OSX 上的 Mono 返回符号链接的路径而不是真实文件夹

> ID：11161867
> 
> 赞同：1
> 
> 时间：2012-06-22T18:11:51.807
> 
> 标签：c#, .net, macos, mono

我在这里使用基于 FSEvents 的文件系统观察程序运行一个简单的测试，我注意到这段代码：

```
System.IO.Path.GetTempPath() 
```

将返回下的路径`/var/folders/something-here`。但是，当我设置文件系统观察程序时，所有事件都会发送到文件夹`/private/var/folders/something-here`（这是正确的路径，因为`/var`是 的符号链接`/private/var`）。

我有没有办法告诉 mono 给我真实的而不是符号链接的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:20:26.937

`maccore`最终对 Mono 进行了黑客攻击，并创建[了一个包含更改的拉取请求](https://github.com/mono/maccore/pull/30)。代码现在为：

```
NSString normalizedPath = new NSString (currentPath).StringByStandardizingPath ().StringByResolvingSymlinksInPath (); 
```

# openstack - OpenStack：添加新的 nova-compute 节点时出现异常

> ID：11161868
> 
> 赞同：1
> 
> 时间：2012-06-22T18:11:51.917
> 
> 标签：openstack

我正在尝试将一个新的 nova-compute 节点（KUubuntu 12.04）添加到我在 Ubuntu 12.04 LTS 上运行的单节点 OpenStack（Essex 版本）安装中。但是，我收到以下错误：-

```
2012-06-22 14:05:12 INFO nova.rpc.common [-] Reconnecting to AMQP server on localhost:5672
2012-06-22 14:05:12 ERROR nova.rpc.common [-] AMQP server on localhost:5672 is unreachable: [Errno 111] ECONNREFUSED. Trying again in 27 seconds.
2012-06-22 14:05:12 TRACE nova.rpc.common Traceback (most recent call last):
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/nova/rpc/impl_kombu.py", line 446, in reconnect
2012-06-22 14:05:12 TRACE nova.rpc.common     self._connect()
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/nova/rpc/impl_kombu.py", line 423, in _connect
2012-06-22 14:05:12 TRACE nova.rpc.common     self.connection.connect()
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/kombu/connection.py", line 154, in connect
2012-06-22 14:05:12 TRACE nova.rpc.common     return self.connection
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/kombu/connection.py", line 560, in connection
2012-06-22 14:05:12 TRACE nova.rpc.common     self._connection = self._establish_connection()
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/kombu/connection.py", line 521, in _establish_connection
2012-06-22 14:05:12 TRACE nova.rpc.common     conn = self.transport.establish_connection()
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py", line 255, in establish_connection
2012-06-22 14:05:12 TRACE nova.rpc.common     connect_timeout=conninfo.connect_timeout)
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py", line 52, in __init__
2012-06-22 14:05:12 TRACE nova.rpc.common     super(Connection, self).__init__(*args, **kwargs)
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/amqplib/client_0_8/connection.py", line 129, in __init__
2012-06-22 14:05:12 TRACE nova.rpc.common     self.transport = create_transport(host, connect_timeout, ssl)
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/amqplib/client_0_8/transport.py", line 281, in create_transport
2012-06-22 14:05:12 TRACE nova.rpc.common     return TCPTransport(host, connect_timeout)
2012-06-22 14:05:12 TRACE nova.rpc.common   File "/usr/lib/python2.7/dist-packages/amqplib/client_0_8/transport.py", line 85, in __init__
2012-06-22 14:05:12 TRACE nova.rpc.common     raise socket.error, msg
2012-06-22 14:05:12 TRACE nova.rpc.common error: [Errno 111] ECONNREFUSED
2012-06-22 14:05:12 TRACE nova.rpc.common 
```

错误的原因是什么以及如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:02:24.580

正如您所指出的，您的配置缺少 --rabbit_host = ... 标志，该标志指示在哪里可以找到您的 OpenStack 云的 RabbitMQ 服务。默认值为本地主机。

nova 接受的其他兔子标志：

```
--rabbit_host=...
--rabbit_port=...
--rabbit_virtual_host=/
--rabbit_use_ssl
--rabbit_userid=...
--rabbit_password=... 
```

# ios - iOS - NSURLConnection - 请求中字符的正确编码

> ID：11161869
> 
> 赞同：0
> 
> 时间：2012-06-22T18:11:56.760
> 
> 标签：ios, nsurlconnection

在我的 iOS 应用程序中，我使用 NSURLConnection 将请求发布到服务器。以下是我正在使用的代码：

```
NSString* str = @"http://www.myserver.com/post.php?action=rating&grade=A+&name=vasu";
NSURL *url = [NSURL URLWithString:[str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

如果您看到等级，它等于“A+”，
但它只将“A”作为等级发布到服务器。即使我对字符串进行了适当的编码，为什么它无法正确发布请求？
这是必须在服务器上处理的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:36:56.353

+ 号是​​ URL 编码的保留字符（用于“空格”）。虽然 + 的转义值应该是 %2B 之后`stringByAddingPercentEscapesUsingEncoding`，嗯......它不是。你可以做的是添加一个简单的类别`NSString`来绕过这个问题。您可以在此处找到相关的[博客文章，并在此处找到有关](http://madebymany.com/blog/url-encoding-an-nsstring-on-ios)[URL 编码](http://www.permadi.com/tutorial/urlEncoding/)的一些信息

# python - pyGTK 自动调整笔记本选项卡的大小

> ID：11161870
> 
> 赞同：1
> 
> 时间：2012-06-22T18:11:57.990
> 
> 标签：python, pygtk, autosize, shrink

我正在尝试在我的 pygtk gui 中自动调整选项卡的大小。现在我使用一个 for 循环来创建基于 USB 连接到计算机的选项卡。这工作正常。

如果碰巧创建的选项卡数量超过了窗口可以容纳的数量，那么我希望选项卡标签变得更小，并适合内部，就像浏览器选项卡一样。我附上了一张图片来说明这个问题。

![工厂界面](../Images/5045549d6e190640ef3408aa6fc5fbf0.png)

我希望那些缩小并适合 gui 窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T00:16:02.913

```
nb = gtk.Notebook()
nb.set_scrollable(True) 
```

# java - org.osgi.framework.BundleException：找不到包：org.eclipse.equinox.console

> ID：11161871
> 
> 赞同：24
> 
> 时间：2012-06-22T18:11:59.390
> 
> 标签：java, eclipse-plugin, osgi

**命令 ：**

```
\eclipse-SDK-4.2RC3-win32-x86_64_001\eclipse\plugins>java -jar org.eclipse.osgi_3.8.0.v20120529-1548.jar -console 
```

**异常（来自日志文件）**

```
!SESSION 2012-06-22 23:36:27.649 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.6.0_25
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Command-line arguments:  -console

!ENTRY org.eclipse.osgi 4 0 2012-06-22 23:36:28.632
!MESSAGE Could not find bundle: org.eclipse.equinox.console
!STACK 0
org.osgi.framework.BundleException: Could not find bundle: org.eclipse.equinox.console
    at org.eclipse.osgi.framework.internal.core.ConsoleManager.checkForConsoleBundle(ConsoleManager.java:211)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:297)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.main(EclipseStarter.java:151)

!ENTRY org.eclipse.osgi 4 0 2012-06-22 23:36:28.663
!MESSAGE Application error
!STACK 1
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.main(EclipseStarter.java:151) 
```

但是下面的 jar 是可用的。

```
org.eclipse.equinox.console_1.0.0.v20120522-1841.jar 
```

对上述错误有什么建议吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-22T21:01:46.833

您需要安装几个捆绑软件才能使用控制台，如果您仅使用 Equinox 启动，`java -jar ...`您将无法获得这些捆绑软件。

最快的方法是创建一个包含`configuration/config.ini`以下内容的文件：

```
osgi.bundles=file\:org.eclipse.equinox.console_1.0.0.v20111215-1210.jar@start,file:\org.apache.felix.gogo.runtime_0.8.0.v201108120515.jar@start,file:\org.apache.felix.gogo.shell_0.8.0.v201110170705.jar@start 
```

**注意**，您必须根据您实际拥有的内容查看这些捆绑包的版本号。我用 SDK-4.2M6 试过这个，其中一些可能在 RC3 中发生了变化。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-02T17:31:02.927

In the new versions of equinox the built-in OSGi shell has been replaced to the felix gogo shell. If you want to use the new shell you have to place the gogo jars, and define them in your config file.

But, if you liked the OSGi Equinox shell you just have to add the following line to your `config.ini` file to use it: `osgi.console.enable.builtin=true`. In this case no need to add extra jars or any configuration.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-04T17:08:25.773

这是因为 Eclipse 的默认 shell 已移至“Apache Felix Gogo”；因此必须在运行前将必要的捆绑包添加到“运行配置”中。以下是您需要从列表中选择的四个捆绑包：

```
org.apache.felix.gogo.command_0.10.0v<version>.jar
org.apache.felix.gogo.runtime_0.10.0v<version>.jar
org.apache.felix.gogo.shell_0.10.0v<version>.jar
org.eclipse.equinox.console_1.0.100<version>.jar 
```

[![在此处输入图像描述](../Images/4f44547d0a7f6dde18b226aa48e10c0a.png)](https://i.stack.imgur.com/vOzKG.png)

如上图所示添加这些后，程序运行流畅。

参考：[http ://www.digizol.com/2013/11/Eclipse-org-osgi-framework-BundleException-equinox-console.html](http://www.digizol.com/2013/11/Eclipse-org-osgi-framework-BundleException-equinox-console.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-02-04T10:53:04.127

我有同样的问题，我试图`osgi.console.enable.builtin=true`在 config.ini 文件中添加，但似乎每次我运行项目时都会重新创建文件，我解决问题的方式运行配置 --> 参数选项卡`-Dosgi.console.enable.builtin=true`在 VM 参数中添加![在此处输入图像描述](../Images/157bd396aa00e765dbaaab45732a3b53.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-26T19:32:37.357

我在 Ubuntu Linux 上使用 Eclipse Helios 和 Eclipse Juno。我在 Eclipse Juno 上遇到了同样的错误，我无法启动 Eclipse。**我不知道如何，但我的 Java 版本降低到 1.5，这导致了问题**。

在 Eclipse Helios 中，Java 1.5 引起了问题，但我能够启动 Eclipse。Eclipse Helios 出现的错误是：

```
An internal error occurred during: "Loading Web Service DOM...". 
```

`org.eclipse.emf.ecore.util.EcoreEMap$DelegateEObjectContainmentEList`

**将 Java 版本更新到 1.7 解决了这个问题**。我猜 Eclipse Juno 不适用于 Java 1.5 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-13T08:23:55.190

变体之一是选择另一个***java 版本***（较旧的默认版本），eclipse 旧版本在尝试在**java 9 错误上运行时出错**

```
sudo update-alternatives --config java 
```

我选择了**java 8**并且一切正常

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-01T06:20:16.397

尝试使用新的工作区。要强制工作区窗口提示，您需要更改设置`Eclipse_root_dir\configuration\.settings\org.eclipse.ui.ide.prefs`并设置`SHOW_WORKSPACE_SELECTION_DIALOG`为true

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-07-10T17:24:37.930

转到`Eclipse_root_dir\configuration\.settings\org.eclipse.ui.ide.prefs`并将路径更改`RECENT_WORKSPACES`为一些不同的路径。

# mysql - 根据当前步骤编号获取上一步和下一步唯一ID

> ID：11161875
> 
> 赞同：0
> 
> 时间：2012-06-22T18:12:10.550
> 
> 标签：mysql, sql

简单的问题，但我似乎无法找到一个简单的解决方案：

给定以下数据，根据当前步骤编号获取上一步和下一步唯一 HEX ID 的最有效方法是什么：

----+-------------+----------------
ID | 非qID | 步数 |
----+-------------+----------------
21 | BcDeF | 1 |
22 | 吉隆坡 | 2 |
23 | MnOPq | 3 |
24 | RsTuV | 4 |
25 | wXyZa | 5 |
----+-------------+----------------

**例如：**
假设提供的步骤是`3`，我怎样才能获得两者的唯一 HEX ID`2`和`4`？

谢谢！

* * *

**编辑**
这是我目前正在使用的，但对我来说似乎没有那么高效？

```
SELECT
    nxt.stepnum AS NextStep,
    nxt.unqID AS NextUnqID,
    prv.stepnum AS PrevStep,
    prv.unqID AS PrevUnqID
FROM foo w,
(
 SELECT stepnum, unqID FROM foo WHERE stepnum > 3 ORDER BY stepnum LIMIT 1
) AS nxt
,
(
 SELECT stepnum, unqID FROM foo WHERE stepnum < 3 AND ORDER BY stepnum DESC LIMIT 1
) AS prv
WHERE w.stepnum = 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:36:18.393

我修改了你的查询。虽然它有点嵌套，但它应该由非常简单的 sql 引擎索引查找组成（理论上......）

```
SELECT
    nxt.stepnum AS NextStep,
    nxt.unqID   AS NextUnqID,
    prv.stepnum AS PrevStep,
    prv.unqID   AS PrevUnqID

FROM (SELECT NULL) AS dummy -- dummy table to LEFT JOIN to

LEFT JOIN
( SELECT stepnum, unqID FROM foo
  WHERE stepnum = (SELECT MIN(stepnum)
                   FROM foo
                   WHERE stepnum > 5 )
) AS nxt ON true

LEFT JOIN
( SELECT stepnum, unqID FROM foo
  WHERE stepnum = (SELECT MAX(stepnum)
                   FROM foo
                   WHERE stepnum < 5 )
) AS prv ON true 
```

# android - 如何为这个 http post 请求实现 post 方法？

> ID：11161881
> 
> 赞同：0
> 
> 时间：2012-06-22T18:12:42.563
> 
> 标签：android, rest

嗨，这是我在 Android 客户端中的 HTTP Post 请求方法。我不知道如何在 Restful Web 服务器中实现 @POST 方法。

```
public class AndroidHTTPRequestsActivity extends Activity
{
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Creating HTTP client
    HttpClient httpClient = new DefaultHttpClient();
    // Creating HTTP Post
    HttpPost httpPost = new HttpPost(
            "http://localhost:8080/GPS_Taxi_Tracker_Web_Server/resources/rest.android.taxi.androidclientlocation/Login");

    // Building post parameters
    // key and value pair
    List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>(2);
    nameValuePair.add(new BasicNameValuePair("email", "user@gmail.com"));
    nameValuePair.add(new BasicNameValuePair("message",
            "Hi, trying Android HTTP post!"));

    // Url Encoding the POST parameters
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair));
    } catch (UnsupportedEncodingException e) {
        // writing error to Log
        e.printStackTrace();
    }

    // Making HTTP Request
    try {
        HttpResponse response = httpClient.execute(httpPost);

        // writing response to log
        Log.d("Http Response:", response.toString());
    } catch (ClientProtocolException e) {
        // writing exception to log
        e.printStackTrace();
    } catch (IOException e) {
        // writing exception to log
        e.printStackTrace();

    }
} 
```

java restful web服务中post方法的实现是什么，这是我的rest服务器代码有什么问题？

```
@POST
@Path("{Login}")
@Consumes({"application/xml"})
public void Add(@PathParam("email") String email,AndroidClientLocation entity) {
    entity.setEmail(email);
    super.create(entity);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:24:57.720

[http://developer.android.com/tools/devices/emulator.html#networkaddresses](http://developer.android.com/tools/devices/emulator.html#networkaddresses)

`10.0.2.2 Special alias to your host loopback interface (i.e., 127.0.0.1 on your` `development machine)`

```
http://localhost:8080/. 
```

根据[链接](https://stackoverflow.com/questions/9817333/sending-a-post-request-to-localhost)和[链接2](https://stackoverflow.com/questions/5495534/java-net-connectexception-localhost-127-0-0-18080-connection-refused)

Send a request to localhost'的意思是把它发送到本地机器。在您的情况下，这将是 Android 设备。您想将请求发送到您的桌面计算机，即远程主机。问题是 Appengine dev_sever 默认情况下只绑定到本地地址，因此无法远程访问（即，从您的 Android 设备）。您需要传递 --address 选项才能从外部访问。检查您计算机的 IP 并将其作为地址传递。就像是：

dev_appserver.cmd --address=192.168.2.220

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:25:24.147

多问..

1.  你在服务器端使用什么容器
2.  您的基本网址映射是什么。您的 API 方法的路径是 Login，您如何将 URL 的剩余部分（/resources/rest.android.taxi.androidclientlocation）路由到 API。
3.  API 使用 application/xml 但客户端代码未发送/设置 Content-Type 为 application/xml，是否由客户端处理？
4.  当您从客户端运行请求时，您得到的响应（HTTP 错误）是什么。
5.  您的 REST 服务器在哪里运行（内部或外部）。

该问题的答案可能会更清楚地说明该请求。

# objective-c - CGRect 助手？

> ID：11161892
> 
> 赞同：0
> 
> 时间：2012-06-22T18:13:38.923
> 
> 标签：objective-c, ios, cocoa, interface-builder, cgrect

这有点模糊，但我会尽量具体。

你如何使用 CGRect 和 CGRectMake？有没有可以快速找点的助手之类的？我查看了 Interface Builder，但在我看来，没有快速的方法可以找到要在 CGRect 中使用的点。如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T18:18:32.437

如果您尝试在界面生成器中的代码中重新创建界面，则需要查看 Size Inspector：

首先，在界面生成器中选择一个元素：

![在此处输入图像描述](../Images/084dbf430a39df66b405235f18ed06a2.png)

现在查看右侧面板中的 Size Inspector：

![在此处输入图像描述](../Images/077300a7ee9343e97113c68c0b109895.png)

X、Y、Width 和 Height 变量为您提供了足够的信息来创建`CGRect`与元素相同大小的 a：

```
CGRect editFrame = CGRectMake(233.0, 6.0, 67, 32); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:20:49.797

如果需要创建 CGRect，通常可以在 IB 中引用其他对象。引用许多对象具有的框架属性可能是一种简单的方法。例如，self.view.frame 返回一个 CGRect，您可以根据需要存储指向或从中提取信息的指针。

# asp-classic - 仅导出经典 asp 页面中的 html 表

> ID：11161893
> 
> 赞同：2
> 
> 时间：2012-06-22T18:13:43.577
> 
> 标签：asp-classic, export-to-excel

在我的工作中，我们有一些要求，包括使用 asp。我们对此没有经验，我在stackoverflow的其他主题中找不到解决这个问题的方法

问题是，如果我把

```
<%  Option Explicit
Response.ContentType = "application/vnd.ms-excel"
Response.AddHeader "Content-Disposition", "attachment; filename=excelTest.xls"
%> 
```

整个页面转到 excel 文件。

我希望生成的 xls 文件中只有一个表。

我想要的表是由这一行生成的：

```
<% =Result %> 
```

怎样才能做到这一点？

thxxx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:58:37.760

您需要在 URL 中添加一些内容，以使对 XLS 版本的请求与标准版本不同。

通常，您使用查询字符串值执行此操作，因此您的 URL 变为 `http://yoursite.com/yourpage.asp?mode=xls`.

现在在您的代码中，您可以使用：

```
<%
Option Explict
Dim result

''# Build Table into result variable

If Request.QueryString("mode") = "xls" Then 
    Response.ContentType = "application/vnd.ms-excel"    
    Response.AddHeader "Content-Disposition", "attachment; filename=excelTest.xls" 
Else
%>
<html>
    <!-- Normal HTML before the table here -->
<%
End If

Response.Write result

If Request.QueryString("mode") <> "xls" Then
%>
    <!-- Normal HTML after the table -->
</html>
<%
End If
%> 
```

在你的页面中包含一条回到自身的行`?mode=xls`，最后用户将启动excel，只加载表格。

# ios - 通过标签栏和按钮导航屏幕

> ID：11161894
> 
> 赞同：7
> 
> 时间：2012-06-22T18:13:44.493
> 
> 标签：ios, xcode, ios4, uitabbar, uitabbaritem

我有以下问题：

在我的应用程序中，有两种方法可以导航到其他屏幕：通过按钮或标签栏。

所有屏幕都有调用其他屏幕的标签栏，但主屏幕是有按钮但没有标签栏的屏幕。

当我开始开发我的应用程序时，我选择标签栏应用程序模板，如果我通过按标签调用屏幕，它工作正常。当我使用主屏幕时，问题就开始了：

*   我需要在这个特定屏幕中“隐藏”标签栏。
*   在主屏幕中，如果我通过按钮调用新屏幕，则标签栏会在新屏幕中消失（有意义，因为屏幕是通过按钮而不是标签栏调用的）。

为了解决这个问题，我认为也许我可以创建一个自定义标签栏（我还不知道如何）并像 UIControl 一样在我的屏幕上调用它，所以如果我需要更改标签栏，修改将是能够在调用该控件的所有屏幕上。

你有什么建议吗？创建自定义标签栏并像 UIControl 一样使用它是个好主意吗？如果是，我该如何创建一个？

我用它来调用窗口

```
RecurringGiftListViewController *listViewController = [[RecurringGiftListViewController alloc] initWithNibName:@"RecurringGiftListViewController" bundle:nil];
listViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve; 
[self presentModalViewController:listViewController animated:YES]; 
[listViewController release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:06:52.420

您的问题是您将其他视图呈现为“模态”。用这个替换你的代码：

```
RecurringGiftListViewController *listViewController = [[RecurringGiftListViewController alloc] initWithNibName:@"RecurringGiftListViewController" bundle:nil];            
//listViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self.navigationController pushViewController:listViewController animated:YES]; 
[listViewController release]; 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:45:44.220

听起来你根本不应该使用标签栏。当您按下其中一个按钮时，标签栏不应消失。把它想象成你的应用程序的主菜单。您可以拥有其他屏幕，例如导航控制器或占据整个屏幕的模式对话框，但是您应该能够退出回到标签栏。

再次考虑用户界面的结构。也许您可以重新安排它以使您的“主屏幕”成为可从其中一个标签栏页面访问的对话框？

# javascript - 如何向 javascript 数组添加新的复杂条目？

> ID：11161895
> 
> 赞同：2
> 
> 时间：2012-06-22T18:13:58.863
> 
> 标签：javascript, node.js, data-structures, express

我的 Node.js/Express Web 应用程序中有一个 JavaScript 数据结构，如下所示：

```
var users = [
    { username: 'x', password: 'secret', email: 'x@x.com' }
  , { username: 'y', password: 'secret2', email: 'y@x.com' }
]; 
```

收到新用户的已发布表单值后：

```
{ 
  req.body.username='z', 
  req.body.password='secret3', 
  req.body.email='z@x.com'
} 
```

我想将新用户添加到应该导致以下结构的数据结构中：

```
users = [
    { username: 'x', password: 'secret', email: 'x@x.com' }
  , { username: 'y', password: 'secret2', email: 'y@x.com' }
  , { username: 'z', password: 'secret3', email: 'z@x.com' }
]; 
```

如何使用发布的值向我的用户数组添加新记录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T18:14:55.427

您可以使用[push 方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)将元素添加到数组的末尾。

```
var users = [
    { username: 'x', password: 'secret', email: 'x@x.com' }
  , { username: 'y', password: 'secret2', email: 'y@x.com' }
];

users.push( { username: 'z', password: 'secret3', email: 'z@x.com' } ) 
```

你也可以设置`users[users.length] = the_new_element`，但我认为这看起来不太好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:23:10.857

您可以通过多种方式将项目添加到数组中：

[Push](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push) - 添加到最后（想想堆栈）

[Unshift](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/unshift) - 添加到开头（想想队列）

[Splice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice) - 通用（push 和 unshift 是对此的包装）

# python - 如何在搅拌机中安装 python 模块

> ID：11161901
> 
> 赞同：9
> 
> 时间：2012-06-22T18:14:30.270
> 
> 标签：python, blender

我一直在尝试为 blender 安装 pyserial，但我只能将它安装到我的 C 驱动器上的 python32 上，有什么办法可以将它安装到搅拌机或从 python32 导入搅拌机

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T01:26:22.940

Blender 有自己的 python 安装和库。您可以尝试直接将软件包安装到搅拌机。我的目录例如：`...\Blender 2.63\2.63\scripts\modules`

否则，您总是可以直接在代码中硬编码路径`sys.path.append("...")`

[有关安装可用模块的](http://docs.python.org/install/index.html)更多信息，请阅读`python setup.py install --home=<dir>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-08-28T12:28:05.280

对于 Windows，没有特殊权限，并且仅来自 Blender python 脚本：

1.  从搅拌机脚本安装你想要的包（`tqdm`例如下面给出的）：

    ```
    import pip
    pip.main(['install', 'tqdm', '--user']) 
    ```

2.  从搅拌机控制台观察 pip 在您的配置中实际安装包的路径（`WARNING: The script tqdm.exe is installed in 'C:\Users\<Username>\AppData\Roaming\Python\Python39\Scripts' which is not on PATH`）：

    ![Blender控制台，实际安装包位置](../Images/4517545d6ba6dced671ed56cc2753d3c.png)

3.  在搅拌机脚本中，将搅拌机的 pip 安装包的路径添加到`PATH`：

    ```
    import sys
    packages_path = "C:\\Users\\<Username>\\AppData\\Roaming\\Python\\Python39\\Scripts" + "\\..\\site-packages"
    sys.path.insert(0, packages_path ) 
    ```

4.  在脚本中成功导入你的包：

    ```
    import tqdm 
    ```

## 更新 1

要在 v2.93 中显示 Blender 终端，请单击`Window -> Toggle System Console`

![在此处输入图像描述](../Images/ca47ab874d6a4a2b04ac675336fcb451.png)

## 更新 2

整个剧本

```
# 1\. launch in blender python interpreter

import pip
pip.main(['install', 'tqdm', '--user'])

# 2\. watch blender's python path in console output at this moment
# 3\. insert it to packages_path below
# 4\. uncomment the next code and launch script in blender interpreter again

# import sys
# packages_path = "C:\\Users\\<Username>\\AppData\\Roaming\\Python\\Python39\\Scripts" + "\\..\\site-packages" # the path you see in console
# sys.path.insert(0, packages_path )
# import tqdm 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-02T13:19:02.603

如果你在 Windows 上，你可以`python setup.py install`像往常一样使用 blender 提供的 python 解释器。例如，`'c:/Program Files/Blender Foundation/Blender/2.78/python/bin/python.exe' setup.py install`.

在 Linux 上，我认为使用了原生的 python3 解释器，所以没有这种问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T15:31:03.723

永久链接您的python（需要3.5及更高版本）并替换blender中的python目录以直接在blender中使用您的系统python ...

你需要以管理员身份运行cmd（使用右键单击该项目）

```
D:\Blender Foundation\Blender\2.77>mv python python_old
D:\Blender Foundation\Blender\2.77>mklink /j python d:\Anaconda2\envs\py3
Junction created for python <<===>> d:\Anaconda2\envs\py3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-18T07:56:25.173

经过大量搜索和实验，我找到了这个解决方案：

1.  在 Blender 安装中授予 python 文件夹的所有权限
2.  下载 get-pip.py 并使用 Blender 的内部 python 可执行文件安装它
3.  现在您可以使用内部 pip 安装任何模块： ...\bin>python.exe -m pip install module_name

此处描述了更多详细信息：[https ://blender.stackexchange.com/questions/218486/installing-pythonnet-in-blender?noredirect=1#comment368756_218486](https://blender.stackexchange.com/questions/218486/installing-pythonnet-in-blender?noredirect=1#comment368756_218486)

# c# - 从数据库中检索

> ID：11161906
> 
> 赞同：0
> 
> 时间：2012-06-22T18:15:03.170
> 
> 标签：c#, asp.net, sql-server

我有一个带有这些表的预注册系统：

1.  学生信息
2.  培训班
3.  部门
4.  系统管理员
5.  完全注册课程
6.  注册课程不完整

使用存储过程创建登录后，我需要显示与特定`dep id`. 我做的。之后，我需要学生能够选择每门课程，然后将其添加到表格中，这就是问题开始的地方......

我有两种按钮。其中之一是`Registered Completely`它意味着用户永远无法返回并更改课程（我做到了），但第二个是`Registered Incompletely`它意味着用户可以返回并查看他/她选择的内容，然后取消选中它或检查其他内容。

---> 如果他/她回去，我想以这种方式这样做. 还显示尚未检查的课程。所有这些都在一个网格视图中。

请帮我。我做了我的讲座需要的一切，但我试图解决的这部分有点棘手。我曾经会话然后保存用户检查的网格视图的索引，然后将其插入到数据库中，但是您知道用户可以选择 20 多个单位以及如何使用完整的代码来解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:29:10.613

在`Registered Incompletely`场景中，您需要使用 .保存选定的课程、用户和标志`Registered Incompletely`。然后，任何时候同一用户登录或返回，您都可以加载所有课程并根据之前保存的数据标记所选课程。如果用户是，`Registered Completely`那么您可以将`Registered Completely`标志和用户详细信息保存在数据库中。

编辑：

学生和注册完成状态需要保存在数据库中，在这里你可以有布尔值。true 表示完整，false 表示不完整。如果您有几个页面要选择课程，那么在您下一个移动的每个页面中，将当前课程选择保存在数据库中。它可以在您需要时使用。

# scala - 如何定义一个接受参数并返回值的函数 def？

> ID：11161907
> 
> 赞同：3
> 
> 时间：2012-06-22T18:15:11.000
> 
> 标签：scala, functional-programming, arguments, function

我希望能够定义一个接受参数（例如文件对象）并返回一些东西（例如布尔值）的函数，然后将该函数（不是布尔值！）传递给另一个函数并接受函数调用发送函数。

我的背景是 Java，虽然我知道如何发送一个不接受任何参数并且在 Scala 中不返回任何内容的函数，但我似乎无法在互联网上找到一个很好的解释来说明如何做到这一点。

我可以用 Java 实现该程序，但我真的很想知道如何在 Scala 中实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:18:11.733

首先是一个示例函数（实际上是一个方法）：

```
import java.io.File

def fileExists(file: File) = file.exists 
```

以及将该函数（实际上是一个方法）作为参数传递给另一个函数的方法（实际上......你知道......）：

```
def findFiles(files: Seq[File], predicate: (File) => Boolean) =
  files filter predicate 
```

此方法接受一系列文件并过滤该序列，仅选择传递给定谓词的文件。在这种情况下，我们只返回现有文件：

```
findFiles(Seq(new File("a.txt"), new File("b.txt")), fileExists) 
```

看看我们如何优雅地将`exists`方法作为参数传递？或者，如果您想手动调用谓词：

```
def fileMatches(file: File, predicate: (File) => Boolean) =
  predicate(file) 
```

### 旁注：“ *...实际上是一种方法*”

该`findFiles()` *方法*将`predicate` *函数*作为参数。然而`fileExists()`，有一种*方法*——这是由于一种称为*eta-expansion*的机制而起作用的——透明地将方法包装到函数中。

# xcode - 如何使用 Storyboard 制作可在代码中使用的弹出框？

> ID：11161909
> 
> 赞同：10
> 
> 时间：2012-06-22T18:15:12.310
> 
> 标签：xcode, storyboard, popover

我正在构建一个表单集合，每个表单都包含多个字段。一些字段是`UITextField`s 将显示日期。我创建了一个名为 的新类`DatePickerTextField`，它是 的后代`UITextField`。当 a`DatePickerTextField`被点击时，我希望一个`UIDatePicker`控件出现在 a 中`popover`。

我的问题是如何使用情节提要来实现`popover`？当场景中有特定的可见控件时，我可以进行转场。但是我如何`popover`在场景中表示一个可以附加到任何`DatePickerTextField`激活的实例的泛型呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-22T20:33:00.807

您可以创建未连接到任何控件的 segue，但我认为没有办法从代码中指定弹出框的锚点。另一种选择是创建不与任何 segue 连接的 ViewController。编辑情节提要时，创建将放置在弹出窗口中的 ViewController，选择它并导航到*Utilities 窗格*-> *Attributes Inspector*。将*Size*设置为*Freeform*，将*Status Bar*设置为*None*，指定将用于从代码中实例化 ViewController 的唯一*标识符。*现在您可以通过选择 ViewController 并导航到*Utilities 窗格*-> *Size Inspector来更改 ViewController 的大小*.

之后，您可以从代码创建弹出框：

```
- (IBAction)buttonPressed:(id)sender {
    UIView *anchor = sender;
    UIViewController *viewControllerForPopover = 
        [self.storyboard instantiateViewControllerWithIdentifier:@"yourIdentifier"];

    popover = [[UIPopoverController alloc] 
               initWithContentViewController:viewControllerForPopover];
    [popover presentPopoverFromRect:anchor.frame 
                             inView:anchor.superview 
           permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

需要注意的是，您需要将对 popover 的引用保留为类的 ivar，否则它将崩溃，因为 UIPopoverController 将在`buttonPressed`返回后被释放和释放：

```
@interface MyViewController : UIViewController {
//  ...
    UIPopoverController *popover;
//  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T16:27:31.633

所以，我有一个类似的问题，如果其他人可能受益，我想我会分享它，因为我从 stackoverflow 中受益匪浅。

此解决方案允许您设置可自定义的弹出框 segue 的锚点。它还允许您将 segue 配置为模态或非模态（我找不到通过调暗外部上下文来防止 segue 的方法，所以如果有人知道如何做到这一点，我会有兴趣听到它）；这是通过设置弹出框控制器的直通视图来完成的。我还添加了指定自定义视图的能力，而不是源视图控制器的视图（因为我需要这个能力）；这部分对解决方案并不重要。

DynamicPopoverSegue.h

```
@interface DynamicPopoverSegue : UIStoryboardPopoverSegue

@property BOOL isModal;
@property UIView* sourceView;
@property CGRect anchor;

@end 
```

DynamicPopoverSegue.m

```
@implementation DynamicPopoverSegue

- (void)perform
{
   if (!self.popoverController.popoverVisible)
   {
      UIViewController* dst = (UIViewController*)self.destinationViewController;
      UIViewController* src = (UIViewController*)self.sourceViewController;

      UIView* inView =  _sourceView ? _sourceView : src.view;

      self.popoverController.contentViewController = dst;
      if (!_isModal)
      {
         [self.popoverController setPassthroughViews:[[NSArray alloc] initWithObjects:inView, nil]];
      }
      [self.popoverController presentPopoverFromRect:_anchor
                                              inView:inView
                            permittedArrowDirections:UIPopoverArrowDirectionAny
                                            animated:YES];
   }
}

@end 
```

然后，您只需在情节提要中将 segue 设置为“Custom”，并将 segue 类设置为“DynamicPopoverSegue”。在我的例子中，因为我想将它与视图中的动态层相关联，所以我无法设置锚点，所以我通过控制点击视图控制器下方栏中的视图控制器图标到我所在的视图控制器来创建 segue用于呈现弹出框。

要调用 popover segue：

```
[self performSegueWithIdentifier:@"MyPopoverSegue" sender:self]; 
```

并配置弹出框segue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   if ([[segue identifier] isEqualToString:@"MyPopoverSegue"])
   {
      DynamicPopoverSegue* popoverSegue = (DynamicPopoverSegue*)segue;
      // set the anchor to wherever you want it to be
      popoverSegue.anchor = _destinationFrame;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T07:28:07.090

```
- (IBAction)pressItemChooseOprateRoom:(id)sender {
    if (isPad){
        // UIView *anchor = sender;
        UIViewController *viewControllerForPopover =
        [self.storyboard instantiateViewControllerWithIdentifier:@"OperateRoomList"];

        _myPopover = [[UIPopoverController alloc]
                      initWithContentViewController:viewControllerForPopover];

        CGRect rc=[self getBarItemRc:sender];
        [_myPopover presentPopoverFromRect:rc
                                    inView:self.view
                  permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

        [MLControl shared].popover =self;
        // [self perfformSegueWithIdentifier:SEGUE_POP_OPERATEROOM sender:self];
    }else{
        [self iphoneOpenOperateRoomList];
        /* [self performSegueWithIdentifier:@"iPhonePushOperateRoom" sender:self];
         */
    }
}

-(void)iphoneOpenOperateRoomList{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"OperateRoomList"];
    //        if (!index.showTabBar) {
    //            vc.hidesBottomBarWhenPushed = YES;
    //        }

    [self.navigationController pushViewController:vc animated:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-25T15:47:10.520

刚刚将 Jonnywho 的答案用于我的 SWIFT 项目。如果您需要它：

这是 SWIFT 版本：

```
 let anchor: UIView = sender
    var viewControllerForPopover = self.storyboard?.instantiateViewControllerWithIdentifier("GameAboutViewController") as! UIViewController?

    let popover = UIPopoverController(contentViewController: viewControllerForPopover!)
    popover.presentPopoverFromRect(anchor.frame, inView: anchor, permittedArrowDirections: UIPopoverArrowDirection.Any, animated: true) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-05T18:55:23.873

在场景停靠栏中添加一个 UIView。

您可以将其作为子视图添加到视图控制器上的任何现有视图。

然后，您可以根据需要切换它的 isHidden 属性。

您可以添加多个此类子视图并创建许多此类弹出窗口。

这种技术将使您免于设置新的 View Controller 和使用 segues。

# asp.net-mvc-3 - 带有 mvc 集合模型绑定的 knockoutjs

> ID：11161910
> 
> 赞同：0
> 
> 时间：2012-06-22T18:15:19.857
> 
> 标签：asp.net-mvc-3, knockout.js, model-binding

我正在使用 knockoutjs 来呈现项目集合。在允许用户进行一些内联​​编辑后，我需要将集合发布回服务器。但是，该集合没有在服务器上填充，因为我没有使用 name="[0].Blah" 命名约定。有谁知道如何使用 knockoutjs 呈现这样的名称属性，或者如何创建允许我从 ValueProvider 中提取值的模型绑定器？

您可以在下面的调试过程中看到 ValueProvider 的屏幕截图。

[http://i.imgur.com/zSU5Z.png](http://i.imgur.com/zSU5Z.png)

这是我的托管 ViewModel：

```
public class FundLevelInvestmentUploadResult
{
    public string FileName { get; set; }
    public IList<FundLevelInvestmentViewModel> Items { get; set; }
    public int NumberOfErrors { get; set; }

    public bool ShowErrorsOnly { get; set; }

    public FundLevelInvestmentUploadResult()
    {
        Items = new List<FundLevelInvestmentViewModel>();
    }
} 
```

这是“项目”的托管类：

```
public class FundLevelInvestmentViewModel
{
    private string _fund;
    private string _fundType;
    private string _date;
    private string _netOfWaivedFees;
    private string _waivedFees;
    private string _bcip;
    private string _fxRate;

    public uint RowIndex { get; set; }

    public int? DealCode { get; set; }
    public bool DealCodeIsValid { get; set; }

    public string Fund
    {
        get { return _fund; }
        set { _fund = GetString(value); }
    }
    public bool FundIsValid { get; set; }

    public string FundType
    {
        get { return _fundType; }
        set { _fundType = GetString(value); }
    }
    public bool FundTypeIsValid { get; set; }

    public string DateOfInvestment
    {
        get { return _date; }
        set { _date = GetString(value); }
    }
    public bool DateOfInvestmentIsValid { get; set; }

    public string NetOfWaivedFees
    {
        get { return _netOfWaivedFees; }
        set { _netOfWaivedFees = GetString(value); }
    }
    public bool NetOfWaivedFeesIsValid { get; set; }

    public string WaivedFee
    {
        get { return _waivedFees; }
        set { _waivedFees = GetString(value); }
    }
    public bool WaivedFeeIsValid { get; set; }

    public string BCIP
    {
        get { return _bcip; }
        set { _bcip = GetString(value); }
    }
    public bool BCIPIsValid { get; set; }

    public string ExchangeRateToUSD
    {
        get { return _fxRate; }
        set { _fxRate = GetString(value); }
    }
    public bool ExchangeRateToUSDIsValid { get; set; }

    public string FileName { get; set; }

    private IList<string> _errors;
    public IList<string> Errors
    {
        get { return _errors ?? (_errors = new List<string>());}
        set { _errors = value; }
    }

    public bool Show { get; set; }

    public FundLevelInvestmentViewModel()
    {
        Errors = new List<string>();
        Show = true;
    }

    // knockoutjs is returning "null" instead of "" for a null object when calling ko.mapping.fromJS
    private string GetString(string value)
    {
        if (value == "null")
            return string.Empty;

        return value;
    }
} 
```

这是我的淘汰视图模型：

```
var viewModel = {
    FileData: ko.observableArray([]),

    validateFile: function (file, event) {
        $.ajax({
            type: 'post',
            url: newUrl,
            data: ko.mapping.toJS(file)
        }).done(function (data) {
            var newFile = ko.mapping.fromJS(data);
            var index = file.Items.indexOf(file);
            viewModel.FileData.replace(file, newFile);
        });
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:53:18.590

如果您使用的是 2.1.0.0 或更高版本的淘汰赛，您可以从可观察数组中呈现 name 属性，如下所示。

```
<input data-bind='attr: { name: "Items["+$index()+"].DealCode"}' /> 
```

# html - C# 控制/代码显示带有图像标签和 CSS 的本地 HTML 文件

> ID：11161912
> 
> 赞同：0
> 
> 时间：2012-06-22T18:15:22.087
> 
> 标签：html, css, winforms, c#-4.0, wpf-controls

我正在开发一个应用程序，设计的一部分是有一个包含 HTML 文件的本地文件夹和一个用于 HTML 文件使用的图像的文件夹。

HTML 文件可以具有内联 CSS 声明，该声明也需要显示/呈现。CSS 将是非常基本的，如字体大小、颜色、填充等，但没有像 CSS 3.0 那样高级，甚至没有高级 CSS 2.0 功能。

HTML 文件并不复杂，只是带有一些图像标签的标签中的文本，并带有一些 CSS 来在某些标签上设置样式。将没有 JavaScript、没有 PHP 等。所有文件都是本地文件，而不是从 Web 加载的。

我似乎无法在线找到控件或代码来显示这种文件内容。我发现了一些可以显示 HTML 代码但不渲染 CSS 或渲染图像的代码。此控件需要只读，因此用户无法编辑视图。

我正在使用 Visual Studio 2010，我的应用程序在 .NET 4.0 中使用 WPF WinForms。

只是为了澄清我想要什么，我想要代码在我的表单上呈现上述 HTML 文件或允许我呈现这些 HTML 文件的控件。如果 HTML 文件内容不适合控件，控件需要能够支持滚动条。如果调整了窗体的大小，该控件还需要能够调整大小。

谢谢，我期待看到这个问题的一些解决方案！我以前从未这样做过，很高兴看到可用的内容以及您过去为解决此问题所做的工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:20:11.043

使用 WebBrowser 控件并调用 Navigate 方法，并将 Uri 指向 HTML 文件的本地文件路径。浏览器控件可以显示在任何 Wpf 容器中（网格/边框/堆栈面板等）。

参考示例[可在 msdn 获得](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.aspx)。

# php - 使用 mysql 进行高级查询：变量/子查询？

> ID：11161913
> 
> 赞同：2
> 
> 时间：2012-06-22T18:15:35.900
> 
> 标签：php, mysql, sql, variables

我想在收件箱中获取最新的 5 条消息。要获得 5 个最新的 ID，我需要使用它：

```
SELECT
    MAX(id)
FROM 
    samtaler
WHERE 
    brukerid_mottaker = 1 
GROUP BY brukerid_avsender
ORDER BY id DESC
LIMIT 5 
```

这将返回我需要的正确 ID。但是在同一个查询中，我想从同一个表中选择数据，即获得从上面这个查询返回的 id 的行。

我已经尝试了一些东西，变量和自加入，但没有运气：

```
select 
    p2.title, 
    p2.message,
    @a:=max(p1.id)
from 
    samtaler p1
    join samtaler p2
    on (@a = p2.id)
where
    p2.brukerid_mottaker = 1 
group by p2.brukerid_avsender
order by p2.id DESC
limit 5 
```

为什么这不起作用？

这是数据库中的当前数据：[![](../Images/f387ed3dcdee139f138095bf4bf1481f.png)](https://i.stack.imgur.com/qmyUF.png) 在这种情况下，我想返回第 13 行和第 4 行。抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:19:38.347

加入子查询，而不是简单的自联接。`IN()`子句不起作用，因为不能`LIMIT`在`IN()`. 它应该在连接的子查询中工作：

```
SELECT
  p1.title,
  p1.message,
  p2.id
FROM 
  samtaler p1
  JOIN (
    SELECT MAX(id) AS id
    FROM 
        samtaler
    WHERE 
        brukerid_mottaker = 1 
    GROUP BY brukerid_avsender
    ORDER BY id DESC
    LIMIT 5
  ) p2 ON p1.id = p2.id 
```

通过这种方法，不需要变量。

# html - 简单的工具提示 - 标题属性？

> ID：11161915
> 
> 赞同：5
> 
> 时间：2012-06-22T18:15:39.427
> 
> 标签：html, tooltip

当我想在用户将鼠标悬停在对象上时显示消息时，最近我只在我的 html 标签上使用了*title*属性，因为它很简单并且不会自动离开屏幕。

**问题：**对于工具提示来说，使用*title*属性是一件坏事吗？

忽略您无法自定义它的事实，我对使用自定义工具提示的功能（例如标准用户如何与之交互）感到好奇。例如，我阅读的[特定网络漫画使用](https://stackoverflow.com/a/84589/1411473)*title*属性在您将鼠标悬停在它上面时添加一个诙谐的评论/事实。然而，似乎并没有多少人知道它。

因此，似乎*标题*可能适合评论，甚至是图片的作者，但它是否适合真正简单的工具提示？

考虑到一个“真正的”工具提示，您通常需要 1-2 个额外的元素、css（取决于您如何设置它，可能是一些用于放置的内联样式），甚至可能是 java-script，是*title*属性不好使用因为（再次）它不能自定义，通常是关于元素的一个小的离题细节，并且只在设定的时间后出现。

**注意：**如果有帮助（深思熟虑），我目前提出这个问题的情况是，我喜欢当一个网站有类似的东西`[?]`让你悬停以查找更多详细信息而不将它们推到页面中，从而保持简单。另外，我从 w3schools 学习了 html，他们从来没有提到*title*属性，所以不确定它们的用途/应该用于什么。（是的，提到 w3schools 部分是获得同情的（糟糕）尝试）

而且我觉得这个问题有点奇怪，考虑到 SO 使用它们很多，但随意假设我对此一无所知......好吧......我真的不知道）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T19:50:45.253

不应使用标题属性 (@title)。

1.  每个浏览器都使用@title 做自己的事情，即使它看起来一样。
2.  对于只使用键盘的人，他们无法获取@title 中的信息。
3.  从移动设备访问网站的人无法获取信息。
4.  一些但不是所有的辅助技术都可以获取@title 中的信息
    1.  有些允许在启用后读取它。没有多少人（用户）知道。
    2.  其他技术只是忽略链接文本并仅读取@title。

例如 4.2：

```
<a href="#" title="Are you sure?">Delete your account</a> 
```

这将显示：

> 你确定吗？关联

延伸阅读：[PG：标题属性](http://www.paciellogroup.com/blog/2012/01/html5-accessibility-chops-title-attribute-use-and-abuse/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:25:19.560

首先，谢谢你的问题。好想法。我想我们这些人 [我说的是像我这样的业余编码员] 不需要开发一个大网站，或者缺乏这种专业知识。我们只需要继续以优化的方式完成我们的工作。因此，类似地，我也遇到了几乎所有使用*标题*作为工具提示的脚本。猜猜，这是解决它的简单方法。此外，只要工具提示有吸引力，不慢，并且满足我们的需要：一切都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:28:45.873

`title`属性简单，简单。它不可靠。确实没有工具提示机制，但是`title`属性生成的工具提示的可用性相当差：字体太小，行控制有问题，定时消失，没有办法（对普通用户）让它保持原样，即使你可以实际阅读它你是个慢读者。此外，通常不会向用户提示工具提示的可用性。

# ios - iOS AudioSessionInitialize 错误

> ID：11161920
> 
> 赞同：0
> 
> 时间：2012-06-22T18:15:55.447
> 
> 标签：ios, audiosession

我正在编写一个使用音频队列的 iPad 应用程序。我遇到了由于多次调用 AudioSessionInitialize 而导致的错误。我正在尝试找到一种方法来测试是否已经调用了 AudioSessionInitialize 以避免这种情况，但到目前为止还没有运气。有没有人有办法做到这一点？

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:23:36.880

您可以按照以下方式将其包装在 dispatch_once 块中：

```
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    AudioSessionInitialize(NULL, NULL, InterruptionListenerCallback, clientData);
    // Perform other setup here...
}); 
```

尽管从长远来看，您可能会发现使用会话的隐式初始化并通过委托处理事件更容易，如下所述：

[音频会话编程指南 - 初始化您的音频会话](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html#//apple_ref/doc/uid/TP40007875-CH3-SW4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:41:31.830

由于音频会话当前是一个全局属性，您可以在初始化时设置一个 C 全局变量标志，然后在尝试（重新）初始化之前检查这个全局变量。但是，如果您的应用程序是多线程的，则 dispatch_once 块不太可能引发竞争条件错误。

# eclipse - Eclipse 插件未出现在首选项、视图或透视图中

> ID：11161926
> 
> 赞同：0
> 
> 时间：2012-06-22T18:16:34.510
> 
> 标签：eclipse, rest, maven, jira

我正在使用 Eclipse 3.7 Indigo，Java 开发人员 IDE。我已经安装了 Maven、RESTClient、e4HTTP。但是，我没有在首选项、视图、透视图中看到它们。我到处找找原因，我完全迷路了。有什么我想念的吗？有诀窍吗？谢谢...彻底沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:41:33.027

当您说您安装了这些产品时，我假设您的意思是您在 Eclipse 中安装了这些产品的插件，而不仅仅是在您的机器上。

请尝试以下故障排除步骤：

1.  打开插件注册表视图（Window -> Show View...）并确保列出了您安装的插件。
2.  使用 -clean park 调用 Eclipse。这将迫使 Eclipse 刷新几个 chaches，这通常会修复类似的问题。
3.  打开错误日志视图（窗口 -> 显示视图...）并单击红色 X 以清除消息。停止并启动 Eclipse 以查看日志中是否出现任何信息性或其他有用的消息。

# c# - 如何执行 ChartControl 的拖放/交换？

> ID：11161928
> 
> 赞同：0
> 
> 时间：2012-06-22T18:16:38.287
> 
> 标签：c#, winforms, c#-4.0, drag-and-drop, devexpress

我试图让我的用户交换两个 DevExpress 图表控件（尽管我相信几乎任何控件都应该工作......），方法是将一个拖到另一个之上。我已经为我的 TabControl 完成了此操作（以允许交换/移动选项卡），但由于某种原因，我似乎在这里遗漏了一些东西，这阻止了我对 ChartControl 做同样的事情。

它“应该”在图表控件上绘制一个灰色框，并允许用户将其拖动到他们喜欢的任何地方，但我只是得到一个带有条纹的黑色圆圈。

这是我到目前为止编写的代码，希望你们中的一个人能够发现错误，我可以停止拉扯我的头发！:)

```
private void ChartControlMouseMove(object sender, MouseEventArgs e)
{
    // Handle Mouse move only if left button is pressed.
    if (e.Button == MouseButtons.Left)
    {
        var chartControl = (ChartControl)sender;

        // If the mouse moves outside the rectangle, start the drag.
        if (!rectDragBoxFromMouseDown.Equals(Rectangle.Empty)
            & !rectDragBoxFromMouseDown.Contains(e.X, e.Y))
        {
            Invalidate();
            DoDragDrop(chartControl, DragDropEffects.Move);
            CalcRectDragBox(e.X, e.Y);
            Invalidate();
        }
    }
}

private void ChartControlMouseDown(object sender, MouseEventArgs e)
{
    CalcRectDragBox(e.X, e.Y);
}

private void CalcRectDragBox(int x, int y)
{
    // Remember the point where the mouse down occurred. The DragSize indicates
    // the size that the mouse can move before a drag event should be started.
    var dragSize = SystemInformation.DragSize;
    // Create a rectangle using the DragSize, with the mouse position being
    // at the center of the rectangle.
    rectDragBoxFromMouseDown = new Rectangle(
        new Point(x - (dragSize.Width/2), y - (dragSize.Height/2)), dragSize);
}

private void ChartControlDragOver(object sender, DragEventArgs e)
{
    var chartControl = (ChartControl)sender;

    // get the control we are hovering over.
    var hitInformation = chartControl.CalcHitInfo(chartControl.PointToClient(new Point(e.X, e.Y)));
    if ((hitInformation != null))
    {
        //ChartHitInfo hoverTab = hitInformation;

        if (e.Data.GetDataPresent(typeof(ChartControl)))
        {
            e.Effect = DragDropEffects.Move;
            var dragTab = (ChartControl)e.Data.GetData(typeof(ChartControl));

            if (dragTab != chartControl)
            {
                for (int i = 0; i < layoutControlGroupDashboard.Items.Count; i++)
                {
                    var layoutControlItem = layoutControlGroupDashboard.Items[i] as LayoutControlItem;
                    if (layoutControlItem != null && layoutControlItem.Control == chartControl)
                    {
                        for (int j = 0; j < layoutControlGroupDashboard.Items.Count; j++)
                        {
                            var controlItem = layoutControlGroupDashboard.Items[j] as LayoutControlItem;
                            if (controlItem != null && controlItem.Control == dragTab)
                            {
                                if (!_ignoreNextDrag)
                                {
                                    _ignoreNextDrag = true;
                                    layoutControlGroupDashboard.BeginInit();
                                    var layoutControlItemi = layoutControlGroupDashboard.Items[i] as LayoutControlItem;
                                    if (layoutControlItemi != null)
                                    {
                                        Control tempControlI =
                                            layoutControlItemi.Control;
                                        var layoutControlItemj = layoutControlGroupDashboard.Items[j] as LayoutControlItem;
                                        if (layoutControlItemj != null)
                                        {
                                            layoutControlItemi.BeginInit();
                                            layoutControlItemj.BeginInit();
                                            Control tempControlJ =
                                                layoutControlItemj.Control;

                                            layoutControlItemi.Control =
                                                null;
                                            layoutControlItemj.Control =
                                                null;
                                            layoutControlItemi.Control =
                                                tempControlJ;
                                            layoutControlItemj.Control =
                                                    tempControlI;
                                            layoutControlItemi.EndInit();
                                            layoutControlItemj.EndInit();
                                        }
                                    }

                                    layoutControlGroupDashboard.EndInit();
                                    break;
                                }
                                else
                                {
                                    _ignoreNextDrag = false;
                                    break;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    else
    {
        e.Effect = DragDropEffects.None;
    }
} 
```

同样，这个想法是允许用户交换控件只需单击单击拖动周围的东西......希望这只是我错过的一些简单的东西，但我一辈子都看不到它！

编辑：这是我尝试过的（首先将我的图表添加到面板......）

```
 Panel panel = new Panel();
            panel.Name = Guid.NewGuid().ToString();
            panel.Controls.Add(chartControl);

            var dashboardItem = new LayoutControlItem(layoutControlDashboard, panel)
                                    {
                                        Padding = new DevExpress.XtraLayout.Utils.Padding(0),
                                        Spacing = new DevExpress.XtraLayout.Utils.Padding(0),
                                        SizeConstraintsType = SizeConstraintsType.Custom
                                    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:02:33.667

这是修改后的 ChartControlDragOver 方法，在将 ChartControl 放置在 LayoutControl 中时有效：

```
private void ChartControlDragOver(object sender, DragEventArgs e) {
var chartControl = (ChartControl)sender;

// get the control we are hovering over.
var hitInformation = chartControl.CalcHitInfo(chartControl.PointToClient(new Point(e.X, e.Y)));
if ((hitInformation != null)) {
    //ChartHitInfo hoverTab = hitInformation;

    if (e.Data.GetDataPresent(typeof(ChartControl))) {
        e.Effect = DragDropEffects.Move;
        var dragTab = (ChartControl)e.Data.GetData(typeof(ChartControl));
        if (dragTab == chartControl) return;
        InsertType insertType = InsertType.Left;
        Point hitPoint = chartControl.Parent.PointToClient(new Point(e.X, e.Y));
        if (dragTab.Bounds.Left < hitPoint.X && dragTab.Bounds.Right > hitPoint.X) {
            if (dragTab.Bounds.Top > hitPoint.Y)
                insertType = InsertType.Top;
            else if (dragTab.Bounds.Bottom < hitPoint.Y)
                insertType = InsertType.Bottom;
        } else if (dragTab.Bounds.Right < hitPoint.X)
            insertType = InsertType.Right;
        else if (dragTab.Bounds.Left > hitPoint.X)
            insertType = InsertType.Left;
        LayoutControl layout = (LayoutControl)chartControl.Parent;
        layout.GetItemByControl(dragTab).Move(layout.GetItemByControl(chartControl), insertType);
    }
} else {
    e.Effect = DragDropEffects.None;
} 
```

}

# powershell - 在 PowerShell 的屏幕和文件中显示输出

> ID：11161929
> 
> 赞同：30
> 
> 时间：2012-06-22T18:16:44.960
> 
> 标签：powershell

我怎样才能让所有这些不仅在屏幕上输出，而且以[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)格式保存到文本文件中？

```
$OUs = Get-ADObject -LDAPFilter "(objectCategory=organizationalUnit)" `
     -SearchBase "OU=GA,OU=EAST,DC=corp,DC=chm,DC=com" | Select distinguishedName
 ForEach ($OU In $OUs)
 {
     $OU.distinguishedName
     Get-ADComputer -SearchBase $OU.distinguishedName -SearchScope OneLevel `
         -Filter * | Select Name
 } 
```

我试过了

```
$OUs = Get-ADObject -LDAPFilter "(objectCategory=organizationalUnit)" `
     -SearchBase "OU=GA,OU=EAST,DC=corp,DC=chartercom,DC=com" | Select distinguishedName
 ForEach ($OU In $OUs)
 {
     $OU.distinguishedName
     Get-ADComputer -SearchBase $OU.distinguishedName -SearchScope OneLevel `
         -Filter * | Select Name
 } | | export-CSV c:\temp\outfile.csv –noType 
```

和许多其他格式，但我总是得到错误：

> 不允许使用空的管道元素。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-22T18:20:56.067

使用[`Tee-Object`](http://technet.microsoft.com/en-us/library/ee177014.aspx)cmdlet。

> Tee-Object cmdlet 使您能够在 Windows PowerShell 窗口中显示数据并将相同的数据保存到文本文件中，所有这些都使用一个命令。

```
dir | Tee-Object -file dir.txt 
```

你应该像这样使用它，

```
 ForEach ($OU In $OUs)
 {
     $OU.distinguishedName
     Get-ADComputer -SearchBase $OU.distinguishedName -SearchScope OneLevel `
         -Filter * | Select Name
 } | Tee-Object -file c:\temp\outfile.txt 
```

**注意：**它有一个别名，`tee`，与 Unix' 相同[`tee`](https://en.wikipedia.org/wiki/Tee_%28command%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T22:41:07.483

> 不允许使用空的管道元素。

最后一行有一个重复的栏：

```
} | | export-CSV c:\temp\outfile.csv –noType 
```

这并不能完全修复错误，因为您不能直接从 foreach 循环进行管道传输。您可以将其以另一种方式导出到 CSV 文件，而不是像 Tee-Object 那样的文本文件（您可以将 Tee-Object 转换为 CSV）。这样，它将结果输出到 CSV 文件并将结果打印到屏幕上：

```
$OUs = Get-ADObject -LDAPFilter "(objectCategory=organizationalUnit)" `
         -SearchBase "OU=GA,OU=EAST,DC=corp,DC=chartercom,DC=com" | Select distinguishedName

$results = @()
ForEach ($OU In $OUs)
{
    $OU.distinguishedName
    Get-ADComputer -SearchBase $OU.distinguishedName -SearchScope OneLevel `
                   -Filter * | Select Name
} $results | Export-Csv c:\temp\outfile.csv -NoTypeInformation
write-host $results 
```

这也可以使用更简单的脚本来完成：

```
Get-ADComputer -SearchBase "OU=GA,OU=EAST,DC=corp,DC=chartercom,DC=com" -SearchScope OneLevel -Filter * | Select Name | Export-Csv c:\temp\outfile.csv -NoTypeInformation
Import-Csv c:\temp\outfile.csv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-24T14:21:27.333

这有效：

```
Get-WmiObject -Class Win32_Product | Select Name, Version | Sort Name | Tee-Object -file h:\InstalledApps.TXT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-20T13:52:16.640

tee-object 很好，但非常有限。对于那些需要更多控制功能的人 - 使用来自 eNLib 的 write-log 功能

安装模块 eNLib

write-log 允许 fork 文本、对象、使用 start-logging 功能定义日志文件，不需要每次都定义日志文件名称 - 对于高级脚本非常有用。

# jquery - div 元素未扩展以保存 HTML 文本

> ID：11161930
> 
> 赞同：0
> 
> 时间：2012-06-22T18:16:48.707
> 
> 标签：jquery, css

*HTML：*

```
<div id="Header">
    <div id="HeaderTitle">
        This is a very long title which should should force HeaderTitle to expand.
    </div>
</div>​ 
```

*JavaScript：*

```
$(document).ready(function() {
    $('#HeaderTitle').mouseover(function(e) {
        var distanceToMove = $(this).width() - $('#Header').width();
        var timeToTakeMoving = 30 * distanceToMove;

        $(this).animate({
            marginLeft: "-" + distanceToMove + "px"
        }, timeToTakeMoving);
    }).mouseout(function(e) {
        $(this).stop(true).animate({
            marginLeft: "0px"
        });
    });
});​ 
```

*JSFiddle：http:* [//jsfiddle.net/QQtp6/7/](http://jsfiddle.net/QQtp6/7/)

我希望让 div 'HeaderTitle' 展开以将文本保存在其中。这将允许我在鼠标悬停时滚动文本。为什么 div 不保存其内容？

编辑：这里的目标不是让所有文本都可见。我想在固定宽度的 div 中显示部分文本，然后通过该 div 滚动文本。

例子：

如果文本是：“FULL TEXT HERE”，我希望只有“FULL TE”才会显示，直到鼠标悬停。到那时，我希望它会过渡到“TEXT HERE”，而 FULL 会隐藏到 LHS。

EDIT2：我相信解决方案是对 HeaderTitle 使用跨度而不是 div。一瞬间。

EDIT3：发布的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:21:09.650

两者`overflow: hidden`都`width: 100px`在阻止你想要的。固定宽度的 div 不会拉伸，溢出规则会隐藏溢出的文本。只需删除其中一项规则，最好是溢出规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:32:33.613

我通过将嵌套的 div 元素 HeaderTitle 更改为跨度来解决该问题：

[http://jsfiddle.net/QQtp6/20/](http://jsfiddle.net/QQtp6/20/)

```
<div id="Header">
    <span id="HeaderTitle">
        This is a very long title which should should force HeaderTitle to expand.
    </span >
</div>​

$(document).ready( function(){
    $('#HeaderTitle').mouseover(function (e) {
        var distanceToMove = $(this).width() - $('#Header').width();

        var timeToTakeMoving = 30 * distanceToMove; 

        $(this).animate({ marginLeft: "-" + distanceToMove + "px" }, timeToTakeMoving);
            }).mouseout(function (e) {
                $(this).stop(true).animate({ marginLeft: "0px" });
            });
});

#Header
{
    width: 100px;
    font-size: 15px;
    margin-bottom: 5px;
    border-radius: 5px;
    overflow: hidden;
}

#HeaderTitle
{    
    white-space: nowrap; 
    padding-left: 5px;
    font-weight: bold;
    color: Black;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:18:25.743

删除`overflow:hidden`它将一直扩展 div。

更改它`overflow:auto`，它应该扩展为 100px，因为你已经设置它并显示一个滚动条。

**演示：http:** [//jsfiddle.net/skram/QQtp6/13/](http://jsfiddle.net/skram/QQtp6/13/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:18:52.303

您有一个固定宽度，然后您声明隐藏任何超出固定宽度的数据：

```
overflow: hidden; 
```

该属性的目的是隐藏数据以保留所需的格式。如果您希望显示数据，那么您不想应用该`overflow`属性。

如果它必须保持在 100px 的宽度，那么您需要将属性修改为`overflow: auto;`，这将添加滚动条，以便仍然可以在容器中查看内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T17:09:45.167

发生这种情况的问题是因为“HeaderTitle”与“Header”-（填充）具有相同的宽度。我为你准备了三个解决方案。

1.  如果您知道子元素的宽度。

    .HeaderTitle { width: 666px;//子元素的宽度，例如。[这里](http://jsfiddle.net/QQtp6/65/) }

2.  您也可以浮动您的 div，这将迫使它尽可能小，但如果您的 div 内的任何内容浮动，您将需要使用[clearfix 。](http://www.webtoolkit.info/css-clearfix.html)

    .HeaderTitle { float: left;// 例如。[这里](http://jsfiddle.net/QQtp6/66/) }

3.  使用 span 而不是 div。由于 span 不会像使用 div 那样显示奇怪的行为，因此如果您的设计允许您可以使用 span。前任。[这里](http://jsfiddle.net/QQtp6/67/)

# plone - 重氮、参数和限制遍历

> ID：11161931
> 
> 赞同：4
> 
> 时间：2012-06-22T18:16:51.090
> 
> 标签：plone, diazo

如果在我的重氮控制面板中 > '参数表达式' 我把

```
have_left_portlets = python:context and context.restrictedTraverse('@@plone').have_portlets('plone.leftcolumn',context) 
```

仅当我在门户主页上时才会收到错误消息：

```
2012-06-26 16:51:42 ERROR plone.transformchain Unexpected error whilst trying to apply transform chain
Traceback (most recent call last):
  File "/Users/vito/.buildout/eggs/plone.transformchain-1.0.2-py2.6.egg/plone/transformchain/transformer.py", line 48, in __call__
    newResult = handler.transformIterable(result, encoding)
  File "/Users/vito/.buildout/eggs/plone.app.theming-1.0-py2.6.egg/plone/app/theming/transform.py", line 257, in transformIterable
    params[name] = quote_param(expression(expressionContext))
  File "/Users/vito/.buildout/eggs/Zope2-2.13.13-py2.6.egg/Products/PageTemplates/ZRPythonExpr.py", line 48, in __call__
    return eval(self._code, vars, {})
  File "PythonExpr", line 1, in <expression>
  File "/Users/vito/.buildout/eggs/AccessControl-2.13.7-py2.6-macosx-10.6-x86_64.egg/AccessControl/ImplPython.py", line 675, in guarded_getattr
    v = getattr(inst, name)
AttributeError: 'FilesystemResourceDirectory' object has no attribute 'restrictedTraverse' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T08:15:20.557

我怀疑这是 plone.app.theming 中的一个错误：上下文设置不正确。不过很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:23:50.210

只需确认问题已存在：我得到了大约相同的回溯，站点本身看起来不错，但是对于站点内的每次点击，我都会在我的实例 fg 中得到以下回溯：

```
2012-08-10 15:05:05 ERROR plone.transformchain Unexpected error whilst trying to apply transform chain
Traceback (most recent call last):
  File "/opt/etc/buildout/eggs/plone.transformchain-1.0.2-py2.6.egg/plone/transformchain/transformer.py", line 48, in __call__
    newResult = handler.transformIterable(result, encoding)
  File "/opt/etc/buildout/eggs/plone.app.theming-1.0-py2.6.egg/plone/app/theming/transform.py", line 257, in transformIterable
    params[name] = quote_param(expression(expressionContext))
  File "/opt/etc/buildout/eggs/Zope2-2.13.10-py2.6.egg/Products/PageTemplates/ZRPythonExpr.py", line 48, in __call__
    return eval(self._code, vars, {})
  File "PythonExpr", line 1, in <expression>
AttributeError: 'FilesystemResourceDirectory' object has no attribute 'Language' 
```

这是因为我的 manifest.cfg 中有以下行（与 plone_control_panel 中的参数行大致相同：

```
lang = python: context.Language() 
```

在我的情况下，这在某种程度上是合乎逻辑的，因为并非所有内容对象都有一个名为 Language() 的索引。

但是在这种情况下，“上下文”显然是指“FileSystemResourceDirectory”，而不是您所在的内容？如果我能找到更多信息，我会尝试使用 pdb...

# reporting-services - 如何在报告生成期间更改正文大小？

> ID：11161934
> 
> 赞同：0
> 
> 时间：2012-06-22T18:17:00.003
> 
> 标签：reporting-services, ssrs-2008

所以我有一份报告，当我导出到 Excel 和导出到 PDF 时，我需要两个不同版本的报告。

我已经知道如何隐藏某些报表项，具体取决于它是 PDF 还是 Excel，但我遇到的另一个问题是我隐藏的表格非常宽。

这是报告的excel版本，很好。但是，报告的 PDF 版本现在有空白页，因为报告的正文大于纵向页面大小。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:38:48.510

经过详尽的搜索，我基本上得出了“不，你不能”的结论

# javascript - 如何检测 html 元素是否可以附加子节点？

> ID：11161935
> 
> 赞同：13
> 
> 时间：2012-06-22T18:17:01.937
> 
> 标签：javascript, jquery

我在我的应用程序中创建了一个名为“加载”的自定义 jquery 事件。当触发此事件时，我想附加一个带有微调器的屏蔽元素。我可以毫无问题地弄清楚那部分。但是，某些元素（图像、表单输入等）不能附加子元素。我需要能够检测此事件的目标是否可以接收子元素。如果不能，那么我会将微调器和掩码添加到它的父元素中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:38:06.413

您必须检查名称：

```
/*global $, jQuery */

function isVoid(el) {
    var tags = ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input',
                 'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr'],
        i = 0,
        l,
        name;

    if (el instanceof jQuery) {
        el = el[0];
    }

    name = el.nodeName.toLowerCase();

    for (i = 0, l = tags.length; i < l; i += 1) {
        if (tags[i] === name) {
            return true;
        }
    }
    return false;
} 
```

并像这样使用它：

```
var el = document.getElementById('el'),
    elj = $('#el');

if (!isVoid(el)) {
    // append
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:23:06.083

您*可以*添加子元素，它们只是不会渲染。这听起来像是语义上的区别，但它对您的问题至关重要：DOM 不*知道*是否呈现特定标签。

你最好的选择是检查手册：

```
var allowChildren = function(elem) {
   return ! (elem.nodeName in { INPUT : true, IMG : true }) ;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T18:41:45.563

[http://jsfiddle.net/mblase75/eGyRH/3/](http://jsfiddle.net/mblase75/eGyRH/3/) -- Chrome 允许我向标签添加子元素`<input>`，即使它根本没有显示。它在 DOM 调试器中可见，只是在浏览器窗口中不可见。

但是，我可以测试它`.width()`，看看它是否等于零：http: [//jsfiddle.net/mblase75/eGyRH/4/](http://jsfiddle.net/mblase75/eGyRH/4/)

```
alert($('.element').append('<span>asdf</span>').children().width());​ 
```

但是，例如，如果我将跨度添加到隐藏的 div 中，这也将是零宽度：http: [//jsfiddle.net/mblase75/eGyRH/5/](http://jsfiddle.net/mblase75/eGyRH/5/) - 所以它也不完全可靠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-25T15:18:25.237

接受的答案有一个非常好的功能，基于[哪些类型的节点可以是 void](https://www.w3.org/TR/html/syntax.html#void-elements)。它可以用一个 jQuery 单线代替：

`node.is("area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr")`

# php - 使用 UNION 从表中随机化特定结果

> ID：11161947
> 
> 赞同：0
> 
> 时间：2012-06-22T18:17:59.360
> 
> 标签：php, mysql

我正在使用 UNION 将 3 个查询放在一个结果中。对于其中一个查询，我想随机化它们在“主表”中的位置，而其他 2 个查询不被随机化。有点像在一组产品中随机放置广告。我可以很容易地用 PHP 做到这一点，但我想知道是否有一种简单的 MySQL 方法。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:21:16.397

这可能是一种困难的方式，但是您可以将“随机数”列添加到您想要随机化的表中并填充它`RAND()`——然后您可以按该列对该表进行排序。

您甚至可以说`SELECT *, RAND() AS sortorder FROM mytable ORDER BY sortorder ASC`，但老实说，我不确定这是否可行，而且我当前的工作站上没有 MySQL 服务器可以尝试 :)

# javascript - Javascript复选框表单验证

> ID：11161956
> 
> 赞同：3
> 
> 时间：2012-06-22T18:18:31.683
> 
> 标签：javascript, forms, validation

我正在尝试将此链接用作我的资源：[http ://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

我了解它对文本框的工作原理，但是如何让它检测复选框的表单验证？例如，如果我有一个带有复选框的页面（都具有相同的“名称”值），我想确保至少有一个框被选中......我该怎么做？如果未选中复选框，我对发送什么发布请求以及 javascript 应该如何捕获它感到有点困惑。谢谢你。

编辑 - -

让它工作，这里有一些代码供未来的人使用：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function Validate(){
   if(!validateForm()){
       alert("Something happened");
       return false;
   }
return true
}
function validateForm()
{
    var c=document.getElementsByTagName('input');
    for (var i = 0; i<c.length; i++){
        if (c[i].type=='checkbox')
        {
            if (c[i].checked){return true}
        }
    }
    return false;
}
</script>
</head>
<body>
<form name="myForm" action="demo_form.asp" onsubmit="return Validate()" method="post">
Value: <input type="checkbox" name="fname" value="value">
Value2: <input type="checkbox" name="fname" value="value2">
...<more boxes here>
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-23T19:56:46.827

这是一个示例，可以满足您的要求，并且可以在此页面中进行测试：

```
function Validate(){
   if(!validateForm()){
       alert("You must check atleast one of the checkboxes");
       return false;
   }
return true
}
function validateForm()
{
    var c=document.getElementsByTagName('input');
    for (var i = 0; i<c.length; i++){
        if (c[i].type=='checkbox')
        {
            if (c[i].checked){return true}
        }
    }
    return false;
}
```

```
<form name="myForm" action="demo_form.asp" onsubmit="return Validate()" method="post">
Option 1: <input type="checkbox" name="option1" value="1"><br />
Option 2: <input type="checkbox" name="option2" value="2"><br />
<input type="submit" value="Submit Form">
</form>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T04:55:19.583

```
function ValidateForm(form){
ErrorText= "";
if ( ( form.gender[0].checked == false ) && ( form.gender[1].checked == false ) )
{
alert ( "Please choose your Gender: Male or Female" );
return false;
}
if (ErrorText= "") { form.submit() }
}
```

```
<form name="feedback" action="#" method=post>
Your Gender: <input type="checkbox" name="gender" value="Male"> Male
<input type="checkbox" name="gender" value="Female"> Female

<input type="reset" value="Reset">
  <input type="button" name="SubmitButton" value="Submit" onClick="ValidateForm(this.form)">
</form>
```

# c# - 寻找 MS 共享图像示例的应用程序？

> ID：11161957
> 
> 赞同：0
> 
> 时间：2012-06-22T18:18:31.560
> 
> 标签：c#, windows-8, windows-runtime, microsoft-metro, datacontracts

我一直在修改这个以在我的应用程序中实现共享魅力：http: [//code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84)

这是一个很好的资源，但在使用 SetBitmap() 时，我似乎无法让图像共享工作。

当使用延迟渲染器示例或注释掉图像示例的 StorageItem 部分时，共享面板会出现，但它说我没有任何可用于共享该数据的应用程序。我已经尝试了一些不同的照片应用程序。如果不是所有应用程序都接受图像数据，那么在数据合同中使用 StorageItems 的方式是不是，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:19:38.663

用于测试共享源应用程序的最佳应用程序是[共享目标示例](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782)。下载该应用程序并运行它......从那时起，它将显示为所有类型的共享目标。它还将向您显示您作为数据请求回调的一部分填充的所有内容。

很难说此时大多数应用程序在做什么......我认为任何期望图像的应用程序都会支持[StandardDataFormat.Bitmap](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.standarddataformats.aspx)，但你永远不知道。

# c# - 快速保存\加载大数据

> ID：11161961
> 
> 赞同：1
> 
> 时间：2012-06-22T18:18:40.757
> 
> 标签：c#, .net, bigdata

我有以下课程：

```
public class HPChartGraphPoint
{
    public int Keyword { get; set; }
    public List<long> Points { get; set; }

    public HPChartGraphPoint()
    {
        Points = new List<long>();
    }

    public string SerializeToString()
    {
        var sb = new StringBuilder();

        sb.Append(Keyword);
        sb.Append(":");

        for (int i = 0; i < Points.Count; i++)
        {
            sb.Append(Points[i]);
            sb.Append(":");
        }
        return sb.ToString();
    }

    public static HPChartGraphPoint DesirializeFromString(string str)
    {
        var splitter = str.Split(new[]{":"},StringSplitOptions.RemoveEmptyEntries)
        .Select(x => int.Parse(x)).ToArray();

        var retPoint = new HPChartGraphPoint();

        retPoint.Keyword = splitter[0];

        for (int i = 1; i < splitter.Length; i++)
        {
            retPoint.Points.Add(splitter[i]);
        }

        return retPoint;
    }

} 
```

我需要存储和加载包含数百万个元素的集合列表。如何做到又快又省内存？

编辑：

这是用于存储的代码

```
using (var sw = new StreamWriter(filePath))
{
                for (int i = 0; i < HPChartGraphPointCollection.Count; i++)
                {
                    sw.WriteLine(HPChartGraphPointCollection[i].SerializeToString());
                }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:10:53.100

二进制格式可能比文本更紧凑，更容易阅读/解析。

您可以使用轻量级流包装器：[​​ BinaryReader](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)和[BinaryWriter](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)。

# vba - 使用 VBA 进行 Word 文档迭代

> ID：11161967
> 
> 赞同：1
> 
> 时间：2012-06-22T18:19:16.630
> 
> 标签：vba, ms-word

我有一个包含许多由 html 标签定义的 html 文档的 word 文档。我想创建一个数组或范围集合，每个范围由一个 html 文档组成。例如，这里是 Word 文档：

```
<html> <head> <title> </title> </head> <body> HTML Doc 1 </body> </html>
<html> <head> <title> </title> </head> <body> HTML Doc 2 </body> </html>
<html> <head> <title> </title> </head> <body> HTML Doc 3 </body> </html> 
```

等我想用一系列范围填充 rngHTMLDocs() As Range，每个范围都包含每个开始和结束 html 标记中的文本。

我创建了以下代码，试图遍历定义这些范围的整个文档，但它只选择 HTML Doc 1。我想我可能以错误的方式处理整个迭代。无论如何，这是代码：

```
Set rngDocContent = ActiveDocument.Content
intCounter = 1
With rngDocContent.Find
    .ClearFormatting
    .Text = "<html>"
    .Replacement.Text = ""
    .Forward = True
    .Wrap = wdFindContinue
    .Execute
    Do While .Found = True
        Set rngTemp = rngDocContent.Duplicate
        rngTemp.Select
        Selection.Extend
         With Selection.Find
             .ClearFormatting
             .Text = "</html>"
             .Replacement.Text = ""
             .Forward = True
             .Wrap = wdFindAsk
             .Execute
        End With
        Set rngHtmlDocs(intCounter) = Selection.Range
        Selection.Start = Selection.End
        intCounter = intCounter + 1
     Loop
 End With 
```

在为整个文档设置 rngDocContent 并使用 wdFindContinue 时，我曾希望它实际上会继续搜索文档以查找打开的 html 标记的下一个实例，但事实并非如此。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:07:33.070

在这种情况下，范围对象的集合对您来说会更好吗？创建一个集合对象，每次搜索迭代都会创建一个新的范围对象，然后将其添加到集合中。这样每个 html 文档都可以被称为 colRanges(n)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:57:27.223

发现我缺少的是 Loop 语句之前的 .Execute 语句，因为这就是导致原始 .Find 继续的原因。我还添加了一个 ReDim Preserve 语句，因为我没有事先计算文档中包含多少 HTML 文档。所以现在循环的结尾看起来像这样：

```
 Set rngHtmlDocs(intCounter) = Selection.Range
       Selection.Start = Selection.End
       intCounter = intCounter + 1
       ReDim Preserve rngHtmlDocs(intCounter)
       .Execute
    Loop
End With 
```

希望这可以帮助某人。

# ruby - 使用在运行时确定的属性定义结构

> ID：11161969
> 
> 赞同：1
> 
> 时间：2012-06-22T18:19:32.747
> 
> 标签：ruby

我注意到 Ruby 的理念是在运行时尽可能多地保持灵活性。

这是一个典型的（据我所知）Ruby 结构定义：

```
 Person = Struct.new("Person", :name, :address)
    Person.new("John", "Chicago, IL") 
```

我的问题是，当结构字段/成员列表也在运行时定义时，是否可以在运行时定义结构？看起来像这样的东西：

```
 Person = Struct.new("Person", list_of_structure_fields) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:22:15.087

你可以只[打](http://kconrails.com/2010/12/22/rubys-splat-operator/%5C)一个数组：

```
fields = [:name, :address]
Person = Struct.new("Person", *fields)
Person.new("John", "Chicago, IL")
#=> #<struct Struct::Person name="John", address="Chicago, IL"> 
```

这使您可以做一些有趣的事情：

```
person = {name: "John", address: "Chicago, IL"}
Person = Struct.new("Person", *person.keys)
Person.new(*person.values)
#=> #<struct Struct::Person name="John", address="Chicago, IL"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T21:03:53.213

[OpenStruct](http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)就是为了做到这一点而设计的：

```
require 'ostruct'
h = {name: "John", address: "Chicago, IL"}
person = OpenStruct.new(h)
puts person.name #=> John
person.age  = 35 # freely add fields and values 
```

# html - 从 HTML 页面提交“纯”HTTP 请求

> ID：11161970
> 
> 赞同：1
> 
> 时间：2012-06-22T18:19:36.960
> 
> 标签：html, http

我需要从 HTML 页面向我的 REST 服务器发送以下 HTTP 请求以检索另一个页面。如何使用 javascript 或表单或链接或其他方式做到这一点？

请注意，HTTP 请求正文必须包含没有键/值对的纯文本，就像表单通常那样。

```
PUT /somerequest HTTP/1.1
Host: www.myhost.com
Accept: text/html,application/xhtml+xml

Payload of the request to be read by the server script.
The script will return a HTML content to my browser.
Thanks ! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:24:50.867

你可以使用 jQuery 吗？

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

我相信你会在那里找到你想要的。

如果你不看下层：XMLHttpRequest

[http://www.w3.org/TR/XMLHttpRequest/](http://www.w3.org/TR/XMLHttpRequest/)

# javascript - 使用 javascript 例程在一个按钮上执行多项操作

> ID：11161972
> 
> 赞同：0
> 
> 时间：2012-06-22T18:19:46.987
> 
> 标签：javascript

使用javascript按下按钮时，如何在两个（或三个）对象上设置“点击操作”？太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:35:07.723

您可以`click()`在按钮的事件中调用其他可点击元素的方法`onclick`，例如

```
<input id="Button1" type="button" value="Button 1" onclick="clickAllbuttons()" />

<input id="Button2" type="button" value="Button 2" onclick="alert('Button 2 is clicked!')" />
<input id="Button3" type="button" value="Button 3" onclick="alert('Button 3 is clicked!')"/>

 <script type="text/javascript">
     function clickAllbuttons() {

         alert('Button 1 is clicked!')

         document.getElementById('Button2').click();
         document.getElementById('Button3').click();
     }

 </script> 
```

这里在 HTML 标记中定义了 3 个按钮，但是如果您单击按钮 1 - 按钮 2 和按钮 3 也会被单击

# android - 图形 g.translate(xPos,yPos); 的 Android 等价物是什么？?

> ID：11161974
> 
> 赞同：0
> 
> 时间：2012-06-22T18:20:09.643
> 
> 标签：android, graphics, translate-animation

我的游戏背景将滚动。我不想通过移动与我的主角相关的所有对象来使其滚动，我只想移动相机来跟随他。

我可以`g.translate(x,y)`在 java 中做到这一点，但 Android 中的等价物是什么？

另外，如果您想告诉我您对移动相机是否是最佳选择的看法。为什么每个人都只是让背景移动，而不是相机？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:22:46.373

> 我可以在 java 中使用 g.translate(x,y) 来做到这一点，但不确定在 Android 中如何。

等价于`c.translate(xPos,yPos)`, where `c`is 的类型`Canvas`。

> 另外，如果您想告诉我您对移动相机是否是最佳选择的看法。为什么每个人都只是让背景移动，而不是相机？

可能是因为他们不知道他们可以将矩阵变换应用于绘图操作。

# c - 如何在 C 中访问 ruby 数组的值？（从 ruby 源代码编辑 array.c:rb_ary_initialize）

> ID：11161975
> 
> 赞同：0
> 
> 时间：2012-06-22T18:20:09.423
> 
> 标签：c, ruby, arrays, debugging, gdb

```
arr=Array.new(3)
arr[0]=5
arr[1]=3
arr[2]=2 
```

这些行应该调用这个函数，[https://github.com/ruby/ruby/blob/trunk/array.c#L568](https://github.com/ruby/ruby/blob/trunk/array.c#L568)根据这个，[http://www.ruby-doc.org/core-1.9.3/数组.html](http://www.ruby-doc.org/core-1.9.3/Array.html)

所以我在那里添加了几行来显示数组的值。但我没有得到预期的结果。

```
else {
    memfill(RARRAY_PTR(ary), len, val);
    ARY_SET_LEN(ary, len);
    int i;
    int result;
    result = 0;
    VALUE *s_arr = RARRAY_PTR(ary);
    for(i = 0; i < len; i++) {
        result = LONG2NUM(s_arr[i]);
        printf("r: %d\n",result);
    }
} 
```

我得到这样的结果：

```
arr=Array.new(3)
arr[0]=5
arr[1]=3
arr[2]=2
r: 9
r: 9
r: 9 
```

为什么是这个结果？为什么是9？

我已经按照这些来解决它：

*   [如何使用 RubyInline 将 ruby​​ 数组转换为 C 数组？](https://stackoverflow.com/questions/1117180/how-to-convert-ruby-array-to-c-array-with-rubyinline)
*   [https://github.com/ruby/ruby/blob/trunk/README.EXT#L131](https://github.com/ruby/ruby/blob/trunk/README.EXT#L131)
*   [https://github.com/ruby/ruby/blob/trunk/include/ruby/ruby.h#L708](https://github.com/ruby/ruby/blob/trunk/include/ruby/ruby.h#L708)
*   [https://github.com/ruby/ruby/blob/trunk/include/ruby/ruby.h#L731](https://github.com/ruby/ruby/blob/trunk/include/ruby/ruby.h#L731)

任何人都可以帮助在 C 中显示/打印 Ruby 数组的值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:28:40.637

这没有任何意义：

```
result = LONG2NUM(s_arr[i]); 
```

`LONG2NUM`用于将 C 转换为包含数字`long int`的 Ruby ；已经是 a所以你正在有效地做类似的事情。被定义为一个包装器：`VALUE``s_arr[i]``VALUE``VALUE v = LONG2NUM((VALUE)5)``LONG2NUM``ruby.h`

```
#define LONG2NUM_internal(v) (FIXABLE(v) ? LONG2FIX(v) : rb_int2big(v)) 
```

如果`v`适合 a`VALUE`而没有将其转换为 bignum，那么您最终会使用它：

```
#define INT2FIX(i) ((VALUE)(((SIGNED_VALUE)(i))<<1 | FIXNUM_FLAG)) 
```

因此，您基本上是在对指针进行一些争论，并想知道为什么它总是说`9`; 认为自己很幸运（或不幸）它没有说*分段错误*。

您想将`VALUE`保存数字的 a 转换为 C 整数。您可能想使用`FIX2LONG`：

```
#define FIX2LONG(x) (long)RSHIFT((SIGNED_VALUE)(x),1) 
```

或`NUM2LONG`：

```
#define NUM2LONG_internal(x) ((long)(FIXNUM_P(x) ? FIX2LONG(x) : rb_num2long(x)))
#ifdef __GNUC__
#define NUM2LONG(x) \
    __extension__ ({VALUE num2long_x = (x); NUM2LONG_internal(num2long_x);})
#else
static inline long
NUM2LONG(VALUE x)
{
    return NUM2LONG_internal(x);
}
#endif 
```

所以是这样的：

```
long result;
for(i = 0; i < len; i++) {
    result = NUM2LONG(s_arr[i]);
    printf("r: %ld\n", result);
} 
```

请注意切换到，`%ld`因为我们现在使用`long`s 并且我们总是打开所有抱怨`printf`格式和参数不匹配的挑剔编译器标志。当然，这假设您确定数组包含适合 C 的数字`long`。

# hadoop - 为 Hadoop Streaming 构建 Hadoop 作业对象

> ID：11161981
> 
> 赞同：0
> 
> 时间：2012-06-22T18:20:25.323
> 
> 标签：hadoop, hadoop-streaming

我正在尝试从 Java 配置和运行 Hadoop Streaming 作业（我正在使用的系统希望 Hadoop 作业可以通过 Java 方法调用）。

我确实在（[http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/streaming/StreamJob.html#createJob(java.lang.String[])](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/streaming/StreamJob.html#createJob%28java.lang.String%5B%5D%29)）中找到了`createJob`方法，但此方法返回一个已被弃用的对象。有什么方法可以创建流式传输对象，或将其转换为?`org.apache.hadoop.streaming.StreamJob``JobConf``Job``JobConf``Job`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:41:29.187

有一些关于移植 Streaming 代码以支持新 API 的 JIRA 票证，但据我所知，它尚未普遍可用

*   [https://issues.apache.org/jira/browse/MAPREDUCE-1122](https://issues.apache.org/jira/browse/MAPREDUCE-1122)
*   [https://issues.apache.org/jira/browse/MAPREDUCE-3619](https://issues.apache.org/jira/browse/MAPREDUCE-3619)

请注意，即使使用 JobConf 提交旧 api 作业的方法已被弃用，但在最新的 1.0.3 版本的 Hadoop 中仍然支持它。

# c# - 单击时禁用复选框复选框，但不能从后面的代码中禁用

> ID：11161982
> 
> 赞同：4
> 
> 时间：2012-06-22T18:20:29.397
> 
> 标签：c#, winforms, checkedlistbox

我正在创建一个带有 Checkedlistbox 的 winforms 应用程序，其中包含一些名称。我需要的是通过单击禁用复选框来检查，但仍然可以从代码中检查。

我尝试将其设置`.CheckOnClick`为 false，但随后复选框仍会检查第二次单击。

我已经尝试了以下问题的解决方案： [如何禁用选中列表框中的复选框？](https://stackoverflow.com/questions/4368618/how-to-disable-a-checkbox-in-a-checkedlistbox) 但这也导致禁用了从代码中检查的能力。

禁用整个框不是一个选项，这将禁用所有事件，包括在我的应用程序中至关重要的选择和双击鼠标。

任何人都知道这个解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:42:15.373

好的，您需要做的是为您的 CheckedListBox 处理 ItemCheck 事件，如下所示：

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
{
    e.NewValue = e.CurrentValue;
} 
```

如果要更改代码中复选框的状态，则必须暂时删除事件句柄：

```
checkedListBox1.ItemCheck -= checkedListBox1_ItemCheck;
checkedListBox1.SetItemChecked(1, true);
checkedListBox1.ItemCheck += checkedListBox1_ItemCheck; 
```

它并不优雅，但它是一个可能的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:24:33.133

将`Enabled`属性设置为`False`：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled.aspx)

# java - 如何将 Visual Basic Str() 转换为 Java 代码

> ID：11161983
> 
> 赞同：1
> 
> 时间：2012-06-22T18:20:30.707
> 
> 标签：java, vb6, code-conversion

我想知道是否有更好的实现将立即窗口中的以下 VB6 片段转换为 Java：

```
? Format("002-", "")
-2
? Str("002-")
-2 
```

我的 Java 代码扫描字符串，如果看到负号，则将字符串转换为负整数，否则转换为正整数。我想知道Java是否有一个与此功能相同的实用程序函数。

[此处](http://msdn.microsoft.com/en-us/library/4y6a1sx7%28v=vs.71%29.aspx)为 Str 函数的链接。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:23:26.617

我相信这就是您正在寻找的：

```
VB6       Java
---       -----
Str()     Integer.toString ();  # Convert integer to string
***       Integer.ParseInt ();  # Convert string to integer
Format()  String.Format (); 
```

以下是一些链接：

*   Integer.ParseInt()： [http ://cs.fit.edu/~ryan/java/language/simple.html](http://cs.fit.edu/~ryan/java/language/simple.html)

*   String.Format()：[http ://www.xinotes.org/notes/note/1195/](http://www.xinotes.org/notes/note/1195/)

# ruby-on-rails - Rails 模型不相互交谈。不确定如何从另一个模型中向一个模型添加记录

> ID：11161989
> 
> 赞同：0
> 
> 时间：2012-06-22T18:20:50.110
> 
> 标签：ruby-on-rails, ruby

我正在开发一个可以进行网络抓取的应用程序。在站点模型中，我有这个方法：

```
 def download_meta_tags
    downloaded_tags = Nokogiri::HTML(Net::HTTP.get(self.domain, "/")).xpath("//meta[@name='robots']")
    downloaded_tags.each do |t|
      self.robots_tags.tag << t
    end
  end 
```

站点模型通过名为 robots_tag_sites 的连接表有许多 robots_tags。站点模型还接受_nested_attributes_for :robots_tags。上述方法旨在获取在该方法的第 1 行中下载的所有标签，并将它们保存到 robots_tags 表的标签列中。

我认为问题在于“self.robots_tags”仍然抓取一组东西而不是一个单独的东西。但我不确定如何正确添加标签。有什么建议吗？

（顺便说一句，这是另一篇文章的后续，[Rails 应用程序在模型间保存方面存在问题](https://stackoverflow.com/questions/11159197/rails-app-has-trouble-with-inter-model-saving)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T18:24:03.387

您应该使用`self.robots_tags.create(...)`来创建一个新`RobotTag`对象。

假设您`RobotTag`有一个`tag`属性，它可能看起来像这样：

```
downloaded_tags.each do |t|
  self.robot_tags.create(:tag => t)
end 
```

# php - php://output 结果为空文件

> ID：11161998
> 
> 赞同：2
> 
> 时间：2012-06-22T18:21:35.430
> 
> 标签：php, wordpress

我有一个页面正在使用的 Wordpress 主题模板文件。模板在数据库中查询数组，然后尝试将结果输出到 csv 文件。预计不会向浏览器输出。这是代码：

```
/***
 * Output an array to a CSV file
 */
function download_csv_results($results, $name = NULL)
{
if( ! $name)
{
    $name = md5(uniqid() . microtime(TRUE) . mt_rand()). '.csv';
}

header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename='. $name);
header('Pragma: no-cache');
header("Expires: 0");

$outstream = fopen("php://output", "w");

foreach($results as $result)
{
    fputcsv($outstream, $result);
}
fclose($outstream);
} 
```

该文件按预期写入用户的下载目录，但它是空的。我已经调试以验证有 117 个元素的结果。上面的循环正在执行。就好像输出缓冲区没有被刷新或被 Wordpress 清除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:29:54.553

你可以尝试使用：

```
$outstream = fopen("php://output", "a"); 
```

代替 ：

```
$outstream = fopen("php://output", "w"); 
```