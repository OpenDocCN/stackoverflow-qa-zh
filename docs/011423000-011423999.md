# StackOverflow 问答 11423000-11423999

# android - 服务不从 BroadcastReceiver 运行？- 安卓

> ID：11423000
> 
> 赞同：1
> 
> 时间：2012-07-10T22:31:58.777
> 
> 标签：android, broadcastreceiver, android-service

当我的手机有拨出电话时，我正试图让我的服务运行。但是由于某种原因，发生这种情况时我的服务没有运行。我知道“CallReceiver”的代码会执行，因为我使用了 toast 消息来显示它是否运行。我能够通过我的主要活动运行该服务，但这意味着无论是否拨打电话，它都会运行......

下面是我的代码：

**收件人：**

```
package com.example.hiworld;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class CallReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        context.startService(new Intent(context, CallService.class));

        Toast.makeText(context, "Call Receiver started",
                Toast.LENGTH_LONG).show();

        Log.d("Calling Someone", "onReceived");

    }

} 
```

**服务：**

```
package com.example.hiworld;

import android.app.IntentService;
import android.content.Context;
import android.content.Intent;
import android.telephony.TelephonyManager;
import android.widget.Toast;

public class CallService extends IntentService  {

    public long StartTime=0;
    public long EndTime =0; 
    public long TotalTime = 0; 
    public long NumFreeMins = 0;

    public CallService() {
          super("CallService");
      }

    @Override
    protected void onHandleIntent(Intent intent) {

        StartTime = (System.currentTimeMillis())/60;

        TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

            if(tm.getCallState()==0) //getting the time whenever the phone is off 
            {

                EndTime = (System.currentTimeMillis())/60;
                TotalTime = EndTime-StartTime;
                 NumFreeMins = 300-TotalTime; 

                 //notify user
                 this.displaymsg();

            }   

    }

public void displaymsg()
{
    Toast toast = Toast.makeText(getApplicationContext(), ""+NumFreeMins, Toast.LENGTH_SHORT);
    toast.show();
}
} 
```

我看到有些人使用这条线：

```
context.startService(new Intent(this, CallService.class)); 
```

代替：

```
context.startService(new Intent(context, CallService.class)); 
```

但后者对我不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:56:38.490

尝试在清单中`<intent-filter>`为您`IntentService`的特定“操作”指定一个。例子...

```
<service
    android:name=".CallService" >
    <intent-filter>
        <action android:name="com.example.hiworld.intent.DO_SOMETHING" />
    </intent-filter>
</service> 
```

然后在`onReceive(...)`您的方法中`BroadcastReceiver`执行以下操作...

```
Intent callReceiverIntent = new Intent("com.example.hiworld.intent.DO_SOMETHING");

// Put the Intent received by the BroadcastReceiver as extras so the
// IntentService can process it...
callReceiverIntent.putExtras(intent);

context.startService(callReceiverIntent); 
```

**编辑：**

我根据您发布到 pasrebin 的代码构建了一个简单的测试应用程序。我保持清单、接收器和服务的代码相同，只需添加一个默认值`Activity`即可使其运行。

我可以从eclipse的DDMS角度监控logcat看到`CallReceiver`成功接收到`NEW_OUTGOING_CALL` `Intent`并且确实启动了`CallService`.

但是，问题在于尝试显示由于“泄漏的处理程序”而导致异常并静默崩溃的`Toast`from an 。`IntentService`

这背后的原因是，由于应用程序没有运行 UI 组件，因此`IntentService`使用后台线程执行其工作并尝试`Toast`从非 UI 线程显示（即 UI 元素）将不起作用。因此，无论您是使用局部`context`变量还是`getApplicationContext()`，都根本没有 UI 上下文可与`Toast`.

`CallService`从 an启动时它起作用的原因`Activity`显然是因为它`Activity`提供了一个可供`Toast`. 简而言之，除非总是由 UI 组件启动，否则尝试使用 from 通常似乎不是`Toast`一个*好*`IntentService`主意，即便如此，让后台线程创建 UI 元素（例如 a ）可能会导致问题。`IntentService`*`Toast`*

 *可以使其与当前模型一起使用的唯一方法是将 更改`IntentService`为`Service`. 默认情况下，a 的代码执行`Service`是在主（UI）线程上完成的，无论是否有任何应用程序显示，a`Service`显示 a都是完全合法的。事实上，我修改了代码以使用 a并将代码放在in 中，我可以在拨打电话时看到 。`Toast``Activities``Service``onHandleIntent``onStartCommand()``Toasts`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:35:29.517

尝试

```
context.startService(new Intent(context.getApplicationContext(), CallService.class)); 
```*

# c# - group by 操作包含无法翻译的表达式

> ID：11423008
> 
> 赞同：1
> 
> 时间：2012-07-10T22:32:58.847
> 
> 标签：c#, linq

它编译正常，但是当我尝试遍历 LINQ 查询的结果时，我遇到了这样`The group by operation contains an expression that cannot be translated` 的异常查询是

```
var query0 = from c in dc.Prices
              where Convert.ToDateTime(c.data).CompareTo(left) >= 0
              && Convert.ToDateTime(c.data).CompareTo(right) <= 0
              && c.idsticker.Equals(x)
            group c by new { ((DateTime)c.data).Year, ((DateTime)c.data).Month }
                  into groupMonthAvg
                  select new
                  {
                      years = groupMonthAvg.Key.Year,
                      months = groupMonthAvg.Key.Month,
                      prices = groupMonthAvg.Average(i => i.value)
                  }; 
```

函数中的哪个表达式`group by`是错误的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:38:43.073

试试这个：

```
var query0 = from c in dc.Prices
             let date = Convert.ToDateTime(c.data)
             where date.CompareTo(left) >= 0 && date.CompareTo(right) <= 0 && c.idsticker.Equals(x)
             group c by new { date.Year, date.Month } into groupMonthAvg
             select new
             {
                 years = groupMonthAvg.Key.Year,
                 months = groupMonthAvg.Key.Month,
                 prices = groupMonthAvg.Average(i => i.value)
             }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:37:21.000

我猜这是因为 in 中的`data`列`Price`是 String 或除`DateTime`.

尝试将`(DateTime)c.data)`演员改为 a `Convert.ToDateTime(c.data)`。

我不确定 Linq-SQL 翻译器是否支持强制转换。

如果可能，将数据库中的基础数据类型更改为 a `DateTime`if 它存储日期时间值。

# facebook - Tweet 特定文本 使用 twitter 上的链接

> ID：11423012
> 
> 赞同：0
> 
> 时间：2012-07-10T22:33:37.857
> 
> 标签：facebook, twitter

我正在使用下面的代码在 facebook 上发送一些文本。是否有任何类似于在 twitter 上发布一些文本的代码？

```
<a title="send to Facebook" href="http://www.facebook.com/sharer.php?s=100&p[title]=YOUR_TITLE&p[summary]=YOUR_SUMMARY&p[url]=YOUR_URL&p[images][0]=YOUR_IMAGE_TO_SHARE_OBJECT" target="_blank"><span><img width="14" height="14" src="" /> Share</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:42:08.907

是的。尝试：

```
 <a href="https://twitter.com/share?url=http://www.test.com&text=Test">Tweet</a> 
```

# vba - 使用 IsEmpty 停止循环

> ID：11423023
> 
> 赞同：3
> 
> 时间：2012-07-10T22:34:20.407
> 
> 标签：vba, excel

我找到了一个线程，它直接应用于我试图在这里构建的代码[Excel VBA: Loop through cells and copy values to another workbook](https://stackoverflow.com/questions/10782189/excel-vba-loop-through-cells-and-copy-values-to-another-workbook)。

```
Sub test()

Dim ws1 As Worksheet, ws2 As Worksheet
Dim CurCell_1 As Range, CurCell_2 As Range
Dim Ran As Range
Dim Group As Range, Mat As Range

Application.ScreenUpdating = True

Set ws1 = ActiveWorkbook.Sheets("Scrap")
Set ws2 = ActiveWorkbook.Sheets("FC Detail")

For Each Mat In ws1.Range("E:E")
    Set CurCell_2 = ws2.Range("F8")
    For Each Group In ws1.Range("E:E")
        Set CurCell_1 = ws1.Cells(Group.Row, Mat.Column)
        If Not IsEmpty(CurCell_2) Then
            CurCell_2.Value = CurCell_1.Value
        End If
    Next
Next

End Sub 
```

这段代码有一个例外，它不断循环。

我认为这`If Not IsEmpty`将是 VBA 的描述符，一旦它到达列表的末尾以停止程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:21:18.993

除了我的评论，试试这个。这会快得多

```
Sub Test()
    Dim ws1 As Worksheet, ws2 As Worksheet
    Dim CurCell_1 As Range, CurCell_2 As Range
    Dim Group As Range, Mat As Range, Ran As Range
    Dim lRow As Long

    Set ws1 = ActiveWorkbook.Sheets("Scrap")
    Set ws2 = ActiveWorkbook.Sheets("FC Detail")

    With ws1
        lRow = .Range("E" & .Rows.Count).End(xlUp).Row

        Set Ran = .Range("E1:E" & lRow)

        For Each Mat In Ran
            Set CurCell_2 = ws2.Range("F8")
            For Each Group In Ran
                Set CurCell_1 = .Cells(Group.Row, Mat.Column)
                If Not IsEmpty(CurCell_2) Then
                    CurCell_2.Value = CurCell_1.Value
                End If
            Next
        Next
    End With
End Sub 
```

# django - 如何将详细对象传递给美味派中的自定义授权？

> ID：11423030
> 
> 赞同：2
> 
> 时间：2012-07-10T22:34:57.833
> 
> 标签：django, tastypie

我如何访问在美味派授权期间在请求中访问的详细端点对象？

我注意到[文档](http://django-tastypie.readthedocs.org/en/v0.9.11/authentication_authorization.html#implementing-your-own-authentication-authorization)中的一个被覆盖的方法有一个对象参数——我该如何设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:02:07.170

在分支烫发中，

[https://github.com/toastdriven/django-tastypie/blob/perms/tastypie/authorization.py](https://github.com/toastdriven/django-tastypie/blob/perms/tastypie/authorization.py)

类授权有一组方法，例如：

```
def read_detail(self, object_list, bundle):
    """
    Returns either ``True`` if the user is allowed to read the object in
    question or throw ``Unauthorized`` if they are not.
    Returns ``True`` by default.
    """
    return True 
```

这里可以尝试通过**bundle.obj访问***obj*

 **如果你不能使用 perms 分支，我建议你这样：

```
class MyBaseAuth(Authorization):
    def get_object(self, request):
        try:
            pk = resolve(request.path)[2]['pk']
        except IndexError, KeyError:
            object = None # or raise Exception('Wrong URI')
        else:
            try:
                object = self.resource_meta.object_class.objects.get(pk=pk)
            except self.resource_meta.DoesNotExist:
                object = None
        return object

class FooResourceAuthorization(MyBaseAuth):
    def is_authorized(self, request, object=None):
        if request.method in ('GET', 'POST'):
            return True
        elif request.method == 'DELETE':
            object = self.get_object(request)
            if object.profile = request.user.profile:
                return True
        return False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:49:22.520

Hackish，但通过一种从请求 URL 获取对象的简单方法（受 DjangoAuthorization 中的代码启发）。

```
def is_authorized(self, request, object=None):

    meta = self.resource_meta
    re_id = re.compile(meta.api_name + "/" + meta.resource_name + "/(\d+)/")
    id = re_id.findall(request.path)

    if id:
        object = meta.object_class.objects.get(id=id[0])

        # do whatever you want with the object
    else:
        # It's not an "object call" 
```**

# objective-c - 使用@property 将值从一个类传递到另一个类

> ID：11423032
> 
> 赞同：0
> 
> 时间：2012-07-10T22:35:09.033
> 
> 标签：objective-c, class, variables

我整个下午都在忙着想弄清楚为什么下面的代码不起作用。我要做的就是将一个字符串从一个类传递到另一个类。

在我的 FirstDetailViewController.h 文件中，我声明了 NSString

```
@property(nonatomic, retain) NSString *infoForArray; 
```

然后在我的 Grinding01_DetailViewController.m 我尝试为字符串设置一个值

```
#import "Grinding01_DetailViewController.h"
#import "FirstDetailViewController.h"

@implementation Grinding01_DetailViewController

...

    NSString *didLoadMessage = @"Grinding01 Loaded";

    FirstDetailViewController *temp = [[FirstDetailViewController alloc] initWithNibName:@"FirstDetailView" bundle:nil];

    temp.infoForArray = didLoadMessage;

    [self.navigationController pushViewController:temp animated:YES];

} 
```

当我从 FirstDetailViewController.h 输出 infoForArray 时，它为空。

任何帮助将不胜感激，我认为我缺少一个简单的步骤，但我只是看不到它。

* * *

编辑：这是来自 FirstDetailViewController 的代码

FirstDetailViewController.h

```
#import <UIKit/UIKit.h>
#import "Protocols.h"

@interface FirstDetailViewController : UIViewController <SubstitutableDetailViewController> {

    //for the output
    IBOutlet UITextView *outputView;

    UIToolbar *navigationBar;

    NSMutableArray *logMessages;

}

@property (nonatomic, retain) IBOutlet UIToolbar *navigationBar;

//for incoming messages
@property(nonatomic, retain) NSString *infoForArray;

@end 
```

FirstDetailViewController.m

```
#import "FirstDetailViewController.h"

@implementation FirstDetailViewController

@synthesize navigationBar, infoForArray;

-(void)viewDidLoad{

    [super viewDidLoad];

    //The log cannot be changed
    outputView.editable = NO;    

}

#pragma mark -
#pragma mark View lifecycle

- (void)viewDidUnload {

    [super viewDidUnload];

    self.navigationBar = nil;

}

-(void)viewWillAppear:(BOOL)animated{

    [super viewWillAppear:YES];

    NSLog(@"message: %@", infoForArray);

    outputView.text = infoForArray;

}

#pragma mark -
#pragma mark Managing the popover

- (void)showRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem {

    // Add the popover button to the toolbar.
    NSMutableArray *itemsArray = [navigationBar.items mutableCopy];
    [itemsArray insertObject:barButtonItem atIndex:0];
    [navigationBar setItems:itemsArray animated:NO];
    [itemsArray release];
}

- (void)invalidateRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem {

    // Remove the popover button from the toolbar.
    NSMutableArray *itemsArray = [navigationBar.items mutableCopy];
    [itemsArray removeObject:barButtonItem];
    [navigationBar setItems:itemsArray animated:NO];
    [itemsArray release];
}

#pragma mark -
#pragma mark Rotation support

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}

#pragma mark -
#pragma mark Memory management

- (void)dealloc {
    [navigationBar release];
    [super dealloc];
}   

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:43:38.407

我的猜测是您正在 FirstDetailViewController 的实例化过程中的某处检查 infoForArray，该过程发生在您设置`temp.infoForArray = didLoadMessage`.

仅供参考，如果您签`infoForArray`入`viewDidLoad`那将太早了。**`viewDidLoad`当视图被放入内存时触发。你想要的是`viewDidAppear`**，你可能需要自己添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:21:49.857

听起来麻烦区域在 FirstDetailViewController 中。我建议发布代码，这样我们就可以看到发生了什么。

# ios - 如何将 kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange 数据转换为 YUV420P？

> ID：11423035
> 
> 赞同：2
> 
> 时间：2012-07-10T22:35:21.360
> 
> 标签：ios, avfoundation, yuv

我正在捕获 iPad 相机的输出，然后将其发送到服务器。我是图像处理等方面的新手，所以我边走边学。

服务器需要在 YUV420P 中接收。现在我得到的只是灰度框架。我猜这是双平面与平面。

如何使用 kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange 数据类型将来自相机的数据转换为 YUV420P 帧？

# java - 排序算法不起作用

> ID：11423044
> 
> 赞同：0
> 
> 时间：2012-07-10T22:36:14.480
> 
> 标签：java, generics, sorting, set

当我将对象添加到我的泛型类（我正在使用字符串）时，我需要按升序排序。

我正在使用选择排序，但它不起作用。

我不知道这是否是正确的做法，所以会很感激你的意见。

### 订单集类

```
public class OrderSet<T extends Comparable> implements Set<T> {

    private T[] items;
    private int size;

    public OrderSet()
    {
        items = (T[]) new Comparable[5];        
    }

    @Override
    public void add(T s)
    {
        if(size >= items.length)
        {
            items = grow(items);
        }

        for(int i = 0; i < items.length; i++) 
        {
            if(items[i] == null)
            {
                items[i] = s;
                size++;
                break;
            }
        }

        if(size > 1)
        {
            for (int i = 0; i < size-1; i++)
            {
                for(int j = 1; j < size; j++)
                {
                    T tmp;
                    if (items[i].compareTo(items[j]) > 0)
                    {
                        tmp = items[i];
                        items[i] = items[j];
                        items[j] = tmp;
                    }                    
                }                
            }
        }
    }

    @Override
    public void show()
    {        
        for(T a : items)
        { 
            if(a != null)
                System.out.print(a+", ");            
        }
    }

    public T[] grow(T[] a)
    {
        T[] newA = (T[]) new Comparable[a.length+5];
        System.arraycopy(a, 0, newA, 0, a.length);
        return newA;
    }

} 
```

### 主要的

```
public class Main {

    public static void main(String[] args) throws IOException
    {
        OrderSet<String> s1 = new OrderSet<>();
        WordCount s2 = new WordCount();

        Scanner input = new Scanner("the boy plays in the park with dog");
        while (input.hasNext()) 
        {
            String w = input.next();
            s1.add(w);
        }

        s1.show();

        System.out.println();
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:42:52.917

您似乎在做的是添加项目时的冒泡排序，选择排序的通用形式如下：

```
for(int i = 0; i<arr.length - 1; i++)
{
   int smallest = i;
   for(int j = i + 1; j< arr.length; j++)
   {
       if(arr[j].compareTo(arr[smallest]) > 0)
           smallest = j;
   }
   if(smallest < arr.length && smallest != i)
       swap(arr[i], arr[smallest]);
} 
```

您可以将最大的索引交换到最后一个索引，但这也应该有效。请注意，交换只是实际交换的占位符伪代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:51:56.473

我认为这是你的排序算法是错误的。Ardentsonata 是对的，您使用了 Bubblesort 算法但有一个错误：

```
for (int i = 0; i < size-1; i++) {
    for(int j = 1; j < size; j++){
        T tmp;
        if (items[i].compareTo(items[j]) > 0) {
            tmp = items[i];
            items[i] = items[j];
            items[j] = tmp;
        }                    
    }                
} 
```

问题是第二个循环的起始值，您要检查是否有任何其他元素 - 除了您已经排序的元素大于您现在要排序的元素。所以你的第二个循环需要这个头：

```
for(int j = (i+1); j < size; j++) 
```

所以你真的对数组进行了排序。

否则，您将无法控制切换值，因为在将某些内容切换到第二个插槽后，您会在下一次迭代中将其切换回。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:56:58.100

使用**java.util.TreeSet< T >**，它实现了**SortedSet< T >**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T07:42:53.107

在这种情况下最好使用字符串比较概念

```
class City {

public static void main (String args[])
{ 
int i,j;
String temp;
String s[] = new String[6];
for(i=0; i<6; i++)
 s[i]=args[i];
for(i=0;i<6;i++){
  for(j=0;j<6-i-1;j++){
 if(s[j].compareTo(s[j+1])>0)
 {
   temp=s[j];
   s[j]=s[j+1];
   s[j+1]=temp;
 } 
}
 }
 for(i=0; i<6; i++)
 {
 System.out.println(s[i]);
}
}} 
```

# android - 查询android的setOnClickListener()和onClick()

> ID：11423056
> 
> 赞同：0
> 
> 时间：2012-07-10T22:37:51.070
> 
> 标签：android

setOnClickListener() 方法和 onClick() 方法在点击过程中实际做了什么

events.为什么在点击事件期间需要这两种方法。

请详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:44:19.347

onClickListener() 方法可让您处理“点击事件”。您可以在此方法下方有语句，当您单击其中一个对象时会发生这些语句。

您可以访问[此处](http://developer.android.com)以获取有关这些方法的更多知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:05:22.393

@pronay biswas 当您想解释此类事情时，只需将鼠标光标悬停在该文本上，就会出现一个弹出对话框，如果您使用的是 eclipse，它将告诉您有关 android 中的特定事情

setOnClickListener 做什么

```
void android.view.View.setOnClickListener(OnClickListener l)

public void setOnClickListener (View.OnClickListener l) 
Since: API Level 1 
Register a callback to be invoked when this view is clicked. If this view is not 
clickable, it becomes clickable.

Parameters
  The callback that will run 
```

android.view.View.OnClickListener

```
// working of View.OnClickListener 

    public static interface 
    View.OnClickListener
    android.view.View.OnClickListener 
    Known Indirect Subclasses 
    CharacterPickerDialog, KeyboardView, QuickContactBadge 
    CharacterPickerDialog Dialog for choosing accented characters related to a base character.  
    KeyboardView A view that renders a virtual Keyboard.  
    QuickContactBadge Widget used to show an image with the standard QuickContact badge and on-click behavior.  

Class Overview
Interface definition for a callback to be invoked when a view is clicked. 

// OnClickListener

@Override

Specified by: onClick(...) in OnClickListener
public abstract void onClick (View v) 
Since: API Level 1 
Called when a view has been clicked.

Parameters
v  The view that was clicked. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:48:57.040

如果使用`onClick()`XML 中定义的函数，则必须将`onClick()`方法放在当前 Activity 中。例如：

主.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent">
<Button
   android:id="@+id/button1"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:onclick:doSomething() />
</LinearLayout> 
```

主.java

```
 public class Main extends Activity {

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
      }

     public void doSomething(){
     //do something here
     }
  } 
```

以上只会在 Main.Java 中搜索 doSomething

如果您正在使用片段，这一点很重要，因为设置 onclick 侦听器（使用`setOnClickListener()`）的编程方式可能会使用处理片段中的点击的方法`onCreateView()`，如果从 XML 中引用它就不会被找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T22:49:29.530

`onClickListener`是一个允许您使用该`onClick`方法的接口。这是一个链接，将更详细地描述它。基本上，您使用`setOnClickListener`来实现您创建的方法。

链接在这里：

[http://developer.android.com/guide/topics/ui/ui-events.html](http://developer.android.com/guide/topics/ui/ui-events.html)

# ruby - Ruby Object 中是否有将自身传递给块或过程的方法？

> ID：11423061
> 
> 赞同：2
> 
> 时间：2012-07-10T22:38:21.180
> 
> 标签：ruby, methods

我认为在 Ruby 中有类似的东西是很自然的：

```
class Object
  def yield_self
    yield(self)
  end
end 
```

是否存在这样的方法？（我还没有找到。）其他人认为拥有它会很好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-04T22:56:45.920

`yield_self`截至 2017 年 6 月，已在一个月前添加到 ruby​​ 核心。[https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/58528](https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/58528)

它在修订号 58528 之后的 ruby​​ 2.5.0 中，尽管我还不确定如何获得该代码。也许如果有人知道他们如何编辑这个答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:51:36.480

我不明白您为什么想要以下复杂性：

```
Object.new.yield_self do |foo|
  ...
end 
```

当以下几乎完全相同时：

```
foo = Object.new
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T23:00:08.153

确实有`tap`一种方法几乎完全符合您的要求：

```
x = [].tap do |array|
  array << 'foo'
  array << 9
end
p x

#=> ["foo", 9] 
```

正如 Rob Davis 所指出的，`tap`你的方法和你的方法之间有一个微妙但重要的区别。的返回值`tap`是接收者（即我的示例中的匿名数组），而您的方法的返回值是块的返回值。

您可以在[方法](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-tap)[的源代码中`tap`](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-tap)看到这一点：

```
VALUE
rb_obj_tap(VALUE obj)
{
    rb_yield(obj);
    return obj;
} 
```

我们返回的`obj`是传递给函数的，而不是返回值`rb_yield(obj)`。如果这种区别很重要，那么`tap`这不是您所需要的。否则，它似乎很合适。

# ruby - 如何使用 Ruby Rest-Client 处理异常

> ID：11423068
> 
> 赞同：39
> 
> 时间：2012-07-10T22:38:57.657
> 
> 标签：ruby, rest-client

我最近从 Ruby 的 Net:HTTP 类切换到了 rest-client 1.6.7。

我发现形成请求要容易得多，但与 Net:HTTP 请求不同，当 rest-client 得到 200 以外的任何内容时，请求就会终止。我尝试在 RestClient.get 之后直接放置一个断点，但它永远不会被击中 - 所以我做错了什么。

```
def get_member_using_card
  resource = "#{@settings_app_uri}api/v1/card/#{self.member_card_num}?token=#{@settings.api_key}"
  response = RestClient.get resource
  if response.code == 200 
    card = JSON.parse(response.body)
    self.customer_id = card['card']['customer_id']
  else
    return 0
  end
end 
```

这导致了这个堆栈跟踪：

```
RestClient::ResourceNotFound - 404 Resource Not Found:
        /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/rest-client-1.6.7/lib/restclient/abstr
act_response.rb:48:in `return!'
        /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/rest-client-1.6.7/lib/restclient/reque
st.rb:230:in `process_result'
        /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/rest-client-1.6.7/lib/restclient/reque
st.rb:178:in `block in transmit'
        /Users/tim/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:627:in `start'
        /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/rest-client-1.6.7/lib/restclient/reque
st.rb:172:in `transmit'
        /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/rest-client-1.6.7/lib/restclient/reque
st.rb:64:in `execute'
        /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/rest-client-1.6.7/lib/restclient/reque
st.rb:33:in `execute'
        /Users/tim/.rvm/gems/ruby-1.9.2-p290/gems/rest-client-1.6.7/lib/restclient.rb:68
:in `get' 
```

有人可以告诉我如何正确评估响应代码并防止此异常发生...？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-17T09:04:37.283

[请参阅http://rubydoc.info/gems/rest-client/](http://rubydoc.info/gems/rest-client/)上的标题**异常**

*   对于 200 到 207 之间的结果代码，将返回 RestClient::Response
*   对于结果代码 301、302 或 307，如果请求是 get 或 head，则将遵循重定向
*   对于结果代码 303，将遵循重定向并将请求转换为 get
*   对于其他情况，将引发包含响应的 RestClient::Exception，将抛出特定的异常类以获取已知错误代码

* * *

```
RestClient.get 'http://example.com/resource'
➔ RestClient::ResourceNotFound: RestClient::ResourceNotFound`

begin
  RestClient.get 'http://example.com/resource'
rescue => e
  e.response
end
➔ 404 Resource Not Found | text/html 282 bytes 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-22T15:50:41.440

同样在@wich 指出的同一个文档中，您可以将一个块传递给 RestClient.get ，这样它就不会在非 200 响应代码上引发异常：

```
# Don't raise exceptions but return the response
RestClient.get('http://example.com/resource'){|response, request, result| response } 
```

[请参阅文档](https://www.rubydoc.info/gems/rest-client/1.6.7/frames#label-Result+handling)中的“结果处理”部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-10T13:18:34.663

```
rescue RestClient::ExceptionWithResponse => err 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-31T20:26:29.790

可能会发生几个错误，特定的异常类型，如*Errno::EHOSTUNREACH*或更通用的 ExceptionWithResponse。[查看自述](https://github.com/rest-client/rest-client#response-callbacks-error-handling)文件以获取更多信息。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-04-29T02:39:56.420

处理休息客户端异常的好方法。

有关更多信息，请检查[rest-client#response-callbacks-error-handling](https://github.com/rest-client/rest-client#response-callbacks-error-handling)

```
RestClient.get('http://example.com/resource') { |response, request, result, &block|
  case response.code
  when 200
    p "It worked !"
    response
  when 423
    raise SomeCustomExceptionIfYouWant
  else
    response.return!(&block)
  end
} 
```

# excel - “无法解析来自的对象引用”，Rally

> ID：11423069
> 
> 赞同：3
> 
> 时间：2012-07-10T22:39:03.063
> 
> 标签：excel, rally

我正在尝试使用基于迭代的 Excel 插件在 Rally 上运行查询。我已经确定该插件通过运行对被阻止故事的查询来工作。但是，尝试通过迭代查询时出现以下错误：

查询因错误而失败：无法解析来自“迭代名称”的对象引用

Matt Greer 在三月份回答[了一个非常相似的问题](https://stackoverflow.com/questions/9879339/how-do-i-handle-a-value-used-in-a-query-that-has-special-characters)，但我不知道如何将这个答案转化为让我的查询运行。请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:01:28.120

Excel 加载项中的查询选择器相当原始，实际上仅适用于本身不是对象的字段（ScheduleState、PlanEstimate 等）

由于您正在查询子对象，您只需在文本字段中手动输入查询并保存即可。

(Iteration.Name = "Foo")

# javascript - 调用更新方法与有一个 setInterval

> ID：11423072
> 
> 赞同：5
> 
> 时间：2012-07-10T22:39:23.387
> 
> 标签：javascript, design-patterns

在我的游戏引擎中，有些对象需要定期更新。例如，一个场景可以降低它的 alpha，所以我设置了一个间隔来做到这一点。此外，相机有时需要稍微抖动一下，这需要对旋转属性进行插值。

我看到有两种方法可以处理这些问题：

1.  有一个调用所有其他对象的更新方法的 update() 方法。对象跟踪自上次更新以来的时间并采取相应措施。

2.  `setInterval`为每个对象的更新方法做一个。

什么是最好的解决方案，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:45:25.743

`setInterval`不遵守时钟，它只是在事件进入时对其进行排序。浏览器倾向于在事件之间至少保留一些少量的时间。因此，如果您有 10 个事件都需要在 100 毫秒后触发，您可能会看到最后一个事件在 200 毫秒后触发。（这很容易测试）。

从这个意义上说，只有**一个**事件（并对所有对象调用更新）比让每个对象设置它自己的间隔*更好。*尽管可能还有其他考虑因素，但至少出于这个原因，选项 2 是不可行的。

这里有更多关于`setInterval` [浏览器如何确定 setInterval 应该使用什么时间？](https://stackoverflow.com/questions/11370522/how-do-browsers-determine-what-time-setinterval-should-use)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:47:33.903

我发现制作一个好的 update() 函数并保持良好的帧速率和更少的负载的最佳方法如下。

有一个`update()`绘制框架的方法，通过循环所有可绘制对象的某种队列/调度，他自己的`update()`函数被添加到这个更新事件队列/调度中。（事件监听器）

这样，您不必循环所有未安排重绘/更新的对象（如菜单按钮或十字准线）。并且您没有为所有可绘制对象运行过多的间隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:48:31.487

我建议`update()`在`setInterval`.

另外，我猜几个 setintervals 运行的时间是不可靠的。

另一种可能性，取决于您的游戏中发生的其他事情，使用一堆单独的间隔可能会在计分和比较得分等时引入竞争条件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T02:23:52.917

所提出的算法并不是相关方法所独有的。也就是说，您可以使用 setInteval 调用所有的更新方法，也可以通过重复调用 setTimeout 让每个对象自行更新。

更重要的是，单个计时器比多个计时器（任一类型）的开销更少。当你有很多计时器时，这真的很重要。另一方面，只有一个计时器可能不适合，因为某些对象可能需要比其他对象更频繁地更新，或者更新到不同的时间表，所以尽量减少它们。

setTimeout 的一个优点是可以调整到下一次调用的间隔以满足特定的调度要求，例如，如果一个延迟，您可以跳过下一个或提前进行。setInterval 将相对于一致的时钟缓慢漂移，并且一次调整更加困难。

另一方面， setInteval 只需要调用一次，因此您不必一直调用计时器。你最终可能会得到一个组合。

# android - Android：MarginLayoutParams 在所有手机上都不能正常工作

> ID：11423073
> 
> 赞同：1
> 
> 时间：2012-07-10T22:39:29.843
> 
> 标签：android, margin, layoutparams

我有一个全屏视图，我部分地从手机屏幕移入和移出，比如说屏幕的一半。

为此，我使用 MarginLayoutParameters 将上边距设置为屏幕的一半，或者设置为 0，以防我希望它完全可见。

一切都很完美，但是现在我正在其他手机上进行测试，这些手机似乎是低分辨率的，视图被正确地减半，但总是与顶部对齐。

尝试左右边距也总是将其与左侧对齐。

我是否错过了新手机/安卓操作系统已经为我做的事情？

此视图位于 FrameLayout 内。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:07:44.177

好吧，我刚刚使用了 setPadding 并获得了我想要达到的相同结果，但我的问题仍然存在。

# ios - 无法从视图控制器与模型通信

> ID：11423078
> 
> 赞同：0
> 
> 时间：2012-07-10T22:40:19.100
> 
> 标签：ios, model-view-controller

我无法在视图控制器上调用方法或创建变量。我正在使用以下代码，但它不起作用。

```
// MODEL
@interface MyModel : NSObject
-(void)awesome;
@end

@implementation MyModel
-(void)awesome {
    NSLog(@"awesome");
}
@end

// VIEW CONTROLLER
@interface MyViewController: UIViewController
@property (nonatomic, strong) MyModel *modelObject;
@end

@implementation MyViewController
@synthesize modelObject;
-(void)viewDidLoad
{
    [self.modelObject awesome];
    [super viewDidLoad];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:00:35.420

viewDidLoad 缺少`self.modelObject = [MyModel new];`. 没有它，modelObject 为 nil，并且忽略了 awesome。这也是为什么创建变量和赋值不起作用的原因。

# javascript - PhantomJS 上的 XmlHttpRequest 异常 101

> ID：11423079
> 
> 赞同：0
> 
> 时间：2012-07-10T22:40:39.457
> 
> 标签：javascript, phantomjs

试图自动化任务，但 phantomjs 无法正确“打开”[这个](https://notalegal.sefin.ro.gov.br/contribuinte/form.jsp?sys=NPJ&formID=%7BC90B91CE-E9C3-46B2-8FED-75B7B219A3AD%7D&scrolling=yes)url。

该应用程序给出 101 错误。

使用此脚本可重现错误

```
var page = new WebPage();

page.open(phantom.args[0], function(status){
  console.log(status);
  page.render(phantom.args[1]);
  phantom.exit();
}); 
```

并运行命令`phantomjs --ignore-ssl-errors=yes script.js https://notalegal.sefin.ro.gov.br/contribuinte/form.jsp\?sys\=NPJ\&formID\=\{C90B91CE-E9C3-46B2-8FED-75B7B219A3AD\}\&scrolling\=yes ~/page.png`

我已经用 phantomjs 1.4 和 1.6 进行了测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:57:54.260

我不知道为什么它不起作用，但我找到了一种（某种）解决方法：使用 URL 缩短器 :)

当我这样做时`phantomjs --ignore-ssl-errors=yes script.js http://tinyurl.com/cu2orzg page.png`，它不会给出任何错误。它呈现与您的链接完全相同的内容（图片显示非法操作）。也许您的链接已过期或其他...

# java - 带有消费者过滤的生产者-消费者阻塞队列

> ID：11423081
> 
> 赞同：1
> 
> 时间：2012-07-10T22:40:40.917
> 
> 标签：java, producer-consumer, blockingqueue

我正在尝试在 java 中编写生产者-消费者模式。我是一个网络客户端，通过一系列不同的连接连接到许多服务器。服务器产生不同的“工作”数据包，这些数据包都被放入一个阻塞队列。我想要做的是以一种只有特定类型的工作包才能交付给特定消费者的方式阻止我的消费者。

例子：

*   阻塞队列中填充了三种不同类型的工作包对象：A、B、C
*   两个消费者正在等待工作包对象。消费者 1 只想要 A 型，消费者 2 只想要 B 型或 C 型

java.util 中是否有一些标准类...或者我必须推出自己的类？另外，如果需要的话，最好的方法是什么？

提前致谢！

安德鲁·克洛法斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:53:36.293

在 java.util 中没有执行此操作的标准方法，但这里有一个简单的设计：

我假设 A、B、C 都实现了接口 D，并且如果 A 与 Bs 和 Cs 一起被乱序处理并不重要。

有一个带有一组排序消费者的“输入” BlockingQueue。这些消费者确定队列中对象的类型，并将它们提供给真正的工作人员从中获取的单独的特定于类型的“输出”队列。是否有一些限制要求您只有一个队列？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T20:05:13.007

您可以使用标准 JMS 获得此行为。您的生产者创建放置在 JMS 主题上的消息。消费者使用过滤订阅订阅主题：这样，订阅者 X 只能获取类型 X 的消息。（有关[API](http://docs.oracle.com/javaee/1.4/api/javax/jms/TopicSession.html)订阅的更多信息）

持久订阅者将满足您对每个订阅者排队消息的要求。

这是一个发布/订阅模型。

# javascript - 如何在 Opera 中清除 Canvas？

> ID：11423083
> 
> 赞同：0
> 
> 时间：2012-07-10T22:40:58.363
> 
> 标签：javascript, html

有人可以帮我吗？我有以下代码，它似乎在 Chrome 中运行良好，但在 Opera 中不起作用。这是代码：

```
 var canvas = document.getElementById("myCanvas"); 
```

var context = canvas.getContext("2d"); 画布.宽度=画布.宽度；

使用上面的代码在绘图后清除线条，它在 Chrome 中工作正常，但在 Opera 中绘图没有被清除。请帮忙。太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:41:59.037

使用 clearRect(); 这是我知道的唯一清除画布的方法

清除您想要的预期区域或提供整个画布的高度和宽度。如果您提供整个画布的尺寸，则必须完全重新绘制它。

# ruby-on-rails - 上传文件时用户离开页面时确认

> ID：11423087
> 
> 赞同：0
> 
> 时间：2012-07-10T22:41:53.197
> 
> 标签：ruby-on-rails, file-upload, carrierwave

我正在使用基于 blueimp ( [http://blueimp.github.com/jQuery-File-Upload](http://blueimp.github.com/jQuery-File-Upload/) ) 和 Ruby on Rails GEM Carrierwave 的多文件上传场景。我遇到的问题是用户可以在文件上传完成之前离开网页。我正在尝试创建一种方法，如果当前正在上传文件并且用户在上传完成之前离开页面，那么它应该返回确认对话框。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:48:08.663

这可以通过 Javascript 的[`onbeforeunload`](https://developer.mozilla.org/en/DOM/window.onbeforeunload)事件来完成。

```
var upload_pending = false;

// ...

// Once upload has started, toggle the boolean flag (in something like
// a click event on the submit button for the form with the file field, 
// making sure to toggle it back after the upload finishes
upload_pending = true;

// ...

window.onbeforeunload = function (e) {
  e = e || window.event;

  if (!upload_pending) return;

  // For IE<8 and Firefox prior to version 4
  if (e) {
    e.returnValue = 'There is a pending upload.';
  }

  // For Chrome, Safari, IE8+ and Opera 12+
  return 'There is a pending upload.';
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:12:22.573

添加到处理文件上传的表单的末尾。

```
$(window).bind('beforeunload', function () {
    if ($('#fileupload').data('fileupload')._active) {
        return 'Leaving now would abort your upload. Are you sure?';
    }
}); 
```

# java - javax.swing.plaf 的许多异常

> ID：11423090
> 
> 赞同：2
> 
> 时间：2012-07-10T22:42:04.200
> 
> 标签：java, swing

我将 com.sun.awt.AWTUtilities 用于我的 swing 应用程序，以便为 JFrame 提供一些花哨的外观。我的 JRE 是 1.6_29 。我使用 Netbeans IDE 7.0.1 。我的 Swing 应用程序不时提供各种类型的异常，如下所示

*   `java.lang.ClassCastException: com.sun.java.swing.plaf.nimbus.DerivedColor$UIResource cannot be cast to java.awt.Insets`

*   `java.lang.ClassCastException:
    com.sun.java.swing.plaf.nimbus.DerivedColor$UIResource cannot be cast to javax.swing.InputMap`

*   `java.lang.ClassCastException:
    com.sun.java.swing.plaf.nimbus.DerivedColor$UIResource cannot be cast to java.lang.Boolean`
    所有这些例外并没有放在一起。每一个都有不同的时间。但有时根本没有异常，运行良好。但有时会抛出这些异常，然后应用程序无法正常工作。我还发现，如果我对应用程序进行一些更改（例如：添加新库然后清理和构建），那么它运行良好。但第二次运行时，抛出异常（上述异常之一）。我也更改了主题，但没有解决。请任何人让我知道我的错在哪里，或者我该如何解决这个问题？

# javascript - 删除重复代码

> ID：11423096
> 
> 赞同：0
> 
> 时间：2012-07-10T22:42:39.130
> 
> 标签：javascript, loops, refactoring

如果没有所有重复，我将如何编写此代码

```
 // I have a loop which decrements m each time
    // set m to the starting point
    m = mid
    // set f to a calculated array value
    f = dict[l].substr( l * --m, l )
    while (f.substr(0,x) === word && (!limit || matches.length < limit)){
        matches.push(f);
        // same as what was defined outside the while loop
        // which seems to me like unnecessary repetition
        f = dict[l].substr( l * --m, l )
    }
    // then I repeat it all, but incrementing m
    // reset m to the starting point
    m = mid
    f = dict[l].substr( l * m++, l )
    while (f.substr(0,x) === word && (!limit || matches.length < limit)){
        matches.push(f);
        f = dict[l].substr( l * m++, l )
    } 
```

有两个部分...

1.  每个块包含一个重复`f = ...`部分
2.  块重复，只改变增量/减量`m`

* * *

编辑：代码的作用...

`mid`表示按字母顺序排序的固定长度单词列表的任意入口点，没有分隔符. 我的目标是列出与集合前缀匹配的所有单词，因此必须找到任意`mid`点的所有单词（通过二进制搜索方法输入）并向前查找。

* * *

编辑：更多细节......

字典看起来像这样：

```
dict = [
  "", // offset other values to equal word length
  "ai",    // all length 1
  "inatonuptogo",    // all length 2
  "catcrydogendgodhamhathit",    // all length 3
  "foodhackhallhandhardhatehatshavehellridewood" // all length 4
] 
```

`l`是搜索词的词长，所以`dict[l]`是字典中的一排词，长度为`l`。

我正在修改[John Resig 的二进制搜索方法](http://ejohn.org/blog/revised-javascript-dictionary-search/)，以便它匹配前缀而不是整个单词，并返回一组结果，而不是真实值。我也在其中设置了一个限制，因为我将把它用于自动完成功能，它只需要几个返回值，而不是所有匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:47:17.877

您可以将循环拉入一个函数，因为除了递增/递减之外，它们是相同的：

```
function helperFunction(m, f, l, mid, dict, matches, limit, increment)
{
    m = mid;

    if (increment)
        f = dict[l].substr(l * m++, l);
    else f = dict[l].substr(l * --m, l);

    while (f.substr(0, x) === word && (!limit || matches.length < limit))
    {
        matches.push(f);
        f = dict[l].substr(l * m, l);

        if (increment)
            f = dict[l].substr(l * m++, l);
        else f = dict[l].substr(l * --m, l);
    }
} 
```

我已经在参数列表中包含了所有变量，因为它们的范围不清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T22:47:44.833

把它放在一个函数中并传入一个增量。由于 m++ 将 +1 添加到 m 并且 m-- 将 -1 添加到 m，因此您可以调用例如：

```
 function foo(mid, dict, delta) {
 m = mid
 //   f = dict[l].substr( l * m += delta, l )
    f = dict[l].substr( l * m, l );
    m += delta;
    while (f.substr(0,x) === word && (!limit || matches.length < limit)){
        matches.push(f);
        // f = dict[l].substr( l * m += delta, l )
        f = dict[l].substr( l * m, l );
        m += delta;
    }
    return matches;
}

matches = foo(mid, dict, -1);
matches = foo(mid, dict, +1); 
```

我只是将匹配项作为返回值提取出来，因为我不确定您的代码正在尝试做什么，但它应该向您展示这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T20:49:38.143

@Billy Moon，您可以在下面验证此代码吗？

```
function foo(flag, m) { return dict[l].substr( l * (Boolean(flag)) ? --m : m++), l ); }
var flag = 1;
do {
    m = mid
    f = foo(flag, m)
    while (f.substr(0,x) === word && (!limit || matches.length < limit)){
        matches.push(f);
        f = foo(flag, m)
    }
    flag--;
} while(flag > -1) 
```

我希望可以帮助你。

# python - 如何将字符串字典转换为列表到字典列表？

> ID：11423101
> 
> 赞同：3
> 
> 时间：2012-07-10T22:43:29.613
> 
> 标签：python, combinations, itertools

如何将字符串字典转换为列表到将字符串映射到这些列表中的值的字典列表？例如，下面的字典

```
{'a': [1,2],
 'b': ['x', 'y', 'z']} 
```

将转换为以下列表

```
[{'a': 1, 'b': 'x'}, {'a': 1, 'b': 'y'}, {'a': 1, 'b': 'z'},
 {'a': 2, 'b': 'x'}, {'a': 2, 'b': 'y'}, {'a': 2, 'b': 'z'},] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T22:53:21.010

您在这里想要的主要是值的乘积，然后重新创建字典。我们实际上可以借助以下工具轻松做到这一点[`itertools.product()`](http://docs.python.org/library/itertools.html#itertools.product)：

```
>>> from itertools import product
>>> test = {'a': [1, 2], 'b': ['x', 'y', 'z']}
>>> [dict(zip(test.keys(), part)) for part in product(*test.values())]
[{'a': 1, 'b': 'x'}, {'a': 1, 'b': 'y'}, {'a': 1, 'b': 'z'}, 
 {'a': 2, 'b': 'x'}, {'a': 2, 'b': 'y'}, {'a': 2, 'b': 'z'}] 
```

我们所做的是将字典中的所有列表生成产品，然后取出每个生成的对（或者在字典中有更多项目的情况下，任意长的元组）并将其压缩到字典中的键。然后我们将它传递给`dict()`内置函数以制作字典。这一切都在列表理解中，以快速制作列表。

# powershell - Powershell读取大文件的元数据

> ID：11423102
> 
> 赞同：0
> 
> 时间：2012-07-10T22:43:33.373
> 
> 标签：powershell, metadata

我有一个脚本，它循环播放我拍摄的大量图像并读取焦距和相机模型，显示焦距和总焦距图表（这对于帮助确定下一次购买镜头很有帮助，但除此之外点）。

这对于 10 MB 以下的 JPG 图像非常有效，但是一旦遇到接近 20 MB 的 RAW 文件（如佳能的 CR2 格式），它就会出现“内存不足”错误。

有没有办法增加 Powershell 中的内存限制，或者只读取文件的元数据而不加载整个文件..？

这是我目前正在使用的：

```
# load image by statically calling a method from .NET
$image = [System.Drawing.Imaging.Metafile]::FromFile($file.FullName)

# try to get the ExIf data (silently fail if the data can't be found)
# http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/EXIF.html
try
{
  # get the Focal Length from the Metadata code 37386
  $focalLength = $image.GetPropertyItem(37386).Value[0]
  # get model data from the Metadata code 272
  $modelByte = $image.GetPropertyItem(272)
  # convert the model data to a String from a Byte Array
  $imageModel = $Encode.GetString($modelByte.Value)
  # unload image
  $image.Dispose()
}
catch
{
  #do nothing with the catch
} 
```

我在这里尝试使用该解决方案：http: [//goo.gl/WY7Rg](http://goo.gl/WY7Rg)但 CR2 文件只会在任何属性上返回空白...

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T17:14:33.633

问题是发生错误时图像对象没有得到处理。当发生错误时执行退出 try 块，这意味着`Dispose`调用永远不会执行并且内存永远不会返回。

要解决此问题，您必须将`$image.Dispose()`调用放在`finally`try/catch 末尾的块中。像这样

```
try
{
  /* ... */
}
catch
{
  #do nothing with the catch
}
finally
{
  # ensure image is always unloaded by placing this code in a finally block
  $image.Dispose()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:31:42.417

我使用[这个模块](http://archive.msdn.microsoft.com/PSImage/)来获取图像上的 EXIF 数据。我从未在 .CR2 上测试过它，但在 .CRW 上测试过大约 15MB。

试试看，让我知道。

# php - 警告：mysql_result() 期望参数 1 是资源，给定的布尔值

> ID：11423106
> 
> 赞同：4
> 
> 时间：2012-07-10T22:43:45.523
> 
> 标签：php, mysql

> **可能重复：**
> [PHP：警告：sort() 期望参数 1 是数组，资源给定](https://stackoverflow.com/questions/6169146/php-warning-sort-expects-parameter-1-to-be-array-resource-given)

昨晚我的 PHP 函数脚本运行良好，现在当我今天登录继续处理它时，我得到了

“警告：mysql_result() 期望参数 1 是资源，给定的布尔值”。

我不知道为什么这不起作用。我已经在线阅读了 PHP 手册，我什至看到了我所做的事情的使用和工作示例。谁能帮我解决这个问题？我一直在修复一个又一个错误（当我今天登录时，很多事情都停止了工作），我在这里无所适从。如果有帮助，我将在 Windows 7 上为我的服务器使用 XAMPP。

### 代码：（[也可通过 Pastebin 获得）](http://pastebin.com/wMDDt3hd)

```
<?php

function dbConnect() {
$dbserver="127.0.0.1";
$dbuser="Mike";
$dbpassword="mike";
$dbname="devsite";

$con = mysql_connect($dbserver, $dbuser, $dbpassword);
mysql_select_db($dbname, $con);
}

function getSiteTitle() {

$siteTitle = mysql_result(mysql_query("SELECT \`siteTitle\` FROM siteSettings"), 0);
return $siteTitle;
}

function getSiteHeader(){

$siteHeader = mysql_result(mysql_query("SELECT \`siteHeader\` FROM siteSettings"), 0);
return $siteHeader;
}

function getBodyContent() {

$bodyContent = mysql_result(mysql_query("SELECT \`bodyContent\` FROM siteSettings"), 0);
return $bodyContent;
}

?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T22:47:41.627

问题在于`mysql_query()`返回的是布尔值而不是结果资源。发生这种情况的原因有两个：

1.  您执行了返回成功/失败而不是结果集的查询（例如`UPDATE`）
2.  您的查询失败

在您的情况下，查询失败。它失败的原因是因为您在不需要的地方逃脱了 PHP 字符串中的反引号。

您的线条如下所示：

```
$siteTitle = mysql_result(mysql_query("SELECT \`siteTitle\` FROM siteSettings"), 0); 
```

当他们应该是这样的：

```
$siteTitle = mysql_result(mysql_query("SELECT `siteTitle` FROM siteSettings"), 0); 
```

现在，一些旁注：

*   不要编写使用这些`mysql_*`函数的新代码。它们已被弃用，最终将从 PHP 中删除。改用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)（我个人推荐 PDO、YMMV）
*   以这种方式嵌套数据库函数并不是编写代码的特别好方法。每次函数调用后明确检查错误会更好。

例如：

```
$result = mysql_query("SELECT somecol FROM sometable");
if (!$result) {
  // Handle error here
}
// Now process the result 
```

*   您应该在查询中引用所有标识符或不引用（最好是全部）。只引用一些会使阅读变得更加困难。

例如

```
SELECT `siteTitle` FROM `siteSettings` 
```

# python - 将 2 个值存储在一个变量中？

> ID：11423114
> 
> 赞同：0
> 
> 时间：2012-07-10T22:44:57.737
> 
> 标签：python, store

我想知道，有没有一种方法可以在我的主要方法上存储开始值和结束值。我尝试这样做，但它给了我错误：

```
def searchM():

    fileAddress = '/database/pro/data/'+ID+'.txt'
    with open(fileAddress,'rb') as f:
        root = etree.parse(f)
        for lcn in root.xpath("/protein/match[@dbname='M']/lcn")
            start = int(lcn.get("start"))#if it is PFAM then look for start value
            end = int(lcn.get("end"))#if it is PFAM then also look for end value
    return "%s, %s" % (start, end,)

values = searchM()

(start, end,) = values 
```

错误消息是 UnboundLocalError: local variable 'start' referenced before assignment

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:57:10.090

您遇到的错误是由`start`and`end`变量引起的。尝试先初始化它们，以便它们即使在未设置值的情况下也存在。

此外，您正在尝试创建并返回一个字符串，然后将其解压缩为两个不同的变量。

尝试以下操作：

```
def searchM():
    fileAddress = '/database/pro/data/%s.txt' % ID
    start = None
    end = None
    with open(fileAddress,'rb') as f:
        root = etree.parse(f)
        for lcn in root.xpath("/protein/match[@dbname='M']/lcn"):
            start = int(lcn.get("start")) #if it is PFAM then look for start value
            end = int(lcn.get("end")) #if it is PFAM then also look for end value
    return start, end

(start, end) = searchM() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:18:24.350

如果未找到`start`，您需要为 提供值：`end`

```
for lcn in root.xpath("/protein/match[@dbname='M']/lcn"):
    start = int(lcn.get("start"))
    end = int(lcn.get("end"))
    break
else: # not found
    start = end = None 
```

# c# - 带有位置和分组依据的 Sql linq 查询

> ID：11423115
> 
> 赞同：0
> 
> 时间：2012-07-10T22:45:16.863
> 
> 标签：c#, asp.net, sql, linq

我对 Linq 有严重的问题。我有简单的 sql 查询：

```
 select 
    intMiesiac, 
    intRok, 
    Sum(intIn) as 'In',
    Sum(intOut) as 'Out' 
from dbo.GlobalDane 
where intRampNr=1 
group by intMiesiac, intRok 
```

我查询指定 intRampNr 的进出总和，并希望它按月和年分组。
在 linq 中尝试了各种查询，但是当我将查询结果放入 gridview 的数据源然后绑定数据源时，它失败了，或者它只显示了空单元格。
如何在 C# 下的 linq 中创建相同的语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:50:24.383

像下面这样的东西会为你做的：

```
var results = 
    dataContext.GlobalDanes
    .Where(gd => gd.intRampNr == 1)
    .GroupBy(
        gd =>
            new 
            {
                 gd.intMiesiac,
                 gd.intRok,
            })
    .Select(
        grp =>
            new 
            {
                grp.Key.intMiesiac,
                grp.Key.intRok,
                In = grp.Sum(gd => gd.intIn),
                Out = grp.Sum(gd => gd.inOut),
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:02:14.523

同样在查询语法中

```
from a in db.GlobalDane
where a.intRampNr == 1 
group a by new { a.intMiesiac, a.intRok, } into g 
select new 
{ 
    g.Key.intMiesiac,
    g.Key.intRok, 
    In = g.Sum(X => X.intIn),
    Out = g.Sum(X => X.inOut),
}; 
```

# javascript - 如何水平对齐具有动态大小的面板中的按钮

> ID：11423116
> 
> 赞同：0
> 
> 时间：2012-07-10T22:45:17.567
> 
> 标签：javascript, jquery, css

[**这**](http://jsfiddle.net/jxTUw/7/)是我的 jsFiddle 简单案例，作为您的入门。

当我拖动调整大小栏时，我希望`create`按钮保持在西窗格的中心。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:49:13.573

在父元素上居中文本：

```
.ui-layout-west {
    text-align: center;
} 
```

这是你的小提琴：http: [//jsfiddle.net/jxTUw/8/](http://jsfiddle.net/jxTUw/8/)

# java - 我试图在 linux 和 windows 上使用相同的 java 代码来识别性能差异。表面上看，linux下的性能差很多

> ID：11423122
> 
> 赞同：0
> 
> 时间：2012-07-10T22:46:01.003
> 
> 标签：java, windows, linux, sockets

我意识到这个问题非常笼统，我正在寻找关于如何协调 linux (RedHat 5) 与 Windows (2008 Server) 上的性能差异的非常一般的输入。我有一个 java 应用程序，它是多个服务的集合，这些服务正在处理来自线路的 netflow 数据包，在完全相同的硬件上，它似乎在 Linux 和 Windows 上以大约一半的容量执行。该应用程序涉及从套接字中提取数据包，并对它们执行一些非常简单的处理，并写出一个压缩的输出文件以供不同的 C++ 应用程序在下游处理。

程序中相关的区域： 从套接字中提取数据包 数据库访问 (mysql 5.1.45) 大量文件 i/o

就优化而言，我几乎没有 linux 经验，如果有人能指出一些在尝试针对不同于 windows 的 linux 进行优化时需要注意的事情，那就太好了。

另外，我不完全确定我还能提供哪些其他信息。就像，我知道我没有提供很多有用的信息，我很感激能指出我正确方向的问题。

是否有任何实用程序提供跨 Linux 和 Windows 的 Java 性能基准测试？

如果问题没有意义，或者我提供的信息太少，甚至无法提出有用的问题，请随意击落我。

谢谢！

编辑：所有 jvm 设置都是相同的（在两种情况下，我们对所涉及的服务都使用完全相同的包装器配置文件）

编辑：我想暂时提出这个问题。除了运行一个基本的分析器和比较结果之外，我已经无法花更多的时间来探索这个了。linux 和 windows 上的结果看起来几乎相同，除了从 NIC 中提取数据包的延迟要大得多。我仍然不明白为什么会这样，或者这是与其他网络状况有关的异常情况。当我有时间再次查看此内容时，我会发布更多内容。

感谢大家的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:57:36.107

从表面上看，对于相同的硬件，Linux 并不比 Windows 慢。在责怪操作系统（或操作系统上的 Java）之前，我会先看看其他事情：

*   硬件一样吗？相同的处理器规格？一样的内存？相同的光盘规格？

*   是不是数据库有问题？Windows 和 Linux 系统是否与同一个数据库实例通信？他们是否以同样的方式与之交谈。如果数据库实例不同，它们的配置是否相同？他们调好了吗？

此类问题的解决方案通常涉及打开性能监控、分析等，并分析系统的行为以查看瓶颈所在。

IMO，在花费（浪费）时间在一些理论（例如）使用 NIO 将解决问题之前，您需要弄清楚瓶颈到底在哪里。

* * *

> 是否有任何实用程序提供跨 Linux 和 Windows 的 Java 性能基准测试？

不是我知道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:44:19.130

其他一些可能影响性能的因素： - JVM - 您是否使用相同的供应商 JVM？同一个版本？都是 64 位还是 32 位？- 内核问题：您正在运行自定义内核吗？为您的处理器正确编译？- Linux 上的 CLI 性能工具（top、ntop、iostat、vmstat）告诉您什么？例如，如果 iostat 的 IO 等待时间较长，则可能是驱动器配置方式的问题

有很多因素会影响 Java 性能。从简单开始，向后工作。在我看来，简单的 == 基本统计数据，例如内存页面和 IO 性能。如果我们谈论的是完全相同的代码，那么开始识别差异（显然是操作系统，但还有什么？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T00:43:57.967

[JVisualVM](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/intro.html)可能已经在您的目标平台上可用。一个例子可以在[这里](https://stackoverflow.com/a/6310284/230513)找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T22:53:56.247

建议：找到一个适合您的场景的分析工具，并在两种环境中运行它。

例如，Eclipse TFTP：

*   [http://www.eclipse.org/articles/Article-TPTP-Profiling-Tool/tptpProfilingArticle.html](http://www.eclipse.org/articles/Article-TPTP-Profiling-Tool/tptpProfilingArticle.html)

*   [http://www.eclipse.org/tptp/home/documents/tutorials/profilingtool/profilingexample_32.html](http://www.eclipse.org/tptp/home/documents/tutorials/profilingtool/profilingexample_32.html)

PS：

Affe 对 NIO 的建议是一个很好的建议。诚然，它引出了一个问题，即为什么似乎存在性能*差异*。但是，如果您还没有使用 NIO，它可以使这两种环境都受益。恕我直言...

# c++ - 列表中的模板错误

> ID：11423123
> 
> 赞同：0
> 
> 时间：2012-07-10T22:46:08.157
> 
> 标签：c++, templates, opengl, type-conversion, class-template

我正在尝试实现科赫的雪花。为了练习起见，我制作了一个通用列表，但我遇到了一些问题。

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <gl/glut.h>

template <typename T> class Node {
public:
    T data;
    Node<T> *next;
    Node<T>(T d) {
        next = NULL;
        data = d;
    }
};
template <typename T> class List {
    Node<T> *head;
    int size;
public:
    List() {
        head = NULL;
        size = 0;
    }
    void append(T data){
        if(head == NULL) {
            head = new Node<T>(data);
        } else {
            Node<T> *n = head;
            while( n->next != NULL ) {
                n = n->next;
            }
            n->next = new Node<T>(data);
        }
        size++;
    }
    void appendAll(List<T> data) {
        if(data.getHead() == NULL)
            return;
        Node<T> *n = data.getHead();
        append(n->data);
        while(n->next != NULL){
            append(n->next->data);
            n = n->next;
        }   
    }
    Node<T>* getHead(){ return head; }
};
void myinit();
void display();
void draw_snowflake();
List<GLfloat[2]> divide_snowflake(GLfloat A[2], GLfloat B[2], int n);

GLfloat tri[3][2] = {{-1.0, -0.58}, {1.0, -0.58}, {0.0, 1.15}};
List<GLfloat[2]> snow;
int n;

int main(int argc, char **argv) {
    n = 0;
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(500,500);
    glutCreateWindow("Koch Snowflake");
    glutDisplayFunc(display);
    myinit();
    glutMainLoop();

    return EXIT_SUCCESS;
}

void myinit(){
    // Initialize OpenGL
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(-2.0, 2.0, -2.0, 2.0);
    glMatrixMode(GL_MODELVIEW);
    glClearColor(1.0, 1.0, 1.0, 1.0);
    glColor3f(0.0,0.0,0.0);

    // Initialize list of line_loop
    snow.append(tri[0]);
    snow.append(tri[1]);
    snow.append(tri[2]);
}

void display(){
    glClear(GL_COLOR_BUFFER_BIT);
    glBegin(GL_LINE_LOOP);
    draw_snowflake();
    glEnd();
    glFlush();
}

void draw_snowflake(){
    List<GLfloat[2]> temp;
    temp.append(snow.getHead()->data);
    Node<GLfloat[2]> *curr = snow.getHead();
    while(curr->next != NULL) {
        temp.appendAll(divide_snowflake(curr->data, curr->next->data, n));
        temp.append(curr->next->data);
        curr = curr->next;
    }
    temp.appendAll(divide_snowflake(curr->data, snow.getHead()->data, n));

    Node<GLfloat[2]> *ptr = temp.getHead();
    printf("\n>Drawing %f, %f", ptr->data[0], ptr->data[1]);
    glVertex2fv(ptr->data);
    while(ptr->next != NULL) {
        printf("\n>Drawing %f, %f", ptr->next->data[0], ptr->next->data[1]);
        glVertex2fv(ptr->next->data);
        ptr = ptr->next;
    }
}

List<GLfloat[2]> divide_snowflake(GLfloat A[2], GLfloat B[2], int n) {
    GLfloat A_Mid[2] = {A[0] + (B[0] - A[0]) / 3,
                        A[1] + (B[1] - A[1]) / 3};
    GLfloat Mid[2] = {A[0] + (B[0] - A[0]) / 2,
                      A[1] + (B[1] - A[1]) / 2};
    GLfloat B_Mid[2] = {B[0] - (B[0] - A[0]) / 3,
                        B[1] - (B[1] - A[1]) / 3};
    GLfloat Peak[2] = {Mid[0] + (Mid[1] - B_Mid[1]) * sqrt(3.0),
                       Mid[1] + (Mid[0] - A_Mid[0]) * sqrt(3.0)};

    List<GLfloat[2]> temp;
    if(n > 0) temp.appendAll(divide_snowflake(A, A_Mid, n-1));
    temp.append(A_Mid);
    if(n > 0) temp.appendAll(divide_snowflake(A_Mid, Peak, n-1));
    temp.append(Peak);
    if(n > 0) temp.appendAll(divide_snowflake(Peak, B_Mid, n-1));
    temp.append(B_Mid);
    if(n > 0) temp.appendAll(divide_snowflake(B_Mid, B, n-1));
    return temp;
} 
```

这是我得到的错误：

```
Error 1 error C2440: '=' : cannot convert from 'GLfloat []' to 'float [2]'  13 
```

当我刚刚初始化为 List `<GLfloat*`> 时，它只会将节点的数据设置为单个值；然而，我想要积分。出于练习目的，我想继续使用通用列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:11:39.450

让我们考虑一下如果您使用非泛型列表的代码是什么：即与`GLFloat[2]`s 一起使用的列表。这是您的节点代码：

```
class Node {
public:
    GLFloat[2] data;
    Node *next;
    Node(GLFloat[2] d) {
        next = NULL;
        data = d;
    }
}; 
```

现在要注意的一个重要想法是`Node`' 构造函数实际上并不采用数组：它采用`GLFloat*`. 这就是 C++ 在这方面的工作方式。（奇怪的是，当你让参数类型依赖于模板参数时，这也是它的工作方式：显然，[数组也被视为指针](http://ideone.com/jogmM)。）

您现在正在尝试通过`data = d;`将 a 分配`GLFloat*`给 a `GLFloat[2]`。这没有任何意义：您不能只获取一个指针并将其值放入数组中。您可以显式地 put `d[0]`into`data[0]`和`d[1]`into `data[1]`，但这不是很笼统，因为您的列表将不再适用于非数组类型。

可以做什么？好吧，一种解决方案是将您的列表专门用于数组。代码看起来像......

```
template <typename T, std::size_t N>
class Node<T[N]> {
public:
    T data;
    Node<T> *next;
    Node<T>(T d) {
        next = NULL;
        for (std::size_t i = 0; i < N; ++i)
            data[i] = d[i];
    }
}; 
```

但是，这可能会导致大量代码重复，并导致进一步的问题，例如如何返回元素。

我的建议是`std::pair<GLFloat, GLFloat>`改用。这应该适用于您的列表。或者，`std::array`如果要存储任意数量的元素，可以使用。

而且，尽管我正在评论这一切：您可能希望将`Node`类模板移动到`List`类模板中，因为它是一个实现细节。你也绝对不应该提供一个`getHead()`函数——像那样打破封装是没有意义的。为迭代提供一个`iterator`类和一对`begin()`和`end()`函数。一种可能的实现方式如下：

```
struct iterator {
    friend List;
  private:
    Node* current;
    iterator(Node* c) : current(c) {}
  public:
    iterator& operator++() {
        current = current->next;
        return *this;
    }

    friend bool operator==(iterator const& lhs, iterator const& rhs) {
        return lhs.current == rhs.current;
    }

    T& operator*() {
        return current->data;
    }

    T* operator->() {
        return &current->data;
    }
}; 
```

这将为您迄今为止所做的一切提供足够的界面，并且会更干净。不幸的是，实现一个更完整的接口需要大量的样板；此时，您可能希望切换到简单的`std::list`.

# javascript - 使用 Jquery 将 JSON API 请求的元素传递给数组

> ID：11423140
> 
> 赞同：0
> 
> 时间：2012-07-10T22:47:57.440
> 
> 标签：javascript, html, xml, arrays, json

我目前正在做一个小项目来掌握使用 API 并从中解析数据。我目前遇到了一个问题，我无法从我得到的 JSONP 结果中提取特定元素。我只需要地址就可以将字符串传递给 Google Map API，然后它将标记放置在我已经生成的地图上。

这是我的脚本示例。我是 JQuery 的新手，所以非常感谢任何帮助。请注意，第一个函数`getBByJSOn()`已经产生了我解析到页面的正确结果。它是我遇到问题的功能。

```
function getBbyJson()
    {   
        $.ajax({
            type: "GET",
            url: main_link,
            dataType: "jsonp", 
            cache: true,
            crossdomain: true,
            success: function(data){                                        

                    for (var i = 0,len = data.products.length; i<len; i++) {    
                        var name = data.products[i].name;
                        var price = data.products[i].regularPrice;
                        var sku = data.products[i].sku;
                        var desc = data.products[i].shortDescription;
                        $('<div class="name" id="item_'+i+'"></div>').html("Name:"+name).appendTo('#result-container');
                        $('<div class="sku"></div>').html("SKU:  "+sku).appendTo('#item_'+i, '#result-container');
                        $('<div class="price"></div>').html("Price:  "+price).appendTo('#item_'+i);
                        $('<div class="description"></div>').html("Desc:  "+desc).appendTo('#item_'+i);
                    }
                } 
            });
        getBbyJsonBB();
    }

    function getBbyJsonBB()
    {   
            $.ajax({
                type: "GET",
                url: link3,
                dataType: "jsonp", 
                cache: true,
                crossdomain: true,
                success: function(data){
                        for (var i = 0,len = data.products.length; i<len; i++) {    
                            var name2 = data.products[i].address;                       
                        //address[i] = data.product.stores[i].address;
                        //storeId [i]= data.stores[i].storeId;
                        $('<div class="name" id="item_'+i+'"></div>').html("Name:"+name2).appendTo('#result-container');
                        //$('<div class="sku"></div>').html("ADD: "+address[i]).appendTo('#item_'+i, '#result-container');
                        //$('<div class="price"></div>').html("Price:  "+price).appendTo('#item_'+i);
                        //$('<div class="description"></div>').html("Desc:  "+desc).appendTo('#item_'+i);
                    }
                } 
            });

    } 
```

这是我需要操作的 JSON 结果示例。

```
{
  "queryTime": "0.502",
  "currentPage": 1,
  "totalPages": 2,
  "warnings": "Your product criteria matches too many records.  That exceeds number of records that we allow on the product side of a product-store query.  We've automatically truncated the products down to the first 100\.  These results are not complete. Avoid this by narrowing the number of products in your query.",
  "partial": false,
  "from": 1,
  "total": 15,
  "to": 10,
  "products": [
    {
      "name": "AT&T GoPhone - Samsung A107 No-Contract Mobile Phone - Silver",
      "stores": [
        {
          "address": "17301 Valley Mall Road, #538",
          "name": "Best Buy Mobile - Valley Mall",
          "storeId": 2810
        },
        {
          "address": "110 Marketplace Blvd",
          "name": "Selinsgrove",
          "storeId": 1794
        },
        {
          "address": "602 Boulton St Harford Mall Annex",
          "name": "Bel Air",
          "storeId": 296
        }
      ],
      "sku": 1450113
    },
    {
      "name": "AT&T GoPhone - Samsung A157 No-Contract Mobile Phone - Black",
      "stores": [
        {
          "address": "6416 Carlisle Pike",
          "name": "Mechanicsburg",
          "storeId": 1478
        },
        {
          "address": "3537 Capital City Mall Drive, #632",
          "name": "Best Buy Mobile - Capital City Mall",
          "storeId": 2809
        },
        {
          "address": "5000 Jonestown Rd",
          "name": "Harrisburg East",
          "storeId": 547
        },
        {
          "address": "2865 Concord Rd",
          "name": "York",
          "storeId": 1087
        },
        {
          "address": "18053 Garland Groh Blvd",
          "name": "Hagerstown",
          "storeId": 1445
        },
        {
          "address": "17301 Valley Mall Road, #538",
          "name": "Best Buy Mobile - Valley Mall",
          "storeId": 2810
        },
        {
          "address": "110 Marketplace Blvd",
          "name": "Selinsgrove",
          "storeId": 1794
        },
        {
          "address": "2901 East College Ave., #603",
          "name": "Best Buy Mobile - Nittany Mall",
          "storeId": 2811
        },
        {
          "address": "1650 N Atherton St",
          "name": "State College",
          "storeId": 369
        },
        {
          "address": "276 Retail Commons Parkway",
          "name": "Martinsburg",
          "storeId": 1528
        }],
      "sku": 123456
    }]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:52:35.520

你需要一个内部循环为你的`stores`. 你是说：对于每一个`product`（外循环），给我看每一个`store`（内循环）。

**演示：http:** [//jsfiddle.net/ThinkingStiff/uNW78/](http://jsfiddle.net/ThinkingStiff/uNW78/)

### 脚本：

```
for ( var productIndex = 0, product; productIndex < data.products.length; productIndex++ ) {   
    product = data.products[productIndex];    
    for( var storeIndex = 0, store; storeIndex < product.stores.length; storeIndex++ ) {
        store = product.stores[storeIndex];
        $( '#result-container' ).append( '<div class="name" id="item_' + productIndex + '"></div>' )
            .append( 'name: ' + store.name + '<br />' )
            .append( 'storeId: ' + store.storeId + '<br />' )
            .append( 'address: ' + store.address + '<br />' );           
    };   
}; 
```

# c# - 使用隐藏的外键表和 Linq 将行添加到实体框架

> ID：11423144
> 
> 赞同：1
> 
> 时间：2012-07-10T22:48:23.807
> 
> 标签：c#, linq, entity-framework-4

我有这样的数据库表：

**表：用户用户**
ID
用户名

**表：UserToOrganization 用户 ID**
组织
ID

**表：组织**
OrganizationId
组织

我正在使用实体框架，因为该`UserToOrganization`表只是由外键组成，实体框架隐藏了这个表。我想通过将 an和 an添加到表中来将 a`User`与 an关联。但是，由于该表是隐藏的，如何使用 Linq 向数据库中的该表添加一行？`Organization``User.UserId``Organization.OrganizationId``UserToOrganization``UserToOrganization`

谢谢，

亚伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:50:33.137

一个简单的解决方案是向关系表添加一个主键。这将使其可见并允许您正常添加实体。

```
TABLE: UserToOrganization
UserToOrganizationId primary key int identity(1,1), <--- Add this
UserId
OrganizationId 
```

不要忘记通过右键单击设计器视图来更新您的 .edmx 模型 ->`Update Model from Database.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:04:17.327

您还可以考虑编写一个存储过程并通过您的`ObjectContext`. 您应该能够将过程的输入映射到`ComplexType`代表`UserToOrganization`. 然后，您可以执行以下操作：

```
using (var context = new MyObjectContext())
{
    context.AddUserToOrganization(...);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:45:02.673

好的，想通了。现在我想起来似乎很明显。

这是我在 edmx 文件中列出的 EF 表（我可能应该在我原来的问题中提供这个）。请注意，`User`有一个`Organizations`和`Organization`有一个`Users`。

**表：用户**
UserId
用户名
*导航属性*
组织

**表：组织**
OrganizationId
组织
*导航属性*
用户

以下是对隐藏的“UserToOrganization”FK 表进行插入的方法：

第 1 步：确保您的外键表的列都是主键。
第 2 步：插入。

```
public void AddUserToOrganization(Guid UserId, int OrganizationId)
{
    // Get the user and the organization that you want to join
    var user = _data.Users.First(x => x.UserId == UserId);
    var org = _data.Organizations.First(x => x.OrganizationID == OrganizationId);
    // Add the organization to the user
    user.Organizations.Add(org);
    // Save
    context.SaveChanges();
} 
```

感谢您的帮助，

亚伦

# bash - 需要帮助用 Unix 中另一个文件中的列的一部分替换文件中的特定列

> ID：11423149
> 
> 赞同：1
> 
> 时间：2012-07-10T22:48:39.063
> 
> 标签：bash, shell, unix, sed, awk

我有两个输入文件

文件1：

```
ABC:client1:project1
XYZ:client2-aa:project2
DEF:client4:proj 
```

文件2：

```
client1:W-170:xx
client2-aa:WT-04:yy
client4:L-005A:zz 
```

此外，有效值数组可以像 [W,WT] 一样硬编码

输出 ：

```
ABC:W:project1
XYZ:WT:project2 
```

所以基本上，如果file1 的column2 与file2 中任何记录的coulmn2 匹配，则将file1 中的coulmn2 替换为file2 中coulmn2 的一部分。要获得这部分，我需要使用“-”运算符拆分 file2 中的 column2，并将结果与​​数组进行匹配以确定有效值。

对于不符合上述条件的记录，它们不应显示在输出中。

我是 shell 脚本的新手，所以会很感激任何帮助。几天以来我一直在尝试，并且能够使用替换整个列

```
awk -F":" 'NR==FNR{A[$1]=$2;next}$2 in A{$2=A[$2]}1' OFS=":" file2 file1\. 
```

但是，无法使列要求的部分工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:24:43.697

你很亲密。这是`awk`您正在寻找的代码，使用该`split`函数：

```
awk '
  BEGIN { OFS=FS=":" } 
  NR==FNR { split ($2,one,"-"); two[$1] = one[1]; next } 
  $2 in two { $2 = two[$2]; print }
' file2 file1 
```

输出：

```
ABC:W:project1
XYZ:WT:project2
DEF:L:proj 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:25:44.927

这可能对您有用（GNU sed）：

```
sed 's/^\([^:]*:\)\([^-]*\).*/s|:\1|:\2:|p/' file2 | sed -nf - file1 
```

解释：

*   `sed 's/^\([^:]*:\)\([^-]*\).*/s|:\1|:\2:|p/' file2`制作一个执行替换的 sed 脚本。
*   `sed -nf - file1`将其通过管道传输到另一个`sed`实例并针对预期文件运行

注意我不明白`"Also, array of valid values can be hardcoded like [W,WT]"`，所以这可能不完全适合您的需求。

# javascript - 在页面刷新时恢复下拉选择的选项？

> ID：11423155
> 
> 赞同：0
> 
> 时间：2012-07-10T22:49:24.607
> 
> 标签：javascript, jquery, html

我有这样的表格，

```
<html>
<body>
<form>
<select name="alphabets" id="alphabets">
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D" selected="selected">D</option>
</select>
</form>
</body>
</html> 
```

当我第一次拉页面时，选择了选项 D。如果我从下拉列表中选择选项 A，然后进行页面刷新，我希望下拉选项返回 D。在页面刷新时，我希望所有内容都恢复到初始状态。但下拉菜单显示选项 A，或之前选择的任何内容。

知道如何在页面刷新时使页面显示选项 D 吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:01:16.380

将以下内容放在页面上的脚本标记中。

```
 $(function(){
      $('#alphabets option[value="D"]').attr('selected', true);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:06:00.137

```
$(document).ready(function() {
    $("#alphabets").val(localStorage.alphabets);
});

$("#alphabets").change(function() {
    localStorage.alphabets = $(this).val();
}); 
```

我认为这会起作用（仅在支持[localStorage](https://developer.mozilla.org/en/DOM/Storage)的浏览器中），但我还没有测试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-25T09:25:09.863

这是 Firefox 记住选择列表上的选择的“功能”。

添加`autocomplete="off"`到`<select>`标签。

# php - 在 sql 查询中使用下拉列表中的变量

> ID：11423160
> 
> 赞同：0
> 
> 时间：2012-07-10T22:49:51.723
> 
> 标签：php, sql

我有一个下拉菜单，我想在查询中使用选择。

假设我有以下内容，这实际上是从我网站上的数据库加载的，但为了限制我发布的代码量：

```
<select id="parent" name="parent">
<option value="P1">parent 1</option>
<option value="P2">parent 2</option>
</select> 
```

我想根据选择的内容查询 P1 或 P2 的子表，因此我有以下查询：

```
$selected_parent=$_REQUEST['parent'];<-- Not sure if this is right at all

$query = "SELECT parent.*, child.* 
          FROM parent 
          INNER JOIN child 
          ON parent.value = child.parent
          WHEN parent.value = '$selected_parent'"; 
```

我将有以下两个表格：

```
PARENT                 CHILD
ID   NAME     VALUE    ID    NAME    PARENT
01---parent1--P1       01----child1--P1
02---parent2--P2       02----child2--P1
03---parent3--P2       03----child3--P2 
```

我知道这对 SQL 注入开放，我稍后会修复它，对变量在查询中的工作方式更加好奇

编辑：目前我在使用“$selected_pa​​rent”时没有得到任何结果。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:01:03.800

`WHEN`在您的查询中不是有效的语法。使用`WHERE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:01:04.500

您似乎将 parent.value 设置为字符串常量 '$selected_pa​​rent' 而不是 $selected_pa​​rent 的值。

我不知道php，但我原以为你需要写

```
WHEN parent.value = '" + $selected_parent + "'"; 
```

（对不起，如果我把连接运算符弄错了。我只使用 C#。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T23:01:12.760

您非常接近，我能看到的唯一更改是将下拉框包装在表单标签中，例如：

```
<form action="<?php echo $_SERVER['php_self']; ?>" method="POST">
    <select id="parent" name="parent">
        <option value="P1">parent 1</option>
        <option value="P2">parent 2</option>
    </select>
</form> 
```

然后当您获取变量时，使用 $_POST 而不是 $_REQUEST：

```
$selected_parent=$_POST['parent']; 
```

除此之外，您的查询应该可以正常工作。

# download - 不想让用户下载 JRE

> ID：11423161
> 
> 赞同：0
> 
> 时间：2012-07-10T21:17:16.730
> 
> 标签：download, java, qt

我的问题类似于 2010 年在这个论坛上提出的问题——“Windows 和 Linux 中是否安装了 JRE？”。我想知道从那以后情况是否发生了变化

特别是，我的站点托管了一个可下载的 Java 应用程序，它基本上将特定文件从用户的 PC 传输到我们的服务器。但是我时不时地发现我的一些用户——都是非技术人员——没有安装 JRE。因此，我必须让他们先安装 JRE。

要求用户在开始使用我的应用程序之前下载一些东西只会破坏最终用户体验。可以理解，这是一个禁忌。因此，我准备重新实现该应用程序。但在我提议用其他技术（如 Qt）重新实现应用程序之前，我需要事实来证明这一点。特别想知道

1.  假设任何具有 XP 或更高版本操作系统的 PC 上都安装了 JRE 是否安全？
2.  Qt 是制作“立即下载”类型的应用程序的可行且更可取的选择吗？Qt 应用程序也不需要 JRE 等价物吗？
3.  Qt 应用程序是否能够像 Java 应用程序一样自我更新？
4.  除了必须维护/编译 Qt 的多个版本之外，使用 Qt 还有其他缺点吗？

感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:38:36.397

不，假设每台机器都安装了 JRE 仍然不安全，尽管[从 Java 网站](http://www.java.com/en/)为每台机器安装 JRE 很容易。默认情况下，Java 没有安装在任何 Windows 计算机上，但我相信它默认安装在许多 Linux 发行版中。

Qt 是用于其他编程语言的 GUI 前端系统。我知道 C、Python 和现在的 Java 的 Qt 实现。如果您打算使用 Java Qt，那么您将需要使用 JRE 来运行它，这不是一种绕过 Java 限制的方法，而是一种使应用程序看起来一致的方法，即使它们是用不同的语言编写的。

在更新方面，Java Qt 应用程序将具有与普通 Java 应用程序相同的能力。

# ios - 在视图已经可见时更改 uitabbar 图标

> ID：11423163
> 
> 赞同：1
> 
> 时间：2012-07-10T22:50:07.597
> 
> 标签：ios, uiview, uiviewcontroller, uitabbar

我想知道是否或如何根据主视图上当前可见的子视图更改我的标签栏图标。

基本上我创建了这个菜单，允许用户更改主（子视图）我想要发生的是检查哪个主（suveiew）当前可见，然后根据哪个可见我想相应地更改标签栏图标，但是我不确定我怎么可能做到这一点。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:59:32.630

如果您通过将一个视图控制器附加到每个选项卡来执行此操作，那么在视图控制器代码的任何位置，您都可以使用以下代码更改选项卡的名称：

```
self.title = @"New tab name"; 
```

或者，您可以更改整个标签栏项目，这也可以让您更改图标：

```
self.tabBarItem = [[UITabBarItem alloc]
    initWithTitle:@"New tab name"
    image:[UIImage imageNamed:@"new_tab_image.png"]
    tag:YOUR_TAG
]; 
```

# jquery - 移动具有不可见内容的元素

> ID：11423164
> 
> 赞同：0
> 
> 时间：2012-07-10T22:50:07.970
> 
> 标签：jquery, html, dom, dom-manipulation

我有一个加载内容的页面。我`.clone()`确定了某些元素，然后隐藏原始元素，然后将克隆的元素附加到 dom。特别是有一个元素连接到 CMS 字段，用户可以在其中添加脚本和内容。即使其中没​​有任何内容，该字段也会显示。

![带有不可见子项的 div](../Images/7a61f3e48096bd91449bb85fd51785e2.png)

这个盒子可以由无数的html节点组成，主要是五组。

1.  评论`<!-- -->`
2.  脚本标签`<script></scripts>`
3.  用于分析跟踪的图像`zferral`通常包含`display:none`
4.  文本`plain text`（不包含在 html 中）
5.  html`<b>hello</b>`

如果它有纯文本或 html（不是`display:none`），我想显示这个框。

重申一下，我移动了这个框，所以我不想`bool`说我是否应该用 javascript 把它放进去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:18:57.447

您可以在放置所有内容的盒子内放置一个包装器 div（具有 0 个填充、0 个边距、无边框、溢出隐藏、自动宽度、自动高度）。然后只需使用 jquery 来计算该框的尺寸。如果它的尺寸为零。它不包含可见元素。唯一不起作用的情况是内容是具有绝对/固定位置的 html 元素。

# java - 如何从 Jira 插件 Webwork 操作模板中获取问题 ID？

> ID：11423167
> 
> 赞同：2
> 
> 时间：2012-07-10T22:50:28.037
> 
> 标签：java, jira-plugin

我正在编写一个 Jira 5 插件。我有一个映射到速度模板的网络操作。该动作是由一个网页生成的链接触发的。我的问题是：如何将问题键/ID 插入到我的模板中？我试过：

$问题，$问题.id

我试图扩展`AbstractIssueSelectAction`，但它`getIssueObject()`抛出异常，说问题 id/key 未设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:38:04.097

调用操作的链接（例如“SampleAction”）必须如下所示： [http://something.com/app/context/SampleAction.jspa?id=](http://something.com/app/context/SampleAction.jspa?id=) ${issue.id} 就像捆绑的 JIRA 操作一样.

假设您正在扩展 AbstractIssueSelectAction，如果您想重新提交此 ID，您只需在结果页面中使用 ${action.id}。

# ios - 将子视图添加到视图的逻辑检查 - iOS

> ID：11423170
> 
> 赞同：0
> 
> 时间：2012-07-10T22:50:48.543
> 
> 标签：ios, xcode, storyboard, subview

如果我使用情节提要（VC1 和 VC2）创建两个不同的视图控制器，然后以编程方式将 VC2 作为子视图添加到 VC1，它会起作用吗？此 VC2 具有使用情节提要管理的要访问的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:56:33.353

使用协议在 VC1 控制器中定义委托方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:16:53.580

是的，您可以将 UIViewController 视图作为子视图/模态置于另一个 UIViewController 视图之上，例如子视图/模态应该是透明的，并且您需要设置委托以在两个视图之间传递值。您可能会看到如何在另一个 UIViewController 视图顶部添加 UIViewController 视图的示例：[Display clearColor UIViewController over UIViewController](https://stackoverflow.com/questions/11236367/display-clearcolor-uiviewcontroller-over-uiviewcontroller)

# c++ - 调用头文件中声明的函数

> ID：11423174
> 
> 赞同：0
> 
> 时间：2012-07-10T22:51:05.237
> 
> 标签：c++, c, visual-studio-2008, visual-c++

我有 xh 文件和 yh 文件，zc 文件。zc 包含 yh 和 yh 包含 xh 我有一个函数需要在 xh 中声明并在 zc 中定义，因为它需要使用 yh 中的一些其他函数

我试过这样

```
// x.h
int foo();

// y.h
#include "x.h"

// z.c
#include"y.h"
int foo() {
   blah;
   blah;
   return 1;
} 
```

这一切都在一个项目中让我们在 x_y.dll 中说，它编译得很好，我有 x_y.dll，x_y.lib

现在在一个 ac 文件中的其他项目 a_b 中，我试图包含 xh 并调用 foo(); 编译得很好，但我遇到链接器错误 lnk2019 和 lnk1120 未解析的外部符号

我正在使用 VS2008，我将路径设置为 x_y.lib 所在的文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:50:48.840

像这样创建一个宏：

```
#ifndef DLL_IFACE
#ifdef DLL_IFACE_EXPORT
#define DLL_IFACE _declspec( dllexport )
#else  // !DLL_IFACE_EXPORT
#define DLL_IFACE _declspec( dllimport )
#endif // !DLL_IFACE_EXPORT
#endif // !DLL_IFACE 
```

并将其放在每个人都包含的一些标题中。然后在 xh 中：

```
DLL_IFACE int foo(); 
```

然后在 zc 中，使用以下命令启动该文件：

```
#define DLL_IFACE_EXPORT 
```

当您构建定义函数的 dll 时，这将导致函数被声明为“_declspec(dllexport)”。并且会导致该函数在其他 dll 中被声明为“_declspec(dllimport)”。

dllexport 告诉编译器给定的函数应该是 dll 的公共接口的一部分。它将函数放在 dll 的动态符号表中。dllimport 告诉编译器稍后将通过动态链接导入该函数。

# iphone - IOS/iPhone - 按钮启动相机或语音备忘录

> ID：11423176
> 
> 赞同：-6
> 
> 时间：2012-07-10T22:51:23.580
> 
> 标签：iphone, ios, video, voice

当我单击关闭我的应用程序并启动相机或语音备忘录应用程序的按钮时，我只需要一个代码。

两者的代码都会有所帮助。

我使用的代码：

```
NSString *stringURL = @"videos:";
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:01:56.937

无法启动 Camera.app，部分原因是它没有 URL 方案，整体而言是因为 Apple 希望您实现自己的摄像头，并且这样做非常容易。查看[UIImagePickerController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)文档了解更多信息。

也无法启动 Voice Memos.app，因为它没有已知的 URL 方案。

# javascript - 未定义函数？？？从 JavaScript 访问 SharePoint 时？

> ID：11423186
> 
> 赞同：1
> 
> 时间：2012-07-10T22:52:53.960
> 
> 标签：javascript, sharepoint

我使用 js 在 Sharepoint 中检索一个列表。代码如下：

```
ExecuteOrDelayUntilScriptLoaded(getInnerHTML, "sp.js");

function getInnerHTML(){
    var ctx = new SP.ClientContext.get_current();
    this.site = ctx.get_site(); 
    this.web = ctx.get_web();
    ctx.load(this.web); 
    ctx.executeQueryAsync(Function.createDelegate(this, this.onSuccess), Function.createDelegate(this, this.onFail)); 
} 
```

但它报告： getInnerHTML() 未定义

什么？？？我在头脑中定义并声明了它，我该怎么办！？！？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:05:58.803

您应该在使用它之前声明该函数。

```
function getInnerHTML(){
    // ...
}

ExecuteOrDelayUntilScriptLoaded(getInnerHTML, "sp.js"); 
```

# grails - 假人的 Grails 安装

> ID：11423188
> 
> 赞同：1
> 
> 时间：2012-07-10T22:53:12.590
> 
> 标签：grails, intellij-idea, java-7

我正在尝试安装 grails 并使其与 IntelliJ 一起使用，但是出现了问题。我遇到了各种异常（在 IntelliJ 中安装 grails 或编译 grails 项目时）。

我正在为 IntelliJ 下的 grails 寻找一个干净的安装指南。如果可能，我想使用以下 sdks：

1.  JDK 1.7 (05)
2.  圣杯 2.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T00:07:10.713

由于[IDEA-86261](http://youtrack.jetbrains.com/issue/IDEA-86261)，您需要[IDEA 11.1.3](http://confluence.jetbrains.net/display/IDEADEV/IDEA+11.1+EAP)或更高版本才能使用 Grails 2.1。

安装非常简单，只需解压`grails-2.1.0.zip`某个目录并在项目设置向导要求您在 IntelliJ IDEA 中创建 Grails SDK 时指定此目录。

如果您有任何问题，请使用更多详细信息（您执行的步骤、错误、日志、堆栈跟踪等）更新问题。

# xslt - 在具有多个谓词的模板中确定 position() 的上下文

> ID：11423190
> 
> 赞同：5
> 
> 时间：2012-07-10T22:53:23.200
> 
> 标签：xslt, xslt-2.0, predicate

我在确定节点集的正确上下文时遇到了一些麻烦。我有一个看起来有点像这样的模板匹配（使用 XSL 2.0）：

```
<xsl:template match="//chapter/body/*[matches(name(), '^toc')][crossref][not(crossref/@idref='cip' or crossref/@idref='copy')]">
  <xsl:variable name="curr_id" select="crossref/@idref"/>
  <xsl:element name="location">
    <xsl:attribute name="id"><xsl:value-of select="$curr_id"/></xsl:attribute>
    <xsl:attribute name="order"><xsl:value-of select="position()"/></xsl:attribute>
    <xsl:element name="label">
        <text><xsl:value-of select="."/></text>
    </xsl:element>
  </xsl:element>
</xsl:template> 
```

XML 看起来有点像这样：

```
<chapter id="toc">
  <body>
    <title>Contents</title>
    <tocfm><crossref idref="cip">Catalog</crossref></tocfm>
    <tocfm><crossref idref="copy">Copyright</crossref></tocfm>
    <tocfm><crossref idref="ded">Dedication</crossref></tocfm>
    <toc><crossref idref="prologue">Prologue</crossref></toc>
    <toc><crossref idref="pt1">Book One</crossref></toc>
    <toc><crossref idref="pt2">Book Two</crossref></toc>
    <toc><crossref idref="pt3">Book Three</crossref></toc>
  </body>
</chapter> 
```

我的期望是谓词将生成一个节点集，其中包含：

```
<tocfm><crossref idref="ded">Dedication</crossref></tocfm>
<toc><crossref idref="prologue">Prologue</crossref></toc>
<toc><crossref idref="pt1">Book One</crossref></toc>
<toc><crossref idref="pt2">Book Two</crossref></toc>
<toc><crossref idref="pt3">Book Three</crossref></toc> 
```

换句话说，所有包含交叉引用的类 toc 元素，其 idref 不是 cip 或副本。模板在输出方面执行此操作，但位置函数似乎不适用于该节点集。相反，它会为奉献生成一个“3”的位置。但是，如果我输出通过使用 [1] 的谓词找到的节点的值，我会得到 Deedication 作为该值。所以，我对正在从事的工作感到困惑。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T01:37:55.480

您的期望是错误的，因为它基于对如何定义上下文序列的常见误解。上下文序列**不是**由模板匹配模式决定的，而是由模板之外的东西决定的。

在某些时候 xsl:apply-templates 会被一个 select 表达式调用。评估此表达式以生成项目序列。当前的上下文序列被推入堆栈。该项目序列成为上下文序列。上下文序列按序列顺序迭代。在每个项目被访问时，该项目成为上下文项目，并且 position() 函数反映了上下文项目在上下文序列中的位置。此时根据匹配表达式和优先级找到合适的模板。匹配表达式不返回序列。它们只是对上下文项的布尔测试 - 上下文项与模板规则匹配或不匹配。如果匹配且优先级最高，则进入模板序列构造函数。此时上下文序列，context item 和 position() 都由客户端 xsl:apply-templates 定义，而不是由匹配条件定义。退出序列构造函数后，控制权返回给客户端 xsl:apply-templates。它将增加 position() 编号，更新上下文项，并再次找到适当的模板。这可能是与前一项相同的模板或不同的模板。

## 插图

此样式表说明了确定上下文序列和 position() 的是**客户端指令**（应用模板、for-each 等），**而不是**模板匹配模式。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <t>
   <note message ="apply-templates on EVEN items">
    <xsl:apply-templates select="*/item[ (@id mod 2) = 0]"/>
   </note>  
   <note message ="apply-templates on ODD items">
    <xsl:apply-templates select="*/item[ (@id mod 2) = 1]">
     <xsl:sort select="position()" data-type="number" order="descending"/>
    </xsl:apply-templates>
   </note>  
 </t>
</xsl:template>

<xsl:template match="item[@colour='blue']">
 <note message='Brought to you by the Blue template!' positon="{position()}"> 
  <xsl:copy-of select='self::*'/>
  </note>  
</xsl:template>

<xsl:template match="item[@colour='red']">
 <note message='Brought to you by the Red template!' positon="{position()}"> 
  <xsl:copy-of select='self::*'/>
  </note>  
</xsl:template>

</xsl:stylesheet> 
```

...应用于本文件...

```
<t>
 <item id="1" colour="blue" /> 
 <item id="2" colour="blue" /> 
 <item id="3" colour="blue" /> 
 <item id="4" colour="red" /> 
 <item id="5" colour="red" /> 
 <item id="6" colour="red" /> 
</t> 
```

...产生这个输出...

```
<t>
  <note message="apply-templates on EVEN items">
    <note message="Brought to you by the Blue template!" positon="1">
      <item id="2" colour="blue" />
    </note>
    <note message="Brought to you by the Red template!" positon="2">
      <item id="4" colour="red" />
    </note>
    <note message="Brought to you by the Red template!" positon="3">
      <item id="6" colour="red" />
    </note>
  </note>
  <note message="apply-templates on ODD items">
    <note message="Brought to you by the Red template!" positon="1">
      <item id="5" colour="red" />
    </note>
    <note message="Brought to you by the Blue template!" positon="2">
      <item id="3" colour="blue" />
    </note>
    <note message="Brought to you by the Blue template!" positon="3">
      <item id="1" colour="blue" />
    </note>
  </note>
</t> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T01:38:10.233

`position()`指[上下文位置](http://www.w3.org/TR/xslt20/#dt-context-position)。从 XSLT 2.0 规范：

> 上下文位置是上下文项在当前正在处理的项目序列中的位置。每当上下文项更改时，它都会更改。当使用`xsl:apply-templates`or等​​指令`xsl:for-each`处理一系列项目时，序列中的第一项以上下文位置 1 处理，第二项以上下文位置 2 处理，依此类推。] 返回上下文位置通过 XPath 表达式`position()`。

理解的关键是它`xsl:template`不会改变上下文项。它可能正在被`xsl:apply-templates`或改变`xsl:for-each`。例如，考虑以下代码：

```
<xsl:apply-templates select="tocfm|toc"/> 
```

当它开始处理`Dedication`节点时，该节点将成为上下文项，上下文位置成为该节点在输入序列中的位置（所有`tocfm`和`toc`元素的并集）。这或类似的东西可能是你的 3 的来源。

正如[`apply-templates`规范的一部分](http://www.w3.org/TR/xslt20/#element-apply-templates)所说：

> 该`xsl:apply-templates`指令将一系列节点（通常是源树中的节点）作为输入 […] 如果指令有一个或多个子节点`xsl:sort`，则输入序列按照 13 排序中的描述进行排序。这种排序的结果在下面称为排序序列；如果没有`xsl:sort`元素，则排序后的序列与输入序列相同。[…] 输入序列中的每个节点都通过查找与该节点的模式匹配的模板规则来处理。[…] 匹配排序序列中第 N 个节点的规则以该节点作为上下文项，N 作为上下文位置，排序序列的长度作为上下文大小进行评估。

您可能会发现此[FAQ 条目很有用（尽管它根据 XSLT 1.0 的`position()`](http://dpawson.co.uk/xsl/sect2/N6099.html#d8492e266)[当前节点列表](http://www.w3.org/TR/xslt/#dt-current-node-list)概念解释了该问题，而 XSLT 2.0 中未使用该概念）。

# requirejs - 为什么 RequireJS define() 这个简单的测试不起作用？

> ID：11423198
> 
> 赞同：0
> 
> 时间：2012-07-10T22:54:09.727
> 
> 标签：requirejs

我跑：

```
define(
  function() {
    console.log('test');
    return null;
  }
); 
```

没有部门意味着它应该排队并执行回调，我必须`test`在控制台中查看。但不，我没有。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:05:25.093

在您的脚本标记中设置一个引用您的 js 文件的属性。

```
<script data-main="yourjsfile.js" src="require.js"></script> 
```

# openmpi - 集群上的 openMPI 命令

> ID：11423199
> 
> 赞同：1
> 
> 时间：2012-07-10T22:54:26.270
> 
> 标签：openmpi

我在一个集群上使用 openMPI-1.6，它有 8 个节点，每个节点有 8 个核心。我正在使用这个命令来运行我的应用程序。

```
/path/to/mpirun --mca btl self,sm,tcp --hostfile $PBS_NODEFILE -np $num_core /path/to/application 
```

我进行了实验并获得了以下数据。

```
num node | num core per node | total core | exe time of application |
    1              2                2                8.5 sec
    1              4                4                5.3 sec
    1              8                8                7.1 sec

    2              1                2                11 sec
    2              2                4                9.5 sec
    2              4                8                44 sec //this is too slow 
```

如您所见，最后一行（2 个节点，8 个内核）的执行时间比其他行慢。我假设使用多个节点会产生开销，但我没想到会出现这种指数级下降。

所以，我的问题是，在使用多个节点的集群上运行作业时是否缺少任何 openMPI 性能参数？我假设`mca btl self,sm,tcp`参数自动使用共享内存选项进行节点内部的通信，并将使用“tcp”选项发送到节点外部的通信。我理解正确吗？

我知道在不了解应用程序的情况下很难分辨，但我要求进行一般参数调整，它应该独立于应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:04:31.947

1.  Open MPI 非常擅长根据网络和节点拓扑猜测正确的 BTL 列表，因此通常您不需要明确指定它。
2.  您指定 Torque/PBS 创建的 hosts 文件的路径。如果相应地编译，Open MPI 支持与 Torque/PBS 的紧密集成（通过`tm`模块），并且不需要指定主机文件或 MPI 进程的数量。

鉴于您的代码似乎无法扩展到超过 4 个 MPI 进程。它在一台机器上运行 8 个进程比使用 4 个进程要慢。这可能是由于内存带宽饱和或由于高通信计算比（通常意味着您的问题规模太小）。如果不显示更多代码，很难判断哪个是罪魁祸首，但我可以大胆猜测它是后者。TCP 具有非常高的延迟，尤其是在与以太网等慢速网络结合使用时。

随着时间的推移，人们会根据算法的结构学会在某些类型的网络上预测这种不良行为，但是我建议您使用一些 MPI 分析或跟踪工具来调查程序的行为。有关此类工具的列表，请参阅[此问题。](https://stackoverflow.com/questions/10607750/tools-to-measure-mpi-communication-costs)

# html - 两列 div 布局填充父 div 的整个高度

> ID：11423200
> 
> 赞同：-1
> 
> 时间：2012-07-10T22:54:26.263
> 
> 标签：html, css

好的，我相信这很常见，但我似乎无法在任何地方找到答案。基本上我想要一个两列 div 布局，左列是流动的，右列是固定的。我希望这两列的高度填充父容器 div。

目前，我的右 div 没有填充 100% 的高度，我不知道出了什么问题？

HTML div 是：

```
<div id="nmv_div_twoColumnLayoutContainer">

    <div id="nmv_div_twoColumnLeftContainer">
        <div id="nmv_div_twoColumnLeft">
            <p>the left div is good height</p>
            <p>As this is the div that will typically have the most data</p>
        </div>        
    </div>    
    <div id="nmv_div_twoColumnRightContainer" class="roundedCorners">
        <div id="nmv_div_twoColumnRight">
            the right div is a menu div but is only showing part            
        </div>        
    </div>
    <div class="clearBoth"></div>
</div> 
```

和我相关的 css

```
.roundedCorners {
    -moz-border-radius: 2px;
    border-radius: 2px;
}

.clearBoth {
    clear: both;
}

div#nmv_div_twoColumnLayoutContainer 
{
    overflow: hidden;
}

div#nmv_div_twoColumnRightContainer 
{
    float: right;   
    margin-left: -250px;
    width: 250px;
    background-color: gold;
}

div#nmv_div_twoColumnLeftContainer 
{
    float: left;    
    width: 100%;
    background-color: red;
}

div#nmv_div_twoColumnLeft 
{
    margin: 0 260px 0 0;    
    height: 100%;
    background-color: yellow;
}

div#nmv_div_twoColumnRight 
{    
    width: 250px;
    background-color: green;     
    height: 100%;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:09:16.000

一个快速的[谷歌搜索](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8#hl=en&output=search&sclient=psy-ab&q=css%20tricks%20for%20two%20column%20layouts&oq=&gs_l=&pbx=1&fp=d7a50cc02f3c90da&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&biw=1366&bih=611)给了我以下链接。这些方法对于做你想做的事情很常见。

[http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

[http://www.vanseodesign.com/css/equal-height-columns/](http://www.vanseodesign.com/css/equal-height-columns/)

[http://woorkup.com/2009/10/11/really-simple-css-trick-for-equal-height-columns/](http://woorkup.com/2009/10/11/really-simple-css-trick-for-equal-height-columns/)

[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

您的代码不起作用的基本原因是元素的高度计算方式与您预期的不同（它与宽度不同）。[这篇文章](http://webdesign.about.com/od/csstutorials/f/set-css-height-100-percent.htm)很好地解释了它是如何计算的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:42:04.730

如果菜单中的内容是静态的，并且您可以依靠它保持相同的高度，则可以将`min-height`内容 div 上的 a 设置为菜单的高度，并绝对定位菜单。给容器一些正确的填充，这样内容就不会与菜单重叠。

```
.container {
    padding-right: 260px;
    position: relative;
}
.content {
    min-height: 100px;
}
.menu {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 250px;
} 
```

[http://jsfiddle.net/gilly3/Q5CRr/](http://jsfiddle.net/gilly3/Q5CRr/)

# google-maps-api-3 - 谷歌地图-> 将标记设置为可拖动，我想稍后通过客户端逻辑阻止它被拖动？

> ID：11423208
> 
> 赞同：5
> 
> 时间：2012-07-10T22:55:19.933
> 
> 标签：google-maps-api-3, google-maps-markers

所以，我知道如何在地图上绘制标记。

我有一个事件，一旦该事件发生在客户端，我需要阻止标记从该点开始可拖动。

我想它可能就这么简单。：

```
marker.setDraggable = false; 
```

从我可以看到这不起作用，我看到它有 setIcon 和其他几种方法，但没有看到我如何停止可拖动。

非常感谢任何建议/建议。我已经看了很长时间了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T23:00:51.530

标记有一个`setDraggable`方法，所以你想要`marker.setDraggable(false);`

[https://developers.google.com/maps/documentation/javascript/reference#Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)

# sql-server-2008 - 如何从 dotnetnuke 中的另一个数据库获取数据？

> ID：11423209
> 
> 赞同：1
> 
> 时间：2012-07-10T22:55:39.570
> 
> 标签：sql-server-2008, visual-studio-2008, dotnetnuke, dotnetnuke-module

我刚刚开始为 dotnetnuke 开发模块（仅 2 周前），

我已经在 XP 上完美安装了 DotNetNuke 6.2，我正在使用 VS2008 和 SQL SERVER 2008 express edition。

我有一个名为“dnn”的数据库，用于框架 DNN 的表。

但是现在我想从另一个名为 Sales 的数据库（例如）获取数据，该数据库位于 SQL Server 2008 的同一实例中。我真的不知道如何从我的自定义用户控件 .aspx 连接到这个数据库。我试图将正常代码用于连接数据库。我确实生成了连接字符串，我确实生成了连接，并从 ac# 类进行查询，但这不起作用。

昨天我从 dotnetnuke 找到了一个数据访问文档——但我不明白如何在我的自定义模块中实现新连接）。所以我的问题是，我怎样才能连接到这个销售数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:16:39.783

如果您不打算出售您的模块，这似乎不太可能，因为您计划连接到 dnn 之外的数据库。

我只会使用.net

如果您还没有 System.Configuration，请将其添加到您的参考中。

然后：

```
System.Configuration.ConfigurationManager.ConnectionStrings["MyConnectionstring"] 
```

在您的网络配置中，将新的连接字符串添加到您的连接字符串部分

```
 <connectionStrings>
    <add name="MyConnectionstring" connectionString="blah" />
 </connectionStrings> 
```

要记住的一件事是，DNN 只是一个围绕 asp.net 的框架，因此您可以使用所有 .net 数据访问工具。

使用上面的示例，我可以编写如下简单的内容：

```
string connectionstr = System.Configuration.ConfigurationManager.ConnectionStrings["MyConnectionstring"]

using (SqlConnection conn = new SqlConnection(connectionstr ))
{
  // I am using the SqlHelper class here its part of DNN
  sqlstr = "Select * From SomeTable"
  using(SqlReader reader = SqlHelper.ExecuteReader(conn, sqlstr))
  {
    while(reader.read())
    {
     /// read into object or what ever
    }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:36:10.560

我注意到其他回复的评论，并认为我会在这里添加一些。

一旦您要连接到另一个数据库，您就超出了标准 DotNetNuke 配置过程的范围。我认为您可以创建自定义数据提供程序/SqlDataProvider 设置，但很可能不是那么简单。

在 DNN 范围之外工作时，我直接使用 SqlHelper 自己处理数据访问，并使用 CBO 来帮助数据水合，但不使用该外部数据库的 DataProvider 模型。

# android - SurfaceView 的访问布局（SurfaceView 的按钮）

> ID：11423212
> 
> 赞同：1
> 
> 时间：2012-07-10T22:55:52.877
> 
> 标签：android, layout, button, surfaceview

看来我只是无法理解 SurfaceView 和布局应该如何关联。我想做的是一个基本的游戏界面。My Main Activity 是标题屏幕，带有一个菜单和一个按钮，用于启动一个新的 Activity，它是主游戏屏幕，并使用扩展的 SurfaceView 来加载关卡并根据用户输入显示一些在屏幕上移动的图片。到目前为止一切顺利，现在我想在 SurfaceView 上放置一些特殊按钮（例如“结束游戏”）。我能够以编程方式添加按钮，但我不知道如何将它与我的布局相关联。所以，这是有效的：

```
public class LevelActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //remove title bar
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    //Remove notification bar
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    //Prepare Game Class

    LevelView mLevel = new LevelView(this);

    FrameLayout mGame = new FrameLayout(this);
    LinearLayout mGameWidgets = new LinearLayout (this);

    Button EndGameButton = new Button(this);
    mGameWidgets.addView(EndGameButton);       

    mGame.addView(mLevel);
    mGame.addView(mGameWidgets);
    //Prepare moving commands

    EndGameButton.setWidth(300);
    EndGameButton.setText("End Game");

    setContentView(mGame);

}
} 
```

但是我不能应用这个（或类似的东西）： Button EndGameButton = (Button) mLevel.findViewById(R.id.end_game_button);

我不确定问题出在代码中还是在我的 xml 布局文件中，因此我很难弄清楚如何解决这个问题。

谢谢，亲切的问候。

# r - 创建两个因素之间相互作用的数据框

> ID：11423214
> 
> 赞同：2
> 
> 时间：2012-07-10T22:56:00.600
> 
> 标签：r

我有两个 2x2 数据框。每个数据框中的每一列都是一个因素。

我想创建一个 2x8 数据框，其中包含每个因素和因素之间的相互作用。

这是一个例子：

```
df1 <- data.frame(V1 = factor(c('a', 'b')), V2 = factor(c('c', 'd')))
df2 <- data.frame(V3 = factor(c('e', 'f')), V4 = factor(c('g', 'h')))
df.combined <- combine(df1, df2) 
```

`df.combined`会在哪里

```
V1 V2 V3 V4 V1:V3 V1:V4 V2:V3 V2:V4
 a  c  e  g   a:e   a:g   c:e   c:g
 b  c  f  h   b:f   b:h   d:f   d:h 
```

（我不想要 V1:V2 或 V3:V4 交互。不需要这些交互只是我面临的问题的本质。）

有没有一种简洁的方法可以进入`df.combined`R？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:44:46.653

我不使用它，这符合您对“简洁”的定义。

```
dfc <- cbind(df1,df2)
dfc2<- cbind( dfc, `V1:V3`=interaction(dfc$V1, dfc$V3, sep=":"), 
                   `V1:V4`=interaction(dfc$V1,dfc$V4, sep=":") )
df.combined <- cbind( dfc2, `V2:V3`=interaction(dfc$V2, dfc$V3, sep=":"), 
                            `V2:V4`=interaction(dfc$V2,dfc$V4, sep=":") )
> df.combined
  V1 V2 V3 V4 V1:V3 V1:V4 V2:V3 V2:V4
1  a  c  e  g   a:e   a:g   c:e   c:g
2  b  d  f  h   b:f   b:h   d:f   d:h 
```

（通常不建议在变量名中使用冒号。它们总是需要被引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:32:13.653

这是一种解决方案。也许不是非常优雅或简洁，但可能很有用......

```
dat <- data.frame(V1=c("a", "b"),
                  V2=c("c", "d"),
                  V3=c("e", "f"), 
                  V4=c("g", "h"))

factor_pairs <- expand.grid(c("V1", "V2"), 
                            c("V3", "V4"),
                            stringsAsFactors=FALSE)

for (i in 1:nrow(factor_pairs)) {
    factor_1 <- factor_pairs[i, 1]
    factor_2 <- factor_pairs[i, 2]
    new_col_name <- paste(factor_1, factor_2, sep=":")
    dat[[new_col_name]] <- paste(dat[[factor_1]], dat[[factor_2]], sep=":")
}

dat
#   V1 V2 V3 V4 V1:V3 V2:V3 V1:V4 V2:V4
# 1  a  c  e  g   a:e   c:e   a:g   c:g
# 2  b  d  f  h   b:f   d:f   b:h   d:h 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:17:28.923

如果名称中的冒号不是必需的，则只需一行代码即可处理绑定两个数据框的列并创建交互。使用您的两个数据框：

```
df.combined <- with(c(df1, df2), data.frame(df1, df2, V1:V3, V1:V4, V2:V3, V2:V4)) 
```

这使

```
 V1 V2 V3 V4 V1.V3 V1.V4 V2.V3 V2.V4
1  a  c  e  g   a:e   a:g   c:e   c:g
2  b  d  f  h   b:f   b:h   d:f   d:h 
```

如果您需要名称中的冒号，另一个 oneliner 会将句点更改为冒号：

```
colnames(df.combined) <- gsub("\\.", ":", colnames(df.combined)) 
```

留下最后的结果

```
 V1 V2 V3 V4 V1:V3 V1:V4 V2:V3 V2:V4
1  a  c  e  g   a:e   a:g   c:e   c:g
2  b  d  f  h   b:f   b:h   d:f   d:h 
```

# xcode - 错误：无法运行/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/usr/bin/ibtool（没有这样的文件）

> ID：11423215
> 
> 赞同：7
> 
> 时间：2012-07-10T22:56:08.077
> 
> 标签：xcode, macos, xcode4, osx-lion, xcode4.3

我正在尝试使用 ibtool 进行 iOS 开发（本地化），但是当我从终端运行它时，出现以下错误：

```
Error: Can't run /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/usr/bin/ibtool (no such file). 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T22:56:08.967

对此进行了一些挖掘，并发现了一些对类似问题的良好堆栈响应 - 但没有适用于所有来者的通用解决方案，所以我想我会做一个。:)

**问题的原因是：**在现代版本的 OSX 中，如果您从 App Store 安装 Xcode，它会像所有其他应用程序一样自行安装 - 这意味着它位于与以往*不同的目录中。*不幸的是，这具有深远的影响，影响 Xcode 及其命令行工具以及 - 事实上 - 远远超出此问题范围的其他事情。

所以，在他们修复它之前，**让我们谈谈解决方法**。许多人建议将您的 Xcode 系统变量更改为指向“App Store”文件夹，但我认为这是一种危险的矫枉过正——您只是不知道如果他们修复了路径可能会造成什么样的混乱！

*相反，我建议使用终端仅*更改影响系统链接`ibtool`（或您正在使用的任何工具），如下所示：

**推荐解决方案**

**第一步：删除旧系统链接**

```
sudo rm /usr/bin/ibtool 
```

**第 2 步：创建新的系统链接**

```
sudo ln -s /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool /usr/bin/ibtool 
```

仅供参考，这是另一个可以解决此问题的命令 - 但出于上述原因，我**不建议使用它：**

```
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

`xcode-select`如果你有各种 /Developer 相关的错误，我可以看到这个论点可能是一个正确的解决方案，但在这种情况下，我会在不使用 App Store 的情况下重新安装 Xcode 并从一开始就让它运行良好。

对于我们其他人来说，已经在 App Store 的道路上走得太远了，无法重新做这一切，见上文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T23:17:37.857

绝对的第一步是让**Xcode**安装`command line tools`. 这样做将使工具进入`/usr/bin`- 它已经在您的 PATH 中。转到“ **Xcode” :: “Preferences” :: “Downloads” :: “Components”**那里应该有一个 install `Command Line Tools`。如果没有，请转到**“Xcode”::“打开开发者工具”::“更多开发者工具”**并下载最新的命令行工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T12:43:36.727

当您使用 Xcode 7 时，libtool 位于以下路径中：

> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool

您可以在这里做的只是简单地复制它，然后将其粘贴到错误的指定位置：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/libtool

如果您打算在设备上运行应用程序，您还应该将文件粘贴到以下路径中：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/libtool

如果您没有找到 usr/bin，只需创建一个文件夹并将其命名为 usr，并在其中创建另一个文件夹并将其命名为 bin。将 libtool 粘贴到其中。

# java - 访问者模式解决方案：少数访问者具有相同的界面，但应该使用不同的对象

> ID：11423217
> 
> 赞同：4
> 
> 时间：2012-07-10T22:56:18.210
> 
> 标签：java, design-patterns, visitor-pattern

我有以下类图（访问者模式实现）：

[![在此处输入图像描述](../Images/36983aa791c20fa5ea8898b8b70c9c0e.png)](https://i.stack.imgur.com/EO0Yz.jpg)

预期结果：
1) WiredVisitor 应该只访问 Router 和 WiredNetworkCard
2) WirelessVisitor 应该只访问 Router 和 WirelessNetworkCard

**所以，我的问题是：我应该如何更改设计（或代码）以实现我的预期结果？**

*PS我目前的解决方案是在两个访问者的每个访问（卡片：INetworkCard）方法中添加以下代码：*

```
// in WiredVisitor
if (card.getClass.equals(WiredNetworkCard.class)){
    // do logic of visit method
}

// in WirelessVisitor
if (card.getClass.equals(WirelessNetworkCard.class)){
    // do logic of visit method
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:14:00.330

本着[非循环访问者模式](http://codecrafter.blogspot.ca/2012/12/the-acyclic-visitor-pattern.html)的精神，将访问者分成子类特定的访问者。请注意，您仍然需要类型检查，但它包含在被访问的类型中：

以下是访问者界面：

```
interface IVisitor {
}

interface IRouterVisitor extends IVisitor {
  void visit(Router router);
}

interface INetworkCardVisitor extends IVisitor {
}

interface IWirelessNetworkCardVisitor extends INetworkCardVisitor {
  void visit(WirelessNetworkCard card);
}

interface IWiredNetworkCardVisitor extends INetworkCardVisitor {
  void visit(WiredNetworkCard card);
} 
```

具体的访问者将如下所示：

```
class WiredVisitor implements IWiredNetworkCardVisitor, IRouterVisitor  {
  // ...
}

class WirelessVisitor implements IWirelessNetworkCardVisitor, IRouterVisitor {
  // ...
} 
```

和访问的对象：

```
interface INetworkElement {
  void accept(IVisitor visitor);
}

class Router implements INetworkElement {
  @Override
  public void accept(IVisitor visitor) {
    if (visitor instanceof IRouterVisitor) {
      ((IRouterVisitor)visitor).visit(this);
    }
  }
}

interface INetworkCard extends INetworkElement {}

class WiredNetworkCard implements INetworkCard {
  @Override
  public void accept(IVisitor visitor) {
    if (visitor instanceof IWiredNetworkCardVisitor) {
      ((IWiredNetworkCardVisitor)visitor).visit(this);
    }
  }
}

class WirelessNetworkCard implements INetworkCard {
  @Override
  public void accept(IVisitor visitor) {
    if (visitor instanceof IWirelessNetworkCardVisitor) {
      ((IWirelessNetworkCardVisitor)visitor).visit(this);
    }
  }
} 
```

在这些类型检查中，如果类型不是预期的类型，您也可以抛出错误，这取决于您希望在这种情况下发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:00:06.357

例如，您可以这样做：

```
public interface IVisitor<T extends INetworkCard> {
   public void visit( T card );
} 
```

然后您将访问者定义为：

```
public class WiredVisitor implements IVisitor<WiredNetworkCard> {
...
}

public class WirelessVisitor implements IVisitor<WirelessNetworkCard> {
...
} 
```

这可能不是教科书的解决方案，但它非常干净且可读性强。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T06:31:40.123

我认为这里的问题不在于访问者，而是当客户端通过传递一个错误来调用*接受*时。然后应该通过在那个时间点引发异常来处理它。`WiredNetworkCard``WirelessVisitor`

但是所有这一切都发生在运行时，biziclop 的解决方案本身在编译时处理它。但我不喜欢 biziclop 的解决方案的地方在于，`WiredVisitor`它实现的方法也`IVisitor<WiredNetworkCard>` 与`visit(router:Router)``WiredNetworkCard`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-27T21:09:40.273

您可以只定义一些接口并在您希望它访问的每组元素上打一个...这样做的好处是：

*   它是类型安全的
*   没有运行时检查（因为不需要它们）；没有运行时异常

这是我为您的示例所谈论的内容的实现：

*   访客：

    ```
    interface  Wired {
        <R> R accept(Visitor<R> v);

        interface Visitor<R> {
            R visit(Router router);

            R visit(WiredNetworkCard wiredNetworkCard);
        }
    }

    interface Wireless {
        <R> R accept(Visitor<R> v);

        interface Visitor<R> {
            R visit(Router router);

            R visit(WirelessNetworkCard wirelessNetworkCard);
        }
    } 
    ```

*   要素：

    ```
    class Router implements Wired, Wireless {
        @Override
        public <R> R accept(Wired.Visitor<R> v) {
            return v.visit(this);
        }

        @Override
        public <R> R accept(Wireless.Visitor<R> v) {
            return v.visit(this);
        }
    }

    class WiredNetworkCard implements Wired {
        @Override
        public <R> R accept(Wired.Visitor<R> v) {
            return v.visit(this);
        }
    }

    class WirelessNetworkCard implements Wireless {
        @Override
        public <R> R accept(Wireless.Visitor<R> v) {
            return v.visit(this);
        }
    } 
    ```

# python - 为什么我的 Python3 脚本不愿将其输出通过管道传输到 head 或 tail（sys 模块）？

> ID：11423225
> 
> 赞同：13
> 
> 时间：2012-07-10T22:57:05.597
> 
> 标签：python, python-3.x, pipe

我有一个 Python3 脚本，可以将其输出写入标准输出，但是当我将该输出通过管道传输到头部或尾部时它会抱怨。请注意，在下面的示例输出中，它可以正常工作，即`head`按要求返回前两行输出。

```
> ./script.py '../Testdata/*indels.ss' -m 5 | head -2                                                                                              ~/Databases/Avian_genomes/Sandbox/combined
xread
2999 50
Traceback (most recent call last):
  File "./new.py", line 194, in <module>
    sys.stdout.write(lineout)
IOError: [Errno 32] Broken pipe
Exception IOError: IOError(32, 'Broken pipe') in <_io.TextIOWrapper name='<stdout>' mode='w' encoding='UTF-8'> ignored 
```

相反，该脚本在将其输出通过管道传送到 awk 方面没有问题，如下所示。

```
> ./script.py '../Testdata/*indels.ss' -m 5 | awk 'NR < 3 {print $0}'                                                                              ~/Databases/Avian_genomes/Sandbox/combined
xread
2999 50 
```

让我知道您是否需要脚本中的一些代码，而不是错误消息中包含的代码。我不确定什么是相关的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T23:11:21.337

```
./script.py '../Testdata/*indels.ss' -m 5 | awk 'NR >= 3 {exit} 1' 
```

将显示与 相同的行为`head -2`。

您可以将`SIGPIPE`处理程序设置为一个安静地杀死您的程序的处理程序：

```
import signal
signal.signal(signal.SIGPIPE, signal.SIG_DFL) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-10T23:10:40.943

我将从[这里](http://www.unixguide.net/unix/bash/E2.shtml)引用：

> 如果管道中出现一系列命令，并且其中一个
> 
> 读取命令在写入器完成之前完成，
> 
> writer 收到一个 SIGPIPE 信号。

就是`head`这样。您的脚本尚未完成编写，但`head`已经完成，因此`stdout`已关闭，因此出现异常。

# iphone - 标签栏不平衡单元格

> ID：11423232
> 
> 赞同：0
> 
> 时间：2012-07-10T22:57:26.040
> 
> 标签：iphone, objective-c, xcode

按下按钮后，我在控制台中收到此错误。

对 < UITabBarController: 0xcb3a330 > 的开始/结束外观转换的不平衡调用。

我的代码是

```
-(IBAction)push:(id) sender { 

   UITabBarController *tabbar1 = [[UITabBarController alloc] init];

   firstViewController *first = [[firstViewController alloc] initWithNibName:@"firstViewController" bundle:nil];
   UINavigationController *tabItem1 = [[UINavigationController alloc] initWithRootViewController: first];

   secondViewController *second = [[secondViewController alloc] initWithNibName:@"secondViewController" bundle:nil];
   UINavigationController *tabItem2 = [[UINavigationController alloc] initWithRootViewController: second];

   tabbar1.viewControllers = [NSArray arrayWithObjects:tabItem1, tabItem2,nil]; 

   [self.view insertSubview:tabbar1.view belowSubview: first.view];

   [self presentModalViewController:tabbar1 animated:YES];} 
```

第一个ViewController 是 UITableViewController

我试图将自我设置为`[self.tabBarController presentModalViewController:tabbar1 animated:YES];`

但还是一样

任何的想法 ？

更新 ：

我找到了解决方案，我刚刚删除了这行代码

```
[self.view insertSubview:tabbar1.view belowSubview: first.view]; 
```

一切都很顺利:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:47:27.337

代码`[self.view insertSubview:tabbar1.view belowSubview: first.view];`没有意义。因为，对象`first`不再被加载。因此该声明无效。删除该代码并继续。

# c# - 使用 Code First 自动检索复杂类型的 ICollection

> ID：11423233
> 
> 赞同：0
> 
> 时间：2012-07-10T22:57:34.443
> 
> 标签：c#, .net, sql, entity-framework, orm

[将 Code First DbContext 与 Entity Framework 5.0 RC 一起使用]

不确定发生了什么？

*   个人`Tracks`被存储
*   并且个人`PlaybackEvents`被存储
*   但是当我这样做时没有填充`ICollection<PlaybackEvent>`of`Track``var tracks = myDbContext.Tracks.ToList();`
*   即使我保存了其中`myDbContext.Tracks.Add(track); myDbContext.SaveChanges();`有`track`几个`PlaybackEvents``ICollection<PlaybackEvents>`

### 希望轨道的相关部分

```
public class Track 
{
    public string Id {get; set;}

    private ICollection<PlaybackEvent> _playbackEvents;

    public ICollection<PlaybackEvent> PlaybackEvents
    {
        get { return _playbackEvents ?? (_playbackEvents = new List<PlaybackEvent>()); }
        set { _playbackEvents = value; }
    }
} 
```

### 简化的播放事件

```
public class PlaybackEvent {
    public string Id {get; set;}

    public string Track_Id { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:57:03.857

您的`ICollection`，这是您的导航属性，需要声明为`virtual`.

对您的代码的另一个建议是不要为您的导航属性显式声明您的 getter 和 setter，而是将 setter 职责移至构造函数。使您的代码如下所示：

```
public class Track  
{ 
    public Track()
    {
        this.PlaybackEvents = new HashSet<PlaybackEvent>();
    }

    // Primary key
    public string Id {get; set;} 

    // Navigation property
    public virtual ICollection<PlaybackEvent> PlaybackEvents { get; private set; } 
 } 
```

您的`PlaybackEvent`实体还需要一个导航属性来启用**一个**Track 到**多个**PlaybackEvents 关系：

```
public class PlaybackEvent 
{  
    // Primary key
    public string Id {get; set;}  

    // Foreign key
    public string Track_Id { get; set; }  

    // Navigation property
    public virtual Track Track { get; set; }
} 
```

# algorithm - 在 N 个桶中平均分配一组随机整数的算法

> ID：11423235
> 
> 赞同：4
> 
> 时间：2012-07-10T22:57:36.853
> 
> 标签：algorithm, hash

这是一个问题：我有随机整数说 count = M 并且它们需要在 N 个桶中平均分配（或大致相等）。

如果我要为 M 和 N 分配一个范围，N 将在 10000 左右，M 可能在 100 到 500 万之间。

到目前为止，这看起来像是一个小散列问题。但这使事情变得更加复杂。所以这些数字在计数上是 M，但它们将被逐步考虑，所以说最初你有 X 没有。整数，你平均分配它们，然后 Y 没有。整数可用更多，因此您再次分配它们，然后 Z 没有。整数个可用 (X+Y+Z = M)。

也是一个特定的号码。应该以这样的方式分布，即他们的桶没有。可以高效搜索。

到目前为止，我想到了几种方法，但没有一种方法可以接近平均分配。

1）有桶号。高，因此 N 的最大值为 500 万。平均分配意味着 500 个桶，所以从创建 500 个桶开始。它们最终将同样充满。但这也有可能很难处理的最终情况。2）根据当前可用的大小（X，然后是 X+Y，然后是 M）具有桶大小，如果它是完整的 rehash 以增加 no。桶。在我的用例中，这可能是一项代价高昂的练习，并且希望避免它。3）不知何故试图适应装箱问题。但它并不能轻易地告诉我整数将进入的 bin 是什么。要记住的一件明显的事情是，由于这些是随机数，如果计数是 100,000 则其中一个数。也可能是500,000。

你推荐什么方法？如果需要，我可以稍后提供用例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T01:15:24.013

你把这复杂化了。整数是随机的，所以不需要思考。如果整数不是随机的，那么我们可能不得不提出一个哈希算法。

只要整数的范围合理地大于桶的数量，只需通过桶数的模将它们分配给它们的桶。

像这样：

```
void assignToBucket( int r )
{
    bucket[ r % NUM_BUCKETS ].add( r );
} 
```

无论您尝试插入多少个 - 或者它们是一次全部插入，还是分几次插入都没有关系。只要流是随机的，那么模将确保它们大致均匀地分布在桶中。

如果每个 r 的范围接近桶的数量，这将不起作用。也就是说，如果每个 r 是从 0-7 并且有 6 个桶，它就不会均匀分布。它不适用于非随机流。

对于具有非随机分布的流，您需要了解一些有关分布的信息才能创建适当的散列函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:01:51.493

听起来你不必要地使这复杂化，但很难说出你在问什么。这听起来很像一个球和垃圾箱的问题，检查[一下](http://pages.cs.wisc.edu/~shuchi/courses/787-F09/scribe-notes/lec7.pdf)，看看它是否适用，如果你能以更正式的方式描述你正在寻找的东西。

# .htaccess - 如何使用 htaccess 从二级域永久重定向到顶级域？

> ID：11423236
> 
> 赞同：0
> 
> 时间：2012-07-10T22:58:01.500
> 
> 标签：.htaccess

最近，我所在地区启用了顶级域。所以，我想将所有流量从我的旧域重定向：site.com.ex 到 site.ex

我尝试了一堆 .htaccess 魔法，但没有骰子。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:04:46.050

我刚刚开始使用它，它似乎在所有情况下都运行良好：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.)?site\.com\.ex [NC]
RewriteRule ^(.*)$ http://site.ex/$1 [R=301,L] 
```

# ruby-on-rails-3 - 使用 rspec 在 rails 3.2 中测试严格的验证

> ID：11423237
> 
> 赞同：0
> 
> 时间：2012-07-10T22:58:16.580
> 
> 标签：ruby-on-rails-3, rspec

在 rspec 我如何测试哪个属性未通过严格验证。我只能测试是否抛出了“ActiveModel::StrictValidationFailed”异常。

这是一个例子：

```
it "should not be valid if the asset already exists" do
     n = Factory.build( :private_attached_asset, :asset => Rack::Test::UploadedFile.new( "test.pdf", 'application/pdf' ))
     expect { n.save }.should raise_error(ActiveModel::StrictValidationFailed)
     #n.should have(1).error_on(:checksum)
 end 
```

注释掉的行再次引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:31:24.263

您无法检查严格验证的错误消息，因为它们会立即引发并且不设置`errors`对象。或者，您可以测试引发的确切错误消息：

```
expect { n.valid? }.to raise_error(ActiveModel::StrictValidationFailed, 'Exact message thrown') 
```

# java - 使用带有上传进度的 Java 中的 PUT 请求上传文件

> ID：11423239
> 
> 赞同：0
> 
> 时间：2012-07-10T22:58:32.467
> 
> 标签：java, http, http-put

我正在尝试做一些非常简单的事情，但到目前为止，我尝试各种方法都没有成功。我尝试使用 simple `java.io.Socket`、使用 a`java.io.HttpURLConnection`和最后使用 a上传到 URL `org.apache.commons.httpclient.HttpClient`，但每次都未能成功。

我需要提出这样的请求：

```
PUT http://1.2.3.4:8080/upload?ticket_id=abcdef124567890 HTTP/1.1
Host: 1.2.3.4:8080
Content-Length: 339108
Content-Type: video/mp4

\0abc\32af ... etc. 
```

我需要将文件的字节（可能来自 a `FileInputStream`）写入包含视频字节的主请求正文。

我基本上有两个要求：

1.  我必须使用 PUT 请求将文件上传到给定的服务器。
2.  我必须能够看到上传的进度。

如何在 Java 中实现这一点？

* * *

### 编辑

这是我尝试使用 Apache 执行此操作`HttpClient`：

```
HttpClient httpClient = new HttpClient();
PutMethod httpMethod = new PutMethod(ticket.getEndpoint());
httpMethod.setRequestHeader("Content-Type", "video/mp4");
httpMethod.setRequestHeader("Content-Length", String.valueOf(getStreamFile().length()));

final FileInputStream streamFileInputStream = new FileInputStream(getStreamFile());
final BufferedInputStream bufferedInputStream = new BufferedInputStream(streamFileInputStream);

httpMethod.setRequestEntity(new RequestEntity() {
    @Override public void writeRequest(OutputStream out) 
            throws IOException {
        byte[] fileBuffer = new byte[getBufferLength()];

        int bytesRead = 0;
        int totalBytesRead = 0;
        final int totalFileBytes = (int)getStreamFile().length();

        while ((bytesRead = bufferedInputStream.read(fileBuffer)) > 0) {
            out.write(fileBuffer, 0, bytesRead);
            totalBytesRead += bytesRead;

            notifyListenersOnProgress((double)totalBytesRead / (double)totalFileBytes);
        }
    }

    @Override public boolean isRepeatable() {
        return true;
    }

    @Override public String getContentType() {
        return "video/mp4";
    }

    @Override public long getContentLength() {
        return getStreamFile().length();
    }
});

final int responseCode = httpClient.executeMethod(httpMethod);

logger.debug("Server Response {}: {}", responseCode, 
        httpMethod.getResponseBodyAsString()); 
```

这失败了，但有一个`java.net.SocketException: Broken pipe`例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:08:18.650

对于 1，您将需要使用[multipart request](https://stackoverflow.com/questions/1378920/how-can-i-make-a-multipart-form-data-post-request-using-java)。引用的帖子描述了它。对于 2，在发送数据时使用一些[计数流](http://commons.apache.org/io/apidocs/org/apache/commons/io/output/CountingOutputStream.html)包装器。可能需要在 HttpClient 中挂钩计数流。

如果您添加更多关于不适合您的内容的详细信息，则可以提供更多详细信息。

# codeigniter - 当我在模型中加载数据库时，如何在 Codeigniter Profiler 中显示我的数据库查询？

> ID：11423245
> 
> 赞同：5
> 
> 时间：2012-07-10T22:59:28.763
> 
> 标签：codeigniter, profiling, profiler

我的 Codeigniter 系统使用多个数据库。我不需要每个页面上的每个数据库，因此我将模型中的每个连接加载到需要的地方，然后在每个控制器中加载所需的模型。当我以这种方式加载内容时，分析器不会显示来自这些数据库的任何查询。

这就是我在模型中加载数据库的方式：

```
$this->Companies_db = $this->load->database( 'companies', TRUE, TRUE ); 
```

我曾经在 MY_Controller() （核心控制器的扩展）中加载我的所有数据库。当我在那里加载它们时，分析器工作正常。当我将它们加载到我的模型中时，它不会显示任何数据库查询。

数据库查询正在编译中的方法`_compile_queries()`中`system/libraries/Profiler.php`。当我的数据库加载到模型中时，它们的对象没有加载到 CI 对象中。下面的代码是该`_compile_queries()`方法的前几行，是发生这种情况的地方。

```
foreach (get_object_vars($this->CI) as $CI_object)
    {
        if (is_object($CI_object) && is_subclass_of(get_class($CI_object), 'CI_DB') )
        {
            $dbs[] = $CI_object;
        }
    } 
```

**当我在模型中加载数据库时，如何让 CI 分析器显示我的查询？** 或者，更具体地说，当数据库加载到模型中时，如何让我的数据库对象加载到主 CI 对象中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T23:54:34.673

我会得到一个 CI 对象的实例并将你的数据库存储在那里，这样探查器也可以使用它。

```
class My_Model {
     private $Companies_db;

     public function __construct(){
           $this->Companies_db = $this->load->database( 'companies', TRUE, TRUE );

           // Pass reference of database to the CI-instance
           $CI =& get_instance();
           $CI->Companies_db =& $this->Companies_db;  
     }
} 
```

# ruby-on-rails-3 - 在 Heroku 上不能传递参数？

> ID：11423247
> 
> 赞同：0
> 
> 时间：2012-07-10T22:59:56.840
> 
> 标签：ruby-on-rails-3, methods, heroku, params

我有这个简单的方法：

```
def my_method
  ...here I am working with "params"
  MyMailer.send_email_to_user(params).deliver
end 
```

在 Heroku 上，方法`send_email_to_user`没有从 ruby​​ variable 传递参数`params`。但在调用之前，`send_email_to_user`我正在处理存储的数据，`params`没有任何问题......

但是当我尝试将它们传递给邮件程序的方法时，我会得到错误......

在 localhost 上，这个流程可以正常工作，但在 Heroku 上却不行。有没有人遇到同样的问题或者有人会帮忙，如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:06:54.083

尝试在本地 ( ) 生产模式下运行它`rails server -e production`，看看它是否仍然有效。

还要确保您有一个附加到您的应用程序的电子邮件插件（例如[SendGrid](https://addons.heroku.com/sendgrid)），因为 Heroku 不直接提供任何 SMTP 服务。

# unit-testing - 在 node.js 中使用 express 测试 HTTP 请求

> ID：11423256
> 
> 赞同：5
> 
> 时间：2012-07-10T23:00:54.330
> 
> 标签：unit-testing, node.js, xmlhttprequest, express

我有一个简单的身份验证系统，我使用 express 在 '/session' 上创建了一些 post/get/dels。我想对此进行测试，但我似乎找不到一种简单`http.sendPut('/session', {data})`的从服务器进行测试的简单方法。有人对图书馆使用有建议吗？

如果有帮助，我正在使用 Mocha/should 进行测试。

这是我想要测试的超级简单的 auth-thingy（它与其他一些东西挂钩）：

```
//Login
app.post("/session", function(req, res) {
  if (req.body.username === "admin" && req.body.password === "admin") {
    req.session.user = "user";
    res.send("Successfully logged in!");
  } else {
    res.send(403, "Invalid username or password.");
  }
});
//Logout
app.del("/session", function(req, res) {
  req.session.user = null;
  res.send("Successfully logged out.");
});
//Am I logged in? Check for the client
app.get("/session", function(req, res) {
  if (req.session.user) {
    res.send(req.session.user);
  } else {
    res.send(403, "You are not logged in.");
  }
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:19:21.390

Express.js 使用 supertest 进行测试，[而](https://github.com/visionmedia/supertest)supertest 基于[superagent](https://github.com/visionmedia/superagent)。

如果您需要一些示例，您可以在 Express.js[测试代码](https://github.com/visionmedia/express/tree/master/test)中找到它们。

所有需要的测试`request = require('./support/http');`都使用超测。

# apache - 我想知道 .htaccess 规则

> ID：11423260
> 
> 赞同：0
> 
> 时间：2012-07-10T23:01:08.650
> 
> 标签：apache, .htaccess, mod-rewrite, rewrite

```
重写引擎开启

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

重写规则 ^([a-zA-Z0-9_-]+)$ index.php/$1 [L]
重写规则 ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php/$1/$2 [L]
重写规则 ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php/$1/ $2/$3 [L]
重写规则 ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA- Z0-9_-]+)$ index.php/$1/$2/$3/$4 [L]

```

你可以看到我的代码..

$1/$2/$3/$4 ..（现在）

$1/$2/$3/$4/$5 ~ $unlimited (我想要)

对不起我的英语不好..

你明白吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:05:25.540

如果你想要无限`([a-zA-Z0-9_-]+)/`的，你可以匹配`[a-zA-Z0-9_-/]+`并收工：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 

RewriteRule ^([/a-zA-Z0-9_-]+)$ index.php/$1 [L] 
```

# wordpress - 为什么我需要用“/index.php”开始我的wordpress永久链接？

> ID：11423261
> 
> 赞同：0
> 
> 时间：2012-07-10T23:01:11.647
> 
> 标签：wordpress, apache, mod-rewrite, permalinks

[我在http://tallytree.com](http://tallytree.com)上安装了一个相对较新的 wordpress 。我今天尝试更改永久链接以使其更好。但是，当我使用

```
/%postname%/ 
```

作为永久链接并应用。Wordpress 在我博客的根目录中将其写入 .htaccess ：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

现在，当我单击博客上的帖子标题时，我收到 apache 404 错误。我继续将永久链接更改为这个自定义结构：

```
/index.php/%postname%/ 
```

现在它起作用了。但是我的网址中有一个**index.php**，例如： [http ://tallytree.com/index.php/comparing-a-few-force-directed-layout-implimentations/](http://tallytree.com/index.php/comparing-a-few-force-directed-layout-implimentations/)

如何设置永久链接，以便 index.php 不必在 URL 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:23:19.213

将 Wordpress 的永久链接页面中的自定义结构设置为：/%category%/%postname%/

Wordpress 应将其写入 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

index.php 不会出现在 url 中。如果可行，您可以将自定义结构更改为 /%postname%/

# c - 数据类型大小是否因计算机而异？

> ID：11423263
> 
> 赞同：0
> 
> 时间：2012-07-10T23:01:15.440
> 
> 标签：c, windows, gcc, mingw

我正在使用带有 MinGW/GCC 4.7.1 的 Windows 7。我试图`double ans = pow(2,1000)`在 C 中执行。我发现`ans`无论我在改变数据类型方面做了什么尝试，都无法正确打印。

[但是，我读到（实际上，在此](https://stackoverflow.com/questions/3389195/double-precision-in-c-or-pow2-1000)页面的最底部），如果在 Linux 计算机上运行相同的东西，它会正确打印。

我知道我的 MinGW 文件夹中的 limits.h 文件中对 char、int 和 long long 施加的限制，但是 double 和 float 的限制在哪里？这些是否/可以从一个操作系统或架构到下一个有所不同？

编辑：

这是代码，它打印出截断的零填充答案：

```
#include <stdio.h>
#include <math.h>

int main(void)
{
   double ans = pow(2,1000);

   printf("%.0f", ans);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T00:03:27.047

您提出的问题与您所看到的问题无关。

您使用的所有系统很可能都使用相同的 type 表示`double`，即 64 位 IEEE 双精度。

`pow(2, 1000)`(或者，更等价和更清楚地，的值`pow(2.0, 1000.0)`是 2.0 ^(1000)。因为它是 2 的幂，所以可以精确表示——但是这么大的数字的相对精度非常粗糙。

一个`double`值通常只精确到大约 15 个十进制数字。

显然，在 Linux 系统上使用的 glibc 实现`printf`尝试打印该值的完整十进制表示，而其他`printf`实现将 15 位左右*有效*数字之后的部分或全部数字替换为零。后者可能更容易实现，但两种方法都有效。

在几个不同的系统上运行你的程序，我得到以下结果（为了便于阅读，折叠了行）：

```
10715086071862673000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000

10715086071862673209484250490600018105614050000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000

10715086071862673209484250490600018105614048117055336074437503883703510511249361
22493198378815695858127594672917553146825187145285692314043598457757469857480393
45677748242309854210746050623711418779541821530464749835819412673987675591655439
46077062914571196477686542167660429831652624386837205668069376 
```

最后一个*恰好*等于 2 ^(1000)。

您要打印的数字是不寻常的，因为它非常大*并且*可以精确地表示——glibc 付出了一些额外的努力来精确地打印它。但更一般地说，浮点值往往不精确，很少值得担心前几位之外的任何数字。

例如，`pow(2.0, 1000.0) + 1.0` *不能*精确表示，如果您尝试计算它，您可能会得到与`pow(2.0, 1000.0)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T23:07:44.873

的大小**可能**`float`因实现而异。`double`

 **保证`double`永远不会小于`float`，并且`long double`永远不会小于`double`- 类似于`long long`, `long`, `int`,的保证`short`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T23:08:05.423

是的，float 和 double 等类型的实现*可能*因平台而异。

但是，最常见的现代平台使用浮点类型标准 IEEE 754。因此，除非您在不寻常的平台上，否则其中一种类型的二进制表示不太可能会有所不同。

您提到的另一个线程似乎强调了打印程序准确性的潜在差异。这并不意味着表示不同（或大小不同）。**

# cuda - CUDA 的调用图

> ID：11423266
> 
> 赞同：3
> 
> 时间：2012-07-10T23:01:29.777
> 
> 标签：cuda, call-graph

我正在尝试为我在[埃及](http://www.gson.org/egypt/egypt.html)的 CUDA 中拥有的代码生成调用图，但通常的方法似乎不起作用（因为 nvcc 没有任何标志可以做与 -fdump-rtl-expand 相同的事情） .

更多细节 ：

我有一个非常大的代码（我不是作者），它跨越多个 .cu 文件，如果我有一个调用图，我会更容易理解它在做什么。

我敢打赌，这个问题的答案也对其他人有用。

关于如何使用 cuda (.cu) 文件完成此操作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-29T19:29:44.720

您可以使用[clang 3.8 的 CUDA 支持](http://llvm.org/docs/CompileCudaWithLLVM.html)来做到这一点。

首先，编译您的 CUDA 代码以发出 llvm（安装 CUDA 7.5 的 Windows 上的示例）：

```
clang++ -c main.cu --cuda-gpu-arch=sm_35 -o main.ll -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v7.5\include" 
```

然后，使用生成的 ll 来构建调用图`opt`：

```
opt.exe main.ll -analyze -dot-callgraph 
```

请注意，这`opt`不是默认二进制发行版的一部分，您可能需要自己构建它（我有一个 3.7.1 构建，它已经能够管理来自 3.8 的 ll）。

示例 main.cu 文件：

```
#include <cuda_runtime.h>
__device__ int f() { return 1; }
__device__ float g(float* a) { return a[f()] ; }
__device__ float h() { return 42.0f ; }
__global__ void kernel (int a, float* b)
{
        int c = a + f();
        g(b);
        b[c] = h();
} 
```

生成的点文件：

```
digraph "Call graph" {
        label="Call graph";

        Node0x1e3d438 [shape=record,label="{external node}"];
        Node0x1e3d438 -> Node0x1e3cfb0;
        Node0x1e3d438 -> Node0x1e3ce48;
        Node0x1e3d438 -> Node0x1e3d0a0;
        Node0x1e3d438 -> Node0x1e3d258;
        Node0x1e3d438 -> Node0x1e3cfd8;
        Node0x1e3d438 -> Node0x1e3ce98;
        Node0x1e3d438 -> Node0x1e3d000;
        Node0x1e3d438 -> Node0x1e3cee8;
        Node0x1e3d438 -> Node0x1e3d078;
        Node0x1e3d000 [shape=record,label="{__cuda_module_ctor}"];
        Node0x1e3d000 -> Node0x1e3ce98;
        Node0x1e3d000 -> Node0x1e3d168;
        Node0x1e3d078 [shape=record,label="{__cuda_module_dtor}"];
        Node0x1e3d078 -> Node0x1e3cee8;
        Node0x1e3cfb0 [shape=record,label="{^A?f@@YAHXZ}"];
        Node0x1e3d0a0 [shape=record,label="{^A?h@@YAMXZ}"];
        Node0x1e3ce48 [shape=record,label="{^A?g@@YAMPEAM@Z}"];
        Node0x1e3ce48 -> Node0x1e3cfb0;
        Node0x1e3d258 [shape=record,label="{^A?kernel@@YAXHPEAM@Z}"];
        Node0x1e3d258 -> Node0x1e3cfb0;
        Node0x1e3d258 -> Node0x1e3ce48;
        Node0x1e3d258 -> Node0x1e3d0a0;
        Node0x1e3d168 [shape=record,label="{__cuda_register_kernels}"];
        Node0x1e3cee8 [shape=record,label="{__cudaUnregisterFatBinary}"];
        Node0x1e3cee8 -> Node0x1e3d528;
        Node0x1e3cfd8 [shape=record,label="{__cudaRegisterFunction}"];
        Node0x1e3cfd8 -> Node0x1e3d528;
        Node0x1e3ce98 [shape=record,label="{__cudaRegisterFatBinary}"];
        Node0x1e3ce98 -> Node0x1e3d528;
} 
```

# asp.net-mvc-3 - MVC3 - 为什么回发时导航属性为空

> ID：11423267
> 
> 赞同：5
> 
> 时间：2012-07-10T23:01:30.880
> 
> 标签：asp.net-mvc-3, entity-framework

在我发布后，我无法弄清楚如何让我的模型 (EF4) 的导航属性不为空。我在几个基本页面上遇到了同样的问题。

即，我有一个外键为 LoginID 的 Estimate 表（来自 Login 表）。

在我的 HTTPGet Edit 方法中，我找到了我想要的具体估计：

```
Estimate estimate = db.Estimates.Find(id) 
```

从这里我可以访问登录导航属性和登录表中该记录的任何属性。

我通过这个估计作为我的强类型视图的模型。当我的 HTTPPost Edit 方法被调用（并且模型作为参数传递给它）时，我的 Login 导航属性为 null，我无法访问其中的任何内容。我当然可以绕过它，因为我的估算类中确实有 LoginID 字段，但感觉真的很笨重，就像我错过了实体框架的一个关键好处。

我在多个页面上遇到同样的问题，我将带有导航属性的模型传递给我的视图，并且视图正在返回带有空导航属性的模型。

以下是我遇到问题的代码示例：

```
 [HttpPost]
    public ActionResult Edit(Estimate estimate)
    {

        var test = estimate.Login.CompanyProfileID;
        ... 
```

我可以在视图中访问 Model.Login 及其所有属性，所以我知道它正在正确地传递给视图。当我的表单提交时，它只是不会将导航属性传递回控制器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T04:18:48.240

正在发生的事情是 MVC 使用称为“模型绑定”的东西，它将 POST 在页面请求中传递的所有字段与您的操作参数的匹配属性相匹配。

因此，如果该属性未包含在`POST`页面的输入字段中，则它不会绑定到您的`POST`操作中的参数，因此将为空。

因此，您可以为 中的每个属性包含一个隐藏字段`Login`，例如

```
@Html.HiddenFor(m => m.Login.ID)
@Html.HiddenFor(m => m.Login.Name) 
```

或者，就像您在解决方法中描述的那样 - 即根据 Id 重新查询数据库。尽管这可能看起来很笨重，但这是一种完全有效的做事方式，因为它避免了在各处传递隐藏字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T18:02:20.150

您返回的 Estimate 对象受视图字段（以及任何任何 Bind 属性）的限制。为您想要的属性添加隐藏字段或从上下文重新加载对象。

需要注意的一点（我将这个答案发布到一个长期死问题的全部原因）是对于 EF6，如果您在部分 EntityState.Modified 上的 .SaveChanges 之后从上下文重新加载对象（因为您很聪明）它将为您提供实体的缓存和不完整版本。您必须执行 context.Entity(estimate).Reload() 而不是 .Find 或 .Where

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T23:48:46.607

MVC 没有任何视图状态的概念，或者视图中自动持久化数据的概念。您希望通过 POST 返回给您的任何属性都必须作为表单字段存在于表单中。在这种情况下，您需要一个隐藏字段来存储`LoginID`.

```
@Html.HiddenFor(m => m.LoginID) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T00:12:14.177

我有与您类似的情况，在后期操作中，我从数据库中提取原始项目，然后根据我需要做什么，将所有已编辑的属性复制到我拉出的项目并使用复制的属性保存原始属性（可能被编辑的属性）由用户），或者用缺失的属性填充发布的模型，然后保存它。我不确定这是否是正确的做法，但它对我有用。当您从数据库中提取原始项目时，您可以访问您想要的任何属性（假设用户无法更改它）。

例子：

```
 [Authorize]
        public ActionResult Edit(int id)
        {
            var movie = movieService.GetMovieById(id);
            if (new UserService().Current().UserId == movie.UserID)
            {
                EditMovieModel model = new EditMovieModel(id);
                return View(model);
            }
            else
            {
                throw new System.Web.HttpException(403, "403 Forbidden");
            }
        }

        [HttpPost]
        [Authorize]
        public ActionResult Edit(Movie movie)
        {
            var realMovie = movieService.GetMovieById(movie.ID);
            if (new UserService().Current().UserId == realMovie.UserID)
            {
                realMovie.Text = HtmlSanitizer.sanitize(movie.Plot);
                realMovie.CategoryID = movie.CategoryID;
                movieService.Update(realMovie);
            }
            else
            {
                throw new System.Web.HttpException(403, "403 Forbidden");
            }
            return RedirectToAction("Movie", new { id = realMovie.ID, title = realMovie.Permalink });
        } 
```

# ruby-on-rails - 添加例外以在两个代码块之间进行选择

> ID：11423269
> 
> 赞同：0
> 
> 时间：2012-07-10T23:02:10.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我将如何在两个块之间进行选择：

```
page.parser.xpath('//*[contains(concat( " ", @class, " " ), concat( " ", "realviewLink", " " ))]').each do |product|

page.parser.xpath('//*[contains(concat( " ", @class, " " ), concat( " ", "gbb-productTitle", " " ))]').each do |product| 
```

我尝试添加 begin/recuse 和 if/else 并不断收到意外的关键字错误。如果第一个语句 = []，我如何选择第二个语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:08:29.797

从您的代码中，更简单的方法是：

```
first_xpath_expr = '//*[contains(concat( " ", @class, " " ), concat( " ", "realviewLink", " " ))]'
second_xpath_expr = '//*[contains(concat( " ", @class, " " ), concat( " ", "gbb-productTitle", " " ))]'
xpath_result = page.parser.xpath(first_xpath_expr).map { |product| process_first_xpath_expr(product) }
if xpath_result.blank?
  xpath_result = page.parser.xpath(second_xpath_expr).map { |product| process_second_xpath_expr(product) }
end 
```

# ruby-on-rails - 使用 Factory Girl 进行测试时处理数据库的正确方法

> ID：11423272
> 
> 赞同：1
> 
> 时间：2012-07-10T23:02:18.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, factory-bot, fixtures

我正在尝试将使用 Fixtures 的 Rails 3 应用程序移至 Factory Girl 并且不完全确定数据库的正确方法。（请注意，我使用 Rspec 进行测试）。

我有一个`seeds.db`包含我的功能和集成测试所需的数据，但是当涉及到我的`Role`模型的模型测试时，如果我想从工厂担任管理员角色，这些种子数据可能会妨碍我，但是我的种子数据库中已经有一个管理员角色，并且名称列必须是唯一的。此外，我在这些模型测试中创建的任何数据都可能会干扰我的集成测试，因为我会有额外的数据我没有预料到。

所以我猜有几个问题：

1.  在我的单元测试中处理数据库的正确方法是什么？我需要其他测试的种子数据，但它们现在似乎正在“阻碍”。我是否被迫使用序列制作独特的数据，还是有办法加载种子数据仅用于功能和集成测试等？

2.  是否有适当的方法来清除工厂数据，使其只是功能和集成测试的种子数据？

工厂女孩现在完全是新手，只想正确地学习它，而不是通过它来破解我的方式。感谢您的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:36:32.357

在测试中处理数据库数据的“正确”方法是在每次测试运行之前确保它是干净且一致的。很多人（包括我自己）从来没有为数据库播种，而是使用工厂。

为数据库播种也会使您更难了解正在发生的事情，并且会导致您做出很多次最终不正确的假设。相反，使用工厂只添加测试所需的数据。这是一些额外的工作，但它是值得的，因为：

1.  消除你的假设
2.  确保干净和一致的测试环境
3.  将测试的所有数据保留在测试中

另外，rspec 具有`before(:each)`，`before(:all)`因此您可以在运行测试之前设置数据。因此，这并没有太多额外的工作。

但是一开始可能会让您感到困惑的一件事是，在使用 For 时，rspec 不会在测试运行之间清除数据库`before(:all)`，我通常只是在一个`after(:all)`块中手动删除。所以我使用的经验法则是——在其中创建的任何内容都`before(:all)`应该在`after(:all)`

许多人也为此使用[database_cleaner](https://github.com/bmabey/database_cleaner) gem，但到目前为止我还不需要它。

# android - 如何将微调器与 listarray 对象绑定

> ID：11423276
> 
> 赞同：0
> 
> 时间：2012-07-10T23:02:45.893
> 
> 标签：android, android-spinner

```
ArrayList<DataCCHeading>CC1=new ArrayList<DataCCHeading>();
ArrayList<DataCCHeading>CC2=new ArrayList<DataCCHeading>();

ArrayList<DataCCHeading>hd=new ArrayList<DataCCHeading>(result);
for (DataCCHeading dataCCHeading : hd) {
    if(dataCCHeading.Ownername==TAG_CC1HeadingData){
        CC1.add(dataCCHeading);
    }
    else if(dataCCHeading.Ownername==TAG_CC2HeadingData){
        CC2.add(dataCCHeading);
    }
}

ArrayAdapter<DataCCHeading>adaptercc1=new ArrayAdapter<DataCCHeading>(TimeClockDashBoard.this,android.R.layout.simple_spinner_item,CC1);
adaptercc1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
myCC1Spinner.setAdapter(adaptercc1);

ArrayAdapter<DataCCHeading>adaptercc2=new ArrayAdapter<DataCCHeading>(TimeClockDashBoard.this,android.R.layout.simple_spinner_item,CC2);
adaptercc2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
myCC2spinner.setAdapter(adaptercc2); 
```

数据不显示... DataCCHeading 是类...

```
public class DataCCHeading {
    String Code;
    String Description;
    String Ownername;

    public DataCCHeading(String Code, String Description,String owner) {
        this.Code = Code;
        this.Description = Description;
        this.Ownername=owner;
    }

    public String toString() {
        return Description;
    }

    public String getId() {
        return Code;
    }

    public String GetDescription() {
        return Description;
    }

    public String Ownername()
    {
        return Ownername;
    }
} 
```

我只想在微调器中显示描述。Spinner 不显示任何数据。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:03:42.743

ArrayListCC1=新的 ArrayList();

ArrayListhd=新的 ArrayList(结果);

```
 for (DataCCHeading dataCCHeading : hd) {
         if(dataCCHeading.Ownername==TAG_CC1HeadingData)
         {
             CC1.add(dataCCHeading);

         }
    } 
```

ArrayAdapteradaptercc1=新 ArrayAdapter(TimeClockDashBoard.this,android.R.layout.simple_spinner_item ,CC1); adaptercc1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); myCC1Spinner.setAdapter(adaptercc1);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:23:19.990

这只是一个猜测，但在 Java 中你**不能**用来`==`比较字符串：

```
// This will not work! (Most of the time)
if(dataCCHeading.Ownername==TAG_CC1HeadingData) 
```

您**必须**使用 String.equals() 来比较完全匹配：

```
if(dataCCHeading.Ownername.equals(TAG_CC1HeadingData)){
    CC1.add(dataCCHeading);
}
else if(dataCCHeading.Ownername.equals(TAG_CC2HeadingData)){
    CC2.add(dataCCHeading);
}
else {
    Log.w("Warning!", "Data for Spinners does not match CC1 or CC2 HeadingData");
} 
```

# c# - 识别 web 项目每个页面中的 Label 和 Button Control

> ID：11423280
> 
> 赞同：7
> 
> 时间：2012-07-10T23:03:18.807
> 
> 标签：c#, asp.net

我正在尝试再一次联系 asp.net 专家并希望得到答案。我真的被困在这里并寻求帮助。希望我的问题不会被否决，我可以纯粹从技术角度得到答案，而不是人们简单地对我的方法进行评判。

之前我发布的问题如下： [asp.net convert asp.net page into Page variable](https://stackoverflow.com/questions/11422501/asp-net-convert-asp-net-page-into-page-variable)

然后我查看了以下页面，但它仍然不适合我。

[使用 System.Reflection 加载 ASP.NET 2.0 aspx 页面？](https://stackoverflow.com/questions/376404/load-an-asp-net-2-0-aspx-page-using-system-reflection)

在我的 Web 应用程序中，我希望能够在我的代码中的任何位置引用网页，例如“WebForm1.aspx”，并获取该页面上的控件列表。请从这个角度来看，不要过度分析。是否可以？

在我的页面变量 p 中，我似乎没有任何 WebForm1.aspx 控件

这是我的代码。

请帮忙。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string[] filePaths = Directory.GetFiles(Server.MapPath("~/"), "*.*", SearchOption.AllDirectories);

        foreach (string filepath in filePaths)
        {
            if (filepath.EndsWith(".aspx"))
            {
                Response.Write(filepath + "<br/>");

                string[] folders = filepath.Split('\\');
                string filename = folders[folders.Count() - 1];
                string fullpath = "~/" + filename;

                Page p = BuildManager.CreateInstanceFromVirtualPath("~/"+fullpath, typeof(Page)) as Page;

                List<String> controlList = new List<String>();
                ResourceManager.AddControls(p.Controls, controlList);

                foreach (string str in controlList)
                {
                    Response.Write(str + "<br/>");
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T00:11:01.137

由于[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.80%29.aspx)，控件仅通过处理请求 ( `IHttpHandler.ProcessRequest(HttpContext)`) 创建。

在迭代控件之前，您需要运行以下代码：

```
//this is necessary, Otherwise "Default.aspx" will show the contents of "WebForm1.aspx".
HttpWorkerRequest hwr = new SimpleWorkerRequest(this.TxtPageVirtualPath.Text, "", tw);
HttpContext fakeContext = new HttpContext(hwr);
((IHttpHandler)p).ProcessRequest(fakeContext); 
```

下面是 Default.aspx 的完整代码：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Web.Compilation;
using System.Collections.Generic;
using System.Resources;
using System.IO;
using System.Web.Hosting;

namespace _1423280WebApp
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void BtnLoad_Click(object sender, EventArgs e)
        {
            Page p = BuildManager.CreateInstanceFromVirtualPath(this.TxtPageVirtualPath.Text, typeof(Page)) as Page;

            List<String> controlList = new List<String>();

            MemoryStream ms = new MemoryStream();
            TextWriter tw = new StreamWriter(ms);
            HtmlTextWriter htw = new HtmlTextWriter(tw);

            //this is necessary, Otherwise "Default.aspx" will show the contents of "WebForm1.aspx".
            HttpWorkerRequest hwr = new SimpleWorkerRequest(this.TxtPageVirtualPath.Text, "", tw);
            HttpContext fakeContext = new HttpContext(hwr);

            ((IHttpHandler)p).ProcessRequest(fakeContext);

            //I could not compile this part in VS2005
            //ResourceManager.AddControls(p.Controls, controlList);

            this.TxtListControls.Text = "";
            foreach (Control ctr in p.Controls)
            {
                this.TxtListControls.Text += this.recursiveControls(p, "");
            }
        }

        public string recursiveControls(Control control, string ident)
        {
            string retStr = 
                String.Format(
                    ident + "D='{0}', ClientID='{1}', Type=='{2}' \n",
                    control.ID,
                    control.ClientID,
                    control.GetType().FullName);
            foreach (Control innerCtr in control.Controls)
            {
                retStr += this.recursiveControls(innerCtr, " " + ident);
            }

            return retStr;
        }
    }
} 
```

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="_1423280WebApp._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        Get List of Controls from:<br />
        <asp:TextBox ID="TxtPageVirtualPath" runat="server">~/webform1.aspx</asp:TextBox><br />
        <asp:Button ID="BtnLoad" runat="server" OnClick="BtnLoad_Click" Text="Load" /><br />
        Controls:<br />
        <asp:TextBox ID="TxtListControls" runat="server" Height="328px" TextMode="MultiLine"
            Width="100%"></asp:TextBox></div>
    </form>
</body>
</html> 
```

带有完整示例代码的解决方案：[q_11423280WebApp.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/q_11423280WebApp.7z)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T23:25:51.830

这是加载控件的替代方法：

```
protected void Page_Load(object sender, EventArgs e)
{
    Type type = BuildManager.GetCompiledType("~/Default.aspx");
    var page = (Default)Activator.CreateInstance(type);
    ((IHttpHandler)page).ProcessRequest(HttpContext.Current);
    var count = page.Controls.Count;
    Response.Clear(); // Because we use HttpContext.Current the response has a lot of stuff
} 
```

# javascript - 如何使用 Javascript 轻松将文件上传到服务器（对于傻瓜）

> ID：11423287
> 
> 赞同：0
> 
> 时间：2012-07-10T23:05:15.950
> 
> 标签：javascript, python, django, file-upload

我对编程完全陌生。我选择了 Django 来开始，我正在通过这样的教程和页面来学习。我要做的是：我的根文件夹中有一个 .txt 文件，当我运行特定网页时，我从该文件中获取信息并显示一些内容。问题是我需要用户可以从他们的计算机上传一个 .txt，并且这个文件替换我根文件夹中的文件。因此，它被称为例如 data.txt 并被存储，并且页面刷新（如 F5，现在），以便显示的信息来自该新文件。谁能告诉我如何做到这一点，一步一步地解释“傻瓜”？如果可能的话，我想只用 JavaScript（而不是 Python）来做。我不需要多次上传，上传也没有必要涉及 AJAX 或类似的东西，尽管我知道它更好。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:27:26.000

首先，javascript 不能从客户端的计算机上传文件，否则我可以将您发送到一个网站，该网站会窃取您计算机上的所有文件。

其次，上传文件只需要一个html表单，用户可以在其中选择一个文件，然后提交表单，从而将其上传到您的服务器。然后需要一个服务器端脚本将上传的文件移动到您想要的任何位置。

第三，您应该非常小心允许上传到您的服务器，因为如果没有正确完成，这可能是恶意软件安装在您服务器上的一个巨大的载体。

第四，由于您使用 django 作为服务器端语言，您可能只想在 google 上搜索“使用 django 上传文件”。这是有关如何进行文件上传的 django 文档：

[https://docs.djangoproject.com/en/dev/topics/http/file-uploads/?from=olddocs](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/?from=olddocs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:31:37.940

似乎您不需要 javascript 解决方案来做到这一点，并且使用基本的 Django 可以工作。但是，如果您一直对使用 Javascript 操作文件感兴趣，可以在以下位置找到有关如何操作的说明：

[如何在上传到服务器之前预处理本地 CSV 文件？](https://stackoverflow.com/questions/10019679/how-to-preprocess-a-local-csv-file-before-uploading-to-a-server/10019863#10019863)

# java - Java - 另存为 RTF 不支持文本对齐？

> ID：11423293
> 
> 赞同：1
> 
> 时间：2012-07-10T23:05:39.627
> 
> 标签：java, swing, rtf

当我将样式化的 JTextPane 保存为 RTF，然后重新打开它时，不会保留文本对齐方式。这是我的方法：

```
private void saveAsRTF(File outfile) {
RTFEditorKit rtfkit = new RTFEditorKit();
StyledDocument doc = (StyledDocument) pane.getDocument();
try {
    FileOutputStream fwi = new FileOutputStream(outfile);
    rtfkit.write(fwi, doc, 0, doc.getEndPosition().getOffset());
    fwi.close();
} catch (IOException ioe) {
    ioe.printStackTrace();
} catch (BadLocationException ble) {
    ble.printStackTrace();
}
} 
```

和（打开 RTF）

```
 RTFEditorKit rtf = new RTFEditorKit();
  FileInputStream fi = new FileInputStream(j.getSelectedFile());
  rtf.read(fi, pane.getStyledDocument(), 0); 
```

最后，首先对齐文本：

```
 SimpleAttributeSet attribs = new SimpleAttributeSet();  
StyleConstants.setAlignment(attribs , StyleConstants.ALIGN_CENTER);  
pane.setParagraphAttributes(attribs,true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:45:19.823

默认的 RTFEditorKit 确实是有限的。尝试与[http://java-sl.com/advanced_rtf_editor_kit.html相同](http://java-sl.com/advanced_rtf_editor_kit.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T07:19:58.340

已针对 Java 9 修复 RTFEditorKit 对齐。
[https://bugs.openjdk.java.net/browse/JDK-8139215](https://bugs.openjdk.java.net/browse/JDK-8139215)

# html - div 内文本中的新行

> ID：11423300
> 
> 赞同：57
> 
> 时间：2012-07-10T23:06:12.190
> 
> 标签：html, textarea

当我放置通过 ajax 调用加载的文本时，我有一个小问题。

我从 textarea 获取内容并将其存储在我的数据库中，当我想在 div 中显示文本时，它不尊重新行，因此所有文本都是连续的。

以下代码显示了一个小示例：

```
$(function() {
    $('.buttonA').click(function() {
        $('.message').html($('textarea[name="mensaje"]').val());
    });
});
```

```
.message {
    width:300px;
    height:200px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.2.3/jquery.min.js"></script>
<textarea name="mensaje" class="new_message_textarea" placeholder="enter message..."></textarea>
<button class="buttonA">Enter</button>
<div class="message"></div>
```

如果您键入一些带有一些新行的文本，一旦您单击按钮，文本就会显示到 div 中，并且会看到没有显示新行。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2014-07-14T13:17:04.790

我认为实现这一目标的更好方法是添加

```
white-space: pre 
```

或者

```
white-space: pre-wrap 
```

风格给你`div`。

**请参阅：[HTML - DIV 内容中的换行符是否可编辑？](https://stackoverflow.com/questions/19038070/html-newline-char-in-div-content-editable)**

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-05-27T03:20:46.743

将此添加到 CSS 中：

```
white-space: pre-line 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-10T23:11:10.023

换行符对 html 渲染没有任何作用。在你的js中改变这个：

```
$('.message').html($('textarea[name="mensaje"]').val()); 
```

...对此：

```
$('.message').html($('textarea[name="mensaje"]').val().replace(/\n/g, "<br />")); 
```

...它会用适当的 html 换行符替换你的换行符

# python - 在 OS X Lion（以及可能的 OS X 未来版本）上正确安装和配置 Python/Pyside/PyDev

> ID：11423301
> 
> 赞同：4
> 
> 时间：2012-07-10T23:06:24.250
> 
> 标签：python, eclipse, osx-lion, pyside

我遇到了 PyDev 无法正确自动完成 pyside 的问题，我怀疑我错过了安装过程中的关键步骤。

那么，如何安装和配置全新的 OS X lion 安装来开发 pyside 呢？

**注意：**此问题不属于另一个堆栈站点。这就是程序员必须做的，才能让他的机器成形，以便使用 PyDev 开发 python PySide。系统管理员不太可能遇到此特定问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:06:24.857

我怀疑您遵循了各种分散的文档，并混合了不同的 python 解释器和 python 工具。此外，还需要完成下面的第 4 步，但没有多少指南提及。

要使系统处于与 linux 发行版一致的 PySide 开发状态，其中所有管道默认对齐，您必须执行以下步骤：

第 1 步：安装 Xcode、brew 和 xcode 命令行工具（您可以在 brew 网站上找到相关文档）。一旦你下载并安装了 Xcode 和命令行工具，下面的命令行应该安装 brew。

```
/usr/bin/ruby -e "$(/usr/bin/curl -fsSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)" 
```

检查一切是否正常`brew doctor`。

将用户安装的二进制文件的路径添加到`~/.profile`或`/etc/paths`使用文本编辑器 ( `export PATH=/usr/local/bin:$PATH`)。确保新路径在之前`$PATH`（或在顶部`/etc/paths`而不是之后）。

此外，安装后，您要确保从正确的目录中选择您使用的任何 python 管理实用程序。为此，添加`/usr/local/share/python`到您在上面指定的新路径旁边的路径中。这很重要，因为您希望 easy_install 能够正确运行并安装到您的 python 版本而不是 sox 版本，下面我们验证是否选择了正确的项目。

第二步：使用brew安装python2.7.*

```
brew install readline sqlite gdbm pkg-config
brew install python --framework --universal 
```

第 3 步：验证 python 二进制文件和 easy_install 二进制文件是否在正确的目录中。你通过使用[`which`而不是`whereis`](https://superuser.com/questions/430002/whereis-and-which-return-different-paths-in-mac-os-x)做到这一点。

第 4 步：由于 OSX 具有时髦的框架概念，因此对于库管理，我们必须对事物进行符号链接，以便其他工具（例如 eclipse）能够正确地自动配置。

```
cd /Library/Frameworks/Python.framework/Versions
sudo rm Current
sudo ln -s /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/Current
# following might not be needed or advised (see discussion below).
cd /System/Library/Frameworks/Python.framework/Versions
sudo rm Current
sudo ln -s /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/Current 
```

第 5 步：使用 brew ( ) 安装 pyside `brew install pydev`。这也将 Qt4 作为依赖项安装。

第 6 步：[安装 Eclipse 和 PyDev](http://pydev.org/manual_101_install.html)

第七步：配置eclipse。不要自动配置，手动添加新的解释器并`/usr/local/bin/python`作为 python 路径提供。它应该自动拾取库。还要添加`PySide`到内置插件中，因为 PySide 自动完成需要主动内省，而不是静态代码分析。

第八步：安装点子`easy_install install pip`

如果您使用`pip`或`brew`获取更多 python 代码，您应该将内容导入正确的目录。直到山狮出现并毁了你的一天：D

**注意自我**

我现在知道，与 windows .net 或 C/C++ (CRT) GAC 或 Linux 的 soname 或 java 的类路径相比，python 中的依赖管理并不容易。我们都以间接的迷宫结束。

# xamarin.android - 使用 Mono for Android 和 Java-Binding 时出现 Java.Lang.NoSuchFieldError

> ID：11423304
> 
> 赞同：0
> 
> 时间：2012-07-10T23:06:52.093
> 
> 标签：xamarin.android, java-binding

所以我正在尝试使用[Java-Binding的 Xamarin](http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_%28.jar%29) [Facebook Simple 示例。](https://github.com/xamarin/monodroid-samples/tree/master/Facebook)

面对最初的问题，我必须下载并编译最新的 Facebook for Android SDK（使用 Eclipse）并将其压缩为 Facebook java-bindings 项目。

但是，当单击注销按钮时，我收到此错误：

```
Java.Lang.NoSuchFieldError: com.facebook.android.R$drawable.close
  at Android.Runtime.JNIEnv.CallVoidMethod (intptr,intptr,Android.Runtime.JValue[]) [0x00023] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.4-branch/74c352d0/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.g.cs:368
  at Com.Facebook.Android.Facebook.Authorize (Android.App.Activity,string[],Com.Facebook.Android.Facebook/IDialogListener) <IL 0x00095, 0x002af>
  at Com.Facebook.Android.LoginButton/ButtonOnClickListener.OnClick (Android.Views.View) [0x00051] in C:\Users\magnus\Downloads\xamarin-monodroid-samples-7e2c105\xamarin-monodroid-samples-7e2c105\Facebook\samples\simple\simple\Example.cs:140
  at Android.Views.View/IOnClickListenerInvoker.n_OnClick_Landroid_view_View_ (intptr,intptr,intptr) [0x00010] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.4-branch/74c352d0/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Android.Views.View.cs:600
  at (wrapper dynamic-method) object.9681ec74-91e4-4ca3-93b5-489e6e022fb2 (intptr,intptr,intptr) <IL 0x00012, 0x0001b>

  --- End of managed exception stack trace ---
  java.lang.NoSuchFieldError: com.facebook.android.R$drawable.close
    at com.facebook.android.FbDialog.createCrossImage(FbDialog.java:106)
    at com.facebook.android.FbDialog.onCreate(FbDialog.java:81)
    at android.app.Dialog.dispatchOnCreate(Dialog.java:307)
    at android.app.Dialog.show(Dialog.java:225)
    at com.facebook.android.Facebook.dialog(Facebook.java:814)
    at com.facebook.android.Facebook.startDialogAuth(Facebook.java:343)
    at com.facebook.android.Facebook.authorize(Facebook.java:206)
    at com.facebook.android.Facebook.authorize(Facebook.java:125)
    at com.facebook.android.LoginButton_ButtonOnClickListener.n_onClick(Native Method)
    at com.facebook.android.LoginButton_ButtonOnClickListener.onClick(LoginButton_ButtonOnClickListener.java:36)
    at android.view.View.performClick(View.java:2485)
    at android.view.View$PerformClick.run(View.java:9080)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3683)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method) 
```

在 Eclipse Java 项目中使用完全相同的 JAR 就可以了。
似乎该`R$drawable.close`资源丢失了，但它存在于 Zip 文件中。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:33:20.007

啊，是的，这个问题。这有点让人头疼，但是如果您查看 java 代码，facebook 对话框的关闭按钮已在代码中设置。因此，当您的应用程序编译时，它找不到关闭按钮的 ID。

解决此问题的方法是更改`FBDialog.java`​​文件以某种方式获取在 Resource.Designer.cs 文件中生成的资源的关闭`integer`ID。

```
private void createCrossImage(int value) {
    mCrossImage = new ImageView(getContext());
    // Dismiss the dialog when user click on the 'x'
    mCrossImage.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mListener.onCancel();
            FbDialog.this.dismiss();
        }
    });
    Drawable crossDrawable = getContext().getResources().getDrawable(value);
    mCrossImage.setImageDrawable(crossDrawable);
    /* 'x' should not be visible while webview is loading
     * make it visible only after webview has fully loaded
    */
    mCrossImage.setVisibility(View.INVISIBLE);
} 
```

我修改了 java 代码并重新编译了 .jar 文件，这样我就可以`int`从我的文件中传递值，`Resources`这样我就不必担心它无法找到该特定图像的 id。

# ruby-on-rails - 在 Procfile 中启动多个工作人员（开发环境与 Heroku）

> ID：11423307
> 
> 赞同：5
> 
> 时间：2012-07-10T23:07:02.580
> 
> 标签：ruby-on-rails, heroku, delayed-job, foreman

我有一个简单的 Procfile，内容如下：

```
web: bundle exec rails server thin -p $PORT
worker: bundle exec rake jobs:work 
```

在 Heroku 上，这将启动 N 个工作任务，其中 N 是我将其缩放到的任何值。

在我的开发系统上，

```
$ foreman start 
```

只会启动一项工作任务。如果我想启动三个工作人员，我需要一个 Procfile，如下所示：

```
web: bundle exec rails server thin -p $PORT
worker: bundle exec rake jobs:work
worker: bundle exec rake jobs:work
worker: bundle exec rake jobs:work 
```

这是一个有点迂腐的问题，但是如果我希望我的开发环境表现得像我的 Heroku 环境，那么启动 N 个工作任务的最佳方式是什么？是创建（例如） Procfile_local 并通过它使用它的批准方式`foreman -f Procfile_local`吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T00:39:31.703

啊。谁会猜到有[foreman 的在线手册页](https://ddollar.github.io/foreman/)？;)

```
foreman start --concurrency="web=0,worker=6" 
```

把戏做得很好。无需单独的 Procfile。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-23T22:40:25.283

最新的工头已将该选项重命名为`--formation`.

所以这是：

```
foreman start --formation="web=1,worker=2" 
```

[来源](https://github.com/ddollar/foreman/blob/master/lib/foreman/cli.rb)

# google-app-engine - JDO Appengine 范例

> ID：11423309
> 
> 赞同：0
> 
> 时间：2012-07-10T23:07:37.663
> 
> 标签：google-app-engine, jdo

我刚刚开始涉足谷歌猿引擎。现在我正在使用 JDO 和数据存储来持久化我的数据。到目前为止非常酷，我的大部分工作都按我想要的方式工作。但是，我有一些标准练习题。我的直觉告诉我，我做出的几个设计选择即使不是完全糟糕也不是最好的。

你通常有一个“包装器”类型的类来处理每个持久对象的获取、更新、插入和删除吗？（这感觉有点矫枉过正）

我不对 Query.execute 进行任何类型检查？（这看起来确实是错误的）

我所有的类都在每个对象中使用 IDGeneratorStrategy.IDENTITY，我猜这些对象可能在基类中？

正如我所说，我刚刚开始涉足这个问题，如上述问题所示，但任何输入或链接将不胜感激。仅供参考，我的最终结果是使用应用程序引擎作为 android 应用程序的数据存储。然而，我对 appengine 的了解越多，我认为我可以将它用于更多的事情，而不仅仅是为我的 android 应用程序存储数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:28:47.047

*Wrapper 类型：*不，你为什么要这样做？你使用对你的应用程序有意义的东西，如果有些东西变得笨拙，你就重新设计它。所有应用程序都不同。

*Query.execute 上的类型检查：* JDO 实现检查传入的数据类型，您还可以进一步使用 DataNucleus JDO Typesafe 查询（在某些时候可能是 JDO3.2 的一部分）。为此，您需要 GAE JDO 插件的 v2

*基类的 IDENTITY 策略部分：*不建议这样做……将其作为基类意味着所有对象的所有 id 都是通用的（即都在同一继承树中），并且所有 id 值都来自同一来源。最好有基于角色的类。

# emulation - 模拟嵌入式设备的困难？

> ID：11423312
> 
> 赞同：0
> 
> 时间：2012-07-10T23:07:50.900
> 
> 标签：emulation, virtual-machine, embedded-linux, qemu

我只是不知道从哪里开始，对模拟设备一无所知，但我有一个嵌入式 linux 设备，我需要看看是否可以使用 Virtual Box 或 Qemu 来模拟它。

我不知道 linux 的版本或它运行的硬件。

有些问题如果能得到解答，那就太好了。

如果我能够打开设备并找出处理器和其他外围设备等硬件，我是否能够模拟硬件？

如果我可以使整个嵌入式内存幻像，我可以用正确的配置启动它吗？

我知道它使用 Redboot 和某种形式的 linux，它可能是 Matsushita 处理器，是否可以模拟该处理器？

你认为我应该从哪里开始？例如用更简单的设备处理类似的项目？或者你们会建议的任何参考资料？

正如我之前所说，我对仿真一无所知，感谢您的帮助。

编辑：感谢克里斯指出方向，为 I\O 使用模拟器层。

更多问题：

我有另一个设备，它是运行某种形式的嵌入式 linux 的嵌入式触摸屏，想知道是否也可以使用来自鼠标的触摸信号来模拟系统？只需要一个是或否，因为模拟屏幕上将出现的内容的概念仍然让我无法使用 linux。

# c - CMake交叉编译：工具链文件中的C标志被忽略

> ID：11423313
> 
> 赞同：26
> 
> 时间：2012-07-10T23:07:56.527
> 
> 标签：c, cmake, cross-compiling, flags

我使用 cmake 进行交叉编译。在我的工具链文件中有一行

```
SET(CMAKE_C_FLAGS "-std=gnu99") 
```

此变量未在 CMakeLists.txt 中再次设置。

当我运行`cmake -DCMAKE_TOOLCHAIN_FILE=toolchain.cmake ..`此标志时，将被忽略。

更详细地说： 的行`flags.cmake`显示一个空`C_FLAGS =`行。但在`CMakeOutput.log`我可以找到一条线`Build flags: -std=gnu99`。

我发现第二次运行`cmake ..`（无论是否指定工具链文件都相同）解决了这个问题。

但是为什么我第一次运行 cmake 时没有设置它？

编辑：添加了 MNWE

**CMakeLists.txt：**

```
cmake_minimum_required(VERSION 2.6)
project(myproject)

SET(files src/main.c)

add_executable(myexec ${files}) 
```

**avr.cmake：**

```
SET(CMAKE_SYSTEM_NAME Generic)

SET(CMAKE_C_COMPILER avr-gcc)

SET(CMAKE_C_FLAGS "-std=gnu99") 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-18T07:49:46.507

我通过更换线路找到了一个临时解决方案

```
SET(CMAKE_C_FLAGS "-std=gnu99") 
```

经过

```
SET(CMAKE_C_FLAGS "-std=gnu99" CACHE STRING "" FORCE) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-05-13T13:58:00.797

我只是想添加一些背景信息（例如在这里讨论[如何为每个工具链设置 cmake_c/xx_flags？](http://www.cmake.org/pipermail/cmake/2012-January/048429.html)）。

简而言之，这些`CMAKE_<LANG>_FLAGS`变量被设计缓存在`CMake<Lang>Information.cmake`脚本中（这意味着您可以在配置步骤之后在 CMake 的 GUI 应用程序中更改它们）。

所以你必须 - 如果将它们设置在[工具链](http://www.vtk.org/Wiki/CMake_Cross_Compiling#The_toolchain_file)文件中 - 首先将它们放入缓存中。CMake 自己的脚本（在 Toolchain 文件之后执行）没有附带`FORCE`，因此不会再次覆盖它。

查看 CMakeCInformation.cmake（来自 share\cmake-2.8\Modules）：

```
set(CMAKE_C_FLAGS_INIT "$ENV{CFLAGS} ${CMAKE_C_FLAGS_INIT}")
# avoid just having a space as the initial value for the cache
if(CMAKE_C_FLAGS_INIT STREQUAL " ")
  set(CMAKE_C_FLAGS_INIT)
endif()
set (CMAKE_C_FLAGS "${CMAKE_C_FLAGS_INIT}" CACHE STRING
     "Flags used by the compiler during all build types.") 
```

正如你所看到的，官方的做法是使用`CMAKE_C_FLAGS_INIT`注入额外的标志。存在的问题是，工具链文件中的后续更改将无法识别（缓存不会被覆盖，见上文）。

考虑到所有这些，您的临时解决方案是正确的选择。可以肯定的是——因为工具链文件在配置/生成过程中被解析了两次——你甚至可以在你的工具链文件中`UNSET`设置之前添加一个调用：`CMAKE_C_FLAGS`

```
UNSET(CMAKE_C_FLAGS CACHE)
SET(CMAKE_C_FLAGS "-std=gnu99" CACHE STRING "" FORCE) 
```

另一个经常找到的解决方案是使用类似的东西：

```
add_definitions(" -std=gnu99") 
```

注入编译标志（但这不是构建配置感知的，因为变量定义是）。另请参阅[CMake clang 和 c++0x](https://stackoverflow.com/questions/8938805/cmake-clang-and-c0x)

使用 CMake 2.8.12 引入了新命令，因此您可以这样做（未经测试，只是为了展示可能性）：

```
add_compile_options("$<$<CONFIG:RELASE>:-std=gnu99>")
add_compile_options("$<$<CONFIG:DEBUG>:-std=gnu99 -g3>") 
```

请参阅[在 CMake 中设置通用编译标志的现代方法是什么？](https://stackoverflow.com/questions/23995019/what-is-the-modern-method-for-setting-general-compile-flags-in-cmake)和[CMake 生成器表达式，区分 C/C++ 代码](https://stackoverflow.com/questions/25525047/cmake-generator-expression-differentiate-c-c-code)以获取更多信息。

# ruby - Ruby net/sftp 远程读取文件并保存到数据库，得到错误 StatusException (4, "failure")

> ID：11423315
> 
> 赞同：0
> 
> 时间：2012-07-10T23:08:13.147
> 
> 标签：ruby, file, gets, net-sftp

我正在尝试从远程 sftp 站点下载 xml，将文件内容读入 REXML 并将数据保存到数据库。到目前为止，代码可以读取文件，并且 f.gets 行失败并出现错误：

```
/usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:846:in `wait_for': Net::SFTP::StatusException (4, "failure") (Net::SFTP::StatusException)
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:257:in `read!'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/operations/file.rb:162:in `fill'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/operations/file.rb:100:in `block in gets'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/operations/file.rb:93:in `loop'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/operations/file.rb:93:in `gets'
        from ./test.rb:10:in `block (3 levels) in <main>'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/operations/file_factory.rb:45:in `open'
        from ./test.rb:9:in `block (2 levels) in <main>'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/operations/dir.rb:33:in `block in foreach'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/operations/dir.rb:33:in `each'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/operations/dir.rb:33:in `foreach'
        from ./test.rb:8:in `block in <main>'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:939:in `call'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:939:in `block in do_version'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:939:in `each'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:939:in `do_version'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:909:in `when_channel_polled'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/connection/channel.rb:311:in `call'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/connection/channel.rb:311:in `process'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/connection/session.rb:214:in `block in preprocess'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/connection/session.rb:214:in `each'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/connection/session.rb:214:in `preprocess'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/connection/session.rb:197:in `process'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/connection/session.rb:161:in `block in loop'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/connection/session.rb:161:in `loop'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/connection/session.rb:161:in `loop'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:802:in `loop'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:787:in `connect!'
        from /usr/local/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp.rb:32:in `start'
        from ./test.rb:7:in `<main>' 
```

这是我的代码：

```
#!/usr/bin/ruby

require 'rubygems'
require 'net/sftp'
require 'rexml/document'

Net::SFTP.start('some.example.host','myuser',:password => 'fake') do |sftp|
    sftp.dir.foreach("/path/to/mydir/") do |xml|
        sftp.file.open("/path/to/mydir/"+xml.name) do |f|
            puts f.gets # < THIS BREAKS IT
        end
    end  
end 
```

代码很脏，现在是一个测试。我希望读取远程目录中的所有文件并打印每个文件的第一行。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:25:56.280

我认为您正在寻找的是：

```
sftp.download!("/path/to/remote", "/path/to/local") 
```

或这个

```
 data = sftp.download!("/path/to/remote") 
```

从文档中得到这个：http: [//net-ssh.rubyforge.org/sftp/v2/api/](http://net-ssh.rubyforge.org/sftp/v2/api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T20:30:44.787

当我尝试访问 SFTP 用户无权访问的文件时，我收到了类似的错误。

```
Net::SFTP::StatusException: Net::SFTP::StatusException
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:846:in `wait_for'
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/net-sftp-2.0.5/lib/net/sftp/session.rb:561:in `stat!'
    from (irb):80
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/commands/console.rb:47:in `start'
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/commands/console.rb:8:in `start'
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

# java - Java Applet 类文件

> ID：11423317
> 
> 赞同：0
> 
> 时间：2012-07-10T23:08:23.073
> 
> 标签：java, class, applet

我正在尝试为我的中级 Java 课程做作业。我应该编写这个小程序并提交 .java、.class 和 .html 文件。

我去了 .html 文件，看看我到目前为止写的内容是否会显示在网页上，但现在它确实出现了。我似乎没有 .class 文件。这是我的代码。我正在使用 NetBeans。

有人可以告诉我如何将 .class 文件放入我的文件夹中。

```
/*
 * Curtis Sizemore
 * IT 259 - Intermediate Java
 * Unit 8
 * Working with Applets
 * I attest that this is a product of my own creation.
 * 
 */
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JTextField;

/**
 *
 * @author Curtis
 */
public class JDivide extends JApplet implements ActionListener
{
JTextField numer = new JTextField();
JTextField denom = new JTextField();
JLabel num = new JLabel("Numerator: ");
JLabel den = new JLabel("Denominator: ");
JLabel result = new JLabel();
JButton solve = new JButton("Click Me to Solve!");
Container con = getContentPane();

@Override
public void init()
{
    con.setLayout(new GridLayout(3,2));
    con.add(num);
    con.add(numer);
    con.add(den);
    con.add(denom);
}

@Override
public void actionPerformed(ActionEvent e) 
{
    throw new UnsupportedOperationException("Not supported yet.");
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T23:11:09.243

.class 文件是通过编译您的 .java 文件生成的。当您在 NetBeans 中编译和运行项目时，会创建 .class 文件并将其存储在项目目录中的某个文件夹中，可能称为“bin”或类似的名称。

尝试在您的项目目录中搜索任何名为 *.class 的内容，然后查看您找到的内容。

# php - 我正在创建一个生成 sql 查询的类。我做对了吗？

> ID：11423318
> 
> 赞同：2
> 
> 时间：2012-07-10T23:08:25.237
> 
> 标签：php, sql

我正在创建一个类（Datamap），它将帮助我简化模型类中的查询。基本上，这个类（Datamap）与我的 db 类一起使用。

以前对于我需要的模型中的插入语句。

```
$db->query("INSERT INTO test(id,name) VALUES("id","name")"); 
```

现在，有了 Datamap 类，它就像

```
$datamap->create("test","id=id&name=name"); 
```

下面是我创建的 Datamap 类的代码片段。

```
 function create($tablename,$variables){
    $id=0;
    $tbl = $this->creturnval($variables);
    $tblVal = $tbl[0];
    $tblData = $tbl[1];
    $this->db->execute("INSERT into $tablename($tblVal) VALUES($tblData);");
    $id = $this->db->lastInsertedId();
    return $id;
}

function creturnval($variables){
    $vars = explode("&",$variables);
    $count = sizeOf($vars);
    $tblVal = "";
    $tblData = "";
    for($i=0;$i<$count;$i++){
        $d = explode("=",$vars[$i]);
        $tblVal.= $d[0].",";
        $tblData.= "'".$d[1]."'".",";
    }
    $tblVal = rtrim($tblVal, ',');
    $tblData = rtrim($tblData, ',');
    $return[0] = $tblVal;
    $return[1] = $tblData;
    return $return;
} 
```

我关心的实际上是性能问题。以前在我的模型类中，如果我只是使用`$db->query()`，它似乎更快，因为我不必通过 2 个函数。

现在，为了进行插入，我需要解析变量、拆分 & 等，然后处理它。

我使用这个 Datamap 类的想法实际上是为了提供更多的可维护性和标准化。这是为了防止我所有的模型类在看起来不整洁的地方有 sql 语句。

您认为这会造成可能的性能问题吗？

PS：我正在使用我为我的 Web 应用程序构建的自己的框架

感谢所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:15:00.560

我认为编写 SQL 包装器的一种更常见的方式是这样的：

```
$item = $datamap->create("test");
$item->setValue("id", $id);
$item->setvalue("name", $name);
$item->update(); // push to database 
```

`$datamap->create();`返回一个将保存记录值的对象。`setValue`并`getValue`允许您访问它。`update`将新值推送到数据库。同样，您可以实现要获取的记录的 id 在`$datamap->get("test", 1234);`哪里。返回与 相同的对象，具有相同的功能。然后将导致 a而不是. 在插入一条记录后，您可以使用它来获取 id 并将其设置在对象中，以便您可以在该点之后对其执行 s。（对象必须跟踪它的“状态”）。`1234``get``create``update``UPDATE``INSERT``update``mysql_last_insert_id()``UPDATE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:38:53.243

经过搜索，我发现使用 Zend_db 会更好。将使用它。

# iphone - iphone设备令牌在MYSQL数据库中存储不止一次

> ID：11423320
> 
> 赞同：0
> 
> 时间：2012-07-10T23:08:50.400
> 
> 标签：iphone, ios, push-notification

我在 iOS 中提供 APNS，一切运行良好，问题是每次我运行应用程序时它都会给我设备令牌，然后将其存储在 MYSQL 数据库中。

我的问题是，在我在苹果商店分发应用程序后，这是否会一样，每次应用程序从用户那里获得午餐时，我是否都会收到设备令牌？

其他问题，如果应用程序已准备好分发，我是否必须更改开发推送 SSL 证书？如果是，是否是相同的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:35:05.650

每次启动应用程序时都会注册设备令牌，所以是的，如果它在您的`didRegisterForRemoteNotificationsWithDeviceToken`方法中发送到您的 MySQL 数据库，您将在每次启动时收到他们的设备令牌。这很重要，因为如果用户删除应用程序/禁用该应用程序的推送通知，在尝试向他们发送推送通知一定数量的不成功后，您可以将该设备令牌标记为“非活动”并将其从数据库中删除。（[Urban Airship](http://urbanairship.com/)可以帮助实现这个和所有其他 Push 功能，如果您在当前的实现中遇到更多问题，值得一看。）

确保您`UPDATE`在 MySQL 数据库中使用了一个或等效的命令，这样同一个令牌就不会多次添加到表中并填满它。或者，您可以将 Device Token 字段设为 Primary，这样尝试多次添加相同的令牌会失败，但这更麻烦。

至于开发推送证书，是的，您必须将其更改为生产证书。Dev 证书仅允许您连接到 Apple 的沙盒 APNS 服务器进行测试和调试。在提交到 App Store 之前，您必须更改为使用实时服务器的生产证书。该过程类似，您进入供应门户的应用程序 ID 部分，并在该应用程序的配置部分中配置和下载生产推送证书，方式与开发证书相同。

# c# - 如何对一组对象和结果进行分组以从方法中返回它们

> ID：11423324
> 
> 赞同：0
> 
> 时间：2012-07-10T23:09:21.990
> 
> 标签：c#

我目前正在构建一种方法来比较两个对象列表。列表本身包含对象

```
List<TradeFile> list1
List<TradeFile> list2 
```

当我比较完 list1 中的 TradeFile 对象和 list2 中的 TradeFile 对象后，我想返回一个包含所有比较的 TradeFile 和匹配状态的集合。所以它会是这样的：

TradeFile1、TradeFile2、True TradeFile1、TradeFile2、False

然后，我将使用此集合在我的流程中稍后进行报告。我应该考虑使用包含 tradefile 对象集合的字典之类的东西吗？

这可能有效，但真的感觉很乱：

```
Dictonary<Dictonary<TradeFile,TradeFile>,bool> 
```

编辑：根据下面的一些答案，这就是它最终的样子。

private List CompareTradeFileObject(List list1, List list2) { List results = new List(); 布尔匹配=假；

```
 if (list1.Count == list2.Count)
        {
            list1.Sort((x, y) => x.FormatName.CompareTo(y.FormatName));
            list2.Sort((x, y) => x.FormatName.CompareTo(y.FormatName));

            for (int i = 0; i < list1.Count; i++)
            {
                TradeFileCompare tf = new TradeFileCompare();
                tf.TradeFile1 = list1[i];
                tf.TradeFile2 = list2[i];

                if (list1[i].FileExtension == list2[i].FileExtension && list1[i].FormatName == list2[i].FormatName &&
                    list1[i].GroupName == list2[i].GroupName && list1[i].MasterAccountId == list2[i].MasterAccountId)
                {
                    matches = CompareTradeFileContents(list1[i].FileContents, list2[i].FileContents);
                    tf.IsMatch = matches;

                }
                else
                {
                    tf.IsMatch = matches;
                }

                results.Add(tf);
            }
        }
        else
        {
            matches = false;
        }

        return results;
    }

class TradeFileCompare
{
    public TradeFile TradeFile1 { get; set; }
    public TradeFile TradeFile2 { get; set; }
    public bool IsMatch { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:13:58.647

最干净的方法是为返回类型创建一个类并返回该类的列表。

或者您可以为此使用 Tuple 类：

```
List<Tuple<TradeFile, TradeFile, bool>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T23:44:23.910

```
void Main()
{
    var list1 = new List<TradeFile>(new [] {
        new TradeFile { Name = "TradeFile1", Data = "a" },
        new TradeFile { Name = "TradeFile2",  Data = "b" },
    });

    var list2 = new List<TradeFile>(new [] {
        new TradeFile { Name = "TradeFile4",  Data = "a" },
        new TradeFile { Name = "TradeFile5",  Data = "c" },
    });

    var query = from tradeFile1 in list1
                from tradeFile2 in list2
                select new TradeFileComparison(tradeFile1, tradeFile2);

    foreach (var item in query)
    {
        Console.WriteLine(item.ToString());
    }
}

class TradeFile
{
    public string Name { get; set; }

    public string Data { get; set; }

    public bool Matches(TradeFile otherTradeFile)
    {
        return (this.Data == otherTradeFile.Data);
    }
}

class TradeFileComparison
{
    public TradeFileComparison(TradeFile tradeFile1, TradeFile tradeFile2)
    {
        this.TradeFile1 = tradeFile1;
        this.TradeFile2 = tradeFile2;
    }

    public TradeFile TradeFile1 { get; set; }

    public TradeFile TradeFile2 { get; set; }

    bool IsMatch { get { return this.TradeFile1.Matches(TradeFile2); } }

    public override string ToString()
    {
        return string.Format("{0}, {1}, {2}", 
            this.TradeFile1.Name, this.TradeFile2.Name, 
            this.IsMatch.ToString());
    }
} 
```

**输出：**

```
TradeFile1, TradeFile4, True
TradeFile1, TradeFile5, False
TradeFile2, TradeFile4, False
TradeFile2, TradeFile5, False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T23:42:42.613

如果交易文件有一个 id 你可以返回

```
 List<int, bool> 
```

int 是唯一的 id，bool 是如果它相等

# jboss - JBoss/EC2 上的 EHCache RMI 复制抛出 java.rmi.NoSuchObjectException: no such object in table

> ID：11423325
> 
> 赞同：2
> 
> 时间：2012-07-10T23:09:27.950
> 
> 标签：jboss, replication, rmi, ehcache

尝试在 Amazon EC2 上的 2 个 JBoss 4.2 服务器之间创建基于 EHCache RMI 的缓存复制。目前，这被设置为手动对等发现，从 Server2 到 Server1 的单向复制。

配置如下：

服务器 1

```
<cacheManagerPeerProviderFactory
   class="net.sf.ehcache.distribution.RMICacheManagerPeerProviderFactory"
   properties="peerDiscovery=manual"/>

<cacheManagerPeerListenerFactory
   class="net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory"
   properties="hostName=host1, port=40001,  
                     socketTimeoutMillis=3000"/>

<cache name="cache1"
        maxElementsInMemory="0"
        eternal="false"
        overflowToDisk="true"
        timeToIdleSeconds="600"
        timeToLiveSeconds="600"
        diskPersistent="true"
        diskExpiryThreadIntervalSeconds="60"
        statistics="true">
        <cacheEventListenerFactory
                          class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
                          properties="replicatePuts=false, replicateUpdates=false, 
                replicateRemovals=false"/>
</cache> 
```

服务器 2

```
<cacheManagerPeerProviderFactory
   class="net.sf.ehcache.distribution.RMICacheManagerPeerProviderFactory"
   properties="peerDiscovery=manual,
             rmiUrls=//host1:40001/cache1"/>

<cacheManagerPeerListenerFactory
   class="net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory"
   properties="hostName=host2, port=40002,  
                     socketTimeoutMillis=3000"/>

<cache name="cache1"
        maxElementsInMemory="0"
        eternal="false"
        overflowToDisk="false"
        timeToIdleSeconds="7200"
        timeToLiveSeconds="7200">
        <cacheEventListenerFactory
                          class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
                          properties="replicateAsynchronously=false"/>
    </cache> 
```

但是，当我将新元素放入 Server2 上的缓存时，它会引发以下异常：

```
Jul 10, 2012 3:25:37 PM net.sf.ehcache.distribution.RMISynchronousCacheReplicator replicatePutNotification
SEVERE: Exception on replication of putNotification. no such object in table. Continuing...
java.rmi.NoSuchObjectException: no such object in table
          at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
          at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
          at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
          at net.sf.ehcache.distribution.RMICachePeer_Stub.put(Unknown Source)
          at net.sf.ehcache.distribution.RMISynchronousCacheReplicator.replicatePutNotification(RMISynchronousCacheReplicator.java:149)
          at net.sf.ehcache.distribution.RMISynchronousCacheReplicator.notifyElementPut(RMISynchronousCacheReplicator.java:132)
          at net.sf.ehcache.event.RegisteredEventListeners.notifyListener(RegisteredEventListeners.java:294)
          at net.sf.ehcache.event.RegisteredEventListeners.invokeListener(RegisteredEventListeners.java:284)
          at net.sf.ehcache.event.RegisteredEventListeners.internalNotifyElementPut(RegisteredEventListeners.java:144)
          at net.sf.ehcache.event.RegisteredEventListeners.notifyElementPut(RegisteredEventListeners.java:122)
          at net.sf.ehcache.Cache.notifyPutInternalListeners(Cache.java:1515)
          at net.sf.ehcache.Cache.putInternal(Cache.java:1490)
          at net.sf.ehcache.Cache.put(Cache.java:1417)
          at net.sf.ehcache.Cache.put(Cache.java:1382) 
```

我还尝试将 Server2 作为独立的 Java 程序（使用与上图所示相同的 ehcache.xml）而不是 JBoss 服务器。但只要 Server1 是 JBoss 服务器，我就会看到这个异常。

如果我在同一主机上部署 Server1 和 Server2（JBoss 或 Java 程序），效果会很好。但是，一旦我将它们移到不同的主机上，它就会死在我身上。

任何帮助将不胜感激。谢谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:40:14.840

`java.rmi.NoSuchObjectException`表示存根引用的对象当前未导出。它必须在某个时间被导出，否则将没有存根。可能它已经被垃圾收集了，首先是 DGC，然后是本地 GC。您可以通过在静态变量中保留对远程对象（nb 不是存根）的引用来防止这种情况发生。但似乎相关的远程对象不是您的，而是他们的，在这种情况下，您需要找到他们的错误报告系统。

# performance - 使用“Frames”进行 Web 检查器分析：当时间轴中没有任何内容时查找性能问题的原因

> ID：11423330
> 
> 赞同：12
> 
> 时间：2012-07-10T23:10:02.710
> 
> 标签：performance, google-chrome, google-chrome-devtools, web-inspector

我刚刚观看了 Google I/O 会议[Jank Busters：构建高性能 Web 应用程序](https://developers.google.com/events/io/sessions/gooio2012/209/)，演讲者解释了如何在 Chrome Web 检查器时间轴中使用新的“框架”视图。

这是我在正在开发的页面上滚动时得到的示例记录：

![开发工具](../Images/a6f658146d4abf5489f8361b668b04ba.png)

如您所见，某些帧存在巨大延迟，但时间线中没有任何明显原因（黄色“Timer Fired”事件之间存在很大差距）。如何解决性能问题以持续提高帧速率？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-27T14:47:23.620

您的示例实际上看起来还不错。您的代码运行速度很快，并且浏览器只会以 60fps 的速度渲染，因此它会花费一些时间（最多 16 毫秒）等待下一个渲染周期。

这是 Chrome Dev Tools *Timeline*面板的*Frames*视图中的一个特别令人担忧的快照。

 *![](../Images/b5ce4912dad9f01e1b8c4bbba1c4740e.png)

根据[文档](https://developers.google.com/chrome-developer-tools/docs/timeline#frames_mode)：

*   灰色区域表示 DevTools 未检测到的活动，Chrome 团队努力使该区域尽可能小
*   清晰的区域表示显示刷新周期之间的空闲时间，这通常不是问题，尤其是当该区域达到 60fps 线时，因为这只是 Chrome 等待在显示器的 vsync 上传送帧

条形底部的极小黄色和绿色区域表明事件处理、绘制和合成都运行得非常快——快到足以落在指示 30fps 阈值的水平线之下，并且可能比大多数情况下的 60fps 阈值更快时间（线未显示。）

要了解更多信息，请打开开发工具选项并检查：

![](../Images/087b6985e18196dad3dbc5d9231fa856.png)

启用此功能后，您将在“记录”栏中看到灰色区域：

![](../Images/122844a80e017238421b9b8012ce25c0.png)

每个灰色区域显示渲染器线程被占用的时间段。如果您看到许多差距，那么浏览器可能受 GPU 限制。

Chrome 工程师 Nat Duca 在[这篇文章](https://plus.google.com/+NatDuca/posts/BvMgvdnBvaQ)中提供了更多信息：

> GPU 有界性通常来自两件事：
> 
> 1.  拥有 -webkit-filter，保留元素的 3D 属性。那些在 gpu 上吃掉的东西就像……嗯，饿了。
> 2.  有太多的大层。
> 
> 层？“显示复合图层边框”以查看它们。大多数人遇到麻烦的地方并不是层数，而是层的面积。
> 
> 经验法则：大多数计算机都设计为可以触摸主屏幕上的每个像素大约 4 次。举一个非常简单的例子，一台使用了 2 年的 MacBook Air 是为其 LCD 尺寸配置的。当您插入具有多个层的 30 英寸显示器时，它开始受到 GPU 的限制。
> 
> 为什么这很重要？[Handwaving,] 当我们绘制屏幕时，一个图层触摸一个像素一次。如果一个层是你的窗口的大小，例如你有一个宽度=100% 高度=100% 的div 和-webkit-transform: translateZ(0)，那么你触摸屏幕的每个像素一次。因此，计算图层的面积，如果超过显示器面积的 4 倍，您可能无法进入太空 [因为您受 GPU 限制]。
> 
> 对 gpu 有界性的一个很好的测试是在每个维度上将窗口大小缩小 1/2。如果事情继续缓慢，那么其他事情正在发生......如果事情变得更快，你可能会碰到 GPU。

就我而言（如最上面的图片所示），我仍在尝试找出导致灰色条的原因。代码没有改变，性能曾经很棒。可能是由于某种原因，较新的 Chrome 版本（今天我运行的是 31.0.1650.57 m）在这段代码中表现不佳。同样，灰色区域表示渲染线程正忙于处理未检测的代码，因此很难判断发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:49:16.687

我建议您使用[http://pagespeed.googlelabs.com](http://pagespeed.googlelabs.com)

它基本上会向您显示页面加载时发生的事情的完整详细信息，以便您知道在哪里工作......（我也认为在某些情况下可能会错过某些信息）

此外，您应该对页面进行内存分析，以查看某些对象需要多长时间才能加载到内存中。*

# c# - MVC 4 部分模型验证

> ID：11423331
> 
> 赞同：0
> 
> 时间：2012-07-10T23:10:37.567
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

我有一个带有数据注释的标准 EF 模型。我有两列。第一个是 ID，而另一个是布尔值。在数据库中，两者都不可为空。然而，它们都被标记为“隐藏”属性。这一切都适用于 UI，直到我将表单发布回服务器。

模型无法验证。我尝试了 Steven Sanderson 的建议来创建一个操作过滤器，但是它无法删除我没有返回到服务器进行验证的值。我最终恢复到以下我认为非常难看的内容：

```
try
{
    ModelState["LocationId"].Errors.Clear(); -- Really ugly!
    ModelState["IsEnabled"].Errors.Clear(); -- Seems really trashy to do it this way
    if (ModelState.IsValid)
    {
        location.IsEnabled = true; -- This will eventually move to my model definition
        _repo.InsertOrUpdate(location);
        _repo.Save();

        return RedirectToAction("Index");
    }
    return View();
}
catch (DataException ex)
{
    ModelState.AddModelError("dataError", ex);
    return View();
} 
```

是否有人对如何清理此问题或创建更好的解决方案有任何其他建议或想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:33:59.243

您可以使用视图模型并将您想要显示的数据映射/将用户输入从您的实体映射到您的视图模型。在发布后，您将验证视图模型上的输入数据，将其映射回实体并将其保存到您的数据库中。

另一种方法是从您的 ID 和布尔属性中删除`[Required]`数据注释，这种方式**不应**`ModelState.IsValid`返回false

# cpu-usage - BingBot 和百度蜘蛛不尊重 robots.txt

> ID：11423333
> 
> 赞同：6
> 
> 时间：2012-07-10T23:10:41.857
> 
> 标签：cpu-usage, robots.txt, bots

由于机器人淹没了我的网站，我的 CPU 使用率突然超过 400% 后，我创建了一个 robots.txt，并将该文件放在我的根目录中，例如“www.example.com/”：

```
User-agent: *
Disallow: / 
```

现在谷歌尊重这个文件，我的谷歌日志文件中不再出现。但是 BingBot 和百度蜘蛛仍然出现在我的日志中（而且很多）。

由于 CPU 使用率和带宽大幅增加，而且我的托管服务提供商即将暂停我的帐户，我首先删除了我的所有页面（以防有讨厌的脚本），上传干净的页面，通过 IP 地址阻止所有机器人.htaccess & 然后创建了 robots.txt 文件。

我到处搜索以确认我做了正确的步骤（尚未尝试 .htaccess 中的“重写”选项）。

任何人都可以确认我所做的应该完成这项工作吗？（自从我开始这个项目以来，我的 CPU 使用率在 6 天内下降到 120%，但至少阻止 IP 地址应该会将 CPU 使用率降低到我通常的 5-10%）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-01T11:16:16.493

如果这些是来自 Bingbot 和百度蜘蛛的合法蜘蛛，那么它们都应该按照给定的方式尊重您的 robots.txt 文件。但是，如果这些文件之前已被索引，他们可能需要一些时间才能将其拾取并开始对其采取行动——这可能就是这里的情况。

不适用于本例，但需要注意的是，Baiduspider 对 robots.txt 标准的解读在某些方面与其他主流 bot（即 Googlebot）略有不同。例如，虽然标准将`Disallow:`记录上的 URL 路径简单地定义为*前缀*，但百度蜘蛛只会匹配整个目录/路径名称。`http://example.com/private/`在给出指令时， Googlebot 将匹配 URL `Disallow: /priv`，Baiduspider 不会。

参考：
[http ://www.baidu.com/search/robots_english.html](http://www.baidu.com/search/robots_english.html)

# c - 整数上 htonl() 和 ntohl() 的相同输出

> ID：11423338
> 
> 赞同：16
> 
> 时间：2012-07-10T23:11:25.160
> 
> 标签：c, endianness

我在 little-endian [LE] 机器 [Linux，Intel 处理器] 上运行了以下程序。我无法解释下面代码片段中的 3 个输出。由于机器是 LE，所以 的值`a`存储为`0x78563412`。打印时，它显示其实际值。由于它是一台 LE 机器，我希望`ntohl()`它是一个 no-op 和 display `0x78563412`，它正在这样做。但是，我希望`0x12345678`第二个打印语句包含`htonl()`. 有人可以帮我理解为什么它们是一样的吗？

```
int main() 
{
    int a = 0x12345678; 

    printf("Original - 0x%x\n", (a)); 
    printf("Network - 0x%x\n", htonl(a)); 
    printf("Host - 0x%x\n", ntohl(a)); 

    return 0;
} 
```

输出：

```
Original - 0x12345678
Network - 0x78563412
Host - 0x78563412 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-10T23:15:15.023

> 由于它是一台 LE 机器，我希望`ntohl()`它是一个空操作

这就是错误。网络字节顺序是*big-endian*，主机字节顺序是 little-endian 。因此，两者都`ntohl`返回`htonl`其输入的字节交换版本。

记住，重点`htonl`是你可以在主机上取一个整数，然后写：

```
int i = htonl(a); 
```

结果是 的内存`i`，*当使用网络字节顺序解释时*，具有相同的值`a`。因此，如果您将 的对象表示写入`i`套接字并且另一端的读取器期望网络字节顺序中的 4 字节整数，它将读取 的值`a`。

> 并显示`0x78563412`

这是你打算写的吗？如果`ntohl`是一个无操作（或者更确切地说，一个标识函数），那么您的第三行必然会打印与您的第一行相同的内容，因为您将拥有`ntohl(a) == a`. 这就是在大端实现中发生的情况，您的程序会在其中打印：

```
Original - 0x12345678
Network - 0x12345678
Host - 0x12345678 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-10T23:15:38.717

`htonl`并且`ntohl`是完全相同的功能。他们应该满足`htonl(ntohl(x)) == x`。它们的命名不同仅用于文档（您明确表示您正在从主机转换为网络或其他方式，即使它是相同的）。因此，在 little-endian 机器上，它们都执行字节交换，而在 big-endian 机器上，它们都是无操作的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-10T23:13:40.353

因为您是`a`按值传递的，因此这些函数中的任何一个都不会更改它。

你正在打印什么`htonl()`并且`ntohl()`正在*返回*。

**编辑补充：**我错过了你认为没有操作的地方。它不是。两者都将在 LE 机器上做完全相同的事情。反转字节顺序。`ntohl()`期望你传递一个有序的网络字节`int`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T16:45:54.600

在您编写的程序中，`int a;` **您**知道其中`a`包含一个主机有序整数，但程序不知道这一点。您可以轻松地提供一个已包含网络顺序值的 int。当然，如果您对不按主机顺序的值使用任何算术运算符，如果网络顺序与主机顺序不同，则从网络的角度来看，结果将是不正确的。

但这并不是那么牵强，网络有序值通常在低级结构中完全保持这种方式，在发送之前或刚刚接收之后。

您的程序有什么问题是，当您调用时，`ntohl()`您承诺您提供的`ntohl()`功能`int`是以网络顺序存储在内存中的一些值。这就是合同。如果它不是真的，该功能将不会执行您所期望的，这就是您所看到的。

正如其他在大多数系统（大或小但不是愚蠢的字节序）上所解释的那样，这两个函数通常是相同的，要么是字节反转，要么是无操作。

# exe - 将 ghostscript 输出文件直接发送到 ruby 可执行文件中

> ID：11423340
> 
> 赞同：0
> 
> 时间：2012-07-10T23:11:27.693
> 
> 标签：exe, stdin, ghostscript

我正在尝试使用ghostscript将Windows 7标准输入转换为pdf，而不是生成本地文件，我想将此文件直接发送到我的exe文件。

我正在做这个

```
C:\Programas\gs\gs9.05\bin\gswin64c.exe -IC:\Programas\gs\gs9.05\lib;C:\Programas\gs\fonts -sDEVICE=pdfwrite -r300 -dNOPAUSE -dSAFER -sPAPERSIZE=a4 -sOutputFile=%%pipe%%"C:\Projectos\Online File Manager\Codigo\Ruby\shoes apps\FileCreate7.exe" 
```

（我同时把exe放在一个cmd文件中）

我收到错误：

```
GPL Ghostscript 9.05: **** Could not open the file %pipe%c:\tempRep\filecreate.cmd .
Unrecoverable error: ioerror in setdevice
Operand stack:
    --nostringval-- 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:09:21.823

基本上，你不能这样做。pdfwrite 设备将输出流打开为“可搜索”，这显然与管道或其他类似结构不兼容。您需要有一个本地文件。

# sql - datediff（分钟，'23:30'，'24:00'）错误

> ID：11423347
> 
> 赞同：0
> 
> 时间：2012-07-10T23:12:33.863
> 
> 标签：sql

在 SQL 2008 中，为什么在执行此操作时会出现错误：

```
select datediff (minute, '23:30','24:00') 
```

错误是：

```
Msg 241, Level 16, State 1, Line 1
Conversion failed when converting date and/or time from character string. 
```

就算我改成`24:00`为什么`00:00`结果会这样说`-1410`？

请问我可以使用哪些替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:16:19.247

如果您正在寻找 '23:30' 和 '24:00' 之间的区别 - 从技术上讲是第二天，那么您将使用

```
select datediff (minute, '2012-07-10 23:30','2012-07-11 00:00') 
```

当您使用：

```
select datediff (minute, '23:30','00:00') 
```

'00:00' 被解释为同一天，这就是你得到的原因`-1410`。一天中总共有1440分钟减去30分钟作为差值。`DATEDIFF`功能是：

```
DATEDIFF ( datepart , startdate , enddate ) 
```

如果您的结束日期“00:00”早于您的开始日期，那么您将得到一个负数。

编辑：

根据您的评论，您将在表格中使用以下内容，然后使用`CASE`围绕 的语句`endtime`为其添加一天：

```
select datediff(minute
                , starttime
                , case 
                when endtime = '00:00' 
                then dateadd(d, 1, endtime)
                else endtime END)
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4e6ee/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:17:26.543

结果显示为 -1410，因为从 23:00 到前一个 00:00 之间有 1,410 分钟。

# database - Postgres维护的正确顺序

> ID：11423356
> 
> 赞同：3
> 
> 时间：2012-07-10T23:14:31.687
> 
> 标签：database, postgresql, indexing, maintenance, vacuum

我有一张大表，因为很多行经常更新，所以索引膨胀。我也在删除大量行。

为了恢复磁盘空间，执行以下任务的正确顺序是什么？

*   真空，将死元组标记为空闲以供数据库重用，不会将空间返回给系统。
*   Vacuum Full，重写表以减少表膨胀，将空间返回给系统。
*   重新索引，重写索引以减少索引膨胀，将空间返回给系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:26:51.430

由于 PostgreSQL 9.0 a`VACUUM FULL`应该以最佳方式返回磁盘空间（就像[CLUSTER](http://www.postgresql.org/docs/current/interactive/sql-cluster.html)一样）。[我在此处](http://www.postgresql.org/docs/current/interactive/release-9-0.html)引用当前手册中的 9.0 版本说明：

> VACUUM FULL 的新实现。此命令现在重写整个表和索引，而不是将单个行移动到紧凑空间。在大多数情况下，它的速度要快得多，并且不再导致索引膨胀。

请注意，通常不需要甚至不建议运行`VACUUM FULL`. 如果您从数据页面中删除所有热更新等的摆动空间，它可能会减慢更新速度。

# javascript - 获取所选元素的位置，而不是 DOM 中元素的索引

> ID：11423357
> 
> 赞同：4
> 
> 时间：2012-07-10T23:14:33.540
> 
> 标签：javascript, jquery

```
<div>
  <h3>Heading one</h3>
  <h3>Heading two</h3>
  <h4>heading caption</h4>
  <h3>Heading three</h3>
</div>​ 
```

我想获取元素在 jQuery 选择中的位置，而不是它在 DOM 中的索引。

目前，如果我`alert($("h3").eq(2).index());`得到“3”，我想要“2”。

[http://jsfiddle.net/4QmEF/](http://jsfiddle.net/4QmEF/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T23:17:59.987

将您的 index() 传递给选择器：

```
alert($("h3").eq(2).index("h3")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-30T04:42:22.973

```
<div>
   <h3>Heading one</h3>
   <h3>Heading two</h3>
   <h4>heading caption</h4>
   <h3>Heading three</h3>
</div>

<script type="text/javascript">
$(document).ready(function(){ 
    $("div").children().each(function(){  
        $(this).click(function(){
            alert($(this).context.innerHTML);
        });  
    });
});
</script>` 
```

# sql - 使用 MAX 进行 SQL 连接

> ID：11423360
> 
> 赞同：0
> 
> 时间：2012-07-10T23:14:47.763
> 
> 标签：sql

我有两个表（serverlogdetail a，serverlogid b），用于跟踪用户活动用户可以在一天内多次登录不同的应用程序（a.entrydate）到不同的应用程序（b.appname）对于用户拥有的所有应用程序访问 我需要返回他/她最后一次登录的列表。

```
SELECT  b.appname ,max(to_char(a.entrydate)),  a.username,  a.msgnumber
  FROM serverlogdetail a, serverlogid b

  WHERE a.msgnumber = 1020055 
  AND A.entrydate BETWEEN (SYSDATE-90) AND SYSDATE

GROUP BY b.appname, a.dbname, a.username,a.msgnumber, a.entrydate
ORDER BY b.appname, max(to_char(a.entrydate)) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:21:38.440

```
SELECT  b.appname , a.username,  a.msgnumber, max(to_char(a.entrydate))
FROM serverlogdetail a, serverlogid b

WHERE a.msgnumber = 1020055 
AND A.entrydate BETWEEN (SYSDATE-90) AND SYSDATE
AND A.something = B.something           -- the condition you're missing!!!

GROUP BY b.appname, a.username, a.msgnumber
ORDER BY b.appname, max(to_char(a.entrydate)) 
```

# java - Glassfish（2.1）JSF（1.2）设置404页面

> ID：11423367
> 
> 赞同：1
> 
> 时间：2012-07-10T23:15:11.960
> 
> 标签：java, web-applications, glassfish, http-status-code-404

我继承了一个在 glassfish 2.1 上运行的 JSF 1.2 应用程序。目前，如果找不到页面，则会显示静态 HTML 页面。我想更改此 HTML 页面的位置，但我不确定在哪里指定页面位置以显示是否找不到页面。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:59:57.487

你看对了地方。virtual-server 属性更改完整实例的 X0X 页面。单个应用程序的错误页面。两者都应该工作。如果没有，您可能会遇到错误。那么在用户邮件列表中询问将是一个好主意...... [http://java.net/projects/glassfish/lists/users/archive](http://java.net/projects/glassfish/lists/users/archive)

*   米

# matplotlib - matplotlib 图例圆形标记

> ID：11423369
> 
> 赞同：12
> 
> 时间：2012-07-10T23:15:29.443
> 
> 标签：matplotlib, geometry, legend

我正在使用代理艺术家（http://matplotlib.sourceforge.net/users/legend_guide.html#using-proxy-artist）为散点图制作图例，并尝试制作圆形标记。

这是我的代码：

```
legend([Circle((0,0), fc='g')], ["Green Circle"]) 
```

但是当我绘制它时，图例没有圆圈而是显示一个矩形......

如何让图例具有圆形标记？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-10T23:39:46.913

如果您要寻找的只是图例中的圆形标记（而不是严格使用代理艺术家），那么我建议您尝试以下操作：

```
line1 = Line2D(range(1), range(1), color="white", marker='o', markerfacecolor="red")
line2 = Line2D(range(1), range(1), color="white", marker='o',markerfacecolor="green")
line3 = Line2D(range(1), range(1), color="white", marker='o',markersize=5, markerfacecolor="slategray")
line4 = Line2D(range(1), range(1), color="white", marker='o',markersize=10,markerfacecolor="slategray")
plt.legend((line1,line2,line3,line4),('Thing 1','Thing 2', 'Thing 3', 'Thing 4'),numpoints=1, loc=1) 
```

这向您显示了不同颜色和大小的圆圈，其中绘制的 2D 线是白色的（因此`color="white"`）。如果您不想填充圆圈，例如，设置`markeredgecolor="green"`和`markerfacecolor="white"`。

**进一步的调整**

*   如果您没有白色背景，或者线条与背景中的网格相交，`color="white"`仍会显示线条。`linewidth=0`将完全隐藏该行。
*   使用`handletextpad`关键字参数 for`plt.legend`减少圆圈和标签之间的空间。该值也可以是负数，例如`handletextpad=-0.3`。
*   如果您使用`seaborn`调色板，您可以通过索引调色板来设置各个标记面颜色。例如`markerfacecolor=sns.color_palette("cubehelix", 3)[0]`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T15:37:41.943

@punkkat 添加要添加到图例的补丁（即圆形）时，添加的不是补丁本身，而是创建了一个具有完全相同属性（颜色、阴影、alpha 等）的新矩形补丁。给定补丁。因此，无论传入的形状如何，结果都将是图例中的方形补丁。

@cosmosis 给出的简单解决方案是将线条实例传递给可以支持任意标记的图例，并且由于标记的形状没有限制，因此您可以传递的形状没有限制穿上传奇。

# ruby - 确定一个罗马化的名字是否是日语，最好是 Ruby

> ID：11423374
> 
> 赞同：1
> 
> 时间：2012-07-10T23:16:20.713
> 
> 标签：ruby, nlp, cjk

我如何确定一个罗马化的名字是否可能或不太可能是一个日本名字？

```
"Yukihiro Matsumoto".likely_to_be_japanese? # => true
"John Smith".likely_to_be_japanese? # => false 
```

理想情况下，我还想输入自由格式的文本，并检测文本中是否有可能是日语的名称、不太可能是日语的名称，或者其中没有任何名称。最好忽略误报。

```
"call Koichi on (02) 5550 5555".has_japanese_name_in_it? # => true
"call John on (02) 5550 5556".has_non_japanese_name_in_it? # => true
"utility bill to be shared equally".has_non_japanese_name_in_it? => false 
```

是否有任何库可以帮助我做到这一点，最好是在 Ruby 中？还是我必须找到一个包含日语和非日语名称的语料库并构建自己的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:28:38.173

你可以使用谷歌翻译之类的东西。将 matsumoto 从英语翻译成日语会给你一个 2 kanji 结果（matsu + moto），因为它是日语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:13:22.883

如果你想获得真正的花哨，请使用[这个](http://stanfordparser.rubyforge.org/)连接到斯坦福解析器，并破解你的句子和名称。

您正在寻找 NNP，因此您的输出如下所示

```
Parsing [sent. 1 len. 5]: Matsumoto was a nice guy
(ROOT
  (S
    (NP (NNP Matsumoto))
    (VP (VBD was)
      (NP (DT a) (JJ nice) (NN guy))))) 
```

然后你会使用一些字典查找日语部分

但是，实际上，您可能会很好地拆分字符串并自己进行字典查找。

# html - HTML，div 不向左浮动

> ID：11423379
> 
> 赞同：0
> 
> 时间：2012-07-10T23:17:09.570
> 
> 标签：html, css-float

我的 div 根本不会向左浮动，它们在屏幕上垂直排列。我希望它们紧挨着。我感觉 max-width 的东西不起作用。我曾经有过这个工作，但显然不再工作了。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>TV Shows</title>

<style type="text/css">
    .coverGroup {
    display: block;
    max-width: 297px;
    height: 179px;
    float: left;
    overflow: hidden;
    }
    .coverImage img {
    border:5px solid #ddd;
    }
    .coverImage:hover img {
    border: 5px solid #555; 
    }
</style>

</head>
<body>

<span style="font-size:20px;">Click on the show of your choice</span>
<br /> 

<div class="coverImage">
    <a href="/1/american-dad!" title="American Dad!">
        <img height="179" width="287" src="/1/wp-content/uploads/2012/07/Episodes1.png"/>
    </a>
</div>

<div class="coverImage">
  <a href="/1/family-guy" title="Family Guy">
  <img height="179"  width="287" src="/1/wp-content/uploads/2012/07/500px-Family_Guy_Logo.svg1_-300x179.png"/>
    </a>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:23:46.460

您忘记为 div 使用正确的类。类coverGroup 具有浮动属性，但您使用coverImage。

你可以这样做：

```
<div class="coverImage coverGroup"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:23:15.290

利用

```
<div class="coverImage coverGroup"> 
```

代替

```
<div class="coverImage"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T23:25:15.523

您已将样式应用于 .coverGroup 类，但该类并未在代码中的任何地方使用。如果您将 .coverGroup 重命名为 .coverImage 将起作用。

# c++ - 为什么允许冗余类名限定符？

> ID：11423380
> 
> 赞同：10
> 
> 时间：2012-07-10T23:17:11.780
> 
> 标签：c++, language-lawyer

我遇到了一些这样的代码：

```
struct A {
    A() {}
    A(int) {}
};

struct B : A {
    void init(int i);
};

void B::init(int i) {
    A::A(i); // what is this?
}

int main() {
    B b;
    b.init(2);
} 
```

这使用 VC11 beta 编译和运行，没有 /W4 的错误或警告。

明显的意图是调用 B::init 来重新初始化 B 的 A 基子对象。我相信它实际上解析为一个名为`i`type的新变量的变量声明`A`。使用 clang 编译会产生诊断：

```
ConsoleApplication1.cpp:11:14: warning: declaration shadows a local variable
        A::A(i);
             ^
ConsoleApplication1.cpp:10:22: note: previous declaration is here
    void B::init(int i) {
                     ^
ConsoleApplication1.cpp:11:14: error: redefinition of 'i' with a different type
        A::A(i);
             ^
ConsoleApplication1.cpp:10:22: note: previous definition is here
    void B::init(int i) {
                     ^ 
```

可以用多余的类限定来引用该类型似乎很奇怪。

此外，`A::A(i)`VS11 和 clang/gcc 的解析方式似乎有所不同。如果我使用默认构造函数`A::A(b)`创建 clang 和 gcc`b`类型的变量。`A`VS11 错误说`b`是未知标识符。VS11 似乎解析为使用构造函数作为参数`A::A(i)`创建临时。当冗余限定符被消除时，VS 像 clang 和 gcc 一样将源解析为变量声明，并产生类似的关于隐藏变量的错误。`A``A::A(int)``i``i`

这种解析上的差异解释了为什么 VS11 会阻塞多个额外的限定符；`A::A::A::A(i)`，以及为什么，鉴于 clang 和 gcc 可以接受一个额外的限定符，任何多于一个的数字与一个额外的结果相同。

这是另一个在不同上下文中使用冗余限定符的示例。所有编译器似乎都将其解析为临时结构：

```
class Foo {};

void bar(Foo const &) {}

int main() {
    bar(Foo::Foo());
} 
```

1.  为什么完全允许冗余限定符？
2.  在某些情况下可以引用构造函数，例如继承构造函数的语法 ( `class D : B { using B::B; };`)，但 VS 似乎允许在任何地方使用它。VS 错了吗，clang 和 gcc 在如何解析冗余限定符方面是否正确？
3.  我知道 VS 在标准合规性方面仍然有点落后，但我确实发现现代、积极开发的编译器可能如此不同，在这种情况下将冗余限定符解析为构造函数的名称（即使构造函数没有名称）与将冗余限定符简单地解析为类型，导致 VS 在其他人声明变量的地方构造一个临时的。`B b(A::A(i));`在被 clang 和 gcc 解析为最令人头疼的解析时，情况可能会变得更糟，但 VS 将其视为使用初始化程序声明`b`类型变量。`B`这么严重的分歧还有很多吗？
4.  显然，在可移植代码中应该避免冗余限定符。有没有防止使用这种构造的好方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T00:41:40.617

虽然这种现象可能归因于*类名注入*，正如 ehemient 的回答中所指出的那样，但对于这个特定的例子，它在很久以前就被 C++ 语言禁止了。

[http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#147](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#147)

该组合`A::A`需要引用类构造函数，而不是类注入名称。`A::A(i)`应该由兼容的编译器解释为涉及构造函数名称的非法（因此无意义）表达式。例如，Comeau 编译器会因为这个原因拒绝编译您的代码。

显然 VC11 继续将其`A::A`视为对注入类名的引用。有趣的是，我在 VS2005 中没有观察到这个问题。

早在`A::A`被解释为引用注入名称的那一天，人们可以将一个`A`对象声明为

```
A::A::A::A::A::A a; 
```

依此类推，具有任意数量的`A`s。但现在不是了。令人惊讶的是，ideone 使用的 GCC 版本（4.3.4？）仍然存在这个问题

[http://ideone.com/OkR0F](http://ideone.com/OkR0F)

你可以用你的 VC11 版本试试这个，看看它是否允许。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T23:59:28.760

来自 ISO/IEC 14882:2011 最终草案§9，

> ²*类名在看到**类名*后立即插入到声明它的范围内。类*名*也被插入到类本身的范围内，这被称为*注入类名*。

当你写

```
A::A(i); 
```

和声明一样

```
A i; 
```

因为多余的括号是多余的（您可以添加任意数量的）并`A::A`引用`A`.

* * *

从§14.6.1，

> ¹ 与普通（非模板）类一样，类模板具有注入类名称（第 9 条）。注入的类名可以用作*模板名*或*类型名*。当它与*template-argument-list*一起使用时，作为*模板模板参数*的模板*参数，或作为朋友类模板声明的**详细类型说明*符中的最终标识符，它指的是类模板本身. 否则，它等价于*template-name*后跟包含在 中的类模板的*模板参数*`<>`。

注入的类名似乎很方便，可以在类`A<...>`中简单地引用`A`。

# coordinates - 处理来自 KML 文件的 LineString - 坐标 - SQL + C# 中的错误渲染

> ID：11423381
> 
> 赞同：0
> 
> 时间：2012-07-10T23:17:17.987
> 
> 标签：coordinates, kml, spatial

我有一个简单的 KML 文件，其中包含 1 个线串（实际文件有数千个）。我的坐标有问题，因为谷歌地球将单行字符串绘制为两条线。而我转换为 SQL Server Spatial 并最终 C# 代码只会画一条线。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
  <Document>
    <name>Test.kmz</name>
    <Style id="styleOSR">
      <LineStyle id="lineStyleOSR">
        <color>ff0f00ff</color>
        <width>2</width>
      </LineStyle>
    </Style>
    <Folder>
      <name>TEST</name>
      <description>
      </description>
      <Folder>
        <name>TEST</name>
        <Placemark>
          <name>OSR 0038</name>
          <styleUrl>#styleOSR</styleUrl>
          <LineString>
            <tessellate>1</tessellate>
            <altitudeMode>relativeToGround</altitudeMode>
            <coordinates>
              68.208,86.306,0 70.926,86.203,0 72.984,86.106,0 75.029,85.98900000000002,0 76.32599999999999,85.917,0 78.40300000000001,85.768,0 81.10299999999999,85.639,0 83.143,85.556,0 84.80200000000001,85.5,0 86.80200000000001,85.41800000000001,0 88.486,85.346,0 89.98,85.29600000000001,0 92.313,85.229,0 94.155,85.155,0 95.839,85.102,0 97.27300000000001,85.02800000000001,0 98.568,84.95999999999999,0 99.444,84.911,0 102.918,84.664,0 103.943,84.57800000000002,0 105.302,84.485,0 106.759,84.369,0 107.709,84.295,0 108.939,84.194,0 109.727,84.11,0 110.959,83.965,0 111.974,83.824,0 112.843,83.67400000000002,0 113.723,83.512,0 114.558,83.321,0 115.258,83.151,0 115.793,83.014,0 116.582,82.74,0 117.171,82.539,0 117.755,82.298,0 119.1,82.087,0 119.984,81.595,0 121.004,81.115,0 121.898,80.643,0 122.639,80.206,0 123.408,79.759,0 125.188,78.99,0 125.679,78.133,0 -29.60900000000001,39.993,0 -29.613,40.033,0 -29.58,40.079,0 -29.588,40.106,0
            </coordinates>
          </LineString>
        </Placemark>
      </Folder>
    </Folder>
  </Document>
</kml> 
```

我的问题是，如果我在谷歌地球上加载它，它会在地球上画两条单独的线。这实际上是我想要做的。你可以在下图中看到两条红线，两条独立的线！

![在此处输入图像描述](../Images/a9d0d2287de0075e4482a94282ef3d05.png)

但是当我处理线串然后从 SQL Server 几何体中渲染线时，我得到了一条线

所以解析这条坐标线并放入SQL Server给了我

![在此处输入图像描述](../Images/c96036cd6a36b7135b1fa13abf4a513b.png)

LINESTRING (68.208 86.306, 70.926 86.203, 72.984 86.106, 75.029 85.989000000000019, 76.326 85.917, 78.403 85.768, 81.103 85.639, 83.143 85.556, 84.802 85.5, 86.802 85.418, 88.486 85.346, 89.98 85.296, 92.313 85.229, 94.155 85.155, 95.839 85.102, 97.27300000000001 85.028, 98.568 84.96, 99.444 84.911, 102.918 84.664, 103.943 84.578000000000017, 105.302 84.485, 106.759 84.369, 107.709 84.295, 108.939 84.194, 109.727 84.11, 110.959 83.965, 111.974 83.824, 112.843 83.674000000000021, 113.723 83.512, 114.558 83.321, 115.258 83.151, 115.793 83.014, 116.582 82.74 , 117.171 82.539, 117.755 82.298, 119.1 82.087, 119.984 81.595, 121.004 81.115, 121.898 80.643, 122.639 80.206, 123.408 79.759, 125.188 78.99, 125.679 78.133, **-29.609000000000009 39.993, -29.613 40.033, -29.58 40.079, -29.588 40.106** )

问题是最后 4 个坐标包含这些值

-29.609000000000009 39.993，-29.613 40.033，-29.58 40.079，-29.588 40.106

现在谷歌地球似乎知道坐标彼此不同，***并没有渲染一条线***而是将它分成两条线。

所以我的问题是如何做到这一点？请记住，我有很多这些，我想将它们作为自定义图层放在 Google 地图上 - 这是我的问题 - 我的地图上有奇怪的线条。

![在此处输入图像描述](../Images/e9bd245ca3ebce9915e8b66386ff42cf.png)

以下是 google earth 实际呈现完整 KML 文件的方式。

![在此处输入图像描述](../Images/05a9a04f0f08949c911e3834f5c6d58f.png)

如果有人有兴趣查看原始 KML 文件，那么您可以从这里获取

[KML 文件](http://static.canterburyquakelive.co.nz/KML/PlateBoundaries.kml)

这是为了我在新西兰的地震现场在地图上显示技术板块。

[http://canterburyquakelive.co.nz](http://canterburyquakelive.co.nz)

干杯

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:09:27.220

如果我获取原始 KML 文件并[使用 geoxml3 或 google maps v3 API KmlLayer 渲染它，我只会看到一个工件](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/PlateBoundaries_kml.xml)

很容易[修复kml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/PlateBoundariesB_kml.xml)

不知道其他“奇怪的线条”从何而来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:32:37.120

谷歌地球正在呈现单行

在您的示例中，将高度更改为：

```
<altitudeMode>clampToGround</altitudeMode> 
```

与`relativeToGround`

丢失的线段正在穿过地球

# git - 使用带有子模块的 git-svn 的策略

> ID：11423384
> 
> 赞同：0
> 
> 时间：2012-07-10T23:17:51.647
> 
> 标签：git, svn, git-submodules

我想在本地使用带有子模块的 Git，并且能够从 SVN 推/拉（我所在的公司使用 SVN，并且在不久的将来不会切换到 Git）。我知道 git-svn 不支持这一点，但我希望能够用一个 shell 脚本来欺骗它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:25:56.647

您不能使用 git-svn，因为它不允许使用 git 子模块。但我可以提出替代解决方案：

首先看一下[SmartGit](http://www.syntevo.com/smartgit/index.html)：它引入了[SVN 子模块](http://www.syntevo.com/smartgit/documentation.html?page=concepts-svn)的概念。svn:externals 属性转换为版本控制的 .gitsvnextmodules 文件，该文件指定 SVN 子模块列表。要启用子模块支持，只需使用 SmartGit 从头开始​​克隆您的基本存储库（如果您只是打开已经克隆的 git-svn 存储库，SmartGit 将处于兼容模式，并且外部支持将被关闭）。

如果您更喜欢纯 Git 而不是 git-svn 并且可以访问服务器，则可以将[SubGit](http://subgit.com)安装到 SVN 存储库中。它将为 SVN 存储库创建一个 Git 接口（实际上是一个单独的 Git 存储库，将自动与 SVN 同步）。之后，您可以使用这个纯 Git 接口添加纯 Git 模块（我假设您的外部存储库也有 Git 接口，因为您询问 Git 子模块）。Git 子模块将仅存在于存储库的 Git 版本中，不会被转换为 SVN。

# scala - Scala中的多重特征构造错误

> ID：11423387
> 
> 赞同：2
> 
> 时间：2012-07-10T23:18:07.567
> 
> 标签：scala, anonymous-class

有人可以帮我理解这里的错误吗？我想我理解 Scala 中具有特征的匿名类构造。但是，当我尝试应用多个特征时，我收到一个错误，期望“;” 或语句的基本结束。如果我也以这种方式声明一个类，同样的问题似乎也适用（具有多个需要匿名实现代码行的特征？线测试 3 在下面失败。谢谢。

```
class TestTraits 

trait A {def x:Int}
trait B {def y:Int}

object TestTraits {

  def main(args: Array[String]): Unit = {

     val test1 = new TestTraits with A {def x=22}  //OK

     val test2 = new TestTraits with B {def y=33} //OK

     val test3 = new TestTraits with A {def x=22} with B {def y=33} //Errors: - ';' expected but 'with' 

  }  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:25:09.490

您的语法无效：

```
val test3 = new TestTraits with A with B {def x=22; def y=33} 
```

一个类定义只能有一个*主体*，而您要声明的是一个*匿名*类。

# wpf - 如何确保客户端保持连接到 WPV MVVM 应用程序中的 WCF 服务？

> ID：11423388
> 
> 赞同：1
> 
> 时间：2012-07-10T23:18:13.010
> 
> 标签：wpf, wcf, mvvm, client

我有一个带有“登录”窗口的 WPF 应用程序，用户需要在其中指定用户名和密码。然后，WPF 应用程序需要使用这些凭据连接到 WCF 服务，并在其生命周期内保持与服务的连接，因为它通过 ICallback 接口从服务接收回调通知。

这是想法（[链接到更大的图像](http://s14.postimage.org/r2gbc9uvz/SO_Question_2.png)）：

[![这是这样的想法：](../Images/01ce16d7a6af5a5c1013c8091afb6ac3.png)](https://i.stack.imgur.com/XLde2.png)

***问题：***

1.  凭据（用户名和密码）信息是否应该通过 Login ViewModel 提供给静态服务工厂？

2.  一旦服务客户端设法连接到 WCF 服务 - 登录窗口应关闭，主窗口应显示。主窗口现在如何知道登录窗口创建的服务客户端？一旦从服务到达，MainWindow 将如何显示通知？

3.  登录窗口是否应该将服务客户端传递给 MainWindow ？这对我来说似乎是糟糕的编码......

4.  假设 WCF 服务由于某种原因出现故障。我希望 MainWindow 能够显示它（可能使用红色 LED 图像）。断开连接的信息如何从服务工厂传递到主窗口的视图？视图应该与客户端中的事件挂钩吗？

5.  如果 WCF 服务断开连接（可能因维护而停机），将如何继续执行与 WCF 服务的“自动重新连接”？

任何能回答任何问题的人都会对我有很大帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:57:07.520

1.  将登录服务抽象为 ILoginService 接口（更易于模拟）。以您认为最好的方式实施部署代码（例如服务工厂）。LoginService 将实现登录功能（例如身份验证）。

2.  您使用的是哪个 MVVM 工具包？（我建议尝试 MVVM Light。）

3.  是的。登录只是一个子弹出/对话框。您可以在共享的 LoginService 中尝试 MEFing，或者假设 MVVM Light，您可以使用 Messenger。

4.  MainViewModel 应该按照 Mikey 的建议进行心跳。出现错误时，设置 INotifyPropertyChanged (INPC) 属性（MainWindow 绑定到该属性）。

5.  这似乎是个人喜好。它应该尝试在 5 秒、30 秒、2 分钟、5 分钟、1 小时内重新连接吗？我不知道; 随心所欲地去做。尝试一些不同的东西。我认为使用相同的线程重新连接不会有什么害处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:22:51.747

创建一个新的 WCF API 调用，它是一个“心跳”。客户端必须每 5 分钟左右调用一次此调用，如果不是，则客户端已断开连接。

强制客户端发送断开连接消息是有问题的。请记住，由于硬件问题（例如连接丢失或其他故障），客户端计算机可能随时崩溃。

# javascript - Javascript 键错误。如何纠正？

> ID：11423393
> 
> 赞同：0
> 
> 时间：2012-07-10T23:18:41.887
> 
> 标签：javascript, jquery, animation, jquery-plugins

我刚刚下载了精灵 jQuery 插件：[http](http://spritely.net/) ://spritely.net/ 我想告诉插件在第 11 帧（动画的最后一帧）我想反转动画。这是我的代码：

```
$('#logo').sprite({
    fps: 17,
    no_of_frames: 12,
    on_frame: {
    11: function(obj) {
        rewind: true
        }
    }
}); 
```

如果将**rewind: true**函数作为选项放置在 fps、no_of_frames 等旁边，则它可以工作。但我只需要在第 11 帧时对其进行初始化。

如何做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:54:40.857

我查看了该插件的文档，而不是为此使用 JavaScript，我会考虑制作一个 GIF，我费心为你做。您最终可能也会对外观有更多的控制权。如果您仍然希望我为您研究程序化解决方案，请告诉我。另外，你能告诉我你使用的字体的名称吗？我问的原因是您发送给我的某些帧最终没有完全对齐；我可以重做。给你：http: [//img6.imageshack.us/img6/7084/bigom.gif](http://img6.imageshack.us/img6/7084/bigom.gif)

# sql-server - SQL - 使用“IS LIKE”在 2 个表之间进行高级比较

> ID：11423394
> 
> 赞同：0
> 
> 时间：2012-07-10T23:18:48.627
> 
> 标签：sql-server

好的，这会变得有点混乱，所以请试着和我在一起..

我有一个类似这样的信息表...

```
Table Name: Customers
_____________________________
ID   | CompanyName | FirstName | LastName  | Phone
-------------------------------
1    | Joes        | Joe       | James     | 1233334444
2    | Kennys      | Kenny     | Johnson   | 2222334555
3    | Kellys      | Kelly     | Gibson    | 5454445445
4    | Ricks #1    | Rick      | Lawson    | 4545334222
5    | Johns #1    | Johny B   | James     | 4545222211
6    | Johns #2    | Johny     | James     | 4545222211
7    | Johns #3    | Johny     | James     | 4545222211
8    | Ricks #2    | Rick A    | Lawson    | 4545334222 
```

我需要知道如何创建一个 SQL 语句来查找所有重复记录，将它们相加，然后显示找到的第一个公司名称的重复总数。

*这是关键 - 从上表中可以看出，有时他们会在姓名首字母上加上姓名（例如 - ID5 和 ID6 是同一个人，但他将中间名的首字母放在 ID5 中，您可以在 ID4 和ID7)

我需要 SQL 语句以首先匹配姓氏进行比较，然后对名字和公司名称“种类”进行“喜欢”，以确保它们被视为应有的数量。

例如 - 我应该得到类似于...的结果

```
Table Name: TableResults
_____________________________
ID   | CompanyName | FirstName | LastName  | Phone       | Count
-------------------------------
4    | Ricks #1    | Rick      | Lawson    | 4545334222  | 2
5    | Johns #1    | Johny B   | James     | 4545222211  | 3 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:35:27.710

我认为您可能需要使用模糊匹配。

尝试这个：

```
WITH InitialData AS
(
  SELECT *, SOUNDEX(LastName) + SOUNDEX(CompanyName) Similarity 
    FROM Customers
), FinalData AS
(
  SELECT *, 
          ROW_NUMBER() OVER(PARTITION BY Similarity ORDER BY ID) Position,
          COUNT(1)  OVER(PARTITION BY Similarity) Count
  FROM InitialData
)
SELECT ID, CompanyName, FirstName, LastName, Phone, Count
  FROM FinalData
WHERE Position = 1
  AND Count > 1 
```

SQLFiddle：[http ://sqlfiddle.com/#!3/7c1fb/2](http://sqlfiddle.com/#!3/7c1fb/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:27:43.887

如果可能的话，我相信名称分析将是一些非常复杂的 SQL。首先，您可能希望确保您的名称列使用不区分*大小写*的排序规则，例如`utf8_general_ci`. 我不相信人们会始终将他们的名字大写。如果他们粗心，他们也可能有错字。

`LIKE`除非您确切知道将`%`. 它更像是一个通配符匹配功能。

也许使用[SOUNDEX](http://en.wikipedia.org/wiki/Soundex)算法进行检查？但这只有在您的所有数据都是英文的情况下才有效。

电话号码是识别重复项的可靠方法吗？如果是这样，您可以跳过名称分析并执行以下操作：

```
SELECT ID, CompanyName, FirstName, LastName, Phone, COUNT(1) AS Count
FROM Customers 
GROUP BY Phone
ORDER BY ID ASC 
```

# jquery - 我的 jquery 下拉菜单表现得很疯狂

> ID：11423397
> 
> 赞同：0
> 
> 时间：2012-07-10T23:18:56.497
> 
> 标签：jquery, css

大家好，我正在为我的网站构建一个下拉菜单，我想使用 jquery 它几乎按照我想要的方式工作，但是。我一直在第二个 ul 上获得快门效果，而对第一级没有影响。我知道我很接近并且缺少一些明显的东西。我已经在这篇文章的同一页面中包含了菜单的所有 CSS

这里是

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"xml:lang="en" lang="en">
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script src="jquery-1.7.2.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
$('ul#nav li').hover(function() { //When trigger is clicked...
    var me = this;
    //Following events are applied to the subnav itself (moving subnav up and down)
    $(me).find('ul.subnav').slideDown('slow').show(); //Drop down the subnav on click
    $(me).click(function() {
    }, function(){
        $(me).find('ul.subnav').slideUp('slow'); //When the mouse hovers out of the subnav, move it back up
    });
});
 $('#nav ul ul li:has(ul)').addClass("parent");
      $('#nav ul ul li:has(ul)').hover(function(){
          $(this).addClass('hoverParent');
           $('ul li', this).toggle("fast");
      },function(){
          $(this).removeClass('hoverParent');

      });
});
</script>
<!--<link href="style.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="style.css"/>-->

<style>
    * {
        padding: 0px;
        margin: 0px;
}
  #nav {
    width: 960px;
    height: 30px;
    background-color: #333333;
}

ul.nav {
    margin-left: 0px;
    padding-left: 0px;
    list-style: none;
    overflow: visible;
}
ul.nav li {
    float: left;
    position: relative;

}
ul.nav a {
    width: 8em;
    display: block;
    padding: 5px;
    text-decoration:none;
    color: #FFF;
    text-align: center;
}
ul.nav li a:hover {

    color: #33ff66;
}
.parent {
    background-image: url("images/arrow-select.png");
    background-repeat: no-repeat;
    background-position: right center;
}.parent2 {
   background-image: url("images/arrow-select.png");
    background-repeat: no-repeat;
    background-position: right center;
}
.hoverParent {
    background-image: url("images/arrow.png");
    background-repeat: no-repeat;
    background-position: right center;
}
div#nav ul ul li {
text-decoration: none;
color: white;
text-align: center;
background-color: #333333;
border: 1px solid #666  ;
border-top-color: #999999;
list-style: none;
}
div#nav ul ul ul {
    position: absolute;
    top: 0;
    left: 100%;
}
div#nav ul ul {
    position: absolute;
    z-index: 500;
}
div#nav ul ul {display: none;}
div#nav ul li:hover ul{display: block;}
div#nav ul ul,
div#nav ul li:hover ul ul,
div#nav ul ul li:hover ul ul
{display: none;}

div#nav ul li:hover ul,
div#nav ul ul li:hover ul,
div#nav ul ul ul li:hover ul
{
    display: block;
}
</style>
</head>
<body>
<div id="nav">
<ul class="nav">
    <li><a href="#">Home</a></li>
    <li><a href="#">Surf Boards</a>
        <ul class="subnav">
            <li ><a href="#">Long Boards</a>
                <ul class="subnav">
                    <li ><a href="#">Hard Boards</a></li>
                    <li><a href="#">Soft Boards</a></li>
                </ul>
            </li>
            <li><a href="#">Template 2</a></li>
            <li><a href="#">Template 3</a></li>
        </ul></li>
    <li><a href="reviews.html">Clothing</a>
                <ul class="subnav">
                    <li><a href="#">Shorts</a></li>
                    <li><a href="#">Shirts</a></li>
                    <li><a href="#">Hoodies</a></li>
                </ul>
    </li>
    <li><a href="reviews.html">Accessories</a>
            <ul class="subnav">
                <li><a href="#">Stickers</a></li>
                <li><a href="#">Board Combs</a></li>
                <li><a href="#">Leg Ropes</a></li>
            </ul>
    </li>
    <li><a href="reviews.html">Events</a>
        <ul class="subnav">
            <li><a href="#">ASAP</a></li>
            <li><a href="#">Indigenous</a></li>
            <li><a href="#">International</a></li>
        </ul>
    </li>
    <li><a href="reviews.html">Contact Us</a></li>
</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:44:55.213

该问题是由您的 CSS 引起的。当您将其悬停在父菜单项上时`display: block`，jquery 代码会将其切换回`display: none`. 要通过 jQuery 修复它，试试这个 - [http://jsfiddle.net/WRM9X/](http://jsfiddle.net/WRM9X/)

```
$('#nav ul ul li:has(ul)').addClass("parent");
      $('#nav ul ul li:has(ul)').hover(function(){
          $(this).addClass('hoverParent');
          $('ul li', this).css("display", "none").toggle(300);
      },function() {
          $(this).removeClass('hoverParent');
      });
});​ 
```

或者您可以通过 CSS 修复它，方法是不在`display: block`父悬停时创建该子菜单

# python - Reportlab platypus - 禁用表拆分

> ID：11423399
> 
> 赞同：7
> 
> 时间：2012-07-10T23:19:03.500
> 
> 标签：python, split, reportlab, platypus

我正在使用 Reportlab 的鸭嘴兽在 python 中动态生成报告。

我有多个生成的表，大多数只有 10 到 20 行。现在它们在我的页面末尾被自动拆分，但我更希望它们保持在同一页面上。

我尝试在表实例化时将 splitByRow 设置为 False，但这会引发“未实现”错误。

此外，尽管我可以看到代码，但我不允许对 reportLab python 文件进行任何更改。也许我可以子类化表并以某种方式禁用拆分？

禁用可流动拆分的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T17:04:57.257

我自己找到了答案。我从 reportlab.platypus.flowables 导入 KeepTogether，然后当我将表格添加到元素列表时，我使用 KeepTogether，如下所示：

```
from reportlab.platypus.flowables import KeepTogether 
t = Table(tableData)
self.elements[name] = KeepTogether(t) 
```

# c# - 变量值的最佳 SQL 类型

> ID：11423400
> 
> 赞同：0
> 
> 时间：2012-07-10T23:19:17.023
> 
> 标签：c#, sql, sql-server

我有一个包含元数据的 PDF 表，其中还有 10 个匿名行。这些行可用于保存任何 C# 数据类型，因为每个用户可能出于不同的原因使用它。

每条记录都有一套标准的信息，例如 PDF 路径数据、描述等。然后是 10 行，称为“Key1、key2、key3”。这样做的原因是用户可以在我的网页上重命名它们并存储他们自己的数据来处理上传的 PDF 文件。（他们可能有客户名称、出版商名称、成本等信息）

我想保持这些值对几乎任何数据类型开放..

我的问题是，我应该使用什么 SQL 数据类型？我不介意有字符限制..但我需要知道存储它的最有效方法..只需执行 Varchar(100) 并根据需要转换 c# 中的值会很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:21:53.523

如果您不介意有字符限制，请使用`varchar`.

有关它优于 的原因`nvarchar`，请参阅[varchar 和 nvarchar SQL Server 数据类型之间的主要性能差异是什么？](https://stackoverflow.com/questions/35366/varchar-vs-nvarchar-performance)

# android - 三个带有视图分隔符的按钮 RelativeLayout

> ID：11423404
> 
> 赞同：0
> 
> 时间：2012-07-10T23:20:23.433
> 
> 标签：android, xml, android-layout, android-view, android-button

我正在尝试为我的应用程序创建一个更好看的按钮栏以匹配主题。到目前为止，我正在使用以下代码：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/footer"
    style="@android:style/ButtonBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="bottom"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/Formula"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Formula" />

    <Button
        android:id="@+id/Solve"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Solve" />

    <Button
        android:id="@+id/Clear"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Clear" />
</LinearLayout> 
```

它给了我这样的结果： ![在此处输入图像描述](../Images/cf9c47ad39c8c38d2226116793a483d4.png)

我还在编写一些代码来用一个更好看的栏替换那个栏。如下：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:layout_alignParentBottom="true" >

    <View
        android:layout_width="match_parent"
        android:layout_height="1dip"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip"
        android:background="@drawable/black_white_gradient" />

    <View
        android:id="@+id/ViewOne"
        android:layout_width="1dip"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="4dip"
        android:layout_marginTop="4dip"
        android:background="@drawable/black_white_gradient" />

    <Button
        android:id="@+id/ButtonOne"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@id/ViewOne"
        android:background="@color/button_blue_background"
        android:paddingTop="5dp"
        android:text="Cancel"
        android:textColor="@color/button_dark_text" />

    <Button
        android:id="@+id/ButtonTwo"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/ViewOne"
        android:background="@color/button_blue_background"
        android:text="OK"
        android:textColor="@color/button_dark_text" />
</RelativeLayout> 
```

结果是： ![在此处输入图像描述](../Images/c8895a0c7a8cf6d2037b7da697a85456.png)

所以我的问题是我无法在新的黑条上获得三个按钮。我尝试使用 android:layout_toRightOf 属性添加更多视图和按钮，但它仍然无法正常工作。关于我可以做些什么来实现这一目标有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:45:21.547

您不需要将视图添加到布局中只是为了显示您的渐变。

我建议您将*LinearLayout*与这三个按钮一起使用，并将*layer-list* xml 设置为布局本身的背景。

1.  使用渐变创建图层列表 xml 文件，例如**layerlist.xml**：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
       <item
         android:drawable="@drawable/gradient1"
         android:id="@+id/grad1"
       />

       <item
         android:drawable="@drawable/gradient2"
         android:id="@+id/grad2"
       />
    </layer-list> 
    ```

    如果您只有一个渐变，则不需要图层列表 xml 文件。直接将其设置为*LinearLayout*的背景。

2.  正如我之前所说，将**layerlist.xml**（或您的单个渐变 xml 文件）设置为布局的背景：

    ```
    <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/footer"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:gravity="bottom"
      android:orientation="horizontal"
      android:background="@drawable/layerlist" >

        <Button
          android:id="@+id/Formula"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_weight="1"
          android:text="Formula" />

       <Button
          android:id="@+id/Solve"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_weight="1"
          android:text="Solve" />

       <Button
          android:id="@+id/Clear"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_weight="1"
          android:text="Clear" />
    </LinearLayout> 
    ```

让我知道它是否有效！

**编辑：**

据我所知，您可以为渐变定义适当的高度。添加到*layerlist.xml*文件的`android:top="3dp"`所需**项目。**这意味着您的渐变将从顶部开始的高度为 3dp。或者，如果您使用的是单个渐变文件，您可以定义 Grandient 的高度添加到您的形状：

 *```
<size
      android:height="3dp" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:44:01.893

对于“三个按钮”的情况，您可以设置 LinearLayour 属性，该属性`android:weightSum="3"`应该为您提供三个大小相同的按钮。*

# python - 动画按钮

> ID：11423405
> 
> 赞同：1
> 
> 时间：2012-07-10T23:20:25.627
> 
> 标签：python, python-2.7, pygame

我一直试图让这段 python 代码工作，但无济于事。所以我想做的是让我的按钮有 3 种状态：空闲、悬停和单击。

但是，由于某种原因，图像没有改变。有人可以告诉我我做错了什么吗？

```
import pygame,sys,os
from pygame.locals import *

BG = "bg.jpg"
BUTTON1 = "buttonidle.png"
BUTTON2 = "buttonhov.png"
BUTTON3 = "buttonclick.png"

def load_image(name, colorkey=None):
    fullname = os.path.join(name)
    try:
        image = pygame.image.load(fullname)
    except pygame.error, message:
        print "Can't load image:", name
        raise SystemExit, message
    image = image.convert()
    if colorkey is not None:
        if colorkey is -1:
            colorkey = image.get_at((0,0))
        image.set_colorkey(colorkey, RLEACCEL)
    return image, image.get_rect()

class Button(pygame.sprite.Sprite):

    global buttonsprite

    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        if buttonsprite == 1:
            self.image,self.rect = load_image(BUTTON1, -1)
        screen = pygame.display.get_surface()
        self.area = screen.get_rect()
        self.rect.topleft = 190, 140

        if buttonsprite == 2:
            self.image,self.rect = load_image(BUTTON2, -1)
        if buttonsprite == 3:
            self.image,self.rect = load_image(BUTTON3, -1)

buttonsprite = 1
pygame.init()
screen = pygame.display.set_mode((500,300))
pygame.display.set_caption('Window')

background = pygame.Surface(screen.get_size())
background = background.convert()
background.fill((255,255,255))

screen.blit(background,(0,0))
pygame.display.flip()

button = Button()
allsprites = pygame.sprite.RenderPlain((button))
allsprites.update()
screen.blit(background,(0,0))
allsprites.draw(screen)
pygame.display.flip()

while True:
    x,y = pygame.mouse.get_pos()
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
    if x >= 193 and x <= 315 and y >= 143 and y <= 171:
        buttonsprite = 2
        if event.type == MOUSEBUTTONDOWN:
            buttonsprite = 3
    else:    
        buttonsprite = 1 
```

谢谢！

编辑：

好吧，我得到了一些帮助，我添加了一个更新功能。但它似乎仍然不起作用。

```
import pygame,sys,os
from pygame import *

BG = "bg.jpg"
BUTTON1 = "buttonidle.png"
BUTTON2 = "buttonhov.png"
BUTTON3 = "buttonclick.png"

buttonsprite = 1

def load_image(name, colorkey=None):
    fullname = os.path.join(name)
    try:
        image = pygame.image.load(fullname)
    except pygame.error, message:
        print "Can't load image:", name
        raise SystemExit, message
    image = image.convert()
    if colorkey is not None:
        if colorkey is -1:
            colorkey = image.get_at((0,0))
        image.set_colorkey(colorkey, RLEACCEL)
    return image, image.get_rect()

class Button(pygame.sprite.Sprite):

    global buttonsprite

    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image,self.rect = load_image(BUTTON3, -1)
        screen = pygame.display.get_surface()
        self.area = screen.get_rect()
        self.rect.topleft = 190, 140

    def update(self):
        if buttonsprite == 1:
            self.image,self.rect = load_image(BUTTON1, -1)
        if buttonsprite == 2:
            self.image,self.rect = load_image(BUTTON2, -1)
        if buttonsprite == 3:
            self.image,self.rect = load_image(BUTTON3, -1)

pygame.init()
screen = pygame.display.set_mode((500,300))
pygame.display.set_caption('Window')

background = pygame.Surface(screen.get_size())
background = background.convert()
background.fill((255,255,255))

screen.blit(background,(0,0))
pygame.display.flip()

button = Button()
allsprites = pygame.sprite.RenderPlain((button))
allsprites.update()
screen.blit(background,(0,0))
allsprites.draw(screen)
pygame.display.flip()

while True:

    x,y = pygame.mouse.get_pos()
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == MOUSEBUTTONUP:
            if x>=193 and x<=315 and y>=143 and y<=171:
                buttonsprite = 2
                button.update()
            else:
                buttonsprite = 1
                button.update()
        if event.type == MOUSEBUTTONDOWN:
            if x>=193 and x<=315 and y>=143 and y<=171:
                buttonsprite = 3
                button.update()
            else:
                pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:01:09.147

我认为这是因为您没有调用某种主动更改图像的更新函数。如果您在看到所需更改后重新创建按钮。

基本上，更改值并不足以实现您想要做的事情，您需要让 Button 知道它有一个新值。

不好的相关示例：

```
def button():
  global number
  print number

number = 1

button() 
>>> 1           <----------------↰
number = 'A STRING NOW'          ↑
#now the printed string doesn't above change, so you'd have to call button again for it to change:
button()
>>> A STRING NOW # <-- BAM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:40:52.517

看看这个示例代码。它有一个带有两种状态的按钮的菜单。正常并悬停。[https://gist.github.com/2802185](https://gist.github.com/2802185)

# sql - PostgreSQL SQL 语句生成自定义 blob 存储表

> ID：11423406
> 
> 赞同：4
> 
> 时间：2012-07-10T23:20:29.027
> 
> 标签：sql, django, postgresql

我需要为当前项目使用看起来很棒的[django-storages 数据库存储后端](http://django-storages.readthedocs.org/en/latest/backends/database.html)，但是：

> 它可用于将文件名映射到数据库 blob：因此您必须将它与手动创建的特殊附加表一起使用。该表应包含文件名的 pk 列（最好使用与 FileField 相同的类型：nvarchar(100)）、blob 字段（例如图像类型）和大小字段 (bigint)。

我会承认的。ORM 把我宠坏了。自从我编写 SQL 语句以来已经有一段时间了，而且我对 PostgreSQL 的 SQL 和 BLOB 风格一点也不熟悉。

那么，是否有人可以帮助我使用包含上述三列（FILE_NAME、BLOB、FILE_SIZE）的 Postgres CREATE TABLE 语句以及适当的列类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T23:46:59.727

您通常[`bytea`](http://www.postgresql.org/docs/current/interactive/datatype-binary.html)在 PostgreSQL 中为 blob 使用类型列。您的陈述可能如下所示：

```
CREATE TABLE (
  file_name text PRIMARY KEY
 ,blob bytea
 ,file_size bigint
); 
```

PostgreSQL 中没有`nvarchar`像 SQL Server 中那样。你可以使用`varchar(100)`，但我建议只使用[`text`](http://www.postgresql.org/docs/current/interactive/datatype-character.html)没有修饰符。

还有其他存储 blob 的选项。有关更多信息，请参阅此[相关答案](https://stackoverflow.com/a/7439642/939860)。

# python - Python 中的异步事件

> ID：11423412
> 
> 赞同：1
> 
> 时间：2012-07-10T23:21:06.060
> 
> 标签：python

我是 Python 新手（和一般编程），所以请耐心等待。

我正在做一些实验室设备自动化，我正在寻找一种方法来切换一台设备的电源，同时在另一台设备上获取数据。我希望这些事件彼此异步，即我希望电源在数据获取过程中随机切换。

我检查了以下内容：

-time.sleep——我实际上能够在一个设置中成功使用它，因为电源响应太慢了——我告诉它关闭，然后随机睡眠一段时间，然后开始在其他设备。这依赖于电源的反应总是比其他设备慢得多，通常情况并非如此。

-multiprocessing/threading--我一直在 SO 和 python.org 上读到这个，但我仍然不清楚这是否会完成我想要的。我试图测试它，但我发现它很难编码，如果它与我想要的相去甚远，我不想在它上面投入更多时间。

所以，简而言之：多处理会做我想要的吗？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:47:32.983

想不出任何理由我不会把它们写成两个完全独立的脚本，因为它们不需要任何状态共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:37:36.237

如果您希望在 Python 或大多数编程语言中并行发生两件事，请使用线程。这就是他们的目的。[这](http://www.artfulcode.net/articles/multi-threading-python/)是一个关于如何在 Python 中进行线程化的教程。

一个线程将切换电源，另一个线程将获取数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T23:46:19.747

您似乎想要一个简单的线程模型，您可以在其中为您希望在后台执行的任务创建一个线程（电源切换或数据采集）。这是一个示例（未经测试的代码）：

```
from threading import  Thread                                                                                       

def take_data():
    while 1:                                                                            
        data = go_fetch_more_data()

data_thread = Thread(target=take_data)
data_thread.start()

while 1: 
    sleep_seconds = random.randint(0, 60)        
    time.sleep(sleep_seconds)
    toggle_power() 
```

注意 - 使用这种方法，停止程序的唯一方法是杀死它。如果您需要监视某种关闭信号，则必须为每个信号创建一个线程。然后你会想要一种优雅的方式来关闭每个线程。我会提供一个示例，但我对 Python 最佳实践并不完全清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:48:21.013

[asyncoro](http://asyncoro.sourceforge.net "异步")支持使用协程进行异步事件处理。使用 asyncoro 编程与使用线程非常相似，除了使用 'yield' 进行异步完成。你的问题可以用

```
import asyncoro, random

def collect(coro=None):
   while True:
      # collect data every 10 seconds?
      yield coro.sleep(10)
      data = read_data()

def toggle(coro=None):
    while True:
        yield coro.sleep(random.randint(10,30))
        toggle_power()

collector = asyncoro.Coro(collect)
toggler = asyncoro.Coro(toggle) 
```

虽然线程足以完成这个特定任务，但 asyncoro 框架提供了许多特性，包括支持并发、分布式、容错编程。我怀疑，考虑到问题的领域，与消息（通道，或与协程的点对点通信）进行通信可能对您有用。

# java - 如何在 JTextPane 中搜索某种格式？

> ID：11423414
> 
> 赞同：0
> 
> 时间：2012-07-10T23:21:20.547
> 
> 标签：java, swing, rtf, jtextpane

`JTextPane`我在将 a 保存为 RTF时遇到了问题。对齐未保存。

如果我可以`JTextPane`在保存之前搜索中心对齐，并添加一个标签，例如*center*，那么在文档打开时，我可以适当地设置段落格式。

如何搜索`JTextPane`居中/右文本对齐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T05:47:56.153

获取您的`Document`并将其转换为`DefaultStyledDocument`. 然后使用该`getParagraphElement()`方法获取距段落开头的偏移量。检查段落的对齐方式`StyleConstants.getAlignment()`并传递段落的属性`Element`。然后使用段落的结束偏移来获取下一个。

# teechart - TeeChart 示例

> ID：11423419
> 
> 赞同：0
> 
> 时间：2012-07-10T23:21:54.743
> 
> 标签：teechart

我有 TeeChart 8 Standard 作为 Delphi XE2 的一部分，最近询问有关 TeeChart 功能的建议，并被告知我可以查看 All Features\etc... 以查找示例代码。我从 Steema 下载了压缩的 TeeChart2010_Examples 文件，然后运行了 Tee9New.exe，它显示了所有功能...子目录的级联。在此我可以找到我想要的示例，但 SourceCode 选项卡建议我需要安装 TChart Pro 才能查看源代码。

示例的源代码是否仅在安装 Pro 版本后可用？我相信我可以安装评估版来确认这一点，但不想“弄乱”我已经运行的标准版，它是 Delphi 附带的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:52:27.463

TeeChart Std 评估版还附带了演示的源代码。例如，可以在*C:\Program Files\Steema Software\TeeChart Standard 2012 for RAD XE2\Examples\Features*中找到它。但是，如果您需要特定演示的源代码，请告诉我是哪一个，我会将其发送给您。

# javascript - 使用带有while循环的递归的奇怪结果

> ID：11423420
> 
> 赞同：2
> 
> 时间：2012-07-10T23:21:55.273
> 
> 标签：javascript, recursion, while-loop

我是 Javascript 的初学者。在自己尝试递归时，我使用 while 循环得到了一些奇怪的结果。并且使用 If 语句得到正确的结果。

这是代码和结果：

```
var test = function f(n){
    while(n > 0){
        document.write(n);
        f(--n);     
    }
};

test(5); 
```

结果：

> 5432112113211211432112113211211

使用 If 语句时

```
var test = function f(n){
    if(n > 0){
        document.write(n);
        f(--n);     
    }
};

test(5); 
```

结果是：

> 54321

在这种情况下，我无法真正调试它`while`。老实说，这让我在某些时候感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:28:01.437

`5432112113211211432112113211211` 你可以看到模式：

```
5432112113211211
 432112113211211

543211211
  3211211
 43211211
  3211211

543211
   211
  3211
   211
 43211
   211
  3211
   211

etc 
```

这些只是它经历的所有循环。首先它打印 5，然后拆分为 4，然后再拆分为 3，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:35:42.523

需要注意的重要一点是，每次在 中运行代码时，都会`f`使用一个**名为**`n`. 因此，通过递归调用`f`，您将添加到作用域链中。您不断添加到作用域链中，直到`n > 0`is `false`。一旦它为假，您就开始遍历存在**其他**版本的作用域链`n`。重复该过程，直到所有`n`范围内的所有变量都变为`0`.

请注意当我在下面的数字中添加一些空格时出现的模式。每次代码必须沿作用域链向上时，我都会添加一个空格。每组数字都代表沿着作用域链向下的代码。

54321 1 21 1 321 1 21 1 4321 1 21 1 321 1 21 1

[这是一个应该有帮助的jsfiddle。](http://jsfiddle.net/lbstr/NwUce/)它打印两个数字：第一个代表您所在的范围，第二个与您在代码中打印的数字相同。查看第一个数字并尝试了解如何为每个范围创建一个新数字。`n`当您稍后在程序中返回该范围时，尝试考虑应该是什么值。

# html - 防止 div 继续缩小浏览器屏幕

> ID：11423422
> 
> 赞同：1
> 
> 时间：2012-07-10T23:22:10.187
> 
> 标签：html, css

当我调整浏览器窗口的大小时，我的 div 元素会向左移动，但我希望它们在我这样做时留在一个地方。如何在调整浏览器窗口大小时使 div 元素保持在一个位置？

```
<div style="background:red; width:30px; height:30px">

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:24:53.230

```
<div style="background:red; width:30px; height:30px position: absolute;
            top:/* pixels from top of screen*/ 30px;
            left:/* pixels from left side of screen*/100px;">

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:44:43.157

您有几个选项来实现您想要的，但是您将使用哪一个取决于您的其余代码。

您可以绝对定位容器，但在这种情况下，包含这些 div 的父元素也具有在其上定义的非静态定位非常重要。实现这一目标的最流行方法之一是定义与父元素的相对定位，然后绝对定位内部元素。

这是一个例子。

**HTML**

```
<div class="wrapper">
    <div class="div_1">
        <!-- DIV 1 content -->
    </div>
    <div class="div_2">
        <!-- DIV 2 content -->
    </div>
</div> 
```

**CSS**

```
.wrapper {
    position:relative;
}

.div_1 {
    position:absolute;
    top:10px;
    left:20px;
}
.div_2 {
    position:absolute;
    bottom:10px;
    left:20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T05:46:27.290

使用垂直对齐，填充，位置属性。对于位置属性，请参阅以下链接 [，在此处输入链接描述](http://www.w3schools.com/cssref/pr_class_position.asp) 对于填充属性，请参阅以下链接[，在此处输入链接描述](http://www.w3schools.com/cssref/pr_padding.asp) 对于垂直对齐属性，请参阅以下链接[，在此处输入链接描述](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp)

```
<div style="background:red; width:30px; height:30px;vertical-align:top;padding:0px 0px 0px 0px">
</div> 
```

# c# - 转换为路径

> ID：11423424
> 
> 赞同：0
> 
> 时间：2012-07-10T23:22:27.787
> 
> 标签：c#, wpf, xaml, blend

我有一个在混合中创建的有点复杂的形状，但是我需要在代码中使用它作为设置器的一部分，所以我试图在混合中使用“转换为路径”，但是这个菜单/命令被禁用。唯一可用的选项是“制作复合路径”，但它会弄乱形状，即使使用后一个选项也会生成一个复杂的段，我不知道如何在 setter 中使用。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:28:13.870

您可以在 setter 中使用任何内容，无需将其归结，只需使用元素语法，例如

```
<Setter Property="LoremIpsum">
    <Setter.Value>
         <Geometry>
              <!-- ... -->
         </Geometry>
    </Setter.Value>
</Setter> 
```

您需要注意只有一个父对象的对象，例如框架元素，因为 setter 只创建一个实例，该实例用于使用该样式的所有控件。

# mysql - MySQL删除连接与多个ON字段

> ID：11423425
> 
> 赞同：0
> 
> 时间：2012-07-10T23:22:34.943
> 
> 标签：mysql

我在创建语句以删除具有多个字段连接的记录时遇到问题。我已经搜索并找到了许多解决方案，但仍然对我不起作用。

我有两个表：orders.profile 和 orders.qualified

没有一个简单的单个字段可以连接，而是多个。基本上基于客户的需求，存储在其个人资料中的某些项目可能不符合地理位置，因此需要将其删除。

这是我一直在玩的，目前我收到 UNKNOWN TABLE 错误，当我从表定义中删除数据库时，我收到 NO DATABASE SELECTED 错误。

```
DELETE FROM orders.profile
USING orders.profile AS p
LEFT OUTER JOIN orders.qualified AS q
ON p.cust_id = q.cust_id
AND p.job_number = q.job_number
AND p.job_seg = q.job_seg
AND p.zip = q.zip
AND p.carrier_route = q.carrier_route
WHERE p.cust_id = {the cust_id in question}
AND p.job_number = {the job number in question}
and q.qualified = 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:51:01.143

`USING`尝试不带语句的删除：

```
DELETE p FROM
orders.profile AS p
  LEFT OUTER JOIN orders.qualified AS q
  ON p.cust_id = q.cust_id ... 
```

如果这不起作用，那么还有一些更根本的事情正在发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:08:53.883

根据 Holger Brandt 的回答，我可以通过定义数据库和别名来完成这项工作。

所以查询应该是这样的：

```
DELETE orders.p
FROM orders.profile AS p
LEFT OUTER JOIN orders.qualified AS q
ON p.cust_id = q.cust_id
AND p.job_number = q.job_number
AND p.job_seg = q.job_seg
AND p.zip = q.zip
AND p.carrier_route = q.carrier_route
WHERE p.cust_id = {the cust_id in question}
AND p.job_number = {the job number in question}
and q.qualified = 0; 
```

# c++ - libuv 与 Boost/ASIO 相比如何？

> ID：11423426
> 
> 赞同：264
> 
> 时间：2012-07-10T23:22:42.963
> 
> 标签：c++, boost, boost-asio, libuv

我会对以下方面感兴趣：

*   范围/功能
*   表现
*   到期

* * *

## 回答 #1

> 赞同：537
> 
> 时间：2012-11-04T16:38:29.617

## 范围

[Boost.Asio](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio.html)是一个 C++ 库，最初专注于网络，但它的异步 I/O 功能已扩展到其他资源。此外，由于 Boost.Asio 是 Boost 库的一部分，它的范围略有缩小，以防止与其他 Boost 库重复。例如，Boost.Asio 不会提供线程抽象，因为[Boost.Thread](https://www.boost.org/doc/libs/1_69_0/doc/html/thread.html)已经提供了一个。

另一方面，[libuv](https://libuv.org/)是一个 C 库，旨在成为[Node.js](https://nodejs.org/)的平台层。它为Windows上的[IOCP](https://en.wikipedia.org/wiki/Input/output_completion_port) 、 macOS上的[kqueue](https://en.wikipedia.org/wiki/Kqueue)和Linux上的[epoll](https://en.wikipedia.org/wiki/Epoll)提供了抽象。此外，它的范围似乎略有增加，包括抽象和功能，例如线程、线程池和线程间通信。

每个库的核心都提供了事件循环和异步 I/O 功能。它们在一些基本功能上有重叠，例如计时器、套接字和异步操作。libuv 的范围更广，并且提供了额外的功能，例如线程和同步抽象、同步和异步文件系统操作、进程管理等。相比之下，Boost.Asio 的原始网络关注点浮出水面，因为它提供了更丰富的网络相关的集合功能，例如 ICMP、SSL、同步阻塞和非阻塞操作，以及常见任务的更高级别操作，包括从流中读取直到收到换行符。

* * *

## 功能列表

以下是一些主要功能的简要并排比较。由于使用 Boost.Asio 的开发人员通常有其他可用的 Boost 库，所以我选择考虑额外的 Boost 库，如果它们是直接提供的或者实现起来很简单。

```
                         libuv 提升
事件循环：是的 Asio
线程池：是 Asio + Threads
穿线：              
  线程：是的
  同步：是线程
文件系统操作：
  同步：是文件系统
  异步：是 Asio + 文件系统
计时器：是的
分散/聚集 I/O [1] : 无 Asio
联网：
  ICMP：没有 Asio
  DNS 解析：仅异步 Asio
  SSL：没有 Asio
  TCP：仅异步 Asio
  UDP：仅异步 Asio
信号：
  处理：是的
  发送：是 否
工控机：
  UNIX 域套接字：是 Asio
  Windows 命名管道：是 Asio
流程管理：
  分离：是过程
  I/O 管道：是 进程
  产卵：是过程
系统查询：
  中央处理器：是 否
  网络接口：是 否
串行端口：否 是
TTY：是的 不是的
共享库加载：是扩展[2]
```

[1.[分散/收集I/O](https://en.wikipedia.org/wiki/Vectored_I/O)。]

[2\. [Boost.Extension](https://web.archive.org/web/20150527052526im_/http://boost-extension.redshoelace.com:80/docs/boost/extension/index.html)从未提交给 Boost 进行审查。[如此处](https://web.archive.org/web/20170318102850im_/http://blog.redshoelace.com/2010/01/explanation.html)所述，作者认为它是完整的。]

### 事件循环

虽然 libuv 和 Boost.Asio 都提供事件循环，但两者之间存在一些细微差别：

*   虽然 libuv 支持多个事件循环，但它不支持从多个线程运行相同的循环。因此，在使用默认循环 ( `uv_default_loop()`) 时需要小心，而不是创建新循环 ( `uv_loop_new()`)，因为另一个组件可能正在运行默认循环。
*   Boost.Asio 没有默认循环的概念；都是`io_service`它们自己的循环，允许多个线程运行。为了支持这一点，Boost.Asio以牺牲一些[性能为代价执行](https://cmeerw.org/blog/746.html#746)[内部锁定](https://stackoverflow.com/questions/1234750/1238315)。Boost.Asio 的修订[历史](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/history.html)表明已经进行了多项性能改进以最小化锁定。

### 线程池

*   libuv 提供了一个线程池，通过`uv_queue_work`. 线程池大小可通过环境变量进行配置`UV_THREADPOOL_SIZE`。该工作将在事件循环之外和线程池内执行。一旦工作完成，完成处理程序将在事件循环中排队运行。
*   虽然 Boost.Asio 不提供线程池，但由于允许多个线程调用，它`io_service`可以很容易地作为一个线程池运行。这将线程管理和行为的责任交给用户，如[本](https://stackoverflow.com/questions/12215395)例所示。`io_service``run`

### 线程和同步

*   libuv 提供了对线程和同步类型的抽象。
*   [Boost.Thread](https://www.boost.org/doc/libs/1_69_0/doc/html/thread.html)提供了线程和同步类型。这些类型中的许多类型都严格遵循 C++11 标准，但也提供了一些扩展。由于 Boost.Asio 允许多个线程运行单个事件循环，它提供了[strands](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/overview/core/strands.html)作为创建事件处理程序的顺序调用的一种方法，而无需使用显式锁定机制。

### 文件系统操作

*   libuv 为许多文件系统操作提供了抽象。每个操作有一个函数，每个操作可以是同步阻塞或异步。如果提供了回调，则操作将在内部线程池中异步执行。如果未提供回调，则调用将是同步阻塞的。
*   [Boost.Filesystem](https://www.boost.org/doc/libs/1_69_0/libs/filesystem/doc/index.htm)为许多文件系统操作提供同步阻塞调用。这些可以结合 Boost.Asio 和线程池来创建异步文件系统操作。

### 联网

*   libuv 支持对 UDP 和 TCP 套接字的异步操作，以及 DNS 解析。应用程序开发人员应该知道底层文件描述符设置为非阻塞。因此，本机同步操作应检查 or 的返回值和*errno*。`EAGAIN``EWOULDBLOCK`
*   Boost.Asio 的网络支持更丰富一些。除了 libuv 的网络提供的许多功能之外，Boost.Asio 还支持 SSL 和 ICMP 套接字。此外，除了异步操作之外，Boost.Asio 还提供同步阻塞和同步非阻塞操作。有许多独立函数提供常见的高级操作，例如读取一定数量的字节，或者直到读取指定的分隔符。

### 信号

*   libuv 通过其类型和操作提供抽象`kill`和信号处理。`uv_signal_t``uv_signal_*`
*   Boost.Asio 不提供对 的抽象`kill`，但它[`signal_set`](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/signal_set.html)提供信号处理。

### 工业PC

*   libuv通过单一类型抽象[Unix 域套接字](https://en.wikipedia.org/wiki/Unix_domain_socket)和[Windows 命名管道。](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365590(v=vs.85).aspx)`uv_pipe_t`
*   Boost.Asio 将两者分为[`local::stream_protocol::socket`](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/local__stream_protocol/socket.html)or[`local::datagram_protocol::socket`](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/local__datagram_protocol/socket.html)和[`windows::stream_handle`](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/windows__stream_handle.html)。

* * *

## API 差异

虽然 API 仅基于语言而有所不同，但这里有一些主要区别：

### 操作和处理程序关联

在 Boost.Asio 中，操作和处理程序之间存在一对一的映射。例如，每个[`async_write`](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/async_write/overload1.html)操作都会调用一次*WriteHandler*。许多 libuv 操作和处理程序都是如此。但是，libuv`uv_async_send`支持多对一映射。多次`uv_async_send`调用可能会导致*uv_async_cb*被调用一次。

### 调用链与观察者循环

在处理任务时，例如从流/UDP 读取、处理信号或等待计时器，Boost.Asio 的异步调用链更加明确。使用 libuv，可以创建一个观察者来指定对特定事件的兴趣。然后为观察者启动一个循环，其中提供回调。收到感兴趣的事件后，将调用回调。另一方面，Boost.Asio 需要在每次应用程序有兴趣处理事件时发出一个操作。

为了帮助说明这种差异，这里有一个 Boost.Asio 的异步读取循环，其中`async_receive`调用将被多次发出：

```
void start()
{
  socket.async_receive( buffer, handle_read ); ----.
}                                                  |
    .----------------------------------------------'
    |      .---------------------------------------.
    V      V                                       |
void handle_read( ... )                            |
{                                                  |
  std::cout << "got data" << std::endl;            |
  socket.async_receive( buffer, handle_read );   --'
} 
```

这是与 libuv 相同的示例，`handle_read`每次观察者观察到套接字有数据时都会调用 where：

```
uv_read_start( socket, alloc_buffer, handle_read ); --.
                                                      |
    .-------------------------------------------------'
    |
    V
void handle_read( ... )
{
  fprintf( stdout, "got data\n" );
} 
```

### 内存分配

由于 Boost.Asio 中的异步调用链和 libuv 中的 watchers，内存分配通常发生在不同的时间。对于观察者，libuv 将分配推迟到它接收到需要内存来处理的事件之后。分配是通过用户回调完成的，在 libuv 内部调用，并推迟应用程序的释放责任。另一方面，许多 Boost.Asio 操作要求在发出异步操作之前分配内存，例如`buffer`for的情况`async_read`。Boost.Asio 确实提供[`null_buffers`](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/null_buffers.html)了 , 可用于监听事件，允许应用程序将内存分配推迟到需要内存时，尽管这已被弃用。

这种内存分配差异也出现在`bind->listen->accept`循环中。使用 libuv，`uv_listen`创建一个事件循环，当连接准备好被接受时将调用用户回调。这允许应用程序延迟分配客户端，直到尝试连接。另一方面，Boost.Asio[`listen`](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/basic_socket_acceptor/listen/overload1.html)只改变[`acceptor`](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/ip__tcp/acceptor.html). 侦听连接事件，并要求在[`async_accept`](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/basic_socket_acceptor/async_accept.html)调用之前分配对等方。

* * *

## 表现

不幸的是，我没有任何具体的基准数据来比较 libuv 和 Boost.Asio。但是，我观察到在实时和近实时应用程序中使用这些库的性能相似。如果需要硬数字，libuv 的[基准测试](https://github.com/libuv/libuv/tree/v1.x/test)可以作为起点。

此外，虽然应该进行分析以识别实际瓶颈，但请注意内存分配。对于 libuv，内存分配策略主要限于分配器回调。另一方面，Boost.Asio 的 API 不允许分配器回调，而是将分配策略推送到应用程序。但是，Boost.Asio 中的处理程序/回调可以被复制、分配和解除分配。Boost.Asio 允许应用程序提供[自定义内存分配](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/overview/core/allocation.html)函数，以便为处理程序实现内存分配策略。

* * *

## 到期

### Boost.Asio

Asio 的开发至少可以追溯到 OCT-2004，经过 20 天的同行评审后，它于 2006 年 3 月 22 日被 Boost 1.35 接受。它还[用作 TR2 的 Networking Library Proposal](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2175.pdf)的参考实现和 API 。Boost.Asio 有大量的[文档](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference.html)，尽管它的用处因用户而异。

API 也有相当一致的感觉。此外，异步操作在操作名称中是明确的。比如`accept`是同步阻塞，`async_accept`是异步的。API 为常见的 I/O 任务提供免费功能，例如，从流中读取直到 a`\r\n`被读取。还注意隐藏一些特定于网络的细节，例如`ip::address_v4::any()`表示 的“所有接口”地址`0.0.0.0`。

最后，Boost 1.47+ 提供了[处理程序跟踪](https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/overview/core/handler_tracking.html)，这在调试时可以证明是有用的，以及对 C++11 的支持。

### 库夫

根据他们的 github 图，Node.js 的开发至少可以追溯到[FEB-2009](https://github.com/nodejs/node/graphs/contributors)，而 libuv 的开发可以追溯到[MAR-2011](https://github.com/libuv/libuv/graphs/contributors)。[uvbook](https://nikhilm.github.io/uvbook/index.html)是介绍libuv的好地方。API 文档在[这里](http://docs.libuv.org/en/v1.x/index.html)。

总体而言，API 相当一致且易于使用。一个可能引起混淆的异常是`uv_tcp_listen`创建了一个观察者循环。这与其他通常具有一`uv_*_start`对`uv_*_stop`函数来控制观察者循环生命周期的观察者不同。此外，一些`uv_fs_*`操作有相当数量的参数（最多 7 个）。通过回调（最后一个参数）的存在来确定同步和异步行为，可以减少同步行为的可见性。

最后，快速浏览一下 libuv[提交历史](https://github.com/libuv/libuv/commits/v1.x)会发现开发人员非常活跃。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-10-30T12:27:15.747

好的。我在使用这两个库方面都有一些经验，可以澄清一些事情。

首先，从概念的角度来看，这些库的设计完全不同。它们具有不同的架构，因为它们具有不同的规模。Boost.Asio 是一个大型网络库，旨在与 TCP/UDP/ICMP 协议、POSIX、SSL 等一起使用。Libuv 只是主要用于 Node.js的[IOCP](http://en.wikipedia.org/wiki/Input/output_completion_port)的跨平台抽象层。所以 libuv 在功能上是 Boost.Asio 的一个子集（通用功能只有 TCP/UDP 套接字线程、定时器）。既然如此，我们可以只使用几个标准来比较这些库：

1.  与 Node.js 集成 - Libuv 更好，因为它是针对此的（我们可以完全集成它并在各个方面使用，例如，云，例如 windows azure）。但 Asio 也实现了与 Node.js 事件队列驱动环境中几乎相同的功能。
2.  IOCP 性能 - 我看不出有很大的不同，因为这两个库都抽象了底层 OS API。但他们以不同的方式做到这一点：Asio 大量使用 C++ 功能，例如模板，有时还使用 TMP。Libuv 是一个原生的 C 库。但是尽管如此，IOCP 的 Asio 实现还是非常高效的。Asio 中的 UDP 套接字不够好，最好使用 libuv。

    与 C++ 新特性的集成：Asio 更好（Asio 1.51 广泛使用 C++11 异步模型、移动语义、可变参数模板）。在成熟度方面，Asio 是一个更稳定、更成熟的项目，具有良好的文档（如果将其与 libuv 比较标题描述），互联网上的大量信息（视频会谈，博客：[http ://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio?pg =1](http://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio?pg=1)等）甚至书籍（不适合专业人士，但尽管如此：[http](http://en.highscore.de/cpp/boost/index.html) ://en.highscore.de/cpp/boost/index.html ）。Libuv只有一本在线书（但也不错）[http://nikhilm.github.com/uvbook/index.html](http://nikhilm.github.com/uvbook/index.html)和几个视频谈话，所以很难知道所有的秘密（这个图书馆有很多）。有关功能的更具体讨论，请参阅下面的评论。

作为结论，我应该说这完全取决于您的目的，您的项目以及您打算做什么。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-03-25T14:36:57.210

一个巨大的不同是 Asio 的作者 (Christopher Kohlhoff) 正在整理他的库以包含在 C++ 标准库中，请参阅[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2175 .pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2175.pdf)和[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4370.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4370.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-20T04:14:00.290

添加可移植性状态：截至发布此答案并根据我自己的尝试：

*   Boost.ASIO 没有对 iOS 和 Android 的官方支持，例如，它的构建系统不适用于开箱即用的 iOS。
*   libuv 可以轻松地为 iOS 和 Android 构建，并在[其文档](https://github.com/libuv/libuv/blob/v1.x/README.md)中对 Android 提供官方支持。我自己的基于 Autotools 的项目的通用 iOS 构建脚本可以正常工作。

# wpf - 如何在代码后面访问，Listbox CustomItem datacontext？

> ID：11423428
> 
> 赞同：1
> 
> 时间：2012-07-10T23:23:10.653
> 
> 标签：wpf, xaml, data-binding, datacontext, listboxitem

如何访问 QuestionControl 中的问题实体？

```
 <ListBox ItemsSource="{Binding QuestionEntityList}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <my:QuestionControl x:Name="diskInfo" DataContext={?}/>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:02:24.863

我解决了我的问题。我尝试在 UserControl 初始化方法中访问绑定对象（实体），并且 datacontext 总是返回 null。我尝试用户控件加载方法最终访问 DataContext 中的实体：S

对不起我的英语很差...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:31:36.787

我不知道我是否理解你的问题。但是当列表框项目源是问题实体的集合时，每个项目的数据上下文就是问题实体。因此，对于每个项目，列表框都会创建一个问题控件，其 datacontext 设置为 questionentity。

```
 <ListBox ItemsSource="{Binding QuestionEntityList}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <my:QuestionControl />//one questioncontrol for each item in the collection, the dataconext is set to this item automatically
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
   </ListBox> 
```

# php - 如何防止我的算法迭代和回显已经存在的值？

> ID：11423431
> 
> 赞同：1
> 
> 时间：2012-07-10T23:23:34.133
> 
> 标签：php, codeigniter

我正在尝试动态创建代表一周中 5 天的 5 个 div。在每个 div 中，我试图遍历从我的代码点火器模型中获取的数据，并根据与该项目相关的项目、日期和任务回显一系列无序列表。我正在从我的项目表中获取数据，以在 h4 标签中回显项目名称，并从任务表中获取数据，以回显项目 h4 下的相关任务。我遇到的问题是我似乎无法找到一种方法来防止我的算法重复项目名称和相关任务。换句话说，如果有两个任务与一个项目相关，则该项目和两个相关任务将被回显两次。这是帮助解释问题的图像：

![在此处输入图像描述](../Images/403c62bb256759eecf8d35a581ab5879.png)

```
 <?php for($counter = 0; $counter < 5; $counter++): ?><!-- loops through and creates divs -->
        <?php 
          $date = date("F j, Y");
          $refDate = date("Y-m-d");
          $counterForLi = 0;
        ?>
                  <div class="span2 check-list date-container">
                    <div id="form-to-date">
                      <div class="replace">

                      <h2 class="day"></h2>
                        <h4 class="thedate">
                          <?php
                            if ($counter > 0) {
                              $tomorrow = mktime(0, 0, 0, date("m"), date("d")+$counter, date("y"));
                              $refDate = date("Y-m-d", $tomorrow);
                              $date = date("F j, Y", $tomorrow);
                              echo $date;
                            } else {
                              echo $date;
                            }
                          ?>
                        </h4>
                        <input type="hidden" name="thedate" class="hidden-date" value="<?php echo $refDate; ?>">

                            <?php if(isset($tasks)) : foreach($tasks as $taskRow) :?> <!-- loop through the tasks -->
                              <?php if($taskRow->dateadded == $refDate) : ?> <!-- in the context of the right date -->
                                <?php if(isset($taskRow->_project_fk)) : ?>
                                    <?php
                                        $relatedProjectId = $taskRow->_project_fk;
                                        $relatedProjectName = NULL;
                                        if(!isset($relatedProjectName)) {
                                            foreach ($projects as $ProjectRow) {
                                                if ($ProjectRow->__project_pk == $relatedProjectId) {
                                                    $relatedProjectName = $ProjectRow->project_name;
                                                    echo "<h4>" . $relatedProjectName . "</h4>";
                                                echo "<ul>";
                                                }
                                            }

                                        foreach ($tasks as $task) {
                                          if ($task->_project_fk == $relatedProjectId && $task->dateadded == $refDate) {
                                            echo "<li>".$task->task_name."</li>";
                                          }

                                        }
                                        echo "</ul>";
                                    } 

                                    ?>

                                <?php endif; ?>

                              <?php endif; ?>

                            <?php endforeach; ?>

                            <?php endif; ?>

                          </ul>
                        </div><!-- /replace -->
                      </div><!-- /form-to-date -->
                    </div>
    <?php endfor; ?> 
```

我意识到这段代码有点乱，所以如果你需要澄清，请询问。

编辑：这是我的任务数组的结构 ![在此处输入图像描述](../Images/731a21f3458ce294ce611c1aedaeae5c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:58:57.920

首先创建一个分层数组结构，按项目和日期对任务进行分组。从您的示例和数据结构看来，每个任务都属于一个项目并且是在一个日期开始的。对于每个日期，您希望显示在该日期开始至少有一个任务的每个项目以及在该日期开始的那些任务。

```
$tasksByProjectAndDate = array();
foreach ($tasks as $task) {
    $tasksByProjectAndDate[$task->dateadded][$task->_project_fk][] = $task;
} 
```

接下来创建从项目 ID (PK) 到项目的映射。这使得查找每个项目的名称更快，因为您只循环所有项目一次。

```
$projectsById = array();
foreach ($projects as $project) {
    $projectsById[$project->__project_pk] = $project;
} 
```

最后，您已准备好构建您的 UI。我将把它放入 HTML 中，由您决定，然后输出一个简单的文本视图。逻辑流程将是相同的。

```
foreach ($tasksByProjectAndDate as $date => $tasksByProject) {
    echo "$date\n";
    foreach ($tasksByProject as $projectId => $tasks) {
        $project = $projectsById[$projectId];
        echo "  $project->project_name\n";
        foreach ($tasks as $task) {
            echo "    $task->task_name\n";
        }
    }
} 
```

# neo4j - 使用图形数据库进行域建模过滤

> ID：11423432
> 
> 赞同：0
> 
> 时间：2012-07-10T23:23:34.843
> 
> 标签：neo4j, graph-databases

任何人都可以帮助以最佳方式表示/查询以下问题

1.  产品可以在商店出售，p1 -> s1, p2 -> s1, p1 -> s2 ...
2.  产品只能在商店中销售，具体取决于商店的地理位置（北、南、东...）和位置大小（小、中、大）或商店/产品属性的组合。这些限制因素决定了哪些产品将在商店中销售。

我想问一下，我是store s1，我可以卖什么产品？

感谢任何关于解决这个问题的好方法的想法，我认为像 neo4j 这样的图形数据库是合适的，但使用这些数据库的经验有限，所以任何指针都是有价值的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:48:16.440

您可以将位置和大小建模为节点，并将商店连接到它们，然后您可以使用 Cypher 对它们进行查询，[http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html](http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html)，请参阅[http://tinyurl.com/d8lnvbm](http://tinyurl.com/d8lnvbm)示例

```
START p=node(1) match p-[:SOLD_IN]->store-[:LOCATED]->l, store-[:CATEGORY]->c
WHERE l.name="north" AND c.name="big" 
RETURN store 
```

# javascript - 使用 Jquery 检查时更改复选框的背景颜色

> ID：11423438
> 
> 赞同：1
> 
> 时间：2012-07-10T23:24:46.723
> 
> 标签：javascript, jquery, html, css

我正在尝试使用其中的复选框更改 div 的背景颜色。我制作了这个[http://jsfiddle.net/B7P65/](http://jsfiddle.net/B7P65/)以供参考。我正在尝试用“突出显示”div 替换父 div，所以我认为切换 div 会起作用。取消选中该复选框时，我希望背景颜色恢复正常（或删除“突出显示” div）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:26:38.083

您错误地使用了[parent()](http://api.jquery.com/parent/)方法。您想`toggleClass()`从方法中提取`parent()`方法并将其单独放置。

尝试以下更新：

```
$(this).parent().toggleClass("highlight"); 
```

完全的：

```
$("input:checkbox").click(function() {
    var actualTime = "";
    $(this).parent().toggleClass("highlight");
}); 
```

演示：http: [//jsfiddle.net/Hmq65/](http://jsfiddle.net/Hmq65/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T23:27:57.980

**工作演示** [http://jsfiddle.net/q3NN2/](http://jsfiddle.net/q3NN2/) **或另一种方式** [http://jsfiddle.net/KUhFp/](http://jsfiddle.net/KUhFp/)

第二个演示展示了如何使用`.is(':checked')`额外的东西，如果你想使用被检查的逻辑，`:)`

**代码**

```
$("input:checkbox").click(function() {
    var actualTime = "";
    $(this).parent().toggleClass("highlight");
}); 
```

**代码**

```
$("input:checkbox").click(function() {
    var actualTime = "";
    if ($(this).is(':checked')) {
        $(this).parent().addClass("highlight");

    } else {
        $(this).parent().removeClass("highlight");
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T23:27:39.987

试试这个：http: [//jsfiddle.net/B7P65/1/](http://jsfiddle.net/B7P65/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T05:43:14.530

此代码在选中时用于突出显示，在未选中时用于删除类。

**JavaScript：**

```
 $('#your table id tr')
    .filter(':has(:checkbox:checked)')
    .addClass('highlight')
    .end()
    .click(function(event) {
        $(this).toggleClass('highlight');
    if (event.target.type !== 'checkbox') {
        $(':checkbox', this).attr('checked', function() {
        return !this.checked;
    });
  }
}); 
```

**CSS：**

```
.highlight{
    background-color:green;
} 
```

# android - 如何从内存中保存和加载数据，不是 SD，不是 SQL，不是共享首选项

> ID：11423447
> 
> 赞同：0
> 
> 时间：2012-07-10T23:25:50.530
> 
> 标签：android, file-io, filesystems

哇，我不敢相信有多少与加载和保存到内部存储器有关的问题。我发现我只能保存到与我的应用程序相关的保护区。我不确定我什至可以在那个区域创建一个目录。存储到我已经掌握的 SD，但要求是如果没有可用的 SD 卡或已被删除，则应用程序继续能够加载和保存用户设置。我有 120 个不同的数据项，所以共享偏好不是办法。缓存不是持久的。

我目前有一种方法：

```
public static void SaveUserPrefs()
{
 try
{
 //FileOutputStream fos = openFileOutput("userPrefs.dat", Context.MODE_PRIVATE);
 FileOutputStream fos = new FileOutputStream( "userPrefs.dat"); 
 BufferedOutputStream bos = new BufferedOutputStream(fos); //to get a buffered stream  
 ObjectOutputStream oos = new ObjectOutputStream(bos);
 oos.writeFloat(versionNumber);
 oos.writeInt(autoWifiStart);
 oos.writeInt(autoAirPlane);
 ... many more items and file close 
```

我得到文件未找到异常 /userPrefs.dat 只读文件系统 您会认为相同的代码可以在外部或内部工作，但不是。我也尝试了注释掉代码，结果相同。我在哪里以及如何保存这些数据？我需要做一些不同的事情来加载它吗？我确实将权限设置为 save_external_Storage。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:34:42.757

> 我发现我只能保存到与我的应用程序相关的保护区。

在内部存储上，这是正确的。

> 我不确定我什至可以在那个区域创建一个目录。

用于`getFilesDir()`检索`File`指向内部存储上应用程序区域的对象，然后调用`mkdirs()`该`File`对象以创建子目录。后者是标准的 Java 文件 I/O。

> 我有 120 个不同的数据项，所以共享偏好不是办法。

中的项目数量没有特别限制`SharedPreferences`。`SharedPreferences`存储在 XML 文件中。

> 我得到文件未找到异常 /userPrefs.dat 只读文件系统

您提供了无效路径。用于`getFilesDir()`获取`File`指向内部存储上应用程序区域的对象，然后使用适当的`File`构造函数创建`File`指向内部存储上特定文件的对象。在构造函数中使用后一个`File`对象`FileOutputStream`。同样，除了 之外`getFilesDir()`，这是标准的 Java 文件 I/O。

> 你会认为相同的代码可以在外部或内部工作，但不是

该代码也不适用于外部存储，因为您提供的路径不在外部存储上。

> 我在哪里以及如何保存这些数据？

就个人而言，我永远不会使用`ObjectOutputStream`. 对于 120 个项目，我肯定会考虑使用 SQLite 数据库，否则我会将数据序列化为 JSON 或 XML。这些选项中的任何一个都比恕我直言更容易调试`ObjectOutputStream`。

> 我需要做一些不同的事情来加载它吗？

您需要按照标准 Java 文件 I/O构造`File`指向相​​关文件的适当对象，以便与某种类型的.`InputStream`

> 我确实将权限设置为 save_external_Storage。

`WRITE_EXTERNAL_STORAGE`不需要写入内部存储。

# php - 使用docx而不是doc强制下载php问题

> ID：11423450
> 
> 赞同：1
> 
> 时间：2012-07-10T23:26:07.270
> 
> 标签：php, header, mime-types, attachment, doc

我正在使用典型的

```
if($ext == "doc" && file_exists($file)) {
    header("Content-disposition: attachment; filename= '$filename'");
    header('Content-type: application/msword');
    readfile($file);
           } 
```

这为文件提供了完美的服务。但是，当我使用：

```
if($ext == "doc" && file_exists($file)) {
    header("Content-disposition: attachment; filename= '$filename'");
    header('Content-type: application/vnd.openxmlformats officedocument.wordprocessingml.document');
    readfile($file);

    } 
```

下载的文档在我用word打开时显示错误，表明它已损坏。但是，如果我单击前进它打开就好了。

如何使此损坏的文件错误不会发生。

# android - 使用 Android 作为触摸屏 HMI

> ID：11423451
> 
> 赞同：1
> 
> 时间：2012-07-10T23:26:19.240
> 
> 标签：android, android-sdk-2.3

我被要求使用 Android 平板电脑开发 HMI 应用程序，但我不确定使用平板电脑是否是一个好的解决方案（我对 Android 的开发经验为零）。

该项目将包括两个硬件设备： 1\. 一个监控和控制水系统的设备（这是系统的大脑） 2\. 一个允许人类查看大脑并与大脑交互的触摸屏（这是 HMI )

大脑和 HMI 将被构建在一个盒子中，使其看起来好像是一个设备。

通常，用于 HMI 的设备的制造意图是 HMI 将用于一个特定的应用程序，并且这些设备通常运行 Linux、Windows Embedded 等，开发人员对 HMI 的方式有很多控制权将运行，外观和感觉。

谁能告诉我 Android SDK 为开发人员提供了多少控制权？IE

*   Android SDK 是否使开发人员可以对设备执行几乎任何他/她想做的事情？
*   开发人员能否锁定（拒绝访问）Android 平板电脑的特定功能？

对于我即将开始的这个项目，我对使用 Android 平板电脑还有一些其他顾虑，但我想上述问题的答案将使我更接近于在前进的道路上做出更明智的决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:40:10.490

> Android SDK 是否使开发人员可以对设备执行几乎任何他/她想做的事情？

不会。Android SDK 使开发人员可以编写应用程序。如果您想“做几乎任何事情”，则需要能够构建自己的自定义固件以在该设备上运行。恕我直言，这种定制的固件对于这种工业情况来说几乎是必不可少*的*，无论如何。

> 开发人员能否锁定（拒绝访问）Android 平板电脑的特定功能？

通过自定义固件，是的。通过Android SDK，一般不会。

# .net - 正则表达式

> ID：11423460
> 
> 赞同：0
> 
> 时间：2012-07-10T23:27:42.810
> 
> 标签：.net, regex

我从 CSV 文件中获取数据，如下所示：

```
Rob^,
Blah,
Blah,
Fail,
Fail,
Bob^,
Stuff,
Stuff,
Stuff,
Sam^,
Stuff,
Stuff 
```

我要做的是将 Rob^ 和 Bob^ 之间的所有内容分组。到目前为止，我的正则表达式看起来像`\w+\^(,\n\w+)+`，但 Bob 被选中了。我曾尝试使用前瞻，但我没有任何成功。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:37:21.600

尝试以下操作：

```
\w+\^,\n(\w+,?\n)+ 
```

通过将 移动`,\n`到组的末尾，它可以防止您将行与其中的 a 匹配`^`，这`,?`是文件中最后一行所必需的，因为它不包含逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:32:46.800

采用：

```
Rob\^((.|\n)*)Bob\^ 
```

Rob^ 和 Bob^ 之间的所有内容都在第一组中

# c++ - C++多继承私有成员冲突

> ID：11423462
> 
> 赞同：0
> 
> 时间：2012-07-10T23:27:44.387
> 
> 标签：c++, multiple-inheritance

我的实际问题有点复杂，需要使用模板类。这是一个更简单的版本。

我有两节课：

```
class A
{
public:
   float a() { return _value; }
private:
   float _value;
};

class B
{
public:
   float b() { return _value; }
private:
   float _value;
};

class AB : public A, public B
{
public:
   // a() should return A::_value ?
   // b() should return B::_value ?
} 
```

如果该成员是私有`_value`的`A`，那么成员之间是否会有任何冲突？由于不了解该成员`B`，因此不会发生这样的冲突是有道理的。`AB`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:43:42.470

即使成员是公开的，也不会有冲突。`_value`但是，如果您尝试从`AB`的范围访问（假设`AB`继承自`A`and `B`）而不以某种方式对其进行限定，则会有歧义：

```
class A { public: float _value; };
class B { public: float _value; };
class AB : public A, public B {
public:
  void f() {
    std::cout << _value;    // Error: ambiguous reference
    std::cout << A::_value; // OK
  }
};
class AB2 : public A, public B {
public:
  using B::_value;
  void f() {
    std::cout << _value; // OK; resolves to B's version.
  }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:39:37.190

不会有任何冲突，并且每个子对象数据成员彼此不同。我相信 AB 是一个继承 A、B 的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T23:42:04.903

首先，不要忘记实际继承自`A`and `B`。

也就是说，每个成员函数都只是引用其自己类中的变量。既不`A::a()`也不`B::b()`知道对方的存在，也不知道它们将来自于并完全不同的事实。

因此，如果您将代码稍作更改，如下所示：

```
class A {
    float value_;
  public:
    float& a() { return value_; } 
};

class B {
    float value_;
  public:
    float& b() { return value_; } 
};

struct AB : A, B {
} ab; 
```

您现在会发现 after `ab.a() = 1; ab.b() = 2;`，尽管`B::value_`被修改了，但`A::value_`没有改变并`std::cout << ab.a();`打印 1。

也就是说，您可能会遇到特定于类模板的问题；例如，您可能没有意识到类模板的每个实例化都带有自己的静态变量。（我并不是说是这种情况，只是听起来您的问题与您发布的内容无关。）

# ruby - 液体错误：未定义的方法“地图”

> ID：11423466
> 
> 赞同：1
> 
> 时间：2012-07-10T23:28:03.150
> 
> 标签：ruby, gem, jekyll, liquid, octopress

我正在尝试用[Octopress](http://octopress.org)替换我的 Wordpress 博客。这是一个照片博客，所以我决定使用[photo_tag 插件](http://tritarget.org/blog/2012/05/07/integrating-photos-into-octopress-using-fancybox-and-plugin)，但有一个问题。如果我使用画廊语法，我会得到：

```
Liquid error: undefined method `map’ 
```

我能做些什么来替换那个 map 方法？我用谷歌搜索了一下，只发现[这个 github 问题](https://github.com/imathis/octopress/issues/243)告诉我必须使用`liquid 2.2.2`，但这似乎不是`jekyll`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T06:04:56.570

尝试更新所有库：

```
bundle update 
```

并修改 Gemfile：

```
gem 'jekyll', '~> 0.11.2'
...
gem 'liquid', '~> 2.3.0' 
```

然后

```
rake generate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:37:07.113

你试过用 Liquid 2.2.2 运行 Jekyll 吗？这是hack-ish，但可能有效。尝试修改您的`Gemfile`：

替换`gem 'liquid', '~> 2.3.0'`为`gem 'liquid', '= 2.3.0'`

# vbscript - vbscript 在 nsis 安装程序中不起作用，但是当我手动运行它时它可以工作

> ID：11423469
> 
> 赞同：0
> 
> 时间：2012-07-10T23:28:19.660
> 
> 标签：vbscript, nsis, binary-search, wsh

我有一个在 sqlite 文件（纯文本）中搜索字符串的 VBscript。它由我的 NSIS 安装程序运行以确定安装参数。

当我从命令行运行脚本时，它一切都按计划工作，并在文件中找到它正在寻找的字符串。但是当我突然从 nsis 安装程序中通过 ExecWait 运行它时，它说它再也找不到字符串了。它并没有说它无法打开文件或任何其他错误，它只是返回该字符串不存在。

这是 nsis 脚本中的 exec：

```
ExecWait `"$SYSDIR\wscript.exe" "$PLUGINSDIR\myscript.vbs" "success" "failure" "done" "1"` $2 
```

这是给我带来这么多麻烦的块：

```
Function LookforValue(strFile)
    iStatus = 0
    Done = false
    Const ForReading = 1

    MsgBox(S_PATTERN)
    MsgBox(F_PATTERN)   
    MsgBox(D_PATTERN)       

    Set objFSO = CreateObject("Scripting.FileSystemObject")

    objFile = 0
    Set objFile = objFSO.OpenTextFile(strFile, ForReading)
        Do Until objFile.AtEndOfStream
            strSearchString = objFile.ReadLine
            colMatchesS = InStr(strSearchString,S_PATTERN)
            colMatchesF = InStr(strSearchString,F_PATTERN)
            colMatchesD = InStr(strSearchString,D_PATTERN)

            If colMatchesS > 0 Then
                iStatus = 2
                exit do
            End If

            If colMatchesF > 0 Then
                iStatus = 3
                exit do
            End If

            If colMatchesD > 0 Then
                iStatus = 4
                exit do
            End If

        Loop
    objFile.Close

    LookforValue = iStatus 
```

结束功能

仅供参考，我使用的是 VBscript 而不是 nsis 命令，因为 nsis 对文件被另一个进程锁定感到很挑剔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T00:24:57.720

I didn't really solve the problem but i concluded it was because i was trying to use OpenTextFile on a binary file that just coincidentally didn't want to work when the other script was running it.

# actionscript-3 - ActionScript 3 - 通过浏览器动态调整 MovieClip 的大小，但保留比例

> ID：11423471
> 
> 赞同：1
> 
> 时间：2012-07-10T23:28:27.787
> 
> 标签：actionscript-3, dynamic, resize, movieclip

我有一个尺寸为：500x400 的影片剪辑。实例名称为：“main”。我有以下代码：

```
import flash.display.StageScaleMode;
import flash.display.StageAlign;
import flash.events.Event;

stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align = StageAlign.TOP_LEFT;
stage.addEventListener (Event.RESIZE, resizeHandler);

// initialize sizing
resizeHandler (null);

function resizeHandler (event:Event):void {
var sw:Number = stage.stageWidth;
var sh:Number = stage.stageHeight;

  main.height = sh;
  main.width = sw;

} 
```

如何将 MovieClip 的大小调整比例和最大尺寸保持为 500x400？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:23:58.340

这不是我的想法，所以不是 100% 它是正确的语法，但你应该明白：

```
import flash.display.StageScaleMode;
import flash.display.StageAlign;
import flash.events.Event;

var ratio:Number = Number(stage.stageWidth)/stage.stageWidth;//you need to check if stage isn't null and this ratio is valid

stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align = StageAlign.TOP_LEFT;
stage.addEventListener (Event.RESIZE, resizeHandler);

// initialize sizing
resizeHandler (null);

function resizeHandler (event:Event):void {
var sw:Number = stage.stageWidth;
var sh:Number = stage.stageHeight;
  //make with width same as stage
  main.width = sw;
  main.height = sh/ratio;//keep height proprtional
  //or you can try the other way around if you want - make main.height = sh and main.width =  sh * ratio;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:59:09.680

这段代码应该可以完成这项工作：

```
if (stage.stageWidth/500 < stage.stageHeight/400)
{
    main.scaleX = stage.stageWidth/500;
    main.scaleY = main.scaleX;
}else{
    main.scaleX = stage.stageHeight/400;
    main.scaleY = main.scaleX;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T02:19:58.190

无论影片剪辑的比例如何，以下代码都可以解决问题。如果您希望强制执行 500 x 400 的比例，您可以将 movieClipRatio 指定为 500 / 400。

```
import flash.display.StageScaleMode;
import flash.display.StageAlign;
import flash.events.Event;

stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align = StageAlign.TOP_LEFT;
stage.addEventListener (Event.RESIZE, resizeHandler);
var movieClipRatio:Number = main.width / main.height;

// initialize sizing
resizeHandler (null);

function resizeHandler (event:Event):void {
    var sw:Number = stage.stageWidth;
    var sh:Number = stage.stageHeight;

    if ( sw == 0 || sh == 0 ) {
        return; // special case to avoid
    }

    var stageRatio:Number = sw / sh;

    if ( stageRatio > movieClipRatio )  {
        // stage is proportionally wider than movieClip
        // resize by height
        main.width *= sh / main.height;
        main.height = sh;
    } else {
        // stage is proportionally taller than movieClip
        // resize by width
        main.height *= sw / main.width;
        main.width = sw;
    }

} 
```

# java - 同步方法还是整个队列？

> ID：11423473
> 
> 赞同：4
> 
> 时间：2012-07-10T23:28:44.307
> 
> 标签：java, synchronization

如果一个队列要被多个线程访问，但它目前只被一个方法修改`getNextInQueue()`，那么同步访问队列的最合适的形式是什么？

目前，我将队列声明为 a `ConcurrentLinkedQueue`，但我不想遇到多个线程正在等待释放锁的死锁。我可以处理的另一种方法是不同步队列，而是同步`getNextInQueue()`. 但是，由于将来会使用此代码，因此我认为这也不会扩展。（每个对队列进行修改的程序员都必须确保她同步操作。）

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:34:58.170

我认为最简单，最正确的方法是使用`ConcurrentLinkedQueue`. 但是，我不相信这会导致僵局。但是，我不确定的一件事是 Concurrent 包装器如何处理使用迭代器的情况。我似乎记得不得不回退到`synchronized`包装对底层集合（读取和写入）的所有调用的旧方法。不过，我很确定这就是 Concurrent 包装器正在做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T23:35:12.617

如果是`ConcurrentLinkedQueue`，并且队列状态只是线程之间共享的数据，则不需要同步任何内容。这就是使用并发集合的全部意义所在。除非您在做一些奇怪的事情，否则生产者-消费者设置不应陷入僵局。（就像让同一个线程成为生产者和消费者一样。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T23:32:44.940

只同步`getNext()`不是一个好主意——如果你想这样做，你也必须同步`insert`。

**示例：**
如果队列中没有元素并且线程 A 尝试`getNext()`执行并且没有完成该方法的执行 - 线程 B 可以将新项目插入队列，这将导致线程 A 在队列中挂起，即使有是其中的一个新项目。

**总结**：
如果一致性很重要，我会留下来`ConcurrentLinkedQueue`

# ios - 在 Xcode 中归档项目时找不到“libxml/tree.h”文件

> ID：11423475
> 
> 赞同：1
> 
> 时间：2012-07-10T23:28:53.413
> 
> 标签：ios, iphone, store

我在我的项目中使用 libxml.2.2.7.3.dylib 库，以便使用 TouchXML。当我在模拟器和 iOS 设备上运行这个项目时，我的应用程序运行时没有任何警告或错误。

但是，当我尝试归档我的项目（准备进入 App Store）时，我收到了这个错误：

> 找不到“libxml/tree.h”文件。

我知道错误与包含文件的设置有关，但我看不出问题出在哪里。我认为当我可以为 iOS 设备和模拟器编译它时，它应该可以完美运行！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T02:24:54.093

听起来您在调试版本中包含了标头搜索路径，但没有发布。检查以确保 libxml 的路径在您的构建设置中都存在。

作为进一步的解释，当您编译到设备进行测试时，通常在调试模式下进行。当您为提交或存档进行编译时，您总是在发布模式下这样做。这两种模式各有不同的设置，有时您可能会不小心在其中一种模式下设置，而在另一种模式下却没有。所以当你编译测试时，搜索路径就在那里，一切都很好，但在发布模式下它不是，你会得到那个错误。

# ruby-on-rails - 在 Rails/Ruby 中，我如何将多个表单值合并为一个模型值？

> ID：11423483
> 
> 赞同：0
> 
> 时间：2012-07-10T23:29:55.817
> 
> 标签：ruby-on-rails, activerecord

我的模型中有一个字段：birth_time，我正在尝试从 3 个表单字段构建它，但我的时间很长。我尝试了两种不同的方法。这是我在第一种方法中的表单片段：

```
 <input type="text" class="span1" name="birth_time_hour" id="birth_time_hour" placeholder="hour">
    <input type="text" class="span1" name="birth_time_minute" id="birth_time_minute" placeholder="minute">
    <select name="birth_time_meridiem" id="birth_time_meridiem" class="span1">
      <option value="am">AM</option>
      <option value="pm">PM</option>
    </select> 
```

我的模型：

```
attr_accessible :birth_time 
```

我想要在我的控制器中做的是获取这三个表单值，创建一个 Time 对象，并在保存之前将其设置为 Pick.birth_time。我在对参数 [“birth_time_hour”] 进行任何算术运算时遇到问题。如果是 PM，我想在创建 Time 对象之前添加 12。

`params["birth_time_hour"] + 12`导致`can't convert Fixnum into String` `params["birth_time_hour"].to_i`结果`exception class/object expected`。

我需要先从表单值创建一个对象吗？

我的第二种方法是将 attr_accessible 值添加到模型中，即使它们实际上并未存储在数据库中。

```
attr_accessible :birth_time_hour, :birth_time_minute, :birth_time_meridien, :birth_time 
```

然后在我的表单中（使用 simple_form）：

```
<%= f.input :birth_time, :label => "Birth time:", :as => :tel, :input_html => { :class => 'span2' }, :placeholder => 'hour' %> 
```

但这只是在尝试渲染表单时爆炸：

```
undefined method `birth_time_hour' for #<Pick:0x0000010657c248> 
```

我不太确定为什么我不能有一个 attr_accessible 。我之前将它与密码字段一起使用，它只存在于表单上，而不存在于数据库中。

编辑：当我将 attr_accessible 和 attr_accessor 用于birth_time_hour 时，它似乎效果更好。它至少可以构建表单，但我仍然不认为它是控制器中 Pick 对象的一部分。我对 attr_accessor 及其用途知之甚少，我很确定。

关于如何解决看似简单的问题的任何想法？我已经阅读了其他建议将所有 3 个值存储在数据库中的 SO 线程，这似乎很愚蠢，因为我都知道了。我真的希望不是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:54:54.907

为什么不使用 time_select？它会自动为您完成这一切。 [http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_select](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_select)

```
attr_accessible :birth_time 
```

是您模型中所需要的一切。

在您的表格中使用

```
 <%= f.time_select :birth_time %> 
```

time_select 有几个选项。请参阅手册。

* * *

你可以`composed_of` [在 Rails 中使用composed_of——什么时候使用？](https://stackoverflow.com/questions/2718367/composed-of-in-rails-when-to-use-it)

* * *

如果这还不够好，那么......我想你可以创建自己的 setter 方法。（回答你的问题）

```
def birth_time=(birth_time)
  # create the time object from birth_time

end 
```

以你的形式

```
= text_field_tag "model_name[birth_time][hr]"
= text_field_tag "model_name[birth_time][min]"
= text_field_tag "model_name[birth_time][sec]" 
```

（`f.fields_for :birth_time`如果您更喜欢生成名称的方法，也可以使用）

```
= form_for @model do |f|
    = f.fields_for :birth_time do |btf|
        - [:hr, :min, :sec].each do |n|
            = btf.text_field n 
```

现在，在您的 setter 方法中，您将获得如下所示的哈希：

```
{ 'hr' => '12', 'min' => '16', 'sec' => '26' } 
```

有了它，您可以从哈希构造您的值并将其设置为：

```
self[:birth_time] = 
```

我希望这会有所帮助。可能还有其他方法可以做到这一点，但我认为这是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:32:10.800

您似乎对 attr_accessible 的含义感到困惑。

attr_accessible 意味着您可以像这样对属性进行大规模分配`model.update_attributes({:birth_time_hour => '1'})`

但是您显然不需要这个，因为您的模型中没有字段birth_time_hour。

至于 attr_accessor 的作用，它以这种方式为你的类定义了一个 reader 和 writer

```
attr_accessor :my_var

#is the same as

def my_var
  @my_var
end

def my_var=(value)
  @my_var = value
end 
```

至于您的问题，您应该在模型中执行以下操作：

```
def birth_time_minute
  self.birth_time.min
end

def birth_time_hour
  self.birth_time.hour
end 
```

假设birth_time 是一个时间对象（这是有道理的）

# objective-c - 主视图控制器和详细视图控制器之间的通信

> ID：11423485
> 
> 赞同：1
> 
> 时间：2012-07-10T23:30:04.397
> 
> 标签：objective-c, xcode, uisplitviewcontroller

我在这个项目中使用 Xcode 4.3.3 和 Storyboards。

我有一个主视图控制器，它使用导航控制器向下钻取几个级别，直到它到达一个列表。当用户从该列表中选择一个单元格时，我希望详细视图控制器更改为新的视图控制器。然后，当用户导航回主视图控制器的顶部时，我希望详细视图控制器弹出并再次显示原始视图控制器。

我可以使用 segues 让它有点工作，但是试图让新的细节视图控制器弹出并显示原来的控制器会变得非常混乱。它还弄乱了我的 BarButtonItemPresenter 委托，该委托在纵向模式下控制主视图弹出框。有没有办法以编程方式做到这一点？如果是这样，示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:07:01.637

通过从主视图控制器到详细视图控制器的 segue 解决了它。在属性检查器中，将“Destination”设置为“Detail Split”，并将“Identifier”设置为有意义的内容（我使用了“Show Customer”）。然后在您的主视图控制器中调用它...

```
[self performSegueWithIdentifier:@"Show Customer" sender:self];
    [self setDelegate:(id<CustomerTableViewControllerDelegate>)[self.splitViewController.viewControllers objectAtIndex:1]];
//call some method here to prepare your detail view controller 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:11:02.243

答案有点晚了，你的问题有点混乱，但是......

我看到你已经标记了 uiSplitViewController。尝试在 iPad 中弹出 View 控制器时，我被难住了一段时间，这行不通。

```
[self.navigationController popViewControllerAnimated:YES]; 
```

请尝试：

```
[self.detailViewController.navigationController popViewControllerAnimated:YES]; 
```

iPad 上的拆分视图控制器似乎使用了第二个导航控制器，请记住这一点。

对不起，如果我的答案偏离轨道。

# android - authtoken 不受信任的服务器证书*

> ID：11423486
> 
> 赞同：0
> 
> 时间：2012-07-10T23:30:13.913
> 
> 标签：android, twitter4j

我正在尝试使用 twitter 4j 获取 authtoken 我将其放入 try and catch 但它始终捕获此错误 **twitter4j.TwitterException: Not trust server certificate** here 这是我的功能

```
public String BeginAuthorization()
    {
        try
        {
            if(null==currentRequestToken)
            {
                currentRequestToken=twitter.getOAuthRequestToken();
            }
            return currentRequestToken.getAuthorizationURL();
        }
        catch (TwitterException e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:12:50.517

我已经弄清楚我更改了我在 2.1 上运行的模拟器我更改为 2.2 然后我`System.setProperty("twitter4j.http.useSSL", "false");`在创建 twitter 实例之前添加了这一行并且它可以工作

# javascript - 是否可以执行两次匿名函数？

> ID：11423490
> 
> 赞同：3
> 
> 时间：2012-07-10T23:31:30.297
> 
> 标签：javascript, closures

我想定义一个自执行匿名函数，但让它使用不同的参数运行多次。

```
(function(x){ console.log(x*x)})(2)
// output: 4

// I know this syntax is wrong, I am
// demonstrating how I would imagine it being implemented
(function(x){ console.log(x*x)})(2)(5)
// output is error, desired output: 4{Newline}25 
```

是否可以？

* * *

编辑：根据@Charmander 的回答，这似乎是可能的，而且几乎可以肯定是个坏主意，但这正如我所料......

```
(function(x){ console.log(x*x); return arguments.callee})(2)(5) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T23:42:31.243

您可以将匿名函数存储在变量中。

```
var someFunction = function(x){
   console.log(x*x);
};

someFunction(5);
someFunction(6); 
```

或者，如果您真的想让它成为立即调用的函数表达式 (iife)，您可以让函数返回自身。

```
(function(x){
   console.log(x*x);
   return arguments.callee;
})(5)(6); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:36:28.437

我会说你可以做得很好：

```
var f = function(x) {
    console.log(x**x);
    return f;
};

f(5)(6)(7); 
```

有关工作示例，请参见此处：

[http://jsfiddle.net/9qAgr/](http://jsfiddle.net/9qAgr/)

现在，我承认，上面并不是真正的*匿名*函数，因为我已经给它起了一个名字（`f`）；因此，如果您的字面意思是：“是否可以在没有任何方式回溯函数本身的情况下执行此操作？” 然后我怀疑它。虽然我可能只是缺乏想象力；）

* * *

实际上，您可以通过定义一个在保持状态的同时返回自身的函数来获得更多乐趣（如果您是像我这样的书呆子，因为您在这个网站上，您可能就是这样），这要归功于 JavaScript 的能力向函数添加属性：

```
function createCalculator(operation) {
    var result = 0;

    var calculator = function(x) {
        result = operation(x, result);
        return calculator;
    };

    calculator.result = function() {
        return result;
    };

    return calculator;
};

var add = createCalculator(function(x, y) { return x + y; });

console.log(add(1)(2)(3)(4).result()); 
```

如果您想亲眼看看，这里有一个演示：

[http://jsfiddle.net/9qAgr/1/](http://jsfiddle.net/9qAgr/1/)

# git - Git问题-不在分支中？

> ID：11423491
> 
> 赞同：2
> 
> 时间：2012-07-10T23:31:31.903
> 
> 标签：git, merge, branch

首先，我怎样才能看到我目前在哪个分支？我输入了“git branch”，但它返回了

```
* (no branch)
  master 
```

那么当我提交时，这些更改将提交到哪里？

其次，我怎样才能得到我对主分支所做的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:38:07.140

当您在这种情况下提交某些内容时，提交的创建方式与正常情况相同，但没有指向它的分支。为了使之后更容易找到提交（即不记住哈希或使用 reflog）并防止垃圾收集器，即使在提交之后，您也可以创建一个分支：

```
git commit
git branch tmp 
```

之后，将更改返回给 master 的一种方法如下，假设签出的提交是 master 的父级：

```
git rebase master
git checkout master
git merge tmp
git branch -d tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:36:52.960

您当前处于“分离头”模式。所以 git 不会对你撒谎：你不在一个分支上，或者更确切地说不在一个有名字的分支上。

尽管如此，您当前的提交仍然有历史记录。我将假设您已经提交了所做的任何更改，因此您的工作副本是干净的：如果没有，请使用`git stash`or`git commit`将这些更改排除在外。

要将提交“输出”到掌握，您有两个选择。首先，您可以将 master 更改*为*当前分支：

```
git branch -d master
git branch master
git checkout master 
```

...只有在“master”中的所有更改都存在于您当前的未命名分支中时才会成功。

另一种方法是检查 master 然后在您当前的更改中合并/rebase/cherry-pick：

```
git checkout master
git merge HEAD@{1} # HEAD@{1} is "where HEAD was previously" 
```

您通过执行类似的操作进入“分离头”状态`git checkout HEAD~1`，您可以在其中检查不是分支 HEAD 的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T23:33:31.620

这应该可以将其放入本地主机并将其推送到远程源

```
 git stash
  git checkout master
  git stash pop  
  git add .
  git commit -m "my changes.."
  git push origin master 
```

# symfony1 - 找不到 symfony 学说管理生成器类

> ID：11423494
> 
> 赞同：0
> 
> 时间：2012-07-10T23:32:06.090
> 
> 标签：symfony1, doctrine, symfony-1.4, admin-generator

我在使用生成的学说生成模块中收到以下错误

```
symfony doctrine:generate-module --generate-in-cache frontend module_name ModelName 
```

我试过清除缓存。

```
Fatal error: Class '{Module Name}GeneratorConfiguration' not found 
```

我将主题更改为使用已安装并在其他生成的模块上工作的 jroller，它们可以正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:56:15.147

显然我必须在 lib 中为 ModuleNameGeneratorConfiguration 和 ModuleNameGeneratorHelper 创建类并从基类扩展

# javascript - 调试时 Javascript 在 IE 中停止工作

> ID：11423496
> 
> 赞同：0
> 
> 时间：2012-07-10T23:32:07.207
> 
> 标签：javascript, visual-studio-2010

当我在 Visual Studio 中调试时，JavaScript 突然停止在 IE 中工作。我确认禁用脚本调试未选中，并且所有 javascript 在 Chrome 中都能正常工作。

![在此处输入图像描述](../Images/d6ca29c87ec835ad7112245b1e152acd.png)

我注意到，当我运行应用程序时，.js 文件停止像往常一样加载到脚本文档中，但我不确定这是否是问题所在。

![在此处输入图像描述](../Images/600939989c50350a10a7737f94d68342.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:05:50.557

只是想让大家知道我发现了什么。如果您使用的是 IE 开发人员工具，还有另一种关闭脚本的方法。我不确定是否有一个我不知道的快捷方式启用了它，或者我不小心点击了它，但如果您发现自己处于相同的解决方案中，请打开开发人员工具点击禁用然后编写脚本，这可能是您的问题。![在此处输入图像描述](../Images/c60f6c3f946346e37784b2c68cfd0438.png)

# wpf - 如何在 WPF 中绘制一个角度（三个点）？

> ID：11423502
> 
> 赞同：1
> 
> 时间：2012-07-10T23:33:07.930
> 
> 标签：wpf, xaml, path, geometry, point

我打算创建一个关于绘制角度的软件。而且我真的不知道如何表示正确的三点位置。

例如，我需要一个我引入的值 90，我得到三点的正确位置。

直到此刻，我只需要一些关于如何使用 XAML 正确绘制线或点的帮助或想法。

谢谢。

![在此处输入图像描述](../Images/0c1254ed4da81b3ed5f172c762e8f187.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:06:06.750

使用 Path 对象来绘制这些线......和公式：

var CoordinateX = Math.Cos(Angle); var CoordinateY = Math.Sin(角度);

以弧度为单位的角度。

# ruby - 如何通过 put_wall_post 与 Koala 提及朋友

> ID：11423503
> 
> 赞同：2
> 
> 时间：2012-07-10T23:33:12.890
> 
> 标签：ruby, facebook-graph-api, sinatra, koala

我提到我的朋友使用 Koala、Ruby 和 Sinatra。我查看了文档并没有发现任何关于它的信息。记住这一点，我不想给我的朋友发消息，但我想和我一起提到他。我的代码：

```
 @graph  = Koala::Facebook::API.new(session[:access_token])
@app  =  @graph.get_object(ENV["FACEBOOK_APP_ID"])

if session[:access_token]
   @graph.put_wall_post("title temp", {
   "name" => "name temp",
   "link" => "http://www.site-temp.com/",
   "description" => "I Know temp Description",
   "picture" => "http://site-temp.com/image.jpg"
   })      
end 

```

我添加了这张图片以更好地理解我想要什么：

![在此处输入图像描述](../Images/cb2408ae1c9b7849801863f23b76734f.png)

因此，如果有人知道如何做到这一点，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:14:54.550

[在文档中](https://developers.facebook.com/docs/reference/api/user/#posts)查看“标签”选项。

# asp.net-mvc - 无法检索实体框架对象上下文以在 SimpleInjectorInitializer 中进行验证

> ID：11423506
> 
> 赞同：3
> 
> 时间：2012-07-10T23:33:44.163
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dependency-injection, ioc-container, simple-injector

好像我在安装 Simple Injector MVC3 Integration 包的时候，SimpleInjectorInitializer 放在了 App_Start 文件夹中。但是，当在 Initialize() 中调用 Verify() 方法时，它会在尝试获取实体框架对象上下文时产生此错误（我还提供了内部异常）：

```
The supplied connection string is not valid, because it contains insufficient mapping or metadata information.
    InnerException: Unable to determine application context. The ASP.NET application path could not be resolved.
        InnerException: Exception has been thrown by the target of an invocation.
            InnerException: (Shown in browser) This method cannot be called during the application's pre-start initialization phase. 
```

似乎我还必须将注册调用从 Global.asax.cs Application_Start() 移动到 SimpleInjectorInitializer 的 InitializeContainer() 方法。

我现在不完全确定该怎么做，但这个问题似乎与这个问题有点相关：[升级到 Ninject 3.0.0-rc3 后的连接字符串异常](https://stackoverflow.com/questions/9267065/connection-string-exception-after-upgrading-to-ninject-3-0-0-rc3/)

似乎应用程序正在尝试在实体框架甚至意识到它自己之前加载上下文并且无法正确解析连接字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:18:22.537

> 似乎应用程序正在尝试在实体框架甚至意识到它自己之前加载上下文并且无法正确解析连接字符串？

你是绝对正确的。该`SimpleInjectorInitializer.Initialize`方法在预应用程序启动阶段自动调用。`Verify()`尽管此时配置容器没有问题，但在您的情况下，调用它还为时过早。`Verify`只需迭代所有注册并调用`GetInstance`它们以查看它是否可以创建它。然而，在应用程序的生命周期中，无法创建实体框架对象上下文。我必须说，我认为 EF 框架对 ASP.NET 框架一无所知，这很奇怪，但不幸的是它就是这样。

要解决此问题，您可以将`Verify()`调用或完全初始化移到应用程序启动的稍后时刻。例如，您可以执行以下操作：

1.  删除**SimpleInjectorInitializer.cs**类的`[assembly: WebActivator.PreApplicationStartMethod]`（顶行） 。
***   在全局 asax 事件中添加对该`SimpleInjectorInitializer.Initialize()`方法的调用。`Application_Start()`**

 **完成此操作*后*，对象图的初始化（尤其是验证）在预初始化状态之后完成。

另一种选择是从方法中删除`container.Verify();`调用`SimpleInjectorInitializer.Initialize`，因为早期验证过程正在扼杀你。但是，请先阅读此[验证容器的配置](http://simpleinjector.codeplex.com/wikipage?title=How-to#Verifying_Configuration)，以查看替代方案，然后再执行此操作。

为方便起见，SimpleInjector.MVC NuGet 包使用`WebActivator.PreApplicationStartMethod`。它允许包“正常工作”，而无需开发人员进行任何手动编码（当然连接容器除外）来使其工作。但由于这在使用实体框架时不起作用，我们将不得不重新考虑这个策略。**

# actionscript-3 - 将图层移动到更高的 z-index，actionscript 3

> ID：11423507
> 
> 赞同：1
> 
> 时间：2012-07-10T23:34:10.033
> 
> 标签：actionscript-3, z-index, movieclip

我正在使用 Zachary Haight 的动态视频播放器[http://active.tutsplus.com/tutorials/actionscript/build-a-dynamic-video-player-with-actionscript-3-part-2-of-3/](http://active.tutsplus.com/tutorials/actionscript/build-a-dynamic-video-player-with-actionscript-3-part-2-of-3/)

并尝试添加自己的功能，我添加了一个全屏按钮，但无论我做什么，它都会在其他项目下展开，尽管它是最顶层（仅次于 actionscript 层

```
function fullScrnBtnClick(event:MouseEvent):void
{
//add code for increasing player size
    videoBox.x = stage.stageWidth;
    videoBox.y = stage.stageHeight;
    videoBox.parent.setChildIndex( videoBox, 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:24:57.617

索引 0 是底部尝试：

```
videoBox.parent.setChildIndex( videoBox, videoBox.parent.numChildren - 1); 
```

假设 videoBox.parent 是舞台上唯一的显示对象，如果有其他索引高于该索引的其他对象，它们将出现在您的视频框上方。

# php - 在代码点火器中通过 MVC 链正确发送数据

> ID：11423508
> 
> 赞同：0
> 
> 时间：2012-07-10T23:34:14.553
> 
> 标签：php, model-view-controller, codeigniter

由于我是代码点火器和 MVC 的新手，我正在缓慢但肯定地通过我存储在数据库中的数据让我的登录表单登录用户。

我从论坛的文章和建议中拼凑了我当前的版本，但是在这一点上我有点困惑，为什么数据似乎没有被正确存储和发送。

如果密码不正确，我将登录表单设置为重新加载表单（最终会添加一条消息）

话虽如此，当我输入正确的登录信息时，它会重新加载页面。那只能告诉我，我没有与数据库正确通信，或者没有正确发送和/或存储我的`$data`变量的信息。

这是我的代码明智的：

模型：

```
<?php

class User_model extends CI_Model {
   function __construct()
        {
            // Call the Model constructor
            parent::__construct();
        }

    function login($data = array())
    {
    // validate data
    if( !empty($data) ) return FALSE;

    // retrieve query
    $query = $this->db
            ->from('users')
            ->where($data)
            ->get();

    // Check if query row exists
    if($query->row())
    {
        // Query row exists, return query row
        return $query->row();
    }
    else
    {
        // Query row doesn't exist, return FALSE
        return FALSE;
    }
  }
} 
```

看法：

```
title>Login</title>

<!--MAKE SURE SIGNED OUT HEADER IS IMPLEMENTED FOR ALL SIGNED OUT PAGES INCLUDING THIS ONE-->

<div class="structure clearfix">
    <h1 class="title_header">
        Sign In
    </h1>
    <div id="signin_form">
        <?php
        echo validation_errors(); 
        echo form_open('auth/validate_credentials');
        echo "<div class='form_text_signin'>";
        echo "Email";
        echo "</div>";
        echo form_input('email');
        echo "<div class='form_text_signin'>";
        echo "Password";
        echo "</div>";
        echo form_input('password');
        echo form_submit('submit', 'Submit');
        echo form_close();
        ?>
    </div>
</div> 
```

控制器：

```
<?php
class Auth extends CI_Controller {
    function __construct()
        {
            // Call the Model constructor
            parent::__construct();
        }

    // this is automatically called if no other function is called
    // it simply turns around and calls the login() function to show the login page

    public function index() {

        $this->login();
    }

    public function login() {   
    $data['main_content'] = 'auth/login';
    $this->load->view('includes/templates/main_page_template', $data);

    }

    function validate_credentials () {
        $query = $this->load->model('user_model');

        if($query)
        {
            $data = array(
                'email' => $this->input->post('email'),
                'password' => $this->input->post('password'),
                'is_logged_in' => true
            );

            $this->session->set_userdata($data);
            redirect('account/dashboard');
        }
        else
        {
            $this->index();
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:01:29.443

看起来您在任何时候都没有从您的 user_model 类调用 login 方法 - 您只是在实例化该类。你应该从你的控制器调用模型方法——我没有测试过这段代码，但希望它能让你走上正轨：

```
 function validate_credentials () {
        $this->load->model('User_model');
        $data = array(
            'email' => $this->input->post('email'),
            'password' => $this->input->post('password')
        );
        $query = $this->User_model->login($data);

        if($query)
        {
            $data['is_logged_in'] = true;
            $this->session->set_userdata($data);
            redirect('account/dashboard');
        }
        else
        {
            $this->index();
        }
    } 
```

# css - CSS Sprite 活动状态

> ID：11423510
> 
> 赞同：1
> 
> 时间：2012-07-10T23:34:19.543
> 
> 标签：css, menu, sprite

嗨，我在这里查看了其他类似问题的示例，但似乎没有一个解决方案对我有用。我有两个图像重叠的 CSS 精灵图像。顶部图像用于链接状态，底部图像用于 :hover 和 :active。:hover 有效，但 :active 状态不显示。任何信息将不胜感激！

```
CSS:
.menu {
    width: 855px;
    margin-right: auto;
    margin-left: auto;
}
.menu ul {
list-style-type: none;
}
.menu ul li {
    float: left;
    background-color:#234C94;
}
.menu ul li a {
    display: block;
    height: 52px;
    width: 122px;
    background-color: #27589B;
    text-indent: -9999px;
}    
.menu ul li a.welcome {
    background-image: url(IMG/IMAGE.png)
        background-repeat: no-repeat;
    background-position: 0px 0px;
}   
.menu ul li a.welcome:hover {
    background-image: url(IMG/IMAGE.png)
    background-repeat: no-repeat;
    background-position: 0px -52px;
} 
.menu ul li a.welcome:active {
    background-image: url(IMG/IMAGE.png)
    background-repeat: no-repeat;
    background-position: 0px -52px; 
```

HTML：

```
<div class="menu">
  <ul>
   <li><a href="Counselor.html" class="welcome">Item 1</a></li>
   <li class="academics"><a href="Academics.html" class="academic">Item 2</a></li>
   <li><a href="Athletics.html" class="athletic">Item 3</a></li>
   <li><a href="ClubsORGs.html" class="club">Item 4</a></li>
   <li><a href="ResidentialLife.html" class="life">Item 5</a></li>
   <li><a href="Education.html" class="exp">Item 6</a></li>
   <li><a href="Map.html" class="map">Item 7</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:25:40.210

两件事：首先，当你使用 :hover 和 :active 之类的东西时，会采用基本样式，所以你不需要重新声明`background-image`and`background-repeat`样式，一次就可以了。

其次， :hover 和 :active 没有区别的原因是因为你`background-position`在两者上都是一样的。我认为这是一个粗心的错误，当您意识到这一点时，您可能会面无表情:)

祝你好运！

# html - 包含其他两个 div 的文本和 div 不是内联的

> ID：11423512
> 
> 赞同：1
> 
> 时间：2012-07-10T23:34:24.010
> 
> 标签：html, css

这是我正在玩的 jsfiddle：http: [//jsfiddle.net/kwAqu/12/](http://jsfiddle.net/kwAqu/12/)

我需要图像与“信息”div 内联。我尝试了很多方法（使信息和图像跨越，从 div 中删除图像并将 display: inline 用于 img 标签本身）。

关于如何解决这个问题的任何想法？这就是我希望它看起来的样子（你可以忽略边框等）： ![在此处输入图像描述](../Images/7407dc87f07bf1ab8984cac70c4f7a2b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:41:55.903

使用`float: left;`并分配文本类 a`width`来包围`.info` `div`.

您还需要将元素包装在父元素中以确保项目正确对齐。我在演示中创建了一个`div`ID 为的。`wrapper`

**HTML：**

```
<div id="wrapper">
    <div class = "one">
        <div class = "image"><img src = "http://www.google.com/images/srpr/logo3w.png"></div>
        <div class = "info">
            <div class = "title">this is my title</div>
            <div class = "text">Hello this is what I'm trying to inline. but its not working! what's going on...?</div>
        </div>
    </div>
</div> 
```

**CSS：**

```
#wrapper {
 width: 600px;   
}

.image {
    display: inline-block;
    float: left;
}

.info {
    display: inline-block;
    float: left;
    width: 200px;
    padding: 0 0 0 15px;
} 
```

注意：您可以相应地调整 的填充`.info` `div`，以及`wrapper` `div`.

演示：http: [//jsfiddle.net/Rm7Pg/](http://jsfiddle.net/Rm7Pg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:44:52.617

我想你正在寻找的是

```
.image {
    display: inline-block;
    vertical-align:middle;
} 
```

这将尝试将图像与其余元素匹配。

阅读它，例如：

[http://www.w3.org/wiki/CSS/Properties/vertical-align](http://www.w3.org/wiki/CSS/Properties/vertical-align)

# ios - 如何检查当前是否选择了uitabbarbutton

> ID：11423513
> 
> 赞同：0
> 
> 时间：2012-07-10T23:34:25.207
> 
> 标签：ios, uitabbar, uitabbaritem

我试图弄清楚如何在让用户选择另一个之前检查当前选择了哪个 uitabbarbutton 我希望他们取消选择他们之前选择的按钮。

这是我用来查看选择哪个按钮的代码..

```
#pragma TabBardelegatesht
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
    switch (item.tag) {

        case 0:
        {
            NSLog(@"item 0 selected");

        }
            break;
        case 1:
        {
            NSLog(@"item 1 selected");
        }
            break;
        case 2:
        {

            NSLog(@"item 2 selected");
        }
            break;
        case 3:
        {
            NSLog(@"item 3 selected");
        }
            break;
        case 4:
        {
            NSLog(@"item 4 selected");
        }
            break;
        case 5:
        {
            NSLog(@"item 5 selected");

            // set up or remove jumpBar
            [self jumpBarButtonPosition:1];
        }
            break;
        default:
            break;
    }
} 
```

所以问题是，如果选择了一个单元格而不是您当前正在按下的单元格，我该如何停止另一个选择？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:24:48.633

看来您应该实现标签栏委托的 -tabBarController: shouldSelectViewController: 方法。如需进一步参考，请查看 [http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html)

请记住，您应该设置委托。如果您需要进一步的帮助，请随时询问

编辑：

我上面贴的方法不符合题型要求。如果用户希望能够使用 [tabBar setSelectedItem:nil] 取消选择 TabBar 的所有选项卡；您不能使用标签栏视图控制器。

编辑2：尝试后，我终于完成了对问题的编码。

界面：

```
@property (nonatomic) BOOL buttonsEnabled;
@property (nonatomic,weak) IBOutlet UITabBar *tabBar; 
```

执行：

```
@synthesize tabBar = _tabBar;
@synthesize buttonsEnabled = _buttonsEnabled;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.tabBar setDelegate:self];

    [self disableAllButtons];

    UITabBarItem *item = [self.tabBar.items objectAtIndex:0];

    [item setEnabled:YES];
    [self.tabBar setSelectedItem:item];
    self.buttonsEnabled = NO;

}

-(void)tabBar:(UITabBar*)tabBar didSelectItem:(UITabBarItem *)item
{
    if(self.buttonsEnabled == NO)
    {
        [tabBar setSelectedItem:nil];
        [self enableAllButtons];
    }

    else {
        [self disableAllButtons];
        [item setEnabled:YES];
    }

}

-(void)enableAllButtons
{
    NSArray *items = [self.tabBar items];
    for (UITabBarItem* item in items)
        [item setEnabled:YES];

    [self setButtonsEnabled:YES];
}

-(void)disableAllButtons
{
    NSArray *items = [self.tabBar items];
    for (UITabBarItem* item in items)
        [item setEnabled:NO];

    [self setButtonsEnabled:NO];
} 
```

剩下要做的就是在 storyboard/ib 中设置 UITabBar 出口，或者如果你分配初始化它，只需将 tabBar 属性设置为你的 tabBar。记住不要使用 UITabBarController。希望有帮助。

# cocoa - 为什么我的 NSButton 模板图像不再这样工作了？

> ID：11423514
> 
> 赞同：4
> 
> 时间：2012-07-10T23:34:27.817
> 
> 标签：cocoa, nsbutton

我想，Leopard，我有一些我写回来的代码。有一个带有名为 DuckIconTemplate.png 的图像的 NSButton。

最初，该按钮将使用带有漂亮内部阴影的图像进行渲染，并且由于 *Template 名称而在打开时会突出显示蓝色。但是，当我现在构建并运行它（最新的 OS X 版本）时，按钮上的图像按原样呈现，并且在打开按钮时没有突出显示。

这是一个屏幕截图（现在左边，右边的屏幕截图）：![在此处输入图像描述](../Images/9334c7ec100938eaea903ce813b76cbc.png)

是什么赋予了？

我检查了调试器，按钮的 .image -isTemplate 返回 YES。

按钮配置如下：

*   风格：渐变
*   类型：切换
*   有边框的
*   作品名称：《鸭子》</li>
*   图片：“DuckIconTemplate”</li>
*   备用图片：（无）
*   图像位置：仅图像，居中

# html - 解决链接之间的差距问题，无需将代码放在一行中

> ID：11423520
> 
> 赞同：0
> 
> 时间：2012-07-10T23:35:00.323
> 
> 标签：html, css

是否可以修复超链接图像之间出现的间隙，而无需将代码全部编写在一行中？

我希望能够这样写：

`<a href="..." ><img src="..."/></a>`

`<a href="..." ><img src="..."/></a>`

`<a href="..." ><img src="..."/></a>`

`<a href="..." ><img src="..."/></a>`

但我可以摆脱差距的唯一方法是这样写：

`<a href="..." ><img src="..."/></a><a href="..." ><img src="..."/></a><a href="..." ><img src="..."/></a>`

我的实际图片链接要长得多，这真的很难阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:27:00.503

因为锚点和图像默认是内联的，所以它们会受到代码中这些元素之间的空白（换行符）的影响。

如果 CSS 在这里真的不适合您，您可以将空格包装在 HTML 注释中，如下所示：

```
<a href="..." ><img src="..."/></a><!--

--><a href="..." ><img src="..."/></a><!--

--><a href="..." ><img src="..."/></a><!--

--><a href="..." ><img src="..."/></a> 
```

它会影响可读性，但会阻止浏览器呈现空白，从而消除图像之间的间隙。

如果 CSS 是一个选项：

```
img {
  display: block;
  float: left;
} 
```

# android - 删除布局后应用程序关闭

> ID：11423522
> 
> 赞同：0
> 
> 时间：2012-07-10T23:35:00.970
> 
> 标签：android, layout

这是我的问题：

在我的应用程序中，我使用了 2 种布局；一个是主菜单，另一个是实际的游戏内布局。当我开始我的游戏时，我希望删除主菜单布局。我想过这样做使用

```
myView.setVisibility(View.GONE); 
```

然后使用相同的方法制作其他布局。

问题是，当我尝试让布局消失时，我的应用程序会关闭，并且会出现告诉我的消息框。

编辑：以下代码已更改

```
public class DemoReelActivity extends Activity implements OnClickListener{

private GLSurfaceView mGLView;
private View mainMenu;                          

Button newGame = null;

Button shoot = null;
SeekBar power = null;

TextView force = null;

byte forcePct = 0;

ball[] ballSet; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

mainMenu =  findViewById(R.layout.main_menu);                                                                                          setContentView(R.layout.main_menu);                      

    newGame = (Button) findViewById(R.id.button1);
    newGame.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    startGame();

}

public void startGame()
{
    //Remove the main_menu view
    mainMenu.setVisibility(View.GONE);
    mGLView.setVisibility(View.VISIBLE);

    // Create a GLSurfaceView instance and set it
    mGLView = new OpenGLES10SurfaceView(this);
    setContentView(mGLView);

    //Add the main.xml layout over the OpenGL one
    LayoutInflater inflater = getLayoutInflater();
    View tmpView;
    tmpView = inflater.inflate(R.layout.main, null);
    getWindow().addContentView(tmpView, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
                    ViewGroup.LayoutParams.FILL_PARENT));

    //Initialize all the buttons and stuff
    The code here is okay, I know it for sure.

    //Allocate enaugh memory for 16 balls(14 regular plus the black and white ball)
    ballSet = new ball[16];

    //Create all the balls needed to play
    for(byte i=0;i<16;i++)
    {
        new ball(i);
    }

}

} 
```

这是 main_menu.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:paddingLeft="100dp"
    android:paddingTop="80dp"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:text="@string/newGame" android:layout_marginBottom="40dp" android:layout_marginLeft="10dp"/>

</LinearLayout> 
```

最后但并非最不重要的是我的 LogCat：

```
 07-10 19:28:42.020: E/AndroidRuntime(350): Uncaught handler: thread main exiting due to uncaught exception
    07-10 19:28:42.032: E/AndroidRuntime(350): java.lang.NullPointerException
    07-10 19:28:42.032: E/AndroidRuntime(350):  at com.desgraff.demoreel.DemoReelActivity.startGame(DemoReelActivity.java:91)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at com.desgraff.demoreel.DemoReelActivity.onClick(DemoReelActivity.java:80)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.view.View.performClick(View.java:2364)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.view.View.onTouchEvent(View.java:4179)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.view.View.dispatchTouchEvent(View.java:3709)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.os.Handler.dispatchMessage(Handler.java:99)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.os.Looper.loop(Looper.java:123)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at android.app.ActivityThread.main(ActivityThread.java:4363)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at java.lang.reflect.Method.invokeNative(Native Method)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at java.lang.reflect.Method.invoke(Method.java:521)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    07-10 19:28:42.032: E/AndroidRuntime(350):  at dalvik.system.NativeStart.main(Native Method) 
```

对不起，很长的帖子顺便说一句，但我是 android 的新手（和 Java 相关的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:22:06.807

我现在看到了。您需要为 XML 中的根元素提供一个 id 并将此 id 传递给 findViewById()，您无法通过传递整个 XML 文件来加载布局。

**首先，**将 id 属性添加到您的 LinearLayout：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_menu"
    android:layout_width="fill_parent"
    ... 
```

**其次，**改变这些：

```
private View mainMenu;
...
mainMenu =  findViewById(R.layout.main_menu); 
```

像这样：

```
private LinearLayout mainMenu;
...
mainMenu = (LinearLayout) findViewById(R.id.main_menu); 
```

**此外，**您将获得 NullPointerException：

```
mGLView.setVisibility(View.VISIBLE); // Remove me.

// Create a GLSurfaceView instance and set it
mGLView = new OpenGLES10SurfaceView(this); 
```

由于您在尝试使其（无）可见`mGLView` *后*进行初始化。

# html - canvas html 5 和显示

> ID：11423530
> 
> 赞同：0
> 
> 时间：2012-07-10T23:36:04.777
> 
> 标签：html, canvas

这个脚本不能正常显示，是不是有什么问题？

这在浏览器的显示中缺少行。我正在使用 for 循环创建一个二维直角坐标系，并想知道代码是否有问题。

```
<html>
<head>

<script type="text/javascript">

function start() {

    var winwidth = window.innerWidth;
    var winheight = window.innerHeight;
    var canvas=document.getElementById("myCanvas");
    var ctx=canvas.getContext("2d");
    // Sets size of canvas and interior of canvas to window
    ctx.canvas.width = 1200;
    ctx.canvas.height = 600;
    var cname = "ctx";

    // -------------------------------------------
    ctx.beginPath();
    ctx.lineWidth = 1;
    ctx.strokeStyle = '#ff0000';
    // Origin Y-Axis
    ctx.moveTo(0,300);
    ctx.lineTo(1200,300);
    // Origin X-Axis
    ctx.moveTo(600,0);
    ctx.lineTo(600,600);
    ctx.stroke();
    // -------------------------------------------

    // -------------------------------------------
    ctx.beginPath();
    ctx.lineWidth = 0.5;
    ctx.strokeStyle = '#0000ff';
    majoraxes = new Array();
    j=0;
    // Horizontal Major Axes
    for (hundreth=0; hundreth<7; hundreth++) {
        // Skips past 300
        if (hundreth==3) {
            hundreth=4;
            }
        for (c=0; c<2; c++) {
            if (c==0) {
                majoraxes[j] = cname+".moveTo(0,"+hundreth+"00);";
                j = j+1;
                }
            if (c==1) {
                majoraxes[j] = cname+".lineTo(1200,"+hundreth+"00);";
                j = j+1;
                }
            }
        }
    // Vertical Major Axes
    for (hundreth=0; hundreth<13; hundreth++) {
        // Skips past 600
        if (hundreth==6) {
            hundreth=7;
            }
        for (c=0; c<2; c++) {
            if (c==0) {
                majoraxes[j] = cname+".moveTo("+hundreth+"00,0);";
                j = j+1;
                }
            if (c==1) {
                majoraxes[j] = cname+".lineTo("+hundreth+"00,600);";
                j = j+1;
                }
            }
        }
    for (t=0; t < majoraxes.length; t++) {
        eval(majoraxes[t]);
        }
    ctx.stroke();
    // ---------------------------------------

    // ---------------------------------------
    ctx.beginPath();
    ctx.lineWidth = .2;
    ctx.strokeStyle = '#0000ff';
    minoraxes = new Array();
    j=0;
    // Horizontal Minor Axes
    for (hundreth=0; hundreth<7; hundreth++) {
        for (tenth=1; tenth<10; tenth++) {
            for (c=0; c<2; c++) {
                if (c==0) {
                    minoraxes[j] = cname+".moveTo(0,"+hundreth+""+tenth+"0);";
                    j = j+1;
                    }
                if (c==1) {
                    minoraxes[j] = cname+".lineTo(1200,"+hundreth+""+tenth+"0);";
                    j = j+1;
                    }
                }
            }
        }
    // Vertical Minor Axes
    for (hundreth=0; hundreth<13; hundreth++) {
        for (tenth=1; tenth<10; tenth++) {
            for (c=0; c<2; c++) {
                if (c==0) {
                    minoraxes[j] = cname+".moveTo("+hundreth+""+tenth+"0,0);";
                    j = j+1;
                    }
                if (c==1) {
                    minoraxes[j] = cname+".lineTo("+hundreth+""+tenth+"0,600);";
                    j = j+1;
                    }
                }
            }
        }
    for (t=0; t < minoraxes.length; t++) {
        eval(minoraxes[t]);
        }
    ctx.stroke();
    // --------------------------------------

    }

</script>

<style type="text/css">
html, body {
  width:  100%;
  height: 100%;
  margin: 0px;
}
#myCanvas {
    width:1200;
    height:600;
    image-rendering:optimize-contrast;
}
</style>
</head>
<body onload="start()">

<canvas id="myCanvas" style="border:1px solid #c3c3c3;">
Your browser does not support the canvas element.
</canvas>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:55:14.970

看起来你没有画足够的线。您可以在您的版本中更改这些以使其正常工作。

```
// Horizontal Minor Axes
    for (hundreth=0; hundreth<7; hundreth++) {
        for (tenth=1; tenth<12; tenth++) { // changed to 12

    // Vertical Minor Axes
    for (hundreth=0; hundreth<13; hundreth++) {
        for (tenth=1; tenth<12; tenth++) { // changed to 12 
```

老实说，尽管您确实可以大大缩短代码，但请检查一下。我还添加了使网格成为您想要的任何大小的功能。

**[工作演示](http://jsfiddle.net/loktar/h7WMq/)**

**[全屏演示](http://fiddle.jshell.net/loktar/h7WMq/4/show/light/)**

```
function start() {
    var winwidth = window.innerWidth;
    var winheight = window.innerHeight;
    var canvas=document.getElementById("myCanvas");
    var ctx=canvas.getContext("2d");
    // Sets size of canvas and interior of canvas to window
    var width = 1200,
        height = 600;

    canvas.width = width;
    canvas.height = height;

    var cname = "ctx";

    // -------------------------------------------
    ctx.beginPath();
    ctx.lineWidth = 1;
    ctx.strokeStyle = '#ff0000';
    // Origin X-Axis
    ctx.moveTo(0,height/2);
    ctx.lineTo(width,height/2);
    // Origin Y-Axis
    ctx.moveTo(width/2,0);
    ctx.lineTo(width/2,height);
    ctx.stroke();
    // -------------------------------------------

    // -------------------------------------------
    ctx.beginPath();
    ctx.lineWidth = 0.5;
    ctx.strokeStyle = '#0000ff';
    majoraxes = new Array();
    j=0;

    for(var hundreth = 0; hundreth < height/100; hundreth++){
        if(hundreth !== (height/2)/100){
            ctx.moveTo(0,hundreth*100);
            ctx.lineTo(width, hundreth*100);
        }
    }

    // Vertical Major Axes
    for (hundreth=0; hundreth < width/100; hundreth++) {
        if(hundreth !== (width/2)/100){
            ctx.moveTo(hundreth*100, 0);
            ctx.lineTo(hundreth*100,height);
        }
    }

    ctx.stroke();
    // ---------------------------------------

    // ---------------------------------------
    ctx.beginPath();
    ctx.lineWidth = .2;
    ctx.strokeStyle = '#0000ff';
    minoraxes = new Array();
    j=0;

     for(var tenth= 0; tenth< height/10; tenth++){
        ctx.moveTo(0,tenth*10);
        ctx.lineTo(width, tenth*10);
    }

    // Vertical Major Axes
    for (tenth=0; tenth< width/10; tenth++) {
        ctx.moveTo(tenth*10, 0);
        ctx.lineTo(tenth*10,height);
    }

    ctx.stroke();
    // --------------------------------------
} 
```

​</p>

# c# - 如何将子项添加到 ListView？

> ID：11423537
> 
> 赞同：6
> 
> 时间：2012-07-10T23:36:53.777
> 
> 标签：c#, winforms, listview, listviewitem

我正在尝试获得子项工作的最简单的 Listview 示例。但是这段代码：

```
private void button1_Click(object sender, EventArgs e) {
    listView1.Groups.Add(new ListViewGroup("Kannst du mich sehen?", HorizontalAlignment.Left));
    string[] strArr = new string[4] { "uno", "dos", "twa", "quad" };
    for (int i = 0; i < strArr.Length; i++)
    {
        ListViewItem lvi = new ListViewItem(strArr[i]);
        listView1.Items.Add(lvi);
        lvi.SubItems.Add("Ciao, Baby!");
        listView1.Items[i].Group = listView1.Groups[0];
    }
} 
```

...不显示子项（“Ciao，Baby！”）。表明：

```
Kannst du mich sehen?
---------------------
uno   dos   twa   quad 
```

...但我希望它是：

```
Kannst du mich sehen?
---------------------
uno Ciao, Baby!
dos Ciao, Baby!
twa Ciao, Baby!
quad    Ciao, Baby! 
```

甚至更陌生（在我看来），我明白了：

```
Default
-------
uno dos twa quad    uno dos twa quad

FIRST
-----
uno dos twa quad 
```

...使用此代码：

```
private void button2_Click(object sender, EventArgs e) {
    string[] strArrGroups = new string[3] { "FIRST", "SECOND", "THIRD" };
    string[] strArrItems = new string[4] { "uno", "dos", "twa", "quad" };
    for (int i = 0; i < strArrGroups.Length; i++)
    {
        listView1.Groups.Add(new ListViewGroup(strArrGroups[i], HorizontalAlignment.Left));
        for (int j = 0; j < strArrItems.Length; j++) {
            ListViewItem lvi = new ListViewItem(strArrItems[j]);
            listView1.Items.Add(lvi);
            lvi.SubItems.Add("Hasta la Vista, Mon Cherri!");
            listView1.Items[j].Group = listView1.Groups[i];
        }
    }
} 
```

## 更新

如果你问我，ListView 的 View 属性有点奇怪：

默认的“ *LargeIcon* ”设置与最初显示的一样（和 SmallIcon 具有相同的效果）。“ *Detail* ”只给了我组标题（没有项目）“ *List* ”给了我项目（一个在一行上，我想要），但没有组/标题“ *Tile* ”给我：

```
Kannst du mich sehen?
---------------------
uno     dos
twa     quad 
```

...使用button1的代码和：

```
Default
---------------------
uno     dos
twa     quad
uno     dos
twa     quad

FIRST
---------------------
uno     dos
twa     quad 
```

...使用 button2 的代码

任何一个：

```
1) I'm stupid
2) ListView is very counterintuitive
-or
3) Nobody ever wants to use the ListView the way I'm trying to use it...if that's the case, should I be using a different control instead? 
```

~~~ 侧面（或底部）问题：由于我住在 StackOverflow 上，是否有可能成为双重公民，这样做有什么税收优惠吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:47:15.123

您需要为`SubItem`. 未显示您的原因`subitem`是因为它没有列。试试这个。

```
listView1.Columns.Add("Column 1"); // you can change the column name
listView1.Columns.Add("Column 2");
string[] strArr = new string[4] { "uno", "dos", "twa", "quad" };
foreach (string x in strArr)
{
    ListViewItem lvi = listView1.Items.Add(x);
    lvi.SubItems.Add("Ciao, Baby!");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T00:28:59.277

这对我有用：

```
listView1.Columns.Add("Col1");
listView1.Columns.Add("Col2");

string[] strArrGroups = new string[3] { "FIRST", "SECOND", "THIRD" };
string[] strArrItems = new string[4] { "uno", "dos", "twa", "quad" };
for (int i = 0; i < strArrGroups.Length; i++)
{
    int groupIndex = listView1.Groups.Add(new ListViewGroup(strArrGroups[i], HorizontalAlignment.Left));
    for (int j = 0; j < strArrItems.Length; j++)
    {
        ListViewItem lvi = new ListViewItem(strArrItems[j]);
        lvi.SubItems.Add("Hasta la Vista, Mon Cherri!");
        listView1.Items.Add(lvi);
        listView1.Groups[i].Items.Add(lvi);
    }
} 
```

事实证明，您必须将项目添加到组中，而不是在项目上设置组属性，如其他问题所示。非常非常奇怪。

结果是：

![在此处输入图像描述](../Images/8fbbedc5a13be8c214650a06f11836cd.png)

在 .Net 4、WinForms、VS2010 中测试

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T23:39:46.050

添加子项后尝试添加项：

```
ListViewItem lvi = new ListViewItem(strArr[i]);
lvi.SubItems.Add("Ciao, Baby!");
listView1.Items.Add(lvi);    
listView1.Items[i].Group = listView1.Groups[0]; 
```

希望这可以帮助！

# objective-c - 如何在 iPhone SDK 中自动对焦？

> ID：11423538
> 
> 赞同：4
> 
> 时间：2012-07-10T23:37:06.377
> 
> 标签：objective-c, ios4, avcapturesession, avcapturedevice

我正在创建一个应用程序，用户在其中拍摄带有文本的图像并上传到服务器。我曾经`AVCaptureSession`打开相机并放置了一个条形按钮，用于捕获最新帧并将其上传到服务器。在这个应用程序中，用户可以通过单击条形按钮将多张图像一张一张地发送到服务器。

我想知道用户是否有可能不必按下按钮来捕获帧。这可能是通过自动对焦自动捕获当前帧吗？就像用户只需将相机放在图像上一秒钟，当图像聚焦良好时，它会自动捕获，以便用户无需按任何按钮即可移动到下一张图像？

我捕获帧的代码如下：

```
- (void)initCapture {

    AVCaptureDeviceInput *captureInput = [AVCaptureDeviceInput 
                                          deviceInputWithDevice:[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] 
                                          error:nil];

    AVCaptureVideoDataOutput *captureOutput = [[AVCaptureVideoDataOutput alloc] init];

    captureOutput.alwaysDiscardsLateVideoFrames = YES; 

    /*We create a serial queue to handle the processing of our frames*/
    dispatch_queue_t queue;
    queue = dispatch_queue_create("cameraQueue", NULL);
    [captureOutput setSampleBufferDelegate:self queue:queue];
    dispatch_release(queue);
    // Set the video output to store frame in BGRA (It is supposed to be faster)
    NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey; 
    NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA]; 
    NSDictionary* videoSettings = [NSDictionary dictionaryWithObject:value forKey:key]; 
    [captureOutput setVideoSettings:videoSettings]; 
    /*And we create a capture session*/
    captureSession = [[AVCaptureSession alloc] init];
    /*We add input and output*/
    [captureSession addInput:captureInput];
    [captureSession addOutput:captureOutput];

    AVCaptureConnection *conn = [captureOutput connectionWithMediaType:AVMediaTypeVideo];

    if (conn.supportsVideoMinFrameDuration)
        conn.videoMinFrameDuration = CMTimeMake(5,1);
    if (conn.supportsVideoMaxFrameDuration)
        conn.videoMaxFrameDuration = CMTimeMake(5,1);

    [captureSession setSessionPreset:AVCaptureSessionPresetPhoto];

    customLayer = [CALayer layer];
    customLayer.frame = self.view.bounds;
    customLayer.transform = CATransform3DRotate(CATransform3DIdentity, M_PI/2.0f, 0, 0, 1);
    customLayer.contentsGravity = kCAGravityResizeAspectFill;
    //[self.view.layer addSublayer:customLayer];
    /*We add the imageView*/

    imageView = [[UIImageView alloc] init];
    imageView.frame = CGRectMake(0, 0, 100, 100);
    //imageView.frame = self.view.bounds;
    [self.view addSubview:imageView];

    [captureSession startRunning];

} 
```

我会很感激你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:15:22.137

`adjustingFocus`您必须在视频输入中添加观察者：

```
[[[captureManager videoInput] device] addObserver:self forKeyPath:@"adjustingFocus" options:NSKeyValueObservingOptionNew context:nil]; 
```

然后添加`observeValueForKeyPath`调焦完成后拍照的方法：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
if( [keyPath isEqualToString:@"adjustingFocus"] ){
    BOOL adjustingFocus = [ [change objectForKey:NSKeyValueChangeNewKey] isEqualToNumber:[NSNumber numberWithInt:1] ];

    if (!adjustingFocus) {
             [[self captureManager] captureStillImage:self];
        }
    }
} 
```

# block - 在我的 simulink 模型中加入概率和随机抽取

> ID：11423543
> 
> 赞同：1
> 
> 时间：2012-07-10T23:38:06.803
> 
> 标签：block, matlab, simulink

这是基础知识 - 我有一个模型，计算出 2 个对象之间的距离。对象 A 检测到对象 B 的可能性是依赖于距离的概率（及其累积对数正态曲线）。

我想包含一个基于该计算距离的概率函数。因此，在 X 米处，检测到的概率为 20%。在 Y 距离为 50% 等。在模型的每一步，距离都会不同，因此需要从概率函数中重新进行随机抽取，并输出是否检测到对象 B。

我的印象是鲁棒控制工具箱中的不确定状态块是前进的方向，但到目前为止，我还无法破译“帮助”信息来学习如何使用和应用它。（据我所知，理想的 b/c 我也可以从命令行运行模型改变所有不确定变量一定次数）。

请帮忙！！！

# android - 为什么actionbar sherlock的横向高度会发生变化？

> ID：11423545
> 
> 赞同：1
> 
> 时间：2012-07-10T23:38:21.340
> 
> 标签：android, android-actionbar

我已更改文件夹中的值`abs__action_bar_default_height`以`values-land`匹配肖像中的值。但是当我旋转设备时，横向模式下的操作栏仍然更小。是什么改变了它的价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:55:08.527

您是否有机会在 ICS 设备上进行测试？ActionBarSherlock 在 ICS 上使用 ActionBar 的本机实现，这就是为什么您可能看不到变化的原因。您所做的更改只会对 ICS 之前的设备产生影响。

话虽如此，为了使其正常工作，您可以在应用程序的主题中设置 ActionBar 高度。如果同时使用`android:actionBarSize`and `actionBarSize`，它应该会影响任何 API 级别。看看我大约一个月前[对一个相同问题的回答。](https://stackoverflow.com/a/10890402/1029225)

# ruby-on-rails - 可以预先过滤 Activeadmin 索引视图吗？

> ID：11423546
> 
> 赞同：0
> 
> 时间：2012-07-10T23:38:27.877
> 
> 标签：ruby-on-rails, activeadmin

在我的数据库中，我有许多“项目”，每个项目都有许多与之关联的“设备”。admin_users 与一个或多个项目相关联。我已经注册了一个显示数据库中设备列表的资源。此列表可以按项目过滤。

我想做的是确保当用户登录并进入设备索引视图时，他/她只能查看属于他的项目的设备。这是通过预过滤索引视图来完成的吗？如果是这样，我该怎么做？有没有更好的方法来解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:51:23.473

我不认为过滤器适合这样做。我会在控制器中设置正确的@devices 实例变量来做到这一点

```
class DevicesController < ApplicationController
  def index
    @devices = current_admin_user.devices
  end
end 
```

如果您的 admin_user 不了解设备，您可以执行以下操作

```
class AdminUser < ActiveRecord::Base
  has_many :projects
  has_many :devices, :through => :projects
end 
```

这对你有用吗？

# javascript - opener.reload 时拒绝 Javascript 权限

> ID：11423547
> 
> 赞同：1
> 
> 时间：2012-07-10T23:38:39.797
> 
> 标签：javascript, permission-denied, window.opener

我有一个 Rails 应用程序，其中有

```
link_to 'Show', %Q[javascript:self.window.open('http://somelink.com', 'width=700,height=550,resizable=yes,scrollbars=yes,toolbar=yes,status=yes').focus()] 
```

单击链接时，会打开一个弹出窗口，其中有一个 `OK`按钮。如果用户单击`OK`按钮，则弹出窗口应该关闭。该按钮在 Google Chrome 上工作正常，但在 Firefox 中不工作。使用 Firebug 进行调试，我看到弹出窗口中的功能被拒绝。弹出窗口的代码是：

```
function onclick(event) {
 opener.top.location.reload();
 self.close();
} 
```

错误信息是：`Permission denied to access property 'reload'`

我环顾四周，但找不到解决此问题的方法。显然我无权访问弹出窗口的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:42:19.803

是否`opener.top`在同一个“起源”（通常是同一个域）中？我会这样认为，因为它可以在 Chrome 中使用。也许这种解决方法有效：

打电话`opener.please_reload_for_me()`。

开瓶器框架具有以下功能的地方：

```
function please_reload_for_me() {
    window.top.reload();
} 
```

因此，基本上将访问权限委托`top`给开启者框架。

# groovy - Groovy DSL 脚本

> ID：11423548
> 
> 赞同：3
> 
> 时间：2012-07-10T23:38:44.443
> 
> 标签：groovy, dsl

我编写了一个应该应用于 DSL 脚本的全局 AST 转换，现在我正在选择将特定 groovy 脚本识别为这些 DSL 脚本的最佳方法。

我考虑了以下选项：

1.  自定义文件扩展名；这里最大的缺点是 IDE 支持：许多几乎不支持编译/编辑具有非 groovy 扩展名的文件（您可以配置编辑器，但需要一些调整）。
2.  一个特殊的文件名后缀（前缀），但在这种情况下，后缀应该是唯一的（因此相对较长）以避免意外转换常规 groovy 文件（我当前的选择）。
3.  应用于脚本类的本地 AST 转换，其缺点是需要为每个脚本编写一些样板代码。
4.  在脚本中有一些独特的第一条语句将识别 DSL。

你认为什么是最好的选择，为什么？还有其他我没有考虑过的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:55:43.263

如果您使用 GroovyShell 编译 DSL 脚本，您可以使用[CompilerConfiguration.addCompilationCustomizer(](http://groovy.codehaus.org/api/org/codehaus/groovy/control/CompilerConfiguration.html#addCompilationCustomizers%28org.codehaus.groovy.control.customizers.CompilationCustomizer...%29) [ASTTransformationCustomizer(](http://groovy.codehaus.org/gapi/org/codehaus/groovy/control/customizers/ASTTransformationCustomizer.html#ASTTransformationCustomizer%28org.codehaus.groovy.transform.ASTTransformation%29) YourGlobalASTTransformation)) 对它们应用转换。

# api - 对于 NVP 请求，我应该将哪个版本传递给 Paypal？

> ID：11423550
> 
> 赞同：0
> 
> 时间：2012-07-10T23:39:31.570
> 
> 标签：api, paypal

我正在尝试为快速结帐执行 NVP API 请求，但我无法确定用户的 API 版本。我指定了 VERSION=92.0、VERSION=91.0 和其他一些，但所有这些都给我从沙箱返回的无效版本错误。

要使用的有效 api 版本是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:59:01.683

89.0 是他们大约一个半月前的最后一个主要版本。最新的开发者指南似乎提前几天发布了。我觉得92还没出。

如果你使用 89.0，你会很好。

# jquery - 在 y 轴上旋转元素以查看“后面”背景和背面的文本

> ID：11423552
> 
> 赞同：3
> 
> 时间：2012-07-10T23:39:44.487
> 
> 标签：jquery, css, animation, rotation

我正在使用 TransformJS 来旋转 div `onclick`。div 围绕其 y 轴旋转 180 度，从而将其翻转到窗口上。

我的问题是——一旦你翻转它，是否有在元素**背面**显示单独`background-color`的文本？这是我用来测试的快速 jsfiddle 的链接：http: [//jsfiddle.net/kSR9H/1/](http://jsfiddle.net/kSR9H/1/)

 **从fiddle可以看出，即使翻转了元素，背景依然是红色的，我不知道怎么把文字放在后面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T23:56:59.327

您可以将翻转分成两部分，在第一部分之后，切换一个设置新背景的类。

```
$("p").click(function() {
    $(this).animate({
        rotateY: "+=" + (Math.PI) / 2
    }, 500, function() {
        $(this).toggleClass('flipped'); // toggle class while the flip is in the middle
    }).animate({
        rotateY: "+=" + (Math.PI) / 2
    }, 500);
}); 
```

**演示在** [http://jsfiddle.net/gaby/kSR9H/2/](http://jsfiddle.net/gaby/kSR9H/2/)

*   `(Math.PI) / 2`在每个动画中（*添加 /2*）
*   切换类的旋转前半部分的回调函数
*   将每个动画的动画持续时间减半至 500 毫秒，总共 1 秒（*作为初始*）**

# asp.net-mvc-3 - MVC 3 根据是否选中复选框来处理表格行

> ID：11423555
> 
> 赞同：2
> 
> 时间：2012-07-10T23:40:04.677
> 
> 标签：asp.net-mvc-3

嗨，我对 MVC 很陌生，我目前正在尝试使用 MVC 3 和 Entity Framework 4.1 实现一个小型人力资源系统。现在，我被困在一个看起来很简单的任务上，即显示一个表格，其中列出了最近请病假的员工，并且在每个表格行上，我都有一个复选框，用户将检查该员工是否提供了病假床单。我还希望在每一行上都有一个按钮/链接/等，单击它时会调用对控制器方法的调用，并以某种方式将复选框的选中值与病假应用程序的 id 一起传递。我尝试使用操作链接，但我有点难过我将输入的路由值意味着复选框的选中值。同样的功能只需要我几分钟就可以在网络表单中完成，但就像我说的那样 我是 MVC 的新手，因为这似乎是一个非常简单的任务，所以可能在某个地方有一个非常简单的解决方案，但我就是无法为我的生活弄明白。如果我猜这可能需要一点 jquery（顺便说一句，有时对我来说仍然像一门外语）和隐藏字段？啊，我不知道。有人可以帮我吗？提前致谢。

这是我的观点：

```
 @model IEnumerable<LeaveSoft.Models.PendingSickLeave>

   <table>
    <tr>

     <th>
        Applicant's Name
    </th>

    <th>
        Leave Start
    </th>
    <th>
        Leave End
    </th>
    <th>
        Number Of Days
    </th>     

    <th>
        Reason
    </th>

    <th>
        Confirm
    </th>
    <th>

    </th>
</tr>

   @foreach (var item in Model) {
<tr>

    <td>
        @Html.DisplayFor(modelItem => item.UserFullName)
    </td>

    <td>
        @Html.DisplayFor(modelItem => item.StartDate)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.EndDate)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.NumOfDays)
    </td>

    <td>
        @Html.DisplayFor(modelItem => item.LeaveReason)
    </td>

    <td>
       @Html.CheckBox("chkConfirm")

            @Html.Label("", "Sick Sheet Provided")

    </td>

    <td>
       @Html.ActionLink("Process", "ProcessSickLeave", new { id = item.ApplicationID, sicksheet = "THIS IS THE PART I DON'T KNOW" }) 

    </td>    
</tr>
  }

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:23:22.203

这是我头顶上的一个快速解决方案（由于我的懒惰而缩短了表格）：

**HTML/剃须刀**：

```
<table>
    <tr>
        <th>ApplicantName</th>
        <th>Confirm</th>
        <th></th>
    </tr>
    @foreach (var item in Model.PendingSickLeave) // this is a List<>
    {
    <tr>
        <td>@item.UserFullName</td>
        <td>@Html.CheckBoxFor(m => item.SickSheet, new { @id = "chk" + @item.ApplicationID })</td>
        <td>@Html.ActionLink("Process", "ProcessSickLeave", new { id = item.ApplicationID }, new { @class="submit", @data_val = item.ApplicationID })</td>    
    </tr>
    }
</table> 
```

**查询脚本**：

```
<script>
    $(function () {
            // captures click event. appends the sicksheet querystring on the url.
        $('a.submit').click(function (e) {
            e.preventDefault();
            var id = $(this).attr('data-val');
            var chk = $('#chk' + id);
            if ($(chk).is(':checked'))
                $(this).attr('href', $(this).attr('href') + '?sicksheet=true');
            else
                $(this).attr('href', $(this).attr('href') + '?sicksheet=false');
        });

    });
</script> 
```

基本上，当您单击 Process actionlink 时，jquery 会查找具有匹配 ID 的复选框，然后如果选中，它会`?sicksheet=true`在 url 的末尾放置一个，然后再继续。

编辑：

**路线**：

```
routes.MapRoute("ProcessSickLeave", "process/processsickleave/{applicationid}", 
                  new { controller = "Process", action = "ProcessSickLeave" }); 
```

**控制器**：

```
 public ActionResult ProcessSickLeave(ProcessViewModel m)
    {
        return Content("ID = " + m.ApplicationID + 
                  "<br/> Has Sick sheet: " + m.SickSheet.ToString(), "text/html");
    } 
```

# javascript - 覆盖对象的 Length 属性

> ID：11423556
> 
> 赞同：0
> 
> 时间：2012-07-10T23:40:07.720
> 
> 标签：javascript

我发现自己处于一个有趣的境地。我正在使用对象文字来表示现实世界中的产品。现在，每个产品都有一个与其关联的长度以用于运输目的。它看起来像这样：

```
var product = {
  name: 'MacBook Pro 15 Inch',
  description: 'The new macbook pros....',
  length: 15
  height: 15
  Weight: 4
} 
```

这很好用。但是对于长度未知的产品，它们默认为长度 -1。

这再次工作正常，直到您尝试这样做：

```
console.log('Product has the following properties');
_.each(product, function(val, key) {
    console.log(key + ":" + val);
}); 
```

对于长度为 的产品，不会打印任何密钥`-1`。为什么？好吧，因为内部下划线使用长度属性，所以 Javascript 中的每个对象都必须遍历传入对象的所有属性。由于我们覆盖了那个值，它现在是`-1`，并且由于我们从 开始循环`i = 0`，循环将永远不会被执行。

现在的问题是，如何防止长度属性被覆盖？防止这种情况发生的最佳实践也将受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:45:14.950

这可能是由于`_`'s`each`函数中的一些魔法，因为我怀疑它同时接受`Object`s 和`Array`s .. 自己制作？

简单的实现（避免一些常见的陷阱）：

```
function each(obj, map_func) {
    var key;
    for (key in obj) {
        if (Object.prototype.hasOwnerProperty.call(obj, key)) {
            map_func(key, obj[key]);
        }
    }
} 
```

`_`'s中的魔力`each`可能是由于 JavaScript 中有一个讨厌的“习惯”，即拥有“看起来”像数组但实际上不是数组的东西，就像魔法变量一样`arguments`，我认为`options`在选择 DOM 元素中也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:47:30.357

我想不出任何可以覆盖它的副手。我想使用 length 属性是一种鸭子类型，它被 jQuery 标记为可迭代。

但是..你*不能使用*jQuery each 方法，而是手动进行..

通过简单地使用

```
for (key in product) { 

} 
```

你得到你的基本循环。现在，如果您可能覆盖对象的原型，您还应该检查 product.hashOwnProperty(key) 以确保您正在迭代的当前键是在产品实例中定义的。

现在，如果您还需要一个新的闭包范围，那也很简单.. 这是每个函数的替代方法..

```
var myEach = function(subject, callback) {

  for (key in subject) {

     if (subject.hasOwnProperty(key)) {
        callback(subject[key], key);
     }
  }

} 
```

注：未经测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T23:49:31.817

试试这个：

```
 var product = {
        name: "MacBook Pro 15 Inch",
        description: 'The new macbook pros....',
        length: 15,
        height: 15,
        weight: 4
    };
    console.log('Product has the following properties');
    _.each(_.keys(product), function(key){
        console.log(key + ":" + product[key]);
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T23:56:48.757

如果您无法更改长度属性的名称，您可以在下划线中添加额外的检查以防止出现这种情况：

```
_.each = _.forEach = function(obj, iterator, context) {
  if (obj == null) return;
  if (Array.prototype.forEach && obj.forEach === Array.prototype.forEach) {
    obj.forEach(iterator, context);
  } else if (obj.length === +obj.length && obj.constructor != Object) {
    for (var i = 0, l = obj.length; i < l; i++) {
      if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) return;
    }
  } else {
    for (var key in obj) {
      if (_.has(obj, key)) {
        if (iterator.call(context, obj[key], key, obj) === breaker) return;
      }
    }
  }
}; 
```

这里添加的是第`&& obj.constructor != Object`5 行。它有效，尽管猴子补丁下划线可能不是世界上最理想的东西。

编辑：实际上，这在伪数组上中断`arguments`，因为它的构造函数是`Object`，但是`<an array-like object>.hasOwnProperty(<an integer>)`是假的。哇 JavaScript。

# ios - 相邻的“f”和“l”字符

> ID：11423558
> 
> 赞同：0
> 
> 时间：2012-07-10T23:40:12.603
> 
> 标签：ios, uilabel, typography, uifont, ligature

出于某种原因，当我显示单词“Butterfly”（或其他任何带有“fl”的词）时，“f”和“l”在顶部连接（见下图）。字体为 Century Gothic Bold。这是我用来设置 UILabel 的代码。标签的字符串是从 plist 中检索的：

```
UILabel *label = [[UILabel alloc] init];
label.text = [self.flashcardDelegate.alphabetArr objectAtIndex:index];
label.textColor = [UIColor colorWithRed:.733 green:0 blue:.03137 alpha:1];
label.backgroundColor = [UIColor clearColor];
label.frame = CGRectMake(ipad ? 210.0f : 65.0f, 
                         ipad ? 650.0f : 300.0f, 
                         ipad ? 340.0f : 185.0f, 
                         ipad ? 250.0f : 135.0f);
label.font = [UIFont fontWithName:@"CenturyGothic-Bold" size:ipad ? 200 : 100];
label.textAlignment = UITextAlignmentCenter; 
```

知道为什么会发生这种情况吗？谢谢。

![截屏](../Images/91172f893beb807f5c20911c83df4f8c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T23:58:01.883

它被称为结扎，它是故意的。[`kCTLigatureAttributeName`](http://developer.apple.com/library/ios/#documentation/Carbon/Reference/CoreText_StringAttributes_Ref/Reference/reference.html#//apple_ref/c/data/kCTVerticalFormsAttributeName)如果您使用 Core Text，您可以使用属性更改操作系统呈现连字的方式，或者[`NSLigatureAttributeName`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/c_ref/NSLigatureAttributeName)如果您使用`NSAttributedString`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:45:23.563

您所看到的被称为[连字](http://www.will-harris.com/ligatures.htm)- 这个想法最初是为了更容易处理印刷机金属块上的字距调整（为共同连接的字符对使用一个字形），但现在已经持续到现代时代作为一个很大程度上的风格决定。

我不确定如何在 API 中禁用它，但希望这些额外的背景信息可以帮助您找到答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-19T12:03:11.537

这是执行此操作的一种简短方法。iOS 6.0+

```
NSMutableAttributedString *attributedString;
attributedString = [[NSMutableAttributedString alloc] initWithString:label.text];
[attributedString addAttribute:NSLigatureAttributeName value:@0 range:NSMakeRange(0, label.text.length)];
[label.text setAttributedText:attributedString];
[attributedString release]; 
```

# emacs - 如何在 Emacs 中智能地重新缩进 Clojure？

> ID：11423566
> 
> 赞同：26
> 
> 时间：2012-07-10T23:41:11.900
> 
> 标签：emacs, clojure

我是 Clojure 的新手，也是 Emacs 的新手。

是否有 Emacs 快捷方式可以智能地重新缩进整个文件？如果没有，是否至少有一种方法可以向左或向右缩进选定区域？

我感觉我回到了石器时代反复按箭头

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-11T00:47:58.973

`C`-`x` `h`选择整个缓冲区。 `C`- `M`-`\`重新缩进选定的区域。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-07T15:22:26.297

`Ctrl`- `x`, `h`（全选）后跟`Tab`（缩进）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-04-11T18:44:01.840

cider-format-buffer 命令（从 cider 0.9.0 开始）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-15T21:22:24.463

当您从`C-u C-c C-e` ( `cider-eval-last-sexp`) 之类的序列中捕获数据时，输出到缓冲区的原始数据可能难以检查/处理。并且正常的代码缩进命令（在此处的答案中提到）不能很好地处理它。

要处理此类评估表达式的结果，请尝试 `cider-format-edn-region`.

作为一个具体的例子，你有没有试过重新格式化你的 `~/.lein/profiles.clj`？这很难做到并保持一致，直到您发现`cider-format-edn-region`. 但是请注意，它会删除任何评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-12T23:32:54.450

将[cljfmt](https://github.com/weavejester/cljfmt)用于许多可配置的方式来重新格式化/重新缩进。它有一个 Emacs 插件，但也可以通过`lein`.

# php - XAMPP BETA 13：缓慢的 mysql 连接

> ID：11423570
> 
> 赞同：2
> 
> 时间：2012-07-10T23:41:26.963
> 
> 标签：php, mysql, pdo, xampp

我刚刚安装了一个全新的 xampp beta 13 安装，但是我注意到在我的 zend 应用程序分析器中连接到 mysql 数据库的速度非常慢。我已经刷新了很多次，但结果同样缓慢。

```
1020.84ms   connect
0.39ms  SELECT `tipo_usuario`.* FROM `tipo_usuario`
0.40ms  SELECT `palestra`.* FROM `palestra` ORDER BY `hora_inicio_prevista` asc 
```

一位朋友在另一台机器上测试过相同的应用程序，它是正常的，在不到 50 毫秒内连接。我正在使用 pdo mysql dll 驱动程序版本 5.4.4.0，客户端 API 版本 mysqlnd 5.0.10 - 20111026。

我的环境：Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4

知道为什么连接很慢吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T22:13:45.583

正如评论中所讨论的：在连接函数中将 localhost 更改为 127.0.0.1 通常可以解决 PDO 的连接问题。[这](http://drupal.org/node/1064342)是一个更详细地涵盖此主题的线程。

# c# - 使用命令行 csc.exe 创建 C# 可移植类库？

> ID：11423571
> 
> 赞同：0
> 
> 时间：2012-07-10T23:41:41.870
> 
> 标签：c#, .net, windows, windows-phone-7, dll

我还没有找到任何关于如何做到这一点的信息，或者即使它是可能的。

[http://msdn.microsoft.com/en-us/library/e13syb43](http://msdn.microsoft.com/en-us/library/e13syb43)

没有提到任何关于构建可移植类库的内容，并且

[http://msdn.microsoft.com/en-us/library/gg597391.aspx](http://msdn.microsoft.com/en-us/library/gg597391.aspx)

没有提到任何关于命令行界面的内容。

有没有其他人尝试过这样做并找到解决方案/发现这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:26:49.827

通过命令行构建可移植库是可能的，您只需要传递正确的框架引用。这些决定了您将支持哪些平台。

首先，您想通过命令行执行此操作的原因是因为您没有 Visual Studio Pro 吗？如果是这样，那就有点棘手了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:07:23.697

通常你会从命令行使用 MSBuild 构建 csproj，而不是手动调用 csc.exe。

另一方面，该项目似乎是一组程序集 - 您应该能够通过 csc 命令行提供正确的引用集（可能还需要禁用默认库）并手动构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:36:27.870

[http://msdn.microsoft.com/en-us/library/gg597391.aspx](http://msdn.microsoft.com/en-us/library/gg597391.aspx)将告诉您哪些支持程序集可以进入您的 dll，或者可以部署在哪里。

[http://videojugpages.com/pages/610-Microsoft-Visual-C-Express-Setup](http://videojugpages.com/pages/610-Microsoft-Visual-C-Express-Setup)此链接将向您展示如何在命令行中创建 dll。这很简单，一般的 dll 与可移植类型没有什么不同，除了它可以部署在哪里以及它可以依赖什么。希望这可以帮助。

# php - 允许用户使用 CakePHP 访问 API

> ID：11423573
> 
> 赞同：1
> 
> 时间：2012-07-10T23:41:57.713
> 
> 标签：php, api, cakephp, authentication, controllers

我正在构建一个 CakePHP 应用程序并且我有一个 API 控制器。这包含一些在站点中很常见的方法，我将它们与 jQuery AJAX 调用一起使用来做某些事情。我最近使用 Auth 组件实现了用户注册，但现在每当我在未登录的情况下尝试访问 API 时，我都会被重定向到登录页面。

这是我的`AppController`代码：

```
class AppController extends Controller {   
    public $components = array('Session', 'Auth' => array(
        'loginRedirect' => array('controller' => 'users', 'action' => 'images'),
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'home')
    ));

    public function beforeRender() {
        $this->set('loggedIn', $this->Auth->loggedIn());
        $this->set('username', $this->Auth->user('username'));
    }

    public function beforeFilter() {
        $this->Auth->allow('home', 'register', 'login');
    }
} 
```

我知道我可以使用该方法在我的 API 控制器中允许某些方法`$this->Auth->allow()`，但是有没有办法让它在控制器范围内使用？例如，我可以在我的 API 控制器中放入一些东西，以便未登录的用户也可以访问它的方法吗？我宁愿不要将每个操作的方法名称放在允许列表中，因为其中大约有 30 个。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:16:45.837

Put this in the ApiController:

```
public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow(); //pass no arguments to allow all
} 
```

# jquery - jQuery UI datepicker 动态宽度 IE9 bug

> ID：11423577
> 
> 赞同：0
> 
> 时间：2012-07-10T23:42:05.940
> 
> 标签：jquery, jquery-ui, internet-explorer

我正在为我的需要定制 jQuery UI 日期选择器。我需要做的一件事是将日期选择器的大小调整为与输入相同的大小，所以我这样做：

```
$input.on('focus keyup', function(){
  $(this).datepicker('widget').width($(this).outerWidth())
}) 
```

它适用于除 IE9 之外的所有浏览器。它甚至可以在 IE8 上运行。只要您使用箭头更改月份/年份，IE9 中发生的事情就会变得显而易见。如您所见，有时宽度没有调整，看起来很奇怪。这似乎是随机的，我无法弄清楚错误来自哪里以及如何解决它。

[**演示**](http://elclanrs.github.com/jq-idealforms/)（日期字段）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:05:29.663

好吧，看来我用旧的`setTimeout(f, 1)`黑客修复了它。它现在在 IE9 中运行良好。

```
$(this).datepicker({
  onChangeMonthYear: function () {
    // hack to fix ie9 not resizing
    var w = $(this).outerWidth() // cache first!
    setTimeout(function(){
      $(this).datepicker('widget').width(w)
    }, 1)
  }
}) 
```

# c++ - 将仿函数映射到失去作用域的成员函数

> ID：11423582
> 
> 赞同：2
> 
> 时间：2012-07-10T23:42:30.790
> 
> 标签：c++, mapping, functor

我希望能够从具有相同通用语法和基类的不同类中调用一些成员函数。类似的东西

```
class A: public BaseClass
{
public:
    A();
    ~A();

    int DoFoo();
    int DoBar();
    int DoBarBar();
};

class B : public BaseClass
{
public:
    B();
    ~B();

    int DoSomething();
    int DoSomethingElse();
    int DoAnother();
}; 
```

我可以将两个类中的成员函数放入一个映射中，这样我就可以拥有类似的东西

```
 key           value
"Option1"     *DoFoo()
"Option2"     *DoSomething()
"Option3"     *DoFoo()
 ...            ...
"Option6"     *DoAnother() 
```

无论函数属于哪个类，我都可以根据我选择的选项调用函数以返回值。

通过一些搜索，我尝试实现自己的映射函子集。但是，映射保留了函子的地址，但其中的函数变为空。

这是我的函子声明，其中存储了一个类对象和一个函数指针

```
 #include <stdio.h>
    #include <vector>
    #include <algorithm>
    #include <map>
    #include <string>

//////////////////////////////////////////////////////////////
//Functor Classes
////////////////////////////////////////////////////////////// 
    class TFunctor
    {
    public:
      virtual void operator()()=0;  // call using operator
      virtual int Call()=0;        // call using function
    };

    // derived template class
    template <class TClass> class TSpecificFunctor : public TFunctor
    {
    private:
      int (TClass::*fpt)();   // pointer to member function
      TClass* pt2Object;                  // pointer to object

    public:

      // constructor - takes pointer to an object and pointer to a member and stores
      // them in two private variables
      TSpecificFunctor(TClass* _pt2Object, int(TClass::*_fpt)())
         { pt2Object = _pt2Object;  fpt=_fpt; };

      // override operator "()"
      virtual void operator()()
       { (*pt2Object.*fpt)();};              // execute member function

      // override function "Call"
      virtual int Call()
        {return (*pt2Object.*fpt)();};             // execute member function
    };

    typedef std::map<std::string, TFunctor*> TestMap;

//////////////////////////////////////////////////////////////
//Test Classes
//////////////////////////////////////////////////////////////
//Base Test class 
class base
{
public:
    base(int length, int width){m_length = length; m_width = width;}
    virtual ~base(){}

    int area(){return m_length*m_width;}

    int m_length;
    int m_width;
};

//Inherited class which contains two functions I would like to point to
class inherit:public base
{
public:
    inherit(int length, int width, int height);
    ~inherit();
    int volume(){return base::area()*m_height;}
    int area2(){return m_width*m_height;}

    int m_height;
    TestMap m_map;
}; 
```

我的继承类构造函数如下所示：

```
inherit::inherit(int length, int width, int height):base(length, width)
{
    m_height = height;
    TSpecificFunctor<inherit> funcA(this, &inherit::volume);
    m_map["a"] = &funcA;

    TSpecificFunctor<inherit> funcB(this, &inherit::area2);
    m_map["b"] = &funcB;
} 
```

这是我将两个函数映射到地图的地方。就内存地址和函数指针而言，上述函数看起来还不错。

然后我尝试在一个新类中创建一个继承实例......

```
class overall
{
public:
    overall();
    ~overall(){}

    inherit *m_inherit;
    TestMap m_mapOverall;
};
overall::overall()
{
    m_inherit = new inherit(3,4,5);

    TestMap tempMap = m_inherit->m_map;
    int i = 0;
} 
```

在这里，当我查看 m_inherit->m_map 的值时，我注意到键仍然是一致的，但是我试图指向的函数的内存地址已经消失了。

我对仿函数没有太多经验，但据我了解，它能够保留状态，我认为这意味着我可以在其类之外调用成员函数。但是我开始认为我的成员函数消失了，因为它超出了范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:03:43.633

你是对的，这是一个独家问题。在`inherit`构造函数中，`funcA`并且`funcB`都在堆栈上分配并在函数超出范围时销毁。`m_map`带有陈旧指针的叶子。

你真正想要的是

```
inherit::inherit(int lenght, int width, int height) :base(length, width)
{
    m_height = height;

    // allocated on the heap
    TSpecificFunctor<inherit> * funcA = new TSpecificFunctor<inherit>(this, &inherit::volume);
    m_map["a"] = funcA;

    // allocated on the heap
    TSpecificFunctor<inherit> * funcB = new TSpecificFunctor<inherit>(this, &inherit::area2);
    m_map["b"] = funcB;
} // when this function exits funcA and funcB are not destroyed 
```

但是，为了避免任何内存泄漏，析构函数 for`inherit`将需要清理这些值

```
inherit::~inherit()
{
    for(TestMap::iterator it = m_map.begin(); it != m_map.end(); ++it) {
        delete it->second;
    }
} 
```

使用`new`and`delete`很容易导致内存泄漏。为了防止它们，我建议研究像`std::unique_ptr`and之类的智能点`std::shared_ptr`。此外，随着 C++11 中 lambda 的引入，仿函数也变得过时。如果您不熟悉它们，它们真的很整洁，值得研究。

* * *

如果您的编译器支持它们，请使用 lambdas 执行此操作

```
#include <functional>

// ...

typedef std::map<std::string, std::function<int(void)>> TestMap;

// ...

inherit::inherit(int length, int width, int height):base(length, width)
{
    m_height = height;
    m_map["a"] = [this]() -> int { return volume(); };
    m_map["b"] = [this]() -> int { return area2(); };

    // can be called like so
    m_map["a"]();
    m_map["b"]();
}

// No need to clean up in destructors 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:04:16.363

你是对的 - `TSpecificFunctor`s 在 ' 构造函数的末尾超出范围`inherit`，所以你不应该保留指向它们的指针。

如果可以的话，更喜欢智能指针，例如

```
#include <memory>

...

typedef std::map<std::string, std::shared_ptr<TFunctor>> TestMap;

...

inherit::inherit(int length, int width, int height):base(length, width)
{
    m_height = height;
    m_map["a"] = std::shared_ptr<TSpecificFunctor<inherit>>(
        new TSpecificFunctor<inherit>(this, &inherit::volume));
    m_map["b"] = std::shared_ptr<TSpecificFunctor<inherit>>(
        new TSpecificFunctor<inherit>(this, &inherit::area2));
} 
```

然后，您主要关心的是确保在销毁`m_inherit->m_map`后不调用仿函数，`m_inherit`否则您将获得未定义的行为。在这种情况下，你是安全`m_inherit`的，因为你泄漏了（它永远不会被破坏）。

# java - 大括号缺少返回语句？

> ID：11423584
> 
> 赞同：1
> 
> 时间：2012-07-10T23:42:34.550
> 
> 标签：java, swing, if-statement

我目前正在编写一个程序，其中我有一串方法设置基本相同。如果给他们 i = 1，他们将返回产品价格乘以订购数量。否则，他们只会退回订购的数量。但是，每当我尝试编译它时，编译器都会说括号缺少返回语句。我已经多次浏览了代码，我没有看到语法中有任何明显的错误。关于为什么会发生这种情况的任何猜测？

感谢您的任何帮助。

相关来源：

```
private class ButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent e)
        {
            if (e.getSource() == switchCard)
            {
                cl.show(infoPanel, (String)candyList.getSelectedValue());
            }

        if (e.getSource() == checkoutButton)
        {
            double acidPops = acidPopsTotal(1);
            double bertieBotts = bertieBottsTotal(1);
            double bloodPops = bloodPopsTotal(1);
            double cauldronCakes = cauldronCakesTotal(1);
            double charmChoc = charmChocTotal(1);
            double chocoballs = chocoballsTotal(1);
            double chocCauldrons = chocCauldronsTotal(1);
            double chocFrogs = chocFrogsTotal(1);
            double chocWands = chocWandsTotal(1);
            double roachClusters = roachClustersTotal(1);
            double crystalPineapple = crystalPineappleTotal(1);
            double droobleGum = droobleGumTotal(1);
            double explodeBonbons = explodeBonbonsTotal(1);
            double fizzWhiz = fizzWhizTotal(1);
            double iceMice = iceMiceTotal(1);
            double jellySlugs = jellySlugsTotal(1);
            double liquorWands = liquorWandsTotal(1);
            double pepImpts = pepImpsTotal(1);
            double pinkIce = pinkIceTotal(1);
            double shockChoc = shockChocTotal(1);
            double spindleSpiders = spindleSpidersTotal(1);
            double quills = quillsTotal(1);
            double wizochoc = wizochocTotal(1);
        }
    }

    double acidPopsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (5.95* (Integer.parseInt(acidPopsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(acidPopsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double bertieBottsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (16.95 * (Integer.parseInt(bertieBottsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(bertieBottsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double bloodPopsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (5.95 * (Integer.parseInt(bloodPopsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(bloodPopsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double cauldronCakesTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (14.95 * (Integer.parseInt(cauldronCakesTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(cauldronCakesTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double charmChocTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (5.95 * (Integer.parseInt(charmChocTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(charmChocTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double chocoballsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (9.95 * (Integer.parseInt(chocoballsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(chocoballsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double chocCauldronsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (14.95 * (Integer.parseInt(chocCauldronsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(chocCauldronsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double chocFrogsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (14.95 * (Integer.parseInt(chocFrogsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(chocFrogsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double chocWandsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (9.95 * (Integer.parseInt(chocWandsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(chocWandsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double roachClustersTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (5.95 * (Integer.parseInt(roachClustersTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(roachClustersTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double crystalPineappleTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (9.95 * (Integer.parseInt(crystalPineappleTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(crystalPineappleTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double droobleGumTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (2.95 * (Integer.parseInt(droobleGumTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(droobleGumTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double explodeBonbonsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (9.95 * (Integer.parseInt(explodeBonbonsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(explodeBonbonsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double fizzWhizTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (9.95 * (Integer.parseInt(fizzWhizTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(fizzWhizTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double iceMiceTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (5.95 * (Integer.parseInt(iceMiceTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(iceMiceTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double jellySlugsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (2.95 * (Integer.parseInt(jellySlugsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(jellySlugsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double liquorWandsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (9.95 * (Integer.parseInt(liquorWandsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(liquorWandsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double pepImpsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (4.95 * (Integer.parseInt(pepImpsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(pepImpsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double pinkIceTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (4.95 * (Integer.parseInt(pinkCocoIceTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(pinkCocoIceTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double shockChocTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (4.95 * (Integer.parseInt(shockChocTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(shockChocTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double spindleSpidersTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (4.95 * (Integer.parseInt(spindleSpidersTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(spindleSpidersTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double quillsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (1.95 * (Integer.parseInt(sugarQuillsTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(sugarQuillsTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }

    double wizochocTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (5.95 * (Integer.parseInt(wizochocTF.getText())));
            }
            catch (NumberFormatException e) {}
        }
        else
        {
            try
            {
                return Integer.parseInt(wizochocTF.getText());
            }
            catch (NumberFormatException e) {}
        }
    }
} 
```

错误：

```
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:490: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:510: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:530: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:550: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:570: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:590: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:610: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:630: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:650: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:670: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:690: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:710: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:730: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:750: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:770: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:790: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:810: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:830: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:850: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:870: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:890: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:910: error: missing return statement
        }
        ^
C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java:930: error: missing return statement
        }
        ^
Note: C:\Users\Sam\Desktop\Java\4H 2012\ClientApp.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
23 errors 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T23:45:55.543

由于您的 try-catch 块，无法保证返回。

您可能希望返回 0 或 -1 的标记来显示这一点。

一个可以更清楚地说明这一点的例子：

```
double acidPopsTotal(int i) {
    if (i == 1) {
        try {
            return (5.95* (Integer.parseInt(acidPopsTF.getText())));
        } catch (NumberFormatException e) {
            //Missing return - compile error
        }
    } else {
        try {
            return Integer.parseInt(acidPopsTF.getText());
        } catch (NumberFormatException e) {
            //Missing return - compile error
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:46:12.270

在 Java 中，如果至少存在一条通过不包含 return 或 throw的*非 void函数的路径，则它是编译时错误。*因为您捕获了一个抛出的异常并且什么都不做，所以在该路径中没有返回任何内容。因此，错误。

另外：您可能需要考虑一个程序结构，在该结构中您*确实*抛出异常而不是吃掉它。（话又说回来，这可能只是示例代码。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T23:50:06.933

我相信 TheZ 所说的是正确的，如果发现错误，您可能不会返回任何东西。尝试类似...

```
 double chocFrogsTotal(int i)
    {
        if (i == 1)
        {
            try
            {
                return (14.95 * (Integer.parseInt(chocFrogsTF.getText())));
            }
            catch (NumberFormatException e) {return -1.;}
        }
        else
        {
            try
            {
                return Integer.parseInt(chocFrogsTF.getText());
            }
            catch (NumberFormatException e) {return -1.;}
        }
    } 
```

那么每当你返回一个小于 1 的值时，你就知道你的解析错误。

# html - Emacs 中的 HTML 标签不对齐

> ID：11423588
> 
> 赞同：2
> 
> 时间：2012-07-10T23:42:58.230
> 
> 标签：html, emacs, indentation

我正在使用 Emacs 附带的 HTML 模式并编写一个基本的 index.html 页面（例如，只是一个内部带有 div 的主体）。当我尝试关闭标签时，Emacs 不会自动缩进标签以匹配开始标签。我必须在我的 .emacs 文件中设置一些东西吗？

因此问题是：

```
<div>
    content....
    </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:20:39.927

这似乎与您所追求的相似：

[无法更改 Emacs 在 HTML 标记之间的默认缩进](https://stackoverflow.com/questions/2076783/cant-change-emacss-default-indentation-between-html-tags)

有关 HTML 缩进的更多信息：

[http://www.emacswiki.org/emacs/IndentingHtml](http://www.emacswiki.org/emacs/IndentingHtml)

```
(add-hook 'html-mode-hook
  (lambda ()
    ;; Default indentation is usually 2 spaces, changing to 4.
    (set (make-local-variable 'sgml-basic-offset) 4))) 
```

**编辑**：

这似乎是一个很好的解决方案：[emacs 可以为我重新缩进一大块 HTML 吗？](https://stackoverflow.com/questions/137043/can-emacs-re-indent-a-big-blob-of-html-for-me)

> 默认情况下，当您在 Emacs（22 或 23）中访问 .html 文件时，它会将您置于 html 模式。那可能不是你想要的。您可能需要 nxml 模式，这非常花哨。nxml-mode 似乎只随 Emacs 23 一起提供，尽管您可以从 nXML 网站为早期版本的 emacs 下载它。还有一个名为 nxml-mode 的 Debian 和 Ubuntu 软件包

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:12:00.053

`C-M-\`一旦我输入了代码，我就求助于运行来自动格式化我的代码。

# php - PHP 套接字服务器/客户端

> ID：11423596
> 
> 赞同：0
> 
> 时间：2012-07-10T23:44:10.897
> 
> 标签：php

我已经阅读了一些关于编写套接字服务器的好文章，但我想我会在这里询问是否有关于我实际需要的任何进一步的知识/想法。

我为在同一台服务器上运行的客户端运行多个网站，连接到同一个数据库等。每个客户端网站都有一个表单，用户可以在其中提交他们的详细信息以获取我们提供的服务。这些用户分布在世界各地，但我想要构建的是一个监控系统，我的界面显示用户 IP 地址、他们所在的客户端网站、他们所在的页面等。从 IP 我将做一个国家/状态查找（我知道它不是 100% 准确但足够接近是好的）。

我希望访问站点向套接字服务器发送一个数据包，该服务器又将输出信息实时发送到我的屏幕（在我执行一些操作之后）。我想你可以说我正在构建一个迷你 NOC 来监控网站活动。我还希望输出信息是屏幕顶部的最新活动，但还显示滚动条以查看所有活动。

套接字是该系统的最佳机制吗？关于如何实现结果的任何其他建议或教程？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:49:55.177

在您开始这条路之前，您是否检查[过 Google Analytics 的实时部分](http://analytics.blogspot.com/2011/09/whats-happening-on-your-site-right-now.html)？它可以满足您的大部分需求。

当有人访问您的网站时，您通常不会建立持久连接。我建议不要创建一个，而是解析您的服务器日志或将用户信息存储在数据库中，并查询最后`x`几分钟的访问者。

为了实时更新您正在查看的页面，如果您需要非常快的响应时间，Web Sockets 是最好的选择，但目前[在 PHP 中这样做很麻烦](http://code.google.com/p/phpwebsocket/)。此外，浏览器支持不是很广泛。如果您坚持使用 PHP，我建议您通过 AJAX 进行轮询。否则，请考虑将Node.JS与[Socket.IO一起](http://www.nodejs.org/)[使用](http://socket.io/)。Socket.IO 封装了很多与 web sockets 类似的方法，可以毫不费力地达到同样的效果。仍然为您的应用程序使用 PHP……只需将 Node.JS/Socket.IO 部分用于您的监视器界面。

最后，我建议再次质疑你为什么想要这个。您可以在这样的项目上花费大量时间，而事实是，随着时间的推移，您的分析数据比您查看时的快照更有价值。

# oracle - 从一对多表中至少选择 A 和 B

> ID：11423599
> 
> 赞同：1
> 
> 时间：2012-07-10T23:44:25.730
> 
> 标签：oracle, plsql

我有一个与颜色表有关系的产品表

一个产品可以有多种颜色... exp: 产品A：有红色、绿色、蓝色、黄色。

如何选择至少包含红色和绿色（动态）的产品？

例子：

```
Product: RED GREEN - PASS
Product: RED GREEN YELLOW - PASS
Product: RED YELLOW - FAIL 
```

只喜欢连接表解决方案或独立子查询

此问题与 [使用 AND 条件的一对多搜索有关](https://stackoverflow.com/questions/11409302/one-to-many-search-using-and-condition/11411560#comment15060477_11411560)

我试图从基本面解决它。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T23:47:47.163

像这样的东西应该工作

```
SELECT product.name
  FROM product
       JOIN color USING (product_id)
 WHERE color.name IN ('red', 'green')
 GROUP BY product.name
HAVING COUNT(DISTINCT color.name) = 2 
```

其中`HAVING`子句指定列表中的项目数。因此，如果您想要红色、绿色和黄色的产品，您可以将查询更改为

```
SELECT product.name
  FROM product
       JOIN color USING (product_id)
 WHERE color.name IN ('red', 'green', 'yellow')
 GROUP BY product.name
HAVING COUNT(DISTINCT color.name) = 3 
```

# sql - Rails：使用连接模型查找 - 如何？

> ID：11423602
> 
> 赞同：2
> 
> 时间：2012-07-10T23:44:44.560
> 
> 标签：sql, ruby-on-rails-3, activerecord, join

我有以下模型关联，我想使用这些关联来搜索**玩家**：

```
class Player < ActiveRecord::Base
 belongs_to :user
 has_many :abilities
 has_many :sports, :through => :abilities
 ...
end

class User < ActiveRecord::Base
  has_one :player
...
end

class Ability < ActiveRecord::Base
  belongs_to :player
  belongs_to :sport
  has_one :level
  ...
end

class Sport < ActiveRecord::Base
  has_and_belongs_to_many :category_sports 

  has_many :abilities
  has_many :players, :through => :abilities
  ...
end

class CategorySport < ActiveRecord::Base
 has_and_belongs_to_many :sports 
end 
```

我有一个表格，用户可以填写两个输入：**城市**和**运动**

城市字段在用户模型中为 ( `@user.city`)，运动字段可以在 CategorySport 中为 ( `@category_sport.name`) 或在运动模型中为 ( `@sport.name`)。

现在我有以下在**Player**模型中执行搜索：

```
def search
  self.find(:all,:include => 'user',:conditions => ['users.city LIKE ?', "%#{city}%"])
end 
```

我想知道如何在此查询中添加连接模型（能力）和相关（运动、类别运动），以便也按运动查找。因此，不仅可以查找用户城市，还可以查找运动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:18:45.593

试试这个：

```
def search
  self.includes(:user, :abilities => {:sport => :category_sports}).
    where(['users.city LIKE ? OR category_sports.name=? OR sports.name=?', 
      "%#{city}%", sport, sport])
end 
```

# android - 尽可能快地将列表视图滚动到底部，但不要跳过任何正在查看的项目

> ID：11423611
> 
> 赞同：1
> 
> 时间：2012-07-10T23:45:16.057
> 
> 标签：android, scroll, android-listview, smooth-scrolling

我需要让列表视图在其所有项目上尽可能快地滚动，而不跳过其中任何一个。

我发现[smoothScrollToPositionFromTop(int,int,int)](http://developer.android.com/reference/android/widget/AbsListView.html#smoothScrollToPositionFromTop%28int,%20int,%20int%29)非常好，但它只适用于 API11+，我希望至少针对 API8。

我也尝试过使用 setOnScrollListener 和类似的解决方案（例如 setSelection），但它们要么不起作用，要么太慢并且不能反映最终用户可以做什么（快速浏览列表视图）。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:59:17.510

查看 API11+ 中的 ListView 源并将其复制/粘贴到您从 ListView 扩展的类中。

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/widget/AbsListView.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/widget/AbsListView.java)

# php - 在表单字段（注册表 buddypress）中预填充 PHP 会话中的值 - 如何？

> ID：11423614
> 
> 赞同：1
> 
> 时间：2012-07-10T23:45:26.510
> 
> 标签：php, forms, session-variables, populate, buddypress

尝试了到目前为止我能找到的所有东西，但无济于事:-(

我有一些值（如“name”、“prename”、“gendre”）存储在 php 会话中。

我现在想用这些值预先填写一个表格（更精确的带有额外字段的 buddypress 注册表单）。

所以我到目前为止：

```
<?php 

$field_1 = $_POST['Name'];
$field_5 = $_POST['Prename']; 
$field_7 = $_POST['gendre']; 

?> 
```

在表单中，我需要（动态）预填充的字段如下所示：

```
<input type="text" name="<?php bp_the_profile_field_input_name() ?>" id="<?php bp_the_profile_field_input_name() ?>" value="<?php bp_the_profile_field_edit_value() ?>"> 
```

所以问题是该字段是动态生成的，所以我必须以某种方式遍历这些值（field_1、field_5 等）以获取预填充适当值的适当字段（从该会话中提取）。

我真的不知道我应该如何修改 `value="<?php bp_the_profile_field_edit_value() ?>`以获得正确的值。

或任何其他方法:)

请善待并发布示例/代码，因为我不是程序员，所以我从一般解释中了解很少:-(

谢谢！

# php - 可以通过更改下拉菜单中的选项来发送/接收 PHP 数据吗？

> ID：11423615
> 
> 赞同：0
> 
> 时间：2012-07-10T23:45:38.827
> 
> 标签：php, javascript, html, jsonp

假设我有一个这样的选择框：

```
<select style="margin-top: 5px; width: 190px;" id="daySelect">
    <option>Monday, April 1st</option>
    <option>Tuesday, April 2nd</option>
    <option>Wednesday, April 3rd</option>
    <option>Thursday, April 4th</option>
    <option>Friday, April 5th</option>
    <option>Saturday, April 6th</option>
    <option>Sunday, April 7th</option>
    <option>Monday, April 8th</option>
</select> 
```

我想将一些变量发送到 php 以写入文件，然后在从选定的下拉列表中加载信息之后（如果重要，我正在保存/加载的信息将在 JSON 中）。

例如：如果我目前在 4 月 1 日星期一，并且我在 JSON 中有一个变量 xyz。当我单击 4 月 2 日星期二时，我想将 xyz 保存到服务器（使用 php）并找到星期二的 xyz 变量并加载它。

我只是想知道这是否可能？以及有关如何处理此代码的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:48:35.187

是的，写入文件的代码将在标准 php 脚本中。您将需要使用 javascript 将 onchange 处理程序附加到选择框，这将触发 ajax 请求，将数据发送到 php 页面。然后，php 页面可以回显一些数据，这些数据将在 ajax 请求的成功处理程序中返回，从而允许您在前端处理返回的数据。

我建议研究一下 jQuery，因为它让生活变得更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:24:24.453

我同意乔恩的观点，但无论如何，这就是它的要点:)

```
$('#daySelect').on('change', function() {
  $.get({
    uri: '/your/php/script',
    data: $(this).val(),
    success: function() { console.log('success') },
    error: function() { console.log('something went wrong') }
  });
}); 
```

# google-maps - OpenLayers + 谷歌广告

> ID：11423618
> 
> 赞同：1
> 
> 时间：2012-07-10T23:45:59.523
> 
> 标签：google-maps, openlayers, adsense

如何使用 Google 地图图层在 OpenLayers 中使用 Google Adsense？

在 google maps (v2) 地图中使用 adsense 的代码：

```
map = new GMap2(document.getElementById("Gmap"));
adsManager = new GAdsManager(
    map, 
    "ca-pub-xxxxxxxxxxxxxxxx", 
    {
        maxAdsOnMap : 4,
        style: 'adunit'
    }
);
adsManager.enable();

## The HTML:
<div id="Gmap"></div> 
```

![谷歌地图 v2 中的结果广告](../Images/2ca8c9e7e4d74ec8257ca1e2539b82a7.png)

在 openlayers 中显示谷歌地图的代码：

```
map = new OpenLayers.Map("olmap")
var gmap = new OpenLayers.Layer.Google("Google Streets", {numZoomLevels: 20});
map.addLayers([gmap]);

## The HTML:
<div id="olmap"></div> 
```

有什么方法可以在 openlayers 中获取 google maps 对象？然后我可以使用第一个代码添加广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:33:03.010

我找到了！查看 Openlayers 源代码和 firebug :)

似乎当您拥有此代码时

```
map = new OpenLayers.Map("olmap")
var gmap = new OpenLayers.Layer.Google("Google Streets", {numZoomLevels: 20});
map.addLayers([osm, gmap]);

## The HTML:
<div id="olmap"></div> 
```

你可以使用这个js来引用谷歌地图对象

```
map.baseLayer.mapObject 
```

所以，根据[这个](https://developers.google.com/maps/documentation/javascript/advertising)，它会是这样的

```
## html
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=adsense&sensor=true_or_false"></script>
<div id="olmap"></div>

## js
map = new OpenLayers.Map("olmap")
var gmap = new OpenLayers.Layer.Google("Google Streets", {numZoomLevels: 20});
map.addLayers([gmap]);

var adUnitDiv = document.createElement('div');
var adUnitOptions = {
  format: google.maps.adsense.AdFormat.HALF_BANNER,
  position: google.maps.ControlPosition.TOP,
  map: map.baseLayer.mapObject,
  visible: true,
  publisherId: 'YOUR_PUBLISHER_ID'
}
adUnit = new google.maps.adsense.AdUnit(adUnitDiv, adUnitOptions); 
```

（未测试）

# php - mysql / php电子邮件问题

> ID：11423619
> 
> 赞同：1
> 
> 时间：2012-07-10T23:46:01.537
> 
> 标签：php, mysql, sql

我创建了一个电子邮件程序，用于检查用户上次登录的时间，如果用户 10 天未登录，它会向他/她发送一封电子邮件。现在，我希望系统检查同一用户是否执行了两次操作，并通过电子邮件向他们发送不同的电子邮件。表 1 用户：

```
id - name - loggedindate
0    john      7/11/2012
1    mark      7/6/2012
2    johnny    7/6/2012
3    bruce     7/2/2012 
```

表 2 邮件字段如下：

```
id - days -emailtosend - numberoftimeseventhappens
0     4      hello                  1
1     4      blabla                 2
2     6      example                1
3     3      to                     1
4     4      demonstrate            1 
```

所以这里例如马克和约翰尼4天没有登录。该事件第一次发生时它向他们发送电子邮件“你好”第二次事件发生时电子邮件发送者需要向他们发送“blabla”所以可以说马克没有登录 4 天，第一封电子邮件将发送然后他登录第 5 天，然后又过了 4 天，他没有登录，我想向他发送第二封电子邮件，该电子邮件将`ID=2`在表 2 上，该文件在 cron 上运行，每 2 小时检查一次有关如何操作的想法？我只需要这样做的方法，而不是我可以自己编写的实际代码，我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:48:41.003

向用户表添加一个新字段，以跟踪发送给他们的最后一种电子邮件类型。下次您必须发送电子邮件时，您发送“最后一封电子邮件+1”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:58:54.640

我建议标准化您的数据集。例如，您可以有三个表：

```
ACCOUNT
LOGIN
NOTIFICATION 
```

结构可能如下：

```
ACCOUNT
-----------------
ID | USER | EMAIL

LOGIN
-----------------
ID | TIMESTAMP

NOTIFICATION
-----------------
ID | TIMESTAMP 
```

现在，您可以拥有位于这三个表之上的视图，该视图仅在上次登录时间戳 >= 今天 - 4 天时才显示帐户 ID。此外，您可以从通知中获取计数，以查看您之前向用户发送电子邮件的次数，或者您可能想做一些事情，例如检查自上次发送通知以来已经过去了多少时间，如果是 5 天发送“blabla” ，但如果超过某个阈值，则发送“你好”。

因此，您可能会在以下情况下发送电子邮件“blablah”：

```
LOGIN.TIMESTAMP <= today - 4 days
AND LOGIN.TIMESTAMP > MAX(NOTIFICATION.TIMESTAMP)
AND MAX(NOTIFICATION.TIMESTAMP) - 2NDLARGEST(NOTIFICATION.TIMESTAMP) BETWEEN 5 AND 30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T03:22:41.223

Marc B 回答它是正确的，但您还需要向用户添加另一个日期时间列（即：last_email_sent）。因为你的 cron php 文件应该做的是检查自上次登录以来的天数，如果 last_email_sent>=4 天或者它为空，那么你发送 last_email + 1 并更新 last_email_sent（到今天的日期）和 last_email（到 last_email+1）。

# magento - 在magento中通过created_at过滤发票集合

> ID：11423623
> 
> 赞同：1
> 
> 时间：2012-07-10T23:46:23.610
> 
> 标签：magento, collections, filtering

我试图在下面的函数中找到一种方法来过滤 getInvoiceCollection 的结果：

```
// "eachInvoice" is each of the Invoice object of the order "$orders"
if ($order->hasInvoices()) {
    foreach ($order->getInvoiceCollection() as $eachInvoice) {
        $invoiceIncrementId = $eachInvoice->getIncrementId();
    }
} 
```

可以将下面的过滤器添加到 $order->getInvoiceCollection()

```
 $order->getInvoiceCollection()
->addAttributeToFilter('created_at', array(
    'from' => $from_date,
    'to' => $today, 
    'date' => true,)); 
```

所以整个功能是正确的方法，它似乎不正确。

```
// "eachInvoice" is each of the Invoice object of the order "$orders"
    if ($order->hasInvoices()) {
    foreach ($order->getInvoiceCollection()$order->getInvoiceCollection()
    ->addAttributeToFilter('created_at', array( 'from' => $from_date,
    'to' => $today, 'date' => true,)) as $eachInvoice) {
        $invoiceIncrementId = $eachInvoice->getIncrementId();
    }
} 
```

这样做的“正确方法”是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:41:43.783

要获取示例代码中所示的增量 ID，无需循环：

```
$invoiceCollection = $order->getInvoiceCollection();

$invoiceCollection
        ->addAttributeToFilter('created_at', array(
            'from'  => $from,
            'to'    => $to,                    
        ));

$incrementIds = $invoiceCollection->getColumnValues('increment_id'); 
```

# jquery - 使用 jQuery Dialog 关闭窗口后更改表格行的颜色

> ID：11423625
> 
> 赞同：0
> 
> 时间：2012-07-10T23:46:32.910
> 
> 标签：jquery, dialog

我有一个实例，用户单击打开 jquery 对话框的表行。当用户关闭窗口时，我想更改此行的颜色。

我知道对话框有一个关闭参数，它可以是一个函数（），但我不确定如何从那个点引用 TR。

例如，

```
$("#myPopup").dialog({
    autoOpen: false,
    close: function(event, ui){

 // I am not sure how to get the TR name at this point.
        $("#TR-ID").css('backgroundColor','red');
    }   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:53:42.560

**工作演示** [http://jsfiddle.net/Tr5fX/](http://jsfiddle.net/Tr5fX/) **或** [http://jsfiddle.net/szhqU/](http://jsfiddle.net/szhqU/)

如果您可以轻弹您的代码，我可以看一下，但上面的演示会以 3 种方式更改颜色，它应该会有所帮助。

**行为**请点击`forgot`，你会看到一个对话框弹出。休息随意玩

**代码**

```
$("#forgot").click(function(e) {
    $("#forgot-dialog").dialog("open");
    e.preventDefault();
});

$("#forgot-dialog").dialog({
    modal: true,
    autoOpen: false,
    height: 255,
    width: 300,
    buttons: {
        "Change Table Color": function() {
            $('#hulk').css('background-color', 'yellow');
        },
        Cancel: function() {
            $('#hulk').css('background-color', 'red');
            $(this).dialog("close");
        }
    },
    close: function(){
        $('#hulk').css('background-color', 'blue');
    },
}); 
```

# xml - 通过 OPENXML 解析 XML 时出错

> ID：11423637
> 
> 赞同：1
> 
> 时间：2012-07-10T23:48:30.157
> 
> 标签：xml, sql-server-2008, stored-procedures

我有一个 55MB 的 XML，并尝试使用 OPENXML 将其切碎，因为它似乎比普通的 XML 切碎要快。XML的结构是这样的：

```
<DATA_EXPORT>
<HEADER>
    <RECDATE>
        <START>2011-03-16</START>
        <END>2012-02-10</END>
    </RECDATE>
    <SOME_COUNT>10288</SOME_COUNT>
    <QUESTION_MAP>
        <QUESTION>
            <SERVICE>OU</SERVICE>
            <VARNAME>UNIT</VARNAME>
            <QUESTION_TEXT></QUESTION_TEXT>
        </QUESTION>
                250 more nodes like <QUESTION> 
    </QUESTION_MAP>
</HEADER>
<SOMENODES>
    <SURVEY_ID>448817197</SURVEY_ID>
    <CLIENT_ID>58</CLIENT_ID>
    <SERVICE>OU</SERVICE>
    <RECDATE>2011-03-29</RECDATE>
    <DISDATE>2010-03-29</DISDATE>
</SOMENODES>
    :
    :
   1000s of nodes like <SOMENODES>
</DATA_EXPORT> 
```

我正在使用以下查询从节点中获取数据

```
declare @xmlData varchar(max) = null
        ,@iDoc int  = null
        ,@xml xml = null

select @xmlData = cast(@xml as varchar(max))

    exec sp_xml_preparedocument @iDoc OUTPUT, @xmlData 

    select *
          ,getdate()
    from openxml(@iDoc, '//DATA_EXPORT/SOMEDATA', 2)
    with (
        surveyId        varchar(50)     'SURVEY_ID[1]',
        clientId        int         'CLIENT_ID[1]',
        [service]       varchar(50)     'SERVICE[1]',
        recieveDate     datetime        'RECDATE [1]',
        dischargeDate   datetime                'DISDATE [1]'
    )
    option (optimize for unknown) 
```

我已经写了这是存储过程并且收到以下错误：

```
The XML parse error 0xc00ce562 occurred on line number 1, near the XML text "<".
Msg 6602, Level 16, State 2, Procedure sp_xml_preparedocument, Line 1
The error description is 'A declaration was not closed.'.
Msg 8179, Level 16, State 5, Procedure q_ImportSurveyMasterDetails, Line 81
Could not find prepared statement with handle 0.
The statement has been terminated. 
```

任何人都可以帮助我错误指示的行号错误是什么？还有没有更好更快的方法来切碎一个 55MB 的 XML 文件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:47:38.730

问题＃1 `The XML parse error 0xc00ce562 occurred on line number 1, near the XML text "<"`：。通过将@xmlData 更改为@xml 进行修复，即不将其转换为varchar(max)，只是将其作为xml 传递。感谢@dan radu 提供的所有帮助。

问题＃2：合并语句中的选项关键字。似乎它不能在合并中使用，因为合并语句本身就是一条 sql 语句。它应该在合并语句的末尾使用，例如

```
merge dbo.table1 as target 
using (
        select 
            n.value('(SURVEY_ID)[1]', 'bigint') as surveyId
            ,n.value('(CLIENT_ID)[1]', 'int') as clientId
            ,n.value('(SERVICE)[1]', 'varchar(50)') as [service]
            ,n.value('(RECDATE)[1]', 'datetime') as recieveDate
            ,n.value('(DISDATE)[1]', 'datetime') as dischargeDate
        from @xml.nodes('//DATA_EXPORT/SOMENODES') x(n)

        ) as source 
 on target.surveyId = source.surveyId
    and target.[service] = source.[service]
 when matched then 
 update set 
        target.clientId = source.clientId,
        target.[service] = source.[service],
        target.surveyRecieveDate = source.recieveDate,
        target.dischargeDate = source.dischargeDate
when not matched then
insert (surveyId, clientId, [service], surveyRecieveDate, dischargeDate)
values (surveyId, clientId, [service], recieveDate, dischargeDate)
option (optimize for unknown); 
```

# jquery - Jquery 函数与 Wordpress 冲突

> ID：11423640
> 
> 赞同：0
> 
> 时间：2012-07-10T23:48:37.400
> 
> 标签：jquery, wordpress

在我的wordpress网站的functions.php中，我有这个代码来调用jquery：

```
 function my_scripts_method() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    wp_enqueue_script( 'jquery' );
}    

add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

但是，此代码与此 jquery 代码冲突：

```
$(function() {
    $('#menu > li').hover(
        function () {
            var $this = $(this);
            $('a',$this).stop(true,true).animate({
                    'bottom':'-55px'  /* para não elevar muito o separador*/
                }, 300);
            $('i',$this).stop(true,true).animate({
                    'top':'-10px'
                }, 400);
        },
        function () {
            var $this = $(this);
            $('a',$this).stop(true,true).animate({
                    'bottom':'-130px'  /* para baixar o separador para o sitio original*/
                }, 300);
            $('i',$this).stop(true,true).animate({
                    'top':'50px'
                }, 400);
        }
    );
}); 
```

我确定这是问题所在，因为如果我直接在页面顶部调用[http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js插件可以工作。](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)我试图避免使用 jquery.noConflict 以避免同一页面上的其他 jquery 插件出现问题。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:30:14.950

很高兴它对你有用，但你最好使用 wp_enqueue。

查看这篇文章[http://digwp.com/2009/06/include-jquery-in-wordpress-the-right-way/](http://digwp.com/2009/06/including-jquery-in-wordpress-the-right-way/)

您也可以尝试用“jQuery”替换“$”选择器。Wordpress 包含许多库作为核心的一部分，并且 $ 用于更多不仅仅是 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:04:42.660

你在哪里加载脚本？

如果它在页脚中，请尝试以下操作：

```
 (function($) {
    $('#menu > li').hover(
        function () {
            var $this = $(this);
            $('a',$this).stop(true,true).animate({
                    'bottom':'-55px'  /* para não elevar muito o separador*/
                }, 300);
            $('i',$this).stop(true,true).animate({
                    'top':'-10px'
                }, 400);
        },
        function () {
            var $this = $(this);
            $('a',$this).stop(true,true).animate({
                    'bottom':'-130px'  /* para baixar o separador para o sitio original*/
                }, 300);
            $('i',$this).stop(true,true).animate({
                    'top':'50px'
                }, 400);
        }
    );
})( jQuery ); 
```

如果它在标题中，请尝试以下操作：

```
jQuery(document).ready(function( $ ) {  
    $('#menu > li').hover(
        function () {
            var $this = $(this);
            $('a',$this).stop(true,true).animate({
                    'bottom':'-55px'  /* para não elevar muito o separador*/
                }, 300);
            $('i',$this).stop(true,true).animate({
                    'top':'-10px'
                }, 400);
        },
        function () {
            var $this = $(this);
            $('a',$this).stop(true,true).animate({
                    'bottom':'-130px'  /* para baixar o separador para o sitio original*/
                }, 300);
            $('i',$this).stop(true,true).animate({
                    'top':'50px'
                }, 400);
        }
    );
}); 
```

# php - 传递多个json值时jQuery不执行

> ID：11423644
> 
> 赞同：0
> 
> 时间：2012-07-10T23:48:51.453
> 
> 标签：php, jquery, codeigniter

如何通过 json 将多个返回的 mysql 行传递给下面的 jquery 脚本？使用到目前为止我编写的代码，当我将 2 或更多传递给它时，我无法让 jquery 成功回调函数执行。我将如何实现这一目标？

jQuery, Js 代码：

```
$("#projects").click(function() {
    jQuery.ajax({ type: "POST", dataType: "JSON",
        url: "<?=base_url()?>index.php/home/projectsSlider",
        json: {returned: true}, success: function(data) {
            if (data.returned === true) {
                $("#content").fadeOut(150, function() {                             
                    $(this).replaceWith(projectsSlider(data.projectId, data.projectName, data.startDate, data.finishedDate, data.projectDesc, data.createdFor, data.contributors, data.screenshotURI, data.websiteURL), function() {
                        $(this).fadeIn(150);
                    });
                });
            }
        }
    });
}); 
```

php代码：

```
function projectsSlider() {
    $query  = $this->db->query("SELECT * FROM projects ORDER BY idprojects DESC");
    foreach ($query->result() as $row) {
        $projectId = $row->projectId;
        $projectName = $row->projectName;
        $startDate = $row->startDate;
        $finishedDate = $row->finishedDate;
        $createdFor = $row->createdFor;
        $contributors = $row->contributors;
        $projectDesc = $row->projectDesc;
        echo json_encode(array('returned' => true,
            'projectId' => $projectId,
            'projectName' => $projectName,
            'startDate' => $startDate,
            'finishedDate' => $finishedDate,
            'projectDesc' => $projectDesc,
            'createdFor' => $createdFor,
            'contributors' => $contributors));
    }
    $query1 = $this->db->query("SELECT * FROM screenshots s WHERE s.projectId = '{$projectId}' ORDER BY s.idscreenshot DESC");
    foreach ($query1->result() as $row2) {
        $screenshotURI = $row2->screenshotURI;
        $websiteURL = $row->websiteURL;
        echo json_encode(array('screenshotURI' => $screenshotURI,'websiteURL' => $websiteURL));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:24:32.610

您正在回显两个不同的 JSON 字符串。这将不是一个有效的 JSON。因此（虽然我没有测试过），ajax 调用会失败。

我建议你合并这两个 JSON 并从“projectsSlider()”函数中只返回一个有效的 JSON。像这样：

```
$projectArray = $this->getProjectsRowSet();
$screenshotsArray = $this->getScreenshotsRowSet();
$combinedArray = array_merge(array("Projects" =>$projectArray),array("Screenshots" =>$screenshotsArray));
echo json_encode($combinedArray); 
```

然后使用“data.Projects”和“data.Screenshots”从 ajax 回调方法中访问每个行集。像这样：

```
$("#resultProjects").html(JSON.stringify(data.Projects));
$("#resultScreenshots").html(JSON.stringify(data.Screenshots)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:52:14.433

有效的 JSON 字符串基本上是 JS 代码块中赋值语句的右侧。您在 foreach() 循环中生成了多个独立的 JSON 字符串，并且基本上产生了类似的东西

```
var x = 1; 2; 3; 4; 5; 6; 
```

这是一个明确的语法错误。您正在生成无法解析的 json。

您的循环应该构建一个单一的整体 PHP 数据结构，然后在循环完成后对其进行 json_encode：

```
$data = array();
foreach($query1->result() as $row2) {
   $data[] = array($row2->screenshotURI, $row->websiteURL);
}
echo json_encode($data); 
```

# delphi - 如何解决 Delphi 2010 应用程序中未处理的 win32 异常？

> ID：11423650
> 
> 赞同：1
> 
> 时间：2012-07-10T23:49:52.253
> 
> 标签：delphi, delphi-2010, unhandled-exception

我在 XP Pro 机器上运行 Delphi 2010 Professional。我已经在一个程序上工作了几天。每次我在我的开发机器上运行程序时，它运行得很好，或者我想。我从 IDE 中运行该程序，它运行良好。我从输出目录（IDE 外部）运行程序，它运行良好。每当我在我的机器上运行这个程序时，我都没有遇到任何问题。

因此，为了模拟客户体验，我将 .exe 文件复制到记忆棒上，然后将其复制到完全不同的机器上。当我在另一台机器上运行程序时，我得到一个未处理的 win32 异常。

这是错误对话框：

```
+------------------------------------------------------------------------------+
| Visual Studio Just-In-Time Debugger                                          |
+------------------------------------------------------------------------------+
| An unhandled win32 exception occured in ZilchStd.exe [984]. Just-In-Time     |
| debugging this exception failed with the following error: No installed       |
| debugger has Just-In-Time debugging enabled. In Visual Studio, Just-In-Time  |
| debugging can be enabled from the Tools/Options/Debugging/Just-In-Time.      |
|                                                                              |
| Check the documention index for "just-in-tim debugging, errors' from more    |
| information.                                                                 |
+------------------------------------------------------------------------------+ 
```

我以前从来没有遇到过这种情况。如何解决此错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T23:55:21.530

使用[MadExcept](http://www.madshi.net)，这将允许您查看堆栈跟踪和有关错误的更多信息。它对非商业用途是免费的（意味着像您一样测试您的应用程序，但不将其作为您的应用程序的一部分分发），并且商业用途许可证非常有用且价格合理。

您甚至可以`MadExcept`将最终用户的错误报告通过电子邮件发送给您，其中可以包括详细的环境信息，例如硬件配置和系统库版本。

还有其他可用的调试工具，例如[Jedi中包含的 JCLDebug 功能和](http://delphi-jedi.org)[EurekaLog](http://www.eurekalog.com)等商业产品；我从来没有使用过它们中的任何一个，所以我无法进行比较。

# php - 如何使用 javascript/php 清除日志文件？

> ID：11423655
> 
> 赞同：0
> 
> 时间：2012-07-10T23:50:19.447
> 
> 标签：php, javascript, html

我想每 X 小时使用 javascript/php 清除一个日志文件？这可能吗，如果可以，您可以帮助设计运行它所需的代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T23:52:56.590

我将*假设*您更喜欢涉及 PHP 的答案，因为日志通常不使用 JavaScript 保存，我*假设*您在客户端上下文中指的是这里。

一个简单的[`file_put_contents`](http://php.net/file_put_contents)就可以了。

```
file_put_contents('/the/path/of/your/log/file.log', ''); 
```

为了完整起见，您将在 node.js 中使用[`fs.writeFile`](http://nodemanual.org/latest/nodejs_ref_guide/fs.html#fs.writeFile).

```
fs.writeFile("/the/path/of/your/log/file.log", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:52:54.073

如果日志文件在网络服务器上，则不能直接使用 javascript 执行此操作，您必须使用 php 执行此操作，尽管您可以从 javascript 调用相应的 php-site。

只需使用以下命令删除 php 中的文件：

```
unlink('your_file_name.log'); 
```

[http://www.php.net/manual/de/function.unlink.php](http://www.php.net/manual/de/function.unlink.php)

最简单的做法是设置一个 cronjob 来执行此操作，如果无法在您的网络空间上运行 cronjob，那么下一个最佳选择是检查每个站点访问的文件的年龄并将其删除如果它超过 $x 小时。这可以通过 filectime() 获取文件创建时间戳并将其与 time() 返回的当前时间戳进行比较来完成。如果差异超过 $x 小时，请取消链接。

```
$filename = '/path/to/your/file.log';
if(time() - filectime($filename) > $x * 3600) unlink($filename); // multiply by 3600 'cause times are in seconds 
```

# php - 通过 PHP 优化批量上传到 Rackspace 云文件

> ID：11423658
> 
> 赞同：0
> 
> 时间：2012-07-10T23:50:27.627
> 
> 标签：php, cdn, rackspace

我们有一个应用程序可以解析来自外部源的数据并将其本地化，保存和调整图像大小作为该过程的最后一步。鉴于我们处理的规模 [迄今为止 200 万张图像]，我们一直在使用 Rackspace 文件来托管数据......

```
require('/var/libs/rackspace/cloudfiles.php');
$auth = new CF_Authentication('xxx', 'yyyy');
$auth->authenticate();
$conn = new CF_Connection($auth,true);
$container = $conn->get_container('some container');

foreach ($lotsofitems as $onitem){

    // check the record
    // save the image to disk with cURL
    // resize it into 4 more versions
    // post it to rackspace

    if(file_exists('/var/temp/'. $image_id . '_full'. $image_type)){
        $object = $container->create_object($image_id . '_full' . $image_type);
        $object->load_from_filename('/var/temp/'. $image_id . '_full' . $image_type);
        unlink('/var/temp/'. $image_id . '_full' . $image_type); // remove the temp save
    }

    if(file_exists('/var/temp/'. $image_id . '_big'. $image_type)){
        $object = $container->create_object($image_id . '_big' . $image_type);
        $object->load_from_filename('/var/temp/'. $image_id . '_big' . $image_type);
        unlink('/var/temp/'. $image_id . '_big' . $image_type); // remove the temp save
    }

    if(file_exists('/var/temp/'. $image_id . '_med'. $image_type)){
        $object = $container->create_object($image_id . '_med' . $image_type);
        $object->load_from_filename('/var/temp/'. $image_id . '_med' . $image_type);
        unlink('/var/temp/'. $image_id . '_med' . $image_type); // remove the temp save
    }

    // delete the original
    // repeat

} 
```

在优化了我们的解析器、GD 等之后，我们对这个过程进行了基准测试，处理图像大约需要 1 秒，但是将 5 个图像变体传输到 Rackspace 的每个项目需要 2-5 秒，有时会达到 10+。

*   获取图片：1341964436
*   得到图片：1341964436
*   调整大小的图像：1341964437
*   一张图片：1341964446
*   阴天图片：1341964448
*   完成图片：1341964448

一些额外的点：

1.  我们的处理服务器也在 Rackspace 的云上。
2.  共有 5 个图像版本，大小从 30kb 到 2kb 不等
3.  所有图像在传输之前保存到磁盘并在传输后删除
4.  我们的容器 [我们使用几个整体，但每个项目一个] 启用了 CDN

有人对批量转移到 Rackspace 有建议吗？我们应该在一定的持续时间/请求数量后重新连接吗？以其他方式优化我们的连接？或者它只是关于分叉进程并运行大量调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:48:00.293

您是否尝试过使用 CloudFuse？它允许您将 Rackspace CloudFiles 存储桶挂载为挂载。

我已经使用过它，它非常好 - 制作它的人适用于 Rackspace。

[http://sandeepsidhu.wordpress.com/2011/03/07/mounting-cloud-files-using-cloudfuse-into-ubuntu-10-10-v2/](http://sandeepsidhu.wordpress.com/2011/03/07/mounting-cloud-files-using-cloudfuse-into-ubuntu-10-10-v2/)

# javascript - EditingToolbar 干扰 SelectFeature 控件 - OpenLayers

> ID：11423659
> 
> 赞同：0
> 
> 时间：2012-07-10T23:50:45.110
> 
> 标签：javascript, geolocation, openlayers

我正在使用 OpenLayers，但在选择功能时遇到问题：

当地图中添加了 EditingToolbar 时，SelectFeature 控件无法正常工作。它不选择功能，它只能突出显示它。

我猜那是因为 DrawFeature 控件和 SelectFeature 控件的点击相互干扰。

我设法想出的唯一解决方案是停用 EditingToolbar。

这是我用来寻找问题解决方案的示例。我只是从控制台向地图添加了一个 EditingToolbar 并尝试从那里进行调试：http: [//openlayers.org/dev/examples/highlight-feature.html](http://openlayers.org/dev/examples/highlight-feature.html)

如何在不停用 EditingToolbar 的情况下解决此问题？

感谢您的时间和亲切的关心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:35:00.380

我想出办法的方法是：

```
editing_toolbar.controls[2].deactivate(); 
```

现在我可以选择我需要的功能。

当然`editing_toolbar`是对`EditingToolbar`对象的引用和控件是随机选择的；实际上，您需要检查所有控件并找到处于活动状态的控件，然后将其停用。

# html - CSS3变换，想要保持背景图片不旋转

> ID：11423663
> 
> 赞同：0
> 
> 时间：2012-07-10T23:51:21.627
> 
> 标签：html, css

网址是[http://teothemes.com/wp/](http://teothemes.com/wp/)

您可以检查滑块的两个箭头和三角形...我使用了变换：旋转（45度），一切都很好，但背景图像也旋转了，如果您放大该区域，您会在箭头附近看到一些线条, 我需要它和原来的背景一样

我尝试使用 :before 添加背景图像并使用 transform: rotate(-45deg) 将其还原，但 bg 图像没有显示..它不起作用

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:04:05.393

您设置的每个属性都将应用于整个元素。如果您希望它的不同部分具有不同的样式，那么您需要使用多种样式。

如果您只想旋转元素内的箭头图像，请使用子选择器，然后将图像放在一些 img 标签内，

`div img{...}`

这样只会影响图像，而包含 img 的 div 的背景图像将无关紧要。

如果您不明白我的意思，我会在我不在手机时清理我的答案...

# c - 涉及 C free() 的单元测试

> ID：11423665
> 
> 赞同：3
> 
> 时间：2012-07-10T23:52:02.523
> 
> 标签：c, malloc, free

我正在使用 C 语言在 Unix/Linux 中工作。我对内存分配的工作原理有基本的了解，足以知道如果我 malloc() 然后 free()，我不太可能真正释放整个页面。因此，如果我在 free() 之前和之后使用 getrusage()，我不太可能会看到任何区别。

我想为一个破坏数据结构的函数编写一个单元测试，以查看所涉及的内存区域实际上已被释放。我对依赖操作系统的解决方案持开放态度，在这种情况下，我的主要平台是

```
Linux beast 3.2.0-23-generic #36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

以 OS X 和[FreeBSD](http://en.wikipedia.org/wiki/FreeBSD)作为辅助。如果有一种解决方案可以使检查 free() 相对容易，我也愿意更换 malloc()。

需要明确的是，我正在测试一个删除大型数据结构的例程，并且我想确保所有分配的区域都被实际释放，本质上是一个单元测试，特定单元没有基本的内存泄漏. 我将假设 free() 完成了它的工作，我只是确保我的代码实际上在它负责的所有分配区域上调用 free。

在这种特殊情况下，它是一个树结构，对于树中的每条数据，该结构负责调用删除存储在树中的数据的例程，这可能是其他一些任意的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:10:49.650

我不想再这样做了，但是经过一夜的睡眠后，我找到了一个明确的答案，它来自 SVID（有人甚至记得 System V 吗？），但它被合并到 Linux 上的 glibc 中，可能是通过它在 dlmalloc 中的使用；因此它可以通过使用 dlmalloc() 作为替代 malloc 的替代品在其他系统上使用。

使用常规

```
struct mallinfo mallinfo(void); 
```

和 struct mallinfo 是

```
struct mallinfo
{
  int arena;    /* non-mmapped space allocated from system */
  int ordblks;  /* number of free chunks */
  int smblks;   /* number of fastbin blocks */
  int hblks;    /* number of mmapped regions */
  int hblkhd;   /* space in mmapped regions */
  int usmblks;  /* maximum total allocated space */
  int fsmblks;  /* space available in freed fastbin blocks */
  int uordblks; /* total allocated space */
  int fordblks; /* total free space */
  int keepcost; /* top-most, releasable (via malloc_trim) space */
}; 
```

特别是 arena 和 uordblks 将为您提供 malloc() 分配的字节数，与使用 sbrk() 或 mmap() 从操作系统请求的页面大小无关，这些页面由 arena 和 hblkhd 给出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T11:20:11.850

我最好的建议是使用`valgrind`.

他们为 malloc 和 free 制作包装器，并比使用自制系统更好地向您展示内存泄漏。他们捕捉到了所有其他类型的错误，这些错误不容易被单元测试发现和测试，比如未初始化的变量。

因此，请始终使用 valgrind 运行您的测试，并制定所有测试都通过并且 valgrind 没有显示错误和未分配内存的成功标准。

PS：如果您已经有一点代码库，开始可能会有点痛苦，但是如果您花时间修复所有 valgrind 错误，您的测试和系统都会更加可靠！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T00:03:58.560

您可以用于各种内存泄漏调试的一个技巧是简单地增加规模，直到问题更加突出。执行一个`malloc/free`循环，然后捕获 的结果`getrusage()`，然后再执行 1000 个`malloc/free`循环，并确保您的进程实际上并未分配更多内存。通过泄漏其中的 1000 个，您可以将问题的规模扩大到突出的程度。

如果您想要更具确定性（但更具侵入性）的东西，您可以覆盖`malloc()`并`free()`跟踪分配并观察来自测试工具的跟踪数据。您可以找到几个调试 malloc 库的示例来向您展示它是如何完成的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T00:03:43.153

最简单的方法是为 malloc 和 free 制作包装器。如果您使用真正的 malloc 和 free 那么可能会发生以下情况：

1.  你分配内存
2.  你用那段记忆做点什么
3.  你释放内存
4.  操作系统中的其他人，甚至您自己的代码中的其他内容，都需要内存，并且操作系统会将该内存分配到其他地方，因为它现在是免费的
5.  你测试看看内存是否空闲，它不是，但你认为它应该是，所以你得到一个错误的测试失败。

# javascript - 如何让 Facebook Like Box “黑暗计划”正常工作？（背景是透明的。）

> ID：11423668
> 
> 赞同：1
> 
> 时间：2012-07-10T23:52:17.650
> 
> 标签：javascript, css, facebook, wordpress, facebook-social-plugins

我已经在我的网站上安装了 Faceook 喜欢和推荐框，并选择了应该有白色背景的代码的深色主题版本。但是，正如您在屏幕截图中看到的那样，背景是白色的。

Facebook 网站上代码的预览版本正确显示（白色背景）。我假设我的网站上有一些 CSS 覆盖了背景。（这很奇怪，因为这是一个 iframe，我不明白这是怎么发生的。）

[你可以在我的侧边栏](http://noahsdad.com/)查看发生了什么，这是一个屏幕截图。（背景应该是白色的。推荐框也发生了同样的事情。[屏幕截图 http://noahsdad.com/wp-content/uploads/2012/07/Screen-Shot-2012-07-10-at- 6.46.30-PM.png](http://noahsdad.com/wp-content/uploads/2012/07/Screen-Shot-2012-07-10-at-6.46.30-PM.png)。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:04:23.893

你为什么不试试

```
.fb_iframe_widget {
    background-color: #fff;
} 
```

# vb6 - Visual Basic 函数过程

> ID：11423672
> 
> 赞同：-1
> 
> 时间：2012-07-10T23:52:55.570
> 
> 标签：vb6

我需要有关以下硬件问题的帮助。除了我编号的说明外，我什么都做了。请帮忙！

家具制造商生产两种类型的家具——椅子和沙发。每把椅子的成本是 350 美元，每个沙发的成本是 925 美元，销售税率是 5%。编写一个 Visual Basic 程序来为订单创建发票表单。

输入表单左侧的数据后，用户可以通过按“处理订单”按钮在列表框中显示发票。

用户可以点击Clear Order Form按钮清除所有文本框和列表框，点击Quit按钮退出程序。

1.  发票编号由客户姓氏的前两个大写字母和邮政编码的后四位数字组成。

2.  输入客户名称时先输入姓氏，然后是逗号、空格和名字。但是，该名称以正确的顺序显示在发票中。

3.  发票编号的生成和名字和姓氏的重新排序应由 Function 程序执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:03:18.070

鉴于这是家庭作业，并且您没有提供任何代码来展示您自己所做的努力，因此我不会提供任何具体答案，但希望我会尝试为您指明正确的方向。

您的前 2 个编号项目看起来是同一主题的变体......字符串操作。假设您从订单中获得了客户的地址信息，您只需要编写 2 个单独的函数来获取姓名和地址的部分，获取您需要的数据并返回值（涵盖您的第 3 项）。

要获取部分名称和地址来生成发票编号，您需要考虑使用`Left()`和`Right()`函数。

就像是：

```
Dim first as String, last as String, word as String
word = "Foo"
first = Left(word, 1)
last = Right(word, 1)
Debug.Print(first)  'prints "F"
Debug.Print(last)  'prints "o" 
```

一旦你得到你需要的零件，那么你只需要担心按照你想要的顺序将这些零件连接在一起。字符串的连接运算符是`&`. 所以使用上面的例子，它会是这样的：

```
Dim concat as String
concat = first & last
Debug.Print(concat)   'prints "Fo" 
```

您的最后一项，使用函数过程来生成所需的值，很容易用谷歌搜索（甚至是一个词）。语法非常简单，所以这里有一个 VB6 未内置的常用函数的快速示例：

```
Private Function IsOdd(value as Integer) As Boolean

    If (value Mod 2) = 0 Then  'determines of value is an odd or even by checking 
                               ' if the value divided by 2 has a remainder or not 
                               ' (aka Mod operator)
        IsOdd = False ' if remainder is 0, set IsOdd to False
    Else
        IsOdd = True  ' otherwise set IsOdd to True
    End If

End Function 
```

希望这能让你朝着正确的方向前进。

# php - PHP PDO 异常：找不到驱动程序

> ID：11423677
> 
> 赞同：7
> 
> 时间：2012-07-10T23:53:48.630
> 
> 标签：php, pdo, freebsd

MySQL-server 和 PHP5-MySQLi 版本是否必须匹配才能建立连接？我目前收到以下错误：我正在运行 BSD。“致命错误：未捕获的异常 'PDOException' 带有消息'找不到驱动程序'......”

这是连接信息：

```
$info = "mysql:dbname=myDB;host=localhost";
$user = "dbUser";
$pw = "somePW";
return(new PDO($info, $user, $pw)); 
```

这是我的 MySQL 信息：

mysql-服务器-5.5.24

php5-mysqli-5.4.3

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-17T02:36:01.663

我在安装 CentOS 时遇到了同样的问题。我曾尝试安装 imagick 并冲洗我的安装。当我删除所有 php 文件并重新安装时，某些东西无法正常工作。

我跑了：

```
yum install php-pdo
yum install php-pdo_mysql 
```

做完这两行之后，我跑了

```
service httpd restart 
```

一切都恢复正常运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T00:00:21.407

PDO 使用特定于数据库的[驱动程序](http://www.php.net/manual/en/pdo.drivers.php)连接到数据库系统。看起来您缺少连接到 MySQL 数据库所需的 pdo_mysql 驱动程序。[pdo_mysql手册](http://www.php.net/manual/en/ref.pdo-mysql.php)页上有一些安装驱动的细节，或者可能有一个BSD包可以使用（恐怕我对BSD不够熟悉，无法提供具体建议）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T00:21:10.383

感谢 zerkms 和 John C 为我指明了正确的方向。以下是我用来安装驱动程序的命令：

```
#cd /usr/ports/databases/php5-pdo_mysql
#make install clean
#apachectl restart 
```

# linux - 指定“zip”命令输出的目标目录（创建的 Zip 文件）

> ID：11423679
> 
> 赞同：18
> 
> 时间：2012-07-10T23:54:32.437
> 
> 标签：linux, unix, zip

zip 命令通常将输出的 zip 文件放在当前目录中。但是，我想知道手册页中是否有一个选项可以让我指定输出存档文件的目标目录。

这在当前目录中创建了“my_archive”：

```
zip -rT my_archive dir_to_be_archived 
```

但是，我希望能够将“my_archive”放在 ./my_backups 下，而不必“cd”到该备份目录中。有没有类似的东西：

```
zip -rt my_archive dir_to_be_archived --destination ./my_backups 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-11T00:01:49.747

您可以直接指定目标路径：

```
zip -r /path/to/destination.zip /files 
```

请记住，目标不应*与*您要压缩的文件位于同一目录中。

# html - 跨域表单发布

> ID：11423682
> 
> 赞同：171
> 
> 时间：2012-07-10T23:54:45.403
> 
> 标签：html, security, http, csrf, same-origin-policy

我已经看过关于这个主题的所有文章和帖子（包括 SO），流行的评论是同源策略阻止跨域的表单 POST。我看到有人建议同源政策不适用于表单帖子的唯一地方[是这里](http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/)。

我想从更“官方”或正式的来源获得答案。例如，有没有人知道 RFC 解决了同源如何影响或不影响表单 POST？

**澄清**：我不是在问是否可以构造 GET 或 POST 并将其发送到任何域。我在问：

1.  如果 Chrome、IE 或 Firefox 允许来自域“Y”的内容向域“X”发送 POST
2.  如果接收 POST 的服务器实际上会看到任何表单值。我这样说是因为大多数在线讨论记录测试人员说服务器收到了帖子，但表单值都是空的/被剥离了。
3.  什么官方文档（即 RFC）解释了预期的行为是什么（不管浏览器当前实现了什么）。

顺便说一句，如果同源不影响表单 POST - 那么它就更清楚地说明了为什么需要防伪令牌。我说“有点”，因为似乎太容易相信攻击者可以简单地发出 HTTP GET 来检索包含防伪令牌的表单，然后发出包含相同令牌的非法 POST。评论？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-07-11T03:14:17.670

同源策略仅适用于浏览器端编程语言。因此，如果您尝试使用 JavaScript 发布到与原始服务器不同的服务器，那么相同的原始策略就会发挥作用，但如果您直接从表单发布，即操作指向不同的服务器，例如：

```
<form action="http://someotherserver.com"> 
```

并且发布表单时不涉及javascript，则不适用同源政策。

有关更多信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-07-11T00:08:43.210

可以构建任意 GET 或 POST 请求并将其发送到受害者浏览器可访问的**任何服务器。**这包括本地网络上的设备，例如打印机和路由器。

构建 CSRF 漏洞利用的方法有很多。 可以使用方法发送[一个简单的基于 POST 的 CSRF 攻击](http://www.exploit-db.com/exploits/18791/)`.submit()`。更复杂的攻击，例如[跨站点文件上传 CSRF 攻击](http://www.exploit-db.com/exploits/18766/)将利用[CORS 使用 xhr.withCredentals 行为](http://blog.kotowicz.net/2011/05/cross-domain-arbitrary-file-upload.html)。

CSRF 不违反[JavaScrip t 的同源策略，](http://code.google.com/p/browsersec/wiki/Part2#Same-origin_policy)因为 SOP 涉及 JavaScript***读取***服务器对客户端请求的响应。CSRF 攻击不关心响应，他们关心请求产生**的副作用**或状态变化，例如添加管理用户或在服务器上执行任意代码。

[确保使用OWASP CSRF 预防备忘单](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)中描述的方法之一保护您的请求。有关 CSRF 的更多信息，请参阅 CSRF[上的 OWASP 页面](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29)。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-05-07T23:09:59.303

同源策略与将请求发送到另一个 url（不同的协议或域或端口）无关。

这完全是关于限制从另一个 url 访问（读取）响应数据。因此，页面中的 JavaScript 代码可以发布到任意域或将该页面中的表单提交到任何地方（除非表单位于具有不同 url 的 iframe 中）。

但是使这些 POST 请求效率低下的原因是这些请求缺少防伪令牌，因此被其他 url 忽略。此外，如果 JavaScript 尝试通过向受害者 url 发送 AJAX 请求来获取该安全令牌，则同源策略会阻止它访问该数据。

一个很好的例子：[这里](https://security.stackexchange.com/questions/8264/why-is-the-same-origin-policy-so-important#answer-72569)

还有一份来自 Mozilla 的优秀文档：[这里](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy)

# sql - 更改主键但出现错误

> ID：11423689
> 
> 赞同：0
> 
> 时间：2012-07-10T23:55:30.917
> 
> 标签：sql, oracle, plsql

我正在尝试使用此更改表的主要，

```
ACCEPT p_oldserial PROMPT 'Enter Old Serial: ';
ACCEPT p_newserial PROMPT 'Enter New Serial: ';
INSERT INTO car
(SELECT serial, cname, make, model, year, color, trim, enginetype, purchinv, purchdate, purchfrom, purchcost, freight, totalcost, listprice
   FROM customer
  WHERE serial='&p_oldserial');
UPDATE saleinv
   SET serial='&p_newserial'
 WHERE serial='&p_oldserial';
UPDATE serivceinv, saleinv;
DELETE FROM customer
 WHERE serial='&p_oldserial';
COMMIT; 
```

但我得到了 ORA-02291。我的脚本有错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:38:27.873

你的问题是“我的脚本有什么错误吗？”。

答案是“是的，非常肯定”，但也许不是你想的那样。这不是语法错误，很容易修复。这是一个很难处理的逻辑和理解问题。

主键具有三个基本属性：

1.  它是独一无二的。
2.  它不为空。
3.  它是不变的。

你试图违反规则#3。现在，在所有其他条件相同的情况下，Oracle（以及我曾经使用过的所有其他关系数据库）将允许您随意违反规则 #3。但是，在这种情况下，有另一个表具有 FOREIGN KEY 约束，它引用您尝试更改的主键。在 UPDATE 语句执行后，Oracle 检查所有可能受到影响的外键约束，并发现其中一个已被违反，因为 'child' 表上的键值不再存在于 'parent' 表中（SALEINV在这种情况下的表）。

在这一点上，一个常见的反应是说，“愚蠢的数据库！关系数据库明显坏了！ *我*聪明多了！！外键约束不好，必须消除！！！”。所以开发者愤怒地从悬崖上走下来，疯狂地删除外键，想知道为什么会有这么多风，无论如何。我的意思是，这是怎么回事……< **SPLAT！**>?

事实上，外键约束只是让你免于做一些非常非常糟糕的事情 - 非常糟糕，事实上，它看起来像是在做一些非常非常好的事情，但不，老实说，从我这里拿走它，更改主键是真的很糟糕。（不要问我是怎么知道的...... :-)。那个主键是让你知道有问题的行总是和永远相同的东西，如果你改变它，你就是在说“这个以前是 ABC 现在是 XYZ 的东西，而且它所指的任何地方现在都必须指的是 XYZ”。把它想象成你数据库中的“身体抢夺者入侵”——一旦你开始这样做，你就不再相信任何东西都会保持原样，你不能安全地将任何行与任何其他行关联起来，因为键可能会改变，你可以'

最终分析 - 找出其他方法来做你想做的事。除此之外，您是否真的建议您更改车辆的 VIN？这是另一件坏事，我怀疑有很多执法机构会很乐意解释原因...... :-)

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:24:48.120

第一个问题是哪个语句失败了。一次执行一个语句。我希望它是 DELETE 语句。

```
DELETE FROM customer
WHERE serial='&p_oldserial'; 
```

如果是这样，您还没有移动使用外键引用该行的所有记录。第二次更新应该读吗？

```
UPDATE serviceinv
SET    serial='&p_newserial'
WHERE  serial='&p_oldserial'; 
```

还有其他需要类似更新的表吗？

正如其他人所指出的，主键通常被认为是不可变的。因此，这应该是一次性的改变。如果这可能是一个频繁的更改，那么您可能需要一个代理键。这会将更新减少到：

```
UPDATE car
SET    serial='&p_newserial'
WHERE  serial='&p_oldserial'; 
```

如果这可能是频繁更改并且您无法添加代理键，请查看 CASCADE 选项。

# python - 通过不匹配标准聚合熊猫数据框的更好方法

> ID：11423690
> 
> 赞同：1
> 
> 时间：2012-07-10T23:55:38.617
> 
> 标签：python, aggregation, pandas

我有一个`dataframe`物种调查计数，需要按多个标准汇总行。主要问题是我需要匹配不同年份的季节性样本。例如，2005 年春季的样本将与 2006 年秋季的样本相匹配，其中现场样本方法和重复相匹配。下面是一个简单的数据示例：

```
# create the factors and dataframe
a = repeat('AAA',4)
b = repeat('BBB',2)
y1 = np.array([2005, 2006])
y2 = np.array([2005, 2007])
r = np.array([1, 1, 2, 2, 1 , 1])
d = {'site' : hstack((a,b,a,b,a,b,a,b)),
     'year' : hstack((y1, y1, y1, y2, y2, y2, y1, y1, y1, y2, y2, y2)),
     'season' : hstack((repeat('AUTUMN', 6), repeat('SPRING', 6), repeat('AUTUMN', 6), repeat('SPRING', 6))),
     'method' : hstack((repeat('EDGE', 12), repeat('RIFFLE', 12))),
     'replicate' : hstack((r, r, r, r))}
df = DataFrame(d)

# now add some species
df['sp1'] = 1
df['sp2'] = 2
df['sp3'] = 3 
```

数据框中的每一行都是一个样本。目前，我正在创建一个新的合并“id”列，遍历每个“SPRING”样本以搜索匹配的秋季样本，并在对“id”进行分组之前更新这两个样本的“id”。例如：

```
df['id'] = 'na' # new column for combined season id
grouped = df.groupby('season') # split table by season 

for name, group in grouped:
    if name == 'AUTUMN':
        aut = group #autumn lookup list
    if name == 'SPRING':
        # for each spring sample
        for row_index, row in group.iterrows():
            # check for matching autumn sample
            n = aut[
                (aut['site'] == row['site']) &
                (aut['year'] == row['year'] + 1) &
                (aut['method'] == row['method']) &
                (aut['replicate'] == row['replicate'])].index
            if n:
                # create new combined season id
                new_id = row['site'] + \
                         str(row['year'])[-2:] + \
                         str(row['year'] + 1)[-2:] + \
                         row['method'][:1] + \
                         str(row['replicate'])
                # update id spring sample with matching autumn 
                df.id.ix[row_index] = new_id
                # get matching autumn table index
                df.id.ix[n] = new_id
df = df[df['id'] != 'na']
combined = df.groupby(['method', 'id', 'site']).sum()
combined = combined.drop(['year', 'replicate'], axis=1) 
```

这种方法效果很好，但我认为它有点笨拙，而且根本不是通用的。有没有一种矢量化的方式来以这种方式聚合数据？很抱歉帖子的长度，如果有任何不清楚的地方，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:04:44.787

编辑：更正的代码

这个怎么样：

```
adjyear = np.where(df.season == 'SPRING', df.year + 1, df.year)
adjyear.name = 'year'

grouped = df.groupby(['method', 'replicate', 'site', adjyear])
grouped = grouped['sp1', 'sp2', 'sp3']    

grouped.sum()[grouped.size() > 1] 
```

这给了我：

```
In [20]: grouped.sum()[grouped.size() > 1]
Out[20]: 
                            sp1  sp2  sp3
method replicate site year               
EDGE   1         AAA  2006    2    4    6
                 BBB  2006    2    4    6
       2         AAA  2006    2    4    6
RIFFLE 1         AAA  2006    2    4    6
                 BBB  2006    2    4    6
       2         AAA  2006    2    4    6 
```

# symfony1 - 如何为 sfWidgetFormPropelChoice 生成的每个选项标签动态添加属性？

> ID：11423692
> 
> 赞同：1
> 
> 时间：2012-07-10T23:55:53.170
> 
> 标签：symfony1, symfony-1.4, propel

在我的 symfony 1.4 应用程序中，我生成了一个下拉选择作为表单的一部分。

我稍后想对该选择应用一些 jQuery (ddSlick) 以重新设置它的样式。为此，我需要为每个选项标签添加一个属性。

例如，我希望我的选择生成：

```
<select id="demo-htmlselect">
        <option value="0" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png"
            data-description="Description with Facebook">Facebook</option>
        <option value="1" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/twitter-icon-32.png"
            data-description="Description with Twitter">Twitter</option>
        <option value="2" selected="selected" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/linkedin-icon-32.png"
            data-description="Description with LinkedIn">LinkedIn</option>
        <option value="3" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/foursquare-icon-32.png"
            data-description="Description with Foursquare">Foursquare</option> 
```

关于如何实现这一目标的任何建议？也许使用备用或扩展小部件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:22:50.197

如果要自定义选择渲染，则应扩展默认小部件并制作自己的渲染。

因此，例如创建此文件：`/lib/widget/myWidgetFormSelect.class.php`使用：

```
class myWidgetFormSelect extends sfWidgetFormSelect
{
  protected function getOptionsForSelect($value, $choices)
  {
    $mainAttributes = $this->attributes;
    $this->attributes = array();

    if (!is_array($value))
    {
      $value = array($value);
    }

    $value_set = array();
    foreach ($value as $v)
    {
      $value_set[strval($v)] = true;
    }

    $options = array();
    foreach ($choices as $key => $option)
    {
      $attributes = array(
        'value'            => self::escapeOnce($key),
        'data-imagesrc'    => self::escapeOnce($option['imagesrc']),
        'data-description' => self::escapeOnce($option['description'])
      );
      if (isset($value_set[strval($key)]))
      {
        $attributes['selected'] = 'selected';
      }

      $options[] = $this->renderContentTag('option', self::escapeOnce($option['title']), $attributes);
    }

    $this->attributes = $mainAttributes;

    return $options;
  }
} 
```

然后，你应该欺骗你给`$choices`小部件的方式。在这里，小部件等待这样的数组：

```
$choices = array(
  0 => array(
    'title'       => 'Facebook',
    'imagesrc'    => 'http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png',
    'description' => 'Description with Facebook',
  ),
  1 => array(
    'title'       => 'Twitter',
    'imagesrc'    => 'http://dl.dropbox.com/u/40036711/Images/twitter-icon-32.png',
    'description' => 'Description with Twitter',
  ),
); 
```

# jquery - different classes to list (i 3)

> ID：11423696
> 
> 赞同：-2
> 
> 时间：2012-07-10T23:56:36.993
> 
> 标签：jquery

im having a huge div with a grid inside, 30 items in 3 columns. but i have to add some classes to show them in the right way. like adding prefix_1 for the first one, prefix_2 for the second and 3th. also a alpha and a omega class. like you can see below.

im doing it with jquery at the moment, but thats very slow.

can someone help me to improve the jquery code? or tell me how to do it in css, and that it will still work in ie7/ie8

```
for(var i=0;i<30;i+3)
{
    $('.docs').eq(i).addClass('prefix_1');
}

for(var i=1;i<30;i+3)
{
    $('.docs').eq(i).addClass('prefix_2').addClass('alpha');
}

for(var i=2;i<30;i+3)
{
    $('.docs').eq(i).addClass('prefix_2').addClass('omega');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:10:29.403

I would strongly recommend using the .each function of a selection.

[http://api.jquery.com/each/](http://api.jquery.com/each/)

```
$('.docs').each( function (index){
   if(index%3 == 0){
      $(this).addClass('prefix_1');
   }
   if(index%3 == 1){
      $(this).addClass('prefix_2');
      $(this).addClass('alpha');
   }
   if(index%3 == 2){
      $(this).addClass('prefix_2');
      $(this).addClass('omega');
   }
}); 
```

This will iterate over all the elements once. Though, if you are having slowdown issues adding classes to 90 elements, it may not be a problem with jquery or javascript.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:23:39.723

**Programmatic-ally adding classes to 90 div elements, thus making 90 changes to the DOM, is going to be a very intensive!**

I would echo what @Jeremy has said (+1) and say that [$.each()](http://api.jquery.com/jQuery.each/) is almost certainly the way to go, along with a conditional branch inside. However, that's only if you're going to continue with using jQuery despite the performance issues. (*Note, that's a pretty major way of saying don't do it.*)

I'd ask a few questions to yourself..

*   Where is my data coming from?

If you're dead set on using jQuery then I'm guessing it's not hardcoded data, so where is it coming from? A PHP script? A JSON object? (If it is hardcoded data, then why the hell are you looking at jQuery?)

Either way, look at sorting this kind of stuff out BEFORE loading it into the DOM. Mustache.js and other templating systems are perfect for generating large amounts of mark-up whilst giving you some ability to implement things like this. ([Great discussion on this topic at LinkedIn](http://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more))

If you absolutely must load it this way, and I really can't see why to be quite honest, then why not have the column elements as a member of the class? Then the child elements will automatically inherit the properties of the parent element.

It's hard to discuss other ways that you could achieve it without knowing exactly what your data is and where it's coming from - but the main point I'm trying to get across is this; **think. Don't rush into a poor implementation just because it's the easy option. That sucks to maintain and it sucks to use.**

*   How much data actually needs to be loaded?

Do you need all 90 elements at once? Really?

I could go on and ask a few more questions, but I see you've just accepted an answer. I feel sorry for your users if you're that set on iterating through 90 elements when there are far more effective ways to achieve the end result. I think *a lot* of people need to learn that just *because it's possible, it's not advisable*. Sadly, this seems to be a trend with the jQuery tag.

To your credit however, you did specify CSS solutions too. But you selected the first answer you got which just happened to be jQuery based. In the future perhaps try and wait a while? Anyone visiting this topic now, in a week, or even a year - could see the answer and perhaps conclude that it's the best method.

# git - 删除变更集

> ID：11423697
> 
> 赞同：1
> 
> 时间：2012-07-10T23:56:45.337
> 
> 标签：git, gerrit

是否可以通过 web ui 或 ssh 命令删除废弃的变更集？我有相当多的废弃更改，我确实需要这些更改，它们只会使搜索结果变得混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:19:37.480

抱歉，目前这是不可能的。您可以使用 'status:open' 或 'status:merged' 从搜索结果中过滤这些内容，但目前无法在 Gerrit 中永久删除变更集。

# c++ - 对“imp____glewEnableVertexAttribArray”的未定义引用

> ID：11423700
> 
> 赞同：0
> 
> 时间：2012-07-10T23:57:25.173
> 
> 标签：c++, opengl, linker, undefined-reference

我正在尝试从用 C++ 编写并打开 gl 2.1 的教程编译我正在做的程序。但是，我不喜欢 FreeGLUT，所以我决定将窗口程序更改为 SFML。但是，我的问题是，当我尝试构建程序时，出现以下错误：

```
obj\Debug\main.o||In function `Z6renderv':|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|36|undefined reference to `_imp____glewUseProgram'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|37|undefined reference to `_imp____glewEnableVertexAttribArray'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|52|undefined reference to `_imp____glewVertexAttribPointer'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|56|undefined reference to `_imp____glewDisableVertexAttribArray'|
obj\Debug\main.o||In function `Z11initShadersv':|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|62|undefined reference to `_imp____glewCreateProgram'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|67|undefined reference to `_imp____glewLinkProgram'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|68|undefined reference to `_imp____glewGetProgramiv'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|76|undefined reference to `_imp____glewGetAttribLocation'|
obj\Debug\main.o||In function `Z16initVertexShaderv':|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|86|undefined reference to `_imp____glewCreateShader'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|95|undefined reference to `_imp____glewShaderSource'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|96|undefined reference to `_imp____glewCompileShader'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|97|undefined reference to `_imp____glewGetShaderiv'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|103|undefined reference to `_imp____glewAttachShader'|
obj\Debug\main.o||In function `Z18initFragmentShaderv':|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|109|undefined reference to `_imp____glewCreateShader'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|119|undefined reference to `_imp____glewShaderSource'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|120|undefined reference to `_imp____glewCompileShader'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|121|undefined reference to `_imp____glewGetShaderiv'|
C:\Users\Jordanh\Documents\Code Blocks\GL_2-Lesson-1\main.cpp|128|undefined reference to `_imp____glewAttachShader'|
||=== Build finished: 18 errors, 0 warnings ===| 
```

我在程序中包含了以下库：

```
#include <GL/glew.h>
#include <SFML/System.hpp>
#include <SFML/Window.hpp>
#include <iostream>
#include <stdio.h>
#include <stdlib.h> 
```

我还链接了这些：

```
-lsfml-system
-lsfml-window
-lopengl32
-lglu32
-lglew32 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-27T10:41:59.590

各种未定义的引用（名称修改）`*_imp__*`是由试图链接到由 / for Visual Studio / MSVC 编译的库引起的。

解决方案是为您的特定平台下载二进制文件或编译（通常与 mingw32 相关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:42:07.270

[http://julianibarz.wordpress.com/2010/05/12/glew-1-5-4-mingw32/](http://julianibarz.wordpress.com/2010/05/12/glew-1-5-4-mingw32/)

得到了 mingw32 的 GLEW - 项目编译得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:13:17.890

`#pragma comment(lib, "glew32.lib")`包含库后 使用。[glew32.lib](http://glew.sourceforge.net)

# assembly - 组装 | 将 32 位负数转换为其无符号表示（也是 32 位）

> ID：11423702
> 
> 赞同：-4
> 
> 时间：2012-07-10T23:57:47.377
> 
> 标签：assembly

我有一个 int（16 位）数组：{10,-2​​0,30,-4​​0} 我想要：

1.  对数组求和并将结果显示为未分类的 32 位数
2.  对数组求和并将结果显示为 32 位数字（有符号）

意思是：

```
32 bit  un-signed  : 131052
32 bit negative Number positive : -20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:26:56.883

完全不清楚你在追求什么。三个明显的可能性看起来像这样：

```
#include <iostream>
#include <numeric>

int main() { 

    short array[] = {10, -20, 30, -40};

    std::cout << std::accumulate(array, array+4, (unsigned short)0) << "\n";
    std::cout << std::accumulate(array, array+4, 0U) << "\n";
    std::cout << std::accumulate(array, array+4, (short)0) << "\n";
    return 0;
} 
```

不过，我完全不确定您认为如何获得 131052 的结果——这不是您从 16 位或 32 位总和中获得的结果。

# ruby-on-rails - 如何根据对象与其他对象属性的关系设置对象的属性？

> ID：11423704
> 
> 赞同：2
> 
> 时间：2012-07-10T23:58:19.670
> 
> 标签：ruby-on-rails, ruby, activerecord, attributes

我有一个简单的高尔夫应用程序，对于我拥有的每个球员`:total_score`和`:current_place`属性。我希望 Rails 根据`:current_place`每个玩家的属性`:total_score`是高于还是低于其他玩家来定义每个玩家的属性。

换句话说，如果有两个玩家，一个有 a`:total_score => 5`另一个有`:total_score => 4`我希望 Rails 制作第一个玩家的`:current_place => 1`，另一个玩家的`:current_place => 2`，依此类推。我基本上希望它`:current_place`根据列的降序定义值`:total_score`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:43:42.283

您可以通过观察者来实现，当保存播放器时启动和 sql 查询，然后更新属性（使用 update_attribute 所以它不会触发回调）。但这将不是一个非常高效的解决方案，并且也可能存在竞争条件问题。

另一种解决方案是在某个地方实现相同的查询，并使模型的 current_place 函数访问结果。这也很容易缓存

代码：

```
class Player < ActiveRecord::Base
  def current_place
    self.class.current_place(self.id) if self.id
  end

  def self.all_places
    rank = {}
    pos = 0
    self.order_by('total_score desc').each{|p| rank[p.id] = (pos += 1)}
    rank
  end

  def self.current_place(id)
    all_places[id]
  end
end 
```

我没有测试它，但我想这样的东西应该可以工作。要获得缓存部分，您只需将 all_places 包装在 Rails.cache.fetch 块中，并在每次更新玩家总分时将其过期

# canvas - 将画布和文本框放在同一行

> ID：11423710
> 
> 赞同：1
> 
> 时间：2012-07-10T23:59:07.357
> 
> 标签：canvas, html

我想把一个 40x40 的画布、一个文本框和另一个 40x160 的画布按顺序放在同一行，但它似乎确实有效，这就是我想出的：

```
<span><canvas id="color" width="40" height="40"></canvas></span>
<span><input type="text" id="rbg_value" /></span>
<span><canvas id="color_picker" width="160" height="40"></canvas></span> 
```

但是当我这样做时，第一个画布在它自己的一行上，文本框和另一个画布在一行上。关于它可能是什么的任何想法？

# icons - 使用 ImageMagick 创建 Windows ICO 文件的方法？

> ID：11423711
> 
> 赞同：28
> 
> 时间：2012-07-10T23:59:08.573
> 
> 标签：icons, imagemagick

我想`.ico`使用 ImageMagick 为我的 Windows 应用程序动态（从 SVG 文件）创建图标。我怎么做？

Microsoft[列出了图标的各种颜色深度和大小要求](http://msdn.microsoft.com/en-us/library/ms997636.aspx#winxpicons_step5)。ImageMagick 有[`-depth`](http://www.imagemagick.org/script/command-line-options.php#depth)and[`-colors`](http://www.imagemagick.org/script/command-line-options.php#colors)选项，但我不确定在这种情况下如何正确使用它们。

另外，看起来Vista+ 支持嵌入到相同的[256x256 高分辨率图标](https://msdn.microsoft.com/en-us/library/windows/desktop/dn742485.aspx)`.ico`中，该图标可以（应该？必须？）是压缩的 PNG。如何将 Windows XP 图标和这个新的 Vista 图标“加入”到一个`.ico`文件中？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-27T05:40:12.640

ImageMagick 在他们的文档中有一个方法，请参阅[FavIcon 网页链接缩略图](http://www.imagemagick.org/Usage/thumbnails/#favicon)

本质上，您运行以下命令：

```
convert image.png  -bordercolor white -border 0 \
          \( -clone 0 -resize 16x16 \) \
          \( -clone 0 -resize 32x32 \) \
          \( -clone 0 -resize 48x48 \) \
          \( -clone 0 -resize 64x64 \) \
          -delete 0 -alpha off -colors 256 favicon.ico 
```

您可以根据需要对其进行修改以包含更大的分辨率，并更改边框、透明度设置等内容。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-23T01:20:50.937

```
magick convert in.jpg -define icon:auto-resize=16,48,256 -compress zip out.ico 
```

[http://imagemagick.org/script/command-line-options.php#define](http://imagemagick.org/script/command-line-options.php#define)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-26T21:38:22.290

似乎 ImageMagick 单独无法做到这一点，因为它不能以理智的方式处理 SVG 调整大小（而是仅在光栅化后才调整 SVG 大小，这会产生可怕的结果）

通过使用 inkscape 进行转换，它似乎是可能的，例如，以下一行应该为您提供一个具有所有图标大小的可用图标：

```
mkdir temp; declare -a res=(16 24 32 48 64 128 256); for f in *.svg; do for r in "${res[@]}"; do inkscape -z -e temp/${f}${r}.png -w $r -h $r $f; done; resm=( "${res[@]/#/temp/$f}" ); resm=( "${resm[@]/%/.png}" ); convert "${resm[@]}" ${f%%.*}.ico; done; rm -rf temp; 
```

但是，上面不会在文件中为您提供 8 位和 4 位图标（我认为这些仅适用于不再受支持的旧 Windows 版本）如果您需要它们，应该可以做更多的工作来完成这些.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-15T21:20:51.220

我清理了 Malcolm 的解决方案，修复了一个错误，还让脚本输出了 tiff，这样你就可以在 osx 中运行 tiff2icns。

```
#! /bin/bash
# converts the passed-in svgs to tiff and ico

if [[ $# -eq 0 ]]; then
    echo "Usage: $0 svg1 [svg2 [...]]"
    exit 0
fi

temp=$(mktemp -d)
declare -a res=(16 24 32 48 64 128 256 512)
for f in $*; do
    mkdir -p $temp/$(dirname $f)
    for r in "${res[@]}"; do
        inkscape -z -e $temp/${f}${r}.png -w $r -h $r $f
    done
    resm=( "${res[@]/#/$temp/$f}" )
    resm=( "${resm[@]/%/.png}" )
    for filetype in ico tiff; do
        convert "${resm[@]}" ${f%%.*}.$filetype
    done
done
rm -rf $temp 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-20T18:01:14.367

[这是常见问题解答](http://www.imagemagick.org/Usage/thumbnails/#favicon)中的标准配方，已修改为具有[msdn 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511280.aspx#size)中提到的所有分辨率（“其他尺寸...”下的那些分辨率除外）（其他答案没有所需的所有分辨率）

```
 convert input.png -bordercolor white -border 0 ( -clone 0 -resize 16x16 ) ( -clone 0 -resize 24x24 ) ( -clone 0 -resize 32x32 ) ( -clone 0 -resize 40x40 ) ( -clone 0 -resize 48x48 ) ( -clone 0 -resize 64x64 ) ( -clone 0 -resize 256x256 ) -delete 0 -alpha off -colors 256 output.ico 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-10-03T22:42:06.190

基于所有先前的答案并更正以下错误：

*   不要使用`-color=256`，因为您需要所有尺寸的 32 位彩色版本和现代 Windows 版本 (Vista+)
*   Windows 中的**必要**大小为**16、24、32、48、64、128、256**。大多数脚本都忘记了这些。我不确定是否真的需要 96，但这并没有什么坏处。
***   您需要为尺寸 16、24、32 和 48 包括 4 位和 8 位调色板版本（显然是为了特别支持远程桌面应用程序）**

 **多合一 bash 脚本（从 开始`logo.svg`并生成`logo.ico`）：

```
#!/bin/bash

for size in 16 24 32 48 64 96 128 256; do
    inkscape -z -e $size.png -w $size -h $size logo.svg >/dev/null 2>/dev/null
done

for size in 16 24 32 48; do

  convert -colors 256 +dither $size.png png8:$size-8.png
  convert -colors 16  +dither $size-8.png $size-4.png

done

convert 16.png 24.png 32.png 48.png 16-8.png 24-8.png 32-8.png 48-8.png 16-4.png 24-4.png 32-4.png 48-4.png 64.png 96.png 128.png 256.png logo.ico

rm 16.png 24.png 32.png 48.png 16-8.png 24-8.png 32-8.png 48-8.png 16-4.png 24-4.png 32-4.png 48-4.png 64.png 96.png 128.png 256.png 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-03T15:14:38.043

Bash one-liner 转换`logo.svg`成`logo.ico`，使用 Inkscape 导出各种尺寸的 png 图像：

```
eval convert \
  '<(inkscape -e /dev/stderr logo.svg -w '{16,24,32,48,64,128,256}' 2>&1 > /dev/null)' \
  logo.ico 
```

受[Malcolm MacLeod 的回答](https://stackoverflow.com/a/15099824/1366011)启发，但避免了显式循环和临时文件。

和`stderr`重定向是为了避免 Inkscape 的成功消息`stdout`（“Bitmap 另存为：/dev/stdout”）最终出现在图像数据中。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-10-07T20:10:30.463

我一直在努力解决同样的问题。我有一个带有图标图像的 SVG，我需要从中创建一个`icon.ico`文件。让我描述一下我找到的解决方案：

## 第 1 步：确定要在`icon.ico`文件中包含哪些分辨率。

对此没有明确的指导方针。甚至微软也以不一致的图标分辨率发布其软件。有一个关于那个的[问题](https://stackoverflow.com/questions/3236115/which-icon-sizes-should-my-windows-applications-icon-include)。因此，我认为我们能做的最好的事情是使用[Nirsoft 的 IconsExtract](https://www.nirsoft.net/utils/iconsext.html)或类似工具来检查最流行和现代 Windows 程序的图标中包含哪些分辨率。

## 第 2 步：为要包含在文件中的每个分辨率创建 .png`icon.ico`文件。

很多答案建议使用[inkscape](https://inkscape.org/)，但您可以通过以下方式使用[ImageMagick](https://imagemagick.org/index.php)完成所有操作（以防万一，我检查了结果图像是否与您使用 inkscape 相同）：

```
magick.exe convert -size 16x16 -background transparent -depth 8 MyIconImage.svg 16.png
...
magick.exe convert -size 256x256 -background transparent -depth 8 MyIconImage.svg 256.png 
```

但是，如果您仍然想使用inkscape，那就是命令：

```
inkscape.exe MyIconImage.svg -w 16 -h 16 -o 16.png 
```

还有一些答案建议使用 ImageMagick 的`icon:auto-resize`命令行参数来避免为每个分辨率创建单独的 PNG 文件。我不建议使用它，因为要获得最佳质量，最好避免调整大小，因为它比单独将 SVG 文件渲染到每个分辨率更不准确。

## 第 3 步：组装您的 icon.ico 文件。

```
magick.exe convert 16.png 20.png 24.png 32.png 40.png 48.png 64.png 256.png -compress jpeg icon.ico 
```

`-compress jpeg`用于解决[ImageMagick](https://github.com/ImageMagick/ImageMagick/issues/1577)中的以下问题，如以下[评论](https://github.com/ImageMagick/ImageMagick/issues/1577#issuecomment-839915074)中所述。您可以使用以下命令
查看有关创建文件的详细信息：`icon.ico`

```
magick.exe identify icon.ico 
```

## Powershell 脚本“CreateIcoFromSvg.ps1”

让我提供一个自动执行上述步骤的 powershell 脚本：

```
# You can download ImageMagick from: https://imagemagick.org/script/download.php
$imageMagick = "$PSScriptRoot/ImageMagick-7.1.0-portable-Q16-x64/magick.exe"

$svgIcon = "MySvgIcon.svg"
$iconResolutions = 16,20,24,32,40,48,64,256

# Create 16.png, ..., 256.png image files
$pngImages = @()
Foreach($r in $iconResolutions) {
    & $imageMagick convert -size "${r}x${r}" -background transparent -depth 8 $svgIcon "${r}.png"
    $pngImages += "${r}.png"
}

# Combine all PNG image files into an icon.ico file
& $imageMagick convert $pngImages -compress jpeg "icon.ico"

# Remove PNG files
Foreach($image in $pngImages) {
    Remove-Item $image
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-01T08:55:32.847

修改 hnasarat 对 windows 用户的回答。[最简单的方法是使用Chocolatey](https://chocolatey.org/)安装 InkScape 和 ImageMagick ，然后在批处理文件中运行以下命令。（它不像您在一个 svg 中传递的其他答案那样灵活，但它会抽出[Favicon Cheat Sheet](https://github.com/audreyr/favicon-cheat-sheet)中推荐的所有 favicon 。

```
@ECHO off

IF "%1"=="" (
    ECHO You must provide an svg file
    EXIT /b
) 

IF NOT EXIST favicons MD favicons

SET "sizes=16 24 32 48 57 64 72 96 120 128 144 152 195 228 256 512"

FOR %%s IN (%sizes%) DO (
    inkscape -z -e favicons/favicon-%%s.png -w %%s -h %%s %1
)

convert favicons/favicon-16.png favicons/favicon-24.png favicons/favicon-32.png favicons/favicon-48.png favicons/favicon-64.png favicons/favicon.ico 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-08T21:20:16.540

在保持纵横比的同时从 SVG 创建 ICO 文件：

1.  寻找 SVG 比例（例如 1920x1080）
2.  对于最大 256px 宽的图标，按比例：[1920:1080=256:x] -> x=(1080*256)/1920=144
3.  最后，使用 ImageMagick`convert`命令：

    转换 -background none -resize 256x144 -gravity center -extent 256x144 image.svg image.ico**

# powershell - PowerShell函数中的第一个参数失去了它的价值？

> ID：11423714
> 
> 赞同：0
> 
> 时间：2012-07-10T23:59:15.780
> 
> 标签：powershell

这是我调用的一个函数`.\GetEMSInstallers`。由于某些未知的原因，第一个参数总是失去它的价值：

```
function Get-EMSInstallers {

param (
    $ems_for_amx_source = '\\server\ems_path',
    $installers_dir = 'D:\installers'
)

process {

    if (!(Test-Path "$installers_dir\EMS4AMX")) {
        "Copying files and folders from $ems_for_amx_source to $installers_dir\EMS4AMX"
        copy $ems_for_amx_source "$installers_dir\EMS4AMX" -rec -force
    }
}

}
Get-EMSInstallers $args 
```

当我调用它时，我得到这个输出：

```
Copying files and folders from  to D:\installers\EMS4AMX
Copy-Item : Cannot bind argument to parameter 'Path' because it is an empty array.
At C:\Users\ad_ctjares\Desktop\Scripts\Ems\GetEMSInstallers.ps1:12 char:17
+             copy <<<<  $ems_for_amx_source "$installers_dir\EMS4AMX" -rec -force
    + CategoryInfo          : InvalidData: (:) [Copy-Item], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationErrorEmptyArrayNotAllowed,Microsoft.PowerShell.Commands.CopyI
   temCommand 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:20:17.987

When you don't pass in any argument to Get-EMSInstallers you still have a $args array - it is just empty. So the $ems_for_amx_source parameters is set to this empty array.

In other words, one way around this:

```
if ($args)
{
  Get-EMSInstallers $args
}
else
{
  Get-EMSInstallers
} 
```

There is probably a more powershelly way to do this - I might revise this later if it comes to mind. :-) But that will get you started anyway.

# xcode - 代码签名错误证书身份'iPhone Developer：xxx（5Wxxx）'在钥匙串中出现多次......但没有重复

> ID：11423716
> 
> 赞同：0
> 
> 时间：2012-07-10T23:59:23.727
> 
> 标签：xcode, provisioning, keychain, certificate, profiles

我有两套身份，一套给我，一套给我所在的团队（给一个客户）。因此，2“iPhone Developer: (5W...) 和 iPhone Developer (7E...) 密钥和证书。

在我完成的所有独立测试中，我只看到过一次重复的证书（2 小时的故障排除）。我已经看到，当我在“代码签名”的构建设置中下拉时，3 个配置文件是“没有配置文件的身份”。想知道问题是否是这些挥之不去的钥匙之一。

自从我升级到 4.3.3 并且我尝试在我的设备上运行后，我收到了错误。奇怪的是，使用分发配置文件创建 IPA（为客户提供团队配置）是可以的。此外，我的其他 iPhone 开发人员密钥和证书没有问题（到目前为止）。

阅读其他 SO 帖子，并进行了修复，但仍未修复。我已经搞定了：

*   在 Key Chain 访问中，从会员中心再次删除并重新安装证书
*   清理所有配置文件的 Xcode-Organizer，退出 Keychain 和 Xcode，只拖入有问题的 2 (distrib/dev)。
*   将证书移动到新的钥匙串，在代码签名中添加标志
*   删除派生数据，退出钥匙串和 Xcode，启动，测试
*   在会员中心和管理器中更新所有过期的个人资料和证书

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:32:06.343

原来我的钥匙串中确实有一个重复的密钥（不是证书）。感谢这篇文章： [https ://stackoverflow.com/a/9376587/830304](https://stackoverflow.com/a/9376587/830304)

我在其他文件夹中查找密钥，并备份并删除了私人的。这很难，因为它们基本上都被命名为相同的东西。但是一个重要的提示是该密钥没有文件夹扩展图标，因此它与实时/有效证书无关。

# htmlpurifier - 允许 src 中的自定义 url 用于 htmlpurifier 中的图像

> ID：11423717
> 
> 赞同：0
> 
> 时间：2012-07-10T23:59:27.600
> 
> 标签：htmlpurifier

我遇到了 HTMLPurifier 设置问题。

在我的情况下，我试图净化的 HTML 包含 img 标签。为此，我添加了：

$config->set('HTML.Allowed', 'p[align|style],strong,a[href|title|mailto],em,table[class|width|cellpadding],td,tr,h3,h4, h5,hr,br,u,ul,ol,li,img[src|width|height|alt|class],span[class],strike,sup,sub');

到我的配置。

但问题是我的图像的 src 值分别以 %%abc%% %%xyz%% 开头和结尾。我稍后在我的代码中使用这些字符串来识别图像 url 并做一些事情。

但是 HTMLPurifier 不允许这些类型的 url。

我尝试添加自定义 URI 架构，但无法使其正常工作。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:31:12.970

嗯......是的，你可能有点不走运，除非你正则表达式出自定义值并在其位置留下一个唯一标识符，然后最后将它们放回原处。百分号特别糟糕，因为它们通常在 URL 中具有不同的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-22T17:49:54.073

您应该能够覆盖属性定义/验证，如下所示：

```
class ParameterURIDef extends \HTMLPurifier_AttrDef_URI
{
    public function validate($uri, $config, $context)
    {
        if(preg_match('/^\{[a-zA-Z0-9]+\}$/', $uri)) {
            return true;
        }

        return parent::validate($uri, $config, $context);
    }
} 
```

```
 $config = HTMLPurifier_Config::createDefault();
 $def =   $config->getHTMLDefinition(true);
 $def->addAttribute('img', 'src', new ParameterURIDef()); 
```

# git - 刷新 repo 中最新的 git 子模块

> ID：11423723
> 
> 赞同：0
> 
> 时间：2012-07-11T00:00:18.407
> 
> 标签：git, github

我有点像 git newb 所以请在这里忍耐一下。我有一个需要刷新子模块的项目。

该项目正在使用子模块的第 1 版，并且有一些更改，所以我想升级它以使用最新版本。

如何刷新子模块并应用更改，以便克隆或从项目中提取的其他用户将使用最新的更新版本 1.5？

这是项目的外观：

ProjectA：配置为 repoA 的远程 repo 它依赖于指向 repoB 的子模块。

项目根目录中的 .git/config 文件如下所示：

```
[remote "origin"]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = git@/github.com/foo/foo.git 
```

项目根目录下还有 .gitmodules 文件：

```
[submodule "Vendor/some-external-library"]
        path = Vendor/some-external-library
        url = https://github.com/some-external-library/some-external-library.git 
```

在“some-external-library”目录中，没有 .gitmodules 文件，只有带有相应文件的标准 .git 目录。.git/config 指向 repoB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:15:31.793

子模块实际上是在你的主仓库中签出的 git 仓库，你的主仓库知道关于它们的东西，比如他们已经签出了哪个提交。

因此，您可能想要做的是转到 sumbodule 的文件夹并转到`git pull origin master`（或您想要拉取而不是 master 的提交），然后在您的 main 上执行一个设置反映此更改（子模块上的更改）的提交回购

简而言之：

```
cd submodule_dir
git pull origin master
cd main_dir
git add submodule_dir
git commit 
```

您也可以`git submodule foreach git pull`按时更新所有子模块引用，但这可能是关于 repo 可维护性的一个坏主意。

更多信息在`git help submodule`

# java - 为什么我不能在 Android 上实例化这个 Fragment？

> ID：11423725
> 
> 赞同：4
> 
> 时间：2012-07-11T00:00:26.610
> 
> 标签：java, android, eclipse, android-fragments

这是我的代码。我得到一条红线`new MainFragment();`，错误`Type mismatch: cannot convert from WishlistFragment to Fragment`如下：

```
Fragment newfragment = new MainFragment(); 
```

这是我的 MainFragment.java 文件的样子：

```
public class MainFragment extends Fragment {
    public MainFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        return inflater.inflate(R.layout.fragment_main, container, false);
    }
} 
```

关于为什么会发生这种情况的任何想法？我有一种感觉，这是我正在查看的一些愚蠢的东西，而我现在只是在漫长的一天中对代码视而不见。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-11T00:10:37.127

确保两个地方都在导入同一个`Fragment`类。感觉有点像在一个地方导入`android.app.Fragment`（原生 API 级别 11 版本的片段）和在其他地方导入`android.support.v4.app.Fragment`（来自 Android 支持包的片段）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-11T00:12:11.227

找出了问题......我的 MainActivity.java 文件正在使用：

```
import android.support.v4.app.Fragment; 
```

我的 MainFragment.java 文件正在使用：

```
import android.app.Fragment; 
```

所以出现了不匹配。我使用 ICS 4.0 及更高版本作为我的最低 API 版本。将所有内容更改为导入 v4 API 解决了我的问题。

# php - 根据查询字符串替换 HTML？

> ID：11423726
> 
> 赞同：2
> 
> 时间：2012-07-11T00:00:28.770
> 
> 标签：php, javascript, query-string

我一直在查看此[SO Post](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)以了解处理查询字符串。很高兴看到所有的回复。我想了解的是如何更进一步，其中提供的查询字符串实际上替换了 DOM 中的一个对象，例如特定的 DIV，并用另一个 DIV 替换它（可能隐藏在门外)，或者只是替换 DIV 中的内容。

我在网络上查看了一些资源，但没有什么可以在 jsfiddle 中进行测试以正常工作。[此处的另一篇文章对此有所回避](https://stackoverflow.com/questions/6116081/replace-an-img-src-value-based-on-a-referring-urls-query-string)。

**目标**

有一个简单的页面在正文中显示一个 DIV。加载页面时，会显示 DIV 和内容。使用 ?q=whatever 加载页面时，该 DIV 中的内容将替换为其他内容。

**我的解决方案**

为了有一个 DIV dissapea，这是第一个要解决的问题，基于通过的查询字符串，我在我的页面上实现了这个：

```
if (strrpos($_SERVER['REQUEST_URI'], '/landingpage/index.php?q=1') === strlen($_SERVER['REQUEST_URI']) - strlen('/landingpage/index.php?q=1')) {
    $style = "display: none";
}
else {
    $style = "display: inline";
} 
```

**然后我把它放在我的 DIV 中：**

```
<div id="theForm" style="<?php echo $style; ?>">
    //Form code here
</div> 
```

如果查询字符串存在，这让我至少可以清除 DIV。

下一步，不是真正清除它，而是用一些内容替换它。

**我将以下内容添加到我的原始 PHP 中：**

```
$thankYou = "<h1>Thank You for signing up</h1>"; 
```

在第一个 if 下，并将 else 更改为 elseif 以捕获非查询字符串代码，未来可能还会出现更多情况。

**所以最终的 PHP 代码如下所示：**

```
if (strrpos($_SERVER['REQUEST_URI'], '/landingpage/index.php?q=1') === strlen($_SERVER['REQUEST_URI']) - strlen('/landingpage/index.php?q=1')) {
    $style = "display: none";
    $thankYou = "<h1>Thank You for signing up</h1>";
}
elseif (strrpos($_SERVER['REQUEST_URI'], '/landingpage/index.php') === strlen($_SERVER['REQUEST_URI']) - strlen('/landingpage/index.php')) {
    $style = "display: inline";
    $thankYou = "";
} 
```

然后，只需在将显示或隐藏的 DIV 之前从 $thankYou 变量中添加 PHP 回显，这对我来说就是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:04:46.790

这是一个可以帮助您的工作示例

[http://www.fridgefilters.com/refrigerator-ice-and-water-filter-ukf8001.html?cust-title=welcome+stack+overflow](http://www.fridgefilters.com/refrigerator-ice-and-water-filter-ukf8001.html?cust-title=welcome+stack+overflow)

有关详细信息，请参阅 JavaScript

在主页上：

```
<script>writeCustomHeader('cust-title','customHeader')</script> 
```

在附件 mss.js 中：

```
function returnQueryValue(match) {
    var query = location.search.substr(1);
    var pairs = query.split("&");
    for(i=0;i<pairs.length;i++){
        var name = pairs[i].split("=")[0];
        var val = pairs[i].split("=")[1];
        if(name==match){
            val = unescape(val.replace(/\+/g, " "));
            return val;
        }
    }
}

function writeCustomHeader(match,id) {
    var newHeader=returnQueryValue(match);
    if(!newHeader)return;
    var id = document.getElementById(id);
    var h1 = document.getElementsByTagName('h1')[0];
    if(newHeader.length>0 && id && id!='undefined'){
        id.innerHTML=newHeader
        h1.className=h1.className+" small";
        document.getElementById('customHeader').className="block";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:13:45.173

如何在 jQuery 中做到这一点。

下面解释如何替换innerHTML。

[如何使用 jQuery 替换 div 的 innerHTML？](https://stackoverflow.com/questions/1309452/how-to-replace-innerhtml-of-a-div-using-jquery)

这个问题解释了如何从当前 URL 获取参数值。

[获取转义的 URL 参数](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)

最后，您还可以通过 Ajax 尤其是 jQuery.ajax() 方法从数据库中获取数据（例如创建动态页面）。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# python - 从 Web GUI 调用 scrapy

> ID：11423727
> 
> 赞同：3
> 
> 时间：2012-07-11T00:00:38.797
> 
> 标签：python, scrapy, web-crawler

有人有一个如何从 Web GUI 调用 scrapyd 的示例？

我想从 web GUI 调用 Scrapy 来实现 web Crawler 。

我找到了这个例子，但对我不起作用：

```
http://mahmoud.abdel-fattah.net/2012/07/04/super-simple-and-basic-scrapyd-web-interface/

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Simple scrapyd web manager</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">

            var scrapyd_url = 'http://localhost:6800/';

            var project_name = 'bkam';

            var all_spiders = new Array();
            var running_spiders = new Array();
            var finished_spiders = new Array();

            $(document).ready(function() {
                $(".start_spider").live('click', function() {
                    spider_name = $(this).attr('rel');
                    $.post(scrapyd_url + 'schedule.json', {
                        project : project_name,
                        spider : spider_name
                    });

                });

                $(".stop_spider").live('click', function() {
                    job_id = $(this).attr('rel');
                    $.post(scrapyd_url + 'cancel.json', {
                        project : project_name,
                        job : job_id
                    });

                });

                function listjobs() {
                    $.getJSON(scrapyd_url + 'listjobs.json?project=' + project_name, function(data) {
                        var finished_items = [];
                        $.each(data.finished, function(key, val) {
                            finished_spiders.push(val.spider);
                            finished_items.push('<li>' + val.spider + '&nbsp;&nbsp;<a href="' + scrapyd_url + 'logs/' + project_name + '/' + val.spider + '/' + val.id + '.log">log</a></li>');
                        });
                        $('#finished_spiders').append(finished_items.join(''));

                        if (data.running.length > 0) {
                            var running_items = [];
                            $.each(data.running, function(key, val) {
                                running_spiders.push(val.spider);
                                running_items.push('<li>' + val.spider + '&nbsp;&nbsp;<a href="' + scrapyd_url + 'logs/' + project_name + '/' + val.spider + '/' + val.id + '.log">log</a>&nbsp;&nbsp|&nbsp;&nbsp<a href="#" class="stop_spider" rel="' + val.id + '">Stop</a></li>');
                            });
                            $('#running_spiders').append(running_items.join(''));
                        } else {
                            $('#running_spiders').append('<li>No Running spiders</li>');
                        }

                    });
                }

                listjobs();

                // Get spiders list
                $.getJSON(scrapyd_url + 'listspiders.json?project=' + project_name, function(data) {
                    var items = [];
                    //console.log(data);
                    $.each(data.spiders, function(key, val) {
                        items.push('<li id="' + val + '">' + val + '&nbsp;&nbsp;<a href="#" class="start_spider" rel="'+ val + '">Start</a></li>');
                    });

                    $('#available_spiders').append(items.join(''));
                });

            });
        </script>
    </head>
    <body>
        <a href="#" onClick="window.location.reload">refresh</a>
        <br />
        List of running spiders
        <ul id="running_spiders"></ul>
        List of finished spiders (First is latest)
        <ul id="finished_spiders"></ul>
        List of available spiders
        <ul id="available_spiders"></ul>
    </body>
</html> 
```

我想从 web gui 运行蜘蛛点击按钮。请帮我 ... ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:11:13.887

据我所知，此示例尝试联系我认为您没有运行的[scrapyd 。](http://doc.scrapy.org/en/latest/topics/scrapyd.html)

如果您确定它正在运行，请尝试在浏览器中访问`http://localhost:6800/`- 它应该会返回一些内容。

# ant - 将命令行参数传递给在 exec 中使用它们的目标

> ID：11423728
> 
> 赞同：16
> 
> 时间：2012-07-11T00:00:40.570
> 
> 标签：ant

蚂蚁引导 arg1 arg2 arg3

我需要回显“arg1 arg2 arg3”，以便可以使用这些参数调用程序

在网上搜索以下内容应该可以，但不能。

```
 <target name="bootstrap">
     <echo>${arg0} ${arg1} ${arg2} </echo>
     <!--exec executable="cmd">
        <arg value="${arg0}"/>
        <arg value="${arg1}"/>
        <arg value="${arg2}"/>
     </exec-->
 </target> 
```

此外，如果用户传入 5 个参数或 1 个参数会怎样。我需要失败它没有正确数量的参数。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-11T01:57:58.730

不。

您不能以这种方式传递将在构建文件中使用的参数。将`ant bootstrap arg1 arg2 arg3`在您尝试调用以下目标时解决`bootstrap`，`arg1`, `arg2`, `arg3`-- 显然，只有目标`bootstrap`存在。

如果您确实想传递将在构建文件中使用的参数，则需要使用该`-DpropertyName=value`格式。例如：

```
ant bootstrap -Darg1=value1 -Darg2=value2 -Darg3=value3 
```

对于其他方式，您可以在构建文件中编写嵌入脚本（如 beanshell 或 javascript，带有 ant 的脚本支持库）以首先处理参数。例如，您可以通过这种方式传递参数：

```
ant bootstrap -Dargs=value1,value2,value3,... 
```

现在您有一个名为`args`“value1,value2,value3,...”的属性（对于...我的意思是用户可以输入超过 3 个值）。您可以使用 beanshell 拆分`args`to`arg1`和by `arg2`，还可以进行一些检查...`arg3``,`

```
<script language="beanshell" classpathref="classpath-that-includes-the-beanshell-lib">
    String[] args = project.getProperty("args").split(",");
    project.setUserProperty("arg1", args[0].trim());
    project.setUserProperty("arg2", args[1].trim());
    project.setUserProperty("arg3", args[2].trim());
</script> 
```

# javascript - 如何获取由 goog.ui.AutoComplete 生成的行数组？

> ID：11423730
> 
> 赞同：0
> 
> 时间：2012-07-11T00:00:47.853
> 
> 标签：javascript, google-closure-library

我的一个朋友写了一些包含 goog.ui.AutoComplete 实例的 Google Closure 代码：http: [//closure-library.googlecode.com/svn/docs/class_goog_ui_AutoComplete.html](http://closure-library.googlecode.com/svn/docs/class_goog_ui_AutoComplete.html)

每次这个自动完成功能向服务器发出异步请求时，我都必须遍历自动完成生成的所有行并对每一行做一些事情。

现在，我正在按如下方式完成此操作。

```
var rows = friendsAutocomplete.rows_;
for (var i = 0; i < rows.length; i++) {
  doSomething(rows[i]);
} 
```

这可行，但非常糟糕，因为我通过访问私有变量来打破抽象障碍`friendsAutocomplete.rows_`。我也不能添加新的方法或属性，`friendsAutocomplete`因为我的朋友坚决拒绝这样做。

如何在不访问私有变量的情况下遍历自动完成功能生成的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:06:08.527

1.  创建您的控件

    var ac = new goog.ui.AutoComplete.RichRemote("http://blah", inputDomElement);

2.  为结果创建处理程序

    所以如果 blah Url 返回一个像

    ```
    [
     ['apple',
      {name: 'Fuji', url: '..'},
      {name: 'Gala', url: '..'},
      {name: 'Golden Delicious',
       url: '..'}
     ],
     ['berry',
      {name: 'Strawberry', url: '..'},
      {name: 'Blueberry', url: '..'},
      {name: 'Blackberry',url: '..'}
     ]
    ] 
    ```

您需要在代码中包含 javascript 对象，这些对象会针对顶级数组对象中的每个项目进行处理。我想这就是你想要的（注意： 'apple' ， 'berry' 匹配 JSON 结果值）

```
 var apple = function (item) {
    ...
    return makeRichRow_(...)
    }

    var berry = function (item) {
    ...
    return makeRichRow_(...)
    } 
```

makeRichRow_ 基本上是在用户选择项目时附加渲染函数并为项目选择值的地方。您还可以过滤行等

这是一个带有源代码的完整演示。 [http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/demos/autocompleterichremote.html?r=43](http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/demos/autocompleterichremote.html?r=43)

# delphi - 如何使用 Sevenzip.pas 提取多卷 RAR？

> ID：11423733
> 
> 赞同：1
> 
> 时间：2012-07-11T00:01:48.060
> 
> 标签：delphi, callback, 7zip

我正在使用[Progdigy 的 SevenZip](http://www.progdigy.com/?page_id=13)单元来提取 RAR 文件。当 RAR 是单卷时效果很好。当我有一个多卷存档时，它会失败。我猜我应该添加一些代码来支持一个回调函数，它要求另一个卷或其他东西，但我不知道该怎么做。SevenZip.pas 似乎不支持它。我发现了一个名为 ArchiveOpenVolumeCallback 的东西，但不知道如何正确使用它。这里有什么帮助吗？

# javascript - 如何使用 QTP 在不可编辑的编辑框中设置值

> ID：11423740
> 
> 赞同：0
> 
> 时间：2012-07-11T00:02:31.853
> 
> 标签：javascript, vbscript, qtp

在我的 Web 应用程序中，一些屏幕完全处理 Js 框架，我们正在使用 QTP 进行自动化，请帮助我解决以下问题，

如果我单击该编辑框将激活 Visualy 网络列表框，但是如果我们单击下拉图标，它将完全只读+不可编辑，它将在其树类型值中填充一个窗口（例如：类>>分支>>部分）我们需要单击部分和然后按设置按钮，然后在编辑框中填充选定的值。即使我在编辑框中输入值后单击提交按钮后在编辑框属性 Readonly 为假，它在该编辑框中给出错误 Null 值？所有这些都是完全用 Javascript 框架编写的开发人员，所以有没有办法直接输入值不使用 QTP(VBSCRIPT) 或 Javascript 代码选择弹出窗口值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:07:34.113

我不完全理解您的问题，但在我看来，您要问的选项之一是如何从 QTP 运行 JavaScript 代码。`Page.RunScript`您可以使用(或)从 QTP11 开始执行此操作`Frame.RunScript`。

# php - 对所有子域使用一个会话

> ID：11423742
> 
> 赞同：2
> 
> 时间：2012-07-11T00:02:55.973
> 
> 标签：php, session

我想为所有子域使用一个会话

我的`php.ini`

```
session.save_path = "/var/lib/php/session"

[root@bh /]# ls -la /var/lib/php/session
total 48
drwxrwxrwx 2 root   apache 4096 Jul 10 17:51 .
drwxr-xr-x 3 root   root   4096 Apr 28 11:22 ..
-rw------- 1 sub1 sub1 233 Jul 10 10:30 sess_1ct61gdtjmd2u2chom3eu4h8t4
-rw------- 1 sub1 sub1 233 Jul 10 10:33 sess_4etbc6bh4lqabeve35mr01fp35
-rw------- 1 sub1 sub1 233 Jul 10 10:40 sess_9h62k8h50tkfnf391ji0mj57m4 
```

我的测试文件`/home/sub1/public_html/test1.php`

```
<?
session_set_cookie_params(0, '/', 'www.mydomain.com');
session_start();
$_SESSION['test']='test......';
print_r($_SESSION);
?> 
```

我的第二个测试文件`/home/sub2/public_html/test2.php`

```
<?
session_set_cookie_params(0, '/', 'www.mydomain.com');
session_start();
$_SESSION['test_two']='test......';
print_r($_SESSION);
?> 
```

现在我浏览了这两个文件，

我应该得到这个结果

```
array(['test']=>'test......',['test_two']=>'test......') 
```

但是，什么都没有发生！！

如果我在 sub1.domain.com 上，我会得到这个结果`['test']=>'test......'`

如果我在 sub2.domain.com 上，我会得到这个结果 ['test_two']=>'test.....'

没有任何变化，一切正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:09:41.737

您当前的代码尝试为 www.example.com 设置 cookie，而您甚至没有从 www.example.com 访问该站点！这就是为什么它不起作用。

您将希望在整个域名中共享会话 cookie，如下所示：

```
session_set_cookie_params(0, '/', '.example.com'); 
```

# iphone - 旧 iPhone/iPad/iPod 型号中的加速度计在灵敏度/准确度方面是否与当前型号相媲美？

> ID：11423743
> 
> 赞同：1
> 
> 时间：2012-07-11T00:03:09.940
> 
> 标签：iphone, ios, device, accelerometer

旧 iPhone/iPad/iPod 型号中的加速度计在灵敏度/准确度方面是否与当前型号相媲美（使得读数没有明显的差异）？

例如，如果有人在他们的 iPhone 3GS 上读取加速度计读数，我用 iPhone 4S 读取读数，而其他人用 iPad 读取，假设其他条件相同，我们会得到类似的结果吗？人们会看到什么样的偏差？例如，假设您将所有设备放在一张振动到足以显示在加速度计上的桌子上。不同的设备版本会在相同的准确度范围内显示结果吗？有什么限制？我知道较旧的 iPhone 具有较旧版本的加速度计，虽然我找到了他们的数据表，但我无法判断差异是否显着。

当然，我可以做一个实验来确定它们在我的应用程序中是否存在可感知的差异，但我想知道是否有人有这方面的经验。

# jquery - jquery if 语句不能正常工作

> ID：11423744
> 
> 赞同：2
> 
> 时间：2012-07-11T00:03:15.150
> 
> 标签：jquery

我的 jquery 代码有问题，我试图说明如果“是”按钮已打开，则禁用“否”按钮，否则如果“否”按钮已打开，则禁用“是”按钮，否则启用两个按钮。

但是目前当另一个按钮打开时do按钮被禁用，有谁知道这是为什么？

下面是代码：

```
function btnclick(btn)
{
    var context = $(btn).parents('#optionAndAnswer');
    if (context.length == 0) {
        context = $(btn).parents('tr');
    }

$(btn).toggleClass("answerBtnsOff");
$(btn).toggleClass("answerBtnsOn");

    if ($("#answerYes", context).hasClass('.answerBtnsOn')) {
        $("#answerNo", context).attr("disabled", "disabled");
    }

    else if ($("#answerNo", context).hasClass('.answerBtnsOn')) {
        $("#answerYes", context).attr("disabled", "disabled");
    }

    else {
    $("#answerYes", context).removeAttr("disabled");
    $("#answerNo", context).removeAttr("disabled");
    }

    return false;
} 
```

下面是是和否按钮的 html：

是按钮：

```
<input class="answerBtns answers answerBtnsOff" name="answerYesName"   id="answerYes"   type="button"   value="Yes"     onclick="btnclick(this);"/> 
```

无按钮：

```
<input class="answerBtns answers answerBtnsOff" name="answerNoName"    id="answerNo"        type="button"   value="No"      onclick="btnclick(this);"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:10:35.723

你没有把它`.`放在 toggleClass/hasClass/removeClass/... 你只在选择器中使用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:11:38.247

`.attr("disabled", "disabled");`将这两个按钮都更改为此`.attr("disabled", true);`。另外，你会想要像@Musa 说的那样删除句号

# java - 通过 Apache Commons 上传流文件时，数据存储在哪里？

> ID：11423745
> 
> 赞同：5
> 
> 时间：2012-07-11T00:03:15.680
> 
> 标签：java, jsp, servlets, apache-commons

我看到了[**这个**](http://commons.apache.org/fileupload/streaming.html)关于如何通过 Apache Commons 进行流式文件上传的漂亮指南。这让我想到数据存储在哪里？是否有必要“关闭”或“清理”该位置？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T01:37:08.237

> 数据存储在哪里？

我不认为它被存储。Streaming API 不使用 DiskFileItemFactory。但它确实使用了一个缓冲区来复制 BalusC 发布的数据。获得上传流后，您可以使用

```
long bytesCopied = Streams.copy(yourInputStream, yourOutputStream, true); 
```

看看[API](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/util/Streams.html#copy%28java.io.InputStream,%20java.io.OutputStream,%20boolean%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T00:18:45.060

这是[DiskFileItemFactory](http://commons.apache.org/proper/commons-fileupload/apidocs/org/apache/commons/fileupload/disk/DiskFileItemFactory.html)的 javadoc 。

> 默认的 FileItemFactory 实现。此实现创建 FileItem 实例，这些实例将其内容保存在内存中，用于较小的项目，或保存在磁盘上的临时文件中，用于较大的项目。将内容存储在磁盘上的大小阈值是可配置的，将在其中创建临时文件的目录也是如此。
> 
> 如果没有另外配置，默认配置值如下：
> 
> ```
> Size threshold is 10KB.
> Repository is the system default temp directory, as returned by System.getProperty("java.io.tmpdir"). 
> ```
> 
> 为文件项创建的临时文件应稍后删除。最好的方法是使用 FileCleaningTracker，您可以在 DiskFileItemFactory 上设置它。但是，如果您确实使用了这样的跟踪器，那么您必须考虑以下几点： 临时文件在不再需要时会自动删除。（更准确地说，当 File 的相应实例被垃圾回收时。）这是由所谓的 reaper 线程完成的，它在加载 FileCleaner 类时自动启动。例如，如果您的 Web 应用程序结束，终止该线程可能是有意义的。请参阅 commons-fileupload 的用户指南中的“资源清理”部分。

所以，是的`close`并且`cleanup`是必要的，因为它`FileItem`可能表示磁盘上的真实文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T01:02:12.673

它作为 a 存储`byte[]`在 Java 内存中。

# ruby-on-rails - 未定义的方法 `start=' gcal4ruby

> ID：11423747
> 
> 赞同：0
> 
> 时间：2012-07-11T00:03:25.383
> 
> 标签：ruby-on-rails, google-calendar-api

我正在尝试使用 gcal4ruby 将事件添加到谷歌日历。当我运行我的代码时，我得到这个错误：

```
undefined method `start=' for #<GCal4Ruby::Event:0x00000102bb47b8> 
```

这是我的代码：

```
service = GCal4Ruby::Service.new
service.authenticate("username", "password")
cal = GCal4Ruby::Calendar.find(service, "calendarname", :first)
event = GCal4Ruby::Event.new(cal)
event.title = "Soccer Game"
event.start = Time.parse("12-06-2009 at 12:30 PM")
event.end = Time.parse("12-06-2009 at 1:30 PM")
event.where = "Merry Playfields"
event.save 
```

错误发生在“event.start = ...”行

这让我很困惑，因为这段代码实际上是从文档中复制而来的。

编辑：打开插件的实际 .rb 文件后，发现文档完全错误。event.start 和 event.end 方法应该是 event.start_time 和 event.end_time。但现在我收到了这个错误：

```
undefined method `editable' for nil:NilClass 
```

在“event.save”行。有人使用这个插件并有线索吗？或者可以建议一个使用具有更好文档的谷歌日历的库？;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:39:10.997

我实际上遇到了同样的错误。您的编辑和 Dty 的回答都帮助我解决了这个问题。这是我的解决方案。

```
event = Event.new(service, {
    :calendar => cal, 
    :title => "Event on "+s.start_date.strftime('%D'), 
    :start_time => s.start_date, 
    :end_time => s.end_date, 
    :where => "www.example.com"})

event.save 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:18:11.323

尝试将事件分配更改为

```
event = GCal4Ruby::Event.new(service) 
```

如果这不起作用，我会做一个`gem which gcal4ruby`（或任何 gem 的名称）并查看那里的代码。因为根据[源代码](https://github.com/mgornick/gcal4ruby/blob/master/lib/gcal4ruby/event.rb#L136)该`start`方法肯定存在。

# design-patterns - Haskell：设计模式：类或传递函数

> ID：11423749
> 
> 赞同：8
> 
> 时间：2012-07-11T00:03:29.863
> 
> 标签：design-patterns, haskell

假设我有一个函数，它接受一些输入结构并返回一些输出结构（可能与输入结构相关但不同）。

我不想将这些输入/输出结构强制执行为特定类型，我只想确保它们具有我需要的一些行为。

我是不是该？

a) 定义一个具有适当提取方法的类并强制输入数据成为该类的实例？**或**
b) 让函数接受另一个参数，该参数是定义如何提取数据的函数。

我对输出结构也有同样的问题（除了这次所需的功能是突变）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T00:55:31.457

每当您必须在显式函数参数和类型类之间进行选择时，您应该问自己这个最重要的问题：函数是特定于类型还是特定于应用程序？前者`sort`的例子是 ，后者的例子是`map`。

传递函数总是更灵活，但对于您的情况可能会过度杀伤并导致不必要的代码膨胀。另一方面，类型类会产生更小的代码，但它们也不太灵活。

没有更多信息，无法在这里给出更准确的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T00:07:05.040

这取决于。

类型类的优点是您不必将函数显式传递给任何辅助函数。因此，如果您有两个以上的函数，或者如果您希望很多函数可以使用相同的基本转换函数，那么类型类可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:26:08.003

类型类提供类型到函数的**唯一**映射。因此，您应该询问您是否总是需要为一个类型提供相同的功能。*例如*，如果您将向量传递给函数并且您的函数需要向量的范数，那么使用类型类通常不是一个好主意，因为有许多有用的范数。在这种情况下，最好使用函数参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T00:09:48.577

“我只是想确保他们有一些我需要的行为。” – 这几乎描述了类型类的用途，我会同意的。虽然不确定输出结构，但我*认为*函数必须返回特定类型，即使它们是同一类型类的实例，您也不能返回几种类型中的一种。

# ios - 为 IOS 访问/创建核心数据 slqlite 数据库失败 - 找不到实体（创建了空数据库）

> ID：11423753
> 
> 赞同：0
> 
> 时间：2012-07-11T00:03:50.290
> 
> 标签：ios, ios5, core-data

嗨，我是 IOS 的初学者，并创建了我的第一个核心数据应用程序。我已经创建了我的模态并将其包含在项目中。它确实包含实体“客户”。当我使用以下测试代码创建数据库并尝试添加实体时，出现以下错误

..'+entityForName：找不到实体名称“ItemMake”的 NSManagedObjectModel

当调用 [NSEntityDescription insertNewObjectForEntityForName:@"Client" inManagedObjectContext:contxt];

我已经检查了我能想到的所有内容，代码如下所示。这是一些进一步的信息......

a) mdl 和 contxt 不为零。

b) 在模拟器中创建数据库文件 (16kb)

c) 从另一个工具访问数据库只显示两个表，它们似乎是 SQLlite 系统表

d) 包确实包含一个“EasyOrder.momd”目录和一个“EasyOrder.mom”文件。该应用程序称为“EasyOrder”。

e) 该项目包含一个“EasyOrder.xcdatamodeld”文件，其中定义了一个客户实体（以及其他实体）。

f）我在我的数据库中尝试了其他实体，结果相同

g) My 是一个标准应用程序，我也添加了核心数据支持。我没有在应用程序委托中使用默认代码，但我的示例也没有。

代码如下

```
NSManagedObjectContext *contxt;
NSManagedObjectModel *mdl;
NSPersistentStoreCoordinator *ps;

mdl = [NSManagedObjectModel mergedModelFromBundles:nil];
ps = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mdl];

NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);                

NSString *docDir = [documentDirectories objectAtIndex:0];

NSString *dbLoc = [docDir stringByAppendingPathComponent:@"test.sqllite"];

NSURL *databaseUrl = [NSURL fileURLWithPath:dbLoc];

NSError *err;

if ([ps addPersistentStoreWithType:NSSQLiteStoreType
                     configuration:nil 
                               URL:databaseUrl 
                           options:nil 
                             error:&err] == false) {
    NSLog(@"%@", err);
}

[contxt setUndoManager:nil];

//Add record 
```

//在这里崩溃！

```
Client *c = [NSEntityDescription insertNewObjectForEntityForName:@"Client" inManagedObjectContext:contxt];

[c setEntityRef:1234]; 
```

……

蒂亚·罗布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:08:13.490

我刚刚解决了这个问题。我相信存在某种版本控制问题，其中使用的数据模型很旧并且不包含表。

我用一个虚拟模型（只有一个表）创建了一个测试应用程序，它运行良好。然后我删除了该模型并使用了我实际应用程序中的模型。它继续正常工作，但没有根据数据模型创建表。所以我从模拟器中删除了运行时间，然后它正确地创建了所有表。

我在我的实际应用程序中遵循相同的过程，从模拟器中删除，删除模型，添加具有不同名称的模型并重新构建。应用程序现在工作！

# javascript - Safari 上的 SVG 动画工件

> ID：11423756
> 
> 赞同：1
> 
> 时间：2012-07-11T00:04:17.843
> 
> 标签：javascript, safari, svg, mobile-safari, d3.js

我正在使用 d3.js 做一些 svg 布局/动画，并且遇到了这里第一个示例描述的问题（仅在 Safari / Safari 移动设备上）：

[http://www.mysparebrain.com/svgbug.html](http://www.mysparebrain.com/svgbug.html)

（例如，当 rect+text 移动时，它会在其路径中留下渲染伪影）

有谁知道这个的解决方法？

我能找到的关于 SO 的唯一类似问题是这个未回答的问题：

[Canvas 在 Safari 中为动画填充贝塞尔曲线绘制工件](https://stackoverflow.com/questions/4998857/canvas-draws-artifacts-in-safari-for-animated-filled-bezier-curves)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:03:35.623

您绝对应该为此提交一份 WebKit 错误报告。您已经将它简化为一个非常清晰的测试用例，因此应该更容易有人修复它。

任何基于水平定位强制重绘的东西似乎都可以解决它。我注意到只是通过切换到另一个选项卡并返回导致它重绘。如何重新定位内容区域，例如，向右移动 1px 然后向左移动 1px，以强制重绘？它不漂亮，但它比人工制品更好。

# mysql - MySQL 用小写 am/pm 格式化时间

> ID：11423761
> 
> 赞同：7
> 
> 时间：2012-07-11T00:04:56.147
> 
> 标签：mysql, sql

有没有更好的方法将时间字段格式化为小写 AM 或 PM？这就是我在 SELECT 语句中的内容，它可以工作，但相当笨拙：

```
CONCAT_WS('', DATE_FORMAT(time, '%l:%i '), LOWER(DATE_FORMAT(`time`, '%p'))) AS time 
```

我想更重要的是，使用这样的 SQL 函数进行格式化是否有任何重大开销？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T00:08:56.937

您可以直接执行此操作而无需连接。

```
LOWER(DATE_FORMAT(`time`,'%l:%i %p')) 
```

**[在这里查看@SQLFiddle](http://sqlfiddle.com/#!2/d0935/5)**

# ruby-on-rails-3 - Ruby on Rails - 在我的项目中使用 Themeforest 管理主题

> ID：11423762
> 
> 赞同：2
> 
> 时间：2012-07-11T00:05:04.693
> 
> 标签：ruby-on-rails-3

我正在尝试为特定的利基市场构建 CRM 工具。我是一个完全的新手。这将是我的第一个应用程序。我唯一的编程经验是使用 VB 和 MS Access，所以 RoR 呈现出相当的学习曲线。我已经完成了 Michael Hartl 的 Rails 教程的第一个版本。（实际上吸收了大约 10%）

我买了一个 Themeforest 引导管理主题并且有两个一般性的问题：

1) 主题中有*一些*PHP 代码。我假设我应该用 Ruby 重写这段代码，对吧？代码主要控制文件上传等事情 - 可以由经验丰富的程序员很快用 Ruby 重写的事情（对我来说，这需要几个月的时间：）

2）主题包含许多不同的页面。例如，一个页面是仪表板，另一个页面是日历。这两个页面之间有很多重复 - 所有主要控制按钮等在页面之间保持相同。在主题中，每个页面都是一个不同的 HTML 文件，其中所有代码都是简单地复制的。我假设我想在 Rails 中设置某种模板系统，这样我就不会在一堆 HTML 页面之间剪切和粘贴代码，对吧？（如果我更改主按钮，我只想在一个地方进行更改，而不是在该主题附带的 20 个 HTML 文件中的每一个中进行更改。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T01:13:51.540

**1)**

我不确定是否没有其他方法，但这很可能是最简单的解决方案。

如果您必须重写 Web 应用程序中常见的内容，例如文件上传，通常有一个 gem 可以帮助您，因此您不必从头开始做所有事情。我可以推荐回形针 gem，[Railscast](http://railscasts.com/episodes/134-paperclip?autoplay=true)用于文件上传，因为我们在自己的项目中使用它。

注意：Railscast 已过时，因此安装内容不再准确。此外，回形针需要 ImageMagick 才能工作。

Railscasts 还涵盖了许多其他有用的 gem。如果您需要找到特定的东西，只需谷歌它。然后，github 页面通常会显示 gem 是否仍在维护，或者您是否可以更好地使用其他东西。

**2)**

Rails 使用**partials**防止重复代码。这是[Railscast](http://railscasts.com/episodes/99-complex-partials?autoplay=true)（自 2008 年以来语法可能已经改变）。Partials 允许您将代码（例如标题或案例中的按钮）放在文件中，然后可以在您的任何视图中呈现。

不幸的是，我无法链接 github 页面和 Rubygems.org 之类的其他内容，因为我缺乏声誉。我希望这仍然有点帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:18:46.787

将主题的常见元素提取到您的应用程序布局中。

将主题的模块化部分提取到它们自己的控制器和动作中。例如，为日历部分创建一个日历控制器，日历控制器中出现的动作将是支持该日历的视图。您还可以使用局部视图（以“_”开头的视图），而无需创建控制器操作。但是如果有数据需要发送到视图，最好还是坚持使用普通的控制器动作和视图。

至于 php 代码，去掉它，将尽可能多的逻辑移到你的模型和控制器中，优先放入你的模型。正如 hobo 建议的那样，查看 gems 以复制任何复杂 php 代码的功能。

# python - PyBrain 无法访问 API/Index 中列出的函数

> ID：11423764
> 
> 赞同：1
> 
> 时间：2012-07-11T00:05:39.573
> 
> 标签：python, pybrain

所以，我会让它变得简单。

Pybrain 的 API 显示，作为示例，它们有一个名为`buildNetwork()`. 它说它在 中`pybrain.tools.shortcut.buildNetwork`，如果这有意义吗？

问题是，`.shortcut`不存在。我对使用 API 很陌生，但在我看来，这个功能甚至不存在。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:12:26.640

```
from pybrain.tools.shortcuts import buildNetwork
....
buildNetwork(....) 
```

应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:13:33.443

没关系。显然，出于某种原因，我必须*指定*我想导入 pybrain.tools.shortcuts，我不能只是大量导入 pybrain 并期望出现快捷方式。感谢您阅读本文......我猜

# c# - 如何使用具有不同用户 ID 的 Directory.CreateDirectory？

> ID：11423768
> 
> 赞同：1
> 
> 时间：2012-07-11T00:06:24.643
> 
> 标签：c#, file-io

我正在尝试编写代码以从我的工作站上的应用程序以编程方式在服务器上创建目录（并执行其他文件操作）——使用 Directory.CreateDirectory 这很容易，而且我知道该怎么做。但是，问题是我试图在我的用户 ID 无权这样做的服务器上执行此操作。我确实有一个 A/D 用户 ID 可以使用它，但我不知道如何在我的应用程序中使用它来做我需要做的事情（*模拟*不是它所谓的，但是......）。

这是我想做的事情：

```
System.Security.AccessControl.DirectorySecurity ds = new System.Security.AccessControl.DirectorySecurity();

// <-- something magic happens here -->

Directory.CreateDirectory(@"\\ofmsws42\c$\New_Directory", ds); 
```

“魔法”发生的地方是什么？还是我在叫错树？我想说我的服务器凭据最终位于我正在创建的 DirectorySecurity 对象中的某个位置，但 DirectorySecurity 的所有属性似乎都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:15:26.673

You need to impersonate with the account that have permissions in "magic code".

[WindowsIdentity.Impersonate](http://msdn.microsoft.com/en-us/library/chf6fbt4.aspx) have sample (referenced from SO: [How do you do Impersonation in .NET?](https://stackoverflow.com/questions/125341/impersonation-in-net))

Here are most important chunks of code (`LogonUser` is PInvoke from advapi32.dll):

```
// Call LogonUser to obtain a handle to an access token.
bool returnValue = LogonUser(userName, domainName, Console.ReadLine(),
      LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT,
      out safeTokenHandle);

using (WindowsImpersonationContext impersonatedUser = 
   WindowsIdentity.Impersonate(safeTokenHandle.DangerousGetHandle()))
{
...
} 
```

# android - Android 如何正确通知 ListView 的数据集更改

> ID：11423774
> 
> 赞同：2
> 
> 时间：2012-07-11T00:07:49.327
> 
> 标签：android, listview

我正在尝试更新我的列表并在我的活动中显示更新后的列表。每次我这样做我都会收到以下错误

```
 The content of the adapter has changed but ListView did not receive a notification.
 Make sure the content of your adapter is not modified from a background thread,
 but only from the UI thread. 
```

这是我的代码，我正在使用 AsyncTask 来完成此任务。我在我的适配器上调用 notifyDataSetChanged() 但它似乎不起作用。我究竟做错了什么？

```
 class MyTask extends AsyncTask<Context, Integer, String> {

    @Override
    protected String doInBackground(Context... params) {
        GregorianCalendar currentDateclone = (GregorianCalendar) currentDate.clone();
        ListPopulater2.listPopulate(currentDateclone, 7, items, Id);
                    //method to update list info

    }

    // -- gets called just before thread begins
    @Override
    protected void onPreExecute() {
        progressdialog = ProgressDialog.show(SectionListExampleActivity.this, "", "Loading..."); //display progress bar
        super.onPreExecute();

    }

    // -- called as soon as doInBackground method completes
    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        Log.d("postExecute", "here");
                    adapter.notifyDataSetChanged();

        progressdialog.cancel();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:11:00.617

尝试移动：

```
ListPopulater2.listPopulate(currentDateclone, 7, items, Id); 
```

到你的`onPostExecute`.

这样做的原因是您需要在完成所有后台活动后更新列表，而不是在您执行此操作时。您可以使用`onProgressUpdate`, 但这是为您的进度对话框。更新您的列表视图应该在您拥有所有数据后完成，否则，您将收到您所做的错误，因为 UI 在主线程上运行，并且您正在尝试使用后台线程对其进行更新。

至于进度对话框，是有目的的。如果您正在做一些需要一段时间才能完成的事情，对话框将告诉用户您离完成后台任务还有多远。

希望这是有道理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-03T11:54:12.797

当您想要做一些处理 UI 的事情时，您必须在 UI 线程中执行该任务。因此，为此您可以使用 2 种方法：

1.  使用 runOnUi() 方法
2.  使用 OnPostExecute() 方法

而且您必须在您在 listView 中设置适配器的地方使用 notifyDatasetchanged()。

# c# - CompositionTarget.Rendering & DispatcherTimer

> ID：11423776
> 
> 赞同：2
> 
> 时间：2012-07-11T00:08:00.277
> 
> 标签：c#, wpf, dispatchertimer

CompositionTarget.Rendering 和 DispatcherTimer 不能共存吗？我有一个通过注册到 CompositionTarget.Rendering 和其他地方我有 DispatcherTimer 来更新的控件。计时器根本没有触发，经过一些试验和错误后，当我删除 CompositionTarget.Rendering 时，计时器再次工作。这两者都有限制吗？如果是这样，其背后的原因是什么？如果没有，任何想法为什么在我的情况下是这样的？我的渲染还没有密集，所以这不是原因。即使是这种情况，计时器仍应触发，但速度比我想要的慢得多，而不是完全不触发。想法？

谢谢

# https - Google Plusone 计数

> ID：11423780
> 
> 赞同：2
> 
> 时间：2012-07-11T00:08:48.653
> 
> 标签：https, google-plus-one

对于 https 和 http 协议，我对 google PlusOne 的计数有所不同。

有没有人经历过这种行为并有任何解决它的建议。

我正在使用[此处](https://developers.google.com/+/plugins/+1button/)显示的典型实现。

我还发现[了这个](https://developers.google.com/+/plugins/+1button/#target-url)关于规范 url 的链接，但我认为这与这种情况无关，因为我没有替代规范 url，只有在 2 个不同协议上提供的重复内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:08:51.990

不同 URL 引用的页面是*不同*的。可以通过 HTTP 和 HTTPS 提供不同的内容。因此，如果您想拥有相同的计数器，则需要在计数器参数中指定规范的 URL（有或没有 https，由您决定）。

# php - PHP为每个用户创建个人目录

> ID：11423783
> 
> 赞同：0
> 
> 时间：2012-07-11T00:09:04.040
> 
> 标签：php, file, codeigniter, file-upload

我正在使用 php 并希望为每个用户创建目录，我将在其中存储他们上传的图像。只有用户可以访问他/她的目录和各自的图像。

我找不到太多关于如何执行此操作的文档，即创建目录、将它们放在我的服务器中的最佳位置、如何将它们链接到用户以及将它们设置为私有。请分享您的指导，从哪里开始。标准做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:13:41.510

您应该考虑将访问受限的文件放在公共 webroot 文件夹之外，并通过 PHP 提供它们，这将使您能够在之前检查用户凭据。（请参阅[使用 PHP 提供文件的最快方法](https://stackoverflow.com/questions/3697748/fastest-way-to-serve-a-file-using-php)）

这样，您可能不需要每个用户一个目录。

# linux-kernel - Qemu arm Linux内核启动调试，无源代码

> ID：11423784
> 
> 赞同：5
> 
> 时间：2012-07-11T00:09:10.467
> 
> 标签：linux-kernel, gdb, arm, qemu

我正在使用 Qemu 学习一些 linux 内核开发/hacking，并想调试 Linux (2.6.34.3) 的启动过程。我已经为 ARM 多功能平台进行了编译，并且正在使用 Codesourcerys arm-none-eabi 交叉编译器。我使用 Eclipse 作为使用 gdbserver 构建和调试的环境。

**所以我已经成功地在 qemu 中构建并运行了内核，但问题是我在启动过程（地址 0）的调试器中没有看到任何源代码**，我只能看到反汇编代码。但是，当它在 init/main.c（地址超过 0xC0000000）处切换到虚拟内存时，会出现源代码，我可以看到源代码并单步执行代码。这是为什么？我从一开始就想要那个。

有人对如何调试 Linux 的引导过程有任何提示吗？google 中的所有指南都显示了如何调试内核，但它们都显示在 start_kernel() （位于**init/main.c**中），而不是从引导过程的开始（在**arch/arm/boot/compressed/head.c 中）。 )**。请有经验的朋友帮忙，谢谢！

> 查看根文件夹中的 System.map ，只有来自 c0004000 （虚拟地址开始）的东西的符号。我将 vmlinux 加载到 gdbserver 以获取调试信息，也许这就是为什么没有源？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T14:04:44.777

Linux 内核使用两步引导处理（这不包括任何引导加载程序，如 u-Boot ...）。您可以更好地理解这一点，尤其是通过查看 2 个 .lds 文件（如下详述）进行链接：

1.  `arch/arm/boot/compressed/vmlinux.lds.in`, 生成`arch/arm/boot/compressed/vmlinux.lds`.

    与 中的其他 .o 文件一起`arch/arm/boot/compressed`，在此文件夹中生成一个 vmlinux。

    您可以使用`arm-none-eabi-nm -a -n arch/arm/boot/compressed/vmlinux`来查看此阶段的符号。所有地址都是物理地址。

    System.map 中不包含这些符号

2.  第二个vmlinux是由内核.o文件和生成的`arch/arm/kernel/vmlinux.lds`（注意：路径不同）

我希望这能解释为什么您在 Eclipse 中看不到引导源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T02:20:04.787

linux内核太复杂而无法理解（对于初学者）。
为什么不使用像[xv6](http://pdos.csail.mit.edu/6.828/2011/xv6.html)这样更小的操作系统：

操作系统很小， [源码](http://pdos.csail.mit.edu/6.828/2011/xv6/xv6-rev6.pdf)大约8000行
，很多大学
基于V6(unix)使用，
启动过程是一样的，只是比linux简单。
xv6[书](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFAQFjAA&url=http%3A%2F%2Fpdos.csail.mit.edu%2F6.828%2F2011%2Fxv6%2Fbook-rev6.pdf&ei=xuH8T5SnOYPyrQfq4NXIBg&usg=AFQjCNFI8a1vODN7NDbfOuRGzz2VeBewWg&sig2=FWcfF9OfSbn0NK3IjbQ02A)的附录 B介绍了引导过程（简短而有趣）。您可以在 qemu 上运行 gdb 并查看引导过程，要检查的主要文件是 bootasm.S（在汇编程序中）和 bootmain.c。

与 linux 相比，这更简单、更容易理解。（至少对于初学者来说）。在给定的链接中，有关于、设置 qemu、使用 gdb、跟踪引导过程、对源代码进行更改等内容。试一试 ：）

干杯，
莎朗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:33:44.260

head.S 是用汇编语言编写的，而不是用 C 语言编写的。这就是 .S 后缀的含义。

# ruby - 试图为我的 Boulder codeschool 课程创建一个合适的 ruby 应用程序（gem）：lib 类没有正确通信（'未初始化的常量'）

> ID：11423785
> 
> 赞同：0
> 
> 时间：2012-07-11T00:09:19.770
> 
> 标签：ruby, oop, design-patterns, gem

您可以在[github.com/ddd1600/simple_angel查看文件结构中的所有内容](http://www.github.com/ddd1600/simple_angel)

我在尝试“正确的方式”创建一个 ruby​​ 应用程序（很快成为一个 gem）时遇到了很多错误，即。通过将逻辑彻底划分为类和“加载器文件”等等。关键是，我知道如何以更简单的方式编写此代码，而不遵守 OO 原则，但我想“正确”地做。

所以，首先，文件结构如下——

```
root folder = ~/Develop/simple_angel

inside /simple_angel
  - /lib
  - Gemfile
  - Rakefile
  - simple_angel.gemspec

inside /lib
  - simple_angel.rb
  - /simple_angel

inside /lib/simple_angel
  - company.rb
  - search.rb
  - version.rb 
```

但是，这里有一些基础知识。

这是我从终端运行这个程序所调用的（运行时的路径是 ~/Develop/simple_angel）

```
ruby -Ilib lib/simple_angel/search.rb 
```

这是search.rb

```
#these 'requires' are supposed to be loaded in lib/simple_angel.rb, so here I show
#them commented out
#
#require 'rubygems'
#require 'httparty'
#require 'json'
#require 'company'

module SimpleAngel
  class Search

  SEARCH_URL = "http://api.angel.co/1/startups"

  def search(user_input)

    response = HTTParty.get("#{SEARCH_URL}/#{user_input}")
    parsed_response = JSON.parse(response.body)

    Company.new(parsed_response)

  end
 end  

 s = SimpleAngel::Search.new
 s = Search.new
 x = s.search(6702)
 p x
 end 
```

这是“加载器”文件，lib/simple_angel.rb（PS：这种文件的更正式的标题是什么？）

```
require 'httparty'
require 'json'
require 'simple_angel/search'
require 'simple_angel/version'
require 'simple_angel/company'

module SimpleAngel

end 
```

最后，当我（再次）运行“ruby -Ilib lib/simple_angel/search.rb”时（所有 search.rb 的 'requires' 都被注释掉了 (^&^)，这是我的错误消息：

```
[ddouglas@coders:~/Develop/simple_angel on master]
% ruby -Ilib lib/simple_angel/search.rb                                       
lib/simple_angel/search.rb:15:in `search': uninitialized constant SimpleAngel::Search::HTTParty (NameError)
from lib/simple_angel/search.rb:24:in `<module:SimpleAngel>'
from lib/simple_angel/search.rb:8:in `<main>' 
```

^&^ - 既然我们都在这里加快速度，我不妨包括当我离开 search.rb 的“要求”时发生的错误

```
% ruby -Ilib lib/simple_angel/search.rb                                       ✹
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- company (LoadError)
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from lib/simple_angel/search.rb:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:27:39.303

我不能说我理解班级试图提出的关于拆分文件的观点。

第一个错误 ( `uninitialized constant SimpleAngel::Search::HTTParty`) 是因为`SimpleAngel::Search`您从内部调用`HTTParty`. 尝试将其更改`::HTTParty`为指定根命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:57:58.450

回顾这个问题，大局问题是我可能只需要通过添加到 config/application.rb 来激活 rails 中的 /lib 文件夹

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

从那里，代码可以通过`file_name.rb => FileName`类系统从rails中的任何地方直接加载

# python - 为什么我使用 pandas Series.asfreq 得到 is_monotonic 断言错误

> ID：11423790
> 
> 赞同：1
> 
> 时间：2012-07-11T00:09:49.317
> 
> 标签：python, pandas

我有一个 Python 函数`historical_data`，它从 Yahoo Finance 提取每日历史价格和股息数据并将其输出到 pandas`DataFrame`中。

```
>>> nlsn = y.historical_data('NLSN')
>>> nlsn
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 366 entries, 2012-07-10 00:00:00 to 2011-01-27 00:00:00
Data columns:
Open         366  non-null values
High         366  non-null values
Low          366  non-null values
Close        366  non-null values
Volume       366  non-null values
Adj Close    366  non-null values
Dividends    366  non-null values
dtypes: float64(6), int64(1)
>>> nlsn['Adj Close']
Date
2012-07-10    26.77
2012-07-09    26.77
2012-07-06    26.64
2012-07-05    26.56
2012-07-03    26.57
...
2011-02-01    25.75
2011-01-31    26.07
2011-01-28    25.00
2011-01-27    25.40
Name: Adj Close, Length: 366 
```

我只想持久地存储每日数据（而不是每天、每月、每周等）。但是，以下每日到每月的转换似乎不起作用：

```
>>> nlsn['Adj Close'].asfreq('M', method='bfill')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/michael/Projects/envs/fintools32/lib/python3.2/site-packages/pandas/core/generic.py", line 156, in asfreq
    return asfreq(self, freq, method=method, how=how)
  File "/home/michael/Projects/envs/fintools32/lib/python3.2/site-packages/pandas/tseries/resample.py", line 329, in asfreq
    return obj.reindex(dti, method=method)
  File "/home/michael/Projects/envs/fintools32/lib/python3.2/site-packages/pandas/core/series.py", line 2053, in reindex
    level=level, limit=limit)
  File "/home/michael/Projects/envs/fintools32/lib/python3.2/site-packages/pandas/core/index.py", line 791, in reindex
    limit=limit)
  File "/home/michael/Projects/envs/fintools32/lib/python3.2/site-packages/pandas/core/index.py", line 719, in get_indexer
    assert(self.is_monotonic)
AssertionError 
```

我将这些股票价格汇总到每月的正确方法是什么？

**我试过的**

我尝试了所有不同的`method`参数（ffill、pad、bfill），所有这些似乎都会引发相同的断言错误。

我尝试检查源代码`index.py`，但似乎有一个有效的策略模式，有问​​题的类委托`is_monotonic`给它的`_engine`属性，我找不到`_engine`实际分配属性的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:21:44.670

尝试`nlsn['Adj Close'][::-1].asfreq('M', method='ffill')`

如果你可以让你的函数返回升序 DatetimeIndex ，那么你就可以跳过这里的额外排序。

# flash - socket.io 传输“flashsocket”在 IE 8 上启动需要 5 秒

> ID：11423797
> 
> 赞同：1
> 
> 时间：2012-07-11T00:10:55.720
> 
> 标签：flash, internet-explorer, socket.io

这是针对 localhost 运行的，所有其他传输都禁用以进行测试。

在 IE 和其他浏览器上测试其他传输时，没有这样的滞后。

有什么可以做的吗？我安装了最新的 Adob​​e Flash，运行 Windows 7 64 位，socket.io 0.9。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T00:28:53.153

问题在于[Flash 策略服务器](http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html)的工作方式：它首先尝试连接到端口 843 并获取策略文件。如果在 5 秒内没有响应，它会尝试从服务器获取策略文件 - 并且 socket.io 在内部提供此文件。如果您想防止这种情况发生，您可以从上面的链接运行您自己的闪存策略服务器 - 这将花费您几分钟并显着改善用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T15:33:36.900

我认为问题在于 IE 8 不支持 websocket，当您尝试使用 flashsocket 时，它会退回到长轮询。甚至 IE 9 本身也不支持套接字。您可以使用 IE 10 提供的原生支持，但默认情况下它是禁用的。在这里查看哪些[浏览器支持 websockets](https://stackoverflow.com/questions/1253683/what-browsers-support-html5-websocket-api)

您正在经历的五秒钟等待是因为[long-polling](http://en.wikipedia.org/wiki/Push_technology#Long_polling)。服务器保持请求直到超时或某些信息到达。在这里查看[socket.io - XHR 轮询与 flashsocket 和 websocket的区别](https://stackoverflow.com/questions/8801014/socket-io-xhr-polling-vs-flashsocket-and-websocket)

# mysql - 将复杂的需求转换为 SQL 查询

> ID：11423798
> 
> 赞同：1
> 
> 时间：2012-07-11T00:11:00.040
> 
> 标签：mysql, sql

我在将关系代数转换为这个相当复杂的查询的 SQL 时遇到问题：

我需要从连接到表 B 的表 A 中选择所有值，其中表 B 中没有匹配的记录，或者有匹配的记录，但匹配的记录集没有包含可能 8 个总值中的 4 个的字段.

数据库是 MySQL 5.0... 使用 InnoDB 引擎作为表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:13:31.693

```
Select 
  a.* 
from 
  a 
left join 
  b 
on 
  a.id=b.id 
where 
  b.id is null 
or 
  b.field1 not in ("value1","value2","value3","value4"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:21:35.963

我不确定是否有任何真正的性能改进，但另一种方法是：

```
SELECT 
    *
FROM
    tableA
WHERE
    id NOT IN ( SELECT id FROM tableB WHERE field1 NOT IN ("value1", "value2")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T01:44:10.697

你的要求有点不清楚。我的第一种解释是你只想要 A 列，并且永远不要超过给定 A 行的 1 个实例。

```
select * from A where not exists (
  select B.id 
    from B 
   where B.id=A.id 
     and B.field in ('badVal1','badVal2','badVal3','badVal4')
) 
```

我的第二种解释是，您希望（A 外连接到 B）中的所有列，如果有多个 B 行，则可能有多个 A 行的实例，只要不存在具有禁止值的 B 行。

```
select * from A
  left outer join B on A.id=B.id
 where not exists (
               select C.id
                 from B as C
                where A.id=C.id
                  and C.field in ('badVal1','badVal2','badVal3','badVal4')
           ) 
```

两个查询都可以用 NOT IN 代替相关的 NOT EXISTS 来表示。在不知道数据的情况下很难知道哪个会更快。

# codeigniter - 从部分视图重定向到 Codeigniter 中的 show_404

> ID：11423801
> 
> 赞同：4
> 
> 时间：2012-07-11T00:11:30.153
> 
> 标签：codeigniter, http-status-code-404, hmvc

我在 CodeIgniter 中使用 HMVC 模式。我有一个控制器，它通过 modules::run() 函数加载 2 个模块，并将一个参数传递给每个模块。

如果任一模块无法匹配传递的参数，我想调用 show_404()。它可以工作，但它会在我现有的模板中加载错误页面的完整 HTML，因此 HTML 会中断并且看起来很糟糕。我想我希望它重定向到错误页面，这样它就不会运行第二个模块。有没有办法做到这一点而不改变网址？

是否可以在不更改 URL 的情况下从模块重定向到 show_404()？

这是正在发生的事情的一个过度简化的示例：

*www.example.com/users/profile/usernamehere*

url 在用户控制器中调用此函数：

```
function profile($username)
{
    echo modules::run('user/details', $username);
    echo modules::run('user/friends', $username);
} 
```

运行这些模块，找出用户是否存在：

```
function details($username)
{
    $details = lookup_user($username);
    if($details == 'User Not Found')
        show_404(); // This seems to display within the template when what I want is for it to redirect
    else
        $this->load->view('details', $details);
}

function friends($username)
{
    $details = lookup_user($username);
    if($friends == 'User Not Found')
        show_404(); // Redundant, I know, just added for this example
    else
        $this->load->view('friends', $friends);
} 
```

我想只有更好的方法可以解决它，但我没有看到它。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T00:28:56.257

如果子模块中有错误，您可以抛出异常，并在您的控制器中捕获它，`show_404()`然后您将执行此操作。

**控制器：**

```
function profile($username)
{
    try{
       $out  = modules::run('user/details', $username);
       $out .= modules::run('user/friends', $username);
       echo $out;
    }
    catch(Exception $e){
       show_404();
    }
} 
```

**子模块：**

```
function details($username)
{
    $details = lookup_user($username);
    if($details == 'User Not Found')
        throw new Exception();
    else
        // Added third parameter as true to be able to return the data, instead of outputting it directly.
        return $this->load->view('details', $details,true);
}

function friends($username)
{
    $details = lookup_user($username);
    if($friends == 'User Not Found')
        throw new Exception();
    else
        return $this->load->view('friends', $friends,true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-04T07:01:06.977

您可以使用此功能重定向 404 not found 页面。

```
 if ( ! file_exists('application/search/'.$page.'.php')) {
        show_404(); // redirect to 404 page
    } 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2015-09-22T19:19:44.313

它很简单，我解决了这个问题

请控制器名称的第一个字母必须大写，例如

一个控制器

页面应该是页面

并且还保存具有相同名称的 Cotroler 文件 Pages.php 而不是 pages.php 对于模型类也相同

请享用

# java - 在jframe中设置光标的位置

> ID：11423802
> 
> 赞同：4
> 
> 时间：2012-07-11T00:11:33.773
> 
> 标签：java, cursor, position, jframe, mouseevent

我有一个使用以下代码的程序：

```
public void mouseMoved(MouseEvent e) {
    mousex = e.getX();
    mousey = e.getY();

    if(mousex >= 700) {
        try {
            Robot robot = new Robot();

            robot.mouseMove(0, 0);
        } catch (AWTException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    }
    if(mousex <= 100) {
        Robot robot;
        try {
            robot = new Robot();
            robot.mouseMove(0, 0);
        } catch (AWTException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    }
} 
```

除了一件事，所有这些都很好。它设置光标在屏幕上的位置而不是 jframe。此外，当我说 if(mousex >= 700) 时，它也会从屏幕上获取它。我需要知道如何将其更改为 jframe。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:26:05.773

获取JFrame 在屏幕上的*位置并相应地转换您的鼠标位置。*所有扩展组件的对象，包括 JFrame，都有方法`getLocationOnScreen()`。因此，再次使用此方法，获取 JFrame 的位置，然后找到鼠标的相对位置，包括它所在的位置以及您想要的位置。

这可以用小学代数来解决。

**编辑**
您可能希望只创建一次机器人对象，并在需要时简单地使用该对象，而不是每次都重新创建它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T00:32:54.260

**能得到的东西，**

1.  JFrame 在屏幕上的位置。
2.  一旦您知道屏幕上的位置，您就可以添加这些 (x,y) 并在 JFrame 中获取新位置。
3.  如果计算后的位置大于大小，`JFrame`则将 x 或 y 设置为 MAX 当前大小`JFrame`（如果坐标是完全动态的）

**视觉上是这样的，**

![在此处输入图像描述](../Images/9b3fa6f57b0d1be001186856e0e03eec.png)

在上图中，屏幕上的位置`JFrame`是 (50,50)，这意味着对于内部的组件，这些坐标变为 (0,0) `JFrame`。现在，在屏幕上获取鼠标位置，`JFrame`您可以在 JFrame 中说一些随机所需的坐标，然后将这些屏幕位置 50 添加到其中。

# c# - MembershipService.ChangePassword 不会更改密码问题

> ID：11423805
> 
> 赞同：2
> 
> 时间：2012-07-11T00:12:01.150
> 
> 标签：c#, asp.net-mvc-3

`MembershipService.ChangePassword`不更改密码问题。我不知道为什么...

```
var userUsers = from n in db.aspnet_Users where n.UserId == id select n;
                string userName = userUsers.Single<aspnet_Users>().UserName;

                MembershipUser user = Membership.GetUser(userName, false);
                if (user != null)
                {
                    string generatedPassword = user.ResetPassword();
                    if (MembershipService.ChangePassword(userName, generatedPassword, model.NewPassword))
                    {   

// So it doesn't change the password 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:21:24.217

在文档中[查看](http://msdn.microsoft.com/en-us/library/aa479021.aspx)：

> `true`如果密码更新成功，ChangePassword 返回。否则，它返回`false`.

在更改密码之前，`ChangePassword`调用提供者的可覆盖`OnValidatingPassword`方法来验证新密码。然后它**会根据调用结果更改密码或取消操作**。

> 如果用户名、密码、新密码或密码回答无效，`ChangePassword`不抛出异常；它只是返回false。

成功更改密码后，`ChangePassword`更新用户的`LastPasswordChangedDate`.

当我遇到完全相同的问题时，这对我有帮助。密码无效，因此该方法从未真正更改过它。我在文件中更改了一些密码配置，`web.config`然后它终于起作用了。

检查您的 web.config 的这一行，这可能是问题所在：

```
<membership defaultProvider="Demo_MemberShipProvider">
    <providers>
       <add name="Demo_MemberShipProvider"
            type="System.Web.Security.SqlMembershipProvider"
            connectionStringName="cnn"
            enablePasswordRetrieval="false"
            **enablePasswordReset="true"**
            **requiresQuestionAndAnswer="true"**
            applicationName="/"
            requiresUniqueEmail="false"
            passwordFormat="Hashed"
            maxInvalidPasswordAttempts="5"
            **minRequiredPasswordLength="5"**
            **minRequiredNonalphanumericCharacters="0"**
           passwordAttemptWindow="10" passwordStrengthRegularExpression="">
    </providers>
</membership> 
```

希望能帮助到你！

# django - 从 mercurial repo 在 pydev 中创建一个 Django 项目

> ID：11423811
> 
> 赞同：0
> 
> 时间：2012-07-11T00:13:14.923
> 
> 标签：django, eclipse, mercurial, pydev

我喜欢在 Eclipse 中使用 python 编辑器 pydev。我想与一些将 python 项目（实际上是 Django 站点）存储在 mercurial repo 中的人合作。可以在 pydev 中创建一个从 Mercurial 存储库中获取代码的新 Django 项目吗？如果是这样，怎么做？

谢谢亚瑟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:18:49.780

做一个谷歌搜索`does eclipse support mercurial`给你：

1.  [MercurialEclipse](http://javaforge.com/project/HGE) - 一个用于 Mercurial 支持的 Eclipse 插件，我建议从这里开始。无论您正在从事哪种项目，这都应该有效。
2.  [关于](https://stackoverflow.com/questions/1267982/which-has-better-eclipse-support-git-or-mercurial)在 Eclipse 中使用 git 还是 Mercurial 是否更好的讨论，这可以帮助您。

此外，如果您不想安装 MercurialEclipse 插件，您可以独立于 Eclipse 使用 Mercurial，克隆存储库，然后使用这些文件启动项目。在这种情况下，我只会确保您的项目元文件在 Mercurial 的忽略列表中，这样它们就不会被推送到远程存储库。

如果你有什么想让我详细说明的，请发表评论。祝你好运。

# keyboard-shortcuts - 如何映射 control + key 以使用 xmodmap 生成更少和更大的键？

> ID：11423817
> 
> 赞同：1
> 
> 时间：2012-07-11T00:13:43.270
> 
> 标签：keyboard-shortcuts, key-bindings, ubuntu-12.04, xmodmap

所以我试图创建一个组合键来为葡萄牙语布局生成 ISO 键，有问题的键是 < >，按下它通常会生成 < 字符，< > + Shift 会生成 > 字符。所以我正在尝试使用 xmodmap 创建一个组合，我希望它适用于所有程序。

我想要的是：

1.  映射`CTRL`+ `SHIFT`+`.`到`>`
2.  映射`CTRL`+ `SHIFT`+`,`到`<`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-26T10:58:41.367

Xmodmap 无法映射多个修饰符和一个键。

> [https://deskthority.net/wiki/Xmodmap#xmodmap_specific_configuration_file](https://deskthority.net/wiki/Xmodmap#xmodmap_specific_configuration_file)
> 
> 修饰符对于使用键盘修饰符来实现特定输出特别方便。这方面的一个例子是使用 Alt 键来模仿 AltGR 行为，例如，当一个人按住 AltGR 键并按下键盘上的字母 u（具有完全相同的键码）时，它会在屏幕上显示为 ü 而不是。但是，修饰符一次只能与一个修饰键组合使用。 **如果想将 Ctrl+Alt+A 绑定为 å 输出，*它将不起作用*。**

# javascript - Google Maps v3 API Extend Bounds, map.fitBounds, can't extend the bounds

> ID：11423819
> 
> 赞同：0
> 
> 时间：2012-07-11T00:13:48.297
> 
> 标签：javascript, google-maps

该地图显示 2 个标记，一个带有地理位置坐标，另一个带有一些随机坐标。我无法扩展边界以适应地图中的两个标记。怎么了？先感谢您。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Map Geolocation</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=yes">
    <meta charset="UTF-8">
    <link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css"
      rel="stylesheet" type="text/css">

    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>

    <script type="text/javascript">
      var map;

      function initialize() {
        var myOptions = {
          zoom: 18,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            myOptions);

        // Try HTML5 geolocation
        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
            var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            var geolocation = new google.maps.Marker({position: pos, map: map, title: 'Your geolocation', });

            var latitude=47.03249;
            var longitude=28.833747;
            var pos2=new google.maps.LatLng(latitude,longitude);
            var geolocation2 = new google.maps.Marker({position: pos2,map: map,title: 'Your geolocation',});

            var pos3=new google.maps.LatLng((position.coords.latitude+latitude)/2,(position.coords.longitude+longitude)/2);
            map.setCenter(pos3);

            bounds.extend(geolocation.getPosition());              
            bounds.extend(geolocation2.getPosition());  

    map.fitBounds(bounds);

            }, 
            function() {handleNoGeolocation(true);});
        } 
        else {handleNoGeolocation(false);
        }

      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map_canvas" style='width:400px; height:400px;'></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:00:53.590

你的界限需要是一个 google.maps.LatLngBounds 对象。
你永远不会建造它。

添加（在您调用 extend 之前的某处）：

```
var bounds = new google.maps.LatLngBounds(); 
```

顺便说一句 - 你应该得到让这一点非常清楚的 javascript 错误。

# filesystems - 是否有文件系统掩码之类的东西？

> ID：11423820
> 
> 赞同：5
> 
> 时间：2012-07-11T00:13:52.060
> 
> 标签：filesystems, windows-server-2008, symlink, mask

我把 Mask 想象成电路 Mask（我想）——让我用一张方便的图表来解释

![掩码图](../Images/6f4d73086fb50b4729e10ec4e7cf4110.png)

共同的来源将在物理上`c:\source`

实例 A 将在物理上，`c:\instanceA`但最初只有符号链接到其中的所有内容`c:\source`

实例 B 将在物理上，`c:\instanceB`但最初只有符号链接到其中的所有内容`c:\source`

当您对 Instance A 和 Instance B 进行更改时，您将创建一个掩码，如果文件从 Instance 文件夹中删除，它将隐藏 CommonSource 中的文件，如果现有的 Common Source 文件被修改，则在实例目录中创建一个新的物理文件。新文件将存在于实例文件夹中，但永远不会回到公共源。

这种类型的设置对于我想要对多个实例进行许多不同类型的小调整的项目非常有用，其中不同的线程将在不同的实例上工作。

我知道符号链接，但在修改文件的情况下它们不够用。

有什么可以做到这一点吗？如果没有，我应该尝试制作这个并申请专利吗？对我来说似乎是个好主意。

我将使用 Windows Server 2008 或更高版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T02:34:36.263

担心我说的很明显，但[git](http://git-scm.com/)是一种可用于实现此行为的工具。

1.  使您的“公共源”成为 git 存储库
2.  将存储库克隆两次到“InstanceA”和“InstanceB”
3.  在每个实例中，检查一个新的、唯一的分支

由于在“公共源”中进行了更改，您可以将这些更改合并到“InstanceA”和“InstanceB”中，同时维护您为每个创建的“MASK” *（对分支的更改） 。*

这有一个额外的好处，即允许根据需要从“公共源”中*提取*更改，而不是将“公共源”的更改*推*送到每个实例*（我认为这不太理想并且更容易出错）*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T16:38:15.393

你正在寻找一个[联合坐骑](https://en.wikipedia.org/wiki/Union_mount)。不幸的是，我不知道有任何适用于 Windows 的实现，但有几个适用于 Linux，尤其是[UnionFS](http://unionfs.filesystems.org/)。

通常，它们用于使只读文件系统看起来像是可读写的：通常在 live-CD 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:16:28.647

从 Windows 7 开始，您可以使用[库](http://windows.microsoft.com/en-us/windows7/products/features/libraries)，这将允许您包含来自多个物理位置的文件。

Windows 7 还包括 VirtualStore 类型的文件夹（例如，在 Program Files 文件夹中创建或修改文件时，它实际上会在用户特定文件夹中创建：C:\Users\user\AppData\Local\VirtualStore。但是 - 我不知道如何自己创建此类文件夹，而且据我所知，您可以添加和修改文件，但不能以这种方式删除文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:13:37.007

您需要一个支持每个文件签出和权限的版本控制系统。然后，您只需要设置一个简单的 API 转换器，它接受文件系统命令并将它们转换为版本控制命令。

删除 -> 禁用访问文件的权限。

目录命令应该查找本地副本和您有权访问的内容。

打开 -> 获取本地副本，从存储库中检出文件失败。

保存 -> 禁用权限，保存本地副本。//避免重复出现。

关闭而不保存 -> 如果有权从存储库访问，则删除本地副本。

（（顺便说一句，这种存储优化对于版本控制似乎有些虚假。磁盘空间相对便宜。

如果您对版本控制不感兴趣，我建议您考虑分离出您可能想要的易失性信息并为每个分支创建配置文件。当然，这需要对变化有可预测的模式。））

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T14:26:33.740

[IBM Rational ClearCase](http://en.wikipedia.org/wiki/IBM_Rational_ClearCase)是执行类似文件掩码行为的版本控制系统。它被称为[MVFS](http://www-01.ibm.com/support/docview.wss?uid=swg21230196)：多版本文件系统，可以像普通网络驱动器一样安装到工作站。

ClearCase 服务器（又名 VOB）您可以存储同一文件的多个版本，每个版本位于不同的代码分支上。用户可见的文件集称为视图。每个视图都有一个配置（又名配置规范），它定义了哪些文件和版本对当前用户可见。典型文件如下所示：

```
# From wikipedia: http://en.wikipedia.org/wiki/IBM_Rational_ClearCase#Configuration_specifications
# Show all elements that are checked out to this view, regardless any other rules.
element * CHECKEDOUT

# For all files named 'somefile', regardless of location, always show the latest version
# on the main branch.
element .../somefile /main/LATEST

# Use a specific version of a specific file. Note: This rule must appear before
# the next rule to have any effect!
element /vobs/project1/module1/a_header.h /main/proj_dev_branch/my_dev_branch1/14

# For other files in the 'project1/module1' directory, show versions
# labeled  'PROJ1_MOD2_LABEL_1'. Furthermore, don't allow any checkouts in this path.
element /vobs/project1/module1/... PROJ1_MOD2_LABEL_1 -nocheckout

# Show the 'ANOTHER_LABEL' version of all elements under the 'project1/module2' path.
# If an element is checked out, then branch that element from the currently
# visible version, and add it to the 'module2_dev_branch' branch.
element /vobs/project1/module2/... ANOTHER_LABEL -mkbranch module2_dev_branch 
```

# shell - using sort command in shell scripting

> ID：11423822
> 
> 赞同：0
> 
> 时间：2012-07-11T00:13:57.880
> 
> 标签：shell, sorting

I execute the following code :

```
for i in {1..12};do  printf "%s %s\n" "${edate1[$i]}" "${etime1[$i]}" 
```

(I retrieve the values of edate1 and etime1 from my database and store it in an array which works fine.)

I receive the o/p as:

```
97 16
97 16
97 12
107 16
97 16
97 16
97 16
97 16
97 16
97 16
97 16
100 15 
```

I need to sort the first column using the sort command.

Expected o/p:

```
107 16
100 16
97 12
97 16
97 16
97 16
97 16
97 16
97 16
97 16
97 16
97 15 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:59:50.760

这是我为找到您的解决方案所做的：

1.  将原始输入复制到 in.txt

2.  运行此代码，该代码使用 awk、排序和粘贴。

```
awk '{print $1}' in.txt | sort -g -r -s > tmp.txt
paste tmp.txt in.txt | awk '{print $1 " " $3}' > out.txt 
```

然后 out.txt 匹配您原始帖子中的预期输出。

要了解它是如何工作的，请查看以下内容：

```
$ paste tmp.txt in.txt
107     97 16
100     97 16
97      97 12
97      107 16
97      97 16
97      97 16
97      97 16
97      97 16
97      97 16
97      97 16
97      97 16
97      100 15 
```

所以你要对第一列进行排序，然后是原始列。awk 可以很容易地打印出您感兴趣的列（字段），即第一和第三。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:30:06.723

这是对数据进行排序的最佳和最简单的方法

```
<OUTPUT> | sort -nrk1 
```

请参阅以下[链接](http://linux.die.net/man/1/sort)以了解有关排序魔法的更多信息。

# ios - 如何抑制 iOS 项目中的所有错误消息？

> ID：11423823
> 
> 赞同：0
> 
> 时间：2012-07-11T00:14:19.370
> 
> 标签：ios, warnings

我包含了一个静态库子项目，其中包含超过 1000 条警告消息，经过测试，这些消息似乎与整个项目无关紧要。对于我不打算接触的这个子项目，我怎样才能抑制这些消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:16:41.727

一种方法是在警告标志中添加 -w（小写）。

这是一个链接： http: [//gcc.gnu.org/onlinedocs/gcc/Warning-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)

# ruby-on-rails - Key/Value Postgres Sql Table Performance

> ID：11423825
> 
> 赞同：1
> 
> 时间：2012-07-11T00:14:36.797
> 
> 标签：ruby-on-rails, postgresql

I am currently building a Rails app where there is a "documents" data table that stores references to pdfs living on an S3 server. These documents could have 100 different types. Each type can have up to 20 attributes or meta info.

My dilemma is do I make 100 relational tables for every doc type or just create one key/value data table with a reference to the doc_id.

My gut tells me to go key/value for flexibility for searching and supporting more and more document types over time without having to create new migrations. However, I know there are pitfalls with this technique. My first concern of course is the size of the table. The key/value table could end up with millions of rows.

On the other hand, having 100 attribute tables would be nightmare to query against in a full text search situation.

So bottom line is, by going with key/value, is performance on a 3 column Postgres table with potentially millions of rows a scaling problem? Also what about joins on the value field?

This data would almost never change by the way. So it would be 90% reads.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:51:37.223

考虑一个带有 hstore 列的表。它是一种 PostgreSQL 数据类型，旨在存储键/值对。

[http://www.postgresql.org/docs/9.1/static/hstore.html](http://www.postgresql.org/docs/9.1/static/hstore.html)

还有多个 Ruby gem 将 hstore 支持添加到 ActiveRecord。这是我写的一个：[https](https://github.com/JackC/surus) ://github.com/JackC/surus您还可以搜索 ruby​​ gems 以找到大约十几个替代品。

# c++ - 编译器优化使程序崩溃

> ID：11423826
> 
> 赞同：8
> 
> 时间：2012-07-11T00:15:09.217
> 
> 标签：c++, qt, g++, compiler-optimization

我正在用 C++/Qt 编写一个程序，其中包含一个图形文件解析器。我`g++`用来编译项目。

在开发过程中，我不断比较我的低级解析器层在关于优化和调试信息的不同编译器标志之间的性能，以及 Qt 的调试标志（打开/关闭 qDebug() 和 Q_ASSERT()）。

现在我面临一个问题，其中**唯一正常运行的构建是没有任何优化的构建**。所有其他版本，即使是`-O1`，似乎也以另一种方式工作。它们由于不满足的断言而崩溃，在没有`-O...`标志的情况下编译时满足。该代码不会产生任何编译器警告，即使使用`-Wall`.

我很确定我的程序中有一个错误，这似乎只有在启用优化时才有害。问题是：即使在调试程序时我也找不到它。解析器似乎从文件中读取了错误的数据。当我运行一些简单的测试用例时，它们运行良好。当我运行更大的测试用例（直接从文件读取的图表上的路线计算）时，文件中的读取不正确，我无法解释。

我应该从哪里开始追踪这种未定义行为的问题？**这种不同的行为可能涉及哪些优化方法？**（我可以一个接一个地启用所有标志，但我不知道那么多编译器标志，但`-O...`我知道它们有很多，所以这需要很长时间。）一旦我知道哪种类型这个错误是，我相信我迟早会找到它。

如果您能告诉我哪些编译器优化方法可能是此类问题的候选方法，您可以帮我很多。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-11T00:41:43.073

在优化构建中通常会出现几类错误，而在调试构建中通常不会出现。

1.  未初始化的变量。编译器可以捕获一些但不是全部。查看所有构造函数，查看全局变量。等等。特别是寻找未初始化的指针。在调试版本中，内存被重置为零，但在发布版本中不是。

2.  使用超出范围的临时人员。例如，当您在函数中返回对本地临时的引用时。这些通常在调试版本中起作用，因为堆栈被填充得更多。临时人员往往会在堆栈上存活更长时间。

3.  数组超出了临时对象的写入。例如，如果您在函数中创建一个临时数组，然后在末尾写入一个元素。同样，堆栈在调试中将有额外的空间（用于调试信息），并且您的溢出不会影响程序数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T00:42:06.310

您可以从优化的构建中禁用一些优化，以帮助更轻松地调试优化版本。

```
-g -O1 -fno-inline -fno-loop-optimize -fno-if-conversion -fno-if-conversion2 \
  -fno-delayed-branch 
```

这应该使在调试器中单步执行您的代码更容易理解。

另一个建议是，如果您的断言没有为您提供有关导致问题的足够信息，您应该考虑添加更多断言。如果您担心性能问题或断言混乱，可以将它们包装在宏中。这使您可以将调试断言与您最初添加的断言区分开来，以便以后可以从您的代码中禁用或删除它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T00:20:45.157

1) 在损坏的版本上使用 valgrind。（就此而言，在工作版本上尝试 valgrind，也许你会很幸运。）

2) 使用“-O1 -g”构建系统并使用 gdb 逐步执行您的程序。崩溃时，哪个变量的值不正确？重新运行您的程序并注意何时写入该变量（或何时未写入且应该写入。）

# ruby-on-rails - Rails 控制器对象.save

> ID：11423828
> 
> 赞同：1
> 
> 时间：2012-07-11T00:15:23.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在通过 Head First Rails 工作，遇到了一些让我有点困惑的代码。代码的目标是检查并查看在创建新记录时是否出现任何错误。如果出现错误，则目标是重新显示页面。如果没有错误，目标是将记录保存到数据库中。这是本书给出的控制器代码：

```
def create 
    @ad = Ad.new(params[:ad])
    if @ad.save
        redirect_to "/ads/#{@ad.id}"
    else
        render :template => "ads/new"
    end
end 
```

这段代码唯一让我感到困惑的是这一行（如果@ad.save）。现在，我知道这条线正在测试是否有错误。如果有，则返回 false，如果没有，则返回 true。但是，我注意到如果不存在错误（它返回 true），则实际上保存了记录。我认为 ruby​​ 中的“if”语句只是测试了一个条件，但在这种情况下，条件正在被测试和执行。奇怪的是，如果我添加另一个 @ad.save，数据库不会两次保存记录。像这样：

```
def create 
    @ad = Ad.new(params[:ad])
    if @ad.save
            @ad.save
        redirect_to "/ads/#{@ad.id}"
    else
        render :template => "ads/new"
    end
end 
```

这段代码的作用与第一段代码完全相同。为什么在第一段代码中执行了@ad.save，而第二段代码中为什么没有执行两次@ad.save（只创建了一条记录）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:37:17.360

`if`您对ruby​​ 语句的假设是不正确的。他们实际上可以执行代码。

```
def return_true
  puts 'inside method'
  true
end

if return_true
  puts "it ran some code"
end

# output will be:
# inside method
# it ran some code 
```

在您的第二个示例中，保存至少运行一次。如果结果`@as.save`是真实的，那么它会第二次运行。如果它正在通过`if`分支的第一部分，那么其他东西会阻止它两次保存到数据库中，但没有足够的信息让我说出原因。可能是你有一个独特的约束。尝试做`@ad.save!`。如果有任何验证错误，bang 版本将抛出错误。

# linux - linux FIFO blocking pipe

> ID：11423835
> 
> 赞同：0
> 
> 时间：2012-07-11T00:16:18.607
> 
> 标签：linux, bash, fifo

If I do the following:

```
mkfifo fifo
some_command < fifo 
```

"some_command" doesn't get spawned before there is data fed through "fifo". How can resolve this without first having to send stuff down the fifo?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:16:59.847

你可以做

```
cat fifo | some_command 
```

# regex - R 正则表达式搜索以捕获 URL

> ID：11423837
> 
> 赞同：2
> 
> 时间：2012-07-11T00:16:53.150
> 
> 标签：regex, r

> **可能重复：**
> [R 正则表达式：http 匹配](https://stackoverflow.com/questions/11413294/r-regular-expression-http-matching)

我正在使用正则表达式从大量源代码中捕获 URL。

URL 遵循某种模式，格式如下：

*   www.google.com/..../1-1,1"
*   www.google.com/..../1-2,2"
*   www.google.com/..../1-20,20"

到目前为止，我可以使用以下代码访问 url：

```
pattern = paste("1-", 1:20,",", 1:20, "\"", sep="") 
```

这给了我一个向量：

*   1-1,1
*   1-2,2
*   ......
*   1-20,20

然后我可以使用这些向量给我一个位置或源代码中的 URL。

例如，假设整个源代码很简单：“ [http://www.google.com/word/1-1,1](http://www.google.com/word/1-1,1) >”

```
`regexpr("1-1,1", test1k, TRUE)` 
```

给我：

> [1] 28 attr(,"match.length") [1] 5

这意味着模式 1-1,1 从长度 28 开始。鉴于此信息，我将如何选择从“ [http://ww](http://ww) ...”开始直到结束“1-1,1>”的整个 URL。

我想我要问的是，给位置 28，是否有一个函数可以向后选择最近的“http://”字符串（这标志着 URL 的开始）。同样，给定位置 28，有没有办法选择最近的“>”字符向前（这标志着 URL 的结尾）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T00:26:51.520

与其创建所有可能的组合，不如使用`\\d`匹配任何数字的字符。例如：

```
 regexpr("1-\\d+,\\d+", test1k, TRUE) 
```

要选择整个 URL，您希望以“http”开头的正则表达式，然后让它继续直到第一次匹配此模式。一种简单的方法是：

```
regexpr("http.*?1-\\d+,\\d+", test1k, TRUE) 
```

该`.*`模式分为三个部分。`.`匹配任何字符，`*`意味着“该字符的任意数量，并且意味着`?`它不是贪婪的（否则，这将占用从第一个 http 到最后一个`1-\\d+,\\d+`.

例如：

```
> regexpr("http.*1-?\\d+,\\d+", "The URL that you are looking for is http://www.google.com/word/1-1,1", TRUE)
[1] 37
attr(,"match.length")
[1] 32
attr(,"useBytes")
[1] TRUE 
```

# javascript - Firefox 和 Chrome/IE 中的 jQuery animate() 不同

> ID：11423839
> 
> 赞同：2
> 
> 时间：2012-07-11T00:17:07.177
> 
> 标签：javascript, jquery, html, cross-browser, srware-iron

目前我正在不同浏览器中测试我的网页的兼容性，但是，我`animate()`在 Chrome（使用 SRWare Iron）和 IE 中遇到了我的 jQuery 问题。

我正在使用以下代码：

**jQuery**

```
$('.element').animate({top:"50px"}, 1400); 
```

**HTML**

```
<h1 class="element">testing text slide</h1> 
```

**CSS**

```
body {
    overflow: hidden;
}
h1 {
    margin: 0;
}
    .element {
    position: absolute;
    bottom: -1000px;
    left: 50px;
    font: bold 72px Arial, sans-serif;
} 
```

我遇到的问题是，在 Firefox (Aurora) 中，`element`从屏幕底部 (-1000px) 滑动到 50px 的顶部锚点。

在 Chrome 和 IE 中，似乎发生的是`element`从顶部的 0px 滑动到顶部的 50px，所以它非常短。如果我删除 jQuery animate for `element`，它的位置是 -1000px （我认为，它不在屏幕上，所以我认为它就在那里）。

有没有人有任何想法？我用它制作动画的其他元素在 FF/IE/Chrome 中正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T00:23:50.977

您应该始终只操作`top`或之一`bottom`。现在您的 CSS 设置`bottom`，然后您的动画更改`top`。由于这两者显然不是独立的，如果你只设置和操纵其中一个，你将更有可能获得一致性。如果您没有为 设置值`top`，那么 javascript 动画可能会获得不一致的起始值`top`，因为动画将从该值开始。它可能会`auto`在某些浏览器中返回，而在其他浏览器中可能会返回一些数值。如果您不依赖尚未设置的值，则可以绕过整个不一致。

由于您的 CSS 设置`bottom`，我建议您`bottom`也设置动画，而不是`top`.

# jsp - 如何使用 标记 在支柱 2

> ID：11423840
> 
> 赞同：5
> 
> 时间：2012-07-11T00:17:13.173
> 
> 标签：jsp, struts2

我可以在 Struts 2 的**s:text标记中使用****s:property**标记吗？问题是，我的 Action 类中有一个**`Map`** 

 **```
Map menuMap = new HashMap<String, String>();
menuMap.put("home()", "lbl.home.home");
menuMap.put("mymodule()", "lbl.home.mymodule");
menuMap.put("adduser()", "lbl.home.adduser");
menuMap.put("changepassword()", "lbl.home.chngPwd"); 
```

地图具有键/值作为`String`，实际上地图中存在的值是`application.properties`文件中存在的键，请参见下面
这是我的 Application.properties 文件

```
lbl.home.home                       = Home
lbl.home.adduser                    = Add User
lbl.home.mymodule                   = My Module 
lbl.home.chngPwd                    = Change Password 
```

现在我想在我的 jsp 中迭代这个映射，并希望从属性文件中获取这些值，方法是将映射的值作为 key 在 application.properties 文件中传递，并将它们显示为标签
，我能够获取密钥但不能能够显示属性文件中的值
这是我的 Jsp 代码：

```
<s:iterator value="menuMap">
 <tr>
   <td>
    <a href="#" onclick="<s:property value="key"/>" ><s:text name="<s:property value='value'/>"/></a>
   </td>
</tr>
</s:iterator> 
```

现在的问题是我能够看到，如果我寻找页面源、标签和被调用但无法将文本视为标签**的函数名称。**`onclick()`我错过了什么吗，请帮助我。
谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T03:04:29.180

它实际上比您尝试的要简单。由于text标签是Struts2标签，name属性支持OGNL表达式，所以不需要使用property标签来获取name，直接OGNL即可：

```
<a href="#" onclick="<s:property value="key"/>" ><s:text name="%{value}"/></a> 
```**

# jquery - jQuery animation cutting images in Webkit browsers, not Firefox

> ID：11423842
> 
> 赞同：0
> 
> 时间：2012-07-11T00:17:18.820
> 
> 标签：jquery, google-chrome, safari

The site in question is [http://bit.ly/7MeLwc](http://bit.ly/7MeLwc)

In the honor roll section, when I view the next set of images in Chrome/Safari, the images seem to be cut up, until I mouse over them. But on Firefox, it works fine!

What could be causing such behavior in Webkit?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:47:58.880

这是一个真正的真正的 webkit 错误。不是你的错，你的代码是正确的，这里的责任在于 webkit 的渲染实现。幸运的是有一个修复！

目前，您正在为 的`margin-left`属性设置动画`#list_wrapper`，这就是造成斩波的原因。所以有一个简单的解决方法和一个更好的解决方法。

**简单的！**

使用 css设置`#list_wrapper`为`position:relative`，然后为`left`属性设置动画，而不是`left-margin`. （实际上margin-left 仍然可以工作，但不是那么好，所以你可以用它`position:relative`来解决这个问题）

这里的缺点是它对浏览器不是很有效（左边距动画也很糟糕）

**更好的！**

设置`#list_visible`为`position:relative`并适当地设置它的高度（否则它将默认为零并且您的列表将消失）。然后设置`#list_wrapper`to并使用该属性`position:absolute`设置动画。`left`

这里的优点是，因为我们正在为一个对象设置动画`position:absolute`，所以它不需要在每个动画帧上重排整个文档，从而实现更高效的动画！

**最好！**

如果您想对它感兴趣，可以查看 css3 过渡并使用`transform`to 来移动幻灯片。这将导致来自 html5 的人的击掌，并且在可能的情况下还具有硬件加速（iPad 动画将是流畅的等），更少的 cpu 使用率和其他类似的细节。

（也是你上厕所吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:26:37.710

它应该通过清除封闭的 ul 来修复，请参阅[http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

```
<div class="photoList">
  <ul class="clearfix">
  <li></li>
  </ul>
</div> 
```

# ios - How can I implement an iOS calendar picker similar to Hipmunk's?

> ID：11423844
> 
> 赞同：0
> 
> 时间：2012-07-11T00:17:31.527
> 
> 标签：ios, calendar, uikit

I'm working on a couple of iOS apps that require the user to select a calendar date, and while the built-in date picker widget is all right, I'd much prefer if users could choose days from a calendar grid, similar to how it works in Hipmunk's iOS app. In that app, users are shown an infinite scroll view showing a grid of days, with each cell showing the month and day. The days of the week are shown in a persistent (i.e. non-scrolling) banner.

In addition to simply showing a calendar, this control should allow dates to be highlighted/selected. Better still, users should be able to select a whole range of dates by tapping on the start and end days' cells, at which the whole range of days should be highlighted.

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:39:30.353

这是一个“无限的” `UIScrollView`，里面有各种其他的观点。[Apple 在他们的StreetScroller](http://developer.apple.com/library/ios/#samplecode/StreetScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011102)项目中提供了一个无限的 UIScrollview 演示。

您将为每天想要显示的各种内容分配和初始化视图，并可能重用顶部的日期视图（当您向左滚动时，您更改日期并将其移到右侧，重用它是 UITableView 传统的方式）。

选择是改变支持您的视图的对象的可见状态的问题。

# r - Smoothing a sequence without using a loop in R

> ID：11423846
> 
> 赞同：2
> 
> 时间：2012-07-11T00:17:50.557
> 
> 标签：r, loops, statistics

I am implementing a statistical method from an academic paper (see the end for a citation) in R. I think there's a way to do one of the steps without using a loop, but I'm having trouble deciding how to attack it.

This method operates on a data frame with three variables: x, n, and p. It can only operate if p[i] <= p[i+1] for all i. If a pair of points violates that, they are smoothed out by setting both p[i] and p[i+1] equal to their weighted average (n[i]*p[i]+n[i+1]*p[i+1])/(n[i]+n[i+1]) This smoothing is iterated until the p_i are a nondecreasing sequence.

The problem with this smooth is that a) loops are bad form in R, and b) if there are multiple points in a row such that p_i > p_(i+1) >= p_(i+2), the method can fail to terminate or take a very long time to converge. For instance, if a sequence like so happens:

```
x  n  p
2  10 0.6
5  10 0.5
10 10 0.5 
```

the smooth will set the first two values of p to 0.55, then the second two to 0.525, then set the first two to 0.5325, and so on and loop forever (or if I'm lucky reach the limit of significance in a bajillion iterations). There should be a mathematically equivalent but more efficient way to do this by identifying adjacent decreasing data points and averaging them as a group, but I'm not sure how to approach that in R.

If you need more background, the paper in question is [Martin A. Hamilton, Rosemarie C. Russo, Robert V. Thurston. "Trimmed Spearman-Karber method for estimating median lethal concentrations in toxicity bioassays." Environ. Sci. Technol., 1977, 11 (7), pp 714–719](http://www.math.montana.edu/~jimrc/classes/stat524/notes/TrimmedSpearmanKarber.pdf). I'm referring to the "first step" section on page 716.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:53:06.633

据我了解该算法，您需要找到`p`减少的位置，并从每个位置开始，找出（累积）加权平均值减少的时间，以便`p`可以逐块更新。如果没有某种循环，我看不出如何做到这一点。某些解决方案可能会将循环隐藏在`lapply`或等效但恕我直言之下，这是那些足够复杂的算法之一，我更喜欢一个好的旧循环。您可能会在效率上有所损失，但代码读起来很好。我的尝试，使用`while`循环：

```
smooth.p <- function(df) {

   while (any(diff(df$p) < 0)) {

      # where does it start decreasing
      idx <- which(diff(df$p) < 0)[1]

      # from there, compute the cumulative weighted average
      sub <- df[idx:nrow(df), ]
      cuml.wavg <- cumsum(sub$n * sub$p) / cumsum(sub$n)

      # and see for how long it is decreasing
      bad.streak.len <- rle(diff(cuml.wavg) <= 0)$lengths[1]

      # these are the indices for the block to average
      block.idx <- seq(from = idx, length = bad.streak.len + 1)

      # compute and apply the average p
      df$p[block.idx] <- sum(df$p[block.idx] * df$n[block.idx]) /
                     sum(df$n[block.idx])
   }
   return(df)
} 
```

这是一些数据，包括您建议的粗略补丁：

```
df <- data.frame(x = 1:9,
                 n = rep(1, 9),
                 p = c(0.1, 0.3, 0.2, 0.6, 0.5, 0.5, 0.8, 1.0, 0.9))
df
#   x n   p
# 1 1 1 0.1
# 2 2 1 0.3
# 3 3 1 0.2
# 4 4 1 0.6
# 5 5 1 0.5
# 6 6 1 0.5
# 7 7 1 0.8
# 8 8 1 1.0
# 9 9 1 0.9 
```

和输出：

```
smooth.p(df)
#   x n         p
# 1 1 1 0.1000000
# 2 2 1 0.2500000
# 3 3 1 0.2500000
# 4 4 1 0.5333333
# 5 5 1 0.5333333
# 6 6 1 0.5333333
# 7 7 1 0.8000000
# 8 8 1 0.9500000
# 9 9 1 0.9500000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T15:08:15.580

按照上面的 Glen_b，汉密尔顿的论文中描述的内容等同于`gpava`CRAN 包中的内容`isotone`。

# php - How to display a default category from a Joomla component list?

> ID：11423849
> 
> 赞同：1
> 
> 时间：2012-07-11T00:18:34.593
> 
> 标签：php, mysql, joomla

Hi I hope this is a simple problem for someone to solve, where I have in my code:

```
 <?php echo $this->lists['cats']; ?> 
```

This will list all the categories available from my JoomGallery category table... I want to select a default category within this i.e. 'users' so when users access the front page the category 'users' will already be in the drop down box. How can I edit the code to do this?

Thanks

Ben

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:25:25.943

在玩了之后，它只是改变了这个值：

```
 $lists['cats'] = JHTML::_('joomselect.categorylist', 1, 'catid', null, null, '- ', null, 'joom.upload'); 
```

感谢@GDP 为我指明了正确的方向

埃迪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:28:29.003

我不知道它使用的是 option.list 还是 genericlist，但[此链接](http://www.ericgoldman.name/web-development/4-joomla/31-how-to-make-drop-down-boxes-select-elements-with-jhtml)将向您展示如何设置它们的默认值。

# ios - High-performance copying of RGB pixel data to the screen in iOS

> ID：11423853
> 
> 赞同：2
> 
> 时间：2012-07-11T00:19:35.517
> 
> 标签：ios, opengl-es, core-graphics, core-video

Our product contains a kind of software image decoder that essentially produces full-frame pixel data that needs to be rapidly copied the screen (we're running on iOS).

Currently we're using CGBitmapContextCreate and we access the memory buffer directly, then for each frame we call CGBitmapContextCreateImage, and then draw that bitmap to the screen. This is WAY too slow for full-screen refreshes on the iPad's retina display at a decent framerate (but it was okay for non-Retina-devices).

We've tried all kinds of OpenGL ES-based approaches, including the use of glTexImage2D and glTexSubImage2D (essentially rendering to a texture), but CPU usage is still high and we can't get more than ~30 FPS for full-screen refreshes on the iPad 3\. The problem is that with 30 FPS, CPU usage is nearly at %100 just for copying the pixels to the screen, which means we don't have much to work with for our own rendering on the CPU.

We are open to using OpenGL or any iOS API that would give us maximum performance. The pixel data is formatted as a 32-bit-per-pixel RGBA data but we have some flexibility there...

Any suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T07:37:30.830

所以，坏消息是你遇到了一个非常棘手的问题。我已经在这个特定领域进行了大量研究，目前，您实际上可以在 2x 下对全屏大小的帧缓冲区进行 blit 的唯一方法是使用 h.264 解码器。一旦您将图像数据解码到实际内存中（查看 GPUImage），就可以使用 OpenGL 完成很多不错的技巧。但是，最大的问题不是如何将像素从实时内存移动到屏幕上。真正的问题是如何将像素从磁盘上的编码形式移动到实时内存中。可以使用文件映射内存将像素保存在磁盘上，但 IO 子系统的速度不够快，无法交换足够多的页面以从映射内存流式传输 2 倍全屏大小的图像。这曾经适用于 1x 全屏尺寸，但现在 2 倍大小的屏幕实际上是 4 倍的内存量，硬件跟不上。您还可以尝试以更压缩的格式（如 PNG）将帧存储在磁盘上。但是，然后解码压缩格式将问题从 IO 绑定更改为 CPU 绑定，您仍然卡住了。请看我的博文[opengl_write_texture_cache](http://www.modejong.com/blog/post12_opengl_write_texture_cache/index.html)以获取我使用该方法找到的完整源代码和计时结果。如果您有一个非常特定的格式，您可以将输入图像数据限制为（如 8 位表），那么您可以使用 GPU 通过着色器将 8 位数据作为 32BPP 像素进行 blit，如本示例 xcode 项目[opengl_color_cycle 所示](http://www.modejong.com/blog/post11_opengl_color_cycle/index.html). 但是，我的建议是看看如何使用 h.264 解码器，因为它实际上能够在硬件中解码这么多数据，并且没有其他方法可能会给您提供您正在寻找的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-12T23:03:50.050

CoreVideo 很可能是您应该关注的框架。使用 OpenGL 和 CoreGraphics 方法，将位图数据从主内存移动到 GPU 内存的成本给您带来了沉重的打击。这种成本也存在于台式机上，但在 iPhone 上尤其痛苦。

在这种情况下，OpenGL 不会为您带来比 CoreGraphics 更快的速度提升，因为瓶颈是纹理数据复制。OpenGL 将为您提供更高效的渲染管道，但纹理副本已经造成损坏。

所以CoreVideo是要走的路。据我了解该框架，它的存在是为了解决您遇到的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-12T00:01:42.807

几年后，在遇到这种需求的几种不同情况下，我决定为 iOS实现一个基本的“[像素查看器”视图。](https://github.com/eldoogy/EEPixelViewer)它支持多种格式的像素缓冲区的高度优化显示，包括 32-bpp RGBA、24-bpp RGB 和几种 YpCbCr 格式。

它还支持所有 UIViewContentMode* 用于智能缩放、缩放以适应/填充等。

该代码经过高度优化（使用 OpenGL），甚至在 iPhone 5 或最初的 iPad Air 等较旧的 iOS 设备上也能实现出色的性能。在这些设备上，除了 24bpp 格式外，它在所有像素格式上都达到 60FPS，它达到了大约 30-50fps（我通常通过以设备的原始分辨率显示像素缓冲区来进行基准测试，因此显然 iPad 必须比 iPhone 推送更多的像素5）。

请查看[EEPixelViewer](https://github.com/eldoogy/EEPixelViewer)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T01:59:12.933

然后，pbuffer 或 FBO 可以用作纹理贴图，以供 OpenGL ES 进一步渲染。这称为渲染到纹理或 RTT。在 EGL 中搜索 pbuffer 或 FBO 的速度要快得多

# jquery - How can I add descriptions to the options in an HTML select box?

> ID：11423854
> 
> 赞同：0
> 
> 时间：2012-07-11T00:19:41.740
> 
> 标签：jquery, user-interface

I'm looking for suggestions of possible ways to handle this user interface question.

I have a form with a select box drop down where a user is selecting a named location from a LONG list of company locations. Some of the options in this list have similar, or potentially identical names, but correspond to locations with different addresses.

For example, there might be options:

```
ABC Company
ABC Company 2nd Floor
BEF INC
BEF INC West
... 
```

What I'd like to do is somehow give the user more info about the select option, either in the select box itself, or maybe as a hover-over tooltip.

Ideally, I'd like the select options to appear as:

```
ABC Company
 abc company 100 east ave ny ny 10231
ABC Company 2nd Floor
 abc company 100 east ave suite 600 ny ny 10231
BEF INC
 bef inc 500 main st boston ma 12345
BEG INC WEST
 beg inc 900 north lane san francisco ca 90121
... 
```

Has anyone solved this problem already with other solution, or have any recommendations on plugins that would help achieve this specific result?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:29:16.560

您应该明确地查看[Select 2](http://ivaynberg.github.com/select2/#ajax)（*加载远程数据*的特殊情况）。它可以生成这样的下拉列表：

![在此处输入图像描述](../Images/954f29d7ee09537333f9542af173a9e7.png)

而且您还可以为您的客户节省时间，因为您可以加载自动完成等元素。

# java - 将 POI 用于 doc 文件时如何解决 NoSuchMethodError

> ID：11423861
> 
> 赞同：4
> 
> 时间：2012-07-11T00:20:53.427
> 
> 标签：java, apache-poi

当我试图实现以下任何代码时

```
File someFile = new File("D:\\arz.doc");
InputStream inputStrm = new FileInputStream(someFile);
HWPFDocument wordDoc = new HWPFDocument(inputStrm);
System.out.println(wordDoc.getText()); 
```

或者：

```
POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream("D:\\arz.doc"));
WordExtractor extractor = new WordExtractor(fs);
String wordText = extractor.getText(); 
```

，错误信息总是如下所示：

```
Exception in thread “main” java.lang.NoSuchMethodError:            
org.apache.poi.poifs.filesystem.POIFSFileSystem.getRoot()Lorg/apache/poi/poifs/filesystem/DirectoryNode;
at org.apache.poi.hwpf.HWPFDocument.(HWPFDocument.java:186)
at DB_connect.dissertation_araalz.ParseWodDocFile.main(ParseWodDocFile.java:29)
Java Result: 1
BUILD SUCCESSFUL (total time: 3 seconds) 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T09:43:28.943

您几乎可以肯定在您的类路径中有两个 POI 副本。一个是包含您要使用的功能的最新版本。另一个是旧版本，没有，而且您的系统似乎更喜欢旧版本......

这是一个很常见的问题，[POI FAQ 涵盖了这种情况](http://poi.apache.org/faq.html#faq-N10006)。理想情况下，只需查看您的类路径，并尝试识别更旧的 POI jar。但是，如果这不起作用，请尝试 POI FAQ 中的这段代码：

```
ClassLoader classloader =
   org.apache.poi.poifs.filesystem.POIFSFileSystem.class.getClassLoader();
URL res = classloader.getResource(
         "org/apache/poi/poifs/filesystem/POIFSFileSystem.class");
String path = res.getPath();
System.out.println("Core POI came from " + path); 
```

这将打印出您正在使用的 POI jar 的文件名，因此您可以确定旧副本的来源并删除它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-03T10:17:33.323

正如@Gagravarr 所指出的，尝试将所有 poi 库的版本更改为通用版本。我用同样的方法修好了。

# android - app ok in Emulator, but crashes in device

> ID：11423864
> 
> 赞同：-1
> 
> 时间：2012-07-11T00:21:16.030
> 
> 标签：android, android-emulator, admob

I have a small problem which i couldn't resolve it by myself. When i launch the app in the emulator, it works fine, but when I try to launch it on device ( SE X10, and Galaxy ACE) the app runs for 2 seconds and crashes. I think it's adMob problem but ..

Here is the logcat:

```
07-11 01:45:05.536: W/Ads(1210): java.net.ConnectException: googleads.g.doubleclick.net/127.0.0.1:80 - Connection refused
07-11 01:45:05.536: W/Ads(1210):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:207)
07-11 01:45:05.536: W/Ads(1210):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
07-11 01:45:05.536: W/Ads(1210):    at java.net.Socket.connect(Socket.java:983)
07-11 01:45:05.536: W/Ads(1210):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:75)
07-11 01:45:05.536: W/Ads(1210):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
07-11 01:45:05.536: W/Ads(1210):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
07-11 01:45:05.536: W/Ads(1210):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
07-11 01:45:05.536: W/Ads(1210):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:294)
07-11 01:45:05.536: W/Ads(1210):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:276)
07-11 01:45:05.536: W/Ads(1210):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:214)
07-11 01:45:05.536: W/Ads(1210):    at b.a(Unknown Source)
07-11 01:45:05.536: W/Ads(1210):    at b.doInBackground(Unknown Source)
07-11 01:45:05.536: W/Ads(1210):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-11 01:45:05.536: W/Ads(1210):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
07-11 01:45:05.536: W/Ads(1210):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
07-11 01:45:05.536: W/Ads(1210):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
07-11 01:45:05.536: W/Ads(1210):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
07-11 01:45:05.536: W/Ads(1210):    at java.lang.Thread.run(Thread.java:1019)
07-11 01:45:05.536: I/Ads(1210): onFailedToReceiveAd(A network error occurred.)
07-11 01:45:07.826: D/AndroidRuntime(1210): Shutting down VM
07-11 01:45:07.826: W/dalvikvm(1210): threadid=1: thread exiting with uncaught exception (group=0x4001d560)
07-11 01:45:07.856: E/AndroidRuntime(1210): FATAL EXCEPTION: main
07-11 01:45:07.856: E/AndroidRuntime(1210): java.lang.NullPointerException
07-11 01:45:07.856: E/AndroidRuntime(1210):     at com.taiic.template.admob.adMain.updateLocation(adMain.java:94)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at com.taiic.template.admob.adMain$1.onLocationChanged(adMain.java:45)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:227)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:160)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:176)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at android.os.Looper.loop(Looper.java:123)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at android.app.ActivityThread.main(ActivityThread.java:3701)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at java.lang.reflect.Method.invokeNative(Native Method)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at java.lang.reflect.Method.invoke(Method.java:507)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
07-11 01:45:07.856: E/AndroidRuntime(1210):     at dalvik.system.NativeStart.main(Native Method)
07-11 01:45:07.876: I/Process(1210): Sending signal. PID: 1210 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:24:20.110

看到了`/127.0.0.1:80`吗？从您尝试连接到本地主机的事物的外观来看，本地主机本身就是设备的上下文。

Android 设备可能没有运行网络服务器，因此您似乎以某种方式错误配置了广告服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:39:47.327

确保您在网络线程上执行网络连接。这通常是像您所描述的那样奇怪崩溃的原因。[**你可以在这里**](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)阅读更多关于它的信息。

您应该*始终*在单独的线程上执行可能长时间运行/昂贵的操作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:48:56.360

在模拟器上，您可以使用 localhost 连接到您的计算机，但在真实设备上，您应该使用计算机的真实 IP 地址 192.168.1.xxx

# objective-c - 通过 NSStream 发送时数据被截断

> ID：11423866
> 
> 赞同：0
> 
> 时间：2012-07-11T00:21:18.090
> 
> 标签：objective-c, ios5, network-programming, nsstream, nscoder

好的，所以我整天都在处理这个错误，我想我已经把它缩小到了根本问题。

# 背景：

我正在开发一个应用程序，该应用程序要求我编写自己的版本，`NSNetService`并`NSNetServiceBrowser`允许在 iOS 5 中通过蓝牙使用 Bonjour。这是一次很棒的冒险，因为在开始这个项目之前我对网络编程一无所知。我从各种示例项目和经典的[Unix 网络编程](https://rads.stackoverflow.com/amzn/click/com/0131411551)教科书中学到了很多东西。我的实现主要基于 Apple 的`DNSSDObjects`示例项目。一旦解决了服务，我添加了代码以实际建立设备之间的连接。An`NSInputStream`和 an`NSOutputStream`是通过 获得的`CFStreamCreatePairWithSocketToHost( ... )`。

# 问题：

我正在尝试通过此连接发送一些数据。数据由一个整数、几个`NSStrings`和一个`NSData`用 存档的对象组成`NSKeyedArchiver`。的大小`NSData`约为 150kb，因此整个消息的大小约为 160kb。通过连接发送数据后，当我尝试取消归档时出现以下异常...

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '*** -[NSKeyedUnarchiver initForReadingWithData:]: incomprehensible archive 
```

经过进一步探索，我注意到接收到的数据只有 2kb 左右。消息被截断，从而使存档“难以理解”。

# 可能相关的代码：

将数据发送到所有连接设备的方法

```
- (void) sendMessageToPeers:(MyMessage *)msg
{
  NSEnumerator *e = [self.peers objectEnumerator];

  //MyMessage conforms to NSCoding, messageAsData getter calls encodeWithCoder:
  NSData *data = msg.messageAsData; 

  Peer *peer;
  while (peer = [e nextObject]) {
    if (![peer sendData:data]) {
      NSLog(@"Could not send data to peer..");
    }
  }
} 
```

Peer 类中实际写入数据的方法`NSOutputStream`

```
- (BOOL) sendData:(NSData *)data
{
  if (self.outputStream.hasSpaceAvailable) {
    [self.outputStream write:data.bytes maxLength:data.length];
    return YES;
  }
  else {
    NSLog(@"PEER DIDN'T HAVE SPACE!!!");
    return NO;
  }
} 
```

用于处理流事件（“接收”数据）的 NSStreamDelegate 方法

此代码中的缓冲区大小为 32768 b/c，这就是我从中学到的任何示例代码中的内容。它是任意的吗？我尝试将其更改为 200000，认为问题只是缓冲区太小，但它没有改变任何东西.. 我不认为我完全理解发生了什么。

```
- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
  switch (eventCode) {

    case NSStreamEventHasBytesAvailable: {
      NSInteger       bytesRead;
      uint8_t         buffer[32768];      // is this the issue?
//    uint8_t         buffer[200000];   //this didn't change anything

      bytesRead = [self.inputStream read:buffer maxLength:sizeof(buffer)];
      if (bytesRead == -1) ...;
      else if (bytesRead == 0) ...;
      else {
        NSData  *data = [NSData dataWithBytes:buffer length:bytesRead];
        [self didReceiveData:data];
      }
    } break;

    /*omitted code for other events*/
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T01:55:08.940

`NSStream`通过这样的网络将使用 TCP 连接。它可能会有所不同，但最大数据包大小通常在 2k 左右。由于您发送的消息实际上是 160k，因此它将被分成多个数据包。

TCP 将其抽象为数据流，因此您可以确定所有这些数据包都将以正确的顺序接收。

然而，`stream:handleEvent:`当只有前 2k 的数据到达时，可能会调用委托方法——它无法知道还有更多的数据到达。

请注意，该方法`read:maxLength:`不能保证您始终获得最大长度 - 在这种情况下，它似乎只给您最多 2k。

您应该计算实际的`bytesReceived`，并将所有数据连接在一起，直到您收到您正在等待的总金额。

接收方如何知道它需要多少数据？– 您可能想要设计您的协议，因此在发送数据之前，您发送一个定义大小的整数，指示即将到来的数据的长度。或者，如果您只通过套接字发送一条消息，您可以在完成后简单地关闭它，并且仅在套接字关闭后让接收方取消归档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:18:07.683

You seem to be reading from self.inputStream but the stream passed into your stream:handleEvent: method is called aStream. Are they referencing the same object somehow? Otherwise I'm not sure you're reading the stream that actually has bytes available

# ruby-on-rails - 我应该在 Ruby on Rails 中的哪里放置静态数据列表？

> ID：11423867
> 
> 赞同：1
> 
> 时间：2012-07-11T00:21:18.943
> 
> 标签：ruby-on-rails

我有一个 Cities、States、Categories 等的静态字符串数组，我的应用程序可以在各个地方访问它。我应该把这个放在哪里？在某个地方的 yml 文件或 lib 目录中的 rb 文件中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:26:29.397

看到这个[问题](https://stackoverflow.com/questions/1107782/wheres-the-best-place-to-define-a-constant-in-a-ruby-on-rails-application)

基本上，将常量放入`/config/initializers`文件`.rb`中。

* * *

编辑：

因此，这并不是真正恒定的数据，因为“几个月一次”信息会发生变化。在这种情况下，您应该将信息放入数据库并缓存它。缓存将防止往返数据库，并且您可以在需要更新信息时使缓存过期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:36:59.093

我建议你把它放在`config/locales/*.yml`文件中。这很好，因为您可以为不同的语言指定不同的城市名称。有关详细信息，请参阅[国际化指南](http://guides.rubyonrails.org/i18n.html)。

# ruby - 带有 ruby gem 的 Google 大查询“缺少必需的参数”

> ID：11423871
> 
> 赞同：0
> 
> 时间：2012-07-11T00:21:36.853
> 
> 标签：ruby, google-bigquery

我正在使用 Google 的[ruby​​ api 客户端](http://code.google.com/p/google-api-ruby-client/)与大查询对话，并且我已经完成了所有设置和工作，除了出现此错误的查询：

```
{"error"=>
  {"errors"=>
    [{"reason"=>"required",
      "domain"=>"global",
      "message"=>"Required parameter is missing"}],
   "code"=>400,
   "message"=>"Required parameter is missing"}} 
```

这就是我所说的：

```
bq = client.discovered_api("bigquery", "v2")

resp = client.execute(
    bq.jobs.query,
    {  "projectId" => "1234",
     "query" => "SELECT count(*) FROM [api_logs.api_logs_week_28__Jul_2012] where timestamp >= 1341817200 and timestamp <= 1341903599"
    }
) 
```

令人沮丧的部分是[查询 api docs](https://developers.google.com/bigquery/docs/reference/v2/jobs/query)，这些完全相同的参数工作得很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:20:31.207

首先--我不知道 ruby​​，但我知道 bigquery，所以我查看了 ruby​​ google drive[示例](http://code.google.com/p/google-api-ruby-client/source/browse/drive/drive.rb?repo=samples)并尝试对其进行调整：

```
 result = client.execute(
    :api_method =>  bq.jobs.query,
    :body_object => { "query" => "SELECT 17" },
    :parameters => { "projectId => "1234" }) 
```

本质上 projectId 需要是一个参数，并且查询需要在 post 数据中。

# html - jqgrid内联编辑显示html标签

> ID：11423872
> 
> 赞同：2
> 
> 时间：2012-07-11T00:21:40.083
> 
> 标签：html, jqgrid, tags, inline

我正在尝试使用 jqgrid 内联编辑功能。但是当触发内联编辑器时，我得到了整个 html 标签。![在此处输入图像描述](../Images/8991e4744fe6a55975735e7746e8404c.png)

可能是什么原因？谢谢。

这是jqgrid代码：

```
$(文档).ready(函数 () {

'使用严格';
变量网格；

网格 = jQuery("#list2");
grid.jqGrid({

    编辑网址：“clientArray”，
    数据链：主题json，
    数据类型：“jsonstring”，
    高度：“自动”，
    loadui: "禁用",
    colNames: [/*"id",*/"Items","nick","url"],
    col型号：[
    //{name: "id",width:1, hidden:true, key:true},
    {名称：“元素名称”，宽度：250，可调整大小：假，可编辑：真}，
    {名称：“nick”，宽度：250，可调整大小：false，可编辑：true}，
    {名称：“网址”，宽度：1，隐藏：真}
    ],
    树网格：是的，
    treeGridModel: "邻接",
    标题：“jqGrid 演示”，
    展开列：“元素名称”，
    //自动宽度：真，
    行数：100，
    //ExpandColClick: true,
    treeIcons: {leaf:'ui-icon-document-b'},
    jsonReader：{
    重复项：错误，
    根：“响应”
    },
    细胞编辑：真，
    cellSubmit: "clientArray",
    onSelectRow：函数（id）{
    if(id && id!==lastSel){
    jQuery('#list2').restoreRow(lastSel);
    最后选择=id；
    }
    jQuery('#list2').editRow(id, true);
    }   

});

});

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:35:30.897

事实证明，您可以`formatCell`在编辑之前使用事件来更改单元格内容。返回值就是你想要的内容。对于这种特殊情况，treeGrid 的小图像包含单元格中的所有 html 标记。编辑单元格时，默认情况下，所有内容都显示为单元格内容。要修复它，您可以执行以下操作：

```
 formatCell: function(rowid,cellname,value,iRow,iCol) {
    return whatever_you_want_to_be;
  } 
```

# makefile - 了解 Makefile

> ID：11423873
> 
> 赞同：3
> 
> 时间：2012-07-11T00:21:44.780
> 
> 标签：makefile

我有以下制作文件：

```
CC = gcc
CCDEPMODE = depmode=gcc3
CFLAGS = -g -O2 -W -Wall -Wno-unused -Wno-multichar
COMPONENTHEADER = Q_OBJECT 
CPP = gcc -E
CPPFLAGS = -I/usr/include/Inventor/annex -D_REENTRANT -I/usr/share/qt3/include  
CXX = g++
CXXCPP = g++ -E
CXXDEPMODE = depmode=gcc3
CXXFLAGS = -g -O2 -fno-exceptions -W -Wall -Wno-unused -Wno-multichar -Woverloaded-    virtual
CYGPATH_W = echo
GUI = QT
Gui = Qt
INCLUDES = 
LIBS = -lSoQt -lqt-mt -lXmu -lXi -lCoin -lGL -lXext -lSM -lICE -lX11 -ldl -lpthread -lm -lcxcore -lcv -lhighgui -lcvaux 
OBJS = MathTools.o PointCloud.o ExtractFeatures.o Tile.o Shape.o RoadDynamic.o
SRCS = MathTools.cpp PointCloud.cpp ExtractFeatures.cpp Tile.cpp Shape.cpp RoadDynamic.cpp main.cpp 
HDRS =  constants.h Shape.h MathTools.h PointCloud.h ExtractFeatures.h Tile.h RoadDynamic.h
WIDGET = QWidget *

all: main

main: main.o ${OBJS}
    ${CC} ${CFLAGS} ${INCLUDES} -o $@ main.o ${OBJS} ${LIBS}

.c.o:
    ${CC} ${CFLAGS} ${INCLUDES} -c $<

depend: 
    makedepend ${SRCS}

clean:
    rm *.o core *~

tar:
    tar cf code.tar  Makefile *.c *.h testfile1

print:
    more Makefile $(HDRS) $(SRCS) | enscript -2r -p listing.ps 
```

我想知道为什么当我运行 make 输出是

```
g++ -g -O2 -fno-exceptions -W -Wall -Wno-unused -Wno-multichar -Woverloaded-virtual -I/usr/include/Inventor/annex -D_REENTRANT -I/usr/share/qt4/include    -c -o main.o main.cpp 
```

代替：

```
gcc -g -O2 -W -Wall -Wno-unused -Wno-multichar ... 
```

似乎 cxx 变量覆盖了 cc 变量。这是为什么？

在这种情况下，“include =”还有什么作用？它似乎没有设置任何东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:25:55.970

因为您的目标文件显然是从 .cpp 文件构建的。您没有从 .cpp 文件构建 .o 文件的显式规则，因此 Make 使用[隐式规则](http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules) `$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c`。

# android - 如何使连接到手机/平板电脑的 USB 指纹扫描仪成功工作？

> ID：11423875
> 
> 赞同：8
> 
> 时间：2012-07-11T00:21:59.463
> 
> 标签：android, sdk, fingerprint

我是最后一年的学生.. 计划为我的最后一年项目做一个 android 应用程序。我计划为讲师做一个考勤管理系统应用程序，我计划将 USB 指纹扫描仪连接到（讲师）Android 手机/平板电脑，Android 版本为 2.3 及更高版本..使用迷你 USB OTG 到 USB 2.0 连接器。我将使用的指纹扫描仪很可能是 Digital Persona U ARE U 4500 USB 指纹读取器或 Upek Eikon 指纹扫描仪。

我真的迷路了，我不知道如何接近以及从哪里开始，从选择合适的 SDK 开始，我怀疑 SDK 是否可以与我的 android 手机以及我将要创建的 android 应用程序工作/兼容。

请..帮帮我先生，....因为我从讲师和在线资源那里收到的资源/信息/提示真的没有帮助。我真的希望你能帮助这个绝望的灵魂。谢谢

平板电脑：Google Nexus 7 手机：http: [//instantcom.my/mobile-devices/m3-touch-n-type](http://instantcom.my/mobile-devices/m3-touch-n-type)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:30:43.500

我认为对你来说最好的选择是用于 android 的神经技术嵌入式 SDK。SDK实际上可以实现您想要做的。在这里转到[他们的网站](http://www.neurotechnology.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:35:54.523

您最好的选择可能是获得摩托罗拉 Atrix（第一个版本，其中包括指纹读取器和使用它的 SDK）或其他内置读取器的手机（现在可能有一些可用，但我不确定）。

如果您唯一的选择是使用连接 USB 的读卡器，您将需要找到有足够功率驱动读卡器的硬件以及可以通过 USB 与 Android 上的传感器通信的 SDK。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-11T01:03:22.547

如果您不太了解为 android 制作应用程序，我会从这里开始。

[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)

SDK 就在这里，我使用 eclipse 的插件，它将所有东西都设置成一个不错的 android 项目。

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

# c# - 使用带有 Json 响应的 HttpWebRequest 发布图像 - WP7

> ID：11423876
> 
> 赞同：1
> 
> 时间：2012-07-11T00:22:23.207
> 
> 标签：c#, windows-phone-7, httpwebrequest

我正在使用在此处找到的一些代码将图像发布到服务器。问题是我没有收到我应该收到的 Json 响应，而是在我的“ResponseReady”回调中收到 OL'SERVER NOT FOUND 响应。（编辑：原来这只是我的参数，这段代码工作得很好。）

这是我用来制作 POST 的课程

```
 public class PostSubmitter
    {

       public string url { get; set; }
       public Dictionary<string, object> parameters { get; set; }
       string boundary = "----------" + DateTime.Now.Ticks.ToString();
       HttpWebRequest webRequest;

       public void Submit()
       {
           // Prepare web request...
           webRequest = WebRequest.CreateHttp(url);
           webRequest.Method = "POST";
           webRequest.ContentType = string.Format("multipart/form-data; boundary={0}", boundary);
           webRequest.BeginGetRequestStream(new AsyncCallback(RequestReady), webRequest);

       }

       private void RequestReady(IAsyncResult asynchronousResult)
       {
           using (Stream postStream = webRequest.EndGetRequestStream(asynchronousResult))
           {
                writeMultipartObject(postStream, parameters);
           }

           webRequest.BeginGetResponse(new AsyncCallback(ResponseReady), webRequest);

       }

       private void ResponseReady(IAsyncResult asynchronousResult)
       {
           try
           {
               using (var response =
                (HttpWebResponse)webRequest.EndGetResponse(asynchronousResult))
               using (var streamResponse = response.GetResponseStream())
               using (var streamRead = new StreamReader(streamResponse))
               {
                   var responseString = streamRead.ReadToEnd();
                   var success = response.StatusCode == HttpStatusCode.OK;

                   if (responseString != null)
                   {
                       //JObject comes from Newtonsoft.Json ddl. This is a good one if your working with json
                       JObject jsonResponse = JObject.Parse(responseString);
                       //Do stuff with json.....
                   }
               }
           }
           catch (Exception e)
           {
               if (e.Message == "The remote server returned an error: NotFound.")
               {
                   webRequest.Abort();
                   Deployment.Current.Dispatcher.BeginInvoke(delegate() { MessageBox.Show("Unable to connect to server at this time, please try again later"); });
               }
               else
                   Deployment.Current.Dispatcher.BeginInvoke(delegate() { MessageBox.Show("Unable to upload photo at this time, please try again later"); });
               return;
           }
       }

       public void writeMultipartObject(Stream stream, object data)
       {
           using (StreamWriter writer = new StreamWriter(stream))
           {
               if (data != null)
               {
                   foreach (var entry in data as Dictionary<string, object>)
                   {
                       WriteEntry(writer, entry.Key, entry.Value);
                   }
               }
               writer.Write("--");
               writer.Write(boundary);
               writer.WriteLine("--");
               writer.Flush();
           }
       }

       private void WriteEntry(StreamWriter writer, string key, object value)
       {
           if (value != null)
           {
               writer.Write("--");
               writer.WriteLine(boundary);
               if (value is byte[])
               {
                   byte[] ba = value as byte[];

                   writer.WriteLine(@"Content-Disposition: form-data; name=""{0}""; filename=""{1}""", key, "sentPhoto.jpg");
                   writer.WriteLine(@"Content-Type: application/octet-stream");
                   writer.WriteLine(@"Content-Type: image / jpeg");
                   writer.WriteLine(@"Content-Length: " + ba.Length);
                   writer.WriteLine();
                   writer.Flush();
                   Stream output = writer.BaseStream;

                   output.Write(ba, 0, ba.Length);
                   output.Flush();
                   writer.WriteLine();
               }
               else
               {
                   writer.WriteLine(@"Content-Disposition: form-data; name=""{0}""", key);
                   writer.WriteLine();
                   writer.WriteLine(value.ToString());
               }
           }
       }
    } 
```

使用这个类，我们可以使用以下代码行对服务器进行简单的 POST：

```
 Dictionary<string, object> postData = new Dictionary<string, object>()
                                                {
                                                    {"file", byteArrayOfImage}
                                                    //You can add other parameters here
                                                };
    PostSubmitter postToServer = new PostSubmitter() { url = getPicturePostUrl(), parameters = postData };
    postToServer.Submit(); 
```

这方面有很多问题......你会认为它们会让复杂的网络请求变得更容易......

提前感谢您的有用评论或随时提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:38:15.640

那么这段代码实际上工作得很好。我只是没有所需的参数之一，因此服务器拒绝了请求。

# android - android in app billing 如何启动服务及几个疑惑

> ID：11423877
> 
> 赞同：0
> 
> 时间：2012-07-11T00:22:32.877
> 
> 标签：android, in-app-billing

我似乎对 Android 的应用内计费有问题

我遵循了这个指南[Android Google Play In-App Billing](http://www.mobileoped.com/2012/04/06/android-google-play-in-app-billing-part-1/)这对设置很有帮助，但我不完全理解

我想知道的是

我可以通过用户单击某个按钮来启动服务吗？我如何启动服务，如果用户没有购买内容，我是否可以设置它，我可能会显示一个对话框并在用户使用时将其销毁有关于应用程序

任何建议或帮助将不胜感激

这是我的代码：

```
package com.IrishSign.app;

import java.util.HashSet;
import java.util.Locale;
import java.util.Set;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

import com.IrishSign.app.BillingService.RequestPurchase;
import com.IrishSign.app.BillingService.RestoreTransactions;
import com.IrishSign.app.Consts.PurchaseState;
import com.IrishSign.app.Consts.ResponseCode;

public class IrishSignAppActivity extends Activity {
    /**
    * The SharedPreferences key for recording whether we initialized the
    * database.  If false, then we perform a RestoreTransactions request
    * to get all the purchases for this user.
    */

    private static final String DB_INITIALIZED = "db_initialized";
    private AppPurchaseObserver appPurchaseObserver;
    private Handler handler;
    private BillingService billingService;
    private PurchaseDatabase purchaseDatabase;

    private Set<String> ownedItems = new HashSet<String>();

    /**
    * The developer payload that is sent with subsequent
    * purchase requests.
    */

    private String payloadContents = null;

    /**
    * Each product in the catalog is either MANAGED or UNMANAGED.  MANAGED
    * means that the product can be purchased only once per user (such as a new
    * level in a game). The purchase is remembered by Android Market and
    * can be restored if this application is uninstalled and then
    * re-installed. UNMANAGED is used for products that can be used up and
    * purchased multiple times (such as poker chips). It is up to the
    * application to keep track of UNMANAGED products for the user.
    */

    private enum Managed { MANAGED, UNMANAGED }

    /**
    * A {@link PurchaseObserver} is used to get callbacks when Android Market sends
    * messages to this application so that we can update the UI.
    */

    private class AppPurchaseObserver extends PurchaseObserver {
        public AppPurchaseObserver(Handler handler) {
             super(IrishSignAppActivity.this, handler);
        }

        public void onBillingSupported(boolean supported) {
            if (Consts.DEBUG) {
                Log.i(TAG, "supported: " + supported);
            }
            if (supported) {
                restoreDatabase();
                //ADD enabling methods or anything else you may need here...
            }
            //YOU can also put a dialog here
        }

        @Override
        public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
               int quantity, long purchaseTime, String developerPayload) {
            if (Consts.DEBUG) {
                Log.i(TAG, "onPurchaseStateChange() itemId: " + itemId + " " + purchaseState);
            }

            if (purchaseState == PurchaseState.PURCHASED) {
                ownedItems.add(itemId);
            }
            //YOU can also add other checks here
        }

        @Override
        public void onRequestPurchaseResponse(RequestPurchase request,
                ResponseCode responseCode) {
            if (Consts.DEBUG) {
                Log.d(TAG, request.mProductId + ": " + responseCode);
            }

            if (responseCode == ResponseCode.RESULT_OK) {
                if (Consts.DEBUG) {
                    Log.i(TAG, "purchase was successfully sent to server");
                }

               //Do something here if you want
            } else if (responseCode == ResponseCode.RESULT_USER_CANCELED) {
               if (Consts.DEBUG) {
                   Log.i(TAG, "user canceled purchase");
               }
            } else {
               if (Consts.DEBUG) {
                   Log.i(TAG, "purchase failed");
               }
            }
        }

        @Override
        public void onRestoreTransactionsResponse(RestoreTransactions request,
                ResponseCode responseCode) {
            if (responseCode == ResponseCode.RESULT_OK) {
                if (Consts.DEBUG) {
                    Log.d(TAG, "completed RestoreTransactions request");
                }

                // Update the shared preferences so that we don't perform
                // a RestoreTransactions again.

               SharedPreferences prefs = getSharedPreferences("idroprbilling",Context.MODE_PRIVATE);//NOTE: Change the idroprbilling to something else
               SharedPreferences.Editor edit = prefs.edit();
               edit.putBoolean(DB_INITIALIZED, true);
               edit.commit();
            } else {
                if (Consts.DEBUG) {
                    Log.d(TAG, "RestoreTransactions error: " + responseCode);
                }
            }
        }

        @Override
        public void onBillingSupported(boolean supported, String type) {
            // TODO Auto-generated method stub

        }
    }

    //NOTE: This may not even apply to your app - copied here but may never be used if only purchasing an UPGRADE or PREMIUM service
    private static class CatalogEntry {
        public String sku;
        public int nameId;
        public Managed managed;

        public CatalogEntry(String sku, int nameId, Managed managed) {
            this.sku = sku;
            this.nameId = nameId;
            this.managed = managed;
        }
    }

    //NOTE: Same as above - An array of product list entries for the products that can be purchased.
    private static final CatalogEntry[] CATALOG = new CatalogEntry[] {
        new CatalogEntry("Upgrade", R.string.upgrade, Managed.MANAGED),
        new CatalogEntry("android.test.purchased", R.string.android_test_purchased, Managed.UNMANAGED),
        new CatalogEntry("android.test.canceled", R.string.android_test_canceled, Managed.UNMANAGED),
        new CatalogEntry("android.test.refunded", R.string.android_test_refunded, Managed.UNMANAGED),
        new CatalogEntry("android.test.item_unavailable", R.string.android_test_item_unavailable, Managed.UNMANAGED),
    };

    /**
    * If the database has not been initialized, we send a
    * RESTORE_TRANSACTIONS request to Android Market to get the list of purchased items
    * for this user. This happens if the application has just been installed
    * or the user wiped data. We do not want to do this on every startup, rather, we want to do
    * only when the database needs to be initialized.
    */
    private void restoreDatabase() {
        SharedPreferences prefs = getSharedPreferences("idroprbilling",MODE_PRIVATE);
        boolean initialized = prefs.getBoolean(DB_INITIALIZED, false);
        if (!initialized) {
            billingService.restoreTransactions();
            Toast.makeText(this, R.string.restoring_transactions, Toast.LENGTH_LONG).show();
        }
    }

    /**
    * Replaces the language and/or country of the device into the given string.
    * The pattern "%lang%" will be replaced by the device's language code and
    * the pattern "%region%" will be replaced with the device's country code.
    *
    * @param str the string to replace the language/country within
    * @return a string containing the local language and region codes
    */
    //NOTE: This method is here for convenience only
    private String replaceLanguageAndRegion(String str) {
        // Substitute language and or region if present in string
        if (str.contains("%lang%") || str.contains("%region%")) {
            Locale locale = Locale.getDefault();
            str = str.replace("%lang%", locale.getLanguage().toLowerCase());
            str = str.replace("%region%", locale.getCountry().toLowerCase());
        }

        return str;

    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        //Now setup the in-app billing</pre>
        handler = new Handler();

        appPurchaseObserver = new AppPurchaseObserver(handler);

        billingService = new BillingService();

        billingService.setContext(this);
        purchaseDatabase = new PurchaseDatabase(this);

        ResponseHandler.register(appPurchaseObserver);
        /**
        * Creates a background thread that reads the database and initializes the
        * set of owned items.
        */

        //Check if billing is supported. (Optional)
        boolean check = billingService.checkBillingSupported();
        setContentView(R.layout.main);

        Button Language = (Button) findViewById(R.id.language);
        Button A = (Button) findViewById(R.id.alphabet);
        Button purchaseableItem = (Button) findViewById(R.id.topics);
        Button purchaseableItem2 = (Button) findViewById(R.id.intro);
        Button G = (Button) findViewById(R.id.about);

        G.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                AlertDialog alertDialog = new AlertDialog.Builder(
                        IrishSignAppActivity.this).setCancelable(false)
                        .create(); // Reads Update
                alertDialog.setTitle("Welcome ");
                alertDialog.setMessage("this is my first dialog box :)");// Change tommorow//

                alertDialog.setButton("Continue..",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int arg1) {
                                Intent our3intent = new Intent(
                                        "com.IrishSign.app.MAIN"); // Change to
                                                                    // revert
                                                                    // back to
                                                                    // menu
                                startActivity(our3intent);

                            }
                        });

                alertDialog.show(); // <-- Shows dialog on screen.
            }

        });

        purchaseableItem2.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent our3intent = new Intent("com.IrishSign.app.Intro");
                startActivity(our3intent);
            }
        });

        purchaseableItem.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                //Now setup the in-app billing</pre>

                boolean val = billingService.requestPurchase("com.irishsign.app.topicvideos", payloadContents, null);

            }
        });

        A.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent ourintent = new Intent("com.IrishSign.app.alpha");
                startActivity(ourintent);

            }
        });

        Language.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent language = new Intent("com.IrishSign.app.Language");
                startActivity(language);

            }
        });

    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:28:08.957

Google 的应用内计费示例实现过于复杂，并且在几个领域使用了非正统的方法。我无法解释他们为什么这样做，但这就是我解决它的方式。

首先，您可以假设该服务已“启动”并准备好在您在 onCreate 中对其进行初始化并为其提供上下文时使用。

您可以使用以下行加载 Google Market 购买屏幕：

```
this.billingService.requestPurchase(<String ID of the in-app product>, null); 
```

如果用户成功购买了该商品，Market 将向 AppPurchaseObserver.onPurchaseStateChange() 广播一条消息，您已设置该消息来监听他们。在 onPurchaseStateChange() 中，您需要做两件事：

1.  将此用户现在拥有此项目的事实存储在应用程序上您自己的数据存储中。

2.  更新当前活动以显示新购买（即，您向用户显示他们不拥有该项目的对话框现在可以关闭。）。因为 AppPurchaseObserver 是活动中的嵌套类，所以 onPurchaseStateChange() 可以访问活动的视图对象。

要意识到的是，无法快速、持续地查询用户从 Market 购买的商品，因此 Google 实际上要求您在收到通知时将此信息存储在您自己的数据存储中（如上文 1\. 所述）。当您加载自己的活动时，您只需查询您自己的用户购买的数据存储并相应地加载正确的视觉提示。

# c# - 使用带有 C# 的 DataContactSerializer 反序列化时出错

> ID：11423879
> 
> 赞同：1
> 
> 时间：2012-07-11T00:22:55.233
> 
> 标签：c#, .net, xml-serialization, datacontractserializer

```
 private string DeSerialize(string studata)
    {
        dcs= new DataContractSerializer(typeof(string));
        try
        {
            using (var q = new StringReader(studata))
            {
                using (XmlReader reader = XmlReader.Create(sr))
                {
                   var k = dcs.ReadObject(reader);
                    return k.ToString();
                }
            }
        }
        catch
         {}
        return string.Empty;
    } 
```

使用上述方法得到运行时错误“第 1 行位置 41 中的错误。从命名空间 'http://schemas.microsoft.com/2003/10/Serialization/'中期待元素'字符串'..遇到'元素'学生命名空间

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T00:26:48.063

当你序列化某些东西时，你将一个对象序列化为某种表示，例如 XML、JSON 等。如果表示不是二进制的，则序列化的结果可以存储在一个字符串中。

您的代码正在尝试获取一个字符串并将其反序列化为一个字符串。那没有意义。

线

```
dcs= new DataContractSerializer(typeof(string)); 
```

声明您要反序列化的*序列化对象*的类型是字符串类型。这可能不是你的意思。

更改`typeof(string)`为`typeof(WhateverTypeIPreviouslySerialized)`。

此外，返回类型`DeSerialize`为`string`. 那也应该是`WhateverTypeIPreviouslySerialized`。

与核心问题无关，我会指出空捕获

```
 catch
     {} 
```

是不好的做法。它将掩盖正在抛出并需要处理的异常。如果您想在序列化失败时返回特定值，请将该值放在 catch 语句中。

# git - 在 git 中搜索签入消息

> ID：11423883
> 
> 赞同：2
> 
> 时间：2012-07-11T00:24:17.387
> 
> 标签：git

git 是否允许您在所有签入消息中搜索查询字符串。

例如，我想获取所有在他们的签到消息中包含“quest”的签到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:28:21.933

我相信您正在寻找：

```
git log -g --grep=search_for_this 
```

类似的问题[在这里](https://stackoverflow.com/questions/746684/how-to-search-through-all-commits-in-the-repository)。

# spring - 以编程方式设置 bean 的属性

> ID：11423892
> 
> 赞同：0
> 
> 时间：2012-07-11T00:25:53.263
> 
> 标签：spring, javabeans

我试图弄清楚如何调整在我的 bean 列表中这样定义的“destroyWorldTask”bean 的“period”属性。这可能吗？这样做的正确方法是什么？

```
<bean id="mytimerfactory"
  class="org.springframework.scheduling.timer.TimerFactoryBean">
    <property name="daemon" value="true"/>
    <property name="myTimerTasks">
        <list>
            <bean class="org.springframework.scheduling.timer.ScheduledTimerTask" id="destroyWorldTask">
                <property name="delay" value="100"/>
                <property name="period" value="10000/>
                <property name="runnable">
                    <bean class="com.scene7.is.util.SafeRunnable">
                        <constructor-arg ref="destroyWorld"/>
                    </bean>
                </property>
           </bean>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:47:53.067

有两种可能的答案：

1\. 如果你想在程序的某个地方设置“句点”属性，你不需要在上下文配置中设置。（我认为不适合您，因为您使用的是春季课程，而不是您的课程）。**2\. 从org.springframework.scheduling.timer.ScheduledTimerTask**

扩展并制作您的课程版本，例如：

 **```
public MyTimeScheduledTimerTast extends ScheduledTimerTask{
     //...
} 
```

并在您的程序中设置该属性。（现在它在你的手中）
然后像这样更新你的上下文配置：

```
<bean id="mytimerfactory" class="org.springframework.scheduling.timer.TimerFactoryBean">
<property name="daemon" value="true"/>
<property name="myTimerTasks">
    <list>
        <bean class="myPackage.MyScheduledTimerTask" id="destroyWorldTask">
              <!-- Set those properties that are not set in your program -->
       </bean>
    </list>
</property>
</bean> 
```**

# java - 一般错误：类不适用于参数

> ID：11423893
> 
> 赞同：3
> 
> 时间：2012-07-11T00:25:53.780
> 
> 标签：java, generics

有人可以向我解释为什么以下代码不起作用吗？

```
public class TestGeneric {

    EntityManager entityManager = new EntityManager();

    public <T extends Textable & Entity> void doAction(T obj) {
        entityManager.getAliasForEntityClass(obj.getClass());
    }
}

class EntityManager {

    public String getAliasForEntityClass(Class<? extends Entity> clazz) {
        return clazz.getCanonicalName();
    }
}

interface Entity {
    Long getId();
}

interface Textable {
    String getText();
} 
```

我收到以下错误：

```
The method getAliasForEntityClass(Class<? extends Entity>) in the type EntityManager is not applicable for the arguments 
 (Class<capture#1-of ? extends Textable>) 
```

如果我这样写，我没有任何错误：

```
public class TestGeneric {

    EntityManager entityManager = new EntityManager();

    public <T extends Entity & Textable> void doAction(T obj) {
        entityManager.getAliasForEntityClass(obj.getClass());
    }
}

class EntityManager {

    public String getAliasForEntityClass(Class<? extends Entity> clazz) {
        return clazz.getCanonicalName();
    }
}

interface Entity {
    Long getId();
}

interface Textable {
    String getText();
} 
```

模板`<T extends Entity & Textable>`和`<T extends Textable & Entity>`手段：T 必须实现 Entity 和 Textable 接口。为什么在这个例子中接口的位置如此重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:00:43.757

原因是擦除`T`是边界中最左边的类型。从`getClass()`文档中：

> 实际结果类型是`Class<? extends |X|>`在哪里擦除调用`|X|`的表达式的静态类型。`getClass`

JLS 规定“类型变量的擦除是其最左边界的擦除”（参见[此处](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)）。所以类型`obj.getClass()`是`Class<? extends Textable>`在第一种情况下，`Class<? extends Entity>`在另一种情况下。

# matlab - Matlab中的system（）函数无法识别参数文件名

> ID：11423895
> 
> 赞同：2
> 
> 时间：2012-07-11T00:26:00.477
> 
> 标签：matlab, arguments, system, parameter-passing, executable

我有一个可执行文件，它在运行时询问参数文件的名称。我尝试了所有输入参数文件名称的方式，但我得到了同样的错误：

```
GAM Version: 2.905 

ERROR - the parameter file does not exist, 
        check for the file and try again   

Stop - Program terminated. 

ans =

     0 
```

参数文件的名称是`gam.par`. 我为自动读取参数文件名称的函数尝试的各种样式是：

```
system('"gam.exe" -f "gam.par"')

system('"gam.exe" -f "gam.par"')

system('"gam.exe" -f gam.par')

system('gam.exe -f gam.par')

system('"gam.exe" /f gam.par')

system('"gam.exe" /f gam.par /o gam.out')

system('"C:\Users\...\gam.exe" /f gam.par /o gam.out')

system(['"C:\Users\...\gam.exe" /f gam.par /o gam.out']) 
```

其中`gam.par`和`gam.par`分别是参数（输入）文件和输出文件。但是，在上述每种情况下，我都会收到与开头所示相同的错误消息。

我所有的文件（输入、输出、可执行文件等）都在同一个文件夹中。如果我使用 system() 函数而不使用参数文件的名称，那么它会正常运行并提示我输入参数文件名，当我`gam.par`在提示符下输入相同的文件名（即）时，一切正常。我希望能够通过在 system() 参数中输入参数文件名来自动执行此操作，而不是在提示时手动输入。如果有人能确定我为什么无法得到我想要做的事情，那将会很有帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:09:32.203

这是一个例子。想象一下，您在以下位置有一个文本文件`C:\filename.txt`：

```
system('type c:\filename.txt') 
```

现在，如果文件的名称（或路径）中有空格，则需要使用双引号：

```
system('type "c:\my filename.txt"') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T00:49:27.217

根据Mathworks 的[这个页面](http://www.mathworks.com/support/solutions/en/data/1-18448/?solution=1-18448)，语法是：

```
system('filename parameter1 parameter2...parameterN') 
```

或者在你的情况下：

```
system('gam.exe gam.par') 
```

注意整个参数周围的单引号以及传递给可执行应用程序的每个参数之间的空格。还有完整的[产品文档](http://www.mathworks.com/help/techdoc/ref/system.html)，但我发现它没有我之前的链接那么清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T09:22:52.597

> 在控制台运行程序：`\\location\My programm.exe 'param 1' 'param 2'`
> 
> 在 Matlab 中运行程序：`system(['location\my proramm.exe' '"param 1"' '"param 2')`

```
pathApplicationForm = strcat('"C:\Users\Master\Google Drive\Bakalaura Darbs\Application Development for the Microscopic Models Calibration\Application Form\bin\Debug\Application Form.exe"');
runParam = strcat(get(vEdit2,'String'), '\', get(vEdit3,'String'));
VISSIM = strcat(get(vEdit1,'String'));
system([pathApplicationForm ' "' VISSIM '" "' runParam '']); 
```

它正在工作^^

# objective-c - UIBezierPath - 动画填充

> ID：11423896
> 
> 赞同：6
> 
> 时间：2012-07-11T00:26:02.240
> 
> 标签：objective-c, ios, uiview, core-animation

我有一个逐步构建的 UIBezierPath （一个圆圈）：

```
[circlePath addArcWithCenter:clockCenter radius:radius startAngle:angleRadians endAngle:1.5*M_PI clockwise:YES];
...
[circlePath closePath];
[COLOR_CIRCLE setFill];
[circlePath fill]; 
```

有时，我想为填充设置动画，以便完全填充并按照路径构建（顺时针）。完成此任务的首选方法是什么？现在我在考虑核心动画，但我希望有一个填充：withDelay 或一些我没有偶然发现的东西。TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:06:14.667

你可以试试这个：

`path`创建一个设置为您的形状的 CAShapeLayer 。将此 CAShapeLayer 用作另一个图层的蒙版，在该图层中绘制填充圆弧/圆。然后动画圆弧/圆弧角度从 0º 到 360º。这可能会接近您想要的效果。

我找不到根据需要为填充设置动画的“内置”方式。但是，有一种内置方法可以为笔画设置动画：

使用带有 CAShapeLayer 支持的 UIView。CAShapeLayer 有一个`path`属性。然后，您可以将动画应用于图层`strokeStart`和/或`strokeEnd`属性。

# networking - 与 Cisco AnyConnect VPN 共享运行 Ubuntu VMplayer 的 Windows 7 主机的 VPN

> ID：11423898
> 
> 赞同：-1
> 
> 时间：2012-07-11T00:26:18.660
> 
> 标签：networking, vmware, vpn, nat, vmware-player

我试图在论坛上搜索任何关于这是否可能的见解，但没有运气。我有一台运行带有 VMware Player 的 Ubuntu 10.04 虚拟机的 Windows 7 主机。当我没有连接到 VPN 时，我的 Ubuntu VM 可以使用 NAT 桥接访问 Internet，方法是将 VMware 网络适配器 8 连接器桥接到 Windows 网络连接对话框中的无线适配器。如果我在不更改任何其他设置的情况下使用 Cisco AnyConnect VPN 在 Windows 主机上连接到我公司的 VPN，则 VM 可以访问 Internet，但无法访问任何 Intranet 机器。

是否可以与 Ubuntu VM 共享这个单主机 VPN 连接？如果是这样，我如何配置 VMware Player 或桥接连接来实现这一点？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-28T08:52:09.950

您必须打开新的网络适配器。
为了这样做；
1\. 右键单击​​您的虚拟机
2\. 在“硬件”选项卡表下单击“添加...”按钮
3\. 选择“网络适配器”并按“完成”按钮
4\. 选择新的网络适配器。它将在您的最后一个
网络适配器下添加新的 numb 。
5\. 从页面右侧，选择“网络连接”选项卡中的“桥接”
6\. 检查“复制物理网络连接状态”
7\. 单击确定
8\. 在主操作系统上运行 vpn，然后运行虚拟机
9 。 享受 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-13T15:21:54.033

我们有一个 draytek 路由器，并在主机上使用 Windows VPN 客户端。这可能取决于 VPN 的类型以及其配置的 IE 安全性等，但对于这种简单的设置，以下内容对我有用。

您应该能够通过使用 NAT 而不是桥接模式与来宾共享主机上的 VPN：

我使用的步骤如下：

1.  从主机连接到 vpn 并验证它是否可以访问
2.  查看 VM 的设置
3.  从硬件列表中选择“网络适配器”
4.  在“网络连接”下选择“NAT：用于共享主机的 IP 地址”选项

虚拟机启动或应用设置后，现在应该可以从来宾访问 VPN。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-14T14:43:07.393

事实证明这是不可能的。您不能在主机和虚拟机之间共享 VPN 连接。

# java - 在 Eclipse 用户界面中在哪里更改列表项背景颜色？

> ID：11423908
> 
> 赞同：3
> 
> 时间：2012-07-11T00:28:38.847
> 
> 标签：java, linux, eclipse, kde

请看这个截图：

[http://imgur.com/mwNLG](http://imgur.com/mwNLG)

我在“颜色和字体”设置下找不到任何地方可以更改列表项背景和前景色的颜色；没有其他 KDE 应用程序显示黑色作为列表背景颜色。

我想把背景颜色改成白色，把前景色改成黑色，请提出您的意见！非常感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T03:51:01.367

在**KDE**中，以防万一有人使用**KDE**，您不必更改主题。您必须在系统设置 > 应用程序外观 > 颜色 > 颜色（选项卡）中更改默认的工具提示背景颜色和文本颜色

向下滚动到工具提示文本和工具提示背景

改变颜色，瞧！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T02:34:52.900

找到解决方案。

颜色在 Eclipse 中没有指定，而是在桌面环境的“GTK 主题”中指定。

默认情况下，KDE4 使用 gtk-oxygen 作为 GTK 主题，主题有奇怪的颜色。所以在 KDE4 Configura Desktop -> "Application Appearance" 我将 GTK 主题更改为 Clearlooks。问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:43:44.520

颜色和字体/任务/任务列表 - 类别渐变底部？

# ios - “应用程序在应用程序启动结束时应该有一个根视图控制器”

> ID：11423909
> 
> 赞同：0
> 
> 时间：2012-07-11T00:28:44.387
> 
> 标签：ios, launching-application

我的应用程序今天早些时候启动良好，现在我收到此错误

> **“应用程序在应用程序启动结束时应该有一个根视图控制器”**

我看过其他线程说要更改我的代码，但我从未更改任何代码来达到这一点。

代表.h

```
@interface halo4AppDelegate : NSObject <UIApplicationDelegate, UITabBarControllerDelegate>{
    UIWindow *window;
    UITabBarController *tabBarController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UITabBarController *tabBarController;

@end 
```

代表.m

```
@implementation halo4AppDelegate

@synthesize window;
@synthesize tabBarController;

#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{   
    sleep(3);
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
}

#pragma mark -
#pragma mark Memory management

- (void)dealloc {
    [tabBarController release];
    [window release];
    [super dealloc];
}

@end 
```

我 FirstViewController 的 xib 是 Titles FirstView.xib , ext

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:34:09.120

这不是错误，更像是警告。

在您的应用程序委托中有一个`application:didFinishLaunchingWithOptions:`在此方法中命名的方法，您必须在方法结束之前制作此行`self.window.rootViewController = [Some UIViewController]`

同样，这不是错误，如果您有另一种创建此 rootViewController 的方法，则可以忽略 rootViewController。

**编辑**

这是您的方法应如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
  UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
  UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
  self.tabBarController = [[UITabBarController alloc] init];
  self.tabBarController.viewControllers = @[viewController1, viewController2];
  self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

# php - 为什么旋转后的图像具有相同的纵横比？

> ID：11423910
> 
> 赞同：0
> 
> 时间：2012-07-11T00:28:51.437
> 
> 标签：php, gd

我正在使用来自 jquery 文件上传的一些 PHP 代码，并且我正在尝试在保存之前旋转图像。下面是我的函数调用：

```
public function CreateThumb($file_name, $options){

    $file_path = $options['src_dir'].$file_name;
    $new_file_path = $options['dst_dir'].$file_name;

    list($img_width, $img_height) = @getimagesize($file_path);

    if (!$img_width || !$img_height) {
        return false;
    }
    $scale = min(
            $options['max_width'] / $img_width,
            $options['max_height'] / $img_height
    );

    $new_width = $img_width * $scale;
    $new_height = $img_height * $scale;
    $new_img = @imagecreatetruecolor($new_width, $new_height);

    switch (strtolower(substr(strrchr($file_name, '.'), 1))) {
        case 'jpg':
        case 'jpeg':
            $src_img = @imagecreatefromjpeg($file_path);
            $write_image = 'imagejpeg';
            $image_quality = isset($options['jpeg_quality']) ?
            $options['jpeg_quality'] : 95;
            break;
        case 'gif':
            @imagecolortransparent($new_img, @imagecolorallocate($new_img, 0, 0, 0));
            $src_img = @imagecreatefromgif($file_path);
            $write_image = 'imagegif';
            $image_quality = null;
            break;
        case 'png':
            @imagecolortransparent($new_img, @imagecolorallocate($new_img, 0, 0, 0));
            @imagealphablending($new_img, false);
            @imagesavealpha($new_img, true);
            $src_img = @imagecreatefrompng($file_path);
            $write_image = 'imagepng';
            $image_quality = isset($options['png_quality']) ?
            $options['png_quality'] : 9;
            break;
        default:
            $src_img = null;
    }

    $src_img = imagerotate($src_img, 90, 0) ;

    $success = $src_img && @imagecopyresampled(
            $new_img,
            $src_img,
            0, 0, 0, 0,
            $new_width,
            $new_height,
            $img_width,
            $img_height
    ) && $write_image($new_img, $new_file_path, $image_quality);

    // Free up memory (imagedestroy does not delete files):
    @imagedestroy($src_img);
    @imagedestroy($new_img);

    return $success;
} 
```

图像被旋转，但仍保持其原始纵横比并裁剪照片。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:02:22.937

您的问题在于如何设置新值：

```
$new_width = $img_width * $scale;
$new_height = $img_height * $scale; 
```

如果旋转 90 度，应该是：

```
$new_width = $img_height * $scale;    // reverse height and width
$new_height = $img_width * $scale;    // reverse height and width 
```

**编辑：**并且随着原始图像的旋转，旧的宽度和高度必须颠倒：

```
$success = $src_img && @imagecopyresampled(
        $new_img,
        $src_img,
        0, 0, 0, 0,
        $new_width,
        $new_height,
        $img_height,    // reverse width and height
        $img_width      // reverse width and height
) && $write_image($new_img, $new_file_path, $image_quality); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:37:15.737

请注意：如果您要使用这么多 @ 来忽略错误，您不妨将其放在`error_reporting(0);`代码的开头。

其次，我看到像素比没有变化的原因是因为你`$scale`是倒退的。你说它`scale = Whole/Part`几乎总是会给你一个大于 1 的值（增加像素比），除非最大尺寸小于图像尺寸。你会希望它是`scale = Part/Whole`一个十进制比率（即 100 像素/400 像素，比例 = .25）。

祝你好运！

# c# - C#：通过引用或整个对象正常传递对象的结构？

> ID：11423915
> 
> 赞同：1
> 
> 时间：2012-07-11T00:29:55.450
> 
> 标签：c#, parameters, pass-by-reference

如果我有一个对象，我只需要访问它的特定部分，我应该只传递那个特定部分还是应该传递整个对象？

就我而言，我正在使用 XNA 使用 C# 构建游戏，并且我需要访问“DrawLayer.cs”中 Camera 类的“边界”，该类绘制单个图层（假设由于视差而存在多个图层）游戏画面上。相机的“边界”作为以下属性存在：

```
 public Rectangle Bounds { get { return onScreenCamera.Bounds; } } 
```

该游戏是一款多人游戏，有一个摄像头，可以根据玩家的动作在玩家之间跳转，因此“onScreenCamera”引用了当前需要使用的摄像头。此外，根据您的播放器类型，相机的功能会有所不同，因此我制作了一个接口 ICameraSetup.cs，我正在讨论的相机实现了该接口。这是 ICameraSetup 接口：

```
interface ICameraSetup
{
    Vector2 Position { get; }
    Rectangle Bounds { get; }

    void Update(GameTime pGameTime);
} 
```

使用 DrawLayer.cs，我想像这样编写构造函数头（注意 Rectangle 是一个结构，这应该意味着它是一个值类型）：

```
 public DrawLayer(ref Rectangle pBounds) 
```

然后使用构造函数调用，就像这样：

```
 new DrawLayer(ref levelState.Camera.Bounds) 
```

这只会将相机的边界传递给 DrawLayer.cs，但我似乎收到了这个错误：“属性 Game.Camera.ICameraSetup.Bounds 没有设置器。” 问题是，我不希望接口为 Bounds 声明一个 setter，因为唯一应该能够设置边界的类是 Camera 类，而 Bounds 的设置方式是通过上面提到的 camera 类中的私有变量，称为“onScreenCamera”。

但是，即使我将 Set 添加到 Bounds 属性，我仍然在 DrawLayer.cs 构造函数调用时收到此错误：“'ref' argument is not分类为变量。”

现在，我知道一种可行的解决方案是将整个相机传递到 DrawLayer.cs 并从那里使用边界，如下所示：

```
 public DrawLayer(ICameraSetup pCamera) 
```

然后

```
 new DrawLayer(levelState.Camera) 
```

然后使用Camera.Bounds，但这似乎没有必要，因为我需要的只是该类中的边界。

我可能遇到的另一个问题是我对传递引用的理解。我理解当您需要一个值类型引用以随时更新您传递给它的类之外的值所做的任何更改时，它很有用，但我也读到它是相反的：使用它在最初声明的位置之外更改值类型并使其保持不变。

那么我在将相机边界传递到 DrawLayer 时是否犯了一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:38:46.230

您忽略了第一个错误：

> 属性、索引器或动态成员访问不能作为 out 或 ref 参数传递。

此外，以这种方式通过引用传递参数意味着可以设置它，但不能设置，因为您没有为该`Bounds`属性定义公共设置器。所以，我们有两个问题。

我很困惑; 你为什么试图通过引用来传递它？您希望存储对此对象的引用，以便以后可以更改（仅供参考：您不能）？老实说，对我来说，这听起来像是一个糟糕的设计。这似乎不是性能问题，所以我建议调整您的设计。

当你遇到这样奇怪的事情并且变得笨重/不能很好地工作时，这通常意味着你手上有一个设计问题。不要试图通过引入更多设计问题来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:01:20.630

您不能通过引用传递属性。这是有道理的，因为属性不是变量——它们由编译器实现为 getter/setter 方法。

但是，您可以将 Bounds 属性更改为字段，或创建一个局部变量来保存 Bounds 的值，然后可以使用“ref”关键字传递它。

通过 'ref' 传递某些内容的主要原因是，如果您需要能够更改变量的任何部分，包括用新实例替换变量，并且您希望这会反映在调用代码中。

如果您只想访问 Bounds，请不要使用 'ref'。如果 Bounds 是一个结构，并且出于性能原因不想复制它，请考虑将 Bounds 设为一个类。

# mysql - MySQL 合并 2 个具有相同 Id 值的表

> ID：11423921
> 
> 赞同：1
> 
> 时间：2012-07-11T00:31:28.457
> 
> 标签：mysql, merge

我有一个 MySQL 数据库，它有 2 个表，这些表具有我需要合并到 1 个表的相关信息。

`Gallery`有一个与*Id相关的**itemid*。这两个表都有不同的列名，但都有唯一的数据。我想根据*Id*和*itemid*列合并两个表。`rbitems` *`gallery``rbitems`*

 ***那么如何根据具有唯一值的 1 列将 2 个不同的表合并为 1 个。我只想将其他表附加到合并中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:54:33.440

```
CREATE TABLE new_table
AS (SELECT g.itemid, g.a, g.b, g.c, r.x, r.y, r.z 
    FROM gallery g INNER JOIN rbitems r
    ON g.itemid = r.id
); 
```

您可能希望将“AS 名称”添加到 select 子句的成员中。如果您有原始表的元素未在另一个表中表示，您应该查看 RIGHT、LEFT 或 OUTER JOIN 而不是 INNER。这假定 itemid 和 id 列是唯一的——给定的 itemid/id 在同一个表中不会多次存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:45:23.300

你可以用它`JOIN`来解决你的问题。

```
SELECT a.*, b.*
FROM   galley a INNER JOIN rbitems b
          on a.itemid = b.id 
```***

# air - 在 Kindle Fire 上调试 Adob e AIR 应用程序

> ID：11423923
> 
> 赞同：0
> 
> 时间：2012-07-11T00:31:35.197
> 
> 标签：air, kindle-fire

可能的？

我认为要做到这一点，我需要将 Fire 上的 AIR 运行时升级到 3，但不会安装应用商店中的版本。我无法创建我所知道的既是强制运行时又是调试的 AIR apk，因此应用程序的调试版本必须在安装的 AIR 运行时上运行。由于 Fire 带有 2.7，3.x 应用程序不会在调试模式下运行。

有没有人设法在不使用强制运行时的情况下让 AIR 3 在火上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:39:02.703

要更新 KF 上的 AIR，您必须获得 root 权限。还要记住，在 KF 上构建的 android 没有任何复制命令（它被切断了）。所以我发现最好的方法是用修改过的（预先root过的）股票版本来刷你的KF，然后安装新的空气。

1.  获取预先根植的股票版本（我在[这里](http://forum.xda-developers.com/showthread.php?t=1569298)拿了它）。重要提示：它通过 TWRP 安装，谷歌如何在 KF 上安装 TWRP。
2.  将下载的 .zip 和 air_runtime.apk（最新的 AIR 版本）放在 KF 的根目录中。
3.  在恢复模式下重新启动（应该加载 TWRP）
4.  闪这个版本。
5.  在您的 PC 上打开 cmd 并运行“adb shell”（确保在运行“adb devices”时在列表中看到您的设备，否则检查驱动程序）。
6.  运行“su”（如果您下载了安全版本）。
7.  在 shell 中转到 sdcard（“ls”获取文件/文件夹列表和“cd folder_name”进入）并运行“install air_runtime.apk /system/app/air_runtime.apk”（我认为你可以运行“install /sdcard/folder_with_air/air_runtime.apk /system/app/air_runtime.apk”）。(7a. 如果它告诉你因为文件已经存在而无法安装，运行以下两个命令："mount -o remount rw /system" (mount 'system' with read/write rights) and "mv /system/ app/air_runtime.apk /system/app/air_runtime.bak”（将 air_runtime.apk 重命名为 air_runtime.bak）。然后重复步骤 7。）
8.  在 KF 中只需运行（安装）air_runtime.apk（使用任何文件资源管理器，例如从 Amazon 下载 ES File Explorer）。
9.  检查应用程序中的 AIR 版本。

就这样。看起来有点复杂，但实际上更新 AIR 大约需要 4-5 分钟（但我已经安装了 TWRP）。

希望能帮助到你。

UPD。在您的 Kindle 自行更新（目前为最新版本 6.3.1）后，您将失去 SU 权限。AIR 也将回滚到 2.7。您可以阻止 KF 自动更新（在 xda 上搜索如何操作）或刷新实际的预根版本（它可以让您几个月没有问题）。

# css - 是否有没有缺点的横向表格布局的 CSS 替代方案？

> ID：11423925
> 
> 赞同：6
> 
> 时间：2012-07-11T00:31:38.050
> 
> 标签：css, semantic-markup

我的老板希望我停止使用 CSS 布局并开始使用表格布局。其中一个主要因素是表格在水平放置的流畅布局中的理想行为。看这个例子：

*   [http://jsfiddle.net/CXSS2/2/](http://jsfiddle.net/CXSS2/2/)

如果您将 HTML 面板的宽度滑动得更窄，您会看到表格（第一个）有几个方便的特性：

1.  自动寻找分割两个单元格的好位置，让内容较多的单元格占可用宽度的百分比更大。
2.  100% 填充所有可用宽度。
3.  在决定要包装哪些单元格时，它会以最有效的方式来处理垂直空间。
4.  无论如何保持两个单元格水平对齐。

**示例 A 没有质量 1**。（如果内容大小发生变化，您必须手动更新比率。）

**示例 B 没有质量 1 或 3**。（静态 50% 不太理想，但可以工作。但是，它会中断为 3 行，而表格仍然只有 2 行高。）

**示例 C 没有质量 2 或 4**。（我可以看到用这个来伪造质量 2 的方法，但是清除到下一行完全是一个交易破坏者。）

**示例 D 没有质量 1 或 4**。（从技术上讲，它有 1，但两者之间的巨大差距是不切实际的。此外，在同一行上的左/右浮动在某些浏览器中效果不佳。）

由于数据*不是*语义表格，我真的想避免使用表格。但是我的老板付钱给我，所以我需要按照他说的去做或找到更好的解决方案。有没有办法使用语义标记和 CSS 来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T00:48:35.203

更新：对于所有浏览器 > ie7，您可以使用`display: table, table-row, table-cell`. jQuery 代码将以 ie7 为目标，然后将 div 替换为适当的表格元素。

如果这是您迄今为止遇到的唯一问题，那么您不应该安装一些愚蠢的网格系统来解决这个问题。这是矫枉过正和浪费时间。

[http://jsfiddle.net/CoryDanielson/yuNTX/](http://jsfiddle.net/CoryDanielson/yuNTX/)

示例 html

```
<div class="table width100pct">  <!-- .table should have NO style. just 'display: table' -->
    <div class="tr">
        <div class="td"></div>
        <div class="td"></div>
    </div>
</div>​
<!-- class="table, tr, td" is ONLY for changing display: table, table-row and table-cell.
you SHOULD NOT include any styles inside of these CSS selectors. These classes will 
be removed when the divs are transformed into <table>, <tr>, <td>
-->

//conditionally load the javascript patches for ie7
<!--[if IE 7]><script src="/js/IE7fixes.js"></script><![endif]--> 
```

IE7fixes.js

```
$(document).ready(function(){
  //comment out the if statement to check functionality without ie7    
  if ($.browser.msie && $.browser.version == 7) {
      $('html').addClass('ie7') //<html class="ie7">.. like modernizr
      var elem, elemClass    
      $('div.table').each(function(i, elem) {
          elem = $(elem)
          elemClass = elem.removeClass('table').attr('class') || ''
          elem.wrapInner("<table class='" + elemClass + "' />").children().unwrap()
      })
      $('div.tr').each(function(i, elem) {
          elem = $(elem)
          elemClass = elem.removeClass('tr').attr('class') || ''
          elem.wrapInner("<tr class='" + elemClass + "' />").children().unwrap()
      })  
      $('div.td').each(function(i, elem) {
          elem = $(elem)
          elemClass = elem.removeClass('td').attr('class') || ''
          elem.wrapInner("<td class='" + elemClass + "' />").children().unwrap()
      })
  }                    
});​ 
```

你应该像我的那样构建你的 CSS

需要的 CSS

```
table, div.table { width: 100%; }
tr, div.tr { vertical-align: top; }
/* the following 3 classes will be dropped when transformed in ie7
   but that won't matter because they'll fall back to <table><td><tr>
 */
div.table { display: table; } /* NO STYLES HERE */
div.tr { display: table-row; } /* NO STYLES HERE */
div.td { display: table-cell; } /* NO STYLES HERE */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:50:39.537

多年来我没有使用表格来布置网站的非表格内容，所以我可能在这里遗漏了一些东西，但我有一些替代方案和想法。

抽象一下：听起来根本问题是您的老板希望您使用一种比您当前使用的更快的 Web 开发技术，允许您实现相同的布局，并且他不关心语义标记。

我认为 CSS 或网站构建框架，如 Twitter Bootstrap 或 960gs（注意：960gs 包含在 Bootstrap 中）可用于实现相同的目标，而不是基于表格的布局。这些框架确实有一些非语义标记，例如 div 包含行和 span 来设置宽度和偏移元素，但在可访问性和非语义标记的数量方面比使用表格更好。

您还可以通过为元素提供 id 和其他类并对其进行样式设置来缓解这种情况，并且与使用基于表格的布局相比，非语义标记更少。

脱离我对根本问题的解释，像其中任何一个这样的框架还为您提供了预先设置样式的元素和一种很好地分隔元素的方法，这将节省您在整体设计 -> 代码 -> 修订周期中的时间，而这些都没有违背了 Web 开发的最佳实践。

**Twitter Bootstrap 的一些资源：http:**
[//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/) - 有下载和良好的文档
[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html) - 您将在 Bootstrap 中使用的代码示例而不是基于表格的布局

**960gs（960px 宽网格系统）：**
960.gs/ - 主页
[https://speakerdeck.com/u/nathansmith/p/960-grid-system](https://speakerdeck.com/u/nathansmith/p/960-grid-system) - 权威的 960gs 教程和使用它的原因
[http://sixrevisions .com/web_design/the-960-grid-system-made-easy/](http://sixrevisions.com/web_design/the-960-grid-system-made-easy/) - 我第一次用来学习网页设计中的网格系统的教程

如果我最初的假设是错误的，对不起！此外，如果您有任何问题或想了解更多信息，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T01:04:20.800

你有没有尝试过诸如[基础](http://foundation.zurb.com)之类的 CSS 框架？它胜过在表内的 td 内的表内的 td ...（：

# objective-c - ARC（自动引用计数）的运行时间检查

> ID：11423926
> 
> 赞同：1
> 
> 时间：2012-07-11T00:31:41.310
> 
> 标签：objective-c, ios4, automatic-ref-counting

如何检查我的程序是否在 ARC（自动引用计数）设备中运行？

我可以使用这段代码：

```
#if ! __has_feature(objc_arc)
#    define FMDBRelease(__v) ([__v release]);
#else
#    define FMDBRelease(__v)
#endif 
```

但这在编译时起作用。一个简单的代码是：

```
if ([object respondsToSelector:@selector(release)]) {
    [object release];
} 
```

但不行。我在任何地方都找不到它。有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T00:35:26.597

ARC 是一种编译时技术，因此`#if __has_feature(objc_arc)`方法是正确的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T00:35:36.277

你不能。ARC 是一个编译时工具。它在运行时没有真正的存在，除了插入允许尾调用优化的调用。

# java - 方法的 JNI 样式签名

> ID：11423927
> 
> 赞同：2
> 
> 时间：2012-07-11T00:31:45.003
> 
> 标签：java, java-native-interface

如何生成方法的 JNI 样式签名？我需要它作为这个特定类的函数 sendMessage(...) 的参数：

[http://publib.boulder.ibm.com/infocenter/rsmhelp/v7r0m0/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/debug/core/IJavaObject .html](http://publib.boulder.ibm.com/infocenter/rsmhelp/v7r0m0/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/debug/core/IJavaObject.html)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T00:35:25.530

使用`javap -s`. 您可以按照 JNI 规范中的规则手动完成，但最好的情况是您只会`javap -s`在几秒钟内想到会告诉您的内容，最坏的情况是您会弄错并陷入调试噩梦。

# java - 作业异常处理问题

> ID：11423928
> 
> 赞同：1
> 
> 时间：2012-07-11T00:32:30.913
> 
> 标签：java, applet, try-catch

我正在尝试为班级创建一个小程序。

我应该处理两个可能的用户输入错误。我已经用 if/else 语句处理了除以零。

然而。如果用户尝试将字母或符号而不是数字放入文本框中，我正在尝试处理异常......但我的 catch 语句不会发现问题。相反，它执行除以 0 else 语句。请看一下，让我知道您是否可以提供帮助

```
 /*
 * Curtis Sizemore
 * IT 259 - Intermediate Java
 * Unit 8
 * Working with Applets
 * I attest that this is a product of my own creation.
 * 
 */
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JTextField;

/**
 *
 * @author Curtis
 */
public class JDivide extends JApplet implements ActionListener
{
JTextField numer = new JTextField(5);
JTextField denom = new JTextField(5);
JLabel intro = new JLabel("Please enter two numbers.");
JLabel num = new JLabel("Numerator: ");
JLabel den = new JLabel("Denominator: ");
JLabel result = new JLabel();
JButton solve = new JButton("Click Me to Solve!");
Container con = getContentPane();
double numerator;
double denominator;
 double quotient;
 String n;
String d;
 String q;

@Override
public void init()
{
    con.setLayout(new FlowLayout());
    con.add(intro);
    con.add(num);
    con.add(numer);
    con.add(den);
    con.add(denom);
    con.add(solve);
    con.add(result);
    solve.addActionListener(this);
}

@Override
public void actionPerformed(ActionEvent e) 
{

      n = numer.getText();
      d = denom.getText();
    try
      {
      double numerator = Double.parseDouble(n);
    double denominator = Double.parseDouble(d);
      }
      catch(NumberFormatException x)
      {
      result.setText("Numbers Only Please.");
      }

      if(denominator==0)
      {
      result.setText("Division by 0 is undefined.");
      }
      else
      {
      double quotient = numerator/denominator;
      q = Double.toString(quotient);
      result.setText(q);
}
 }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:34:36.487

您需要将其余代码放在 try 块中，或者抛出异常。否则，即使输入了非数字，该方法仍将尝试计算商。

# php - MySQL如何检查多个值，并返回与它们匹配的行和信息

> ID：11423933
> 
> 赞同：0
> 
> 时间：2012-07-11T00:33:26.233
> 
> 标签：php, mysql

我的 MySQL 设置中的一列称为 favColors。它只是一个 VARCHAR 列，我在其中为每个用户保存一个带有 favColors 的 JSON 字符串。很简单。

假设这是用户 A 的`favColors`： `["red","green","cyan","silver","gold"]`

这是用户 B 的`favColors`： `["pink","green","blue","brown","yellow"]`

这是用户 C 的`favColors`： `["tan","green","blue","brown","yellow","violet"]`

用户 B 想查询其他颜色相同的用户。但我有兴趣找到最佳匹配。

我想我可以使用这样的东西...... `WHERE MATCH (favColors) AGAINST ('$userBsJSONString' IN BOOLEAN MODE)`

但是，我想让结果重新调整，按哪些行匹配最多，并且我想知道它们匹配的是什么颜色。

所以基本上我可以做类似“嘿，你们都喜欢“绿色”、“蓝色”、“棕色”、“黄色”之类的事情！

进行可以返回此信息的查询的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:41:12.227

您不能使用当前的数据布局。

你在这里得到了非常不规范的数据。要进行所需的分析，您还需要两个表。

第一张桌子是彩色的。每种颜色都有一个唯一的 ID 和颜色名称。

下一个表将是一个关联表。每行将是一个用户 ID 和一个颜色 ID，表示该用户喜欢该颜色。

然后，像这样的查询：

```
SELECT userID, COUNT(colourID) FROM associationTable 
   WHERE colourID IN (<list of IDs that belong to user of interest)
   GROUP BY userID 
```

对于每个`userID`，您都会计算匹配的颜色数量。数字越高，匹配越好

# javascript - javascript removechild

> ID：11423934
> 
> 赞同：3
> 
> 时间：2012-07-11T00:33:27.847
> 
> 标签：javascript

我正在尝试删除隐藏元素。我尝试了以下代码，但它总是将父级返回为未定义。

尝试一

```
var timeLeft = document.getElementById("time");
timeLeft.document.removeChild(timeLeft); 
```

尝试两次

```
var timeLeftBody, timeLeft;
timeLeftBody = document.getElementsByTagName("body")[0];
timeLeft = document.getElementById("time");
timeLeft.timeLeftBody.removeChild(timeLeft); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T00:39:50.593

`removeChild()`仅适用于直接包含子元素的元素——除非文档直接包含该元素（这是不可能的，除非是节点） ，否则`document.removeChild(hdr)`将不起作用。`time``time``html`

尝试：

```
var timeLeft = document.getElementById("time");
timeLeft.parentNode.removeChild(timeLeft); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:38:28.700

改变这个：

```
timeLeft.timeLeftBody.removeChild(timeLeft); 
```

...对此：

```
timeLeftBody.removeChild(timeLeft); 
```

基本上，你是在不必要地把东西链接在一起。您要遵循以下基本格式：

```
var parent = document.getElementById('idOfParentNode');
var child = document.getElementById('idOfNodeToRemoveFromParent');
parent.removeChild(child); 
```

# mongodb - 为远程用户密码保护 mongodb 数据库的最简单方法是什么？

> ID：11423942
> 
> 赞同：10
> 
> 时间：2012-07-11T00:34:39.893
> 
> 标签：mongodb

我的服务器上运行着一个 mongodb，对于到数据库的本地连接，我不需要任何密码来保护它（即在同一台物理机器内，这意味着通过 127.0.0.1 ip 地址连接到服务器）。

但是我不希望网络中的其他人能够在没有密码的情况下连接到我的数据库，只有授权用户才能连接到我的数据库。所以我想为远程用户做密码保护。

怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T01:28:08.750

目前monogdb不支持基于用户位置的身份验证模式。所以这意味着如果你运行`mongod`它`--auth`，它将适用于每个人。

（还没有）高级身份验证模式，如 IP、协议源等。现在您只能定义用户是否对数据库具有只读或写权限。所以基本上mongodb唯一关心的是你是否为正确的用户输入了正确的密码。

我个人建议在所有生产环境中使用安全模式，因为即使您只允许来自本地主机的连接，任何有权访问本地服务器的用户或主机上的任何恶意脚本都可以轻松擦除您的所有数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T01:25:29.923

MongoDB[安全和身份验证](http://www.mongodb.org/display/DOCS/Security+and+Authentication)页面包含有关配置用户身份验证和防火墙设置的信息。

请注意，当您为数据库启用密码身份验证时，身份验证要求将适用于本地和远程用户（因此您还需要通过本地 IP 使用密码进行连接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-01T21:28:00.077

MongoDb 没有提供一种简单的方法来保护数据库。我认为这就是为什么网络上有成千上万的 mongodb 实例不受黑客保护的原因

# asp.net - ListView DataPager 不分页

> ID：11423943
> 
> 赞同：0
> 
> 时间：2012-07-11T00:34:45.520
> 
> 标签：asp.net, listview, linq-to-entities, datapager

ListView 显示正确，DataPager 显示底部的按钮，但是当我单击 NEXT 按钮时，DataPager 不会转到下一页数据。

**ASPX 页面：**

```
 <div id="EventListing">
        <asp:ListView ID="ListEvents" runat="server">
            <LayoutTemplate> 
                <div ID="itemPlaceholder" runat="server">
                </div>
                <div id="pagerFormat">
                     <asp:DataPager ID="ListingDataPager" runat="server" PageSize="5" PagedControlID="ListEvents" QueryStringField="page" >
                        <Fields>
                            <asp:NextPreviousPagerField 
                            FirstPageText="First"
                            LastPageText="Last"
                            NextPageText="Next"
                            PreviousPageText="Back" />
                        </Fields>
                    </asp:DataPager>
                </div>
            </LayoutTemplate>

            <ItemTemplate>
                <table id="tblEvents">
                    <tr>
                        <td rowspan="4" id="Col1Events"></td>
                        <td rowspan="4" id="Col2Events"></td>
                        <td rowspan="4" id="Col3Events"></td>
                        <td class="tdEvents"><span style="font-weight:bold; font-size: 1em;"><%#Eval("EVENT_DATERANGE") %>:&nbsp;&nbsp;<%#Eval("EVENT_NAME") %></span></td>
                    </tr>
                    <tr>
                        <td class="tdEvents"> <span style="font-size: .9em;"><%#Eval("EVENT_DESC") %></span></td>
                    </tr>
                    <tr>
                        <td class="tdEvents"><span style="font-size: .9em;"><%#Eval("EVENT_STREET") %>, <%#Eval("CITY.CITY_NAME") %></span></td>
                    </tr>
                    <tr>
                        <td class="tdEvents"><span style="font-size: .9em;"><%#Eval("EVENT_PHONE") %></span></td>
                    </tr>
                    <tr>
                        <td colspan="4" id="tdEmpty"></td>
                    </tr>                
                </table>
            </ItemTemplate>
        </asp:ListView>        
    </div> 
```

**页面背后的代码：**

```
 protected void btnFindEvents_Click(object sender, EventArgs e)
        {
            DateTime StartDt;
            string EventType = ddlEventType.SelectedValue;
            string dt = Request.Form["DatePickername"];
            if (ddlEventType.SelectedIndex == 0)
            {
                EventType = "";
            }
            if (dt != "")
            {
                StartDt = Convert.ToDateTime(Request.Form["DatePickerName"]);
            }
            else
            {
                StartDt = DateTime.Now;
            }
            string CityName= ddlEventCity.SelectedValue;
            if (ddlEventCity.SelectedIndex == 0)
            {
                CityName = "";
            }

            if ((ddlEventType.SelectedIndex == 0) && (ddlEventCity.SelectedIndex == 0))
            {
                //(1) ALL EVENTS
                BLgetEvents obj = new BLgetEvents();
                var EventList = obj.getAllEvents(StartDt);
                ListEvents.DataSource = EventList;
                ListEvents.DataBind();
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:40:44.213

当您通过 DataPager 分页时，您必须在 ListView 上再次绑定数据。因此，您需要在`PagePropertiesChanging`ListView 控件的事件上实现此绑定。就像是：

```
// 1 - add a method to bind ListView, add some parameters if you need
protected void BindListView()
{
   var data = // get data from database

   ListEvents.DataSource = data;
   ListEvents.DataBind();
}

// 2 - call this method on the button
protected void btnFindEvents_Click(object sender, EventArgs e)
{
   BindListView();
}        

// 3 - call this method on the PagePropertiesChanging event of the ListView
protected void ListEvents_PagePropertiesChanging(object sender, PagePropertiesChangingEventArgs e)
{
    //set current page startindex, max rows and rebind to false
    YourDataPagerControlId.SetPageProperties(e.StartRowIndex, e.MaximumRows, false);

    //rebind List View
    BindListView();
} 
```

在您的 asp.net 网络表单上，您需要在 listview 标签上设置事件：

```
<asp:ListView ID="ListEvents" runat="server" OnPagePropertiesChanging="ListEvents_PagePropertiesChanging">
...
</asp:ListView> 
```

当您从代码设置数据源时，相同的原则适用于其他数据绑定控件，如 GridView、DataList、Repeater 等（您需要在某些分页事件上再次绑定）。解决此问题的另一种方法是，您可以添加数据源控件（如 objectdatasource、linqdatasource 等）并将其设置在 ListView 的`DataSourceID` 属性上，DataPager 将自动工作。

有关更多详细信息，请查看此链接：[http ://weblogs.asp.net/hajan/archive/2011/09/08/paging-listview-using-datapager-without-using-datasource-control.aspx](http://weblogs.asp.net/hajan/archive/2011/09/08/paging-listview-using-datapager-without-using-datasource-control.aspx)

# javascript - 隐藏在 id 中包含变量的

> ID：11423947
> 
> 赞同：0
> 
> 时间：2012-07-11T00:35:24.120
> 
> 标签：javascript, jquery

我试图选择所有具有包含变量的 id 的 tr。它应该隐藏在用户输入搜索表单时不匹配的元素。该表单的 ID 为#search。

```
$(function () {
      var content = $('#search').val();
      $('#search').keyup(function () {
          if ($('#search').text() != content) {
              content = $('#search').val();
              //content has changed, do stuff
              if (!$('tr.id:contains(content)')) {
                  $('this').hide();
              }
          }
      });
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:37:40.700

你可以试试这个：

```
$('tr[id*=' + content + ']').hide(); 
```

属性匹配子句中的`*=`内容表示将具有指示属性的任何标记与包含右侧子字符串的值匹配，我认为这正是您所要求的。

# jquery - jqxwidgets 下拉列表更改事件（同时行更新功能）工作多次然后网格被锁定

> ID：11423954
> 
> 赞同：0
> 
> 时间：2012-07-11T00:35:56.720
> 
> 标签：jquery, asp.net-mvc-3, javascript-framework

我正在尝试将下拉列表（在 jqxgrid 单元格内）绑定到数据库，但是下拉列表的更改事件（以及同时行更新功能）多次工作，然后网格被锁定。下拉列表绑定到具有数据字段“UrunAdi”的列。而且，它是一个 asp .net mvc3 项目。有什么建议吗？

代码是：

```
var gridSource = {
            datatype: "json",
            datafields: [{ name: 'KargoId' }, { name: 'Ad' }, { name: 'Soyad' }, { name: 'UrunAdi' }, { name: 'UrunId', type: 'int' }, { name: 'Uygunluk', type: 'boolean' },
                         { name: 'YuklenmeTarihi', type: 'date' }, { name: 'Adet' }, { name: 'Fiyat'}],
            url: 'BindGrid',
            updaterow: function (rowid, rowdata) {                    
                var data = $.param(rowdata);
                //alert(data);
                $.ajax({
                    dataType: 'json',
                    url: 'UpdateEditGrid',
                    data: data,
                    success: function (data, status, xhr) {
                        // update command is executed.
                    }
                });
            }
        };

        var gridDataAdapter = new $.jqx.dataAdapter(gridSource, {
            downloadComplete: function (data, status, xhr) { },
            loadComplete: function (data) { $("#jqxgrid").jqxGrid('hidecolumn', 'UrunId'); },
            loadError: function (xhr, status, error) { alert(JSON.stringify(xhr)); }
        });

        var dropdownSource = {
            datatype: "json",
            datafields: [{ name: 'UrunId' }, { name: 'UrunAdi'}],
            url: 'BindDropdown'
        };

        var dropdownListAdapter = new $.jqx.dataAdapter(dropdownSource, { autoBind: true, async: false });

        // initialize jqxGrid
        $("#jqxgrid").jqxGrid(
        {
            width: 670,
            source: gridDataAdapter,
            editable: true,
            theme: theme,
            selectionmode: 'singlecell',
            columns: [
              { text: '#', datafield: 'KargoId', width: 40 },
              { text: 'Ad', columntype: 'textbox', datafield: 'Ad', width: 90 },
              { text: 'Soyad', datafield: 'Soyad', columntype: 'textbox', width: 90 },
              { text: 'Urun', columntype: 'dropdownlist', datafield: 'UrunAdi', width: 177,
                  initeditor: function (row, cellvalue, editor) {
                      var urunId = $('#jqxgrid').jqxGrid('getcellvalue', row, "UrunId");
                      editor.jqxDropDownList({ displayMember: 'UrunAdi', source: dropdownListAdapter, selectedIndex: urunId });
                      editor.bind('change', function (event) {
                          var selectedUrunId = editor.jqxDropDownList('getSelectedIndex');
                          $('#jqxgrid').jqxGrid('setcellvalue', row, "UrunId", selectedUrunId);
                      });
                  }
              },
              { text: 'UrunId', datafield: 'UrunId' },... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:11:29.287

我将 UrunAdi（下拉列表列）的列定义更改为：

```
 { text: 'Urun', columntype: 'dropdownlist', datafield: 'UrunAdi', width: 177,
                  initeditor: function (row, cellvalue, editor) {
                      var urunId = $('#jqxgrid').jqxGrid('getcellvalue', row, "UrunId");
                      editor.jqxDropDownList({ displayMember: 'UrunAdi', source: dropdownListAdapter, selectedIndex: urunId });
                      editor.bind('change', function (event) {
                          selectedUrunId = editor.jqxDropDownList('getSelectedIndex');
                      });
                  }
              } 
```

只有一个区别：

删除`$('#jqxgrid').jqxGrid('setcellvalue', row, "UrunId", selectedUrunId);`我认为“setcellvalue”事件会触发 updaterow。

# php - PDO 查询在 localhost 但不在网络服务器上工作——如何调试问题？

> ID：11423962
> 
> 赞同：1
> 
> 时间：2012-07-11T00:37:36.480
> 
> 标签：php, mysql, pdo

我有一些页面使用 prepare() 和 execute() （绑定一些参数）进行 PDO 查询，它们在 localhost 上运行良好，但在线失败并显示如下消息：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1142 INSERT command denied to user ... 
```

我该如何调试？我不知道出了什么问题，因为它可以在我的开发服务器（本地主机）上运行，而且我是 PDO 的新手，不知道该怎么做。

我还应该注意到，至少有一些 PDO 查询是有效的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:40:56.503

错误消息很清楚，您在网络服务器上使用的用户没有插入记录的权限。如果您已将其安装在网络服务器上，则需要使用 mysql 命令行或类似 phpMyAdmin 的工具设置正确的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:46:49.087

可能是您对该 mysql 服务器的权限有限，请尝试在 phpMyAdmin 中运行查询，看看是否遇到相同的错误。

# python - Python 字典：排序问题

> ID：11423964
> 
> 赞同：0
> 
> 时间：2012-07-11T00:38:10.297
> 
> 标签：python, list, sorting, dictionary

我以为我发现通过清除字典来对字典进行排序，然后按照我想要的顺序重新组装它，但由于某种原因，它会按照开始的方式重新排序。

如果有人可以帮助我，这是代码

```
from operator import itemgetter

n = {}
d = {
 'a': ['2', 'ova', 'no'], 
 'b': ['23', 'movie', 'yes'], 
 'c': ['5', 'show', 'yes'], 
 'd': ['17', 'ova', 'yes'], 
 'e': ['1', 'movie', 'no']
}

for i in d:
    print i, d[i]

print '\n'

l = d.items()
l.sort(key=itemgetter(1)) #l is now sorted by the value of the string holding the integers
d.clear()

for i in l:
    print i[0], i[1]
    d[i[0]] = i[1] 

print '\n'

for i in d:
    print i, d[i] #Why does the dictionary come out to be the same it started from 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T00:40:20.000

字典本质上是无序的（因为它们使用哈希键 - 这是唯一但任意的）[这是一个常见问题解答] - 您可能需要考虑使用保留插入顺序的[OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict) （在 2.7+ 中）或来自 PyPi 的配方 - 否则，如果您需要顺序，则需要将条目保存在列表或其他顺序中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T00:51:02.143

正如乔恩所指出的，字典没有顺序。通过放弃订购，您可以获得快速查找。不过，您可能不需要它来保持订单，因为您有自己喜欢的排序顺序：

```
d = {'a':['2', 'ova', 'no'], 'b':['23', 'movie', 'yes'], 'c':['5', 'show', 'yes'], 'd':['17', 'ova', 'yes'], 'e':['1', 'movie', 'no']}
sorted_items = sorted(d.items(), key=itemgetter(1))
for i,v in sorted_items:
    print i, v 
```

# c# - NHibernate 和 SQL Server 2012 序列

> ID：11423966
> 
> 赞同：3
> 
> 时间：2012-07-11T00:38:42.263
> 
> 标签：c#, nhibernate, sql-server-2012

NHibernate 与 SQL Server 2012 序列的工作情况如何？我看到 SQL Server 终于有了对我当前项目非常有益的序列。我看到 NH 支持其他数据库，但没有看到对 SQL Server 2012 的任何支持。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T02:03:28.193

在我看来，NHibernate 3.3.1（最近发布）支持 SQL Server 2012 中的序列。我想 SQL Server 中的映射序列与 PostgreSQL 和 Oracle 中的映射序列相同，所以你可能想试一试.

[NH 3.3.1 公告](http://sourceforge.net/news/?group_id=73818)
[NHibernate 3.3.1 的变更日志](https://nhibernate.jira.com/secure/ReleaseNote.jspa?projectId=10000&version=11140)

# facebook - 如何从我的应用帖子中找到 Facebook 覆盖面？

> ID：11423971
> 
> 赞同：6
> 
> 时间：2012-07-11T00:39:19.007
> 
> 标签：facebook, social-networking

有没有办法从我的应用帖子中检索覆盖面？

示例：我的应用在特定粉丝页面上发布照片，我想检索我的应用提供给该粉丝页面的影响力，以便向他们展示我的应用有多棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T18:47:08.123

使用您管理的页面的页面访问令牌（使用`read_insights` [Permission](https://developers.facebook.com/docs/authentication/permissions/)）。

然后，您可以访问`/POST_ID/insights`以检索有关该帖子的见解信息。

对于我页面上的示例帖子，这将返回帖子的印象数据。摘抄：

```
{
      "id": "[ID REMOVED]/insights/post_story_adds_by_action_type/lifetime", 
      "name": "post_story_adds_by_action_type", 
      "period": "lifetime", 
      "values": [
        {
          "value": {
            "like": 20, 
            "comment": 3, 
            "share": 1
          }
        }
      ], 
      "title": "Lifetime Post Stories by action type", 
      "description": "Lifetime The number of stories created about your Page post, by action type. (Total Count)"
    }, 
    {
      "id": "[ID REMOVED]/insights/post_impressions_unique/lifetime", 
      "name": "post_impressions_unique", 
      "period": "lifetime", 
      "values": [
        {
          "value": 936
        }
      ], 
      "title": "Lifetime Post Total Reach", 
      "description": "Lifetime The number of people who saw your Page post. (Unique Users)"
    }, 
    {
      "id": "[ID REMOVED]/insights/post_impressions/lifetime", 
      "name": "post_impressions", 
      "period": "lifetime", 
      "values": [
        {
          "value": 2936
        }
      ], 
      "title": "Lifetime Post Total Impressions", 
      "description": "Lifetime The number of impressions of your Page post. (Total Count)"
    }, 
```

发布时的博客文章在这里：[https://developers.facebook.com/blog/post/573/](https://developers.facebook.com/blog/post/573/) 并且在[Post 文档](https://developers.facebook.com/docs/reference/api/post/)`insights`中提到了连接

# windows - 批处理：忽略输出的最后一行

> ID：11423977
> 
> 赞同：4
> 
> 时间：2012-07-11T00:40:10.743
> 
> 标签：windows, batch-file

我有一个非常基本的脚本来呼应本地管理员帐户。我的目标是摆脱所有页眉/页脚信息。

到目前为止，我有：

```
FOR /F "skip=6" %%G IN ('net localgroup administrators')  DO echo %%G 
```

呼应：

```
Administrator
MyName
The 
```

“The”是页脚中的第一个单词：“命令成功完成。”

所以我想摆脱“The”，但我知道我可能必须重组整个脚本，这很好。我已尝试保存到变量 %str% 但您无法设置多行变量。此外，不能选择使用 txt 文件作为缓冲区。

有输入吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T00:54:10.713

我可以想到两个简单的解决方案：

```
FOR /F "skip=6" %%G IN ('net localgroup administrators')  DO if %%G neq The echo %%G 
```

或者

```
FOR /F "skip=6" %%G IN ('net localgroup administrators ^| findstr /vb The')  DO echo %%G 
```

我想有人可能会争辩说用户名可能是“The”，在这种情况下，您可以使用过滤器更精确：

```
FOR /F "skip=6" %%G IN ('net localgroup administrators ^| findstr /vc:"The command completed successfully."')  DO echo %%G 
```

# c# - C# 问题 >“XML 文档 (2, 2) 中有错误”我不确定问题是什么

> ID：11423986
> 
> 赞同：0
> 
> 时间：2012-07-11T00:41:41.073
> 
> 标签：c#, xml, windows-phone-7

我有一个错误（XML 文档中有一个错误 (2, 2)。）我一直在为此烦恼。我似乎无法确定错误。如果有一双新的眼睛可以帮助我，我将不胜感激。

```
 public GunPresenter()
    {
        Uri uri = new Uri("http://www.foo.com/handguns.xml");
        WebClient webClient = new WebClient();
        webClient.DownloadStringCompleted += OnDownloadStringCompleted;
        webClient.DownloadStringAsync(uri);
    }

    void OnDownloadStringCompleted(object sender, DownloadStringCompletedEventArgs args)
    {
        StringReader reader = new StringReader(args.Result);
        XmlSerializer xml = new XmlSerializer(typeof(GunLibrary)); **//Error is here**
        GunLibrary = (GunLibrary)xml.Deserialize(reader); 
```

* * *

手枪.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <HandgunLibrary xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <TypeOfGun>Handgun</TypeOfGun>
      <Guns>
        <Gun>
          <GunName>Ballester-Molina</GunName>
          <Type>Single Action</Type>
          <Caliber>.45ACP</Caliber>
          <Capacity>7 rounds</Capacity>
          <WeightUnloaded>1075 grams</WeightUnloaded>
          <Legth>216 mm</Legth>
          <CountryOrigin>Argentine</CountryOrigin>
          <PhotoFileName>http://foo.com/gunImages/ballester.png</PhotoFileName>
          <YearMade>1938-1953</YearMade>
        </Gun>
        <Gun>
          <GunName>Bersa Thunder 9</GunName>
          <Type>Double Action</Type>
          <Caliber>9x19mm Luger/.40S&amp;W</Caliber>
          <Capacity>17(9mm)/13(.40)</Capacity>
          <WeightUnloaded>870 grams</WeightUnloaded>
          <Legth>192 mm</Legth>
          <CountryOrigin>Argentine</CountryOrigin>
          <PhotoFileName>http://foo.com/gunImages/bersathunder9.png</PhotoFileName>
          <YearMade>1994-present</YearMade>
        </Gun>
        <Gun>
          <GunName>Bersa Thunder-mini</GunName>
          <Type>Double Action</Type>
          <Caliber>9x19mm Luger/.40S&amp;W</Caliber>
          <Capacity>13(9mm)/10(.40)</Capacity>
          <WeightUnloaded>765 grams</WeightUnloaded>
          <Legth>165 mm</Legth>
          <CountryOrigin>Argentine</CountryOrigin>
          <PhotoFileName>http://foo.com/gunImages/bersathundermini.png</PhotoFileName>
          <YearMade>1994-present</YearMade>
        </Gun>
        <Gun>
          <GunName>Bersa Thunder Ultra Compact</GunName>
          <Type>Double Action</Type>
          <Caliber>.45ACP</Caliber>
          <Capacity>7</Capacity>
          <WeightUnloaded>780 grams</WeightUnloaded>
          <Legth>173 mm</Legth>
          <CountryOrigin>Argentine</CountryOrigin>
          <PhotoFileName>http://foo.com/gunImages/bersathunderultracompact.png</PhotoFileName>
          <YearMade>1994-present</YearMade>
        </Gun>
        <Gun>
          <GunName>Bersa Thunder-380</GunName>
          <Type>Double Action</Type>
          <Caliber>.380ACP/.32ACP</Caliber>
          <Capacity>7(9mm)/9(7.65mm)</Capacity>
          <WeightUnloaded>560 grams</WeightUnloaded>
          <Legth>168 mm</Legth>
          <CountryOrigin>Argentine</CountryOrigin>
          <PhotoFileName>http://foo.com/gunImages/bersathunder-380.png</PhotoFileName>
          <YearMade>1995-present</YearMade>
        </Gun>
      </Guns>
    </HandgunLibrary> 
```

//完全的

* * *

枪库.cs

```
 using System;
      using System.Collections.ObjectModel;
      using System.ComponentModel;
      using System.Xml.Serialization;

      namespace HandgunLibrary
      {

public class GunLibrary : INotifyPropertyChanged
{
    [XmlAnyElement]
    public event PropertyChangedEventHandler PropertyChanged;
    string typeOfGun;
    ObservableCollection<Guns> guns = new ObservableCollection<Guns>();

    public string TypeOfGun
    {
        set
        {
            if (typeOfGun != value)
            {
                typeOfGun = value;
                OnPropertyChanged("TypeOfGun");
            }
        }

        get
        {
            return typeOfGun;
        }
    }

    public ObservableCollection<Guns> Guns
    {
        set
        {
            if (guns != value)
            {
                guns = value;
                OnPropertyChanged("Guns");
            }
        }

        get
        {
            return guns;
        }
    }

    protected virtual void OnPropertyChanged(string propChanged)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propChanged));
        }
    }
} 
```

}

* * *

枪械.cs

```
 public string GunName
    {
        set
        {
            if (gunName != value)
            {
                gunName = value;
                OnPropertyChanged("GunName");
            }
        }

        get
        {
            return gunName;
        }
    } 
```

//缩短

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:14:24.383

您可能应该发布完整的 XML，但我感觉这是字节顺序标记 (BOM) 问题。Visual Studio 并不总是对 BOM 做正确的事情。将 XML 复制并粘贴到另一个编辑器中并保存。Notepad、Notepad++ 等。下面是一篇文章，其中包含有关该问题的更多信息。

[http://blog.fourthwoods.com/2011/07/11/removing-the-byte-order-mark-inserted-in-source-files-by-visual-studio/](http://blog.fourthwoods.com/2011/07/11/removing-the-byte-order-mark-inserted-in-source-files-by-visual-studio/)

埃里克

# ios - 测试应用内购买问题。内购 iOS

> ID：11423988
> 
> 赞同：5
> 
> 时间：2012-07-11T00:42:04.733
> 
> 标签：ios, in-app-purchase

我在 IAP 购买测试中遇到了一个大问题。

我已经做了以下步骤：

1.  创建应用 ID ( **com.domainname.appname** )
2.  **使用 App ID ( com.domainname.appname** )创建开发配置文件
3.  在 iTunes Connect 上创建应用程序（Bundle ID **com.domainname.appname**）
4.  管理 IAP。**创建具有产品 ID com.testitem1、com.testitem2、com.testitem3**的非消耗性产品（每个产品都有准备提交状态）

**配置 XCode 项目设置**

*   捆绑标识符：**com.domainname.appname**

*   **代码签名身份：我在步骤 2**中制作的开发配置文件

***   部署目标：4.0** 

 ****设备**

iPod Touch 4gen iOS 5.1.1

**编写源代码**

我的课堂支持`SKProductsRequestDelegate`

在`- viewDidLoad`回调方法中，我写了以下几行：

```
if ([SKPaymentQueue canMakePayments])
{
    NSLog(@"YES, I CAN MAKE PAYMENTS");
}
else
{
    NSLog(@"NO, I CAN NOT MAKE PAYMENTS"); 
} 
```

在这个阶段一切都很好。我可以付款。

接下来，我尝试为我的产品创建请求：

```
SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers: [NSSet setWithObjects:@"com.testitem1", @"com.testitem2", @"com.testitem3", nil]];
request.delegate = self;
[request start]; 
```

在这个阶段一切都很好，在下一个阶段我的请求对象调用回调方法如下：

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSArray *myProduct = response.products;
    NSLog(@"%@", myProduct);
} 
```

但是没有任何产品响应，我不明白为什么。

我之前已经遇到过这个问题（我只是重置了我的设备，一切都很好），但在这种情况下，我无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T17:43:41.927

我已经阅读了本指南：

[https://developer.apple.com/library/ios/#technotes/tn2259/_index.html](https://developer.apple.com/library/ios/#technotes/tn2259/_index.html)

就我而言，这与我没有获得**银行信息**有关。如果您想测试您的 IAP，您必须拥有一份带有您的税务信息的 iOS 付费应用程序合同 (iOS)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T16:54:17.653

发生这种情况是因为您尚未在 iTunes Connect 中上传应用程序的二进制文件。转到 iTunes Connect，上传应用程序的二进制文件。上传后，立即拒绝它，以便将其标记为“Developer Rejected”。

`SKProductResponse`如果它是您的应用程序的第一个版本，这是您接收的必要步骤。它不会影响您的应用程序的审核。**

# ios - iPhone 应用程序提交 - 拒绝二进制文件和上传新的二进制文件

> ID：11423991
> 
> 赞同：3
> 
> 时间：2012-07-11T00:42:08.963
> 
> 标签：ios, app-store, appstore-approval

目前，我的 iPhone 应用程序的更新已经审核了超过**10 天**！！！

在那段时间里，我已经能够解决一些错误，甚至为我的应用程序添加一些小的新功能。我知道可以拒绝您的二进制文件，但我宁愿先发布我的应用程序，然后向苹果发送更好的 1.1.1 版本...

所以基本上我的问题是，如果我拒绝了我的应用程序二进制文件并在我的应用程序被推到审查堆的底部之后立即提交了一个，或者我会保持我的位置（因为我已经等待了 10 天）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T00:57:36.280

不，拒绝一个二进制文件并立即重新提交一个新的二进制文件不会保持你的位置：你会被赶回队列的开头。我基于我自己的经验，过去曾多次拒绝并重新提交过二进制文件。

现在，您可能会想：“好吧，加快审核流程呢？”

我可以分享一些经验：在我最新的应用程序中，我处于与您相同的位置，但我决定继续发布 1.0，然后很快提交 1.0.1。当 1.0 被批准并发布时，Apple 选择它作为“New & Noteworthy”部分。突然间，该应用程序获得了大量曝光——以及关于我在 1.0.1 中修复的错误的投诉。我提交了 1.0.1 以及加快审查的请求，并获得了批准。大约 24 小时后发布了 1.0.1。

因此，您必须权衡自己的应用程序的利弊，但我希望这些信息对您有所帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T18:19:28.260

如果 Apple 允许，那么许多开发人员会在尝试修复最后几个错误的同时开始上传他们的 beta 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T00:47:06.607

是的，拒绝并重新提交二进制文件会将您置于审查队列的底部。这很不幸，但没有解决办法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-02T23:12:08.837

我遇到过同样的问题。我已经提交了我的应用程序，它正在审核中。我被要求更改一些元数据并重新提交应用程序。这样做时，我发现了一个 UI 问题并修复了它。我在保留当前二进制文件并发布 1.01 版本或上传新版本方面处于两难境地。我不想发送我的第一个应用程序有问题，所以我继续拒绝二进制文件并上传新的。我立即联系了 Apple 开发者技术支持。他们声称“审查时间不会受到影响，并且我们的内部系统确实在审查之前处理了您的构建（验证它的一般正确性并为商店退出您的应用程序），这可能会增加一些延迟。但是，这种延迟相当小，只是审查时间的一个次要因素。更重要的是，

# python - 具有正确值的文件输出错误

> ID：11423994
> 
> 赞同：1
> 
> 时间：2012-07-11T00:42:59.220
> 
> 标签：python, file, list

我的目标是将 makeList 的索引打印到另一个文件中。我检查了我的开始和结束值，结果是正确的。但是，我的 outputFile 完全关闭，因为它只在该文件上打印一个字符。

```
def printOutput(start, end, makeList):
  if start == end == None:
      return
  else:
      while start <= end:
          print start
          print end
          outputFile = open('out'+uniprotID+'.txt','w')#file for result output
          inRange = makeList[start]
          start += 1
          outputFile.write(inRange) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:46:28.873

移动线：

```
outputFile = open('out'+uniprotID+'.txt','w')#file for result output 
```

到 while 循环之前的行。现在它在 while 循环的每次迭代中重新打开文件（作为一个全新的空文件）。

所以代码是：

```
def printOutput(start, end, makeList):
  if start == end == None:
      return
  else:
      outputFile = open('out'+uniprotID+'.txt','w')#file for result output
      while start <= end:
          print start
          print end
          inRange = makeList[start]
          start += 1
          outputFile.write(inRange) 
```

ETA：使用列表切片有一种更简单的方法：

```
def printOutput(start, end, makeList):
  if start == end == None:
      return
  else:
      outputFile = open('out'+uniprotID+'.txt','w')#file for result output
      for inRange in makeList[start:end+1]:
          outputFile.write(inRange) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:50:32.757

发生这种情况是因为您多次打开文件进行写入。基本上，这会使程序在`while`循环的每次迭代中覆盖文件。

要最小化地修改您的代码，请使用`'a'`标志而不是标志打开文件`'w'`。`append`这将以模式而不是模式打开文件`overwrite`。

但是，这会使您的代码重复打开文件，这将导致文件变慢，因为磁盘 I/O 操作需要时间。相反，更好的方法是打开文件以在`while`循环外写入，然后在内部写入。在代码中：

```
def printOutput(start, end, makeList):
    if start == end == None:
        return
    else:
        outputFile = open('out'+uniprotID+'.txt','w')#file for result output
        while start <= end:
            print start
            print end
            inRange = makeList[start]
            start += 1
            outputFile.write(inRange)
        outputFile.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:52:56.153

如前所述，问题在于输出文件在循环内被重复打开。解决方法是在进入循环*之前打开输出文件。*

这是另一个版本，`with`用于打开您的文件。使用此构造的优点是，当您完成或遇到异常时，它会自动为您*关闭文件。*

```
 def printOutput(start, end, makeList):
      if start == end == None:
          return
      else:
          out_fname = 'out'+uniprotID+'.txt'
          with open(out_fname, 'w') as outputFile:
              while start <= end:
                  print start
                  print end
                  inRange = makeList[start]
                  start += 1
                  outputFile.write(inRange) 
```

否则，您必须记住使用 .*显式*关闭文件`outputFile.close()`。

# c# - 无法在 T4 模板中使用我的自定义类

> ID：11423995
> 
> 赞同：5
> 
> 时间：2012-07-11T00:42:59.593
> 
> 标签：c#, t4

我研究了 google 和 SO，但找不到答案。

我看过以下帖子，但没有成功。

[在 T4 模板中使用类](https://stackoverflow.com/questions/11078905/use-class-inside-a-t4-template)

在我的 T4 模板中，我尝试使用自定义类 ResourceManager 中定义的 AddControls 方法，但出现以下错误。

**编译转换：找不到类型或命名空间名称“WebApplication1”（您是否缺少 using 指令或程序集引用？）**

*请帮我。*

```
namespace WebApplication1
{
    public static class ResourceManager
    {

        public static void AddControls(List<string> controlList)
        {
            controlList.Add("Label1");
            controlList.Add("Button1");
        }
     }
} 
```

我的 T4 模板代码如下所示：

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ output extension=".txt" #>

<#@ assembly name="$(TargetPath)" #>
<#@ import namespace="WebApplication1" #>
<#@ import namespace="System.Collections.Generic" #>

<#
    List<String> controlList = new List<String>();

    ResourceManager.AddControls(controlList);

    foreach (string str in controlList)
    {

        string propName= str;
#>
    My control is  <#=            propName #>

<#
    }

#> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T01:10:30.073

构建包含命名空间的项目`WebApplication1`并再次尝试保存模板。使用您的代码对我有用。