# StackOverflow 问答 11357000-11357999

# c++ - 释放从 char* 创建的 _bstr_t

> ID：11357008
> 
> 赞同：1
> 
> 时间：2012-07-06T06:33:11.720
> 
> 标签：c++, windows, memory, memory-management, bstr

我有 char* 数组，我正在为它动态分配内存。

```
char *strData = new char[length+1]; 
```

这个 char* 我传递给 _bstr_t 如下，

```
_bstr_t bstrData = strData; 
```

如何通过 bstrData 释放分配给 char* 的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:35:53.083

`_bstr_t`管理自己的内部缓冲区（由[SysAllocString](http://msdn.microsoft.com/en-us/library/ms891285.aspx)创建）。因此，一旦您创建了`_bstr_t`，就可以安全地删除您分配的 char 数组。`bstrData`仍然绝对有用。

# c++ - Eclipse 索引不起作用

> ID：11357009
> 
> 赞同：24
> 
> 时间：2012-07-06T06:33:39.010
> 
> 标签：c++, eclipse, eclipse-cdt

我在 Ubuntu 的 Eclipse 3.5.2 Galileo 中使用 CDT。

我的 Eclipse 的索引器有时不工作。我的意思是当我`ctrl`点击一个功能时，它会说`Could not find symbol in index`。此外，F3 按钮单击会导致相同的错误消息。实际上，大多数地方它都不起作用，并且在极少数地方起作用。

我见过一些其他版本的 Eclipse，在文件菜单下列出了一个用于索引的菜单项。像 File->Indexer->Rebuild.... 但是在我的 File 菜单中，Indexer 没有这样的菜单项。

唯一的方法是使用其他版本的 Eclipse 还是遗漏了什么？有关此的任何指示都会有所帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-03-12T09:22:35.570

就我而言，没有任何效果，最后我做了以下事情：

```
 1) Close the project
 2) Delete the project(do not check from disk option)
 3) create new project with existing code(use the deleted project path)
 4) Successfully indexed my c++ code 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-06T07:07:23.810

要添加包含要解析的代码的路径，请执行以下步骤：
1\. 右键单击​​项目
2\. 选择属性
3\. 转到 C/C++ 常规
4\. 转到路径和符号
5\. 如果缺少路径，请添加路径。

要重新解析代码，请执行以下步骤：
1\. 右键单击​​项目
2\. 选择索引
3\. 重建

如果这不起作用，那么你就不走运了。c++ 是一种很难解析的语言。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-01-20T09:21:53.350

如果您的索引器卡住并且无限期挂起，您可以从`.metadata`. 确保同时没有运行 eclipse。

该`.metadata`目录位于工作区路径中的隐藏文件夹中。

在那里您可以导航到：

`<workspace_path>/.metadata/.plugins/org.eclipse.core.runtime/.settings/`

在`.settings/`目录中，有一些`.prefs`文件分别存储了每个项目的首选项。

例如：`org.eclipse.cdt.core.prj-test-project.prefs`存储项目**test-project的首选项**

使用文本编辑器打开此文件并删除所有以`indexer`. 这会将这个特定项目的索引器设置重置为默认值。

`indexer`或者，您可以删除所有以from开头的行`org.eclipse.cdt.core.prefs`；这样做将重置整个工作区的索引器设置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-04T19:17:28.867

我相信您可以通过运行清除索引：

```
rm .metadata/.plugins/org.eclipse.jdt.core/*.index 
```

然后重新启动 Eclipse。然后它将重建其索引。

这在 Java 项目中对我有用，但我想它对于所有（大多数？）项目类型都有相同的索引。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-18T06:55:18.147

1.  右键单击项目。
2.  选择`New->Convert`一个`C++`项目。选择您的配置。然后下一步
3.  索引器将开始索引所有文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-16T11:01:29.117

对我来说，这很有效：

*   右键单击并关闭项目
*   再次打开项目
*   右键单击并选择索引->重建

我希望它可以帮助任何人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-11T11:19:03.317

对我来说，创建项目索引器时选择为无是一个问题。删除了项目，再次创建项目时，我根据需要选择了索引器选项“LINUX_GCC”，然后它对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-08T10:01:43.397

1.  在安装 eclipse 的地方执行**eclipse.exe -clean -refresh**。
2.  使用给定的源代码文件夹路径在 Eclipse 中创建一个新的 C/C++ 项目。（不适用于基于现有工作空间的新项目）

以上步骤对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-06T10:29:38.747

这是我`Project->C++ Index->Rebuild`失败后使用的解决方案。这个技巧避免删除你当前的项目：

```
1) Copy the current project (Right click->Copy from Project Explorer)
2) Paste it (Right click->Paste from Project Explorer) and give the copy another name
3) The indexer should now start and index both projects
4) When indexation is complete, you can delete the copy 
```

PS：确保您的原始项目是一个实际的 C++ 项目，否则这显然行不通。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-18T12:13:37.417

我遇到了同样的问题，结果发现 index 文件夹归 root 所有（由于某种原因，我必须以 root 身份运行一次 Eclipse）我使用并回收了项目文件夹`sudo chown -R username projectfolderpath`并解决了问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-09T13:11:33.970

您可以尝试重建索引。在项目视图中右键单击项目。然后`Index -> Rebuild`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-31T11:10:31.070

**将项目转换为 C 或 C++ 特性**：

`Right click on project`: 新建 > 转换为 C/C++ 项目

`In "Convert to C or C++"`: 选择 C/C++ 项目

`In "Project options":` 勾选“指定项目类型”

`...Project Type:` 选择“Makefile 项目”

`...Toolchains:` 总海湾合作委员会

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-11-13T14:46:08.780

**刚刚在我的 C++ ARM Cross GCC**项目中遇到了同样的问题。我正在 Windows 上开发，使用 Makefile 和带有 GNU ARM Embedded Toolchain 的 Ubuntu Docker 映像来构建项目。

就我而言，摆脱未解析符号的解决方案可以分为两部分：

* * *

1.  *CDT Arm Cross GCC 内置编译器设置*没有编译器的路径。

`Project Properties -> C/C++ General -> Preprocessor Include Paths -> Providers(tab)`必须在编译器路径中提供。

使用*GNU ARM Embedded Toolchain ，**获取编译器规格*的命令条目： 我目前使用的是：

```
C:\GNU_Arm_Embedded_Toolchain\9-2020-q2-update\bin\arm-none-eabi-g++.exe ${FLAGS} ${cross_toolchain_flags} -E -P -v -dD "${INPUTS}" 
```

[![CDT Arm Cross GCC 内置编译器设置](../Images/4b48d19a42adda84b1b8f344dcd9a178.png)](https://i.stack.imgur.com/PV4OC.png)

*注意：是的，我在 Windows 机器上安装了与在 Docker 映像中使用的工具链相同的工具链。*

要验证调用是否正确，您可以*在控制台视图中勾选分配控制台*，这将为控制台提供有用的输出。此外，在*Entries*选项卡中，当您展开*CDT Arm Cross GCC 内置编译器设置*时，您应该会看到包含的包含和符号。

* * *

2.  `Project Properties -> C/C++ General -> Paths and Symbols`菜单中缺少符号。

因为我在 Makefile 中有我的定义，所以我忘了在这里也添加我的 MCU 的定义。

* * *

希望这对某人有帮助！:)

# filter - 是否可以为 FindBugs 设置多个排除过滤器？

> ID：11357011
> 
> 赞同：2
> 
> 时间：2012-07-06T06:34:00.620
> 
> 标签：filter, findbugs

我们有两个过滤器文件，一个用作全局过滤器，另一个用于项目特定的过滤器文件。我想让 ant 知道过滤器文件，但显然只能有一个 excludeFilter。我试过在线搜索，但所有示例都使用一个过滤器文件。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:57:12.783

FindBugs 可以处理多个排除过滤器，但看起来 FindBugs ant 任务不能。在命令行中，您可以使用多个 -exclude 选项。在 eclipse 插件中，您可以列出多个排除文件。

# javascript - UIWebView 用参数调用 JS 不起作用

> ID：11357016
> 
> 赞同：0
> 
> 时间：2012-07-06T06:34:58.090
> 
> 标签：javascript, ios, uiwebview

我有一个 UIWebView，里面有一个 HTML 页面。现在我想在 HTML 中调用一个 JS 函数，并在其中传递一些来自 Objective-C 变量的值。

```
-  (void) webViewDidFinishLoad:(UIWebView *)_webView{
    NSString *selectedValue = [_webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"initWithDataFromObjC(%@)", @"hello"]];

    NSLog(@"webViewDidFinishLoad %@", @"YES");
} 
```

HTML文件中的JS函数：

```
 function initWithDataFromObjC(param1) {
           alert(param1);        
  } 
```

当我在模拟器中运行应用程序时，有时它会正确加载我的 HTML，有时它会卡住并且没有完成加载。但尽管如此，它并没有显示带有“你好”的弹出窗口！

如果我将编码更改为以下内容：

```
-  (void) webViewDidFinishLoad:(UIWebView *)_webView{
    NSString *selectedValue = [_webView stringByEvaluatingJavaScriptFromString:@"initWithDataFromObjC()"];

    NSLog(@"webViewDidFinishLoad %@", @"YES");
} 
```

不带任何参数的JS函数

```
function initWithDataFromObjC() {
      alert("hello");        
} 
```

第二个构造将毫无问题地运行。但是我想知道为什么我尝试传入一些参数时不能正常工作？

BR & THX,

迈贝克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:49:24.267

尝试：

```
 NSString *selectedValue = [_webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"initWithDataFromObjC('%@')", @"hello"]]; 
```

或者

```
 NSString *selectedValue = [_webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"initWithDataFromObjC(\"%@\")", @"hello"]]; 
```

# android - 如何确保 Proguard 具有混淆应用程序？

> ID：11357017
> 
> 赞同：0
> 
> 时间：2012-07-06T06:35:10.103
> 
> 标签：android, obfuscation, reverse-engineering, proguard

我的项目在创建时没有启用 proguard。因此我需要手动添加 proguard 并通过 project.properties 启用它。

除了逆向工程之外，我有什么方法可以知道我的应用程序是否被混淆了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:51:09.237

如果您的应用程序已被混淆，您将`proguard`在项目文件夹中看到一个名为的新文件夹。它应该包含四个文本文件：转储、映射、种子和使用。

请注意，除非您在发布模式下构建它，否则您的项目不会被混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T12:31:29.403

仅供记录，如果你想检查你的代码是否真的被混淆了，你可以在这个网页中生成APK并分析它：[http ://www.javadecompilers.com/apktool](http://www.javadecompilers.com/apktool)

您也可以通过生成 APK 并稍后转到 Build -> Analyze APK... -> 选择要分析的 APK 来检查是否使用 Android Studio。

我希望这会有所帮助。

# tomcat - 在 Tomcat 中找不到适合 jdbc 错误的驱动程序

> ID：11357019
> 
> 赞同：0
> 
> 时间：2012-07-06T06:35:20.187
> 
> 标签：tomcat, jdbc

我正在通过 Eclipse IDE 开发一个动态 Web 应用程序，并使用 Tomcat 7.0 来部署 war 文件。我正在尝试通过在`getConnection()`.

我已将`db2jcc`罐子放在 tomcat lib 文件夹中。我得到了 sql 异常

```
No suitable driver found for jdbc:DB2://localhost:50000/InstanceName 
```

在 Eclipse 服务器控制台中。有关如何克服此问题的任何建议。

```
protected Statement dynamiCreateDBStatement(String url, String DB_Uname,String DBPWD,String DB_Type) 
{
    try {
        System.out.println(url+"uname="+DB_Uname+"pwd="+DBPWD);
        if(DB_Type.equals("") || DB_Type.equals("null") == false)
        {
            if(DB_Type.equalsIgnoreCase("DB2"))
            {
                Class.forName("com.ibm.db2.jcc.DB2Driver");
            }
            if(DB_Type.equalsIgnoreCase("oracle"))
            {
                Class.forName("oracle.jdbc.OracleDriver");
            }
        }
        String type="javax.sql.DataSource";

        connection1 = DriverManager.getConnection(url, DB_Uname, DBPWD);
        stmt1 = connection1.createStatement();
        connection1.close();
        System.out.println("close conn to db=="+connection1.isClosed());
        return stmt1;
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        System.out.println("sql ="+e.getMessage());
        return null;
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        System.out.println("class=="+e.getMessage());
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:57:45.690

“没有合适的驱动程序”通常意味着您提供的用于连接的 JDBC URL 语法不正确，或者根本没有加载驱动程序。

检查 URL 语法。该错误通常意味着驱动程序类已加载，但 URL 不正确。[以下](http://www.ibm.com/developerworks/data/library/techarticle/dm-0512kokkat/#connect)是向您展示正确语法的文档。

当调用 getConnection 方法时，`DriverManager`将尝试从初始化时加载的驱动程序和使用与当前小程序或应用程序相同的类加载器显式加载的驱动程序中找到合适的驱动程序。（使用`Class.forName()`）

如果`db2cc.jar`不在您的类路径中，也可能会发生这种情况。我建议将`db2cc.jar`物理位置放置到`/WEB-INF/lib`项目目录中。然后 eclipse 将处理其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:59:40.337

由于 DB2 驱动程序被视为 IDE 工具的外部 jar 文件，因此您需要将其添加到其中。在 Eclipse 中，您需要转到菜单 Run -> Run Configurations，然后在选项卡 Classpath 中添加外部 DB2 jar 文件。这样你的java类就可以访问它了。

祝你好运，鲍里斯

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-27T05:46:41.420

I fixed this error by fixing the connection URL. By mistake it was: *jdbc:postgresql:/192.168.141.113:5432/* with only one slash before the IP. Adding the double slash: *jdbc:postgresql://192.168.141.113:5432/* fixed this error

# python - 运行时的 Python 套接字 errno -3

> ID：11357024
> 
> 赞同：1
> 
> 时间：2012-07-06T06:35:45.203
> 
> 标签：python, sockets, irc

在安装 Python 1.6（我能找到的唯一的 python .pet）后，在运行 Lucid 小狗 5.2 的旧笔记本电脑上运行和测试一些 IRC 机器人时，每隔几次我运行 python 文件，我就会收到这个奇怪的错误：

```
Traceback (most recent call last):
    File "bot.py!, line 77, in <module>
       irc.connect ( (irc_network, irc_port) ) 
    File "<string>", Line 1, in connect
socket.gaierror: [Errno -3] Temporary failure in name resolution 
```

这是发生此错误的代码部分：

```
irc_network = 'irc.esper.net'
irc_port = 5555
irc = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
irc.connect ( ( irc_network, irc_port ) ) 
```

我只是为此使用该`socket`模块，没有任何第三方进口。我不知道这个错误是什么以及它意味着什么，因为一个快速的谷歌对我来说一无所获。

紫色的事实是，我可以再次尝试运行该机器人，而无需更改任何内容，并且运行良好。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:52:54.333

我唯一能想到的是您的 DNS 解析器无法正常工作。在这里，这段代码运行良好。

* * *

顺便说一句（就像评论一样），如果你替换

```
irc = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
irc.connect ( ( irc_network, irc_port ) ) 
```

和

```
irc = socket.create_connection( ( irc_network, irc_port ) ) 
```

您更有未来的证明，因为您不会将自己限制在将在未来几十年内消失的旧协议中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:53:42.290

我只是有同样的问题。事实证明，我的 DNS 无法解析我的主机名，是草率地给了我的主机名而不是 host.node1.node2。所以查找你的主机名，如果它不起作用，那么你需要更具体，基本上你正在寻找你的 DNS A 或 Quad A 记录，并使用你的 DNS 可以解析的名称。另一种可能性是您还没有 DNS 列表。

# android - 高正常运行时间 ADK 控制应用程序的分析和调试技术？

> ID：11357026
> 
> 赞同：0
> 
> 时间：2012-07-06T06:35:52.287
> 
> 标签：android, android-service, android-4.0-ice-cream-sandwich, adk, android-2.3-gingerbread

我最近将一个已知运行时间长达数月的应用程序（[DIY 分区项目](http://diy-zoning.sourceforge.net/)）移植到 Android（[附件驱动程序](https://play.google.com/store/apps/details?id=net.sf.dz4.adk)、[核心进程](http://www.homeclimatecontrol.com/overseer)和[遥控器](https://play.google.com/store/apps/details?id=com.homeclimatecontrol.dz3.view.android)）。而且，不幸的是，尽管使用了保持运行服务活动的技术（START_STICKY，startForeground()），但有时 system^H 服务应用程序只是冻结 - 直到用户启动与服务的交互，之后它恢复正常操作。最大的问题是它是间歇性发生的，而且主要是在几天的正常运行时间之后。遥控器一次在模拟器上工作几天，没有明显的降级，所以问题很可能出在服务或附件驱动程序中。

目前，该系统针对 API 10，因此高级服务调度功能不可用 - 也就是说，如果它们与一开始的问题相关。

现在，调试和/或分析这样一个系统的现实方法是什么？请记住，adb 不适用于连接到 ADK 附件的 Android 硬件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:43:26.333

然而，一个相当晚的答案，您是否尝试使用唤醒锁？ [http://developer.android.com/reference/android/os/PowerManager.WakeLock.html](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html) 可能系统在某些情况下只是让处理器休眠，看起来像“冻结”

# php - PHP 跨会话变量

> ID：11357029
> 
> 赞同：0
> 
> 时间：2012-07-06T06:35:54.927
> 
> 标签：php, variables, memory, global

为了防止服务器密集访问我的数据库或文件系统，我需要一个内存变量，无论我的服务器上的会话如何，所有脚本都可以访问它。我假设可以使用 putenv/setenv（或 $_ENV），但是当我在一个脚本中执行 putenv 并在另一个脚本中回显它时，它在我的服务器上不起作用。我做错什么了吗？我也发现了 SHMOP 函数，但它们在 Windows 上不起作用——有没有这样的东西，在 Windows 和 Unix/Linux 下都可以工作？欢迎任何提示。

马立克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:43:16.947

您可以使用[APC](http://php.net/manual/en/book.apc.php)将信息本地存储在服务器的内存中，或者像 Memcache 这样的分布式缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:25:40.443

使用内存缓存。

[http://memcached.org/](http://memcached.org/)

[http://php.net/manual/en/book.memcache.php](http://php.net/manual/en/book.memcache.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:38:12.813

怎么样...

1.  创建一个 RAMDisk
2.  将文件写入 RAMDisk。

# html - 我应该如何在html中包含√E？我想要 E 上的水平符号

> ID：11357030
> 
> 赞同：1
> 
> 时间：2012-07-06T06:35:57.947
> 
> 标签：html, css

我应该如何在html中包含√E？问题是我希望标志完全超过 E。这不会到来。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:41:09.420

您可以使用 CSS `text-decoration:overline`：

```
&radic;<span style="text-decoration:overline;">E</span> 
```

或者用 and 定义一个“overline”类`text-decoration:overline`：

```
&radic;<span class="overline">E</span> 
```

不过，这不适用于复杂的公式。

如果不支持 CSS（例如在 Jasper Reports 中），则可以使用 Unicode 字符作为上划线：

```
&radic;E&#x0305; 
```

不过，有时必须使用这种方法调整字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:40:08.640

这对于您的场景来说可能是多余的，但请查看在[math.stackexchange.com](http://math.stackexchange.com)上使用的[MathJax](http://www.mathjax.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:45:33.267

[此](http://www.scientificpsychic.com/etc/square-root.html)页面提供了一个很好的示例，您可以如何将 Ilmo 的解决方案应用于复杂的公式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T03:33:55.010

我终于解决了。实际上我的公式是 FWHM=0.921+0.039*√E。我将公式分为三个部分：

1.  FWHM=0.921+0.039*
2.  √</li>
3.  乙

我已经创建了样式标签或对象，例如

```
<style name="table_TH" mode="Opaque" backcolor="#FFFFFF"> <box> <topPen lineWidth="1.5" lineColor="#000000"/> </box> </style> 
```

然后我将此对象添加到我的静态字段属性中，并将垂直对齐设置为 E 的中间。然后这只是 ireport 中的调整问题。感谢大家的帮助。

# ruby-on-rails - 如何避免无法从控制器批量分配受保护的属性问题

> ID：11357032
> 
> 赞同：0
> 
> 时间：2012-07-06T06:36:05.990
> 
> 标签：ruby-on-rails, mass-assignment

比方说，我有 2 个使用相同数据库（应用程序）的应用程序，并且我有一个字段说：**cool**，所以我想在第一个应用程序中使用这个字段，而不是在第二个应用程序中。那么如何避免这个错误**Can't mass-assign protected attributes** without using attr_accessible in database(app) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:05:48.860

我不确定我是否理解，但这是我通常做的：

```
protected_attribute = params[:blog_post].delete(:protected_attribute)

@blog_post = BlogPost.new(params[:blog_post])
@blog_post.protected_attribute = protected_attribute
if @blog_post.save
  # ...
else
  # ...
end 
```

这很丑陋，但绕过了质量分配保护。

**更新：**您还必须从参数中删除受保护的属性。

# iphone - 为什么在 touchesBegan 中传递的是触摸（设置）而不是触摸？

> ID：11357033
> 
> 赞同：2
> 
> 时间：2012-07-06T06:36:08.567
> 
> 标签：iphone, ios, uiview, touch

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

为什么'touches'不仅仅是'touch'被传递给touchesBegan/Moved/Ended？

它们的意义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:41:11.447

这是因为用户可能会（快速）进行多次点击，在这种情况下，您将收到一组多个`NSTouch`对象。

双击滚动（或图像）视图时的缩放效果就是一个演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:39:06.207

因为您可以接收多个触摸，但默认情况下它们是禁用的。为了接收多个触摸事件，您必须将`multipleTouchEnabled`相应视图实例的属性设置为`YES`并使用 2 个或更多手指进行触摸。

# mysql - 如何使用 MySQL 检查数据库中是否已存在表？

> ID：11357034
> 
> 赞同：4
> 
> 时间：2012-07-06T06:36:08.667
> 
> 标签：mysql, database, exists

现在我正在使用类似的东西：

```
dbResult = dbStatement.executeQuery("SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = '[e2]' AND table_name = '[emp101_messages]'");
while(dbResult.next())
{
    int value = -1;
    value= dbResult.getInt(1);
    System.out.println(value + " table count");
} 
```

这是检查数据库中是否存在表的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:22:20.227

```
SELECT table_name
FROM information_schema.tables
WHERE table_schema = 'dbname'
  AND table_name = 'my_tablename';

+----------------------+
| table_name           |
+----------------------+
| my_tablename |
+----------------------+ 
```

由于已经提供了大多数选项。请看看这是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:39:30.303

用这个：

```
SHOW [FULL] TABLES [{FROM | IN} db_name]
    [LIKE 'pattern' | WHERE expr] 
```

有时您无权访问元数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T06:41:11.113

如果您只想检查是否存在 1、2 或更多表，为什么不使用：`mysql> show tables like "test1";`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T06:41:47.540

您还可以使用：

```
SHOW TABLES LIKE "emp101_messages"; 
```

我认为这样更有效率。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T07:12:44.330

这是正确的做法。（只是对表名周围的“[]”大括号感到困惑——这些很可能不是实际名称的一部分，因此需要删除）

此外，这是一种有效的方法：由于您为两者`table_schema`以及 for提供了一个常量`table_name`，因此您正在使用[INFORMATION_SCHEMA 优化](http://dev.mysql.com/doc/refman/5.1/en/information-schema-optimization.html)，因为该表甚至没有打开：

```
explain select count(*) from information_schema.tables where table_schema='world' and table_name='City';
+----+-------------+--------+------+---------------+-------------------------+---------+------+------+---------------------------------------------------+
| id | select_type | table  | type | possible_keys | key                     | key_len | ref  | rows | Extra                                             |
+----+-------------+--------+------+---------------+-------------------------+---------+------+------+---------------------------------------------------+
|  1 | SIMPLE      | tables | ALL  | NULL          | TABLE_SCHEMA,TABLE_NAME | NULL    | NULL | NULL | Using where; Skip_open_table; Scanned 0 databases |
+----+-------------+--------+------+---------------+-------------------------+---------+------+------+---------------------------------------------------+ 
```

提供的“SHOW TABLES”解决方案也很好——就 Java/Python/Whatever 代码而言几乎相同。结果是一个有效的 ResultSet：

```
SHOW TABLES FROM world LIKE 'City';
+------------------------+
| Tables_in_world (City) |
+------------------------+
| City                   |
+------------------------+ 
```

但是为了完成这个故事：它不是标准的 SQL 语法——所以如果你使用某种框架，比如某种 ORM，你可能并不总是能够处理这种类型的查询（我记得 EJB3 会不让你这样做）。

此外，在服务器端解析非常困难，请参阅：[Reading results of SHOW statements, on server side](http://code.openark.org/blog/mysql/reading-results-of-show-statements-on-server-side)，尽管这可能不是您关心的问题。

# php - 带有 XML 发布数据问题的 CURL

> ID：11357035
> 
> 赞同：0
> 
> 时间：2012-07-06T06:36:10.867
> 
> 标签：php, parsing, curl, encoding, xml-parsing

我正在使用 CURL-PHP 将数据发布到服务器。选项通过 curl_setopt 函数设置为 curl。但不知何故，匿名用户在他的密码中输入了“&”。由于数据是在 xml 中收集的，因此 Xml 的缺点是它停在那里并引发一些 XML 异常。如果我使用 CDATA，那么它可能无法解析该密码，最终身份验证将失败。我使用了 php 编码函数，如 htmlentities、html_entit_decode、utf8_encode、utf8_encode、urlencode 和 urldecode。但问题是一样的。有什么方法可以通过 XML 发送“&”并通过 CURL 发布该数据。据我所知，CURL 本身在内部进行解析。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:55:34.063

首先在发布之前确保 XML 字符串包含`&amp`在密码中

`(<password>123&amp;</password>`或`<user password="123&amp;"></user>`为`123&amp;`

`htmlentities()`必须应用于 $password，也不能应用于 $xml_data。比确保它附加到 curl 请求，如`curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_data)`；

没有任何额外的编码。它应该工作！在其他情况下，POST 处理程序方面的问题。

# ajax - 从 Safari 上传二进制数据，无需用户选择文件

> ID：11357041
> 
> 赞同：0
> 
> 时间：2012-07-06T06:36:35.880
> 
> 标签：ajax, upload, safari, binary, xmlhttprequest

有几个 HTML5 功能（BlobBuilder、ArrayBuffer）和 HTML5 之前的 hacks ( `charset=x-user-defined`) 用于处理`XMLHttpRequest`.

据我所知，没有什么可以让 Safari 上传不在用户交互选择的文件中的二进制数据，并以`"multipart/form-data"`.

事实上，我试图发送的数据已经在文件系统中，而且我有一个`file://`指向它的 URL。这是一个PhoneGap 应用程序。但是由于存在安全风险，没有办法让浏览器接受，而且PhoneGap的FileTransfer功能没有用，因为它缺乏进度条支持。

在这一点上，我愿意完全放弃兼容性，因为 HTML 和 JavaScript 文件将被下载并存储在客户端。而且该应用程序已经需要 iPhone 4，因此我可以要求最新的浏览器版本。有没有办法让 Safari 5.1 上传二进制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:21:36.553

也许 Phonegap 的 File Uploader 插件（[iOS 版](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/FileUploader)、[iPhone 版](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/FileUploader)）可以提供帮助？它有一个进度回调。

> `progress`调用上传进度。签名应该是`function(bytesUploaded, totalBytes)`

文档中的示例：

```
window.plugins.fileUploader.uploadByUri(
    'http://example.com/upload',
    'file://path/to/file.jpg', 
    {foo: 'bar'}, 
    'myPhoto', 
    'anImage.jpg',
    'image/jpeg', 
    function(result) {
        console.log('Done: ' + result);
    }, 
    function(result) {
        console.log("Error: " + result);
    }, 
    function(loaded, total) {
        var percent = 100 / total * loaded;
        console.log('Uploaded  ' + percent);

    }
); 
```

# openssl - 证书的 openssl 命令

> ID：11357042
> 
> 赞同：0
> 
> 时间：2012-07-06T06:36:35.757
> 
> 标签：openssl

这个 openssl 命令会生成自签名证书文件吗？我知道 csf 应该由 CA 签名以生成证书。

“openssl ca -config /etc/openssl.cnf \ -extensions client_cert -batch -in users/$name.csr -out users/$name.crt 2> /dev/null”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:29:28.430

让我自己回答：

命令：openssl ca，会用CA的私钥对证书请求（name.csr）进行签名，即用CA的私钥对证书中的签名字段进行加密，输出为name.crt

# javascript - 使用 javascript 进行正则表达式验证

> ID：11357045
> 
> 赞同：0
> 
> 时间：2012-07-06T06:36:50.633
> 
> 标签：javascript, regex

我需要根据 javascript 中的正则表达式验证文本。我的正则表达式工作正常，但无法找出为什么它不能在 java 脚本中工作。

正则表达式是 this ,`^([-+/*]\d+(\.\d+)?)*`

有效的表达式是`+7`or `+9.36*8`or`+4-9.3/5.0`

无效匹配是`test`或`8.36`

这是代码，

```
 var ck_diffrentialformula = /^([-+/*]\d+(\.\d+)?)*/;

            function radtxtbxLinkedDifferentialFormulaOnBlur(sender, eventArgs) {
                if (sender.get_value().length > 0) {

                    var entered_value = sender.get_value();

                    if (ck_diffrentialformula.test(entered_value)) {
                     alert('Text Matches');
                    }
                    else {
                     alert('Text does not match');
                    }
                }
            }

sender.get_value() - gives the text box value over here. 
```

请告诉我我在哪里做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:43:14.000

我假设你正在使用它是这样的：

```
<input type="text" onchange="radtxtbxLinkedDifferentialFormulaOnBlur(this,null)" /> 
```

`sender`没有方法`.get_value()`，所以甚至行不通。替换它，它似乎工作。

```
function radtxtbxLinkedDifferentialFormulaOnBlur(sender, eventArgs) {
    console.log(sender)
    if (sender.value.length > 0) {
        console.log(sender.value);
        if (ck_diffrentialformula.test(sender.value)) {
         console.log('Text Matches');
        }
        else {
         console.log('Text does not match');
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:00:47.927

也许你想试试这个表达式：`/^([\-+\/*]\d+(\.\d+)?)*$/`
它在正则表达式中转义“-”和“/”（jsbin 建议）并考虑整个字符串（`$`在末尾）。

# c++ - Microsoft 2010 Visual c，安装 FLTK

> ID：11357047
> 
> 赞同：1
> 
> 时间：2012-07-06T06:36:57.583
> 
> 标签：c++, visual-studio-2010, fltk

MSV2010C++ 的 FLTK 问题

我正在关注“编程 - 使用 C++ 的原则和实践”。

尝试让 FLTK 正确运行时遇到了麻烦。我为我工作过一次，然后再也没有。我已经详细说明了下面采取的步骤，如果有人能注意到任何奇怪的事情，我将不胜感激。

我主要担心以下几点：1）链接器>输入>附加依赖项中的步骤有点令人困惑2）我已经为1.1.9和1.3.0构建了两个解决方案。这些会冲突吗？3）我对这个过程的理解至少可以说是基本的。

建筑实际上实现了什么？它会创建什么对象？我如何检查这些是否正确制作？

系统 Windows 7（64 位）（Microsoft 2010 Visual C++）

为 fltt 1.1.9 尝试的步骤

1 下载 fltk-1.1.9-source

2 vlC2005 解决方案给了我以下结果：

```
========== Build: 66 succeeded, 3 failed, 0 up-to-date, 1 skipped ========== 
```

3 将 lib 文件从源复制到 x:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib

4 将 FL FOLDER 复制到（因此添加/替换文件夹）x:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\

5 如果我尝试运行解决方案，它会失败 -

```
========== Build: 6 succeeded, 3 failed, 0 up-to-date, 0 skipped ========== 
```

6 创建一个名为graphics6的新项目，作为win32项目

7 应用程序设置 - Windows 应用程序和空项目

8 在源文件中，创建graphics6.cpp，添加如下代码

```
 #include <FL/Fl.h>
    #include <FL/Fl_Box.h>
    #include <FL/Fl_Window.h>

    int main()
    {
    Fl_Window window(200,200,"Window Title");
    Fl_Box box(0,0,200,200,"Hey");
    window.show();
    return Fl::run();
    } 
```

9 当我运行它时，我得到以下信息

```
 1>MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external symbol _WinMain@16  
  referenced in function ___tmainCRTStartup 
```

10 更改项目设置 - 链接器 > 输入 > 附加依赖项：

```
 "kernel32.lib;user32.lib;gdi32.lib;winspool.lib;comdlg32.lib;advapi32.lib;
 shell32.lib;ole32.lib;oleaut32.lib;uuid.lib;odbc32.lib;odbccp32.lib;%(fltkd.lib
 wsock32.lib comctl32.lib fltkjpegd.lib fltkimagesd.lib)" 
```

11 当我跑步时，我得到了这个——

```
 1>MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external symbol 
_WinMain@16 referenced in function ___tmainCRTStartup 
```

结论 MS2010VC++下无法构建1.1.9

让我们尝试 1.3 代替 --------

1 下载 1.3 并运行解决方案 \fltk-1.3.0-source\fltk-1.3.0\ide\VisualC2010\fltk.sln

2 构建它（我已经这样做了几次，所以它给出了以下结果：

```
========== Build: 0 succeeded, 0 failed, 79 up-to-date, 0 skipped ========== 
```

3 如果我运行它，我会在屏幕上看到图形。到目前为止，一切都很好！

4 将 lib 文件从源复制到 x:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib

5 将 FL FOLDER 复制到（因此添加/替换文件夹）x:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\

6 步骤 6 - 8 与上面相同，所以只是加载了之前的项目。

7 当我跑步时

```
 1>MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external symbol _WinMain@16
 referenced in function ___tmainCRTStartup
 1>C:my information \visual studio 2010\Projects\graphics6\Debug\graphics6.exe : fatal 
 error LNK1120: 1 unresolved externals 
 ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

8 添加忽略默认库> libcd.lib

9 再次运行，结果相同

很抱歉这篇文章的长度，但我觉得澄清问题的唯一方法是包含所有细节。

据我所知，我正在尽可能地遵循说明。主要问题是我无法运行 1.1.9。

我已经在许多网站上搜索了这个问题的解决方案，但还没有找到详细的分步记录过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:30:19.550

FLTK 1.3.0

好的，我终于找到了解决方案（大约 12 小时后）-

第 1 部分 - 构建 FLTK

1.  下载 fltk-1.3.0 并解压。
2.  将包含的 fltk-1.3.0 文件夹复制到 C:\（您可以使用其他位置，但您必须更改一些命令）。
3.  进入 C:\fltk-1.3.0\ide\VisualC2010 并运行 fltk.sln
4.  右键单击它并单击构建
5.  它应该没有错误地完成。如果有错误，我非常怀疑本指南会对您有所帮助。
6.  完成后，您应该能够运行它（将打开窗口）。

第 2 部分 - 运行您自己的项目假设构建正确，您现在可以按照以下步骤操作：

1.  启动 MSVC++2010
2.  文件>新建>项目 - 选择 Win32 项目并命名

    ```
     FLTK-Test3 
    ```

3.  单击向导上的下一步，然后单击应用程序类型：保留为 Windows 应用程序附加选项：空项目单击完成

4.  右键单击解决方案资源管理器上的源文件，添加

    ```
     FLTK-Test3.cpp 
    ```

5.  右键单击 FLTK-Test3 并进入属性

    a) 配置属性>C/C++>命令行>附加选项 - 添加

    ```
     /Ic:\fltk-1.3.0 
    ```

    b) Configuration Properties>Linker>Input>Additional Dependencies> 这是最难的部分，需要添加

    ```
     c:\fltk-1.3.0\lib\fltkd.lib;wsock32.lib;comctl32.lib;c:\fltk-1.3.0\lib\fltkjpegd.lib;c:\fltk-1.3.0\lib\fltkimagesd.lib; 
    ```

    到行尾（替换 #() 信息。我的更改导致了这一点，您的可能会有所不同 -

    ```
     kernel32.lib;user32.lib;gdi32.lib;winspool.lib;comdlg32.lib;advapi32.lib;shell32.lib;ole32.lib;oleaut32.lib;uuid.lib;odbc32.lib;odbccp32.lib;c:\fltk-1.3.0\lib\fltkd.lib;wsock32.lib;comctl32.lib;c:\fltk-1.3.0\lib\fltkjpegd.lib;c:\fltk-1.3.0\lib\fltkimagesd.lib; 
    ```

.lib 文件末尾的“d”表示调试，因此对于最终构建，我认为您应该包含没有“d”的那些。所以 ..fltkjpeg.lib 不是 ..jpegd.lib。

如果这部分工作正常，当你添加代码的第一行#include 时，它​​不应该加下划线。如果是，那就有问题了。

c）您可能还必须这样做（如果它不运行）

配置属性>链接器>输入>忽略特定默认库>

```
 libcd.lib 
```

1.  完成所有这些后，您应该可以在下面添加完整的代码 -

    ```
    #include <FL/Fl.h>
    #include <FL/Fl_Window.h>

    int main()
    {
     Fl_Window win(320,200);
     win.show();
     return Fl::run();
    } 
    ```

输入上面的代码，然后运行。

我仍然有很多错误，-

```
 'FLTK-Test3.exe': Loaded 'C:\Users\USER\Documents\Visual Studio 2010\Projects\FLTK-Test3\Debug\FLTK-Test3.exe', Symbols loaded.
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.windows.common- controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\comctl32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\user32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\lpk.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\usp10.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\msvcr100d.dll', Symbols loaded.
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\comdlg32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\shlwapi.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\shell32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\uxtheme.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\dwmapi.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\clbcatq.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\msimtf.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Loaded 'C:\Windows\SysWOW64\version.dll', Cannot find or open the PDB file
  'FLTK-Test3.exe': Unloaded 'C:\Windows\SysWOW64\msimtf.dll'
  'FLTK-Test3.exe': Unloaded 'C:\Windows\SysWOW64\version.dll' 
```

..但它跑了！

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:11:22.390

大卫，我建议你观看 Greg Ercolano 制作的这个优秀的（经过这么多年它仍然很震撼）视频教程：http: [//seriss.com/people/erco/fltk-videos/fltk-ms-vs-build.html](http://seriss.com/people/erco/fltk-videos/fltk-ms-vs-build.html)。该视频的标题为“*如何开始使用 Visual Studio 7.0 构建 FLTK* ”，但我相信它也适用于 VC 2010。

关于您的问题 - 我认为这只是可能导致问题的项目类型......将您的项目配置为 Win32 项目。虽然，FLTK 应用程序也应该作为控制台应用程序工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:45:38.200

您收到的错误消息表明，您可能已经创建了项目，而该项目的设置不是运行 FLTK 所需的设置（Win32 控制台应用程序）。

以下链接应该有所帮助。

[http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/b83e4884-9dec-4d67-ab92-90d5b6c8c51c/](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/b83e4884-9dec-4d67-ab92-90d5b6c8c51c/)

# android - 如何在 android ics 4.0.3 中使用 2 个麦克风

> ID：11357058
> 
> 赞同：2
> 
> 时间：2012-07-06T06:37:52.050
> 
> 标签：android, c, android-4.0-ice-cream-sandwich, linux-device-driver

我正在使用 Android ics 4.0.3 开发基于 AM3715 的定制设计板。板上有 2 个麦克风，耳机工作正常，但板载麦克风不工作......我想更改板载麦克风的耳机配置。我改变了信号在 /sound/soc/codec/twl4030.c 中，REG_ANAMIC 为 0x01 用于子麦克风和评论的耳机寄存器 REG_ANAMICL 。但是在没有从麦克风录制声音之后......任何人都可以帮忙吗？

# apache - 将 m.example.com 重定向到 m.example.com/subdir

> ID：11357061
> 
> 赞同：0
> 
> 时间：2012-07-06T06:38:10.443
> 
> 标签：apache, redirect

如何将 m.example.com 重定向到 m.example.com/subdir 我正在使用以下代码，但它变得循环并且无法正确重定向

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^m.example.com$ [NC]
RewriteRule (.*)$ http://m.example.com/subdir [R=301,L] 
```

我也不能使用：

```
redirect 301 / http://m.example.com/subdir 
```

因为我的主要 www 网站也会被重定向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:50:37.847

您需要添加一个条件，以便在请求已经针对 /subdir/ 时它不会重定向。在重写规则上方的某处添加：

```
RewriteCond %{REQUEST_URI} !^/subdir 
```

您的规则中还缺少反向引用：

```
RewriteRule (.*)$ http://m.example.com/subdir/$1 [R=301,L] 
```

如果您想要重定向的**唯一**内容是对根 (URI=/) 的请求，那么您不需要额外的重写条件，只需更改规则中的正则表达式：

```
RewriteRule ^$ http://m.example.com/subdir [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:09:24.493

要仅重定向 / 但不重定向它下的任何内容，您可以在您的`m.example.com` `<VirtualHost>`

```
RedirectMatch ^/$ http://m.example.com/subdir/ 
```

或者，如果您想将所有内容重定向到`subdir`除了对自身的请求之外，`subdir`您可以使用 mod_rewrite

```
RewriteCond %{REQUEST_URI} !^/subdir
RewriteRule ^(.*)$ http://m.example.com/subdir$1 [R=301,L] 
```

# jsoup - 如何使用jsoup来整理html

> ID：11357066
> 
> 赞同：8
> 
> 时间：2012-07-06T06:38:23.350
> 
> 标签：jsoup

我正在使用 jsoup，整理一些 html 真的很好，但是我有一段无效的 html，如下所示：

```
<p>The recurrence, in close succession <ul><li>list item 1</li><li>list item 2</li></ul> second part of thisssss 
```

我想要得到的是：

```
<p>The recurrence, in close succession </p><ul><li>list item 1</li><li>list item 2</li></ul> <p>second part of thisssss</p> 
```

那么 jsoup 是否能够整理 html 并返回此输出？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T16:54:13.243

是的，试试这个：

```
String html = "<p>The recurrence, in close succession <ul><li>list item 1</li><li>list item 2</li></ul> second part of thisssss";
String clean = Jsoup.clean(html, Whitelist.relaxed()); 
```

您也可以使用另一个[白名单](http://jsoup.org/apidocs/org/jsoup/safety/Whitelist.html)。

# javascript - 如何获取表单处理事件

> ID：11357069
> 
> 赞同：0
> 
> 时间：2012-07-06T06:39:00.473
> 
> 标签：javascript, jquery

我的代码就像这样简单

```
$(document).ready(function(){
   $('#somebutton').click(function(){
           $('#someformid').submit();
           return false;
    });

}); 
```

在此表单提交期间，通常页面将等待 1 或 2 秒加载，此时用户可以再次单击“某些按钮”，表单将再次提交。我的问题是如何锁定浏览器或禁用表单如果表单提交过程正在进行，则提交？

PS somebutton 是一个图像

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:41:19.543

您可以简单地禁用按钮在处理时单击。

```
$(document).ready(function(){
   $('#somebutton').click(function(){
           $('#someformid').submit();
           $(this).attr('disabled','disabled');
    });

}); 
```

或者你可以使用`e.preventDefault();`

```
$(document).ready(function(e){
       $('#somebutton').click(function(){
               $('#someformid').submit();
               e.preventDefault();
        });

    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T06:42:26.153

您可以使用[.one](http://api.jquery.com/one/)，它使处理程序最多执行一次。

```
 $('#somebutton').one('click', function(){
       $('#someformid').submit();
       return false;
   }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T06:44:25.747

将 attr disabled 添加到您的按钮

**编辑：**取消绑定点击事件。

```
$(document).ready(function(){
$('#somebutton').click(function(){
        $(this).unbind('click');
        $('#someformid').submit();
        return false;     
});  
}); 
```

# cordova - 如何使用 Sencha UI 的通用代码？

> ID：11357072
> 
> 赞同：1
> 
> 时间：2012-07-06T06:39:05.980
> 
> 标签：cordova, sencha-touch-2

在我的应用程序中，我在所有屏幕中都有一个顶部栏和底部标签栏。因此，当用户单击特定选项卡时，它只会更改屏幕的中间部分（选项卡栏和工具栏将相同）。所以我想为这个标签栏和工具栏写一些通用代码。那么我应该在哪里保留这些通用代码？它在视图文件夹中吗？

如果有人可以分享一些代码或示例项目，那将对我有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:38:51.917

似乎您要构建一个高度优化的应用程序。

最佳做法是：

1) 您的***MainView.js***应该如下所示：

```
Ext.define('app.views.MainView', {
  extend: 'Ext.Container' // container is the best way almost time
  config: {
    layout: 'card' // just for example
    items: [
       {xtype: 'MainTopToolbar'},
       {xtype: 'DynamicView'},
       {xtype: 'MainTabBar'},
    ]
    // other configs go here...
  }
}) 
```

此步骤的目的是为您的应用程序定义一个整体布局。如您所见，它包含 3 个主要组件（第二个是动态的 - 您将根据用户的交互进行更改）。

2) 定义您的***xtypes***，例如***MainTabBar***：

```
Ext.define('app.views.MainTabBar', {
  extend: 'Ext.TabBar',
  xtype: 'MainTabBar'.
  config: {
    docked: 'bottom',
    items: [
       // your tabs are defined here, see Ext.TabBar docs for more details
    ]
    // other configs go here...
  }
}) 
```

3) 将所有 xtypes 定义文件以及***MainView.js***放在**视图**文件夹中。

4) 在***app.js***中，调用`Ext.create('app.views.MainView');`

这个问题比较笼统，也有点复杂，请大家花点时间集思广益。如果有什么清楚的，请告诉我。

# .net - 如何创建 Microsoft Outlook Coded UI Extension 插件

> ID：11357078
> 
> 赞同：1
> 
> 时间：2012-07-06T06:39:19.913
> 
> 标签：.net, coded-ui-tests

我有一个集成在 Microsoft Outlook 中的 Autonomy/IManage（文档管理系统）应用程序，它为您提供标题、文档版本、作者等列中不同邮件项目部分的结果。我需要使用编码 UI 自动化此应用程序，但我无法选择像收件箱结果一样出现在另一个邮件项目部分的结果。我在网上搜索以找到除插件以外的替代方法来捕获这些结果，但除了编码的 ui 扩展插件之外无法找到。

有什么方法可以从 Outlook 中捕获这些项目？或者，如果我需要一个编码的 ui 扩展插件，有人可以提供已经有这个插件的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:38:35.200

我是通过OOM做到的。我使用发件人的电子邮件地址和电子邮件主题来查找邮件。代码如下。

```
private string SelectMail(string addressTag, string subject)

{
    Outlook.Application app = new Outlook.Application();
    Outlook.Explorer explorer = app.ActiveExplorer();
    explorer.ClearSelection();

    string senderEmail = Utils.Setting.Get(addressTag);

    IEnumerable<Outlook.MailItem> selectedMails = from Outlook.MailItem mailItem in explorer.CurrentFolder.Items
                                                  where mailItem.SenderEmailAddress == senderEmail && mailItem.Subject == subject
                                                  select mailItem;
    Outlook.MailItem mail = selectedMails.FirstOrDefault<Outlook.MailItem>();

    explorer.AddToSelection(mail);

    return mail.Subject;
} 
```

# php - PHP database tables query help request - String variables

> ID：11357084
> 
> 赞同：0
> 
> 时间：2012-07-06T06:39:43.530
> 
> 标签：php, string

Currently I am creating a news section for a website.

I have created it so that the news type is separated by a string E.g. category = ,2,4,6,

I don't normally use strings a whole lot, and my initial thought was to do something like this:

```
$query_listelements = "SELECT * FROM newsitems WHERE released = 1 AND (category = 2  OR category = 4 OR category = 6) ORDER BY date_rel DESC"; 
```

Clearly this won't work as I need to isolate / expand the string. so it needs to be something like:

```
$query_listelements = "SELECT * FROM newsitems WHERE released = 1 AND (category = strval(",2,")  OR category = strval(",4,") OR category = strval(",6,")) ORDER BY date_rel DESC"; 
```

I don't think the above is the right way to go out things either.

Any thoughts would be really valued!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:51:38.303

You may use it like below, sounds better to me.

```
$category= array ( 2, 4, 6);
$category = implode(',', $category); //Now it is a string like '2,4,6'
$query_listelements = "SELECT * FROM newsitems WHERE released = 1 AND (category IN ($category)) ORDER BY date_rel DESC"; 
```

# regex - 获取最后一个斜杠之后问号之前的字符串的正则表达式

> ID：11357085
> 
> 赞同：3
> 
> 时间：2012-07-06T06:39:46.370
> 
> 标签：regex

示例网址 = [http://www.example.com/aa/bb/cc/dd?q=ab&c=1](http://www.example.com/aa/bb/cc/dd?q=ab&c=1)

所以在这个网址中，我需要在最后一个斜杠之后和问号之前的值 dd

如何为此编写正则表达式

我已经写了在最后一个斜杠之后获取值，但无法弄清楚如何在查询字符串之前获取唯一的值“dd”。

正则表达式：[^/]+$

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:25:51.483

您可以使用下面的正则表达式。此正则表达式将匹配所有后跟`?`. 在您的情况下，它将是`dd`.

**编辑**：更新正则表达式以使用`\w`而不仅仅是字母。

```
[^\/][\w]+(?=\?) 
```

**解释**

```
[^\/] -- Do not match /
[\w]+ -- match word characters (letters, digits, underscore) 
(?=\?) -- Positive lookahead: Match alphabets(above condition) that are followed by a ? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T06:51:18.740

这将起作用，从技术上讲，它可以获取“/”和“？”之间的任何内容。您可能必须转义“/”，但我没有看到它在您的中转义，所以我没有转义。

`/([^/\?]+)\?`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T06:55:21.653

```
#(.*)/(.*)\?(.*)# 
```

由于我不确定您使用的是什么语言，所以我写了这个来为 PHP 工作。适应您正在使用的任何语言应该不难。

正则表达式的细分：

*   `#`- 正则表达式的开始和结束符号。
*   `(.*)/`- 匹配url中 final**之前的任何内容。**`/`
*   `(.*)\?`- 匹配最后`/`和之前之间的内容`?`。
*   尾随`(.*)#`- 匹配 后面的任何内容`?`，通常是查询字符串。

当然，正则表达式可以更短，但是这样，如果您认为合适，您还可以使用所获得 URL 的其他详细信息。

**编辑**

我已使用此代码，以及您提供的示例 URL：

```
<?php
    $url = "http://www.abc.com/aa/bb/cc/dd?q=ab&c=1";
    $regex = "#(.*)/(.*)\?(.*)#";
    preg_match_all($regex, $url, $matches);
    var_dump($matches);
?> 
```

这是它返回的内容：

```
array
  0 => 
    array
      0 => string 'http://www.abc.com/aa/bb/cc/dd?q=ab&c=1' (length=39)
  1 => 
    array
      0 => string 'http://www.abc.com/aa/bb/cc' (length=27)
  2 => 
    array
      0 => string 'dd' (length=2)
  3 => 
    array
      0 => string 'q=ab&c=1' (length=8) 
```

如您所见，正则表达式有效。

# java - 负载测试期间嵌入式 Jetty 中的内存泄漏

> ID：11357091
> 
> 赞同：2
> 
> 时间：2012-07-06T06:40:12.453
> 
> 标签：java, embedded-jetty

我正在使用嵌入式码头。我将它部署在一台 unix 机器上，我正在使用 top 命令监视内存。我写了一个类，它每秒向服务器发送 10 个请求。当请求数达到 16000 时，引擎开始抛出异常：Memory allocation failed during query processing。引擎对发送的每个请求执行 sql 查询。

我使用了详细选项，我注意到内存消耗的增加：

0 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 1401.581: [GC [PSYoungGen: 640K->128K(768K)​​] 126729K->126249K(130816K), 0.0004840 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 1401.585: [GC [PSYoungGen: 640K->96K(768K)​​] 126761K->126305K(130816K), 0.0004510 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 1401.590: [GC [PSYoungGen: 605K->128K(768K)​​] 126814K->126379K(130816K), 0.0004500 秒] [时间: 用户 = 0.01 系统 = 0.00, 实际 = 0.00 秒] 1401.595: [GC [PSYoungGen: 640K-K] >80K(768K)​​] 126891K->126419K(130816K)，0.0004270 秒] [时间：用户=0.00 系统=0.00，实际=0.00 秒]

我使用 jetty.xml 配置嵌入式码头服务器，我使用的是 queuedthreadpool，具有以下值：

最小线程：10 最大线程：20

谁能帮我识别内存泄漏？它与我访问数据库的方式有关吗？跟码头有关系吗？

以下是主要课程（从 eclipsepedia 中获取样本：（http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty）

```
public class PPTEST {

private static String fileName = "*************/properties.conf";
private static Properties p = new Properties();

public static void main(String[] args) throws Exception {

    try {
        loadProperties(fileName);

        Resource fileserver_xml = Resource.newResource("********/jetty.xml");

        XmlConfiguration configuration = new            XmlConfiguration(fileserver_xml.getInputStream());
        Server server = (Server) configuration.configure();

        server.setHandler(new HandlerApple());

        server.start();
        server.join()

    } catch (Exception e) {
        e.printStackTrace();
    }

}

private static void loadProperties(String fileName)
        throws IOException {

    FileInputStream propsFile = new FileInputStream(fileName);
    p.load(propsFile);
    propsFile.close();
} 
```

}

* * *

这是 HandlerApple 类：

公共类 HandlerApple 扩展 AbstractHandler {

```
//Properties p = new Properties();
private String CHARACTERS = "0123456789ABCDEF";
private String OK = "HTTP/1.1 200 OK";
Properties config;
public org.apache.log4j.Logger logger;
private String fileName = "****************/gprs-properties.conf";
private String smsformat = "*****************/smsformat.prop";
private Connection dbConn;
private HashMap hpSystem;
private HashMap hpConf;
private String prefix;
private String mobfiltering;
private String resp600;
private String resp601;
private String resp602;
private String resp603;
private String resp604;
private String resp605;
private String resp607;
private String resp608;
private String resp612;
private String resp613;
private String resp611;
private String resp606;
private String resp666;
private String ipH;
private String portH;
private String timeoutH;
private String trpmC;
private String ttpipC;
private String lpdC;
private String igprsC;
private String first_timeout;
private String second_timeout;
private PreparedStatement pstmt;
private ResultSet rs;
Random randomGenerator = new Random();

HandlerApple() {
    DatabaseSingleton d = new DatabaseSingleton();
    try {
        org.apache.log4j.PropertyConfigurator.configure("************/log4j.properties");
        logger = org.apache.log4j.Logger.getLogger(HandlerApple.class.getName());
        logger.info("Contructor Level");
        dbConn = d.getConnection();
        hpSystem = loadConfigFile(fileName);
        hpConf = loadConfigFile(smsformat);
        prefix = (String) hpSystem.get("prefixes");
        mobfiltering = (String) hpSystem.get("mobile-filtering");
        resp600 = (String) hpConf.get("600");
        resp601 = (String) hpConf.get("601");
        resp602 = (String) hpConf.get("602");
        resp603 = (String) hpConf.get("603");
        resp604 = (String) hpConf.get("604");
        resp605 = (String) hpConf.get("605");
        resp607 = (String) hpConf.get("607");
        resp608 = (String) hpConf.get("608");
        resp612 = (String) hpConf.get("612");
        resp613 = (String) hpConf.get("613");
        resp611 = (String) hpConf.get("611");
        resp606 = (String) hpConf.get("606");
        resp666 = (String) hpConf.get("666");
        ipH = (String) hpSystem.get("module-1.ip");
        portH = (String) hpSystem.get("module-1.port");
        timeoutH = (String) hpSystem.get("module-1.timeout");
        trpmC = (String) hpSystem.get("trpm");
        ttpipC = (String) hpSystem.get("ttpip");
        lpdC = (String) hpSystem.get("lpd");
        igprsC = (String) hpSystem.get("igprs.trpm");
        first_timeout = (String) hpSystem.get("timeout.1");
        second_timeout = (String) hpSystem.get("timeout.2");
        logger.info("==================================================================");
        logger.info("Clearing maps");
        logger.info("==================================================================");
        hpSystem.clear();
        hpConf.clear();
        pstmt = null;
        rs = null;
    } catch (Exception e) {
        e.printStackTrace();
    }
}

 public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {

   try{
   //Some code

   }catch (Exception e){
   //
   }

   finally {
            response.flushBuffer();
            if (pstmt != null) {
                try {
                    pstmt.close();
                } catch (SQLException ex) {
              Logger.getLogger(HandlerApple.class.getName()).log(Level.SEVERE, null,   ex);
                }
            }
            if (rs != null) {
                try {
                    rs.close();
                } catch (SQLException ex) {
               Logger.getLogger(HandlerApple.class.getName()).log(Level.SEVERE, null, ex);
                }
            }

        }

 } 
```

* * *

我正在使用 DatabaseSingleton 类：

```
public class DatabaseSingleton {
    //Static instance of connection, only one will ever exist

    private Connection connection = null;
    //Returns single instance of connection

    public Connection getConnection() {
        //If instance has not been created yet, create it
        if (connection == null) {
            initConnection();
        }
        return connection;
    }

    private void initConnection() {
        try {
            Class.forName("com.informix.jdbc.IfxDriver");
            Properties p=new Properties();
            loadProperties("************/gprs-properties.conf", p);
            String dburl = p.getProperty("gprs.informix.url");
            String dbuser = p.getProperty("gprs.informix.user");
            String dbpass = p.getProperty("gprs.informix.password");
            connection =
                    DriverManager.getConnection(dburl, dbuser, dbpass);

        } catch (ClassNotFoundException e) {
            System.out.println(e.getMessage());
            System.exit(0);
        } catch (SQLException e) {
            System.out.println(e.getMessage());
            System.exit(0);
        } catch (Exception e) {
        }
    }
private void loadProperties(String fileName, Properties p)
            throws IOException {

        FileInputStream propsFile = new FileInputStream(fileName);
        p.load(propsFile);
        propsFile.close();

    } 
```

* * *

抛出异常并停止引擎后，将打印以下内容（使用详细选项）：

```
 Heap
 PSYoungGen      total 832K, used 288K [0xb4d60000, 0xb4e60000, 0xb4e60000)
  eden space 640K, 32% used [0xb4d60000,0xb4d94060,0xb4e00000)
  from space 192K, 41% used [0xb4e30000,0xb4e44010,0xb4e60000)
  to   space 192K, 0% used [0xb4e00000,0xb4e00000,0xb4e30000)
 PSOldGen        total 219520K, used 212479K [0x94e60000, 0xa24c0000, 0xb4d60000)
  object space 219520K, 96% used [0x94e60000,0xa1ddfc50,0xa24c0000)
 PSPermGen       total 16384K, used 8145K [0x90e60000, 0x91e60000, 0x94e60000)
  object space 16384K, 49% used [0x90e60000,0x91654420,0x91e60000) 
```

* * *

异常跟踪如下：

```
java.sql.SQLException: Memory allocation failed during query processing.
        at com.informix.util.IfxErrMsg.getSQLException(IfxErrMsg.java:373)
        at com.informix.jdbc.IfxSqli.a(IfxSqli.java:3208)
        at com.informix.jdbc.IfxSqli.E(IfxSqli.java:3518)
        at com.informix.jdbc.IfxSqli.dispatchMsg(IfxSqli.java:2353)
        at com.informix.jdbc.IfxSqli.receiveMessage(IfxSqli.java:2269)
        at com.informix.jdbc.IfxSqli.executePrepare(IfxSqli.java:1153)
        at com.informix.jdbc.IfxPreparedStatement.e(IfxPreparedStatement.java:318)
        at com.informix.jdbc.IfxPreparedStatement.a(IfxPreparedStatement.java:298)
        at com.informix.jdbc.IfxPreparedStatement.<init>(IfxPreparedStatement.java:168)
        at com.informix.jdbc.IfxSqliConnect.h(IfxSqliConnect.java:5918)
        at com.informix.jdbc.IfxSqliConnect.prepareStatement(IfxSqliConnect.java:1999)
        at pinpayhttp.HandlerApple.checkIP(HandlerApple.java:520)
        at pinpayhttp.HandlerApple.handle(HandlerApple.java:227)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
        at org.eclipse.jetty.server.Server.handle(Server.java:346)
        at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:596)
        at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1068)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:807)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220)
        at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:426)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:520)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:528)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.sql.SQLException
        at com.informix.util.IfxErrMsg.getSQLException(IfxErrMsg.java:373)
        at com.informix.jdbc.IfxSqli.E(IfxSqli.java:3523) 
```

## ... 21 更多

## jmap -histo:live 12469

内存分配失败异常后：

```
 1:        209324       76966096  [Ljava.lang.Object;
       2:         12971       45337576  [B
       3:       1537794       24604704  java.lang.Integer
       4:        172537       13265160  [C
       5:         32768       10223616  com.informix.jdbc.IfxSqli
       6:         32767        6291264  com.informix.jdbc.IfxPreparedStatement
       7:        207565        4981560  java.util.Vector
       8:         39807        4056792  [I
       9:        160921        3862104  java.lang.String
      10:         32767        3145632  com.informix.jdbc.IfxResultSet
      11:         19329        2202664  <constMethodKlass>
      12:         21846        2097216  com.informix.jdbc.IfxColumnInfo
      13:         19329        1550760  <methodKlass>
      14:         32767        1310680  com.informix.jdbc.IfxResultSetMetaData
      15:         30807        1118264  <symbolKlass>
      16:          1400         843192  <constantPoolKlass>
      17:         10901         784872  com.informix.jdbc.IfxChar
      18:          1400         597000  <instanceKlassKlass>
      19:          1276         542848  <constantPoolCacheKlass>
      20:         32774         524384  java.lang.StringBuffer
      21:         10923         524304  com.informix.jdbc.IfxRowColumn
      22:          1274         326536  <methodDataKlass>
      23:          2258         181760  [S
      24:          1563         150048  java.lang.Class
      25:          2147         117904  [[I
      26:          2820          67680  java.util.HashMap$Entry
      27:          1936          46464  java.lang.StackTraceElement
      28:           134          42880  <objArrayKlassKlass>
      29:           319          42456  [Ljava.util.HashMap$Entry;
      30:          1478          35472  java.util.Hashtable$Entry
      31:           293          18752  org.eclipse.jetty.io.BufferCache$CachedBuffer
      32:           212          16008  [Ljava.lang.String;
      33:           445          14240  org.eclipse.jetty.util.StringMap$Node
      34:            76          14000  [Ljava.util.Hashtable$Entry;
      35:           163          13040  [Lorg.eclipse.jetty.util.StringMap$Node;
      36:           301          12040  java.util.HashMap
      37:           358          11456  java.util.LinkedHashMap$Entry
      38:           308           9856  java.lang.ref.SoftReference
      39:            89           8816  [Ljava.lang.StackTraceElement;
      40:           140           7840  org.eclipse.jetty.io.ByteArrayBuffer
      41:           195           7800  java.sql.SQLException
      42:           192           6144  java.util.concurrent.ConcurrentHashMap$Segment
      43:            81           5184  java.lang.reflect.Constructor
      44:            10           4896  [[Ljava.lang.Object;
      45:           294           4704  java.util.jar.Attributes$Name
      46:           195           4680  java.util.concurrent.locks.ReentrantLock$NonfairSync
      47:            78           4368  java.net.URL
      48:           161           3864  java.lang.ref.WeakReference
      49:           192           3440  [Ljava.util.concurrent.ConcurrentHashMap$HashEntry;
      50:           143           3432  sun.security.util.ObjectIdentifier
      51:            85           3400  java.math.BigInteger
      52:           138           3312  java.util.ArrayList
      53:            66           3168  java.beans.MethodDescriptor
      54:            98           3136  java.lang.ref.Finalizer
      55:            56           3136  java.security.Provider$Service
  56:           124           2976  com.sun.org.apache.xerces.internal.xni.QName
  57:            24           2880  java.net.SocksSocketImpl
  58:           118           2832  java.security.Provider$ServiceKey
  59:             8           2560  <typeArrayKlassKlass>
  60:             6           2464  [Lcom.sun.org.apache.xerces.internal.xni.QName;
  61:            61           2440  java.util.Hashtable
  62:            22           2288  sun.nio.ch.SocketChannelImpl
  63:            25           2248  [Z
  64:             2           2248  [Lorg.eclipse.jetty.http.HttpStatus$Code;
  65:           140           2240  java.util.jar.Attributes
  66:            70           2240  java.lang.ThreadLocal$ThreadLocalMap$Entry
  67:             7           2120  [J
  68:             1           2048  [Lorg.eclipse.jetty.http.HttpGenerator$Status;
  69:            36           2016  java.nio.DirectByteBuffer
  70:           251           2008  java.lang.Object
  71:            27           1944  java.util.jar.JarFile$JarFileEntry
  72:            21           1680  java.lang.reflect.Method
  73:            16           1664  java.lang.Thread
  74:            65           1560  java.util.concurrent.ConcurrentHashMap$HashEntry
  75:            19           1520  [Ljava.lang.ThreadLocal$ThreadLocalMap$Entry;
  76:            14           1456  [[Ljava.lang.String;
  77:            36           1440  sun.misc.Cleaner
  78:            30           1440  java.util.ResourceBundle$CacheKey
  79:            22           1408  java.beans.PropertyDescriptor
  80:            35           1400  sun.misc.URLClassPath$JarLoader
  81:            73           1360  [Ljava.lang.Class;
  82:            27           1296  java.lang.Package
  83:            81           1296  java.util.HashMap$EntrySet
  84:            27           1296  java.util.jar.JarFile
  85:            50           1200  sun.security.util.DerInputBuffer
  86:            50           1200  sun.security.util.DerValue
  87:            30           1200  java.util.ResourceBundle$BundleReference
  88:            50           1200  sun.security.x509.RDN
  89:            47           1128  java.net.InetSocketAddress
  90:            47           1128  org.eclipse.jetty.http.HttpStatus$Code
  91:            47           1128  java.io.ExpiringCache$Entry
  92:            10           1120  <klassKlass>
  93:            46           1104  org.eclipse.jetty.http.HttpGenerator$Status
  94:             8           1088  java.text.DecimalFormat
  95:            45           1080  java.net.Inet4Address
  96:             2           1056  [Ljava.lang.Integer;
  97:            22           1056  sun.nio.ch.SocketAdaptor
  98:             1           1040  [Lcom.sun.org.apache.xerces.internal.impl.dtd.models.ContentModelValidator;
  99:             1           1040  [Lsun.text.normalizer.UnicodeSet;
 100:             1           1040  [Lcom.sun.org.apache.xerces.internal.impl.dv.DatatypeValidator;
 101:             8           1000  [Ljava.beans.MethodDescriptor;
 102:            41            984  com.sun.org.apache.xerces.internal.util.SymbolTable$Entry
 103:            12            960  [Ljava.util.concurrent.ConcurrentHashMap$Segment;
 104:            30            960  java.util.ResourceBundle$LoaderReference
 105:            40            960  com.informix.util.IfxMessage$bundleMap
 106:            58            928  <compiledICHolderKlass>
 107:            28            896  java.util.zip.Inflater
 108:             8            896  java.util.GregorianCalendar
 109:            36            864  java.nio.DirectByteBuffer$Deallocator
 110:             9            864  sun.util.calendar.Gregorian$Date
 111:            52            832  java.security.Provider$UString
 112:            50            800  sun.security.util.DerInputStream
 113:            50            800  sun.security.x509.AVA
 114:            50            800  [Lsun.security.x509.AVA;
 115:            33            792  sun.reflect.NativeConstructorAccessorImpl
 116:            16            768  java.util.LinkedHashMap
 117:            23            736  java.util.Locale
 118:            30            720  java.security.Provider$EngineDescription
 119:            18            720  com.sun.org.apache.xerces.internal.impl.dtd.XMLSimpleType
 120:             1            704  [Lcom.sun.org.apache.xerces.internal.util.SymbolTable$Entry;
 121:             2            640  <arrayKlassKlass>
 122:            16            640  java.util.WeakHashMap$Entry
 123:            39            624  java.util.regex.Pattern$CharPropertyNames$1
 124:            19            608  java.io.ObjectStreamField
 125:            15            600  sun.nio.cs.ISO_8859_1$Decoder
 126:            25            600  com.sun.org.apache.xerces.internal.util.XMLStringBuffer
 127:            12            576  java.nio.HeapByteBuffer
 128:            36            576  sun.reflect.DelegatingConstructorAccessorImpl
 129:            12            576  sun.security.x509.X500Name
 130:            11            528  java.util.Properties
 131:            22            528  java.util.Date
 132:            22            528  com.sun.org.apache.xerces.internal.xni.XMLString
 133:            22            528  sun.security.x509.OIDMap$OIDInfo
 134:            22            528  [Ljava.nio.channels.SelectionKey;
 135:             8            512  java.text.DecimalFormatSymbols
 136:            21            504  java.security.AccessControlContext
 137:            21            504  sun.security.x509.AVAKeyword
 138:             7            504  org.eclipse.jetty.io.nio.DirectNIOBuffer
 139:            31            496  java.io.FileDescriptor
 140:            12            480  java.util.concurrent.ConcurrentHashMap
 141:            15            480  com.sun.org.apache.xerces.internal.impl.dtd.XMLElementDecl
 142:            19            456  java.lang.ThreadLocal$ThreadLocalMap
 143:             7            448  java.text.SimpleDateFormat
 144:             8            448  org.eclipse.jetty.io.nio.IndirectNIOBuffer
 145:             9            432  sun.util.calendar.ZoneInfo
 146:            17            408  com.informix.msg.bundleMap
 147:             5            400  java.net.URI

    Total       2644614      206176808 
```

任何人都可以帮忙吗？我只是需要一些指导...

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:15:08.523

对于高负载，您的内存限制似乎非常低。`-mx1g`如果您有更多内存（和 64 位 JVM），我会尝试作为开始。

您可以打印确切的异常，因为消息可能很重要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:19:22.593

制作一个堆转储（“jmap -dump:live,file=yourdump.hprof”）并使用分析工具查看它。试试 [http://www.dr-brenschede.de/bheapsampler/](http://www.dr-brenschede.de/bheapsampler/) 或 [http://www.eclipse.org/mat/](http://www.eclipse.org/mat/)

“jmap -histo”中的 32767 条准备好的语句看起来很奇怪，但您需要找出是什么保留了它们。

# html - CSS 菜单对齐问题

> ID：11357092
> 
> 赞同：0
> 
> 时间：2012-07-06T06:40:16.183
> 
> 标签：html, css

我有一个 CSS 菜单，如[http://jsfiddle.net/Lijo/vZgTP/15/所示](http://jsfiddle.net/Lijo/vZgTP/15/)

菜单中有一个箭头标记，如下图：

![在此处输入图像描述](../Images/905b8e1983183b6998b4498d02720479.png)

只有在箭头标记下方拖动鼠标时，我才能选择（突出显示）子菜单项。在其他地方向下移动鼠标不允许突出显示孩子（他们只是消失）。

![在此处输入图像描述](../Images/0b55d711260929cd0f551b155e1477f7.png)

我正在努力实现两件事：

1）无论箭头标记如何，都允许选择的孩子

2）删除箭头标记[箭头根本不应该出现在图片中（即使我没有悬停）。]

我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:11:46.797

所以，这是你的答案：http: [//jsfiddle.net/surendraVsingh/vZgTP/21/](http://jsfiddle.net/surendraVsingh/vZgTP/21/)

**删除箭头标记：**`#cssmenu > ul > li.has-sub > a:before`完全删除

**无论箭头标记如何，都允许选中的孩子**

`padding:6px 20px;`的变化`#cssmenu > ul > li > a`

```
#cssmenu > ul > li > a{ 
 outline:none; 
 display:block; 
 position:relative;
 padding:6px 20px; /*Change This*/
 font:bold 13px/100% Arial, Helvetica, sans-serif; 
 text-align:center; 
 text-decoration:none; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:45:12.423

像这样的索引属性

```
#cssmenu > ul > li.has-sub > a:before{
z-index:999;
}

#cssmenu ul li > ul, #cssmenu ul li > div{
z-index:99;
} 
```

现场演示[http://jsfiddle.net/vZgTP/17/](http://jsfiddle.net/vZgTP/17/)

---**更新**

现在在 css 文件中执行此操作

```
#cssmenu > ul > li.has-sub > a:before{
display:none;
}
#cssmenu > ul > li.has-sub:hover a:before{
display:block;
} 
```

现场演示[http://jsfiddle.net/vZgTP/19/](http://jsfiddle.net/vZgTP/19/)

# android - 我可以在 Appcelerator Titanium 中使用本机库吗？

> ID：11357095
> 
> 赞同：2
> 
> 时间：2012-07-06T06:40:42.767
> 
> 标签：android, ios, titanium, appcelerator

在 Appcelerator Titanium 中，我们用 Javascript 做所有事情。我想知道是否可以使用一些自定义的本机 Java 或 Obj-C 库并从 Javascript 调用库函数。有没有人有任何想法？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:55:34.460

您可以在 Appcelerator Titanium 中使用本机库（目标 C）。但为此，您必须创建 Titanium 模块。

请参阅以下 Titanium 中的 iOS 模块开发指南

[https://wiki.appcelerator.org/display/guides/iOS+Module+Development+Guide](https://wiki.appcelerator.org/display/guides/iOS+Module+Development+Guide)

希望这可以帮助你

# c++ - 如何开始学习使用 C++ 为 XBOX 360 KINECT 编写程序以开发 Windows 应用程序的基础知识？

> ID：11357098
> 
> 赞同：3
> 
> 时间：2012-07-06T06:40:52.143
> 
> 标签：c++, image-processing, kinect

我有 C++ 的基本知识。我想学习如何为 Kinect Sensor 编写程序。我看过许多网站，其中包含 C++ 中 Kinect Sensor 的程序示例，但没有一个网站能够很好地解释它以理解他们编写的代码中发生的事情。

所以告诉我如何开始学习为 Kinect Sensor 编写程序的基础知识。

如果有任何教程（最好是视频教程），也请告诉我。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:51:32.273

Kinect C++：http: [//www.codeproject.com/Articles/394975/How-To-Use-Kinect-Face-Tracking-SDK](http://www.codeproject.com/Articles/394975/How-To-Use-Kinect-Face-Tracking-SDK)

在这里： http: [//nsmoly.wordpress.com/2012/05/21/face-tracking-sdk-in-kinect-for-windows-1-5/](http://nsmoly.wordpress.com/2012/05/21/face-tracking-sdk-in-kinect-for-windows-1-5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:17:24.647

一个快速的谷歌打开了这个页面，这是一个 C++ Kinect 教程。它是俄语的，但谷歌翻译可以帮助你：http: [//habrahabr.ru/post/123588/](http://habrahabr.ru/post/123588/)

这个类似（但质量很差，所以现在关闭）的问题也可能有用：[Kinect with OpenGL](https://stackoverflow.com/q/9191471/769220)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:46:22.857

[Kinect Learn 站点上](http://www.microsoft.com/en-us/kinectforwindows/develop/learn.aspx)有视频和文档。你应该从那里开始。

# google-app-engine - 从/向文件java写入/读取字节数组

> ID：11357102
> 
> 赞同：0
> 
> 时间：2012-07-06T06:41:00.753
> 
> 标签：google-app-engine

我有一个 java 可序列化对象，我想将该对象写入/读取文件。然而 Google 应用引擎不支持 fileoutputstream 和 objectoutputstream 所以我将可序列化对象转换为字节数组并将其写入文件

```
$FileWriteChannel writeChannel = fileService.openWriteChannel(
writableFile, lockForWrite);
$writeChannel.write(ByteBuffer.wrap(bytearray));
$writeChannel.closeFinally(); 
```

然后我读了文件：

```
AppEngineFile readableFile = new AppEngineFile(filename);
FileReadChannel readChannel = fileService.openReadChannel(readableFile, lockForRead);
BufferedReader reader = new BufferedReader(Channels.newReader(readChannel, "UTF-8"));
String line = reader.toString(); 
```

我看到了日志，但出现了 UTF-8 错误 谁能告诉我我做错了什么？
错误日志：

```
cloud.spam.filter.server.SerializationObject file_io: An error message: invalid stream header: 5B4240312012/07/06 08:00:10 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:09:58.050

考虑为此目的使用 protobuf。除了它比标准 java 序列化格式更紧凑的事实之外，它还使您能够更改（通过添加新字段）要写入文件的类。

# jquery - jQuery 复选框问题

> ID：11357103
> 
> 赞同：1
> 
> 时间：2012-07-06T06:41:04.127
> 
> 标签：jquery, html

我一直在尝试制作一个 jQuery 函数来选择所有附加到它的复选框。这是我一直在处理的代码。我究竟做错了什么？

```
<div id=checkboxes>
<input type="checkbox" onclick="toggleChecked(this.checked)"> Select / Deselect All<br>
<input type="checkbox" />Eggs<br>
<input type="checkbox" />Butter<br>
<input type="checkbox" />Milk<br>
<input type="checkbox" />Bread<br>
<input type="checkbox" />Jam<br>
<input type="checkbox" />Tea<br>
</div>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">                
         function toggleChecked(status)
            $(document).ready(function(){
            $("#checkall").click(function(){
            var status = $(this).attr('checked');
            $('.checkbox').attr('checked',status);
            });
            });
</script> 
```

PS：我在网上找到了这段代码。似乎在为其他所有人工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:47:19.957

有很多问题。您正在尝试基于类选择器设置复选框，但没有一个复选框具有该类。此外，document.ready 函数在您的事件处理程序中，应该反过来......使用`prop()`方法而不是`attr()`. 并正确附加事件，例如：

```
<div id=checkboxes>
<input id="checkall" type="checkbox"> Select / Deselect All<br>
<input class="checkbox" type="checkbox" />Eggs<br>
<input class="checkbox" type="checkbox" />Butter<br>
<input class="checkbox" type="checkbox" />Milk<br>
<input class="checkbox" type="checkbox" />Bread<br>
<input class="checkbox" type="checkbox" />Jam<br>
<input class="checkbox" type="checkbox" />Tea<br>
</div>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">                

     $(document).ready(function(){
         $("#checkall").on("click", function(){
             var status = $(this).is(":checked");
             $('.checkbox').prop('checked', status);
         });
     });

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:55:31.060

删除`onclick`并制作`onchange`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T06:45:34.700

我认为您在调用函数时缺少大括号...

```
 function toggleChecked(status)
    {
        $(document).ready(function(){
        $("#checkall").click(function(){
        var status = $(this).attr('checked');
        $('.checkbox').attr('checked',status);
        });
        });
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T06:49:54.340

或者你可以这样做：

改变这个

```
<input type="checkbox" /> 
```

至

```
<input type="checkbox" class="checkbox"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T06:53:06.613

由于某种原因，复选框的属性值`"true"`和布尔值`true`不同。同样`"false"`和布尔值`false`不同。

这是描述它的[小提琴](http://jsfiddle.net/ashwyn/62w26/2/)，尝试将 boolean 更改`false`为`"false"`，您会明白的。

在您的问题中，请确保您在状态变量中接收到布尔值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T06:45:20.960

尝试这个：

```
<div id=checkboxes>
<input type="checkbox" id="checkall"> Select / Deselect All<br>
<input type="checkbox" />Eggs<br>
<input type="checkbox" />Butter<br>
<input type="checkbox" />Milk<br>
<input type="checkbox" />Bread<br>
<input type="checkbox" />Jam<br>
<input type="checkbox" />Tea<br>
</div>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">                
            $(document).ready(function(){
              $("#checkall").click(function(){
                var status = $(this).attr('checked');
                $('input[type="checkbox"]').attr('checked',status);
              });
            });
</script> 
```

这是将单击事件处理程序绑定到`#checkall`“加载”上的元素，这是您想要的，并从元素中取出 javascript onclick() 方法。您还需要在 Select all 元素中添加 ID 和 ID 才能使选择器正常工作。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-06T06:54:50.437

检查此[链接](http://jsfiddle.net/NXEKb/2/)。它在这里工作正常。

# c# - 将 css 类从控制器传递到 asp.net mvc3 中的部分视图

> ID：11357117
> 
> 赞同：0
> 
> 时间：2012-07-06T06:41:22.520
> 
> 标签：c#, asp.net, asp.net-mvc-3

我有一个来自控制器的简单代码

```
public ActionResult CreatePage() {

   return PartialView( "APage" );
} 
```

该页面的部分`APage`是：

```
<table class="@className">
  <tr>
  ...
  </tr>
</table> 
```

在javascript中，我想`APage`用不同的类名（css类名）生成

```
$.post('CreatePage', function(data) {
  $('.result').html(data);
}); 
```

如何将控制器函数（如果我要声明：）传递`public ActionResult CreatePage(string cssClass) { ... }`给函数的参数`PartialView`？

方法

我想喜欢：

```
public ActionResult CreatePage( string cssClass ) {

       return PartialView( "APage", cssClass );
    } 
```

我想使用那个 css 类`APage`。

例如：

1.  如果我打电话

    `$.post('CreatePage', {cssClass: 'aClass' ,function(data) { $('.result').html(data); });`

2.  然后它会调用

    ```
    public ActionResult CreatePage( string cssClass ) {

       return PartialView( "APage", cssClass ); //cssClass = 'aClass'
    } 
    ```

3.  并返回视图

    `<table class="aClass"> <tr> ... </tr> </table>`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:53:06.460

我不确定我是否正确理解了你，但我认为你的例子已经在正确的轨道上。

在您的局部视图中，将其添加到最顶部：

```
@model string 
```

然后在您的局部视图中，将表格标记定义更改为

```
<table class="@Model"> <tr> ... </tr> </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:26:04.953

扩展@rikitikitik 所说的内容。

您已经发现了[`PartialView(viewName, model)`](http://msdn.microsoft.com/en-us/library/dd460161.aspx)方法重载，现在您只需扩展您的 current`model`以包含 CSS 类字符串。只需添加一个名为的属性`CssClass`，您就可以在局部视图中使用它。

这当然假设您使用的是[视图模型](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic7.aspx)（以及因此[MVVM 模式](http://en.wikipedia.org/wiki/MVVM)），而不是“只是”模型甚至数据库模型（例如由实体框架处理）。

```
public class APartialModel
{
    public string Name { get; set; }
    // ... other properties
    public string CssClass { get; set; }
} 
```

```
public ActionResult CreatePage( string cssClass ) {

   // Initialize the entire view model for the partial view here
   // This usually means you need to pass in an id and use it to
   // make a database lookup.
   // If it's "too much work", it probably means you
   // need to fix a structural problem.
   APartialModel model = new APartialModel
       {
           Name = "Somehow I already know this value",
           CssClass = cssClass
       };

   return PartialView( "APage", model );
} 
```

```
@model APartialModel

<table class="@Model.CssClass">
  <tr>
  ... for example @Model.Name
  </tr>
</table> 
```

# objective-c - 如何在没有情节提要的情况下使用 ECSlidingViewController？

> ID：11357125
> 
> 赞同：3
> 
> 时间：2012-07-06T06:41:59.433
> 
> 标签：objective-c, ios4

我想在我的 iOS 4.3 应用程序中使用 ECSlidingViewController。我想知道如何在没有情节提要的情况下应用这个库？

LZ，怎么办？这是我的代码，但 iOS 模拟器的屏幕只有白色。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    //self.window.backgroundColor = [UIColor whiteColor];

    FrontViewController *frontViewController = [[FrontViewController alloc] initWithNibName:@"FrontViewController" bundle:nil];
    RearViewController *rearViewController = [[RearViewController alloc] initWithNibName:@"RearViewController" bundle:nil];

    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:frontViewController];

    // create a DDMenuController setting the content as the root
    //DDMenuController *menuController = [[DDMenuController alloc] initWithRootViewController:navigationController];
    //menuController.leftViewController = rearViewController;

    //RevealController *menuController = [[RevealController alloc] initWithFrontViewController:navigationController rearViewController:rearViewController];

    ECSlidingViewController *slidingViewController = (ECSlidingViewController *)self.window.rootViewController;
    slidingViewController.topViewController = navigationController;
    slidingViewController.underLeftViewController = rearViewController;

    self.window.rootViewController = slidingViewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T09:13:53.603

**这是你的代码**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    
(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// Override point for customization after application launch.
FrontViewController *frontViewController = [[FrontViewController alloc] initWithNibName:@"FrontViewController" bundle:nil];
RearViewController *rearViewController = [[RearViewController alloc] initWithNibName:@"RearViewController" bundle:nil];

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:frontViewController];

ECSlidingViewController *slidingViewController = [[ECSlidingViewController alloc] init];
slidingViewController.topViewController = navigationController;
slidingViewController.underLeftViewController = rearViewController;

self.window.rootViewController = slidingViewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:00:46.193

上面代码中的主要问题是slidingViewController 没有被实例化。

你需要这一行：

```
ECSlidingViewController *slidingViewController = [[ECSlidingViewController alloc] init]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T18:05:22.813

ECSlidingViewController 使用 iOS5、Storyboard 和 ARC。为了努力重新设计这个类，我建议你选择其他为低 iOS 版本做好准备而不使用 Storyboard 的类。一些类似的例子是：

[https://github.com/pkluz/ZUUIRevealController](https://github.com/pkluz/ZUUIRevealController)
[https://github.com/mystcolor/JTRevealSidebarDemo](https://github.com/mystcolor/JTRevealSidebarDemo)

# c# - 如何在 C# 中加载 DLL

> ID：11357126
> 
> 赞同：-5
> 
> 时间：2012-07-06T06:42:16.077
> 
> 标签：c#

我目前有一个 DLL（使用 C++ 完成）。现在我想在我的 C# 应用程序中加载这个 DLL 来访问一些方法。

我尝试使用此处显示的示例，但它不起作用： [我可以在运行时加载 .NET 程序集并实例化一个只知道名称的类型吗？](https://stackoverflow.com/questions/465488/can-i-load-a-net-assembly-at-runtime-and-instantiate-a-type-knowing-only-the-na)

知道有什么问题吗？有什么方法可以加载 DLL 并访问这些方法吗？

提前致谢，佩马尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T06:48:16.040

您链接到的问题与您的问题之间的区别在于，另一个问题是关于 .dll 形式的 .NET 程序集，但您的问题是关于本机 .dll 文件。

如果你在 C++ 端有很多类，最好使用 C++/CLI 来包装原生方法和类。如果您的 API 仅公开方法，那么您可以使用[`DllImportAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.aspx)和`extern`关键字编写绑定。

这篇 MSDN 文章应该是为您的 C++ dll 编写绑定的一个很好的起点：http: [//msdn.microsoft.com/en-us/library/2x8kf7zx (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/2x8kf7zx(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:48:57.367

1.  首先在您的解决方案资源管理器中右键单击并选择添加参考选项卡。
2.  浏览您要添加的 dll。
3.  使用以下格式将 Dll 添加到您的代码文件中：

    在 C# 中使用或

    在 VB 中导入

如果上述解决方案不起作用，请参阅此链接：

[在 .net 中添加 C++ dll](https://stackoverflow.com/questions/2223423/how-can-i-add-c-dll-in-my-net-application)

# tridion - 需要使用核心服务启动工作流

> ID：11357132
> 
> 赞同：0
> 
> 时间：2012-07-06T06:42:56.323
> 
> 标签：tridion, tridion-2011

我正在使用 coreservice 在工作流中创建第一个自动化活动“返回给作者”。以下是我的代码。

1.  创建组件并完成
2.  查看组件并选择“返回作者”这是一项自动化任务，因为我已经编写了以下代码。但是没有执行该活动。

你能帮帮我吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using Tridion.ContentManager.CoreService.Client;

namespace CoreComponentWorkflow
{
  [ProgId("CoreComponentWorkflow.WorkflowHandler")]

  public class AutomaticWorkflowHandler
  {
    public void MoveBackToActivity(string strActivitytoMove)
    {
      var client = new SessionAwareCoreServiceClient();
      var finishdata = new ActivityFinishData();
      finishdata.Message = strActivitytoMove;
      var process = new ProcessInstanceData();
      var activity = (ActivityInstanceData)process.Activities[0];
      client.FinishActivity(activity.Id, finishdata, new ReadOptions());
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:33:17.817

您的代码中有几处需要审查。

1.  您创建一个新的 ProcessInstanceData 而不是从当前实例中读取它。因此你肯定不会有`process.Activities[0]`，因为这个过程是新的。
2.  您从工作流脚本传递给您的活动的参数是什么？
3.  您当前的工作项在哪里？

用一些常识检查您的代码，并尝试遵循流程（例如远程调试）。尝试与您之前的 TOM.NET 代码进行比较，看起来您只是在黑暗中拍摄。

# java - 找不到名为 {{http}//schemas.xmlsoap.org/wsdl/} 的架构类型

> ID：11357137
> 
> 赞同：0
> 
> 时间：2012-07-06T06:43:22.920
> 
> 标签：java, web-services, wsdl, weblogic-10.x, jdeveloper

我正在开发一个融合 Web 应用程序，并且正在使用外部 Web 服务。我的应用程序中的项目：
- 模型和视图控制器。
- 来自 WSDL 的 Java Web 服务。
- WebService 客户端和代理。

我制作了一些 java 类来从 web 服务中提取我需要的数据，这很好用（当只是运行 java 类时）。但是当我添加一个只有标签的页面并尝试部署时，我得到以下堆栈跟踪。

我正在使用 Weblogic Server 10.3 和 JDeveloper。

谁能告诉我我做错了什么？

```
10:46:38 AM] Deployment cancelled.
[10:46:38 AM] ----  Deployment incomplete  ----.
[10:46:38 AM] Remote deployment failed (oracle.jdevimpl.deploy.common.Jsr88RemoteDeployer)
#### Cannot run application CRMapp due to error deploying to IntegratedWebLogicServer.
[Application CRMapp stopped and undeployed from Server Instance IntegratedWebLogicServer]
[Running application CRMapp on Server Instance IntegratedWebLogicServer...] 
[10:56:24 AM] Web Module SugarCRMWebServiceWebApp.war recognized in project SugarCRMWebService.jpr
[10:56:24 AM] Web Module ViewControllerWebApp.war recognized in project ViewController.jpr
[10:56:24 AM] ----  Deployment started.  ----
[10:56:24 AM] Target platform is  (Weblogic 10.3).
[10:56:24 AM] Retrieving existing application information
[10:56:24 AM] Running dependency analysis...
[10:56:24 AM] Deploying 3 profiles...
[10:56:24 AM] Wrote Web Application Module to /Users/wimvdc/.jdeveloper/system11.1.2.2.39.61.83.1/o.j2ee/drs/CRMapp/ViewControllerWebApp.war
[10:56:24 AM] Wrote Web Application Module to /Users/wimvdc/.jdeveloper/system11.1.2.2.39.61.83.1/o.j2ee/drs/CRMapp/SugarCRMWebServiceWebApp.war
[10:56:25 AM] Wrote Enterprise Application Module to /Users/wimvdc/.jdeveloper/system11.1.2.2.39.61.83.1/o.j2ee/drs/CRMapp
[10:56:25 AM] Redeploying Application...
<WS data binding error>could not find schema type '{http://schemas.xmlsoap.org/soap/encoding/}normalizedString
<WS data binding error>could not find schema type '{http://schemas.xmlsoap.org/soap/encoding/}language
java.lang.IllegalStateException: could not find schema type named {{http}//schemas.xmlsoap.org/wsdl/}>>
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder$GlobalTypeNode.getSchemaType(AnonymousTypeFinder.java:182)
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder$LocalElementNode.getSchemaProperty(AnonymousTypeFinder.java:207)
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder.getHiddenArrayElementComponentTypeNamed(AnonymousTypeFinder.java:104)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.createBindingTypeFrom(Deploytime109MappingHelper.java:1113)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.processTypeMappings(Deploytime109MappingHelper.java:526)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.initBindingFileFrom109dd(Deploytime109MappingHelper.java:273)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.<init>(Deploytime109MappingHelper.java:171)
    at weblogic.wsee.bind.runtime.internal.RuntimeBindingsBuilderImpl.createRuntimeBindings(RuntimeBindingsBuilderImpl.java:86)
    at weblogic.wsee.ws.WsBuilder.createRuntimeBindingProvider(WsBuilder.java:705)
    at weblogic.wsee.ws.WsBuilder.buildService(WsBuilder.java:201)
    at weblogic.wsee.ws.WsFactory.createServerService(WsFactory.java:54)
    at weblogic.wsee.deploy.ServletDeployInfo.createWsService(ServletDeployInfo.java:91)
    at weblogic.wsee.deploy.DeployInfo.createWsPort(DeployInfo.java:372)
    at weblogic.wsee.server.servlet.BaseWSServlet.init(BaseWSServlet.java:83)
    at javax.servlet.GenericServlet.init(GenericServlet.java:241)
    at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)
    at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
    at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
    at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539)
    at weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1985)
    at weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1959)
    at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1878)
    at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153)
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205)
    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)
    at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
could not identify anonymous schema type named '{http://schemas.xmlsoap.org/wsdl/}>>>tExtensibleDocumented[0,unbounded]', ignoring
java.lang.IllegalStateException: could not find schema type named {{http}//schemas.xmlsoap.org/wsdl/}>>
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder$GlobalTypeNode.getSchemaType(AnonymousTypeFinder.java:182)
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder$LocalElementNode.getSchemaProperty(AnonymousTypeFinder.java:207)
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder.getHiddenArrayElementComponentTypeNamed(AnonymousTypeFinder.java:104)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.createBindingTypeFrom(Deploytime109MappingHelper.java:1113)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.processTypeMappings(Deploytime109MappingHelper.java:526)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.initBindingFileFrom109dd(Deploytime109MappingHelper.java:273)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.<init>(Deploytime109MappingHelper.java:171)
    at weblogic.wsee.bind.runtime.internal.RuntimeBindingsBuilderImpl.createRuntimeBindings(RuntimeBindingsBuilderImpl.java:86)
    at weblogic.wsee.ws.WsBuilder.createRuntimeBindingProvider(WsBuilder.java:705)
    at weblogic.wsee.ws.WsBuilder.buildService(WsBuilder.java:201)
    at weblogic.wsee.ws.WsFactory.createServerService(WsFactory.java:54)
    at weblogic.wsee.deploy.ServletDeployInfo.createWsService(ServletDeployInfo.java:91)
    at weblogic.wsee.deploy.DeployInfo.createWsPort(DeployInfo.java:372)
    at weblogic.wsee.server.servlet.BaseWSServlet.init(BaseWSServlet.java:83)
    at javax.servlet.GenericServlet.init(GenericServlet.java:241)
    at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)
    at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
    at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
    at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539)
    at weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1985)
    at weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1959)
    at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1878)
    at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153)
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205)
    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)
    at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
could not identify anonymous schema type named '{http://schemas.xmlsoap.org/wsdl/}>>>tExtensibleDocumented[0,unbounded]', ignoring
java.lang.IllegalStateException: could not find schema type named {{http}//schemas.xmlsoap.org/wsdl/}>>tBinding
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder$GlobalTypeNode.getSchemaType(AnonymousTypeFinder.java:182)
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder$LocalElementNode.getSchemaProperty(AnonymousTypeFinder.java:207)
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder.getHiddenArrayElementComponentTypeNamed(AnonymousTypeFinder.java:104)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.createBindingTypeFrom(Deploytime109MappingHelper.java:1113)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.processTypeMappings(Deploytime109MappingHelper.java:526)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.initBindingFileFrom109dd(Deploytime109MappingHelper.java:273)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.<init>(Deploytime109MappingHelper.java:171)
    at weblogic.wsee.bind.runtime.internal.RuntimeBindingsBuilderImpl.createRuntimeBindings(RuntimeBindingsBuilderImpl.java:86)
    at weblogic.wsee.ws.WsBuilder.createRuntimeBindingProvider(WsBuilder.java:705)
    at weblogic.wsee.ws.WsBuilder.buildService(WsBuilder.java:201)
    at weblogic.wsee.ws.WsFactory.createServerService(WsFactory.java:54)
    at weblogic.wsee.deploy.ServletDeployInfo.createWsService(ServletDeployInfo.java:91)
    at weblogic.wsee.deploy.DeployInfo.createWsPort(DeployInfo.java:372)
    at weblogic.wsee.server.servlet.BaseWSServlet.init(BaseWSServlet.java:83)
    at javax.servlet.GenericServlet.init(GenericServlet.java:241)
    at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)
    at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
    at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
    at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539)
    at weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1985)
    at weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1959)
    at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1878)
    at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153)
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205)
    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)
    at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
....

<5-jul-2012 10:56:27 uur CEST> <Error> <Deployer> <BEA-149202> <Encountered an exception while attempting to commit the 1 task for the application 'CRMapp'.> 
<5-jul-2012 10:56:27 uur CEST> <Warning> <Deployer> <BEA-149004> <Failures were detected while initiating deploy task for application 'CRMapp'.> 
<5-jul-2012 10:56:27 uur CEST> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
weblogic.application.ModuleException: [HTTP:101216]Servlet: "sugarsoapPort" failed to preload on startup in Web application: "CRMapp-SugarCRMWebService-context-root".
java.lang.IllegalStateException: could not find schema type named {{http}//www.w3.org/2001/XMLSchema}any
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder$GlobalTypeNode.getSchemaType(AnonymousTypeFinder.java:182)
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder.getTypeNamed(AnonymousTypeFinder.java:87)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.createBindingTypeFrom(Deploytime109MappingHelper.java:1111)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.processTypeMappings(Deploytime109MappingHelper.java:526)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.initBindingFileFrom109dd(Deploytime109MappingHelper.java:273)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.<init>(Deploytime109MappingHelper.java:171)
    at weblogic.wsee.bind.runtime.internal.RuntimeBindingsBuilderImpl.createRuntimeBindings(RuntimeBindingsBuilderImpl.java:86)
    at weblogic.wsee.ws.WsBuilder.createRuntimeBindingProvider(WsBuilder.java:705)
    at weblogic.wsee.ws.WsBuilder.buildService(WsBuilder.java:201)
    at weblogic.wsee.ws.WsFactory.createServerService(WsFactory.java:54)
    at weblogic.wsee.deploy.ServletDeployInfo.createWsService(ServletDeployInfo.java:91)
    at weblogic.wsee.deploy.DeployInfo.createWsPort(DeployInfo.java:372)
    at weblogic.wsee.server.servlet.BaseWSServlet.init(BaseWSServlet.java:83)
    at javax.servlet.GenericServlet.init(GenericServlet.java:241)
    at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)
    at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
    at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
    at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539)
    at weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1985)
    at weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1959)
    at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1878)
    at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153)
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205)
    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)
    at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)

    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1510)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    Truncated. see log file for complete stacktrace
Caused By: java.lang.IllegalStateException: could not find schema type named {{http}//www.w3.org/2001/XMLSchema}any
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder$GlobalTypeNode.getSchemaType(AnonymousTypeFinder.java:182)
    at weblogic.wsee.bind.runtime.internal.AnonymousTypeFinder.getTypeNamed(AnonymousTypeFinder.java:87)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.createBindingTypeFrom(Deploytime109MappingHelper.java:1111)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.processTypeMappings(Deploytime109MappingHelper.java:526)
    at weblogic.wsee.bind.runtime.internal.Deploytime109MappingHelper.initBindingFileFrom109dd(Deploytime109MappingHelper.java:273)
    Truncated. see log file for complete stacktrace
<div class="jive-quote"> </div>
[10:56:27 AM] Deployment cancelled.
[10:56:27 AM] ----  Deployment incomplete  ----.
[10:56:27 AM] Remote deployment failed (oracle.jdevimpl.deploy.common.Jsr88RemoteDeployer)
#### Cannot run application CRMapp due to error deploying to IntegratedWebLogicServer.
[Application CRMapp stopped and undeployed from Server Instance IntegratedWebLogicServer] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:18:27.717

我删除了“来自 WSDL 的 Java Webservice”项目，因为“WebService 客户端和代理”项目也生成了我需要的类型。现在它起作用了。

# r - R：将ggplot2图保存在列表中

> ID：11357139
> 
> 赞同：16
> 
> 时间：2012-07-06T06:43:27.167
> 
> 标签：r, ggplot2, histogram

我正在编写一个 R 代码，它允许用户从数据中选择列并为每个列绘制直方图。因此，我使用 'for' 循环使用 ggplot2 库生成所需数量的图，并将它们保存在一个列表中。但我面临的问题是，在“for”循环的每次迭代中，列表中的所有对象都存储相同的图。因此，最终输出由直方图网格组成，标记不同但描绘相同（最后）列。

我知道这个问题已经很老了，我发现[在 for 循环中重命名 ggplot2 图形](https://stackoverflow.com/questions/6161371/renaming-ggplot2-graphs-in-a-for-loop)的答案和[https://stat.ethz.ch/pipermail/r-help/2008-February/154438.html](https://stat.ethz.ch/pipermail/r-help/2008-February/154438.html)是一个有用的开始观点。

我使用 R 中可用的标准瑞士生育力数据集来生成图。这是代码： -

```
data_ <- swiss
data_ <- na.omit(data_)

u <- c(2, 3, 4, 5, 6)
plotData <- data_[,u]
bw <- 5
plotType <- 'probability'

library(ggplot2)
library(gridExtra)

histogramList <- vector('list', length(u))

if(plotType=='probability')
{
 for(i in 1:length(u))
 {
   indexDataFrame <- data.frame(plotData[,i])
   probabilityHistogram <- ggplot(indexDataFrame, aes(x=indexDataFrame[,1]))
   histogramList[[i]] <-  probabilityHistogram + geom_histogram(aes(y=..density..),     binwidth=bw, colour='black', fill='skyblue') + geom_density() + scale_x_continuous(names(plotData)[i]) + opts(legend.position='none')
 }
} else
if(plotType=='frequency')
{
 for(i in 1:length(u))
 {
   indexDataFrame <- data.frame(plotData[,i])
   probabilityHistogram <- ggplot(indexDataFrame, aes(x=indexDataFrame[,1]))
   histogramList[[i]] <- probabilityHistogram + geom_histogram(aes(y=..count..), binwidth=bw, colour='black', fill='skyblue') + geom_density() + scale_x_continuous(names(plotData)[i]) + opts(legend.position='none')
 }
}

arg_list <- c(histogramList, list(nrow=3, ncol=2))
#jpeg('histogram', width=1024, height=968)
do.call(grid.arrange, arg_list)
#graphics.off() 
```

如果我错过了这个论坛中问题的明显答案，我深表歉意，如果您能指导我解决这个问题，我将不胜感激。我希望我的解释很清楚，如果没有，请让我知道所需的澄清。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T08:03:59.500

您可以通过以下方式大大简化您的代码：

1.  使用构面，而不是手动排列多个图
2.  `melt`使用包中的功能融合您的数据`reshape2`
3.  这意味着您可以删除循环

这是您的代码的完整重写，看不到循环。

```
data_ <- swiss
data_ <- na.omit(data_)

u <- c(2, 3, 4, 5, 6)
plotData <- data_[,u]
bw <- 5
plotType <- 'frequency'

library(ggplot2)
library(reshape2)

mdat <- melt(plotData)

if(plotType=='probability'){
  ph <- ggplot(mdat, aes(value)) +
    geom_histogram(aes(y=..density..), binwidth=bw, colour='black', fill='skyblue') + 
    geom_density() + 
    facet_wrap(~variable, scales="free")
} 

if(plotType=='frequency'){
  ph <- ggplot(mdat, aes(value)) +
    geom_histogram(aes(y=..count..), binwidth=bw, colour='black', fill='skyblue') + 
    geom_density() + 
    facet_wrap(~variable, scales="free")
}

print(ph) 
```

生成的图形：

**可能性：**

![在此处输入图像描述](../Images/131f5aad52486d0ce19df69e5882ebf8.png)

**频率**

![在此处输入图像描述](../Images/32c8c1f053992475f5ecd6e2e3495295.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T07:49:28.840

与其使用 映射美学`aes`，不如使用`aes_string`：

```
 for(i in 1:length(u))
 {
   probabilityHistogram <- ggplot(plotData, aes_string(x=names(plotData)[i]))
   histogramList[[i]] <-  probabilityHistogram + geom_histogram(aes(y=..density..),     binwidth=bw, colour='black', fill='skyblue') + geom_density() + scale_x_continuous(names(plotData)[i]) + opts(legend.position='none')
 } 
```

至少对我有用。这避免了必须对数据进行子集化，并允许您通过引用名称引用要绘制的列。

# c++ - 标准迭代器赋值错误

> ID：11357140
> 
> 赞同：1
> 
> 时间：2012-07-06T06:43:31.977
> 
> 标签：c++, iterator, find, std

如果这个问题很愚蠢，请多多包涵。

以下是在头文件中定义的：

```
typedef char NAME_T[40];

struct NAME_MAPPING_T
{
    NAME_T englishName;
    NAME_T frenchName;
};

typedef std::vector<NAME_MAPPING_T> NAMES_DATABASE_T; 
```

后来需要找到一个特定的英文名称：

```
const NAMES_DATABASE_T *wordsDb;

string str;

std::find_if(   wordsDb->begin(), 
                wordsDb->end(), 
                [str](const NAME_MAPPING_T &m) -> bool { return strncmp(m.englishName, str.c_str(), sizeof(m.englishName)) == 0; } ); 
```

这段代码（老实说是我复制粘贴的）可以编译，但如果我想检查 find_if() 返回的值，如下所示：

```
NAMES_DATABASE_T::iterator it;
it = std::find_if(blah ..) 
```

**代码不会编译！**

实际上， **it = std::find_if(...)** 行将返回错误：

```
error C2679: binary '=' : no operator found which takes a right-hand operand of type 'std::_Vector_const_iterator<_Myvec>' (or there is no acceptable conversion) 
```

怎么了 ？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T06:49:21.463

`const NAMES_DATABASE_T *wordsDb;`

你`wordsDb`是 const，因此`wordsDb->begin()`返回一个 const 迭代器，因此也`find_if`返回一个 const 迭代器。您正在尝试将该 const 迭代器分配给 non-const `NAMES_DATABASE_T::iterator it`，因此会出现错误。

您可以使用`NAMES_DATABASE_T::const_iterator`来获取 const 迭代器。并且您应该使用`std::string`而不是那些 char 缓冲区，除非有一些罕见的情况需要另外使用。

# php - MySQL 两个数据库，在一种情况下按一列排序，在不同情况下按另一列排序

> ID：11357145
> 
> 赞同：8
> 
> 时间：2012-07-06T06:44:00.697
> 
> 标签：php, mysql, sql-order-by

我有两张桌子。第一个表如下所示：

表：记录

```
    摆脱| 用户名 | 标题 | 添加时 | 上市
-------------------------------------------------- ------------------
    1 212 示例 2012-06-28 1
    2 217 测试建议 2012-07-05 1
    3 212 另一个 2012-07-02 1
    4 212 未上市 2012-05-02 0
    5 217 成功 2012-04-08 1
    6 238 总是 2012-04-18 1

```

表：喜欢

```
    编号 | 用户名 | 摆脱| 喜欢的时候
-------------------------------------------------- ----
    1 212 2 2012-07-06
    2 205 1 2012-06-30
    3 212 5 2012-07-04

```

在'Records'表中，'rid'被设置为主索引。在“喜欢”表中，id 设置为主索引。

我正在使用 PHP。PHP 将为 MySQL 提供一个值作为参考。我想要一个 MySQL 查询来执行以下操作：

伪代码：

```
$userid = 212;
$SQL = 'SELECT DISTINCT records.* 
        FROM records,likes 
        WHERE (records.userid = ' . $userid . 
          ' AND records.public = 1) 
            OR (records.id = likes.rid AND likes.userid = ' . $userid . 
          ' AND records.public = 1) 
        ORDER BY likes.whenliked DESC, records.whenadded DESC 
        LIMIT 50;'; 
```

看看我上面刚刚提供的 $SQL 查询。这是我开发我想要的查询的尝试，但它没有达到我想要的；它非常接近，但它仍然订购不正确。该查询是我自己首先尽可能地开发的，然后基于我在 StackFlow 和 Google 其他地方搜索解决方案所找到的结果。

这些是我试图通过以下方式订购的条件：

1.  选择的所有记录都必须是公开的 (records.public = 1)。
2.  如果记录属于用户（在本例中为 212），则按 records.when added 对记录进行排序。
3.  如果记录不属于用户，但它是用户喜欢的记录，则通过 likes.whenliked 对记录进行排序。
4.  日期将按从最新到最旧的顺序排列。

返回的查询的最终结果如下所示（请记住，whenliked 不在返回数据中，它只是供参考，因此您可以看到它是如何排序的）：

```
    摆脱| 用户名 | 标题 | 添加时 | 公共 | 喜欢时{不包括}
-------------------------------------------------- ----------------------------------
    2 217 测试建议 2012-07-05 1 2012-07-06
    3 212 另一个 2012-07-02 1
    5 217 成功 2012-04-08 1 2012-06-30
    1 212 示例 2012-06-28 1

```

希望这是有道理的。随意提问，我会尽我所能澄清。

提前感谢您的时间、考虑和阅读本文。即使没有响应或没有找到解决方案，仍然非常感谢您的时间！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:53:15.040

您订购的字段不必是数据库中的现有字段。您还可以使用您在选择中定义的字段：

```
SELECT IF(records.userid = ' . $userid . ', records.whenadded, likes.whenliked) as date 
```

现在您可以按部分顺序使用它：

```
ORDER BY date DESC 
```

来自[MySQL 手册](http://dev.mysql.com/doc/refman/5.1/en/select.html "MySQL 手册")：

> 可以使用 AS alias_name 为 select_expr 指定别名。别名用作表达式的列名，可用于 GROUP BY、ORDER BY 或 HAVING 子句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:51:11.287

我建议将查询分成 2 个查询并改用 UNION。

```
SELECT * FROM(
(SELECT records.rid, records.userid,records.title, records.whenadded as adate
        FROM records,likes 
        WHERE records.userid =  $userid   AND records.public = 1 )
UNION
(SELECT records.rid, records.userid,records.title, likes.whenliked as adate 
        FROM records,likes 
        WHERE records.rid = likes.rid AND likes.userid = $userid  
          AND records.public = 1)
 )t ORDER BY adate DESC 
```

已编辑：请参阅[http://sqlfiddle.com/#!2/9a877/4](http://sqlfiddle.com/#!2/9a877/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:56:47.387

这个怎么样：

```
$userid = 212;
$SQL = 'SELECT DISTINCT records.* 
        FROM records,likes 
        WHERE (records.userid = ' . $userid . 
          ' AND records.public = 1) 
            OR (records.id = likes.rid AND likes.userid = ' . $userid . 
          ' AND records.public = 1) 
        ORDER BY records.userid, likes.whenliked DESC, records.whenadded DESC 
        LIMIT 50;'; 
```

这将首先将按用户记录和按用户喜欢的记录分开，然后按日期分开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:23:06.977

根据我的评论，这是您应该查看的另一个查询：

```
SELECT
    records.*
FROM records
LEFT JOIN likes ON records.rid = likes.rid
WHERE records.public = 1
    AND COALESCE(likes.userid, records.userid) = $userid
ORDER BY COALESCE(likes.whenliked, records.whenadded) DESC; 
```

它假定您不能多次喜欢一张唱片并获得奇怪的 DISTINCT。

COALESCE 的文档在[这里](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)。

这个查询并不是真正意义上的性能。如果您有一个非常大的数据库，则将查询分​​成两部分，以便以全功率使用用户 ID 上的索引，然后再次加入它们可能会更好。

# java - 如何在 grails 中获取数据库实例？

> ID：11357147
> 
> 赞同：5
> 
> 时间：2012-07-06T06:44:16.447
> 
> 标签：java, mysql, grails, groovy

我是 Grails 的新手，我有疑问。可以说我已`Datasource.groovy`配置为`mysql`数据库。一切正常，我的 grails 应用程序正在运行。

在控制器中，如果我想添加/修改我设置的数据库，我该`DataSource.groovy`怎么做？

我再次需要在每个控制器中做这样的事情：

```
def db = Sql.newInstance(
                    'jdbc:mysql://*****',
                    'root',
                    '',
                    'com.mysql.jdbc.Driver'
                ) 
```

为了获得我指向`DataSource.groovy`文件的数据库实例？

是否有任何最佳做法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:23:35.653

你应该能够做到这一点（我建议这是在服务而不是控制器中完成，因为它会使你的控制器更干净，你的代码更容易遵循）

```
import groovy.sql.Sql 

class DataSourceAccessingService {
  def datasource

  def runSomeQuery( String sql ) {
    def sql = new Sql( datasource )
    ...
  }
} 
```

# maven - 当提到一个 Maven 插件时，如果 元素不存在，将执行哪个目标？

> ID：11357149
> 
> 赞同：1
> 
> 时间：2012-07-06T06:44:23.130
> 
> 标签：maven

假设插件内部有几个目标。例如：

```
<plugins>
    <plugin>
      <groupId>sample.plugin</groupId>
      <artifactId>hello-maven-plugin</artifactId>
      <version>1.0-SNAPSHOT</version>
    </plugin>
</pulgins> 
```

或者像这样（没有执行标签，只有配置标签）：

```
<plugin>
  <groupId>sample.plugin</groupId>
  <artifactId>hello-maven-plugin</artifactId>
  <version>1.0-SNAPSHOT</version>
  <configuration>
    <greeting>Welcome</greeting>
  </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:33:15.867

如果`<executions>`不存在，则不会执行插件的任何目标。简单的。但是请注意，插件的目标和构建阶段之间存在一些预定义的绑定，这些绑定来自生命周期定义和工件的打包类型。因此，您不必将`maven-compiler-plugin`'`compile`和`testCompile`目标绑定到适当的阶段，因为它们已经绑定在大多数包装类型（如`jar`or `war`）的生命周期定义中。但是这个`hello-maven-plugin`，可能是你刚刚创建的，需要这样的绑定，因为没有人知道它必须被执行。另外，请注意插件的 mojos（目标）可以定义其与生命周期阶段的默认绑定，因此有时您只能看到`<execution>`定义中指定的目标而没有阶段。

# android - 没有“新的 android 项目”，但有其他的，如“android 示例项目”等

> ID：11357153
> 
> 赞同：0
> 
> 时间：2012-07-06T06:44:51.033
> 
> 标签：android

我正在使用 Eclipse、ADT 插件和 Android SDK。我一直在关注 developer.android.com 上的指南，但似乎找不到“新的 android 项目”。我已经多次完成该指南，重新安装 eclipse 和插件和 SDK 等。

如果我在 Eclipse 中单击“新项目”，我会在那里找到一个 Android 文件夹，展开后会显示以下选项：

Android 应用程序项目 Android 项目来自现有代码 Android 示例项目 Android 测试项目

关于有什么问题的任何想法？为什么我找不到“新的 android 项目”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:47:10.930

我认为你使用新的 ADT`ADT 20`和它有`Android Application Project`。

`Android Application Project`你`new android project`在吗`ADT 20.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:50:52.420

这是一个错误，将在下一个版本中修复。目前，您可以尝试：

窗口->首选项->Android

在那里，检查您的 Android SDK 路径是否设置正确。如果您仍然有问题，请尝试以下解决方法：

*   从 SDK 管理器中删除支持库
*   通过单击“安装/升级”创建一个新项目并安装支持库。

# openerp - 如何在表单合作伙伴中制作新复选框

> ID：11357154
> 
> 赞同：0
> 
> 时间：2012-07-06T06:44:52.407
> 
> 标签：openerp

我想问，请帮帮我

```
<record model="ir.ui.view" id="partner_instructor_form_view">
<field name="name">partner.instructor.name</field>
<field name="model">res.partner</field>
<field name="type">form</field>
<field name="inherit_id" ref="base.view_partner_form" />
<field name="arch" type="xml">
    <field name="supplier" position="after">
        <field name="instructor"/>
    </field>
</field> 
```

此代码适用于 openerp 603，但如何转换为 OpenERP 版本 604？因为在 604 中，该代码不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:04:08.637

我认为您的模型中没有任何讲师字段，请检查您的模型中是否存在这样的字段。如果没有，请添加一个新字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T09:28:33.323

在 XML 中搜索路径时使用 XPath 总是有用的，但如果您只是提供字段定义，请确保复制整个字段定义，然后定义位置属性。此外，如果这也不起作用，那么尝试更新所有模块。例如。openerp-server -u 全部 -d

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:47:01.037

它可能是访问权限的问题，并且使用 -u -d 选项来更新数据库，以便您可以更新您的视图。谢谢你

# c# - 是否有 lucene.net (C#) 方法来删 除停用词？

> ID：11357166
> 
> 赞同：0
> 
> 时间：2012-07-06T06:45:40.797
> 
> 标签：c#, lucene.net

类似于 Lucene.RemoveStopwords(string); ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:45:08.257

有一个`StopFilter`类，它包含在if that is what you use的`TokenStream`链中。`StandardAnalyzer`

它驻留在`Lucene.Net.Analysis`命名空间中。

# javascript - JavaScript 破坏文本框

> ID：11357172
> 
> 赞同：1
> 
> 时间：2012-07-06T06:46:08.913
> 
> 标签：javascript, html, regex

我有一个控件，它是一个日期选择器，它使用带有正则表达式的 HTML5 的“模式”属性进行验证。它工作正常。

```
<input type='text' class='date-pick' name='breakEndIE' size='8' placeholder='01-03-2011' style='max-width:100px' pattern='^(((0[1-9]|[12]\d|3[01])-(0[13578]|1[02])-                ((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)-(0[13456789]|1[012])-((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])-02-((19|[2-9]\d)\d{2}))|(29-02-((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$' readonly='readonly' required /> 
```

但是，当我使用 document.write() 将其放入脚本中时，它会停止工作。（Pattern 总是认为日期的格式有错误）

```
<script>
            var ifFFOCHR = false;
            if (navigator.appVersion.indexOf("MSIE") > -1) ifFFOCHR = false;
            else if (navigator.appVersion.indexOf("Chrome") > -1) ifFFOCHR = true;
            else if (navigator.appVersion.indexOf("Safari") > -1) ifFFOCHR = false;
            else ifFFOCHR = true;

            if (ifFFOCHR == true) 
                {
                    //FIREFOX/CHROME/OPERA CODE HERE
                    document.write("<input type='text' class='date-pick' name='breakEnd' size='8' placeholder='01-03-2011' style='max-width:100px' pattern='^(((0[1-9]|[12]\d|3[01])-(0[13578]|1[02])-((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)-(0[13456789]|1[012])-((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])-02-((19|[2-9]\d)\d{2}))|(29-02-((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$' required />");
                }
            else 
                {
                    //IE/SAFARI CODE HERE
                    document.write("<input type='text' class='date-pick' name='breakEndIE' size='8' placeholder='01-03-2011' style='max-width:100px' pattern='^(((0[1-9]|[12]\d|3[01])-(0[13578]|1[02])-                ((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)-(0[13456789]|1[012])-((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])-02-((19|[2-9]\d)\d{2}))|(29-02-((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$' readonly='readonly' required />");
                }
            </script> 
```

我不知道为什么会这样。我曾多次尝试将其复制并粘贴到 document.write() 中。它在它外面工作，但不在里面。我试过让朋友做这件事。我们在另一个脚本中进行了尝试，它运行良好，只是在这个脚本中它被破坏了。

请帮忙。

仅供参考：该脚本是为了在 IE 和 Safari 中显示某些代码，而在 Firefox、Opera 和 Chrome 中显示不同的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:53:59.267

`\d`一个很大的可能性是您的正则表达式字符串中有转义字符。当内联添加模式属性时，这些字符被视为文字字符，`\`但当放置在 javascript 字符串中时，它们被视为具有不同的含义。

因为您现在已经将该表达式包装在一个字符串中，所以您可能需要转义该`\`字符，例如`\\d`.

尝试将字符串写入`console.log`或调用`alert()`，以便可视化 JavaScript 是如何解释字符串的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:21:41.817

我不是 javascript 程序员，但如果我删除标签 readonly='readonly' 在 MSIE8 中正常运行。

# mysql - Groupby 与 Where 子句

> ID：11357173
> 
> 赞同：0
> 
> 时间：2012-07-06T06:46:10.750
> 
> 标签：mysql

我有一张桌子`PropertyViewer`。我`Groupby 'ip_address'`只需要 Where`'property id'`是一样的。我应该如何在MYSQL中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:50:11.350

```
SELECT * 
FROM `PropertyViewer`
GROUP BY `ip_address`, `property_id`; 
```

您可以在

```
`ip_address`、`property_id`
```

以任何适合您需求的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:03:13.337

听起来您可能需要：

```
SELECT *
  FROM PropertyViewer
 GROUP BY property_id, ip_address; 
```

这会将相同的项目`property_id`组合`ip_address`在一起。

# php - Cakephp 不同的表后缀

> ID：11357175
> 
> 赞同：0
> 
> 时间：2012-07-06T06:46:18.917
> 
> 标签：php, mysql, cakephp

我有以下要求：

使用以下名称创建数据库表：

主题组1

主题组2

主题组3

主题组4

有什么方法可以创建模型“TopicsGroup”并将其与基于 cakephp 后缀的不同表名相关联？

PS 请不要建议为组创建不同的表和另一个表来映射组和主题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:28:49.057

在模型中你应该有：

```
class TopicsGroup extends Model{
    public $useTable = 'topics_group1';
} 
```

但我不知道如何以蛋糕的方式动态更改后缀，你可以只有 3 个模型（TopicsGroup1 ...）

# security - 移动应用程序的 OAuth2 访问令牌是否必须过期？

> ID：11357176
> 
> 赞同：32
> 
> 时间：2012-07-06T06:46:22.963
> 
> 标签：security, oauth-2.0, access-token

这里接受的关于[OAuth2 访问令牌为何过期](https://stackoverflow.com/a/7035926/14955)的答案：

*   许多提供商支持安全性非常弱的不记名令牌。通过使它们变得短暂并需要刷新，它们限制了攻击者滥用被盗令牌的时间。（**这是什么意思？我认为它的意思是允许在没有 TLS 的情况下传输？还有别的吗？**）。
*   大规模部署不想在每次 API 调用时都执行数据库查找，因此他们会发布可通过解密验证的自编码访问令牌。但是，这也意味着无法撤销这些令牌，因此它们会在短时间内发行，并且必须刷新。
*   刷新令牌需要客户端身份验证，这使其更强大。与上述访问令牌不同，它通常通过数据库查找来实现。

假设我们不支持访问令牌的非加密传输，则需要处理第一个要点。

假设我们可以针对可撤销的、完全随机的访问令牌进行数据库查找，从而处理第二个令牌。

对于移动应用来说，客户端认证不能再强了，因为“注册时获取的client_id和client_secret是嵌入到你的应用程序源代码中的，在这种情况下，client_secret显然不被视为秘密”。（[谷歌](https://developers.google.com/accounts/docs/OAuth2InstalledApp)）。这消除了第三个问题。

那么在这种情况下分离短期访问令牌和长期刷新令牌有什么好处呢？仅发布未过期的访问令牌并忽略整个刷新令牌部分是否“可以”？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-16T22:09:26.143

刷新令牌和未过期访问令牌在安全性方面的区别在于对授权服务器的额外调用。

如果攻击者获得了您**未过期的访问令牌的访问权**，他可以直接调用您的资源服务器并获取机密数据作为响应。
现在，如果他窃取了您的**刷新令牌**，他首先必须调用授权服务器并接收访问令牌作为响应。然后他可以向资源服务器查询机密数据。

每次使用刷新令牌从您的授权服务器请求访问令牌时，OAuth 2 规范（至少是目前的最新草案）都要求服务器[检查客户端身份以及是否绑定到令牌](https://www.rfc-editor.org/rfc/rfc6749#section-10.4)（如果可能）。

由于使用客户端密码的常规方法无法明确识别开放平台上已安装的应用程序，因此运行应用程序的平台必须提供执行此操作的方法。例如，Google 要求开发者对 Android 应用程序进行签名。[因此，当使用Google API 控制台](https://code.google.com/apis/console/)为 Android 应用程序请求凭据时，您必须指定[用于对应用程序进行签名的证书的指纹，](https://developers.google.com/console/help/#installed_applications)并且仅获取客户端 ID，但没有秘密响应。在发行令牌时，Google 可以决定应用程序是否已获得开发人员的授权，以他的名义请求令牌。

如果您确实无法验证客户端身份，那么至少在某些情况下可以识别出刷新令牌被盗。该规范有一个[例子](https://www.rfc-editor.org/rfc/rfc6749#section-10.4)：

> 当客户端身份验证不可行时，授权服务器应该部署其他方法来检测刷新令牌滥用。
> 
> 例如，授权服务器可以使用刷新令牌轮换，其中每次访问令牌刷新响应都会发布一个新的刷新令牌。先前的刷新令牌已失效，但由授权服务器保留。如果刷新令牌被破坏并随后被攻击者和合法客户端使用，它们中的一个将呈现一个无效的刷新令牌，这将通知授权服务器违规行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T16:07:49.467

未过期的访问令牌的最大问题是没有机制来替换被盗的令牌。如果我可以访问您的未过期访问令牌，那么我实际上就是该系统的您。如果令牌是短暂的并且过期了，那么有一种机制可以替换被盗的令牌，并且限制了我必须破解您的令牌的窗口。

假设我需要 3 个小时来破解一个数据包并获取令牌，但访问令牌只有两个小时有效。然后，当我无法侵入您的帐户时，令牌已更改，我必须重新开始。如果令牌没有过期，那么我可以完全访问您的帐户，您无法替换它，除非删除令牌并强制重新授权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:44:38.660

OAuth2 访问令牌不必过期（或者更确切地说，它们确实会过期，但可能会过期很多年）。

访问令牌可以一次用于从资源服务器获取某些资源，特别是它允许获取用户批准的那些资源。另一方面，刷新令牌允许重复访问。因此，如果不要求每次访问之间的用户交互，就无法取消刷新令牌。

但总的来说，令牌有时会被同一设备上的其他恶意应用程序或手机上的 MITM 攻击窃取。如果可以使电话信任不可靠的证书，则 SSL 是 MITM-able。公司有时需要这样做才能访问内部网络（他们需要接受自签名证书，这允许他们对公司网络上发生的所有加密流量进行 MITM。因此假设发送加密令牌意味着它们在途中不会被盗是危险的。

不记名令牌本身并不比任何其他形式的令牌弱，正如一堆论文中所证明的那样（包括我自己的一篇，当我可以挖掘出来时，我会发布链接。）但是，不记名令牌只是适用于他们做出的假设有效的情况。令牌可以保密的假设通常是不记名令牌的主要假设。如果这不是真的，那么不记名令牌不会声明任何安全属性（尽管有些仍然持有）。请参阅[NIST Level 3 tokens](http://csrc.nist.gov/publications/nistpubs/800-63/SP800-63V1_0_2.pdf)，它定义了承载令牌必须击败的攻击，如[OAuth Bearer Tokens](http://tools.ietf.org/id/draft-ietf-oauth-v2-bearer-22.txt)中所述。简而言之，不记名令牌不应该阻止令牌被盗。

不记名令牌不能被撤销，这是真的。然而，鉴于通常的访问模式是在获取后立即使用访问令牌，因此即使当前无法想到滥用案例，也应该相当快地使访问令牌过期以防止潜在的滥用。代币存在的时间越长，被盗的可能性就越大。刷新令牌实际上被盗更危险，因为如果您无法保护客户端 ID，它会在更长的时间范围内提供重复访问。OAuth2 通常可以提供对资源的访问，因此例如可以用于将 API 公开给客户端一段时间。与单次使用令牌相比，使用刷新令牌可以造成更大的伤害。

事实上，客户端身份验证可以通过多种方式变得更加安全，例如，在下载时为每个客户端提供不同的密钥。这可以防止在一个设备上对令牌进行逆向工程破坏客户端所有实例的安全性的普遍攻击。其他可能的技术包括使用 OAuth 向您的服务器验证客户端，然后使用您希望访问的授权服务器执行 OAuth 协议的第二次运行。这样，您就可以让客户端定期更新其密钥，并让它们都拥有不同的密钥，同时不会对 Facebook 或 Google 拥有的授权服务器所使用的系统造成过度负担。

使用移动应用程序时，长期刷新令牌比拥有某种多用途不记名令牌更安全，即使没有采取措施保护客户端。这是因为用户不能使令牌过期。如果刷新令牌没有被盗，并且用户只是希望撤销访问，那么可以这样做。即使用户只是希望撤销访问权限，也不能撤销多用途不记名令牌。多用途数据库引用令牌显然可以被撤销，但这不是协议的设计目的，因此在 OAuth 上执行的安全分析并没有说明这个混合系统的安全性。

总之，我建议使用刷新令牌和数据库令牌，因为这最有可能是安全的。如果您可以做任何事情来保护客户，那将是一个额外的好处，但是这可以防止的情况很少。如果您确实想保护客户端，请考虑使用软令牌，即谷歌身份验证器，因为这是一个可靠的实现，经受住了一些非常聪明的人的分析。

# c# - 当通过 web 请求 URL 时，从需要用户名和密码的 url 获取自动响应的 C# 代码

> ID：11357178
> 
> 赞同：0
> 
> 时间：2012-07-06T06:46:25.607
> 
> 标签：c#

当我通过浏览器地址栏请求页面（例如：[http://mysite.com/mypage](http://mysite.com/mypage)）时，它会提示我一条消息 [例如：需要身份验证：服务器[http://mysite.com/mypage:80](http://mysite.com/mypage:80)需要用户名和密码...]。当我提供我的用户名和密码时，它会显示对浏览器的响应。否则它会说：用户未授权。

我想使用 C# 代码自动化这个过程，以便我可以在我的代码中获得响应。由于它提示用户名和密码，所以我无法通过 HttpWebRequest/Response 获得响应。

我尝试过以下代码块：

```
 HttpWebRequest webRequest = WebRequest.Create(myUrl) as HttpWebRequest;

       webRequest.Proxy = WebRequest.DefaultWebProxy;

        webRequest.Credentials = new NetworkCredential(userName, password);
        webRequest.Proxy.Credentials = new NetworkCredential(userName, password);

        HttpWebResponse response = (HttpWebResponse)webRequest.GetResponse();
        System.IO.Stream stream = response.GetResponseStream();

        System.IO.StreamReader sReader = new System.IO.StreamReader(stream);
        Console.WriteLine(sReader.ReadToEnd()); 
```

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:51:58.647

```
string formParams = string.Format("user={0}&password={1}&switch=Log+In", username, password);
            WebRequest req = WebRequest.Create(Login_Page_URL);
            req.ContentType = "application/x-www-form-urlencoded";
            req.Method = "POST";
            req.Proxy.Credentials = CredentialCache.DefaultCredentials;
            byte[] bytes = Encoding.ASCII.GetBytes(formParams);
            req.ContentLength = bytes.Length;
            using (Stream os = req.GetRequestStream())
            {
                os.Write(bytes, 0, bytes.Length);
            }
            resp = req.GetResponse();
            cookieHeader = resp.Headers["Set-cookie"];
            resp.Close();

// to view the page behing login page

            WebRequest getRequest = WebRequest.Create(Page_Behing_login_Page_URL);
            getRequest.Headers.Add("Cookie", cookieheader);
            WebResponse getResponse = getRequest.GetResponse();
            using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
            {
                pageSource = sr.ReadToEnd();
            } 
```

尝试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:48:56.263

最后我找到了解决方案。我请求的站点需要基本的 IIS 身份验证。我已经通过以下方式解决了：

```
 WebRequest webRequest = WebRequest.Create(finalUrl);
        ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;
        CredentialCache credentialCache = new CredentialCache();
        credentialCache.Add(new System.Uri(finalUrl), "Basic", new NetworkCredential(userName, password));

        webRequest.Credentials = credentialCache;
        webRequest.PreAuthenticate = true;

        HttpWebResponse response = (HttpWebResponse)webRequest.GetResponse();

        System.IO.Stream stream = response.GetResponseStream();

        System.IO.StreamReader sReader = new System.IO.StreamReader(stream);
        pageSource = sReader.ReadToEnd(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:47:43.483

您必须检查响应标头

有关更多信息，请在此处查看[http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.headers.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.headers.aspx)

# session - cakePHP 2.1 创建自定义会话处理程序

> ID：11357179
> 
> 赞同：1
> 
> 时间：2012-07-06T06:46:34.090
> 
> 标签：session, cakephp, serialization

使用 cakePHP 2.1，我想编写一个自定义会话处理程序来对 destroy() 和 gc() 执行额外的清理，另外我希望会话持久保存在数据库中。我遵循[http://book.cakephp.org/2.0/en/development/sessions.html](http://book.cakephp.org/2.0/en/development/sessions.html)中的示例，所以我定义了：

```
class CustomSession extends DatabaseSession implements CakeSessionHandlerInterface { ... 
```

我需要做的额外清理取决于我想从数据库中 cake_sessions 表的数据字段中获取的会话变量。我从[cakePHP - 管理数据库 CakeSessions](https://stackoverflow.com/questions/6869126/cakephp-managing-a-database-cakesessions)中了解到，该数据是 PHP serial() 函数的结果，我可以使用 unserial() 来获取先前序列化数据的对象。但是，对来自 cake_sessions 的数据使用 unserial() 总是会导致：

```
Notice: unserialize() [function.unserialize]: Error at offset 0 of 159 byte 
```

在 cakePHP 之外，我编写了以下内容

```
$query = "SELECT * FROM testdb.cake_sessions WHERE id = 'b5d4vc0143ruh420hmkvl7s722'";
$result = mysqli_query($conn, $query);
$row = mysqli_fetch_assoc($result);
echo '<pre>' . print_r($row['data']) . '</pre>';
$session_vars = unserialize($row['data']);
echo '<pre>' . $session_vars . '</pre>'; 
```

由于前面描述的错误，上面打印了 cake_sessions 表中的序列化数据字段，但没有打印未序列化的对象。一些论坛帖子提到这是一个 MySQL 问题，并且使用 blob 而不是 text 作为数据字段的类型，但这并没有什么区别。

从 cake_sessions 获取的数据字段的一个测试示例是：

```
 Config|a:3{s:9:"userAgent";s:32:"d7e7d243e8bfaf713b70bde2a6ef1c18";s:4:"time";i:1341540422;s:9:"countdown";i:10;}Customer|a:2:{s:4:"cart";i:1;s:4:"test";i:2;} 
```

序列化的含义很明显，所以我可以手动解析它，但我不想这样做。

为什么 unserial() 不工作和/或是否有现有的 PHP 函数来反序列化可以工作的数据？

# ios - iOS：有没有办法替换大部分相同的字符串？

> ID：11357180
> 
> 赞同：0
> 
> 时间：2012-07-06T06:46:34.307
> 
> 标签：ios, string, replace, format

我有一些我想在某个时候替换的 html 代码。

如

```
NSString *stringSHOW = @"width="353" height="500" width="131" height="204" width="777" width="369" width="888"/>"; 
```

像这样的东西。但我想全部替换`[ width="any" to width="300" ]`。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:49:38.057

查看[NSRegularExpression](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)的文档和`NSString`采用正则表达式的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:53:45.443

```
NSString *newStringShow = [stringShow stringByReplacingOccurrencesOfString:@"any"withString:@"300"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:55:55.310

```
- (NSString *)updateString:(NSString *)inputString withString:(NSString *)stringToReplace {

    NSArray *components = [inputString componentsSeparatedByString:@" "];
    NSMutableArray *mutableComponents = [[components mutableCopy] autorelease];

    for (NSString *componentString in components) {

        NSMutableString *mutableString = [[componentString mutableCopy] autorelease];
        NSRange replaceRangeFirstOccurenceStart = [mutableString rangeOfString:@"width=\""];
        if (replaceRangeFirstOccurenceStart.location == NSNotFound) {
            NSLog(@"String not found in component");
        }
        NSMutableString *replaceString = [NSMutableString string];
        for (int i = 0; i < replaceRangeFirstOccurenceStart.length; i ++) {
            [replaceString appendString:@"_"];
        }
        NSMutableString *modifiedString = [mutableString stringByReplacingCharactersInRange:replaceRangeFirstOccurenceStart withString:replaceString];
        NSRange replaceRangeEnd = [modifiedString rangeOfString:@"\""];
        NSRange rangeToChange = NSMakeRange(replaceRangeFirstOccurenceStart.length - 1, replaceRangeEnd.location + replaceRangeEnd.length - replaceRangeFirstOccurenceStart.length + 1);        
        NSString *updatedString = [mutableString stringByReplacingCharactersInRange:rangeToChange withString:[NSString stringWithFormat:@"\"%@\"", stringToReplace]];
        [mutableComponents replaceObjectAtIndex:[components indexOfObject:componentString] withObject:updatedString];
    }
    return [mutableComponents componentsJoinedByString:@" "];
}

NSString *stringShow = @"width=\"355\" width=\"200\"";
[self updateString:stringShow withString:@"34501"]; 
```

您还可以将分隔符字符串作为参数发送，在您的情况下为 @"width=\"" 和 @"\"" 以使此方法完全抽象并能够替换您传递的任何内容。

# r - 使时间序列有规律

> ID：11357182
> 
> 赞同：0
> 
> 时间：2012-07-06T06:46:46.383
> 
> 标签：r, time-series, zoo

我这个时间序列数据（我无法 dput。因为 dput 给出了一个很长的结果，在这里复制和粘贴会弄得一团糟）这些是我的文本文件中的几行：

```
 Time                  Depths   ifc  if   lat        lon
"7814" "2012-03-15 04:45:09-05" 4816 1040 5410 43.213628 -92.27727
"7815" "2012-03-15 04:30:04-05" 4813 1040 5410 43.213628 -92.27727
"7816" "2012-03-15 04:15:14-05" 4807 1040 5410 43.213628 -92.27727
"7817" "2012-03-15 04:00:09-05" 4809 1040 5410 43.213628 -92.27727
"7818" "2012-03-15 03:45:04-05" 4819 1040 5410 43.213628 -92.27727
"7819" "2012-03-15 03:30:15-05" 4816 1040 5410 43.213628 -92.27727
"7820" "2012-02-25 14:45:07-06" 4862 1040 5410 43.213628 -92.27727
"7821" "2012-02-25 14:30:02-06" 4858 1040 5410 43.213628 -92.27727
"7822" "2012-02-25 14:15:13-06" 4852 1040 5410 43.213628 -92.27727
"7823" "2012-02-25 14:00:08-06" 4860 1040 5410 43.213628 -92.27727
"7824" "2012-02-25 13:45:03-06" 4855 1040 5410 43.213628 -92.27727
"7825" "2012-02-25 13:30:13-06" 4869 1040 5410 43.213628 -92.27727
"7826" "2012-02-25 13:15:08-06" 4868 1040 5410 43.213628 -92.27727
"7827" "2012-02-25 13:00:03-06" 4873 1040 5410 43.213628 -92.27727 
```

在这里，您可以看到行号旁边的值。7819是一个跳跃。我希望解决此问题，使其包含 15 分钟的连续时间间隔，并且这些间隔中的深度列为 NA，其余列中的值与其他行中的常量值一样填充。

[我在 SO 上](https://stackoverflow.com/questions/3897814/convert-a-irregular-time-series-to-a-regular-time-series)试过这个，但没有用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:02:22.657

@Jase_ 提供了一个示例，说明如果您的数据是`data.frame`; 但是，您在评论中以及在最初尝试使用`dput`this 时指出，这是`zoo`该类的对象。

这是`zoo`解决方案（从概念上借用 Jase_ 的答案）。它利用对象的`index`属性`zoo`。

```
# First, read in your data as a zoo object via "copy and paste"
require(zoo)
t = read.zoo(text='        Time Depths   ifc  if   lat        lon
"7814" "2012-03-15 04:45:09-05" 4816 1040 5410 43.213628 -92.27727
"7815" "2012-03-15 04:30:04-05" 4813 1040 5410 43.213628 -92.27727
"7816" "2012-03-15 04:15:14-05" 4807 1040 5410 43.213628 -92.27727
"7817" "2012-03-15 04:00:09-05" 4809 1040 5410 43.213628 -92.27727
"7818" "2012-03-15 03:45:04-05" 4819 1040 5410 43.213628 -92.27727
"7819" "2012-03-15 03:30:15-05" 4816 1040 5410 43.213628 -92.27727
"7820" "2012-02-25 14:45:07-06" 4862 1040 5410 43.213628 -92.27727
"7821" "2012-02-25 14:30:02-06" 4858 1040 5410 43.213628 -92.27727
"7822" "2012-02-25 14:15:13-06" 4852 1040 5410 43.213628 -92.27727
"7823" "2012-02-25 14:00:08-06" 4860 1040 5410 43.213628 -92.27727
"7824" "2012-02-25 13:45:03-06" 4855 1040 5410 43.213628 -92.27727
"7825" "2012-02-25 13:30:13-06" 4869 1040 5410 43.213628 -92.27727
"7826" "2012-02-25 13:15:08-06" 4868 1040 5410 43.213628 -92.27727
"7827" "2012-02-25 13:00:03-06" 4873 1040 5410 43.213628 -92.27727
', tz="") 
```

## 合并输出只有两行：

```
# Modify your index as per Jase_'s answer
index(t) = index(t) - as.numeric(format(index(t), "%S"))
# Merge with an empty zoo object that has an index
# of all the dates that you need.
t.merged = merge(t, zoo(, seq(from=index(t)[1], 
                              to=index(t)[length(index(t))], 
                              by="15 min"))) 
```

让我们看看输出是什么样子的：

```
head(t.merged, 10L)
# 
# 2012-02-25 13:00:00 4873 1040 5410 43.21363 -92.27727
# 2012-02-25 13:15:00 4868 1040 5410 43.21363 -92.27727
# 2012-02-25 13:30:00 4869 1040 5410 43.21363 -92.27727
# 2012-02-25 13:45:00 4855 1040 5410 43.21363 -92.27727
# 2012-02-25 14:00:00 4860 1040 5410 43.21363 -92.27727
# 2012-02-25 14:15:00 4852 1040 5410 43.21363 -92.27727
# 2012-02-25 14:30:00 4858 1040 5410 43.21363 -92.27727
# 2012-02-25 14:45:00 4862 1040 5410 43.21363 -92.27727
# 2012-02-25 15:00:00   NA   NA   NA       NA        NA
# 2012-02-25 15:15:00   NA   NA   NA       NA        NA
tail(t.merged, 10L)
# 
# 2012-03-15 02:30:00   NA   NA   NA       NA        NA
# 2012-03-15 02:45:00   NA   NA   NA       NA        NA
# 2012-03-15 03:00:00   NA   NA   NA       NA        NA
# 2012-03-15 03:15:00   NA   NA   NA       NA        NA
# 2012-03-15 03:30:00 4816 1040 5410 43.21363 -92.27727
# 2012-03-15 03:45:00 4819 1040 5410 43.21363 -92.27727
# 2012-03-15 04:00:00 4809 1040 5410 43.21363 -92.27727
# 2012-03-15 04:15:00 4807 1040 5410 43.21363 -92.27727
# 2012-03-15 04:30:00 4813 1040 5410 43.21363 -92.27727
# 2012-03-15 04:45:00 4816 1040 5410 43.21363 -92.27727 
```

但是，这不会`NA`像您想要的那样替换值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:41:27.247

如果我正确理解了您的问题，则应该这样做（假设它不是`zoo`对象并且`data.frame`is `t`）。您可能还必须将列索引 2 更改为 1

```
dates <- as.POSIXct(t[,2])
# remove the seconds from the time stamps
dates <- dates - as.numeric(format(dates,"%S"))
# Create a sequence of dates for the entire time.
all_dates <- seq.POSIXt(from=dates[length(dates)], to=dates[1],by="15 min")
# Put them into a data.frame to make merging easier
all_dates_frame <- data.frame(dates_floor=all_dates)
# create a data.frame of the obsereved values with the floored dates
t_floor <- data.frame(dates_floor=dates, t[,-2]) 
# merge the observations onto the grid
together <- merge(all_dates_frame, t_floor, all.y="TRUE", all.x="TRUE")
# If you want to replace the floored times with the actual times then find which ones need replacing
replace_time_index <- !is.na(together[,2])
# replace the time stamps
together[replace_time_index, 1] <- t[,2] 
```

# php - PHP 如何在 php 中实现队列处理

> ID：11357187
> 
> 赞同：23
> 
> 时间：2012-07-06T06:47:12.157
> 
> 标签：php, queue

我希望我的客户（通过邮寄）发送的数据被放置在一个队列中，并且我的服务器上的一个 php 脚本首先检查队列是否为空。如果队列不为空，那么脚本会一一处理队列中的所有数据。我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-06-20T13:12:09.770

这是您可以使用[enqueue](https://github.com/php-enqueue/enqueue-dev)库轻松完成的事情。首先，您可以从多种[传输方式](https://github.com/php-enqueue/enqueue-dev/tree/master/docs/transport)中进行选择，例如 AMQP、STOMP、Redis、Amazon SQS、Filesystem 等。

其次，它超级好用。让我们从安装开始：

您必须安装`enqueue/simple-client`库和[传输之一](https://github.com/php-enqueue/enqueue-dev/tree/master/docs/transport)。假设您选择文件系统之一，请安装`enqueue/fs`库。总结一下：

```
composer require enqueue/simple-client enqueue/fs 
```

现在让我们看看如何从 POST 脚本发送消息：

```
<?php
// producer.php

use Enqueue\SimpleClient\SimpleClient;

include __DIR__.'/vendor/autoload.php';

$client = new SimpleClient('file://'); // the queue will store messages in tmp folder

$client->sendEvent('a_topic', 'aMessageData'); 
```

消费脚本：

```
<?php
// consumer.php

use Enqueue\SimpleClient\SimpleClient;
use Enqueue\Psr\PsrProcessor;
use Enqueue\Psr\PsrMessage;

include __DIR__.'/vendor/autoload.php';

$client = new SimpleClient('file://');

$client->bind('a_topic', 'a_processor_name', function(PsrMessage $psrMessage) {
   // processing logic here

   return PsrProcessor::ACK;
});

// this call is optional but it worth to mention it.
// it configures a broker, for example it can create queues and excanges on RabbitMQ side. 
$client->setupBroker();

$client->consume(); 
```

`consumer.php`使用[supervisord](http://supervisord.org/)或其他进程管理器运行与您一样多的进程，在本地计算机上您无需任何额外的库或包即可运行它。

这是一个基本示例，并且 enqueue 有许多其他功能可能会派上用场。如果您有兴趣，请查看入[队文档](https://github.com/php-enqueue/enqueue-dev/blob/master/docs/index.md)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-06T06:51:59.377

你可以使用类似[Zero MQ的东西](https://zeromq.org/)

请参阅[Rasmus Lerdorf 的示例](http://toys.lerdorf.com/archives/57-ZeroMQ-+-libevent-in-PHP.html)。

您还可以考虑使用[Gearman](http://php.net/manual/en/book.gearman.php)来分配负载。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T06:50:29.720

看看[这个](http://abhinavsingh.com/blog/2010/02/memq-fast-queue-implementation-using-memcached-and-php-only/)。

它使用 memcached 进行持久化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-31T11:12:23.987

cronjob 方法的问题是，cronjob 最多可以设置为 1 分钟间隔，因此作业执行有 1 分钟的延迟，如果可以接受，那很好，否则应该使用带有轮询脚本的队列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T08:16:32.463

这是另一个很棒的教程：

[http://squirrelshaterobots.com/programming/php/building-a-queue-server-in-php-part-1-understanding-the-project/](https://web.archive.org/web/20120415235818/http://squirrelshaterobots.com/programming/php/building-a-queue-server-in-php-part-1-understanding-the-project/)

另一个解决方案是使用他们似乎已经融入 PHP 的 Gearman（这不是我最后一次使用它）： http: [//php.net/manual/en/book.gearman.php](http://php.net/manual/en/book.gearman.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-22T07:29:41.370

由于关系数据库（例如：MySQL）非常灵活，并且被 Web 开发人员很好地理解，它们被用于许多类型的作业队列。当对象缓存未配置时，许多 PHP 应用程序使用此解决方案作为后备。这是不得已而为之的方法，因为它是一种非常昂贵的实现队列的方法。

如果您必须使用 MySQL 作为队列，Percona 的一位工程师写了这篇关于管理潜在痛点的 [博客文章。](https://blog.engineyard.com/2011/5-subtle-ways-youre-using-mysql-as-a-queue-and-why-itll-bite-you)

如果您想要最具可扩展性的实现，我强烈推荐 ZeroMQ。但是，它不是默认的或特别常见的 PHP 扩展。因此，对于您不会控制 Web 服务器堆栈的项目：使用 APC 对象、Memcache 或 Memcached，然后回退到 MySQL 缓存表。

# javascript - 删除浏览器页面底部链接的目标网址

> ID：11357189
> 
> 赞同：0
> 
> 时间：2012-07-06T06:47:18.943
> 
> 标签：javascript, jquery, browser, navigation

在每个浏览器中，当我将光标停留在可点击链接上时，页面底部会显示此链接的目的地，点击时我将被重定向到该目的地。是否可以用 jQuery 隐藏它？是否也可以隐藏地址栏或将其设置为空白，以隐藏实际页面？（例如只显示域名）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:52:40.377

不，这是不可能的……至少现在还不可能。window.status 属性似乎在大多数浏览器中都不起作用，即使对于 Firefox，它也只有在浏览器设置中启用了一个选项时才会起作用。您将不得不做一些变通方法。通过一些研究，我发现[了这个解决](https://stackoverflow.com/questions/8144419/change-browser-url-information-on-hover-with-gwt)方法。

像下面这样的东西也可以工作（例如，另一种解决方法）：

```
<a href="#" onclick="location.href ='http://www.google.com';">my link</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:33:00.927

您可以执行此操作，或者执行此操作的变体：

有这样一个链接：

```
<a href="#" id="mylink">click here</a> 
```

然后使用jquery，您可以设置点击的位置：

```
$(document).ready(function() {
            var where_to = "http://www.google.com";
            $('#mylink').on('click', function(event) {
                event.preventDefault();
                 document.location.href = where_to;
            })
        }); 
```

并且这种方式在滚动链接时，状态栏中不会显示任何位置。

编辑：对于地址栏内容，要隐藏脚本的实际名称，您可以查看 .htaccess 重写规则，在网络上进行搜索。

# java - 试图通过 java 实现 LinkedList 的概念，但它在编译时给出错误？

> ID：11357191
> 
> 赞同：1
> 
> 时间：2012-07-06T06:47:21.553
> 
> 标签：java

我正在尝试简单的链表收集程序，但它并没有给我输出。
我创造了这个东西

```
import java.lang.*;  
import java.util.*;  

class Linkedlist  
{  
    public static void main (String [] args)  
    {  
        LinkedList ll=new LinkedList ();  
        System.out.println ("CONTENTS OF l1 = "+ll);  
        System.out.println ("SIZE = "+ll.size ());  
        ll.add (new Integer (10));  
        ll.add (new Integer (20));  
        ll.add (new Integer (30));  
        ll.add (new Integer (40));  
        System.out.println ("CONTENTS OF ll = "+ll);  
        System.out.println ("SIZE = "+ll.size ());

        // retrieving data of ll using toArray ()  
        Object obj []=ll.toArray ();  
        int s=0;  

        for (int i=0; i<obj.length; i++)  
        {  
            Integer io= (Integer) obj [i];  
            int x=io.intValue ();  
            s=s+x;  
        }  

        System.out.println ("SUM USING toArray () = "+s);  
        ll.addFirst (new Integer (5));  
        ll.addFirst (new Integer (6));  
        System.out.println ("CONTENTS OF ll = "+ll);  
        System.out.println ("SIZE = "+ll.size ());  

        // retrieving data of ll using iterator ()  
        Iterator itr=ll.iterator ();  
        int s1=0;  

        while (itr.hasNext ())  
        {  
            Object obj1=itr.next ();  
            Integer io1= (Integer) obj1;  
            int x1=io1.intValue ();  
            s1=s1+x1;  
        }

        System.out.println ("SUM USING iterator () = "+s1);  
        ListIterator litr=ll.listIterator (); 

        while (litr.hasNext ())  
        {  
            Object obj2=litr.next ();  
            System.out.print (obj2+",");  
        } 

        System.out.println ("\n");  

        while (litr.hasPrevious ())  
        {  
            Object obj3=litr.next ();  
            System.out.print (obj3+",");  
        }

        System.out.println ("\n");  
        Object obj4=ll.get (2);// random retrieval  
        System.out.println (obj4);  
    }  
} 
```

输出是

```
Note: Linkedlist.java uses unchecked or unsafe operations.  
Note: Recompile with -Xlint:unchecked for details. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:56:23.763

我通过 eclipse 执行了你的程序：

只需使用`LinkedList<Integer>`而不是仅使用 LinkedList。没有警告。

输出 =>

```
CONTENTS OF l1 = []
SIZE = 0
CONTENTS OF ll = [10, 20, 30, 40]
SIZE = 4
SUM USING toArray () = 100
CONTENTS OF ll = [6, 5, 10, 20, 30, 40]
SIZE = 6
SUM USING iterator () = 111
6,5,10,20,30,40,

Exception in thread "main" java.util.NoSuchElementException
    at java.util.LinkedList$ListItr.next(Unknown Source)
    at com.Linkedlist.main(Test.java:46) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:07:42.213

利用

```
LinkedList<Integer> ll = new LinkedList<Integer>();
Iterator<Integer> itr = ll.iterator();
ListIterator<Integer> litr = ll.listIterator(); 
```

安装在

```
LinkedList ll = new LinkedList();
Iterator itr = ll.iterator();
ListIterator litr = ll.listIterator(); 
```

如下所示

```
 LinkedList<Integer> ll = new LinkedList<Integer>();
    System.out.println("CONTENTS OF l1 = " + ll);
    System.out.println("SIZE = " + ll.size());
    ll.add(new Integer(10));
    ll.add(new Integer(20));
    ll.add(new Integer(30));
    ll.add(new Integer(40));
    System.out.println("CONTENTS OF ll = " + ll);
    System.out.println("SIZE = " + ll.size());
    // retrieving data of ll using toArray ()
    Object obj[] = ll.toArray();
    int s = 0;
    for (int i = 0; i < obj.length; i++) {
        Integer io = (Integer) obj[i];
        int x = io.intValue();
        s = s + x;
    }
    System.out.println("SUM USING toArray () = " + s);
    ll.addFirst(new Integer(5));
    ll.addFirst(new Integer(6));
    System.out.println("CONTENTS OF ll = " + ll);
    System.out.println("SIZE = " + ll.size());
    // retrieving data of ll using iterator ()
    Iterator<Integer> itr = ll.iterator();
    int s1 = 0;
    while (itr.hasNext()) {
        Object obj1 = itr.next();
        Integer io1 = (Integer) obj1;
        int x1 = io1.intValue();
        s1 = s1 + x1;
    }
    System.out.println("SUM USING iterator () = " + s1);
    ListIterator<Integer> litr = ll.listIterator();
    while (litr.hasNext()) {
        Object obj2 = litr.next();
        System.out.print(obj2 + ",");
    }
    System.out.println("\n");
    while (litr.hasNext()) {
        Object obj3 = litr.next();
        System.out.print(obj3 + ",");
    }
    System.out.println("\n");
    Object obj4 = ll.get(2);// random retrieval
    System.out.println(obj4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:05:25.517

第一个答案（由 Nandkumar 提供）是正确的，我还要检查由以下几行引起的运行时错误：

```
while (litr.hasPrevious ())  
    {  
        Object obj3=litr.next ();  
        System.out.print (obj3+",");  
    } 
```

那就是：你检查你的迭代器是否有一个“上一个”项目，然后去寻找“下一个”？可能不是你打算做的。

编译时的“错误”只是一个警告，你可以在编译后运行你的程序，但是编译器告诉你它在你的代码中发现了一些奇怪的东西。

# ruby - ruby 中的 thread.exit 和 thread.pass 有什么区别？

> ID：11357192
> 
> 赞同：3
> 
> 时间：2012-07-06T06:47:24.310
> 
> 标签：ruby

我正在学习 ruby​​ 及其概念。我正在阅读[一篇](http://rubylearning.com/satishtalim/ruby_threads.html)关于“ruby 中的线程”的文章，其中无法区分 thread.pass 和 thread.exit。本文包含这两种方法的定义：**Thread.pass**方法调用线程调度程序将执行传递给另一个线程。**Thread.exit**方法终止当前正在运行的线程并安排另一个线程运行。

但是我在使用这些方法时很困惑。你能帮我解决一下吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:55:08.917

Thread.pass 让位于要执行的其他线程，但最终，调度程序会将执行传回给它。Thread.exit 终止线程（并因此告诉调度程序将执行传递给另一个线程）。我希望这有帮助。如果不是，请包含引起混淆的代码。

```
t1 = Thread.new do
  10.times do |i|
    if i < 5
      puts i
      sleep 0.1
      Thread.pass
    else
      Thread.exit
    end
  end
end

sleep 0.05

t2 = Thread.new do
  10.times do |i|
    puts i
    sleep 0.1
  end
end

t1.join
t2.join 
```

这将有以下输出：

```
0
0
1
1
2
2
3
3
4
4
5
6
7
8
9 
```

# database - 从vc++连接sql2005数据库

> ID：11357195
> 
> 赞同：0
> 
> 时间：2012-07-06T06:47:36.943
> 
> 标签：database, sql-server-2005, visual-studio-2008, visual-c++

我想将我的应用程序与 sql server2005 express 和我的应用程序连接到 vs2008。

连接字符串是：

```
db.Open(NULL, FALSE, FALSE, _T("ODBC;Driver={SQL Native Client};Server=ESS10\SQLEXPRESS;Database=C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Data\\testingsql.mdf;Trusted_Connection=yes;"))) 
```

但是当我调试代码时弹出框打开。

![在此处输入图像描述](../Images/eec0b25f101ae54e51ec0ed697aab7a3.png) 任何人建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:53:57.613

它说，命名管道未启用，请检查您有哪些选项。机会是启用了 tcp，所以你可以做

服务器=tcp:ESS10\SQLEXPRESS

# android - SQL INSERT 语句中的错误

> ID：11357200
> 
> 赞同：0
> 
> 时间：2012-07-06T06:47:49.493
> 
> 标签：android, sql, insert

我用引号搞得一团糟，我无法正确执行查询，看看是否有人可以帮助我正确执行。

```
db.execSQL("INSERT INTO Studies (download_id, name, subject_id, current_date)" 
    + "VALUES('" 
    + studies.get(vEst.getId()).p2 
    + "', '" 
    + studies.get(vEst.getId()).p2 
    + '", "' 
    + studies.get(vEst.getId()).id 
    + '", "' 
    + dateFormat.format(date)"'))"; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:50:37.343

*在动词*之间添加空格并平衡单引号/括号。

```
INSERT INTO Studies (download_id, name, subject_id, current_date) VALUES('" 
        + studies.get(vEst.getId()).p2 + "','" 
        + studies.get(vEst.getId()).p2 + "','"
        + studies.get(vEst.getId()).id + "','" 
        + dateFormat.format(date) + "')"; 
```

您可以使用`String.format()`来避免此类问题。

```
String sql=String.format("INSERT INTO TableName (Col1, Col2) VALUES (%d,'%s')", value1,value2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:56:30.130

```
db.execSQL("INSERT INTO Studies (download_id, name, subject_id, current_date) VALUES ('" + studies.get(vEst.getId()).p2 + "', '" + studies.get(vEst.getId()).p2  + "', '"  + studies.get(vEst.getId()).id  + "', '" + dateFormat.format(date)+"')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:54:23.713

试试这个：

```
 db.execSQL("INSERT INTO Studies (download_id, name, subject_id, current_date)"
 + "VALUES(" + studies.get(vEst.getId()).p2 + ", '" 
+ studies.get(vEst.getId()).p2 + '", " 
+ studies.get(vEst.getId()).id + ", "' 
+ dateFormat.format(date) + "')"); 
```

# android - 列出所有已安装的设备？

> ID：11357201
> 
> 赞同：1
> 
> 时间：2012-07-06T06:48:10.203
> 
> 标签：android, usb

我们的安卓平板电脑（版本 4.0.3）中有一个 USB 端口。当我将 USB 设备连接到 Android 平板电脑时，USB 设备会自动挂载。

1）我想列出所有已安装的 USB 设备。2）我们如何通过编程卸载这个USB设备。

提前致谢。

# ios - 在 iOS 中绘制不规则形状

> ID：11357202
> 
> 赞同：4
> 
> 时间：2012-07-06T06:48:11.723
> 
> 标签：ios, core-graphics, quartz-graphics, quartz-core

我需要像下图中的那样进行绘制，只需轻轻一按并在屏幕上拖动即可。 ![](../Images/353e9262c64a4a5b54049851fab45692.png)

首先，我尝试使用 cocos2d 得到这样的结果，但无法得到与上图完全一样的结果，即我只能像下图那样得到。

![](../Images/2278e40061f98b265b9f73d7c000660d.png)

简短的 cocos2d 代码在[我之前](https://stackoverflow.com/questions/10949104/sharp-edged-sprites)无法获得任何帮助的一个问题中进行了描述。现在我试图在`QuartzCore`框架中完成这项工作。我上网了一整天，但找不到任何相关的解决方案。

现在，我的问题是，如何使用`QuartzCore`框架绘制第一张图片？否则，有没有其他框架或方法可以做到这一点？有人能帮我吗？

# python - 当第一个文件不存在时，python中的成语用于打开第二个文件

> ID：11357205
> 
> 赞同：0
> 
> 时间：2012-07-06T06:48:17.160
> 
> 标签：python, file-io

我想编写一个脚本来检查并打开一个名为“.mysettings”的设置文件，如果它存在于 HOME 目录中。如果该文件不存在于 HOME 目录中，则它应该尝试在当前目录中打开一个（如果存在的话）。

python中是否有成语或单行代码来编写类似的程序？

我现在能想到的最好方法是尝试使用 try-catch 块打开第一个文件，就像[这个问题](https://stackoverflow.com/questions/82831/how-do-i-check-if-a-file-exists-using-python)中解释的那样，然后尝试第二个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:53:38.257

这是python的方法。没有一个衬里，但清晰，易于阅读。

```
try:
    with open("/tmp/foo.txt") as foo:
        print foo.read()
except:
    try:
        with open("./foo.txt") as foo:
            print foo.read()
    except:
        print "No foo'ing files!" 
```

当然，您也可以随时执行以下操作：

```
for f in ["/tmp/foo.txt", "./foo.txt"]:
    try:
        foo = open(f)
    except:
        pass
    else:
        print foo.read() 
```

*   美丽总比丑陋好。
*   可读性很重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T06:54:17.603

像这样？

```
f = open(fn1 if os.path.exists(fn1) else fn2, "r") 
```

（虽然它和 try/catch 不完全一样，因为在检查时 fn1 存在的情况下它仍然可能抛出的情况很少见。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:55:23.213

这个怎么样

```
filename = '/tmp/x1' if os.path.exists('/tmp/x1') else '/tmp/x2' 
```

# kohana - 使用 kohana 从下拉列表中获取所选选项的值

> ID：11357213
> 
> 赞同：1
> 
> 时间：2012-07-06T06:49:12.187
> 
> 标签：kohana, kohana-3, kohana-3.2

选择选项时如何从下拉列表中获取值并立即触发提交按钮。我可以做到，`php`但我想用`kohana`但不知道。我是新手并且正在使用`kohana 3.2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:58:50.737

在 Kohana 控制器中，您将使用该`request`对象来访问 POST 数据。例如：

```
$selectedValue = $this->request->post('dropdownlist'); 
```

# .net - 使用 powerbuilder 12.5 调用 web 服务方法返回空响应

> ID：11357222
> 
> 赞同：0
> 
> 时间：2012-07-06T06:49:40.880
> 
> 标签：.net, web-services, null, powerbuilder

任何建议/解决方案/提示将不胜感激。

我正在使用 PowerBuilder 12.5 来调用 .Net Web 服务，并且该调用有效，并由发送有效 XML 响应的 WS 接收，但 PB 加载时的响应对象为空。

代理项目使用 .Net 选项来生成 PB 代理。一些 WS 方法工作正常，并且响应对象可以在 PB 代码中访问，但是当调用其他一些 WS 方法时，即使响应 XML 正确并且包含预期值（使用提琴手捕获），分配用于保存 WS 方法响应的 PB 对象为空）。在视觉检查中，由 PB 生成的代理似乎与 WSDL 定义相匹配。

我需要能够在代码中检查 WS 方法调用的响应，以便应用程序在失败时可以采取适当的措施。

WSDL 是： [http ://cbre.truelogic.com.au/service.asmx?WSDL](http://cbre.truelogic.com.au/service.asmx?WSDL)

PB 代码示例：

相同的 WS，第一个方法调用`GroupInsert()`有效，但尽管第二个方法调用`ContactBulkImportWithGroups()`有效，PB 无法解释方法响应并加载响应对象（即使响应 XML 是正确的）。

```
// Web Service = lws_cl, already created earlier in script.

// Get Group ID - This WS method call works
wspn_campaignlogic_group ln_ret_group
decimal ldc_groupID[1]

ln_ret_group = lws_cl.GroupInsert(ls_groupName)
if isValid(ln_ret_group.GroupResults) then
    if ln_ret_group.GroupResults.ResultCode = 1 then
        ldc_groupID[1] = ln_ret_group.GroupID
    end if
end if

// Contacts - This WS method returns null
wspn_campaignlogic_contactbulkimporter ln_ret_contact   
any la_xml

ln_ret_contact = create wspn_campaignlogic_contactbulkimporter

la_xml = '<contacts><c><f>Jill</f><l>Jackson</l><e>jj@yahoo.com</e><comp>Acme Solutions</comp><sal></sal><p>(02) 8080 1111</p><m></m></c></contacts>'
ln_ret_contact = lws_cl.ContactBulkImportWithGroups(3, ldc_groupID, la_xml, "dd/mm/yyyy")

// Check results
if NOT isValid(ln_ret_contact) then
    // Error - execution goes in here because ln_ret_contact is null so result cannot be checked by code
else
    // OK
end if 
```

XML 响应：由 Fiddler 捕获：

```
HTTP/1.1 200 OK
Date: Fri, 06 Jul 2012 04:39:42 GMT
Server: Microsoft-IIS/6.0
X-UA-Compatible: IE=8
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Cache-Control: private, max-age=0
Content-Type: text/xml; charset=utf-8
Content-Length: 688

<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><ContactBulkImportWithGroupsResponse xmlns="http://new.cl.truelogic.com.au/"><ContactBulkImportWithGroupsResult><ImportResults><InvalidContacts><contacts xmlns=""></contacts></InvalidContacts><Updated>1</Updated><Inserted>0</Inserted></ImportResults><ContactImportResults><ResultCode>1</ResultCode><ResultDescription>Success.</ResultDescription></ContactImportResults></ContactBulkImportWithGroupsResult></ContactBulkImportWithGroupsResponse></soap:Body></soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:46:59.263

您不需要创建由服务调用返回的结构的实例。您需要做的就是声明它 - 它被填充为方法调用的返回值。

取出那个 CREATE 语句。

# android - 来自另一个活动的 Android 调用活动不起作用

> ID：11357225
> 
> 赞同：0
> 
> 时间：2012-07-06T06:50:10.143
> 
> 标签：android

我正在尝试从默认活动调用活动，但是当触发调用活动时，我的应用程序崩溃并关闭并显示此消息。这`07-06 11:54:59.291: E/MapActivity(366): Couldn't get connection factory client`是我当前调用活动的代码

```
public class GMapsActivity extends MapActivity {
EditText password;
Button   login;
MapView mapView;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
initcontrols();
}
public void initcontrols()
{
    password=(EditText)findViewById(R.id.pass);
    login=(Button)findViewById(R.id.login);
    mapView=(MapView)findViewById(R.id.map_view);
    login.setOnClickListener(new Button.OnClickListener(){
        public void onClick(View v)
        {
             Intent myIntent = null;
             if(password.getText().toString().equals("admin")) {
             System.out.println("Entering");
             mapView.setVisibility(View.VISIBLE);
             login.setVisibility(View.INVISIBLE);
             password.setVisibility(View.INVISIBLE);
             myIntent = new Intent(v.getContext(), GMapsActivity1.class);

            } else {
            }
             startActivity(myIntent);
        }

    });

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

请任何人帮助我做到这一点

**更新** 这是我的第二个活动代码请检查是否需要任何更改

```
public class GMapsActivity1 extends MapActivity {

private MapView mapView;
EditText password;
Button   login;

JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb=null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

mapView = (MapView) findViewById(R.id.map_view);       
        mapView.setBuiltInZoomControls(true);

 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//http post
try{
     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httppost = new HttpPost("http://sml.com.pk/a/map.php");
     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
     HttpResponse response = httpclient.execute(httppost);
     HttpEntity entity = response.getEntity();
     is = entity.getContent();
     }catch(Exception e){
         Log.e("log_tag", "Error in http connection"+e.toString());
    }
//convert response to string
try{
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
       sb = new StringBuilder();
       sb.append(reader.readLine() + "\n");

       String line="0";
       while ((line = reader.readLine()) != null) {
                      sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
        }catch(Exception e){
              Log.e("log_tag", "Error converting result "+e.toString());
        }
//paring data
double LAT;
double LANG;
String INFO;
try{
      jArray = new JSONArray(result);
      JSONObject json_data=null;
      for(int i=0;i<jArray.length();i++){
             json_data = jArray.getJSONObject(i);
             LAT=json_data.getDouble("lat");
             LANG=json_data.getDouble("lang");
             INFO=json_data.getString("info");

//Overlay code
List<Overlay> mapOverlays = mapView.getOverlays();
                Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
        CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(drawable, this);

        //GeoPoint point = new GeoPoint(latitudeE6, longitudeE6);
        GeoPoint point = new GeoPoint((int)(LAT * 1e6),(int)(LANG * 1e6));
        OverlayItem overlayitem = new OverlayItem(point, "Shakarganj", INFO);
        itemizedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedOverlay);

        MapController mapController = mapView.getController();

        mapController.animateTo(point);
        mapController.setZoom(6);

//Overlay code

         }
      }
      catch(JSONException e1){
          Toast.makeText(getBaseContext(), "No Vehicles Found" ,Toast.LENGTH_LONG).show();
      } catch (ParseException e1) {
            e1.printStackTrace();
    }
}
@Override
protected boolean isRouteDisplayed() {
    return false;
}
} 
```

这是我的清单文件代码

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.javacodegeeks.android.googlemaps"
      android:versionCode="1"
      android:versionName="1.0">
      <uses-sdk android:minSdkVersion="10"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

    <application android:icon="@drawable/icon" android:label="@string/app_name">

        <activity android:name=".GMapsActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="GMapsActivity1"
           android:launchMode="singleTop">
            <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />

        </activity>

        <uses-library android:name="com.google.android.maps" />

    </application>    

</manifest> 
```

**更新1**

```
package com.javacodegeeks.android.googlemaps;

import java.util.ArrayList;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.widget.Toast;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

    private Context context;

    public CustomItemizedOverlay(Drawable defaultMarker) {
          super(boundCenterBottom(defaultMarker));
    }

    public CustomItemizedOverlay(Drawable defaultMarker, Context context) {
          this(defaultMarker);
          this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mapOverlays.get(i);
    }

    @Override
    public int size() {
        return mapOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mapOverlays.get(index);
        //AlertDialog.Builder dialog = new AlertDialog.Builder(context);
        //dialog.setTitle(item.getTitle());
        //dialog.setMessage(item.getSnippet());
        //dialog.show();
        //Toast.makeText(context, item.getSnippet(), 20);
        Toast.makeText(context, item.getSnippet(),  Toast.LENGTH_LONG).show();
        return true;
    }

    public void addOverlay(OverlayItem overlay) {
        mapOverlays.add(overlay);
        this.populate();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:12:28.270

试试下面的代码：

```
 public class GMapsActivity extends MapActivity {
    EditText password;
    Button   login;
    MapView mapView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

        password=(EditText)findViewById(R.id.pass);
        login=(Button)findViewById(R.id.login);
        mapView=(MapView)findViewById(R.id.map_view);

        login.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v)
            {
                 Intent myIntent = null;
                 if(password.getText().toString().equals("admin")) {
                 System.out.println("Entering");
                 mapView.setVisibility(View.VISIBLE);
                 login.setVisibility(View.INVISIBLE);
                 password.setVisibility(View.INVISIBLE);
                 myIntent = new Intent(GMapsActivity.this, GMapsActivity1.class);
                 startActivity(myIntent);
                } 

            }

        });

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    } 
```

* * *

**更新**

你为什么用这个：

```
<activity android:name="GMapsActivity1"
          android:launchMode="singleTop">
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />

</activity> 
```

像这样使用：

```
<activity
            android:name=".GMapsActivity1" 
            android:launchMode="singleTop" >
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:54:14.233

确保您创建的是`myIntent`正确的并且它不为空（在*else*中您没有做任何事情......）

还要更改创建：

```
myIntent = new Intent(GMapsActivity.this, GMapsActivity1.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:54:26.603

```
 if(password.getText().toString().equals("admin")) {
             System.out.println("Entering");
             mapView.setVisibility(View.VISIBLE);
             login.setVisibility(View.INVISIBLE);
             password.setVisibility(View.INVISIBLE);
             myIntent = new Intent(v.getContext(), GMapsActivity1.class);

            } else {
            }
             startActivity(myIntent); 
```

上面的代码说 myIntent 仅在密码为 admin 而不是其他情况下才被初始化..但它甚至没有被初始化来启动活动..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T06:54:59.610

试试这个代码。

```
Intent myIntent = null;
if(password.getText().toString().equals("admin")) {
System.out.println("Entering");
mapView.setVisibility(View.VISIBLE);
login.setVisibility(View.INVISIBLE);
password.setVisibility(View.INVISIBLE);
myIntent = new Intent(GMapsActivity.this, GMapsActivity1.class);
startActivity(myIntent);
} else {
Toast.makeText(context, "password is invalid",  Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T06:55:13.597

而不是写

```
Intent myIntent = null;
myIntent = new Intent(v.getContext(), GMapsActivity1.class); 
```

添加

```
Intent myIntent = new Intent(getApplicationContext(), GMapsActivity1.class); 
```

或者

```
Intent myIntent = new Intent(GMapsActivity.this, GMapsActivity1.class); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T06:58:54.810

您需要在清单文件中添加此活动，否则它将无法启动并且会崩溃，我认为您没有这样做......

```
 <activity android:name="GMapsActivity1"
           android:launchMode="singleTop"></activity> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T07:10:50.557

先放 startActivity(myIntent); 在 if 条件下并确保 setContentView(...); 在 GMapsActivity1 活动中正确定义以及在清单文件中添加 GMapsActivity1。还有一件事可能是可能的，即您可以使用 R.id.... 未在 layout.xml 中为此活动定义。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-24T16:32:20.000

这是一个旧帖子，但我找到了一个尚未发布的解决方案。

使用调用活动时，您必须将 startActivityForResult 用于可能导致您尝试获取调用活动的活动的意图。

例子：

Intent intent=new Intent(MainActivity.this, NextActivity.class); startActivityForResult（意图，123）；

# php - 从ajax检索php数组

> ID：11357234
> 
> 赞同：1
> 
> 时间：2012-07-06T06:50:48.577
> 
> 标签：php, javascript, ajax

我正在尝试检索由 php 创建的数组并通过 ajax 发送回我的 JS 脚本。

我不确定如何显示该值。

服务器端php

```
 $r=array();
 $r[] = 'aaa';
 $r[] = 'bbb';
 $r[] = 'ccc';

echo json_encode($r); 
```

我的 JS

```
....ajax codes....

var p=document.getElementById('text');

if (xmlhttp.readyState==4 && xmlhttp.status==200){

    var r=xmlhttp.responseText;

   for (var i=0; i<r.length; i++){
        p.innerHTML= r[i] + '<br>';
   } 
```

}

输出将是

```
a
a
a
b
b
b
c
c
c
//but I want these
aaa
bbb
bbb 
```

我想使用 javascript 而不是 $.ajax 来完成这个。有任何想法吗？？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:07:43.240

将数组从服务器传输到客户端的最简单方法是使用 JSON。以下可用于在 JSON 中回显数组：

```
echo(json_encode($array)); 
```

请参阅[此处](http://uk.php.net/manual/en/function.json-encode.php)了解更多信息。

然后在客户端，您可以使用以下函数对 JSON 进行解码以生成相同的数组：

```
decodedjson = JSON.parse(ajax.response); 
```

不要忘记将客户端代码包装在 ajax 调用中。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:04:34.357

您必须先解析 json 字符串，例如使用[JSON.parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)。尝试（未经测试）：

```
if (xmlhttp.readyState==4 && xmlhttp.status==200){
    var r=JSON.parse(xmlhttp.responseText);
    for (var i=0; i<r.length; i++){
        p.innerHTML= r[i] + '<br>';
    } 
```

=== 更新 ===

如果您必须支持非常旧的浏览器（例如，小于或等于 IE7），您应该使用[Crockfords JSON2parser](https://github.com/douglascrockford/JSON-js)或[jQuery](http://jquery.com/)之类的库（具有更多功能的巨大库）。

# imagemapster - 如何在 ImageMapster 中将先前选择的区域重置为其原始状态？

> ID：11357235
> 
> 赞同：2
> 
> 时间：2012-07-06T06:50:50.503
> 
> 标签：imagemapster

如何使一个被选中的区域 - 因此使用我在 render_select 中定义的样式渲染 - 再次取消选中并使其看起来像以前从未选择过的任何其他区域？

```
$('img').mapster('set_options',{areas:[{key:'anyAreaKey',selected:false }]}); 
```

和

```
$('img').mapster('set_options',{areas:[{key:'anyAreaKey',highlight:false }]}); 
```

不要为我工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:16:28.520

要取消选择一个区域，就像最终用户再次单击它一样，有几种方法：

按键取消选择。将下面的“false”更改为“true”将改为选择

```
$('img').mapster('set',false,'key'); 
```

使用区域本身取消选择：

```
$('area[mapkey=key]').mapster('set',false); 
```

也使用该区域。还有一种互补的“选择”方法。“取消选择”和“选择”方法仅适用于区域。

```
$('area[mapkey=key]').mapster('deselect'); 
```

示例：http: [//jsfiddle.net/jamietre/MZ9aH/](http://jsfiddle.net/jamietre/MZ9aH/)

文档：[http ://www.outsharked.com/imagemapster/default.aspx?docs.html#select](http://www.outsharked.com/imagemapster/default.aspx?docs.html#select)

您使用的代码设置*初始选项*- 它们不会更改区域的当前状态。因此，虽然“selected: false”选项会在地图尚未绑定的情况下使其最初被取消选择，但在地图创建后它不会做任何事情。"highlight: false" 选项决定鼠标悬停时是否突出显示区域。

# eclipse - 无法在 Eclipse 中创建骨架 PlayN 项目

> ID：11357237
> 
> 赞同：5
> 
> 时间：2012-07-06T06:50:58.380
> 
> 标签：eclipse, maven, playn

我已经到了几乎放弃尝试使用 PlayN 的地步。[我在这里](http://code.google.com/p/playn/wiki/GettingStarted)尝试了 PlayN 的入门指南，以及 GamesFromScratch 的更新指南[，](http://www.gamefromscratch.com/post/2011/11/07/PlayN-install-guide_The-new-way.aspx)但没有成功。每次我尝试使用 code.googlecode.playn 1.3.1 原型创建一个 New->Other->"Maven Project" 时，我都会收到以下错误消息：

> 'Creating playn-archetype' 遇到了问题
> 
> 无法从原型创建项目 [com.googlecode.playn:playn-archetype:1.3.1] 定义的工件不是原型

我想知道我是否做错了什么？我读过 Eclipse 附带 Maven 版本 3.0.2（我使用的是 Eclipse Juno），所以我安装了 Maven 3.0.4，虽然我不知道如何升级 Eclipse 的版本（或者它是否有任何区别）。

非常感谢您的时间，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T17:27:04.730

Eclipse Juno 嵌入了 Maven 3.0.4，所以这不是问题。

这是我想出的一个解决方案：

1.  [从Apache](http://maven.apache.org/)下载 apache-maven-3.0.x
2.  （在 Windows 上）将 apache-maven-3.0.x 中 bin 文件夹的位置添加到 PATH 环境变量中（单击编辑，添加分号并将 bin 文件夹的路径添加到末尾）
3.  使用 Maven（不是 Eclipse）生成一个新项目：

    > mvn archetype:generate -DarchetypeGroupId=com.googlecode.playn -DarchetypeArtifactId=playn-archetype -DarchetypeVersion=1.3.1

4.  （在 Eclipse 中）文件->导入->现有 Maven 项目；浏览到您生成项目的位置（可能是您的用户文件夹）并导入。
5.  要运行项目，在 gameName 上运行“Maven 测试”，编辑 gameName-core

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:53:26.240

您必须将 Maven 运行时添加到 Window/Preferences/Maven/Installations。在此之后——如果你有以前的 Maven 运行配置——你可能也必须更新这些配置，才能使用这个新的 Maven。

# image - nodejs读取图像数据

> ID：11357239
> 
> 赞同：8
> 
> 时间：2012-07-06T06:51:09.633
> 
> 标签：image, node.js, jpeg

是否有任何库可以读取 jpeg 的图像数据？

我想获得 jpeg 的像素。

我只找到像 node-jpeg 或 gm 这样的库，但它们不提供图像数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T07:04:24.987

您可以使用[node-imagemagick](https://github.com/rsms/node-imagemagick)模块来做到这一点。（请参阅[在 NodeJS 上打开图像并找出宽度/高度](https://stackoverflow.com/questions/5530946/opening-images-on-nodejs-and-finding-out-width-height)）。

此外，如果您更喜欢访问 EXIF 元数据，还有[node-exif](https://github.com/gomfunkel/node-exif)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-28T15:15:17.793

还有`exifr`和`exiftool-vendored`

[https://www.npmjs.com/package/exifr](https://www.npmjs.com/package/exifr)

[https://www.npmjs.com/package/exiftool-vendored](https://www.npmjs.com/package/exiftool-vendored)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-15T03:23:33.280

npm 有一个可以在 rgba 中提取像素数据的包，也许它可以帮助： [https ://www.npmjs.com/package/get-image-pixels](https://www.npmjs.com/package/get-image-pixels)

# java - 切入点中的抽象类型

> ID：11357243
> 
> 赞同：2
> 
> 时间：2012-07-06T06:51:25.087
> 
> 标签：java, spring, aspectj, aop, pointcut

我想用[Aspect](http://static.springsource.org/spring/docs/2.0.x/reference/aop.html)拦截具有特定签名的方法调用。

我的切入点应该是这样的：

`execution(public Result * (Input))"`

但是`Result`并且`Input`是`abstract`。

这个切入点是否也匹配所有返回子类型`Result`并使用子类型的方法`Input`？因为那是我的意图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T23:55:06.073

非常接近。您需要在类型名称后立即添加一个加号。

```
execution(public Result+ * (Input+)) 
```

[这是来自AspectJ](http://www.eclipse.org/aspectj/doc/released/progguide/idioms.html)文档的示例。Spring 使用 AspectJ 语法的受限版本。

```
pointcut callToUndefinedMethod():
    call(* AbstractFacade+.*(..))
    && !call(* AbstractFacade.*(..)); 
```

这是（简洁的）[文档](http://www.eclipse.org/aspectj/doc/released/progguide/quick-typePatterns.html)

> SubtypePattern - SubtypePattern 中的所有类型，带 + 的模式。

# java - 如何在 Web 应用程序中使用索引使数据库访问更快？

> ID：11357244
> 
> 赞同：0
> 
> 时间：2012-07-06T06:51:25.120
> 
> 标签：java, mysql, database

在基于**Web 的 Java 应用程序**中，我有一个具有此模式的表

```
 Column          Datatype

 Userid          char(25) primary key;
 name            char(100)
 address         varchar(120)
 email           char(50) UNIQUE; 
```

有**120000**条记录。（基数）

**现在，我想获取存储在列 -> 名称下的匹配名称（逐个字符）。**当我开始在搜索框中输入内容时（显然是通过 ajax）。

**例如，如果我写 p，那么所有从字母 p 开始的名字都会被检索出来，并会出现在列表中以进行填充。**

现在我没有使用任何索引。那么如何使用它来**加快访问/搜索速度**。

我使用的**数据库是****MySql 5**和**java 作为前端**。

***任何为此目的使用适当集合的建议或任何散列将有助于数据库，如果是，请详细说明。***

> 虽然我已经为这个 StackOverflowers 找到了正确的轨道。如果我修改问题并使用散列代替索引及其所有定义和使用统计信息，那么如何做到这一点，它是否有益？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:57:06.160

最简单的方法就是：

```
ALTER TABLE `your_table` ADD INDEX(`name`); 
```

而且，由于名称是可变长度的，请改用 VARCHAR。对于您的密钥，请使用 INT！

如果仅按一个字符搜索，则可以将索引缩小到一个字节：

```
ALTER TABLE `your_table` ADD INDEX `name`(`name`(1)); 
```

然后，为了获得更好的性能，您可以使用覆盖索引。这意味着您需要正确索引所有必需的数据，以便它驻留在内存中（确保您正确配置了服务器）并且 MySQL 不需要从磁盘读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:57:28.880

默认情况下，`PRIMARY KEY`属性`UNIQUE`在表中被索引。所以，你的`email`和`userid`已经被索引了。（**注意：**我严重建议您不要`CHAR`使用*userid*）

并使用

```
INDEX `<any-name-here>` (`name`) # The `name` is the column and `<any-
                                 # name-here>` is the name of index. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:01:56.040

```
CREATE INDEX id_index ON employee_table (employeeID); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T06:58:52.057

在 WHERE 子句中的列上创建索引。

如果您的查询最有可能在名称上，请在名称列上创建索引。

请记住，这将利用您对该表的插入/更新记录，这意味着您的插入/更新操作将执行得更慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T06:59:44.357

我不会使用数据库查询。您可以在 String 数组中预加载（唯一）名称，并对到目前为止键入的字符执行二进制搜索。这确保了最大的响应性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T07:03:12.617

一般来说，您必须了解数据库索引的工作原理。

但是对于您的问题，一些建议：

如果您使用的是这样的东西（对不起，我不知道 MySql 通配符，假设它是 %）

```
select * from MyTable where name like '%a%' 
```

其中 a 是用户输入的字母 - 这永远不会在更大的表格上工作，因为第一个 % 表示 a 之前有任何字符 - 这意味着必须扫描整个表格（这意味着索引几乎没用）。

考虑实现自动完成器，使其在至少 3 个字符后开始自动完成，这将导致类似于以下的 SQL：

```
select * from MyTable where name like 'abc%' 
```

这将允许数据库使用索引，因为它只使用以“abc”开头的数据

不幸的是，您在可用于查询的列上根本没有索引，因此您可以通过以下命令添加它：

```
ALTER TABLE 'table' ADD INDEX('column_you_search') 
```

希望这可以帮助。

# .net - 强制 TextBox 接受小数

> ID：11357245
> 
> 赞同：0
> 
> 时间：2012-07-06T06:51:35.383
> 
> 标签：.net, wpf, regex, textbox, validation

简而言之，我的问题：

我有一个 WPF 文本框，其中只允许用户输入十进制数字。我的 TextBox 的 PreviewTextInput 事件处理程序中有我的验证逻辑。

所以我试过了：

**使用 TryParse**

```
double number = 0;
bool isSuccessful = double.TryParse(e.Text, out number);
e.Handled = !(number >= 0 && isSuccessful); 
```

**使用正则表达式：（**根据[贾斯汀摩根对这个问题的回答](https://stackoverflow.com/questions/5927498/verify-input-string-is-valid-decimal-number)）

```
string validNumberFormat = @"^[-+]?(\d{1,3}((,\d{3})*(\.\d+)?|([.\s]\d{3})*(,\d+)?)|\d+([,\.]\d+)?)$";
e.Handled  = Regex.Matches(e.Text, validNumberFormat).Count < 1; 
```

以上两种方法都只允许我输入数字，但不能输入单个小数点。

任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:23:06.287

是使用行为（Blend SDK System.Windows.Interactivity）而不是直接处理 PreviewTextInput。我这样做是因为可重用性，而且您应该知道 TextInput 没有处理空间，也没有处理粘贴。顺便说一句，关于您的“小数点”问题，我认为 Jonathan 和 Felice Pollano 是正确的。

```
public class TextBoxInputBehavior : Behavior<TextBox>
{
    public TextBoxInputMode InputMode { get; set; }

    public TextBoxInputBehavior()
    {
        this.InputMode = TextBoxInputMode.None;
    }

    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.PreviewTextInput += AssociatedObjectPreviewTextInput;
        AssociatedObject.PreviewKeyDown += AssociatedObjectPreviewKeyDown;

        DataObject.AddPastingHandler(AssociatedObject, Pasting);

    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        AssociatedObject.PreviewTextInput -= AssociatedObjectPreviewTextInput;
        AssociatedObject.PreviewKeyDown -= AssociatedObjectPreviewKeyDown;

        DataObject.RemovePastingHandler(AssociatedObject, Pasting);
    }

    private void Pasting(object sender, DataObjectPastingEventArgs e)
    {
        if (e.DataObject.GetDataPresent(typeof(string)))
        {
            var pastedText = (string)e.DataObject.GetData(typeof(string));

            if(!this.IsValidInput(this.GetText(pastedText)))
            {
                System.Media.SystemSounds.Beep.Play();
                e.CancelCommand();
            }
        }
        else
        {
            System.Media.SystemSounds.Beep.Play();
            e.CancelCommand();
        }
    }

    private void AssociatedObjectPreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Space)
        {
            if (!this.IsValidInput(this.GetText(" ")))
            {
                System.Media.SystemSounds.Beep.Play();
                e.Handled = true;
            }
        }
    }

    private void AssociatedObjectPreviewTextInput(object sender, TextCompositionEventArgs e)
    {
        if (!this.IsValidInput(this.GetText(e.Text)))
        {
            System.Media.SystemSounds.Beep.Play();
            e.Handled = true;
        }
    }

    private string GetText(string input)
    {
        var txt = this.AssociatedObject;
        var realtext = txt.Text.Remove(txt.SelectionStart, txt.SelectionLength);
        var newtext = realtext.Insert(txt.CaretIndex, input);

        return newtext;
    }

    private bool IsValidInput(string input)
    {
        switch (InputMode)
        {
            case TextBoxInputMode.None:
                return true;
            case TextBoxInputMode.DigitInput:
                return input.CheckIsDigit();

            case TextBoxInputMode.DecimalInput:
                //minus einmal am anfang zulässig
                if (input == "-")
                    return true;
                decimal d;
                return decimal.TryParse(input, out d);
            default: throw new ArgumentException("Unknown TextBoxInputMode");

        }
        return true;
    }
}

public enum TextBoxInputMode
{
    None,
    DecimalInput,
    DigitInput
} 
```

使用

```
 <TextBox>
        <i:Interaction.Behaviors>
            <MyBehaviors:TextBoxInputBehavior InputMode="DecimalInput"/>
        </i:Interaction.Behaviors>
    </TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:46:23.187

您可以使用以下免费控件。这将使您的工作变得轻松简单 [http://wpftoolkit.codeplex.com/wikipage?title=DecimalUpDown&referringTitle=Home](http://wpftoolkit.codeplex.com/wikipage?title=DecimalUpDown&referringTitle=Home)

[http://wpftoolkit.codeplex.com/wikipage?title=DoubleUpDown&referringTitle=Home](http://wpftoolkit.codeplex.com/wikipage?title=DoubleUpDown&referringTitle=Home)

# node.js - npm install dnode 使用 node0.8.1 & win7 失败

> ID：11357247
> 
> 赞同：1
> 
> 时间：2012-07-06T06:51:44.947
> 
> 标签：node.js, npm, dnode

**试过 python 2.7.3 & 3.x，都失败了。**

**py2.7的error2**

```
E:\Workspace\Code\SmartDoor>python
Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> ^Z^Z
E:\Workspace\Code\SmartDoor>npm install E:\Workspace\Git\dnode\
npm http GET https://registry.npmjs.org/dnode-protocol
npm http GET https://registry.npmjs.org/weak
npm http GET https://registry.npmjs.org/jsonify
npm http 408 https://registry.npmjs.org/weak
npm ERR! registry error parsing json
npm http GET https://registry.npmjs.org/weak
npm http 304 https://registry.npmjs.org/weak
npm http 304 https://registry.npmjs.org/jsonify
npm http 304 https://registry.npmjs.org/dnode-protocol
npm http GET https://registry.npmjs.org/traverse
npm http GET https://registry.npmjs.org/bindings
npm http 304 https://registry.npmjs.org/bindings
npm http 304 https://registry.npmjs.org/traverse

weak@0.2.1 install E:\Workspace\Code\SmartDoor\node_modules\dnode\node_modules
\weak
node-gyp rebuild
E:\Workspace\Code\SmartDoor\node_modules\dnode\node_modules\weak>node "C:\Progra
m Files (x86)\nodejs\node_modules\npm\bin\node-gyp-bin\....\node_modules\node-
gyp\bin\node-gyp.js" rebuild
gyp http GET http://nodejs.org/dist/v0.8.1/node-v0.8.1.tar.gz
gyp http 200 http://nodejs.org/dist/v0.8.1/node-v0.8.1.tar.gz
gyp ERR! Completion callback never invoked!
gyp ERR! This is a bug in node-gyp, please file an Issue:
gyp ERR! https://github.com/TooTallNate/node-gyp/issues
gyp ERR! not ok
npm ERR! weak@0.2.1 install: node-gyp rebuild
npm ERR! cmd "/c" "node-gyp rebuild" failed with 6
npm ERR!
npm ERR! Failed at the weak@0.2.1 install script.
npm ERR! This is most likely a problem with the weak package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR! node-gyp rebuild
npm ERR! You can get their info via:
npm ERR! npm owner ls weak
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\Program Files (x86)\nodejs\\node.exe" "C:\Program File
s (x86)\nodejs\node_modules\npm\bin\npm-cli.js" "install" "E:\Workspace\G
it\dnode\"
npm ERR! cwd E:\Workspace\Code\SmartDoor
npm ERR! node -v v0.8.1
npm ERR! npm -v 1.1.33
npm ERR! code ELIFECYCLE
npm ERR! message weak@0.2.1 install: node-gyp rebuild
npm ERR! message cmd "/c" "node-gyp rebuild" failed with 6
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR! E:\Workspace\Code\SmartDoor\npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:32:37.570

你确定你有 python 2 吗？因为它说你的python是3...

你能输入`python --version`你的控制台吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:54:46.377

解决了。

在我阅读了node-gyp的README之后，很遗憾我没有安装Microsoft Visual C++ Express 2010，

安装[http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express)后，

npm install dnode 成功，只有警告。

这是问题所在：[https ://github.com/TooTallNate/node-gyp/issues/97](https://github.com/TooTallNate/node-gyp/issues/97)

# jsf - 在spring web flow中捕获一个链接的eventId

> ID：11357252
> 
> 赞同：0
> 
> 时间：2012-07-06T06:52:02.873
> 
> 标签：jsf, spring-webflow

假设我在一个页面中有链接。例如**你好**。一旦我点击你好，它必须给我一个页面。在它进入新页面之前，我正在尝试使用 main_flow.xml 中的 on-entry 设置一些值。

我不知道如何在单击链接时捕获事件。如果单击它，则应将单击的事件传递给流处理文件。

我知道对于一个按钮，我可以使用 action 关键字捕获事件。我在 jsp 文件中提到的相同操作值可以在流处理程序文件中使用。

因此，对于链接，我如何捕获与按钮相同的事件。

# java - 数字 TextField 上的 setText 强制应用程序关闭

> ID：11357254
> 
> 赞同：1
> 
> 时间：2012-07-06T06:52:20.417
> 
> 标签：java, android, string, split

我一直无法在我的 EditTexts 上设置初始输入。每当我传递一个包含来自先前活动的字符串的意图时，它都会导致强制关闭。

我的程序的主要要点是，先前的活动将包含字符串的意图发送到 editText 活动。如果未初始化，editTexts 为空白，否则，它们包含上一个屏幕中 TextView 中显示的值。这是我的代码：

```
EditText month, day, year;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lab2_082588birthday);

    Intent startUp = getIntent();
    String receivedString = startUp.getStringExtra(Lab2_082588part2.BIRTHDAY_STRING);

    if(receivedString.trim().length() > 0){
        String[] separated = receivedString.split("/");

        int stringMonth = Integer.parseInt(separated[0]);
        int stringDay = Integer.parseInt(separated[1]);
        int stringYear = Integer.parseInt(separated[2]);

        month.setText(stringMonth);
        day.setText(stringDay);
        year.setText(stringDay);

    }
} 
```

这是我的**LogCat**

```
07-06 15:05:19.918: E/AndroidRuntime(276): Caused by: java.lang.NullPointerException

07-06 15:05:19.918: E/AndroidRuntime(276):  at com.android.rondrich.Lab2_082588birthday.onCreate(Lab2_082588birthday.java:34)

07-06 15:05:19.918: E/AndroidRuntime(276):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

07-06 15:05:19.918: E/AndroidRuntime(276):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:08:58.357

如果`receivedString`未以确保其具有 2 个斜杠 ("/") 的方式进行格式化，则字符串数组`separated`将不会具有您需要的 3 个值。

这将导致一个`IndexOutOfBoundsException`.

**编辑：**

您必须使用反斜杠转义斜杠字符`"\/"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:58:30.623

首先初始化textView的后 `setContentView(R.layout.lab2_082588birthday);`为：

```
month = (TextView)findViewById(R.id.month);
 day = (TextView)findViewById(R.id.day);
 month = (TextView)findViewById(R.id.year); 
```

然后将`Integer`值设置`TextView`为：

```
month.setText(stringMonth+"");
day.setText(stringDay+"");
year.setText(stringDay+""); 
```

或者

```
month.setText(String.valueOf(stringMonth));
day.setText(String.valueOf(stringDay));
year.setText(String.valueOf(stringDay)); 
```

在提供 logcat 之后：在将 String 与 int 配对之前检查数组长度：

```
if(separated.length >0)
{
        int stringMonth = Integer.parseInt(separated[0]);
        int stringDay = Integer.parseInt(separated[1]);
        int stringYear = Integer.parseInt(separated[2]);

        month.setText(stringMonth+"");
        day.setText(stringDay+"");
        year.setText(stringDay+"");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:08:43.453

你必须改变这条线

```
 month.setText(stringMonth);
    day.setText(stringDay);
    year.setText(stringDay); 
```

by bcz stringMonth ,stringDay 等是整数，你必须在 textview 中设置这种方式

```
 month.setText(""+stringMonth);
    day.setText(""+stringDay);
    year.setText(""+stringDay); 
```

另一种方法是

```
 month.setText(String.valueOf(stringMonth));
    day.setText(String.valueOf(stringDay));
    year.setText(String.valueOf(stringDay)); 
```

# sap-ase - 如果存在不为 null 或默认值的 alter table 语句不起作用

> ID：11357255
> 
> 赞同：4
> 
> 时间：2012-07-06T06:52:20.410
> 
> 标签：sap-ase, alter-table

我尝试在 test_tbl 中添加一个新列column2**并将*****该***列设置为默认值***'N/A'***而***不是 null***。声明如下：

 ****```
if not exists (select 1 from syscolumns where object_name(id) = 'test_tbl' and name = 'column2')
begin
  alter table test_tbl add column2 varchar(20) default 'N/A' not null
end 
```

错误是

```
Could not execute statement.
Column names in each table must be unique. Column name 'column2' in table 'test_tbl' is specified more than once.
Sybase error code=2705
Severity Level=16, State=3, Transaction State=1
Line 4 
```

但是，如果我添加一个可以为***空***的列。

```
if not exists (select 1 from syscolumns where object_name(id) = 'test_tbl' and name = 'column2')
begin
    alter table test_tbl add column2 varchar(20) null
end 
```

它可以工作。我对这些很困惑。我搜索了一些标签，知道动态 sql 可以工作。

> 该错误是在规范化期间引发的（因为解析树正在转换为规范化查询树），而不是在执行时。动态sql的内容在实际调用之前不会被处理，避免了错误。

在 Sybase DOC 中关于 if...else

> 在 if...else 块中出现 alter table、create table 或 create view 命令时， Adaptive Server 在确定条件是否为真之前为表或视图创建模式。如果表或视图已经存在，这可能会导致错误。

我想知道为什么可以为空的列语句可以无错误地执行！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:25:46.697

我在 Sybase ASE 15 上看到了相同的行为

除了您已经从 Sybase 文档中引用的内容之外，我无法为您提供解释，但是您可以通过在 execute() 语句中包装对 alter table 的调用来编写一致的行为，如下所示

```
if not exists (select 1 from syscolumns where object_name(id) = 'tbl_test' and name = 'column2')
begin     
    execute("
        alter table tbl_test add column2 varchar(20) default 'N/A' not null
    ")
end 
```

我的猜测是服务器能够`if...else`在执行 alter 语句之前评估此实例中的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-07T09:22:24.043

你应该写`go..`

请检查下面的代码它对我来说工作正常

```
IF  EXISTS ( SELECT 1 FROM sysobjects WHERE name = 'a_table' AND type = 'U' )
drop table a_table
go
CREATE TABLE a_table ( col1 int not null,col2 int null )
go 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T13:25:46.043

布拉德的回答在这个版本上对我不起作用：

Adaptive Server Enterprise/16.0 SP03 PL05/EBF 28236 SMP/P/AMD64/Windows 2008 R2 SP1/ase160sp03pl05x/0/64-bit/FBO/Mon Jul 30 02:37:39 2018

（我认为如果该列过去曾存在于表中，它会返回 1）

此代码有效：

```
if not exists (select 1 from syscolumns where id = object_id('tbl_test') and name = 'column2')
begin     
    execute("
        alter table tbl_test add column2 varchar(20) default 'N/A' not null
    ")
end 
```****

# jquery - json数据的jqwidget网格单元格格式

> ID：11357257
> 
> 赞同：0
> 
> 时间：2012-07-06T06:52:31.077
> 
> 标签：jquery, formatting, grid, cell

我正在尝试在 mvc 项目中使用带有 json 数据的 jqwidget 网格。日期字段的网格单元格格式存在问题。下面的代码得到一个像“/Date(1340204039263)/”这样的单元格。我该如何解决这个问题？

```
$(document).ready(function () {
// prepare the data
var source = {
    datatype: "json",
    datafields: [{ name: 'PersonelId' }, { name: 'Ad' }, { name: 'DogumYili' }, { name: 'UyelikTarihi'}],
    url: 'BindBasicGrid'
};

//var dataAdapter = new $.jqx.dataAdapter(source);
var dataAdapter = new $.jqx.dataAdapter(source, {
    downloadComplete: function (data, status, xhr) { alert(JSON.stringify(data)); },
    loadComplete: function (data) { },
    loadError: function (xhr, status, error) { alert(JSON.stringify(xhr)); }
});

$("#jqxgrid").jqxGrid({
    source: dataAdapter,
    theme: 'classic',
    columns: [{ text: 'Ad', datafield: 'Ad', width: 250 },
                { text: 'Doğum Yılı', datafield: 'DogumYili', width: 150 },
                { text: 'Üyelik Tarihi', datafield: 'UyelikTarihi', cellsformat: 'D', width: 180}]
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:49:32.000

您是否尝试在初始化中使用此 { name: 'UyelikTarihi', type: 'date'} 而不是 { name: 'UyelikTarihi'} ？

# html - 使用谷歌地图 API 的应用程序缓存

> ID：11357258
> 
> 赞同：3
> 
> 时间：2012-07-06T06:52:34.487
> 
> 标签：html, caching, google-api

我正在创建 HTML5 移动应用程序，现在我在应用程序缓存中遇到了一些问题，在我的应用程序中，我在我的页面上显示了谷歌地图，但我不想在应用程序缓存中添加谷歌 api，但是当我不添加时应用程序缓存清单文件中的 google api 应用程序不运行，chrome 显示此错误

`can not get:- http://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/9/8/%7Bcommon,util%7D.js`

`can not get:- http://maps.google.com/maps/api/jsv2/AuthenticationService.Authenticate?1shttp%3A%2F%2Flocalhost%2FmmtFinal%2Ftrunk%2F&4sAIzaSyA4H0NCYZ49_bwl9AkwViEGzU3gEen7-4I&5e0&callback=_xdc_._0h4avmibb&token=15142`

我现在一无所知，请告诉我我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T09:39:56.743

我通过不在应用缓存中添加谷歌地图 api 解决了这个问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T07:39:39.423

尝试使用 Google Maps API v3。我认为您的 api 链接有问题。这应该是 v3 中的链接：

```
<script type="text/javascript" 
  src="http://maps.google.com/maps/api/js?sensor=false">        
</script> 
```

# c# - C# 中具有零个或多个参数的通用构造函数

> ID：11357262
> 
> 赞同：1
> 
> 时间：2012-07-06T06:52:45.973
> 
> 标签：c#, class, generics

我想知道将下面的两个类结合起来的最佳方法是什么（在 C# 中）（这样我可以选择指定类型或不指定类型，以防不需要）？另外，如果需要，建议使用什么方法对 MyClass 进行编码以接受更多参数？谢谢！

```
public class MyClass{

    public MyClass() {}
}

public class MyClass<T> {

    T myvariable;   

    public MyClass<T>(T arg){       
        myvariable = arg;
    }

    // how can I handle MyClass(arg1, arg2, ....?
    // would I need to create classes MyClass<T,U,...> for each number of argument?
} 
```

这样我就可以使用任何一个来处理 MyClass ......

```
MyClass my1 = new MyClass()
MyClass<string> my2 = new MyClass("test"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:00:21.167

> 这样我就可以选择指定类型或不指定类型，以防不需要

只需合并它们并创建两个构造函数：

```
class MyClass<T> {

    T myvariable;

    public MyClass(){

    }

    public MyClass(T arg){
        myvariable = arg;
    }
} 
```

如果您不需要泛型类型，请使用`Void`( **not** `void` )：

```
public static void main(String[] args) {
    final MyClass<Void> my1 = new MyClass<Void>();
    final MyClass<String> my2 = new MyClass<String>("Test");
} 
```

> 编码 MyClass 以在必要时接受更多参数

如果您需要可变数量的相同类型的参数`T`，请使用可变参数：

```
class MyClass<T> {

    T[] myvariable;

    public MyClass(){

    }

    public MyClass(T... arg){
        myvariable = arg;
    }

} 
```

无法声明可变数量的异构类型，例如`<T, U, V...>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:23:04.603

您可以实现静态工厂方法以避免显式指定类型，例如

```
public static MyClass<Void> create() {
    return new MyClass<Void>() 
} 
```

和

```
public static <T> MyClass<T> create(T type) {
    return new MyClass<T>(type); 
} 
```

然后客户端可以像这样创建新实例：

```
MyClass<Void> noType = MyClass.create();
MyClass<String> withType = MyClass.create("some type");
MyClass<Integer> withInt = MyClass.create(123); 
```

（前提是您启用了自动装箱）。

# css - 鼠标进入IE9窗口时div改变位置？？

> ID：11357264
> 
> 赞同：1
> 
> 时间：2012-07-06T06:53:04.683
> 
> 标签：css, internet-explorer-9, wordpress-theming

在[这个网站上](http://www.shandon.com.au)，我只有 IE9 才有这个奇怪的问题。如果您只是加载页面并且将鼠标放在窗口之外（或者您不移动它），那么一切都很好。每当您移动鼠标时，搜索框就会改变它的位置，将所有内容向下滚动其高度。

它只发生在 IE9 中，并且 JS 被禁用。有任何想法吗？这是[原始主题](http://themes.imperialthemes.com/businessdesign/)，IE9 也一切正常。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T01:23:38.007

我建议要么添加 CSS Reset.. 例如 Eric Meyers（这将重置所有默认的用户代理样式表样式）。

如果这不起作用，您总是可以使用 IE 条件。

# r - 根据另一个向量中的索引组合列表中的元素

> ID：11357265
> 
> 赞同：3
> 
> 时间：2012-07-06T06:53:04.680
> 
> 标签：r, list, indexing

给定一个列表 (a) 和一个与 a 长度相同的数值向量 (b)：

```
a <- list(1, c(3, 7), 5)
b <- c(1,1,2) 
```

如何创建一个长度为 max(b) 的新列表，其中 a 中的每个元素都根据 b 放入相应的索引中，并在出现多次时合并，以便您获得：

```
[[1]]
[1] 1 3 7

[[2]]
[1] 5 
```

希望这应该非常有效地完成（没有循环），因为我的数据维度往往非常大......

我很确定有一个我没有想过的明显解决方案......

谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:04:17.090

关于什么：

```
split(unlist(a), rep(b, sapply(a, length)))
$`1`
[1] 1 3 7

$`2`
[1] 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:51:04.947

这是另一种方式

```
> lapply(split(a, b), unlist)
$`1`
[1] 1 3 7

$`2`
[1] 5 
```

# ios - CoreAnimation：分配 xxxx 字节失败

> ID：11357279
> 
> 赞同：0
> 
> 时间：2012-07-06T06:54:07.910
> 
> 标签：ios, memory-management, core-animation, core-plot

我正在开发一个 iOS 应用程序，我正在使用核心绘图来绘制图形。一次需要绘制 15-16 个图表。我有一个同步按钮，它从服务器获取数据并相应地绘制图表。每次同步时，图表的数量可能会有所不同。在绘制每个图表之前，我将使用代码发布早期的对象：

```
[smartbarChartView.hostedGraph.axisSet removeFromSuperlayer];
smartbarChartView.hostedGraph.axisSet=nil; 
smartbarChartView.hostedGraph=nil;
smartbarChartView = nil; 
```

仍然当我同步 2-3 次时，我收到错误 CoreAnimation: failed to allocate xxxx bytes 并且应用程序卡住了。

试图解决问题一整天。

非常感谢任何指导。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:17:22.200

释放宿主视图 ( `smartbarChartView`) 将释放图形及其所有组成部分，包括轴和图。确保您没有坚持对图表或绘图的强烈引用。

# python - 将密码子（碱基 64）转换为碱基 10 数字

> ID：11357285
> 
> 赞同：6
> 
> 时间：2012-07-06T06:54:32.857
> 
> 标签：python, numbers

在 2012 年 7 月号的“Mensa Bulletin”中有一篇题为“The Digital Brain”的文章。在其中，作者将人脑与 base64 计算联系起来。这是一篇相当有趣和有趣的文章，最后有提示。所述提示要求读者使用胞嘧啶胞嘧啶鸟嘌呤胞嘧啶腺嘌呤鸟嘌呤等于 2011 的事实将胞嘧啶鸟嘌呤腺嘌呤鸟嘌呤腺嘌呤鸟嘌呤转换为以 10 为底的数字（提到的第一个密码子集简称为 cgagag，第二个密码子集简称为 ccgcag。）基本上您必须使用文章中的表格将基数 64 转换为基数 10，该表格以正确的顺序显示所有可能的密码子 aug = 0, uuu = 1, uuc = 2, ... , gga == 61, ggg = 62，uag = 63。我决定试一试，并决定编写一个 python 程序来将密码子编号转换为以 10 为基数，并将以 10 为基数的数字转换为密码子。在为两者编写了一个快速算法之后，我运行了它。该程序没有给出任何错误，并为我的数字弹出密码子，反之亦然。但是，他们是错误的数字！我似乎看不出出了什么问题，非常感谢任何帮助。

废话不多说，代码：

```
codons = ['aug', 'uuu', 'uuc', 'uua', 'uug', 'ucu', 'ucc', 'uca', 'ucg', 'uau', 'uac', 'uaa', 'ugu', 'ugc', 'uga', 'ugg', 'cuu', 'cuc', 'cua', 'cug', 'ccu', 'ccc', 'cca', 'ccg', 'cau', 'cac', 'caa', 'cag', 'cgu', 'cgc', 'cga', 'cgg', 'auu', 'auc', 'aua', 'acu', 'acc', 'aca', 'acg', 'aau', 'aac', 'aaa', 'aag', 'agu', 'agc', 'aga', 'agg', 'guu', 'guc', 'gua', 'gug', 'gcu', 'gcc', 'gca', 'gcg', 'gau', 'gac', 'gaa', 'gag', 'ggu', 'ggc', 'gga', 'ggg', 'uag' ]

def codonNumToBase10 ( codonValue ) :

    numberOfChars = len( codonValue )

    # check to see if contains sets of threes
    if len( codonValue ) % 3 != 0 :
        return -1

    # check to see if it contains the correct characters
    for i in range(0, numberOfChars ) :
        if codonValue[i] != 'a' :
            if codonValue[i] != 'u' :
                if codonValue[i] != 'c' :
                    if codonValue[i] != 'g' :
                        return -2

    # populate an array with decimal versions of each codon in the input
    codonNumbers = []
    base10Value = 0
    numberOfCodons = int(numberOfChars / 3 )
    for i in range(0, numberOfCodons) :
        charVal = codonValue[ 0 + (i*3) ] + codonValue[ 1 + (i*3) ] + codonValue[ 2 + (i*3) ]
        val = 0
        for j in codons :
            if j == charVal :
                codonNumbers.append( val )
                break
            val += 1
        base10Value += ( pow( 64, numberOfCodons - i - 1 ) ) * codonNumbers[i]

    return base10Value

def base10ToCodonNum ( number ) :
    codonNumber = ''
    hitZeroCount = 0
    while( 1==1 ) :
        val = number % 64
        number = int( number / 64 )
        codonNumber = codons[val] + codonNumber
        if number == 0 :
            if hitZeroCount > 0:
                break
            hitZeroCount += 1
    return codonNumber

val_2011 = 'ccgcag'
val_unknown = 'cgagag'

print( base10ToCodonNum( codonNumToBase10( val_2011 ) ), '::', codonNumToBase10( val_2011 ) )
print( base10ToCodonNum( codonNumToBase10( val_unknown ) ), '::', codonNumToBase10( val_unknown ) ) 
```

编辑 1： 我得到的值是 ccgcag 的 1499 和 cgagag 的 1978。

编辑 2：由于 Ashwini Chaudhary 修复了 base10ToCodonNum 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:41:39.163

我无法遵循您的代码，因此我进行了另一个实现，但得到了相同的结果：

```
CODONS = [
    'aug', 'uuu', 'uuc', 'uua', 'uug', 'ucu', 'ucc', 'uca',
    'ucg', 'uau', 'uac', 'uaa', 'ugu', 'ugc', 'uga', 'ugg',
    'uuu', 'cuc', 'cua', 'cug', 'ccu', 'ccc', 'cca', 'ccg',
    'cau', 'cac', 'caa', 'cag', 'cgu', 'cgc', 'cga', 'cgg',
    'auu', 'auc', 'aua', 'acu', 'acc', 'aca', 'acg', 'aau',
    'aac', 'aaa', 'aag', 'agu', 'agc', 'aga', 'agg', 'guu',
    'guc', 'gua', 'gug', 'gcu', 'gcc', 'gca', 'gcg', 'gau',
    'gac', 'gaa', 'gag', 'ggu', 'ggc', 'gga', 'ggg', 'uag',
]

def codon2decimal(s):
    if len(s) % 3 != 0:
        raise ValueError("%s doesn't look like a codon number." % s)
    digits = reversed([ s[i*3:i*3+3] for i in range(len(s)/3) ])
    val = 0
    for i, digit in enumerate(digits):
        if digit not in CODONS:
            raise ValueError("invalid sequence: %s." % digit)
        val += CODONS.index(digit) * 64 ** i
    return val

def main():
    for number in ('cggcag', 'ccgcag', 'cgagag', 'auguuuuuc'):
        print number, ':', codon2decimal(number)

if __name__ == '__main__':
    main() 
```

结果：

```
cggcag : 2011
ccgcag : 1499
cgagag : 1978
auguuuuuc : 66 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:24:28.737

```
def codon2dec(x):
  codons = ['aug', 'uuu', 'uuc', 'uua', 'uug', 'ucu', 'ucc', 'uca', 'ucg', 'uau', 'uac', 'uaa', 'ugu', 'ugc', 'uga', 'ugg', 'uuu', 'cuc', 'cua', 'cug', 'ccu', 'ccc', 'cca', 'ccg', 'cau', 'cac', 'caa', 'cag', 'cgu', 'cgc', 'cga', 'cgg', 'auu', 'auc', 'aua', 'acu', 'acc', 'aca', 'acg', 'aau', 'aac', 'aaa', 'aag', 'agu', 'agc', 'aga', 'agg', 'guu', 'guc', 'gua', 'gug', 'gcu', 'gcc', 'gca', 'gcg', 'gau', 'gac', 'gaa', 'gag', 'ggu', 'ggc', 'gga', 'ggg', 'uag' ]
  if len(x)%3==0:
      x=[''.join((x[i],x[i+1],x[i+2])) for i in range(0,len(x),3)]
      try:
          return sum(codons.index(y)*(64**(len(x)-1-i)) for i,y in enumerate(x))

      except ValueError:
          return 'invalid input'

  else:
      return 'invalid input' 
```

**输出：**

```
>>> codon2dec('cgagag')
1978
>>> codon2dec('ccgcag')
1499 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:31:26.073

您的代码实际上确实在 base-64 之间进行了转换。我怀疑您没有按照与问题中完全相同的顺序定义密码子。

按照您为密码子提供的顺序：

`'ccgcag' = codons.index('ccg') * 64 + codons.index('cag') = 23 * 64 + 27 = 1499`

使用您提供的替换，这在数学上是正确的。要获得 2011，您必须输入`cggcag`- 那么，您确定以完全相同的顺序复制它们吗？

# html - 无法从 dropkick 插件更改 dk_toggle 宽度

> ID：11357289
> 
> 赞同：0
> 
> 时间：2012-07-06T06:54:50.287
> 
> 标签：html, css, jquery-plugins

我正在使用 dropkick jQuery 插件

我知道，dk_toggle 有默认宽度：220px：

```
 <a class="dk_toggle" style="width: 220px; ">(from Google console) 
```

我认为我的html：

```
 <select name="country" class="default" tabindex="2">
          <option value="EN">English</option>
          <option value="IS">Israeli</option>
          <option value="UA">Ukrainian</option>
        </select> 
```

但我想在我的 css 文件中更改它：

```
 .dk_toggle {
 height: 15px;
 width: 245px;
} 
```

它没有改变。那么我应该如何改变它呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:49:31.147

在您的 javascript 文件中添加

```
$(document).ready(function() {
    $('.dk_toggle').css('width','220px');
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:58:31.770

首先，为您的选择设置一个 ID：

```
 <select id="my_select" name="country" class="default" tabindex="2">
      <option value="EN">English</option>
      <option value="IS">Israeli</option>
      <option value="UA">Ukrainian</option>
 </select> 
```

然后为这个 ID 设置一个 CSS：

```
#my_select{
  width: 200px;
} 
```

我刚刚对其进行了测试，并且可能是一种更清洁的方法。

# java - java同时运行和编辑调试

> ID：11357291
> 
> 赞同：2
> 
> 时间：2012-07-06T06:54:50.817
> 
> 标签：java, debugging, edit

我想知道我是否可以做这样的事情：同时运行和编辑程序，我的意思是当我运行我的程序时，暂停它并修复问题并从我暂停的点开始。我在 youtube 上看到了一个名为“使用缺口编码”的视频，他正在使用一种方法来做到这一点。

编辑：我可以在与 main 相同的类中编辑代码吗？我试过了，还是不行，如果可以，请说下方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:57:28.687

你可能指的是这个：

[http://wiki.eclipse.org/FAQ_What_is_hot_code_replace%3F](http://wiki.eclipse.org/FAQ_What_is_hot_code_replace%3F)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:04:20.047

这称为“热代码替换”，Eclipse 为您提供了开箱即用的功能。当您保存文件时，Eclipse 会自动编译您的更改并确保您正在运行的程序使用新的类文件。无需暂停程序即可实现这一点，这一切都在幕后自动发生。

只要确保启用`Project -> Build Automatically`.

# android - Android In app Billing Package 名称冲突

> ID：11357296
> 
> 赞同：1
> 
> 时间：2012-07-06T06:55:13.140
> 
> 标签：android, in-app-billing, aidl

我正在尝试将 InApp 计费 AIDL 接口（其中包名称以“com.”开头）集成到我的项目（其中包名称以“mywork.”开头）。所以 AIDL 现在尝试在“com”下自动生成 java 文件（在 gen 文件夹中），这在我的情况下不可用，因为我的包名称不同。所以构建错误。

请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:12:56.167

通过创建包名称从“com”开始的 android 库项目并将市场计费 AIDL 移入其中来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:10:01.993

在应用程序的 src 文件夹下的 com.android.vending.billing 包中添加您的 AIDL 接口文件。

# javascript - 如何使用 sencha touch2 检查 ipad 中的 wifi 连接类型

> ID：11357301
> 
> 赞同：1
> 
> 时间：2012-07-06T06:55:26.930
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我已经使用 sencha touch2 开发了联系屏幕页面。我的要求是，基于 2G/3G 等 wifi 连接类型取决于此。我想禁用 ipad 中的某些按钮。任何人都可以提供如何使用 sencha touch2 实现这一目标的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:33:21.510

我在 sencha 网站上进行了搜索，他们清楚地给出了如何获得互联网连接的类型。它工作正常。

这是解决方案：

```
Determining if the current device is online:

alert(Ext.device.Connection.isOnline());

Checking the type of connection the device has:

alert('Your connection type is: ' + Ext.device.Connection.getType());

The available connection types are:

    UNKNOWN - Unknown connection
    ETHERNET - Ethernet connection
    WIFI - WiFi connection
    CELL_2G - Cell 2G connection
    CELL_3G - Cell 3G connection
    CELL_4G - Cell 4G connection
    NONE - No network connection 
```

# apache - 为什么 htaccess RewriteRule ^foo$ 也匹配 ^foobar$

> ID：11357304
> 
> 赞同：1
> 
> 时间：2012-07-06T06:55:41.067
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, apache2

我想要这些 URL 重定向/转发：

```
here.com/foo    ==> there.com/a/b
here.com/foobar ==> there.com/c/d 
```

我有这两个 .htaccess RewriteRule 行：

```
RewriteRule ^foo$    http://there.com/a/b [R=301,L] 
RewriteRule ^foobar$ http://there.com/c/d [R=301,L] 
```

但结果是：

```
here.com/foo    ==> there.com/a/b
here.com/foobar ==> there.com/a/b 
```

`foo`也匹配`foobar` 我如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:35:35.290

这是一个浏览器缓存问题。我最初的规则是错误的。我将规则更改为上面列出的规则，但是因为我使用的是 HTTP 状态代码 301（永久移动），所以浏览器正在缓存它并且没有从服务器获取新请求。我尝试了 Chrome 隐身窗口并发现了问题。

请注意，将 HTTP 状态代码设置为 303（请参阅其他）会导致浏览器不缓存它。

# primefaces - How to limit width of column in p:dataTable, w/o line break, keeping single line?

> ID：11357309
> 
> 赞同：6
> 
> 时间：2012-07-06T06:56:05.730
> 
> 标签：primefaces

I have been having hard time with Primefaces and SO is my ultimate place to find answer for issues.

I have `p:dataTable` with many columns so each of them should have short width. For headers, they seem OK but for data columns they break to 2 or more lines which I don't prefer.

I made first column's width larger to show what are in data table. Header text is fine, keeping it to single line. But data columns are bad for me. I prefer they keep it to single line. I want no line break. Ellipses is preferable but not mandatory.

```
<p:dataTable id="searchResultTable" var="searchData" value="#{registerBean.searchDataList}"
        scrollHeight="200"
        rowIndexVar="rowIndex"
        rowKey="#{searchData.model}"
        selectionMode="single"
        selection="#{registerBean.selectedSearchData}"
        paginator="true" rows="10"
        paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        rowsPerPageTemplate="5,10,20" resizableColumns="true">
        <p:ajax event="rowSelect" listener="#{registerBean.onSelectedSearchData}"/>
    <p:column headerText="#{registerBean.getSearchResultHeaderText(0)}"
              width="30" style="height: 10px; font-size: 8pt;">
        <h:outputText value="#{registerBean.getSearchResultText(rowIndex,0)}" />
    </p:column>
    <p:column headerText="#{registerBean.getSearchResultHeaderText(1)}"
              width="30" style="10px; height: 10px; font-size: 8pt;">
        <h:outputText value="#{registerBean.getSearchResultText(rowIndex,1)}" />
    </p:column>
    <p:column headerText="#{registerBean.getSearchResultHeaderText(2)}"
              width="30" style="10px; height: 10px; font-size: 8pt;">
        <h:outputText value="#{registerBean.getSearchResultText(rowIndex,2)}" />
    </p:column> 
```

I used `h:outputText` for each columns. I don't persist to `h:outputText`, any component I can use with Primefaces can be fine.

Thanks in advance.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T03:02:50.497

I could find a solution. Adding CSS shown below to `<p:column/>` worked for me. Ellipsis is not working but no line-feeding, no expanding line height.

```
<style type="text/css">
.singleLine
{
    text-wrap:none;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
}
</style> 
```

And do like this:

```
<p:column headerText="Something"
    width="100" styleClass="singleLine" style="height: 10px; font-size: 8pt;">
    <h:outputText value="#{something.value}" />
</p:column> 
```

I hope it will help few people on this globe.

# javascript - 使用 jquery 删除替换字符

> ID：11357310
> 
> 赞同：0
> 
> 时间：2012-07-06T06:56:13.557
> 
> 标签：javascript, jquery

在一个变量中，我有一个字符串值农业与发展。我想从字符串 Agriculture & Development 中删除空格和字符“&”，使其看起来像使用 jquery 或 javascript 的 Agriculture_Development。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:00:08.257

这里不需要jquery，纯js就可以了：

```
var nwstr = 'Agriculture & Development'
                .replace(/\s+/g,'')
                .replace(/\&/,'_');
//=> Agriculture_Development 
```

现在[去](http://www.javascriptkit.com/javatutors/string4.shtml)自己解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:03:04.107

```
var str = "Agriculture & Development"; 
// replace all the white space and the &
str.replace(/\s+/g, '').replace(/\&/,'_'); 
```

# java - N 层系统中的异常

> ID：11357311
> 
> 赞同：2
> 
> 时间：2012-07-06T06:56:16.397
> 
> 标签：java, exception-handling

我有一个 4 层系统（数据库、持久性、业务、演示）。后 3 层都在一个 JVM 中运行。

我在业务层和表示层之间遇到了一些异常处理问题。将以下代码视为一个*非常简化的示例*：

```
public void process(String label) throws ValidationException {

    if(label == null) {
        // this is a custom exception that means that one of the arguments invalid
        throw new ValidationException("The label can not be null.");
     }

    if(label.length() != 8) {
        throw new ValidationException("The label has to be 8 letters long."); 
    }

    ... process ...
} 
```

这里的问题是商业轮胎不知道无效的论点是演示的错还是用户的错。

*   假设标签是由用户提供的，那么这是用户的错，并且演示文稿必须显示“验证失败”消息以及验证异常的消息。
*   另一方面，如果标签是由演示文稿为用户生成的，那么这是演示文稿的错误（可能是错误），并且演示文稿必须显示“内部错误”消息。
*   此外，如果标签为空，这 100% 是演示文稿的错误。

当传递用户生成的和演示生成的参数的混合时，问题就出现了。在这种情况下，演示文稿无法知道是什么导致了异常。它唯一得到的就是向用户显示详细的消息（因为如果是用户的错，用户就会知道原因）。但是，向用户显示详细的错误消息是不可接受的，因为这是演示文稿的错，因为它只会使用户感到困惑。

在这种情况下我应该如何处理异常？有什么模式可以使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:21:32.470

从 OOP 哲学来看，数据知道自己的行为。

有很多方法可以解决问题。

这是一个想法：

1.  为用户生成的和非用户生成的错误抛出不同的异常。如果它是用户生成的，则表示层会捕获它并显示消息。如果不是，则表示层会显示一般消息“内部错误”或“抱歉”或其他内容。
2.  业务层不知道哪个是哪个。所以，数据必须知道。在您的示例中，`label`不能是字符串。它可以是一个类。

将所有参数包装在某个类中

```
class Label implements Validatable {
    String label;
    @Override
    public void validate() throws BaseValidationException {
         //Check conditions and throw the proper exceptions.
         //Label class should know which validations are user and 
         //Which are presentation and throw appropriate exceptions.
    }
} 
```

为所有参数创建一个单独的类会很乏味。你可以有这样的东西：

```
class Argument<E>  {
    E realArgument;
    Validator validator;
    public Argument(E value, Validator validator) {
        //implement
    }

}
interface Validator {
    public void validate() throws BaseValidationException;
} 
```

现在，您可以为标签 ( `LabelValidator implements Validator`) 之类的东西使用特殊的验证器，并为其他东西使用简单的验证器`NotNullValidator`。这些将在创建时关联。

在业务逻辑层，你得到

```
void process(Argument<String> label) {
    if (label != null ) label.getValidator().validate();
    //continue.
} 
```

在表示层

```
try {
    process(....)
} catch (UserException ex) (
   showMessage(ex.getMessage());
) catch (PresentationError ex) {
  log.fatal(ex.getMessage());
  showMessage("Pre-formatted internal error message");
} catch (Exception ex) { //Unknown exception
  log.fatal(ex.getMessage());
  showMessage("Pre-formatted internal error message");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:23:25.607

一旦您的应用程序生成的标签代码稳定并符合您的规范，它就不应该通过验证检查。必须有更多问题未涵盖的用例。

我能想到的一种可能的解决方案是：

您如何区分用户生成的标签和应用程序生成的标签？

如果您没有任何区分机制，我建议您在应用生成的标签上附加一些特殊的字符序列。

例如 ：

*   !@_Java
*   ！@_Python

所以这个“！@_”表示应用程序生成的标签，然后您可以设计一个解决方案来相应地处理任何与验证相关的问题。

如果标签通过验证步骤，您始终可以删除“！@_”部分。

请注意，您的所有标签生成仅来自特定的一段代码（最好是静态实用程序方法）。

# java - 如何通过网络共享 jboss

> ID：11357314
> 
> 赞同：5
> 
> 时间：2012-07-06T06:56:22.807
> 
> 标签：java, service, jboss, share

我在我的机器上的 8080 端口上运行了 jboss，我想在网络上共享 jboss 服务器，所以我使用 jbossws-native-4.0.2 运行 jboss 服务，但我仍然无法访问网络上的 jboss 服务器，请帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T07:16:43.063

启动 jboss（run.sh 或 run.bat）时使用选项 -b 0.0.0.0 这会将端口绑定到所有网络接口。默认为 localhost，这就是您无法通过网络访问服务器的原因。

# php - 购物后如何将 PDF 文件发送给用户

> ID：11357317
> 
> 赞同：0
> 
> 时间：2012-07-06T06:56:33.093
> 
> 标签：php, codeigniter

我正在开发一个 pdf 购物网站。我已经实现了购物、付款确认和其他相关内容。我的问题是关于“如何将购物文件发送给用户”。

我正在考虑以下方式将这些文件发送给用户，但想知道这些文件中的标准方式。请帮忙

1）创建和发送一个zip文件作为所有pdf的附件或每个作为不同的附件并发送（高文件大小会影响电子邮件系统吗？？？？）

2) 将来自服务器的下载 url 提供给用户。这种方式随着我脑海中的事情而出现。

a）如果我向用户发送下载 url，那么用户可以将其发送给不同的用户。这可能是个问题

b）如果我用令牌限制用户下载一次，那么在其他人的互联网访问问题的情况下，用户无法获取文件。

请建议一个标准的方式

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:09:07.793

1.  将 PDF 文件存储在`www`或`htdocs`或`public_html`（在您的 Web 根目录之上）的目录中。也可以存储在 web 目录中，但您需要使用 Apache 的访问控制来限制访问）

2.  当用户完成购物并且您想向他发送文件时，创建一个临时密钥 ( `sha1(microtime().session_id()`) 并将其与购买的文件的 ID 或路径一起存储在服务器上的名为`purchases`example 的表中（确保您有一个名为`key_used`.

3.  向用户发送指向 的链接`download.php?key=GENERATED_KEY`。

4.  download.php 将是这样的：

    //在购买表中查找该键（检查它是否未使用）并获取文件的路径头（'Content-disposition: attachment; filename=' . basename($path_to_pdf)); header('内容类型：应用程序/pdf'); 读取文件（$path_to_pdf）；//将key_used的值更改为TRUE

编辑：我不确定为什么代码高亮不起作用

# regex - 如果其中存在某个子字符串，如何防止正则表达式匹配？

> ID：11357318
> 
> 赞同：2
> 
> 时间：2012-07-06T06:56:34.477
> 
> 标签：regex, escaping, substring

HTML 注释可以使用内联 JavaScript 作为不支持 JS 代码的旧浏览器的特殊块。这些块如下所示：

```
<!--
some js code
//--> 
```

我想将 JS 代码中的“真实”html 注释与此类注释区分开来。我写了这个正则表达式：

```
/<!--[^//]*?-->/g 
```

因此，我想排除内部带有双斜杠的匹配项，但正则表达式将`//`其视为 and 的字符集，`/`而`/`不是整个双斜杠`//`。我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:01:31.493

如您所述，字符类仅匹配单个字符，因此您不能在此处使用它们。但是您可以使用[否定的前瞻断言](http://www.regular-expressions.info/lookaround.html)：

```
/<!--(?:(?!//)[\s\S])*-->/g 
```

（假设这是 JavaScript）。

**解释：**

```
<!--     # Match <!--
(?:      # Try to match...
 (?!//)  #  (asserting that there is no // ahead)
 [\s\S]  #  any character (including newlines)
)*       # ...any number of times.
-->      # Match --> 
```

# jquery - 单击按钮时关闭 jQuery 厚框

> ID：11357321
> 
> 赞同：3
> 
> 时间：2012-07-06T06:56:52.890
> 
> 标签：jquery, thickbox

这是我的 jQuery：

```
<script src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/thickbox.js"></script>
<script type="text/javascript"

$('#button').click(function(){
     $('#TB_window').fadeOut();
});

</script> 
```

html:

```
 <input type="submit" id="button" value="clse" > 
```

我试过这个功能，但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-19T11:42:39.853

Thickbox 有他们的内置方法。`tb_remove`只需在需要的地方调用此方法`tb_remove();`。它将正确关闭厚盒。

如果您使用`$('#TB_window').fadeOut();`，TB_overlay DIV 将保持打开状态。如果你再次做一些无意义的事情，`$('#TB_overlay').fadeOut();`那么它会给你的厚盒带来问题。而thickbox 将停止功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-14T05:01:16.123

This solution worked for me, try it:

```
$(document).ready(function{
  $('#button').click(function(){
   self.parent.tb_remove();
  });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T07:01:00.143

您必须阻止执行输入的默认事件。将您的代码更改为：

```
$('#button').click(function(){
     $('#TB_window').fadeOut();
     e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-21T13:43:03.713

如果你包含了thickbox.js，这很明显，那就试试......

```
$('#closeTBWindow').click(tb_remove); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T11:59:13.527

我建议使用“按钮”而不是“提交”，例如：

```
<input type="button" id="button" value="close" /> 
```

那么jQuery代码应该是：

```
$(document).ready(function{
  $('#button').click(function(){
   $('#TB_window').fadeOut();
  });
}); 
```

像这样，您不需要使用`e.preventDefault()`.
这`$(document).ready()`部分真的很重要。没有这个 jQuery 会在按钮存在之前尝试将代码附加到按钮上，因此将无法工作。

旁注：我喜欢将 DIV 元素用作按钮。

# java - 带有 jndi 数据源的 maven 打包 jar

> ID：11357323
> 
> 赞同：0
> 
> 时间：2012-07-06T06:56:57.400
> 
> 标签：java, maven, jetty, jndi

如果我将应用程序打包为一个战争，我可以使用 web.xml 和 jetty-env.xml 设置 jndi 数据源。但我想将我的应用程序打包为 jar，我的理解是在这种情况下你不能使用 web.xml 和 jetty-env.xml。我已将数据源设置为 jndi 查找。我该如何解决这个问题。有什么特殊的方法可以从我的 maven pom 文件中指向 jetty-env.xml 吗？

以下是我的码头弹簧 xml

```
<beans>

  <bean id="contexts" class="org.eclipse.jetty.server.handler.ContextHandlerCollection"/>

  <bean id="triggerServer" class="org.eclipse.jetty.server.Server" init-method="start" destroy-method="stop">

    <property name="threadPool">  
      <bean id="ThreadPool" class="org.eclipse.jetty.util.thread.QueuedThreadPool">
        <property name="minThreads" value="10"/>
        <property name="maxThreads" value="50"/>
      </bean>
    </property>

    <property name="connectors">
      <list>
        <bean id="Connector" class="org.eclipse.jetty.server.nio.SelectChannelConnector">
          <property name="port" value="2080"/>
        </bean>
      </list>
    </property>

    <property name="handler">
      <bean id="handlers" class="org.eclipse.jetty.server.handler.HandlerCollection">
        <property name="handlers">
          <list>
            <ref bean="contexts"/>
            <ref bean="testHandler"/>           
          </list>
        </property>
      </bean>
    </property>

    <property name="stopAtShutdown" value="true"/>
    <property name="sendServerVersion" value="true"/>
    <property name="sendDateHeader" value="true"/>
    <property name="gracefulShutdown" value="1000"/>
  </bean> 
```

以下是启动服务器的 java 代码。

```
public static void main(String args[]) throws Exception {
    try {
        TriggerServer.init();
        Server server = (Server)springContext.getBean("triggerServer"); 
        logInfo(server);

        server.start();             
        server.join();         
    } catch (Exception e) {
        e.printStackTrace();
        logger.error("?", e);
    }
} 
```

以下是我的 jetty-env.xml

```
<Configure id="thisfile" class="org.eclipse.jetty.webapp.WebAppContext">
  <New class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg></Arg>
    <Arg>jdbc/jndiDB</Arg>
    <Arg>
     <New class="oracle.jdbc.pool.OracleDataSource">
    <Set name="DriverType">thin</Set>
    <Set name="URL">jdbc:oracle:thin:@localhost:1521:orcl</Set>
    <Set name="User">user</Set>
    <Set name="Password">password</Set>
    <Set name="connectionCachingEnabled">true</Set>
    <Set name="connectionCacheProperties">
        <New class="java.util.Properties">
            <Call name="setProperty">
                <Arg>MinLimit</Arg>
                <Arg>5</Arg>
            </Call>
            <!-- put the other properties in here too -->
        </New>
    </Set>

</New>
    </Arg>
</New>
</Configure> 
```

编辑并包括 pom.xml

```
 <modelVersion>4.0.0</modelVersion>

    <parent>
        <artifactId>project</artifactId>
        <groupId>com.client.project</groupId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <groupId>com.client.project</groupId>
    <artifactId>application</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>
    <name>application</name>
    <url>http://maven.apache.org</url>

    <properties>
        .....
    </properties>

    <dependencies>
        ......
    </dependencies>

    <build>
        <finalName>application</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.2</version>
                <executions>
                    <execution>
                        <id>copy-dependencies</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${basedir}/src/main/webapp/WEB-INF/lib</outputDirectory>
                            <includeScope>compile</includeScope>
                            <excludeScope>test</excludeScope>
                            <excludeScope>provided</excludeScope>
                            <excludeArtifactIds>jetty-jsp-2.1,jetty-all-server</excludeArtifactIds>
                        </configuration>
                    </execution>
                </executions>
                <configuration>
                    <outputDirectory>
                        ${project.build.directory}/dist
                    </outputDirectory>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.10</version>
                <configuration>
                    <suiteXmlFiles>
                        <suiteXmlFile>src/test/resources/testng.xml</suiteXmlFile>
                    </suiteXmlFiles>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <archive>
                        <manifestEntries>
                            <Specification-Version>3.1</Specification-Version>
                            <Build-Time>${maven.build.timestamp}</Build-Time>
                        </manifestEntries>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

# linux - 内核中 8 字节对齐的空闲连续页列表

> ID：11357324
> 
> 赞同：0
> 
> 时间：2012-07-06T06:56:59.203
> 
> 标签：linux, linux-kernel, embedded, kernel, linux-device-driver

谁能告诉我是否有任何Linux内核API可以给我免费的连续页面列表，起始页面地址是8字节对齐的？

我需要获得连续的物理内存，而不是虚拟内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:55:42.293

正如 Paul R 所说，使用`kmalloc`.
如果您分配的页面少于一个页面，那么您的分配将按其大小对齐，向上取整为 2 的幂（即分配 40 个字节将为您提供一个按 64 个字节对齐的地址）。如果分配一页或更多页，则地址在页上对齐，即 4096 字节。
您获得的内存是虚拟的，但被 1-1 映射到物理内存，因此您获得了连续的物理页面。
请注意，在 Linux 2.6.22 之前，它被限制为 128KB（取决于架构和配置）。从 2.6.22 开始，限制为 4MB（同样，取决于架构和配置）。

# javascript - jQueryMobile 停止页面转换

> ID：11357326
> 
> 赞同：0
> 
> 时间：2012-07-06T06:57:20.623
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在开发一个使用 jquerymobile fb swipe 方法的应用程序，不知道它在哪里显示原始文件。然而。我最大的问题是它需要一个链接并动态地尝试通过某种 ajax get 方法加载页面。这不是我想要的；我想让页面加载就像在任何其他网站上单击普通链接一样，但我不知道如何禁用它，文档让它看起来是可能的，但我不确定自己。

据我所知，这是该模板的唯一自定义 JS

```
$(document).bind("mobileinit", function(){
    $.mobile.pushStateEnabled = true;
});

        $(function(){
            var menuStatus;

            // Show menu
            $("a.showMenu").click(function(){
                if(menuStatus != true){             
                $(".ui-page-active").animate({
                    marginLeft: "175px",
                  }, 300, function(){menuStatus = true});
                  return false;
                  } else {
                    $(".ui-page-active").animate({
                    marginLeft: "0px",
                  }, 300, function(){menuStatus = false});
                    return false;
                  }
            });

            $('#menu, .pages').live("swipeleft", function(){
                if (menuStatus){    
                $(".ui-page-active").animate({
                    marginLeft: "0px",
                  }, 300, function(){menuStatus = false});
                  }
            });

            $('.pages').live("swiperight", function(){
                if (!menuStatus){   
                $(".ui-page-active").animate({
                    marginLeft: "175px",
                  }, 300, function(){menuStatus = true});
                  }
            });

            $('div[data-role="page"]').live('pagebeforeshow',function(event, ui){
                menuStatus = false;
                $(".pages").css("margin-left","0");
            });

            // Menu behaviour
            $("#menu li a").click(function(){
                var p = $(this).parent();
                if($(p).hasClass('active')){
                    $("#menu li").removeClass('active');
                } else {
                    $("#menu li").removeClass('active');
                    $(p).addClass('active');
                }
            });

            $("#b_done").click(function(){
                $("#menu li").removeClass('active');
                $("#menu li:first-child").addClass('active');
            });

            // Tabs 
            $('div[data-role="navbar"] a').live('click', function () {
                $(this).addClass('ui-btn-active');
                $('div.content_div').hide();
                alert($(this).attr('data-href'));
                //$('div#' + $(this).attr('data-href')).show();
                //window.location = $(this).attr.('data-href');
            });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:52:12.570

您可以在移动初始化中关闭 Ajax 加载

```
$(document).bind("mobileinit", function(){
     $.mobile.ajaxEnabled = false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:41:06.033

在 jquery mobile 中找不到任何更改页面的特定代码。

查看 jquery 移动 ajax 行为文档：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html)

通常要在没有 Ajax 的情况下加载页面/html，
请将 rel=external 或 data-ajax=false 放入 Anchor 标记中。

喜欢

```
<a href="/anotherPage" rel='external'> 
```

# android - Vtiger登录中指定的令牌无效或过期

> ID：11357327
> 
> 赞同：0
> 
> 时间：2012-07-06T06:57:27.337
> 
> 标签：android, vtiger

我试图从我的 Android 应用程序登录 Vtiger。我成功获得了挑战令牌，并将该挑战令牌与访问密钥（取自我的帐户首选项）结合在一起。然后转换为 MD5 字符串。

**我的挑战网址：**

```
http://mysite/vtigerCRM510-RC/vtigerCRM/webservice.php?operation=getchallenge&username=Manager 
```

**挑战回应：**

```
{"success":true,"result":{"token":"4ff555f87eece","serverTime":1341478392,"expireTime":1341478692}} 
```

**登录网址：**

```
http://mysite/vtigerCRM510-RC/vtigerCRM/webservice.php?operation=login&username=Manager&accesskey=976b9571ff3ff92b7786da17125ac37c 
```

**登录响应：**

```
{"success":false,"error":{"code":"INVALID_AUTH_TOKEN","message":"Specified token is invalid or expired"}} 
```

我也有疑问，在 Android 中，我使用 AsyncTask 进行 Http 操作。使用了两个 Asynctask。第一个用于获取挑战令牌，并使用此令牌完成第二个异步任务用于登录。是正确的方式吗？我的Android代码如下。

**我的安卓代码：**

```
public class GetChallengeActivity extends Activity {
    private TextView textView;
    private static final String USER_NAME="Manager";
    private static final String ACCESS_KEY="myaccesskey"; //taken from preferences

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void postData(View view)
    {
        textView=(TextView) findViewById(R.id.resulttext);

        ConnectivityManager conmgr=(ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkinfo=conmgr.getActiveNetworkInfo();
        Log.i(null, "Network Info-->"+networkinfo.toString());
        if(networkinfo!=null && networkinfo.isConnected())
        {
            //Network Available.
            //Toast.makeText(getApplicationContext(), "Network available", Toast.LENGTH_LONG).show();
            Log.i(null, "Network Available");
            textView.setText("Network Available");
            String url="http://mysite/vtigerCRM510-RC/vtigerCRM/webservice.php?operation=getchallenge&username="+USER_NAME+"";
            Log.i(null,"Challenge URL-->"+url);
            new ServerCommunication().execute(url);
        }
        else
        {
            //Network not Available
            Log.i(null, "Network Not Available");
            Toast.makeText(getApplicationContext(), "Network Not available", Toast.LENGTH_LONG).show();
            textView.setText("Network Not Available");
        }
    }

    private class ServerCommunication extends AsyncTask<String,String,String>
    {
        @Override
        protected String doInBackground(String... urls) {
            Log.i(null, "Doing in Background");
            try {
                return postToServer(urls[0]);
            }catch (IOException e) {
                Log.i(null, "Unable to retrieve web page. URL may be invalid.");
                return "Unable to retrieve web page. URL may be invalid.";

            }
        }

        @Override
        protected void onPostExecute(String result)
        {
            Log.i(null, "onPostExecute");
            Log.i(null, result);
            textView.setText(result);
        }

        private String postToServer(String string) throws IOException{
            Log.i(null, "post2Server");
            InputStream is = null;
            // Only display the first 500 characters of the retrieved web page content.
            int len = 500;

            try {
                    URL url = new URL(string);
                    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                    conn.setReadTimeout(10000 /* milliseconds */);
                    conn.setConnectTimeout(15000 /* milliseconds */);
                    conn.setRequestMethod("GET");
                    conn.setDoInput(true);

                    // Starts the query
                    conn.connect();
                    int response = conn.getResponseCode();
                    is = conn.getInputStream();

                    // Convert the InputStream into a string
                    String contentAsString = readIt(is, len);
                    Log.i(null,contentAsString);

                   String result="";
                    try {
                            JSONObject jsondata=new JSONObject(contentAsString);

                            String outcomesrf=jsondata.getString("success");
                            Log.i(null, "OutCome---->"+outcomesrf);
                            if(outcomesrf=="false")
                            {
                                JSONObject jsonobj2=jsondata.getJSONObject("error");
                                result=jsonobj2.getString("message");
                                Log.i(null,"Error-->errorMessage---->"+result);
                            }
                            else
                            {
                                JSONObject jsonobj3=jsondata.getJSONObject("result");
                                result=jsonobj3.getString("token");
                                Log.i(null,"Success-->Token---->"+result);
                                Log.i(null,"-->MD5Hash("+result+ACCESS_KEY+")");
                                String generatedkey=MD5_Hash(result+ACCESS_KEY);
                                Log.i(null,"Key-->"+generatedkey);
                                String loginurl="http://mysite/vtigerCRM510-RC/vtigerCRM/webservice.php?operation=login&username="+USER_NAME+"&accesskey="+generatedkey+"";
                                Log.i(null,"Login URL-->"+loginurl);
                                new LoginCommunication().execute(loginurl);
                            }
                        } catch (JSONException e) {
                            e.printStackTrace();
                            Log.i(null,"At Json "+e.toString());
                        }
                    return result;
                }
            finally {
                    if (is != null) {
                        is.close();
                    } 
                }
        }

        // Reads an InputStream and converts it to a String.

    }

    private class LoginCommunication extends AsyncTask<String,String,String>
    {
            @Override
            protected String doInBackground(String... urls) {
                Log.i(null, "Login Posting in Background");
                try {
                    return loginToServer(urls[0]);
                }catch (IOException e) {
                    Log.i(null, "Unable to retrieve web page. URL may be invalid.");
                    return "Unable to retrieve web page. URL may be invalid.";
               }
            }

            @Override
            protected void onPostExecute(String result)
            {
                Log.i(null, "LoginonPostExecute");
                Log.i(null, result);
                textView.setText(result);
            }

             private String loginToServer(String string) throws IOException{
                Log.i(null, "loginToServer");
                InputStream is = null;
                int len = 500;

                try {
                        URL url = new URL(string);
                        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                        conn.setReadTimeout(10000 /* milliseconds */);
                        conn.setConnectTimeout(15000 /* milliseconds */);
                        conn.setRequestMethod("POST");
                        conn.setDoInput(true);
                        conn.setDoOutput(true);

                        // Starts the query
                        conn.connect();
                        int response = conn.getResponseCode();
                        is = conn.getInputStream();

                        // Convert the InputStream into a string
                        String contentAsString = readIt(is, len);
                        Log.i(null,contentAsString);

                       String result1="";
                       String result2="";

                        try {
                                JSONObject jsondata=new JSONObject(contentAsString);

                                String outcomesrf=jsondata.getString("success");
                                Log.i(null, "Login OutCome---->"+outcomesrf);
                                if(outcomesrf=="false")
                                {
                                    JSONObject jsonobj2=jsondata.getJSONObject("error");
                                    result1=jsonobj2.getString("message");
                                    Log.i(null,"Error-->errorMessage---->"+result1);
                                }
                                else
                                {
                                    JSONObject jsonobj3=jsondata.getJSONObject("result");
                                    result1=jsonobj3.getString("sessionName");
                                    Log.i(null,"Success-->sessionName---->"+result1);

                                    JSONObject jsonobj4=jsondata.getJSONObject("result");
                                    result2=jsonobj4.getString("userId");
                                    Log.i(null,"Success-->userId---->"+result2);

                                }
                            } catch (JSONException e) {
                                e.printStackTrace();
                                Log.i(null,"At Json "+e.toString());
                            }
                        String result="sessionName"+result1+" userId"+result2;
                        return result;
                    }
                finally {
                        if (is != null) {
                            is.close();
                        } 
                    }
            }
        }

        public String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {
            Reader reader = null;
            reader = new InputStreamReader(stream, "UTF-8");        
            char[] buffer = new char[len];
            reader.read(buffer);
            return new String(buffer);
        }

        public static String MD5_Hash(String s) {
            MessageDigest m = null;

            try {
                    m = MessageDigest.getInstance("MD5");
            } catch (NoSuchAlgorithmException e) {
                    e.printStackTrace();
            }

            m.update(s.getBytes(),0,s.length());
            String hash = new BigInteger(1, m.digest()).toString(16);
            return hash;
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T00:56:09.133

在您的 PostToServer 中，accesskey 动词应该带有一个大写 k (accessKey)

```
String loginurl="http://mysite/vtigerCRM510-RC/vtigerCRM/webservice.php?operation=login&username="+USER_NAME+"&accessKey="+generatedkey+""; 
```

# javascript - 在 javascript 中定义 getter 和 setter

> ID：11357331
> 
> 赞同：0
> 
> 时间：2012-07-06T06:57:35.247
> 
> 标签：javascript

对于 javascript 中定义的设置器，我收到以下错误：“RangeError：超出最大调用堆栈大小”。

代码4如下：

设置器定义：

```
this.__defineSetter('_myList', function(list)  
        {
              log.debug("in setter ....");  
             if(this._myList == list)  
            {  
                 log.debug("in setter..");    
                 return;           

            }  
            this._myList = list;  
         }); 
```

称呼：

```
myMethod = function(msg)    
{  
  try  
    {       
     this.myList = msg.myList;  
    }catch(e)
    {
        log.debug("error in calling setter... " + e);
    }  
} 
```

我无法弄清楚为什么它会无限循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:10:20.363

你打电话时

```
this._myList = list; 
```

它调用定义的setter，这会导致无限递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:14:28.353

问题是您从 setter 中调用 setter ...

```
this._myList = list; 
```

应该创建另一个“私有”变量来存储值。像这样的东西...

```
var _myInnerList;

this.__defineSetter__('_myList', function(list) {
  log.debug("in setter ....");  
  if(_myInnerList === list) {  
    log.debug("in setter..");    
    return;           
  }  
  _myInnerList = list;  
}); 
```

还使用 === 进行比较（总是）并将[__defineSetter](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/DefineSetter)更改为...

```
__defineSetter__ 
```

# telerik-grid - 通过 Html.Telerik().DropDownList 过滤 Telerik mvc 网格

> ID：11357333
> 
> 赞同：0
> 
> 时间：2012-07-06T06:57:48.220
> 
> 标签：telerik-grid, telerik-mvc

您好我想问一下如何通过 Html.Telerik().DropDownList 中的选定值过滤 Telerik mvc 网格的当前内容？

我认为我正在弄清楚需要一些 js 脚本。

提前致谢。

-劳伦斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:31:52.017

在您的下拉列表的 onchange 事件中：

```
.ClientEvents(events => events
       .OnChange(
       @<text> function(e) { $('NameOfGrid').data('tGrid').rebind(); }
       </text>)) 
```

并在您的网格的 ondatabinding 事件中：

```
.ClientEvents(e => e
            .OnDataBinding(
                @<text> function(a) { a.data = $.extend(a.data,{ dropdownlist: $('#dropdownlist').val()}); }
                </text>)
            ) 
```

在您的控制器中，将下拉列表参数添加到您的 GridAction 并执行您的操作。

# python - 获取 URL 子域

> ID：11357350
> 
> 赞同：1
> 
> 时间：2012-07-06T06:59:05.493
> 
> 标签：python, url

我正在使用以下 Python 片段来获取 URL：

```
address = self.request.url 
```

这给了我如下所示的 URL：

```
http://domain.tld 
```

或者

```
http://sub.domain.tld 
```

但我的网址如下所示：

```
http://sub.sub.domain.tld 
```

在这种情况下，代码根本不返回 URL。最后，我必须从 URL 中获取第一个“子”域。但是，如果 URL 有两个子域时代码不起作用，我将无法继续。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:30:47.720

如果你对普通的 python 脚本没问题，

```
import urlparse
address = urlparse("http://sub.sub.domain.tld")

print address.netloc
print address.path
print address.scheme 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:29:17.460

从提供的信息来看，我本身无法给你答案。但我可以提供一些故障排除信息。如果 request.url 为空，那么可能还有另一个原因是它没有被填充。

我知道这是一个 GAE 请求对象。继承自WebOb。

请求对象具有许多其他属性。尝试将它们全部打印出来并查看它们包含的内容。

```
print self.request.host
print self.request.host_url
print self.request.scheme   # should be 'http' 
```

如果这些都是空的，那么听起来请求对象没有被正确创建。那可能是你的根本问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:38:42.957

self.request.url 来自什么似乎没有答案。它让我想起了谷歌应用引擎，所以如果你使用 GAE，你可以使用

```
self.request.host_url 
```

获取主机网址或

```
self.request.path_url 
```

获取不带查询参数的 url。

来源：[http ://docs.webob.org/en/latest/reference.html](http://docs.webob.org/en/latest/reference.html)

如果这与您的要求无关，我深表歉意。

# playframework-2.0 - Play Framework自定义资源：如何复制到目标？

> ID：11357355
> 
> 赞同：6
> 
> 时间：2012-07-06T06:59:29.397
> 
> 标签：playframework-2.0

我有一个 .csv 文件，必须在应用程序启动时读取。

我如何才能将这个文件复制到目标（“运行”或“启动”它）。

我正在尝试使用 访问 Global-class 中的此文件`Global.class.getResourceAsStream("/file.csv")`，但结果始终为空。

* * *

好，谢谢。我已经使用 conf/ressources 文件夹中的文件管理它，并使用 /ressources/file.csv 路径加载它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:27:16.103

你可以把它放在几个地方：

*   要么在`app`文件夹中
*   要么在`conf`文件夹中：我会去这个，通过创建一个`conf/ressources`文件夹

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-03T14:23:36.937

You can create a `resources` folder in your `conf` folder, put your file there, and then create an `InputStream` by calling

```
Play.classloader.getResourceAsStream("resources/file.csv"); 
```

Note that you should not start the path with a `/`, because then the application will not be able to resolve the path and throw a `java.lang.ExceptionInInitializerError: null` on startup.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T12:41:43.980

您可以将它放在`test/resources/file.csv`播放项目的测试文件夹中的文件夹中。然后你可以在scala中访问它

```
getClass.getResourceAsStream("/file.csv") 
```

看看[这篇博文](http://journal.michaelahlers.org/2013/01/play-framework-and-testing-resources.html)。

# java - Java 中 PHP 的 pack("N", $str)

> ID：11357360
> 
> 赞同：0
> 
> 时间：2012-07-06T06:59:53.327
> 
> 标签：java, php, pack

我需要帮助将这行 PHP 翻译成 Java`pack( 'N', $data )`

$data 应该是 7-9 个数字字符，最后一个是 null

我想它会在完成该功能后被打包很长时间。

它将通过套接字推送到将运行此的服务器：

```
byte[] abyte = datagrampacket.getData();
c(abyte, 7, datagrampacket.getLength()) 
```

和 c(...) 如下：

```
public static int c(byte[] abyte, int i, int j) {
    return 0 > j - i - 4 ? 0 : abyte[i] << 24 | (abyte[i + 1] & 255) << 16 | (abyte[i + 2] & 255) << 8 | abyte[i + 3] & 255;
} 
```

我猜上面的函数只是将它扩展回原来的 $data

任何人都知道我如何在java中“打包”它？

编辑：它通过 php 对数据做了什么：

```
Stripped Received Data:
array
  0 => string '13231786�' (length=9)
  1 => string '/31/33/32/33/31/37/38/36/0' (length=26) <--- dechex(ord()) for each char above
Packed Data:
array
  0 => string '�Éæª' (length=4)
  1 => string '/0/c9/e6/aa' (length=11) <--- dechex(ord()) for each char above 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T17:06:38.460

[另一种选择是以与PHP/Perl pack/unpack](https://gist.github.com/enrobsop/8403717)的 Java gist 类似的方式使用 ByteBuffer ：

```
static String packN(int value) {
    byte[] bytes = ByteBuffer.allocate(4).putInt(new Integer(value)).array();
    return new String(bytes, 'UTF-8');
}

static int unpackN(String value) {
    return ByteBuffer.wrap(value.bytes).getInt();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:59:33.247

经过一天的数学工作后，我已经弄清楚了。现在我已经弄清楚了，这实际上很简单。

在java中：

```
int x = (int) Math.floor(j/2^16);
int y = (int) Math.floor((j-(x*65536))/2^8);
int z = (int) Math.floor(j-((x*2^16)+(y*2^8)));

x = 2nd character
y = 3rd character
z = 4th character 
```

这些数字是三位数，因此您需要将其转换为十六进制。仅供偶然发现这个确切问题的任何人参考。

# android - 如何输入android机器人标志

> ID：11357364
> 
> 赞同：0
> 
> 时间：2012-07-06T07:00:06.970
> 
> 标签：android, fonts, truetype, android-fonts

全部，

我想知道我们如何输入 android 徽标并显示它。我浏览了这个链接[http://osxdaily.com/2009/11/06/how-to-type-the-apple-logo/](http://osxdaily.com/2009/11/06/how-to-type-the-apple-logo/) 但这适用于苹果，而且只适用于 Mac OS。Option + Shift + K。我还下载了 droid-font 并尝试复制粘贴它。行不通。我们怎样才能做到这一点并以相同的方式显示机器人徽标图标。

需要帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:15:00.240

不，这是可能的。正如您所指出的，即使是 Apple 徽标也不可能以任何跨平台方式实现。

您可能想阅读：

*   [维基百科关于 Unicode 私人使用的文章](http://en.wikipedia.org/wiki/Private_Use_%28Unicode%29)
*   [Unicode 中的 Apple 标志](http://hea-www.harvard.edu/~fine/OSX/unicode_apple_logo.html)

# android - 透视变换

> ID：11357370
> 
> 赞同：4
> 
> 时间：2012-07-06T07:00:33.153
> 
> 标签：android, opencv, opengl-es, transform, perspective

我得到了矩形中 4 个角的 X、Y、Z 位置，以及它们在图片上的 X、Y 位置。我想使用这些位置来找到相机与矩形的角度。例如，如果我从最右边看一个矩形，它会看起来像一个梯形，右边比左边长得多。因此，我觉得应该有一种算法可以找到我相对于矩形的角度。

我在 android 上编码，我正在使用 opencv 和 opengl 库。我在 opencv 中看到了相关算法，但它们并没有完全满足我的需要。任何有用的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T00:28:05.713

我发现opencv中的solvePnP方法将完全满足我的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:27:41.967

看看[3D 投影](http://en.wikipedia.org/wiki/3D_projection)并尝试推导反向算法。另外，请阅读[OpenGL FAQ](http://www.opengl.org/archives/resources/faq/technical/viewing.htm)，因为这是一个常见问题。

或者，查看[红皮书](http://www.glprogramming.com/red/)的[查看章节](http://www.glprogramming.com/red/chapter03.html)（[链接到亚马逊](http://www.amazon.fr/Advanced-Graphics-Programming-Using-OpenGL/dp/1558606599)）。具体来说，[最后一个标题](http://www.glprogramming.com/red/chapter03.html#name9)是您所要求的。

# gwt - 在 GWT 中创建 window.postMessage() 用于跨域 iframe 消息传递

> ID：11357372
> 
> 赞同：1
> 
> 时间：2012-07-06T07:00:35.043
> 
> 标签：gwt, iframe, cross-domain, gwt-rpc, postmessage

我正在尝试在父窗口和 IFrame 之间进行通信（IFrame 源位于不同的域上），由于同源策略，这是不允许的。通过 HTML5 的 window.postMessage() 方法可以轻松进行通信。所以我搜索了该领域的现有作品，我发现[gwt-rpc-plus](http://code.google.com/p/gwt-rpc-plus/)库

它包含一个类[*PostMessageFrameTransportRequest*](http://code.google.com/p/gwt-rpc-plus/source/browse/trunk/gwt-rpc-plus/gwt/com/dotspots/rpcplus/client/transport/impl/PostMessageFrameTransportRequest.java)。现在，我认为这会奏效。但我不知道如何使用这个类。
我需要一些有关此代码的帮助，如果有人知道其他方法可以提供与 window.postMessage() 相同的行为，请帮助我。
提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:47:34.227

你可以直接使用JSNI调用javascript

就像是：

```
private native void sendMessage(String message)/*-{
    $wnd.postMessage(...., message);
}-*/; 
```

# asp.net-mvc - 使用 MVC 更新我的数据时出现问题？

> ID：11357376
> 
> 赞同：1
> 
> 时间：2012-07-06T07:00:56.197
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下课程：

```
public class Content
{
    public string PartitionKey { get; set; }
    public string RowKey { get; set; }
    [Required(ErrorMessage = "Title required")]
    [DisplayName("Title")]
    public string Title { get; set; }
    [DisplayName("Status")]
    public string Status { get; set; }
    public string Type { get; set; }
    public string ContentType
    {
        get { return PartitionKey.Substring(2, 2); }
    }
} 
```

我添加了，`ContentType`因为这是我需要能够阅读的内容（未设置）。但是，当我尝试保存记录时，我收到以下消息：

```
The closed type System.String does not have a corresponding ContentType settable property. 
```

我添加`ContentType`属性的方式有误吗？我想知道是否应该使用 viewModel。但我该怎么做呢？我是否只需要从我的类中复制每个属性并为每个属性添加一个获取和设置？加上然后只需添加`ContentType`.
据我了解，有一种方法可以将类添加`Content`到视图模型中，但我认为我必须将`Model.Status`视图中的所有内容更改为`Model.Content.Status`. 我宁愿只是仍然有`Model.Status`我的观点。

我的支票和显示属性呢？我需要在 viewModel 中复制它们还是它们只是通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:03:58.503

模型绑定器需要读写属性才能正确设置模型类中的数据。

它使用反射将值设置为您声明为模型的类型的新实例的属性。

# jquery - jQuery获取选定的文本下拉文本jquery mobile

> ID：11357383
> 
> 赞同：1
> 
> 时间：2012-07-06T07:01:48.973
> 
> 标签：jquery, jquery-mobile

> **可能重复：**
> [使用 jquery 选择下拉选项](https://stackoverflow.com/questions/4864620/use-jquery-to-select-a-dropdown-option)

直升机，

我想使用 jquery 从下拉列表中获取选定的文本。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T07:05:39.323

仅使用纯 jquery 会是这样的

```
$("#idofyourdropdown option:selected").text(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T07:16:48.147

试试这样：

```
$("#yourdropdown option:selected").text(); 
```

# jquery - 为什么我不能在 jQuery 中选择我的值？

> ID：11357393
> 
> 赞同：0
> 
> 时间：2012-07-06T07:03:09.247
> 
> 标签：jquery, html

真是令人沮丧。我一直像这样使用 .val() ，但现在它不起作用。

我正在使用 jQuery v1.7.2。

我有一个 Facebook 框，我用一个隐藏的值启动它，所以我知道当 Facebook 完成后我应该在主页上更改什么值。

我有这个 HTML 代码：

`<hidden type="hidden" value="hello" id="testid" name="testname" />`

在 jQuery 中，我记录了：

```
console.log($('[name="testname"]'));
console.log($('#testid'));
console.log($('#testid').val());
console.log($('[name="testname"]').val()); 
```

这输出：

```
[<hidden type=​"hidden" value=​"hello" id=​"testid" name=​"testname">​&lt;/hidden>​]
[<hidden type=​"hidden" value=​"hello" id=​"testid" name=​"testname">​&lt;/hidden>​]
(empty line)
(empty line) 
```

那么为什么我不能访问这个值呢？

我正在使用带有 AJAX 的 facebox，我知道如果我使用带有 div 的 facebox，它会复制 dom 元素，这样我就可以得到两个具有相同 ID 的元素，但这不应该发生在 AJAX 上吗？然后我会在前两行返回更多元素，不是吗？奇怪的是，如果我检查 Chrome 中的元素，我发现输入框已更改为：

```
<hidden type="hidden" value="hello" id="testid" name="testname"></hidden> 
```

但也许这并不重要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:06:11.887

没有隐藏元素。你的意思是`<input type="hidden">`？

如果您真的想使用自定义元素，我相信您将不得不使用以下[`.prop()`](http://api.jquery.com/prop/)方法：

```
console.log($('#testid').prop("value")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:06:40.363

HTML中没有`<hidden>`元素，因此 jQuery 没有支持其`val()`方法所需的特殊处理。

你想要`<input>`。通过可以检测此类错误的自动[验证器](http://validator.w3.org)运行 HTML 通常是一个好主意。

（您也可以使用`attr('value')`，但编写有效的 HTML 是一个更好的主意）

# ruby-on-rails - Rails AJAX 过滤让我完全难过

> ID：11357397
> 
> 赞同：2
> 
> 时间：2012-07-06T07:03:32.827
> 
> 标签：ruby-on-rails, ajax, filter

我并不经常发现自己对如何解决问题感到完全困惑，但对于这个问题，老实说，我一无所知。

我正在建立一个有很多项目的网站，在主页上，我希望人们能够通过打开和关闭过滤器来浏览这些项目。例如，其中一种过滤器类型是 GENRE。用户会看到一个流派列表，单击该列表会过滤掉与该流派匹配的所有项目。此外，如果您单击两种不同的类型，您将只看到与这两种类型都匹配的项目。

问题是，这一切都需要通过 AJAX 来完成，而这正是我开始感到困惑的时候。如何进行 ajax 调用，不仅设置新过滤器，而且记住当前存在的过滤器？加载页面后，我可以执行类似的操作

```
<a href="/api/projects?genre=first_genre">First Genre</a>
<a href="/api/projects?genre=second_genre">Second Genre</a> 
```

但问题是，当我一次单击两个时，我最终只能按一个流派进行过滤。或许，每次点击一个链接时，我都可以使用 JS 更新所有链接以包含一系列已选择的类型，但这似乎非常草率。然后，每个链接都将具有以下内容：

```
<a href="/api/projects/?genres[]=first_second&genres[]=second_genre etc etc...">First Genre</a> 
```

我的另一个想法是可能将所有当前过滤器存储在 cookie 中，然后当单击链接时，将该新过滤器添加到 cookie 中的过滤器列表中，但同样，这似乎很草率。

关键是，我不知道这样做的正确方法是什么，我感到有点失落。对于以前成功做过类似事情的任何人，帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:57:24.253

从用户的角度来看，Ajax 过滤器总是会产生两个问题。一是用户不能为过滤器网址添加书签，也不能使用后退按钮。

例如，用户单击过滤器 1，然后单击过滤器 2。如果用户单击返回按钮或重新加载页面，用户将丢失所有过滤器数据。

## 这是管理所有的一种方法

您可以使用此方法 Jquery BBQ [http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

单击流派过滤器后，您可以使用上述插件将过滤器值附加到 url 的哈希中，并且每当用户重新加载页面或使用后退按钮时，您都会将所有选择的流派添加到哈希中。

# c++ - 从字符串中复制选定的字符

> ID：11357400
> 
> 赞同：0
> 
> 时间：2012-07-06T07:03:55.600
> 
> 标签：c++, c

我的输入字符串是

`\\?\bac#dos&ven_bb&prod_open-v&rev_5001#1&7f6ac24&0&353020304346333030363338#{53f56307-b6bf-11d0-94f2-00a0c91efb8b}`

所需的输出是

`bac\dos&ven_bb&prod_open-v&rev_5001\1&7f6ac24&0&353020304346333030363338_0`

我已经编写了以下代码，但无法正常工作...需要帮助来解决问题。原谅我的无知:) 如果有更好更有效的方法，请告诉我。

输出字符串的规则是

在第二个字符串中，我删除了所有“\”和“？” .在哪里看到“#”我用“\”替换它。第二个字符串直到你看到字符“{”但不包括“#”在它的末尾。

谢谢

```
int main() 
{
    char s[] = "\\?\bac#dos&ven_bb&prod_open-v&rev_5001#1&7f6ac24&0&353020304346333030363338#{53f56307-b6bf-11d0-94f2-00a0c91efb8b}";
    char s1[] = {0};
    printf("OUtput string is : ");
    for(int i = 0; s[i] != '{'; i++)
    {
        if(s[i] != '\\' && s[i] != '?')
        {
            int j = 0;
            if(s[i] == '#')
            {
                s1[j] = '\\';
                continue;
            }

            s1[j] = s[i];
            j++;
        }

    }

    for(int i = 0; s1[i] != '\0'; i++)
    {
        cout<<s1[i];    
    }

    getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:08:23.910

我建议考虑使用该`std::string::replace()`功能。有很多关于此的在线文档。看看`std::string`必须提供的其他一些功能，因为它们也可能有用。如果您使用的是 c++，则使用`std::string`通常比修改`char`数组和索引更可取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:37:31.033

注意 的固定范围`j`。在您的版本中，您总是分配给`s1[0]`.

```
for(int i = 0, j = 0; s[i] != '{'; i++)
{
    if(s[i] != '\\' && s[i] != '?')
    {
        // int j = 0;
        if(s[i] == '#')
        {
            s1[j] = '\\';
        }
        else
        {
            s1[j] = s[i];
        }
        j++;
    } 
} 
```

另一件事是为新字符串分配足够的空间。由于您没有指定大小`char s1[] = {0};`声明一个大小为 1 的数组。您需要执行以下操作：

```
char s1[sizeof(s)] = { 0 }; // the size of the old array, since we don't know how long the new one will be 
```

但是由于您标记了 Q C++，因此可以利用动态调整大小`std::string`。

```
std::string s = ".......";
std::string s1;

for(int i = 0; s[i] != '{'; i++)
{
    if(s[i] != '\\' && s[i] != '?')
    {
        if(s[i] == '#')
            s1 += '\\';
        else
            s1 += s[i];
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:28:07.113

您的 s1 缓冲区需要增加，因为它现在没有空间容纳新字符串。

例如

```
char* s1 = calloc(strlen(s)+1,sizeof(char)); // same size should be enough, free(s1) later 
```

calloc 确保它被`\0`终止，在您的代码中您忘记添加，`\0`因此打印输出行为不规律。

# ubuntu - 未找到奇怪的文件错误

> ID：11357403
> 
> 赞同：2
> 
> 时间：2012-07-06T07:03:59.947
> 
> 标签：ubuntu, jad

所以我运行以下查询，

```
ls
helloWorld.class  jad  Readme.txt

file jad
jad: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses  shared libs), for GNU/Linux 2.0.0, stripped

./jad helloWorld.class 
-bash: ./jad: No such file or directory 
```

所以它看起来像`jad`被检测为其他命令的参数，但是当我`jad`用作命令时，它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T06:59:27.103

我有同样的问题。它可能是 32 位与 64 位的东西或其他东西。但是从这里下载静态链接的版本： [http](http://www.varaneckas.com/jad/) ://www.varaneckas.com/jad/ 解决了我的问题。

# c# - Net Sql AZMan 身份验证和授权

> ID：11357417
> 
> 赞同：0
> 
> 时间：2012-07-06T07:05:14.077
> 
> 标签：c#, authentication, unauthorized, azman, netsqlazman

我在我的应用程序中使用 Net Sql AZMan 进行身份验证和授权，我定义了一个更新任务，我有一个更新订单信息的操作。现在我想授权：所有用户在编辑角色时都可以更新订单信息，但是当订单 ID 为（例如，'X'）时，当订单 ID 为（'X ' 例如）只有管理员角色的用户才能更新订单信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:15:35.120

很久以前我有类似的要求，并为此尝试了 NetSqlAzman。不幸的是，NetSqlAzMan 不支持这种授权方案。他们有一个他们称之为属性的特性，该特性有许多设计限制，使其无法使用。

这是我与 NetSqlAzMan 作者在 codeplex 关于限制的讨论的一部分：http: [//netsqlazman.codeplex.com/discussions/282501](http://netsqlazman.codeplex.com/discussions/282501)

我建议您创建一个表作为 ACL，然后自己实现授权逻辑。

# c# - 从 listView 中的几列获取索引

> ID：11357418
> 
> 赞同：0
> 
> 时间：2012-07-06T07:05:19.777
> 
> 标签：c#

下面我有一些代码可以从 listView 中的选定行获取索引。但这仅在用户单击第一列时才有效。但是，如果我有四列，我将如何让用户单击 listView 行上的任意位置？

```
private void lvRegAnimals_SelectedIndexChanged(object sender, EventArgs e)
{
    int index = lvRegAnimals.FocusedItem.Index;
    // Code here to pass the index to method....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:09:46.453

您必须将 设置[`ListView.FullRowSelect`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.fullrowselect.aspx)为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:09:09.273

你可以使用`ListView.SelectedItems`属性来做这里的工作，像这样

```
private void ListView1_SelectedIndexChanged_UsingItems(
        object sender, System.EventArgs e)
    {

        ListView.SelectedListViewItemCollection breakfast = 
            this.ListView1.SelectedItems;

        double price = 0.0;
        foreach ( ListViewItem item in breakfast )
        {
            price += Double.Parse(item.SubItems[1].Text);
        }

        // Output the price to TextBox1.
        TextBox1.Text = price.ToString();
    } 
```

欲了解更多信息，请[转到此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selectedindexchanged.aspx)

# hibernate - SQLQuery 使用不同的参数调用自定义函数两次，仅第一次执行

> ID：11357419
> 
> 赞同：0
> 
> 时间：2012-07-06T07:05:21.743
> 
> 标签：hibernate, postgresql

我有一个自定义函数，我在查询中使用不同的参数多次执行，如下所示：

```
select
    my_function(input.pt, false),
    my_function(input.pt, true)
from (select st_geomfromewkt('SRID=1;POINT(151.2836 -33.7859484007395)') as pt) as input; 
```

当在 java/hibernate 之外运行时，它执行得很好，返回两个不同的值：

```
1, 2 
```

但是，当我通过休眠 SQLQuery 调用具有完全相同参数的完全相同的查询时，我得到了两次第一个结果：

```
SQLQuery qry = session.createSQLQuery("SELECT "//
    + " my_function(input.pt, false)," //
    + " my_function(input.pt, true)" //
    + " FROM (SELECT st_geomfromewkt(:point) AS pt) AS input;");
qry.setString("point", "SRID=1;POINT(151.2836 -33.7859484007395)");
Object[] result = (Object[]) qry.uniqueResult(); 
```

结果：

```
[1, 1] 
```

我已经仔细检查过我正在针对相同的数据库和架构运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:28:14.353

作为超级用户（`postgres`默认）运行这个：

```
set log_statement='all'; 
```

然后运行你的休眠 SQLQuery。您将在 Postgres 日志文件中看到向数据库发出的命令是什么。也许这会对你有所帮助。

不要忘记`set log_statement='none';`在测试后返回，因为记录所有语句会很慢。

除此之外，您的函数可能有问题——如果没有它的定义，我们将无能为力。

# actionscript-3 - 更好地使用 setter 和 getter

> ID：11357427
> 
> 赞同：1
> 
> 时间：2012-07-06T07:06:39.760
> 
> 标签：actionscript-3, oop, setter, getter

我对魔法方法 getter 和 setter 有疑问。

我的问题是：什么更好（更快、更安全）？

PS 这是 ActionScript 3，但也可以针对 PHP、JavaScript、C# 等其他语言回答这个问题。

情况1

```
 public class Test extends Sprite
    {
        private var _test : uint = 0;

        public function Test()
        {
            start();
        }

        private function start() : void
        {
            trace(_test); ** Take the private var _test **
        }

        public function set test(value : uint) : void
        {
            _test = value;
            start();
        }

        public function get test() : uint
        {
            return _test;
        }
   } 
```

或案例 2

```
 public class Test extends Sprite
    {
        private var _test : uint = 0;

        public function Test()
        {
            start();
        }

        private function start() : void
        {
            trace(test); ** difference here, take the public function test **
        }

        public function set test(value : uint) : void
        {
            _test = value;
            start();
        }

        public function get test() : uint
        {
            return _test;
        }
   } 
```

最好（最快）的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:13:22.530

你大约有 90% 的方法是编写自己的测试用例来找出自己。

Getter 和 setter 旨在添加对设置或检索属性时发生的情况的控制，或创建只读或只写属性。

这些好处大大超过了任何可能的性能差异。

* * *

至于那些性能差异，这里是一个测试环境：

```
// Test property.
var _test:uint = 0;
function get test():uint{ return _test; }
function set test(value:uint):void{ _test = value; }

// Direct access test.
function directTest(amt:int):Number
{
    // Directly accessing the property.
    var t:Number = getTimer();
    for(var i:int = 0; i < amt; i++)
    {
        var temp:uint = _test;
        _test = i;
    }

    return getTimer() - t;
}

// Getter/setter test.
function viaTest(amt:int):Number
{
    // Via getter/setter.
    var t:Number = getTimer();
    for(var i:int = 0; i < amt; i++)
    {
        var temp:uint = test;
        test = i;
    }

    return getTimer() - t;
} 
```

快速演示如何使用它：

```
trace("Direct: " + directTest(1000000));
trace("Getter/Setter: " + viaTest(1000000)); 
```

我得到的一些结果：

```
Amount      Direct      Get/Set
1000        0           0
5000        0           0
20,000      0           2
150,000     1           14
500,000     2           46
2,000,000   10          184
10,000,000  47          921 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:27:21.890

我总是更喜欢在声明它们的同一类的方法中使用 getter 和 setter（尽管我可以使用 privare 变量）。

当您必须设置或获取类属性时，getter 和 setter 隐藏了所需的逻辑，因此您可以在 setter/getter 中修改“您实际执行的操作”，而不必担心对客户端方法的影响。

他们还避免重复代码。

但这只是我的观点...... :)

# wordpress - 将heroku应用反向代理到wordpress博客

> ID：11357429
> 
> 赞同：8
> 
> 时间：2012-07-06T07:06:41.243
> 
> 标签：wordpress, heroku, reverse-proxy

我已经设法在 config.ru 中使用以下内容设置了我的 heroku 应用程序的反向代理

```
require ::File.expand_path('../config/environment',  __FILE__)
use Rack::ReverseProxy do  
   reverse_proxy /^\/blog(.*)$/, 'http://blog.domain.com$1', opts={:preserve_host => true}
end
run Appname::Application 
```

这允许我的 heroku 应用程序在 domain.com 上运行，并在为 wordpress 站点提供 blog.domain.com 时让 domain.com/blog 显示为 URL。到目前为止很棒。

访问 domain.com/blog 时，wordpress 网站可以正常服务，但是当我访问任何更深的页面（例如单个帖子）时，wordpress 会引发错误。我在表单的 URL 中使用带有日期和标题的永久链接：domian.com/blog/2012/07/a-great-blog-post - Worpress 现在似乎不喜欢这样。当我将链接切换回表单 domain.com/blog/?p=4 时，页面会成功提供。

似乎它不能正确处理初始 domain.com/blog 之后的斜杠。我觉得奇怪的是 domain.com/blog/wp-admin （以及整个 WP 管理应用程序）工作时没有任何问题。

谁能看到任何明显的问题，为什么带有多个斜杠“/”的页面/帖子可能会导致问题？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:09:55.690

好吧，我找到了一个解决方案，无论出于何种原因，在永久链接的 WP 设置中，除了可以通过 id 检索帖子的形式外，它不喜欢任何默认选项。(http://www.domain.com/blog/?p=123)

出于 SEO 的目的，我希望帖子的标题出现在 URL 中。所以我在自定义结构字段中输入：/index.php/%postname%/

似乎它需要 index.php 来让 wordpress 正确处理路由。

# http - HTTP Expires 标头值“0”和“-1”

> ID：11357430
> 
> 赞同：61
> 
> 时间：2012-07-06T07:06:45.543
> 
> 标签：http

HTTP响应标头中的`Expires: 0`和之间有什么区别？[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-14.21)定义了*无效的日期格式，特别是包括值 "0"* as *already expired*。但是，一些服务器（例如[www.google.de](http://www.google.de)）回复为.`Expires: -1`**`Expires: -1`**

 **`-1`与使用over相比是否有优势，`0`或者某些损坏的 HTTP 客户端甚至需要这样做？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-06T18:38:38.360

问题在于 Internet Explorer（尤其是旧版本）如何处理无效的 Expires 标头。IE 使用[Trident](http://en.wikipedia.org/wiki/Trident_%28layout_engine%29)布局引擎和[WinINET](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383630%28v=vs.85%29.aspx) API 来处理 HTTP 请求。如您所知，可以在 HTTP 标头中指定 Expires

```
Expires: 0 
```

或在元标记中

```
<meta http-equiv="Expires" content="0"> 
```

在第二种情况下，Expires 成为响应内容（不是标头内容）的一部分，因此它将[由 Trident 处理，然后传播到 WinINET](http://blogs.msdn.com/b/ieinternals/archive/2012/01/31/avoid-using-meta-to-specify-expires-or-pragma-in-html-markup.aspx)：

> 如果 WinINET 下载的响应带有无效的 Expires 标头（例如，不包含有效 HTTPDATE 值的响应）并且没有其他缓存指令，它会将文档标记为在一小时前已过期。然而，三叉戟没有这样的逻辑。如果您指定了无效时间，Trident 会获取当前时间戳并将其用作过期时间。如果遇到 Pragma: no-cache 指令，Trident 也会使用当前时间戳。如果用户尝试在处理 HTTP/404 的同一秒内重新导航到当前文档，则现有缓存条目的错误更新过期将导致该请求被视为新鲜。如果用户点击刷新按钮或 F5，缓存将被绕过并显示 404 页面。

换句话说`Expires: 0`，并不总是会导致资源立即到期，因此应该避免并`Expires: [some valid date in the past]`应该使用它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-10T06:02:01.850

Expires: -1 Expires 标头指定何时应将内容视为过期。值 -1 表示内容立即过期，必须重新请求才能再次显示。 [http://www.httpwatch.com/httpgallery/headers/](http://www.httpwatch.com/httpgallery/headers/)

max-age=0 只是告诉缓存（和用户代理）响应从一开始就已经过时，因此他们应该在使用缓存副本之前重新验证响应（例如，使用 If-Not-Modified 标头），而没有-cache 告诉他们在使用缓存副本之前必须重新验证。

有关更多信息，请查看[http://www.w3.org/Protocols/HTTP/1.1/rfc2616.pdf](http://www.w3.org/Protocols/HTTP/1.1/rfc2616.pdf)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-09-09T11:43:33.943

使用“-1”是无效的，将被视为“0”。它根本不应该触发重新加载。

请注意：在某些浏览器中，它可能会额外提供 1 小时或使用默认过期时间进行缓存。

1-最好给它一个正确的旧日期，例如：

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="Tue, 01 Jan 1980 1:00:00 GMT" /> 
```

对于正式工作，我建议将当前日期时间提供给 meta Expires 而不是使用旧的固定日期（这将使谷歌等搜索引擎将您的网站标记为旧网站而不显示在顶部）

2-如果您的后端是 PHP，您可以像这样处理它：

```
<meta http-equiv="Expires" content="<?php echo gmdate('D, d M Y H:i:s', time()-3600) . ' GMT' ?>" /> 
```

PS：我提前一小时以防万一。**

# mysql - 为什么从最新的 MySQL 降级到 MySQL 5.0.88 时，使用 LIMIT 不再起作用？

> ID：11357431
> 
> 赞同：1
> 
> 时间：2012-07-06T07:06:56.793
> 
> 标签：mysql, limit

不确定我在这里是否正确。

我在 MySQL 中有一个存储过程，它限制了这样的结果：

```
...
ORDER BY param_sort1, param_sort2
LIMIT param_start, param_end
; 
```

*param_start* 和 *param_end* 都作为整数传入，如下所示：

```
...
IN `param_start` INT, 
IN `param_end` INT
... 
```

虽然这在我使用最新 MySQL 的开发服务器上运行，但生产服务器仍在运行 MySQL 5.0.88 并在 LIMIT 子句上引发语法错误。如果我将其注释掉，它可以正常工作。

我对 MySQL 还很陌生，对于如何在旧版本的 MySQL 中正确执行此操作完全一无所知。

**问题：**
任何提示如何使它工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:19:56.450

在 MySQL 5.0 中，您不能将变量或参数用于 LIMIT 参数。MySQL 5.5 支持此功能。

作为一种解决方法 - 构造一个查询字符串并使用[准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)执行它。

* * *

像这样的东西**（编辑）**：

```
CREATE PROCEDURE procedure(IN param_start INT, IN param_end INT)
BEGIN
  SET @param_start = param_start;
  SET @param_end = param_end;
  SET @sql = CONCAT('SELECT * FROM table LIMIT ?, ?');
  PREPARE stmt FROM @sql;
  EXECUTE stmt USING @param_start, @param_end;
  DEALLOCATE PREPARE stmt;
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:21:56.103

这是一个适用于 v5.1.36 的示例查询

*从`customer`限制 2000、1000 中选择 *；*

我认为您应该升级到最新的 MySQL 稳定版本并尝试，因为 v5.0.88 不再稳定并且 MySQL 已经停止支持 v5.0 树，升级到 v5.5 树，看看它是否已修复

这些错误报告可能是相关的 [http://bugs.mysql.com/bug.php?id=50510](http://bugs.mysql.com/bug.php?id=50510) http://bugs.mysql.com/bug.php?id=46217

# java - 将字符串转换为 byte[] 以使内容保持不变

> ID：11357433
> 
> 赞同：1
> 
> 时间：2012-07-06T07:07:16.853
> 
> 标签：java

我有一个字符串说`String a = "abc";`。现在我想把它转换成一个字节数组说`byte b[];`，这样当我打印`b`它应该显示“abc”。

我怎样才能做到这一点？ `getBytes()`方法给出不同的结果。

到目前为止，我的程序看起来像这样：

```
String a="abc";
byte b[]=a.getBytes(); 
```

我想要的是我在一个类中有两种方法，一种是公共字节 [] 加密（字符串 a），另一种是公共字符串解密（字节 [] b） 加密后我将数据保存到数据库中，但是当我得到它时当时字节方法没有给出正确的输出，但我使用字符串方法得到了相同的数据，但现在我必须将它传递给解密（字节 [] b）如何做到这一点这是真实的场景。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T07:11:41.453

好吧，您的第一个问题是 Java 中的 String 不是字节数组，而是字符数组，其中每个字符占用 16 位。这是为了覆盖 unicode 字符，而不是只覆盖字节中的 ascii。这意味着如果您使用该`getBytes`方法，您将无法一次打印一个数组位置的字符串，因为它需要两个数组位置（两个字节）来表示一个字符。

您*可以*做的是使用`getChars`然后将每个字符转换为一个字节，并具有相应的精度 los。这*不是一个好主意*，因为它不能在正常的英文字符之外工作！不过，你问了，所以你去；）

编辑：正如@PeterLawerey 提到的，Unicode 字符使它变得更加困难，一些 Unicode 字符需要多个字符。[StackOverflow 中](https://stackoverflow.com/questions/2533097/java-unicode-encoding)有一个很好的讨论，它链接到[Oracle 的详细文章](http://java.sun.com/developer/technicalArticles/Intl/Supplementary/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:12:40.260

```
byte b[]=a.getBytes();
System.out.println(new String(b)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:09:54.067

您可以使用[此](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28byte%5B%5D,%20java.lang.String%29)构造函数重新构建您的字符串：

```
 String a="abc"; 
 byte b[]=a.getBytes("UTF-8");
 System.out.println(new String(b, "UTF-8")); 
```

除此之外，你不能做也不能`System.out.println(b)`期望看到`abc`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:11:50.163

一个字节是介于 -128 和 127 之间的值。当你打印它时，它默认是一个数字。

如果要将其打印为 ASCII 字符，可以将其转换为`(char)`

```
byte[] bytes = "abc".getBytes();
for(byte b: bytes)
    System.out.println((char) b); 
```

印刷

```
a
b
c 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T07:34:14.070

1.  这会将“abc”转换为字节，然后代码将以相应的 ASCII 码（即 97 98 99）打印“abc”。

    ```
    byte a[]=new byte[160];
    String s="abc";
    a=s.getBytes();
    for(int i=0;i<s.length();i++)
    {
        System.out.print(a[i]+" ");
    } 
    ```

2.  如果添加这些行，它将再次将 ASCII 代码更改为字符串（即 abc）

    ```
    String s1=new String(a);
    System.out.print("\n"+s1); 
    ```

希望它有所帮助。

**修改代码：**

发送字节数组作为参数：

```
 public static void another_method_name(byte b1[])
    {
        String s1=new String(b1);
        System.out.print("\n"+s1);
    }
    public static void main(String[] args) 
    {
        byte a[]=new byte[160];
        String s="abc";
        a=s.getBytes();
        for(int i=0;i<s.length();i++)
        {
            System.out.print(a[i]+" ");
        }
        another_method_name(a);
    } 
```

希望它再次有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T08:11:56.167

似乎您正在实施加密和解密代码。字符串构造函数用于文本数据。您不应该使用它将包含加密数据的字节数组转换为字符串值。您应该改用 base64，它将任何二进制数据编码为 ASCII。

这是一个很好的公共领域之一

[http://iharder.sourceforge.net/current/java/base64/](http://iharder.sourceforge.net/current/java/base64/)

base64 阿帕奇公地

[http://commons.apache.org/codec/download_codec.cgi](http://commons.apache.org/codec/download_codec.cgi)

```
String msg ="abc";
byte[] data = Base64.decode(msg);
String convert = Base64.encodeBytes(data); 
```

# asp.net-mvc-3 - 如何使用 mvc3 razor 打开一个新网页

> ID：11357434
> 
> 赞同：0
> 
> 时间：2012-07-06T07:07:20.460
> 
> 标签：asp.net-mvc-3, razor

我想打开新网页例如[https://www.google.md/](https://www.google.md/) 我想使用@Html.ActionLink 如果可能的话，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:09:44.923

> 如果可能的话，我想使用@Html.ActionLink 来做到这一点

`Html.ActionLink`应该用于属于同一应用程序的内部 url，因为它取决于路由。

如果要生成指向外部 url 的链接，可以使用普通的锚元素：

```
<a href="https://www.google.md/">Go to google</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:15:38.180

如果您想在新的浏览器页面中打开它，也可以使用`target="_blank"`

```
<a href="https://www.google.md/" target="_blank">Google!</a> 
```

但是，如果您只想从您的代码中打开另一个具有某些价值的网站的 url，您可以这样做：

```
<a href="https://www.google.md/index.php?somevalue="+@myvalue+" target="_blank">Google!</a> 
```

# javascript - 用域名写 cookie

> ID：11357435
> 
> 赞同：1
> 
> 时间：2012-07-06T07:07:22.883
> 
> 标签：javascript

下面是我正在编写的代码，用于设置域名=“.example.com”的cookie，但这不起作用。知道代码有什么问题吗？但是，如果我删除域名，它工作正常。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

function setCookie(c_name,value,exdays)
{
       alert("Cookie = " + document.cookie);

       var c_value=escape(value);`enter code here`

       var myDate = new Date();

       myDate.setMonth(myDate.getMonth() + 12);
       document.cookie = c_name +"=" + value + ";expires=" + myDate + ";domain=.example.com;path=/";

}

</script>
</head>
<body onload="setCookie('name','value')">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:13:32.950

试试这些功能。它可能会有所帮助；）

```
cookie_create = function (name,value,days) {
    var expires, date;

    if (days) {
        date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        expires = "; expires="+date.toGMTString();
    }
    else expires = "";
    document.cookie = name+"="+value+expires+"; path=/";

expires = date = null;
};

cookie_read = function (name) {
    var nameEQ = name + "=",
    ca = document.cookie.split(';'),
    len = ca.length,
    i, c; 

    for(i = 0; i < len; ++i) {
        c = ca[i];
        while (c.charAt(0) === ' ') c = c.substring(1); //,c.length);
        if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length); //,c.length);
    }

nameEQ = name = ca = i = c = len = null;
return null;
};

cookie_erase = function (name){
    cookie_create(name,"",-1);
name = null;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:27:27.817

尝试这个

```
function setCookie(name, value, expires, path, domain, secure) {
    document.cookie = name + "=" + escape(value) +
    ((expires) ? "; expires=" + expires : "") +
    ((path) ? "; path=" + path : "; path=" + "/") + 
    ((domain) ? "; domain=" + domain : "; domain=.example.com") +  
    ((secure) ? "; secure" : "");
} 
```

# c# - 围绕 volatile 重新排序操作

> ID：11357439
> 
> 赞同：8
> 
> 时间：2012-07-06T07:07:42.417
> 
> 标签：c#, volatile, lock-free

我目前正在查看一个写时复制集实现，并想确认它是线程安全的。我相当确定它可能不是的唯一方法是允许编译器在某些方法中重新排序语句。例如，该`Remove`方法如下所示：

```
public bool Remove(T item)
{
    var newHashSet = new HashSet<T>(hashSet);
    var removed = newHashSet.Remove(item);
    hashSet = newHashSet;
    return removed;
} 
```

其中 hashSet 定义为

```
private volatile HashSet<T> hashSet; 
```

所以我的问题是，鉴于 hashSet 是否`volatile`意味着`Remove`新集合上的 发生在写入成员变量之前？如果没有，那么其他线程可能会在删除发生之前看到该集合。

我实际上在生产中没有看到任何问题，但我只是想确认它是安全的。

**更新**

更具体地说，还有另一种获取 的方法`IEnumerator`：

```
public IEnumerator<T> GetEnumerator()
{
    return hashSet.GetEnumerator();
} 
```

所以更具体的问题是：是否可以保证返回的对象`IEnumerator`永远不会`ConcurrentModificationException`从删除中抛出一个？

**更新 2**

抱歉，答案都是针对多个作者的线程安全问题。提出了很好的观点，但这不是我想在这里找到的。我想知道是否允许编译器将操作重新排序为`Remove`如下所示：

```
 var newHashSet = new HashSet<T>(hashSet);
    hashSet = newHashSet;                  // swapped
    var removed = newHashSet.Remove(item); // swapped
    return removed; 
```

*如果*这是可能的，则意味着线程可以在分配`GetEnumerator`之后调用`hashSet`，但之前`item`被删除，这可能导致在枚举期间修改集合。

Joe Duffy 有一篇[博客文章](http://www.bluebytesoftware.com/blog/2008/06/13/VolatileReadsAndWritesAndTimeliness.aspx)指出：

> Volatile on load 意味着 ACQUIRE，不多也不少。（当然还有额外的编译器优化限制，比如不允许在循环之外进行提升，但现在让我们关注 MM 方面。） ACQUIRE 的标准定义是后续内存操作可能不会在 ACQUIRE 指令之前移动；例如，给定 { ld.acq X, ld Y }，ld Y 不能出现在 ld.acq X 之前。但是，之前的内存操作肯定可以在它之后移动；例如，给定 { ld X, ld.acq Y }，ld.acq Y 确实可以出现在 ld X 之前。当前运行的唯一实际发生这种情况的处理器 Microsoft .NET 代码是 IA64，但这是一个值得注意的领域CLR的MM比大部分机器都弱。接下来，.NET 上的所有存储都是 RELEASE（不管 volatile，即 volatile 就 jitted 代码而言是无操作的）。RELEASE 的标准定义是之前的内存操作在 RELEASE 操作之后可能不会移动；例如，给定 { st X, st.rel Y }，st.rel Y 不能出现在 st X 之前。但是，后续的内存操作确实可以在它之前移动；例如，给定 { st.rel X, ld Y }，ld Y 可以在 st.rel X 之前移动。

我读这个的方式是调用`newHashSet.Remove`需要 a`ld newHashSet`和写入`hashSet`需要 a `st.rel newHashSet`。从上面的 RELEASE 定义来看，在 store RELEASE 之后没有负载可以移动，所以*语句不能重新排序*！有人可以确认请确认我的解释是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:53:09.697

考虑使用[Interlocked.Exchange](http://msdn.microsoft.com/en-us/library/bb337971.aspx) - 它将保证排序，或[Interlocked.CompareExchange](http://msdn.microsoft.com/en-us/library/bb297966)作为附带好处，您可以检测（并可能从中恢复）同时写入集合。显然，它增加了一些额外的同步级别，因此它与您当前的代码不同，但更容易推理。

```
public bool Remove(T item) 
{ 
    var old = hashSet;
    var newHashSet = new HashSet<T>(old); 
    var removed = newHashSet.Remove(item); 
    var current = Interlocked.CompareExchange(ref hashSet, newHashSet, old);
    if (current != old)
    {
       // failed... throw or retry...
    }
    return removed; 
} 
```

`volatile hashSet`我认为在这种情况下 你仍然需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:39:58.793

编辑：

感谢您澄清调用 Remove （和其他集合突变）的外部锁的存在。

由于 RELEASE 语义，您最终不会将新值存储到，`hashSet`直到变量的值被分配（因为不能在 之后移动*）*。`removed``st removed``st.rel hashSet`

Therefore, the 'snapshot' behaviour of `GetEnumerator` will work as intended, at least with respect to Remove and other mutators implemented in a similar fashion.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:16:06.123

我不能代表 C#，但在 C 中，volatile 原则上表示并且仅表示变量的内容可以随时更改。它对编译器或 CPU 重新排序没有任何限制。您得到的只是编译器/CPU 将始终从内存中读取值，而不是信任缓存版本。

然而，我相信在最近的 MSVC（很可能是 C#）中，读取 volatile 充当加载的内存屏障，而写入充当存储的内存屏障，例如 CPU 将停止直到所有加载完成并且没有加载可以逃脱这个通过在易失性读取下方重新排序（尽管后来的独立加载可能仍会向上移动到内存屏障之上）；并且 CPU 将停止直到存储完成，并且没有存储可以通过在易失性写入下方重新排序来逃避这种情况（尽管后来的独立写入仍可能向上移动到内存屏障之上）。

当只有一个线程正在写入给定变量（但许多正在读取）时，正确操作只需要内存屏障。当多个线程可能写入给定变量时，必须使用原子操作，因为 CPU 设计使得写入时基本上存在竞争条件，因此写入可能会丢失。

# javascript - ajax 请求返回的表格显示不正确

> ID：11357440
> 
> 赞同：0
> 
> 时间：2012-07-06T07:07:42.833
> 
> 标签：javascript, html, ajax

我做了一个 ajax 请求，它返回一个 html 表。当我只是将位置重定向到该页面时，表格会正确显示，但是当我将 ajax 响应放在 div 元素中时，表格会变形。

```
function submitQuery() {
  length = category_query.length;
  if(category_query.indexOf('ALL') != -1)
    category_query = category_query.substring(0,length-4);    
  xmlhttp.onreadystatechange=function() {
    if(xmlhttp.readyState==4 && xmlhttp.status==200)
      document.getElementById('resultDiv1').innerHTML = xmlhttp.responseText;
  } 
  xmlhttp.open("GET","cons_query.php?q="+category_query,true);
  xmlhttp.send();
  //window.location="cons_query.php?q="+category_query;
  //if i just redirect to this location, the table is displayed fine.
} 
```

我希望表格看起来像通过 ajax 一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:32:42.907

嗯...看起来您正在浮动响应页面左侧的行元素。只需从 css 中删除该格式它应该看起来像这样 td { width: <>px; 向左飘浮; }

# java - 在Android中创建用户指定数量的线程

> ID：11357445
> 
> 赞同：2
> 
> 时间：2012-07-06T07:08:02.730
> 
> 标签：java, android, multithreading

我正在为android做一个下载应用程序。下载部分现已成功实施并且可以正常工作。我需要的是分段并行下载文件。更清楚地说，如果用户指定 8 个段，我想创建 8 个线程并进行下载。那么我可以通过什么方式动态创建 8 个线程呢？另外，当我为手机执行此操作时，我如何才能将内存消耗保持在最低水平？我以前没有使用过线程，所以我希望你能帮助我。感谢您的时间！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:13:06.900

创建固定数量线程的最有效方法是使用[ExecutorService](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html)：

```
ExecutorService exec = Executors.newFixedThreadPool(8); 
```

它基本上是一个固定大小的线程池，从开发人员那里承担了大量的管理负担。

**编辑**：所以你的流程应该是这样的：

首先，定义你的线程任务类（每个线程都会执行`call`自己任务的方法）：

```
class ThreadTask implements Callable<Object> {

    public Object call() {
        // execute download
        ...
        return result;
    }
} 
```

如果您想向任务传递任何参数，请将一些私有字段放在上面的类中并通过构造函数传递它们。此外，您可以从 中返回任何类型`call`，只需更改`implements Callable<...>`部分中的类型。

当你想触发线程时，创建池并提交任务：

```
ExecutorService exec = Executors.newFixedThreadPool(8);
List<Future<Object>> results = new ArrayList<Future<Object>>();

// submit tasks
for(int i = 0; i < 8; i++) {
    results.add(exec.submit(new ThreadTask()));
}

...

// stop the pool from accepting new tasks
exec.shutdown();

// wait for results
for(Future<Object> result: results) {
    Object obj = result.get();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:12:27.970

看一下`ExecutorService`，特别是[Executors.newFixedThreadPool(int i)](http://developer.android.com/reference/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)，这是在系统友好的问题上处理线程的好方法。

# jquery - 如何在我的 jquery 数据表中使用 http://www.domainname.com 搜索 URL？

> ID：11357446
> 
> 赞同：0
> 
> 时间：2012-07-06T07:08:04.710
> 
> 标签：jquery, jquery-datatables

当我使用它搜索我的域时`http://domain.com`，效果很好。但是，当我搜索它时，`http://www.domain.com`它不起作用。

```
 function dataTableInitialisation() {
      myOTable = $("#EmployeesTable").dataTable({
          "bProcessing": true,
          "bServerSide": true,
          "sAjaxSource": "/Employees/FetchDetails?Deptid=" + @model.Id + "&thresholdLow=4&threshold=100",
          "sPaginationType": "full_numbers",
          "bDestroy": true,
          "aaSorting": [[1, 'desc']],
          "asStripClasses": ['color01', 'color03'],
          "aoColumnDefs": [{
                  "aTargets": [2],
                  "bVisible": false
                  }, {
                  "aTargets": [1],
                  "fnRender": function (oObj) {
                  return "<a href='#showemployees' rel='" + oObj.aData[2] + "'></a>";
                  }
           }]
       });
    }
    }); 
```

当我搜索`http://www.`生成 2 个自动发出的 ajax 请求而不是一个。如何在 Jquery Datatable 中更正此问题？

# android - Android：位图：来自包裹：内存不足异常

> ID：11357448
> 
> 赞同：0
> 
> 时间：2012-07-06T07:08:11.507
> 
> 标签：android, bitmap

我正在使用捆绑包将位图从一个应用程序发送到另一个应用程序。我从包中检索位图以用于不同的应用程序。 **bundle 的具体使用在这个地方是必要的。**

当我读出来时，我得到了一个内存不足的例外。

```
bitmap = (Bitmap)receivedmsg.getData().getParcelable("myobject"); 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:33:04.043

这意味着它所说的。您序列化的图像太大而无法在其他应用程序中读回内存。最快的解决方法是 M Mohsin Naeem 所暗示的：您需要使图像更小！在发送图像的应用程序中执行此操作。例如，如果该应用程序正在读取文件，您可以将其设置为将图像下采样到更小的尺寸。

还要考虑是否真的需要以这种方式发送图像，或者是否可以将其保存到 SD 卡中，然后在不读入内存的情况下进行处理。

# c# - 调整窗口大小（在中心屏幕中）wpf

> ID：11357451
> 
> 赞同：1
> 
> 时间：2012-07-06T07:08:19.083
> 
> 标签：c#, wpf

我需要在所有工作区开放

```
this.Width = SystemParameters.WorkArea.Width;
this.Height = SystemParameters.WorkArea.Height; 
```

但是，窗口不在屏幕的中心位置，我怎样才能将我的窗口定位在屏幕中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:22:06.810

使用[窗口状态](http://msdn.microsoft.com/en-us/library/system.windows.window.windowstate.aspx)

在 XAML 中

```
<Window WindowState="Maximised">
// ...
</Window> 
```

在代码隐藏中

```
MyWindow mw = new MyWindow();
mw.WindowState = WindowState.Maximised; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:40:13.950

像这样写。WindowStartupLocation="CenterScreen">

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:15:11.613

试试这个[WindowStartupLocation](http://msdn.microsoft.com/es-es/library/system.windows.window.windowstartuplocation.aspx)

**更新**

如果我用...

```
public MainWindow() {
    InitializeComponent();
    this.Width = SystemParameters.WorkArea.Width;
    this.Height = SystemParameters.WorkArea.Height;
    this.Top = 0;
    this.Left = 0;
} 
```

如果没有 WindowStartupLocation，则窗口居中并填满屏幕

# android - 活动生命周期：在子活动中完成工作时该怎么办？

> ID：11357461
> 
> 赞同：0
> 
> 时间：2012-07-06T07:09:24.280
> 
> 标签：android

关于活动生命周期有很多问题，但我找不到合适的。

我有一个活动（名为 A），它显示来自一位用户的汽车。在内部，活动存储`userId`到一个变量中以在列表中加载用户的汽车。`userId`来自之前的活动。

当用户按下 A 上的“新车”按钮时，将启动活动 B。用户填写汽车的表格并按保存。用户的新车被持久化到数据库中。

**此时，必须调用哪个方法才能从 B 返回到活动 A？**

1.  我应该打电话`finish()`吗？然后，用户返回 A，B 被销毁。但是，如果 A 之前被销毁会发生什么？如果 A`userId`不存在，如何恢复？
2.  也许额外`startActivity(A)`的`userId`意图是打电话？但是，我正在创建一个新活动！
3.  其他选择？

我相信有人会帮助澄清这些概念。:)

编辑：

有关更多信息，请参阅已接受答案的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:32:36.127

应该调用完成返回。

1) 如果 A 被销毁，它将由 android 重新创建，除非您在其上调用了 finish()。如果您正确保存了其状态，则根本不应该有问题。

2）这只会将活动 A 移回堆栈顶部或创建一个新活动，具体取决于您添加到意图的标志。

3）我会在活动A中使用startActivityForResult来启动B，然后让用户输入值，将结果设置在B中并调用finish（）。

# excel - 使用列索引，如何复制特定列

> ID：11357467
> 
> 赞同：1
> 
> 时间：2012-07-06T07:09:38.370
> 
> 标签：excel, vba

新的一天，新的问题。我得到了很多帮助，希望你也能帮助我。已经四处寻找我的问题的解决方案，但没有找到。

这是我的代码：

```
SearchString = "start"
    Set aCell = phaseRange.Find(What:=SearchString, LookIn:=xlValues, _
            LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False)
If Not aCell Is Nothing Then
    Set bCell = aCell
    ReDim Preserve arrStart(nS)
    arrStart(nS) = aCell.Row
    nS = nS + 1
    Do While ExitLoop = False
        Set aCell = phaseRange.FindNext(After:=aCell)
        If Not aCell Is Nothing Then
            If aCell.Row = bCell.Row Then Exit Do
            ReDim Preserve arrStart(nS)
            arrStart(nS) = aCell.Row
            nS = nS + 1
        Else
            ExitLoop = True
        End If
    Loop
Else
End If 
```

并写出来：

```
For i = 1 To nS - 1
        Sheets("DataSheet").Select
        Sheets("raw_list").Rows(arrStart(i)).Copy
        Cells(i, 1).Select
        ActiveSheet.Paste
Next 
```

如您所见，我在列中寻找字符串。当我得到结果时，行号存储在一个数组中。在下一个代码片段中，我在整行中写出命中。是否有可能不是取整行，而是选择要以简单的方式复制该行中的哪些列？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:30:22.113

如果您已经知道列号并且数组中有行，那么试试这个

```
Sheets("raw_list").Cells(arrStart(i),5).Copy 
```

这将从特定行中的第 5 列 (Col E) 复制单元格。

# google-closure-compiler - 高级优化中未定义的闭包编译器编号

> ID：11357468
> 
> 赞同：0
> 
> 时间：2012-07-06T07:09:39.447
> 
> 标签：google-closure-compiler

我有以下代码行

```
frame = self.spriteData['backgroundps.png'];
self.bgBoard  = new gg.casino.game.sprite(self.spriteSheet, frame, 0, 0, frame.w, frame.h);
console.log(frame);
console.log(self.bgBoard.x + ' ' + self.bgBoard.y + ' ' + self.bgBoard.w + ' ' + self.bgBoard.h); 
```

和 gg.casino.game.sprite 被定义为

```
gg.casino.game.sprite = function(sheet, frame, x, y, twidth, theight) {
    this.sheetRef                               =   sheet;
    this.frame                                  =   frame;
    this.x                                      =   x;  
    this.y                                      =   y;  
    this.w                                      =   twidth;
    this.h                                      =   theight;
    console.log(this.x + ' ' + this.y + ' ' + this.w + ' ' + this.h);
} 
```

使用 simpleoptimization 编译时，一切正常，我得到以下日志：

```
0 0 800 480
(frame object)
0 0 800 480 
```

但是当我使用高级优化编译时，日志显示

```
0 0 undefined undefined 
(frame object) - with correct values
0 0 undefined undefined 
```

这段代码可能出了什么问题？

**编辑：**

之后添加了一个日志`frame = self.spriteData['backgroundps.png'];`

```
console.log('ps ' + frame.w + '   ' + frame.h); 
```

并将 w 和 h 打印为 undefined !!!!!!

```
ps undefined undefined 
```

`console.log(frame)`在下一行打印具有正确值的对象

**编辑2：**

有关 self.spriteData 的更多信息：我有一个从 texturepacker 导出的 json 文件。它有一个对象数组，其中每个对象表示为

```
{
"filename": "backgroundps.png",
"frame": {"x":105,"y":304,"w":800,"h":480},
"rotated": false,
"trimmed": false,
"spriteSourceSize": {"x":0,"y":0,"w":800,"h":480},
"sourceSize": {"w":800,"h":480}
} 
```

我遍历该 json 数组并将值分配给`self.spriteData`如下：

```
 var respData                            =   xhr.getResponseJson();
    self.spriteData                         =   {};
    for(var i = 0, len = respData.frames.length; i < len; i++) {
        self.spriteData[respData.frames[i].filename] = respData.frames[i].frame;
    } 
```

因此`frame`将具有以下结构，该结构将打印在控制台上：

```
Object
  h: 480
  w: 800
  x: 105
  y: 304 
```

`frame`所以在高级编译中，如果我打印as没有问题`console.log(frame)`。但是当我尝试访问其成员`console.log(frame.h)`时，它会打印为`undefined`. 刚刚尝试添加@expose 评论`var frame = {};`，希望它不会被重命名，但没有帮助。

**编辑：** 将`frame`分配更改为 frame.x = self.spriteData['backgroundps.png'].x; frame.y = self.spriteData['backgroundps.png'].y; frame.w = self.spriteData['backgroundps.png'].w; frame.h = self.spriteData['backgroundps.png'].h;

并声明`frame.w`并`frame.h`带有注释 `@type {number} （没有为 x 和 y 做，因为它们已经正常工作了）。

现在 console.log(frame) 显示

```
Object
  a: undefined
  b: undefined
  x: 105
  y: 304 
```

但为什么？

**编辑（已解决）** :D :-) 我明确声明`frame`'s 成员为

```
/**
 * @type {number}
 * @expose
 */
frame.w                                     =   0;

/**
 * @type {number}
 * @expose
 */
frame.h                                     =   0;

/**
 * @type {number}
 * @expose
 */
frame.x                                     =   0;

/**
 * @type {number}
 * @expose
 */
frame.y                                     =   0; 
```

现在它可以工作了:-)

感谢 Kayhr、Ross 和 Chad 的帮助。但现在我想知道我应该标记谁的答案是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:55:27.357

self.spriteData['backgroundps.png'] 的定义是什么？

我愿意打赌 self.spriteData['backgroundps.png'] 的 'w' 和 'h' 键是用字符串定义的。如果是这样，当您使用点语法访问此类属性时，事情通常会中断，因为编译器将保持字符串不变，但会优化以点语法编写的属性的名称。

例如：

```
 foo['bar'] => a['bar']
  foo.bar    => a.b 
```

...其中 a 和 b 是假设的编译器输出标记。

请参阅：[https ://developers.google.com/closure/compiler/docs/api-tutorial3#propnames](https://developers.google.com/closure/compiler/docs/api-tutorial3#propnames)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:06:28.057

无法重现它。我用简单的对象伪造了丢失的代码，以使您的代码运行。输出是一样的，不管我是使用 SIMPLE 还是 ADVANCED 优化。我猜你的问题出在你在这里没有提到的代码中（也许在这个 spriteData 东西的定义中）。请给我们一个完整的示例和您使用的确切编译器选项。

这是我正在编译的代码，也许您可​​以看到与您的 REAL 代码的关键区别：

```
// Faked code (The stuff you didn't include in the question):

var gg, self;
gg = {};
gg.casino = {};
gg.casino.game = {};
self = { spriteData: { 'backgroundps.png': { w: 800, h: 480 } } };

// Your code (unchanged):

gg.casino.game.sprite = function(sheet, frame, x, y, twidth, theight) {
    this.sheetRef                               =   sheet;
    this.frame                                  =   frame;
    this.x                                      =   x;  
    this.y                                      =   y;  
    this.w                                      =   twidth;
    this.h                                      =   theight;
    console.log(this.x + ' ' + this.y + ' ' + this.w + ' ' + this.h);
}

frame = self.spriteData['backgroundps.png'];
self.bgBoard  = new gg.casino.game.sprite(self.spriteSheet, frame, 0, 0,  frame.w, frame.h);
console.log(frame);
console.log(self.bgBoard.x + ' ' + self.bgBoard.y + ' ' + self.bgBoard.w +  ' ' + self.bgBoard.h); 
```

# php - 使用函数 substr() 后，我的查询无法更新到数据库中

> ID：11357472
> 
> 赞同：-7
> 
> 时间：2012-07-06T07:09:53.170
> 
> 标签：php, mysql

不知道为什么，在我使用函数 substr() 之后，当我签入数据库时​​没有值（空白），我无法将我的值更新到数据库。

```
$result = '000603040000000000GL17KWJ10881011215000000000100';
$invoice = substr($result, 8, 20);  //output 0000000000GL17KWJ108

//update
$sql="UPDATE `order` SET invoice_pbb='$invoice' WHERE order_id=108";
$result=mysql_query($sql);  

if($result){
    echo "Successful";
}       
else {
    echo "ERROR";
} 
```

`column = invoice_pbb`
`type = varchar (100)`

*如果我用硬编码更改值，我可以更新（不知道为什么）。

```
$invoice = '0000000000GL17KWJ108'; 
```

*我正在使用 https

谢谢你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:49:44.060

实际上我在您的代码中看不到明显的错误，但我不知道上下文，也许这些步骤可以帮助找到错误。

首先，我不会重用变量 $result，而是使用一个新变量。如果某些代码无法执行，这可以避免误解。

```
$queryResult = mysql_query($sql); 
```

然后最好正确检查结果，因为`mysql_query()`可以返回混合类型。请注意 === 运算符，您无法使用简单的 if 语句可靠地检查结果。

```
if ($queryResult === false)
  echo "ERROR";
else
  echo "Successful"; 
```

然后我会打开错误报告，这可能会给你一个关于实际问题的提示。

```
error_reporting(E_ALL); 
```

在使用它进行查询之前检查`$invoice`真正包含的内容。

```
var_dump($invoice); 
```

**编辑：**

再多提一个建议，绝对尝试为您的表找到另一个名称，使用保留字作为表名，这会招来各种麻烦。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T07:25:27.090

我认为上面的帖子是对的。$sql="UPDATE `order`SET invoice_pbb='".$invoice."' WHERE order_id=108";

因为单引号中的变量名不会呈现任何值，因为它按字符读取字符。

或者，

您可以检查数据库中的数据类型、长度等

# android - 如何在android中的onitem单击中禁用列表视图行中的特定布局或分隔符

> ID：11357477
> 
> 赞同：0
> 
> 时间：2012-07-06T07:10:21.193
> 
> 标签：android

我为列表视图添加了一个分隔符，用于在 row.xml 中为线性布局提供背景。我已经为列表视图行实现了 onitem 单击。我正在为列表视图行显示一个 onitemclick 对话框。如果用户单击该布局背景或分隔 Onitem 单击将触发。我该如何避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:14:31.863

我禁用了布局的点击监听器

# spring - 同一事务下的 Groovy 和 Spring

> ID：11357478
> 
> 赞同：0
> 
> 时间：2012-07-06T07:10:26.513
> 
> 标签：spring, groovy, transactions

我正在为遗留代码而苦苦挣扎。我正在创建单元测试，所以我决定使用 groovy 来用所需的遗留数据填充数据库。通常在我的代码中，我使用 ibatis 进行持久化。我想最后回滚测试。问题是，当我通过 groovy 创建行时，我使用它的 id 通过 ibatis 创建行，我得到约束违反异常 - 找不到父键。

当我使用 groovy 来坚持父母而不是根据父母 id 创建孩子时，它工作得很好。

由于 XML 解析器的问题（遗留代码 FTW :/），我也不能使用 @Transactional

```
@ContextConfiguration(locations = [ "../dao/impl/ibatis/spring-data-context-config.xml",  "classpath:/pl/com/betacom/treq/dao-context.xml"])
@RunWith(SpringJUnit4ClassRunner.class)

public class FinancingForIltCreationTest {

@Autowired
IFinancingForIltDAO financingForIltDAO;

@Autowired
Sql sql;

@Autowired
DataSourceTransactionManager transactionManager;

private TransactionStatus transactionStatus;

@Before
public void setUp() {
    transactionStatus = transactionManager.getTransaction(new DefaultTransactionDefinition());
}

@After
public void tearDown() {
    transactionManager.rollback(transactionStatus);
    transactionStatus = null;
}

@Test
public void shallCreateFinancingForIlt() throws Exception {
    //given
    IltOffering offering = new IltOffering("GOING_DOWN_TO_UBERGROUND", offeringTempId, java.sql.Date.valueOf("2011-07-21"), java.sql.Date.valueOf("2012-07-21"));
    offering.insert(sql); // it's inserted by groovy
    //when
    FinancingForIltDTO financingForIltDTO = createFinancingForIlt(offering.id).build(financingForIltDAO); // it's my assembler inserting via iBatis
    //then
    assertNotNull(financingForIltDTO.id);
} 
```

配置如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
<bean id="dataSourceIn"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName">
        <value>####</value>
    </property>
    <property name="url">
        <value>####</value>
    </property>
    <property name="username">
        <value>####</value>
    </property>
    <property name="password">
        <value>####</value>
    </property>
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy">
    <constructor-arg ref="dataSourceIn" />
</bean>

<bean id="transactionManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource">
        <ref local="dataSource" />
    </property>
</bean>

<bean id="sql" class="groovy.sql.Sql">
    <constructor-arg ref="dataSource" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:03:44.517

不幸的是，这是一个数据库架构问题。

# java - Netty 上的书籍和文章

> ID：11357480
> 
> 赞同：19
> 
> 时间：2012-07-06T07:10:30.587
> 
> 标签：java, netty

是否有一些关于如何使用 Netty 的好文章/书籍？文档很短，学习Javadoc对我来说并不简单。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T07:33:13.700

当您需要搜索时，Google 比 SO 大得多！

[关联](http://www.jboss.org/netty/documentation)

**编辑**：

[来自 dzone1 的链接](http://www.dzone.com/links/r/netty_tutorial_part_1_introduction_to_netty.html)

[来自 dzone2 的链接](http://www.dzone.com/links/r/netty_tutorial_part_15_on_channel_handlers_and_ch.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T07:26:08.270

我发现[本教程（在主站点的](http://seeallhearall.blogspot.gr/2012/05/netty-tutorial-part-1-introduction-to.html?m=1)[相关文章](http://netty.io/wiki/related-articles.html)部分中提到）很有用。检查[提供的示例也有](http://netty.io/wiki/index.html)帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T09:40:21.083

[https://netty.io/Main/Related+Articles](https://netty.io/Main/Related+Articles)

# android - android 495KB 图像占用 10MB 堆大小

> ID：11357483
> 
> 赞同：1
> 
> 时间：2012-07-06T07:10:55.013
> 
> 标签：android, bitmap, heap-memory

我正在尝试在我的应用程序中加载大小为 495KB 的图像。如果我加载此图像，堆大小会从 25MB 增加到 35MB，这会导致我的应用程序出现实际内存问题。如果我不加载此图像，则堆大小将保持在 25MB。谁能告诉它为什么占用这么多堆大小？

图片如下 ![在此处输入图像描述](../Images/099e44c3968628d9c48b7940f2bec5bc.png)

我用来加载图像的代码是

```
 InputStream s4 = getResources().openRawResource(R.drawable.parallax_layer4);    
    FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, FrameLayout.LayoutParams.WRAP_CONTENT);
    System.gc();
    if(bitmap4 != null) {
        bitmap4.recycle();
    }
    s3 = null;
    System.gc();     

    bitmap4 = bitmap(s4);
    layer4Back = new ImageView(this);
    layer4Back.setImageBitmap(bitmap4);
    layer4Back.setScaleType(ScaleType.FIT_XY);
    parallaxLayout.addView(layer4Back, 3, lp);
    try {
        s4.close();
    } catch (IOException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
    }
    s4 = null;
    System.gc();

private static Bitmap bitmap(final InputStream is) {
    Bitmap bitmap = null;
    System.gc();
    Options options = new BitmapFactory.Options();
    options.inPreferredConfig = Bitmap.Config.RGB_565;
    options.inSampleSize = 1; 

    try {
       // bitmap = BitmapFactory.decodeStream(is);
       bitmap = BitmapFactory.decodeStream(is, null, options);

    } catch (Error e) {
       // TODO: handle exception
       e.printStackTrace();
    }
    return bitmap;
} 
```

谢谢阿亚兹阿拉维

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:18:15.377

图像文件在加载到内存时是未压缩的。在 5600 x 480 像素和每像素 32 位的情况下，您的图像在未压缩时几乎正好是 10 MB。

我的建议是把它切成更小的部分，只加载你需要的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:19:15.607

5,600px * 480px * 4 字节 = 10,752,000 字节，所以这并不奇怪。

[在有效地显示位图文章](http://developer.android.com/training/displaying-bitmaps/index.html)中有一些很好的指导，还有很多关于 SO 讨论好的解决方案的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:19:09.213

那么你期待什么？图像是 5600 x 480 像素，现在在内存中**每个像素**都占用 32 位（请纠正我的人）。做数学，你就会明白为什么这是一个问题。您需要使用较小的图像或将图像分割成部分并在需要时加载需要的部分并丢弃不必要的部分。

我有一个类似的问题，在这里讨论：[Android app crash out of memory on relaunch](https://stackoverflow.com/questions/11082820/android-app-crash-out-of-memory-on-relaunch)

关于这个主题和可能的解决方案也有很长的讨论：[Strange out of memory issue while loading an image to a Bitmap object](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:16:49.723

如果您加载位图并具有高 DPI 屏幕分辨率，BitmapFactory 将自动缩放您的位图。我认为在具有最大 DPI 值的设备上，它会在两个方向上缩放 2 倍。

这或许可以解释一些意外的增长。尝试将您的图像放在名为的文件夹中`drawable-nodpi`，它们将不会被缩放。

# android - 在 android 中删除和更新 SQLite 数据库

> ID：11357484
> 
> 赞同：0
> 
> 时间：2012-07-06T07:11:06.283
> 
> 标签：android, sqlite

我正在删除和更新 SQLite 数据库，但删除和更新后数据库记录中没有发生更改

**更新功能：**

```
public void update(int iD, String name, String gender, String date,String branch, String mob, String email, String address) {
        // TODO Auto-generated method stub
        String [] para = new String[7];
        para[0]= name; para[1]=gender; para[2]=date; para[3]=branch; para[4]=mob; para[5]=email; para[6]=address;
        db.execSQL("UPDATE stud SET Name=?,Gender=?,DOB=?,Branch=?,Mobile=?,EmailId=?,Address=? WHERE _id="+iD+"",para);
        System.out.println("data updated....");
    } 
```

**删除功能：**

```
public void deleteData(int id) {
    // TODO Auto-generated method stub
    System.out.println("in del");
    db.execSQL("DELETE FROM stud WHERE _id='"+id+"'");
    System.out.println("data deleted...");

} 
```

查询后的语句被执行。db 是 SQLite 数据库变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:40:31.823

`yourcursor.requery();`当您使用 cursoradapter 在 listview 中列出数据库时，在您的操作完成后调用。

# load-testing - 登录磨床

> ID：11357485
> 
> 赞同：0
> 
> 时间：2012-07-06T07:11:08.177
> 
> 标签：load-testing, stress-testing, grinder

我正在测试一个 webapp，我想记录所有的 http 请求和响应，我该怎么做？
我只是在写

> log =grinder.logger.info
> def page15(self):
> """GET COPSApp (request 1501)."""
> result = request1501.GET('/webdynpro/call_agent_dtop-login_wd/COPSApp')
> log("---- -------------------------------")
> 返回结果

但它没有记录。我需要做什么才能登录

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:49:26.513

**请求记录**

Grinder 通常会记录您的所有 HTTP 请求。所以至少对于请求日志，默认行为可能对你来说已经足够好了。查找名称如下的日志文件

```
<hostname>-0.log 
```

在此文件中，您将看到您的请求以及服务器响应代码。

如果您想从代码中显式记录您的 http 请求，则需要使用与当前使用的模式稍有不同的模式。

```
 request1501.setUrl('/webdynpro/call_agent_dtop-login_wd/COPSApp')
    response1501=request1501.GET()
    log(request1501.getUrl()) 
```

**响应记录**

在记录 HTTP 响应时，您需要分别处理正文和标头。根据上面的代码示例，您可以像这样记录正文：

```
 log(response1501.getText()) 
```

有几种方法可以记录 HTTP 响应标头。最简单的方法是在单个语句中将它们全部转储到日志中，如下所示：

```
 log(response1501.toString()) 
```

要了解记录 http 响应标头的其他选项，以及您可以单独访问的不同内容，请参阅此处的 HTTPResponse API：

[http://grinder.sourceforge.net/g3/script-javadoc/HTTPClient/HTTPResponse.html](http://grinder.sourceforge.net/g3/script-javadoc/HTTPClient/HTTPResponse.html)

**登录**

在您的问题中，您还问“*我需要做什么才能登录*”。我认为这是一个错字，您真正的意思是如何将内容写入日志。要进行实际登录，您需要提交用户名和密码，通常通过 HTTP 发布。Grinder 可以很容易地为您做到这一点，但该主题应在单独的问题中解决。

# java - 如何使 ProGuard 保留整个（整个）类（带有字段和方法）而不使用“-keep”

> ID：11357486
> 
> 赞同：1
> 
> 时间：2012-07-06T07:11:12.200
> 
> 标签：java, android, scala, proguard, sbt-android-plugin

如果我有一个 Scala Android 项目并且我在我的 apk 中使用这些方法...

```
scala.collection.immutable.List#::
scala.collection.immutable.List#::: 
```

...，在我使用 ProGuard 之后，它将`scala.collection.immutable.List`只使用 2 种方法保持类，`::`并且`:::`.

ProGuard 中是否有一个选项可以将**所有** 方法和字段保留在一个类中，即使它们当前未使用，但不发送 ProGuard：`-keep class scala.collection.immutable.List {*;}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:26:11.270

我发现我这样做的唯一方法是确定在我的编译类中使用了哪些类和方法。

我通过数据结构映射它们`Map[String, Set[String]]`，其中键是类名，对应的`Set`值包含该类中使用的所有方法。

之后，只需创建大量`-keep`参数即可：

```
def getProGuardKeepArgs(allDeps: MMap[String, MSet[String]]): String = {
    var sb = new StringBuilder()
    for ((clazz, methods) <- allDeps) {
        sb.append("-keep class " + clazz + " {\n")

        for (method <- methods) {
            sb.append(" *** " + method + "(...);\n")
        }

        sb.append("}\n\n")
    }

    sb.toString
} 
```

# windows-phone-7 - 在 wp7 中动态更改 webbrowser 中的字体大小

> ID：11357487
> 
> 赞同：0
> 
> 时间：2012-07-06T07:11:21.740
> 
> 标签：windows-phone-7, zooming, font-size

谁能帮助我，我如何以编程方式增加或减少 windows phone 7 c sharp 中 Web 浏览器控件的字体大小。我需要它来实现 Web 浏览器控件中的缩放功能。这是我的代码

```
 private void btn_zoomin_click(object sender, EventArgs e)
    {
        double fs = webBrowser1.FontSize;

        webBrowser1.FontSize = fs+10;
     } 
```

但是字体根本没有改变。

任何形式的帮助将不胜感激。非常感谢， 穆纳扎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:39:31.623

是的，有一个解决方案，您可以使用 webBrowser 的 "InvokeScript" 在 html 页面中触发一个脚本来放大字体，这是一个示例：

```
webBrowser1.InvokeScript("ChangeFontSize","12"); 
```

TO DO：html 内的脚本：

```
 <script type="text/javascript">
        function ChangeFontSize(size) {
            .....
            ....
            return true;
        }
<script/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:25:29.257

我不认为它应该以这种方式工作。

用户可以像在 Internet Explorer 中那样放大和缩小，但不能更改字体大小。

从技术上讲，您可以获取要显示的 html 文件，对其进行解析，如果字体大小是内联定义的，您可以更改它，然后在 WebBrowser 控件中显示新的 html 文件，但我不认为这是一个非常好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T22:14:39.100

您必须使用 WebBrowser.InvokeScript：

```
// Initial text size
int textSize = 100;

private void TextPlusOnClick(object sender, EventArgs e)
{
    textSize *= 2;
    string szfn = "{styleText = \"body { -ms-text-size-adjust:" + textSize + "% }\";styleTextNode = document.createTextNode(styleText);styleNode = document.createElement(\"style\");styleNode.appendChild(styleTextNode);document.getElementsByTagName(\"head\")[0].appendChild(styleNode);};";
    webBrowser.InvokeScript("eval", szfn);
}

private void TextMinusOnClick(object sender, EventArgs e)
{
    textSize /= 2;
    string szfn = "{styleText = \"body { -ms-text-size-adjust:" + textSize + "% }\";styleTextNode = document.createTextNode(styleText);styleNode = document.createElement(\"style\");styleNode.appendChild(styleTextNode);document.getElementsByTagName(\"head\")[0].appendChild(styleNode);};";
    webBrowser.InvokeScript("eval", szfn);
} 
```

请参阅[文本大小调整属性的描述](https://developer.mozilla.org/en-US/docs/Web/CSS/text-size-adjust)和[MSDN 上的这篇文章](http://social.msdn.microsoft.com/Forums/wpapps/en-us/abeb203d-eb6d-4297-8c93-6762b12036c6/font-size-not-setting-in-web-browser-control-in-windows-phone-8?forum=wpdevelop)。

# android - 调用 procrank 在真实设备上不起作用

> ID：11357488
> 
> 赞同：8
> 
> 时间：2012-07-06T07:11:34.317
> 
> 标签：android, memory, googleio, uss

根据关于了解您的应用程序占用多少内存的[google io 视频，您可以使用 procrank 并读取它的 USS 值。](http://www.youtube.com/watch?feature=player_embedded&v=gbQb1PVjfqM#t=578s)

我已经在模拟器上尝试过（无论我使用哪个版本 - 从 2.3.x 到 4.1），它运行良好，但在实际设备上运行，它不起作用（在带有 android 4.0.4 的 Galaxy s3 上测试) . 就好像命令不存在一样。

怎么会这样 ？有没有其他方法可以获得这个 USS 值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T13:38:12.073

你可以使用`dumpsys`命令

脚步：

1.  发出命令行：`dumpsys meminfo packageName`
2.  Private Dirty 列是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T03:38:29.823

你也可以使用

```
adb shell dumpsys meminfo 
```

或者

```
adb shell dumpsys meminfo  + pid 
```

命令

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-25T13:57:37.000

`adb shell dumpsys meminfo [pid]`（私人肮脏+私人清洁）

和

`procrank`（美国）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-26T11:25:57.443

procrank 和 dumpsys meminfo 不是同一个命令，因为 procrank 可以显示更多被意外杀死的线程。

首先你从 Google 获取 procrank、procmem、libpagemap.so

然后像这样推动：

```
adb push procrank /system/xbin 
adb push procmem /system/xbin 
adb push libpagemap.so /system/lib 
```

最后的 ：

```
adb shell chmod 6755 /system/xbin/procrank 
adb shell chmod 6755 /system/xbin/procmem 
adb shell chmod 6755 /system/lib/libpagemap.so 
```

# c# - 从数据库 site.master MVC C# ASP.NET 输出数据

> ID：11357493
> 
> 赞同：0
> 
> 时间：2012-07-06T07:11:51.493
> 
> 标签：c#, sql-server, asp.net-mvc, linq-to-sql

我想要一个变量 option_name 在 site.master 中孵化。

**网站主**

```
<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>
       <% here!!!! %>
        <asp:ContentPlaceHolder ID="TitleContent" runat="server" />
    </title>
</head>
<body>
</body>
</html> 
```

**配置文件**

```
[Table(Name = "Site_Config")]
public class Configs
{
    [Column(IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int ID_option { get; set; }
    [Column]
    public string option_name { get; set; }
    [Column]
    public string option_title { get; set; }
    [Column]
    public string option_value { get; set; }
} 
```

我已经编写了要插入变量值的代码。我知道如何通过“索引”视图进行操作，但我想在所有页面上显示一个值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:24:45.150

您可以将 option_name 参数放入 ViewBag 对象并显示在您的母版页上。[有关在此处](http://weblogs.asp.net/hajan/archive/2010/12/11/viewbag-dynamic-in-asp-net-mvc-3-rc-2.aspx)使用 ViewBag 对象的更多信息

# php - 如何通过使用 Ajax 在 jQuery Mobile 中调用 PHP 函数来处理表单数据？

> ID：11357495
> 
> 赞同：0
> 
> 时间：2012-07-06T07:11:57.497
> 
> 标签：php, jquery, mysql, ajax, forms

我目前没有使用 jQuery Mobile 处理6 页**表单，并且在处理****表单**结果时遇到了一些问题。我想要做的是将所有数据发送到 .php 脚本，以便 .php 脚本可以打印和/或保存到我的数据库。

我经常遇到不断变化的变量名称的问题，因为它们看起来很难操作。也许有人知道*更好的方法来做到这一点*，因为我对 jQuery 和 Ajax 还很陌生。我试图解释我的思维过程是如何在下面的。

有没有人做过类似的事情可以告诉我正确的方向？对于谷歌的内容，我几乎一无所知。也许是相关内容的链接？如果我有一些代码，我会发布任何代码，但我还没有真正找到任何有用的尝试。我的表单是通过 .php 函数生成的，但是保存结果与此相反。

要求：
- 不重新加载页面
- 有可能在保存到数据库之前使用 mysql_real_escape_string
- 提交方法：POST
- 目标数据库表需要 question_id、option_id、user_id、日期和其他（可能的评论）

HTML 伪代码（由 .PHP 生成） - 没有跨度/字段集/标签等

```
 <form action="<!-- What to put here?-->" method="POST" id="questions">
     <input type="radio" name="1[]" value="1"/>
     <input type="radio" name="1[]" value="2"/>
     <input type="radio" name="1[]" value="3"/>

     <input type="checkbox" name="2[]" value="1"/>
     <input type="checkbox" name="2[]" value="2"/>
     <input type="checkbox" name="2[]" value="3"/>
     <input type="checkbox" name="2[]" value="4"/>
     <textarea name="2[]" placeholder="Type here..."></textarea>
     <!-- ... -->
     <a type="submit" href="#results" onclick="formSubmit()" data-role="button">Submit</a>
     </form> 
```

JavaScript 代码：

```
 function formSubmit()
     {
     document.getElementById("questions").submit();
     } 
```

.php 中的所需输出：所有**选中**
的复选框/单选按钮和文本字段的 $answers = ("questionid" => "answerid", "questionid" => "answerid", "questionid => "answertext") ！= ""。

 **编辑：
我发现我的表单可能需要一个 id ，因此特此将其命名为*questions*。
最好的方法可能是通过单击提交按钮调用*.php脚本。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:17:38.337

听起来您在进行简单的 AJAX 提交时需要帮助，但也许这里有一些我错过的隐藏问题，但无论如何我都会回答。

所以你想要在这里看看这个教程[http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

您将 URL 设置为 AJAX 提交到处理程序 PHP 脚本，然后该处理程序将对数据执行您想要的操作并返回状态、成功/失败等。

希望有帮助。**

# iphone - 将 UIViewController 转换为 UIScrollViewController

> ID：11357497
> 
> 赞同：5
> 
> 时间：2012-07-06T07:12:04.843
> 
> 标签：iphone, ipad, uiviewcontroller, uiscrollview, uilabel

我是 iPad 开发者的新手，

我在我的应用程序中制作了一个注册表单，当我在模式下看到我的应用程序时`Portrait`，我可以看到整个表单没有滚动，但是当我在`Landscape`模式下看到相同的表单时，我看不到页面底部的部分，因为滚动应该在那里看到底部。

![s](../Images/5488ae78c5c518360c19c978f82f8490.png)：`.h`当我替换时在我的文件中

```
@interface ReminderPage : UIViewController{
...
...
} 
```

`:UIViewController`和`:UIScrollView`

然后当我`.m`像这样在我的文件中添加标签时，

```
UILabel *Lastpaidlbl = [[[UILabel alloc] initWithFrame:CGRectMake(70 ,400, 130, 50)]autorelease];
    Lastpaidlbl.backgroundColor = [UIColor greenColor];
    Lastpaidlbl.font=[UIFont systemFontOfSize:20];
    Lastpaidlbl.text = @"Lastpaid on :";
    [self.view addSubview:Lastpaidlbl]; 
```

我在**类名类型的对象上找不到最后一行属性视图时出错。** 我无法在我的视图中添加标签。

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-19T12:48:08.147

这个问题似乎真的是在问如何将屏幕上的所有组件放置在 UIScrollView 中，而不是 UIView 中。使用 Xcode 4.6.3，我发现我可以通过简单地实现这一点：

*   在 Interface Builder 中，选择主 UIView 内的所有子视图。
*   选择 Xcode 菜单项“编辑器|嵌入|滚动视图”。

最终结果是在现有的主 UIView 中嵌入了一个新的滚动视图，UIView 的所有以前的子视图现在都作为 UIScrollView 的子视图，具有相同的定位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T07:26:02.043

如果你想用 UIScrollView 替换你的 UIViewController，你将不得不对你的代码进行一些重构。你得到的错误只是一个例子：

语法：

```
[self.view addSubview:Lastpaidlbl]; 
```

如果`self`是 UIViewController 是正确的；既然你把它改成了`UIScrollView`，你现在应该这样做：

```
[self addSubview:Lastpaidlbl]; 
```

您将对代码进行很多类似这样的更改，并且会遇到一些问题。

另一种方法是：

1.  实例化一个 UIScrollView（不是从它派生的）；

2.  将您的 UIView（如您已定义的）添加到滚动视图；

3.  定义`contentSize`滚动视图，以便包含您拥有的整个 UIView。

滚动视图充当现有视图的容器（您将控件添加到滚动视图，然后将滚动视图添加到 self.view）；这样，您可以将其集成到现有控制器中：

```
 1\. UIScrollView* scrollView = <alloc/init>

      2\. [self.view addSubview:scrollView]; (in your  controller)

      3\. [scrollView addSubview:<label>]; (for all of your labels and fields).

      4\. scrollView.contentSize = xxx; 
```

我认为后一种方法会容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:16:29.833

请将您所有的 UIComponents 放到 UIScrollview 中，然后它将开始滚动。

请查看内容大小。请根据设备的方向进行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:24:55.197

你是子类化`UIScrollView`，所以没有，`self.view`因为已经`self`是（滚动视图的）视图。您不需要子类化滚动视图，您可以将组件嵌入到 ivar 滚动视图中并设置它`contentSize`（在您的情况下，您必须在设备处于横向模式时启用滚动）。在界面生成器中，您可以一键嵌入所选元素，编辑器->嵌入->滚动视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T07:40:43.800

首先创建**滚动视图**

```
 UIScrollView *  scr=[[UIScrollView alloc] initWithFrame:CGRectMake(10, 70, 756, 1000)];
    scr.backgroundColor=[UIColor clearColor];
    [ self.view addSubview:scr]; 
```

**第二**

改变 `[self.view addSubview:Lastpaidlbl];`

```
 to 
```

[scr addSubview:Lastpaidlbl];

**第三**

设置**高度**取决于内容

```
UIView *view = nil;

 NSArray *subviews = [scr subviews];

 CGFloat curXLoc = 0;

    for (view in subviews)
    {
        CGRect frame = view.frame;
        curXLoc += (frame.size.height);
    }
       // set the content size so it can be scrollable
    [scr setContentSize:CGSizeMake(756, curXLoc)]; 
```

最后

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Override to allow orientations other than the default portrait orientation.
    if (interfaceOrientation==UIInterfaceOrientationLandscapeLeft || interfaceOrientation==UIInterfaceOrientationLandscapeRight) {
        self.scr.frame = CGRectMake(0, 0, 703,768);    

        } else {
        self.scr.frame = CGRectMake(0, 0, 768, 1024);
        }

    return YES;
} 
```

# javascript - 为什么可以访问“我认为是闭包”中的变量？

> ID：11357499
> 
> 赞同：0
> 
> 时间：2012-07-06T07:12:21.947
> 
> 标签：javascript, closures

我有这样的代码：（在 jsfiddle [http://jsfiddle.net/k6zNm/3/](http://jsfiddle.net/k6zNm/3/)上）

```
(function(){
    Marker = function(opts){
        var marker = this;
        marker.Version = "2012.Jul.06";
        marker.HelloWorld = function(){
            return marker.Version;
        }
    }
})();

window.mymarker = new Marker();
$("div#message").text(mymarker.HelloWorld()); 
```

代码工作正常。但我认为这`(function(){})();`是一个关闭。为什么我可以访问`Marker`它。这不是对全局命名空间的污染吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:14:01.437

您没有使用[`var`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var)with `Marker`，因此它是一个全局变量，而不是作用于函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:18:47.120

您的代码不是闭包。闭包如下所示，您需要将函数返回，注意变量`version`超出了返回的函数范围。

```
var Marker = (function(){
    var version = "2012.Jul.06";
    return function(opts){
        var marker = this;
        marker.Version = version;
        marker.HelloWorld = function(){
            return marker.Version;
        };
    };
})(); 
```

您可以访问`Marker`只是因为它是代码中的全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:15:01.173

因为你还没有把`var`Marker 放在前面，所以它是在全局级别创建的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:22:21.350

闭包只是上层范围。例如：

```
( function() {
    var i = 0;
    ( function() {
        // i is in the closure, the upper scope
    } () );
} () ); 
```

不要忘记 javascript 的唯一作用域是函数作用域。

`(function(){})();`是一个立即调用的函数表达式。

但是，是的，对于你的例子，问题只是你错过了`var`，所以`Marker`是一个全局变量。

# c# - 在生成 XML 时根据父节点的属性附加子节点

> ID：11357502
> 
> 赞同：-3
> 
> 时间：2012-07-06T07:12:28.450
> 
> 标签：c#, xml, append

这是代码。

```
<P type="DOC-2012-001">
    <V n="ID">0</V>
    <V n="TYPE">Page</V>
    <V n="STATUS">0</V>
    <V n="IMAGEFILE"></V>
    <V n="DATAFILE"></V>
    <V n="TEMPLATE IMAGE"></V>
    <V n="MIN_TYPES">0</V>
    <V n="MAX_TYPES">0</V>
    <V n="rules"></V>
    <F type="Remark1" pos="0" min="0" max="0"/>
    <F type="Remark2" pos="0" min="0" max="0"/>
</P>
<F type="Remark1">
    <V n="ID">0</V>
    <V n="TYPE">Field</V>
    <V n="STATUS">0</V>
    <V n="POSITION">0,0,0,0</V>
    <V n="MIN_TYPES">0</V>
    <V n="MAX_TYPES">0</V>
    <V n="ReqConf">8</V>
    <V n="rules">&lt;in&gt;&lt;r id=&quot;1&quot; rs=&quot;9&quot; /&gt;&lt;/in&gt;</V>
</F> 
```

我希望添加`<F>`到其中`<P type=>`一个列表中，其中`<P>`一个列表`<F>`是分开的，但由相同的“类型”引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:18:48.863

像这样的东西：

```
XDocument doc = new XDocument("file.xml");
var pTypeOne = doc.Descendants("P").Single(e => e.Attribute("type").Value == "1");
pTypeOne.Add(new XElement("X1")); 
```

# asp.net - 从一个Gridview行asp.net C#下载多个文件

> ID：11357506
> 
> 赞同：1
> 
> 时间：2012-07-06T07:12:46.143
> 
> 标签：asp.net

我有一个从gridview 中下载文件的应用程序。当单个文件附加到一行时，我可以轻松下载文件，但是当我尝试在一行中包含多个文件时，我的应用程序无法再下载。有人可以建议我可以做到这一点的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:01:08.673

当用户单击并下载文件时，您可以提供此 javacript 命令

```
window.location = "FileForDownload.jpg"; 
```

如果你赢得了让用户能够下载多个文件的能力，那就更复杂了。

首先，您必须知道浏览器会提醒该操作并停止它，直到用户接受多次下载。

现在您可以轻松地说您可以发送许多文件，`window.location`但是如果发生这种情况而没有同步，那么一个文件可以停止另一个文件。此处的同步[可以通过这种 cookie 技巧来完成，](https://stackoverflow.com/a/4168965/159270)并且只有在第一次下载开始（或结束）之后才给命令第二次下载。

另一种解决方案是调用`window.open("FileForDownload.jpg");`不需要同步的多次（当然有定时器延迟）。

这是javascript中的一般想法，但需要一些改进才能延迟打开文件。

```
function DownloadAllFiles()
{
    for (var i=0; i< arguments.length; i++){    
        window.open( "http://www.domain.com/downloadpath/" + arguments[i]);)
    }
}

// example of call
DownloadAllFiles("File1.zip","File2.zip","File3.zip"); 
```

# xml - 仅重命名第一个子元素

> ID：11357507
> 
> 赞同：1
> 
> 时间：2012-07-06T07:12:49.030
> 
> 标签：xml, xslt

我想用 XSL 选择并重命名第一个子元素。但它并不是真正的第一个孩子，它更像是第一个孩子的第一个节点。

XML 如下所示：

```
<Root><Story>
 <CL>
  <BK>
   <name>...</name>
   <Address>...</Address>
  </BK> 
  <BK>
   <name>...</name>
   <Address>...</Address>
 </BK> 
 <BK>
   <name>...</name>
   <Address>...</Address>
  </BK> 
 </CL>
 <CL>
  <BK>
   <name>...</name>
   <Address>...</Address>
  </BK> 
  <BK>
   <name>...</name>
   <Address>...</Address>
 </BK> 
 <BK>
   <name>...</name>
   <Address>...</Address>
  </BK> 
 </CL>
</Story></Root> 
```

我需要重命名`<name>`后的第一个元素`<CL>`，例如`<name1>`同时保留其他`<name>`元素：

```
<Root><Story>
 <CL>
  <BK>
   <name1>...</name1>
   <Address>...</Address>
  </BK> 
  <BK>
   <name>...</name>
   <Address>...</Address>
 </BK> 
 <BK>
   <name>...</name>
   <Address>...</Address>
  </BK> 
 </CL>
 <CL>
  <BK>
   <name1>...</name1>
   <Address>...</Address>
  </BK> 
  <BK>
   <name>...</name>
   <Address>...</Address>
 </BK> 
 <BK>
   <name>...</name>
   <Address>...</Address>
  </BK> 
 </CL>
</Story></Root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:23:12.733

参考您的评论，不，您不应该使用 WHEN/OTHERWISE。覆盖模板是要走的路。

以下 XSLT 1.0 样式表是对您的规则“我需要重命名之后的第一个元素，例如在保持其他元素不变的情况下”的简单解释，而不假设输入文档中的任何特定结构......

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="name[(preceding::name | ancestor::CL)[last()]/self::CL]">
 <name1>
  <xsl:apply-templates select="@*|node()"/>
 </name1>
</xsl:template>

</xsl:stylesheet> 
```

## 笔记

如果您可以使用 XSLT 2.0 或对输入文档的结构做出某些保证，将会有更简单的解决方案。如果其中任何一个条件为真，请更新您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:16:13.250

假设您的问题是关于如何选择正确的元素（而不是关于如何在找到它们后替换它们），以下 XPath 表达式将选择`<name>`每个元素的第一个子元素中的第一个`<CL>`元素：

```
/Root/Story/CL/*[1]/name[1] 
```

请注意，如何在 下`<CL>`选择任意元素 ( `*`)。此选择仅限于其父`<CL>`元素中的第一个此类元素`[1]`。

**更新：**嵌入到 XSLT 中，然后可以使用以下模板重命名该元素：

```
<xsl:template match="/Root/Story/CL/*[1]/name[1]">
    <name1><xsl:apply-templates select="node()|@*"/></name1>
</xsl:template> 
```

**更新 2：**限制选择第一个`<name>`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:04:48.130

**这是一个完整而简短的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="BK[1]/name">
  <name1>
   <xsl:apply-templates select="@*|node()"/>
  </name1>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Root><Story>
     <CL>
      <BK>
       <name>...</name>
       <Address>...</Address>
      </BK>
      <BK>
       <name>...</name>
       <Address>...</Address>
     </BK>
     <BK>
       <name>...</name>
       <Address>...</Address>
      </BK>
     </CL>
     <CL>
      <BK>
       <name>...</name>
       <Address>...</Address>
      </BK>
      <BK>
       <name>...</name>
       <Address>...</Address>
     </BK>
     <BK>
       <name>...</name>
       <Address>...</Address>
      </BK>
     </CL>
</Story></Root> 
```

**产生了想要的正确结果：**

```
<Root>
   <Story>
      <CL>
         <BK>
            <name1>...</name1>
            <Address>...</Address>
         </BK>
         <BK>
            <name>...</name>
            <Address>...</Address>
         </BK>
         <BK>
            <name>...</name>
            <Address>...</Address>
         </BK>
      </CL>
      <CL>
         <BK>
            <name1>...</name1>
            <Address>...</Address>
         </BK>
         <BK>
            <name>...</name>
            <Address>...</Address>
         </BK>
         <BK>
            <name>...</name>
            <Address>...</Address>
         </BK>
      </CL>
   </Story>
</Root> 
```

**说明**：

实际上想要的是重命名具有`name`子`BK`元素的任何元素（在本例中为`CL`）的第一个元素的子元素`BK`。

1.  **[身份规则](http://web.archive.org/web/20081229160200/http://www.dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制每个匹配的节点（为其选择执行）。

2.  标识模板被单个模板覆盖，该模板匹配作为其父元素的第一个子元素`name`的子元素的任何元素。`BK`这里`name1`生成了一个元素，它的属性和主体通过应用模板被复制而不改变（因为它们被唯一的另一个模板匹配和处理——身份规则）。

# rabbitmq - rabbitMQ如何实现单消费者多队列模型

> ID：11357512
> 
> 赞同：13
> 
> 时间：2012-07-06T07:13:10.347
> 
> 标签：rabbitmq

![在此处输入图像描述](../Images/0f8698bf1de18eed8e7f17ff38520494.png)

我发现这张图片与我的商业模式非常相似。我需要将消息拆分到某个队列。对于一些繁重的工作。我可以为他们添加更多的工作线程。但对于一些没有太多繁重的工作。我可以让单个消费者订阅他们的消息。但是如何在rabbitMQ中做到这一点。通过他们的文件。我刚刚发现了单队列多消费者模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-19T09:49:12.847

1.  您可以将多个工作人员添加到队列中
2.  可以有多个队列绑定到一个交换。

在 RabbitMQ 中，生产者总是将消息发送到交换器。所以，在你的情况下，我希望只有一次交换就足够了。如果你想在消费者端进行负载均衡，你有上面说的两个选项。

你也可以阅读我的文章： [https ://techietweak.wordpress.com/2015/08/14/rabbitmq-a-cloud-based-message-orientation-middleware/](https://techietweak.wordpress.com/2015/08/14/rabbitmq-a-cloud-based-message-oriented-middleware/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-04T02:32:09.863

RabbitMQ 有一个非常灵活的模型，可以实现各种各样的路由场景。

> 1.  我需要将消息拆分到某个队列。对于一些繁重的工作。我可以为他们添加更多的工作线程。

是的，这是通过直接交换支持的。使用与队列名称相同的路由键发布消息。为方便起见，假设您使用完全限定的对象名称（例如`MyApp.Objects.DataTypeOne`）。您需要做的就是为这个队列订阅多个消费进程，RabbitMQ 将使用循环方法进行负载平衡。

> 2.  但对于一些没有太多繁重的工作。我可以让单个消费者订阅他们的消息。

是的，你也可以这样做。与上一段相同的过程。只是不要附加多个消费进程。

> 我发现这张图片与我的商业模式非常相似。

该图不是很有用，因为它缺少有关正在发布的消息类型的信息。从这个意义上说，它只是一个互连图。有趣的行是将队列连接到交换器的行，因为这是您通过[Queue Bindings](https://www.cloudamqp.com/blog/2015-09-03-part4-rabbitmq-for-beginners-exchanges-routing-keys-bindings.html)在 RabbitMQ 中指定的。您也可以将交换相互绑定，但这比我们可能需要做的要远一些。

作为 RabbitMQ/AMQP 系统的用户，图表上的所有其他内容都完全在您的控制之下。您可以创建任意数量的发布者，并拥有任意数量的消费进程，每个进程从任意数量的队列中消费。没有硬性限制和快速限制，尽管您可能需要考虑一些实际方面来确保您的系统是可维护的。

# binding - 使用 IValue 转换器将文本值转换为整数

> ID：11357519
> 
> 赞同：1
> 
> 时间：2012-07-06T07:13:57.043
> 
> 标签：binding, silverlight-5.0, ivalueconverter

在我的应用程序中，我将整数绑定到 gridview 列。

场景：在gridview的单元格编辑模式下，如果用户键入一些字符串值，如A+，A。我希望文本自动将其转换为整数值。

我有一个集合，其中每个字符串值都将分配一个整数。

在转换器中，我想检查并显示其相应的整数值。

可以使用 IValueConverter 来完成吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:07:06.037

是的，在值转换器中这样做是有意义的。

开箱即用，.NET 不提供任何类或方法来将表达式解析为其数值等价物，但您应该能够使用数值解析库，例如[NCalc](http://ncalc.codeplex.com/)或[Simple Math Parser](http://simplemathparser.codeplex.com/)来“完成工作”为你。

老实说，我不知道这些库是否可以立即用于 Silverlight，但如果不是，那么可能值得自己将它们移植到 SL，而不是编写自己的数学解析器。

# mysql - 如何在 Mac 上永久激活非管理员帐户的 XAMPP 的 apache 和 mysql

> ID：11357525
> 
> 赞同：1
> 
> 时间：2012-07-06T07:14:23.643
> 
> 标签：mysql, macos, apache, xampp

我有 Mac 系统`os x10.6.8`及以上。已安装`XAMPP`，一切正常。

只是每次我们关闭时，我们再次必须从 xampp 控制面板启动 apache 和 mysql。

为此，由于用户登录不是管理员，我们必须每天和每天都打电话给我们的管理员登录。

所以，我想知道是否有任何方法可以为 Mac 系统永久启动 apache 和 mysql，只使用一次管理员密码。并在需要时再次使用 amdinistrator 密码关闭并停止它。

对此的任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:18:32.903

找到了一个包含一些信息的链接，不知道它是否适用于你的情况，但值得一试

[http://www.softaculous.com/board/index.php?tid=3277&title=Start_APACHE_and_MYSQL_on_mac_os_x_boot_without_admin_password](http://www.softaculous.com/board/index.php?tid=3277&title=Start_APACHE_and_MYSQL_on_mac_os_x_boot_without_admin_password)

# android - 对于某些屏幕尺寸，Android 自定义视图不会扩展到全屏

> ID：11357531
> 
> 赞同：0
> 
> 时间：2012-07-06T07:14:52.130
> 
> 标签：android, fullscreen, android-linearlayout, custom-view

我希望我的应用程序使用 android 拉伸功能在所有屏幕尺寸上全屏运行我只使用一种 XML 布局。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <com.nwm.CD.CCanvas_480x320
         android:layout_weight ="1"
         android:fillViewport="true"
         android:id="@+id/cc_320x480"
         android:layout_width="match_parent"
         android:layout_height="match_parent"/>
</LinearLayout> 
```

但是当我在 WVGA00(480x800) 上运行应用程序时，最右边会出现一个黑条，宽度约为 80 像素，并且应用程序不会填满整个屏幕。

类扩展视图

```
public class CC_480x320 extends View implements Runnable{

    public CricCanvas_480x320(Context context, AttributeSet attrs) {
         super(context, attrs);
     this.context = (CricDhamaka)context;
    } 
```

关于如何使其全屏运行的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:24:01.500

```
Display displayDevice=getWindowManager().getDefaultDisplay();
        int wid=displayDevice.getWidth();
        int hit=displayDevice.getHeight();
LayoutParams lp=new LayoutParams(wid, hit);

yourview.setlayoutParams(lp);

have you tried this ??? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:07:19.207

math_parent 应该在根布局参数中使用，而不是在子布局参数中。更喜欢在您的子视图中使用 fill_parent。

我以前没有使用过画布。但我猜它的工作原理类似于 ImageView。如果图像的实际像素小于屏幕的像素，ImageViews 实际上不会渲染到全屏。如果是这种情况，那么你必须使用缩放，或者适合画布的东西。

此外，如果您尝试查看全屏而不是画布，而是整个应用程序尝试在清单中更新您的主题。在应用程序部分：

```
<application android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
... // removes the title bar of every activity in your application and makes it full screen no battery no signal etc
</application> 
```

更新：

根据您的屏幕截图是缩放效果。更改画布的缩放效果。尝试搜索如何使画布的比例适合您视图的布局参数。删除您的体重属性并先进行测试

问题：您是否在 layout.xml 中添加了其他内容？比如风景什么的？

# iphone - When to observe model data when using Storyboards

> ID：11357536
> 
> 赞同：1
> 
> 时间：2012-07-06T07:15:14.953
> 
> 标签：iphone, objective-c, ios, cocoa-touch, key-value-observing

Let's assume I have an address book App. So from the address list I now push to a detail view like so:

1.  User taps on cell in the master list
2.  Segue `showDetail` is invoked
3.  In `prepareForSegue:` I set the model object `contact` of my `ContactDetailViewController`
4.  `viewWillAppear` I add an observer for `self.contact`
5.  So now when the `contact` object changes in the background, the detail view will automatically be updated.
6.  In `viewWillDisappear` I remove this observer (I guess it's clean because it is symetrical).

However, `viewWillAppear:` is called **after** I set the contact. So should I setup the KVO differently or simply call my `updateView` function in `viewWillAppear` which is a bit stupid because I want to get rid of those calls with KVO in the first place.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T12:25:25.597

When you call `addObserver:...` you want to include the option `NSKeyValueObservingOptionInitial`. This will cause KVO to send the equivalent of a `didChangeValueForKey:` notification (i.e. an "Initial" notification) in the same call that adds the observation. This should cause your view to update at that time.

# objective-c - 淡入淡出动画到uilabel

> ID：11357541
> 
> 赞同：6
> 
> 时间：2012-07-06T07:16:07.897
> 
> 标签：objective-c, xcode, animation, uilabel

我有一个要淡入然后淡出的标签。这是我的代码：

```
-(void) fadein
{
    scoreLabel.alpha = 0;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
    [UIView setAnimationDuration:2];
    scoreLabel.alpha = 1;
    [UIView commitAnimations];
    [UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
}

-(void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished    context:(void *)context {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2];
 scoreLabel.alpha = 0;
[UIView commitAnimations];
} 
```

从这段代码中我得到了这种情况：我的标签淡入，然后我看不到淡出动画。我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T07:24:33.970

```
-(void) fadein
{
    scoreLabel.alpha = 0;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];

    //don't forget to add delegate.....
    [UIView setAnimationDelegate:self];

    [UIView setAnimationDuration:2];
    scoreLabel.alpha = 1;

    //also call this before commit animations......
    [UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
    [UIView commitAnimations];
}

-(void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished    context:(void *)context {
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2];
    scoreLabel.alpha = 0;
    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:19:30.570

调用`setAnimationDidStopSelector`应该在提交动画之前：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
[UIView setAnimationDuration:2];
[UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];

scoreLabel.alpha = 1;

[UIView commitAnimations]; 
```

# scripting - 停止常规脚本执行

> ID：11357550
> 
> 赞同：2
> 
> 时间：2012-07-06T07:16:53.490
> 
> 标签：scripting, groovy

我有一个使用 GroovyShell 运行的 groovy 脚本文件。如何停止执行脚本？我尝试将其放入新线程并稍后中断线程，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:07:23.090

去年这里还有另一个问题问类似的事情：

[停止执行 Groovy 脚本](https://stackoverflow.com/questions/7035609/stopping-the-execution-of-a-groovy-script)

还有一个[ThreadInterrupt AST 转换](http://groovy.codehaus.org/gapi/groovy/transform/ThreadInterrupt.html)可能会有所帮助。另请参阅[TimedInterrupt 转换](http://groovy.codehaus.org/gapi/groovy/transform/TimedInterrupt.html)

# wpf - WPF 将代码中的动态控件绑定到 ViewModel

> ID：11357554
> 
> 赞同：1
> 
> 时间：2012-07-06T07:17:34.253
> 
> 标签：wpf, dynamic, controls, code-behind

我正在 WPF 中构建一个自定义 UserControl，它具有关联的 ViewModel。我还想在后面的代码中动态制作控件。但是现在我在将生成的控件与 ViewModel 属性绑定时遇到了问题。我的代码是：

```
<UserControl x:Class="SVT.Teste.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
             DataContext="UserControl1ViewModel">
    <Grid Name="GridContainer">
    </Grid>
</UserControl> 
```

和后面的代码：

```
 public UserControl1()
    {
        InitializeComponent();
        System.Windows.Controls.Button newBtn = new Button();
        newBtn.SetBinding(Button.ContentProperty, new Binding("Test"));
        GridContainer.Children.Add(newBtn);
    }

    public class UserControl1ViewModel
    {
        private string test = "ola";

        public string Test
        {
            get { return test; }
        }
    } 
```

当我运行它时，我得到：

> “System.Windows.Data 错误：40：BindingExpression 路径错误：在 'object' ''String' (HashCode=-946585093) 上找不到 'Test' 属性。BindingExpression:Path=Test; DataItem='String' (HashCode= -946585093); 目标元素是'Button' (Name=''); 目标属性是'Content' (类型'Object')"

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:26:33.233

您正在将`DataContext`属性设置`UserControl1`为字符串而不是视图模型实例。

你需要做这样的事情：

```
<UserControl xmlns:local="clr-namespace:NAMESPACE_WHERE_VIEWMODEL_IS_DEFINED">
    <UserControl.DataContext>
        <local:UserControl1ViewModel />
    </UserControl.DataContext>
    <!-- unrelated code omitted -->
</UserControl> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:32:52.007

您将 DataContext 设置为类型，而不是具有属性的实例。在您创建用户控件的方法中：

```
 public UserControl1()
        {
            InitializeComponent();
            System.Windows.Controls.Button newBtn = new Button();
            newBtn.SetBinding(Button.ContentProperty, new Binding("Test"));
            GridContainer.Children.Add(newBtn);
            **DataContext = new UserControl1ViewModel();**
        } 
```

你还有更多的工作要做。您拥有它的方式不会发生通知或更新。实现`INotifyPropertyChanged`接口（on `UserControlViewModel`）。并删除类型`DataContext`中的设置`XAML`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:23:46.933

尝试使用此绑定

```
Binding MyBinding = new Binding();
MyBinding.Path = new PropertyPath("Test");
newBtn.DataContext = new UserControl1ViewModel(); //or MyBinding.Source = new //UserControl1ViewModel();

newBtn.SetBinding(Button.ContentProperty, MyBinding); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:40:32.783

max 是对的，但我还有一个问题。当您有要绑定的 viemwodel 时，为什么要创建用户控件动态？对我来说没有意义。让我解释：

如果你有一个视图模型——你知道应该如何渲染这个视图模型以及绑定是什么。所以你可以为这个视图模型创建一个用户控件/视图

MyUserControl1View.xaml

```
<UserControl>
 <Grid>
   <Button Content="{Binding Test}"/>
   <!-- more controls and binding if the viewmodel expose more-->
 </Grid>
</UserControl> 
```

所以你现在拥有的是你的视图模型的表示。它们没有连接，但您的视图模型应该看起来像这样并且绑定已设置。到目前为止，根本没有设置任何数据上下文。

您现在要做的就是采用视图模型优先方法并使用数据模板。

让我们在您的主窗口中假设以下内容

```
<Window>
 <Window.Resources>
  <DataTemplate Datatype="{x:Type local:Usercontrol1viewmodel}">
    <view:MyUserControl1View/>
  </DataTemplate>
 </Window.Resources> 
```

现在 wpf 知道如何渲染 Usercontrol1viewmodel。

在您处理 Usercontrol1viewmodel 的主窗口视图模型中再迈出一步。

```
 public Usercontrol1viewmodel MyWhatEver {get;set;} 
```

如果将此属性绑定到 contentpresenter，您将看到 wpf 的魔力；）

```
 <ContentPresenter Content="{Binding MyWhatEver}"/> 
```

现在您在 contentpresenter 中看到了 MyUserControl1View，不需要动态视图代码。只需使用您的视图模型即可。

ps：随时编辑我的糟糕英语。

# r - R：格子中的背景或插入的图像和文本

> ID：11357555
> 
> 赞同：1
> 
> 时间：2012-07-06T07:17:35.027
> 
> 标签：r, lattice

我想在图像上插入水印`lattice`。在`ggplot2`中，我只是使用`annotate`或`annotation_custom`选项将徽标图像和文本放置在绘图一角的徽标下方。中是否有类似的可能性`lattice`？或者作为替代方案 - 是否可以使用图像作为情节的背景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:47:53.267

几年前，Deepayan Sarkar 在 Rhelp 上为类似的问题提供了以下内容：

```
barchart(variety ~ yield | site, data = barley, groups = year, layout = c(3,1), 
         page = function(n) { 
              grid.text(label = "Privileged and Confidential \nDRAFT", 
              x = unit(0.01, "npc"),
              y = unit(0.95, "npc"), 
              just = c("left", "center")) }) 
```

显然，您还需要使用网格图形函数来放置徽标，（但您还没有提供一个可以使用的。下一个代码的前两行可以在今天引用的@baptiste[博客页面](http://blog.ggplot2.org/post/23537012922/adding-watermarks-to-plots)上找到。）第二个有两行改编自[Paul Murrell](http://journal.r-project.org/archive/2011-1/RJournal_2011-1_Murrell.pdf)去年在 Rseek.org 上找到的“R Journal”文章：

```
library(png)
m <- readPNG(system.file("img", "Rlogo.png", package="png"), FALSE)
rimg <- as.raster(m)
grid.raster(rimg, x=.05, y=.9, just="top", width=.1) 
```

![在此处输入图像描述](../Images/9e81fff90d3d02f90b8bc254d58dd865.png)

# wordpress - Wordpress - 检查当前页面是否有给定标签 ID

> ID：11357556
> 
> 赞同：0
> 
> 时间：2012-07-06T07:17:39.217
> 
> 标签：wordpress, wordpress-theming

我正在使用 WordPress 自定义分类法。

如何检查当前页面是否有`tag_ID = "XXX"`？

如果这有任何帮助，管理页面上的 URL 如下所示：

```
http://localhost/website/wp-admin/edit-tags.php?action=edit&taxonomy=company&ta‌g_ID=13&post_type=news 
```

当前使用但不起作用的代码：

```
if (has_post_thumbnail()) {

    the_post_thumbnail();

} else {

    if (is_object_in_term($post - > ID, 'post_tag', '13')) {
        // ID 13
    }
    if (is_object_in_term($post - > ID, 'post_tag', '12')) {
        // ID 12
    }
    if (is_object_in_term($post - > ID, 'post_tag', '14')) {
        // ID 14
    }

} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:39:30.873

可能这可能有用（对于管理员中的给定网址）

```
global $pagenow;
if ($pagenow == 'edit-tags' && $_GET['ta‌g_ID'] == '123') // 123 is for example
{
    //
} 
```

**更新：**对于前端

```
$tag_id=get_query_var('tag_id');
if($tag_id && $tag_id=='123') // 123 is for example
{
    // code
} 
```

# android - android从当前位置nereby距离json的地方

> ID：11357557
> 
> 赞同：0
> 
> 时间：2012-07-06T07:17:51.507
> 
> 标签：android, json, google-maps

我开发了一个带有列表视图的地图视图，我需要将附近的地方（1 公里内）显示在列表中。

GeoP = lat，从 gps 获取的当前用户坐标的长。

我怎样才能做到这一点？

我想我应该得到当前位置，即 GeoP 和 Json 应该根据每个位置之间的距离进行排序。如何编码？

```
public class MappingActivity extends MapActivity {

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in
                                                                        // Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 10000; // in
                                                                    // Milliseconds

    protected LocationManager locationManager;

    Intent intent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapV = (MapView) findViewById(R.id.mapview);
        checkin = (Button) findViewById(R.id.check);
        addplace = (Button) findViewById(R.id.addp);
        result = (TextView) findViewById(R.id.result);
        ListView list = (ListView) findViewById(R.id.list);

        intent = getIntent();

        Naming = intent.getStringExtra("name1");

        result.setText(Naming);

        overlaylist = mapV.getOverlays();

        d = getResources().getDrawable(R.drawable.point);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, new MyLocationListener());

        Location location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location != null) {

            lat = location.getLatitude();
            lng = location.getLongitude();

        }

        Button check = (Button) findViewById(R.id.check);
        Button addplace = (Button) findViewById(R.id.addp);
        Button nearby = (Button) findViewById(R.id.point);

        check.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(
                        "http://capturehouse.lk/authenticate_user.php");

                try {

                    String Latitude = String.valueOf(lat);
                    String Longtitude = String.valueOf(lng);
                    String Name = String.valueOf(Naming);

                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                            2);
                    nameValuePairs
                            .add(new BasicNameValuePair("Lati", Latitude));
                    nameValuePairs.add(new BasicNameValuePair("Longi",
                            Longtitude));
                    nameValuePairs.add(new BasicNameValuePair("Name", Name));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    // Execute HTTP Post Request
                    Log.w("SENCIDE", "Execute HTTP Post Request");
                    HttpResponse response = httpclient.execute(httppost);

                    String str = inputStreamToString(
                            response.getEntity().getContent()).toString();
                    Log.w("SENCIDE", str);

                    if (str.toString().equalsIgnoreCase("True")) {
                        Log.w("SENCIDE", "TRUE");
                        Context context = getApplicationContext();
                        CharSequence text = "You Are Checked-In";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text, duration);
                        toast.show();
                    } else {
                        Log.w("SENCIDE", "FALSE");
                        Context context = getApplicationContext();
                        CharSequence text = "Please Try Again.";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text, duration);
                        toast.show();
                    }

                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }

            private Object inputStreamToString(InputStream is) {
                // TODO Auto-generated method stub
                String line = "";
                StringBuilder total = new StringBuilder();
                // Wrap a BufferedReader around the InputStream
                BufferedReader rd = new BufferedReader(
                        new InputStreamReader(is));
                // Read response until the end
                try {
                    while ((line = rd.readLine()) != null) {
                        total.append(line);
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
                // Return full string
                return total;
            }
        });

        addplace.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                // TextView result = (TextView) findViewById(R.id.result);
                result.setText("Added the Plce");
            }
        });
        nearby.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                // TextView result = (TextView) findViewById(R.id.result);
                result.setText("Nearby the Plce");
            }
        });
        // json query
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser
                .getJSONFromUrl("http://api.androidhive.info/contacts/");

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray(TAG_CONTACTS);

            // looping through All Contacts
            for (int i = 0; i < contacts.length(); i++) {
                JSONObject c = contacts.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String email = c.getString(TAG_EMAIL);

                // Phone number is agin JSON Object
                JSONObject phone = c.getJSONObject(TAG_PHONE);
                String mobile = phone.getString(TAG_PHONE_MOBILE);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_EMAIL, email);
                map.put(TAG_PHONE_MOBILE, mobile);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item, new String[] { TAG_NAME, TAG_EMAIL,
                        TAG_PHONE_MOBILE }, new int[] { R.id.name, R.id.email,
                        R.id.mobile });
        list.setAdapter(adapter);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    public class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            String message = String.format("You are Here");

            Toast.makeText(MappingActivity.this, message, Toast.LENGTH_LONG)
                    .show();

            GeoP = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));

            mControl = mapV.getController();
            mControl.animateTo(GeoP);
            mControl.setZoom(19);

            MapOverlay mapOverlay = new MapOverlay();
            List<Overlay> listOfOverlays = mapV.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);
            mapV.invalidate();

        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }
} 
```

# ruby-on-rails - passenger-install-apache2-module 在一台服务器上运行多个应用程序。有什么不对

> ID：11357564
> 
> 赞同：0
> 
> 时间：2012-07-06T07:18:32.740
> 
> 标签：ruby-on-rails, ruby, apache2, passenger

我已经使用passenger-install-apache2-module 配置了一个Ubuntu 服务器，这样我就可以在一台服务器上运行多个rails 应用程序。我有一个正在运行的测试应用程序，它使用 webbrick 运行良好，但是当我重新启动 apache 服务器时，我收到“我们很抱歉，但出了点问题”错误。当我在 /public/index.html 中放置一个文件时，它呈现得很好，但是一旦应用程序依赖 rails 来生成内容，我就会得到同样的错误。

我在哪里可以找到日志以便了解更多信息？或者有人有更好的主意吗？

更新：我修改了日志文件，现在在生产日志中得到这个错误：

```
Started GET "/users" for 77.100.43.95 at 2012-07-06 07:38:48 +0000
Processing by UsersController#index as HTML
Rendered users/index.html.erb within layouts/application (4.2ms)
Completed 500 Internal Server Error in 115ms

ActionView::Template::Error (application.css isn't precompiled):
    2: <html>
    3: <head>
    4:   <title>Max</title>
    5:   <%= stylesheet_link_tag    "application", :media => "all" %>
    6:   <%= javascript_include_tag "application" %>
    7:   <%= csrf_meta_tags %>
    8: </head>
  app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___1047297680506537616_22545860'
  app/controllers/users_controller.rb:7:in `index' 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:52:00.710

尝试运行

```
bundle exec rake assets:precompile 
```

从应用程序目录中。这应该可以修复错误。

# yii - 模块索引页面重定向在 YII 中不起作用

> ID：11357566
> 
> 赞同：0
> 
> 时间：2012-07-06T07:18:46.617
> 
> 标签：yii, url-routing

我是 yii framewrok 的新用户。我在 YII 框架的管理端（在管理文件夹中）的名称优惠券中添加了一个新模块。默认索引页面加载正常，位于`app/desig/admin/default/site/home.php`

但是当我尝试访问时`app/desig/admin/default/coupon/index.php`。它不会重定向到该页面。加载空白页。

什么问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:18:09.603

您是否在 config/main.php 中的配置数组字段中指定了`coupon`模块？`modules`您是否在现场导入了模型类`import`？做这两个应该使它工作。

# java - 在线应用程序创建器如何工作？是否有任何示例源代码可供查看？

> ID：11357576
> 
> 赞同：2
> 
> 时间：2012-07-06T07:19:28.770
> 
> 标签：java, android, iphone

有很多在线创建应用程序的解决方案，例如[http://www.theappbuilder.com](http://www.theappbuilder.com)。

他们如何构建这些应用程序？是否有任何示例源代码可供查看，因为这些工具遍布互联网？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:26:31.707

此应用程序构建器使用 Webview，设置为全屏显示您可以使用此工具制作的 HTML5 页面。我认为可能会看到一些代码。这些工具对一些简单的应用程序很有帮助，如果你想完全控制并使事情变得更复杂，你将需要使用 Android-sdk 或其他一些混合 sdk-s（appcelerator、corona-sdk、adobe flash buider 等） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-14T04:54:25.690

你可以使用 Ionic，我现在有类似的项目，因为 ionic 是在 angular 和 html 之上构建的，并`/www`为你生成文件夹，如果你想要它，你可以简单地使用命令`ionic cordova build android`转换为 apk在服务器上运行，您可以使用 php 命令调用这些`exec()`命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:00:08.490

在上面的评论中，您询问了开源替代方案。看看像PhoneGap这样的东西。它足够接近，应该让您了解一般方法。

# c# - 将 SQL Server 表项更改为大写（由 c# 中的 vb.net 输入）

> ID：11357586
> 
> 赞同：1
> 
> 时间：2012-07-06T07:19:46.857
> 
> 标签：c#, sql-server, vb.net

我正在使用 sql server 用于数据库和 Visual Studio 用于在表中插入数据，但我希望在输入数据库之前将输入的条目更改为大写。使用哪种语法。告诉我我可以在这个声明中做出哪些改变：

```
SqlCommand cmd = new SqlCommand("insert into student values('" + TextBox1.Text + "','" + TextBox2.Text + "','" + TextBox3.Text + "')", con); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:22:43.283

1.  Google for SQL Injection，并将其更改为参数化查询

2.  TextBox.Text.ToUpper 方法之一：

```
SqlParameter parameter = new SqlParameter("@Param1", TextBox1.Text.ToUpper()
INSERT INTO ... VALUES(@Param1, @Param2,...) 
```

或使用 SQL UPPER 函数（SQL Server） - 它在其他一些数据库中是 UCASE：

```
INSERT INTO ... VALUES( UPPER(@Param1), UPPER(@Param2),...) 
```

如果您关心国际化，请注意`ToUpper()`没有参数将使用当前文化 ( `CultureInfo.CurrentCulture`) 来决定如何转换为大写。SQL Server 的 UPPER 函数将取决于数据库排序规则，因此可能会给出不同的结果。谷歌搜索“Turkish I problem”以了解这可能导致的问题类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:22:58.783

```
SqlCommand cmd = new SqlCommand(
"insert into student 
values('" + TextBox1.Text.ToUpper() + "','" 
          + TextBox2.Text.ToUpper() + "','" 
          + TextBox3.Text.ToUpper() + "')", con); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:22:16.740

使用`String.ToUpper();` 这样的东西

```
 SqlCommand cmd = new SqlCommand(
"insert into student values('" + 
 TextBox1.Text.ToUpper() + "','" + 
 TextBox2.Text.ToUpper() + "','" + 
 TextBox3.Text.ToUpper() + "')",
 con); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:22:49.627

这是c#

```
SqlCommand cmd = new SqlCommand("insert into student values('" + TextBox1.Text.ToUpper() + "','" + TextBox2.Text.ToUpper() + "','" + TextBox3.Text.ToUpper() + "')", con); 
cmd.ExecuteNonQuery(); 
```

检查 sql 注入，并使用 SqlParameters。

# jquery - jQuery dataTables - 停止通配符搜索数据表中的选择框

> ID：11357593
> 
> 赞同：0
> 
> 时间：2012-07-06T07:20:18.523
> 
> 标签：jquery, search, drop-down-menu, datatables, jquery-datatables

我正在通过数据表插件在我的 php 代码中实现过滤器和排序选项。对于输入类型字段，我正在设置通配符搜索，但我不希望选择框的通配符搜索。在我的选择框中，有两个值是“活动”和“非活动”。那么如何做到这一点。请帮我。我的代码是这样的：

```
$("#example").dataTable().columnFilter({
    aoColumns: [
        null,
        null,
        null,
        null,
        null,
        null,
        null,
        {
            type: "select",
            values: ["Active","Inactive"]
        },
        null,
        null
    ]              
});

function fnCreateSelect( aData )
{
    var r='<select><option value=""></option>', i, iLen=aData.length;
    for ( i=0 ; i<iLen ; i++ )
    {
        r += '<option value="'+aData[i]+'">'+aData[i]+'</option>';
    }
    return r+'</select>';
}

function fnFilterColumn ( i )
{

    $('#example').dataTable().fnFilter( 
        $("#col"+(i+1)+"_filter").val(),
        i,true
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T05:19:44.163

```
$(document).ready(function() {
    $('#example').DataTable( {
        initComplete: function () {
            this.api().columns().every( function () {
                var column = this;
                var select = $('<select><option value=""></option></select>')
                    .appendTo( $(column.footer()).empty() )
                    .on( 'change', function () {
                        var val = $.fn.dataTable.util.escapeRegex(
                            $(this).val()
                        );

                        column
                            .search( val ? '^'+val+'$' : '', true, false )
                            .draw();
                    } );

                column.data().unique().sort().each( function ( d, j ) {
                    select.append( '<option value="'+d+'">'+d+'</option>' )
                } );
            } );
        }
    } );
} ); 
```

所有列的选择框

# c# - 没有文件名的 EWS 文件附件

> ID：11357595
> 
> 赞同：3
> 
> 时间：2012-07-06T07:20:41.237
> 
> 标签：c#, exchangewebservices

我正在使用 EWS 接收邮件并将它们导入我们的 CRM 系统。在 99% 的邮件中，一切正常。但不，我有问题，一些文件附件不告诉我文件名。

这是我的代码示例。

```
Item item = Item.Bind("id"); //id should be replaced by a leagle id

PropertySet ps = PropertyHelper.GetFullLoadItemPropertySet(m_Item.GetType()); 
//the propertyset is a manually created set with all relevant properties.

item.Load(ps)M

foreach (Attachment att in item.Attachments)
{                                    {
    FileAttachment fa = att as FileAttachment;
    if (fa != null)
    {
        fa.Load();
        if (string.IsNullOrWhiteSpace(fa.FileName))
        {
            System.Diagnostics.Debugger.Break();
        }
    }
} 
```

如果我使用一点 vba 代码查看同一封邮件，附件有一个文件名，该文件名显示在 Outlook 中。

```
Dim mail As MailItem

Set mail = Application.ActiveExplorer().Selection.Item(1)

debug.Print mail.Attachments.Item(0).FileName 
```

有谁知道为什么 Outlook 获得正确的文件名，但 EWS 告诉我附件没有文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-17T11:32:24.177

并非`Attachment`您从 EWS 获得的所有物品都是实际`FileAttachment`物品。添加附件类型的检查。

```
foreach (Attachment att in item.Attachments)
{              
    if (att is FileAttachment fa)
    {
        // Do something with 'fa'
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-24T14:21:24.057

浏览 EWS 源显示 FileAttachment.FileName 属性仅在使用 .Load 方法将附件保存到本地磁盘时才会填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-31T01:32:04.700

我在类似的系统中使用了 emailMessage 模式，并没有注意到这个问题，也许下面会有所帮助：

```
//creates an object that will represent the desired mailbox
Mailbox mb = new Mailbox(common.strInboxURL);

//creates a folder object that will point to inbox fold
FolderId fid = new FolderId(WellKnownFolderName.Inbox, mb);

//this will bind the mailbox you're looking for using your service instance
Microsoft.Exchange.WebServices.Data.Folder inbox = Microsoft.Exchange.WebServices.Data.Folder.Bind(service, fid);

SearchFilter.SearchFilterCollection searchFilterCollection = new SearchFilter.SearchFilterCollection(LogicalOperator.And);
searchFilterCollection.Add(new SearchFilter.IsEqualTo(EmailMessageSchema.IsRead, false));

// exclude any silly returned emails
searchFilterCollection.Add(new SearchFilter.Not(new SearchFilter.ContainsSubstring(EmailMessageSchema.Subject, "Undeliverable")));
searchFilterCollection.Add(new SearchFilter.Not(new SearchFilter.ContainsSubstring(EmailMessageSchema.Subject, "Out of Office")));

ItemView view = new ItemView(100);
view.OrderBy.Add(ItemSchema.DateTimeReceived, SortDirection.Ascending);

// This results in a FindItem operation call to EWS.
FindItemsResults<Item> results = service.FindItems(fid, searchFilterCollection, view);

if (results.Count() > 0)
   {

   // set the prioperties we need for the entire result set
   view.PropertySet = new PropertySet(
   BasePropertySet.IdOnly,
   ItemSchema.Subject,
   ItemSchema.DateTimeReceived,
   ItemSchema.DisplayTo, EmailMessageSchema.ToRecipients,
   EmailMessageSchema.From, EmailMessageSchema.IsRead,
   EmailMessageSchema.HasAttachments, ItemSchema.MimeContent,
   EmailMessageSchema.Body, EmailMessageSchema.Sender,
   ItemSchema.Body) { RequestedBodyType = BodyType.Text };

   // load the properties for the entire batch
   service.LoadPropertiesForItems(results, view.PropertySet);

    forech (Microsoft.Exchange.WebServices.Data.Attachment attachment in email.Attachments)
        {

        if (attachment is FileAttachment)
            {
            FileAttachment fileAttachment = attachment as FileAttachment; 
```

# asp.net - 列表框的RequiredFieldValidation 无法正常工作

> ID：11357597
> 
> 赞同：1
> 
> 时间：2012-07-06T07:20:53.393
> 
> 标签：asp.net, listbox, requiredfieldvalidator, client-side-validation

我的asp.net 页面上有一个列表框，我使用了rquiredfieldvalidation。问题是当列表框在特定的下拉选择中填充时，在这种情况下不会自动选择任何成员。在保存单击时，它被视为空并且仍然显示验证。

只有当**我明确选择一个成员**时，验证才会进行并且我能够保存。

我尝试使用javascript函数在我的保存按钮的OnCLientClick上自动选择第一个成员。但是问题是当我将成员从另一个列表框移动到这个列表框时，已经选择了一个成员。之后我的函数调用选择了另一个成员。因此选择了两个，在这种情况下，它会出错。

这是使用的javascript函数：

```
function FunSelect()
{
            var objRequiredFunctionalities = document
                .getElementById("<%=lbCurrentFunc.ClientID%>");

            if (objRequiredFunctionalities.selectedIndex > 0 ||      
                     objRequiredFunctionalities.options.length > 0) {
                objRequiredFunctionalities.options[0].selected = true;
            }
        } 
```

这是将项目从一个列表框移动到我已验证的列表框的代码

```
 function ShiftToRight() {
        var objSource = document.getElementById("<%=lbAllFunc.ClientID%>");
        var objRequiredFunctionalities = document.getElementById("<%=lbCurrentFunc.ClientID%>");

        if (objSource.selectedIndex < 0 || objSource.options.length < 0) {
            alert("Select Item in Left List to move.");
            return;
        }
        var flag = 0;
        for (var i = 0; i < objSource.options.length; i++) {
            if (objSource.options[i].selected) {
                var item = objSource.options[i];
                i--;
                for (var i = 0; i < objRequiredFunctionalities.options.length; i++) {
                    if (item.value == objRequiredFunctionalities.options[i].value)
                        flag = 1;
                }
                if (flag == 0) {
                    if (navigator.appName == 'Netscape') {
                        objRequiredFunctionalities.options.add(item);
                    }
                    else {
                        objRequiredFunctionalities.options.appendChild(item);
                    }
                }
                else alert("Selected item already exists in the Current Functionalities");

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:30:54.937

美食类型：

```
 <asp:RequiredFieldValidator ID="CuisineTypeReqFieldValid" InitialValue="-1" Display="dynamic" runat="server" ControlToValidate="CuisineType">
      <div class="SearchFormRow">
        <span class="SearchFormRowLabel">&nbsp;</span>
        <span class="SearchFormRowField">You must select at least 1 item from the list!</span>
      </div>
      </asp:RequiredFieldValidator> 
```

# c - HT630 JobGen - 如果收集数据为空则插入 0

> ID：11357599
> 
> 赞同：0
> 
> 时间：2012-07-06T07:21:02.403
> 
> 标签：c

我正在使用 JobGen Plus 对 Unitech HT630 终端进行编程。可以编写将在某些事件上执行的 C 代码。

用户有 4 个字段要填写。假设用户可以扫描、使用键盘或只需按 (ENT)。这就是棘手的部分来的地方。当用户只按 (ENT) 而不输入任何数据时，该字段必须设置为字符串值“0”。

有没有一些有JobGen经验的人可以帮助我？

最好的问候，丹尼斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:54:08.723

假设您的收集节点名为“collect1”。如果用户只是按下 ENT，那么在下一个程序节点状态 _collect1 = 0;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T10:28:13.703

这可以通过在您的收集节点之后创建一个新的收集节点来实现，如果没有输入数据，则将值更改为 0。

例如：如果收集节点是“collect1”，则创建一个新节点，例如：result1 并进行如下更改

输入 -> 初始值 -> 设置新值 -> 按公式并使用下面的 C 代码

```
if(strlen(_collect1)==0)
{
   strcpy(_collect1,"0");
} 
```

当您将数据记录写入文件时，如果没有输入数据，该值将为 0

# php - 如何检查来自内部服务器的请求

> ID：11357600
> 
> 赞同：3
> 
> 时间：2012-07-06T07:21:14.027
> 
> 标签：php, apache

我做了一个项目，只能限制来自内部服务器的请求（在那些机器上）。

有没有办法使用php检查来自内部服务器的请求？

诸如 cron 作业之类的东西，只有在内部服务器请求时才能执行。如果来自外部站点的任何请求，请忽略它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T07:25:18.203

您可以通过这种方式实现此目的

```
if($_SERVER['REMOTE_ADDR'] != $_SERVER['SERVER_ADDR'] || $_SERVER['REMOTE_ADDR'] != '127.0.0.1')
 die('Only internal requests are allowed'); 
```

# android - 视频播放错误

> ID：11357601
> 
> 赞同：0
> 
> 时间：2012-07-06T07:21:29.783
> 
> 标签：android

```
07-06 06:58:25.609: I/OMXCodec(113): [OMX.TI.DUCATI1.VIDEO.DECODER] Crop rect is 800 x 440 @ (0, 0)
07-06 06:58:25.843: W/OMXCodec(113): Number of channels: (6) 

07-06 06:58:26.085: I/AudioPlayer(113): TimeInterpolator::seek(media_time=0)
07-06 06:58:26.117: I/OMXCodec(113): [OMX.TI.DUCATI1.VIDEO.DECODER] video dimensions are 896 x 480
07-06 06:58:26.117: I/OMXCodec(113): [OMX.TI.DUCATI1.VIDEO.DECODER] Crop rect is 800 x 440 @ (0, 0)
07-06 06:58:26.257: D/OpenGLRenderer(23176): Flushing caches (mode 0)
07-06 06:58:26.304: I/OMXCodec(113): [OMX.TI.DUCATI1.VIDEO.DECODER] video dimensions are 896 x 480
07-06 06:58:26.304: I/OMXCodec(113): [OMX.TI.DUCATI1.VIDEO.DECODER] Crop rect is 800 x 440 @ (16, 16)
07-06 06:58:26.312: E/OMXCodec(113): [OMX.google.aac.decoder] ERROR(0x80001001, 10) 
```

我正在播放 mp4 视频，突然出现此错误。以前还好。有人能告诉我这是什么错误吗？视频将播放 1/10 秒然后停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:09:20.580

所以我能够弄清楚出了什么问题，问题是该设备只支持 2 个通道的音频。带有 6 个通道的音频的视频是导致此错误的原因。

# r - R：环境的缓存/记忆

> ID：11357602
> 
> 赞同：6
> 
> 时间：2012-07-06T07:21:32.530
> 
> 标签：r, oop, caching, memoization, proto

n我想使用[记忆](http://www.haskell.org/haskellwiki/Memoization)来缓存某些昂贵操作的结果，这样它们就不会被一遍又一遍地计算。

memoise和[R.cache](http://cran.r-project.org/web/packages/memoise/memoise.pdf)[都](http://cran.r-project.org/web/packages/R.cache/R.cache.pdf)符合我的需要。但是，我发现缓存在调用之间并不可靠。

这是一个演示我看到的问题的示例：

```
library(memoise)

# Memoisation works: b() is called only once
a <- function(x) runif(1)
replicate(5, a())
b <- memoise(a)
replicate(5, b())

# Memoisation fails: mfn() is called every single time
ProtoTester <- proto(
  calc = function(.) {
    fn <- function() print(runif(1))
    mfn <- memoise(fn)
    invisible(mfn())
  }      
)
replicate(5, ProtoTester$calc()) 
```

**根据答案更新**

根据使用的是持久缓存还是非持久缓存，这个问题可能会有不同的答案。非持久缓存（例如`memoise`）*可能*需要单个分配，然后下面的答案是一个不错的方法。持久缓存（例如`R.cache`）跨会话工作，并且对于多个分配*应该是健壮的。*上述方法适用于`R.cache`. 尽管有多个分配，但`fn`只用 . 调用一次`R.cache`。它会被调用两次`memoise`。

```
> ProtoTester <- proto(
+     calc = function(.) {
+         fn <- function() print(runif(1))
+         invisible(memoizedCall(fn))
+     }      
+ )
> replicate(5, ProtoTester$calc())
[1] 0.977563
[1] 0.1279641
[1] 0.01358866
[1] 0.9993092
[1] 0.3114813
[1] 0.97756303 0.12796408 0.01358866 0.99930922 0.31148128
> ProtoTester <- proto(
+     calc = function(.) {
+         fn <- function() print(runif(1))
+         invisible(memoizedCall(fn))
+     }      
+ )
> replicate(5, ProtoTester$calc())
[1] 0.97756303 0.12796408 0.01358866 0.99930922 0.31148128 
```

我认为我有问题的原因`R.cache`是我将一个`proto`方法作为函数传递给`memoizedCall`. `proto`方法以难以适应的方式绑定到环境`R.cache`。在这种情况下，您需要做的是取消绑定函数（从实例化方法获取简单函数），然后手动将对象作为第一个参数传递。以下示例显示了它是如何工作的（两者`Report`都是`Report$loader`对象`proto`：

```
# This will not memoize the call
memoizedCall(Report$loader$download_report)

# This works as intended
memoizedCall(with(Report$loader, download_report), Report$loader) 
```

我很想知道为什么使用绑定到环境的普通函数但使用实例化方法`R.cache`会失败。`proto`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:45:02.540

在您的代码中，每次调用该函数时都会重新对其进行记忆。以下应该有效：它只在定义时被记忆一次。

```
ProtoTester <- proto(
  calc = {
    fn <- function() print(runif(1))
    mfn <- memoise(fn)
    function(.) mfn()
  }
)
replicate(5, ProtoTester$calc()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:01:44.990

另一种解决方案是使用（我的） [pander 包](http://daroczig.github.com/pander/)`evals`进行评估，该包具有*内部*（在当前 R 会话的环境中临时*或*具有磁盘存储的持久性）缓存引擎。基于您的代码的简短示例：

 **```
library(pander)
ProtoTester <- proto(
  calc = function(.) {
    fn <- function() runif(1)
    mfn <- evals('fn()')[[1]]$result
    invisible(mfn)
  }      
) 
```

在关闭和打开缓存的情况下运行`evals`将导致：

```
> evals.option('cache', FALSE)
> replicate(5, ProtoTester$calc())
[1] 0.7152186 0.4529955 0.4160411 0.1166872 0.8776698

> evals.option('cache', TRUE)
> evals.option('cache.time', 0)
> replicate(5, ProtoTester$calc())
[1] 0.7716874 0.7716874 0.7716874 0.7716874 0.7716874 
```

请注意，`evals.option`函数 si 即将重命名以`evalsOption`减轻`R CMD check`有关 S3 方法的警告。**

# facebook - 如何实现半页滚动功能

> ID：11357606
> 
> 赞同：0
> 
> 时间：2012-07-06T07:21:53.830
> 
> 标签：facebook

在 Facebook 中的鼠标滚动事件中，页面的某些部分如何不滚动，而其他部分则向下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:32:21.370

您可以在 CSS 文件中执行此操作，只需添加`position:fixed;`到要修复的类即可。[http://www.w3schools.com/Css/css_positioning.asp](http://www.w3schools.com/Css/css_positioning.asp)

# xml - 如何格式化用sqlplus创建的输出文件？为什么一个输出块出现两次？

> ID：11357608
> 
> 赞同：0
> 
> 时间：2012-07-06T07:22:01.700
> 
> 标签：xml, oracle, sqlplus

我使用此步骤[Oracle 10g - 将查询结果写入文件](https://stackoverflow.com/questions/2299375/oracle-10g-write-queries-results-to-file/11357138#11357138) 以创建 xml 文件。所以这是我加载的 sql 脚本

c:>sqlplus -s 用户名/密码@database.domain.com <tmp.sql> output.txt

```
 set pagesize 0;
    set serveroutput on
    set termout off       
    set verify off     
    set heading off    
    set long 999
    set lines 999
    SET FEEDBACK OFF
    SET HEAD OFF

    SELECT '<?xml version="1.0" encoding="UTF-8"?>' || chr(10) ||
           '<!--Sample XML file generated by XMLSpy v2010 rel. 2 (http://www.altova.com)-->' || chr(10) ||
           '<HarpeML_CBS_IMX_ExchangeRate_Flow  xsi:noNamespaceSchemaLocation="HarpeML_CBS_IMX_ExchangeRate(REF-IMX-1)_v0.0.00.xsd"  xmlns:harpeml="http://www.harpeml.com"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">'||chr(10)||
           '<Header>'||chr(10)||
           '<harpeml:technicalIndicator>'||'HDR'||'</harpeml:technicalIndicator>'||chr(10)||
           '<harpeml:orderNumber>'||''||lpad ( imk.nextval, 10, '0' )||'</harpeml:orderNumber>'||chr(10)||
           '<harpeml:dataSelectionDate>'||''||to_char(sysdate -  4,'DD/MM/YYYY')||''||'</harpeml:dataSelectionDate>'||chr(10)|| 
            '<harpeml:extractionTimeStamp>'||''||CURRENT_TIMESTAMP||''||'</harpeml:extractionTimeStamp>'||chr(50)||'</Header>'
            FROM dual;
    SELECT '<ExchangeRates>'||chr(10)||'<ExchangeRate>'||chr(10)||
           '<harpeml:technicalIndicator>'||'02'||'</harpeml:technicalIndicator>'||chr(10)||
           '<harpeml:currencyExchangeRateType>'||''||'D'||'</harpeml:currencyExchangeRateType>'||chr(10)
            FROM dual;
    SELECT  '<harpeml:baseCurrencyCode>'||abrev||'</harpeml:baseCurrencyCode>'  FROM(SELECT abrev FROM v_domaine where type = 'DEVISE' ORDER BY  dbms_random.normal)WHERE rownum = 1;
    SELECT 
            '<harpeml:counterCurrencyCode>'||abrev||'</harpeml:counterCurrencyCode>'FROM(SELECT  abrev FROM v_domaine where type = 'DEVISE' ORDER BY  dbms_random.normal)WHERE rownum = 1;
    SELECT 
            '<harpeml:startValidityDate>'||''||to_char(sysdate -  4,'DD/MM/YYYY')||''||'<harpeml:startValidityDate>'||chr(10)||
             '<harpeml:countryCode>'||abrev||'</harpeml:countryCode>'FROM(SELECT  abrev FROM v_domaine where type = 'pays' ORDER BY  dbms_random.normal)WHERE rownum = 1;   
    SELECT
            '<harpeml:exchangeRate>'||rpad ( imk.nextval, 3, '51' )||'</harpeml:exchangeRate>'||chr(10)||
            '<harpeml:appreciationOrDepreciationReport>'||'1'||'</harpeml:appreciationOrDepreciationReport>'||chr(10)||
            '<harpeml:dataSourceSystem>'||'freetext'||'</harpeml:dataSourceSystem>'||chr(10)||
            '</ExchangeRate>'||chr(10)||
            '</ExchangeRates>'||chr(10)||
            '</HarpeML_CBS_IMX_ExchangeRate_Flow>'
            from dual;
    / 
```

这是结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--Sample XML file generated by XMLSpy v2010 rel. 2 (http://www.altova.com)-->
<HarpeML_CBS_IMX_ExchangeRate_Flow  xsi:noNamespaceSchemaLocation="HarpeML_CBS_IMX_ExchangeRate(REF-IMX-1)_v0.0.00.xsd"  xmlns:harpeml="http://www.harpeml.com"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<Header>
<harpeml:technicalIndicator>HDR</harpeml:technicalIndicator>
<harpeml:orderNumber>0000000161</harpeml:orderNumber>
<harpeml:dataSelectionDate>02/07/2012</harpeml:dataSelectionDate>
<harpeml:extractionTimeStamp>06-JUL-12 09.29.01.812631 AM +03:00</harpeml:extractionTimeStamp>2</Header>

<ExchangeRates>
<ExchangeRate>
<harpeml:technicalIndicator>02</harpeml:technicalIndicator>
<harpeml:currencyExchangeRateType>D</harpeml:currencyExchangeRateType>

<harpeml:baseCurrencyCode>BOB</harpeml:baseCurrencyCode>
<harpeml:counterCurrencyCode>SGD</harpeml:counterCurrencyCode>
<harpeml:startValidityDate>02/07/2012<harpeml:startValidityDate>
<harpeml:countryCode>BDI</harpeml:countryCode>

<harpeml:exchangeRate>162</harpeml:exchangeRate>
<harpeml:appreciationOrDepreciationReport>1</harpeml:appreciationOrDepreciationReport>
<harpeml:dataSourceSystem>freetext</harpeml:dataSourceSystem>
</ExchangeRate>
</ExchangeRates>
</HarpeML_CBS_IMX_ExchangeRate_Flow>

**<harpeml:exchangeRate>163</harpeml:exchangeRate>
<harpeml:appreciationOrDepreciationReport>1</harpeml:appreciationOrDepreciationReport>
<harpeml:dataSourceSystem>freetext</harpeml:dataSourceSystem>
</ExchangeRate>
</ExchangeRates>
</HarpeML_CBS_IMX_ExchangeRate_Flow>** 
```

有谁知道为什么最后一个块出现两次？您能否提出任何建议如何从输出文件中删除空行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:45:44.663

在 SQL*Plus 中，分号执行一条语句。斜线也是如此。

`;`您已经使用执行它们的 a 终止了每个选择。然后你用 a 终止了你的脚本，`/`这会导致最后一条语句再次执行。

至于空行，那只是运行几个不同语句的产物。我不会担心他们。当然 XML 不在乎。

然而，这是一种费力的生成 XML 文件的方法：Oracle 有一大堆 XML 特性：[您应该学会使用它们](http://docs.oracle.com/cd/B19306_01/appdev.102/b14259/toc.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:40:54.727

最后一个块出现两次，因为您的脚本末尾有一个 / - 这将再次执行最后一个查询。

只需将/替换为exit，应该可以解决此问题。

# android - 在 Cordova 1.9.0 中使用 Childbrowser 时出现 JSON 解析错误

> ID：11357609
> 
> 赞同：0
> 
> 时间：2012-07-06T07:22:04.687
> 
> 标签：android, cordova

**注意：-**我使用的是 Cordova 1.9.0 和 JQM 1.1.0，我正在测试 Android 2.3

这是我的**ChildBrowser.java**

```
import java.io.IOException;
import java.io.InputStream;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.text.InputType;
import android.util.Log;
import android.util.TypedValue;
import android.view.Gravity;
import android.view.KeyEvent;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.view.WindowManager.LayoutParams;
import android.view.inputmethod.EditorInfo;
import android.view.inputmethod.InputMethodManager;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;

public class ChildBrowser extends Plugin {

    protected static final String LOG_TAG = "ChildBrowser";
    private static int CLOSE_EVENT = 0;
    private static int LOCATION_CHANGED_EVENT = 1;

    private String browserCallbackId = null;

    private Dialog dialog;
    private WebView webview;
    private EditText edittext; 
    private boolean showLocationBar = true;

    /**
     * Executes the request and returns PluginResult.
     *
     * @param action        The action to execute.
     * @param args          JSONArry of arguments for the plugin.
     * @param callbackId    The callback id used when calling back into JavaScript.
     * @return              A PluginResult object with a status and message.
     */
    public PluginResult execute(String action, JSONArray args, String callbackId) {

        Log.i("ChildBrowser", "Plugin Called");
        PluginResult.Status status = PluginResult.Status.OK;
        String result = "";

        try {
            if (action.equals("showWebPage")) {
                this.browserCallbackId = callbackId;

                // If the ChildBrowser is already open then throw an error
                if (dialog != null && dialog.isShowing()) {
                    return new PluginResult(PluginResult.Status.ERROR, "ChildBrowser is already open");
                }

                result = this.showWebPage(args.getString(0), args.optJSONObject(1));

                if (result.length() > 0) {
                    status = PluginResult.Status.ERROR;
                    return new PluginResult(status, result);
                } else {
                    PluginResult pluginResult = new PluginResult(status, result);
                    pluginResult.setKeepCallback(true);
                    return pluginResult;
                }
            }
            else if (action.equals("close")) {
                closeDialog();

                JSONObject obj = new JSONObject();
                obj.put("type", CLOSE_EVENT);

                PluginResult pluginResult = new PluginResult(status, obj);
                pluginResult.setKeepCallback(false);
                return pluginResult;
            }
            else if (action.equals("openExternal")) {
                result = this.openExternal(args.getString(0), args.optBoolean(1));
                if (result.length() > 0) {
                    status = PluginResult.Status.ERROR;
                }
            }
            else {
                status = PluginResult.Status.INVALID_ACTION;
            }
            return new PluginResult(status, result);
        } catch (JSONException e) {
            return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
        }
    }

    /**
     * Display a new browser with the specified URL.
     *
     * @param url           The url to load.
     * @param usePhoneGap   Load url in PhoneGap webview
     * @return              "" if ok, or error message.
     */
    public String openExternal(String url, boolean usePhoneGap) {
        try {
            Intent intent = null;
            if (usePhoneGap) {
                intent = new Intent().setClass((Context) this.ctx.getActivity(), org.apache.cordova.DroidGap.class);
                intent.setData(Uri.parse(url)); // This line will be removed in future.
                intent.putExtra("url", url);

                // Timeout parameter: 60 sec max - May be less if http device timeout is less.
                intent.putExtra("loadUrlTimeoutValue", 60000);

                // These parameters can be configured if you want to show the loading dialog
                intent.putExtra("loadingDialog", "Wait,Loading web page...");   // show loading dialog
                intent.putExtra("hideLoadingDialogOnPageLoad", true);           // hide it once page has completely loaded
            }
            else {
                intent = new Intent(Intent.ACTION_VIEW);
                intent.setData(Uri.parse(url));
            }
            this.ctx.getActivity().startActivity(intent);
            return "";
        } catch (android.content.ActivityNotFoundException e) {
            Log.d(LOG_TAG, "ChildBrowser: Error loading url "+url+":"+ e.toString());
            return e.toString();
        }
    }

    /**
     * Closes the dialog
     */
    private void closeDialog() {
        if (dialog != null) {
            dialog.dismiss();
        }
    }

    /**
     * Checks to see if it is possible to go back one page in history, then does so.
     */
    private void goBack() {
        if (this.webview.canGoBack()) {
            this.webview.goBack();
        }
    }

    /**
     * Checks to see if it is possible to go forward one page in history, then does so.
     */
    private void goForward() {
        if (this.webview.canGoForward()) {
            this.webview.goForward();
        }
    }

    /**
     * Navigate to the new page
     * 
     * @param url to load
     */
    private void navigate(String url) {        
        InputMethodManager imm = (InputMethodManager)this.ctx.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(edittext.getWindowToken(), 0);

        if (!url.startsWith("http") && !url.startsWith("file:")) {
            this.webview.loadUrl("http://" + url);
        } else {
            this.webview.loadUrl(url);
        }
        this.webview.requestFocus();
    }

    /**
     * Should we show the location bar?
     * 
     * @return boolean
     */
    private boolean getShowLocationBar() {
        return this.showLocationBar;
    }

    /**
     * Display a new browser with the specified URL.
     *
     * @param url           The url to load.
     * @param jsonObject 
     */
    public String showWebPage(final String url, JSONObject options) {
        // Determine if we should hide the location bar.
        if (options != null) {
            showLocationBar = options.optBoolean("showLocationBar", true);
        }

        // Create dialog in new thread 
        Runnable runnable = new Runnable() {
            /**
             * Convert our DIP units to Pixels
             * 
             * @return int
             */
            private int dpToPixels(int dipValue) {
                int value = (int) TypedValue.applyDimension( TypedValue.COMPLEX_UNIT_DIP,
                                                            (float) dipValue,
                                                            ctx.getActivity().getResources().getDisplayMetrics()
                );

                return value;
            }

            public void run() {
                // Let's create the main dialog
                dialog = new Dialog((Context) ctx, android.R.style.Theme_NoTitleBar);
                dialog.getWindow().getAttributes().windowAnimations = android.R.style.Animation_Dialog;
                dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                dialog.setCancelable(true);
                dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
                        public void onDismiss(DialogInterface dialog) {
                            try {
                                JSONObject obj = new JSONObject();
                                obj.put("type", CLOSE_EVENT);

                                sendUpdate(obj, false);
                            } catch (JSONException e) {
                                Log.d(LOG_TAG, "Should never happen");
                            }
                        }
                });

                // Main container layout
                LinearLayout main = new LinearLayout((Context) ctx);
                main.setOrientation(LinearLayout.VERTICAL);

                // Toolbar layout
                RelativeLayout toolbar = new RelativeLayout((Context) ctx);
                toolbar.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, this.dpToPixels(44)));
                toolbar.setPadding(this.dpToPixels(2), this.dpToPixels(2), this.dpToPixels(2), this.dpToPixels(2));
                toolbar.setHorizontalGravity(Gravity.LEFT);
                toolbar.setVerticalGravity(Gravity.TOP);

                // Action Button Container layout
                RelativeLayout actionButtonContainer = new RelativeLayout((Context) ctx);
                actionButtonContainer.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                actionButtonContainer.setHorizontalGravity(Gravity.LEFT);
                actionButtonContainer.setVerticalGravity(Gravity.CENTER_VERTICAL);
                actionButtonContainer.setId(1);

                // Back button
                ImageButton back = new ImageButton((Context) ctx);
                RelativeLayout.LayoutParams backLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
                backLayoutParams.addRule(RelativeLayout.ALIGN_LEFT);
                back.setLayoutParams(backLayoutParams);
                back.setContentDescription("Back Button");
                back.setId(2);
                try {
                    back.setImageBitmap(loadDrawable("www/childbrowser/icon_arrow_left.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }
                back.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        goBack();
                    }
                });

                // Forward button
                ImageButton forward = new ImageButton((Context)ctx);
                RelativeLayout.LayoutParams forwardLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
                forwardLayoutParams.addRule(RelativeLayout.RIGHT_OF, 2);
                forward.setLayoutParams(forwardLayoutParams);
                forward.setContentDescription("Forward Button");
                forward.setId(3);
                try {
                    forward.setImageBitmap(loadDrawable("www/childbrowser/icon_arrow_right.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }
                forward.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        goForward();
                    }
                });

                // Edit Text Box
                edittext = new EditText((Context) ctx);
                RelativeLayout.LayoutParams textLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
                textLayoutParams.addRule(RelativeLayout.RIGHT_OF, 1);
                textLayoutParams.addRule(RelativeLayout.LEFT_OF, 5);
                edittext.setLayoutParams(textLayoutParams);
                edittext.setId(4);
                edittext.setSingleLine(true);
                edittext.setText(url);
                edittext.setInputType(InputType.TYPE_TEXT_VARIATION_URI);
                edittext.setImeOptions(EditorInfo.IME_ACTION_GO);
                edittext.setInputType(InputType.TYPE_NULL); // Will not except input... Makes the text NON-EDITABLE
                edittext.setOnKeyListener(new View.OnKeyListener() {
                    public boolean onKey(View v, int keyCode, KeyEvent event) {
                        // If the event is a key-down event on the "enter" button
                        if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
                          navigate(edittext.getText().toString());
                          return true;
                        }
                        return false;
                    }
                });

                // Close button
                ImageButton close = new ImageButton((Context) ctx);
                RelativeLayout.LayoutParams closeLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
                closeLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
                close.setLayoutParams(closeLayoutParams);
                forward.setContentDescription("Close Button");
                close.setId(5);
                try {
                    close.setImageBitmap(loadDrawable("www/childbrowser/icon_close.png"));
                } catch (IOException e) {
                    Log.e(LOG_TAG, e.getMessage(), e);
                }   
                close.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        closeDialog();
                    }
                });

                // WebView
                webview = new WebView((Context) ctx);
                webview.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
                webview.setWebChromeClient(new WebChromeClient());
                WebViewClient client = new ChildBrowserClient(edittext);
                webview.setWebViewClient(client);
                WebSettings settings = webview.getSettings();
                settings.setJavaScriptEnabled(true);
                settings.setJavaScriptCanOpenWindowsAutomatically(true);
                settings.setBuiltInZoomControls(true);
                settings.setPluginsEnabled(true);
                settings.setDomStorageEnabled(true);
                webview.loadUrl(url);
                webview.setId(6);
                webview.getSettings().setLoadWithOverviewMode(true);
                webview.getSettings().setUseWideViewPort(true);
                webview.requestFocus();
                webview.requestFocusFromTouch();   

                // Add the back and forward buttons to our action button container layout
                actionButtonContainer.addView(back);
                actionButtonContainer.addView(forward);

                // Add the views to our toolbar
                toolbar.addView(actionButtonContainer);
                toolbar.addView(edittext);
                toolbar.addView(close);

                // Don't add the toolbar if its been disabled
                if (getShowLocationBar()) {
                    // Add our toolbar to our main view/layout
                    main.addView(toolbar);
                }

                // Add our webview to our main view/layout
                main.addView(webview);

                WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
                lp.copyFrom(dialog.getWindow().getAttributes());
                lp.width = WindowManager.LayoutParams.FILL_PARENT;
                lp.height = WindowManager.LayoutParams.FILL_PARENT;

                dialog.setContentView(main);
                dialog.show();
                dialog.getWindow().setAttributes(lp);
            }

          private Bitmap loadDrawable(String filename) throws java.io.IOException {
              InputStream input = ctx.getActivity().getAssets().open(filename);    
              return BitmapFactory.decodeStream(input);
          }
        };
        this.ctx.getActivity().runOnUiThread(runnable);
        return "";
    }

    /**
     * Create a new plugin result and send it back to JavaScript
     * 
     * @param obj a JSONObject contain event payload information
     */
    private void sendUpdate(JSONObject obj, boolean keepCallback) {
        if (this.browserCallbackId != null) {
            PluginResult result = new PluginResult(PluginResult.Status.OK, obj);
            result.setKeepCallback(keepCallback);
            this.success(result, this.browserCallbackId);
        }
    }

    /**
     * The webview client receives notifications about appView
     */
    public class ChildBrowserClient extends WebViewClient {
        EditText edittext;

        /**
         * Constructor.
         * 
         * @param mContext
         * @param edittext 
         */
        public ChildBrowserClient(EditText mEditText) {
            this.edittext = mEditText;
        }       

        /**
         * Notify the host application that a page has started loading.
         * 
         * @param view          The webview initiating the callback.
         * @param url           The url of the page.
         */
        @Override
        public void onPageStarted(WebView view, String url,  Bitmap favicon) {
            super.onPageStarted(view, url, favicon);            
            String newloc;
            if (url.startsWith("http:") || url.startsWith("https:") || url.startsWith("file:")) {
                newloc = url;
            } else {
                newloc = "http://" + url;
            }

            if (!newloc.equals(edittext.getText().toString())) {           
                edittext.setText(newloc);
            }

            try {
                JSONObject obj = new JSONObject();
                obj.put("type", LOCATION_CHANGED_EVENT);
                obj.put("location", url);

                sendUpdate(obj, true);
            } catch (JSONException e) {
                Log.d("ChildBrowser", "This should never happen");
            }
        }
    }
} 
```

这是我的**childbrowser.js**

```
/**
 * Constructor
 */
function ChildBrowser() {
};

ChildBrowser.CLOSE_EVENT = 0;
ChildBrowser.LOCATION_CHANGED_EVENT = 1;

/**
 * Display a new browser with the specified URL.
 * This method loads up a new web view in a dialog.
 *
 * @param url           The url to load
 * @param options       An object that specifies additional options
 */
ChildBrowser.prototype.showWebPage = function(url, options) {
    if (options === null || options === "undefined") {
        var options = new Object();
        options.showLocationBar = true;
    }
    cordova.exec(this._onEvent, this._onError, "ChildBrowser", "showWebPage", [url, options]);
};

/**
 * Close the browser opened by showWebPage.
 */
ChildBrowser.prototype.close = function() {
    cordova.exec(null, null, "ChildBrowser", "close", []);
};

/**
 * Display a new browser with the specified URL.
 * This method starts a new web browser activity.
 *
 * @param url           The url to load
 * @param usecordova   Load url in cordova webview [optional]
 */
ChildBrowser.prototype.openExternal = function(url, usecordova) {
    if (usecordova === true) {
        navigator.app.loadUrl(url);
    }
    else {
        cordova.exec(null, null, "ChildBrowser", "openExternal", [url, usecordova]);
    }
};

/**
 * Method called when the child browser has an event.
 */
ChildBrowser.prototype._onEvent = function(data) {
    if (data.type == ChildBrowser.CLOSE_EVENT && typeof window.plugins.childBrowser.onClose === "function") {
        window.plugins.childBrowser.onClose();
    }
    if (data.type == ChildBrowser.LOCATION_CHANGED_EVENT && typeof window.plugins.childBrowser.onLocationChange === "function") {
        window.plugins.childBrowser.onLocationChange(data.location);
    }
};

/**
 * Method called when the child browser has an error.
 */
ChildBrowser.prototype._onError = function(data) {
    if (typeof window.plugins.childBrowser.onError === "function") {
        window.plugins.childBrowser.onError(data);
    }
};

/**
 * Maintain API consistency with iOS
 */
ChildBrowser.install = function(){
    return window.plugins.childBrowser;
};

/**
 * Load ChildBrowser
 */
cordova.addConstructor(function() {
    cordova.addPlugin("childBrowser", new ChildBrowser());
}); 
```

在**index.html**我这样使用它

```
<script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
<script type="text/javascript" charset="utf-8" src="childbrowser.js"></script>
<script type="text/javascript">

      function init(){
          document.addEventListener("deviceready",onDeviceReady,false);
      }

      function onDeviceReady(){

          console.log("Hello");
          window.plugins.childBrowser.showWebPage("http://www.google.com", { showLocationBar: true });  
      }

      </script> 
```

在**plugins.xml**我添加了这样的

```
<plugins>
<plugin name="childBrowser" value="com.phonegap.test.ChildBrowser"></plugin>
</plugins> 
```

**我得到的**日志是****

 **```
I/dalvikvm(15883): Could not find method android.webkit.WebView.<init>, referenced from method org.apache.cordova.CordovaWebView.<init>
W/dalvikvm(15883): VFY: unable to resolve direct method 303: Landroid/webkit/WebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
D/dalvikvm(15883): VFY: replacing opcode 0x70 at 0x0001
D/dalvikvm(15883): VFY: dead code 0x0004-0059 in Lorg/apache/cordova/CordovaWebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
I/CordovaLog(15883): Changing log level to DEBUG(3)
I/CordovaLog(15883): Found preference for useBrowserHistory=false
D/CordovaLog(15883): Found preference for useBrowserHistory=false
E/dalvikvm(15883): Could not find class 'android.webkit.WebResourceResponse', referenced from method org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse
W/dalvikvm(15883): VFY: unable to resolve new-instance 115 (Landroid/webkit/WebResourceResponse;) in Lorg/apache/cordova/CordovaWebViewClient;
D/dalvikvm(15883): VFY: replacing opcode 0x22 at 0x0046
W/dalvikvm(15883): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
D/dalvikvm(15883): VFY: dead code 0x0048-004c in Lorg/apache/cordova/CordovaWebViewClient;.generateWebResourceResponse (Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
W/dalvikvm(15883): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
W/dalvikvm(15883): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
I/dalvikvm(15883): Could not find method android.webkit.WebViewClient.shouldInterceptRequest, referenced from method org.apache.cordova.CordovaWebViewClient.shouldInterceptRequest
W/dalvikvm(15883): VFY: unable to resolve virtual method 322: Landroid/webkit/WebViewClient;.shouldInterceptRequest (Landroid/webkit/WebView;Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
D/dalvikvm(15883): VFY: replacing opcode 0x6f at 0x0015
D/dalvikvm(15883): VFY: dead code 0x0018-0019 in Lorg/apache/cordova/CordovaWebViewClient;.shouldInterceptRequest (Landroid/webkit/WebView;Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
D/DroidGap(15883): DroidGap.init()
D/CordovaWebView(15883): >>> loadUrl(file:///android_asset/www/index.html)
D/PluginManager(15883): init()
D/CordovaWebView(15883): >>> loadUrlNow()
D/DroidGap(15883): onMessage(onPageStarted,file:///android_asset/www/index.html)
D/SoftKeyboardDetect(15883): Ignore this event
D/SoftKeyboardDetect(15883): Ignore this event
D/szipinf(15883): Initializing inflate state
D/szipinf(15883): Initializing zlib to inflate
D/Cordova(15883): onPageFinished(file:///android_asset/www/index.html)
D/CordovaWebView(15883): >>> loadUrlNow()
D/DroidGap(15883): onMessage(onNativeReady,null)
D/DroidGap(15883): onMessage(onPageFinished,file:///android_asset/www/index.html)
I/Database(15883): sqlite returned: error code = 14, msg = cannot open file at source line 25467
D/CordovaLog(15883): [DEPRECATION NOTICE] window.addPlugin and window.plugins will be removed in version 2.0.
D/CordovaLog(15883): file:///android_asset/www/cordova-1.9.0.js: Line 294 : [DEPRECATION NOTICE] window.addPlugin and window.plugins will be removed in version 2.0.
I/Web Console(15883): [DEPRECATION NOTICE] window.addPlugin and window.plugins will be removed in version 2.0\. at file:///android_asset/www/cordova-1.9.0.js:294
D/DroidGap(15883): onMessage(networkconnection,3g)
D/CordovaLog(15883): Hello
D/CordovaLog(15883): file:///android_asset/www/index.html: Line 38 : Hello
I/Web Console(15883): Hello at file:///android_asset/www/index.html:38
D/CordovaLog(15883): Error: SyntaxError: Unable to parse JSON string
D/CordovaLog(15883): file:///android_asset/www/cordova-1.9.0.js: Line 1012 : Error: SyntaxError: Unable to parse JSON string
I/Web Console(15883): Error: SyntaxError: Unable to parse JSON string at file:///android_asset/www/cordova-1.9.0.js:1012
D/dalvikvm(15883): GC_CONCURRENT freed 327K, 51% free 2905K/5831K, external 884K/1038K, paused 5ms+17ms
D/DroidGap(15883): onMessage(spinner,stop) 
```

有没有人和我一样面临同样的问题？如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:58:09.300

在您的 plugins.xml 中，您有：

```
<plugin name="childBrowser" value="com.phonegap.test.ChildBrowser"></plugin> 
```

但应该是：

```
<plugin name="ChildBrowser" value="com.phonegap.test.ChildBrowser"></plugin> 
```

childbrower.js 代码期望 Java 代码映射到“ChildBrowser”。如您所见，案例很重要。如果您查看 cordova.exec() 命令，您会看到“ChildBrowser”是服务名称。**

# python - wxPython，按钮设计

> ID：11357611
> 
> 赞同：0
> 
> 时间：2012-07-06T07:22:09.550
> 
> 标签：python, button, windows-xp, wxpython

如何用wxPython更改按钮装饰，通常当单击按钮时，按钮上会出现一条虚线..有什么方法可以使该按钮不显示虚线？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:26:17.477

假设您在 Windows 上运行程序（您没有说明是哪个操作系统，但 Windows 经典外观使用虚线），虚线称为焦点矩形，它们似乎将按钮或小部件标记为焦点。它们是系统设置，您的程序正在按应有的方式运行 - wxWidgets 旨在尽可能模拟底层操作系统的默认行为。

* * *

**更新**

我认为您无法从程序内部更改此行为。我真的怀疑 wxWidgets 是否有为此设置，因为它依赖于操作系统，并且是 Classic 主题的标准**和正确**行为。但是默认情况下，焦点矩形仅在很少有人使用的经典外观上显示。

尝试切换到 Luna 主题（XP 上的默认主题），你会看到焦点矩形不会出现，除非你在窗口处于焦点时开始点击 Tab。顺便说一句，当您使用 Tab 键切换焦点时，恰好需要焦点矩形。毕竟，您需要查看焦点在哪里。这样你就知道当你按下 Enter 或 Space 时，将按下哪个按钮。不是每个人都只使用鼠标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:15:54.677

您可以使用自定义按钮，例如`wx.lib.buttons.GenButton`纯 python 中的按钮，这样您就可以覆盖外观、感觉等。

这也有`SetUseFocusIndicator`关闭虚线焦点指示的方法

# cordova - 如何在 Android 的 phonegap 中发送电子邮件？

> ID：11357615
> 
> 赞同：1
> 
> 时间：2012-07-06T07:22:19.583
> 
> 标签：cordova

> **可能重复：**
> [phonegap-android 中的 Webintent 电子邮件？](https://stackoverflow.com/questions/5864888/webintent-email-in-phonegap-android)

我需要在 android 和 iphone 中使用 phonegap 发送电子邮件。我尝试使用带有此链接的 android。

[http://smus.com/android-phonegap-plugins/](http://smus.com/android-phonegap-plugins/)

但它完全显示错误。我没有得到任何其他发送电子邮件的链接。任何人都可以帮助我解决这个问题。感谢任何帮助。

# mysql - 在表单上显示自动增量 ID 的方法？

> ID：11357616
> 
> 赞同：2
> 
> 时间：2012-07-06T07:22:19.863
> 
> 标签：mysql, coldfusion

当用户单击“添加新”链接时，我要求在表单上显示自动增量值，并且该值来自表 AUTO_INCREMENT 主列。

第一个想法是检索最大记录并在最大值上求和 1，但在多个用户正在记录时失败，所以我不这样做。

另一个当用户单击“添加新”链接插入带有时间戳的新记录并获取此记录 ID 并显示在表单上，​​如果用户不感兴趣添加新的然后在取消按钮上，我们从数据库中删除此 ID。

这是执行此任务的正确方法还是我不知道哪个是 MySQL 提供的其他方式。请提出任何选项，否则我将继续使用我给定的选项。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:25:10.923

`mysql_insert_id()`- 看[这里](http://php.net/manual/en/function.mysql-insert-id.php)

只需运行您的查询（不设置字段），然后放在`mysql_insert_id()`它后面，它就会为您提供您插入的自动递增 ID。

# c++ - 使用 OpenMP 或 _gnu_parallel 进行并行计算不会加速代码

> ID：11357619
> 
> 赞同：0
> 
> 时间：2012-07-06T07:22:25.057
> 
> 标签：c++, parallel-processing, openmp

我有这段代码。我正在尝试应用 OpenMP，`__gnu_parallel::for_each`并使其并行化，但这些方法都不起作用。

我该怎么办？这里 make 是一个集合向量，集合中包含的类型是`OctCell*`。

该算法给出了正确的输出，但不会加速代码。我有4个核心。

```
void Oct :: applyFunction3(void (*Function)(OctCell* cell), unsigned int level)
{
    __gnu_parallel::for_each(make.at(level).begin(),make.at(level).end(),Function);
} 
```

功能是

```
void directionalSweepX(OctCell* cell) {
OctCell* positiveCell,*negativeCell;
     positiveCell = cell->getNeighbour(RIGHT);
   negativeCell = cell->getNeighbour(LEFT);
    addFluxToConserveds(cell, positiveCell, negativeCell, X);
} 
```

addFluxtoConserveds 执行以下操作

```
void addFluxToConserveds(OctCell* cell, OctCell* positiveCell, OctCell* negativeCell, SWEEP_DIRECTION direction) {

    double deltaT = pow(2.0, cell->getLevel() - cell->getParentOct()->lMin)*gDeltaT;
    // You have corrected that delta t is delta (L)
    double alpha = (1 << (int) cell->getParentOct()->lMin) * gDeltaT/gL;// whats the purpose f <<

    double beta = alpha/8.0;
    double gamma;
    double Flux[5] = {0.0, 0.0, 0.0, 0.0, 0.0};

    if ( positiveCell == 0) {
        Flux[direction+1] = getPressure(cell);
    } else if ( positiveCell->isLeaf() ) {
        computeFlux(cell, positiveCell, direction, Flux);
        gamma = (positiveCell->getLevel() == cell->getLevel())  ? alpha : beta;
    }

    for (int i=0; i<5; i++) {
        cell->mConserveds_n[i] -= alpha * Flux[i];
        if (positiveCell) positiveCell->mConserveds_n[i] += gamma * Flux[i];
    }

    Flux[0] = Flux[1] = Flux[2] = Flux[3] = Flux[4] = 0.0;

    if ( negativeCell == 0 ) {
        Flux[direction+1] = getPressure(cell);
    } else if (negativeCell->isLeaf() && negativeCell->getLevel() == cell->getLevel() - 1 ) {
        computeFlux(negativeCell, cell, direction, Flux);
    }

    for (int i=0; i<5; i++) {
        cell->mConserveds_n[i] += alpha * Flux[i];
        if (negativeCell) negativeCell->mConserveds_n[i] -= beta * Flux[i];
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:44:56.310

使用`#include <omp.h>`.

在函数`addFluxtoConserveds`中，您可以将 a 添加`#pragma omp for`到两个 for 循环中。这是因为每次迭代不依赖于其他迭代来完成。因为你有一个对第二个 for 循环很重要的连续代码，所以你不能在这里使用`sections`or `tasks`。

什么是顺序实现`applyFunction3`？

您必须记住关于 OpenMP 的一件**重要**事情。即使在同一系列处理器中（英特尔双核与英特尔双核；英特尔与 AMD 等），在一个架构上编译的程序也不会针对所有其他架构进行优化。这意味着它在它编译的原始架构上运行得很快，而在其他架构上它只是运气。

# c++ - 回显服务器示例

> ID：11357620
> 
> 赞同：1
> 
> 时间：2012-07-06T07:22:42.387
> 
> 标签：c++, sockets, network-programming

我编写了以下代码以创建一个回显服务器（我写入的数据`stdout`从我的 PC 移动到服务器并返回到我的 PC）。问题是回显没有显示在客户端的终端上。有 2 个`server.cpp`进程正在运行，所以我知道我的连接已被服务器接受。完整代码在[这里](http://textuploader.com/?p=6&id=d8oUF)，您可以直接复制和运行代码。代码的相关部分是：

### 服务器.cpp

```
void reflect(int x)
{
    int n;
    int m;
    char data[100];
    cout<<"Entered reflect function"<<endl; //this gets displayed

    n=read(x,data, 100); //***execution is not going beyond this point i.e. read is blocking***
    cout<<"Client sent "<<n<<endl; //this doesn't get displayed 

    if(n>0)
    {
        while(n>0)
        {
            m=write(x,data,n);
            n=n-m;
        }
    cout<<"Successfully echoed back to client"<<endl; //this doesn't get displayed 
    }
}

int main()
{
    sockaddr_in serv;
    bzero(&serv, sizeof(serv));
    serv.sin_family=AF_INET;
    serv.sin_port=htons(3345);
    inet_aton("127.0.0.1", &(serv.sin_addr));

    int servfd=socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    int x;
    x=bind(servfd, (sockaddr*)(&serv), sizeof(serv));

    cout<<"Bind returned"<<x<<endl; //this displays x as 0

    listen(servfd, 5);
    sockaddr cli;
    int connfd;
    pid_t id=-1;
    socklen_t siz=sizeof(cli);
    for(;;)
    {
        if(connfd=accept(servfd, &cli, &siz)>=0)
             id=fork();

        if(id==0)
             reflect(connfd);

        else 
             continue;
    }
} 
```

### 客户端.cpp

```
int main()
{
    int clifd;
    clifd=socket(AF_INET,SOCK_STREAM, IPPROTO_TCP);
    sockaddr_in serv;
    bzero(&serv, sizeof(serv));
    serv.sin_family=AF_INET;
    serv.sin_port=htons(3345);
    inet_aton("127.0.0.1", &(serv.sin_addr));

    connect(clifd, (sockaddr*)(&serv), sizeof(serv));//blocking call
    int n,m;
    char data[100];
    char recvd[100];
    for(;;)
    {
        fgets(data, 100,stdin );
        n=strlen(data);
        cout<<"You have written "<<n<<endl; //this returns the correct value

        if(n>0)
        {
            while(n>0)
            {  
                 m=write(clifd,data,n);
                 n=n-m;
            }
        }

        n=read(clifd, recvd, 100);
        cout<<"Server echoed back "<<n<<endl; //this doesn't get displayed

        if(n>0)
        {
            while(n>0)
            {
                m=fputs(data,stdout);
                fflush(stdout);
                n=n-m;
            }
            //cout<<data<<endl;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:59:53.837

在 server.c 中，替换这个不正确的行：

```
if( connfd=accept(servfd, &cli, &siz) >=0 ) 
```

有了这个正确的：

```
if( (connfd=accept(servfd, &cli, &siz)) >=0 ) 
```

* * *

*旁白*：您使用的是什么编译器？g++ 在看到该行时会打印一条警告：

```
serv.cc: In function ‘int main()’:
serv.cc:45:43: warning: suggest parentheses around assignment used as truth value [-Wparentheses] 
```

我尝试在使用`-Wall -Werror`g++ 或 gcc 编译时始终使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:26:24.667

您正在`accept`使用无效参数调用 server.cpp。第三个参数必须包含第二个参数指向的结构的大小：

```
socklen_t siz = sizeof(cli);
for(;;)
{
    if((connfd=accept(servfd, &cli, &siz))>=0)
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T16:31:04.303

你确定，你是通过在客户端输入 100 个字符`stdin`吗？

如果不是，您向服务器写入的字符少于 100 个，但服务器需要 100 个字符，因此服务器端会`read()`阻塞。

您可以通过修改客户端代码来解决这个问题，如下所示：

```
while (n > 0)
{  
  m = write(clifd, data, sizeof(data));
  ... 
```

* * *

另一种方法是将客户端->服务器通信分成两部分：

1 发送要回显的数据大小

2 发送数据本身

通过这样做，您允许服务器调整要读取的字符数，然后回显。

* * *

`write()`只要您不检查to be返回的值，下面的这个构造就没有意义`-1`。

调用`write()`将阻塞，直到`n`字节被写入或将返回`-1`错误。后者会破坏你的逻辑。

```
while (n > 0)
{
  m=write(fd, data, n);
  n = n - m;
} 
```

您可能想尝试这样的事情：

```
while (n > 0)
{
  m = write(fd, data, n);
  if (0 < m)
    n = n - m;
  else if (errno)
    perror("write()");
} 
```

此问题适用于服务器，也适用于客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T08:28:25.100

一些缩进会很好，但我也建议你重新编写它，检查不同的函数，比如“mathematician1975”。你可以在谷歌上找到很多例子。还有一个在`man accept`. 我建议你看看 :`poll`或`select`避免`fork`

# validation - 如何验证 xhtml 1.0 验证中没有“已检查”属性

> ID：11357629
> 
> 赞同：0
> 
> 时间：2012-07-06T07:23:16.150
> 
> 标签：validation, xhtml

我有用

```
<a href="javascript:chooseStyle('none', 60)" checked="checked">Default style</a> 
```

对于样式表开关，但此代码无效，我在[http://validator.w3.org中有错误](http://validator.w3.org)

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:15:00.347

很简单，取出`checked='checked'`你的a标签。它不是 xhtml 严格或过渡中“a”标签的有效属性

您必须想出另一种方法来存储样式表开关。可能将您的`checked`选项存储在类中，并检查该类是否包含“已检查”。

# android - 如何使粗体textview android日文字符

> ID：11357632
> 
> 赞同：1
> 
> 时间：2012-07-06T07:23:28.927
> 
> 标签：android, textview

我知道做`bold textview -> android:textStyle="bold"`，但它并没有发生在日文字符中。那么有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:30:45.313

在你的 res/values/strings.xml

你可以试试这个想法

```
<string name="some_japanese">
<![CDATA[<b>日本</b>
  ]]>
</string> 
```

并得到它

```
textView.setText(Html.fromHtml(getResources().getString(R.string.some_japanese))); 
```

# asp.net-mvc-3 - 如何将一种类型的部分视图放入另一种类型的常规视图中？

> ID：11357634
> 
> 赞同：0
> 
> 时间：2012-07-06T07:23:39.553
> 
> 标签：asp.net-mvc-3

我试图将部分视图放在不属于同一类型的常规视图中。我从我的分配模型创建部分视图并将其放在 /Views/Shared 文件夹中。然后我尝试在基于另一个模型（InstructorIndexData）的常规视图中调用局部视图并收到错误消息：

传入字典的模型项的类型为“SchoolIn.ViewModels.InstructorIndexData”，但此字典需要“SchoolIn.Models.Assignment”类型的模型项。

这是部分视图中的一些代码：

```
@model ...Models.Assignment
<div class="display-label">Grade</div>
<div class="display-field">
    @Html.DisplayFor(model => model.Grade)
</div> 
```

这是常规视图中的一些代码：

```
@model SchoolIn.ViewModels.InstructorIndexData

<td> @Html.Partial("_UpdateAttendance")</td> 
```

如何将一种类型的部分视图放入另一种类型的常规视图中？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:26:04.963

如果您使用该`Html.Partial`方法渲染视图，您可以将模型作为第二个参数传递：

```
@Html.Partial("_PartialName", item.Grade) 
```

如果您使用的是显示/编辑器模板，则会自动完成：

```
@Html.DisplayFor(x => x.Grade) 
```

现在假设 Grade 属性的类型为`Assignment`，那么`~/Views/Shared/DislpayTemplates/Assignment.cshtml`将呈现 。

另一方面，如果您有一个集合属性：

```
public IEnumerable<Assignment> Grades { get; set; } 
```

那么你可以使用：

```
@model SchoolIn.ViewModels.InstructorIndexData
<table>
    <tr>
        @Html.DisplayFor(x => x.Grades)
    </tr>
</table> 
```

现在`Assignment.cshtml`将自动为 Grades 集合的每个元素呈现显示模板，这样您就不必在视图中编写任何丑陋的循环。

# android - 无法在 Eclipse for Android 中创建新项目，更新 android 4.1 后，为什么？

> ID：11357637
> 
> 赞同：2
> 
> 时间：2012-07-06T07:23:52.387
> 
> 标签：android, eclipse-plugin

我不明白为什么会这样，不适合我，但我公司的员工也面临这个问题。 ![在此处输入图像描述](../Images/0243b972775e8349e1fd55ecc13fd007.png)

我点击 Install/Update ，更新了一些东西但问题没有解决，我还检查了“再次检查”选项。我在更新 android 4.1 后面临这个问题。在更新之前它工作得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:26:48.843

首先从 android sdk 管理器中卸载 android 支持库。然后在创建项目时，您会再次询问此弹出窗口，单击安装/升级，它将起作用....

这是 4.1 sdk 的问题。一旦你做了上面的事情，它就会解决你的问题..同样发生在我身上..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:01:24.337

遇到这个问题，试试这个。

复制以下内容：

> D:\android-sdk-windows\extras\android\compatibility

并在这里创建一个名为**“support”**的新文件夹：

> D:\android-sdk-windows\extras\android\support

并将内容粘贴在其中，现在重新启动eclipse并重试！

# mysql - 使用 SUM() 而不对结果进行分组

> ID：11357640
> 
> 赞同：32
> 
> 时间：2012-07-06T07:24:04.607
> 
> 标签：mysql, sum

我已经读过[(this)](https://stackoverflow.com/questions/2381053/how-to-apply-a-sum-operation-without-grouping-the-results-in-sql)，但无法找到一种方法来解决我的具体问题。我知道这`SUM()`是一个聚合函数，不这样使用它是没有意义的，但在这种特定情况下，我必须`SUM()`在保持每一行的同时获得所有结果。

这是表格：

```
--ID-- --amount--
  1        23
  2        11
  3        8
  4        7 
```

我需要`SUM()`数量，但保留每条记录，所以输出应该是：

```
--ID-- --amount--
  1        49
  2        49
  3        49
  4        49 
```

我有这个查询，但它只对每一行求和，而不是所有结果：

```
SELECT 
    a.id,
    SUM(b.amount)

FROM table1 as a 
JOIN table1 as b ON a.id = b.id
GROUP BY id 
```

没有`SUM()`它只会返回一行，但我需要维护所有 ID...

注意：是的，这是一个非常基本的示例，我可以在这里使用 php 来执行此操作，但显然表格更大并且具有更多行和列，但这不是重点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-06T07:31:17.490

```
SELECT a.id, b.amount
FROM table1 a
CROSS JOIN
(
    SELECT SUM(amount) amount FROM table1
) b 
```

您需要将表中每一行的总和值与 each执行[笛卡尔连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)`id`。由于 subselect ( ) 只有一个结果`49`，因此它基本上只是被附加到每个`id`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-11T02:53:14.147

`MS SQL`你可以 使用`OVER()`

```
 select id, SUM(amount) OVER()
 from table1;

select id, SUM(amount) OVER()
from (
  select 1 as id, 23 as amount
  union all
  select 2 as id, 11 as amount
  union all
  select 3 as id, 8 as amount
  union all
  select 4 as id, 7 as amount
) A 
```

[![在此处输入图像描述](../Images/b3242d545554467ed4f9a7cc5a28a436.png)](https://i.stack.imgur.com/1HU0Z.png)

```
--- OVER PARTITION ID 
```

`PARTITION BY`例如，当您想`SUM()`按月执行或按季度报告销售额或按年度进行报告时，这非常有用......（注意需要`distinct`它对所有行都执行）

```
 select distinct id, SUM(amount) OVER(PARTITION BY id) as [SUM_forPARTITION]
 from (
     select 1 as id, 23 as amount
     union all
     select 1 as id, 23 as amount
     union all
     select 2 as id, 11 as amount
     union all
     select 2 as id, 11 as amount
     union all
     select 3 as id, 8 as amount
     union all
     select 4 as id, 7 as amount
) OverPARTITIONID 
```

[![在此处输入图像描述](../Images/383536085f805a2ab480b0f368fcc173.png)](https://i.stack.imgur.com/z3pfg.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-06T07:29:28.347

使用子查询将原始表连接到总和：

```
SELECT * FROM table1, (SELECT SUM(amount) FROM table1 AS amount) t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:35:03.820

这仅执行一个`sum()`查询，因此它应该执行正常：

```
SELECT a.id, b.amount
FROM table1 a
cross join (SELECT SUM(amount) as amount FROM table1 AS amount) b 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-21T03:32:35.343

如果其他人有同样的问题并且没有加入，我们可以执行以下操作

```
select *
,totcalaccepted=(select sum(s.acceptedamount)  from cteresult s)
, totalpay=(select sum(s.payvalue)  from cteresult s)     
from cteresult  t
end 
```

# php - MySQL UPDATE 给出错误

> ID：11357642
> 
> 赞同：0
> 
> 时间：2012-07-06T07:24:08.100
> 
> 标签：php, mysql

我已经尝试了几个小时来使用 PHP 更新 MySQL 表。

我使用了以下代码（和其他几个），但它给出了一条错误消息：

```
 $id = $_GET['id'];

    if(isset($_POST['descr'])){
    $go = $_POST['descr'];

    mysql_query("UPDATE Rooms SET Desc='$go' WHERE Room_ID='$id'") 
    or die(mysql_error());  

    }

    mysql_close($conn); 
```

出现错误：“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在 'Desc='附近使用正确的语法。这个房间是主测试室。是吗？” WHERE Room_ID='11'' 在第 1 行"

表单名为：“descr”，表“Rooms”，需要更新的字段为“Desc”，应该是对应ID的位置，基于动态URL。

如果我写 echo = $go 它输出正确的数据，所以我想它是 php.ini 。

它确实正确连接到数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:27:58.517

Desc 是 mysql 中的一个特殊词 try it by escape

```
mysql_query("更新房间设置`Desc`='$go' WHERE Room_ID='$id'")

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:26:54.297

假设 ID 是一个数字：

```
$id = $_GET['id'];

if(isset($_POST['descr'])){
$go = $_POST['descr'];

mysql_query("UPDATE Rooms SET `Desc`='".$go."' WHERE Room_ID=".$id.") 
or die(mysql_error());  
}
mysql_close($conn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:27:46.303

Desc 是为 ORDER BY 保留的！用'`'符号括起来！

```
mysql_query("UPDATE `Rooms` SET `Desc` = '".$go."' WHERE `Room_ID` = ".$id.") 
or die(mysql_error()); 
```

# excel - Excel - 从下拉列表中选择日期会导致返回奇数日期

> ID：11357645
> 
> 赞同：2
> 
> 时间：2012-07-06T07:24:18.863
> 
> 标签：excel

我有一个下拉列表，其中填充了一系列日期，配置如下：

![下拉配置](../Images/b2f8bad79cb19f6800ebc7bd4188919e.png)

单元格 G4 用作输出单元格，因此我可以看到正在选择正确的日期（它将用于计算，但此时无关紧要！）。我遇到的问题是，当我从下拉框中选择例如 01/01/2012 时，在输出单元格中我看到 01/01/1900。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:09:37.423

输出不是下拉列表中的值，而是列表中的位置。将 G4 格式化为数字，然后在偏移量中使用它来查找 A1:A15 中的实际日期

```
=offset(A1,G4-1,0) 
```

G4 将基于 1，但偏移量需要基于 0，因此为 -1。

# ruby-on-rails - 复数/单数控制器名称

> ID：11357646
> 
> 赞同：0
> 
> 时间：2012-07-06T07:24:26.943
> 
> 标签：ruby-on-rails, ruby, controller, routes

我知道在 Ruby 中使用复数作为控制器名称是正确的方法，但在某些情况下使用单数作为控制器名称更合适。例如

```
http://foobar.com/admin/login/
http://foobar.com/admin/dashboard/
http://foobar.com/profile/ 
```

我想你明白我的意思。那么控制器名称使用单数的最佳实践是什么？

任何例子将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:45:54.617

如果您不需要整个脚手架，例如您可能没有管理员模型，那么您可以只生成一个具有单数名称的控制器。

`rails g controller admin`

然后，您需要处理路由。

`match 'admin/login' => 'admin#login'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:44:16.283

Rails 更倾向于约定而不是配置，因此这意味着控制器总是使用复数形式，表名也是如此，而模型总是使用单数形式，并且以大写开头。

我强烈建议您遵守这些约定，这是最佳实践，也是 Rails 框架的基础

# powershell - 如何获取具有特定值的哈希表键？

> ID：11357654
> 
> 赞同：22
> 
> 时间：2012-07-06T07:24:47.503
> 
> 标签：powershell, powershell-2.0

我有一个哈希表，其中根据值使用键。

例如。

```
 $ComponentTobeBuild=@{"ComponentNameX"="True";
                          "ComponentNameXyz"="False";
                          "SomeComponent"="False"} 
```

我想获得值为 True 的键。（我会将密钥作为参数传递给其他脚本）。

我正在尝试这样，但我认为有些地方我错过了，因为它没有列出密钥。

```
$($ComponentToBuild.Keys) | Where-Object { $_.Value -eq "True" } 
```

如何获取表示为 True 的组件名称？另外我想知道哈希表是否是这种工作的明智选择。因为我认为哈希表将主要用于处理值。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-06T08:25:29.120

```
$ComponentTobeBuild.GetEnumerator() | ? { $_.Value -eq "True" } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-06T07:49:41.717

嗨，这应该适用于您想要的。

```
$ComponentTobeBuild=@{"ComponentNameX"="Test";
                          "ComponentNameXyz"="False";
                          "SomeComponent"="False"}                    

Foreach ($Key in ($ComponentTobeBuild.GetEnumerator() | Where-Object {$_.Value -eq "Test"}))
{$Key.name} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-29T08:19:28.517

我知道这已经过时了，但我在寻找其他问题时看到了这一点，并想知道您为什么要打扰 Enumerators。只需按照真实语言中的问题构建代码即可：

给我所有的钥匙，其中的价值是“真”。

```
$ComponentTobeBuild.Keys | ? { $ComponentTobeBuild[$_] -eq 'True'  } 
```

为了保持一致性，`@()`即使只有一个结果或没有结果，我也会将其封装成一个数组。

至于提问者的解决方案，问题在于它`$_`是一个字符串，`.Value`而不是键的值。它根本不存在于字符串中。您必须使用`$_`as Key 获取哈希表的值才能进行比较。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-02-24T15:35:20.963

在 PowerShell 中过滤 Hashtable 的问题是您无法遍历键值对。

假设您有一些收藏：

```
$collection = @{ 
    a = 'A'; 
    b = 'B'; 
    c = 'C'; 
    d = 'D'; 
    e = 'E';
    ...
} 
```

您希望能够使用

```
$results = $collection | Where-Object { $_.Key -in ('a', 'b', 'd') } 
```

在 PowerShell 中，但这是不可能的。

因此，您已经回退到使用枚举器：

```
$results = $collection.GetEnumerator() | Where-Object { $_.Key -in ('a', 'b', 'd') }
$results

Name                           Value
----                           -----
d                              D
b                              B
a                              A 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-02-01T12:13:31.390

您还可以使用`Dictionary.Keys`'`Where`方法返回条件成立的所有元素。该条件可能是一个 lambda，断言测试的键`$_`与`"True"`字典中的值相关。

```
$ComponentTobeBuild=@{"ComponentNameX"="True";
                      "ComponentNameXyz"="False";
                      "SomeComponent"="False"}
$ComponentTobeBuild.Keys.Where({$ComponentTobeBuild[$_] -eq "True"})
# -> @("ComponentNameX") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-14T10:52:14.023

我发现这样做的最简单（也是最整洁）的方法如下：

```
$ComponentToBuild.where{$_.Keys -match 'True'} 
```

然后得到你需要的位

```
$ComponentToBuild.where{$_.Keys -match 'True'} | select Field1,Field2,Field99 
```

ETC

# python - 寻找更多的pythonic apporach

> ID：11357655
> 
> 赞同：3
> 
> 时间：2012-07-06T07:24:51.297
> 
> 标签：python

刚写了这个函数...

```
def nrofleadingchars(stringtotest, testchar='\t'):
    count = 0
    for c in stringtotest:
        if c == testchar:
            count = count + 1
        else:
            return count
    return count 
```

但是感觉pythonic'不够'，建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T07:26:50.877

```
import itertools

def nrofleadingchars(stringtotest, testchar='\t'):
    return len(list(itertools.takewhile(lambda x: x == testchar, stringtotest))) 
```

由于需要构建一个列表，这对于具有非常大前缀的事物可能效率较低。如果我可能要处理这样的事情，我可能会写这个：

```
def num_leading_chars(a_string, prefix='\t'):
    for idx, char in enumerate(a_string):
        if char != prefix:
            return idx
    return len(a_string) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T07:27:42.440

您可以去除匹配的前导字符并根据长度计算差异。

```
def nrofleadingchars(stringtotest, testchar='\t'):
    return (len(stringtotest) - len(stringtotest.lstrip(testchar)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T07:32:07.827

在我看来，代码很简单，所以你应该更喜欢它而不是一些难以理解的混乱。我会缩短一点：

```
def nrofleadingchars(stringtotest, testchar='\t'):
    count = 0
    for c in stringtotest:
        if c != testchar:
            break
        count += 1
    return count 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T08:02:53.420

这是一个非答案，但我不知道如何将这些信息放在这里。

如果性能也是一个考虑因素（对我来说总是如此），这里是当前答案的报告。

```
                          nrofleadingchars_orig | nrofleadingchars_1 | nrofleadingchars_it | num_leading_chars | nrofleadingchars_len
-------------------------------------------------- -------------------------------------------------- ------------------------------
nrofleadingchars_ori: 1.0 | 1.05393899527 | 0.603740407137 | 1.2923361749 | 23.1678811895
  nrofleadingchars_1：0.948821520491 | 1.0 | 0.572841891082 | 1.22619637446 | 21.9821842568
 nrofleadingchars_it: 1.65634101706 | 1.74568238735 | 1.0 | 2.14054941432 | 38.3739118926
   num_leading_chars: 0.773792469344 | 0.815530057691 | 0.467169780482 | 1.0 | 17.9271319951
nrofleadingchars_len: 0.0431632047756 | 0.045491384674 | 0.0260593708246 | 0.0557813709562 | 1.0

```

这些是时间比率。向下的第一列可以理解为“慢几倍”。

# php - Geany Editor 的 PHP 函数定义问题

> ID：11357666
> 
> 赞同：1
> 
> 时间：2012-07-06T07:25:44.773
> 
> 标签：php, geany

在我的 PHP 项目中，我有两个不同的模型，它们具有相同的功能。

```
class Foo
{
    function xyz()
    {
        return "foo";
    }
} 
```

和

```
class Bar
{
    function xyz()
    {
        return "bar";
    }
} 
```

Geany 的问题是当我尝试转到函数定义时。考虑以下：

```
$bla = new Foo();
echo $bla->xyz(); 
```

通常，如果我 CTRL+单击`xyz`I 除了它去`function xyz()`in class `Foo`，但 Geany 会完全混淆并转到`Bar`.

有没有办法让 Geany 进入*实际*定义，而不是它找到的第一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:50:19.590

听起来，这个编辑器有一个简单的 lexer/parser-implementation for PHP with weak class/method/function-indexing。您可以做两件事来改善这种情况：

1.  使用另一个 IDE。Eclipse（PDT 或 ZendStudio）是一种常见的选择。许多人还使用 phpStorm 或 NetBeans。还有其他要提到的，但我认为，这些都是大玩家。
2.  为 Geany 写一个更好的插件。如果 Geany 是您选择的编辑器，但它具有其他合法使用的优势，那么它是唯一的出路。也许，已经有更好的 PHP 插件了。

另一件要提的事情：由于 PHP 在类型提示方面的不足，有一些方法可以扩展某些 IDE 的能力。以下是一些示例：[http ://code.neox.net/2009/03/10/eclipse-pdt-code-completion-and-zend-framework/](http://code.neox.net/2009/03/10/eclipse-pdt-code-completion-and-zend-framework/)

# c# - 将访问 SQL 数据库的 WCF 服务托管到 IIS 上

> ID：11357677
> 
> 赞同：1
> 
> 时间：2012-07-06T07:26:32.637
> 
> 标签：c#, sql, wcf, iis

我有一个访问 SQL 数据库以获取数据的 WCF 服务。我想将此服务部署到 IIS 上。但是，当我这样做时，我的服务无法访问数据库。这就是我的服务访问数据库的方式

```
 SqlConnection thisConnection = new SqlConnection(@"user id=SAIESH\Saiesh Natarajan;" +
                                   "password=;server=SAIESH\\SQLEXPRESS;" +
                                   "Trusted_Connection=yes;" +
                                   "database=master; " +
                                   "connection timeout=30"); 
```

我需要知道我应该怎么做才能从托管在 IIS 上的 WCF 服务访问这个数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:47:15.403

在 IIS 下，您的服务通常会在 NETWORK SERVICE 帐户下执行。在您的连接字符串中，您使用`trusted_connection=yes`. 因此，您需要授予对 NETWORK SERVICE 帐户的访问权限。但更好的解决方案是更改身份验证方案并使用 USERNAME/PASSWORD 连接到 SQL 服务器。
实际上这里有类似的问题[WCF Impersonation and SQL trust connections?](https://stackoverflow.com/questions/662902/wcf-impersonation-and-sql-trusted-connections)

# iphone - BAD_ACCESS 与 SKProductRequest

> ID：11357679
> 
> 赞同：0
> 
> 时间：2012-07-06T07:26:37.470
> 
> 标签：iphone, in-app-purchase, exc-bad-access

好的，所以基本上我已经被困在同一个地方了 2 天，而且看来 anybadoy 有我的问题，所以如果有人能帮助我，我将非常感激！！！！

我有我的 inappPurchaseManager.h

```
#import <StoreKit/StoreKit.h>

#define kInAppPurchaseManagerProductsFetchedNotification  @"kInAppPurchaseManagerProductsFetchedNotification"

@interface InAppPurchaseManager : NSObject <SKProductsRequestDelegate>
{
SKProduct *proUpgradeProduct;
SKProductsRequest *productsRequest;
} 
- (void)requestProUpgradeProductData;
@end 
```

然后在我的 .m 我有

```
- (void)requestProUpgradeProductData
{

NSSet *productIdentifiers = [NSSet setWithObject:kMyCompany ];
productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
productsRequest.delegate = self;

[productsRequest start];
NSLog(@"a");
} 
```

在这之后我的应用程序崩溃了...... EXC_BAD ACCESS..

我正在从另一个类调用 requestProUpgradeProductData

我正在使用 ARC

多谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:34:22.413

当你得到 EXC_BAD_ACCESS 时，很难猜到什么。

尝试打开 NSZombieEnabled。 [如何在 Xcode 4 中设置 NSZombieEnabled？](https://stackoverflow.com/questions/2190227/how-do-i-setup-nszombieenabled-in-xcode-4)

# file-upload - 使用 youtube 的 api 上传到 youtube 时显示进度条

> ID：11357680
> 
> 赞同：2
> 
> 时间：2012-07-06T07:26:44.243
> 
> 标签：file-upload, youtube, progress-bar, youtube-api

我正在使用**youtube 的 api 的****php**版本。我正在使用**基于浏览器的上传**（直接上传到 youtube 的服务器）。视频正在上传到我的频道。

 ****我想要实现的是在上传时显示一个进度条，使用**Uploadify**。我做得很好，同时将文件上传到我的服务器。

你们能给出任何想法如何在直接上传到youtube的服务器时实现进度条，可以用javascript完成吗？youtube 的 api 中可以帮助我做到这一点的任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:58:23.980

由于 YouTube 的服务器没有可用于上传的反馈，并且浏览器并未广泛支持，因此目前唯一明智的做法是使用 Flash 上传文件。

如果可能，您需要将 Uploadify 配置为在没有服务器模块的情况下运行，并在成功时接受 302 响应（YouTube 视频 ID 将作为参数传递到重定向位置）。

从概念上讲，这当然是可能的；我最近使用 SWFUpload 创建了一个类似的东西（这不是这项工作的最佳工具，但我很着急）。我不能说是否可以使用未经修改的 Uploadify 副本。****

# ruby - ruby 中 OpenSSL::HMAC#hexdigest 与 Digest::MD5#hexdigest 之间的区别？

> ID：11357681
> 
> 赞同：0
> 
> 时间：2012-07-06T07:26:44.277
> 
> 标签：ruby, openssl, md5

OpenSSL::HMAC#hexdigest（使用 MD5）与 Digest::MD5#hexdigest 有什么区别和/或优势？你不能只使用 Digest::MD5#hexdigest(KEY + DATA) 还是认为加密弱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:02:51.120

DATA 和 KEY 的 HMAC-MD5 定义为

```
MD5( (K xor pad1) + H ((K xor pad2) + DATA ) 
```

其中 pad1 和 pad2 是两个固定常数。您可能会做的一些更明显的事情在密码学上很弱。

```
Digest::MD5.hexdigest(KEY + DATA) 
```

有致命缺陷。考虑 MD5 的工作原理。它将输入分成一定大小的块（md5 为 512 位）并设置一些初始状态 h0、h1、h2、h3。然后它会进行一系列转换，将第一个数据块与初始状态混合，以生成 h0、h1、h2、h3 的新值。然后将第二个数据块与那些数据组合以产生一组新的 h0、h1、h2、h3 等。哈希函数的最终值只是 h0,h1,h2,h3 的串联。

这意味着如果你给我，那么我可以在不知道 KEY 的情况下`Digest::MD5#hexdigest(KEY + DATA)`计算出什么。`Digest::MD5#hexdigest(KEY + DATA + OTHER_DATA)`你可以用 SHA1 做同样的事情

如果你这样做了

```
Digest::MD5.hexdigest(DATA+KEY) 
```

那么 MD5 中任何已知的冲突都可以很容易地用于生成具有相同 HMAC 值的消息。

显然

```
Digest::MD5.hexdigest(KEY+DATA+KEY) 
```

即使使用了两个不同的密钥，也可能存在缺陷。HMAC 旨在缓解所有这些攻击。

# ubuntu - Texmaker 不在 Ubuntu 上编译 Latex 文档

> ID：11357688
> 
> 赞同：6
> 
> 时间：2012-07-06T07:27:03.357
> 
> 标签：ubuntu, latex, texmaker

我正在使用 ubuntu，我正在尝试编译一些乳胶文档，但我遇到了很多错误。我认为编译器已安装，但我不确定。我之前在 Windows 上使用 Latex 和 Miktex，但在 linux 上安装它似乎不起作用。

有人知道如何解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T07:29:47.380

这就是我所做的：

1-安装乳胶编译器：

```
sudo apt-get install abntex 
```

2- 安装 TexMaker：

```
sudo apt-get install texmaker 
```

3- 运行 texmaker 并加载你的 Tex 文档

然后你也安装

```
sudo apt-get  install texlive-latex-base texlive-latex-extra texlive-latex-recommended texlive-fonts-recommended texmaker 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T08:27:56.203

您可以仅使用安装所有依赖项`sudo apt-get install texlive`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-16T17:07:21.590

正如我在[在 Ubuntu 或 Debian 上安装 LaTeX 中](http://milq.github.io/install-latex-ubuntu-debian)所说的，我使用以下命令：

```
sudo apt-get install texlive-full 
```

接着：

```
sudo apt-get install texmaker 
```

请注意，完整的 Tex Live 发行版的安装需要很长时间，但我非常推荐它！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-19T15:52:20.037

利用

`sudo apt-get install texlive`

如果您更喜欢只在需要时下载软件包。使用

`sudo apt-get install texlive-full`

将下载 2GB 的数据，提取到超过 4GB 的安装！

# android - 无法将文本从服务器检索到 edittext

> ID：11357692
> 
> 赞同：0
> 
> 时间：2012-07-06T07:27:23.280
> 
> 标签：android, json, android-edittext

我必须从服务器检索文本并将其显示在编辑文本中。这是我的代码。我将此代码放在 onCreate 方法中。

```
 EditText ed=(EditText)findViewById(R.id.edit_usr_nam);
    EditText ed1=(EditText)findViewById(R.id.edit_name);
    EditText ed2=(EditText)findViewById(R.id.edit_email);
    EditText ed3=(EditText)findViewById(R.id.edit_age);
    String UserName=ed.getText().toString();
    String Name=ed1.getText().toString();
    String Email=ed2.getText().toString();
    String Age=ed3.getText().toString();
    try{
    HttpClient client=new DefaultHttpClient();
    HttpPost post=new HttpPost("http://abcd");
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
    nameValuePairs.add(new BasicNameValuePair("username", UserName));

    nameValuePairs.add(new BasicNameValuePair("form", "register"));

    nameValuePairs.add(new BasicNameValuePair("name", Name));

    nameValuePairs.add(new BasicNameValuePair("email", Email));
    nameValuePairs.add(new BasicNameValuePair("age", Age));
    post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response=client.execute(post);
    String responseText= inputStreamTOString(response.getEntity().getContent()).toString();
    System.out.println("errrrooooorrrrrrr"+responseText);

    JSONObject json = new JSONObject(responseText);
    json.getString("response");

    ed.setText(json.getString(UserName));
    ed1.setText(json.getString(Name));
    ed2.setText(json.getString(Email));
    ed3.setText(json.getString(Age));
    }
    catch(Exception e){
        Log.e("exvcx", "error getting data" +e.toString());
    } 
```

请告诉我哪里错了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:39:31.190

您的代码似乎没有任何问题。

**我的建议**：确保检查服务器上的 php 文件是否正常工作。

您说如果您直接通过浏览器访问会出现这些错误：

> A Database Error Occurred 错误编号：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法 select *,u.name fname,c.name cityname, s.name statename from users u left outer join urban c on u。 city_id=c.id left outer join states s on s.id=c.state_id left outer join interest i on i.id=u.interest_ids where u.id= Line Number: 108

看起来您的数据库查询似乎错误。

你该怎么办？修复查询。然后通过向您的 php 发送一个虚拟参数进行测试和调试并使其正常工作。

然后你可以继续你的android编程:)

# postgresql - 将 CSV 上传到 PostgreSQL 的实用程序

> ID：11357695
> 
> 赞同：1
> 
> 时间：2012-07-06T07:27:33.120
> 
> 标签：postgresql, csv

是否有任何实用程序可用于从 CSV 文件导入表数据。

因为我没有大量的表和行。写 COPY FROM sql 需要一些时间，所以需要任何实用程序或其他方法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T08:14:39.557

你真的应该使用[`copy`](http://www.postgresql.org/docs/9.1/static/sql-copy.html)：

```
#!/bin/bash

(
  echo 'copy table_name from stdin (format csv);'
  cat table_name.csv || exit 1
  echo '\.'
) | psql database_name 
```

您无需以任何方式更改大文件。您可能需要调整一些复制选项（`delimiter`等`quote`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:31:32.630

这可能会有所帮助：

[http://csvloader.sourceforge.net/](http://csvloader.sourceforge.net/)

# python - 谷歌图表未显示在服务器上

> ID：11357707
> 
> 赞同：0
> 
> 时间：2012-07-06T07:28:02.943
> 
> 标签：python, django, linux, google-visualization, ubuntu-10.04

我的代码：

```
<html>
  <head>
   <script type="text/javascript" src="https://www.google.com/jsapi"></script>
   <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
        ['FileName', 'Frequency'],
        {% for l in list1 %}
              [{{l.file_name}},{{l.frequency_count}}], 
        {% endfor %}
        ]);

        var options = {
        title: 'Search Performance',
        hAxis: {title: 'FileName', titleTextStyle: {color: 'red'}}
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
   </script>
  </head>
  <body>
     <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

在服务器上运行我的应用程序（在 Django 中创建）时，此图表未显示，为什么？这个页面是“results.html”，它来自我的views.py 文件。这里“list1”包含存储在表中的数据，即“file_name”和“frequency_count”。为什么会这样？

我是 Django、google-charts 和 JavaScript 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:06:42.257

您可能在打印图表的 javacript 数组值的循环中遇到问题。我猜文件名是字符串，因此它们需要用`'`or分隔`"`，如下所示：

```
{% for l in list1 %}
    ['{{ l.file_name }}', {{ l.frequency_count }}], 
{% endfor %} 
```

为了测试这一点，我刚刚摆脱了循环并放置了几行示例静态数据，如下所示：

```
var data = google.visualization.arrayToDataTable([
        ['FileName', 'Frequency'],
            ['this', 100],
            ['that', 200]
        ]); 
```

我得到了图表：

![在此处输入图像描述](../Images/b5f1b4073ef6864aa1c66bcbf7f6c7e6.png)

# c# - 如何限制 FFMpeg CPU 使用率？

> ID：11357713
> 
> 赞同：2
> 
> 时间：2012-07-06T07:28:23.777
> 
> 标签：c#, performance, ffmpeg

我在 C# Windows 窗体应用程序中调用 FFMpeg。由于它使用了如此多的 CPU（几乎 100%），我的所有线程都无法继续工作。有没有办法限制这种 CPU 使用率？

下面是我的工作代码，

```
Process ffmpeg = new Process();
ffmpeg.StartInfo.UseShellExecute = false;
ffmpeg.StartInfo.FileName = '..\ffmpeg.exe'
ffmpeg.StartInfo.CreateNoWindow = true;
ffmpeg.Start(); 
```

我试图将 Process.PriorityClass 设置为 PriorityClass.BelowNormal 但这完全阻止了 ffmpeg 进程。

有没有其他的出路？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:32:20.233

此处概述的解决方案

[如何限制 FFMpeg CPU 使用率？](https://stackoverflow.com/questions/4565567/how-can-i-limit-ffmpeg-cpu-usage)

是将FFMpeg使用的线程数限制为少于计算机上可用内核的数量。

跟进您的评论，您可以[通过 StartInfo 提供参数](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.arguments)

```
Process ffmpeg = new Process();
ffmpeg.StartInfo.UseShellExecute = false;
ffmpeg.StartInfo.FileName = "..\ffmpeg.exe";
ffmpeg.StartInfo.Arguments = "-threads 2";  // <=== Add this line
ffmpeg.StartInfo.CreateNoWindow = true;
ffmpeg.Start(); 
```

# c# - 如何在 Dotnetnuke 模块页面上显示用户控件？

> ID：11357714
> 
> 赞同：0
> 
> 时间：2012-07-06T07:28:24.307
> 
> 标签：c#, .net, dotnetnuke

我已经创建了模块并在模块中创建了一个用户控件。

现在，如何在页面上添加此用户控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:08:10.260

If am not sure how you have created module since you are not stating dnn version, you can review [this example](http://www.adefwebserver.com/dotnetnukehelp/dnn_showmethepages/) that will walk you through how to create super simple dnn module.

I suggest you to go to through [DNN Video Library](http://www.dotnetnuke.com/Resources/Video-Library.aspx) and get some basic knowledge on dnn module development.

# android - 项目需要一次又一次的清理？

> ID：11357716
> 
> 赞同：0
> 
> 时间：2012-07-06T07:28:33.183
> 
> 标签：android

我使用的是 2.1 平台。当我启动一个项目时，在 gen 文件夹中没有看到 R.java 文件。我使用以下步骤，如果第一步没有更正错误，我将进入第二步，依此类推。

1.  清理项目，取消选中“自动构建”选项并重新构建它。

2.  导入Android.R；

3.导入包.R；

我只知道这些步骤。但错误仍然存​​在。我必须在创建每个项目时清理它。有时这个问题会在完成代码后发生，那时我必须重新编辑代码并制作如开头所示的代码[只有**Oncreate**方法]并清理项目并重建它并复制代码并运行项目。清理项目后没有问题。这个问题在1个月内出现。有什么方法可以添加**R。**创建项目时将**java文件保存到 gen 文件夹？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:35:00.093

检查logcat，它会显示错误，可能是drawable中有空格，例如image_xyx.png

# java - “字体的可编程变体”是什么意思

> ID：11357717
> 
> 赞同：1
> 
> 时间：2012-07-06T07:28:35.583
> 
> 标签：java, fonts

我正在检查与渲染和字体相关的问题。[GraphicsEnvironment.html#getAllFonts()](http://download.java.net/jdk7/archive/b123/docs/api/java/awt/GraphicsEnvironment.html#getAllFonts%28%29)中的注释 提到了字体的“可编程变体”。

> 此方法为应用程序提供了对使用哪个 Font 实例来呈现文本的最精确控制。如果此 GraphicsEnvironment 中的字体具有**多个可编程变体**，则数组中仅返回该字体的一个实例，其他变体必须由应用程序派生。
> 
> **如果**此环境中的字体**具有多个可编程变体**，例如 Multiple-Master 字体，则在 Font 数组中仅返回该字体的一个实例。其他变体必须由应用程序派生。

这里的“可编程变化”是什么意思？我如何知道字体在此 GraphicsEnvironment 中是否有“可编程变体”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:49:34.173

它给出了多个主字体的示例：请参阅MM Fonts 上的此[wiki 。](http://en.wikipedia.org/wiki/Multiple_master_fonts)

这是 Adob​​e 实现的多种可编程字体的实现，您可以在其中“创建各种不同宽度、粗细和比例的字体样式，而不会失去字符字形的完整性或可读性”

# netbeans - Netbeans UI - Windows 7 上的阴影

> ID：11357719
> 
> 赞同：1
> 
> 时间：2012-07-06T07:28:46.820
> 
> 标签：netbeans, user-interface

我知道这可能不是一个关键问题，但我很好奇是否有人可以解决这个问题。我喜欢 netbeans，我喜欢它在 Windows 7 上的默认外观，我完全不喜欢 Nimbus、Metal 等外观，它是原生的，但菜单、弹出菜单、代码完成建议框没有阴影，有没有办法保持控件的原生窗口外观但添加阴影？

# java - Java：JPanel 中的垂直对齐

> ID：11357720
> 
> 赞同：20
> 
> 时间：2012-07-06T07:28:49.533
> 
> 标签：java, swing, alignment, jpanel, jlabel

我试图在一个 JPanel 内垂直对齐（居中）两个 JLabels。

```
JPanel panel = new JPanel();
panel.setPreferredSize(size);
JLabel label1 = new JLabel(icon);
JLabel label2 = new JLabel("text");
panel.add(label1);
panel.add(label2); 
```

我尝试使用 setAligmentY() 没有成功。这两个标签总是出现在 JPanel 的顶部。

UPD：标签应该像使用 FlowLayout 一样彼此相邻，但位于 JPanel 的中间。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-06T07:33:25.397

将 a[`GridBagLayout`](https://docs.oracle.com/javase/8/docs/api/java/awt/GridBagLayout.html)与默认约束一起使用。这是一个小演示代码：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestVerticalAlignement {

    protected void initUI() {
        final JFrame frame = new JFrame();
        frame.setTitle("Test vertical alignement");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        panel.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        JLabel label1 = new JLabel("label1");
        JLabel label2 = new JLabel("label2");
        panel.add(label1, gbc);
        panel.add(label2, gbc);
        frame.add(panel);
        frame.setSize(300, 300);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestVerticalAlignement().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-07-18T09:47:59.710

你可以看到这个答案： [https ://stackoverflow.com/a/18073909/189411](https://stackoverflow.com/a/18073909/189411)

```
JPanel panel = new JPanel();
panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-29T05:00:04.223

使用gridlayout，简单。那应该行得通。

考虑我的以下示例：

```
import java.awt.*;
import java.applet.Applet;
import javax.swing.*;

/*
    <applet code=AJ07 width=450 height=450>
    </applet>
*/

    public class AJ07 extends JApplet{
        Container c=null;

        public void init(){

                JPanel pTop=new JPanel();
                JPanel pLeft=new JPanel();
                JPanel pCenter=new JPanel();
                JPanel pProperties=new JPanel();

                pLeft.setLayout(new GridLayout(20,1));

                c=this.getContentPane();
                JButton bNew=new JButton("New");
                pTop.add(bNew);
                JButton bOpen=new JButton("Open");
                pTop.add(bOpen);
                JButton bSave=new JButton("Save");
                pTop.add(bSave);
                JButton bSaveAll=new JButton("Save All");
                pTop.add(bSaveAll);
                JButton bRun=new JButton("Run");
                pTop.add(bRun);
                JButton bStop=new JButton("Stop");
                pTop.add(bStop);
                JButton bPause=new JButton("Pause");
                pTop.add(bPause);

                JButton bText=new JButton("TextBox");
                pLeft.add(bText);
                JButton bButton=new JButton("Button");
                pLeft.add(bButton);

                pProperties.setLayout(new GridLayout(20,1));
                pProperties.add(new Label("BackColor"));
                pProperties.add(new Label("ForeColor"));
                c.add(new TextArea(),BorderLayout.CENTER);

                c.add(pTop,BorderLayout.NORTH);
                c.add(pLeft,BorderLayout.WEST);
                c.add(new Label("Project Loaded Successfully!"),BorderLayout.SOUTH);
                c.add(pProperties,BorderLayout.EAST);
                //c.add(pCenter,BorderLayout.CENTER);
        }
    } 
```

其输出如下：

[![在此处输入图像描述](../Images/2f6826bc62baa384f66bb69eb90fd28a.png)](https://i.stack.imgur.com/Lm4CM.png)

# android - asynctask 中的通知栏

> ID：11357721
> 
> 赞同：0
> 
> 时间：2012-07-06T07:28:58.833
> 
> 标签：android, android-asynctask

我已经将我的 onCreate() 移动到 asynctask，现在除了通知栏外一切正常，我不知道应该把它放在哪里。以下是功能代码：

```
@Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.app_details);

    tvDescription = (TextView)findViewById(R.id.tvDescription);

    tvTitle = (TextView)findViewById(R.id.tvTitle);
    tvDeveloper = (TextView)findViewById(R.id.tvDeveloper);

    rbRating = (RatingBar)findViewById(R.id.rbRating);

    ivLogo = (ImageView)findViewById(R.id.ivLogo);
    ivPhoto1 = (ImageView)findViewById(R.id.ivPhoto1);
    ivPhoto2 = (ImageView)findViewById(R.id.ivPhoto2);
    ivPhoto3 = (ImageView)findViewById(R.id.ivPhoto3);

    new loadPage().execute(null, null, null);               
}

public void onClickDownload(View view){
    String url = "http://www.mydomain.com/apk/" + apkURL;
    url = url.replaceAll(" ","%20");
    String sourceUrl = url;
    new DownloadFileAsync().execute(sourceUrl);
}   

private Bitmap LoadImage(String URL, BitmapFactory.Options options){       
    Bitmap bitmap = null;
    InputStream in = null;
       try {
           in = OpenHttpConnection(URL);
           bitmap = BitmapFactory.decodeStream(in, null, options);
           in.close();
       } catch (IOException e1) {
       }
       return bitmap;
       }

 private InputStream OpenHttpConnection(String strURL) throws IOException{
     InputStream inputStream = null;
     URL url = new URL(strURL);
     URLConnection conn = url.openConnection();

     try{
         HttpURLConnection httpConn = (HttpURLConnection)conn;
         httpConn.setRequestMethod("GET");
         httpConn.connect();

         if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
             inputStream = httpConn.getInputStream();
             }
         }
     catch (Exception ex){           
     }
     return inputStream;
 }

/////start download
public class DownloadFileAsync extends AsyncTask<String, Integer, Void> {
    private boolean run_do_in_background = true;

    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        }

    @Override
    protected Void doInBackground(String... aurl) {
        int count;
        try {
            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lengthOfFile = conexion.getContentLength();
            Log.d("ANDRO_ASYNC", "Lenght of file: " + lengthOfFile);

            File folder = new File(Environment.getExternalStorageDirectory() + "/MaxApps");
            boolean success = false;
            if (!folder.exists()) {
                success = folder.mkdirs();
            }
            if (!success) {
            } else {
            }

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/MaxApps/" + apkURL);

            byte data[] = new byte[100*1024];

            long total = 0;

            //use try catch here to notice a disconnect             
            while ((count = input.read(data)) != -1) {
            total += count;             
            int progressPercent = (int) ((total*100)/lengthOfFile);
            if(progressPercent % 5 == 0){  //publish progress on completion of every 10%
                publishProgress(progressPercent);
                }
            output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            } catch (Exception e) {

                notificationManager.cancel(Integer.parseInt(ID.toString()));

                Notification MyN = new Notification(); MyN.icon = R.drawable.logo1;
                MyN.tickerText = "Download Failed";
                MyN.number = 1;
                MyN.setLatestEventInfo (getApplicationContext(), apkURL + " Download Failed.", "Please try again", MyPI);
                MyN.flags |= Notification.FLAG_AUTO_CANCEL;
                MyNM.notify(1, MyN);    
                run_do_in_background = false;
            }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {          
        notification.contentView.setProgressBar(R.id.pbStatus, 100, progress[0], false);
        notificationManager.notify(Integer.parseInt(ID.toString()), notification);
        }

    @Override
    protected void onPostExecute(Void unused) {
        if(run_do_in_background) {
        notificationManager.cancel(Integer.parseInt(ID.toString()));

        Notification MyN = new Notification(); MyN.icon = R.drawable.logo1;
        MyN.tickerText = "Download Complete";
        MyN.number = 1;
        MyN.setLatestEventInfo (getApplicationContext(), "Download Complete, Click to install.", apkURL, MyPI);
        MyN.flags |= Notification.FLAG_AUTO_CANCEL;
        MyNM.notify(Integer.parseInt(ID.toString()) , MyN);
        }
    }
}

public class loadPage extends AsyncTask<String, Integer, Void> {
    private ProgressDialog pdia;

    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        pdia = new ProgressDialog(AppDetails.this);
        pdia.setMessage("Loading...");
        pdia.show(); 
        }

    @Override
    protected Void doInBackground(String... aurl) {
        SoapObject Request = new SoapObject (NAMESPACE, METHOD_NAME);

        Request.addProperty("title", getIntent().getExtras().getString("xdaTitle"));

        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);

        AndroidHttpTransport aht = new AndroidHttpTransport(URL);

        try
        {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapObject resultString = (SoapObject) soapEnvelope.getResponse();

            for(int i =0; i<resultString.getPropertyCount(); i++)
            {
                SoapObject array = (SoapObject) resultString .getProperty(i);

                title = array.getProperty(1).toString(); 
                description = array.getProperty(2).toString();
                developer = array.getProperty(3).toString();
                rating = array.getProperty(4).toString();
                apkURL = array.getProperty(10).toString();                  

                String logo_URL = array.getProperty(5).toString();   //get logo url

                BitmapFactory.Options bmOptions;
                bmOptions = new BitmapFactory.Options();
                bmOptions.inSampleSize = 1;

                bmLogo = LoadImage(logo_URL, bmOptions);

                String photo1_URL = array.getProperty(6).toString();
                bmPhoto1 = LoadImage(photo1_URL, bmOptions);

                String photo2_URL = array.getProperty(7).toString();
                bmPhoto2 = LoadImage(photo2_URL, bmOptions);

                String photo3_URL = array.getProperty(8).toString();
                bmPhoto3 = LoadImage(photo3_URL, bmOptions);
            }
        }
        catch(Exception e)
        {

        }           
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {

    }

    @Override
    protected void onPostExecute(Void unused) {
        tvTitle.setText(title);
        tvDeveloper.setText(developer);         

        ivLogo.setImageBitmap(bmLogo);
        ivPhoto1.setImageBitmap(bmPhoto1);
        ivPhoto2.setImageBitmap(bmPhoto2);
        ivPhoto3.setImageBitmap(bmPhoto3);

        pdia.dismiss();
    }
} 
```

这是我想使用的代码，该代码将打开下载的文件，在此之前，它在一切都转移到 asynctask 之前运行。

```
 MyI = new Intent(Intent.ACTION_VIEW);
MyI.setAction(android.content.Intent.ACTION_VIEW);
MyI.setDataAndType(Uri.parse("file:///sdcard/MaxApps/" + apkURL.toString()), "application/vnd.android.package-archive");

MyPI = PendingIntent.getActivity(getApplicationContext(), 0, MyI, 0);
MyNM = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

Intent intent = new Intent(getApplicationContext(), AppDetails.class);
intent.putExtra("xdaTitle", title);
final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);

notification = new Notification(R.drawable.logo, "Downloading...", System.currentTimeMillis());
notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
notification.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.downloadapk);
notification.contentIntent = pendingIntent;
notification.contentView.setImageViewResource(R.id.imgIcon, R.drawable.save);
notification.contentView.setTextViewText(R.id.tvText, "Downloading " + apkURL);
notification.contentView.setViewVisibility(R.id.pbStatus, View.VISIBLE);
notification.contentView.setProgressBar(R.id.pbStatus, 100, progress, false);        
notificationManager = (NotificationManager) getApplicationContext().getSystemService(getApplicationContext().NOTIFICATION_SERVICE); 
```

错误： ![在此处输入图像描述](../Images/b7512baf56b0d2a222cb88823f25732d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:51:09.393

我找到了解决方案，这是因为我忘记获取 ID 的值。所以当应用程序想要创建通知时，他们无法创建它，因为没有 ID。只需在 doInBackground 下添加这一行

```
 title = array.getProperty(1).toString(); 
```

# cocoa - objc_getProtocol() 为“NSApplicationDelegate”返回 NULL？，第 2 部分

> ID：11357732
> 
> 赞同：0
> 
> 时间：2012-07-06T07:30:41.047
> 
> 标签：cocoa, runtime, protocols

我也想：

```
Protocol *protocol = objc_getProtocol("NSApplicationDelegate"); 
```

如此处所示：

[objc_getProtocol() 为“NSApplicationDelegate”返回 NULL？](https://stackoverflow.com/questions/10212119/objc-getprotocol-returns-null-for-nsapplicationdelegate)

接受的答案说它返回 NULL 因为我还没有完成以下操作之一：

*   被一个班级收养，
*   或在源代码中的某处引用（使用`@protocol()`）

现在，`@protocol`这是毫无疑问的，因为我在运行时运行它，对吧？所以这让我将协议添加到类中，`BOOL class_addProtocol(Class cls, Protocol *protocol)`

但是，当尚未创建协议时，如何将协议添加到类中？

换句话说，似乎我必须这样做：

```
Protocol *protocol = objc_getProtocol("NSApplicationDelegate");
BOOL class_addProtocol(class, protocol); 
```

但是第一行返回NULL ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:54:05.687

这个“第 2 部分”问题的答案与原始问题的答案相同。[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15)说：

> 声明但未使用的协议（除了下面描述的类型检查）在运行时不由协议对象表示。

你不能得到，`Protocol`因为它不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T16:46:07.490

似乎您目前最好的选择是解析 BridgeSupport 文件并从`<informal_protocol>`标签中获取所需的方法类型。

NSApplicationDelegate 在 AppKit.bridgesupport 中有描述：

```
<informal_protocol name='NSApplicationDelegate'>
<method selector='application:didDecodeRestorableState:' type='v16@0:4@8@12' type64='v32@0:8@16@24'/>
<method selector='application:didFailToRegisterForRemoteNotificationsWithError:' type='v16@0:4@8@12' type64='v32@0:8@16@24'/>
<method selector='application:didReceiveRemoteNotification:' type='v16@0:4@8@12' type64='v32@0:8@16@24'/>
<method selector='application:didRegisterForRemoteNotificationsWithDeviceToken:' type='v16@0:4@8@12' type64='v32@0:8@16@24'/>
<method selector='application:openFile:' type='B16@0:4@8@12' type64='B32@0:8@16@24'/>
<method selector='application:openFileWithoutUI:' type='B16@0:4@8@12' type64='B32@0:8@16@24'/>
<method selector='application:openFiles:' type='v16@0:4@8@12' type64='v32@0:8@16@24'/>
<method selector='application:openTempFile:' type='B16@0:4@8@12' type64='B32@0:8@16@24'/>
<method selector='application:printFile:' type='B16@0:4@8@12' type64='B32@0:8@16@24'/>
<method selector='application:printFiles:withSettings:showPrintPanels:' type='I24@0:4@8@12@16B20' type64='Q44@0:8@16@24@32B40'/>
<method selector='application:willEncodeRestorableState:' type='v16@0:4@8@12' type64='v32@0:8@16@24'/>
<method selector='application:willPresentError:' type='@16@0:4@8@12' type64='@32@0:8@16@24'/>
<method selector='applicationDidBecomeActive:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationDidChangeOcclusionState:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationDidChangeScreenParameters:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationDidFinishLaunching:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationDidHide:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationDidResignActive:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationDidUnhide:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationDidUpdate:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationDockMenu:' type='@12@0:4@8' type64='@24@0:8@16'/>
<method selector='applicationOpenUntitledFile:' type='B12@0:4@8' type64='B24@0:8@16'/>
<method selector='applicationShouldHandleReopen:hasVisibleWindows:' type='B16@0:4@8B12' type64='B28@0:8@16B24'/>
<method selector='applicationShouldOpenUntitledFile:' type='B12@0:4@8' type64='B24@0:8@16'/>
<method selector='applicationShouldTerminate:' type='I12@0:4@8' type64='Q24@0:8@16'/>
<method selector='applicationShouldTerminateAfterLastWindowClosed:' type='B12@0:4@8' type64='B24@0:8@16'/>
<method selector='applicationWillBecomeActive:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationWillFinishLaunching:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationWillHide:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationWillResignActive:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationWillTerminate:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationWillUnhide:' type='v12@0:4@8' type64='v24@0:8@16'/>
<method selector='applicationWillUpdate:' type='v12@0:4@8' type64='v24@0:8@16'/>
</informal_protocol> 
```

# blackberry - 在黑莓手电筒上加载黑莓应用程序

> ID：11357734
> 
> 赞同：0
> 
> 时间：2012-07-06T07:30:47.273
> 
> 标签：blackberry, cordova

我将[apache cordova 1.6](http://incubator.apache.org/cordova/)用于我的 BlackBerry 应用程序。当我在 BlackBerry Torch 9810 上打开应用程序时，它会持续显示应用程序加载屏幕 7 到 8 分钟。经过漫长的等待，它进入第一个屏幕。当我部署一个普通的科尔多瓦应用程序时，几乎不需要 1 分钟就可以打开。谁能帮我找到解决问题的方法？我的应用程序有 5.9 MB 大，我使用的是 BlackBerry OS 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:42:00.267

There could be various reasons why an application takes longer to open. But, you can narrow it down by using the profiler. Here is another thread which discuss about the same topic and a solution had been proposed at the end of the thread.

[http://supportforums.blackberry.com/t5/Java-Development/app-taking-a-long-time-to-start/td-p/1630459](http://supportforums.blackberry.com/t5/Java-Development/app-taking-a-long-time-to-start/td-p/1630459)

Thanks

Naveen M

# javascript - 使用 Jquery 查找滚动的总高度

> ID：11357736
> 
> 赞同：-1
> 
> 时间：2012-07-06T07:30:49.203
> 
> 标签：javascript, jquery

我需要 JavaScript jQuery 代码来查找文档的总滚动高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:39:26.927

试试这个

```
$(document).ready(function(){
var documentHeight=$('html').height();//The entire page is within HTML tag so the page height would be the height of HTML's height. It would be the size of the entire scroll too.
}); 
```

# java - java创建对象建议

> ID：11357740
> 
> 赞同：1
> 
> 时间：2012-07-06T07:31:13.857
> 
> 标签：java

我对对象创建有一些疑问/问题。我听说不应该在循环中创建对象。在循环内创建对象有什么问题？在循环外创建和在循环内创建有什么区别？

请考虑以下示例。

```
public java.util.List<Object> objectCreationTest(){
    java.util.List<Object> objectList =new java.util. ArrayList<Object>();
    Object obj = null;
    for(int i = 0 ; i <1000;i++){
        Object e = new Object(); //1 -->  Is this object creation wrong? 
        obj = new Object(); //2 --> Is this right way to create?
        objectList.add(e );

    }

    return objectList ;

} 
```

请建议我必须遵循哪种方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:32:55.693

> 我听说不应该在循环中创建对象。在循环内创建对象有什么问题？

在循环中创建对象并没有错。有时它是创建多个（相关）对象的唯一方法。

在您的示例中，您可以简单地执行以下操作：

```
public java.util.List<Object> objectCreationTest(){
    java.util.List<Object> objectList = new java.util. ArrayList<Object>();
    for(int i = 0 ; i <1000;i++){
        Object e = new Object(); 
        objectList.add(e);    
    }
    return objectList;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:55:48.470

两种方法都是正确的，但区别在于范围 `obj`和垃圾收集。

```
public java.util.List<Object> objectCreationTest(){
java.util.List<Object> objectList =new java.util. ArrayList<Object>();
Object obj = null;
for(int i = 0 ; i <1000;i++){
    Object e = new Object(); //1 -->  Is this object creation wrong? 
    obj = new Object(); //2 --> Is this right way to create?
    objectList.add(e );

}

return objectList ;

} 
```

如果 1 范围`obj`仅在 `for` 循环内，一旦循环完成，它将无法到达循环外，它将有资格进行垃圾收集。如果情况 2 范围`obj`也在循环之外。在您只是在收集方法 1 中插入对象的情况下更好，因为`objectList`如果您使用方法 2，插入后所有对象都将有资格进行垃圾收集，然后`obj`引用将在 i= 时创建的最后一个对象999 和收集器将检查`obj`后循环的引用是否可达意味着它扫描整个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:36:08.330

在你的情况下，你可以简单地这样做：

```
public java.util.List<Object> objectCreationTest(){
    java.util.List<Object> objectList = new java.util. ArrayList<Object>();
    for(int i = 0 ; i <1000;i++){
        objectList.add(new Object());    
    }
    return objectList;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:36:49.453

只是声明上的区别，实际创建上没有区别。理论上两者之间可能存在差异，但它是如此之小，编译器可能会接受它。

在您的示例中，您可以这样写：

```
public java.util.List<Object> objectCreationTest(){
    java.util.List<Object> objectList =new java.util. ArrayList<Object>();
    for(int i = 0 ; i <1000;i++){
        objectList.add(new Object());    
    }
    return objectList;
} 
```

# php - 我们如何将 PHP 变量注入 Javascript

> ID：11357742
> 
> 赞同：0
> 
> 时间：2012-07-06T07:31:24.463
> 
> 标签：php, javascript, html

我对 JavaScript 中的“windows.location”命令有疑问。我想在链接 windows.location 中添加 php 变量。我能怎么做？例如：我想通过变量 $lang 将用户转移到英语页面或越南语页面

这是我的代码

echo 'window.location="/B2C/$lang/confirm_fone.html"';

地址栏中的结果是：

```
http://10.160.64.4:1234/B2C/$lang/confirm_fone.html 
```

地址栏中的 $lang 无法解码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T07:32:35.397

单引号字符串中的变量不会在 PHP 中进行插值。

改用这个：

```
echo 'window.location="/B2C/' . $lang . '/confirm_fone.html"'; 
```

或使用双引号：

```
echo "window.location='/B2C/$lang/confirm_fone.html'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:32:55.233

这是因为整个字符串都在单引号中。

您需要使用双引号进行插值。

否则，您可以尝试：

```
echo 'window.location="/B2C/'.$lang.'/confirm_fone.html"'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:33:38.503

`'`当您使用as 分隔符时，PHP 不会在字符串中解析变量。改为使用`"`（`'`对于 javascript 命令）或使用`.`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:33:01.100

如果将 php 变量放在字符串中，则应使用 Double Quotes 。

```
echo "window.location='/B2C/$lang/confirm_fone.html'"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T07:33:03.590

您必须连接该值，如下所示：

```
echo 'window.location="/B2C/'.$lang.'/confirm_fone.html"'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T07:36:22.137

如果您在 php 上下文中：

```
echo "window.location=\"/B2C/"{$lang}"/confirm_fone.html\";'; 
```

如果您在 HTML-Context（或更好的“outer-php-context”）中：

```
window.location="/B2C/<?php echo $lang ?>/confirm_fone.html"; 
```

# javascript - 单击编辑按钮时如何根据另外两个文本框的条件隐藏或禁用单选按钮列表和文本框

> ID：11357746
> 
> 赞同：0
> 
> 时间：2012-07-06T07:31:43.620
> 
> 标签：javascript, asp.net, controls, code-behind, formview

我有一个带有文本框和单选按钮列表和编辑按钮的表单视图，顺序如下

```
 <asp:textbox id="tb1" runat="server" text='<%# Bind("DATE_1", "{0:d}") %>' />
 <asp:calendarextender id="tb1_CalendarExtender" runat="server" targetcontrolid="tb1" />

 <asp:textbox id="tb2" runat="server" text='<%# Bind("DATE_2", "{0:d}") %>' />
 <asp:calendarextender id="tb2_CalendarExtender" runat="server" targetcontrolid="tb2" />

 <asp:button id="EditButton" runat="server" causesvalidation="False" commandname="Edit" text="Edit" enabled='<%# CanEdit(Eval("DATE_1"), Eval("DATE_2")) %>' OnClick="EditButton_Click" />

 <asp:radiobuttonlist id="rbl1" runat="server" repeatdirection="Horizontal" text='<%# Bind("DIAG_LL_APPROVAL") %>'>
      <asp:ListItem>Approved</asp:ListItem>
      <asp:ListItem>Rejected</asp:ListItem>
      <asp:ListItem Selected="True">None</asp:ListItem>
 </asp:radiobuttonlist>
 <asp:textbox id="tb3" runat="server" text='<%# Bind("COMMENTS") %>' maxlength="1000"/> 
```

当编辑按钮为 时，需要隐藏或禁用以及`rbl1`是否`tb3`有任何值（即） 。`tb1``tb2``null``clicked`

```
protected void EditButton_Click(object sender, EventArgs e)
    {
        TextBox t1 = FormViewName.FindControl("tb1") as TextBox;
        TextBox t2 = FormViewName.FindControl("tb2") as TextBox;
        RadioButtonList rbl = FormViewName.FindControl("rbl1") as RadioButtonList;
        TextBox t3 = FormViewName.FindControl("tb3") as TextBox;

        //if ("".Equals(tdcd) || "".Equals(tdrcd))
        if (!string.IsNullOrEmpty(t1.Text) && !string.IsNullOrEmpty(t2.Text))
        {
            FormViewName.FindControl("rbl1").Visible = true;
            FormViewName.FindControl("tb3").Visible = true;
        }
        else
        {
            FormViewName.FindControl("rbl1").Visible = false;
            FormViewName.FindControl("tb3").Visible = false;
        }
    } 
```

错误：对象引用未设置为对象的实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:49:24.593

试试这个：在编辑按钮点击事件：

```
if (string.IsNullOrEmpty(tb1.Text) && string.IsNullOrEmpty(tb2.Text))
        {
            rbl1.Visible = false;
            tb3.Visible = false;
        } 
```

**编辑**

```
TextBox txt = (TextBox)FormView1.FindControl("tb1");

TextBox txt1 = (TextBox)FormView1.FindControl("tb2");

TextBox tb3= (TextBox)FormView1.FindControl("tb3");

 RadioButtonList rb1= (RadioButtonList)FormView1.FindControl("rbl1");

    if (string.IsNullOrEmpty(txt.Text) && string.IsNullOrEmpty(txt1.Text))
            {
                rb1.Visible = false;
                tb3.Visible = false;
            }
          else

              {
                rb1.Visible = true;
                tb3.Visible = true;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T07:49:44.343

我会做这样的事情：

```
 <asp:textbox id="tb1" runat="server" text='<%# Bind("DATE_2", "{0:d}") %>' />
 <asp:calendarextender id="tb1_CalendarExtender" runat="server" targetcontrolid="tb1" />

 <asp:textbox id="tb2" runat="server" text='<%# Bind("DATE_2", "{0:d}") %>' />
 <asp:calendarextender id="tb2_CalendarExtender" runat="server" targetcontrolid="tb2" />

 <asp:button id="EditButton" runat="server" causesvalidation="False" commandname="Edit" text="Edit" enabled='<%# CanEdit(Eval("DATE_2"), Eval("DATE_2")) %>'
             onclientclick="verifyEditControls();" />

 <div class="hide edit-controls">
     <asp:radiobuttonlist id="rbl1" runat="server" repeatdirection="Horizontal" text='<%# Bind("DIAG_LL_APPROVAL") %>'>
        <asp:ListItem>Approved</asp:ListItem>
        <asp:ListItem>Rejected</asp:ListItem>
        <asp:ListItemSelected="True">None</asp:ListItem>
    </asp:radiobuttonlist>
    <asp:textbox id="tb3" runat="server" text='<%# Bind("COMMENTS") %>' maxlength="1000"/>
 </div> 
```

并添加一个javascript（为了简单起见，我在这里使用jQuery）

```
<script>
    function verifyEditControls() {
        var c1 = '#<%= tb1.ClientID %>',
            c2 = '#<%= tb2.ClientID %>';

        if($(c1).val().length > 0 || $(c2).val().length > 0)
            $(".edit-controls").show();
        else 
            $(".edit-controls").hide();

        return $(".edit-controls").is("visible");
    }
</script> 
```

如果控件不可见，这将禁用回发，并且仅显示控件 Wrapped `<div>`，但如果按下编辑按钮并且控件可见，`true`则发送 a 并且您的页面将回发到按钮上调用的方法。

只需为此添加一个`Command`或`Click`服务器事件。

如果您想使用普通按钮，则无需要求 .NET Framework 为您创建一个，只需使用`<button id="EditButton">Edit</button>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T07:43:56.483

单击按钮时，您可以检查 tb1 和 tb2 是否不是字符串。如果是，则将 rbl1 和 tb3 的可见性属性设置为 false。

或者您可以使用 tb1 和 tb2 的 OnTextChanged 事件，当没有在 rbl1 中键入文本并且 tb3 被隐藏时，当有人添加文本时，它们将自动设置为可见

顺便说一句：您需要使用更好的命名约定

```
<asp:textbox id="tb1" runat="server" text='<%# Bind("DATE_2", "{0:d}") %>' />
 <asp:calendarextender id="tb1_CalendarExtender" runat="server" targetcontrolid="tb1" />

 <asp:textbox id="tb2" runat="server" text='<%# Bind("DATE_2", "{0:d}") %>' />
 <asp:calendarextender id="tb2_CalendarExtender" runat="server" targetcontrolid="tb2" />

 <asp:button id="EditButton" runat="server" causesvalidation="False" 
        commandname="Edit" text="Edit" 
        enabled='<%# CanEdit(Eval("DATE_2"), Eval("DATE_2")) %>' 
        onclick="EditButton_Click" />

 <asp:radiobuttonlist id="rbl1" runat="server" Visible="false" repeatdirection="Horizontal" text='<%# Bind("DIAG_LL_APPROVAL") %>'>
      <asp:ListItem>Approved</asp:ListItem>
      <asp:ListItem>Rejected</asp:ListItem>
      <asp:ListItem Selected="True">None</asp:ListItem>
 </asp:radiobuttonlist>
 <asp:textbox id="tb3" runat="server" Visible="false" text='<%# Bind("COMMENTS") %>' maxlength="1000"/> 
```

在后面的代码中

```
protected void EditButton_Click(object sender, EventArgs e)
{
    if (!string.IsNullOrEmpty(tb1.Text) && !string.IsNullOrEmpty(tb2.Text))
    {
        rbl1.Visible = true;
        tb3.Visible = true;

        // do your stuff
    }
    else 
    {
        rbl1.Visible = false;
        tb3.Visible = false;
    }
} 
```

# .net - 从另一个图片框在 .NET 中绘制图像并保持 sizemode

> ID：11357747
> 
> 赞同：1
> 
> 时间：2012-07-06T07:31:44.413
> 
> 标签：.net, vb.net

我正在尝试从 .NET 中的 PictureBox 复制图像并将其绘制在另一个图像之上。当我在初始图像上绘制图像时，如何在图片框中保留图像的 sizemode 属性？

提前致谢...

编辑：这是我用来将图片从图片框（pbImage）绘制到另一个图片框（pbContainer）的图像上的代码。我将 SizeMode 设置为缩放 pbImage。我遇到的问题是尝试使用与 pbImage 中相同的外观来绘制图像，并且想知道是否有一种方法可以找出图像的大小，因为它使用 SizeMode = Zoom 而不是如何显示在图片框中原始图像的大小。

```
Private Function FlattenImage() As Bitmap
    Dim bmp As New Bitmap(pbContainer.Image, pbContainer.Size)
    Using insertImage As New Bitmap(pbImage.Image, pbImage.Width, pbImage.Height), g As Graphics = Graphics.FromImage(bmp)
        Dim insertLocation As New Point(pbImage.Left - pbContainer.Left, pbImage.Top - pbContainer.Top)
        g.DrawImage(insertImage, insertLocation)
        Return bmp
    End Using
End Function 
```

我最终只是像这样使用 DrawToBitmap() ：

```
Private Function FlattenImage() As Bitmap
    Dim bmp As New Bitmap(pbContainer.Image, pbContainer.Size)
    Using insertImage As New Bitmap(pbImage.Width, pbImage.Height), g As Graphics = Graphics.FromImage(bmp)
        Dim insertLocation As New Point(pbImage.Left - pbContainer.Left, pbImage.Top - pbContainer.Top)
        Dim rect As New Rectangle(New Point(0, 0), pbImage.Size)
        pbImage.DrawToBitmap(insertImage, rect)
        g.DrawImage(insertImage, insertLocation)
        Return bmp
    End Using
End Function 
```

它可以按我的需要工作。但是我仍然想知道是否有一种方法可以使用各种 SizeModes 来获取图像在 PictureBox 中显示的大小，因为它在未来可能会有用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:47:37.290

例如，将 PictureBox1.BackColor 设置为透明，而不是：

```
Dim x As New Bitmap(PictureBox1.Width, PictureBox1.Height)
PictureBox1.DrawToBitmap(x, PictureBox1.DisplayRectangle) 
```

之后，通过使用循环，您可以从左、右、上和下计算区域。例如：

```
If Not (x.GetPixel(i, j) = Color.Transparent) Then
EdgeFound(i,j)
End If 
```

# symfony - Symfony2，如何访问表单内的实体值？

> ID：11357748
> 
> 赞同：2
> 
> 时间：2012-07-06T07:31:47.330
> 
> 标签：symfony, entity, symfony-forms

我在 Symfony2 中有一个 FormType。它用于显示设置。设置作为实体存储在数据库中。使用 Doctrine2，我获取设置并创建一个表单，如下所示：

```
public function showSettingsAction()
{
    if(false === $this->get('security.context')->isGranted('ROLE_ADMIN')) {
        throw new AccessDeniedException();
    }
    $settings = new CommunitySettings();

    $repository = $this->getDoctrine()->getRepository('TestTestingBundle:CommunitySettings');
    $allSettings = $repository->findAll();

    $form = $this->createForm('collection', $allSettings, array(
        'type' => 'settings_form'
    ));
    $request = $this->container->get('request');
    if($request->getMethod() === 'POST') {
        $form->bindRequest($request);
        if($form->isValid()) {
            $em = $this->getDoctrine()->getEntityManager();
            $settings = $form->getData();
            foreach($settings as $setting) {
                $oldsetting = $em->getRepository('TestTestingBundle:CommunitySettings')
                    ->find($setting->getId());
                if(!$oldsetting) {
                    throw $this->createNotFoundException('No setting found for id '.$setting->getId());
                }

                $oldsetting->setSettingValue($setting->getSettingValue());
                $em->flush();
            }

            $this->get('session')->setFlash('message', 'Your changes were saved');

            return new RedirectResponse($this->generateUrl('_admin_settings'));
        }
    }

    return $this->render('TestTestingBundle:Admin:settings.html.twig',array(
        'form' => $form->createView(),
    ));
} 
```

这是我将数组发送到的代码`$allSettings`行`settings_form`：

```
$form = $this->createForm('collection', $allSettings, array(
    'type' => 'settings_form'
)); 
```

这是设置表单的样子：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('settingValue', 'text');
} 
```

我在实体中存储了一个标签、一个值和一个字段类型，我想用它们来构建表单。但是，当我使用它时，它只显示表单中的变量名称，如下所示：

```
0
Settingvalue //Is a checkbox, where it says Settingvalue, it should be the label stored in the entity
0

1
Settingvalue //Is a integer, where it says Settingvalue, it should be the label stored in the entity
3000 
```

如何使用存储在实体中的变量来构建表单字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:08:33.693

您可以在设置表单类型中使用事件侦听器来解决此问题。

```
public function buildForm(FormBuilder $builder, array $options)
{
    $formFactory = $builder->getFormFactory();
    $builder->addEventListener(FormEvents::PRE_SET_DATA, function (FormEvent $event) use ($formFactory) {
        $form = $event->getForm();
        $data = $event->getData();

        $form->add($formFactory->createNamed('settingsValue', $data->getSettingsType(), array(
            'label' => $data->getSettingsLabel(),
        )));
    });
} 
```

# objective-c - 在使用 RestKit 映射子对象时添加父对象作为属性

> ID：11357750
> 
> 赞同：2
> 
> 时间：2012-07-06T07:31:59.703
> 
> 标签：objective-c, ios, cocoa-touch, restkit

对于以下 XML，我有一个非常简单的 RestKit 映射：

```
<category name="religious">
  <book isbn="42">HHGTTG</book>
  <book isbn="7">The bible</book>
</category> 
```

现在解析这个时，我得到一个`category`包含两个对象的`book`对象。现在在我的书对象中，我想参考`category`.

[这似乎是一件很容易实现的事情，但我在Object Mapping Documentation](https://github.com/RestKit/RestKit/wiki/Object-mapping)中没有找到任何内容。

**更新**：这是我的映射的样子：

```
RKObjectMapping *bookMapping = [RKObjectMapping mappingForClass:[Book class]];
[bookMapping mapKeyPath:@"isbn" toAttribute:@"isbn"];

RKObjectMapping* categoryMapping = [RKObjectMapping mappingForClass:[Category class]];
[categoryMapping mapKeyPath:@"name" toAttribute:@"name"];
// Relationship to book
[categoryMapping mapKeyPath:@"book" toRelationship:@"books" withMapping:bookMapping]; 
```

# javascript - $(this).val() 返回不正确的值 IE8

> ID：11357752
> 
> 赞同：1
> 
> 时间：2012-07-06T07:32:03.133
> 
> 标签：javascript, jquery, html, internet-explorer-8

我有一个由一些 javascript 代码动态生成的琐事页面。它在大多数浏览器（Chrome、Safari、Firefox、Opera、IE9）中都能正常工作，但在 IE8 上却有一个奇怪的问题。当我调用 $(this).val() 作为按钮单击事件处理程序的一部分时，我得到一个空字符串作为响应，即使单击的按钮具有值。

**相关的 JavaScript：**

```
$(document).ready(function() {
    $(document).on("click", ".btn", function() {
        if(panel % numPanels === 1)
            {category = $(this).val();}
        nextPanel(prop);
    });
}); 
```

**相关HTML：**

```
<div id="buttons">
<button type="button" class="btn" value="One">Group One</button>
<button type="button" class="btn" value="Two">Group Two</button>
<button type="button" class="btn" value="Three">Group Three</button>
</div> 
```

知道怎么了？

编辑：我正在使用 jQuery 1.7.2，并且使用`console.log($(this).attr("value"))`并且`console.log($(this).prop("value"))`还返回一个空白字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:53:22.187

如果您要使用 javascript，它是 <button> 中的一个错误，那么我的建议是您使用 html -data 属性：

```
<div id="buttons">
    <button type="button" class="btn" data-value="One">Group One</button>
    <button type="button" class="btn" data-value="Two">Group Two</button>
    <button type="button" class="btn" data-value="Three">Group Three</button>
</div> 
```

并使用 jquery 代码：

```
$(document).ready(function() {
    $(document).on("click", ".btn", function() {
        if(panel % numPanels === 1) {
            category = $(this).data("value");
        }
        nextPanel(prop);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:40:29.760

你可以试试`$(this).attr("value")`

或者

您可以使用`$(this).prop("value")`

.prop() 需要 jQuery 1.6+ 版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:40:18.503

尝试使用`.attr`

**编辑：添加完整代码**

```
$(document).ready(function() {     
$(document).on("click", ".btn", function() {
     if(panel % numPanels === 1)
// retrieve using attr
         {category = $(this).attr("value");}
     nextPanel(prop);
 }); 
}); 
```

# axapta - 使用 Axapta 与终端服务器安装与客户端安装有什么性能差异？

> ID：11357758
> 
> 赞同：0
> 
> 时间：2012-07-06T07:32:30.877
> 
> 标签：axapta, dynamics-ax-2009

这似乎是一个“愚蠢”的问题，但让我解释一下。我正在为一家专门通过终端服务器使用 Axapta 的公司工作，因此：1 个 AOS 服务器和 1 个终端服务器，所有员工都连接并使用 Axapta。我想知道使用安装在每台个人电脑中的客户端而不是使用终端服务器客户端中的客户端是否存在一些性能差异。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:08:43.087

客户端软件的安装也是一样的。

性能，以及所有客户端实例都运行在同一个终端服务器上，一个用户可以影响其他用户的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:22:12.643

区别在于：

A. 在终端服务器中工作是-您在哑终端（您的电脑）上工作并连接到终端服务器。工作负载发生在终端服务器中。您的电脑不会因 Axapta 客户端的工作负载而过载。终端服务器和你的电脑之间需要大量的带宽传输，这个传输的比特是远程桌面协议（如果你使用 rdp）。

B.在你的pc上工作安装Axapta客户端是——你在你的pc上工作，里面安装了Axapta客户端。所以你的电脑就像一匹马。因为数据在 Axapta 客户端和 AOS 服务器之间传输，所以在您的 PC 中进行了很多工作。如果运行查询的代码不匹配，例如运行报告，您的 Axapta 客户端性能将受到影响。假设您在 fetch 方法中的报表查询是在客户端，并且需要大量数据来完成，难怪您的 Axapta 客户端会在等待数据来自服务器（AOS 和 DB）的时候会失明一段时间。

# regex - 正则表达式替换空 标签 XSLT 2.0？

> ID：11357764
> 
> 赞同：0
> 
> 时间：2012-07-06T07:32:45.137
> 
> 标签：regex, xslt-2.0, removing-whitespace

我目前有一个 XSLT 2.0 样式表，我正在尝试从输出中删除空的 P 标记。我尝试了以下正则表达式但没有成功：

```
replace($string,"&lt;p&gt;[\s{2,}]*&lt;/p&gt;","") 
```

目前样式表的输出如下所示：

```
<p>Some Text!</p>
<p></p>
<p>Some Text!</p>
<p> </p>
<p>  </p>
<p>Some Text!</p> 
```

从这里我希望输出去除其中只有 1 个或多个空格的 P 标签，所以它看起来像这样：

```
<p>Some Text!</p>
<p>Some Text!</p>
<p>Some Text!</p> 
```

谢谢

:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:09:32.130

我会编写一个处理第一个结果的 XSLT 样式表，您只需要两个模板，即

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="p[not(*) and not(normalize-space())]"/>

</xsl:stylesheet> 
```

当然，另一种选择是重写原始样式表以完全不生成空`p`元素，但为此我们需要查看 XML 输入和您拥有的 XSLT 的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:59:44.913

我建议使用下一个正则表达式：`/<p>(|\s+)<\/p>/`

**解释：**

```
<p>       # Match <p>
(         # Try to match...
  |\s+    #   nothing or the space character any number of times
)         # ...match end
<\/p>     # Match </p> 
```

[您可以通过链接http://regexr.com?31f6a](http://regexr.com?31f6a)看到它的实际效果（请务必切换到“替换”模式并将替换文本设置为空）。

**更新**

实际上，`(|\s)`表达式 和`\s*`做同样的事情（感谢 Rawling），因此您可以将主要表达式写为`/<p>\s*<\/p>/`.

# extjs-mvc - 即使文件已加载，ExtJS4 MVC CheckColumn 也未声明

> ID：11357770
> 
> 赞同：1
> 
> 时间：2012-07-06T07:32:56.440
> 
> 标签：extjs-mvc, extjs4.1

我有一个简单的 ExtJS4 MVC 测试应用程序开始：

```
<html>
<head>
    <title>Test</title>
    <link rel="stylesheet" type="text/css" href="/Test/extjs-4.1.0/resources/css/ext-all.css">
    <link rel="stylesheet" type="text/css" href="/Test/extjs-4.1.0/resources/css/CheckHeader.css">
    <script type="text/javascript" src="/Test/extjs-4.1.0/ext-all-dev.js"></script>
    <script type="text/javascript" src="/Test/ajax/api-debug.js?apiNs=MyNamespac"></script>
    <script type="text/javascript" src="/Test/app.js"></script>
</head>
<body><div id="viewport"></div></body>
</html> 
```

这是实际`app.js`代码（我已将`CheckColumn.js`文件复制到`extjs-4.1.0\src`）：

```
Ext.Loader.setConfig({ enabled: true });

Ext.require([ 'Ext.ux.CheckColumn' ]);

Ext.direct.Manager.addProvider(MyNamespace.REMOTING_API);

Ext.application({
    name : 'Auctions',
    controllers : [ 'TestDates' ],

    appFolder : '/Test/app',

    launch : function() {

        Ext.create('Ext.Panel', {
            layout : 'fit',
            items : [ {
                xtype : 'testdates'
            } ],
            renderTo : 'viewport',
        });
    }
}); 
```

我必须包含加载器，否则应用程序抱怨它无法加载控制器。我还必须要求 CheckColumn，否则`checkcolumn`无法识别 xtype。

我没有收到以下错误：

> 即使它们的文件已被加载，也不会声明以下类：'Ext.ux.CheckColumn'。请检查其对应文件的源代码是否有可能的拼写错误：'./ux/CheckColumn.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:15:09.383

您应该在下面创建文件夹并`ux`在那里`extjs-4.1.0\src`复制`CheckColumn.js`文件。在 ExtJs 中，类名和文件位置之间总是有一个链接。如果你的类名是`Ext.ux.CheckColumn`那么路径必须是`.\src\ux\CheckColumn.js`

# c# - SQL 查询问题：标识符无效

> ID：11357771
> 
> 赞同：0
> 
> 时间：2012-07-06T07:33:00.557
> 
> 标签：c#, sql, database, oracle

我已经研究了一段时间的删除功能，但我无法克服这个错误。

删除失败 ORA-00904 "SYSTEM"."DATA"."DATAROWVIEW": 标识符无效

```
 private void button3_Click(object sender, EventArgs e)
    {
        string yesNoPrompt = "Are you sure you want to delete this patient?";
        const string caption = "";
        var result = MessageBox.Show(yesNoPrompt, caption,
                                     MessageBoxButtons.YesNo,
                                     MessageBoxIcon.Question);

        if (result == DialogResult.Yes)
        {
            string sql = "DELETE FROM CLIENT WHERE (CLI_LNAME =" + listBox1.SelectedItem.ToString() + ")" ;

            try
            {
                string connectionString = GetConnectionString();
                using (OracleConnection connection = new OracleConnection())
                {
                    connection.ConnectionString = connectionString;
                    connection.Open();

                    OracleCommand command = new OracleCommand(sql, connection);
                    command.CommandType = CommandType.Text;
                    command.ExecuteNonQuery();

                }
            }
            catch (System.Data.OracleClient.OracleException ex)
            {
                MessageBox.Show("Delete Failed" + ex.Message);
            }
        }
    } 
```

数据库中的表是 CLIENT，我试图通过姓氏或 CLI_LNAME 查找特定的人。我认为问题不在于名称被传递，而更多在于它是如何传递的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:38:00.913

看起来像`listBox1.SelectedItem.ToString()`返回“SYSTEM”.“DATA”.“DATAROWVIEW”。您可能想要访问 的特定项目，`DataRowView`而`SelectedItem`不是整个 DataRowView 对象本身。也许`listBox1.SelectedItem[0].ToString()`是你想要的？

此外，您还必须添加 @Habib.OSU 提到的引号。

以及强制性的 sql 注入警告：不要将用户输入连接到 SQL 字符串中。它为[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)打开了大门。使用参数化查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:40:22.630

您的查询被翻译成

```
DELETE FROM CLIENT WHERE (CLI_LNAME = SYSTEM.DATA.DATAROWVIEW) 
```

由于缺少单引号，因此它试图查找表`SYSTEM.DATA.DATAROWVIEW`中不存在的名为列的列`Client`。因此错误。

当您使用单引号时，它会在该特定列中查找文本

```
DELETE FROM CLIENT WHERE (CLI_LNAME = 'PatientName') // Now its not a column as such 
```

使用参数化查询避免 SQL 注入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:36:32.887

您在参数中缺少单引号

```
string sql = "DELETE FROM CLIENT WHERE (CLI_LNAME ='" + listBox1.SelectedItem.ToString() + "')" ; 
```

如果您可以使用[参数化查询，那就更好了](http://www.devart.com/dotconnect/oracle/articles/parameters.html)

# css - div对齐无法正常工作

> ID：11357775
> 
> 赞同：0
> 
> 时间：2012-07-06T07:33:10.920
> 
> 标签：css, html

**css**

```
#content2
    {
    clear:both;
    width:1024px;
    height:auto;
        position:relative;
    }
    #content2 div:first-child
    {
    background:#E4ECF7;
    width:445px;
    height:25px;
    margin:15px 0px 0px 223px;
    -webkit-border-radius:5px;
    -moz-border-radius:5px;
    border-radius:5px;
    border:1px solid #E0DCD1;
    padding:5px 0px 0px 5px;
    position:absolute;
    }
    #content2 div:last-child
    {
    width:1024px;
    height:200px;
    position:absolute;
    border:1px solid #E0DCD1;
    clear:both;
    } 
```

**html**

```
<div id="content2">
<div>content</div>
<div>content</div>
</div> 
```

**结果**

**div1** 显示在**div2内部**

**我需要**

```
div1  then
div2 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:39:16.530

为什么使用绝对位置，最后一个孩子不需要明确的属性

```
#content2
{
clear:both;
width:1024px;
height:auto;
    position:relative;
}
#content2 div:first-child
{
background:#E4ECF7;
width:445px;
height:25px;
margin:15px 0px 0px 223px;
-webkit-border-radius:5px;
-moz-border-radius:5px;
border-radius:5px;
border:1px solid #E0DCD1;
padding:5px 0px 0px 5px;
/*position:absolute;*/
}
#content2 div:last-child
{
width:1024px;
height:200px;
/*position:absolute;*/
border:1px solid #E0DCD1;
/*clear:both;*/
} 
```

div 默认被清除，除非在使用 float 属性之后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:45:56.820

从两个子 div 中删除绝对位置...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:50:08.523

我认为你看起来像这样：- [http://tinkerbin.com/3qRLgscO](http://tinkerbin.com/3qRLgscO)

实际上，您自己使**CSS**有点复杂。您可以通过非常简单的 CSS 获得所需的结果，而无需使用`positioning`.

如果我们使用`float`比我们应该使用`clear`清除浮动 div 的，否则不需要使用该`clear`属性。

这是您的简单代码，我在您的**CSS**中进行了一些简单的更改.....

**HTML**

```
<div id="content2">
<div>div1</div>
<div>div2</div>
</div> 
```

**CSS**

```
#content2 {
    background: none repeat scroll 0 0 red;
    height: 200px;
    width: 1024px;
}
#content2 div:first-child {
    background: none repeat scroll 0 0 #E4ECF7;
    height: 45px;
}

#content2 div:last-child {
    background: none repeat scroll 0 0 yellow;
    border: 1px solid #E0DCD1;
    height: 45px;
} 
```

我希望这能帮到您........

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:58:34.407

您可以在 div 类中使用以下属性。

```
float:left
clear:right; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T07:40:59.797

如果您正在使用`Position: absolute;`为两个 div 指定边距。

例如：

```
#content2 div:last-child
    {
    width:1024px;
    height:200px;
    position:absolute;
    margin-top: xxx; /* specify the top margin */
    border:1px solid #E0DCD1;
    clear:both;
    } 
```

# objective-c - 带有两个自定义按钮的 NSToolBar

> ID：11357779
> 
> 赞同：1
> 
> 时间：2012-07-06T07:33:20.527
> 
> 标签：objective-c, cocoa, nstoolbar, nstoolbaritem

我是mac开发的初学者。我正在使用工具栏开发应用程序。我只想在工具栏中添加两个自定义按钮。

工具栏将如下所示。我用XIB试过这个，但我没有得到这个东西，.,。![这个](../Images/0e757c2d5bb09fd61d8db46219fec1a0.png)

关于这个的任何想法，。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:23:02.520

简短的回答：您需要**验证**每个不是默认的工具栏项。

* * *

长答案：

1.  首先，您需要将代码中的*操作*`NSToolbarItem`连接到 a `IBAction`。
2.  那么你有两个选择：
    *   让自动验证器通过简单地检查是否存在有效的目标/动作对来完成他的工作。
    *   **自己验证**每个工具栏项。您可以在此处查看是否有任何要*复制/粘贴的内容*

验证示例：

```
- (BOOL)validateUserInterfaceItem:(id < NSValidatedUserInterfaceItem >)theMenuItem {
    BOOL enable = NO;

    if ([theMenuItem action] == @selector(myCopy:)) {
        if (isThereSomethingToCopy)
            enable = YES;
    }
    else if ([theMenuItem action] == @selector(myPaste:)) {
        if ( (isThereSomethingToPaste) && (thereIsValidPasteTarget) )
            enable = YES;
    }
    return enable;
} 
```

# android - 在 Android 中使用 OpenCV 进行头发检测

> ID：11357780
> 
> 赞同：1
> 
> 时间：2012-07-06T07:33:22.077
> 
> 标签：android, opencv

是否可以在 Android 中使用 opencv 检测黑发，我尝试了几个显示人脸检测的示例。但是现在我如何检测头发？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:58:57.957

这只是一个想法，但您可以尝试以下方法：

1-检测人脸

2-将投资回报率扩大一定的因素（玩一下）

3- 基于颜色的方法检测头发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T04:12:41.333

试试这个

[检测肖像图像中的头发？](https://stackoverflow.com/questions/4822999/detecting-hair-in-a-portrait-image)

[http://aishack.in/tutorials/hough-transform-in-opencv/](http://aishack.in/tutorials/hough-transform-in-opencv/)

两者都是不错的。

# python - QTreeWidget 中的 Python 查询结果

> ID：11357783
> 
> 赞同：0
> 
> 时间：2012-07-06T07:33:33.923
> 
> 标签：python, pyqt4, qtreewidget

我正在研究 python 插件。我使用了**PyQt4** Designer。我想将查询结果列出到**QTreeWidget**中。我的代码如下：

```
c = self.db.con.cursor()
self.db._exec_sql(c, "select est from bio")
for row in c.fetchall():
    item_value=unicode(row[0])
    top_node1 = QTreeWidgetItem(item_value)
    self.treeWidget.insertTopLevelItem(0, top_node1) 
```

查询将值返回为：

![在此处输入图像描述](../Images/4ce7c28215aa6dd9193e777dc5dd2703.png)

但是当我使用上面的代码将这些值列出到**QTreeWidget**中时，如下所示：

![在此处输入图像描述](../Images/2d34075660680fa82485b45b616737da.png)

仅显示第一个字符。如果我将 self.treeWidget.insertTopLevelItem(0, top_node1) 中的“0”更改为其他数字，则**QTreeWidget**中不会出现任何内容。

我该怎么做？？？？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:09:28.737

如果您查看[QTreeWidgetItem 的文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtreewidgetitem.html)，您将看到有许多可能的构造函数用于创建实例。尽管您似乎都没有以一种会给您带来理想结果的方式使用它们。与您提供的签名最接近的匹配是：

`QTreeWidgetItem ( const QStringList & strings, int type = Type )`

这可能正在做的是获取您的字符串（我假设`row[0]`是一个字符串，因为我不知道您正在使用哪些驱动程序）并将其作为一个序列应用，这将满足`QStringList`. 因此，您得到的是用字符串值的每个字母填充项目的多个列。如果这是您想要的，那么您需要告诉您的小部件显示更多列：`self.treeWidget.setColumnCount(10)`. 但这不是你要找的我敢肯定。

您应该尝试的更有可能是创建一个新项目，然后将该值添加到所需的列：

```
item = QTreeWidgetItem()
item.setText(0, unicode(row[0]))
self.treeWidget.insertTopLevelItem(0, item) 
```

您可以使用不带参数的默认构造函数，将第一列的文本值设置为数据库记录字段值，然后将该项目添加到树中。您还可以建立一个项目列表并立即添加它们：

```
items = []
for row in c.fetchall():
    item = QTreeWidgetItem()
    item.setText(0, unicode(row[0]))
    items.append(item)
self.treeWidget.insertTopLevelItems(0, items) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:39:32.403

您的第一种方法可以纠正，只需向小部件添加一个列表，而不是这样的字符串：

top_node1 = QTreeWidgetItem([item_value])

# iphone - 使用触摸事件在imageView中进行连续触摸检测..？

> ID：11357787
> 
> 赞同：1
> 
> 时间：2012-07-06T07:33:42.710
> 
> 标签：iphone, cocoa-touch, uiimageview

我有一个调用另一个视图的方法。我想在图像连续一段时间后调用此方法。

这种类型的方法在 UIButton = touchDown(),touchup() 中找到。

触摸事件中是否有任何方法可以在图像视图中找到连续触摸。

请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:48:51.797

您可以使用点击手势，您可以看到我在[此](https://stackoverflow.com/questions/11355671/how-do-i-implement-the-uitapgesturerecognizer-into-my-program/11355713#11355713)线程中写的答案。在此您可以设置需要触发事件的点击次数。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:37:24.097

您可以将这些事件用于 UIIMAGEVIEW：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:45:08.207

假设你想计算触摸（连续双击）

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [[event allTouches] anyObject];

int index =[touch view].tag;

if (touch.tapCount == number && index == imageTag) {

}

} 
```

tapCount 将是在很短的时间间隔（双击）的持续时间内的点击计数。如果您想要观看的点击次数延迟较长（例如 5 次点击），您将无法使用它。或者，您可以记住您的 imageview 的触摸，例如：

```
 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
      UITouch *touch = [[event allTouches] anyObject];
      int index =[touch view].tag;

      if(index == imagetag){
         if([tempMutableArray count] < definiteTime){
            [tempMutableArray addObject:@"any"]
           }else{ 
            [tempMutablArray removeAllObjects]; 
            //you can call the method now
            }
      }
} 
```

# maven - 如何使用下载的andromda 版本来创建和编译Project？

> ID：11357788
> 
> 赞同：1
> 
> 时间：2012-07-06T07:33:43.237
> 
> 标签：maven, andromda

我正在使用以下命令创建 andromda 项目 mvn org.andromda.maven.plugins:andromdapp-maven-plugin:3.4-SNAPSHOT:generate

这将使用最新版本的 andromda 并使用 Web 生成项目。我希望使用下载的 andromda 目录 jar 或二进制文件创建和编译 andromda 项目。是否可以？？？如果是那怎么办？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:49:01.670

为此，请下载 andromda 版本的二进制文件，并`mvn install`在下载的 andromda 项目的主文件夹中通过命令行运行。它将开始构建并将所有 jar 放入 maven 存储库中。现在，在生成项目时，您必须传递您构建的二进制文件的 andromda 版本。它将直接转到 maven repo。

# python - 在管理员中保存时出现 Django ManyToManyField 错误？

> ID：11357793
> 
> 赞同：2
> 
> 时间：2012-07-06T07:33:54.417
> 
> 标签：python, django, django-models, django-admin

我的代码有什么问题？

```
class Group(ImageModel):
     title = models.CharField(verbose_name = "Title", max_length=7)
     photos = models.ManyToManyField('Photo', related_name='+', 
                                             verbose_name=_('Photo'),
                                             null=True, blank=True)

    .....

     pid = Photo.objects.get(image = str_path)

     gid= Group.objects.get(id = self.id)       

     self.save_photos(gid, pid)

    ....

    def save_photos(self, gid, pid):
       group_photo = GroupPhotos(groupupload=gid.id,
                                        photo=pid.id
                                        )
       group_photo.save() 
```

我的 GroupPhotos 模型是：

```
class GroupPhotos(models.Model):
    groupupload = models.ForeignKey('Group')
    photo = models.ForeignKey('Photo')
    class Meta:
        db_table = u'group_photos' 
```

当我想从管理面板中保存它时，我收到这样的值错误：

```
Cannot assign "38": "GroupPhotos.groupupload" must be a "Group" instance. 
```

使用`group_photo = GroupPhotos(groupupload=gid, photo=pid`) 定义它正在工作，但 GroupPhotos 表 (group_photos) 中没有任何更改。打印这个`print pid.id,' >>> ',gid.id`我得到了真正的关系......

**更新：**

我从早上开始一直在工作，但没有任何进展……我也尝试过，但没有任何改变：

```
pid = Photo.objects.get(image = str_path)

ger = Group.objects.get(id = self.id)
        ger.title = self.title       
        ger.save()

        ger.photos.add(pid) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:36:09.997

错误在这里：

```
group_photo = GroupPhotos(groupupload=gid.id, photo=pid.id) 
```

`groupupload`和的参数`photo`应该分别是`Group`和的实例`Photo`。尝试以下操作：

```
group_photo = GroupPhotos(groupupload=gid, photo=pid) 
```

换句话说，在创建对象时，您需要传递预期类型的​​参数而不是整数（可能是所需对象的主键，但也可能不是，这就是为什么您需要传递正确的类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:57:25.670

我已经**通过**向我的 manytomanyfield 添加选项解决了我的问题：

```
photos = models.ManyToManyField('Photo', related_name='+', 
                                     verbose_name=_('Photo'),
                                     null=True, blank=True, through=GroupPhotos) 
```

[关于 ManyToManyField.through的](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.through)一些信息：

> Django 会自动生成一个表来管理多对多关系。但是，如果要手动指定中间表，可以使用 through 选项来指定表示要使用的中间表的 Django 模型。
> 
> 此选项最常见的用途是当您希望将额外数据与多对多关系相关联时。

# wordpress - Wordpress 获取自定义帖子类型标签名称

> ID：11357797
> 
> 赞同：9
> 
> 时间：2012-07-06T07:34:04.007
> 
> 标签：wordpress, custom-post-type

我想回显一个自定义帖子类型标签/菜单名称。

例子：

我创建名为：产品的自定义帖子类型

在产品帖子类型中，我添加帖子冰淇淋。

所以我想在冰淇淋页面中回显这个示例链接：

首页/产品/冰淇淋

基本上它就像自定义帖子类型的面包屑。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-04-30T13:07:08.417

获取[post_type 对象](https://codex.wordpress.org/Function_Reference/get_post_type_object)以获取标签'`singular_name`或复数`name`，

```
$post_type_obj = get_post_type_object( 'ice_cream' );
echo $post_type_obj->labels->singular_name; //Ice Cream.
echo $post_type_obj->labels->name; //Ice Creams. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-21T12:18:31.383

如果您使用的是 wordpress 自定义帖子类型，则可以通过以下功能获取所需信息：

1.  自定义帖子类型标签

    $post_type = get_post_type_object(get_post_type($post)); $post_type->标签

2.  自定义字段标题

    $field_name = "冰淇淋"; //自定义字段“Ice Cream”的块 $field = get_field_object($field_name);

所以你可以在你的面包屑中使用它们： $post_type->label / $field['label']

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T07:40:43.073

我相信 Breadcrumb NavXT Wordpress 插件支持在面包屑导航中使用自定义帖子类型：

[http://wordpress.org/extend/plugins/breadcrumb-navxt/](http://wordpress.org/extend/plugins/breadcrumb-navxt/)

[http://mtekk.us/code/breadcrumb-navxt/](http://mtekk.us/code/breadcrumb-navxt/)

希望该插件可以帮助您解决问题。

# c# - C# Outlook 2010 获取完整的全球地址列表信息

> ID：11357800
> 
> 赞同：1
> 
> 时间：2012-07-06T07:34:17.850
> 
> 标签：c#, outlook, exchange-server

我有一些问题 - 我需要在我的机器上从 Outlook 2010 接收完整的全球地址列表。我的意思是所有领域：

职称,"名","中间名","姓氏","后缀","公司","部门","职务","商业街","商业街2","商业街3" ,"商业城市","商业州","商业邮政编码","商业国家/地区","家乡","家乡

如果我尝试从 Outlook 导出 GAL，我可以得到这个列表。但是我如何通过 C# 做到这一点？

我正在尝试这样：

```
 Application oApp = new Application();
        NameSpace oNS = oApp.GetNamespace("mapi");
        oNS.Logon("Name", "Pass", false, true);
        AddressLists oDLs = oNS.AddressLists;
        AddressList oGal = oDLs["Global Address List"];            
        string sDL = "TestDL";
        AddressEntries oEntries = oGal.AddressEntries;
        AddressEntry oDL = oEntries[sDL];    
        oEntries = oDL.Members;
        AddressEntry oEntry = default(AddressEntry);    
        for (i = 1; i <= oGal.AddressEntries.Count ; i++  )
        {
            oEntry = oGal.AddressEntries[i];
            //listBox1.Items.Add(oEntry.Name);
        } 
```

但是每个 AddressEntries[i] 只包含姓名、电子邮件，没有其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:05:49.707

使用 AddressEntry.PropertyAccessor 检索任何可用的 MAPI 属性。例如，要检索拳头名称，请检索 PR_GIVEN_NAME_W 属性 (= 0x3A06001F)。[查看带有 MFCMAPI 或OutlookSpy](http://www.dimastr.com/outspy)的通讯簿对象，以了解可用的内容和属性标签是什么。

```
givenName = AddressEntry.PropertyAccessor.GetProperty("http://schemas.microsoft.com/mapi/proptag/0x3A06001F") 
```

# wpf - WPF：占位符

> ID：11357804
> 
> 赞同：0
> 
> 时间：2012-07-06T07:34:42.087
> 
> 标签：wpf, text, textbox

是以下情况：

我有一个带有三个文本框的 WPF 项目。在这些文本框中是这样的内容：

文本框 1：

net.tcp://server1:61594/printerengine/printerserver

文本框 2：

net.tcp://server1:61594/printerengine/printeradmin

文本框 3：

net.tcp://server1:61594/printerengine/printeradmin

由于路径始终保持不变并且只有服务器名称更改的原因，应该有一个仅用于服务器名称的额外文本框。

在文本框 4 中应仅填写服务器名称：

文本框 4：

服务器1

如果要更改服务器名称，应该可以在文本框 4 中更改它，它应该会自动重命名文本框 1-3 中路径中的服务器名称。

我希望你能理解我并给我一点帮助。

问候，拉斯

谢谢您的回答。不确定它是否对我有帮助，但我找到了这个教程：

[http://msdn.microsoft.com/de-de/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/de-de/library/system.windows.data.ivalueconverter.aspx)

这是用 C# 编写的，但我将其重写为 WPF：

这是我的代码：

```
Public Class DateConverter
   Implements IValueConverter

   Public Function Convert(value As Object, targetType As Type, parameter As Object) As Object
      Dim [date] As DateTime = DirectCast(value, DateTime)
      Return [date].ToShortDateString()
   End Function
   Public Function ConvertBack(value As Object, targetType As Type, parameter As Object) As Object
      Dim strValue As String = value.ToString()
      Dim resultDateTime As DateTime
      If DateTime.TryParse(strValue, resultDateTime) Then
         Return resultDateTime
      End If
      Return value
   End Function

   Public Function Convert1(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert

   End Function

   Public Function ConvertBack1(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack

   End Function
End Class 
```

这是我的 XAML：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
   <Grid>
      <src:DateConverter x:Key="dateConverter"/>
      <TextBlock Grid.Row="2" Grid.Column="0" Margin="0,0,8,0"
           Name="startDateTitle"
           Style="{StaticResource smallTitleStyle}">Start Date:</TextBlock>
      <TextBlock Name="StartDateDTKey" Grid.Row="2" Grid.Column="1" 
    Text="{Binding Path=StartDate, Converter={StaticResource dateConverter}}" 
    Style="{StaticResource textStyleTextBlock}"/>

   </Grid>
</Window> 
```

不是真的工作。谁能帮助我？谢谢你。

问候，拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:27:43.833

尝试使用[`StringFormat`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)，像这样 -

```
<TextBlock Text="{Binding Path=Text, ElementName=Textbox4Name, 
                   StringFormat='net.tcp://\{0\}/printerengine/printerserver' /> 
```

参考 - [http://elegantcode.com/2009/04/07/wpf-stringformat-in-xaml-with-the-stringformat-attribute/](http://elegantcode.com/2009/04/07/wpf-stringformat-in-xaml-with-the-stringformat-attribute/)

# css - 侧边栏背景流到底部

> ID：11357805
> 
> 赞同：0
> 
> 时间：2012-07-06T07:34:47.177
> 
> 标签：css

我遇到了一个问题，由于某种原因，在 IE 中，我页面底部的背景没有扩展。这在 Firefox 中似乎可以正常工作，但在 IE 中却不行。如下图所示。 ![破碎的背景](../Images/8ac926003446958a7426b7e65cc51a21.png)

![工作背景](../Images/fe9f96cd7f5a890deb77691442b638ac.png)

CSS：

```
#SecondaryContent
{
background: url(../images/background_slice.png) repeat-y 0% 0%;
width: 18%;
overflow: hidden;
float: left;
}

#Container
{
overflow:hidden; 
min-height:100%; 
height:auto!IMPORTANT; 
height:100%; /* Old browsers */

 /* IE9 SVG, needs conditional override of 'filter' to 'none' Doesn't seem to work!
 background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2VkZmRmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjE4JSIgc3RvcC1jb2xvcj0iI2IzZTllZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjE4JSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+); */
background: -moz-linear-gradient(left,  #edfdff 0%, #b3e9ef 18%, #ffffff 18%, #ffffff 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,#edfdff), color-stop(18%,#b3e9ef), color-stop(18%,#ffffff), color-stop(100%,#ffffff)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left,  #edfdff 0%,#b3e9ef 18%,#ffffff 18%,#ffffff 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left,  #edfdff 0%,#b3e9ef 18%,#ffffff 18%,#ffffff 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left,  #edfdff 0%,#b3e9ef 18%,#ffffff 18%,#ffffff 100%); /* IE10+ */
background: linear-gradient(left,  #edfdff 0%,#b3e9ef 18%,#ffffff 18%,#ffffff 100%);      /* W3C */
/*filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#edfdff', endColorstr='#ffffff',GradientType=1 );*/ /* IE6-8 */

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:44:28.420

我自己解决了这个问题，方法是使用这个 Javascript 来调整 div 的高度以适应主 div。

```
<script type="text/javascript">
     var theHeight = $("#PrimaryContent").height() + 100;
     $('#SecondaryContent').height(theHeight);
</script> 
```

# google-apps-script - 向 Google 文档添加自定义菜单

> ID：11357808
> 
> 赞同：0
> 
> 时间：2012-07-06T07:34:56.487
> 
> 标签：google-apps-script, google-docs

我正在发现 Google App Script，我被它的潜力所吸引。

我想通过添加自定义菜单来改进 Google 文档。我在电子表格中找到了许多制作方法，但没有任何文档。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T21:40:10.847

来自：[https://developers.google.com/apps-script/reference/document/document-app#getActiveDocument()](https://developers.google.com/apps-script/reference/document/document-app#getActiveDocument())

```
 // Add a custom menu to the active document, including a separator and a sub-menu.
 function onOpen() {
   DocumentApp.getUi()
       .createMenu('My Menu')
       .addItem('My Menu Item', 'myFunction')
       .addSeparator()
       .addSubMenu(DocumentApp.getUi().createMenu('My Submenu')
           .addItem('One Submenu Item', 'mySecondFunction')
           .addItem('Another Submenu Item', 'myThirdFunction'))
       .addToUi();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:43:06.023

不能将 Document 作为脚本的容器，因此不能将菜单项添加到 Document。

您可以订阅[问题跟踪器上](http://code.google.com/p/google-apps-script-issues/issues/detail?id=721)有一个未解决的问题。

# java - 来自另一个类的android调用函数

> ID：11357809
> 
> 赞同：0
> 
> 时间：2012-07-06T07:34:58.560
> 
> 标签：java, android, eclipse

我有主要的“tabHost”布局，它的框架内容设置在另一个包含 webview 的布局“内容”上。“Tabbar”类设置tabhost布局，“second”类设置其框架内容。

问题是，当我从“Tabbar”类中尝试使用以下在参数上崩溃的代码来设置 webview 高度时，

```
WebView webviewA = (WebView) findViewById(R.id.webviewA);     
LayoutParams params = (LayoutParams) webviewA.getLayoutParams();
params.height -= 300; 
```

已经尝试从 Tabbar 调用 webviewA 的函数，

标签栏类

```
second recalcula = new second();
recalcula.recalcula(); 
```

二等

```
public void recalcula (){
    webviewA = (WebView) findViewById(R.id.webviewA);
    LayoutParams params = (LayoutParams) webviewA.getLayoutParams();
    params.height -= 300;
    webviewA.setLayoutParams(params);
} 
```

在参数上也崩溃了......我做错了什么？谢谢你。

日志错误

```
 07-06 10:14:39.893: E/AndroidRuntime(11023): FATAL EXCEPTION: main
    07-06 10:14:39.893: E/AndroidRuntime(11023): java.lang.NullPointerException
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at com.xxxxx.projecte1.second.recalcula(second.java:70)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at com.xxxxx.projecte1.TabBar.onReceiveAd(TabBar_iOSActivity.java:493)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at com.google.ads.internal.d.B(SourceFile:1116)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at com.google.ads.internal.c$e.run(SourceFile:187)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at android.os.Handler.handleCallback(Handler.java:587)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at android.os.Handler.dispatchMessage(Handler.java:92)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at android.os.Looper.loop(Looper.java:138)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at android.app.ActivityThread.main(ActivityThread.java:3701)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at java.lang.reflect.Method.invokeNative(Native Method)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at java.lang.reflect.Method.invoke(Method.java:507)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
    07-06 10:14:39.893: E/AndroidRuntime(11023):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:31:20.837

您可以使用反射。

这是一个例子； [http://aaarkonusurum.blogspot.com/2012/02/android-ile-reflection.html](http://aaarkonusurum.blogspot.com/2012/02/android-ile-reflection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:54:02.037

如果 LayoutParams 是从另一个类而不是活动调用的，那么导入部分中的可能不是正确的。什么情况下更喜欢使用 LinearLayout.LayoutParams，或者 LayoutParams 的类型是什么，在设置或获取布局参数时。

当你试图

```
setLayoutParams(new LinearLayout.LayoutParams(FILL_PARENT, FILL_PARENT)); 
```

并且实际的父布局参数是相对的，那么这是一个问题。获得它们时的情况相同。我不知道为什么，但是在非活动类中，布局参数不会始终导入正确的参数。

# c++ - 为 QRectF 设置 topLeft 和 bottomRight

> ID：11357816
> 
> 赞同：0
> 
> 时间：2012-07-06T07:35:31.133
> 
> 标签：c++, qt

我的问题是，当我将值设置为 QPointF 时，当我检查它们的真实值时，会得到像 1.32841e+09 这样的奇怪值。当我在 while 循环的第六行打印出来时，我没有得到这些值。

```
void MainView::showAllGraphs(){
     QMapIterator<QString, QRectF> i(graphRectangles);
     QPointF topLeft;
     QPointF bottomRight;
     QRectF maxRect;
while (i.hasNext()) {
     i.next();
     qreal tlX = i.value().topLeft().x();
     qreal tlY = i.value().topLeft().y();
     qreal brX = i.value().bottomRight().x();
     qreal brY = i.value().bottomRight().y();
     QTextStream(stdout) << tlY << " " << brY << endl;
     if(tlY < topLeft.y()){
         topLeft.setY(tlY);
         topLeft.setX(tlX);
     }
     if(brY > bottomRight.y()){
         bottomRight.setY(brY);
         bottomRight.setX(brX);
     }
}
maxRect.setTopLeft(topLeft);
maxRect.setBottomRight(bottomRight);
QTextStream(stdout) << topLeft.y() << " x " << topLeft.y() << endl;
graphicsScene>setSceneRect(maxRect);
graphicsView->fitInView(maxRect);
matrixUpdated(graphicsView->matrix());
} 
```

第一次打印时，我得到 -100 到 100 之间的值（这是有效的）。当我最后打印出来时，我突然得到一个像 2.45841e+09 或有时是 0 的值。我不希望它变成那个值。

那么这种价值变化的原因是什么？我无法弄清楚为什么它被设置为这样的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:58:57.823

`topLeft`未初始化。

仅当满足您的条件时才为`topLeft`(or )赋值。`bottomRight`因此，请确保将矩形初始化为合理的值，以便在 if 语句中进行有意义的比较。

此外，`topLeft`不会像您假设的那样*改变。*在 while 循环中，您打印 map 的元素（`tl`和`br`），**而不是**在 while 循环之后打印的（未初始化的）`topLeft`。这就是为什么你会得到不同的结果。

# spring - 实体管理器不会将数据保存在数据库中

> ID：11357817
> 
> 赞同：4
> 
> 时间：2012-07-06T07:35:33.517
> 
> 标签：spring, jpa

通过实体管理器，我试图将实体持久保存在数据库中，但我没有设法持久保存它。这是我的配置。

我有这个实体：

```
@Entity
@Table(name = "User")
public class UserModel implements Serializable, ModelItem {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    @Column(nullable = false)
    private String username;

    @Column(nullable = false)
    private String password;

    @Column(nullable = false)
    private String name;

    private String surname;

    private String notes;

    private String cellphone;

    @Column(nullable = false)
    private String email;

    private Boolean enabled;

    //get and set methods
    .....
} 
```

和我的持久性导入bean：

```
@Repository
public class ImportServiceImpl implements ImportService {

    @PersistenceContext
    protected EntityManager entityManager;

    @Transactional
    public boolean importExample() {
        User u= new User();
        u.setUsername("username");
        u.setPassword("password");
        u.setName("name");
        u.setEmail("email");
        entityManager.persist(u);
    }
} 
```

实体管理器和数据库连接的弹簧配置：

```
<tx:annotation-driven transaction-manager="transactionManager" />
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />
<tx:annotation-driven />
<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/> 
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" /> <!-- Prints used SQL to stdout -->
            <property name="generateDdl" value="true" /> <!-- Generates tables. -->
            <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect" />
        </bean>
    </property>
</bean>
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url">
        <value>${db.url}</value>
    </property>
    <property name="username">
        <value>${db.username}</value>
    </property>
    <property name="password">
        <value>${db.password}</value>
    </property>
</bean>
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

和我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
             version="1.0">
    <persistence-unit name="application" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/testdata"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.password" value="password"/>
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
        </properties>

    </persistence-unit>
</persistence> 
```

因此，当我运行我的示例时，我没有收到任何错误，但实体没有保留。我还尝试在坚持后添加 entityManager.flush() 但在这种情况下我收到此错误：

```
javax.persistence.TransactionRequiredException: no transaction is in progress
    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:793) 
```

所以我认为我的 Transactional bean 没有很好地绑定到该方法，但我无法理解原因。有人知道为什么吗？

我还在 STS 中注意到，对于此事务，生成了 2 个具有相同数据的 bean，它看起来很奇怪（我不知道这是 STS 的错误还是我的配置中的问题，它创建了 2 个 bean）：

![在此处输入图像描述](../Images/1cbc775a0d28bf9d00fc7d567f893c6a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-12T23:50:57.503

我遇到了与描述的问题类似的问题。我发现错误使用 @Transactional 表示法的问题，特别是我错误地使用了 javax.transaction.Transactional 而不是 org.springframework.transaction.annotation.Transactional

可以在[javax.transaction.Transactional 与 org.springframework.transaction.annotation.Transactional中找到差异的详细描述](https://stackoverflow.com/questions/26387399/javax-transaction-transactional-vs-org-springframework-transaction-annotation-tr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:46:32.457

也许尝试在 @PersistenceContext 注释中指定持久性单元名称“应用程序”？

@PersistenceContext(unitname = "应用程序")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T07:23:24.080

我也遇到了同样的问题，因为 Repoker 说 Persistence provider 没问题，但我的事务管理器被搞砸了。我像这样在 application-config.xml 中添加了 transactionManager bean

```
<bean id="transactionManager" cass="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="myEntityManagerFactory" />
</bean> 
```

现在它工作正常！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T00:00:54.630

您的上下文配置中有`<tx:annotation-driven />`两次。我不确定这是一个合法的配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-12T20:23:34.823

你可以`entityManager.flush()`在坚持和合并之后使用它可以解决你的问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-02T07:57:19.243

我有一个类似的问题，@Transactional 没有使用 EntityManager 在数据库中保留实体。为了解决这个问题，我们可以手动提交事务。

```
entityManager.getTransaction().begin();
entityManager.persist(post);
entityManager.getTransaction().commit(); 
```

# android - 服务中的 AsyncTask - 矫枉过正？

> ID：11357818
> 
> 赞同：2
> 
> 时间：2012-07-06T07:35:33.990
> 
> 标签：android

我目前正在做一些与网络相关的事情，

```
public void postData() {

HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.xx.xx.php");

try {

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
} 
```

在我从服务执行的异步任务中。

我想知道的是它是否足以直接在服务中运行网络方法？因为 AFAIK 它不在 UI 线程上运行。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:38:34.917

An`IntentService`有自己的线程，您不需要在 UI 线程上`AsyncTask`正常`Service`运行，您需要将需要很长时间的操作移至另一个线程（如使用`AsyncTask`）。[文档](http://developer.android.com/reference/android/app/Service.html)`Service`中说明了在主 UI 线程上的运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:39:40.443

从[文档](http://developer.android.com/reference/android/app/Service.html)：

服务不是一个单独的进程。Service 对象本身并不意味着它在自己的进程中运行；除非另有说明，否则它在与其所属的应用程序相同的进程中运行。

因此，除非您使用，否则这不是矫枉过正`IntentService`

# visual-c++ - 更新工具栏按钮状态 MFC

> ID：11357821
> 
> 赞同：2
> 
> 时间：2012-07-06T07:36:03.370
> 
> 标签：visual-c++, mfc, toolbar

我在 MFC 应用程序中有一个对话框，它有菜单栏。现在，我使用菜单栏中的相同命令 ID 在该对话框中创建了一个工具栏。

我用来更新菜单项的状态，并根据某些签入启用/禁用它`ON_UPDATE_COMMAND_UI`，当我单击菜单时。但是对于工具栏，我没有收到这些调用来更新它的状态，如果它应该被启用/禁用。

此外，当测试失败并且我禁用该项目时，我没有任何通知。

有没有其他方法可以做到这一点？

谢谢

`ON_UPDATE_COMMAND_UI`只有当我单击工具栏按钮时才会调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:10:09.023

Use MFC in a dialog can be frustrating.

I suggest you disable the toolbar button directly when changing state to the variable that will enable / disable the menu:

```
void CtestDlg::OnBnClickedButton_DisableSomeControls()
{
command_menu_1 = !command_menu_1;
m_ToolBar.GetToolBarCtrl().EnableButton(ID_COMMAND_TEST, command_menu_1);
} 
```

is not very elegant, but it works!

# bash - 如何在bash中使用表达式作为循环计数器？

> ID：11357823
> 
> 赞同：5
> 
> 时间：2012-07-06T07:36:06.287
> 
> 标签：bash, loops

我是 Linux 世界的新手，我使用 Bash shell 并进行了一些练习。我怎样才能执行一个循环给出一个表达式作为计数器？例如循环遍历文件中的单词量。

```
for n in(wc -w text.txt)
 do
   echo "word number $n"
 done 
```

不幸的是，上面的脚本不起作用。到目前为止我发现的唯一方法是首先打印 wc -w text.txt 的值，然后将其分配给一个变量，然后循环：

```
wc -w text.txt
a=10   //result saw by wc -w text.txt
for((b=0; b<a; b++))
do
echo "$b"
done 
```

问题是我需要检索 wc -c 的值并将其直接赋值给一个变量，以防我必须编写一个自动运行的脚本，问题是

```
a= wc -w test.txt 
```

不管用，

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:14:24.033

一个干净的方法是

```
tmp=$(wc -w <text.txt)
for ((i=0; i<$tmp; i++))
do 
    echo $i; 
done 
```

该`<text.txt`部分是必要的，因为通常`wc`命令的输出是

```
wordcount1  INPUTFILE1
wordcount2  INPUTFILE2
... 
```

的最大值`i`必须等于文件的字数，因此您必须`INPUTFILE1`在循环按预期工作之前删除该部分。使用输入流`<`而不是文件名可以解决这个问题。

使用临时变量可以防止`wc`在每次迭代中被调用。

# javascript - 继承问题

> ID：11357826
> 
> 赞同：1
> 
> 时间：2012-07-06T07:36:09.863
> 
> 标签：javascript, inheritance, extjs, extjs4.1, extend

我创建了 3 个类如下

1.  Ext.mine.TextParent - 从 Textfield 继承
2.  Ext.mine.child.TextChildA - 从 Ext.mine.TextParent 继承
3.  Ext.mine.child.TextChildB - 从 Ext.mine.TextParent 继承

这样，Child A 和 Child B 类是兄弟姐妹，因为它们都继承自 Parent 类。

我已经向父类添加了一个新的配置属性作为 testConfig，默认值为`{}`.

在`initComponent`Child A 类中，我为此 testConfig 分配了一个新键：值 -`me.testConfig.childAKey='Child A Value';`

现在，有一个表单使用了所有三个文本字段，并且在 textChildB 类型的 afterrender 中，我正在打印它的 testConfig 的值。

由于在 Child B 中未修改 testConfig 的值，因此，预计这应该打印空白对象（因为此 testConfig 的 parent 中的默认值是空白对象）。

但它实际上打印了 Child A 的值。

Child A 和 Child B 是兄弟姐妹，那么 Child A 的值怎么会传给 Child B？

有人可以指导一下这背后的原因吗？

下面是测试用例：

```
<html>
    <head>
        <title>Inheritance Test</title>
        <link rel='stylesheet' href='resources/extjs/resources/css/ext-all.css' />
        <script type='text/javascript' src='resources/extjs/ext-all-dev.js'></script>

        <script type='text/javascript'>

            //Defining the Parent below
            Ext.define('Ext.mine.TextParent', {
                extend: 'Ext.form.field.Text',
                alias: 'widget.textParent',
                testConfig:{}
            });

            //Defining the Child A below
            Ext.define('Ext.mine.child.TextChildA', {
                extend: 'Ext.mine.TextParent',
                alias: 'widget.textChildA',
                initComponent:function(){
                    var me  =   this;
                    me.testConfig.childAKey     =       'Child A Value';//Adding the key value to Child A
                    me.callParent();
                }
            });

            //Defining the Child B below
            Ext.define('Ext.mine.child.TextChildB', {
                extend: 'Ext.mine.TextParent',
                alias: 'widget.textChildB'
            });
        </script>

        <script type='text/javascript'>

            Ext.onReady(function(){
                Ext.create('Ext.form.Panel', {
                    title: 'Basic Form',
                    renderTo: Ext.getBody(),
                    width: 350,
                    url: 'save-form.php',
                    items: [{
                        xtype: 'textParent',//Creating field for Parent
                        fieldLabel: 'Text Parent',
                        flex:1
                    },{
                        xtype: 'textChildA',//Creating field for Child A
                        fieldLabel: 'Text Child A',
                        flex:1
                    },{
                        xtype: 'textChildB',//Creating field for Child B
                        fieldLabel: 'Text Child B',
                        flex:1,
                        listeners:{
                            afterrender:function(){
                                /*
                                    **Printing to console the value of testConfig for Child B
                                    **Instead of giving a blank object, it is giving the values of Child A - childKey:Child A Value
                                    **How the value from a sibling got associated with another one?
                                */
                                console.log(this.testConfig);
                            }
                        }
                    }]
                });
            });
        </script>

    </head>
    <body>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:40:26.570

这里的问题是您试图继承一个对象（通过引用传递），它的工作方式与 Extjs 中的数字和字符串等值类型传递完全不同。如果您将示例更改为：

```
<script type='text/javascript'>

            //Defining the Parent below
            Ext.define('Ext.mine.TextParent', {
                extend: 'Ext.form.field.Text',
                alias: 'widget.textParent',
                testConfig:"cheese"
            });

            //Defining the Child A below
            Ext.define('Ext.mine.child.TextChildA', {
                extend: 'Ext.mine.TextParent',
                alias: 'widget.textChildA',
                constructor:function(){
                    var me  =   this;
                    me.testConfig     =       'Child A Value';//Adding the key value to Child A
                    me.callParent();
                }
            });

            //Defining the Child B below
            Ext.define('Ext.mine.child.TextChildB', {
                extend: 'Ext.mine.TextParent',
                alias: 'widget.textChildB'
            });
        </script> 
```

它将正常工作，因为 testConfig 现在是按值传递的字符串类型。这背后的原因是因为 Extjs 不是为了在子类中创建新的对象实例而设计的，因为 javascript 中对象的深层副本非常复杂，甚至对于许多对象来说都是不可能的。这是因为一些深拷贝甚至可能没有逻辑意义（想想拷贝一个有循环引用的对象，拷贝函数怎么知道什么时候停止？）。由于某些深拷贝在对象上没有逻辑意义，因此没有通用的解决方案来进行深拷贝，因此如果您在继承树的最高级别创建一个对象，该对象实际上将是相同的实例每个子类的那个对象。

如果您注意到 extjs 核心代码，几乎 100% 的时间，所有配置选项都是按值类型传递的，这就是您应该遵循的模型。在您提供的示例中，当您可以将所有这些配置选项放在类级别时，创建配置选项对象在逻辑上没有必要，这在逻辑上意味着相同的事情。

我想如果您真的想简化我在这里要说的内容，可以归结为按引用传递与按值传递。如果您希望继承按应有的方式工作，则只能对配置选项使用按值传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:21:34.193

在不创建 textChildA 自己的 testConfig“实例”的情况下，this.testConfig 正在更改父级的值，尝试在 textParent xtype 字段上添加相同的侦听器，您将看到该值包含 childAKey 和值。

```
Ext.define('Ext.mine.child.TextChildA', {
            extend: 'Ext.mine.TextParent',
            alias: 'widget.textChildA',
            initComponent:function(){
             Ext.apply(this,{
        testConfig:{'childAKey':"valuea"}
        });
        this.callParent(arguments); 
            }
        }); 
```

# struts - 用于 html 选择的具体表单 bean

> ID：11357828
> 
> 赞同：0
> 
> 时间：2012-07-06T07:36:20.417
> 
> 标签：struts

我`<html:select>`在我的一个jsp页面中使用了多项选择。为了存储选择，我应该在与此列表关联的表单 bean 中具有哪些变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:18:58.513

直接来自[文档](http://struts.apache.org/1.x/struts-taglib/tagreference.html#html%3aselect)：

> 此标记以两种模式运行，具体取决于多重属性的状态，这会影响您应该使用的关联属性的数据类型：
> 
> *   未选择 multiple="true" - 相应的属性应该是任何支持的数据类型的标量值。
> *   选择了multiple="true" - 相应的属性**应该是任何支持的数据类型的数组**。

（强调我的）

# php - Apple 的推送通知服务实施选项

> ID：11357834
> 
> 赞同：1
> 
> 时间：2012-07-06T07:37:01.930
> 
> 标签：php, ios, http, apple-push-notifications

基本上我想要做的是拥有一台服务器，它执行以下操作：

*   每 # 分钟查询一次 RSS 提要以获取更新
*   如果有更新，请向我的 iOS 应用发送推送通知

我为实现 Apple 的推送通知服务而阅读的所有教程都使用 PHP 脚本服务器端。我怎样才能适应这个有一个连续运行的过程？

**注意：**我做了很少的服务器工作，所以如果对任何答案给出解释，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:41:50.460

为什么需要一个持续运行的流程？您可以使用[Crontab](http://www.adminschoice.com/crontab-quick-reference)查询 RSS 提要并在完成时调用“是否有任何更新 -> 发送推送通知”脚本。

您是否依赖 PHP 或者您打算在服务器端使用哪种技术？

// 编辑：您不必坚持使用 PHP，例如我正在运行 Tomcat 服务器 (Java)。为了发送 APNS，我使用了第三方库[javapns](http://code.google.com/p/javapns/)。

# android - RuntimeException (ComponentInfo) 空指针异常

> ID：11357838
> 
> 赞同：0
> 
> 时间：2012-07-06T07:37:19.053
> 
> 标签：android

我试图找出我的问题出在哪里。我知道问题是 NullPointerException。但我不知道为什么。

我只有一个启动活动的按钮。

这是导致问题的代码部分。如果我删除 startactivity 它工作正常。并且该异常仅在 Intent.Method1 成功结束后发生。

```
methodtest(parm1);

try{
        startActivity( IntentFactory.Method1(parm1, parm2) );
    } catch(ActivityNotFoundException e){
        showToast(getText(R.string.error1));
    } 
```

这是我的异常日志。

> 07-06 08:09:03.176: E/AndroidRuntime(2385): java.lang.RuntimeException: 无法启动活动 ComponentInfo{net.apptest.app1/net.apptest.app1.activities.TabbedNavigationActivity}: java.lang.RuntimeException ：无法启动活动 ComponentInfo{net.apptest.app1/net.apptest.app1.activities.ExtrasActivity}：java.lang.NullPointerException
> 07-06 08:09:03.176：E/AndroidRuntime(2385)：原因：java。 lang.RuntimeException: 无法启动活动 ComponentInfo{net.apptest.app1/net.apptest.app1.activities.ExtrasActivity}: java.lang.NullPointerException
> 07-06 08:09:03.176: E/AndroidRuntime(2385): at net .apptest.app1.abstivities.AbstractHttpActivity.registerOnClickListener(AbstractHttpActivity.java:262)
> 07-06 08:09:03.176: E/AndroidRuntime(2385): 在 net.apptest.app1.activities.MainActivity.onCreate(MainActivity.java:309)
> 07-06 08:09:03.176: E/AndroidRuntime(2385) : 在 net.apptest.app1.activities.ExtrasActivity.onCreate(ExtrasActivity.java:18)
> 07-06 08:17:38.779: E/AndroidRuntime(2699): java.lang.RuntimeException: 无法启动活动 ComponentInfo{net. apptest.app1/net.apptest.app1.activities.TabbedNavigationActivity}：java.lang.RuntimeException：无法启动活动 ComponentInfo{net.apptest.app1/net.apptest.app1.activities.ExtrasActivity}：java.lang.NullPointerException
> 07-06 08:17:38.779：E/AndroidRuntime(2699)：原因：java.lang.RuntimeException：无法启动活动 ComponentInfo{net.apptest.app1/net.apptest.app1.activities.ExtrasActivity}：java。 lang.NullPointerException
> 07-06 08:17:38.779: E/AndroidRuntime(2699): 在 net.apptest.app1.abstivities.AbstractHttpActivity.registerOnClickListener(AbstractHttpActivity.java:262)
> 07-06 08:17:38.779: E/AndroidRuntime (2699): 在 net.apptest.app1.activities.MainActivity.onCreate(MainActivity.java:309)
> 07-06 08:17:38.779: E/AndroidRuntime(2699): 在 net.apptest.app1.activities.ExtrasActivity。 onCreate(ExtrasActivity.java:18)

AbstractHTTPActivity 中的第 262 行：

```
 * @param v
     *            The view an OnClickListener should be registered for
     * @param id
     *            The id used to identify the item clicked (<code>ITEM_*</code>
     *            statics)
     */
    protected void registerOnClickListener(View v, final int id) {
        v.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                onItemClicked(id);
            }
        });
    } 
```

MainActivity 中的第 309 行：

> mDB2S = (Button) findViewById(R.id.ButtonDB2S);
> registerOnClickListener(mDB2S, ITEM_DB2S);

ExtrasActivity 中的第 18 行：

> super.onCreate(savedInstanceState);

还有我的 layout.xml

```
 <Button
                android:id="@+id/ButtonDB2S"
                android:layout_width="fill_parent"
                android:layout_height="65dp"
                android:layout_gravity="center_vertical"
                android:layout_weight="1"
                android:drawableLeft="@drawable/ic_menu_help"
                android:text="@string/db2" /> 
```

这是我的 IntentFactory.Method1。它只启动一个视频，它通常可以正常工作。我在第二个地方使用这种方法，它毫无例外地工作。Methodtest 是另一种运行良好的方法，只有 startActivity 行导致了这个问题。

```
 public static Intent Method1 (String parm1, String parm2) {
        Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(parm1), "video/*");     
        return intent;
    } 
```

编辑：我已经调试了更多，并发现了 NullPointerException 发生的位置。在 MainActivity 上，我在启动时将按钮加载到 mDB2，它工作正常。在我退出由 IntentFactory.Method1 启动的视频播放器后，视图被重新加载，这意味着 MainActivity 再次启动。但是现在 mDB2 找不到按钮并且为 NULL。但是在第一次运行时它可以正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:21:44.063

我已经解决了我的问题。解决方案非常简单，我之前没有检查过。我错过了将按钮添加到横向布局:(

该应用程序会在电影播放器​​退出后更改方向，并且由于横向布局中缺少该按钮，因此我遇到了 NullPointerException。

很抱歉之前没有检查。

# paypal - opencart 1.5.1.3 encrypt() paypal pro iframe

> ID：11357840
> 
> 赞同：0
> 
> 时间：2012-07-06T07:37:25.023
> 
> 标签：paypal, opencart

我正在使用 Opencart 1.5.1 并尝试通过 iframe 实现 pay pal pro。我有一个模块，但它不起作用。在日志中我发现：

致命错误：在线调用 .../controller/payment/pp_standard.php 中的非对象上的成员函数 encrypt()

当我尝试添加

```
 $registry->set('encryption', new Encryption($config->get('config_encryption'))); 
```

到 index.php 我的主页是空白的，并且在选择付款方式时结帐停止（它不可见）。任何如何在不升级 OC 的情况下解决 thios 的想法（对模板文件进行了许多更改，升级后无法正常工作）。

亲切的问候，阿雷克

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-07T06:07:08.957

还将您的错误报告设置为打开，这样您就可以看到错误，而不仅仅是空白页。

# mysql - 在 mySQL 查询中交叉引用表？

> ID：11357844
> 
> 赞同：2
> 
> 时间：2012-07-06T07:37:42.600
> 
> 标签：mysql, inner-join

我有两张桌子。一个是具有唯一 id 字段的用户表，另一个是数据表，其中包含生成该数据的用户 ID 的列。

我想做类似的事情，`SELECT data,genned_by FROM datatable;` 但我想`genned_by`用`SELECT username FROM users WHERE id = genned_by`

这样查询的结果就会将用户标识更改为与另一个表对应的用户名。

我做了一些研究，并认为`INNER JOIN`可能是我正在寻找的东西，但我在阅读后非常不确定如何使用它。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:42:26.113

尝试使用

```
SELECT d.data, u.username FROM database d INNER JOIN user u ON u.id=d.genned_by 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T07:40:19.877

```
SELECT datatable.data,users.username 
FROM datatable, users
WHERE users.id = datatable.genned_by 
```

# python - 检测base64的正则表达式

> ID：11357851
> 
> 赞同：1
> 
> 时间：2012-07-06T07:38:05.987
> 
> 标签：python, regex, base64

我读了一篇关于检测base64的正则表达式的文章，但是当我在“yara python”中尝试它时，它给出了“未终止的正则表达式”的错误，正则表达式是：

> (?:[A-Za-z0-9+/]{4}){2,}(?:[A-Za-z0-9+/]{2}[AEIMKUYcgkosw048]=|[A-Za-z0 -9+/][AQgw]==)

有人可以提出建议吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:43:41.953

这个对我有用：

```
>>> import re
>>> re.compile(r'(?:[A-Za-z0-9+/]{4}){2,}(?:[A-Za-z0-9+/]{2}[AEIMQUYcgkosw048]=|[A-Za-z0-9+/][AQgw]==)')
<_sre.SRE_Pattern object at 0x2865c40> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:46:19.277

我建议`/`在块中转义字符`[A-Za-z0-9+/]`，因为在未转义时它定义了正则表达式开始/结束。

# asp.net-mvc - 找不到 CrystalImageHandler.aspx

> ID：11357854
> 
> 赞同：7
> 
> 时间：2012-07-06T07:38:20.873
> 
> 标签：asp.net-mvc, crystal-reports, report

我在 MVC3 应用程序的普通 ASP.NET aspx 页面上使用 Crystal 报表查看器。在控制器操作中，我只是重定向到 aspx 页面并且报告显示正常。但问题在于动态图像。我找到了最简单的解决方案，将图像路径作为报告参数传递并将此参数设置为图像源。在 Visual Studio 预览中，这工作正常，但执行时我在页面上看到此错误。

> “网络错误：404 未找到 - *服务器*/ReportWebForms/CrystalImageHandler.aspx?dynamicimage=cr_tmp_image_4fbcb73a-e001-4365-84fc-164788dd1605.png”

所以我假设，以前没有使用水晶报表的经验，问题出在 CrystalImageHandler.aspx 中。我在 Web.config 中有这些条目：

```
 <httpHandlers><add verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/></httpHandlers></system.web>
  <handlers><add name="CrystalImageHandler.aspx_GET" verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" preCondition="integratedMode"/></handlers></system.webServer> 
```

这是 MVC 类型的问题吗？有人可以帮忙吗？

谢谢你

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-04T13:46:13.583

我遇到了同样的问题，但幸运的是我对 Crystal Reports 有一些经验。

您只需要更改 Web.config，因为“路径”属性设置为站点根目录。如果您在浏览器中打开 url 并从中删除**ReportWebForms**，它将起作用。

实际上我刚刚添加了两行配置：

```
<system.web>
    <httpHandlers>
      <add verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" />
      <!-- Added -->
      <add verb="GET" path="Reports/CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" />
      <add verb="GET,HEAD" path="asset.axd" validate="false" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
    </httpHandlers>
</system.web>

<system.webServer>
    <handlers>
      <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="CrystalImageHandler.aspx_GET" verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" preCondition="integratedMode" />
      <!-- Added -->
      <add name="CrystalImageHandler.aspx_GETR" verb="GET" path="Reports/CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" preCondition="integratedMode" />
      <remove name="asset" />
      <add name="asset" preCondition="integratedMode" verb="GET,HEAD" path="asset.axd" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
    </handlers>
</system.webServer> 
```

最后你必须为 MVC 应用程序的路由添加一个忽略规则：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.IgnoreRoute("{resource}.aspx/{*pathInfo}");
// Here is added new ignore rule
routes.IgnoreRoute("Reports/{resource}.aspx/{*pathInfo}"); 
```

就我而言，我有一个名为**Reports**的文件夹，其中放置了 .aspx 文件。我想您应该将其更改为**ReportWebForms**在您的情况下。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-27T17:26:46.833

在我的情况下，我只需要忽略 MVC 的路由。要添加到 @Hovhannes 解决方案中。您应该将此规则添加到**Routeconfig.cs**

```
routes.IgnoreRoute("{*allaspx}", new { allaspx = @".*(CrystalImageHandler).*" }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-01T20:05:07.697

将此代码用作 CrystalImageHandler.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" %>

<script runat="server" language="c#" >
    protected void Page_Load(object sender, EventArgs e)
    {
        CrystalDecisions.Web.CrystalImageHandler handler = new CrystalDecisions.Web.CrystalImageHandler();
        handler.ProcessRequest(this.Context);            
    }
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-17T07:37:52.400

答案：在 RouteConfig.cs 文件中添加这个

routes.IgnoreRoute("报告/{resource}.aspx/{*pathInfo}");

注：“Reports”为包含水晶报表查看aspx页面的目录名

[![在此处输入图像描述](../Images/14ef214a7861a3ea44da89426931ef85.png)](https://i.stack.imgur.com/bchPI.png)

# css - 页面布局在 html/css 中不起作用

> ID：11357856
> 
> 赞同：0
> 
> 时间：2012-07-06T07:38:25.643
> 
> 标签：css, html, iframe

我在尝试根据屏幕大小在页面上移动 div 时遇到问题。

我的页面（代码如下）正确显示宽度，但当用户重新调整页面大小时似乎无法正确显示高度。

我想做的是..

*   有一个显示在顶部的标题
*   左边的一个页面，里面有一个菜单
*   右侧的页面将显示页面文本
*   底部的页脚

![我想做的事情的样本](../Images/1be744cb2df115bce1b754fed7ce5ad2.png)

我的页面如下所示：

索引.htm:

```
<style type="text/css"> 
    body{
    margin:0;
    padding:0px;
    line-height: 1.5em;
    padding-bottom:10px;   /* Height of the footer */
    } 

    #topsection{
    background: #EAEAEA;
    height: 90px; /*Height of top section*/
    }
</style>

    <!-- top -->
    <div id="topsection">
        <div>
            This is the top
        </div>
    </div>

    <!-- Left side -->
    <div ID="left" STYLE="width:260px; left:0px; height:90%; float:left;">
        <iframe src="test.htm" NAME="menu" width="270px" height="100%" frameborder="0"></iframe>
    </div>

    <!-- right side -->
    <div ID="right" STYLE="height:90%; left:0px; float:left;">
        <iframe src="test1.htm" NAME="right" width="100%" height="100%" frameborder="0"></iframe>
    </div>

    <!-- footer -->
    <div ID="foot" STYLE="height:10%; left:0px; top:90%; float:left;">
        <iframe src="foot.htm" NAME="footer" width="100%" height="100%" frameborder="0"></iframe>
    </div> 
```

测试.htm:

```
<body bgcolor="#808080"> 
```

测试1.htm：

```
<body bgcolor="#88888888">
right side text 
```

脚.htm:

```
<body bgcolor="#9999999">
This is a footer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:47:37.997

你的标题：

```
#topsection{
    position:absolute;
} 
```

您的页脚：

```
#foot{
    position:absolute;
} 
```

我认为你应该使用绝对

这是有关 css 中位置“标签”的更多信息

[http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:41:53.923

对顶部栏和页脚执行此操作。希望可能适用于您的情况。

```
 #topsection{
       position:fixed;
................ 
        }
    #foot{
position:fixed;
................ 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:43:27.890

这正是你想要的。[固定页眉和页脚](http://limpid.nl/lab/css/fixed/header-and-footer)

# .net - 从网络适配器读取 MAC 地址

> ID：11357858
> 
> 赞同：0
> 
> 时间：2012-07-06T07:38:30.577
> 
> 标签：.net, networking, compact-framework, mac-address

我需要获取[Windows Mobile](http://en.wikipedia.org/wiki/Windows_Mobile)设备的[MAC 地址。](http://en.wikipedia.org/wiki/MAC_address)是否可以在不使用 OpenNetCF 的情况下仅通过[.NET Compact Framework](https://en.wikipedia.org/wiki/.NET_Compact_Framework)执行此操作？该解决方案使用 C#（[Visual Studio 2008](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2008)，一个智能设备项目）。

从 .NET 中的网络适配器读取*[MAC 地址后](https://stackoverflow.com/questions/218284/read-mac-address-from-network-adapter-in-net)*，我想使用**plinth**的示例，但设备上没有 kernel32.dll。

是否有其他方法可以在 .NET Compact Framework 中获取 MAC 地址，或者如何替换以下方法：

```
 [DllImport("Kernel32.dll", EntryPoint = "CopyMemory")]
     private static extern void ByteArray_To_IPAdapterInfo(ref AdapterInfo dst, Byte[] src, int size);
     [DllImport("Kernel32.dll", EntryPoint = "CopyMemory")]
     private static extern void IntPtr_To_IPAdapterInfo(ref AdapterInfo dst, IntPtr src, int size); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:13:55.283

如果您想获取 MAC 地址，但不使用 OpenNETCF 的 SDF 之类的库，那么您只需在自己的代码中执行相同的操作即可。您需要 P/Invoke [`GetAdaptersInfo`](http://msdn.microsoft.com/en-us/library/aa450394.aspx)，如下所示：

```
[DllImport("iphlpapi.dll", SetLastError = true)]
public static extern int GetAdaptersInfo(byte[] pAdapterInfo, ref uint pOutBufLen); 
```

您需要使用`null`第一个参数调用它一次以获取大小，然后分配一个适当大小的字节数组并调用它。它将用一个[`IP_ADAPTER_INFO`](http://msdn.microsoft.com/en-us/library/ms891170.aspx)结构数组填充它，然后您为系统中的每个适配器解析这些结构。`Address`成员是您所追求的 MAC 地址。

# android - 如何开发像会说话的汤姆猫一样的语音识别应用程序

> ID：11357862
> 
> 赞同：14
> 
> 时间：2012-07-06T07:38:36.563
> 
> 标签：android, android-layout, manifest, voice

如何开发像会说话的汤姆这样的语音识别应用程序？
1.我的要求是如何在没有任何事件（如按钮，触摸事件）的情况下识别语音）
2.所有录音样本都包含通过按钮，但我的要求是在用户通话时识别语音，当用户自动停止语音时用其他声音修改声音，如汤姆或鹦鹉
3。我已经通过按钮完成

我的.java

```
File storageDir = new File(Environment.getExternalStorageDirectory(), "SRAVANTHI");
storageDir.mkdir();
Log.d(APP_TAG, "Storage directory set to " + storageDir);
outfile = File.createTempFile("hascode", ".3gp", storageDir);

// init recorder
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
recorder.setOutputFile(outfile.getAbsolutePath());

// init player
player.setDataSource(outfile.getAbsolutePath());

try {
    recorder.prepare();
    recorder.start();
    recording = true;
} catch (IllegalStateException e) {
    Log.w(APP_TAG, "Invalid recorder state .. reset/release should have been called");
} catch (IOException e) {
    Log.w(APP_TAG, "Could not write to sd card");
}

recorder.stop(); 
```

播放按钮

```
try {
    playing = true;
    player.prepare();
    player.start();
} catch (IllegalStateException e) {
    Log.w(APP_TAG, "illegal state .. player should be reset");
} catch (IOException e) {
    Log.w(APP_TAG, "Could not write to sd card");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T13:34:22.093

先检查音量，超过一定值才录音怎么办？

也许这会有用： [android: Detect sound level](https://stackoverflow.com/questions/14181449/android-detect-sound-level)

# mysql - 字段中的mysql数组与其他表连接

> ID：11357865
> 
> 赞同：1
> 
> 时间：2012-07-06T07:38:58.177
> 
> 标签：mysql, join, field

我有 2 张桌子：`reason`,`user`

```
reason (id, reason)
user (id, name, reason_id) 
```

在数据中：

```
reason (1, 'ok'), (2, 'no problem')
user (1, 'eko', '1,2') 
```

我需要这样的视图：

```
 id | name | reason
    1  | eko  | ok, no problem 
```

有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:56:28.313

试试这个解决方案：

```
SELECT
    a.id, 
    a.name,
    GROUP_CONCAT(b.reason ORDER BY b.id SEPARATOR ', ') AS reason
FROM
    user a
INNER JOIN
    reason b ON SUBSTRING(a.reason, FIND_IN_SET(b.id, a.reason) + (FIND_IN_SET(b.id, a.reason) - 1), 1) = b.id
GROUP BY
    a.id 
```

作为旁注，您所拥有的是糟糕的数据库设计。`users`和之间的关系`reasons`是N:M（多对多）关系。*一个用户可能有很多原因；许多用户可能有一个原因*......

对这种关系建模的最佳方法是使用一个交叉引用表，该表存储 和 的唯一`userid`组合`reasonid`：

```
+-------------+   +-------------------+   +---------------+
| users       |   | users_has_reasons |   | reasons       |
+-------------+   +-------------------+   +---------------+
| userid [PK] |   | userid [PK]       |   | reasonid [PK] |
| name        |   | reasonid [PK]     |   | reason        |
| etc...      |   +-------------------+   | etc...        |
+-------------+                           +---------------+ 
```

然后要获得相同的结果，您可以这样做：

```
SELECT
    a.userid, 
    a.name,
    GROUP_CONCAT(c.reason ORDER BY c.reasonid SEPARATOR ', ') AS reason
FROM
    users a
INNER JOIN
    users_has_reasons b ON a.userid = b.userid
INNER JOIN 
    reasons c ON b.reasonid = c.reasonid
GROUP BY
    a.userid 
```

哪个**更**有效，因为您的连接将发生在索引上，并且更**易于**管理（即插入、更新、删除等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:41:59.547

```
select u.id,u.name,r.reason 
from user u left join reason r 
on u.reason_id = r.id; 
```

# linux - GRUB 阶段 1.5 的代码驻留在磁盘的什么位置，加载的地址是什么？

> ID：11357868
> 
> 赞同：6
> 
> 时间：2012-07-06T07:39:10.103
> 
> 标签：linux, boot, grub

我已经`grub v1.98`安装并在反汇编 MBR 后发现以下我不理解的代码片段：

```
xor ax,ax
mov [si+0x4],ax
inc ax
mov [si-0x1],al
mov [si+0x2],ax
mov word [si],0x10
mov ebx,[0x7c5c]
mov [si+0x8],ebx
mov ebx,[0x7c60]
mov [si+0xc],ebx
mov word [si+0x6],0x7000
mov ah,0x42
int 0x13 
```

这段代码似乎试图设置 1.5 阶段代码的磁盘地址，然后加载并运行它。但是，我怎样才能确定它试图读取哪个物理块？更何况，stage 1.5 代码的目的地是什么？`0x7000`?

我指的是 Windows 7 的 MBR，其中加载了后续启动代码`0x7c00`。给定 MBR 首先在 address 加载`0x7c00`，它包含一段将 MBR 复制`0x7c00`到的代码`0x0600`，然后分支到`0x0600`，以防原始代码损坏。加载阶段 1.5 的代码会`0x7000`与原始代码冲突吗？更重要的是，我还发现：

```
jmp short 0x65
nop
sar byte [si+0x7c00],1
mov es,ax
mov ds,ax
mov si,0x7c00
mov di,0x600
mov cx,0x200
cld
rep movsb
push ax
push word 0x61c
retf 
```

在 MBR 的开头。除了第一条指令外，代码似乎试图做与 Windows 7 的 MBR 相同的事情，将原始 MBR 从复制`0x7c00`到。这些代码实际上会执行吗？如果是，什么时候控制跳转到这里。（我相信答案是肯定的，但被领先者弄糊涂了）。`0x0600``jmp``jmp`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T00:54:23.417

GRUB 1.98 是 GRUB 版本 2。在版本 2 中，不再有阶段 1.5。阶段 1.5 在 MBR 和第一个分区之间有一个固定的位置。它（通常）是硬盘驱动器上未使用的空间。GPT 分区和其他（不寻常的）布局不提供此空间。

在 GRUB v2 阶段 1 中加载 core.img，它可以存储在任何 LBA48 位置，通常在 MBR 和第一个分区之间，但也可以存储在分区内。在 GPT 的非 EFI 情况下，应为其创建自定义分区。该位置被硬连线到第 1 阶段。

另见：[http ://www.gnu.org/software/grub/manual/grub.html#Images](http://www.gnu.org/software/grub/manual/grub.html#Images)

# python - 如何在 Django 中流式传输文件的最后几行？

> ID：11357873
> 
> 赞同：6
> 
> 时间：2012-07-06T07:39:25.867
> 
> 标签：python, django, stream, tail, supervisord

出于监控目的，我想将日志文件的最后 N 行流式传输到 Django 网站界面。就像显示`tail -f filename`命令的结果一样。

基本上我想做与 supervisord 相同的事情，它允许从其 http 接口登录进程。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:22:58.400

根据 OP 的要求，这是一个使用[webtail](http://pypi.python.org/pypi/webtail/)的示例：

```
$ webtail \
    --port=8000 \
    --files=/var/log/nginx/error.log,/var/log/nginx/access.log \
    --logging=warn 
```

正如我从评论中了解到的那样 - OP 需要一个支持 websockets 的解决方案。Webtails 可以。如果您查看 webtail.py 文件：

```
routes = [(r'/', MainHandler), (r'/tail/', TailHandler),
    (r'/signin/', SigninHandler), (r'/signout/', SignoutHandler)] 
```

哪里`TailHandler`是：

```
from tornado.websocket import WebSocketHandler

....

class TailHandler(WebSocketHandler): 
```

我用它来监控大量日志，它就像一个魅力:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:08:41.810

[如果你需要在管理面板中，你可以在这里](http://pypi.python.org/pypi/django_logtail/0.0.2)查看 django_logtail 。

除此之外，如果您有兴趣，[这里](https://stackoverflow.com/questions/2836838/tail-f-in-a-webbrowser)还有一个问题...

# c# - 在 wpf 中动态更改按钮值的问题

> ID：11357877
> 
> 赞同：2
> 
> 时间：2012-07-06T07:39:39.760
> 
> 标签：c#, .net, wpf, button

```
<Grid x:Name="LayoutRoot">
    <Button x:Name="btn_num" Width="51"  Margin="318.849,158,262.15,0" Height="45" VerticalAlignment="Top" d:LayoutOverrides="HorizontalMargin">
        <Grid Height="38.166" Width="44.833">
            <Label x:Name="lbl_2" Content="2" Margin="4.483,-2.042,7,-1.626" FontSize="11.333"/>
            <Label x:Name="lbl_1" Content="1" Margin="4.483,0,7,-19.251" FontSize="11.333" Height="41.834" VerticalAlignment="Bottom"/>
            <Label x:Name="lbl_3" Content="3" Margin="0,8.083,-15,-11.751" FontSize="11.333" HorizontalAlignment="Right" Width="33.35" Foreground="Black"/>
        </Grid>
    </Button>
    <Button x:Name="btn_a" Content="A" HorizontalAlignment="Left" Margin="225.333,158,0,0" Width="55" Foreground="Black" Height="45" VerticalAlignment="Top" Click="btn_alt_Click" />
</Grid> 
```

它的设计会是这样的

![按钮](../Images/2490302e78bc4d734bc64737c9d4c7e9.png)

```
public partial class button : Window
{
    static int _AClick = 0;
    public button()
    {
        this.InitializeComponent();     
    }

    private void btn_alt_Click(object sender, RoutedEventArgs e)
    {
        if (_AClick == 0)
        {
            _AClick = 1;
            Fill();
        }
        else
        {
            btn_num.Content = "";
            _AClick = 0;
        }
    }

    public void Fill()
    {
        btn_num.Content = "3";
    }
} 
```

窗口加载后的结果

![窗口加载](../Images/7c390f073a24cd7b2a13cb5d11b882ad.png)

如果我**第一次单击****A**按钮。结果会是这样

 **![第一的](../Images/4522bb130737c7b2c13130323131d087.png)

如果我**第二次单击****A**按钮。结果会是这样

 **![第二](../Images/b1f25c885882f40a3e89195bac3b61e8.png)

**当我第二次**单击**A**按钮时。我需要如下结果。我该怎么做。

 **![实际的](../Images/e5d884c7db628fcb9e08da6680508b22.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:17:12.103

WPF 中有很多方法可以实现这一点。一种方法是有两个`ControlTemplates`（一个具有所有三个数字，另一个只有一个数字），然后在代码中设置按钮的模板 -

```
<Grid x:Name="LayoutRoot">  
    <Grid.Resources>
        <ControlTemplate
            x:Key="threeNumberTemplate"
            TargetType="{x:Type Button}">
            <Grid Height="38.166" Width="44.833"> 
                <Label x:Name="lbl_2" Content="2" Margin="4.483,-2.042,7,-1.626" FontSize="11.333"/> 
                <Label x:Name="lbl_1" Content="1" Margin="4.483,0,7,-19.251" FontSize="11.333" Height="41.834" VerticalAlignment="Bottom"/> 
                <Label x:Name="lbl_3" Content="3" Margin="0,8.083,-15,-11.751" FontSize="11.333" HorizontalAlignment="Right" Width="33.35" Foreground="Black"/> 
            </Grid> 
        </ControlTemplate>

        <ControlTemplate
            x:Key="oneNumberTemplate"
            TargetType="{x:Type Button}">
                <Label x:Name="lbl_3" Content="3" FontSize="11.333"/> 
        </ControlTemplate>
    </Grid.Resources>

    <Button x:Name="btn_num" Width="51"  Margin="318.849,158,262.15,0" Height="45" VerticalAlignment="Top" Template="{StaticResource threeNumberTemplate}"></Button>  
    <Button x:Name="btn_a" Content="A" HorizontalAlignment="Left" Margin="225.333,158,0,0" Width="55" Foreground="Black" Height="45" VerticalAlignment="Top" Click="btn_alt_Click" />  
</Grid> 
```

背后的代码 -

```
private void btn_alt_Click(object sender, RoutedEventArgs e)
{
    if (_AClick == 0)
    {
        _AClick = 1;
        btn_num.Template = FindResource("oneNumberTemplate") as ControlTemplate;
    }
    else
    {
        btn_num.Template = FindResource("threeNumberTemplate") as ControlTemplate;
        _AClick = 0;
    }
} 
```

同样可以通过触发器来实现，方法是制作`_AClick`as`DependecyProperty`并使用它的值来交换触发器中的模板。

另一种方法是拥有两个并根据代码中的值`Buttons`隐藏/显示它们。`_AClick`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:31:01.123

您可以创建三个`DataTemplate`并使用`DataTemplateSelector`类在运行时加载相应的数据模板。

MSDN -[数据模板选择器](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)******

# php - 选中时更改包含复选框属性的 div

> ID：11357886
> 
> 赞同：1
> 
> 时间：2012-07-06T07:40:22.077
> 
> 标签：php, javascript, html

这是我的 javascript，它允许过滤搜索字段...

```
function escape4regex(text)
{
  return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
}

function searchRegExFieldKeyUp()
{
    var table = document.getElementById('ModelFilter');
    var cells = table.getElementsByTagName('div');
    var searchterms = escape4regex(this.value);

    var regVar = '(?=.*' + searchterms.replace(/\s/g, '.*)(?=.*') + '.*)';
    var i=cells.length;
    while (i--)
    {
       var cell = cells[i];

       var rowStr = cell.innerHTML;
       // remove all tags
      rowStr = rowStr.replace(/<(?:.|\n)*?>/gm, '').replace(/\n|\s{2,}/gm, ' '); // searches  whole row 

      var regex = new RegExp(regVar,"gi");
      var result = (regex.test(rowStr));

     if(result)
     {
        cell.style.display = "";// check if compat with IE
     }
     else
     {
       cell.style.display = "none";
     }
   }
} 
```

这会从数据库输入创建复选框

```
<div id="ModelFilter">
<?php 
while ($row = mysqli_fetch_assoc($result))
{
    echo"<div class=\"modelfilter_td\" id=\"modelfilter_td\">";
        echo"<input type=\"checkbox\" id = \"$row[ModelID]\" 
            name = \"selectedModels[]\"value =\"$row[Model]\" onclick=\"chkcontrol.apply(this);\">";
        echo "$row[Model]";
    echo"</div>";
}
echo"</div>"; 
```

我想做以下事情：

1.  当复选框被选中时，它保持可见，即使它不在过滤器字段的搜索词中。

2.  当复选框被选中时，背景颜色会改变。

3.  复选框和复选框的标题保存在 div 中，我希望允许用户单击 div 中的任意位置以允许切换复选框。

有人让我开始正确的轨道吗？

编辑：这是问题“3”的解决方案。

```
<script language="javascript">
$(document).ready(function(){
$(".modelfilter_td").click(function(e){
    var chk = $($(this).find("input[type='checkbox']"));
    if(chk.attr('checked'))
    {
        chk.attr('checked',false);
    }else{
        chk.attr('checked',true);
    }

   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:23:16.967

这不是您问题的解决方案，而是关于 html 上下文中 php-usage 的建议：

```
<div id="ModelFilter">
    <?php while ($row = mysqli_fetch_assoc($result)): ?>
    <div class="modelfilter_td" id="modelfilter_td">
        <input  
            type="checkbox"
            id="<?php echo $row['ModelID'] ?>" 
            name="selectedModels[]"
            value="<?php echo $row['Model'] ?>"
            onclick="chkcontrol.apply(this);"
        >
        <?php echo $row['Model'] ?>
    </div>
    <?php endwhile ?>
</div> 
```

这使大多数 IDE 能够处理 HTML 自动完成和代码分析。

# javascript - 如何修复浏览按钮的初始 uri

> ID：11357889
> 
> 赞同：1
> 
> 时间：2012-07-06T07:40:30.867
> 
> 标签：javascript, html, css, jsp, servlets

我想创建一个浏览按钮，所以我找到了这段代码：它工作正常

```
<form action="http://www.cs.tut.fi/cgi-bin/run/~jkorpela/echo.cgi"
enctype="multipart/form-data" method="post">
<p>
Type some text (if you like):<br>
<input type="text" name="textline" size="30">
</p>
<p>
Please specify a Test , or a set of tests:<br>
<input type="file" name="datafile" size="40" >
</p>
<div>
<input type="submit" value="Execute Test">

</div>
</form> 
```

但在我的情况下，浏览功能应该从特定的 URI 开始（C:\software\apache-tomcat-7\apache-tomcat-7.0.28\wtpwebapps\WebTestAutomatisation\WEB-INF\classes\functional）

所以我想修复初始 uri 我在输入标签属性中进行搜索，但我没有找到任何有用的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:00:39.393

我认为您尝试做的事情是不可能的。就像@ClementAndraud 指出的那样，如果允许的话，这可能是一个很大的安全漏洞。同时，您可以查看[此帖子](https://stackoverflow.com/questions/818111/control-the-working-directory-for-input-type-file)以进行进一步说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:51:29.873

您想在用户单击“浏览”时更改默认路径吗？

我认为不可能更改输入类型文件的默认路径，因为它可能是一个很大的安全漏洞......

# ruby-on-rails - format.json 不包含对象名称

> ID：11357897
> 
> 赞同：1
> 
> 时间：2012-07-06T07:40:51.990
> 
> 标签：ruby-on-rails, json

我正在从 Rails 应用程序生成 json，并使用 format.json 和 to_json 方法过滤字段。它工作正常，除了 json 没有对象名称。这是 Rails 代码：

```
format.json { render :json =>  @text.to_json(:only =>[:id,:language,:text_name,:text_type,:text_content])} 
```

以及 json 输出的一部分：

```
[{"id":5,"language":"TR","text_name":"2.01 AY\u015eE'DEN MEKTUP","text_type":null},{"id":6,"language":"TR","text_name":"2.02 Ruya","text_type":null},{"id":7.... etc 
```

我在想我会收到一些指示对象名称的东西（例如：“文本”）。更多沿线：

```
{"texts:"[{"id":5,"language":"TR","text_name":"2.01 AY\u015eE'DEN MEKTUP","text_type":null},{"id":6,"language":"TR","text_name":"2.02 Ruya","text_type":null},{"id":7.... etc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:46:53.043

以下渲染行将产生您正在寻找的结果：

```
format.json { render :json => { :texts => @text.to_json(:only =>[:id,:language,:text_name,:text_type,:text_content])}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T07:52:00.350

另一种选择是启用全局设置：

```
ActiveRecord::Base.include_root_in_json = true 
```

# mobile - 哪个跨平台移动开发最适合 HTML5 到 Android、Iphone、Windows

> ID：11357901
> 
> 赞同：0
> 
> 时间：2012-07-06T07:41:31.083
> 
> 标签：mobile, cross-platform

我想开发跨平台的移动应用程序。我已经看过下面列出的框架，但是测试每个框架都需要很长时间，所以我在这里寻找一些建议。

请指导我哪个框架最好，最成熟。

我想要做 ...

```
HTML5 -> Android, Windows Mobile, Iphone/Ipad

Rhodes and RhoSync
PhoneGAP
Titanium Mobile
QuickConnectFamily
BedRock
Corona
MoSync SDK
Sancha Touch
JQ Touch
iWebKit
iUI
xUI
Magic Framework
Dashcode
CiUI
Safire
iPhone-universal
WebApp.net
The Dojo ToolKit
Jo 
```

它还应该支持良好的 debuggin 支持，像在 java 中逐行调试一样进行调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:50:15.043

这完全取决于你站在哪个平台上。

假设您有很强的 JavaScript 和 Jquery 知识，那么您可以继续使用 Jquery Mobile 和 HTML5 来开发任何跨平台应用程序。

你总是可以研究上面列出的东西的利弊，但这是安静的主观东西。

我会跟随。

1.  三叉触摸
2.  电话GAP
3.  钛手机
4.  Jquery Mobile（最适合基于浏览器的移动应用程序）

您在下面选择的任何其他都可以。

谢谢， 吉格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:54:52.733

如果它是 Windows Phone（我假设因为 windows mobile 已经很老了），你正在寻找它有点棘手，因为大多数框架还不能正确支持它（[见](http://www.codefessions.com/2012/04/which-mobile-javascript-framework-is.html)）但是对于 Android 和 iOS，你可以使用任何 HTML5 UI 框架和打包工具之一，例如 PhoneGap、MoSync、Sencha 或 ...

我认为 Jigar 是有道理的，它是主观的，但我个人认为 Titan Mobile 不是 HTML5，尽管它提供了来自 JavaScript 的本机用户界面（你也可以从 MoSync 获得更多的 HTML5ish 代码）。

另一点是 JavaScript 框架和打包器之类的东西是相辅相成的，例如 jQuery Mobile 可以与 PhoneGap 或 MoSync 一起使用。

从用户体验的角度来看，我更喜欢以下框架：

1.  本国的
2.  剑道用户界面
3.  jQuery 移动
4.  煎茶

# javascript - 在没有 DOM 键的情况下初始化 PubNub

> ID：11357902
> 
> 赞同：1
> 
> 时间：2012-07-06T07:41:31.740
> 
> 标签：javascript, pubnub

[按照https://pubnub-prod.appspot.com/account-javascript-api-include](https://pubnub-prod.appspot.com/account-javascript-api-include)的建议，我可以使用一些帮助来初始化 javascript PubNub 界面，而无需在加载 .js 库之前将 div 附加到 DOM

我希望能够通过一个函数来初始化 PubNub。我尝试修改此 SO 问题建议的解决方案但没有成功：[pubnub 和 head.js](https://stackoverflow.com/questions/9275317/pubnub-and-head-js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:56:01.857

来自 PubNub 的菲尔在这里。我们已经为您服务了。您所要做的就是使用以下代码：

```
var pubnub = PUBNUB.init({
    publish_key   : my_publish_key,
    subscribe_key : my_subscribe_key,
    ssl           : false,
    origin        : 'pubsub.pubnub.com'
}); 
```

希望这能解决您的问题。

# javascript - 专辑艺术作品api？

> ID：11357906
> 
> 赞同：0
> 
> 时间：2012-07-06T07:41:42.790
> 
> 标签：javascript, jquery, ajax

我在一个网站上工作，在那里我显示了我最近播放的数百到数千首歌曲的所有列表。我需要歌曲的专辑封面图片！有没有免费的API？我应该发送 HTTP 请求并得到响应 [只有图片]

“我正在用 AJAX 编写代码”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:51:14.860

我最近做了几次类似的事情。

您可以使用免费的 last.fm API [http://www.last.fm/api](http://www.last.fm/api)

您将需要一个 API 密钥（注册后获得），并且该密钥必须在请求中发送。

API 中可用的方法之一称为 track.getInfo：

[http://www.last.fm/api/show/track.getInfo](http://www.last.fm/api/show/track.getInfo)

使用此方法，您可以像这样发送艺术家和曲目名称参数（都是必需的）：

```
http://ws.audioscrobbler.com/2.0/?
    method=track.getInfo&
    api_key=b___YOUR_API_KEY___&
    artist=Cher&
    track=Believe 
```

此请求的响应将包括该轨道的一系列图像。以下是完整请求中的相册节点）：

```
<album position="1">
    <artist>Cher</artist>
    <title>The Very Best of Cher</title>
    <mbid>00d677bf-46f2-34a4-86ad-e922d8466943</mbid>
    <url>
        http://www.last.fm/music/Cher/The+Very+Best+of+Cher
    </url>
    <image size="small">
        http://userserve-ak.last.fm/serve/64s/41161483.png</image>
    <image size="medium">
        http://userserve-ak.last.fm/serve/126/41161483.png</image>
    <image size="large">
        http://userserve-ak.last.fm/serve/174s/41161483.png
    </image>
    <image size="extralarge">
        http://userserve-ak.last.fm/serve/300x300/41161483.png
    </image>
</album> 
```

然后，您可以使用 JavaScript AJAX 函数过滤到响应中返回的图像节点。如您所见，图像有不同的尺寸，因此您可以选择要使用的图像。

您不会只从请求中获取图片，但您可以轻松地从响应中获取它。

我希望这会有所帮助。

# javascript - 克隆 div 也是克隆文本值

> ID：11357909
> 
> 赞同：0
> 
> 时间：2012-07-06T07:41:52.043
> 
> 标签：javascript, prototypejs

我需要克隆元素的值空白。

下面的代码运行良好，但它正在克隆值；无法弄清楚如何阻止它。

```
var Move =  {

    copy    :   function(e, target) { 
                var eId     = $(e);
                var copyE   = eId.cloneNode(true);
                var cLength = copyE.childNodes.length -1;
                copyE.id    = e+'-copy';

                for(var i = 0; cLength >= i;  i++) {
                    if(copyE.childNodes[i].id) {
                    var cNode   = copyE.childNodes[i];
                    var firstId = cNode.id;
                    cNode.value = '';
                    cNode.id    = firstId+'-copy'; }
                }

                $('txtWoundCareLocation').value="";
                $(target).appendChild(copyE);
                },
    element :   function(e, target, type)   {
                var eId =   $(e);
                if(type == 'move') { $(target).appendChild(eId); }

                else if(type == 'copy')     { 
                    this.copy(e, target);
                }
                }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:56:01.307

把它放在副本的末尾：

```
$(cnode.id).value=""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:50:03.053

~~[eId.cloneNode(true) returns an jQuery object](http://docs.jquery.com/Clone), not a HTMLNode. Thus `copyE` contains a jQuery object not an HTMLNode. You are using it like an HTMLNode however. This should introduce problems.~~

~~Also, setting value on a jQuery object (as in `$('txtWoundCareLocation').value=""`) will not alter the HTMLNode value. Instead, you should call the `jQuery.val` method to unset the HTMLNode value: `$('txtWoundCareLocation').val('');`~~

I thought this was about jQuery. I'm not into prototype, sorry.

# node.js - 将 node.js 与远程 GraphicsMagick 服务器一起使用

> ID：11357910
> 
> 赞同：0
> 
> 时间：2012-07-06T07:41:53.010
> 
> 标签：node.js, graphicsmagick

我在一台服务器上安装了 node.js。我在另一台服务器上安装了graphicsmagick [https://github.com/aheckmann/gm 。](https://github.com/aheckmann/gm)图形文件本身也存储在 graphicsmagick 服务器上。我想安装和设置节点 gm 模块，以便在 graphicsmagick 服务器上完成工作/处理。但是，在阅读完文档后，我不知道如何做到这一点。当然，我可以将 graphicsmagic 安装在与 node 相同的服务器上，并让它正常工作。但我不想在与节点相同的服务器上进行繁重的图像处理。这可以将两者分开吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:34:50.890

该`gm`模块不是服务器，您需要编写一个服务来使用`gm`.

像这样使用 express.js 的东西：

```
var express = require('express');

var app = express.createServer();

app.get('/:image', function (req, res, next) {
  // set headers here

  gm('/path/to/my/' + req.params.image)
    .resize('200', '200')
    .stream(function (err, stdout, stderr) {
      if (err) next(err);
      stdout.pipe(res);
    });
});

app.listen(8000); 
```

# shell - 使用 wsh 脚本检查和打开不同的浏览器

> ID：11357913
> 
> 赞同：0
> 
> 时间：2012-07-06T07:42:07.847
> 
> 标签：shell, browser, vbscript, wsh

嘿，伙计们，我知道这听起来可能很愚蠢，但我脑子里一直有这个问题……我对这个 wscript 或 vbscripting 真的很陌生……在撰写本文时，我想出了如何使用 wscript 打开 IE .. .这是代码

```
Set WshShell = WScript.CreateObject("WScript.Shell")
Return = WshShell.Run("iexplore.exe www.bbc.co.uk", 1) 
```

但我不知道如何检查是否安装了firefox，然后打开firefox，如果安装了chrome，打开chrome，所有浏览器类型都一样.....

**更新：**

我做了一些研究，想为什么不检查注册表，所以我想出了这个检查注册表的脚本，现在我不知道为什么，但这总是给出相同的输出“密钥不存在”事件虽然我有这个我系统中的注册表

```
keyTest = keyExists("HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\Mozilla Firefox")
If keyTest = False Then
    wscript.echo "Key does not exist"
Elseif keyTest = True then
    wscript.echo "Key exists"
End if

Function keyExists (RegistryKey)
    If (Right(RegistryKey, 1) <> "\") Then
        RegistryKeyExists = false
    Else
        On Error Resume Next
        WshShell.RegRead RegistryKey
        Select Case Err

            Case 0:
                keyExists = true
            Case &h80070002:
                ErrDescription = Replace(Err.description, RegistryKey, "")
                Err.clear
                WshShell.RegRead "HKEY_ERROR\"
            If (ErrDescription <> Replace(Err.description, _
            "HKEY_ERROR\", "")) Then
                keyExists = true
            Else
                RegistryKeyExists = false
            End If
            Case Else:
                keyExists = false
        End Select
        On Error Goto 0
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T02:04:14.147

您的示例中的问题：

*   在`keyExists()`中，一个名为的变量`RegistryKeyExists`正被用于函数的返回值`keyExists`。

*   Shell 对象变量`WshShell`永远不会通过`CreateObject()`.

*   感兴趣的注册表项的值不以反斜杠结尾。

这是您的代码的简化版本，我相信它可以实现您的目标：

```
Option Explicit  ' programming with your seatbelt on :-)

Dim keys(4)
keys(0) = "HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\Mozilla Firefox"
keys(1) = "HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\Mozilla Firefox\"
keys(2) = "HKEY_LOCAL_MACHINE\Bad\Key\"
keys(3) = "BAD\Root\On\This\Key\Causes\Exception"
keys(4) = "HKLM\SOFTWARE\Microsoft\Internet Explorer\"

On Error Resume Next

Dim i, key
For i = 0 To UBound(keys)
    key = keyExists(keys(i))

    If Err Then
        WScript.Echo "An exception occurred reading registry key" _
               & " '" & keys(i) & "':" _
               & " [" & Err.Number & "] " _
               & Err.Description _
               & ""
    Else
        If keyExists(keys(i)) Then
            WScript.Echo "Key *exists*: [" & keys(i) & "]"
        Else
            WScript.Echo "Key does *not* exist: [" & keys(i) & "]"
        End If
    End If

    WScript.Echo "--"
Next

Function keyExists (RegistryKey)
    Dim keyVal, errNum, errDesc

    keyExists = False
    On Error Resume Next

    Dim WshShell : Set WshShell = CreateObject("WScript.Shell")
    keyVal = WshShell.RegRead(RegistryKey)

    Select Case Err
        Case 0
            keyExists = True

        Case &h80070002
            ' key does not exist

        Case Else
            errNum = Err.Number
            errDesc = Err.Description
            On Error GoTo 0
            Err.Raise vbObjectError + 1, "WScript.Shell", _
               "Something went wrong reading the registry:" _
               & " [" & Hex(errNum) & "] " & errDesc
    End Select

    On Error GoTo 0
    Set WshShell = Nothing
End Function

' End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:49:01.990

通常可以使用以下代码来查找获取所有已安装软件的列表。这里我使用了Message box来显示这个列表，你可以使用if条件来判断是否安装了想要的软件............

```
' List All Installed Software
  Const HKLM = &H80000002 'HKEY_LOCAL_MACHINE
  strComputer = "."
  strKey = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\"
  strEntry1a = "DisplayName"

  Set objReg = GetObject("winmgmts://" & strComputer & _
   "/root/default:StdRegProv")
  objReg.EnumKey HKLM, strKey, arrSubkeys

  For Each strSubkey In arrSubkeys
      intRet1 = objReg.GetStringValue(HKLM, strKey & strSubkey, _
      strEntry1a, strValue1)

      If strValue1 <> "" Then
          MsgBox  VbCrLf & "Display Name: " & strValue1
      End If
  Next 
```

我已经在机器上尝试过这段代码，发现它只是列出了 Firefox 浏览器，即使我安装了 chrome 和 IE。所以这种常规方法对每个人都不起作用。之后我检查了注册表，发现所有浏览器都列在......

```
HKEY_LOCAL_MACHINE\SOFTWARE\Clients\StartMenuInternet\ 
```

所以我们可以编写代码来查找是否安装了特定的浏览器。以下示例代码检查是否安装了 Chrome 和 Firefox，如果已安装并通过 URL 打开它

```
Set WshShell = CreateObject("WScript.Shell")
Const HKEY_LOCAL_MACHINE = &H80000002 
strComputer = "." 

Set oReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & _ 
strComputer & "\root\default:StdRegProv") 

strKeyPath = "SOFTWARE\Clients\StartMenuInternet\chrome.exe\shell\open\command\" 
strValueName = "" 
oReg.GetStringValue HKEY_LOCAL_MACHINE,strKeyPath,strValueName,strValue 
If InStr(1,strValue,"chrome",vbTextCompare) Then WshShell.Run("chrome www.google.com")

strKeyPath = "SOFTWARE\Clients\StartMenuInternet\FIREFOX.EXE\shell\open\command\" 
strValueName = "" 
oReg.GetStringValue HKEY_LOCAL_MACHINE,strKeyPath,strValueName,strValue 
If InStr(1,strValue,"firefox",vbTextCompare) Then WshShell.Run("firefox www.google.com") 
```

同样，您可以为 IE、Opera 和 Safari 修改此代码希望这会有所帮助.......

# java - 确保始终从 Spring 应用程序的缓存中检索数据

> ID：11357914
> 
> 赞同：4
> 
> 时间：2012-07-06T07:42:09.063
> 
> 标签：java, spring, ehcache

在使用 Spring Framework 构建的 Java EE 应用程序中，我需要在 DAO 中执行一些非常昂贵的操作，这可能需要几分钟时间。使用 Spring MVC，当用户的请求映射到控制器方法时，我通过控制器访问 DAO：

```
@RequestMapping(value = "/categories.do")
public ModelAndView categories(
        @PathVariable("cc") String cc,
        @PathVariable("ll") String ll) {
    Locale locale = new Locale(ll, cc);
    ModelAndView result = getView("categories", locale);
    Map<Category, List<Product>> allProducts = supplyDao.getAllProducts(locale);
    result.addObject("products", allProducts);
    return result;
} 
```

该`getAllProducts`方法向外部 Web 服务发出大量请求，以获取产品所需的所有数据。该方法通过 Spring 的[`@Cacheable`](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)注解缓存在底层`Ehcache`实现上：

```
@Cacheable(value = CACHE_NAME, key = CACHE_KEY_PREFIX + "'(' + #p0 + ')'")
public Map<Category, List<Product>> getAllProducts(Locale locale) {
        // a lot of HTTP requests firing from here
} 
```

这种方法的问题是，当缓存为空时，页面基本上是不可访问的。此外，如果在缓存为空时有多个请求命中页面，DAO 方法将再次触发，所有请求将并行重复。据我了解，第二个问题的解决方案是使用 a [`BlockingCache`](http://www.ehcache.org/documentation/apis/constructs#blocking-cache)，但我还没有机会实现它。

我想要的是让控制器方法总是从缓存中提取结果。我想实现一种[`@PostConstruct`](https://stackoverflow.com/a/1276779/182629)触发所有语言环境的缓存填充的方法。就像是：

```
@PostConstruct
public void populateCaches() {
    for (Locale locale : localeList) {
        getAllProducts(locale);
    }
} 
```

我不介意初始填充需要一段时间，因为服务器很少重新启动。我还将缓存过期时间设置为三天 - 数据不会经常更新，并且不提供最新版本没有危险。

我想做的是按[`TimerTask`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TimerTask.html)设定的时间间隔运行 a，比如说两天 23 小时，这将迫使 DAO 方法从 Web 服务中提取所有产品数据。然后，此数据将替换缓存中的数据，而不会过期。然后将重置缓存过期计数器 - 数据将在三天后再次过期。这样，控制器方法将始终从缓存中获取产品数据，并且页面将响应。

我的问题是，鉴于我正在使用[Spring 的缓存抽象](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)，我将如何实现这样的方法？我需要`CacheManager`直接在我的方法中处理吗？

另一个问题是：我是否正确地解决了这个问题？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T08:10:50.177

在缓存可用之前阻止调用

```
@Cacheable(cacheName="yourCache", decoratedCacheType= DecoratedCacheType.SELF_POPULATING_CACHE)
public List<String> getWhatever(int id) {
//call database
} 
```

您可以使用自动刷新缓存来代替 timertask：

```
@Cacheable(cacheName="yourCache", refreshInterval=1000, decoratedCacheType= DecoratedCacheType.REFRESHING_SELF_POPULATING_CACHE)
public List<String> getWhatever(int id) {
  //call database
} 
```

[荣誉](http://cleancode.se/2012/03/31/refreshing-caches-in-ehcache.html)

# c++ - 如何对 std::shared_ptr 的容器进行排序 对象？

> ID：11357918
> 
> 赞同：5
> 
> 时间：2012-07-06T07:42:25.777
> 
> 标签：c++, c++11, stl-algorithm

```
class Widget;

std::vector< std::shared_ptr<Widget> > container

class Criterium
{
public:
    bool operator()(const Widget& left, const Widget& right)const;
}; 
```

如何根据标准对容器进行排序，**而不**定义另一个标准，例如：

```
class CriteriumForPointers
{
public:
    bool operator()(const std::shared_ptr<Widget>& left, 
                    const std::shared_ptr<Widget>& right)const;
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T07:52:24.290

您可以使用 lambda 作为适配器：

```
Criterium criterium;
sort(container.begin(), container.end(),
     [&criterium] (const shared_ptr<Widget> &l, const shared_ptr<Widget> &r)
     {
         return criterium(*l.get(), *r.get());
     }
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T07:57:01.347

使用这样的间接迭代器：

```
std::sort(
  boost::make_indirect_iterator(container.begin()),
  boost::make_indirect_iterator(container.end()),
  Criterium()
); 
```

另见： http: [//www.boost.org/doc/libs/1_49_0/libs/iterator/doc/indirect_iterator.html](http://www.boost.org/doc/libs/1_49_0/libs/iterator/doc/indirect_iterator.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:49:42.127

也许您可以将 operator() 的第二个重载放入您的 Criterium 类中，如下所示：

```
class Criterium {
  bool operator()(const Widget& left, const Widget& right)const;
  bool operator()(const std::shared_ptr<Widget>& left,
                  const std::shared_ptr<Widget>& right)const
  { return operator()( *left, *right ); }
}; 
```

（注意：我没有测试这个）

# c# - 读取字节数组中的多个文件

> ID：11357921
> 
> 赞同：3
> 
> 时间：2012-07-06T07:42:27.700
> 
> 标签：c#, file, bytearray

我有一个具有字节数组属性“ZipFile”的对象来存储文件流：

**结果类中的属性：**

```
public class Result
{
  public byte[] ZipFile;
} 
```

在我的应用程序中，我生成了一个 PDF 文件，并使用我的 ReadFile 方法将文件读入“ZipFile”属性，如下所示：

```
objResult.ZipFile = ReadFile(FilePath); 
```

**ReadFile 方法的签名：**

```
private byte[] ReadFile(string strFileName) 
```

**问题：**

现在将循环调用我的 ReadFile 方法，因为我正在生成多个 PDF 文件。每次 ReadFile 方法都会从指定参数读取一个新文件到 'objResult.ZipFile' 属性，从而替换 'ZipFile' 属性中的旧值。现在，我希望我的“ZipFile”属性存储多个 PDF 文件流。那么我该怎么做呢？我应该将此属性更改为二维 byte[][] 数组，还是有更好的方法来做到这一点？请记住，该属性将用于通过调用方法保存（写入）这些文件。接受所有建议。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:43:56.193

听起来你应该*有*一个`List<Result>`，或者结果应该有一个集合，比如`List<byte[]>`一个`ZipFiles`属性。请注意，目前您根本没有属性 - 您有一个公共字段，这通常是一个坏主意。

（您可能不会*将*其公开为`List<byte[]>`- 那将是底层实现。我可能会将其设为`IEnumerable<byte[]>`并公开一个`AddZipFile`方法。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:44:23.120

您可以使用`List<byte[]>`(list of byte array)，然后在每次迭代中将该数组附加到列表中。就像是。

```
public class Result
{
   public List<byte[]> ZipFilesList { get; set; };
} 
```

稍后您可以执行以下操作：

```
ResultObj.ZipFilesList.Add(ReadFile(FilePath)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:49:26.540

如果您只想存储它们以供以后处理列表或队列，则可以这样做。我想我会选择队列，因为您的使用模式似乎与之匹配。

```
 // make queue
 var filesQueue = new Queue<byte[]>();

 // add file
 filesQueue.Enqueue(newFile);

 // get file
 var fileToSave=filesQueue.Dequeue(); 
```

如果您需要并行化等，您可以稍后切换到并发队列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T07:45:37.317

你需要有清单`List<byte[]>`

```
public class Result
{
   public List<byte[]> ZipFiles;
} 
```

并将文件添加到您的列表中

```
objResult.ZipFiles.Add(ReadFile(FilePath)); 
```

# ipad - iPad开发：导航栏上的自定义按钮push->pop后看不到

> ID：11357924
> 
> 赞同：1
> 
> 时间：2012-07-06T07:42:48.050
> 
> 标签：ipad, button, customization

**iPad 应用程序**：我向导航栏添加了一些自定义按钮，如下所示：

```
- (void)addEditButton{
    UIButton *editButton = [UIButton buttonWithType:UIButtonTypeCustom];
    editButton.frame = CGRectMake(0, 0, 50, 30);
    [editButton setBackgroundImage:[[UIImage        imageNamed:@"images_iPad.bundle/NavigationBar_Btn_iPad.png"] stretchableImageWithLeftCapWidth:15/2.0 topCapHeight:32/2.0] forState:UIControlStateNormal];
    [editButton addTarget:self action:@selector(editAction:) forControlEvents:UIControlEventTouchUpInside];
    [editButton setTitle:@"Edit" forState:UIControlStateNormal];
    editButton.titleLabel.font = [UIFont fontWithName:kAPPBOLDFONT size:12];
    editButton.titleLabel.shadowColor = [UIColor blackColor];
    editButton.titleLabel.shadowOffset = CGSizeMake(0, -1);

    UIBarButtonItem *editItem = [[[UIBarButtonItem alloc] initWithCustomView:editButton] autorelease];
    self.navigationItem.rightBarButtonItem = editItem; 
```

}

我的问题是：我点击了这个按钮，它会推送到另一个viewController，在popModelViewController：animate之后，我看不到这个自定义按钮，虽然这个，它确实有效。不仅仅是这里，其他都是一样的，请帮助我。

# python - 计算运行scrapy的总时间

> ID：11357925
> 
> 赞同：2
> 
> 时间：2012-07-06T07:42:54.320
> 
> 标签：python, scrapy

嗨，我正在使用 scrapy 来抓取网站

我已经编写了蜘蛛，获取了所有信息并通过 pipeline.py 保存到 csv 文件中

**pipeline.py 代码**

```
class Examplepipeline(object):

    def __init__(self):
        dispatcher.connect(self.spider_opened, signal=signals.spider_opened)
        dispatcher.connect(self.spider_closed, signal=signals.spider_closed)

    def spider_opened(self, spider):
        log.msg("opened spider  %s at time %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))
        self.exampledotcomCsv = csv.writer(open("csv's/%s(%s).csv"% (spider.name,datetime.now().strftime("%d/%m/%Y,%H-%M-%S")), "wb"),
                   delimiter=',', quoting=csv.QUOTE_MINIMAL)
        self.exampledotcomCsv.writerow(['field1', 'field2','field3','field4'])           

    def process_item(self, item, spider):
            log.msg("Processsing item " + item['title'], level=log.DEBUG)
            self.brandCategoryCsv.writerow([item['field1'].encode('utf-8'),
                                    [i.encode('utf-8') for i in item['field2']],
                                    item['field3'].encode('utf-8'),
                                    [i.encode('utf-8') for i in item['field4']]
                                    ])
            return item 

    def spider_closed(self, spider):
        log.msg("closed spider %s at %s" % (spider.name,datetime.now().strftime('%H-%M-%S'))) 
```

在上面的代码中我可以得到`start time and end time of spider`，但是在关闭蜘蛛之后我想计算并显示`total time`蜘蛛所采取的那是`difference between start time and end time` 那么我该怎么做，我们可以在 spider_closed 方法中编写这个功能？

请让我知道这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:19:57.650

为什么不：

```
def spider_opened(self, spider):
    spider.started_on = datetime.now()
    ...

def spider_closed(self, spider):
    work_time = datetime.now() - spider.started_on
    ... 
```

# image - R：将 alpha 值添加到 png-image

> ID：11357926
> 
> 赞同：11
> 
> 时间：2012-07-06T07:42:57.573
> 
> 标签：image, r

有没有办法让 rasterGrob-object 部分透明，所以要给它添加一个 alpha 因子？我通过`ggplot2`在`annotation_custom`. 但是，与 with 不同`annotate`，该`alpha`选项在这里不起作用，所以我想必须提前更改图像。

作为一个基于 baptiste 在他的博客中建议的简单示例，到目前为止，我正在这样做：

```
img.path <- readPNG("logo.png")
pngob <- rasterGrob(img.path)
qplot(1:10, rnorm(10), geom = "blank") +
    annotation_custom(pngob, xmin=6.8, xmax=Inf, ymin=1, ymax=Inf) +
    geom_point() 
```

上面的示例完美运行。

但是，`dim(pngob)`在控制台中输入会返回`NULL`. 因此，以下关于如何设置`alpha`-value 的建议不起作用：

```
m <- pngob
w <- matrix(rgb(m[,,1],m[,,2],m[,,3], m[,,4] * 0.2), nrow=dim(m)[1]) 
```

这将返回错误`Error in m[, , 1]: wrong number of dimensions`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T08:44:35.937

直接来自@baptiste 的[ggplot2 博客](http://blog.ggplot2.org/post/23537012922/adding-watermarks-to-plots)。您可以在创建时调整 alpha `w`。

```
 library(png)
 library(gridExtra)
 m <- readPNG(system.file("img", "Rlogo.png", package="png"), FALSE)
 w <- matrix(rgb(m[,,1],m[,,2],m[,,3], m[,,4] * 0.2), nrow=dim(m)[1]) #0.2 is alpha

 qplot(1:10, rnorm(10), geom = "blank") +
      annotation_custom(xmin=-Inf, ymin=-Inf, xmax=Inf, ymax=Inf, 
         rpatternGrob(motif=w, motif.width = unit(1, "cm"))) +
      geom_point() 
```

![在此处输入图像描述](../Images/da262759dc58a1d6a0ca90a882a57f76.png)

或者，如果您想要一个图像：

```
qplot(1:10, rnorm(10), geom = "blank") +
  annotation_custom(xmin=-Inf, ymin=-Inf, xmax=Inf, ymax=Inf, 
    rasterGrob(w)) +
  geom_point() 
```

![在此处输入图像描述](../Images/d53fca63b319e6f5d7faab082c935372.png)

# javascript - 如何创建像堆栈溢出这样的响应图？

> ID：11357927
> 
> 赞同：0
> 
> 时间：2012-07-06T07:43:00.287
> 
> 标签：javascript, graph

我只是喜欢堆栈溢出，并且整晚都在做梦。

我只想开发像[https://stackoverflow.com/users/122718/usr?tab=reputation&sort=graph](https://stackoverflow.com/users/122718/usr?tab=reputation&sort=graph)这样的地图，该地图根据客户选择的区域做出响应。

任何人都可以指导如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:40:03.757

看看 Highstock 图表 Api。

Highstock 允许您在纯 JavaScrip 中创建股票或一般时间线图表

它与 Highchart 和 Highslide 的产品非常相似。

柱形图示例：[http ://www.highcharts.com/stock/demo/column](http://www.highcharts.com/stock/demo/column)

# sql - 根据值删除 XML 属性

> ID：11357931
> 
> 赞同：1
> 
> 时间：2012-07-06T07:43:17.910
> 
> 标签：sql, sqlxml

我有一个 XML 变量，其中只有一个元素。我需要检查此元素是否具有特定属性，如果有，我需要检查该属性是否具有特定值，如果有，我需要从 XML 元素中删除该属性。

所以可以说我有

```
DECLARE @Xml XML
SET @XML = 
'<person
    FirstName="Harvey"
    LastName="Saayman"
    MobileNumber="Empty"
/>' 
```

MobileNumber 属性可能存在也可能不存在，如果存在，并且值为“空”，我需要将我的 XML 变量更改为：

```
'<person
    FirstName="Harvey"
    LastName="Saayman"
/>' 
```

我是一个完整的 SQL XML 菜鸟，不知道该怎么做，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:04:27.177

```
SET @XML.modify('delete /person/@MobileNumber[. = "Empty"]') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:09:02.307

使用 modify() DML 子句修改 XML 节点。在这种情况下，例如：

```
SET @XML.modify('delete (/person/@MobileNumber)[1]') 
```

[此 XML 研讨会](http://www.simple-talk.com/sql/t-sql-programming/xml-data-modification-language-workbench/)有助于更深入地了解 DML 子句删除、插入、替换等。

# android - 试图有一个动态的文本视图

> ID：11357933
> 
> 赞同：-1
> 
> 时间：2012-07-06T07:43:28.650
> 
> 标签：android

我正在尝试基于 xml 文件的动态文本视图.....请帮助我的代码

**代码**

MessageViewPage.java

```
package com.dpn.pack;

public class MessageViewPage extends Activity {

TextView tv1=new TextView(this);
ScrollView sv;
String nickname,body;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.message_view_page);

    Bundle b = getIntent().getExtras();

    nickname= b.getString("nick");
    body=b.getString("body");

    LayoutInflater vi = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = vi.inflate(R.layout.message_view_page, null);

    // fill in any details dynamically here
    TextView textView = (TextView) v.findViewById(R.id.textViewSender);
    textView.setText("Sender : "+nickname);

    // insert into main view
    View insertPoint = findViewById(R.id.textViewSender);
    insertPoint.addView(v, 0, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

}

} 
```

我的**XML**文件如下

message_view_page.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="5dp" 
android:background="@drawable/view">

<TextView
    android:id="@+id/textViewSender"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="18dp"
    android:layout_marginTop="35dp"
    android:textColor="#FFFFFF"
    android:textSize="20dp" />

<TextView
    android:id="@+id/textViewBody"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textViewSender"
    android:layout_below="@+id/textViewSender"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="40dp"
    android:textSize="15dp"
    android:textColor="#F69DD1" />

<Button
    android:id="@+id/buttonReply"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="45dp"
    android:layout_marginBottom="50dp"
    android:text="Reply" />

<Button
    android:id="@+id/buttonListen"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="45dp"
    android:layout_marginBottom="50dp"
    android:text="LIsten" />

</RelativeLayout> 
```

我在这段代码中有一个错误

```
insertPoint.addView(v, 0, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT)); 
```

喜欢

![在此处输入图像描述](../Images/e1522028c53901f68491aef9b26f0b8f.png) 请任何人告诉我解决我的问题的方法。

我的目标输出演示像

![在此处输入图像描述](../Images/8267188c55d73306c629dba0c22f75dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:30:23.297

你有一个重复的参数：

```
ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT 
```

尝试：

```
ViewGroup.LayoutParams.FILL_PARENT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:47:20.450

我可能弄错了，因为您显示了错误在哪里，但没有说它实际上是什么。所以尝试而不是传递`v`给`addView()`方法，而是传递你的`textView`.

像这样的东西：`insertPoint.addView(textView, 0, ...)`

# c++ - 使用 boost 库进行强制转换时出现异常

> ID：11357935
> 
> 赞同：2
> 
> 时间：2012-07-06T07:43:45.753
> 
> 标签：c++, boost, casting

> **可能重复：**
> [如何使用 boost::lexical_cast 和 std::boolalpha？即 boost::lexical_cast< bool >(“true”)](https://stackoverflow.com/questions/4452136/how-do-i-use-boostlexical-cast-and-stdboolalpha-i-e-boostlexical-cast-b)

我正在尝试使用 lexical_cast 方法从字符串转换为布尔值，如下所示：

```
boost::lexical_cast<bool>("false"); 
```

问题是它抛出异常

```
boost::bad_lexical_cast 
```

我已阅读文档并且我理解这`boost::lexical_cast<bool>("false")`是正确的。

# vmware - 什么是 CloudFoundry 基础架构？

> ID：11357944
> 
> 赞同：3
> 
> 时间：2012-07-06T07:44:16.423
> 
> 标签：vmware, cloud-foundry

有谁知道 CloudFoundry 是基于 VMware 的 IaaS 和数据中心，还是基于 AWS EC2 等第三方 IaaS 提供商？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:59:41.293

Cloud Foundry 是一个开源平台即服务。它完全用 Ruby 编写，组件非常松散。[您可以从https://github.com/cloudfoundry/vcap](https://github.com/cloudfoundry/vcap)下载 Cloud Foundry 源代码。Cloud Foundry 是一种位于 IaaS 层之上的 PaaS。现在您的 IaaS 层可以是任何东西（即 vmware vSphere、Amazon EC2、Cloudstack 等）

cloudfoundry.com 是 vmware 托管的 Cloud Foundry PaaS 环境。由于这项服务是由 vmware 提供的，所以 IaaS 也是 vmware。它为任何注册的用户提供免费的 2 Gig 存储空间。注册后，用户可以部署他们的应用程序，该应用程序将成为 cloudfoundry.com 的子域（即 myCompanyName.cloudfoundry.com）。该服务目前处于测试阶段。

您可以在以下网站上找到更多信息：

[http://www.cloudfoundry.com](http://www.cloudfoundry.com)

[http://www.cloudfoundry.org](http://www.cloudfoundry.org)

[http://docs.cloudfoundry.com](http://docs.cloudfoundry.com)

[http://support.cloudfoundry.com](http://support.cloudfoundry.com)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:57:42.543

CloudFoundry.com 在 VMware 自己的 Vsphere[基础架构](http://www.zdnet.com/vmware-tests-vsphere-resilience-with-cloud-foundry-3040093821/)和服务器上运行：

不过，CF 是开源的，其他提供商也提供自己的服务。

# java - Java：使用 TimeUnit 将秒转换为日、小时、分钟和秒

> ID：11357945
> 
> 赞同：49
> 
> 时间：2012-07-06T07:44:21.240
> 
> 标签：java, datetime, time

我正在使用 TimeStamp 类将秒转换为天、小时、分钟、秒。我使用了以下代码

```
public static void calculateTime(long seconds) {
        int day = (int)TimeUnit.SECONDS.toDays(seconds);        
        long hours = TimeUnit.SECONDS.toHours(seconds) - TimeUnit.SECONDS.toHours(TimeUnit.SECONDS.toDays(seconds));
        long minute = TimeUnit.SECONDS.toMinutes(seconds) - TimeUnit.SECONDS.toMinutes(TimeUnit.SECONDS.toHours(seconds));
        long second = TimeUnit.SECONDS.toSeconds(seconds) - TimeUnit.SECONDS.toSeconds(TimeUnit.SECONDS.toMinutes(seconds));

        System.out.println("Day " + day + " Hour " + hours + " Minute " + minute + " Seconds " + second);

    } 
```

但我没有得到正确的结果。例如，当我调用此方法时，`calculateTime(3600)`它给了我结果`Day 0 Hour 1 Minute 60 Seconds 3540`而不是`Day 0 Hour 1 Minute 0 Seconds 0`.

*我的逻辑有什么问题？请帮我。*

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-07-06T07:55:37.923

它应该像

```
 int day = (int)TimeUnit.SECONDS.toDays(seconds);        
 long hours = TimeUnit.SECONDS.toHours(seconds) - (day *24);
 long minute = TimeUnit.SECONDS.toMinutes(seconds) - (TimeUnit.SECONDS.toHours(seconds)* 60);
 long second = TimeUnit.SECONDS.toSeconds(seconds) - (TimeUnit.SECONDS.toMinutes(seconds) *60); 
```

**编辑** 说明：

1.  天数计算是正确的，不需要解释。
2.  TimeUnit.SECONDS.toHours(seconds) 将为您提供从秒到小时的直接转换，而不考虑您已经计算的天数。减去您已经获得的天数的小时数，即天*24。你现在有剩余的时间。
3.  分钟和秒也一样。您需要分别减去已经获得的小时和分钟。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-06T08:30:40.397

你可以这样做只使用`TimeUnit`：

```
public static void calculateTime(long seconds) {
    int day = (int) TimeUnit.SECONDS.toDays(seconds);
    long hours = TimeUnit.SECONDS.toHours(seconds) -
                 TimeUnit.DAYS.toHours(day);
    long minute = TimeUnit.SECONDS.toMinutes(seconds) - 
                  TimeUnit.DAYS.toMinutes(day) -
                  TimeUnit.HOURS.toMinutes(hours);
    long second = TimeUnit.SECONDS.toSeconds(seconds) -
                  TimeUnit.DAYS.toSeconds(day) -
                  TimeUnit.HOURS.toSeconds(hours) - 
                  TimeUnit.MINUTES.toSeconds(minute);
    System.out.println("Day " + day + " Hour " + hours + " Minute " + minute + " Seconds " + second);
} 
```

或稍短但可能不那么直观

```
public static void calculateTime(long seconds) {
    int day = (int) TimeUnit.SECONDS.toDays(seconds);
    long hours = TimeUnit.SECONDS.toHours(seconds) -
                 TimeUnit.DAYS.toHours(day);
    long minute = TimeUnit.SECONDS.toMinutes(seconds) -
                  TimeUnit.HOURS.toMinutes(TimeUnit.SECONDS.toHours(seconds));
    long second = TimeUnit.SECONDS.toSeconds(seconds) -
                  TimeUnit.MINUTES.toSeconds(TimeUnit.SECONDS.toMinutes(seconds));
    System.out.println("Day " + day + " Hour " + hours + " Minute " + minute + " Seconds " + second);
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-16T09:50:28.057

简单方法：

```
public static void calculateTime(long seconds) {
    long sec = seconds % 60;
    long minutes = seconds % 3600 / 60;
    long hours = seconds % 86400 / 3600;
    long days = seconds / 86400;

    System.out.println("Day " + days + " Hour " + hours + " Minute " + minutes + " Seconds " + sec);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T08:15:25.093

这是我创建的代码：（3600 秒显示“天：0 小时：1 分钟：0 秒：0”）

```
public class TimeConvert 
{
    public static void main(String[] args) 
    {
        int fsec,d,h,m,s,temp=0,i;
        fsec=3600;
        //For Days
        if(fsec>=86400)
        {
            temp=fsec/86400;
            d=temp;
            for(i=1;i<=temp;i++)
            {
                fsec-=86400;
            }
        }
        else
        {
            d=0;
        }
        //For Hours
        if(fsec>=3600)
        {
            temp=fsec/3600;
            h=temp;
            for(i=1;i<=temp;i++)
            {
                fsec-=3600;
            }            
        }
        else
        {
            h=0;
        }
        //For Minutes
        if(fsec>=60)
        {
            temp=fsec/60;
            m=temp;
            for(i=1;i<=temp;i++)
            {
                fsec-=60;
            }            
        }
        else
        {
            m=0;
        }
        //For Seconds
        if(fsec>=1)
        {
            s=fsec;            
        }
        else
        {
            s=0;
        }
        System.out.println("Days:"+d+" Hours:"+h+" Minutes:"+m+" Seconds:"+s);
    }
} 
```

希望它能回答你的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-25T08:17:32.957

**迟到但有帮助**

> 以 00:00:00 格式获取时间

```
/**
     * The time in format.
     *
     * in The Format of 00:00:00
     */

public String getTimeInFormat(long _SECONDS)
{
    if(TimeUnit.SECONDS.toHours(_SECONDS)>0)
    {
        return  String.format("%02d:%02d:%02d",
                TimeUnit.SECONDS.toHours(_SECONDS),
                TimeUnit.SECONDS.toMinutes(_SECONDS) -
                        TimeUnit.HOURS.toMinutes(TimeUnit.SECONDS.toHours(_SECONDS)),
                TimeUnit.SECONDS.toSeconds(_SECONDS) -
                        TimeUnit.MINUTES.toSeconds(TimeUnit.SECONDS.toMinutes(_SECONDS)));
    }
    else {
        return  String.format("%02d:%02d",
                TimeUnit.SECONDS.toMinutes(_SECONDS) -
                        TimeUnit.HOURS.toMinutes(TimeUnit.SECONDS.toHours(_SECONDS)),
                TimeUnit.SECONDS.toSeconds(_SECONDS) -
                        TimeUnit.MINUTES.toSeconds(TimeUnit.SECONDS.toMinutes(_SECONDS)));
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T08:17:50.053

试试这个

```
public static void calculateTime(long seconds) {

int day = (int)TimeUnit.SECONDS.toDays(seconds);        
long hours = TimeUnit.SECONDS.toHours(seconds) ;

long tempSec = seconds - (TimeUnit.HOURS.toSeconds(hours) );
System.out.println("after hours calculation "+ tempSec);

long minute = TimeUnit.SECONDS.toMinutes(tempSec); 

if(tempSec > TimeUnit.MINUTES.toSeconds(minute)){
    tempSec = tempSec - (TimeUnit.MINUTES.toSeconds(minute) );          
}else{
    tempSec = TimeUnit.MINUTES.toSeconds(minute) - tempSec;
}
System.out.println("after min calculation "+ tempSec);

long second = TimeUnit.SECONDS.toSeconds(tempSec) ;

System.out.println("Day " + day + " Hour " + hours + " Minute " + minute + " Seconds " + second);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-26T19:21:08.293

这是我的代码：

```
public static String secondsToString(TimeUnit greatestUnit, long sourceDuration, TimeUnit sourceUnit) {

    int ordinal = greatestUnit.ordinal();
    if(ordinal<=sourceUnit.ordinal())
        return String.format("%02d", sourceDuration);

    final long greatestDuration = greatestUnit.convert(sourceDuration, sourceUnit);
    final long rest = sourceDuration - sourceUnit.convert(greatestDuration, greatestUnit);

    return String.format("%02d:", greatestDuration) + secondsToString(TimeUnit.values()[--ordinal], rest, sourceUnit);
} 
```

或循环

```
public static String secondsToStringByLoop(TimeUnit greatestUnit, long sourceDuration, TimeUnit sourceUnit) {

    final StringBuffer sb = new StringBuffer();
    int ordinal = greatestUnit.ordinal();

    while(true){
        if(ordinal<=sourceUnit.ordinal()) {
            sb.append(String.format("%02d", sourceDuration));
            break;
        }

        final long greatestDuration = greatestUnit.convert(sourceDuration, sourceUnit);
//          if(greatestDuration>0 || sb.length()>0)
        sb.append(String.format("%02d:", greatestDuration));

        sourceDuration -= sourceUnit.convert(greatestDuration, greatestUnit);
        greatestUnit = TimeUnit.values()[--ordinal];
    };

    return sb.toString();
} 
```

用法示例：

```
String str = secondsToString(TimeUnit.DAYS, 1000, TimeUnit.SECONDS); 
```

函数返回：“00:00:16:40”（天：小时：分钟：秒）

```
str = UnitsConverter.secondsToString(TimeUnit.DAYS, 1000, TimeUnit.MINUTES); 
```

返回：“00:16:40”（天：小时：分钟）

```
str = UnitsConverter.secondsToString(TimeUnit.MINUTES, 1000, TimeUnit.SECONDS); 
```

返回：“16:40”（分：秒）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-08-30T13:07:27.337

```
public static void timeCalculator(){

      Scanner input = new Scanner(System.in);
      System.out.print("Enter length of time in seconds: ");
      int n = input.nextInt();
      int nDay = n/86400;
      int nHours = (n%86400)/3600;
      int nMin = ((n%86400)%3600) /60;
      int nSec =(((n%86400)%3600)%60);
      System.out.println();
      System.out.print("That is "+ nDay+ " day(s),"+nHours+"  hour(s), "+nMin+"  minute(s), and "+nSec+" second(s). ");
} 
```

# javascript - .prevUntil 没有按预期工作

> ID：11357947
> 
> 赞同：0
> 
> 时间：2012-07-06T07:44:40.637
> 
> 标签：javascript, jquery

我在这段代码中做错了什么..

我应该使用此代码获取前一个兄弟的类名..但我越来越不确定..我哪里出错了

```
<!DOCTYPE html>
<html>
<head>

<meta charset=utf-8 />
<title>JprevUntil</title>

<script  type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script>
$('.clickme').live('click',function(){
    alert($(this).prevUntil('li.lick').className);
});
</script>
</head>
<body>

  <div>
      <p id="hello">Hello World</p>
      <li class="lick">hello i am li</li>
      <a href="#">heello i am a</a>
      <p class="clickme">click</p>
  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:46:25.400

你可以使用`siblings()`和`attr()`方法，`prevUnti`不是你想要的：

> 获取每个元素的所有前面的兄弟姐妹，但不包括选择器、DOM 节点或 jQuery 对象匹配的元素。

```
$('.clickme').live('click',function(){
    alert($(this).siblings('li').attr('class'));
}); 
```

`className`是一个 javascipt 核心元素属性，不能与 jQuery 对象一起使用，如果你想使用`className`你可以试试这个：

```
$('.clickme').on('click',function() { // you can use on(). live() is deprecated
    alert($(this).siblings('li')[0].className);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:48:51.427

这是因为您获得了一个 JQuery 包装的对象，请尝试：

```
$('.clickme').live('click',function(){
    alert($(this).prev('li.lick')[0].className);
}); 
```

如果你检查你的代码

```
$(this).prevUntil('li.lick') 
```

你有 ：

```
-->$(this).prevUntil('li.lick'): e.fn.e.init[1]
       0: HTMLAnchorElement
       context: HTMLParagraphElement
       length: 1
       prevObject: e.fn.e.init[1]
       selector: ".prevUntil(li.lick)"
       __proto__: Object[0] 
```

您的 HTMLAnchorElement 是一个 DOM 对象，您可以在这里检索您的 className 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:51:43.040

看看[jQuery 文档](http://api.jquery.com/prevAll/)对此有何评论：

> 获取每个元素的所有前面的兄弟姐妹，但不包括选择器、DOM 节点或 jQuery 对象匹配的元素。

不包括您的元素，这就是为什么您没有得到想要的东西。

您可以尝试以下方法：

```
$('.clickme').live('click',function(){
    alert($(this).prevAll('li.lick').get(0).className);
}); 
```

**更新：**

似乎您想要实现的目标（获得最接近的先前兄弟）可以使用该代码完成（代码取自[此处](https://stackoverflow.com/questions/2310270/jquery-find-closest-previous-sibling-with-class)）：

```
$('.clickme').live('click',function(){
    alert($(this).prevAll('li.lick:first').attr('class'));
}); 
```

[小提琴](http://jsfiddle.net/K6KQF/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T07:53:49.133

来自[prevUntil api 文档](http://api.jquery.com/?ns0=1&s=prevUntil&go=)

*获取每个元素的所有前面的兄弟姐妹，但不包括选择器、DOM 节点或 jQuery 对象***匹配的元素。****

您期望 prevUntil 停止在 li.lick 但它不包括在内。

你可以在这个[jsfiddle中看到](http://jsfiddle.net/tS8vH/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T08:00:40.013

这样做： -

参考**[现场演示](http://jsfiddle.net/SivaCharan/MY3gA/)**

## HTML：

```
 <div>
      <li class="lick2">hello i am li 2</li>
      <p id="hello">Hello World</p>
      <li class="lick">hello i am li</li>
      <a href="#">heello i am a</a>
      <p class="clickme">click</p>
      <li class="lick1">hello i am li 2</li>
  </div>​ 
```

## JS：

```
$('.clickme').one('click',function(){
    alert($(this).prevAll('li').attr('class'));
});​ 
```

## 输出：

```
lick 
```

# objective-c - 保持 NSTextView 的字体不变

> ID：11357948
> 
> 赞同：4
> 
> 时间：2012-07-06T07:44:45.957
> 
> 标签：objective-c, macos, cocoa, fonts, nstextview

我认为这将是直截了当的，但看起来我错了。基本上，我要做的就是阻止字体更改为 Apple 默认字体：Helvetica Regular 12pt。

我创建了一个 NSDocument 的子类，在我的实现文件中我有以下方法：

```
- (void)windowControllerDidLoadNib:(NSWindowController*)aController
{
    [super windowControllerDidLoadNib:aController];

    if(attrString)
    {
        [[textView textStorage] setAttributedString:attrString];
        [[textView textStorage] setFont:[NSFont fontWithName:@"Menlo Bold" size:24]];
    } 
```

当我打开文件时，此方法可以正常工作，但是如果我删除所有文本然后再次键入，字体将重置为... Helvetica Regular 12pt ... 我只想保持我指定的字体和大小它在程序的整个生命周期中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:44:40.033

您需要设置文本视图的键入属性以包含键 NSFontAttributeName 的字体。

但是，我会更进一步。如果你知道你从不需要模型中的某种字体（NSTextStorage - NSTextView 的后备存储），只需子类化 NSTextStorage 并覆盖属性设置器和获取器。NSTextView 允许用户访问字体菜单，并且复制/粘贴仍将允许某些字体进入。真正保证它永远不会进入您的文本视图的唯一方法是永远不允许它进入模型。

# android - 如何从android中的不同表中获取数据？

> ID：11357953
> 
> 赞同：0
> 
> 时间：2012-07-06T07:45:04.343
> 
> 标签：android, string, sqlite, cursor

我的应用程序有多个 SQLite 表（大约 20 个不同的字段）。这是我使用适配器类创建的（这里我刚刚提到了一个类游戏，就像我有 20 个）。

```
public class MyDbAdapter {
private SQLiteDatabase mDb;
private static MyDatabaseManager mDbManager;
Context ctx;

public MyDbAdapter(Context context) {
       this.ctx =   context;
    mDbManager = new MyDatabaseManager(context);
    mDb = mDbManager.getWritableDatabase();
}

public static final class GameColumns implements BaseColumns {
    public static final String TABLE = "game";
    public static final String IMEI = "imei";
    public static final String LAST_UPDATE = "lastupdate";
    public static final String NICKNAME = "nickname";
}

private static class MyDatabaseManager extends SQLiteOpenHelper {
    private static final String DATABASE_NAME = "dbname";
    private static final int DATABASE_VERSION = 8;

    private MyDatabaseManager(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        createGameTable(db);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

       db.execSQL("DROP TABLE IF EXISTS "+GameColumns.TABLE);
        onCreate(db);

    }

    @SuppressWarnings("unused")
    private void dropDatabase(SQLiteDatabase db) {
        db.execSQL("DROP TABLE IF EXISTS " + GameColumns.TABLE);
    }

    private void createGameTable(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + GameColumns.TABLE + " ("
                + GameColumns._ID + " INTEGER PRIMARY KEY,"
                + GameColumns.IMEI + " TEXT,"
                + GameColumns.LAST_UPDATE + " TEXT,"
                + GameColumns.NICKNAME + " TEXT);");

      }
  }
 } 
```

使用以下代码从每个表中获取数据。此函数返回 Cursor 对象。

```
public Cursor getRecords(String tableName){
    Cursor cursor   = mDb.query(tableName, null, null, null, null, null, null);
    return  cursor;
} 
```

我需要将光标对象转换为列表或字符串。为此，我们需要迭代游标对象。我的问题是，每个表都有不同的字段，所以我需要在单独的方法中迭代每个游标对象。如何使用单一方法来完成？有没有直接将光标转换为字符串的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:50:16.313

你可以使用`HashMap`...

```
ArrayList<HashMap<String, String>> items = new ArrayList<HashMap<String, String>>();

int col_count = cursor.getColumnCount();
                    while (cursor.moveToNext()) {
                        HashMap<String, String> currentItem = new HashMap<String, String>();
                        for (int i = 0; i < col_count; i++)

                        {
                            String col_name = cursor.getColumnName(i);
                            currentItem.put(col_name, cursor.getString(i));
                        }
                        items.add(currentItem);
                    }
                    cursor.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:47:34.823

您可以将`String`包含表列名称的数组作为参数传递给您的`getRecords()`方法。然后只需迭代`Cursor`获取每列的值。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:58:12.987

尝试这样的事情：

```
ArrayList<Object> attayList;

if(tableName.equals(table1)){
arrayList=new ArrayList<Table1ClassType>();
}
if(tableName.equals(table2){
arrayList = new ArrayList<Table2ClassType>();
} 
```

主要 moto 是根据数据创建新实例，因此您可以检查表类型并创建新实例，然后`arrayList`轻松使用。

# jquery - TMS 滑块和 jcarouselite 插件仅在 IE 中工作

> ID：11357956
> 
> 赞同：1
> 
> 时间：2012-07-06T07:45:10.427
> 
> 标签：jquery, html

这是我的页面：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="style.css"/>
<!--box slider-->
<script type="text/javascript" src="scripts/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="scripts/jcarousellite1.0.1_min.js"></script>
<!--jquery no conflict-->//i used noconflict to use these sliders in IE
<script type="text/javascript">
$.noConflict();
jQuery(document).ready(function($) {
// Code that uses jQuery's $ can follow here.
$(window).load(function() {
$("#slidertext").jCarouselLite({    //i used jcarousellite plugin two times,this is the first one
    btnNext: ".next",
    btnPrev: ".prev"
});
});
$(window).load(function() {     //second jcarousellite plugin
$("#slidertext2").jCarouselLite({
    btnNext: ".next2",
    btnPrev: ".prev2"
});
});
});
// Code that uses other library's $ can follow here.
</script>
<!--no conflict end-->
<!--banner slider-->
<script type="text/javascript" src="js/jquery-1.6.js" ></script>
<script type="text/javascript" src="js/cufon-yui.js"></script>
<script type="text/javascript" src="js/cufon-replace.js"></script>  
<script type="text/javascript" src="js/Vegur_300.font.js"></script>
<script type="text/javascript" src="js/PT_Sans_700.font.js"></script>
<script type="text/javascript" src="js/PT_Sans_400.font.js"></script>
<script type="text/javascript" src="js/tms-0.3.js"></script>
<script type="text/javascript" src="js/tms_presets.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/atooltip.jquery.js"></script>
    <!--banner slider end-->

    </head>
    <body> 
```

......

```
</div>
<script type="text/javascript"> Cufon.now(); </script>
    <script type="text/javascript">
        $(window).load(function(){
            $('#slider')._TMS({
                banners:true,
                waitBannerAnimation:false,
                preset:'diagonalFade',
                easing:'easeOutQuad',
                pagination:true,
                duration:400,
                slideshow:8000,
                bannerShow:function(banner){
                        banner.css({marginRight:-500}).stop().animate({marginRight:0}, 600)
                },
                bannerHide:function(banner){
                    banner.stop().animate({marginRight:-500}, 600)
                }
                })
        })
    </script>
  </body>
  </html> 
```

我的页面中有 3 个滑块、一个图像滑块和两个 jcarousel lite 插件。它在 IE 中运行良好。但在其他浏览器中，只有 TMS 滑块有效。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:52:19.897

我也面临同样的问题。只需将旧 jquery 更改为[http://code.jquery.com/jquery-1.7.2.js上提供的新 jquery](http://code.jquery.com/jquery-1.7.2.js)

希望，它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T14:19:34.613

或者您可以尝试直接使用 jQuery 而不是 $ 以避免冲突..是的，这是一项乏味的工作..但是您可以将它用作一些小代码的选项，以实现 noConflict。

# cakephp - 如何在组件文件中加载或使用模型，尤其是在 Cakephp 2.0 中？

> ID：11357958
> 
> 赞同：2
> 
> 时间：2012-07-06T07:45:24.793
> 
> 标签：cakephp, cakephp-2.0, cakephp-model

我需要在组件中加载模型以将相关模型的数据保存在该组件本身中。

> 我的组件名称是**ImagemuploadComponent**

在这个组件中，我想加载**附件**模型。我已经尝试了以下代码，但没有奏效。（在 cakephp 1.3 中效果很好）

```
 $Attachment = ClassRegistry::init('Attachment');
  $this->loadModel('Attachment'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:54:14.743

试试这个代码。这将导入您的模型并实例化。

在此之后，您可以作为控制器执行任何操作。

```
App::import('Model','Attachment');
$this->Attachment = &new Attachment();
$this->Attachment->save($your_data); 
```

# ios - 我可以禁用 UITextField 中的表情符号图标吗？

> ID：11357959
> 
> 赞同：5
> 
> 时间：2012-07-06T07:45:26.247
> 
> 标签：ios, uitextfield, emoji

当我将文本设置`UITextField`为“♈”时，它会显示一个表情符号图标，但我只想显示原始字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-15T20:19:43.483

您必须`\U0000FE0E`在 NSString 中的特殊字符之后添加。这将告诉操作系统使用“普通”版本，而不是用表情符号替换它。见[https://paulofierro.com/blog/2013/3/30/disabling-emoji-characters-with-unicode-variants](https://paulofierro.com/blog/2013/3/30/disabling-emoji-characters-with-unicode-variants)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:52:27.103

如果你想限制文本字段中的表情符号插入，那么你可以使用 NSPredicates 或者可以检查 NSCharacterSet。

# java - 不同的罐子出口尺寸

> ID：11357965
> 
> 赞同：1
> 
> 时间：2012-07-06T07:45:41.143
> 
> 标签：java, eclipse, jar, export

我对在 Eclipse 中导出 jar 文件有疑问。

当我将程序导出为桌面上的可运行 jar 时，它约为 16mb。当我从笔记本电脑导出相同的程序时，它小于 1mb。从我的笔记本电脑导出时，它仍然可以完美运行。这是一个很小的程序，当它是 15mb 时我很震惊。

我的桌面是否在我的 jar 文件中放置了太多库或其他东西？我应该怎么做才能只导出我的程序需要的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:01:02.680

检查您的导出选项。第二个对话框提供了三个单选框。尝试第二个，称为“将所需的库打包到生成的 JAR 中”。生成的 jar 小于使用第一个选项生成的其他 jar。

顺便说一句...如果您使用 Winzip、Winrar、Totalcommander 等，您可以查看 jar 文件。原因是生成 jar、war 或 ear 文件的算法类似于 zip 算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:52:31.320

如果您在两台计算机上都设置了程序，则可能是每台计算机上的构建环境都不同。

右键单击包资源管理器中的项目，选择“构建路径...”->“配置构建路径...”，然后选择“库”。现在，比较两台计算机之间的库。

如果项目在您的笔记本电脑上运行，请关联库并仅选择需要的库。

我还想强烈推荐使用带有 Shade 插件的 Maven，而不是通过 Eclipse 管理您的项目。这样，您将（应该？）永远不会遇到这个问题，同时仍然有一个可执行的 jar。在 IDE 之间移动也很简单。

# sql - 返回表示第一个非空字段的整数值

> ID：11357968
> 
> 赞同：0
> 
> 时间：2012-07-06T07:45:51.303
> 
> 标签：sql, sql-server, tsql, sql-server-2000

我创建了以下存储过程：

```
ALTER PROCEDURE [dbo].[ExampleSP]
(
    @SearchText NVARCHAR(4000),
    @ID INT = NULL
)
AS
BEGIN
SET NOCOUNT ON;

SELECT 
deID,
deTitle
FROM tblDemo As de
LEFT JOIN tblLinkTable As lnk ON (lnk.ID = de.deID)
WHERE CONTAINS(cstKeywords, @SearchText)
AND ((@ID IS NULL) OR (lnk.ID = @ID))
GROUP BY deID,Title 
ORDER BY de.Title 
```

但我还需要能够从下表列中找到第一个不为空的字段：

*deIntroText、deCompanyText、deTimetableText 和 deExampleText*

我需要对从 SELECT 返回的每条记录执行此操作。

所以我意识到我需要创建一个临时列来存储它，我想你需要使用这样的 IF 语句：

```
IF deIntroText IS NOT Null 
THEN TempFieldToReturn = 1

ELSE IF deCompanyText IS NOT Null 
THEN TempFieldToReturn = 2

ELSE IF deTimetableText IS NOT Null 
THEN TempFieldToReturn = 3

ELSE IF deExampleText IS NOT Null
THEN TempFieldToReturn = 4 
```

所以我的问题是 - 实现这一目标的最佳方法是什么？任何示例将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:09:39.140

没有真正的捷径 - 只需使用[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)表达式：

```
SELECT
   /* Other Columns */
  CASE
    WHEN deIntroText IS NOT Null THEN 1
    WHEN deCompanyText IS NOT Null THEN 2
    WHEN deTimetableText IS NOT Null THEN 3
    WHEN deExampleText IS NOT Null THEN 4
  ELSE 5 END as OtherColumn
FROM
  /* Rest of query */ 
```

这是一个搜索`CASE`- 实际上有两个变体`CASE`。如果所有列都是，我猜是 5 -如果您想要在这种情况下获得结果，`NULL`您可能会忽略该部分。`ELSE 5``NULL`

# graphics - d3.js：手动定义强制布局的节点和链接时，“无法读取未定义的属性‘权重’”

> ID：11357974
> 
> 赞同：20
> 
> 时间：2012-07-06T07:46:31.267
> 
> 标签：graphics, graph, d3.js, force-layout

我尝试以这种方式同时设置节点和链接：

```
var force = d3.layout.force()
    .size([w, h])
    .nodes(nodes)
    .links(connections)
    .start();

nodes = [{"name":"data_base_id", "kind":"subgenre"},...]
connections = [{"source":"name_of_node", "target":"name_of_other_node"},...] 
```

我有可能没有连接的数据，因此有必要定义节点，以便渲染所有节点。定义流派非常容易。但我收到此错误；

```
Cannot read property 'weight' of undefined 
```

当我注释掉 .links(connections) 时，图形呈现（突出一堆散布在各处的点......）我如何让连接/链接与 d3 合作？

我正在阅读文档，显然源和目标必须是节点数组中节点的索引。有没有办法改变它？那么，我可以使用节点的名称而不是它在数组中的索引吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-26T09:41:05.677

我之前遇到过同样的问题，这是由于链接的源/目标中有空值。打印出**节点**和**链接**信息可能有助于调试

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-15T18:39:24.593

除了在链接的源/目标中提到 null 的答案之外，其原因可能是分配了超出范围的源/目标。例如，您有 10 个节点，并且您将目标分配为第 11 个索引节点。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-07T14:52:52.030

力导向布局使用边缘权重来计算布局。`"weight":1`尝试为所有连接添加一个虚拟对象。

初始化链接的代码如下所示：

```
links.forEach(function(d) {
    if (typeof d.source == "number") { d.source = nodes[d.source]; }
    if (typeof d.target == "number") { d.target = nodes[d.target]; }
}); 
```

大概您可以调整它（在 d3 源中）以使用任何属性/类型。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-04-13T12:43:57.223

感谢上面提到空源或目标值的答案！

我一直在测试[http://bl.ocks.org/mbostock/4062045](http://bl.ocks.org/mbostock/4062045)中的图表，发现我的数据引用了一个缺失的节点。

这可能有助于其他人调试此问题：

```
d3.json("my-buggy-data.json", function(error, graph) {

    // Find blank links, which give the error
    // "Uncaught TypeError: Cannot read property 'weight' of undefined"
    graph.links.forEach(function(link, index, list) {
        if (typeof graph.nodes[link.source] === 'undefined') {
            console.log('undefined source', link);
        }
        if (typeof graph.nodes[link.target] === 'undefined') {
            console.log('undefined target', link);
        }
    });

    force
        .nodes(graph.nodes)
        .links(graph.links)
        .start(); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-07-12T17:55:12.850

我认为您的源和目标中可能有空值。我也有这个错误，并通过过滤掉空值来修复它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-21T20:48:18.860

我已经以多种方式弹出了这个问题。最近，我的边缘列表如下：

```
{Source: 0; Target: 1} 
```

代替：

```
{source: 0, target: 1} 
```

# jquery - replaceWith jquery 不起作用

> ID：11357978
> 
> 赞同：-1
> 
> 时间：2012-07-06T07:46:49.133
> 
> 标签：jquery, replacewith

```
var gethtml  = $("#topmenu > li.l89 a").text().split(' ')[1].replaceWith('Any World'); 
```

即使使用`replaceWith`如上所示，文本也不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:01:31.543

调用 .text() 后，您不再使用 jQuery 对象，而是使用纯字符串。你可以这样做...

```
var text = $("#topmenu > li.l89 a").text()
  , textParts = text.split(' ');

textParts[1] = "Any world";
console.log('New text', textParts.join(" ")); 
```

我写了长版给你看步骤。如果你愿意，你可以在一行上做，但它不再可读了。

# php - 将 json 或多维数组保存到 DB（平面）

> ID：11357981
> 
> 赞同：0
> 
> 时间：2012-07-06T07:46:54.510
> 
> 标签：php, json, multidimensional-array, drag-and-drop, nested-lists

我有一个嵌套的拖放列表，它返回 json 格式字符串。我可以在这个字符串上运行 php serialize、json_decode 等。但我坚持将层次结构保存在数据库中。

返回输出示例：

[{"id":1,"children":[{"id":2,"children":[{"id":4},{"id":7},{"id":8}]} ,{"id":3}]},{"id":5},{"id":6}]

...或者...

```
大批
(
    [0] => 数组
        (
            [id] => 1
            [孩子] => 数组
                (
                    [0] => 数组
                        (
                            [id] => 2
                            [孩子] => 数组
                                (
                                    [0] => 数组
                                        (
                                            [id] => 4
                                        )

                                    [1] => 数组
                                        (
                                            [id] => 7
                                        )

                                    [2] => 数组
                                        (
                                            [id] => 8
                                        )

                                )

                        )

                    [1] => 数组
                        (
                            [id] => 3
                        )

                )

        )

    [1] => 数组
        (
            [id] => 5
        )

    [2] => 数组
        (
            [id] => 6
        )

)

```

我想将此输出保存到这样的数据库结构中：

```
如果不存在 `menu` 则创建表 (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `rang` int(11) NOT NULL,
  `parent_id` int(11) NOT NULL,
  `name` varchar(256) NOT NULL,
  `description` varchar(256) NOT NULL,
  主键（`id`）
) 引擎=InnoDB 默认字符集=latin1 AUTO_INCREMENT=9 ；

```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:04:47.767

我会这样做：

```
<?php
$jsonString = '[{"id":1,"children":[{"id":2,"children":[{"id":4},{"id":7},{"id":8}]},{"id":3}]},{"id":5},{"id":6}]';
$jsonArray = json_decode($jsonString, true);

function parseJsonArray($jsonArray, $parentID = 0)
{
  $return = array();
  foreach ($jsonArray as $subArray) {
     $returnSubSubArray = array();
     if (isset($subArray['children'])) {
       $returnSubSubArray = parseJsonArray($subArray['children'], $subArray['id']);
     }
     $return[] = array('id' => $subArray['id'], 'parentID' => $parentID);
     $return = array_merge($return, $returnSubSubArray);
  }

  return $return;
}

var_dump(parseJsonArray($jsonArray)); 
```

你应该得到这样的数组：

```
Array ( 
  [0] => Array (
    [id] => 1 
    [parentID] => 0 
  ) 
  [1] => Array (
    [id] => 2
    [parentID] => 1 
  ) 
  // ETC.
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:01:26.197

我假设，您使用 JSON-Data 中的 ID 作为数据库中的主键。所以你不必处理 LAST_INSERT_ID。

```
function storeTree(array $treeList) {
    // Optional: Start DB-Transaction
    try {
        storeList($treeList);
        // Optional: Commit DB-Transaction
    } catch(Exception $e) {
        // Optional: Rollback DB-Transaction
    }

}

function storeList(array $list, $parentId=null) {
    foreach($list as $child) {
        storeChild($child, $parentId);
    }
}

function storeChild(array $childData, $parentId=null) {
    $childId = $childData['id'];
    $children = isset($childData['children']) ? (array) $childData['children'] : array();

    // Add a new dataset: `id` = $childId, `parent_id` = $parentId

    storeList($children, $childId);
}

storeTree($youJsonData); 
```

此代码未经测试，可能包含错误...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:53:08.803

Eigher 你在 mysql [German Tutorial for Nested Sets](http://www.klempert.de/nested_sets/)上设置了一个嵌套集模型，什么可能是最好的方法，或者你可以将请求字符串存储在你的数据库中（但要注意，你不能在 mysql 端执行任何操作......）

# beanstalkd - 与 Pheanstalk 的陈旧联系

> ID：11357983
> 
> 赞同：0
> 
> 时间：2012-07-06T07:47:11.097
> 
> 标签：beanstalkd, pheanstalk

我正在使用 beanstalkd 将一些工作卸载到其他机器上。设置有点不寻常，服务器在互联网上（公共 ip），但消费者在某些人家中的 adsl 线路后面。所以有一个 linux 服务器作为客户端，通过一个动态 ip 出去并连接到服务器以获得工作。这都是 PHP，我正在使用 pheanstalk 库。

一切顺利运行了一段时间，但随后adsl更改了IP（每24小时提供商强制断开重新连接）客户端只是挂起，永远不会超出“保留”。

我认为对储备设置超时会有所帮助，但事实并非如此。看起来，客户端发出命令并阻止，它从不检查超时。它只是发出一个带有超时的保留（而不是简单的保留），并且服务器有责任在超时发生时返回一个 TIME_OUT。问题是，连接断开了（但 TCP/IP 直到任何一方尝试与另一方交谈才知道这一点），如果客户端阻止读取，它将永远不会返回。

该库似乎支持某种本地超时（例如尝试连接到服务器时），但它似乎没有考虑这种情况。

我怎样才能检测到陈旧的连接并强制重新连接？协议（以及 pheanstalk 本身）上是否有某种保活？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:04:24.177

您可以尝试在响应请求后立即关闭每个连接，并每次重新打开一个新连接。

没有任何`close()`功能，但您删除 Pheanstaly 对象`unset($pheanstalk)`将关闭它。

这个解释很有帮助： [Pheanstalk（beantalk 的 PHP 客户端）- 连接如何工作？](https://stackoverflow.com/questions/9151315/pheanstalk-php-client-for-beanstalk-how-do-connections-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:14:32.863

我还没有尝试过，但我想出了通过 SSH 隧道连接到 beanstalk 服务器的想法。我们可以在隧道上启用`ServerAliveCountMax`和`ServerAliveInterval`选项，这样网络或服务器故障会导致隧道关闭。这应该会导致 pheanstalk 客户端报告错误。

# c++ - 调试器中的 QtCreator 取消引用指针（使用库）

> ID：11357986
> 
> 赞同：1
> 
> 时间：2012-07-06T07:47:17.127
> 
> 标签：c++, debugging, qt-creator

我在 Kubuntu 12.04 上使用 Qt Creator 2.4.1。我在我的项目（不是源代码）中使用[GDAL/OGR](http://gdal.org/ogr/index.html)库。

当我在“Locals and Expressions”窗口中使用调试器时，我只能看到 GDAL/OGR 对象的地址而不是它们的字段。

当然，选中“自动取消引用指针”选项。当使用我自己的对象（类定义在源代码中）并创建指向它们的指针时，我可以看到所有细节。

是否可以查看库对象状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:53:03.953

只要这些库的调试符号可用，就应该可以看到这些对象。

# python - 删除网格 Tkinter 中的某些行/列

> ID：11357988
> 
> 赞同：2
> 
> 时间：2012-07-06T07:47:28.753
> 
> 标签：python, user-interface, tkinter, ttk

如果我在同一个框架中有几行和几列带有多个条目/标签小部件，是否可以只选择其中一个并将其删除，同时保留其他小部件。

例如

```
class Window():
    def __init__(self):
        self.root = Tk()
        self.win1 = Frame(self.root)
        entry1 = Entry(win1, row=1, column=1)
        entry2 = Entry(win1, row=1, column=2)
        label1 = Label(win1, row=1, column=3)

    def main1(self):
        label2 = Label(win1, row=1, column=4)
        labeln = Label(win1, row=1, column=n) 
```

然后我想从第 3 列开始删除，其中 n 可能是一个随机数。是否可以获取 grid_forget 并插入列数？行也可以吗？

更新：或者是否可以简单地返回到在**init**下创建的窗口并删除在 main1 下创建的窗口（但已在同一框架中创建）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:54:12.940

阅读 grid_remove 和 grid_forget 方法；这些将允许您从视图中删除现有的小部件。您还可以销毁小部件，使它们消失。

自从我这样做已经有一段时间了（并且目前没有一台可以创建示例的计算机），但我认为一个棘手的问题可能是你必须进入并明确设置网格行和/ 或列高、宽度或权重归零以回收空间。不过还是蛮可行的。

您的另一个选择是通过方法或函数创建所有小部件。然后，您可以很容易地销毁并重新创建所有小部件。这对用户来说可能不太愉快，因为整个 UI 将“闪烁”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:33:05.913

这是一个用于为 GUI 创建动态 python 代码的 csh 脚本。

**它能做什么？**

进入

> ./dynamic_python -label name,age -frame myframe

它将创建 2 个名为 name,age 的标签，为每个标签和一些其他小部件创建 2 个输入框。我知道这不完全是您所需要的，但请考虑以一种可能的方法来解决您的问题。如果您需要更多帮助，请联系我。将感谢其他用户的反馈:)

dynamic_python 的代码：

```
#! /bin/csh -f

#echo $argv[1]
#shift
#echo $argv[1]
while ("$#" != 0)
    if("$argv[1]" == "-label") then 
        set label = "$argv[2]"
        shift
        shift
    endif
    if("$argv[1]" == "-frame") then 
        set frame = "$argv[2]"
        shift
        shift
    endif
end
set label = `echo $label | sed 's/,/ /g'`
set lcount = `expr "$#label" + 1`
set lc = 1
#
echo "#! /usr/bin/python" > dy.py
echo "from Tkinter import *" >> dy.py
#
echo "def fun_ok():" >> dy.py
echo "  print 'OK_Accepted'" >> dy.py
set label = `echo $label | sed 's/,/ /g'`
set lcount = `expr "$#label" + 1`
set lc = 1
echo "  list_out = []" >> dy.py
while ($lc != $lcount)
    echo "  print $label[$lc].get()" >> dy.py
    echo "  list_out.append('-$label[$lc]')" >> dy.py
    echo "  list_out.append($label[$lc].get())" >> dy.py
    set lc = `expr "$lc" + 1`
end
echo "  print list_out" >> dy.py
#
echo "$frame = Tk()" >> dy.py
#
set label = `echo $label | sed 's/,/ /g'`
set lcount = `expr "$#label" + 1`
set lc = 1
while ($lc != $lcount)
    echo $lc $label[$lc]
    echo "$label[$lc] = StringVar()" >> dy.py
    echo "Label($frame,text="_$label[$lc]_").grid(row = $lc,column = 1)" | sed 's/_/"/g' >> dy.py
    echo "Entry($frame,textvariable=$label[$lc]).grid(row=$lc,column=2)" >> dy.py
    set lc = `expr "$lc" + 1`
end
echo "Button($frame,text='OK',command=fun_ok).grid(row = $lc,column = 1)" >> dy.py
echo "Button($frame,text='EXIT',command=$frame.quit).grid(row = $lc,column = 2)" >> dy.py
#Button(master, text="OK", command=callback)
#
echo "$frame.mainloop()" >> dy.py
#
chmod 755 *
dy.py 
```

# java - 如何通过 HTTP get 获取音频文件？

> ID：11357991
> 
> 赞同：1
> 
> 时间：2012-07-06T07:47:33.377
> 
> 标签：java, android, audio, streaming, restful-architecture

我正在尝试通过 http get 从安全的 restful 服务获取音频文件，我已经成功接收和解析文本 XML 服务，但是对于如何处理音频文件有点困惑。

使用 XML 响应调用安全 restful 服务的代码

```
String callWebService(String serviceURL) {
        // http get client
        HttpClient client = getClient();
        HttpGet getRequest = new HttpGet();

        try {
            // construct a URI object
            getRequest.setURI(new URI(serviceURL));
        } catch (URISyntaxException e) {
            Log.e("URISyntaxException", e.toString());
        }

        // buffer reader to read the response
        BufferedReader in = null;
        // the service response
        HttpResponse response = null;
        try {
            // execute the request
            response = client.execute(getRequest);
        } catch (ClientProtocolException e) {
            Log.e("ClientProtocolException", e.toString());
        } catch (IOException e) {
            Log.e("IO exception", e.toString());
        }
        try {
            in = new BufferedReader(new InputStreamReader(response.getEntity()
                    .getContent()));
        } catch (IllegalStateException e) {
            Log.e("IllegalStateException", e.toString());
        } catch (IOException e) {
            Log.e("IO exception", e.toString());
        }
        StringBuffer buff = new StringBuffer("");
        String line = "";
        try {
            while ((line = in.readLine()) != null) {
                buff.append(line);
            }
        } catch (IOException e) {
            Log.e("IO exception", e.toString());
            return e.getMessage();
        }

        try {
            in.close();
        } catch (IOException e) {
            Log.e("IO exception", e.toString());
        }
        // response, need to be parsed
        return buff.toString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:57:30.757

这个可以帮助你吗..

```
public static void downloadFile(String fileURL, String fileName) {
    try {
        // fileURL=fileURL.replaceAll("amp;", "");
        Log.e(fileURL, fileName);
        String RootDir = Environment.getExternalStorageDirectory()
                .toString();

        File RootFile = new File(RootDir);
        new File(RootDir + Commons.dataPath).mkdirs();
        File file = new File(RootFile + Commons.dataPath + fileName);
        if (file.exists()) {

            file.delete();
        }
        file.createNewFile();

        URL u = new URL(fileURL);
        HttpURLConnection c = (HttpURLConnection) u.openConnection();
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();
        FileOutputStream f = new FileOutputStream(new File(
                "mnt/sdcard"+Commons.dataPath + fileName));
        InputStream in = c.getInputStream();
        byte[] buffer = new byte[1024];
        int len1 = 0;

        while ((len1 = in.read(buffer)) > 0) {
            f.write(buffer, 0, len1);
        }
        f.close();

    } catch (Exception e) {

        e.printStackTrace();
    }

} 
```

# j - J : Iverson 的 `table` 函数来自 _A Personal View of APL_

> ID：11357996
> 
> 赞同：2
> 
> 时间：2012-07-06T07:48:01.440
> 
> 标签：j

在[*APL 个人观点的*](http://www.jsoftware.com/papers/APLPersonalView.htm)最后（就在参考文献之前），Ken Iverson 给出了以下一系列 J 代码片段：

```
[a=. b=. i. 5
0 1 2 3 4

   a +/ b 
0 1 2 3 4
1 2 3 4 5
2 3 4 5 6
3 4 5 6 7
4 5 6 7 8

   over=.({.,.@;}.)&":@,
   by=. (,~"_1 ' '&;&,.)~
   a by b over a !/ b
+-+---------+
| |0 1 2 3 4|
+-+---------+
|1|1 1 1 1 1|
|2|0 1 2 3 4|
|3|0 0 1 3 6|
|4|0 0 0 1 4|
|5|0 0 0 0 1|
+-+---------+

   table=. /([`by`]`over`)\
   2 3 5 *table 1 2 3 4 5
+-+-------------+
| |1  2  3  4  5|
+-+-------------+
|2|2  4  6  8 10|
|3|3  6  9 12 15|
|4|5 10 15 20 25|
+-+-------------+ 
```

所有这些都在 J701 中为我工作，除了最后一个，它给了我：

```
 table=. /([`by`]`over`)\
   2 3 5 *table 1 2 3 4 5
|rank error
|   2 3 5    *table 1 2 3 4 5 
```

我在[IBM 的原始 PDF 中](http://web.archive.org/web/20060820163256/http://www.research.ibm.com/journal/sj/304/ibmsj3004O.pdf)注意到引号看起来更像：

```
table=. /([`by']`over')\ 
```

但这是一个语法错误。

是否在 J 站点上将 PDF 转换为 HTML 时出现转录错误，或者 J 的语法是否发生了变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:43:04.407

我不认为这是有效的 J 语法（我的意思是，它应该做什么）；也许是那时，但不再是了。副词`table`可以简单地定义为：

```
 table =: 1 :'[ by ] over u/' 
```

我能得到的最接近艾弗森的版本是：

```
 table =: /([`by`]`over`) 
```

但是你必须唤起 ( ``:`) 副词的结果：

```
 2 3 5 (*table`:6) 1 2 3 4 5
┌─┬─────────────┐
│ │1  2  3  4  5│
├─┼─────────────┤
│2│2  4  6  8 10│
│3│3  6  9 12 15│
│5│5 10 15 20 25│
└─┴─────────────┘ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:03:14.423

J变了。早期版本允许以不再可能的方式定义副词和连词。

与最近版本`table`兼容的版本出现在*J 词典*中的[“Bordering a Table”下](http://www.jsoftware.com/help/dictionary/samp05.htm)

# c# - c# 原始数组是易变的吗？

> ID：11357997
> 
> 赞同：4
> 
> 时间：2012-07-06T07:48:03.723
> 
> 标签：c#

我这样声明数组`private double[] array = new double[length]`。在一个线程中更新此数组项并在另一个线程中读取是否安全？我会有最新的价值吗？

注意我不枚举数组。我只通过索引访问它的项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:50:26.070

数组不是线程安全的，来自[MSDN](http://msdn.microsoft.com/en-us/library/system.array.aspx)：

> 通过集合进行枚举本质上不是线程安全的过程。即使一个集合被同步，其他线程仍然可以修改该集合，这会导致枚举器抛出异常。为了保证枚举过程中的线程安全，您可以在整个枚举过程中锁定集合，也可以捕获其他线程更改导致的异常。

如果您一次只更新单个项目，我认为您会很安全，但除非我找到证明这一点的文档，否则我不会相信它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:03:31.983

挥发性不保证价值的新鲜度。它阻止了一些优化，但不保证线程同步。

Double 不保证自动[更新](http://msdn.microsoft.com/en-us/library/aa691278%28VS.71%29.aspx)。因此，在没有同步的情况下更新/读取双精度数组根本不是线程安全的，因为您可能会读取部分写入的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:15:44.617

不，他们不是。您应该使用信号量或其他方法设计锁定系统以确保线程安全。您可以检查[生产者/消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)。

# javascript - XMLHttpRequest responseText 初始值

> ID：11357998
> 
> 赞同：0
> 
> 时间：2012-07-06T07:48:07.113
> 
> 标签：javascript, mysql, xmlhttprequest, responsetext

我试图理解别人的代码来修复一些错误。有一次调用 xmlhttp = new XMLHttpRequest(); 是在 JavaScript 函数中创建的，并且 responseText 属性的值已经设置（在调用后立即使用 console.log(xmlhttp) 检查）。该值是有意义的（来自 MySQL DB 的一些值）但它们是错误的（错误的列），我想更改它们。

为什么它在实例化对象后立即具有值？我应该寻找什么样的电话来找到这些值的设置位置？

PD：我对 JS 还很陌生，我有点迷失在树林里。

编辑：

我能够进一步跟踪行为：

```
todbajax=ajaxObject(); // here is the xmlhttp = new XMLHttpRequest();
todbajax.open("POST", "install/dataset.php", true );
todbajax.onreadystatechange=function() {
    console.log("1", todbajax.responseText);
    if (todbajax.readyState==4) {
        console.log("2", todbajax.responseText);
        .
        .
        .
    }
} 
```

控制台输出如下：

```
 1
 1      ["view","test2","test","asdfadsf"]
 2      ["view","test2","test","asdfadsf"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:55:18.817

您从 responseText 获得的价值是什么？当我执行以下代码行时，您会得到一个空字符串。所以在实例化和打印值之间必须发生一些事情。

```
console.log(new XMLHttpRequest().responseText); // => "" 
```