# StackOverflow 问答 12049000-12049999

# javascript - 旋转函数的内部

> ID：12049003
> 
> 赞同：1
> 
> 时间：2012-08-21T05:40:25.933
> 
> 标签：javascript, matrix, rotation

我正在寻找有关修改二维矩阵的旋转函数中发生的情况的信息。我发现了这一点，但是将旋转指定为 90、180 或 270 不会呈现任何变化。这是我的代码：

```
Matrix.prototype.rotate = function(deg) {
    var radians = deg * Math.PI / 180,
        sin = Math.sin(radians),
        cos = Math.cos(radians),
        a = this.a,
        b = this.b,
        c = this.c,
        d = this.d,
        tx = this.tx,
        ty = this.ty;

    this.a = a*cos - b*sin;
    this.b = a*sin + b*cos;
    this.c = c*cos - d*sin;
    this.d = c*sin + d*cos;
    this.tx = tx*cos - ty*sin;
    this.ty = tx*sin + ty*cos;
} 
```

我确实设法找到了一些关于它为什么不起作用的信息，但没有关于如何修复它的信息。据我了解，旋转 90 度会导致 sin 和/或 cos 如此之小，以至于当应用于矩阵时，它不会改变任何东西。如果我对此有误，请告诉我。

为了让它工作，我将它添加到函数的开头：

```
if(!(deg % 90)) {
    deg -= .0001;
} 
```

它有效，但我确信在旋转数千次后它不会非常准确。有谁知道更好的解决方案？

实际的旋转值存储在其他地方，如果有帮助，只会将差异传递给函数。

**编辑**：我忘了提到当 sin 或 cos 等于 1 或 -1 时什么都不会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:01:33.630

不确定 a、b、c 和 d 的用途，但尽可能保留所有原始值并使用绝对角度来计算旋转值。否则，正如您也提到的，不准确的总和将变得越来越明显。

我会摆脱`-= 0.001`90 度的 hack，`sin`应该`1`并且`cos`应该`0`（或至少非常接近），实现以下转换：

```
a' := -b
b' := a
c' := -d
d' := c
tx' := -ty
ty' := tx 
```

# php - WAMP 上传大文件

> ID：12049004
> 
> 赞同：5
> 
> 时间：2012-08-21T05:40:37.750
> 
> 标签：php

我有 2.24MB 的文件大小要上传到数据库，它显示

未收到要导入的数据。没有提交文件名，或者文件大小超过了 PHP 配置允许的最大大小。请参阅常见问题解答 1.16。

我正在使用支持版本的 WAMP 服务器 2.2

```
Apache 2.2.21
PHP 5.3.8
MySQL 5.5.16 
```

我也做了以下更改

```
C:\wamp\bin\apache\apache2.2.6\bin\php.ini 
post_max_size = 750M
upload_max_filesize = 750M
max_execution_time = 5000
max_input_time = 5000
memory_limit = 1000M 

C:\wamp\bin\mysql\mysql5.0.45\my.ini:

max_allowed_packet = 200M 
```

谁能建议我上传大文件的选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-01-05T13:46:32.207

这就是你必须做的！

转到**c:\wamp\alias\phpmyadmin.conf**

现在将**php_admin_value upload_max_filesize**设置为 1024M

再见！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T05:55:21.957

您的问题是您修改了错误的 PHP.ini 文件。这是 WAMP 诡计。

WAMP 使用了一个烦人的系统，其中不使用实际的 .ini 文件——它们是在启动时动态生成的。要修改`.ini`条目，您实际上需要左键单击 WAMP 图标，然后`php.ini`从上下文菜单中选择。它将默认为记事本，进行更改并点击“保存”（点击“另存为”将生成记事本错误）。保存后，再次重新启动 WAMP。

当我第一次去文件夹并尝试编辑文件时，这个也让我感到震惊。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-12T06:00:50.377

还有另一种方法可以做到这一点，您根本不必触摸默认设置。

您可以根据个人需要使用名为别名的 httpd（在 wamp 下运行的 apache 服务器）选项，并根据需要设置目录结构。例如，这里是我如何使用别名设置我的 wordpress。

配置文件在：

```
.../wamp64/alias/ 
```

在那里你可能已经找到了一些文件，例如。`adminer.conf`或`phpmyadmin.conf`。因此，只需创建一个新文件并使用`.conf`扩展名调用它，例如`wordpress.conf`，您可以在其中进行配置，例如。对于窗户：

```
Alias /wordpress "c:/wamp64/www/wordpress/"

<Directory "c:/wamp64/www/wordpress/">
    Options Indexes FollowSymLinks
    AllowOverride all
  <IfDefine APACHE24>
    Require local
  </IfDefine>
  <IfDefine !APACHE24>
    Order Deny,Allow
      Deny from all
      Allow from localhost ::1 127.0.0.1
    </IfDefine>

    # Maximum allowed size for uploaded files PHP.
    # http://php.net/upload-max-filesize
    php_value upload_max_filesize 20M
    php_admin_value upload_max_filesize 128M

</Directory>` 
```

行`php_value upload_max_filesize 20M`是您可以设置 php 大小的位置，`php_admin_value upload_max_filesize 128M`行是您设置 phpMyAdmin 首选项的位置。

认为我应该指出这是一个选项，而不是`php.ini`直接编辑文件，因为这将进行系统范围的更改，并且别名选项可以是选择性的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-17T07:44:48.837

转到**C:\wamp64\bin\apache\apache2.4.23\bin**（如果要复制粘贴，请不要忘记更改 apache 版本）并在**php.ini**文件中将**upload_max_filesize**编辑为 20M 或更多，将**post_max_size**编辑为 20M 或更多. Mow 重启 wamp 服务器（左键单击 wamp 隐藏图标并重启服务器）如​​果您仍然有问题，请尝试从此处编辑 php.ini **C:\wamp64\bin\php\php7.0.10**（如果您需要更改 php 版本）将复制粘贴）并再次重新启动服务器。现在它必须工作。

 ***** * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-17T12:02:06.460

如果您使用的是 WAMP 服务器，那么要编辑的正确文件是 Wampmanager Icon->PHP->php.ini，如果它没有从图标选择中打开，那么您可以通过访问以下路径安装目录（C、D、 E..)wamp/bin/apache/apache2.xy/bin/php.ini 并打开 php.ini 文件并将文件大小设置为 1024M。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-28T06:02:22.307

您应该更改以下文件夹中所有以 php 开头的文件。例如`php.ini`,`php.ini-development`等`php.ini-production`。

```
C:/wamp/bin/{Apache Folder and PHP Folder} 
```

更改`upload_max_filesize`然后重新启动您的 Apache 服务器。****

# c++ - C 编译器如何解析代码？

> ID：12049006
> 
> 赞同：1
> 
> 时间：2012-08-21T05:40:54.853
> 
> 标签：c++, c

> **可能重复：**
> [操作 c=a+++b 是什么意思？](https://stackoverflow.com/questions/7485088/what-does-the-operation-c-ab-mean)

当涉及到四行 C 代码时，编译器会做什么，为什么？

```
 int a = 1, b = 2;
  a+++b;
  a---b;
  a++-b;
  a-++b; 
```

我听说过像“贪婪编译器”这样的术语，有人可以进一步解释一下吗？

非常感谢。

# php - 如何以多维方式创建键并绑定数组值 PHP

> ID：12049007
> 
> 赞同：-2
> 
> 时间：2012-08-21T05:40:57.553
> 
> 标签：php, arrays, multidimensional-array, array-merge

我这里有数据：

这是我的第一个函数的结果。我用于结果的变量是 $this->arrays。

```
Array
(
[1] => Array //Transactiondetails of SiteID 1
    (
        [SiteID] => 1
        [Balance] => 2000
        [MinBalance] => 1000
        [MaxBalance] => 500
        [OwnerAID] => 1
        [GroupID] => 1
        [Deposit] => 10000
        [Reload] => 0
        [Redemption] => 0
    )
  ) 
```

现在，这是我的第二个函数的结果。我用于结果的变量是 $this->combined。

```
Array
(
[0] => Array
    (
        [AID] => 1
        [Sites] => Array
            (
                [0] => 1 //List of SiteID owned by AID                   
                [1] => 5
            )
    )

[1] => Array
    (
        [AID] => 3
        [Sites] => Array
            (
                [0] => 4 //SiteID
            )
    )

[2] => Array
    (
        [AID] => 4
        [Sites] => Array
            (
                [0] => 1 //SiteID
            )
    )

 ) 
```

我用这段代码试试：

```
 public function createListOfCorpOwnedSites()
 {

 foreach ($this->combined as &$site) {

            $aids = array();

            foreach ($this->result_array as $acct) {
              if ($acct['SiteID'] === $site['SiteID'])
                $aids[] = $acct['AID'];
              }
              $site['CorpAID'] = $aids;
            }

            print_r($this->combined );

            } 
```

但是，我需要一个更好的结果，第一个，我需要添加指向由多个 AID 拥有的 SiteID 列表的 CorpAID 的键。

结果应该是这样的：

```
 Array([0]=> Array(
        [SiteID] => 1
        [Balance] => 2000
        [MinBalance] => 1000
        [MaxBalance] => 500
        [OwnerAID] => 1
        [GroupID] => 1
        [Deposit] => 10000
        [Reload] => 0
        [Redemption] => 0
        [CorpAID] => Array(
                      [0] => 1
                      [1] => 4 
    ) 
```

有可能做到吗？请以正确的方式指导我，感谢您的关注，并提前感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:28:38.370

目前，您将 ID 设置为孩子。最好在**密钥**中使用这些唯一 ID，以便于**识别**。

从

```
[1] => Array (
  [SiteID] => 1
  ...
) 
```

至

```
[1] => Array ( // SiteID
  ...
) 
```

我会改变第二个函数的结果（$this->combined）。

从

```
[0] => Array (
  [AID] => 1
  ...
) 
```

至

```
[1]=> Array ( // AID ID
  ...
) 
```

以后需要这个

```
foreach($this->combined as $aid) {
  $aidID = key($aid);
  foreach($aid as $siteID) {
    $this->arrays[$siteID]['CorpAID'][] = $aidID;
  }
} 
```

# c - 内核级别的 C 中的多线程

> ID：12049008
> 
> 赞同：-4
> 
> 时间：2012-08-21T05:41:04.367
> 
> 标签：c, multithreading

据我所知`C language`，没有`multithreading`像这样的直接显式框架`Java`，那么内核级程序，例如系统驱动程序和操作系统功能，`multithreaded`在编写时`C`如何？`multithreading`在较低级别如何支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T05:50:48.117

多线程是一种抽象。照原样，您不能执行比内核数量更多的指令（​​在一定程度上有例外）。相反，它是通过调度和取消调度线程和/或进程来实现的。

基本上要获得看起来像多线程的东西，您希望能够跟踪两个不同的指令指针并共享内存。在内核中，您只是降低了一个抽象级别。

# solr - Solr 建议器不返回数字

> ID：12049012
> 
> 赞同：4
> 
> 时间：2012-08-21T05:41:16.493
> 
> 标签：solr

这是 Solr 建议器的 queryAnalyzer 使用的 fieldType，以及 Suggester 本身使用的字段。

```
<fieldType name="the_suggest_type" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
  <analyzer type="query">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="index">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

*   我验证了建议者本身使用的字段具有以“34-ab”、“676-32”等数字开头的值
*   `http://localhost:1234/solr/select/?qt=/suggest&q=34`不返回任何结果。
*   我正在使用 org.apache.solr.spelling.suggest.Suggester

# assembly - 如何将汇编程序（@binutils）默认配置为“noreorder”？

> ID：12049014
> 
> 赞同：1
> 
> 时间：2012-08-21T05:41:27.293
> 
> 标签：assembly, compiler-construction, mips, cross-compiling

我将安装一个默认情况下不重新排序指令的汇编程序。我不想在我的汇编源代码中添加“.set noreorder”。

我认为这是可以做到的，因为有人给了我他从相同的汇编源代码生成的二进制文件。我把它和我的比较了一下，发现唯一的区别是程序头：

他的：

```
private flags = 70003000: [abi=EABI32] [mips32r2] [not 32bitmode]
```

矿：

```
private flags = 70003001: [abi=EABI32] [mips32r2] [not 32bitmode] [noreorder]
```

如果我在汇编源代码中删除“.set noreorder”，我的二进制文件将与他的完全不同。

所以我认为这只是因为他的汇编程序默认情况下不会重新排序指令。但是他不知道如何配置它，因为安装汇编程序的是其他人。有人可以帮我吗？

# c# - 局部变量“mydate”在访问之前可能未初始化

> ID：12049021
> 
> 赞同：3
> 
> 时间：2012-08-21T05:42:21.570
> 
> 标签：c#, c#-4.0

在我的代码中，我像这样初始化了 Datetime

```
 DateTime myDate; 
```

但是当我尝试访问它时，我得到了这个错误。

> 局部变量“myDate”在访问之前可能未初始化

在这里我初始化了我的日期知道吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-21T05:43:19.383

你*声明*了它，但你没有给它一个值；在“明确分配”之前，您无法***读取局部变量。***举个简单的例子：

```
DateTime myDate = DateTime.UtcNow; // is assigned 
```

您不必立即给它一个值......您可以在尝试阅读它之前的任何时候给它一个值，包括任何分支等，它不会留下它有一个值的歧义，例如：

```
DateTime myDate;
//....
if(condition) {
    myDate = DateTime.UtcNow;
} else {
    myDate = GetDateFromSomewhereElse();
}
Console.WriteLine(myDate); 
```

相比之下，*字段*（类变量）会自动初始化为它们的全零值，并且在对象创建时被视为“明确分配”。

# c# - 如何将用户名和密码传递给 Sharepoint Web 服务？

> ID：12049022
> 
> 赞同：1
> 
> 时间：2012-08-21T05:42:47.590
> 
> 标签：c#, asp.net, web-services, sharepoint-2010

我正在为 sharepoint 2010 开发 asp.net 应用程序。我想在我的 asp.net 应用程序中访问 sharepoint 数据。因此我正在使用网络服务。Web 服务 URL 以`https`. 我正在使用以下代码访问 Web 服务。

```
 private void TryOutCode()
        {
            //SharepointWebApplication.ListsServiceReference.ListsSoap s;
            SharepointWebApplication.ServiceReference1.ListsSoapClient proxy = new SharepointWebApplication.ServiceReference1.ListsSoapClient();

            proxy.ClientCredentials.Windows.ClientCredential = System.Net.CredentialCache.DefaultNetworkCredentials;
            //proxy.ClientCredentials.Windows.ClientCredential.UserName = @"anil-pc\owner";
            //proxy.ClientCredentials.Windows.ClientCredential.Password = "123";
            //proxy.ClientCredentials.Windows.AllowNtlm = true;
            //proxy.ClientCredentials.Windows.ClientCredential = new NetworkCredential("owner", "123", "anil-pc");
            proxy.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;

            //Microsoft.SharePoint.SPListItem li = new Microsoft.SharePoint.SPListItem();

            //Define the parameters for the service call
            XElement query = new XElement("Query");
            XElement queryOptions = new XElement("QueryOptions");
            XElement viewFields = new XElement("ViewFields");

            XElement result = proxy.GetListItems("PBS Internal Contacts", null, query, viewFields, null, queryOptions, null);

            //XDocument list_data = XDocument.Parse(result);

            XNamespace ns = "#RowsetSchema";

            var query1 = from x in result.Descendants()
                         where x.Name == ns + "row"
                         select new PBSInternalContacts
                         {
                             User = x.Attribute("ows_User").Value,
                             Role = x.Attribute("ows_Role").Value,
                         };

            List<PBSInternalContacts> pbsInternalContactsList = query1.ToList();
            GridView1.DataSource = pbsInternalContactsList;
            GridView1.DataBind();
        } 
```

我的 web.config 文件如下

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Windows">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="ListsSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
          receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="Transport">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="ListsSoap1" closeTimeout="00:01:00" openTimeout="00:01:00"
          receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="Transport">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="ListsSoap2" closeTimeout="00:01:00" openTimeout="00:01:00"
          receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="Transport">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost/_vti_bin/Lists.asmx" binding="basicHttpBinding"
        bindingConfiguration="ListsSoap" contract="ListsServiceReference.ListsSoap"
        name="ListsSoap" />
      <endpoint address="https://abc.info/_vti_bin/Lists.asmx"
        binding="basicHttpBinding" bindingConfiguration="ListsSoap1"
        contract="ServiceReference1.ListsSoap" name="ListsSoap1" />
    </client>
  </system.serviceModel>
</configuration> 
```

当我使用上述代码进行调试时，我收到错误消息“HTTP 请求未经客户端身份验证方案‘Ntlm’授权。从服务器收到的身份验证标头是“NTLM”。我在以下行收到错误

```
XElement result = proxy.GetListItems("PBS Internal Contacts", null, query, viewFields, null, queryOptions, null); 
```

我应该如何使用用户名和密码访问 sharepoint Web 服务。您能否提供我可以解决上述问题的任何代码或链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:38:57.657

我已经在 C# 中传递了凭据，如下所示。

```
proxy.ClientCredentials.Windows.ClientCredential = new NetworkCredential("owner", "123", "anil-pc"); 
```

Web.config 文件具有以下设置

```
<security mode="Transport">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security> 
```

现在一切正常。我能够访问共享点列表数据。

# c++ - 具有实际面向对象的跨平台 C++ 2D 游戏引擎

> ID：12049025
> 
> 赞同：1
> 
> 时间：2012-08-21T05:43:16.560
> 
> 标签：c++, game-engine

我正在寻找具有实际面向对象方法的跨平台（Windows、Linux、Mac）C++ 2D 游戏引擎，而不仅仅是蹩脚的单例等。我正在寻找一些基于物理的小型免费和开源游戏，因此许可证必须是 MIT/BSD 或 GPL。

我找到了很多不错的选择，但它们都是高级语言，开发似乎停滞不前。例如，LibGosu 看起来很棒，但它缺少碰撞检测等基本功能。LOVE，Cocos2D 很棒，但它们分别是在 Lua 和 Python 中的。有没有什么好的 C++ 替代方案不会让我的生活成为依赖地狱并允许我编写正确的 OO 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T06:02:38.547

在准备好预构建的对象模型和滚动您自己的模型之间进行权衡。虽然从预先构建的 OM 开始可能会更快，但它可能不适合您以后的需求，并且根据您的需求进行修改（或更可能是*变通*）会很痛苦。这就是为什么许多引擎将它们的功能暴露在稍低的级别，然后您可能会针对您的客户端进行编码，这需要您自己创建“胶水”层。

至于寻找引擎，**您可以只使用带有四边形/精灵的 3D 引擎**和相机上的正交投影（仅限制在平面上移动）以获得与 2D 引擎相同的效果。您基本上可以修复 3D 的 Z 分量（例如`0`），您可以或多或少地将其视为 2D。此外，如果您愿意，您可能会获得一个性能更高的引擎，以及能够在以后轻松合并 3D 功能和概念的额外好处。

与将自己限制在 2D 引擎相比，您将有更广泛的多样性和可能性（从 API/OM 意义上）找到您需要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:51:18.820

查看 cocos2d-x，cocos2d-iphone 的 c++ 端口。结合 Box2D ( [http://box2d.org/](http://box2d.org/) ) 用于简单的物理，它提供了很多可能性。

两者都是 c++，分别在 MIT 和 zlib 许可下。

编辑：从 cocos2d-x v2 开始，不再支持 linux 端口（[http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Tutorials](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Tutorials)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:23:38.560

你看过[ClanLib](http://clanlib.org/wiki/Main_Page)吗？

我用它自己创建了一个小型 2D 游戏。支持 Linux 和 Windows（但仅部分支持 Mac）并且它是 C++。此外，它具有许多基本功能和可选的显卡加速等。许可证非常自由。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T07:55:12.357

您可以使用[SFML](http://www.sfml-dev.org/)

它易于使用，并且您可以添加许多物理引擎。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T07:22:56.953

COCOS2D-x对你来说是可以的，但是它不包括碰撞检测，所以你需要自己实现或者使用第三方lib。我推荐[Box2d](http://box2d.org/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-06T13:24:27.440

[Angel2d](http://angel2d.com/)是一个面向对象的游戏引擎，用于在开发阶段为游戏开发快速原型。由于它是用 C++ 编写的，以后您也可以将代码用于真正的开发阶段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-24T22:47:39.590

试试[Oxygine](http://oxygine.org/)游戏框架。它基于 SDL2

# c++ - c ++ MFC编译错误“C2470：'CMySink'：看起来像一个函数定义，但没有参数列表；跳过明显的主体”

> ID：12049029
> 
> 赞同：0
> 
> 时间：2012-08-21T05:43:33.700
> 
> 标签：c++, com, mfc

c++ MFC编译错误

错误 C2470：“CMySink”：看起来像函数定义，但没有参数列表；跳过明显的正文 d:\faxmanager\faxmanager\mysink.cpp 34

.h 文件

```
class CMySink : public CCmdTarget
{
    DECLARE_DYNAMIC(CMySink)
...

protected:
    DECLARE_MESSAGE_MAP()    
     void OnJobAdded(FAXCOMEXLib::IFaxServer *pFaxServer, BSTR bstrJobId);
    ...
}; 
```

.cpp 文件

```
BEGIN_DISPATCH_MAP(CMySink, CCmdTarget)
  DISP_FUNCTION (CMySink ,"OnOutgoingJobAdded", OnJobAdded, VT_EMPTY, VTS_I4 VTS_BSTR)
END_DISPATCH_MAP()

void CMySink:OnJobAdded(FAXCOMEXLib::IFaxServer *pFaxServer,  BSTR bstrJobId) 
{ 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T05:45:13.373

```
void CMySink:OnJobAdded 
```

应该

```
void CMySink::OnJobAdded 
```

# vb.net - 您将如何使用字符串格式访问 My.Settings ArrayList 中的特定索引

> ID：12049030
> 
> 赞同：0
> 
> 时间：2012-08-21T05:43:40.957
> 
> 标签：vb.net, arraylist, my.settings

我在 My.Settings 中保存了一个 ArrayList 我正在尝试使用一些字符串来访问它，这是代码，所以你得到了我想要做的事情

```
If listBoxEdit1.SelectedIndex > -1 Then
        My.Settings("Sup" & listBoxEdit1.SelectedIndex + 1 & "(1)") = Convert.ToDouble(Margin2TextBox.Text)
    End If 
```

我需要为 My.Settings.Sup1(1) 指定值

你会怎么做？

我有多个 ArrayLists，从 My.Settings.Sup1 到 My.Settings.Sup20 所以`listBoxEdit1.SelectedIndex+1`指定了 ArrayList 的数量，但我不知道如何获取索引

也试过

```
My.Settings("Sup" & listBoxEdit1.SelectedIndex + 1 &"("& 1 & ")") 
```

还

```
My.Settings("Sup" & listBoxEdit1.SelectedIndex + 1).Item(1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:58:41.167

选择`StringCollection`您的设置类型。

![在此处输入图像描述](../Images/6e891b6fb95afe3145186b9d717cc6e8.png)

然后，您可以轻松访问具有索引的特定元素。

```
Dim setting As StringCollection = My.Settings.MySetting
Dim value1 = My.Settings.MySetting(1)
Dim value2 = My.Settings.MySetting(2)
Dim valueX = My.Settings.MySetting.Item(X) 
```

* * *

**编辑**

如果您的设置被调用`Sup1`，您可以通过`My.Settings("Sup1")`或 My.Settings("Sup" & whatever) 访问它。然后，您拥有您的`ArrayList`or`StringCollection`并且可以像其他所有`ArrayList`or一样访问其项目`StringCollection`。

所以你的代码可能应该是：

```
 My.Settings("Sup" & listBoxEdit1.SelectedIndex + 1)(1) = Convert.ToDouble(Margin2TextBox.Text) 
```

这是另一个例子：

```
My.Settings.MySetting1 = New StringCollection()

My.Settings("MySetting" & 1).Add("FooBar")
My.Settings("MySetting" & 1).Add("123456")

My.Settings("MySetting" & 1)(0) = "Hey, what's up?"

MsgBox(My.Settings("MySetting" & 1)(1)) 
```

# java - 为什么我不能在 Android WebView onLayout 中设置 maxwidth？

> ID：12049035
> 
> 赞同：0
> 
> 时间：2012-08-21T05:44:34.183
> 
> 标签：java, javascript, android, android-layout, android-webview

我正在尝试覆盖 WebView 的 onLayout，以将大图像的大小限制为屏幕大小。在我重写的 WebView 中，我尝试了：

```
@Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);
        Log.d("WEBVIEW-WIDTH",""+getWidth());
        post(new Runnable() {

            @Override
            public void run() {
                loadUrl("javascript:var imgs = document.getElementsByTagName('img');"+
                         "for (var i=0; i<imgs.length; i++) {imgs[i].style.maxwidth='"+getWidth()+"'};");
            }
        });

    } 
```

旋转时，它会记录新的宽度，但不限制图像的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:43:57.487

它不起作用，因为我使用的是 maxwidth，而不是 maxWidth。

幸运的是，看起来有一种更好的显示方式，可以在缩放和旋转时更新图像大小：

```
 img { max-width: 100%; } 
```

来自[http://davidwalsh.name/image-max-width](http://davidwalsh.name/image-max-width)

# c# - 使用 GroupBy 和 OrderByDescending 的 LINQ Sum 嵌套集合

> ID：12049038
> 
> 赞同：5
> 
> 时间：2012-08-21T05:44:53.543
> 
> 标签：c#, linq, group-by

我有：

```
public class Order
{
    public string Customer;
    public List<OrderLine> OrderLines;
}

public class OrderLine
{
    public decimal Quantity;
    public decimal UnitPrice;
} 
```

我的目标是按金额降序搜索客户订单列表。（金额==每个订单行的数量*单价）

假设我们有 2 个客户（客户 1、客户 2）的 6 个订单。每个客户有 3 个订单行。

我正在尝试：

```
var result = Database.GetAllOrders().OrderByDescending(order =>  
          order.Lines.Sum(ol=>ol.Quantity*ol.UnitPrice))
         .GroupBy(order=>order.CustomerName, 
         order=>order.Lines.Sum(ol=>ol.Quantity*ol.UnitPrice),
            (customerName, amount) => new {Customer=customerName, Amount=amount}); 
```

但我得到这样的东西：

客户 2：
- 金额：78
- 金额：89
- 金额：12

客户 1：
- 金额：64
- 金额：36
- 金额：28

而我试图寻求的是：

客户 2：
- 金额 179

客户 1：
- 金额 128

请问有什么建议吗？
非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T05:54:38.080

听起来您需要在订购前进行分组和求和，并且仅按客户名称（或理想情况下，客户 ID）分组：

```
var query = Database.GetAllOrders()
                    .GroupBy(order => order.CustomerName)
                    .Select(orders => new { 
                        Customer = orders.Key,
                        Amount = orders.Sum(o => o.OrderLines.Sum(
                                                 l => l.Quantity * l.UnitPrice))
                    })
                    .OrderByDescending(x => x.Amount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:01:08.513

Jon 的回答是正确的，但是如果您要使用此`Amount`属性来排序结果并显示，那么为什么不将其变为具体属性呢？

```
public class Order
{
    public string Customer;
    public List<OrderLine> OrderLines;
    public decimal Amount
    {
        get
        {
            if (this.OrderLines == null)
                return 0;

            return this.OrderLines.Sum(o => o.Quantity * o.UnitPrice);
        }
    }
} 
```

您仍在动态计算它，但如果您使用它来订购集合，然后想要显示它，您可能还想将它用于其他用途 - 将其保留为访问属性.

这就是为什么我们有属性！

* * *

而要真正回答这个问题，

```
var result = orders
    .GroupBy(o => o.CustomerName)
    .Select(g => new
    {
        CustomerName = g.Key,
        TotalAmount = g.Sum(o => o.Amount)
    })
    .OrderByDescending(g => g.TotalAmount)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T11:10:02.273

我知道这不是一个具体的答案，但我遇到了一个微笑的挑战并做到了：

```
var elements = db.Orderheads
.Where(o => o.OrderDate.Value >= start && o.OrderDate.Value <= end)
.GroupBy(o => o.Employee)
.Select(g => new 
{
    Employee = g.Key,
    OrdersCount = g.Count(),
    TotalAmount = g.Sum(o => o.TotalExVat),
    TotalQuantity = g.SelectMany(o => o.Orderlines).Sum(ol => ol.QuantityOrdered)
})
.OrderByDescending(o => o.TotalAmount) 
```

# javascript - JavaScript 三角函数

> ID：12049039
> 
> 赞同：2
> 
> 时间：2012-08-21T05:45:12.530
> 
> 标签：javascript, math, trigonometry

我正在研究一些 JavaScript，但遇到了数学问题：

```
var p1 = {x:0,y:0}, p2 = {x:1,y:1};
return Math.sin(45) * Math.sqrt((Math.pow(p2.x-p1.x,2) + Math.pow(p2.y-p1.y,2))); 
```

返回 1.203359304667218

但是当我在我的计算器上进行相同的计算时，它会返回 1，这是我期望这个计算返回的结果。谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T05:46:57.957

你用计算器在什么模式下工作？

弧度还是度数？猜猜这可能是您的“问题”，可以轻松解决:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T06:33:31.467

这些总是有用的，并且可能会避免将来的混淆：

```
function sind(d) {
  return Math.sin(Math.PI*d/180.0); 
}

function cosd(d) {
  return Math.cos(Math.PI*d/180.0); 
}

function tand(d) {
  return Math.tan(Math.PI*d/180.0); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T05:49:26.433

```
var degreesToRadians = function (d) {
  return Math.PI * d / 180; 
} 
```

# c# - 使用 PostMessage (user32.dll) 发送击键的 C# 替代类/库？

> ID：12049053
> 
> 赞同：1
> 
> 时间：2012-08-21T05:46:39.790
> 
> 标签：c#, process, send, keystrokes

我有一个应用程序需要将击键发送到另一个进程。*使用user32.dll中定义的**PostMessage*函数，我的成功有限。我可以发送*正常*的击键，但不能发送带有修饰符的击键（例如 ALT、CTRL）。

 **让我告诉你我现在有什么......

常数：

```
public const ushort WM_KEYDOWN = 0x0100;
public const ushort WM_KEYUP = 0x0101;
public const ushort WM_SYSKEYDOWN = 0x0104;
public const ushort WM_SYSKEYUP = 0x0105;
public const ushort WM_SYSCHAR = 0x0106;
public const ushort VK_MENU = 0x12; // ALT key 
```

DLL 导入：

```
[DllImport("user32.dll")]
public static extern int PostMessage(IntPtr hWnd, int Msg, uint wParam, int lParam); 
```

发送单个密钥的方法：

```
public static void PostKey(ushort key, IntPtr hWnd)
{
    SetActiveWindow(hWnd);
    PostMessage(hWnd, WM_KEYDOWN, key, 0);
    PostMessage(hWnd, WM_KEYUP, key, 0);
} 
```

与 ALT 一起发送单个键的方法（不起作用）：

```
public static void PostKeyWithAlt(ushort key, IntPtr hWnd)
{
    SetActiveWindow(hWnd);
    PostMessage(hWnd, WM_SYSKEYDOWN, VK_MENU, 0);
    PostMessage(hWnd, WM_SYSKEYDOWN, key, 0);
    PostMessage(hWnd, WM_SYSKEYUP, key, 0);
    PostMessage(hWnd, WM_KEYUP, VK_MENU, 0);
} 
```

*PostKey*完美运行。我能够连接到另一个进程，获取主窗口句柄，并发送我想要的任意键击。

当我尝试使用*PostKeyWithAlt*时出现问题。这似乎不起作用。*（密钥被发送，但不是 ALT，所以它与PostKey*基本相同。）我已经用 Google 搜索并尝试了很多方法调用的组合，坦率地说，我已经准备好退出了。:P

因此，无奈之下，我使用 Visual Studio Spy++ 工具来观察当我在目标应用程序中按 ALT+F1 时会发生什么。这是消息捕获的结果：

间谍++日志：

```
<00001> 00080228 P WM_SYSKEYDOWN nVirtKey:VK_MENU cRepeat:1 ScanCode:38 fExtended:0 fAltDown:1 fRepeat:0 fUp:0
<00002> 00080228 P WM_SYSKEYDOWN nVirtKey:VK_F1 cRepeat:1 ScanCode:3B fExtended:0 fAltDown:1 fRepeat:0 fUp:0
<00003> 00080228 P WM_SYSKEYUP nVirtKey:VK_F1 cRepeat:1 ScanCode:3B fExtended:0 fAltDown:1 fRepeat:1 fUp:1
<00004> 00080228 P WM_KEYUP nVirtKey:VK_MENU cRepeat:1 ScanCode:38 fExtended:0 fAltDown:0 fRepeat:1 fUp:1 
```

如您所见，该序列与我的*PostKeyWithAlt*函数的序列完全相同。所以我认为它会起作用，但事实并非如此。

这里一定有其他事情发生。我唯一能想到的是*PostMessage*函数的第四个参数。根据 Microsoft 文档，第 4 个参数定义为*LPARAM lParam （请参阅下面的**PostMessage*的完整函数定义）。

也许我需要将*lParam*设置为 0 以外的值？如果是这样，我需要设置什么值？我可以使用 Spy++ 日志来解决这个问题吗？如果是这样，我无法解释这些日志消息中 _nVirtKey:VK_MENU_ 之后的任何内容：

```
<00001>.... cRepeat:1 ScanCode:38 fExtended:0 fAltDown:1 fRepeat:0 fUp:0
<00002>.... cRepeat:1 ScanCode:3B fExtended:0 fAltDown:1 fRepeat:0 fUp:0
<00003>.... cRepeat:1 ScanCode:3B fExtended:0 fAltDown:1 fRepeat:1 fUp:1
<00004>.... cRepeat:1 ScanCode:38 fExtended:0 fAltDown:0 fRepeat:1 fUp:1 
```

如果我可以将上面的日志消息转换为正确的*lParam*参数，它可能会起作用。

任何有关如何执行此操作的帮助/建议将不胜感激。

或者，是否有另一种更优雅的方式将击键发送到进程？也许是一个 C# 库？我知道*SendKeys*类，但该类不会将击键发送到其他应用程序。

谢谢！

PostMessage 函数定义：

```
BOOL WINAPI PostMessage(
  _In_opt_  HWND hWnd,
  _In_      UINT Msg,
  _In_      WPARAM wParam,
  _In_      LPARAM lParam
); 
```**

# sql - 将分类值转换为布尔列 SQL

> ID：12049056
> 
> 赞同：7
> 
> 时间：2012-08-21T05:47:05.060
> 
> 标签：sql, tsql, pivot, sql-server-2012, data-manipulation

我正在寻找“扁平化”我的数据集以促进数据挖掘。每个分类列应更改为多个布尔列。我有一列包含分类值，例如：

```
 ID    col1
  1     A
  2     B
  3     A 
```

我正在寻找一种方法来透视这个表，并有一个聚合函数告诉我这个 ID 的值是 A 还是 B：

结果：

```
 ID    col1A    col1B
  1     1        0
  2     0        1
  3     1        0 
```

我尝试使用 PIVOT，但不知道在其中使用哪个聚合函数。

还在SF中寻找答案，但找不到任何答案...

我正在使用 MS-SQL 2012。

任何帮助，将不胜感激！暗里

编辑：

col1 中的类别数量未知，因此解决方案必须是动态的。谢谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T05:50:33.727

试试这个：

```
select ID,
         col1A=(case when col1='A' then 1 else 0 end),
         col1B=(case when col1='B' then 1 else 0 end)
  from <table> 
```

如果您有一个同时具有 A 和 B 的 ID，并且您希望在输出中具有不同的 ID，您可以这样做

```
 select ID,
         col1A=max(case when col1='A' then 1 else 0 end),
         col1B=max(case when col1='B' then 1 else 0 end)
  from <table> 
  group by id 
```

**编辑**

根据您的评论，如果您不知道 col1 的选项数量，那么您可以选择动态 PIVOT

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(col1) 
                    from <table> 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, ' + @cols + ' from <table> 

            pivot 
            (
                count([col1])
                for col1 in (' + @cols + ')
            ) p '
print(@query)
execute(@query) 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/4b23d/2)

# iphone - malloc：对象 0x165060 的 *** 错误：未分配被释放的指针？

> ID：12049058
> 
> 赞同：11
> 
> 时间：2012-08-21T05:47:35.620
> 
> 标签：iphone, ios, ipad

我有一个应用程序，其中我有一些视频和音频以及一些应用程序内购买。所有 r 在模拟器中都很棒并且运行良好。但是昨天我创建了一个应用程序并尝试在它上面运行它从一开始就崩溃了。错误报告是

```
malloc: *** error for object 0x165060: pointer being freed was not allocated
  *** set a breakpoint in malloc_error_break to debug 
```

谁能知道解决方案。我不知道哪里出了问题，在模拟器中它运行良好。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-26T09:56:24.543

我按照talkol的建议跟随

就我而言，我替换了以下行

`[myMutualArray removeAllObjects];`

和

```
[myMutualArray removeAllObjects]; myMutualArray = nil; 
```

错误消失了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T08:11:47.703

您可能释放对象的次数过多（例如，调用一次 alloc 并释放两次）。要找出在哪里，请看一下这个问题中的技术：[如何找到 malloc "double free" 错误的原因？](https://stackoverflow.com/questions/971249/how-to-find-the-cause-of-a-malloc-double-free-error)

我个人喜欢这种`NSZombieEnabled`方法。

另一个技巧是在释放变量后将它们设置为 nil。

例如：`[bla release]; bla = nil;`

这可以确保您不会意外释放它们两次，因为释放`nil`没有任何作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T11:12:25.640

请测试程序是否有内存泄漏，还要检查自动释放以及您是否正确释放对象。此外，我们需要检查释放的对象是否分配了内存。您还需要注意自动释放​​，因为不小心我们可能会释放一个数组或一个字符串或任何已经自动释放的对象...

**以下是找出确切问题的一些提示：**

1.  您可以通过分析项目来测试泄漏（单击 shift+command+k）

2.  使用仪器工具，即运行泄漏

3.  在 Xcode 中启用 NSZombie，过程可以在[这里找到](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)

希望它有帮助并且有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T05:56:13.097

在没有看到任何代码的情况下，我们无法为您提供帮助。但是您可以自己找到问题，错误消息甚至会告诉您该怎么做：设置断点`malloc_error_break`，您通常会在堆栈跟踪中找到导致问题的代码。

仅仅因为它在模拟器中工作并不意味着您的代码是 100% 正确的。一些错误只出现在真实设备上（反之亦然）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-10T07:14:38.273

这可能是由 safari 检查器引起的，您可以禁用它们。有关更多详细信息，请参阅此**[帖子](https://stackoverflow.com/a/43885754/6521116)**。

[![在此处输入图像描述](../Images/4e63087f705b80381d192e618ea70d1d.png)](https://i.stack.imgur.com/XFRe0.png)

# hadoop - 用于大数据商业智能报告的开源数据库？

> ID：12049059
> 
> 赞同：0
> 
> 时间：2012-08-21T05:47:41.817
> 
> 标签：hadoop, hive

我们公司有独特的报告需求。我们每 X 分钟收集一个文件中的大量数据。这些文件的大小可能在 1 到 5MB 之间，包含多达一百万行。数据类似于从不更新且结构化的日志数据。虽然我们需要灵活性来支持数据模型的变化。我们需要提供一些罐装（静态）报告以及一些报告作为交互式仪表板的一部分。

对于预制报表，数据只需每天刷新一次。所以我将为此使用 Hive。到一天结束时，文件大小将达到几 Gbs，届时它将被推送到 Hadoop 中，因此我们不会遇到 hadoop 的小文件问题。由于报告是静态的，因此即使 Hive 需要几秒钟/分钟来返回数据也没关系。

但是 Hive 将无法满足我们的交互式仪表板需求，因为这些报告需要在几秒钟内加载。这些报告将主要是时间序列报告，时间序列数据将存储长达一年。我想知道哪些其他数据库可用于数据仓库/BI 目的？我们需要一个稳定的开源数据库，该数据库可以很好地处理大数据，允许快速写入和读取，具有体面的查询语言，以最少的编码实现报告。由于我们将使用 Hadoop+Hive 来生成罐装报告，因此如果该数据库可以直接与 Hadoop 一起使用将是理想的。

我看过 Hbase——但不确定它是否能很好地处理每 X 分钟出现的小文件。Hbase 是正确的选择吗？也欢迎任何其他 DB 建议。

我们的报告非常基础，我们希望解决方案非常简单。PS我们不想使用MySql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:51:33.717

理想情况下，您正在寻找的是 MPP 数据库，如 Netezza、Greenplum 等。它们都是商业的。换句话说 - 我不知道开源解决方案。最接近的可能是 infobright - 它具有 MySQL
的柱状引擎 没有好的分析开源数据库。我的意思是具有下降并行查询能力+集群的数据库。
所以我会建议一些中间解决方案，其中 Hive/Hadoop 正在做大量的聚合（构建多维数据集）并且 RDBMS 用于提供交互式查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:33:58.657

我还建议使用 Greenplum 数据库。它不是开源的，但它有一个单节点版本，可以毫无问题地提供 TB 级数据。它有一个相当不错的数据加载引擎和一个查询执行引擎——两者都是并行的。HP Vertica 还将推出社区版

Greenplum 和 Vertica 都有与 hadoop/hbase/hive 的接口。

如果您只对开源感兴趣，请尝试 MonetDB。它是开源的，但我没有使用它的经验。

# operating-system - 在 OS 中，为什么会出现页表大于程序所需的情况？

> ID：12049060
> 
> 赞同：1
> 
> 时间：2012-08-21T05:47:42.417
> 
> 标签：operating-system

我正在研究操作系统，只是想知道谁为进程创建页表，我猜操作系统为每个进程创建它，如果我没有错，现在这是我的问题，因为操作系统处理页表的创建和维护，如何出现页表大于程序所需的情况？？（然后现在需要有效-无效位），但是想象一下，如果没有这种情况，就不需要这个额外的位标志，对吗？

请帮助我离开这个沼泽，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:49:39.267

想象与你描述的相反。想象一下，页表对于程序请求的内容来说正好足够大。

当程序决定分配额外的内存时会发生什么？页表必须增长。

如果程序释放内存，则必须立即缩小页表。

如果有很多分配和解除分配，这种方法可能会很昂贵。

# python - 从自动更新的 Excel 工作表中提取

> ID：12049067
> 
> 赞同：0
> 
> 时间：2012-08-21T05:48:42.807
> 
> 标签：python, excel

所以我使用 xlrd 从 Excel 工作表中提取数据。我打开它，它可以很好地提取数据。

我的问题是工作表会使用来自另一个程序的数据自动更新。它正在使用 rtd pull 更新股票信息。

有没有人想出任何方法从像这样的最新表格中提取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:05:00.587

由于 xlrd 所能做的就是读取文件，因此我假设每次更新后都会保存 excel 文件。

如果是这样，`os.stat()`请在使用 xlrd 读取文件之前使用该文件并保存结果（或至少保存结果`os.stat().st_mtime`）。然后定期`os.stat()`再次使用，并检查文件修改时间（`os.stat().st_mtime`）是否发生了变化，说明文件发生了变化。如果是这样，请使用 xlrd 重新读取文件。

# html - 在信息框中使用 closeclick 事件

> ID：12049081
> 
> 赞同：2
> 
> 时间：2012-08-21T05:50:34.413
> 
> 标签：html, google-maps, google-maps-markers

我厌倦了搜索如何在**信息框（谷歌地图）中应用****closeclick**事件。我尝试了几乎所有我能想到但没有成功的场景。请帮我

 **这是我添加标记的代码：-

```
var ib_click = new InfoBox();
ib_click.isOpen = false;
var toShowHover = true;

function add_marker(lat,lng,icn,title,box_html) {
  var mapcode,myOptions;
  var marker = new google.maps.Marker({
    /*marker settings*/
  });   

  myOptions = {
    /*option of infobox*/
  };
  marker.ibOptions = myOptions;
  google.maps.event.addListener(marker, 'click', function() {
    mapcode = /* html for showing box */
    myOptions.content = mapcode;
    myOptions.boxStyle.width = "235px";
    ib_click.setOptions(marker.ibOptions);
    ib_click.open(map, marker);
    ib_click.isOpen = true;

    toShowHover = false;
  });   
  google.maps.event.addListener(marker, 'mouseover', function() {
    //this is fired
    var mapcode = /*html for showing hover*/;
    //ib_click.open(map, marker);
    myOptions.content = mapcode;
    myOptions.boxStyle.width = "205px";
    ib_click.setOptions(marker.ibOptions);
    ib_click.open(map, marker);
    // ib_click.isOpen = true;
  });   
  google.maps.event.addListener(marker, 'mouseout', function() {
    //alert('mouse out');//this is fired
    //toShowHover = true;
  });

  google.maps.event.addListener(ib_click, 'closeclick', function(){
    //how to use closeclick 
    //showing error here
    alert('closed');
  });
  return marker;
} 
```

请解释一下，谢谢 Ankur ;(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-24T22:42:41.760

尝试在盒子打开后，在 } 之前添加关闭单击的侦听器；标签。创建框时，您需要为每个框包含侦听器。

下面是我使用关闭点击监听器的代码。

```
function addMarker(location) {
var marker = new google.maps.Marker({
position: location,
map: map,
icon: "/mapping/redmarker1.png",
title:markerClickGrid
});
markers.push(marker);
    var boxText = document.createElement("div");
    boxText.style.cssText = "border: 1px solid black; margin-top: 8px; background: gray; padding: 5px; color:white;";
    boxText.innerHTML = marker.title;
    var myOptions = {
     content: boxText
    ,disableAutoPan: false
    ,maxWidth: 0
    ,pixelOffset: new google.maps.Size(10, -50)
    ,zIndex: null
    ,boxStyle: { 
    background: "url('tipbox.gif') no-repeat"
    ,opacity: 0.75
    ,width: "140px"
    }
    ,closeBoxMargin: "10px 2px 2px 2px"
    ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
    ,infoBoxClearance: new google.maps.Size(1, 1)
    ,isHidden: false
    ,pane: "floatPane"
    ,enableEventPropagation: false
    };
    var ib = new InfoBox(myOptions);
    ib.open(map,marker);
    preventmarkermouseoutibclose = true;

google.maps.event.addListener(ib, 'closeclick', function(event) {
    preventmarkermouseoutibclose = false;
    document.getElementById('debugtext').value = "ib close click detected";
});
google.maps.event.addListener(marker, 'click', function() {
    ib.open(map,marker);
    preventmarkermouseoutibclose = true;
    document.getElementById('debugtext').value = "ib open detected";
});
google.maps.event.addListener(marker, 'rightclick', function(event) {
    ib.close(map,marker);
    marker.setMap(null);
    preventmarkermouseoutibclose = false;
    document.getElementById('debugtext').value = "ib close on rightclick detected";
});
google.maps.event.addListener(marker, "mouseover", function() {
    document.getElementById('debugtext').value = "marker mouseover detected";
    ib.open(map,marker);
});
google.maps.event.addListener(marker, "mouseout", function() {
    if(preventmarkermouseoutibclose==true){
    }
    else if(preventmarkermouseoutibclose==false){
    ib.close(map,marker);
    }
}); 
```

ib 是我的信息框的名称。每次打开信息框 ib 时，都会添加一个侦听器，寻找“closeclick”。

这对我有用。希望对你有效。**

# javascript - myFunc = function(){} 是否应该立即在 Javascript 中进行评估？

> ID：12049086
> 
> 赞同：4
> 
> 时间：2012-08-21T05:51:04.760
> 
> 标签：javascript

如果我错了，请发表评论：在我的记忆中，我认为两种函数创建方式之间的区别：

```
function myFunc(){}; 
```

和

```
myFunc = function(){}; 
```

是第一个立即评估，然后等待函数调用。

所以我在[这篇文章](http://snook.ca/archives/javascript/global_variable)中得到了关于全局变量附加到窗口对象的代码：

```
function setGloabalVariable(){
  window.variable = '1';
} 
```

加载页面后，为什么变量仍然未定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T05:54:00.043

这两种声明的区别在于第一种是*命名*函数*语句*，第二种是*匿名*函数*表达式*。 **它们都不会**在声明时自动执行（您可能正在考虑 IIFE）。

```
// Create a symbol named "my_named_function"
// that points at the named function "my_named_function"
function my_named_function() {
}

// Create a symbol named "my_anonymous_func"
// that points to the *unnamed* function <anonymous function>
var my_anonymous_func = function() {
} 
```

两者都未`my_named_function`执行`my_anonymous_func`。两者都*可以*通过调用它们来执行：

```
my_named_function();
my_anonymous_func(); 
```

IIFE（立即执行函数表达式）的工作方式略有不同：

```
(/* define a function */ function() {

})(/* and *immediately* execute it */); 
```

我建议阅读[kangax 关于函数表达式和语句的优秀文章，](http://kangax.github.com/nfe/)以获取有关此主题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T05:55:33.483

`function myFunc(){}`是一个全局函数文字，它不会立即“运行”，但可以**向前和向后**引用。意义：

```
myFunc(); // this will run
function myFunc(){} 
```

如：

```
myFunc(); // this will **not** run
myFunc = function (){} 
```

与第二个函数的不同之处在于，即使您没有在此处声明 a `var myFunc =`。它成为一个全局变量（也称为内联匿名函数），与全局内联函数不同，它必须高于某个（向后引用）才能使用。

```
function setGloabalVariable(){
    window.variable = '1'; 
    // this could have been written
    // variable = '1'; var variable = '1';
    // unless this function is called in some global scope, the closure won't
    // bring out this variable
} 
```

一个匿名函数会立即运行，我认为这就是您正在考虑的（但在您的 OP 中没有）。

`(function () { }());`

[关于自执行匿名函数的文章](http://briancrescimanno.com/2009/09/24/how-self-executing-anonymous-functions-work/)

匿名函数创建了一个本地/内部范围。非常适合创建命名空间，并使事物远离全局命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:54:53.027

命名函数是在编译时创建和赋值的，所以它在代码开始运行之前就已经存在。例子：

```
x(); // This works, as the function below already exists

function x() {} 
```

匿名函数可以在编译时创建（取决于实现），但在运行时将值分配给变量。例子：

```
x(); // This doesn't work, as the value is not assigned yet

x = function(){};

x(); // Here it works 
```

在这两种情况下，您都必须实际调用函数才能执行函数内部的代码。

# c# - 使用线程进行管道通信

> ID：12049088
> 
> 赞同：0
> 
> 时间：2012-08-21T05:51:24.310
> 
> 标签：c#, ipc, named-pipes

我有两个可执行文件：**client.exe**和**server.exe**。

**它们通过使用命名管道**相互通信。当服务器仅侦听客户端请求并向客户端发送响应时，它们可以正常工作。

但现在的要求是 exe 都包含客户端管道和服务器管道。所以每个 exe 都包含两个方法：`serverpipe()`和`clientpipe()`. 这些方法在一个线程中并且不相互通信。

第一个客户端和服务器正常通信。

客户端.EXE：

```
public static void Main(string[] Args)
{
    PipeClient obj=new PipeClient();
    obj.client();
    Thread startserver = new Thread(new ThreadStart(obj.server));
    startserver.Start();
}

public void client()
{
    int cnt =0;
    while (true)
    {
       System.IO.Pipes.NamedPipeClientStream pipeClient = new System.IO.Pipes.NamedPipeClientStream(".", "\\\\.\\pipe\\SamplePipe1", System.IO.Pipes.PipeDirection.InOut, System.IO.Pipes.PipeOptions.None);

        if (pipeClient.IsConnected != true) { pipeClient.Connect(); }

        StreamReader sr = new StreamReader(pipeClient);
        StreamWriter sw = new StreamWriter(pipeClient);

        string temp;
        temp = sr.ReadLine();

        if (temp == "Waiting")
        {
            try
            {
                cnt++;
                sw.WriteLine("clientSide Message " + cnt);
                sw.Flush();
                Thread.Sleep(10000);

            }
            catch (Exception ex) { throw ex; }
        }
        else
        {

        }
        pipeClient.Close();
    } 

}

public void server()
{
    StreamWriter sw1 = new StreamWriter("C:\\ServerEXE\\serverdataFile0.txt", true);

    System.IO.Pipes.NamedPipeServerStream pipeServer = new System.IO.Pipes.NamedPipeServerStream("\\\\.\\pipe\\SamplePipeSend1", System.IO.Pipes.PipeDirection.InOut, 4);

    sw1 = new StreamWriter("C:\\ServerEXE\\serverdataFile2.txt", true);

    sw1.Close();

    StreamReader sr = new StreamReader(pipeServer);
    StreamWriter sw = new StreamWriter(pipeServer);

    do
    {
        try
        {
            pipeServer.WaitForConnection();
            string test;
            sw.WriteLine("Waiting");
            sw.Flush();
            pipeServer.WaitForPipeDrain();
            test = sr.ReadLine();
            sw1 = new StreamWriter("C:\\ServerEXE\\serverdataFile2.txt",true);
            sw1.WriteLine(test);
            sw1.Close();
        }

        catch (Exception ex)
        { throw ex; }

        finally
        {
            pipeServer.WaitForPipeDrain();
            if (pipeServer.IsConnected) { pipeServer.Disconnect(); }
        }
    } while (true);
} 
```

服务器.EXE：

```
public static void Main()
{
    PipeServer obj = new PipeServer();
    obj.server();
    Thread startserver = new Thread(new ThreadStart(obj.client));
    startserver.Start();
}

public void server()
{
    System.IO.Pipes.NamedPipeServerStream pipeServer = new System.IO.Pipes.NamedPipeServerStream("\\\\.\\pipe\\SamplePipe1", System.IO.Pipes.PipeDirection.InOut, 4);

    StreamReader sr = new StreamReader(pipeServer);
    StreamWriter sw = new StreamWriter(pipeServer);

    do
    {
        try
        {
            pipeServer.WaitForConnection();
            string test;
            sw.WriteLine("Waiting");
            sw.Flush();
            pipeServer.WaitForPipeDrain();
            test = sr.ReadLine();
            Console.WriteLine(test);
        }

        catch (Exception ex)
        { throw ex; }

        finally
        {
            pipeServer.WaitForPipeDrain();
            if (pipeServer.IsConnected) { pipeServer.Disconnect(); }
        }
    } while (true);
}

public void client()
{
    int cnt = 0;
    while (true)
    {
        System.IO.Pipes.NamedPipeClientStream pipeClient = new System.IO.Pipes.NamedPipeClientStream(".", "\\\\.\\pipe\\SamplePipeSend1", System.IO.Pipes.PipeDirection.InOut, System.IO.Pipes.PipeOptions.None);

        if (pipeClient.IsConnected != true) { pipeClient.Connect(); }

        StreamReader sr = new StreamReader(pipeClient);
        StreamWriter sw = new StreamWriter(pipeClient);

        string temp;
        temp = sr.ReadLine();

        if (temp == "Waiting")
        {
            try
            {
                cnt++;
                sw.WriteLine("clientSide Message " + cnt);
                sw.Flush();
                Thread.Sleep(10000);

            }
            catch (Exception ex) { throw ex; }
        }
        else
        {
            pipeClient.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:12:33.377

请参阅内联注释：

```
public static void Main ( string[] Args )
{
    PipeClient obj = new PipeClient ();
    obj.client (); // <-- This has an endless loop and won't return
    // So the following lines  will never be executed!
    Thread startserver = new Thread ( new ThreadStart ( obj.server ) ); 
    startserver.Start ();
} 
```

在进入无限循环之前启动线程：

```
public static void Main ( string[] Args )
{
    PipeClient obj = new PipeClient ();
    Thread startserver = new Thread ( new ThreadStart ( obj.server ) );
    startserver.Start (); 
    obj.client (); // Thread already running, so it's ok if this is endless
} 
```

当然，这需要在服务器以及客户端执行中完成-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:07:25.500

这听起来像是权限问题。

要创建全局可访问的命名管道，应用程序需要`SeCreateGlobalPrivilege`权限。

如果 Windows7 已打开 UAC，并且客户端未在提升模式下运行，则尝试创建全局命名管道将（静默）失败。

* * *

一些阅读：

[创建命名管道 (WCF) 所需的最低操作系统权限](https://stackoverflow.com/questions/4098549/minimum-os-permissions-required-to-create-named-pipe-wcf)

[http://weblogs.thinktecture.com/cweyer/2007/12/dealing-with-os-privilege-issues-in-wcf-named-pipes-scenarios.html](http://weblogs.thinktecture.com/cweyer/2007/12/dealing-with-os-privilege-issues-in-wcf-named-pipes-scenarios.html)

示例集中在 WCF 上，但在这种情况下，WCF 只是命名管道通信之上的一层，问题的根源是相同的。

# codeigniter - 在 codeigniter 中维护编码标准

> ID：12049090
> 
> 赞同：0
> 
> 时间：2012-08-21T05:51:34.863
> 
> 标签：codeigniter

我正在与一个由 5 名成员组成的团队使用 CodeIgniter 框架开始一个项目。我看过编码标准文件。团队将尝试维护它。但仍然可能发生错误。是否有任何工具可以在应用程序开发后检查 Codeigniter 的编码标准并衡量该框架的性能。Codeigniter 中是否有任何要遵循的规则集以及应该与 codeIgniter 一起使用什么文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:00:39.260

如果您绝对想确保源代码符合样式指南，您可以尝试将[PHP_CodeSniffer](http://pear.php.net/manual/en/package.php.php-codesniffer.php)项目连接到您的 scm（我相信您会使用一个）`pre-commit`或`pre-receive`hook（这是[svn](http://svnbook.red-bean.com/en/1.1/ch05s02.html) / [git](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)调用它）。这样，您可以退回未通过样式检查的提交。

一种不那么苛刻的方法可能是设置某种持续集成服务器，例如[jenkins](http://jenkins-ci.org/)（有一个[方便的 php 项目模板](http://jenkins-php.org/)），并在代码嗅探器警告样式偏差时显示一些警告。

但是，这将使您团队编写“编译器允许的任何内容”样式。真正关心可读性和可维护性，这将毫无用处。

### 更新

看起来，有人已经开始针对 codeigniter 自己的编码风格指南实施嗅探器规则，请参阅[论坛帖子](http://codeigniter.com/forums/viewthread/180084/)和[github repo](https://github.com/thomas-ernest/CodeIgniter-for-PHP_CodeSniffer)。

# wia - WIA服务2、windows xp/7上下载安装

> ID：12049092
> 
> 赞同：2
> 
> 时间：2012-08-21T05:52:02.543
> 
> 标签：wia

我编写了一个从扫描仪扫描图像的应用程序。这在我的开发机器（win7 Ultimate sp1 64bit）上运行良好。

我尝试在 windows xp 机器（或 windows server 2008 标准）上运行该应用程序，但由于此错误而失败

> System.Runtime.InteropServices.COMException (0x80040154)：检索具有 CLSID {E1C5D730-7E97-4D8A-9E42-BBAE87C2059F} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（来自 HRESULT 的异常：0x80040154（REGDB_E_CLASSNOTREG） ））。

似乎机器缺少 WIA dll。

在微软网站上寻找安装文件时，我找不到它们。

所以我的问题是，我在哪里可以找到安装文件？我可以在 XP 上安装 WIA 2 吗？

奥伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:33:44.450

该错误消息表示该控件未正确安装在机器上（您的 windows xp 和 windows server 2008）。

您是否正在开发一个控件来实现图像扫描功能？如果是，您需要注册您在客户端计算机上创建的 dll 文件，而不是 WIA dll。

# javascript - 如何在单击行时获取html表中第一列的值

> ID：12049093
> 
> 赞同：4
> 
> 时间：2012-08-21T05:52:10.670
> 
> 标签：javascript, jquery

我有一个简单的 html 表。我想获取我单击的行的第一列的值。如果我在任何地方单击第一行，它应该得到第一行第一列的值，如果我在任何地方单击第二行，它应该给出第二行第一列的值。这是我的表：

```
<table style="border:1px solid black" id="tab">
    <tr>
        <td style="border-right:1px solid black">Sachin</td>
        <td>Yuvraj</td> 
    </tr>
    <tr>
        <td style="border-right:1px solid black">Virat</td>
        <td>Gautam</td>              
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T06:06:30.700

```
 $(document).ready(function(){

    //use this if you have jquery version 1.7+
      $('table#tab tr').on('click',function(){
          alert($(this).find('td:first').text());

    });
    //normal way
  $('table#tab tr').click(function(){
          alert($(this).find('td:first').text());

    });
//delegation

$('body').delegate('table#tab tr','click',function(){
          alert($(this).find('td:first').text());

    });

//use any of these three methods

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T05:55:44.020

```
<tr onClick="alert($(this).find('td:first').text())">
  ...
</tr> 
```

基本上，onClick 在单击该行时运行 javascript。

* * *

或者让 jQuery 在页面加载后附加事件：

```
$(document).ready(function(){
  $('table#tab tr').on('click',function() {
    alert($(this).find('td:first').text());
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:06:15.533

这对你有用。试试这个..

```
<tr onClick="alert($(this).find('td:first').text())">
  ...
</tr> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T06:08:50.927

如果您按照您的定义进行标记，那么您最好像这样使用 jQuery：

```
$(function() {
    $('table#tab tr').click(function() {
        var firstTd = $(this).find("td:first");
        console.log(firstTd); // log it so you can see it.
    });
); 
```

然后使用该`firstTd`变量，您可以`firstTd.text()`对文本值或`firstTd.html()`它的完整 HTML 内容执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T06:29:18.877

**这是您的 HTML**

```
<table id="tab">
    <tr>
        <td>Sachin</td>
        <td>Yuvraj</td>
    </tr>
    <tr>
        <td>Virat</td>
        <td>Gautam</td>              
    </tr>
</table> 
```

**以下脚本将在单击时为您提供每个单元格的值**

```
$(document).ready(function(){
  $('#tab').click(function (event) {
    alert($(event.target).html());
   });
}); 
```

**以下脚本将在单击行时给出第一列值（您的问题）**

```
$(document).ready(function(){
  $('#tab tr').on('click',function() {
    alert($(this).find('td:first').text());
  });
}); 
```

看看[小提琴](http://jsfiddle.net/vijaysarin/7dUfZ/23/)

# asp.net - 我们可以将 SQL Server 数据库文件转换为 SQLite 文件或 .db 文件吗？

> ID：12049094
> 
> 赞同：3
> 
> 时间：2012-08-21T05:52:17.500
> 
> 标签：asp.net, sql-server, database, sqlite

我有一个 SQL Server 数据库，我想使用 ASP.NET 代码生成一个 SQLite 或 .db 文件 是否可以通过编程方式从 SQL Server 数据库生成 .db 或 SQLite 文件？

我正在使用 ASP.Net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T05:55:32.610

我正在使用[这个](http://www.codeproject.com/Articles/26932/Convert-SQL-Server-DB-to-SQLite-DB)，效果很好

# c++ - C++11：非平凡线程局部静态变量？

> ID：12049095
> 
> 赞同：9
> 
> 时间：2012-08-21T05:52:21.143
> 
> 标签：c++, multithreading, c++11, thread-local, thread-local-storage

我有一个 X 类：

```
class X { ... } 
```

我想做这个：

```
void f()
{
    thread_local static X x = ...;

    ...
} 
```

（实际上我使用的是 gcc，所以关键字是“__thread”）

但我不能，因为你只能拥有微不足道的 thread_locals。

最好的解决方法是什么？

如果我这样做：

```
void f()
{
    thread_local static X* p = 0;

    if (!p)
       p = new X(...);

    X& x = *p;

    ...
} 
```

然后：

1.  线程退出时不会调用析构函数
2.  不必要的动态内存分配。

**更新：**

这是我到目前为止所拥有的：

```
#include <iostream>
#include <type_traits>

using namespace std;

class X { public: X() { cout << "X::X()" << endl; }; ~X() { cout << "X::~X()" << endl; } };

void f()
{
        static __thread bool x_allocated = false;
        static __thread aligned_storage<sizeof(X),
             alignment_of<X>::value>::type x_storage;

        if (!x_allocated)
        {
                new (&x_storage) X;
                x_allocated = true;
                // add thread cleanup that calls destructor
        }

        X& x = *((X*) &x_storage);
}

int main()
{
        f();
} 
```

这解决了动态内存分配问题。我只需要添加线程清理处理程序。有没有一种机制可以用 pthreads 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T06:26:26.713

该标准描述为与第 7.1.1 节中的其他（等）`thread_local`一样的存储说明符。该词的任何定义都没有限制“简单”数据类型。`static``extern`

该问题在[C++11 之前的讨论文档 N2147](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2147.html)中进行了简要讨论（请参阅“线程变量动态初始化”部分）。这包括对正确实施所涉及的关键问题的描述。显然 GCC 实现 ( `static __thread`) 还没有解决这些问题（这与 GCC 不正式支持 C++11 的事实是一致的`thread_local`）。

[在此之前的帖子](https://stackoverflow.com/a/9149029/777186)`boost::thread_specfic_ptr<>`中提到了一种替代方法，并[在此处](http://www.boost.org/doc/libs/1_34_1/doc/html/boost/thread_specific_ptr.html)进行了描述。

另一种选择是使用`std::thread`对象来实现线程并确保每个实例都维护自己的变量副本，可能包含在`unique_ptr`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-12T07:44:28.023

`thread_local``__thread`实际上，它们不是一回事。它们之间的主要区别正是您偶然发现的`thread_local`那个 - 允许变量为非 POD。不幸的是，这也有性能影响。有关这些性能影响的更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/13106049/c11-gcc-4-8-thread-local-performance-penalty)。

# android - 数据库导致的开放活动问题

> ID：12049097
> 
> 赞同：0
> 
> 时间：2012-08-21T05:52:34.277
> 
> 标签：android, database, sqlite, android-logcat

我的应用程序出现问题。似乎我无法打开我的应用程序，`Activity`也无法将数据从 a`ListView`插入数据库。

但是，我可以在一个类中创建 5 个表之前打开`Activity`并将数据插入数据库。`DBAdapter`

但是在我创建了一个表之后`DBAdapter`，我在使我的应用程序工作时遇到了问题。我遵循了使我的应用程序正常工作的示例。

这是我的 LogCat：

```
08-21 13:36:27.421: D/AndroidRuntime(543): Shutting down VM
08-21 13:36:27.421: W/dalvikvm(543): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
08-21 13:36:27.441: E/AndroidRuntime(543): FATAL EXCEPTION: main
08-21 13:36:27.441: E/AndroidRuntime(543): java.lang.RuntimeException: Unable to start activity ComponentInfo{main.page/main.page.PersonalInformation}: java.lang.NullPointerException
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.os.Looper.loop(Looper.java:137)
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-21 13:36:27.441: E/AndroidRuntime(543):  at java.lang.reflect.Method.invokeNative(Native Method)
08-21 13:36:27.441: E/AndroidRuntime(543):  at java.lang.reflect.Method.invoke(Method.java:511)
08-21 13:36:27.441: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-21 13:36:27.441: E/AndroidRuntime(543):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-21 13:36:27.441: E/AndroidRuntime(543):  at dalvik.system.NativeStart.main(Native Method)
08-21 13:36:27.441: E/AndroidRuntime(543): Caused by: java.lang.NullPointerException
08-21 13:36:27.441: E/AndroidRuntime(543):  at main.page.BuddyDBAdapter.getAllNames(BuddyDBAdapter.java:37)
08-21 13:36:27.441: E/AndroidRuntime(543):  at main.page.PersonalInformation.onCreate(PersonalInformation.java:41)
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.app.Activity.performCreate(Activity.java:4465)
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-21 13:36:27.441: E/AndroidRuntime(543):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-21 13:36:27.441: E/AndroidRuntime(543):  ... 11 more
08-21 13:36:27.711: I/dalvikvm(543): threadid=3: reacting to signal 3
08-21 13:36:27.751: I/dalvikvm(543): Wrote stack traces to '/data/anr/traces.txt'
08-21 13:36:28.061: I/dalvikvm(543): threadid=3: reacting to signal 3
08-21 13:36:28.061: I/dalvikvm(543): Wrote stack traces to '/data/anr/traces.txt' 
```

这是我在其中创建 5 个表的代码`DBAdapter`：

```
 package main.page;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class AnniversaryDBAdapter
{

    private static final String DATABASE_NAME = "AllTables";
    private static final int DATABASE_VERSION = 2;

     private static final String CREATE_TABLE_TITLE = "create table titles(title_id integer primary key autoincrement, name text not null, image text not null);";
    private static final String CREATE_TABLE_BUDDIESLIST = "create table buddiesList(name_id integer primary key autoincrement, name text not null);";
    private static final String CREATE_TABLE_LIKES = "create table likes(likes_id integer primary key autoincrement,like text not null, name text not null, FOREIGN KEY(name)REFERENCES "+CREATE_TABLE_BUDDIESLIST+" (name));";
    private static final String CREATE_TABLE_DISLIKES = "create table dislike(dlike_id integer primary key autoincrement, dislike text not null, name text not null, FOREIGN KEY(name)REFERENCES "+CREATE_TABLE_BUDDIESLIST+" (name));";
    private static final String CREATE_TABLE_EVENTS = "create table events(date_id integer primary key autoincrement, date text not null, starttime text not null, endtime text not null, name text not null,title_id integer, desc text not null, alarm text not null, location text not null, FOREIGN KEY(name)REFERENCES "+CREATE_TABLE_BUDDIESLIST+" (name), FOREIGN KEY(title_id)REFERENCES "+CREATE_TABLE_TITLE+" (title_id));";

    private final Context context;
    private static final String TAG = "DBAdapter";

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public AnniversaryDBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

private static class DatabaseHelper extends SQLiteOpenHelper
{

    DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {
        db.execSQL(CREATE_TABLE_BUDDIESLIST);
        db.execSQL(CREATE_TABLE_LIKES);
        db.execSQL(CREATE_TABLE_EVENTS);
        db.execSQL(CREATE_TABLE_TITLE);
        db.execSQL(CREATE_TABLE_DISLIKES);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        Log.w(TAG, "Upgrading database from version "+oldVersion+" to "+newVersion+", which will destroy all old data");

        onCreate(db);

    }

}

public AnniversaryDBAdapter open() throws SQLException
{
    this.db = this.DBHelper.getWritableDatabase();
    return this;
}

public void close()
{
    this.DBHelper.close();
}

} 
```

我从这两个例子
1\. [http://www.devdaily.com/android/sqlite-foreign-keys-example](http://www.devdaily.com/android/sqlite-foreign-keys-example)
2\. [http://androidforbeginners.blogspot.sg/2010/01/creating-multiple-sqlite -database.html](http://androidforbeginners.blogspot.sg/2010/01/creating-multiple-sqlite-database.html)

这是我无法在我的应用程序中打开的代码：

```
package main.page;

import android.app.Activity;
import android.content.Context;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.SimpleCursorAdapter;
import android.widget.Spinner;
import android.widget.Toast;

public class PersonalInformation extends Activity
{
    Button btnSave, btnBack, btnView;
    EditText txtDate, txtType, txtLikes, txtDislikes;

    final Context context = this;           
    private int mSpinnerNamesId;            

    LikesDBAdapter likeDB = new LikesDBAdapter(this);
    DislikesDBAdapter dislikeDB = new DislikesDBAdapter(this);

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.info);

        BuddyDBAdapter buddyDB = new BuddyDBAdapter(this);

        buddyDB.open();

        Spinner namesSpinner = (Spinner) findViewById(R.id.nameSpinner);
        Cursor namesCursor = buddyDB.getAllNames();
        startManagingCursor(namesCursor);

        String[] from = new String[] {BuddyDBAdapter.KEY_NAME};
        int[] to = new int[] {android.R.id.text1};

        SimpleCursorAdapter namesSpinnerAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, namesCursor, from, to);
        namesSpinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        namesSpinner.setAdapter(namesSpinnerAdapter);
        buddyDB.close();

        namesSpinner.setOnItemSelectedListener(new OnItemSelectedListener()
        {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
            {
                Cursor c = (Cursor)parent.getItemAtPosition(pos);
                mSpinnerNamesId = c.getInt(c.getColumnIndexOrThrow(BuddyDBAdapter.KEY_ROWID));
            }

            @Override
            public void onNothingSelected(AdapterView<?> parent)
            {               
            }
        });

        btnSave = (Button) findViewById(R.id.btnSave);
        btnSave.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                likeDB.open();
                long likes_id;
                Spinner nameSpinner = (Spinner) findViewById(R.id.nameSpinner);
                String NameValue = nameSpinner.getSelectedItem().toString();

                EditText txtLikes = (EditText) findViewById(R.id.txtLikes);
                String LikesValue = txtLikes.getText().toString();

                likes_id = likeDB.insertLikes(NameValue, LikesValue);
                likeDB.close();

                dislikeDB.open();
                long dislikes_id;
                Spinner names = (Spinner) findViewById(R.id.nameSpinner);
                String NamesValue = names.getSelectedItem().toString();

                EditText txtDislikes = (EditText) findViewById(R.id.txtDislikes);
                String DislikesValue = txtDislikes.getText().toString();

                dislikes_id = dislikeDB.insertDislikes(NamesValue, DislikesValue);

                Toast.makeText(getBaseContext(), 
                        "Your information is saved successfully!", Toast.LENGTH_SHORT).show();
                dislikeDB.close();
            }
        });

        btnBack = (Button) findViewById(R.id.btnMain);
        btnBack.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                finish();
            }
        });

    }
} 
```

这是连接到 PersonalInformation.java 的 BuddyDBAdapter.java

```
package main.page;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class BuddyDBAdapter extends AnniversaryDBAdapter
{
    public static final String KEY_ROWID = "name_id";
    public static final String KEY_NAME = "name";
    private static final String TAG = "DBAdapter";
    private static final String CREATE_TABLE_BUDDIESLIST = "buddiesList";

    private SQLiteDatabase db;

    public BuddyDBAdapter(Context ctx)
    {
        super(ctx);
    }

    public long insertNames(String name)
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_NAME, name);
        return db.insert(CREATE_TABLE_BUDDIESLIST, null, initialValues);
    }

    public boolean deleteName(long rowId)
    {
        return db.delete(CREATE_TABLE_BUDDIESLIST, KEY_ROWID + "=" + rowId, null) > 0;
    }

    public Cursor getAllNames()
    {
        return db.query(CREATE_TABLE_BUDDIESLIST, new String[] { KEY_ROWID, KEY_NAME }, null, null, null, null, null);
    }

    public Cursor getName(long rowId) throws SQLException
    {
        Cursor c = db.query(true, CREATE_TABLE_BUDDIESLIST, new String[] { KEY_ROWID, KEY_NAME }, KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if(c != null)
        {
            c.moveToFirst();
        }
        return c;
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:10:25.360

从您的代码看来，您的`getAllNames()`方法没有返回值，这就是您得到`NullPointerException`. 尝试在课堂上使用您的上下文，`BuddyDBAdapter`如下所述。

```
 private static Context context;
   public BuddyDBAdapter(Context ctx)
{
    this.context = ctx;
} 
```

尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:28:52.430

您`BuddyDBAdapter`的班级没有`DatabaseHelper`像您的基班那样使用班级。在`DatabaseHelper`该类中，您实际上是在创建和打开数据库。

在`BuddyDBAdapter`中，`db`尚未初始化并正在引发异常。修改此类以使用在基类中编写的功能。

希望这可以帮助...

# php - 如何获取文本中字符串的特定出现并将其放入数组中？

> ID：12049098
> 
> 赞同：0
> 
> 时间：2012-08-21T05:52:37.190
> 
> 标签：php, regex, string

我有一个长文本，其中包含：

```
city_nameLAcity_name some text here and there ;) city_nameLondoncity_name some other text will goes here too then city_nameTehrancity_name and of course some other junk text here. 
```

我想从上面的文字中啜饮洛杉矶、伦敦和德黑兰。我ereg，但无法得到我想要的我使用了如下的东西：

```
ereg ("city_name(.*)city_name", $longText, $output); 
```

如何做好这份工作？感谢您的投入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:54:34.093

使用`(.*?)`而不是`(.*)`. 不同之处在于`.*`将尽可能匹配（使用贪婪量词`*`），而`.*?`将尽可能*少*匹配（`*?`是*惰性*量词）。因此，除非您的城市名称包含`city_name`某处（不知道，美国有一些奇怪的名称；也许会发生），`.*?`否则应该可以满足您的需求。

随机注释：这可能不适用于[`ereg`](http://php.net/ereg)，我现在对扩展的 POSIX 正则表达式并不熟悉。然而，这些函数在 PHP 中已经被弃用了一段时间（你也应该得到一个警告）。最好尽可能用各种`preg_*`功能替换它们。替代品会是[`preg_match_all`](http://de3.php.net/manual/en/function.preg-match-all.php)，我相信。

# c - 读取系统调用错误（错误的文件描述符）

> ID：12049100
> 
> 赞同：1
> 
> 时间：2012-08-21T05:53:05.413
> 
> 标签：c, unix

我有这段代码，我在读取系统调用时遇到了 BAD FILE DESCRIPTOR 问题。但是，我使用相同文件描述符的写调用工作正常。请建议

```
 void Update_Log( )
{
        struct logDetails update,update1[30];
        struct stat fileData,fileData1;
        int file;
        int index;
        //pthread_t pid;
        char writeBuffer[MAX_BUFFER_SIZE];
        char readBuffer[MAX_BUFFER_SIZE];
        char mBuf[MAX_BUFFER_SIZE],mBuf1[MAX_BUFFER_SIZE];
        if((access("/home/team02/DMS/Server/",F_OK))==0) //checking the file/dir existence
                puts("file found");
        else
                puts("file not found");
        if((file=open("/home/team02/DMS/Server/filename.txt",O_RDONLY|O_WRONLY|O_APPEND,S_IRWXU))==-1)
                perror("file not opened");
        if((fstat(file, &fileData))==-1)
                perror("structure not filled");
        if((stat("/home/team02/DMS/Server/f1",&fileData1))==-1)
                perror("structure not filled");

        //printf("%d/n",fileData.st_mtime);
        //printf("%d",fileData.st_ctime);
        struct tm *mytm = localtime(&fileData.st_mtime);
        struct tm *mytime=localtime(&fileData1.st_mtime);
        strftime(mBuf1,18,"%I:%M:%S-%m%d%y",mytime);
        strftime(mBuf, 18, "%I:%M:%S-%m/%d/%y", mytm);
        puts(mBuf);
        if((strcmp(mBuf,mBuf1)==0))
                puts("equal");
                                else
                puts("not equal");
        strcpy(update.timestamp,mBuf);
        strcpy(update.clientName,mBuf);
        strcpy(update.filename,mBuf1);
        snprintf(writeBuffer,MAX_BUFFER_SIZE,"%s %s %s",update.clientName,update.filename,update.timestamp);
        //printf("%s",writeBuffer);
        //if((pthread_create(&pid,&thread_handler,NULL))!=0)
                //perror("Thread not created");
        if((write(file,writeBuffer,strlen(writeBuffer)))==-1)
                perror("write unsuccessful");
        **if((read(file,readBuffer,MAX_BUFFER_SIZE))==-1)
                perror("read unsuccessful");**
        for(index=0;index<strlen(readBuffer);index++)
        {
                sscanf(readBuffer,"%s %s %s",update1[index].clientName,update1[index].filename,update1[index].timestamp);
                printf("%s",update1[index].clientName);
        }
        close(file);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T05:57:34.600

根据运行时库，打开模式`O_RDONLY|O_WRONLY`可能会出现问题。你可能想`O_RDWR`更换那部分。

~~此外，您可以获取`errno`值以准确找出问题所在。~~ 您`perror()`在发生错误的情况下调用。那应该告诉你问题是什么。程序产生什么输出？

# java - 在黑莓中显示来自 URL 的图像

> ID：12049101
> 
> 赞同：0
> 
> 时间：2012-08-21T05:53:37.827
> 
> 标签：java, blackberry

我使用以下代码从 url 预览图像。

```
Bitmap bannerImage=Bitmap.getBitmapResource("http://www.asianmirror.lk/english/images/stories/demo/hot_news/top_news/sanga1_latest.jpg");
BitmapField banner=new BitmapField(bannerImage);
add(banner); 
```

但图像不会在 UI 中预览。是否有特殊方法可以从黑莓中的 url 预览图像。（我的意思是，我应该将图像放入临时数组中以预览图像吗？）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:59:05.140

试试这个 -

```
URLBitmapField wmf= new  util.URLBitmapField("http://www.asianmirror.lk/english/images/stories/demo/hot_news/top_news/sanga1_latest.jpg")
add(wmf); 
```

//URLBitmapField 类如下 -

```
public class URLBitmapField extends BitmapField implements URLDataCallback {
EncodedImage result=null ;
public static Bitmap myImage;

public static EncodedImage _encoded_img=null ;

int _imgWidth = 140;
int _imgHeight = 140;
int _imgMargin = 10;

public URLBitmapField(String url) {
    try {
        http_image_data_extrator.getWebData(url, this);
    }
    catch (Exception e) {}
}

public Bitmap getBitmap() {
    if (_encoded_img == null) return null;
    return _encoded_img.getBitmap();
}

public void callback(final String data) {
    if (data.startsWith("Exception")) return;

    try {
        byte[] dataArray = data.getBytes();

        //bitmap = EncodedImage.createEncodedImage(dataArray, 0, dataArray.length);//no scale

        _encoded_img = EncodedImage.createEncodedImage(dataArray, 0, dataArray.length); // with scale
        _encoded_img = sizeImage(_encoded_img, _imgWidth, _imgHeight);

    constants.image=_encoded_img;

        //myImage=cropImage(_encoded_img.getBitmap());

        setImage(_encoded_img);
        UiApplication.getUiApplication().getActiveScreen().invalidate();
    }
    catch (final Exception e){}
}

public EncodedImage sizeImage(EncodedImage image, int width, int height) {

      int currentWidthFixed32 = Fixed32.toFP(image.getWidth());
      int currentHeightFixed32 = Fixed32.toFP(image.getHeight());

      int requiredWidthFixed32 = Fixed32.toFP(width);
      int requiredHeightFixed32 = Fixed32.toFP(height);

      int scaleXFixed32 = Fixed32.div(currentWidthFixed32,
        requiredWidthFixed32);
      int scaleYFixed32 = Fixed32.div(currentHeightFixed32,
        requiredHeightFixed32);

      result = image.scaleImage32(scaleXFixed32, scaleYFixed32);
      return result;
}

public class http_image_data_extrator {
    static String url_="";
    static StringBuffer rawResponse=null;
    //static String result = null;
         public static void getWebData(String url, final URLDataCallback callback) throws IOException {
             //url_=url;

                 HttpConnection connection = null;  
                 InputStream inputStream = null;  

                try {  

                    if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
                            && RadioInfo
                                    .areWAFsSupported(RadioInfo.WAF_WLAN)) {
                        url += ";interface=wifi";
                    }

                    connection = (HttpConnection) Connector.open(url, Connector.READ, true);  

                    String location=connection.getHeaderField("location");

                    if(location!=null){

                        if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
                                && RadioInfo
                                        .areWAFsSupported(RadioInfo.WAF_WLAN)) {
                            location += ";interface=wifi";
                        }

                        connection = (HttpConnection) Connector.open(location, Connector.READ, true);  

                    }else{
                        connection = (HttpConnection) Connector.open(url, Connector.READ, true);  
                    }

                    inputStream = connection.openInputStream();  
                    byte[] responseData = new byte[10000];  
                    int length = 0;  
                    rawResponse = new StringBuffer();  
                    while (-1 != (length = inputStream.read(responseData))) { 
                        rawResponse.append(new String(responseData, 0, length));  
                    }  
                    int responseCode = connection.getResponseCode();  
                    if (responseCode != HttpConnection.HTTP_OK){
                        throw new IOException("HTTP response code: "+ responseCode);  
                    }  

                    final String  result = rawResponse.toString();
                    UiApplication.getUiApplication().invokeAndWait(new Runnable() {  
                        public void run(){  

                            callback.callback(result);

                        }  
                    });  
                }  
                catch (final Exception ex) {  
                    UiApplication.getUiApplication().invokeLater(new Runnable() {  
                        public void run() {  
                            callback.callback("Exception (" + ex.getClass() + "): " + ex.getMessage());  
                        }  
                    });  
                }
    }  

}

public interface URLDataCallback {

    public void callback(String data);

} 
```

# css - 在 SASS 中嵌套多个直接后代选择器

> ID：12049108
> 
> 赞同：4
> 
> 时间：2012-08-21T05:54:35.967
> 
> 标签：css, sass

不确定这是否可能，但这一直困扰着我一段时间。

在 SASS 中是否可以在嵌套块中选择多个直接后代？

```
// This works
div
{
  > .one
  {
    /* ... */
  }
}

// This doesn't work
div
{
  > .one,
  > .two
  {
    /* ... */
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T06:02:36.130

它有效，你做错了什么。此外，您可以在此处查看已编译的 css：http: [//sass-lang.com/try.html](http://sass-lang.com/try.html)，在您的情况下，它提供：

```
div > .one {
  /* ... */ }

div > .one,
div > .two {
  /* ... */ } 
```

所以它有效。

# sinatra - 运行 Sinatra 应用程序的首选方式是什么？

> ID：12049110
> 
> 赞同：0
> 
> 时间：2012-08-21T05:54:47.730
> 
> 标签：sinatra, bundler, jruby-rack, trinidad-gem

**编辑：我让应用程序使用 TorqueBox 工作，所以我猜这个问题与特立尼达有关。但是，我认为我对运行 Sinatra 应用程序的首选方式的猜测仍然有效。**

我正在使用 JRuby、Bundler 和模块化风格。这是我的应用程序代码：

```
# myapp.rb
class MyApp < Sinatra::Base
  configure :development do
    register Sinatra::Reloader
  end

  set :server, 'trinidad'
  set :environment, :development
  set :logging, true
  #...
end

# config.ru
require 'bundler/setup'

Bundler.require(:default)

$: << File.dirname(__FILE__)

require 'myapp'

run MyApp

# Gemfile
source 'http://rubygems.org'

gem 'rack'
gem 'sinatra', :require => 'sinatra/base'
gem 'sinatra-contrib', :require => 'sinatra/reloader'
gem 'coffee-script'
gem 'neography'
gem 'gon-sinatra'
gem 'sass'
gem 'trinidad' 
```

启动我的应用程序的正确方法是什么（即什么样的命令）？我正在使用 Trinidad，因为我读到它是 JRuby 应用程序的好解决方案（我无法让 TorqueBox 工作）。目前我正在通过“trinidad config.ru”运行我的应用程序，但它会引发以下错误消息：

```
application error
org.jruby.rack.RackInitializationException: no such file to load -- bundler/setup
    from org/jruby/RubyKernel.java:991:in `require'
    from /home/myhome/.rvm/rubies/jruby-1.7.0.preview1/lib/ruby/shared/rubygems/custom_require.rb:36:in `require'
    from /home/myhome/RubymineProjects/myapp/config.ru:1:in `(root)'
    from org/jruby/RubyBasicObject.java:1818:in `instance_eval'
    from jar:file:/home/myhome/.rvm/gems/jruby-1.7.0.preview1/gems/jruby-rack-1.1.9/lib/jruby-rack-1.1.9.jar!/vendor/rack-1.4.1/rack/builder.rb:51:in `initialize'
    from /home/myhome/RubymineProjects/myapp/config.ru:1:in `(root)'

    at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:224)
    at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:58)
    at org.jruby.rack.PoolingRackApplicationFactory.createApplication(PoolingRackApplicationFactory.java:323)
    at org.jruby.rack.PoolingRackApplicationFactory.getApplication(PoolingRackApplicationFactory.java:171)
    at org.jruby.rack.DefaultRackDispatcher.getApplication(DefaultRackDispatcher.java:27)
    at org.jruby.rack.AbstractRackDispatcher.process(AbstractRackDispatcher.java:32)
    at org.jruby.rack.AbstractServlet.service(AbstractServlet.java:37)
    at org.jruby.rack.AbstractServlet.service(AbstractServlet.java:43)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.jruby.exceptions.RaiseException: (LoadError) no such file to load -- bundler/setup
    at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:991)
    at Kernel.require(/home/myhome/.rvm/rubies/jruby-1.7.0.preview1/lib/ruby/shared/rubygems/custom_require.rb:36)
    at RUBY.(root)(/home/myhome/RubymineProjects/myapp/config.ru:1)
    at org.jruby.RubyBasicObject.instance_eval(org/jruby/RubyBasicObject.java:1818)
    at RUBY.initialize(jar:file:/home/myhome/.rvm/gems/jruby-1.7.0.preview1/gems/jruby-rack-1.1.9/lib/jruby-rack-1.1.9.jar!/vendor/rack-1.4.1/rack/builder.rb:51)
    at RUBY.(root)(/home/myhome/RubymineProjects/myapp/config.ru:1)
ignoring null application 
```

我正在使用 Trinidad and Rack 的 1.4.1 版本、JRuby 的 1.7.0.preview1 和 Sinatra 的 1.3.3 版本。

如果我运行“bundle exec trinidad config.ru”，我会收到以下错误：

```
application error
org.jruby.rack.RackInitializationException: Valid types are [:development, :runtime], 
    from /home/myhome/.rvm/rubies/jruby-1.7.0.preview1/lib/ruby/shared/rubygems/dependency.rb:45:in `initialize'
    from /home/myhome/.rvm/rubies/jruby-1.7.0.preview1/lib/ruby/shared/rubygems/specification.rb:821:in `add_dependency_with_type'
    from :1:in `'
    from :1:in `'
    from org/jruby/RubyKernel.java:1037:in `eval'
    from org/jruby/RubyArray.java:1611:in `each'
    from org/jruby/RubyArray.java:1611:in `each'
    from org/jruby/RubyEnumerable.java:649:in `find_all'
    from org/jruby/RubyKernel.java:991:in `require'
    from org/jruby/RubyKernel.java:991:in `require'
    from org/jruby/RubyKernel.java:991:in `require'

    at org.jruby.rack.DefaultRackApplicationFactory.createApplication(DefaultRackApplicationFactory.java:235)
    at org.jruby.rack.DefaultRackApplicationFactory.newApplication(DefaultRackApplicationFactory.java:49)
    at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:57)
    at org.jruby.rack.PoolingRackApplicationFactory.createApplication(PoolingRackApplicationFactory.java:323)
    at org.jruby.rack.PoolingRackApplicationFactory.getApplication(PoolingRackApplicationFactory.java:171)
    at org.jruby.rack.DefaultRackDispatcher.getApplication(DefaultRackDispatcher.java:27)
    at org.jruby.rack.AbstractRackDispatcher.process(AbstractRackDispatcher.java:32)
    at org.jruby.rack.AbstractServlet.service(AbstractServlet.java:37)
    at org.jruby.rack.AbstractServlet.service(AbstractServlet.java:43)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.jruby.exceptions.RaiseException: (ArgumentError) Valid types are [:development, :runtime], 
    at Gem::Dependency.initialize(/home/myhome/.rvm/rubies/jruby-1.7.0.preview1/lib/ruby/shared/rubygems/dependency.rb:45)
    at Gem::Specification.add_dependency_with_type(/home/myhome/.rvm/rubies/jruby-1.7.0.preview1/lib/ruby/shared/rubygems/specification.rb:821)
    at RUBY.(:1)
    at RUBY.(:1)
    at org.jruby.RubyKernel.eval(org/jruby/RubyKernel.java:1037)
    at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1611)
    at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1611)
    at org.jruby.RubyEnumerable.find_all(org/jruby/RubyEnumerable.java:649)
    at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:991)
    at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:991)
    at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:991)
ignoring null application 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:14:51.767

默认情况下不加载 ruby​​gems（至少使用 jruby --1.8），因此您可以在*config.ru*`require 'rubygems'`之上添加，因为 JRuby（实际上是 JRuby-Rack）在单独的“运行时”中加载您的应用程序（一种新的ruby 进程，但在同一个 JVM 进程中）默认情况下。或者，您也可以使用*`rackup -s trinidad`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:48:52.117

至于调用机架配置和应用程序的 CLI 命令，kares 是对的。如果您不使用 Torquebox，则可以使用带有“-s trinidad”的“rackup”。

至于从机架配置中调用应用程序的 Ruby 命令，这就是我所做的。不确定这是否适用于您的情况，如果这是您正在寻找的，但无论 HTTP 处理程序如何，它都会有所帮助：

你有 MyApp，它混合在 Sinatra::Base 中。如果您将该类缩减为仅配置您的环境，并为每个页面加载运行“before do”和“after do”......但实际上并未处理和获取/发布调用；然后您可以创建专门的类来处理整个应用程序中的某些路径。这使用 Rack::Builder 的 map() 方法...

```
require 'myapp'
require 'mylanding'
require 'myauthentication'
require 'myautocomplete'
require 'mysearch'

#de run MyApp

map "/" do
    run MyLanding    #de Catch-all, which would have "get '/*' do" in it too.
end

map "/authentication/" do
    run MyAuthentication
end

map "/autocomplete/" do
    run MyAutocomplete
end

map "/search/" do
    run MySearch
end 
```

然后在每个 My* 类中，执行以下操作：

```
class MyLanding < MyApp
  get "/*" do
    ..handle landing.. or see what's in the splat.
  end
end

class MyAuthentication < MyApp
  get "/sign/in" do
    ..present sign-in..
  end
  post "/sign/in" do
    ..handle sign-in..
  end
end 
```

ETC...

您的子类具有对每个页面加载的整体 MyApp 处理，但添加路由，例如 /authentication/sign/in 由 MyAuthentication 的 /sign/in 处理。这是一种很酷的方式，可以让所有的子应用程序都使用相同的基础：MyApp。*

# jquery - 在rails中，使用jquery令牌输入并且标签不起作用

> ID：12049111
> 
> 赞同：0
> 
> 时间：2012-08-21T05:54:59.400
> 
> 标签：jquery, ruby-on-rails, ruby, jquery-tokeninput

```
<div class="field">
    <%= f.label :author_tokens, "Authors" %><br />
    <%= f.text_area :author_tokens, "data-pre"=> @article.authors.map(&:attributes).to_json %>
  </div> 
```

这是我的代币领域。所有作者的名字都在这里成功列出。但是当我选择它们时，它们不会被复制到 textarea author_tokens 中。但选项旁边的其他名称被复制到文本字段中。

```
{"utf8"=>"✓",
 "authenticity_token"=>"4XajxI5Cw59/Oe/Di0vlZKG2wp61/plh12iIs+OrKaI=",
 "article"=>{"name"=>"fdsfds",
 "published_on(1i)"=>"2012",
 "published_on(2i)"=>"8",
 "published_on(3i)"=>"21",
 "author_tokens"=>"",
 "content"=>"fdsfsfds"},
 "commit"=>"Create Article"} 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:34:45.337

只需将其放在您的 html.erb 文件中即可。

```
<% f.text_field :name_of_the_date_column, :value=>Date.today.strftime('%m-%d-%Y'), :id=>"dp5" %> 
```

并在 application.js 文件中

```
$("#dt5").datepicker({
        format: 'mm-dd-yyyy'
    })
.on('changeDate', function(ev){
  $('#dt5').datepicker('hide');
}); 
```

这对我有用

# excel - 如何从字符串中提取数字？

> ID：12049112
> 
> 赞同：0
> 
> 时间：2012-08-21T05:55:02.797
> 
> 标签：excel, vba

```
abc = Sheets("02").Range("calc02").Value  // value is: Rabat 5%
xR = Mid(abc, 7, 1) // Result is: 5 
```

这没关系，但是如果内容是：Rabat 50%，或者 Rabat 100%
我只想提取这个数字，无论是一位数、两位数还是三位数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:06:01.450

使用正则表达式：

```
var number = Regex.Match(abc, "[0-9]+"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:06:06.467

关于什么：

```
xR = Mid(abc, 7, Len(abc)-7) 
```

假设字符串始终相同，这会考虑字符串的长度以动态返回值。这仅适用于该格式，但这听起来像你想要的:)

如果您想要百分比并且前面的单词是可变长度的，这可能会起作用：

```
percent = Right(abc, InStr(StrReverse(abc)," ")-1)
xR = Mid(percent, 1, Len(percent)-1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:08:45.793

```
xR = Mid$(abc, 7)  ' Returns 5% or 50% etc
xR = Left$(xr, Len(xR)) - 1)  ' strips the % 
```

或者，如果您希望 xR 作为*数字返回*

```
xR = Val(Mid$(abc, 7)) 
```

# ruby - 如何从 Windows cmd shell 打开 Gemfile

> ID：12049123
> 
> 赞同：2
> 
> 时间：2012-08-21T05:56:36.040
> 
> 标签：ruby, windows

如何在 Windows 中通过命令提示符打开 gemfile 进行编辑，

那命令是什么？

示例：要打开一个文件夹，我们使用 cd "folder name"

类似于如何打开 gem 文件。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:06:05.620

假设您在 Gemfile 所在的目录中：`notepad Gemfile`.

# asp.net-mvc - 使用 HomeController 的隐式自绑定激活 HomeController 时出错 - NInject 错误

> ID：12049126
> 
> 赞同：3
> 
> 时间：2012-08-21T05:57:12.033
> 
> 标签：asp.net-mvc, ninject

我有一个 ASP.NET MVC 3 应用程序。它在我的本地机器上成功运行，使用 Visual Studio 2012 RC 下的 IIS Express。

但它似乎没有在我的服务器/主机上运行。我收到以下错误：

> 使用 HomeController 的隐式自绑定激活 HomeController 时出错 没有构造函数可用于创建实现类型的实例。
> 
> 激活路径：
> 
> 1.  请求 HomeController
> 
> 建议：
> 
> 1.  确保实现类型具有公共构造函数。
>     
>     
> 2.  如果您已经实现了单例模式，请改用 InSingletonScope() 的绑定。

我已经搜索了整个网络，找不到解决方案。它看起来是一个错误，因为我的 HomeController 中没有定义构造函数或私有构造函数，但事实并非如此。

我`NInject.dll`在 bin 文件夹中..

想不通...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-04-24T22:06:04.603

我在使用 NInject 时遇到了同样的问题，并且没有阅读整个消息。

**确保您的构造函数是公开的**

我的受到保护。希望能节省别人的时间:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:52:11.190

这确实是一个 NInject.dll 问题。我之前使用的是 .NET 4.5，而 Web 主机使用的是 .NET 4.5。所以我将我的应用程序切换到 .NET 4.0。后来我从一个已经运行的应用程序中提取了一个 NInject.dll 并将其替换为当前应用程序的 dll 并且它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T08:24:46.320

我有完全相同的问题并以相同的方式修复它。

为了提供信息，请注意，当我比较不同服务器上的 ninject.dll 时（我们的一个服务器使用相同的代码），所有 .dll 文件的版本和大小都相同。

一位同事建议我下载一个名为 Hashtab 的工具，该工具确认 dll 实际上是不同的。

在我们所有的服务器上，站点都设置为在 .NET4.0 下运行，但是在正常运行的服务器上，安装了 .NET4.5……站点运行的应用程序池是 .NET4，但显然安装了 .NET4.5添加了一些文件。

如果有疑问，请删除 .dll，确保您的项目配置为在正确版本的 .NET 框架下构建，然后通过 NuGet 添加 dll。

# android - c2dm android中总是出现未授权错误（401）

> ID：12049130
> 
> 赞同：0
> 
> 时间：2012-08-21T05:57:25.160
> 
> 标签：android, push-notification, android-c2dm

实际上，我在我的应用程序中使用了 ramachandru6@gmail.com 作为“发件人 ID”，以及用于获取身份验证令牌的相同 ID 和相同密码。但仍然收到 401 错误。我已经花了两天多的时间。请任何人指导我。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:08:44.877

在 GCM 中，没有什么比使用 id 和密码进行身份验证更重要的了。当您在 GCM 中设置应用程序时，它将提供一个服务器端令牌。用它作为键

# excel - 检查范围内唯一单元格的数量

> ID：12049132
> 
> 赞同：3
> 
> 时间：2012-08-21T05:57:38.717
> 
> 标签：excel, excel-formula, worksheet-function

我有一张excel表格。

在 E 列下，我有 425 个包含数据的单元格。我想检查相同的数据（即单元格内的文本）是否在 E 列下剩余的 424 个单元格中的任何其他地方重复。我该怎么做？

例如，在 E54 我有
`Hello Jack`

我将如何检查该值以查看它是否在这些单元格中的任何其他单元格中？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-21T06:39:27.580

你可以使用

`=SUMPRODUCT(1/COUNTIF(E1:E425,E1:E425))`

计算 E1:425 中唯一单元格的数量

答案为 425 意味着所有值都是唯一的。
421 的答案意味着 4 个值与其他值重复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:40:37.647

对将基于此公式突出显示的所有单元格使用条件格式：

> COUNTIF(E:E,E1) <> 1

这是基于列是 E，并从 E1 开始，否则进行修改。

在 Excel 2010 中更简单，只需进入条件格式并选择

> 仅格式化唯一值或重复值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-23T14:19:26.307

如果您必须补偿空白单元格，请使用@brettdj 上面提供的公式，

1.  调整您的唯一计数的分子以检查非空白。
2.  将零长度字符串添加到 COUNTIFS 的标准参数。

    =SUMPRODUCT((E1:E425<>"")/COUNTIF(E1:E425,E1:E425&""))

检查分子中的非空白单元格意味着任何空白单元格都将返回零。无论分母是什么，任何分子为零的分数都将为零。附加到标准部分的空字符串`COUNTIF`足以避免`#DIV/0!`错误。

[使用 SUMPRODUCT() 分解](http://answers.microsoft.com/en-us/office/wiki/office_2003-excel/count-unique-with-sumproduct-breakdown/1bc18979-4172-4537-993e-3897f74d6a5b)的 Count Unique 中的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T22:23:11.387

此公式输出“唯一”或“重复”，具体取决于列值是否都是唯一的：

```
{=IF(
    SUM(IF(ISBLANK(E1:E425),0,ROW(E1:E425)))
=
    SUM(IF(ISBLANK(E1:E425),0,MATCH(E1:E425,E1:E425,0)))
,"unique","duplicates")} 
```

这是一个数组公式。您没有明确键入封闭的 {}。相反，您输入不带 {} 的公式，然后按 cmd-enter （如果不是 Mac，则按其他键 - 去查一下！）如果您想将公式拆分为多行以提高可读性，请使用 cmd-ctrl-return苹果电脑。

该公式通过比较两个 SUM() 结果来工作。如果它们相等，则所有非空白条目（数字或文本）都是唯一的。如果它们不相等，则有一些重复。该公式不会告诉您重复项在哪里。

第一个总和是通过将每个非空白条目的行号相加得到的。

第二个总和使用 MATCH() 查找每个非空白条目。如果所有条目都是唯一的，则 MATCH() 在其自己的位置查找每个条目，结果与第一个总和相同。但是如果有重复的条目，那么后面的副本将匹配早期的副本，而后面的副本将为总和贡献不同的值，并且总和将不匹配。

您可能需要调整此公式：

*   如果您希望包含“”的单元格算作空白，则将 LEN(...)=0 用于 ISBLANK(...)。如果你愿意，我想你可以在那里进行其他测试，但我没有尝试过。

*   如果你想测试一个不是从第 1 行开始的数组，那么你应该从 ROW(...) 中减去一个常数。

*   如果您有大量单元格，则在计算此总和时可能会出现整数溢出。我对此没有解决方案。

遗憾的是 Excel 没有 ISUNIQUE() 函数！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-01T13:55:46.793

突出显示 E 并在主页选项卡上选择条件格式 > 突出显示单元格规则 > 重复值...然后它将突出显示重复的所有内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-05T12:22:17.750

这可能是一个更简单的解决方案。假设 A 列包含有问题的数据。按该列排序。然后，从 B2（或第一个非空白单元格）开始，使用以下公式：=IF(A2=A1,1,0)。

比该列的总和。当 sum = 0 时，所有值都是唯一的。

# php - 如何在 notORM PHP 库上创建虚拟表

> ID：12049138
> 
> 赞同：0
> 
> 时间：2012-08-21T05:59:00.370
> 
> 标签：php, sql, notorm

如何在 notORM PHP 库上创建虚拟表。例如，我想像这样制作 sql：

```
SELECT * 
FROM (SELECT * 
      FROM `user_share_table` 
      where `user_share_table`.share_valid=1 and
           `user_sharetable`.flag=1
      order by `user_share_table`.share_time desc
     )t JOIN `goods_table` 
          ON `goods_table`.goods_id=`t`.goods_id 
group by `t`.goods_id 
order by `t`.share_time desc 
limit 8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:18:59.843

在数据库中创建一个视图并在 NotORM 中使用它。

# android - 图像在 textview 中无法正确显示

> ID：12049146
> 
> 赞同：0
> 
> 时间：2012-08-21T06:00:51.617
> 
> 标签：android

我正在尝试在 textview 中显示带有一些图像的 html 内容。问题是图像与文本重叠。这是代码。谁能帮帮我。

这里 htmldata 是包含 html 数据的字符串。

```
 String htmldata="<here html data comes>";//html data comes from  ws                     
                URLImageParser p = new URLImageParser(tv_body, this);
            Spanned htmlSpan = Html.fromHtml(htmldata, p, null);
        tv_body.setText(htmlSpan);

             public class URLDrawable extends BitmapDrawable {
    // the drawable that you need to set, you could set the initial drawing
    // with the loading image if you need to
    protected Drawable drawable;

    @Override
    public void draw(Canvas canvas) {
        // override the draw to facilitate refresh function later
        if(drawable != null) {
            drawable.draw(canvas);

        }
    }
}
public class URLImageParser implements ImageGetter {
    Context c;
    View container;

    /***
     * Construct the URLImageParser which will execute AsyncTask and refresh the                              container
     * @param t
     * @param c
     */
    public URLImageParser(View t, Context c) {
        this.c = c;
        this.container = t;
    }

    public Drawable getDrawable(String source) {
        URLDrawable urlDrawable = new URLDrawable();

        // get the actual source
        ImageGetterAsyncTask asyncTask = 
            new ImageGetterAsyncTask( urlDrawable);

        asyncTask.execute(source);

        // return reference to URLDrawable where I will change with actual image from
        // the src tag
        return urlDrawable;
    }

    public class ImageGetterAsyncTask extends AsyncTask<String, Void, Drawable>  {
        URLDrawable urlDrawable;

        public ImageGetterAsyncTask(URLDrawable d) {
            this.urlDrawable = d;
        }

        @Override
        protected Drawable doInBackground(String... params) {
            String source = params[0];
            System.out.println("source==="+source);
            return fetchDrawable(source);
        }

        @Override
        protected void onPostExecute(Drawable result) {
            // set the correct bound according to the result from HTTP call

            // System.out.println("result.getIntrinsicWidth()==="+result.getIntrinsicWidth());
            // System.out.println("result.getIntrinsicHeight()==="+result.getIntrinsicHeight());
             if(result!=null)
             {
            urlDrawable.setBounds(0, 0, 0 + result.getIntrinsicWidth(), 0 
                    + result.getIntrinsicHeight()); 
             }

            // change the reference of the current drawable to the result
            // from the HTTP call
            urlDrawable.drawable = result;

            // redraw the image by invalidating the container
            URLImageParser.this.container.invalidate();
        }

        /***
         * Get the Drawable from URL
         * @param urlString
         * @return
         */
        public Drawable fetchDrawable(String urlString) {
            try {
                InputStream is = fetch(urlString);
                Drawable drawable = Drawable.createFromStream(is, "src");
                if(drawable!=null){
                drawable.setBounds(0,0, 0 + drawable.getIntrinsicWidth(), 0 
                        + drawable.getIntrinsicHeight()); 
                }
                else
                {
                    drawable=null;
                }
                return drawable;
            } catch (Exception e) {
                e.printStackTrace();
                return null;
            } 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:49:27.523

我是这样解决的：

```
protected void onPostExecute(Drawable result) {

    if(result!=null)
    {
        urlDrawable.setBounds(0, 0, 0 + result.getIntrinsicWidth(), 0 
        + result.getIntrinsicHeight()); 
    }

    urlDrawable.drawable = result;

    URLImageParser.this.container.invalidate();

    //add this
    URLImageParser.this.container.setText(URLImageParser.this.container.getText());
} 
```

# ruby-on-rails - 无法将 params[:fields] 哈希传递给 Ruby on Rails 中的控制器方法

> ID：12049147
> 
> 赞同：1
> 
> 时间：2012-08-21T06:00:53.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, routes, params

```
 routes.rb
-----------
resources :mail_settings 
```

我的表格看起来像这样

```
the _form.html.erb
---------
<%= form_tag  '/mail_settings' do %>

<div class="fieldBlock">
 <%= label_tag :name %>  <%= text_field_tag :name%> </div>

<div class="fieldBlock">
 <%= label_tag :id%>  <%= text_field_tag :id%> </div>

<div class="actions fieldBlock">
 <%= submit_tag "Update Settings ", :class => "btn-large btn-success" %>
</div>

<% end %> 
```

但是我可以毫无问题地访问像 params[:name] 这样的单个参数，为什么当我尝试 params[:mail_setting] 时它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:08:37.917

你的意思是为什么它是`params[:name]`而不是`params[:mail_setting][:name]`？如果是这样，原因是您使用`form_tag`的不仅仅是一个`form`, 和一系列 *_tag 助手[即 text_field_tag ]。在这种情况下，您不会将表单“绑定”到模型 - 通常 form_tag 比表单灵活得多。但是，您应该能够执行类似的操作

```
<%= text_field_tag "mail_setting[name]"%> 
```

你会得到 params[:mail_setting][:name]

希望我猜到你问的是什么！

# java - 使用 Ajax 刷新页面

> ID：12049150
> 
> 赞同：0
> 
> 时间：2012-08-21T06:01:11.553
> 
> 标签：java, ajax, struts2, refresh

我有一个场景，我需要调用一个 Java 方法来设置一些请求属性，并且这些属性必须反映在 jsp 页面中。

```
<script type="text/javascript">
  setInterval(function() {
    ajaxAction($('#refresh'), 'moveETHAction_fetchExecutorData');
    return false;
    //callNextMethod(document.getElementById('moveForm'), 'moveETHAction_',
        //  'fetchExecutorData');
  }, 60 * 1000);

      function ajaxAction(form, url) {
    /* the time and hour are added to the request for create an unique URL for IE.
     * The call to the server is realised only if the url is different...
     */
    params = Form.serialize(form) + '&ms=' + new Date().getTime();
    currentFocused = document.activeElement.id;
    lastActionCalled = url;
    formUsed = form;
    var myAjax = new Ajax.Request(url, {
        method : 'post',
        parameters : params,
        onComplete : showResponse
    });
}
function showResponse(originalRequest) {
    xml = originalRequest.responseXML;
}

 </script> 
```

如您所见，我想点击动作类和相应的方法。但是，除了获取将在 Java 操作类中设置的一些请求属性外，我不必替换视图部分中的任何内容。

总视图部分采用一种形式（'sendOrder'），并且我在主窗体中包含了另一种形式（'refresh'。抱歉，我不知道如何满足我的要求。我只是试了一下。

请让我知道我该如何解决这个问题？使用 AJax 不是强制性的，我需要做的就是点击 java 方法并显示具有更新请求属性的同一页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:36:06.957

我不确定您想从 Action 中获得多少字段，您可以很好地使用 Jquery 和[Struts2-Json](http://struts.apache.org/2.2.3/docs/json-plugin.html)插件来为您完成工作。

S2 Json 插件将帮助您以 JSON 格式发回响应，您可以使用 Jquery JSon 功能来解析这些字段并按照您的方式填充值。

这是你必须做的

```
var myFormValues='id='+uuid;
    $.getJSON('myAction',myFormValues,function(data) {
     $.each(data.myObject,function(key, value){
         alert(key);
                 alert(value);
    });
     }); 
```

这里 key 是字段的名称， value 是它相对于该字段的值

在上面，您正在调用一个操作`myAction`，该操作将根据您发送的值返回 JSON `myFormValues`。这是一个模拟你的动作

```
public class MyAction extends ActionSupport{
   private String id;
   //getter and setter
   private String vallue1;
   private String vallue2;
   private String vallue3;
   //there getter ans setters

   public String execute() throw Exception{
       //Fill you values based on the condition
       return SUCCESS;
   }
}
<package name="JSON" extends="json-default">
   <action name="myAction"  class="MyAction">
     <result type="json"></result>
 </action> 
```

希望这会给你一些想法

# python - python numpy 向量数学

> ID：12049154
> 
> 赞同：18
> 
> 时间：2012-08-21T06:01:49.463
> 
> 标签：python, numpy

什么是 2d 矢量类/操作的`numpy`等价物[`euclid`](https://pypi.python.org/pypi/euclid)？（如`euclid.Vector2`：）

到目前为止，我有这个。创建两个向量

```
import numpy as np

loc = np.array([100., 100.])
vel = np.array([30., 10])

loc += vel

# reseting speed to a default value, maintaining direction
vel.normalize()
vel *= 200

loc += vel 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-21T08:39:55.103

您可以只使用 numpy 数组。查看[numpy for matlab 用户](https://docs.scipy.org/doc/numpy/user/numpy-for-matlab-users.html)页面，详细了解数组 wrt 矩阵的优缺点。

正如我在评论中提到的，必须使用`dot()`函数或方法进行向量的乘法是最大的陷阱。但话又说回来，numpy 数组是*一致*的。所有操作都是元素方面的。因此，对数组进行加减运算以及与标量的乘法运算都可以按向量的预期工作。

**Edit2：**从 Python 3.5 和 numpy 1.10 开始，您可以使用中`@`缀运算符进行矩阵乘法，这要归功于[pep 465](https://www.python.org/dev/peps/pep-0465/)。

**编辑：**关于您的评论：

1.  是的。整个 numpy 都是基于数组的。

2.  是的。`linalg.norm(v)`是获取向量长度的好方法。但是你得到什么取决于规范的可能的第二个论点！阅读文档。

3.  要对向量进行归一化，只需将其除以您在 (2) 中计算的长度即可。标量除以数组也是元素方面的。

    ipython 中的一个示例：

    ```
    In [1]: import math

    In [2]: import numpy as np

    In [3]: a = np.array([4,2,7])

    In [4]: np.linalg.norm(a)
    Out[4]: 8.3066238629180749

    In [5]: math.sqrt(sum([n**2 for n in a]))
    Out[5]: 8.306623862918075

    In [6]: b = a/np.linalg.norm(a)

    In [7]: np.linalg.norm(b)
    Out[7]: 1.0 
    ```

    请注意，这`In [5]`是计算长度的另一种方法。`In [6]`显示对向量进行归一化。

# resources - 使用 Jenkins 为一项工作管理多个系统

> ID：12049155
> 
> 赞同：1
> 
> 时间：2012-08-21T06:01:49.813
> 
> 标签：resources, continuous-integration, jenkins

我对 Jenkins 很陌生，我不确定它是否可以用于以下用途：

*   我们有多个分支（比如说 5 个分支）

*   对于每个分支，我们必须运行一个需要 2 个服务器、1 个 linux 客户端和 1 个 windows 客户端的测试套件

*   我们想在作业之间共享这些资源，假设我们有一个由 6 个服务器、3 个 linux 客户端和 3 个 windows 客户端组成的池

是否可以通过 Jenkins 来管理这个？该作业可以通过一个简单的 shell 脚本启动，但它必须“保留”资源并将这些作为参数传递给 shell 脚本。如果当前没有可用资源，它还应该将测试套件作业排队。

我研究了 Jenkins 基础，但到目前为止只找到了“构建从属”模型，您可以在托管客户端上运行作业。但是我还没有找到任何管理多个资源的解决方案。这可能通过詹金斯吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:03:19.017

是的，这可以通过 Jenkins 实现。您必须为您的从节点分配标签，因此可以将作业设计为使用 linux 和 windows 对。在配置作业分配时，在文本框中，“限制可以运行此项目的位置”-> 从站的“标签表达式”标签。

![在此处输入图像描述](../Images/53508fa01928a8c8b152da5e49666d58.png)

您还可以从此处找到上面的图标，您还可以找到有关可用于放置条件的各种运算符。

如果您是 Jenkins 的新手，也可以从[这里参考](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)

# jquery - 在 ASP.NET MVC 3 中，Jquery Token Input 未填充数据库中的值

> ID：12049160
> 
> 赞同：3
> 
> 时间：2012-08-21T06:03:15.413
> 
> 标签：jquery, asp.net-mvc-3, jquery-tokeninput

我是 jQuery Token Input 的新手，正在学习[本](http://loopj.com/jquery-tokeninput/)教程。

**我想做的事 ？**

我想显示数据库中的值，因为用户使用 jQuery 令牌输入将值输入到文本框中。

**到目前为止我尝试了什么？**

到目前为止，这就是我的观点......

**看法**

```
<p>
Getting data from database using <i>token Input</i> =>
<input type="text" id="selectDb" />
</p>

<script type="text/javascript">
    $(document).ready(function () {

        $("#selectDb").tokenInput("@Url.Action("Search")");

    });
</script> 

</div> 
```

下面是我的控制器动作。

**控制器代码**

```
[HttpGet]
public JsonResult Search(string q)
{
    var searchResult = Helper.SearchContact(q);
    return Json(searchResult, JsonRequestBehavior.AllowGet);
} 
```

我的 Helper.cs 类代码是......

```
public static class Helper
{
    public static CRUDEntities1 Entities = new CRUDEntities1();

    public static IEnumerable<Contact> SearchContact(string s)
    {
        var searchResults = Entities.Contacts.Where(item => item.Name.Contains(s));

        return searchResults;
    }
} 
```

我不确定我哪里出错了，请指导我。谢谢。

编辑：**Contact**是由 EntityFramework 生成的实体模型类，具有一个名为“id”的 int 字段和两个名为“city”和“name”的字符串字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:19:14.017

更新：[在 ASP.NET MVC 3 Razor 中使用 jQuery Tokeninput](http://yassershaikh.com/using-jquery-tokeninput-with-asp-net-mvc-3-razor/)

感谢@bhuvin 和其他人。

解决了，必须这样做...

```
[HttpGet]
public JsonResult Search(string q)
{
    var searchResults = Helper.SearchContact(q);
    var jsonResult = searchResults.Select(results => new { id = results.Id, name = results.Name, city = results.City });
    return Json(jsonResult, JsonRequestBehavior.AllowGet);
} 
```

[并在此处](http://loopj.com/jquery-tokeninput/)的 TokenInput 文档中找到了这个。

您的脚本应以以下格式输出 JSON 搜索结果：

```
[
    {"id":"856","name":"House"},
    {"id":"1035","name":"Desperate Housewives"},
    ...
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-21T16:10:09.203

**这对我有用：**

鉴于：

```
<h2 id="theme">Facebook Theme</h2>
<div>
    <input type="text" id="authorlist" name="q" data-autocomplete="@Url.Action("GetAuthors", "Home")" />

</div> 
```

在脚本中（javascript）

```
<script type="text/JavaScript">
    $(document).ready(function() {

        $("#authorlist").tokenInput("@Url.Action("Search")", {
            theme: "facebook",
            preventDuplicates: true
        });

    });
</script> 
```

在控制器中：

```
[HttpGet]
public JsonResult Search(string q)
{
    q = q.ToUpper();
    var authors = db.StudentDB
        .Where(a => a.name.ToLower().StartsWith(q))
        .Select(a => new { id = a.id, name = a.name });

    return Json(authors,  JsonRequestBehavior.AllowGet);
} 
```

# php - 如何调试调用 SQL 语句的 AJAX (PHP) 代码？

> ID：12049161
> 
> 赞同：0
> 
> 时间：2012-08-21T06:03:20.117
> 
> 标签：php, sql, ajax, postgresql

我不确定这是否与另一个问题重复，但我有一个小文件，`PHP`它调用了一些图像标记系统。大多数情况下，插入和删除都有效，但在某些情况下，插入不起作用。`SQL` `INSERT``DELETE`

有没有办法查看`SQL`语句执行失败的原因，类似于在or中使用`SQL`函数时的情况，如果失败，它会告诉你原因（例如：重复键插入、未终止的引号等）？`Python``Java`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:12:26.570

我能想到两件事，还有一件事是我**从 amitchhajer 那里偷来的**：

*   [pg_last_error](http://php.net/manual/en/function.pg-last-error.php)会告诉你会话中的最后一个错误。出于显而易见的原因，这太棒了，您将希望将错误记录到磁盘上的文本文件中，以防问题类似于数据库出现故障。如果您尝试将错误存储在数据库中，您可能会在找出原因的过程中遇到一些 HILARIOUS* hi-jinks。

*   将每个查询记录到此文本文件，即使是成功的查询。找出问题是否影响相同的操作（再次是您的数据库或连接的问题）或每次的某些查询（您的应用程序的问题。）

*   如果您有权访问您的服务器（或者您的共享主机很好），请启用并检查[数据库的查询日志](https://stackoverflow.com/questions/722221/how-to-log-postgres-sql-queries)。但是，如果应用程序和服务器之间存在网络问题，这将无济于事。

但如果我不得不猜测，我会想象当应用程序失败时，它会得到奇怪的输入。十分之九的输入没有正确转义，或者 - 因为您使用的是 PHP，它在类型转换期间作为例行程序谋杀变量 - 它被设置为 FALSE 或 NULL 或其他东西，并且系统正在生成一个损坏的查询喜欢`INSERT INTO wizards (hats, cloaks, spell_count) VALUES ('Wizard Hat', 'Robes', );`

*实际上并不搞笑

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T06:14:01.097

通过启动日志开始监视您的 SQL 查询。在那里您可以查看所有查询被触发的内容和错误（如果有）。

[本教程](http://www.howtogeek.com/howto/database/monitor-all-sql-queries-in-mysql/)启动记录器将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:24:42.577

根据您的 PHP 文件使用的 API（希望它是 PDO ；），您可以使用 s.th 检查当前事务中的错误。像

```
$naughtyPdoStatement->execute();
if ($naughtyPdoStatement->errorCode() != '00000')
    DebuggerOfChoice::log( implode (' ', $naughtyPdoStatement->errorInfo() ); 
```

当使用遗留 API 时，有类似`mysql_errno`, `mysql_error`,`pg_last_error`等的等价物......应该能够做到这一点。`DebuggerOfChoice::Log`当然可以是您想使用的任何日志功能

# php - 从表单输入中搜索 SQL 中的部分变量

> ID：12049164
> 
> 赞同：2
> 
> 时间：2012-08-21T06:03:25.167
> 
> 标签：php, mysql

我现在正在执行一项任务，我正在尝试构建一个小型房地产之类的网站，该网站根据用户输入城市从我的 mySQL 数据库中构建搜索。我现在可以根据用户是否完全正确地输入城市来返回正确的结果，但是如果用户只输入城市的一部分，我希望它能够返回搜索。

一个例子是，分配中的一些城市是“Tomsville”和“OceanCove”，如果有人只输入“Tom”甚至“T”，我需要能够让搜索能够返回“Tomsville”的结果“......对于“OceanCove”也需要如此，他们可以输入“ocean”并获得结果。

用户输入的变量是 $findhome。

这是与此问题相关的代码部分：

```
 $statement  = "SELECT *";
 $statement .= "FROM u1585_homes ";

if ($findhome!= 'ALL')
{
    $statement .= "WHERE city ='".$findhome."' ";
}
    $statement .= "ORDER BY city";

    $sqlResults = selectResults($statement);

    $error_or_rows = $sqlResults[0];

    if (substr($error_or_rows, 0 , 5) == 'ERROR')
    {
        print "<br />Error on DB";
        print $error_or_rows;
        } else {

                $arraySize = $error_or_rows;

                for ($i=1; $i <= $error_or_rows; $i++)
                {
                    $image_file = $sqlResults[$i]['image_file'];
                    $city = $sqlResults[$i]['city'];
                    $price = $sqlResults[$i]['price'];
                    $bedrooms= $sqlResults[$i]['bedrooms'];
                    $baths= $sqlResults[$i]['baths'];
                    $footage = $sqlResults[$i]['footage'];
                    $realtor_firstname = $sqlResults[$i]['realtor_firstname'];
                    $realtor_lastname = $sqlResults[$i]['realtor_lastname'];
                    $grabber = $sqlResults[$i]['grabber'];
                    $description = $sqlResults[$i]['description'];

                    print "<p><img src='images/".$image_file."'>";
                    print "<h3>".$grabber."</h3><br />";
                    print "City: ".$city."<br />";
                    print "Bedrooms: ".$bedrooms."<br />";
                    print "Baths: ".$baths."<br />";
                    print "Price: ".$price."<br />";
                    print "Footage: ".$footage."<br />";
                    print "Realtor: $realtor_firstname ".$realtor_lastname."<br />";

                    print "Description: ".$description;
                    //print ""
                }               
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:05:29.290

尝试`%`围绕搜索词使用并使用[like](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)而不是`=`作为运算符：

```
$statement .= "WHERE city like '%".$findhome."%' "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:09:20.433

Use LIKE operator

```
$statement .= "WHERE city LIKE '%".$findhome."%' "; 
```

# ibm-doors - 在 rpe 中格式化门表

> ID：12049165
> 
> 赞同：2
> 
> 时间：2012-08-21T06:03:27.003
> 
> 标签：ibm-doors

我想使用 RPE 为第一行显示具有不同样式的 Doors 表。例如，使第一行具有不同的背景颜色或其他边框样式。

有什么简单的方法可以做到这一点吗？

谢谢，鲍里斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:56:09.627

我的解决方案是使用一个名为“firstRow”的变量，该变量在表格之前的空容器中分配为 True，然后在表格的行上分配为 False。然后在后台属性中，我有一个看起来像这样的脚本：

```
if (firstRow == "True") {
    "SpecialColour";
} else {
    "NormalColour";
} 
```

需要为每个更改的不同属性使用此脚本的变体，例如，如果第一行居​​中，具有蓝色背景和粗体文本，则需要三个脚本副本。或者，如果您要导出到 Word，您可以在样式表中设置表格样式，尽管我不太确定如何在不亲自经历的情况下解释这一点。

希望有帮助！

# python - 从 csv 导入 Web2py

> ID：12049166
> 
> 赞同：-2
> 
> 时间：2012-08-21T06:03:46.343
> 
> 标签：python, web2py

是否可以从包含主键值而不是自动创建的 csv 文件导入数据？导入表的主键用作另一个表的外键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:07:19.950

我没有尝试使用主键值导入 CSV。但我处于类似情况（某些表的主键用作其他表中的外键）

我认为将密钥放在 CSV 中是有风险/容易出错的。我最终做的是编写一个脚本来读取 CSV，然后使用“db..insert”。缓存insert语句返回的ID，插入从表时使用。

我希望这是有道理的。

# ios - 如何在 XCode 中折叠视图控制器的边缘

> ID：12049167
> 
> 赞同：1
> 
> 时间：2012-08-21T06:04:34.657
> 
> 标签：ios, xcode, visual-effects

我想在我的地图视图控制器上制作一个很好的视觉效果，它被折回它的右下角。当用户点击它时，将显示另一个使用部分卷曲效果的控制器（这部分任务对我来说很容易）。

所以我的问题是是否可以永久折叠控制器的egde以实现描述的视觉效果（只有视觉，我知道如何进行过渡）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:31:18.963

在控制器上使用图像叠加层，其中包含角落文件夹。最终它总是会被折叠起来并且永远不需要动画，因为你说你已经知道如何做折叠动画了。因此，在调用折叠之前，只需要图像来表示您想要的内容。

# javascript - 更改 HTML 按钮值颜色，其中值来自 onclick 调用 Javascript

> ID：12049170
> 
> 赞同：0
> 
> 时间：2012-08-21T06:04:53.517
> 
> 标签：javascript, html, css, button, styles

我使用简单的按钮作为

```
<input type="button" value="Search" onclick="ajaxsubmit(this.form)" /> 
```

函数`ajaxsubmit()`看起来像的地方

```
function ajaxsubmit(f) {
$('#sendreq').attr("disabled", true);
$('#sendreq').val("Sending Request"); 
```

我想设置按钮 onclick 值（发送请求）的样式以将其颜色更改为红色，但初始按钮值（搜索）的颜色不应更改

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:09:44.427

JS：

```
function ajaxsubmit(f) {
  $('#sendreq').attr("disabled", true);
  $('#sendreq').val("Sending Request").addClass("redbutton");
} 
```

CSS（文本颜色，如果你想要的话，使用背景颜色。你可以使用任何应该应用的样式）：

```
.redbutton{
    color:red;
} 
```

每当您想删除红色文本时，只需调用`.removeClass("redbutton")`您的按钮元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:08:51.480

```
$('#sendreq').css('background', '#FF000');
$('#sendreq').addClass('redBackground'); 
```

这可以通过多种方式完成！挑选 ：）

# android - 我们可以通过编程方式在 4.0 上启用使用 Google 位置服务吗？

> ID：12049174
> 
> 赞同：2
> 
> 时间：2012-08-21T06:05:40.130
> 
> 标签：android

我想在我的应用程序中启用在我的 4.0 设备上使用 Google 位置服务。我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:11:36.447

你不能那样做。通过[这个](https://stackoverflow.com/questions/1051649/how-to-programmatically-enable-gps-in-android-cupcake)。它会给你详细的信息。

# c# - 参数类型“bool”未分配给参数类型“int”

> ID：12049175
> 
> 赞同：0
> 
> 时间：2012-08-21T06:05:48.590
> 
> 标签：c#

我像这样初始化了布尔变量

```
 bool isActionAt= true; 
```

但是当我尝试访问时，我得到了不同的错误。

> 参数类型“bool”未分配给参数类型“int”

当我给`bool isActionAt= "1";`

然后我得到了这个错误

> 无法将源类型字符串转换为目标类型 bool

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T06:07:57.340

好吧，您还没有展示如何尝试将其用作`int`，但这显然是错误的：

```
bool isActionAt = "1"; 
```

变量的`bool`值只能为`true`or `false`。"1" 不是这些值之一，并且没有从 string 到 a的*隐式转换*`bool`。

您可能习惯于非常动态类型的语言，它为您隐式转换不同类型的数据：C# 倾向于回避这一点。当有一个不会丢失信息的转换可用时，通常会有一个隐式转换，例如

```
short x = 10;
int y = x; 
```

（一些浮点转换*可能*会丢失信息，但是......）

如果信息可能丢失，您通常必须使用显式转换：

```
int x = 100;
short y = (short) x; // short has a smaller range than int 
```

`string`但是，该语言`bool`中没有*任何*可用的转换，因此您必须自己编写，指定哪些字符串值应被视为真，哪些应被视为假。

如果您可以尝试解释您想要*实现*的目标，而不是您用来尝试实现目标的代码，我们或许可以为您提供帮助。目前我们只知道您的代码无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:22:11.200

如果您想要做的是将 int 变量的值分配给布尔值，那么您可以做的是有条件的，说明如果变量的值为“1”，则将布尔值设为“真”，否则为假。

您也可以尝试将整数转换为布尔值。我似乎记得这也将与您尝试做的类似。

# sql-server-2008 - 从 SQL Server 2008 的范围内返回值

> ID：12049179
> 
> 赞同：0
> 
> 时间：2012-08-21T06:06:08.693
> 
> 标签：sql-server-2008, select

我有两张表，一张包含会员及其卡号，另一张表用于标识每个网点的卡号范围。我想知道会员的卡号属于哪个商店。

成员表

```
MemberID    Cardnumber    FirstName   LastName
1           123456123     John        Doe
2           123456245     Sarah       Smith 
```

奥特莱斯表

```
OutletID    OutletName      StartCardNumber     EndCardNumber
1           Balmain Store   123456100           123456200
2           Sydney Store    123456201           123456300 
```

我想不出一个脚本可以带回以下信息而无需先创建临时表。有没有更简单的方法？

```
CardNumber  FirstName LastName   OutletName
123456123   John      Doe        Balmain Store
123456245   Sarah     Smith      Sydney Store 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:13:53.077

这很简单。除了等式之外，您还使用不等式加入范围。

```
SELECT
   M.CardNumber,
   M.FirstName,
   M.LastName,
   O.OutletName
FROM
   dbo.Members M
   INNER JOIN dbo.Outlets O
      ON M.CardNumber >= O.StartCardNumber
      AND M.CardNumber <= O.EndCardNumber 
```

这与相同，但我想使用and`M.CardNumber BETWEEN O.StartCardNumber AND O.EndCardNumber`画出您的方案的包容性端点。并不总是合适的，因为最终值通常是独占的，但在这种情况下并非如此。`>=``<=``BETWEEN``<`

[立即在线尝试](http://sqlfiddle.com/#!3/b1542/1)！

# iphone - iphone中的void和+（void）有什么区别

> ID：12049183
> 
> 赞同：0
> 
> 时间：2012-08-21T06:06:35.340
> 
> 标签：iphone, objective-c, ios5

我一直在使用 Objective-C 中使用的不同方法。任何人都可以很好地解释以下方法之间的区别吗？

```
void append(NSString *msg);
-(void) append:(NSString *)msg;
+(void)append:(NSString *)msg) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:26:04.727

`void append(NSString *msg)`是一个 C 函数。与 Objective-C 方法不同，C 函数是使用括号而不是 Objective-C 括号表示法调用的。C 函数经常出现在 iOS 中较低级别的组件和框架中，例如图形库。

`-(void) append:(NSString *)msg`是一个实例方法。这意味着，该方法必须在它已写入的任何类的实例上调用。

这与`+(void) append:(NSString *)msg`类方法不同。这意味着该方法必须在类本身上调用，而不是在类的任何单个实例上调用。类方法通常保留给本质上通用的实用方法，而不是特定于实例的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T06:09:40.350

```
-(void) append:(NSString *)msg; 
```

is an instance method.

`+(void) append:(NSString *)msg;`

is a Class method.

`void append(NSString *msg);`

is a `C` function.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T06:09:55.403

```
void append(NSString *msg); // c function
-(void) append:(NSString *)msg; // instance method
+(void)append:(NSString *)msg;// class method 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:15:14.173

```
void append(NSString *msg); // C Style function declaration.

-(void) append:(NSString *)msg; 
```

它是类实例可以调用的**实例方法。**

你有 NSString 类对象。

```
NSString *strObj=@"hi"; 
```

要将 strObj 设为大写，请调用 NSString 类方法 - (NSString *)uppercaseString;

```
[strObj uppercaseString]

+(void)append:(NSString *)msg) 
```

它是类方法或静态方法。示例：NSString *strObj1=[NSString 字符串];

这里： string 方法是**类方法**，它被声明为： + (id)string; 这将返回自动释放的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T06:17:15.353

```
-(void) append:(NSString *)msg; // IT is instans method it's always call with object of class.

+(void)append:(NSString *)msg;//it is class method always call with class name . 
```

例如。' `alloc`' 是一个类名的类方法调用。like

```
[ClassName alloc];

void append(NSString *msg); it is a cFunction. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T06:21:15.233

想象一下你有一个像这样的测试类

```
@interface Test : NSObject

// c function
void append(NSString *msg);

// instance method
- (void)append:(NSString *)msg;

// class method
+ (void)append:(NSString *)msg;

@end 
```

然后你可以像这样实现你的功能：

```
#import "Test.h"

@implementation Test

void append(NSString *msg)
{
    // there is no self inside of a C-function!
    NSLog(@"%@", msg);
}

- (void)append:(NSString *)msg;
{
    // self in a instance method points to the instance
    NSLog(@"%@, %@", msg, self);
}

+ (void)append:(NSString *)msg
{
    // self in a class method points to the class
    NSLog(@"%@, %@", msg, self);
}

@end 
```

最后，您可以通过以下方式调用函数：

```
// C function: append(@"hello");
append(@"hello");

// instance method: - (void)append:(NSString *)msg;
[[[Test alloc] init] append:@"hello"];

// class method: + (void)append:(NSString *)msg;
[Test append:@"hello"]; 
```

另请参阅[类和实例方法有什么区别？](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T06:12:51.977

这表示一个实例方法。您必须持有该类的有效实例才能调用此方法。

```
-(void) 
```

这表示一个类方法。您不需要类的实例来调用此方法。

```
+(void) 
```

# ruby-on-rails - 如何在 ruby 中组合字符串

> ID：12049184
> 
> 赞同：1
> 
> 时间：2012-08-21T06:06:48.990
> 
> 标签：ruby-on-rails, ruby, string

`foo.errors.full_messages`- 如何格式化所有`foo`特定的错误消息以组合成一些东西`space`或`newline separated`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T06:33:27.100

这听起来像是实际上是一个rails问题？您可以`foo.errors.full_messages.join("\n")`换行或`(" ")`空格。

`foo.errors.full_messages.to_sentence`但更好的是，如果这确实是轨道，请尝试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T06:09:40.480

It what you are looking for?

```
big_error_message = foo.errors.full_messages.join(' ') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T06:33:45.150

object.errors.full_messages 是一个字符串数组。

您只需要使用[Array#join](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join)函数作为

```
foo.errors.full_messages.join("\n")
# or
foo.errors.full_messages.join(' ')
# etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T07:53:10.783

如果您的目的只是在 UI 上显示错误消息，请尝试

```
<ul>
  <% model.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
</ul> 
```

它将在无序列表中显示错误，您可以`ul/li`根据需要设置样式

# google-apps-script - removeEditor 在某些编辑器上失败

> ID：12049185
> 
> 赞同：0
> 
> 时间：2012-08-21T06:07:13.597
> 
> 标签：google-apps-script

我有一些谷歌应用程序脚本代码，可以毫无问题地将编辑器添加到文档中。但是，当我运行以下代码时，我发现一些编辑器被删除，并且出现以下消息的一些错误：“异常：我们很抱歉，发生了服务器错误。请稍候，然后重试。”

```
var file = DocsList.getFileById( fid );
var editors = file.getEditors();

  for ( el = 0; el < editors.length ; el++ ) {
      file.removeEditor( editors[ el ] );
} 
```

鉴于编辑器是从文件本身检索的，然后无法删除，我看不到如何进行此操作，因为错误消息没有提供任何帮助。

有没有人经历过类似的。我看不到对此提出的任何问题。

提前致谢。克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T07:30:36.203

我有同样的经历，尽管从 getViewers 或 getEditors 方法获取用户对象，removeEditor 和 removeViewer 都可能对某些用户失败。

我的观察是，除非返回的用户对象是 Google 应用程序帐户持有人，否则删除操作将失败。

因此，在 google 应用程序域 example.com 上，文件可能与以下电子邮件地址共享：

```
normal_account@example.com
group_account@example.com
third_party@some_other_example.com 
```

removeEditor/removeViewer 只会对列表中的第一个地址成功。

尽管对 getEditors/getViewers 的调用返回了用户对象列表，但有些对象显示为空，例如 user.getEmail() 返回一个空白字符串，这就是 API 文档所说的将发生的情况[https://developers.google.com/ apps-script/reference/drive/user#getEmail%28%29](https://developers.google.com/apps-script/reference/drive/user#getEmail%28%29)如果电子邮件地址不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:53:12.390

您可以尝试将您的应用程序放入`file.remove(editors[ el ])`try-catch 结构中以捕获错误（并查看它）并让您的应用程序在每种情况下都完成。

例子 ：

```
function myFunction() {

var file = DocsList.getFileById( '0AnqS........bW1DNnVBbVE' );
var editors = file.getEditors();

Logger.log(editors.join())

  for ( el = 0; el < editors.length ; el++ ) {

      try{      

      file.removeEditor( editors[ el ] );
      Logger.log(editors[el]+' removed');// this editor is successfully removed

      } catch(error)

      {Logger.log('error on el = '+editors[el]+' = '+error)

      }
      }
} 
```

*这当然不会为您的问题带来任何答案，但它可以帮助您更详细地了解正在发生的事情，哪个编辑器出错，哪个没有。*

# php - 使用复选框 php mysql 更新数据库

> ID：12049189
> 
> 赞同：1
> 
> 时间：2012-08-21T06:07:36.357
> 
> 标签：php, mysql, html, checkbox

我想用选中状态的复选框更新数据库。

*   如果选中，则使用 1 更新数据库。
*   否则，如果未选中，则将其更新为 0。

它工作正常，但如果不选中它就不起作用。

```
<?php 
include('lib/db.php');

$facebook_id ="10001088";
$query1 = "SELECT `video`,`quran`,`medical`,`groups`  FROM `man_facebook`.`users` WHERE `facebook_id`='$facebook_id'";
        $result1 = mysql_query($query1);
while($result = mysql_fetch_array($result1))
{
    $video = $result['video'];
    $quran = $result['quran'];
    $medical = $result['medical'];
    $groups = $result['groups'];
    echo $video;
 //   echo $quran;
?>

<form method="post"  action="<? echo $_SERVER['REQUEST_URI']; ?>" >

<input type="checkbox" name="video" id="video" value="<?echo $video;?>" <?php
if($video == '1'){
     echo "checked='checked'";
}
 else {}
echo "/>"
?> 
 <input type="submit" name="submit" value="Submit">
</form>

<?php
}
 if (isset($_POST['submit']))
{
 if (is_numeric($_POST['video']) && $_POST['video'] <2 )
{
 $video1 = isset($_POST['video']) ? '1' : '0';

 echo $video1;
    $query = mysql_query("UPDATE `man_facebook`.`users` 
SET `video` ='$video1'
WHERE `facebook_id`='$facebook_id'");

$video = $video1;
echo '<meta http-equiv="refresh" content="0" />';

    }
    }
//echo $query;
 //header("Location: updatesql.php"); 

?> 
```

我也可以使用jquery顺利更新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:19:45.503

我觉得这部分有点奇怪：

```
if (is_numeric($_POST['video']) && $_POST['video'] <2 )
{
    $video1 = isset($_POST['video']) ? '1' : '0'; 
```

您首先检查它是否是数字，然后检查它是否已设置。如果未设置，则 if 将自动变为 false。换句话说，`$video`总是 1。假设`$video`只能是真/假（或者它可能是“已检查”/“未检查”，不太确定），像这样使用它：

```
$video1 = ($video ? '1' : '0'); 
```

希望我成功地发现了这个问题:)

**更新**

```
<input type="checkbox" name="video" id="video" value="video" <?php
if($video == '1'){
     echo "checked='checked'";
}
echo "/>";

...

if (isset($_POST['submit']))
{
    echo $_POST['video']; // again, please tell what it outputs here!!!
    $video1 = (($_POST['video'] == "video") ? '1' : '0'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-22T13:26:00.840

复选框更新

```
if (isset($_POST["send"]) && $_POST["send"] == "ok") {

    foreach ($_POST['membre'] as $id => $data) {

        mysql_query("UPDATE tablename SET param1='" . $data['param'] . "'  WHERE id='" . $id . "'");
    }
}

<form>
    <input type="hidden" name="send" value="ok" />
    <td class="cel2" style=" width: 100px;">
        <input name="membre[<?php print $val['id']; ?>][param]" type="checkbox" style="margin-top: 7px; width: 30px;" value="1" id="param" <?php if ($val['p'] == '1') print 'checked'; ?> />
    </td>
</form> 
```

# iphone - 如何在 iPhone 的子视图按钮中执行点击事件？

> ID：12049192
> 
> 赞同：-1
> 
> 时间：2012-08-21T06:07:48.420
> 
> 标签：iphone, objective-c, ios, uibutton, touch-up-inside

我有 3 个带有 3 个视图控制器的类。我在我的第一个视图中添加第二个视图作为子视图。并且在第二个视图中有一个按钮，我希望当我单击该按钮时，将调用第二个视图的方法。但是当我单击该按钮时，我的应用程序崩溃了。你能帮助我如何在子视图中执行任何事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:48:19.430

记住：3个嵌套视图，No.1包含NO.2，NO.2包含NO.3，你触摸屏幕，实际上No.1成为第一响应者，如果NO.1的userInteractionEnabled == YES，那么NO.2可以得到响应者等等，通常视图的 userInteractionEnabled 是 YES，但有些不是，比如 UIImageView ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:55:44.950

您应该添加第二个视图，例如：您应该添加一个显示第二个视图的 uiview IBOutlet；然后使其属性并添加 secondView 的子视图，如下所示；

第一视图.h

@类第二视图；{ secondView *secondViewObj; }

@property(nonautomic,retain)secondView *secondViewObj;

在实现文件Firstview.m @synthesize secondViewObj；

然后在您的 viewDidLoad 方法中，您在显示第二个视图的 firstView 中有 uiview outlet mysecondsubView。

self.mysecondSubView=[[secondView alloc]initWithNibName@"secondView" nibBundle:nil];

# jquery-ui - Fullcalendar - 拖动时隐藏可拖动事件？

> ID：12049194
> 
> 赞同：3
> 
> 时间：2012-08-21T06:07:54.920
> 
> 标签：jquery-ui, css, jquery-selectors, fullcalendar

我正在使用 Fullcalendar 插件。需要明确的是，我的css不太好。我面临的问题是，当我从 external-events div 拖动事件时，我拖动的事件会在拖动单元格时隐藏。我不知道需要更改 css 的哪个属性才能使可拖动事件在从外部事件 div 拖动时可见。我试图为“external-event”类设置“display:block”，但它不会使事件在拖动时可见。任何帮助都是非常可观的。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:33:21.197

删除**溢出：**从`.widget`DIV 中隐藏。像这样写：

```
.widget{
 overflow:visible;
} 
```

# java - 时区转换和日期显示不正确

> ID：12049196
> 
> 赞同：0
> 
> 时间：2012-08-21T06:08:07.157
> 
> 标签：java, calendar, timezone

```
Calendar cal= Calendar.getInstance();
System.out.println(cal.getTimeZone().getID());
cal.set(2012, 8, 21);
java.util.Date d = new java.util.Date();
System.out.println(d.toString());

//System.setProperty("user.timezone", "America/Chicago");

//  System.out.println(TimeZone.getDefault().getID());

TimeZone tz1 = TimeZone.getTimeZone("Africa/Algiers");
//tz1.setDefault(tz1);

cal.setTimeZone(tz1);
System.out.println(cal.getTimeZone().getID());

//cal.set(2012, 8, 21);
System.out.println(d.toString()); 
```

输出是——

```
Asia/Calcutta
Tue Aug 21 11:35:06 IST 2012
Africa/Algiers
Tue Aug 21 11:35:06 IST 2012 
```

我想要当前时区格式的时间，但它在 IST 中给出。这个怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:14:48.320

编辑：我只是注意到你给出的代码甚至没有调用`cal.getTime()`. 您*完全忽略*了日历中的值。无论如何它不会做你想要的，但你打印的价值只是`new Date()`......你希望日历如何参与？

> 我想要当前时区格式的时间，但它在 IST 中给出。这个怎么做。

避免使用`Date.toString`, 开头。一个`Date`值没有时区的概念，所以`toString`总是使用系统时区。更改日历的时区而不再次调用`set`也不会更改基础值。

现在有两种选择：

*   使用`SimpleDateFormat`，在格式化之前指定时区
*   改用[Joda Time](http://joda-time.sf.net)，它首先是一个更丰富的日期和时间 API

就我个人而言，我强烈建议您使用后一个选项，尤其是在您进行大量日期/时间操作的情况下。`Date`，只是不要让您编写清楚地表达您在任何时间点拥有的数据的代码`Calendar`。`SimpleDateFormat`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:16:36.163

使用`TimeZone.setDefault(tz1);`代替`//tz1.setDefault(tz1);`

```
Calendar cal = Calendar.getInstance();
    System.out.println(cal.getTimeZone().getID());
    cal.set(2012, 8, 21);
    java.util.Date d = new java.util.Date();
    System.out.println(d.toString());       

    TimeZone tz1 = TimeZone.getTimeZone("Africa/Algiers");
    TimeZone.setDefault(tz1);

    cal.setTimeZone(tz1);
    System.out.println(cal.getTimeZone().getID());

    System.out.println(d.toString()); 
```

我运行你的程序，查看输出：

```
Asia/Calcutta
Tue Aug 21 11:47:13 IST 2012
Africa/Algiers
Tue Aug 21 07:17:13 CET 2012 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:17:04.993

日历不能那样工作...我有 SimpleDateFormat 代码..它可能会有所帮助..试试这个

```
public class TimeZoneTest {  

    public static void main(String[] args) {  
        new TimeZoneTest().setTimeZones();  
    }  

    private void setTimeZones(){  

        String etStart = "";  
        String ctStart = "";  
        String mtStart = "";  
        String ptStart = "";  

        DateFormat fullDateFormat = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");  

                    String dateString = "Mon Mar 14 09:30:51 GMT 2011";  

                                //this input date doesn't convert  
                                //String dateString = "Mon Mar 14 09:30:51 PDT 2011";  

        System.out.println("Input Date: " + dateString);  
        System.out.println("Default TimeZone: " + TimeZone.getDefault());         

        try {  
            etStart = getDateInTimeZone(dateString, fullDateFormat, TimeZone.getTimeZone("America/New_York"));  
            ctStart = getDateInTimeZone(dateString, fullDateFormat, TimeZone.getTimeZone("America/Chicago"));  
            mtStart = getDateInTimeZone(dateString, fullDateFormat, TimeZone.getTimeZone("America/Denver"));  
            ptStart = getDateInTimeZone(dateString, fullDateFormat, TimeZone.getTimeZone("America/Los_Angeles"));  
        } catch (ParseException e) {  
            e.printStackTrace();  
                                 }  

        System.out.println("Eastern Date: " + etStart);  
        System.out.println("Central Date: " + ctStart);  
        System.out.println("Mountain Date: " + mtStart);  
        System.out.println("Pacific Date: " + ptStart);       

    }  

     private String getDateInTimeZone(Date inputDt, TimeZone targetTimeZone) throws ParseException{  

        DateFormat fullDateFormat = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");  
        fullDateFormat.setTimeZone(targetTimeZone);  
        return fullDateFormat.format(inputDt);  

    }  

} 
```

# android - 如何清除 ListView 的 RecycleBin 中的视图？

> ID：12049198
> 
> 赞同：15
> 
> 时间：2012-08-21T06:08:17.717
> 
> 标签：android, android-listview

在 Android 的`ListView`小部件中，将保存从内部类中的适配器方法`ListView`获得的视图。`getView``RecycleBin`

如何清除中的视图`RecycleBin`并强制`ListView`重新创建所有子视图。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-28T09:43:38.553

调用**[invalidate()](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)**或**[invalidateViews()](http://developer.android.com/reference/android/widget/AbsListView.html#invalidateViews%28%29)**对我没有用（如正确答案中所述）。回收的视图仍然存储在**ListView**中。我不得不深入研究 Android 源代码以找到解决方案。我检查了许多方法，包括**ListView**类的**[setAdapter()](http://developer.android.com/reference/android/widget/ListView.html#setAdapter%28android.widget.ListAdapter%29)**方法（ **Android API 15**）：

 ****```
@Override
public void setAdapter(ListAdapter adapter) {

    // ...
    mRecycler.clear();
    // ...

} 
```

正如您所注意到的，设置适配器会清除回收器，它将所有回收的视图保存在列表视图中。您不必创建新适配器，设置相同的适配器足以清除列表视图中的回收视图列表：

```
Adapter adapter = listview.getAdapter ();
// ... Modify adapter ... do anything else you need to do
// To clear the recycled views list :
listview.setAdapter ( adapter ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T07:14:45.337

If I remember correctly a call to `invalidate` on a `ListView` widget will empty the cache of `Views` which are currently stored. I would advise against emptying the cache of views of a `ListView` because of the potential performance issues.

If you're not going to use the `convertView` item then you'll end up with having to build the row view each time(resulting in a lot of objects constructed each time the user scrolls) + the extra memory occupied by the recycled views from the `RecycleBin` which will never be used anyway.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-15T08:20:06.403

`ListView`-中有一个特殊的方法`reclaimViews(List<View>)`。它将当前正在使用和回收站中的所有项目移动到指定列表。`Adapter`小部件将在下次渲染之前为项目请求新视图。

如果项目结构没有太多更改，您可以使用回收的视图，或者完全废弃它们。例如，当用户更改选择颜色时，我正在使用此方法动态更新项目的背景可绘制对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:22:20.513

从 ArrayList 或您在自定义适配器中使用的数据结构中删除回收站对象，并调用`notifyDataSetChanged`适配器的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-08T14:59:25.947

在我看来， [@nekavally](https://stackoverflow.com/a/27959188/3185295 "原始答案")提供了最好的解决方案。我有一个`ListView`和一个`SimpleCursorAdapter`。有时我需要更改列表项的大小。但是由于适配器回收视图，它们可能会以错误的方式出现。所以我只是`mListView.invalidateViews()`在回收回收的视图后打电话，它工作得很好。

```
startAnimation(initialHeight, finalHeight, duration, new ValueAnimator.AnimatorUpdateListener() {
                    @Override
                    public void onAnimationUpdate(ValueAnimator animation) {
                        childView.getLayoutParams().height = 
                                (Integer) animation.getAnimatedValue();
                        childView.requestLayout();

                        if (animation.getAnimatedFraction() == 1f) {
                            mListView.reclaimViews(new ArrayList<View>());
                            mListView.invalidateViews();
                        }
                    }
                }); 
```****

# red5 - How to disconnect an rtmp connection?

> ID：12049203
> 
> 赞同：1
> 
> 时间：2012-08-21T06:08:37.087
> 
> 标签：red5, rtmp, openlaszlo, lzx

Do you know if it's possible actually to disconnect a rtmpconnection and how ? There is no "disconnect" method in the official doc, and also in the rtmpconnection.lzx . So if you know a way out to disconnect the rtmp connection,please let me know. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:23:57.960

OpenLaszlo 中的[<rtmpconnection> 类](http://svn.openlaszlo.org/openlaszlo/trunk/lps/components/extensions/av/rtmpconnection.lzx)使用[ActionScript 3 NetConnection 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetConnection.html)连接到服务器。NetConnection 类有一个[方法 close()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetConnection.html#close%28%29)，这里是它的文档：

> 关闭在本地打开或到服务器的连接，并调度带有 NetConnection.Connect.Closed 代码属性的 netStatus 事件。
> 
> 此方法断开连接上运行的所有 NetStream 对象。任何尚未发送的排队数据都将被丢弃。（要在不关闭连接的情况下终止本地或服务器流，请使用 NetStream.close()。）如果您关闭了连接，然后想要创建一个新连接，则必须创建一个新的 NetConnection 对象并再次调用 connect() 方法。
> 
> close() 方法还会断开在此连接上运行的所有远程共享对象。但是，您无需重新创建共享对象即可重新连接。相反，您可以调用 SharedObject.connect() 来重新建立与共享对象的连接。此外，在您重新建立与共享对象的连接后，将发送在您发出 NetConnection.close() 时排队的共享对象中的任何数据。
> 
> 对于 Flash Media Server，最佳开发实践是在客户端不再需要与服务器的连接时调用 close()。调用 close() 是清理未使用连接的最快方法。您可以将服务器配置为自动关闭空闲连接作为备用措施。

在 <rtmpconnection> 的 LZX 源代码中，我可以看到 NetConnection.close() 仅在连接失败的情况下被调用：

```
<!--- Handle connection failure, attempt to reconnect using altsrc
      @keywords private -->
<method name="_handleConnectionFailure" args="msg"><![CDATA[
    this._nc.close();
    if (this.debug) {
        if ($debug) Debug.warn("error connecting to", this._connecturl, ":", msg);
    }
.... 
```

我不知道为什么在 <rtmpconnection> 类上没有定义 close 方法，但是您可以通过扩展 <rtmpconnection> 并添加 close 方法为自己添加该代码。只要确保正确处理状态变量即可。

由于我已经很久没有使用 Red5 了，所以我无法告诉你 Red5 是否会自动关闭空闲的 NetConnections。

# ruby-on-rails - How to integrate facebook comments in Rails application?

> ID：12049204
> 
> 赞同：6
> 
> 时间：2012-08-21T06:08:39.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, oauth, devise, facebook-comments

I've set up a Rails 3.2 application with Devise. I was wondering how I can allow users to comment using Facebook. Can I use facebook connect along with Devise? If I can, is it ok to have 2 methods of authentication on my site?

I've read some tutorials on setting up OAuth with Devise to allow facebook connect, but it's not all that clear to me. Does anyone know a good step-by-step tutorial on how to integrate facebook comments with Devise already set up? Thanks a lot!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T10:23:39.200

您无需为评论设置 Facebook Connect。

您必须首先创建一个[Facebook 应用程序](https://developers.facebook.com/apps)，然后生成[评论](https://developers.facebook.com/docs/reference/plugins/comments/)插件。之后，将 Javascript 代码放在您`application.html.erb`的`body`标签之后（我的建议是做一个部分）。最后，将`div`与`fb-comments`您希望评论框出现的类放在一起。

# c# - 域实体上的事件？

> ID：12049210
> 
> 赞同：2
> 
> 时间：2012-08-21T06:09:09.107
> 
> 标签：c#, events, dns

我只是想用我的想法讨论利弊。

我已经接管了一个 ASP.NET 解决方案，其中大部分逻辑都放在 UserControls 中，并且后面有代码。随着新功能的引入，我正在尝试重构它，现在我面临一个新问题。

目前邮件警报是在后面的代码中发送的，但我正在考虑一种将其移至单独类的方法。这就是我的想法：

将静态事件添加到域类，即。BookingAccepted、BookingRejected 等。然后使用一个负责电子邮件发送的类来挂钩这些事件。

这意味着向域实体添加事件。这是个好主意还是坏主意？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:13:58.363

领域事件机制是个好主意。但是实现可能会有所不同，静态通常不是最好的方法。我喜欢 Udi Dahan 的想法，看看这篇[博文](http://www.udidahan.com/2009/06/14/domain-events-salvation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:19:55.377

发送电子邮件通知看起来像基础设施。因此，我将此逻辑移至应用程序/域服务（同一个地方，您正在与存储库交谈、进行日志记录等的地方）。您不会`INotifyPropertyChanged`通过域对象实现日志记录和持久化。与发送电子邮件相同。

# linux - How to find all files in all subdirectories using for in linux shell

> ID：12049211
> 
> 赞同：-1
> 
> 时间：2012-08-21T06:09:09.973
> 
> 标签：linux, bash, shell, for-loop

> **Possible Duplicate:**
> [How do I apply a shell command to many files in nested (and poorly escaped) subdirectories?](https://stackoverflow.com/questions/753823/how-do-i-apply-a-shell-command-to-many-files-in-nested-and-poorly-escaped-subd)

I am using this loop to remove empty lines in all files under given directories and sub directories. But it is not working

```
for file in /home/zubinan/public_html/src/Acme/*/*.php
do
sed '/^$/d' $file > tt
mv tt $file
done 
```

`It says Demo is a directory`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:12:18.327

尝试这个;

```
for fname in `find /home/zubinan/public_html/src/Acme/ -type f`
do
    sed '/^$/d' $fname > tt
    mv tt $fname
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:17:10.060

如果要处理某个目录中的所有指定文件，可以使用这个 oneliner：

```
sed -i '/^$/d' `find /home/zubinan/public_html/src/Acme -name "*.php"` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:31:06.440

```
for f in $(find /home/zubinan/public_html/src/Acme -type f \( -iname *.php \)); 
    do 
        relfilePath=${f:${#currentpath}:${#f}};
        // use  relfilePath here

    done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T07:51:43.233

或试试这个：

```
 find /home/zubinan/public_html/src/Acme/ -type f -name "*.php" -exec sed -e '/^$/d' -i \{\} \; 
```

# javascript - how to check if there is "no route to host" over and over during streaming a video?

> ID：12049215
> 
> 赞同：0
> 
> 时间：2012-08-21T06:09:21.603
> 
> 标签：javascript, video-streaming

I know that I should use `setInterval(function(), time_interval_ms)`, but I don't know how to write the `function()` to check if there is a route to host!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:29:52.377

您可以创建一个使用 AJAX 对您的主机执行 ping 操作的函数。如果 AJAX 调用成功，则您的主机可用；如果没有，您的主机不可用。然后，您可以使用`setInterval`调用此“ping”方法。

## 这是一个例子：

```
var timerDuration = 1000;
var hostUrl = "/your_url_to_ping.php";
var isAvailable = false;

$(document).ready(function() {
    var timer = setInterval(function() {
        pingServer();
    }, timerDuration);
});

function updateStatus() {
    var o = $('#df');
    o.text('Is Available: ' + isAvailable);
}

function pingServer() {
    isAvailable = false;
    $.ajax({
        url: hostUrl,
        success: function(data) {
            isAvailable = true;
        },
        error: function() {
            isAvailable = false;
        },
        complete: function() {
            updateStatus();
        }
    });
} 
```

[小提琴](http://jsfiddle.net/pauloosthuysen/qFdzQ/5/)

## 以下是您可能需要的指南：

jQuery：http: [//jquery.com/](http://jquery.com/)

跨域 AJAX：[http ://usejquery.com/posts/the-jquery-cross-domain-ajax-guide](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)

# java - 正则表达式：匹配除 8 位序列之外的所有单词

> ID：12049224
> 
> 赞同：0
> 
> 时间：2012-08-21T06:09:53.720
> 
> 标签：java, regex

我有一个输入字符串`"hello, dflk 1234 12345678, wod-=0, 87654321"`，我想获取所有“单词”的列表，这些“单词”不对应于正则表达式模式`"\d{8}"`（连续八位数字）。

我研究了 java.util.regex [api doc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/package-summary.html)，但是我无法找到将 **正则表达式 "\d{8}" 的否定**放在一起的方法。这是我想使用它的方式：

```
String input = "hello, dflk 1234 12345678, wod-=0, 87654321";
List<String> hitList = new ArrayList<>();
Pattern p = Pattern.compile(...?...); //<- how to define the regex pattern?
Matcher m = p.matcher(input);
while(m.find()) {
    hitList.add(m.group());
} 
```

我想在我的 hitList 中包含所有这些（基于上面的输入字符串）：

```
"hello,"  "dflk"  "1234"  ","  "wod-=0," 
```

您能建议一种定义该正则表达式模式的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:13:07.127

一种方法（这可能是最简单的）是过滤结果匹配列表。

另一个是负面的前瞻和更多的环顾：

```
(?<=^|\s|\d{8})(?!\d{8})\S+(?=$|\s|\d{8}) 
```

漂亮是不同的，我想。

快速 PowerShell 测试：

```
PS Home:\> [regex]::Matches('hello, dflk 1234 12345678, wod-=0, 87654321', '(?<=^|\s|\d{8})(?!\d{8})\S+(?=$|\s|\d{8})')|
select -exp Value
hello,
dflk
1234
,
wod-=0, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:26:07.680

我已经用空字符串替换了找到模式的源字符串，然后使用字符串拆分函数来获取模式以外的所有字符串

```
String test = "hello, dflk 1234 12345678, wod-=0, 87654321";
            test = test.replaceAll("\\d{8}", "");
            String result[] = test.split("\\ ");
            for (String value : result) {
                System.out.println(value);
            }
        } 
```

我已经测试了上述解决方案。
希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:29:17.240

这可能是您要查找的正则表达式（请记住，将 \ 放入字符串时需要对其进行转义）：

```
(?<!\s)(?!\d{8}(\s|$))\S+ 
```

# windows-8 - Share Contract in Metro app

> ID：12049227
> 
> 赞同：2
> 
> 时间：2012-08-21T06:10:13.373
> 
> 标签：windows-8

I am writing a metro app using javascript and HTML that implements the Share Contract. I want the users of my app to post data to Social networking sites like Facebook. I have configured the People app in my system, but i am not getting it(People app option) in the share pane in the charms bar. I am seeing the People app option in other apps that i have downloaded from the store.Any help in this regard would be highly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T06:59:38.333

Windows 8 Release Preview 的人物应用仅支持分享链接。Windows 8 RTM 的人物应用程序同时支持文本和链接共享。

分享文本：

```
request.Data.Properties.Title = "Share Text Example";
//Description is Optional
request.Data.Properties.Description = "A demonstration that shows how to share text.";
request.Data.SetText("Hello World!"); 
```

分享链接：

```
request.Data.Properties.Title = "Share Link Example";
//Description is Optional
request.Data.Properties.Description = "Demonstrates how to add a link (URI) to share.";
request.Data.SetUri(new Uri("http://www.google.com")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:43:31.337

共享列表中显示的应用程序取决于您共享的数据类型。每个目标应用程序都会通知 Windows 8 它能够接受哪些数据类型。Windows 将仅显示那些支持从源应用程序共享的数据类型的应用程序。例如，如果我只在全新安装系统上共享纯文本

```
request.data.setText("some plain text to share"); 
```

我只会看到邮件应用程序出现。

但是，如果我还共享一个 URI，我现在会看到 Mail 和 People 应用程序都出现了。

```
request.data.setText("some plain text to share");
request.data.setUri(new Uri("http://slickthought.net")); 
```

我怀疑您所做的任何 set*() 调用都不是 People 应用程序支持的数据类型之一。

# spring - Is it possible to use Spring without a configuration file?

> ID：12049228
> 
> 赞同：0
> 
> 时间：2012-08-21T06:10:16.010
> 
> 标签：spring, unit-testing, annotations

In my unit tests I want to configure Spring in code (API, Annotations) so they will not depend on bean configuration files.

Can this be done?

For example:

```
Class Dependency {}

Class A
{
    @AutoWired
    Dependency d;
} 
```

When testing A, I want to be able to create an instance of it with the Dependency member resolved, without having to use configuration files.

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:17:00.440

简而言之，是的，您可以使用[org.springframework.context.support.AbstractApplicationContext](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/AbstractApplicationContext.html)的任何实现来启动 spring 应用程序上下文。也就是说，如果您不想从 XML 文件加载定义，您可以使用[org.springframework.context.support.StaticApplicationContext](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/StaticApplicationContext.html)或[org.springframework.context.support.GenericApplicationContext](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/GenericApplicationContext.html)来启动上下文。

实例化上下文后，您可以开始使用 BeanFactory 创建 bean，无论是选择的默认上下文还是自定义上下文，都可以满足您的需求。

在实践中，它的工作量远不止于此。如果您只使用纯 XML 配置会更容易，但也可以做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:14:25.433

您可以使用[Java 配置](http://www.ibm.com/developerworks/webservices/library/ws-springjava/index.html)而不是 XML 配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:17:29.307

您可以使用[AnnotationConfigApplicationContext](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/index.html?org/springframework/context/annotation/AnnotationConfigApplicationContext.html)以编程方式创建应用程序上下文，而无需 bean 配置文件。

# sql - PLS 00103 when running Stored Procedure

> ID：12049232
> 
> 赞同：-1
> 
> 时间：2012-08-21T06:10:50.743
> 
> 标签：sql, plsql

When I compile, I get the errors like `PLS- 00103 "cur1" when expecting one of the following`

```
CREATE OR REPLACE PACKAGE BODY SSS IS

   PROCEDURE sample1(obj_CustomerID IN varchar2,
                    obj_DelUserID  IN varchar2,
                    cur1           OUT T_CURSOR1,
                    cur2           OUT T_CURSOR2)IS

  BEGIN

   TEMP_CUR1 cur1%ROWTYPE;

   TEMP_CUR2 cur2%ROWTYPE;

    OPEN cur1 FOR
      select distinct cf.fleet_id, cf.fleet_name, cf.customer_id
        from customer_fleet cf, vehicle_register vr, asset_register ar
       where cf.customer_id = vr.customer_id
         and cf.fleet_id = vr.fleet_id
         and vr.vehicle_id = ar.vehicle_id
         and vr.customer_id = ar.customer_id
         and vr.is_active = 'Y'
         and cf.is_active = 'Y';
         FETCH cur1
      into temp_cur1;
    close cur1;

    OPEN CUR2 FOR
      select TEMP_CUR1.fleet_id,
             TEMP_CUR1.fleet_name,
             TEMP_CUR1.customer_id
        from cur1
       where customer_id = obj_CustomerID;

    FETCH CUR2
      INTO TEMP_CUR2;
    CLOSE CUR2;

end Sample1;

END SSS; 
```

The error happens at lines

```
 TEMP_CUR1 cur1%ROWTYPE;    
   TEMP_CUR2 cur2%ROWTYPE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:22:10.170

变量声明必须发生在`IS`and之间`BEGIN`，而不是之后`BEGIN`：

```
PROCEDURE sample1(obj_CustomerID IN varchar2, 
                    obj_DelUserID  IN varchar2, 
                    cur1           OUT T_CURSOR1, 
                    cur2           OUT T_CURSOR2)
IS 

   TEMP_CUR1 cur1%ROWTYPE; 
   TEMP_CUR2 cur2%ROWTYPE; 

BEGIN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T22:19:35.700

使用`Strongly typed REF CURSOR`.

```
PROCEDURE sample1(obj_CustomerID IN varchar2, 
                    obj_DelUserID  IN varchar2, 
                    cur1           OUT T_CURSOR1, 
                    cur2           OUT T_CURSOR2)
IS 
   TYPE curr1 IS REF CURSOR RETURN T_CURSOR1%ROWTYPE;
   TYPE curr2 IS REF CURSOR RETURN T_CURSOR2%ROWTYPE;

   TEMP_CUR1 curr1; 
   TEMP_CUR2 curr2; 

BEGIN 
```

接着

```
 FETCH cur1
  INTO TEMP_CUR1 
```

和

```
FETCH cur2
 INTO TEMP_CUR2 
```

# iphone - UIPopoverController 中的 UINavigationController：设置标题

> ID：12049241
> 
> 赞同：1
> 
> 时间：2012-08-21T06:11:49.493
> 
> 标签：iphone, ios, uinavigationcontroller, uipopovercontroller

我正在尝试在 a 中显示 a `UINavigationController`，`UIPopoverController`但由于某种原因我无法设置标题。

```
SearchViewController *searchView = [[[SearchViewController alloc] init] autorelease];

UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:searchView];
[popover presentPopoverFromBarButtonItem:_searchBarButton permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

我尝试在`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Change the title
    UILabel *label = [[[UILabel alloc] initWithFrame:CGRectZero] autorelease];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont boldSystemFontOfSize:20.0];
    label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
    label.textAlignment = UITextAlignmentCenter;
    label.textColor = [UIColor whiteColor];
    label.text = @"Print / Email";
    [label sizeToFit];
    self.navigationItem.titleView = label;
}
return self;
} 
```

我也尝试将它设置在`- (void)viewDidLoad`

```
- (void)viewDidLoad
{
[super viewDidLoad];

self.contentSizeForViewInPopover = CGSizeMake(320.0, 250.0f);

self.navigationItem.title = @"Print / Email";
self.title = @"Print / Email";
} 
```

但是在任何情况下标题都不起作用，我还是做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T06:18:12.477

**编辑**在 UINavigationController 广告中添加您的 SearchViewController 控制器，在 UIPopoverController 中像这样：

```
SearchViewController *searchView = [[[SearchViewController alloc] init] autorelease];
UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:searchView];
UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:navController];
[popover presentPopoverFromBarButtonItem:_searchBarButton permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

现在在 SearchViewController 的 viewDidLoad 方法中：

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  self.title = @"Print / Email";
} 
```

请参阅[setting-the-title-of-a-uipopovercontroller](https://stackoverflow.com/questions/2617409/setting-the-title-of-a-uipopovercontroller?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:37:07.710

尝试用这种方式显示弹出框控制器

```
SearchViewController *searchView = [[[SearchViewController alloc] init] autorelease];
UINavigationController *navCont=[[UINavigationController alloc] initWithRootViewController:searchView];
UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:navCont];
[popover presentPopoverFromBarButtonItem:_searchBarButton permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:42:24.483

你可以试试这个：

```
SearchViewController *searchView = [[[SearchViewController alloc] init] autorelease];

UINavigationController *_nav = [[[UINavigationController alloc] initWithRoot.....:searchView] autorelease]; 
```

然后将 _nav 放入弹出框。

每个 UIViewController 都有自己的标签栏和导航，但你应该初始化它们。然后你可以正确地使用它们。

# android - moveTaskToBack and restore to front prevorious application

> ID：12049243
> 
> 赞同：0
> 
> 时间：2012-08-21T06:12:02.553
> 
> 标签：android

I have a small question. My application sometimes reorders to front when some my events fires, but i want after 5-10 seconds move it to back and restore previous application which was active before. How can i do it?

Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:17:51.480

您可以在后台启动工作线程并使用应用程序中指定的操作触发意图（您需要为必须恢复的应用程序指定意图操作）。

# java - Java 实例变量

> ID：12049249
> 
> 赞同：0
> 
> 时间：2012-08-21T06:12:33.147
> 
> 标签：java, instance, variable-assignment

我有这个问题

(i) 为以下项目确定合适的类别：新闻周刊、读者文摘、经济学人、国家地理

(ii) 举一个类 Hospital 的实例

所以我想的第一部分是这样的

```
class Magazine{ } 
```

第二部分可能是什么？可以这样吗？

```
Hospital worldgeneralhospital = new Hospital(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:21:49.053

是的，`new MyClass()`创建`MyClass`.

# list - 有没有更好的方法来选择 Scala 中 List 的第一个元素

> ID：12049261
> 
> 赞同：1
> 
> 时间：2012-08-21T06:13:55.887
> 
> 标签：list, scala

目前我用它来选择列表的第一个元素：

```
 def Get_Read_Key =
   {
      logger.entering (TAG, "Get_Read_Key")

      val Retval = if (Read_Key_Available)
      {
         val Retval = Keystrokes.head

         Keystrokes = Keystrokes.tail

         Retval
      }
      else
      {
         calculator.ui.IKey.No_Key
      } // if

      logger.exiting (TAG, "Get_Read_Key", Retval)
          Retval
   } // Get_Read_Key

   def Read_Key_Available = Keystrokes.size > 0 
```

但它看起来有点笨拙——尤其是双“Retval”。有没有更好的方法来做到这一点？还是仅仅是使用不可变列表的代价？

背景：该例程用于单元测试模拟类——返回类型已设置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T07:00:34.227

`Keystrokes`如果列表不为空，则以下代码将为您获取列表的第一个元素，`calculator.ui.IKey.No_Key`否则：

```
Keystrokes.headOption.getOrElse( calculator.ui.IKey.No_Key ) 
```

PS 重新分配`Keystrokes`给尾部是糟糕设计的明确标志。相反，您应该在算法中使用主题提到的*已经*存在的列表迭代功能。最有可能使用诸如`map`或`foreach`将解决您的问题的方法。

PPS 您违反了几个[Scala 命名约定](http://docs.scala-lang.org/style/naming-conventions.html)：

*   变量、值、方法和函数名称以小写开头
*   `camelCase`用于分隔单词而不是下划线。事实上，出于这些目的使用下划线是非常不鼓励的，因为 Scala 对该特定字符进行了特殊处理

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T06:25:56.057

您正在实现一个`Iterator`on a `List`，它已经在标准库中。

```
val it = Keystrokes.iterator
def Read_Key_Available = it.hasNext
def Get_Read_Key = if(it.hasNext) it.next() else calculator.ui.IKey.No_Key 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T06:21:56.553

您可以使用模式匹配：

```
Keystrokes match {
  case h::t => 
    KeyStrokes = t
    h
  case _ => 
    calculator.ui.IKey.No_key
} 
```

# javascript - 如何使用 jquery 在工具提示上显示 pdf 文件

> ID：12049267
> 
> 赞同：0
> 
> 时间：2012-08-21T06:14:42.837
> 
> 标签：javascript, jquery, tooltip

我有一个链接：

`<a href="pdf/testpdf.pdf">PDF</a>`

我想为此链接设置一个工具提示，并在工具提示中显示相同的 pdf 文件。

`testpdf.pdf`这意味着当鼠标悬停在链接上时，我想在工具提示中显示文件的内容。

我在谷歌中搜索过，但没有适合我的链接。

工具提示中有很多图像，文本模型。

我怎样才能做到这一点？

有人有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T06:38:47.987

显示 PDF 通常涉及启动浏览器插件，例如 Adob​​e Reader，它有自己的菜单栏、工具栏等。把它塞进一个像工具提示这样的小空间可能不太实用。

您最好渲染一个缩略图图像——也许为此使用服务器上的 PDF 库——并在工具提示中显示*它*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:34:33.097

我认为这需要浏览器有一个插件来显示 PDF 内联而不是下载它。一旦确保这一点，您可以将工具提示的目标设置为指向 PDF 的 URL。顺便说一句，您使用的是什么工具提示库？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:06:31.680

你可以试试[pdf.js](https://github.com/mozilla/pdf.js)

它将 PDF 文件渲染到画布上。

但在我看来这根本不是一个好的解决方案，当PDF很大时，将其加载到工具提示中需要一些时间。最好是在服务器上创建一个缩略图并将其显示为标准图像。 [这](http://www.deanblog.co.uk/article/10/upload-a-pdf-and-create-thumbnail-image-in-php)是使用 PHP 执行此操作的方法

# c - Apache 过滤器请求主机名比较不起作用

> ID：12049269
> 
> 赞同：0
> 
> 时间：2012-08-21T06:14:49.533
> 
> 标签：c, apache, filter, hostname

我是编写 apache 输出过滤器的新手，甚至更喜欢用 c 编写它们。我已经获取了一个示例过滤器（mod_substitute）源，并试图使其仅在请求针对特定主机时才起作用。出于我自己的原因，我需要将其作为编程功能而不是明智的配置。

我正在使用以下代码来试试这个：

```
request_rec *req = f->r;

ngf_module_ctx *ctx = f->ctx;

/* Test to see if this is a domain that needs optimization */
if (req->hostname != "localhost") {
    ap_pass_brigade(f->next, bb);
    return APR_SUCCESS;
} 
```

使用调试打印我看到 req->hostname 值确实显示为 localhost，但是比较本身失败。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:17:09.010

您正在使用指针相等运算符 ( `!=`) 来比较字符串。这是C，记住——你必须使用`strcmp`比较字符串之类的函数。

如果您以前没有使用过 C 语言，那么编写 Apache 模块可能不是一个好的开始。备份并首先熟悉该语言。

# javascript - 两个或多个脚本之间的函数访问

> ID：12049270
> 
> 赞同：-5
> 
> 时间：2012-08-21T06:14:49.753
> 
> 标签：javascript, jquery, html, function, scope

我有两个脚本，我需要在 script2 中使用 script1 函数。最好的方法是什么？使用原型访问更多脚本中的功能是否有任何简化。我正在使用 jquery。

脚本1

```
$(function(){
 function  process(){
// some code
}
}) 
```

脚本2

```
$(function(){

// I would like to use the process function here

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:18:30.477

您可以使用 javascript 函数作为变量。因此，只需重新阅读有关变量的相同问题的问题-[无法访问变量](https://stackoverflow.com/questions/12048863/unable-to-access-variable)

因此，只要这样做，您的函数就可以在全局范围内使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:22:28.570

示例.html

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <HTML>
    <HEAD>
    <TITLE> New Document </TITLE>
    <META NAME="Generator" CONTENT="EditPlus">
    <META NAME="Author" CONTENT="">
    <META NAME="Keywords" CONTENT="">
    <META NAME="Description" CONTENT="">
    </HEAD>
    <script type="text/javascript" charset="utf-8" src="Script1.js" ></script>
    <script type="text/javascript" charset="utf-8" src="Script2.js" ></script>
    <script>
    </script>
    <BODY onload='calling();'>
    </BODY>
    </HTML> 
```

脚本1.jc

```
function call(){
    alert("Hi i am called from script2");
} 
```

Scrip2.js

```
function calling(){
    call();
} 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:26:13.007

只需将函数声明移到就绪事件处理程序之外，这将使其全局可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:24:19.423

另一个想法：使用对象：

```
var Ob = {
   process: function(callback) {
     callback();
   }
} 
```

脚本1

```
$(function(){
 Ob.process(function(){
      ... // code
   });
}); 
```

脚本 2（做同样的事情）

```
$(function(){
 Ob.process(function(){
      ... //another code
   });
}); 
```

如果您使用相同的`process`功能（意味着相同的正文内容，在两个脚本中制作相同的东西）然后

```
var Ob = {
   process: function() {
     ...//put code
   }
} 
```

脚本1

```
$(function(){
 Ob.process();
}); 
```

脚本 2（做同样的事情）

```
$(function(){
 Ob.process();
}); 
```

# cuda - 对等内存访问引发异常

> ID：12049271
> 
> 赞同：0
> 
> 时间：2012-08-21T06:14:51.740
> 
> 标签：cuda, gpu, thrust

大家早上好

我想在学习推力时测试 p2p 内存访问。但是有一点不对劲。

测试代码如下：

```
#include <iostream>
#include <thrust/device_vector.h>
#include <thrust/transform.h>
#include <thrust/functional.h>
using namespace std;

void test(thrust::device_vector<int> &Vec)
{
    try{
    thrust::negate<int> op;
    thrust::transform(Vec.begin(),Vec.end(),Vec.begin(),op);
    }catch(thrust::system::system_error &e)
    {
            cerr<<"Something wrong: "<<e.what()<<endl;
    }
}
int main()
{
    cudaSetDevice(0);
    thrust::device_vector<int> Vec(5);
    for(int i=0;i<5;i++)
    {
            Vec[i]=i;
            cout<<i<<" ";
    }
    cout<<endl;

    int TID=1;
    cudaSetDevice(TID);
    cudaDeviceEnablePeerAccess(0,0);
    test(Vec);
    for(int i=0;i<5;i++)
            cout<<Vec[i]<<" ";
    cout<<endl;
    return 0;  
} 
```

我执行这段代码，它给了我错误信息。

```
terminate called after throwing an instance of 'thrust::system::system_error'
  what():  invalid device pointer
Aborted 
```

它怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:43:07.073

我认为这取决于您的设备是否支持统一寻址，否则您必须先从 GPUdirect 调用 cudaPeerRegister 才能从其他 GPU 访问内存。

您可以使用第二台设备上的 cudaDeviceCanAccessPeer() 进行检查。您也可以调用 cudaGetDeviceProperties() 并检查统一地址字段。

PS。我刚刚在具有 4 个 Tesla S2050 GPU 的机器上检查了您的代码，对我来说 cudaDeviceCanAccessPeer() 返回 0，因此直接访问不起作用..

# git-extensions - 找不到标签信息

> ID：12049272
> 
> 赞同：5
> 
> 时间：2012-08-21T06:14:56.890
> 
> 标签：git-extensions

我在 Git Extensions 中使用“创建标签”命令，在那里选择“创建注释标签”，输入一些文本作为注释，标签名称例如“Tag01”。后来我可以看到一个标签名称“Tag01”，但在任何地方都找不到注释。很容易找到在命令行中键入“git show Tag01”的注释，但是如何使用 Git Extensions UI 来做到这一点。

# javascript - 模数和余数 - Javascript

> ID：12049273
> 
> 赞同：1
> 
> 时间：2012-08-21T06:15:02.307
> 
> 标签：javascript, modulus

很抱歉在这么短的时间内提出了两个问题，哈哈，为什么 1%15、3%15、5%15 的余数为 0？我可能对数学生疏了，但我认为他们应该有余数。

可能是不必要的，但这里是代码：

```
for (i = 1; i <= 20; i++) {
    if (i % 15 === 0) {
        console.log("FizzBuzz");
    }
    else if (i % 3 === 0) {
        console.log("Fizz");
    }
    else if (i % 5 === 0) {
        console.log("Buzz");
    }
    else {
        console.log(i);
    }
} 
```

和输出：

```
**FizzBuzz** 
2
**FizzBuzz** 
4
**FizzBuzz**
Fizz 
7 
8 
Fizz 
Buzz 
11 
Fizz 
13 
14 
FizzBuzz 
16 
17 
Fizz 
19 
Buzz 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:19:53.153

正如您所猜测的，JavaScript 表达式`1%15`、`3%15`和`5%15`分别计算为 1、3 和 5。

但是，您提出的问题似乎与您的代码帖子无关，您在哪里使用`15%i`等等`i%3`。

另一方面，`15%1`、`15%3`和`15%5` *do*都计算为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:22:21.413

因为你问的不是 1%15、3%15、5%15... 你问的是 15%1、15%3、15%5。:)

澄清一下，这应该会给你你想要的结果。

```
for(i = 1; i <= 20; i++) {
   if(i%15 === 0) { 
      console.log("FizzBuzz"); 
   } else if(i%3 === 0) { 
      console.log("Fizz"); 
   } else if(i%5 === 0) { 
      console.log("Buzz"); 
   } else { 
      console.log(i); 
   }
} 
```

输出：

```
1
2
Fizz
4
Buzz
Fizz
7
8
Fizz
Buzz
11
Fizz
13
14
FizzBuzz
16
17
Fizz
19
Buzz 
```

# scroll - 容器在不支持触摸的设备中滚动 lwuit

> ID：12049276
> 
> 赞同：1
> 
> 时间：2012-08-21T06:15:41.450
> 
> 标签：scroll, lwuit, lwuit-container

我用 lwuit 开发诺基亚和黑莓。

`Container`我在不支持触摸的设备中滚动时遇到问题。我有一个`Container`由一些组件组成的组件（这些组件是单元格渲染的，但不在列表中）。触摸模式下的滚动工作正常，但在其他设备中滚动非常慢。

有人认识这个问题吗？

这是解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:40:46.187

将 container 的 focusable 属性设置为**true**。

```
containerObj.setFocusable(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:22:11.843

我认为您在表单末尾没有可聚焦的组件，如果是这种情况，您可以做的是最后在 lwuit 表单上添加一个虚拟的标签字段，然后将该标签的 .focusable 属性设置为 true。我想这应该可行。

# android - 如何在我的 android 应用程序中显示泰卢固语字符

> ID：12049279
> 
> 赞同：4
> 
> 时间：2012-08-21T06:15:51.593
> 
> 标签：android

```
Typeface tf = Typeface.createFromAsset(this.getAssets(), "Tikkana.ttf");
System.out.println("8888 "+tf.getStyle());
System.out.println(tf);
yourName.setTypeface(tf); 
```

我正在使用上面的代码，但它不起作用。文本显示为一些矩形框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:50:34.390

尝试使用它。[http://codinglookseasy.blogspot.in/2012/08/localization-using-ttf-files.html](http://codinglookseasy.blogspot.in/2012/08/localization-using-ttf-files.html)

# ruby-on-rails - 将 Rails 3.x 应用程序部署到 Amazon EC2

> ID：12049280
> 
> 赞同：0
> 
> 时间：2012-08-21T06:16:10.527
> 
> 标签：ruby-on-rails, postgresql, amazon-ec2, amazon

我使用 Heroku 作为登台/测试服务器。对于生产，我计划部署到 EC2，最初在 1 个实例上，但部署应在需要时扩展到多个实例。快速搜索显示有像 Rubber 和 Chef 这样的 Web 工具，它们是为多 EC2 实例部署而设计的。但它们看起来并不容易掌握 - 至少乍一看。

我还在这里看到了一个简单的指南：http: [//boredwookie.net/index.php/blog/ruby-on-rails-3-passenger-mysql-on-amazon-ec2/](http://boredwookie.net/index.php/blog/ruby-on-rails-3-passenger-mysql-on-amazon-ec2/) 看起来更容易理解。但是我不确定如果我按照这些步骤在以后需要时扩展到多台服务器是多么容易或困难。

非常感谢这方面的任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:34:38.873

看看 Ruby Bitnami 堆栈。

[http://bitnami.org/stack/rubystack](http://bitnami.org/stack/rubystack)

有一个 AMI，在 EC2 中安装非常快。没有太多的绒毛。说到缩放，我不知道，但我想这是一个很好的起点。

# sql - 返回行集并在 SQL Server 的“IN”子句中设置变量

> ID：12049281
> 
> 赞同：2
> 
> 时间：2012-08-21T06:16:17.703
> 
> 标签：sql, sql-server-2008, tsql

我想使用 SQL Server`IN`运算符并将变量设置为列值。这可能吗？

我的代码是这样的：

```
DECLARE @SubkindId as tinyint;

SELECT NAME FROM SampleTable001 WHERE 
Id in (SELECT Id, @SubkindId = Subkind FROM SampleTable002)
ORDER BY Name; 
```

我的问题是：我想在内部选择语句中设置 @SubkindId 变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:17:30.640

## 可以做到吗？

在 SQL Server 中，您不能在同一语句中选择结果集*和SET 变量（尽管在 MySQL 中可以）。*对不起。但可能有另一种方法可以得到你想要的。不幸的是，你想要什么并不完全清楚。

假设您想要执行 SELECT 并同时将另一个值返回到变量中，您必须处理查询可以返回多行的问题，那么在这种情况下，您希望返回哪一个`@SubkindId`？

现在，我可能误解了，而不是尝试将列值拉*入*变量中，而是只想拉出与变量中已经存在的值`SubkindId` *匹配*的行（尽管您没有首先显示为其分配值，所以这似乎不太可能）。

**请确认是哪种情况并回答以上问题，我可以为您提供更多帮助。**

同时，我将尝试为您提供两种情况的答案。

首先，让我提一下，我建议不要使用`IN()`带有返回 ID 列表的子查询的语法。在我看来这是不好的做法，因为它通常表明该人并不真正知道如何正确 JOIN，并且一旦查询变得有点复杂，不仅该人，甚至最好的专业 SQL Server 查询编写器都可以获得失去了`(... WHERE x IN (SELECT ... WHERE y IN (SELECT ... WHERE z NOT IN (...)))`很快就会导致*什么严重的情况！？！？！？！*. 只需使用 JOIN，如果需要，还可以使用半连接（通过 EXISTS 子句引入）。

## 查询并返回值

如果您真正想要的是访问 SELECT 语句在执行连接时找到的值，它可能看起来像这样：

```
DECLARE @KindsAndSubkinds TABLE (
   Name varchar(100),
   SubkindId tinyint
);

INSERT @KindsAndSubkinds
SELECT
   T1.Name,
   T2.SubkindId
FROM
   dbo.SampleTable001 T1
   INNER JOIN dbo.SampleTable002 T2
      ON T1.Id = T2.Id

SELECT DISTINCT Name
FROM @KindsAndSubkinds
ORDER BY Name;

-- Now you can something with the `SubkindId`s in the @KindsAndSubkinds table variable. 
```

## 只查询

如果您真的只是想查询而不是返回值，我建议您这样做：

```
DECLARE @SubkindId as tinyint;
SET @SubkindId = 5;

SELECT
   T1.Name
FROM
   dbo.SampleTable001 T1
   INNER JOIN dbo.SampleTable002 T2
      ON T1.Id = T2.Id
WHERE
   T2.Subkind = @SubkindId
ORDER BY
   T1.Name; 
```

如果 SampleTable002 中有多行但您不希望它们出现在结果集中，则：

```
SELECT
   T1.Name
FROM
   dbo.SampleTable001 T1
WHERE
   EXISTS ( 
   -- This semi-join requires at least one row to exist
   -- but doesn't increase the row count
      SELECT *
      FROM dbo.SampleTable002 T2
      WHERE
         T1.Id = T2.Id
         AND T2.Subkind = @SubkindId
   )
ORDER BY
   T1.Name; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:17:56.833

像这样做：

```
DECLARE @SubkindId as tinyint

SELECT [NAME] 
FROM SampleTable001 
WHERE  Id in (SELECT Id 
              from SampleTable002
              WHERE Subkind=@SubkindId)
order by [Name] 
```

或通过使用`JOIN`

```
DECLARE @SubkindId as tinyint

SELECT [NAME] 
FROM SampleTable001 a 
        INNER JOIN  SampleTable002 b
          ON a.id = b.id
WHERE b.Subkind=@SubkindId
order by [Name] 
```

# python - 如何在 Python 中将转义字符串传递给 shell 脚本

> ID：12049290
> 
> 赞同：1
> 
> 时间：2012-08-21T06:16:57.007
> 
> 标签：python

我正在尝试创建一个 Python 脚本，该脚本依次运行 shell 脚本“js2coffee”以将一些 javascript 转换为咖啡脚本。

从命令行我可以运行它，然后再次获取咖啡脚本......

`echo "var myNumber = 100;" | js2coffee`

我需要做的是使用 Python 中的相同模式。

在Python中，我遇到了这样的事情：

```
command = "echo '" + myJavscript + "' | js2coffee"
result = os.popen(command).read() 
```

这有时有效，但存在与特殊字符（我认为主要是引号）相关的问题，而`myJavascript`. 必须有一个标准的方法来做到这一点。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:47:42.547

使用进程的输入流向其提供数据，这样您就可以避免使用 shell 并且不需要转义 javascript。此外，您不容易受到[shell 注入](https://www.golemtechnologies.com/articles/shell-injection)攻击；

```
pr = subprocess.Popen(['js2coffee'], 
                      stdin=subprocess.PIPE,  
                      stdout=subprocess.PIPE)
result, stderrdata = pr.communicate('var myNumber = 100;') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:00:27.383

subprocess 模块是要走的路：http: [//docs.python.org/library/subprocess.html#frequently-used-arguments](http://docs.python.org/library/subprocess.html#frequently-used-arguments)

请注意以下几点：

> 所有调用都需要 args，它应该是一个字符串或一系列程序参数。提供一系列参数通常是首选，因为它允许模块处理任何所需的参数转义和引用（例如，允许文件名中的空格）

# android - Android Samsung Galaxy Note 与切换键盘有关的问题

> ID：12049297
> 
> 赞同：1
> 
> 时间：2012-08-21T06:17:12.090
> 
> 标签：android, galaxy

我在用，

```
 InputMethodManager imm = ((InputMethodManager) getView().getContext().getSystemService(
            Context.INPUT_METHOD_SERVICE));
    getView().requestFocus();
    imm.toggleSoftInputFromWindow(getView().getWindowToken(),
            InputMethodManager.SHOW_FORCED, 0); 
```

在我的代码中打开/关闭键盘，但在三星 Galaxy NOTE 中，如果键盘以纵向模式存在，然后我切换到横向键盘会保持（它应该！），但切换回纵向模式键盘会消失，即使我使用 Inputmanager 来切换键盘。但是再次关闭屏幕然后打开键盘。

这种情况发生在第 3 方键盘的情况下。

在任何其他设备的情况下都会发生这种情况。

# iphone - 如何在 iphone 中连续调用 nsurlconnection 委托方法

> ID：12049304
> 
> 赞同：0
> 
> 时间：2012-08-21T06:17:46.503
> 
> 标签：iphone, json

嗨，在我的一个应用程序中。我必须连续多次向服务器（json服务器）发送请求。我的网址将如下所述

@"http://185.185.116.51/servername/serverjspfilesname.jsp?filterID=21&ticket=65675656565656567"

实际上我有很多过滤器ID（过滤器ID，您可以在顶部找到）。为了不断更改过滤器ID，我使用了如下所述的循环

```
for(int i=0;i<[appdelegate.listOfFiltersArray count];i++)
    {

        filtersDataModelObject=[[ListOfFiltersDataModel alloc]init];

        filtersDataModelObject=[appdelegate.listOfFiltersArray objectAtIndex:i];

       homescreenstring=[NSString stringWithFormat:@"http://%@/servername/serverjspfilesname.jsp?filterID=%@&ticket=%@",Ip,filtersDataModelObject.filterID,[storeData stringForKey:@"securityTicket"]];

        NSLog(@"url is %@",homescreenstring);

        NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:homescreenstring]];

        connection=[[NSURLConnection alloc]initWithRequest:request delegate:self];

        if(connection)
        {

            homeScreenResponseData=[[NSMutableData alloc]init];

        }
        else
        {

            NSLog(@"connection failed");
        }

    } 
```

实际上，在 for 循环中满足每个条件后，我必须连接服务器以使用 nsurlconnection 委托方法从服务器获取数据。但是在这里，在完全执行 for 循环之后，只有 nsurlconnection 委托方法使用从 appdelegate.listOfFiltersArray 数组获取的最后一个 filterid 执行。

但我想为每个 filterid 调用服务器。

如果有人知道，请让我知道。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:46:33.797

在 .h 文件中创建一个计数变量 int count。

```
 int count = 0 //in .m file 
```

现在使用这个方法：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
  //one request finished
  count ++;
  //request another using count
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:11:38.380

The solution that Prince proposed is not general as you will face the problem of defining the "filterid" for each request.

And what you are doing is a bad approach. Dont mix the web request with your business logic code.The web stuff should be handled by a separate file handling all the requests throughout the app. And that class will implement delegation.

For delegation you need to do the following. In your Network class header (Networkclass.h) add the protocol

```
@protocol NetworkControllerDelegate <NSObject>
-(void) UrlResponseRecieved :(NSData *)responseData;
-(void) UrlResponseFailed:(NSError *)error;
@end 
```

and in NetworkClass.m (implementation fie) do the following

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    if (receivedData != nil) 
    {
       if([delegate respondsToSelector:@selector(UrlResponseRecieved:)])
        [self.delegate UrlResponseRecieved:receivedData];
        [receivedData release];
        receivedData = nil;
    }
    [connection release];
} 
```

if you still get stuck you may refer to the following [What's wrong on following URLConnection?](https://stackoverflow.com/questions/706355/whats-wrong-on-following-urlconnection)

or you may read any asynchronous downloading tutorial first.

# meteor - 在流星中显示来自另一个数据库的数据

> ID：12049308
> 
> 赞同：2
> 
> 时间：2012-08-21T06:18:17.573
> 
> 标签：meteor

我想使用流星向用户显示数据。我在外部（jDBC 可访问）数据库中有这些数据。我想在数据库中查询相关记录并用流星显示。有没有关于如何做到这一点的例子，还是我完全认为方向错误？

问候， 马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:31:24.747

目前，meteor 只能连接到 mongodb 后端。从概念上讲，它没有理由不能连接到任何其他数据库，但到目前为止它还没有实现。

# c# - TPL 数据流在运行时中断 LinkTo()

> ID：12049311
> 
> 赞同：2
> 
> 时间：2012-08-21T06:18:33.350
> 
> 标签：c#, concurrency, task-parallel-library, dataflow, tpl-dataflow

我有一个`TransformManyBlock<Tin, Tout>`并且在运行时添加消费者（ActionBlocks）到`LinkTo(...)`.

1.  TransformManyBlock 是否是正确的数据流块来消费元素，转换它们，然后输出（与输入相同数量的元素输出）给多个消费者（每个链接到的消费者像广播一样消费相同的元素）？我故意不选择 BroadCastBlock，因为它似乎无法像 BufferBlock 一样转换元素。

2.  我想知道如何在运行时取消链接消费者（此处为 ActionBlocks）？据我所知，LinkTo() 似乎没有提供这样的功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T10:47:44.270

1.  `TransformManyBlock`是将输入上的一项转化为输出上的多项，与消费者数量无关。

    如果您想为每个目标分别执行转换，那么这正是`cloningFunction`in`BroadcastBlock`的用途。

    如果您想执行一次转换，然后向每个目标发送相同的对象，您可以将它们组合`TransformBlock`并`BroadcastBlock`链接在一起。该项目将由 转换`TransformBlock`，然后由 发送到所有目标`BroadcastBlock`。

2.  的返回值为[`LinkTo()`](http://msdn.microsoft.com/en-us/library/hh194692)：

    > `IDisposable`调用 时，将`Dispose`取消源与目标的链接。

    这正是您所需要的。只需存储返回的值`LinkTo()`，然后`Dispose()`在必要时存储它。

# java - 这是否意味着 Java Math.floor 非常慢？

> ID：12049314
> 
> 赞同：19
> 
> 时间：2012-08-21T06:18:41.163
> 
> 标签：java, performance, profiling, floor

我不太懂Java。

我正在编写一些优化的数学代码，我对我的分析器结果感到震惊。我的代码收集值，交错数据，然后根据它选择值。Java 的运行速度比我的 C++ 和 MATLAB 实现要慢。

我正在使用`javac 1.7.0_05` 我正在使用 Sun/Oracle JDK 1.7.05

在代码中存在一个执行相关任务的 floor 函数。 ![java math.floor 配置文件结果](../Images/932776203e2c51a5965fc1570f429f5e.png)

1.  有人知道解决此问题的典型方法吗？
2.  我注意到我的`floor()`函数是用名为`StrictMath`. `-ffast-math`Java有类似的东西吗？我期望必须有一种方法可以将 floor 函数更改为计算上更合理的东西，而无需自己编写。

    ```
    public static double floor(double a) {
        return StrictMath.floor(a); // default impl. delegates to StrictMath
    } 
    ```

**编辑**

所以有几个人建议我试着做一个演员表。我试过这个，walltime绝对没有变化。

```
private static int flur(float dF)
{
    return (int) dF;
} 
```

413742 铸地板功能

394675 数学地板

这些测试是在没有分析器的情况下运行的。努力使用分析器，但运行时间发生了巨大变化（15 分钟以上，所以我退出了）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T06:34:23.720

您可能想尝试一下[FastMath](http://commons.apache.org/math/apidocs/org/apache/commons/math/util/FastMath.html)。

这是一篇关于[Java 与 Javascript 中的数学性能的](http://www.redcode.nl/blog/2012/07/java-speed-of-math/)文章。关于为什么默认的数学库很慢，有一些很好的提示。他们正在讨论除 之外的其他操作`floor`，但我想他们的发现可以概括。我觉得很有趣。

**编辑**

根据[这个错误条目](http://bugs.sun.com/view_bug.do?bug_id=6908131)， floor 已在 7(b79)、6u21(b01) 中实现了纯 Java 代码，从而获得了更好的性能。[JDK 6](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/lang/StrictMath.java.html)中的 floor 代码仍然比[FastMath](http://commons.apache.org/math/apidocs/src-html/org/apache/commons/math/util/FastMath.html#line.3314)中的代码长一点，但可能不负责这种性能。降解。你用的是什么JDK？你能试试更新的版本吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T07:14:09.890

这是对您的假设的健全性检查，即代码实际上将 99% 的时间花在`floor`. 让我们假设您有 Java 和 C++ 版本的算法，它们产生的输出都是正确的。为了论证的目的，让我们假设两个版本调用等效`floor`函数的次数相同。所以时间函数是

```
t(input) = nosFloorCalls(input) * floorTime + otherTime(input) 
```

`floorTime`在平台上调用的时间在哪里`floor`。

现在，如果您的假设是正确的，并且`floorTime`在 Java 上的成本要高得多（大约需要 99% 的执行时间），那么您会期望 Java 版本的应用程序运行一个很大的因素（50 倍或更多）比 C++ 版本慢。如果您没有看到这一点，那么您的假设很可能是错误的。

* * *

如果假设不成立，以下是分析结果的两种替代解释。

1.  这是测量异常；即探查器不知何故弄错了。尝试使用不同的分析器。

2.  您的代码的 Java 版本中存在一个错误，导致它调用`floor`的次数比 C++ 版本的代码多很多。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-21T06:41:46.033

`Math.floor()`在我的机器上非常快，每次调用大约 7 纳秒，在一个紧密的循环中。（Windows 7、Eclipse、Oracle JDK 7）。我希望它在几乎所有情况下都非常快，如果它成为瓶颈，我会感到非常惊讶。

一些想法：

*   我建议在**没有运行探查器的情况下**重新运行一些基准测试。有时，分析器在检测二进制文件时会产生虚假的开销——尤其是对于`Math.floor()`可能被内联的小函数。
*   尝试几个不同的 JVM，你可能遇到了一个不起眼的错误
*   试试`FastMath`优秀的 Apache [Commons Math](http://commons.apache.org/math/)库中的课程，其中包括 floor 的新实现。如果它更快，我会感到*非常惊讶，但你永远不会知道。*
*   检查您没有运行任何可能干扰 Java 调用本机代码能力的虚拟化技术或类似技术（在一些`java.lang.Math`功能中使用，包括`Math.floor()`）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-21T06:28:43.340

首先：您的分析器显示您在 floor 函数中花费了 99% 的 cpu 时间。这并不表示地板很慢。如果你除了 floor() 什么都不做，那是完全理智的。但是，由于其他语言似乎更有效地实现了地板，因此您的假设可能是正确的。

我从学校知道，可以通过转换为整数/长整数来实现 floor 的幼稚实现（仅适用于正数，仅适用于负数）。那是语言不可知论者和 CS 课程中的某种常识。

这里有一些微型长凳。在我的机器上工作并支持我在学校学到的东西；）

```
rataman@RWW009 ~/Desktop
$ javac Cast.java && java Cast
10000000 Rounds of Casts took 16 ms

rataman@RWW009 ~/Desktop
$ javac Floor.java && java Floor
10000000 Rounds of Floor took 140 ms 
```

#

```
public class Cast/Floor {

    private static final int ROUNDS = 10000000;

    public static void main(String[] args)
    {
        double[] vals = new double[ROUNDS];
        double[] res = new double[ROUNDS];

        // awesome testdata
        for(int i = 0; i < ROUNDS; i++)
        {
            vals[i] = Math.random() * 10.0;
        }

        // warmup
        for(int i = 0; i < ROUNDS; i++)
        {
            res[i] = floor(vals[i]);
        }

        long start = System.currentTimeMillis();
        for(int i = 0; i < ROUNDS; i++)
        {
            res[i] = floor(vals[i]);
        }
        System.out.println(ROUNDS + " Rounds of Casts took " + (System.currentTimeMillis() - start) +" ms");
    }

    private static double floor(double arg)
    {
        // Floor.java
        return Math.floor(arg);
        // or Cast.java
        return (int)arg;
    } 
```

}

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-21T07:23:18.067

值得注意的是，监控方法需要一些开销，对于 VisualVM，这是相当高的。如果您有一个经常调用但执行很少的方法，则它可能会使用大量 CPU。例如，我曾经将 Integer.hashCode() 视为一个大人物。;)

在我的机器上，地板需要更少的 5.6 ns，但演员需要 2.3 ns。你可能想在你的机器上试试这个。

* * *

除非您需要处理极端情况，否则普通演员会更快。

```
// Rounds to zero, instead of Negative infinity.
public static double floor(double a) {
    return (long) a;
} 
```

* * *

```
public static void main(String... args) {
    int size = 100000;
    double[] a = new double[size];
    double[] b = new double[size];
    double[] c = new double[size];
    for (int i = 0; i < a.length; i++) a[i] = Math.random()  * 1e6;

    for (int i = 0; i < 5; i++) {
        timeCast(a, b);
        timeFloor(a, c);
        for (int j = 0; j < size; j++)
            if (b[i] != c[i])
                System.err.println(a[i] + ": " + b[i] + " " + c[i]);
    }
}

public static double floor(double a) {
    return a < 0 ? -(long) -a : (long) a;
}

private static void timeCast(double[] from, double[] to) {
    long start = System.nanoTime();
    for (int i = 0; i < from.length; i++)
        to[i] = floor(from[i]);
    long time = System.nanoTime() - start;
    System.out.printf("Cast took an average of %.1f ns%n", (double) time / from.length);
}

private static void timeFloor(double[] from, double[] to) {
    long start = System.nanoTime();
    for (int i = 0; i < from.length; i++)
        to[i] = Math.floor(from[i]);
    long time = System.nanoTime() - start;
    System.out.printf("Math.floor took an average of %.1f ns%n", (double) time / from.length);
} 
```

印刷

```
Cast took an average of 62.1 ns
Math.floor took an average of 123.6 ns
Cast took an average of 61.9 ns
Math.floor took an average of 6.3 ns
Cast took an average of 47.2 ns
Math.floor took an average of 6.5 ns
Cast took an average of 2.3 ns
Math.floor took an average of 5.6 ns
Cast took an average of 2.3 ns
Math.floor took an average of 5.6 ns 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-01T18:58:25.587

如果您的算法非常依赖 Math.floor（和 Math.ceil），那么它可能会成为一个令人惊讶的瓶颈。这是因为这些函数处理您可能不关心的边缘情况（例如负零和正零等）。只需看看这些函数的实现，看看它们实际上在做什么；那里有数量惊人的分支。

还要考虑 Math.floor/ceil 只接受一个双精度作为参数并返回一个双精度，这可能是您不想要的。如果您只想要一个 int 或 long，那么 Math.floor 中的一些检查根本就没有必要。

有些人建议简单地转换为 int，只要您的值为正数（并且您的算法不依赖于 Math.floor 检查的边缘情况），它就会起作用。如果是这种情况，简单的演员阵容是最快的解决方案（根据我的经验）。

例如，如果您的值可能是负数并且您想要一个浮点数的 int，您可以执行以下操作：

```
public static final int floor(final float value) {
    return ((int) value) - (Float.floatToRawIntBits(value) >>> 31);
} 
```

（它只是从强制转换中减去浮点数的符号位以使其对负数正确，同时防止“如果”）

以我的经验，这比 Math.floor 快得多。如果不是，我建议检查您的算法，或者您可能遇到了 JVM 性能错误（这不太可能）。

# java - 如何使用spring security进行用户角色管理？

> ID：12049319
> 
> 赞同：7
> 
> 时间：2012-08-21T06:19:11.933
> 
> 标签：java, spring, spring-security, user-roles

我需要为在线考试工具应用设计一个用户角色管理模块，系统中有几个用户（Admin，Moderator，Contributor，Examiner）。这些用户对系统具有不同的权限。我需要为用户访问系统使用 Spring 框架和 Spring Security。我如何使用这个模块的弹簧安全性。任何人都可以指导我找到一个好的教程，欢迎您的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T06:34:05.577

根据您的描述，我认为您可能正在查看`UserDetailsService`.
值得查看 Stephan Gerth 的*ZK 示例项目*，它集成了 Spring、Hibernate、自定义 Spring 安全性、ZK Ajax 等。[这里](http://www.zkoss.org/forum/listComment/10986)有公告帖子，其中包含指向源代码和[文档](http://switch.dl.sourceforge.net/project/zksample2/Documentation/zksample2-doc.pdf)的链接。我建议阅读第*13.2 章。Spring-Security*（和相关的），应该可以帮助您浏览源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T06:23:40.833

试试这个[Spring Authorization and Authentication](http://khangaonkar.blogspot.in/2011/04/spring-security-tutorial-1.html)。一个非常简单的初学者教程。

# javascript - 使用复选框内的值添加全选并取消选中所有选项

> ID：12049327
> 
> 赞同：0
> 
> 时间：2012-08-21T06:20:18.037
> 
> 标签：javascript, jquery, html

我正在尝试创建一个全选，取消选择所有选项，就像我们在电子邮件收件箱中看到的一组复选框一样。我为此添加了一个示例。我试图获得的工作模型是当我单击复选框时，它应该选择和取消选择具有特定值的组。此外，即使我们取消选中列表中的任何单个名称，它也应该取消选中主要的“全选”复选框。我添加了一个 jsfiddle，但它不能正常工作。

```
$(document).ready(function(){
    $("#selectAll").live("click",function(e){
        e.preventDefault();
        e.stopImmediatePropagation();
        var clickedValue=$(this).attr('class');
        clickedValue=clickedValue.replace("select", "");
        $("#modalEntity").attr("value", "group"+ clickedValue).attr("checked", true);      
    });
}); 
```

[http://jsfiddle.net/EBxSu/](http://jsfiddle.net/EBxSu/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:40:18.287

**更新**（*现场更改为 on & 一些重命名*）

首先，你不应该像这样拥有具有相同 ID 的元素：

```
<input id="modalEntity" class="entity1" type="checkbox" value="group1" name="India">India
<input id="modalEntity" class="entity2" type="checkbox" value="group1" name="UAE">UAE 
```

我将 jQuery 代码重写为：

```
 $(document).ready(function() {
    "use strict";
    $("input.select").on("click", function() {
        $(this).siblings().find("input.entity").prop("checked", $(this).is(":checked"));
    });

    $("input.entity").on("click", function() {
        var $entityGroup = $(this).siblings().andSelf();
        $(this).parent().siblings("input.select").prop("checked", $entityGroup.length === $entityGroup.filter(":checked").length);
    });
}); 
```

[.prop()](http://api.jquery.com/prop/)只能用于 jQuery 1.6 及更高版本。

我还稍微重写了你的 HTML，在这里查看更新的 jsFiddle：http: [//jsfiddle.net/sQVe/EBxSu/8/](http://jsfiddle.net/sQVe/EBxSu/8/)

如果我错过了什么，请发表评论，但我认为这就是你所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:42:07.813

我不明白你的解决方案，但这是一个。首先，保留具有共同属性的相似按钮组，例如`relation`，具有**child**值。然后保持该组的选择器/取消选择器具有相同的名称，但`relation`属性的值设置为**parent**。现在你必须

1.切换母亲状态时，切换所有相似子复选框的状态：

```
$("[relation=parent]").change(function() {
 name = $(this).prop('name');
  $("[relation=child][name="+name+"]").attr('checked',$(this).attr('checked'));
}); 
```

2.当孩子的状态被切换时，相应地切换母亲的状态：

```
$("[relation=parent]").change(function() {
 name = $(this).attr('name');
 $("[relation=child][name="+name+"]").attr('checked',$(this).attr('checked'));
});
$("[relation=child]").change(function() {
 name = $(this).attr('name');
 if ($(this).attr('checked') == false) {
   $("[relation=parent][name="+name+"]").attr('checked',false);
  }
 else {
   if ($("[name="+name+"][relation=child]:checked").length == $("[name="+name+"][relation=child]").length) {
     $("[name="+name+"][relation=parent]").attr('checked','true');
    }
   }
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:42:59.217

我只为国家这样做过。html:

```
<ul>
<li>
Country
<ul>
<input type="checkbox" id="selectAll" class="select1">Select/Deselect All Country
<li>
<input class="entity1 countries" type="checkbox" value="group1" name="India">India
<input class="entity2 countries" type="checkbox" value="group1" name="UAE">UAE
</li>
</ul>
</li>
<li>​ 
```

JavaScript：

```
$(document).ready(function(){
$("#selectAll").click(function(){
    if(!$('.countries').attr('checked'))
        $('.countries').attr('checked','checked');
    else
        $('.countries').removeAttr('checked');
});
$('.countries').click(function(){
    var allChecked = true;
    $('.countries').each(function(index, element){
       if(!$(element).attr('checked'))
           allChecked = false;
    });
    if(!allChecked)
        $("#selectAll").removeAttr('checked');        
    else
        $("#selectAll").attr('checked','checked');         
});
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:44:57.113

我更新了您的代码，删除了多个 ID 并处理了请求的各种场景（如果用户选择了一个孩子，则清除全选复选框）。还使用 .on() 而不是 .live() 更新了您的 jQuery。

jQuery 看起来像：

```
$(function(){
  $('.selectAll').on('click', function(evt){
    var group = $(this).attr('data-group'),
        isChecked = !!($(this).prop('checked'));
    $('input[value="' + group + '"]').prop('checked', isChecked);    
  })

  $('.entity').on('click', function(evt){
    var group = $(this).attr('value'),
        siblings = $('input[value="' + group + '"]'),
        isChecked = true;
    siblings.each(function(idx, el){
      if(!$(el).prop('checked')) {
        isChecked = false;
        return;
      }
    })
    $('.selectAll[data-group="' + group + '"]').prop('checked', isChecked);
  })
}) 
```

和更新的 HTML：

```
<ul>
<li>
Country
<ul>
<input type="checkbox" class="selectAll" data-group="group1">Select/Deselect All Country
<li>
<input class="entity" type="checkbox" value="group1" name="India">India
<input class="entity" type="checkbox" value="group1" name="UAE">UAE
...
</ul>
</li>
</ul> 
```

这是小提琴：http: [//jsfiddle.net/nBh4L/2/](http://jsfiddle.net/nBh4L/2/)

谢谢！杰克

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T06:48:49.347

我用更正确的解决方案更新了您的 JS fiddle：

[http://jsfiddle.net/EBxSu/2/](http://jsfiddle.net/EBxSu/2/)

我希望你指出一些你做错的事情，也许它会帮助你：

*   您错误地使用了 HTML“id”和 class“属性。ID 应该是唯一的。类不必是唯一的 - 我为您切换了它们。
*   除非您不希望选中该复选框，否则您无需阻止默认设置。
*   您在标签中有一个 with 文本 - 这是无效的。仅有的
*   可以存在于标签中 - 所以我将它移出
*   jQuery 不应该很复杂。它可以很简单。我稍微移动了 HTML（检查链接）。

您的 javascript 代码现在很简单：

```
$(document).ready(function() {
    $(".selectAll").click(function(e) {
        $(this).siblings('ul').find('input').attr('checked', $(this).is(":checked"));
    });
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T06:50:11.360

ID 意味着每个页面都是唯一的，但是忽略了您的代码的一些标记问题，我已经对其进行了编辑，使其按您的预期工作。[http://jsfiddle.net/xYWWM/5/](http://jsfiddle.net/xYWWM/5/)

```
$(document).ready(function() {
    $("#selectAll").live("click", function(e) {
        e.preventDefault();
        e.stopImmediatePropagation();
        var clickedValue = $(this).attr('class');
        clickedValue = clickedValue.replace("select", "");
        var checkboxes = $("#modalEntity[value=\"group" + clickedValue + "\"]");
        checkboxes.attr("checked", !checkboxes.attr("checked"));
}); 
```

});

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T06:56:02.113

**遵循本教程**

[http://viralpatel.net/blogs/multiple-checkbox-select-deselect-jquery-tutorial-example/](http://viralpatel.net/blogs/multiple-checkbox-select-deselect-jquery-tutorial-example/)

**另外，查看这个** [Fiddle 进行演示](http://jsfiddle.net/vijaysarin/nPXHK/5/)

**这是演示中使用的 HTML，**

```
<table border="1">
<tr>
    <th><input type="checkbox" id="selectall"/></th>
    <th>Cell phone</th>
    <th>Rating</th>
</tr>
<tr>
    <td align="center"><input type="checkbox" class="case" name="case" value="1"/></td>
    <td>BlackBerry Bold 9650</td>
    <td>2/5</td>
</tr>
<tr>
    <td align="center"><input type="checkbox" class="case" name="case" value="2"/></td>
    <td>Samsung Galaxy</td>
    <td>3.5/5</td>
</tr>
<tr>
    <td align="center"><input type="checkbox" class="case" name="case" value="3"/></td>
    <td>Droid X</td>
    <td>4.5/5</td>
</tr>
<tr>
    <td align="center"><input type="checkbox" class="case" name="case" value="4"/></td>
    <td>HTC Desire</td>
    <td>3/5</td>
</tr>
<tr>
    <td align="center"><input type="checkbox" class="case" name="case" value="5"/></td>
    <td>Apple iPhone 4</td>
    <td>5/5</td>
</tr>
</table> 
```

**这是演示的 jQuery**

```
$(function(){

    // add multiple select / deselect functionality
    $("#selectall").click(function () {
          $('.case').attr('checked', this.checked);
    });

    // if all checkbox are selected, check the selectall checkbox
    // and viceversa
    $(".case").click(function(){

        if($(".case").length == $(".case:checked").length) {
            $("#selectall").attr("checked", "checked");
        } else {
            $("#selectall").removeAttr("checked");
        }

    });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-21T07:03:17.033

在编写代码时，您应该注意几件事。
1\. 保持简单。
2.不要`id`多次使用
3.写一段html代码。嵌套`<ul><inputl><li>`不是一个好主意。

这是简化的解决方案，希望您能够理解并能够在以后在不同的情况下实施。

HTML：

```
<input type="checkbox" id="btn-select-all-1">Select/un-select All
<ul>
  <li><input type="checkbox" class="select1">item1</li>
  <li><input type="checkbox" class="select1">item1</li>
  <li><input type="checkbox" class="select1">item1</li>
  <li><input type="checkbox" class="select1">item1</li>
</ul> 
```

查询：

```
$(document).ready(function(){

    var btnSelectAll = $("#btn-select-all-1");
    var toSelect = $('.select1')

     //monitor the select_all checkbox for changes
     //and take appropriate action
    btnSelectAll.on('click', function(){
        if(btnSelectAll.is(":checked")){
          toSelect.attr("checked", "checked");
        }else{
          toSelect.removeAttr("checked");
        }
      });

}); 
```

jsfiddle：http: [//jsfiddle.net/U8aFU/](http://jsfiddle.net/U8aFU/)

更多帮助和链接：
[检查是否使用 jQuery 选中复选框 使用 jQuery](https://stackoverflow.com/questions/2204250/jquery-check-if-checkbox-is-checked)
[设置“选中”复选框？](https://stackoverflow.com/questions/426258/how-do-i-check-a-checkbox-with-jquery-or-javascript)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-21T08:56:34.453

由于您两次使用相同的 ID，我已经稍微修改了您的 HTML ...下面是工作脚本...

```
<ul><li>
Country
<ul>
<input type="checkbox" id="selectAll1" class="selectAll">Select/Deselect All Country
<li>
<input id="modalEntity1" class="entity" type="checkbox" value="group1"   name="India">India
<input id="modalEntity2" class="entity" type="checkbox" value="group1" name="UAE">UAE
</li>
</ul>
</li>

<li>Company<ul>
<input type="checkbox" id="selectAll2" class='selectAll'>Select/Deselect All Company</a>
<li>
<input id="modalEntity3" class="entity" type="checkbox" value="group2" name="Apple">Apple
<input id="modalEntity4" class="entity" type="checkbox" value="group2" name="Google">Google
</li>
</ul>
</li>
</ul>​ 
```

jQuery：

```
$(document).ready(function(){
  $('.selectAll').click(function(){
  var thisStatus = $(this).attr('checked');
    if(thisStatus=='checked'){        
       $(this).parent('ul').find('input[type="checkbox"]').attr('checked','checked');
    }
    else{
       $(this).parent('ul').find('input[type="checkbox"]').attr('checked',false);
    }
});

$('input.entity').click(function(){
var thisStatus = $(this).attr('checked');
    if(thisStatus!=='checked'){
       $(this).parent().parent('ul').find('input.selectAll').attr('checked',false);
    }
    else{
        $("input.entity:checked").each(function(){
        $(this).parent().parent('ul').find('input.selectAll').attr('checked','checked');   
    });
    }

    });
 });​ 
```

# php - PHP:PHPMailer 错误未显示

> ID：12049329
> 
> 赞同：0
> 
> 时间：2012-08-21T06:20:24.827
> 
> 标签：php, phpmailer, rfc5545

我正在使用 php mailer 发送 iCal 和一些 html 文本

这是我的代码

测试.php

```
<?php
include('/opt/lampp/htdocs/UI/ical/iCal.php');

$sendermail = "info@mysite.com";
$receivermail="myemail@gmail.com";
$subjectline="beep beeep testing 123 ical and html mail";

$msg="Some description of the event or meeting here.";
$icalarray = array("isCal"=>"true", "start"=>"20110326T160000", "end"=>"20110326T180000", "summary"=>"this will be a great meeting blabla", "location"=>"Next to the parking lot");

$hi = sendHtmlandIcal($receivermail,$subjectline, $msg,$sendermail, $icalarray );

echo $hi;

?> 
```

这是 iCal.php

```
<?php 
include('/opt/lampp/htdocs/UI/user/SMTPconfig.php');

/**
 * Send mail using phpmailer, for details make sure to read phpmailer http://www.tig12.net/downloads/apidocs/wp/wp-includes/PHPMailer.class.html and icalendar RFC  http://tools.ietf.org/html/rfc5545
 *
 * @param string $to Receiver of the mail
 * @param string $subject Subject of the email to be sent
 * @param string $message Message to be sent
 * @param string $sender Sender of the mail
 * @param array $ical for icalendar parameters, includes isCal, start, end, summary, location
 * @access public
 * @return string Returns success message if the mail was successfully accepted for delivery, error message otherwise
 */
function sendHtmlandIcal($to, $subject, $message, $sender, $ical)
{
    $mail = new PHPMailer();

    $body = $message; //just in case as this can cause errors
    $mail->AddAddress($to);
    $mail->Subject = $subject;  

    //send out icalendar if you request it
    if ($ical['isCal']=="true"):
        //icalendar format, alot more can be added
        $body="BEGIN:VCALENDAR
            VERSION:2.0
            METHOD:REQUEST
            BEGIN:VEVENT
            CREATED:".date('Ymd')."
            DTSTAMP:".date('Ymd//This')."
            UID:".date('Ymdhis')."
            SUMMARY:".$ical['summary']."
            ORGANIZER;RSVP=TRUE;CN=".$sender.";PARTSTAT=ACCEPTED;ROLE=CHAIR:mailto
             :".$sender."
            DTSTART;".$ical['start']."
            DTEND;".$ical['end']."
            LOCATION:".$ical['location']."
            DESCRIPTION:".$message."
            END:VEVENT
            END:VCALENDAR
            ";

        //manually setup headers so phpmailer does not break format and so that icalendar works
        $headers = "From: ".$sender."\n";
        $headers .= "Reply-To: ".$sender."\n";
        $headers .= "MIME-Version: 1.0\n";
        $headers .= "Content-Type: text/calendar; method=REQUEST; charset=utf-8\n";
        $headers .= "Content-Transfer-Encoding: 8bit\n";
        $headers .= "Content-class: urn:content-classes:calendarmessage\n";

        $mailerror="Mailer Error: " . $mail->ErrorInfo;
        $mailsuccess="Sent!";

       if(!$mail->Send($headers,$body)):
            return $mailerror;
       else:
            return $mailsuccess;
       endif;
    else:
        $mail->MsgHTML($body);
        if(!$mail->Send()):
            return $mailerror;
        else:
            return $mailsuccess;
        endif;
    endif;
}
?> 
```

排队`$mailerror="Mailer Error: " . $mail->ErrorInfo;`

我为错误信息定义了上面的行，但我没有收到任何错误信息

echo`$hi`仅打印`Mailer Error:`

请告诉我哪里做错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:24:55.510

那是因为你打电话`ErrorInfo`太早了。你应该使用`PHPMailer Exception`. 此外，您应该包装一个`try` `catch`块以获得更好的方法。

```
try {
    $mail->Send($headers,$body);
    return $mailsuccess;
} catch (phpmailerException $e) {
    return $e->errorMessage(); // error from PHPMailer
} catch (Exception $e) {
    return $e->getMessage(); // Other erros
} 
```

# javascript - jQuery/JavaScript - 根据浏览器的窗口高度和宽度自动剪切和格式化段落

> ID：12049333
> 
> 赞同：11
> 
> 时间：2012-08-21T06:20:48.167
> 
> 标签：javascript, jquery, html, css

假设我有一个非常长的内容页面，其中包含多个段落，这些段落无法在带有垂直滚动条的单个浏览器窗口中显示

```
<p>...very long sentence ...</p>
<p>...very long sentence ...</p>
<p>...very long sentence ...</p>
<p>...very long sentence ...</p> 
```

所以我想剪切段落并将它们格式化为多个页面，例如

```
<!-- page 1 -->
<p>...very long sentence ...</p>
<p>...very long </p><!-- the ending p tag is automatic inserted since the following text cannot be displayed -->

<!-- page 2 -->
<p>sentence ...</p>
<p>...very long sentence ...</p>
<p>...very long sentence ...</p> 
```

是否有用于此目的的现有脚本？

在极端情况下，段落可能包含图像，因此每行的高度可能会有所不同。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-24T05:26:05.803

有人用 jQuery 创建了显示/隐藏功能。

这可能会对您有所帮助。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Example: Show more, less using jQuery</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <style type="text/css">
        a.moreText
        {
            color: blue;
            cursor: pointer;
            padding-left: 5px;
            padding-right: 10px;
        }

        a.lessText
        {
            cursor: pointer;
            color: blue;
            display: none;
            padding-left: 5px;
            padding-right: 10px;
        }

        span.secondHalf
        {
            display: none;
        }
    </style>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            $("p").each(function () {
                SetMoreLess(this, 350, 20, " ... more", " ... less");
            });

            $("a.moreText").click(function () {
                $(this).hide();
                var pTag = $(this).parents("p.summary");

                $(pTag).find("a.lessText").show();
                $(pTag).find("span.secondHalf").show();
            });

            $("a.lessText").click(function () {
                $(this).hide();
                var pTag = $(this).parents("p.summary");

                $(pTag).find("a.moreText").show();
                $(pTag).find("span.secondHalf").hide();
            });
        });

        function SetMoreLess(para, thrLength, tolerance, moreText, lessText) {
            var alltext = $(para).html().trim();

            $(para).addClass("summary");        // this class is added to identify the p tag, when more/less links are clicked

            if (alltext.length + tolerance < thrLength) {
                return;
            }
            else {
                var firstHalf = alltext.substring(0, thrLength);
                var secondHalf = alltext.substring(thrLength, alltext.length);

                var firstHalfSpan = '<span class="firstHalf">' + firstHalf + '</span>';
                var secondHalfSpan = '<span class="secondHalf">' + secondHalf + '</span>';
                var moreTextA = '<a class="moreText">' + moreText + '</a>';
                var lessTextA = '<a class="lessText">' + lessText + '</a>';

                var newHtml = firstHalfSpan + moreTextA + secondHalfSpan + lessTextA;

                $(para).html(newHtml);
            }
        }
    </script>
</head>
<body>
    <div id="lipsum">

        <p>
            Integer consectetur, dui ut lobortis aliquet, leo est ullamcorper augue, id blandit
            metus libero eu leo. Pellentesque dui sapien, tempus ultricies ultricies nec, molestie
            at eros. Integer facilisis luctus libero quis accumsan. Suspendisse eu velit ac
            erat iaculis pellentesque vel mollis est. Cras ac erat vulputate augue tincidunt
            euismod a eu diam. Pellentesque habitant morbi tristique senectus et netus et malesuada
            fames ac turpis egestas. Nullam sed arcu lorem. Cras porta dui in lorem tempor dapibus.
            Ut magna metus, tincidunt et sodales pretium, aliquam ac ligula. Etiam at enim id
            enim rhoncus scelerisque. Fusce porta, arcu non malesuada consequat, massa lectus
            feugiat diam, aliquam convallis neque mauris eu urna. Nulla pellentesque eleifend
            lectus, vel sodales leo consequat vestibulum. Sed elementum, lorem ac mollis mattis,
            purus dolor interdum neque, ac rutrum nisl elit eu arcu. Curabitur risus arcu, suscipit
            dignissim hendrerit at, luctus nec mauris. Pellentesque accumsan euismod sem nec
            feugiat. Nullam faucibus gravida elit, nec facilisis lorem ullamcorper nec.
        </p>
        <p>
            Vestibulum tincidunt lacus sit amet justo blandit vehicula. In pretium sem quis
            ligula ultricies eget sodales velit mollis. Phasellus facilisis varius enim, non
            rutrum nulla scelerisque eu. Curabitur posuere quam eget dui dignissim sed placerat
            ante tincidunt. Suspendisse faucibus vulputate est quis feugiat. Nulla nec ante
            a enim molestie consectetur. In hac habitasse platea dictumst. Donec tincidunt lacinia
            pellentesque. Integer hendrerit ligula non nibh posuere pretium. Sed tincidunt tincidunt
            lectus, non consectetur est iaculis sit amet. Morbi vel lobortis ligula. Sed scelerisque
            varius interdum. In sollicitudin lorem et mauris luctus venenatis commodo nunc venenatis.
            Praesent vitae justo nisl.
        </p>
        <p>
            Nulla posuere ante vel quam dapibus fringilla. In elementum mi interdum nisl vehicula
            eu iaculis felis pretium. Ut id massa eget turpis gravida luctus et non nunc. Etiam
            viverra suscipit mauris quis scelerisque. Vestibulum tempor neque nisl, nec aliquam
            nibh. Quisque cursus faucibus libero sit amet placerat. Nulla id blandit ligula.
            Nullam aliquam dui at justo facilisis accumsan. Morbi vel arcu id mi mollis vestibulum.
            Praesent imperdiet, lectus eget adipiscing lobortis, urna enim vulputate lorem,
            et bibendum turpis arcu quis ligula. Donec ultricies sollicitudin imperdiet. Mauris
            a augue nulla. Donec sagittis est magna, sed scelerisque magna. Nam tincidunt, felis
            quis luctus sodales, orci ligula consequat massa, a pulvinar leo urna id dui. In
            sit amet augue est, et tincidunt metus. Quisque pellentesque, felis vel semper ullamcorper,
            leo nulla eleifend nunc, et suscipit massa tellus non tellus.
        </p>
        <p>
            Etiam accumsan, diam semper mattis tempus, sapien erat cursus dui, venenatis convallis
            metus lectus at arcu. Duis eget dolor nec metus laoreet aliquam. Nulla eu viverra
            massa. Vestibulum id urna ante, at aliquam augue. Cum sociis natoque penatibus et
            magnis dis parturient montes, nascetur ridiculus mus. Nulla risus felis, convallis
            at sagittis nec, fringilla in lacus. Integer at fermentum enim. Nullam lacinia eleifend
            nisi, laoreet porta nunc elementum ut. Nulla facilisi.
        </p>
        <p>
            Fusce id orci dui. In nec tempor nulla. Fusce commodo cursus orci in feugiat. Fusce
            porttitor nulla sit amet arcu tempor nec viverra risus tempor. Pellentesque felis
            lectus, pellentesque dignissim interdum sed, aliquam eu urna. In molestie leo vel
            massa dapibus imperdiet. Ut risus odio, rutrum eu congue sit amet, pellentesque
            quis urna. Duis tempor magna eu nisl volutpat eget pulvinar ante rutrum. Morbi quis
            dolor lorem, sit amet pellentesque mauris. Nunc tellus tellus, consequat a pharetra
            eu, cursus eu dolor. Aliquam non dolor mauris. Vestibulum vel purus eu massa sollicitudin
            sollicitudin vel in mauris. Proin tristique, mi sed tempus facilisis, odio elit
            faucibus turpis, sed aliquam risus elit in urna.
        </p>
        <p>
            Suspendisse et libero tincidunt mauris pharetra hendrerit at ac nisl. Cras mauris
            ante, sodales at scelerisque in, ullamcorper sed ipsum. Praesent est erat, mollis
            eget ullamcorper quis, mattis ac nisi. Pellentesque habitant morbi tristique senectus
            et netus et malesuada fames ac turpis egestas. Etiam vulputate, lacus non iaculis
            euismod, urna eros fringilla leo, a faucibus enim metus sed nibh. Etiam sagittis
            sodales porttitor. Aliquam consequat lacus sed enim scelerisque vel malesuada sapien
            viverra. Nulla massa metus, dignissim at consectetur sed, elementum nec massa. Phasellus
            cursus, odio sagittis molestie aliquam, est mi volutpat nibh, nec ullamcorper lacus
            mi sit amet nulla. Vivamus pellentesque, nulla ut pretium pretium, massa justo malesuada
            nibh, a adipiscing diam enim eget elit. Phasellus nec sapien id elit lobortis sodales
            vel ut neque. Sed ultricies tincidunt hendrerit. Vestibulum at velit diam, in sollicitudin
            eros. Cras tincidunt tincidunt orci, id hendrerit lorem porttitor a.
        </p>

        <p>
            Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus
            mus. Ut tortor quam, sodales a egestas ac, consectetur vitae eros. Suspendisse sit
            amet libero ac magna sagittis tincidunt. Quisque a risus orci. Etiam nec velit tortor,
            sed interdum nulla. Mauris nec lorem tortor, a dapibus mi. Sed posuere tempor magna
            vitae consequat.
        </p>
        <p>
            Nam ornare massa a velit congue ut con</p>
        <p>
            Nulla sed magna sed lectus imperdiet sagittis sed at nunc. Duis ornare tortor in
            eros rhoncus quis tempor justo congue. Proin ut suscipit augue. Sed consectetur
            arcu eget purus condimentum venenatis. Pellentesque dui orci, malesuada ut fringilla
            et, tincidunt quis est. Pellentesque ipsum metus, pulvinar sit amet accumsan non,
            imperdiet non enim. Donec leo lorem, pharetra at eleifend id, malesuada ut enim.
            Proin ligula risus, pretium eget adipiscing a, sagittis et tellus. Duis dictum tristique
            pretium. Sed mattis neque vitae augue aliquet dictum. Proin ut tempus velit. Donec
            tincidunt hendrerit risus, vel imperdiet libero interdum ut. Phasellus rutrum sem
            a urna semper et fermentum purus mattis. Aliquam euismod tempor dapibus. Maecenas
            ultrices magna at ligula ultrices at accumsan erat sagittis. Ut neque ante, scelerisque
            ut laoreet egestas, tempus ut erat.
        </p>
    </div>
</body>
</html> 
```

如果段落带有图像和其他 html 标签，请使用以下逻辑：

```
<div style="height:500px;overflow:hidden" id="blah">
Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.Hello Hello Hello.
</div>
<a href="#" id="showmore">Show more</a>
<script>
$("#showmore").live('click', function() {
   $("#blah").css('height','1000px');

});
</script> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T05:29:33.613

**编辑：（**演示*链接更新*）

看这个[**演示**](http://jsfiddle.net/akhurshid/bKhcy/)

**通过使用下面的代码，您可以根据需要对无限的段落进行分页。**

**jQuery：**

```
 $(document).ready(function(){

        //how much items per page to show
        var show_per_page = 5; 
        //getting the amount of elements inside content div
        var number_of_items = $('#content').children().size();
        //calculate the number of pages we are going to have
        var number_of_pages = Math.ceil(number_of_items/show_per_page);

        //set the value of our hidden input fields
        $('#current_page').val(0);
        $('#show_per_page').val(show_per_page);

        //now when we got all we need for the navigation let's make it '

        /* 
        what are we going to have in the navigation?
            - link to previous page
            - links to specific pages
            - link to next page
        */
        var navigation_html = '<a class="previous_link" href="javascript:previous();">Prev</a>';
        var current_link = 0;
        while(number_of_pages > current_link){
            navigation_html += '<a class="page_link" href="javascript:go_to_page(' + current_link +')" longdesc="' + current_link +'">'+ (current_link + 1) +'</a>';
            current_link++;
        }
        navigation_html += '<a class="next_link" href="javascript:next();">Next</a>';

        $('#page_navigation').html(navigation_html);

        //add active_page class to the first page link
        $('#page_navigation .page_link:first').addClass('active_page');

        //hide all the elements inside content div
        $('#content').children().css('display', 'none');

        //and show the first n (show_per_page) elements
        $('#content').children().slice(0, show_per_page).css('display', 'block');

    });​

    function previous(){

        new_page = parseInt($('#current_page').val()) - 1;
        //if there is an item before the current active link run the function
        if($('.active_page').prev('.page_link').length==true){
            go_to_page(new_page);
        }

    }

    function next(){
        new_page = parseInt($('#current_page').val()) + 1;
        //if there is an item after the current active link run the function
        if($('.active_page').next('.page_link').length==true){
            go_to_page(new_page);
        }

    }
    function go_to_page(page_num){
        //get the number of items shown per page
        var show_per_page = parseInt($('#show_per_page').val());

        //get the element number where to start the slice from
        start_from = page_num * show_per_page;

        //get the element number where to end the slice
        end_on = start_from + show_per_page;

        //hide all children elements of content div, get specific items and show them
        $('#content').children().css('display', 'none').slice(start_from, end_on).css('display', 'block');

        /*get the page link that has longdesc attribute of the current page and add active_page class to it
        and remove that class from previously active page link*/
        $('.page_link[longdesc=' + page_num +']').addClass('active_page').siblings('.active_page').removeClass('active_page');

        //update the current page input field
        $('#current_page').val(page_num);
    } 
```

**HTML：**

```
 <!-- the input fields that will hold the variables we will use -->
    <input type='hidden' id='current_page' />
    <input type='hidden' id='show_per_page' />

    <!-- Content div. The child elements will be used for paginating(they don't have to be all the same,
        you can use divs, paragraphs, spans, or whatever you like mixed together). '-->
    <div id='content'>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
        <p>Vestibulum consectetur ipsum sit amet urna euismod imperdiet aliquam urna laoreet.</p>
        <p>and so on....</p>
    </div>

    <!-- An empty div which will be populated using jQuery -->
    <div id='page_navigation'></div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T18:04:26.440

不久前，我创建了[pagify](https://gist.github.com/3516393)，一个 jQuery 插件来做到这一点。它通过将元素拆分为单词并逐步添加单词直到高度达到指定高度来检测页面高度。我给了它一些 CSS 让它看起来像下面演示中的页面，但你可以设置它的样式以使用 100% 的宽度和高度。你可以简单地调用它，`$('body').pagify(options);`默认选项如下

```
{
    'pageTag' : 'div', // the tag which surrounds each page
    'pageClass': 'page', // the class of the page tag
    'innerClass': 'page-inner', // the class of the inner page element
    'pageSize': 'A4', // a class added to the page so that the size can be defined by css
    'pageSizeClassPrefix': 'page-', // the prefix to the above class
    'pageOrientation': 'portrait', // not yet used, but could be used to flip width and height
    'splitElementClass': 'split-element' // elements which have been split across two pages are given this class
}; 
```

所以要使用 100% 的宽度和高度：

```
html, body, page-screen-size {
    width: 100%;
    height: 100%;
} 
```

和

```
$('body').pagify({
    pageSize : 'screen-size'
}); 
```

这是在行动：http: [//jsfiddle.net/nathan/nfHHE/](http://jsfiddle.net/nathan/nfHHE/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T09:52:15.850

据我了解，这与在线阅读器的工作方式非常相似，其中内容被格式化为不同的页面或幻灯片，其中的内容无关紧要，因为这将适应其容器。

为了实现您的目标，我推荐 CSS3 多列布局（请参阅[http://www.w3.org/TR/2001/WD-css3-multicol-20010118/](http://www.w3.org/TR/2001/WD-css3-multicol-20010118/)）

**CSS**

```
#your-container 
{ 
  width: 90%; 
  margin: 0 auto; 
  overflow: hidden; //Hide overflowing content
  padding: 20px 0; 
}

#div-inside-container //For padding and columns display purposes
{ 
  position: relative; 

  -moz-column-count: 1; 
  -webkit-column-count: 1; 
  column-count: 1; 

  -moz-column-width: 50em; 
  -webkit-column-width: 50em; 
  column-width: 50em; 

  -webkit-column-gap: 0; 
  -moz-column-gap: 0; 
  column-gap: 0; 
} 
```

**查询**

```
$(window).resize(function() {

    //Resize container
    $(div_content).height(Dimensions.TellMeHeight() - padding);

}); 
```

**请参阅示例和代码**：http: [//jsfiddle.net/GLbXX/1/](http://jsfiddle.net/GLbXX/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T05:09:07.710

你可以使用 jquery`accordion`控件，如果你有多个段落而不是你应该在手风琴中划分，它将提高页面的可读性和外观

[从这里阅读更多](http://jqueryui.com/demos/accordion/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T12:42:20.450

《金融时报》开发了一种用于多栏布局的 JavaScript 解决方案，特别关注复杂的（即类似报纸的）案例[FTColumnFlow](https://github.com/ftlabs/ftcolumnflow)。

如果您将容器设置为一列的宽度，然后进行一些分页，即通过 jQuery UI 选项卡，这可能是一个解决方案，可以满足最困难的情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T05:10:20.100

试试这个 jquery 插件 [jqPagination](http://beneverard.github.com/jqPagination/)或[jPagination](http://tympanus.net/jPaginate/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-29T16:44:14.193

Sugar.js 有一个很棒的 .truncate() 函数，可以根据你的规范裁剪文本

[http://sugarjs.com/api/String/truncate](http://sugarjs.com/api/String/truncate)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-29T14:42:06.853

我希望这段代码对你有所帮助。也许有些情况被忽略了，或者你可以找到更好的算法或者你可以优化它。这只是一种引导你的方式。

```
$(document).ready(function(){
    var current_page_height = $(window).innerHeight() - $("div.pagination").innerHeight();

    function createPages(page_height){
        var current_page_height = 0;
        var pages = [];

        var current_page = [];
        var cpt_page = 0;

        $("div.content").children().each(function(index, element){
            var el = $(element);
            el.hide();

            if(current_page_height + el.innerHeight() > page_height){
                var height_over = (current_page_height+el.innerHeight()) - page_height;
                var line_height_el = el.css("line-height").replace("px","")

                if( line_height_el < height_over && el.find("img").length == 0){
                    var number_line_to_remove = Math.round(height_over/line_height_el);
                    var number_line = el.innerHeight() / line_height_el;
                    var char_by_line = Math.floor(el.html().length / number_line);
                    var content_el = el.html();
                    var pointer_substr = (number_line - number_line_to_remove) * char_by_line;

                    while(content_el.charAt(pointer_substr) != " " && pointer_substr > 0){
                        pointer_substr--;
                    }

                    var new_element = $("<p>" + content_el.substr( pointer_substr, content_el.length-1) + "</p>");
                    el.html( content_el.substr(0, pointer_substr+1));
                    current_page.push(el);
                    el.after(new_element);
                    el = new_element;
                    el.hide();
                }

                pages[cpt_page] = current_page;
                current_page_height = 0;
                current_page = [];
                cpt_page++;
            }
            current_page.push( el );
            current_page_height += el.innerHeight();
        });

        if(current_page.length > 0){
            pages[cpt_page] = current_page;
        }

        return pages;
    }

    function displayPage(page_to_display){
        if( page_to_display >= 0 && page_to_display < pages.length){
            $(pages[page_to_display]).each(function(index, element){
                element.show();
            });

            $(pages[$("span.page").html()]).each(function(index,element){
                element.hide();
            });
            $("span.page").html(page_to_display);
        }
    }

    var pages = createPages(current_page_height);
    displayPage(0);

    $("span.next").click(function(){
       var page = new Number($("span.page").html());
       displayPage( page+1 );
    });

    $("span.prev").click(function(){
       var page = new Number($("span.page").html());
       displayPage( page-1 );
    });

}); 
```

[你可以在这里](http://jsfiddle.net/charlesjourdan/sfKwM/6/)找到一个例子

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-08-21T07:09:45.207

看看CSS 中的**:before**和**:after**伪元素（对不起，我不能更具体，我自己还在探索之路上）

# c++ - SetDllDirectory 未在此范围内声明-Netbeans 7.1

> ID：12049335
> 
> 赞同：0
> 
> 时间：2012-08-21T06:21:04.303
> 
> 标签：c++, compiler-errors, setdlldirectory

我在我编写的代码之一中使用 SetDllDirectory() 但是在编译项目时出现错误：

```
SetDllDirectory was not declared in this scope 
```

这是代码片段

```
void LoadDLLPath() {
wxString value;
if (regkeyExists) {
    if (regkey->HasValue("LibPath")) {
        regkey->QueryValue("LibPath", value);
        if (!value.empty()) {
            wxSetEnv("ImpressionLib", value);
            SetDllDirectory(value.c_str());
        }
    }

}
SetDllDirectory("C:\\Program Files\\Project\\ABCPROJECT\\lib");
wxSetEnv("ProjectPath", "C:\\Program Files\\Project\\ABCPROJECT\\lib");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T14:42:44.837

预处理器常量 _WIN32_WINNT 的值是多少？它在文件 WinBase.h 中定义，它可能会提供一些信息。

有关 SetDllDirectory 的 Microsoft 文档（[https://msdn.microsoft.com/en-us/library/windows/desktop/ms686203%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms686203%28v=vs.85%29.aspx)）说：

```
To compile an application that uses this function, define _WIN32_WINNT as 0x0502 
```

使用 Visual Studio，您还应该检查项目属性“平台工具集”是否设置为最小值“v100”。

# javascript - jQuery掩码输入不起作用

> ID：12049339
> 
> 赞同：-1
> 
> 时间：2012-08-21T06:21:28.253
> 
> 标签：javascript, jquery, jquery-ui, jquery-mask

任何人都可以为此提供帮助吗？

```
 $("#mainForm").validate({
    rules: {
        mytxtName:{required:true},
        txtPhone:{required:true}
    }               
});
    $("#txtPhoneID").mask("999-999-9999"); 
```

[http://jsfiddle.net/ssthil/RjE8s/3/](http://jsfiddle.net/ssthil/RjE8s/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:24:57.930

`mask`方法不是 jQuery 本身的一部分，它带有插件。

看看我的代码：http: [//jsfiddle.net/RjE8s/4/](http://jsfiddle.net/RjE8s/4/)

# spring - 未调用 processFormSubmission

> ID：12049340
> 
> 赞同：0
> 
> 时间：2012-08-21T06:21:29.383
> 
> 标签：spring

我是春天的新手。我正在创建一个简单的登录页面。但是没有调用 processFormSubmission()。但是 showForm() 正在工作。

```
public class LoginController extends SimpleFormController

{
    private LoginService loginService;

private String loginView;

public LoginService getLoginService() {
    return loginService;
}

public void setLoginService(LoginService loginService) {
    this.loginService = loginService;
}

public String getLoginView() {
    return loginView;
}

public void setLoginView(String loginView) {
    this.loginView = loginView;
}

public LoginController() {
    setBindOnNewForm(true);
}
@Override
protected ModelAndView processFormSubmission(HttpServletRequest request,
        HttpServletResponse response, Object command, BindException errors)
        throws Exception 
{
    TraceUser tr = (TraceUser) command;
    System.out.println(tr);
    //loginService.
    return super.processFormSubmission(request, response, command, errors);
}
@Override
protected ModelAndView showForm(HttpServletRequest request,
        HttpServletResponse response, BindException errors)
        throws Exception {
    ModelAndView mav = new ModelAndView();
    mav.addObject("traceUser", new TraceUser());
    mav.setViewName(getLoginView());
    return mav;
} 
```

}

请帮助我了解如何进一步处理 ModelAndView 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:41:49.017

首先，`Controller`API 的使用已被搁置，取而代之的是新的基于注解的控制器（参见`@RequestMapping`注解），并且类似的类`SimpleFormController`已经被弃用了很长一段时间。

但是，为了回答您的问题，我假设您的表单没有声明`method="post"`，并且默认情况下，SFC 只会将 POST 请求视为表单提交（请参阅参考资料`isFormSubmission()`中的方法`AbstractFormController`）。是这样吗？

# android - 为什么 TypedArray.getIndexCount() 总是返回 0

> ID：12049341
> 
> 赞同：3
> 
> 时间：2012-08-21T06:21:42.410
> 
> 标签：android

```
<!--attrs.xml-->
<resources>
    <declare-styleable name="View2">  
        <attr name="textColor" format="color"/>  
        <attr name="textSize" format="dimension"/>  
    </declare-styleable> 
</resources>
<!--styles.xml-->
<resources>
    <style name="View2">
        <item name="textColor">#ffffffff</item>
        <item name="textSize">22dip</item>
    </style>
</resources>
<!--the View2 class defined-->
public View2(Context context, AttributeSet attrs) {
    super(context, attrs);   
        TypedArray array = context.obtainStyledAttributes(attrs, R.styleable.View2);
    final int len =array.Length();
        final int N =array.getIndexCount();//why N==0,because i initialize in styles.xml
}
<!--the callback method,like in Activity.onCreate(..)-->
@Override 
public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    View2 v = new View2(this,null);
} 
```

我在attrs.xml中声明了一个styable name="View2"，然后我在styles.xml中初始化了两个attrs，然后在TypedArray中获取了Style，这是一个问题，为什么N==0，因为我初始化了这两个attrsin 样式.xml

# c# - C# 访问 HTML 页面中 PHP 的返回值

> ID：12049347
> 
> 赞同：0
> 
> 时间：2012-08-21T06:21:58.930
> 
> 标签：c#, php, html, webrequest

在 ac# 项目中，我将**WebRequest**发送到**php**网站，该网站获取值并使用 select 语句来查询数据库并返回**HTML**页面。由于该查询只返回一个值，因此我需要将此值分配给我的 c# 代码。

返回的 HTML 页面的 body-tag 的来源（以及我的 c# 中的 StreamReader）如下所示：

```
<table border='1'>
    <tr><td>ValueINeed</td></tr>
</table> 
```

如何访问其中的值以便将其分配给我的 c# 代码中的字符串？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:27:45.477

如果您也是 PHP 代码的作者，我建议您制作另一个返回 json 或其他内容的页面，这样您就可以避免解析 HTML。

但如果这真的是你所坚持的，我建议你看看[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。[这是 StackOverflow 上的另一个关于如何使用 Html Agility Pack 的问题。](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:27:18.847

如果结果始终相同，您可以拆分字符串或使用正则表达式。如果没有，您可以使用 html 解析器：[http ://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

# json - 将 json 发布到 webapi 时发生错误：Access-Control-Allow-Origin 不允许 Origin null

> ID：12049351
> 
> 赞同：2
> 
> 时间：2012-08-21T06:22:15.750
> 
> 标签：json, cross-domain, azure-storage

我正在尝试将 json 数据发布到服务器。我正在使用 Visual Studio 2012 RC 和 windowsazure 来托管 Web 应用程序。在发布时出现以下错误：

1.  选项 http:// *** .azurewebsites.net/api/Child 405（不允许的方法）jquery-1.7.1.js:8102

2.  XMLHttpRequest 无法加载 http:// *** .azurewebsites.net/api/Child。Access-Control-Allow-Origin 不允许 Origin null。

我的客户端代码是：

```
 function PostChild() {                  
        var Chld = {};            
        Chld.Child_FirstName = $("#Child_FirstName").val();
        Chld.Child_LastName = $("#Child_LastName").val();
        Chld.Child_Age = $("#Child_Age").val();          
        var createurl = "http://*.azurewebsites.net/api/Child";                      
        $.ajax({
            type: "POST",
            url: createurl,
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(Chld),       
            statusCode: {
                200: function () {
                    $("#txtmsg").val("done");
                    alert('Success');
                }
            },
            error:
                function (res) {
                    alert('Error');
                    $("#txtmsg").val("error" + " "
                    + res.status + " " + res.statusText);
                }
        });
    } 
```

我的服务器端代码是：

```
 public HttpResponseMessage PostChild(Child child)
    {

        if (ModelState.IsValid)
        {
            db.Children.Add(child);
            db.SaveChanges();

            HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, child);
            response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = child.ChildID }));
            return response;
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }
    } 
```

请帮帮我

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:25:07.510

错误是由于 CORS（跨源资源共享）造成的。默认情况下，网页无法调用页面来源域以外的域上的服务 (API)。这是一种避免跨站点伪造攻击等的安全措施。

要解决它，请遵循本教程：

[http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx)

# c++ - 确定向量中频率最高的 char 元素 ?

> ID：12049352
> 
> 赞同：2
> 
> 时间：2012-08-21T06:22:19.163
> 
> 标签：c++, algorithm, vector

我正在尝试确定以字符为元素的向量中最常见的字符。

我正在考虑这样做：

*   循环遍历向量并创建一个映射，其中键是向量中的唯一字符。相应的值将是该字符频率的整数计数。
*   在我浏览完向量中的所有元素后，地图将包含所有字符频率。因此，我必须找到哪个键具有最高值，从而确定向量中最常见的字符。

不过，这似乎很令人费解，因此我想知道是否有人可以建议这种方法在性能/良好编码方面是否被认为是“可接受的”

**这可以以更好的方式完成吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T06:34:31.623

如果您只使用常规的 ascii 字符，则可以使解决方案更快一些 - 使用大小为 256 的数组，而不是使用映射，并计算数组单元格中具有给定代码 'x' 的字符的出现次数`count[x]`。这将从您的解决方案中删除一个对数（256），从而使其更快一些。我不认为在优化这个算法方面可以做更多的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:37:25.147

对一个字符向量进行排序，然后对其进行迭代以寻找最大运行长度似乎比使用 map 方法快 5 倍（使用下面相当不科学的测试代码作用于 16M 字符）。从表面上看，这两个函数的执行应该彼此接近，因为它们的执行时间为 O(N log N)。然而，排序方法可能受益于就地向量排序的[分支预测](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)和[移动语义。](https://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me)

结果输出为：

```
Most freq char is '\334', appears 66288 times.
usingSort() took 938 milliseconds
Most freq char is '\334', appears 66288 times.
usingMap() took 5124 milliseconds 
```

代码是：

```
#include <iostream>
#include <map>
#include <vector>
#include <chrono>

void usingMap(std::vector<char> v)
{
    std::map<char, int> m;
    for ( auto c : v )
    {
        auto it= m.find(c);
        if( it != m.end() )
            m[c]++;
        else
            m[c] = 1;
    }

    char mostFreq;
    int count = 0;
    for ( auto mi : m )
        if ( mi.second > count )
        {
            mostFreq = mi.first;
            count = mi.second;
        }

    std::cout << "Most freq char is '" << mostFreq << "', appears " << count << " times.\n";
}

void usingSort(std::vector<char> v)
{
    std::sort( v.begin(), v.end() );
    char currentChar = v[0];
    char mostChar = v[0];
    int currentCount = 0;
    int mostCount = 0;
    for ( auto c : v )
    {
        if ( c == currentChar )
            currentCount++;
        else
        {
            if ( currentCount > mostCount)
            {
                mostChar = currentChar;
                mostCount = currentCount;
            }
            currentChar = c;
            currentCount = 1;
        }
    }

    std::cout << "Most freq char is '" << mostChar << "', appears " << mostCount << " times.\n";
}

int main(int argc, const char * argv[])
{
    size_t size = 1024*1024*16;
    std::vector<char> v(size);
    for ( int i = 0; i < size; i++)
    {
        v[i] = random() % 256;
    }

    auto t1 = std::chrono::high_resolution_clock::now();
    usingSort(v);
    auto t2 = std::chrono::high_resolution_clock::now();
    std::cout
        << "usingSort() took "
        << std::chrono::duration_cast<std::chrono::milliseconds>(t2-t1).count()
        << " milliseconds\n";
    auto t3 = std::chrono::high_resolution_clock::now();
    usingMap(v);
    auto t4 = std::chrono::high_resolution_clock::now();
    std::cout
        << "usingMap() took "
        << std::chrono::duration_cast<std::chrono::milliseconds>(t4-t3).count()
        << " milliseconds\n";
    return 0;
} 
```

# python - python中的自执行函数

> ID：12049356
> 
> 赞同：11
> 
> 时间：2012-08-21T06:22:40.223
> 
> 标签：python, python-2.7

我偶尔`(lambda x:<code>)(<some input>)`在 python 中使用，以保持我的命名空间（在全局命名空间或其他地方）的清洁度。lambda 解决方案的一个问题是，就其可能包含的内容而言，它是一种非常有限的构造。

注意：这是javascript编程的习惯

这是保留命名空间的推荐方法吗？如果是这样，是否有更好的方法来实现自执行功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T06:43:13.917

对于只在特定函数B中调用的函数A，可以在B中定义A，我认为命名空间不会被污染。例如，

代替 ：

```
def a_fn():
    //do something
def b_fn():
    //do something
def c_fn():
    b_fn()
    a_fn() 
```

你可以：

```
def c_fn():
    def a_fn():
        //do something
    def b_fn():
        //do something
    b_fn()
    a_fn() 
```

虽然我不确定它是否是 pythonic 方式，但我通常会这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-04-11T07:27:06.187

关于问题的后半部分

> 有没有更好的方法来实现自执行功能？

标准方式`(<function-expression>)()`在 Python 中是不可能的，因为没有办法在不破坏 Python 基本语法的情况下将多行块放入括号中。尽管如此，Python 确实认识到需要将函数定义用作表达式并提供[装饰器 (PEP318)](https://www.python.org/dev/peps/pep-0318/)作为替代方案。PEP318 对此问题进行了广泛的讨论，以防有人想阅读更多内容。

有了装饰器，就像

```
evalfn = lambda f: f()

@evalfn
def _():
    print('I execute immediately') 
```

尽管在语法上大不相同，但我们将看到它实际上是相同的：函数定义是匿名的并用作表达式。

Using decorator for self-excuting functions is a bit of overkill, compared to the let-call-del method shown below. However, it may worth a try if there are many self-execution functions, a self-executing function is getting too long, or you simply don't bother naming these self-executing functions.

```
def f():
    print('I execute immediately')
f()
del f 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T06:42:22.000

你不这样做。它在 JavaScript 中很好，但在 Python 中，您既没有轻量级语法，也不需要它。如果您需要函数范围，请定义一个函数并调用它。但很多时候你不需要一个。您可能需要将代码拆分为多个函数以使其更易于理解，但无论如何，它的名称都会有所帮助，并且它可能在多个地方有用。

此外，不必担心向命名空间添加更多名称。Python 与 JavaScript 不同，具有适当的命名空间，因此您在模块范围内定义的助手默认情况下在其他文件中不可见（即，除非导入）。

# iphone - matchTemplate opencv 不工作，如 opencv 文档中所示

> ID：12049358
> 
> 赞同：0
> 
> 时间：2012-08-21T06:22:45.700
> 
> 标签：iphone, objective-c, c, opencv, matchtemplate

我正在努力解决这个问题，因为在我从相机捕获的图像中，我需要找到一些模式的存在和位置。

为此我发现使用`matchTemplate`opencv的方法。我使用了opencv示例中使用的图像并编写了代码，但结果不同。

[http://opencv.itseez.com/doc/tutorials/imgproc/histograms/template_matching/template_matching.html](http://opencv.itseez.com/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)

这是告诉我们有关 matchTemplate 的链接。

当我实现它时，它显示了结果：-

![在此处输入图像描述](../Images/400f3015c973c9ab20852bb2cdab2ec4.png)

我的代码如下： -

```
-(void)matchPatchNet
{
    IplImage    *res;
    CvPoint     minloc, maxloc;
    double      minval, maxval;
    int         img_width, img_height;
    int         tpl_width, tpl_height;
    int         res_width, res_height;

    NSString *pathPatron = [[NSBundle mainBundle] pathForResource:@"timage" ofType:@"jpg"];

    UIImage *tim = [UIImage imageWithContentsOfFile:pathPatron];
    NSString *pathPatron2 = [[NSBundle mainBundle] pathForResource:@"simage" ofType:@"jpg"];

    UIImage *tim2 = [UIImage imageWithContentsOfFile:pathPatron2];

    IplImage *img = [self CreateIplImageFromUIImage:tim2];//

    IplImage *tpl = [self CreateIplImageFromUIImage:tim];
    cv::Mat forground1 = [tim2 CVMat];

    cv::Mat forground2 = [tim CVMat];
    img_width  = img->width;
    img_height = img->height;
    tpl_width  = tpl->width;
    tpl_height = tpl->height;
    res_width  = img_width - tpl_width + 1;
    res_height = img_height - tpl_height + 1;    
    res = cvCreateImage( cvSize( res_width, res_height ), IPL_DEPTH_32F, 1 );

    cvMatchTemplate( img, tpl, res, CV_TM_CCOEFF_NORMED );

    UIImage *ipala=[self UIImageFromIplImage:res];
    cv::Mat forground3 = [ipala CVMat];
    cv::normalize(forground3, forground3, 0, 1, cv::NORM_MINMAX, CV_8UC1);

    cvMinMaxLoc( res, &minval, &maxval, &minloc, &maxloc, 0 );    

    cvRectangle( img, 
                cvPoint( maxloc.x, maxloc.y ), 
                cvPoint( maxloc.x + tpl_width, maxloc.y + tpl_height ),
                cvScalar( 0, 255, 0, 0 ), 1, 0, 0 ); 
    /* display images */
    self.imageView.image = [self UIImageFromIplImage:img]; 
    cvReleaseImage(&img);
    cvReleaseImage(&tpl);
    cvReleaseImage(&res);
} 
```

请告诉我我做错了什么。请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T10:36:58.707

我强烈建议您使用 C++ 接口和当前文档，您可以在此处找到：[OpenCV v2.4.2 文档](http://docs.opencv.org/)

在此处获取适用于 iOS 的最新版本的 OpenCV：适用于 iOS 的[OpenCV](http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/2.4.2/opencv2.framework.zip/download)并将其放入您的项目中，并将其包含在您的项目前缀中：

***ExampleApp-Prefix.pch：***

```
#ifdef __cplusplus
    #import <opencv2/opencv.hpp>
#endif 
```

使用它来“转换” UIImages 为 cv::Mats：

***UIImageCVmatConverter.h:***

```
//
//  UIImageCVMatConverter.h
//

#import <Foundation/Foundation.h>

@interface UIImageCVMatConverter : NSObject {

}

+ (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat;
+ (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat withUIImage:(UIImage*)image;
+ (cv::Mat)cvMatFromUIImage:(UIImage *)image;
+ (cv::Mat)cvMatGrayFromUIImage:(UIImage *)image;
+ (UIImage *)scaleAndRotateImageFrontCamera:(UIImage *)image;
+ (UIImage *)scaleAndRotateImageBackCamera:(UIImage *)image;

@end 
```

***UIImageCVmatConverter.mm:***

```
//
//  UIImageCVMatConverter.m
//

#import "UIImageCVMatConverter.h"

@implementation UIImageCVMatConverter

+ (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat withUIImage:(UIImage*)image;
{
  CGColorSpaceRef colorSpace = CGImageGetColorSpace( image.CGImage );
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;
    CGFloat widthStep = image.size.width;
    CGContextRef contextRef = CGBitmapContextCreate( NULL, cols, rows, 8, widthStep*4, colorSpace, kCGImageAlphaNoneSkipLast | kCGBitmapByteOrderDefault );
    CGContextDrawImage( contextRef, CGRectMake(0, 0, cols, rows), image.CGImage );
    CGContextSetRGBStrokeColor( contextRef, 1, 0, 0, 1 );
    CGImageRef cgImage = CGBitmapContextCreateImage( contextRef );
    UIImage* result = [UIImage imageWithCGImage:cgImage];
    CGImageRelease( cgImage );
    CGContextRelease( contextRef );
    CGColorSpaceRelease( colorSpace );
    return result;
}

+(UIImage *)UIImageFromCVMat:(cv::Mat)cvMat
{
    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize()*cvMat.total()];
    CGColorSpaceRef colorSpace;
    if ( cvMat.elemSize() == 1 ) {
        colorSpace = CGColorSpaceCreateDeviceGray();
    }
    else {
        colorSpace = CGColorSpaceCreateDeviceRGB();
    }
    CGDataProviderRef provider = CGDataProviderCreateWithCFData( (__bridge CFDataRef)data );
    CGImageRef imageRef = CGImageCreate( cvMat.cols, cvMat.rows, 8, 8 * cvMat.elemSize(), cvMat.step[0], colorSpace, kCGImageAlphaNone|kCGBitmapByteOrderDefault, provider, NULL, false, kCGRenderingIntentDefault );
    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease( imageRef );
    CGDataProviderRelease( provider );
    CGColorSpaceRelease( colorSpace );
    return finalImage;
}

+ (cv::Mat)cvMatFromUIImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace( image.CGImage );
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;
    cv::Mat cvMat( rows, cols, CV_8UC4 );
    CGContextRef contextRef = CGBitmapContextCreate( cvMat.data, cols, rows, 8, cvMat.step[0], colorSpace, kCGImageAlphaNoneSkipLast | kCGBitmapByteOrderDefault );
    CGContextDrawImage( contextRef, CGRectMake(0, 0, cols, rows), image.CGImage );
    CGContextRelease( contextRef );
    CGColorSpaceRelease( colorSpace );
    return cvMat;
}

+ (cv::Mat)cvMatGrayFromUIImage:(UIImage *)image
{
  cv::Mat cvMat = [UIImageCVMatConverter cvMatFromUIImage:image];
  cv::Mat grayMat;
    if ( cvMat.channels() == 1 ) {
        grayMat = cvMat;
  }
    else {
        grayMat = cv :: Mat( cvMat.rows,cvMat.cols, CV_8UC1 );
        cv::cvtColor( cvMat, grayMat, CV_BGR2GRAY );
    }
  return grayMat;
}

+ (UIImage *)scaleAndRotateImageBackCamera:(UIImage *)image
{
  static int kMaxResolution = 640;
  CGImageRef imgRef = image.CGImage;
  CGFloat width = CGImageGetWidth( imgRef );
  CGFloat height = CGImageGetHeight( imgRef );
  CGAffineTransform transform = CGAffineTransformIdentity;
  CGRect bounds = CGRectMake( 0, 0, width, height );
  if ( width > kMaxResolution || height > kMaxResolution ) {
    CGFloat ratio = width/height;
    if ( ratio > 1 ) {
      bounds.size.width = kMaxResolution;
      bounds.size.height = bounds.size.width / ratio;
    }
        else {
      bounds.size.height = kMaxResolution;
      bounds.size.width = bounds.size.height * ratio;
    }
  }
  CGFloat scaleRatio = bounds.size.width / width;
  CGSize imageSize = CGSizeMake( CGImageGetWidth(imgRef), CGImageGetHeight(imgRef) );
  CGFloat boundHeight;
  UIImageOrientation orient = image.imageOrientation;
  switch( orient ) {
    case UIImageOrientationUp:
      transform = CGAffineTransformIdentity;
      break;
    case UIImageOrientationUpMirrored:
      transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
      transform = CGAffineTransformScale(transform, -1.0, 1.0);
      break;
    case UIImageOrientationDown:
      transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
      transform = CGAffineTransformRotate(transform, M_PI);
      break;
    case UIImageOrientationDownMirrored:
      transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
      transform = CGAffineTransformScale(transform, 1.0, -1.0);
      break;
    case UIImageOrientationLeftMirrored:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
      transform = CGAffineTransformScale(transform, -1.0, 1.0);
      transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
      break;
    case UIImageOrientationLeft:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
      transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
      break;
    case UIImageOrientationRightMirrored:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeScale(-1.0, 1.0);
      transform = CGAffineTransformRotate(transform, M_PI / 2.0);
      break;
    case UIImageOrientationRight:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
      transform = CGAffineTransformRotate(transform, M_PI / 2.0);
      break;
    default:
      [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];
  }
  UIGraphicsBeginImageContext( bounds.size );
  CGContextRef context = UIGraphicsGetCurrentContext();
  if ( orient == UIImageOrientationRight || orient == UIImageOrientationLeft ) {
    CGContextScaleCTM( context, -scaleRatio, scaleRatio );
    CGContextTranslateCTM( context, -height, 0 );
  }
    else {
    CGContextScaleCTM( context, scaleRatio, -scaleRatio );
    CGContextTranslateCTM( context, 0, -height );
  }
  CGContextConcatCTM( context, transform );
  CGContextDrawImage( UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef );
  UIImage *returnImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return returnImage;
}

+ (UIImage *)scaleAndRotateImageFrontCamera:(UIImage *)image
{
  static int kMaxResolution = 640;
  CGImageRef imgRef = image.CGImage;
  CGFloat width = CGImageGetWidth(imgRef);
  CGFloat height = CGImageGetHeight(imgRef);
  CGAffineTransform transform = CGAffineTransformIdentity;
  CGRect bounds = CGRectMake( 0, 0, width, height);
  if (width > kMaxResolution || height > kMaxResolution) {
    CGFloat ratio = width/height;
    if (ratio > 1) {
      bounds.size.width = kMaxResolution;
      bounds.size.height = bounds.size.width / ratio;
    } else {
      bounds.size.height = kMaxResolution;
      bounds.size.width = bounds.size.height * ratio;
    }
  }

  CGFloat scaleRatio = bounds.size.width / width;
  CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
  CGFloat boundHeight;
  UIImageOrientation orient = image.imageOrientation;
  switch(orient) {
    case UIImageOrientationUp:
      transform = CGAffineTransformIdentity;
      break;
    case UIImageOrientationUpMirrored:
      transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
      transform = CGAffineTransformScale(transform, -1.0, 1.0);
      break;
    case UIImageOrientationDown:
      transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
      transform = CGAffineTransformRotate(transform, M_PI);
      break;
    case UIImageOrientationDownMirrored:
      transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
      transform = CGAffineTransformScale(transform, 1.0, -1.0);
      break;
    case UIImageOrientationLeftMirrored:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
      transform = CGAffineTransformScale(transform, -1.0, 1.0);
      transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
      break;
    case UIImageOrientationLeft:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
      transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
      break;
        case UIImageOrientationRight:
    case UIImageOrientationRightMirrored:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeScale(-1.0, 1.0);
      transform = CGAffineTransformRotate(transform, M_PI / 2.0);
      break;
        default:
      [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];
  }
  UIGraphicsBeginImageContext( bounds.size );
  CGContextRef context = UIGraphicsGetCurrentContext();
  if ( orient == UIImageOrientationRight || orient == UIImageOrientationLeft ) {
    CGContextScaleCTM(context, -scaleRatio, scaleRatio);
    CGContextTranslateCTM(context, -height, 0);
  }
    else {
    CGContextScaleCTM(context, scaleRatio, -scaleRatio);
    CGContextTranslateCTM(context, 0, -height);
  }
  CGContextConcatCTM( context, transform );
  CGContextDrawImage( UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef );
  UIImage *returnImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return returnImage;
}

@end 
```

这是我用来在图像中查找多个标记并将它们的中心点推入 std::vector 的代码：

```
#import "UIImageCVMatConverter.h"

...

cv::Mat src_img;
cv::Mat result_mat;
cv::Mat debug_img;
cv::Mat template_img;

NSArray *markerImages = [NSArray arrayWithObjects:@"marker-1.png", nil];

std::vector<cv::Point> markerPoints;

// input image
src_img = [UIImageCVMatConverter cvMatFromUIImage:cameriaInputImage];
cv::cvtColor(src_img, debug_img, CV_GRAY2BGR);

for (NSString *marker in markerImages) {
    template_img = [UIImageCVMatConverter cvMatFromUIImage:[UIImage imageNamed:marker]];
    cv::cvtColor(template_img, template_img, CV_GRAY2BGR);

    int match_method = CV_TM_CCORR_NORMED;

    cv::matchTemplate(src_img, template_img, result_mat, match_method);

    cv::normalize(result_mat, result_mat, 0, 1, cv::NORM_MINMAX, -1, cv::Mat());

    double minVal;
    double maxVal;

    cv::Point minLoc, maxLoc, matchLoc;
    cv::minMaxLoc(result_mat, &minVal, &maxVal, &minLoc, &maxLoc, cv::Mat() );
    if ( match_method  == CV_TM_SQDIFF || match_method == CV_TM_SQDIFF_NORMED ) {
        matchLoc = minLoc;
    }
    else {
        matchLoc = maxLoc;
    }

    cv::Point top_left = matchLoc;
    cv::Point bottom_right = cv::Point(matchLoc.x + template_img.cols , matchLoc.y + template_img.rows);
    cv::Point center = cv::Point(0,0);

    center.x = (bottom_right.x + top_left.x) / 2;
    center.y = (bottom_right.y + top_left.y) / 2;

    markerPoints.push_back(center);
} 
```

我希望这会有所帮助……</p>

# java - 从 Java 中的图像转换视频期间的数据丢失

> ID：12049359
> 
> 赞同：0
> 
> 时间：2012-08-21T06:22:45.897
> 
> 标签：java

我的视频 bailey.mpg 我使用 xuggler 方法从中创建了 .png 图像，然后我读取字节数组中的每个图像，并将哈希作为分隔符和文本数据附加到这个字节数组中，并使用这个字节数组重新创建图像。

现在我正在从这组（文本附加图像）图像中重建 .avi 格式的视频。通过使用 xuggler 从新的 avi 视频中获取 .png 图像集。我正在读取字节数组中的每个图像，并且我正在图像集的字节数组中搜索分隔符，但我无法找到哈希分隔符。我认为这意味着文本视频创建过程中的数据丢失。我应该怎么办？

从视频包DifferentialPackage创建图像的代码；

```
import com.xuggle.mediatool.IMediaReader;
import com.xuggle.mediatool.MediaListenerAdapter;
import com.xuggle.mediatool.ToolFactory;
import com.xuggle.mediatool.event.IVideoPictureEvent;
import com.xuggle.xuggler.Global;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author pratibha
 */
public class VideoIntoFrames {
    public static final double SECONDS_BETWEEN_FRAMES =1;
    String inputFilename;
    private static final String outputFilePrefix = "C:\\photo\\image_";
    // The video stream index, used to ensure we display frames from one and
    //only one video stream from the media container.
    private static int mVideoStreamIndex = -1;
    // Time of last frame write
    private static long mLastPtsWrite = Global.NO_PTS;
    public static final long MICRO_SECONDS_BETWEEN_FRAMES =(long)(100 * SECONDS_BETWEEN_FRAMES);
    int FrameNo=0;
    public VideoIntoFrames(String filepath){
        inputFilename=filepath;
        IMediaReader mediaReader = ToolFactory.makeReader(inputFilename);
        // stipulate that we want BufferedImages created in BGR 24bit color space

        mediaReader.setBufferedImageTypeToGenerate(BufferedImage.TYPE_3BYTE_BGR);
        mediaReader.addListener(new ImageSnapListener());
        // read out the contents of the media file and
        // dispatch events to the attached listener

        while (mediaReader.readPacket() == null) ;
    }
       private  class ImageSnapListener extends MediaListenerAdapter {

        public void onVideoPicture(IVideoPictureEvent event) {

            if (event.getStreamIndex() != mVideoStreamIndex) {

                // if the selected video stream id is not yet set, go ahead an

                // select this lucky video stream

                if (mVideoStreamIndex == -1)

                    mVideoStreamIndex = event.getStreamIndex();

                // no need to show frames from this video stream

               else

                    return;

            }

            // if uninitialized, back date mLastPtsWrite to get the very first frame

           if (mLastPtsWrite == Global.NO_PTS)

                mLastPtsWrite = event.getTimeStamp() - MICRO_SECONDS_BETWEEN_FRAMES;

            // if it's time to write the next frame

            if (event.getTimeStamp() - mLastPtsWrite >=

                    MICRO_SECONDS_BETWEEN_FRAMES) {

                ++FrameNo;

                String outputFilename = dumpImageToFile(event.getImage());

                // indicate file written

                double seconds = ((double) event.getTimeStamp()) /

                    Global.DEFAULT_PTS_PER_SECOND;

                System.out.printf(

                        "at elapsed time of %6.3f seconds wrote: %s\n",

                        seconds, outputFilename);

                // update last write time

                mLastPtsWrite += MICRO_SECONDS_BETWEEN_FRAMES;

            }

        }

        private String dumpImageToFile(BufferedImage image) {

           try {

                String outputFilename = outputFilePrefix +FrameNo+ ".gif";

                ImageIO.write(image, "jpg", new File(outputFilename));

                return outputFilename;

            }

            catch (Exception e) {

                e.printStackTrace();

                return null;

            }

        }

    }

    public static void main(String args[]){
        String path="D:/bailey.mpg";
       VideoIntoFrames v=new VideoIntoFrames(path);
    }
} 
```

所有图像都保存在 c:/photo 中。在 image_1.gif 中插入文本数据的代码是

```
 try{
            String data="My Name is ";
            int[] charValue=new int[data.length()];
            for(int rowIndex=0;rowIndex<charValue.length;rowIndex++){
                charValue[rowIndex]=data.charAt(rowIndex);
            }
            File videoFile = new File("C:/photo/image_1.gif");
            FileInputStream videoInput = new FileInputStream(videoFile);
            int VideoByte = -1;
            List<Byte> bytes = new ArrayList<Byte>();
            while ((VideoByte = videoInput.read()) != -1) {
                bytes.add((byte) VideoByte);
            }

            byte[] ByteOfVideo = new byte[bytes.size()];
            for (int count = 0; count < ByteOfVideo.length; count++) {
                ByteOfVideo[count] = bytes.get(count);
                //    System.out.println(count+" of ByteOfImage "+ByteOfVideo[count]);
            }

            ////////////////////////////////////#////////////////////////

            /////now insert actual image fRames,Row and Columns

            ByteArrayOutputStream byteOut = new ByteArrayOutputStream();

            for (int i = 0; i < ByteOfVideo.length; i++) {

                byteOut.write(ByteOfVideo[i]);
            }
            byte[] HashArray = "#".getBytes();
            byteOut.write(HashArray);
            byteOut.write(HashArray);
            byteOut.write(HashArray);
            byteOut.write(HashArray);
            byteOut.write(HashArray);

           /// String retrievedString = new String(FrameByteArray, "UTF-8");
          for (int i = 0; i < charValue.length; i++) {
               System.out.println(" NameArray in Bytes" + charValue[i]);
                byteOut.write(charValue[i]);
            }
            ////insert #

          //////write this Video File 

           String FinalModifiedVideo="C:\\photo\\image_1.gif";
           File ModifiedFile=new File(FinalModifiedVideo);
           DataOutputStream out=new DataOutputStream(new FileOutputStream(ModifiedFile));
           byteOut.writeTo(out);
           out.close();

           System.out.println("Process End");

        }
        catch(Exception e){
            e.printStackTrace();
        } 
```

从图像集（c:/photo 中的图像）文件夹创建视频的代码。此创建 image.avi 视频

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package Frame;

import test.*;
import ch.randelshofer.media.avi.AVIOutputStream;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.Scanner;

/**
 *
 * @author Inbo
 */
public class MyVideoWriter {

    static ArrayList<String> img = new ArrayList();

    public static void readFiles() {

        String path = "C:\\photo\\";

        String files;
        File folder = new File(path);
        File[] listOfFiles = folder.listFiles();

        int c = 0;
        for (int i = 0; i <799; i++) {
            img.add(path + "\\image_" + (i + 1) + ".gif");
        }
        // System.out.println(img);
    }

    public MyVideoWriter(String path) {
        readFiles();
        try {
            AVIOutputStream AVIout = new AVIOutputStream(new File(path + ".avi"), AVIOutputStream.VideoFormat.JPG);
            AVIout.setVideoCompressionQuality(1);
            //AVIout.setFrameRate(10);
            AVIout.setVideoDimension(352, 240);

            for (int i = 0; i < img.size(); i++) {
                AVIout.writeFrame(new File(img.get(i)));
            }

            AVIout.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

    }
    public static void main(String args[]) {
        String path="C:\\image";
        MyVideoWriter mv = new MyVideoWriter(path);

    }
} 
```

# java - 将属性从父 pom.xml 传播到孙子

> ID：12049360
> 
> 赞同：3
> 
> 时间：2012-08-21T06:22:47.233
> 
> 标签：java, maven, build

我有一个项目的结构是这样的

```
sw
 |-aim-pom.xml
 |-website
      |-pom.xml
      |-package
          |-pom.xml 
```

我的目标 pom.xml 看起来像这样

```
<packaging>pom</packaging>

<properties>
   <product>aim</product>
</properties>

<modules>
   <module>website/package</module>
</modules> 
```

基本上我似乎无法在 website/package/pom.xml 中获得属性“产品”的值，我正在基于它做一些条件逻辑。我在这里做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T06:28:29.487

在“package”模块中执行“mvn help:effective-pom”来查看属性是否存在。如果不是，请确保该模块将目标 pom.xml（或其子之一）指定为其父 POM。请记住，在 Maven 中，聚合（模块通过反应器构建子模块）和继承（POM 有其他 POM 作为父级）是[独立的概念](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html#pom-relationships-sect-multi-vs-inherit)。

# c# - 以编程方式将加载项按钮添加到标准工具栏

> ID：12049362
> 
> 赞同：2
> 
> 时间：2012-08-21T06:23:06.037
> 
> 标签：c#, visual-studio, add-in, toolbar

我为 Visual Studio 编写了简单的插件。该加载项包含两个命令：

```
command1 = commands.AddNamedCommand2(_addInInstance, "AAAA", "AAAA", "Executes the   command for MyAddin2" ,true, 59, ref contextGUIDS, (int)vsCommandStatus.vsCommandStatusSupported+(int)vsCommandStatus.vsCommandStatusEnabled, (int)vsCommandStyle.vsCommandStylePictAndText, vsCommandControlType.vsCommandControlTypeButton);
command2 = commands.AddNamedCommand2(_addInInstance, "BBBB", "BBBB", "Executes the command for MyAddin2", true, 59, ref contextGUIDS, (int)vsCommandStatus.vsCommandStatusSupported, (int)vsCommandStyle.vsCommandStyleText, vsCommandControlType.vsCommandControlTypeButton); 
```

当我运行加载项时，这两个按钮出现在 Visual Studio 的“工具”选项卡下。我希望它们出现在标准工具栏中。手动，我可以通过工具 -> 自定义 -> 命令选项卡 -> 添加命令 -> 选择插件然后选择我的两个按钮来做到这一点。我可以以编程方式进行吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:18:28.243

尝试这样的事情：

```
var cBar = Application.ActiveExplorer().CommandBars["Standard"];
var button = (CommandBarButton)cBar.Controls.Add(MsoControlType.msoControlButton, missing, missing, missing, true);
button.Caption = "Test"; 
```

# submit - 检索通过 ExecutorService.submit 执行的对象

> ID：12049365
> 
> 赞同：0
> 
> 时间：2012-08-21T06:23:22.530
> 
> 标签：submit, return, runnable, executorservice, callable

我有一个并行运行多个求解器的 ExecutorService。每个求解器都会修改几个必须返回值的内部变量。由于兼容性问题，不可能将所有变量封装在一个类中以通过可调用对象返回。因此，使求解器可调用或可运行对我的情况没有任何影响，因为我无法检索我需要的所有变量。

我考虑了以下两个选项：

1.  每个求解器访问一个同步类并将其值写入那里。
2.  访问 executor 提交的对象（求解器），以便通过 get 方法获取它们的变量。

我更喜欢第二种选择，但我找不到访问提交对象的方法。

有什么建议（对于任何选项）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:16:39.923

您没有详细说明“兼容性问题”，因此我只能针对您所描述的内容提出一般解决方案。

由于您使用`ExecutorService`，我相信您使用`ThreadPoolExecutor`（或其子类）作为该接口的实现。如果是这种情况，我建议覆盖`ThreadPoolExecutor.afterExecute(Runnable r, Throwable t)`方法。在任何提交`Runnable`完成后调用它。它的默认实现是空的。

您的实施应遵循以下步骤：

1.  检查是否`t != null`。如果是这样，`Throwable` `t`导致求解器中止的过程。
2.  检查的类型，`r`如果你识别它，检索它的结果。当然，如果你所有的求解器都有一个通用的 API，它会更简单。
3.  将结果存储在某处。

但请注意 -`ThreadPoolExecutor.afterExecute()`从运行 的线程中调用`Runnable` `r`，因此第 3 步很可能需要同步。

将它们放在一起，您的代码可能如下所示：

```
if (t != null) {
    // handle t
} else {
    Solver solver = (Solver)r;
    Results results = solver.getResults();
    synchronized (allSolutions) {
        allSolutions.addResults(results);
    }
} 
```

# google-chrome - 重新启用扩展安装

> ID：12049366
> 
> 赞同：4
> 
> 时间：2012-08-21T06:23:28.250
> 
> 标签：google-chrome, google-chrome-extension

我发现你不能安装 Chrome 扩展程序/用户脚本而不保存它们并将它们拖到 Chrome 中的新变化非常烦人。因此，我已着手将其恢复为旧方式。

我在这里阅读了文档：http: [//www.chromium.org/administrators/policy-list-3#ExtensionInstallSources](http://www.chromium.org/administrators/policy-list-3#ExtensionInstallSources)说要添加一个注册表项，所以我已经完成了，如下所示。但是，在尝试安装扩展程序时，我仍然收到只能从 Chrome 网上商店安装的错误消息。我是否添加了错误的注册表项或什么？

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Google\Chrome\ExtensionInstallSources]
"1"="http://*"
"2"="https://*" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:31:40.690

# [自 Chrome 36 起，](https://code.google.com/p/chromium/issues/detail?id=357750)此答案已过时

* * *

[**`--enable-easy-off-store-extension-install`**](http://peter.sh/experiments/chromium-command-line-switches/#enable-easy-off-store-extension-install)除了编辑注册表，您还可以通过标志使 Chrome 以旧方式运行。

在 Windows 下，创建 Chrome 可执行文件的快捷方式。然后编辑快捷方式，并附`--enable-easy-off-store-extension-install`加到“目标”。请看下面的截图：

[![](../Images/e4af5383f800645680c8831b6194c342.png)](https://i.stack.imgur.com/pbLsg.png)

一些观察：

*   我在`--enable-easy-off-store-extension-install`之后添加了标志`chrome.exe`。
*   启动 Chrome 后，我访问了一个网站，该网站链接到一个`.crx`不在 Chrome 网上商店中托管的文件。
*   由于该标志，Chrome 20 不再显示*“只能从 Chrome 网上应用店添加扩展程序、应用程序和用户脚本”*消息。相反（见底部），Chrome 会询问我是否可以安装扩展程序 - 就像以前一样。

此命令行开关也适用于 Linux 和 OSX 下的 Chromium/Chrome。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:57:46.667

如果您发现自己处于`--enable-easy-off-store-extension-install`标志不起作用的情况（例如未来版本？）或者您不想使用它，那么还有另一种方法。

您可以通过将 .CRX 扩展文件拖到“设置”中的“扩展”面板上，通过普通的 Chrome 安装来安装扩展。

![在此处输入图像描述](../Images/506c8ed3d657ce7d49da3a04a5982cc5.png)

![在此处输入图像描述](../Images/0c62bf1775acbf29452cd0844b114b78.png)

# php - 如何在php中找到没有扩展名的图像类型？

> ID：12049367
> 
> 赞同：3
> 
> 时间：2012-08-21T06:23:34.990
> 
> 标签：php

我有图片上传 php 类。这个过程上传了图片(.png,jpeg,.gif)。我正在使用此功能查找图像类型

```
 function getImageType($image_name){
    return end(explode('.',$mage_name));
              } 
```

如果有人上传任何带有假扩展名的文件。会发生错误。如何在不检查扩展名的情况下检查图像类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T06:25:06.427

您可以使用[getimagesize](http://php.net/manual/en/function.getimagesize.php)获取 mime 类型，并打开类型以创建生成扩展。

在代码中，这可能看起来像这样：

```
$image_info = getImageSize($path);
switch ($image_info['mime']) {
case 'image/gif':
    $extension = '.gif';
    break;
case 'image/jpeg':
    $extension = '.jpg';
    break;
case 'image/png':        
    $extension = '.png';
    break;
default:
    // handle errors
    break;
} 
```

# java - 如何将参数传递给java中已经运行的线程？

> ID：12049369
> 
> 赞同：7
> 
> 时间：2012-08-21T06:23:57.930
> 
> 标签：java, multithreading

如何将参数传递给java中已经运行的线程——不在构造函数中，并且可能不使用wait（）（可能？？）

类似于[如何将参数传递给 Java 线程？](https://stackoverflow.com/questions/877096/how-can-i-pass-a-parameter-to-a-java-thread)

> 您的意思是将参数传递给已经运行的线程吗？因为所有当前的答案都是关于将参数传递给新线程...... – Valentin Rocher 2009 年 5 月 18 日 10:43

**[编辑]**

是的，我正在寻找类似生产者/消费者模式的东西。

我想要一个类似于线程的东西，其中有处理并准备好键盘输入。另一个线程只是监视网络并将接收到的文本传递给处理线程。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T06:34:27.900

也许你真正需要的是阻塞队列。当你创建线程时，你传入阻塞队列，线程应该继续检查队列中是否有任何元素。在线程之外，您可以在线程“运行”时将元素放入队列。如果线程无事可做，阻塞队列可以防止线程退出。

```
public class Test {
    public static void main(String... args) {

        final BlockingQueue<String> queue = new LinkedBlockingQueue<String>();
        Thread running = new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    try {
                        String data = queue.take();
                        //handle the data
                    } catch (InterruptedException e) {
                        System.err.println("Error occurred:" + e);
                    }
                }
            }
        });

        running.start();
        // Send data to the running thread
        for (int i = 0; i < 10; i++) {
            queue.offer("data " + i);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T06:34:47.557

“其他线程”将有自己的生命，因此您无法真正与它通信/将参数传递给它，除非它主动读取您提供给它的内容。

您允许您与之通信的线程通常从某个缓冲队列中读取数据。

看看[`ArrayBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)例如，阅读消费者-生产者模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T06:44:52.810

```
public class T1 implements Runnable {
    //parameter of thread T1
    public static AtomicBoolean flag = new AtomicBoolean();

    @Override
    public void run() { 
    }   
}

public class T2 implements Runnable {

    @Override
    public void run() { 
        //parameter to an already running thread
        T1.flag.set(true);
    }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:38:13.543

这种方式怎么样：

```
 class TestRun implements Runnable
    {
        private int testInt = -1;

        public void setInt(int i)
        {
            this.testInt = i;
        }

        @Override
        public void run()
        {
            while (!isFinishing())
            {
                System.out.println("Working thread, int : " + testInt);
                try
                {
                    Thread.sleep(2500);
                }
                catch (InterruptedException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    } 
```

......

```
 TestRun first = new TestRun();
        TestRun second = new TestRun();
        (new Thread(first)).start();
        (new Thread(second)).start();
        try
        {
            Thread.sleep(5000);
        }
        catch (InterruptedException e)
        {
        }
        first.setInt(101);
        second.setInt(102); 
```

# ios - UIWebview 单击和双击

> ID：12049370
> 
> 赞同：0
> 
> 时间：2012-08-21T06:23:59.203
> 
> 标签：ios, uiwebview

我用 webview 创建了一个 iPhone 项目。我已经在 webview 中显示了 JS 图。我需要单击以显示工具提示和双击以链接。如何识别 UIWebview 中的单击和双击..

# android - Android：如何使用 HttpPut 请求发送内容

> ID：12049381
> 
> 赞同：0
> 
> 时间：2012-08-21T06:24:52.667
> 
> 标签：android

我正在开发一个应用程序并希望通过 HttpPut 请求发送内容。我正在发送它，但远程服务器无法识别它。我将请求发送到 REST API。

这是我的代码：

```
HttpURLConnection connection;
try{
    URL url = new URL(Constants.url_domain+"listings/"+idvalue);
    //URL url = new URL(imageUrl);
    HttpPut httpRequest = null;
    httpRequest = new HttpPut(url.toURI());                     
    String basicAuth = "Basic " + new String(Base64.encode("username:password123#".getBytes(),Base64.NO_WRAP ));
    httpRequest.setHeader("Authorization", basicAuth);                      
    MultipartEntity entity2 = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    entity2.addPart("title",new StringBody(titlevalue));
    entity2.addPart("price",new StringBody(pricevalue));
    entity2.addPart("active",new StringBody("false"));                                          
    httpRequest.setEntity(entity2);                    
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
} 
```

# php - 坚持使用 PHP 中的数字模式打印

> ID：12049391
> 
> 赞同：2
> 
> 时间：2012-08-21T06:25:32.277
> 
> 标签：php, for-loop, logic

坚持使用数字图案打印逻辑。让我知道我做错了什么，因为我的文件只是在执行而没有给我一个模式。

我的代码——

```
<?php

$num = 4;

for( $j=1 ; $j <= $num ; $j++ )
{
    for( $i=$j ; $i < $num-1 ; $i++ )
    {
    echo "&nbsp;";
    }

    for( $j ; $j >= 1 ; $j-- )
    {
    echo $j."&nbsp;";
    }

echo "<br />";
} 
```

实现模式——

```
 1
  21
 321
4321 
```

**更新**

应用新更改后，以下是屏幕截图 ---

![关于 STAR USEAGE](../Images/f35b66d7edc3adf61358c1d947a90e39.png)

![空白使用](../Images/94c5407e9622dad24bce1636424d1504.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T06:29:34.743

```
for ($i = 1; $i <= 4; $i++) {
  echo str_pad(implode('', range($i, 1)), 4, ' ', STR_PAD_LEFT) . '<br />';
} 
```

使用 CSS 右对齐

```
echo '<div style="text-align:right;">';
for ($i = 1; $i <= 4; $i++) {
  echo implode('', range($i, 1)) . '<br />';
}
echo '</div>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T06:33:21.007

您的错误在最后一个`for`，因为您已经在循环，所以不应该存在。

并创建一个新变量，它将保存下一个增量的打印文本。

```
<?php

$num = 4;
$wrap = '';

for( $j=1 ; $j <= $num ; $j++ )
{
    for( $i=$j ; $i < $num ; $i++ )
    {
        echo "&nbsp; ";
    }

    echo $wrap = $j.$wrap;
    echo "<br />";
}
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T06:49:56.913

根本原因是浏览器不会只渲染第一个空格，您可以通过使用不间断空格 html 实体`&nbsp`代替空格来克服这个问题。

太棒了，如果你希望你的实际模式看起来像：

```
 1
  21
 321
4321 
```

而且不喜欢：

```
1
21
321
4321 
```

使用`&nbsp`（编辑：实际上`&nbsp;[space]`仅使用 1 似乎无法补偿`1`char vs的宽度`4`）

```
<?php 
    $num = 4;
    $result = array();
    foreach(range($num,1) as $i){
        $result[] = str_repeat('&nbsp; ',$num-$i).implode('',range($i,1)).'<br />';
    }
    echo implode('',array_reverse($result));
?> 
```

或者您可以使用`<pre>`如下标签：

```
<?php 
$num = 4;
$result = array();
foreach(range($num,1) as $i){
    $result[] = str_repeat(' ',$num-$i).implode('',range($i,1)).PHP_EOL;
}
echo '<pre>'.implode('',array_reverse($result)).'</pre>';
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T06:33:54.097

就像现在一样，问题在于您的第三个（或第二个嵌套）`for`循环。

您不能`$j`在这里只重用作为计数器，因为`$j`它仍在包含 for 循环中被积极使用。将 for 循环替换为：

```
for( $k = $j ; $k >= 1 ; $k-- )
{
    echo $k."&nbsp;";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-25T16:22:41.910

这是您的程序的代码，您可以去[Develepor 地狱](http://developerhell.blogspot.in/2014/01/number-pattern.html)了解更多这样的模式

// 外部寻找换行

对于 ($i = 1; $i<=5; $i++) {

```
// Loop added for spacing
for ($s = $i; $s<=10-$i; $s++) {
    echo "&nbsp;";
    }

// Inner loop for printing required pattern
for ($j = $i; $j>=1; $j--) {
    echo $j;
}

echo '</br>'; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-01T06:52:13.910

```
// Here is the code for your program,
// Pattern - 1

$num = 4;

// to print no. of rows
for( $i=1 ; $i <= $num ; $i++ )
{

    // To print white space
    for( $j=1 ; $j <= $num-$i ; $j++ )
    {
        echo "0";
    }

    // To print pattern
    for( $z= $i ; $z>=1 ; $z-- )
    {

        echo $z;
    }

    // To print new line
    echo "<br />";
}

==>> Output
0001
0021
0321
4321

//===================================================================//

Pattern - 2

$z=1;
$n=3;

# no of rows
for($i=1;$i<=$n;$i++)
{
# to check even or odd
if($i%2 == 0)
{
    # main logic to display in reverse order // right to left
    $z = ($z+$n) -1;

    $a = $z;
    for($j=1;$j<=$n;$j++)
    {
        echo $z--;
    }

    $z = $a+1;

}
else
{
    # display data left to right

    for($j=1;$j<=$n;$j++)
    {
        echo $z++;
    }
}

echo "<br/>";

}

==>> Output
123
654
789 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-02T03:21:07.253

您的问题似乎是您将输出打印到 HTML 文档中，该文档将多个空格作为其默认行为。请参阅“[为什么 HTML 要求多个空格在浏览器中显示为单个空格？](https://stackoverflow.com/q/433493/2943403) ” 要在打印时“保留”空格，请使用`<pre>`标签。

我将添加一个基于数学的解决方案，而不是多个迭代函数调用和多个循环（受[我在此处解释的答案](https://stackoverflow.com/a/49023959/2943403)的启发）。一旦您的数量限制高于 9，我不知道我的输出是否与您想要的输出一致。

实际上，我`printf()`习惯用空格将每一行填充到相同的最大长度。每个连续的数字打印整数与其值一样多次。

代码：（[演示](https://3v4l.org/qMSQf)）

```
$num = 4;
echo "<pre>";
for ($i = 1; $i <= $num; ++$i) {
    printf("% {$num}d<br>", (10 ** $i - 1) / 9 * $i);
} 
```

HTML 输出（点击演示链接中的眼睛图标切换到 HTML 模式）：

```
 1
  22
 333
4444 
```

为了比较，这些也可以在`for()`循环内部工作（并提供高于 9 的更直观的结果）：

```
printf("% {$num}d<br>", str_repeat($i, $i)); 
```

或者

```
echo str_repeat(' ', $num - $i) . str_repeat($i, $i) . "<br>"; 
```

# c# - 在 HMACSHA256 计算哈希中忽略零

> ID：12049395
> 
> 赞同：1
> 
> 时间：2012-08-21T06:25:51.557
> 
> 标签：c#, c#-4.0, cryptography, hash

我使用 Crypto-JS v2.5.3 (hmac.min.js) [http://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/)库来计算客户端哈希，脚本是：

```
$("#PasswordHash").val(Crypto.HMAC(Crypto.SHA256, $("#pwd").val(), $("#PasswordSalt").val(), { asByte: true })); 
```

这会返回如下内容：

```
b3626b28c57ea7097b6107933c6e1f24f586cca63c00d9252d231c715d42e272 
```

然后在服务器端我使用下面的代码来计算哈希：

```
private string CalcHash(string PlainText, string Salt) {
        string result = "";
        ASCIIEncoding enc = new ASCIIEncoding();
        byte[]
        baText2BeHashed = enc.GetBytes(PlainText),
        baSalt = enc.GetBytes(Salt);
        System.Security.Cryptography.HMACSHA256 hasher = new HMACSHA256(baSalt);
        byte[] baHashedText = hasher.ComputeHash(baText2BeHashed);
        result = string.Join("", baHashedText.ToList().Select(b => b.ToString("x")).ToArray());
        return result;
    } 
```

这个方法返回：

```
b3626b28c57ea797b617933c6e1f24f586cca63c0d9252d231c715d42e272 
```

如您所见，服务器端方法忽略了一些零字符。哪里有问题？我的服务器端方法有什么问题吗？我只需要这两个值与相等的字符串和盐相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T06:28:57.750

> 如您所见，服务器端方法忽略了一些零字符。哪里有问题？

在这里-您在 C# 中转换为十六进制：

```
b => b.ToString("x") 
```

如果`b`是 10，那只会给出“a”而不是“0a”。

我个人建议进行更简单的十六进制转换：

```
return BitConverter.ToString(baHashedText).Replace("-", "").ToLowerInvariant(); 
```

（您*可以*改为`"x"`改为`"x2"`指定 2 个字符的长度，但这仍然是一种执行字节到十六进制转换的迂回方式。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T06:52:29.087

其他人一直在推荐使用诸如使用 BitConverter 和修剪“-”或使用`ToString(x2)`. 有一个更好的解决方案，一个自 1.1 [SoapHexBinary](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.metadata.w3cxsd2001.soaphexbinary.aspx)以来就在 .NET 中的类。

```
using System.Runtime.Remoting.Metadata.W3cXsd2001;

public byte[] StringToBytes(string value)
{
    SoapHexBinary soapHexBinary = SoapHexBinary.Parse(value);
    return soapHexBinary.Value;
}

public string BytesToString(byte[] value)
{
    SoapHexBinary soapHexBinary = new SoapHexBinary(value);
    return soapHexBinary.ToString();
} 
```

这将产生您想要的确切格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:30:39.353

我相信问题出在这里：

```
result = string.Join("", baHashedText.ToList().Select(b => b.ToString("x")).ToArray()); 
```

将其更改为：

```
result = string.Join("", baHashedText.ToList().Select(b => b.ToString("x2")).ToArray()); 
```

# facebook - Facebook“发送”按钮不发送网址；不告诉我为什么

> ID：12049396
> 
> 赞同：0
> 
> 时间：2012-08-21T06:25:51.853
> 
> 标签：facebook, ruby-on-rails-3

我有一个 facebook 的“发送”按钮，它应该允许用户将我的一篇博客文章发布到我的基于 rails 的网站上到 facebook 提要。

这是我要发布的真实网址： `http://50.62.12.222/projects/1/blog_posts/1/blog_post_replies`

起初我认为这可能是该特定对象的“显示”操作的身份验证问题。一旦我解决了这个问题并验证了该页面不需要身份验证，我就对接下来要尝试什么感到困惑。

路线`<%= project_blog_post_blog_post_replies_url(@project, b) %>`或呈现的 url（上图）都不起作用。我遇到的错误同样模棱两可：

```
"We encountered the following error when sending your message:" 
```

编辑：如果我也在 facebook 开发者网站上尝试这个 url，我也会遇到同样的失败（它会给你按钮的粘贴代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:31:42.137

也尝试设置 og 元标记。虽然不是必填字段，但 facebook 可能会失败发送按钮点击的初始请求。考虑以下建议

推断属性：应显式提供“og:url”属性，即使可以从其他标签推断出值。推断属性：应显式提供“og:title”属性，即使可以从其他标签推断出值。推断属性：应显式提供“og:image”属性，即使可以从其他标签推断出值。Tiny og:image：og:image 引用的所有图像在两个维度上都必须至少为 200px。请检查给定 url 中带有标签 og:image 的所有图像，并确保其符合最低规格。

完成后，转到[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2F50.62.12.222%2Fprojects%2F1%2Fblog_posts%2F1%2Fblog_post_replies](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2F50.62.12.222%2Fprojects%2F1%2Fblog_posts%2F1%2Fblog_post_replies)并确保你做的一切都很好。

# android - 播放（说出）来电者姓名然后电话再次响铃时如何停止电话响铃

> ID：12049398
> 
> 赞同：6
> 
> 时间：2012-08-21T06:25:56.803
> 
> 标签：android

我想在电话响铃时说出来电者姓名。我知道如何用他的名字获取来电者的来电号码

```
String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
        incomingNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);

        Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(incomingNumber)); 
        Cursor cursor = context.getContentResolver().query(uri, new String [] {PhoneLookup.DISPLAY_NAME}, null, null, null);

        if (cursor.moveToFirst()) {
            callerName = cursor.getString(0);
        }

        Log.d(TAG, "Display name: " + callerName); 
```

当电话响起时，我知道如何倾听`android.intent.action.PHONE_STATE`并抓住它。

我也知道如何说出来电者姓名，`TextToSpeech.OnInitListener`但我遇到了如何停止响铃并播放来电者姓名然后再次开始响铃的问题。

如何在未播放来电者姓名之前停止响铃？我正在搜索，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T15:19:22.757

恐怕这是不可能的。Android 参考资料并未涵盖这一点，但我对其进行了一段时间的测试，并且只能在通话的早期阶段（在您听到声音之前）控制铃声音量。您在通话结束后所做的每项更改都会在通话结束后生效（因此，在下一次通话时）。我不知道其他流的行为是什么，我只对这个感兴趣（但我猜这没关系，因为你不能静音 STREAM_RING）。

# java - 在 java 中使用扫描仪设备的最佳解决方案（库）？

> ID：12049399
> 
> 赞同：4
> 
> 时间：2012-08-21T06:25:57.843
> 
> 标签：java, twain

我正在从事一个桌面项目（使用 swing 开发），该项目适用于各种新旧扫描仪设备。我们想要一个可以与扫描仪设备一起使用的开源免费库。Twain 等扫描仪标准对我们来说并不重要，在 Windows（XP 和 7）下支持广泛的扫描仪对我们来说非常重要。请与我分享您对这个主题的经验。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T06:38:10.180

好吧，我认为 TWAIN 对您来说应该非常重要，因为它*是*数据采集标准。几乎所有扫描仪都带有 TWAIN 驱动程序，为您提供标准界面。所以你真正需要的是一个 Java TWAIN 库。不幸的是，没有好的开源库。

在商业产品之外考虑：[JTwain](http://asprise.com/product/jtwain/)和[Morena](http://www.gnome.sk/Twain/jtp.html)。我认为 Morena 有一个“个人许可证”，它是免费的，但不适合商业项目。

您也可以从[这里](http://code.google.com/p/openbizcard/source/browse/trunk/integrated/Scanner/src/com/yov/lib/?r=103)尝试这些 JAR 。它们是由网络上的某个人开发的，该网站现在已经死了，但是您可以很容易地使用 JAD 对其进行逆向工程以获取 API 列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T12:15:45.313

您真的需要 TWAIN 支持。对特定于设备的 API 进行编码不是很可重用。如果您正在寻找免费的解决方案并且熟悉 JNI，那么我写了一篇文章，其中包含 Java 和 C++ 的最基本解决方案和免费源代码。文章在[这里](http://www.javaworld.com/article/2074455/java-app-dev/bridge-the-gap-between-java-and-twain.html)。如果您正在寻找一种低成本的解决方案，那么您可以尝试[JTwain](http://www.jtwain.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:28:59.733

我不了解开源，但您曾经能够获得免费的[Morena 6](http://www.gnome.sk/Twain/jtp.html)的“个人”许可证。

# mysql - 将另一个控制器的另一个字段添加到数组中

> ID：12049400
> 
> 赞同：2
> 
> 时间：2012-08-21T06:25:59.080
> 
> 标签：mysql, cakephp, model, controller

嘿，目前我们有一个从一个表（关系）中选择所有的数组，我们需要将 Accounts 表中的 account_name 放入该数组中。我们将如何做到这一点？

我们的关系表有（id、receiver_id、sender_id、active、expiry_date）。Receiver_id 和 sender_id 都是 account_id 的外键。

目前它工作正常，但打印了接收者和发送者的 ID，我们希望 Account 表中的 account_name 存在。

这是我们的函数、视图和模型：

功能：

```
//retrieve Account Id of current User       
        $accountid=$this->Auth->user('account_id');

        //Conditions
        $conditions=array("OR"=> array(
        'Relationship.sender_id' => $accountid,
        'Relationship.receiver_id' => $accountid));

        //Find all Invoices where receiver_id = accountid
        $relationships=$this->Relationship->find('all', array(
        'conditions' => $conditions));

        debug($relationships);

        $this->set('accountid', $accountid); 
        $this->set('relationship', $relationships); 
    } 
```

看法：

```
<table>
                <tr>
                    <th>Relationship #</th>
                    <th>Sender</th>
                    <th>Receiver</th>
                    <th>Expiry Date</th>
                    <th>Status</th>
                </tr>

        <?php foreach($relationship as $relationships):?>

        <?php

        if($relationships['Relationship']['active']==1)
        {
            $status = 'Active';
        }
        else if($relationships['Relationship']['active']==0)
        {
            $status = 'Not Active';
        }

?>

                    <tr>
                        <td align='center'><?php echo $relationships['Relationship']['id']; ?></td>
                        <td align='center'><?php echo $relationships['Relationship']['sender_id']; ?></td>
                        <td align='center'><?php echo $relationships['Relationship']['receiver_id']; ?></td>
                        <td align='center'><?php echo date('d.m.Y', strtotime($relationships['Relationship']['expiry_date'])); ?></td>
                        <td align='center'><?php echo $status ?></td>
                    </tr>
                <?php endforeach; ?>

            </table> 
```

关系模型：

```
class Relationship extends AppModel
{

    var $name = 'Relationship';
    public $useTable = 'relationships';
    public $primaryKey = 'id';
    /*
    public $hasMany = array(
        'Invoice' =>
            array(
                'className'              => 'Invoice',
                'joinTable'              => 'invoice',
                'foreignKey'             => 'invoice_id'));*/

    //fix this code
    public $belongsTo = array(
        'User' =>array(
            'className' => 'User',
            'foreignKey' =>'receiver_id',
            'associationForeignKey'  => 'accounts_id',
            )); 

    var $validate = array(
        'date' => array(
            'rule' => array(
                'datevalidation',
                'systemDate'
            ),
            'message' => 'Current Date and System Date is mismatched'
        ),
        'receiver_id' => array(
            'userExists' => array(
                'rule' => array(
                    'userExists',
                ),
                'message' => 'That username doesnt exist.'
            ),
        ),
    );

    function datevalidation($field = array(), $compare_field = null)
    {
        if ($field['date'] > $compare_field)
            return TRUE;
        else
            return FALSE;
    }

    function accountExists($check)
    {   
        $accountExists = $this->Account->find('count', array('conditions' => array('Account.id'=>$check)));
        if ($accountExists == 1) {
           return TRUE;
        }
        else
            return FALSE;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:35:10.033

请注意，它不是来自另一个“控制器”的另一个字段，而是另一个模型。

有多种方法可以做到这一点：

您可以在 find() 方法上使用连接：http: [//book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)

或者您也可以使用 bindModel()，我发现它特别有用：[http ://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#creating-and-destroying-associations-即时](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#creating-and-destroying-associations-on-the-fly)

搜索食谱！虽然有时很乏味，但它确实非常有帮助。在我对 Cake 的工作原理有一个不错的了解之前，我不得不折腾一番。

# c++ - clBuildProgram 的分段错误

> ID：12049405
> 
> 赞同：1
> 
> 时间：2012-08-21T06:26:14.227
> 
> 标签：c++, segmentation-fault, opencl

当我运行我的 opencl 程序时，我在 clBuildProgram 中遇到“分段错误”的消息。编译这个程序时没有错误信息，但是当我运行它时可以看到“segmentation fault”。我将 Opencl API 总结如下。我的代码有错误吗？

```
clGetPlatformIDs(1, &platform, &num_platforms);
status = clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, 1, &device, &num_devices);
cl_context context = clCreateContext(NULL, 1, &device, NULL, NULL, NULL);
queue = clCreateCommandQueue( context, device, 0, NULL);
cl_program program = clCreateProgramWithSource( context,1,&str,NULL, NULL);
cl_int result = clBuildProgram(program, 1, &device, NULL, NULL, NULL); 
```

我也尝试如下运行，但可以看到同样的问题。

```
cl_int result = clBuildProgram(program, 0, NULL, NULL, NULL, NULL); 
```

顺便说一句，我使用的是 Linux Ubuntu 10.04 64 位环境，以及用于 GPGPU 的 NVIDIA GeForce GT 330。

*添加问题的编辑：clBuildProgram 中第三个参数的定义是“设备列表”，所以我认为“&device”是正确的。这样对吗？如果我错了，“设备列表”的确切含义是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:16:22.323

您是否尝试过使用 valgrind (http://valgrind.org/docs/manual/quick-start.html) 运行程序？如果您还包含调试信息（在 g++ 或 gcc 中使用 -g 标志），它将向您显示产生分段错误的实际代码行。在valgrind下运行程序非常简单：valgrind myprog [arg1] [arg2]

# java - 为 apache commons 快速傅里叶变换算法构建样本数据

> ID：12049407
> 
> 赞同：10
> 
> 时间：2012-08-21T06:26:17.600
> 
> 标签：java, signal-processing, fft, apache-commons

我想使用 Apache math commons 实现 FFT（**FastFourierTransformer**类）来处理一些虚拟数据，这些数据的 8 个数据样本对一个完整的正弦波有贡献。最大振幅为 230。我尝试的代码片段如下：

```
private double[] transform() 
{   
    double [] input = new double[8];
    input[0] = 0.0;
    input[1] = 162.6345596729059;
    input[2] = 230.0;
    input[3] = 162.63455967290594;
    input[4] = 2.8166876380389125E-14;
    input[5] = -162.6345596729059;
    input[6] = -230.0;
    input[7] = -162.63455967290597;

    double[] tempConversion = new double[input.length];

    FastFourierTransformer transformer = new FastFourierTransformer();
    try {           
        Complex[] complx = transformer.transform(input);

        for (int i = 0; i < complx.length; i++) {               
            double rr = (complx[i].getReal());
            double ri = (complx[i].getImaginary());

            tempConversion[i] = Math.sqrt((rr * rr) + (ri * ri));
        }

    } catch (IllegalArgumentException e) {
        System.out.println(e);
    }

    return tempConversion;
} 
```

1) 现在**transform**方法返回的数据是一个复数数组。该数组是否包含有关输入数据的频率分量信息？还是我创建的 tempConversion 数组将包含频率信息？tempConversion 数组中的值是：

```
 2.5483305001488234E-16
 920.0
 4.0014578493024757E-14
 2.2914314707516465E-13
 5.658858581079313E-14
 2.2914314707516465E-13
 4.0014578493024757E-14
 920.0 
```

2）我搜索了很多，但在大多数地方没有关于数据算法期望什么格式的明确文档（就示例代码而言，以便更好地理解）以及如何使用结果数组来计算包含在信号？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T07:20:22.873

您的输出数据看起来正确。您已经计算了每个频率仓的复数 FFT 输出的幅度，它对应于该仓对应频率的输入信号中的能量。由于您的输入是纯实数，因此输出是复共轭对称的，并且最后 3 个输出值是多余的。

所以你有了：

```
Bin     Freq        Magnitude
  0     0 (DC)        2.5483305001488234E-16
  1     Fs/8        920.0
  2     Fs/4          4.0014578493024757E-14
  3     3Fs/8         2.2914314707516465E-13
  4     Fs/2 (Nyq)    5.658858581079313E-14
  5     3Fs/8         2.2914314707516465E-13  # redundant - mirror image of bin 3
  6     Fs/4          4.0014578493024757E-14  # redundant - mirror image of bin 2
  7     Fs/8        920.0                     # redundant - mirror image of bin 1 
```

除了对应于`Fs/8`预期频率的 bin 1（和 bin 6）之外，所有值实际上都是 0。

# android - 雅虎天气 API 语言

> ID：12049409
> 
> 赞同：3
> 
> 时间：2012-08-21T06:26:23.303
> 
> 标签：android, yahoo, yahoo-weather-api

我正在使用天气地点查找器和雅虎天气 api。默认情况下，我收到的是美式英语的回复。我想更改韩语的回复。

请分享想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T20:17:51.767

在访问了这么多网站后，我了解到 Yahoo 不支持多语言的天气 API 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:01:20.807

是的，我认为雅虎天气不支持多种语言，雅虎只带 2 个参数 w（WOEID）和 u（单位）。

但是您可以考虑使用 strings.xml 来映射天气代码。

例如在 values/strings.xml 你放不可用，然后在 values-fr/strings.xml 你放 pas disponible

您需要对从 0 到 3200 的所有 Yahoo Weather 代码执行此操作。并将另一个文件夹值 - [country_code] 用于另一种语言。在这里进一步阅读，[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-02T13:22:16.673

尝试“lang”参数。

例如：

```
$query = array('location' => 'bafra,cy','format' => 'json','u' => 'c','lang' => 'tr-tr',); 
```

来源：[https ://developer.yahoo.com/social/rest_api_guide/web-services-i18n.html](https://developer.yahoo.com/social/rest_api_guide/web-services-i18n.html)

# c++ - 多次调用 lambda 表达式

> ID：12049415
> 
> 赞同：8
> 
> 时间：2012-08-21T06:27:03.227
> 
> 标签：c++, c++11, lambda

我正在尝试新标准中的 lambda 表达式，但仍然不太了解它们。

假设我的代码中某处有一个 lambda，例如在我的主代码中：

```
int main( int argc, char * argv[])
{
    //some code
    [](int x, int y)->float
    {
        return static_cast<float>(x) / static_cast<float>(y);
    };
    //some more code here
    //<---now I want to use my lambda-expression here
} 
```

很明显我可能需要多次使用它，所以“就在那儿定义它”的答案是行不通的：P 那么，我如何在后面的代码中调用这个 lambda 表达式？我是否必须创建一个指向它的函数指针并使用该指针？还是有更好/更简单的方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T06:28:38.700

您可以使用 lambda 存储 lambda ，或将其明确`auto`分配给兼容的：`std::function`

```
auto f1 = [](int x, int y)->float{ ..... };
std::function<float(int,int)> f2 = [](int x, int y)->float{ ..... };

float x = f1(3,4);
auto y = f2(5,6); 
```

如有必要，您可以随时使用`f1`or`f2`构造或分配给特定类型：`std::function`

```
std::function<float(int,int)> f3 = f1; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-21T06:28:21.853

```
auto lambda = [](int x, int y)->float
    {
        return static_cast<float>(x) / static_cast<float>(y);
    };
// code
// call lambda
std::cout << lambda(1, 2) << std::endl; 
```

# tomcat - CAS 和 LDAP 的 Tomcat j_security 错误

> ID：12049421
> 
> 赞同：0
> 
> 时间：2012-08-21T06:27:32.123
> 
> 标签：tomcat, cas

我们遇到了一些关于tomcats 和j_security 的问题。没有任何更改，然后重新启动后，它们开始失败并出现以下错误：

*[http-8180-Processor23] 错误 org.apache.catalina.core.ContainerBase.[Catalina].[some.fake.address].[/].[default] - servlet 默认的 Servlet.service() 抛出异常 java。 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215) 的 org.apache.catalina.core.ApplicationFilterChain 的 org.securityfilter.filter.SecurityFilter.doFilter(SecurityFilter.java:120) 的 lang.NullPointerException。 doFilter(ApplicationFilterChain.java:188) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172) at org.apache .catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174) 在 org.apache.coyote.http11.Http11Processor 的 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108) .process(Http11Processor.java:880) 在 org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665) 在 org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528) ) 在 org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) 在 java.lang 的 org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)。线程.run(线程.java:662)catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:880) at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol. java:665) at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528) at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81) at org.apache .tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) 在 java.lang.Thread.run(Thread.java:662)catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:880) at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol. java:665) at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528) at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81) at org.apache .tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) 在 java.lang.Thread.run(Thread.java:662)processConnection(Http11BaseProtocol.java:665) at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528) at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)在 org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) 在 java.lang.Thread.run(Thread.java:662)processConnection(Http11BaseProtocol.java:665) at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528) at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)在 org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) 在 java.lang.Thread.run(Thread.java:662)*

他们根据 CAS 服务器对用户进行身份验证，从 LDAP 检索数据。使用 CAS 服务器的所有其他服务（moodle、php）都正常工作，第三个 tomcat 服务器（我们还没有重新启动）也在工作。任何人都可以找出问题或如何开始调试它？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:11:50.480

此问题可能与自 Tomcat 6.0.33 以来可能存在的错误相同，此线程中对此进行了解释：[Is it possible to disable jsessionid in tomcat servlet?](https://stackoverflow.com/questions/962729/is-it-possible-to-disable-jsessionid-in-tomcat-servlet)

# .net - 在样式化控件上设置标题

> ID：12049422
> 
> 赞同：1
> 
> 时间：2012-08-21T06:27:33.107
> 
> 标签：.net, wpf, popup, styles

我创建了一个 WPF 弹出样式并在应用程序的许多地方使用它。弹出标题在样式中定义，我不确定如何在应用程序中将其更改为不同的值，这是样式：

```
<Style x:Key="PopupContentStyle1" TargetType="ContentControl">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ContentControl">
                <Grid Height="90" Width="392" Background="Transparent">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="20"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0.092*"></ColumnDefinition>
                            <ColumnDefinition Width="0.007*"/>
                            <ColumnDefinition Width="0.054*"/>
                            <ColumnDefinition Width="0.115*"/>
                            <ColumnDefinition Width="0.732*"/>
                        </Grid.ColumnDefinitions>
                        <Border CornerRadius="10" Grid.ColumnSpan="5">
                            <Border.Background>
                                <LinearGradientBrush
                            EndPoint="0.5,1"
                            StartPoint="0.5,0">
                                    <GradientStop Color="#FF333C3C"
                                Offset="0" />
                                    <GradientStop Color="#FF464646"
                                Offset="0.25" />
                                    <GradientStop Color="#FF504E50"
                                Offset="0.75" />
                                    <GradientStop Color="#FF595D59"
                                Offset="1" />
                                </LinearGradientBrush>
                            </Border.Background>

                            <Border Background="{DynamicResource TemplateBackgroundColour}" Margin="5,15,5,5" CornerRadius="5" BorderThickness="0,1,0,0">
                                <ContentPresenter />
                            </Border>
                        </Border>
                        <Label Name="popupTitle" Content="Sample title" Grid.Column="0" HorizontalAlignment="Center" Height="Auto" Margin="0" VerticalAlignment="Top" Width="Auto" Foreground="{DynamicResource DefaultFontColour}" Padding="0" Grid.ColumnSpan="5" />

                    </Grid>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这就是我调用并希望更改标题以反映弹出内容的方式：

```
<Popup x:Name="p1" AllowsTransparency="True">
        <ContentControl Style="{StaticResource PopupContentStyle1}" >
            <ContentControl.Content>
                <Grid>
                    <TextBox>Popup user control goes here</TextBox>

                </Grid>
            </ContentControl.Content>

        </ContentControl>
    </Popup> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:38:12.253

您可以（错误？）使用[Tag](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag.aspx)属性将标题存储在`ContentControl`

```
<ContentControl Style="{StaticResource PopupContentStyle1}" Tag="Sample Title" >
 ...
</ContentControl> 
```

并以您的风格将其设置`TemplateBinding`为您的标签内容

```
<Label Name="popupTitle" Content="{TemplateBinding Tag}" ... /> 
```

或者作为替代解决方案，您可以使用具有内置属性的[HeaderedContentControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.headeredcontentcontrol.aspx)`Header` ，您可以将其用作弹出标题。

So if you don't need any additional functionality there is no need to create your own "PoupContentControl" because the built in `HeaderedContentControl` gives you the ability to use a `Header` in your Style:

A sample with using

```
<Popup x:Name="p1" AllowsTransparency="True" IsOpen="True" >
    <HeaderedContentControl Style="{StaticResource PopupContentStyle1}" 
                            Header="Sample title"> 
         <HeaderedContentControl.Content>
             <Grid>
                 <TextBox>Popup user control goes here</TextBox>
             </Grid>
         </HeaderedContentControl.Content>
     </HeaderedContentControl>
</Popup> 
```

And in your stlye change the `TargetType` to `HeaderedContentControl` and modify your `Label` to:

```
<Label Name="popupTitle" Content="{TemplateBinding Header}" ... /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:07:19.773

The proper way to do this is making a custom contentcontrol and adding a "popupHeader" dependencyproperty to that class. That way, you can bind your header to that property straight away and you can still use your tag for other purposes.

Make a class like PopUpHeader that inherits from contentcontrol and add a dependencyproperty to it.

Create a class like this:

```
public class PopUpHelper : ContentControl
{
    public static readonly DependencyProperty PopUpHeaderProperty = DependencyProperty.Register("PopUpHeader", typeof(String), typeof(PopUpHelper), null);
    public string PopUpHeader
    {
        get { return Convert.ToString(GetValue(PopUpHeaderProperty)); }
        set { SetValue(PopUpHeaderProperty, value); }
    }
} 
```

To be able to reference this in your XAML, input this namespace:

xmlns:local="clr-namespace:YourNamespace"

where "YourNamespace" is the namespace you have put the above class in.

Then change some targettype attributes in your style:

```
<Style x:Key="PopupContentStyle1" TargetType="local:PopUpHelper"> 
```

and also this line

```
<ControlTemplate TargetType="local:PopUpHelper"> 
```

change the binding of the content of your label to:

```
Content="{TemplateBinding PopUpHeader}" 
```

You can use your new contentcontrol in your xaml like this:

```
<local:PopUpHelper PopUpHeader="This is the header" Style="{StaticResource PopupContentStyle1}">
    <local:PopUpHelper.Content>
        <Grid>
            <TextBlock Text="Here goes content"/>
        </Grid>
    </local:PopUpHelper.Content>
</local:PopUpHelper> 
```

If this would fail, check out the sample app I made for this: [download](https://www.dropbox.com/s/yecfvm595ghy95l/CSharpSilverlightSandbox.zip?m)

# javascript - DataURI 而不是图像对于 API 和 Web 服务是否实用？

> ID：12049423
> 
> 赞同：1
> 
> 时间：2012-08-21T06:27:33.927
> 
> 标签：javascript, html, data-uri

我正在编写一个 javascript 应用程序，它从基于 PHP 的 API 中以 JSON 格式获取数据。目前，图像 URL 是从 API 接收的，然后用于使用`<img>`标签显示它们。

使用 dataURI 而不是常规的图像 URL 是否实用且有效？我的应用程序主要用于手机。那么这需要客户端的额外处理能力吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:06:26.840

以下是我可能避免使用数据 URI 的四个原因：

1) 数据 URI 有开销（处理和带宽）

2) 不缓存数据 URI

[http://en.wikipedia.org/wiki/Data_URI_scheme#Disadvantages](http://en.wikipedia.org/wiki/Data_URI_scheme#Disadvantages)

3) 数据 URI 可能会泄漏内存（在基于 Webkit 的浏览器中 - 所以 Chrome/Safari 和“大”智能手机！）

[http://waldheinz.de/2010/06/webkit-leaks-data-uris/](http://waldheinz.de/2010/06/webkit-leaks-data-uris/)

[Safari 中的数据 URI 泄漏（原为：HTML5 画布的内存泄漏）](https://stackoverflow.com/questions/8538917/data-uri-leak-in-safari-was-memory-leak-with-html5-canvas)

4) 它们可能会慢 6 倍！

[http://www.mobify.com/blog/data-uris-are-slow-on-mobile/](http://www.mobify.com/blog/data-uris-are-slow-on-mobile/)

另一方面 - 数据 URI 肯定有一席之地。如果图像是相当静态的，则将数据 URI 传递回客户端（然后将该字符串缓存在 localStorage 中）可能是一个优雅的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:35:28.573

除非图像非常重要，否则我只会使用 rehular URL。

使用数据 URL 将使原始响应更大，因此向用户显示任何数据需要更长的时间。图像是 base64 编码的，因此在大多数情况下，线路上的总字节数也会更大。

# c# - 使用 c# 添加标题以访问字段

> ID：12049425
> 
> 赞同：0
> 
> 时间：2012-08-21T06:27:54.863
> 
> 标签：c#, ms-access, field, caption

我使用此代码创建访问数据库。

```
public void CreateAccessAssetFile(string DataSourcePath, string fileName)
{
    if (File.Exists(DataSourcePath + fileName))
            File.Delete(DataSourcePath + fileName);

    //Create Database
    string cnnStr = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" 
                   + DataSourcePath + fileName + "; Jet OLEDB:Engine Type=5";
    var catType = Type.GetTypeFromProgID("ADOX.Catalog");
    object o = Activator.CreateInstance(catType);
    catType.InvokeMember("Create", 
                         BindingFlags.InvokeMethod, 
                         null, 
                         o, 
                         new object[] { cnnStr });

    OleDbConnection cnn = new OleDbConnection(cnnStr);
    cnn.Open();
    var cmd = cnn.CreateCommand();
    cmd.CommandText = "CREATE TABLE TblInfoCompany (fn TEXT , ln TEXT)";
    cmd.ExecuteNonQuery();
} 
```

现在我想添加`caption`两个字段，当我们打开访问文件时，第一个字段 be`"FirstName"`和第二个字段 be `"LastName"`。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:52:59.887

Caption 在 MS Access 之外没有任何相关性，但是，这里有一些使用互操作的说明：

```
 using Microsoft.Office.Interop.Access.Dao;

        DBEngine dbEng = new DBEngine();
        Workspace ws = dbEng.CreateWorkspace("", "admin", "",
            WorkspaceTypeEnum.dbUseJet);
        Database db = ws.OpenDatabase(@"z:\docs\test.accdb", false, false, "");
        TableDef tdf = db.TableDefs["Table1"];
        Field fld = tdf.Fields["Field1"];

        Property prp = fld.CreateProperty("Caption", 10, "My caption");

        fld.Properties.Append(prp); 
```

# git - 为什么 Git refs 没有文件扩展名

> ID：12049430
> 
> 赞同：5
> 
> 时间：2012-08-21T06:28:38.550
> 
> 标签：git, file, reference, branch

我最近在创建分支组时偶然发现了 Git 中的一个常见问题：

我有一个名为“ **tim** ”的分支。
我想创建一个名为“ **tim** ”的文件夹/组，其中包含“ **tim** ”分支，导致分支路径为“ **tim/tim** ”。

当我尝试这样做时，Git 真的很讨厌我，因为根据 Git，文件夹“ **tim** ”和分支引用“ **tim** ”是完全相同的东西。

我的问题是，是否有人知道为什么分支引用没有某种扩展来解决这个问题？说**.gitbranch**或其他什么？
显然，每次访问文件时都**需要在 .gitbranch***上*附加更多的工作，但与用户为解决此问题所要做的工作相比，几乎没有任何工作，*尤其是*当您在开发团队中时。（之前克隆过 repo 的任何人都必须手动进入他们的 refs 文件夹并删除任何名为“ **tim*******”，否则他们无法获取！）*****

 *****如果这确实是一个合法的问题，我会通过适当的渠道提出，但我想检查是否有人可能知道他们*为什么*可能故意这样做？

谢谢大家，
蒂姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:48:24.000

我认为这两种方式都没有任何特别的理由。在 unix 中，通常不使用文件扩展名，所以没有。这意味着您不能同时拥有`foo`and `foo/anything`。尽管现在远程引用通常以打包格式存储在一个文件中，但它已被记录在案，现在一成不变并且不会改变。

然而：

*   `git fetch``-p`如果给出( `--prune`) 选项，应该足够聪明地在创建新分支之前修剪旧分支。如果没有，你绝对应该把它放在 git 邮件列表中。
*   我只在 gui 中看到了一种默认修剪的方法，但在远程的 fetch 配置中看不到。问这个也是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:50:04.250

当您尝试将文件名`tim`（存储分支头）转换为目录名`tim/`（当您有斜杠时）时，Git 可能会遇到困难，因为引用的命名自由（请参阅 参考资料`git-check-ref-format`）。*****

# windows - 使用 VC++ Express 2010 编译 libdwarf 无法运行演示应用程序

> ID：12049439
> 
> 赞同：3
> 
> 时间：2012-08-21T06:29:20.417
> 
> 标签：windows, visual-c++, compilation, dwarf

我能够通过一些警告编译`libdwarf`并成功。`libelf`我还成功编译了`simplereader`演示应用程序，但未能处理 elf 文件。它总是失败：

```
void* _elf_read(Elf *elf, void *buffer, size_t off, size_t len) 
```

在库下的**input.c**`libelf`中。

我正在使用最新的 2012`libdwarf`源代码和`libelf`来自[http://directory.fsf.org/wiki/Libelf](http://directory.fsf.org/wiki/Libelf)

有什么建议我可以解决它吗？如果有人做过这个移植并愿意分享他/她的工作，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:14:36.817

我已经解决了这个问题。问题不在于Libelf，而在于应用程序simplereader。此应用程序以只读方式打开文件，而 libelf 期望文件以二进制文件打开。通过添加“| _O_BINARY”一切顺利。

# php - array_keys 或 in_array 不敏感不能正常工作

> ID：12049443
> 
> 赞同：2
> 
> 时间：2012-08-21T06:29:53.163
> 
> 标签：php, arrays, case-insensitive, array-key

我对不敏感的 array_keys 和 in_array 有疑问......我正在开发一个翻译器，我有这样的事情：

```
$wordsExample = array("example1","example2","example3","August","example4");
$translateExample = array("ejemplo1","ejemplo2","ejemplo3","Agosto","ejemplo4");

function foo($string,$strict=FALSE)
{
    $key = array_keys($wordsExample,$string,$strict);
    if(!empty($key))
      return $translateExample[$key[0]];
    return false;
}

echo foo('example1'); // works, prints "ejemplo1"
echo foo('august');  // doesnt works, prints FALSE 
```

我用 in_array 进行了测试，结果相同......：

```
function foo($string,$strict=FALSE)
{
    if(in_array($string,$wordsExample,$strict))
      return "WOHOOOOO";
    return false;
}

echo foo('example1'); //works , prints "WOHOOOOO"
echo foo('august'); //doesnt works, prints FALSE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:36:43.977

创建数组并使用 with 找到键[`strtolower`](http://php.net/manual/en/function.strtolower.php)：

```
$wordsExample = array("example1","example2","example3","August","example4");
$lowercaseWordsExample = array();
foreach ($wordsExample as $val) {
    $lowercaseWordsExample[] = strtolower($val);
}

if(in_array(strtolower('august'),$lowercaseWordsExample,FALSE))
      return "WOHOOOOO";

if(in_array(strtolower('aUguSt'),$lowercaseWordsExample,FALSE))
      return "WOHOOOOO"; 
```

另一种方法是编写一个`in_array`不区分大小写的新函数：

```
function in_arrayi($needle, $haystack) {
    return in_array(strtolower($needle), array_map('strtolower', $haystack));
} 
```

如果您希望它使用更少的内存，最好使用小写字母创建单词数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:56:00.810

我创建了一个小函数来测试干净的 URL，因为它们可以是大写、小写或混合的：

```
function in_arrayi($needle, array $haystack) {

    return in_array(strtolower($needle), array_map('strtolower', $haystack));

} 
```

这种方式很容易。

# redis - 防止 Redis 保存到磁盘

> ID：12049444
> 
> 赞同：6
> 
> 时间：2012-08-21T06:29:58.433
> 
> 标签：redis, bulkinsert

我正在构建一个 Redis 数据库，它几乎消耗了我所有的机器内存。如果 Redis 在进行大量插入时开始保存到磁盘，则内存消耗或多或少会增加一倍（如文档中所述）。在我的情况下，这会导致糟糕的表现。

我想强制 Redis 在插入时不要存储任何数据，然后手动触发保存。这应该可以解决我的问题，但是我配置了“保存”设置，在某个时间点 Redis 开始保存到磁盘。任何提示如何防止 Redis 这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T04:25:24.040

您可以通过在 redis.conf 中注释所有“保存”行来禁用保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T15:25:19.533

或者，如果您不想编辑任何`.conf`文件，请使用以下命令运行 Redis：

`redis-server --save ""`

根据[示例配置](https://raw.githubusercontent.com/antirez/redis/3.0/redis.conf)（搜索`save`）：

```
It is also possible to remove all the previously configured save
points by adding a save directive with a single empty string argument
like in the following example:

save "" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T16:58:55.797

我还建议查看仅持久性从属（主/从复制）（让从属持久化数据而不是主控）

看看这个[链接](http://dev.paperlesspost.com/blog/2011/12/21/redis-tips-persistence-only-slaves-and-the-slowlog/)

# android - android中的自定义MediaControls

> ID：12049447
> 
> 赞同：1
> 
> 时间：2012-08-21T06:30:27.177
> 
> 标签：android, android-mediaplayer, android-video-player

我从 androidSDK 复制了 MediaController.java 文件。

接下来，我在我的应用程序中从 androidSDK 获取了 VideoView 类。

我整理了各种Bug，但有一个，那就是PolicyManager。

我想知道什么是 Policy Manager 类，为什么 Default MediaController 类使用它。

或者有没有其他方法来创建自定义媒体控制器......请不要告诉在 videoView 上膨胀 xml.. 感谢您的合作和宝贵的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T16:23:57.750

使用`MediaController`来`PolicyManager`创建一个新的覆盖窗口。就这样。如果（像我一样）您为自定义硬件编写并且对在本机代码中做同样的事情没有疑虑，那很容易。如果您希望远离私有 API，则需要另辟蹊径。您应该可以使用`Dialog`或`SurfaceView`没有太多麻烦。[这里](https://stackoverflow.com/questions/12049447/custom-mediacontrols-in-android)有一个`SurfaceView`例子。

# python - 在单线程中运行时龙卷风非阻塞？

> ID：12049451
> 
> 赞同：3
> 
> 时间：2012-08-21T06:30:38.957
> 
> 标签：python, multithreading, tornado, nonblocking, single-threaded

Tornado 是非阻塞的网络服务器。

但是，所有操作都在单个线程中运行。如果它由单线程处理，它如何保持非阻塞？

如果有一个长操作，它会阻止新的请求吗？

从 Tornado 下载大文件是一个漫长的阻塞过程吗？

如果我的理解不准确，请纠正我。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:26:27.427

> 如果有一个长操作，它会阻止新的请求吗？

是的。不，这取决于。

Tornado 内部发生的任何事情都会阻止。因此，如果您执行“time.sleep(10)”或执行计算密集型操作，它将阻塞。

Tornado（以及 Twisted 和 node.js）可以做得很好的是从另一个服务（如 Amazon、Facebook、或子进程或具有异步库的数据库）请求数据，然后在等待回复时为其他请求提供服务。请参阅[http://www.tornadoweb.org/documentation/overview.html#non-blocking-asynchronous-requests](http://www.tornadoweb.org/documentation/overview.html#non-blocking-asynchronous-requests)

为此，您需要前面的服务器也是异步的（所以是 Nginx，而不是 Apache）。

# css - max/min -width 属性不适用于目标列

> ID：12049452
> 
> 赞同：1
> 
> 时间：2012-08-21T06:30:41.297
> 
> 标签：css, twitter-bootstrap

我尝试调整表格列宽（下一个链接[http://deploy.jtalks.org/jcommune/branches/1?lang=en](http://deploy.jtalks.org/jcommune/branches/1?lang=en)上的“作者”列）。我已将 min/max 属性添加到 .author-col 样式中：

```
#topics-table .author-col a {
font-size: 11px;
min-width: 140px;
max-width: 140px;} 
```

但是，目标列的宽度仍为 418 像素。我没有看到任何其他压倒一切的宽度样式。你能帮我解决这个问题吗，谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:34:54.713

`min-`并且`max-width`没有为表格指定。引用[w3c](http://www.w3.org/TR/CSS21/visudet.html#min-max-widths)：

> 在 CSS 2.1 中，'min-width' 和 'max-width' 对表格、内联表格、表格单元格、表格列和列组的影响是未定义的。

如果你想为你的列实现一个固定的宽度，你可能想尝试[`table-layout: fixed;`](https://developer.mozilla.org/en-US/docs/CSS/table-layout)在你的桌子上使用 - 但请注意，这也会将所有其他列修复为它们的给定`width`。

**编辑：** 再看一下您的示例，在您的情况下似乎要简单得多：您没有`width`为表格单元格提供 a ，而是`a`包含在其中。将您的CSS更改为：

```
#topics-table .author-col a {
  font-size: 11px;
  /* widths are useless here, because an <a> is an inline-element */
}
#topics-table .author-col {
  /* give your .author-col a width instead */
  width: 140px;
} 
```

# iphone - 核心图错误

> ID：12049453
> 
> 赞同：0
> 
> 时间：2012-08-21T06:30:42.153
> 
> 标签：iphone, graph, xcode4.3

我想在我的 iPhone 应用程序中使用图表。我已经下载了它的源代码 Core-Plot，但是现在当我尝试运行它时，我得到了一个错误。

```
clang: error: -Z-reserved-lib-stdc++: 'linker' input unused when '-c' is present 
```

谁能建议我这个错误是什么意思或如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:12:41.527

# `iPhone、iPod Touch 和/或 iPad 应用程序

依赖项目安装 因为框架不能像在 Mac 上一样在 Cocoa Touch 应用程序中使用，所以在 iPhone 应用程序中包含 Core Plot 的方式略有不同。

首先，将 CorePlot-CocoaTouch.xcodeproj 文件拖到您的 iPhone 应用程序的 Xcode 项目中。在左侧列表中显示项目导航器，然后单击您的项目。

从出现的“目标”源列表下选择您的应用程序目标。单击“构建阶段”选项卡并展开“目标依赖项”组。单击加号按钮，选择 CorePlot-CocoaTouch 库，然后单击添加。这应该确保 Core Plot 库将与您的应用程序一起构建。

Core Plot 是作为 iPhone 的静态库构建的，因此您需要将 libCorePlot-CocoaTouch.a 静态库从 CorePlot-CocoaTouch.xcodeproj 组拖到应用程序目标的“Build”中的“Link Binaries With Libraries”组“阶段”组，您刚刚加入。

您还需要指向正确的标题位置。在 Build 设置下，将 Header Search Paths 设置为从应用程序到 Core Plot 源树中的 framework/ 子目录的相对路径。确保使此标头搜索路径递归。您还需要将 -ObjC 添加到其他链接器标志（从 Xcode 4.2 开始，似乎不需要 -all_load，但旧 Xcode 版本可能需要它）。

Core Plot 基于 Core Animation，所以如果您还没有，请将 QuartzCore 框架添加到您的应用程序项目中。

最后，您应该能够通过在项目的适当源文件中插入以下行来导入所有 Core Plot 类和数据类型：

# 导入“CorePlot-CocoaTouch.h”`

资料来源：[谷歌上的核心情节维基](http://code.google.com/p/core-plot/wiki/UsingCorePlotInApplications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:13:58.437

我有一个解决方案，这里是链接。

[CorePlot 无法在 XCode 4.4 中构建](https://stackoverflow.com/questions/11772545/coreplot-failed-to-build-in-xcode-4-4)

基本上这个问题与 Xcode 有关。

# xmpp - ejabberd 中的全球联系人列表/名册

> ID：12049455
> 
> 赞同：1
> 
> 时间：2012-08-21T06:30:46.440
> 
> 标签：xmpp, ejabberd

如何为 ejabberd 中的任何新注册用户创建全局名册？

我想在注册后立即将用户添加到名册中。

我不能使用共享名册列表，因为我想要一对多的关系。

用户（管理员）<->所有用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:15:34.317

ejabberd 共享名册支持不一定是对称的。您可以定义共享名册，其中管理员被授权查看所有用户的存在，而不是相反。请检查 ejabberd shared_roster 文档：[https ://git.process-one.net/ejabberd/mainline/blobs/raw/v2.1.11/doc/guide.html#modsharedroster](https://git.process-one.net/ejabberd/mainline/blobs/raw/v2.1.11/doc/guide.html#modsharedroster)

如果您使用特殊别名，例如@all@，共享名册将是纯动态的，并且在检索时将包括服务器上的所有用户。

# php - mysql搜索不返回值

> ID：12049457
> 
> 赞同：1
> 
> 时间：2012-08-21T06:30:54.943
> 
> 标签：php, mysql

我有这样的查询

```
SELECT * FROM products WHERE status="active" AND product_name LIKE "%sony\'s%" 
```

但它不返回结果，而在产品表中我有一个名为“Sony\'s”的产品

如果有人有，请给我解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:35:50.927

使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php

    $name = "active";
    $value = "%" + $product_name + "%";

    $stmt = $dbh->prepare("SELECT * 
                           FROM  products
                           WHERE status = ? AND 
                                 product_name LIKE ?");
    $stmt->bindParam(1, $name);
    $stmt->bindParam(2, $value);

    $stmt->execute();

?> 
```

这将允许您使用带单引号的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:02:28.137

将“%sony\'s%”替换为`'%sony''s%'`

例如

```
SELECT * FROM products WHERE status="active" AND product_name LIKE '%sony''s%' 
```

# php - PHP PUT 数据到 Json 中的 RESTful API

> ID：12049463
> 
> 赞同：0
> 
> 时间：2012-08-21T06:31:40.877
> 
> 标签：php, json, api, rest

我收到了这样的字符串：

```
 id=123&nid=28&ntype=content&text=This%20is%20a%20note 
```

我需要将此数据更改为 JSON。PHP中是否有任何内置函数或一些自定义函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:35:38.160

试试这样...

```
$get_string = "id=123&nid=28&ntype=content&text=This%20is%20a%20note";
parse_str($get_string, $get_array);
echo json_encode($get_array); 
```

你会得到这样的输出......

```
{"id":"123","nid":"28","ntype":"content","text":"This is a note"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T06:37:59.373

```
$tmp = parse_str($string);
echo json_encode($tmp); 
```

# javascript - 如何停止执行 javascript 并允许用户保存表单

> ID：12049466
> 
> 赞同：0
> 
> 时间：2012-08-21T06:32:03.597
> 
> 标签：javascript

我有一个用于验证表单的 javascript 方法。但在一定条件下，控件应该停止脚本并允许用户保存表单。

`'return'`关键字在这里有效吗？

```
if(matchSearch==null)
    {
        alert('Mismatch in Subsidiary and Year. Stopping script to allow form submission.');
        return;
    } 
```

这个想法是，`if matchSearch == null`脚本应该停止并且应该允许用户保存表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:12:11.270

如果您想在提交表单之前检查表单字段，则执行检查的 (submit) 处理程序函数应返回 false。这样，提交就被取消了，表单停留在屏幕上，保留了用户已经输入的值。就像是：

```
function checkValues(){
  //check values
  if (/*return value of the check is wrong*/){
    // save form functionality
    return false
  }
  // check ok
  return true;
}
yourform.onsubmit = checkValues; 
```

看到[这个 jsfiddle](http://jsfiddle.net/uz4pR/)一个非常基本的例子

或者，您还可以编写一个“侦听器”功能，定期检查每个表单字段的内容。[你可以在这个 jsfiddle](http://jsfiddle.net/KooiInc/9ssKZ/)中找到一个例子。它旨在仅当所有字段都具有有效值时才显示提交按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:01:23.177

如果您说您有一个已分配为`onsubmit`处理程序的函数，即当用户尝试提交时调用该函数，那么`return;`如您的示例中所示，将停止执行该函数并允许继续提交。

任何`return`语句都将从当前函数中退出。您返回的值*可能*很重要，具体取决于提交处理程序的分配方式：`return false;`内联`onsubmit=""`属性将阻止提交表单。您`return;`没有值的语句会隐式返回`undefined`，这不会阻止提交。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-21T06:35:27.010

使用`return false;`将停止脚本的执行。

# windows - 可以将可执行文件存储在programdata中吗？

> ID：12049469
> 
> 赞同：7
> 
> 时间：2012-08-21T06:32:31.010
> 
> 标签：windows, security, uac

可以将可执行文件存储在programdata或appdata中吗？结果是我可以修改它（更新它）而不必显示 uac 警告，但另一方面，任何其他应用程序也可以。

注意：似乎谷歌浏览器正在这样做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T07:46:34.987

主要优点是没有管理员权限的用户可以在没有管理员权限的情况下安装软件。主要缺点是没有管理员权限的用户可以在没有管理员权限的情况下安装软件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T18:29:45.957

尽管在这些位置（chrome、runonce、gtalk）安装应用程序变得越来越普遍——这是一个安全风险，正如[乔纳森](https://stackoverflow.com/a/12050367/573083)所说——好处也是它最大的缺点。

许多企业现在阻止应用程序从这些位置运行。随着越来越多的企业将此视为一个巨大的安全漏洞，我希望越来越多的组织将其锁定。

我认为你的问题：`"Is it against the rules"`是一个主观的问题。当然有争论的余地，但它最终似乎是一个主动的决定，以规避系统的预期安全性。我个人不会安装到这些位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:21:28.257

`%APPDATA%`是一个合理的位置，如果应用程序真正打算供单个用户使用。在这种情况下，它不是安全风险。默认情况下，只有相关用户可以访问他们的`%APPDATA%`文件夹，因此这里不会发生信任边界的交叉。

`%PROGRAMDATA%`不太合理。首先，这个目录是在 Vista 中添加的，所以这可能是个问题。但是，如果您在此处安装，您将安装到系统范围内的位置。用户 A 可能会安装您的程序，但用户 B 有权访问该位置。因此，用户 B 可能会用恶意内容覆盖您的程序，从而诱使用户 A 运行它。这是一个安全风险。

# android - 从 Android 应用程序将视频上 传到 Youtube

> ID：12049471
> 
> 赞同：0
> 
> 时间：2012-08-21T06:32:37.000
> 
> 标签：android, youtube-api

[我必须开发一个在不使用ytd-android 的](http://code.google.com/p/ytd-android/)情况下将视频上传到 Youtube 的 Android 应用程序。是否有任何示例代码可以发布请求？我已经搜索了很多，发现的所有内容都是使用[ytd-android](http://code.google.com/p/ytd-android/)完成的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:14:43.273

Youtube provides a [REST API](https://developers.google.com/youtube/getting_started), and good documentation with examples. Start reading the basic concepts like authorization and authentication, at the beginning at least, then move to more specific topics.

Here's the page dedicated to [uploading videos to Youtube](https://developers.google.com/youtube/2.0/developers_guide_protocol_uploading_videos).

# django - wadofstuff django 序列化程序和带有“through”参数的 manytomanyfields

> ID：12049474
> 
> 赞同：3
> 
> 时间：2012-08-21T06:32:46.407
> 
> 标签：django, serialization, manytomanyfield

使用 wadofstuff django full serializers v. 1.1.0，我注意到具有指定“通过”模型的 ManyToManyFields 的模型不会被序列化，即使您使用关系参数明确指定它们也是如此。

此外，我注意到这种关系的序列化*发生*在 1.0.0 版本中。

任何人都可以验证这是否属实，如果是，为什么要进行此更改？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T11:23:34.087

其根本原因似乎发生在此变更集中[https://code.google.com/p/wadofstuff/source/detail?r=54](https://code.google.com/p/wadofstuff/source/detail?r=54)

我已经编写了一个基于 wadofstuff 的自定义序列化程序，它绕过了 field.rel.through._meta.auto_created 条件，现在通过其他模型序列化的模型

# java - 以“X 分钟/小时/天/周/月/年”格式解析日期时间

> ID：12049480
> 
> 赞同：3
> 
> 时间：2012-08-21T06:33:29.477
> 
> 标签：java

如何解析格式为 X 分钟/小时/天/周/月/年前的日期。以下是一些示例来说明我所指的内容：

*   3天前
*   1 分钟前
*   2年前

我不认为使用默认的 Java 库很容易。我对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T07:04:05.320

基于`Calendar`API 的小片段。

```
Pattern p = Pattern.compile("(\\d+)\\s+(.*?)s? ago");

Map<String, Integer> fields = new HashMap<String, Integer>() {{
    put("second", Calendar.SECOND);
    put("minute", Calendar.MINUTE);
    put("hour",   Calendar.HOUR);
    put("day",    Calendar.DATE);
    put("week",   Calendar.WEEK_OF_YEAR);
    put("month",  Calendar.MONTH);
    put("year",   Calendar.YEAR);
}};

String[] tests = {
        "3 days ago",
        "1 minute ago",
        "2 years ago"
};

for (String test : tests) {

    Matcher m = p.matcher(test);

    if (m.matches()) {
        int amount = Integer.parseInt(m.group(1));
        String unit = m.group(2);

        Calendar cal = Calendar.getInstance();
        cal.add(fields.get(unit), -amount);
        System.out.printf("%s: %tF, %<tT%n", test, cal);
    }
} 
```

**输出：**

```
3 days ago: 2012-08-18, 09:21:38
1 minute ago: 2012-08-21, 09:20:38
2 years ago: 2010-08-21, 09:21:38 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:38:30.477

它实际上取决于您所指的“以前”的上下文，是从当前日期开始，还是从指定日期开始。

您可以使用 Java API 来实现它：

*   [使用Java Regex API](http://docs.oracle.com/javase/tutorial/essential/regex/)将字符串标记为三部分
*   [使用Java Calendar API](http://www.vogella.com/articles/JavaDateTimeAPI/article.html)创建和操作日期

# javascript - 如何不在信息窗口中而是在地图外的 div 中显示标记的内容？

> ID：12049487
> 
> 赞同：0
> 
> 时间：2012-08-21T06:34:24.603
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我在地图上的一个地方放了一个标记，并在加载时将我的地图集中在这一点上。我想在地图外的 div 中显示此标记的内容，而无需单击页面或任何其他操作！对不起，我的英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:10:18.400

您可以使用，

```
document.getElementById('YourDivId').innerHTML = 'What you want to show.'; 
```

在 div 中显示信息。如果您想在最后一个标记放置在地图上时显示它，那么您可以使用一组标记，到达最后一个并将标记的信息与 innerHTML 一起使用。

# java - Unicode 块：获取每种语言的字母表 [Java]

> ID：12049495
> 
> 赞同：1
> 
> 时间：2012-08-21T06:34:39.343
> 
> 标签：java, unicode, alphabet

我现在已经搜索了很多，希望有人可以帮助我。我想获取 Java 中每种语言的 Unicode 块。到目前为止我发现的是：

*   Character.UnicodeBlock.ARABIC；Character.UnicodeBlock.Cyrillic；
*   Character.UnicodeBlock.LATIN_1_SUPPLEMENT；……

但这还不够。我也想知道，德语、法语、俄语字母表中的哪些字母。我只能得到它们对应于拉丁文或西里尔文，而不是像[这样](http://unicode.org/repos/cldr-tmp/trunk/diff/by_type/misc.exemplarCharacters.html)的语言特定字母表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:44:23.563

> 我也想知道，德语、法语、俄语字母表中有哪些字母。

我认为 Unicode 不支持这一点。例如，Unicode 中没有说明在哪种西欧语言中使用了哪些基于拉丁语的字符。

事实上，我有一种感觉，甚至不可能做出明确的决定。例如，我记得读过一本 19 世纪的英国经典著作，其中作者/出版商将“角色”一词拼写为“角色”。当语言借用其他语言时，这种情况经常发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:15:32.607

查看 ICU 课程[LocaleData](http://icu-project.org/apiref/icu4j50m1/com/ibm/icu/util/LocaleData.html)。它允许按语言环境访问 CLDR 元素，例如 exemplarCharacters。

请注意， exemplarCharacters 的定义相当模糊（作为语言中使用的字符的概念本质上也是模糊的），因此它的值尚未在坚实的基础上定义，并且在那里做出的许多选择是有争议的。但总体而言，那里的数据可能仍然是我们拥有的最佳基础。

另请注意，Unicode 块在此上下文中是相当粗略的单元。例如，Latin 1 Supplement 块包含许多语言中使用的字符，但没有一种语言使用其中的所有字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:14:37.243

获取字母表和语言排序顺序的简单方法在这里：http: [//developer.mimer.com/charts/index.tml](http://developer.mimer.com/charts/index.tml)
[http://developer.mimer.com/charts/tailorings.htm](http://developer.mimer.com/charts/tailorings.htm)

例如。芬兰语字母表： http:
[//developer.mimer.com/charts/finnish.htm](http://developer.mimer.com/charts/finnish.htm)
[http://developer.mimer.com/charts/tailorings.htm#Finnish](http://developer.mimer.com/charts/tailorings.htm#Finnish)

德语： http:
[//developer.mimer.com/charts/german.htm](http://developer.mimer.com/charts/german.htm)
[http://developer.mimer.com/charts/tailorings.htm#German](http://developer.mimer.com/charts/tailorings.htm#German)

# ios - 如何使用phonegap从java脚本调用ios方法？

> ID：12049500
> 
> 赞同：0
> 
> 时间：2012-08-21T06:35:19.103
> 
> 标签：ios, cordova

我是IOS中phonegap的新手。我按照电话间隙的指导线制作项目。但现在我想向前迈出一步。如何调用 AppDelegate 或任何其他 IOS 类的方法？

任何机构都可以建议我吗？

这是我的代码：

```
<p> 
         <label for="password" class="youpasswd" data-icon="p"> Your password </label>
                                    <input id="password" name="password" required="required" type="password" placeholder="Password" /> 
                                </p>
                                <p class="login button"> 
                                    <input onfocus="alert('focus on')" type="button" value="Login" onclick="login();"/> 
                                </p> 
```

我的脚本功能：

```
function login(){
    // here I want call any appDelegate Method   
} 
```

如果有人帮助我达到我的观点，我会感觉很好。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:53:18.947

嗨，我认为这可能会对您有所帮助 [http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

# sockets - TCP 发送段超时

> ID：12049501
> 
> 赞同：0
> 
> 时间：2012-08-21T06:35:26.140
> 
> 标签：sockets, tcp

我正在开发一个项目，该服务器使用 C 需要向客户端发送心跳以检查其状态（使用 tcp 套接字），我想知道服务器端程序如何检测客户端是否崩溃。

确切地说，建立了tcp连接后，当服务器向客户端发送一个段时，它需要得到一个ack回复，如果客户端崩溃了，一遍又一遍地重新传输这个段怎么办？我该如何处理这种情况，谁能给我一个例子？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:44:03.497

When you design the protocol you are going to use in your project, you may do this any way you please. Generally, one side sends a message to the other every X seconds and the other side sends a reply. If the side that doesn't send the message doesn't receive a message in Y seconds (where Y is greater than X) it assumes the connection is dead.

Basically, you can do this any way you want if you are designing the protocol that goes on top of TCP. Just remember that TCP doesn't do this for you.

# ios - 在另一个视图控制器中按下保存按钮后如何设置关系？

> ID：12049504
> 
> 赞同：0
> 
> 时间：2012-08-21T06:35:33.730
> 
> 标签：ios, xcode

我无法在代码中设置关系。

当按下“将食物添加到列表”上的保存按钮时，我想将该食物的关系设置为“保留”我将其添加到的列表。我现在拥有的，在 AddFoodToListTVC 中：

```
- (IBAction)save:(id)sender
{

Food *food = [NSEntityDescription insertNewObjectForEntityForName:@"Food"

food.name = foodToListNameTextField.text;

[food setHeldBy:?????]; 
```

用外行的话来说，我想说“这种食物在我们刚刚查看的列表中”。

这是我的第一个 iOS 项目，对于新手问题很抱歉。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:14:48.500

好的，我不知道如何使用 Storyboards，但如果您愿意接受这种类型的答案，我确实知道如何用纯代码做类似的事情。

对于简单的表格视图，您需要遵循两个一般规则：

1）告诉表格需要显示多少行

2）告诉表格您需要在每个单元格中呈现哪些元素

表中的行数通常由在视图控制器的 .h 文件中声明的数组中有多少元素来定义。

就像是

```
// View Controller header file (.h file)
@interface
{
    ...
    NSMutableArray *arrOfItems;
} 
```

然后在您的实现文件中，将食物添加到数组中，保存 Core Data 上下文，然后从 Core Data 执行获取并将结果存储到类变量数组中：

```
// this method gets called when your button is pressed
-(void)addFoodToList
{
    Food *food = [NSEntityDescription insertNewObjectForEntityForName:@"Food"

    food.name = foodToListNameTextField.text;

    [managedObjectContext save:nil];

    // for simplicity sake, we're doing a simple table reload
    [self fetchData]; // see below
    [myTableView reloadData]; // reloads the table to include the newly added food 
}

-(void)fetchData
{
    // core data fetch request of all items we want to display in the list

    arrOfItems = [managedObjectContext executeFetchRequest:request .... ];
} 
```

请注意，您应该在此表视图委托方法中返回类变量数组中的项目数：

```
// View Controller implementation file (.m file)
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(int)section
{
    // after adding the item to your arrOfItems and then doing a fetch request
    // earlier (see above code), this next statement would return the correct value
    return [arrOfItems count];
} 
```

剩下要做的就是在您的 UITableViewCellForRow 方法中：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString cellID = @"cellID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithID:cellID];

    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithTableViewCellStyle:UITableViewCellStyleDefault reusableIdentifier:cellID] autorelease];

        // init your element foodItemLabel
        foodTitleLabel = [[UILabel alloc] initWithFrame:...];
        foodTitleLabel.tag = 1;

        [cell.contentView addSubview:foodTitleLabel];

        [foodTitleLabel release];
    }

    foodTitleLabel = (UILabel *)[cell.contentView viewWithTag:1];

    FoodItem *foodItem = (FoodItem *)[arrOfItems objectAtIndexPath:indexPath.row];

    // display the food name
    foodTitleLabel.text = foodItem.title; 

    return cell;
} 
```

# iphone - 在 iOS 中，如何在服务器上使用带有自签名证书的 https 连接到服务器？

> ID：12049508
> 
> 赞同：2
> 
> 时间：2012-08-21T06:35:52.427
> 
> 标签：iphone, ios, ssl, https, self-signed

我正在为 iOS 5 开发，并且真的不想使用非 ARC 代码，所以我选择自己实现这个而不是使用 AFNetworking。这也可能是一个大问题，所以我把它分成两个较小的部分。

1) 在 iOS 5 中使用 https 连接到服务器。我在这里使用从“iOS 5 Programming Pushing the Limits”中提取的代码。因为我正在为 iOS 5 开发，所以我不在我的项目中使用不推荐使用的方法。“RNSecTrustEvaluateAsX509”是一种将证书重新评估为简单 X.509 证书而不是 SSL 握手的一部分的方法。

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{

    NSURLProtectionSpace *protSpace =  challenge.protectionSpace;
    SecTrustRef trust = protSpace.serverTrust;
    SecTrustResultType result = kSecTrustResultFatalTrustFailure;

    OSStatus status = SecTrustEvaluate(trust, &result);

    if (status == errSecSuccess && result == kSecTrustResultRecoverableTrustFailure) {
        SecCertificateRef cert = SecTrustGetCertificateAtIndex(trust, 0);
        CFStringRef subject = SecCertificateCopySubjectSummary(cert);

        NSLog(@"Trying to access %@. Got %@.", protSpace.host,
              (__bridge id)subject);
        CFRange range = CFStringFind(subject, CFSTR("192.168.1.100"), kCFCompareAnchored|kCFCompareBackwards);
        if (range.location != kCFNotFound) {
            NSLog(@"Creating new trust certificate.Ignoring the hostname.");
            status = RNSecTrustEvaluateAsX509(trust, &result);
        }
        CFRelease(subject);
    }

    if (status == errSecSuccess) {
        switch (result) {
            case kSecTrustResultInvalid:
            case kSecTrustResultDeny:
            case kSecTrustResultFatalTrustFailure:
            case kSecTrustResultOtherError:
            case kSecTrustResultRecoverableTrustFailure: {
                NSLog(@"Failing due to result: %lu", result);
                [challenge.sender cancelAuthenticationChallenge:challenge];
            }

                break;
            case kSecTrustResultProceed:
            case kSecTrustResultUnspecified: {
                NSLog(@"Successing with result: %lu", result);
                NSURLCredential *cred = [NSURLCredential credentialForTrust:trust];
                [challenge.sender useCredential:cred forAuthenticationChallenge:challenge];
            }
                break;
            default:
                NSAssert(NO,@"Unexpected result from trust evaluation: %d", result);
                break;
        }
    }
    else {
        // Something was broken
        NSLog(@"Complete failure with code: %lu", status);
        [challenge.sender cancelAuthenticationChallenge:challenge];
    }

} 
```

它连接到服务器，但我总是收到一条错误消息“无法完成操作（NSURLErrorDomain 错误 -1012）”。控制台显示“由于结果 5 而失败”，这意味着我得到了 kSecTrustResultRecoverableTrustFailure。我怀疑这是因为我在服务器上使用自签名证书。这导致如下第二个问题。

2）自签名证书导致问题。所以我添加了这些行

```
// Self-signed certificates need to be validated manually.
NSArray *anchors = [self serverAnchors];

SecTrustSetAnchorCertificates(trust, (__bridge CFArrayRef)anchors);
SecTrustSetAnchorCertificatesOnly(trust, YES); 
```

就在之前

```
OSStatus status = SecTrustEvaluate(trust, &result); 
```

在上面的 willSendRequestForAuthenticationChallenge 方法中。我还创建了一个方法：

```
- (NSArray *)serverAnchors
{
    static NSArray *anchors = nil;
    if (!anchors) {
        NSData *caData = [CA_CERTS dataUsingEncoding:NSUTF8StringEncoding];
        SecCertificateRef caRef = SecCertificateCreateWithData(kCFAllocatorDefault, (__bridge CFDataRef) caData);

        anchors = [NSArray arrayWithObjects:(__bridge id)caRef,  nil];

        if (caRef) {
            CFRelease(caRef);   
        }
    }

    return anchors;
} 
```

我将 CA_CERTS 定义为“der”格式的证书数据，这是我通过 SecCertificateCopyData 从服务器获取的 NSString。但我仍然不断收到 kSecTrustResultRecoverableTrustFailure。我真的不知道我在这里做的是否正确。如何使用自己的数据手动验证来自服务器的自签名证书？更具体地说，如何从 iOS 获取其数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:43:11.980

我建议将 OpenSSL 合并到您的项目中以处理证书和授权挑战！然后在'NSURLConnectionDelegate'协议的'connection：didReceiveAuthenticationChallenge：'方法中执行以下操作：

```
- (void) connection:(NSURLConnection*) connection didReceiveAuthenticationChallenge: (NSURLAuthenticationChallenge*) challenge {
if ([[[challenge protectionSpace] authenticationMethod] isEqualToString: NSURLAuthenticationMethodServerTrust]) {
    SecTrustRef trust = [[challenge protectionSpace] serverTrust];

    NSMutableArray* certificates = [NSMutableArray array];

    NSData* certificate2Data = // your certificate data
    NSData* certificate3Data = // even more certificate data if needed
    SecCertificateRef certificate2 = SecCertificateCreateWithData(NULL, (CFDataRef) certificate2Data);
    SecCertificateRef certificate3 = SecCertificateCreateWithData(NULL, (CFDataRef) certificate3Data);
    [certificates addObject: (id) certificate2];
    [certificates addObject: (id) certificate3];
    CFRelease(certificate2);
    CFRelease(certificate3);

    SecTrustSetAnchorCertificates(trust, (CFArrayRef) certificates);
    SecTrustSetAnchorCertificatesOnly(trust, true);

    SecTrustResultType      trust_result;
    SecTrustEvaluate(trust, &trust_result);
    if (trust_result == kSecTrustResultUnspecified) {
        if (SecTrustGetCertificateCount(trust) > 0) {
            SecCertificateRef leafCertificate = SecTrustGetCertificateAtIndex(trust, 0);

            NSData* leafCertificateData = (NSData*) SecCertificateCopyData(leafCertificate);

            const unsigned char* certificateDataBytes = (const unsigned char *)[leafCertificateData bytes];
            X509* certificateX509 = d2i_X509(NULL, &certificateDataBytes, [leafCertificateData length]);

            CFRelease(leafCertificateData);

            X509_NAME *issuerX509Name = X509_get_issuer_name(certificateX509);
            X509_NAME *subjectX509Name = X509_get_subject_name(certificateX509);

            /*
             with issuerX509Name and subjectX509Name you could check some properties of the certificate and cancel the 
             authentication challenge f.e.!

             if ([[self valueWithKey: @"CN" inName: subjectX509Name cert: certificateX509] isEqualToString: @"xxxx"] == NO) {
                [[challenge sender] cancelAuthenticationChallenge: challenge];
                return;
             }

            */

            NSURLCredential* credential = [NSURLCredential credentialForTrust: trust];
            [[challenge sender] useCredential: credential forAuthenticationChallenge: challenge];
        } else {
            [[challenge sender] cancelAuthenticationChallenge: challenge];
        }
    } else {
        [[challenge sender] cancelAuthenticationChallenge: challenge];
    }
}} 
```

# salesforce - Visualforce 电子邮件链接电子邮件模板

> ID：12049509
> 
> 赞同：0
> 
> 时间：2012-08-21T06:36:03.120
> 
> 标签：salesforce, apex-code, visualforce, force.com

我在 Visualforce apex:pageBlockTable 中有一个电子邮件列表，并希望使这些电子邮件适合特定的电子邮件模板，并用我单击的电子邮件填充收件人：字段，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:10:53.970

回答我的理解：逻辑 - 您需要将参数从您的 visualforce 页面传递到控制器/扩展，以便它知道要使用哪个模板（如果有多个模板）。这可以通过单选按钮来实现。

根据发送电子邮件部分，只需通过 getter 和 setter 将包含电子邮件的列的值传递给 apex 类。将这些电子邮件存储在一个数组中，使用 sendEmail 方法将电子邮件发送到电子邮件数组。

示例代码：

//VF page: //因此，如果您的电子邮件在 pageBlockTable 中，则代码必须类似于：

```
//Apex Class:
public class Test{
    List <Email__c> listEmail = [Select Email__c from Email__c];
    String[] toAddresses = new String[] {};
    public list<Email__c> getList() {        
        return listEmail;
    }

    public Test(){
        for(integer i =0; i < listEmail.size(); i++){
            toAddresses.add(listEmail[i].Email__c);
        } 
    }

    public void  SendEmail(){
        Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage();
        //pass the address list
        mail.setToAddresses(toAddresses);
        //set the templateID
         mail.setTemplateID('');
        //set other fields (like SenderName, ReplyTo, Signature) -     http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_email_outbound_base.htm 
        //send the email
        mail.sendEmail();
    }
} 
```

请让我知道这是否适合您！

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T03:35:45.750

您是否需要能够事先编辑电子邮件？如果不是，您可以使用命令链接调用发送 SingleEmailMessage 的方法

[http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_email_outbound_single.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_email_outbound_single.htm)

并从那里设置模板...

# pthreads - pthread_create 的第一个参数为 NULL 时出现分段错误 11

> ID：12049510
> 
> 赞同：0
> 
> 时间：2012-08-21T06:36:04.403
> 
> 标签：pthreads

还行吧：

```
pthread_create(&thread, NULL, --omited--); 
```

这将导致分段错误：

```
pthread_create(NULL, NULL, --omited--); 
```

我检查了手册它没有说第一个参数不能为NULL，这是一个错误吗？

我在 OSX 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:40:43.030

[文档](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_create.html)说“[u]成功完成后， *pthread_create*() 将创建的线程的 ID 存储在 thread 引用的位置*。* ” 将线程 ID 存储到 NULL 位置将导致分段错误。

# symfony1 - 调试工具栏在 symfony 1.4 中不可见

> ID：12049512
> 
> 赞同：0
> 
> 时间：2012-08-21T06:36:10.503
> 
> 标签：symfony1, symfony-1.4

我是 Symfony 的新手，在我的公司里，我接管了其他人使用 Symfony 1.4 创建的项目，但现在不可用。

我浏览了 jobeet 教程并且对 symfony 非常满意，但即使环境设置为“dev”，我也无法加载调试工具栏。即使通过 frontend_dev.php 文件也看不到调试栏。常用设置有：

**工厂.yml**

```
prod:
    logger:
        class:   sfNoLogger
        param:
            level:   err
            loggers: ~

dev:
    mailer:
        param:
          delivery_strategy: none 
```

**设置.yml**

```
prod:
  .settings:
    error_reporting:        <?php echo ((E_ALL | E_STRICT))."\n" ?>
    no_script_name:         true
    logging_enabled:        true

dev:
  .settings:
    error_reporting:        <?php echo (((E_ALL | E_STRICT)^ E_NOTICE) ^ E_DEPRECATED)."\n" ?>
    web_debug:              true
    cache:                  false
    no_script_name:         false
    etag:                   false
    compressed:             false 
```

**Frontend_dev.php**文件包括

```
require_once(dirname(__FILE__).'/../config/ProjectConfiguration.class.php');

$configuration = ProjectConfiguration::getApplicationConfiguration('frontend', 'dev', true);
sfContext::createInstance($configuration)->dispatch(); 
```

错误在哪里？我们正在使用在布局、部分和模板 (*Success.php) 页面中定义的自定义设计。我是否需要在布局中添加一些代码以启用调试栏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:31:45.040

你清除缓存了吗？

常见的 symfony 规则（*类似于 #protips*）：

> 如果更新一个配置文件后没有改变，请尝试：**`php symfony cc`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T08:02:41.643

您必须编辑您的 httpd.conf（用于 apache Web 服务器）文件，尤其是您的虚拟主机定义。添加此别名 /sf /home/sfproject/lib/vendor/symfony/data/web/sf AllowOverride All Allow from All

看到[这个](http://symfony.com/legacy/doc/gentle-introduction/1_4/en/03-Running-Symfony#chapter_03_sub_the_secure_way)。

# visual-c++ - 如何释放组件分配的所有内存

> ID：12049513
> 
> 赞同：0
> 
> 时间：2012-08-21T06:36:11.520
> 
> 标签：visual-c++, memory-management, memory-leaks, sparse-matrix

我有一个在 C++ 中实现稀疏矩阵的组件，但是当我检查它的实现时，一些内存分配没有正确释放。我可以访问源代码，但它有点复杂，我不想更改它。令我感到奇怪的是，一些简单的函数如 printf 和 fopen 有内存泄漏，如 deleaker 所示！

我有个问题：

1.  有什么办法可以释放组件外部分配的所有内存空间？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:42:40.140

1.  这取决于代码。为了释放一块内存，您需要分配它的函数返回的指针。您可能无法从外部访问此指针。例如，考虑你的类有这样的功能：

    ```
    void func() {
        int * ptr = new int[1024];
    } 
    ```

    一旦此函数返回，就不可能释放该内存，因为返回的指针`new`丢失了。

2.  那里不能帮你。

# flash - 将 HTML5 转换为 Flash

> ID：12049514
> 
> 赞同：4
> 
> 时间：2012-08-21T06:36:14.160
> 
> 标签：flash, html, video, html5-video, impress.js

我广泛使用 impress.js 来创建大量 HTML5 演示文稿。这些演示文稿需要显示在触摸屏信息亭上。不幸的是，处理信息亭的供应商表示，这些信息亭上只能显示 Flash 内容。

是否有解决方法（排除了更换供应商，因为他们控制着这里的大多数信息亭）？如何在不丢失演示文稿效果的情况下将 HTML5 转换为 Flash？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:03:40.413

据我所知，唯一的方法是移植它（将应用程序重写到 Flash 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:28:45.740

可以在服务器端将 HTML5`<canvas>`动画渲染为视频文件（h264、WMV、选择您喜欢的）。旧版浏览器可以播放此视频。

我们开发了专有技术来满足这一需求。

见老问题

*   [在服务器端渲染 HTML5 动画？](https://stackoverflow.com/questions/5805850/rendering-html5-animation-server-side)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T07:20:26.357

如果您了解 php，则可以使用以下文档将 .jpg、.pdf 等文件转换为 .swf。为此，请按照下列步骤操作：

1）通过composer下载phpswfTools

[https://php-swftools.readthedocs.org/en/latest/](https://php-swftools.readthedocs.org/en/latest/)

```
 {
      "require": {
          "php-ffmpeg/php-ffmpeg": "master"
     }
   } 
```

2) 在你的库中添加这个文件“vendor/autoload.php”

```
 <?php
    require 'vendor/autoload.php'; 
```

3）然后使用以下代码将PDF转换为SWF

```
 <?php

    use SwfTools\PDFFile;
    use SwfTools\Configuration;

    $PDF = new PDFFile('file.pdf');
    /* Will autodetect pdf2swf location */
    $PDF->toSwf('destination.swf');

    $PDF = new PDFFile('file.pdf',new  Configuration('pdf2swf'=>'/my/custom/path/to/pdf2swf'));
   /* Will use /my/custom/path/to/pdf2swf */
   $PDF->toSwf('destination.swf'); 
```

# android - 旋转设备时 EditText 数据丢失

> ID：12049519
> 
> 赞同：2
> 
> 时间：2012-08-21T06:36:49.480
> 
> 标签：android, android-edittext, orientation, onconfigurationchanged

好的，伙计们，我已经完成了。过去两天我一直在谷歌搜索，但找不到确切的解决方案。每个人都在谈论 configChanges 和所有那些对我来说似乎不起作用的陈词滥调。

我有一个包含 2 个 EditTexts 的登录屏幕。现在这个登录屏幕有不同的纵向和横向布局。所以我必须在 layout 文件夹中创建一个 login.xml，在 layout-land 文件夹中创建另一个 login.xml。为了支持方向更改，我覆盖了 LoginActivity 类中的 onConfigurationChanged() 方法。在此方法中，我调用 setContentView(R.layout.login) 方法，以便将适当的 login.xml 设置为每个方向的布局。

毕竟，我还在清单文件中定义了以下内容：

```
android:configChanges="orientation|keyboardHidden" 
```

但我仍然面临着著名的老问题。如果 Edittext 中有任何文本并且设备旋转，则该文本将丢失。我不想丢失那个文本。有没有可能？我已经读到我们可以使用 onSaveInstanceState(Bundle savedInstanceState) 方法来做到这一点，我什至也尝试过，但它对我不起作用。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T06:43:29.450

使用 put 方法将值存储在 onSaveInstanceState 中：

```
protected void onSaveInstanceState(Bundle extra) {
  super.onSaveInstanceState(extra);
  extra.putString("text", "your text here");
} 
```

并恢复 onCreate 中的值：

```
public void onCreate(Bundle extra) {
  if (extra != null) {
    String value = extra.getString("text");
  }
} 
```

编辑（实际工作）：

尝试从清单中删除 android:configChanges="orientation|keyboardHidden"。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:08:47.687

首先删除您所做的所有`onConfigurationChanged`事情`configChanges=orientation`- 此解决方案适用于弱者。然后执行以下操作：

1.  覆盖 onRetainNonConfigurationInstance() 以便它返回您需要在设备旋转时保存的文本。您可能需要创建一个包含这些值的简单对象 - 例如：

    ```
    public class TextObject {
        public String loginText;
        public String passwordText;
    } 
    ```

2.  在 onCreate 中，初始化视图后，尝试通过`getLastNonConfigurationInstance()`. 如果这是您第一次经历，这将返回 null `onCreate`，因此您需要进行 null 检查。例子：

    ```
    TextObject mySavedTextObject = (TextObject) getLastNonConfigurationInstance();
    if(mySavedTextObject!=null) {
      myLoginEditText.setText(mySavedTextObject.loginText);
      myPasswordEditText.setText(mySavedTextObject.passwordText);
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T15:10:05.700

在[https://github.com/jcraane/AndroidBundleState](https://github.com/jcraane/AndroidBundleState)上，您会找到一个非常简单的库来为您处理状态逻辑。您所要做的就是注释您的字段。

@BundleState("state_name") 私有字符串名称；在 rotationChange 之后，该库将为您恢复字段中的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T08:42:18.453

只需将此设置为您的登录文本和密码文本

textView.setSaveEnabled(false);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-22T10:11:54.800

这可能是非常规的或矫枉过正的，但我发现在应用程序类中以包的形式存储数据对于片段和活动最普遍成功和直观。

在您的应用程序类中添加：

```
static class Bundles {
    static Bundle USER_BUNDLE = null;
} 
```

然后在您的片段或活动中添加：

```
private String username = "";

@Override
public void onSaveInstanceState(@NonNull Bundle extra) {
    super.onSaveInstanceState(extra);
    EditText txtUsername = v.findViewById(R.id.user_name);
    String username = txtUsername==null ? "" : txtUsername.getText().toString();
    MyApplication.Bundles.USER_BUNDLE = new Bundle();
    MyApplication.Bundles.USER_BUNDLE.putString("User.username", username);     
}

@Override
public void onCreate(Bundle extra) {
    super.onCreate(extra);
    if (MyApplication.Bundles.USER_BUNDLE != null) {
        username = MyApplication.Bundles.USER_BUNDLE.getString("User.username", "");
    }
} 
```

然后在您设置视图组件的任何位置添加如下内容：

```
EditText txtUsername = v.findViewById(R.id.user_name);
if (txtUsername!=null) txtUsername.setText(username); 
```

添加不同类型的多个值很容易，如果您使用片段，您甚至可以在它们之间共享数据。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-02-06T11:30:11.923

在代码中方向即将改变的点（时间），实现：

```
this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

但这必须在屏幕改变方向之前放置，例如，当从设备相机返回到您的应用程序时，应用程序经常会无缘无故地返回并再次更改方向。

**并且不要忘记标记我=）**

祝你好运。

# android - 如何在一定的时间间隔后在 imageview 中设置图像？

> ID：12049520
> 
> 赞同：1
> 
> 时间：2012-08-21T06:36:55.330
> 
> 标签：android

我有一个图像视图和一个包含图像 URL 的数组。我必须在每 3 秒后遍历数组并在图像视图中设置图像......比如说在图像视图中的起始图像，其 url 位于数组的索引零，然后在 3 sec 图像视图应在数组的索引 1 处显示图像，依此类推。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:50:41.857

使用它来定期更新您的图像视图...

```
 Timer timer = null;
 int i = 0;

        imgView=(ImageView)findViewById(R.id.img);
            timer = new Timer("TweetCollectorTimer");
                    timer.schedule(updateTask, 6000L, 3000L);//here 6000L is starting //delay and 3000L is periodic delay after starting delay

            private TimerTask updateTask = new TimerTask() {

                    @Override
                    public void run() {

                        YourActivity.this.runOnUiThread(new Runnable() {

                            @Override
                            public void run() { // TODO Auto-generated method stub
                                imgView.setImageResource(photoAry[i]);
                                i++;
                                if (i > 5)
                                {
                                    i = 0;
                                                    }
                            }

                        });
                    }
                };
            int photoAry[] = { R.drawable.photo1, R.drawable.photo2, R.drawable.photo3,
                        R.drawable.photo4, R.drawable.photo5, R.drawable.photo6 }; 
```

**为了阻止这个，你可以打电话**

```
timer.cancel(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T10:40:43.580

您应该`Handler's postDelayed`为此目的使用函数。它将以指定的延迟运行您的代码`on the main UI thread`，因此您将能够`update UI controls`。

```
private int mInterval = 3000; // 3 seconds by default, can be changed later
  private Handler mHandler;

  @Override
  protected void onCreate(Bundle bundle) {
    ...
    mHandler = new Handler();
  }

  Runnable mStatusChecker = new Runnable() {
    @Override 
    public void run() {
      updateYourImageView(); //do whatever you want to do in this fuction.
      mHandler.postDelayed(mStatusChecker, mInterval);
    }
  };

  void startRepeatingTask() {
    mStatusChecker.run(); 
  }

  void stopRepeatingTask() {
    mHandler.removeCallbacks(mStatusChecker);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:44:13.407

try using a handler and set the image to the imageView in the handler code.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:51:06.053

您可以使用特定时间段的计时器，该计时器将在时间间隔后重复该功能。

您可以使用如下代码：

```
ImageView img = (ImageView)findViewById(R.id.imageView1);
int delay = 0; // delay for 0 milliseconds.
int period = 25000; // repeat every 25 seconds.
Timer timer = new Timer();
timer.scheduleAtFixedRate(new SampleTimerTask(), delay, period);

public class SampleTimerTask extends TimerTask {
    @Override
    public void run() {
        //MAKE YOUR LOGIC TO SET IMAGE TO IMAGEVIEW
        img.setImageResource(R.drawable.ANYRANDOM);
    }
} 
```

希望它对你有用。

# python - 如何让 Turtle 识别一个圆圈？

> ID：12049536
> 
> 赞同：1
> 
> 时间：2012-08-21T06:38:26.310
> 
> 标签：python, geometry, turtle-graphics

我正在尝试使用 Turtle Graphics 制作一个 Python 程序，该程序在一个矩形内绘制 2 个重叠的圆圈（如维恩图），并将随机点绘制到维恩图上。

我已经成功地做到了这一点，但现在我想让程序识别一个点是在一个圆圈中还是在维恩图的交点中。然后我想根据它们所在的区域更改点的颜色。

到目前为止，我为该程序所做的是列出变量、定义形状并创建一个 for 循环以随机生成点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:42:53.867

`turtle`只是一个图形库 - 它不会跟踪您在屏幕上绘制的对象。因此，要计算给定点是否在您的维恩图圆圈之一内，您需要采取以下步骤：

1.  调用时存储每个圆圈的坐标`circle()` （课程会很有帮助，但您可能还没有学过这些）
2.  调用一个函数来测试该点是否在存储的圆坐标空间中。这将是对笛卡尔坐标的纯数学运算。@Tim 给出的链接（[用于测试点是否在圆圈内的方程式](https://stackoverflow.com/questions/481144/equation-for-testing-if-a-point-is-inside-a-circle)）将帮助您实现这一目标。

第 1 步的一点指导：

当你画一个圆时，你有它的中心（当前海龟位置）和一个半径。从那里，获得该圆内的所有点只是几何（如果您无法得出公式，快速搜索将帮助您）。我建议您制作一个绘制维恩图圆的函数，以及一个返回圆内点的函数。像这样的东西：

```
def venn_circle(circle_color, circle_radius):
    """ Draws a colored circle, returns the points within. """
    turtle.color(circle_color)
    # <fill in: code to move, orient the turtle>
    center = turtle.position()
    # <fill in: code to draw the circle>
    return circle_coords(center, circle_radius)

def circle_coords(center, radius):
    """ Return the set of pixels within the circle. """
    raise NotImplementedError() 
```

一个简短的说明 - 你永远不应该这样做`from package import *`。在某些情况下没关系，但通常只会导致麻烦。在我的示例代码中，我假设您已将此习惯用法替换为`import turtle`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-09T22:46:21.693

我有非常相似的任务，试图以简单的方式解决它：

```
import tkinter
import random

canvas = tkinter.Canvas(width = 300, height = 200, bg = "white")
canvas.pack()

n = 500

for i in range(n):
    x = random.randrange(0, 300)
    y = random.randrange(0, 200)
    bod = canvas.create_oval(x+3, y+3, x-3, y-3, fill = "black")
    if (x - 100)**2+(y - 100)**2 < 80**2:       #for dot in circle1 fill red
        canvas.itemconfig(bod, fill = "red")
    if (x - 180)**2+(y - 100)**2 < 90**2:       #for dot in circle2 fill blue
        canvas.itemconfig(bod, fill = "blue")
    if (x - 100)**2+(y - 100)**2 < 80**2 and (x - 180)**2+(y - 100)**2 < 90**2:
        canvas.itemconfig(bod, fill = "green")  #overlapping of circle1 and 2 
```

# box-api - 上传大小限制

> ID：12049546
> 
> 赞同：0
> 
> 时间：2012-08-21T06:39:14.013
> 
> 标签：box-api

我尝试使用 API 将大文件上传到 box.net (box.com)。我看到有上传大小限制。对我来说是100MB。如果我上传大小正好为 100MB（104860224 字节）的文件，则不接受文件。如果更少，则上传有效。

我想问一下这个限制是否对所有 box.net 用户都是一样的，或者它会根据帐户包而有所不同？

有没有办法通过 API 获得上传限制？之前是艺术文件上传我想检查这个大小是否会被接受。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:02:40.507

对于上传限制，使用这个：

```
curl https://api.box.com/2.0/users/10543463 \
  -H "Authorization: Bearer ACCESS_TOKEN" 
```

请参阅：[https ://docs.box.com/reference#users](https://docs.box.com/reference#users)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:40:34.290

有多种不同的文件大小限制，具体取决于您注册的 Box 帐户类型： [https ://www.box.com/pricing/](https://www.box.com/pricing/)

# android - 如何在 Android 4.0 设备上以编程方式启用 USB Tethering？

> ID：12049547
> 
> 赞同：14
> 
> 时间：2012-08-21T06:39:16.403
> 
> 标签：android, usb, tethering

我想在我的 Android 4.0 设备上从我的应用程序启用 USB 网络共享？以下代码适用于 Android 2.2，但不适用于 4.0。任何人都可以帮忙吗？

```
int USBTethering(boolean b) {
        try {
            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            Log.d(tag, "test enable usb tethering");
            Method[] wmMethods = cm.getClass().getDeclaredMethods();
            String str = "";
            if (b)
                str = "tether";
            else
                str = "untether";
            for (Method method : wmMethods) {
                Log.d("in usb tethering method",method.getName()+"<<nn>>");
                if (method.getName().equals(str)) {
                    Log.d(tag, "gg==" + method.getName());
                    Log.d("in if", " case matches "+method.getName()+"and str is "+str);
                    try {
                        Integer code = (Integer) method.invoke(cm, "usb0");
                    //  code = (Integer) method.invoke(cm, "setting TH");
                        Log.d(tag, "code===" + code);
                        return 1;
                    } catch (IllegalArgumentException e) {
                        Log.d(tag, "eroor== gg " + e.toString());
                        e.printStackTrace();
                    } catch (IllegalAccessException e) {
                        Log.d(tag, "eroor== gg " + e.toString());
                        e.printStackTrace();
                    } catch (InvocationTargetException e) {
                        Log.d(tag, "eroor== gg " + e.toString());
                        e.printStackTrace();
                    }
                }
            }
            return 0;

                       } catch (Exception e) {
            Log.e(tag, "" + e);
            return 0;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:32:48.080

我有与此类似的代码，它适用于 Android 4.0（但仅适用于某些设备）。不幸的是，对网络共享的访问是非常特定于供应商的。我确实注意到的一件事是您没有使您尝试调用的方法可访问。如果在您使用的设备上，该方法已设为私有，则此方法无效。尝试添加：

```
method.setAccessible(true); 
```

在你打电话之前

```
Integer code = (Integer) method.invoke(cm, "usb0"); 
```

另一件事是接口名称（在您的情况下，“usb0”也是特定于供应商的。不同制造商的不同设备上的接口名称不同。确保您为正在测试的设备获得正确的接口名称.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T20:31:53.350

在我的植根设备上，我得到了它：（xamarin）

```
suProcess = Runtime.GetRuntime().Exec("su root service call connectivity 30 i32 1"); 
```

见 [https://android.stackexchange.com/questions/29954/can-i-change-some-android-settings-from-the-command-line](https://android.stackexchange.com/questions/29954/can-i-change-some-android-settings-from-the-command-line)

# php - TCPDF：setPage 然后 addPage 并没有真正在现有页面之间创建新页面

> ID：12049550
> 
> 赞同：0
> 
> 时间：2012-08-21T06:39:33.943
> 
> 标签：php, tcpdf

我用 TCPDF 创建了一个复杂的 PDF，它的工作就像一个魅力。

现在我有大约 230 页并且想要创建一个索引。该索引无法使用 TOCPage 函数创建，因为我有自己想要使用的设计。由于页码只有通过添加页面并在其上放置内容才能知道，所以我不能只在创建 pdf 期间建立索引。所以最后我使用 setPage 函数跳转到第一页或第二页，然后使用 addPage 开始创建我的索引。但不幸的是，这只是跳转到下一页并用我的索引内容覆盖它。

代码很简单，下面的代码结构和我的一样。索引的创建没有任何问题，看起来不错。但它会覆盖我现有的页面。

知道如何在现有页面之间添加页面吗？

```
$pdf = new PDF(); // <-- my pdf class extending from TCPDF
// add stuff using multicell, cell or anything else
$pdf->setPage( 2); // jump back to page 2 as we have an array containing the index
foreach( $my_index as $index) {
  $pdf->addPage();
  // add index stuff on new page which should start at page 3, all other existing pages should move forward
}
$pdf->Output(); 
```

# json - R / JSON无法解决解析问题

> ID：12049560
> 
> 赞同：1
> 
> 时间：2012-08-21T06:40:47.013
> 
> 标签：json, r, twitter

我有一个包含以 JSON 格式存储的推文的文本文件。

```
"{\"contributors\":null,\"coordinates\":null,\"in_reply_to_user_id\":null,\"truncated\":false,\"text\":\"I find wrapping myself up in my rug more fun than I should.\",\"entities\":{\"hashtags\":[],\"urls\":[],\"user_mentions\":[]},\"place\":null,\"id_str\":\"234702954832220160\",\"favorited\":false,\"geo\":null,\"source\":\"\u003Ca href=\\"http:\/\/blackberry.com\/twitter\\" rel=\\"nofollow\\"\u003ETwitter for BlackBerry\u00ae\u003C\/a\u003E\",\"retweet_count\":0,\"in_reply_to_status_id_str\":null,\"in_reply_to_screen_name\":null,\"created_at\":\"Sun Aug 12 17:28:39 +0000 2012\",\"in_reply_to_user_id_str\":null,\"user\":{\"show_all_inline_media\":true,\"lang\":\"en\",\"friends_count\":200,\"profile_sidebar_border_color\":\"BDDCAD\",\"location\":\"Newcastle\",\"profile_background_image_url_https\":\"https:\/\/si0.twimg.com\/profile_background_images\/613341681\/ed47iwy7apcu7nltbj1y.jpeg\",\"id_str\":\"369637639\",\"listed_count\":0,\"profile_use_background_image\":true,\"profile_image_url_https\":\"https:\/\/si0.twimg.com\/profile_images\/2459865521\/photo_653_normal.jpg\",\"description\":\"Hi, I'm Ellen, but you've probably guessed that by now. You can follow me but I don't know where I'm going.\",\"follow_request_sent\":null,\"following\":null,\"profile_text_color\":\"333333\",\"default_profile\":false,\"profile_background_image_url\":\"http:\/\/a0.twimg.com\/profile_background_images\/613341681\/ed47iwy7apcu7nltbj1y.jpeg\",\"followers_count\":335,\"is_translator\":false,\"time_zone\":\"London\",\"profile_link_color\":\"0084B4\",\"protected\":false,\"created_at\":\"Wed Sep 07 17:56:39 +0000 2011\",\"profile_background_color\":\"9AE4E8\",\"name\":\"ellen\u2020urnbull \",\"default_profile_image\":false,\"contributors_enabled\":false,\"statuses_count\":788,\"geo_enabled\":false,\"notifications\":null,\"profile_background_tile\":false,\"url\":null,\"profile_image_url\":\"http:\/\/a0.twimg.com\/profile_images\/2459865521\/photo_653_normal.jpg\",\"screen_name\":\"ellenteee\",\"id\":369637639,\"verified\":false,\"utc_offset\":0,\"favourites_count\":10,\"profile_sidebar_fill_color\":\"DDFFCC\"},\"retweeted\":false,\"in_reply_to_status_id\":null,\"id\":234702954832220160}
"
"{\"contributors\":null,\"coordinates\":null,\"in_reply_to_user_id\":null,\"truncated\":false,\"text\":\"Goodevening!\",\"entities\":{\"hashtags\":[],\"urls\":[],\"user_mentions\":[]},\"place\":null,\"id_str\":\"234702954828029952\",\"favorited\":false,\"geo\":null,\"source\":\"\u003Ca href=\\"http:\/\/twitter.com\/download\/android\\" rel=\\"nofollow\\"\u003ETwitter for Android\u003C\/a\u003E\",\"retweet_count\":0,\"in_reply_to_status_id_str\":null,\"in_reply_to_screen_name\":null,\"created_at\":\"Sun Aug 12 17:28:39 +0000 2012\",\"in_reply_to_user_id_str\":null,\"user\":{\"show_all_inline_media\":true,\"lang\":\"en\",\"friends_count\":130,\"profile_sidebar_border_color\":\"D3D2CF\",\"location\":\"#3block,St. Rose \",\"profile_background_image_url_https\":\"https:\/\/si0.twimg.com\/profile_background_images\/341819936\/Tyga.jpg\",\"id_str\":\"331869167\",\"listed_count\":0,\"profile_use_background_image\":true,\"profile_image_url_https\":\"https:\/\/si0.twimg.com\/sticky\/default_profile_images\/default_profile_0_normal.png\",\"description\":\" R.I.P Mealey you will be truly miss. Gone but never forgotten. #teamGod #HeatNation\",\"follow_request_sent\":null,\"following\":null,\"profile_text_color\":\"634047\",\"default_profile\":false,\"profile_background_image_url\":\"http:\/\/a0.twimg.com\/profile_background_images\/341819936\/Tyga.jpg\",\"followers_count\":100,\"is_translator\":false,\"time_zone\":\"Central Time (US & Canada)\",\"profile_link_color\":\"088253\",\"protected\":false,\"created_at\":\"Fri Jul 08 21:06:02 +0000 2011\",\"profile_background_color\":\"EDECE9\",\"name\":\"T\u00e9 lu\u00f2 y\u012b \",\"default_profile_image\":true,\"contributors_enabled\":false,\"statuses_count\":16944,\"geo_enabled\":false,\"notifications\":null,\"profile_background_tile\":false,\"url\":null,\"profile_image_url\":\"http:\/\/a0.twimg.com\/sticky\/default_profile_images\/default_profile_0_normal.png\",\"screen_name\":\"Troy_rollupone\",\"id\":331869167,\"verified\":false,\"utc_offset\":-21600,\"favourites_count\":41,\"profile_sidebar_fill_color\":\"E3E2DE\"},\"retweeted\":false,\"in_reply_to_status_id\":null,\"id\":234702954828029952}
" 
```

我使用以下方法扫描文件：

```
> twit <- scan("twitCapture2.txt","",sep="\n")
Read 4 items
> twit
[1] "\"{\\\"contributors\\\":null,\\\"coordinates\\\":null,\\\"in_reply_to_user_id\\\":null,\\\"truncated\\\":false,\\\"text\\\":\\\"I find wrapping myself up in my rug more fun than I should.\\\",\\\"entities\\\":{\\\"hashtags\\\":[],\\\"urls\\\":[],\\\"user_mentions\\\":[]},\\\"place\\\":null,\\\"id_str\\\":\\\"234702954832220160\\\",\\\"favorited\\\":false,\\\"geo\\\":null,\\\"source\\\":\\\"\\u003Ca href=\\\\\"http:\\/\\/blackberry.com\\/twitter\\\\\" rel=\\\\\"nofollow\\\\\"\\u003ETwitter for BlackBerry\\u00ae\\u003C\\/a\\u003E\\\",\\\"retweet_count\\\":0,\\\"in_reply_to_status_id_str\\\":null,\\\"in_reply_to_screen_name\\\":null,\\\"created_at\\\":\\\"Sun Aug 12 17:28:39 +0000 2012\\\",\\\"in_reply_to_user_id_str\\\":null,\\\"user\\\":{\\\"show_all_inline_media\\\":true,\\\"lang\\\":\\\"en\\\",\\\"friends_count\\\":200,\\\"profile_sidebar_border_color\\\":\\\"BDDCAD\\\",\\\"location\\\":\\\"Newcastle\\\",\\\"profile_background_image_url_https\\\":\\\"https:\\/\\/si0.twimg.com\\/profile_background_images\\/613341681\\/ed47iwy7apcu7nltbj1y.jpeg\\\",\\\"id_str\\\":\\\"369637639\\\",\\\"listed_count\\\":0,\\\"profile_use_background_image\\\":true,\\\"profile_image_url_https\\\":\\\"https:\\/\\/si0.twimg.com\\/profile_images\\/2459865521\\/photo_653_normal.jpg\\\",\\\"description\\\":\\\"Hi, I'm Ellen, but you've probably guessed that by now. You can follow me but I don't know where I'm going.\\\",\\\"follow_request_sent\\\":null,\\\"following\\\":null,\\\"profile_text_color\\\":\\\"333333\\\",\\\"default_profile\\\":false,\\\"profile_background_image_url\\\":\\\"http:\\/\\/a0.twimg.com\\/profile_background_images\\/613341681\\/ed47iwy7apcu7nltbj1y.jpeg\\\",\\\"followers_count\\\":335,\\\"is_translator\\\":false,\\\"time_zone\\\":\\\"London\\\",\\\"profile_link_color\\\":\\\"0084B4\\\",\\\"protected\\\":false,\\\"created_at\\\":\\\"Wed Sep 07 17:56:39 +0000 2011\\\",\\\"profile_background_color\\\":\\\"9AE4E8\\\",\\\"name\\\":\\\"ellen\\u2020urnbull \\\",\\\"default_profile_image\\\":false,\\\"contributors_enabled\\\":false,\\\"statuses_count\\\":788,\\\"geo_enabled\\\":false,\\\"notifications\\\":null,\\\"profile_background_tile\\\":false,\\\"url\\\":null,\\\"profile_image_url\\\":\\\"http:\\/\\/a0.twimg.com\\/profile_images\\/2459865521\\/photo_653_normal.jpg\\\",\\\"screen_name\\\":\\\"ellenteee\\\",\\\"id\\\":369637639,\\\"verified\\\":false,\\\"utc_offset\\\":0,\\\"favourites_count\\\":10,\\\"profile_sidebar_fill_color\\\":\\\"DDFFCC\\\"},\\\"retweeted\\\":false,\\\"in_reply_to_status_id\\\":null,\\\"id\\\":234702954832220160}"
[2] "\""                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
[3] "\"{\\\"contributors\\\":null,\\\"coordinates\\\":null,\\\"in_reply_to_user_id\\\":null,\\\"truncated\\\":false,\\\"text\\\":\\\"Goodevening!\\\",\\\"entities\\\":{\\\"hashtags\\\":[],\\\"urls\\\":[],\\\"user_mentions\\\":[]},\\\"place\\\":null,\\\"id_str\\\":\\\"234702954828029952\\\",\\\"favorited\\\":false,\\\"geo\\\":null,\\\"source\\\":\\\"\\u003Ca href=\\\\\"http:\\/\\/twitter.com\\/download\\/android\\\\\" rel=\\\\\"nofollow\\\\\"\\u003ETwitter for Android\\u003C\\/a\\u003E\\\",\\\"retweet_count\\\":0,\\\"in_reply_to_status_id_str\\\":null,\\\"in_reply_to_screen_name\\\":null,\\\"created_at\\\":\\\"Sun Aug 12 17:28:39 +0000 2012\\\",\\\"in_reply_to_user_id_str\\\":null,\\\"user\\\":{\\\"show_all_inline_media\\\":true,\\\"lang\\\":\\\"en\\\",\\\"friends_count\\\":130,\\\"profile_sidebar_border_color\\\":\\\"D3D2CF\\\",\\\"location\\\":\\\"#3block,St. Rose \\\",\\\"profile_background_image_url_https\\\":\\\"https:\\/\\/si0.twimg.com\\/profile_background_images\\/341819936\\/Tyga.jpg\\\",\\\"id_str\\\":\\\"331869167\\\",\\\"listed_count\\\":0,\\\"profile_use_background_image\\\":true,\\\"profile_image_url_https\\\":\\\"https:\\/\\/si0.twimg.com\\/sticky\\/default_profile_images\\/default_profile_0_normal.png\\\",\\\"description\\\":\\\" R.I.P Mealey you will be truly miss. Gone but never forgotten. #teamGod #HeatNation\\\",\\\"follow_request_sent\\\":null,\\\"following\\\":null,\\\"profile_text_color\\\":\\\"634047\\\",\\\"default_profile\\\":false,\\\"profile_background_image_url\\\":\\\"http:\\/\\/a0.twimg.com\\/profile_background_images\\/341819936\\/Tyga.jpg\\\",\\\"followers_count\\\":100,\\\"is_translator\\\":false,\\\"time_zone\\\":\\\"Central Time (US & Canada)\\\",\\\"profile_link_color\\\":\\\"088253\\\",\\\"protected\\\":false,\\\"created_at\\\":\\\"Fri Jul 08 21:06:02 +0000 2011\\\",\\\"profile_background_color\\\":\\\"EDECE9\\\",\\\"name\\\":\\\"T\\u00e9 lu\\u00f2 y\\u012b \\\",\\\"default_profile_image\\\":true,\\\"contributors_enabled\\\":false,\\\"statuses_count\\\":16944,\\\"geo_enabled\\\":false,\\\"notifications\\\":null,\\\"profile_background_tile\\\":false,\\\"url\\\":null,\\\"profile_image_url\\\":\\\"http:\\/\\/a0.twimg.com\\/sticky\\/default_profile_images\\/default_profile_0_normal.png\\\",\\\"screen_name\\\":\\\"Troy_rollupone\\\",\\\"id\\\":331869167,\\\"verified\\\":false,\\\"utc_offset\\\":-21600,\\\"favourites_count\\\":41,\\\"profile_sidebar_fill_color\\\":\\\"E3E2DE\\\"},\\\"retweeted\\\":false,\\\"in_reply_to_status_id\\\":null,\\\"id\\\":234702954828029952}"                                   
[4] "\""                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
> 
```

然后，当我尝试使用时`fromJSON`，出现以下错误：

```
> library(RJSONIO)
> 
> twit1<-fromJSON(twit1)
Error in file(con, "r") : invalid 'description' argument
> twit1<-fromJSON(twit1[1])
Error in file(con, "r") : cannot open the connection

> f <- RJSONIO::fromJSON(toJSON(twit1[3]))
> f$text
Error in f$text : $ operator is invalid for atomic vectors
> f <- rjson::fromJSON(toJSON(twit1[3]))
> f$text
Error in f$text : $ operator is invalid for atomic vectors
> 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:16:16.093

“$ 运算符对原子向量无效”似乎是由以下原因引起的：

不工作： `{a: 1, b: 2}` `{a: 3, b: 4, c: 5}`

工作正常： `{results: [` `{a: 1, b: 2},` `{a: 3, b: 4, c: 5}` `],` `status: 1}`

（请注意，您需要说 data$results$a 而不仅仅是 data$a）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:01:11.757

你有没有尝试过

```
twit1<-fromJSON(twit[1]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T13:14:56.090

看起来您的 json 无效。有很多转义字符。它从哪里来的？您可能可以摆脱所有这些转义斜线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-15T23:16:18.567

* * *

我在从中检索对象时遇到了类似的问题`window.localStorage`

希望这可以找到使用**本地存储的类似问题的人**

* * *

**我的问题：**

`localStorage.myVariable = undefined;`

**解决方案：**

`localStorage.removeItem("myVariable");`

**解释：**

即使我从未使用引号，它也会将 localStorage.myVariable 转换为 STRING“未定义”！

* * *

**我的应用程序如何导致斜线：**

这引起了一大堆斜线，因为我有一个字符串不断被字符串化！哎呀

```
var stored = localStorage.myVariable ? JSON.parse(localStorage.myVariable) : {}; 
```

我的三元 if/else 检查理解 localStorage.myVariable 是真实的，因为它是一个 STRING 而不是 UNDEFINED

我会扩展`stored`变量（我认为它是一个对象），然后使用重新编码`localStorage.myVariable = JSON.stringify(stored); // BAD -- stringifying a string`

# android - 按 URI 播放通知音频

> ID：12049561
> 
> 赞同：5
> 
> 时间：2012-08-21T06:40:58.003
> 
> 标签：android

我有通知声音的 URI，例如`content://media/internal/audio/media/122`，但`SoundPool`不适用于 URI，它仅适用于文件路径的 apk 资源。

有没有办法从 URI 获取媒体文件路径？我试过`Uri.getPath()`，它返回`/internal/audio/media/122`，但这不是有效的文件路径，当然`SoundPool`不适用于这样的补丁。

实际上通知的真正路径是`/system/media/audio/notifications/allegro.ogg`，我看不到从 URI 中获取它的方法，例如`content://media/internal/audio/media/122`

或者我应该为此使用`MediaPlayer`吗？我测试过，它有效：

```
 MediaPlayer mp = MediaPlayer.create(this, "content://media/internal/audio/media/122");
           mp.start(); 
```

我很困惑，因为`MediaPlayer`似乎太重而无法播放简短的通知声音，所以我更喜欢使用`SoundPool`.

如果我对`MediaPlayer`重量有误，请告诉我，并建议通过其 URI 播放通知声音的正确方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-21T08:02:12.737

好吧，我得到了通过 URI 播放音频的最简单方法：

```
RingtoneManager.getRingtone(this, Uri.parse("content://media/internal/audio/media/122")).play(); 
```

我认为这是我能做到的最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:00:48.770

试试这个以获得完整路径：

```
String path = Environment.getRootDirectory().getAbsolutePath(); //Will return "/system"
path = path + Uri.getPath().subString(9); //To cut "content:/" from the Uri path.
//Then pass this "path" to your SoundPool 
```

你说的对。与用于音乐和视频的 MediaPlayer 不同，SoundPool 旨在用于通知等*短应用音频资源。*它比 MediaPlayer 更快更轻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-31T12:30:20.177

受到德米特里回答的启发。

一根线就能解决问题。

```
RingtoneManager.getRingtone(this, RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)).play(); 
```

# c# - messageIn 在当前上下文中不存在

> ID：12049562
> 
> 赞同：-2
> 
> 时间：2012-08-21T06:41:07.470
> 
> 标签：c#, c#-4.0

我的代码如下所示。

我从查询字符串中得到消息。在那之后，我将得到它的消息`array(msg_arr)`。但是所有这些东西都在里面`Page_load`。

但是为什么会出现这个错误呢？

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        try
        {
            string messageIn = Request.QueryString["msg"];  
            // some code here
        }
        catch(Exception ex)
        {
            Response.Write(ex.Message);
        }

        string[] msg_arr = messageIn.Split(' '); // error shown here
        int size = msg_arr.Length;

        if(!CheckUserExistAndReporter("messageIn"))
        {
           // Response.Redirect("~/test.aspx");
        }
        else
        { 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T06:43:06.493

您`messageIn` 在 try-block 中声明，这是您的问题。

只需在外面声明它：

```
string messageIn = null;
try
{
    messageIn = Request.QueryString["msg"];
    // some code here
}

... 
```

-block`try`创建了一个新的范围，因此在其中声明的变量在外部是不可见的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T06:43:28.413

当你这样做时

```
try
{
 string messageIn = Request.QueryString["msg"];

 // some code here

 } 
```

字符串的范围仅限于 try 块，并且不再存在于该块之外。

您将不得不增加整个 if 块的字符串范围才能使其工作

```
if (!IsPostBack)
{
string messageIn = string.Empty;
......
try
{
messageIn = Request.QueryString["msg"];
// some code here
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T06:43:46.423

`string messageIn`在块外声明 。

```
protected void Page_Load(object sender, EventArgs e)
{
    string messageIn=string.Empty;
    ....
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T06:45:15.200

您收到错误是因为您`messageIn`在 try 块中声明。试试这个：

```
string messageIn;
try
{
   messageIn = Request.QueryString["msg"];
   // some code here
}
catch(Exception ex)
{
  Response.Write(ex.Message);
}

if (!string.IsNullOrEmpty(messageIn)
{
   string[] msg_arr = messageIn.Split(' ');
   ...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-21T06:44:27.343

您`messageIn`在块内声明变量`try{}`，因此它的范围仅在`try{}`块内。

你应该做这样的事情

```
protected void Page_Load(object sender, EventArgs e)
{
string messageIn=string.Empty;
    if (!IsPostBack)
    {
        try
        {

             messageIn = Request.QueryString["msg"];

            // some code here

        }
        catch(Exception ex)
        {
            Response.Write(ex.Message);
        }

        string[] msg_arr = messageIn.Split(' '); // error shown here
        int size = msg_arr.Length;

        if(!CheckUserExistAndReporter("messageIn"))
        {
           // Response.Redirect("~/test.aspx");
        } 
```

# javascript - 仅使用某些子节点访问 xml 中父节点的子节点

> ID：12049567
> 
> 赞同：0
> 
> 时间：2012-08-21T06:41:38.187
> 
> 标签：javascript, jquery, xml, xml-parsing

由于我正在开发产品软件，因此我需要您的帮助来解决我的问题。

我在字符串格式的变量中有一组 XML 数据。

任务是找到具有称为“PropertyReference”的子节点的父节点。XML 的结构如下所示。

如果解决方案可以使用 jquery 语法解决，那么它会很棒......

```
<StringAttribute Caption="comments" ColumnName="fccomments" Description="comments" MaxLength="54" Name="fccomments" />

<StringAttribute Caption="department" ColumnName="fdept" Description="department" MaxLength="2" Name="fdept">
  <PropertyReference Name="inwork_fdept" ObjectName="Department" PropertyName="fdeptno" UseIndexView="True" />
</StringAttribute>

<DecimalAttribute Caption="labor cost/hour" ColumnName="flabcost" ContentType="Price" DecimalDigits="2" Description="labor cost/hour" MaxValue="999.99" MinValue="-99.99" Name="flabcost">
  <DecimalAttribute.Format>
    <DecimalFormat DecimalDigits="2" Name="Price" />
  </DecimalAttribute.Format>
</DecimalAttribute>
<DecimalAttribute Caption="Avg Queue Hours" ColumnName="fnavgque" DecimalDigits="1" Description="average queue time - generated by scheduling" MaxValue="99999.9" MinValue="-999.9" Name="fnavgque" />
<BooleanAttribute Caption="Default Operations for this Work Center to be Scheduled" ColumnName="flschedule" Description="schedule?" Name="flschedule" />
<BooleanAttribute Name="flscheduleEnable">
  <BooleanAttribute.Triggers>
    <Trigger InverseOperation="True" Operator="Equals" Value="True">
      <Rule Target="flschedule" Type="ReadOnly" Value="OnClient" />
    </Trigger>
  </BooleanAttribute.Triggers>
</BooleanAttribute>
<IntegerAttribute Caption="Max Simultaneous Operations/Shift 1" ColumnName="fnmax1" DefaultValue="1" Description="maximum simmultaneous ops shift 1" MaxValue="99" MinValueAdherenceMessage="MAX_SIMUL_OPS" Name="fnmax1" />
<IntegerAttribute Caption="Max Simultaneous Operations/Shift 2" ColumnName="fnmax2" Description="maximum simmultaneous ops shift 2" MaxValue="99" MinValueAdherenceMessage="MAX_SIMUL_OPS" Name="fnmax2" /> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:48:24.307

也许有点像这样：

```
var parentNode = $(yourXMLStringHere).find("PropertyReference").parent(); 
```

演示：http: [//jsfiddle.net/yHXK5/](http://jsfiddle.net/yHXK5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:48:44.667

`$('PropertyReference').parent();`

例如：

```
console.log($('PropertyReference').parent().length);

$('PropertyReference').parent().each(function() {
    console.log($(this).attr('Caption'));
}); 
```

​</p>

# magento - 我可以将 Magento 用作像样的 CMS 和商店吗？

> ID：12049572
> 
> 赞同：1
> 
> 时间：2012-08-21T06:42:03.890
> 
> 标签：magento, content-management-system, e-commerce, opencart, webstore

就在一些建议之后：我需要建立一个具有大量 CMS 功能的网络商店。

我正在考虑将 OpenCart 与 Wordpress 或 ModX 等 CMS 并行使用，但事情可能会变得有些混乱。我想知道，如果 Magento 有能力提供体面的 CMS 功能。

在商店旁边，我需要的是：

*   一个博客
*   图片库（上传与产品无关的图片）
*   带有单个新闻文章的新闻页面
*   能够创建无限数量的其他常规页面

Magento可以用于这个吗？

还是我最好使用拆分 CMS/电子商店系统？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:43:16.060

是的，您可以在您的站点中使用 Magento 的 CMS 页面，但如果您有很多页面，我自己不会走这条路 - 特别是如果您让客户对它们松懈，我个人不太喜欢 Magento 所见即所得的编辑器并倾向于在我的所有网站上禁用它，只在 CMS 页面上使用 HTML。

**编辑**

多年后回到这一点。我现在仍然这样做，将 Wordpress 用于 CMS 内容。您可以查看此链接以了解我认为将两者结合起来的嵌套方式；

[https://magento.stackexchange.com/questions/7112/what-is-the-best-strategy-to-integrate-wordpress-inside-of-magento/9865#9865](https://magento.stackexchange.com/questions/7112/what-is-the-best-strategy-to-integrate-wordpress-inside-of-magento/9865#9865)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:22:32.577

Magento 默认提供静态页面。博客和图片库是可以在 magentoconnect 上找到的附加插件。它们适合您选择的主题，因此所有内容都以相同的样式显示。

如果它真的符合您的需要，您可能需要安装 Magento 和这两个插件。我找到了那些：

[http://www.magentocommerce.com/magento-connect/lazzymonks-wordpress-integration-2-61.html](http://www.magentocommerce.com/magento-connect/lazzymonks-wordpress-integration-2-61.html)

[http://www.magentocommerce.com/magento-connect/i-gallery-gallery-image-free.html](http://www.magentocommerce.com/magento-connect/i-gallery-gallery-image-free.html)

但我更喜欢拆分逻辑但风格相同。一个优秀的 Magento 开发人员可以在一个站点上进行合并。

# focus - JQuery UI Dialog：在焦点事件中调用，但在关闭对话框后元素未聚焦

> ID：12049574
> 
> 赞同：2
> 
> 时间：2012-08-21T06:42:12.383
> 
> 标签：focus, jquery-ui-dialog

见标题。我在 Input 元素的焦点事件中向用户显示了一个 Jquery UI 模式对话框。当对话框关闭时，我希望该输入成为焦点。这不会发生。似乎在焦点事件中调用对话框可以防止焦点发生。

当用户必须从多个值中进行选择时，将显示该对话框。这些值是通过 ajax 使用来自不同输入字段的参数获取的。如果只返回 1 个值（或没有），则不会出现对话框并且输入元素正确聚焦。所以问题显然是由于对话造成的。

```
$("#myInput").focus(function() {
    //... get data, show dialog if multiple values in result
    $("#dialog").dialog( "open" );
}); 

$( "#dialog" ).dialog({
        autoOpen: false,
        buttons: { "Ok": function() { $(this).dialog("close")}},
        height: 120,
        width: 185,
        position: [285,200],
        modal: true,
        close: function(event, ui) {
            $('#myInput').val($("#select").val()); // Select element in dialog
        }
}); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-21T14:36:51.273

只需在对话框关闭时再次关注输入：

```
$('#myInput').val($("#select").val()).focus(); 

 $( "#dialog" ).dialog({
    autoOpen: false,
    buttons: { "Ok": function() { $(this).dialog("close")}},
    height: 120,
    width: 185,
    position: [285,200],
    modal: true,
    close: function(event, ui) {
        $('#myInput').val($("#select").val()).focus(); 
    }
}); 
```

# asp.net - jqgrid 不在网页中显示数据？

> ID：12049578
> 
> 赞同：0
> 
> 时间：2012-08-21T06:42:31.280
> 
> 标签：asp.net, jqgrid

我从这里下载 jqgrid：[http](http://www.trirand.net/download.aspx) ://www.trirand.net/download.aspx for asp.net。我尝试在 jqgrid 客户端加载数据。我使用以下程序在 jqGrid 中加载数据。但是我使用以下程序网页没有显示任何内容？我不知道问题出在哪里？

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head >
    <title>Untitled Page</title>

     <script type="text/javascript" src="js/trirand/jquery-1.7.2.min.js"></script>
     <script type="text/javascript" src="js/trirand/jquery.jqGrid.min.js"></script>
     <script type="text/javascript" src="js/trirand/i18n/grid.locale-en.js"></script>
     <link href="themes/ui.jqgrid.css" rel="stylesheet" type="text/css" media="screen"/>

    <script type="text/javascript">

    $(document).ready(function(e) {
    alert('ready');
    var mydata = [
        {id:"1",invdate:"2010-05-24",name:"test",note:"note",tax:"10.00",total:"2111.00"} ,
        {id:"2",invdate:"2010-05-25",name:"test2",note:"note2",tax:"20.00",total:"320.00"},
        {id:"3",invdate:"2007-09-01",name:"test3",note:"note3",tax:"30.00",total:"430.00"},
        {id:"4",invdate:"2007-10-04",name:"test",note:"note",tax:"10.00",total:"210.00"},
        {id:"5",invdate:"2007-10-05",name:"test2",note:"note2",tax:"20.00",total:"320.00"},
        {id:"6",invdate:"2007-09-06",name:"test3",note:"note3",tax:"30.00",total:"430.00"},
        {id:"7",invdate:"2007-10-04",name:"test",note:"note",tax:"10.00",total:"210.00"},
        {id:"8",invdate:"2007-10-03",name:"test2",note:"note2",amount:"300.00",tax:"21.00",total:"320.00"},
        {id:"9",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"},
        {id:"26",invdate:"2007-09-06",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"},
        {id:"27",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"},
        {id:"28",invdate:"2007-10-03",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"},
        {id:"29",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"}
    ];

  $("#listtable").jqgrid({

    data: mydata,
    datatype: 'local',
    height: 150,
    rowNum: 10,
    rowList: [10,20,30],
       colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
       colModel:[
           {name:'id',index:'id', width:60, sorttype:"int"},
           {name:'invdate',index:'invdate', width:90, sorttype:"date", formatter:"date"},
           {name:'name',index:'name', width:100},
           {name:'amount',index:'amount', width:80, align:"right",sorttype:"float", formatter:"number"},
           {name:'tax',index:'tax', width:80, align:"right",sorttype:"float"},        
           {name:'total',index:'total', width:80,align:"right",sorttype:"float"},        
           {name:'note',index:'note', width:150, sortable:false}        
       ],
       pager: "#listdiv",
     viewrecords: true,
       caption: "Manipulating Array Data"
});
    });

  </script>  

</head>
<body>
    <table id="listtable"></table>
    <div id="listdiv"></div>
    <div> 

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:35:53.917

绝对是js文件的问题，见下面的aspx代码。它工作正常。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication1.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3\. or /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Demonstration how to fill local data with sorting and paging</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/themes/redmond/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-3.8.2/css/ui.jqgrid.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-3.8.2/js/i18n/grid.locale-en.js"></script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-3.8.2/js/jquery.jqGrid.min.js"></script>

    <script type="text/javascript">

    $(document).ready(function () {
        alert('ready');
        var mydata = [
        { id: "1", invdate: "2010-05-24", name: "test", note: "note", tax: "10.00", total: "2111.00" },
        { id: "2", invdate: "2010-05-25", name: "test2", note: "note2", tax: "20.00", total: "320.00" },
        { id: "3", invdate: "2007-09-01", name: "test3", note: "note3", tax: "30.00", total: "430.00" },
        { id: "4", invdate: "2007-10-04", name: "test", note: "note", tax: "10.00", total: "210.00" },
        { id: "5", invdate: "2007-10-05", name: "test2", note: "note2", tax: "20.00", total: "320.00" },
        { id: "6", invdate: "2007-09-06", name: "test3", note: "note3", tax: "30.00", total: "430.00" },
        { id: "7", invdate: "2007-10-04", name: "test", note: "note", tax: "10.00", total: "210.00" },
        { id: "8", invdate: "2007-10-03", name: "test2", note: "note2", amount: "300.00", tax: "21.00", total: "320.00" },
        { id: "9", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
        { id: "26", invdate: "2007-09-06", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
        { id: "27", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
        { id: "28", invdate: "2007-10-03", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
        { id: "29", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" }

    ];

    $("#listtable").jqGrid({
        data: mydata,
        datatype: 'local',
        height: 150,
        rowNum: 10,
        rowList: [10, 20, 30],
        colNames: ['Inv No', 'Date', 'Client', 'Amount', 'Tax', 'Total', 'Notes'],
        colModel: [
       { name: 'id', index: 'id', width: 60, sorttype: "int" },
       { name: 'invdate', index: 'invdate', width: 90, sorttype: "date", formatter: "date" },
       { name: 'name', index: 'name', width: 100 },
       { name: 'amount', index: 'amount', width: 80, align: "right", sorttype: "float", formatter: "number" },
       { name: 'tax', index: 'tax', width: 80, align: "right", sorttype: "float" },
       { name: 'total', index: 'total', width: 80, align: "right", sorttype: "float" },
       { name: 'note', index: 'note', width: 150, sortable: false }
   ],
        pager: "#listdiv",
        viewrecords: true,
        caption: "Manipulating Array Data"
    });

    });

  </script>  
  </head>
  <body>

    <table id="listtable"></table>
    <div id="listdiv"></div>
    <div> 

    </div>
</body>
</html> 
```

# android - RestClient getResponse() 适用于 android 2.3 但不适用于 4.0.4

> ID：12049579
> 
> 赞同：0
> 
> 时间：2012-08-21T06:42:34.057
> 
> 标签：android, web-services, rest-client, getresponse

我有这段代码用于从网络获取数据

```
String LOGIN_URL = "http://www.mywebsite.com/services/login.php";
                RestClient client = new RestClient(LOGIN_URL );
                client.AddParam("email", tbEmail.getText().toString());
                client.AddParam("pwd", Password);
                client.Execute(RequestMethod.GET);
                String response = client.getResponse();

                JSONObject jo = new JSONObject(response); 
```

在 Android 2.3 的模拟器中工作正常，响应是我的数据，但是当我在带有 Android 4.0.4（CyanogenMod9）的手机上运行相同的代码时，响应为空。你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:55:21.427

您的手机未连接到互联网。

# c# - 将 jquery 添加到数据绑定 asp:menu

> ID：12049581
> 
> 赞同：1
> 
> 时间：2012-08-21T06:42:43.547
> 
> 标签：c#, jquery, asp.net, accordion

我有一个`asp:menu`使用 a 的`SiteMapDataSource`，现在我想在我的菜单中添加一些 JQuery（Accordian 风格），我可以以静态方式实现这一点，但不能以动态（和数据绑定）方式实现，

谁能告诉我如何将 JQuery 添加到数据绑定`ASP:MENU`？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:40:43.643

菜单控件呈现为列表。因此，您可以使用其 id 或列表标签添加 jquery。

```
<div id="Menu1">
<ul class="level1">
<li><a class="level1" href="Default.aspx">Default</a></li>
<li><a class="level1" href="Default2.aspx">Page 2</a></li>
</ul>
</div> 
```

# ms-access - 缺少数据表中的快速过滤器

> ID：12049583
> 
> 赞同：7
> 
> 时间：2012-08-21T06:43:00.660
> 
> 标签：ms-access

我在数据表视图模式下有一个子表单，它缺少通常带有复选框的过滤器选项。

失踪
![](../Images/5bcc115d875551846dfbfc305fb408a3.png)

通过快速过滤器和过滤器复选框，我的意思是：
![](../Images/0cfe0f8f54b3fcbf570ca1190a450586.png)

有人可以告诉我如何找回它吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T20:19:36.450

今天我偶然发现了一个可能的答案。试试这个选项：

Menu *File* → *Options...* → *Filter lookup options for <your DB name> Database*

更改选项*在读取的记录数超过此数量时不显示列表：*从 1000（默认值）到适合您需要的更大数字。

1.  转到“选项”
2.  查找“当前数据库”
3.  向下滚动，直到找到“{....您的文件名...}的过滤查找选项。它将显示列表，如果您的数据输入超过 1,000，它不允许您进行任何过滤。您只需选择ODBC 字段并根据需要设置条目，例如 2,000。

就这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T09:38:03.163

表单的数据源查询具有导致递归过滤的过滤器参数集。当我删除那个过滤器（因为它没有用）时，它运行良好。这就像一个逻辑错误导致了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-06T03:45:28.427

如果您要解决最初列出的问题，上述答案都不正确。在我自己的数据库中玩弄过这个问题后，我发现 Access 似乎不再支持带有链接字段的交叉引用查询（例如，使用具有通用名称 [文本] 的下拉列表链接到主表中的字段使用数字来减少记录/数据库大小）。我发现通过将索引字段的大小从 0 调整到 0.0202 可以让过滤机制再次工作，但会自动列出字段中的数字而不是关联的常用名称。似乎解决此问题的唯一方法是将您的关系链接从数字更改为文本，并使用通用名称作为实际条目（我认为这是巨大的错误更改）。希望他们能修复它。与此同时，我会寻找更好的答案。如果我找到了，我会在这里发布。-DFoxII

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-17T14:16:39.803

列出的答案并没有解决我的具体问题。我也没有让过滤器列表出现在子表单上。

在敲了很多次之后，我发现我的主表单将“允许过滤器”设置为否。即使子表单都打开了*允许过滤器，但它们似乎继承了主表单的设置。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-12T19:23:49.150

这是一个有很多答案的老问题。这些都不适用于 Access 2016。只有在我将表单的数据源从 SQL 语句更改为 Access 查询的简单名称之后，它才起作用并且快速过滤器重新出现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T17:45:47.577

我确实认为这是由于大量不重复的条目造成的。换句话说，这是因为您有许多条目没有从复选框过滤器中受益。他们留下“文本过滤器>”以便您可以搜索，但省略复选框，因为它只是一个列表太长。我不知道有什么方法可以改变这种行为，因为它内置在 Access 中作为不可自定义的。

底线：复选框对话框的选项太多，无法更改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T17:49:11.310

列上的数据类型看起来是`number`在这种情况下它根本没有文本过滤器。请注意，您的过滤选项是“数字过滤器”而不是“文本过滤器”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-21T20:29:15.803

我解决了一个类似的问题 - Access 2013 中拆分表单的数据表部分中没有快速过滤器。快捷菜单的表单属性设置已设置为否。我将其更改为是，瞧，快速过滤器变得可用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-28T16:58:16.813

只需将您的数据类型更改为短文本即可。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-01T16:50:30.503

确保不要使用“NO”作为字段名称。我有一个名为 NO 的字段，它导致过滤器消失。它似乎是 MS 访问的无证“功能”。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-03T02:39:00.850

在这里，我找到了结果。首先，我要感谢这个答案，他给了我火花。

*“表单的数据源查询具有导致递归过滤的过滤器参数集。当我删除该过滤器（因为它没有用）时，它运行良好。这就像一个逻辑错误导致了这个问题。”*

我用两个代码来展示解决方案，其实是Access自身原因造成的。

代码1：

```
Me.RecordSource = "SELECT * FROM CAPData ORDER BY [DAILY_CLIENT],[CLIENT_NAME],[ASSET_NAME]" 
```

在这种情况下，有时会导致没有自动过滤器。

代码2：

```
Me.RecordSource = "SELECT * FROM CAPData Where Not IsNull(ID) ORDER BY [DAILY_CLIENT],[CLIENT_NAME],[ASSET_NAME]" 
```

这样，问题就解决了。

原因：当您在记录源 SQL 中添加某些条件时，Access 会设置自动过滤器。如果你没有设置，当记录大于某个数字时，自动过滤器将不会出现。但是当您在记录源 SQL 中添加 where 条件时，您可以找到自动过滤器。已测试 20000+ 条记录。

第一次写回答，好激动。</p>

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-10T03:09:56.293

我遇到了同样的问题，在尝试了不同的方法（包括这里提到的方法）之后，我想我终于让它工作了。

首先，请确保您更改了布拉德在回答中所说的选项。我有一个包含两列 ID 和 CustomerName 的组合框。一开始，这个组合框的行源是：SELECT ID AS CustomerID, CustomerName FROM tblCustomers ORDER BY CustomerName; 过滤器的复选框未显示。

我发现这个查询组合框行源有两个问题：

1.  您不能对 ID 列使用别名。
2.  您不能对第二列（此处的 CustomerName）进行排序。

所以在我将查询更改为：SELECT ID, CustomerName FROM tblCustomers; 复选框回来了！（虽然你可以对第一列进行排序）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-07T21:45:14.980

正如已经证明的那样，快速过滤器未显示有多种原因。我遇到的三个主要原因：

1.  您已在 VBA 或表单的属性窗口中使用“自定义”SQL 设置表单的记录源——这些将阻止 Access 具有“快速过滤器”列选择。

要解决此问题，您需要将 SQL 动态推送到 Access 查询对象中，然后将表单的记录源设置为查询 - 问题已解决。

我使用我编写的名为 CreateQuery 的模块来执行此操作，并像这样调用它：

例如 Form1.recordsource = CreateQuery("SELECT * from Table", "qrySource1") 使用下面的子：

```
PUBLIC SUB CreateQuery(SQL as String, qryName as String)
   Dim qDef As DAO.QueryDef
   With CurrentDb
    For each qDef in .QueryDefs
     If qDef.Name = qryName Then
         .QueryDefs.Delete (qryName)
         Exit For
     End IF
    Next qDef

   set qDef = .createQueryDef(qryName, SQL)
END WITH
set qDef = nothing
END SUB 
```

2.  下一个真的很狡猾 - 检查以确保源表的字段不是长文本。Access 将不允许在任何长文本字段上使用“快速过滤器”列。

3.  确保您没有禁用表单的快捷菜单选项，该选项位于表单属性的“其他”选项卡中。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-13T00:24:22.887

我遇到了一个字段不是“可排序”的问题，即在数据表视图中右键单击列时没有显示 AZ 选项。我从设计视图中删除了该字段，控制源并重新选择它，然后排序可用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-02-14T22:04:21.277

文件->选项->当前数据库->向下滚动到该部分->过滤myDBName数据库的查找选项检查ODBC字段复选框

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-11-04T01:04:08.013

我发现如果表单的记录源是包含排序子句的 SQL 语句，则不会出现快速过滤器。

解决方案：要么删除排序子句（如果您希望对数据进行排序，则没有那么有用）或将包含排序的 SQL 语句保存为查询，然后将表单的记录源更改为已保存的查询。瞧，快速过滤器可用。

问候彼得。

# css - 为什么只有当我使用 em 字体大小作为输入时，我的正文 CSS 才会影响我的输入 CSS？

> ID：12049585
> 
> 赞同：3
> 
> 时间：2012-08-21T06:43:10.047
> 
> 标签：css

我一直认为正文字体和输入字体是分开的。例如，如果我的 HTML 有这个：

```
<div>一些测试文本</div>
<输入类型="文本"/>
```

然后这是我的CSS：

```
身体 {
  字体：2em verdana；
}
```

那么只有 div 字体大，输入文本保持小。但是如果我添加这个 CSS：

```
输入 {
  字体大小：1em；
}
```

然后输入字体大小采用正文字体大小。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:49:56.340

你的第一句话是对的：输入元素通常不继承字体大小。

使用`em`它不再起作用，因为`1em`根据定义，它是元素的字体大小 - 如果将字体大小设置为`em`，它基于父元素的字体大小，因为元素本身没有不再有绝对的字体大小。

所以使用`font-size: 1em`输入基本上有点像使用`font-size: inherit`输入和`px`身体设置。

# html - HTML 模块加载

> ID：12049586
> 
> 赞同：0
> 
> 时间：2012-08-21T06:43:11.343
> 
> 标签：html, w3c

在开发我的一个 html 应用程序时，我的主 html 文件变长了。有没有办法将我的代码拆分为单独的模块并将它们合并到我的主 html 页面中。请不要建议 iframe。我不想让它成为单独的页面（带有另一个 HTML 和 Body 标签）。

我的设计是这样的。

**当前的：**

***索引.html***

```
<html>
    <body>
       <div id="sidebar">
          ..........
       </div>

       <div id="content-top">
         <div id="ct-list">
            ...........
         </div>
            ...........
       </div>

       <div id="content-bottom">
            ............
       </div>
    </body>
</html> 
```

**我期待什么**

***索引.html***

```
<html>
    <body>
        <Module src="sidebar.html">
        <Module src="content-top.html">
        <Module src="content-bottom.html">     
    </body>
</html> 
```

***边栏.html***

```
<div id="sidebar">
    ..........
</div> 
```

***内容-top.html***

```
<div id="content-top">
    <Module src="ct-list.html"> 
    ...........
</div> 
```

***ct-list.html***

```
<div id="ct-list">
    ...........
</div> 
```

***内容-bottom.html***

```
<div id="content-bottom">
    ............
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:48:57.223

There's a few options to do this, frames is one which doesn't require you learn anything in addition to HTML/CSS

第二种选择虽然很多人会嘲笑它是 .shtml，但它是一个简单的服务器端系统，可以完全按照您的意愿行事，而无需学习 HTML/CSS 之外的其他内容 `<!--#include file="sidebar.shtml"-->`

有很多选项，PHP、asp.net、Ruby、Python 等，但是所有这些选项都有一个学习曲线，如果你只打算制作这个页面，这可能不值得，仅此而已

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:51:04.453

我不知道 html 本身中真正流行的工具。可能您应该在服务器端使用一些简单的脚本，将它们组合在一起。或者，您可以使用 JavaScript 和 Ajax。

# javascript - 在控制位置移动页面中间的滚动

> ID：12049588
> 
> 赞同：2
> 
> 时间：2012-08-21T06:43:16.713
> 
> 标签：javascript, jquery, asp.net

在我的 aspx 页面中，我在页面中间的 seomwhere 有一个控件。页面中有很多垂直滚动条，我目前位于页面顶部。有没有办法在javascript中单击按钮时在页面中间的控件上移动垂直滚动位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:46:46.920

从您的标签来看，您似乎正在使用 jQuery 库。您可以使用 jQuery 的[scrollTop来完成此操作](http://api.jquery.com/scrollTop/)

工作示例：http: [//jsfiddle.net/k4LCZ/](http://jsfiddle.net/k4LCZ/)

或者，如果您想滚动窗口本身，请使用[window.scrollTo](https://developer.mozilla.org/en-US/docs/DOM/window.scrollTo?redirectlocale=en-US&redirectslug=window.scrollTo)

```
window.scrollTo(0, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:47:26.123

像这样做：

```
var myControl = document.getElementById("controlName"); 
myControl.focus(); 
```

编辑：添加了对实际控件的引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:50:00.233

如果要添加的内容在一个分区（div）中，最好的方法是使用 CSS 溢出选项。

```
overflow: scroll; 
```

查看此链接以获取更多详细信息：[CSS 技巧](http://css-tricks.com/the-css-overflow-property/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:52:46.060

嘿，您可以使用该控件的 ID 向下滚动到该特定部分。

像这样的东西

```
 window.onload=(function(){ document.location="#controlID";}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T06:58:16.783

使用漂亮的页面动画滚动到您的位置。因此，当您单击按钮时，请使用以下代码调用函数：

```
var WhereToMove = jQuery("#ControlIdToMoveOn");
// using the 'html,body' will move the full page, to move a div use his id
jQuery('html,body').animate({scrollTop: WhereToMove.position().top - 10}, 1000); 
```

还有一个滚动 div 而不是整个页面的示例：http: [//jsfiddle.net/k4LCZ/3/](http://jsfiddle.net/k4LCZ/3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T07:27:10.880

您也可以将其与偏移量一起使用。

```
jQuery('html,body').animate({scrollTop: jQuery("ID_OF_THE_DIV").offset().top},'slow'); 
```

例如; 对于这种情况：

```
<a href="#ControlID" id="atagid"> <img height="39" border="0" width="37" src="/close.png"/> </a> 
jQuery('html,body').animate({scrollTop:jQuery("#atagid").offset().top},'slow'); 
```

或者

```
 var id = jQuery('a[href$="#ControlID"]');       
 jQuery('html,body').animate({scrollTop:jQuery(id).offset().top},'slow'); 
```

希望这对其他用户有所帮助....

# css - css 导航栏：子子菜单仅与 IE 中的主菜单重叠

> ID：12049592
> 
> 赞同：0
> 
> 时间：2012-08-21T06:43:45.620
> 
> 标签：css, internet-explorer, navigationbar

以下导航栏在 Firefox、IE 和 Chrome 上完美运行。但是，在 IE 上，单击子菜单时显示的子子菜单位置不正确。它似乎与主菜单重叠。

如何在不影响其他浏览器导航栏布局的情况下为 IE 正确定位？问题出在 navbar.css 代码的最后一行。Margin-top:-23px 适用于除 IE 以外的所有浏览器。我在悬停时遇到问题：

1.  新闻和事件（运动会链接和年会链接重叠常见问题解答（主菜单项）
2.  招生（现在注册链接与招生链接本身重叠）

顺便说一句，我正在测试IE9。

谢谢你。

导航栏.css

```
#menu {
border:none;
border:0px;
margin:0px;
margin-bottom:5%;
padding:0px;
    /*font: 67.5% "Lucida Sans Unicode", "Bitstream Vera Sans", "Trebuchet Unicode MS", "Lucida Grande", Verdana, Helvetica, sans-serif;*/
    font-size:18px;
    font-weight:bold;
}

#nav {
    height:25px;    /*35px;*/
    list-style-type:none;
    margin:0;
    padding:0;
    float:left;
    text-align:center;
    background:#ffcd05;
        }

#nav li {
    display:inline-block;
    position:relative;
    float:left;
/*    background: #006633;
*/  background:#f26739;

    }

#nav li a {
    display:inline-block;
    width:126px;
    line-height:25px;
    padding:0;
    text-decoration:none;
    color:#ffffff;
    }

#nav li li {float:left; #006633;}

#nav li li a {display:block;font-size:14px;}

#nav li:hover {background:#000000;}

/*--- Sublist Styles ---*/
#nav ul {
    position:absolute;
    padding:0px;
    left:0;
    display:none;
    }

/*--- Hide Sub Sublists ---*/
#nav li:hover ul ul {display:none;}

/*--- Sublevel UL's display and position on hover ---*/
#nav li:hover ul {display:block;} 
#nav li li:hover ul {margin-left:110px; margin-top:-23px; display:block;} 
```

我的导航栏：

```
<div id="menu">
    <ul id="nav">
<!--        <li><?php echo $this->Html->link('Home', '/pages/home', array()); ?></li>
-->         <li><?php echo $this->Html->link('Our Program', '#', array()); ?><ul>
            <li><?php echo $this->Html->link('Preschool', '/pages/preschool', array()); ?></li>
            <li><?php echo $this->Html->link('Kindergarten', '/pages/kindergarten', array()); ?></li>
            <li><?php echo $this->Html->link('Summer Camp', '/pages/summer_camp', array()); ?></li>
            </ul>
            </li>
            <li><?php echo $this->Html->link('About Us','#', array()); ?><ul>
            <li><?php echo $this->Html->link('Merry Flowers', '/pages/about_us', array()); ?></li>
            <li><?php echo $this->Html->link('Tour Our School','/pages/tour_our_school', array()); ?></li>
            <li><?php echo $this->Html->link('Contact Us', '/pages/contact_us', array()); ?></li>
            </ul>
            </li>

            <li><?php echo $this->Html->link('My Child','#', array()); ?><ul>
            <li><?php echo $this->Html->link('Report Card', '/merry_parents/register', array()); ?></li>
            </ul>
            </li>

            <li><?php echo $this->Html->link('Events','#', array()); ?><ul>
            <li><?php  echo $this->Html->link('News & Events', '#', array()); ?>
                <ul>
                    <li><?php echo $this->Html->link('Sports Day','/pages/sports_day',array()); ?></li>
                    <li><?php echo $this->Html->link('Annual Day','/pages/annual_day',array()); ?></li>
                </ul>
            </li>

            <li><?php  echo $this->Html->link('List of Holidays', '/pages/list_of_holidays', array()); ?></li>
            </ul>
            </li>
            <li><?php echo $this->Html->link('FAQ','#',array()); ?><ul>
            <li><?php  echo $this->Html->link('FAQ', '/pages/faq', array()); ?></li>
            <li><?php  echo $this->Html->link('Feedback', '/feedbacks/add', array()); ?></li>
            <li><?php  echo $this->Html->link('Discussion', '/forum/home', array()); ?></li>
            </ul>
            </li>
            <li><?php echo $this->Html->link('Admissions','#',array()); ?><ul>
            <li><?php echo $this->Html->link('Enroll Now','/students/add', array()); ?></li>
            </ul>
            </li>
        </ul><!--finish ul nav-->
</div> <!--finish div menu--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:59:47.600

好的，我让它工作了。一旦我为子列表样式添加了 top:23px，运动日和年日子菜单就不会与新闻和事件重叠。谢谢。

```
#menu {
padding:0;
margin:0;
border:none;
margin-bottom:5%;

 /*font: 67.5% "Lucida Sans Unicode", "Bitstream Vera Sans", "Trebuchet Unicode MS", "Lucida Grande", Verdana, Helvetica, sans-serif;*/
    font-size:18px;
    font-weight:bold;
    position:relative;
    z-index:1;
}
#nav{
  padding:0;
    margin:0;
    border:none;
  list-style-type:none;
  float:left;
  height:25px;
  text-align:center;
  background:#ffcd05;
}

#nav li{ /*our program, about us, my child, event, etc..*/
     float:left;
     display:block;
     text-align:center;
     background:#f26739;
      width:126px;
      position:relative;  /*very important for good layout of submenus*/
     }
#nav li a{
    text-decoration:none;
    display:block;
    color:#ffffff;
    padding:0;
}
#nav li ul li{font-size:14px;}

#nav li:hover{
      background:#000000;
}
/* sublists style */
#nav ul{  /*lists that come under our program, event, etc...*/
position:absolute; /* very impt for good layout of submenus*/
left:0px;
top:23px;  /*sports day and annual day submenus will not overlap news and events*/
display:none;
padding:0;
}

/*--- Hide Sub Sublists ---*/
#nav li:hover ul ul {display:none;}

/*--- Sublevel UL's display and position on hover ---*/
#nav li:hover ul{display:block;}

#nav li li:hover ul {margin-left:110px; margin-top:-23px;display:block;} 
```

# ios - iOS 分析分配不显示通过代码创建的 UIImage 对象

> ID：12049602
> 
> 赞同：0
> 
> 时间：2012-08-21T06:44:44.073
> 
> 标签：ios, memory-leaks, xcode-instruments

我很少分析 UIImageView 和 UIImage 的内存分配。

为此，我在图像视图中加载大小为 2.1MB 的图像，但是当我通过 xcode-instruments 分析内存分配时，它显示实时字节为 741.50KB，总字节为 1.56MB。

查看所有内存分配的列表，我找不到我调用的 alloc 条目。

这是我在视图控制器中的代码。

```
self.imageView.image = [[[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"img_background" ofType:@"png"]] autorelease]; 
```

我只是想知道为什么 xcode-instrument 中显示的总大小远远小于预期。还有为什么上面的 alloc 没有在内存分配中列出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:18:53.907

在这里查看[https://stackoverflow.com/a/7575099/314983](https://stackoverflow.com/a/7575099/314983) 分配工具不包括 OpenGL ES 消耗的内存 - UIImage 的数据实际上是由 OpenGL ES 使用的。

# c# - 是否有用于在代码中显示函数依赖关系的 Visual Studio 扩展？

> ID：12049606
> 
> 赞同：1
> 
> 时间：2012-08-21T06:45:14.077
> 
> 标签：c#, visual-studio-2010, visual-studio, visual-studio-extensions

是否有 Visual Studio 的扩展可以显示**函数的依赖关系**？Visual Studio 中有一个功能 [**查找所有引用**] 代码在整个节目中调用项目中的函数。我正在寻找一种工具来显示代码中函数的所有依赖关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:56:02.353

您可以使用第三方工具 NDepend 生成依赖关系图。新的 VS2010 和 VS 2012 具有这些功能。这里有一些链接可以帮助您入门。

[http://msdn.microsoft.com/en-us/library/dd409453.aspx](http://msdn.microsoft.com/en-us/library/dd409453.aspx)

[如何获得 C# 项目之间的依赖关系图](https://stackoverflow.com/questions/3564462/how-do-i-get-a-diagram-of-the-dependencies-between-my-c-sharp-projects)

# java - 如何通过将它们转换为长来减去两次

> ID：12049609
> 
> 赞同：1
> 
> 时间：2012-08-21T06:45:28.577
> 
> 标签：java, time, long-integer

> **可能重复：**
> [如何计算 Java 中的时间跨度并格式化输出？](https://stackoverflow.com/questions/635935/how-can-i-calculate-a-time-span-in-java-and-format-the-output)

如何通过将它们转换为长并再次将其转换回时间来减去两次？

我尝试通过将它们转换为长来减去两次。

```
 Long timeSpan = Long.valueOf(timespan.getValue().toString()) * 60;
    Long checkVar = (date.getTime() - testStartTime.getTime()) / 1000; 
```

现在我如何将结果转换为时间？

也就是说，如果结果 long 是 30 分钟，我希望它显示 00:30:00 。

我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T06:48:58.307

将您的时间（以秒为单位）转换为单独的 HH:MM:SS 组件很简单：

```
int h = checkVar / 3600;
int m = (checkVar / 60) % 60;
int s = (checkVar % 60);

String time = String.format("%02d:%02d:%02d", h, m, s); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:18:43.197

正如已经建议的那样，看看[Joda Time](http://joda-time.sourceforge.net/)

```
PeriodFormatter timeFormatter = new PeriodFormatterBuilder().printZeroAlways().
                appendHours().appendSeparator(":").
                appendMinutes().appendSeparator(":").
                appendSeconds().toFormatter();

DateTime startTime = new DateTime(1972, 3, 8, 15, 30);
DateTime endTime = new DateTime();

Period period = new Period(startTime, endTime);
int days = period.getDays();
int months = period.getMonths();
int years = period.getYears();

System.out.println(period.toString(timeFormatter)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:51:29.540

```
Date elapsed = new Date(checkVar);
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
String formatedTime = sdf.format(elapsed); 
```

# ios - 将 nil 分配给保留的属性会释放与其关联的对象吗？

> ID：12049610
> 
> 赞同：3
> 
> 时间：2012-08-21T06:45:40.977
> 
> 标签：ios, memory-management, memory-leaks, nsstring

当不在 ARC 下时，对于以下代码，

。H

```
@property (nonatomic, retain) NSString *s; 
```

.m

```
NSString *m = [NSString stringWithString:@"Hellow, World"];
s = [m retain];

// later on
s = nil; <-- will this release the ref count on the string and hence get the string released? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T06:50:12.560

当像这样使用时（即通过直接访问实例变量），不，它不会。但是，如果您使用属性的访问器方法（`[self setS:nil];`或`self.s = nil;`），那么是的，它会的。

另请注意，释放对象和释放其内存是两件完全不同的事情。一个对象只有在它没有更多的强引用时才会被释放 - 即你有对它的最后一个引用然后你释放它。如果你释放它但它有其他引用（之前被保留），那么它不会被释放，只有它的引用计数会减一。

此外，如果您有一个保留的属性，例如您的示例中的那个，您不能这样做 1\. 直接访问底层实例变量，2\. 做类似的事情

```
NSString *m = [NSString stringWithString:@"Hellow, World"];
s = [m retain]; 
```

为什么？因为第一行根本没有必要——真的，为什么`- [NSString stringWithString:]`？您正在创建一个常量字符串，然后创建它的精确副本 - 这只是多余的。如果 Cocoa 的设计者是菜鸟，那么这行代码也会浪费内存——同一不可变字符串的两个完全相同的副本。幸运的是，实现 NSString 的人已经为这种情况做好了准备，并让这个方法检查它的参数是否是一个常量，如果是，则不做任何事情就返回它 - 所以你会返回相同的指针，但需要额外调用`objc_msgSend`- 这不是什么你要。

第二行也是错误的 - 同样，您没有按原样使用支持 ivar。此外，声明该属性是`retain`有原因的 - 如果您将一个对象设置为您的属性，该对象将由 setter 方法保留 - 无需手动保留它。

总而言之，你最好写

```
self.s = @"Hello World";

// ...

self.s = nil; 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T06:52:32.747

The correct way of doing this operation will be like this.

```
self.s = [NSString stringWithString:@"Hellow, World"]; // this will ensure that string is retained 

// later on
self.s = nil; // this will ensure that retain count is reduced. 
```

Deallocation of NSString will depend upon iOS AutoreleasePool, since you are releasing the retain count, next time when GC runs it will check the total retain count of that string and if it is not used anywhere else then it will delete that object.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:50:21.547

所有`retain`调用都应与匹配的`release`. 通过分配给`nil`您放弃您保留的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T06:50:39.040

如果**obj**是一个属性，那么

```
self.obj = nil; 
```

实际上会为您发布它。

但如果不是属性或成员或局部变量

```
 obj = nil; 
```

那么你将不得不管理释放

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T06:51:23.720

在这种情况下，是的，假设您使用该属性并且不直接修改实例变量。如果该属性也不是在`strong`ARC`retain`下，情况也是如此。基本上，您的合成属性将如下所示：

```
- (void)setPropertyName:(NSString *)value {
  [value retain];
  [_propertyName release];
  _propertyName = value;
} 
```

因此，如果您为其分配一个新值，则新值将被保留，旧值将被释放。如果新旧值相同，则几乎没有效果。

*注意：*请记住，在您的示例代码中，您在分配对象后会保留该对象，因此如果您遵循[Cocoa 内存管理策略](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)，您现在拥有该对象的所有权。因此，一旦你设置了属性，你需要`release`或者`autorelease`对象来避免泄漏（因为通过使用属性，对象也将被它保留）。

# c# - 如何从 SMO 解析这个类似路径的字符串？

> ID：12049613
> 
> 赞同：5
> 
> 时间：2012-08-21T06:46:02.047
> 
> 标签：c#

我想知道，是否有任何标准方法来解析这种类似路径的字符串：

```
Server[@Name='MyServerName']/Database[@Name='MyDatabaseName']/Table[@Name='MyTableName' and @Schema='MySchemaName'] 
```

结果必须是：

*   项目名称（服务器）
    *   PropertyName（名称）、PropertyValue（MyServerName）
*   项目名称（数据库）
    *   PropertyName（名称）、PropertyValue（MyDatabaseName）
*   项目名称（表）
    *   PropertyName（名称）、PropertyValue（MyTableName）
    *   属性名（架构）、属性值（MySchemaName）

这里最明显的是制作一个正则表达式（当然还有`String.Split`），但可能有更好的标准方法吗？

有关信息：字符串来自 SMO 的[`Urn.Value`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.sdk.sfc.urn.value.aspx).

**更新。**

答案找到了，见下文。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:50:51.923

嗯，我做到了。:)

答案很简单。有[Urn.XPathExpression](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.sdk.sfc.urn.xpathexpression)属性。但它的返回值类型是[Microsoft.SqlServer.Management.Sdk.Sfc.XPathExpression](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.sdk.sfc.xpathexpression)，而不是[System.Xml.XPath.XPathExpression](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathexpression.aspx)（这让我很困惑）。

并且`XPathExpression`来自 SMO 具有解析自身的所有必要功能：

```
 var urn = new Urn("Server[@Name='MyServerName']/Database[@Name='MyDatabaseName']/Table[@Name='MyTableName' and @Schema='MySchemaName']");

        for (var i = 0; i < urn.XPathExpression.Length; i++)
        {
            Console.WriteLine("ItemName ({0})", urn.XPathExpression[i].Name);

            foreach (DictionaryEntry item in urn.XPathExpression[i].FixedProperties)
            {
                Console.WriteLine("\tPropertyName ({0}), PropertyValue ({1})", item.Key, item.Value);
            }
        } 
```

产生这个输出：

```
ItemName (Server)
        PropertyName (Name), PropertyValue ('MyServerName')
ItemName (Database)
        PropertyName (Name), PropertyValue ('MyDatabaseName')
ItemName (Table)
        PropertyName (Name), PropertyValue ('MyTableName')
        PropertyName (Schema), PropertyValue ('MySchemaName') 
```

Christian.K，感谢有关 XPath 的提示！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:43:08.730

也许有点晚了，但我一直在寻找相同的答案，然后我自己偶然发现了这个。Urn 有几个 Get 函数。

```
 var urn = new Urn("Server[@Name='MyServerName']/Database[@Name='MyDatabaseName']/Table[@Name='MyTableName' and @Schema='MySchemaName']");
    Console.WriteLine(urn.GetNameForType("Table")); 
```

将导致“MyTableName”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:57:25.553

没有要测试的代码应用程序，但类似

`var resultArr=str.Split(new char[]{'/', '[',']','@', '='});`应该创建一个你想要的工件数组。

剩下的唯一事情就是为它们中的每一个识别正确的*数组索引*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T07:39:48.363

我相信，唯一的标准方法是使用正则表达式**和模式匹配**。

以下代码片段将有所帮助 -

```
 string input = @"Server[@Name='MyServerName']/Database[@Name='MyDatabaseName']/Table[@Name='MyTableName' and @Schema='MySchemaName']";
    string elementPattern = @"(?<ItemName>\w+)\[@(?<PropertyName>\w+)='(?<PropertyValue>\w+)'( and @(?<PropertyName>\w+)='(?<PropertyValue>\w+)')*\]";

    Regex elementRegex = new Regex(elementPattern, RegexOptions.Compiled);

    string[] elements = input.Split('/');

    foreach (string element in elements)
    {
        Match m = elementRegex.Match(element);

        if (m.Success)
        {
            Console.WriteLine("ItemName ({0})", m.Groups["ItemName"]);

            foreach (Capture capture in m.Groups["PropertyName"].Captures)
            {
                Console.WriteLine("PropertyName ({0})", capture.Value);
            }

            foreach (Capture capture in m.Groups["PropertyValue"].Captures)
            {
                Console.WriteLine("PropertyValue ({0})", capture.Value);
            }
        }
    }

    Console.ReadKey(); 
```

输出： -

```
ItemName (Server)
PropertyName (Name)
PropertyValue (MyServerName)
ItemName (Database)
PropertyName (Name)
PropertyValue (MyDatabaseName)
ItemName (Table)
PropertyName (Name)
PropertyName (Schema)
PropertyValue (MyTableName)
PropertyValue (MySchemaName) 
```

**注意：**请根据您的要求进行更改。

# apache - 重写一个或多个变量的条件

> ID：12049614
> 
> 赞同：0
> 
> 时间：2012-08-21T06:46:29.537
> 
> 标签：apache, .htaccess, rewrite

我需要重写一些网站。当站点具有一个或多个变量时，我需要重写站点，例如：

```
mysite.com/site.php?id=5 or  
mysite.com/site.php?id=5&other_variable=233 or  
mysite.com/site.php?id=5&any_stuff_here(numbers-letters-spacial_chars) 
```

我尝试了一些 htaccess 规则，但它不起作用。

实际上我的规则看起来像：

```
RewriteCond %{QUERY_STRING} ^id=5$ [or]
RewriteCond %{QUERY_STRING} ^id=5$ 
RewriteRule ^site\.php$ http://mysite.com/folder/5_some_txt.html? [L,R=301] 
```

第一个条件只适用于一个变量，第二个现在与第一个相同（我试图在这里放一些东西来处理 url 中的其余变量）。我想我需要以某种方式改变它，或者也许有更好的方法来实现我想要做的事情。

谁能帮我这个？

编辑：我在同一个 htaccess 文件中也有这样的规则：

```
RewriteRule ^site/([0-9]+)_(.*).html$ site.php?id=$1&name=$2 [L,NC,NS] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:56:55.643

只是为了整理一下，您可以使用`\b`（分词）元字符：

```
RewriteCond %{QUERY_STRING} ^id=5\b
RewriteCond %{QUERY_STRING} !name 
RewriteRule ^site\.php$     http://mysite.com/folder/5_some_txt.html?   [L,R=301] 
```

我不知道为什么你有`name`排除。你肯定需要在这里更紧吗？例如`!\bname=`，如果查询包含名称参数，则会阻止重定向。

并以您的评论为例，我会这样做：

```
RewriteCond %{QUERY_STRING} !\b(name|par2|bpar3)= 
```

这将排除任何包含 GET 参数之一的请求`name`，`par2`或`par3`。明白了吗？Apache 内部使用 PCRE 正则表达式引擎，因此您可以使用任何 PCRE 教程或在线助手来协助。我还包括一个小检查器，您可以在[调试 .htaccess 重写规则的提示](https://stackoverflow.com/questions/9153262/tips-for-debugging-htaccess-rewrite-rules)中将其添加到您的网站。

# node.js - OAuth 错误 -- SSL -- Node.js

> ID：12049618
> 
> 赞同：1
> 
> 时间：2012-08-21T06:46:47.623
> 
> 标签：node.js, oauth, twitter-oauth

我正在使用 Node.js，并且我正在使用名为[node-oauth的库](https://github.com/ciaranj/node-oauth)

现在，当我请求获取 requestTokens 时，出现以下错误

```
[Error: 2712:error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol:openssl\ssl\s23_clnt.c:607:
] 
```

在谷歌搜索上我没有得到任何结果。这是什么错误？我该如何解决这个问题？

我的 node.js 代码如下

```
//oauth test
var OAuth= require('oauth').OAuth;

var key = 'xxxxx';
var secret = 'xxxxx';
var redirect = null;

var  client = new OAuth('https://api.twitter.com/oauth/request_token', 'https://api.twitter.com/oauth/access_token', key, secret, '1.0', redirect, 'HMAC-SHA1' , null, {'Accept': '*/*', 'Connection': 'close'});

function getRequestToken()
{
    console.log(client);
    client.getOAuthRequestToken(function(error, oauth_token, oauth_token_secret, results)
    {
        console.log(error);
        console.log('oauth_token :' + oauth_token);
        console.log('oauth_token_secret :' + oauth_token_secret);
    });
}

getRequestToken(); 
```

# android - 多个标签主机或按钮

> ID：12049619
> 
> 赞同：0
> 
> 时间：2012-08-21T06:46:48.010
> 
> 标签：android

我目前正在为一家商店开发应用程序，因为我偶然发现了一个问题。有一个主`activity`选项卡顶部有五个选项卡，并且在其中一个顶部选项卡中，底部有两个选项卡可以`activity's`在该主（顶部）选项卡之间切换。当我开始开发时，`UI`我在底部放置了另一个选项卡主机（坏主意，因为它以某种方式破坏了顶部选项卡的设计（顶部选项卡背景被拉伸））。

所以问题是让 3 项活动适合并在一个选项卡中工作的最佳方法是什么？我应该使用`buttons`还是其他`tabhost`或其他`widget`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:07:53.563

我在我的项目中遇到了同样的问题，然后我使用了 3 种不同的布局（Xml），我使用布局充气器在相同的活动中为按钮的点击充气。
（使一个可见，而其他两个布局消失。它看起来像 3 个不同的活动）

# javascript - 如何在javascript中获取GET变量的值？

> ID：12049620
> 
> 赞同：15
> 
> 时间：2012-08-21T06:46:48.300
> 
> 标签：javascript, get

> **可能重复：**
> [在 JavaScript 中获取查询字符串值](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

如何在 javascript 中获取 get 变量？

我想在 jquery 函数中传递它。

```
function updateTabs(){

            //var number=$_GET['number']; how can i do this?
        alert(number);
        $( "#tabs" ).tabs({ selected: number });

    } 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-21T06:55:51.263

```
var $_GET = {};
if(document.location.toString().indexOf('?') !== -1) {
    var query = document.location
                   .toString()
                   // get the query string
                   .replace(/^.*?\?/, '')
                   // and remove any existing hash string (thanks, @vrijdenker)
                   .replace(/#.*$/, '')
                   .split('&');

    for(var i=0, l=query.length; i<l; i++) {
       var aux = decodeURIComponent(query[i]).split('=');
       $_GET[aux[0]] = aux[1];
    }
}
//get the 'index' query parameter
alert($_GET['index']); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T06:53:17.923

写：

```
var $_GET=[];
window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,name,value){$_GET[name]=value;}); 
```

然后`$_GET['number']`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-21T07:00:45.993

试试这个

```
if (location.search != "")
{
    var x = location.search.substr(1).split(";")
    for (var i=0; i<x.length; i++)
    {
         var y = x[i].split("=");
         alert("Key '" + y[0] + "' has the content '" + y[1]+"'")
    }
} 
```

# android - Android ImageView 修复图像大小

> ID：12049626
> 
> 赞同：50
> 
> 时间：2012-08-21T06:47:09.707
> 
> 标签：android, imageview, android-imageview

我有一个 Android 应用程序，我有一个`ImageView`，我需要保持大小不变​​，我需要将各种`ImageView`不同大小的图像放入其中。

我只需要确保所有图像都必须适合`ImageView`，如果图像较小，则图像应该增加大小，如果它更大，则应该减小。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-21T06:56:07.560

`dp`使用或修复 ImageView 的大小`fill_parent`并将其设置`android:scaleType`为`fitXY`.

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-08-21T07:25:52.063

在您的情况下，您需要

1.  修复 ImageView 的大小。您需要使用**dp**单位，以便它在所有设备中看起来都一样。
2.  设置`android:scaleType`为`fitXY`

下面是一个例子：

```
<ImageView
    android:id="@+id/photo"
    android:layout_width="200dp"
    android:layout_height="100dp"
    android:src="@drawable/iclauncher" 
    android:scaleType="fitXY"/> 
```

有关 ImageView scaleType 的更多信息，请参阅[开发者网站](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-21T07:00:58.530

试试这个

```
ImageView img
    Bitmap bmp;
    int width=100;
    int height=100;
    img=(ImageView)findViewById(R.id.imgView);
    bmp=BitmapFactory.decodeResource(getResources(),R.drawable.image);//image is your image                                                            
    bmp=Bitmap.createScaledBitmap(bmp, width,height, true);
    img.setImageBitmap(bmp); 
```

**或者** 如果你想在内存中加载完整的图像大小，那么你可以使用

```
<ImageView
    android:id="@+id/img"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:src="@drawable/image" 
    android:scaleType="fitXY"/> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-10-10T18:07:29.933

你也可以试试这个，假设如果你想制作一个后退图像按钮并且你有“500x500 png”并希望它适合小按钮尺寸。

# 使用 dp 来修复 ImageView 的大小。

将这行代码添加到您的 Imageview。

android:scaleType="fitXY"

例子：

```
<ImageView
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:id="@+id/imageView2"
        android:src="@drawable/Backicon"
        android:scaleType="fitXY"
        /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-11T14:26:32.333

我有同样的问题，这对我有帮助。

```
<ImageView
    android:id="@+id/image"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:scaleType="fitXY"
    /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-15T15:09:42.550

除非您添加&属性，否则您需要在 XML中添加`android:scaleType`和设置。**示例**： 如果您想以编程方式添加，**示例**：`fitXY``layout_width``layout_height`
 **`android:scaleType="fitXY"`

 **`youriv.setScaleType(ImageView.ScaleType.FIT_XY);`****

# c# - 在 HttpWebRequest.BeginGetResponse 上设置超时

> ID：12049630
> 
> 赞同：0
> 
> 时间：2012-08-21T06:47:26.873
> 
> 标签：c#, .net

我有一个要移植到 Windows 8 Store 类库的类库。其中一种方法使用现在不支持的同步 HttpWebRequest。我需要保持方法同步，因为异步工作已经在应用程序而不是库中完成，并且更改它需要大量的努力。我已将其更改为使用 IAsyncresult 的同步任务，但我不确定如何使用此代码设置请求超时。有人可以帮忙吗？任何人都可以看到我在使用此代码时可能遇到的任何其他问题吗？

```
//Create Web Request
HttpWebRequest request = WebRequest.Create(uri) as HttpWebRequest;
IAsyncResult asyncResult = request.BeginGetResponse(null, null);

if (asyncResult.AsyncWaitHandle.WaitOne(5 * 1000))
{
    //Get Response
    using (HttpWebResponse response = request.EndGetResponse(asyncResult) as HttpWebResponse)
    {
        if (request.HaveResponse && response != null)
        {
            using (Stream reader = response.GetResponseStream())
            {
                result = XDocument.Load(reader);
            }
        }
    }
}
else
{
    request.Abort();
} 
```

更新：我在请求中添加了一个等待句柄，如果超时，我会中止 httpwebrequest。这会处理 HttpWebRequest 启动的任何线程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:46:22.100

怎么样：

```
if(false == request.GetResponseAsync().Wait(DateTime.Now.AddMinutes(2.0)))
{
    Trace.WriteLine("timeout");
    return;
}
//... 
```

现在请记住，这只是等待异步操作的超时。要专门处理响应/请求流操作的超时，请参阅`HttpWebRequest.Timeout`。

您不必使用`async`/ `await`with`*Async`方法。它们只是返回一个`Task<T>`您可以使用的对象并使用诸如`Wait`,`ContinueWith`等方法...比处理`Begin`/ `End`（APM 模式）容易得多...

FWIW 该`*Async`模式称为*任务异步模式*(TAP)。它现在似乎是推荐的模式，取代了*异步编程模型*（APM，`Begin`/ `End`）和*基于事件的异步模式*（EPM，，，`Completed`等`CancelAsync`...）。

# android - 集成 QRCode 在 android 中强制关闭

> ID：12049631
> 
> 赞同：0
> 
> 时间：2012-08-21T06:47:26.993
> 
> 标签：android

我遵循了此链接中的所有说明：[http://www.jmanzano.esblog/?p=244#comment-2175](http://www.jmanzano.esblog/?p=244#comment-2175)。但是当我点击它`Button`时`Activity`它不起作用（强制关闭）。

在 log-cat 中显示以下错误：

```
 8-21 11:59:25.895: E/AndroidRuntime(909): FATAL EXCEPTION: main
 08-21 11:59:25.895: E/AndroidRuntime(909): java.lang.ExceptionInInitializerError
 08-21 11:59:25.895: E/AndroidRuntime(909):     at java.lang.Class.newInstanceImpl(Native Method)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at java.lang.Class.newInstance(Class.java:1409)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at android.os.Handler.dispatchMessage(Handler.java:99)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at android.os.Looper.loop(Looper.java:123)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at android.app.ActivityThread.main(ActivityThread.java:3683)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at java.lang.reflect.Method.invokeNative(Native Method)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at java.lang.reflect.Method.invoke(Method.java:507)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 08-21 11:59:25.895: E/AndroidRuntime(909):     at dalvik.system.NativeStart.main(Native Method)
 08-21 11:59:25.895: E/AndroidRuntime(909): Caused by: java.lang.NoClassDefFoundError: com.google.zxing.ResultMetadataType
 08-21 11:59:25.895: E/AndroidRuntime(909):     at com.google.zxing.client.android.CaptureActivity.<clinit>(CaptureActivity.java:108)
 08-21 11:59:25.895: E/AndroidRuntime(909):     ... 15 more 
```

# silverlight - 从 Steema Teechart .Net 4.0.2009.42283 迁移到 4.1.2011.4197 导致许多属性不可用。有什么解决方法？

> ID：12049632
> 
> 赞同：0
> 
> 时间：2012-08-21T06:47:40.477
> 
> 标签：silverlight, teechart

1.Steema.TeeChart.Silverlight.Tools.RectangleTool' 不包含“名称”的定义。2011 TeeChart .Net dll 中该属性的替代方法是什么？2.“Steema.TeeChart.Silverlight.Tools.ColorLine”不包含“UpdateLayout”的定义。在 2011 TeeChart .Net dll 中这个属性的替代方案是什么？3.“Steema.TeeChart.Silverlight.Styles.Series”不包含“名称”的定义。2011 TeeChart .Net dll 中该属性的替代方法是什么？4.“Steema.TeeChart.Silverlight.Tools.Annotation”不包含“名称”的定义。在 2011 TeeChart .Net dll 中该属性的替代方法是什么？5.“Steema.TeeChart.Silverlight.Chart”不包含“保证金”的定义。2011 TeeChart .Net dll 中这个属性的替代方法是什么？6.“Steema.TeeChart.Silverlight.Chart”不包含“MouseMove”的定义。在 2011 TeeChart .Net dll 中，该属性的替代方法是什么？7.“Steema.TeeChart.Silverlight.Tools.CursorTool”不包含“名称”的定义。在 2011 TeeChart .Net dll 中该属性的替代方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:04:07.473

TeeBase 类不再继承自 TeeChart Silverlight 中的 Control 以提高性能。此更改使其某些后代失去了您提到的一些 FrameworkElement 和 UIElement 属性。我已将其添加到要修改的愿望清单中（TW16016314）。

同时，我只能考虑手动创建所需的属性。

斯蒂玛软件。

# java - 无法在服务器上使用 java 程序执行简单的“whoami”unix 命令

> ID：12049635
> 
> 赞同：0
> 
> 时间：2012-08-21T06:48:18.363
> 
> 标签：java, unix, process, aix

我面临着无法在 AIX 服务器上执行简单的“whoami”unix 命令的奇怪问题。我有一个部署在 AIX 服务器上的 web 应用程序。现在我想查看我的 web 应用程序当前在哪个 WAS 用户下运行。所以我添加了以下代码：

```
 public String whoami() throws Exception {
        Process p = Runtime.getRuntime().exec("whoami");
        BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String line;
        String output = "";

        while ((line = in.readLine()) != null) {
            //System.out.println(line);
            output += line;
        }
        in.close();
        p.destroy();
        return output;
    }
} 
```

上面的代码被添加到一个 JSP 引用的 jar 文件中。JSP 必须接收上述代码的输出并显示 WAS 用户名。但是当我在服务器上部署 web 应用程序并尝试观察输出时，我收到一条错误消息，例如

> 错误 500：拒绝访问（java.io.FilePermission <> 执行）

但是，当我删除上面的代码并运行我的 web 应用程序时，一切都运行良好。我在这里做错了什么。我错过了什么吗？请帮忙。这是我第一次在 UNIX 上工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:09:14.090

看起来您的 Web 服务器已配置了禁止执行外部应用程序的 Java 安全策略。

有关 Java 安全策略和 Web 服务器文档的信息，请参见[http://java.sun.com/developer/onlineTraining/Programming/JDCBook/appA.html 。](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/appA.html)

您将需要提供（或编辑）一个策略文件以包含以下内容：

```
grant {
  permission java.io.FilePermission 
    "/usr/bin/whoami", "execute";
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T06:56:23.537

只是出于好奇您是否考虑过使用：

```
user.name 
```

Java中的系统属性？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:57:28.527

AFAIK whoami 是一个 shell 命令，`Runtime#exec()`只执行程序。

您可以尝试`Runtime.getRuntime().exec(new String[]{"sh","-c","whoami"})`调用`sh`并让它执行`whoami`

另一件事：阅读后是否需要销毁进程？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T07:31:30.713

您可以使用`ProcessBuilder`类而不是`getRuntime().exec("whoami")`.

这是示例代码

```
import java.io.*;
import java.util.*;

public class DoProcessBuilder {

    public static void main(String args[]) throws IOException {
        if (args.length <= 0) {
            System.err.println("Need command to run");
            System.exit(-1);
        }
        Process process = new ProcessBuilder(args).start();
        InputStream is = process.getInputStream();
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        String line;
        System.out.printf("Output of running &#37;s is:", Arrays.toString(args));
        while ((line = br.readLine()) != null) {
            System.out.println(line);
        }
    }
} 
```

# json - 如何将 java 对象属性（my_name）与 json 属性（my-name）映射？

> ID：12049638
> 
> 赞同：8
> 
> 时间：2012-08-21T06:48:35.497
> 
> 标签：json, jackson

我正在使用 jackson json api 将 json 数据映射到 java 对象。在具有 json 属性的相同对象属性名称的情况下，一切都很好。现在我有一种情况，我正在使用 .json 获取 json 数据属性`-`。（我的名字）。

在java中，我们不能包含`-`在变量名中。

```
import org.codehaus.jackson.map.ObjectMapper;

private static final ObjectMapper mapper = new ObjectMapper();

User user = mapper.readValue("{my-name:\"abcd\"}", User.class);

public class User {private String my_name; /*get-set methods*/} 
```

有什么我需要申请的吗`User.class`？

我不想改变我的代码这么多。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T07:17:34.303

在您的 java 类中，您可以随意命名

前任。私人字符串我的名字；

但是在 setter 方法中只写：

```
@JsonProperty("my-name")
public void setMyName(String myName) {
    this.myName = myName;
} 
```

# http - 存储资源 ETag 的建议方法是什么？

> ID：12049642
> 
> 赞同：5
> 
> 时间：2012-08-21T06:48:47.573
> 
> 标签：http, caching, httpresponse, http-caching, etag

我应该在哪里存储给定资源的 ETag？

# 方法 A：动态计算

获取资源并在每次请求时即时计算 ETag：

```
$resource = $repository->findByPK($id); // query

// Compute ETag
$etag = md5($resource->getUpdatedAt());

$response = new Response();
$response->setETag($etag);
$response->setLastModified($resource->getUpdatedAt());

if($response->isNotModified($this->getRequest())) {
    return $response; // 304
} 
```

# 方法 B：在数据库级别存储

`INSERT`在使和语句变慢的同时节省一点 CPU 时间`UPDATE`（我们使用触发器来更新 ETag）：

```
$resource = $repository->findByPK($id); // query

$response = new Response();
$response->setETag($resource->getETag());
$response->setLastModified($resource->getUpdatedAt());

if ($response->isNotModified($this->getRequest())) {
    return $response;
} 
```

# 方法 C：缓存 ETag

这类似于方法 B，但 ETag 存储在一些缓存中间件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T07:09:08.730

我想这将取决于让这些物品进入 ETag 本身的成本。

我的意思是，用户发送对给定资源的请求；这应该会触发对数据库的检索操作（或其他一些操作）。

如果检索是简单的事情，例如获取文件，那么查询文件统计信息很快，并且不需要在任何地方存储任何东西：文件路径的 MD5 加上它的更新时间就足够了。

如果检索意味着查询数据库，那么这取决于您是否可以在不损失性能的情况下分解查询（例如，用户通过 ID 请求文章。您可能仅从文章表中检索相关数据。因此缓存“命中”将需要对主键进行单个 SELECT。但是缓存“未命中”意味着您必须再次查询数据库，浪费第一个查询 - 或不浪费 - 取决于您的模型）。

如果查询（或查询序列）可很好地分解（并且生成的代码可维护），那么我将再次使用动态 ETag。

如果不是，则主要取决于查询成本和存储 ETag 解决方案的总体维护成本。如果查询成本很高（或输出很庞大）并且 INSERT/UPDATE 很少，那么（并且，我认为，只有这样）使用 ETag 存储辅助列（或表）将是有利的。

至于缓存中间件，我不知道。如果我有一个框架来跟踪我的一切，我可能会说“去做吧”——中间件应该关心和实现上述几点。如果中间件与实现无关（不太可能，除非它是一个剪切和粘贴的 slap-on ......这并非闻所未闻），那么它要么存在“筛选”资源更新的风险，要么可能在更新时调用一些缓存清除 API 过于尴尬。这两个因素都需要根据 ETag 支持提供的负载改进进行评估。

我不认为在这种情况下存在“银弹”。

**编辑**：在您的情况下，情况 A 和 B 之间几乎没有区别，甚至没有区别。为了能够实现 getUpdatedAt()，您需要将更新时间存储在模型中。

在这种特定情况下，我认为动态、显式计算 ETag（情况 A）会更简单、更易于维护。无论如何都会产生检索成本，而显式计算成本是 MD5 计算的成本，它非常快且完全受 CPU 限制。在我看来，可维护性和简单性的优势是压倒性的。

在一个半相关的注释中，我想到在某些情况下（对数据库的不频繁更新和更频繁的查询），为**整个数据库**`Last-Modified`实现全局时间可能是有利且几乎透明的。如果数据库没有改变，那么无论查询是什么，对数据库的任何查询都无法返回不同的资源。在这种情况下，只需将全局标志存储在某个易于快速检索的位置（不一定是数据库）。例如**`Last-Modified`**

 **```
function dbModified() {
    touch('.last-update'); // creates the file, or updates its modification time
} 
```

在任何`UPDATE/DELETE`代码中。然后资源[将添加一个标题](https://stackoverflow.com/questions/1971721/how-to-use-http-cache-headers-with-php)

```
function sendModified() {
    $tsstring = gmdate('D, d M Y H:i:s ', filemtime('.last-update')) . 'GMT';
    Header("Last-Modified: " . $tsstring);
} 
```

通知浏览器该资源的修改时间。

然后，任何对资源的请求`If-Modified-Since`都可以通过 304 被退回，而无需访问持久层（或至少保存所有持久资源访问）。（必须）不需要记录级别的更新时间：

```
function ifNotModified() {
    // Check out timezone settings. The GMT helps but it's not always the ticket
    $ims = isset($_SERVER['HTTP_IF_MODIFIED_SINCE'])
        ? strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE'])
        : -1; // This ensures the test will FAIL

   if (filemtime('.last-update') <= $ims) {
       // The database was never updated after the resource retrieval.
       // There's no way the resource may have changed.
       exit(Header('HTTP/1.1 304 Not Modified'));
   }
} 
```

将 ifNotModified() 调用尽可能早地放在资源供应路线中，将 sendModified 尽可能早地放在资源输出代码中，并将 dbModified() 放在数据库在资源方面被显着修改的地方（即，在将访问统计信息记录到数据库时，您可以并且可能应该避免它，只要它们不影响资源的内容）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-24T16:19:33.943

在我看来，持久化 ETags 是个坏主意，除非你的业务逻辑是关于持久化 ETags。就像您编写应用程序以基于 ETags 跟踪用户时一样，这是一项业务功能:)。

执行时间的潜在节省将很小或不存在。这个解决方案的缺点是肯定的，并且随着您的应用程序的增长而增长。

根据规范，同一版本中的资源应根据已获得的端点给出不同的 E-Tag。

来自[http://en.wikipedia.org/wiki/HTTP_ETag](http://en.wikipedia.org/wiki/HTTP_ETag)：

“比较 ETag 仅对一个 URL 有意义——从不同 URL 获得的资源的 ETag 可能相等也可能不相等，因此无法从它们的比较中推断出任何意义。”

由此您可能会得出结论，您不仅应该保留 ETag，还应该保留其端点，并存储与您拥有的端点一样多的 ETag。听起来很疯狂？

即使您想忽略 HTTP 规范并且只为 Entity 提供一个 Etag 而没有任何关于其端点的元数据。您仍然需要绑定至少 2 层（缓存和业务逻辑），理想情况下不应混合使用。拥有实体（相对于一些丢失数据）背后的想法是在其中分离而不是耦合业务逻辑，并且不要用有关网络、视图层数据或...缓存的东西污染它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:36:53.077

IHMO，这取决于更新资源的频率与读取资源的频率。

如果每个 ETag 在修改之间被读取 1 或 2 次，那么只需即时计算它们。
如果您的资源被读取的次数远多于更新的次数，那么您最好缓存它们，每次修改资源时计算 ETag（这样您就不必为过时的缓存 ETags 烦恼）。

如果 ETag 的修改频率几乎与读取它们的频率一样，那么我仍然会缓存它们，尤其是因为您的资源似乎存储在数据库中。**

# spring - 带有弹簧安全过滤器的 weblogic 安全领域

> ID：12049643
> 
> 赞同：1
> 
> 时间：2012-08-21T06:48:48.817
> 
> 标签：spring, security, weblogic

我正在使用 spring security 3.1.1 进行身份验证。应用程序部署在 weblogic 服务器中，并启用了安全领域以访问数据源。对于我可以提供的 servlet `<run-as>` `<role-name>testrole</role-name>` `</run-as>`

我如何为弹簧安全过滤器做同样的事情。从过滤器访问数据源时出现此错误

## : 用户 "" 没有权限对资源 "jdbc/DataSource" 执行操作 "reserve"

安全上下文.xml

```
<context:annotation-config/>
<sec:http use-expressions="true" entry-point-ref="loginUrlAuthenticationEntryPoint" >
<sec:intercept-url pattern="/**" access="permitAll"/>
<sec:custom-filter position="LOGOUT_FILTER" ref="LogoutFilter" />
<sec:custom-filter position="BASIC_AUTH_FILTER" ref="AuthenticationFilter"/>
</sec:http>
<bean id="LogoutFilter" class="com.xxx.LogoutFilter">
<constructor-arg>
<bean class="com.xxx.LogoutSuccessHandler"></bean>
</constructor-arg>
<constructor-arg>
<list>
<bean class="com.xxx.LogoutHandler"></bean>
</list>
</constructor-arg>
</bean>

<bean id="AuthenticationFilter" class="com.xxx.AuthenticationFilter" >
<constructor-arg type="java.lang.String">
<value>/login.do</value>
</constructor-arg>
<property name="authenticationManager" ref="authenticationManager" />
<property name="authenticationSuccessHandler" ref="successHandler" />
<property name="authenticationFailureHandler" ref="failureHandler" />
</bean>

<bean id="loginUrlAuthenticationEntryPoint"
class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
<property name="loginFormUrl" value="/common/dologin.jsp" />
</bean>

<bean id="successHandler" class="com.xxx.AuthSuccessHandler"/>
<bean id="failureHandler" class="com.xxx.AuthFailureHandler"/>

<sec:authentication-manager alias="authenticationManager">
<sec:authentication-provider ref="jaasAuthenticationProvider" />
</sec:authentication-manager>

<bean id="jaasAuthenticationProvider"
class="com.xxx.JaasAuthenticationProvider">

<property name="callbackHandlers">
<list>
<bean class="com.xxx.security.callback.SecurityInfoProvider">
</bean>
</list>
</property>
<property name="authorityGranters">
<list>
<bean class="com.xxx.security.action.RoleUserAuthorityGranter" />
</list>
</property>
</bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:59:53.540

您可以考虑以下解决方案。

```
 <bean id="securedJndiTemplate" class="org.springframework.jndi.JndiTemplate">
         <property name="environment">
             <props>
                 <prop key="java.naming.provider.url">t3://myServerA:8001,myServerB:8002</prop>
                 <prop key="java.naming.factory.initial">weblogic.jndi.WLInitialContextFactory</prop>
                 <prop key="java.naming.security.principal">weblogic</prop>
                 <prop key="java.naming.security.credentials">weblogic</prop>
             </props>
         </property>
    </bean>

    <bean id="targetDatasource" class="org.springframework.jndi.JndiObjectFactoryBean">
         <property name="jndiTemplate">
              <ref local="securedJndiTemplate"/>
         </property>
         <property name="jndiName">
              <value>myWeblogicJNDI</value>
         </property>
    </bean> 
```

在您的 java 代码中尝试查找 targetDatasource。

我希望这能解决你的问题。

# java - How do i get byte[] from raster image in java?

> ID：12049646
> 
> 赞同：0
> 
> 时间：2012-08-21T06:48:50.487
> 
> 标签：java, image, image-processing, raster

How do I get `byte[]` from raster image in java? I have tried:

`byte[] data = ((DataBufferByte)bufferedImage.getData().getDataBuffer()).getData();`

but this throws a `ClassCastException` runtime exception: *"DataBufferInt cannot be cast to DataBufferByte*".

Thanks for the help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:56:27.130

您可以使用 ByteArrayOutputStream 获取字节数组，这样应该可以工作：（注意，未经测试的代码）

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write( bufferedImage, "jpg", baos ); // if your image is a jpg
baos.flush();
byte[] imageInByte = baos.toByteArray();
baos.close(); 
```

*编辑* 这个怎么样？您需要图像的 FileInputstream 来读取它并将其写入 ByteArrayOutputStream

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
byte[] buf = new byte[1024];
try {
    for (int readNum; (readNum = fis.read(buf)) != -1;) {
        bos.write(buf, 0, readNum); 
    }
} catch (IOException ex) {
    //
}
byte[] bytes = bos.toByteArray(); 
```

# sql - 使用动态列进行透视

> ID：12049648
> 
> 赞同：1
> 
> 时间：2012-08-21T06:48:56.417
> 
> 标签：sql

有4张桌子：

*   **补充，字段：（ Code_name**，Code_name_arch，Tasknum，Pki_num，Group_eng，Name，Descr，Cost，Quan，shop）；

*   **制造商**，字段：（Code_maker，Code_maker_arch，Code_name，提供者）；

*   **到达**，字段：（Code_arr，Code_maker，quan_arr）；

*   **帐户**、字段：（Code_acc、Code_maker、num_acc、quan_acc、summ）

我的查询是：

```
ALTER Procedure [dbo].[pr_tblz] As
Set NOCOUNT ON
Declare @task VARCHAR(4000)
Select @task = coalesce(@task + ',[' + [Tasknum] + ']',
'[' + [Tasknum] + ']')
FROM [db_pki].[dbo].[Suppl]
Group BY [Tasknum]
Order BY [Tasknum]
Declare @query VARCHAR(8000)
Set @query='
Alter View Amountzz As
SELECT Shop, Name, Desc, Group_eng as GI, '+ @task +', quan_arr As specif, quan_acc As acns 
FROM 
(
select
Shop, Name, Desc, Group_eng, Tasknum, Quan, quan_arr, quan_acc
from [db_pki].[dbo].[Suppl] as deliveries
LEFT JOIN [db_pki].[dbo].[Maker] ON (deliveries.[Code_name] = [db_pki].[dbo].[Maker].[Code_name])
LEFT JOIN [db_pki].[dbo].[Arrival] ON ([db_pki].[dbo].[Maker].[Code_maker] = [db_pki].[dbo].[Arrival].[Code_maker])
LEFT JOIN [db_pki].[dbo].[Accounts] ON ([db_pki].[dbo].[Maker].[Code_maker] = [db_pki].[dbo].[Accounts].[Code_maker])
)date_to_pivot
PIVOT 
(
Max([Quan])
For [Tasknum]
IN (' + @task + ')
 )AS p'
Execute (@query) 
```

结果：

```
Shop      Name     Descr    GI    n1     n2      n3 ...    specif    acns
1         name1      1       5    4                           1        1
2 10      name2      2       3    8                           2        2
3         name3      3       501         11                   3        3
1 8       name1      1       5           16                   7        10
a 2 10    name2      2       3                   3            5        6
5         name1      1       2                   5            6        3 
```

我怎样才能得到以下结果？

```
Shop      Name     Descr    GI    n1     n2      n3 ...    specif    acns
1 8       name1      1       5    4      16                 8(1+7)     11
a 2 10    name2      2       3    8              3            7        8(2+6)
3         name3      3      501          11                   3        3
5         name1      1       2                   5            6        3 
```

n1，n2，n3，... - 任务编号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:58:59.327

**未测试。**尝试聚合 ,和的值`Shop`，在旋转之前拉出列的子选择，如下所示（必要的更改以粗体突出显示）：`specif``acns`

```
ALTER Procedure [dbo].[pr_tblz] As
Set NOCOUNT ON
Declare @task VARCHAR(4000)
Select @task = coalesce(@task + ',[' + [Tasknum] + ']',
'[' + [Tasknum] + ']')
FROM [db_pki].[dbo].[Suppl]
Group BY [Tasknum]
Order BY [Tasknum]
Declare @query VARCHAR(8000)
Set @query='
Alter View Amountzz As
SELECT Shop, Name, Desc, Group_eng as GI, '+ @task +', quan_arr As specif, quan_acc As acns 
FROM 
(
select
**MAX(Shop    ) OVER (PARTITION BY Name) AS Shop**,
Name, Desc, Group_eng, Tasknum, Quan,
**SUM(quan_arr) OVER (PARTITION BY Name) AS quan_arr**,
**SUM(quan_acc) OVER (PARTITION BY Name) AS quan_acc**
from [db_pki].[dbo].[Suppl] as deliveries
LEFT JOIN [db_pki].[dbo].[Maker] ON (deliveries.[Code_name] = [db_pki].[dbo].[Maker].[Code_name])
LEFT JOIN [db_pki].[dbo].[Arrival] ON ([db_pki].[dbo].[Maker].[Code_maker] = [db_pki].[dbo].[Arrival].[Code_maker])
LEFT JOIN [db_pki].[dbo].[Accounts] ON ([db_pki].[dbo].[Maker].[Code_maker] = [db_pki].[dbo].[Accounts].[Code_maker])
)date_to_pivot
PIVOT 
(
Max([Quan])
For [Tasknum]
IN (' + @task + ')
 )AS p'
Execute (@query) 
```

# android - 文本在线性布局的edittext内滚动，在android的滚动视图中

> ID：12049654
> 
> 赞同：1
> 
> 时间：2012-08-21T06:49:14.830
> 
> 标签：android, android-edittext, scrollbar

我有一个 UI 问题，例如，其中`EditText`有一些 s `LinearLayout`，并且此线性布局放置在滚动视图中。现在我想要做的是编辑文本有大量数据来查看我设置`android:scrollbars ="vertical"` 的这些数据我能够看到编辑文本内的滚动条但数据没有滚动。外面`scrollbar`正在移动。如何解决这个问题。

有谁能够帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T06:54:12.260

这可能会帮助你......

```
parentScrollView.setOnTouchListener(new View.OnTouchListener() {

                    public boolean onTouch(View v, MotionEvent event) {
                        Log.v(TAG,"PARENT TOUCH");
                        findViewById(R.id.child_scroll).getParent().requestDisallowInterceptTouchEvent(false);
                        return false;
                    }
                });
                childScrollView.setOnTouchListener(new View.OnTouchListener() {

                    public boolean onTouch(View v, MotionEvent event)
                    {
                        Log.v(TAG,"CHILD TOUCH");
                         //  Disallow the touch request for parent scroll on touch of child view
                        v.getParent().requestDisallowInterceptTouchEvent(true);
                        return false;
                    }
                }); 
```

在您的情况下，“parentScrollView”是您的滚动视图，而 childScrollView 是您的 Linearlayout/EditText

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:55:59.260

采用`yourEditTextView.setMovementMethod(new ScrollingMovementMethod());`

# perl - Net::Telnet 输出 cmd 超时

> ID：12049655
> 
> 赞同：1
> 
> 时间：2012-08-21T06:49:15.510
> 
> 标签：perl, telnet

我尝试构建一个小 telnet 脚本来与 Perl 中的[Net::Telnet](http://search.cpan.org/perldoc?Net%3a%3aTelnet)模块取得联系，当我尝试接收输出时，我遇到了命令超时。

```
$telnet = new Net::Telnet ( Timeout=>10);
$telnet->errmode("return");
$telnet->open('192.168.0.187');
$telnet->waitfor('/Username: $/i');
$telnet->print('admin');
$telnet->waitfor('/Password: $/i');
$telnet->print('admin');
$telnet->waitfor('/admin  >$/i');
@output = $telnet->cmd('show');
#$telnet->waitfor('/admin  >$/i');
print @output; 
```

但我得到的是：

> telnet.pl 第 12 行命令超时

试图增加超时，将 errmode 设置为返回 - 但仍然获得超时。尽管如此，服务器上“show”的输出需要大约 1 秒，所以我猜我的脚本中肯定有其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:26:12.850

请告诉我们脚本中的第 12 行是什么。您上面的代码段没有第 12 行。

这将有助于确定它是在已经连接期间还是在稍后的命令期间失败。您确定是“显示”命令失败了吗？

# java - 如何将url转换为java对象

> ID：12049656
> 
> 赞同：-1
> 
> 时间：2012-08-21T06:49:16.543
> 
> 标签：java, url, converter

网址：
[http ://www.xxx.com/getUser?userid=1&username=john&usersex=1](http://www.xxx.com/getUser?userid=1&username=john&usersex=1)

Java 类：

```
Class User{
     private long userId;
     private String userName;
     private int userSex;

     // get and set methods
     ...
     //constructos
     User(long userId, String userName, int userSex){
          this.userId = userId;
          this.userName = userName;
          this.userSex = userSex;
     }
} 
```

如何将此 url 转换为 User 对象？对于此 url，我想获取 User user = new User(1,"john",1)。并且有任何 java 框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:52:01.280

不。只需为此使用[子字符串](http://www.homeandlearn.co.uk/java/substring.html)，并在您的对象中设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:09:42.447

尝试使用 Apache HttpComponents。我可以帮助您读取 URL 并将其解析为单个组件，例如

*   被调用页面
*   值作为命名值对的参数列表

链接： [Apache HttpComponents](http://hc.apache.org/)

您可以使用给出的不同示例并根据您的目的进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:18:19.467

使用 RestEasy 怎么样？
我以前没有使用过它，但是基于一些示例似乎真的很简单。查看可能的实现：

```
@GET
@Path("getUser") //example: "/getUser?userid=1&username=john&usersex=1"
@Produces("application/json")
public User getUser(@QueryParam("userid") final long userId, @QueryParam("username") final String userName, @QueryParam("usersex") final int userSex) {
    User user = new User(userId, userName, userSex);
    // do what's required

    return user;
} 
```

问题也是您希望在这里返回的输出格式。我提供了 JSON 回复的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:57:17.877

看看 Apache Commons BeanUtils。

*   [将请求参数映射到对象的 Java 库](https://stackoverflow.com/questions/3959785/java-library-to-map-request-parameters-onto-an-object)
*   [http://commons.apache.org/beanutils/](http://commons.apache.org/beanutils/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T06:59:35.527

*   您可以使用任何 MVC 框架，例如`Struts`每个 HTML 表单都有一个 Java 支持 bean。
*   如果你觉得 MVC 很重，你可以使用 `Java Reflections API`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T06:56:17.567

我认为这没有java框架。由于解决方案非常简单，您可以自己实现它。

*   [获取通过Servlet 的请求参数](http://www.exampledepot.com/egs/javax.servlet/GetReqParam.html)传递到 URL 的属性。
*   使用[Java Reflection API](http://docs.oracle.com/javase/tutorial/reflect/index.html)动态设置 User 属性，或者通过实现大量 ifelse 语句手动设置属性

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T07:36:43.723

这很简单，不需要任何框架。见下文：

公共类TestClass {

```
 public static void main (String[] args) throws Exception {
        URL url = new URL("http://www.xxx.com/getUser?userid=1&username=john%20doe&usersex=1");
        String q = url.getQuery();
            User user = new User();
        for (String token : q.split("&")) {
            if (token.startsWith("userid")) {
                int index = token.indexOf('=');
                if (index >= 0 && index <token.length()-1) {
                    user.setUserId(Long.parseLong(token.substring(index+1)));
                }
            }
            if (token.startsWith("username")) {
                int index = token.indexOf('=');
                if (index >= 0 && index <token.length()-1) {
                    user.setUserName(java.net.URLDecoder.decode(token.substring(index+1)));
                }
            }
            if (token.startsWith("usersex")) {
                int index = token.indexOf('=');
                if (index >= 0 && index <token.length()-1) {
                    user.setUserSex(Integer.parseInt(token.substring(index+1)));
                }
            }
        }
            System.out.println(user.toString());
    }

}

class User {
     private long userId;
     private String userName;
     private int userSex;

     //constructos
     User(long userId, String userName, int userSex){
          this.userId = userId;
          this.userName = userName;
          this.userSex = userSex;
     }    

    User() {
          this.userId = -1;
          this.userName = "undefined";
          this.userSex = -1;
    }

    @Override
    public String toString() {
        return String.format("id: %d; name: %s, sex: %d", userId, userName, userSex);
    }

    /**
     * @return the userId
     */
    public long getUserId() {
        return userId;
    }

    /**
     * @param userId the userId to set
     */
    public void setUserId(long userId) {
        this.userId = userId;
    }

    /**
     * @return the userName
     */
    public String getUserName() {
        return userName;
    }

    /**
     * @param userName the userName to set
     */
    public void setUserName(String userName) {
        this.userName = userName;
    }

    /**
     * @return the userSex
     */
    public int getUserSex() {
        return userSex;
    }

    /**
     * @param userSex the userSex to set
     */
    public void setUserSex(int userSex) {
        this.userSex = userSex;
    }
} 
```

# drools - 使用 logback 进行日志记录

> ID：12049660
> 
> 赞同：2
> 
> 时间：2012-08-21T06:49:34.250
> 
> 标签：drools, logback

我正在使用 Drools 5.4.0.Final 对于日志记录，我在我的应用程序中使用 logback。

我试图添加更新我的 logback.xml

```
<logger name="org.drools" level="debug"/> 
```

但是我的日志中没有看到有关 Drools 的内容。我希望看到我关于流口水初始化的日志行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T03:26:22.460

您可以`LOGGER`将`StatefulKnowledgeSession`

```
 private static final Logger LOGGER = LoggerFactory.getLogger(Example.class);
    private transient StatefulKnowledgeSession ksession;
    .
    .
    .
    ksession.setGlobal("logger", LOGGER); 
```

在你的 DRL 文件中，你必须定义`global org.slf4j.Logger logger`，然后你可以在你的规则中使用记录器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:28:10.420

Drools 5.4.0.Final 本身不支持任何日志框架。下一个版本 Drools 5.5.0.Beta1 将。它还将记录在手册中如何使用它。有关更多信息，请参阅[此问题](https://issues.jboss.org/browse/JBRULES-2301)。

Drools 5.5.0.Beta1 将记录到 slf4j-api，因此您可以 logback、log4j、jdk-logging、slf4j-simple ......您仍然需要显式调用 KnowledgeRuntimeLoggerFactory.newConsoleLogger() 并将其添加到事件侦听器中。

# andengine - 在andengine中如何限制bug越过障碍物？

> ID：12049666
> 
> 赞同：1
> 
> 时间：2012-08-21T06:50:03.683
> 
> 标签：andengine

嗨，我正在使用路径修改器，当精灵到达之前的点时找到它的路径。我想围绕我的精灵移动到不同形状的障碍物。谁能建议我怎么做。我尝试了彩色像素但是它减慢了我的游戏性能。

例如![虫子运动必须像箭头线](../Images/84822ef2a0cc5313717e1e94054ffab2.png)

我在三角形周围画了线，使用下面的公式我可以找出错误与这条线的交点

```
double d = (x1-x2)*(y3-y4) - (y1-y2)*(x3-x4);
 double xi = ((x3-x4)*(x1*y2-y1*x2)-(x1-x2)*(x3*y4-y3*x4))/d;
 double yi = ((y3-y4)*(x1*y2-y1*x2)-(y1-y2)*(x3*y4-y3*x4))/d;
.. but not working 
```

有人可以建议我怎么做吗？

提前致谢

# excel - 如何使用vba计算cell.Value的x百分比？

> ID：12049670
> 
> 赞同：-1
> 
> 时间：2012-08-21T06:50:14.750
> 
> 标签：excel, vba

```
Range("r01").Value = 100
x = 10
Range("r02").Value = x percentage of "r01" // should be 10 in this case 
```

x 是一个动态变化的变量。
如何使用 vba 计算 cell.Value 的 x 百分比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:52:54.390

只是

```
Range("r01").Value = 100
x = 10
Range("r02").Value = x / 100 * Range("r01").Value 
```

# arrays - 如何通过替换actionScript3中ArrayCollection中的旧值来添加新值？

> ID：12049674
> 
> 赞同：0
> 
> 时间：2012-08-21T06:50:30.220
> 
> 标签：arrays, actionscript-3, collections

```
 public var streamList:ArrayCollection=new ArrayCollection();
  //am getting the streamList dynamically like WebUser7,WebUser11.....      
  private function streamSynch(event:SyncEvent):void
    {
        if(streamList.length>0){
        //(streamList)here in streamList am getting the all values(old)
            streamList.removeAll();
        }
        var results:Object = event.target.data;
        for( var item:String in results ) {              
            streamArray.push(item);     
        }
        streams = new ArrayCollection(streamArray);
        streamList=streams; //(streamList)here in streamList am getting the all values(new) like Webuser9,WebUser2,WebUser11......
        From my Example i need to add the   Webuser9,WebUser2,WebUser11,WebUser7    
    } 
```

我需要比较新旧，然后替换旧的并添加新的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:24:03.147

您可以通过使用`ArrayCollection`方法来做到这一点`setItemAt(item:Object, index:int):Object`。您只需要知道要替换的元素的索引即可。

**编辑：**

有使用例子

```
function arrayCollectionExample () : void {

    // create instance of array collection
    var arrayCollection : ArrayCollection = new ArrayCollection();

    // create some object that we will add to collection
    var obj1 : Object = { name : "Object1" };
    var obj2 : Object = { name : "Object2" };
    var obj3 : Object = { name : "Object3" };

    // add those objects to collection
    arrayCollection.addItem( obj1 );
    arrayCollection.addItem( obj2 );
    arrayCollection.addItem( obj3 );

    // and now let's create a new object that we will want add instead of obj2
    var obj4 : Object = { name : "Object4" };

    // lets say that we don't remember that index of obj2 in a collection is "1". We have to get from collection
    var obj2Index : int = arrayCollection.getItemIndex( obj2 );

    trace( obj2Index ) // 1

    // now when we know index we can replace obj2 with obj4
    arrayCollection.setItemAt( obj4, obj2Index );

    // now when we have replaced values we can see that item at index "1" property "name" is "Object4"
    trace( arrayCollection.getItemAt( obj2Index )["name"] ) // "Object4"

} 
```

# c# - 返回列表 来自 Jquery 中的 JSON 调用具有未定义的长度

> ID：12049679
> 
> 赞同：2
> 
> 时间：2012-08-21T06:50:42.060
> 
> 标签：c#, javascript, jquery, asp.net

我正在从 jquery 调用 web 服务并尝试返回一个列表（我也尝试了一个字符串 []）。当我得到结果时，我可以看到它包含一个包含我需要的值的数组，但我无法在 Javascript 中遍历它们，因为没有长度值。

我的 C# Web 服务如下：

```
 [WebMethod]
    public string[] GetMultiChoiceOptions(int keyId)
    {
        string connectionString = System.Web.Configuration.WebConfigurationManager.ConnectionStrings["OBConnectionString"].ConnectionString;
        SitesUtil db = new SitesUtil(connectionString);
        List<MultiChoiceOption> keys = db.GetMultiChoiceOptions(keyId, 1); //TO DO CHANGE THIS TO REAL USERID

        return keys.Select(a => a.OptionValue).ToArray();
    } 
```

我的 Jquery/javscript 调用如下：

```
function GetKeys(keyid) {

    var pageUrl = '<%=ResolveUrl("~/WebService/UpdateDatabase.asmx")%>'
    $.ajax({
        type: "POST",
        url: pageUrl + "/GetMultiChoiceOptions",
        data: '{keyId:' + keyid + '}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: GetKeysSuccessCall,
        error: OnErrorCall
    });
}

function GetKeysSuccessCall(response) {
    /* TO DO */
    var i = 0;
    for (i =0; i < response.length; i++) {
        $("#popupList").append('<li>' + response[i] + '</li>');                
        }       
} 
```

我不确定如何在 javascript 中处理没有长度的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:05:55.563

我认为您应该首先使用**JSONSerializer**将正确的 json 结构发送到客户端。

您应该只返回一个具有 JSON 格式的字符串，然后它就可以工作了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:57:06.160

首先，使用谷歌控制台。最好的和有帮助的。

要查看您收到的内容，请使用`console.log(response);`（而不是 alert 并且不要在 IE 中使用，因为它不知道控制台）

首先尝试

```
$.ajax({
        type: "POST",
        url: pageUrl + "/GetMultiChoiceOptions",
        data: '{keyId:' + keyid + '}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(response){
          GetKeysSuccessCall(response);
        },
        error: function(msg) {
           OnErrorCall(msg);
         }
    }); 
```

还有**一个**：

```
function GetKeysSuccessCall(response) {
    /* TO DO */
    var i = 0;
    for (i =0; i < response.length; i++) {
        $("#popupList").append('<li>' + response[i] + '</li>');                
        }       
} 
```

repsonse 必须代替`item`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T22:21:56.273

我无法解释它为什么起作用，但我需要做的是获取 response.d 值....

所以这就是最终的解决方案：

```
function GetKeysSuccessCall(response) {
    /* TO DO */
    var result = response.d;

    var i;
    for (i = 0; i < result.length; i++)
    {
        $("#popupList").append('<li>' + result[i] + '</li>');         
    }
} 
```

（如果有人可以解释 .d 的来源？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:55:43.403

您可以像这样使用 .each 函数

```
 success: function (response) {
            var options= response.d;
            $.each(options, function (index, option) {
                $("#popupList").append('<li>' + response[option] + '</li>'); 

            });
        }, 
```

或者

```
function GetKeysSuccessCall(response) {
    /* TO DO */
    var i = 0;
    for (i =0; i < response.d.length; i++) {
        $("#popupList").append('<li>' + response.d[i] + '</li>');                
        }       
} 
```

# extjs - 如何从 gwc 访问 wms 层

> ID：12049680
> 
> 赞同：0
> 
> 时间：2012-08-21T06:50:55.780
> 
> 标签：extjs, openlayers, geoserver

我正在使用 openlayers、geoserver 和 Extjs，如何从 geoserver 的 geowebcache 正确访问 wms 层。现在我正在使用这段代码

```
 map.addLayer(
     new OpenLayers.Layer.WMS(
"trivandrum","http://localhost:8080/geoserver/gwc/service/wms",{
                srs:"EPSG:4030",
                LAYERS:'tvm_road_colony',
                Format:'image/png',
                transparent:true,
                tiled: true

            },
            {
                buffer: 0,
                displayOutsideMaxExtent:true,
                visibility: true,

                isBaseLayer: true
            } 
        )
);

        here I have got wms layer but when i try to zoom i did'nt get the layer completely how can i solve this problem? please help 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:54:11.460

您通过 geowebcache 访问 WMS 的方法是正确的。尝试去`http://localhost:8080/geoserver/gwc/demo`，看看你是否能够从那里查看图层演示。

需要注意的另外几件事 - 您使用 SRS 4030 - 确保在 geowebcache.xml 中正确配置，因为 geoserver/geowebcache 不会自动检测除 4386 和 900913 之外的 SRS

如果这不能解决问题，你会得到任何粉红色的屏幕吗？获取屏幕截图以查看您的输出内容也很有帮助

# windows-phone-7 - 如何使用 C# 在 wp7 中为动态创建的文本框数组声明和使用事件处理程序？

> ID：12049681
> 
> 赞同：-2
> 
> 时间：2012-08-21T06:50:58.923
> 
> 标签：windows-phone-7

我是 Windows Phone 7 的新手。我动态地创建了一组文本框。而且我不知道在哪里以及如何声明和使用文本框的事件处理程序。我的代码如下所示：

```
 public partial class MainPage : PhoneApplicationPage
{
    public TextBox[] textbox;
    public MainPage()
    {
        InitializeComponent();
        string[] str = new string[2];
        str[0] = "force";
        str[1] = "force components";
         textbox = new TextBox[2];

        for (int i = 0; i < 2; i++)
        {
            textbox[i] = new TextBox { Text = str[i] };
    textbox[i].Tap += new System.EventHandler(this.textbox[i]_Tap);
            listBox1.Items.Add (textbox[i]);
        }
    }
private void textbox[0]_Tap(object sender, RoutedEventArgs e)
     {

     }
private void textbox[1]_Tap(object sender, RoutedEventArgs e)
     {

     }
 } 
```

上面的代码在声明和使用事件处理方法时显示错误。请用一段可以理解的代码帮助我，以清除我的错误。感谢你所做的一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:20:50.350

您不能将方法命名为“private void textbox[1]_Tap”，[] 是不允许的。因此，即使您将其命名为：“private void textbox1_Tap”，当您将“i”放入其中时，您也无法调用该函数。

那是因为函数的名称是引用，以后编译器不会记住变量、函数等的名称。

# c++ - linux pthreads 上的 gcc 4.7 - 使用 __thread 的重要 thread_local 解决方法（无提升）

> ID：12049684
> 
> 赞同：8
> 
> 时间：2012-08-21T06:51:06.153
> 
> 标签：c++, linux, multithreading, c++11, pthreads

在 C++11 中，您可以拥有一个带有 thread_local 存储的重要对象：

```
class X { ... }

void f()
{
    thread_local X x = ...;
    ...
} 
```

不幸的是，这个特性还没有在 gcc 中实现（从 4.7 开始）。

gcc 确实允许您拥有线程局部变量，但仅限于普通类型。

我正在寻找一种解决方法：

这是我到目前为止所拥有的：

```
#include <iostream>
#include <type_traits>

using namespace std;

class X
{
public:
    X() { cout << "X::X()" << endl; };
    ~X() { cout << "X::~X()" << endl; }
};

typedef aligned_storage<sizeof(X), alignment_of<X>::value>::type XStorage;

inline void placement_delete_x(X* p) { p->~X(); }

void f()
{
        static __thread bool x_allocated = false;
        static __thread XStorage x_storage;

        if (!x_allocated)
        {
                new (&x_storage) X;
                x_allocated = true;

                // TODO: add thread cleanup that
                //     calls placement_delete_x(&x_storage)
        }

        X& x = *((X*) &x_storage);
}

int main()
{
        f();
} 
```

我需要帮助的是在当前线程退出时调用placement_delete_x(&x_storage)。我可以使用 pthreads 和/或 linux 中的机制来执行此操作吗？我需要向某种 pthread 清理堆栈添加函数指针和参数吗？

**更新：**

我想`pthread_cleanup_push`可能是我想要的：

[http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_cleanup_push.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_cleanup_push.3.html)

这会在正确的情况下调用清理处理程序吗？

**更新 2：**

看起来`boost::thread_specific_ptr`最终`pthread_key_create`使用`destructor`参数调用，而不是`pthread_cleanup_push`- 调用它的 tls 清理函数：

[http://pubs.opengroup.org/onlinepubs/009696799/functions/pthread_key_create.html](http://pubs.opengroup.org/onlinepubs/009696799/functions/pthread_key_create.html)

目前尚不清楚这两种方法之间的区别是什么，如果有的话。?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:55:54.567

`pthread_key_create`和朋友是您想要使用析构函数实现类型的线程特定变量的对象。但是，这些通常需要您管理创建和销毁变量的整个过程，我不确定您是否可以将它们与`__thread`.

`pthread_cleanup_push`不适合。如果线程在使用该资源的（短）代码块期间退出，则它旨在允许释放资源；如您链接到的文档中所述，它*必须*与该函数同一级别的a 匹配`pthread_cleanup_pop`，并且如果线程从其主函数返回，则不会调用处理程序。这意味着如果您希望线程局部变量在对函数的调用之间保持不变，则不能使用它。

为了那些不禁止第三方库的人的利益，[Boost](http://www.boost.org/doc/libs/release/doc/html/thread/thread_local_storage.html)提供了一种方便、可移植的方式来管理线程本地存储。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T11:30:15.840

正如迈克所说的那样`pthread_cleanup_push`是不合适的。正确的方法是使用`pthread_key_create`.

我已经实现了一个小的演示程序来展示如何做到这一点。我们实现了一个`thread_local`你使用的宏，如下所示：

使用真正的 C++11 功能，它将是：

```
void f()
{
    thread_local X x(1,2,3);
    ...
} 
```

有了这个：

```
void f()
{
    thread_local (X, x, 1, 2, 3);
    ...
} 
```

这和 boost::thread_specifc_ptr 的区别在于动态内存分配为零。一切都以`__thread`持续时间存储。它的重量也明显更轻，但它是 gcc/linux 特定的。

概述：

1.  我们曾经`std::aligned_storage`为变量创建 __thread 持续时间空间
2.  在给定线程的第一个条目上，我们使用placement new 在存储中构造变量
3.  我们还`__thread`为放置删除调用分配了一个链表条目
4.  我们使用`pthread_setspecific`来跟踪每个线程列表头
5.  当线程退出时，传递给的函数`pthread_key_create`遍历调用放置删除的列表。

...

```
#include <iostream>
#include <thread>

using namespace std;

static pthread_key_t key;
static pthread_once_t once_control = PTHREAD_ONCE_INIT;

struct destructor_list
{
    void (*destructor)(void*);
    void* param;
    destructor_list* next;
};

static void execute_destructor_list(void* v)
{
    for (destructor_list* p = (destructor_list*) v; p != 0; p = p->next)
        p->destructor(p->param);
}

static void create_key()
{
    pthread_key_create(&key, execute_destructor_list);
}

void add_destructor(destructor_list* p)
{
    pthread_once(&once_control, create_key);

    p->next = (destructor_list*) pthread_getspecific(key);
    pthread_setspecific(key, p);
}

template<class T> static void placement_delete(void* t) { ((T*)t)->~T(); }

#define thread_local(T, t, ...)                         \
T& t = *((T*)                                           \
({                                                      \
    typedef typename aligned_storage<sizeof(T),         \
        alignment_of<T>::value>::type Storage;          \
    static __thread bool allocated = false;             \
    static __thread Storage storage;                    \
    static __thread destructor_list dlist;              \
                                                        \
    if (!allocated)                                     \
    {                                                   \
        new (&storage) T(__VA_ARGS__);                  \
        allocated = true;                               \
        dlist.destructor = placement_delete<T>;         \
        dlist.param = &storage;                         \
        add_destructor(&dlist);                         \
    }                                                   \
                                                        \
    &storage;                                           \
}));

class X
{
public:
    int i;

    X(int i_in) { i = i_in; cout << "X::X()" << endl; };

    void f() { cout << "X::f()" << endl; }

    ~X() { cout << "X::~X() i = " << i << endl; }
};

void g()
{
    thread_local(X, x, 1234);
    x.f();
}

int main()
{
    thread t(g);
    t.join();
} 
```

笔记：

1.  您需要为每个 pthread_* 调用添加错误检查。我只是为了展示而将其删除。
2.  它使用`__thread`的是 GNU 扩展
3.  它使用*表达式语句*将辅助 __thread 变量名称保留在父范围之外。这也是一个 GNU 扩展。

# html - 如何风格 和 不影响菜单

> ID：12049685
> 
> 赞同：1
> 
> 时间：2012-08-21T06:51:11.397
> 
> 标签：html, stylesheet

如何将不同样式应用于 HTML/CSS 不同部分的相同元素。我尝试了以下它似乎不起作用。

菜单

```
 <div class="menu">
   <ul>
         <li><a href="#"><Link 1</a></li>
         <li><a href="#"><Link 1</a></li>
         <li><a href="#"><Link 1</a></li>
  </ul>
  </div> 
```

网页某处

```
 <div class="others">
   <ul>
         <li><a href="#"><Link 1</a></li>
         <li><a href="#"><Link 1</a></li>
         <li><a href="#"><Link 1</a></li>
  </ul>
  </div> 
```

CSS

```
 .menu ul,li{
         color: rgb(242,253,255);   
         list-style: none;
         text-decoration: none;
         font-size: 20px;
         font-family: chaparral pro;
         }

.others ul,li{
         color: rgb(242,253,255);   
         list-style: none;
         text-decoration: none;
         font-size: 10px;
         font-family: chaparral pro;
         } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T06:53:43.913

在 CSS 中使用`,`“和”表示，因此您的两个 CSS 子句都将适用于*所有* `li`元素（并且定义的最后一个优先）。尝试简单：

```
.menu ul li{
     color: rgb(242,253,255);   
     list-style: none;
     text-decoration: none;
     font-size: 20px;
     font-family: chaparral pro;
     }

.others ul li{
     color: rgb(242,253,255);   
     list-style: none;
     text-decoration: none;
     font-size: 10px;
     font-family: chaparral pro;
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:14:30.090

There are several problems in your code. Try following

However class is if you use it in many places you should use id if it is just in one place like the menu.

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>

        <style>
.menu ul li{
     color: rgb(242,253,255);   
     list-style: none;
     text-decoration: none;
     font-size: 20px;
     font-family: chaparral pro;
}

.others ul li{
     color: rgb(242,253,255);   
     list-style: none;
     text-decoration: none;
     font-size: 10px;
     font-family: chaparral pro;
}

        </style>

    </head>
    <body>
  <div class="menu">
   <ul>
         <li><a href="#">Link 1</a></li>
         <li><a href="#">Link 1</a></li>
         <li><a href="#">Link 1</a></li>
  </ul>
  </div>

  <div class="others">
   <ul>
         <li><a href="#">Link 1</a></li>
         <li><a href="#">Link 1</a></li>
         <li><a href="#">Link 1</a></li>
  </ul>
  </div>

    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:55:26.213

你犯了一个*小错误*`li`，你在下面的部分中概括了风格。

```
.others ul,li { ..... } 
```

以上将适用于页面的`ul`内部`.others`和所有`li`外部。只需使用

```
.others ul, .others li {
   /*.....*/
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:58:04.810

我认为它正在工作。

**[看演示](http://jsfiddle.net/X6kj8/)**

您的标记不正确

```
<li><a href="#"><Link 1</a></li>
<li><a href="#"><Link 1</a></li>
<li><a href="#"><Link 1</a></li> 
```

相反，它应该是

```
<li><a href="#">Link 1</a></li>
<li><a href="#">Link 1</a></li>
<li><a href="#">Link 1</a></li> 
```

还尝试通过执行以下操作将样式应用于 li 元素

```
.menu ul li 
```

而不是通过

`.menu ul,li`

# iphone - 如何在 tableview 中使用 uialert 和 uiactionsheet

> ID：12049687
> 
> 赞同：0
> 
> 时间：2012-08-21T06:51:20.283
> 
> 标签：iphone, ios, uialertview, uiactionsheet

我有一个项目的表格视图，当我单击一行时，我想将 uialertview 与带有按钮的 uiactionsheet 一起使用：编辑、删除和取消。当我单击按钮编辑时，我将打开一个模式视图。之前，我已经编辑了模态视图，当我单击一行时，我会去编辑模态视图，但现在我想添加 uiactionsheet，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:06:28.480

`-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath`在方法中编写 UIAlertview 或 UIActionsheet 。

我想这会对你有所帮助。

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath{
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"title" delegate:self cancelButtonTitle:@"cancel" destructiveButtonTitle:@"delete" otherButtonTitles:@"other 1", @"other 2", nil];
[actionSheet showInView:self.view];

//or
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"title" message:@"message" delegate:self cancelButtonTitle:@"cancel" otherButtonTitles:@"button",@"button1", nil];
    [alert show];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:04:40.557

只需使用 UIAlertView 如下：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"message" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Edit", @"Remove", nil];
[alert show]; 
```

以下方法将检查按下了哪个按钮：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
{
    switch (buttonIndex)
    {
         case 1:
         // perform Edit
             break;
         case 2:
         // perform Remove
             break;
         case 0:
         // perform Cancel, if any
             break;
    }
} 
```

# php - SELECT * FROM table_name ORDER BY column_name？

> ID：12049690
> 
> 赞同：0
> 
> 时间：2012-08-21T06:51:34.230
> 
> 标签：php, mysql, sql

好的，所以我在新闻部分编码，每次插入新新闻时，它都会显示在旧新闻下方。我想让它按 id 排序，但让它像倒数一样开始。我不知道如何解释，但是我希望它们按 id 添加的最新排序，所以如果插入的第一行的 id 是 1，那么我想要它显示在下一个 ID 下方。

所以 id = 2 的行将在这里

所以 id = 1 的行将在这里

这就是我想要的样子，而不是这样

所以 id = 1 的行将在这里

所以 id = 2 的行将在这里

.

对不起我的错误解释我希望这是可以理解的

继承人我的代码到目前为止

```
<?php  
require("include/config.php");
$sqlnews = mysql_query("SELECT * FROM news ORDER BY id");
while($row = mysql_fetch_array($sqlnews)) {
    $dbdate = $row['date'];
    $dbnews = $row['news'];
    echo "<h1><strong>$dbdate</strong></h1>";
    echo "<div class='content'>$dbnews</div><br><br>";
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T06:53:05.147

加入`DESC`你的`ORDER BY`条款

```
SELECT * FROM news ORDER BY id DESC 
```

默认情况下，它处于`ASC`模式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T06:53:25.990

`SELECT * FROM news ORDER BY id DESC`

DESC 是降序关键字
ASC 是升序

如果您都不指定，则默认行为是升序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:54:33.407

只需`DESC`在您的 sql 查询中使用关键字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T06:54:40.693

```
$sqlnews = mysql_query("SELECT * FROM news ORDER BY id DESC"); 
```

但是，使用 id 并不是一个好主意，因为从语义上讲，没有什么可以阻止某人更改自动分配 ID 计数的序列。

因此，您应该添加一列`created_at`。每次插入一行时，都可以使用 SQL 函数`NOW()`。

好处是你可以说：

```
SELECT * FROM news WHERE created_at <= NOW() ORDER BY created_at DESC 
```

这意味着您可以提前安排新闻项目，它会在日期/时间到达时自动显示！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T06:54:00.967

```
 $sqlnews = mysql_query("SELECT * FROM news ORDER BY id DESC"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T06:54:54.337

尝试这个：

只需要添加

```
order by id DESC 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T07:05:41.547

只需用以下代码替换您的代码：

```
<?php  
require("include/config.php");
$sqlnews = mysql_query("SELECT * FROM news ORDER BY id DESC");
while($row = mysql_fetch_array($sqlnews)) {
    $dbdate = $row['date'];
    $dbnews = $row['news'];
    echo "<h1><strong>$dbdate</strong></h1>";
    echo "<div class='content'>$dbnews</div><br><br>";
}
?> 
```

# linux - 如何使用 google breakpad 获取 coredump 的所有内存

> ID：12049692
> 
> 赞同：2
> 
> 时间：2012-08-21T06:52:02.473
> 
> 标签：linux, google-breakpad

我可以使用 MiniDumpWithFullMemory 在 windows 平台上获取 minidump 的所有内存。但是我如何在 linux 平台上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-14T08:21:38.557

最初的问题是如何在 linux 上使用 google breakpad 创建兼容的 gdb coredump。这其实是可行的，按照google的说明创建minidump和symbol文件：

[https://chromium.googlesource.com/breakpad/breakpad/+/master/docs/linux_starter_guide.md](https://chromium.googlesource.com/breakpad/breakpad/+/master/docs/linux_starter_guide.md)

然后使用此工具将 minidump 转换为 coredump： [https ://chromium.googlesource.com/chromium/src/+/master/docs/linux_minidump_to_core.md](https://chromium.googlesource.com/chromium/src/+/master/docs/linux_minidump_to_core.md)

请注意，从 minidump 生成 coredump 将不包含完整的内存转储，仅包含它的“slim”版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:45:04.613

Breakpad 目前不支持在 Linux 上写入全内存转储。对不起。如果您愿意，您可以写出完整的核心转储并使用 Breakpad 树中的 core2md 工具将它们变成小型转储： [http ://code.google.com/p/google-breakpad/source/browse/trunk/src/tools /linux/core2md/core2md.cc](http://code.google.com/p/google-breakpad/source/browse/trunk/src/tools/linux/core2md/core2md.cc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:52:08.600

内核可能（在某些情况下）转储[core(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/core.5.html)文件。另请参阅[此问题](https://stackoverflow.com/q/318647/841108)。您可能需要调用[setrlimit](http://www.kernel.org/doc/man-pages/online/pages/man2/setrlimit.2.html)系统调用来启用核心转储，也许是通过[ulimit](http://linux.about.com/library/cmd/blcmdl1_ulimit.htm) bash 内置函数。

许多事情可以通过[/proc](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)查询或配置，特别`/proc/1234/maps`是向您显示进程 1234 的地址映射并`/proc/1234/mem`让您访问其地址空间。

`gdb`经常给你一个[gcore](http://administratosphere.wordpress.com/2008/01/16/generating-a-coredump-gcore/)命令来强制核心转储。

# storyboard - 远离 PageViewControllers？

> ID：12049702
> 
> 赞同：0
> 
> 时间：2012-08-21T06:53:09.253
> 
> 标签：storyboard, segue, uipageviewcontroller

我对使用 xcode 很陌生，但遇到了问题。尝试浏览 UIPageView，但总体上我在 UIPageView 上找不到那么多资源。

我有一个 UIPageView（它被分成三个不同的 h/m 文件，就像在默认的 PageViewApplications 中一样），它显示了许多 jpg 文件，我想找到一种方法来摆脱它，一旦它到达另一个 ViewController结尾。我在 ModelController 中编写了这样的代码：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController{
    NSUInteger index = [self indexOfViewController:(DataViewController *)viewController];
    if (index == NSNotFound){
    return nil;
    }

    index++;

    if (index == [myJpgArray count]){
    [self performSegueWithIdentifier:@"mySegue" sender:self];
    }

    return [self viewControllerAtIndex:index storyboard:viewController.storyboard];

} 
```

但是从这段代码中，

```
[self performSegueWithIdentifier:@"mySegue" sender:self]; 
```

部分收到错误消息，“'ModelController' 没有可见的@interface 声明选择器'performSegueWithIdentifier:sender。'”

我希望这对于一个问题来说已经足够清楚了，但我希望有人能给我一个答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:24:06.897

performSegueWithIdentifier 是 UIViewController 类的一个方法。除非您的 ModelController 是 UIViewController 的子类，否则该方法将不可用。如果不完全了解您的应用程序，则无法确定，但我认为您需要在视图控制器（应该是 UIPageViewController 的子类）中执行此逻辑。

希望这可以帮助

# api - 无法在示例 BlackBerry 推送应用程序中注册

> ID：12049705
> 
> 赞同：3
> 
> 时间：2012-08-21T06:53:23.040
> 
> 标签：api, blackberry, push

我正在开发一个需要使用 PUSH API 的 BlackBerry 应用程序。我已经在 RIM 注册，他们已经向我发送了评估服务的凭据。在我的 BlackBerry 设备中，我安装了示例推送 API 应用程序，只是为了测试推送消息是否有效。设置可公开访问的内容提供程序 URL 后，我输入了示例应用程序的所有详细信息，以注册它以接收通知消息。尝试注册时会询问用户名和密码，但我不知道它们的用途。在从 RIM 收到的电子邮件中，有服务器应用程序和内容提供商管理门户应用程序的密码，但没有推送客户端的密码。

当我添加任意用户名和密码时，它会失败并显示 java.lang.Exception Registration with Push API failed, Cause of **port is available**的消息。但是，当我取消注册时，它会使用给定的任意用户名和密码成功取消注册用户。我使用 RIM 电子邮件中提供的端口。

我不知道为什么会发生这种情况，我很感谢您的即时回复。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:19:19.960

首先要指出的是，RIM 示例推送应用程序*过于复杂*。您所指的用户名和密码用于对`sample push initiator`运行在您的 Tomcat 服务器上的 Web 应用程序进行身份验证。你放什么都没关系，它们不用于身份验证。我只能假设添加它们是为了向您展示您*可以*将用户名和密码发送到基于 Web 的服务。

在 BlackBerry 应用程序中注册推送服务所需的**唯一内容是：**

*   推送应用程序 ID（例如 2672-c870l6c924r1i298O4o33cc5391y0e75134）
*   推送端口（例如 31940）
*   黑莓推送服务器 URL（例如[http://pushapi.eval.blackberry.com](http://pushapi.eval.blackberry.com)）

您收到的`port is unavailable`消息可能是因为您使用的设备没有为 BlackBerry Internet Services (BIS) 配置。确保其 SIM 卡具有有效的 BlackBerry 数据计划。

# bash - bash脚本在运行脚本之前检查现有文件

> ID：12049710
> 
> 赞同：0
> 
> 时间：2012-08-21T06:53:49.827
> 
> 标签：bash, nagios

由于我是 bash 脚本的新手（vbs 更像是我的东西），我无法让它运行。对你们来说可能很简单：

我在 C 系统磁盘上有一个 bash 脚本，它正在启动一个 NagWin（用于 Windows 的 nagios）插件，但在该脚本中，我想从一行代码开始，该代码行对 D 驱动器中的文件是否存在进行检查某个文件夹。

如果该文件存在，它只会回显一条消息并退出，否则如果不存在，则应继续执行 C 驱动器上的脚本

脚本的另一部分运行良好，只是它没有做任何检查，可能是因为跳转到 d 盘和 c 盘或其他东西有问题

已经谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:57:24.520

```
if test -f '/path/to/file'; then
  #Do your work
else
  echo 'File not found, exiting.'
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:57:28.243

```
if [ -f D:/file/on/d/drive ]
then C:/script/on/c/drive
else echo "Did not find file D:/file/on/d/drive" 1>&2
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:58:59.040

您可以在 bash 中以不同的方式测试文件是否存在：

1)

```
if [ -f "/path/to/file" ]; then echo "OK"; else echo "KO"; fi 
```

2)

```
[ -f "/path/to/file" ] && echo "OK" 
```

3)

```
[ -f "/path/to/file" ] || echo "KO" 
```

4)

```
if test -f "/path/to/file"; then echo "OK"; else echo "KO"; fi 
```

# architecture - 协调 DDD、视图模型和性能

> ID：12049716
> 
> 赞同：6
> 
> 时间：2012-08-21T06:54:25.863
> 
> 标签：architecture, domain-driven-design, ddd-repositories

我开始学习 DDD 并且担心从持久性中检索实体对象然后在 UI 的视图模型中重构它们的性能影响。

假设我有两个聚合根：

```
Person      Orders
------      -------
personId    orderId
name        personId 
```

每个聚合根都有自己的存储库，负责整个聚合的基本 CRUD 操作。

假设 UI 需要以下列：

```
viewmodel
---------
personName
numberOfOrders 
```

我可以想到两种填充此视图模型的方法：

1.  急切地加载所有人员实体，急切地加载基于 personId 的所有订单，将加载的实体重构到视图模型中。
2.  创建一个 JOIN/COUNT(orderId) 存储过程，并让数据库以与视图模型相同的结构返回数据。

显然，选项 1 可能是相当昂贵的操作，因为可能有多个人和多个订单导致 MULTIPLE 数据库调用。选项 2 只需要一次数据库调用。

如果选项 2 是首选（性能）选项，我在哪里存储这个“视图模型”和所谓的“数据库调用”？在我可以实现的存储库之上是否有单独的“数据服务层”？还是关于 DDD 通常如何实现的反模式？

基本上，我如何协调复杂的 DDD 聚合与自定义 UI 视图模型，同时牢记性能？

## 更新

**规格/查询对象**

在与朋友交谈时，他建议一种可能的解决方案是某种规范/查询对象模式。唯一的问题是我们必须在存储库级别实现这一点，需要我将 Persons 和 Orders 组合成一个大集合。出于事务一致性的原因，我通常会避免这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T17:32:51.907

您可以引入一个专用的值对象和一个可以返回给定人员的统计信息的存储库：

```
// value object
class PersonStatistics {
    String PersonName
    Int NumberOfOrders
    Money AverageOrderAmount
}

// repository
interface PersonStatisticsProvider {
    PersonStatistics Get();
} 
```

这类似于[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:05:27.087

从性能的角度来看，我会选择选项 2，但可能会将返回人员的查询与返回其订单数的查询分开。

您可以通过类似的方式使订单计数可用，`OrderRepository.GetOrderCountByPerson(personId)`即使它确实偏离了您对存储库的规范定义。

通常，您从域实体派生 ViewModel。有一个服务直接查询数据库，以便它返回一个与 ViewModel 完全匹配的数据结构，这似乎很奇怪。

# android - 新闻提要屏幕中使用的技术 - “新”Google Plus 应用程序中的自定义视图 - Android

> ID：12049729
> 
> 赞同：0
> 
> 时间：2012-08-21T06:55:23.950
> 
> 标签：android, android-layout, android-listview, android-view, android-scrollview

我想知道一些关于自定义列表的见解或想法，比如新谷歌加上更新的安卓应用程序中的视图。我正在专门研究这是一个列表视图还是一个带有膨胀自定义视图的滚动视图。

PS 这在用户滚动时也有一个自定义动画条目，这让我怀疑这也可能是一个带有自定义适配器的列表视图，当通过 getView 回收列表项时它有一个动画。

检查屏幕截图以获得一些清晰的理解。 ![在此处输入图像描述](../Images/736571c25f0d6a444fe45701179a35f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:09:01.473

我没有安装这个应用程序，但至少它的外观可以用`ListView`.
需要定义一个自定义适配器，并且该自定义适配器将在`getView()`方法中为每个条目膨胀布局。

每个条目的布局，或者换句话说，每一行的布局，可以用 a`RelativeLayout`及其所有组件表示：标题、+1 按钮、照片、日期等。

# powershell - 如何在文件列表中查找多个字符串？

> ID：12049732
> 
> 赞同：0
> 
> 时间：2012-08-21T06:55:29.180
> 
> 标签：powershell, powershell-2.0

我正在尝试在文件中搜索字符串并显示包含字符串的文件名

我写了一个像下面这样的脚本。

```
Function GetFileContainsData ([string] $Folderpath,[string] $filename, [string] $Data) { 

    $Files=Get-ChildItem $Folderpath -include $filename -recurse | Select-String -pattern $Data | group path | select name
    return,$Files
}

$configFiles= GetFileContainsData "C:\MyApplication" "web.config" "localhost"
Foreach ($file in $configFiles) { Add-Content -Path "Filelist.txt" -Value $file.Name} 
```

此脚本将包含字符串“localhost”的所有文件名写入 Filelist.txt。

我想找到不止一个字符串。如果我传递一个数组

```
$stringstofind=("localhost","$env:ComputerName")
Foreach ($strings in $stringsToFind) {
    $configFiles= GetFileContainsData $Installpath "web.config" $strings
    Foreach ($file in $configFiles) { Add-Content -Path "Filelist.txt" -Value $file.Name}
} 
```

它将使用文件列表查找数组中的每个字符串并更新它。如果同一个文件有两个字符串，它将在 Filelist.txt 中有该文件的 2 个条目。

是否可以在一个文件中找到多个字符串并列出文件名？[这样可以消除文件名的多余条目]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:26:20.547

实际上，`Select-String`接受 a`string[]`作为参数 for `-Pattern`，因此您不需要循环。

然后，您可以使用`Get-Unique`删除重复项。

事实上，`Select-String`它也接受文件列表作为路径，所以你可以这样做：

```
Get-ChildItem $FolderPath -Include $Filenames -Recurse | Select-String -Pattern $StringsToFind | Select-Object path | Sort-Object | Get-Unique -AsString 
```

在一行中替换函数和循环

**编辑**：最终的工作版本是

```
$Files=Get-ChildItem $Folderpath -include $filename -recurse | Select-String -pattern $Data | group path | select name |Get-Unique -AsString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:15:26.523

以下脚本将解决我遇到的问题。感谢 carlpett 的有用意见

```
<#
    .NAME
        Get-FilenameHasString
    .SYNOPSIS
        To search strings in file and return the filenames.
    .DESCRIPTION
        This script will be useful to find strings in list of files.
        It will eliminate the duplicate filenames
    .PARAMETER Filenames
        This parameter will be having filenames where the string needs to be searched.
    .PARAMETER FolderPath
        This parameter will be having folder where it will look for the filenames
    .PARAMETER StringsToFind
        This parameter will be having the strings to be searched
    .EXAMPLE
       .\Get-FilenameHasString -Filenames "Web.config" -FolderPath "C:\Program Files (x86)\MyProj" -$StringsToFind ("$env:ComputerName","localhost")
       To get the  list of web.config files which is there in Folder path having StringsTofind. The result will be saved in Filelist.log by default.
    #>

Param ( 
    $Filenames="web.config",
    $FolderPath="C:\Program Files (x86)\MyProj",
    $StringsToFind=("$env:ComputerName","localhost"),
    $Logfile="FileList.log"
    )

$configFiles= Get-ChildItem $FolderPath -Include $Filenames -Recurse | Select-String -Pattern $StringsToFind | Group path | select name | Get-Unique -AsString
Foreach ($file in $configFiles) { Add-Content -Path $Logfile -Value $file.Name} 
```

# ibm-midrange - 将流文件复制到打印机文件

> ID：12049733
> 
> 赞同：1
> 
> 时间：2012-08-21T06:55:35.767
> 
> 标签：ibm-midrange, ibm-ifs

我需要使用 IBM i 系统。该任务包括将存储的文件（PCL 格式）存储到 IFS 并将其（完全二进制）复制到输出队列。

为此，我遵循 4 个步骤：

```
1) Create a FILE in QTEMP.
2) Copy IFS file to the file in QTEMP.
3) Create a Printer File linked to a Output Queue
4) Copy the QTEMP file to Printer File. 
```

但是在第二步中，文件似乎被系统截断了。

有谁知道如何复制流文件而不被截断？

我运行的命令如下：

```
1) CRTPF QTEMP/IFSFILETP RCDLEN(8201) MBR(IFSFILETP) LVLCHK(*NO)
2) CPYFRMSTMF FROMSTMF([IFS_FILE_PATH]) TOMBR('/QSYS.LIB/QTEMP.LIB/IFSFILETP.FILE/IFSFILETP.MBR') MBROPT(*REPLACE) CVTDTA(*NONE) ENDLINFMT(*FIXED) TABEXPN(*NO)
3) CRTPRTF FILE(QTEMP/PRINTFILE) DEVTYPE(*USERASCII) OUTQ(MYLIBRARY/MYOUTPUTQUEUE)
4) CPYF FROMFILE(QTEMP/IFSFILETP) TOFILE(QTEMP/PRINTFILE) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:37:01.387

我手边没有 PCL 文件，但试试这样的

```
QSH CMD('cat -c [IFS_FILE_PATH] | Rfile -wbQ -c "ovrprtf qprint outq(mylibrary/myoutputqueue) devtype(*userascii)" qprint') 
```

这个想法是完全绕过复制到中间 QSYS.LIB 文件。 [Rfile](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzahz/rzahzrfile.htm)是 IBM i 独有的。

# ios - 在 Objective-C 中生成 3 个唯一的随机数？

> ID：12049741
> 
> 赞同：0
> 
> 时间：2012-08-21T06:56:00.967
> 
> 标签：ios, objective-c, random

我正在尝试生成 0 到 25 之间的 3 个随机数。我用`arc4random_uniform(25)`它来生成 3 个随机数。但问题是有时我得到两个甚至所有三个数字都是相同的，但我需要 3 个唯一数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:09:41.137

正如@Thilo 所说，您必须检查它们是随机的，如果不是，则重复：

```
// This assumes you don't want 0 picked
u_int32_t numbers[3] = { 0, 0, 0 };
for (unsigned i = 0; i < 3; i++)
{
    BOOL found = NO;
    u_int32_t number;
    do
    {
        number = arc4random_uniform(25);
        if (i > 0)
            for (unsigned j = 0; j < i - 1 && !found; j++)
                found = numbers[j] == number;
    }
    while (!found);
    numbers[i] = number;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T09:26:29.833

```
int checker[3];
for(int i = 0 ; i < 3 ; i++){
    checker[i] = 0;
}
for(int i = 0 ; i < 3 ; i++){
    random = arc4random() % 3;
    while(checker[random] == 1){
        random = arc4random() % 20;
    }
    checker[random] = 1;
    NSLog(@"random number %d", random);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T17:38:41.973

我正在通过以下方式生成一个唯一随机数数组：

```
-(void)generateRandomUniqueNumberThree{
    NSMutableArray *unqArray=[[NSMutableArray alloc] init];
    int randNum = arc4random() % (25);
    int counter=0;
    while (counter<3) {
        if (![unqArray containsObject:[NSNumber numberWithInt:randNum]]) {
            [unqArray addObject:[NSNumber numberWithInt:randNum]];
            counter++;
        }else{
            randNum = arc4random() % (25);
        }

    }
    NSLog(@"UNIQUE ARRAY %@",unqArray);

} 
```

# grails - 如何让 grails 将 Id 分配给遗留 Java 对象

> ID：12049744
> 
> 赞同：0
> 
> 时间：2012-08-21T06:56:03.203
> 
> 标签：grails, grails-orm

我有一个要在 grails 中使用的 java 带注释的域对象，它工作正常，但是所有生成的模板都用`Id`作主键。我试图`XxxConstraints.groovy`在与我的域对象相同的包中创建一个文件，并添加

```
mapping = { 
    id type:'assigned', name:<name of java field>, type: string 
} 
```

但这似乎不起作用。

我在尝试渲染 gsp 时遇到的错误是`"class XYZ does not contain field id"`

顺便说一句，我使用的是 grails 2.1.0。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:43:40.870

如果您在谈论脚手架视图，它们只是具有`id`硬编码的字段，例如：（`<g:hiddenField name="id" value="\${${propertyName}?.id}" />`来自 edit.gsp 的示例）。

只需手动修改您的 GSP 即可使用您的关键字段。

如果它不止一个类并且您不想生成所有视图，您可以将模板安装到您的项目源中[`grails install-templates`](http://grails.org/doc/latest/ref/Command%20Line/install-templates.html)并修改它们以使用您的 PK 字段。也许 Java 类的 Groovy 包装器将具有[ident()](http://grails.org/doc/latest/ref/Domain%20Classes/ident.html)方法，但不确定。

在查看[了文档](http://grails.org/doc/latest/ref/Command%20Line/install-templates.html)之后，我怀疑`mapping{}`DSL 是否会起作用。看起来只有`constraints`部分可以工作，我相信[你只需要`@Id`annotation](https://stackoverflow.com/questions/4602808/assigned-generator-class-on-hibernate-annotations)。

# xmpp - Google 聊天服务器存档 (XEP-0136)

> ID：12049747
> 
> 赞同：21
> 
> 时间：2012-08-21T06:56:15.387
> 
> 标签：xmpp, chat, archive, google-talk

我正在寻找一种如何通过使用 XEP-0136 标准从谷歌服务器检索聊天消息存档的方法，但我得到这些结果只是试图请求该功能。

要求：

```
<iq type="get"><pref xmlns="urn:xmpp:archive"/></iq> 
```

回复：

```
<iq xmlns="jabber:client" type="error" to="myEmail@gmail.com/9FF72CA7">
    <pref xmlns="urn:xmpp:archive"/>
        <error code="501" type="cancel">
            <feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>
        </error>
</iq> 
```

所以看起来 google 并没有实现这个功能，但这是真的吗？我不这么认为。

尝试设置 Google 服务器绝对支持的不可见性时也会发生同样的情况。

要求：

```
<iq type="set" id="invisible1" from="myEmail@gmail.com/00230F07">
    <query xmlns="jabber:iq:privacy">
        <active name="invisible"/>
    </query>
</iq> 
```

回复：

```
<iq xmlns="jabber:client" type="error" id="invisible1" to="myEmail@gmail.com/00230F07">
    <query xmlns="jabber:iq:privacy">
        <active name="invisible"/>
    </query>
    <error code="501" type="cancel">
        <feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>
    </error>
</iq> 
```

所以可能我做错了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T06:43:33.577

我也已经研究了很长时间了。正如 JoSo 已经指出的那样，似乎无法通过任何 XMPP 标准访问聊天历史记录。通过 XMPP 与聊天历史记录的唯一交互是通过非标准[XMPP 扩展](https://developers.google.com/talk/jep_extensions/otr)启用或禁用 Off-the-Record 。

话虽如此，官方的谷歌聊天客户端，如[Chrome 扩展](https://chrome.google.com/webstore/detail/chat-for-google/nckgahadagoaajjgafhacjanaoiihapd)，他们那种废弃的[Windows 客户端](http://www.google.com/talk/about.html)和 Android 应用程序都能够同步聊天。因此，必须至少有某种方式可以从外部访问聊天记录。但是，在任何地方都没有关于此功能的文档，并且 Google 论坛中的所有问题都没有得到解答。相当多的人猜测它可能通过 XEP-0136 实现，因为它是有道理的，但没有任何官方说法它也可能是一个完全专有的 XMPP 扩展。

对于不可见性，它是受支持的，但 Google 再次采用[自己的方式](http://chinmaykamat.wordpress.com/2010/01/22/google-talk-invisible-mode-in-pidgin/)，而不是使用 XEP-0016 扩展。在这种情况下，至少他们的方式记录[在这里](https://developers.google.com/talk/jep_extensions/shared_status)。因此，只需使用他们的 google:shared-status 命名空间来设置自己不可见。

话虽如此，在 Google 的聊天服务器上尝试任何 XMPP 扩展都是一种真正的痛苦，因为许多功能是专有的，使用它们自己的笨拙扩展而不是标准，或者根本没有实现。至少大量公共扩展的文档是相当不错的。

如果您正在寻找来自 Google 的官方答案，那么您也很幸运。第三方客户端（如 Pidgin）的大部分 Google Talk 功能已由开发人员进行了逆向工程。在您问之前，他们的音频/视频和文件传输扩展名也与当前标准相差甚远。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-29T12:06:07.463

Google does safe your chat history. But it is stored in your Google Mail account and not on the XMPP Server, thus XEP-0136 is not available.

As for the status. You are trying to set privacy which is different from presence status as defined in rfc3921 (See [http://xmpp.org/rfcs/rfc3921.html](http://xmpp.org/rfcs/rfc3921.html)). Google does not implement privacy as defined in XEP-0126.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T02:57:41.843

隐形实际上是通过谷歌特定的[“共享状态”](https://developers.google.com/talk/jep_extensions/shared_status)扩展设置的。

消息检索不通过 XMPP 公开。

# php - zend_smtp 和 php 关于 stream_set_timeout 的警告

> ID：12049748
> 
> 赞同：0
> 
> 时间：2012-08-21T06:56:15.973
> 
> 标签：php, zend-framework, email, smtp

我使用 Zend_Smtp 向用户发送通知。它运作良好。但是昨天和今天我在 error_log 中有很多错误，如下所示：

```
[21-Aug-2012 10:37:44] PHP Warning:  stream_set_timeout():
supplied argument is not a valid stream resource in
library/Zend/Mail/Protocol/Abstract.php on line 445 
```

并且电子邮件没有发送。这可能是什么原因？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:28:37.613

根据 PHP 文档： http: [//php.net/manual/en/function.stream-set-timeout.php](http://php.net/manual/en/function.stream-set-timeout.php)，我认为您的应用程序无法访问电子邮件服务器（流）。

您可以观看：

*   服务器上的更新（更改与电子邮件的通信）
*   防火墙或身份验证（如果您使用远程连接）

但是，如果您可以提供有关您的配置和实施的更多信息......

# python - 将我的 python 包的配置文件放在 /etc/ 并在 /var/log/ 中记录文件

> ID：12049756
> 
> 赞同：2
> 
> 时间：2012-08-21T06:56:35.717
> 
> 标签：python, packaging, distutils

我正在开发一个 python 包（仅限 Linux）并使用 distutils。我想将配置文件放在 /etc/ 中，并将日志文件放在 /var/log/ 或此类文件的另一个常见目标中。

Setuptools[建议](http://peak.telecommunity.com/DevCenter/setuptools#non-package-data-files)在必要时使用自定义脚本提取和复制数据文件。我应该只提供一个脚本还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T06:59:59.193

最好使用您的分发打包系统，例如 deb 或 rpm。因为附加数据文件的目的地通常取决于目标分布。

# pdf - 是否可以使用 mapfish 打印 servlet 打印多个图层

> ID：12049758
> 
> 赞同：2
> 
> 时间：2012-08-21T06:56:43.657
> 
> 标签：pdf, pdf-generation, gis, layer

我对 mapfish print-servlet 和 geowebcache 服务器的图层有疑问。（更多信息： http: [//www.mapfish.org/doc/print/index.html](http://www.mapfish.org/doc/print/index.html)）

如果我尝试将“规范”数据中的一层作为 POST 发送 - 请求它可以正常工作。如果我使用另一层，它也可以正常工作。

我的问题是我希望两个图层都显示在 PDF 的同一张图片中。

## 我试过了

```
layers: [{
                    baseURL:"hier steht die url",
                    opacity:1,
                    singleTile:true,
                    customParams:{
                        TRANSPARENT:true
                    },
                    type:"WMS",
                    layers:
                    ["Strom"],
                    format:"image/png"
                },
                {baseURL:"hier steht die url",
                    opacity:1,
                    singleTile:true,
                    customParams:{
                        TRANSPARENT:true
                    },
                    type:"WMS",
                    layers:
                    ["Kataster"],
                    format:"image/png"
                }
                ] 
```

## 和这个

```
layers: [{
                    baseURL:""hier steht die url"",
                    opacity:1,
                    singleTile:true,
                    customParams:{
                        TRANSPARENT:true
                    },
                    type:"WMS",
                    layers:
                    ["Kataster", "Strom"],
                    format:"image/png"
                } 
```

两者都没有工作。我只是在 PDF 中收到一条消息，提示找不到图层 Kaster,Strom。

所以它不会被读取为一个数组（就像一个字符串）。

## 这是我的完整规格数据。

```
 var jsSpec = {
                layout: "A4 portrait",
                title: "Demo MGC PDF",
                srs : "EPSG:900913",
                units : "dd",
                outputFilename :  "PrintFile",
                outputFormat : "pdf",
                layersMerging:true,
                layers: [{
                    baseURL:"hier steht die url",
                    opacity:1,
                    singleTile:true,
                    customParams:{
                        TRANSPARENT:true
                    },
                    type:"WMS",
                    layers:
                    ["Strom"],
                    format:"image/png"
                },
                {baseURL:"hier steht die url",
                    opacity:1,
                    singleTile:true,
                    customParams:{
                        TRANSPARENT:true
                    },
                    type:"WMS",
                    layers:
                    ["Kataster"],
                    format:"image/png"
                }
                ],
                pages : [{
                    center: [959585.51046, 6390630.44659],
                    scale: 64000000,
                    dpi: 190,
                    mapTitle: printFormPanel.getForm().findField('titlefieldvalue').getValue(),
                    comment: printFormPanel.getForm().findField('commentfieldvalue').getValue(),
                    data: [{
                        id : 1, 
                        name: "blah", 
                        icon: "icon_pan"
                    },{
                        id : 2, 
                        name: "blip", 
                        icon: "icon_pan"
                    }]
                }]
            }; 
```

## 这是我的完整配置文件：

```
layouts:     
A4 portrait:
mainPage:
  rotation: true
  pageSize: A4
  header:
    height: 50
    items:
      - !text
        font: Helvetica
        fontSize: 30
        align: right
        text: '${mapTitle}'
  items:
    - !map
      spacingAfter: 30
      width: 440
      height: 483
    - !text
      text: '${comment}'
      spacingAfter: 30
  footer:
    height: 30
    items:
      - !columns
        items:
          - !text
            backgroundColor: #FFFF00
            align: left
            text: Copyright Firma
          - !text
            align: right
            text: 'Page ${pageNum}' 
```

有人可以告诉我我做错了什么吗？servlet 不能打印多于一层吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-03-03T07:00:00.383

现在对解决方案的解释会很棒

# css - 固定在页面底部

> ID：12049762
> 
> 赞同：0
> 
> 时间：2012-08-21T06:57:12.360
> 
> 标签：css, printing

我正在为我的页面编写打印样式表。每个页面都有一个页脚。并且页脚应该留在打印页面的底部。如果之前有`30pt`空格。（如果主要内容和页脚之间有`30pt`空格，页脚应该固定在底部；否则，它应该转到下一页）

因为我使用的是打印样式表，我想我不能`JavaScript`用来检查和修复它。（所以请提出一个风格解决方案）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:04:46.597

你不需要 JS，只需要 CSS - 我在这里使用粘性页脚解决方案：[http ://www.cssstickyfooter.com](http://www.cssstickyfooter.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:48:18.717

你没有指定你的代码，我认为通过使用位置属性可以修复你的页脚。

```
 .footer{

    position: fixed;} 
```

# iphone - 如何避免在 Objective-C 中意外覆盖方法或属性

> ID：12049763
> 
> 赞同：13
> 
> 时间：2012-08-21T06:57:12.500
> 
> 标签：iphone, objective-c, ios

例如，我子类化`UILabel`并添加了一个方法或属性，称为`-verticalTextAlignment`垂直对齐文本。
并且在未来，如果下一版本的 SDK 或 iOS 添加了同名的方法或属性，那么我的应用程序可能会崩溃或出现意外行为。

*即使您使用类别而不是子类化，也会发生此问题。

**Question1**
在Objective-C中如何避免这种意外覆盖？
我认为您可以通过为所有方法和属性添加前缀来避免这种情况，例如`-XXX_verticalTextAlignment`. 但这不现实，不是吗？

**问题2**
我知道这种意外覆盖发生在编译时或更新 iOS SDK、OSX SDK 或 XCode 时。

但是在更新 iPhone 的 iOS 版本时是否也会发生这种情况？
例如，是否有可能您的应用在 iOS5 上运行良好但在 iOS6 上由于意外覆盖而无法在 iOS6 上运行。（您可以将 iOS5 和 iOS6 替换为任何版本，例如 iOS5.0 和 iOS5.1）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:00:51.830

1.  是的，您*可以*使用自己的前缀，但这并不常见。

2.  是的，它可以在操作系统更新之后发生；Objective-C 是一种非常动态的语言，其中消息被发送到方法而不是像其他语言那样被调用。这些事情是在运行时解决的，而不是编译时。

底线是肯定的，您可能会不小心覆盖未来的基类方法，唯一的解决方案是在它发生时在那里并重命名该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:01:25.800

在每个不断增长的、非命名空间的可可生态系统中，为您的类别方法添加前缀是避免这些冲突的最安全方法。

框架创建者、开源开发者和其他个人开发者应该为他们的类方法添加前缀是非常有效和合理的。

很多时候，我编写的方法都以我的公司首字母为前缀，然后继续使用该方法。

```
- (void)JCMyMethodNamedSimilarToBaseClass; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:12:35.250

**问题 1a 类别**

使用前缀，或者避免整个混乱并使用函数。

**问题 1b 子类方法**

如果一个方法做了足够通用的事情，超类也可以实现它，我只需选择一个比 Apple 通常选择的方法名称更“罗嗦”——例如在方法名称中指定一个非标准类型名。当然，这只会*降低*碰撞的可能性。

如果您需要更高级别的安全性，您可以在执行时对其进行测试（这样您就知道何时引入它们）并希望每个用户都保持最新状态——或者您可以更加依赖 C 和/或 C++（它们确实如此）没有这个问题）。

**问题2**

> 但是在更新 iPhone 的 iOS 版本时是否也会发生这种情况？

是的。这不是那么不寻常。当框架更新（例如通过软件更新）时，它们可能包含更新的框架。此代码被加载到 objc 运行时中，您始终可以获取已安装框架的 objc 实现的版本。

在 OS X 上，这也是一个更广泛的问题，您可以很容易地动态加载代码和/或插件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T07:25:59.783

一个优雅的解决方案是检查方法是否已经存在，如果不存在则仅添加它：[Mountain Lion 中的条件类别](https://stackoverflow.com/questions/11950173/conditional-categories-in-mountain-lion/11950348#11950348)

# vba - Excel宏模块复制变量列

> ID：12049765
> 
> 赞同：0
> 
> 时间：2012-08-21T06:57:20.473
> 
> 标签：vba, excel

我正在尝试创建一个将变量列从一张纸复制到另一张纸的宏。例如，我想将 A-sheet 3 列复制到 A-sheet 6 列，B-sheet 3 列复制到 C-sheet 6 列，等等。

我希望创建一个可以多次调用的程序。

```
Sub Copy_Column(a, b)
    Sheets(3).Select
    Range("a11:a1000").Select
    Selection.Copy
    Sheets(6).Select
    Range("b15").Select
    ActiveSheet.Paste
End Sub

Sub Master()
    Call Copy_Column(a, a)
End Sub 
```

发生的情况是将工作表 3 中的 A 列复制到工作表 6 中的 B 列，而不是 A 列。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:03:58.447

好吧，您永远不会在例程中使用`a`and参数。 您是说它们代表列字母吗？如果是这样，那么`b`

```
Sub Copy_Column(byval a as string, byval b as string)
    Sheets(3).Range(a & "11:" & a & "1000").Copy Sheets(6).Range(b & "15")
End Sub

Sub Master()
    Call Copy_Column("a", "a")
End Sub 
```

# python - 抓取日志问题

> ID：12049770
> 
> 赞同：3
> 
> 时间：2012-08-21T06:57:31.923
> 
> 标签：python, python-2.7, scrapy, scrapyd

我在一个项目中有多个蜘蛛，问题是现在我在 SETTINGS 中定义**LOG_FILE**

```
LOG_FILE = "scrapy_%s.log" % datetime.now() 
```

我想要的是`scrapy_SPIDERNAME_DATETIME`

但我无法在 log_file name 中提供 spidername ..

我发现

```
scrapy.log.start(logfile=None, loglevel=None, logstdout=None) 
```

并在每个蜘蛛**初始化**方法中调用它，但它不起作用..

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T18:14:49.693

由于此时日志观察器已经启动，因此蜘蛛`__init__()`还不足以自行调用；`log.start()`因此，您需要重新初始化日志记录状态以欺骗 Scrapy （重新）启动它。

在您的蜘蛛类文件中：

```
from datetime import datetime
from scrapy import log
from scrapy.spider import BaseSpider

class ExampleSpider(BaseSpider):
    name = "example"
    allowed_domains = ["example.com"]
    start_urls = ["http://www.example.com/"]

    def __init__(self, name=None, **kwargs):
        LOG_FILE = "scrapy_%s_%s.log" % (self.name, datetime.now())
        # remove the current log
        # log.log.removeObserver(log.log.theLogPublisher.observers[0])
        # re-create the default Twisted observer which Scrapy checks
        log.log.defaultObserver = log.log.DefaultObserver()
        # start the default observer so it can be stopped
        log.log.defaultObserver.start()
        # trick Scrapy into thinking logging has not started
        log.started = False
        # start the new log file observer
        log.start(LOG_FILE)
        # continue with the normal spider init
        super(ExampleSpider, self).__init__(name, **kwargs)

    def parse(self, response):
        ... 
```

输出文件可能如下所示：

`scrapy_example_2012-08-25 12:34:48.823896.log`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:26:50.653

您的 settings.py 中应该有[一个 BOT_NAME](http://scrapy.readthedocs.org/en/latest/topics/settings.html?highlight=bot_name#bot-name)。这是项目/蜘蛛名称。所以在你的情况下，这将是

```
LOG_FILE = "scrapy_%s_%s.log" % (BOT_NAME, datetime.now()) 
```

[这与 Scrapy 在内部](https://github.com/scrapy/scrapy/blob/master/scrapy/log.py#L94)所做的几乎相同

但为什么不使用[log.msg](http://scrapy.readthedocs.org/en/latest/topics/logging.html?highlight=log#scrapy.log.msg)。文档明确指出这是针对特定于蜘蛛的东西。使用它可能更容易，只需从大日志文件中提取/grep/... 不同的蜘蛛日志消息。

更复杂的方法是获取蜘蛛[SPIDER_MODULES](http://scrapy.readthedocs.org/en/latest/topics/settings.html?highlight=bot_name#spider-modules)列表的位置并加载这些包中的所有蜘蛛。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T08:55:41.433

您可以在 settings.py 文件中为**FEED URI**使用 Scrapy 的**[Storage URI 参数](http://doc.scrapy.org/en/latest/topics/feed-exports.html#storage-uri-parameters)**。

 **1.  %(姓名)s
2.  %(时间)s

    例如：/tmp/crawled/%(name)s/%(time)s.log**

# ruby-on-rails - 在回形针中找不到图像（没有路线匹配 [Get]）

> ID：12049771
> 
> 赞同：2
> 
> 时间：2012-08-21T06:57:41.740
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paperclip

我正在使用回形针上传图片：
我收到错误消息：

```
Started GET "/assets/audios/thumbnails/7/thumb/4_X_4.jpg?1345530644"
for 127.0.0.1 at 2012-08-21 12:03:04 +0530
Served asset /audios/thumbnails/7/thumb/4_X_4.jpg - 404 Not Found (1ms)<br/>
ActionController::RoutingError (No route matches [GET] "/assets/audios/thumbnails/7/thumb/4_X_4.jpg"):<br/> 
```

在我的模型中：

```
has_attached_file :thumbnail,
:styles => {:medium => "300x300>", :thumb => "100x100>"},
:url => "assets/:class/:attachment/:id/:style/:basename.:extension",
:path => ":rails_root/assets/:class/:attachment/:id/:style/:basename.:extension" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T03:12:57.443

这

```
:url => "assets/...",
:path => ":rails_root/assets/..." 
```

应该

```
:url => "/assets/...",
:path => ":rails_root/public/assets/..." 
```

尽管将附件保存在资产目录中是一个糟糕的主意。你可以有另一个，比如`files`inside `public`：

```
:url => "/files/:class/:attachment/:id/:style/:basename.:extension",
:path => ":rails_root/public/files/:class/:attachment/:id/:style/:basename.:extension" 
```

保存在内部`public/files`并使用`/files`url 将使网络服务器在 rails 之前命中文件（当然，正确配置您的网络服务器，例如 nginx，是另一个问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:25:39.580

我在网上不断搜索后找到了正确的解决方案。我试图通过我能想到的所有概率来处理这个问题：- 权限、更正路径、将服务器从 webrick 更改为瘦服务器。然后我研究了环境属性。因此，这是您的生产环境集中的正确答案：

```
 config.serve_static_assets = true 
```

这解决了问题。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-21T08:19:31.200

以下链接可能对您有所帮助：
[使用回形针上传图片](http://gkunwar1.wordpress.com/2012/06/25/how-to-upload-file-using-paperclip-in-rails/)

# testing - QA 测试的数据生成

> ID：12049772
> 
> 赞同：3
> 
> 时间：2012-08-21T06:57:55.343
> 
> 标签：testing, automated-tests, soapui, testbed

这个问题有点笼统，不是很具体。我们有一个使用 Oracle 数据库的 java 项目。我们目前正在使用 SoapUI 工具进行 QA 测试。每个测试在运行之前都需要一些数据存在于数据库中。我们目前运行测试的方式如下：

1.  在每次测试之前，我们运行一个`.sql`文件（测试独有）以将一些数据加载到数据库中
2.  我们运行soapui测试
3.  我们使用通用`.sql`文件来擦除我们为测试插入的测试数据
4.  返回`1`并运行下一个测试。

这种方法对我们来说的好处是，每个测试都在一张“干净的纸”上运行，带有自己的数据，并且与其他测试无关。

缺点是每次在开发过程中，当数据库发生变化时，例如向表中添加一列，我们需要更改`sql`插入该表的所有脚本，而不是在一个地方更改，这使得它非常困难维护测试。

我想知道做这类事情的一些行业“标准”方法是什么，或者想听听更多解决这个问题的方法。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:28:42.200

您可以将[SQL 数据生成器](https://stackoverflow.com/questions/591892/tools-for-generating-mock-data)集成到您的测试循环中。合适的数据生成器将模式和附加约束作为输入，并生成与当前模式一致的数据。

这样，每次模式更改时，测试生成器都会适应更改。您可以将测试特定的 SQL 脚本修改为数据生成器的输入约束。该链接指向另一个关于 SO 的问题，其中列出了相关工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:40:13.583

您可以在工具链中包含[Databene Generator](http://databene.org/databene-benerator/)。它可以生成 sql 文件或直接与数据库对话。您刚刚使用数据生成方案创建了 xml 文件。

# jquery - 从 asp.net 网格视图中删除寻呼机行的边框

> ID：12049775
> 
> 赞同：0
> 
> 时间：2012-08-21T06:58:07.513
> 
> 标签：jquery, asp.net, css, gridview

在我的网格视图中，我为所有单元格设置了底部边框，因为即使是寻呼机行也有这个边框。我想删除这个边框。我尝试使用 jquery，但可能我的选择器是错误的。我尝试提醒检查 jquery 是否可以找到我的网格视图

```
alert($("#<%=gvClaimDetails.ClientID%> tr").length); 
```

并且一直我得到“0”作为警报，即使网格视图中有数据也是如此。

我需要删除寻呼机行的底部边框。

网格的CSS：

```
table.grid, .grid
{
table-layout: fixed;
border-collapse: collapse;
margin: 5px 0;    
width: 100%;
}

table.grid th, .grid th, .grid th a
{
padding: 5px;
font-size: 18px;
color: #009900; /* background: #ddd;  added */
border-bottom: solid 2px #dddddd;
text-align: left;
background: #FFFFFF;
}

table.grid td, .grid td
{
padding: 7px;
border-bottom: solid 1px #dddddd;
color: #555555;
font-size: 14px; 
 }

 table.grid tr.alternate td, .grid tr.alternate td
 {
padding: 7px;
border-bottom: solid 1px #dddddd;
 }

table.grid tr.selected td, .grid tr.selected td
{
padding: 5px;
border: 1px solid #bbb;
background: #fff;
color: Red;
 }

.pager a
 {
border: 0px solid red;
color: #0067A5;
text-decoration: none;
padding: 2px 5px;
 }

.pager span
 {
border: 0px solid #DBEAFF;
color: #FFFFFF;
padding: 2px 5px;
}

.pager a:hover
{
color: #1E90FF;
} 
```

我正在给 text-decoration:none 我仍然可以在页码下方看到下划线。边框也为零像素，仍然有边框可见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:16:10.437

这应该工作...

```
.pager,.pages td {border-bottom:0;} 
```

我相信`CssClass`作为 a 应用的`PagerStyle`被添加到行（tr），所以这将使行和每个单元格边界底部为 0。

注意：您可能需要在其中添加一个`!important`，因为您在 CSS 的其他区域中定义了一个边框底部，该边框也将应用于分页器区域。

# iphone - UIBarButtoItem插入导航栏时如何改变边框？

> ID：12049779
> 
> 赞同：1
> 
> 时间：2012-08-21T06:58:37.940
> 
> 标签：iphone, ios, ipad

我的应用程序中有一个导航控制器。我在视图的导航栏中添加 UIBarButtonItem 。当我将 UIBarButtonItem 添加到导航栏中时，它们的默认宽度和高度是 44*30。我想要导航栏中大小为 30*30 的 UIBarButtonItem。我怎样才能做到这一点？我曾尝试更改 UIBarbutton 的 width 属性，但在探索时我知道只有在 ToolBar 中插入 UIBarButtons 才能更改默认宽度，而在插入导航栏时则无法更改。有什么方法可以实现这一目标吗？

我的基本需求是我想要导航栏左侧的两个**方形 (30*30)**条形按钮和导航栏右侧的一个。是的，我可以在那里插入简单的按钮并在那里设置框架而不是条形按钮。但我只想知道是否可以更改条形按钮的宽度。如果可以，那是什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:05:54.913

根据您的需要创建一个**UIButton**并将其分配为左右栏按钮。您可以根据需要更改框架。以与右键相同的方式。

> ```
> UIButton *mybutton = [UIButton buttonWithType: UIButtonTypeCustom];
> [mybutton setImage:[UIImage imageNamed:@"anyimage.png"]];
>   [mybutton setFrame:CGRectMake(0,0,30,30)];
> [mybutton addTarget:self action:@selector(onclick:) forControlEvents: UIControlEventTouchUpInside];
> UIBarButtonItem *customItem = [[UIBarButtonItem alloc] initWithCustomView: mybutton];
> [self.navigationItem setLeftBarButtonItem:customItem]; 
> ```

更新：-请根据您的边框样式使用它。

```
 [self.navigationItem setRightBarButtonItem:[[UIBarButtonItem alloc]initWithTitle:@"Test" style:UIBarButtonItemStyleBordered target:self action:@selector(test:)]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:11:02.043

```
UIButton *desiredBtn = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 30, 30)];
UIBarButtonItem *aBarButtonItem = [[UIBarButtonItem alloc]  initWithCustomView:desiredBtn]; 
```

然后将此栏按钮添加到导航栏

```
self.navigationItem.rightBarButtonItem = aBarButtonItem; 
```

# java - 应用程序关闭时清理 JSF 会话范围 bean

> ID：12049782
> 
> 赞同：0
> 
> 时间：2012-08-21T06:58:53.343
> 
> 标签：java, jsf-2, session-bean

当 JSF 应用程序关闭或 tomact 关闭时，我需要使活动会话对象无效并清理。以下是我在 application scoped bean 中编写的代码

```
@PreDestroy
public void shutdown(){

Map appMap = FacesContext.getCurrentInstance().getExternalContext().getApplicationMap();
Map<String,HttpSession> userSessionMap=(Map<String,HttpSession>)appMap.get("USERS");
log.info("userSessionMap " + userSessionMap);
Set<Entry<String, HttpSession>> entrySet = userSessionMap.entrySet();
for(Entry<String, HttpSession> entry:entrySet){
    HttpSession session = entry.getValue();
    log.info("HttpSession " + session.getId() + " calling invalidate");
    session.invalidate();
}
  } 
```

并且以下被覆盖 HttpSessionListener

```
@Override
public void sessionDestroyed(HttpSessionEvent se){

HttpSession session = se.getSession();
String id = session.getId();
LoginActionController controller = (LoginActionController) session.getAttribute("userInfo");
log.info("HttpSession " + id + ", LoginActionController " + controller + " is being destroyed...");
if(controller != null){
    log.info("User " + controller.getUserName() + " is logged out");
    String userName = controller.getUserName();
    ServletContext context = session.getServletContext();
    Object obj = context.getAttribute("USERS");
    if(obj instanceof Map){
    Map map = (Map) obj;
    map.remove(userName);
        RWFacade rWFacade =(RWFacade)session.getAttribute("rWFacade");
        rWFacade.closeFacade();
    }

}
} 
```

运行此代码时

```
session.invalidate(); 
```

没有被执行。我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:14:18.853

要在 tomcat 中重新启动时禁用会话持久性，您可以取消注释 $TOMCAT_HOME/conf/context.xml 中的配置

```
<!-- Uncomment this to disable session persistence across Tomcat restarts

    <Manager pathname="" /> --> 
```

也许它会帮助你。

# mysql - 如何在 MySQL 中随机选择每个用户 ID（列）的 5% 行？

> ID：12049785
> 
> 赞同：-1
> 
> 时间：2012-08-21T06:59:08.360
> 
> 标签：mysql, random-sample

如何使用 MySQL 随机选择每个用户 ID 列的 5% 行？

也就是说，mytable 包含 userid 列，我想随机检查每个用户输入的 5% 的行。所以查询应该返回每个用户行的 5%。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T07:04:00.527

你可以说：

```
SELECT * FROM mytable ORDER BY RAND() LIMIT 5 
```

如果您知道表中有 100 行。

如果你不知道，你可以先试试这个查询来找出：

```
SELECT COUNT(*) FROM mytable 
```

否则，您也可以尝试：

```
SELECT * FROM mytable WHERE RAND() < 0.05 ORDER BY RAND() 
```

这会选择大约 5% 的所有行（但它有点随机，因为它基本上选择有 5% 机会的行）。

否则，您可以使用子查询：

```
SELECT * FROM mytable ORDER BY RAND() LIMIT (SELECT COUNT(*) FROM mytable) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T12:48:43.927

我通过使用事件得到了解决方案：

```
drop event OEAuditEvent;

DELIMITER $$

CREATE EVENT OEAuditEvent
ON SCHEDULE EVERY 1 SECOND
STARTS '2012-09-05 09:00:00'

DO
BEGIN

  DECLARE a CHAR(20);
  DECLARE b,c,d INT;
  DECLARE done INT DEFAULT FALSE;

  IF CURRENT_TIME() = '23:40:00' THEN
begin

 DECLARE cur CURSOR FOR select OE_User,count(OE_User) from RNCM_Status where     date(OE_Date)=CURDATE() group by OE_User;
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

 OPEN cur;
 read_loop: LOOP

 FETCH cur INTO a, b;

SET c=ceil((b*5)/100);

IF done THEN

          LEAVE read_loop;
ELSE
          insert into OE_Audit(MDN,CAF,UploadedDate,OEUser,OEDate,UserCount,QCCount,intime) select MDN,CAF,UploadedDate,OE_User,OE_Date,b,c,now() from RNCM_Status where OE_User=a and date(OE_Date)=CURDATE() order by rand() limit c;
    END IF;

 END LOOP;
  CLOSE cur;
 end ;
 END IF;

END $$

DELIMITER ; 
```

# c# - 如何在不为其声明单独变量的情况下将对象添加到字典？

> ID：12049786
> 
> 赞同：1
> 
> 时间：2012-08-21T06:59:29.577
> 
> 标签：c#, dictionary, struct

我无法解决如何将项目添加到我在 dictionary.Add 参数中声明的字典。

我有一个名为 option 的结构，带有 2 个字符串。

我在一个名为 Contains 的类中有一个字典。

我要完成

```
 option Change = new option("change","change");
        Contains.Add(contains.Count + 1, Change); 
```

在同一条线上。这可能吗？

我试过了

```
 Contains.Add(contains.Count + 1, option Change = new option("change","change")); 
```

它没有用。

我确定答案很简单，只是在搜索了 30 分钟后，我无法使用谷歌或这个网站弄清楚。对不起！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T07:02:33.940

只是

```
Contains.Add(contains.Count + 1, new option("change","change")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T07:02:49.747

你可以做

```
Contains.Add(contains.Count + 1, new option("change", "change")); 
```

或者

```
option Change = new option("change", "change");
Contains.Add(contains.Count + 1, Change); 
```

第一个代码块`option`在现场创建一个新实例并将其添加到字典中。第二个代码块创建一个类型的新变量`option`（对 的实例的引用`option`）并将其添加到字典中。您不能在对 Contains.Add 方法的调用中声明新变量，这是非法的。

PS：C# 语言规范文档[范围](http://msdn.microsoft.com/en-us/library/aa691132%28v=vs.71%29)、[局部变量声明](http://msdn.microsoft.com/en-us/library/aa664742%28v=vs.71%29)和[语句](http://msdn.microsoft.com/en-us/library/ms173143.aspx)。如果您想了解如何在 C# 中声明变量，这些将是与您最相关的主题（但可能有点难以从正式的 C# 语言规范中掌握，所以我建议您选择一本关于如何声明的好书开始使用 C# 并寻找一些类似 MSDN 上的教程）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T07:04:38.450

您可以尝试以下方法：

```
Contains.Add(contains.Count + 1, new option("change", "change")); 
```

# ruby - 如何获取 Heroku 服务器的 IP，我的应用程序放在哪里？

> ID：12049802
> 
> 赞同：1
> 
> 时间：2012-08-21T07:00:53.810
> 
> 标签：ruby, heroku, ip

我正在尝试获取运行我的应用程序的服务器的 IP 地址。在 PHP 中存在被调用的函数`GetHostByName()`（或类似的函数），Ruby 的替代方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:05:16.517

您可以使用它（不需要外壳）：

```
require 'socket'
def local_ip
  orig, Socket.do_not_reverse_lookup = Socket.do_not_reverse_lookup, true  # turn off reverse DNS resolution temporarily
  UDPSocket.open do |s|
    s.connect '64.233.187.99', 1
    s.addr.last
  end
ensure
  Socket.do_not_reverse_lookup = orig
end 
```

输出：

```
# irb:0> local_ip
# => "192.168.0.1" 
```

我使用此功能，但归功于：[http ://coderrr.wordpress.com/2008/05/28/get-your-local-ip-address/](http://coderrr.wordpress.com/2008/05/28/get-your-local-ip-address/)

# android - 如何解析 Scorm1.2 清单文件

> ID：12049810
> 
> 赞同：1
> 
> 时间：2012-08-21T07:01:32.330
> 
> 标签：android, xml-parsing, scorm

我必须解析`Scorm1.2`清单文件以获取 Scorm1.2 文档中的所有 HTML 页面。

我想在我的应用程序中遵循 SCORM1.2 的所有标准。

为此，我需要解析一个[imsmanifest文件。](http://www.csh.rit.edu/~lauraw/media/imsmanifest.xml)此清单文件包含许多属性，例如链接中给出的属性。

我的问题是如何解析这个文档，以获取所有包含我的 html 文件路径的资源属性。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T10:02:52.607

`<resources>`在清单文件中查找元素。每个资源将有许多文件。

```
<resources>
 <resource identifier="resource_1" type="webcontent" adlcp:scormtype="sco" href="shared/launchpage.html">
  <file href="Etiquette/Course.html"/>
  <file href="Etiquette/course.jpg"/>
  <file href="Etiquette/Distracting.html"/>
  <file href="Etiquette/distracting.jpg"/>
 </resource>
</resources> 
```

只需使用您以前使用过的任何 XML 阅读器读取 XML 文件，然后获取 href 属性。根据您使用的语言，将有大量关于如何读取任何给定 XML 文件的资源。

请记住可能在其他一些元素中使用的“基本”属性。查看 SCORM 1.2 规范以获取更多详细信息 -

[http://www.adlnet.gov/resources/SCORM-1-2-Specification?type=technical_documentation](http://www.adlnet.gov/resources/SCORM-1-2-Specification?type=technical_documentation)

# audio - 使用 mlt 混合两个音轨

> ID：12049813
> 
> 赞同：2
> 
> 时间：2012-08-21T07:02:04.363
> 
> 标签：audio

我正在使用 mlt 框架来编辑音频和视频轨道。现在我有一个用例，比如，有一个音轨，一个人在唱没有音乐的歌曲，而另一个音轨我有这首歌的音乐。现在我想混合这个，我的意思是我想添加音乐曲目的歌曲。请建议我应该使用哪个融化命令？

谢谢 Sougata

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:43:04.960

如果您有两个 mp3 或其他格式的音频剪辑，请尝试以下操作：

融化 avformat:a.mp3 out=400 -move in=0 out=400 -track avformat:b.mp3 out=400 -transition mix in=0 out=400 a_track=0 b_track=1

# html - css导致溢出

> ID：12049819
> 
> 赞同：1
> 
> 时间：2012-08-21T07:02:43.063
> 
> 标签：html, css, menu, css-float

**这个问题已经回答了**

我有这个包含两个无序列表的 div。我希望将这些列表放在彼此旁边，而不是彼此上方/下方。

这是我想出的最好的，但是当添加浮动时，列表似乎飞出容器？

为什么会这样？它似乎与UL上的浮动有关。

**一个小小提琴** [http://jsfiddle.net/ynSdU/3/](http://jsfiddle.net/ynSdU/3/)

**CSS**

```
.products_overview {width:100%; border: 3px solid #F00;opacity:0.95;height: 50px;}
.products_overview ul{list-style:none;float:left;border-left:1px solid #666;margin:20px 0px 10px 30px;padding:10px;} 
.products_overview li.ldd_heading {font-family: Georgia, serif;font-size: 13px;font-style: italic;color: #333; padding:0px 0px 10px 0px;}
.products_overview li.ldd_heading a.link {font-family: Georgia, serif;font-size: 13px;font-style: italic;color:#333;padding:5px 3px 5px 3px; }
.products_overview ul li a{font-family: Arial, serif;font-size:10px;line-height:20px;color:#333;padding:1px 3px;text-decoration:none;}
.products_overview ul li a:hover{-moz-box-shadow:0px 0px 2px #333; box-shadow:0px 0px 2px #333;background: #CCC;} 
```

**HTML**

以下代码被带有类的 DIV 包围：products_overview！！！

```
<ul>
    <li class="ldd_heading"><a class='link'>header</a></li>
    <li><a href="#">1</a></li>
    <li><a href="#">2</a></li>
    <li><a href="#">3</a></li>
    <li><a href="#">4</a></li>
    <li><a href="#">5</a></li>
    <li><a href="#">6</a></li>                           
</ul>  
<ul>
    <li class="ldd_heading">header</li>
    <li><a href="#">1</a></li>
    <li><a href="#">2</a></li>   
    <li><a href="#">3</a></li>                                  
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:06:34.503

只给`overflow:hidden`你的父母 div

实际上，当您在子元素中使用浮动时，您应该清除这些浮动，所以您没有这样做，所以我通过定义`overflow:hidden`您的父 div 浮动元素来清除浮动元素。

**CSS**

```
.products_overview {width:100%; border: 3px solid #F00;opacity:0.95; overflow:hidden;} 
```

[http://jsfiddle.net/ynSdU/4/](http://jsfiddle.net/ynSdU/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:07:57.613

您需要添加一个clearfix：

我用 a`span.clear`来清除你的花车。

```
...<li><a href="#">3</a></li>                                  
</ul>
<span class="clear">&nbsp;</span>
</div> 
```

CSS：

```
span.clear
{
    clear: both;
    display: block;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/ynSdU/7/](http://jsfiddle.net/Kyle_Sevenoaks/ynSdU/7/)

为了便于阅读，我更喜欢使用这种方法。我可以看到`span.clear`并知道我已经清除了我的花车。其他方法也同样有效。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:08:41.117

使用浮点数会将它们从布局中移除，因此它们不再影响包含 div 的高度。

你只需要在你的容器上：

```
.products_overview {overflow:hidden} 
```

# objective-c - UIViewControllers 中的类别覆盖方法不起作用 - 从未调用过方法

> ID：12049820
> 
> 赞同：0
> 
> 时间：2012-08-21T07:02:46.593
> 
> 标签：objective-c, categories

我有一个 iPad 3 应用程序，我只想在横向模式下查看。我有几个 UIViewContoller 子类（它是一个非常简单的应用程序），并且在所有这些子类中我都有以下代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight;
} 
```

代码不大，但重复，我想学习如何在 Objective-C 中避免这种情况。我阅读了有关类别的内容，以及它们如何覆盖它们应用的类/实例中的方法，因此决定尝试。我使用 Xcode 向导为 UIViewController 类创建了 LandscapeOnly 类别，并将上面的实现移到其中 - 无济于事。我尝试将方法签名添加到头文件中，但这也没有改变任何东西。

这是怎么做到的？如何使用类别来覆盖实例方法？

我在这里读到另一个问题，不鼓励使用类别和覆盖方法，所以也许我一直都错了？实现我想要实现的目标的规范方式是什么？我可以使用自定义 UIViewController 子类，并让所有其他控制器派生自它，但是一旦我拥有具有不同要求的控制器并因此具有多个基类，这就会中断。例如，在其他语言中，我会使用 mixins，我认为 Objective-c 类别是它们的对应物吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:22:41.960

[Categories](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/ObjectiveC/Chapters/ocCategories.html) are used to add additional methods to the class but not for overriding.

I think you can create a UIViewController subclass that overrides the method you mentioned and use this subclass as the super class of all your view controller so as to eliminate duplicate codes.

Secondly, you can use [class_replaceMethod](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/class_replaceMethod) or [method_exchangeImplementations](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/method_exchangeImplementations) to replace / exchange the implementation of the method you mentioned. But it would be dangerous.

# php - 从字符串生成数组

> ID：12049822
> 
> 赞同：1
> 
> 时间：2012-08-21T07:03:08.200
> 
> 标签：php, javascript, arrays, json, merge

当我运行时：

```
while($r = mysql_fetch_assoc($result3)) { 

echo json_encode($r); 

} 
```

结果是：

```
{"test1":"1","test2":"2","test3":"3","test4":"4"}

{"test1":"5","test2":"5","test3":"7","test4":"8"} 
```

**我的问题是：如果知道行数不固定，我如何根据上面的结果创建数组，它可能会根据数据而变化。因此，我可以对数组进行更改并以类似于以下的格式对其进行解析：**

```
["test1"=>"1","5"],

["test2"=>"2","6"], 

["test3"=>"3","7"], 

["test4"=>"4", "8"] 
```

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T07:12:27.987

**试试这个 ：**

```
<?php

$arr = array();

while ($r = mysql_fetch_assoc($result3)) 
{ 
    foreach ($r as $index=>$item)
    {
        $arr[$index][]=$item;
    }
}

?> 
```

并编码为 JSON *（重新排列数组后）*：

```
$arr = json_encode($arr); 
```

# c# - 清除列表视图的所有项目- c#

> ID：12049823
> 
> 赞同：0
> 
> 时间：2012-08-21T07:03:09.073
> 
> 标签：c#, .net, listview

如何在 C# 中清除 ListView？

这是我填充 ListView 的方式：

```
int listViewCounter = 0;
for (int i = 0; i < dtXLS.Rows.Count; i++)
{
    listViewCounter++;

    ListViewItem item = new ListViewItem();
    item.Text = "First item" + listViewCounter;
    item.SubItems.Add("sadad" + listViewCounter);
    item.SubItems.Add("sadad" + listViewCounter);
    item.SubItems.Add("sadad" + listViewCounter);
    item.SubItems.Add("sadad" + listViewCounter);
    LV.Items.Add(item);

    LV.Items[listViewCounter - 1].SubItems[0].Text = listViewCounter.ToString();
    LV.Items[listViewCounter - 1].SubItems[1].Text = "sample1";
    LV.Items[listViewCounter - 1].SubItems[2].Text = "sample2";
    LV.Items[listViewCounter - 1].SubItems[3].Text = "sample3";
    LV.Items[listViewCounter - 1].SubItems[4].Text = "sample4";
} 
```

结果将是：

```
1st Column    2nd Column    3rd Column    4th Column    5th Column
1             sample1       sample2       sample3       sample4 
```

Cdeez 这是我的代码的一部分，因此您可以看到：

```
public void ProcessFunction(RichTextBox rtb1, RichTextBox rtb2, DataTable dtXLS, ListView LV)
{
    int matchlist_counter = 0;

    string[] wordsToRedact = new string[dtXLS.Rows.Count];

    for (int i = 0; i < dtXLS.Rows.Count; i++)
    {
        wordsToRedact_counter++;

        wordsToRedact[i] = dtXLS.Rows[i][0].ToString();
        wordsToRedact[i] = Regex.Escape(dtXLS.Rows[i][0].ToString());

        Regex test = new Regex(@"\b(" + wordsToRedact[i] + @")\b", RegexOptions.Singleline | RegexOptions.Compiled);
        MatchCollection matchlist = test.Matches(rtb1.Text);

        if (matchlist.Count > 0)
        {
            for (int j = 0; j < matchlist.Count; j++)
            {
                WordsToRedact words = new WordsToRedact(matchlist[j]);

                HighLighting HL = new HighLighting();
                HL.Highlight_Words(pdfRT, words, Color.Yellow);
                matchlist_counter++;
            }
        }

        ListViewItem item = new ListViewItem();
        item.Text = "First item" + wordsToRedact_counter;
        item.SubItems.Add("sadad" + wordsToRedact_counter);
        item.SubItems.Add("sadad" + wordsToRedact_counter);

        LV.Items.Add(item);
        LV.Items[wordsToRedact_counter - 1].SubItems[0].Text = wordsToRedact_counter.ToString();
        LV.Items[wordsToRedact_counter - 1].SubItems[1].Text = wordsToRedact[i];
        LV.Items[wordsToRedact_counter - 1].SubItems[2].Text = matchlist_counter.ToString();

        matchlist_counter = 0;
    }
}

private void analyzeButton_Click(object sender, EventArgs e)
{
    listView1.Items.Clear();
    DataTable dtXLS = loadXLS(xls_path);
    WordsToRedactFunc(pdfRT, visfRT, dtXLS, listView1);
    MessageBox.Show("Processing done!", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information);
} 
```

我现在的问题是每次单击特定按钮时如何清除所有项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T07:05:16.640

更改您的代码：

```
ListViewItem item = new ListViewItem("First item" + listViewCounter);
item.SubItems.Add("sadad" + listViewCounter);
item.SubItems.Add("sadad" + listViewCounter);
item.SubItems.Add("sadad" + listViewCounter);
item.SubItems.Add("sadad" + listViewCounter);
LV.Items.Add(item); 
```

并在按钮点击这样写`LV.Items.Clear();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T18:34:34.203

您可以使用以下方法清除您的列表：

`listView1.Items.Clear();`

要添加一些新项目，请考虑

```
listView1.Items.Add(new ListViewItem(new string[] { string1 , string2 , ....})); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:22:35.070

For all who will encounter the same problem as this, I now figure out what's wrong with my code, and I just want to post it here,

```
private void analyzeButton_Click(object sender, EventArgs e)
{
    listView1.Items.Clear();
    //I just add this line 
    listviewItem_Counter = 0;  // -> this integer needs to be set as zero because evrytime the analyze button be click it will be use, so it needs to be fresh again!

    DataTable dtXLS = loadXLS(xls_path);
    WordsToRedactFunc(pdfRT, visfRT, dtXLS, listView1);
    MessageBox.Show("Processing done!", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-09T19:54:07.517

LV.Columns.Clear() 将清除所有列，包括标题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T07:14:00.630

Simply use [`LV.Clear()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.clear.aspx) . This will remove all items and columns from the control.

# grails - 如何在 Grails 中检索最后保存的域类

> ID：12049824
> 
> 赞同：2
> 
> 时间：2012-08-21T07:03:14.343
> 
> 标签：grails

我有一个名为 TimeEvent 的域类，它可以有两种类型之一（TimeEvent 中的属性作为枚举）START 或 STOP。存储 START 类型的域类时，我首先要检查最后保存的 TimeEvent 以查看是否必须首先存储 STOP TimeEvent。

问题是我还没有找到如何检索上次保存的 TimeEvent。我可以使用任何顶级或最后的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:23:41.793

将[dateCreated](http://grails.org/doc/2.1.x/guide/GORM.html#eventsAutoTimestamping)属性添加到 TimeEvent 域类并获取最后一行，如下所示：

```
def lastEvent = TimeEvent.list([max:1,sort:"dateCreated",order:"desc"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:11:37.583

也许你有 3 个选择：

1）正如奥拉夫所说：添加 dateCreated 属性

2) 使 TimeEvent.list().last() <- 这给你列表的最后一个对象

3）如果您需要审核所有类（不仅是 TimeEvent），您应该考虑使用 Hibernate Envers 来审核类

# magento - Magento中的网络表单不起作用

> ID：12049826
> 
> 赞同：0
> 
> 时间：2012-08-21T07:03:17.130
> 
> 标签：magento

我在我的 magento 中安装了 webform，然后尝试删除“Powered by Magento”。我试图改变`app/code/community/VladimirPopov/WebForms/Block/webforms.php`。

在 Webform.php 文件中，代码已完全编码。通过从 Google 搜索它，我得到了替代的 webform.php。因此，它“由 Magento 提供支持”已被删除。但在那之后，webform 无法正常工作或带有 Ajax 提交的表单是不工作。我是magento的新手。

“webform not working”是否与“Powered by Magento”有关。如果还有其他问题，请帮助我。在错误控制台中，它显示`'webform_myid_submit is not a function'`。如果有人知道，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T10:51:03.197

请仔细检查您是否两次导入 jQuery 或prototype.js lib。

我有类似的问题，并已通过这种方式解决。

# mdx - 如何在多维数据集中不存在日期的两个日期之间在 mdx 中查询

> ID：12049835
> 
> 赞同：0
> 
> 时间：2012-08-21T07:04:23.527
> 
> 标签：mdx, pentaho

我在查询两个日期 DateFrom 和 DateTo 之间的 mdx 中的数据时遇到了一些问题。简单的问题是，假设我们有 [Year][Month][Day] 的 3 条记录：

```
[2012][8][21]
[2012][8][22]
[2012][8][23] 
```

例如，如果我将 DateFrom 和 DateTo 传递给数据库中没有的东西`DateFrom = [2012].[8].[20] and DateTo = [2012].[8].[24]`，它会显示错误“Mondrian Error:MDX object '[Date].[2012].[8].[20]' not found in cube '电子邮件'”

但是，例如，如果我将 DateFrom 和 DateTo 设置为数据库中的某些内容`DateFrom = [2012].[8].[21] and DateTo = [2012].[8].[23]`，则它可以工作。

因为 DateFrom 和 DateTo 是从 web ui 中的 Frond 端传递的，所以我无法控制它，所以我认为我需要找到大于 DateFrom 的最小值和小于 DateTo 的最大值，但我不知道如何， 任何的想法？还是我有任何其他方法来解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:06:36.623

一般来说，我建议您保持 DateTime 维度没有孔，并且过去有较旧的界限，将来有很远的界限，这样您就可以毫无问题地查询。

如果您无法编辑多维数据集定义，您可以在 MDX 中使用 FirstChild 和 LastChild 运算符来获取场景中的开始日期和结束日期（我想您的日期已排序）。

# gwt - Google GWT Chart Tool 设置条形之间的空间间隙

> ID：12049836
> 
> 赞同：0
> 
> 时间：2012-08-21T07:04:32.257
> 
> 标签：gwt, google-visualization

任何人都知道是否可以在 GWT-Chart-tool 库中指定两个条之间的空间/抓地力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:04:23.893

您必须使用该`bar.groupWidth`设置（有关更多详细信息，请参阅[配置选项](https://developers.google.com/chart/interactive/docs/gallery/barchart#Configuration_Options)）。

```
Options options = Options.create();
Options barOptions = Options.create();
barOptions.set('groupWidth','20%');
options.set('bar',barOptions); 
```

将`options`实例传递给`draw`您的函数`BarChart`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:52:35.497

你可以使用[gwt-Highchart](http://www.moxiegroup.com/moxieapps/gwt-highcharts/)和[PoinPaddind](http://api.highcharts.com/highcharts#plotOptions.bar.pointPadding)和 PointWidth* 你可以做你想做的事。

*   api.highcharts.com/highcharts#plotOptions.bar.pointWidth

# asp.net - 简单会员提供者 vs 通用 vs 代码优先

> ID：12049841
> 
> 赞同：3
> 
> 时间：2012-08-21T07:04:41.157
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership, membership-provider

我想从 SQL Server Compact 的角度询问这三个成员资格提供程序之间有什么区别。据我所知，前两个可以通过设计使用紧凑型服务器，第三个我猜是巧合，因为实体框架。那么，实际上有什么区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:51:32.063

Difference is Universal 与原始版本几乎相同，但增加了对 SQL Compact 和 Azure 的支持。简单的成员资格有点简化，有一些额外的现代实现，如基于令牌的密码重置，并且可以很好地与 ASP.NET 网页配合使用。两者都是使用准系统 SQL 编写的，并且具有笨拙的表结构。代码优先是用 EF 编写的，因此它支持更多的数据库，它被简化了一点，因为它只能在一个站点上使用（在我当前的实现中）具有更简洁的表，易于扩展。代码优先提供了更好的编程体验。

Se3ker 的回答

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:00:06.140

从 sql compact 的角度来看，提供程序之间没有区别。它们的功能相同。简单成员的工作方式与通用提供者的工作方式存在一些实现差异，所以如果你不关心它，那么你应该没问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T06:59:31.500

SimpleMembership 提供者的结构设计糟糕 -

您无法更改内部表名称 - 当您为两个或多个应用程序 [后端/前端] 拥有一个数据库时，有时为每个应用程序拥有单独的表很重要。

因为表名已被开发为静态变量 - 您不能通过配置文件更改它们的名称，也不能通过自定义覆盖类:)。

WebMatrix.WebSecurity 还包含自定义的 DataContext，它实际上不是“代码优先”。它的深处有相同的 xml 文件（具有数据库结构） - 所以它实际上是“数据库优先”，但具有无法更改的结构 - 它已作为资源嵌入。

对我来说，标准会员是比 WebSecurity 提供的更好的设计。

# java - 使用 JTDS 将 Java 程序连接到 SQL Server 2005

> ID：12049843
> 
> 赞同：0
> 
> 时间：2012-08-21T07:04:47.713
> 
> 标签：java, jtds

我制作了一个 java 程序（在 NetBeans IDE 7.0 beta 版上），我想将它与名为 school 的数据库连接起来。该数据库是在 SQL Server 2005 上以 Windows 身份验证模式并以管理员身份运行 SQL Management Express Studio 创建的。我已经创建了名为“mm”的 DSN。这里的主机名是“monika-pc”。但是我得到了错误。请看我的代码。

```
package javaapplication2;

import java.sql.*;

public class JavaApplication2
{
public static void main(String args[])
{
int i=0;
try
{       
String str="Select fname from students";
        Class.forName("net.sourceforge.jtds.jdbc.Driver");
        Connection con=DriverManager.getConnection("jdbc:jtds:sqlserver://monika-pc/mm");
        System.out.println("Connection open");
        Statement stmt=con.createStatement();
        ResultSet rs=stmt.executeQuery(str);
        System.out.println("fname\t");
        while(i<3)
        {
            rs.next();
            String lname=rs.getString("lname");
            System.out.println(lname);
            i++;

        }
            con.close();    
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }
}
} 
```

我收到以下错误..

```
run:
java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver
at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at javaapplication2.JavaApplication2.main(JavaApplication2.java:15)
BUILD SUCCESSFUL (total time: 1 second) 
```

任何人都可以解决这个问题。谢谢提前。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:07:06.440

您需要将 ms sql 的 jtds jar 作为库包含在您的 IDE 中还要确保这是要加载的驱动程序的正确名称

# android - 选择数据库行 android app SQLite

> ID：12049848
> 
> 赞同：0
> 
> 时间：2012-08-21T07:05:22.943
> 
> 标签：android, database, sqlite

我在一个安卓应用程序中创建了一个数据库。这是我创建它的方法。

数据库助手.java：

```
public class DatabaseHelper extends SQLiteOpenHelper {

static final String dbName="db_dr.droid";

static final String MedhistTable="tbl_medhist";
static final String colName="MedHistName";
static final String colAge="MedHistAge";
static final String colWeight="MedHistWeight";
static final String colHeight="MedHistHeight";
static final String colMedHist="MedHistHist";

static final String DTipsTable="tbl_dailytips";
static final String colID="DTipsId";
static final String colText="DTipsText";

static final String viewHist="ViewHist";

public DatabaseHelper(Context context) {
      super(context, dbName, null,33); 
      }

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

    db.execSQL("CREATE TABLE "+MedhistTable+" ("+colName+ " TEXT , "+
            colAge + " INTEGER, " +
            colWeight + " INTEGER, " +
            colHeight + " INTEGER, " +
            colMedHist + " TEXT) ");

    db.execSQL("CREATE TABLE "+DTipsTable+" ("+colID+ " INTEGER , "+
            colText + " TEXT)");

     db=this.getWritableDatabase();
     ContentValues cv=new ContentValues();
       cv.put(colID, 1);
       cv.put(colText, "It's easy to fit physical activities into your daily routine. Walk, bike or jog to see friends. Take a 10-minute activity break every hour while you read, do homework or watch TV. Climb stairs instead of taking an escalator or elevator. Try to do these things for a total of 30 minutes every day.");
       db.insert(DTipsTable, colID, cv);

       cv.put(colID, 2);
       cv.put(colText, "Breakfast fills your 'empty tank' to get you going after a long night without food. And it can help you do better in school. Easy to prepare breakfasts include cold cereal with fruit and low-fat milk, whole-wheat toast with peanut butter, yogurt with fruit, whole-grain waffles or even last night's pizza!");
       db.insert(DTipsTable, colID, cv);

       cv.put(colID, 3);
       cv.put(colText, "Snacks are a great way to refuel. Choose snacks from different food groups - a glass of low-fat milk and a few graham crackers, an apple or celery sticks with peanut butter and raisins, or some dry cereal. If you eat smart at other meals, cookies, chips and candy are OK for occasional snacking.");
       db.insert(DTipsTable, colID, cv);

       cv.put(colID, 4);
       cv.put(colText, "Vigorous work-outs - when you're breathing hard and sweating - help your heart pump better, give you more energy and help you look and feel best. Start with a warm-up that stretches your muscles. Include 20 minutes of aerobic activity, such as running, jogging, or dancing. Follow-up with activities that help make you stronger such as push-ups or lifting weights. Then cool-down with more stretching and deep breathing.");
       db.insert(DTipsTable, colID, cv);

       cv.put(colID, 5);
       cv.put(colText, "Vigorous work-outs - when you're breathing hard and sweating - help your heart pump better, give you more energy and help you look and feel best. Start with a warm-up that stretches your muscles. Include 20 minutes of aerobic activity, such as running, jogging, or dancing. Follow-up with activities that help make you stronger such as push-ups or lifting weights. Then cool-down with more stretching and deep breathing.");
       db.insert(DTipsTable, colID, cv);

       cv.put(colID, 6);
       cv.put(colText, "Being active is much more fun with friends or family. Encourage others to join you and plan one special physical activity event, like a bike ride or hiking, with a group each week.");
       db.insert(DTipsTable, colID, cv);

       cv.put(colID, 7);
       cv.put(colText, "Eat more grains, fruits and vegetables. These foods give you carbohydrates for energy, plus vitamins, minerals and fiber. Besides, they taste good! Try breads such as whole-wheat, bagels and pita. Spaghetti and oatmeal are also in the grain group." +
               "Bananas, strawberries and melons are some great tasting fruits. Try vegetables raw, on a sandwich or salad.");
       db.insert(DTipsTable, colID, cv);

       cv.put(colID, 8);
       cv.put(colText, "Whether you take a physical education class or do other physical activities at school, such as intramural sports, structures activities are a sure way to feel good, look good and stay physically fit.");
       db.insert(DTipsTable, colID, cv);

       cv.put(colID, 9);
       cv.put(colText, "A healthy eating style is like a puzzle with many parts. Each part -- or food -- is different. Some foods may have more fat, sugar or salt while others may have more vitamins or fiber. There is a place for all these foods. What makes a diet good or bad is how foods fit together. Balancing your choices is important. Fit in a higher-fat food, like pepperoni pizza, at dinner by choosing lower-fat foods at other meals. And don't forget about moderation. If two pieces of pizza fill you up, you don't need a third.");
       db.insert(DTipsTable, colID, cv);

       cv.put(colID, 10);
       cv.put(colText, "Take advantage of physical activities you and your friends enjoy doing together and eat the foods you like. Be adventurous - try new sports, games and other activities as well as new foods. You'll grow stronger, play longer, and look and feel better! Set realistic goals - don't try changing too much at once.");
       db.insert(DTipsTable, colID, cv);

       db.close();

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS "+ MedhistTable);

    db.execSQL("DROP TABLE IF EXISTS "+ DTipsTable);

    db.close();
}

String getTips()
  {

   SQLiteDatabase db=this.getReadableDatabase();

  // Cursor cur=db.rawQuery("SELECT "+ colID +" as _id," + colText + "from "+ DTipsTable + "WHERE ",new String [] {});

   Cursor c=db.query(DTipsTable, new String[]{colID+" as _id",colText},
           colID+"=?", new String[]{colText}, null, null, null);

   c.moveToFirst();
   db.close();
   c.close();
   return c.getString(c.getColumnIndex("colText"));  

  }

} 
```

在我的 home.java 中，我调用了数据库助手来检索特定的行。

```
public class Home extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
DatabaseHelper dbhelp = new DatabaseHelper(this);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home);

      String tips = dbhelp.getTips();

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setTitle("Daily Health Tips")
    .setMessage(tips)
    .setCancelable(false)
    .setNegativeButton("Ok", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
               }
           });
    AlertDialog alert = builder.create();

    alert.show();

} 
```

但是该应用程序正在停止。这是目录

```
 08-21 16:04:48.588: E/Trace(630): error opening trace file: No such file or directory (2)
08-21 16:04:48.958: D/dalvikvm(630): GC_FOR_ALLOC freed 258K, 4% free 8142K/8455K, paused 69ms, total 73ms
08-21 16:04:49.078: D/dalvikvm(630): GC_FOR_ALLOC freed 194K, 5% free 8257K/8647K, paused 44ms, total 54ms
08-21 16:04:49.218: D/AndroidRuntime(630): Shutting down VM
08-21 16:04:49.218: W/dalvikvm(630): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-21 16:04:49.228: E/AndroidRuntime(630): FATAL EXCEPTION: main
08-21 16:04:49.228: E/AndroidRuntime(630): java.lang.RuntimeException: Unable to start activity ComponentInfo{dr.droid/dr.droid.Home}: java.lang.IllegalStateException: getDatabase called recursively
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.os.Looper.loop(Looper.java:137)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-21 16:04:49.228: E/AndroidRuntime(630):  at java.lang.reflect.Method.invokeNative(Native Method)
08-21 16:04:49.228: E/AndroidRuntime(630):  at java.lang.reflect.Method.invoke(Method.java:511)
08-21 16:04:49.228: E/AndroidRuntime(630):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-21 16:04:49.228: E/AndroidRuntime(630):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-21 16:04:49.228: E/AndroidRuntime(630):  at dalvik.system.NativeStart.main(Native Method)
08-21 16:04:49.228: E/AndroidRuntime(630): Caused by: java.lang.IllegalStateException: getDatabase called recursively
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:204)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
08-21 16:04:49.228: E/AndroidRuntime(630):  at dr.droid.DatabaseHelper.onCreate(DatabaseHelper.java:44)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:188)
08-21 16:04:49.228: E/AndroidRuntime(630):  at dr.droid.DatabaseHelper.getTips(DatabaseHelper.java:104)
08-21 16:04:49.228: E/AndroidRuntime(630):  at dr.droid.Home.onCreate(Home.java:20)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.app.Activity.performCreate(Activity.java:5008)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-21 16:04:49.228: E/AndroidRuntime(630):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-21 16:04:49.228: E/AndroidRuntime(630):  ... 11 more
08-21 16:04:52.138: I/Process(630): Sending signal. PID: 630 SIG: 9 
```

任何帮助/建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:12:18.270

您必须在创建函数中或之后初始化 dbhelp 变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:19:26.487

尝试这个：

```
public class Home extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home);
    DatabaseHelper dbhelp = new DatabaseHelper(this);
     String tips = dbhelp.getTips();

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setTitle("Daily Health Tips")
    .setMessage(tips)
    .setCancelable(false)
    .setNegativeButton("Ok", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
               }
           });
    AlertDialog alert = builder.create();

    alert.show();

} 
```

您应该尝试在 Home 类中移动 getTips() 方法。这样你的代码看起来会更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:39:56.070

您的 sql 包含错误：

```
 db.execSQL("CREATE TABLE "+MedhistTable+" ("+colName+ " TEXT , "+
            colAge + " INTEGER +)" +
            colWeight + " INTEGER " +
            colHeight + " INTEGER " +
            colMedHist + " TEXT ");

    db.execSQL("CREATE TABLE "+DTipsTable+" ("+colID+ " INTEGER , "+
            colText + " TEXT +)"); 
```

应该

```
 db.execSQL("CREATE TABLE "+MedhistTable+" ("+colName+ " TEXT , "+
            colAge + " INTEGER, " +
            colWeight + " INTEGER, " +
            colHeight + " INTEGER, " +
            colMedHist + " TEXT) ");

    db.execSQL("CREATE TABLE "+DTipsTable+" ("+colID+ " INTEGER , "+
            colText + " TEXT)"); 
```

# hibernate - 是否可以将多个组件映射为复合 ID？

> ID：12049851
> 
> 赞同：0
> 
> 时间：2012-08-21T07:05:40.353
> 
> 标签：hibernate, nhibernate-mapping

是否可以在 Hibernate HBM 映射文件中使用多个组件作为复合 ID？在下面的代码段中，TradeServiceId 和 ChargeId 是实际的类。

我希望这两个字段成为该表的复合主键

```
 <component name="tradeServiceId" class="com.ucpb.tfs.domain.service.TradeServiceId" insert="false" update="false">
        <property name="tradeServiceId" column="serviceInstructionId" type="string" />
    </component>

    <component name="chargeId" class="com.ucpb.tfs.domain.reference.ChargeId" insert="false" update="false">
        <property name="chargeId" column="chargeId" type="string" />
    </component> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:55:08.683

IMO 这是不可能的，因为 compositeId 仅支持 KeyProperty 和 Keyreferences。但是，可以使用 IUserType 和 ICompositeUserType，这意味着您可以自己实现转换。

# symfony1 - Symfony 1.4 推进优化

> ID：12049853
> 
> 赞同：3
> 
> 时间：2012-08-21T07:05:41.700
> 
> 标签：symfony1, symfony-1.4, propel

我是 Symfony 的新手，并从立即辞职的人手中接管了公司的 Symfony 1.4 (Propel ORM) 项目。

我浏览了 jobeet 教程，并且对 Symfony 很满意。现在项目即将完成，但是当我看到日志时，我发现每个页面都有很多查询运行。在很多页面上，查询都在循环中运行。根据我的经验，任何 SQL 查询都不应该循环运行。

这让我担心项目的发布后性能。

在 jobeet 教程或其他地方，我没有找到太多关于使用 symfony 1.4/propel 进行数据库优化的信息。有没有关于 Symfony 1.4 的数据库和性能优化的好的教程/指南（带推进）

我应该从哪里开始优化阶段。我基本上很想知道几个链接以及其他有经验的 symfony 开发人员如何优化他们的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:18:13.030

我愿意打赌（根据我对 Symfony 1.* 的经验）这个问题与 Propel 对连接的支持不佳有关。他们实际上在最近的版本中对此进行了改进，但是如果您使用的是 Criteria 或 Peer 类，那么这很好地表明您使用的是旧版本并且您会遇到这个问题。

假设您执行查询以从数据库中检索一堆记录。如果该表与另一个表具有一对多关系，则需要执行单独的查询来检索那些关联的记录。如果您有多对一或一对一的关系，则可以通过使用“doSelectJoin”对等方法使该过程更加高效。

我可能需要给你一个例子：假设你有一个在线书店，在你的模式中你有 3 个表：书籍、作者和出版商：

1.  一本书可以有多个作者。
2.  一本书只能有一个出版商。

如果您对 book 表执行查询以检索所有 book 对象。您可以使用“doSelectJoin”方法返回所有图书对象，并且不需要额外的查询来检索其关联的出版商。这些将与书一起补充，即 $book->getPublisher() 不会执行另一个查询。但是，如果您想获取与该书关联的作者。然后第一次调用函数 $book->getAuthors() 时，将运行一个单独的查询（对同一对象的后续调用 getAuthor 方法将延迟加载关联的作者对象，而不需要另一个查询）。但是，如果您在一个页面上显示 50 本书，那么如果您还想显示书籍的作者，则需要再执行 50 次查询。

# flash - 从文本文件中解析数据 - flash as2

> ID：12049854
> 
> 赞同：0
> 
> 时间：2012-08-21T07:05:42.897
> 
> 标签：flash, adobe, actionscript-2, flashlite

我有一个文本文件，我需要从中检索一个名称/值对，如下所示

* * *

#
主机名主机名=6544

值1=12
值2=78978

* * *

谁能告诉我如何解析这个，以便我可以引用变量“主机名”的值。

这必须在 Actionscript 2 中 - 因为该项目适用于 flashlite 3.1

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:17:42.183

像这样的东西：

```
import flash.filesystem.FileMode;
import flash.filesystem.FileStream;
import flash.filesystem.File;

var files:File = File.appResourceDirectory;
files = files.resolve("mycommands.txt");

var fs:FileStream = new FileStream();
fs.open(files, FileMode.READ);
var content:String = fs.readUTFBytes(fs.bytesAvailable);

var pair:Array = content.split("="); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:18:27.877

看看[swfobject](http://code.google.com/p/swfobject/)，它可以让你将变量传递给你的 flash 文件。您可以使用您可能使用的任何脚本语言传递变量。

否则，谷歌上有大量关于如何使用 as2 读取文本文件的教程。

例如[这里](http://www.republicofcode.com/tutorials/flash/loading_external_text_bc/)

进一步寻找 as2 中的 loadVariables 和 LoadVars 函数

# javascript - 如何将一行移到表格顶部？

> ID：12049858
> 
> 赞同：-1
> 
> 时间：2012-08-21T07:06:14.413
> 
> 标签：javascript, jquery, html, jquery-selectors

```
var data = $('tbody');

console.log(data.filter(':first'), data.filter('tr.ay-sort-top'));

data.filter(':first').before(data.filter('tr.ay-sort-top')); 
```

两次运行的控制台输出：

```
[<tr class=​"ay-sort-top">​…​&lt;/tr>​] [<tr class=​"ay-sort-top">​…​&lt;/tr>​]
[<tr>​…​&lt;/tr>​] [<tr class=​"ay-sort-top">​…​&lt;/tr>​] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:12:52.383

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:17:38.510

如果您的问题实际上是“如何将具有“tr.ay-sort-top”类的任何行移动到表格顶部，而将其他行留在原处？” 然后你可以做这样的事情：

```
var $tbody = $("#yourTable tbody");
$tbody.prepend( $tbody.find("tr.ay-sort-top") ); 
```

演示：http: [//jsfiddle.net/b89zY/1/](http://jsfiddle.net/b89zY/1/)

# php - 仅当是浏览器时才执行 PHP 标头位置

> ID：12049864
> 
> 赞同：0
> 
> 时间：2012-08-21T07:06:43.070
> 
> 标签：php

我的网站存在“访问”外部页面的问题。问题在于创建 cookie，我的脚本尝试在第一次访问时创建 cookie。当从外部页面（如 W3C）读取页面时，我得到了重定向循环。那么我如何只能`header("location:*");`在浏览器中执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:11:00.647

不做具体案例。一视同仁。您将很难进行“检测”。

在重定向上添加 GET 参数。并且当参数存在时不再重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:13:19.010

Not all browsers will accept cookies. Not all things that are not browsers will reject cookies. Trying to use the type of user agent to guess if it will accept your cookies is doomed to failure.

Change your workflow instead:

1.  Redirect to the set-a-cookie page
2.  Set a cookie
3.  Redirect to a different is-there-a-cookie page
4.  Display error message or redirect to the page they came in on

Better yet, don't require cookies until cookies are actually required (which is probably "When the user logs in" rather then "When you want to start gathering analytics data"). Note that the preceding sentence includes some largish assumptions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:10:04.563

通过使用“用户代理”字符串，您可以轻松地阻止代码在条件语句下执行。

```
echo $_SERVER['HTTP_USER_AGENT'] . "\n\n"; 
```

# objective-c - Objective-C++ 导入 C++ 类失败，未找到 cassert

> ID：12049868
> 
> 赞同：3
> 
> 时间：2012-08-21T07:07:07.670
> 
> 标签：objective-c, ios, cocos2d-iphone, objective-c++, box2d-iphone

所以我想在我的 cocos2d + box2d 项目中公开一个 Box2D (C++) 指向其他 Objective-C++ 类的指针。我在我的接口中声明了一个方法“getWorld”，它引用了 C++ 类 b2World 并导入了 Box2D.h。我项目中的所有文件都是 .mm 扩展名，我收到以下编译错误：

```
In file included from DebugDrawLayer.mm:2:
In file included from World.h:10:
In file included from external/Box2d/Box2D/Box2D.h:34:
external/Box2d/Box2D/Common/b2Settings.h:22:10: fatal error: 'cassert' file not found
#include <cassert> 
```

我猜 Box2D.h 以某种方式编译为 C 而不是 C++，但我不明白这是怎么发生的。根据日志，包含链显然是从 .mm 文件开始的。

更新：

日志显示 World.mm（较早编译）清楚地编译为objective-c++

```
CompileC Objects-normal/i386/World.o World.mm normal i386 objective-c++ com.apple.compilers.llvm.clang.1_0.compiler 
```

但是对于 DebugDrawLayer.mm 它说的是objective-c

```
CompileC Objects-normal/i386/DebugDrawLayer.o DebugDrawLayer.mm normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler 
```

这两个文件都设置为默认值 - Objective-C++ 源代码。是什么赋予了..？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-24T06:15:28.580

这似乎是 Xcode4 中的一个主要错误，与编译器设置无关 - 只是 Xcode 内部。

* * *

更新：

我终于找到了根本原因。是的，这是 Xcode/LLVM 中的一个错误。它以错误的顺序编译文件，然后覆盖自己的设置，并自行中断。苹果的技术支持太无能，甚至无法理解这个问题，所以我怀疑他们很快就会修复这个错误。

（注意：跳过本节，并在下面查看我的原始答案，这给出了一个蛮力但非常快速的解决方案）

会发生什么......如果编译器*在处理*C 类时“看到”一个 C++ 头文件......然后它（内部）将该头文件标记为“C”（即使这实际上是不可能的）。

后来，当它回到那个头文件，试图用 C++ 编译它时，它发现它已经告诉自己头文件是“C”（因为它非常愚蠢）......并立即崩溃。

*正确*的解决方案（需要大量时间和精力）是检查项目中的每个 C 文件，并检查（手动，因为 Xcode 很烂）对每个头文件的每个引用——并且，对于每个头文件，它进口...等

（这可能需要几个小时）

...直到您找到导致 C 文件“看到”C++ 标头的导入链。

所有这些都应该是自动化的（但不是）。并且根本问题不应该发生（如果 Xcode 编写正确的话）。

* * *

我尝试了网络上其他地方列出的所有内容，大多数解决方案都是“不断删除/添加文件，如果幸运的话，Xcode 最终会自行修复”。

我不走运。唯一有效的是：

1.  转到为您的项目构建设置
2.  找到“将源编译为”设置
3.  将其设置为“Objective-C++”
4.  重建

实际的名称/值是：“GCC_INPUT_FILETYPE = sourcecode.cpp.objcpp” - 所以我的猜测是这回避了 Xcode（坏了！）的内部逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-20T08:32:08.597

我有同样的错误，我刚刚将我的一个类（我称之为 box2d 类）从 className.m 重命名为 className.mm，现在它可以工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:28:51.833

我在我的 Cocos2D/Box2D 项目中遇到了这个问题，直到我将`.m`项目中的所有文件（当然不包括 Cocos2D 中的文件）重命名为`.mm`将它们编译为 Objective-C++ 后才解决。

我猜@Adam 的解决方案也可以，但我更喜欢将编译设置保留为“根据文件类型”，感觉更干净。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:16:27.380

从项目中删除 DebugDrawLayer 然后重新添加它可以解决问题。也许在构建阶段设置中的文件中有一些奇怪的编译器设置，从未检查过这些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-04T22:17:51.697

实际上正确的解决方案是将您的代码放入：

```
#if __cplusplus

// … your code … 

#endif // __cplusplus 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-23T17:44:11.467

`#import "Box2D.h"`我在进入时遇到了这个问题`Prefix.pch`。我将其更改`#import "Box2D.h"`为在每个使用它的文件中。

# c# - 在 Acess 2007 中更新记录并通过 C# 返回行

> ID：12049874
> 
> 赞同：0
> 
> 时间：2012-08-21T07:07:34.087
> 
> 标签：c#

```
 System.Data.OleDb.OleDbCommandBuilder cb_employees;
            cb_employees = new System.Data.OleDb.OleDbCommandBuilder(da_employees);

            DataRow[] returned_rows_employee;
            returned_rows_employee = ds_employees.Tables["EMPLOYEES"].Select("NIP_EMPLOYEES='" + textNipSearch.Text + "'");

            DataRow row_employees;
            row_employees = returned_rows_employee[0];
            textPesel.Text = row_employees["PESEL_EMPLOYEES"].ToString();
            textName.Text = row_employees["NAME_EMPLOYEES"].ToString();
            textSurname.Text = row_employees["SURNAME_EMPLOYEES"].ToString();
            textPlace.Text = row_employees["PLACE_EMPLOYEES"].ToString();
            textStreet.Text = row_employees["STREET_EMPLOYEES"].ToString();
            textPostalcode.Text = row_employees["POSTAL_CODE_EMPLOYEES"].ToString();
            textNip.Text = textNipSearch.Text;
            textPhone.Text = row_employees["PHONE_CONTACT_EMPLOYEES"].ToString();' 
```

我想在数据库员工中搜索有关 NIP = textNipSearch.Text 的信息，可以，但我想知道返回的行数.... 怎么样？

我打招呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:38:05.177

如果我在这里没有遗漏什么，那么您已经有一个 DataRow 对象的集合，所以一个简单的

```
returned_rows_employee.Length 
```

将返回该集合中的项目数。

# javascript - 如何通过 javascript 设置 struts 2 列表？

> ID：12049879
> 
> 赞同：0
> 
> 时间：2012-08-21T07:07:55.560
> 
> 标签：javascript, struts2

当用户在前一个选择元素中做出选择时，我会动态地将选项添加到选择元素中。我`struts-html tag`在 JSP 页面内使用。谁能建议如何做到这一点？

让我更具体地说，我需要`struts2 tag(s:select list)`使用 Javascript 填充。

我有三个相关的动态下拉列表，它们都是从数据库中填充的，所以我通过操作使用 Ajax+jquery+Struts2 将查询调用到数据库并通过（Ajax+json）将列表传递给 javacript 并在 javascript 中设置列​​表属性的 s:select 标记到 json

这就是我的想法，如果我错了，或者有更好的方法可以做到这一点，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:09:40.730

一个明确的选择是使用 Struts2 [Doubleselect](http://struts.apache.org/2.3.1/docs/doubleselect.html)。你需要做类似的事情

```
<s:doubleselect label="doubleselect test1" name="menu" list="{'fruit','other'}" doubleName="dishes" doubleList="top == 'fruit' ? {'apple', 'orange'} : {'monkey', 'chicken'}" />
<s:doubleselect label="doubleselect test2" name="menu" list="#{'fruit':'Nice Fruits', 'other':'Other Dishes'}" doubleName="dishes" doubleList="top == 'fruit' ? {'apple', 'orange'} : {'monkey', 'chicken'}" /> 
```

您可以在此处找到更多示例

*   [/struts-2-sdoubleselect-示例](http://www.mkyong.com/struts2/struts-2-sdoubleselect-example/)

如果您不想使用双重选择，您可以在 Jquery 的帮助下使用简单的 S2 选择标签，我不确定您想从哪里获取第二个下拉列表的值，如果这是从动作类更好地使用Struts2-JSON 插件，它将帮助您将数据作为 JSON 发送回 UI，您始终可以使用 Jquery 的 JSON 解析功能来解析 JSON 并填充下拉列表

```
var formInput='state='+statedata;       
   $.getJSON('search/fillDropDown',formInput,function(data) {
     $("#district  option:first").val("-1").text("Please select a  district");
     $('.result').html('' + data.districts + '');
     $.each(data.districts,function(index, value){
     var districtid = document.getElementById("district");
      var option=new Option(value,value);
         try{
           districtid.add(option);
         }
        catch(e){
        districtid.appendChild(option);
        });
     }); 
```

在上面，我根据第一个下拉列表中选择的值填充另一个下拉列表，并使用 JSON 插件将操作列表作为 JSON 数据发送回。

# oracle - jboss 7 oracle 数据源配置

> ID：12049882
> 
> 赞同：12
> 
> 时间：2012-08-21T07:07:58.847
> 
> 标签：oracle, datasource, jboss7.x

我目前正在从 jboss 4.3 迁移到 jboss 7.1.1 (Final)，并且我正在尝试配置 oracle 数据源，但它不起作用。以下是我为设置 Oracle 数据源所做的工作

1) 下载 ojdbc6-11.jar 并将其放在文件夹 $JBOSS_HOME/modules/com/oracle/ojdbc6/main 中

2)在$JBOSS_HOME/modules/com/oracle/ojdbc6/main下创建了文件module.xml，这是文件的内容

```
<module xmlns="urn:jboss:module:1.0" name="com.oracle.ojdbc6">
  <resources>
    <resource-root path="ojdbc6.jar"/>
  </resources>
  <dependencies>
    <module name="javax.api"/>
  </dependencies>
</module> 
```

3)在standalone.xml中添加了以下驱动和数据源

```
<drivers>
  <driiver name="oracle" module="com.oracle.ojdbc6">
    <xa-datasource-class>oracle.jdbc.OracleDriver</xa-datasource-class>
  </driver>
</drivers>

<datasource jndi-name="java:/Altis" pool-name="Altis" enabled="true" use-java-context="true">
  <connection-url>connurl</connection-url>
  <driver>oracle</driver>
  <security>
    <user-name>username</user-name>
    <password>passwd</password>
  </security>
</datasource>
</datasources> 
```

但是，当我部署我的战争文件时，我收到以下错误

```
16:54:43,281 INFO  [org.jboss.as.server] (HttpManagementService-threads - 2) JBA
S015870: Deploy of deployment "altisavante.war" was rolled back with failure mes
sage {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.na
ming.context.java.module.altisavante.altisavante.env.Altisjboss.naming.context.j
ava.AltisMissing[jboss.naming.context.java.module.altisavante.altisavante.env.Al
tisjboss.naming.context.java.Altis]"]} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-19T18:03:28.983

这是一个关于 JBoss 7 的数据源配置的链接，当然适用于 7.1

[https://community.jboss.org/wiki/DataSourceConfigurationInAS7](https://community.jboss.org/wiki/DataSourceConfigurationInAS7)

该示例正在配置 MySQL 示例。
这就是我为 Oracle 驱动程序所做的

```
<datasource jndi-name="java:/sigap_ws_receiver" pool-name="sigap_ws_receiver" enabled="true">
    <connection-url>jdbc:oracle:thin:@(DESCRIPTION=(LOAD_BALANCE=off)(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.0.1)(PORT=1524))(CONNECT_DATA=(SERVICE_NAME=profepa)(SERVER=DEDICATED)))</connection-url>
    <driver>com.oracle</driver>
    <pool>
        <min-pool-size>3</min-pool-size>
        <max-pool-size>5</max-pool-size>
    </pool>
    <security>
        <user-name>user</user-name>
        <password>pass</password>
    </security>
    <validation>
        <exception-sorter class-name="org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter"/>
    </validation>
    <timeout>
        <blocking-timeout-millis>5000</blocking-timeout-millis>
        <idle-timeout-minutes>5</idle-timeout-minutes>
    </timeout>
</datasource> 
```

驱动程序部分如下所示：

```
<drivers>
    <driver name="com.oracle" module="com.oracle">
        <driver-class>oracle.jdbc.driver.OracleDriver</driver-class>
    </driver>
</drivers> 
```

我的 module.xml 位于 jar ojdbc6.jar 中的 $JBOSS_HOME\modules\com\oracle\main 下：

```
<module xmlns="urn:jboss:module:1.0" name="com.oracle">
    <resources>
        <resource-root path="ojdbc6.jar"/>
    </resources>
    <dependencies>
        <module name="javax.api"/>
    </dependencies>
</module> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-08T18:04:55.750

所有这些答案都帮助我让它发挥作用，但它们都不是确切的解决方案，所以我想我会添加我的。

首先，请注意，您可以在 xml 文件中`JBoss web-console`或通过手动配置 xml 文件中的数据源来执行此操作。但是，我强烈建议您通过网络控制台对其进行配置，以避免错误，例如 OP 制造的错误，显然没有人注意到：

```
<drivers>
  <driiver name="oracle" module="com.oracle.ojdbc6">
    <xa-datasource-class>oracle.jdbc.OracleDriver</xa-datasource-class>
  </driver>
</drivers> 
```

请注意，驱动程序声明包含两个 i。

**手动配置【不推荐】**

首先，您必须确保您的 Oracle jdbc 已配置。

*   导航到`$JBOSS_HOME/modules`，如果它不存在，则创建文件夹树`oracle/jdbc/main`。
*   导航到该文件夹​​并复制`odjbc6-11.jar`.
*   使用以下内容创建 module.xml

> ```
> <module>
>     <resources>
>         <!-- make sure the path match the name of the file -->
>         <resource-root path="ojdbc6-11.jar"/>
>     </resources>
>     <dependencies>
>         <module name="javax.api"/>
>         <module name="javax.transaction.api"/>
>     </dependencies>
> </module> 
> ```

现在您的 jdbc 已配置，您必须编辑该`standalone.xml`文件以指定驱动程序和数据源属性。

*   导航到`$JBOSS_HOME/standalone/configuration`并编辑standalone.xml 文件。
*   找到`drivers`标签并配置您的驱动程序如下：

> ```
> <driver name="oracle" module="oracle.jdbc">
>     <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
> </driver> 
> ```

*   现在添加数据源配置：

> ```
> <datasource jndi-name="java:jboss/datasources/Altis" pool-name="Altis" enabled="true">
>   <connection-url>jdbc:oracle:thin:@255.255.255.255:1521:sid</connection-url>
>   <driver-class>oracle.jdbc.OracleDriver</driver-class>
>   <driver>oracle</driver>
>   <security>
>     <user-name>username</user-name>
>     <password>passwd</password>
>   </security>
> </datasource> 
> ```

**在线配置【推荐】**

*   导航到管理控制台（默认为 localhost:9990/console）
*   单击配置并展开**连接器**中的**数据源**
***   单击添加（数据源表右侧的第一个按钮）*   根据您的情况填写名称`Altis`*   根据您的情况填写 JNDI 名称`java:jboss/datasources/Altis`。请注意，JNDI 名称必须以`java:/`or开头`java:jboss/`*   选择您的驱动程序，如果配置正确，它应该在检测到的驱动程序中。*   将连接 url 填写为`jdbc:oracle:thin:@255.255.255.255:1521:sid`*   填写用户名和密码。*   如果需要或指定一个，您可以将安全域留空。*   确保在单击完成之前测试连接。*   保存数据源后，在表中选择它并单击`Enable`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T19:18:19.363

在 module.xml jar 中，您有`path="ojdbc6.jar"`resource-root 标记，但您说您下载了 ojdbc6-11.jar

我认为你需要`path="ojdbc6-11.jar"`在你的 module.xml

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T19:28:22.863

验证 $JBOSS_HOME\modules\system\layers\base\com\oracle\ojdbc6\main 存在并且有 ojdbcXX.jar 和 module.xml module.xml 中的 Module name="com.oracle.ojdbc" 应该与 module="com 匹配.oracle.ojdbc”在standalone.xml

例如 module.xml -->

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="**com.oracle.ojdbc6**">
    <resources>
        <resource-root path="ojdbc6.jar"/>
        <!-- Insert resources here -->
    </resources>
    <dependencies>
        <module name="javax.api"/>
        <module name="javax.transaction.api"/>
        <module name="javax.servlet.api" optional="true"/>
    </dependencies>
</module>
standalone.xml -->

<datasource jndi-name="java:/abc" pool-name="abc" enabled="true" use-java-context="true">
                    <connection-url>jdbc:oracle:thin:@localhost:1521:orcl</connection-url>
                    <driver>**oracle**</driver>
                    <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
                    <security>
                        <user-name>a_user</user-name>
                        <password>pwdXXX</password>
                    </security>
                </datasource>

                <drivers>
                    <driver name="**oracle**" module="**com.oracle.ojdbc6**">
                    <driver-class>oracle.jdbc.driver.OracleDriver</driver-class>
                    <xa-datasource-class>oracle.jdbc.driver.OracleDriver</xa-datasource-class>
                    </driver>
                    </driver> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T21:57:57.840

尝试在驱动程序中使用驱动程序类 `<driver-class>oracle.jdbc.OracleDriver</driver-class>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-24T09:14:09.913

转到 JBoss AS 的控制台面板。**输入您在adduser.bat**的帮助下创建的用户的用户名和密码。然后将出现一个关于所有配置的页面。现在按照以下步骤操作：

1) 转到个人资料

2）从左侧窗格中选择数据源

3）然后单击数据源部分中的**添加**按钮

4) 提供名称、jndi 名称等详细信息。

*   名称：OracleDS
*   Jndi: java:jboss/datasources/OracleDS

5）点击下一步按钮

6）在standalone.xml的帮助下选择你在jboss中部署的驱动程序

7）点击下一步按钮

8) 现在填写详细信息...

*   连接网址：jdbc:oracle:thin:@[host]:1521:[sid]
*   用户名：[用户]
*   密码：[通过]
*   安全域：留空

9) 点击完成。

现在将出现一条消息**“数据源添加成功”**。

而已....！！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-17T07:57:06.903

除了让-弗朗索瓦·萨瓦德（Jean-François Savard）的手动解决方案之外，我还从 jboss-deployment-structure.xml 中排除了 jar，然后我才设法启动并运行它。只是在这里登录，因为这可能对其他人有所帮助。我的 jboss-deployment-structure.xml 示例如下

`enter code here`

```
<!--exclude-subsystems>
<subsystem name="jpa" />
</exclude-subsystems-->
<!--http://mca.intranet.barclays.co.uk/confluence/display/MCA/Changes+required+in+MCA+for+aPaaS-->

<exclusions>
    <module name="org.codehaus.jackson.jackson-core-asl" />
    <module name="org.codehaus.jackson.jackson-mapper-asl" />
    <module name="org.apache.log4j" />
    <module name="javax.persistence.api" />
    <module name="org.hibernate" />

</exclusions>
    <dependencies>

        <module name="javax.activation.api" export="true"/>
        <module name="javax.annotation.api" export="true"/>
        <module name="javax.ejb.api" export="true"/>
        <module name="javax.el.api" export="true"/>
        <module name="javax.enterprise.api" export="true"/>
        <module name="javax.enterprise.deploy.api" export="true"/>
        <module name="javax.inject.api" export="true"/>
        <module name="javax.interceptor.api" export="true"/>
        <module name="javax.jms.api" export="true"/>
        <module name="javax.jws.api" export="true"/>
        <module name="javax.mail.api" export="true"/>
        <module name="javax.management.j2ee.api" export="true"/>

        <module name="javax.resource.api" export="true"/>
        <module name="javax.rmi.api" export="true"/>
        <module name="javax.security.auth.message.api" export="true"/>
        <module name="javax.security.jacc.api" export="true"/>
        <module name="javax.servlet.api" export="true"/>
        <module name="javax.servlet.jsp.api" export="true"/>
        <module name="javax.transaction.api" export="true"/>
        <module name="javax.validation.api" export="true"/>
        <module name="javax.ws.rs.api" export="true"  services="export"/>
        <module name="javax.xml.bind.api" export="true"/>
        <module name="javax.xml.registry.api" export="true"/>
        <module name="javax.xml.soap.api" export="true"/>
        <module name="javax.xml.ws.api" export="true"/>
        <module name="org.jboss.as.jmx" />
        <!--module name="ibm.mq" /-->
        <module name="javax.api" export="true"/>

    </dependencies>
</deployment> 
```**

# android - 同步到 Google Tasks API 的步骤

> ID：12049888
> 
> 赞同：4
> 
> 时间：2012-08-21T07:08:43.383
> 
> 标签：android, google-tasks-api

我正在制作一个待办事项列表 android 应用程序。我想将任务同步到 Google Tasks。

我正在使用适用于 Java 的 Google API 客户端库。[我已经实现了文档](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)中描述的所有身份验证过程。

但我对采取哪些步骤来同步任务感到有些困惑。就像，我是否必须比较每个列表和任务是否更改。

此外，Google 任务中的任务 ID 属于字符串类型。如果我想改变一个特定的任务，我怎么知道 id？

请帮忙！！

# java - Java、SWT、FormLayout - 为什么添加子项的顺序很重要？

> ID：12049890
> 
> 赞同：1
> 
> 时间：2012-08-21T07:08:47.343
> 
> 标签：java, swt, form-layout

我正在为复合容器使用 FormLayout。当我添加两个子*标签*和*clientArea*时，其中 clientArea 取决于标签 - 只有在我首先添加标签时才会出现 clientArea。

在容器上调用 layout() 后，添加子项无济于事 - clientArea 不显示。

如何将子级添加到 FormLayout 控制的容器中，独立于它们彼此的依赖关系？

```
MyLabel label;
Composite clientArea;   

public MyContainer(Composite parent, int style) {
    super(parent,style);

    //choose the container Layout
    FormLayout layout = new FormLayout();
    this.setLayout(layout);

    clientArea = new Composite(this, SWT.NONE);
    FormData formData4ClientArea = new FormData();
    formData4ClientArea.left = new FormAttachment(0,0);
    formData4ClientArea.top = new FormAttachment(0,5);
    formData4ClientArea.right = new FormAttachment(label,-5);
    formData4ClientArea.bottom = new FormAttachment(100,-5);
    //set the Formdata
    clientArea.setLayoutData(formData4ClientArea);
    clientArea.setBackground(getDisplay().getSystemColor(SWT.COLOR_GREEN));     

    //create the label
    label = new MyLabel(this, SWT.NONE);
    FormData formData4Label = new FormData();
    formData4Label.top = new FormAttachment(0,5);
    formData4Label.right = new FormAttachment(100,-5);
    formData4Label.bottom = new FormAttachment(100,-5);
    //set the FormData
    label.setLayoutData(formData4Label); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:20:31.680

`formData4ClientArea.right = new FormAttachment(label,-5);`此时，`label`是`null`。它没有被实例化。因此，基本上您将 clientArea 附加到任何内容。如果你想`clientArea`附加到`label`，你需要先实例化`label`，然后`clientArea`

但是，另一方面，为什么顺序对你很重要？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:41:27.740

事实上，实例化组件的顺序并不重要。

您不能做的是在创建对象之前引用它。正如 Plygnome 所说，问题在于当您创建 时`FormAttachment`，`Label`就是`null`。

在我们的项目中，我们首先创建所有组件，然后创建它们的所有布局数据对象。

# c# - 以编程方式将代码模块导入 Excel 工作簿

> ID：12049894
> 
> 赞同：2
> 
> 时间：2012-08-21T07:09:02.450
> 
> 标签：c#, excel, vba

我动态创建一个工作簿。我想在创建时导入代码模块（Module1.bas）和（UserForm1.frm）。

**有没有办法通过使用工作簿或工作表对象来附加这些文件？**

```
Microsoft.Office.Interop.Excel.Workbook wkBk;
Microsoft.Office.Interop.Excel.Worksheet wkSht; 
app = new Microsoft.Office.Interop.Excel.Application();
app = new Microsoft.Office.Interop.Excel.Application();
app.DisplayAlerts = false;
app.Visible = false;
wkBk = app.Workbooks.Open(strFile, oMissing); 
wkSht = (Microsoft.Office.Interop.Excel.Worksheet)wkBk.Sheets.get_Item(2); 
wkBk.Save(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:26:08.550

下面的代码打开一个 Excel 文件并向其中添加一个 VBA 模块和一个 VBA 用户表单，取自磁盘上的文件。

为了使其工作，您必须首先打开**“信任对 Visual Basic 项目的访问”**设置。它可以在“受信任的发布者”选项卡上的工具 -> 宏 -> 安全中找到。（这适用于 Excel 2003；对于 2007，可以在 Excel 选项 -> 信任中心 -> 信任中心设置 -> 宏设置中找到）。您需要确保在 Excel 运行的任何地方都启用此设置（与您正在处理的 Excel 文件的存储位置无关）。（您不能以编程方式更改此设置 - 这将使其成为一个完全没有意义的设置）。

```
$oExcel = ObjCreate("Excel.Application")
    With $oExcel
        .Visible = 0
        .WorkBooks.Open("C:\Excel.xls")
    EndWith

    $oModules = $oExcel.ActiveWorkbook.VBProject.VBComponents
    $oModules.Import("C:\Module1.bas")
    $oModules.Import("c:\Program Files\Microsoft Office\Office11\UserForm1.frm") 
```

# python - 检查元组中有多少个孩子

> ID：12049896
> 
> 赞同：1
> 
> 时间：2012-08-21T07:09:06.703
> 
> 标签：python, python-2.6

我想找出一个父母在一个元组中有多少个孩子，例如

```
tree = ('a', (
  ('b', ()),
  ('c', (
    ('e', ()),
    ('f', ()),
    ('g', ()),
  )),
  ('d', ()),
)) 
```

所以如果`a`有 3 个孩子并且`c`有 3 个孩子我想运行一些代码，但到目前为止我还不知道如何处理这个问题。

通过孩子 - 我的意思是字符串之后元组的长度？`e.g: ('c', ( ..., ..., ...) )`-`'c'`是字符串`(..., ..., ...)`还是长度为 3 的元组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:35:01.830

让我们首先介绍一种简单的方法来遍历所有树节点（DFS）：

```
def walk(t):
    yield t
    for child in t[1]:
        for p in walk(child):
            yield p 
```

让我们看看它是如何工作的......

```
>>> import pprint
>>> pprint(list(walk(tree)))
[('a', (('b', ()), ('c', (('e', ()', ()), ('g', ()))), ('d', ()))),
 ('b', ()),
 ('c', (('e', ()), ('f', ()), ('g', ()))),
 ('e', ()),
 ('f', ()),
 ('g', ()),
 ('d', ())] 
```

然后我们需要找到你给定的父母并计算它的孩子。让我们从一个通用的查找例程开始：

```
def find(pred, seq):
    '''returns the first element from seq that satisfied pred'''
    for elem in seq:
        if pred(elem):
            return elem
    # not found?
    raise Exception('Not found') 
```

然后让我们调整它以在给定树中搜索具有给定名称的节点：

```
def findNode(t, label):
    return find(lambda node: node[0] == label, walk(t)) 
```

为了计算节点的子节点，我们只需要计算元组的第二个值：

```
def childrenCount(node):
    return len(node[1]) 
```

让我们将两者混合在一起：

```
for label in "abcdefg":
    print label, childrenCount(findNode(tree, label)) 
```

结果：

```
a 3
b 0
c 3
d 0
e 0
f 0
g 0 
```

* * *

@thg435 建议改用字典。我们开工吧：

```
def childrenNames(parent):
    return tuple(child[0] for child in parent[1])

treedict = {t[0] : childrenNames(t) for t in walk(tree)} 
```

这为您提供了一本不错的字典，您可以直接在其中查找（正如@thg435 所建议的那样）。

```
>>> pprint(treedict)
{'a': ('b', 'c', 'd'),
 'b': (),
 'c': ('e', 'f', 'g'),
 'd': (),
 'e': (),
 'f': (),
 'g': ()}
>>> pprint(sorted(treedict.keys()))
['a', 'b', 'c', 'd', 'e', 'f', 'g']
>>> pprint(len(treedict['a']))
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:30:13.197

首先让我们将数据结构转换为更合适的形式：

```
def convert(node, d):
    key, sub = node
    d[key] = [convert(s, d) for s in sub]
    return d[key]

newtree = {}
convert(tree, newtree) 
```

这会创建一个类似的字典`{key: list of children}`，您可以直接查询：

```
 print len(newtree['c'])  # 3 
```

# android - 在 ListFragment 中设置所选项目的颜色？

> ID：12049898
> 
> 赞同：1
> 
> 时间：2012-08-21T07:09:24.927
> 
> 标签：android, android-listfragment

我的 OnActivityCreated：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter); 
```

和 onListItemClick：

```
public void onListItemClick(ListView l, View v, int position, long id) {
        String item = (String) getListAdapter().getItem(position);
        DetailFragment fragment = (DetailFragment) getFragmentManager()
                .findFragmentById(R.id.detailFragment);
        if (fragment != null && fragment.isInLayout()) {
            v.setBackgroundColor(getResources().getColor(R.color.darkcherry));
            fragment.setText(item);
        } 
```

通过这样做，所选项目将获得彩色背景，但随后选择另一个项目之前的选择不会消失。在我之前的问题中，提供的解决方案使用 xml，但我没有为 listview 定义 xml，只定义了片段。如何为选择（背景）着色？

链接到上一个问题：[如何在 android 的 ListFragment 中设置所选项目的颜色？](https://stackoverflow.com/q/12048921/398802)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:29:18.910

在 support4 库中的 ListFragment 示例中，他们通过制作**`list row layout as checkable`**.

请找到[我的答案](https://stackoverflow.com/a/11843131/582571)和[演示项目](https://github.com/vimalrajpara2006/ListView-with-Selected-Row)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:15:41.140

使用 a`selector`作为自定义行的背景：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@color/selected_row" />
    <item android:drawable="@drawable/normal_drawable" />
</selector> 
```

当您单击列表中的某个元素时，将您单击的行的状态设置为选中：

```
public void onListItemClick(ListView l, View v, int position, long id) {

        v.setSelected(true);

        String item = (String) getListAdapter().getItem(position);
        DetailFragment fragment = (DetailFragment) getFragmentManager()
                .findFragmentById(R.id.detailFragment);
        if (fragment != null && fragment.isInLayout()) {
            v.setBackgroundColor(getResources().getColor(R.color.darkcherry));
            fragment.setText(item);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:21:52.553

您需要跟踪所选视图，以便在选择新视图时更改其颜色。

此外，保留此变量将允许您在屏幕旋转时跟踪选择（保存和恢复片段的状态）。

或者，如果您使用列表视图的选择器属性，则可以将其设置为单选模式：

```
getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

关于片段的创建。显然，您必须删除 onListItemClick。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:44:24.683

尝试使用[自定义适配器](https://stackoverflow.com/questions/8166497/custom-adapter-for-list-view)，并在[列表项](http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/)的布局中，将[选择器](http://developer.android.com/guide/topics/resources/color-list-resource.html)设置为背景可绘制对象。

# regex - 在 PostgreSQL 中去除 HTML 标签

> ID：12049905
> 
> 赞同：11
> 
> 时间：2012-08-21T07:09:59.977
> 
> 标签：regex, postgresql

您将如何在 PostgreSQL 中去除 HTML 标签以保留标签内的数据？

我通过谷歌搜索找到了一些解决方案，但他们也在标签之间删除了文本！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2017-10-15T16:26:00.287

```
select regexp_replace(content, E'<[^>]+>', '', 'gi') from message; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-06-25T19:42:57.157

# 使用 xpath

为您的数据库提供[XML 数据类型](http://www.postgresql.org/docs/9.3/static/datatype-xml.html)，而不是“第二类”文本，因为将 HTML 转换为 XHTML 非常简单（请参阅 HTML-Tidy 或标准 DOM`loadHTML()`和`saveXML()`方法）。

*！它很快而且非常安全！*

常用的*信息检索*需要，不是完整的内容，而是XHTML的东西，所以威康的威力`xpath`。

示例：检索所有段落 `class="fn"`：

```
 WITH needinfo AS (
    SELECT *, xpath('//p[@class="fn"]//text()', xhtml)::text[] as frags
    FROM t 
  ) SELECT array_to_string(frags,' ') AS my_p_fn2txt
    FROM needinfo
    WHERE array_length(frags , 1)>0
  -- for full content use xpath('//text()',xhtml) 
```

* * *

## 正则表达式解决方案...

我不推荐，因为它不是“信息检索”解决方案......而且，正如@James 和其他人在这里评论的那样，正则表达式解决方案并不是那么节省。

我喜欢“纯 SQL”，对我来说比使用 Perl（se @Daniel 的解决方案）或其他更好。

```
 CREATE OR REPLACE FUNCTION strip_tags(TEXT) RETURNS TEXT AS $$
     SELECT regexp_replace(
        regexp_replace($1, E'(?x)<[^>]*?(\s alt \s* = \s* ([\'"]) ([^>]*?) \2) [^>]*? >', E'\3'), 
       E'(?x)(< [^>]*? >)', '', 'g')
 $$ LANGUAGE SQL; 
```

[在siafoo.net](http://www.siafoo.net/snippet/148)、[eskpee.wordpress](http://eskpee.wordpress.com/2012/05/16/regexp_replace_strip_html/)和[Stackoverflow](https://stackoverflow.com/a/12235661)上查看这个和许多其他变体。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-21T14:18:23.800

选择不仅限于使用基于不充分的正则表达式的弱解析器在服务器端执行它，或者使用强大的解析器在客户端执行它。它也可以通过强大的解析器在服务器端实现。

这是一个利用[CPAN 的](http://www.cpan.org)HTML 模块的 PL/PerlU 示例。

```
CREATE FUNCTION extract_contents_from_html(text) returns text AS $$
  use HTML::TreeBuilder;
  use HTML::FormatText;
  my $tree = HTML::TreeBuilder->new;
  $tree->parse_content(shift);
  my $formatter = HTML::FormatText->new(leftmargin=>0, rightmargin=>78);
  $text = $formatter->format($tree);
$$ LANGUAGE plperlu; 
```

演示：

```
select extract_contents_from_html('<html><body color="white">Hi there!<br>How are you?</body></html>') ; 
```

输出：

```
     extract_contents_from_html
    ----------------------------
     你好呀！
     你好吗？

```

不过，需要注意**不受信任的语言**带来的[警告](http://www.postgresql.org/docs/9.1/static/plperl-trusted.html)。

 *** * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-21T07:14:31.573

在 RDBMS 中执行的任何解决方案都将涉及字符串处理或正则表达式：据我所知，没有办法在数据库中以符合标准、安全的方式操作 HTML。重申一下，您所要求的非常非常**不安全。**

更好的选择是在您的应用程序中执行此操作。这是应用程序逻辑，而不是存储层的工作或关注点。

一个很好的方法（至少在 PHP 中）是[HTML 净化器。](http://htmlpurifier.org/) **不要在 JavaScript 中这样做，**用户很容易篡改它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-01T08:04:39.067

```
regexp_replace("Content",'\s*(<[^>]+>|<script.+?<\/script>|<style.+?<\/style>)\s*','','gi') 
```

这段代码对我来说效果很好，它删除了常见的 html-tags 并保留了内部文本（如一些文本），并删除了脚本、样式块并删除了内部代码。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-21T07:12:37.747

不要在 postgreSQL 中这样做。

它不是为此而设计的。

使用 PHP 或您使用的任何语言来提供网页。

不过要小心正则表达式。HTML 是一种复杂的语言，无法用正则表达式来描述。

使用 DOM 解析器去除标签。

如果你使用正则表达式，可以保证你没有留下任何不安全的东西，但是你可以很容易地去掉你想要的东西，或者它可能会留下格式错误的标签。**

# sql - 从模式中的所有表中删除一行

> ID：12049908
> 
> 赞同：0
> 
> 时间：2012-08-21T07:10:07.400
> 
> 标签：sql, oracle

我有一个名为 BILL 的架构，在此架构中，所有表都有一个名为 ID 的列。我需要一种从所有表中删除行的方法，其中 ID = 'test'。有很多模式，所以我只从 BILL 中删除它们很重要。如果重要的话，有些表也不包含测试行。这是一个oracle数据库。

我不知道如何用 sql 来做到这一点。也许是pl/sql？有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:16:00.000

我会去`execute immediate`：

```
begin
   for t in (select table_name from dba_tables where owner = 'BILL') loop

       execute immediate 'delete from ' || t.table_name || 
                         ' where id = ''test''';

   end loop;
end;
/ 
```

*如果该模式中的所有*表都有一个名为的列名`id`（如您所指出的那样） ，这应该可以工作。否则，您应该加入`dba_tab_columns`以确保仅选择具有此类列的表。

`id`如果是其他表引用的主键，它也会失败。在这种情况下，您可以`execute immediate`将

```
begin
  execute immediate '....';
exception when others then
  dbms_output.put_line('failed to delete in ' || t.table_name);
end; 
```

# ibm-mq - 恢复 QMGR 时哪种方式更好？

> ID：12049909
> 
> 赞同：1
> 
> 时间：2012-08-21T07:10:12.630
> 
> 标签：ibm-mq, mq

通常，我们有两种方法来恢复 QMGR。一个是**`backup and restore QMGR data&log`**，另一个是**`create backup QMGR`**。我的问题是哪一个更适合 QMGR 恢复情况？还是他们都有自己的使用场景？请帮忙回答这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:51:09.297

究竟从什么恢复？有什么[恢复时间目标](http://en.wikipedia.org/wiki/Recovery_time_objective)或什么[恢复点目标？](http://en.wikipedia.org/wiki/Recovery_point_objective) 最佳答案取决于这些要求以及您的应用程序的编写方式。从架构的角度来看，*最好*的方法是将消息传递视为传输。当您备份您的网络路由器时，您不会备份恰好在路由器上传输的消息，您只需备份路由器配置。队列管理器也是如此。如果您备份对象定义、授权、ini 文件、退出和退出参数，您可以重新创建 QMgr 的空版本并从旧版本停止的地方继续。

不幸的是，大多数应用程序被设计为好像消息传递层是一个数据库而不是一个传输层。这意味着他们希望从停机的 QMgr 中恢复消息。这就是[Backup QMgr](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa14720_.htm)的用途。它的工作方式是主 QMgr 使用线性日志文件。随着时间的推移，活动日志文件会前进，而不再需要恢复的旧文件会“滚动”到日志集的末尾。然后将这些文件传送到备份 QMgr 所在的位置并应用。然后，备份 QMgr 将拥有*该日志文件上次活动时*队列中消息的精确副本。

主队列管理器上的消息与备份队列管理器上的消息之间总是存在滞后，滞后由主要和辅助活动日志扩展区​​占用的空间表示。如果主日志盘区和辅助日志盘区的大小和数量保持较小，则可以最大限度地减少故障转移中丢失的消息数量。这种方式无法实现零恢复点，但它比时间点备份好很多。

这将我们引向您提到的其他备份方法。如果在 QMgr 运行时进行备份，则时间点备份（即备份 QMgr 的队列和日志文件）将无法工作。在繁忙的 QMgr 上，日志和队列不断被写入并且必须保持同步。但是在活动时备份这些文件几乎可以保证备份的日志不会与备份的队列同步。QMgr 可能会在队列损坏的情况下恢复，或者 QMgr 在恢复后甚至不会启动。

此备份策略*唯一*有效的情况是如果 QMgr 已停止，那么它最好用于升级后的恢复选项，而不是用于活动系统。例如，假设您在周日早上 1 点进行了有效的时间点备份。然后在一周内，有人从 QMgr 下删除了一个队列文件，您需要恢复它。恢复 onbe 文件将不起作用，因为它将与日志不同步并显示为损坏的对象。您必须恢复整个 QMgr。您得到的是截至上周日凌晨 1 点在所有队列中的所有消息。更糟糕的是，如果 QMgr 参与集群，将其恢复到之前的时间点会重置集群命令消息上的序列号，因此即使*看起来*就像 QMgr 已恢复并且健康一样，集群可能会忽略它或您对其所做的任何更改。

最常见但在您的帖子中未提及的一种备份策略是备份 QMgr 配置。这包括：

*   对象定义
*   授权
*   退出目录
*   退出参数
*   ini 文件

通过这些，您将能够重新创建队列管理器配置，并且所有这些备份都可以在 QMgr 运行时完成。还原时，它会生成一个空的 QMgr，应用程序可以像以前一样连接到该 QMgr。主要要求是应用程序（或人工流程）必须协调任何丢失的消息。

有一种灾难恢复方法可以实现零恢复点——即不丢失任何消息。这使用 QMgr 文件下的同步磁盘复制。对队列或日志文件的每次更新都会实时复制到灾难恢复站点，因此 DR QMgr 具有主 QMgr 的精确副本。当主服务器出现故障时，您会中断复制并启动 DR QMgr。假设您的 DNS 也配置为故障转移，所有远程 QMgr 和程序都将使用 DR QMgr，就好像它是主要的一样。

还有几个 HA 选项。使用 PowerHA 或 Veritas Cluster Server 等硬件集群可以将 QMgr 从一台服务器故障转移到另一台服务器，前提是 QMgr 的文件托管在 SAN 等高可用性磁盘上。Multi-Instance QMgr 可以在没有硬件集群软件的情况下执行类似的故障转移，并且基于高度可用的 NFS 存储。这些都是 HA 解决方案而不是 DR 解决方案，因为两个 QMgr 实例都看到相同的磁盘存储。因此，它们与该磁盘存储的距离必须接近相同的距离（在网络方面），否则最远的 QMgr 上的性能将受到延迟的影响，并且吞吐量可能无法接受。

信息中心的[*可用性、恢复和重新启动*](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa14470_.htm)主题中提供了其他信息。

# jquery - jQuery将图像拖到另一个图像下

> ID：12049911
> 
> 赞同：0
> 
> 时间：2012-08-21T07:10:23.350
> 
> 标签：jquery, draggable, jquery-ui-draggable

我需要拖动当前位于另一个 png 图像下的图像。

我以为我可以通过使用以下代码轻松做到这一点：

```
$(document).ready(function() {
    $(".imageOverlay").mousedown(function(eventObject){
    $('#draggable').drag();
    return false;
    });
}); 
```

但是，它似乎不起作用。

[您可以在此处](http://cyfortis.com/draggable/index2.html)找到没有叠加图像的示例

这是带有叠加图像的[示例](http://cyfortis.com/draggable/index.html)

任何帮助都会很棒，请保持您的答案相对简单，因为我不是 jQuery 的专家。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:55:42.700

我设法通过获取可拖动对象的宽度、高度和位置并为底层图像提供相同的 css 定位、宽度和高度来完成这项工作。

这是代码：

```
 var imgdrag = $(#draggable); //This is the box you drag
    var imgselector = $(.imageUnderlay); //This is the image underneath

    //Get the height, width and position of the draggable box
    var height = imgdrag.height();
    var width = imgdrag.width();
    var top = imgdrag.css("top");
    var left = imgdrag.css("left");

    //Add the css style to the image underlay
    imgselector.css('top', top);
    imgselector.css('left', left); 
    imgselector.css('height', height + 'px'); 
    imgselector.css('width', width + 'px'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:22:27.160

改为这样做：监听 #container 上的 onmousedown、onmousemove、onmouseup 事件。使用 jQuery 绑定到事件。当 onmousedown 发生并且 onmousemove 触发时，使用 e.pageX、e.pageY 和 $('#container').offsetLeft 和 $('#container').offsetTop 作为位置，并为底层图像设置新位置. 如果您希望用户体验具有响应性（底层图像随光标移动），则移动逻辑应在 onmousemove 上。当 onmouseup 触发时停止移动底层图像。

查看以下示例：

[jQuery mousedown + mousemove](https://stackoverflow.com/questions/1572483/jquery-mousedown-mousemove)

本页底部有一个获取容器内鼠标位置的示例（e.pageX、e.pageY、$('#container').offsetLeft 和 $('#container').offsetTop）：

[http://docs.jquery.com/Tutorials:Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

沙汉

# xslt - XSLT 循环遍历目录中的一组文件？

> ID：12049913
> 
> 赞同：0
> 
> 时间：2012-08-21T07:10:42.240
> 
> 标签：xslt, io, xsd, transform

我有一种情况，我有一个充满 xsd 文件的目录，需要对它们进行转换，为它们中的每一个生成一个输出文件。我的样式表在单个文档上运行良好，但我想扩展它。好吧，目前我还没有使用 xslt 编辑器，已经安装了 saxon。这是xslt文件：

```
<xsl:stylesheet version="1.0" 
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            >

<xsl:output method="text"/>

<!--* Ignore anything that looks complicated *-->
<xsl:template match="xsd:attribute 
                   | xsd:attributeGroup
                   | xsd:group
                   | xsd:schema/xsd:element[@type]
                   | xsd:notation
                   | xsd:annotation
                   "/>
<!--* Ignore text nodes (otherwise the output will be
  * inundated with whitespace) *-->

<xsl:template match="text()"/>

 <!--* Top-level elements with local complex types; those
  * we want to handle.
  *-->

<xsl:template match = "xsd:schema/xsd:element[xsd:complexType]">
<xsl:apply-templates/>
  </xsl:template>

  <!--* Aha!  A complex type whose content model we want to turn 
  * into a regular expression 
  *-->

<xsl:template match = "xsd:element/xsd:complexType
                     [xsd:sequence | xsd:choice | xsd:all]">
<!--* write out the name for the named regex *-->
<xsl:value-of select="concat('&#xA;&#xA;',
                      @name, parent::xsd:element/@name, 
                      ' ')"/>
<!--* write out the regex *-->
<xsl:apply-templates/>
</xsl:template>

<!--* Simple recursive case:  we encounter a model group. *-->

<xsl:template match = "xsd:sequence|xsd:choice|xsd:all">
<!--* Parenthesize the group and handle its children. *-->
<xsl:text>(</xsl:text>
<xsl:apply-templates/>
<xsl:text>)</xsl:text>

<!--* Append *, ?, +, or {min, max}. *-->
<xsl:call-template name="occurrence-indicator"/>

<!--* If our parent has further children, 
    * append the appropriate connector. *-->
<xsl:call-template name="connector"/>
</xsl:template>

<!--* An element in a content model. *-->
  <xsl:template match = "xsd:element[ancestor::xsd:complexType]">
<!--* Write out the element's name.  We're lazy so 
    * we don't bother with a QName for a local element.
    * Also, we don't recur. *-->
<xsl:value-of select="concat(@ref, @name)"/>

<!--* Handle occurrence indicator and connect
    * just as for groups. *-->
<xsl:call-template name="occurrence-indicator"/>
<xsl:call-template name="connector"/>
</xsl:template>

<!--* Emit the appropriate occurrence indicator for
  * a group or element.
  * Use {min,max}, {min,}, or {n} notation for 
  * non-standard occurrence counts.
  *-->

<xsl:template name="occurrence-indicator">
<xsl:choose>
  <xsl:when test="(@minOccurs='1' or not(@minOccurs)) 
                  and 
                  (@maxOccurs='1' or not(@maxOccurs))">
    <xsl:text></xsl:text>
  </xsl:when>
  <xsl:when test="@minOccurs='0' 
                  and 
                  (@maxOccurs='1' or not(@maxOccurs))">
    <xsl:text>?</xsl:text>
  </xsl:when>
  <xsl:when test="@minOccurs='0' and @maxOccurs='unbounded'">
    <xsl:text>*</xsl:text>
  </xsl:when>
  <xsl:when test="(@minOccurs='1' or not(@minOccurs)) 
                  and 
                  @maxOccurs='unbounded'">
    <xsl:text>+</xsl:text>
  </xsl:when>
  <xsl:when test="@minOccurs=@maxOccurs">
    <xsl:value-of select="concat('{', @minOccurs,'}')"/>
  </xsl:when>
  <xsl:when test="@maxOccurs='unbounded'">
    <xsl:value-of select="concat('{', @minOccurs,',}')"/>
  </xsl:when>
  <xsl:otherwise>
    <xsl:value-of select="concat('{', 
                          @minOccurs,
                          ',',
                          @maxOccurs,
                          '}')"/>
  </xsl:otherwise>
</xsl:choose>
  </xsl:template>

  <xsl:template name="connector">
<!--* Emit the appropriate connector, if we need one. *-->
<xsl:if test="following-sibling::*[self::xsd:sequence 
              | self::xsd:choice 
              | self::xsd:all 
              | self::xsd:element]">
  <xsl:choose>
    <xsl:when test="parent::xsd:sequence">
      <xsl:text>, </xsl:text>
    </xsl:when>
    <xsl:when test="parent::xsd:choice">
      <xsl:text> | </xsl:text>
    </xsl:when>
    <xsl:when test="parent::xsd:all">
      <xsl:text> &amp; </xsl:text>
    </xsl:when>
  </xsl:choose>
</xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:14:18.473

There are so many ways to do match treatment (bash, vb-scrpt, ...).

I often use **ant**. Here some examples how to apply XSLT on multiple files in a folder. The ant "build.xml" file running the XSL transformation on all .xsd files in the "destinationFolder":

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="TransformMultipleFiles" default="transformMulti">
   <property name="xsl_processor.file" value="saxon9he.jar"/>
   <target name="transformMulti">
    <!-- Transform all the files in the directory -->
       <xslt basedir="fileFolder" destdir="destinationFolder" includes="**/*.xsd" extension=".xml" style="yourXSLT.xslt" classpath="${xsl_processor.file}" />
   </target>
</project> 
```

Just add above code into a file named build.xml and run the file with ant by just going into this directory and typing "ant" into the console. (ant must be installed of course - and the environment variables set). as ant is Java you can run it on any system: [http://ant.apache.org/](http://ant.apache.org/)

Or you can use the **collection() function**, but I'm not sure if it works with all XSLT processors. See examples here: [http://www.xmlplease.com/collection](http://www.xmlplease.com/collection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:11:16.673

如果您有权访问 bash shell，则可以这样做：导航到包含您要处理的文件的目录并键入

```
for schemadoc in *.xsd
  do echo "$schemadoc ..."
  xsltproc myxslt.xsl $schemadoc > $schemadoc.output.txt
done 
```

这样做时，更改`myxslt.xsl`为您尝试运行的样式表的名称，并更改开头的行`xsltproc`以匹配从命令行调用 XSLT 处理器的正确方法。

或者，如果您可以访问 Oxygen，则可以阅读如何将样式表应用于给定目录中的所有文件（或所有 *.xsd 文件），然后按照这种方式进行操作。

或者，如果您无法访问其中任何一个，请找一个在您发现自己所在的计算环境中成功且愉快地工作的人，并询问他们将如何做到这一点。

在一组文件上运行一个进程是一项基本技能，并且有很多很多方法可以做到这一点。它与 XSLT 样式表的具体内容完全没有关系，而且从根本上说，它不是一个 XSLT 问题，除非出于某种原因它必须在单个 XSLT 进程中完成（在这种情况下，请仔细听 Dimitre Novatchev 所说的任何内容） . 找到一种、三种或五十五种适用于你的环境的方法并学习它们。

# android - ProgressBar 以编程方式未出现在 ListActivity 中

> ID：12049921
> 
> 赞同：0
> 
> 时间：2012-08-21T07:11:41.737
> 
> 标签：android, android-asynctask, listactivity, loader, android-progressbar

我有一个带有上下文的 AsyncTask：

```
public class DownloadDataPromotions extends AsyncTask<Void, Integer, ArrayList<HashMap<String, String>>>
{
    Context context;

    public DownloadDataPromotions(Context context) 
    {
        this.context = context;
    }
    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
    }

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(Void... params)
    {
                ArrayList<HashMap<String, String>> promoList = new ArrayList<HashMap<String, String>>();
        promoList = DownloadingDataFromWebService();
                      ...
                return promoList;
    }

    @Override
    protected void onProgressUpdate(Integer... values) 
    {

        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> promoList) 
    {
        super.onPostExecute(promoList);
                 ...
    }
} 
```

然后我将它调用到一个 ListActivity（带有他的上下文），以便将从这个 AsyncTask 下载的所有内容显示到一个列表中。

但是现在我想在这个 AsyncTask 中添加一个 Loader ProgressBar，它只能通过以下方式确定：在 onPreExecute() 上显示并在 onPostExecute() 方法中停止显示..

我将它放入带有自定义可绘制对象的可绘制内容中，但我想让它在 AsyncTask 加载时出现并在 AsyncTask 完成时消失（以编程方式）..

编辑：

这工作正常：

```
ProgressBar pb = new ProgressBar(TabPromotionsJSONParsingActivity.this);
                LinearLayout ll = (LinearLayout) findViewById(R.id.linearlayoutProgressBar);
                ll.addView(pb);
                pb.setVisibility(View.VISIBLE); 
```

但是我现在遇到的问题是在我的 Asynctask 完成时停止它。我想在我的 DownloadDataPromotions 中执行相同的任务，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:06:38.740

在 onPreExecute 方法中添加创建 ProgressBar 的代码，在 onPostExecute 方法中添加隐藏它的代码。如下所示（要添加到您的课程中的代码）：

```
public class DownloadDataPromotions extends AsyncTask<Void, Integer, ArrayList<HashMap<String, String>>>
{
    ProgressBar pb;
        ...
    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();

        pb = new ProgressBar(context);
        LinearLayout ll = (LinearLayout) context.findViewById(R.id.linearlayoutProgressBar);
        ll.addView(pb);
        pb.setVisibility(View.VISIBLE);

    }
    ...
    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> promoList) 
    {
        super.onPostExecute(promoList);
        if (pb!=null) {
            ((LinearLayout)pb.getParent()).removeView(pb);
        }
    }
} 
```

# android - HTC Sensation XE 的正确 Eclipse/Android 设备配置

> ID：12049923
> 
> 赞同：1
> 
> 时间：2012-08-21T07:12:02.533
> 
> 标签：android, android-emulator

我想在 Eclipse 中创建一个与 HTC Sensation XE 匹配的 Android 虚拟设备。我应该使用哪些配置选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:25:54.843

这是我为 HTC AVD 采用的旧配置，但你可以试试！

HTCSensation

```
Google APIs Level 9
SD 8GB
Screen 540x960
hw.dPad=no
hw.lcd.density=240
hw.trackBall=no
vm.heapSize=24
hw.ramSize=1024 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:26:26.713

在创建 AVD 时...

**1-选择 api lable 10 (2.3.4)
2-选择“分辨率”并填充 540 * 960**

# javascript - RoR 最快的 JavaScript 运行时？

> ID：12049925
> 
> 赞同：4
> 
> 时间：2012-08-21T07:12:08.527
> 
> 标签：javascript, ruby-on-rails

Rails 可用的各种 javascript 运行时之间是否存在任何已知的性能差异，例如 therubyracer（可能不是最快的）、v8、node.js 等，如果是这样，哪些可以被认为是最快的？

编辑：此外，对于大多数实际意图和目的，实际上有多少实物期权？在进一步阅读时，似乎一切都指向 v8 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:05:52.940

[这篇文章](https://stackoverflow.com/questions/7092107/rails-3-1-error-could-not-find-a-javascript-runtime)建议使用 node.js，因为 therubyracer 的代码大小有问题。[文档](http://railsapps.github.com/installing-rails-3-1.html)只提到 node.js 或 therubyracer，没有别的，所以我不确定还有什么。

# asp.net - asp.net 4.5 自定义会员提供程序配置抛出奇怪的异常

> ID：12049926
> 
> 赞同：30
> 
> 时间：2012-08-21T07:12:09.273
> 
> 标签：asp.net, asp.net-mvc-4, visual-studio-2012, .net-4.5

我的网站最初是使用 VS2010 用 MVC 4.0 RC 编写的，. 我刚刚下载并安装了VS2012，并将我的项目升级到Dotnet Framework 4.5。

在我的项目中，我使用了自定义 MemberShipProvider 和自定义 RoleProvider。在 VS2010 上，它就像一个魅力。但现在我不断收到一个奇怪的配置错误：

“在应用程序的预启动初始化阶段无法调用此方法。”

我的 web.config 中的“system.web -> members -> providers -> add”行被标记为红色作为问题的根源。

我通过创建一个新的 MVC 4.0 项目（在 VS2012 中）、添加我的自定义成员资格/角色提供程序、适当地更改 web.config 并发现错误再次出现，从而消除了问题与迁移过程有关的怀疑！

深入研究问题 - 我在应用程序日志中发现了以下信息：

> 异常信息：异常类型：InvalidOperationException 异常消息：WebMatrix.WebData.PreApplicationStartCode 类型的预应用程序启动初始化方法 Start 引发异常，错误消息如下：在应用程序的预启动初始化阶段无法调用此方法。（C:\Users\dov.AD\Documents\Visual Studio 2012\Projects\MvcApplication2\MvcApplication2\web.config 第 52 行）。
> 在 System.Web.Compilation.BuildManager.InvokePreStartInitMethodsCore（ICollection`1 methods, Func`1 setHostingEnvironmentCultures) 在 System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 方法) 在 System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) 在 System.Web.Compilation.BuildManager.ExecutePreAppStart() 在 System.Web。 Hosting.HostingEnvironment.Initialize（ApplicationManager appManager，IApplicationHost appHost，IConfigMapPathFactory configMapPathFactory，HostingEnvironmentParameters hostingParameters，PolicyLevel policyLevel，异常 appDomainCreationException）
> 
> 在应用程序的预启动初始化阶段不能调用此方法。（C:\Users\dov.AD\Documents\Visual Studio 2012\Projects\MvcApplication2\MvcApplication2\web.config 第 52 行）
> 在 System.Web.Configuration.ConfigUtil.GetType（字符串 typeName，String propertyName，ConfigurationElement configElement，XmlNode 节点，布尔 checkAptcaBit，Boolean ignoreCase）在 System.Web.Configuration.ConfigUtil.GetType（String typeName，String propertyName，ConfigurationElement configElement，Boolean checkAptcaBit, Boolean ignoreCase) 在 System.Web.Configuration.ProvidersHelper.InstantiateProvider(ProviderSettings providerSettings, Type providerType) 在 System.Web.Configuration.ProvidersHelper.InstantiateProviders(ProviderSettingsCollection configProviders, ProviderCollection providers, Type providerType)
> 在 System.Web.Security.Membership.InitializeSettings(Boolean initializeGeneralSettings, RuntimeConfig appConfig, MembershipSection 设置) 在 System.Web.Security.Membership.Initialize() 在 System.Web.Security.Membership.get_Providers() 在 WebMatrix.WebData.WebSecurity .PreAppStartInit() 在 WebMatrix.WebData.PreApplicationStartCode.Start()
> 
> 在应用程序的预启动初始化阶段不能调用此方法。在 System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled()
> 在 System.Web.Compilation.BuildManager.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase) 在 System.Web.Configuration.ConfigUtil.GetType(String typeName, String propertyName, ConfigurationElement configElement、XmlNode 节点、布尔值 checkAptcaBit、布尔值 ignoreCase)
> 
> ```
> Request information: 
> Request URL: http://localhost:4995/ 
> Request path: / 
> User host address: ::1 
> User:  
> Is authenticated: False 
> Authentication Type:  
> Thread account name: AD\dov    Thread information: 
> Thread ID: 5 
> Thread account name: AD\dov 
> Is impersonating: False 
> Stack trace:    at >System.Web.Compilation.BuildManager.InvokePreStartInitMethodsCore(ICollection`1 
> ```
> 
> 方法，Func `1 setHostingEnvironmentCultures) at System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 方法）在 System.Web.Compilation.BuildManager.ExecutePreAppStart() 在 System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) 在 System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, 异常 appDomainCreationException)

请帮忙，

谢谢！

这是web.config：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MyWebSite-20120820105950;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-MyWebSite-20120820105950.mdf" providerName="System.Data.SqlClient" />
    <add name="MyWebSiteDbContext" providerName="System.Data.SqlClient" connectionString="server=.;database=MyWebSiteDB;Integrated Security=True;" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <profile>
      <providers>
        <clear/>
      </providers>
    </profile>
    <roleManager defaultProvider="MyWebSiteRoleProvider" enabled="true">
      <providers>
        <clear/>     
        <add name="MyWebSiteRoleProvider" type="MyWebSite.Security.MyWebSiteRoleProvider"/>
      </providers>
    </roleManager>
    <membership defaultProvider="MyWebSiteMembershipProvider">
      <providers>
        <clear />
        <add name="MyWebSiteMembershipProvider" type="MyWebSite.Security.MyWebSiteMembershipProvider"  />
      </providers>
    </membership>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

这是相关的自定义成员资格（我已对其进行了简化，但即使问题仍然存在）代码，只有 ValidateUser 真正被覆盖：

```
using System;
using System.Linq;
using System.Web.Security;
using DAL.MyWebSite;

namespace MyWebSite.Security
{
    public class MyWebSiteMembershipProvider : MembershipProvider
    {

        /// <summary>
        /// Verifies that the specified user name and password exist in the data source.
        /// </summary>
        /// <returns>
        /// true if the specified username and password are valid; otherwise, false.
        /// </returns>
        /// <param name="username">The name of the user to validate. </param><param name="password">The password for the specified user. </param>
        public override bool ValidateUser(string username, string password)
        {
            // simplified
            return true;
        }

    }
} 
```

这是（简化的）角色提供者：

```
using System;
using System.Linq;
using System.Web.Security;
using DAL.MyWebSite;

namespace MyWebSite.Security
{
    public class MyWebSiteRoleProvider : RoleProvider
    {

        //readonly MyWebSiteDbContext _context = new MyWebSiteDbContext();
        /// <summary>
        /// Gets a value indicating whether the specified user is in the specified role for the configured applicationName.
        /// </summary>
        /// <returns>
        /// true if the specified user is in the specified role for the configured applicationName; otherwise, false.
        /// </returns>
        /// <param name="username">The user name to search for.</param><param name="roleName">The role to search in.</param>
        public override bool IsUserInRole(string username, string roleName)
        {
            return true;
            //return GetRolesForUser(username).Contains(roleName);
        }

        /// <summary>
        /// Gets a list of the roles that a specified user is in for the configured applicationName.
        /// </summary>
        /// <returns>
        /// A string array containing the names of all the roles that the specified user is in for the configured applicationName.
        /// </returns>
        /// <param name="username">The user to return a list of roles for.</param>
        public override string[] GetRolesForUser(string username)
        {
            return new string[] {"one", "two"};

            //var sm = _context.SalesManagers.Include("PermissionLevel").FirstOrDefault(manager => manager.UserName == username);

            //if (sm != null)
            //{
            //    if (sm.PermissionLevel.Name == "Sales Manager")
            //    {
            //        return new[] { "SalesManagers" };
            //    }

            //    if (sm.PermissionLevel.Name == "Administrator")
            //    {
            //        return new[] { "SalesManagers", "Administrators" };
            //    }

            //} 
            //return null;

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-08-30T07:55:40.733

我在自 MVC2 中使用我自己的自定义成员资格和角色提供程序，并在从 MVC3 迁移到 4 时遇到了这个问题。

我在 MVC4 / .net4.5 EF5 中创建了一个新项目，但不幸遇到了这个错误。

我设法通过执行以下操作来修复它：

将此添加到您的 webconfig appsettings：

```
 <appSettings>
    <add key="enableSimpleMembership" value="false"/>
    <add key="autoFormsAuthentication" value="false"/>
  </appSettings> 
```

如果尚未设置，请将您的连接字符串添加到您的成员资格和角色提供者：

```
<membership defaultProvider="MyMembershipProvider">
  <providers>
    <add name="MyMembershipProvider" type="AMS.WebUI.Infrastructure.CustomMembershipProvider" connectionStringName="EFDbContext" />
  </providers>
</membership>
<roleManager defaultProvider="MyRoleprovider">
  <providers>
    <add name="MyRoleprovider" type="AMS.WebUI.Infrastructure.CustomRoleProvider" connectionStringName="EFDbContext" />
  </providers>
</roleManager> 
```

这解决了我的问题，我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-07T02:13:56.633

好的，让我们看看我是否可以正确解释这一点。ASP.NET 4 引入了一个新的程序集级属性：`PreApplicationStartMethodAttribute`，通常在`Properties/AssemblyInfo.cs`文件中使用。

ASP.NET MVC 4 标准模板附带对`WebMatrix.WebData`程序集的引用。查看[它的代码](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/4ed8b6e9c8d1)，AssemblyInfo 确实有这个：

```
[assembly: PreApplicationStartMethod(typeof(PreApplicationStartCode), "Start")] 
```

所以基本上，在 App_Start 甚至被调用之前，框架将调用`WebMatrix.WebData.PreApplicationStartCode.Start()`它，除其他外，这样做

```
// Initialize membership provider
WebSecurity.PreAppStartInit(); 
```

果然，就像@Ben Pretorius 说的那样，这个方法是这样开始的

```
internal static void PreAppStartInit()
{
    // Allow use of <add key="EnableSimpleMembershipKey" value="false" /> to disable registration of membership/role providers as default.
    if (ConfigUtil.SimpleMembershipEnabled)
    {
        ... 
```

所以你有这个“自动”失败的方式/原因。微软没有将标准 Web.config 包含`<add key="EnableSimpleMembershipKey" value="true" />`在标准 Web.config 中以使其更明显地表明“嘿，这里设置了这个 SimpleProvider 的东西”，这真是太糟糕了。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-31T07:44:17.743

我也在玩这个，研究 WebMatrix 代码，最后我认为 Ben 的解决方案似乎是可行的。

（我也尝试过使用程序集引用但没有成功。我认为通过删除引用，您刚刚实现了与配置设置相同的效果 - WebMatrix 安全性未正确初始化。但我认为这是一种非常危险的方式。但是我只是在这里猜测。）

所以对我来说什么有效：

```
<appSettings>
  <add key="enableSimpleMembership" value="false"/>
</appSettings>

<membership defaultProvider="MyMembershipProvider">
  <providers>
    <clear />
    <add name="MyMembershipProvider" type="MyNamespace.MyMembershipProvider" />
  </providers>
</membership>
<!-- this role configuration below uses the SimpleRoleProvider, because I just 
     wanted to replace the membership provider. If you need to replace that one 
     too, just use your own class instead. -->
<roleManager enabled="true" defaultProvider="AspNetSqlRoleProvider">
  <providers>
    <remove name="AspNetSqlRoleProvider" />
    <add name="AspNetSqlRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <!-- note: WebMatrix registers SimpleRoleProvider with name
         'AspNetSqlRoleProvider'. I don't know why but i kept it. -->
  </providers>
</roleManager> 
```

我检查了 WebMatrix 代码，似乎将 'enableSimpleMembership' 设置为 false 是无害的。WebMatrix 仅使用它来初始化成员资格/角色提供程序（可以由上面的配置替换），并且它启用表单身份验证，允许替代配置方式（通过应用程序设置） - 如果您有标准表单，这也不是必需的正确配置了身份验证（主要是“loginUrl”是这里唯一重要的参与者）。

我还尝试检查“autoFormsAuthentication”设置的作用——但我没有找到任何东西，所以跳过了它。看起来还是不错的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T11:15:57.647

我已经解决了这个问题。我发现当你在VS2012中创建MVC 4项目时，模板添加了对一些程序集的引用，其中：webmatrix和Oauth...我只是删除了这些引用，问题就消失了。我不知道这是如何解决问题的，但我看到异常来自 WebMatrix 程序集，因此我试图将其删除。对不起，但我没有时间投入调查......

# c# - 通过 json 传递 HttpContext.Current 或从 Web 服务实例化对象

> ID：12049929
> 
> 赞同：0
> 
> 时间：2012-08-21T07:12:20.550
> 
> 标签：c#, json

如何通过 json 传递 HttpContext.Current？

我猜它是这样的：

字符串 hc = HttpContext.Current.toJSON

这是我的情景

我有 20 个 asp.net 站点，我想共享一个使用 http 上下文的 myAddControllsClass。此类将控件添加到实例化它的页面。由于可维护性问题，我不想重复这个类 20 次。我也无法引用 DLL `the only way I can do it is via a web service.`

```
//in page load

var my As New myAddControllsClassService.WebService

        my.addControlls(httpContext.Current)

//simplified version of my class
public class myAddControllsClass
{

    public void AddButton()
    {

            //scan controls in the context here

        Page pg = (Page)HttpContext.Current.Handler;

        HtmlButton txtb = new HtmlButton();

        txtb.InnerText = "my button";

        pg.Form.Controls.Add(txtb);

    }

} 
```

你有任何想法如何做到这一点或任何想法？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:02:11.013

不，你不能那样做。

[我给你的页面解释](https://stackoverflow.com/questions/12036093/dynamically-add-a-control-to-page-from-a-web-service/12036183#12036183)同样适用于这里。

> 将 Web 服务视为您可以通过 Web 调用、传递参数和接收处理值的方法。

`HttpContext.Current`与您当前的请求有关。它不能通过 Web 服务传递。不能序列化所有对象。

要将数据传递给 Web 服务，您必须能够序列化数据。套接字连接、文件句柄等无法在 Web 服务中序列化和重建。

像这样共享代码的理想方法是创建一个 dll 并在所有必须共享代码的项目中引用它。为什么你不能那样做？

# css - 带有侧边栏的 CSS 100% 高度

> ID：12049930
> 
> 赞同：1
> 
> 时间：2012-08-21T07:12:26.910
> 
> 标签：css, height

我遇到了 CSS 100% 高度的问题。我已经搜索了许多教程和解决方案，但我似乎无法得到我想要的结果。我所拥有的是一个侧边栏和一个将放置内容的主列。

由于主列由于内容而延伸，我希望侧边栏的背景也可以延伸。但是我得到的是侧边栏的背景一直卡在某个点上，并且没有一直下降。

![在此处输入图像描述](../Images/0bca0ff35b073fa75753f05247dfce25.png)

黑色背景是我的侧边栏，内容似乎一直溢出到一边。

我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />

<title>CSS 100% Height</title>
<link rel="stylesheet" type="text/css" href="style2.css" />
</head>

<body>
<div id="page">
<div id="sidecolumn">
</div>
<div id="maincolumn">
    <div id="content">
    contents
    </div>
</div>

</div>
</body>
</html> 
```

css

```
html {
    height: 100%;
}
body {
    margin: 0;
    padding: 0;
    height: 100%;
}
#content {
    background: #EEE;
    font: 1.5em arial, verdana, sans-serif;
    min-height: 100%;
}

#sidecolumn {
    width: 500px;
    height: 100%;
    background: #000;
    float: left;
    }

#maincolumn {
    height: 100%;
    }

#page {
    height: 100%;
    } 
```

我看到并尝试过的 tut [http://www.tutwow.com/htmlcss/quick-tip-css-100-height/](http://www.tutwow.com/htmlcss/quick-tip-css-100-height/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:21:06.807

`display:table-cell`您可以通过属性实现您想要的。

首先定义`display:table`到您的父 div，然后定义`display:table-cell`到您的子 div，然后两个 div 将垂直相等。

**更新的 CSS**

```
#content {
    background: #EEE;
    font: 1.5em arial, verdana, sans-serif;
    display: table-cell;
}

#sidecolumn {
    width: 500px;
    background: #000;
    display:table-cell;
}

#maincolumn {
    height: 100%;
}

#page {
    height: 100%;
    display:table;
} 
```

[https://jsfiddle.net/9dhbL8ke/](https://jsfiddle.net/9dhbL8ke/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:24:08.437

使用定位来定位侧边栏和主栏。. .

```
 #sidecolumn {
position:relative;
top: 0px;
left:0px;
width: 100px;
height: 100%;
background: #000;
float: left;
}

#maincolumn {
position: relative;
left: 101px;
height: 100%;
} 
```

[这是一个小提琴](http://jsfiddle.net/hVtc9/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T07:21:59.990

使用等高功能

jQuery

```
function equalHeight(group) {
    tallest = 0;
    group.each(function() {
        thisHeight = $(this).height();
        if(thisHeight > tallest) {
            tallest = thisHeight;
        }
    });
    group.height(tallest);
}

$(document).ready(function() {
    equalHeight($(".eheight));

}); 
```

HTML

```
<body>
<div id="page">
<div id="sidecolumn eheight">
</div>
<div id="maincolumn eheight">
    <div id="content">
    contents
    </div>
</div>

</div>
</body> 
```

# c++ - 如何向 QSortFilterProxyModel 添加额外的行

> ID：12049934
> 
> 赞同：2
> 
> 时间：2012-08-21T07:12:33.343
> 
> 标签：c++, qt

美好的一天，我有一个 QTreeView 模型，我为这个小部件添加了 QSortFilterProxyModel，隐藏了分支，因此会有一个 QTreeView 像 QListView 但带有标题。一切正常，现在我想添加新的额外行（显示在我的观点，当单击此行时，我向上移动到此节点的父节点）。如何实现此行为：1）添加额外的行；2）单击视图并向上移动到父节点并显示新节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:14:48.450

当我遇到同样的问题时，我设计了新的 ProxyModel，其唯一目的是在代理源模型的前几行之后添加空行。然后你可以在视图和排序模型之间插入这个模型。

# android - Android程序中的RestFul Webservices身份验证？

> ID：12049937
> 
> 赞同：0
> 
> 时间：2012-08-21T07:12:40.153
> 
> 标签：android, web-services, rest

我对 Android rest web-services 非常陌生，我想从我的 android 程序中连接 Rest web-services，为此我编写了以下代码：

```
HttpClient httpClient = new DefaultHttpClient();
HttpContext localContext = new BasicHttpContext();
HttpGet httpGet = new HttpGet("http://***********:8000/sap/bc/srt/rfc/sap/z_customer_lookup1/800/z_customer_lookup1/z_customer_lookup1_bind&sap-user=*******&sap-password=********"); 
```

但是当我运行此代码时，我收到登录错误消息，如何在 Android Rest Web 服务中提供身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:22:48.860

试试这个代码来使用 http post 方法：
`List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3); nameValuePairs.add(new BasicNameValuePair("request", "login")); nameValuePairs.add(new BasicNameValuePair("user_name", user_name)); nameValuePairs.add(new BasicNameValuePair("password", pass)); DefaultHttpClient client = new DefaultHttpClient(); HttpPost httppost = new HttpPost(url); httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));`

```
 HttpParams params = client.getParams();
            HttpConnectionParams.setConnectionTimeout(params, 3000);
            HttpConnectionParams.setSoTimeout(params, 3000);

            HttpResponse httpResponse = client.execute(httppost);
            result=EntityUtils.toString(httpResponse.getEntity());` 
```

# java - 将笔画应用于Java中的图像

> ID：12049940
> 
> 赞同：1
> 
> 时间：2012-08-21T07:12:46.780
> 
> 标签：java, image, image-processing, java-2d, stroke

我想在 Java 中对图像应用笔画（轮廓）。在阅读[了这个](http://www.apl.jhu.edu/~hall/java/Java2D-Tutorial.html)和[这个](http://docs.oracle.com/javase/tutorial/2d/geometry/strokeandfill.html)之后，看起来 Java2D API 只将笔划应用于形状？当然，我可以进行位图填充，然后对该形状应用笔触，但我想知道是否可以直接在给定的位图上应用它。

更新：我设法应用了一个描边位，它勾勒出整个图像。我的图像具有 PNG 透明度。如何仅在图像的可见像素周围应用描边？

```
 public static void main(String[] args) {
    try {
        // TODO code application logic here
        URL u = GraphicsDemo.class.getResource("Capture222.png");
        BufferedImage img = ImageIO.read(new File(u.getPath()));
        System.out.print("loaded");
        Graphics2D g = img.createGraphics();
        Rectangle2D tr = new Rectangle2D.Double(0, 0,
                img.getWidth(), img.getHeight());
        // Create the TexturePaint.
        TexturePaint tp = new TexturePaint(img, tr);
        g.setStroke(new BasicStroke(20));
        g.setPaint(Color.ORANGE);
        //   g.fill(tr);
        g.draw(tr);

        ImageIO.write(img, "PNG", new File("myeditedimage.png"));
        g.dispose();
    } catch (IOException ex) {
        Logger.getLogger(GraphicsDemo.class.getName()).log(Level.SEVERE, null, ex);
    }
 } 
```

更新 1：我不确定使用 Java 图形 API 是否可以尝试做。再一次。我需要根据可见像素轮廓而不是围绕它的边界框来勾勒图像。这就是我想要实现的目标： ![在此处输入图像描述](../Images/41b010a8d48c5ffe21c7eda5d8f3e247.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:01:26.180

是的，Java2D API 仅将笔划应用于形状。你可以做两件事：

[从位图](http://en.wikipedia.org/wiki/Raster_graphics "位图")图像的透明度信息中创建一个 Shape ，这样您就可以只描边不透明的部分。这在任何语言中都是困难的，因为这意味着将位图信息转换为[基于矢量的信息](http://en.wikipedia.org/wiki/Vector_graphics "基于矢量的信息")。

检查这个：[图像/图形变成形状](https://stackoverflow.com/questions/7052422/image-graphic-into-a-shape-in-java/)

这：[平滑锯齿状路径](https://stackoverflow.com/questions/7218309/smoothing-a-jagged-path)

但基本上我会尽量避免转换问题，并以仅位图的方式解决它 - 例如，对在给定像素距离处可以找到透明像素的那些像素（使用“描边颜色”）着色（ “笔画宽度”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:27:07.380

*   首先，`Graphics2D`通过调用来告诉你希望如何绘制轮廓`setStroke()`。此方法接受任何实现`java.awt.Stroke interface`. 2D API 带有一个类，`java.awt.BasicStroke`，它实现了常见的描边选项。
*   用于`setPaint()`告诉`Graphics2D`应该如何绘制轮廓本身。轮廓，就像形状的内部一样，可以使用颜色、渐变、纹理或任何其他实现 Paint 接口的东西来绘制。
*   `draw()`使用 Graphics2D 的方法绘制形状的轮廓。Graphics2D 使用步骤 1 中的 Stroke 来确定轮廓的外观。步骤 2 中的 Paint 用于实际渲染轮廓。

`Graphics2D`使用 Stroke 来确定特定形状的轮廓是什么样的。当你询问`Graphics2D`一个`draw()`形状时，它会询问它的 Stroke 形状的轮廓应该是什么样子。有趣的是，Stroke 将描边的轮廓返回为另一种形状：

```
public abstract Shape createStrokedShape(Shape p) 
```

此方法返回一个表示所提供形状的描边轮廓的 Shape。这是 Stroke 中唯一的方法。通常，您不会自己调用它，a`Graphics2D`会在您`draw()`创建 shape 时代表您调用它。

调用`draw()`a`Graphics2D`等价于以下代码：

```
public void longwindedDraw(Graphics2D g2, Shape s) 
{
    Stroke stroke = g2.getStroke();
    Shape strokedOutline = stroke.createStrokedShape(s);
    g2.fill(strokedOutline);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:26:30.823

试试这个 ：

```
final static BasicStroke dash_stroke =new BasicStroke(1.0f,
                        BasicStroke.CAP_BUTT,
                        BasicStroke.JOIN_MITER,
                        10.0f, dash1, 0.0f); 
```

然后设置 Stroke ：

```
g2.getStroke() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-21T07:21:06.623

要获取在位图上绘制的 Graphics2D 对象，您应该使用 BufferedImage。

```
BufferedImage img = ImageIO.read(new File("myimage.png"));
Graphics2D g = img.createGraphics();

// Paint on it like you want here...

g.dispose();
ImageIO.write(img, "PNG", new File("myeditedimage.png")); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T23:45:41.473

像这样？如果没有，请附上显示所需结果的图像。

![描边图像](../Images/41ab66f99f79608b3ee929a8a8d9c7f3.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;

public class StrokedImage {

    public BufferedImage getStrokedImage(
            BufferedImage bi, Shape shape, int strokeWidth) {
        int w = bi.getWidth();
        int h = bi.getHeight();
        BufferedImage bib = new BufferedImage(w,h,bi.getType());
        Graphics2D g = bib.createGraphics();

        BasicStroke bs = new BasicStroke(strokeWidth);
        g.setStroke(bs);
        Rectangle rect = new Rectangle(0,0,w,h); 
        TexturePaint tp = new TexturePaint(bi, rect); 
        g.setPaint(tp);
        g.draw(shape);

        g.dispose();
        return bib;
    }

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://pscode.org/media/stromlo1.jpg");
        final BufferedImage bi = ImageIO.read(url);
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                StrokedImage si = new StrokedImage();

                int strokeWidth = 12;
                int pad = 50;
                Shape shape = new Rectangle(
                        pad,pad,
                        bi.getWidth()-(2*pad),bi.getHeight()-(2*pad)); 
                Image i = si.getStrokedImage(bi, shape, strokeWidth);

                JPanel p = new JPanel(new GridLayout(1,0,5,5));
                p.add(new JLabel(new ImageIcon(i)));
                p.add(new JLabel(new ImageIcon(bi)));
                JOptionPane.showMessageDialog(null, p);
            }
        });
    }
} 
```

## 发布问题编辑 - 更新

看看[这个答案](https://stackoverflow.com/a/10854490/418556)。`Shape`它在绘制图像之前应用剪辑。然后它清除剪辑并将其`Shape`自身绘制为边框。

![](../Images/eee71b55ffbaa0c966091258dc03ea96.png)

# c# - Html.ActionLink 标题参数作为测试 + 值

> ID：12049946
> 
> 赞同：0
> 
> 时间：2012-08-21T07:13:26.183
> 
> 标签：c#, asp.net-mvc-3, html.actionlink

我有这一行，但不确定 + 字符串部分。不像现在这样正确：

```
 <p>
    <%: Html.ActionLink("TUK-JS-KPI-WE-" + ((DateTime)Eval(ViewBag.jobSortedReportDate)).ToString("yyyy-MM-dd"), "TradeUKKPIReportInstructions", "Report", new { @date = ViewBag.jobSortedReportDate }, 0)%>    
 </p> 
```

如何将文本添加到值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:21:24.050

如果`jobSortedReportDate`包含字符串值，您应该将其转换为字符串，就像这样：

```
<%: Html.ActionLink("TUK-JS-KPI-WE-" + (string)ViewBag.jobSortedReportDate, "TradeUKKPIReportInstructions", "Report", new { @date = ViewBag.jobSortedReportDate }, 0)%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:30:30.987

你也可以试试这个

```
<%: Html.ActionLink(String.Format("TUK-JS-KPI-WE-{0}", (DateTime) ViewBag.jobSortedReportDate), "TradeUKKPIReportInstructions", "Report", new { @date = ViewBag.jobSortedReportDate }, 0)%> 
```

这是替代方案

```
<a href="@Url.Action("TradeUKKPIReportInstructions", new {Controller = "Report", @date = ViewBag.jobSortedReportDate })">@String.Format("TUK-JS-KPI-WE-{0}", ViewBag.jobSortedReportDate )</a> 
```

# facebook - Hybrid Authentication With Facebook

> ID：12049950
> 
> 赞同：0
> 
> 时间：2012-08-21T07:14:01.477
> 
> 标签：facebook, facebook-graph-api, hybridauth, hybridauthprovider

I have been working on this for the past two days trying to get the facebook authentication using HybridAuth to work in codeigniter using [https://github.com/andacata/HybridIgniter](https://github.com/andacata/HybridIgniter) integration. The twitter authentication works fine but i get a user User has cancelled the authentication or the provider refused the connection when i try authorizing with facebook. When i directed to facebook from the site, it reads in the url that user has denied the application even before i enter my facebook details. This then return an empty user id to the application.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:00:52.830

这可能是因为 Twitter 使用 Oauth1.0 而 Facebook 使用 Oauth 2.0 进行身份验证。可能是您的项目中的设置不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:44:28.600

当认证失败时，您应该调用注销方法。

```
$provider->logout(); 
```

然后再次重定向到 hibridy 登录。因此，所有 Cookie 和 Session var 都被重置，用户应该能够重新授权应用程序。

# java - rmi 性能网络流量

> ID：12049951
> 
> 赞同：0
> 
> 时间：2012-08-21T07:14:06.127
> 
> 标签：java, jetty, rmi, resin

我部署了一个 RMI 服务，编写了一个 RMI 客户端（Java SE 项目）来访问它并且没问题，但是 Web 项目中的一些代码，我使用 wireshark 来发现从我们的客户端发送到我们的服务器的每个 RMI 请求都包含列表应用程序的类路径中的所有 jar。

我的问题类似于[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6664389](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6664389)

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-20T01:30:27.497

不要使用代码库功能。它很少使用，特别是在客户端 -> 服务器方向。除非对等方使用安全管理器，否则它不会起作用。换句话说，不要`java.rmi.server.codebase`在客户端设置系统属性。

或者您是否按照错误报告使用 Java Web Start 并且没有告诉我们？

# c# - 从 C# DLL 动态获取代码

> ID：12049955
> 
> 赞同：10
> 
> 时间：2012-08-21T07:14:10.663
> 
> 标签：c#, .net, reverse-engineering

我想看看 DLL（可能在不同的机器上编译）是否相同。为此，我正在做的是加载 DLL 并计算 MD5，因为 DLL 在不同的机器上失败（但具有相同的源）而失败。这似乎是由于在编译时添加的其他元数据（正如有人提到[的这里](https://stackoverflow.com/questions/2735643/how-can-i-tell-whether-two-net-dlls-are-the-same)）。

我想对整个 DLL 进行逆向工程，看看代码是否匹配，但是，我有两个问题：

*   我只能找到执行此操作的工具，我似乎无法找到 C# 库或类似的东西来满足我的需要。
*   我不是 100% 确定反编译的源代码是否与跨不同机器编译的源代码相同。

任何提示、提示和指示将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:25:21.327

您可能是对的 - 它可能是元数据。不过，我认为这不一定是最有可能的可能性。

DLL 不同的另一个原因可能是它们是针对不同版本的 .NET 编译的，或者可能是 MONO。

**无法保证反编译 DLL 会产生相同的代码**，即使它们是从相同的源编译的；确实，考虑到编译器的优化特性，稍微不同的源代码可以编译为相同的可执行文件的可能性很小，理论上（但存在） - 通常，循环将被展开 - 即变成顺序的非循环指令- 当这会节省内存使用或 CPU 时间时。

如果程序员手动展开循环并重新编译，那是编译器一直在做的优化——presto，**两个不同的源具有相同的输出。**

一个更好的问题是您希望通过比较两个 DLL 来了解什么。如果纯粹是为了学习，那就太棒了，值得称赞——但是，要对此进行有意义的研究，您需要的知识量是相当高的。通过学习通用的、更适用的 C#/.net 技术，您可能会找到更好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:23:03.463

使用强名称对该程序集进行签名，您将能够绝对确定两个或多个程序集只是同一个*或不同*的程序集，因为它们具有相同的程序集版本、相同的公钥令牌等。

如果代码源和 Visual Studio 项目不是同一个，我怀疑两个不同的开发人员会有重复的私钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T08:50:25.130

*   我的意思是，这些库是你的，是你的代码吗？
*   它们是由您的安装人员安装的，还是独立安装的，您只需检查它们？

如果你能以任何方式监督它们在目标机器上的初始安装，你可以用普通的旧 DLL 资源做一些穷人的水印。

将包含您自己内容的二进制资源附加到已安装的每个版本的 DLL，然后检查该文件。如果您`public static readonly class Something{ public static SomeData MyImportantInformation = ...; }`在每个代码中嵌入 a 并在运行时读取它，或者好像您将 [Attributes] 与某些类上的数据一起使用并通过反射读取它们，那就更棒了——但是使用二进制资源有两个微小的优势：

*   **您可以在构建 DLL后**从 DLL 中添加/删除资源（有点像 ILMerge 工具）
*   您可以像从托管代码中一样轻松地从本机代码中读取资源，并且要读取它们，您可以以非常有限且节省资源的方式加载 DLL

请注意，我的意思是“低级资源”，例如 Manifest，它通常位于插槽 #0 上的资源，或 .exe/.dll 图标。

关于二进制资源：

[http://www.codeproject.com/Articles/4221/Adding-and-extracting-binary-resources](http://www.codeproject.com/Articles/4221/Adding-and-extracting-binary-resources)

以及更易于使用的托管嵌入式资源：

[http://keithelder.net/2007/12/14/how-to-load-an-embedded-resource-from-a-dll/](http://keithelder.net/2007/12/14/how-to-load-an-embedded-resource-from-a-dll/) [https://stackoverflow.com/a/7978410/717732](https://stackoverflow.com/a/7978410/717732)

您可以在构建脚本中添加/修改资源，以确保发布的每个版本都添加了不同/正确的信息。当然，如果您控制构建过程，那么您也可以启动前面提到的 ILmerge 以将任何内容放入任何 DLL 中。虽然大部分都可以工作，但总的来说，我认为这是一种矫枉过正的做法，如果做得不正确的话如果它在签名后修改 DLL，则会破坏任何安全签名。必须在它之前完成。。

如果您控制构建过程，您可以将必要的版本信息作为类静态数据或简单地作为程序集级别的属性放入代码中，或者 (...)

或者你为什么不只使用版本号来**区分版本**？：） IE。[语义版本控制](http://semver.org/)？

另一方面，如果您正在使用非您的 DLL，并且您无法控制它们的部署，那么您将处于艰难的境地。正如其他人所说，编译器可能会在编译期间应用许多不同的技巧，但是 - 请注意 - 他们对编译后的代码可以做的事情有一些法律和逻辑限制。

“逻辑”约束的示例：
-它们可能会更改指令，但可能不会更改整体含义和（副作用）-它们可能会更改代码和数据布局/结构，但不会以将算法更改为处理它们等

“法律”约束的示例：
- 它们不允许删除任何公共符号（公共 = 其他代码模块可见，即在 .Net 中涵盖：公共和受保护，有时甚至是内部和私有） - 它们不是允许更改任何公共符号的名称 - 他们不允许更改任何公共符号的签名等

现在，如果您仅将自己限制在此类信息中，则可以以**一种可能与**编译器和平台无关的方式收集/计算任何代码的哈希/签名。您不会得到相同或不同的明确答案，但您会了解它们的可能性有多大。

举个最简单的例子：通过反射加载 DLL 并扫描所有类的公共和非公共成员名称。然后，要么计算该字符串集的哈希值，要么只使用整个字符串集，我可能最多以千字节计。如果对代码进行了较大的更改，几乎可以肯定会添加或删除某些字段/方法。对于较小的更改，您还可以扫描方法的签名：添加参数列表和参数类型并将值返回到池中。更多的工作和更多的检测变化的可能性。

对于重要的更改：您可以尝试扫描方法的 ILCode 并检测其中的结构。编译器可能会内联，有时会删除方法/循环/等，但会保留整体结构。特定的代码块在这里或那里执行 n 次，分支在它们的位置但可能交换边等。但是，检测控制结构并不容易，比较代码更加困难。对于某些代码，它可能会给你一个“完全相同”的明确答案，但很多时候你会得到“不一样”，即使它们是。该主题的一些关键字是......重复或抄袭检测器。这就是对此类事物的研究的开始:) 参见 ie。[https://stackoverflow.com/questions/546487/tools-to-identify-code-duplications](https://stackoverflow.com/questions/546487/tools-to-identify-code-duplications)虽然我不知道提到的工具是否扫描代码，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:27:34.233

我们确实设法解决了这个问题......我们所做的是我们添加了一个预构建事件，该事件通过一些相关文件（我们更改的文件，例如 .CS 文件）并计算每个文件的哈希值. 每个散列值最终都会对DLL的*全局*散列有所贡献。由于我们只有少量文件，因此发生冲突的可能性很小。

然后我们在 DLL 的描述中添加校验和。这使我们能够在不同的机器上编译 DLL，但由于它们的源相同，因此产生了相同的校验和。

感谢您提供的所有答案，它们很有帮助。

# ios - How to reload the data that will be displayed on one view

> ID：12049957
> 
> 赞同：0
> 
> 时间：2012-08-21T07:14:13.577
> 
> 标签：ios, uiview, uiviewcontroller, reload, subview

One view that is a subview of one view controller. And this view will show some data that are stored on one plist file. However, this plist file will be changed on next view controller. When the screen back from next view controller to previous view controller that has the customary view as subview, the data will not be refreshed. In this situation, how can I fix it? And there are *several solutions* that are provided on the network.

**First solution:**

```
if(self isViewLoaded)
{
    self.view = nil;
    [self viewDidLoad];
} 
```

This solution has one problem that the view of controller is black and will not show any others. But if I delete following code, the data on the view could be refreshed.

```
self.view = nil; 
```

However, there is one problem that I could see some words under this layer. I guess that it will create new layer above the older layer. Because some lighter words that are not the data on current version plist file instead of previous version plist file are on this subview

**Second solution:**

```
[self.view setNeedsDisplay]; 
```

this code has not any function.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:44:49.210

您可以使用“下一个视图控制器”中的 NSNotificationCenter postNotifcation。

例如：

```
-(void)updatePLISTData
{
    // code to download new data for PLIST

    [[NSNotificationCenter defaultCenter] postNotificationNamed:@"notif_plistChanged" .... object:thePlistObject ];
} 
```

确保你记得向你的“父视图控制器”添加一个观察者，它会推动你的“下一个视图控制器”。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updatePlist:) object:nil]; 
```

并且还删除了观察者

```
-(void)dealloc
{
   [[NSNotificationCenter defaultCenter] removeObserver:self];
   ...
   [super dealloc];
} 
```

收到通知后，通知将调用您在添加观察者时指定的任何方法。在这种情况下，您有

```
-(void)updatePlist:(NSNofitication *)paramPlist
{
    self.plist = paramPlist;
} 
```

# c# - WPF panel rotation?

> ID：12049959
> 
> 赞同：3
> 
> 时间：2012-08-21T07:14:26.203
> 
> 标签：c#, wpf, rotation, wpf-controls

I have a custom hexagon menu in wpf and want to rotate it this is the rotation code

```
 hexagonMenu1.RenderTransform = new RotateTransform(i,hexagonMenu1.Hexagon.ContainerRect.Width / 2, hexagonMenu1.Hexagon.ContainerRect.Height / 2); 
```

when I call this code more than one it do nothing and panel not rotated , what can i do? Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:37:39.503

您将不得不增加旋转角度，即您的参数`i`，每个新的 RenderTransform。

也可以重用现有的 RenderTransform 并增加其[Angle](http://msdn.microsoft.com/en-us/library/system.windows.media.rotatetransform.angle.aspx)属性：

```
hexagonMenu1.RenderTransform = new RotateTransform(0, hexagonMenu1.Hexagon.ContainerRect.Width / 2, hexagonMenu1.Hexagon.ContainerRect.Height / 2);
...
double deltaRotation = ...
// do the following for every rotation cycle
((RotateTransform)hexagonMenu1.RenderTransform).Angle += deltaRotation; 
```

您还可以考虑为旋转角度[设置动画](http://msdn.microsoft.com/en-us/library/ms752312.aspx)，从而消除循环增加旋转角度的需要：

```
DoubleAnimation animation =
    new DoubleAnimation(360, TimeSpan.FromSeconds(10));

((RotateTransform)hexagonMenu1.RenderTransform).BeginAnimation(
    RotateTransform.AngleProperty, animation); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:56:19.397

您需要意识到您编写的代码不是“旋转六边形”；它是“设置六边形的旋转”。

你认为你的代码正在做的是：“旋转 30 度。再旋转 30 度。现在我旋转了 60 度。”

实际上，您的代码正在执行此操作：“将旋转设置为 30 度。将旋转设置为 30 度。旋转设置为 30 度。”

无论您调用多少次代码，都不会导致进一步的轮换。您需要更改代码，以便设置旋转*之前*`i`的值不同。

# android - Using Intent Filters

> ID：12049960
> 
> 赞同：0
> 
> 时间：2012-08-21T07:14:28.983
> 
> 标签：android, android-intent, intentfilter

I'm having a really odd problem that seems very unrelated. I'm trying to use intent filters to open an activity (as recc from other questions on SO) in my main application from an activity in a library I created. In the library activity I create/call the intent like so:

```
Intent i = new Intent("com.application.mainapplication.tagDetailActivity");
// sending data to new activity
i.putExtra("sub_category", subCats[(int)id]); //Serializable data
i.putExtra("Category", category.name);
startActivity(i); 
```

If I comment the two i.putExtra's I get the following error:

```
Could not find Library.apk! 
```

In my manifest for the main application I have:

```
<activity android:name=".tagDetailActivity">
    <intent-filter >
        <action android:name="com.tagsforlikes.tagsforlikes.tagDetailActivity" />
    </intent-filter>
</activity> 
```

I'm not really sure why putExtra's are causing this error. Am I creating the intent correctly? It doesn't look much different than starting a normal intent (read: not intentfilter) and I'm worried I'm creating it wrong.

### UPDATE

I think there is some confusion. The activity I am trying to call is not the main activity of the main application. So for the application I have a Free/Pro version that both reference a library. In the free/pro version, the main activity creates an activity in the library which in turn must call an activity in the free/pro version again.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:15:57.147

```
 <intent-filter>
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
 </intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:29:04.103

```
<activity android:name=".--your class name--" android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:08:36.647

听起来它根本没有安装在您的手机上：

右键单击项目（不是库）、属性、Java 构建路径、顺序和导出。你的图书馆在吗？如果，请确保已检查。如果没有，请确保在库下添加了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T07:47:30.567

看看这个答案

```
Intent intent = new Intent("android.intent.action.MAIN");
intent.setComponent(ComponentName.unflattenFromString("com.google.android.maps.mytracks/com.google.android.apps.mytracks.MyTracks"));
intent.addCategory("android.intent.category.LAUNCHER");
startActivity(intent); 
```

为此，您应该安装另一个活动。

查看更多相关帖子

[Android，如何在我的应用程序中使用外部 APK？](https://stackoverflow.com/q/8177097/760489)

[从您自己的（意图）打开另一个应用程序](https://stackoverflow.com/q/2780102/760489)

# php - 缓存外部XML文件，应该怎么做？

> ID：12049966
> 
> 赞同：1
> 
> 时间：2012-08-21T07:14:58.090
> 
> 标签：php, ajax, wordpress

我在 wordpress 中有一个维护项目，我需要解析外部 xml。以前的开发人员已经实现了这一点。我只是想知道这是一个好方法还是我需要使用自己的方法。

他将 xml 缓存在一个缓存 5 分钟的 json 文件中。他让我使用 ajax 调用它，然后解析它。

你认为这是一个好方法吗？我们不能直接解析xml文件而不是缓存和解析吗？

他正在使用外部 api_cache 获取 xml 并缓存在 json 文件中

**PHP文件**

```
 require 'api_cache/api_cache.php';
 $cache_file = 'jsonfile';
 $api_call ='xmlfile';
 $cache_for = 5; 
 $api_cache = new API_cache ($api_call, $cache_for, $cache_file);

  if (!$res = $api_cache->get_api_cache()) {
      $res = "{error: 'Could not load cache'}";
  }
 ob_start();
 echo $res;
 $json_body = ob_get_clean();

 header('Content-Type: application/json');
 header('Content-length: '.strlen($json_body));
 header('Expires: '.$api_cache->get_expires_datetime());
 echo $json_body; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:15:02.230

缓存的目的是防止（资源昂贵的）代码在多次请求时运行多次。

**相反，您保存（或缓存**）文件的副本，并在短时间内大量请求到达时提供它。示例工作流程：

1.  用户 A 请求文件。
2.  系统检查缓存文件是否存在。
3.  缓存文件不存在。创建一个，保持5分钟。（资源昂贵）
4.  提供缓存文件。
5.  3 分钟后，用户 B 请求文件。
6.  系统检查缓存文件是否存在。
7.  缓存文件存在。
8.  提供缓存文件。（节省了大量资源）。
9.  3 分钟后，用户 C 请求文件。
10.  系统检查缓存文件是否存在。
11.  缓存文件过期，重新创建，保留5分钟
12.  等等

在高流量站点或数据不太可能更改的应用程序中，这是一种有效的方法，但检查它的资源非常昂贵。

# ios - 强制核心数据更新模型

> ID：12049971
> 
> 赞同：0
> 
> 时间：2012-08-21T07:15:47.147
> 
> 标签：ios, core-data, core-data-migration

我创建了一个基于核心数据的应用程序，用户可以使用 Dropbox 备份和恢复数据库。

现在我更改了模型（新版本），为现有实体添加了几个属性并实现了轻量级迁移。

迁移工作正常，我的问题是当我恢复使用以前的模型创建的数据库时。

如果我杀死应用程序并重新启动轻量级迁移会更新数据库模式，但我想实现一种方法来强制将数据库模式更新到新模型而不杀死应用程序。

有没有办法做到这一点？

谢谢，马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:48:16.793

自动迁移通常发生在 addPersistentStoreWithType:configuration:URL:options:error: 中，通常由 appDelegate 调用。

为什么不直接从持久存储协调器 ( removePersistentStore:error: ) 中删除持久存储并重新添加它；这应该会触发轻量级迁移

# c# - 如何使用 Windows 8 文本服务框架注册 C# 文本服务？

> ID：12049975
> 
> 赞同：3
> 
> 时间：2012-08-21T07:16:05.440
> 
> 标签：c#, text, com, microsoft-metro

我已经开发了一个具有不同布局的键盘（C#），并且还建议在 TextBox 上输入一些单词，但它仍处于应用程序级别，我想将它与 TSF 集成，这使得我的键盘可以通过 Windows 8 使用。我想通了我需要在（进程内服务器）中向 TSF 注册文本服务。我被困在这里，如果你能给我一些指示，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:01:30.877

AFAIK，您不能用自定义实现替换默认触摸键盘。

见... [http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/3c301e8a-a141-499b-b0ee-37c7512a18ab](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/3c301e8a-a141-499b-b0ee-37c7512a18ab)

# php - 在 codeigniter 框架上构建网站时遵循什么好策略

> ID：12049979
> 
> 赞同：0
> 
> 时间：2012-08-21T07:16:17.057
> 
> 标签：php, codeigniter

我研究了几个开源 codeigniter 网站项目，每个项目似乎在应用程序级别都有自己的设计/开发策略。想知道，严格遵守应用程序级别的代码，是否有好的策略可以遵循？例如，对于每个请求都应该在它自己的控制器文件中？就像用户想要登录一样，是否有一个单独的控制器和模型只处理该请求？基本上就组织应用程序代码而言，有哪些有效的策略？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:33:52.483

CodeIgniter 遵循[MVC (Model-View-Controller)](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的原则，尽管它实际上给了你很大的自由来随心所欲地使用它。

简而言之，这就是不同部分应该做的事情：

*   **视图**是用户看到的（HTML/CSS/等）
*   **控制器**是不同的位置/请求/页面（以及应用程序的实际“执行”部分 - 它加载视图并与数据/模型交互）
*   **模型**是与数据交互的部分（在数据库中）

* * *

**示例 1：**

*   用户访问 yourwebsite.com/home
*   `Home`控制器被称为
*   `Home`控制器做任何准备工作并加载适当的视图

**示例 2：**

*   用户想登录
*   他访问 yourwebsite.com/login
*   `Login`控制器被称为
*   有`$_POST`数据集吗？如果不是（这是控制器第一次运行），则加载适当的视图（其中包含表单 - 当用户“提交”登录表单时，将再次调用登录控制器，并设置用户名、密码等这次）
*   如果有给定的用户名、密码等，不要加载任何视图。相反，加载用户模型（其中可能有通过用户名/密码等获取用户 ID 的功能）。如果一切正常，则将会话变量（例如`logged_in`）设置为用户 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:27:57.380

您可以使用 Modular MVC 为您提到的流程构建站点。查看以下链接以获取有关为什么应该使用 HMVC 以及如何使用它的更多详细信息：请参阅：[HMVC CodeIgniter](http://net.tutsplus.com/tutorials/php/hvmc-an-introduction-and-application/)

# apache - 能够记录 SOAP 请求和响应，但如何组合输入/输出？

> ID：12049981
> 
> 赞同：0
> 
> 时间：2012-08-21T07:16:22.190
> 
> 标签：apache, soap, cxf

嗨，我可以记录输入和输出，但我想组合传入和传出的 xml，以便我可以轻松查看组合结果？这将消除手动挖掘日志文件的任务。

为了实现这一点，我已经实现了 2 个拦截器来获取 xml，但我现在看到了将传出 xml 与传入 xml 相关联的方法。

欢迎任何提示或提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:27:04.187

解决方案是在传入拦截器中使用 MessageExchange：

示例：在 inIntereptor -> message.getExchange().put("INPUT_LOG", your_long_string); 在输出拦截器中->类似于 message.getExchange().get("INPUT_LOG")

然后你就可以访问原始的soap xml

# url - 查询字符串解析器逻辑

> ID：12049983
> 
> 赞同：1
> 
> 时间：2012-08-21T07:16:41.570
> 
> 标签：url, query-string

需要从 URL 解析查询字符串。可以观察到，对于示例查询字符串，python 和 Apache STring Tokenizer 给出了不同的输出[解析字符串的顺序不同]示例：

对于查询字符串 q=uri+path+parser&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8

python给出：{'q'：['uri path parser']，'sourceid'：['chrome']，'sugexp'：['chrome，mod = 6']，'ie'：['UTF-8' ]}

Apache active String Tokenizer 给出：

键 [q] 值：[uri+path+parser]

键 [sugexp] 值：[chrome,mod]

键 [sourceid] 值：[chrome]

键 [ie] 值：[UTF-8]

解析结果的顺序不同。想知道 parse_qs 给出不同顺序的原因以及标准查询路径字符串解析逻辑/算法是什么？

# php - 数据库查询失败

> ID：12049989
> 
> 赞同：-1
> 
> 时间：2012-08-21T07:17:18.383
> 
> 标签：php, mysql, database

我有一个问题可能看起来有点愚蠢，因为我已经编程多年并且使用 MySQL 的时间也差不多。

即使语法正确并且提供了所有必需的字段值，插入查询也会失败吗？我只是在考虑这个问题，以防 SQL 服务器忙于处理请求，内存毕竟不是有限的。

采取了哪些安全措施来防止此类故障？我使用了位线程，但是当使用 PHP 执行查询时会发生什么？

由于 PHP 有执行时间限制，如果在 MySQL 处理查询之前达到 mysql_query 的时间限制，查询是否会被丢弃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:20:43.270

除了语法错误之外，MySQL 查询可能由于多种原因而失败。在数据完整性很重要的地方对查询进行检查总是明智的。在 PHP 中，一种方法是使用[mysql_affected_rows()](http://php.net/manual/en/function.mysql-affected-rows.php)。此函数告诉您有多少行受到先前操作的影响。您可以使用此函数作为行是否成功插入、删除、更新等的指示符。

```
mysql_query("UPDATE mytable SET used=1 WHERE id < 10");
printf ("Updated records: %d\n", mysql_affected_rows());
mysql_query("COMMIT"); 
```

# c# - 在 WPF Prism 应用程序中实现键盘绑定的正确方法

> ID：12049990
> 
> 赞同：1
> 
> 时间：2012-08-21T07:17:23.773
> 
> 标签：c#, wpf, mvvm, prism

我的应用程序窗口包含两个区域，即左和右，我已经根据包含按钮和组合框的左区域定义了一个键绑定。当您在应用程序上按下键时，由于聚焦问题，这无法按预期工作，因为我们没有聚焦左侧区域（如果您通过选择组合框将焦点设置在该区域上，效果很好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T10:25:26.013

是的，键绑定仅在查看焦点时起作用。由于您有两个视图，因此一次只能聚焦其中一个。

您可以做的是**在父视图中定义键绑定**并将事件从父视图模型发布到订阅此事件的子视图模型。

但如果问题只是在加载视图时关注左侧区域，您应该在 xaml.cs 文件中订阅**Loaded 事件**并以编程方式设置焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:42:11.223

在导航到“右”区域后，您应该尝试导航到“左”区域内的视图。它应该以简单的方式解决您的问题。如果你不能这样做，那么你可以看看这个[问题](https://stackoverflow.com/questions/1356045/set-focus-on-textbox-in-wpf-from-view-model-c-wpf)。我希望我的回答有帮助:)

# iphone - UIWebView 加载本地图片的时滞

> ID：12049994
> 
> 赞同：3
> 
> 时间：2012-08-21T07:18:00.677
> 
> 标签：iphone, caching, ios5, uiwebview

我是一名创建 iPhone 应用程序的创业者，除了外包编码外，我什么都做。对于以下 iOS 5 实现的简单实用程序应用程序，我将不胜感激。

有一个定制的富文本字段，用户可以在其中输入图像（本地存储，小尺寸：40x44 点）和文本。这被实现为`UIWebView`. 在当前的实现中，每次点击图像后，它都会在 1.5-2 秒延迟（太长）后出现。输入一次后，它会被缓存，下次几乎立即出现。

如此小的图像最多需要 2 秒才能出现是否合理？是否有任何有效的方法可以减少非缓存图像的时间延迟？任何提示都会非常受欢迎。如果有任何聪明的方式来实现这一点，而不是使用`UIWebView`，它也会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T22:51:37.407

我建议您在 webview 中使用 base64 嵌入图像。它会导致 webview 几乎立即像文本一样加载图像。

查看下面的链接，将您的图像转换为 Base64：[http ://www.dailycoding.com/Utils/Converter/ImageToBase64.aspx](http://www.dailycoding.com/Utils/Converter/ImageToBase64.aspx)

并在您的 html 中使用它：http: [//danielmclaren.com/2008/03/embedding-base64-image-data-into-a-webpage](http://danielmclaren.com/2008/03/embedding-base64-image-data-into-a-webpage)

希望能帮助到你。:)