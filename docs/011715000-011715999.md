# StackOverflow 问答 11715000-11715999

# java - 如何解决数据库和应用程序之间的连接

> ID：11715000
> 
> 赞同：0
> 
> 时间：2012-07-30T03:13:26.793
> 
> 标签：java, sql, sql-server-2008, spring, hibernate

目前我正在使用 Spring 进行一个项目，使用 Microsoft SQL 进行休眠，在这个项目中，有一部分用于生成发票。当我运行这部分来生成发票时，大约需要 5 到 15 分钟，然后我从 Db 中检索发票列表并在 UI 中显示它。在它处理大约 7 到 10 分钟后我得到了异常。注意：当我签入 Db 时，发票已经生成。我该如何解决这个问题？

异常如下：

```
org.hibernate.exception.JDBCConnectionException: Cannot open connection
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449) 
```

com.microsoft.sqlserver.jdbc.SQLServerException：与主机 192.168.191.19、端口 1433 的 TCP/IP 连接失败。错误：“地址已在使用：连接。验证连接属性，检查 SQL Server 实例是否正在主机上运行并在端口接受 TCP/IP 连接，并且没有防火墙阻止与端口的 TCP 连接。” .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:58:47.810

我认为驱动程序可能是问题所在。尝试使用 jtds 驱动程序而不是 microsoft 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:59:39.717

检查您的连接 url 模式。这里是示例连接 url 模式。

```
 jdbc:sqlserver://localhost:1433;databaseName=AdventureWorks;integratedSecurity=true; 
```

# php - Android和Postgresql之间通过php连接

> ID：11715004
> 
> 赞同：-1
> 
> 时间：2012-07-30T03:14:05.157
> 
> 标签：php, android, postgresql-9.1

我是android应用程序开发的新手。我给了一个任务来开发一个可以通过 PHP 连接到 PostgreSQL 的 android 项目，该数据库不是本地主机。你们可以帮助我如何进行连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:19:31.237

SO中有很多关于PHP与Android应用程序集成的帖子。您想搜索 Android JSON。这就是我能够将我的应用程序链接到网络上的 MySQL 数据库的方式。PostqreSQL 应该没有什么不同，除了 PHP 查询调用。

您需要做的是编写一个连接到您的 PSQL 数据库并在其上运行查询的 PHP 程序。然后需要将查询格式化为 JSON 数组。下面的示例连接到 mysql 数据库。由于我从未使用过 PostgreSQL，我不确定要查询它的 PHP 代码是什么。不过，您应该能够在 PHP.net 上找到该信息。

```
<?php

 $db = mysql_connect('localhost','mydatabase', 'mypassword');
 mysql_select_db("myDB");

 $TABLE = isset($_POST["table"]) ? $_POST["table"] : "rep_table";
 $q = mysql_query("SELECT * FROM " . $TABLE);
 while($row=mysql_fetch_assoc($q)) {
    $result[]=$row;
}

print(json_encode($result));

mysql_close();

?> 
```

然后，您的应用程序将通过 JSON 接口调用此 PHP 文件，然后您可以解析并从中获取值。

```
public class JSONHelper {

static ArrayList<NameValuePair> mArray = new ArrayList<NameValuePair>();
private static final String TAG = "JSONUpdater";

public String getJSONResult(String url) {

    String result = "";
    InputStream is = null;

    try {
        HttpClient httpclient = new DefaultHttpClient();
        Log.d(TAG, "Client set");
        HttpPost httpPost = new HttpPost(url);
        Log.d(TAG, "Post set");

        if (!mArray.isEmpty()) {
            Log.d(TAG, "mArray is not empty!");
            httpPost.setEntity(new UrlEncodedFormEntity(mArray));
        } else {
            Log.d(TAG, "mArray is SO empty!!");
        }

        HttpResponse response = httpclient.execute(httpPost);
        Log.d(TAG, "response executed");
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch(Exception e) {
        Log.d("ScoreCard",e.toString());
    }

    //Retrieve the JSON data
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
                Log.d(TAG, line);
            sb.append(line + "\n");
        }

        is.close();
        result=sb.toString();

    }catch(Exception e){
        Log.e("Scorecard", "Error converting result "+ e.toString());
        return result;
    }

    //Hopefully returning a string that can be converted to a JSON array...
    return result;

}
} 
```

不想让信息超载你，因为它可能会让人不知所措。试试这个作为起点，看看你是否能到达你需要的地方。如果没有，请告诉我。如果可以的话，我会尽力帮助你。

# javascript - `module.exports.instance` 是什么意思？

> ID：11715010
> 
> 赞同：2
> 
> 时间：2012-07-30T03:14:32.490
> 
> 标签：javascript, node.js

有时我看到人们`module.exports.instance`在他们的代码中使用（[示例](https://github.com/TrevorBurnham/connect-assets/blob/master/src/assets.coffee#L32)）。这与 有何不同`module.exports`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:23:12.657

字面上的区别在于，它`module.exports.instance`是 . 引用的对象的属性`module.exports`。

为什么使用名为 的属性`instance`？一种可能性是应用[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)来[解决模块之间的循环依赖问题](https://stackoverflow.com/a/10872988/161152)。

# visual-studio-2012 - 如何在 TFS 2012 RC 签入前强制进行代码审查？

> ID：11715017
> 
> 赞同：17
> 
> 时间：2012-07-30T03:15:16.700
> 
> 标签：visual-studio-2012, tfs, tfs-code-review

我刚刚安装了 TFS 2012 RC 和 Visual Studio 2012 RC。我看到了一些有趣的恐惧：代码审查，签入前建立成功。但事实并非如此！所以我的问题是：

1.  如何在 TFS 2012 RC 签入前强制进行代码审查？
2.  如何强制“构建”签到政策（不是门控签到）？
3.  “Builds”签到政策和“Gated Check-in”有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T20:40:04.357

1) 在团队资源管理器中，转到“设置”部分。选择“源代码管理”。弹出窗口时，选择“签入策略”选项卡。单击“添加”并选择您需要的选项。

2) 创建一个新版本。在“触发器”选项卡上，更改为“持续集成”。这将在每次签入时强制构建。

3) 门控签入需要成功构建才能签入。持续集成 (CI) 在签入时构建（这两个选项都可以在构建设置的触发器选项卡上找到，实际上您可以在不同的构建上同时拥有这两个选项） 门控签入基本上会将您的签入存储为变更集，在其上运行构建，如果构建失败则拒绝签入。CI 检入您的代码并运行构建，这可能会失败，也可能不会失败。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-06T15:50:59.017

您可以在 Visual Studio 中安装几个 Code Review 签入策略并为您的团队项目进行配置。这些将强制在您签入更改之前将代码审查工作项链接到更改：

*   适用于 Visual Studio 的 Colin 的 ALM 签入策略包
    *   [2017](https://marketplace.visualstudio.com/items?itemName=ColinD.ColinsALMCheckinPoliciesVS2017)
    *   [2015](https://marketplace.visualstudio.com/items?itemName=ColinD.ColinsALMCheckinPoliciesVS2015andVSO)
    *   [2013](https://marketplace.visualstudio.com/items?itemName=ColinD.ColinsALMCheckinPoliciesforVS2013andVSO)
    *   [2012](https://marketplace.visualstudio.com/items?itemName=ColinD.ColinsALMCheckinPoliciesforVS2012)

[![在此处输入图像描述](../Images/3cb951f151c423bd65e6da6e147b29e9.png)](https://i.stack.imgur.com/7CEdl.png)

# java - 加密和解密 (java)

> ID：11715019
> 
> 赞同：2
> 
> 时间：2012-07-30T03:15:24.780
> 
> 标签：java, encryption

已改编此代码 - [http://www.roseindia.net/answers/viewqa/Java-Beginners/7551-encryption-and-decryption.html](http://www.roseindia.net/answers/viewqa/Java-Beginners/7551-encryption-and-decryption.html)

但我有一些错误。在 (str) 上，它一直说要启动变量。当我把它改正为

字符串 st,str = null;

并运行，它给了我“错误：无法找到或加载主类 tryoutEncryption.encryptingfile”

包试用加密；

```
import java.io.*;
import java.security.*;
import javax.crypto.*;

class EncryptAndDecrypt {

public static void main (String[] args) throws Exception{
KeyPairGenerator keygenerator = KeyPairGenerator.getInstance("RSA");
SecureRandom random = SecureRandom.getInstance("SHA1PRNG", "SUN");
keygenerator.initialize(1024, random);

KeyPair keypair = keygenerator.generateKeyPair();
PrivateKey privateKey = keypair.getPrivate();
PublicKey publicKey = keypair.getPublic();
Cipher cipher = Cipher.getInstance("RSA");

cipher.init(Cipher.ENCRYPT_MODE, publicKey);
BufferedReader br=new BufferedReader(new FileReader(new File("C:\\Users\\Desktop\\testing.txt")));
String st,str;
while((st=br.readLine()) != null)   {
    str+=st+" ";
}

byte[] cleartext = null;
cleartext = str.getBytes();
byte[] ciphertext = null;
ciphertext = cipher.doFinal(cleartext);
System.out.println("the encrypted text is: " + ciphertext.toString());

cipher.init(Cipher.DECRYPT_MODE, privateKey);
byte[] cleartext1 = cipher.doFinal(ciphertext);
System.out.println("the decrypted cleartext is: " + new String(cleartext1));
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:57:16.987

*它给了我“错误：无法找到或加载主类 tryoutEncryption.encryptingfile”*

这给我的印象是您的问题在于您尝试启动程序的方式。您的班级名称是`EncryptAndDecrypt`，但错误表明您正在指定`encryptingfile`。

另外，一个批评：
让你的`main`方法声明抛出的异常通常是一种不好的做法。您应该始终练习设置 try/catch 块并了解您正在编写的代码会引发哪些类型的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:48:14.223

你当然想要：

```
String st;
String str = ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:48:04.323

@你好我试过你的代码，它对我来说很好。请提供您获得的异常跟踪，以便我们为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T04:01:22.667

对于错误“错误：无法找到或加载主类 tryoutEncryption.encryptingfile”，这意味着您拼错了需要在`java`命令中运行的 java 类（如果这是来自命令行），或者您正在使用一些IDE 中损坏的运行时配置（如果您正在使用）。

此外，在一行中声明两个变量是非常糟糕的风格。有些人可能会鼓励它以节省您需要键入的代码量并减少行数，但这样做可能会导致难以检测的错误，例如未初始化的变量。另外，我认为在一行中声明多个变量是难以阅读的代码（太混乱了）。根据您的情况，我建议：

```
String st = "";
String str = ""; 
```

或者，不要`st`初始化，因为它将由`br.readLine()`调用设置。由你决定。我更喜欢将我声明的所有字符串设置为“”以避免 NullPointerExceptions……但我*通常*只这样做，这取决于我的情况。`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-06T12:25:55.187

公开类并将空值分配给 String

```
import java.io.*;
import java.security.*;
import javax.crypto.*;

public class EncryptAndDecrypt
{

    public static void main(String[] args) 
    {
        try{
        KeyPairGenerator keygenerator = KeyPairGenerator.getInstance("RSA");
        SecureRandom random = SecureRandom.getInstance("SHA1PRNG", "SUN");
        keygenerator.initialize(1024, random);

        KeyPair keypair = keygenerator.generateKeyPair();
        PrivateKey privateKey = keypair.getPrivate();
        PublicKey publicKey = keypair.getPublic();
        Cipher cipher = Cipher.getInstance("RSA");

        cipher.init(Cipher.ENCRYPT_MODE, publicKey);
        BufferedReader br = new BufferedReader(new FileReader(new File("C:\\Users\\Desktop\\testing.txt")));
        String st="", str="";
        while ((st = br.readLine()) != null)
        {
            str += st + " ";
        }

        byte[] cleartext = null;
        cleartext = str.getBytes();
        byte[] ciphertext = null;
        ciphertext = cipher.doFinal(cleartext);
        System.out.println("the encrypted text is: " + ciphertext.toString());

        cipher.init(Cipher.DECRYPT_MODE, privateKey);
        byte[] cleartext1 = cipher.doFinal(ciphertext);
        System.out.println("the decrypted cleartext is: " + new String(cleartext1));
        }catch(Exception e){e.printStackTrace();}
    }

} 
```

# java - MonitorEnter 操作是否耗时？

> ID：11715022
> 
> 赞同：0
> 
> 时间：2012-07-30T03:15:42.147
> 
> 标签：java, android, java-native-interface, dalvik

我不是在谈论进入同步块的时间。我说的是执行 MonitorEnter 和 MonitorExit 语句的时间。而且，我如何测量在 C(JNI) 中执行语句所需的时间？我正在使用 Eclipse 和 OSX 开发 Android 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:42:45.967

在处理无竞争锁时，当前版本的 Dalvik 使用了快速路径，避免了重量级线程同步操作。就速度而言，它可能与调用一个用 Java 编程语言编写的、受 CPU 限制的简短方法大致相同。

如果锁是有争议的（即，两个或更多线程正在与之交互），那么这最终会成为一个更重的操作，作为对底层操作系统线程库的调用，VM 触底。也就是说，通常预计执行重量级线程操作所花费的时间将由被锁定的实际活动所支配（因为如果活动不是相对长时间运行，那么您就不太可能有有争议的锁定第一名）。

与往常一样，分析可以帮助您弄清楚这一切。

如果您想深入了解，可以`platform/dalvik/vm/Sync.cpp>`在 Android 源代码中找到显着代码。寻找`dvmLockObject`，尽管您必须深入了解 JIT 编译器代码才能获得更完整的故事。

# xml - 需要有关如何编写测试用例的建议

> ID：11715023
> 
> 赞同：0
> 
> 时间：2012-07-30T03:16:04.190
> 
> 标签：xml, testing

我今天已经开始写一些测试用例，在这里我非常感谢一些建议。我必须在我的 INI 文件中更改一些 XML 标记。假设我有一个 XML 属性，它可以是“TRUE”或“FALSE”。该属性可以应用于两个不同的标签

```
<TestOneDir name="xxx" att="TRUE"/>
<TestOneDir name="xxx" att="FALSE"/>
<TestTwoDir name="xxx" att="TRUE"/>
<TestTwoDir name="xxx" att="FALSE"/> 
```

这两个标签在同一个测试脚本中。我编写了测试用例来分别测试每个条件，但我想知道是否应该测试合并条件，例如 TestOneDir 为真，TestTwoDir 为假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:57:06.630

测试不是非黑即白的，所以对您的问题的回答是“视情况而定”。通常，组合可能会导致测试单个参数时未发现的问题，但您必须评估这种可能性有多大，以及为此测试是否值得。您必须始终限制测试用例的数量，但这只是在哪里划界的问题。

这些条件是相关的还是独立的？您认为组合可能会导致问题吗？将来是否需要对此进行重构？如果系统在这种情况下无法正常工作，会发生什么最糟糕的情况？如果添加这些案例，运行测试需要多长时间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:37:29.053

我不是测试专家（尽管“测试”在我的正式职称中 - 不要问），但是通过测试，您希望确保完整的代码覆盖率：也就是说，您的所有测试组合应该确保每条路径执行您的程序可以遵循的。您可以获得一些工具，可以向您显示测试的“代码覆盖率”范围。

但是，如果您只想对代码进行黑盒测试，那么它有助于将您的程序简化为数学关系：定义的输入和相应的预期输出，那么只需为范围生成输入（分组为等价类）即可程序的域，然后将程序的输出（在抽象意义上）与预期的输出进行比较。

就您而言，您的问题确实没有提供太多细节。你没有描述你的程序做了什么，你正在测试什么，甚至你为什么用 XML 而不是代码来声明测试。为了提供更多帮助，我需要更多信息和细节。

# html - 建立在 wordpress.org 网站之上？

> ID：11715025
> 
> 赞同：-1
> 
> 时间：2012-07-30T03:16:43.370
> 
> 标签：html, css, wordpress, content-management-system

我只知道html和css。我应该建立在 wordpress 网站之上，以便我可以重用当前的 CMS，还是应该从头开始构建网站并稍后添加 CMS 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:14:46.680

这取决于您需要什么功能以及什么时候可以使用。我同意 Brendan 的观点，您将从头开始自己构建它。不过，任何事情都可以这样说——想想在从头开始建造自己的房子和汽车之后，你对建筑和机械工程的了解有多少。

使用开源工具和平台将使您能够更快地启动和运行一个工作站点。如果您花时间学习该系统，而不是仅仅抓住一个主题并粉碎大量插件，那么它将使您有利于最终构建自己的东西。只是我的2c。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T07:53:10.490

如果您只知道 html 和 css，请在 wordpress 之上工作。您可以在 Wordpress.org 上拥有帐户，但他们不允许对网站进行重大更改。

分步指南将是：

1.  在您的服务器上安装 wordpress 包。
2.  寻找免费主题和

3.  安装在您的服务器上使用编辑器修改主题，如果出现问题重新安装主题。

4.  安装插件以增强网站体验。

我的网站就是这样工作的，继续试验，wordpress 很有趣。:)

# html - 页面底部的 chrome 空间，但不是本地的

> ID：11715026
> 
> 赞同：0
> 
> 时间：2012-07-30T03:16:51.843
> 
> 标签：html, css, google-chrome

在 Chrome（osx 10.7.4）中，我的页面底部有一个空白区域[http://presstube.com/vandalized-notes/](http://presstube.com/vandalized-notes/)

我通常会认为这只是一些糟糕的 css，但我在狩猎中注意到了 3 件奇怪的事情。

1.  这只发生在网上..本地空间不存在！什么？
2.  当我使用检查器时，看起来空间发生在 html 之外
3.  当我一直滚动到底部，然后重新加载时，浏览器的滚动会在该空间上方重置。

这是网上的截图： ![页面底部的空间，仅在 chrome online 中显示](../Images/383d7f26a5b389a48d5cb4fc55fa4f30.png)

这是它在本地的屏幕截图： ![在此处输入图像描述](../Images/8751ecc61c13977e2c08d17349fa6c8c.png)

如果有人能提供一些启发，我将不胜感激！

谢谢，-j

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:29:23.347

啊！在浪费了很多时间之后，我发现这是一些恶意软件 Chrome 扩展程序已经潜入。所谓的“快速保存”。

如果你有这个，去看看你的 chrome 扩展并寻找任何肮脏的东西并将其丢弃。

明显的迹象是，在我的控制台中，我有很多看起来很可疑的 js 活动正在进行。我用谷歌搜索了它试图访问的服务器之一，并发现了一些 chrome 文档警告这些讨厌的扩展。

希望这可以帮助那些正在撕裂他们完美的 html/css 以在他们的布局中寻找奇怪的神秘空间的人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T03:31:11.623

您的班级`.footy`已`padding-bottom`设置为`80px`。更改此项以更改底部的空间。

# virtualization - guestOS 进程在任何给定时间占用 VCPU？

> ID：11715030
> 
> 赞同：0
> 
> 时间：2012-07-30T03:17:06.903
> 
> 标签：virtualization, kvm

最近我一直在研究一些关于硬件支持的虚拟化的东西。

我读到了主机 cpu 的 3 种状态，因此是最常见的用户空间、内核空间和新来宾状态。正如我从 ps 命令中看到的那样，我启动的 vm 有一个进程，还有一些“子”线程用于虚拟机拥有的每个cpu。另外我注意到当vm运行一些与io相关的程序时，主机上会创建更多的线程，我猜这可能是qemu对硬件仿真的响应。

所以我的问题来了：对于任何特定时间（客户状态的时间，而不是其他两个时间），一个 vcpu 线程是否代表一个正在运行的客户操作系统进程（我的意思是“占用”和“独占”）？就像物理 cpu 一样，对于用户空间中的任何给定时间，用户进程都在其上运行。这可能听起来有点愚蠢，我只是想弄清楚它以供进一步研究。

为了让这个问题变得简单：在主机上运行的 vcpu 线程是否在任何给定时间与某个 guestOS 进程相关联？

进一步简化：当我说guestOS进程实际上直接在主机CPU上运行并作为普通主机进程调度时是否正确？这两种进程之间的区别就是我们所说的虚拟化？

也许我需要另一个线程来解决一些关于guestOS进程切换的问题，但在此之前，希望你们能帮助我解决这个问题。

真诚的MeNok

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T15:47:40.937

VCPU 不是主机中的线程。KVM 允许 guest 以较低权限的 guest 模式直接在物理 CPU 上运行。定时器中断将导致 CPU 从访客模式返回到主机模式并返回 KVM。由于 KVM 是在内核模式下调度的，因此也应该在主机中调度来宾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T07:00:03.043

我在LQ上发布了这个问题并得到了答案。 [http://www.linuxquestions.org/questions/linux-virtualization-90/a-guestos-process-occupies-vcpu-at-any-given-time-4175419271/](http://www.linuxquestions.org/questions/linux-virtualization-90/a-guestos-process-occupies-vcpu-at-any-given-time-4175419271/)

# grails - 如何检查列表在grails中是否具有相同的值？

> ID：11715031
> 
> 赞同：1
> 
> 时间：2012-07-30T03:17:38.910
> 
> 标签：grails, groovy

我目前正在从事一个 grails 项目，我需要将我的查询结果合并到一个列表中。问题是，在某些情况下，我的查询结果返回相等的值，这会导致错误消息：**具有相同标识符值的不同对象已与会话关联**

这是我的代码：

```
List permissions = []
            cmd?.role.each{ role ->
                permissions.add(RolePermission.executeQuery("select distinct rp.permission from RolePermission rp where rp.role = ?",[Role.get(role.toLong())]))
            } 
```

这里的对象角色可能包含两个不同的角色名称，在某些情况下，这些角色名称中存在的权限是相同的。

我将如何修改我的查询以使我只能从结果中获取唯一值？我尝试过使用 distinct，但没有奏效。

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:43:00.670

我不确定这是否是您想要做的，但根据您的描述，我认为就是这样。以下行的作用是遍历您传入的角色（我假设这些是语法中的角色 ID），并且对于每个角色 ID，它都会为该角色找到一个 RolePermission。找到的每个权限都作为权限列表添加。所以，最后你应该有一个 RolePermissions 列表。

现在，我不明白的是您正在寻找的独特性。您是说一个 Role 可以返回多个 RolePermission 并且您试图确保返回的 RolePermissions 在最终列表中是唯一的？如果是这样，您可以将列表作为一个集合返回（即，将权限作为集合返回）。请让我知道我的理解不足的地方。

```
def permissions = cmd?.role.collect{RolePermission.findByRole(Role.get(it.toLong()))}
return permissions as Set 
```

或者，您可以使用标准：

```
def c = RolePermission.createCriteria()
def results = c.listdistinct () {
  roles {
    'in'("id", cmd?.role as List) 
  }
} 
```

我没有通过编译器运行它，但它应该可以工作。

# vb.net - vb.net 声明和初始化

> ID：11715043
> 
> 赞同：0
> 
> 时间：2012-07-30T03:19:08.847
> 
> 标签：vb.net

这两种声明和初始化方式有什么区别吗？

```
Dim con as New OracleConnection(connstr)
con=Nothing

Dim con as OracleConnection
con=New OracleConnection(connstr)
con=Nothing 
```

更新：Dim con as OracleConnection = New OracleConnection(connstr)

相当于？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:21:50.007

他们没有区别。但是您仍然可以简化您的声明

```
Using con As New OracleConnection(connstr)
   ' other codes here
End Using 
```

该`Using`语句在对象被使用后自动释放它。

[**也见这里**](http://www.pcreview.co.uk/forums/differences-declaration-and-instantiation-coding-t1394274.html)

**更新 1**

这个直接分配内存是因为`NEW`关键字：

```
Dim con as New OracleConnection(connstr)   ' declaration and allocating in the memory
con = Nothing                              ' disposes the object 
```

`NEW`在提供关键字之前， this 不会分配内存。

```
Dim con as OracleConnection          ' declaration only
con = New OracleConnection(connstr)  ' allocates memory
con = Nothing                        ' disposes the object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T03:32:12.453

VB`Dim foo As New bar`是语法糖和简写：

```
Dim foo As Bar
foo = New Bar() 
```

从这个意义上说，它相当于 VB 的 C#`var`关键字（除非没有编译器类型推断）：

```
var foo = new Bar(); 
```

请注意，在使用局部变量后，您不需要`Nothing`在 VB 中设置它们，因为它们会在超出范围后自动被释放/最终确定。先发制人地设置变量`Nothing`是 VBScript 的一个惯用习惯，您需要使 COM 对象无效以减少它们的引用计数以便它们被释放，您不需要在 VB.NET 中执行此操作。

# soundcloud - 如何在不使用用户连接流的情况下以 Javascript 录制音频并上传到 SoundCloud？

> ID：11715045
> 
> 赞同：0
> 
> 时间：2012-07-30T03:19:19.267
> 
> 标签：soundcloud

```
def upload(request):
    import soundcloud

    # create client object with app and user credentials
    client = soundcloud.Client(client_id='YOUR_CLIENT_ID',
                               client_secret='YOUR_CLIENT_SECRET',
                               username='YOUR_USERNAME',
                               password='YOUR_PASSWORD')

    # upload audio file
    track = client.post('/tracks', track={
        'title': 'This is my sound',
        'asset_data': request.POST.get('sound_data')
    })

    # print track link
    print track.permalink_url

    return HttpResponse('Successfully uploaded') 
```

我正在尝试使用 python 层来存储我的凭据并将声音数据上传到 SoundCloud，但是，这些示例假设我有一个 mp3 或类似的声音文件，而不是 ByteArray（SoundCloud JS SDK 构建的）。

基本上，我希望人们来到一个页面，录制音频并将其上传到 MY SoundCloud 帐户。我相信如果我的格式正确，上述方法可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:12:42.893

如果你弄清楚了，你能告诉我吗？仍在等待声音云允许使用 api 而无需附加到已登录的声音云用户。

# java - Hibernate 中稍微复杂的多对多关系

> ID：11715047
> 
> 赞同：0
> 
> 时间：2012-07-30T03:19:39.377
> 
> 标签：java, database, hibernate, orm

我的数据库中有以下表：表：实体表：国家加入表：国家实体

这是实体和国家之间的多对多关系，我在 Entity.hbm.xml 中这样定义：

```
<set name="country" table="countries_entities" cascade="all">
   <key column="entity_id" />
      <many-to-many column="country_id" class="pikefin.hibernate.Country" />
</set> 
```

以下是连接表 countries_entities 的结构：

![截屏](../Images/d2c28338ab29a8340f3eac467b2111b0.png)

default_country 字段用于在实体与多个国家/地区关联时指定默认国家/地区。我的问题是，我在hibernate中表示这个的合适方式是什么？我想蛮力的方法是使用 CountryEntity.hbm.xml 的配置文件创建一个全新的映射，但我认为通过以某种方式扩展现有的多对多关系可能会有更优雅的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:34:41.153

I've found that when you want additional fields, it's helpful to create a secondary class to represent the association:

```
@Embeddable
public class CountryAssociation {
   ...
   private Country country;

   ...
   private boolean defaultCountry;
} 
```

And then use @ElementCollection:

```
 @ElementCollection
 @CollectionTable(name = "country_entities", joinColumns = @JoinColumn(name = "entity_id"))    
 private Set<CountryAssociation> countries; 
```

I'd also get rid of the id field in the association, as it's not really needed with this type of mapping.

My XML mapping is a little rusty, but you can represent this mapping in xml as well.

I believe the xml would be something like this:

```
<set name="countries" table="country_entities">
  <key column="entity_id" />
  <composite-element class="CountryAssociation">
      <property name="country" />
      <property name="defaultCountry" />
  </composite-element>
</set> 
```

# bash - shell 脚本在不传递任何必需参数的情况下执行

> ID：11715049
> 
> 赞同：1
> 
> 时间：2012-07-30T03:20:26.307
> 
> 标签：bash, shell

我需要帮助找出我的脚本中的一个问题，选项（c、e、d、f 和 g）是我的脚本中的强制选项，它们在运行我的脚本之前总是隐含的，否则脚本将不会被执行。现在我添加了一个命令，如果我试图在没有任何必要参数的情况下执行我的脚本，它仍然会被执行并退出，我的脚本不应该在不传递任何必需参数的情况下执行，但它仍然会执行并退出. 我怎样才能解决这个问题？

先感谢您，

```
#!/bin/bash

cont=false

options=':c:d:e:f:g:h:i' # additional option characters go here
while getopts $options option
do
    case $option in
        c  ) cont=true;;
        d  ) hello="$OPTARG"
        e  ) hi="$OPTARG"
        f  ) Fri="$OPTARG"
        g  ) Sat="$OPTARG"
        h  ) SUN="$OPTARG"
        i  ) ....so on
        # more option processing can go here

    esac
done

shift $(($OPTIND - 1)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:34:05.327

由于选项前面有一个冒号，因此*您*有责任处理错误情况。

来自`help getopts`：

> 如果 OPTSTRING 的第一个字符是冒号，getopts 使用静默错误报告。在此模式下，不会打印任何错误消息。如果看到无效选项，getopts 会将找到的选项字符放入 OPTARG。如果没有找到所需的参数，getopts 会在 NAME 中放置一个 ':' 并将 OPTARG 设置为找到的选项字符。

您必须处理`$option`contains的情况`:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T04:03:53.870

使用`mandatory`包含必需选项的数组并将数组元素设置`-`为给定选项，下面的代码报告未指定强制选项的错误：

```
mandatory=(c d e f g)
options=':c:d:e:f:g:h:i'
while getopts $options option
do
  for ((i = 0 ; i < ${#mandatory[@]} ; i++ )); do
    [[ $option == ${mandatory[$i]} ]] && mandatory[$i]="-"  
  done
  case $option in
      c  ) echo c; cont=true;;
      d  ) hello="$OPTARG";;
      e  ) hi="1"
  esac
done

for ((i = 0 ; i < ${#mandatory[@]} ; i++ )); do
  if [[ ${mandatory[$i]} != '-' ]]; then
    echo "option ${mandatory[$i]} was not given"
    exit 1
  fi
done

if cat /proc/mounts | grep /dev ; then echo "mount exists
   else
   echo "mount doesn't exist"
   exit ; 
fi 
```

# c# - IronRuby 需要一段时间才能加载。这是正常的吗？

> ID：11715054
> 
> 赞同：0
> 
> 时间：2012-07-30T03:22:07.247
> 
> 标签：c#, ironruby

偶然发现 IronRuby 并认为它很有趣。决定试一试。

我有一些我想分发的 ruby​​ 脚本。但是，我的听众可能在他们的系统上安装了也可能没有安装 ruby​​，但他们会安装 .net，所以我想我只需将 C# GUI 与 Iron ruby​​ dll 捆绑在一起，这样他们就可以运行这些 ruby​​ 脚本而无需必须安装红宝石。而且我还可以利用在 C# 中制作 GUI。

所以我决定通过简单地运行一个文件来测试它

```
ScriptEngine engine = Ruby.CreateEngine();
engine.ExecuteFile("hello_world.rb"); 
```

`hello_world.rb`包含一行

```
3.times { p 'hello' } 
```

然后我让我的应用程序运行并等待......
几秒钟后，它打印`hello`到控制台 3 次。

那个红宝石引擎应该需要很长时间吗？我想我可以启动引擎，然后让它在程序期间运行，但是不得不等待它启动可能会很无聊。

我正在使用为 .net 2.0 构建的 IronRuby 1.0，如果它有所作为（我没有尝试过 1.1，但它是为 .net 4 做广告的，我不想使用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:29:08.957

它可能只是一开始就编译所有内容的 JIT。如果您想对此进行测试，请在 hello world 之后立即执行不同的脚本，它应该会立即打印到控制台。

# php - 合并和覆盖两个或多个多维数组

> ID：11715055
> 
> 赞同：1
> 
> 时间：2012-07-30T03:22:37.647
> 
> 标签：php, multidimensional-array, overwrite, array-merge

如何使用 array_merge_recursive 合并和覆盖具有相同键和值的多维数组？假设我有两个数组，如下所示：

```
$arr1 = array(       
   // OVERWRITE
   array('prop_id' => 1, 'prop_value' => 'batman'),
   array('prop_id' => 2, 'prop_value' => 'ironman'),
   // NOT OVERWRITE
   array('prop_id' => 5, 'prop_value' => 'wonderwoman'),
);

$arr2 = array(
   array('prop_id' => 1, 'prop_value' => 'robin'),
   array('prop_id' => 2, 'prop_value' => 'superman'),
   array('prop_id' => 4, 'prop_value' => 'catwoman'),
); 
```

我想合并并用新值覆盖它（规则是比较键与它不覆盖的相同值），预期结果是

```
 $result = array_merge_overwrite($arr1, $arr2, array('prop_id') /* Comparison Key */);
 $result = array(       
   array('prop_id' => 1 /* Comparison Key */, 'prop_value' => 'robin' /* Comparison value */),
   array('prop_id' => 2, 'prop_value' => 'superman'),
   array('prop_id' => 4, 'prop_value' => 'catwoman'),
   array('prop_id' => 5, 'prop_value' => 'wonderwoman'),
); 
```

使用 array_merge_recursive 它附加没有被覆盖，我尝试使用 array_replace_recursive，如下所示：

```
$result = array_replace_recursive(
    array(
       1 => array('prop_id' => 1, 'prop_value' => 'batman'),
       2 => array('prop_id' => 2, 'prop_value' => 'ironman'),
       5 => array('prop_id' => 5, 'prop_value' => 'wonderwoman'),
    ),
    array(
       1 => array('prop_id' => 1, 'prop_value' => 'robin'),
       2 => array('prop_id' => 2, 'prop_value' => 'superman'),
       4 => array('prop_id' => 4, 'prop_value' => 'catwoman'),
    ),
); 
```

它可以工作，但我的代码看起来又脏又脏。任何比我更好的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:46:48.590

这是一个可以按照您的描述工作的功能：

```
function array_merge_overwrite($arr1, $arr2, $uniques=array('prop_id'), $delimiter='-')
{
    $result = array();
    $uk = array();
    foreach($arr1 as $a1)
    {   
        $uk = array();
        foreach($uniques as $u) $uk[] = $a1[$u];
        $result[implode($delimiter, $uk)] = $a1;
    }   

    foreach($arr2 as $a2)
    {   
        $uk = array();
        foreach($uniques as $u) $uk[] = $a2[$u];
        $result[implode($delimiter, $uk)] = $a2;
    }   
    return $result;
} 
```

如果通过`$arr1`并`$arr2`按照问题中的定义，上述函数将返回一个数组：

```
Array
(
    [1] => Array
        (
            [prop_id] => 1
            [prop_value] => robin
        )

    [2] => Array
        (
            [prop_id] => 2
            [prop_value] => superman
        )

    [5] => Array
        (
            [prop_id] => 5
            [prop_value] => wonderwoman
        )

    [4] => Array
        (
            [prop_id] => 4
            [prop_value] => catwoman
        )

) 
```

当然，如果你总是并且只使用`prop_id`作为唯一元素，那么这个函数可能会更简单一些：

```
function array_merge_overwrite($arr1, $arr2)
{
    $tmp = array();
    foreach($arr1 as $a1) $tmp[$a1['prop_id']] = $a1['prop_value'];
    foreach($arr2 as $a2) $tmp[$a2['prop_id']] = $a2['prop_value'];
    $result = array();
    foreach($tmp as $k=>$v) $result[] = array('prop_id'=>$k, 'prop_value'=>$v);
    return $result;
} 
```

后面这个函数中返回数组的唯一区别是元素数组的键将是标准数值而不是匹配`prop_id`s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:33:47.103

正如我所看到的，您希望保留第二个数组元素，以防第一个数组和第二个数组的键匹配。

PHP 手册说： **如果您想将第二个数组中的数组元素附加到第一个数组，同时不覆盖第一个数组中的元素并且不重新索引，请使用 + 数组联合运算符：**

```
<?php
$array1 = array(0 => 'zero_a', 2 => 'two_a', 3 => 'three_a');
$array2 = array(1 => 'one_b', 3 => 'three_b', 4 => 'four_b');
$result = $array1 + $array2;
var_dump($result);
?> 
```

**第一个数组中的键将被保留。如果两个数组中都存在数组键，则将使用第一个数组中的元素，而忽略第二个数组中匹配键的元素。**

输出/输出

```
array(5) {
  [0]=>
  string(6) "zero_a"
  [2]=>
  string(5) "two_a"
  [3]=>
  string(7) "three_a"
  [1]=>
  string(5) "one_b"
  [4]=>
  string(6) "four_b"
} 
```

更多细节看[这里](http://php.net/manual/en/function.array-merge.php)

# c++ - 如何使用 C++/WinAPI 获取在 Windows 7 中按住 Shift 键拖动到固定图标上的文件夹的文件路径

> ID：11715056
> 
> 赞同：2
> 
> 时间：2012-07-30T03:22:54.510
> 
> 标签：c++, winapi, windows-7, drag-and-drop, taskbar

比如说，如果我将我的应用程序固定在 Windows 7 的任务栏上，然后按住 shift 键将文件拖动到其图标中（鼠标变为“打开方式”提示），然后如果我释放该文件，它将使用我的应用程序打开——文件路径在应用程序的命令行中提供。

我似乎无法弄清楚，如果我按住 Shift 键拖动文件夹，如何让它工作？在这种情况下，尽管鼠标也显示“打开方式”，但不会调用我的应用程序。

PS。我正在使用 C++/MFC 和 WinAPI 进行编码。

# command-line-interface - Apache Commons CLI-选项的参数名称有什么用？

> ID：11715057
> 
> 赞同：0
> 
> 时间：2012-07-30T03:23:00.283
> 
> 标签：command-line-interface, apache-commons

我正在熟悉 Apache Commons CLI 库。OptionBuilder 具有此功能，您可以在其中指定选项的 arg 名称。我不清楚你需要一个 arg 名称的情况。任何见解都是有价值的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:12:01.753

“参数名称”仅用于创建帮助文本。对该`getArgName()`方法的唯一调用来自`HelpFormatter`类。

# c# - 钱+字符的SQL数据类型

> ID：11715058
> 
> 赞同：0
> 
> 时间：2012-07-30T03:23:46.243
> 
> 标签：c#, sql, sql-server, sql-server-2008, crystal-reports

我是使用水晶报表和 C# 创建报表的新手。我创建了显示客户津贴的 ac# 程序。我现在唯一的问题是一个字段没有显示我想要的内容。我的 sql 中有一个具有“varchar”数据类型的表，因为我希望它显示带有文本的数字。我的问题是，当一个值有千位分隔符时，它不会放逗号。我想要的是将我的值显示为**25,000/day**而不是**25000/day**。有可能做到这一点吗？我应该使用什么数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T03:34:51.497

SQL Server 中没有支持您要求的数据类型。

更好的方法是`decimal`为您的数字使用一个单独的列，为您的文本部分使用一个单独的列，即`/day`. 这将帮助您在小数字段上运行需要平均值、最小值、最大值的查询。稍后您可以在 C# 中为您的报告设置格式。

但是，如果您不能更改数据库，那么您可以根据字符“/”在 c# 中拆分字符串，然后您可以使用 ToString() 用逗号格式化数字。以下几行：

```
 string str = "25000/day";
    string[] tempArray = str.Split('/');
    double number = 0;
    if(double.TryParse(tempArray[0],out number))
    {
        Console.WriteLine("Invalid Number");
    }
    Console.WriteLine(number.ToString("###,###.#######") + "/" + tempArray[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:30:38.173

不能将其存储为小数并在显示时使用[ToString进行格式化](http://msdn.microsoft.com/en-us/library/fzeeb5cd.aspx)

```
string display = value.ToString("N") + "/day"; 
```

仅存储小数将占用更少的空间，如果您需要，您可以稍后轻松地在该字段上进行计算

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T03:39:01.067

尝试使用 string.Format() 方法对其进行格式化。

```
string disp = String.Format( "{ 0:C}", Convert.ToInt32(value.split(@"/")[0])) + @"/" + value.split(@"/")[1]; 
```

其中 value 是您需要显示的值（即“25000/天”）

HTH。

# bash - GZIP 多个文件到 1 个文件 gz

> ID：11715059
> 
> 赞同：0
> 
> 时间：2012-07-30T03:24:04.260
> 
> 标签：bash, shell, unix

我想将所有超过 30 天的文件备份到 1 个存档文件中。

我尝试使用这个脚本：

```
#!/bin/bash

# Find all files that older than 30 days and store it into backup.tar.gz
find ~/Algorithm/test/PDF -mtime +30 -exec tar czvf backup.tar.gz {} \; 
```

但不幸的是，它只备份了最后一个文件而不是所有文件，我发现上面的脚本只是将 backup.tar.gz 首先替换为最后一个文件。

如果我的脚本缺少某些内容，请告知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T03:38:46.447

当您使用 a`\;`终止 find -exec 时，它会为每个文件运行一次该命令。因此，您多次运行 tar，每次都创建一个包含单个文件的 tar 文件，并且每个文件都覆盖了前一个文件。

将更改`\;`为 a`+`并 find 会将多个文件分组到 exec 命令的一次运行中，因此它会工作得更好一些，但会有一个问题潜伏。当有太多文件无法放入命令行时，find 会将其拆分，您将重复上一个问题。

要真正干净地做到这一点，您需要`find`生成一个`tar`可以读取的文件列表，而不是尝试将它们全部放在命令行上。为了正确处理所有文件名，您需要以 '\0' 分隔格式的列表。GNU tar&find 可以做到这一点：

```
find ~/Algorithm/test/PDF -mtime +30 -print0 |
  tar --null --files-from=- -czvf backup.tar.gz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:33:42.690

假设您已经有一个现有的解压缩文件，`backup.tar`您还可以将文件附加到 tarball

```
 find . -exec tar rf backup.tar && gzip backup.tar 
```

我现在不知道这如何与其他方法进行基准测试，但它应该按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T03:34:01.627

`find` executes the function for each file it finds. You need to pass the list to the function for this to work. Executing the find as a sub function and passing it to the `tar` `gzip` chain should work.

```
 tar czvf - $(find ~/Algorithm/test/PDF -mtime +30) | gzip -c backup.tar.gz 
```

# php - 使用 Yootheme 的 Zoo（自定义元素）在 php 中创建两个扩展

> ID：11715061
> 
> 赞同：0
> 
> 时间：2012-07-30T03:24:10.113
> 
> 标签：php, joomla2.5, element

我正在尝试使用 yootheme 的 CCK“ZOO”制作自定义元素，但遇到了障碍。我想我需要扩展另外两个元素来组合它们来制作一个自定义元素。

它开始于

```
<?php
// no direct access
defined('_JEXEC') or die('Restricted access');

// register ElementRepeatable class
App::getInstance('zoo')->loader->register('ElementRepeatable', 'elements:repeatable/repeatable.php');
// register ElementOption class
App::getInstance('zoo')->loader->register('ElementOption', 'elements:option/option.php'); 
```

我想添加这个来调用类然后扩展和实现（我真的不知道这句话是什么意思。）我正在查看两个文件并将它们组合起来。

```
class ElementCustomName  extends ElementOption extends ElementRepeatable implements iRepeatSubmittable { 
```

然后实际的代码从下面开始......

我只是想弄清楚如何将 ElementOption 与 ElementRepeatable 一起扩展。

这是我得到的错误：

```
 Parse error: syntax error, unexpected T_EXTENDS, expecting '{' 
```

它会在类线上期待。

任何帮助，将不胜感激。

**编辑**：

来自第一条评论的尝试

```
class ElementCustomName extends ElementOption {
/* Select Option - More Code Than This */
}

class ElementOption extends ElementRepeatable implements iRepeatable {
/* Text Option - More Code Than This */
} 
```

**致命错误**：

```
Fatal error: Cannot redeclare class ElementOption 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:52:38.810

在 PHP 中不能有多重继承。如果您查看 option.php 和 related.php，您会发现它们实现了或多或少相同的方法。如果您想从两个类中复制和粘贴这些对象的嵌合体并创建自己的元素。不优雅，但它有效。

# c# - 执行程序后无法打开 Excel 文件

> ID：11715062
> 
> 赞同：2
> 
> 时间：2012-07-30T03:24:24.197
> 
> 标签：c#

我正在使用 C# Window 表单应用程序向 Excel 文件添加一些数据。但是在执行程序之后，要打开 excel 文件，我需要关闭 Window 表单，否则我不仅无法打开添加数据的 excel 文件，也无法打开任何 excel 文件。当我尝试在不关闭窗口表单应用程序的情况下打开任何 excel 文件时，它没有显示任何数据和单元格（只是一个空白屏幕）。

我需要关闭我的应用程序才能查看 excel 文件。即使在我编写了用于释放 COM 对象的代码。

```
 workbook = appExl.Workbooks.Open(Excel_file, 0,false, 5, "", "", false, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false);
        workbook.Save();            
        System.Runtime.InteropServices.Marshal.ReleaseComObject(ShtRange);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(NwSheet);           
        workbook.Close(true, Missing.Value, Missing.Value);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(workbook);
        appExl.Quit();
        System.Runtime.InteropServices.Marshal.ReleaseComObject(appExl); 
```

所以请帮助我如何在执行后不关闭应用程序的情况下打开excel文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:24:28.603

这是一个示例代码，我在其中使用 C# 写入 excel 工作表，效果很好。使用 Microsoft.Office.Interop.Excel 使用以下命名空间；使用 Excel = Microsoft.Office.Interop.Excel；

看一下这个

```
 Excel.Application XlApp = null;
        Excel.Workbook workbook = null;
        Excel.Worksheet Ws = null;
        Excel.Range Range1 = null;
        Excel.Worksheet X = null;

        XlApp = new Excel.Application();
        XlApp.Visible = true;
        workbook = XlApp.Workbooks.Add(XlWBATemplate.xlWBATWorksheet);
        Ws = (Excel.Worksheet)workbook.Worksheets[1];
        XlApp.WindowState = XlWindowState.xlMaximized;

                Ws = (Excel.Worksheet)workbook.Worksheets[1];

                Ws.Activate();
                Ws.Name = "MyFirstSheet";

              int rowIndex = 1; int columnIndex = 2;
               xlApp.Cells(rowIndex, columnIndex) = "Blah" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:56:49.960

尝试这个首先打开一个现有文件（xls）。然后根据需要向其中添加工作表并向其写入数据

```
 Missing _value = Missing.Value;
            string strtemp = "C:\\MyExcel.xls";
            Microsoft.Office.Interop.Excel.Workbook Wtemp = XlApp.Workbooks.Open(strtemp, _value, _value, _value, _value, _value, _value, _value, _value, _value, _value, _value,  _value, _value, _value);
Wtemp = xlApp.Workbooks.Add(Microsoft.Office.Interop.Excel.XlWBATemplate.xlWBATWorksheet); 
```

然后通过使用上面的函数，你可以向它写入数据......

# button - Extjs 网格面板“下一个按钮”导致结果丢失

> ID：11715065
> 
> 赞同：0
> 
> 时间：2012-07-30T03:25:48.747
> 
> 标签：button, extjs, grid, next

我有一个带有搜索功能的网格面板。每次按下搜索按钮时，都会传递一个查询，对网格面板进行排序并显示

查询工作正常。但是当我按下“下一页按钮”时，查询信息丢失并返回到原始状态[没有查询执行]

```
bbar: new Ext.PagingToolbar(
{
    store: store,
    pageSize: 20,
    plugins: [new Ext.ux.Andrie.pPageSize()],
    displayInfo: true,
    width: '400',
    refresh: function(pt, o) {
        store.reload();
        FormPanel.findById('grid').getView().refresh();
    },
    emptyMsg: "No message to display"
    }
) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T05:49:14.027

您是否使用服务器端脚本（例如 PHP）？在获取您在网格中显示的数据..？我没有尝试过使用 lastOption 的东西，但你可以试试这个……它只是一个简单的 PHP 技巧……使用`$_SESSION`……我也有和你一样的情况……而且 $_SESSION 函数对我有用。

这是示例代码。

通常在服务器端，您有这样的代码来获取数据库中的一些数据。您需要发布从搜索字段发送的参数。您没有在此处发布您的服务器端代码。所以我会假设它看起来像这样。

//第一件事你需要发布搜索字段中的参数以在数据库中搜索//

```
$pattern = $_REQUEST['search_pattern']; //you may also use the $_POST instead of $_REQUEST 
```

// 你的数据库查询可能看起来像这样..

```
("SELECT * FROM your_table WHERE table_data LIKE %$pattern% "); 
```

//每次你​​加载你的网格。它总是会调用服务器。所以如果你设置一个条件，即要显示的数据将取决于你的搜索字段的值，如果你的`$_POST`函数返回一个 NULL 肯定它不会显示任何数据。

因此，如果您在搜索字段中输入一个值并加载网格。首次加载时，服务器获得了模式的值，因此您在网格上获得了输出，但请记住，服务器端页面仅保存一次该值，如果服务器端页面被刷新或再次加载，则该值现在将为 null，除非你又在搜索栏上放了一些东西。这就是我认为按下下一个按钮后没有显示的原因，因为下一个按钮再次加载服务器端页面，但是这次下一个按钮没有参数，这就是为什么服务器无法获取任何数据，因为模式现在为 NULL . 因此，为了长时间保存您之前输入的值，我们需要使用 $_SESSION...// 代码看起来像这样。

因为每次我们加载服务器页面时它总是执行 $_POST 函数，所以如果我们发布一个空值，因此它也会导致一个空值。要从搜索字段中获取我们之前发布的值，我们将将值放入会话。来了...

```
$pattern = $_POST['search_pattern']; 
```

首先，如果您在搜索字段中键入内容，$pattern 将有一个值，然后我们将其保存到会话变量中，

```
$_SESSION['pattern'] = $pattern; 
```

但是请记住，每次按下下一个按钮时，下一个按钮也会加载服务器端页面，它会重新加载服务器页面，此时`$_POST`返回一个空值，因为我们没有与下一个按钮一起发送参数。所以我们只需要在会话变量上存储一个值，POST 有一个值，它是当您在搜索字段中键入一个单词时。我们需要这样做。

```
$pattern = $_POST['search_pattern'];

if($pattern != ''){ 
// we need to check if the value is null because when you pressed the next button after it reloads the pages it would now be null and this time we need to get the previous value. while if the  value is not null we will save it to the session variable..

$_SESSION['pattern'] = $pattern;

}else{

    // here is when the next button is pressed it will go here since the $_POST is now null
    we will get the previous value that we saved on the session variable//

$pattern = $_SESSION['$pattern'];

} 
```

然后，查询数据到数据库...

整个代码看起来像这样..

```
<?php
session_start();

// mysql connection here//

$pattern = $_POST['search_pattern'];

if($search_pattern !=''){

$_SESSION['pattern'] = $pattern;

}else{

$pattern = $_SESSION['pattern'];

}

$start = ($_REQUEST['start'] != '') ? $_REQUEST['start'] : 0;
$limit = ($_REQUEST['limit'] != '') ? $_REQUEST['limit'] : 20;

$query =mysql_query("SELECT * FROM students WHERE lname LIKE '$pattern%' ");

$totaldata = mysql_num_rows($query);

while($row = mysql_fetch_assoc($query)){
$items[] = array(
        'id' => $row['student_id'],
    'lname' => $row['lname'],
    'fname' => $row['fname'],
    'mname' => $row['mname'],
    'gender' => $row['gender'],
);

}

  $matches = Array();
  foreach ($items as $item) {
      $matches[] = $item;
    }

echo '({"totalCount":"'.$totaldata.'","matches":'.json_encode($matches).'})'; 

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:45:35.897

不确定您使用的是哪个商店。但重新加载需要选项参数，

使用配置的 Reader 和上次执行的加载操作的选项从配置的代理重新加载记录缓存。

参数： options : Object （可选）一个包含加载选项的对象，可以覆盖上次加载操作中使用的选项。有关详细信息，请参阅加载（默认为 null，在这种情况下使用 lastOptions）。

将新参数添加到现有参数：

```
lastOptions = myStore.lastOptions;
Ext.apply(lastOptions.params, {
    myNewParam: true
});
myStore.reload(lastOptions); 
```

返回：无效

参考：[http ://extjs.cachefly.net/ext-3.4.0/docs/](http://extjs.cachefly.net/ext-3.4.0/docs/)

# iphone - 子视图中的 shouldAutorotateToInterfaceOrientation

> ID：11715067
> 
> 赞同：1
> 
> 时间：2012-07-30T03:26:05.617
> 
> 标签：iphone, orientation, device

我在旋转设备时尝试更改视图布局时遇到了一些麻烦，我有一个名为 OverviewViewController 的主视图，它由 2 个视图组成，当设备处于某个方向时，它们将被隐藏/显示。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{    
     // do some layout stuff
     NSLog(@"OverviewViewController shouldAutorotateToInterfaceOrientation");
     return YES;
} 
```

每次我旋转我的设备时，这个方法都会执行两次，但是在任何子视图中它都不会被调用，例如；

```
// In OverviewViewController

_landscapeView = [[LandscapeOverviewViewController alloc] initWithNibName:nil bundle:nil];
[self.view addSubview:_landscapeView.view];

// In LandscapeOverviewViewController

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{    
    NSLog(@"LandscapeOverviewViewController: shouldAutorateToInterfaceOrientation");

    // Only change orientation when it's landscape
    if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) return YES;
    return NO;
} 
```

子视图是否有理由不响应设备方向？该方法从未在那里被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T03:36:12.547

As I can see you are adding `LandscapeOverviewViewController` view as a subView to `self.view`.
And you want your `LandscapeOverviewViewController`'s `shouldAutorotateToInterfaceOrientation` to be called which will never happen.
As these are called to that controller which are `pushed` or `presented` not like you are doing.

**Solution:** You can do two things
1\.

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{    
     // do some layout stuff
     NSLog(@"OverviewViewController shouldAutorotateToInterfaceOrientation");
     //Call explicitly shouldAutorotateToInterfaceOrientation of LandscapeOverviewViewController
     [_landscapeView shouldAutorotateToInterfaceOrientation:interfaceOrientation];
     return YES;
} 
```

2\. You can register the orientation notification in `LandscapeOverviewViewController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:36:57.883

is it required for you to use two separate viewcontrollers (one for each orientation) within your overviewViewController?

if you are just altering the frame values based on orientation, then make sure to use autoresizingmasks.

if not, just use separate views for each of the orientations, and hide unhide each view as required.

currently the problem is, your lanscapeViewController has no one sending it the viewControllerEvents.

with the current setup, you can present these view controllers modally, with this code in the OverviewViewController

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration{
{    
    if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) {
        [self presentModalViewController:LandscapeOverviewViewController animated: NO];
        }
    else{
       [self presentModalViewController:PortraitOverviewViewController animated: NO];
       }
} 
```

# android - 无法暂停我的安卓应用

> ID：11715068
> 
> 赞同：0
> 
> 时间：2012-07-30T03:26:17.303
> 
> 标签：android, android-asynctask

我希望我的 android 应用程序在收到来自服务器的响应后暂停一段时间。我正在使用以下代码来尝试暂停我的程序：

```
private Handler mHandler;
private Runnable mCountUpdater = new Runnable() {
    @Override
    public void run() {
        // TODO Auto-generated method stub
         mHandler.postDelayed(this, 15000); 
    } 
}; 
```

但无论我以下面提到的任何一种方式调用等待，它都不起作用
1\. 放在按钮处理程序中：

```
btnin.setOnClickListener(new View.OnClickListener() {
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    //set the values
    grab.onPreExecute("TechID", Build.SERIAL);
    grab.onPreExecute("Type", "Checkin");
    //set the destination and send the request
    grab.execute(new String[]{"http://192.168.1.150/Me/check.php"});
    //close the activity
    mHandler = new Handler(); 
    mHandler.post(mCountUpdater);
    finish();
    }
}); 
```

2.放入AsynTask的onPostExecute()方法中：

```
private class GrabURL extends AsyncTask<String, Void, Void>{
//ArrayList object for storing the string pairs
ArrayList<NameValuePair> nameValuePairs;

public GrabURL() { 
    //constructor of the class
    nameValuePairs = new ArrayList<NameValuePair>(); 
} 

protected void onPreExecute(String key, String value) {
    //store the pair of values into the ArrayList 
    nameValuePairs.add(new BasicNameValuePair(key,value));
}

@Override
protected Void doInBackground(String... urls) {
      // TODO Auto-generated method stub
      //Operation being executed in another thread
      try{
          //set up the type of HTTPClient
          HttpClient client = new DefaultHttpClient();
          //set up the location of the server
          HttpPost post = new HttpPost(urls[0]);
          //translate form of pairs to UrlEncodedFormEntity 
          UrlEncodedFormEntity ent = new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8);
          //set up the entity being sent by post method
          post.setEntity(ent);
          //execute the url and post the values
          //client.execute(post);
          HttpResponse responsePOST = client.execute(post); 
          HttpEntity resEntity = responsePOST.getEntity();
          line = EntityUtils.toString(resEntity);
    } catch (Exception e) {
        //catch the exception
        line = "Can't connect to server";
    }
    return null;
}

protected void onPostExecute(Void unused) {
        mRespond.setVisibility(View.VISIBLE); 
        mRespond.setText(line); 
        btnin.setVisibility(View.GONE);
        Toast.makeText(getApplicationContext(), "Value updated", Toast.LENGTH_SHORT).show();
        mHandler = new Handler(); 
        mHandler.post(mCountUpdater);   
}
} 
```

是我用来暂停程序的方式不正确还是我把等待功能放在了错误的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:33:33.497

在您收到服务器的响应后，我不明白暂停的意义何在。顺便说一句，“暂停一下”到底是什么意思？我无法想象有任何理由暂停应用程序。

您可能希望在来自服务器的响应到来时（而不是之后）添加加载程序，并且可能您也可能希望停用或隐藏按钮。在这种情况下，您应该在grab.execute 之前进行更改并删除onPostExecute 中的更改。

此外，我认为 mCountUpdater 正在创建一个无限循环。所以，我会重新思考这段代码。考虑到 Runnable.postDelay 并没有停止应用程序，它只是将某些 Runnable 的执行延迟到指定的时间，但与此同时，应用程序仍在运行。

如果您更好地解释该解决方案的需求，我可能会为您提供更多帮助。

# php - 存储 Facebook 访问令牌的标准方法是什么？数据库还是 cookie？

> ID：11715072
> 
> 赞同：3
> 
> 时间：2012-07-30T03:27:37.830
> 
> 标签：php, facebook

不久前我用 SDK 制作了一些 Facebook 应用程序，但现在我想尝试在不使用 SDK 的情况下制作一个。我对访问令牌的工作方式感到困惑。

我认为 Facebook 的 PHP SDK 将访问令牌存储在 cookie 中，但 SO 上的大多数人似乎将其存储在数据库中。我应该在哪里存储访问令牌？

如果我将它存储在数据库中，那么我是否将用户的 ID 存储在 cookie 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T04:48:39.777

这几乎是一个讨论问题，因为答案取决于你想用它做什么。

只是一个快速的过程提醒：

1.  获取令牌（从某处）
2.  与 Facebook 交谈并获取与该令牌关联的用户 ID
3.  更新令牌（如果寻找长访问令牌）
4.  存储令牌（如果您想稍后记住它）
5.  使用 UserID 执行某些操作，使用令牌验证调用。

令牌是facebooks“SessionID”。只要您持有令牌，您就可以找到拥有令牌的用户（如果令牌仍然有效）。如果您编写自己的会话处理程序，则可以像使用常规 SessionID 一样保留该令牌：

*   在 PHP 会话处于活动状态时将持续存在的会话变量 ($_SESSION)
*   在 cookie ($_COOKIE) 中，它会在 cookie 有效时持续存在
*   通过在网页之间作为 $_GET 或 $_POST 变量传递
*   在数据库中 - 但是您必须在我们自己的控制下拥有另一个 SessionID（在 $_SESSION、$_COOKIE、$_GET 或 $_POST 中传递）或获取正确令牌的其他方式。

因此，对于工厂的运行，存储在会话或 cookie 中，这取决于哪个更适合您的站点。这是最简单的。

您只会出于两个目的考虑在数据库中存储的复杂性：

1.  您有另一个会话系统正在控制您的应用程序（尤其是第三方应用程序，您不想弄乱他们的内部会话系统，因此在顶部添加您自己的包装器）
2.  您想在用户不在时做一些事情（例如，在您自己的版主系统中批准评论后发布到墙上）。在这种情况下，您需要令牌来批准帖子，但由于用户不在那里，您无权访问 $_COOKIE 或 $_SESSION 等。

希望有帮助。

# git - Git init 在不同的目录而不是当前目录上初始化

> ID：11715073
> 
> 赞同：2
> 
> 时间：2012-07-30T03:27:40.843
> 
> 标签：git

我想我配置错误了，当我执行`git init --bare`on `/git/math-site.com`in 时，会在已经存在的 git directory 上初始化目录`/git/science-site.com`。为什么它会在另一个目录上初始化 repo？

这是我执行的命令列表：

```
cd /git/math-site.com
git init --bare
Reinitialized existing Git repository in /git/science-site.com/ 
```

编辑：我尝试删除`/git/science-site.com`，`/git/math-site.com`现在出现了一个新错误。

```
mkdir /git/math-site.com && cd /git/math-site.com
git init --bare
fatal: GIT_WORK_TREE (or --work-tree=<directory>) not allowed without specifying GIT_DIR (or --git-dir=<directory>) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T03:44:25.223

`unset GIT_DIR` 并`GIT_WORK_TREE`尝试。通常，您不应手动设置该环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:32:52.497

您确定 /git/math-site.com 不是 /git/science-site.com 的符号链接吗？

```
gil@machine:~/git:ruby-1.8.7:$ mkdir real-dir
gil@machine:~/git:ruby-1.8.7:$ ln -s real-dir symlink-dir
gil@machine:~/git:ruby-1.8.7:$ ls -la
total 8
drwxr-xr-x    4 gil  staff   136 30 Jul 13:34 .
drwxr-xr-x+ 106 gil  staff  3604 30 Jul 13:33 ..
drwxr-xr-x    2 gil  staff    68 30 Jul 13:34 real-dir
lrwxr-xr-x    1 gil  staff     8 30 Jul 13:34 symlink-dir -> real-dir
gil@machine:~/git:ruby-1.8.7:$ cd symlink-dir
gil@machine:~/git/symlink-dir:ruby-1.8.7:$ git init --bare
Initialized empty Git repository in /Users/gil/git/real-dir/ 
```

# hadoop - 为什么在运行 hadoop（或 dfs 命令）时一直显示已弃用的错误

> ID：11715082
> 
> 赞同：6
> 
> 时间：2012-07-30T03:29:14.213
> 
> 标签：hadoop, deprecated, hdfs

我已经安装了*hadoop-2.0.0-alpha*，但是每当我执行命令时，都会出现弃用错误（尽管它似乎运行没有问题）

```
$ hadoop/bin/hadoop dfs -copyFromLocal input input
DEPRECATED: Use of this script to execute hdfs command is deprecated.
Instead use the hdfs command for it.

$ hadoop/bin/hadoop dfs -rmr input
DEPRECATED: Use of this script to execute hdfs command is deprecated.
Instead use the hdfs command for it.

rmr: DEPRECATED: Please use 'rm -r' instead. 
```

我四处搜索，看起来这是*hadoop-0.23*的错误。但是，我的版本更新。

我找不到这个版本的答案，它仍然是一个现有的错误吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-18T07:48:05.773

dfs 已被弃用，取而代之的是“fs”命令。例如，这个：

```
hadoop fs -copyFromLocal input input // this uses FsShell 
```

而不是这个：

```
hadoop dfs -copyFromLocal input input // this uses the now deprecated HDFS-specific DFSShell 
```

关于这里的差异的一些很好的背景：

[http://nsinfra.blogspot.com/2012/06/difference-between-hadoop-dfs-and.html](http://nsinfra.blogspot.com/2012/06/difference-between-hadoop-dfs-and.html)

# python - 为什么我的代码中出现“UnboundLocalError”？

> ID：11715086
> 
> 赞同：-3
> 
> 时间：2012-07-30T03:30:10.580
> 
> 标签：python

我已经修改了引用以修复语法错误。现在我收到的错误是这个：

```
Traceback (most recent call last):
  File "C:\Users\Alex\Desktop\Programming Concepts\Labs\Chapter 11\Lab 8.py", line 78, in <module>
    main()
  File "C:\Users\Alex\Desktop\Programming Concepts\Labs\Chapter 11\Lab 8.py", line 18, in main
    totalPints = getTotal(pints)
  File "C:\Users\Alex\Desktop\Programming Concepts\Labs\Chapter 11\Lab 8.py", line 42, in getTotal
    totalPints += pints[counter]
  UnboundLocalError: local variable 'totalPints' referenced before assignment 
```

到目前为止，这是我的代码：

```
# Lab 8-3 Blood Drive

# The main function
def main():
    endProgram = 'no'
    print
    while endProgram == 'no':
        print
        # Declare variables
        pints = [0] * 7

        # Function calls
        pints = getPints(pints)
        totalPints = getTotal(pints)
        averagePints = getAverage(totalPints)
        highPints = getHigh(pints)
        lowPints = getLow(pints)
        displayInfo(averagePints, highPints, lowPints)

        endProgram = input('Do you want to end program? (Enter no or yes): ')
        while not (endProgram == 'yes' or endProgram == 'no'):
            print('Please enter a yes or no')
            endProgram = input('Do you want to end program? (Enter no or yes): ')

# The getPints function
def getPints(pints):
    counter = 0
    while counter < 7:
        numEntered = input('Enter pints collected: ')
        pints[counter] = int(numEntered)
        counter += 1
    return pints

# The getTotal function
def getTotal(pints):
    counter = 0
    while counter < 7:
        totalPints += pints[counter]
        counter += 1
    return totalPints

# The getAverage function
def getAverage(totalPints):
    averagePints = float(totalPints) / 7
    return averagePints

# The getHigh function
def getHigh(pints):
    highPints = pints[0]
    counter = 1
    while counter < 7:
        if pints[counter] > highPints:
            highPints = pints[counter]
        counter += 1
    return highPints

# The getLow function
def getLow():
    lowPints = pints[0]
    counter = 1
    while counter < 7:
        if pints[counter] < lowPints:\
           lowPints = pints[counter]
        counter += 1
    return lowPints

# The displayInfo function
def displayInfo(averagePints, highPints, lowPints):
    print('The average number of pints donated is ',averagePints)
    print('The highest pints donated is ', highPints)
    print('The lowest number of pints donated is ', lowPints)

# Calls main
main() 
```

如果有人可以将此代码复制并粘贴到他们的 python 中并帮助解决它，我将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T03:33:07.567

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:47:58.107

好吧，这很容易解决。您只需要在向变量添加内容之前分配变量。

```
totalPins = 0 
```

或者

```
totalPins = "" 
```

在进入循环之前应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:31:25.970

“分配前引用的变量”仅表示您正在使用尚不存在的变量。在您的代码中，问题在于这一行：

```
totalPints += pints[counter] 
```

这是第一次出现的totalPints。请记住，“+=”结构完全等同于

```
totalPints = totalPints + pints[counter] 
```

这是python反对的正确事件。为了解决这个问题，初始化你的变量

```
totalPints = 0 
```

在你进入循环之前。

# cuda - 带有原子的 CUDA 内核产生错误的答案

> ID：11715088
> 
> 赞同：0
> 
> 时间：2012-07-30T03:30:48.317
> 
> 标签：cuda, gpu, gpgpu

我正在尝试了解 CUDA 编程模型及其功能。作为练习，我正在尝试将以下带有函数调用的循环结构转换为高效的 CUDA 内核

```
//function call
bool gmul(int rowsize,int *Ai,int *Bj,int colsize)
{
    for(int i = 0;i < rowsize;i++)
    {
        for(int j = 0;j < colsize;j++)
        {
            if(Ai[i] == Bj[j])
            {
                return true;
            }
        }
    }
    return false;
}

//Some for loop in main function is as follows

for(i = 0;i < q ;i++)
    {
        cbeg = Bjc[i];
        cend = Bjc[i+1];        
        for(j = 0;j < m;j++)
        {
            beg = Aptr[j];
            end = Aptr[j+1];            
            if(gmul(end - beg,Acol + beg,Bir + cbeg,cend - cbeg))
            {   
                temp++;             
            }                       
        }
        Cjc1[i+1] = temp ;              
    } 
```

我的带有函数调用的内核如下。

```
 __device__ bool mult(int colsize,int rowsize,int *Aj,int *Bi,int *val)
    {       
        for(int j = 0; j < rowsize;j++)
        {           
           for(int k = 0;k < colsize;k++)
            {   
              if(Aj[j] == Bi[k])
               {    
                return true;
                }                               
            }           
        }
            return false;       
    }

__global__ void kernel(int *Aptr,int *Aj,int *Bptr,int *Bi,int rows,int cols,int *count,int *Cjc)
    {
        int tid = threadIdx.x + blockIdx.x * blockDim.x;
        int i;
        if(tid < cols)
        {
            int beg = Bptr[tid];
            int end = Bptr[tid+1];
            for(i = 0;i < rows;i++)
            {
                int cbeg = Aptr[i];
                int cend = Aptr[i+1];
                if(mult(end - beg,cend - cbeg,Aj+cbeg,Bi+beg,count))
                {
                    //atomicAdd(count,1);
                                    //Changes made are in next line
                              atomicAdd(Cjc+tid+1,1);           
                }
            }
            //atomicAdd(Cjc+tid+1,*count);              
        }               
    } 
```

我想要的是，每当`__device__ mult`返回`true`值时，我的全局内核函数应该增加该特定线程的计数器，并且一旦 for 循环（在内核函数中）结束，它应该将值存储到`Cjc`数组中并将计数移交给其他线程用于增量操作。但是，我没有得到预期值。我在这个`Cjc`数组中得到的只是所有线程完成执行后的最终计数。

我正在使用带有 CC 2.0 的 GTX 480

任何关于我为什么会得到错误答案或对此 CUDA 内核优化的建议/提示将不胜感激。提前致谢。 ***** ** *** *******已解决****** ** *** ** *** ******

现在，我面临一个问题，每当我达到 4000 及以上的大小时，我都会将数组中所有元素的值作为`0`. 这是我启动内核的方式。

```
 int numBlocks,numThreads;

        if(q % 32 == 0)
        {
            numBlocks = q/32;
            numThreads = 32;
        }
        else
        {
            numBlocks = (q+31)/32;
            numThreads = 32;
        }
findkernel<<<numBlocks,numThreads>>>(devAptr,devAcol,devBjc,devBir,m,q,d_Cjc); 
```

我想知道我是否跨越了块或网格尺寸的任何限制，但对于 CC 2.0，我认为我可以启动足够的块和线程而不会跨越任何限制。我想知道为什么所有的答案仍然是`0`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:54:53.797

`count`您已经编写了无需同步即可读取和写入的并行线程。线程以不可预知的顺序并发运行，因此线程以不可预知的顺序原子地修改`count`和读取`count`。该表达式`*count`将根据确切的执行顺序产生不同的结果。

> 一旦 for 循环（在内核函数中）结束，它应该将值存储到`Cjc`数组中，并将计数移交给其他线程进行增量操作。

没有同步，所以没有线程等待另一个线程完成循环。与其让所有线程共享相同的存储空间`count`，为什么不给每个线程一个不同的存储空间呢？然后线程将不会影响彼此的结果。您可以在此之后运行扫描内核以组合结果。

# javascript - 我的内容脚本如何在 iframe 中也能工作？

> ID：11715090
> 
> 赞同：-1
> 
> 时间：2012-07-30T03:31:02.573
> 
> 标签：javascript, google-chrome-extension

我的内容脚本会在页面中插入一些按钮。当我单击按钮时，它会做一些事情，例如 console.log("...")，也许它会使用鼠标选择。

当页面有 iframe 时是否可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:05:49.303

你应该`all_frames: true`在你的[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)声明中添加`manifest.json`.

```
"content_scripts": [
    {
        "matches": [
            "http://*/*",
            "https://*/*"
        ],
        "all_frames": true,
        "js": [
            "content_script.js"
        ]
    }
] 
```

# iphone - UITableView 与 UIButtons 作为 UITableViewCells

> ID：11715098
> 
> 赞同：0
> 
> 时间：2012-07-30T03:32:54.937
> 
> 标签：iphone, uitableview

我注意到在某些应用程序中，例如联系人应用程序，分组表视图底部有一个或多个按钮。我想知道这些按钮是否是 UITableView 的一部分，就像按钮在 UITableViewCell 中一样，或者它是否是一个 UIView，其中有一个位于 UITableView 下方的按钮。我还想知道这两种方法是否比另一种更好。我想向我的 UITableView 添加一些按钮，类似于联系人应用程序，但不知道更好的方法是什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:35:32.310

`UITableView` has two relevant properties, `tableHeaderView` and `tableFooterView`. All you have to do to replicate what you're seeing in Contacts is connect the property to a custom `UIView` that contains a `UIButton` as a subview.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:37:16.190

I did similar things about add UIButtons to UITableView. You can add the button as a part in the UITableViewCell, or, you can make a custom view as the `footer view` of UITableView.

# php - Error format with group_concat in php mysql

> ID：11715100
> 
> 赞同：1
> 
> 时间：2012-07-30T03:33:17.493
> 
> 标签：php, mysql

I have a sample data:

```
table(id, name) with name(varchar(255)) 
```

with data is

```
table(1, 'test1')
...
     (999, 'test999')
... 
```

Query is `Select GROUP_CONCAT(name) AS name FROM table` And result is `test1test2...test155` => can't get all name of table table, How to fix it ?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-30T03:58:44.193

尝试`group_concat_max_len`将`SESSION`之前查询中的大小增加为：

```
SET SESSION group_concat_max_len = 1000000; 
```

[group_concat_max_len 的 MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_group_concat_max_len)

# html - Different CSS for every box?

> ID：11715103
> 
> 赞同：-1
> 
> 时间：2012-07-30T03:33:53.017
> 
> 标签：html, css

In my page i have many table cells.
Inside each cell i have one box (i'm using a spoiler code to show or hide contents inside).
The box is described by a CSS.
The boxes are identical in looks, but I want to customize the properties of each as changing the color or background image
I paste CSS several times equivalent to the number of boxes.
I paste css style before each boxes code.
I try to change the background image of *each* box (default the color is white) but when i try to change one of these backgrounds, i obtain the same background of ALL boxes.
But it isn't what I want.

I have severals pictures in folder but it seems like I can not have different background pictures for different boxes..
This is the css style I use.:

```
<style type='text/css'>
            div.myautoscroll {
            height: 80ex;
            width: auto;
            background: white;
            background-image: url(cieloprato.jpg);
            overflow: hidden;
            border: 1px solid #444;
            margin: 1em;
        }
        div.myautoscroll:hover {
            overflow: auto;
        }
        div.myautoscroll p {
            padding-right: 16px;
        }
        div.myautoscroll:hover p {
            padding-right: 0px;
        }

  </style> 
```

The background image for 1st box is `cieloprato.jpg`. But i want insert different image for box2 like bastman.png, for box3 spiderman.gif.
How Can I change background image or CSS style for every box?
Forgive my ignorance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:42:43.603

我认为有3种方式：

***首先***。您可以使用`nth-*`css 属性，但它不适用于旧浏览器。

```
.myautoscroll:nth-of-type(2) { 
  background: #3e3;
} 
```

此代码使用此类更改 3 div 中的背景颜色。

***其次***。您可以为每个`div`元素添加唯一的`identifier`or`class`，并通过 css 中的选择器获取它。

```
<div class="myautoscroll" id="mas1">...</div>
<div class="myautoscroll" id="mas2">...</div>

#mas1 {
  ...
}

#mas2 {
  ...
} 
```

***第三***。您可以在每个`div`元素`style`属性中添加指向所需背景的位置。

```
<div class="myautoscroll" style="background: #0f3">...</div>
<div class="myautoscroll" style="background: #1f3">...</div> 
```

***第四***。您可以在 JavaScript 中循环执行此操作（这只是示例）：

```
var elements = document.getElementByClassName('myautoscroll');

for (var i in elements) {
  var el = elements[i];
  el.style.background = '#' + (i % 10) + 'f3';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T04:05:50.573

你为什么不给 td 上课？

```
.box1{background:url(cieloprato.jpg};
.box2{background:url(batman.png)}; 
```

并像这样把它放在html中

```
<td class = "box1"></td>
<td class = "box2"></td> 
```

# asp.net - 如何连接 ObjectDataSource、ListView 和 DataPager？

> ID：11715111
> 
> 赞同：1
> 
> 时间：2012-07-30T03:34:56.757
> 
> 标签：asp.net, listview, objectdatasource

当我尝试将 ObjectDataSource、ListView 和 DataPager 连接在一起时，正确的值不会传递给 ObjectDataSource 的 select 方法。-1 总是传递给`maximumRows`， 0 传递给`startRowIndex`。

```
<asp:DataPager runat="server" ID="Address_DataPager" PageSize="50" PagedControlID="Address_ListView" >
    <Fields>
        <asp:NextPreviousPagerField ShowFirstPageButton="true" ShowLastPageButton="true"
            FirstPageText="|&lt;&lt; " LastPageText=" &gt;&gt;|"
            NextPageText=" &gt; " PreviousPageText=" &lt; " />
    </Fields>
</asp:DataPager>
<asp:ListView ID="Address_ListView" runat="server"
    DataSourceID="Address_DataSource" DataKeyNames="AddressId" >
    <LayoutTemplate>
        <table class="resultsGrid">
            <tr class="gridRow">
                <th scope="col">Address</th>
            </tr>
            <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr class="gridRow">
            <td>
                <asp:Label ID="Address_Label" runat="server" Text='<%# Eval("Address") %>' />
            </td>
        </tr>
    </ItemTemplate>
</asp:ListView>
<asp:ObjectDataSource ID="Address_DataSource" runat="server" TypeName="SuperApp.Business.Address"
    SelectMethod="SelectAddress" EnablePaging="True"
    MaximumRowsParameterName="maximumRows"
    StartRowIndexParameterName="startRowIndex" >
    <SelectParameters>
        <asp:Parameter Name="maximumRows"   DefaultValue="10" Type="Int32" />
        <asp:Parameter Name="startRowIndex" DefaultValue="5"  Type="Int32" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

`Address`这是命名空间中类中的 select 方法`SuperApp.Business`：

```
System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, false)]
public DataTable SelectAddress(int maximumRows, int startRowIndex)
{
    if (maximumRows < 1) throw new ArgumentOutOfRangeException("maximumRows", "Maximum rows should be greater than zero.");
    if (startRowIndex < 0) throw new ArgumentOutOfRangeException("startRowIndex", "Start row index should be greater or equal to zero.");
    if (startRowIndex >= maximumRows) throw new ArgumentOutOfRangeException("startRowIndex", "Start row index should be less than the maximum rows.");

    // Would do something interesting here.
    return null;
} 
```

总是抛出第一个异常，总是抛出`maximumRows`-1。我试过了：

*   将 DataPager 移入 LayoutTemplate。
*   将 DataPager 移入 LayoutTemplate 并删除 PagedControlID 值。
*   将 DefaultValue 值更改为各种各样的东西。
*   从参数中删除 DefaultValues。
*   从参数中删除类型。
*   完全删除 SelectParameters。

这可能是我看不到的显而易见的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T06:09:41.057

是的，这应该是显而易见的。

您缺少 ，`SelectCountMethod`因此`ObjectDataSource`不仅可以选择当前页面，还可以确定那里有多少对象。

一个工作示例：

[http://netpl.blogspot.com/2009/04/how-to-controll-aspnet-listview-page.html](http://netpl.blogspot.com/2009/04/how-to-controll-aspnet-listview-page.html)

# asp.net - 在我自己的环境中自动登录到供应商 ASP.Net 应用程序

> ID：11715113
> 
> 赞同：0
> 
> 时间：2012-07-30T03:35:09.673
> 
> 标签：asp.net

我有一个我自己管理的 Intranet，而且我们刚刚购买了一些供应商的系统，它没有开箱即用的 LDAP/AD 支持。我认为这是一个 ASP.Net 应用程序（login.aspx [hint1] 上有一个 id="aspnetForm" [hint2] 的表单），我认为，在我完美运行的想象中，我所要做的就是将用户凭据作为参数传递给登录页面（我已将他们的用户名注入到供应商的数据库中，我可以使用这些凭据手动登录），它就可以正常工作。不是这样。

Uri 看起来像这样；http://[apps_domain]/Controls/CtlLogin.aspx

我无法访问这个 ASP.Net 环境，我只能通过 URI 访问它，但是我可以完全访问环境中的另一台服务器，我可以在该服务器上运行各种脚本，最好是 PHP（因为我们运行一些其他应用程序在 PHP 中，我们有拥有这些技能的人）。

ASP.Net 是否有一些默认方式为他们的应用程序提供简单的登录？我在其他地方使用 NTLM 和 AD 来验证凭据，我只需要将它们注入 ASP.Net 应用程序。我希望这会更简单...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:55:39.807

你想如何实现它。您想要现有的基于表单的登录，但允许用户在表单中输入他们的 AD 凭据（如 Outlook Web Access），还是让应用程序使用 IIS/Windows NTLM 或通过 HTTP 标头完成的 Kerberos 身份验证（即更安全，因为用户永远不需要输入他们的用户名/密码）。

如果不知道有关您购买的此应用程序的更多信息，我不能说。ASP.NET 确实提供了几个用于身份验证的后端，但这个应用程序很可能会推出自己的。如果应用程序确实使用股票“会员”或 web.config 定义的身份验证和成员资格系统，那么*假设*您可以更改 web.config 文件以使用 ActiveDirectory/Ldap/Kerberos 提供程序而不是它自己的提供程序，但是在我的体验很少的 ASP.NET 应用程序（除了琐碎的 Hello, World-examples）使用会员系统的书。不要期望这会起作用，您需要深入了解 ASP.NET 的成员资格系统。正如我所说，所有这些都是基于您的应用程序首先使用成员资格的假设。

您希望您的 PHP 脚本如何工作，确切地说？身份验证通过让客户端提交表单和服务器以 cookie 响应来工作。你不能委派这些任务——我猜你必须代理它，但你会进入一个受伤的世界。

简而言之，我会与供应商联系并要求进行修改以允许与您现有的系统集成或获得退款。

# java - how use jdbc to write testable service/dao with transaction

> ID：11715116
> 
> 赞同：0
> 
> 时间：2012-07-30T03:35:33.027
> 
> 标签：java, jdbc, mocking

these days I write some code without spring support, and try write code like this In Service..

```
c = ds.getConnection();
c.setAutoCommit(false);
try {
    dao.findXX(c, id);
    c.commit();
} catch (Exception ex) {
    c.rollback();
} 
```

but, I meet some problem when I try to mock DAO, and test my service. because getConnection is called, it will connect to a db which doesn't want to see for our.

how to write service/dao with jdbc to easy test?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:35:09.000

我建议使用其中一种内存数据库（HSQL、Derby、H2）。
测试开始时，您只需创建与内存数据库的连接并模拟您的连接，`ds`以便在调用 getConnection 时返回此连接。

使用以下连接字符串之一：

```
public static final String JDBC_URL_DERBY = "jdbc:derby:memory:some_db_name;drop=true";
public static final String JDBC_URL_HSQL = "jdbc:hsqldb:mem:some_db_name;shutdown=true";
public static final String JDBC_URL_H2 = "jdbc:h2:mem:some_db_name"; 
```

所有这些连接都会创建名为 *some_db_name* 的内存数据库实例

# java - 如何使用 /* servlet-mapping 发送到 WEB-INF？

> ID：11715117
> 
> 赞同：5
> 
> 时间：2012-07-30T03:35:42.433
> 
> 标签：java, servlets, web.xml

我对 Java servlet 编程还是很陌生，所以如果我要解决这个错误，请提前道歉。（但如果是这样，我会很感激任何帮助！）

我的网站将有两个主要部分：Web 服务部分和“其他所有”部分，后者将为大多数交互式浏览器请求提供服务。我*以为*我可以在我的 web.xml 文件中摆脱这样的事情：

```
<servlet>
    <servlet-name>Webservice</servlet-name>
    <servlet-class>com.mydomain.webservice</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Webservice</servlet-name>
    <url-pattern>/webservice/*</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>Interactive</servlet-name>
    <servlet-class>com.mydomain.interactive</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Interactive</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

目的是让通过 AJAX、胖客户端应用程序或其他 RPC 方法进行通信的 Web 服务使用所有以 mydomain.com/webservice 开头的 URL，例如：

*   mydomain.com/webservice/login
*   mydomain.com/webservice/viewuser/12345
*   mydomian.com/webservice/deleteitem/abc
*   ...

但是，通常使用浏览器浏览该网站的人会以如下方式访问该网站：

*   mydomain.com（主页）
*   mydomain.com/login
*   mydomain.com/viewuser/12335
*   mydomain.com/deleteitem/abc
*   ...

在我的交互式类中，我正在解析 getPathInfo() 结果以将请求转发到另一个类，并且这些类中的绝大多数都使用请求调度程序来转发信息以查看 JSP 文件以实际呈现 HTML。所以我的一个类中的一段代码可能看起来像：

```
RequestDispatcher view = req.getRequestDispatcher("/WEB-INF/views/master.jsp");
view.forward(req, resp); 
```

我还在交互式 servlet 中进行了错误检查，因此如果用户尝试访问不可路由的 URL（例如，当我没有定义任何东西来处理 foobar 时，mydomain.com/foobar），它会抛出一个 HTTP 404\. 但是，当我启动它时，*一切都会*生成 HTTP 404。

经过一些故障排除后，我发现请求正在发送到 servlet 没有任何问题，并且 servlet 正在正确解析它。但是，当它尝试将其转发到 /WEB-INF/views/master.jsp 时，它会再次调用 servlet。我认为 WEB-INF 是一个代表公共无法访问的资源的“神奇”目录，但看起来我的 Java 容器（Jetty，通过 Eclipse 的 Google App Engine 插件）将其视为尝试访问 URL。我猜这是因为当我在 web.xml 文件中将 /* 定义为 url 模式时，它实际上将其解释为，将**所有内容**发送到该 servlet，包括将请求转发到 WEB 中的 JSP 视图文件的调用- INF 目录。

难道我做错了什么？我什至还没有开始尝试处理对 Web 服务的请求，而且我一直在尝试处理对交互式站点的请求。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:41:47.893

原始问题的解决方案非常简单 - 您应该将 servlet 配置为默认值：

```
<servlet-mapping>
    <servlet-name>Interactive</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

注意`/`模式。这样，它将处理其他 servlet 未处理的请求（与`/*`处理所有请求的映射不同）。

但是，这种方法会导致提供静态内容的问题。如果您要提供静态内容，您可能需要更复杂的解决方案，例如，请参阅[Using Spring, mapping to root in web.xml, static resources are not found](https://stackoverflow.com/questions/2129876/using-spring-mapping-to-root-in-web-xml-static-resources-arent-found)。

# wcf - Entity Framework Navigation Properties looping issue though WCF

> ID：11715120
> 
> 赞同：5
> 
> 时间：2012-07-30T03:36:45.300
> 
> 标签：wcf, entity-framework, code-first, infinite-loop

I have a model like

```
public class User
{
    [Key]
    public long UserId { get; set; }

    [Required]
    public String Nickname { get; set; }

    public virtual ICollection<Group> Memberships { get; set; }
}

public class Group
{
    [Key]
    public long GroupId { get; set; }

    [Required]
    public String Name { get; set; }

    public virtual ICollection<User> Members { get; set; }
}

public class DataContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Group> Groups { get; set; }

    public DataContext()
    {
        Configuration.LazyLoadingEnabled = true;
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>()
        .HasMany(u => u.Memberships)
        .WithMany(t => t.Members)
        .Map(x =>
        {
            x.MapLeftKey("UserId");
            x.MapRightKey("GroupId");
            x.ToTable("GroupMembers");
        });
    }
} 
```

All goes fine when accessing the entities using a test console application, but I need to have this through a WCF service, here I got this exception:

> Failed to invoke the service. Possible causes: The service is offline or inaccessible; the client-side configuration does not match the proxy; the existing proxy is invalid. Refer to the stack trace for more detail. You can try to recover by starting a new proxy, restoring to default configuration, or refreshing the service

The only way I found to have this working is, removing the navigator in one of the entities, because having the navigators in both sides causes a infinite looping.

Is there a way to have this working without removing the navigators?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T08:34:09.687

如果您尝试使用 WCF，则会出现两个问题：

*   第一个问题：是否也要返回相关实体？使用 WCF / 序列化时始终关闭延迟加载，并确保手动使用 Include 来处理您真正想要返回的关系。否则延迟加载将加载对象图中的所有关系。此外，根据您的服务处理上下文生命周期的方式，延迟加载可能会在上下文已被释放时发生。
*   您必须告诉序列化程序有关循环引用或删除循环引用。WCF 默认使用`DataContractSerializer`. 要删除循环引用，您可以使用属性标记其中一个导航属性，或者您可以通过使用属性标记所有实体和应该使用属性序列化的所有成员属性`IgnoreDataMember`来简单地告诉序列化程序循环引用。`DataContract(IsReference = true)``DataMember`

# eclipse - Can't find maven 'update dependencies' menu on Eclipse juno

> ID：11715121
> 
> 赞同：13
> 
> 时间：2012-07-30T03:36:45.193
> 
> 标签：eclipse, maven, m2eclipse

I used to have 'update dependencies' menu in project right click menu, when I was using eclipse helios.

But from when I update the eclipse & m2e plugin, I can't find 'update dependencies' menu anymore.

whre is 'update dependencies' menu? or is there any alternative?

I'm using m2e v1.1.0.20120530-0009, by the way

thank you in advance.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T04:30:34.700

菜单条目现在是“更新项目”。在该向导中，您会找到一个复选框“更新依赖项”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T15:44:49.960

现在“更新项目”为您提供一键执行“更新依赖项”、“更新项目配置”、“清理项目”的选项。

# php - 你如何在ffmpeg中进行两次转换？

> ID：11715123
> 
> 赞同：0
> 
> 时间：2012-07-30T03:37:00.203
> 
> 标签：php, ffmpeg

我尝试了以下方法：

```
$ffmpeg = "/path/to/ffmpeg";
$source = "/path/to/video/source.mp4";
$dest = "/path/to/video/dest.mp4";
$format = "%s > %s 2>&1 & echo $! >> %s";
$a_rate = "44100";
$a_bitrate = "96k";
$v_bitrate = "3000k";
$resolution = "1280x720";
$outputfile = "/path/to/output.txt";
$pidfile = "/path/to/pid.txt";

exec(sprintf($format, $ffmpeg . " -i " . $source . " -vcodec libx264 -s " . $resolution . " -b " . $v_bitrate . " -pass 1 /dev/null && \ " . $ffmpeg . " -i " . $source . " -acodec libfaac -ar " . $a_rate . " -ab " . $a_bitrate . " -vcodec libx264 -s " . $resolution . " -b " . $v_bitrate . " -pass 2 " . $dest, $outputfile, $pidfile)); 
```

如果我做一次传球，一切都会完美，但尝试做两次这样的传球是行不通的。正确的方法是什么？

更新：

```
exec(sprintf($format, $ffmpeg . " -i " . $source . " -pass 1 -vcodec libx264 -s " . $resolution . " -b " . $v_bitrate . " -passlogfile " . $pass . " -f rawvideo -y /dev/null", $outputfile, $pidfile));
exec(sprintf($format, $ffmpeg . " -y -i " . $source . " -pass 2 -acodec libfaac -ar " . $a_rate . " -ab " . $a_bitrate . " -vcodec libx264 -s " . $resolution . " -b " . $v_bitrate . " -passlogfile " . $pass . " " . $dest, $outputfile, $pidfile)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:24:29.247

问题在于将 ffmpeg 命令置于后台`$format = "%s > %s 2>&1 & echo $! >> %s";`导致它们同时运行，并且当时没有完成第二次使用的日志文件。后台处理可以很好地使用单次传递，因为它没有依赖项，但我认为需要更复杂的解决方案来后台处理两次传递转换。我打算使用排队系统。

# html - 3 column layout: middle col have max width, right col is dynamic

> ID：11715124
> 
> 赞同：1
> 
> 时间：2012-07-30T03:37:13.400
> 
> 标签：html, css

Is it possible to create such CSS layout without javascript?

*   left column: width is 23%
*   middle column: width is 43.5%, max width is 550px
*   right column: dynamic (stretches to container width)

The main problem is with middle column's max width. Don't know how to make right column dynamic and stick it to middle column's right edge if its width reached maximum value.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:00:53.590

在您提出问题后大约 30 分钟，我开始尝试，然后放弃了，但是`float`最后没有 a 的想法`div`（感谢@MrAlien）使我的示例工作：http: [//jsfiddle.net/6pJJt/3/](http://jsfiddle.net/6pJJt/3/)。

**HTML：**

```
<div id="col1" class="column">Column 1</div>
<div id="col2" class="column">Column 2</div>
<div id="col3" class="column">Column 3</div> 
```

**CSS：**

```
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%
}
.column {
    height: 100%;
    float: left
}
#col1 {
    width: 23%;
    background: red
}
#col2 {
    width: 43.5%;
    max-width: 550px;
    background: orange
}
#col3 {
    width: 100%;
    background: yellow;
    float: none
} 
```

# jsf - 使用 Glassfish 测井设备会更好吗？

> ID：11715129
> 
> 赞同：3
> 
> 时间：2012-07-30T03:37:33.963
> 
> 标签：jsf, logging, glassfish, glassfish-3

我的 JSF 应用程序使用最新版本的 Glassfish 进行部署，使用 EclipseLink 作为 JPA 提供程序。我编写了一个相当简单的日志记录工具，将日志记录存储在 JPA 数据库中。Log 表的列包括时间戳（当然）、日志记录类型的枚举键字段、当前用户 ID、网络地址和字符串消息。

这些都没有坏，所以我自然想去修复它。（开玩笑）我真正想知道的是，我是否因为不使用已建立的日志 API 和包之一以及使用 Glassfish 之外的设施而遗漏了什么？我有兴趣了解我选择退出的任何日志阅读和分析工具。任何评论将不胜感激。

**更新到问题：** 如果我转换为 java.util.Logging，是否有将日志数据捕获到我的 SQL 后端的路径？搜索和查找内容非常方便，并且现有的日志记录工具似乎面向输出到文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:27:32.613

这个问题一直在我脑海中转来转去，而且——就像很多人一样——它只是引出了更多的问题。从哪儿开始？

java.util.logging (jul)、commons-logging、Log4J 等以及所有其他变体传统上都是*面向*诊断和管理日志的（我真的很努力不说*是有意的）。*它们不适合应用程序“事件”日志 - 取决于您对事件的定义。该声明背后的主要论点是，这些工具严格面向从代码中捕获文本字符串。

那么，**你的听众是谁**？

如果：

*   **开发商**；帮助诊断问题 - 对分类为 FINE*/TRACE/DEBUG/INFO/WARN/SEVERE的*自由格式文本使用 jul 和 family*
*   **管理员**；监控系统的健康状况 - 使用 jul & family 来获取分类为 INFO/WARN/SEVERE的*自由格式文本。*
*   **用户（包括支持人员）**；应用报告、统计等。您是否需要特定列的数据（用户名、公司、IP 地址、操作/事件等）。- 建立您自己的数据表，特别是如果您需要实时数据表。

如果您需要比一行文本更多的“带宽”，那么 jul & family 不适合您。

一些诊断记录器将允许您创建自定义类别 - 例如，我相信 Log4J 可以。大多数常见的替代品都没有（如果有的话，尤其是 jul 做得不好）。

## 最后说明

通过调用适当的 log.info() 语句将 DB/表驱动的日志详细信息捕获到诊断日志记录工具中是微不足道的，反向进行会有点困难。不要因为对另一个的简单好奇而扔掉一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T04:31:11.563

您主要错过了对 Java 工具箱中两种最流行的登录方式的理解。那些是 java.util.logging 和使用 log4j 的 commons 日志记录。是的，还有其他的，但如果你想让你的应用程序闻起来像 Java EE 应用程序，你会想要使用其中的一个。我相信 Glassfish 利用了 JUL，因此您可能想从那里开始。这些库具有可配置的附加程序，用于记录到数据库、文件甚至发送 SMS 文本消息。如果您坚持这些库提供的规定配置方法，您还将拥有其他开发人员已经知道如何使用的细粒度日志控制。

# api - 应用开发 - 将 Shopify 数据存储在本地数据库中

> ID：11715131
> 
> 赞同：5
> 
> 时间：2012-07-30T03:38:00.450
> 
> 标签：api, shopify, shopify-app

Shopify 应用程序将其应用程序所需的部分或全部数据存储在本地数据库中并且仅在客户端登录以更新数据时通过 Shopify API 获取数据是否正常？

我知道这有很多可能的场景，具体取决于应用程序的类型。

是否有人愿意分享他们在本地存储数据与始终通过 Shopify 访问数据的经验和优缺点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T20:25:20.580

我是 Shopify 的首席开发者倡导者 Edward。

我全心全意地建议您这样做，特别是如果您要对数据进行任何类型的计算或处理。及时提取数据可能会带来相当滞后的体验。

# asp.net-mvc-3 - MVC4 中 Asp.net Web Api 的 Http 错误请求 400

> ID：11715132
> 
> 赞同：1
> 
> 时间：2012-07-30T03:38:01.120
> 
> 标签：asp.net-mvc-3

这是我的配置和代码。

```
public class DeployLogController : ApiController
    {
        // GET /api/DeployLog
        public List<DeployLogModel> Get(Guid deployDetailId, Guid? deployLogId)
        {

            DeployLogService service = DeployLogService.Instance;

            return service.GetNewestDeployLogs(deployDetailId, deployLogId).ToList();

        }

        // POST /api/DeployLog
        public void Post(DeployLogModel deployLogModel)
        {
            DeployLogService service = DeployLogService.Instance;
            service.SavaDeployLogByServer(deployLogModel);
        }

    } 
```

Global.asax.cs 中 Application_Start 的代码如下。

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );

            routes.MapRoute(
               name: "Default",
               url: "{controller}/{action}/{id}",
               defaults: new { controller = "Login", action = "Login", id = UrlParameter.Optional }
           );

        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);

            BundleTable.Bundles.RegisterTemplateBundles();
            Configure(GlobalConfiguration.Configuration);

        } 
```

为什么我访问 Url“http://localhost:8119/api/DeployLog”时收到 400 Http Response 消息。好像是代码

```
routes.MapHttpRoute(
                    name: "DefaultApi",
                    routeTemplate: "api/{controller}/{id}",
                    defaults: new { id = RouteParameter.Optional }
                ); 
```

不起作用。我错过了什么吗？请帮我 。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T03:45:08.047

使用 Phil Haack 的[路由调试器](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)来确定是否命中了正确的路由。

看起来您要么走错了路线，要么您的路线没有与之对应的控制器方法（乍一看，您的设置似乎需要一个名为 GET 的控制器方法，而不是 DeployLog.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T17:45:02.160

我最近遇到了同样的问题——它是由控制器函数中的不同类型的参数引起的。在我的控制器示例中，有整数参数，但我尝试将字符串作为 Web api 查询的参数。这就是路由不起作用的原因。

# objective-c - 关于 NSNumber numberWithDouble

> ID：11715133
> 
> 赞同：1
> 
> 时间：2012-07-30T03:38:24.040
> 
> 标签：objective-c, ios

```
double test1 = 5.58f;

NSString *test2 = @"5.58";

NSLog(@"%@", [NSNumber numberWithDouble:test1]);

NSLog(@"%@", [NSNumber numberWithDouble:[test2 doubleValue]]); 
```

输出：

> 5.579999923706055
> 
> 5.58

为什么转换是不同的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T03:43:41.770

可能是因为 5.58f 是 a `float`，而不是 a `double`。

# php - 用于将数据插入 MySQL 的 PHP 代码

> ID：11715137
> 
> 赞同：-1
> 
> 时间：2012-07-30T03:38:47.337
> 
> 标签：php, mysql

我正在尝试设置一个网页来管理我的数据库。我有一个 15 行的表，我正在尝试编写一个脚本，通过一个具有下拉菜单的表单将数据插入 MySQL 数据库。我不断收到此错误：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Staff Database Update Form</title>
<style type="text/css">
.arial {
    font-family: Verdana, Geneva, sans-serif;
    font-size: 10px;
}
.arial {
    font-size: 9px;
}
.arial1 {
    font-size: 9px;
}
.ARIALBOLD {
    font-weight: bold;
    text-align: center;
}
.A1 {
    font-family: Arial, Helvetica, sans-serif;
}
.A9 {
    font-size: 9px;
}
.Centre {
}
</style>
</head>

<body class="Centre">
<span class="ARIALBOLD">STAFF INFORMATION</span>
<form method="post" action="insert.php"> 
  <table width="442" border="0" align="center">
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial"><strong>NAME</strong></span></th>
      <td width="1">&nbsp;</td>
      <td colspan="5">      <span class="arial">
        <input type="text" name="staff_name" id="staff_name" />
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial"><strong>ADDRESS</strong></span></th>
      <td>&nbsp;</td>
      <td colspan="5">      <span class="arial">
        <textarea name="home_address" id="home_address" cols="30" rows="5"></textarea>
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">CITY</span></th>
      <td>&nbsp;</td>
      <td colspan="5">        <span class="arial">
        <select name="city" id="city">
          <option value="London">London</option>
          <option value="Luton">Luton</option>
          <option value="Birmingham">Birmingham</option>
          <option value="Manchester">Manchester</option>
          <option value="Reading">Reading</option>
          <option value="Coventry">Coventry</option>
          <option value="Brighton">Brighton</option>
          <option value="Porthsmoth">Porthsmoth</option>
        </select>
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">AREA</span></th>
      <td>&nbsp;</td>
      <td colspan="5">        <span class="arial">
        <select name="area" id="area">
          <option value="City">City</option>
          <option value="North">North</option>
          <option value="South">South</option>
          <option value="West">West</option>
          <option value="East">East</option>
          <option value="North West">North West</option>
          <option value="North East">North East</option>
          <option value="South West">South West</option>
          <option value="South East">South East</option>
        </select>
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">PROFESSION</span></th>
      <td>&nbsp;</td>
      <td colspan="5">        <span class="arial">
        <select name="profession" id="profession">
          <option value="RGN">RGN</option>
          <option value="Physiotherapist">Physiotherapist</option>
          <option value="Radiographer">Radiographer</option>
          <option value="SALT">SALT</option>
          <option value="Pharmacist">Pharmacist</option>
          <option value="Doctor">Doctor</option>
          <option value="HCA">HCA</option>
          <option value="Porter">Porter</option>
        </select>
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">SPECIALITY</span></th>
      <td>&nbsp;</td>
      <td colspan="5">      <span class="arial">
        <input type="text" name="speciality" id="speciality" />
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">COMPANY</span></th>
      <td>&nbsp;</td>
      <td colspan="5">      <span class="arial">
        <input type="text" name="company" id="company" />
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">HOME TEL.</span></th>
      <td>&nbsp;</td>
      <td colspan="5">      <span class="arial">
        <input type="text" name="home_tel" id="home_tel" />
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">MOBILE</span></th>
      <td>&nbsp;</td>
      <td colspan="5">      <span class="arial">
        <input type="text" name="mobile_tel" id="mobile_tel" />
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">EMAIL</span></th>
      <td>&nbsp;</td>
      <td colspan="5">      <span class="arial">
        <input type="text" name="email_address" id="email_address" />
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">PROFESSIONAL BODY</span></th>
      <td>&nbsp;</td>
      <td colspan="5">        <span class="arial">
        <select name="pro_body" id="pro_body">
          <option value="NMC">NMC</option>
          <option value="AHP">AHP</option>
          <option value="GMC">GMC</option>
          <option value="Others">Others</option>
        </select>
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">REGISTRATION</span></th>
      <td>&nbsp;</td>
      <td colspan="5">      <span class="arial">
        <input type="text" name="reg_no" id="reg_no" />
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">EXPIERY DATE</span></th>
      <td>&nbsp;</td>
      <td colspan="5">      <span class="arial">
        <input type="text" name="exp_date" id="exp_date" />
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row"><span class="arial">PROFILE</span></th>
      <td rowspan="2">&nbsp;</td>
      <td colspan="5" rowspan="2">      <span class="arial">
        <textarea name="profile" id="profile" cols="30" rows="5"></textarea>
      </span></td>
    </tr>
    <tr>
      <th colspan="4" align="left" class="A9" scope="row">&nbsp;</th>
    </tr>
    <tr>
      <th colspan="10" align="left" class="arial" scope="row">&nbsp;</th>
    </tr>
    <tr>
      <th width="26" align="left" class="arial" scope="row">&nbsp;</th>
      <th width="22" align="left" class="arial" scope="row">&nbsp;</th>
      <th width="22" align="left" class="arial" scope="row">&nbsp;</th>
      <th width="19" align="left" class="arial" scope="row">&nbsp;</th>
      <th align="left" class="arial" scope="row">&nbsp;</th>
      <th width="30" align="left" class="arial" scope="row">&nbsp;</th>
      <th width="13" align="left" class="arial" scope="row">&nbsp;</th>
      <th width="13" align="left" class="arial" scope="row">&nbsp;</th>
      <th width="56" align="left" class="arial" scope="row"><span class="arial">
        <input type="submit" name="submit" id="submit" value="Submit" />
      </span></th>
      <th width="156" align="left" class="arial" scope="row"><span class="arial">
        <input type="reset" name="Reset" id="reset" value="Reset" />
      </span></th>
    </tr>
  </table>
  <p>&nbsp;</p>
</form>
</body>
</html> 
```

我的PHP代码：

```
<?php
  $host="localhost"; // Host name 
  $username=""; // Mysql username 
  $password=""; // Mysql password 
  $db_name=""; // Database name 
  $tbl_name="staff"; // Table name 

  // Connect to server and select database.
  mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
  mysql_select_db("$db_name")or die("cannot select DB");

  // Get values from form 
  $staff_name=$_POST['staff_name'];
  $home_address=$_POST['home_address'];
  $city=$_POST['city'];
  $area=$_POST['area'];
  $profession=$_POST['profession'];
  $speciality=$_POST['speciality'];
  $company=$_POST['company'];
  $home_tel=$_POST['home_tel'];
  $mobile_tel=$_POST['mobile_tel'];
  $email=$_POST['email'];
  $pro_body=$_POST['pro_body'];
  $reg_no=$_POST['reg_no'];
  $exp_date=$_POST['exp_date'];
  $profile=$_POST['profile'];

  // Insert data into mysql 
  $sql="INSERT INTO $tbl_name(SID, staff_name, home_address, city, area, profession, speciality, company, home_tel, mobile_tel, email, pro_body, reg_no, exp_date, profile)VALUES('NUL', '$staff_name', '$home_address', '$city', '$area', '$profession', '$speciality', '$company', '$home_tel', '$mobile_tel', '$email', '$pro_body', '$reg_no', '$exp_date', '$profile')";
  $result=mysql_query($sql);

  // if successfully insert data into database, displays message "Successful". 
  if($result){
    echo "Successful";
    echo "<BR>";
    echo "<a href='insert.php'>Back to main page</a>";
  } else {
    echo "ERROR";
  }
?> 

<?php 
  // close connection 
  mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:47:22.410

```
$sql="INSERT INTO $tbl_name(SID, staff_name, home_address, city, area, profession, speciality, company, home_tel, mobile_tel, email, pro_body, reg_no, exp_date, profile) VALUES('NUL', '$staff_name', '$home_address', '$city', '$area', '$profession', '$speciality', '$company', '$home_tel', '$mobile_tel', '$email', '$pro_body', '$reg_no', '$exp_date', '$profile')"; 
```

也许之前有一个空间

```
VALUES 
```

至少是一个好的开始；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:51:35.590

对于电子邮件，您有 name 和 id 'email_address' 并且在插入查询中您尝试使用

```
$email=$_POST['email'] 
```

# c++ - 在 std::shared_ptr 中使用 = 运算符时，先前的指针是否被破坏？

> ID：11715146
> 
> 赞同：1
> 
> 时间：2012-07-30T03:42:21.653
> 
> 标签：c++, visual-c++, pointers, shared-ptr, smart-pointers

如果我使用 = 运算符为其分配一个新指针，前一个指针是否会在 std::shared_ptr 中自动销毁（或取消引用）？

例如：

```
std::shared_ptr< Type > sp1 (ptr1, std::ptr_fun(destroy));
std::shared_ptr< Type > sp2 (ptr2);

sp1 = sp2; // now, will ptr1 be dereferenced and / or destroyed?
// and will the destroy() function get called? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T04:06:57.487

是的，否则你会有泄漏，它会破坏拥有智能 ptr 的目的。

刚刚做了一个快速测试，我没有发现任何泄漏

```
#define BOOST_TEST_MODULE leakTest
#include <boost/test/unit_test.hpp>

BOOST_AUTO_TEST_CASE( Leak_Test )
{
    std::shared_ptr< int > sp1 (new int(3));
    std::shared_ptr< int > sp2 (new int(4));

    sp1 = sp2;
} 
```

结果：

> 运行 1 个测试用例...
> 
> ***未检测到错误 按任意键继续。

. .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T04:23:50.933

是的，它确实。shared_ptr 是一个数据结构，它有一个内部对象，它实际上保留了原始指针。这个内部对象有一个计数器，每次我们复制 shared_ptr 时递增，而当 shared_ptr 被销毁或分配另一个 shared_ptr 时递减。一旦计数下降到零，内部对象就会与原始指针一起被销毁。

在你的情况下：

```
std::shared_ptr< Type > sp1 (ptr1, std::ptr_fun(destroy)); //the counter of sp1 is 1
std::shared_ptr< Type > sp2 (ptr2); //the counter of sp2 is 1
sp1 = sp2; //the counter of sp1 is 0, the counter of sp2 is 2 
```

因此，ptr1 将被销毁，sp1 和 sp2 将共享相同的指针 ptr2

# objective-c - 为什么我的 AVPlayer 音量没有消失？

> ID：11715148
> 
> 赞同：5
> 
> 时间：2012-07-30T03:42:37.923
> 
> 标签：objective-c, ios, audio, video, avplayer

我正在尝试使用 AVMutableAudioMixInputParameters 的 setVolumeRampFromStartVolume 方法将 AVPlayer 的音量淡化为 0。这是我的代码：

```
-(void)fadeOutVolume
{
    // AVPlayerObject is a property which points to an AVPlayer
    AVPlayerItem *myAVPlayerItem = AVPlayerObject.currentItem;
    AVAsset *myAVAsset = myAVPlayerItem.asset;
    NSArray *audioTracks = [myAVAsset tracksWithMediaType:AVMediaTypeAudio];

    NSMutableArray *allAudioParams = [NSMutableArray array];
    for (AVAssetTrack *track in audioTracks) {

        AVMutableAudioMixInputParameters *audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:track];
        [audioInputParams setVolumeRampFromStartVolume:1.0 toEndVolume:0 timeRange:CMTimeRangeMake(CMTimeMake(0, 1), CMTimeMake(5, 1))];
        [allAudioParams addObject:audioInputParams];

    }

    AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
    [audioMix setInputParameters:allAudioParams];

} 
```

谁能看到这段代码有什么问题？它不会正确淡出音量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T17:30:39.140

我错过了这条关键线：

```
[myAVPlayerItem setAudioMix:audioMix]; 
```

这是一个相对简单的解决方法，我很失望通常超级快速和敏锐的 StackOverflow 社区没有发现问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-30T04:58:54.563

```
 [audioInputParams setVolumeRampFromStartVolume:1.0 toEndVolume:0 timeRange:CMTimeRangeMake(CMTimeMake(0, 1), CMTimeMake(5, 1))]; 
```

在此您将开始设置为 1.0，结束设置为 0，因此只有音频逐渐淡出

# maven - 无法读取架构文档 jasperreport.xsd

> ID：11715150
> 
> 赞同：1
> 
> 时间：2012-07-30T03:42:43.587
> 
> 标签：maven, jasper-reports, tomcat7, war

我有一个使用 Maven 构建的项目，最终创建了一个 WAR。War 被部署到 Tomcat 7 服务器上。当我尝试创建 JasperReport 时，出现以下错误。有谁知道这个问题的解决方案？JasperReports 依赖包括有问题的文件。我目前正在使用 JasperReports 4.1.2，甚至还保留在 4.6.0 中。

```
net.sf.jasperreports.engine.JRException: org.xml.sax.SAXParseException; lineNumber: 2; columnNumber: 422; schema_reference.4: Failed to read schema document 'tomcat-7/work/Catalina/loader/net/sf/jasperreports/engine/dtds/jasperreport.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.
    at net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML(JRXmlLoader.java:247)
    at net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML(JRXmlLoader.java:230)
    at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:218)
    at net.sf.jasperreports.engine.JasperCompileManager.compileReport(JasperCompileManager.java:196)
    at GeneralReport.processRequest(GeneralReport.java:80)
    at GeneralReport.doGet(GeneralReport.java:140)
    at javax.servlet.http.HttpServlet.service(Unknown Source)
    at javax.servlet.http.HttpServlet.service(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:19:20.450

我遇到的问题是由于 NetBeans 和 Tomcat7。Netbeans 使用 Catalina/work 的临时目录启动 tomcat。使用默认安装的tomcat，不在该目录下设置。我相信它是/var/tmp/tomcat7。但无论如何，Netbeans 是按照自己的方式设置的。因此，要解决此问题，请在 catalina 文件夹下创建一个工作目录，然后在此处允许完整的用户/组权限。

这与 JasperReports 的关系：无法将依赖项部署到它所期望的目录。

# jquery - JQuery - Show() 然后 focus() 不能按预期工作

> ID：11715152
> 
> 赞同：2
> 
> 时间：2012-07-30T03:43:09.907
> 
> 标签：jquery, focus, show, tabindex

这是脚本

```
<script src="Scripts/jquery-1.7.min.js" type="text/javascript"></script>
   <script type="text/javascript">
   $(document).ready(function() {
        $('input[type="text"]').blur(function() {

            $(this).removeClass("focus");
            var a = $(this).context.id;

            if (a.indexOf('guest') > 0)
            {
                if ($(this).val()&&$(this).val()!=0)
                    {
                        //$(this).parent().parent().next().show();      
                        var b = $(this).parent().parent().next().children().find("textarea");
                        b.parent().parent().show();
                        b.addClass("focus");
                        b.focus();
                    }

                else
                    {
                        $(this).parent().parent().next().children().find("textarea").val('');
                        $(this).parent().parent().next().hide();}       
            }
        });

    });
</script> 
```

这是HTML

> ```
> <table width="620" border="1">
>   <tr>
>      <td>&nbsp;</td>
>      <td style="width:40%"> Memebers $40 </td>
>      <td style="width:40%"> Each guest $45 </td>
>   </tr>
>   <tr>
>      <td><input name="breakfast1" type="checkbox" value="breakfast1" tabindex="0" /></td>
>      <td>September 12, 2012</td>
>      <td style="width:50%">How many guests
>         <input type="text" maxlength="2" size="3" id="1guest" name="1guest" tabindex="1" />
>      </td>
>   </tr>
>   <tr style="display:none">
>      <td colspan="2">&nbsp;</td>
>      <td>
>         <textarea class="guests" style="width:300px;" id="1mguests" name="1mguests"  rows="4" tabindex="2">   </textarea>
>         <br /><span></span>
>      </td>
>   </tr>    </table>    and so on<br/> 
> ```

我要完成什么：当从 1guest 文本字段中跳出时，检查输入字段是否有内容，如果有，请取消隐藏（显示）下一个 tr 并将焦点设置到该 tr 中的 textarea。

问题是什么：当一个人在 1guest 输入字段中输入客人数量并 TAB 出来时，隐藏的 tr 显示 OK，tr 中的 textarea 输入获得类 .focus 但没有获得 foucs。可能是什么问题？是否因为 TAB 在焦点之后应用，因此进入下一个输入字段？无论如何，你能提出一个解决方案来解决我想要完成的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T03:57:19.613

可能是 .show() 依次执行，但在 addClass() 和 focus() 之后完成

试试这个：

```
b.parent().parent().show(function(){
     b.addClass("focus");
     b.focus();
}); 
```

# java - 退出应用程序后如何保留变量的值

> ID：11715154
> 
> 赞同：0
> 
> 时间：2012-07-30T03:43:36.140
> 
> 标签：java, android, static

> **可能重复：**
> [应用关闭后变量保留值](https://stackoverflow.com/questions/6913819/variables-retaining-values-after-app-close)

我对android和java比较陌生，所以如果这是一个愚蠢的问题，我很抱歉。我有一个 android 应用程序，允许用户拍照并保存它们。我将图片保存为附件 0、附件 1 等。

我使用一个整数来决定附件编号，每次创建附件时这个 int 都会增加。我的照片使用正确的名称正确保存，但是当我关闭我的应用程序时，整数的值被重置为 0，并且已经保存的附件被覆盖。如何防止整数在关闭和打开应用程序时重置？谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T03:47:13.253

用于[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)保存`int`值，然后将其重新加载到`onCreate`.

[这里](http://developer.android.com/guide/topics/data/data-storage.html)有一段很棒的代码供你学习，我会给你一些伪代码来帮助你：

```
onCreate:
    prefs = <load shared preferences>;
    yourInt = prefs.getInt("name of your int", 0);
    // do whatever with yourInt

onPause: // maybe not onPause, maybe you want to save each time it changes?
    prefs = <load shared preferences>;
    editor = prefs.edit();
    editor.putInt("name of your int", yourInt);
    editor.commit(); 
```

那应该这样做！这是 的基本概念`SharedPreferences`，我认为根据您的目的调整上面的教程不会有任何问题。

# google-maps-api-3 - 用户的当前位置标记只有在定义的矩形内时才可点击（或可见）

> ID：11715157
> 
> 赞同：0
> 
> 时间：2012-07-30T03:43:46.813
> 
> 标签：google-maps-api-3, geolocation, markers, clickable

另一个绝对的初学者...我已经建立了一个页面，可以对用户进行地理定位并在地图上放置一个标记。这很好用。我还创建了一个矩形（主要用于 ST_INTERSECTS 和 Fusion Table - 但这不是这个问题的一部分）。这也很好用。我接下来要实现的是使用户的位置标记要么只出现，要么只在它在矩形内时才可点击（要么就可以）——即，如果用户在矩形定义的区域内。有没有一种简单的方法可以做到这一点？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:33:58.500

我假设它是 Google Maps Javascript API 版本 3。

如果标记不可见，则无法单击它，因此您可以通过仅在有效的情况下将标记添加到地图来满足这两个条件。

首先，定义您的区域：

```
var sw = new google.maps.LatLng(...,...); // SW corner
var ne = new google.maps.LatLng(...,...); // NE corner
var bounds = new google.maps.LatLngBounds(sw,ne); 
```

然后定义您的标记位置：

```
var mloc = new google.maps.LatLng(...,...); 
```

然后看看是否应该将其添加到地图中：

```
if (bounds.Contains(mloc)) { addMarker(mloc) } 
```

请注意，这`addMarker()`是您需要编写的函数，它不是 API 的一部分。

# php - 如果 isset 返回 false，则不初始化变量

> ID：11715159
> 
> 赞同：0
> 
> 时间：2012-07-30T03:44:08.437
> 
> 标签：php, codeigniter, isset

我有一个这样的简单声明：

```
$data['title']  =   isset($domain['title']) ? $domain['title'] : ''; 
```

还行吧。然后在使用 codeigniter 活动记录的插入查询中使用数据数组。现在我想问有没有一种方法，如果isset返回false，那么不要初始化$data['title']。

我知道这里的替代方案

```
if(isset($domain['title'])){
   $data['title'] = $domain['title'];
} 
```

我想知道我们如何`if`对上面的指令做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T03:46:51.320

我能看到的最短方法是：

```
if (isset($domain['title'])) $data['title'] = $domain['title']; 
```

但坚持你的第二个例子，它更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:47:26.720

你可以这样做：

```
$data['title'] = !isset($domain['title'] ? : $domain['title']; 
```

在 php 5.3 或更高版本中。

但我不推荐它，因为它是丑陋的混乱代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T03:50:25.013

你可以这样做，但 use`if`更具可读性。

```
isset($domain['title']) && ($data['title'] = $domain['title']); 
```

编辑：使用循环的示例。

```
foreach (array('title', 'body', 'footer') as $key) {
  if (isset($domain[$key])) {
   $data[$key] = $domain[$key];
  }
} 
```

# c - 纯 C 中的符号计算库

> ID：11715162
> 
> 赞同：14
> 
> 时间：2012-07-30T03:44:42.897
> 
> 标签：c, math, language-binding

是否存在用纯 C 编写的符号计算库？符号计算，如以符号形式处理数学方程。

我知道有*Mathematica*和*Sympy*。但是，我有兴趣创建符号计算库的高性能纯 C 实现以绑定到脚本语言，特别是 Ruby 启动。

他们似乎需要这样一个符号数学库。随着时间的推移，理想情况下，该库可以以与[libgit2](http://libgit2.github.com/)类似的方式构建，其中有一个项目的中央 C 实现，并且为了创建与其他语言的绑定而分支了各种实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T09:57:56.713

[Mathomatic](https://github.com/mfillpot/mathomatic)是用 C 语言实现的，可能适合您的目的。

> Mathomatic™ 是一个可移植的、命令行的、教育性的 CAS 和计算器软件，完全用 C 编程语言编写。它是免费和开源软件 (FOSS)，根据 GNU 宽通用公共许可证（LGPL 版本 2.1）发布，自 1986 年以来一直在持续开发中。该软件可以同时对代数方程进行符号求解、简化、组合和比较根据需要执行广义标准、复数、模数和多项式算术。它做了一些计算，并且非常容易编译/安装、学习和使用。

从[开发人员手册](https://htmlpreview.github.io/?https://github.com/mfillpot/mathomatic/blob/master/doc/manual.html#developer)：

> Mathomatic 源代码也可以编译为符号数学库，可从任何 C 兼容程序调用，并且大部分与操作系统无关。

* * *

不幸的是，这个包的作者已经去世，这个软件不再被维护。最新版本存档在 GitHub 中，上面的链接已经更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T15:12:01.940

你看过[GAP](http://www.gap-system.org/)吗？从其网站：

> GAP 是一个计算离散代数系统，特别强调计算群论。GAP 提供了一种编程语言、一个由数千个函数组成的库，这些函数实现了用 GAP 语言编写的代数算法以及代数对象的大型数据库。另请参阅数学功能的概述和描述。GAP 用于研究和教学，以研究组及其表示、环、向量空间、代数、组合结构等。该系统，包括源代码，是免费分发的。您可以学习并轻松修改或扩展它以供您特殊使用。

根据其[Wikipedia 页面](http://en.wikipedia.org/wiki/GAP_computer_algebra_system)，GAP 是用 C 实现的，源代码是免费提供的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T03:59:19.293

请看 Axiom——一个通用的计算机代数系统。你也可以使用 Giac——Giac 是一个免费的 (GPL) C++ 库，它是计算内核，它可以在其他 C++ 程序中使用。

[http://www.axiom-developer.org/](http://www.axiom-developer.org/)

[http://www-fourier.ujf-grenoble.fr/~parisse/giac.html](http://www-fourier.ujf-grenoble.fr/~parisse/giac.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-09T19:59:08.180

你可以从[Maxima](http://maxima.sourceforge.net/)开始，使用[GCL](http://www.gnu.org/software/gcl/)将其从 Common Lisp 翻译成 C。

> GCL 是 GNU 项目的官方 Common Lisp。它的设计利用系统的 C 编译器来编译为本机目标代码

肯定有保留中间 C 源文件的选项。

> GCL 目前在 11 个 GNU/Linux 架构（x86 powerpc s390 sparc arm alpha ia64 hppa m68k mips mipsel）、Windows、Sparc Solaris 和 FreeBSD 上编译自己和主要的自由软件 Lisp 应用程序 Maxima、ACL2 和 Axiom。

# php - 在会话中保存常量 GET 变量

> ID：11715167
> 
> 赞同：0
> 
> 时间：2012-07-30T03:45:18.667
> 
> 标签：php, mysql

有人可以向我解释`$_GET`在会话中存储变量的最佳方式吗？唯一的`sessions`更改方法是当我们验证会话正在更改的数据与`GET`变量不同时。

目前我有

```
 $tid = clean_get($_GET['tid']); 
```

在包含在每个页面上的全局文件中，问题在于一旦用户不在URL 中设置的页面上，该值`$tid`将被删除并且不会存储在`session`我想要的位置。`$tid`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T03:52:11.843

如果您在 url 中获得 $_GET['tid'] ，则通过该新值再次设置会话，否则从会话中恢复它。就是这样。

```
session_start();
$tid = (isset($_GET['tid']) && $_GET['tid']!="") ? clean_get($_GET['tid']) : $_SESSION['tid']; 
```

试试这个，告诉我它解决了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T03:51:31.193

使用[isset()](http://php.net/manual/en/function.isset.php)之类的函数来查看它是否正在发送。只有这样你才应该更换它：

```
if(isset($_GET['tid']))
{
    $tid = clean_get($_GET['tid'])
    // Do stuff to change session data.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T03:55:08.957

我认为您正在寻找的是类似的东西

```
session_start();
foreach ($_GET as $key=>$value) {
    $_SESSION['getValues'][$key] = clean_get($value);
} 
```

这会将所有值存储在 $_SESSION 中的 $_GET 中。要稍后检索值，您只需`$_SESSION['getValues']['tid']`在调用`session_start()`.

在这里，我假设这`clean_get()`只是格式化和/或转义来自表单的数据的东西，因此在进入会话之前对每个值调用它将在需要时进行所有清理。

注意：只调用`session_start()`一次，并确保在对 执行任何操作之前这样做`$_SESSION`，否则会收到错误消息。

# r - 我如何在 R 中进行样条插值

> ID：11715169
> 
> 赞同：1
> 
> 时间：2012-07-30T03:46:12.413
> 
> 标签：r, spline, spatial-interpolation

我是 R 的新手，并试图在 R 中进行插值（对不起，如果这似乎是一个蹩脚的问题）。我有一些点（Lat、Lan 和每个点的一个整数值）需要对它们进行插值。我是 GIS 用户，我是在 ARCGIS 中完成的，但据我所知，ArcGIS 没有给我样条曲线的 RMSE，所以我想在 R 中做并学习一些 R。我已经学习了基础知识，例如绘图、、、 ,, 你能告诉我我应该用 R 语言做什么来插值（全局级别）并计算 RMSE 吗？

我真的很感谢汉克的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:35:26.327

我会看一下`Tps`字段包中的函数，其中 Tps 代表薄板样条。Tps（来自[文档](http://www.image.ucar.edu/GSP/Software/Fields/Help/Tps.html)）：

> 将薄板样条曲面拟合到不规则间隔的数据。通过广义交叉验证选择平滑参数。假设模型是加法 Y = f(X) +e，其中 f(X) 是广告维度表面。这是空间过程估计的一个特例。

有关一些代码示例，请参阅 Tps 的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T06:49:44.397

你有使用样条曲线的理由吗（除了你在软件中拥有的东西）？您可能应该阅读[http://cran.r-project.org/web/views/Spatial.html](http://cran.r-project.org/web/views/Spatial.html)并考虑一本关于地统计学的好书[http://spatial-analyst.net/book/](http://spatial-analyst.net/book/)然后您可能想要做使用克里金法进行插值。

# objective-c - 核心数据表视图删除崩溃

> ID：11715176
> 
> 赞同：-1
> 
> 时间：2012-07-30T03:47:25.110
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, core-data

我在我的 iPhone 应用程序中设置了父子核心数据关系。我有一个制造商对象和一个汽车对象。它是与制造商作为所有者的一对多关系。主视图是包含制造商的表视图。详细视图是另一个表视图，其中包含不同类型的汽车。我一直使用[Tim Roadley 的核心数据教程](http://timroadley.com/2012/02/14/core-data-basics-part-3-editing-and-deleting/)作为基础。本教程使用[斯坦福的核心数据表视图库](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/sample_code/CoreDataTableViewController_0.zip)作为表视图。

添加汽车和制造商对我没有任何问题，但是当我在表格视图中进入并删除多辆汽车时，我收到此错误：

```
 *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:1037 
```

2012-07-29 23:39:33.561 应用程序 [16368:c07] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。现有节中包含的行数更新后 (0) 必须等于更新前该节中包含的行数 (2)，加上或减去从该节中插入或删除的行数（0 插入，1 删除），再加上或减去移入或移出该部分的行数（0移入，0移出）。

如果我删除唯一的汽车，它可以正常工作，直到我尝试添加一辆新车，当我收到此错误时：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Illegal attempt to establish a relationship 'manufacturer' between objects in different contexts (source = <Car: 0x6d96da0> (entity: Car; id: 0x6d8a3c0 <x-coredata:///Car/tC78E17EB-1D68-4998-8C4D-6D1199CE253F4> ; data: {
dateAdded = nil;
manufacturer = nil;
carName = new;
}) , destination = <Manufacturer: 0x6bb1f40> (entity: Manufacturer; id: 0x6d87340 <x-coredata://2E8DDF34-B01A-4203-A53E-73DBE6A2F976/Garden/p6> ; data: <fault>))' 
```

这是我的编辑方法：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{

if (editingStyle == UITableViewCellEditingStyleDelete) {

    [self.tableView beginUpdates];

    Plant *plantToDelete = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NSLog(@"Deleting plant '%@'", plantToDelete.plantName);
    [self.managedObjectContext deleteObject:plantToDelete];
    [self.managedObjectContext save:nil];

    //delete empty tableview row
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
    NSLog(@"Before performFetch...");
    [self performFetch];
    NSLog(@"After performFetch...");

    [self.tableView endUpdates];
}
} 
```

该`performFetch`方法包含在前面提到的`CoreDataTableViewController`文件中。为了您的方便，这里是：

```
(void)performFetch
{
_debug = YES;

if (self.fetchedResultsController) {
    if (self.fetchedResultsController.fetchRequest.predicate) {
        if (self.debug) NSLog(@"[%@ %@] fetching %@ with predicate: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName, self.fetchedResultsController.fetchRequest.predicate);
    } else {
        if (self.debug) NSLog(@"[%@ %@] fetching all %@ (i.e., no predicate)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName);
    }
    NSError *error;
    [self.fetchedResultsController performFetch:&error];
    if (error) NSLog(@"[%@ %@] %@ (%@)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), [error localizedDescription], [error localizedFailureReason]);
} else {
    if (self.debug) NSLog(@"[%@ %@] no NSFetchedResultsController (yet?)", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
}
[self.tableView reloadData]; 
```

}

根据其他问题，我通过使用`beginUpdates`and正确地做到了这一点`endUpdates`。这是一个令人费解的错误。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:40:09.830

我不确定您为什么要再次执行提取，如果从上下文中删除对象，则提取的结果控制器已经知道该更改。我认为您遇到的主要问题是在处理表的更新过程中调用 perform fetch。如果您注释掉该行，它仍然有错误吗？

此外，以下可能是问题的另一部分，也可能不是问题的另一部分，因为这是您与我自己的代码不同的地方：

我之前没有在 tableView:CommitEditingStyle: 中看到开始/结束编辑调用。我自己在该方法中的过程通常会删除对象，而不用担心表行。表行在 fetchedResultController 委托方法中进行协调，如下所示：

```
 -(void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    //the fetch controller is about to start sending change notifications so prepare the tableview
    [self.tableView beginUpdates];
}

-(void)controller:(NSFetchedResultsController *)controller 
  didChangeObject:(id)anObject 
      atIndexPath:(NSIndexPath *)indexPath 
    forChangeType:(NSFetchedResultsChangeType)type 
     newIndexPath:(NSIndexPath *)newIndexPath {

    // reconcile your rows here
    switch(type) {
     case NSFetchedResultsChangeInsert:

       break;

     case NSFetchedResultsChangeDelete:
       // this one is you
       [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
       break;

     case NSFetchedResultsChangeUpdate:

       break;

     case NSFetchedResultsChangeMove:

       break;
}

-(void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.tableView endUpdates];
} 
```

毕竟，只要行数与获取的对象数相匹配，就不会出现该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T01:47:10.137

尝试删除线条

```
//delete empty tableview row
[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
NSLog(@"Before performFetch...");
[self performFetch];
NSLog(@"After performFetch..."); 
```

我相信 CoreDataTableViewController 会自动处理从表中删除行。您实际上是在两次删除导致错误的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T17:13:35.450

当我打开作为 Tim Roadley 的 CoreDataTableViewController 的子类的 tableViewController 时，我遇到了同样的错误。我的特定应用程序不需要用户能够添加或删除行，但它允许他们按名称和距离重新排序获取的结果以及搜索数据。我使用了 Dean David 的答案（上面接受的答案），但在每个 case 语句之后，我只添加了一个 break 语句。到目前为止，这适用于这个应用程序！

# c - 有没有一种简单的方法可以将带符号的字符转换为没有符号扩展的 int？

> ID：11715179
> 
> 赞同：1
> 
> 时间：2012-07-30T03:48:08.923
> 
> 标签：c

在 C 中，我想将 a 转换`signed char`为`int`，*没有*符号扩展名。因此，如果`signed char`是 0xFF，则`int`也将是 0xFF。简单地转换为 int 是行不通的；结果将是 0xFFFFFFFF（在 32 位机器上）。

这似乎有效（并且已经非常简单）：

```
int convert(signed char sc) {
    return 0xFF & (int) sc; 
} 
```

但是有没有更简单或更惯用的方法？

**编辑：**固定功能

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T03:49:30.287

你可以`unsigned char`先投。假设定义：

```
signed char c; 
```

你可以这样做：

```
int i = (unsigned char)c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:02:17.270

您还可以使用联合（行为是实现定义的，但它在很大程度上受到编译器的支持）。

```
int
convert(signed char ch)
{
    union {
        signed char c1;
        int c2;
    } input = { ch };
    return input.c2;
} 
```

或者，正如 Carl Norum 所说，您可以简单地转换为`unsigned char`：

```
int 
convert(signed char ch)
{
    return (int)(unsigned char)ch;
} 
```

但要小心，因为`0xFF` `char`值溢出（十进制为 255）。

# android - android stringbuilder editTexts

> ID：11715182
> 
> 赞同：1
> 
> 时间：2012-07-30T03:49:23.417
> 
> 标签：android, stringbuilder

我有很多 editText 字段，用户可以在其中添加信息。

从这些editTexts 我想创建一个字符串。我目前正在使用 stringBuilder。但是，如果用户没有在某些 editTexts 中输入任何内容，我希望 stringbuilder 忽略这些字段。这可能吗？如果是这样，我该怎么做？

这就是我目前正在做的事情：

```
String baseString = editText1.getText().toString();
    String string2= editText2.getText().toString();
    String string3= editText3.getText().toString();

 StringBuilder superStringBuilder = new StringBuilder(baseString);
    superStringBuilder.append(string2 + string3);

    String superString = superStringBuilder.toString(); 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T03:53:11.347

您可以执行以下操作：

```
If (string2.equals("")){
    //Then do something when the edit text is blank.
    superStringBuilder.append(string3);

} else{
    superStringBuilder.append(string2 + string3);
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:26:42.553

感谢您的帮助，如果他们有同样的问题，这是其他人的一个例子。

```
 String string1 = editText1.getText().toString();
    String string2 = editText2.getText().toString();
    String string3 = editText3.getText().toString();
    String string4 = editText4.getText().toString();
    String string5 = editText5.getText().toString();

    StringBuilder superStringBuilder = new StringBuilder(string1);

    if (string2.equals("")){
        superStringBuilder.append(""); 
    }else { superStringBuilder.append(string2);
    }

    if (string3.equals("")){
        superStringBuilder.append(""); 
    }else { superStringBuilder.append(string3);
    }

    if (string4.equals("")){
        superStringBuilder.append(""); 
    }else { superStringBuilder.append(string4);
    }

    if (string5.equals("")){
        superStringBuilder.append(""); 
    }else { superStringBuilder.append(string5);
    }

    String superString = superStringBuilder.toString(); 
```

这将使字符串过滤掉其中没有文本的editText :) 所以使用 stringbuilder 创建的新字符串是 4 个字符串或 2 个字符串 :)

谢谢你

# android - 请帮我解决这些错误

> ID：11715185
> 
> 赞同：0
> 
> 时间：2012-07-30T03:49:39.323
> 
> 标签：android, eclipse

我尝试为多点触控编写代码，但使用了图像。不幸的是，它不会启动。代码是正确的：它没有错误。但是，日志猫产生了太多错误。以下是这些错误。谢谢！

```
07-30 11:12:15.930: E/AndroidRuntime(642): FATAL EXCEPTION: main
07-30 11:12:15.930: E/AndroidRuntime(642): java.lang.RuntimeException: Unable to start activity ComponentInfo{sample.app.touchsample/sample.app.touchsample.TouchsampleActivity}: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.os.Looper.loop(Looper.java:137)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.app.ActivityThread.main(ActivityThread.java:4745)
07-30 11:12:15.930: E/AndroidRuntime(642):  at java.lang.reflect.Method.invokeNative(Native Method)
07-30 11:12:15.930: E/AndroidRuntime(642):  at java.lang.reflect.Method.invoke(Method.java:511)
07-30 11:12:15.930: E/AndroidRuntime(642):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-30 11:12:15.930: E/AndroidRuntime(642):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-30 11:12:15.930: E/AndroidRuntime(642):  at dalvik.system.NativeStart.main(Native Method)
07-30 11:12:15.930: E/AndroidRuntime(642): Caused by: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
07-30 11:12:15.930: E/AndroidRuntime(642):  at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:215)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.app.Activity.requestWindowFeature(Activity.java:3225)
07-30 11:12:15.930: E/AndroidRuntime(642):  at sample.app.touchsample.TouchsampleActivity.onCreate(TouchsampleActivity.java:190)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.app.Activity.performCreate(Activity.java:5008)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-30 11:12:15.930: E/AndroidRuntime(642):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-30 11:12:15.930: E/AndroidRuntime(642):  ... 11 more 
```

* * *

```
 package sample.app.touchsample;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.graphics.Path;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.SoundPool;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewConfiguration;
import android.view.ViewGroup;
import android.view.Window;
import android.view.WindowManager;
import android.view.View.OnTouchListener;
//import android.widget.FrameLayout;
import android.widget.ImageView;
//import sample.app.touchsample.TouchsampleActivity.secondDrum.thirdDrum;
import android.widget.LinearLayout;

public class TouchsampleActivity extends Activity implements OnTouchListener
{

    MediaPlayer mp;
    SoundPool fx;
    HashMap <Integer, Integer> fxMap;

    int sfxId=1;
    int sfxId2=2;
    int sfxId3=3;
    int sfxId4=4;

    private Path path = new Path();

    private View parent;

    private final ArrayList[] recentTouchedViewsIndex = new ArrayList[10];

    private final ArrayList[] downTouchedViewsIndex = new ArrayList[10];

    private final ArrayList<View> moveOutsideEnabledViews = new ArrayList<View>();

    private final ArrayList<View> multiTouchViews = new ArrayList<View>();

    private int mTouchSlop = 24;

    private static final String TAG = "Touch";
    //private ImageView imageView1, imageView2 ;

    public void addMoveOutsideEnabledViews(final View view) {
        moveOutsideEnabledViews.add(view);
    }

    private void dealEvent(final int actionPointerIndex,
            final MotionEvent event, final View eventView,
            final int actionResolved) {
        int rawX, rawY;
        final int location[] = { 0, 0 };
        eventView.getLocationOnScreen(location);
        // Log.v("tag", location + "");
        rawX = (int) event.getX(actionPointerIndex) + location[0];
        rawY = (int) event.getY(actionPointerIndex) + location[1];

        final int actionPointerID = event.getPointerId(actionPointerIndex);
        ArrayList<View> hoverViews = getTouchedViews(rawX, rawY);

        if (actionResolved == MotionEvent.ACTION_DOWN) {
            downTouchedViewsIndex[actionPointerID] = (ArrayList<View>) hoverViews
                    .clone();
        }
        // deletes all views which where not clicked on ActionDown
        if (downTouchedViewsIndex[actionPointerID] != null) {
            final ArrayList<View> tempViews = (ArrayList<View>) hoverViews
                    .clone();
            tempViews.removeAll(downTouchedViewsIndex[actionPointerID]);
            hoverViews.removeAll(tempViews);
        }

        if (recentTouchedViewsIndex[actionPointerID] != null) {
            final ArrayList<View> recentTouchedViews = recentTouchedViewsIndex[actionPointerID];

            final ArrayList<View> shouldTouchViews = (ArrayList<View>) hoverViews
                    .clone();
            if (!shouldTouchViews.containsAll(recentTouchedViews)) {
                shouldTouchViews.removeAll(recentTouchedViews);
                shouldTouchViews.addAll(recentTouchedViews);

                final ArrayList<View> outsideTouchedViews = (ArrayList<View>) shouldTouchViews
                        .clone();
                outsideTouchedViews.removeAll(hoverViews);
            }

            recentTouchedViewsIndex[actionPointerID] = hoverViews;
            hoverViews = shouldTouchViews;
        } else {
            recentTouchedViewsIndex[actionPointerID] = hoverViews;
        }

        if (actionResolved == MotionEvent.ACTION_UP) {
            recentTouchedViewsIndex[actionPointerID] = null;
            downTouchedViewsIndex[actionPointerID] = null;
        }

        dumpEvent(event);
        for (final View view : hoverViews) {
            int x, y;
            view.getLocationOnScreen(location);
            x = rawX - location[0];
            y = rawY - location[1];

            // View does not recognize that the Pointer is
            // outside if the Pointer is not far away (>mTouchSlop)
            if (recentTouchedViewsIndex[actionPointerID] != null) {
                if (pointInView(x, y, mTouchSlop, view.getWidth(),
                        view.getHeight())) {
                    // Log.v("tag", "added because < mTouchSlop");

                    if (!recentTouchedViewsIndex[actionPointerID]
                            .contains(view)) {
                        recentTouchedViewsIndex[actionPointerID].add(view);
                    }
                } else if (moveOutsideEnabledViews.contains(view)) {
                    Log.v("tag", "outside but gets event");
                    recentTouchedViewsIndex[actionPointerID].add(view);
                }
            }
            final MotionEvent me = MotionEvent.obtain(event.getDownTime(),
                    event.getEventTime(), actionResolved, x, y,
                    event.getPressure(actionPointerIndex),
                    event.getPressure(actionPointerIndex),
                    event.getMetaState(), event.getXPrecision(),
                    event.getYPrecision(), event.getDeviceId(),
                    event.getEdgeFlags());
            me.setLocation(x, y);

            if (!me.equals(event)) {
                // deals the Event
                view.onTouchEvent(me);
            }

            // debug
            if (actionResolved == MotionEvent.ACTION_MOVE) {
                Log.v("tag",
                        "#" + actionPointerIndex + " Rawx:" + rawX + " rawy:"
                                + rawY + " x:" + x + " y:" + y + " "
                                + view.toString());
            }
        }

    }

  //  @Override
 //   public boolean onCreateOptionsMenu(Menu menu) 
  //  {
 //       getMenuInflater().inflate(R.menu.touchsample, menu);
  //      return true;
 //   }

    public class secondDrum implements OnTouchListener
    {

        public boolean onTouch(View v, MotionEvent event) 
        {

            dumpEvent(event);

            AudioManager bongos2 = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            float curVolume2 = bongos2.getStreamVolume(AudioManager.STREAM_MUSIC);
            float maxVolume2 = bongos2.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            float leftvolume2 = curVolume2/maxVolume2;
            float rightVolume2 = curVolume2/maxVolume2;
            int priority2 = 1;
            int no_loop2 = 0;
            float normal_playback_rate2=1.0f;

            fx.play(sfxId2, leftvolume2, rightVolume2, priority2, no_loop2, normal_playback_rate2);
            return false;
        }

    }

        public class thirdDrum implements OnTouchListener
        {

            public boolean onTouch(View v, MotionEvent event) 
            {

                    dumpEvent(event);
                    AudioManager bongos3 = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                    float curVolume = bongos3.getStreamVolume(AudioManager.STREAM_MUSIC);
                    float maxVolume = bongos3.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                    float leftVolume = curVolume/maxVolume;
                    float rightVolume = curVolume/maxVolume;
                    int priority = 1;       
                    int no_loop = 0;
                    float normal_playback_rate = 2.0f;
                    fx.play(sfxId3, leftVolume, rightVolume, priority, no_loop, normal_playback_rate);

                return false;
            }

        }

            public class forthDrum implements OnTouchListener
            {

                public boolean onTouch(View v, MotionEvent event) 
                {

                    dumpEvent(event);
                    AudioManager bongos4 = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
                    float curVolume = bongos4.getStreamVolume(AudioManager.STREAM_MUSIC);
                    float maxVolume = bongos4.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                    float leftVolume = curVolume/maxVolume;
                    float rightVolume = curVolume/maxVolume;
                    int priority = 1;       
                    int no_loop = 0;
                    float normal_playback_rate = 2.0f;
                    fx.play(sfxId4, leftVolume, rightVolume, priority, no_loop, normal_playback_rate);  
                    return false;

                }

            }

    public boolean onTouch(View view, MotionEvent event) 
    {

            dumpEvent(event);

            AudioManager bongos = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            float curVolume = bongos.getStreamVolume(AudioManager.STREAM_MUSIC);
            float maxVolume = bongos.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            float leftVolume = curVolume/maxVolume;
            float rightVolume = curVolume/maxVolume;
            int priority = 1;       
            int no_loop = 0;
            float normal_playback_rate = 1.0f;
            fx.play(sfxId, leftVolume, rightVolume, priority, no_loop, normal_playback_rate);       
            //return false;

            // index of the pointer which starts this Event
            final int actionPointerIndex = event.getActionIndex();

            // resolve the action as a basic type (up, down or move)
            int actionResolved = event.getAction() & MotionEvent.ACTION_MASK;
            if (actionResolved < 7 && actionResolved > 4) {
                actionResolved = actionResolved - 5;
            }

            if (actionResolved == MotionEvent.ACTION_MOVE) {
                for (int ptrIndex = 0; ptrIndex < event.getPointerCount(); ptrIndex++) {
                    // only one event for all move events.
                    dealEvent(ptrIndex, event, view, actionResolved);
                    Log.v("tag", "move" + ptrIndex);
                }

            } else {
                dealEvent(actionPointerIndex, event, view, actionResolved);
            }

            return true;
            }

    private void dumpEvent(MotionEvent event) 
    {
        final String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE", "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };

        final StringBuilder sb = new StringBuilder();
        final int action = event.getAction();
        final int actionCode = action & MotionEvent.ACTION_MASK;
        sb.append("event ACTION_").append(names[actionCode]);

        if(actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP)
        {
            sb.append("(pid " ).append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
            sb.append(")" );
        }

        sb.append("[");

        for (int i = 0; i <event.getPointerCount(); i++)
        {
            sb.append("#").append(i);
            sb.append("(pid ").append(event.getPointerId(i));
            sb.append(")=").append((int) event.getX(i));
            sb.append(",").append((int) event.getY(i));
            if(i + 1 < event.getPointerCount())
            sb.append(";");
        }

        sb.append("]");
        Log.d(TAG, sb.toString());
    }

    private ArrayList<View> getChildViews(final View view) {
        final ArrayList<View> views = new ArrayList<View>();
        if (view instanceof ViewGroup) {
            final ViewGroup v = ((ViewGroup) view);
            if (v.getChildCount() > 0) {
                for (int i = 0; i < v.getChildCount(); i++) {
                    views.add(v.getChildAt(i));
                }

            }
        }
        return views;
    }

    private ArrayList<View> getTouchedViews(final int x, final int y) {

        View lastTouchedView = null;
        //final ArrayList<View> touchedViews = new ArrayList<View>();
        final ArrayList<View> possibleViews = new ArrayList<View>();

        if (parent instanceof ViewGroup) {
            possibleViews.add(parent);
            for (int i = 0; i < possibleViews.size(); i++) {
                final View view = possibleViews.get(i);

                final int location[] = { 0, 0 };
                view.getLocationOnScreen(location);

                if (((view.getHeight() + location[1] >= y)
                        & (view.getWidth() + location[0] >= x)
                        & (view.getLeft() <= x) & (view.getTop() <= y))
                        || view instanceof LinearLayout) {
                    if (this.multiTouchViews.contains(view)){
                        lastTouchedView = view;
                }
                possibleViews.addAll(getChildViews(view));
            }
        }
            ArrayList<View> touchedViews = new ArrayList<View>();
            if (lastTouchedView != null){
                    touchedViews.add(lastTouchedView);
        }

        return touchedViews;
        }
        return possibleViews;
    }

    //@Override
    //public void onCreate(final Bundle instance) {
    //  super.onCreate(instance);

    //public boolean onTouch(final View v, final MotionEvent event) {
     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.touchsample);

            fx=new SoundPool(1100, AudioManager.STREAM_MUSIC, 1100);
            fxMap=new HashMap<Integer, Integer>();

            fxMap.put(sfxId, fx.load(this, R.raw.bongo_left, 1));
            fxMap.put(sfxId2, fx.load(this, R.raw.bongo_right, 1));
            fxMap.put(sfxId3, fx.load(this, R.raw.bongo_left, 1));
            fxMap.put(sfxId4, fx.load(this, R.raw.bongo_right, 1));

            ImageView view = (ImageView) findViewById(R.id.imageView1);     
            view.setOnTouchListener(this);

            ImageView view2 = (ImageView) findViewById(R.id.imageView2);
            view2.setOnTouchListener(new secondDrum());

            ImageView view3 = (ImageView) findViewById(R.id.imageView3);
            view3.setOnTouchListener(new thirdDrum());

            ImageView view4 = (ImageView) findViewById(R.id.imageView4);
            view4.setOnTouchListener(new forthDrum());

            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
            getWindow().clearFlags(
                    WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
            parent = findViewById(android.R.id.content).getRootView();
            parent.setOnTouchListener(this);
            mTouchSlop = ViewConfiguration.get(getApplicationContext())
                    .getScaledTouchSlop();

        }   

    private boolean pointInView(final float localX, final float localY,
            final float slop, final float width, final float height) {
        return localX >= -slop && localY >= -slop && localX < ((width) + slop)
                && localY < ((height) + slop);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:37:36.023

从您添加它的位置删除这些行，

```
 requestWindowFeature(Window.FEATURE_NO_TITLE);
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getWindow().clearFlags(
                WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN); 
```

一旦你调用超类，它就必须添加到 onCreate() 中。

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
     requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getWindow().clearFlags(
                WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN); 
```

甚至在您调用`setContentView()`. 就像上面的片段一样。

# asp.net-mvc-3 - 无法填充 ViewModel

> ID：11715189
> 
> 赞同：0
> 
> 时间：2012-07-30T03:50:59.743
> 
> 标签：asp.net-mvc-3, asp.net-mvc-viewmodel

MVC3 项目。

我有几个类：我在视图模型中设置的帐户、地址、电话等

```
namespace ViewModels
{
  public class AccountVM
  {
    public Account Account { get; set; }
    public Address Address { get; set; }
    public Phone Phone { get; set; }       } 
```

在控制器 GET 操作中，我只是调用视图

```
 public ActionResult Create()
  { return View(); } 
```

在视图中我通过视图模型

```
@model AccountVM 
```

然后我使用@Html.EditorFor 填充所有字段并成功地将其传递给 POST 操作并在数据库中创建记录。所以所有这些代码都在工作。

```
@Html.EditorFor(z => z.Account.Number) 
```

当我尝试预先填充一些属性时，问题就出现了。我在 GET 操作中执行以下操作。

```
 public ActionResult Create()
    { var viewModel = new AccountVM();
      viewModel.Account.Number = 1000000;
      return View(viewModel); } 
```

代码通过了 Intellisense，但是当我运行时，我得到“用户代码未处理 NullReferenceException - 对象引用未设置为对象的实例”错误。

如果我尝试使用视图中的代码进行填充，我会得到同样的错误。

```
@{ Model.Account.Number = 1000000; } 
```

我需要能够以编程方式填充控制器和视图中的属性。我已经阅读了几篇关于如何在控制器中填充视图模型并在它们上建模我的代码的 SO 帖子，但由于某种原因我的代码无法正常工作。我在这里做错了什么？我应该如何在控制器和视图中处理它？我知道对象在创建时为空，但不知道如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T03:54:40.847

您已经实例化了 VM，但没有实例化其 Account 属性...试试这个：

```
public ActionResult Create()
{
    var viewModel = new AccountVM();
    viewModel.Account = new Account();
    viewModel.Account.Number = 1000000;
    return View(viewModel);
} 
```

视图也是如此：

```
@{
    if (Model.Account == null) {
        Model.Account = new Account();
    }
    Model.Account.Number = 1000000;
} 
```

尽管很少有这可能属于视图。看起来应该在控制器中设置一些东西。

# postgresql - Postgres 连接

> ID：11715190
> 
> 赞同：12
> 
> 时间：2012-07-30T03:51:07.040
> 
> 标签：postgresql

我正在尝试在 PostgreSQL 中进行简单的连接，但它不断抛出错误消息。我不明白我在这里做错了什么。

```
select concat('abcde', 'fgh');
No function matches the given name and argument types. You might need to add explicit type casts.

select concat(cast('abcde' as text), cast('fgh' as text));
No function matches the given name and argument types. You might need to add explicit type casts. 
```

我正在使用 Postgres 版本 8.4.11。请让我知道发生了什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-30T04:29:58.060

concat 运算符是`||`，所以`select 'abcde' || 'fgh'`应该可以工作。此外，正如@jonathan.cone 所建议[的，请查看文档](http://www.postgresql.org/docs/8.4/static/functions-string.html)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-30T06:46:52.870

`concat`在 9.1 中添加，在 8.4 中不存在。正如其他人所指出的，使用`||`运算符。

比较[8.4 文档](http://www.postgresql.org/docs/8.4/static/functions-string.html)和[9.1 文档](http://www.postgresql.org/docs/9.1/static/functions-string.html)，您会注意到`concat`8.4 文档中没有该功能。

看到文档顶部的那个栏，上面写着“其他版本中的此页面”？当您使用旧版本时，或者如果您通过 Google 找到指向旧版本页面的链接并且您使用的是较新版本时，这真的很方便。始终确保您正在查看正确版本的文档。

如果功能表等包含“首次出现在版本中”会很好 - 但不幸的是他们没有。

如果您对函数的可用性感到困惑，可以`\df`在 psql 中使用来列出和搜索函数。

例如，列出所有名为`concat`use的函数`\df concat`

对于`pg_catalog`架构中的所有函数（内置函数）`\df pg_catalog.`，请注意尾随句点，告诉 psql 您的意思是“架构 pg_catalog 中的任何函数”而不是“名为 pg_catalog 的函数”。

对于名称以`concat`use开头的所有函数`\df concat*`

这是一个非常强大的工具。搜索架构 ( `\dn`)、表 ( `\dt`) 等时，使用相同的语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-29T02:59:41.737

```
select 'abcde' || 'fgh';

select cast('abcde' as text) || cast('fgh' as text); 
```

# c# - MOQ 中的重载返回值

> ID：11715191
> 
> 赞同：0
> 
> 时间：2012-07-30T03:51:21.363
> 
> 标签：c#, unit-testing, moq

我正在努力了解更多关于使用 Moq 进行设置和单元测试的信息。不过，我遇到了一个小问题。

我想做的是这样的：

```
view.Setup(x => x.GetReference("object1")).Returns(object1);
view.Setup(x => x.GetReference("object2")).Returns(null); 
```

但是，当我以这种方式进行调用时，我从未遇到会响应 Null 语句的代码块。我应该如何设置我的设置，以便它们在被特定参数调用时以特定方式运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:08:39.220

moq 重载了两种返回值的方式：

1.  `instance: Returns(instance);`
2.  `delegate(Func<T>): Returns(()=>new Foo());`

我认为问题是由于使用 Returns 方法的模棱两可引起的。

因此，您需要通过以下方式为代码的第二次设置传递显式类型的 NULL：

1.  `view.Setup(x => x.GetReference("object2")).Returns((ExplicitType)null);`
2.  `view.Setup(x => x.GetReference("object2")).Returns(() => null);`

# php - 基于用户输入的 MySQL 查询

> ID：11715193
> 
> 赞同：2
> 
> 时间：2012-07-30T03:51:30.753
> 
> 标签：php, mysql, database, return, row

我有一个数据库表。我想进行文本输入，用户可以在其中输入“uid”，查询将返回与该 uid 关联的行。

所以假设我有这样的事情：

```
$query = "SELECT name,age FROM people WHERE uid = '2' LIMIT 0,1";
$result = mysql_query($query);
$res = mysql_fetch_assoc($result);

echo $res["age"]; 
```

我将如何将该查询修改为..

```
SELECT name, age 
  FROM people 
 WHERE uid = $_POST['blahblah'] LIMIT 0,1 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T03:54:30.163

事实上...

```
// Read input from $_POST
$uid = (isset($_POST['uid']) ? $_POST['uid'] : '');

// Build query.  Properly escape input data.
$query = 
  "SELECT name,age " .
  "FROM people " .
  "WHERE uid = '" . mysql_real_escape_string($uid) . "' " . 
  "LIMIT 0,1"; 
```

出于安全原因，建议对变量中的字符进行转义。看看这个文件有一些原因：

[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T03:58:04.090

要避免 SQL 注入攻击，请使用：

```
$search_query = mysql_real_escape_string($_POST['blahblah']);

$query  = "SELECT name, age FROM people WHERE uid = '".$search_query."' LIMIT 0 , 1"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:03:50.477

有很多方法可以做到这一点但首先将其转义并将其存储在一个变量中

```
$blahblah = mysql_real_escape_string($_POST['blahblah']); 
```

然后有

第一：正如@Mett Lo 提到的：

```
$query = "SELECT name,age FROM people WHERE uid = '" . $blahblah . "' LIMIT 0,1"; 
```

第二：

```
$query = "SELECT name,age FROM people WHERE uid = '{$blahblah}' LIMIT 0,1"; 
```

第三：

```
$query = "SELECT name,age FROM people WHERE uid = '$blahblah' LIMIT 0,1"; 
```

如果 blahblah 是 db 表中的 int 值，则第四：

```
$query = "SELECT name,age FROM people WHERE uid = $blahblah LIMIT 0,1"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T04:06:51.200

您可以使用 sprintf 函数来创建查询。

```
$query = sprintf("SELECT name,age FROM people WHERE uid = '%s' LIMIT 0,1",
         $_POST['blahblah'] ); 
```

其余的将是相同的。强烈建议您在运行查询之前转义 $_POST 数据以防止 SQL 攻击。您可以将查询重新表述如下。

```
$query = sprintf("SELECT name,age FROM people WHERE uid = '%s' LIMIT 0,1",
         mysql_escape_string($_POST['blahblah']) ); 
```

# c++ - 'for' 的增量表达式没有任何效果

> ID：11715196
> 
> 赞同：2
> 
> 时间：2012-07-30T03:51:53.893
> 
> 标签：c++, for-loop, compiler-warnings

我有一堂课，Square：

```
class Square
{
   typedef enum {kTop = 0x80, kRight = 0x40, kBottom = 0x20, kLeft = 0x10} Side;
   // Other functions and stuff
} 
```

在我的一个函数中，我有一个`for`循环，该循环执行涉及 a 的每一边的操作`Square`。我是这样设计的：

```
for (Square::Side side = Square::kLeft; side < Square::kLeft; side << 1) // Warning here
{
   // Do stuff
} 
```

首先，循环将在左侧工作，然后将一侧向左移动一个位置，使一侧等于底侧。循环在 Top 侧执行完`for`操作后，它会再次向左移动，将数字推开并使其等于 0，小于 kLeft，循环将结束。

但是，它给了我一个警告，上面写着“**对于增量表达式没有效果**”。这是否意味着我的轮班操作没有发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T03:53:22.767

是的，因为第一次尝试时停止条件为假：

```
Square::Side side = Square::kLeft 
```

渲染

```
side < Square::kLeft; 
```

错误的。

也许你的意思是`side <= Square::kTop`或类似的 and `side <<= 1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T03:54:54.163

您没有将班次的值重新分配给一侧。试试这个：

> (Square::Side side = Square::kLeft; side < Square::kLeft; side = side << 1)

或`side <<= 1`。

您还需要修复终止条件：

> 边 <= Square.kTop

# ruby-on-rails-3 - Weird LEFT OUTER JOIN on 包括急切加载 rails 3

> ID：11715201
> 
> 赞同：2
> 
> 时间：2012-07-30T03:52:50.923
> 
> 标签：ruby-on-rails-3, activerecord, eager-loading

我不确定这是否是活动记录错误。或者有没有办法做 .includes 并明确禁用 LEFT OUTER JOIN 策略。这是我的案例：

给定关键字是没有“点”的“abc”

```
Post.where(:name => "abc").includes(:author) 
```

正常使用两个sql

```
Post Load (0.8ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`name` = 'abc'
Author Load (0.4ms)  SELECT `authors`.* FROM `authors` WHERE `authors`.`id` IN (1) 
```

给定关键字是“abc”。带有“点”

```
Post.where(:name => "abc.").includes(:author) 
```

sql 使用 LEFT OUTER JOIN 策略，这很混乱。

```
SELECT `posts`.`id` AS t0_r0, `posts`.`name` AS t0_r1, `posts`.`author_id` AS t0_r2, `posts`.`created_at` AS t0_r3, `posts`.`updated_at` AS t0_r4, `authors`.`id` AS t1_r0, `authors`.`created_at` AS t1_r1, `authors`.`updated_at` AS t1_r2 
FROM `posts` LEFT OUTER JOIN `authors` ON `authors`.`id` = `posts`.`author_id` 
WHERE `posts`.`name` = 'abc.' 
```

我知道当关联存在条件时，使用 LEFT OUTER JOIN 策略可以实现带有包含的急切加载，例如

```
Post.includes(:author).where(:authors => {:name => 'zhougn' }) 
```

但是在我的测试用例中，没有这样的条件。基本上 Multi-SQL 策略和 LEFT OUTER JOIN 策略都可以给我正确的结果，但是当 Posts 和 Authors 存储在不同的数据库中时，LEFT OUTER JOIN 策略会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T21:32:33.170

是的，这是一个错误。问题 #950：[当点/句点处于条件值时 ActiveRecord 查询发生变化](https://github.com/rails/rails/issues/950)。在 Rails 4 中修复，它似乎通过弃用被挂断的特性（没有解决方案，除了做不同的事情并要求程序员在他们想要左外连接时明确 - 以及引用哪些表当使用包含包含的字符串条件时）。

我当前的肮脏解决方法（在 Rails 3 中）是像这样对点进行编码/解码：

```
.where("posts.name = REPLACE(?, '&dot;', '.')", somename.gsub(".", "&dot;")) 
```

# android - 如何在Android上做逐帧动画？

> ID：11715203
> 
> 赞同：0
> 
> 时间：2012-07-30T03:53:06.753
> 
> 标签：android, animation, mobile, png

我正在尝试找出如何以良好的帧速率进行 png 逐帧动画...

我有一堆 png（可能是 1500 个 png 姿势），我需要一个接一个地播放它们（就像一个会说话的应用程序，以汤姆猫为例）

我已经尝试过 SurfaceView、普通视图、AnimationDrawable 和 ImageView（使用一个线程设置背景与睡眠（33）[for a 30fps]），但是与坏的汤姆猫相比，这些方法都没有一个好的帧速率CPU 手机（如 HTC Desire A）。

还好说我已经添加了 Options 来为图像设置 in SampleSize，以防它需要更多内存或处理速度。

我认为独特的方法是加载大量的 pngs ，在 SurfaceView 上绘制，并在播放时加载更多的 pngs 并回收其他位图......

任何人都可以帮助我吗？至少有一些代码？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:07:41.833

给你...试试这个... :) 在你的值文件夹中创建一个这样的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<array name="frames">
    <item>@drawable/pak1_1</item>
    <item>@drawable/pak1_2</item>
    <item>@drawable/pak1_3</item>
    <item>@drawable/pak1_4</item>
    <item>@drawable/pak1_5</item>
</array>
</resources> 
```

现在试试这段代码：

```
public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.main);
           Resources res = getResources();
           TypedArray FrameImages = res.obtainTypedArray(R.array.frames);
           animation = new AnimationDrawable();
           for (int i = 0; i < 1500; i++) {
               Drawable drawable = FrameImages.getDrawable(i);
               animation.addFrame(drawable, 33);
           }
           animation.setOneShot(false);
           ImageView imageAnim =  (ImageView) findViewById(R.id.img);
           imageAnim.setBackgroundDrawable(animation);
           // run the start() method later on the UI thread
           imageAnim.post(new Starter());
       }

       class Starter implements Runnable {
           public void run() {
               animation.start();        
           }
       } 
```

# mysql - 测试时memsql基准测试太慢了

> ID：11715208
> 
> 赞同：-1
> 
> 时间：2012-07-30T03:53:49.803
> 
> 标签：mysql, benchmarking, singlestore

我想使用 memsql，但是当我使用 mysql benchmark 测试它时速度太慢了。任何人都可以解释一下吗？

测试 cmd 是

```
[root@Centos6-2 sql-bench]# perl run-all-tests  --user=root --small-test --host=127.0.0.1 --dir memsql  –log –fast 
```

我的服务器是

```
Linux Centos6-2 2.6.32-220.el6.x86_64
MemTotal:       32830128 kB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:17:17.057

MemSQL 中的查询编译比 MySQL 更昂贵，因为 MemSQL 查询使用 GCC 编译为本机代码。但是，一旦编译，MemSQL 将在每次执行时重用已编译的查询，即使在重新启动 MemSQL 之后也是如此。

我建议您首先完全运行基准测试以编译所有查询，然后再次运行基准测试。

# boolean - 布尔逻辑 - 简化产品的总和

> ID：11715210
> 
> 赞同：3
> 
> 时间：2012-07-30T03:54:28.407
> 
> 标签：boolean, logic, karnaugh-map

我有一个问题要求为给定函数合成最简单的乘积表达式总和。基本上，如果 AB == CD，则函数为 1，否则为 0，结果如下：

(!A && !B && !C && !D) || (!A && B && !C && D) || (A && !B && C && !D) || （A B C D）

没有一个术语只有一点点不同，所以我看不到将它们组合在一起并以这种方式简化它们的方法。我已经绘制了如下卡诺图，但这似乎没有帮助，因为我不能将多个 1 组合在一起。

```
\ AB 00 01  11  10
CD +---+---+---+---+
00 | 1 | 0 | 0 | 0 |
   +---+---+---+---+
01 | 0 | 1 | 0 | 0 |
   +---+---+---+---+
11 | 0 | 0 | 1 | 0 |
   +---+---+---+---+
10 | 0 | 0 | 0 | 1 |
   +---+---+---+---+ 
```

所以我的问题是，上面的表达式是否已经是最简单的乘积表达式之和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:56:03.083

我认为您的卡诺图相当于：`((A && C) || (!A && !C)) && ((B && D) || (!B && !D))`

我想那会更简单。

# c#-3.0 - 如何以 C# 的第二种形式传递 id 值？

> ID：11715214
> 
> 赞同：0
> 
> 时间：2012-07-30T03:54:47.047
> 
> 标签：c#-3.0, desktop-application

我的 C# 基础桌面应用程序中有两种形式。

我想以一种形式将我的 id 传递给另一种形式。

在 asp.net 中，我们使用查询字符串将一页的值传递到第二页，但在 C# 基础桌面应用程序中，我使用的是什么？

请帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T03:58:34.697

属性或构造函数参数：

1) 属性

```
partial class Form2 {
    public int ID { get; set; }
    // ...
}

Form2 newForm = new Form2() { ID = id_here }; 
```

2）构造函数参数：

```
partial class Form2 {
    private int _id;

    public Form2(int id) {
        this._id = id;
    }

    // ...
}

Form2 newForm = new Form2(id_here); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:57:10.990

只需创建公共财产：

在您的 Form1 上：

```
partial Class Form1()
{
        private void Button1_Click(object sender, EventArgs e)
        {
           Form2 frm2 = new Form2(){passMessage="Test1"};
           frm2.Show();
           this.hide();
        }
} 
```

在您的 Form2 上：

```
partial Class Form2()
{
public string passMessage;

      private void ButtonShowMessage_Click(object sender, EventArgs e)
        {
           MessageBox.Show(passMessage);
        }
} 
```

问候

# java - 文件类或路径类，哪个最好用？

> ID：11715215
> 
> 赞同：1
> 
> 时间：2012-07-30T03:54:49.023
> 
> 标签：java, java-7, java-io

> **可能重复：**
> [Java 7：路径与文件](https://stackoverflow.com/questions/6903335/java-7-path-vs-file)

我正在学习 Java 文件处理。我正在读一本书，它说 Java 7 有 NIO，有`Path`类，我们应该优先使用它而不是`File`类。

`Path`和`File`类是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T04:01:06.970

(`File`和其他类`java.io.*`都相当陈旧，可以追溯到 Java 的早期。它们可以工作并且可以完成工作，但它们并不易于使用。`File`该类本身是一个文件的文件系统路径的封装，除了某些元数据（只读状态、文件大小）。

许多 Java IO 操作和类，例如`FileInputStream`使用旧`File`类，但它们中的大多数也接受文件名作为`String`实例。

这`Path`门课是一个设计更好、更现代的替代品。你可以在这里阅读它：http: [//openjdk.java.net/projects/nio/javadoc/java/nio/file/Path.html](http://openjdk.java.net/projects/nio/javadoc/java/nio/file/Path.html)

虽然`Path`是新的，但`File`该类并未正式弃用或过时。我认为这是“如果它是一个新项目，使用 X，否则继续使用 Y”的东西之一。

所以回答你的问题：不，它们不一样。`Path`替换`File`并应在新项目中使用。

# rackspace-cloud - 如何通过 OpenStack Nova Client 从 Rackspace 检索服务器列表？

> ID：11715219
> 
> 赞同：0
> 
> 时间：2012-07-30T03:55:05.043
> 
> 标签：rackspace-cloud, openstack

我正在尝试使用 OpenStack Nova 客户端在我的 Rackspace 帐户上运行操作。我能得到的最接近的是这篇博文。但是，它现在似乎不起作用。有谁知道如何做到这一点？谢谢。

[http://www.zippykid.com/2011/10/06/using-the-rackspace-cloud-control-panel-via-openstack-cli-tools-on-os-x-lion-and-other-unixes/](http://www.zippykid.com/2011/10/06/using-the-rackspace-cloud-control-panel-via-openstack-cli-tools-on-os-x-lion-and-other-unixes/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:03:14.670

您应该能够下载并安装 nova 命令行客户端以使用任何 OpenStack 端点进行操作。所以有几件事要检查：

从源获取客户端：

```
git clone https://github.com/openstack/python-novaclient
cd python-novaclient
(sudo) python setup.py install 
```

从 PyPi 获取客户端：

```
pip install python-novaclient 
```

确保您从 OpenStack 端点工作 - 正如我上次听说的那样，并非 Rackspace 的所有系统都在 openstack 上运行。虽然 API 非常相似，但不能保证它们是相同的。

使用 nova 命令行有一个 --debug 选项，该选项将显示 HTTP 请求和响应，同时进行调用以管理您的环境，这可能有助于确定发生了什么问题。

恐怕这会让您到达我们可以确定它*为什么*不起作用的地方，但是如果没有更多细节，我无法断言实际损坏了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T13:32:23.743

[在Rackspace 博客这里](http://developer.rackspace.com/blog/getting-started-using-python-novaclient-to-manage-cloud-servers.html)有一个很好的指南。

基本上，将这些行添加到您的`/etc/profile`：

```
export OS_AUTH_SYSTEM=rackspace
export OS_REGION_NAME=IAD (or any other region you have)
export OS_PASSWORD=<YOUR_API_PASSWORD>
export OS_AUTH_URL=https://identity.api.rackspacecloud.com/v2.0/
export OS_VERSION=2.0
export OS_USERNAME=<YOUR_API_USERNAME>
export OS_TENANT_NAME=<YOU CUSTOMER ID>
export OS_SERVICE_NAME=cloudserversOpenStack 
```

然后运行：

```
$ nova list 
```

# algorithm - 所有递归函数都可以重写为尾递归吗？

> ID：11715224
> 
> 赞同：20
> 
> 时间：2012-07-30T03:55:51.617
> 
> 标签：algorithm, recursion, tail-recursion

> **可能重复：**
> [是否存在无法使用尾递归编写的问题？](https://stackoverflow.com/questions/1888702/are-there-problems-that-cannot-be-written-using-tail-recursion)

据我了解，尾递归是一种优化，当递归调用不需要来自递归调用的信息时，您可以使用它会发送垃圾邮件。

那么是否可以使用尾递归来实现所有递归函数？像 DFS 这样的东西，你需要最里面的孩子在父母之前返回？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T22:07:22.713

这完全取决于您要问什么。

如果您想将所有函数保留为具有相同签名的函数（无可变状态），那么不。最明显的例子是快速排序，其中两个调用都不能是尾调用。

如果您可以通过各种方式修改功能，那么可以。有时本地修改就足够了——通常你可以添加一个“累加器”来构建一些返回的表达式，但是，如果结果涉及非交换操作，那么你需要小心（例如，当天真地构造链表时，顺序相反）或者您可以添加一个堆栈。

或者，您可以对整个程序进行全局修改，其中每个函数将包含未来操作的函数作为额外参数。这就是[*皮特*所说](https://stackoverflow.com/a/11759519/3924118)的续传。

如果您是手工工作，那么本地修改通常相当容易。但是，如果您要进行自动重写（例如在编译器中），那么采用全局方法会更简单（它需要更少的“智能”）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T03:58:54.443

是和不是。

是的，与其他控制流机制（例如，继续传递）结合使用，您可以将任意控制流表示为尾递归。

不，不可能将所有递归都表示为尾递归，除非您使用其他控制流机制补充尾递归。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-05T23:07:26.693

**是的你可以。**转换通常涉及显式维护必要的信息，否则这些信息将为我们在运行时隐式地分布在执行堆栈的调用帧中进行维护。

就如此容易。无论运行时系统在执行期间隐式地做什么，我们都可以自己显式地做。这里没有什么大秘密。个人电脑由硅、铜和钢制成。

将 DFS 实现为具有要处理的状态/位置/节点的显式队列的循环是微不足道的。它实际上是这样定义的——DFS 用来自它的所有弧替换队列中弹出的第一个条目；BFS 将这些弧添加到队列的末尾。

*[继续传递样式转换](http://en.wikipedia.org/wiki/Continuation-passing_style)*在完成后将程序中的所有函数调用作为尾调用。这是一个简单的生活事实。使用的延续会增长和缩小，但调用都将是尾调用。

我们可以进一步具体化进程在延续中传播的状态，作为在堆上显式维护的数据。最终实现的是解释和具体化，将堆栈上的隐式内容移动到堆中的显式内容，简化和揭开控制流的神秘面纱。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-01T12:42:48.763

所有程序都可以使用延续传递重写为尾调用。只需在尾调用中添加一个参数，表示当前执行的[继续](http://en.wikipedia.org/wiki/Continuation-passing_style)。

任何 Turning 完整语言都执行与延续传递提供的相同的转换——为程序创建一个哥德尔数并输入非尾调用返回的参数，并将其作为参数传递给尾调用——尽管显然这是在环境中使用延续、协同程序或其他一流的结构为您完成工作会更容易。

CPS 用作编译器优化，我之前使用延续传递编写了解释器。[方案编程语言](http://en.wikipedia.org/wiki/Scheme_%28programming_language%29)被设计成允许它以这样的方式实现，符合尾调用优化和第一类延续标准中的要求。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-01T22:22:15.183

递归算法是一种按照分治策略实现的算法，其中解决每个中间子问题会产生 0、1 或更多新的较小子问题。如果这些子问题以 LIFO 顺序解决，您将获得经典的递归算法。

现在，如果已知您的算法在每一步仅产生 0 或 1 个子问题，那么该算法可以通过尾递归轻松实现。事实上，这种算法可以很容易地重写为迭代算法，并通过一个简单的循环来实现。（不用说，尾递归只是实现迭代的另一种不太明确的方式。）

这种递归算法的教科书示例将是阶乘计算的递归方法：要计算`n!`，您需要先计算`(n-1)!`，即在每个递归步骤中，您只会发现*一个*较小的子问题。这一特性使得将阶乘计算算法转换为真正的迭代算法（或尾递归算法）变得如此容易。

但是，如果您知道在一般情况下，算法的每一步生成的子问题的数量大于 1，那么您的算法*基本上*是递归的。它不能重写为迭代算法，不能通过尾递归来实现。任何以迭代或尾递归方式实现此类算法的尝试都需要额外的非常量大小的 LIFO 存储来存储“未决”子问题。这种实现尝试只会通过*手动*实现递归来混淆算法不可避免的递归性质。

例如，像遍历具有父->子链接（并且没有子->父链接）的二叉树这样的简单问题是一个实质上递归的问题。它不能用尾递归算法完成，也不能用迭代算法完成。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-01T21:47:20.060

我不知道是否*所有*递归函数都可以重写为尾递归，但其中许多都可以。这样做的一种标准方法是使用累加器。例如，阶乘函数可以这样写（在 Common Lisp 中）：

```
(defun factorial (n)
   (if (<= n 1)
       1
       (* n (factorial (1- n))))) 
```

这是递归的，但不是尾递归的。它可以通过添加一个累加器参数来实现尾递归：

```
(defun factorial-accum (accum n)
   (if (<= n 1)
       accum
       (factorial-accum (* n accum) (1- n)))) 
```

可以通过将累加器设置为 1 来计算阶乘。例如，3 的阶乘为：

```
(factorial-accum 1 3) 
```

不过，我不清楚是否可以使用这样的方法将所有递归函数重写为尾递归函数。但肯定很多功能都可以。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-30T10:31:00.640

不，它只能“自然”地完成一次递归调用。对于两个或多个递归调用，您当然可以自己模拟堆栈帧。但在优化内存的意义上，它会非常难看，并且实际上不会是尾递归的。

尾递归的要点是您不想回到父堆栈。因此，只需将该信息传递给可以完全替换父堆栈的子堆栈，而不是堆栈增长。

# java - 在片段中执行动作

> ID：11715225
> 
> 赞同：0
> 
> 时间：2012-07-30T03:56:06.963
> 
> 标签：java, android, android-fragments, android-fragmentactivity

我在理解片段如何与活动交互时遇到了一些麻烦。

我的主要活动是添加一个片段。调用的片段类在这里：

```
public class Timer_fragment extends android.support.v4.app.Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.timer_frag, container, false);
    }
} 
```

正在膨胀的布局内部有一个 textView，但在片段类内部我无法“访问”它。

为什么我不能`TextView text = (TextView) findViewById(R.id.pwd_status);`在return语句下面添加？

这对我来说很有意义，因为如果我想在一堆地方添加计时器并以编程方式更改一件事，它会随处改变。希望这是有道理的。

谢谢

## 回答：

我只是保持我的 onCreateView 相同并添加了 onActivityCreated。然后我就可以像往常一样做所有事情了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:03:09.267

你可以这样做：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.timer_frag, container, false);

    TextView text = (TextView) v.findViewById(R.id.pwd_status);
    /* set the TextView's text, click listeners, etc. */

    return v;
} 
```

假设您的布局中有一个`TextView`with id `pwd_status`，这将起作用。`timer_frag`

# python - 在 Ubuntu 中使用 Geany 调用类 python

> ID：11715227
> 
> 赞同：0
> 
> 时间：2012-07-30T03:56:29.583
> 
> 标签：python

我在 ubuntu 中使用 Geany 作为编辑器 python，并创建了一个包含该类的文件。

这是我的文件。时间1.py

```
class Time:

    def __int__(self):
        self.hour = 0
        self.minute = 0
        self.second = 0

    def printMilitary(self):
        print "%.2d:%.2d:%.2d" % \
          (self.hour, self.minute, self.second),

    def printStandard(self):

        standardtime = ""
        if self.hour == 0 or self.hour == 12:
            standardTime += "12:"
        else:
            standardTime += "%d:" % ( self.hour % 12 )
        standardTime += "%.2d:%.2d" % ( self.minute, self.second )

        if self.hour < 12:
            standardTime += " AM"
        else:
            standardTime += " PM"
        print standardTime, 
```

所以我在 mytime.py 中调用它

```
from Time1 import Time

time1 = Time()

print "The attributes of time1 are: "
print "time1.hour:", time1.hour
print "time1.minute:", time1.minute
print "time1.second:", time1.second 
```

之后我尝试运行这个脚本。但我得到了错误。这是错误

> time1 的属性为： time1.hour: Traceback (last last call last): File "untitled.py", line 31, in print "time1.hour:", time1.hour AttributeError: Time instance has no attribute 'hour'

你能帮助我吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T04:00:03.540

`__int__`需要`__init__`。

# mysql - 记录匹配时选择 2 个表复制一个唯一编号

> ID：11715230
> 
> 赞同：0
> 
> 时间：2012-07-30T03:56:55.603
> 
> 标签：mysql, sql

我有 2 个表 1\. paypal_ipn_orders 表 2 是查找。查找表我有一个列名为 item 的所有项目的列表我还有另一个标记为 sort_id 的列，它是一个 8 位数字，内部用于我的所有项目。表 1 paypal_ipn_orders 接收订单并有几列，但只有几列对问题很重要。id、payer_email、item_name、sort_num 和 payment_status。我需要发生的是，当订单进入表 paypal_ipn_orders 时，我需要交叉引用查找表，并在项目名称匹配时将 8 位数字分配到标有 sort_num 的列中。

```
table: paypal_ipn_orders
id       payer_email         item_name        sort_num               payment_status
1        greg@gmail.com      batman card      NULL                    completed
2        steve@gmail.com     superman card    NULL                    completed
3        gary@gmail.com      spiderman card   NULL                    completed
4        sarah@gmail.com     captain america  NULL                    completed 
```

这是示例查找表

```
table: lookup
item                   sort_id
batman card            12345678
superman card          12345677
spiderman card         12345676
captain america        12345675 
```

运行查询后我希望输出的样子。

```
table: paypal_ipn_orders
id       payer_email         item_name        sort_num               payment_status
1        greg@gmail.com      batman card      12345678                completed
2        steve@gmail.com     superman card    12345677                completed
3        gary@gmail.com      spiderman card   12345676                completed
4        sarah@gmail.com     captain america  12345675                completed 
```

我知道这不是完全正确的语法，但你会明白的

```
SELECT lookup.sort_id
INSERT INTO paypal_ipn_orders.sort_num
WHERE lookup.item = paypal_ipn_orders.item_name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:01:06.613

您需要使用`UPDATE`，而不是`INSERT`：

```
UPDATE paypal_ipn_orders
SET sort_num = (SELECT sort_num
                FROM lookup
                WHERE lookup.item = paypal_ipn_orders.item_name) 
```

不过有两个旁注：

1.  这样做将更新整个表。最好在插入时在触发器中执行此操作。

2.  如果总是取决于表中的值，我想知道存储`sort_num`两次的好处。如果您尝试在插入时保存该值或能够手动更改它，这是有道理的。（也就是说，如果您更改了表中的，但您希望将原始值保留在 中。）`sort_num``lookup``sort_num``lookup``paypal_ipn_orders`

# php - PHP - 如何防止 .php 文件被直接访问

> ID：11715237
> 
> 赞同：0
> 
> 时间：2012-07-30T03:57:55.147
> 
> 标签：php, .htaccess

我有以下文件夹：

```
mywebsite/en/index.php
mywebsite/en/product/info.php
mywebsite/en/tags/tags.php
mywebsite/en/games/list.php 
```

我的网站在友好的 url 上运行，可以从以下友好的 url 访问最上面提到的文件

```
mywebsite/en/?pageno=1
mywebsite/en/product/Nike-glove
mywebsite/en/tags/Nike
mywebsite/en/games/ice-sports 
```

我有一些例子，但没有什么对我有用...我想阻止直接访问 .php 文件..我想用 htaccess 做到这一点...我可以吗？

谢谢和亲切的问候

卷标

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T04:47:03.473

添加404页面并尝试以下...

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /[^?\ ]*\.php[/?\ ]
RewriteRule .*\.php$ 404.php [L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T04:06:17.563

不确定您要完成什么，但这将阻止*直接*访问您的 php 文件：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /[^\ ]+\.php($|\ )
RewriteRule \.php$ / [F,L] 
```

虽然我猜你真的想在直接访问 php 文件时重定向到友好的 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T04:02:28.423

```
<Files ~ "\.php$">
Order allow,deny
Deny from all
</Files> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-07T20:49:25.087

我确定的解决方案基于[@Fou's answer](https://stackoverflow.com/a/11715525/335880)，但我已对其进行了修改以处理这种情况`/script.php/oops`并选择将响应代码重写为 404 而不是使用临时重定向：

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /[^?\ ]*\.php[/?\ ]
RewriteRule .* - [R=404] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T04:47:48.700

只需将其添加到您的 htaccess 文件中...试一试 :) 希望它有用

```
RewriteEngine On
IndexIgnore * 
```

# perl - 在perl中解析日期字符串

> ID：11715243
> 
> 赞同：2
> 
> 时间：2012-07-30T03:59:17.470
> 
> 标签：perl, datetime, perl-module

我试图`$test`通过尝试使用 Date::Manip 解析变量来检查变量是否包含有效的日期格式。当格式为 'YYYY/MM/DD' 时，它按预期工作。如果我将格式更改为“DD/MM/YYYY”（我的 $test="20/4/2012"），它将无法正常工作。我尝试了一个配置函数来设置英国日期格式，但它仍然不起作用。

```
use Date::Manip qw(ParseDate );
my $test="20_4_2012";
#my $test="2012_4_20";

$test =~ s/_/\//g;

print $test;

$date=ParseDate($test);

if(!$date) {
  print "baddate : $date\n";
}

else {
  print "Guddate: $date\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:42:57.500

你的配置函数调用是什么样的？我可以通过添加这个来让你的脚本工作：

```
Date_Init("DateFormat=non-US"); 
```

在 ParseDate 之前。（并且还添加`Date_Init`到中的导入列表中`use`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T20:00:55.790

希望您已经找到了解决方案 :-)

但是为了任何通过寻找 Perl 日期解析工具的人的利益，我强烈推荐核心模块`Time::Piece`——它非常擅长从任何旧的日期字符串中找出你的意思。

当然，对您的具体问题的真正答案是“这取决于您所说的有效”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T04:28:17.617

您可以使用`Time::ParseDate`允许您`UK`在解析器函数的参数中指定它来执行此操作。

```
use Time::ParseDate; 

my $test="20/4/2012";

$time = parsedate($test, UK => 1); 
```

# c# - 选择命令参数 C#

> ID：11715246
> 
> 赞同：0
> 
> 时间：2012-07-30T03:59:55.597
> 
> 标签：c#, asp.net, c#-4.0

我需要获取 SelectCommand.Parameters 的值

你能帮助我吗 ？

```
string sql = "SELECT area, login, senha FROM tbl_usuarios WHERE login = '" + login + "' AND senha = '" + senha + "'";
adapter = new SqlDataAdapter(sql, conn);
dataTable = new DataTable();

adapter.SelectCommand.Parameters.Add("login", DbType.String);
adapter.SelectCommand.Parameters.Add("senha", DbType.String);

string a = adapter.SelectCommand.Parameters.Add(@"area", DbType.Int16); // Error Coversion
Session.Add("ar", a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:04:35.570

I think the problem is that you are trying to assign the return type from the Add Method (which is a SqlParameter) to a string.

See [SqlParameterCollection.Add Method (String, SqlDbType)](http://msdn.microsoft.com/en-us/library/wbys3e9s.aspx)

I thing what you are looking for is something like

```
SqlParameter a = adapter.SelectCommand.Parameters.Add(@"area", DbType.Int16); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:15:20.050

```
 bool encontrou = false;
        string sql = "SELECT area, login, senha FROM tbl_usuarios WHERE login = '" + login + "' AND senha = '" + senha + "'";
        command = new SqlCommand(sql, conn);
        try
        {
            conn.Open();
            dataReader = command.ExecuteReader();
            while(dataReader.Read())
            {
                string area = dataReader["area"].ToString();
                Session.Add("area", area);
                encontrou = true;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:06:39.967

您的问题不清楚，但是 Add 方法返回一种 SqlParameter 类型，因此：

```
string a = adapter.SelectCommand.Parameters.Add(@"area", DbType.Int16); 
```

错了..它需要：

```
SqlParameter a = adapter.SelectCommand.Parameters.Add(@"area", DbType.Int16); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T04:05:05.053

检查 MSDN 上的代码：[SqlDataAdapter.SelectCommand 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.selectcommand%28v=vs.71%29.aspx)

也许你需要的是：

获取数据表上的值：

```
string sql = "SELECT area, login, senha FROM tbl_usuarios WHERE login = '" + login + "' AND senha = '" + senha + "'";
adapter = new SqlDataAdapter(sql, conn);
dataTable = new DataTable();
adapter.Fill(dataTable);

string a  = dataTable.Rows["area"].toString(); //get area value..
Session.Add("ar", a); 
```

问候

# date - 如何修改日期？

> ID：11715248
> 
> 赞同：1
> 
> 时间：2012-07-30T04:00:00.543
> 
> 标签：date, blackberry, simpledateformat

我无法`add`在 Blackberry Java 中获得该功能。

```
// Date
private static DateFormat dateFormat = new SimpleDateFormat(
        "yyyy-MM-dd hh:mm:ss");
private static Calendar cal = Calendar.getInstance();
public static final String date = dateFormat.format(cal.getTime())
        .toString(); 
```

该`cal`变量没有`add`功能，因为我想从当前日期减少 1 天。

[消息人士](http://www.mkyong.com/java/how-to-modify-date-time-date-manipulation-java/)称，使用`cal.add(Calendar.DATE, -1);`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:13:52.667

以下解决方案在使用 Java SE 时有效。我尚未使用 BlackBerry Java ME 进行验证。但是，鉴于我只使用[SE 版本的 Calendar](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)和[BlackBerry 版本的 Calendar](http://www.blackberry.com/developers/docs/6.0.0api/index.html)中存在的功能，因此我对这个解决方案的准确性有很好的感觉。将这些行附加到您的代码中：

```
long curTime = cal.getTimeInMillis();
curTime -= 1000*60*60*24;
cal.setTimeInMillis(curTime);
System.out.println(dateFormat.format(cal.getTime()).toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T04:48:14.893

试试这个：

```
Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(cal.getTime() - DateTimeUtilities.ONEDAY); 
```

根据[ecb0628](https://stackoverflow.com/users/814576/ecb0628)的回答和[paulkayuk](https://stackoverflow.com/users/980432/paulkayuk)的评论进行了更新。

检查[Calendar](http://www.blackberry.com/developers/docs/6.0.0api/java/util/Calendar.html)、[getTimeInMilis()](http://www.blackberry.com/developers/docs/6.0.0api/java/util/Calendar.html#getTimeInMillis%28%29)、[setTimeInMillis(long millis)](http://www.blackberry.com/developers/docs/6.0.0api/java/util/Calendar.html#setTimeInMillis%28long%29)和[DateTimeUtilities.ONEDAY](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/util/DateTimeUtilities.html#ONEDAY)。

# php - 多个加速器问题

> ID：11715252
> 
> 赞同：0
> 
> 时间：2012-07-30T04:00:41.760
> 
> 标签：php, centos, apc, prestashop, eaccelerator

## 基本信息

Linux Centos GoDaddy VPS 与 Prestashop 电子商务网站

## 由 Eaccelerator 创建的问题

**1）**安装eaccelerator后，php相关的等待时间增加了500毫秒，不知道为什么。

Eaccelerator 安装前：[http](http://tools.pingdom.com/fpt/#!/zdViZURr3/http://www.kikbo.com/buy) ://tools.pingdom.com/fpt/#!/zdViZURr3/http: //www.kikbo.com/buy Eaccelerator 安装后：http://tools.pingdom.com/fpt/# [! /NrPauzEMD/http://www.kikbo.com/buy](http://tools.pingdom.com/fpt/#!/NrPauzEMD/http://www.kikbo.com/buy)

**2)**使用以下 php.ini 配置时，每当我访问我网站上任何动态生成的页面时，都会收到 500 内部服务器错误。

```
[eacclerator]
extension="eaccelerator.so"
eaccelerator.shm_size="16"
eaccelerator.cache_dir="/tmp/eaccelerator"
eaccelerator.enable="1"
eaccelerator.optimizer="1"
eaccelerator.check_mtime="1"
eaccelerator.debug="1" [set as 1 to check the errors]
eaccelerator.filter=""
eaccelerator.shm_max="0"
eaccelerator.shm_ttl="0"
eaccelerator.shm_prune_period="0"
eaccelerator.shm_only="0"
eaccelerator.compress="1"
eaccelerator.compress_level="9" 
```

当我检查 error_log 时，它告诉我 eaccelerator 正在缓存，但没有进一步说明它为什么会导致 500 内部服务器错误。

```
EACCELERATOR cached: "...index.php" 
```

**3）**当我改变这个：

```
extension="eaccelerator.so" 
```

对此：

```
zend_extension="/usr/lib64/php/modules/eaccelerator.so" 
```

我不再收到 500 内部服务器错误，并且 eaccelerator 出现在 phpinfo() 中。有人访问该站点后，脚本会被缓存，但不会保持这种状态。它们很快消失，“缓存的脚本”变为 1，“删除的脚本”变为 0。

[![加速器问题](../Images/656f473280f2e088e4c6761854625d9d.png)](https://i.stack.imgur.com/I8CS6.jpg)
[（来源：[kikbo.com](http://www.kikbo.com/stackoverflow/eaccelerator.JPG)）]

此外，当我使用命令行时： php -v 我没有看到任何关于 eaccelerator 的信息。更进一步，我认为 php 计算时间没有任何好处。

当我检查错误日志时，我现在看到 eaccelerator 缓存并被“命中”：

```
EACCELERATOR hit: "...index.php"
EACCELERATOR cached: "...config.inc.php" 
```

## 我的问题

有什么方法可以“撤消”这个加速器安装吗？它减慢了我的网站速度，我不知道为什么。看来我应该使用 APC……但无论如何这些问题可以得到纠正，如果可以，是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:03:37.570

你真的需要卸载它还是只是禁用它来满足你的需要？如果您将启用键设置为 0，则不会使用加速器。

# sql-server-2008 - 表值函数

> ID：11715257
> 
> 赞同：0
> 
> 时间：2012-07-30T04:01:15.427
> 
> 标签：sql-server-2008

我在表中有一个列，其中包含示例数据，如下所示：

```
ServiceTypeIds 
 7,1 
 1,9 
 1
 9
 4
 7
 7 
```

在我的 Where 子句中，我使用以下内容对其进行搜索：

```
WHERE(@ServiceTypes IS NULL OR CHARINDEX(','+CAST(SEP.ServiceTypeIDs as VARCHAR(255))+',', ','+@ServiceTypes+',') > 0))) 
```

如果我的参数 @ServieTypes 等于 '1,9'，那么我会得到结果，但是当它是 @ServiceTypes = '1' 或只是 '9' 时，我不会收到任何回复。表格设计很差，但我只是没有足够的时间来创建新表格并修改 c# 代码。我尝试使用表值函数，但由于 ServiceTypeIds 不是主键列，所以它不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:29:45.220

只需更改参数的位置，`CHARINDEX`即 Put`','+@ServiceTypes+','`作为第一个参数，其他作为第二个参数

# android - Android / iOS 菜单按钮

> ID：11715265
> 
> 赞同：0
> 
> 时间：2012-07-30T04:02:25.503
> 
> 标签：android, ios

抱歉，我没有示例代码供您查看。我的问题是我的菜单有 8 个图像按钮，我需要知道如何让图像按钮显示和不显示。含义当您进入 Android 上的菜单时，它会显示 7 个按钮并隐藏适用于 iOS 的 1 个按钮，而当您在 iOS 上时，它会显示所有 8 个图像按钮。我在谷歌上搜索了两天现在仍然丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:54:04.333

如果您正在编写一个 Web 应用程序并且您需要知道该应用程序是在 Android 设备还是 iOS 设备上被访问，您应该查看[用户代理](http://en.wikipedia.org/wiki/User_agent)字符串。

以下是 iOS 设备及其用户代理字符串的列表：[http](http://www.enterpriseios.com/wiki/UserAgent) ://www.enterpriseios.com/wiki/UserAgent （第一次点击 Google，不能保证准确性）。

这是适用于 Android 设备的一个：[http](http://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/) ://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/ （同样，不知道有多准确；请自行研究以确定） .

你只需要查看`navigator.userAgent`你的 JavaScript 并找出用户正在使用什么设备。无论如何，这是一个开始。（您还需要查看 iOS 网络应用程序文档以了解 Apple 的特定元标记和东西，以使您的网络应用程序在 iOS 上运行良好，我相信 Android 也有类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:37:58.900

我有一个菜单按钮解决方案：试试这个[AwesomeMenu](https://github.com/levey/AwesomeMenu)链接。

您必须根据自己的要求进行修改。

# php - php 脚本回显 php 的一部分而不是预期的内容

> ID：11715267
> 
> 赞同：2
> 
> 时间：2012-07-30T04:02:38.903
> 
> 标签：php, mysql, pdo

我在创建用于将实例插入数据库的 php 脚本时遇到问题，但是我得到了一个微不足道的输出，我不知道如何修复它。代码是：

```
<?php

    try{
        $user = 'root';
        $pass = null;
        $pdo = new PDO('mysql:host=localhost; dbname=divebay', $user, $pass);

        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        $username = $_POST['username'];
        $password = sha1($_POST['password']);
        $location = %_POST['location'];
        $email = $_POST['email'];
        $name = $_POST['fname'] . " " . $_POST['surname'];

        $check = $pdo->prepare('SELECT * FROM user WHERE username=?');
        $check->bindValue(1, $username);
        $check->execute();

        if($check->fetch(PDO::FETCH_OBJ)){
            echo "Account name already exists";
        }
        else{

            $stmt = $pdo->prepare('INSERT INTO user(username, password, location, email, name)
                                  VALUES(:username, :password, :location, :email, :name)');
            $stmt->bindParam(':username', $username, PDO::PARAM_STR);
            $stmt->bindParam(':password', $password, PDO::PARAM_STR);
            $stmt->bindParam(':location', $location, PDO::PARAM_STR);
            $stmt->bindParam(':email', $email, PDO::PARAM_STR);
            $stmt->bindParam(':name', $name, PDO::PARAM_STR);

            if($stmt->execute()){
                echo "Account created";
            }
            else{
                echo "Account could not be created";
            }
        }

        $pdo = null;

    }catch(PDOException $e){
        echo $e->getMessage();
    }

?> 
```

我希望输出类似于“**创建帐户**”。相反，我收到此错误的输出：

> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); $username = $_POST['username']; $password = sha1($_POST['password']);
> $location = %_POST['location']; $email = $_POST['email']; $name = $_POST['fname'] 。“”。$_POST['姓氏']; $check = $pdo->prepare('SELECT * FROM user WHERE username=?');
> $check->bindValue(1, $username); $检查->执行（）；
> if($check->fetch(PDO::FETCH_OBJ)){ echo "账户名已经存在"; } else{ $stmt = $pdo->prepare('INSERT INTO user(username, password, location, email, name) VALUES(:username, :password, :location, :email, :name)'); $stmt->bindParam(':username', $username, PDO::PARAM_STR); $stmt->bindParam(':password', $密码，PDO::PARAM_STR);
> $stmt->bindParam(':location', $location, PDO::PARAM_STR);
> $stmt->bindParam(':email', $email, PDO::PARAM_STR);
> $stmt->bindParam(':name', $name, PDO::PARAM_STR);
> if($stmt->execute()){ echo "账户创建"; } else{ echo "无法创建账户"; } } $pdo = null; }catch(PDOException $e){ echo $e->getMessage(); } ?>

这个脚本出了什么问题导致这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:24:24.640

获得该输出的唯一方法是编写：

```
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

作为：

```
$pdo?>setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

因为失误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-17T06:53:27.487

**你有一个而`%`不是`$`on`%_POST['location']`**

**建议：** 我也强烈建议将 PDO 函数包装到一个类中。以下是我个人在每个项目中使用的内容：

将此保存到它自己的文件中（例如：sql.class.php）

```
<?php 

class SqlIt{
    public $Sql;
    public $Response;
    private $Host;
    private $DBname;
    private $User;
    private $Pass;
    public $NumResults;

    public function __construct($Sql, $type, $vars){
        if($vars == ""){
            $vars = array();
            }
        try{
        $DB = $this->db_connect();
        $DB->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            $STH = $DB->prepare($Sql);
            $doit = $STH->execute($vars);
            $this->Result = $doit;
            }
        catch(PDOException $e){
            echo $e->getMessage();
            }
        //find function to run
        switch($type){
            case 'select':
                $this->select($STH);
                break;
            }
        }

    public function select($query){
            $rows = $query->rowCount();
            $this->NumResults = $rows;
            while($row = $query->fetchObject()){
                $this->Response[] = $row;
            }
        }

    //create a separate function for connecting to DB. Private to only this class.
    private function db_connect(){
        $this->User = 'root';
        $this->Pass = '';
        $DBH = new PDO("mysql:host=localhost;dbname=divebaby", $this->User, $this->Pass);
        return $DBH;
        }
    }

?> 
```

然后，要实际运行您放置在上面的语句，只需正确以下代码：

```
$username = $_POST['username'];
$password = sha1($_POST['password']);
$location = $_POST['location'];
$email = $_POST['email'];
$name = $_POST['fname'] . " " . $_POST['surname']; 

$getUser = new SqlIt("SELECT * FROM user WHERE username=?","select",array($username));

    if($getUser){ 
        echo 'Account name already exists';
    }else{
        $insertUser = new SqlIt("INSERT INTO user (username,password,location,email,name) VALUES (?,?,?,?,?)","insert",array($username,$password,$location,$email,$name));

       if($insertUser){ 
           echo 'Account created!';
       }else{
           echo 'Account not created.';
       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T04:21:37.607

`<?php`在包含该代码的一个页面的开头缺少第一行`setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);`

# java - Request forwarding in java

> ID：11715277
> 
> 赞同：2
> 
> 时间：2012-07-30T04:04:56.270
> 
> 标签：java, spring, proxy

I am writing a proxy in java/spring where requests are accepted. Inside the proxy , the request is taken and a new request is made out of it. This request is sent to another server and results are obtained. And the result is sent back to the original person who requested it. So basically instead of X <-> Z The following is happening. X <-> Y <-> Z Here it is essential that Y should be able to filter out some results.

But then this approach is eating up a large amount of time

How can i optimize this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:14:23.390

从性能的角度来看，您的方法不是很合理。如果您想以编程方式过滤响应，让客户端请求实际资源并使用映射到请求 URL 模式的 servlet 过滤器过滤掉结果。

如果我推测您出于安全原因这样做，我建议您重新考虑您的设计并在它所属的数据库中执行您的数据安全性。

# javascript - 加载 Javascript 并在加载后检查

> ID：11715281
> 
> 赞同：1
> 
> 时间：2012-07-30T04:05:30.860
> 
> 标签：javascript, pageload

我正在使用以下 JavaScript 代码，并试图在文件下载并添加到我的页面标题后找出：

```
function loadjscssfile(filename, filetype)
{
    if (filetype=="js"){ //if filename is a external JavaScript file
        var fileref=document.createElement('script')
            fileref.setAttribute("type","text/javascript")
            fileref.setAttribute("src", filename)
    }
    else if (filetype=="css"){ //if filename is an external CSS file
        var fileref=document.createElement("link")
            fileref.setAttribute("rel", "stylesheet")
            fileref.setAttribute("type", "text/css")
            fileref.setAttribute("href", filename)
    }
    if (typeof fileref!="undefined")
        document.getElementsByTagName("head")[0].appendChild(fileref)
}

loadjscssfile("jquery.js","js"); 
```

我通常使用以下代码来查找我的图像加载后：

```
 document.getElementById("header_logo").src = "logo.png"; // load top logo

var header_logo = document.getElementById("header_logo"); 
    header_logo.onload = function(e) {  
    // do something here, the file has loaded
} 
```

但我无法弄清楚如何在我的 JS 加载后检查..

有任何想法吗？

（我不能使用 jQuery。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:07:49.720

您可以向`onload`事件添加一个函数：

```
function loadjscssfile(filename, filetype, onload) {
    //if filename is a external JavaScript file
    if (filetype == "js") { 
        var fileref = document.createElement('script');
        fileref.type = "text/javascript");
        fileref.onload = onload;
        fileref.src = filename);
        document.getElementsByTagName("head")[0].appendChild(fileref);
        return;
    }

    //if filename is an external CSS file
    if (filetype == "css") { 
        var fileref = document.createElement("link");
        fileref.rel = "stylesheet";
        fileref.type = "text/css";
        fileref.onload = onload;
        fileref.href = filename;
        document.getElementsByTagName("head")[0].appendChild(fileref);
        return;
    }
}

loadjscssfile("jquery.js","js", function() { alert(this.src); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:17:51.203

[在 HTML 4.01 中，只有body](http://www.w3.org/TR/html401/struct/global.html#edef-BODY)和[frameset](http://www.w3.org/TR/html401/present/frames.html#edef-FRAMESET)元素支持 load 事件，尽管许多支持 img 元素和一些 script 元素。

在 HTML5 中，[脚本元素](http://www.w3.org/TR/html5/the-script-element.html#the-script-element)具有*beforescriptexecute*、*afterscriptexecute*和*load*事件，这些事件在脚本元素生命周期的相关时间分派。然而，对这些事件的支持可能在许多正在使用的浏览器中不可用，因此不值得依赖。

查看脚本是否已加载的最可靠方法是测试一个变量的值，该变量由要执行的最后一位代码分配一个值，例如最终语句，如：

```
var loadedScripts = loadedScripts || {};
loadedScripts.fooScript = true; 
```

然后你可以测试它：

```
if (loadedScripts.fooScript) {
  // loaded

} else {
  // not loaded
} 
```

# mysql - 带有连接的mysql选择查询不显示同一表中多行的结果

> ID：11715283
> 
> 赞同：0
> 
> 时间：2012-07-30T04:05:49.657
> 
> 标签：mysql, database, relational-database

我正在尝试为我的数据库创建一个搜索表单，用户可以在其中搜索客户名称，并显示所有客户地址。我的结构看起来像这样

客户表

*   ID
*   名
*   姓
*   公司名称

地址表

*   ID
*   1号线
*   邮政编码
*   镇
*   客户ID

站点表

*   ID
*   地址_ID
*   笔记

我将名字、姓氏或公司名称作为输入，并将其存储为变量以及他们想要搜索的列，然后我使用以下查询来检查数据库是否匹配条件

```
$data = mysql_query("SELECT * FROM customer INNER JOIN address ON customer.ID = address.Customer_ID INNER JOIN sites ON address.ID = sites.address_ID WHERE upper(customer.$field) LIKE'%$query%'") ;/ 
```

我使用打印结果

```
 while($results = mysql_fetch_array($data)){
            echo "<br>"; 
            echo $results['First_Name']; 
            echo " "; 
            echo $results['Surname']; 
            echo $results['town']; 
            echo " "; 
            echo $results['postcode']; 
```

当一个客户有多个地址时，就会出现问题。家庭地址和站点地址不同。查询将只打印其中一个地址，即站点地址（第二次提交，似乎覆盖了家庭地址）

在地址表中，这两个地址都包含相同的 Customer_ID，我怎样才能让它们都显示而不仅仅是一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:31:00.400

我认为您在连接 SITES 时应该使用 LEFT OUTER JOIN。如果您使用 INNER JOIN，您会丢失 ID 不在 sites.address_id 中的地址记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:12:16.043

您需要使用搜索查询来查找客户，然后返回并获取该特定客户的所有记录。这样做作为子查询应该可以解决问题：

```
SELECT ...
FROM Customer
INNER JOIN address ON customer.ID = address.Customer_ID 
INNER JOIN sites ON address.ID = sites.address_ID 
WHERE Customer.ID IN (SELECT ID 
                      FROM customer 
                      INNER JOIN address ON customer.ID = address.Customer_ID 
                      INNER JOIN sites ON address.ID = sites.address_ID 
                      WHERE upper(customer.$field) LIKE'%$query%') 
```

# emacs - emacs 自动完成功能不适用于 jde

> ID：11715296
> 
> 赞同：4
> 
> 时间：2012-07-30T04:07:16.467
> 
> 标签：emacs, autocomplete

我想在emacs中开发java。我安装了 ecb、jde 和自动完成扩展。在不启动其他人的情况下，每个人都可以很好地工作。但是当我想一起使用它们时，发生了一些问题。

1.  auto-complete-mode 不使用 jde 自动启动，我需要通过 Mx auto-complete-mode 启动它。如果没有 jde，自动完成模式将自动启动
2.  当我在 jde 中手动启动自动完成模式时，自动完成无法正常工作。它只是自动完成出现的单词。

这是我的 .emacs 内容：

```
(global-linum-mode 1)
(setq linum-format "%2d| ")

(setq default-tab-width 4)

(setq debug-on-error t)

;;no backup file
(setq make-backup-files nil)

(setq debug-on-error t)

;;auto complete config
(add-to-list 'load-path "D:/emacs-24.1/custom_el/auto-complete-1.3.1")
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "D:/emacs-24.1/custom_el/auto-complete-1.3.1/dict")
(ac-config-default)

(setq stack-trace-on-error t)

(add-to-list 'load-path (expand-file-name "D:/emacs-24.1/custom_el/jdee-2.4.0.1/lisp"))
(add-to-list 'load-path (expand-file-name "D:/emacs-24.1/custom_el/cedet-1.1/common"))
(add-to-list 'load-path (expand-file-name "D:/emacs-24.1/custom_el/elib-1.0"))

(add-to-list 'load-path'  "d:/emacs-24.1/custom_el/ecb-2.40")

;; Initialize CEDET.
(load-file (expand-file-name "D:/emacs-24.1/custom_el/cedet-1.1/common/cedet.el"))
(load-file (expand-file-name "D:/emacs-24.1/custom_el/ecb-2.40/ecb.el"))

(require 'ecb)
(ecb-activate)
(ecb-byte-compile)

;; If you want Emacs to defer loading the JDE until you open a 
;; Java file, edit the following line
(setq defer-loading-jde nil)
;; to read:
;;
;;  (setq defer-loading-jde t)
;;

(if defer-loading-jde
    (progn
      (autoload 'jde-mode "jde" "JDE mode." t)
      (setq auto-mode-alist
        (append
         '(("\\.java\\'" . jde-mode))
         auto-mode-alist)))
 (require 'jde))

;; Sets the basic indentation for Java source files
;; to two spaces.
(defun my-jde-mode-hook ()
  (setq c-basic-offset 2))

(add-hook 'jde-mode-hook 'my-jde-mode-hook)

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(ecb-options-version "2.40")
 '(ecb-primary-secondary-mouse-buttons (quote mouse-1--C-mouse-1)))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 ) 
```

版本信息是：

```
emacs : 24.1
auto complete : 1.3.1
ecb : 2.40
cedet : 1.1
elib : 1.0
jdee : 2.4.0.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:59:11.207

要自动启动`auto-complete-mode`，`jde-mode`您需要`jde-mode`添加`ac-modes`：

```
(push 'jde-mode ac-modes) 
```

然后您需要将特定于 JDEE 的源添加到`ac-sources`. 我不确定 JDEE 与 Semantic 集成的程度，您也许可以使用它的预定义源：

```
(add-hook 'jde-mode-hook (lambda () (push 'ac-source-semantic ac-sources))) 
```

如果没有，您可能需要使用`ac-define-source`. 请参阅`auto-complete-config.el`示例。

# c++ - 是否有支持 Windows Unicode 文件名的 ZIP/unZIP 算法的 C++ 实现？

> ID：11715297
> 
> 赞同：-2
> 
> 时间：2012-07-30T04:07:38.487
> 
> 标签：c++, unicode, zip

我遇到了一些对使用旧式 C++ 的 ZIP/unZIP 归档算法的引用（这显然是为仅 ANSI 代码编写的。）但现在我想知道，是否有支持 Unicode 文件名的更新版本？

PS。我需要使用非托管 C++ 编写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:19:19.187

zip 文件名的标准是 UTF-8，这显然被许多人忽略了。
[http://datadriven.com.au/2008/12/zip-files-and-encoding-i-hate-you/](http://datadriven.com.au/2008/12/zip-files-and-encoding-i-hate-you/)

在 C++ 中，UTF-8 字符串将作为 char * 检索，然后需要将其转换为可显示的编码。例如 UTF-16 或当前系统语言环境。

# hibernate - Hibernate 查询（比较总和） - grails，跨两个不同的数据源

> ID：11715301
> 
> 赞同：1
> 
> 时间：2012-07-30T04:07:54.623
> 
> 标签：hibernate, grails, hql, grails-orm

我有这个代码，工作正常。我只是想问一下，如果我使用*executeQuery来比较子查询中的总和，这是否也是可能的，我认为使用**executeQuery*进行查询将比我现有的代码处理得更快。这是我的代码：

```
 def availableSched = []
    def tres = TestRoomExamSchedule.getAll()
    tres.each { t ->
        def stres = StudentTestRoomExamSchedule.countByTestRoomExamSchedule(t)
        if (stres < t.testRoom.totalTestStations && t.examSchedule.actualExamDateTime <= new Date()) {
           availableSched.add(t) 
        }
    }        
    return availableSched 
```

这个返回一个满足以下条件 的*TestRoomExamSchedule列表：* *1)TestRoom.totalTestStations is > student，它在 StudentTestRoomExamSchedule 中。2)ExamSchedule.actualExamDateTime <= 现在。*

我有这些域类：

```
class TestRoom {

String code
String name
int totalTestStations

static constraints = {
}

static mapping = {
    datasource 'admin'
    table 'testroom'
    code column: 'code'
    name column: 'name'
    totalTestStations column: 'totaltestmach', sqlType: "smallint"
} 
```

TestRoomExamSchedule 域类

```
class TestRoomExamSchedule implements Serializable{

Long testRoomId
ExamSchedule examSchedule
TestRoom testRoom   

static transients = ['testRoom']

static constraints = {
}

static mapping = {
    table 'testroom_examschedule'
    version false
    id generator: 'assigned', composite: ['testingCenterId','examSchedule']
    testRoomId column: 'testingcenter_id'
    examSchedule column: 'examschedule_id'

} 
```

StudentTestRoomExamSchedule 域类

```
class StudentTestRoomExamSchedule implements Serializable {

Student student
TestRoomExamSchedule testRoomExamSchedule

static constraints = {
}

static mapping = {
    table 'person_examschedule'
    version: false
    id composite: ['student', 'testRoomExamSchedule']
    student column: 'person_id'
    columns {
        testingCenterExamSchedule {
         column name: 'testroom_id'
         column name: 'examschedule_id'
        }
    }
} 
```

我正在使用两个不同的数据源，这就是为什么我需要在我的域类*TestRoomExamSchedule中以瞬态声明属性**testRoom*的原因。提前致谢。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:55:26.103

如果您使用两个不同的数据源，这可能是不可能的。

我只能想象在单个查询中可以进行数据库间操作的几个非常狭窄的情况。*

# javascript - 如何在 jquery 中将新加载的表单与 ajax 操作绑定

> ID：11715305
> 
> 赞同：0
> 
> 时间：2012-07-30T04:09:34.047
> 
> 标签：javascript, jquery, ajax

我有表单及其使用 jquery ajax 提交确定。

现在我正在尝试加载表单 insdie lightbox，然后表单正常提交。

我怎样才能使所有具有特定类的表单都应该通过 ajax 提交，即使它们是动态加载的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:14:15.037

最简单的实现是在表单附加到目标 $dom 节点后重新绑定事件

更新：对于您的最新评论，只需在`$(".form").ajaxForm(options);`您动态附加元素后再次初始化。

# android - 使用 mySQL 运行 monkeyrunner python 脚本

> ID：11715308
> 
> 赞同：2
> 
> 时间：2012-07-30T04:10:53.670
> 
> 标签：android, python, mysql, monkeyrunner

我正在尝试使用 MySQL 将我的结果与我的 monkeyrunner 脚本一起存储。我收到此错误：

```
import MySQLdb
ImportError: No module named named MySQLdb 
```

我使用 python 编写了我的 monkeyrunner 脚本。我在monkeyrunner所在的android-sdk/tools文件夹上运行脚本。而且我已经设置了 python-mySQL 连接，当我在 Python27 文件夹中运行 python 脚本时它工作正常（不在 Android 中）

如何将 MySQLdb 导入到我的 monkeyrunner 脚本？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:03:03.263

Monkeyrunner 使用 jython，而不是 python。因此，您可以使用 python 脚本连接到 mysqldb。不使用 jython 脚本。

从 monkeyrunner，要访问 mySQL，您应该使用 zxJDBC 包用于 jython。在你的 monkeyrunner 类路径中添加 JDBC 驱动程序。

zxJDBC 包为 Jython 中的数据库连接提供了一个几乎 100% 兼容 Python DB API 2.0 的接口，下面的代码应该可以让您连接到 mysql 数据库。

```
from com.ziclix.python.sql import zxJDBC
params = {}
params['serverName'] = 'localhost'
params['databaseName'] = 'ziclix'
params['user'] = None
params['password'] = None
params['port'] = 3306
db = apply(zxJDBC.connectx, ("org.gjt.mm.mysql.MysqlDataSource",), params) 
```

下面的链接可以详细说明这一点。

[http://www.jython.org/archive/21/docs/zxjdbc.html](http://www.jython.org/archive/21/docs/zxjdbc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:35:29.583

把事情简单化。无需处理 jars、版本和其他内容，只需使用命令行：

```
#! /opt/android-sdk/tools/monkeyrunner

import subprocess

USER = 'myuser'
PASSWORD = 'mypass'
DB = 'mydb'
p1 = subprocess.Popen([ "mysql", "--user=%s" % USER, "--password=%s" % PASSWORD, DB ], stdin=subprocess.PIPE)

print p1.communicate('INSERT INTO t1 VALUES(1, "other")') 
```

# sql-server-2008 - 如何在 SQL Server 2008 中将十进制时间转换为时间

> ID：11715310
> 
> 赞同：1
> 
> 时间：2012-07-30T04:11:14.387
> 
> 标签：sql-server-2008

我有十进制时间，我无法转换为时间。

```
DECLARE @hours decimal(5,3) 
SELECT @hours = 20.30 //20 Hrs and 30 mins 
```

我需要以下格式的输出

```
 Hours  20.5 AS Time (data type) 
```

下面是我的代码

```
 select cast(hours /24 as datetime) 
```

此代码给出的输出为 20.18 小时。但是我需要 20.5 小时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:21:22.180

由于小数部分并不真正代表小时的小数部分，因此您需要将其砍掉并单独处理。

在 SQL Server 2012 中：

```
select TIMEFROMPARTS ( floor(hours), 100*(hours - floor(hours)), 0, 0, 0 ) 
```

在 SQL 2012 之前：

```
select cast(cast(floor(hours) as char(2))+':'+cast(floor(100*(hours - floor(hours))) as char(2)) as time) 
```

# bash - 使用 find 删除所有文件（没有子目录）

> ID：11715311
> 
> 赞同：1
> 
> 时间：2012-07-30T04:11:47.923
> 
> 标签：bash, shell, unix

这是我的目录的结构：

```
./archive
    /sub1
        - file1
        - file2
    /sub2
        - file3
        - file4 
```

我尝试使用此命令查找所有超过 6 个月的文件以将其删除：

```
find ./archive -mindepth 1 -mtime +180 -delete 
```

所有文件和子目录都被删除了，我想要的只是`file1, file2, file3, file4`那个删除，不包括`sub1`and `sub2`，请指教。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T04:13:58.033

`find`支持该`-type`选项。使用它来指定常规文件`f`作为参数。

```
find ./archive -mindepth 1 -mtime +180 -delete -type f 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T04:14:06.830

包括一个`-type f`将查找限制为仅文件的标志：

```
find ./archive -mindepth 1 -mtime +180 -delete -type f 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T04:14:23.007

添加`-type f`选项以排除目录：

```
find ./archive -mindepth 1 -mtime +180 -type f -delete 
```

# c# - 通用与依赖注入

> ID：11715317
> 
> 赞同：8
> 
> 时间：2012-07-30T04:13:23.787
> 
> 标签：c#, design-patterns, generics, dependency-injection

泛型类和依赖注入之间有什么区别吗？~~它们不是实现控制反转的方法吗~~

泛型类不是实现依赖注入并增加编译时安全性的方法吗？

例如，如果我有一个节点类，那么我可以定义如下

```
class Node<T> where T : ISomeInterface
{
  ..
  ..
}

class Node
{
   ISomeInterface obj
   public Node(ISomeInterface inject)
   {
       obj = inject;
   }
} 
```

**更新 2** 与新

```
class Node<T> where T : ISomeInterface, new()
{
  ISomeInterface obj
  public Node()
  {
     obj = new T();
  }
} 
```

**更新 3** @akim：我已经做了你要求使用 Generics Repository using Generics 的示例

```
Interface IRepository 
{   
      public DataTable GetAll();
}

public class ProductRep : IRepository
{ 
       public DataTable GetAll()
       {
            //implementation
       }
}

public class MockProductRep : IRepository
{ 
       public DataTable GetAll()
       {
            //mock implementation
       }
}

public class Product<T> where T : IRepository, new()
{
    IRepository repository = null
     public Product()
     {
       repository = new T();
     }
    public List<Product> GetProduct()
    {
      DataTable prodlst =  repository.GetAll();
      //convert to List of products now
    }
}

//so while using the Product class, client would Supply ProductRep class and in NUnit you //would supply MockProductRep class

Product<ProductRep> obj = new ProductRep<ProductRep>();
List<Product> lst = obj.GetProduct();

//in NUnit
Product<MockProductRep> obj = new ProductRep<MockProductRep>();
List<Product> lst = obj.GetProduct(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T04:43:51.460

**泛型**引入了类型参数的概念，这使得*设计类和方法成为可能，这些类和方法延迟一种或多种类型的规范，*直到类或方法由代码[msdn](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx)声明和实例化。并且泛型及其所有限制和检查*在编译期间*使用*静态分析*应用。

另一方面，**依赖注入**是一种软件设计模式，它允许*在运行时而不是编译时* [wiki](http://en.wikipedia.org/wiki/Dependency_injection)中选择组件。并且对象耦合在运行时由汇编程序对象绑定，并且通常*在编译时使用静态分析* [wiki](http://en.wikipedia.org/wiki/Inversion_of_control)不知道。

**回答您的问题**：一个在编译时使用静态分析应用，另一个在运行时使用 XML 或代码内配置应用（它也应该对编译有效）。使用 **依赖注入**关于绑定的决定将被推迟，直到从上下文中获得更多信息或配置。所以泛型和依赖注入是不同的，用于不同的目的。

示例 #3 答案

让我们更进一步，提供`Repository<Entity>`并`Controller`考虑它的用法。你将如何实现控制器的构造函数：

```
public ControlFreakController<Repository<Entity>>()
{
    this.repository = new Repository<Entity>(); // here is a logical problem
} 
```

或者

```
public ControllerWithInjection(IRepository repository)
{
   this.repository = repository;
} 
```

`ControlFreakController`如果它取决于`Repository<Entity>`（字面意思是硬编码） ，你将如何覆盖测试？如果`Repository<Entity>`没有默认构造函数，并且有自己的依赖项和生命周期（例如，应该只有一个存储库代表 HTTP 请求）怎么办？如果第二天需要审核工作`Repository<Entity>`怎么办？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T04:28:23.487

他们不一样。泛型类型允许您定义可应用于各种其他类型的功能。但是，当您实例化泛型类时，编译器会引用作为泛型参数传递的实际类型。所以声明是静态的，编译后不能改变。例如，我可以编写实例化您的 Node 类的代码：

```
Node<SomeImplementation> node1 = new Node<SomeImplementation>();
Node<SomeOtherImplementation> node2 = new Node<SomeOtherImplementation>(); 
```

我在不同的场景中重用你的 Node 类，但是一旦我编译了我的程序集，我就不能改变我的变量的泛型类型（node1 和 node2）。

另一方面，依赖注入（和 IoC 容器）允许您在**运行时**更改应用程序的功能。您可以使用依赖注入`ISomeInterface`在运行时用完全不同的实现交换一个实现。例如，在您的第二个节点类中，我可以使用 IoC 容器来创建节点类......类似于：

```
Node n = Container.Create<Node>(); 
```

然后 IoC 容器会根据一些配置确定如何实例化 Node 类。它确定构造函数需要 的实现`ISomeInterface`，并且知道如何在**运行时**构建实现。我可以更改 IoC 容器的配置并执行相同的程序集/代码，并创建不同的实现`ISomeInterface`并将其传递给 Node.js 的构造函数。

这在单元测试中很有用，因为您可以模拟应用程序的某些部分，以便可以测试一个特定的类。例如，您可能想要测试一些通常访问数据库的业务逻辑。在您的单元测试中，您可以模拟您的数据访问逻辑并注入新功能，以返回测试每个特定业务案例所需的“静态”数据。这打破了您的测试对数据库的依赖，并允许进行更准确/可维护的测试。

**编辑**

关于您的更新，可能并不总是需要无参数构造函数限制。您可能有一个需要参数的类（由您或第三方编写）。要求类实现无参数构造函数可能会影响应用程序的完整性。DI 模式背后的想法是您的 Node 类不需要知道该类是如何实际创建的。

假设您有许多层的类/依赖项。对于泛型类型，它可能如下所示：

```
class MyClass<T>
    where T : IUtilityClass
{
    ...
}

class UtilityClass<T> : IUtilityClass
    where T : IAnotherUtilityClass
{
    ...
}

class AnotherUtilityClass : IAnotherUtilityClass
{
    ...
} 
```

在这种情况下，MyClass 使用 UtilityClass，而 UtilityClass 依赖于 AnotherUtilityClass。因此，当您声明 时`MyClass`，您必须知道每一个依赖项......不仅是 的依赖项`MyClass`，还有`UtilityClass`. 这个声明看起来像这样：

```
MyClass<UtilityClass<AnotherUtilityClass>> myTestClass =
    new MyClass<UtilityClass<AnotherUtilityClass>>(); 
```

当您添加越来越多的依赖项时，这会变得很麻烦。使用 DI，您的调用者不需要知道任何嵌套依赖项，因为 IoC 容器会自动计算出它们。您只需执行以下操作：

```
MyClass myTestClass = Container.Create<MyClass>(); 
```

无需了解有关 MyClass 或其实用程序类的详细信息。

IoC 容器通常还有其他好处，例如，它们中的许多都提供了面向切面编程的形式。它们还允许您指定对象的生命周期，因此对象可以是单例（只会创建一个实例，并且将相同的实例返回给所有调用者）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:31:24.963

我假设你的意思是你的泛型类看起来像这样：

```
class Node<T> where T : ISomeInterface {
    T obj;

    public Node(T inject) {
        obj = inject;
    }
} 
```

..在这种情况下，您只是为依赖注入打开了一个泛型类型（有限制）。您还没有发现依赖注入的不同“方法”——它仍然是依赖注入。

这在“现实世界”场景中不是很有用。您已经假设类型参数将如何纯粹基于注入和限制它来使用。此外，您只能将一种单一类型的对象注入其中，这是一个非常糟糕的假设。

使用 new() 进行更新后，您会遇到更多问题。您的注入类型必须允许无参数构造。这进一步限制了你。

# java - android:animateLayoutChanges 在父布局中不起作用

> ID：11715318
> 
> 赞同：7
> 
> 时间：2012-07-30T04:13:29.750
> 
> 标签：java, android, animation

假设我有一个结构如下的布局文件：

```
<LinearLayout android:id="@+id/main" android:orientation="vertical" android:animateLayoutChanges="true">
    <EditText>

    <TextView android:id="@+id/header1">
    <LinearLayout android:id="@+id/insertionPoint" android:orientation="vertical" android:animateLayoutChanges="true">
    </LinearLayout>

    <TextView android:id="@+id/header2">
</LinearLayout> 
```

我想动态地将文本字段添加到布局中`insertionPoint`，并且我想看到它下面的元素的动画（在这种情况下，`header2`）向下滑动。

Using `android:animateLayoutChanges`only 为布局中的元素设置动画`insertionPoint`，因此`header2`. 我应该怎么办？

更清楚一点：我想在这里做的是当我们向联系人添加更多字段（如电话号码）时，我们可以在 ICS 的人应用程序中看到的动画。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-29T22:22:34.210

API 16 添加了`LayoutTransition.CHANGING`动画类型，但默认情况下它是禁用的。

启用：

```
LinearLayout linearLayout = (LinearLayout) findViewById(R.id.main);
linearLayout.getLayoutTransition().enableTransitionType(LayoutTransition.CHANGING); 
```

不错的 DevBytes 视频：[https ://www.youtube.com/watch?v=55wLsaWpQ4g](https://www.youtube.com/watch?v=55wLsaWpQ4g)

# ios - iAds 槽 adWhirl 未完全加载

> ID：11715328
> 
> 赞同：0
> 
> 时间：2012-07-30T04:14:33.590
> 
> 标签：ios, iad, adwhirl

我刚刚使用 iAds 和 adMob 在我的应用程序中实现了 adWhirl。一切都正确编译，adMob 运行良好，但我的 iAd 尺寸不正确。广告看起来尺寸合适，但实际上似乎被截断了。大约 1/4 的广告似乎丢失了。因为我没有错误，所以我不知道在哪里可以解决这个问题。

这是我的广告栏的截图。

[http://imgur.com/waPPD](http://imgur.com/waPPD)

任何帮助或只是朝着正确方向轻推将不胜感激！

这是 AdWhirlAdapteriAd.h

```
#import "AdWhirlAdNetworkAdapter.h"
#import <iAd/ADBannerView.h>

@interface AdWhirlAdapterIAd : AdWhirlAdNetworkAdapter <ADBannerViewDelegate> {
  NSString *kADBannerContentSizeIdentifierPortrait;
  NSString *kADBannerContentSizeIdentifierLandscape;
}

+ (AdWhirlAdNetworkType)networkType;

@end 
```

这是 AdWhirlAdapteriAd.m

```
#import "AdWhirlAdapterIAd.h"
#import "AdWhirlAdNetworkConfig.h"
#import "AdWhirlView.h"
#import "AdWhirlLog.h"
#import "AdWhirlAdNetworkAdapter+Helpers.h"
#import "AdWhirlAdNetworkRegistry.h"

@implementation AdWhirlAdapterIAd

+ (AdWhirlAdNetworkType)networkType {
  return AdWhirlAdNetworkTypeIAd;
}

+ (void)load {
  if(NSClassFromString(@"ADBannerView") != nil) {
    [[AdWhirlAdNetworkRegistry sharedRegistry] registerClass:self];
  }
}

- (void)getAd {
  ADBannerView *iAdView = [[ADBannerView alloc] initWithFrame:CGRectZero];
  kADBannerContentSizeIdentifierPortrait =
    &ADBannerContentSizeIdentifierPortrait != nil ?
      ADBannerContentSizeIdentifierPortrait :
      ADBannerContentSizeIdentifierPortrait;
  kADBannerContentSizeIdentifierLandscape =
    &ADBannerContentSizeIdentifierLandscape != nil ?
      ADBannerContentSizeIdentifierLandscape :
      ADBannerContentSizeIdentifierPortrait;
  iAdView.requiredContentSizeIdentifiers = [NSSet setWithObjects:
                                        kADBannerContentSizeIdentifierPortrait,
                                        kADBannerContentSizeIdentifierLandscape,
                                        nil];
  UIDeviceOrientation orientation;
  if ([self.adWhirlDelegate respondsToSelector:@selector(adWhirlCurrentOrientation)]) {
orientation = [self.adWhirlDelegate adWhirlCurrentOrientation];
  }
  else {
    orientation = [UIDevice currentDevice].orientation;
  }

  if (UIDeviceOrientationIsLandscape(orientation)) {
    iAdView.currentContentSizeIdentifier = kADBannerContentSizeIdentifierLandscape;
  }
  else {
    iAdView.currentContentSizeIdentifier = kADBannerContentSizeIdentifierPortrait;
  }
  [iAdView setDelegate:self];

  self.adNetworkView = iAdView;
  [iAdView release];
}

- (void)stopBeingDelegate {
  ADBannerView *iAdView = (ADBannerView *)self.adNetworkView;
  if (iAdView != nil) {
    iAdView.delegate = nil;
  }
}

- (void)rotateToOrientation:(UIInterfaceOrientation)orientation {
  ADBannerView *iAdView = (ADBannerView *)self.adNetworkView;
  if (iAdView == nil) return;
  if (UIInterfaceOrientationIsLandscape(orientation)) {
    iAdView.currentContentSizeIdentifier = kADBannerContentSizeIdentifierLandscape;
  }
  else {
    iAdView.currentContentSizeIdentifier = kADBannerContentSizeIdentifierPortrait;
  }
  // ADBanner positions itself in the center of the super view, which we do not
  // want, since we rely on publishers to resize the container view.
  // position back to 0,0
  CGRect newFrame = iAdView.frame;
  newFrame.origin.x = newFrame.origin.y = 0;
  iAdView.frame = newFrame;
}

- (BOOL)isBannerAnimationOK:(AWBannerAnimationType)animType {
  if (animType == AWBannerAnimationTypeFadeIn) {
    return NO;
  }
  return YES;
}

- (void)dealloc {
  [super dealloc];
}

#pragma mark IAdDelegate methods

- (void)bannerViewDidLoadAd:(ADBannerView *)banner {
  // ADBanner positions itself in the center of the super view, which we do not
  // want, since we rely on publishers to resize the container view.
  // position back to 0,0
  CGRect newFrame = banner.frame;
  newFrame.origin.x = newFrame.origin.y = 0;
  banner.frame = newFrame;

  [adWhirlView adapter:self didReceiveAdView:banner];
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
  [adWhirlView adapter:self didFailAd:error];
}

- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:              (BOOL)willLeave {
  [self helperNotifyDelegateOfFullScreenModal];
  return YES;
}

- (void)bannerViewActionDidFinish:(ADBannerView *)banner {
  [self helperNotifyDelegateOfFullScreenModalDismissal];
}

@end 
```

这是在应用程序中调用广告的位置

主菜单界面.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "GameManager.h"
#import "AdWhirlView.h"
#import "AdWhirlDelegateProtocol.h"
#import "Reading_FluencyAppDelegate.h"
#import "RootViewController.h"

enum GameStatePP {
    kGameStatePlaying,
    kGameStatePaused
};

@interface MainMenuInterface : CCLayer <AdWhirlDelegate>

{
    CCMenu *mainMenu;
    CCMenu *aboutPage;

    RootViewController *viewController;
    AdWhirlView *adWhirlView;
    enum GameStatePP _state;
}

@property(nonatomic,retain) AdWhirlView *adWhirlView;
@property(nonatomic) enum GameStatePP state;

-(void)displayStartButton;

@end 
```

这是 MainMenuInterface.m 中的重要内容

```
- (void)adWhirlWillPresentFullScreenModal {

    if (self.state == kGameStatePlaying) {

        //[[SimpleAudioEngine sharedEngine] pauseBackgroundMusic];

        [[CCDirector sharedDirector] pause];
  }
}

- (void)adWhirlDidDismissFullScreenModal {

    if (self.state == kGameStatePaused)
        return;

    else {
        self.state = kGameStatePlaying;
        //[[SimpleAudioEngine sharedEngine] resumeBackgroundMusic];
        [[CCDirector sharedDirector] resume];

    }
}

- (NSString *)adWhirlApplicationKey {
    return @"23myapplicationkey39203924";
}

- (UIViewController *)viewControllerForPresentingModalView {
    return viewController;
}

-(void)adjustAdSize {
    [UIView beginAnimations:@"AdResize" context:nil];
    [UIView setAnimationDuration:0.2];
    CGSize adSize = [adWhirlView actualAdSize];
    CGRect newFrame = adWhirlView.frame;
newFrame.size.height = adSize.height;

CGSize winSize = [CCDirector sharedDirector].winSize;
newFrame.size.width = winSize.width;
newFrame.origin.x = (self.adWhirlView.bounds.size.width - adSize.width)/2;

newFrame.origin.y = (winSize.height - adSize.height);
adWhirlView.frame = newFrame;
[UIView commitAnimations];
}

- (void)adWhirlDidReceiveAd:(AdWhirlView *)adWhirlVieww {
[adWhirlView rotateToOrientation:UIInterfaceOrientationLandscapeRight];
[self adjustAdSize];

}

-(void)onEnter {
    viewController = [(Reading_FluencyAppDelegate *)[[UIApplication sharedApplication]         delegate] viewController];
    self.adWhirlView = [AdWhirlView requestAdWhirlViewWithDelegate:self];
    self.adWhirlView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin;

    [adWhirlView updateAdWhirlConfig];
CGSize adSize = [adWhirlView actualAdSize];
CGSize winSize = [CCDirector sharedDirector].winSize;
self.adWhirlView.frame = CGRectMake((winSize.width/2)-(adSize.width/2),winSize.height-            adSize.height,winSize.width,adSize.height);
self.adWhirlView.clipsToBounds = YES;
[viewController.view addSubview:adWhirlView];
[viewController.view bringSubviewToFront:adWhirlView];
[super onEnter];
}

-(void)onExit {
if (adWhirlView) {
    [adWhirlView removeFromSuperview];
    [adWhirlView replaceBannerViewWith:nil];
    [adWhirlView ignoreNewAdRequests];
    [adWhirlView setDelegate:nil];
    self.adWhirlView = nil;
}
[super onExit];
}

-(void)dealloc
{
self.adWhirlView.delegate = nil;
self.adWhirlView = nil;
[super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:06:02.317

也许您的`winSize`财产`sharedDirector`仍然认为您的肖像？如果你翻转它，你有：

```
newFrame.size.width = winSize.height;
newFrame.origin.x = (self.adWhirlView.bounds.size.width - adSize.width)/2;

newFrame.origin.y = (winSize.width - adSize.height);
adWhirlView.frame = newFrame; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:31:36.577

对于那些将来需要知道的人，我的问题原来是它调用的是横向广告而不是纵向广告，而不是调用 adjustAdSize() 时它没有得到正确的尺寸。

我变了

```
- (void)adWhirlDidReceiveAd:(AdWhirlView *)adWhirlVieww {
    [adWhirlView rotateToOrientation:UIInterfaceOrientationLandscapeRight];
    [self adjustAdSize];
{ 
```

到

```
- (void)adWhirlDidReceiveAd:(AdWhirlView *)adWhirlVieww {
    [adWhirlView rotateToOrientation:UIInterfaceOrientationPortrait];
    [self adjustAdSize];
{ 
```

它解决了我所有的问题！

# wpf - 什么时候 既有直接资源又有合并资源，为什么找不到资源？

> ID：11715330
> 
> 赞同：0
> 
> 时间：2012-07-30T04:15:07.503
> 
> 标签：wpf

### 文件 app.xaml

```
<Application.Resources>
    <ResourceDictionary>
        <SolidColorBrush x:Key="appBrush" Color="Red"/>

        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary  Source="Dictionary1.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

### 文件 Dictionary1.xaml

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ControlTemplate x:Key="ct">
        <Rectangle Fill="{StaticResource appBrush }"/>
    </ControlTemplate>
</ResourceDictionary> 
```

然后 MainWindow 使用定义的模板。

```
<Control Template="{StaticResource ct}"/> 
```

跑。它说找不到appBrush。有什么问题？

请注意，将 StaticResource 更改为 DynamicResource 绝对可以让它工作。但是是什么原因迫使我做出改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:18:22.160

将您的 App.xaml 更改为此，它将起作用：

```
<Application.Resources>
  <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary>
           <SolidColorBrush x:Key="appBrush" Color="Red"/>
        </ResourceDictionary>
        <ResourceDictionary  Source="Dictionary1.xaml"/>
    </ResourceDictionary.MergedDictionaries>
  </ResourceDictionary>
</Application.Resources> 
```

我相信这与资源如何合并在一起有关。在这些类型的情况下，我总是使用 Brushes.xaml 资源字典来定义我的所有画笔，并将其合并到任何其他资源字典之前。

# java - 管理切换按钮的状态

> ID：11715333
> 
> 赞同：0
> 
> 时间：2012-07-30T04:15:19.563
> 
> 标签：java, android, adt

我遇到的问题是管理切换按钮的打开和关闭状态。该按钮打开/关闭蓝牙。我怎样才能使它可以在不关闭应用程序的情况下轻松打开和关闭按钮？现在它只在启动应用程序时有效。

```
if(!myBluetooth.isEnabled()){

            final ToggleButton tglbtn = (ToggleButton)findViewById(R.id.ToggleButton01);

            tglbtn.setChecked(false);
           tglbtn.setOnClickListener(new OnClickListener(){
                 public void onClick(View v) {
                    myBluetooth.enable();}});

            }

        else {
            ToggleButton tglbtn = (ToggleButton)findViewById(R.id.ToggleButton01);

            tglbtn.setChecked(true);

          tglbtn.setOnClickListener(new OnClickListener(){
           public void onClick(View v) {
            myBluetooth.disable();}});
        } 
```

我尝试实现一个循环来完成此操作，但应用程序不断崩溃，我唯一能想到的另一件事是`goto`在两个 myBluetooth 实例下方的底部向下，链接到另一个，但由于这在 java 中是不可能的，我米出主意。

```
while(myBluetooth != null){
             tglbtn.setOnClickListener(new OnClickListener(){
                 public void onClick(View v) {
                    myBluetooth.enable();
                    toggleflag = true; }});
                    while (toggleflag){
                        tglbtn.setOnClickListener(new OnClickListener(){
                            public void onClick(View v) {
                                myBluetooth.disable();
                                toggleflag = false; }});

                    }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:01:53.250

**试试这个**

```
ToggleButton toggle = (ToggleButton) findViewById(R.id.toggle);
toggle.setOnCheckedChangeListener(new OnCheckedChangeListener() {
@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
Toast.makeText(getApplicationContext(), buttonView.isChecked()+"",Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:56:43.143

**您可以使用**

[isChecked()](http://developer.android.com/reference/android/widget/CompoundButton.html#isChecked%28%29)

# android - Android 应用程序变得无响应

> ID：11715334
> 
> 赞同：1
> 
> 时间：2012-07-30T04:15:26.897
> 
> 标签：android, jakarta-mail, android-service

每当有新电子邮件到达收件箱时，我都会尝试收到通知，代码如下。我的应用程序在短时间内变得没有响应，虽然在 logCat 应用程序仍在与 imap 服务器通信....但 android 系统要求我等待或关闭此应用程序。这是因为“thread.sleep()”吗？我该如何解决？

任何人都可以指导我吗？：/

```
@Override

public void onStart(Intent intent, int startid) {
    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onStart");
    //player.start();
    //add listenser and keep listening
    try{
        folder.addMessageCountListener(new MessageCountAdapter() {//start
            public void messagesAdded(MessageCountEvent ev) {
                Message[] msgs = ev.getMessages();
                // msgs.length

                Log.d(TAG, "It is inside LISTENER");

            }
            });//end    
         for (; ;) {
                Thread.sleep(20000); // sleep for freq milliseconds

                // This is to force the IMAP server to send us
                // EXISTS notifications. 
                Log.d(TAG, "AFTER SLEEP");
                folder.getMessageCount();
                }
    }
    catch(Exception e){

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:45:58.000

1.  `onStart`已弃用。你应该`onStartCommand`改用。

2.  系统调用主 UI Thread`onStart`和`onStartCommand` *主 UI Thread*。您的应用程序似乎“无响应”的原因是您正在调用`Thread.sleep(20000)`主 UI 线程。主 UI 线程负责生成布局和响应触摸/UI 事件。调用`Thread.sleep`阻止了所有这一切的发生，因此您的应用程序似乎挂起（最终您收到应用程序无响应错误）。

# java - Java中的服务器到服务器通信 - 负载平衡

> ID：11715336
> 
> 赞同：1
> 
> 时间：2012-07-30T04:15:38.140
> 
> 标签：java, chat

我在 java 中有一个使用 nio 的聊天应用程序，它现在工作正常。我想用相同的端口号将我的聊天服务器分成 2 个。

简单地 ：

1.  我想将我的服务器拆分为两个或三个。当客户端
    登录时，它首先连接到第一台服务器。
2.  当**第一台服务器**有 10 个客户端时，第 11 个客户端必须连接到**第二台服务器**。**和第三台服务器**的相同机制。
3.  这三个服务器必须具有相同的端口号。
4.  这些服务器必须具有内部通信。如果客户端 1 登录到服务器 1 。**Server 2**和**Server 3**应该知道**服务器 1**中的任何详细信息。
*****   服务器 1 中的客户端必须与服务器 2 和服务器 3 中的客户端通信。****

 ****我怎样才能使这些成为可能是否有与此相关的任何示例。我用谷歌搜索了它，但找不到任何合适的解决方案。

请指导我解决这些问题。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:01:58.570

您可以使用根据服务器实例健康状况重定向请求的负载均衡器，您可以不公开服务器健康参数。服务器具有的连接数。对于服务器间通信，我建议使用 apache activemq 和共享数据库也是个好主意****

# ruby-on-rails - 将防护与 rspec 一起使用时出错

> ID：11715341
> 
> 赞同：0
> 
> 时间：2012-07-30T04:17:00.517
> 
> 标签：ruby-on-rails, rspec

我正在关注来自[http://net.tutsplus.com/tutorials/ruby/the-intro-to-rails-screencast-i-wish-i-had/的“Rails Screencast 简介 - 我希望拥有的教程” ?search_index=2](http://net.tutsplus.com/tutorials/ruby/the-intro-to-rails-screencast-i-wish-i-had/?search_index=2)

基于此，我将以下宝石添加到我的文件中 -

```
group :test, :development do 
  gem 'turn'
  gem 'rspec-rails'
  gem 'capybara'
  gem 'guard-rspec'
  gem 'libnotify'
end 
```

我比运行以下命令 -

```
rails g rspec:install
guard init rspec
guard 
```

我在运行警卫时收到以下错误。相反，我应该看到失败的测试。我已经生成了一个集成测试 -

> 守在这里！看起来您的项目有一个 Gemfile，但您在`guard`Bundler 之外运行。如果这是您的意图，请随时忽略此消息。否则，请考虑使用`bundle exec guard` 以确保正确加载您的依赖项。（您可以`guard` 使用 --no-bundler-warning 运行以消除此消息。）
> 
> Guard 使用 Libnotify 发送通知。Guard 现在在 '/home/murtaza/workspace/rails/tasks' 观看 Guard::RSpec 正在运行，使用 RSpec 2！`<class:TestCase>': uninitialized constant Test::Unit::TestCase::Assertions (NameError) from /home/murtaza/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit/testcase.rb:8:in` 从 /home/murtaza/运行所有规格 gem install minitest /home/murtaza/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit/testcase.rb:9:in ' .rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit/testcase.rb:4:in `<module:Test>' from /home/murtaza/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit/testcase.rb:3:in` '来自/home/murtaza/.rvm/rubies/ruby-1.9.3- p194/lib/ruby/1.9.1/test/unit.rb:5:in `<top (required)>' from /home/murtaza/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit/assertions.rb:4:in` '来自 /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rspec-rails-2.11.0/lib /rspec/rails/adapters.rb:2:in `<top (required)>' from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rspec-rails-2.11.0/lib/rspec/rails.rb:10:in` '来自 /home/murtaza/workspace/rails/tasks/spec/spec_helper.rb:4:in`<top (required)>' from /home/murtaza/workspace/rails/tasks/spec/requests/tasks_spec.rb:1:in` 要求'来自 /home/murtaza/workspace/rails/tasks/spec/请求/tasks_spec.rb:1:in `<top (required)>' from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in`从/home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `block in load_spec_files' from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in`map'从/home/加载' murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files' from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in`run' from /home/murtaza/.rvm/gems /ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run' from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in` block in autorun' >

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:26:47.727

The issue is with the 'turn' gem. Removing it does the trick.

[https://github.com/rspec/rspec-rails/issues/484](https://github.com/rspec/rspec-rails/issues/484)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:41:02.120

尝试运行`bundle exec guard`作为您的最终命令，而不是运行`guard`.

该`bundle exec`命令的一部分告诉守卫在通过加载的 gem 中运行`Bundler`。Bundler 是一个工具，它允许您的本地文件夹拥有自己的 gem 环境。

这就是错误消息所指示的内容：

> 守在这里！看起来您的项目有一个 Gemfile，但您在 Bundler 之外运行守卫。如果这是您的意图，请随时忽略此消息。否则，请考虑使用 bundle exec guard 来确保正确加载您的依赖项。（您可以使用 --no-bundler-warning 运行警卫以消除此消息。）

# mysql - 如何使用 MySQL 计算所有记录中的时间

> ID：11715344
> 
> 赞同：1
> 
> 时间：2012-07-30T04:17:44.300
> 
> 标签：mysql

假设我有这个记录：

```
ot_id    overtime
1        02:30
2        01:00 
```

在MySql中，如何选择加班总数（`hours:minutes`）？

MySQL中是否有任何可用的函数来计算总小时数？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:44:39.510

你的意思是这样的：

```
SELECT  
  SEC_TO_TIME( SUM( TIME_TO_SEC( `overtime` ) ) ) AS totals  
FROM your_tablename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:49:45.533

```
SELECT  
  SEC_TO_TIME( SUM( TIME_TO_SEC( `overtime` ) ) ) AS total_time  
FROM time_table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:54:04.800

你可以这样做...

我有一个表'table1'有两列'int'类型的'col1'和'time'类型的'col2'

要创建该表，请使用以下脚本

```
CREATE TABLE `table1` (
    `col1` INT(10) NULL,
    `col2` TIME NULL
)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB; 
```

要获取第二列（col2）的总时间，请使用以下查询

```
SELECT Sec_to_Time(Sum(Time_to_Sec(col2))) FROM table1 
```

# xcode - 你如何实现一个按钮每次按下时触发不同的动作？

> ID：11715345
> 
> 赞同：0
> 
> 时间：2012-07-30T04:17:47.740
> 
> 标签：xcode, uibutton

就像一个视频录制按钮。按下时开始，再次按下时停止。

一点指导将非常有帮助......在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:55:55.850

对于显示播放/停止的切换按钮，如下所示将起作用...

```
-(IBAction) togglePlay:(id)sender{

        if (audioPlayer.playing) {

            [audioPlayer stop];
            [playButton setBackgroundImage:playSoundImage forState:UIControlStateNormal];

            //set image play

        }else{

            [audioPlayer play];
            [playButton setBackgroundImage:stopSoundImage forState:UIControlStateNormal];

        }

} 
```

# java - 每当我按下机器人上的物理后退按钮时，我都想进入上一个菜单，有人可以指导我完成吗？

> ID：11715346
> 
> 赞同：-1
> 
> 时间：2012-07-30T04:18:29.137
> 
> 标签：java, android

这是我从解析的 XML 动态创建菜单的函数，现在我希望当我按下物理后退按钮时它应该移动到上一个菜单。我已经阅读了很多关于此的文章，但仍然没有找到返回菜单的单曲。

```
public int create_menu(int level_n){

    int lv=level_n;

    if(flag){
        base=0;
    }
    else{
        base=lv-1;
    }
    ctr=true;
    if(e[lv].getType().equals("menu")){
        flag=false;
        subm[lv]=subm[base].addSubMenu(0, lv, 0, e[lv].getName());
        lv++;

        for(int i=0;i<noChild[lv-1];i++){
            if(e[lv+i].getType().equals("menu")){

                create_menu(lv+i);
                Log.i(TAG,"number=  "+i);
                flag=false;

            }
            else if (e[lv+i].getType().equals("action")){
                if(ctr){
                Log.i(TAG,"going to else"+e[lv].getName()+"   " +i);
                subm[lv]=subm[lv-1+i].addSubMenu(0, lv+i, 0, e[lv+i].getName());
                //Log.i(TAG,"element = "+e[lv+1].getType() );

                lv++;
                create_menu(lv);
                ctr=false;
                }

                flag=false;
            }
        }
        flag=true;

    }
    else if(e[lv].getType().equals("action")){
        if(flag==true && ctr==true)
        {
            subm[lv]=subm[base].addSubMenu(0, lv,0, e[lv].getName());
            lv++;

        }
        else if(flag==false && ctr==false){
            subm[lv]=subm[base-1].addSubMenu(0, lv, 0, e[lv].getName());
            lv++;

        }

    }

    return lv;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:29:33.630

使用`KeyEvent`，尝试以下...

```
public boolean onKeyUp( int keyCode, KeyEvent event )
    {
        if( keyCode == KeyEvent.KEYCODE_BACK )
        {
            finish();
            return true;
        }
        return super.onKeyUp( keyCode, event );
    } 
```

# css - 双行导航栏 - 是什么原因造成的？

> ID：11715352
> 
> 赞同：0
> 
> 时间：2012-07-30T04:20:13.367
> 
> 标签：css, search, navigation, margin, padding

[现场直播。](http://growingedgecoaching.com)

我想我已经工作太久了，睡眠太少，无法完成这个网站。出于某种原因，我似乎无法找到导航栏，无论我为链接和搜索表单提供多少空间，导航栏都采用了两个级别。关于导致第二行的任何想法？理想情况下，它应该是一排，最左侧的链接和右侧的搜索表单之间的间距均匀。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:34:31.327

这是因为填充：

```
#branding .only-search + #access div {
   padding-right: 205px;
} 
```

和边距：

```
#access div {
    margin: 0 7.6%;
} 
```

减少填充和边距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:26:00.410

`padding-right:205px;`在你`style.css`的网上`728`是造成这种情况的。

相应地减少填充。

# php - MySQL中具有外键的分层数据

> ID：11715355
> 
> 赞同：2
> 
> 时间：2012-07-30T04:20:37.263
> 
> 标签：php, mysql, sql

我需要在网站中建立一个分层列表。有四个级别的信息：

类别 > 类型 > 部分 > 主题

category的id是types的外键，types的id是sections的外键，sections的id是topics的外键。

这种结构似乎是必要的，因为这四种级别中的每一种都有页面。每个页面都显示每个部分以及子部分中的信息。

这意味着，您也可以访问`http://localhost/community/category.php?id=1`（或 0 到 20ish 之间`http://localhost/community/types.php?id=3`的任何数字）等其他两种信息。

我可以用这种结构构建一个分层列表，还是必须像传统的分层 mysql 结构一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:58:30.057

我之前不止一次发布过这个链接：mikehillyer.com/articles/managing-hierarchical-data-in-mysql ...

我一直使用邻接表模型；只要列出的限制之一不会成为您的特定数据集的问题

# perl - Perl 打开文件 + 哈希 + 编辑

> ID：11715358
> 
> 赞同：-1
> 
> 时间：2012-07-30T04:21:07.023
> 
> 标签：perl, hash

我没有从以下代码中得到预期的结果：

```
#!/bash/perl
use strict;
use warnings;

my @file;
my $file2;

open (IN, "+</home/opmeitle/labs-perl/numbers");
@file = <IN>;
seek IN,0,0;

my %change = ( 80.928 => "85.950", 320.000  => "380.500");
my $changekey = join "|", keys %change;

foreach $file2 (@file){
$file2 =~ s/($changekey)/$change{$1}/g;
print IN $file2;}
close IN; 
```

这是的内容`/home/opmeitle/labs-perl/numbers`：

```
80.928
320.000 
```

这是输出：

```
85.950
380.500.000 
```

这是我想要的结果：

```
85.950
380.500 
```

我很感激你的回答。

路易斯。

但是，看这个例子，在代码 my %change = ( nombre => "name", mi => "my"); 这是结果“你好，我的名字 es Luis y vivo en Argentina a”，最后一个字！因为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:44:06.953

你的第一个问题是在`.`(dot) `.`(dot) - 在正则表达式中的意思是“任何符号”。

您在 320.000 中的第二个问题 - 这是数字，它完全等于 320

320.000 =~ s/320/380.500/g；=> 380.500.000

我想解决方案可能是将哈希键的类型从数字更改为字符串并转义所有点`'.' => '\.'`

为了支持我的观点，我写了一个小脚本：

```
#!/usr/bin/perl

my %change = ( 80.928 => "85.950", 320.000  => "380.500");
my $changekey = join "|", keys %change;

print $changekey; 
```

瞧，它产生输出：`320|80.928`

但是当 %change hash 写为`my %change = ( "80.928" => "85.950", "320.000" => "380.500");`时，输出将是`320.000|80.928`

第三个问题，您以读写模式打开文件，但是当结果文件的大小小于源文件时，最后会是垃圾。为避免这种情况，您必须使用`truncate`, 或以只读模式打开文件，读取它，关闭它，然后以只写模式打开它。

# android - Android：如何在不启动我的应用程序的情况下运行服务

> ID：11715362
> 
> 赞同：0
> 
> 时间：2012-07-30T04:21:29.300
> 
> 标签：android, service

我是android新手。我在我的应用程序中编写了一个服务..我正在安装我的应用程序（未启动）..此时我的服务应该开始运行并打开一个用户界面..如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:59:14.403

安装应用程序后您无法启动您的 UI 或服务，但您可以做的是您可以听一些 Intent Action。并从您的广播接收器开始您想要的任何东西。

您需要在清单中注册接收器，并使用一个操作，例如 PHONE_STAT_CHANGE、收到的消息、屏幕解锁 .. 您可以在您的应用程序中收听很多意图并开始您想要的任何内容。

PS：- 动作名称在开发者网站上搜索不正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:42:48.820

Deepak，您可以通过广播接收器启动服务，方法是指定要在什么基础上激活广播接收器，您可以在清单中声明广播接收器，例如

```
<receiver android:name=".BroadCast"
              android:enabled="false"> 
            <intent-filter> 
                <action android:name=
                    "android.intent.action.PHONE_STATE" /> 
            </intent-filter> 
        </receiver> 
```

接到电话时应激活

你可以打电话给你的服务

```
public class BroadCast extends BroadcastReceiver{
    Context context = null;
    @Override
    public void onReceive(Context context, Intent intent) 
    {

            Intent dndService = new Intent(context,
                    ContactService.class);
            dndService.putExtra("phone_nr", number);
            context.startService(dndService);
        }
    } 
```

当电话响起时，您的广播接收器将被激活并启动一项服务，您可以从该服务启动一项活动，例如

```
public class ServiceExample extends IntentService {

    public ServiceExample () {
        super("ServiceExample ");
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        // TODO Auto-generated method stub

        Intent.intent = new Intent(this , Example.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent );

}
} 
```

并且您需要在活动之前添加此行，否则它会给您带来崩溃

```
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:33:36.680

不，这是不可能的。在您启动您的`Service`. 对不起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-20T16:10:37.550

我认为最好的想法是首先让您的服务在您的服务 onStartCommand 中“返回 START_STICKY”。

然后你可以添加一个启动监听器，如下所示；1\. 对您的清单，请求权限：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

2.  然后设置一个广播监听器来监听启动：

    ```
    public class MyBroadcastreceiver extends BroadcastReceiver {
      @Override
      public void onReceive(Context context, Intent intent) {
      Intent startServiceIntent = new Intent(context, MyService.class);
      context.startService(startServiceIntent);
    } 
    ```

您的服务将无限期运行，如果因内存丢失而停止，可以在资源可用时自动重新启动；

# php - android使用http POST（php）上传图像并将路径存储在mySql上，如何在将其保存在缓存中的同时将其显示在活动中？

> ID：11715364
> 
> 赞同：1
> 
> 时间：2012-07-30T04:21:54.457
> 
> 标签：php, android, image

我希望用户上传个人资料图片（通过相机/画廊），然后在应用程序上将其显示为用户的个人资料照片。（这是一个社交应用程序）。而且我希望它保存在缓存中，因为当用户使用应用程序时，应用程序不必下载它。

Q 1\. 如何上传图片到网络服务器？使用http post方法并将图像路径存储在sql上。Q 2\. 我如何在应用程序上使用的活动上显示图像。Q 3\. 如何将图片保存在缓存中？

如果你愿意，请给我建议或帮助我编码。

十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:43:32.647

@Loshi 这是我将音频上传到位于 Webhost.com 上的服务器的方式。更改您需要上传图片的内容，希望对您有所帮助。我在这里所做的是将我的文件保存到 sd 卡，然后单击 1 次上传到服务器。

```
public class Audiofileload extends Activity
{

private static final String LOG_TAG = "AudioRecordTest";
private static String mFileName = null;

private RecordButton mRecordButton = null;
private MediaRecorder mRecorder = null;

private PlayButton   mPlayButton = null;
private MediaPlayer   mPlayer = null;
private Upload   Upload = null;

private void onRecord(boolean start) {
    if (start) {
        startRecording();
    } else {
        stopRecording();
    }
}

private void onPlay(boolean start) {
    if (start) {
        startPlaying();
    } else {
        stopPlaying();
    }
}

private void startPlaying() {
    mPlayer = new MediaPlayer();
    try {
        mPlayer.setDataSource(mFileName);
        mPlayer.prepare();
        mPlayer.start();
    } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
    }
}

private void stopPlaying() {
    mPlayer.release();
    mPlayer = null;
}

private void startRecording() {
    mRecorder = new MediaRecorder();
    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    mRecorder.setOutputFile(mFileName);
    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

    try {
        mRecorder.prepare();
    } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
    }

    mRecorder.start();
}

private void stopRecording() {
    mRecorder.stop();
    mRecorder.release();
    mRecorder = null;
}

class Upload extends Button {
    boolean Upload = true;

    OnClickListener clicker = new OnClickListener() {
        public void onClick(View v) {
            HttpURLConnection conn = null;
            DataOutputStream dos = null;
            DataInputStream inStream = null;
            String existingFileName = Environment.getExternalStorageDirectory().getAbsolutePath() + "/testin.mp4";
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary =  "*****";
            int bytesRead, bytesAvailable, bufferSize;  
            byte[] buffer;
            int maxBufferSize = 1*1024*1024;
            String responseFromServer = "";
            String urlString = "http://sirisak.comule.com/11409.php"; 
            try
            {
              CLIENT REQUEST
            FileInputStream fileInputStream = new FileInputStream(new File(existingFileName) );
             // open a URL connection to the Servlet
             URL url = new URL(urlString);
             // Open a HTTP connection to the URL
             conn = (HttpURLConnection) url.openConnection();
             // Allow Inputs
             conn.setDoInput(true);
             // Allow Outputs
             conn.setDoOutput(true);
             // Don't use a cached copy.
             conn.setUseCaches(false);
             // Use a post method.
             conn.setRequestMethod("POST");
             conn.setRequestProperty("Connection", "Keep-Alive");
             conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
             dos = new DataOutputStream( conn.getOutputStream() );
             dos.writeBytes(twoHyphens + boundary + lineEnd);
             dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + existingFileName + "\"" + lineEnd);
             dos.writeBytes(lineEnd);
             // create a buffer of maximum size
             bytesAvailable = fileInputStream.available();
             bufferSize = Math.min(bytesAvailable, maxBufferSize);
             buffer = new byte[bufferSize];
             // read file and write it into form...
             bytesRead = fileInputStream.read(buffer, 0, bufferSize);
             while (bytesRead > 0)
             {
              dos.write(buffer, 0, bufferSize);
              bytesAvailable = fileInputStream.available();
              bufferSize = Math.min(bytesAvailable, maxBufferSize);
              bytesRead = fileInputStream.read(buffer, 0, bufferSize);
             }
             // send multipart form data necesssary after file data...
             dos.writeBytes(lineEnd);
             dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
             // close streams
             Log.e("Debug","File is written");
             fileInputStream.close();
             dos.flush();
             dos.close();
            }
            catch (MalformedURLException ex)
            {
                 Log.e("Debug", "error: " + ex.getMessage(), ex);
            }
            catch (IOException ioe)
            {
                 Log.e("Debug", "error: " + ioe.getMessage(), ioe);
            }
             read the SERVER RESPONSE
            try {
                  inStream = new DataInputStream ( conn.getInputStream() );
                  String str;

                  while (( str = inStream.readLine()) != null)
                  {
                       Log.e("Debug","Server Response "+str);
                  }
                  inStream.close();

            }
            catch (IOException ioex){
                 Log.e("Debug", "error: " + ioex.getMessage(), ioex);
            }
         }
    };

    public Upload(Context ctx) {
        super(ctx);
        setText("Upload");
        setOnClickListener(clicker);
    }
} 

class RecordButton extends Button {
    boolean mStartRecording = true;

    OnClickListener clicker = new OnClickListener() {
        public void onClick(View v) {
            onRecord(mStartRecording);
            if (mStartRecording) {
                setText("Stop recording");
            } else {
                setText("Start recording");
            }
            mStartRecording = !mStartRecording;
        }
    };

    public RecordButton(Context ctx) {
        super(ctx);
        setText("Start recording");
        setOnClickListener(clicker);
    }
}

class PlayButton extends Button {
    boolean mStartPlaying = true;

    OnClickListener clicker = new OnClickListener() {
        public void onClick(View v) {
            onPlay(mStartPlaying);
            if (mStartPlaying) {

                setText("Stop playing");
            } else {
                setText("Start playing");
            }
            mStartPlaying = !mStartPlaying;
        }
    };

    public PlayButton(Context ctx) {
        super(ctx);
        setText("Start playing");
        setOnClickListener(clicker);
    }
}

public Audiofileload() {
    mFileName = Environment.getExternalStorageDirectory().getAbsolutePath();
    mFileName += "/testin.mp4";
}

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    LinearLayout ll = new LinearLayout(this);

    mRecordButton = new RecordButton(this);
    ll.addView(mRecordButton,
        new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT,
            0));

    mPlayButton = new PlayButton(this);
    ll.addView(mPlayButton,
        new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT,
            0));

    Upload = new Upload(this);
    ll.addView(Upload,
        new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT,
            0));
    ll.setBackgroundResource(R.drawable.kasiriss);

    setContentView(ll);
}

@Override
public void onPause() {
    super.onPause();
    if (mRecorder != null) {
        mRecorder.release();
        mRecorder = null;
    }

    if (mPlayer != null) {
        mPlayer.release();
        mPlayer = null;
    }
}
} 
```

# java - 我们如何以循环方式使用多线程？

> ID：11715366
> 
> 赞同：-1
> 
> 时间：2012-07-30T04:22:08.513
> 
> 标签：java, multithreading, round-robin

我想以多线程的方式阅读10个邮件账户的未读邮件。

但如果线程池大小为 5，则将使用线程池中的 5 个线程。每个线程将读取一个邮件帐户。因此，一旦 Thread_1 读取了第一个邮箱，它就应该读取 mailbox_6。然后线程 2 将读取mailbox_7。

当所有邮件帐户都被读取一次后，循环将从第一个邮件帐户开始。

我们如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T04:31:44.370

这应该很容易。您创建一个具有 5 个线程的固定线程池，然后将 10 个作业提交到池中——每个用户电子邮件帐户 1 个：

```
// create a thread pool with 5 workers
ExecutorService threadPool = Executors.newFixedThreadPool(5);
// submit all 10 user email accounts to the pool to be processed in turn
for (UserEmail userEmail : userEmailsToProcess) {
    threadPool.submit(new EmailProcessor(userEmail));
}
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown();
...
// here's our runnable class which does the actual work
public class EmailProcessor implements Runnable {
    private UserEmail userEmail;
    public MyJobProcessor(UserEmail userEmail) {
        this.userEmail = userEmail;
    }
    public void run() {
        // read the user email
        ...
    }
} 
```

该类`UserEmail`可以保存要“阅读”的电子邮件的文件名，或者可能是帐户名或其他内容。这将由您决定如何表示邮件帐户和要阅读的邮件。

[[来自评论：]]

> 我有 10 个邮箱，比如..mailbox1...mailbox10，现在我有 5 个线程池中的线程，所以 thread1 将获取任何邮箱，所以假设它会选择 mailbox1，然后 thread2 会选择 mailbox2，thread3 会选择 mailbox3，thread4 会选择邮箱 4 和线程 5 将选择邮箱 5，现在当线程 1（已定义特定时间段）空闲时，应该选择邮箱 6 - 邮箱 10，任何尚未阅读的人不应从邮箱 1 - 邮箱 5 中选择任何邮箱，最多所有尚未阅读的邮箱。

我懂了。一种解决方案是让调度线程每隔一段时间就休眠和唤醒以查看邮箱是否有任何邮件。如果他们这样做，那么它会将作业提交给要读取该邮箱的线程池。一旦邮箱被读取，线程就会返回并要求处理下一个邮箱。调度线程将继续向线程池添加邮箱，直到被告知停止。

如果在 an 中有很多上下文，`EmailProcessor`那么您可以拥有线程池，但他们可以从 a`BlockingQueue<File>`或其他东西中消费，告诉他们哪些邮箱需要注意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:25:21.443

执行器可能不是这里的最佳解决方案，但为简单起见，我将使用 Gray 代码的变体。为了连续扫描您的 10 个邮箱，您可以执行以下操作，尽管您必须添加一些代码来处理干净终止：

```
// Create one semaphore per mailbox
Semaphore semaphores[] = new Semaphore[10]
for (int s = 0; s < semaphores.length; s ++) {
    semaphores[s] = new Semaphore(1);
}

 // create a thread pool with 5 workers
ExecutorService threadPool = Executors.newFixedThreadPool(5);
// submit all 10 user email accounts to the pool to be processed in turn
for (int i = 0; i < 5; i ++) {
    threadPool.submit(userEmailsToProcess, semaphores);
}
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown();
...

// here's our runnable class which does the actual work
public class EmailProcessor implements Runnable {
    private UserEmail userEmailToProcess[];
    private Semaphore semaphores[];
    public MyJobProcessor(UserEmail userEmailToProcess[], Semaphore semaphores[]) {
        this.userEmailsToProcess = userEmailToProcess;
        this.semaphores = semaphores;
    }
    public void run() {
        while (true) {   // you could use a semaphore here to test program termination instead
            for (int s = 0; s < semaphores.size; s ++) {
                if (semaphores[s].tryAcquire()) {
                    UserEmail email = userEmailToProcess[s];
                    // read the user email
                    …
                    semaphores[s].release();
                }
            }
        }
    }
} 
```

这是一个快速而肮脏的解决方案，虽然不是 100% 公平，但它适用于任意数量的线程和邮箱。在您有 10 封电子邮件和 5 个工作人员的特殊情况下，您可以让每个线程连续扫描邮箱的子集，即线程 1 检查邮箱 1 然后邮箱 2，线程 2 检查邮箱 3 然后邮箱 4，...没有争议

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:22:25.793

如何简单地创建任务的并发（或同步，在这种情况下并不重要）集合（可能是队列）。每个任务将从电子邮件帐户加载所需的数据。然后让每个线程从集合中获取一个任务，直到它为空。

每个线程都将引用此集合并对其执行循环。当集合不为空时，从中取出一个任务并处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T21:07:02.430

跟踪阅读的电子邮件帐户。例如定义这样的东西，

```
//total number of email accounts that need to be read.
private int noOfEmails=10;

//the thread pool that is used to read the emails
private ExecutorService threadPool = Executors.newFixedThreadPool(5);

//the tracker array that keeps track of the emails that 
//are already read. This array is cleared only after all 10
//emails are read. 
private ArrayList<String> emailTracker=new ArrayList<String>(noOfEmails);

//any changes to emailTracker should be synchronized as 
//this is a common data shared between all 5 threads.
private Object syncObject=new Object(); 
```

在 Runnable 实现中，检查 emailTracker 是否包含您的电子邮件帐户标识符，如果是，则表明它已被读取，因此返回并等待 emailTracker 被清除。当所有 10 个电子邮件帐户都被读取时，它将被清除。

```
 if(emailTracker.contains(email.identifier))
        {
            return;
        }

        //read email.
        email.read();
        //simple synchronization.
        synchronized (syncObject)
        {
            //read email
            emailTracker.add(email.identifier);
            //if all emails are read, clear the tracker
            //This will allow reading of all the emails 
            //once again.
            if(emailTracker.size()==noOfEmails)
            {
                emailTracker.clear();
            }

        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-02T05:09:09.347

Sanju I believe you want to execute them in the following round-robin fashion:

Thread1: 1,6 and so on Thread2: 2,7 Thread3: 3,8 Thread4: 4,9 Thread5: 5,10

First of all this is not what threads are meant for if you want to execute them in a sequence like that. Second I dont think it is possible with thread pool. If you still want them then here is my solution for executing threads in round-robin fashion which you may alter based on your need: public class EmailRoundRobin { public Object[] locks;

```
 private static class EmailProcessor implements Runnable {
        private final Object currentLock;
        private final Object nextLock;
        private UserEmail userEmail;
        public EmailProcessor (UserEmail userEmail,, Object currentLock, Object nextLock) {
           this.userEmail = userEmail;
       this.currentLock = currentLock;
           this.nextLock = nextLock;
        }
        @Override
        public void run() {
           try {
                work = //reading email
                while ( work != null) {
                    try {
                        currentLock.wait();
                        // Do your work here.
                    }
                    catch(InterruptedException e) {}
                    synchronized(nextLock) {
                        nextLock.notify();
                    }
                }//while ends
            } catch (IOException e) {
                e.printStackTrace();
        }
        synchronized(nextLock) {
            nextLock.notify(); /// Ensures all threads exit at the end
        }
    }

public EmailRoundRobin(int numberOfAccountsToRead) {
    locks = new Object[numberOfAccountsToRead];

    //Initialize lock instances in array.
    for(i = 0; i < numberOfAccountsToRead; ++i) locks[i] = new Object();
    //Create threads
    int j;
    for(j=0; j<(numberOfAccountsToRead-1); j++ ){
        Thread linePrinterThread = new Thread(new EmailProcessor(emailInfo + "Temp" + j,locks[j],locks[j+1]));
        linePrinterThread.start();
    }
    Thread lastLinePrinterThread = new Thread(new EmailProcessor(emailInfo + "Temp" + j,locks[numberOfFilesToRead-1],locks[0]));
    lastLinePrinterThread.start();
}

public void startProcessing() {
    synchronized (locks[0]) {
        locks[0].notify();
    }
}

public static void main(String[] args) {
    EmailRoundRobin emailRoundRobin = new EmailRoundRobin(4);
    emailRoundRobin.startPrinting();
} 
```

}

I have taken this from my answer to [this question] ([Running threads in round robin fashion in java](https://stackoverflow.com/questions/18314852/running-threads-in-round-robin-fashion-in-java/29934870#29934870))! which had similar requirement. There is an option using Phaser also mentioned in that answer as well.

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-07T11:53:35.193

我自己得到了答案，它非常简单，我使用了 ExecutorService 并且它只由它管理。

# java - Java DOM 解析器：XMI - 内联标记？

> ID：11715367
> 
> 赞同：0
> 
> 时间：2012-07-30T04:22:21.443
> 
> 标签：java, dom, xmi

我目前正在尝试为一些 XMI 文件（从 UML 图生成）编写一个简单的解析器，但是当我尝试从此代码片段中提取目标 xmi.idref 时遇到了一些问题（我想检索给定的连接元素活动，我已成功检索到所有传入/传出边缘）：

```
<UML2:ActivityEdge xmi.id = 'I6bf577d1m1387a6c0ea1mm7dcb' visibility = 'public' is Specification = 'false'>
    <UML2:ActivityEdge.target>
        <UML2:CallAction xmi.idref = 'I6bf577d1m1387a6c0ea1mm7dda'/>
    </UML2:ActivityEdge.target> 
```

我的问题是，当我尝试提取 UML2:CallAction 时，我的程序不会将其检测为元素节点，而是将其检测为文本节点，顺便说一句，它是空的。这是我所做的一个示例：

```
Element edge = searchById(doc,"UML2:ActivityEdge",id);
        Element group = (Element) edge.getElementsByTagName("UML2:ActivityEdge.target").item(0);
        Node target = group.getChildNodes().item(0);
        Element targetRef = (Element) target;
        Element t = searchById(doc,targetRef.getNodeName(),targetRef.getAttribute("xmi.idref"));
        nameList.add(t.getAttribute("name")); 
```

searchById 方法正在工作（我在代码的各个部分使用它）但如果您认为这可能是问题，我会发布它。请注意，我使用 getChildNodes 而不是 getElementsByTagName，因为此边缘的目标可能并不总是一个活动（例如 XOR 连接/合并节点）。确切的错误是：

```
com.sun.org.apache.xerces.internal.dom.DeferredTextImpl cannot be cast to org.w3c.dom.Element 
```

当我尝试将“目标”投射到元素时......我想这是因为它是一个“内联”标签，但我不知道如何对待它，作为解析的初学者......

谢谢你的帮助，

赫维

编辑：我尝试用 getElementsByTagName 替换 getChildNodes 并且它似乎可以工作......但是，如果有人可以更正上面的代码或至少解释为什么它不能正常工作，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:30:24.927

简而言之，您做出了`getChildNodes()`仅返回 XML`Element`的错误假设；它没有，它还返回其他类型的节点，包括表示您感兴趣的元素之间的空格和换行符的文本节点。

如果要调用`getChildNodes()`并处理所有节点，则需要遍历所有返回的节点，并查看每个节点以确定它是什么类型的节点，并进行相应的处理。如果您不想这样做，那么可以选择类似`getElementsByTagName()`的方法。

# c# - Highchart 值及其单位

> ID：11715368
> 
> 赞同：0
> 
> 时间：2012-07-30T04:22:23.367
> 
> 标签：c#, asp.net-mvc, highcharts

我正在使用 highcharts.dll 绘制柱形图。我还想显示图表值及其单位。（例如“Deisel 521452.30 升”或“电力 5124.60 单位”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:22:36.853

您将需要使用格式化程序。

```
Formatter = "function() { return 'Electricity <b>'+ this.point.value +'</b> units'; }" 
```

例子 ：-

```
Highcharts chart = new Highcharts("ColumnChart")
            .InitChart(new Chart { DefaultSeriesType = ChartTypes.Column })
            .SetTitle(new Title { Text = "Monthly Average Rainfall" })
            .SetSubtitle(new Subtitle { Text = "Source: WorldClimate.com" })
            .SetXAxis(new XAxis { Categories = new[] { "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" } })
            .SetYAxis(new YAxis
                      {
                          Min = 0,
                          Title = new YAxisTitle { Text = "Rainfall (mm)" }
                      })
            .SetLegend(new Legend
                       {
                           Layout = Layouts.Vertical,
                           Align = HorizontalAligns.Left,
                           VerticalAlign = VerticalAligns.Top,
                           X = 100,
                           Y = 70,
                           Floating = true,
                           BackgroundColor = ColorTranslator.FromHtml("#FFFFFF"),
                           Shadow = true
                       })
            .SetTooltip(new Tooltip { Formatter = @"function() { return ''+ this.x +': '+ this.y +' mm'; }" })
            .SetPlotOptions(new PlotOptions
                            {
                                Column = new PlotOptionsColumn
                                         {
                                             PointPadding = 0.2,
                                             BorderWidth = 0
                                         }
                            })
            .SetSeries(new[]
                       {
                           new Series { Name = "Tokyo", Data = new Data(new object[] { 49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4 }) },
                           new Series { Name = "London", Data = new Data(new object[] { 48.9, 38.8, 39.3, 41.4, 47.0, 48.3, 59.0, 59.6, 52.4, 65.2, 59.3, 51.2 }) },
                           new Series { Name = "New York", Data = new Data(new object[] { 83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3 }) },
                           new Series { Name = "Berlin", Data = new Data(new object[] { 42.4, 33.2, 34.5, 39.7, 52.6, 75.5, 57.4, 60.4, 47.6, 39.1, 46.8, 51.1 }) }
                       });

        return View(chart); 
```

# android - Android中的是/否警报对话框

> ID：11715371
> 
> 赞同：4
> 
> 时间：2012-07-30T04:23:24.230
> 
> 标签：android

我想在 onBackPressed() 事件的 android 中显示一个警报对话框

```
DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {

    //@Override
    public void onClick(DialogInterface dialog, int which) {
        switch (which){
        case DialogInterface.BUTTON_POSITIVE:
            //Yes button clicked
            break;

        case DialogInterface.BUTTON_NEGATIVE:
            //No button clicked
            break;
        }
    }
}; 
```

**但是在 onBackPressed() 事件中执行它时出现错误**

```
@Override
public void onBackPressed() {
    super.onBackPressed();  
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener)
        .setNegativeButton("No", dialogClickListener).show();

} 
```

错误：“ *com.java.mypkg 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@406c3798* ”

我是否错过了什么。请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T04:38:42.800

是的，不要按照以前用户的响应调用它。`super.onBackPressed();`Activity 的will`onStop`方法。而不是`onBackPressed();`你可以使用`onKeyDown`你的要求。如果您需要`AlertDialog`在按下后退按钮时打开一个，您可以简单地尝试使用[KeyEvent](http://developer.android.com/reference/android/view/KeyEvent.html)

例如 -

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub

    switch(keyCode)
    {
    case KeyEvent.KEYCODE_BACK:
        AlertDialog.Builder ab = new AlertDialog.Builder(AlertDialogExampleActivity.this);
        ab.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener)
        .setNegativeButton("No", dialogClickListener).show();
        break;
    }

    return super.onKeyDown(keyCode, event);
}

DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        switch (which){
        case DialogInterface.BUTTON_POSITIVE:
            //Yes button clicked
            break;

        case DialogInterface.BUTTON_NEGATIVE:
            //No button clicked
            break;
        }
    }
}; 
```

当您覆盖`onKeyDown`方法时，它将使用您的[KEYCODE_BACK检测返回键](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_BACK)

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T04:28:27.087

不要调用`super.onBackPressed();` ，因为它会调用活动的 onStop 方法。

并且在已完成的活动上显示对话框，将泄漏窗口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T04:51:41.227

1.  继续为这一行提供适当的上下文::

    ```
    AlertDialog.Builder builder = new AlertDialog.Builder(ActivityName.this); 
    ```

2.  像这样适当地关闭警报对话框。

    ```
    new AlertDialog.Builder(ActivityName.this)  
    .setMessage("You have to Login first to apply.\nWant to login ?")  
    .setCancelable(false)  
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {  
        public void onClick(DialogInterface dialog, int which)   
        {  
              // Perform Your Task Here--When Yes Is Pressed.  
              dialog.cancel();  
        }  
    })    
    .setNegativeButton("No", new DialogInterface.OnClickListener() {  
          public void onClick(DialogInterface dialog, int which)   
          {  
         // Perform Your Task Here--When No is pressed    
             dialog.cancel();  
          }  
    }).show(); 
    ```

**Window 泄露**的这个错误是在 ::

*   在具有不同上下文的活动中打开一个具有不同上下文的新窗口。

*   退出 Activity 时未正确关闭窗口或对话框。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T18:28:13.537

我的警报对话框方法：

```
public void message_dialog_yes_no (Activity activity, String msg, DialogInterface.OnClickListener yesListener) {
    AlertDialog.Builder builder = new AlertDialog.Builder(activity);

    builder.setMessage(msg)
           .setCancelable(false)
           .setPositiveButton("Yes", yesListener) 
           .setNegativeButton("No",  new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();
              }})              
           .show();
} 
```

声明此方法后，我可以这样调用它：

```
DialogInterface.OnClickListener yesListener;

        yesListener = new DialogInterface.OnClickListener() {               
            public void onClick(DialogInterface dialog, int which) {
//codes
        }
        };

message_dialog_yes_no(this, "Confirm delete?" , yesListener); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T04:33:02.200

仅`super.onBackPressed()`当您想要执行默认操作（即实际返回）而不是想要留在活动中时才应该调用。

有关如何正确覆盖的示例，请参阅[此链接](https://stackoverflow.com/a/6413736/477878)`onBackPressed()`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T04:33:34.030

我们通常会在退出 Activity 时重写`onBackPressed()` 来执行一些条件。这意味着我们实际上是通过正常执行的 Back Press 事件，这不过是`super.onBackPressed`. 因此，将其包含在被覆盖的方法中意味着它还将遵循按下后退键时将执行的默认执行，并且我们自己的方法也将被执行。

但是在您的情况下，由于您在调用超类后尝试显示 AlertDialog ，因此您的 Activity 上下文不再可用，这意味着您的 Alert Dialog 没有窗口可以显示自身，因此出现泄漏窗口错误。

在这种情况下，您已经删除了超类调用。简单的。

# c++ - 将双精度转换为具有有效数字的字符串的最佳方法（考虑机器 epsilon）

> ID：11715374
> 
> 赞同：2
> 
> 时间：2012-07-30T04:24:06.843
> 
> 标签：c++, boost

我正在尝试在 C++ 中将双精度数转换为字符串。考虑到机器 epsilon，我想使用一定数量的有效数字对其进行格式化。

作为 2 个最小有效小数的示例：

4 -> “4.00”

4.4 -> “4.40”

4.56434444 -> “4.56434444”

理想情况下，我希望为流注入语言环境和 numpunct 方面

我目前正在使用类似的东西

```
if(abs(floor((m_mes * 100) + 0.5) - (m_mes * 100)) > (std::numeric_limits<double>::epsilon() * 10000))
    buffer << fixed << m_mes;
else
    buffer << fixed << setprecision(2) << m_mes; 
```

**编辑：** 绝对值和舍入是补偿 epsilon 的结果。这里的基本思想是得到 floor(num * 100)，从 (num * 100) 中减去它。如果差异不为零，则我使用高于 2 的精度。

因为我的最小有效数字是 2 我不想放慢算法来接受可变数量。

有没有办法用 numpunct 方面做到这一点？我是语言环境的新手，对它们几乎没有经验。或者只是一种更简单的方法来完成我所拥有的？

# php - 删除临时文件 php

> ID：11715375
> 
> 赞同：0
> 
> 时间：2012-07-30T04:24:21.750
> 
> 标签：php, codeigniter

我有一个添加新用户的页面。

用户有文件附件选项。

我创建了一个临时表和目录来上传文件和跟踪用户数据。

问题是尚未添加用户，因此我无法将这些文件保存在联系人下。

我正在做的是保存文件并使用临时表进行跟踪，一旦添加了用户，就在该用户下移动这些文件。

假设用户上传了文件并关闭了页面而不添加用户。

那么如何删除临时文件和表值？

我可以使用浏览器关闭事件吗？或者无论如何在php中这样做[因为我是php新手]？

我正在使用**Codeignitor** - 如果我得到与 CI 相关的答案，那将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T04:26:48.027

浏览器关闭事件非常不可靠。将用户添加到临时表时，还要添加时间戳。运行每晚的 cron 作业，从数据库中删除所有旧值和文件系统中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:47:26.710

xbonez 的 cron 工作想法可以正常工作 - 但只是另一个建议 -

正如您所提到的，您在临时表中为每个上传的文件添加一行，因此当发生这种情况时，删除/更新带有行 ID 的 cookie。因此，如果用户回来完成注册，您可以检查此 cookie 是否存在 - 如果存在，您可以显示已上传的文件（带有删除选项）。您可以尝试 $this->encrypt->encode() 和加密类提供的解码函数来编码和解码 cookie 值和/或进行一些其他检查以确保 cookie 数据的完整性。[http://codeigniter.com/user_guide/libraries/encryption.html](http://codeigniter.com/user_guide/libraries/encryption.html)删除早于一周的文件。

# git - 在推送当前分支期间签出新的 git 分支是否安全？

> ID：11715379
> 
> 赞同：5
> 
> 时间：2012-07-30T04:24:35.250
> 
> 标签：git, github, push, git-checkout

例如，如果我正在推`master`送到远程仓库并且需要一段时间，那么打开另一个终端是否安全，`git checkout secondbranch`这样我就可以重新开始工作了？执行推送的原始流程是否会被新的结帐中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:16:59.417

是的，它是安全的。

Push 是独立于工作目录和签出分支的概念。您实际上可以从您的仓库（或任何裸仓库）的 .git 目录中推送和获取。这表明，在高层次上，应用程序的两个方面是完全隔离的。

话虽如此，请始终备份您的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T06:27:43.053

它应该是安全的，因为 push 是从您的本地 repo 读取并写入远程，而 checkout 是从您的本地 repo 读取并写入您的工作区。

去哪里的漂亮可视化： [http](http://www.ndpsoftware.com/git-cheatsheet.html#loc=local_repo) ://www.ndpsoftware.com/git-cheatsheet.html#loc=local_repo ；

# tomcat - 如何禁用弹簧安全日志记录

> ID：11715381
> 
> 赞同：0
> 
> 时间：2012-07-30T04:24:56.033
> 
> 标签：tomcat, logging, spring-security

我将 Tomcat 用于 servlet 容器，我必须每天检查 catalina.out 日志以进行调试。但是当匿名用户尝试登录时，Spring Security 拦截器会抛出异常，它会淹没 catalina.out 日志文件。日志是这样的：

```
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: An Authentication object was not found in the SecurityContext
at org.springframework.security.access.intercept.AbstractSecurityInterceptor.credentialsNotFound(AbstractSecurityInterceptor.java:327)
at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:197)
at org.springframework.flex.security3.EndpointInterceptor.preProcess(EndpointInterceptor.java:97)
at org.springframework.flex.core.MessageInterceptionAdvice.invoke(MessageInterceptionAdvice.java:62)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.adapter.ThrowsAdviceInterceptor.invoke(ThrowsAdviceInterceptor.java:124)
... 52 more 
```

如何在 Tomcat 中禁用 Spring Security 日志记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:16:39.920

当日志级别设置为 DEBUG 并且您的过滤器链中没有 AnonymousAuthenticationFilter 时，您将在日志中看到 AuthenticationCredentialsNotFoundException。

请参阅[常见问题解答](http://static.springsource.org/spring-security/site/faq.html#auth-exception-credentials-not-found)。

所以我假设您在安全应用程序上下文中使用传统的 bean 配置，而不是命名空间配置。如果您想摆脱异常，您可以按照[文档中的说明将anonymousAuthenticationFilter 添加到您的应用程序上下文中](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/anonymous.html#anonymous-config)

或者，您可以将日志级别设置为

```
org.springframework.security.level=INFO 
```

在这个[问题](https://stackoverflow.com/questions/11264133/tomcat-trace-all-even-catched-exceptions)中提到的tomcat中。

# php - 如何使用连接从三个表中选择数据

> ID：11715383
> 
> 赞同：0
> 
> 时间：2012-07-30T04:25:50.347
> 
> 标签：php, mysql

我想从以下三个表中选择`survey_id`、`question_id`和。`question_text``answer_id`

在 SurveyTable 我有：

```
Survey{survey_id,survey_title} 
```

在 QuestionTable 我有：

```
Question{survey_id,question_id,question_text} 
```

在答案表中：

```
Answer{question_id,answer_id,answer_text} 
```

我想使用连接从这些表中进行选择。When`survey_id`等于 QuestionTable 和 SurveyTable 中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T04:28:37.697

好吧，你可以从类似的东西开始

```
SELECT  s.survey_id ,  
        q.question_id, 
        q.question_text, 
        a.answer_id,
        a.answer_text
FROM    Survey s INNER JOIN
        Question q  ON  s.survey_id = q.survey_id INNER JOIN
        Answer a    ON  q.question_id = a.question_id 
```

s将`INNER JOIN`确保您只进行有问题和答案的调查。

如果您希望返回所有调查，无论他们是否有问题或答案，甚至所有有问题的调查，无论答案如何，您都可以使用`LEFT JOINS`

```
SELECT  s.survey_id ,  
        q.question_id, 
        q.question_text, 
        a.answer_id,
        a.answer_text
FROM    Survey s LEFT JOIN
        Question q  ON  s.survey_id = q.survey_id LEFT JOIN
        Answer a    ON  q.question_id = a.question_id 
```

您必须尝试并记住 LEFT JOUN 状态

返回左侧表中的所有数据，仅返回右侧与左侧表匹配的数据。

看看这篇文章，它做了一个很好的图形解释。

[SQL SERVER – JOIN 简介 – JOIN 基础](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:27:51.100

```
select  
    survey.survey_id , 
    question.question_id,
    question.question_text,
    answer.answer_id
from survey 
left join question on question.survey_id = survey.survey_id 
left join answer on answer.question_id = question.question_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:31:31.920

我正在考虑一个问题可以有多个答案，所以我给出了答案，所以你得到答案表的所有行

```
 $select = "SELECT a.answer_id,a.answer_text,q.question_id, q.question_text,s.survey_id,s.survey_title FROM Answer a "
        . "LEFT JOIN Question q ON (a.question_id = q.question_id) "
        . "LEFT JOIN Survey s ON (q.survey_id = s.survey_id)"; 
```

# android - 如何处理 android 从较低版本（2.2）到 ICS（3.2）及更高版本的配置更改

> ID：11715384
> 
> 赞同：0
> 
> 时间：2012-07-30T04:25:52.407
> 
> 标签：android, orientation

我希望我的应用程序以最低 api 级别 8 运行...我尝试使用 android:configChanges="orientation|keyboardHidden"..在较低版本中，onConfigurationchanged() 方法被调用并处理方向..但是当我运行时3.2 及更高版本的 onConfigurationchanged() 不会被调用并重新创建活动。所以我添加了 android:configChanges="orientation|keyboardHidden|ScreenSize" 但是当我编译这个时我的应用程序不能在 3.2 ICS 以下的版本中运行..我应该怎么做才能处理从 2.2 到 4.0.1 的所有版本的配置更改而不重新- 创建活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:29:21.797

你`targetSdkVersion`在清单中设置了吗？例如，

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" /> 
```

只要您的代码`targetSdkVersion`大于或等于`13`. 确保您也在针对 SDK 版本`3.2`或更高版本构建项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:05:34.920

您还应该将参数“screenSize”添加到 android:configChanges="orientation|screenSize|keyboardHidden"

**文档：** *注意：从 Android 3.2（API 级别 13）开始，当设备在纵向和横向之间切换时，“屏幕尺寸”也会发生变化。因此，如果您想在为 API 级别 13 或更高级别（由 minSdkVersion 和 targetSdkVersion 属性声明）进行开发时防止由于方向更改而导致运行时重新启动，则除了“orientation”值之外，还必须包含“screenSize”值。也就是说，您必须声明 android:configChanges="orientation|screenSize"。但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。*

# visual-studio-2010 - InstallShield .NET 4 先决条件失败

> ID：11715386
> 
> 赞同：2
> 
> 时间：2012-07-30T04:26:13.187
> 
> 标签：visual-studio-2010, .net-4.0, installshield

我通过 Visual Studio 2010 创建了一个 InstallShield 安装程序，它具有 .NET 4 框架作为先决条件。

在安装过程中，一些用户收到错误消息，通知他们在下载 .net 安装程序时发生错误。

我使用 debuglog 命令行参数运行安装程序并得到以下信息：

```
7-24-2012[12:16:07 PM]: PrereqEngine: file,251743DFD3FDA414570524BAC9E55381,<ISProductFolder>\SetupPrerequisites\Microsoft .net\4.0\Full\dotNetFx40_Full_x86_x64.exe,http://download.microsoft.com/downlo...ll_x86_x64.exe,,, -- Successful,
7-24-2012[12:16:07 PM]: PrereqEngine: execute,dotNetFx40_Full_x86_x64.exe,/q /norestart,/q /norestart,1641,3010,, -- Successful
7-24-2012[12:16:07 PM]: PrereqEngine: dependency,<ISProductFolder>\SetupPrerequisites\Windows Installer 3.1 (x86).prq, -- Successful
7-24-2012[12:16:07 PM]: PrereqEngine: dependency,<ISProductFolder>\SetupPrerequisites\Windows Imaging Component (x86).prq, -- Successful
7-24-2012[12:16:07 PM]: PrereqEngine: dependency,<ISProductFolder>\SetupPrerequisites\Windows Installer 3.1 for Windows Server 2003 SP1 (x86).prq, -- Successful
7-24-2012[12:16:07 PM]: PrereqEngine: dependency,<ISProductFolder>\SetupPrerequisites\Windows Imaging Component (x64).prq, -- Successful
7-24-2012[12:16:07 PM]: PrereqEngine: dependency,<ISProductFolder>\SetupPrerequisites\Windows Installer 3.1 for Windows Server 2003 SP1 (IA64).prq, -- Successful
7-24-2012[12:16:07 PM]: PrereqEngine: dependency,<ISProductFolder>\SetupPrerequisites\Windows Installer 3.1 for Windows Server 2003 SP1 (x64).prq, -- Successful
7-24-2012[12:16:07 PM]: PrereqEngine: dependency,<ISProductFolder>\SetupPrerequisites\Windows Installer 3.1 for Windows XP (x64).prq, -- Successful
7-24-2012[12:16:07 PM]: PrereqEngine: Id,{32D7E3D1-C9DF-4FA6-9F9B-4D5117AB2917},http://saturn.installshield.com/is/p...ites/microsoft .net framework 4.0 full.prq, -- Successful
7-24-2012[12:16:07 PM]: PrereqEngine: behavior,Optional,,Reboot,2,Failure,
7-24-2012[12:16:07 PM]: PrereqEngine: Lua,
7-24-2012[12:16:07 PM]: PrereqEngine: Hidden,
7-24-2012[12:16:07 PM]: PrereqEngine: MsiProgress,
7-24-2012[12:16:26 PM]: DownloadFiles: An error occurred while downloading the file http://download.microsoft.com/downlo...ll_x86_x64.exe. What would you like to do?
7-24-2012[12:16:30 PM]: Prerequisites returning 2 
```

如果我在同一台计算机上打开 Internet Explorer 并从该日志文件将 URL 粘贴到 .net 安装程序，它会毫无问题地下载。

关于可能的原因或进一步调查的步骤的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:44:53.893

你能在另一台机器上重现吗？在另一个网络上？您可以在自己的服务器上托管文件并更新 PRQ 中的 URL 吗？

您可能需要为此提出支持请求。这是我对“网络”下载器的关注。您以一种方式优化用户体验，但存在注入外部故障点的风险。

# hibernate - 初始化期间休眠“无法打开连接”错误？

> ID：11715387
> 
> 赞同：0
> 
> 时间：2012-07-30T04:26:15.557
> 
> 标签：hibernate, jsp, log4j

**控制台留言：**

```
log4j:WARN No appenders could be found for logger (org.jboss.logging).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
org.hibernate.exception.GenericJDBCException: Could not open connection 
```

**配置文件**

```
 <!-- Database connection settings -->
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost/support</property> 
    <property name="connection.username">prince</property>
    <property name="connection.password">prince</property>
    <property name="show_sql">false</property>
    <property name="format_sql">false</property>

    <!-- JDBC connection pool (use the built-in)  -->
    <property name="connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>

    <!-- Disable the second-level cache -->
    <!--<property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>-->
    <property name="hibernate.hbm2ddl.auto">create</property>
    <property name="connection.autocommit">false</property>

    <!-- Mapping files -->
    <mapping class="com.swiftant.model.Ticket"/>
    <mapping class="com.swiftant.model.TicketPriority"/>
    <mapping class="com.swiftant.model.TicketStatus"/>
    <mapping class="com.swiftant.model.Role"/>
    <mapping class="com.swiftant.model.BusinessUnit"/>
    <mapping class="com.swiftant.model.Member"/>

   </session-factory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:57:09.140

**固定的：**

*只需在项目的类路径中添加 log4j.properties 及其固定*

# ios - 将通讯录导出到 vcard 文件

> ID：11715393
> 
> 赞同：0
> 
> 时间：2012-07-30T04:27:44.950
> 
> 标签：ios, ios5, vcf-vcard

我想使用 base64decode 将地址簿从 iPhoneSDK 导出到 vcard 文件。我不知道 iPhoneSDK 如何保存文件以及如何将联系人导出到 Vcard 文件？导入对我来说很容易。有人可以帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T04:32:22.937

如果您使用的是 iOS 5 或更高版本，ABPerson 中有一个函数可以返回给定人员记录的 vCard 表示：

```
 CFDataRef ABPersonCreateVCardRepresentationWithPeople(CFArrayRef people); 
```

**更新：**如果您需要生成使用 base64 的 vCard 的示例代码，请单击[此处](http://dl.dropbox.com/u/1645335/stock/iphone/vCard/altosh.zip)

# jquery - 定位没有 ID 或 CLASS 的 DIV

> ID：11715398
> 
> 赞同：-1
> 
> 时间：2012-07-30T04:27:57.907
> 
> 标签：jquery, css

使用 jQuery，是否可以在没有选择器的情况下定位以下内容：

```
<div style="background-color:#9AAEDB; padding:4px"></div> 
```

如果是这样，如何，因为我基本上需要为特定场景隐藏这个 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:40:51.803

尝试

```
$("div[style='background-color:#9AAEDB; padding:4px']") 
```

选择所需的 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:41:12.130

您可以从父元素定位该 div 并标记哪个子元素是父元素的 div，或者使用某些选择器。该选择器可能是 id、class 甚至是 title、rel... 或者，您可以根据他的孩子来定位特定的 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:34:04.790

我强烈建议您使用 id 来选择 div。您可以使用 div 来定位

```
$('div') 
```

但是，它将针对您页面中包含的所有 div。因此，如果您想定位单个 div，最好使用 ID 或类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T04:34:30.613

$('div') 将选择所有 div，我相信 $('div.div') 会选择另一个 div 的子项 - 这对于不同的场景可以作为动态的，只需根据您的需要进行编辑。

在 HTML 标记中使用“id”和“class”属性会提高效率，但我刚才谈到的方法有时会派上用场。

# sql-server-2008 - 如何使用函数编写存储过程？

> ID：11715405
> 
> 赞同：1
> 
> 时间：2012-07-30T04:28:49.397
> 
> 标签：sql-server-2008, function, stored-procedures

大家好，我是新手，所以在这里遇到了一些麻烦

我有两张这样的桌子

**错误**

```
BugID|Title|ProjectName|CreatedBy 
```

**错误历史**

```
BughistoryID|BugID|Assignedto|ToStatus|FromStatus 
```

我想为要插入到表中的表编写一个插入存储过程，并具有`Bugs`标识和主键。`[Title]|[ProjectName]``[CreatedBy]``bugs``BugID`

之后，我必须将`BugID`新标题的`Tostatus`插入到`BugHistory`表格中。这两个步骤应该在一个存储过程中完成。

我想要一个选择语句，我必须在 gridview 中显示 bugs 表，其中包含表中`[AssignedTo]`的`[Tostatus]`列`BugHistory`。请问我如何为这两个过程使用函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:01:25.433

尝试在您的 Bugs 中创建一个触发器以在您的 BugsHistory AFTER INSERT 之后插入数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:07:29.863

尝试这样的事情：

```
-- create stored procedure to insert a new bug, with parameters
CREATE PROCEDURE dbo.InsertBug 
    @Title VARCHAR(100),
    @ProjectName VARCHAR(100),
    @CreatedBy VARCHAR(100)
AS BEGIN

  -- variable to hold newly inserted "BugID"    
  DECLARE @NewBugID INT

  -- do the insert into the "Bugs" table      
  INSERT INTO dbo.Bugs(Title, ProjectName, CreatedBy)
  VALUES(@Title, @ProjectName, @CreatedBy)

  -- get the new BugID that's been assigned during INSERT      
  SELECT @NewBugID = SCOPE_IDENTITY()

  -- insert into the BugHistory table - since you didn't specify anything,
  -- I assumed the bug gets assigned to whoever created it by default,
  -- and I assumed "ToStatus" is a string column so I assigned "New" to it
  -- ADAPT as needed !
  INSERT INTO dbo.BUgHistory(BugID, AssignedTo, ToStatus)
  VALUES(@NewBugID, @CreatedBy, 'New')
END 
```

# r - 在 R 中加载/读取数据占用太多内存

> ID：11715408
> 
> 赞同：6
> 
> 时间：2012-07-30T04:29:26.307
> 
> 标签：r

我正在使用 R 进行一些数据分析。系统规格：i5 + 4GB RAM。出于某种原因，我的 R 会话占用了比我的数据大得多的 RAM，这使我几乎没有空间进行其他操作。

我读了一个**550MB 的 csv**文件，R 占用的内存**：1.3 - 1.5GB** 我将 csv 保存为 .RData 文件。**文件大小：183MB**。在 R 中加载文件，R 占用的内存**： 780MB**。知道为什么会发生这种情况以及如何解决吗？

编辑：该文件有 123 列和 1190387 行。变量的类型为`num`和`int`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T01:44:12.440

一个数值（双精度浮点）存储在 8 个字节的 ram 中。
一个整数值（在这种情况下）使用 4 个字节。
您的数据有 1,190,387 * 123 = 146,417,601 个值。
如果所有列都是数字，则使用 1,171,340,808 字节的 ram (~1.09GB)。
如果都是整数，则需要 585,670,404 字节（~558MB）。

因此，您的数据使用 780MB 内存是完全合理的。

**非常一般的建议：**

1.  将您的 data.frame 转换为矩阵。矩阵运算通常具有较少的开销。
2.  尝试 R 包 bigmemory：[http ://cran.r-project.org/web/packages/bigmemory/index.html](http://cran.r-project.org/web/packages/bigmemory/index.html)
3.  买更多的内存。您的机器可能最多支持 16GB。
4.  不要同时将所有数据加载到内存中。加载行或列的子集，分析，保存结果，重复。
5.  使用非常小的测试数据集来设计您的分析，然后在另一台具有更多内存的机器/服务器上分析完整数据集。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T04:52:47.380

R 使用更多内存可能是因为一些对象的复制。尽管这些临时副本被删除，但 R 仍然占用空间。要将此内存返回给操作系统，您可以调用该`gc`函数。但是，当需要内存时，`gc`会自动调用。

此外，在 R 中，550 mb 的 csv 文件映射到 550 mb 并不明显。这取决于列的数据类型（float、int、character），它们都使用不同的内存量。

Rdata 文件较小这一事实并不奇怪，因为 R 会压缩数据，请参阅`save`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-17T12:05:42.703

我假设您使用的是基于**read.table()的****read.csv(** ) 。

 **这些函数的问题在于它们严重地分割了内存。并且由于 R 垃圾收集器无法移动分配的空间以从碎片部分释放内存（R 垃圾收集器的一个缺点），因此您只能选择您选择的解决方案：

*   通过 read.table 读取数据。
*   通过**save()**保存它。
*   杀死R。
*   通过**load()**加载数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-05T05:07:32.173

（与之前的评论重叠一些）

您可以使用 readr 包中的 read_csv 或 read_table，这有助于更快地加载数据。

使用 gc() 和 mem_change() 检查内存的变化，并确定哪一步导致了内存的增加。

您当然可以构建连接并按块读取数据。

或者创建一个数据库然后使用RPostgreSQL；RSQLite；RMySQL。检查 dbConnect、dbWriteTable、dbGetQuery。

没有生殖的例子很难说更多。**

# functional-programming - 具有按合同设计功能的功能语言

> ID：11715410
> 
> 赞同：3
> 
> 时间：2012-07-30T04:29:27.527
> 
> 标签：functional-programming, jvm, clr, design-by-contract

我正在寻找一种具有良好设计的功能性语言（最好是一流的，但我也可以这样做）。到目前为止我能找到的最好的是 Racket [http://racket-lang.org/](http://racket-lang.org/)，但我正在寻找对于 JVM 或 CLR 上的某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:00:37.550

看看 Clojure —— 是 Lisp 编程语言的最新方言。它是一种功能通用的语言。它专注于使用不可变值和明确的时间进度结构进行编程，旨在促进更健壮的程序的开发，尤其是多线程程序。

Clojure 也可以在 .Net 上工作。

[http://clojure.org/](http://clojure.org/)

# c# - 我可以在 DataValueField 中有多个值吗？

> ID：11715412
> 
> 赞同：8
> 
> 时间：2012-07-30T04:29:34.620
> 
> 标签：c#, asp.net

是否可以在 DataValueField 中放置多个值？

例如，使用以下代码：

```
<asp:DropDownList ID="ixTeam" CssClass="ixTeam" runat="server" DataSourceID="dsixTeam" 
 DataValueField="TeamID" DataTextField="TeamName" AppendDataBoundItems="true"> 
```

我可以将两个值（例如`TeamID + "|" + TeamTypeID`）放入 DataValueField 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T04:34:36.580

您不能在 中组合两个字段`DataValueField`，但您可以尝试几件事。

1.  您可以使用连接构建 SQL 查询，（如果您从数据库中获取数据）

SQL查询：

```
Select (TeamID +"|"+ TeamTypeID) as CombinedTeam, .....` 
```

然后设置

```
DataFieldValue = "CombinedTeam" 
```

或者

1.  您可以使用 LINQ 查询基于两个字段的串联创建匿名类型。

例如：

```
var query = from t in yourDataSource
            select new 
            {
                 CombinedTeam = t.TeamID + "|" + t.TeamTypeID,
            } 
```

然后指定下拉到 LINQ 查询的数据源，并指定`DataFieldValue`

```
yourDropDownList.DataSource = query;
yourDropDownList.DataFieldValue = "CombinedTeam"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T04:34:07.693

简短的回答是你不能。

相反，在您的数据集中创建一个计算列，该列具有`TeamID + '|' + TeamTypeID`其表达式（您也可以在获取数据时执行此操作，将格式化的显示列添加到您的选择查询，假设您使用的是数据库），然后绑定该列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T04:36:56.413

是的，这是可以做到的。在从 SQL Server 检索时格式化您的数据，如下所示：

```
Select TeamID + ' | ' + TeamTypeID CombinedColumn 
```

现在设置`DataValueField=CombinedColumn`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-11T09:01:14.630

```
SELECT  CAST(TeamID AS VARCHAR(100)) + ' | ' + CAST(TeamTypeID AS VARCHAR(100)) as CombinedColumn, TeamID ,TeamTypeID FROM [tblName] 
```

这对我有用，其余的正在转换为 int 错误。

# wpf - wpf 组合框中的默认值

> ID：11715414
> 
> 赞同：0
> 
> 时间：2012-07-30T04:29:50.630
> 
> 标签：wpf, data-binding, combobox

我有一个列出财政年度的数据绑定组合框。用户从该组合中选择一个值，并从“客户”组合框中选择一个值，然后选择该客户在该财政年度的报告以供用户处理。尽管可以处理历史文档，但默认用例是处理刚刚完成的财政年度的报告，所以我想将组合框设置为默认为（当前）2011/2012，这是 FinancialYear 的字符串属性实体。

我的xml：

```
<ComboBox Canvas.Left="353" 
          Canvas.Top="18" 
          Height="23" 
          Name="cboFinancialYear"
          Width="120" 
          DisplayMemberPath="FinancialYear1" 
          ItemsSource="{Binding}" 
SelectedValuePath="FinancialYearID" />; 
```

`Window_Loaded`我后面代码中的方法：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    String thisYear = MainViewModel.GetCurrentFinancialYear();
    lGFinanceEntities = new LGFinanceEntities();
    // Load data into FinancialYears. You can modify this code as needed.
    CollectionViewSource financialYearsViewSource = ((CollectionViewSource)(this.FindResource("financialYearsViewSource")));
    ObjectQuery<FinancialYear> financialYearsQuery = this.GetFinancialYearsQuery(lGFananceEntities);
     financialYearsViewSource.Source = financialYearsQuery.Execute(System.Data.Objects.MergeOption.AppendOnly);
     cboFinancialYear.SelectedItem = thisYear;
} 
```

但是，这似乎没有任何效果，并且组合框中的选定项目是 FinancialYear 表中的第一年。

谁能指出我做错了什么？我环顾四周，但组合框中的大多数默认值实现似乎都是“选择一年”类型的指令文本，而我想实际选择一个默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:59:03.990

SelectedItem 具有对 ItemsSource 对象的引用。如果您的 ItemsSource 是`IEnumerable<FinancialYear>`类型，则不能将 SelectedItem 设置为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:58:36.437

放

```
cboFinancialYear.SelectedValue=thisYear.FinancialYearID; 
```

使用 SelectedValue 而不是 SelectedItem，我希望这会有所帮助。

# python - 有没有办法指定结构中可用命令的顺序？

> ID：11715416
> 
> 赞同：2
> 
> 时间：2012-07-30T04:30:11.250
> 
> 标签：python, fabric

有没有办法指定执行时列出命令的顺序`fab -l`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:01:02.710

不幸的是，它看起来不像：[源](https://github.com/fabric/fabric/blob/master/fabric/main.py#L355)似乎只是对名称列表进行排序。（另请参阅`_task_names`之后的函数的文档字符串。）

作为一个明显的后续，你在寻找什么样的排序？你能简单地对输出进行后处理`fab -l`吗？

# r - 在 quantmod 中使用 chartSeries

> ID：11715431
> 
> 赞同：5
> 
> 时间：2012-07-30T04:32:35.603
> 
> 标签：r, quantmod

我是 R 的新手，使用您的网站非常有帮助。不幸的是，我已经为我的代码苦苦挣扎了两天，所以我想问几个问题。我一直在尝试创建漂亮的图表以放入 pdf 表中，但我一直在使用的所有软件包都没有什么问题。所以我想要完成的是创建一个包含三个图表和一个相关表的 pdf 表。下面是我创建的一个示例，它与我想要做的非常相似，但我想改变的东西很少。我在 quantmod 中使用 chartSeries 来绘制图表和使用 textplot 的表格。

几个问题：

1.  是否可以删除图表右上角的日期？
2.  而不是文本 Last xxxx （绿色系列文本）我想获得系列本身的名称，例如 MSFT，这可行吗？
3.  如何给出轴名称，例如返回、日期？
4.  在累积差异图中，我使用了 addVo()，该函数给出了这个不错的 barPlot。在其他图表中，我没有使用 addVo() 只是 addTA 和 type='h' ，您可以看到条形图/直方图的差异。是否可以使用 addTA 获得与 addVo 中相同的图？
5.  有没有办法更好地拟合相关表和/或更专业。也许另一个功能更好？

最好的，

OTB

```
install.packages("quantmod")
install.packages("gplots")
library(quantmod)
library(gplots)

#setwd("..........")

getSymbols("MSFT")
getSymbols("AAPL")
getSymbols("COKE")
getSymbols("PEP")

#Get the return
MSFT.Return <- diff(MSFT)/lag(MSFT)
AAPL.Return <- diff(AAPL)/lag(AAPL)
COKE.Return <- diff(COKE)/lag(COKE)
PEP.Return <- diff(PEP)/lag(PEP)

#Get the return for last two months and only get close price return.
#because in my data I only have the close price. 
MSFT.Close <- MSFT.Return['2012-06-01::2012-07-27', 'MSFT.Close']
AAPL.Close <- AAPL.Return['2012-06-01::2012-07-27', 'AAPL.Close']
COKE.Close <- COKE.Return['2012-06-01::2012-07-27', 'COKE.Close']
PEP.Close <- PEP.Return['2012-06-01::2012-07-27', 'PEP.Close']

pdf(sprintf("%s.pdf","ExampleGraph"), width=11.69, height=8.27)

layout(matrix(1:8, nrow=4)) 

#Get the difference in return
techDifference <- MSFT.Close - AAPL.Close
bevDifference <- COKE.Close - PEP.Close

#Rename columns
colnames(MSFT.Close)[1] <- "MSFT"
colnames(AAPL.Close)[1] <- "AAPL"
colnames(techDifference)[1] <- "Difference"

colnames(COKE.Close)[1] <- "COKE"
colnames(PEP.Close)[1] <- "PEP"
colnames(bevDifference)[1] <- "Difference"

#Combine into two tables
tech <- cbind(MSFT.Close,AAPL.Close,techDifference)
bev <- cbind(COKE.Close,PEP.Close,bevDifference)

#Plot charts
chartSeries(tech, order=1,up.col='green', name='MSFT & AAPL', layout=NULL,
TA=c("addTA(tech,order=2,on=1,layout=NULL);
addTA(tech$Difference,legend='Difference',type='h',layout=NULL)"))

chartSeries(bev, order=1,up.col='green', name='COKE & PEP', layout=NULL,
TA=c("addTA(bev,order=2,on=1,layout=NULL);
addTA(bevDifference$Difference,legend='Difference',type='h',layout=NULL)"))

#Take the cumulative difference for each sector 
techCumulative <- cumsum(abs(techDifference))
bevCumulative <- cumsum(abs(bevDifference))
diffCumulative <- techCumulative - bevCumulative 

#Rename columns
colnames(techCumulative)[1] <- "Tech"
colnames(bevCumulative)[1] <- "Beverage"
#If I set the name as Volume, I can use addVo() and get nice barplot.
#Problem with that is the legend name will be Volume but I would like to
#have it Difference and of course I'm using wrong column name. 
colnames(diffCumulative)[1] <- "Volume"

#Combine into one table
cumulative <- cbind(techCumulative,bevCumulative,diffCumulative)

#Plot chart
chartSeries(cumulative,order=1,up.col='green', name='Cumulative Difference', layout=NULL,
TA=c("addTA(cumulative,order=2,on=1,layout=NULL)", addVo()))

#Get the correlation matrix
correlationTable <- cbind(tech[,1:2],bev[,1:2])
correlation <- cor(correlationTable)
corTable <- as.table(correlation)
corrFormatted <- formatC(corTable, format = "f", digits = 3)
textplot(corrFormatted,valign="top",col.data=colors()[300],
col.rownames=colors()[300],col.colnames=colors()[300])
title("Correlation",cex.main=2.5,col.main=colors()[300])

dev.off() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T00:26:23.150

一些很好的问题。

Q1：没有。`quantmod:::chartSeries.chob`有这个代码：

```
old.adj <- par('adj')
par('adj'=0)
do.call('title',list(x@name, col.main=x@colors$fg.col))
par('adj'=1)
do.call('title',list(paste('[',start(xx),'/',end(xx),']', sep='')
                  ,col.main=x@colors$main.col))
par('adj'=old.adj) 
```

即 start(xx)/end(xx) 位是硬编码的。

Q2。同样，它似乎是硬编码的（相同的功能）：

```
if(x@type=='line') {
    lines(x.pos,Closes,col=x@colors$up.col,type=x@line.type)
    main.key <- c(list(list(legend=
                       paste('Last',last(Closes)),
                       text.col=x@colors$up.col)),main.key)
} 
```

（我在研究源代码时找不到任何可以帮助 Q3/Q4/Q5 的东西，抱歉）

# c# - 基础设施 UltraValidator 新

> ID：11715432
> 
> 赞同：1
> 
> 时间：2012-07-30T04:32:41.640
> 
> 标签：c#, infragistics

我正在使用基础设施 UltraValidator。我想从验证消息框中删除文本“验证失败并出现以下错误”。请帮帮我

这是代码>>

```
private void uValidate_ValidationError(object sender, ValidationErrorEventArgs e){

        Infragistics.Win.Misc.ValidationSettings settings;
            settings = this.uValidate.GetValidationSettings( UltraTextEditor );
            settings.NotificationSettings.Action = Infragistics.Win.Misc.NotificationAction.MessageBox;
            settings.NotificationSettings.Caption = "Required Fields";
            settings.NotificationSettings.Text = "Select Customer";
    }

bool ValidateMyControls()
    {
        Infragistics.Win.Misc.Validation v = uValidate.Validate();

        return v.IsValid;
    } 
```

uValidate 是 UltraValidator 控件

当方法 ValidateMyControls() 被触发时，我会得到一个消息框，顶部有一个字符串“验证失败，出现以下错误：”。我需要删除或编辑此字符串。

问候安菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:53:30.287

现在我明白这里发生了什么。
您需要自定义由以下标识的资源字符串：

```
"Validate_ErrorNotificationMessageHeader" 
```

这是一个包含在程序集资源中的内部字符串`Infragistics.Win.Misc`，它在您的消息“选择客户”之前由程序集自动显示。

您可以使用以下说明自定义字符串

```
ResourceCustomizer rc = Infragistics.Win.Misc.Resources.Customizer;
rc.SetCustomizedString("Validate_ErrorNotificationMessageHeader", "Your message here"); 
```

每个 Infragistics 程序集都有一个可以通过这种方式自定义的字符串列表。
有关可用资源字符串的完整列表，请[查看此处](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Win_Assembly_Resource_Strings.html)。（这仅适用于 WinForms）。
处理此任务的最佳方法是创建一个在应用程序启动时仅调用一次的通用方法（类似于`GlobalAppUtility.SetInfragisticsResourceStrings()`; ）

# c++ - C++：运算符<<的模板类中的友元函数

> ID：11715435
> 
> 赞同：5
> 
> 时间：2012-07-30T04:33:29.720
> 
> 标签：c++, templates, friend, ostream

**在 .cpp 文件**中声明模板类的友元函数（对于 std::ostream& 运算符<<）的正确方法是什么？

我当前的实现不起作用：

```
// MyTest.h
template<class T, unsigned int TSIZE> class MyTest
{
    inline friend std::ostream& operator<< <T, TSIZE> (std::ostream &lhs, const MyTest<T, TSIZE> &rhs);
};

// MyTest.cpp
template<class T, unsigned int TSIZE> inline friend std::ostream& operator<< <T, TSIZE> (std::ostream &lhs, const MyTest<T, TSIZE> &rhs)
{
    // IMPLEMENTATION
} 
```

非常感谢你 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T05:23:40.910

要`operator<< <T, TSIZE>`像您一样引用模板特化，主模板的声明必须是可见的。反过来`operator<<`需要声明，`MyTest`因为它作为参数出现。

```
// Declare MyTest because operator<< needs it
template<class T, unsigned int TSIZE> class MyTest;

// Declare primary template
template<class T, unsigned int TSIZE>
inline std::ostream& operator<<(std::ostream& lhs, const MyText<T, TSIZE>& rhs);

template<class T, unsigned int TSIZE> class MyTest
{
    // Specialization MyTest<T, TSIZE> only declares
    // specialization operator<< <T, TSIZE> as friend
    // Note that you can just use '<>' to designate the specialization,
    // template parameters are deduced from the argument list in this case
    inline friend std::ostream& operator<< <> (std::ostream &lhs, const MyTest<T, TSIZE> &rhs);
}; 
```

您拥有的定义应该与这些声明相匹配。请注意，由于`operator<<`是一个模板，它的定义很可能应该在标题中。

在编写所有这些抢先声明时需要较少工作的替代方法是`MyTest<T, TSIZE>`将整个模板声明为友元，而不仅仅是采用`MyTest<T, TSIZE>`.

```
// in MyTest definition
template<typename U, unsigned USIZE>
inline friend std::ostream& operator<<(std::ostream& lhs, const MyTest<U, USIZE>& rhs); 
```

您拥有的定义也应该匹配这样的声明（模板参数的名称与匹配的声明和定义无关）。

为了完整起见，我会提到，当涉及到类模板的朋友时，另一种选择是在类模板定义中定义它。这定义了一个非模板友元函数，该函数对于每个专业化都是唯一的。

```
// in MyTest definition
friend std::ostream& operator<<(std::ostream& lhs, MyTest const& rhs)
{ /* implementation */ } 
```

不可能引用这些函数（例如`&ns::operator<<`，与其他选项不同，它不起作用）并且它们只能通过 ADL 找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:40:39.833

目前尚不清楚原始帖子想要什么。我将假设它需要以下内容：

```
// Some template class.
template<class T, unsigned int TSIZE> class MyTest { };

// Some template function.
template<class T, unsigned int TSIZE> std::ostream& operator<< (std::ostream &lhs, const MyTest<T, TSIZE> &rhs)
{
    // IMPLEMENTATION
} 
```

现在有必要将此模板函数声明为类的友元，因为此函数需要访问`My test`. 这可以通过以下定义来实现：

```
template<class T, unsigned int TSIZE> class MyTest
{
    template<class T1, unsigned int TSIZE1> 
    friend std::ostream& operator<< (std::ostream &lhs, const MyTest<T1, TSIZE1> &rhs);
}; 
```

声明前需要模板头，`friend`因为这是一个不相关的模板函数，不属于当前模板类。

# c++ - 如何将包含不同语言的 wstring 行写入文件？

> ID：11715441
> 
> 赞同：4
> 
> 时间：2012-07-30T04:33:59.237
> 
> 标签：c++, c, string, character-encoding, wofstream

我从 22 个不同语言的文件中分离出部分，并将它们做成 wstring 行，例如：

```
wstring wstr_line = L"\"IDS_TOAST_ECOON\",\"eco Mode is turned On.\",\"ecoモードをオンにしました。\",\"Režim eco je zapnutý.\",\"Økoindstillingen er aktiveret\"..." 
```

我使用 wofstream 将 wstr_line 放入文件中，但该行在日语部分完成（\“ecoモードをオンにしました。\”）。如果我将`wfout.imbue("chs");`线路设置在捷克部分完成（\“Režim eco je zapnutý.\”）

如何正确将此行写入文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:44:09.630

尝试将其作为代码的第一行：

```
int main()
{
    std::cout.imbue(std::locale("")); 
```

这会将应用程序的本地设置为机器支持的内容（对于宽字符串可能是 UTF-32）。不幸的是，对于程序员来说，默认的本地是“C”，而“C”本地的 codecvt 方面没有做任何有用的事情（可能会在不转换的情况下将宽包截断为单个字节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:31:19.383

我已经用另一种策略解决了这个问题，`output the lines in bytes`. 使用下面的函数输出 wstring，无论它包含什么字符。

```
void output(ofstream &fout, vector<wstring> wline_list)
{
    void outputline(ofstream &, wstring);
  //pre output 0xFF and 0xFE to make the file encoding in UTF-16
    const BYTE PRE_LOW = 0xFF;
    const BYTE PRE_HIGH = 0xFE;
    fout << PRE_LOW << PRE_HIGH;
    for(vector<wstring>::size_type i(0); i<wline_list.size(); i++)
        outputline(fout, wline_list[i]);
}

void outputline(ofstream &fout, wstring line)
{
    void getByte(BYTE btchar[2], WORD wdChar);
    BYTE btChar[2] = {0,0};

    const BYTE CHANGE_LINE1_LOW = 0x0D;
    const BYTE CHANGE_LINE1_HIGH = 0x00;
    const BYTE CHANGE_LINE2_LOW = 0x0A;
    const BYTE CHANGE_LINE2_HIGH = 0x00;

    WORD wdChar(0);
    for(wstring::size_type i(0); i<line.length(); i++)
    {
        wdChar = line[i];
        getByte(btChar, wdChar);
        fout << btChar[0] << btChar[1];
    }
  //it needs this two chars to change line.
    fout << CHANGE_LINE1_LOW << CHANGE_LINE1_HIGH
        << CHANGE_LINE2_LOW << CHANGE_LINE2_HIGH;
}

void getByte(BYTE btchar[2], WORD wdChar)
{
    btchar[0] = wdChar % 0x0100;
    btchar[1] = wdChar / 0x0100;
} 
```

# dynamic-programming - 记忆化与动态编程查找的实现

> ID：11715447
> 
> 赞同：1
> 
> 时间：2012-07-30T04:34:34.910
> 
> 标签：dynamic-programming, memoization

在我开始之前，不，这不是一个问记忆化和动态编程之间有什么区别或者哪个更好的问题，而只是一个简单的问题，询问它们处理缓存查找的方式之间的细微差别。

DP 使用自下而上的方法，而 memoization 使用自上而下的方法。因此，使用 DP，您首先构建一个缓存计算表，然后将这些缓存值提供给更大的计算，以避免冗余的递归或迭代函数调用。记忆或多或少只是将每个函数调用的结果缓存到哈希或数组（可能是数组）中，然后在函数调用中提供结果（它只是跳过函数体内发生的任何事情）。

我的问题是我在这里所说的是否正确？这两种方法看起来很相似，只有 DP 与记忆相比更难，并且在记忆方面的效率略高。有了 memoization，你的程序仍然必须触发每个函数调用，即使它被缓存了，而且这些函数调用中的每一个都可以快速填满堆栈，而在 DP 中它会检查函数内的数组表并且只调用递归/iterative 函数，如果它没有找到。

我在这里正确吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:38:43.153

好吧，我认为您基本上对“记忆化”的定义过于严格，这实际上只是存储先前计算结果而不是重新计算它们的任何技术。因此，将所有结果存储到先前最高*n*的 Fibonacci 计算正在记忆，但存储先前计算的子问题的 DP 算法也是如此。

（参见[维基百科文章](http://en.wikipedia.org/wiki/Memoization)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T04:45:55.437

动态编程和记忆化不是相互排斥的，也不是不同的方法。记忆化只是“记住”函数调用的结果及其所有相关上下文（参数、调用实例等）。动态规划使用记忆化来实现对给定子问题的结果只计算一次的目标。

来自[维基百科](http://en.wikipedia.org/wiki/Dynamic_programming)：

> 动态规划方法试图只解决每个子问题一次，从而减少计算次数：一旦计算了给定子问题的解决方案，它就会被存储或“记忆化”：下次需要相同的解决方案时，它简直是抬头。当重复子问题的数量作为输入大小的函数呈指数增长时，这种方法特别有用。

# .net - 网站部署 - 外部 DLL 中的 WCF 服务

> ID：11715454
> 
> 赞同：0
> 
> 时间：2012-07-30T04:36:13.833
> 
> 标签：.net, wcf, web-config, inversion-of-control, wcf-binding

我有一个 N 层网站解决方案（基于 MVC3），其中所有组件都通过 IoC 容器注册（即，Web 项目除了接口和模型之外没有任何引用）。

解决方案中的一个项目需要使用外部 WCF 服务。这些 WCF 请求仅包含在此项目中，解决方案中的其他项目不需要了解这一点。

但是，当我想运行网站时，我仍然需要确保所有**WCF 绑定和端点**都存在于网站的**web.config**中。

我的问题是，是否可以将所有这些配置包含在实际与服务一起使用的程序集中，以便 Web 项目可以保持幸福地不知道它们？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:43:55.000

我们需要将所有的配置条目放在运行的应用程序的 web.config/app.config 中。

要使 Web 应用程序不知道这些服务，您可以

*   将所有主机、绑定、端点等详细信息放入代码而不是配置文件中。当然，这会降低您的应用程序的可配置性。
*   将所有与服务相关的配置保存在单独的文件中，并在 web.config 中引用该文件。

# arrays - delphi中如何添加新的列数组

> ID：11715459
> 
> 赞同：-1
> 
> 时间：2012-07-30T04:37:09.260
> 
> 标签：arrays, delphi, matrix

我想在大小为 10X10 的矩阵中的最后一列之后添加一些列。我编写了如下代码：

```
 for i:=1 to N
      do
    begin
      for j:=1 to N  do
        if j = N then
        begin
         if fileexists('d:\A\'+'img'+inttostr(I)+' '+'0'+'.bmp') then

          Write(f,input^[i]^[j],' ','0')
        end
          else
           Write(f,input^[i]^[j],' ','1'); 
```

但是这段代码在其他列之间添加了列。谁能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:17:32.350

`FileExists`我认为您比您预期的要早结束您的测试。

在写入所有固定列之后，此代码将在额外列中写入一些内容。

```
for i := 1 to N do
begin
  for j := 1 to N do
    Write(f, input^[i]^[j], ' '); 
  // Now it is time for writing the extra column   
  if FileExists('d:\A\' + 'img' + inttostr(i) + ' ' + '0' + '.bmp') then
    WriteLn(f, '0')
  else
    WriteLn(f, '1');
end; 
```

编辑：您只需要为每个索引 i 测试一次文件。更新了代码。

# objective-c - 接口中的变量声明问题

> ID：11715461
> 
> 赞同：1
> 
> 时间：2012-07-30T04:37:32.700
> 
> 标签：objective-c, ios, variables

我是目标 c 的新手。我在一个类文件中添加了一个接口，并在那里声明了一些变量。编译时在所有声明中显示“不能在@interface 和@protocol 中声明变量”错误。这是示例代码

```
#import "State.h"

@interface State(private)
NSString *forgotPassword=nil;
NSMutableArray *CategorySelection = nil;
NSMutableArray *subCategorySelection= nil;
NSString *string = nil;
int Tag= 0;
int alertTag=0;
NSURL *stringURL =nil;
NSURL *videoURL =nil;
NSURL *imageURL = nil;
int loginCount = 0;
NSMutableArray *album;
NSString *videoFileName = nil;
int videoCounting=0;
int loginUserId = 0;
int ImageTagg = 0;

@end

@implementation State

+(void) setforgotPasswordText:(NSString *) passwordText{
    forgotPassword = passwordText;
} 
```

我是初学者，所以指导我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T04:42:47.077

看起来您在班级中声明了一个[*类别*](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)；您不能在类别中添加实例变量。

但是，您可以将它们添加到类扩展中。为此，删除类别 ( `private`) 的名称，并删除初始化，代码如下：

```
@interface State () {
    // Note how the initialization is gone:
    NSString *forgotPassword;
    NSMutableArray *CategorySelection;
    // More variables; no initialization!
}
// More stuff...
@end 
```

所有初始化都需要在您*指定的初始化程序*（例如您的`init`方法）中进行，如下所示：

```
-(id)init {
    if (self = [super init]) { // Yes, it's =, not ==
        // Perform all your initialization here:
        *forgotPassword= ...;
        *CategorySelection = ...;
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T04:44:55.957

如果你只想声明一个新类，`State`你可以这样声明你的实例变量（在大括号内，没有显式初始化）：

```
@interface State
{
    NSString *forgotPassword;
    NSMutableArray *categorySelection;
    NSMutableArray *subCategorySelection;
    NSString *string;
    int tag;
    int alertTag;
    NSURL *stringURL;
    NSURL *videoURL;
    NSURL *imageURL;
    int loginCount;
    NSMutableArray *album;
    NSString *videoFileName;
    int videoCounting;
    int loginUserId;
    int imageTag;
}
@end 
```

如果您使用 ARC，则不需要初始化它们，因为它将所有这些设置为零或零。如果你不使用 ARC（但你为什么不使用），你会在你的`init`方法中初始化这些。

而且我注意到您正在编写自己的“setter”（例如`setForgotPassword`）。如果您希望编译器为您执行此操作（即为您“合成”它们），请首先将这些变量声明为属性，例如：

```
@interface State

@property (nonatomic, strong) NSString *forgotPassword;
@property (nonatomic, strong) NSMutableArray *categorySelection;
@property (nonatomic, strong) NSMutableArray *subCategorySelection;
@property (nonatomic, strong) NSString *string;
@property int tag;
@property int alertTag;
@property (nonatomic, strong) NSURL *stringURL;
@property (nonatomic, strong) NSURL *videoURL;
@property (nonatomic, strong) NSURL *imageURL;
@property int loginCount;
@property (nonatomic, strong) NSMutableArray *album;
@property (nonatomic, strong) NSString *videoFileName;
@property int videoCounting;
@property int loginUserId;
@property int imageTag;

@end 
```

在声明了属性之后，您现在可以让编译器合成“setter”和“getter”。对于这些`@property`声明，如果您使用的是最新的编译器（Xcode 4.4 ... 大约一周前发布），则无需`@synthesize`在`@implementation`. 但是，如果您使用的是较早的编译器，则需要包含`@synthesize`所有`@property`声明，例如

```
@implementation State

@synthesize forgotPassword = _forgotPassword;
@synthesize categorySelection = _categorySelection;
@synthesize subCategorySelection = _subCategorySelection;
@synthesize string = _string;
// etc. 
```

如果你这样做（声明 a`@property`然后`@synthesize`它），编译器将在幕后为你创建实例变量，然后自动生成一个“setter”（即一个方法是“set”后跟你的变量名，例如“setForgotPassword”）和每个属性的“getter”方法（与变量同名的方法，它将为您检索变量内容）。请注意，对于所有这些属性，`@synthesize forgotPassword = _forgotPassword`也将生成实例变量，但通过在 ivar 名称前包含下划线，您将确保不会将属性`self.forgotPassword`与实例变量混淆`_forgotPassword`。

如果您希望它是一个类别（基本上是添加要应用于现有类的新方法，通过引用现有类指定，`State`后跟类别指示符，`State (private)`），那么您不能包含新变量。我不知道这是否真的是你的意图（我怀疑）。但是，如果您真的想这样做，但您确实需要这些新变量，您可以改为子类化现有`State`类，如下所示：

```
@interface StateSubClass : State
{
    NSString *forgotPassword;
    NSMutableArray *categorySelection;
    NSMutableArray *subCategorySelection;
    NSString *string;
    int tag;
    int alertTag;
    NSURL *stringURL;
    NSURL *videoURL;
    NSURL *imageURL;
    int loginCount;
    NSMutableArray *album;
    NSString *videoFileName;
    int videoCounting;
    int loginUserId;
    int imageTag;
}
@end 
```

如果您注意到，我还更改了您的变量名称以符合 Apple 的首字母小写约定。类以大写字母开头，变量以小写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:40:38.753

变量声明应该在括号内，应该是这样的

```
@interface State(private)
{
NSString *forgotPassword;
NSMutableArray *CategorySelection;
NSMutableArray *subCategorySelection;
NSString *string;
int Tag;
int alertTag;
NSURL *stringURL;
NSURL *videoURL;
NSURL *imageURL;
int loginCount;
NSMutableArray *album;
NSString *videoFileName;
int videoCounting;
int loginUserId;
int ImageTagg;
}
-(void)sampleMethod1;
-(void)sampleMethod2;
-(void)sampleMethod3;
@end 
```

在括号之后，您可以声明在类中使用的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T05:42:45.627

问题是您正在初始化 @interface 本身中的变量。只能声明变量，初始化在@implementation 中完成。

因此你的@implementation 应该包含，

```
@implementation

forgotPassword=nil;    
CategorySelection = nil;      
subCategorySelection= nil;   
string = nil;   
Tag= 0;   
alertTag=0;   
stringURL =nil;   
videoURL =nil;   
imageURL = nil;     
loginCount = 0;
videoFileName = nil;    
videoCounting=0;    
loginUserId = 0;    
ImageTagg = 0;    

@end 
```

而你的@interface 包含，

```
@interface State       

NSString *forgotPassword;    
NSMutableArray *CategorySelection;    
NSMutableArray *subCategorySelection;     
NSString *string;    
int Tag;    
int alertTag;    
NSURL *stringURL;    
NSURL *videoURL;    
NSURL *imageURL;    
int loginCount;
NSMutableArray *album;    
NSString *videoFileName;    
int videoCounting;    
int loginUserId;    
int ImageTagg;    

@end 
```

请注意，**private**关键字已被删除。为了在 objectice C 中声明私有变量，我们在**.m**文件本身中声明它们。下面给出一个例子，

**.h 文件**

```
@interface classname{
// variable declaration
}
//variable property declaration
//method declaration
@end 
```

**.m 文件**

```
@interface classname()
//private variables
@end

@implementation
//do your logic here
@end 
```

# wordpress - 如何在 wordpress 中创建“通用”自定义字段？

> ID：11715465
> 
> 赞同：5
> 
> 时间：2012-07-30T04:38:34.673
> 
> 标签：wordpress

（wordpress 3.4 版）

好的，这就是我想要做的：

创建一个名为“自定义字段”的页面，用户永远不会真正看到该页面。客户只需添加自定义字段。他将不断需要每周/每月更改这些自定义字段。

我需要将这些自定义字段显示在页眉、页脚或侧边栏中，以便它们在所有页面上通用。

您知道调整代码的正确方法以便我可以实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T04:56:13.890

由于自定义字段是针对每个帖子范围的，因此我建议改用选项元数据存储。通过这种方式，您可以从更方便和一致的管理面板更改值。

[这是一个教程，展示了如何](http://digwp.com/2009/09/global-custom-fields-take-two/)将此功能添加到 WP

```
//Custom Theme Settings
add_action('admin_menu', 'add_gcf_interface');

function add_gcf_interface() {
    add_options_page('Global Custom Fields', 'Global Custom Fields', '8', 'functions', 'editglobalcustomfields');
}

function editglobalcustomfields() {
    ?>
    <div class='wrap'>
    <h2>Global Custom Fields</h2>
    <form method="post" action="options.php">
    <?php wp_nonce_field('update-options') ?>

    <p><strong>My Name:</strong><br />
    <input type="text" name="myname" size="45" value="<?php echo get_option('myname'); ?>" /></p>

    <p><strong>Amazon ID:</strong><br />
    <input type="text" name="amazonid" size="45" value="<?php echo get_option('amazonid'); ?>" /></p>

    <p><strong>Today's Featured Website:</strong><br />
    <input type="text" name="todaysite" size="45" value="<?php echo get_option('todaysite'); ?>" /></p>

    <p><strong>Welcome Text:</strong><br />
    <textarea name="welcomemessage" cols="100%" rows="7"><?php echo get_option('welcomemessage'); ?></textarea></p>

    <p><input type="submit" name="Submit" value="Update Options" /></p>

    <input type="hidden" name="action" value="update" />
    <input type="hidden" name="page_options" value="myname,amazonid,todaysite,welcomemessage" />

    </form>
    </div>
    <?php
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T20:40:44.210

使用 Cleric 的代码保存变量时出现错误。它保存得很好，但是有这个关于代码被弃用的错误。

然后我发现这个页面[在 WordPress 2.8 中使用 register_setting() 处理插件选项，](http://planetozh.com/blog/2009/05/handling-plugins-options-in-wordpress-28-with-register_setting/)它现在在 WP 3.5 版中完美运行。

# ios - Xtify iOS API 2.0 检索 XID

> ID：11715480
> 
> 赞同：1
> 
> 时间：2012-07-30T04:41:19.563
> 
> 标签：ios, xtify

将 deviceToken 注册到 Xtify Manager 后，如何知道 xid 何时可用？

我正在这样做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    XLXtifyOptions *anXtifyOptions=[XLXtifyOptions getXtifyOptions];
    [[XLappMgr get ]initilizeXoptions:anXtifyOptions];
    [[XLappMgr get] launchWithOptions:application andOptions:launchOptions];
} 
```

然后

```
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken
{
    [[XLappMgr get] registerWithXtify:devToken ];
} 
```

它正在将 xid 和其他内容打印到控制台，但我需要在应用程序中获取它，以便我可以将它注册到我自己的服务器（然后使用推送 REST api 向单个用户发送消息）。

我注意到它`XLappMgr`有一个`-(NSString *)getXid;`方法，但是我怎么知道什么时候可以调用它呢？是否有一个委托方法在可用时被调用，还是我需要轮询它？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:36:00.613

目前没有委托方法。你是对的，当应用程序进入前台时，你需要第二次轮询或检查它。

**编辑：**

现在有一种方法可以在成功注册 Xtify 后获得通知。首先，您需要指定委托 -

```
[[XLappMgr get] setInboxDelegate:self]; // The delegate is used to all Xtify delegation methods.
[[XLappMgr get] setDeveloperXidNotificationSelector:@selector(doUpdateDevServer:)]; 
```

然后你需要实现方法本身 -

```
- (void) doUpdateXid:(XLappMgr *)appM
{
   NSLog(@"Got XID=%@",[appM getXid]);
   // Example, update the xid on developer's server 
} 
```

[你可以在这里](http://developer.xtify.com/display/sdk/Advanced+Integration+Guide+for+Apple+Push+Notification+Service#AdvancedIntegrationGuideforApplePushNotificationService-GetNotifiedafterXtifyRegistration)找到详细信息

# php - PHP $_SESSION[] 变量明显不匹配？

> ID：11715483
> 
> 赞同：0
> 
> 时间：2012-07-30T04:41:35.517
> 
> 标签：php

我为 $_SESSION["area"] 分配了一个值“ventas”，当我回显它进行测试时，我得到了这个值。但是当在开关上使用它时，它不会带回回声。难道我做错了什么？遗漏了什么？

这是我的代码：

```
<?php
session_start();
echo $_SESSION["area"];
switch($_SESSION["area"])
{
    case "ventas":
    echo "ventas";
    break;
}
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:48:25.487

您需要使该 session = 一个值，否则它只会返回 NULL 或在开关中找不到任何东西。似乎它不是正确分配的值。

```
$_SESSION['area'] = "ventas"; 
```

# java - Java中的声明和定义有什么区别？

> ID：11715485
> 
> 赞同：84
> 
> 时间：2012-07-30T04:41:59.180
> 
> 标签：java

我对这两个术语感到非常困惑。我检查了stackoverflow，C++也有类似的问题，但Java没有。

有人可以解释java这两个术语之间的区别吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-07-30T04:43:33.100

概念上的区别很简单：

*   *声明*：您*声明*存在某些东西，例如类、函数或变量。你没有说那个类或函数*是什么*样子的，你只是说它存在。

*   *定义*：您*定义*某事物是如何实现的，例如类、函数或变量，即您说它实际上是*什么。*

**在 Java**中，两者几乎没有区别，从形式上讲，一个声明不仅包括标识符，还包括它的定义。以下是我个人对这些术语的详细解释：

*   **类**：Java 并没有像 C++ 那样真正分离声明和定义（在头文件和 cpp 文件中）。您在声明它们时定义它们。

*   **函数**：当你写一个接口（或一个抽象类）时，你可以说你是在声明一个函数，而不是定义它。然而，普通函数总是在声明它们的地方定义。如果您愿意，可以将函数的主体视为其定义。

*   **变量**：变量*声明*可能如下所示：

    ```
     int x; 
    ```

（您声明一个变量`x`存在并且具有 type `int`）如果它是一个局部变量或成员字段。在 Java 中，没有任何关于定义的信息`x`，*除了*它应该持有什么值，这取决于对它的分配。

以下是我如何使用这些术语的粗略总结：

```
abstract class SomeClass {                // class decl.
                                          //                           \
    int x;                                // variable decl.            |
                                          //                           |
    public abstract void someMethod();    // function decl.            |
                                          //                           |
    public int someOtherMethod() {        // function decl.            |
                                          //                           | class
        if (Math.random() > .5)           // \                         | def.
            return x;                     //  |  function definition   |
        else                              //  |                        |
            return -x;                    // /                         |
                                          //                           |
    }                                     //                           |
}                                         //                          / 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-30T04:49:52.320

Java 语言规范广泛指定并使用术语“声明”，但它不使用“定义”，除非它是一个普通的英文单词。

我的证据是，“声明”一词在 JLS 目录*和*索引中多次出现。相比之下，“定义”一词也没有出现在其中。

因此，当您看到有人在 Java 的上下文中使用“定义”这个词时，他们要么是在非技术意义上使用它，要么是在使用术语草率。

在后一种情况下，它们*可能*与技术术语“声明”具有相同的含义，或者它们可能具有其他含义。如果他们的意思是别的，你需要问他们是什么意思。如果他们已经定义了它......足够公平，但这不是标准术语。

* * *

声明“定义”是指初始化变量的点的答案特别不支持......在Java的上下文中。在 Java 中，变量的初始化要么发生在声明点，要么发生在以后的赋值中。在后一种情况下，除了赋值和/或初始化之外，没有使用或需要任何特殊术语。没有为变量分配存储空间的指定点。实际上，很可能变量本身的空间是在到达声明**之前分配的。**

* * *

JLS 规范中的 Java 中没有使用“定义”术语的原因是不需要它。

*   由于 Java 允许以任何顺序声明成员，因此不需要“前向声明”。这就是有必要区分这两个概念的上下文。
*   在 Java 中，变量所需的堆栈空间是编译时常量，因此堆栈偏移量计算发生在编译时。（请记住，在 Java 中，数组是对堆对象的引用......并且只有引用保存在堆栈帧中。）
*   Java 处理字段或变量的“定义而不初始化”的方式不需要单个“声明”点。如果需要对变量进行初始化，它可能发生在源代码中的多个位置。

（在 Java 中，他们可能使用声明与定义的唯一地方是抽象方法。除非他们这样做了，否则他们将不得不将常规方法声明称为定义......为了一致性......会令人困惑。所以他们只是将“抽象”子案例称为抽象方法的声明。）

C 和 C++ 处理这些事情的方式不同，因此在其技术描述中*确实*需要不同的“声明”和“定义”术语。我对“Sun Glossary”定义的看法是它们是以 C / C++ 为中心的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-30T12:19:08.253

根据[太阳词汇表的](https://www.oracle.com/technetwork/java/glossary-135216.html#D)定义：

**声明：** 建立标识符并将属性与其关联的语句，不必保留其存储（用于数据）或提供实现（用于方法）。

**定义：** 保留存储（用于数据）或提供实现（用于方法）的声明。

我阅读 Sun 词汇表的方式是这样的：

```
List i;              // declaration - variable on the stack  
i = new ArrayList(); // definition - gives variable a reference 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-30T04:46:01.633

**1.声明意味着创建**一个`primitive or Object reference variable`，但**没有分别分配值或对象..**

**例如：**

```
 int x;   // declaration of x of type int

          Cat myCat;  //  declaration of myCat an Object of type Cat 
```

**2\. 定义是我们为它们分配值或对象。**

```
 int x = 5;

         Cat myCat = new Cat(); 
```

**3.**如果是Method，它是这样的......

```
public abstract void go();       // Method Declaration (Abstract method)

   public void go(){               // Method Defination

            // Your code      

    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-30T05:25:15.763

`Java`语言仅定义术语声明而不使用定义。

宣言：

```
class A{}// class declaration

String str;// variable declaration 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T05:21:33.813

我想我可以更好地解释这个问题：

考虑以下场景：

**贵公司有一个新的软件工程师空缺职位。**这意味着您将选择担任该职位的人将是软件工程师（您不能为该职位选择营销人员）。所以创建这个帖子类似于声明。

现在当你定义这个职位的人可以/不能做什么，他有什么权限，他的限制是什么时，这就是所谓的定义。

所以说

```
SoftwareEngineer se; 
```

指声明；

和

```
class SoftwareEngineer {

// define role and responsibilities
} 
```

意味着定义。希望它可以帮助你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-20T05:35:34.413

**声明**：声明的概念包括通知编译器变量的属性，例如它的名称、它持有的值的类型和初始值（如果有的话）。

**变量的定义说明**了变量的存储位置。即，变量的内存是在变量定义期间分配的。

```
 public class JavaDemo{
       public static void main(String args[]){
          int a; // declaration of variable
          a=10; // definition of variable
          functionA(a); // declaration of function
       }
       public static void functionA(int a){
          System.out.println("value of a is " + a); // definition of function
       }
    } 
```

# node.js - Node.js - 为什么我的项目在全局安装时说找不到模块

> ID：11715486
> 
> 赞同：3
> 
> 时间：2012-07-30T04:42:16.467
> 
> 标签：node.js, express, npm

我使用命令“npm install -g express”全局安装了 express。我验证 express 存在于我的 /usr/local/bin/" 目录中。

但是，每次我创建一个新项目并执行它时都会显示“找不到模块快递”。

当我使用命令“npm install express”在本地安装 express 时，它可以工作。它是否正确 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T05:17:00.357

根据[npm FAQ](http://npmjs.org/doc/faq.html#I-installed-something-globally-but-I-can-t-require-it)，全局安装的包仅用于运行可执行文件；它们不在您的项目中使用，因为项目是独立的实体，不依赖于环境。

此外，如果您已`express`全局安装，您可以`express`使用命令创建一个新的基于 - 的项目（请参阅[指南](http://expressjs.com/guide.html)`express`的“快速入门”部分），它将使您免于手动操作。[`express`](http://expressjs.com/guide.html)`npm install express`

# java - 如何在云服务器中托管 Web 服务？

> ID：11715487
> 
> 赞同：0
> 
> 时间：2012-07-30T04:42:35.953
> 
> 标签：java, eclipse, web-services

我已经使用 eclipse 在 java 中创建了一个 Web 服务，我需要知道如何在云服务器上托管该服务，有人可以告诉我如何在云上托管该服务，有步骤吗？

感谢您宝贵的时间！...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:51:16.607

可能是[http://serverfault.com](http://serverfault.com)问题，可能已关闭。但这里有指针，

1.  从 AWS 等云服务提供商处获取帐户。
2.  运行您选择的（虚拟）机器，
3.  使用 ssh/rdc 连接并安装您需要的所有软件，
4.  在那里复制您的软件/应用程序。
5.  开始您的服务。测试当您使用公共 IP/DNS 访问时是否有效。
6.  Get a Domain name -- 使用这台机器的 IP 为域创建一个 A Name 记录。

使用此域访问您的应用程序/服务。

不要忘记备份/创建您的机器的映像。

PS：这是一个评论，然后我意识到它太长了。

# actionscript-3 - AS3：错误 MethodInfo-26 和 25

> ID：11715490
> 
> 赞同：1
> 
> 时间：2012-07-30T04:42:52.180
> 
> 标签：actionscript-3, methodinfo

我在 AS3 中制作了一个游戏，我有 2 个文件。一种是 HWMain 和 HWGame。当我单击开始按钮时，脚本从 HWMain 切换到 HWGame，但出现此错误。

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at HWGame()
at MethodInfo-26()
at MethodInfo-25() 
```

这是我的代码。

```
public class HWGame extends MovieClip
{
    var INIT_STATE:String = "INIT_STATE";
    var READY_STATE:String = "READY_STATE";
    var PLAYER_STATE:String = "PLAYER_STATE";
    var PLAY_STATE:String = "PLAY_STATE";
    var END_STATE:String = "END_STATE";
    var gameState:String;

    //And another variable

    public function HWGame()
    {
        gameState = INIT_STATE;
        trace(gameState);
        stage.addEventListener(Event.ENTER_FRAME, gameLoop);

        function gameLoop(e:Event):void
        {
            switch (gameState)
            {
                case INIT_STATE :
                    initGame();
                    break;
                case READY_STATE :
                    ready();
                    break;
                case PLAYER_STATE :
                    startPlayer();
                    break;
                case PLAY_STATE :
                    playGame();
                    break;
                case END_STATE :
                    endGame();
                    break;
            }
        }

        function initGame():void
        {
            //I write the long code
        }

        function ready():void
        {
            //I write the long code
        }

        function startPlayer():void
        {
            //I write the long code
        }

        function playGame():void
        {
            //I write the long code
        }

        function endGame():void
        {
            //I write the long code
        }
    }
} 
```

我尝试修复它，我认为错误出现在 gameState = INIT_STATE。我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:43:20.043

从您引用的内容来看，您的`HWGame`实例可能尚未添加到显示列表中；因此，`stage`当`null`您致电时：

```
stage.addEventListener(Event.ENTER_FRAME, gameLoop); 
```

在访问之前`stage`，您可以等到添加到阶段：

```
package
{
    import flash.display.MovieClip;
    import flash.events.Event;

    public class HWGame extends MovieClip
    {

        var INIT_STATE:String = "INIT_STATE";
        var READY_STATE:String = "READY_STATE";
        var PLAYER_STATE:String = "PLAYER_STATE";
        var PLAY_STATE:String = "PLAY_STATE";
        var END_STATE:String = "END_STATE";
        var gameState:String;

        public function HWGame()
        {
            gameState = INIT_STATE;

            addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
        }

        protected function addedToStageHandler(event:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);

            stage.addEventListener(Event.ENTER_FRAME, gameLoop);
        }

        protected function gameLoop(e:Event):void
        {
            switch (gameState)
            {
                case INIT_STATE:
                    initGame();
                    break;
                case READY_STATE:
                    ready();
                    break;
                case PLAYER_STATE:
                    startPlayer();
                    break;
                case PLAY_STATE:
                    playGame();
                    break;
                case END_STATE:
                    endGame();
                    break;
            }
        }

        protected function initGame():void
        {
            //I write the long code
        }

        protected function ready():void
        {
            //I write the long code
        }

        protected function startPlayer():void
        {
            //I write the long code
        }

        protected function playGame():void
        {
            //I write the long code
        }

        protected function endGame():void
        {
            //I write the long code
        }
    }
} 
```

# java - 在java中使用字符串加载变量

> ID：11715496
> 
> 赞同：0
> 
> 时间：2012-07-30T04:43:49.620
> 
> 标签：java, loading, tile

基本上，由于加载图块的问题，我无法在游戏中加载关卡。我想不通的是如何让程序将瓷砖的类型保存为字符串，例如“水”或“草”，然后从这些字符串中加载瓷砖。以下是瓷砖代码的示例：

```
Example = new TileType("Texture.png", Material.Mat, True, True, "Example"); 
```

第一个值是纹理位置，第二个是材质，第三个是瓦片是否可以被破坏，第四个是NPC是否可以越过瓦片，最后一个是瓦片保存的内容水平数据。

以下是游戏将瓷砖保存为的内容：

```
<tile x="0" y="0" type="Example" /> 
```

我想做的是制作一个方法来获取字符串并找到使用它的图块。谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:53:29.603

使用一个怎么样[`Map<String, TileType>`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)？

[（根据要求发表评论作为答案。）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:57:33.977

我会创建一个名为 Tile 的课程。

```
public class Tile
{
    private Material mMaterial;
    private boolean mCanBeDestroyed;
    private boolean mCanBeWalkedOn;
    private String mLevelSaveName;

    // getters and setters
} 
```

然后有这样的东西来访问它们：

```
private HashMap<String, Tile> mTiles; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:53:42.350

**1.**更好地使用**Collection** like `Map`。

**2.**像这样考虑它...`HashMap<String, TileType>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T04:55:13.690

对于数字变量，您可以使用

```
String s = readIntFromFile(); //Read a number
try
{
    int x = Integer.parseInt(s); //Get an integer from the file
}
catch(NumberFormatException e)
{
    //if parseInt fails, we end up here
} 
```

对于字符串，这里有一个想法：

```
static final String[] tileTypes = {"Example", "Example2"};
private static int findTileType(String type)
{
    for(int i = 0; i < tileTypes.length; i++)
    {
        if(type.equals(tileTypes[i])) return i;
    }
    return -1;
}

public TileType makeTile(String type)
{
    int t = findTileType(type);
    switch(t)
    {
        case 0: 
            return example;
        case 1: 
            return example2;
    }
    return null;
}

static final TileType example = new TileType(/*...*/);
static final TileType example2 = new TileType(/*...*/); 
```

反正你懂这个意思。可能不是最好的解决方案，但它会起作用。

*一年多后编辑：*哎呀，忘了将 findTileType 设为静态。

# php - 在 CodeIgniter 中插入和删除多个查询

> ID：11715504
> 
> 赞同：0
> 
> 时间：2012-07-30T04:44:22.960
> 
> 标签：php, mysql, codeigniter, mysqli

我有以下查询用于从预购遍历数据库中插入和删除记录。我正在使用 codeigniter 并且不知道如何在其中触发多个查询。我尝试了以下查询，但没有在 codeigniter 中正确触发并使用 phpmyadmin 正确触发。

**将记录插入数据库的查询：**

```
$level = $_GET['level'] + 1;
$rgt = $_GET['rgt'] + 1;
if ($_GET['level'] == 0) {
    $sql = "UPDATE xp_subunit SET lft = lft+2, rgt=rgt+2 WHERE rgt > " . $_GET['rgt'] . "; ";
    $sql .="INSERT INTO xp_subunit SET level=" . $level . ", lft =" . $_GET['rgt'] . ", rgt =  " . $rgt . " , name = '" . $_GET['name'] . "', unit_id='" . $_GET['unit_id'] . "', description='" . $_GET['description'] . "';";
    echo $sql;
} else {
    $sql = "UPDATE xp_subunit SET rgt = rgt+2 WHERE rgt > " . $_GET['lft'] . "; ";
    $sql .="INSERT INTO xp_subunit SET level=" . $level . ", lft =" . $_GET['rgt'] . ", rgt =  " . $rgt . " , name = '" . $_GET['name'] . "', unit_id='" . $_GET['unit_id'] . "', description='" . $_GET['description'] . "';";
    echo $sql;
}
echo $query = $this->db->insert($this->tablename, $sql); 
```

**从数据库中删除记录的查询：**

```
$sql .= "SELECT @myLeft := " . $_GET['lft'] . ", @myRight :=  " . $_GET['rgt'] . ", @myWidth :=  " . $_GET['lft'] . " - lft + 1
    FROM xp_subunit WHERE id =" . $_GET['id'] . "; ";
$sql .= "DELETE FROM xp_subunit WHERE lft BETWEEN @myLeft AND @myRight; ";
$sql .= "UPDATE xp_subunit SET rgt = rgt - @myWidth WHERE rgt > @myRight; ";
$sql .= "UPDATE xp_subunit SET lft = lft - @myWidth WHERE lft > @myRight; ";
echo $query = $this->db->mysqli_multi_query($sql); 
```

以上查询有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:02:26.140

除了潜在的 sql 注入 ($_GET['...'])，在第一个查询中使用 $this->db->insert()。这失败了，因为 insert() 是[ActiveRecord](http://codeigniter.com/user_guide/database/active_record.html#insert)库的一部分，用于构造查询，而不是执行查询。

至于为什么 mysqli_multi_query 失败，我不知道。但是，我建议不要使用任何特定于驱动程序的函数，因为 Code-Igniter 允许您从数据库中进行抽象。因此，您应该使用[$this->db->query()](http://codeigniter.com/user_guide/database/queries.html)分别执行每个查询。

话虽如此，我强烈建议使用[ActiveRecord](http://codeigniter.com/user_guide/database/active_record.html#insert)。它允许您编写查询，而不必担心数据库之间的细微语法差异。此外，它会自动转义输入。

*编辑*

第一个更新查询是：

```
$this->db->set('lft', 'lft+2', false);
$this->db->set('rgt', 'rgt+2', false);
$this->db->where('rgt >', $_GET['rgt']);
$this->db->update('xp_subunit'); 
```

第一个插入：

```
$this->db->set('level', $level);
$this->db->set('lft', $_GET['rgt']);
...
$this->db->insert('xp_subunit'); 
```

等等..（看看文档）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:31:45.347

有批量更新和插入功能可用 - 见下文

```
$data = array(
   array(
      'title' => 'My title' ,'name' => 'My Name 2' , 'date' => 'My date 2'
   ),
   array(
      'title' => 'Another title' ,'name' => 'Another Name 2' , 'date' => 'Another date 2'
   )
);

$this->db->update_batch('mytable', $data, 'title');

// Produces:
// UPDATE `mytable` SET `name` = CASE
// WHEN `title` = 'My title' THEN 'My Name 2'
// WHEN `title` = 'Another title' THEN 'Another Name 2'
// ELSE `name` END,
// `date` = CASE
// WHEN `title` = 'My title' THEN 'My date 2'
// WHEN `title` = 'Another title' THEN 'Another date 2'
// ELSE `date` END
// WHERE `title` IN ('My title','Another title') 
```

**对于插入**

```
$this->db->insert_batch('mytable', $data); 
```

还有 $this->db->query() 函数可用`$this->db->query('YOUR QUERY HERE');`

```
To Update and Insert - You'll need to execute them separately 
```

//更新

```
$data = array(
               'title' => $title,'name' => $name,'date' => $date);

$this->db->where('id', $id);
$this->db->update('mytable', $data); 
```

//插入

```
$data = array(
   'title' => 'My title' ,'name' => 'My Name' ,'date' => 'My date');
$this->db->insert('mytable', $data); 
```

//删除

```
$this->db->delete('mytable', array('id' => $id)); 
```

**注意**

而不是使用 $_GET 使用

```
$this->input->get(NULL, TRUE); // returns all GET items with XSS filter 
```

或者

```
$this->input->get('some_data', TRUE); 
```

参考：[http ://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html)

[http://codeigniter.com/user_guide/libraries/input.html](http://codeigniter.com/user_guide/libraries/input.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:17:04.950

可用的批量更新和插入功能。codeigniter 的使用指南将为您提供帮助。试试下面的链接：

[http://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html)

# windows - JMF 无法添加捕获设备

> ID：11715507
> 
> 赞同：1
> 
> 时间：2012-07-30T04:44:53.363
> 
> 标签：windows, device, webcam, jmf

我正在尝试通过 JMStudio 捕获视频。

当我尝试运行 jmfinit 时，它可以检测到我的网络摄像头并要求选择一个视频设备，然后退出而没有任何错误。但该设备未在 jmfregistry 中列出。

当我尝试手动添加设备时，它给了我一个错误 `Could not add item`

我尝试以管理员身份运行（jmfinit 和 jmfregistry），甚至尝试更改安全设置，但似乎没有任何效果。

我在我的 Sony Vaio 笔记本电脑上使用 Windows 7。

# ruby - Ruby：二维数组

> ID：11715510
> 
> 赞同：1
> 
> 时间：2012-07-30T04:45:00.930
> 
> 标签：ruby, arrays, multidimensional-array

如何在 Ruby 中声明二维数组。我知道，`V=[]`是一维的。但是`v=[][]`对于二维呢？在一个块中，我想将值添加为数组中的子数组。即`V=[["ab","ba"]`，`["12","21"]]`。这就是我正在做的事情。让`x=[]`. 我获取每个元素，存储原件和反面。

```
x.each{|k| l=k_reverse v=(k,l)} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T04:53:27.643

```
# Given
list = ["ab","12"]
# This should give you an array of arrays
v = list.map{|x| [x,x.reverse] }
# v = [["ab","ba"],["12","21"]] 
```

二维数组可能被初始化为

```
v = [[]] # not [][], [][] would be the reader for a 2 dim array 
```

# php - 如何获取内容：来自 rss 的编码标签信息

> ID：11715512
> 
> 赞同：0
> 
> 时间：2012-07-30T04:45:10.057
> 
> 标签：php, rss, blogs

**我正在使用magpierss-0.72** rss 解析器从 wordpress 获取博客到我的网站现在我想从我的博客中获取图像，标签中的图像

```
<content:encoded><img src="path" /></content:encoded> 
```

我尝试过的代码是

```
require_once('rss_fetch.inc');
$rss = fetch_rss($url);

foreach ($rss->items as $i => $item ) {
$title = strtoupper ($item['title']);
$url = $item['link'];
$date = $item['pubdate'];
$desc = $item['description'];
$content = $item['content:encoded'];
echo $title."<br />";
echo $url."<br />";
echo $date."<br />";
echo $desc."<br />";
echo $content."<br />";
} 
```

但是 content:encode 标记中的详细信息未获取。任何人都可以帮助我吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:14:08.803

`$item['content']['encoded']`如果您的提要是 Atom 提要，或者`$item['atom_content']`如果您的提要是 RSS 提要，则应将其解析到字段中。

有关参考，请参见`rss_parse.php`,`MagpieRSS::parse`方法。

# asp.net-mvc-3 - 提交后将空值传递给控制器 中的参数？

> ID：11715518
> 
> 赞同：1
> 
> 时间：2012-07-30T04:45:59.417
> 
> 标签：asp.net-mvc-3

下面的代码是我在向控制器提交传递空值后键入的示例，在控制器中，我使用了类名，然后正确传递了值，但是当我使用参数时，它将 NULL 值传递给控制器​​。请给我一个解决方案..

控制器：

```
[HttpGet]
        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(string firstname)
        {
            LogonViewModel lv = new LogonViewModel();
            var ob = s.Newcustomer(firstname)

            return View(ob );
        } 
```

看法：

```
@model IList<clientval.Models.LogonViewModel>

@{
    ViewBag.Title = "Index";
}

@using (Html.BeginForm())
{
    for (int i = 0; i < 1; i++)
    {  
    @Html.LabelFor(m => m[i].UserName)
    @Html.TextBoxFor(m => m[i].UserName)
     @Html.ValidationMessageFor(per => per[i].UserName)

    <input type="submit" value="submit" />
    }
} 
```

模型：

```
 public class LogonViewModel
    {
        [Required(ErrorMessage = "User Name is Required")]
        public string UserName { get; set; }
    }

    public List<ShoppingClass> Newcustomer(string firstname1)
        {

            List<ShoppingClass> list = new List<ShoppingClass>();
           ..
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:47:49.343

这：

```
[HttpGet]
public ActionResult Index() {
    return View();
} 
```

在您看来，这并没有给您：

```
@model IList<clientval.Models.LogonViewModel> 
```

还有这个：

```
for (int i = 0; i < 1; i++) {  
    @Html.LabelFor(m => m[i].UserName)
    @Html.TextBoxFor(m => m[i].UserName)
     @Html.ValidationMessageFor(per => per[i].UserName)

    <input type="submit" value="submit" />
} 
```

不适用于此：

```
[HttpPost]
public ActionResult Index(string firstname) {
      LogonViewModel lv = new LogonViewModel();
      var ob = s.Newcustomer(firstname)
      return View(ob );
} 
```

您没有将模型发送到您的视图，而是在视图中使用列表，但在控制器中期望单个字符串值。您的示例或代码有些奇怪/错误。

为什么你有一个 IList 作为你的模型？如果您只需要使用单个输入字段呈现表单。你应该有这样的代码：

```
[HttpGet]
public ActionResult Index() {
    return View(new LogonViewModel());
} 
```

和观点：

```
@model clientval.Models.LogonViewModel
@using (Html.BeginForm())
{
    @Html.LabelFor(m => m.UserName)
    @Html.TextBoxFor(m => m.UserName)
    @Html.ValidationMessageFor(m => m.UserName)

    <input type="submit" value="submit" />
} 
```

控制器上的第二个动作：

```
[HttpPost]
public ActionResult Index(LogonViewModel model) {
    if (ModelState.IsValid) {
      // TODO: Whatever logic is needed here!
    }
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:44:54.563

它的工作..我已经改变了我的控制器，如下所示

控制器：

```
[HttpGet]
        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(IList<LogonViewModel> obj)
        {

            LogonViewModel lv = new LogonViewModel();
            var ob = lv.Newcustomer(obj[0].FirstName)

            return View(ob );
        } 
```

# jquery - Rails 3.2 引导工具提示报告“.tooltip() 不是函数”

> ID：11715520
> 
> 赞同：2
> 
> 时间：2012-07-30T04:46:01.730
> 
> 标签：jquery, ruby-on-rails-3, twitter-bootstrap, twitter-bootstrap-rails

我正在使用 Rails 3.2.5 和 bootstrap-sass gem 的组合。我在 application.js 中声明了以下内容，以确保加载所有 js 插件。

```
//= require bootstrap 
```

为了仔细检查包含是否成功，我验证了我试图让工具提示出现的页面的 html 源代码：

```
<script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script> 
```

我正在尝试使工具提示或弹出框在我页面上的任何元素上工作。但我总是收到一条错误消息（来自项目中的 .js 代码以及从 Firebug 手动尝试时）：

```
$('#navbar_foobar_link').tooltip();
TypeError: $("#navbar_foobar_link").tooltip is not a function 
```

尽管我可以在 Firebug 的“脚本”选项卡下找到它，但无论我在哪里调用它，它看起来都不可用。

我究竟做错了什么？我觉得这一定是我正在厌烦的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:42:31.373

您是否尝试过将选项传递给工具提示功能，例如

```
$('#element').tooltip('show') 
```

请检查链接和提供的选项 [Twiiterbootstrap](http://twitter.github.com/bootstrap/javascript.html#tooltips)

# php - iOS没有通过PHP在iPhone应用程序和MySQL数据库之间进行通信

> ID：11715521
> 
> 赞同：0
> 
> 时间：2012-07-30T04:46:44.280
> 
> 标签：php, mysql, ios, nsdata, nsurl

我需要帮助来弄清楚为什么我的 iPhone 应用程序没有与我的 PHP 通信。我有一个文本字段，用户可以在其中输入消息，并且有一个按钮应该告诉应用程序何时输入了文本并需要将其发布到我的 mySQL 数据库。

我的 PHP 和 iOS 代码粘贴在下面，但我还在这里包含了一些调试语句。

我在线路上休息了`if([serverOutput...)`一下，此时我得到以下信息：

```
alertsuccess UIAlertView * 0x00000000
数据URL NSData * 0x00000000
messageString __NSCFString * 0x0685e7a0 @"hi"
服务器输出 __NSCFConstantString * 0x00b75a7c
网址 NSURL * 0x06869540 @"http://www.mysite.com/connect.php?message=hi"

```

从调试断点开始，我希望 serverOutput 说“OK”，但它是空白的，我相信这意味着它没有与我的 PHP 连接。感谢您对如何解决此问题的帮助。

```
<?php
// Connecting, selecting database
$link = mysql_connect("localhost", "user", "password")
or die('Could not connect: ' . mysql_error());

mysql_select_db("mydb") or die('Could not select database');

// Performing SQL query
$query = "INSERT INTO messages (message,date) VALUES ('$_GET["message"]',NOW())";
$result = mysql_query($query) or die('Query failed: ' . mysql_error());

echo "OK";

// Free resultset
mysql_free_result($result);

// Closing connection
mysql_close($link);
?> 
```

iPhone 代码

```
- (IBAction)postmessage:(id)sender {

self.message = self.messageField.text;
NSString *messageString = self.message;
UIAlertView *alertsuccess;

 //construct an URL for your script, containing the encoded text for parameter value
NSURL* url = [NSURL URLWithString:
 [NSString stringWithFormat:
 @"http://www.mysite.com/connect.php?message=%@",messageString]];

NSData *dataURL =  [NSData dataWithContentsOfURL:url];
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

if([serverOutput isEqualToString:@"OK"]) {

   alertsuccess = [[UIAlertView alloc] initWithTitle:@"Posted" message:@"Done"
                                                          delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

} else {
    alertsuccess = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Done"
                                                          delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

}
[alertsuccess show];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:31:09.313

错误在这里`$query = "INSERT INTO messages (message,date) VALUES ('$_GET["message"]',NOW())";`

应该

```
$query = "INSERT INTO messages (message,date) VALUES ('" . $_GET["message"] . "', NOW())"; 
```

或者

```
$query = "INSERT INTO messages (message,date) VALUES ('${_GET["message"]}', NOW())"; 
```

# security - 我可以安全地分发散列密码吗？

> ID：11715522
> 
> 赞同：0
> 
> 时间：2012-07-30T04:46:53.540
> 
> 标签：security, sha

我有一个应用程序，其源代码已检入公共存储库。此源代码包含配置文件，这些配置文件中包含 SHA-256 散列密码。

我的理解是，当涉及到散列密码时，最终用户实际上不必输入您用于生成散列的密码，而是*任何*生成相同散列值的密码。我相信这被称为碰撞。

那么，我是否可以公开显示我的散列密码，并合理保证某人无法获取该散列，然后生成可用于访问我的应用程序的密码（或生成一个集合）？这是这些散列算法试图做出的保证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:49:27.453

在一般情况下，没有已知的针对 SHA-2 的实际攻击。不过，通常认为对散列密码保密更好，因为存在*彩虹*表、字典攻击和其他类似的事情。如果您采取了适当的预防措施，例如加盐、循环散列和拥有一个漂亮的长密码，它*应该*是完全安全的。

不过，最好不要这样做。你永远不知道未来可能会发展出什么样的加密攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:56:23.893

有人不太可能反转 HASH、SHA1、SALT 等。有一些方法可以反转一个，但如果你认为你有那么大的风险，我会使用 SHA1 和 SALT 以获得最大的安全性。密码很长，很难逆转，但除非他们是真正经验丰富的编码人员，否则你不太愿意成为它的受害者。

阅读 Wikipedia 上的算法...

SHA1：[http ://en.wikipedia.org/wiki/SHA-1](http://en.wikipedia.org/wiki/SHA-1)

SALT：[http](http://en.wikipedia.org/wiki/Salt_(cryptography) ://en.wikipedia.org/wiki/Salt_(密码学)

只需使用唯一的密码就可以了；-)

# node.js - 使用 node.js 即时创建页面/路由

> ID：11715523
> 
> 赞同：0
> 
> 时间：2012-07-30T04:46:56.387
> 
> 标签：node.js

是否可以使用 node.js 动态创建页面（路由）？

假设我在 create-route.html 文件 ( localhost:4001/create-route ) 上的表单中有一个简单的文本输入，我要输入“my-page”，然后这会将我带到一个带有 url 的新视图localhost:4001/my-page 显示成功消息。

我不太确定这是否可行，因为我也不确定哪些节点模块将允许客户端访问 createServer 对象并对其进行操作。环顾 'Express' 经常被引用为 routing ，但在查看框架之前，我很想看看这是否可能仅在 Node 中实现。

任何帮助表示赞赏，谢谢。

**网络服务器.js**

```
var http = require('http')
, url = require('url')
, fs = require('fs')
, server;

// declare http object
server = http.createServer(function(req,res){

  // parse the pathname as a url, get the trimmed route from the request
  var path = url.parse(req.url).pathname;

  // handle the various routes
  switch(path){

    case '/':
      fs.readFile(__dirname + '/index.html', function (err, data) {
        if (err) throw err;
        res.writeHead(200, {'Content-Type': 'text/html'});
        res.write(data, 'utf8');
        res.end();
      });

    case '/create-route':
        fs.readFile(__dirname + '/create-route.html', function (err, data) {
        if (err) throw err;
        res.writeHead(200, {'Content-Type': 'text/html'});
        res.write(data, 'utf8');
        res.end();
    });

    // example of dynamically created 'route'
    // "value' indicates the name that was inputted into the for on create-route.html, which in this case should be "my-page"

    case '/value':
        if (err) {throw err;}
        var body = "<html>" + 
            "<head>" +
            "<meta http-equiv='Content-Type' content='text/html'" +
            "charset=UTF-8 />" +
            "</head>" +
            "<body>" +
            "<p>youve just created a page called " + value + "</p>" +
            "</body>" +
            "</html>";
        res.writeHead(200, {"Content-Type": "text/html"});
        res.write(body);
        res.end();
    });

    break;

    default: send404(res);
  }
}); 
```

**创建-route.html**

```
<html>
<head>
    <title>Create a route</title>
</head>
<body>
    <form action="/go-to-the-created-route">
        <label>Enter a route name:</label>
        <input type="text" name="create-route" id="create-route">
        <button type="submit">Submit</button>
    </form>
</body>
</html> 
```

**根据反馈更新路线**

这是根据@penartur 反馈更新的“创建路线”路线。

```
// Define the go-to-created-route
routes["go-to-created-route"] = function (req, res) {

// get the request url and split it to get the inputted value
var reqPath = req.url;
var splitPath = reqPath.split("=");
var routeName = splitPath[(splitPath.length - 1)]; // outputs the value entered into text input
//console.log(routeName); 

// create the new route by passing in the value of routeName, and display a page
routes[routeName] = function (req, res) {

// Not getting in here :(
    console.log("hello?");

    var body = "<html>" + 
        "<head>" +
        "<meta http-equiv='Content-Type' content='text/html'" +
        "charset=UTF-8 />" +
        "</head>" +
        "<body>" +
        "<p>youve just created a page called " + routeName + "</p>" +
        "</body>" +
        "</html>";
     res.writeHead(200, {"Content-Type": "text/html"});
     res.write(body);
     res.end();
};
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:12:54.430

这是一个简单的编程问题，与具体的 Node.js 没有太大关系。解决方案草案：

```
var http = require('http')
, url = require('url')
, fs = require('fs')
, server;

var routes = {};

routes["create-route"] = function (req, res) {
    fs.readFile(__dirname + '/create-route.html', function (err, data) {
        if (err) throw err;
        res.writeHead(200, {'Content-Type': 'text/html'});
        res.write(data, 'utf8');
        res.end();
    });
};

routes["go-to-the-created-route"] = function (req, res) {
    var routeName = req.body["create-route"];
    routes[routeName] = function (req, res) {
        var body = "<html>" + 
            "<head>" +
            "<meta http-equiv='Content-Type' content='text/html'" +
            "charset=UTF-8 />" +
            "</head>" +
            "<body>" +
            "<p>youve just created a page called " + routeName + "</p>" +
            "</body>" +
            "</html>";
        res.writeHead(200, {"Content-Type": "text/html"});
        res.write(body);
        res.end();
    };
};

// declare http object
server = http.createServer(function(req,res){

    // parse the pathname as a url, get the trimmed route from the request
    var path = url.parse(req.url).pathname;

    var firstPart = path.split('/')[1];
    if (routes.hasOwnProperty(firstPart)) {
        routes[firstPart](req, res);
    } else {
        send404(res);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-31T06:00:52.900

```
var http = require('http');

http.createServer(function(req,res){

var path = req.url.replace(/\/?(?:\?.*)?$/, '').toLowerCase();

switch(path) {
    case '':
        res.writeHead(200, { 'Content-Type': 'text/plain' });
        res.end('Homepage');
        break;
    case '/getapi':
        res.writeHead(200, { 'Content-Type': 'text/html' });
        res.end('<div>Hello world!</div>');
    break;
    default:
        res.writeHead(404, { 'Content-Type': 'text/html' });
        res.end('Not Found');
    break;
}

}).listen(4000); 
```

# javascript - 获取适用于外部 JavaScript 文件 (.js) 的代码提示

> ID：11715526
> 
> 赞同：2
> 
> 时间：2012-07-30T04:47:34.503
> 
> 标签：javascript, jquery, visual-studio

我想知道如何将 jquery 导入 .js 文件。我希望能够使用代码提示（智能），但鉴于这是一个单独的文件，我不能这样做。也许我不必导入，但有什么办法得到

```
$().[hint] 
```

显示在独立的 .js 文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T05:09:00.690

把它放在你的 js 文件的开头

```
/// <reference path="/js/jquery.js" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:56:03.957

这是 microsoft 关于 javascript 智能感知的页面：http: [//msdn.microsoft.com/en-us/library/bb385682.aspx](http://msdn.microsoft.com/en-us/library/bb385682.aspx)

我已经使用了他们的格式，并且通常效果很好。jQuery 有一个导出（jquery-[version]-vsdoc.js 或类似的东西），您可以将其放在 Scripts 目录中。

然后你`///<reference path="path/to/jquery-[version].js" />`在你的脚本顶部添加，一切似乎都正常（对于大多数事情）。

架构上的文档非常有限，但我创建了架构外观的粗略 XSD（VS 并没有选择他们声称支持的所有东西）

编辑：如果您为 VS2010 安装 SP1，您应该获得对 JS 智能感知的最新支持。如果没有，微软有一个扩展来支持它。要获取上面提到的-vsdoc.js文件，最简单的方法是通过nuget来获取

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <!-- Schema is based on http://weblogs.asp.net/bleroy/archive/2007/04/23/the-format-for-javascript-doc-comments.aspx -->
  <!-- para tags are not specced on that page but are included as part of the VS JScript Editor Extensions -->
  <!-- The "End" tag is a wrapper tag so I can make a valid document -->
  <xs:element name="End">
    <xs:complexType>
      <xs:choice>
        <xs:element name="reference" minOccurs="0" maxOccurs="unbounded" type="referenceType"/>
        <xs:sequence>
          <xs:element name="summary" type="TextContent"/>
          <xs:element name="param" minOccurs="0" maxOccurs="unbounded" type="ParamNamedTypedTextContent" />
          <xs:element name="field" minOccurs="0" maxOccurs="unbounded" type="NamedTypedTextContent" />
          <xs:element name="returns" minOccurs="0" maxOccurs="1" type="TypedTextContent" />
        </xs:sequence>
      </xs:choice>
    </xs:complexType>
  </xs:element>

  <xs:complexType name="referenceType">
    <xs:attribute name="path" type="xs:string" use="required" />
    <xs:attribute name="assembly" type="xs:string" use="optional" />
    <xs:attribute name="name" type="xs:string" use="optional" />
  </xs:complexType>

  <xs:complexType name="TextContent" mixed="true">
    <xs:sequence>
      <xs:element name="para" minOccurs="0" maxOccurs="unbounded" type="xs:string" />
    </xs:sequence>
    <xs:attribute name="locid" type="xs:string" use="optional" />
  </xs:complexType>

  <xs:complexType name="TypedTextContent">
    <xs:complexContent>
      <xs:extension base="TextContent">
        <xs:attribute name="type" type="xs:string" use="optional" />
        <xs:attribute name="elementType" type="xs:string" use="optional" />
        <xs:attribute name="integer" type="xs:boolean" use="optional" />
        <xs:attribute name="mayBeNull" type="xs:boolean" use="optional" />
        <xs:attribute name="domElement" type="xs:boolean" use="optional" />
        <xs:attribute name="elementInteger" type="xs:boolean" use="optional" />
        <xs:attribute name="elementDomElement" type="xs:boolean" use="optional" />
        <xs:attribute name="elementMayBeNull" type="xs:boolean" use="optional" />
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="NamedTypedTextContent">
    <xs:complexContent>
      <xs:extension base="TypedTextContent">
        <xs:attribute name="name" type="xs:string" use="required" />
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="ParamNamedTypedTextContent">
    <xs:complexContent>
      <xs:extension base="NamedTypedTextContent">
        <xs:attribute name="optional" type="xs:boolean" use="optional" />
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

</xs:schema> 
```

EDIT2：这是我使用 VS intellisense 支持的标签编写的一些代码的示例：

```
function getDottedProperty(obj, dottedPropertyChain) {
    ///<summary>
    ///  <para>
    ///    Returns the property of the object given by the dotted property
    ///     chain.
    ///  </para>
    ///  <para>
    ///    Example:
    ///      GetDottedProperty(
    ///          { a: { b: { c: { d: 'hello' } } } },
    ///          'a.b.c.d'
    ///      )
    ///  </para>
    ///</summary>
    ///<param name="obj" type="Object">Object</param>
    ///<param name="dottedPropertyChain" type="String">
    ///  The string of properties to access.
    ///</param>

    var propertySplits = dottedPropertyChain.split('.');
    while (propertySplits.length) {
        obj = obj[propertySplits.shift()];
    }

    return obj;
} 
```

# php - CakePHP 2.0 上的服务器内部错误 500

> ID：11715527
> 
> 赞同：2
> 
> 时间：2012-07-30T04:47:41.507
> 
> 标签：php, mysql, cakephp, cakephp-2.0, internal-server-error

我在我的网站框架中使用 CakePHP 2.0，我在服务器上找到了我的 cakephp 文件，但我有一些问题，名为服务器内部错误 500，我不知道我应该做什么，其他页面运行良好，但有些pages遇到500服务器内部错误，我检查了控制器，视图，模型，他们说没有检测到错误，但是萤火虫说，视图丢失，这是我的`.htaccess`文件

public_html/cakephp/

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteBase /~magang/smkn1pst/
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

public_html/cakephp/app

```
 <IfModule mod_rewrite.c>
        RewriteEngine on
        RewriteRule    ^$    webroot/    [L]
        RewriteRule    (.*) webroot/$1    [L]
   </IfModule> 
```

public_html/cakephp/app/webroot

```
<IfModule mod_rewrite.c>
       RewriteEngine On
       RewriteBase /~magang/smkn1pst/
       RewriteCond %{REQUEST_FILENAME} !-d
       RewriteCond %{REQUEST_FILENAME} !-f
       RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
</IfModule> 
```

我已经按照步骤添加了`/`ex: app/webroot/ 到 /app/webroot/ 和 webroot/ 到 /webroot/ 但仍然不适用于我，我需要进入下一个项目，但这个问题困扰着我.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:26:50.043

您正在使用 mod_userdir，使用时确实需要 RewriteBase，因为 mod_rewrite 删除了 ~ 字符

```
RewriteBase /~magang/smkn1pst 
```

在所有 3 个 .htaccess 文件中应该可以工作，就像对我一样

目前您的一个文件缺少这一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:09:58.537

这应该有助于解决您的错误。

[http://ask.cakephp.org/questions/view/getting_http_1_0_500_internal_server_error_in_my_cakephp_website](http://ask.cakephp.org/questions/view/getting_http_1_0_500_internal_server_error_in_my_cakephp_website)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:03:22.593

我不确定请尝试

```
RewriteBase /smkn1pst/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:34:00.207

我有一个类似的问题（静态文件在根 htaccess 中使用正确的 RewriteBase 正确重定向）。

结果证明（在调试 .htaccess 4 小时后）我的 FTP 客户端跳过了 app/tmp/ 目录，因为我自己添加了一条规则。

这也产生了 500 错误。

# php - phpactiverecord ORM事务30秒错误执行时间

> ID：11715531
> 
> 赞同：0
> 
> 时间：2012-07-30T04:48:04.627
> 
> 标签：php, orm, phpactiverecord

好吧，我正在尝试将几行从 csv 文件插入到 myslDB，我的第一次尝试（错误的方法）是尝试使用 $o = new Model(); 插入创建一个新对象；

在网上阅读/研究后，我看到我需要使用事务，现在我正在使用 phpactiverectord ORM，这是我的代码：

但仍然有 30 秒的致命错误

```
try{
    if (($handle = fopen("somefile.csv", "r")) !== FALSE) {
            while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
                    $someid = $data[4];
                    Usuario::transaction(function() use ($someid){
                     Usuario::create(array("matricula" => $someid));
                 });
            }
            fclose($handle);
    } 
```

}

我认为我以错误的方式对交易进行编码，但我不知道该怎么做。需要一些帮助。实际上插入工作我需要的是在发生 30 秒错误之前插入所有内容，我的数据库在 godaddy 顺便说一句。

谢谢

*   编辑 - 这是用 set_time_limit 函数解决的不是事务问题。也许这个问题可以为其他人工作，我会离开它。

# c# - 如何在 XML 文件中检索满足特定条件的数据？

> ID：11715533
> 
> 赞同：-1
> 
> 时间：2012-07-30T04:48:16.063
> 
> 标签：c#

我有一个 XML 文件，我想从以下 XML中检索`brandname` 时间。`brandcode``001`

```
 <Root>
-   <data>
  <Companycode>TF</Companycode> 
  <Productcode>00001</Productcode> 
  <Productname>VPU</Productname> 
  <Brandcode>001</Brandcode> 
  <Brandname>DB</Brandname> 
  </data>
- <data>
  <Companycode>TF</Companycode> 
  <Productcode>00002</Productcode> 
  <Productname>SENDERCARD</Productname> 
  <Brandcode>002</Brandcode> 
  <Brandname>LINSN</Brandname> 
  </data>
</Root> 
```

这是我的代码；我需要在这里指定品牌名称：

```
XmlTextReader textReader = new XmlTextReader(@"codedata.xml");
            textReader.Read();

            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load(textReader);

            XmlNodeList BCode = xmlDoc.GetElementsByTagName("Brandcode");
            XmlNodeList BName = xmlDoc.GetElementsByTagName("Brandname");
            for (int i = 0; i < BCode.Count; i++)
            {
                if (BCode[i].InnerText =="001")
                {
                    string brandname = BName[i].InnerText;
                }
                    //Console.WriteLine(BName[i].InnerText);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:11:13.387

试试这种方式...

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace XmlReading
{
    class Program
    {
        static void Main(string[] args)
        {
            //Create an instance of the XmlTextReader and call Read method to read the file            
            XmlTextReader textReader = new XmlTextReader("D:\\myxml.xml");
            textReader.Read();

            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load(textReader);

            XmlNodeList BCode = xmlDoc.GetElementsByTagName("Brandcode");
            XmlNodeList BName = xmlDoc.GetElementsByTagName("Brandname");
            for (int i = 0; i < BCode.Count; i++)
            {
                if (BCode[i].InnerText == "001")
                    Console.WriteLine(BName[i].InnerText);                
            }

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:03:51.177

试试这个`XPath`：`//Brandname[../Brandcode[text()='001']]`

使用[`XmlDocument.SelectSingleNode`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.selectsinglenode)：

```
var document = new XmlDocument();
var Brandcode = "001";
var xpath = String.Format(@"//Brandname[../Brandcode[text()='{0}']]", 
                          Brandcode);
var Brandname = document.SelectSingleNode(xpath).InnerText; 
```

并使用[`XDocument.XPathSelectElement`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.xpathselectelement.aspx)：

```
var document = XDocument.Load("fileName");
var name = document.XPathSelectElement(xpath).Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T05:05:32.737

您可以使用 Xml.Linq 命名空间和 XDocument 类来加载并从 xml 文件中选择确切的元素：

```
XDocument doc = XDocument.Load(@"filePath");
var query = doc.Descendants("Root").Where(w => w.Element("Brandcode").Value == "001").Select(s => new { s.Element("Brandname").Value }).FirstOrDefault();
string brandname = query.Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:45:05.313

将品牌名称定义为字符串并将 null 分配给它，然后在您想要的任何地方使用品牌名称....

```
namespace XmlReading
{
    class Program
    {
        static void Main(string[] args)
        {
            //Create an instance of the XmlTextReader and call Read method to read the file            
            XmlTextReader textReader = new XmlTextReader("D:\\myxml.xml");
            textReader.Read();

            string brandname = null;

            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load(textReader);

            XmlNodeList BCode = xmlDoc.GetElementsByTagName("Brandcode");
            XmlNodeList BName = xmlDoc.GetElementsByTagName("Brandname");
            for (int i = 0; i < BCode.Count; i++)
            {
                if (BCode[i].InnerText == "001")
                {
                    brandname = BName[i].InnerText;                    
                }
            }
            Console.WriteLine(brandname);
            Console.ReadLine();
        }
    }
} 
```

# regex - 带有文件结尾的可选 JFlex 前瞻

> ID：11715535
> 
> 赞同：0
> 
> 时间：2012-07-30T04:48:34.660
> 
> 标签：regex, fitnesse, jflex

我正在尝试使用 JFlex 为 Fitnesse 编写词法分析器，但在使用 WikiWords 时遇到了问题（http://fitnesse.org/FitNesse.UserGuide.WikiWord）

我复制了链接的正则表达式，并使用以下正则表达式作为令牌：

```
.                               # Regular character
[A-Z]([a-z0-9]+[A-Z][a-z0-9]*)+ # WikiWord 
```

不过，我在正确地进行词法分析时遇到了麻烦`ThisIsNotAWikiWord`。它连续有 2 个大写字母，因此不应将其视为常规单词。所以我需要添加一个前瞻来检查下一个字符是字母还是数字。类似的东西`[A-Z]([a-z0-9]+[A-Z][a-z0-9]*)+ / [^A-Za-z0-9]`。

这适用于 lexing `ThisIsNotAWikiWord`，但它通常会破坏 lexing WikiWords。当 lexing 时`WikiWord`，前瞻没有额外的字符，所以它不匹配。

我想我想要一个可选的前瞻。如果在此之后有一个字符，那么最好不要成为其中之一。但如果输入中没有其他字符，让我们匹配。

文档让我相信这是不可能的，但我希望这只是我缺乏正则表达式。从文档：

> 在词法规则中，正则表达式 r 可以后跟一个前瞻表达式。前瞻表达式可以是“$”（行尾运算符）或“/”后跟任意正则表达式。在这两种情况下，前瞻都不会被消耗，也不会包含在匹配的文本区域中，但在确定哪个规则具有最长匹配时会考虑它（另请参见 4.3.3 如何匹配输入）。
> 
> 在 '$' 的情况下， r 仅在输入的行尾匹配。行尾由正则表达式 \r|\n|\r\n|\u2028|\u2029|\u000B|\u000C|\u0085 表示。所以a$等价于a / \r|\n|\r\n|\u2028|\u2029|\u000B|\u000C|\u0085。这与[5]中描述的情况有点不同：因为在JFlex $ 是一个真正的尾随上下文，文件结尾不计为行尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:39:56.147

环顾四周，这里似乎不需要什么东西。

据我了解，您正在寻找以大写字母开头但可以包含数字的驼峰式单词，其中数字算作小写字母，并且每个驼峰凸点只能是一个大写字母。如果这是正确的，这个正则表达式应该适合你：

```
\b((?:[A-Z][a-z\d]+){2,})\b 
```

该`(?:`部分使括号不被捕获。

`[A-Z][a-z\d]+`确保**恰好一个**大写字符后跟**至少一个**小写字符。

`{2,}`强制模式至少重复两次，以便至少产生一个驼峰。

# android - 安卓：java.lang.ClassNotFoundException

> ID：11715538
> 
> 赞同：0
> 
> 时间：2012-07-30T04:48:56.360
> 
> 标签：android, eclipse, classnotfoundexception

我对 android 编程相当陌生，我正在研究我购买的书中的一个示例，但是他们向我展示如何制作的示例应用程序中出现了错误。到目前为止它非常简单，但到目前为止我收到以下错误：

```
07-30 04:36:59.265: W/System.err(540): java.lang.ClassNotFoundException: com.sanbox.basicsstarter.LifeCycleTest
07-30 04:36:59.285: W/System.err(540):  at java.lang.Class.classForName(Native Method)
07-30 04:36:59.285: W/System.err(540):  at java.lang.Class.forName(Class.java:217) 
```

我的代码实际上是在 3 个单独的文件上，第一个是调用 AndroidBasicsStarterActivity 的主要活动：

```
package com.sandbox.basicsstarter;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.util.Log;

public class AndroidBasicsStarterActivity extends ListActivity {
String tests[] = { "LifeCycleTest", "SingleTouchTest", "MultiTouchTest",
"KeyTest", "AccelerometerTest", "AssetsTest",
"ExternalStorageTest", "SoundPoolTest", "MediaPlayerTest",
"FullScreenTest", "RenderViewTest", "ShapeTest", "BitmapTest",
"FontTest", "SurfaceViewTest" };
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_1, tests));
}

private void log(String text) {
    Log.d("LifeCycleTest ", text);
}

@Override
protected void onListItemClick(ListView list, View view, int position,
    long id) {
        super.onListItemClick(list, view, position, id);
        String testName = tests[position];
        log(testName);
    try {
        Class clazz = Class.forName("com.sanbox.basicsstarter." + testName);

        Intent intent = new Intent(this, clazz);
        startActivity(intent);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
}
} 
```

然后是 LifeCycleTest 类：

```
package com.sandbox.basicsstarter;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class LifeCycleTest extends Activity {
StringBuilder builder = new StringBuilder();
TextView textView;
private void log(String text) {
    Log.d("LifeCycleTest", text);
    builder.append(text);
    builder.append('\n');
    textView.setText(builder.toString());
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    textView = new TextView(this);
    textView.setText(builder.toString());
    setContentView(textView);
    log("created");
}
@Override
protected void onResume() {
    super.onResume();
    log("resumed");
}
@Override
protected void onPause() {
        super.onPause();
        log("paused");
    if (isFinishing()) {
        log("finishing");
    }
}
} 
```

最后是清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sandbox.basicsstarter"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".AndroidBasicsStarterActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:label="Life Cycle Test"
        android:name=".LifeCycleTest"
        android:configChanges="keyboard|keyboardHidden|orientation" />
</application>

</manifest> 
```

那么谁能帮我弄清楚我的错误发生在哪里？我已经尝试清理项目，但这并没有解决任何问题。非常感谢任何可能的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:54:06.313

执行此操作以启动活动：

```
Intent intent = new Intent(this, LifeCycleTest.class); 
```

无需使用查找类`Class.forName`

**编辑**

找不到类的原因是你拼错了包。

应该是`com.sandbox.basicsstarter`。您省略了`d`沙箱中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:55:17.493

你开始你的方式`Activity`是一种奇怪的IMO，但如果你坚持这样做，你为什么不直接使用a`Class[] tests`呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:55:19.837

像这样创建意图

```
Intent intent = new Intent(AndroidBasicsStarterActivity .this, LifeCycleTest.class);
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T08:54:58.460

如果您坚持通过 Class.forName 方法检索您的类，请尝试以下操作：

```
Class <?> clazz = Class.forName ( this.getPackageName() + "." + testName);

Intent intent = new Intent ( this , clazz ); 
```

# iphone - 如何在单个循环中添加多个文本字段？

> ID：11715539
> 
> 赞同：0
> 
> 时间：2012-07-30T04:49:08.870
> 
> 标签：iphone, ios, textfield

我想在一个循环中添加多个 UITextField。并在用户与 UITextFields 交互时识别它们。所以请帮助我。

谢谢

目前我将 UITextField 单独放置，像这样

```
txt_FirstName=[[UITextField alloc]initWithFrame:CGRectMake(framex1, framey1, framex2, framey2)];
txt_FirstName.borderStyle = UITextBorderStyleRoundedRect;
txt_FirstName.font = [UIFont systemFontOfSize:15];
txt_FirstName.placeholder = @"First Name";
txt_FirstName.autocorrectionType = UITextAutocorrectionTypeNo;
txt_FirstName.keyboardType = UIKeyboardTypeDefault;
txt_FirstName.returnKeyType = UIReturnKeyDone;
txt_FirstName.clearButtonMode = UITextFieldViewModeWhileEditing;
txt_FirstName.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
txt_FirstName.delegate = self;
[frameView addSubview:txt_FirstName];
[txt_FirstName release];

framey1=framey1+50;

txt_MiddleName=[[UITextField alloc]initWithFrame:CGRectMake(framex1, framey1, framex2, framey2)];
txt_MiddleName.borderStyle = UITextBorderStyleRoundedRect;
txt_MiddleName.font = [UIFont systemFontOfSize:15];
txt_MiddleName.placeholder = @"Middle Name";
txt_MiddleName.autocorrectionType = UITextAutocorrectionTypeNo;
txt_MiddleName.keyboardType = UIKeyboardTypeDefault;
txt_MiddleName.returnKeyType = UIReturnKeyDone;
txt_MiddleName.clearButtonMode = UITextFieldViewModeWhileEditing;
txt_MiddleName.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
txt_MiddleName.delegate = self;
[frameView addSubview:txt_MiddleName];
[txt_MiddleName release]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T04:53:46.810

请使用它，但在您的 .h 文件中实现 UITextField 委托。但您应该根据您的要求更改占位符，例如 1 代表名字，2 代表中间名等。

首先创建这样的通用功能，

```
-(void)setTextfieldStyle:(UITextField *)pTmpTextField
{
        pTmpTextField.borderStyle = UITextBorderStyleRoundedRect;
        pTmpTextField.font = [UIFont systemFontOfSize:15];
        pTmpTextField.placeholder = @"First Name";
        pTmpTextField.autocorrectionType = UITextAutocorrectionTypeNo;
        pTmpTextField.keyboardType = UIKeyboardTypeDefault;
        pTmpTextField.returnKeyType = UIReturnKeyDone;
        pTmpTextField.clearButtonMode = UITextFieldViewModeWhileEditing;
        pTmpTextField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
        pTmpTextField.delegate = self;
} 
```

并使用它来创建 UITextFiled，

```
int y = 0;
for(int i=0;i < 5;i++)
{
    UITextField *txtTemp=[[UITextField alloc]initWithFrame:CGRectMake(0, y, 300, 31)];
    txtTemp.tag = i;
    [self setTextfieldStyle:txtTemp];
    [self.view addSubview:txtTemp];
    [txtTemp release];
    y+=36;
} 
```

这是 UITextField 的委托方法，

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    NSLog(@"%@",textField.text);
} 
```

希望这对你有用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:32:15.563

如果您想在循环中设置一堆文本字段的属性，您还可以执行以下操作：

```
NSMutableArray* allTextFields = [NSMutableArray array];

// create the textFields here, I'm assuming you need to keep individual
// references to them.
txt_FirstName=[[UITextField alloc]init];
pTmpTextField.placeholder = @"First Name";
[allTextFields addObject:txt_FirstName];

// now add the common style stuff and frame
[allTextFields enumerateObjectsUsingBlock:^(UITextField* textField, NSUInteger idx, BOOL* stop) {
    textField.frame = CGRectMake(framex1, framey1 + ( 50 * idx), framex2, framey2);
    textField.borderStyle = UITextBorderStyleRoundedRect;
    textField.font = [UIFont systemFontOfSize:15];
    textField.placeholder = @"First Name";
    textField.autocorrectionType = UITextAutocorrectionTypeNo;
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
    textField.delegate = self;
}]; 
```

# iphone - 如何实现 InApp 购买的自动续费订阅？

> ID：11715547
> 
> 赞同：2
> 
> 时间：2012-07-30T04:50:37.390
> 
> 标签：iphone, objective-c, ios5, in-app-purchase, auto-renewing

我在 InApp 中实现了非消耗性订阅。它工作正常。它显示警报，`You have already purchased blah blah`但我认为这是因为我有测试用户帐户。

当我尝试使用相同的方法实现自动更新时，它`FailedTransaction`每次都会使用方法。有错误`Cannot connect to iTunes Store" UserInfo=0x11a190 {NSLocalizedDescription=Cannot connect to iTunes Store}`

如果还有其他方法可以做，请重定向我。[我从这个SO question](https://stackoverflow.com/questions/5329336/in-app-auto-renewable-subscriptions)中得到了很好的步骤，但没有得到任何关于它应该如何实现的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:18:35.513

这将解决您对自动更新订阅的所有困惑[https://github.com/MugunthKumar/MKStoreKit](https://github.com/MugunthKumar/MKStoreKit)

# php - 服务盐如何工作？

> ID：11715548
> 
> 赞同：0
> 
> 时间：2012-07-30T04:50:37.847
> 
> 标签：php, passwords, salt, bcrypt

我想知道服务盐是如何工作的。我知道如何加密密码并给每个用户一个唯一的盐。但我听说你还可以通过食用盐添加另一层。我只是好奇它是如何工作的。这与为用户生成的唯一盐有什么区别？

这是我看到术语服务盐的地方：[Web 应用程序 - 存储密码](https://stackoverflow.com/questions/6464662/web-application-storing-a-password/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:05:17.977

> “如果盐足够大，使用加盐密码的好处是使查找表辅助字典攻击对存储的值不切实际。也就是说，攻击者将无法创建预先计算的查找表（即彩虹表） ) 的散列值（密码 + 盐），因为它会占用太多空间。一个简单的字典攻击仍然很有可能，尽管速度慢得多，因为它不能被预先计算。

来源：[http](http://en.wikipedia.org/wiki/Salt_(cryptography) ://en.wikipedia.org/wiki/Salt_(密码学)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:47:48.723

[“服务盐”（在您引用的问题](https://stackoverflow.com/questions/6464662/web-application-storing-a-password/)中被描述为“站点范围的静态盐”，在加密文献中有时也称为[“胡椒”](https://security.stackexchange.com/questions/3272/password-hashing-add-salt-pepper-or-is-salt-enough)）只是一个秘密字符串，它与密码和密码一起提供给密码哈希算法每个用户唯一的盐。

拥有这样的“服务盐”的意义在于，与每个用户的盐值不同，服务盐*不*存储在数据库中，而是存储在其他地方（通常在配置文件中，或硬编码到应用程序中）。因此，它可以保护密码免受*仅*破坏数据库但不允许攻击者访问应用程序配置的攻击。对于现代 Web 应用程序，这种攻击场景并不像看起来那么不可能；例如，简单的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击通常适合这种情况。

要记住的一个细节是，与每个用户的盐不同，它只需要是唯一的并且不太容易预测，“胡椒”实际上必须包含大量的[熵](http://en.wikipedia.org/wiki/Entropy_%28information_theory%29)（例如，128 位）并且必须是保密，以备不时之需。

在任何情况下，在密码哈希计算中包含这样一个秘密常量非常容易，所以没有理由*不*这样做：即使您的密码哈希算法没有明确支持它，您也可以说，附加 "辣椒”到每个密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T04:54:00.777

盐可以防止对彩虹表进行反向检查，这些彩虹表旨在轻松破解密码。“盐”将容易破解的东西转换成黑客更难解密的东西。

我强烈建议你玩弄这个 api； [http://www.openwall.com/phpass/](http://www.openwall.com/phpass/)

无需成为安全专家，它就可以为您完成所有细节的密码生成。此外，它还内置了后备功能，可与较旧/较弱的系统一起使用。

# c# - 在 c#/xaml Metro 应用程序中使用序列化合并文本文件和 mp3 文件

> ID：11715554
> 
> 赞同：0
> 
> 时间：2012-07-30T04:52:09.917
> 
> 标签：c#, xaml, serialization, microsoft-metro, windows-runtime

我正在开发一个笔记应用程序，用户将在其中录制音频并进行一些文本输入。最后，我将拥有一个 .txt 文件和另一个 .mp3 文件。现在我想将这两个文件合并到一个文件中。此外，当用户打开该单个文件时，我还需要将这两个文件分开。所以我该怎么做 ？我应该使用 XML 序列化，因为 WinRT 中没有二进制序列化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:58:11.167

除非我在您的问题中遗漏了某些内容，否则一些选项包括：

1.  使用 zip 文件（或其他容器）
2.  在 Base 64 中编码 mp3 并将其作为字符串发送（XML 在这里可以很好地工作）
3.  将文本放在 mp3 标题标签之一中
4.  创建包含 mp3 数据和文本数据的新文件格式
5.  使用多部分 MIME，就像发送附件时的电子邮件一样

# javascript - 在jquery中验证数字

> ID：11715555
> 
> 赞同：2
> 
> 时间：2012-07-30T04:52:10.840
> 
> 标签：javascript, validation

我尝试在 jquery 中检查非负数。如果不是数字，我的函数可以工作，但对于零和非负数，它不起作用。这是我的示例小提琴。
[小提琴示例](http://jsfiddle.net/AvZJ8/4/)
无法找到我的错误。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:15:53.480

[DEMO](http://jsfiddle.net/mplungjan/VvsW3/)怎么样（注意：错误消息是 OP 自己的）

```
$('#txtNumber').keyup(function() {
    var val = $(this).val(), error ="";
    $('#lblIntegerError').remove();
    if (isNaN(val)) error = "Value must be integer value."
    else if (parseInt(val,10) != val || val<= 0) error = "Value must be non negative number and greater than zero";
    else return true;
    $('#txtNumber').after('<label class="Error"  id="lblIntegerError"><br/>'+error+'</label>');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:09:38.037

这应该有效：

```
$('#txtNumber').keyup(function() {
    var num = $(this).val();
    num = new Number(num);
    if( !(num > 0) )
        $('#txtNumber').after('<label class="Error"  id="lblIntegerError"><br/>Value must be non negative number and greater than zero.</label>');
}); 
```

**注意：**如果第`parseInt()`一个字符是数字，则忽略无效字符，但`Number()`也会处理它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T05:10:50.190

```
$('#txtNumber').keyup(function() 
{
    $('#lblIntegerError').remove();
    if (!isNaN(new Number($('#txtNumber').val())))
    {
        if (parseInt($('#txtNumber').val()) <=0) 
        {
              $('#txtNumber').after('<label class="Error"  id="lblIntegerError"><br/>Value must be non negative number and greater than zero.</label>');
            return false;
        }

    }
    else
     {
          $('#txtNumber').after('<label class="Error"  id="lblIntegerError"><br/>Value must be integer value.</label>');
            return false;
        }
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T04:56:27.463

```
if (isNaN($('#txtColumn').val() <= 0)) 
```

那是不对的..

您需要将值转换为整数，因为您正在检查整数

```
var intVal = parseInt($('#txtColumn').val(), 10);  // Or use Number()

if(!isNaN(intVal) || intVal <= 0){
   return false;
} 
```

# php - 停止在 iPad 上重定向移动网站

> ID：11715556
> 
> 赞同：1
> 
> 时间：2012-07-30T04:52:31.243
> 
> 标签：php, user-agent

我必须有两个站点，一个是我的主站点，另一个是移动站点。这是我在移动设备中使用时用于在移动设备上重定向站点的脚本。现在我想忽略 iPad 的移动网站重定向。我已经使用了这个脚本，但它没有忽略 iPad，它仍然在 Ipad 上的移动网站上重定向，我不想要这个。请帮忙。

```
 <?php
    function check_user_agent ( $type = NULL ) {
            $user_agent = strtolower ( $_SERVER['HTTP_USER_AGENT'] );
            if ( $type == 'bot' ) {
                    // matches popular bots
                    if ( preg_match ( "/googlebot|adsbot|yahooseeker|yahoobot|msnbot|watchmouse|pingdom\.com|feedfetcher-google/", $user_agent ) ) {
                            return true;
                            // watchmouse|pingdom\.com are "uptime services"
                    }
            } else if ( $type == 'browser' ) {
                    // matches core browser types
                    if ( preg_match ( "/mozilla\/|opera\//", $user_agent ) ) {
                            return true;
                    }
            } else if ( $type == 'mobile' ) {
                    // matches popular mobile devices that have small screens and/or touch inputs
                    // mobile devices have regional trends; some of these will have varying popularity in Europe, Asia, and America
                    // detailed demographics are unknown, and South America, the Pacific Islands, and Africa trends might not be represented, here

                   if( preg_match ( "/iPad/", $user_agent )) {
                            return false;
                    }  else if ( preg_match ( "/phone|iphone|itouch|ipod|symbian|android|htc_|htc-|palmos|blackberry|opera mini|iemobile|windows ce|nokia|fennec|hiptop|kindle|mot |mot-|webos\/|samsung|sonyericsson|^sie-|nintendo/", $user_agent ) ) {
                            // these are the most common
                            return true;
                    } else if ( preg_match ( "/mobile|pda;|avantgo|eudoraweb|minimo|netfront|brew|teleca|lg;|lge |wap;| wap /", $user_agent ) ) {
                            // these are less common, and might not be worth checking
                            return true;
                    }
            }
            return false;
    }
    $ismobile = check_user_agent('mobile');
    if($ismobile) {
    header('Location:mobiles_site_url');
    } 
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:12:38.290

您`strtolower()`在用户代理字符串上使用过，检查“iPad”的第一行中有一个大写字母。

尝试：

```
if( preg_match ( "/ipad/", $user_agent )) {  // all lower case
    ....
} 
```

# python - 如何在plone中编辑使用uwosh.pfg.d2c适配器保存的数据条目？

> ID：11715557
> 
> 赞同：0
> 
> 时间：2012-07-30T04:52:33.597
> 
> 标签：python, plone, ploneformgen

我已经使用 ploneformgen 来创建输入表单。当我尝试使用编辑选项卡在表单中使用 uwosk.pfg.d2c 适配器编辑保存的数据条目时，出现以下错误：

```
<FSControllerPythonScript at /MySite/update_version_on_edit used for /MySite/materials-requirement/material-requirement-form/requirement-for-approval/trial>
    Line 11
    Module Products.CMFEditions.utilities, line 109, in isObjectChanged
    Module Products.CMFEditions.CopyModifyMergeRepositoryTool, line 415, in isUpToDate
    Module Products.CMFEditions.ArchivistTool, line 396, in isUpToDate
    Module Products.CMFEditions.ZVCStorageTool, line 308, in getModificationDate
    Module Products.Archetypes.ExtensibleMetadata, line 455, in modified
    Module Products.Archetypes.BaseObject, line 237, in getField
    Module Products.Archetypes.BaseObject, line 821, in Schema
    Module zope.component.hooks, line 104, in adapter_hook
    Module archetypes.schemaextender.extender, line 146, in cachingInstanceSchemaFactory
    Module archetypes.schemaextender.extender, line 186, in instanceSchemaFactory
    Module plone.memoize.instance, line 51, in memogetter
    Module uwosh.pfg.d2c.extender, line 217, in getFields
    Module uwosh.pfg.d2c.content.dataentry, line 39, in getForm
    Module uwosh.pfg.d2c.content.dataentry, line 53, in getFormAdapter
    Module Products.CMFCore.utils, line 123, in getToolByName
    AttributeError: uid_catalog 
```

如何修复此错误。我需要这些步骤，因为我使用 GUI 或仅 ZMI。我使用 plone 4.1、ploneformgen 1.7.1 和 d2c 适配器 2.1.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:51:36.653

看起来该产品与 CMFEditions 结合使用会中断。尝试编辑`uwosh.pfg.d2c.content.dataentry`以在顶部添加导入，然后更改第 53 行以`uid_catalog`通过不同的路线到达。

您需要先找到该文件；`uwosh.pfg.d2c`在`bin/instance`脚本中搜索。这会给你鸡蛋的位置。在 egg 中，找到文件`uwosh/pfg/d2c/content/dataentry.py`并在编辑器中打开它。

在顶部，与其他`import`语句一起，添加以下行：

```
from zope.app.component.hooks import getSite 
```

并更改第 54 行（原为第 53 行，但您在顶部添加了一行）；它当前显示：

```
catalog = getToolByName(self, 'uid_catalog') 
```

您更改`self`为`getSite()`使其读取的位置：

```
catalog = getToolByName(getSite(), 'uid_catalog') 
```

以这种方式改变鸡蛋是*不*便携的；您必须为站点的每次安装都这样做。如果上述更改对您有用，请将其报告给软件包的作者，以便在新版本中进行修复。

目前在包[问题跟踪器](http://plone.org/products/uwosh.pfg.d2c/issues/)中存在一个似乎相关的问题，请参阅[问题 7](http://plone.org/products/uwosh.pfg.d2c/issues/7)，您可以在其中跟进。或者，您可以在新的[GitHub 问题跟踪器中为此包提交工单](https://github.com/collective/uwosh.pfg.d2c/issues)。

^([是的，包作者 Nathan van Gheem 也经常光顾 Stack Overflow，但你不应该指望他在这里发现问题。在受支持的位置提交问题意味着更多的人也可以找到它并提供帮助])

# mysql - SQL：在 SUM 中添加一个 Distinct

> ID：11715560
> 
> 赞同：4
> 
> 时间：2012-07-30T04:53:00.973
> 
> 标签：mysql, sql

我有一张桌子：

```
name |test_date | score   
-----------------------
jon  |2012:07:01|   95   
jon  |2012:07:01|   60   
jon  |2012:07:01|   30   
alex |2012:07:01|   80   
alex |2012:07:01|   85   
alex |2011:05:01|   40  
emile|2011:01:01|   89 
```

我想为每个名字获取一些行，并使用规则提供有关他的 score_grading 的信息： score>79=A, 80>score>49=B 否则为 C。

问题是，我想要：如果在同一天，一个学生有多个相同的 score_grade，那么它将算作一个 score_grade。比如表中我们可以看到alex一天内两次得到A，我希望它只算1个A。

所以结果将是

```
name |    A   |    B     |    C
jon  |    1   |    1     |    1
alex |    1   |    0     |    1  
emily|    1   |    0     |    0 
```

我只知道这样的代码：

```
SELECT name,
SELECT SUM(IF(score)>79),1,0)) as A,
SELECT SUM(IF(80>score>49),1,0)) as B,
SELECT SUM(IF(score)<50),1,0)) as C from sometable group by name 
```

Nha，我如何在上面加上“DISTINCT”？有人可以给出解决方案吗？也许它不需要 DISTINCT？谢谢。^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:06:09.570

您的意思类似于以下内容（[sqlfiddle](http://sqlfiddle.com/#!2/26b66/2)）？

```
SELECT name, SUM(IF(A>=1,1,0)) as A, SUM(IF(B>=1,1,0)) as B, 
    SUM(IF(C>=1,1,0)) as C
FROM
(
    SELECT name, test_date, SUM(IF(score>79,1,0)) as A, 
        SUM(IF(score BETWEEN 49 AND 79,1,0)) as B, SUM(IF(score<50,1,0)) as C 
    FROM sometable 
    GROUP BY name, test_date
) daygroups
GROUP BY name 
```

这首先将您的数据打乱到`name, test_date, A, B, C`子查询中的行中。然后外部查询将聚合这些行，如果当天该字母等级至少有一个分数，则为 1，否则为 0。

* * *

这也应该有效（[sqlfiddle](http://sqlfiddle.com/#!2/26b66/4)）：

```
SELECT name, SUM(IF(lettergrade = 'A',1,0)) AS A, 
    SUM(IF(lettergrade = 'B',1,0)) AS B, SUM(IF(lettergrade = 'C',1,0)) AS C
FROM
(
    SELECT DISTINCT name, test_date, 
        CASE WHEN score>79 THEN 'A' 
             WHEN score BETWEEN 49 AND 79 THEN 'B' 
             ELSE 'C' 
        END AS lettergrade
    FROM sometable
) lettergrades
GROUP BY name 
```

我不确定哪一个会更好。此查询使用`DISTINCT`您在问题中建议的 a 。首先它将每个数字等级解析为相应的字母等级，然后`DISTINCT`删除重复项。最后，它将数据洗牌成列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T04:59:01.207

这应该有效：

```
SELECT name,
       SUM(IF(score > 79, 1, 0)) as A,
       SUM(IF(score BETWEEN 50 AND 79, 1, 0)) as B,
       SUM(IF(score < 50, 1, 0)) as C 
FROM   (SELECT DISTINCT name, score FROM sometable) a
GROUP BY name; 
```

# c++ - C++ 中的 PDF 解析 (PoDoFo)

> ID：11715561
> 
> 赞同：12
> 
> 时间：2012-07-30T04:53:07.480
> 
> 标签：c++, parsing, pdf, podofo

嗨，我正在尝试从一些 pdf 中解析一些文本，我想使用 PoDoFo，现在我尝试搜索如何使用 PoDoFo 解析 pdf 的示例，但是我能想出的只是如何创建的示例并写一个不是我真正需要的pdf文件。

如果有人有任何使用 PoDoFo 解析 PDF 文件的教程或示例，或者对我可以使用的不同库有建议，请告诉我。我也知道 linux 上有 pdftotext，但是，我不仅不能使用它，而且我更愿意能够在内部完成我需要做的一切，而不是依赖正在安装的外部程序。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-30T10:15:09.683

PoDoFo 没有提供从文档中轻松提取文本的方法，但这并不难。

将文档加载到`PdfMemDocument`：

```
PoDoFo::PdfMemDocument pdf("mydoc.pdf"); 
```

遍历每一页：

```
for (int pn = 0; pn < pdf.GetPageCount(); ++pn) {
    PoDoFo::PdfPage* page = pdf.GetPage(pn); 
```

遍历该页面上的所有 PDF 命令：

```
 PoDoFo::PdfContentsTokenizer tok(page);
    const char* token = nullptr;
    PoDoFo::PdfVariant var;
    PoDoFo::EPdfContentsType type;
    while (tok.ReadNext(type, token, var)) {
        switch (type) {
            case PoDoFo::ePdfContentsType_Keyword:
                // process token: it contains the current command
                //   pop from var stack as necessary
                break;
            case PoDoFo::ePdfContentsType_Variant:
                // process var: push it onto a stack
                break;
            default:
                // should not happen!
                break;
        }
    }
} 
```

“进程令牌”和“进程变量”注释是它变得更复杂的地方。您将获得要处理的原始 PDF 命令。幸运的是，如果您实际上并没有呈现页面并且您想要的只是文本，那么您可以忽略其中的大部分。您需要处理的命令是：

`BT`, `ET`, `Td`, `TD`, `Ts`, `T`, `Tm`, `Tf`, `"`, `'`,`Tj`和`TJ`

`BT`and命令标记文本流的`ET`开始和结束，因此您要忽​​略不在`BT`/`ET`对之间的任何内容。

PDF 语言是基于 RPN 的。命令流由压入堆栈的值和将值从堆栈中弹出并处理它们的命令组成。

、`"`和命令是唯一实际生成文本的命令`'`。，并返回一个字符串。使用和处理它。`Tj``TJ``"``'``Tj``var.IsString()``var.GetString()`

`TJ`返回一个字符串数组。您可以使用以下方法提取每个：

```
if (var.isArray()) {
    PoDoFo::PdfArray& a = var.GetArray();
    for (size_t i = 0; i < a.GetSize(); ++i)
        if (a[i].IsString())
            // do something with a[i].GetString() 
```

其他命令用于确定何时引入换行符。`"`并`'`引入换行符。最好的办法是从 Adob​​e 下载 PDF 规范并查找文本处理部分。它更详细地解释了每个命令的作用。

我发现编写一个小程序非常有帮助，该程序采用 PDF 文件并转储每个页面的命令流。

注意：如果您所做的只是提取没有定位信息的原始文本，那么您实际上不需要维护一堆`var`值。所有的文本渲染命令最多只有一个参数。您可以简单地假设最后一个值`var`包含当前命令的参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T05:49:01.483

我没有使用过 PoDoFo，但快速浏览其 API 网页上的类层次结构会发现：

```
void PoDoFo::PdfMemDocument::Load( const char * pszFilename ) 
```

（[API 文档链接](http://podofo.sourceforge.net/doc/html/classPoDoFo_1_1PdfMemDocument.html#a0b37e7cac8642bb4e7190d5c559f8603)）

所以我在这里冒险猜测一下，你这样做：

```
PoDoFo::PdfMemDocument doc;
doc.Load( "somefile.pdf" ); 
```

`doc.GetObjects()`然后我想你通过调用并遍历该数组来导航文档树（[请参阅 PdfDocument 类](http://podofo.sourceforge.net/doc/html/classPoDoFo_1_1PdfDocument.html)）

# c# - 提交将更新 oracle db 的按钮

> ID：11715562
> 
> 赞同：0
> 
> 时间：2012-07-30T04:53:24.477
> 
> 标签：c#, visual-studio, oracle, user-interface, datagridview

我有一个 GUI，使用户能够将五个条目输入到 datagridview 中。之后，他们将单击“提交”按钮，该按钮将进入 oracle 数据库并将条目更新到其各自的模块中。我已经完成了 GUI 的代码——非常简单。但是我应该如何开始与 oracle 的这种连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:16:38.567

1.  下载并安装 Oracle ODP.NET 连接器。不要在 .NET 库中使用 oracle 连接器，它不支持并建议使用 Oracle 的。

2.  找到 Oracle.DataAccess.dll 并在您的项目中引用它。

3.  `using`在文件顶部 添加命名空间以方便使用。

4.  从 mircosoft 查找有关如何使用标准 ADO.NET 接口的文档。IIRC，MSDN 文档比 Oracle 文档好。使用 OracleConnection 和 OracleCommand 类执行 Sql。

如果您的解决方案需要更新或检索大量数据，请考虑将 OracleDataAdapter 与 DataSet 一起使用。
有很多教程可以使用所有这些不同的类。

# regex - 如何使用正则表达式从文本元素中提取基于定位的单词？

> ID：11715571
> 
> 赞同：0
> 
> 时间：2012-07-30T04:54:13.800
> 
> 标签：regex

我正在寻求帮助，以便能够（使用 REGEX）从下面列出的文本元素中提取模型。

*   2007 本田 CR-V LX 清洁！！
*   2008 本田雅阁 EX ROOF MAGS 清洁 1 所有者
*   2008 本田思域 EX-L CUIR TOIT 皮革
*   2009 Toyota Corolla S 全装备

常数因素是，
模型总是第三个词

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:00:14.410

我将与正则表达式匹配`\d{4}`以获取第一个 4 位数字（年份），然后用空格分隔（使用您使用的任何语言），然后从中获取第二个和第三个单词。

你甚至可以将它从空格中分离出来并使用它，例如在 Ruby 中：

```
array=my_name.split(" ")
year=array[0]
make=array[1]
model=array[2] 
```

基本上我不认为正则表达式是这里最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:26:36.743

Try this simple one:

```
(\d+)\s*(\w+)\s*(.+) 
```

and get groups.

explain:

```
\d+        digits (0-9) 
           (1 or more times, matching the most amount possible)

\s*        whitespace (\n, \r, \t, \f, and " ") 
           (0 or  more times, matching the most amount possible)

\w+        word characters (a-z, A-Z, 0-9, _) 
           (1 or more times, matching the most amount possible)

.+         any character except \n 
           (1 or more times, matching the most amount possible) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:18:47.480

如果你必须使用正则表达式，它是

```
^(\d{4}) +([^ ]+) +([^ ]+) +(.*)$ 
```

\1 是年份，\2 是品牌，\3 是型号，\4 是其余的。但是，如果有任何模型有两个单词（例如 Crown Victoria），这将不起作用，除非您用空格以外的其他东西分隔单词（例如 Crown_Victoria）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T05:20:05.763

请检查此链接：正则[表达式实施](http://regexr.com?31m2e)

```
([0-9]*).\b([a-zA-z]*).\b([a-zA-z-.]*).\b(.*) 
```

您将获得 3 组：

1.  2007年

2.  本田

3.  CR-V

**编辑**

如果您使用的是 c# 语言，那么这将是获得`model`

```
string page = "2007 Honda CR-V LX CLEAN !!";
Regex reg = new Regex(@"(?<year>[0-9]*).\b(?<make>[a-zA-z]*).\b(?<model>[a-zA-z-.]*).\b(?<rest>.*)");
MatchCollection mc = reg.Matches(page);

foreach (Match m in mc)
{
    MessageBox.Show(m.Groups["model"]);
} 
```

# javascript - 我试图创建一个带有数据转换但不工作的按钮

> ID：11715576
> 
> 赞同：0
> 
> 时间：2012-07-30T04:55:08.543
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在尝试创建一个带有数据转换但不工作的按钮。当我点击链接`contactInf`时，无法从表单页面`basicInf`切换到页面 `contactInf`！

我的浏览器是firefox14.1。

下面是我的代码：

```
<body>
<div id="basicInf" data-role="page" data-theme="c">
  <a href="#contactInf" data-transition="flip"  data-theme="c" data-  ini="true">contactInf</a>
</div>

<div id="contactInf" data-role="page" data-theme="c">……&lt;/div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:59:37.063

`jQuery`方法：

```
$("#contactInf").click(function(){
    window.location.href = 'yourcontactInfpage.html'
}); 
```

或者

将您的 DIV 更改为

```
<div id="contactInf" data-role="page" data-theme="c" onclick="redirectTocontactInf">……&lt;/div> 
```

并将此函数写入您的`javascript`文件中

```
function redirectTocontactInf(){
        window.location.href = 'yourcontactInfpage.html'
} 
```

PS：替换`yourcontactInfpage.html`为您要将用户重定向到的页面的名称:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:06:39.897

可能是您正在寻找类似的东西：

HTML

```
<a id="basicInf_link">basic</a>
<a id="contactInf_link">contact</a>

<div id="basicInf" class="page" data-role="page" data-theme="c">……&lt;/div>
<div id="contactInf" class="page" data-role="page" data-theme="c">……&lt;/div> 
```

JavaScript

```
$('#basicInf_link').click(function () {
  $('.page').hide();
  $('#basicInf').show();
});

$('#contactInf_link').click(function () {
  $('.page').hide();
  $('#contactInf').show();
}); 
```

# ruby-on-rails - 山狮的 Ruby 更新

> ID：11715588
> 
> 赞同：2
> 
> 时间：2012-07-30T04:56:19.490
> 
> 标签：ruby-on-rails

我一直在努力在我的 macbook pro 上更新 Ruby。我目前运行的是 1.8.6，需要升级到至少 1.8.7 才能安装 rails。我有 rvm，但每次尝试安装新版本的 ruby​​ 时，都会出现以下错误：

```
Error running 'make ', please read /Users/telenardo/.rvm/log/ruby-1.9.2-p320/make.log 
```

运行 make 时出现错误。停止安装。

当我打开 make.log 文件时，我收到以下消息：

```
[2012-07-29 21:39:20] make 
/usr/bin/gcc-4.2 -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wshorten-64-to-32 -Wno-long-long  -fno-common -pipe -I. -I.ext/include/x86_64-darwin12.0.0 -I./include -I. -DRUBY_EXPORT -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -o main.o -c main.c
In file included from ./include/ruby.h:32,
             from main.c:13:
./include/ruby/ruby.h:70:20: error: stdarg.h: No such file or directory
In file included from ./include/ruby/ruby.h:1343,
             from ./include/ruby.h:32,
             from main.c:13:
./include/ruby/intern.h:27:22: error: varargs.h: No such file or directory
make: *** [main.o] Error 1 
```

任何人都可以阐明可能出了什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:09:16.500

这里的解决方案（创建到 gcc-4.2 的符号链接）是否解决了问题？

[http://www.zlu.me/blog/2012/02/21/install-native-ruby-gem-in-mountain-lion-preview/](http://www.zlu.me/blog/2012/02/21/install-native-ruby-gem-in-mountain-lion-preview/)

# coldfusion - 不带 CFSelect 的 Coldfusion 多选框

> ID：11715600
> 
> 赞同：0
> 
> 时间：2012-07-30T04:57:43.720
> 
> 标签：coldfusion, multi-select, coldfusion-8

如果不使用 CFForm 或 CFSelect，如何在 Coldfusion 中构建多选框？

这是从数据库中提取值，因此它不仅仅是一个静态选择框，它是动态的。

这是我第一次尝试在 ColdFusion 中编写代码，我一直是 .Net 人，所以这对我来说有点改变。

我需要这个的原因是因为我已经被雇用到一个使用 Coldfusion 的部门，但是从首席开发人员告诉我的是他们不使用 CFForm 并且看到 CFSelect 需要如何进入 CFForm 我需要一个不同的这样做的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:19:55.860

使用普通的旧 HTML，例如：

```
<cfquery name="qryUsers" datasource="datasourcename"> 
    SELECT [User].[UserID], [User].[FirstName] 
    FROM [User]
</cfquery>

<cfoutput>
    <form ...>
        <select name="users" multiple="multiple">
            <option value="">- please select -</option>
            <cfloop query="qryUsers"> 
              <option value="#UserID#">#FirstName#</option>
            </cfloop>
        </select>
    </form>
</cfoutput> 
```

# php - 带有或条件的Mysql案例

> ID：11715607
> 
> 赞同：15
> 
> 时间：2012-07-30T04:58:33.657
> 
> 标签：php, mysql, sql

如何在 mysql 查询中编写一个案例，检查特定列的 null 或 0

```
CREATE TABLE tblConfirmationStatus (Confirm_Status TINY INT)

插入 tblConfirmationStatus
确认_状态
价值观
(1),
(0),
(1),
（{空值}），
(0),
(1),
（{空值}）

```

所需输出

**确认状态**

```
   确认的
   还没有确定
   确认的
   还没有确定
   还没有确定
   确认的
   还没有确定

```

0 或 Null - 未确认，1-确认

```
选择案例 Confirm_Status
            当 NULL 或 0 THEN '未确认'
             ELSE 'Confirmed' END AS ConfirmStatus
  从 tblConfirmationStatus;

```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-30T05:02:37.247

CASE 语句有两种选择 - 您发布的一种，或者：

```
SELECT CASE 
        WHEN Confirm_Status IS NULL OR Confirm_Status = 0 THEN 'Not Confirmed' 
        ELSE  'Confirmed' 
       END AS ConfirmStatus 
```

但你可能会使用：

```
SELECT CASE 
        WHEN Confirm_Status > 0 THEN 'Confirmed' 
        ELSE  'Not Confirmed' 
       END AS ConfirmStatus 
```

`NULL`是没有值，因此检查零以上的值应该与零属于同一类别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T05:02:45.433

```
SELECT IF((Confirm_Status IS NULL OR Confirm_Status = 0), 
           'Not Confirmed', 'Confirmed') AS ConfirmStatus
FROM tblConfirmationStatus; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:02:17.337

您是否看过使用[IFNULL](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)运算符。

> IFNULL(expr1,expr2)
> 
> 如果 expr1 不为 NULL，则 IFNULL() 返回 expr1；否则返回 expr2。IFNULL() 返回一个数字或字符串值，具体取决于使用它的上下文。

# android - 丢失了我在 android 市场上上传的应用程序的密钥库

> ID：11715621
> 
> 赞同：35
> 
> 时间：2012-07-30T05:00:25.107
> 
> 标签：android, google-play

我不知道如何解决我的问题。我们在 Android 市场上发布了一个 Android 应用程序。在修复了一些问题后，我们无法将其作为应用程序的下一个版本在市场上发布，因为我们丢失了用于签署该构建的私钥。如果更新版本不是由相同的密钥签名的，则 android 不接受构建。

对于这个应用程序，很少有用户已经在市场上购买了它。如果我们上传相同的应用程序但包名不同，购买的用户将无法获得更新版本。我该如何解决这个问题？对此有何建议？

提前致谢...

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-30T05:17:56.677

没有办法恢复您的密钥。我曾经不小心删除了我的并面临同样的问题。最后，我通过电子邮件向已经购买了我的应用程序的少数用户发送了关于我的错误的电子邮件，并告诉他们让我知道他们是谁，如果他们想要的话，我将再次退还他们购买的应用程序。从那以后，我制作了几份我的钥匙。再一次，没有办法恢复这一点。

另一方面，您可以尝试在您的计算机上将系统还原到您尚未放错位置或删除密钥的前一个日期。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T18:01:28.980

我们曾经遇到过同样的问题。如上所述，无法恢复您的密钥。但是你可以尝试蛮力来恢复它。

这个线程特别有用：[忘记密钥库密码，考虑暴力检测。它会破坏密钥库吗？](https://stackoverflow.com/questions/6149530/forgot-keystore-password-thinking-of-brute-force-detection-will-it-corrupt-the)

您至少应该对您的密钥应该是什么有一个小想法。假设您知道密钥有`android`,`app`和`2012`。脚本将尝试这三个单词以及其他单词的所有组合。在我们的案例中，我们在第一次尝试中恢复了它。

祝你好运。

# jquery - 它是否像 php 中的条件操作一样编码？

> ID：11715628
> 
> 赞同：1
> 
> 时间：2012-07-30T05:01:26.027
> 
> 标签：jquery

```
var src = $(this_image).attr('src') || '' ; 
```

上面的代码看起来像 php 中的条件操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T05:02:20.647

这意味着如果`$(this_image).attr('src')`未定义。`src`将等于`''`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T05:11:56.233

Javascript中的表单表达式`expr1 || expr2`等价于 PHP 条件表达式`expr1 ? expr1 : expr2`。

你不能在 PHP 中使用更简单的表达式，因为它的 && 和 || 运算符总是返回布尔值。

# c# - 无法自动进入服务器。连接到服务器机器“abc”失败

> ID：11715630
> 
> 赞同：1
> 
> 时间：2012-07-30T05:01:38.153
> 
> 标签：c#, .net, exception-handling, tfs, tfs-workitem

请帮帮我。它在第二行显示错误。

```
var tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://abc..."));
WorkItemStore  wiStore = tfs.GetService<WorkItemStore>();  //error here          
return wiStore.Projects; 
```

错误：无法自动进入服务器。连接到服务器计算机“abc”失败。调试器无法连接到远程计算机。这可能是因为远程计算机不存在或防火墙可能阻止与远程计算机的通信。请参阅帮助以获得帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T06:25:30.110

您需要使用 msvsmon.exe 在远程服务器中启用远程调试。请查看以下帖子以获取相同的信息

[http://www.sadev.co.za/content/how-debug-workflow-assemblies-and-plug-ins-mscrm-40](http://www.sadev.co.za/content/how-debug-workflow-assemblies-and-plug-ins-mscrm-40)

# ios - 如何在不加载图像的情况下为文件系统上的现有图像写入或修改 EXIF 数据？

> ID：11715631
> 
> 赞同：5
> 
> 时间：2012-07-30T05:01:45.083
> 
> 标签：ios, metadata, exif

我以前也问过类似的问题，但没有得到明确的答案。似乎必须有一种方法可以简单地将元数据添加/修改到图像而不将图像加载到内存中，而不必处理直接读取位。

使用 s 时似乎存在方法`CMSampleBufferRef`，但我需要能够使用已保存到磁盘的常规图像来执行此操作。
例如，给定一个非常大`png`的 at `/Documents/photo.png`，我想修改它的 exif 元数据，而不必加载该图像。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T05:39:23.523

您可以使用 libexif - 我之前已经成功为 iOS 编译过它。使用 libexif，您可以修改任何图像的 EXIF 元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:33:35.003

如果您知道如何修改 EXIF，则可以直接从文件中修改二进制数据。只需将图像中的二进制部分替换为新的部分。我不知道objective-c是否允许这样做，但在ansi c中应该很简单。复杂的部分是确定要更改的确切部分。

# email - 如何将电子邮件发送到其他服务器中的虚拟域

> ID：11715632
> 
> 赞同：-1
> 
> 时间：2012-07-30T05:01:45.507
> 
> 标签：email, sendmail, postfix-mta, mailman

我正在设置 2 台服务器。1\. 监控服务器 2\. 邮件列表服务器

当监控服务器（1）向邮件列表服务器（2）发送任何警报邮件时，这两个服务器一起工作。邮件列表服务器(2) 收到警报后，邮件列表服务器(2) 会将电子邮件分发到邮件列表数据库中的电子邮件地址。

问题是：邮件列表服务器使用虚拟域。像 fakedomain.com

如何在监控服务器中设置别名，以便监控服务器（1）直接发送到邮件列表服务器（2）中的 fakedomain.com？不要访问互联网上的 fakedomain.com。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:17:19.010

您可以使用监控服务器上的 /etc/hosts 文件指向本地邮件服务器，以便将邮件从数据库中进一步退回给收件人。/etc/主机：

```
10.1.1.14       mail.fakedomain.com 
```

# android - 将数据从活动传递到服务的问题

> ID：11715634
> 
> 赞同：0
> 
> 时间：2012-07-30T05:01:58.240
> 
> 标签：android, android-intent, android-service

'下面是我试图将数据从我的活动传递到我的服务的两个类。我已经传递给其他活动没问题，但是当我在 IntentService 中查找我的附加功能时，它总是返回 null。任何想法我做错了什么？

```
public class TestActivity extends Activity {
private Button mbutton;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mbutton = (Button) this.findViewById(R.id.button1);
    mbutton.setOnClickListener(new Button.OnClickListener(){
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
             Log.d("TestActivity", "onClick: starting srvice");
             Intent intent = new Intent(TestActivity.this/*getApplicationContext()*/, MyService.class);
             /*TestActivity.this.getApplicationContext().*/
             intent.putExtra(MyService.PARAM_IN_NAME, ((EditText)findViewById(R.id.editText1)).getText());
             intent.putExtra(MyService.PARAM_IN_JOB, ((EditText)findViewById(R.id.editText2)).getText());
             intent.putExtra(MyService.PARAM_IN_BDAY, ((EditText)findViewById(R.id.editText3)).getText());
             startService(intent);
        }
    });
  }
} 
```

这是我试图从活动中提取数据的服务类。

```
public class MyService extends IntentService {

public static final String PARAM_IN_NAME = "name";
public static final String PARAM_IN_JOB = "job";
public static final String PARAM_IN_BDAY = "bday";

private String mJob;
private String mBday;
private String mName;

// --------------CONSTRUCTORS--------------
public MyService() {
    super("MyServiceThread");
}

public MyService(String name) {
    super(name);
}

// -------------OVERRIDE-------------
@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onDestroy(){
    Toast.makeText(this, "service done", Toast.LENGTH_SHORT).show();
}

@Override
protected void onHandleIntent(Intent intent) {
    Toast.makeText(this, "service starting", Toast.LENGTH_SHORT).show();

    mName = intent.getStringExtra(PARAM_IN_NAME);
    mJob = intent.getStringExtra(PARAM_IN_JOB);
    mBday = intent.getStringExtra(PARAM_IN_BDAY);

    String result = "Name = " + mBday + " | Job = " + mJob + " | Bday = " + mBday; 

    Toast.makeText(this, result, Toast.LENGTH_SHORT).show();
} 
```

}

这也是我的清单文件的内容：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TestActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name=".MyService" android:enabled="true" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T05:10:32.807

使用 bundle 将数据发送到服务。

从活动。

```
Bundle bundle = new Bundle();  
bundle.putCharSequence("extraData", data);
myIntent.putExtras(bundle); 
```

接受服务。

`Bundle bundle = intent.getExtras(); data = (String) bundle.getCharSequence("extraData");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:25:34.607

您的代码看起来不错。

`toString()`当您从以下内容中获取文本时添加后尝试`EditText`：

`intent.putExtra(MyService.PARAM_IN_NAME,` `((EditText)findViewById(R.id.editText1)).getText().toString());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T05:10:22.840

我像这样把我的数据交给接收端

```
 Bundle bundle = this.getIntent().getExtras();
    String scan = bundle.getString("scan");
    ((TextView)findViewById(R.id.username)).setText(scan); 
```

# ruby - 测试字符串是否以另一个字符串开头或结尾

> ID：11715637
> 
> 赞同：92
> 
> 时间：2012-07-30T05:02:10.583
> 
> 标签：ruby, string

我应该如何检查字符串是否以给定字符串开头或结尾？似乎没有任何可用的内置方法（或者可能只是我正在使用的 IDE 没有显示它：RDE）

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-07-30T05:04:39.040

有内置方法：

```
"String".start_with? "S" # true
"String".end_with? "4" # false 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-21T18:06:16.297

```
string.start_with?("substring")
string.end_with?("substring") 
```

返回真或假

来源：

[http://ruby-doc.org//core-2.2.0/String.html#method-i-start_with-3F](http://ruby-doc.org//core-2.2.0/String.html#method-i-start_with-3F)

[http://ruby-doc.org//core-2.2.0/String.html#method-i-end_with-3F](http://ruby-doc.org//core-2.2.0/String.html#method-i-end_with-3F)

# android-layout - 如何制作 EditText 的动态网格

> ID：11715638
> 
> 赞同：2
> 
> 时间：2012-07-30T05:02:10.553
> 
> 标签：android-layout

我想创建edittext的动态网格，但它给了我一个IllegalStateException：

> 特定的孩子已经有一个孩子，你必须先打电话`removeView()` 给孩子父母。

这是我的代码：

```
for (int x = 0; x < no_of_rows; x++)
{
    ll = new LinearLayout(this.getApplicationContext());
    ll.setLayoutParams(new LinearLayout.LayoutParams(
        LinearLayout.LayoutParams.FILL_PARENT,
        LinearLayout.LayoutParams.WRAP_CONTENT));
    ll.setOrientation(0);

    for(int y = 0; y < no_of_columns; y++){
        LinearLayout(this.getApplicationContext());
        this.edittext2.add(new EditText(this.getApplicationContext()));
        this.edittext2.get(y).setId(y);
        this.edittext2.get(y).setLayoutParams(new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.FILL_PARENT
                    ,LinearLayout.LayoutParams.WRAP_CONTENT));
        this.edittext2.get(y).setMaxLines(1);
        this.edittext2.get(y).setText("Something");
        ll.addView(this.edittext2.get(y));
    }
    tlayout.addView(ll);
} 
```

# c++ - 是否可以将方法参数的类型定义为类或任何派生类？

> ID：11715642
> 
> 赞同：2
> 
> 时间：2012-07-30T05:02:35.130
> 
> 标签：c++, oop

假设我们有：

```
class Base {...}
class A : public Base {...}
class B : public Base {...} 
```

是否可以设置为泛型方法的参数类型：

```
myMethod([typei'mlookingfor] c) {} 
```

这样我就可以在`myMethod()`不重载方法的情况下将 Base、A 和 B 传递给？并使其与引用和指针一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:05:21.593

问：是否可以将方法参数的类型定义为类或任何派生类？

答：当然。为什么不？

如果您想要一个可以是任意类型的“通用”参数，只需使用模板即可。

否则，如果您想要“类或任何子类”，只需使用基类。

有用的报价：

> [http://wiki.answers.com/Q/What_are_the_concepts_of_object_orienting_programming](http://wiki.answers.com/Q/What_are_the_concepts_of_object_oriented_programming)
> 
> ***多态性***允许程序员像对待父类的成员一样对待派生类成员。更准确地说，面向对象编程中的多态性是属于不同数据类型的对象响应同名方法的方法调用的能力，每个方法调用都根据适当的特定于类型的行为。

我相信，这正是您正在寻找的:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T05:08:45.073

如果对基类的指针或引用对您有用，只需使用它：

```
void myMethod(Base& c) {}
A a;
B b;
myMethod(a);  //OK
myMethod(b);  //OK 
```

请注意，您必须使用引用或指针来防止**对象切片**。如果方法是`myMethod(Base c)`，您将丢失派生对象的类型信息。

如果没有，您可以使用模板

```
template<typename T>
void myMethod(T& c)
{
}
A a;
B b;
myMethod(a);
myMethod(b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T05:29:47.010

有两种方法可以做到这一点。第一个是动态多态性。仅适用于指针和引用。运行时开销很小：

```
void myMethod(Base& x) { ...} 
```

2nd - 静态多态：

```
template<class T>
std::enable_if<is_base_of<Base,T>::value>
myMethod(base x) {...} 
```

# javascript - 自动滚动到页面底部

> ID：11715646
> 
> 赞同：577
> 
> 时间：2012-07-30T05:03:10.600
> 
> 标签：javascript, jquery, scroll, scrollto, js-scrollintoview

我有一个问题清单。当我点击第一个问题时，它应该会自动将我带到页面底部的特定元素。

我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1101
> 
> 时间：2012-07-30T05:05:57.413

jQuery 不是必需的。我从谷歌搜索中获得的大多数顶级结果都给了我这个答案：

```
window.scrollTo(0,document.body.scrollHeight); 
```

如果您有嵌套元素，则文档可能不会滚动。**在这种情况下**，您需要定位滚动的元素并使用它的滚动高度。

`window.scrollTo(0,document.querySelector(".scrollingContainer").scrollHeight);`

您可以将其`onclick`与您的问题事件（即`<div onclick="ScrollToBottom()" ...`）联系起来。

您可以查看一些其他来源：

*   [http://www.sourcetricks.com/2010/07/javascript-scroll-to-bottom-of-page.html](http://www.sourcetricks.com/2010/07/javascript-scroll-to-bottom-of-page.html)
*   [http://www.alecjacobson.com/weblog/?p=753](http://www.alecjacobson.com/weblog/?p=753)
*   [http://www.mediacollege.com/internet/javascript/page/scroll.html](http://www.mediacollege.com/internet/javascript/page/scroll.html)
*   [http://www.electrictoolbox.com/jquery-scroll-bottom/](http://www.electrictoolbox.com/jquery-scroll-bottom/)

* * *

## 回答 #2

> 赞同：164
> 
> 时间：2015-10-18T02:23:59.217

要将整个页面滚动到底部：

```
var scrollingElement = (document.scrollingElement || document.body);
scrollingElement.scrollTop = scrollingElement.scrollHeight; 
```

请参阅[JSFiddle](https://jsfiddle.net/L56wxhqm/678/)上的**示例**

要将元素滚动到底部：

```
function gotoBottom(id){
   var element = document.getElementById(id);
   element.scrollTop = element.scrollHeight - element.clientHeight;
} 
```

它是这样工作的：

[![在此处输入图像描述](../Images/00baeb250cbb67250036a609269641db.png)](https://jsfiddle.net/L56wxhqm/678/)

参考：[scrollTop](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop) , [scrollHeight](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight) , [clientHeight](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight)

**更新：**最新版本的 Chrome (61+) 和 Firefox 不支持滚动正文，请参阅：[https ://dev.opera.com/articles/fixing-the-scrolltop-bug/](https://dev.opera.com/articles/fixing-the-scrolltop-bug/)

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2014-07-15T19:30:23.573

**香草 JS 实现：**

```
element.scrollIntoView(false); 
```

[https://developer.mozilla.org/en-US/docs/Web/API/element.scrollIntoView](https://developer.mozilla.org/en-US/docs/Web/API/element.scrollIntoView)

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2016-02-25T05:01:57.587

您可以使用它以动画格式向下浏览页面。

```
$('html,body').animate({scrollTop: document.body.scrollHeight},"fast"); 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2015-04-30T15:36:17.743

下面应该是跨浏览器解决方案。它已经在 Chrome、Firefox、Safari 和 IE11 上进行了测试

```
window.scrollTo(0, document.body.scrollHeight || document.documentElement.scrollHeight); 
```

window.scrollTo(0,document.body.scrollHeight); 不适用于 Firefox，至少对于 Firefox 37.0.2

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2019-09-26T03:09:48.730

一个衬垫平滑滚动到底部

```
window.scrollTo({ left: 0, top: document.body.scrollHeight, behavior: "smooth" }); 
```

向上滚动只需设置`top`为`0`

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2016-06-01T20:32:34.837

有时页面滚动到按钮（例如在社交网络中），向下滚动到最后（页面的最终按钮）我使用这个脚本：

```
var scrollInterval = setInterval(function() { 
    document.documentElement.scrollTop = document.documentElement.scrollHeight;
}, 50); 
```

如果您在浏览器的 javascript 控制台中，能够停止滚动可能会很有用，因此添加：

```
var stopScroll = function() { clearInterval(scrollInterval); }; 
```

然后使用`stopScroll();`.

如果您需要滚动到特定元素，请使用：

```
var element = document.querySelector(".element-selector");
element.scrollIntoView(); 
```

或用于自动滚动到特定元素的通用脚本（或停止页面滚动间隔）：

```
var notChangedStepsCount = 0;
var scrollInterval = setInterval(function() {
    var element = document.querySelector(".element-selector");
    if (element) { 
        // element found
        clearInterval(scrollInterval);
        element.scrollIntoView();
    } else if((document.documentElement.scrollTop + window.innerHeight) != document.documentElement.scrollHeight) { 
        // no element -> scrolling
        notChangedStepsCount = 0;
        document.documentElement.scrollTop = document.documentElement.scrollHeight;
    } else if (notChangedStepsCount > 20) { 
        // no more space to scroll
        clearInterval(scrollInterval);
    } else {
        // waiting for possible extension (autoload) of the page
        notChangedStepsCount++;
    }
}, 50); 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2012-07-30T05:09:39.407

您可以在需要调用它的任何地方使用此函数：

```
function scroll_to(div){
   if (div.scrollTop < div.scrollHeight - div.clientHeight)
        div.scrollTop += 10; // move down

} 
```

[jquery.com：滚动到](http://archive.plugins.jquery.com/project/ScrollTo)

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2014-05-08T17:13:12.540

你也可以用动画来做到这一点，它非常简单

```
$('html, body').animate({
   scrollTop: $('footer').offset().top
   //scrollTop: $('#your-id').offset().top
   //scrollTop: $('.your-class').offset().top
}, 'slow'); 
```

希望有帮助，谢谢

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2018-12-16T17:51:00.020

试图计算文档高度的答案太多了。但这对我来说计算不正确。但是，这两种方法都有效：

jQuery

```
 $('html,body').animate({scrollTop: 9999}); 
```

或者只是 js

```
 window.scrollTo(0,9999); 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2021-08-21T16:26:12.680

# 仅 CSS？！

一个有趣的纯 CSS 替代方案：

```
display: flex; 
flex-direction: column-reverse; 
```

它不是防弹的，但我发现它在几种情况下很有帮助。

**文档**：[`flex`](https://developer.mozilla.org/docs/Web/CSS/CSS_Flexible_Box_Layout)，[`flex-direction`](https://developer.mozilla.org/docs/Web/CSS/flex-direction#values)

* * *

## 演示：

```
var i=0, words='Lorem Ipsum & foo bar or blah'.split(' ')
setInterval(function(){
  demo.innerHTML+=words[i++ % words.length]+' ';
}, 200)
```

```
#demo{ display: flex;
  flex-direction: column-reverse;
  overflow-y: scroll;
  border:3px solid black; width:150px; height:150px;
}
body{ font-family:arial, sans-serif; font-size:15px; }
```

```
&#x1f43e; Autoscrolling demo:<div id='demo'></div>
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2018-06-17T16:25:56.047

如果您想向下滚动到特定元素，这是一种简单的方法。

每当您想向下滚动时调用此函数。

```
function scrollDown() {
 document.getElementById('scroll').scrollTop =  document.getElementById('scroll').scrollHeight
}
```

```
ul{
 height: 100px;
 width: 200px;
 overflow-y: scroll;
 border: 1px solid #000;
}
```

```
<ul id='scroll'>
<li>Top Here</li>
<li>Something Here</li>
<li>Something Here</li>
<li>Something Here</li>
<li>Something Here</li>
<li>Something Here</li>
<li>Something Here</li>
<li>Something Here</li>
<li>Something Here</li>
<li>Something Here</li>
<li>Bottom Here</li>
<li style="color: red">Bottom Here</li>
</ul>

<br />

<button onclick='scrollDown()'>Scroll Down</button>
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2021-03-27T08:11:17.547

## 这是一种对我有用的方法：

### 预期结果：

*   没有滚动动画
*   首次加载时在页面底部加载
*   在页面底部加载所有刷新

### 代码：

```
<script>
    function scrollToBottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }
    history.scrollRestoration = "manual";
    window.onload = scrollToBottom;
</script> 
```

### 为什么这可能对其他方法有效：

诸如 Chrome 之类的浏览器有一个内置预设，可以在刷新后记住您在页面上的位置。只是 a`window.onload`不起作用，因为您的浏览器会在您调用以下行之后自动将您滚动回刷新之前的位置：

```
window.scrollTo(0, document.body.scrollHeight); 
```

这就是为什么我们需要添加：

```
history.scrollRestoration = "manual"; 
```

之前`window.onload`先禁用该内置功能。

### 参考：

> 文档`window.onload`：[https ://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload)

> 文档`window.scrollTo`：[https ://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo](https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo)

> 文档`history.scrollRestoration`：[https ://developer.mozilla.org/en-US/docs/Web/API/History/scrollRestoration](https://developer.mozilla.org/en-US/docs/Web/API/History/scrollRestoration)

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-01-10T00:31:16.910

您可以将任何附加`id`到链接元素的引用属性`href`：

```
<a href="#myLink" id="myLink">
    Click me
</a> 
```

在上面的示例中，当用户单击`Click me`页面底部时，导航会导航到`Click me`自身。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-07-30T05:08:49.283

你可以试试[**Gentle Anchors**](http://www.angelwatt.com/coding/gentle_anchors.php)一个不错的 javascript 插件。

**例子：**

```
function SomeFunction() {
  // your code
  // Pass an id attribute to scroll to. The # is required
  Gentle_Anchors.Setup('#destination');
  // maybe some more code
} 
```

**兼容性测试：**

*   Mac 火狐、Safari、Opera
*   Windows 火狐、Opera、Safari、Internet Explorer 5.55+
*   Linux 未经测试，但至少在 Firefox 上应该没问题

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2016-05-27T17:54:01.323

派对迟到了，但这里有一些简单的纯 JavaScript 代码可以将**任何**元素滚动到底部：

```
function scrollToBottom(e) {
  e.scrollTop = e.scrollHeight - e.getBoundingClientRect().height;
} 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-10-24T07:13:42.447

对于在 Selenium 中向下滚动，请使用以下代码：

直到底部下拉，滚动到页面的高度。使用以下在 JavaScript 和 React 中都可以正常工作的 JavaScript 代码。

```
JavascriptExecutor jse = (JavascriptExecutor) driver; // (driver is your browser webdriver object) 
jse.executeScript("window.scrollBy(0,document.body.scrollHeight || document.documentElement.scrollHeight)", ""); 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-01-26T08:34:56.367

这是我的解决方案：

```
 //**** scroll to bottom if at bottom

 function scrollbottom() {
    if (typeof(scr1)!='undefined') clearTimeout(scr1)   
    var scrollTop = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;
    var scrollHeight = (document.documentElement && document.documentElement.scrollHeight) || document.body.scrollHeight;
    if((scrollTop + window.innerHeight) >= scrollHeight-50) window.scrollTo(0,scrollHeight+50)
    scr1=setTimeout(function(){scrollbottom()},200) 
 }
 scr1=setTimeout(function(){scrollbottom()},200) 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-06-11T20:41:40.707

我有一个包含动态内容的 Angular 应用程序，我尝试了上述几个答案，但没有取得多大成功。我改编了@Konard 的答案，并让它在我的场景中使用纯 JS：

**HTML**

```
<div id="app">
    <button onClick="scrollToBottom()">Scroll to Bottom</button>
    <div class="row">
        <div class="col-md-4">
            <br>
            <h4>Details for Customer 1</h4>
            <hr>
            <!-- sequence Id -->
            <div class="form-group">
                <input type="text" class="form-control" placeholder="ID">
            </div>
            <!-- name -->
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Name">
            </div>
            <!-- description -->
            <div class="form-group">
                <textarea type="text" style="min-height: 100px" placeholder="Description" ></textarea>
            </div>
            <!-- address -->
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Address">
            </div>
            <!-- postcode -->
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Postcode">
            </div>
            <!-- Image -->
            <div class="form-group">
                <img style="width: 100%; height: 300px;">
                <div class="custom-file mt-3">
                    <label class="custom-file-label">{{'Choose file...'}}</label>
                </div>
            </div>
            <!-- Delete button -->
            <div class="form-group">
                <hr>
                <div class="row">
                    <div class="col">
                        <button class="btn btn-success btn-block" data-toggle="tooltip" data-placement="bottom" title="Click to save">Save</button>
                        <button class="btn btn-success btn-block" data-toggle="tooltip" data-placement="bottom" title="Click to update">Update</button>
                    </div>
                    <div class="col">
                        <button class="btn btn-danger btn-block" data-toggle="tooltip" data-placement="bottom" title="Click to remove">Remove</button>
                    </div>
                </div>
                <hr>
            </div>
        </div>
    </div>
</div> 
```

**CSS**

```
body {
    background: #20262E;
    padding: 20px;
    font-family: Helvetica;
}

#app {
    background: #fff;
    border-radius: 4px;
    padding: 20px;
    transition: all 0.2s;
} 
```

**JS**

```
function scrollToBottom() {
    scrollInterval;
    stopScroll;

    var scrollInterval = setInterval(function () {
        document.documentElement.scrollTop = document.documentElement.scrollHeight;
    }, 50);

    var stopScroll = setInterval(function () {
        clearInterval(scrollInterval);
    }, 100);
} 
```

在最新的 Chrome、FF、Edge 和现有的 Android 浏览器上进行了测试。这是一个小提琴：

[https://jsfiddle.net/cbruen1/18cta9gd/16/](https://jsfiddle.net/cbruen1/18cta9gd/16/)

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-11-10T21:43:32.277

我找到了一个技巧来实现它。

将输入类型文本放在页面底部，并在需要进入底部时调用 jquery 焦点。

将其设为只读且漂亮的 css 以清除边框和背景。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-09-17T08:37:58.743

如果有人在搜索 Angular

你只需要向下滚动添加到你的 div

```
 #scrollMe [scrollTop]="scrollMe.scrollHeight"

   <div class="my-list" #scrollMe [scrollTop]="scrollMe.scrollHeight">
   </div> 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-01-05T22:17:08.053

这将保证滚动到底部

**头部代码**

```
<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
<script language="javascript" type="text/javascript">
function scrollToBottom() {
  $('#html, body').scrollTop($('#html, body')[0].scrollHeight);
}
</script> 
```

**正文代码**

```
<a href="javascript:void(0);" onmouseover="scrollToBottom();" title="Scroll to Bottom">&#9660; Bottom &#9660;</a> 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-09-24T09:40:44.220

我有同样的问题。对我来说，在某个时间点，div 的元素没有完全加载，并且使用 scrollHeight 的当前值初始化了 scrollTop 属性，这不是 scrollHeight 的正确结束值。

我的项目在 Angular 8 中，我所做的是：

1.  我使用 viewchild 来获取 .ts 文件中的元素。
2.  我继承了 AfterViewChecked 事件并在其中放置了一行代码，其中指出 viewchild 元素必须将 scrollHeight 的值纳入 scrollTop 值（this.viewChildElement.nativeElement.scrollTop = this.viewChildElement.nativeElement.scrollHeight;）

AfterViewChecked 事件触发了几次，它最终从 scrollHeight 中获得了正确的值。

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2019-07-09T10:08:31.940

window.scrollTo(0,1e10);

总是有效。

1e10 是一个很大的数字。所以它总是页面的结尾。

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2020-02-03T00:58:45.633

一张图片胜过千言万语：

关键是：

```
document.documentElement.scrollTo({
  left: 0,
  top: document.documentElement.scrollHeight - document.documentElement.clientHeight,
  behavior: 'smooth'
}); 
```

它正在使用`document.documentElement`，这是`<html>`元素。就像使用 一样`window`，但这只是我个人的偏好，因为如果它不是整个页面而是一个容器，它就像这样工作，除非你将`document.body`和更改`document.documentElement`为`document.querySelector("#container-id")`。

### 例子：

```
let cLines = 0;

let timerID = setInterval(function() {
  let elSomeContent = document.createElement("div");

  if (++cLines > 33) {
    clearInterval(timerID);
    elSomeContent.innerText = "That's all folks!";
  } else {
    elSomeContent.innerText = new Date().toLocaleDateString("en", {
      dateStyle: "long",
      timeStyle: "medium"
    });
  }
  document.body.appendChild(elSomeContent);

  document.documentElement.scrollTo({
    left: 0,
    top: document.documentElement.scrollHeight - document.documentElement.clientHeight,
    behavior: 'smooth'
  });

}, 1000);
```

```
body {
  font: 27px Arial, sans-serif;
  background: #ffc;
  color: #333;
}
```

如果没有，您可以比较差异`scrollTo()`：

```
let cLines = 0;

let timerID = setInterval(function() {
  let elSomeContent = document.createElement("div");

  if (++cLines > 33) {
    clearInterval(timerID);
    elSomeContent.innerText = "That's all folks!";
  } else {
    elSomeContent.innerText = new Date().toLocaleDateString("en", {
      dateStyle: "long",
      timeStyle: "medium"
    });
  }
  document.body.appendChild(elSomeContent);

}, 1000);
```

```
body {
  font: 27px Arial, sans-serif;
  background: #ffc;
  color: #333;
}
```

# unix - 将域上的路由映射到不同的后端 Heroku 应用程序

> ID：11715647
> 
> 赞同：2
> 
> 时间：2012-07-30T05:03:13.280
> 
> 标签：unix, heroku, routing, saas, paas

假设我在 Heroku 上有两个网络应用程序。例如`foobar-signup.heroku.com`和`foobar-conferences.heroku.com`。

如果我想在这两个后端应用程序（即...）上映射从下方到相同路由的路由，我应该使用哪些服务、应用程序和配置来执行此`www.foobar.com/signup`操作`www.foobar.com/conferences`。`www.foobar-signup.heroku.com/signup`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T09:39:35.507

您必须使用代理通行证来做到这一点。

为此，您可以使用 apache（因为它非常易于使用）。现在在您的代理文件中，您必须将所有请求从 **www.foobar.com/signup 映射**到**www.foobar-signup.heroku.com/signup** 和 **www.foobar.com/conferences**到**www.foobar-conferences.heroku.com /会议**

现在，当您打开**www.foobar.com/signup**页面时，代理通行证会将其重定向到**www.foobar-signup.heroku.com/signup**页面。从而解决您的问题。

编辑您的 httd.conf 文件，

```
 ProxyPass /signup/  http://www.foobar-signup.heroku.com/signup/
    ProxyPass /conferences/  http://www.foobar-conferences.heroku.com/conferences/ 
```

# ios5 - 如何在 iPhone SDK 中获取 Facebook 照片之类的计数？

> ID：11715650
> 
> 赞同：0
> 
> 时间：2012-07-30T05:03:50.500
> 
> 标签：ios5, ios4

如何使用图形 api 在 iPhone 应用程序中获取 Facebook 照片喜欢和不喜欢的数量？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:34:26.417

只需使用 FB 对象调用一个新请求：

```
[facebook requestWithGraphPath:@"PHOTO_ID/likes"]; 
```

替换`PHOTO_ID`为您感兴趣的照片的 Facebook ID。此调用将返回一个数组，其中包含该照片的所有类似信息。

在该`-facebook requestDidLoad:`方法中，只需获取该数组的计数即可返回喜欢的数量。

`NSInteger likeCount = [result count];`

# bar-chart - 如何使用 dompdf 在 pdf 中显示饼图、条形图

> ID：11715654
> 
> 赞同：2
> 
> 时间：2012-07-30T05:04:27.560
> 
> 标签：bar-chart, pie-chart, dompdf

嗨，我正在使用[dompdf](http://code.google.com/p/dompdf/)

我有使用[谷歌饼图](https://developers.google.com/chart/interactive/docs/gallery/piechart)和[谷歌条形图](https://developers.google.com/chart/interactive/docs/gallery/barchart)的报告页面。图表在浏览器中工作正常。我必须在使用 DOMPDF 创建的 pdf 文件中显示这些图表。我在生成 pdf 的代码中使用了相同的代码，但它不起作用。是否可以使用 google bar 和饼图创建 pdf 文件？如果是，我该如何实现，如果没有，那么还有其他方法可以使用饼图创建 pdf 吗？

希望尽快得到答复。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:12:18.797

dompdf 当前不支持客户端生成的内容（即使用 JavaScript 生成的内容）。您指向的 Google 可视化库是在客户端中动态生成的。

如果你想在 dompdf 中使用动态生成的图表，你必须使用在服务器上生成它的东西。[谷歌的图像图表库](https://developers.google.com/chart/image/)中确实有类似的东西，但[它已被弃用](http://googledevelopers.blogspot.com/2012/04/changes-to-deprecation-policies-and-api.html)（即目前，保证可用性仅[到 2015 年](https://developers.google.com/chart/terms)）。您可以找到类似的库。

如果您仍想使用客户端生成的图表，您可以尝试[wkhtmltopdf 之](http://code.google.com/p/wkhtmltopdf/)类的产品。它基于 webkit 渲染引擎并支持客户端脚本。

# php - exec：94：/hsphere/shared/php5/bin/php：升级magento时找不到

> ID：11715655
> 
> 赞同：0
> 
> 时间：2012-07-30T05:04:37.057
> 
> 标签：php, magento-1.4

当我将 magento 站点从旧版本升级到最新版本时，我在 shell 中遇到了一些错误。

我按照此链接升级 magento：

[http://turnkeye.com/blog/magento-upgrade-guide/](http://turnkeye.com/blog/magento-upgrade-guide/)

首次进入：

```
chmod -R 777 lib/PEAR 
```

然后我输入了命令：

```
./pear mage-setup 
```

然后我得到了这个错误：

![在此处输入图像描述](../Images/7b83801a3b67a96abd9e9d59a40ce6c2.png)

这是什么错误？

我该如何解决这个问题？

编辑： ![在此处输入图像描述](../Images/464cf04414e56dedadb978053a86d33b.png)

完成升级并在浏览器中获取站点 url 后出现此错误：

![在此处输入图像描述](../Images/07198f83cda09b023a564072806d9e54.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:50:23.117

问题是在路径下`/hsphere/shared/php5/bin/php`在您的服务器上找不到任何东西。

问题出在您的 pear 安装程序脚本中。打开它（例如使用`nano pear`）并将其更改`MAGE_PEAR_PHP_BIN="/hsphere/shared/php5/bin/php"`为`MAGE_PEAR_PHP_BIN="/usr/bin/php"`.

之后，应该可以安装了。

lg,

弗洛

（注意：在聊天中提供答案）

# foursquare - Foursquare 添加提示异常

> ID：11715657
> 
> 赞同：0
> 
> 时间：2012-07-30T05:04:38.537
> 
> 标签：foursquare, http-status-code-400

我正在开发 Android 中的foursquare API v2。
在我的应用程序中，用户可以签到并添加小费。

签入方法运行良好，但添加提示方法出错。

```
private void methodTipAdd(String venueId, String tip, boolean auth) {

    StringBuilder urlBuilder = new StringBuilder("https://api.foursquare.com/v2/");
    urlBuilder.append("tips/add");
    urlBuilder.append('?');

    try{
        urlBuilder.append("venueId").append('=');
        urlBuilder.append(URLEncoder.encode(venueId, "UTF-8")).append('&');
    }catch(Exception e) {
        e.printStackTrace();
    }

    try{   
        urlBuilder.append("text").append('=');
        urlBuilder.append(URLEncoder.encode(tip, "UTF-8")).append('&');
    }catch(Exception e) {
        e.printStackTrace();
    }

    if (auth) {
        urlBuilder.append("oauth_token=");
        urlBuilder.append(getAccessToken());
    } else {
        urlBuilder.append("client_id=");
        urlBuilder.append(CLIENT_ID);
        urlBuilder.append("&client_secret=");
        urlBuilder.append(CLIENT_SECRET);
    }

    urlBuilder.append("&v=" + getVersion());

    String url = urlBuilder.toString();

    String result = null;

    try {
        URL aUrl = new URL(url);
        HttpURLConnection connection = (HttpURLConnection) aUrl.openConnection();
        try {
            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setRequestMethod("POST");
            connection.connect();

            int code = connection.getResponseCode();
            if (code == 200) {
                InputStream inputStream = connection.getInputStream();
                result = convertStreamToString(inputStream);
                android.util.Log.e(tag, "result: " + result);
                // handle tip 
            } else {
                android.util.Log.e(tag, "HttpURLConnection response code: " + code);
            }

        } finally {
            connection.disconnect();
        }
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

请求网址：https://api.foursquare.com/v2/tips/add?venueId=[venue id]&text=[utf-8 编码文本]&oauth_token=[my_oauth_token]&v=20120730
ex) [https://api. foursquare.com/v2/tips/add?venueId=XXX123YYY&text=Good&oauth_token=XXX123YYY&v=20120730](https://api.foursquare.com/v2/tips/add?venueId=XXX123YYY&text=Good&oauth_token=XXX123YYY&v=20120730)

http响应码：400

我想知道为什么我得到 HTTP_BAD_REQUEST 响应代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:26:40.763

进行 POST 时，参数不应成为 URL 的一部分（将它们指定为 POST 的参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:15:22.267

我解决了这个问题。

```
private void methodTipAdd3(String venueId, String tip) {
    String url = "https://api.foursquare.com/v2/tips/add";

    StringBuilder sb = new StringBuilder();

    sb.append("oauth_token=");
    sb.append(getAccessToken()).append('&');

    try{
        sb.append("venueId").append('=');
        sb.append(URLEncoder.encode(venueId, "UTF-8")).append('&');
    }catch(Exception e) {
        e.printStackTrace();
    }

    try{   
        sb.append("text").append('=');
        sb.append(URLEncoder.encode(tip, "UTF-8")).append('&');
    }catch(Exception e) {
        e.printStackTrace();
    }

    sb.append("v=" + getVersion());

    String params = sb.toString();

    String result = null;

    int httpcode = 200;

    try {
        URL aUrl = new URL(url);
        HttpURLConnection connection = (HttpURLConnection) aUrl.openConnection();
        try {

            connection.setDoInput(true);
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Accept", "application/json");

            byte buf[] = params.getBytes("UTF-8");
            connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
            connection.setRequestProperty("Content-Length", String.valueOf(buf.length));
            connection.setDoOutput(true);
            OutputStream outputstream = connection.getOutputStream();
            outputstream.write(buf);
            outputstream.flush();
            outputstream.close();

            httpcode = connection.getResponseCode();
            if (httpcode == 200) {
                InputStream inputStream = connection.getInputStream();
                result = convertStreamToString(inputStream);
                // handle tip 
                android.util.Log.e(tag, "result: " + result);
            } else {
                android.util.Log.e(tag, "http response code: " + httpcode);
            }

        } finally {
            connection.disconnect();
        }
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# c# - 响应一个“回车”按键场地

> ID：11715661
> 
> 赞同：1
> 
> 时间：2012-07-30T05:05:04.140
> 
> 标签：c#, javascript, jquery, asp.net, html

我的问题是关于处理 Enter 按键。我有一个名为“order.aspx”的页面位于母版页内。我在这里解释控制结构

```
1\. <asp:TextBox ID="txtSearch" MaxLength="50" runat="server" Width="420px" CssClass="txtbox"></asp:TextBox>

2\. <asp:Button ID="btnSearch" runat="server" OnClick="btnSearch_Click" />

3\. one asp grid control with one column containing textbox for entering order quantity 

4\. <asp:Button ID="btnOrder" runat="server" OnClick="btnOrder_Click" />. 
```

我的要求是，

1.  当用户在搜索文本框中输入文本并按回车键时 btnSearch_Click 应该触发
2.  当用户在网格文本框中输入数量并按回车键时 btnOrder_Click 应该触发。

我尝试使用不同的代码终于得到了答案，但它的功能并不完全。Folwing 是我使用的 javascript 代码。

```
function DoEnterKeyButtonClick(buttonId) {
     e = event;
     var code = (e.keyCode ? e.keyCode : e.which);
     if (code == 13) {
         document.getElementById('ctl00_CphMaster_' + buttonId).click();
         return false;
     }
} 
```

我在 txtSearch 和网格文本框的按键上调用此方法，并将按钮 id 分别传递给触发事件 btnSearch 和 btnOrder。当我在搜索文本框中输入文本并按下回车键时，btnSearch_Click 正在触发，当我输入时订单数量并按回车键 btnOrder_Click 正在触发。但问题是，在更改页面索引后说第二页所需的功能不起作用。也就是说，当我输入订单数量并按回车键时，btnSearch_Click 将首先触发，然后 btnOrder_Click 触发。这将清除输入的数量并导致错误。请帮助我...

谢谢，乔比

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T05:48:46.587

而不是给这个`document.getElementById('ctl00_CphMaster_' + btnSearch).click();`

试试这个`document.getElementById('<%= btnSearch.ClientID %>').click();`

或尝试使用 jquery

```
$("#txtSearch").keyup(function(event){
    if(event.keyCode == 13){
        $("#btnSearch").click();
    }
}); 
```

否则将您的控件放在 asp:panel 中，并将 DefaultButton 属性设置为 btnSearch，如下所示

```
<asp:Panel ID="Panel1" runat="server" DefaultButton="btnSearch">
    <asp:TextBox ID="txtSearch" MaxLength="50" runat="server" Width="420px" CssClass="txtbox"></asp:TextBox>
    <asp:Button ID="btnSearch" runat="server" OnClick="btnSearch_Click" />
    </asp:Panel> 
```

希望这会有所帮助。

非常感谢安娜

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:09:56.960

您的函数甚至不知道这到底是什么。像这样试试

```
function DoEnterKeyButtonClick(event,buttonId){} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:53:39.760

我保留了以下方便的片段..

```
function getIntKey(key) {
    var keycode;
    if (key == null) { keycode = event.keyCode; } else { keycode = key.keyCode; }
    return keycode;
} 
```

并使用它，像这样..

```
$("#txtSearch").keyup(function(e){
  if(getIntKey(e) == 13){
     //Enter was pressed, do somthing
  }
}); 
```

# google-chrome - 在窗口打开事件中在后台运行的 Chrome 扩展程序？

> ID：11715664
> 
> 赞同：2
> 
> 时间：2012-07-30T05:05:19.520
> 
> 标签：google-chrome, google-chrome-extension

如何制作不是弹出窗口或按钮的 Chrome 扩展程序？

1.  我想在打开窗口时运行一个脚本，并遍历其所有选项卡，在每个选项卡上执行操作。
2.  我还需要（这可能吗？）想要添加到相同的扩展按钮（+键盘快捷键？），单击时在所有选项卡上执行操作。
3.  然后我需要控制这些按钮的可见性，并使它们仅在某些条件下可见（例如，仅在页面加载时显示，在未加载时隐藏）。

我在哪里放置我的脚本以及如何在我的 *.json 清单中引用它？

任何信息/链接将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T09:44:57.040

0 和 1 的答案可以直接在文档中找到，特别是[background pages](http://code.google.com/chrome/extensions/background_pages.html)、[`chrome.windows`API](http://code.google.com/chrome/extensions/windows.html)和[`chrome.tabs`API](http://code.google.com/chrome/extensions/tabs.html)。

要绑定全局事件，请使用[`chrome.experimental.keybinding`](http://code.google.com/chrome/extensions/experimental.keybinding.html)API。由于此 API 是实验性的，因此您必须先在`chrome://flags`. 此外，无法将扩展程序上传到 Chrome 网上应用店。
如果要添加在单击时执行某些操作的“扩展按钮”，请定义[浏览器操作](http://code.google.com/chrome/extensions/browserAction.html)并将事件侦听器绑定到[`chrome.browserAction.onClicked`](http://code.google.com/chrome/extensions/browserAction.html#event-onClicked).
要选择所有选项卡，请使用[`chrome.tabs.query({}, callback)`](http://code.google.com/chrome/extensions/tabs.html#method-query)方法（`{}`表示没有过滤器，因此选择所有选项卡）。

浏览器操作按钮始终可见。如果您想创建一个不总是可见的按钮，请改用[页面操作](http://code.google.com/chrome/extensions/pageAction.html)。该`chrome.tabs`模块包括几个[事件](http://code.google.com/chrome/extensions/tabs.html#global-events)，可用于确定您的条件是否满足。

至于放置脚本和清单文件，请阅读有关[清单文件](http://code.google.com/chrome/extensions/manifest.html)的文档并探索一些[示例](http://code.google.com/chrome/extensions/samples.html)。

# java - 将字符串变量类型转换为 Java 中的映射

> ID：11715672
> 
> 赞同：-4
> 
> 时间：2012-07-30T05:06:10.143
> 
> 标签：java, string, map, casting

我有一个字符串变量。我需要将此变量类型转换为映射变量。例如：

```
 String stringVariable = "apple"
 // type cast this to map (Map<string,string>) stringVariable 
```

我想`apple`用作地图而不是字符串。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:07:18.743

这是不可能的。您需要以某种方式*解析*字符串。

也就是说，我不知道如何解析`"apple"`为地图。像这样的字符串`"favorite -> apple"`会更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:35:48.077

您绝对不能“苹果”到 Map 因为 Map 是一个处理键值对的集合，而 Apple 只是一个值。

您可以将 "apple" = "red" 或 "apple":"red" 之类的内容投射到 Map

或者在最坏的情况下，您可以尝试将“apple”投射到一个看起来像 ["apple":null] 的 Map ，但这没有任何意义。

# jquery - 自定义溢出滚动条模块

> ID：11715674
> 
> 赞同：0
> 
> 时间：2012-07-30T05:06:52.000
> 
> 标签：jquery, drupal, drupal-7, scroll, overflow

我有一个带有隐藏溢出的 div 的 Drupal 站点。我希望内容可以横向滚动，但不希望使用那个难看的浅色滚动条。我的网站主要是黑暗的，所以我想要一些黑暗且不太引人注目的东西。

我已经搜索了几个小时，但似乎没有一个普通的 jquery 插件可以工作。我试过安装我找到的任何一个，但它们都以相同的方式结束。根本没有滚动条。那么有谁知道drupal的模块或插件为什么不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:28:30.180

I used jScrollPane without any fuss and best thing is that it works

[jscrollpane.kelvinluck.com](http://jscrollpane.kelvinluck.com)

You can also do custom themes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:17:47.040

您可以为您的网站尝试[**jQuery Custom Scrollbar**](http://manos.malihu.gr/jquery-custom-content-scroller)插件。

[**观看演示**](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)​​在行动中。

**用法：**

包括以下内容`<head>`：

```
<link href="path-to-latest/custom-scrollbar-plugin/jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css" />

<script src="path-to-latest/jquery/1.7/jquery.min.js"></script>
<script src="path-to-latest/jqueryui/1.8/jquery-ui.min.js"></script>

<script src="path-to-latest/custom-scrollbar-plugin/jquery.mousewheel.min.js"></script>
<script src="path-to-latest/custom-scrollbar-plugin/jquery.mCustomScrollbar.js"></script>

<script>
    (function($){
        $(window).load(function(){
            $("#content_1").mCustomScrollbar({
                scrollButtons:{
                    enable:true
                }
            });
        });
    })(jQuery);
</script> 
```

您的内容应位于以下内容中`<div>`：

```
<div id="content_1" class="content">
    /* Your content */
</div> 
```

[**查看示例小提琴**](http://jsfiddle.net/akhurshid/nwfpy/)

# c# - 如何将 css 类动态添加到 .cs 文件？

> ID：11715675
> 
> 赞同：-4
> 
> 时间：2012-07-30T05:06:55.650
> 
> 标签：c#, asp.net, css

我正在研究 asp.net c#。我使用中继器来显示元素。我有一个在 css 中引用 div 的类，我的 css 类是 Wjen，我添加了 5 个元素 content-5 应该添加到上面的类中。我怎样才能做到这一点 ？

这是代码：

```
tabs input.tab-selector-1:checked ~ .content .content-1,.tabs input.tab-selector-1:checked ~ .content .content-2,.tabs input.tab-selector-1:checked ~ .content .content-3,.tabs input.tab-selector-1:checked ~ .content .content-4 {
    z-index:100;
    -ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    filter:alpha(opacity=100);
    opacity:1;
    -webkit-transition:opacity ease-out .2s .1s;
    -moz-transition:opacity ease-out .2s .1s;
    -o-transition:opacity ease-out .2s .1s;
    -ms-transition:opacity ease-out .2s .1s;
    transition:opacity ease-out .2s;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:42:48.793

您正在从错误的方式解决问题。

您不应该向 css 样式添加类。您通过 c# 代码动态添加到页面的元素都应该具有相同的 css 类。

CSS永远不应该是动态的（IMO）。

# c# - UIControls 显示在父控件边界之外

> ID：11715676
> 
> 赞同：2
> 
> 时间：2012-07-30T05:07:06.883
> 
> 标签：c#, .net, wpf

我注意到当控件是其他控件的子控件并且部分位于父控件边界之外时，仍然可以看到控件在父控件边界之外的部分。

例如，我在 Grid 内放置了一个 Image，部分在 Grid 的边界之外，但该 Image 仍然完全显示。

如何将要显示的子控件的数量限制在父控件的绑定范围内？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:35:22.413

要阻止 WPF 在网格边界之外显示图像，您可以在网格上设置[ClipToBounds](http://msdn.microsoft.com/en-us/library/system.windows.uielement.cliptobounds.aspx) ="True"。

# php - php无限循环和彗星？

> ID：11715680
> 
> 赞同：0
> 
> 时间：2012-07-30T05:07:46.380
> 
> 标签：php, comet, infinite-loop

我的 php 脚本似乎有问题，但我不知道它是什么。似乎唯一可能出错的事情与缓存有关，但我不确定。这是我的脚本，我会告诉你代码下面发生了什么：

```
<?php
set_time_limit(0);
header('Content-Type:text/event-stream');
$prevmod=$lastmod=filemtime('chattext.txt');
function waitformod(){
global $lastmod;
global $prevmod;
while($prevmod==$lastmod){
    usleep(100000);
    clearstatcache();
    $lastmod=filemtime('chattext.txt');
    }
echo 'data:'.file_get_contents('chattext.txt').PHP_EOL.PHP_EOL;
flush();
$prevmod=$lastmod;
}
while(true){
waitformod();
}
?> 
```

这应该与 JavaScript EventSource 一起使用，并在其被修改时发送 chattext.txt 的内容。但是，该文件不输出任何内容。我认为这是因为无限循环。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:16:51.800

这样的事情会更好吗？

```
<?php

set_time_limit(0);
header('Content-Type:text/event-stream');

$prevmod = $lastmod = filemtime('chattext.txt');

function waitformod(){
    global $lastmod;
    global $prevmod;

    while($prevmod == $lastmod) {
        usleep(100000);
        clearstatcache();
        $lastmod = filemtime('chattext.txt');
    }

    echo 'data:'.file_get_contents('chattext.txt').PHP_EOL.PHP_EOL;
    flush();

    $prevmod = $lastmod;
}

while(1) {
    waitformod();
} 
```

您当前的代码看起来像是读取文件，输出它，等待它更改，然后终止。

# c++ - c ++：嵌套列表：如何将项目添加到列表列表中

> ID：11715681
> 
> 赞同：1
> 
> 时间：2012-07-30T05:07:59.737
> 
> 标签：c++, list, nested-lists

我是董事会的新成员。我正在使用 MS VS2008。我正在学习列表列表。我正在尝试将元素添加到列表中的列表中。

我在我的程序中指出了我遇到问题的地方。当我调试它时，“beth”被添加到第二个列表（division2），但是当循环退出时，“beth”不在第二个列表中，即使我已经在嵌套循环之外声明了我的所有列表。

任何帮助将不胜感激。

这是代码：

```
struct item
{
string name;
int age;
};
int main()
{
list<item> division1;
list<item> division2;

list< list<item> >WholeCompany;

item s; 
s.name="sandra"; s.age=43; division1.push_back(s);
s.name="Marc"; s.age=19; division2.push_back(s);
s.name="betty"; s.age=34;division2.push_back(s);

WholeCompany.push_back(division1);
WholeCompany.push_back(division2);

list< list<item> >::iterator WholCompIter;
list<item>::iterator itemIter;

for ( WholCompIter = WholeCompany.begin(); WholCompIter != WholeCompany.end();      WholCompIter++ )
    {
    //incorrect
    //list<item> listEntry = *WholCompIter;
    //instead use:
    list<item> listEntry = *WholCompIter;

    for ( itemIter = listEntry.begin(); itemIter != listEntry.end(); itemIter++ )
    {   
        //MY ISSUE IS RIGHT HERE! How can I add the value to the list, but      the list forgets it when it exit loop
        if(itemIter->name =="betty")
        {
            item s; s.name="beth"; s.age=65;
            listEntry.insert(itemIter,s);//problem is here.
                            //I have also tried
                            //listEntry.push_back(s) but the output doesn't show it

        }
    }
}
    //incorrect. 
//for(list<item>::iterator i=division2.begin(); i!=division2.end();++i)
//  cout<<i->name<<" "<<i->age<<endl;
    //instead use:
    for ( WholCompIter = WholeCompany.begin(); WholCompIter != WholeCompany.end(); WholCompIter++ )
{
    list<item>listEntry = *WholCompIter;

    for ( itemIter = listEntry.begin(); itemIter != listEntry.end(); itemIter++ )
    {   
    cout<<itemIter->name<<" "<<itemIter->age<<endl; 

    }
    cout<<endl; cout<<endl;
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:11:14.697

你只是在这里创建一个*副本*：

```
list<item> listEntry = *WholCompIter; 
```

相反，您需要一个参考：

```
list<item>& listEntry = *WholCompIter; 
```

* * *

此外，您正在从`division2`底部的循环中打印。请记住，这`WholeCompany`只是`division2`初始化时的副本。由于您已经`WholeCompany`通过上面的参考进行了修改，因此您需要`WholeCompany`在底部的输出循环中访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:11:46.233

使固定。

```
for ( WholCompIter = WholeCompany.begin(); WholCompIter != WholeCompany.end();      WholCompIter++ )
    {
    list<item>& listEntry = *WholCompIter;

    for ( itemIter = listEntry.begin(); itemIter != listEntry.end(); itemIter++ )
    {   
        //MY ISSUE IS RIGHT HERE! How can I add the value to the list, but      the list forgets it when it exit loop
        if(itemIter->name =="betty")
        {
            item s; s.name="beth"; s.age=65;
            listEntry.insert(itemIter,s);//problem is here.
                            //I have also tried
                            //listEntry.push_back(s) but the output doesn't show it

        }
    }
} 
```

当您键入`list<item> listEntry`时创建局部**变量**，然后在代码中将其分配给返回值的**副本**`list<list<item>>::iterator::operator *`，当您更改它时，对您的`list WholeCompany`.

在字符串中

```
WholeCompany.push_back(division1);
WholeCompany.push_back(division2); 
```

您推入and的`wholeCompany` **副本**，因此，当您更改 contains of 、 contains of或**will not changed 时**。`division1``division2``WholeCompany``division1``division2`

# .htaccess - .htaccess 将文件夹重定向到 url

> ID：11715684
> 
> 赞同：34
> 
> 时间：2012-07-30T05:08:14.060
> 
> 标签：.htaccess, redirect

我正在尝试将文件夹及其所有子文件重定向到带有 .htaccess 文件的 URL。

但

```
Redirect 301 /abc/cba/ http://www.aaa.com/ 
```

将`/abc/cba/ddd/index.html`重定向到`http://www.aaa.com/ddd/index.html`

我想要的是重定向`/abc/cba/ /abc/cba/ddd/index.html`到`http://www.aaa.com/`

有人可以帮忙吗？谢谢。如果有什么不清楚的，请告诉我。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-30T05:34:51.673

默认情况下，`Redirect`排序将路径节点*映射*到新路径节点，因此第一个路径之后的任何内容都会附加到目标 URL。

尝试：

```
RedirectMatch 301 ^/abc/cba/ http://www.aaa.com/? 
```

或者，如果您更愿意使用 mod_rewrite 而不是 mod_alias：

```
RewriteEngine On
RewriteRule ^/?abc/cba/ http://www.aaa.com/? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-21T15:45:09.507

这是另一个对我有用的 mod_rewrite 规则示例

我想将一个子目录重定向到同一个域的根目录。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^sub_directory/(.*)$ /$1 [R=301,NC,L]
</IfModule> 
```

更多示例可以在这里找到：[http ://coolestguidesontheplanet.com/redirecting-a-web-folder-directory-to-another-in-htaccess/](http://coolestguidesontheplanet.com/redirecting-a-web-folder-directory-to-another-in-htaccess/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-18T00:03:32.910

我更喜欢以下方法：

```
 RewriteEngine on
 RewriteCond %{REQUEST_URI}  ^/somedir           [NC]
 RewriteRule /(.*) http://somesite.com/lost/$1 [R=301,L] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-10T15:41:02.960

我不得不将网址从旧网站版本重新路由到新版本，所以这是我将任何链接从 about-us/* 重新路由到 about-us.html

```
RewriteEngine on
RewriteRule ^about-us/(.*)$ about-us.html [R=301,L] 
```

它不做的是重写类似*domain.com/about-us/thing.html => domain.com/about-us.html*的东西。

它确实适用于没有扩展的东西*domain.com/about-us/something-in-url => domain.com/about-us.html*

我添加了以下几行来重定向 .jpg 和 .png，但它不适用于 .html，我不知道为什么。

```
RewriteRule ^about-us/(.*).jpg about-us.html [R=301,L]
RewriteRule ^about-us/(.*).png about-us.html [R=301,L] 
```

# spring - AOP MethodSecurityInterceptor 没有在 Spring Security 中被调用

> ID：11715686
> 
> 赞同：1
> 
> 时间：2012-07-30T05:08:41.640
> 
> 标签：spring, spring-security, spring-aop

我正在使用 Spring Security 3.0.7，我的应用程序部署在 JBOSS 上。

我正在为我的应用程序设置**org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor**以添加对服务层中某些方法的调用的限制。但由于某种原因，拦截器没有被调用，我能够从具有角色**ROLE_USER**的用户调用所有方法。我的 security.xml 看起来像这样：

```
<security:http auto-config='true' authentication-manager-ref="authenticationManager" use-expressions="true" request-matcher="ant" create-session="always"
    entry-point-ref="authenticationEntryPoint" >

    <security:intercept-url pattern="/login.jsp" access="permitAll" />
    <security:intercept-url pattern="/configure/" access="hasRole('ROLE_ADMIN')"  />
    <security:intercept-url pattern="/**" access="isAuthenticated()" />

    <security:form-login login-page="/login.jsp" authentication-failure-url="/login.jsp?error=Authentication Failed!" default-target-url="/landing.do" 
    always-use-default-target="true"  />

    <security:logout invalidate-session="true" delete-cookies="true" />

    <security:session-management>
        <security:concurrency-control max-sessions="1" error-if-maximum-exceeded="true" expired-url="/login.jsp"/>
    </security:session-management>    
</security:http>

<security:method-security-metadata-source id="securityMetadataSource">
        <security:protect method="com.services.CreateUserService.createUser" access="ROLE_ADMIN"/>
        <security:protect method="com.services.DeleteUser.deleteUser" access="ROLE_ADMIN"/>
</security:method-security-metadata-source>

<security:global-method-security authentication-manager-ref="authenticationManager" access-decision-manager-ref="accessDecisionManager" 
metadata-source-ref="securityMetadataSource" pre-post-annotations="disabled" secured-annotations="disabled" />

<bean id="authenticationEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <property name="loginFormUrl" value="/login.jsp"/>
</bean>

<bean id="myRoleVoter" class="com.interceptors.MyRoleVoter" />

<bean id="authenticationManager" class="org.springframework.security.authentication.ProviderManager" >
    <property name="providers">
        <list>
            <ref local="daoAuthenticationProvider"/>
        </list>
    </property>
</bean> 

<bean id="accessDecisionManager" class="com.interceptors.MyAccessDecisionManager"  p:allowIfAllAbstainDecisions="false" >
    <property name="decisionVoters">
        <list>
            <ref local="myRoleVoter"/>
        </list>
    </property> 
</bean>

<bean id="methodSecurity" class="org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor">
        <property name="authenticationManager" ref="authenticationManager"/>
        <property name="accessDecisionManager" ref="accessDecisionManager"/>
        <property name="securityMetadataSource" ref="securityMetadataSource" />
</bean> 
```

身份验证部分工作得非常好。但是，我的 MethodSecurityInterceptor 从未被调用过，因此我的 AccessDecisionManager 或 RoleVoter 也不会被调用。

如果我在第一行添加我的 accessDecisionManager 的引用，那么我的身份验证层将停止工作。所有请求都以匿名用户身份传递给 AccessDecisionManager。

```
<security:http security="none" pattern="/login.jsp" />

<security:http auto-config='true' authentication-manager-ref="authenticationManager" access-decision-manager-ref="accessDecisionManager" use-expressions="true" request-matcher="ant" create-session="always"
    entry-point-ref="authenticationEntryPoint" > 
```

我知道要么我缺少一些 TINY 配置，但我无法在文档中的任何地方找到该配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:01:47.100

可能，您已经在应用程序根上下文中声明了 MethodSecurityInterceptor，并希望它适用于 servlet 上下文中的 bean。

如果要`global-method-security`在 servlet 上下文中工作，则应在 servlet xml 配置中显式声明它。

在错误的上下文中声明 AOP 拦截器是一个非常常见的错误，因此请检查您的服务层 bean 是否没有在 servlet 上下文中创建（例如通过自动扫描）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:07:16.833

我已经想出了解决方案。我必须定义两个身份验证管理器和一个访问决策管理器。一个身份验证管理器进入我的根上下文中，全局方法安全性将使用它来创建表单登录身份验证机制。

另一个身份验证管理器和访问决策管理器进入服务上下文，它将用于创建我的自定义方法安全拦截器。

**applicationContext-Security.xml**

```
<!-- The authentication manager responsible for authenticating the users -->
<bean id="authenticationManager" class="org.springframework.security.authentication.ProviderManager" >
    <property name="providers">
        <list>
            <ref local="daoAuthenticationProvider"/>
        </list>
    </property>
</bean> 
```

服务的上下文文件。 **服务.security.xml**

```
 <!--we need a separate authentication manager for method security -->
    <bean id="methodAuthenticationManager" class="org.springframework.security.authentication.ProviderManager" >
        <property name="providers">
            <list>
                <ref local="daoAuthenticationProvider"/>
            </list>
        </property>
    </bean> 

    <!--we need a separate accessDecisionManager for method security -->
    <bean id="methodAccessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased" >
        <property name="decisionVoters">
            <list>
                <ref local="myRoleVoter"/> <!-- the voter will decide weather methodInvocation is allowed or not -->
            </list>
        </property> 
    </bean>

    <!-- The Method Security Interceptor to intercept all the calls to methods -->
    <bean id="methodSecurityInterceptor" class="org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor">
        <property name="authenticationManager" ref="methodAuthenticationManager"/>
        <property name="accessDecisionManager" ref="methodAccessDecisionManager"/>
        <property name="securityMetadataSource" ref="swiftSecurityMethodMetadataSource" />
    </bean>

<security:method-security-metadata-source id="securityMetadataSource">
    <security:protect method="fullyQualifiedMethod" access="Administrator"/>
</security:method-security-metadata-source>

<security:global-method-security authentication-manager-ref="methodAuthenticationManager" access-decision-manager-ref="methodAccessDecisionManager" 
    metadata-source-ref="swiftSecurityMethodMetadataSource" jsr250-annotations="disabled" secured-annotations="disabled"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T18:27:01.417

`MethodSecurityInterceptor`另一个不调用AOP 的常见原因- 您错过`cglib`或类似的字节码操作。

所以只能`java.lang.reflect.Proxy`使用，因此不可能代理**私有**方法！只需`@Secured`公开方法 - 一切都会好起来的！

# cordova - Phonegap 中的进度条

> ID：11715690
> 
> 赞同：1
> 
> 时间：2012-07-30T05:09:04.603
> 
> 标签：cordova, progress-bar

需要进度条以使用 phonegap 指示我的应用程序中的电池电量。但是在 phonegap 中搜索进度条时，它会显示加载指示器等。没有什么对我的项目有用。有谁知道帮帮我。需要这样。![在此处输入图像描述](../Images/a2a773ae9efa1cdfe46b366cb7d1e95d.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-30T05:44:59.620

您可以使用 jquery UI 进度条来执行此操作。

[在此处点击](http://jqueryui.com/demos/progressbar/ "jQuery UI 进度条")此链接。

希望这是您正在寻找的。

示例用法是这样的

jQuery 代码

```
$( "#progressbar" ).progressbar({
  value: 37
}); 
```

HTML

```
<div id="progressbar"></div> 
```

# linux - 使用 getaddrinfo 缓存 DNS

> ID：11715698
> 
> 赞同：7
> 
> 时间：2012-07-30T05:10:22.467
> 
> 标签：linux, networking, dns, ip

我正在使用系统调用 getaddrinfo() 从 DNS 获取 IP 地址。

我想知道缓存信息是否存储在Linux上？

如果存储了缓存信息，是否可以清除缓存信息？

我想知道如何清除缓存信息。

谢谢 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T06:28:21.990

一般来说，不，glibc 解析器不会缓存`getaddrinfo`结果。

在运行的系统上[`nscd`](http://www.kernel.org/doc/man-pages/online/pages/man8/nscd.8.html)，某些名称可能会被缓存。（至少，`gethostbyname`可能会通过缓存；我不确定`getaddrinfo`。）重新启动守护程序以清除缓存。

通常预计上游（可能是递归的）DNS 解析器正在执行缓存。在大多数情况下，这超出了您的控制范围。

# c++ - valgrind 是否在 Debian Wheezy 上捕获 Qt 4.8 在极简应用程序中泄漏内存？

> ID：11715699
> 
> 赞同：2
> 
> 时间：2012-07-30T05:10:29.223
> 
> 标签：c++, qt, gcc, c++11, valgrind

我在这里阅读了几个问题，人们通过 valgrind 运行最小的 Qt 程序，并发布结果。查看输出的一般结论是“嗯，没有实际的泄漏，这就是 Qt 使用内存的方式”。

但是，我得到的基本上是空的应用程序看起来……更糟。我正在“肯定丢失”泄漏，例如：

[https://gist.github.com/3204769](https://gist.github.com/3204769)

```
==32147== LEAK SUMMARY:
==32147==    definitely lost: 848 bytes in 11 blocks
==32147==    indirectly lost: 1,756 bytes in 53 blocks
==32147==      possibly lost: 1,720 bytes in 9 blocks
==32147==    still reachable: 121,019 bytes in 2,257 blocks
==32147==         suppressed: 0 bytes in 0 blocks 
```

运行：

> valgrind --tool=memcheck --leak-check=yes --show-reachable=yes --num-callers=20 --track-fds=yes ./testing 2> valgrind.log

我对这个设置有点前沿，试图获得一个相对较新的 C++11 编译 gcc：

*   Debian Wheezy 3.2.0-2-686-pae
*   gcc (Debian 4.7.1-2) 4.7.1

如果我这样做，`sudo kwrite --version`我会得到：

```
Qt: 4.8.1
KDE Development Platform: 4.8.4 (4.8.4)
KWrite: 4.8.3 (4.8.3) 
```

有类似情况的人，或者知道这里发生了什么吗？：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:35:14.180

大多数东西似乎是您正在使用的库的内部“全局”状态。人们可能会争论通过“程序终止”来清理全局资源是否是一种好的方式，但如果做得好，它可能是可以的。我个人不喜欢它，因为它使检测真正的泄漏变得更加困难......

# android - 无法在三星 Galaxy S2 的 VideoView 中播放 RTSP 视频

> ID：11715702
> 
> 赞同：5
> 
> 时间：2012-07-30T05:10:40.593
> 
> 标签：android, rtsp, rtp, galaxy, android-videoview

我正在尝试使用 播放实时 RTSP 视频（来自`rtsp://media2.tripsmarter.com/LiveTV/BTV/`）`VideoView`，这是我的代码：

```
public class ViewTheVideo extends Activity {
    VideoView vv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        vv = (VideoView) this.findViewById(R.id.VideoView);

        Uri videoUri = Uri.parse("rtsp://media2.tripsmarter.com/LiveTV/BTV/");
        vv.setMediaController(new MediaController(this));
        vv.setVideoURI(videoUri);
        vv.requestFocus();
        vv.setOnPreparedListener(new OnPreparedListener() {
            @Override
            public void onPrepared(MediaPlayer mp) {
                vv.start();
            }           
        });
    }
} 
```

此代码在三星 Galaxy Y 上运行良好，甚至在模拟器上也能正常运行，但在三星 Galaxy S2 上无法运行（抱歉，无法播放此视频）！设备和模拟器都在运行 Gingerbread。

这是 LogCat 消息：

```
07-30 10:48:28.310: I/MediaPlayer(24573): uri is:rtsp://media2.tripsmarter.com/LiveTV/BTV/
07-30 10:48:28.310: I/MediaPlayer(24573): path is null
07-30 10:48:28.310: D/MediaPlayer(24573): Couldn't open file on client side, trying server side
07-30 10:49:13.025: W/MediaPlayer(24573): info/warning (1, 26)
07-30 10:49:13.025: I/MediaPlayer(24573): Info (1,26)
07-30 10:49:13.075: E/MediaPlayer(24573): error (1, -1)
07-30 10:49:13.075: E/MediaPlayer(24573): Error (1,-1)
07-30 10:49:13.075: D/VideoView(24573): Error: 1,-1 
```

我无法弄清楚这些错误代码是关于什么的。

三星 Galaxy S2 的流媒体是否存在任何问题？我也尝试过使用 YouTube 流 ( `rtsp://v2.cache2.c.youtube.com/CjgLENy73wIaLwm3JbT_9HqWohMYESARFEIJbXYtZ29vZ2xlSARSB3Jlc3VsdHNg_vSmsbeSyd5JDA==/0/0/0/video.3gp`)，但都是一样的。

**更新：** 后来我用 Galaxy S2 录制了一个视频（格式：3GP，编码器：H.264，比特率：56kbps，帧率：15fps）并使用 VLC 媒体播放器从 PC 流式传输视频。这个可以在 Galaxy S2（和其他）中查看，没有任何错误。但是，无法在 S2 上播放其他视频。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-30T05:28:15.540

@Andro Selva this is how I streamed his link

```
 video_url = "rtsp://media2.tripsmarter.com/LiveTV/BTV/"; 
try {
            videoView =(VideoView)findViewById(R.id.videoView1);
            //Set video link (mp4 format )
            Uri video = Uri.parse(video_url);
            videoView.setVideoURI(video);
            videoView.setOnPreparedListener(new OnPreparedListener() {
            public void onPrepared(MediaPlayer mp) {

                videoView.start();
                }
            });
         }catch(Exception e){
         } 
```

# mysql - 从数据库的 4 列中查找最低分数

> ID：11715707
> 
> 赞同：2
> 
> 时间：2012-07-30T05:11:20.887
> 
> 标签：mysql, sql

如何从表格的 4 个不同列中找到最低分数？因此，如果我的第 1 列的最小值为 4，第 2 列的最小值为 3，第 3 列的最小值为 2，第 4 列的最小值为 1。我希望查询使结果恰好为 1（来自第 1、2、3 和 4 栏）

顺便说一句，我正在使用 MYSQL，谢谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:12:41.420

```
select least(col1, col2, col3, col4) from your_table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T05:16:52.983

您可以使用

```
SELECT LEAST(MIN(column1), MIN(column2), MIN(column3),MIN(column3)) AS Minimum_of_all
from table_name; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T05:17:49.030

按以下方式使用[LEAST](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_least)函数：

```
 SELECT LEAST(t.column1, t.column2,t.column3,t.column4) AS lowest
                                                        FROM table_name t 
```

从上面提到的文档中，

*   如果在 INTEGER 上下文中使用返回值或所有参数都是整数值，则将它们作为整数进行比较。

*   如果在 REAL 上下文中使用返回值或所有参数都是实值，则将它们作为实数进行比较。

*   如果参数包含数字和字符串的混合，则将它们作为数字进行比较。

*   如果任何参数是非二进制（字符）字符串，则将参数作为非二进制字符串进行比较。

*   在所有其他情况下，参数作为二进制字符串进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T05:16:03.783

尝试最少（）（[此处的文档](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_least)）：

```
select least(col1, col2, col3, col4) from table; 
```

# clojure - 检测 Clojure 表达式是否是原始的

> ID：11715708
> 
> 赞同：1
> 
> 时间：2012-07-30T05:11:30.217
> 
> 标签：clojure, primitive

是否有可能以某种方式检测 Clojure 表达式是否保证是原始的？

例如，我想要一个可以做到这一点的宏

```
(is-primitive-expression? (+ 1.0 2.0))
=> true

(is-primitive-expression? (+ 1N 2.0))
=> false 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T05:47:14.020

我不确定我是否完全理解原始表达式是什么（仍在阅读它）。但是，我从`clojure.contrib.repl-utils`被调用中找到了一个函数`expression-info`，该函数声称返回有关表达式是否为原始表达式的信息。

见这里：[http ://clojuredocs.org/clojure_contrib/clojure.contrib.repl-utils/expression-info](http://clojuredocs.org/clojure_contrib/clojure.contrib.repl-utils/expression-info)

我只是复制了源代码并尝试了一下，但发现我需要先进行此导入：

```
(import '(clojure.lang RT Compiler Compiler$C)) 
```

*但是*，我用您的示例进行了尝试，但两者都返回 true （我尝试了带引号和不带引号的表达式，因为我不知道它需要哪一个）：

```
=> (expression-info (+ 1N 2.0))
=> {:class double, :primitive? true} 
=> (expression-info (+ 1.0 2.0))
=> {:class double, :primitive? true}
=> (expression-info '(+ 1.0 2.0))
=> {:class double, :primitive? true}
=> (expression-info '(+ 1N 2.0))
=> {:class double, :primitive? true} 
```

也许其中一些可以为您提供有用的线索/提示，但这可能是非常无益的，因为我并不真正理解您在问什么（还）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T05:26:50.380

a macro that iterates over the form and checks the class of everything
and then verrifies that **all the symbols in the given tree are primitive types** could do the trick. You have to decide if you count things that are macros which expand to primitives as primitive and if so then macroexpand the argument first.

# php - 在 Post Redirect Get 例程期间在 textarea 中回显新行和未转义的值

> ID：11715709
> 
> 赞同：0
> 
> 时间：2012-07-30T05:11:40.517
> 
> 标签：php, html, mysql-real-escape-string

试图在 PRG 周期内重新填充数据的文本区域中保持新行和未转义值的完整性。您在什么时候正确分配变量以便识别新行？

我试过双引号, `nl2br`, `htmlentities`，`stripslashes`但我似乎无法理解。一些尝试：

在初始 prg`$_SESSION`数组期间分配：

```
$_SESSION['prg']['textarea'] = "$textarea"; 
```

从 prg 数组传递到 var 时：

```
$textarea = htmlentities($_SESSION['prg']['textarea']); 
```

回显到文本区域时：

```
<textarea name="textarea"><?php if(isset($textarea)) echo nl2br($textarea); ?></textarea> 
```

以及上述的各种组合，包括最初的`$_POST`，直接在消毒后。

此外，如果有人问：转义按预期工作，db insert 结果很好。只是重新填充的形式使事情发生了变化。

我敢肯定这只是业余时间的症状...仅寻找 php/html 解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:28:13.437

while storing the data use `addslashes($_POST['textarea'])` and while displaying use `stripslashes($textarea)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:20:36.370

`nl2br`如果您想让换行符正确显示在文本区域中，我认为您不想在填充文本区域时调用。不过这`htmlentities`部分很好。

# perl - 带日期的 perl 正则表达式

> ID：11715723
> 
> 赞同：0
> 
> 时间：2012-07-30T05:13:27.037
> 
> 标签：perl

尝试验证格式的日期 (YYYY_MM_DD)。将测试变量设置为 2012_4_123 它在脚本运行后打印“有效格式”。它应该给出“无效错误”消息，因为在正则表达式中，日部分被检查为至少 1 位且不超过 2 位。不确定它如何将“有效格式”打印为输出消息。

```
my $test="2012_4_123";
if ($test !~ m/^(\d{4})_(\d{1,2})_(\d{1,2})/)
{
  print "invalid format\n";
}
else
{
 print  "valid format\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:15:15.113

```
-if ($test !~ m/^(\d{4})_(\d{1,2})_(\d{1,2})/)
+if ($test !~ m/^(\d{4})_(\d{1,2})_(\d{1,2})$/) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:15:16.527

你`$`最后错过了一个。它匹配字符串`"2012_4_12"`，因为您没有告诉它也匹配字符串的结尾。你的正则表达式应该是这样的。

```
$test !~ m/^(\d{4})_(\d{1,2})_(\d{1,2})$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T06:58:57.223

简单地添加 $ 解决了最初允许一天多于两位数的问题，但引入了一个更微妙的错误：尽管末尾有换行符，日期现在仍然可以验证。根据您的应用程序，这可能无关紧要，但可以通过使用以下示例中的正则表达式来避免：

```
use strict;
use warnings;

my @tests = (
    '2012_4_123',
    '2012_11_22',
    "2012_11_22\n",
);

use Data::Dumper;
print Dumper \@tests;

foreach my $test (@tests) {
    if ( $test !~ m/\A(\d{4})_(\d{1,2})_(\d{1,2})\z/smx )
    {
        print "invalid format\n";
    }
    else
    {
        print "valid format\n";
    }
} 
```

注意：`/smx`是*Perl Best Practices*推荐的，我用它来编写我的正则表达式，除非有特定的需要不需要它，但如果你不习惯它，它可能会让你绊倒。

`/s`并`/m`允许您更轻松地处理多行字符串；`/s`因为`.`然后将匹配换行符并`/m`允许您分别使用`^`和`$`匹配行的开头和结尾，`\A`然后`\z`将匹配整个字符串的开头和结尾。

`/x`只是允许正则表达式中的空格和注释，但如果你真的想匹配它，你需要转义空格。

在这种情况下，无论`\z`使用.`$``/smx`

此外，查看一个模块来执行日期验证而不仅仅是日期格式验证可能不是一个坏主意（同样，这取决于您使用它的目的）。请参阅[有关 perlmonks 的讨论](http://www.perlmonks.org/?node_id=564594)。

# php - preg_replace 替换多余的符号

> ID：11715725
> 
> 赞同：1
> 
> 时间：2012-07-30T05:13:53.727
> 
> 标签：php, arrays, preg-replace

我的问题与从返回数组中删除额外代码有关。

该数组当前`/\b`在名称周围有这个，然后`\b/`在后面。
有太多要手动完成的，所以我正在`preg_replace`考虑取出额外的东西。

我只是不确定这是否是最简单的方法。

例子：

```
'/\bAngelena\b/','/\bAngeles\b/','/\bAngelia\b/','/\bAngelic\b/','/\bAngelica\b/','/\bAngelika\b/','/\bAngelina\b/','/\bAngeline\b/','/\bAngelique\b/','/\bAngelita\b/','/\bAngella\b/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:38:06.547

```
foreach ($array as $k => $v) {
    $array[$k] = preg_replace ("#/\\b|\\b/#", "", $v);
} 
```

会做你要求的。:)

# r - 如何更改R中的日期格式

> ID：11715727
> 
> 赞同：-2
> 
> 时间：2012-07-30T05:14:41.343
> 
> 标签：r, date, format

我有一些日期格式如下：

```
 V1  V2   V3
1 20100420 915   120
2 20100420 920   150
3 20100420 925   270
4 20100420 1530  281 
```

每行3列，第1行表示：2010-04-20 09:15 120

现在我想将其更改为 1 列（时间序列）：

```
 V3
1 20100420 09:15   120
2 20100420 09:20   150
3 20100420 09:25   270
4 20100420 15:30   281 
```

或者：

```
 V3
1 20100420 9:15    120
2 20100420 9:20    150
3 20100420 9:25    270
4 20100420 15:30   281 
```

我怎么能在 R 中实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T06:45:40.630

`?strptime`并且`?sprintf`是你的朋友：

重新创建数据集：

```
test <- read.table(textConnection("V1  V2 V3
20100420 915 120
20100420 920 150
20100420 925 270"),header=TRUE) 
```

做一些粘贴：

```
strptime(
paste(
    test$V1,
    sprintf("%04d", test$V2),
    sep=""
),
format="%Y%m%d%H%M"
) 
```

结果：

```
[1] "2010-04-20 09:15:00" "2010-04-20 09:20:00" "2010-04-20 09:25:00" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T06:52:09.757

首先，修复您的格式并使用类似的包`xts`来获取正确的时间序列对象：

```
# Read in the data. In the future, use `dput` or something else
# so that others can read in the data in a more convenient way
temp = read.table(header=TRUE, text=" V1  V2   V3
1 20100420 915   120
2 20100420 920   150
3 20100420 925   270
4 20100420 1530  281")

# Get your date object and format it to a date/time object
date = paste0(temp[[1]], apply(temp[2], 1, function(x) sprintf("%04.f", x)))
date = strptime(date, format="%Y%m%d%H%M")

# Extract just the values
values = temp[[3]]

# Load the xts package and convert your dataset
require(xts)
xts(values, order.by=date)
#                     [,1]
# 2010-04-20 09:15:00  120
# 2010-04-20 09:20:00  150
# 2010-04-20 09:25:00  270
# 2010-04-20 15:30:00  281 
```

在日期转换中：

*   `apply(temp[2], 1, ...)`逐行查找 temp 的第二列并将数字重新格式化为四位数。
*   然后，`paste0`将所有日期时间信息组合到一个向量中。
*   最后，`strptime`将该字符向量转换为适当的日期时间对象。

# 更新

当然，如果你只想要一个 normal `data.frame`，你也可以这样做，但我强烈建议使用类似的东西，`zoo`或者`xts`如果你想做实时序列分析。

这是简单的`data.frame`步骤（在之前创建`date`and`values`对象之后）。

```
data.frame(V3 = values, row.names=date)
#                      V3
# 2010-04-20 09:15:00 120
# 2010-04-20 09:20:00 150
# 2010-04-20 09:25:00 270
# 2010-04-20 15:30:00 281 
```

# .net - 如何在全屏模式下以 Windows 形式拉伸内面板？

> ID：11715728
> 
> 赞同：5
> 
> 时间：2012-07-30T05:14:49.563
> 
> 标签：.net, winforms, fullscreen, formpanel

我有一个全屏运行的 Windows 应用程序，并且我的表单中有一些面板，我希望它们在宽度上伸展，我的意思是如何将宽度 = 100% 添加到这些面板？

如下图所示，右侧面板是我的内部面板（容器面板），应该可以拉伸，它包含许多项目：2 个面板、工具条和一个网格。我只是将 Doc="Fill" 和 Anchor="top; right; left; bottom" 设置为它，但没有任何改变。

![在此处输入图像描述](../Images/1cebbc77910818fcc5460e85d0b5ee60.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T05:22:08.717

要使面板伸展到整个表单，请更改`Anchor`面板控件的属性并将其设置为所有四个。调整控件的大小以拉伸到整个窗体。

```
panel1.Anchor = AnchorStyles.Top | AnchorStyles.Right | AnchorStyles.Bottom | AnchorStyles.Left; 
```

其次用于制作全屏表单：

```
this.WindowState = FormWindowState.Maximized;
this.FormBorderStyle = FormBorderStyle.None; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T05:16:54.510

在 Windows 窗体中，有两种方法可以使用窗体制作控件大小：`Dock`和`Anchor`属性：

![在此处输入图像描述](../Images/9e617e15aa70afd852b276c0c366d03b.png) ![在此处输入图像描述](../Images/3539d2ebbde8346827fa8607f4e87d9c.png)

停靠为您提供了一种在表单边缘设置控件和中心控件的方法。`Anchor`允许您声明控件与给定的一组边之间的距离应始终相同。如果您同时启用左边缘和右边缘，那么它将随着表单调整大小而调整宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-27T23:49:54.790

锚让我很头疼。在 WinForms 中，我更喜欢使用 TableLayoutPanel 进行流畅的布局。

只需将 TableLayoutPanel 的 Dock 设置为 Fill，您就可以使用绝对或相对大小指定行和列。然后只需将控件添加到表格的正确单元格并将其 Dock 设置为 Fill。

来自 WPF，这类似于使用 Grid 并指定行和列定义。您还可以将 TableLayoutPanels 放在其他 TableLayoutPanels 中。

# iphone - iPhone中我的目录路径中的文件夹名称

> ID：11715734
> 
> 赞同：3
> 
> 时间：2012-07-30T05:15:33.757
> 
> 标签：iphone, ios, ipad, nsfilemanager, nsdocumentdirectory

我是 iPhone 新手，

我想检查我的文档目录中有多少个文件夹，我想获取所有文件夹的名称，我想将它存储在我的数组中。

我只想要文件夹的名称，而不想要文件夹内的内容。

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:26:30.330

```
NSFileManager *mgr = [NSFileManager defaultManager];
NSString *documentsDir [NSSearchPathsForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSArray *allFilesInDocuments = [mgr contentsOfDirectoryAtPath:documentsDir error:NULL];
NSMutableArray *found = [NSMutableArray array];
for (NSString *filename in allFilesInDocuments)
{
    NSString *fullPath = [documentsDir stringByAppendingPathComponent:filename];
    BOOL isDir;
    [mgr fileExistsAtPath:fullPath isDirectory:&isDir];
    if (isDir) [found addObject:fullPath]; // or filename
} 
```

现在`found`应该包含 Documents 目录的子目录的所有路径/名称（即 Documents 目录中的条目，它们本身就是目录。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T05:26:17.057

```
 #define  rootFileName  XXXXXXXX   
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *yourDirectory = [documentsDirectory stringByAppendingPathComponent:rootFileName];
    //fileList便是包含有该文件夹下所有文件的文件名及文件夹名的数组
    NSArray *fileList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:yourDirectory error:nil];

        for(int i = 0; i < [fileList count]; i++)
        {
            NSString *fileName = [fileList objectAtIndex:i];
            NSLog(@"yourFileName:%@",fileName);
            if([fileName isEqualToString:@".DS_Store"])
            {
                NSString *dotDS_StorePath = [NSString stringWithFormat:@"%@/.DS_Store",yourDirectory];
                [[NSFileManager defaultManager] removeItemAtPath:dotDS_StorePath error:nil];
            }
        } 
```

你应该知道一件事，fileLists 有一个更多的文件是 .DS_Store ，该文件是由操作系统创建的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:27:20.647

做这个：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *fileList = [[fileManager directoryContentsAtPath:yourDocumentPath] retain]; // your path here instead (DOCUMENTS_FOLDER)
NSMutableArray *directoryList = [[NSMutableArray alloc] init];
for(NSString *file in fileList) {
    NSString *path = [yourDocumentPath stringByAppendingPathComponent:file]; // create path for directory and check it exits or not as directory
    BOOL isDir = NO;
    [fileManager fileExistsAtPath:path isDirectory:(&isDir)];
    if(isDir) {
        [directoryList addObject:file];
    }
}
NSLog(@"%@", directoryList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T05:22:14.903

看看[NSFileManager](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)类

听起来你想要`subpathsAtPath:`这里的方法是示例代码

```
BOOL isDir=NO;
NSArray *subpaths;
NSString *fontPath = @"/System/Library/Fonts";
NSFileManager *fileManager = [[NSFileManager alloc] init];
if ([fileManager fileExistsAtPath:fontPath isDirectory:&isDir] && isDir)
    subpaths = [fileManager subpathsAtPath:fontPath];
[fileManager release]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T05:31:44.290

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];

NSLog(@"files array %@", filePathsArray); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-19T04:09:05.393

最简单的方法：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSFileManager *manager = [NSFileManager defaultManager];
NSArray *imageFilenames = [manager contentsOfDirectoryAtPath:documentsDirectory error:nil];

for (int i = 0; i < [imageFilenames count]; i++)
    {

    NSString *imageName = [NSString stringWithFormat:@"%@/%@",documentsDirectory,[imageFilenames objectAtIndex:i] ];

        if (![[imageFilenames objectAtIndex:i]isEqualToString:@".DS_Store"])
        {
          NSLog(@"\n %@",imageName);
        }
    } 
```

# javascript - 如何在 cakephp 中使用 javascript 验证我的 html 表单控件？

> ID：11715739
> 
> 赞同：0
> 
> 时间：2012-07-30T05:16:19.777
> 
> 标签：javascript, jquery, cakephp, popup

我正在使用弹出窗口并在其中应用表单。现在我希望使用 javascript 验证我的控件。但是，每当我尝试提交表单时，它根本不会验证我的表单字段，而只是提交页面

我的js代码如下：

```
function validateForm()
 {  
    var regex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
    var uname = document.getElementById('user_name').value;
    if(uname=="")
    {
        alert("You cannot leave the email field empty");
        return false;
    }
    else if(uname.search(regex) == -1)
    {
        alert("Invalid email address format");
        return false;
    }
    else
    {
        return true;
    }
    return true;

 } 
```

我的 HTML div 代码如下所示。我使用了 div 因为我的弹出窗口仅从该 div 加载：

```
<div id="logincontent">
<div class="form-box-top">
    <div class="form-box-bottom">
    <?php echo $this->Form->create('User',array('controller' => 'users', 'action' => 'login', 'id'=>'login', 'name'=>'login','onsubmit'=>'return validateForm();'));?>
        <div class="form-box-middle">
            <div class="login-form">
                <div class="re-title3">
                    <a class="pass" onclick="forget();" href="#">forgot password</a>
                </div>
                <div class="input-row">
                    <label>EMAIL</label>                    
                    <?php echo $this->Form->input('username', array('label' => '','class'=>'required','style'=>'margin: -5px 0px 0px 24px;','id'=>'user_name')); ?>
                </div>
                <div class="input-row"> 
                    <label>PASSWORD</label>
                    <?php echo $this->Form->input('password', array('type'=>'password','class'=>'required','label' => '','style'=>'margin: -5px 0px 0px 24px;')); ?>
                </div>
            </div>
            <div class="button_3">
                <?php echo $this->Form->submit('',array('label' => '','class'=>''));?>
            </div>
            <div class="button_3_1">
            <a style="background: url(<?php echo $this->webroot       ?>/images/registor-bt2.png) no-repeat left top;
float: left;border: 0px;width: 236px;height: 47px;" onclick="register()"; href="#"></a>
            </div>
            <div class="cr"></div>
        </div>
    <?php echo $this->Form->end(); ?>
    </div>
</div> 
```

现在，每当我提交表单时，我都希望我的字段由 js 函数验证

我尝试了很多，但不知道它会产生恶意结果或无法预测的结果。

任何建议都将受到欢迎和赞赏..

提前谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:17:07.443

如果您还没有使用它，请安装 firebug。

我建议使用[JQuery UI 对话框 -> modal form & validation](http://jqueryui.com/dialog/#modal-form)

如果您不想使用它，您可能至少要查看**第 16 行提供的正则表达式代码。**

# java - 接口使用

> ID：11715746
> 
> 赞同：2
> 
> 时间：2012-07-30T05:16:55.460
> 
> 标签：java, interface

能不能有一个实现了接口的类，在这个类的实例化过程中选择是否使用接口中的方法？因此具有使用接口的对象 A 和不使用接口的对象 B。

谢谢

**更新：**

假设你有一个 Professor 类，并且这个类实现了一个名为 Employer 的接口，该接口具有employ(rAssist x) 抽象方法。

现在我想从实现此接口的教授类中实例化 2 个对象对象 A - 教授**可以**雇用研究助理，对象 B - 教授**不能雇用**研究助理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T05:21:41.300

> ***能不能有一个实现了接口的类，在这个类的实例化过程中选择是否使用接口中的方法？***

不，如果类`C`实现了接口，那么所有的实例都`C`将提供接口中声明的方法。

你可以做的是类似

```
class MyClass implements MyInterface {

    @Override
    void interfaceMethod() {
        System.out.println("Interface method");
    }
} 
```

然后做

```
MyClass x = new MyClass();

MyClass y = new MyClass() {
    @Override
    void interfaceMethod() {
        throw new UnsupportedOperationException();
    }
}; 
```

实际上，`x`支持使用`interfaceMethod`while`y`不支持。但请注意...

*   *在编译时*`y.interfaceMethod`不会阻止使用 of ，即类型系统不会强制执行。

**   使用此解决方案，您实际上是在创建一个（匿名）*子类*并将`MyClass`其实例分配给`y`.* 

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:26:10.003

您的意思是您希望 A 类和 B 类实现一个通用接口，但您不想实现 B 类中的所有方法吗？

简单来说，接口意味着它是一种契约，实现它的所有类都应遵循该契约。因此，如果您希望 B 类实现该接口，则 B 类也应遵循相同的契约。但是如果你不想实现任何方法，你总是可以这样做。

```
class ISampleInterface {

  void sampleMethod();

  void optionalMethod();

} 

Class A implements ISampleInterface {

    void sampleMethod() {
      //Your Implementation
    }

    void optionalMethod() {
      //Your Implementation
    }
}

class B implements ISampleInterface {

    void sampleMethod() {
      //Your Implementation
    }

    void optionalMethod() {
      throw new UnsupportedMethodException();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T05:18:49.197

不，这不是`Interface`.

一个`Interface`保证实现将实现它的签名的合约

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T05:24:09.350

接口的思想是为实现接口的类建立一个义务。如果您有要求，您可以使用 java.lang.reflect.Method 反射类在运行时更改方法的可见性。然而，这不是一个干净的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T05:25:17.603

**1.** `Interfaces`在 Java 中引入是因为Java**中不允许多重继承**。

**2.**但就`Design Pattern`用途而言，以下是..

**-** 到`implement certain Roles`。

将Dog**视为****Super 类**，但**Pet dog 和 Wild dog 可以是接口，可以通过 Dog 类的 Sub Classes 来实现。**

**-** 使用时`Behaviors keeps changing`。

考虑你有一个**类绘图**，并且**在其中绘制方法（）**，现在绘制可以是描边、着色等......你必须**将这些行为封装在接口或抽象类中。***

# java - 突出显示 PDF 中的单词

> ID：11715752
> 
> 赞同：4
> 
> 时间：2012-07-30T05:17:37.173
> 
> 标签：java, pdf, word, highlight

我有一个 PDF 和一些关键字。我需要的是在 PDF 中搜索这些关键字，在 PDF 中突出显示它们，然后保存。在此之后，我必须在 Google Docs 中查看此 PDF，并且其中的单词应突出显示。我必须在 Java 中执行此操作。

我的代码是

```
 package com.hiringsteps.ats.util.pdfclownUtil;

    import java.awt.geom.Rectangle2D;
    import java.util.ArrayList;
    import java.util.Collection;
    import java.util.List;
    import java.util.Map;
    import java.util.regex.Matcher;
    import java.util.regex.Pattern;
    import org.pdfclown.documents.Page;
    import org.pdfclown.documents.contents.ITextString;
    import org.pdfclown.documents.contents.TextChar;
    import org.pdfclown.documents.interaction.annotations.TextMarkup;
    import org.pdfclown.documents.interaction.annotations.TextMarkup.MarkupTypeEnum;
    import org.pdfclown.files.File;
    import org.pdfclown.files.SerializationModeEnum;
    import org.pdfclown.util.math.Interval;
    import org.pdfclown.util.math.geom.Quad;
    import org.pdfclown.tools.TextExtractor;

    import com.hiringsteps.ats.applicant.domain.ApplicantKeyWord;
    import com.hiringsteps.ats.job.domain.CustomerJobKeyword;

    public class TextHighlightUtil 
    {
        private int count;
        public Collection<ApplicantKeyWord> highlight(String inputPath, String outputPath, Collection<CustomerJobKeyword> customerJobKeywordList )
        {           
            Collection<ApplicantKeyWord> applicantKeywordList = new ArrayList<ApplicantKeyWord>();
            ApplicantKeyWord applicantKeyword = null;

            // 1\. Open the PDF file!
            File file;
            try
            {
                file = new File(inputPath);
            }
            catch(Exception e)
            {
                throw new RuntimeException(inputPath + " file access error.",e);
            }
            for(CustomerJobKeyword key : customerJobKeywordList) {
                applicantKeyword = new ApplicantKeyWord();
                count = 0;
                // Define the text pattern to look for!
                //String textRegEx = promptChoice("Please enter the pattern to look for: ");
                applicantKeyword.setKey(key);
                Pattern pattern = Pattern.compile(key.getName(), Pattern.CASE_INSENSITIVE);

                // 2\. Iterating through the document pages...
                TextExtractor textExtractor = new TextExtractor(true, true);
                for(final Page page : file.getDocument().getPages())
                {

                  // 2.1\. Extract the page text!
                  Map<Rectangle2D,List<ITextString>> textStrings = textExtractor.extract(page);
                  // 2.2\. Find the text pattern matches!
                  final Matcher matcher = pattern.matcher(TextExtractor.toString(textStrings));
                  // 2.3\. Highlight the text pattern matches!
                  textExtractor.filter(textStrings,
                    new TextExtractor.IIntervalFilter()
                    {
                      public boolean hasNext()
                      {                   
                          //if(key.getMatchCriteria() == 1){
                              if (matcher.find()) {
                                count++;
                                return true;
                              }
                          /*} else if(key.getMatchCriteria() == 2) {
                              if (matcher.hitEnd()) {
                                count++;
                                return true;
                              }
                          }*/
                          return false;

                      }

                      public Interval<Integer> next()
                      {
                          return new Interval<Integer>(matcher.start(), matcher.end());
                      }

                      public void process(Interval<Integer> interval, ITextString match)
                      {
                        // Defining the highlight box of the text pattern match...
                        List<Quad> highlightQuads = new ArrayList<Quad>();
                        {
                          Rectangle2D textBox = null;
                          for(TextChar textChar : match.getTextChars())
                          {
                            Rectangle2D textCharBox = textChar.getBox();
                            if(textBox == null)
                            {textBox = (Rectangle2D)textCharBox.clone();}
                            else
                            {
                              if(textCharBox.getY() > textBox.getMaxY())
                              {
                                highlightQuads.add(Quad.get(textBox));
                                textBox = (Rectangle2D)textCharBox.clone();
                              }
                              else
                              {textBox.add(textCharBox);}
                            }
                          }
                          textBox.setRect(textBox.getX(), textBox.getY(), textBox.getWidth(), textBox.getHeight()+5);
                          highlightQuads.add(Quad.get(textBox));
                        }                  
                        //TextMarkup.setPrintable(true);
                        // Highlight the text pattern match!
                        new TextMarkup(page, MarkupTypeEnum.Highlight, highlightQuads);
//TextMarkup temp = new TextMarkup(page, MarkupTypeEnum.Highlight, highlightQuads);
                        //temp.setMarkupBoxes(highlightQuads);
                        //temp.setPrintable(true);
                     //
                        temp.setVisible(true);
                        //temp.setMarkupType(MarkupTypeEnum.Highlight);
                      }

                      public void remove()
                      {throw new UnsupportedOperationException();}
                    }
                    );
                }
                applicantKeyword.setCount(count);
                applicantKeywordList.add(applicantKeyword);
            }

            SerializationModeEnum serializationMode = SerializationModeEnum.Incremental;
            try
            {
                file.save(new java.io.File(outputPath), serializationMode);
                file.close();
            }
            catch(Exception e)
            {
              System.out.println("File writing failed: " + e.getMessage());
              e.printStackTrace();
             }

            return applicantKeywordList;
          }     

    } 
```

有了这个，我可以突出显示。但是当我在 Google Docs 中呈现 PDF 时，这些单词不再突出显示。如果 PDF 是用 Adob​​e 打开的，它们会突出显示。此外，如果我只是在 Adob​​e Acrobat Professional 中打开并保存 PDF，然后使用 Google Docs 打开它，Google Docs 版本将突出显示单词。

[另请参阅](https://sourceforge.net/projects/clown/forums/forum/607163/topic/4866554)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T04:11:52.533

PDF Clown 的作者报告说，该问题是由于缺少与标记注释关联的显式外观流引起的。[如前所述](http://sourceforge.net/projects/clown/forums/forum/607163/topic/4866554?message=11808640)，*该问题已通过提交到*[Sourceforge.net 上项目的 SVN 存储库](http://sourceforge.net/scm/?type=svn&group_id=176158)的修订解决了

# mysql - mysql中的新数据库和新用户

> ID：11715757
> 
> 赞同：1
> 
> 时间：2012-07-30T05:17:51.727
> 
> 标签：mysql

我遵循了这些步骤。

1）我以root用户身份登录mysql。

2) 我创建了一个名为`"studentdb"`.

3）我使用该数据库并从 sqldump 导入数据库表。

4）我为那个studentdb创建了新用户，并给了那个用户一定的权限。

5）但是当我检查 user 时`select * from mysql.user;`，我找不到我创建的用户。

6）所以，当我使用这个命令检查新创建的数据库时`select * from mysql.db order by db;`，我也找不到它。

7）但是当我使用时`show databases;`，我可以找到新创建的数据库。

那么，为什么我在步骤 6 中找不到新创建的数据库？

作为新数据库的创建用户，我可能缺少哪些步骤`mysql -ublah -p studentdb`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:25:24.250

`6) So, why I couldn't find the newly created db in step 6?`

表`mysql.db`用于存储用户/主机对数据库的访问权限。它不包含所有数据库。

# objective-c - 如何在uitextview中设置html文件？

> ID：11715760
> 
> 赞同：1
> 
> 时间：2012-07-30T05:18:29.920
> 
> 标签：objective-c, ios5, uitextview, xcode4.3

我做了`epub`文件解压缩操作。从这个操作中我得到了`META-INF`,`mimetype`和文件`OPS`。在`OPS`文件中包含文件列表。`.xml`我想`UITextView`用 Html 格式操作的样式显示这些文件。我不想在`UIWebView`. 请指教我的`UITextView`操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:37:28.213

如果可能的应用程序将被拒绝，我认为不可能在 uitextView 中加载 html 内容。

所以尝试属性化 uitextView 来显示不同样式的文本。这里[EGOTextView](https://github.com/enormego/EGOTextView)链接

一种选择可能是使用 uiwebview 而不是 uitextView

# c#-3.0 - C# 中conversion.val 的命名空间是什么？

> ID：11715767
> 
> 赞同：1
> 
> 时间：2012-07-30T05:19:52.187
> 
> 标签：c#-3.0, windows-applications

我在 C# 窗口应用程序中有一个文本框。我想将此文本框的初始值设置为零。所以我使用conversion.val(textbo1.text) 方法。

但它在名称空间中给出了错误。

我使用使用 Microsoft.visulbasic；命名空间，但它不起作用。

那么我将哪个名称空间用于conversion.val()。

请帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:32:48.043

您添加的命名空间是正确的。
参考：http: [//msdn.microsoft.com/en-us/library/9da280t0.aspx](http://msdn.microsoft.com/en-us/library/9da280t0.aspx)

仅添加命名空间可能不起作用，您必须手动添加对 Microsoft.VisualBasic.dll 的引用。

您可以按如下方式添加参考：
- 转到解决方案资源管理器面板。
- 右键单击​​参考 > 添加参考。
- 选择选项卡“.Net”
- 选择组件“Microsoft.VisualBasic”
- 单击确定。

现在您可以使用 Conversion 类。

注意：您可以在查看菜单中找到解决方案资源管理器。

祝你好运！

# c# - 从 CSR 生成 PFX

> ID：11715770
> 
> 赞同：2
> 
> 时间：2012-07-30T05:20:32.640
> 
> 标签：c#, certificate, pfx, csr, certificate-authority

我已经创建了证书签名请求 (CSR)，现在我必须将其发送给证书颁发机构 (CA)，以便它可以对其进行签名并返回给我一个 .PFX 证书。我不想使用 makecert.exe 或 openssl.exe。证书也不应该是自签名的，我必须在 c# 中以编程方式做这件事。

我也不确定 CA 是否会创建 PFX 或者它只会签署 PFX。简而言之，我可以说我需要从此 CSR 生成 .PFX 证书，该证书不是自签名的，而是由 CA 使用 C#.Net 签名的。

我从此[链接](http://perfectresolution.com/?p=499)获得了 CSR 创建代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T23:14:23.547

不，您不能从 CSR 生成 PFX 文件，因为要生成 PFX 文件，您需要私钥。但是 CSR 可以由 CA 签名。

签名后，PFX 文件可以与密钥和签名证书一起导出。

它们是您可以根据 CSR 的生成方式（即 IIS 或 open ssl 等）执行此操作的不同方式

# design-patterns - 这种设计模式的名称是什么（如果是的话）？

> ID：11715774
> 
> 赞同：3
> 
> 时间：2012-07-30T05:20:55.670
> 
> 标签：design-patterns, language-agnostic

我有一个纯粹充当其他类实例的数据存储的类。就像是：

```
class Mover
{
      Position position;
      Velocity linearVelocity;
      Velocity angularVelocity;
 } 
```

半条命（Quake 也是？）引擎用它的`pev`指针来做这种事情，将一堆数据分组到一个容器对象中。

这叫什么？我想阅读一些关于最佳实践和正确命名约定的文章。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:32:17.090

这里没有考虑特定的设计模式。

尽管所考虑的对象称为[**值对象**](http://c2.com/cgi/wiki?ValueObject)

另请参阅：[**值对象是否包含引用对象**](http://c2.com/cgi/wiki?CanValueObjectsContainReferenceObjects)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T05:34:14.997

这里没有明显的设计模式。最多只是一些标准的、简洁的命名约定。

封装本身并不是一种设计模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:36:39.333

对象的组合（“将一堆数据分组到一个容器对象中”）类似于[Object Composition](http://en.wikipedia.org/wiki/Object_composition)。

命名约定类似于[Self Documenting Code](http://en.wikipedia.org/wiki/Self-documenting)。

# java - Java 代码 - 远程执行内存分析

> ID：11715778
> 
> 赞同：1
> 
> 时间：2012-07-30T05:22:03.327
> 
> 标签：java

我正在使用 javac 在服务器中（远程）运行 Java 代码。现在，我想远程执行内存分析，因为正如[YourKit](http://www.yourkit.com/java/profiler/index.jsp)所说，

```
Picked up JAVA_TOOL_OPTIONS:
Cannot start the profiler UI: display is not available on this machine. 
```

任何人都可以帮助我如何轻松地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:38:54.347

如果您的服务器以 YourKit 分析器代理启动（根据输出），您只需启动 YourKit 分析器 UI 并将其连接到远程分析器代理。探查器开始屏幕上有“监控远程应用程序”

这是 YourKit 帮助的直接链接：

[http://www.yourkit.com/docs/11/help/profiling_j2ee_remote.jsp](http://www.yourkit.com/docs/11/help/profiling_j2ee_remote.jsp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:26:28.850

我建议你使用 JProfiler。你可以从[这里](http://www.ej-technologies.com/products/jprofiler/overview.html)得到它并找到很多有用的教程。这里是 JProfiler[手册](http://resources.ej-technologies.com/jprofiler/help/doc/help.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:16:48.730

这正是我们的预生产环境中正在发生的事情......

实际上，如果您想直接在远程计算机上启动 YourkitUI，我目前正在使用的方式是使用 Xmanager->xshell [http://www.netsarang.com/products/xmg_overview.html](http://www.netsarang.com/products/xmg_overview.html) 您还需要将 X-server 安装为前提。您将能够远程运行任何类型的 UI，而不仅仅是您的套件。

还要确保你的 yourkit 启动配置是这样的

```
-agentpath:$YOURKIT_HOME/bin/linux-x86-64/libyjpagent.so=disablestacktelemetry,
disableexceptiontelemetry,builtinprobes=none,delay=20000,sessionname=jboss-pre-prod 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T05:30:35.170

[您的套件远程分析](http://www.yourkit.com/docs/10/help/attach_wizard.jsp)

如果这对你有帮助。如果这个过程没有帮助，我们可以考虑任何其他选择。

# mysql - 按月分组的Mysql查询

> ID：11715782
> 
> 赞同：3
> 
> 时间：2012-07-30T05:22:18.290
> 
> 标签：mysql, group-by, monthcalendar

我想做一些事情，比如从表中获取所有行

```
where date >='2012-05-05' and date<='2012-07-20' 
```

我希望 MySQL 返回`"group by"`行 mont wise 从

```
2012-05-05 to 2012-06-05(incerement 1 month)
2012-06-06 to 2012-07-06(increment 1` month)
and remaining 2012-07-07 to 2012-07-20 (group the remaining 14 days) 
```

我怎样才能编写我的查询来达到同样的效果？

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T06:48:24.787

试试这个解决方案：

您可以通过[*TIMESTAMPDIFF()*](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)函数`GROUP BY`计算从参数最小值 ( `2012-05-05`) + 1 到每行中的日期所经过的月数：[](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

 *```
GROUP BY TIMESTAMPDIFF(MONTH, '2012-05-05' + INTERVAL 1 DAY, date) 
```

我们为您的最小参数 +1 天的原因是：

*   `2012-05-05`to`2012-06-04`是 0 个月，但是...
*   `2012-05-05`to`2012-06-05`是 1 个月

^ 因此，`2012-06-05`当我们实际希望将其与它们分组时，将与已过去 0 个月的日期分开分组。

* * *

**编辑**：我在摆弄这个解决方案，不仅按月间隔分组，而且还显示每个间隔的开始日期***和******结束***日期。

看看这个：

# [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/a0ddf/2/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:26:10.583

您可以使用[case 表达式](http://dev.mysql.com/doc/refman/5.6/en/control-flow-functions.html)，然后根据`case`.

```
SELECT 
  CASE 
    WHEN where date >='2012-05-05' and date<='2012-06-05' THEN 1 
    WHEN where date >='2012-06-06' and date<='2012-07-06' THEN 2 
    ELSE 3 
  END AS period, COUNT(*)
FROM your_table
GROUP BY period 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:43:52.457

希望这有帮助，我假设日期范围是动态的，如下所示：

```
2012-01-01 to 2012-02-01
2012-02-02 to 2012-03-02
2012-03-03 to 2012-04-03
2012-04-04 to 2012-05-04
2012-05-05 to 2012-06-05
... 
```

所以，我可以使用：

```
SELECT *, IF(day(date)>=month(date), month(date), month(date)-1) as PERIOD 
FROM your_tablename 
GROUP BY PERIOD; 
```*

# php - 使用 smarty 以水平顺序显示数组数据

> ID：11715784
> 
> 赞同：1
> 
> 时间：2012-07-30T05:22:32.300
> 
> 标签：php, smarty, sitemap

我无法以正确的顺序获得输出，以便以这种格式将其对齐为**apple.com/sitemap**。我面临的问题是显示值时使用的标签，我无法将它放在正确的位置。

现在，输出是：

```
<ul class= "sitemap">

</ul></li><li><h2>Parent 1</h2><ul>
<li>Sub Cat 1</li>
<li>Sub Cat 2</li>

</ul></li><li><h2>Parent 2</h2><ul>
<li>Sub Cat3</li>
<li>Sub Cat 4</li>
</ul></li><li><h2>Parent 3</a></h2><ul> 
```

如果您看到 ul 标记未正确关闭，因此我无法实现 CSS ..

我已将表创建为：

```
id | parent | name | url  

1  |  0  | Parent1 | Link
2  |  1  | Sub Cat1| Link
3  |  2  | Sub Cat2| Link
4  |  0  | Parent2 | Link 
```

MySQL 查询以获取值：

```
$sql = 'SELECT parent,name, url FROM sitemap ORDER BY CASE WHEN parent =0 THEN id ELSE parent END , CASE WHEN parent =0 THEN 0 ELSE id END'; 
```

在页面上显示数据的行：

```
{foreach from=$sitemap item=c name=sitemap}

{ assign var="tmp" value= $c.parent  }
{ if $tmp==0}

</ul></li><li><h2><a title="{$c.name}" href="{$c.url}">{$c.name}</a></h2><ul>
{else}

<li><a title="{$c.name}" href="{$c.url}">{$c.name}</a></li>

{/if}
{/foreach} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:50:52.573

你可能正在寻找类似的东西

```
{foreach from=$sitemap item=c name=sitemap}
    {* open <ul> on first element, only if it is has a parent *}
    {if $smarty.foreach.sitemap.first && $c.parent}<ul>{/if}

    {if !$c.parent}
        {* if this is not the first element, close previous <ul> *}
        {if !$smarty.foreach.sitemap.first}</ul>{/if}
        {* output headline for this <ul> *}
        <h2><a title="{$c.name}" href="{$c.url}">{$c.name}</a></h2>
        {* open new <ul> *}
        <ul>
    {else}
        <li><a title="{$c.name}" href="{$c.url}">{$c.name}</a></li>
    {/if}

    {* close <ul> after last element *}
    {if $smarty.foreach.sitemap.last}</ul>{/if}
{/foreach} 
```

# java - 从整个 URL 中提取 jsp 页面

> ID：11715786
> 
> 赞同：1
> 
> 时间：2012-07-30T05:22:53.343
> 
> 标签：java, jsp, url

我正在使用`request.getHeader("Referer")`从我来的地方获取上一页 URL。但我在这里得到了完整的 URL，例如`http://hostname/name/myPage.jsp?param=7`。有没有办法`myPage.jsp?param=7`从整个 URL 中提取？还是我需要处理字符串？我只需要`myPage.jsp?param=7`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:43:08.133

类 URI - [http://docs.oracle.com/javase/7/docs/api/java/net/URI.html](http://docs.oracle.com/javase/7/docs/api/java/net/URI.html) 只需使用您拥有的字符串 (http://hostname/name/myPage.html) 构建一个新的 URI 实例。 jsp?param=7) 然后你就可以访问部件了。你想要的可能是 getPath()+getQuery()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T05:56:27.137

您可以使用此函数简单地重建 URL。仅使用此功能所需的东西。

```
public static String getUrl(HttpServletRequest req) {
    String scheme = req.getScheme();             // http
    String serverName = req.getServerName();     // hostname.com
    int serverPort = req.getServerPort();        // 80
    String contextPath = req.getContextPath();   // /mywebapp
    String servletPath = req.getServletPath();   // /servlet/MyServlet
    String pathInfo = req.getPathInfo();         // /a/b;c=123
    String queryString = req.getQueryString();          // d=789

    // Reconstruct original requesting URL
    String url = scheme+"://"+serverName+":"+serverPort+contextPath+servletPath;
    if (pathInfo != null) {
        url += pathInfo;
    }
    if (queryString != null) {
        url += "?"+queryString;
    }
    return url;
} 
```

或者如果这个函数不能满足你的需要，那么你总是可以使用字符串操作：

```
public static String extractFileName(String path) {

    if (path == null) {
        return null;
    }
    String newpath = path.replace('\\', '/');
    int start = newpath.lastIndexOf("/");
    if (start == -1) {
        start = 0;
    } else {
        start = start + 1;
    }
    String pageName = newpath.substring(start, newpath.length());

    return pageName;
} 
```

传入 /sub/dir/path.html 返回 path.html

希望这可以帮助。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T06:11:07.270

```
Pattern p = Pattern.compile("[a-zA-Z]+.jsp.*");
Matcher m = p.matcher("http://hostname/name/myPage.jsp?param=7");
if(m.find())
{
     System.out.println(m.group());
} 
```

# android - 如何在不立即加载活动的情况下启动 Android 应用程序？

> ID：11715788
> 
> 赞同：-5
> 
> 时间：2012-07-30T05:23:30.200
> 
> 标签：android, design-patterns

我需要像“应用程序管理器”这样的东西，首先它会设置数据存储、网络等。在它显示任何活动之前。

因为我目前正在设计我的 android 应用程序，在架构层面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:00:26.507

我建议使用显示*loading..*的 UI ，并且可能您想使用一个`AsyncTask`或一些后台线程来加载内容，然后更新 UI 并说您准备好了。

# php - 从 magento 的自定义模块中添加 sales_flat_order_item 表中的新字段

> ID：11715790
> 
> 赞同：0
> 
> 时间：2012-07-30T05:23:42.453
> 
> 标签：php, mysql, magento

在 magento 中，我创建了一个自定义模块并完成了模板和控制器部分，但对处理模型和数据库部分感到困惑。从我的自定义模块中，我想更改表**sales_flat_order_item**并添加一个附加字段。现在我创建了一个设置脚本，例如

```
$installer = $this;
$installer->startSetup();
$installer->run("
ALTER TABLE sales_flat_order_item ADD COLUMN new_field TEXT NULL;

ALTER TABLE sales_flat_invoice_item ADD COLUMN new_field TEXT NULL;

ALTER TABLE sales_flat_shipment_item ADD COLUMN new_field TEXT NULL;
");
$installer->endSetup(); 
```

在路径 app\code\local\Namespace\Module\sql\_setup\mysql4-install-0.1.0.php 但表似乎没有改变，可以在脚本或模块文件中添加附加字段的配置并像其他字段一样处理数据。任何人的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:46:10.900

您的 config.xml 配置是什么样的？

在`<global></global>`您需要添加的标签下：

```
<resources>
    <sql_setup>
        <setup>
            <module>Namespace_Module</module>
        </setup>
    </sql_setup>
</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:37:59.677

试着放这样的东西

```
 $installer->run("
ALTER TABLE {$this->getTable('sales_flat_shipment_item')} ADD `new_field` TEXT NULL ;
"); 
```

# java - java:如何在JTable中显示数据？

> ID：11715791
> 
> 赞同：-2
> 
> 时间：2012-07-30T05:24:08.443
> 
> 标签：java, swing, netbeans, jtable

我为假期创建了一个表格，用户可以在其中输入假期的日期和描述。所以我想在运行时在 JTable 中显示这些数据。我完美地获得了日期和描述的值。

```
String start= single_date.getDate().toString();
String desc_text=description_text.getText(); 
```

现在帮我在 JTable 中显示。我正在使用 netbeans，所以我的 JForm 中有 JTable。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:32:10.170

如果你想用它`Default constructor of JTable`来做这件事..然后试试这个..

它需要**二维对象数组和一维字符串数组**

```
Object[][] arr = {{"start_val1","desc_text_val1"}, {"start_val2","desc_text_val2"}};

String[] header = {"start","desc_text"}; 

JTable table = new JTable(arr,header); 
```

**有关工作示例，请参阅此链接：**

[http://java2s.com/Code/Java/Swing-JFC/JTableclassusingdefaulttablemodelsandaconvenience.htm](http://java2s.com/Code/Java/Swing-JFC/JTableclassusingdefaulttablemodelsandaconvenience.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:31:46.010

JTable 不是您需要在这里询问的复杂主题。我认为您应该看到[此链接](http://waltermilner.com/downloads/JavaSwing/UsingJTables.pdf)以及[此链接](http://www2.sys-con.com/itsg/virtualcd/java/archives/0601/hendry/index.html)

# c++ - 了解 rand() 操作

> ID：11715794
> 
> 赞同：3
> 
> 时间：2012-07-30T05:24:47.807
> 
> 标签：c++

在[http://www.cplusplus.com/reference/clibrary/cstdlib/rand/](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)，我读到以下内容： 该算法使用种子生成系列，应该使用 srand 将其初始化为一些独特的值。

种子是什么意思以及 rand() 如何使用种子来生成系列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T05:28:21.317

`rand()`使用所谓的[伪随机数生成器](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)。*它生成的不是真正的随机数，而是一个看起来*足够随机并满足某些统计特性的确定性序列。种子本质上是该序列的起始值；给定相同的种子，PRNG 将始终产生相同的序列。这就是为什么你经常用一些*不太*确定的东西来播种，例如当前时间（尽管如果你在一个紧密的循环中重新播种 PRNG 或者连续或并行运行足够快的程序，这会失败）。

在大多数情况下，C 中的 PRNG 是一个简单的[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)。它使用以下等式计算序列中的下一个数字：

![在此处输入图像描述](../Images/4ddd3dab30d678622acd96037aed6b47.png)

*这里的a*和*b*是必须小心选择的值，以避免[可怕的结果](http://en.wikipedia.org/wiki/RANDU)。例如，出于显而易见的原因， 2 对于 a 来说是一个非常非常糟糕的*选择*。*c*只是将数字减少到一定范围，通常是 2 的幂。种子只提供第 0 个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T05:29:08.227

非常粗略地说，它是这样的：

```
 int rand() {
       return last_random_val = 
          ((last_random_val * 1103515245) + 12345) & 0x7fffffff);
   }

   void srand(int seed) {
        last_random_val = seed;
   } 
```

并且`last_random_val`设置为`seed`when you call `srand()`。因此，对于相同的种子，会生成相同的数字序列。

# java - Why doesn't Tomcat start the connector when I start the server itself?

> ID：11715800
> 
> 赞同：1
> 
> 时间：2012-07-30T05:25:51.720
> 
> 标签：java, tomcat, connector

I have code to embed Tomcat which looks like this:

```
public void start()
{
    final Tomcat tomcat = createTomcat();

    try
    {
        tomcat.start();
    }
    catch (Exception e)
    {
        throw new RuntimeException("Failed to start web server", e);
    }

    this.tomcat = tomcat;
}

private Tomcat createTomcat()
{
    Tomcat tomcat = new Tomcat();
    tomcat.setBaseDir(FileUtils.getTempDirectory().getAbsolutePath());

    tomcat.setConnector(createConnector());

    // ... eliding the webapp, session, access log setup ...

    return tomcat;
}

private Connector createConnector()
{
    Connector connector = new Connector();
    connector.setPort(context.getWebServerPort());
    connector.setScheme("https");
    connector.setSecure(true);

    //prepareKeyStore(context.getListeningHost());

    connector.setAttribute("address", context.getListeningAddress());
    connector.setAttribute("SSLEnabled", true);

    // Bind on start() instead of init() so that the port is closed faster on shutdown
    // I still have another problem where stop() seems to return before shutdown is
    // truly complete!
    connector.setAttribute("bindOnInit", false);

    connector.setAttribute("keystoreFile", "/my/keystore");
    connector.setAttribute("keystorePass", "password");
    connector.setAttribute("clientAuth", "false");
    connector.setAttribute("sslProtocol", "TLS");
    connector.setAttribute("keyAlias", context.getListeningHost());
    connector.setAttribute("keyPass", "password");

    return connector;
} 
```

When this runs, Tomcat doesn't start listening on any port. I poked around and found that the connector was still in state NEW.

Why doesn't Tomcat start it when I start Tomcat itself?

The same occurs on stop() and destroy(). Neither of them appear to call it.

No errors occur, and if I later call `tomcat.getConnector().start()`, it appears to succeed and make the service contactable.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:14:02.177

由于您已将 bindOnInit 设置为 false，因此您必须显式启动连接器，以便 tomcat 开始侦听配置的端口。

将 bindOnInit 设置为 true （或者您根本不需要设置它，因为 true 是默认值），以便 tomcat 开始侦听 tomcat.start()

bindOnInit 设置决定是否在 init/destroy 或 start/stop 上绑定/取消绑定端口。

# javascript - 将文件直接保存到指定路径，不显示保存或打开对话框

> ID：11715803
> 
> 赞同：0
> 
> 时间：2012-07-30T05:26:15.590
> 
> 标签：javascript, c#-4.0, web-scraping

我正在使用网页中调用 javascript

```
webBrowser2.Document.InvokeScript("download_file");`. 
```

此 javascript 打开对话框，要求用户保存或打开文件。我想将文件直接保存到路径而不向用户显示对话。我怎样才能做到这一点。我正在抓取网页。我正在从网页中提取所需的详细信息。

**下载文件（）**：

```
function download_file() {
    var summaryFlag = 0;
    if (document.getElementById("frmincludefilesummary").checked) {
        summaryFlag = 1;
    }
    url = '/filedatabase/file_process_request.html?mru=53616c7&type=doc';
    url += '&sum=' + summaryFlag + '&logo=0&xcode=name&serve_txt=0&folderid=';
    document.location = url;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:44:46.870

你想要达到的目标是不可能的。Javascript 无法直接访问或写入客户端文件系统。如果允许，这将是一个巨大的安全漏洞。

替代选项是使用 flash 或 java 或 activeX。

# mercurial - how to work with other developers using hg's defaut stable branch workflow

> ID：11715805
> 
> 赞同：2
> 
> 时间：2012-07-30T05:26:19.570
> 
> 标签：mercurial, workflow, branch, tortoisehg, branching-and-merging

I found an article talking about git's workflow [here](http://nvie.com/posts/a-successful-git-branching-model/), And tried to apply it to my own hg project, seems that it's kind of mess when I create a branch for each feature, cause in git, the branch could be deleted, and in hg, it can only be closed. so this will lead to a huge amount of closed branches in the repo, and that's what I don't want to see.

later, I googled another article which talks about a Hg workflow [here](http://stevelosh.com/blog/2010/05/mercurial-workflows-stable-default/) I tried it, and it seems good when I am the only developer of the project, but when I tried to add another developer, the history became a little complicated.

I tested this with three repos

```
1, Base
2, devA   ---> stands for developer A's repo
3, devB   ---> stands for developer B's repo 
```

first I worked on devA, making changes on devA's `default` branch, and bugfix's on devA's `stable` branch. After that, I push devA to Base.

devA's graph:

![devA's graph](../Images/83c104822c3845b525b408a3aff621b4.png)

in case the image broken, the text based graph is here:

```
@    summary:     Merge with stable
|\   tag:         tip
| |  parent:      4:d2973e149720
| |  parent:      5:3788143e99fc
| |  date:        Mon Jul 30 13:17:44 2012 +0800
| |  
| |
| o  changeset:   5:3788143e99fc
| |  branch:      stable
| |  parent:      3:4a955d01ea44
| |  date:        Mon Jul 30 13:17:19 2012 +0800
| |  summary:     fix a bug in featureA
| |
o |  changeset:   4:d2973e149720
| |  parent:      2:8e106fcfa9bf
| |  date:        Mon Jul 30 13:16:46 2012 +0800
| |  summary:     finish featureA advance
| |
| o  changeset:   3:4a955d01ea44
|/|  branch:      stable
| |  parent:      1:7b81b986d485
| |  parent:      2:8e106fcfa9bf
| |  date:        Mon Jul 30 13:16:01 2012 +0800
| |  summary:     Merge with default
| |
o |  changeset:   2:8e106fcfa9bf
| |  parent:      0:7d7dc422ec7c
| |  date:        Mon Jul 30 13:15:43 2012 +0800
| |  summary:     finish feature A
| |
| o  changeset:   1:7b81b986d485
|/   branch:      stable
|    date:        Mon Jul 30 13:14:49 2012 +0800
|    summary:     Create stable branch
|
o  changeset:   0:7d7dc422ec7c
   date:        Mon Jul 30 13:14:21 2012 +0800
   summary:     Init commit 
```

and then I switched to devB, because I want to emulate a parallel work, so I did not pull from Base, instead I begin to work on devB's `default` branch, and do bugfix on devB's `stable` branch.

devB's graph is similar with devA's graph

Here comes the problem, when I try to push devB's changes to Base, it said there is a conflict, and I need to merge it locally, I pulled the changes and then my history graph in devB became kind of messy because I got devA's `default` and `stable` so in devB there is now two `default` branches and two `stable` branches.

what confused me is how real projects use this kind of workflow, mecurial's branch graph is [here](http://selenic.com/repo/hg/graph). It seems pretty clean, but how did they do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:38:54.027

不要将存储库拆分为“开发人员分支”，而是分支“功能分支”。每个分支都应该有相当少量的提交，全部用于实现特定功能。在每个构建/发布时，您选择准备部署的分支并将它们合并为默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:10:15.260

最新的[hgflow](https://bitbucket.org/yujiewu/hgflow/wiki/Home)（0.9.5，尚未正式发布，但效果很好）实际上允许您完全删除功能分支。摘自其维基：

> 为完成操作添加了 --erase。使用此选项，您可以在分支成功完成后擦除（即从存储库中完全删除）分支。最终效果就像分支中的所有更改都被折叠，然后作为单个更改集提交到分支合并到的目标分支。查看 hg flow help @finish 了解更多详细信息。

# wpf - what is the equivalent in wpf for System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width

> ID：11715809
> 
> 赞同：1
> 
> 时间：2012-07-30T05:26:31.507
> 
> 标签：wpf

I'm trying to convert the windows application to wpf application, and everything is fine but i was Struck at this point converting the bellow declaration not working out in code of wpf.

these are windows declarations,

Dim screenwidth As String = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width

Dim screenheight As String = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height

i googled to find the equivalent class properties for these declarations and i got some thing, but those are existing but not working at the point of time i'm trying to use them at

"**PointToScreen(New Point(0,0))**" they are:

If i use these in my code:

Dim screenwidth As String = System.Windows.SystemParameters.VirtualScreenWidth Dim screenheight As String = System.Windows.SystemParameters.VirtualScreenHeight '(OR)

Dim screenwidth As String = System.Windows.SystemParameters.PrimaryScreenWidth Dim screenheight As String = System.Windows.SystemParameters.PrimaryScreenHeight

```
 With MyPanel
            .PointToScreen(New Point(SystemParameters.VirtualScreenWidth, 0)) ' Getting Exception in this line               
            .Height = (80 / 1080) * screenheight
            .Width = screenwidth                
            .Background = New SolidColorBrush(Colors.Transparent)
        End With 
```

Am getting the exception as Invalid Operation Exception saying that "The visual is not connected to PresentationSource."

i alreadt tried this post [http://social.msdn.microsoft.com/Forums/en/wpf/thread/f3c982a1-ca16-4821-bf08-f6dd8ff8d829](http://social.msdn.microsoft.com/Forums/en/wpf/thread/f3c982a1-ca16-4821-bf08-f6dd8ff8d829) , but i want to try it out using PointToScreen only.

How can i resolve this ???? Please help me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:40:36.337

嗨，试试这个来获得屏幕的宽度和高度。

```
double width=System.Windows.SystemParameters.PrimaryScreenWidth;
double height = System.Windows.SystemParameters.PrimaryScreenHeight; 
```

例外是因为您在呈现之前指向 Mypanel。像这样做

```
if (MyPanel.IsVisible)
        { 
            MyPanel
            .PointToScreen(New Point(SystemParameters.PrimaryScreenWidth, 0)) ' Getting Exception in this line               
            .Height = (80 / 1080) * screenheight
            .Width = screenwidth                
            .Background = New SolidColorBrush(Colors.Transparent)
        } 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:30:33.037

这个怎么样：

```
Screen.PrimaryScreen.WorkingArea.Height 
```

和

```
Screen.PrimaryScreen.WorkingArea.Width 
```

如果您想考虑 DPI 设置，我使用它（_windowToControl 是您应用程序中的一个窗口）：

```
 public double ScreenPixelHeight
    {
        get
        {
            PresentationSource source = PresentationSource.FromVisual(_windowToControl);
            if (source != null)
                return Screen.PrimaryScreen.WorkingArea.Height * source.CompositionTarget.TransformFromDevice.M11;
            else
                return 0;
        }
    }
    public double ScreenPixelWidth
    {
        get
        {
            PresentationSource source = PresentationSource.FromVisual(_windowToControl);
            if (source != null)
                return Screen.PrimaryScreen.WorkingArea.Width * source.CompositionTarget.TransformFromDevice.M11;
            else
                return 0;
        }
    } 
```

# ssl-certificate - how to check if a SSL certificate is corrupt or not?

> ID：11715811
> 
> 赞同：6
> 
> 时间：2012-07-30T05:26:42.300
> 
> 标签：ssl-certificate

I have a SSL certificate. I want to check if the certificate is intact or corrupted. Are there any tool to check this?

Problem is we are unable to get this certificate working in Websphere 8.0 and I was thinking if this cert file could be corrupted.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T05:32:33.783

是的，您可以使用 openssl（适用于 windows 和 *nix）检查证书。

```
openssl x509 -in certificate.crt -text -noout 
```

[参考](http://www.sslshopper.com/article-most-common-openssl-commands.html)

**更新**

更准确地说，您可以分别比较密钥和证书的模数和公共指数，以保证证书与密钥匹配并且证书没有损坏。

```
openssl rsa -noout -modulus -in server.key.pem | openssl sha1;\
openssl x509 -noout -modulus -in server.crt | openssl sha1 
```

有效的输出看起来像

```
7298b69426656f7a8ab3ef9686bc0a79588850e7
7298b69426656f7a8ab3ef9686bc0a79588850e7 
```

手动修改证书后，输出将是。

```
7298b69426656f7a8ab3ef9686bc0a79588850e7
bd439a18d2d3689470e209dbd45b85a41db7230c 
```

命令

```
openssl x509 -in certificate.crt -text -noout 
```

用于验证证书链但不检查损坏。手动修改的证书可以返回看起来有效的输出，但`RSA Public Key: (4096 bit) Modulus (4096 bit):`只有通过上述检查才能检测到部件的问题。

[另一个参考](https://kb.wisc.edu/middleware/page.php?id=4064)

# python - Python Pickle, avoiding module dependencies

> ID：11715815
> 
> 赞同：4
> 
> 时间：2012-07-30T05:26:58.320
> 
> 标签：python, ironpython, pickle

Is there a particular way to pickle objects so that pickle.load() has no dependencies on any modules? I read that while unpickling objects, Pickle tries to load the module containing the class definition of the object. Is there a way to avoid this, so that pickle.load() doesnt try to load any modules?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T06:08:22.297

可能有点无关，但我仍然会从文档中引用：

> 警告 pickle 模块并非旨在防止错误或恶意构造的数据。永远不要取消从不受信任或未经身份验证的来源收到的数据。

您需要编写一个自定义的 unpickler 来避免加载额外的模块。一般的方法是：

*   通过子类化派生您的自定义 unpickler`pickle.Unpickler`
*   覆盖`find_class(..)`
*   在里面`find_class(..)`检查模块和需要加载的类。避免通过引发错误来加载它。
*   使用此自定义类从字符串中提取。

[这是一篇](https://web.archive.org/web/20130423223601/http://nadiana.com/python-pickle-insecure)关于使用泡菜的危险的优秀文章。您还将找到具有上述方法的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T05:44:50.437

由于对象的序列化和反序列化是泡菜功能的*主要*目的，因此您的要求没有多大意义。如果您想要不同的东西：将您的对象序列化或反序列化为 XML 或 JSON（或任何其他合适的格式）。

有例如 lxml.objectify 或者你用谷歌搜索“Python 序列化 json”或“Python 序列化 xml”......但是如果没有它的类定义，你不能从泡菜中反序列化一个对象 - 至少在没有进一步编码的情况下不能。

[http://docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)

记录如何编写自定义 unpickler...也许这是一个很好的开始方式 - 但这似乎是错误的做法。

# c++ - 为什么 std::ios_base::failure 有两个继承图，有什么区别？

> ID：11715817
> 
> 赞同：3
> 
> 时间：2012-07-30T05:27:05.407
> 
> 标签：c++, exception

根据[cppreference.com](http://en.cppreference.com/w/cpp/io/ios_base/failure)，`std::ios_base::failure`有两个继承层次结构：

![在此处输入图像描述](../Images/83dbb7c029cef025052a49d7b607a519.png)

**问题**

为什么和有什么区别？

**背景**

使用 g++ 4.7.1 我遇到了这个错误，到目前为止我知道这是因为第一个继承层次结构：

> 错误：'const class std::ios_base::failure' 没有名为 'code' 的成员

**更新**

使用 gcc，即使在 C++11 模式下`ios_base::failure`仍然继承。[从这里](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)`exception`引用：

> ios_base::failure 不是从 system_error 派生的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T05:33:00.170

这是因为[std::system_error](http://en.cppreference.com/w/cpp/error/system_error)是在 C++11 中引入的。`std::ios_base::failure`直接从`std::exception`之前衍生而来。

由于[code()](http://en.cppreference.com/w/cpp/error/system_error/code)方法是 的成员`std::system_error`，`std::ios_base::failure`因此不会在不支持 C++11 的环境中公开它。

# facebook - how to check a facebook user allowed subscribe

> ID：11715819
> 
> 赞同：0
> 
> 时间：2012-07-30T05:27:23.517
> 
> 标签：facebook, facebook-javascript-sdk

Given a facebook user url, take [https://www.facebook.com/zuck](https://www.facebook.com/zuck) as example, if the facebook user allowed subscribe, then show the subscribe button(using generated code from [https://developers.facebook.com/docs/reference/plugins/subscribe/](https://developers.facebook.com/docs/reference/plugins/subscribe/)) otherwise just show the facebook user url. Is it possible with the facebook jsdk?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:31:22.933

我在任何地方都看不到该信息，无论是在 Graph API 还是在 FQL 用户对象/表中，所以我想目前还没有直接要求这个的方法。

如果您提供的用户配置文件不允许订阅，则渲染的插件元素的宽度非常小（清楚地查看您是否在提到的页面上选择了颜色方案“深色”） - 所以可能使用 HTML5 版本在插件中，应该可以使用 JS 来询问该元素的宽度，并使用该信息对用户是否允许订阅做出有根据的猜测……</p>

# objective-c - Fetch Path of a Document on iPad

> ID：11715824
> 
> 赞同：0
> 
> 时间：2012-07-30T05:27:49.790
> 
> 标签：objective-c, ios, xcode, ipad

I want to fetch path of a document which is present at some path on iPad. I have tried using `NSfilemanager` but these classes under `foundation framework` give me path of a document which is bundled within the application / has been written to app sandbox .

I am using one of the file explorers which shows me that a document is present on the device but i am unable to fetch the exact path of that doc on device.

**NOTE :** The document is somewhere on the device outside the application sandbox.

Thanks .

# memcached - solution to synch back cache value to database?

> ID：11715826
> 
> 赞同：0
> 
> 时间：2012-07-30T05:28:01.507
> 
> 标签：memcached, key-value, data-consistency

below is the scenario: here is a access statistic system, just like Blogger's overviewstats function. Statistic data is stored persistent in database(like MySQL), while using a key-value cache(now is memcache) to cache the access counts, each access only update the value in cache.

Now the question is how to synch back the latest count value to database? A normal solution is to write back after some interval, but memcache will discard items when there is no enough spaces, some updates may lost. so I think a better solution is if memcache can send a message(like JMS) when discarding an item, and then i can synch that item to database. It seems that memcache does not provide this function, is there any other key-value cache can do this? Or is there any better solutions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:56:54.167

Memcached 是一个缓存，所以你需要将它作为一个缓存来使用。当您更新 memcached 中的访问计数时，您还应该将更新排入队列，以便它们可以异步写入数据库。这样，可以从数据库中重新加载超出缓存的计数。

我喜欢 memcached 排队即将被丢弃的项目的想法，但由于性能考虑，它可能不会在主项目中发生。

# c# - 如何将值添加到 MVC3 中的下拉列表？

> ID：11715831
> 
> 赞同：0
> 
> 时间：2012-07-30T05:28:42.287
> 
> 标签：c#, asp.net-mvc-3

我想在我的表单中添加一个下拉列表，其中包含 2 个值`userid`和`username`我的下拉列表，并且我还想在单击按钮时获取用户选择的值。我是 MVC 的新手，到目前为止，我还没有在下拉列表上工作过，尝试了一些示例，但似乎没有任何东西可以按照我想要的方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:39:11.987

我会跳过很多 MVC3 概念。如果你真的是 ASP.NET MVC 的新手，你应该看看一些[教程](http://www.asp.net/mvc)。

此代码应该可以帮助您：

**看法**

```
 @using (Html.BeginForm("ACTION NAME", "CONTROLLER NAME"))
    {
        <select name="select">
            <option value="username" selected>User name</option>
            <option value="userid">User id</option>
        </select>
        <input type="submit" />
    } 
```

**行动**

```
[HttpPost]
public ActionResult ACTIONNAME(string select)
{
    //...
} 
```

请注意：

*   `ACTION NAME`并`CONTROLLER NAME`在`BeginForm`帮手处。您**将不得不**在您的代码中修改它
*   `select`名称（“select”）和动作中的参数名称（“select”）。这不是巧合，而是约定俗成。MVC 使用`name`attr 绑定数据
*   该`selected`选项的属性将使其成为默认选项

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:05:30.580

查看您可以执行的一种方法是将模型属性中的列表作为绑定发送，对于值，您可以将其绑定到另一个属性，例如：

```
public class YourModel 
{    
public List<UserList> OptionList { get; set; }
public String YourValue{get;set;}
}
public class UserList
{
   public String UserName{get;set;}
   public String UserId{get;set;}
}

@Html.DropDownListFor(model => model.YourValue, Model.OptionList, "") 
```

在帮助程序中有用于指定值和文本的覆盖选项。

请记住：
这是 StackOverflow。 ***即使是您尝试过的无效示例对于那些试图帮助您的人来说也很重要，因为他们正在为您花费宝贵的带宽。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:46:21.677

您不需要为每个视图创建一个新的模型类，只需将其放在控制器上：

```
ViewBag.FieldName = new SelectList(new List<SelectListItem>() {
    new SelectListItem { Value = "userid", Text = "User ID" },
    new SelectListItem { Value = "username", Text = "User name" }
}); 
```

这在视图中：

```
@Html.DropDownList("FieldName") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T13:25:44.870

1.  您需要创建一个 SelectListItem 的集合，例如：

    ```
    IEnumerable<SelectListItem> selectList =
    from c in areaListResponse.Item
    select new SelectListItem
    {
      Text = c.AreaName,
      Value = c.Id.ToString()
    }; 
    ```

2.  将此 selectList 传递给您的视图：

    ```
    return View(selectList); 
    ```

3.  在您的 cshtml 中：

    ```
    @model IEnumerable<SelectListItem>

    @Html.DropDownListFor(m => m.RequestAreaName, Model) 
    ```

4.  如果您需要复杂的对象，您可能需要一个包装类，例如：

    ```
     public class RaiseRequestModelWrapper
    {
    public IEnumerable<SelectListItem> GetModel { get; set; }
    public RaiseRequestModel PostModel { get; set; }
    } 
    ```

# ruby - extracting from 2 dimensional array and creating a hash with array values

> ID：11715833
> 
> 赞同：0
> 
> 时间：2012-07-30T05:28:54.827
> 
> 标签：ruby, hash

I have a 2 dimensional array

```
v = [ ["ab","12"], ["ab","31"], ["gh","54"] ] 
```

The first element of the subarray of v will have repeating elements, such as `"ab"`. I want to create a hash that puts the key as the first element of the subarray, and values as an array of corresponding second elements from `v`.

please advice.

Further, I want this, h={"ab"=>["12","31"],"gh"=>["54"]} and then I want to return h.values, such that the array [["12","31"],["54"]] is returned

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T07:12:02.987

```
v.inject(Hash.new{|h,k|h[k]=[]}) { |h, (k, v)| h[k] << v ; h} 
```

What it does:

*   [inject](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject) (also called `reduce`) is a [fold](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29). Wikipedia defines folds like this: *"a family of higher-order functions that analyze a recursive data structure and recombine through use of a given combining operation the results of recursively processing its constituent parts, building up a return value*".

*   The block form of [Hash.new](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-new) takes two arguments, the hash itself and the key. If your default argument is a mutable object, you have to set the default this way, otherwise all keys will point to the same array instance.

*   In `inject`'s block, we get two arguments, the hash and the current value of the iteration. Since this is a two element array, `(k, v)` is used to destructure the latter into two variables.

*   Finally we add each value to the array for its key and return the entire hash for the next iteration.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:41:01.617

```
v = [ ["ab","12"], ["ab","31"], ["gh","54"] ] 
```

这将为您提供一个哈希，其中键是子数组中唯一的第一个元素。

```
h = v.inject({}) { |c,i| (c[i.first] ||= []) << i.last; c } 
```

这会将散列转换回数组，以防万一您需要数组格式的数组。

```
arr = h.collect { |k,v| [k,v] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:39:23.700

```
v.inject({­}) do |res,­ ar|
  res[ar.fir­st] ||= []
  res[ar.fir­st] << ar.la­st
  res
end 
```

# jquery - Jquery 事件来查找我们是否在元素内部/外部单击

> ID：11715836
> 
> 赞同：0
> 
> 时间：2012-07-30T05:29:13.137
> 
> 标签：jquery

考虑一个单独的 div Ex ''...如果我在 div 外部单击，应该会出现警报.....但是如果我们在 div 区域内单击。警报不应该来

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:35:07.170

有两种解决方案。

首先，您可以制作一个标志，该标志在进入 div 时变为假，在离开时再次变为真。然后在页面上放置一个 onclick 事件并检查 flags 值，如果为真则警报。

其次，您可以同时在 div 的父级和 div 上使用两个不同的 onclick 事件，只需将 'event.stopPropogation' 放在 div 的 onclick 事件上。

我希望这些想法可以帮助您找到正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:31:58.430

为此有一个 jQuery 插件：

[http://benalman.com/projects/jquery-outside-events-plugin/](http://benalman.com/projects/jquery-outside-events-plugin/)

# php - yii CGridView 显示来自相关 tbls 的数据

> ID：11715839
> 
> 赞同：2
> 
> 时间：2012-07-30T05:29:19.023
> 
> 标签：php, yii

我有一个小问题。我创建了与公司和部门关系的用户 CGridView。

错误：公司名称显示在网格视图中。但部门名称不显示在gridview 中。

当我取消注释 'value'=>..... 时，“试图获取非对象的属性”显示。

这个模型关系

```
public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
                     'ranks' => array(self::BELONGS_TO, 'Rank', 'rank_id'),
                     'companies' => array(self::BELONGS_TO, 'Company', 'company_id'),
                     'departments' => array(self::BELONGS_TO, 'Department', 'department_id'),
                     'departmentsdep' => array(self::BELONGS_TO, 'Department', 'department_id'),
                     'departmentssec' => array(self::BELONGS_TO, 'Department', 'section_id'),
                     'departmentstea' => array(self::BELONGS_TO, 'Department', 'team_id'),
        );
    } 
```

这是网格视图

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'user-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'login_name',
        'first_name',
        'last_name',
        'email',
        array(
            'name' => 'company_id',
            'value'=>'$data->companies->name',
            'filter'=>CHtml::listData($companylist, 'id', 'name'),
        ),
        array(
            'name' => 'department_id',
            //'value'=>'$data->departmentsdep->name',
            'filter' => 
            CHtml::listData(
                is_numeric($model->company_id) ? Department::model()->findAll(new CDbCriteria(array(
                'condition' => 'p_id = 0 AND company_id=:company_id',
                'params' => array(':company_id' => $model->company_id),
            ))) : $department, 'id', 'name'),
        ),
        array(
            'name' => 'section_id',
            //'value'=>'$data->departmentssec->name',
            'filter' => 
            CHtml::listData(
                is_numeric($model->department_id) ? Department::model()->findAll(new CDbCriteria(array(
                'condition' => 'p_id = :pid AND company_id=:company_id',
                'params' => array(':company_id' => $model->company_id, ':pid'=>$model->department_id),
            ))) : $department, 'id', 'name'),
        ),
        array(
            'name' => 'team_id',
            //'value'=>'$data->departmentstea->name',
            'filter' => 
            CHtml::listData(
                is_numeric($model->department_id) ? Department::model()->findAll(new CDbCriteria(array(
                'condition' => 'p_id = :pid AND company_id=:company_id',
                'params' => array(':company_id' => $model->company_id, ':pid'=>$model->section_id),
            ))) : $department, 'id', 'name'),
        ),
        array(
            'class'=>'CButtonColumn',
        ),
    ),
)); ?> 
```

我该如何解决这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:50:14.130

这是我的解决方案

```
'value' => '($data->department_id == 0) ? "" : $data->departmentsdep->name', 
```

完整代码

```
array(
            'name' => 'department_id',
            'value' => '($data->department_id == 0) ? "" : $data->departmentsdep->name',
            'filter' => 
            CHtml::listData(
                is_numeric($model->company_id) ? Department::model()->findAll(new CDbCriteria(array(
                'condition' => 'p_id = 0 AND company_id=:company_id',
                'params' => array(':company_id' => $model->company_id),
            ))) : $department, 'id', 'name'),

        ), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:33:30.367

您可以使用“。”访问关系。签署关系。这样会容易得多：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'user-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
    'login_name',
    'first_name',
    'last_name',
    'email',
    array(
        'name' => 'companies.name',
        'filter'=>CHtml::listData($companylist, 'id', 'name'),
    ),
    ... 
```

# php - 以 UNIX 时间戳将结果插入 mysql 数据库

> ID：11715842
> 
> 赞同：0
> 
> 时间：2012-07-30T05:29:28.970
> 
> 标签：php, mysql, date, unix-timestamp

我有一个奇怪的问题。我正在尝试将一些值插入到具有相应日期的数据库中。在 HTML 表单中，日期格式为 mm/dd/yyyy 格式。`yyyy-mm-dd`我使用以下 PHP [（来自 stackoverflow 答案）](https://stackoverflow.com/questions/8984595/php-date-showing-1970-01-01-after-conversion)将此格式转换为 mysql格式：

```
echo $date1 = str_replace("/","-",$_POST['date']);
echo $date = date('Y-m-d', strtotime($date1)); 
```

但是上面的 echo ，当我运行代码时，它显示如下： `07-30-2012 1970-01-01`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:40:08.040

m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。有关详细信息，请参阅[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)。

因此，即使您将“07-30-2012”作为输入传递，它也将 07 视为日期，将 30 视为月份，因此您得到的结果不正确。

以下应该工作

```
echo $date = date('Y-m-d', strtotime($_POST['date'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:36:31.267

```
echo $date = preg_replace('/^(\d\d)\/(\d\d)\/(\d{4})$/', '$3-$1-$2', $_POST['date']); 
```

我认为这段代码应该可以正常工作，但当然您必须在将其插入数据库之前进行所有必要的检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:38:45.447

```
echo $date1 = str_replace("/","-","$_POST['date']");
echo $date = date('Y-m-d', strtotime($date1)); 
```

在日期中加上双引号，然后你会得到完美的结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T05:34:08.890

我刚刚尝试过：

```
$date = "30/07/2012";
echo $date1 = str_replace("/","-",$date);
echo '<br />';
echo $date = date('Y-m-d', strtotime($date1)); 
```

它实际上正在返回：

```
30-07-2012
2012-07-30 
```

您应该检查您的 $_POST['date'] 格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T05:39:38.367

`echo $date = date('Y-m-d', strtotime($_POST['date']));`

你的第一行不正确，它返回false，它（转换为整数）是0，0是linux机器上时间的开始！（因此 1970-01-01）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T05:40:14.940

您的输入是`mm/dd/yyyy`格式，这意味着您应该使用斜杠`/`如果您使用`dd-mm-yyyy`格式，则需要更改为破折号，如您链接到的答案所示。所以在你的情况下，你不应该更换`/`.

# extjs - 使用相同的商店填充 2 个网格

> ID：11715845
> 
> 赞同：2
> 
> 时间：2012-07-30T05:29:36.060
> 
> 标签：extjs, grid, extjs4, extjs4.1, extjs-mvc

我有 2 个网格，这两个网格都会从同一个商店自行填充`Person`。

我遇到的问题是，在第一个网格中，我将加载所有体育项目及其拥有的玩家数量。在第二格中，我将仅显示一项运动赢得的奖牌和金牌数量，其中`SportID = 3`. 我怎样才能做到这一点 ？当我加载网格时，它会填充所有

```
 {
                    xtype: 'gridpanel',
                    title: 'ALl Sports',
                    store: 'Person',
                    columns: [
                    {
                            xtype: 'gridcolumn',
                            dataIndex: 'SportID',
                            text: 'Sport ID'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'SportName',
                            text: 'Sport Name'
                        },                        
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'NoOfPlayers',
                            text: 'No Of Players'
                        }
                    ]
                },
                {
                    xtype: 'gridpanel',
                    title: 'Sport Medals for Sport ID 3',
                    store: 'Person',
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'noOfMedals',
                            text: 'No Of Medals'
                        },
                        {
                            xtype: 'gridcolumn',
                            dataIndex: 'NoOfGold',
                            text: 'No Of Gold'
                        }
                    ], 
```

我有 2 个网格，这两个网格都会从同一个商店自行填充`Person`。这两个网格在一个窗口中。当窗口加载时，我按如下方式填充网格；

**更新 1** #############################3

```
var personStore = Ext.getStore('Person');
var r = personStore.getAt(0);
personStore.on('load', function() {
    r = personStore.getAt(0);
st.filter({
    filterFn: function(rec) {
        return rec.get('PersonId') == r.get('PersonId'); 
    }

});
personStore.load(); 
```

#######################3

但是，两个网格都填充了相同的数据集。我想要的是在 Grid 1 ( `sportID`, `sportName`, `noOfPlayers`) 上显示所有运动信息，并显示运动信息 ( `noOfMedals`, `noOfGolds`) `WHERE sportId='3'`。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:29:33.553

简短的回答 - 你不能。如果您需要在同一存储中同时呈现两个不同的网格，则需要克隆存储并拥有另一个副本。

如果不是同时 - 您可以在显示网格之前使用过滤和过滤一个商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-09T09:55:53.863

根据第一家商店创建额外的商店，仅将过滤器应用于第二家商店。

```
 DSScheduleDay: {
        source: '{DSSchedule}',
        filters: [function (rec) {

            return (rec.get('type_id') !== 'V');
        }]
    },

    DSScheduleWeek: {
        source: '{DSSchedule}',
        filters: [function (rec) {

            return (rec.get('type_id') === 'V');
        }]
    }, 
```

# android - 返回上一个屏幕而不创建新实例

> ID：11715848
> 
> 赞同：9
> 
> 时间：2012-07-30T05:30:06.370
> 
> 标签：android

![在此处输入图像描述](../Images/f34f9273c0e390412ffc0c2261ce9e75.png)

如图所示，流程是这样的。因此，每当用户单击徽标按钮时，应调用 Activity A。作为简单的解决方案，我们可以使用这种方法......

```
Intent intent = new Intent(activity, activityToStart);
startActivity(intent); 
```

但是这个活动将为我的应用程序创建一个新活动。但是当我们在流程图中前进时，我需要调用同一个活动实例。从 Activity A 到 B 然后再在 B 上调用可以很容易地调用`finish()`，但从 Activity C 或 D，如何回到 A。

我的想法不多了，但没有得到任何富有成果的结果。如果您有任何建议或在我出错的任何地方，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-30T05:34:11.500

要从 D 回到 A，请使用 Intent Flags。

```
Intent intent = new Intent(activity, activityToStart);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
startActivity(intent); 
```

FLAG_ACTIVITY_CLEAR_TOP，它将调用堆栈上的活动，而不是创建新活动，并将所有活动弹出正在调用的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:37:50.127

而不是使用

```
Intent intent = new Intent(activity, activityToStart);
startActivity(intent); 
```

利用

```
Intent intent = new Intent(activity, activityToStart);
startActivityforResult(intent,1234); 
```

这将确保活动 A 未被终止，并且当您完成活动 C 时，活动 A 将恢复。

**注意**：- 每当您创建新活动时，未完成（退出）主机活动，主机活动以 LIFO 顺序保存在堆栈中

**后进先出**：-`Last In First Out`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T05:37:36.733

通过使 Activity A 成为“SingleTask”，您可以实现这一目标。当一个 Activity 在 SingleTask 中单击 Home 按钮时，其他 Activity 将从堆栈中删除。

有关 Android Activites 的更多信息，请参阅这些链接...

[链接 1 - Android 基础知识](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

[链接 2 - 另一个类似的问题](https://stackoverflow.com/questions/11668144/about-android-launchmode-singletask/11669073#11669073)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T05:37:39.583

使用 ViewFlipper 在同一活动的不同窗口之间来回切换。

```
ViewFlipper vf = (ViewFlipper) findViewById( R.id.view_flipper); 
```

转到下一个窗口

```
vf.showNext(); 
```

转到上一个窗口

```
vf.showPrevious(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T05:38:21.830

我不确定，这是否正确，但你可以试一试！

当您从 Activity-B 开始打开新的活动时，您可以完成（）当前活动。

IE

打开 Activity-C => 完成 Activity-B 并启动 Activity-C

打开 Activity-D => 完成 Activity-C 并启动 Activity-D

现在，当您按回时，Activity-A 将打开。

# ios - 在actionscript3 ios上读取并保存本地文件

> ID：11715850
> 
> 赞同：0
> 
> 时间：2012-07-30T05:30:12.843
> 
> 标签：ios, actionscript-3

有关读取和保存本地文件 actionscript3 ios 的任何代码

我不是 actionscript3 的初学者，但我是 iOS 开发的 bgnr

任何代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:32:29.510

保存文件的代码

```
var imgFile : File= File.applicationStorageDirectory.resolvePath(<file name>);
var stream: FileStream = new FileStream();
stream.open( imgFile, FileMode.WRITE);
stream.writeBytes( encodedContent, 0, encodedContent.length );  //encodedContent is byte array to save in afile
stream.close(); 
```

读取文件的代码

```
var imgFile : File= File.applicationStorageDirectory.resolvePath(<file name>); 
```

# jquery - 打开时下拉菜单向右展开

> ID：11715851
> 
> 赞同：0
> 
> 时间：2012-07-30T05:30:25.990
> 
> 标签：jquery, html, css, drop-down-menu

我的下拉菜单有问题。打开时下拉菜单向右展开。我检查边距、填充和白色值，但我没有找到解决方案。这里有实时示例

[**演示**](http://jsfiddle.net/bombula/2Kpmn/)

HTML：

```
<div id="header">  
   <div class="nav">
        <ul>
            <li><span class="home"></span><a href="#index.html">Lorem ipsum</a></li>
            <li><span class="department"></span><a href="#department.html" class="drop_down">Lorem ipsum</a>
                <ul id="submenu">
                    <li><a href="#">Lorem ipsum</a></li>
                    <li><a href="#">Lorem ipsum</a></li>
                    <li><a href="#">Lorem ipsum</a></li>
                </ul>
            </li>
            <li><span class="index"></span><a href="#">Lorem ipsum</a></li>
        </ul>
    </div>
</div> 
```

CSS：

```
#header .nav{background:green; height:42px;font-family:Arial;}
#header .nav ul{margin:0;padding:0;list-style:none;}
#header .nav ul li{float:left;padding:10px 20px 0 20px;border-right:solid 1px #ccc;height:32px;}
#header .nav ul li a{color:#fff;text-decoration:none;font-size:0.8em;}
#header .nav ul li span{height:17px;margin:3px 10px 0 0;float:left;}
#header .nav ul li span.home{background:url('../image/home.png') no-repeat left top;width:18px;}
#header .nav ul li span.department{background:url('../image/department.png') no-repeat left top;width:18px;}
#header .nav ul li span.index{background:url('../image/index.png') no-repeat left top;width:17px;}
#header .nav ul li span.recipe{background:url('../image/recipe.png') no-repeat left top;width:14px;}
#header .nav ul li span.car{background:url('../image/car.png') no-repeat left top;width:17px;}
#header .nav ul li a.drop_down{background:url('../image/arrow_down.png') no-repeat 50px 4px;width:17px;padding-right:14px;}
#header .nav ul li ul#submenu{position:absolute;display:none;margin:13px 0 0 -20px;border-top:solid 1px #ccc;}
#header .nav ul li ul#submenu li{clear:both;background:blue; height:42px;font-family:Arial;border-bottom:solid 1px #ccc;margin:0;padding:5px;width:100%;display:inline-block;}​ 
```

JS：

```
 $(function(){
        $(".drop_down").hover(
            function(){
                $("ul#submenu").stop(true,true).slideDown("slow",function(e){
                    $(this).hover(
                        function(){
                            $(this).show();
                        },
                        function(){
                            $(this).slideDown();
                        }
                    );
                });
            },
            function(){
                $("ul#submenu").stop(true,true).slideUp("slow");
            }
        );
    });​ 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:36:08.183

`width: 100%;`在`#header .nav ul li ul#submenu li`导致这种情况下，请提供一些固定宽度`100px;`，这将解决您的扩展宽度错误。

[**我的小提琴**](http://jsfiddle.net/2Kpmn/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:45:39.863

当更改宽度值修复而不是百分比时问题解决了。谢谢外星人先生。

# javascript - 如何在javascript中创建带有输入值的表？

> ID：11715853
> 
> 赞同：0
> 
> 时间：2012-07-30T05:30:30.857
> 
> 标签：javascript, jquery

在这里，当我单击保存按钮时，我在 fancybox 中获取值，这些值应该在我的表单中的表格中显示。这是获取值的代码..

```
$(".add-lession").click( function() {
  if($('#ShowDay').val() != ''){
  var ShowDay=$("#ShowDay").val();
}else{
  alert('Please select day');
  return false;
}
  var Date=$("#Date").val();
  var StartTime=$("#StartTime").val();
  var EndTime=$("#EndTime").val();
  var Lession = $("#Lession").val();
  var Description = $("#Description").val();
}); 
```

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:34:57.060

```
var arr = new Array(ShowDay,Date,StartTime,EndTime,Lesson,Description);

var tableElement = jQuery("<table />");
var trElement = jQuery("<tr/>");
var len = arr.length;
var tdElement;

for(var i=0;i<len;i++){
    tdElement = jQuery("<td/>",{text:arr[i]});
    trElement.append(tdElement);
}

tableElement.append(trElement);

$(".add-lession").parent().append(tableElement); 
```

# android - 创建APK扩展文件的步骤

> ID：11715855
> 
> 赞同：41
> 
> 时间：2012-07-30T05:30:36.307
> 
> 标签：android, apk-expansion-files

我已经开发了应用程序并成功地工作。

我在我的应用程序中使用了应用程序许可功能。现在我要在 google play 上上传一个应用程序。

请让我知道步骤，如何使用应用程序许可以及如何创建 APK 扩展文件？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-07-30T07:25:13.280

扩展文件取消了上传超过 100MB 的 apk 大小的限制。您应该在上传 apk 时附上这些文件。每个应用最多可为每个 APK 提供 4GB（2GB - 主要，2GB - 补丁）的附加数据。

创建扩展文件时必须遵循命名约定

`[main|patch].<expansion-version>.<package-name>.obb`

笔记：

1.  `main`- 没有这些文件，您的应用程序将无法运行
2.  `patch`- 是那些额外的文件，没有这个你的应用程序可以运行
3.  `expansion-version`- 您提供给您的 apk 的版本，以便不同版本的扩展文件不会冲突
4.  `package-name`- 这是您唯一的包裹名称

`.obb`我们没有附加，它会在上传时由谷歌隐式附加

假设您在当前目录中拥有所有内容，因此只需选择所有内容并将其命名为 zip`main.2.com.xyz.abc.zip`并在上传 apk 时将其附加

![在此处输入图像描述](../Images/87bea02538ba7ca063dc155ee9056046.png)

这都是上传部分，现在正在下载部分

首先，您需要通过单击 SDK-Manager下载*Google 额外包*

![在此处输入图像描述](../Images/380236b21cd5e47a1efe54b511e81b27.png)

现在从现有源创建新项目并从路径*sdk-path/extras/google导入***market_licensing**、**play_apk_expansion**

 *请记住：免费应用程序不需要许可，但需要扩展概念，您只需要为您的项目提供 market_licensing 的引用，它将隐式管理。

`play_apk_expansion`包含三个项目`downloader_library`, `zip_file`, `downloader_sample`.

downloader_library 本身具有 Market_licensing 的引用。

现在你只需要专注于`downloader_sample`首先将包名（用于测试）更改为你的包名（包名与上传的 apk 相同）

**很重要**

在`SampleDownloaderActivity`导航到...

```
private static final XAPKFile[] xAPKS = {
            new XAPKFile(
                    true, // true signifies a main file
                    2, // the version of the APK that the file was uploaded
                       // against
                    xxxxxxxxxxxL // the length of the zipfile in bytes right click on you expansion file and get the size in bytes, size must be same as zip size
            ),

    }; 
```

现在此活动将下载扩展文件并将其存储在`sdcard/Android/obb/[main|patch].<expansion-version>.<package-name>.obb`忽略 obb 中，只需将此文件解压缩到您想要的任何位置（`sdcard/Android/data`推荐，因为它会在您的应用程序被卸载时删除）。

有最新的设备可以直接从 Play 商店下载扩展文件并将其存储在其中，`sdcard/Android/obb/`因此您必须非常小心地检查所有案例

1.  obb已经下载
2.  有效内存
3.  已下载但未解压
4.  要选择的内存（请参阅内存案例）

**记忆案例：**

如果您使用任何新设备或前。micromax funbook，那么它有三个内存

*   /data/data/（手机内存）*getFilesDirectory()*
*   /mnt/sdcard/（手机的内部sdcard）*Environment.getExternalStorageDirectory()*
*   /mnt/extsd/（外部存储卡）*/mnt/extsd*

希望这会对您有所帮助并满足您的要求。

还有一件事在下面使用它`ZipHelper`来解压缩内容。

**ZipHelper.java**

```
public class ZipHelper
{
    boolean zipError=false;

    public boolean isZipError() {
        return zipError;
    }

    public void setZipError(boolean zipError) {
        this.zipError = zipError;
    }

    public void unzip(String archive, File outputDir)
    {
        try {
            Log.d("control","ZipHelper.unzip() - File: " + archive);
            ZipFile zipfile = new ZipFile(archive);
            for (Enumeration e = zipfile.entries(); e.hasMoreElements(); ) {
                ZipEntry entry = (ZipEntry) e.nextElement();
                unzipEntry(zipfile, entry, outputDir);

            }
        }
        catch (Exception e) {
            Log.d("control","ZipHelper.unzip() - Error extracting file " + archive+": "+ e);
            setZipError(true);
        }
    }

    private void unzipEntry(ZipFile zipfile, ZipEntry entry, File outputDir) throws IOException
    {
        if (entry.isDirectory()) {
            createDirectory(new File(outputDir, entry.getName()));
            return;
        }

        File outputFile = new File(outputDir, entry.getName());
        if (!outputFile.getParentFile().exists()){
            createDirectory(outputFile.getParentFile());
        }

        Log.d("control","ZipHelper.unzipEntry() - Extracting: " + entry);
        BufferedInputStream inputStream = new BufferedInputStream(zipfile.getInputStream(entry));
        BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(outputFile));

        try {
            IOUtils.copy(inputStream, outputStream);
        }
        catch (Exception e) {
            Log.d("control","ZipHelper.unzipEntry() - Error: " + e);
            setZipError(true);
        }
        finally {
            outputStream.close();
            inputStream.close();
        }
    }

    private void createDirectory(File dir)
    {
        Log.d("control","ZipHelper.createDir() - Creating directory: "+dir.getName());
        if (!dir.exists()){
            if(!dir.mkdirs()) throw new RuntimeException("Can't create directory "+dir);
        }
        else Log.d("control","ZipHelper.createDir() - Exists directory: "+dir.getName());
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-05T08:28:00.883

首先，假设您使用 helloworld.jpg 从 /assets/helloworld.jpg 迁移到您的扩展

1.  创建一个 zip 文件，但使用以下文件模式，以文件扩展名 .obb 结尾：

```
 `[main|patch].{expansion-version}.{package-name}.obb`
```

例如，如果您的 pkg 名称是“com.earth.helloworld”并且版本 = 1

，那么您的输出扩展文件名应该是： **patch.1.com.earth.helloworld.obb**
，这是一个在 zip 文件之后包含 helloworld.jpg
的 zip 文件已创建，请注意文件大小： ![在此处输入图像描述](../Images/f01259d3fda16019ef27cc878843fcaa.png) 2\. 如果不存在，则在您的 sdcard 上创建此文件夹：
/mnt/sdcard/Android/obb/{your package name}/
即 **/mnt/sdcard/Android/obb/com.earth。你好世界/**

3.  然后将您的 obb 文件上传到您的 SD 卡，例如 /mnt/sdcard/Android/obb/com.earth.helloworld/patch.1.com.earth.helloworld.obb

4.  然后创建获取扩展文件的方法

    ```
    public ZipResourceFile getExpansionFile() {

    String fileName = Helpers.getExpansionAPKFileName(this, false, 1);

            int filesize = 445461159;
    if (Helpers.doesFileExist(this, fileName, , false)) {

        try {
            return APKExpansionSupport.getAPKExpansionZipFile(
                    getBaseContext(), 1, 1);

        } catch (IOException e) {
            // TODO Auto-generated catch block

            e.printStackTrace();
        }
    }
    return null;       } 
    ```

5.  最后用这两行得到 helloworld.jpg
    `InputStream istr = getExpansionFile().getInputStream(strName);`

    ```
    Bitmap bitmap = BitmapFactory.decodeStream(istr); 
    ```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-09-24T19:51:39.360

一些有用的信息对于最终出现在这篇文章中的人来说，因为有一些事情改变了 apk 扩展的工作方式，以及如果你使用 Android Studio 来使库工作。

**注1**

您不能再使用草稿，因为获取扩展文件的链接尚未激活。您必须先使用扩展文件将版本上传到 Alpha 或 Beta。（只能从您上传的第二个 apk 开始添加扩展文件）因此，请确保在单击 APK 下的开发者发布部分中的详细信息时看到列出的 apk 扩展文件。

**笔记2**

如果您使用的是 android studio 并且想要使用下载器库，请不要将包名和 java 文件复制到您自己的应用程序 src 目录中。在eclipse中导入下载器库，选择export => gradle build files。之后，您可以将库作为模块导入 android studio。

**注3**

不确定这一点，但我也认为有必要通过 Play 商店至少下载一次应用程序，并使用测试设备上的帐户访问它。因此，如果您正在使用 alpha，请创建一个 google+ 测试组并将您自己或其他测试设备添加到其中。

**顺便提一句**

使用这些库，很容易实现 apk 扩展下载，只需确保：

1.  您的活动（当下载尚未自动完成时，您希望实现下载扩展包的活动）实现 IDownloaderClient。

2.  您设置服务和接收器并将它们设置在您的清单中。

3.  服务类中的 BASE64_PUBLIC_KEY 是正确的。上传第一个 apk => 在您的应用程序下的开发人员控制台中查看服务和 API => 此应用程序的许可证代码。

此代码用于查看是否可以在设备上找到扩展文件：

```
boolean expansionFilesDelivered() {
    for (XAPKFile xf : xAPKS) {
        String fileName = Helpers.getExpansionAPKFileName(this, xf.mIsMain, xf.mFileVersion);
        Log.i(TAG, "Expansion filename " +fileName);
        if (!Helpers.doesFileExist(this, fileName, xf.mFileSize, false))
            return false;
    }
    return true;
} 
```

它使用 XAPKS 类，它代表一个扩展文件，无论是主文件还是补丁文件，都具有一定的文件大小（字节）并与 apk 版本（第一次添加的那个）相关联。

```
private static class XAPKFile {
        public final boolean mIsMain; // true
        public final int mFileVersion; //example 4
        public final long mFileSize; //example 126515695L
        // example => main expansion that was first introduced in apk version 4 and is 126515695 bytes in size

        XAPKFile(boolean isMain, int fileVersion, long fileSize) {
            mIsMain = isMain;
            mFileVersion = fileVersion;
            mFileSize = fileSize;
        }
    } 
```

使用 google 提供的 zip 工具（com.android.vending.zipfile）直接从扩展文件中读取电影文件和其他内容也很容易。

首先使用库中提供的方法获取扩展文件，参数是整数，代表你的主要扩展apk版本（你需要的扩展包首先添加的apk版本）和补丁apk版本。

```
ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(context, APKX_MAIN_APK, APKX_PATCH_APK); 
```

**视频**

要直接从此 zipresourcefile 播放视频：

```
AssetFileDescriptor a = expansionFile.getAssetFileDescriptor(pathToFileInsideZip); 
```

现在从这个assetFileDescriptor你可以得到一个FileDescriptor并在你的媒体播放器中使用它，让你的媒体播放器播放视频的正确语法还需要第二个和第三个参数。无论是你可以从AssetFileDescriptor获得的起始偏移量和长度。

```
player.setDataSource(a.getFileDescriptor(), a.getStartOffset(), a.getLength()); 
```

**其他**

对于所有其他内容（如图像），您只需获取 zipresourcefile 的输入流：

```
expansionFile.getInputStream(pathToFileInsideZip);` 
```

还要确保您不压缩 zip 中的视频以使其正常工作！例如不压缩 .mp4 文件：

```
zip -n .mp4 -r zipfile.zip . -x ".*" -x "*/.*" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-14T18:12:57.550

只是想补充一些我在实现这个过程中学到的东西：

1）到目前为止，您不需要实现下载器库和所有 XAPKFile 东西，您需要做的就是复制/粘贴[https://developer.android.com/google/play上列出的所有权限/expansion-files.html](https://developer.android.com/google/play/expansion-files.html)到你的清单文件中。也许您曾经使用过，但 Google Play 商店会为您处理下载和安装。您需要在源代码中处理实际下载的唯一原因是用户手动进入 Android/obb 并删除了您的扩展文件。

2) 上传 .zip 文件时，您不必将其命名为 main.version.package.obb 约定。只需使用原始名称上传您的 .zip 文件，无论如何它都会为您重命名。

3) 要访问 zip 文件，请转到文件 > 新建 > 导入模块，然后导入与下载器和许可库位于同一目录中的 zip_file 库。确保在应用程序的 build.gradle 文件中添加依赖项：compile project(':zip_file')。这使得您可以在项目中导入这些库。

我希望这会有所帮助。我基本上花了几个小时试图实现网站上列出的（复杂的）下载库代码，最后我删除了所有代码，只保留了清单中的权限，它工作正常。

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2012-07-30T06:04:41.797

在 Eclipse 项目中，单击鼠标右键，按照以下步骤操作：Android Tools->Export Signed Application Package -> ....*

# iphone - iOS 根本不使用 loadView 是不是很糟糕？

> ID：11715856
> 
> 赞同：1
> 
> 时间：2012-07-30T05:30:38.603
> 
> 标签：iphone, ios, xcode, release

Xcode 4.3.3，ios 5.1，使用 ARC。我的第一个应用程序快完成了，有几个问题

1）我想知道不使用故事板和不拖入我的视图对象是否是不好的风格。如果我在 viewDidLoad 中做了所有事情，那是不是因为任何原因都不好？

2）另外，我完成了我的应用程序并且没有对 AppDelegate 类进行任何更改......这不寻常吗？是否有一些我遗漏的东西并且应该解释？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:34:23.863

如果您不需要某些功能，那么不要害怕不实现它。您不必总是填写所有内容。

此外，在哪里进行初始化基本上并不重要。比如我不喜欢loadView；我还在一个`initWith...:`方法中初始化了我的自定义视图控制器。

此外，不要害怕不使用故事板。Apple 为我们提供了这些方便的开发工具，使开发更容易，但不是必须使用它们，不使用它们也不是坏习惯。就个人而言，我根本不使用 IB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T05:34:37.513

1.  在 中初始化和分配对象是一种常见的做法 `viewDidLoad`，除非您希望再次分配它们。在这种情况下，您应该在 中使用它们`viewWillAppear`。故事板是一个可选的选择。在没有故事板的情况下制作您的第一个项目是完全可以的。

2.  对 AppDelegate 进行任何更改是您的选择，例如您想要使用 tabBar 或任何 SplitView，或者您想要添加任何额外的 navigationController。

所以你做的两件事都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:49:48.743

实际上，即使您不是从 NIB 加载，也有充分的理由使用 viewDidLoad。

viewDidLoad 和 viewDidUnload 的良好实现可以允许 didReceiveMemoryWarning 释放当前未显示的视图，从而可能使您的应用程序免于被杀死。

我开始写这个回复，以为它们是自动释放的，但我认为这是我记错了。

# charts - iReports：使用交叉表“总变量”创建图表？

> ID：11715857
> 
> 赞同：0
> 
> 时间：2012-07-30T05:30:52.913
> 
> 标签：charts, jasper-reports, ireport, crosstab

是否可以使用在交叉表中定义的变量，如总度量变量等，在 iReports 中形成图表...

就像我需要在交叉表中使用总变量计算的某个度量的百分比图表。怎么做 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:10:15.857

根据我对 iReports 报告的理解，无法使用图表交叉表中定义的那些变量。交叉表是图表中的一个独立组件。交叉表中定义的所有变量仅在交叉表范围内定义。

对于此修复，我必须通过查询进行修改。现在它们有点复杂我使用了通用表表达式[http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx)仅在我的查询中获取所有所需的字段并使用它们直接在 iReports 图表中。

希望这可以帮助..

# java - 替换所有方法抛出 PatternSyntaxException

> ID：11715863
> 
> 赞同：0
> 
> 时间：2012-07-30T05:31:46.480
> 
> 标签：java, regex, string, replaceall, patternsyntaxexception

看下面的代码：

```
String comment = "1)FCR pick up in Hong Kong2)Local charges will be paiy in Hong Kong & in HK$.3)Booking:virginiawong@fahkco.com.hk4)FCR&DOC:emilywu@fahkco.com.hkTel:00852-23021977Fax:00852-2730217Transaction865320submittedVirginiaWong(T1281954U005) and Status is INCMP  on 10-JUN-11 11.28.45.764386 PM -05:00";
        //comment = comment.replaceAll("\\)", "\\\\)");
        //comment = comment.replaceAll("\\(", "\\\\(");
          if(comment == null || comment.length() < 100)
          {
            System.out.println();  
          }
         String[] strArray =    comment.split(" ");
         for (int i = 0; i < strArray.length; i++) 
           { 
              if(strArray[i].length() > 100)
               {
                 int iter = strArray[i].length() / 100 ;
                 int count = 100 ;
                 int initCount = 0 ;
                 String strReplace = null;

                    for(int j =0 ; j< iter ; j++)
                    {
                      strReplace = strArray[i].substring(initCount ,count); 

                      String strToReplace =  strReplace + "\n" ;
                      comment = comment.replaceAll(strReplace,strToReplace);
                      //comment = comment.replaceAll("\\)", "\\\\)");
                      //comment = comment.replaceAll("\\(", "\\\\(");
                      //comment = comment.replaceAll("\\\\", "");
                      System.out.println(comment);
                      System.out.println(comment.contains("\n"));   
                      initCount = count; //+1 ; 
                      count = count +100 ;
                    } 

                }   

            }
    } 
```

当我运行时，出现以下异常：

> 线程“main”中的异常 java.util.regex.PatternSyntaxException: Unmatched close ')'
> near index 4 HK$.3)Booking:virginiawong@fahkco.com.hk4)FCR&DOC:emilywu@fahkco.com.hkTel:00852-
> 23021977Fax :00852-2

据我了解，我必须逃避括号'（'，'）'，我试图这样做（查看代码中的注释部分）没有任何异常，但我附加到字符串的换行符似乎没有出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:46:00.003

[`String.replaceAll`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)对第一个参数使用正则表达式，当解释为正则表达式时，诸如此类的字符具有**特殊**`)`含义。

试试[`String.replace`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replace%28java.lang.String,%20java.lang.String%29)吧。（它仍然替换*所有出现*的给定子字符串。）

# weblogic - Weblogic：通过 mbean 获取 tps

> ID：11715864
> 
> 赞同：-1
> 
> 时间：2012-07-30T05:31:53.400
> 
> 标签：weblogic, weblogic-10.x, weblogic12c

使用 ThreadPoolRuntime，我可以获得一个吞吐量属性，意思是“每秒完成的平均请求数”。这不是我想要的。我想获得不是平均数字的实时数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:46:15.483

每秒请求数本质上是一个平均值，所以我不太清楚你所说的实时数字是什么意思——你想要最后一秒完成的请求数吗？

给出了一个应用程序完成的`ApplicationRuntimes/[appname]/WorkManagerRuntimes/default/CompletedRequests`请求总数，您可以使用它来计算您想要的任何时间范围内的 RPS 数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:21:49.967

除非这是自定义工作管理器的线程池，否则您将要取回的数字不会非常有意义。即使在将自定义线程池分配给您的特定应用程序组件（EJB、WAR 文件等）的情况下，该数字仍然不太可能表示您要查找的内容。

线程池用于执行该组件的所有工作（或者在默认线程池的情况下，所有工作都为服务器工作，包括内部和客户端驱动的。这意味着就 CPU 而言，请求的“成本”大不相同和执行时间通过同一个池。

您要解决的问题是什么？是否了解特定应用程序组件每秒发生的请求数？您可能希望将 WLDF 视为此类数据的替代来源，尽管在任何一种情况下，您都需要对信息进行后处理以获得有用的信息。

# c++ - 在 C/C++ 中使用字符作为数组下标

> ID：11715869
> 
> 赞同：0
> 
> 时间：2012-07-30T05:32:21.570
> 
> 标签：c++, arrays

可以使用字符作为数组下标吗？

我的数组被初始化为容纳 256 个对象，所以似乎越界访问不是问题。但是，我遇到了一些奇怪的分段错误，我发现这是由于我正在读取的字符值在某些情况下是负数。

但是，我不知道这怎么可能。然后，我将它转换为无符号字符，但这也不起作用。我最终也在那里遇到了边界问题。我还尝试将 char 变量转换为整数，然后访问数组，但我仍然遇到分段问题。

我能做些什么来减轻这种情况？能够通过字符访问数组很好，因为我的程序对 ASCII 集中的每个字符都有一个数组单元。这似乎有道理，但我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:50:52.057

使用字符类型的值作为数组索引是完全有效的。数组索引可以是任何整数类型；`char`, `unsigned char`, 和`signed char`都是整数类型。

但是 plain`char`可以是有符号的也可以是无符号的，这取决于实现。要么与 具有相同的范围，要么与;`signed char`具有相同的范围 `unsigned char`无论哪种方式，它仍然是一种独特的类型。

因此，如果您有一个包含 256 个元素的数组，则可以使用 安全地对其进行索引`unsigned char`，其范围至少为 0 到 255。您不能使用 安全地对其进行索引`char`，因为它可能具有负值。

> 然后，我将它转换为无符号字符，但这也不起作用。我最终也在那里遇到了边界问题。

如果没有更多信息，我无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:58:46.320

使用 unsigned char 应该可以解决一半的问题，尽管您还需要注意另一个边界问题。另一个问题是您可能访问的元素超出了数组中的最大元素数。这是一个例子：

```
char myArray[256];
myArray[0]   = 0; // Works just fine
myArray[1]   = 0; // Works just fine
myArray[256] = 0; // Segfaults 
```

它出现段错误是因为程序试图访问超出数组范围（0 到 255）的变量。这可能就是这里发生的事情，但没有代码我无法确定。

# java - 在 Java/Spring 项目中组织版本化 REST API 代码的最佳实践（示例？）？

> ID：11715874
> 
> 赞同：5
> 
> 时间：2012-07-30T05:32:54.127
> 
> 标签：java, spring, api, rest, web

如果有人能指出一个使用版本控制组织 REST API 代码的良好示例/最佳实践（基于 uri，意味着“/v1/zzz”和“/v2/xxx”，或者甚至更好的依赖于 Accept 标头的东西），我很好奇-- 在 Java/Spring 项目中？恐怕我现在在我的项目中把它弄得太复杂了，所以向别人学习会很好。

澄清：不知道我是否应该通过过滤器来做，然后使用一些设计模式来改变行为，但这会使我的过滤器非常复杂..或者我可能没有考虑弹簧和 DI 的一些技巧，所以我可以让我的代码更干净。最简单的方法是在每个方法中都有一些策略模式，它会有不同的版本，但它似乎也不太干净:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T06:09:50.987

我强烈建议阅读 Apigee [http://offers.apigee.com/api-design-ebook-bw/](http://offers.apigee.com/api-design-ebook-bw/)上的书和博客，我发现它为我提供了关于设计 url 和进行错误处理的非常实用的建议。

[http://www.stormpath.com/blog/spring-mvc-rest-exception-handling-best-practices-part-2](http://www.stormpath.com/blog/spring-mvc-rest-exception-handling-best-practices-part-2)有一篇非常棒的文章，介绍了如何配置 spring mvc 来为 restful 应用程序进行通用错误处理。

至于在接受标头上进行过滤，这很容易做到，因为 spring 允许您根据过滤器缩小处理程序方法映射，如下面的请求映射中的 headers= 所示。

```
@RequestMapping(value="/narrow/headers/{name}/{email}/{customerNumber}",
        method={RequestMethod.POST,RequestMethod.GET},
        headers="Referer=http://localhost:8080/SpringMVC/request-mappings.html")
public ResponseEntity<String> narrowOnHeaders(
        @PathVariable("name")String name, 
        @PathVariable("email") String email, 
        @PathVariable("customerNumber") Integer customerNumber,
        @RequestHeader("Referer") String referer
    ) 
```

# java - 删除 Java 中的日志

> ID：11715879
> 
> 赞同：1
> 
> 时间：2012-07-30T05:33:19.170
> 
> 标签：java, logging, settings

我想删除在代码运行时生成的日志。

例如，我在 voip/asterisk 中使用 asterisk-java，我总是收到以下消息

```
Jul 30, 2012 10:55:17 AM org.asteriskjava.manager.internal.ManagerConnectionImpl connect
INFO: Connecting to 192.168.0.27:5038
Jul 30, 2012 10:55:18 AM org.asteriskjava.manager.internal.ManagerConnectionImpl setProtocolIdentifier
INFO: Connected via Asterisk Call Manager/1.1
Jul 30, 2012 10:55:18 AM org.asteriskjava.manager.internal.ManagerConnectionImpl setProtocolIdentifier
WARNING: Unsupported protocol version 'Asterisk Call Manager/1.1'. Use at your own risk.
Jul 30, 2012 10:55:18 AM org.asteriskjava.manager.internal.ManagerConnectionImpl doLogin
INFO: Successfully logged in
Jul 30, 2012 10:55:22 AM org.asteriskjava.manager.internal.ManagerConnectionImpl doLogin
INFO: Determined Asterisk version: Asterisk 1.0 
```

是否有任何配置设置或其他方式来删除日志并防止它在我的代码执行运行时生成。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:52:03.690

默认情况下，Asterisk-Java 使用 java.util 日志记录，因此您可以查看 JDK 文档以了解如何配置它。

此链接可能会对您有所帮助。

[如何禁用 asterisk-java 的调试或“INFO”输出？](http://www.asterisk-java.org/development/faq.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T05:49:48.677

您不能简单地按名称/包更改日志级别吗？

```
Logger.getLogger(org.asteriskjava.manager.internal.ManagerConnectionImpl.class).setLevel(Level.OFF); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:58:08.910

你没有告诉你是使用 log4j 还是 jdk 日志 谷歌搜索如何禁用星号 java 中的日志给出了这个 [http://www.asterisk-java.org/development/faq.html](http://www.asterisk-java.org/development/faq.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T05:43:19.320

你在使用类似 log4j 的东西吗？？？

我不确定你的要求是什么。但是，如果您不想在运行时查看任何日志，则将所有日志写入 INFO 或 DEBUG 级别，然后在 log4jProperties 中将 logLevel 更改为 ERROR 或 FATAL。

但只需了解日志的目的是在运行时查看它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T05:43:32.237

如果您只是想抑制应用程序的输出，您可以这样做

```
System.setOut(new PrintStream("stdout.log"));
System.setErr(new PrintStream("stderr.log")); 
```

（或者创建你自己的`PrintStream`子类，它只是抑制所有输出。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T07:22:54.073

在 srikanth yaradla 先生的帮助下，这个问题得到了解决。我需要在 logging.properties 文件中进行更改。我之前没有这样做。

# c# - 在 C# 中将整数转换为 Ascii 字符串

> ID：11715880
> 
> 赞同：2
> 
> 时间：2012-07-30T05:33:21.053
> 
> 标签：c#

我想将一个整数转换为 3 个字符的 ascii 字符串。例如，如果整数是 123，我的 ascii 字符串也将是`"123"`. 如果整数是 1，那么我的 ascii 将是`"001"`. 如果整数是 45，那么我的 ascii 字符串将是`"045"`. 到目前为止，我已经尝试过`Convert.ToString`，但无法得到结果。如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T05:51:30.433

```
int myInt = 52;
string myString = myInt.ToString("000"); 
```

myString 现在是“052”。希望它会有所帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T05:48:43.183

这取决于您是真的想要 ASCII 字符还是想要文本。下面的代码将两者兼而有之。

```
int value = 123;
// Convert value to text, adding leading zeroes.
string text = value.ToString().PadLeft(3, '0');
// Convert text to ASCII.
byte[] ascii = Encoding.ASCII.GetBytes(text); 
```

意识到 .Net 不使用 ASCII 进行文本操作。您可以将 ASCII 保存到文件中，但如果您使用`string`对象，则它们以 UTF-16 编码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-30T05:37:51.117

回答新问题：

你正在寻找[`String.PadLeft`](http://msdn.microsoft.com/en-us/library/92h5dc07.aspx). 像使用它`myInteger.ToString().PadLeft(3, '0')`。或者，只需使用[`"0"`自定义格式说明符](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#Specifier0)。喜欢`myInteger.ToString("000")`。

* * *

回答原始问题，返回如下字符串`"0x31 0x32 0x33"`：

```
String.Join(" ",myInteger.ToString().PadLeft(3,'0').Select(x=>String.Format("0x{0:X}",(int)x)) 
```

解释：

*   第一个`ToString()`将您的整数`123`转换为其字符串表示形式`"123"`。
*   `PadLeft(3,'0')``0`使用 a作为填充字符将返回的字符串填充为三个字符
*   字符串可作为 的数组进行枚举`char`，因此`.Select`选择该数组
*   对于数组中的每个字符，将其格式化为`0x`字符的值
*   转换`char`to`int`将允许您获取 ASCII 值（您可能可以跳过此转换，我不确定）
*   “X”格式字符串将数值转换为十六进制
*   `String.Join(" ", ...)`将它们重新组合在一起，中间有空格

# php - PHP move_uploaded_file 权限被拒绝

> ID：11715882
> 
> 赞同：3
> 
> 时间：2012-07-30T05:34:06.737
> 
> 标签：php, file-upload, permission-denied

我一直在尝试将图像从表单移动到我网站上的上传文件夹，该文件夹由 godaddy 托管。使用 move_uploaded_file() 方法时，我收到权限被拒绝错误。关于这个主题，我已经解决了很多问题，但没有一个问题能解决我的问题。另外，我已将权限更改为 777。

**这是我得到的错误：**

> 警告：move_uploaded_file() [function.move-uploaded-file]：无法将 'D:\Temp\php\php42C0.tmp' 移动到 D:\Hosting\11111\html\dir\ 中的 'upload/vZvD6WI4vkapbCLovWtrSIG3xPLD0E.jpeg'第 80 行的 upload_image\formsubmit.php

**PHP代码：**

```
$name = $_POST['name'];
$email = $_POST['email'];

if(isEmpty($name) || isEmpty($email)) {
    print '<b>Please go back to the previous page and fill out your name.</b>';
}
else {

$file_name = "file1";
    if ((($_FILES[$file_name]["type"] == "image/gif")
     || ($_FILES[$file_name]["type"] == "image/jpeg")
     || ($_FILES[$file_name]["type"] == "image/jpg")
     || ($_FILES[$file_name]["type"] == "image/bmp")
     || ($_FILES[$file_name]["type"] == "image/tiff")
     || ($_FILES[$file_name]["type"] == "image/png")
     || ($_FILES[$file_name]["type"] == "image/pjpeg"))
     && ( ($_FILES[$file_name]["size"] < 10000000) && $_FILES[$file_name]["size"] > 0) )
    {
        if ($_FILES[$file_name]["error"] > 0)
        {
            print "There was an error in uploading your images: " . $_FILES[$file_name]["error"] . "<br />";
        }
        else
        {
            if (file_exists("upload/" . $rand_img_name.".jpeg") )
            {
                print "Please try uploading your image again<br />";
            }
            else
            {
                move_uploaded_file($_FILES[$file_name]["tmp_name"],
                "upload" ."/". $rand_img_name.".jpeg");
                $files_are_valid[($i-1)] = true;
            }
        }
    }
    else
    {
        print 'Image must be a valid image under 10 MB (Make sure you submitted an image)<br />';
        $files_are_valid[($i-1)] = false;
    }
}

if($files_are_valid[0] == true) {
    $all_valid = true;
}
else {
    $all_valid = false;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T05:39:01.290

这是一个 Windows 服务器（路径中的斜杠会泄露它）。所以需要通过 GoDaddy 权限面板设置权限。您需要为上传目录设置读/写权限。通过 FTP 设置 777 不会在 Windows 服务器上削减它。

[http://support.godaddy.com/help/article/6481/setting-directory-permissions-with-windows-hosting-accounts/](http://support.godaddy.com/help/article/6481/setting-directory-permissions-with-windows-hosting-accounts/)

# iphone - 为什么我的 GUI 在运行时与在 Interface Builder 中看起来不同？

> ID：11715902
> 
> 赞同：1
> 
> 时间：2012-07-30T05:35:38.357
> 
> 标签：iphone, xcode, ipad, interface, builder

我正在使用模态视图控制器在屏幕上显示视图。我在视图设置中拥有所有内容，并在 Interface Builder 中对齐... ![界面生成器中的视图是什么样的](../Images/d674203af4280ba8a5a9ece64c0baf52.png)

但是当我在我的 ipad 上运行我的应用程序时，事情并没有对齐。在第二个屏幕截图中，tableview 和 dateTimePicker 之间存在间隙。

![它在 iPad 上的外观](../Images/18537fdf993de04dabddd06b56874d4d.png)

在界面生成器中，我将视图大小设置为 540x620，这是模态视图的大小。任何想法为什么当我运行我的应用程序时它看起来不同？

编辑：这是我呈现视图的方式

```
// Create the variable that represents the app delegate
KMAppDelegate *delegate = (KMAppDelegate *)[[UIApplication sharedApplication] delegate];

// Create view controller
ModalDetailVC *modalDetailVC = [[ModalDetailVC alloc] initWithNibName:@"ModalDetailVC" bundle:nil];

// Call the pushViewController:animated method from the navigationController variable inside the delegate
[delegate.navigationController pushViewController:modalDetailVC animated:YES];

modalDetailVC.view.superview.frame = CGRectMake(0, 0, 540, 620);
modalDetailVC.view.superview.center = self.view.center; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:45:49.473

我将界面生成器中日期选择器的自动调整大小掩码设置为此![自动调整蒙版](../Images/9eab802b6a2187fabe5e496d75183a78.png)

谢谢您的帮助。

# xcode - Xcode 4.4 - 存在内部 API 错误

> ID：11715909
> 
> 赞同：9
> 
> 时间：2012-07-30T05:36:25.107
> 
> 标签：xcode, api, osx-lion, internal

嗨，我刚刚升级到山狮。我创建了一个空的单一视图应用程序并运行它。第一次运行良好，但下一次运行将给我**“有一个内部 API**错误”弹出警告 TWICE。我的其他项目也是如此。他们一次运行正常，但在下一次运行时出现此错误。没有任何警告或任何具体的警告信息。

知道如何解决这个问题吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:59:13.627

我让它在 iOS6 Beta 4 上运行！！这就是我所做的，但其他变体也可能起作用：-

1.  安装 XCode 4.5 开发者预览版 4
2.  从设备中删除您的应用
3.  从 Dev Preview 4 运行您的应用程序
4.  *再次删除您的应用*（不确定是否必须这样做）
5.  返回 XCode 4.4.1
6.  运行你的应用程序，停止运行，再次运行！！！

当然你可以在 4.5 中继续开发，但我更愿意等待。

安装 4.5 Beta 4 会安装更新的设备支持。一旦完成一次（可能在任何设备上），它应该可以正常工作。如果您在不同的机器上使用相同的设备，您将不得不从 4.5 Beta 4 再次运行它一次，然后才能使用您喜欢的 Xcode 版本（这次您不需要从设备中删除该应用程序）。

编辑：我很确定，如果您对核心数据进行更改，您也需要首次从 4.5 运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T19:54:01.927

我有 Xcode 5.0.2 和带有 iOS 7.0.6 的 iPhone。

每次在 iPhone 上启动我的项目时，我都会看到“There was an internal API error”。它是在模拟器上启动的，没有任何问题。

我做了所有通常有帮助的事情（比如删除应用程序、清理、重新启动 Xcode、重新启动 Mac 等）。

这个问题只有在我恢复 iPhone 后才消失。悲伤但真实。至今不知道，为什么会出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T21:21:43.637

听起来很疯狂，但您也不能使用 XCode 4 的 Beta 版本。但是，您必须将它放在左手，以授权您的 iPhone 使用非 Beta 版本进行编译（不要问我为什么，它可以工作）。

如果您使用 XCode 4.5 预览版和 IOS6 Beta 4 运行您的应用程序，那么您第二次在设备上运行您的应用程序时，您将收到内部 API 错误。

理论上，您不能在 iOS6 Beta 4 iPhone 上使用 XCode 4.4 进行编译。

但...

看来，如果您启动 XCode 4.5 Preview，连接您的 iPhone（以便识别），在其上运行应用程序（即使您收到错误），退出 XCode 4.5，启动 XCode 4.4 和 .. tadaaaa...您的iPhone现在被认为是授权设备编译...

当然，XCode 4.4 不会产生 api 错误......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T15:09:41.340

不知道这是否有帮助，但我已经删除了所有文件`${HOME}/Library/Developer/Xcode/iOS DeviceSupport`，它起到了一种魅力（Xcode 4.4.1，OSX 10.7）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T21:39:21.917

当我将我的设备升级到 Preview4 但我的 MBP 仍在运行 Xcode Preview3 时，我遇到了这个问题。更新到 Xcode Preview4 让我的问题消失了，无需重新启动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T10:21:04.470

从设备/模拟器中手动删除应用程序将使您能够成功构建和运行。一个长期的解决方案是不使用 Beta Xcode :)

# html - CSS 样式不适用于特定于 IE 浏览器的两个不同服务器环境中的页面

> ID：11715914
> 
> 赞同：0
> 
> 时间：2012-07-30T05:36:54.530
> 
> 标签：html, css, iis-7, cross-browser

我创建了一个简单的网络应用程序。当我将应用程序部署到 Dev 和 QA 服务器时，一切正常。当我将相同的代码库部署到暂存服务器时，我发现许多 CSS 样式没有正确应用。几个 Div 标签错位并散落在其他地方。更有趣的是，这只发生在 IE 浏览器上。（我使用的是 IE9）。应用程序已托管在 IIS 服务器中。有没有人面临类似的问题？让我知道是否需要提供更多详细信息？

在我使用 Dev 工具进行比较后，又进行了一次观察。暂存服务器在 CSS 类中没有一些缺失的属性。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:50:43.427

我建议检查您未正确显示的 div 是否多次应用相同的规则。一条规则将凌驾于另一条之上。

打开检查器，查找重复的规则。一般来说，规则会按照加载的顺序应用，在你不同的环境中可能不匹配。

# javascript - 在javascript中检测是webview还是外部浏览器

> ID：11715915
> 
> 赞同：1
> 
> 时间：2012-07-30T05:36:55.933
> 
> 标签：javascript, ios, browser

> **可能重复：**
> [在 Android 浏览器或 WebView 中检测](https://stackoverflow.com/questions/6783185/detect-inside-android-browser-or-webview)

我想检测网页是否在 ios Web 视图或其他外部示例浏览器中打开。如何在javascript代码上检查这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:55:55.767

看看用户代理，应该有区别——特别是，非 webview 移动设备明确提到了 Safari。以下问题有一些示例代码，可用于检测差异。

[通过 javascript 检测 ipad/iphone webview](https://stackoverflow.com/questions/4460205/detect-ipad-iphone-webview-via-javascript)

# c# - 卡在 linq 查询中

> ID：11715917
> 
> 赞同：1
> 
> 时间：2012-07-30T05:36:56.907
> 
> 标签：c#, linq, entity-framework-4

我被这个 linq 查询卡住了，我只需要优化最后的价格计算，因为我得到了大约 1000 篇文章，而且销售量很大，所以它变慢了......

```
var result = from article in db.Entities.Articles 
select new{
     article.ID_ART,
     article.Designation,
     article.BuyPrice,
     article.SellPrice,
     LastPrice = (from sale in article.Sales where sale.Date == article.Sales.Max(X => X.Date) select sale.Price).FirstOrDefault()==0?
     article.BuyPrice: (from sale in article.Sales where sale.Date == article.Sales.Max(X => X.Date) select sale.Price).FirstOrDefault()
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T05:43:28.803

```
var result = from article in db.Entities.Articles 
    let lastPrice = (from sale in article.Sales 
                     orderby sale.Date descending 
                     select sale.Price).FirstOrDefault()
    select new
    {
        article.ID_ART,
        article.Designation,
        article.BuyPrice,
        article.SellPrice,
        LastPrice = lastPrice ==0 ? article.BuyPrice : lastPrice
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:40:41.773

你应该要么`join`或`Include`销售。我假设因为它是文章上的导航属性，所以它是一个 FK 表。

只需使用`from article in db.Entities.Articles.Include("Sales")`... 代替。

这将加载 sales 以供参考，并防止它在初始化匿名类型时运行子查询。

# ssh - 系统崩溃后恢复 SSH 会话

> ID：11715919
> 
> 赞同：-2
> 
> 时间：2012-07-30T05:37:36.500
> 
> 标签：ssh, crash, recovery, bsod

当我的计算机崩溃并且收到 BSOD 时，我正在通过 SSH 编辑文件。我正在通过 Putty 进行 SSH 连接。如果可能的话，我真的很想康复。我不知道是否有办法恢复 SSH 会话并从那里保存。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:41:13.160

不，没有办法恢复你的会话，除非你使用了类似 screen 的东西。

但是可能有一种方法可以恢复您的文件，但这取决于您使用的编辑器。Vim 和 Emacs 等编辑器会存储未保存文件的更改，并在您下次打开文件时通知您。

因此，在这种情况下，您所要做的就是再次打开同一个文件。在其他情况下，更改可能就消失了。

# javascript - 当我单击与之对应的复选框时，如何使不可编辑的文本框可编辑

> ID：11715923
> 
> 赞同：1
> 
> 时间：2012-07-30T05:37:40.180
> 
> 标签：javascript, jquery, html

对应的有一个复选框和一个不可编辑的文本框。当我单击复选框时，相应的不可编辑文本框应变为可编辑文本框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T05:39:42.683

基本上：

```
$('#some-checkbox').click(function() {
   $('#some-textfield').prop('disabled', !$(this).is(':checked'));
}); 
```

现在，您如何查找相应的文本框取决于您的标记。一种方法是为文本框提供一个作为复选框 ID 的类。将其应用于所有复选框可能如下所示：

```
$(':checkbox').click(function() {
   var box = $(this);
   $('.' + box.attr('id')).prop('disabled', !box.is(':checked'));
}); 
```

否则，文本字段可能会根据其在 DOM 上的位置来定位：

```
<div class="wrapper">
   <input type="checkbox">
   ...
   <div>
      <input type="text" disabled="disabled" />
   </div>
</div> 
```

然后，您可能会执行以下操作：

```
$(':checkbox').click(function() {
   var box = $(this);
   box.closest('.wrapper').find('input[type=text]').prop('disabled', !box.is(':checked'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T06:09:30.703

这段代码实际上运行良好，并且可以使用。

这是表格的东西：

```
<form id="myGame" name="myGame" action="" method="post">
<input type="radio" name="checkme" id="checkme" onClick="openTheHouse();" >Open Sesame
<input name="open_id" id="openid" type=text disabled="disabled">
</from> 
```

还有脚本：实际上它很酷，这个脚本没有什么复杂的。

```
<script type="text/javascript">
function openTheHouse()
{

if(document.myGame.checkme.checked == true)
{
document.myGame.openid.disabled = false ;
}

}
</script> 
```

就是这样，一切都完成了。当然，我相信它有效。

# objective-c - 后退按钮 presentModalViewController

> ID：11715933
> 
> 赞同：0
> 
> 时间：2012-07-30T05:38:56.107
> 
> 标签：objective-c, ios, xcode

当我转到另一个视图控制器时，我想要一个后退按钮，但我无法实现这一点。我试图将后退按钮设置为不隐藏，但没有运气。一点背景信息，应用程序启动时没有加载导航控制器，我试图通过一个 uiviewcontroller 到另一个。

这是我尝试实现这一目标的方法，如果有人能说出问题所在......将不胜感激！

```
displayViewController *controller = [[displayViewController alloc] initWithNibName:@"displayViewController" bundle:nil];
UINavigationController *aNavController = [[UINavigationController alloc] initWithRootViewController:controller];

[self presentModalViewController:aNavController animated:YES];

[aNavController release];
[controller release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:03:10.797

您可以将后退按钮放在您想要后退按钮的视图控制器中

```
- (void)viewDidLoad
{

 // back button 
 UIImage* image = [UIImage imageNamed:@"back.png"];
 CGRect frame = CGRectMake(0, 0, image.size.width, image.size.height);
 UIButton *backButton = [[UIButton alloc] initWithFrame:frame];
 [backButton setBackgroundImage:image forState:UIControlStateNormal];
 [backButton addTarget:self action:@selector(backAction:) forControlEvents:UIControlStateHighlighted];

UIBarButtonItem* backButtonItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];
self.navigationItem.leftBarButtonItem = backButtonItem;
[backButtonItem release];
[backButton release];
}

-(void) backAction:(id)sender
{
   [self.navigationController popViewControllerAnimated:YES];
} 
```

# android - 使用 android 在 Flickr 上上传图片

> ID：11715935
> 
> 赞同：0
> 
> 时间：2012-07-30T05:39:01.243
> 
> 标签：android, flickr

我需要将 Flickr 与 android 集成。我完成了身份验证。我需要将图像上传到 flickr，但我不知道如何做同样的事情。我参考文件：[http](http://www.flickr.com/services/api/upload.api.html) ://www.flickr.com/services/api/upload.api.html相同。有谁能够帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:27:03.883

![在此处输入图像描述](../Images/0b4d01ff265cbbc73bbeb28df2105a91.png)

```
//change your key and secreat key
private static final String API_KEY = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"; //$NON-NLS-1$
public static final String API_SEC = "xxxxxxxxxxxxx"; //$NON-NLS-1$

View.OnClickListener mFlickrClickListener = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        if (fileUri == null) {
            Toast.makeText(getApplicationContext(), "Please pick photo",
                    Toast.LENGTH_SHORT).show();

            return;
        }

        Intent intent = new Intent(getApplicationContext(),
                FlickrjActivity.class);
        intent.putExtra("flickImagePath", fileUri.getAbsolutePath());
        startActivity(intent);
    }
}; 
```

# wso2 - 数据源的密码如何存储在 WSO2 数据服务服务器中？

> ID：11715937
> 
> 赞同：0
> 
> 时间：2012-07-30T05:39:04.363
> 
> 标签：wso2, wso2dss

在数据服务服务器中，其中一个步骤是创建一个数据源，您需要在其中提供连接 URL 以及数据库用户 ID 和密码。

我的问题是

*   此密码如何存储在数据服务服务器中？
*   密码是否加密以及使用何种加密方式？
*   密码是存储在数据库还是文件中？
*   由于文档中没有太多详细信息，我在哪里可以找到更多相关信息？

我需要找到这些问题的答案，因为当我们计划将 WSO2 DSS 推广到实时环境时，这些可能是数据库安全团队提出的问题。

如果没有答案，我也会感谢我可以将查询发送到的任何链接或电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:23:29.783

如果您使用当前版本的数据服务服务器，此信息将存储在注册表中。

在下一个版本中，可以将这些指定为 xml 文件并使用安全 valult 保护 xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:28:00.377

默认情况下，数据服务不加密 .dbs 文件中的密码条目。您可以使用 Synapse datasource.properties 文件来定义全局数据源并将它们作为数据服务中的“碳数据源”进行访问。datasource.properties 文件中的这些数据可以使用安全保险库功能进行加密，有关更多信息，请查看 [1]。

此外，在 DSS v2.6.3 版本中，我们有部分安全保险库实施，但它没有公开记录，但仍然可以从这里访问 [2]。该实现未完全集成到 Carbon 安全保险库实现中，您必须编写自己的“SecretCallBackHandler”。

从即将发布的即将发布的 DSS v3.0.0 版本开始，它将通过集成到 Carbon 安全库中包含适当的安全库功能，您可以在其中为数据服务向导本身的密码字段提供别名。此外，我们还有用于定义全局数据源的新 XML 配置，它独立于 Synapse，并且还与安全库集成。

[1] [http://wso2.org/project/esb/java/4.0.0/docs/samples_setup_guide.html#datasource](http://wso2.org/project/esb/java/4.0.0/docs/samples_setup_guide.html#datasource) [2] [http://wso2.org/project/data-services/2.6.3/docs /secureVault.html](http://wso2.org/project/data-services/2.6.3/docs/secureVault.html)

干杯，安佳娜。

# asp.net - asp:RequiredFieldValidator 使用空字段进行回发

> ID：11715947
> 
> 赞同：5
> 
> 时间：2012-07-30T05:39:46.403
> 
> 标签：asp.net, validation

我的 aps 验证器遇到了以下问题。我有一个带有 asp 验证器的文本框。当用户将文本框留空并单击提交按钮时，将显示验证消息，但页面会进行回发。任何想法可能导致这种情况发生？

下面是验证器：

```
<asp:RequiredFieldValidator ID="valReqName" runat="server" 
    ControlToValidate="txtName" Display="Dynamic" ErrorMessage="blq blq">
</asp:RequiredFieldValidator>

<asp:TextBox ID="txtName" style="font-family:Tahoma, Geneva, sans-serif; 
    color: #4F4F4F;" runat="server">
</asp:TextBox> 
```

非常感谢，安东

**编辑**

我在 UpdatePanel 中有两个选项卡。验证问题是第二个选项卡的一部分，用户在其中进行一些输入。当我删除此触发器时：

```
<asp:AsyncPostBackTrigger ControlID="lnkUpload" EventName="Click" /> 
```

回发问题解决了，但又出现了一个问题。好吧，至少回发被删除了。感谢所有的答案。

（lnkUpload 是第二个标签链接按钮的 id）

**编辑 2**

那么这里是解决方案。看来我的问题和这篇文章一样。[http://jeffreypaarhuis.com/2011/08/08/validation-not-working-in-updatepanel/](http://jeffreypaarhuis.com/2011/08/08/validation-not-working-in-updatepanel/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:42:15.550

我正在发布解决方案，因为它可能对其他人有用。

"*这就是问题所在：当在页面上加载验证器时，它会创建一些 javascript 来支持客户端验证。当您将验证器放置在默认情况下不可见的用户控件中，并且此用户控件位于更新面板中时，它没有正确创建该 javascript。这是解决方案：在更新面板之外，我在上面做了，使用虚拟验证组创建一个带有虚拟文本框的虚拟验证器，如下所示：* “

```
<%--dummy validator to make ajax validation possible--%>
<asp:RequiredFieldValidator runat="server" CssClass="hidden" ControlToValidate="dummyTextBox" ValidationGroup="dummy"></asp:RequiredFieldValidator>
<asp:TextBox runat="server" ID="dummyTextBox" CssClass="hidden"></asp:TextBox> 
```

看来我的问题和[这篇文章](http://jeffreypaarhuis.com/2011/08/08/validation-not-working-in-updatepanel/)一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T07:05:00.997

您是否尝试过此线程中的解决方案：

[ASP.net RequiredFieldValidator 不阻止回发](https://stackoverflow.com/questions/656098/asp-net-requiredfieldvalidator-not-preventing-postback)

从 web.config 中删除以下行

```
 <xhtmlConformance mode="Legacy"/> 
```

“如果我删除该行，我的验证会按照我的预期进行。谷歌搜索发现了一堆关于在将 Web 应用程序从 .net 1.1 升级到 .net 3.5 时 VisualStudio 如何将该行添加到 web.config 的博客文章。

博客文章主要抱怨该字段如何干扰 .net 的 AJAX 内容，但我猜它会以类似的方式与为 RequiredFieldValidator 发出的 JavaScript 混淆。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T07:10:52.567

请将 ValidationGroup 添加到您的验证器（valReqName）和按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-22T07:40:12.283

将此属性添加到您的验证器。

```
 EnableClientScript="True" 
```

# grails - 使用 elasticsearch 0.19.8 在 EC2 中发起战争时出现奇怪的结果

> ID：11715951
> 
> 赞同：2
> 
> 时间：2012-07-30T05:40:17.810
> 
> 标签：grails, amazon-ec2, jetty, elasticsearch

我正在使用 Grails 2.0.4 和 elasticsearch 0.19.8，以及使用 0.19.8 的 elasticsearch-grails 插件的本地构建，在 EC2 的微型 Ubuntu 实例上运行。

我正在本地构建我的 grails 项目作为一场战争。当我将它放在本地的码头容器中（在我的笔记本电脑上）时，码头启动，我能够导航到根上下文（如预期的那样）并获取我的网站。

但是，当我在微型 EC2 实例上的相同版本的码头（通过 md5sum 确认）中进行相同的战争（通过 md5sum 确认）时，我得到了奇怪的结果。

偶尔，码头启动并且我的应用程序可用......一切都很好。但是其他时候，码头不会启动......并且日志抱怨弹性搜索。

现在，我是第一个承认在同一个节点上同时运行 elasticsearch 和 jetty（与 grails 战争）的人，嗯，不是最好的主意......但是，这是一个测试环境，我可以接受交换到磁盘（不是性能测试实验室）。

但是，让我发疯的是运行我的应用程序的不一致。目前，我无法启动它（我想这反驳了我的“不一致”论点）。但是，即使进行“开始”战争，战争中的变化很小（没有域对象变化，只是控制器和/或视图的变化），我的应用程序也不会启动 - 抱怨弹性搜索。

[这是要点](https://gist.github.com/3205132)

过去，我通过停止 elasticsearch 并吹走`/var/lib/elasticsearch/elasticsearch`（根据我的理解，这基本上是吹走 elasticsearch 索引的粗略方式）来解决这个问题。

但现在，这似乎不起作用。也不会卸载/重新安装 elasticsearch。

任何人都可以就寻找什么和/或在哪里寻找任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:47:38.353

好的，这让我发疯，但我找到了答案。

/data 包含一个 elasticsearch 目录，该目录显然有错误的数据......我删除了这个目录并重新启动了码头和......

中提琴！

我不知道它是如何进入这种状态的，也不知道删除目录的实际后果（我认为弹性搜索数据保留在弹性搜索节点中......）

我怀疑我的应用程序未完全关闭...

感谢大家的意见。

# javascript - 简单的文本滑块

> ID：11715952
> 
> 赞同：0
> 
> 时间：2012-07-30T05:40:22.683
> 
> 标签：javascript, jquery, html, css

我一直在寻找一个简单的文本滑块，使用 jquery 或简单的 css3 之一。我将添加一个我正在寻找的模型并解释其功能。应该显示内容，并且幻灯片选项应该像快照中的那样。下面的另一个 div 具有与上面相关的内容，因此当上面的一个幻灯片时，下面的 div 中的内容也应该改变，并且底部 div 只有在用户单击主 div 时打开它时才可见。这个模式有什么有用的插件吗？![在此处输入图像描述](../Images/3378b5f69e544c892f71fc4307aae9c4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:58:52.827

您可以使用jQuery 的[Coda Slider](http://kevinbatdorf.github.com/codaslider/)插件。当用户单击按钮或任何其他 ui 元素时，使内容 div 打开的自定义必须手动包含。应该不难。您可以使用[show()](http://api.jquery.com/show/)和[hide()](http://api.jquery.com/hide/)的 jQuery 函数来完成所需的操作。

# emacs - 重新启动时是否可以恢复 emacs 会话（打开的缓冲区）

> ID：11715959
> 
> 赞同：2
> 
> 时间：2012-07-30T05:41:05.953
> 
> 标签：emacs

> **可能重复：**
> [恢复 Emacs 会话/桌面](https://stackoverflow.com/questions/2703743/restore-emacs-session-desktop)

我正在使用 emacs 进行开发。并且可能有许多缓冲区打开。有没有办法可以在我关闭 emacs 时保存状态。这样当 emacs 再次打开时，它会恢复不同的窗口？

我正在研究浏览器可以做什么来恢复以前的浏览会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:54:25.890

一般来说，你永远不会“关闭”你的 Emacs。这不是开玩笑。一般的工作方式是让 Emacs 一直运行，并在其中使用`emacsclient`. 这与 vim 不断打开和关闭的 vim 风格不同。

但是，您的问题是很多人提出的一个老问题，并且已经提出并编码了许多解决方案。在 emacswiki 上有一个[它们的列表。](http://www.emacswiki.org/emacs/SessionManagement)你可以选择一个适合你的。

# css - 如果我收到错误提示字体未加载但它们显示在网页上，是否可以？

> ID：11715962
> 
> 赞同：0
> 
> 时间：2012-07-30T05:41:50.790
> 
> 标签：css, http-status-code-404, font-face, google-chrome-devtools

我用了`@font-face`

```
@font-face { // body font
    font-family: 'Sofia Pro Light';
    src: url('../library/fonts/Sofia Pro Light/SofiaProLight.eot');
    src: url('../library/fonts/Sofia Pro Light/SofiaProLight.eot?#iefix') format('embedded-opentype'),
         url('../library/fonts/Sofia Pro Light/SofiaProLight.woff') format('woff'),
         url('../library/fonts/Sofia Pro Light/SofiaProLight.ttf') format('truetype'),
         url('../library/fonts/Sofia Pro Light/SofiaProLight.otf') format('opentype'),
         url('../library/fonts/Sofia Pro Light/SofiaProLight.svg#font-name') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

这就是 Chrome Dev 工具给我的东西 我 ![](../Images/25414de58d5cbe4b7caadc1b73a63568.png) 应该忽略它吗？因为一切似乎都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:27:52.553

我会打开[Fiddler](http://www.fiddler2.com/fiddler2/)看看一切是否真的很好。

我假设这些文件确实在您所说的位置。所以我怀疑你遇到了和我一样的事情。Chrome 对 mime 类型很挑剔。但错误信息具有误导性。基本上，当您没有来自服务器的 WOFF 文件的正确 mime 类型时，Chrome 将故障转移到另一种字体格式。在这种情况下，它将首先故障转移到 TTF 字体。这意味着将在 Chrome 中下载两种不同的字体格式。只是，您似乎也遇到了 TTF 字体错误，因此 Chrome 可能会在您的情况下下载 3 种不同的格式。

所以这是值得修复的。您需要做的就是将您的服务器配置`application/x-font-woff`为作为 WOFF 文件的 MIME 类型发送。

例如，在 ASP.NET 中，您可以将其添加到 web.config...

```
<system.webServer>
        <staticContent>
            <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
        </staticContent>
</system.webServer> 
```

# javascript - 添加视图框时鼠标位置的变化

> ID：11715966
> 
> 赞同：5
> 
> 时间：2012-07-30T05:42:37.393
> 
> 标签：javascript, svg, offset, mousemove, viewbox

我目前正在学习和工作在 JavaScript 和 SVG 方面，我是新手。这是我的场景

我有一个 div，里面有一个 SVG。

```
<div id "O_div">
  <svg>
     <line x1= "0" x2 = "0" y1 ="0" y2 ="0">
     </line>
  <svg>
</div> 
```

现在我想知道鼠标相对于我的 div 的位置，所以我编写了以下代码

```
odiv = document.querySelector('#O_div');

XOffset = $(Odiv).position().left;
YOffset = $(Odiv).position().top;

   // And on my mouse move event 
            $('#O_div').mousemove(function(event) {
                var mouseX = event.clientX - XOffset;
                var mouseY = event.clientY - YOffset;
               // Here I am setting my line x and y coordinate equal mouseX and mouseY
               //So that line moves according to mouse move movement.           
            }); 
```

它工作正常。但是，当我使用查询 resizable 向我的 div 添加调整大小功能时，问题就出现了。要调整我的 svg 的大小，我在其中添加了一个 viewBox 选项。现在我的 svg 看起来像这样

```
<svg viewBox="0 0 450 154" preserveAspectRatio="xMinYMin meet">
</svg> 
```

但是现在我的鼠标坐标不能正常工作，我的线离我的鼠标有点远，当我增加 div 大小时它离我的鼠标更远。当我的svg中有一个viewbox选项时，任何人都可以指导我如何计算我的偏移位置。

感谢任何帮助和指导。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T14:54:32.957

如果您有一个 viewBox，那么您需要记住鼠标事件在客户端坐标系中提供值，而不是通过 viewBox 建立的坐标系。[这篇博文](http://www.codedread.com/blog/archives/2005/12/21/how-to-enable-dragging-in-svg/)可能有助于解释这一点，这里有一个[例子](http://www.codedread.com/dragtest.svg)。

简而言之，要获取当前用户空间中的坐标，您需要做的是：

```
var m = El.getScreenCTM();

// note: assumes the root is an <svg> element, replace 
// document.documentElement with your <svg> element.
var p = document.documentElement.createSVGPoint(); 

p.x = evt.clientX;
p.y = evt.clientY;
p = p.matrixTransform(m.inverse()); 
```

变量 p 现在将包含元素 El 的用户坐标系中的鼠标位置。

# asp.net - 右对齐 div 标签内的菜单控件

> ID：11715969
> 
> 赞同：4
> 
> 时间：2012-07-30T05:42:48.740
> 
> 标签：asp.net, html, css

当在 ASP.NET 中创建一个新的 Web 应用程序项目时，它在 site.master 页面中带有一个 NavigationMenu，它有 2 个元素（Home 和 About），请让我知道如何将此菜单对齐到右侧。

这是屏幕截图和代码：

![在此处输入图像描述](../Images/df9ee23b355ca9e428af5acbaf119463.png)

```
<div class="clear hideSkiplink">
    <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false"
        IncludeStyleBlock="False" Orientation="Horizontal">
        <Items>
            <asp:MenuItem NavigateUrl="~/Default.aspx" Text="AnaSayfa"/>                 
            <asp:MenuItem NavigateUrl="~/About.aspx" Text="Hakkında" />
        </Items>
    </asp:Menu>
</div> 
```

这是呈现的html代码：

```
<div style="float: left;" id="NavigationMenu" class="menu">
    <ul style="width: auto; float: left; position: relative;" class="level1 static" role="menubar"
        tabindex="0">
        <li style="float: left; position: relative;" class="static" role="menuitem"><a class="level1 static"
            tabindex="-1" href="Default.aspx">Ana Sayfa</a></li>
        <li style="float: left; position: relative;" class="static" role="menuitem"><a class="level1 static"
            tabindex="-1" href="About.aspx">Hakkında</a></li>
    </ul>
</div> 
```

这里的CSS：

```
div.hideSkiplink
{
    background-color:#3a4f63;
    width:100%;
}

div.menu
{
    padding: 4px 0px 4px 8px;
    text-align: right;
}

div.menu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: auto;
}

div.menu ul li a, div.menu ul li a:visited
{
    background-color: #465c71;
    border: 1px #4e667d solid;
    color: #dde4ec;
    display: block;
    line-height: 1.35em;
    padding: 4px 20px;
    text-decoration: none;
    white-space: nowrap;
}

div.menu ul li a:hover
{
    background-color: #bfcbd6;
    color: #465c71;
    text-decoration: none;
}

div.menu ul li a:active
{
    background-color: #465c71;
    color: #cfdbe6;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T05:59:58.277

添加`text-align: right;`到`div.menu`样式中`Site.css`。

由于某些东西正在向`float:left;`菜单 div 添加 a，因此您需要`float:right !important;`按照 Rajiv 的建议在 CSS 中覆盖它。让你的 CSS 看起来像这样：

```
div.menu
{
    padding: 4px 0px 4px 8px;
    text-align: right;
    float: right !important;
} 
```

正在应用的手动样式可能是由于一些内置的菜单样式。查看文档和其中包含的演练：http: [//msdn.microsoft.com/en-us/library/ecs0x9w5](http://msdn.microsoft.com/en-us/library/ecs0x9w5(v=vs.100) (v=vs.100) 尤其是曾经与 ManuStyles 和 MenuItemStyles 相关的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:16:19.343

如果您想让 div 内的文本右对齐，请执行以下代码

```
text-align:right; 
```

但是，如果您想将整个 div 向右移动，您可以选择

```
float:right 
```

有关“浮动”属性的信息，请阅读此

[如何在另一个 div 中对齐 3 个 div（左/中/右）？](https://stackoverflow.com/questions/2603700/how-to-align-3-divs-left-center-right-inside-another-div/8103198#8103198)

# asp.net - 如果它的值在数据库中，如何选中复选框？

> ID：11715972
> 
> 赞同：-2
> 
> 时间：2012-07-30T05:43:07.010
> 
> 标签：asp.net, vb.net

我是asp.net的新手

我想问一下我已经在数据库中插入的数据网格视图如何？

像这样的观点之前

![在此处输入图像描述](../Images/5fba36dfe653aef46f66237587ea1897.png)

后

![在此处输入图像描述](../Images/4a06d5f241f2b20fe11f2f5b0d12737a.png)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:51:39.870

好吧，这个问题当然不清楚，但我想您想将来自数据库的值写入您的复选框，并将以下内容添加到您的复选框中。它应该有帮助

```
checked='<%#Eval("YourCheckboxValueColumnName")%>' 
```

# c++ - 编译器将 std::copy 减少到 memcpy (memmove) 的条件是什么

> ID：11715975
> 
> 赞同：2
> 
> 时间：2012-07-30T05:43:23.717
> 
> 标签：c++, visual-c++

根据这里的一些帖子（[std::copy 与 memcpy 的效率](https://stackoverflow.com/questions/7285952/efficiency-of-stdcopy-vs-memcpy?lq=1)，） std::copy 应该减少到 pod 类型上的 memcpy/memmove 。我正在尝试测试，但我无法复制结果。

我正在使用 Visual Studio 2010 并尝试了所有优化级别

```
struct pod_  
{ 
        unsigned int v1 ,v2 ,v3 ;
} ;

typedef pod_ T ;
static_assert(std::is_pod<pod_>::value, "Struct must be a POD type");

const unsigned int size = 20*1024*1024 / sizeof(T);
std::vector<T> buffer1(size) ;
std::vector<T> buffer2((size)) ; 
```

我试过这个：

```
std::copy(buffer1.begin(),buffer1.end(),&buffer2[0]);
0030109C  mov         esi,dword ptr [esp+14h]  
003010A0  mov         ecx,dword ptr [esp+18h]  
003010A4  mov         edi,dword ptr [esp+24h]  
003010A8  mov         eax,esi  
003010AA  cmp         esi,ecx  
003010AC  je          main+8Eh (3010CEh)  
003010AE  mov         edx,edi  
003010B0  sub         edx,esi  
003010B2  mov         ebx,dword ptr [eax]  
003010B4  mov         dword ptr [edx+eax],ebx  
003010B7  mov         ebx,dword ptr [eax+4]  
003010BA  mov         dword ptr [edx+eax+4],ebx  
003010BE  mov         ebx,dword ptr [eax+8]  
003010C1  mov         dword ptr [edx+eax+8],ebx  
003010C5  add         eax,0Ch  
003010C8  cmp         eax,ecx  
003010CA  jne         main+72h (3010B2h)  
003010CC  xor         ebx,ebx 
```

转换为原始类型似乎有效。

```
 std::copy((char *)&buffer1[0],(char *)&buffer1[buffer1.size() - 1],(char *)&buffer2[0]);
003010CE  sub         ecx,esi  
003010D0  mov         eax,2AAAAAABh  
003010D5  imul        ecx  
003010D7  sar         edx,1  
003010D9  mov         eax,edx  
003010DB  shr         eax,1Fh  
003010DE  add         eax,edx  
003010E0  lea         eax,[eax+eax*2]  
003010E3  lea         ecx,[eax*4-0Ch]  
003010EA  push        ecx  
003010EB  push        esi  
003010EC  push        edi  
003010ED  call        dword ptr [__imp__memmove (3020B0h)]  
003010F3  add         esp,0Ch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:23:07.507

您发布的主题中的“答案”是错误的。一般来说，我希望 POD 类型`std::copy`比`memcpy`或`memmove`（因为它更专业）更有效。使用迭代器时是否是这种情况取决于编译器，但任何优化都取决于编译器能够“看穿”迭代器。根据编译器和库的实现，这可能是不可能的。

另请注意，您的测试代码具有未定义的行为。使用`std::copy`(and `memcpy`) 的要求之一是目标不在源 ( `[first,last)`for `std::copy`, `[source,source+n)`for `memcpy`) 的范围内。如果源和目标重叠，则行为未定义。

# java - 将 InputStream 传输到 OutputStream 的最佳方法

> ID：11715979
> 
> 赞同：31
> 
> 时间：2012-07-30T05:43:49.380
> 
> 标签：java, pipe, java-io

我试图找到将 InputStream 传输到 OutputStream 的最佳方法。我没有选择使用任何其他库，如 Apache IO。这是片段和输出。

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.nio.channels.FileChannel;

public class Pipe {
    public static void main(String[] args) throws Exception {

        for(PipeTestCase testCase : testCases) {
            System.out.println(testCase.getApproach());
            InputStream is = new FileInputStream("D:\\in\\lft_.txt");
            OutputStream os = new FileOutputStream("D:\\in\\out.txt");

            long start = System.currentTimeMillis();            
            testCase.pipe(is, os);
            long end = System.currentTimeMillis();

            System.out.println("Execution Time = " + (end - start) + " millis");
            System.out.println("============================================");

            is.close();
            os.close();
        }

    }

    private static PipeTestCase[] testCases = {

        new PipeTestCase("Fixed Buffer Read") {         
            @Override
            public void pipe(InputStream is, OutputStream os) throws IOException {
                byte[] buffer = new byte[1024];
                while(is.read(buffer) > -1) {
                    os.write(buffer);   
                }
            }
        },

        new PipeTestCase("dynamic Buffer Read") {           
            @Override
            public void pipe(InputStream is, OutputStream os) throws IOException {
                byte[] buffer = new byte[is.available()];
                while(is.read(buffer) > -1) {
                    os.write(buffer);   
                    buffer = new byte[is.available() + 1];
                }
            }
        },

        new PipeTestCase("Byte Read") {         
            @Override
            public void pipe(InputStream is, OutputStream os) throws IOException {
                int c; 
                while((c = is.read()) > -1) {
                    os.write(c);    
                }
            }
        }, 

        new PipeTestCase("NIO Read") {          
            @Override
            public void pipe(InputStream is, OutputStream os) throws IOException {
                FileChannel source      = ((FileInputStream) is).getChannel(); 
                FileChannel destnation  = ((FileOutputStream) os).getChannel();
                destnation.transferFrom(source, 0, source.size());
            }
        }, 

    };
}

abstract class PipeTestCase {
    private String approach; 
    public PipeTestCase( final String approach) {
        this.approach = approach;           
    }

    public String getApproach() {
        return approach;
    }

    public abstract void pipe(InputStream is, OutputStream os) throws IOException;
} 
```

输出（~4MB 输入文件）：

```
Fixed Buffer Read
Execution Time = 71 millis
============================================
dynamic Buffer Read
Execution Time = 167 millis
============================================
Byte Read
Execution Time = 29124 millis
============================================
NIO Read
Execution Time = 125 millis
============================================ 
```

'Dynamic Buffer Read' 使用`available()`方法。但是根据java docs它是不可靠的

> 使用此方法的返回值来分配旨在保存此流中所有数据的缓冲区是不正确的。

“字节读取”似乎很慢。

那么“固定缓冲区读取”是管道的最佳选择吗？有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-01-12T11:15:48.690

**爪哇 9**

由于 Java 9 可以从以下位置使用此方法`InputStream`：

```
public long transferTo(OutputStream out) throws IOException 
```

**前 Java 9**

来自[apache commons](https://commons.apache.org/)的**单行**代码：

```
IOUtils.copy(inputStream, outputStream); 
```

[文档在这里](https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html#copy(java.io.InputStream,%20java.io.OutputStream))。有多种`copy`方法具有不同的参数。也可以指定缓冲区大小。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-31T20:50:39.310

我遇到了这个，最后的阅读可能会导致问题。

建议更改：

```
public void pipe(InputStream is, OutputStream os) throws IOException {
  int n;
  byte[] buffer = new byte[1024];
  while((n = is.read(buffer)) > -1) {
    os.write(buffer, 0, n);   // Don't allow any extra bytes to creep in, final write
  }
 os.close (); 
```

我也同意 16384 可能是比 1024 更好的固定缓冲区大小。

恕我直言...

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-30T06:00:13.240

我会说固定缓冲区大小是最好/最容易理解的。但是也有一些问题。

*   您每次都将整个缓冲区写入输出流。对于最后一个块，读取可能已读取 < 1024 字节，因此您需要在执行写入时考虑到这一点（基本上只写入返回的字节数 `read()`

*   在您使用的动态缓冲区情况下`available()`。这不是一个非常可靠的 API 调用。在这种情况下，我不确定在循环内部是否可以，但如果它在 InputStream 的某些实现中实现次优，我不会感到惊讶。

*   您要转换到的最后一个案例`FileInputStream`。如果您打算将此用作通用目的，则不能使用此方法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-16T12:18:40.490

`java.io`包含`PipedInputStream`和`PipedOutputStream`

```
PipedInputStream input = new PipedInputStream();
PipedOutputStream output = new PipedOutputStream (input); 
```

写入输入，它将在输出中显示为`Outputstream`. 事情也可以反过来

# php - 云应用程序中的 Flex/AMF/PHP

> ID：11715981
> 
> 赞同：-1
> 
> 时间：2012-07-30T05:44:03.480
> 
> 标签：php, apache-flex, cloud, amf

我们正在尝试提供一项服务，其中两个客户设备需要通过我们的服务器相互通信。每台设备都可以随时上线或下线。当他们都在线时，他们可以通过我们的服务器相互交换信息。

我倾向于使用 Flex/PHP 解决方案，但是以下场景让我感到困惑：

1) 当客户端设备-A 尝试通过我的服务器从客户端设备-B 获取一些信息时，来自设备-A 的传入请求将是一个 Flex AMF 服务请求。如何将该弹性请求中继到设备 B？如果可能，中继是首选。否则，我是否应该在我的服务器上终止来自设备 A 的请求并向设备 B 发起请求？

2) 当设备-B 用数据响应来自设备-A 的请求时（在上面的 (1) 中讨论过），我可以直接将该数据中继到设备-A 还是我需要终止响应并向设备发送新消息-A 与来自设备-B 的数据？

可能是我完全偏离了轨道，或者 Flex/AMF/PHP 不是最好的解决方案。让我知道你的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:10:38.577

即使我的服务器是 BlazeDS Java 服务器而不是 PHP，我也有类似的设置。我通过使用 Amf Destinations 解决了这个问题。如果你熟悉 JMS，这个比较类似。我有一个用于客户间通信的公共目的地和一个用于每个客户的私人目的地。当一个客户端想从任何其他客户端了解某些内容时，它会向公共目的地发送一条消息，并且所有客户端都会收到请求。在请求中，客户端传递其私有目的地的 id。如果一个客户端收到请求并通知他应该响应，他只需向请求中提到的私有目的地发送响应消息。

我希望这是你所要求的。您也可以将响应发送到公共目的地。然而，副作用是响应也将发送给所有其他客户端，这只会增加网络流量并使客户端必须过滤掉未发送给他们的内容。

# regex - 部分行上的 Sed 正则表达式

> ID：11715982
> 
> 赞同：2
> 
> 时间：2012-07-30T05:44:22.023
> 
> 标签：regex, sed

我正在尝试将 javascript 代码移植到 Java。这样做，我需要用双引号字符串替换所有单引号字符串。这也需要我用转义的双引号替换双引号。但我只想转义单引号字符串块中的引号。

使用以下 sed 命令，我可以毫无问题地替换引用的字符串：

```
sed "s/'\([^']*\)'/\"\1\"/g" 
```

这成功地将单引号字符串修改为双引号字符串。但我仍然必须逃避内部双引号。最简单的方法似乎是 sed 提供了一种方法来在一行的一部分上运行正则表达式替换。但我不知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:08:03.887

我不认为你可以这样做，`sed`因为它的 POSIX 正则表达式引擎不知道环视。但是可以在（例如）Python 脚本中，通过将操作分为两个步骤：

```
import re
with open("myfile.js") as infile, open("myfile.jsconv", "w") as outfile:
    for line in infile:
    line = line.sub(
        r"""(?x)"  # Match a double quote
        (?=        # only if it's followed by:
         (?:       # an even number of quotes, defined like this:
          (?:      # Either...
           \\.     # any escaped character
          |        # or
           [^'\\]  # a character except single quotes
          )*       # repeated as needed, followed by
         '         # a single quote.
          (?:\\.|[^'\\])*  # (Repeat this to ensure an even
          '        # number of quotes)
         )*        # Do this zero or more times.
         (?:\\.|[^'\\])* # Then match any remaining characters
         $         # until the end of the line.
        )          # End of loohahead""", 
        '\\"', line)
    line = re.sub(
        r"""(?x)' # Match a single quote
        (         # Match and capture
         (?:      # either...
          \\.     # an escaped character
         |        # or
          [^'\\]  # a character besides quotes or backslashes
         )*       # any number of times.
        )         # End of capturing group number 1
        '         # Match a single quote""", 
        r'"\1"', line)
    outfile.write(line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:22:58.113

这可能对您有用（GNU sed）：

```
sed '/'\''[^'\'']*'\''/!b;s//\n&\n/g;ba;:a;/\n\n/bb;s/\n['\'']/"\n/;ta;s/\n"/\\"\n/;ta;s/\n\([^'\''"]\+\)/\1\n/;ta;:b;s/\n\n//;ta' file 
```

但是，如果引用的字符串可以是多行的，则需要稍微不同（但速度较慢）的方法：

```
sed ':a;$!{N;ba};/\x00/q1;s/'\''[^'\'']*'\''/\x00&\x00/g;bb;:b;/\x00\x00/bc;s/\x00['\'']/"\x00/;tb;s/\x00"/\\"\x00/;tb;s/\x00\([^'\''"]\+\)/\1\x00/;tb;:c;s/\x00\x00//;tb' file 
```

这会将整个文件放入模式空间，然后`\x00`用作标记来分隔引用的字符串。它首先检查文件中是否`\x00`已经存在，如果存在则退出代码`1`，保持原始文件不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:00:23.570

如果输入不是很复杂，这应该可以工作：

```
 sed ": loop s/\('[^']*[^\\]\)\"/\1\\\\\"/;t loop;s/'/\"/g" input_file 
```

# wcf - 跨多个域的 Active Directory 成员资格提供程序

> ID：11715985
> 
> 赞同：1
> 
> 时间：2012-07-30T05:44:44.053
> 
> 标签：wcf, authentication, active-directory, asp.net-membership, membership-provider

我有一个 WCF 身份验证服务，它使用 Active Directory 成员资格提供程序并提供 AD 登录功能，我们为一个域 A 工作。防火墙后面还有另一个域 B，域 A 和 B 之间存在单向信任关系. 域 B 的用户可以登录域 A 的域控制器，反之则不行。WCF 服务位于域 A。我尝试使用该服务对域 B 中的用户进行身份验证，但收到未知用户名或密码错误错误。

我想知道是否有人知道活动目录成员资格提供程序是否以单向信任关系跨多个域工作？我尝试将 LDAP 连接字符串更改为指向域 A 的域控制器，但将 DC 参数指定为 Domain B 并将 connectionUser 设置为 DomainB\Username，但我收到了相同的错误。如果我将所有内容都指向 DomainA，我也会收到相同的错误。A 和 B 的域控制器可以互相看到。有谁知道解决方案？

（我们不能将 LDAP 字符串指向域 B，因为它位于防火墙后面）

提前致谢

# javascript - 灯箱2空白

> ID：11715998
> 
> 赞同：0
> 
> 时间：2012-07-30T05:46:51.153
> 
> 标签：javascript, jquery, html, lightbox, lightbox2

我正在使用 lightbox2 进行项目。不幸的是，每次我尝试单击图片以将其加载到灯箱中时，该框都保持空白。
我检查了请求。图像从 Instagram 正确加载。 **我的项目：**

这是我请求的代码：

```
function getImages(searchText){
    //removing the the last images of the search if there were any 
    $("img").remove();
    //making the ajax call
    $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "https://api.instagram.com/v1/tags/"+searchText+"/media/recent?access_token=HEREISMYTOKEN",
        success: function(data) {
            for (var i=0; i <= 6; i++) {
                var image = data.data[i].images.standard_resolution.url
                $("#images").append("<a href='"+image+"' rel='lightbox[insta]' title='Alternately you can press the right arrow key.' ><img src="+data.data[i].images.thumbnail.url+" alt='Plants: image 2 0f 4 thumb' /></a>")
                Lightbox.initialize();
            };
    }
    });
} 
```

任何想法如何解决这一问题？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:33:10.197

在研究了灯箱的工作原理后，我发现了您的问题。

默认情况下，灯箱具有`<img class="lb-image">`.

调用`getImages(searchText)`函数后，由于以下函数，它被删除：

```
$("img").remove(); 
```

您应该详细指定要删除的 img。这应该可以解决您的问题。

# android - NDK-build 导致错误

> ID：11715999
> 
> 赞同：3
> 
> 时间：2012-07-30T05:47:04.350
> 
> 标签：android, android-ndk

我一直试图安静地解决这个问题很长时间，我正在使用一个名为 FreeImage 的库，当尝试进行 NDK 构建时，代码会导致以下错误我的源代码可以从

copy.html">http://www.4shared.com/zip/1C3vpLI7/android-imagefilter-ndk_ *copy* .html 提前感谢您的宝贵努力-

```
tribute.cpp+0x8): undefined reference to `std::ios_base::Init::Init()'
ImfChromaticitiesAttribute.cpp:(.text.startup._GLOBAL__sub_I_ImfChromaticitiesAttribute.cpp+0x24): undefined reference to `std::ios_base::Init::~Init()'
/home/flock/ANDROID/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: Dwarf Error: mangled line number section.
./obj/local/armeabi/libfreeimage.a(ImfCompressionAttribute.o): In function `_GLOBAL__sub_I_ImfCompressionAttribute.cpp':
ImfCompressionAttribute.cpp:(.text.startup._GLOBAL__sub_I_ImfCompressionAttribute.cpp+0x8): undefined reference to `std::ios_base::Init::Init()'
ImfCompressionAttribute.cpp:(.text.startup._GLOBAL__sub_I_ImfCompressionAttribute.cpp+0x24): undefined reference to `std::ios_base::Init::~Init()'
./obj/local/armeabi/libfreeimage.a(ImfCompressor.o): In function `Imf::newCompressor(Imf::Compression, unsigned int, Imf::Header const&)':
ImfCompressor.cpp:(.text._ZN3Imf13newCompressorENS_11CompressionEjRKNS_6HeaderE+0x10): undefined reference to `__gnu_thumb1_case_uqi'
ImfCompressor.cpp:(.text._ZN3Imf13newCompressorENS_11CompressionEjRKNS_6HeaderE+0xb8): undefined reference to `__cxa_end_cleanup'
./obj/local/armeabi/libfreeimage.a(ImfCompressor.o):(.ARM.extab.text._ZN3Imf13newCompressorENS_11CompressionEjRKNS_6HeaderE+0x0): undefined reference to `__gxx_personality_v0'
./obj/local/armeabi/libfreeimage.a(ImfCompressor.o): In function `Imf::newTileCompressor(Imf::Compression, unsigned int, unsigned int, Imf::Header const&)':
ImfCompressor.cpp:(.text._ZN3Imf17newTileCompressorENS_11CompressionEjjRKNS_6HeaderE+0x12): undefined reference to `__gnu_thumb1_case_uqi'
ImfCompressor.cpp:(.text._ZN3Imf17newTileCompressorENS_11CompressionEjjRKNS_6HeaderE+0x64): undefined reference to `__cxa_allocate_exception'
ImfCompressor.cpp:(.text._ZN3Imf17newTileCompressorENS_11CompressionEjjRKNS_6HeaderE+0x8a): undefined reference to `__cxa_throw'
ImfCompressor.cpp:(.text._ZN3Imf17newTileCompressorENS_11CompressionEjjRKNS_6HeaderE+0xe4): undefined reference to `__cxa_end_cleanup'
./obj/local/armeabi/libfreeimage.a(ImfCompressor.o):(.ARM.extab.text._ZN3Imf17newTileCompressorENS_11CompressionEjjRKNS_6HeaderE+0x0): undefined reference to `__gxx_personality_v0'
./obj/local/armeabi/libfreeimage.a(ImfCompressor.o): In function `_GLOBAL__sub_I_ImfCompressor.cpp':
ImfCompressor.cpp:(.text.startup._GLOBAL__sub_I_ImfCompressor.cpp+0x8): undefined reference to `std::ios_base::Init::Init()'
ImfCompressor.cpp:(.text.startup._GLOBAL__sub_I_ImfCompressor.cpp+0x24): undefined reference to `std::ios_base::Init::~Init()'
./obj/local/armeabi/libfreeimage.a(ImfCompressor.o):(.data.rel.ro+0x0): undefined reference to `vtable for __cxxabiv1::__class_type_info'
/home/flock/ANDROID/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: Dwarf Error: mangled line number section.
./obj/local/armeabi/libfreeimage.a(ImfConvert.o): In function `_GLOBAL__sub_I_ImfConvert.cpp':
ImfConvert.cpp:(.text.startup._GLOBAL__sub_I_ImfConvert.cpp+0x8): undefined reference to `std::ios_base::Init::Init()'
ImfConvert.cpp:(.text.startup._GLOBAL__sub_I_ImfConvert.cpp+0x24): undefined reference to `std::ios_base::Init::~Init()'
/home/flock/ANDROID/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: Dwarf Error: mangled line number section.
./obj/local/armeabi/libfreeimage.a(ImfDoubleAttribute.o): In function `_GLOBAL__sub_I_ImfDoubleAttribute.cpp':
ImfDoubleAttribute.cpp:(.text.startup._GLOBAL__sub_I_ImfDoubleAttribute.cpp+0x8): undefined reference to `std::ios_base::Init::Init()'
ImfDoubleAttribute.cpp:(.text.startup._GLOBAL__sub_I_ImfDoubleAttribute.cpp+0x24): undefined reference to `std::ios_base::Init::~Init()'
/home/flock/ANDROID/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: Dwarf Error: mangled line number section.
./obj/local/armeabi/libfreeimage.a(ImfEnvmapAttribute.o): In function `_GLOBAL__sub_I_ImfEnvmapAttribute.cpp':
ImfEnvmapAttribute.cpp:(.text.startup._GLOBAL__sub_I_ImfEnvmapAttribute.cpp+0x8): undefined reference to `std::ios_base::Init::Init()'
ImfEnvmapAttribute.cpp:(.text.startup._GLOBAL__sub_I_ImfEnvmapAttribute.cpp+0x24): undefined reference to `std::ios_base::Init::~Init()' 
```

我的安卓.mk

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE:= freeimage
LOCAL_SRC_FILES :=libfreeimage.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE:= imageprocessing
LOCAL_SRC_FILES:= imageprocessing.c
LOCAL_STATIC_LIBRARIES = freeimage
LOCAL_EXPORT_C_INCLUDES := freeimage.h
LOCAL_LDLIBS:= -lm -llog -ljnigraphics 
include $(BUILD_SHARED_LIBRARY) 
```

我的应用程序.mk

```
APP_OPTIM := release
APP_PLATFORM := android-8
APP_STL := gnustl_static
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions
APP_CPPFLAGS += -DANDROID
APP_ABI:= armeabi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T15:50:51.067

我认为您在 gcc/NDK 中看到了一个错误，它在 Linux、Cygwin 和 Windows（非 Cygwin）上的表现略有不同。

这是我为修复它所做的工作（适用于 Linux 和我的一位盲人并且必须使用 Cygwin 的开发人员）......

- 从您的 Application.mk 中删除该行`APP_STL := gnustl_static`（它在 NDK 中损坏；此外，它在 Linux Cygwin、Windows 上的损坏略有不同）

- 在 Andriod.mk 中添加三行，表示^^^此行必须在 $(LOCAL_LDLIBS) 的末尾附近
`LOCAL_C_INCLUDES := $(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.6/include` `LOCAL_C_INCLUDES += $(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/include`
`$(LOCAL_LDLIBS) += $(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/libgnustl_static.a` 

上述内容将完成您的 Application.mk 中应该具有的“APP_STL := gnustl_static”。