# StackOverflow 问答 11156000-11156999

# jquery - jQuery选择优化

> ID：11156004
> 
> 赞同：1
> 
> 时间：2012-06-22T12:17:52.520
> 
> 标签：jquery

我有一个 JQuery 验证文件，如下所示：

```
$('#TextBoxRisultati2b').on('blur', function () {
    var $this = $('#TextBoxRisultati2b');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati6b').on('blur', function () {
    var $this = $('#TextBoxRisultati6b');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati10b').on('blur', function () {
    var $this = $('#TextBoxRisultati10b');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati14b').on('blur', function () {
    var $this = $('#TextBoxRisultati14b');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati18b').on('blur', function () {
    var $this = $('#TextBoxRisultati18b');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati22b').on('blur', function () {
    var $this = $('#TextBoxRisultati22b');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati4').on('blur', function () {
    var $this = $('#TextBoxRisultati4');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati8').on('blur', function () {
    var $this = $('#TextBoxRisultati8');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati12').on('blur', function () {
    var $this = $('#TextBoxRisultati12');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati16').on('blur', function () {
    var $this = $('#TextBoxRisultati16');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati20').on('blur', function () {
    var $this = $('#TextBoxRisultati20');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxRisultati24').on('blur', function () {
    var $this = $('#TextBoxRisultati24');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxObiettivi3').on('blur', function () {
    var $this = $('#TextBoxObiettivi3');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxObiettivi6').on('blur', function () {
    var $this = $('#TextBoxObiettivi6');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxObiettivi9').on('blur', function () {
    var $this = $('#TextBoxObiettivi9');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});
$('#TextBoxObiettivi12').on('blur', function () {
    var $this = $('#TextBoxObiettivi12');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxObiettivi15').on('blur', function () {
    var $this = $('#TextBoxObiettivi15');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
});

$('#TextBoxObiettivi18').on('blur', function () {
    var $this = $('#TextBoxObiettivi18');
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
}); 
```

选择都是一样的。整个验证文件非常冗长。有没有办法优化这段代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:20:44.930

您可以使用[属性开头](http://api.jquery.com/attribute-starts-with-selector/)选择器：

```
$('[id^=TextBoxRisultati]').on('blur', function () {
    var $this = $(this); //Note that you can just use 'this' here
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
}); 
```

更好的是，将事件委托给一个共同的祖先元素：

```
$('#someAncestor').on('blur', '[id^=TextBoxRisultati]', function () {
    var $this = $(this); //Note that you can just use 'this' here
    if ($this.val() == '' || $this.val() === undefined) $this.val('0');
}); 
```

通过将事件处理程序委托给 DOM 树的更高层，您最终只会得到一个事件处理程序，而不是每个元素都有一个事件处理程序。这效率更高。它之所以有效，是因为大多数 DOM 事件从它们起源的元素向上冒泡，因此您可以在祖先元素处捕获事件。该`on`方法检查事件起源的元素是否与选择器匹配，如果匹配则运行事件处理程序。

* * *

另请注意，[`val`](http://api.jquery.com/val/)将（在您的情况下）始终返回一个字符串（从不`undefined`），因此您可以删除对`undefined`. 并且由于空字符串的计算结果为 false，因此您可以用更短的布尔比较替换空字符串的比较。

因此，您可以将问题中的所有大代码块简化为：

```
$('#someAncestor').on('blur', '[id^=TextBoxRisultati]', function () {
    var $this = $(this);
    if (!$this.val()) $this.val('0');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:20:51.267

一种方法，如果您的输入共享类样式，您可以在 jquery中使用[类选择器](http://api.jquery.com/class-selector/)

```
$('.TextBox').on('blur', function () { 
    var $this = $(this); 
    if ($this.val() == '' || $this.val() === undefined) $this.val('0'); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:21:05.317

您可以使用**通配符**选择所有**带有 TextBoxObiettivi 的 id satring 的元素**

```
$("[id^=TextBoxObiettivi]").on('blur', function () { var $this = $('#TextBoxRisultati8'); if ($this.val() == '' || $this.val() === undefined) $this.val('0'); }); 
```

# arrays - 如何在 Lua 中为数组添加 eventListener？

> ID：11156005
> 
> 赞同：0
> 
> 时间：2012-06-22T12:17:54.037
> 
> 标签：arrays, loops, lua, coronasdk, addeventlistener

我正在尝试为我在屏幕中创建的每个球添加 eventListener。我用 for 循环创建球，然后将它们分配给一个数组。到目前为止效果很好。但是，当我尝试为循环中的每个球添加 eventListener 时，它给了我相位 nil 值错误。你能帮我弄清楚吗？谢谢

这是我的代码：

```
function ballListener(event)
    if(phase.event=="ended") then
        target.event.isvisible=false
    end
end

for i=1,10,1 do
    a=display.newImage("ball.jpg")
    a.x=math.random(10,200)
    a.y=math.random(10,200)
    a:addEventListener("touch",ballListener)
    table.insert(balls,a)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:08:05.253

首先，ballListener 函数中的某些内容是倒退的。它应该是“event.phase”和“event.target”，因为“phase”和“target”是事件的属性。isvisible 也应该是 isVisible。最终结果应如下所示：

```
function ballListener(event)
   if(event.phase=="ended") then
      event.target.isVisible=false
   end
end 
```

我还没有测试过代码，所以可能还有其他我错过的问题。

查看[Corona API](http://docs.coronalabs.com/api/)。

# c# - EPPLUS 如何使用 find 命令查找数据

> ID：11156018
> 
> 赞同：1
> 
> 时间：2012-06-22T12:18:33.580
> 
> 标签：c#, excel, epplus

我正在使用 EPPLUS 在 C# .NET 4.0 中编写一个应用程序并尝试加载一个巨大的 20mb excel 文件。我想使用 Find 或 Findall 方法在工作表中查找特定字符串。任何人都可以分享如何执行此操作的片段，因为互联网上没有关于此的信息。

我想避免阅读所有单元格，因为这需要很多时间。我想找到那个特定的字符串，然后复制那个特定的行而不阅读整个工作表。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T07:22:22.103

ExcelDataValidationCollection 上的 Find 和 FindAll 方法不适用于在工作簿/工作表中搜索字符串，而是让您使用 lambda 表达式在工作表中搜索特定的数据验证。

如果您想查询工作表以获取匹配值，Linq 可能是最好的方法。您可以在查询中指定一个范围，这样您就不必遍历整个工作表。此示例来自可在 codeplex 上下载的 EPPlus Samples 中的 Sample 8。

```
//Here we use more than one column in the where clause. We start by searching column D, then use the Offset method to check the value of column C.
            var query3 = (from cell in sheet.Cells["d:d"]
                          where cell.Value is double && 
                                (double)cell.Value >= 9500 && (double)cell.Value <= 10000 && 
                                cell.Offset(0, -1).GetValue<DateTime>().Year == DateTime.Today.Year+1 
                          select cell);

            Console.WriteLine();
            Console.WriteLine("Print all cells with a value between 9500 and 10000 in column D and the year of Column C is {0} ...", DateTime.Today.Year + 1);
            Console.WriteLine();    

            count = 0;
            foreach (var cell in query3)    //The cells returned here will all be in column D, since that is the address in the indexer. Use the Offset method to print any other cells from the same row.
            {
                Console.WriteLine("Cell {0} has value {1:N0} Date is {2:d}", cell.Address, cell.Value, cell.Offset(0, -1).GetValue<DateTime>());
                count++;
            } 
```

# c++ - openCV 将 IplImage 与 cv::Mat 混合

> ID：11156019
> 
> 赞同：1
> 
> 时间：2012-06-22T12:18:34.117
> 
> 标签：c++, c, memory-management, opencv, memory-leaks

我在使用 opencv 时遇到了一些内存管理的歧义。您可以使用新的 opencv c++ 类来做到这一点：

```
cv::Mat theimage = cvLoadImage("rawimage.pgm",CV_LOAD_IMAGE_ANYDEPTH); 
```

现在我不明白，如果我执行以下操作，我会收到错误消息：

```
theimage.deallocate(); 
```

也许这是错误的。我做了一些实验，当我释放 Mat 对象时：

```
theimage.release(); 
```

IplImage 对象仍保留在内存中。有什么方法可以告诉 cv::Mat 对象破坏 IplImage 对象还是我的第一行代码错误（因为我丢失了 IplImage 对象的指针）？我在互联网上看到了很多人们使用第一行代码的例子。许多人解释了如何转换，但没有人解释内存发生了什么！

问题是我有许多使用 IplImage 对象的类（我使用它开始了我的项目）。我明白为什么 cv::Mat 比 IplImage 更好。

- 编辑 -

在互联网上，我找到了以下混合解决方案：

```
cv::Ptr<IplImage> tmp = cvLoadImage("rawimage.pgm",CV_LOAD_IMAGE_ANYDEPTH);
cv::Mat theimage(tmp); 
```

我认为这可以解决我的一些问题，但会使我的代码有点不可读，并且在我看来仍然很危险。如果 tmp 在 cv::Mat 之前被释放，我将使用一些损坏的对象（我没有测试过，但我认为是这样）。简单的方法是使用副本：

```
cv::Mat theimage(tmp,true); 
```

这是我找到的唯一解决方案，但对我来说感觉不对...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:49:43.830

**歧义来自一个非常可怕的做法**：将 C 接口与 OpenCV 的 C++ 接口混合。不要这样做，`cv::imread()`而是使用。

的析构函数`cv::Mat` [总是在需要时释放内存](http://docs.opencv.org/modules/core/doc/intro.html#automatic-memory-management)，**除非**它是[从 a 初始化的`IplImage`](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=deallocate#mat-operator-iplimage)，然后**由你来释放它的资源`deallocate()`**。我写了一个简单的实验来验证这个信息：

```
void load()
{
    cv::Mat img = cvLoadImage("out.png", 1);

    std::cout << "* IMG was loaded\n";
    getchar();

    img.deallocate();
}

int main()
{
    load();

    std::cout << "* IMG was deallocated\n";
    getchar();

    return 0;
} 
```

这些`getchar()`调用会暂停程序，以便您可以检查应用程序的内存占用。如果您注释掉，`deallocate()`您会注意到加载图像后内存占用量并没有减少。

附带说明，仅减少引用计数器并在需要时释放数据（但如果从 初始化，[`Mat::release()`](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=deallocate#mat-release)它也不会释放）。`Mat``IplImage`

# android - android NullPointerException 中的颜色选择器

> ID：11156022
> 
> 赞同：0
> 
> 时间：2012-06-22T12:19:02.503
> 
> 标签：android, color-picker

我正在使用这个[文件](http://www.yougli.net/wp-content/uploads/ColorPickerDialog.java)来选择颜色，它是一个不错的对话框，我正在使用以下代码

```
public class Main extends Activity implements
        ColorPickerDialog.OnColorChangedListener {

    Button b;
    Context c = this;
    ColorPickerDialog.OnColorChangedListener cc;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                new ColorPickerDialog(c, cc, "tag", 16777215, 0).show();

            }
        });
    }

    @Override
    public void colorChanged(String key, int color) {
        Log.d("debug", "key is " + key + " color is " + color);

    }
} 
```

在我`main.xml`那里只有一个按钮。当我单击一个按钮并出现对话框时，此代码工作正常，但是当我选择一种颜色时`NullPointerException`，我不知道为什么，任何帮助将不胜感激。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:20:26.437

在你的情况下，

```
Context c = this;
ColorPickerDialog.OnColorChangedListener cc; 
```

两者都是**null**，

```
new ColorPickerDialog(c, cc, "tag", 16777215, 0).show(); 
```

所以，这条线导致**NPE** ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:45:19.747

我将代码更改为有效的代码，我需要在这样的内部进行`onCreate`onColorChangedListener

```
public class Main extends Activity  {
Button b;
OnColorChangedListener cc;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    cc=new OnColorChangedListener() {

        @Override
        public void colorChanged(String key, int color) {
            Log.d("tag", "key is " + key + " color is " + color);

        }
    };
    b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            new ColorPickerDialog(Main.this, cc, "tag", 16777215, 0).show();

        }
    });
}
} 
```

[参考](https://stackoverflow.com/questions/9916404/how-can-i-use-another-color-picker-without-preferenceactivity#comment12703042_9917392)

# python - Django iframe Safari 修复

> ID：11156023
> 
> 赞同：11
> 
> 时间：2012-06-22T12:19:05.313
> 
> 标签：python, django, iframe, cookies, safari

因此，根据此处的信息，[Safari 3rd 方 cookie iframe 技巧不再起作用？](https://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working/)在这里[Missing cookies on iframe in safari 5.1.5](https://stackoverflow.com/questions/10192142/missing-cookies-on-iframe-in-safari-5-1-5)很明显旧技巧不会起作用：

```
from django.http import HttpResponse
from django.conf import settings

SESSION_COOKIE_NAME = getattr(settings, 'SESSION_COOKIE_NAME')

class SafariIFrameFixMiddleware(object):
    """
    Middleware fixes sessions with Safari browser in iframes

    Safari default security policy restricts
    cookie setting in first request in iframe

    Solution is to create hidden form to preserve GET variables
    and REPOST it to current URL
    """
    def process_request(self, request):
        if request.META['HTTP_USER_AGENT'].find('Safari') != -1 \
                and request.META['HTTP_USER_AGENT'].find('Chrome') == -1 \
                and SESSION_COOKIE_NAME not in request.COOKIES \
                and 'cookie_fix' not in request.GET:
            html = """<html><body><form name='cookie_fix' method='GET' action='.'>"""
            for item in request.GET:
                html += "<input type='hidden' value='%s' name='%s' />" % (request.GET[item], item)
            html += "<input type='hidden' name='cookie_fix' value='1' />"
            html += "</form>"
            html += '''<script type="text/javascript">document.cookie_fix.submit()</script></html>'''
            return HttpResponse(html)
        else:
            return 
```

所以我正在寻找新的方法来解决它。

似乎它需要打开窗口（具有用户权限/单击，否则它将被 safari 阻止）并在那里开始会话。

问题是相同的弹出页面将运行所有中间件，因此它在项目内部可能并不总是可行的（希望尽可能少的侵入性修复）。

django 会话启动也在中间件内部，我还没有找到任何手动启动的干净方法。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:28:22.720

I've created working version of fix and uploaded to pypi here: [http://pypi.python.org/pypi/django-iframetoolbox](http://pypi.python.org/pypi/django-iframetoolbox)

Note: It might not be stable until 0.2 version

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T10:20:20.403

我也创建了一个类似于 JackLeo 的工作。您可以使用中间件或装饰器[https://github.com/philroche/django-httpsiframecookiesetter](https://github.com/philroche/django-httpsiframecookiesetter)以及更多选项。

# mysql - MySQL 未使用的特定索引

> ID：11156026
> 
> 赞同：0
> 
> 时间：2012-06-22T12:19:26.673
> 
> 标签：mysql, indexing, innodb

我正在尝试在我的数据库中运行以下查询：

`SELECT * FROM ts_cards WHERE ( cardstatus= 2 OR cardstatus= 3 ) AND ( cardtype= 1 OR cardtype= 2 ) ORDER BY cardserial DESC LIMIT 10;`

所有三个字段（cardstatus、cardtype 和carderial）都被索引：

```
 mysql> SHOW INDEX FROM ts_cards;
    +----------+------------+----------------+--------------+-------------------+-----------+-------------+----------+--------+------+------------+---------+
    | Table    | Non_unique | Key_name       | Seq_in_index | Column_name       | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
    +----------+------------+----------------+--------------+-------------------+-----------+-------------+----------+--------+------+------------+---------+
    | ts_cards |          0 | PRIMARY        |            1 | card_id           | A         |    15000134 |     NULL | NULL   |      | BTREE      |         |
    | ts_cards |          1 | CardID         |            1 | cardserial        | A         |    15000134 |     NULL | NULL   |      | BTREE      |         |
    | ts_cards |          1 | CardType       |            1 | cardtype          | A         |          17 |     NULL | NULL   |      | BTREE      |         |
    | ts_cards |          1 | CardHolder     |            1 | cardstatusholder  | A         |          17 |     NULL | NULL   |      | BTREE      |         |
    | ts_cards |          1 | CardExpiration |            1 | cardexpiredstatus | A         |          17 |     NULL | NULL   |      | BTREE      |         |
    | ts_cards |          1 | CardStatus     |            1 | cardstatus        | A         |          17 |     NULL | NULL   |      | BTREE      |         |
    +----------+------------+----------------+--------------+-------------------+-----------+-------------+----------+--------+------+------------+---------+
    6 rows in set (0.22 sec) 
```

（是的，我知道索引的名字很烂）

然而，默认情况下，MySQL 只使用 cardstatus 的索引：

```
 mysql> EXPLAIN SELECT * FROM `ts_cards` WHERE ( cardstatus= 2 OR cardstatus= 3 ) AND ( cardtype= 1 OR cardtype= 2 ) ORDER BY cardserial DESC LIMIT 10;
    +----+-------------+----------+-------+---------------------+------------+---------+------+---------+-----------------------------+
    | id | select_type | table    | type  | possible_keys       | key        | key_len | ref  | rows    | Extra                       |
    +----+-------------+----------+-------+---------------------+------------+---------+------+---------+-----------------------------+
    |  1 | SIMPLE      | ts_cards | range | CardType,CardStatus | CardStatus | 1       | NULL | 3215967 | Using where; Using filesort |
    +----+-------------+----------+-------+---------------------+------------+---------+------+---------+-----------------------------+
    1 row in set (0.00 sec) 
```

（它甚至不考虑卡片上的索引，但我想这是另一个问题。）

使用 "USE KEY" 或 "FORCE KEY" 可以使它使用 cardtype 的索引，但不能同时使用 cardtype 和 cardstatus：

```
 mysql> EXPLAIN SELECT * FROM `ts_cards` FORCE KEY (CardType) WHERE ( cardstatus= 2 OR cardstatus= 3 ) AND ( cardtype= 1 OR cardtype= 2 ) ORDER BY cardserial DESC LIMIT 10;
    +----+-------------+----------+-------+---------------+----------+---------+------+---------+-----------------------------+
    | id | select_type | table    | type  | possible_keys | key      | key_len | ref  | rows    | Extra                       |
    +----+-------------+----------+-------+---------------+----------+---------+------+---------+-----------------------------+
    |  1 | SIMPLE      | ts_cards | range | CardType      | CardType | 1       | NULL | 6084861 | Using where; Using filesort |
    +----+-------------+----------+-------+---------------+----------+---------+------+---------+-----------------------------+
    1 row in set (0.00 sec)

    mysql> EXPLAIN SELECT * FROM `ts_cards` FORCE KEY (CardType,CardStatus) WHERE ( cardstatus= 2 OR cardstatus= 3 ) AND ( cardtype= 1 OR cardtype= 2 ) ORDER BY cardserial DESC LIMIT 10;
    +----+-------------+----------+-------+---------------------+------------+---------+------+---------+-----------------------------+
    | id | select_type | table    | type  | possible_keys       | key        | key_len | ref  | rows    | Extra                       |
    +----+-------------+----------+-------+---------------------+------------+---------+------+---------+-----------------------------+
    |  1 | SIMPLE      | ts_cards | range | CardType,CardStatus | CardStatus | 1       | NULL | 3215967 | Using where; Using filesort |
    +----+-------------+----------+-------+---------------------+------------+---------+------+---------+-----------------------------+
    1 row in set (0.00 sec) 
```

如何强制 MySQL 使用 BOTH 索引来加快查询速度？cardtype 和 cardstatus 索引似乎都以相同的方式定义，但 cardstatus 似乎优先于 cardtype。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:08:46.247

IIRC，MySQL 不能在同一个查询中使用两个不同的索引。要使用这两个索引，MySQL 需要将它们合并为一个（[链接到手册](http://dev.mysql.com/doc/refman/5.5/en/index-merge-optimization.html)）。以下是此类合并[的示例](http://sqlfiddle.com/#!2/ca945/1)（单击“查看执行计划”）。注意第一个的“index_merge” `SELECT`。

免责声明：我*不确定*以上信息。

在您的情况下，尽管有您的提示，优化器仍然认为直接扫描第二个表比合并索引更快（您的表可能有非常多的行，因此是一个非常大、操作成本高的索引）。

我建议：

```
ALTER TABLE ADD INDEX CardTypeStatus (cardtype, cardstatus); 
```

这会在两列上创建一个索引。您的查询*可能*会使用此索引。之后您*可能*希望删除`CardType`索引：查询仍然可以使用两列索引，即使它们`cardtype`仅搜索列（但如果它们`cardstatus`仅搜索则不能）。

有关多列索引的更多信息：http: [//dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html](http://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html)

# android - Android列表视图换行（\ n）不同的颜色？

> ID：11156030
> 
> 赞同：-1
> 
> 时间：2012-06-22T12:19:39.403
> 
> 标签：android, xml, styles, android-listview, newline

我有一个列表视图，其中每个项目都有 2 行。看起来像这样：

```
Title of item1

Subtitle of item1 
```

我想知道是否有办法通过代码更改第二行的颜色和大小？
他们都共享 1`TextView`所以我不能只编辑它。我可以使用 2 个文本视图，但我不确定如何设置。
不过，我正在为列表视图使用自定义 xml。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:orientation="horizontal"> 
```

* * *

这是我的自定义列表视图 xml：

```
<RelativeLayout android:id="@+id/linearLayout1" 
android:layout_width="wrap_content" 
android:layout_height="match_parent" 
android:layout_margin="7dip">

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#474747"
         />
 </RelativeLayout>

</LinearLayout> 
```

* * *

这是我将 xml 分配给列表视图的方式：

```
 ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,R.layout.row, R.id.label, arrayList);
    lv.setAdapter(arrayAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:28:28.053

您可以将 ArrayAdapter 与两个 Textview 一起使用

将 simple_list_item_2 与 ArrayAdapter 一起使用

如[链接](http://www.sethgholson.com/2012/01/using-simple_list_item_2-with-an-arrayadapter-android/)

根据链接，您将使用 row.getText1()、row.getText2() 获得文本视图，以便您可以设置它们的颜色

或者

[可以在链接](http://www.codercorp.com/blog/android/android-two-line-listview-with-custom-data.html)中使用自定义适配器

# android - MapViewBalloons 项目。点击时实现图钉改变颜色

> ID：11156032
> 
> 赞同：1
> 
> 时间：2012-06-22T12:19:45.203
> 
> 标签：android, android-layout

我正在使用一个名为[MapViewBalloons](https://github.com/jgilfelt/android-mapviewballoons)的库。一旦用户点击图钉，我想更改图钉的颜色。

我一直在尝试不同的策略，但无法实施。
一般的问题是如何在点击完成后**更改覆盖项目。**

我希望用过这个库的人可以回答这个问题。

# facebook - 使用 facebook api 获取朋友状态更新和评论

> ID：11156033
> 
> 赞同：-1
> 
> 时间：2012-06-22T12:19:46.400
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, facebook-fql

嗨，我是使用 facebook api 的新手

我想根据以下条件获取好友状态

```
Get all the friends details (name, uid, status_message, posted_date) whose status update has more than 15 comments/likes 
```

以下查询正在为所有朋友提供状态更新

```
 SELECT status_id, uid , message FROM status WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

上面的查询返回我所有朋友的更新，但我想在响应中包含对这些更新的评论和喜欢，以便我可以检查我这边的计数

还有comments表和likes表，`api`两者都可能与status_id列有外键关系

我们可以写一个完整的查询，比如`SQL`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:15:47.020

您不能在 FQL 中进行 JOIN，但您可以使用多查询来近似它们：

```
{
  'status': 'SELECT status_id, uid , message FROM status 
         WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())',
  'comments': 'SELECT post_id, fromid, time, text FROM comment 
         WHERE post_id IN (SELECT status_id from #status)'
} 
```

# c# - 为什么不在 ContinueWith 中执行任务？

> ID：11156037
> 
> 赞同：4
> 
> 时间：2012-06-22T12:20:06.833
> 
> 标签：c#, winforms, task-parallel-library, task

我有返回对象的异步方法

```
public static IEnumerable<Users.User> GetUsers(IEnumerable<string> uids, Field fields)
{
    Task<ResponseApi<Users.User>>[] tasks;
    tasks = uids.Select(uid =>
    {
        var parameters = new NameValueCollection
        {
        {"uids", uid},
        {"fields", FieldsUtils.ConvertFieldsToString(fields)}
        };
        return GetUserResponseApi(parameters);
    }).ToArray();
    Task.WaitAll(tasks);
    foreach(Task<ResponseApi<Users.User>> task in tasks)
    {
        if(task.Result.Response != null)
        {
            yield return task.Result.Response;
        }
    }
} 
```

我想用其他方法更新 UI，UI 可能不会更新，因为 GetUserResponseApi 方法不返回任何值。

```
 public static Task<ResponseApi<Users.User>> GetUserResponseApi(NameValueCollection parameters)
    {
      return CallMethodApi("users.get", parameters, CallType.HTTPS)
            .ContinueWith(
            r =>
            {
//don't execute
                var responseApi = new ResponseApi<Users.User>();
                responseApi.Response = JsonConvert.DeserializeObject<Users.User>(r.Result["response"][0].ToString());
                return responseApi;

            });
    }

    private void BtnGetUsersClick(object sender, EventArgs e)
    {
        var random = new Random();
        int max = 175028595;
        var uids = new List<string>();
        for(int i = 1; i <= 20; i++)
        {
            uids.Add((random.Next(max) + 1).ToString());

        }
        Task.Factory.StartNew(() =>
                                  {
                                      var users = VkontakteApi.GetUsers(uids, Field.Online);
                                      foreach(var user in users)
                                      {
                                          richTextBox1.Text += string.Format("ID:{0} online:{1}", user.uid,
                                                                             user.online);
                                      }
                                  }, CancellationToken.None, TaskCreationOptions.None, _uiContext);
    } 
```

如何解决 ContinueWith in 的问题`GetUserResponseApi`？

**更新：** 我认为方法中的问题是`GetUserResponseApi`因为块 ContinueWith 不执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:23:11.727

`Application.Current.Dispatcher`每当您访问 UI 对象时，用于调度对 UI 线程的调用。

```
Application.Current.Dispatcher.Invoke(() => {
try
{
richTextBox1.Text += string.Format("ID:{0} online:{1}", user.uid, user.online);
}
catch
{
   //handle
}
), DispatcherPriority.Background); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:25:56.667

Try using [`TaskScheduler.FromCurrentSynchronizationContext()` method](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx):

```
Task.Factory.StartNew(() =>
  {
      var users = VkontakteApi.GetUsers(uids, Field.Online);
      foreach(var user in users)
      {
          richTextBox1.Text += string.Format("ID:{0} online:{1}", user.uid,
                                             user.online);
      }
  }, CancellationToken.None,
     TaskScheduler.FromCurrentSynchronizationContext()); 
```

# javascript - Firefox 中的“未定义”javascript 错误

> ID：11156038
> 
> 赞同：5
> 
> 时间：2012-06-22T12:20:09.153
> 
> 标签：javascript, firefox

我对 JS 很陌生，并且知道我的脚本可能很糟糕，但是在 Safari 和 Chrome 中一切正常，只是在 Firefox 中不行。

除其他外，我调用了两个函数来隐藏和显示自定义 Quicktime 电影控制器，方法是在其顶部放置一个“蒙版”（我知道切换将是一个更优雅的解决方案，但我无法得到这样的功能以我想要的方式工作）。无论如何，这就是 Javascript 的样子：

```
function revealControls(){
      document.getElementById("controlsCover");
      controlsCover.style.display ="none"
}

function hideControls(){
       document.getElementById("controlsCover");
       controlsCover.style.display ="block"
} 
```

我使用应用于各种 div 的不同鼠标事件来调用这些函数，例如：

```
<div id = "controls" onmouseout = "hideControls()"> 
```

火狐告诉我

```
 "Error: controlsCover is not defined", 
```

而且我不知道如何将元素定义为null。

任何帮助，将不胜感激。我确信这很简单——但我几乎没有使用 Javascript 的经验。然而。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:21:38.603

您需要先创建`controlsCover`变量以引用它。

当您第一次使用`document.getElementById("controlsCover")`时，这将返回一个 HTML 元素，您将其传递给要使用的变量。

如果您取消注释 console.log - 您将看到变量内部的内容。

```
function revealControls()       
{
    var controlsCover = document.getElementById("controlsCover");
    /* console.log(controlsCover) */
    controlsCover.style.display ="none"
}

function hideControls() 
{
    var controlsCover = document.getElementById("controlsCover");
    controlsCover.style.display ="block"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:21:42.760

您需要将`document.getElementById`返回值分配给`controlsCover`变量：

```
var controlsCover = document.getElementById("controlsCover"); 
```

固定将是：

```
function revealControls() {
    var controlsCover = document.getElementById("controlsCover");
    controlsCover.style.display ="none"
}

function hideControls() {
    var controlsCover = document.getElementById("controlsCover");
    controlsCover.style.display ="block"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:23:16.440

尝试这个：

```
var ele =document.getElementById("controlsCover");
ele.style.display = "none"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:29:01.153

尝试这个：

```
function revealControls()       
{
  var oControlsCover = document.getElementById("controlsCover");

  if (oControlsCover) {
    oControlsCover.style.display ="none";
  }
}

function hideControls() 
{
  var oControlsCover = document.getElementById("controlsCover");

  if (oControlsCover) {
    oControlsCover.style.display ="block";
  }
} 
```

# c# - 在 C# 中打开 Guid 的最有效方法

> ID：11156047
> 
> 赞同：12
> 
> 时间：2012-06-22T12:20:46.687
> 
> 标签：c#, performance, guid

所以在 C# 中 switch 语句只支持整数类型（不是 Guids），所以一个简单的 O(1) 比较表看起来是不可能的。

在 Guid 上匹配的计算效率最高的方法是什么

一开始我以为

```
if(gMyGuid == new Guid("VALUE"))
else if (gMyGuid == new Guid("VALUE2")
else if (gMyGuid == new Guid("VALUE3")
...
else if (gMyGuid == new Guid("VALUEn") 
```

但是，通过这样做，我每次都会创建一个新的 Guid 实例以进行比较。我可以将 Guid 转换为字符串，然后在字符串上进行比较，但字符串比较是一个很长的字符串进行比较。

任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T12:24:12.940

您可以创建一个对您有用的地方。[`System.Collections.Generic.Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)`<Guid, ...>``...`

在程序启动时，用您需要识别的 guid 和值填充字典。

然后，使用[`TryGetValue`](http://msdn.microsoft.com/en-us/library/bb347013.aspx)字典的方法通过它的 guid 检索一个值。

我没有说明任何字面意思，`...`因为我不知道您想对向导做什么。也许你想运行一些函数，然后一个方法指针（`Func<T>`或类似的东西）可能是合适的，或者提供你想要调用的方法的接口类型。这取决于该指南比较代码的上下文/目的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-12-18T09:13:42.517

使用 c#7，您现在可以使用带有[模式匹配](https://docs.microsoft.com/en-us/dotnet/csharp/pattern-matching)的 switch来实现此目的。

```
switch (gMyGuid )
{
    case var g when (g == new Guid("VALUE")):
        break;
    case var g when (g == new Guid("VALUE2")):
        break;
    case var g when (g == new Guid("VALUEN")):
        break;
    default:
        break;
} 
```

如果您定义了静态只读新 Guid"..") 变量，这也有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T12:24:09.600

将比较值创建为静态的，因此您只创建了一次。

在您的班级顶部添加：

```
private static Guid guidVal1 = new Guid("VALUE"); 
```

然后在你的方法中：

```
if(gMyGuid == guidVal1)
else if .... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T12:38:15.783

如果您真的关心性能，使用数字参数的构造函数比`Guid(string)`构造函数更快。不涉及字符串，也不需要解析任何东西。

这是其中之一的实现：

```
public Guid(int a, short b, short c, byte d, byte e, byte f, byte g, byte h, byte i, byte j, byte k)
{
    this._a = a;
    this._b = b;
    this._c = c;
    this._d = d;
    this._e = e;
    this._f = f;
    this._g = g;
    this._h = h;
    this._i = i;
    this._j = j;
    this._k = k;
} 
```

当然，它看起来不那么漂亮，但我认为它是最快的构造函数。此外，您当然可以将所有比较 Guid 存储在 a 中`Dictionary`，并使用其中的值来存储每个的处理程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T13:43:16.043

我会创建一个 HashSet(T) 的 Guid，在启动时对其进行初始化。

而不是冗长的 'if , if, if ' 你得到一个

```
if (GuidHashSet.Contains(gMyGuid)) {} 
```

如果需要，您可以向 HashSet 添加新的 Guid。HashSet Contains() 是一个 O(1) 操作。

将它们全部设为 Guid（仅一次），因为 Guid == Guid 使用 Guid 的内部数据来比较它们（在 Guid.cs 中，equals 被重载）。所以比较 Guid == Guid 是最快的。HastSet 会做什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T12:27:39.870

Guid 相等运算符 (==) 已重载，因此仅比较值：

[http://msdn.microsoft.com/en-us/library/system.guid.op_equality(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/system.guid.op_equality(v=VS.90).aspx)

```
if(gMyGuid == myGuid)
... 
```

# google-apps-script - 电子表格中的 AppScript 和 WebApp 中的 AppScript

> ID：11156050
> 
> 赞同：0
> 
> 时间：2012-06-22T12:20:49.213
> 
> 标签：google-apps-script

只需要澄清一些事情并要求参考。

1.  电子表格中的 App Script Execute 适用于所有示例。但。
2.  当 appscript 使用 scriptEditor -> publish -> Deploy as Webapp 部署为 webapp 时，appscript 中的大部分代码都不起作用。

例如：使用脚本编辑器创建一个表单使用构建器创建一个 doGet() 函数并显示表单绑定一些函数到按钮？

任何人都可以向我指出一个参考，例如打开表单所在的电子表格并操作单元格值。

您能否给我一些信息，我在哪里可以获得有关将表单作为 webapps 编写脚本的参考。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:36:03.657

访问电子表格时，这两种模式之间的主要区别在于 Web 应用程序不知道它链接到的电子表格，除非您明确告诉它，没有“活动电子表格”或“活动工作表”之类的东西。因此，您应该按 ID 打开电子表格（`openById('long ID number')`并按名称或索引选择工作表。

另一点，但我想你会发现很明显，附加到电子表格的 UI 函数必须以“ `var doc = SpreadsheetApp.getActive();doc.show(app);`”结尾，而 Web 应用程序只能以“ `return`”结尾。

网上有很多例子，有些可以在[Google Developpers](https://developers.google.com/apps-script/case-studies?hl=fr-FR)或者[这里](https://sites.google.com/site/appsscriptexperiments/home)找到，希望你能找到一些有趣的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-16T06:11:57.907

您可能会在 webapp 中获得更多差异，例如当您使用它时，您可能无法使用某些仅限于 appscript 的类，例如：当您创建页面时，您无法使用，`Logger.log()`而是可以使用`console.log()`并查看日志`inspect element > console > bottom`。

web app允许我们使用html、css、javascript来构建网页

# html - 图像地图无法通过 ID 引用？

> ID：11156054
> 
> 赞同：2
> 
> 时间：2012-06-22T12:20:55.490
> 
> 标签：html, browser, syntax, imagemap

我有这样嵌入的图像和地图：

```
<img src="planets.gif" width="145" height="126" alt="Planets" usemap="planetmap" />
<map id="planetmap">
  ... 
```

它不工作。我尝试将`name`属性用于`map`：

```
<img src="planets.gif" width="145" height="126" alt="Planets" usemap="#planetmap" />
<map name="planetmap">
  ... 
```

它奏效了！即使这样：

```
<img src="planets.gif" width="145" height="126" alt="Planets" usemap="#planetmap" />
<map id="planetmap">
  ... 
```

工作，虽然只在 IE9 而不是在 Chrome 中。是因为Chrome不支持还是因为IE的引擎马虎？

我在这里做错了什么？[W3Schools](http://w3schools.com/) [明确建议](http://w3schools.com/tags/tag_map.asp)使用该`id`属性，而不是`name`：

> HTML 和 XHTML 之间的区别
> 
> 在 XHTML 中，标签的 name 属性已被弃用，并将被删除。改用 > id 属性

我的 DOCTYPE 是`<!DOCTYPE html>`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T12:24:16.923

`<map>`不推荐使用name 属性。事实上，它甚至是[HTML5 规范的一部分`<map>`](http://www.w3.org/TR/html5/the-map-element.html#the-map-element)。

还有 XHTML != HTML5。
最后，不要使用 W3schools 作为参考。相反，请使用[Mozilla 开发者网络](https://developer.mozilla.org/en/HTML/Element/map)。
要获得高质量的文档，请在关键字前添加或附加“mdn”，例如[“mdn image map”](http://www.google.com/search?q=mdn%20image%20map)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:28:55.360

试着放

```
....usemap="#planetmap" border=0 /> 
```

代替

```
usemap="planetmap" /> 
```

在 Firefox 11 中它可以工作。

# jquery - 根据另一个属性更改选择的值

> ID：11156056
> 
> 赞同：0
> 
> 时间：2012-06-22T12:21:06.653
> 
> 标签：jquery

好的，所以我正在用一个看起来像这样的 JSON 填充一个选择框：

```
Object{
"data":
[{"filter":"en","id":"2","label":"English"},
{"filter":"no","id":"3","label":"Norwegian"},
{"filter":"nl","id":"4","label":"Dutch"}]
} 
```

目前，如果我这样做，`jQuery("#mySelect").val()`我会得到所选选项的“id”值，如果我使用`.text()`or`.html()`我会得到所选标签的值。我想做的是根据“过滤器”的值更改所选选项，例如，我想检查所选选项是否具有过滤器“否”，如果没有，我想选择该选项确实如此。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:33:01.810

您可以为您的 porpose 使用数据属性：

html

```
<select>
    <option data-filter="en" value="1">English</option>
    <option data-filter="no" value="2">Norwegian</option>
</select>​ 
```

js

```
$('select').change(function() {
    var id = $(this).find('option:selected').data('filter');
    alert(id);
});​ 
```

如果您要动态创建选择，您可以设置数据属性，例如：`$('option').data('filter', 'no');`

示例：http: [//jsfiddle.net/kzHfF/](http://jsfiddle.net/kzHfF/)

PS您可以根据需要放置mutch数据属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:48:48.807

Add a new attribute to each option which contains the filter value

```
<select>
    <option filter="en" value="2">English</option>
    <option filter="no" value="3">Norwegian</option>
    <option filter="n1" value="4">Dutch</option>
</select> 
```

You will get the selected option with $('select option:selected') and get value of the filter attribute from it.

```
$('select').change(function(){
    console.log($('select option:selected').attr('filter'));
}); 
```

# android - 在多个活动中使用处理程序

> ID：11156062
> 
> 赞同：1
> 
> 时间：2012-06-22T12:21:30.930
> 
> 标签：android, bluetooth, handler

我正在开发一个应用程序，它有大约 8 个活动，以及一个用于将数据连接到嵌入式蓝牙芯片/从嵌入式蓝牙芯片接收数据的类。当我开始时，在我的初始 Activity 中初始化了一个蓝牙对象，其中有一个 Handler 从蓝牙对象接收消息。

在互联网上闲逛了一段时间后，对我来说最好的主意是将我的类变成一个应用程序子类。但是，这样做消除了我在 MainMenu 中初始化对象的需要，这消除了我将使用的处理程序传递给它的能力。

有谁知道消除对 Handler 的需求的方法，以便蓝牙应用程序每次更改其状态或接收数据时，当前的 Activity 都可以访问它？

这种方法的主要问题是 Activity 不知道蓝牙应用程序何时向其发送消息，应用程序等待并侦听，然后在发生时通知 Activity。

或者

将 Handler 写入 MainMenu，让它处理所有不同活动的消息，然后将 Handler 从 Activity 传递到 Activity 对我来说是不好的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:08:32.537

我将假设您正在尝试实现以下目标，因为您的问题有点不清楚您的最终目标（对不起！）：

1.  您的应用程序有多个活动，但只有一个活动从蓝牙设备接收数据。
2.  应用程序中的其他活动需要来自蓝牙设备的数据，但不直接从蓝牙设备接收数据。目前，您正在通过上述一项活动提供数据。
3.  您不想使用 Handler 来实现这一点。

如果我的上述假设是正确的，那么您将沿着正确的路线前进，但您可能不想使用处理程序。

让一个 Activity 处理与蓝牙设备的所有交互是非常正确的。它简化了事情并提供了一种更好、更清洁的蓝牙设备处理方式。但是，您需要从一个 Activity 获取数据到所有其他 Activity，为了实现这一点，您可能需要使用[Broadcasts、BroadcastReceivers](http://developer.android.com/reference/android/content/BroadcastReceiver.html)和 Intents。有关概述，请参见[此处。](http://developer.android.com/guide/components/intents-filters.html)

但是，如果可以的话，您可能想看看使用[LocalBroadcastManager](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)，因为这会将任何广播保留在您自己的应用程序空间内。广播是全球性的，如果由于安全隐患您不需要将数据传递到自己的应用程序之外，则应避免使用广播。

最后，您是否考虑过将[Fragments](http://developer.android.com/guide/components/fragments.html)用于您的其他活动？广播的另一个缺点是与它们相关的额外开销。如果您将数据保存在您的应用程序中，那么您可以创建一个由您的每个 Fragment 实现的接口，并且您的主要活动只需在当前选择的 Fragment 上调用该接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:00:20.880

您可以使用 BroadcastReceiver 类向您的活动发送广播消息。见这里[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

当您将所需的数据放入应用程序类时，您可以将其发送到您想要的活动。只需确保活动已注册以接收该广播消息..

# ios - Apple 会拒绝使用 Apple 应用程序中使用的图像的应用程序吗？

> ID：11156065
> 
> 赞同：3
> 
> 时间：2012-06-22T12:21:36.373
> 
> 标签：ios, iphone, appstore-approval

我正在制作一个音频播放器应用程序。

在苹果的音乐应用程序中，如果音乐专辑或播客没有插图，则会显示音符图像或播客图标图像而不是插图。

我想做同样的事情。

我可以在我的应用程序中使用苹果音乐应用程序中的图像吗？
苹果会拒绝我的应用吗？

我必须自己创建音符和播客图标的图像吗？
还是建议在我的应用程序中使用苹果的图像以获得用户体验？

我还想使用历史图标、播客图标和有声读物图标，它们用于苹果应用程序中的标签栏图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:25:28.633

我确实使用了来自 Apple 的图像，我可能会说这很奇怪：

1）我为使用“照片”应用程序图标的客户上传了一个应用程序，一切正常，应用程序被批准。

2) 在接下来的一个月里，我为不同的客户端上传了一个新的应用程序，但逻辑相同（只是设计不同），并再次使用了“照片”应用程序图标。这次应用程序被拒绝，说明我无法使用 Apple 图标。之后，我更改了图标并获得了批准。

下一次，我不会使用来自 Apple 的图像。就我而言，我没有紧迫的最后期限，但如果我有，我会被搞砸的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T12:25:43.110

重用工具栏/按钮图标很好，Apple 可能会欣赏 UI 的一致性。许多应用程序使用了应用商店中未包含在核心集中的 Apple 图标。不过，使用“更大”的艺术将不受欢迎，比如飞溅艺术/库存图片。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T12:32:10.387

这取决于审稿人。有些人会放手，有些人不会。就我而言，不值得冒险。只需找到/创建另一个要使用的图形。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T12:32:48.763

请注意，您没有使用 Apple 图像的合法权利。它们受版权保护。即使申请没有被拒绝（批准人不必注意使用受版权保护的图像），您以后也可能会遇到问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T12:26:08.040

是的，如果我们使用 Apple 拥有的图形/属性，Apple 将拒绝该应用程序。如果需要，您可以查看指南

# java - 如何在检票口中打印文本

> ID：11156073
> 
> 赞同：2
> 
> 时间：2012-06-22T12:22:06.867
> 
> 标签：java, html, wicket

我有一些文本，我想在单独的行上。

我尝试`println`使用标签：

```
add(new Label("output",output));

<span wicket:id="output">Will be replaced</span> 
```

此代码的问题在于它忽略了格式化新行。有没有更好的方法来处理`println`一些文本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T12:44:51.583

有两种选择：

1.  使用`<pre />`（如：*预格式化*）标签而不是`<span />`. 如果您的文本中有新的行标记，它将起作用，因为浏览器不会格式化放置在`<pre />`标签内的文本。

2.  使用 Wicket 的[`MultiLineLabel`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/basic/MultiLineLabel.html)课程。在[Javadoc](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/basic/MultiLineLabel.html)之后：

    > 与 不同[`Label`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/basic/Label.html)，通过为换行符插入换行符 () 和为多个换行符的序列插入段落标记 ( ) 来[`MultiLineLabel`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/basic/MultiLineLabel.html)显示跨越多行的文本。`BR tags``P tags`

请注意，如果使用[MultiLineLabel](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/basic/MultiLineLabel.html)类，则不应`<span />`在 HTML 中使用标签，因为在其中放置段落 ( `<p />`)`<span />`被认为是不好的做法。

# android - Android：从自定义列表视图中单击的按钮获取列表视图项目

> ID：11156078
> 
> 赞同：14
> 
> 时间：2012-06-22T12:22:59.177
> 
> 标签：android, arrays, listview, view, android-arrayadapter

我有一个带有两个按钮的自定义 ListView，当我单击任何行上的任一按钮时，我想在 Listview 上获取文本标签，现在只需弹出一个 toast 即可。到目前为止，没有任何效果，我一直在获取数组中的最后一项。

这是一个屏幕截图，可让您更好地了解我的意思

![在此处输入图像描述](../Images/0ac35de17ff3c62ac2e08f2e9c7cc6da.png)

这是我的自定义 ListView 的适配器子类

```
static final String[] Names = 
           new String[] { "John", "Mike", "Maria", "Miguel"};

class MyArrayAdapter extends ArrayAdapter<String> {
    private final Context context;      

    int which;

    public MyArrayAdapter(Context context, String[] pValues) {
        super(context, R.layout.main, pValues);
        this.context = context;
        values = pValues;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        rowView = inflater.inflate(R.layout.main, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        Button call = (Button) rowView.findViewById(R.id.button1);
        Button chat = (Button) rowView.findViewById(R.id.button2);
        textView.setText(values[position]);

        // Change icon based on name
        s = values[position];           
        which = position;
        call.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String name = values[which];
                Toast.makeText(CustomListView.this, name, Toast.LENGTH_SHORT).show();
            }
        });

        return rowView;
    }
} 
```

编辑：

```
String name = textView.getText().toString();
RelativeLayout ll = (RelativeLayout)v.getParent();
textView = (TextView)ll.findViewById(R.id.label);
Toast.makeText(CustomListView.this, name,
Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T12:40:50.077

容易做到：

```
 call.setOnClickListener(new OnClickListener() { 
        @Override 
        public void onClick(View v) { 
            RelativeLayout rl = (RelativeLayout)v.getParent();
            TextView tv = (TextView)rl.findViewById(R.id.label);
            String text = tv.getText().toString();
            Toast.makeText(CustomListView.this, text, Toast.LENGTH_SHORT).show(); 
        } 
    }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T12:36:14.913

使用 View 的 setTag 属性............

作为

```
Button call = (Button) rowView.findViewById(R.id.button1);
call.setTag(position); 
```

和

```
call.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
               int which = -1;
               Obejct obj =  v.getTag();
              if(obj instaceof Integer){
               which  = ((Integer)obj).intValue();
                    }

              if(which >-1){
                String name = values[which];
                Toast.makeText(CustomListView.this, name, Toast.LENGTH_SHORT).show();
                }
            }
        }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T17:25:34.640

如果您有一个 ListActivity，并且您没有使用自己的适配器，您仍然可以获得属于点击按钮的列表项，如下所示：

在列表行的布局文件中：

```
<ImageButton
        android:id="@+id/button_call"
        android:layout_height="48dip"
        android:layout_width="48dip"
        android:contentDescription="Call"
        android:onClick="callBuddy"
        android:src="@drawable/call_button_image"
        /> 
```

在您的 ListActivity 中：

```
public void callBuddy(View view) {

    int position = getListView().getPositionForView((View) view.getParent());
    Buddy buddyToCall = (Buddy) getListView().getItemAtPosition(position);

    Toast.makeText(MyListActivity.this, String.format("Calling your buddy %s.", buddyToCall.name), Toast.LENGTH_SHORT).show();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T23:12:26.830

将 onClick="click" 设置为按钮/图像/等的 xml...

在您的活动中，执行以下操作：

```
public void click(View v) {
    final int position = getListView().getPositionForView(v);
    String text = getListView().getItemAtPosition(position).toString();
    Toast.makeText(getApplicationContext, text, Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-06T05:59:58.157

只需使用 getItem() 并传递位置 例如：`getItem(position).getID()` 这里的 getID() 方法是 getter 方法

# java - 访问小程序时出现ClassNotFoundException，但仅适用于某些

> ID：11156091
> 
> 赞同：1
> 
> 时间：2012-06-22T12:24:09.247
> 
> 标签：java, applet, classnotfoundexception

我最近收到一封来自客户的电子邮件，说他们在我们的一个网络应用程序上遇到了错误。我们有一个在整个应用程序中使用的日期/时间选择器小程序，它不会显示给该用户。HTML页面中的标签是：

```
<APPLET CODE="com.enerwise.applet.datetime.DateTimeSelector" WIDTH=250 HEIGHT=30  codebase="/japps" name="app_date_start" align="middle" archive="DateTimeSelector.jar,VisualSoftJBCalendar.jar">
<PARAM NAME="locale" VALUE= "en_US" ><PARAM NAME="interval" VALUE= "-1" >
</APPLET> 
```

他报告的错误`ClassNotFoundException`在`com.enerwise.applet.datetime.DateTimeSelector`. 他尝试从办公室的几台不同的计算机访问该页面，并得到相同的错误。他安装了 Java 1.7（小程序很旧；很可能是用 1.4 编译的），并在 Win XP/IE8 和 Win 7/IE9 机器上进行了尝试。我已经在 Win XP/IE8 和带有 java 1.7 的 Win 7/IE9 机器上尝试过，没有问题。

他是唯一有这个问题的客户（据我所知）。我难住了！我建议他从不在他工作网络上的计算机上尝试；我还没有得到答复。

任何人都可以建议检查他的系统吗？我发现另一个[线程](https://stackoverflow.com/questions/7368735/classnotfoundexception-when-loading-applet-on-some-computers)的问题是 Java 控制台中的用户代理设置。我也会让他检查一下。

有没有可能是他公司的IT部门？更改了他们的安全性并阻止了小程序/jar 文件？在那种情况下他会收到`ClassNotFound`消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:28:00.990

Java 小程序的 JAR 文件像任何其他文件一样由浏览器下载。您应该能够为这些 JAR 创建一个 URL，并要求用户在浏览器中输入它们并查看它们是否已下载。

例如，如果您的小程序嵌入在可通过以下方式访问的页面中

```
http://yoursite.com/some/page.html 
```

那么 JAR URL（在你的情况下）应该是这样的：

```
http://yoursite.com/japps/DateTimeSelector.jar
http://yoursite.com/japps/VisualSoftJBCalendar.jar 
```

（您在标签`/japps`中指定了代码库`applet`）。

让您的用户在浏览器中输入它们，如果他们不会下载，那是公司的防火墙，或者它们在 Web 服务器中物理缺失。

# java - 如何将受保护的方法添加到在 java 中实现接口的类？

> ID：11156096
> 
> 赞同：0
> 
> 时间：2012-06-22T12:24:24.640
> 
> 标签：java, interface, wrapper

我有一个名为的类`Property`，它只有`get`-methods。创建新实例时将设置所有字段`Property`。`Property`实现了一个名为`IProperty`.

由于我使用的库中的一些错误，我必须在`Property`创建后设置 anew 实例的名称。因此，建议创建一个`WrapperProperty`类，该类将提供一个公共`setName`方法，该方法本身调用一个因此创建`setName()`的方法`Property`，该方法将是受保护/包视图。

问题是我不能让这个方法在 中受保护`Property`，因为 Eclipse 告诉我将它添加到接口`IProperty`并使其公开。

有一些解决方法吗？

**WrapperI 属性：**

```
public class WrapperIProperty {

    private IProperty prop;

    WrapperIProperty(Property prop) {
        this.prop = prop;
    }

    public void setName(String name) {
        prop.setName(name);
    }
} 
```

**财产：**

```
public class Property implements IProperty {

    String name;

    protected void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }
    public int getFoobar() {
        return 123;
    }
    public int getWhatever() {
        return 987;
    }
} 
```

**财产：**

```
public interface IProperty {

    public int getWhatever();
    public int getFoobar();
    public String getName();

} 
```

这就是它目前的样子。显然它不起作用，因为我不能让该方法在`Property`类中受到保护。因此，我最好以某种方式摆脱 interfacee 条目。但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:42:40.127

您可能想要做的是不理会`IProperty`接口（不要`setName`向其中添加方法）并创建一个委托包装类，该类提供您想要的方法（包装接口的实现）。

通过这种方式，您可以将包装的属性和常规属性提供给任何需要它们的东西。

```
public class WrappedProperty implements IProperty {

    private String name;

    private Property prop;

    WrappedProperty (Property prop) {
        this.prop = prop;
    }

    protected void setName(String name) {
        this.name = name;
    }
    public int getWhatever() {
        return prop.getWhatever();
    }
    public int getFoobar() {
        return prop.getFoobar();
    }    
    public String getName() {
        if (this.name == null) {
           return prop.getName():
        } else {
            return this.name; 
        }
    }
} 
```

```
public class Property implements IProperty {        

    public String getName() {
        return "blah";
    }
    public int getFoobar() {
        return 123;
    }
    public int getWhatever() {
        return 987;
    }
} 
```

```
public interface IProperty {

    public int getWhatever();
    public int getFoobar();
    public String getName();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:38:35.543

an 中的方法`Interface`在范围内是公共的，因此实现类不能通过降低其可访问性来覆盖方法。使他们`public`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:56:24.683

接口中不能有公共方法*名*，而实现此接口的类中不能有*私有*或受保护的方法名。

因此，您可以在 Class 中公开*methodName ：*

*   这个方法什么都不做
*   此方法调用*[another]methodNameProtected*（您为新的受保护方法提供另一个名称）

**更新**

如果您只希望在接口中使用它，则必须在 AbstractClass 中更改您的接口并将方法 *public final returnCode methodName*放入其中，如果该方法对于所有继承的类都是通用的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:59:45.930

找到了解决该问题的方法：

**WrapperI 属性：**

```
public class WrapperIProperty {

    private Property prop;

    public WrapperIProperty(IProperty prop) {
        this.prop = (Property) prop;
    }

    public void setName(String name) {
        prop.setName(name);
    }

} 
```

**财产：**

```
public class Property implements IProperty {

    private String name = null;

    [...]

    void setName(String name) {
        this.name = name;
    }
} 
```

**财产：**

```
public interface IProperty {

    [...]
} 
```

这将完成这项工作

# java - JSP如何更改应用程序名称

> ID：11156097
> 
> 赞同：1
> 
> 时间：2012-06-22T12:24:28.793
> 
> 标签：java, jsp, tomcat6

我有一个具有名称的 JSP java 应用程序，`AAA-master`因此目前我的应用程序可以通过以下方式访问`http://localhost:8080/AAA-master/`

该项目被称为`AAA-master`...有没有办法让我的应用程序可以通过`http://localhost:8080/AAA/`？

我到处搜索，我的谷歌技能让我失望了:(

我在这个项目中使用 tomcat6，但我正在迁移到 tomcat7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:29:42.817

你可以更新你的`server.xml`下`Tomcat\conf`

```
 <Context path="/AAA" docBase="yourWarFilelocation" debug="0" reloadable="true"> 
```

`docBase`是您的 war 文件的位置或应用程序根目录路径

例如`C:\\Amit\\developments\\abc`

# android - android set inputtext value

> ID：11156102
> 
> 赞同：0
> 
> 时间：2012-06-22T12:25:00.350
> 
> 标签：android, android-layout, nullpointerexception, android-edittext, textinput

I'm a young computer scientist and I'm learning android development.

I tried since this morning to pass value between 2 `inputtext` on the same layout. When the user edit one `inputtext`, I would like to paste the new value to one other `inputtext`.

This is my code :

```
private void syncInput() { 
     ((EditText)findViewById(R.id.firstInput)).addTextChangedListener(new TextWatcher() {
        public void afterTextChanged(Editable s) {              
            EditText EditText1 = (EditText)findViewById(R.id.firstInput);
            ((EditText)findViewById(R.id.SecondInput)).setText(EditTextATK.EditText1().toString());

        }        
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }        
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub

        }        
    });

} 
```

After the launch of my application, when I edit my firstInput I have this **error** :

```
06-22 14:08:25.196: E/AndroidRuntime(519): java.lang.NullPointerException
06-22 14:08:25.196: E/AndroidRuntime(519):  at com.d3ckard.toolbox.activity.MyActivity$3.afterTextChanged(MyActivity.java:71)
06-22 14:08:25.196: E/AndroidRuntime(519):  at android.widget.TextView.sendAfterTextChanged(TextView.java:6145)
06-22 14:08:25.196: E/AndroidRuntime(519):  at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:6328)
06-22 14:08:25.196: E/AndroidRuntime(519):  at android.text.SpannableStringBuilder.sendTextHasChanged(SpannableStringBuilder.java:897)
06-22 14:08:25.196: E/AndroidRuntime(519):  at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:353)
06-22 14:08:25.196: E/AndroidRuntime(519):  at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:269)
06-22 14:08:25.196: E/AndroidRuntime(519):  at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:432)
06-22 14:08:25.196: E/AndroidRuntime(519):  at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:409)
06-22 14:08:25.196: E/AndroidRuntime(519):  at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:28)
06-22 14:08:25.196: E/AndroidRuntime(519):  at android.text.method.NumberKeyListener.onKeyDown(NumberKeyListener.java:117) 
```

* * *

The line number 71 is this one :

```
((EditText)findViewById(R.id.SecondInput)).setText(EditTextATK.EditText1().toString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:30:33.970

改变

```
((EditText)findViewById(R.id.SecondInput)).setText(EditTextATK.EditText1().toString()); 
```

至

```
((EditText)findViewById(R.id.SecondInput)).setText(EditText1().getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:28:56.363

请试试

```
private void syncInput() { 
             EditText EditText1 = (EditText)findViewById(R.id.firstInput);
             EditText EditText2 = (EditText)findViewById(R.id.SecondInput);
             EditText1.addTextChangedListener(new TextWatcher() {
                public void afterTextChanged(Editable s) {              

                    EditText2.setText(EditText1.gettext().toString());

                }        
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }        
                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                    // TODO Auto-generated method stub

                }        
            });

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:30:55.910

您的代码行丢失`getText()`。它应该是：

```
((EditText)findViewById(R.id.SecondInput)).setText(EditTextATK.EditText1().getText().toString()); 
```

# c++ - Is it possible to decompile C++ Builder exe? Is C++ Builder exe safe?

> ID：11156104
> 
> 赞同：0
> 
> 时间：2012-06-22T12:25:07.030
> 
> 标签：c++, c++builder, decompiler

Is it possible to decompile C++ Builder exe?

Is C++ Builder safe programming tools or anyone can decompile it and see the code?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T12:36:17.643

**简短的回答是，是的，它可以被反编译，而且它不是“安全的”。**计算机上运行的任何东西都可以被拆卸，并通过阅读拆卸来检查。*反编译*甚至意味着恢复一些原始*编译*的源代码——这在某种程度上确实**是可能的。**毕竟，它“只是”关于编写一个可以将汇编翻译成所需语言的程序。如果人类可以做到这一点，那么程序也可以做到这一点，因为它只是应用已知的规则和逻辑将程序从不同的表示/语言翻译成另一种。然而，事情并没有那么简单……

许多信息（如源文件、变量名、一些未使用的代码、注释等）在编译过程中丢失。编译器优化会进一步恶化这种情况，这通常会使生成的反汇编在某些情况下几乎不可读。因此，反编译的源代码只能提供有关实现细节的线索，主要只是逻辑，而不是用于构建项目的实际源代码。

请注意，这与任何形式的“安全”或程序本身的安全性几乎*无关。*任何程序都可以以某种方式进行反汇编，工作程序背后的任何逻辑都可以进行检查和逆向工程。程序内部不可能有*秘密*，如果可以运行，就没有什么可以隐藏的。

*反汇编一段可执行文件并在汇编中处理其逻辑通常要容易得多，而不是试图依靠许多此类反编译器*仍然产生的 C 等高级语言中非常模糊且通常被破坏的重构。虽然有时，工具可以通过反汇编生成可读且非常清晰的高级表示，但它们通常是简单的案例和简短的代码摘录。

**底线**是，您不需要*反编译器*来检查、逆向工程和理解目标程序。所有人都需要访问可执行文件、*反汇编*程序和对汇编语言的理解。没有办法避免这个事实，而且它很少是一个真正的问题。

# mysql - eclipse 服务器应用程序不支持阿拉伯字符

> ID：11156105
> 
> 赞同：0
> 
> 时间：2012-06-22T12:25:10.293
> 
> 标签：mysql, eclipse, arabic

我正在使用 eclipse 构建服务器应用程序，客户端是 android 应用程序

当我只使用 Java 应用程序时，我可以从 mysql 读取阿拉伯字符并可以将其正确打印到 eclipse，但在服务器应用程序上我不能，结果是这样的问号`?????`

我正在尝试在 eclipse 上打印结果而不是在 android 上

我连接到数据库是：

```
String unicode = "?useUnicode=yes&characterEncoding=UTF-8";
Class.forName("com.mysql.jdbc.Driver");
            con = (Connection) DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/ams-competation" + unicode,
                    username, password); 
```

不关心 android ，我在问如何在 eclipse 服务器应用程序上读取和打印阿拉伯字符

# 

编辑

似乎我的问题来自日食而不是来自连接，因为当我尝试这个时`System.out.println("روما");`，我得到了问号，当我试图用这个语句检查那个问号时

```
if(q.getFirstChoice().equals("بيرلو"))
                System.out.println("dddd"); 
```

结果是`dddd`，所以我可以从mysql正确读取它，但是我在打印结果时遇到了问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:04:21.933

问题是`system.out`不支持`UtF-8`字符，因此您应该使用以下代码

```
PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));
out.println(“some-utf8-string”); 
```

你也可以看看[参考](http://poeticcode.wordpress.com/2009/01/19/systemout-and-utf8/)。

**编辑**：
其他解决方法是

*   在“运行配置”的“参数”选项卡中，我将“-Dfile.encoding=UTF-8”添加到 VM 参数中
*   在运行配置的通用选项卡中，我将控制台编码设置为 UTF-8

# php - PHP 在我们这个时代加盐密码的最佳方法

> ID：11156106
> 
> 赞同：1
> 
> 时间：2012-06-22T12:25:12.423
> 
> 标签：php, hash, salt, saltedhash

如何为每个用户制作绝对原创的盐？`time()`在PHP中使用函数更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:33:26.760

在许多情况下，一个简单的`uniqid(mt_rand(), true)`方法就可以生成随机盐。结合 Blowfish 应该会给你一个很好的密码哈希。

替代方案是伪随机源，例如`/dev/urandom`或`openssl_pseudo_random_bytes()`。还有一些服务会为您生成随机数据（基于放射性退化）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T12:28:24.040

使用此行在 php 中生成强盐

```
 $salt = bin2hex(mcrypt_create_iv(32, MCRYPT_DEV_URANDOM)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T12:27:45.993

考虑使用*随机*盐而不是非随机盐。也许你会在这篇文章中找到有用的东西[http://www.gregboggs.com/php-blowfish-random-salted-passwords/](http://www.gregboggs.com/php-blowfish-random-salted-passwords/)

也看看这篇文章[http://codahale.com/how-to-safely-store-a-password/](http://codahale.com/how-to-safely-store-a-password/)

一种方法是为每个用户生成一个唯一的盐并将该盐也存储在数据库中。

另一个好方法是**生成密码哈希的算法必须计算 salt 超过 second**。您的哈希算法越复杂 - 想要破解您的数据库的人面临的问题就越多

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T12:33:06.393

您可以使用`microtime()`PHP 中的函数来生成基于微秒而不是秒的数字，这使得用户几乎不可能与另一个用户拥有相同的盐分。您也可以将此数字与用户 ID 相乘。

对于您的应用程序来说，也许 a`md5(uniqid())`就足够了。

编辑：忘记在函数中提及 more_entropy 参数`uniqid()`。即使函数在同一微秒内运行两次，它也会减少相同字符串的机会，因此编辑后的函数应如下所示：

```
$salt = md5(uniqid($user_id, TRUE)); 
```

# wpf - XAML 用这个绑定命令启发了我

> ID：11156117
> 
> 赞同：-4
> 
> 时间：2012-06-22T12:25:49.687
> 
> 标签：wpf, xaml, data-binding

这些是什么？我对“绑定”中的额外属性感到困惑

```
{Binding Path=Customers, Source={StaticResource customerVM}, Mode=TwoWay}
{Binding Path=GetCustomersByNameCommand, Source={StaticResource customerVM}}
{Binding Path=Text, ElementName=tbName}
{Binding Path=DataContext, ElementName=LayoutRoot}
{Binding Path=TotalIncome, Mode=OneTime} 
```

还有更多。那些是什么？我的意思是，他们从哪里获得模式、路径等。我不明白。

我唯一能理解的是

```
{Binding ProperyName}
{StaticResource Anythinghere} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:35:49.763

XAML 中的绑定可以通过多种方式指定。

最简单的（快捷方式）是

```
{Binding PropertyName} 
```

这相当于

```
{Binding Path=PropertyName} 
```

这相当于：

```
<Binding Path="PropertyName" /> 
```

`Binding`实际上是一个具有各种属性的类，例如 Path、Source、Mode 等。

有关如何在 WPF 中绑定数据的更多详细信息，请访问：http: [//msdn.microsoft.com/en-us/magazine/cc163299.aspx#S2](http://msdn.microsoft.com/en-us/magazine/cc163299.aspx#S2)

# android - android广播接收器android 4

> ID：11156122
> 
> 赞同：1
> 
> 时间：2012-06-22T12:26:00.037
> 
> 标签：android, sms, broadcastreceiver

因为我不能将我的问题发布到这个线程[Android - SMS Broadcast receiver](https://stackoverflow.com/questions/4117701/android-sms-broadcast-receiver?lq=1)，所以我必须这样做。

有人知道为什么这个广播接收器不能在 android 4 上运行吗？我已经用 2.3.7 对其进行了测试并且它正在工作，但是现在随着 android 4 更新没有任何反应：-/。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:36:09.517

原因是

> 从 3.1 开始，当安装应用程序时，它们处于“停止”状态，因此在用户明确启动它们之前它们将无法运行。按下强制停止将使它们返回此状态。
> 
> 一旦用户第一次运行应用程序（并且没有强制停止它），一切都会像以前一样 - 应用程序将开始接收广播等等。但是，如果用户安装了该应用程序，除非他们手动运行该应用程序，否则将不会收到任何广播。

因此，在您的情况下，您将必须创建启动器活动并确保您至少启动该启动器活动一次，然后您将开始接收事件广播。

# c# - Sql Server 查询可视化工具 – 看不到生成的 SQL 查询

> ID：11156124
> 
> 赞同：0
> 
> 时间：2012-06-22T12:26:08.503
> 
> 标签：c#, sql-server, linq, linq-to-sql

我有 SqlServerQueryVisualizer。当我将鼠标悬停在“accounts”变量上时，我可以看到 SQL。但是当我将鼠标悬停在“结果”变量上时，它没有显示 SQL 查询。如何在以下代码中查看“结果”变量的 SQL 查询？

```
 public IEnumerable<T> FindAll(Func<T, bool> predicate)
    {

        LibraryManagementClassesDataContext db = new LibraryManagementClassesDataContext("");
        var accounts = from p in db.Accounts
                       where p.AccountNumber == 1
                       select p;

        //Where
        var results = Context.GetTable<T>().Where(predicate);
        return results;
    } 
```

![在此处输入图像描述](../Images/fbd46bc1690824165f4af2e6de78a3df.png)

另外，我有一个插入功能。如何查看此场景的生成查询？

```
 public virtual void InsertOnSubmit(T entity)
    {
        GetTable().InsertOnSubmit(entity);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:49:23.683

不是 100% 确定这种缺乏悬停工作是由泛型引起的还是什么（它似乎已经解决了您提供的屏幕截图中的泛型），但您始终可以[使用 DataContext.Log 属性](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log%28v=vs.110%29)将 SQL 捕获给读者. 我知道这不太方便，但它可能比悬停时更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:31:03.707

问题中所述的问题仍然存在。

目前我正在使用以下类在输出窗口中查看结果。

```
context.Log = new OutputWindowWriter();

class OutputWindowWriter : System.IO.TextWriter
{
    public override void Write(char[] buffer, int index, int count)
    {
        System.Diagnostics.Debug.Write(new String(buffer, index, count));
    }

    public override void Write(string value)
    {
        System.Diagnostics.Debug.Write(value);
    }

    public override System.Text.Encoding Encoding
    {
        get { return System.Text.Encoding.Default; }
    }
} 
```

# android - 读取、显示和更新 Android 表值？

> ID：11156126
> 
> 赞同：0
> 
> 时间：2012-06-22T12:26:12.153
> 
> 标签：android, database, sqlite

这更像是一个关于让我真正了解我需要遵循的过程的问题。

我短：

*   我需要阅读现有的桌子（橄榄球队）并将其显示在屏幕上。
*   用户可以选择点击任何条目并更新它 - 并根据需要重复。
*   然后用户可以点击“接受”或“取消”
*   如果点击“接受”，我显然想用新值更新表格。

球队可以有 10 到 22 名球员，所以我需要显示相当动态，理想情况下我需要一个球衣号码（静态）、一个名称（文本，可更新）和一个“开始”复选框（可更新）

我对每个单独的组件都有点了解，但是当我尝试将它们绑在一起时，它们都变成了梨形！

谁能指出我正确的方向，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:35:13.103

在我看来，支持 ListView 的简单数据库将是可行的方法。这样您就可以提供不同的选项来对列表进行排序等。

**编辑**

在您的主 xml 中有列表视图和底部的两个按钮（接受和取消）。

创建一个 Listview rowlayout.xml，其中包含一个 textview、一个 edittext 和一个复选框。

像平常一样填充它们（您可以`setText()`像 TextView 一样在 EditText 上使用）。将球衣号码放在 textview 中，将球员姓名放在 edittext 和起始状态以设置复选框。

然后，您只需连接接受按钮以循环浏览列表并提交您所做的任何更改，然后单击取消按钮将它们全部重置为最后保存的值。

# php - Please help me out with suggestion list

> ID：11156128
> 
> 赞同：0
> 
> 时间：2012-06-22T12:26:25.107
> 
> 标签：php, ajax, json

```
<html> 
<head> 
<script src="jquery.min.js" type="text/javascript"></script> 

<script type="text/javascript"> 

function getsuggestion()
{
    var seltxt=$('#selstate').val();
    //alert(seltxt);
    $.ajax({
        type: "POST",
        url: "getstate.php",
        data:{state: seltxt },
        dataType: 'json',
        success: function(data){
                    //alert(data['test']);
                    if(data['test']==0)
                    {
                        $("#suggestion").text("");
                        alert("No suggestion");
                    }
                    $.each(data,function(key,value)
                    {
                        //alert(key);
                        if(key!="test")
                        {                                                                                                          
                                str=str+value+",";                                                       
                                $("#suggestion").text(str);
                        }                                                           

                    });                   
                },
        error: function(error,txtStatus) { alert(txtStatus);}

          });

}
</script>

</head>
<body>
    <form name=f1 method=post>
    <table>
    <tr>
        <td>Select State:</td>
        <td><input type=text id=selstate onkeyup="getsuggestion();">
         </td>
    </tr>
    <tr>    <td></td>
        <td><div id="suggestion"></div>
        </td>
    </tr>
    </table>

    </form>

</body>
</head>
</html> 
```

Hi,I want to make a suggestion list.For that I've used text box for getting input from the user.But now I want the values, stored in database,to be retrieved in the form of list.Here I am getting values in text the format.How do I conver text box into list?Or what should I do to append list to the text box?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:27:45.423

你应该使用类似的东西：http `jQuery UI-Autocomplete`: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

它提供了您要求做的所有事情，以及您学习如何自己做所需的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:53:53.973

您可以使用.You`autocomplete`的功能。`jQuery UI`您可以从[http://jqueryui.com/download下载](http://jqueryui.com/download)

# javascript - src 属性不使用 Jquery 更改

> ID：11156132
> 
> 赞同：0
> 
> 时间：2012-06-22T12:26:44.010
> 
> 标签：javascript, jquery, html, css, jquery-ui

大家好，我制作了一个 JqueryUI 简单滑块，在某个值范围内我制作了 Image URL，然后尝试更改 src 属性。

我正在尝试更改四个图像。

在此处检查[jsFiddle](http://jsfiddle.net/OwaisQureshi/GJKKe/3/)。

我认为代码很好，但它不起作用，我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:28:49.453

替换这个：

```
$("#" + postRetrmntImage).attr('src', ImageName ); 
```

对此：

```
$("#postRetrmntImage").attr('src', ImageName ); 
```

问题是您没有分配任何`postRetrmntImage`变量。

请参阅更新 jsFiddle[演示](http://jsfiddle.net/GJKKe/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:31:06.727

尝试这样做：

```
 $("#" + postRetrmntImage.toString()).attr('src', ImageName ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T12:31:23.150

**演示** [http://jsfiddle.net/8Sw5J/](http://jsfiddle.net/8Sw5J/)

**说明：**请使用这个：`$("#" + sliderId).prop('src', ImageName );`因为在您的函数中，您将 id 传递为`sliderId.`

另外，如果我建议`.prop`在这里使用好阅读：[.prop() vs .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

休息演示你可以看到它是如何工作的，

希望这可以帮助`:)`

**完整代码**

```
 $(document).ready(function () {
            makeSingleSliderWithImage('postRetrmntMnthlyPaymt', 0, 10000, 0, 500);
        }
        );
        function makeSingleSliderWithImage(sliderId, minimum, maximum, val, steps) {

            //Display label shud have a X appended
            $('#' + sliderId).slider(
                {
                    //range: 'min',
                    min: minimum,
                    max: maximum,
                    step: steps,
                    //starting values for silders
                    value: val,
                    slide: function (event, ui) {
                        //var ImageURL = "Images/";
                        //var ImageName = "";
                        //var ext = ".jpg";

                        if ((ui.value >= 0) && (ui.value <= 2000))//Basic: 0-2000
                            ImageName = "http://www.iconempire.com/icon-processor/icon40.gif";
                        else if ((ui.value >= 2500) && (ui.value <= 4500))//Moderate: 2500-4500
                            ImageName = "http://aux.iconpedia.net/uploads/14234829766434728.png";
                        else if ((ui.value >= 5000) && (ui.value <= 7000))//Comfortable: 5000-7000
                            ImageName = "http://www.iconempire.com/icon-processor/icon40.gif";
                        else if ((ui.value >= 7500) && (ui.value <= 10000))//Luxury:7500-10,000
                            ImageName = "Luxury";
                        //var fullURL = ImageURL + ImageName + ext;
                        //change Image URL
                        $("#" + sliderId).prop('src', ImageName ); //{ src: fullURL });

                        alert($("#" + sliderId).prop('src'));
                        //change Slider Value
                        $("#" + sliderId + "X").text(ui.value);
                    }
                }
            );
        }​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T12:29:00.693

换线...

```
$("#" + postRetrmntImage).attr('src', ImageName ); 
```

到...

```
$("#postRetrmntImage").attr('src', ImageName ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T12:45:36.100

分配一个值`postRetrmntImage`然后使用`prop`而不是`attr` [查看为什么 prop](http://api.jquery.com/prop/)

```
var postRetrmntImage="postRetrmntImage";
$("#" + postRetrmntImage).prop('src', ImageName ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T13:01:51.307

试试这个

```
$("#postRetrmntImage").attr('src', 'newimage.png'); 
```

# php - Unable get Last Insert Id

> ID：11156133
> 
> 赞同：-2
> 
> 时间：2012-06-22T12:26:45.267
> 
> 标签：php, mysql, pdo

I have downloaded follwing code from one of Google Codes but problem is in getting Last Insert ID.

Please see in `run()` function

This method is used to run free-form SQL statements that can't be handled by the included delete, insert, select, or update methods. If no SQL errors are produced, this method will return the number of affected rows for DELETE, INSERT, and UPDATE statements, or an associate array of results for SELECT, DESCRIBE, and PRAGMA statements.

```
<?php

    class db extends PDO {

        private $error;
        private $sql;
        private $bind;
        private $errorCallbackFunction;
        private $errorMsgFormat;
        public $lastid;
        public function __construct($dsn, $user = "", $passwd = "") {
            $options = array(
                PDO::ATTR_PERSISTENT => true,
                PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
            );

            try {
                parent::__construct($dsn, $user, $passwd, $options);
            } catch (PDOException $e) {
                $this->error = $e->getMessage();
            }
        }

        private function filter($table, $info) {
            $driver = $this->getAttribute(PDO::ATTR_DRIVER_NAME);
            if ($driver == 'sqlite') {
                $sql = "PRAGMA table_info('" . $table . "');";
                $key = "name";
            } elseif ($driver == 'mysql') {
                $sql = "DESCRIBE " . $table . ";";
                $key = "Field";
            } else {
                $sql = "SELECT column_name FROM information_schema.columns WHERE table_name = '" . $table . "';";
                $key = "column_name";
            }

            if (false !== ($list = $this->run($sql))) {
                $fields = array();
                foreach ($list as $record)
                    $fields[] = $record[$key];
                return array_values(array_intersect($fields, array_keys($info)));
            }
            return array();
        }

        private function cleanup($bind) {
            if (!is_array($bind)) {
                if (!empty($bind))
                    $bind = array($bind);
                else
                    $bind = array();
            }
            return $bind;
        }

        public function insert($table, $info) {
            $fields = $this->filter($table, $info);
            $sql = "INSERT INTO " . $table . " (" . implode($fields, ", ") . ") VALUES (:" . implode($fields, ", :") . ");";
            $bind = array();
            foreach ($fields as $field)
                $bind[":$field"] = $info[$field];
            return $this->run($sql, $bind);
        }

        public function run($sql, $bind = "") {
            $this->sql = trim($sql);
            $this->bind = $this->cleanup($bind);
            $this->error = "";

            try {
                $pdostmt = $this->prepare($this->sql);
                if ($pdostmt->execute($this->bind) !== false) {
                    if (preg_match("/^(" . implode("|", array("select", "describe", "pragma")) . ") /i", $this->sql))
                        return $pdostmt->fetchAll(PDO::FETCH_ASSOC);
                    elseif (preg_match("/^(" . implode("|", array("delete", "insert", "update")) . ") /i", $this->sql)) {
                       echo $this->lastInsertId();
                        return $pdostmt->rowCount();
                    }
                }
            } catch (PDOException $e) {
                $this->error = $e->getMessage();
                return false;
            }
        }

    }

    ?> 
```

Code i use to Insert Record

```
 $insert = array(
        "userid" => 12345,
        "first_name" => "Bhavik",
        "last_name" => "Patel",
        "email" => "bhavik@sjmtechs.com",
        "password" => "202cb962ac59075b964b07152d234b70"

   $db->insert("users",$insert);
    echo $db->lastid; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:31:48.207

在`insert()`函数中，你从来没有设置过`$lastid`，所以它永远不会有正确的值。你需要这样的东西：

在`insert()`函数中更改这一行：

```
return $this->run($sql, $bind); 
```

对此：

```
$rows = $this->run($sql, $bind);
$this->lastid = $this->lastInsertId();
return $rows; 
```

`lastInsertId()`即使没有上述修改，您也应该能够从类外部访问，如下所示：

```
$db->insert("users",$insert);
echo $db->lastInsertId(); 
```

# jquery - iOS Safari Mobile image map - area displays box when clicked

> ID：11156137
> 
> 赞同：1
> 
> 时间：2012-06-22T12:27:05.667
> 
> 标签：jquery, html, ios, mobile-safari, area

So, this one seems to be a little tricky. There's an image map with some areas and the function is like:

*   click on an area, display a tooltip

Here's some code (just a snippet):

```
<img src="content/dummy/1_small.jpg" alt="" usemap="#img_1">
<map name="img_1">
    <area shape="rect" coords="150,50,250,150" href="" alt="" />
    <area shape="rect" coords="250,500,350,600" href="" alt="" />
</map> 
```

And the according click handler:

```
this.areas.click( function (event) {
    var position    = that.areas.index(event.target);
    that.toggleTooltipTouch(position);
    event.preventDefault();
}); 
```

Which works fine. But: Whenever I click on an area, Safari displays a little, slightly transparent box for the time of the touch event. If you hit it very short, it looks like it's flickering.

So, the question is: How to prevent this behavior and don't show that box?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:05:55.700

如[iOS 深灰色框活动样式中](https://stackoverflow.com/questions/9009377/ios-dark-gray-box-active-style)所述，您必须隐藏点击突出显示框：

```
img { -webkit-tap-highlight-color: rgba(0,0,0,0); } 
```

# android - In Facebook.java getAccessToken() is returning null even after login into facebook

> ID：11156138
> 
> 赞同：3
> 
> 时间：2012-06-22T12:27:13.233
> 
> 标签：android, facebook, logging

Even though the user is Logged in into *Facebook*, in `Facebook.java` file `getAccessToken()` is returning null.

# c# - Duplicate 'System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedAttribute' attribute

> ID：11156140
> 
> 赞同：0
> 
> 时间：2012-06-22T12:27:16.407
> 
> 标签：c#, entity-framework, ria

I am using EntityFramework version 4.4, code first and I have created my data model in a separate project (MyApp.DataModel). Because I am building a Silverlight application, I am using a WCF RIA services. The code required by the ria services is in a different project (MyApp.Services). This project has a reference to MyApp.DataModel.

An example of an data model:

```
 [Column("Remaining")]
    [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
    public virtual decimal? Remaining
    {
       //
    } 
```

When I build MyApp.Services I get an error

Duplicate 'System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedAttribute' attribute

Indeed, in the generated code there are two attributes

```
[System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedAttribute(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Computed)]
[System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedAttribute(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Computed)] 
```

If I remove DatabaseGenerated, then on insert I get an error The column "Remaining" cannot be modified because it is either a computed column or is the result of a UNION operator.

Any idea why and how to solve this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:42:32.690

据我了解这里的文档：[http://msdn.microsoft.com/en-us/data/gg193958.aspx](http://msdn.microsoft.com/en-us/data/gg193958.aspx)，`Key`已经默认为`DatabaseGeneratedOption.Identity`，因此您不需要单独添加 DatabaseGenerated 。

摘自*DatabaseGenerated*下的部分：

> 密钥属性将成为数据库中的身份密钥。这与将 DatabaseGenerated 设置为 DatabaseGenerationOption.Identity 相同。如果您不希望它成为身份密钥，可以将值设置为 DatabaseGenerationOption.None。

老实说，我没有对此进行测试，但是您能否确认删除 [DatabaseGenerated(DatabaseGeneratedOption.Identity)] 后，其他属性仍然保留在生成的代码中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:30:31.520

如果您将该属性标记为 DatabaseGeneratedOption.Identity，则 EF 会理解这是关键属性。实际上，如果您没有放置任何属性（Key 或 DatabaseGeneratedOption.Identity），EF 将假定这是 id，因为属性以“ID”结尾，并将在数据库中创建一个自动增量字段。DataAnnotations 在许多情况下是可选的（比如你的）。您也不需要将此属性标记为虚拟，因为它是原始类型。使用 virtual 只是为了关联其他类（延迟加载）。

# c# - 如何检查 radComboboxItem 'CheckBox'？

> ID：11156142
> 
> 赞同：1
> 
> 时间：2012-06-22T12:27:16.883
> 
> 标签：c#, checkbox, telerik, radcombobox

我对图书馆'Telerik'有一点问题。事实上，我想用'checkBox'实现一个'RadCombobox'。它工作得很好，但是当我想要'Check'一个项目时，这是不可能的？！这是我的示例代码。我改变了属性'selected'的属性但是不幸的是，它没有选中“已选中”框......

非常感谢您的回答！

```
<!-- language: lang-cs -->

//Define the sqlAdaptater for binding source

System.Data.SqlClient.SqlDataAdapter myBinding = new SqlDataAdapter("SELECT [name] FROM [dbo].[tblProcess] WHERE [currentVersion] = 1 AND [deleted] = 0 AND [parent] = 0",connectionString);

DataTable links = new DataTable();

myBinding.Fill(links);

//Set the attributs of RadCombobBox

RadComboBoxSelectedEntity.DataTextField = "name";
RadComboBoxSelectedEntity.DataValueField = "name";
RadComboBoxSelectedEntity.DataSource = links;

//Not working..its selected but not checked ?
RadComboBoxSelectedEntity.SelectedIndex = 1;

//Not exist ?? -> 
RadComboBoxSelectedEntity.CheckedIndex = 1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T12:34:34.117

`DataBind`先尝试调用方法

```
RadComboBoxSelectedEntity.DataBind(); 
```

致电后，`DataBind`您可以尝试这行代码仍然无法正常工作，

```
RadComboBoxSelectedEntity.Items[1].Checked = true; 
```

# .net - .NET 4.0: Looking for a *dynamic* method to detect changes between two objects of the same type

> ID：11156143
> 
> 赞同：1
> 
> 时间：2012-06-22T12:27:22.530
> 
> 标签：.net, reflection, .net-4.0

So far, reflection seems to be the only way to **dynamically** check if two objects are the same. You would do this by iterating through the object's members and checking for which ones contain a different value. However, research has told me that reflection is bad on performance when used this way.

If someone can confirm here whether or not reflection is indeed not a good choice for what I need to do, perhaps there is an alternative?

Note that, whatever route I go, I need the solution to be dynamic. This means no overriding of Equals and then comparing each property one by one. If it's dynamic, I can write one method that will work for all types.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:22:51.033

反思是一个很好的方法。编写自己的对象散列方法也是如此。如果您编写一个散列方法来查看所有需要比较的属性并从中进行散列，那么它应该是一个非常快的比较。您可能还需要为此使用反射。object.GetHashCode() 的一种覆盖，但不考虑正在查看哪个引用 - 只是值。

尝试一些东西 - 然后决定性能是否是一个问题。

# ruby-on-rails - 通过 has_one 创建 Activerecord 关系

> ID：11156145
> 
> 赞同：0
> 
> 时间：2012-06-22T12:27:29.140
> 
> 标签：ruby-on-rails, activerecord, has-one

如果你有一个模型海象`has_many :bubbles`（和 Bubble `belongs_to :walrus`，你可以创建一个与海象相关联的新 Bubble ，如下所示：

```
chuckles = Walrus.create
chuckles.bubbles.create 
```

但是如果海象`has_one :bubble`呢？`chuckles.bubble.create`是不行的（因为它是`nil`）。我如何在不通过海象的情况下进行等效操作`Bubble.create`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:31:31.183

对于 has_many

```
chuckles.bubbles.build 
```

对于 has_one

```
chuckles.build_bubble 
```

在你上面的例子中，我认为你应该一直在使用 build. 它为气泡对象添加咯咯声 id。此外，当保存笑声时，气泡也会自动保存

# java - 将 Jasmin 集成到 Ant 和 Eclipse 中

> ID：11156148
> 
> 赞同：1
> 
> 时间：2012-06-22T12:27:38.467
> 
> 标签：java, eclipse, ant, jasmin

我正在开发一个 Java 项目，我需要一个非常具体的测试代码，我在 Jasmin（JVM 程序集）中创建它。该项目是用 Ant 构建的，并且有一个很好的目录结构，即：

```
root
  /src
    /classes
    /tests
  /build
    /classes
    /tests 
```

定制的 Jasmin 源文件与 JUnit Java 文件一起位于 src/tests 目录中。所有这些都是用 Ant 构建的（我使用简单的“java”Ant 任务在源文件上运行 Jasmin 编译器），它们被放入 /build 文件夹内的相应目录中，然后 Ant 运行 JUnit 任务。所有这一切都很好......

在我介绍了由 Jasmin 生成的单个类之前，Eclipse 与该项目完美配合。问题是 Eclipse 看不到新的 .class 文件。构建路径包含 src/classes 和 src/tests 作为源文件夹，以及 /build 作为输出文件夹。然而它似乎找不到 Jasmin 生成的类，所以有数百个“ClassX unresolved”问题，确实让开发非常痛苦。

有谁知道如何强制 Eclipse 看到这个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:31:07.440

A simple solution would be to compile Jasmin classes into a separate class folder and then add that folder into Eclipse's build path: Project Properties / Java Build Path / Libraries / Add Class Folder...

# sql - 如何编写从表中获取数据的查询，而存储的数据中没有引号和双引号

> ID：11156155
> 
> 赞同：2
> 
> 时间：2012-06-22T12:28:05.113
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想编写一个简单的查询，它将从表中获取数据（可能包含引号和双引号），但它应该删除其中的所有引号。

例如对于以下数据：

```
EmpID  EmpName  CompName
-----  -------  -----------
1234   "xyz"    A's Company 
```

输出应该是：

```
EmpID  EmpName  CompName
-----  -------  -----------
1234   xyz      As Company 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T12:29:44.597

```
SELECT EmpID, 
      EmpName, 
      REPLACE(REPLACE(CompName, '"', ''), '''','') 
  FROM dbo.table; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T12:30:02.420

```
select
    EmpID,
    replace(EmpName, '"', '') as EmpName,
    CompName
from yourTable 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T12:29:35.280

利用sql server的replace功能为你解决问题

[替换（字符串表达式，字符串模式，字符串替换）](http://msdn.microsoft.com/en-us/library/ms186862.aspx)

```
select EmpID,
         replace(replace(EmpName,'"', ''),'''','') Empname, 
          replace(replace(CompName,'"', ''),'''','') CompName 
from table 
```

**笔记：**

通常你会用 '' 替换 ' ，这会让 SQL 在查询数据库时很开心。任何内置 SQL 函数（如替换）的诀窍在于它们也要求您将单引号加倍。

因此，要在代码中将 ' 替换为 '' 你会这样做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:39:36.873

我假设您要替换 EmpName 和 CompName 列中的单引号/双引号。一个简单的替换就可以做到这一点，但你想替换 2 组，所以我将嵌套替换命令。

您可能已经知道这一点，但是单引号需要在您的查询中加倍，以便 sql 不会认为您开始一个字符串。

基本上：

```
Replace(Replace([Column], '"', ''), '''', '')
-- here are the targets    ^         ^^
-- replaced with nothing       ^^         ^^ 
```

因此，您的最终代码可能是：

```
SELECT
  EmpID,
  REPLACE(REPLACE(EmpName, '"', ''), '''',''),
  REPLACE(REPLACE(CompName, '"', ''), '''','')

FROM
  yourTableName 
```

# arrays - IDL 读取多个文件

> ID：11156158
> 
> 赞同：1
> 
> 时间：2012-06-22T12:28:15.543
> 
> 标签：arrays, readfile, idl-programming-language

我对 IDL 比较陌生，我需要实现以下目标：基本上我所要做的就是读取不同的文件并在读取它们时创建不同的数组。

所以我在想这样的事情：

```
files=dialog_pickfile(/multi, filter=filter, path=path, title=title)
n_files=n_elements(files)
for i=0, n_files-1 do begin
openr, lun, /get_lun, files[i]
readf, lun, data 
```

但是此时如何通过跟踪文件的例如名称来创建不同的数组。

例如：

```
arrayfile1(i,j,k)=
arrayfile2(i,j,k)= 
```

等等。

希望这很清楚，最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:51:32.447

这样的事情怎么样？

```
files = dialog_pickfile(/multiple_files, filter=filter, path=path, $
                        title=title)
n_files = n_elements(files)

; check if the user cancels the dialog
if (n_files eq 1 && files[0] eq '') then n_files = 0

full_data = fltarr(nfiles, ni, nj, nk)
data = fltarr(ni, nj, nk)

for i = 0, n_files - 1 do begin
  openr, lun, /get_lun, files[i]
  readf, lun, data
  full_data[i, 0, 0, 0] = data
  free_lun, lun
endfor 
```

您还可以使用列表或哈希来代替大数组。数组更快，但它们必须是连续的内存，因此这可能是一个问题，具体取决于数据大小。

# c# - 消息框中的文本应该是下一行

> ID：11156159
> 
> 赞同：20
> 
> 时间：2012-06-22T12:28:23.543
> 
> 标签：c#, xaml, windows-phone-7.1

基本上我在 WindowPhone 7.1的`MessageBox`with`Ok`和按钮中显示一些文本。`Cancel`

我需要像下面这样的要求。

一些文字会在这里....

适当的价值...

实际上我们可以简单地在 MessageBox 中添加文本，但是如何在 MessageBox 中的文本之间添加换行符。在 Windows Phone 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-22T12:32:24.413

您可以使用 Environment.Newline 换行

```
string msg = "Text here" + Environment.NewLine + "some other text"; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-22T12:40:31.307

```
MessageBox.Show("Line 1" + Environment.NewLine + "Line 2"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T12:31:02.247

你可以试试

\n 或`<br />`换行符。我不确定这是否可行：

例子：

```
string msg = "Some text will be here\nProperty:value";

MessageBox.Show(msg); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T12:33:01.263

```
 MessageBox.Show("aa" + Environment.NewLine + Environment.NewLine + "bb"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-06T17:06:09.037

这是一篇旧帖子，但是...如果您的文本来自资源文件，则建议的解决方案都不起作用。在 VS 资源编辑器中，您必须使用**Shift+Enter**输入新行。所有其他将仅显示为原始文本，例如“\n”或“\r\n”或“<br />”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-02T12:29:31.203

## 有2个选项`\n`和`Environment.NewLine`

选项1：`\n`

我不知道这是否可以在 Windows 手机上确定，但我认为它会

`\n`- 新队。放置尽可能多的句子

```
MessageBox.Show("Some Text Here In The Line NO.1\nSome Text Here In Line NO.2"); 
```

将会呈现：

```
Some Text Here In The Line NO.1
Some Text Here In Line NO.2 
```

或者

```
MessageBox.Show("Some Text Here In The Line NO.1 +"\n" + "Some Text Here In Line NO.2"); 
```

将显示与第一个相同：

```
Some Text Here In The Line NO.1
Some Text Here In Line NO.2 
```

选项 2：`Environment.NewLine`

`Environment.NewLine`- 新队。放置尽可能多的句子

```
MessageBox.Show("Some Text Here In The Line NO.1" + Environment.NewLine + "Some Text Here In Line NO.2"); 
```

将显示与第一个相同：

```
Some Text Here In The Line NO.1
Some Text Here In Line NO.2 
```

来自[msdn.microsoft](https://msdn.microsoft.com/en-us/library/system.environment.newline(v=vs.110).aspx)

> NewLine (Environment.NewLine) 提供的功能通常是术语换行符、换行符、换行符、回车符、CRLF 和行尾的含义。

我更喜欢 \n 因为它更短更快，但无论你喜欢什么。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-03T16:43:52.860

If you have a *very* **very** large message to display, use:

```
MessageBox.Show(String.Join(Environment.NewLine,
                            "Line 1",
                            "Line 2",
                            "Line 3")); 
```

# c++ - C++11 为成员检查 COM 智能指针

> ID：11156162
> 
> 赞同：4
> 
> 时间：2012-06-22T12:28:41.220
> 
> 标签：c++, com, c++11, sfinae

我有一堆类似集合的 COM 接口，我正在尝试为其编写类似 STL 的迭代器。我已经让迭代器工作并专门化`begin()`并`end()`返回我的迭代器。一切正常！除了，当我尝试使用. 时`begin(std::vector)`，它使用的是我非常通用的`begin()`. 由于这些 COM 对象不是从基本集合对象扩展而来，我首先尝试：

```
template< class CollType >
CollectionIterator<CollType> begin( CollType coll ) 
```

我明白为什么重载解决方案不`begin()`适合`std::vector`，但我不知道如何解决这个问题。

不幸的是，我没有一个基础集合类来专门`coll`针对该参数。我假设如果存在合适的成员，我需要像 SFINAE 这样的东西来解决这些专业化问题。我试过：

```
template<
    class CollType,
    typename std::enable_if< std::is_member_pointer< decltype(&CollType::GetItem) >::value >::type
>
CollectionIterator<CollType> begin( CollType coll ) 
```

*（哪里`GetItem`是 的方法`CollType`）*

以及一些变化，无济于事。更糟糕的是，这些集合是 COM 智能指针，所以我不确定是否`GetItem`会真正注册为智能指针的成员。

任何对正确方向的见解都会很棒，我一直在绕圈子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:42:40.557

如果您总是对棘手的集合使用一些特定的 COM 智能指针（例如`_com_ptr_t<T>`），您可以这样定义特`begin()`化：

```
template<class T> your_iterator_type<T> begin(_com_ptr_t<T>& collection) 
```

如果这是不可接受的，请尝试另一种可能的方式（仅当您使用 Visual C++ 并且不关心非标准时） - 使用 Microsoft 特定的扩展 -`__if_exists/__if_not_exists`声明：

```
template<class T> typename T::iterator begin_ex(T& collection)
{
  __if_exists(T::GetItem) {
     return my_collection_begin(collection); // Use custom impl
  }

  __if_not_exists(T::GetItem) {
     return std::begin(collection); // Use standard impl
  }
} 
```

# mysql - 优化子查询选择每组的最后一条记录

> ID：11156163
> 
> 赞同：2
> 
> 时间：2012-06-22T12:28:42.657
> 
> 标签：mysql, optimization, group-by, subquery

我有这个查询，它是一个依赖查询并且需要很多执行时间

```
SELECT
  u.id,
  u.user_name,
  ifnull((select longitude from map where user_id = u.id order by map_id desc limit 1 ),0) as Longitude,
  ifnull((select latitude from map where user_id = u.id order by map_id desc limit 1 ),0) as Longitude,
  (select  created  from map  where user_id = 1  order by created desc   limit 1) as LatestTime
FROM users as u
WHERE id IN(SELECT
          user1_id FROM relation
        WHERE users.id = 1)
ORDER BY id; 
```

我在（依赖）中尝试了这个查询

```
SELECT
  u.id,
  u.user_name,
  m.map_id,
  m.longitude,
  m.latitude,
  m.Date as created
FROM users as u
  left join (select
           map_id,
           longitude,
           latitude,
           user_id,
           max(created) as `Date`
         from map
         group by user_id) as m
    on m.user_id = u.id
WHERE id IN(SELECT
          user1_id FROM relation
        WHERE users.id = 1)
ORDER BY id; 
```

问题是第一个查询是依赖的并且工作正常但需要很多执行时间。对于第二个查询，问题在于它没有获取最新创建的时间。现在我想优化这个查询。主题是在子查询中我首先创建组，然后我试图获取每个组的最后一条记录。这是表格结构。

```
users : id , user_name
map   : map_id ,  user_id ,longitude , latitude, created 
relations : id , user1_id , user2_id , relation 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:12:59.823

在需要性能的地方，`SELECT`子句中的子查询确实很痛苦，必须被淘汰:)

你可以重写这部分：

```
SELECT
    u.id,
    u.user_name,
    ifnull((select longitude from map where user_id = u.id order by map_id desc limit 1 ),0) as Longitude,
    ifnull((select latitude from map where user_id = u.id order by map_id desc limit 1 ),0) as Longitude,
    (select  created  from map  where user_id = 1  order by created desc   limit 1) as LatestTime
FROM users as u 
```

在：

```
SELECT
    u.id,
    u.user_name,
    COALESCE(m1.longitude, 0) as longitude,
    COALESCE(m1.latitude, 0) as latitude
FROM users u
LEFT JOIN map m1 ON m1.user_id = u.id
LEFT JOIN map m2 ON m2.user_id = m1.user_id AND m2.map_id > m1.map_id
WHERE m2.map_id IS NULL 
```

[我在这个答案中](https://stackoverflow.com/questions/11131237/mysql-can-i-do-a-left-join-and-pull-only-one-row-from-the-join-table/11134161#11134161)写了一个关于查询结构的简短解释。这是一个非常好的学习技巧，因为它更具可读性、更少的子查询和更明智的性能。

我还没有看过这`IN`部分，但如果上述内容没有帮助，我会看的。

**Edit1：**您可以提取创建的日期并使用 MAX() 代替。

```
SELECT
    u.id,
    u.user_name,
    COALESCE(m1.longitude, 0) as longitude,
    COALESCE(m1.latitude, 0) as latitude,
    created.LatestTime
FROM (SELECT MAX(created) FROM map WHERE user_id = 1) created
INNER JOIN users u ON TRUE
LEFT JOIN map m1 ON m1.user_id = u.id
LEFT JOIN map m2 ON m2.user_id = m1.user_id AND m2.map_id > m1.map_id
WHERE m2.map_id IS NULL 
```

# algorithm - 合并/连接几何实体

> ID：11156173
> 
> 赞同：0
> 
> 时间：2012-06-22T12:29:19.157
> 
> 标签：algorithm

我有几何实体的容器。假设有圆、椭圆、直线、圆弧。对于每个实体，我可以获得实体端点和实体起点。

实体可以连接，因此实体的端点也可以是另一个实体的端点。

所以我们有实体：起点，终点，id

我想为每个连接的实体分配相同的 ID。

如果三个实体有一个共同点作为连接实体，则应将其视为更长的路径。

最有效的方法是什么？到目前为止，我唯一的想法是遍历整个容器并将每个实体与其他实体签入循环。

我希望问题定义明确并且标签没问题。如果没有，请评论或编辑。我将尝试提供更多详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:32:21.750

对于少数实体：

```
for ( u32 i = 0; i < numEntities; i++ )
{
   for ( u32 j = i+1; j < numEntities; j++ )
   {
       if ( hasCommonEndpoint( entity[i], entity[j] ))
          setSameId( entity[i], entity[j] ) 
   }
} 
```

这缩放为 O(n^2)，因此如果您有大量实体，它会爆炸。它还假设在端点上匹配的实体不会在任何其他端点上匹配。如果发生这种情况，那么您将需要允许实体拥有多个 ID。

请注意，内部循环从 j > i 开始，因此您不会多次比较同一实体。这将把时间缩短一半。

如果您有大量实体，您将需要执行以下操作：

```
HashTable<endpointHash, entity> dict; 
for ( u32 i = 0; i < numEntities; i++ )
{
   dict.insert( entity[i].endpointHash(), entity[i] );
} 
```

其中 HashTable 托管具有具有相同终结点哈希的终结点的所有实体的列表。然后对于每个列表，以与第一个循环相同的方式迭代列表匹配端点的元素。这将在大约 O(n) + O(m^2) 时更好地扩展，其中 N 很大，M 很小。实际性能将取决于散列函数的质量和散列箱的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T23:33:56.813

除了@RafaelBaptista 对端点哈希的建议之外，一个有效的通用解决方案需要一个[不相交集数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)，它解决了为连接的实体组分配单个 ID 的问题。

如链接中所述，有效的不相交集算法是“实际上是线性的”——形式上，它可能比线性慢一点，但对于实际问题的大小，差异在 5 倍以内。

# android - 无法在 android 上的 tabhost 的选项卡中显示数据

> ID：11156177
> 
> 赞同：0
> 
> 时间：2012-06-22T12:29:28.683
> 
> 标签：android, web-services, android-tabhost

我有四项活动，即

*   Demo_tabActivity.java [主要活动]

*   Tabhost.java

下面两个activity是上面tabhost.java的标签

*   Tab_1.java

*   Tab_2.java

第一个活动（`Demo_tabActivity.java`）包含一个编辑文本和按钮。第二个（`Tabhost.java`）活动包含一个 Tabhost 小部件。第三个和第四个活动分别包含文本视图。

第一个活动将通过获取用户的输入来使用 Web 服务，并在选项卡主机（第二个活动）的第一个选项卡（第三个活动）上返回一些数据。

良好的网络服务消费运作良好并完美返回价值，

但是，问题是，它在单独的页面上显示结果，而不是在 tabhost 上显示。

**Demo_tabActivity.java**

```
 public class Demo_tabActivity extends Activity 
 {

private static String NAMESPACE = "http://tempuri.org/";
   private static String METHOD_NAME = "FahrenheitToCelsius";
   private static String SOAP_ACTION = "http://tempuri.org/FahrenheitToCelsius";
   private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

   Button btnFar;
   EditText txtFar;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       btnFar = (Button)findViewById(R.id.button1);

       txtFar = (EditText)findViewById(R.id.editText_in);

       btnFar.setOnClickListener(new View.OnClickListener()
       {
       public void onClick(View v)
       {
           String b;

         //Initialize soap request + add parameters
         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

         //Use this to add parameters
         request.addProperty("Fahrenheit",txtFar.getText().toString());

         //Declare the version of the SOAP request
         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

         envelope.setOutputSoapObject(request);
         envelope.dotNet = true;

         try 
         {
             HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

             //this is the actual part that will call the webservice
             androidHttpTransport.call(SOAP_ACTION, envelope);

             // Get the SoapResult from the envelope body.

             SoapPrimitive result = (SoapPrimitive)envelope.getResponse();

             if(result != null)
             {
              //Get the first property and change the label text

                b = result.toString();
                Intent itnt = new Intent(v.getContext(), Tab_1.class);
                itnt.putExtra("gotonextpage", b.toString());
                startActivity(itnt);
             }
             else
             {
           Toast.makeText(getApplicationContext(), "NoResponse",Toast.LENGTH_SHORT).show();
             }
         }
        catch (Exception e)
        {
           e.printStackTrace();
           }
         }
       });
       } 
```

***注意：我只怀疑上面代码中的 if 条件***

* * *

**Tab_1.java**

```
public class Tab_1 extends Activity 
{
TextView tv;
String result;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main2);

Bundle extras = getIntent().getExtras();
if(extras != null)
{   result = extras.getString("gotonextpage");  }
tv = (TextView)findViewById(R.id.textView_main2);
tv.setText(result);
}} 
```

**Tabhost.java**

```
 public class Tabhost extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    intent = new Intent().setClass(this, Tabhost.class);
    spec = tabHost.newTabSpec("first").setIndicator("First").setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Tab_2.class);
    spec = tabHost.newTabSpec("second").setIndicator("Second").setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:23:31.397

您的问题是因为您没有在 tabhost 中包含 Tab_1 （并且您正在自我引用 TabHost ......不确定这不会导致崩溃......）。

我相信这条线：

```
intent = new Intent().setClass(this, Tabhost.class); 
```

需要更改为此（或添加另一个 TabSpec）：

```
intent = new Intent().setClass(this, Tab_1.class); 
```

# jquery - 用于消费 Spring 3.0 REST Web 服务的 Jquery ajax 跨域策略问题

> ID：11156178
> 
> 赞同：1
> 
> 时间：2012-06-22T12:29:31.307
> 
> 标签：jquery, ajax, web-services, spring, rest

我们已经实现了生成 xml 响应的 web 服务。

我在通过 jquery ajax 调用它时遇到问题。

如果我将相同的文件放在同一个容器中，我会得到正确的响应。这是因为跨域策略。

请建议我如何在 jquery ajax 中使用跨域策略？

我正在使用 tomcat 作为网络服务器。所有的网络服务都部署在这台服务器上。

下面是代码。

```
function doajaxcall() 
{
$.ajax({
    url: "http://localhost:8080/mobile-services/rest/languages/",
    type: "GET",
    processdata: true,
    dataType: "json",
    contentType: "application/json;",
    beforeSend: function () { },
    headers : 
    {
        "Content-Type"  : "application/json",
        "Accept" : "application/json",
        "Access-Control-Allow-Origin":"http://192.168.0.1:8080/"
    },
    success: function (data) 
    {          
        alert('Data..'+data);
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) 
    {
        try 
        {
            alert(JSON.stringify(XMLHttpRequest) + "\n" + textStatus + "\n" + errorThrown);
        }
        catch (ex) { alert("Exception occured.. "); }
        finally { }
    }
}); 
```

}

如果我从标头中的同一容器运行此代码，我将在标头中获得“Access-Control-Allow-Origin”：“http://192.168.0.1:8080/”。

如果我在容器外运行它，我会得到

“访问控制允许来源”：null

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:26:52.587

要解决这个问题。我已将 cors-filter-1.3.1.jar 添加到 webservices/web-inf/lib。目录。

下面是为tomcat启用跨域访问的web.xml文件配置。

```
<filter>
    <filter-name>CORS</filter-name>
    <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>
</filter>

<filter-mapping>
        <filter-name>CORS</filter-name>
        <url-pattern>/*</url-pattern>
</filter-mapping> 
```

将 spring 3.0 webservices 的响应类型从 xml 更改为 JSON。我正在使用以下代码片段从 Web 服务读取 JSON 数据。

```
$.getJSON('http://localhost:8080/mobile-services/rest/languages/',
function(data) 
{
    $("#lang_1").html(data.languages[0].language);
    $("#lang_2").html(data.languages[1].language);
    $("#lang_3").html(data.languages[2].language); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:51:32.437

使用 JSONP（带填充的 JSON）作为跨域请求的数据类型。

例如：

```
(function($) {
var url = 'http://localhost:8080/mobile-services/rest/languages/test.json?callback=?';

  $.ajax({
   type: 'GET',
   url: url,
   async: false,
   jsonpCallback: 'jsonCallback',
   contentType: "application/json",
   dataType: 'jsonp',
   success: function(json) {

   //your code
    },
 error: function(e) {
   console.log(e.message);
 }
 });
 })(jQuery); 
```

# c# - 以编程方式在具有不同架构的不同 sql server 数据库中的表之间复制数据

> ID：11156183
> 
> 赞同：1
> 
> 时间：2012-06-22T12:29:40.363
> 
> 标签：c#, database, ado.net, sql-server-2012

我正在尝试构建一个系统，它获取 SQL Server 数据库中一些相关表的快照，将日期时间元素附加到它并存储在不同的数据库中。因此，新数据库包含不同日期时间的数据快照（导致不同的模式）。

我已经在 Sql Server Management Studio 上使用 t-sql 让它工作了。我可以用 C# 编写查询并在两个数据库之间执行吗？我阅读了有关 ADO.NET 的信息，但找不到建立两个 SQL 连接然后执行传输查询的方法。

有没有更有效的方法来做到这一点？我正在使用 Microsoft SQL Server 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:32:16.423

您应该将查询放在存储过程中。然后从 Management Studio、C# 或任何其他程序/接口调用是微不足道的。一个简单的例子：

```
CREATE PROCEDURE dbo.foo
AS
BEGIN
  SET NOCOUNT ON;

  -- your query
END
GO 
```

然后从 C#（假设存储过程不返回任何结果）：

```
SqlConnection conn = new SqlConnection("Your Connection String");
SqlCommand cmd = new SqlCommand();
cmd.CommandText = "dbo.foo";
cmd.CommandType = CommandType.StoredProcedure;
cmd.Connection = conn;
conn.Open();
cmd.ExecuteNonQuery();
conn.Close(); 
```

这不是一个详尽的代码示例（没有错误处理、处置等），只是提供一个想法。

**编辑**

您应该在两个 SQL Server 实例之间创建一个[链接服务器。](http://msdn.microsoft.com/en-us/library/ms188279.aspx)然后您的查询可以说如下：

```
SELECT * INTO [linkedserver].database.dbo.tablename
  FROM dbo.whatever
  -- WHERE ... ; 
```

这将比将数据拉入 C# 更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:58:55.047

您可能应该开始阅读[有关 ETL 的 Wikipedia 页面](http://en.wikipedia.org/wiki/Extract,_transform,_load)。

另外，如果你想[在纯 C# 中执行 ETL](http://www.codeproject.com/Articles/34556/Write-ETL-jobs-in-pure-C)，你可以看看[Rhino ETL 之](http://hibernatingrhinos.com/open-source/rhino-etl)类的东西。

# html - 为什么网格 960 使用相对位置？

> ID：11156192
> 
> 赞同：0
> 
> 时间：2012-06-22T12:30:03.820
> 
> 标签：html, css, position, z-index

我在布局中使用网格 960。grid_1、grid_2 等 css 类有 position: relative; 在他们中。这会导致 ie7 中的 z-index 出现问题。作为一个例子，看看这个小提琴：

[http://jsfiddle.net/GX4tS/6/](http://jsfiddle.net/GX4tS/6/)

如果您取消注释位置：relative; 在#content div 中，您会看到它在ie7 中中断。

所以我想知道为什么 grid 960 会为这些 css 类使用相对位置。如果我删除它，除了 ie7 修复之外，它似乎没有任何效果。

有没有人知道他们为什么放置这个位置：relative; 在？

干杯

# sql - SQL替换数据库中的所有值，无论列和表

> ID：11156194
> 
> 赞同：2
> 
> 时间：2012-06-22T12:30:12.617
> 
> 标签：sql, replace

我正在尝试更改与其列名或表无关的特定值。

例如它可以出现在：

```
column `name` in the table `users` 
```

而且在：

```
column `hi` in the table `jokes` 
```

还有很多不为人知的地方。如何对数据库中的所有 sql 数据运行循环来更改它？

我正在使用 PHPMyAdmin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:23:42.447

正如你所说的 PHPMyAdmin 我想你正在使用 MySQL。

看：

*   [在 mysql 数据库中搜索所有出现的字符串](https://stackoverflow.com/q/562457/44522)
*   或[在整个 mysql 数据库中查找和替换](https://stackoverflow.com/q/4822638/44522)。

还有一个 PHP 脚本可以做到这一点：

*   [在整个 MySQL 数据库中搜索和替换文本](http://www.mjdigital.co.uk/blog/search-and-replace-text-in-whole-mysql-database/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T10:01:00.610

对于 SQL server 2000：我写了这个脚本

```
-- full search and replace version sql server 2000
SET NOCOUNT ON

DECLARE @columnname varchar(255), @tablename varchar(255), @sql varchar(8000), @oldvalue varchar(1000), @newvalue varchar(1000)

SET @oldvalue = 'OldText' -- text to replace
SET @newvalue = 'NewText'  -- text to replace by

DECLARE table_cursor CURSOR FOR
select name from sysobjects where xtype='U' AND [name] LIKE 'MyTablePrefix_%' -- your table prefix
OPEN table_cursor

FETCH NEXT FROM table_cursor
INTO @tablename

WHILE @@FETCH_STATUS = 0
BEGIN

PRINT 'Updating Table: ' + @tablename + '...'

DECLARE column_cursor CURSOR FOR
SELECT     syscolumns.name AS column_name
FROM         sysobjects INNER JOIN
                      syscolumns ON sysobjects.id = syscolumns.id INNER JOIN
                      systypes ON syscolumns.xtype = systypes.xtype
WHERE     (sysobjects.xtype = 'U')
AND       systypes.[name] IN ('varchar','nvarchar','text','ntext')
AND       sysobjects.name =  @tablename
ORDER BY sysobjects.name, syscolumns.colid

OPEN column_cursor
FETCH NEXT FROM column_cursor INTO @columnname

WHILE @@FETCH_STATUS = 0
BEGIN

PRINT 'Updating Column: ' + @columnname + '...'

SET @SQL = 'UPDATE ' + @tablename
SET @SQL = @SQL + ' SET ' + @columnname + ' = Replace(CAST(' + @columnname + ' AS nvarchar(4000)),'''+ @oldvalue + ''',''' + @newvalue + ''')'
--PRINT @sql
EXECUTE(@SQL)

FETCH NEXT FROM column_cursor INTO @columnname
END

CLOSE column_cursor
DEALLOCATE column_cursor

FETCH NEXT FROM table_cursor
INTO @tablename

END
CLOSE table_cursor
DEALLOCATE table_cursor 
```

在夜间运行它，因为在大中型数据库上运行需要相当长的时间......

# asp.net - 使用 png 而不是 aspx 代码

> ID：11156195
> 
> 赞同：1
> 
> 时间：2012-06-22T12:30:19.030
> 
> 标签：asp.net

当我把这段代码

```
<asp:LoginStatus ID="LoginStatus1" runat="server" style="top: 170px; left: 890px;
 position: absolute;" Font-Names="verdana" ForeColor="Black" Font-Size="13px" /> 
```

它在我的网页上显示一个带下划线的注销对象，当我单击它时，它显然将我注销。

是否有可能使用我创建的.png 图像，当单击它时会做同样的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:38:55.007

尝试使用`LoginImageUrl`和`LogoutImageUrl`属性

例如...

```
<asp:LoginStatus ID="LoginStatus1" runat="server" LoginImageUrl="~/login.png" LogoutImageUrl="~/logout.png" ... /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:39:52.577

您可以将 ImageButton 添加到您的页面并调用单击处理程序`FormsAuthentication.SignOut`。

```
protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
{
    FormsAuthentication.SignOut();
} 
```

# c# - WP7中的墓碑

> ID：11156197
> 
> 赞同：0
> 
> 时间：2012-06-22T12:30:27.257
> 
> 标签：c#, silverlight, windows-phone-7, tombstoning

我想在我的 WP7 应用程序中实现墓碑，这个应用程序不是基于 MVVM 模式。任何人都可以向我推荐任何好的例子来实现它。所以我可以使用一些通用类来维护我的应用程序的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:00:14.330

这里有一些链接可以很好地解释它：

这个很好地解释了您必须管理的不同状态，包括暂停和墓碑之间的区别。 [http://lnluis.wordpress.com/2011/09/25/fast-application-switching-in-windows-phone/](http://lnluis.wordpress.com/2011/09/25/fast-application-switching-in-windows-phone/)

Shawn Wildermuth 非常好，并在此视频中向您展示了如何实现。 [http://vimeo.com/14311977](http://vimeo.com/14311977)

这是一篇博客文章，详细解释了 [http://xna-uk.net/blogs/darkgenesis/archive/2010/11/08/there-and-back-again-a-tombstoning-tale-the-return-of -the-application.aspx](http://xna-uk.net/blogs/darkgenesis/archive/2010/11/08/there-and-back-again-a-tombstoning-tale-the-return-of-the-application.aspx)

这个来自 Windows Phone 开发者博客： http: [//windowsteamblog.com/windows_phone/b/wpdev/archive/2010/07/15/understanding-the-windows-phone-application-execution-model-tombstoning-launcher -and-choosers-and-few-more-things-that-are-on-the-way-part-1.aspx](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2010/07/15/understanding-the-windows-phone-application-execution-model-tombstoning-launcher-and-choosers-and-few-more-things-that-are-on-the-way-part-1.aspx)

基本上，当您想要墓碑时，您需要使用 Application_Deactivated 事件将您的变量存储在隔离存储中，并使用 Application_Activated 事件来检索它们。随着 Mango（去年秋天）的出现，您应该在 Application_Activated 中进行测试，以查看应用程序是否处于挂起状态。

```
if (!e.IsApplicationInstancePreserved)
  {
    //do stuff to restore from tombstoned
  } 
```

编辑添加另一个例子：也许这个额外的简单例子会对你有所帮助。 [http://dotnet-redzone.blogspot.com/2010/09/windows-phone-7-scrollbar-position.html](http://dotnet-redzone.blogspot.com/2010/09/windows-phone-7-scrollbar-position.html)

```
protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)   
{   
    base.OnNavigatedFrom(e);   
    // Remember scroll offset   
    try   
        {   
            ScrollViewer viewer = ((VisualTreeHelper.GetChild(listBox, 0) as FrameworkElement).FindName("ScrollViewer") as ScrollViewer);   
            State["scrollOffset"] = viewer.VerticalOffset;  
        }  
    catch { }  
}  

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)  
{  
    base.OnNavigatedTo(e);  
    object offset;  
    // Return scroll offset  
    if (State.TryGetValue("scrollOffset", out offset))  
        listBox.Loaded += delegate  
        {
            try  
            {  
                ScrollViewer viewer = ((VisualTreeHelper.GetChild(listBox, 0) as FrameworkElement).FindName("ScrollViewer") as ScrollViewer);  
                viewer.ScrollToVerticalOffset((double)offset);  
            }  
            catch { }  
        };  
} 
```

# java - 如果列名不同，则一对多休眠连接

> ID：11156199
> 
> 赞同：6
> 
> 时间：2012-06-22T12:30:37.077
> 
> 标签：java, hibernate, annotations, hibernate-mapping

我有三个具有以下结构的表 -

合同 -> contract_id(primary), customer_company_id, Vendor_company_id

公司 -> Company_id（主要），creation_date，created_by

Company_Timeline -> Timeline_id（主要）、Company_id、Company_name。

并为这些表提供以下类 -

```
Contract.java

@Table(name = "CONTRACT")
@Entity
@SequenceGenerator(name = "ContractSeq", sequenceName = "SEQCONTRACT", allocationSize = 1)
public class Contract implements Serializable {

    private static final long serialVersionUID = 1L;

    /*
     * General Tab
     */
    @Id
    @Column(name = "CONTRACT_ID")
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "ContractSeq")
    private Integer id;

    /*
     * Customer Company Info
     */

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "CUSTOMER_COMPANY_ID", nullable = true ,insertable = false,updatable = false)
    @ForeignKey(name = "FK_CONTRACT_CUSTOMER_COMPANY_ID")
    private Company customerCompany;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "VENDOR_COMPANY_ID", nullable = true ,insertable = false,updatable = false)
    @ForeignKey(name = "FK_CONTRACT_CVENDOR_COMPANY_ID")
    private Company vendorCompany;

    //What mapping should i do to get CUSTOMER_COMPANY_ID Timeline list here

    //What mapping should i do to get vendor_COMPANY_ID Timeline list here

}

Company.java

@Entity
@Table(name = "COMPANY")
@SequenceGenerator(name="CompanySeq", sequenceName="SEQ_COMPANY", allocationSize=1)
public class Company implements Serializable {

    private static final long serialVersionUID = 1L;

    /*
     * Customer Company Details 
     */

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "CompanySeq")
    @Column(name = "COMPANY_ID")
    private Integer id;

    @Column(name="CREATION_DATE")
    @Temporal(value=TemporalType.TIMESTAMP)
    private Date creationDate;

    @Column(name="CREATED_BY")
    private String createdBy;

    @OneToMany(fetch = FetchType.LAZY, orphanRemoval=true)
    @Cascade({org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN})
    @JoinColumn(name = "COMPANY_ID",nullable=false)
    @OrderBy(clause = "AS_OFF_DATE" )
    @ForeignKey(name = "PF_COMPANY_TIMELINE")     
    private List<CompanyTimeline> companyTimeline = new ArrayList<CompanyTimeline>();
}

CompanyTimeline.java

@Entity
@Table( name = "COMPANY_TIMELINE")
@SequenceGenerator(name = "CompanyTimelineSeq", sequenceName = "COMPANY_TIMELINE_SEQUENCE")
public class CompanyTimeline {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "CompanyTimelineSeq")
    @Column(name = "COMPANY_EVENT_ID")
    private Integer eventId;

    @ManyToOne(fetch= FetchType.EAGER)
    @JoinColumn(name = "COMPANY_ID", updatable = false, insertable = false, nullable=false)
    @ForeignKey(name = "FK_COMPANY_ID", inverseName = "COMPANY_ID")
    private Company company;
} 
```

现在我想在合同表中进行映射（一对多）以获取 customer_company 和 vendor_company 时间表。

但由于连接列名称不同，合同表的列名称为 CUSTOMER_COMPANY_ID、VENDOR_COMPANY_ID，但 CompanyTimeline 类的列名称为 COMPANY_ID。

我有点困惑如何在 Contract.java 中制作这个连接映射。

**编辑 ：**

我想在`contract.customer_company_id = timeline.company_id`. 就像是..

```
@OneToMany(fetch = FetchType.EAGER)
@JoinColumn(name="COMPANY_ID", referencedColumnName="CUSTOMER_COMPANY_ID")
@Where(clause="to_date(SIGNING_DATE, 'DD-Mon-YY') >= (CASE WHEN event_start_date is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else event_start_date END) AND to_date(SIGNING_DATE, 'DD-Mon-YY') <= (CASE WHEN event_end_date is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else event_end_date END)")
private List<CompanyTimelineView> customerCompanyTimelineView = new ArrayList<CompanyTimelineView>(); 
```

这就是我想在 contract.java 中做的事情，这样我就可以直接获得时间线对象而无需急切的公司。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T12:38:05.240

您可以指定参考列名称

```
@JoinColumn(name="userlastname_fk", referencedColumnName="lastName") 
```

请参阅 Hibernate 文档 [1] 第 2.2.3.2.1 节

[1] [http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:38:59.120

列的名称无关紧要。合同与供应商公司有关联，与客户公司有关联。该公司与其时间线有关联。所以你不需要更多的东西。如果您想要合同供应商公司的时间线，只需致电

```
contract.getVendorCompany().getTimeLines(); 
```

旁注：您在 Company 和 CompanyTimeLine 之间的双向 OneToMany 是错误的。它应该是：

```
@OneToMany(fetch = FetchType.LAZY, orphanRemoval=true, mappedBy = "company")
@Cascade({org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN})
@OrderBy(clause = "AS_OFF_DATE" )
private List<CompanyTimeline> companyTimeline = new ArrayList<CompanyTimeline>(); 
```

# maps - 使用 geoxml3 和 markerclusterer 解析 KML 文件

> ID：11156204
> 
> 赞同：1
> 
> 时间：2012-06-22T12:30:48.627
> 
> 标签：maps, geoxml3

我正在使用 geoxml3 和 markerclusterer 将 kml 文件解析为 google maps api v3 地图。到目前为止，这有效。

kml 文件存储了一些信息。

```
<Placemark>
   <name>Manfred Mustermann</name>
   <description>Manfred Mustermann</description>
   <Point>
      <coordinates>7.0964850607874,51.781641735074,0</coordinates>
   </Point>
   <address>Musterstr. 29 Aachen, 52070 Nordrhein-Westfalen</address>
   <styleUrl>#0</styleUrl>
</Placemark> 
```

它可以输出节点“名称”或“描述”，但不能输出“地址”。如果我尝试使用 place mark.address 输出此内容，则未定义将写入信息窗口。

我的问题是，我怎样才能解析这个地址信息？

这是我的代码：

```
$(document).ready(function(){
var myOptions = {
      zoom: 3,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var mcOptions = {gridSize: 80, maxZoom: 15};
    markers = [];

    var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);
    markerclusterer  = new MarkerClusterer(map, [], mcOptions);
    var infoWindow = new google.maps.InfoWindow({maxWidth:800});

    var myParser = new geoXML3.parser({
    map: map, 
    singleInfoWindow:true,

    createMarker:function(placemark){
            var point = new google.maps.LatLng(placemark.point.lat, placemark.point.lng);
            var con = "<pre>" + placemark.description + "<br /><br />" + placemark.address + "</pre>";
            var marker = new google.maps.Marker({position:point});
            markers.push(marker);

            google.maps.event.addListener(marker, "click", function(){
                infoWindow.content = con;
                infoWindow.open(map, marker);
            });
           markerclusterer.addMarker(marker);
    }
});
    myParser.parse('dat.kml');
  });

  function clickMarker(i){
         google.maps.event.trigger(markers[i], "click");
  } 
```

非常感谢！

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:42:31.517

修改“geoxml3.js”文件。在 'var render = function (responseXML, doc)' 中，placemark 定义为：

```
placemark = {
      name:  geoXML3.nodeValue(node.getElementsByTagName('name')[0]),
      description: geoXML3.nodeValue(node.getElementsByTagName('description')[0]),
styleUrl: geoXML3.nodeValue(node.getElementsByTagName('styleUrl')[0])
}; 
```

更改它以添加：

```
address: geoXML3.nodeValue(node.getElementsByTagName('address')[0]) 
```

请记住，向 KML 添加地址标签不在 KML 标准中。最好使用 ExtendedData [https://developers.google.com/kml/documentation/extendeddata#entityreplacement](https://developers.google.com/kml/documentation/extendeddata#entityreplacement)之类的标签。

# javascript - JavaScript：相同的代码需要不同的时间来执行

> ID：11156206
> 
> 赞同：3
> 
> 时间：2012-06-22T12:30:53.153
> 
> 标签：javascript, google-chrome, execute

首先我运行它（在 chrome 中）：

```
var start;
var end;

start = (new Date()).getTime();

for(var i=0;i<10e5;i++);

end = (new Date()).getTime();

console.log('delay:' + (end-start)); 
```

输出： 然后我运行这个：**`delay:2028`**

```
function foo() {
    var start;
    var end;

    start = (new Date()).getTime();

    for(var i=0;i<10e5;i++);

    end = (new Date()).getTime();

    console.log('delay:' + (end-start));
}

foo(); 
```

输出：**`delay:8`**

为什么将相同的代码包装在函数中时花费的时间更短？

*在节点中它花费了相同的时间（6和6），但是节点使用chrome的V8引擎不是吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:34:32.010

因为在函数中你所有的变量都在闭包中。没有函数 JavaScript 解释器首先尝试在全局范围内查找您的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:24:34.967

我认为这种行为只出现在控制台中的事实非常有说服力。我怀疑这与 V8 引擎如何将脚本缩减为原生代码有关。

**第 1 点：**我怀疑范围*不是*放缓的原因：

```
function foo() {
    start = (new Date()).getTime();
    for(i=0;i<10e5;i++);
    end = (new Date()).getTime();
    console.log('delay:' + (end-start));
} 
```

此代码在全局范围内使用`start`、`end`和。`i`如果在全局范围内搜索确实是瓶颈，那么这段代码也应该运行缓慢，因为它在函数中没有局部变量。

**第 2 点：**如果您将代码放在实际网页中，无论哪种方式，它都会运行得非常快。这向我表明，*在控制台中运行代码*是减速的根源。

通常，在网页上，V8 引擎将 JavaScript 组装成原生二进制代码，因此运行速度非常快。但是，我怀疑从控制台运行的代码没有编译（或者可能在运行时逐行编译，这本身会产生时间成本）。但是，当输入*函数定义*时，函数会在第一次运行之前完整编译。当程序流到达`foo()`调用时，该函数`foo`已经编译为本机代码。因此该函数运行很快，因为它已经被预编译，但是控制台中的原始代码没有被预编译，所以它运行很慢。

**这在很大程度上是猜测**，但对这个问题的每个答案也是如此。这是我能想到的唯一解释，它解释了上面的第 1 点和第 2 点。

# git - 错误：克隆一个裸 git 存储库

> ID：11156211
> 
> 赞同：0
> 
> 时间：2012-06-22T12:31:04.870
> 
> 标签：git, dropbox, git-bare

我尝试创建一个新的裸 git 存储库，但出现此错误：

```
Max:Git-Projekte max$ git clone --bare . ~/Dropbox/Git-Projekte/Mainpage.git
Cloning into bare repository '/Users/max/Dropbox/Git-Projekte/Mainpage'...
fatal: failed to open '/Users/max/Dropbox/Git-Projekte/./objects': No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:40:09.557

我不确定您是否以正确的方式使用该命令：

git-clone 的人 说：

“将存储库克隆到新创建的目录中”

命令是：

```
git clone [--template=<template_directory>]
      [-l] [-s] [--no-hardlinks] [-q] [-n] [--bare] [--mirror]
      [-o <name>] [-b <name>] [-u <upload-pack>] [--reference <repository>]
      [--depth <depth>] [--recursive] [--] <repository> [<directory>] 
```

所以也许你应该：

```
git clone --bare ~/Dropbox/Git-Projekte/Mainpage.git . 
```

?

# red5 - Red5 演示不工作

> ID：11156222
> 
> 赞同：1
> 
> 时间：2012-06-22T12:31:44.720
> 
> 标签：red5

*我在[这里](https://stackoverflow.com/questions/10819597/red5-demos-dont-work)检查了类似的问题，但这并没有解决我的问题。*

我最近成功安装了适用于 Windows/Java 7 的 Red5 1.0 RC3 版本。但我无法安装演示。它返回以下调试消息：

```
主机：本地主机
尝试连接
网络状态：NetConnection.Connect.Success
得到服务器java版本：1.6
拿到申请清单
异步错误：[AsyncErrorEvent type="asyncError" bubbles=false cancelable=false eventPhase=2 text="Error #2095" error=ArgumentError: Error #1063]
收到警报：未安装应用程序 oflaDemo

```

以下是我的环境变量列表：

```
声明 -x ANT_HOME="C:\\Program Files\\WinAnt"
声明 -x CLASSPATH=".;C:\\Program Files\\Java\\jre7\\lib\\ext\\QTJava.zip.;C:\\Program Files\\Java\\jdk1.7.0_04\\ lib;C:\\Program Files\\Java\\jdk1.7.0_04\\lib\\tools.jar;C:\\Program Files\\Java\\jdk1.7.0_04\\lib\\dt.jar"
声明 -x JAVA_HOME="C:\\Program Files\\Java\\jdk1.7.0_04"
声明 -x PATH="/c/Users/anks/bin:.:/usr/local/bin:/mingw/bin:/bin:/c/WINDOWS/system32:/c/WINDOWS:/c/WINDOWS/System32 /Wbem:/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/c/Program Files/QuickTime/QTSystem/:/c/MinGW/bin:/c/Python27:/c/Python27/Scripts:/c/程序文件/Java/jdk1.7.0_04/bin:/c/Program Files/WinAnt/bin:/c/Program Files/Mint/bin"

```

它列出了 Java 版本 6，但我安装了 7。我是否需要安装 Java 6 才能让演示工作？

还是 Windows 上的文件权限有问题？我试图将属性对话框中的 Red5/webapps 目录完全控制给当前用户，但这并没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T05:27:32.827

事实证明，这些演示不适用于我的 Java 7。降级到 Java 6 和 Red5 0.9.1。[从这里](http://red5.googlecode.com/svn/snapshots/)手动安装了演示，它现在可以工作了。（不知何故安装程序不起作用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:43:17.163

我体验过这两个示例安装了最新的 Red5 1.0、windows env、java1.7.x（java 1.7.0_5 是我的 java 版本）。

如果您使用 Windows 安装程序，您需要添加最新的 red5 和 java 7 缺少的注册表项

如果您从最新的 svn trunk 构建和运行服务器，请使用 ant&ivy 构建和运行服务器，您可以安装两个示例应用程序（oflaDemo 和 SOSample）。

我不知道这两个示例安装了最新的 Red5 1.0、windows env、java1.7.x（java 1.7.0_5 是我的 java 版本）。

如果您使用 Windows 安装程序，您需要添加最新的 red5 和 java 7 缺少的注册表项。

环境：windows，java7

D:\Red5Trunk\server>javac -version javac 1.7.0_05

D:\Red5Trunk\server>java -version java version "1.7.0_05" Java(TM) SE Runtime Environment (build 1.7.0_05-b06) Java HotSpot(TM) Client VM (build 23.1-b03，混合模式，共享)

D:\Red5Trunk\服务器

D:\Red5Trunk\server>ant ivyclear dist（即使在获得了正确的环境和来自主干的最新源之后，如果您的构建失败，此命令将很有用） D:\Red5Trunk\server>ant server

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T13:42:48.077

哇，已经有一段时间了，但我想补充一点，如果您在 Windows 7 或 8 下，您需要以管理员用户身份启动 red5 服务，否则 Windows 将限制某些功能，这将是地狱。有时真的很难意识到发生了什么。

来自古巴的问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T18:15:01.390

java6 表示法是“最低”版本，它们将与 java7 一起使用。我最近使用较新版本检查修复了一些以前的安装程序问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-26T09:57:30.113

Red5 可以有效地与 64 位机器的 Java 1.6 版本配合使用。

# java - 查询的 FROM 子句具有类 XXX 但没有别名

> ID：11156224
> 
> 赞同：7
> 
> 时间：2012-06-22T12:31:52.447
> 
> 标签：java, jpa

在我的 GAE 项目中，我从 JPA 1.0 开始，这段代码运行良好：

```
 Query query = em.createQuery("SELECT FROM MyImage " +
                                 "WHERE m_Email = :email " +
                                 "And m_Password = :password ", MyImage.class);
    query.setParameter("email", email);
    query.setParameter("password", password); 
```

但是现在我使用 JPA 2.0 我得到了：

```
FROM clause of query has class util.MyImage but no alias
org.datanucleus.store.query.QueryCompilerSyntaxException: FROM clause of query has class util.MyImage but no alias
at org.datanucleus.query.compiler.JavaQueryCompiler.compileFrom(JavaQueryCompiler.java:233)
at org.datanucleus.query.compiler.JPQLCompiler.compile(JPQLCompiler.java:79)
at org.datanucleus.store.query.AbstractJPQLQuery.compileInternal(AbstractJPQLQuery.java:269)
at org.datanucleus.store.query.Query.setImplicitParameter(Query.java:825)
at org.datanucleus.api.jpa.JPAQuery.setParameter(JPAQuery.java:458)
at org.datanucleus.api.jpa.JPAQuery.setParameter(JPAQuery.java:57)
at dataBase.DataBase.getMyImageFromDB(DataBase.java:173) 
```

我设法让它与 CriteriaQuery 一起工作，但代码不可读且有点混乱。

知道如何解决此异常吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T12:36:10.017

我认为你需要为你的类定义一个别名，如下所示：

```
Query query = em.createQuery("SELECT i FROM MyImage i " + 
                             "WHERE i.m_Email = :email " + 
                             "And i.m_Password = :password ", MyImage.class); 
```

# c# - 数据表的实体列表

> ID：11156226
> 
> 赞同：11
> 
> 时间：2012-06-22T12:31:58.443
> 
> 标签：c#, .net-4.0, datatable

我有一个实体列表，其中包含一些作为其他实体的字段。

例如。

```
MyEntity
Int id
ContactEntity Contact -> contactId, Name etc…
AddressEntity Address 
```

所以我有`List< MyEntity>`哪些需要转换为数据表。但是从子实体中，我只想选择一个字段。

有可能还是我有其他选择。

**更新**

当我按照 ivowiblo 的描述尝试***CopyToDataTable()时，它给了我以下错误***

```
 The type 'AnonymousType#1' cannot be used as type parameter 'T' in the generic type or
 method 'System.Data.DataTableExtensions.CopyToDataTable<T>(System.Collections.Generic.IEnumerable<T>)'.
 There is no implicit reference conversion from 'AnonymousType#1' to 'System.Data.DataRow'. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-22T12:38:07.673

在[http://msdn.microsoft.com/en-us/library/bb669096.aspx](http://msdn.microsoft.com/en-us/library/bb669096.aspx)中，他们解释了如何实现一个`CopyToDataTable()`不需要类型为 DataRow 的方法来处理例如实体。

只需创建一个返回所需架构的查询并使用`CopyToDataTable()`方法：

```
var table = entities.Select(x => new {
                                       x.Id,
                                       Contact = x.Contact.Name,
                                       Address = x.Address.Address
                                      }).CopyToDataTable(); 
```

此解决方案的唯一问题是它使用反射并且可能会影响性能，具体取决于应用程序的负载。如果您需要避免反射，您将需要创建一个从您的实体显式创建 DataTable 的方法：

```
var table = new DataTable();

table.Columns.Add("Id", typeof(int))
table.Columns.Add("Contact", typeof(string))
table.Columns.Add("Address", typeof(string))

foreach(var entity in entities) {
    var row = table.NewRow();
    row["Id"] = entity.Id;
    row["Contact"] = entity.Contact.Name;
    row["Address"] = entity.Address.Address;
    table.Rows.Add(row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:36:55.283

试试这段代码（使用 CopyToDataTable 函数）：

```
var query = ....
DataTable dataTable = query.CopyToDataTable(); 
```

# javascript - Snake javascript，上下移动，使块大于5px

> ID：11156227
> 
> 赞同：1
> 
> 时间：2012-06-22T12:32:08.667
> 
> 标签：javascript, jquery

这是 jsfiddle 示例 - [http://jsfiddle.net/6bKHc/120/](http://jsfiddle.net/6bKHc/120/)和代码 -

```
 var move, inter;
    inter = setInterval(move = function() {
        var dir = $(".snake").data('dir');
        var snake = $('.snake');
        var food = $('.food');
        if(dir == 'top') {
            snake.css({"top": snake.position().top + 5 + "px"});
            if(snake.width() > 5) {
                snake.css({"width": snake.width() - 5 + "px", "height": snake.height() + 5 + "px"});   
            }
        }
        if(dir == 'bottom') {
            snake.css({"top": snake.position().top - 5 + "px"});
            if(snake.width() > 5) {
                snake.css({"width": snake.width() - 5 + "px", "height": snake.height() + 5 + "px"});   
            }            
        }
        if(dir == 'left') {
            snake.css({"left": snake.position().left + 5 + "px"});
            if(snake.height() > 5) {
                snake.css({"width": snake.width() + 5 + "px", "height": snake.height() - 5 + "px"});   
            }            
        }
        if(dir == 'right') {
            snake.css({"left": snake.position().left - 5 + "px"});
            if(snake.height() > 5) {
                snake.css({"width": snake.width() + 5 + "px", "height": snake.height() - 5 + "px"});   
            }              
        }
        var snakePosition = snake.position();
        var foodPosition = food.position();
        var randomNum = Math.ceil(Math.random()*40);
        var randomNumber = randomNum*5;
        console.log(snakePosition.top + " - snake top + left - " + snakePosition.left);
        console.log(foodPosition.top + " - snake top + left - " + foodPosition.left);        
        if(snakePosition.top == foodPosition.top && snakePosition.left == foodPosition.left) {
            console.log(randomNumber);
            snake.css({"width": snake.width() + 55 + "px"});   
            food.css({"left": randomNumber+1+"px", "top": randomNumber+1+"px"});            
        }
    }, 200);
$(document).keydown(function(event){
    if(event.which == 40) {
        $(".snake").data('dir','top');
    } else if(event.which == 39) {
        $(".snake").data('dir','left');           
    } else if(event.which == 37) {
        $(".snake").data('dir','right');        
    } else if(event.which == 38) {
        $(".snake").data('dir','bottom');    
    };     
});​ 
```

当蛇变大时，它会自动使块也变大，我的意思是当你向下移动时，它不会在一侧停留 5px。我不知道如何描述它，但只要开始游戏并尝试吃食物然后移动，你就会明白我的意思。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:43:28.287

所以，我猜你想在这里做一个诺基亚风格的蛇游戏，你不能用一个 Div 来做，因为它只能是一个矩形；您将不得不使用一个 Div 数组（如果您想使用您在此处使用的方法）并在循环中一个一个地更新它们的位置。

如果您还没有弄清楚，我会在下班后添加一个代码示例。

**编辑：：**

好的，我对你的代码做了一些修改，所以你的蛇现在有了尾巴，完整的代码如下（解释如下）：

```
 var move, inter;
    var snakeBody= [];

    // Main Loop
    inter = setInterval(move = function() {
        var dir = $(".snake").data('dir');
        var snake = $('.snake');
        var food = $('.food');

        // Update body segment positions
        for (bodySeg=snakeBody.length-1;bodySeg>=0;bodySeg--){
            var lastsegment;
            if (bodySeg==0) {lastsegment=snake;} else {lastsegment=snakeBody[bodySeg-1];}

            snakeBody[bodySeg].css({"top": lastsegment.position().top});
            snakeBody[bodySeg].css({"left": lastsegment.position().left});                
        }

        // update head of the snake, depending on last pressed key
        if(dir == 'top') {
            snake.css({"top": snake.position().top + 5 + "px"});
        } 
        if(dir == 'bottom') {
            snake.css({"top": snake.position().top - 5 + "px"});          
        }
        if(dir == 'left') {
            snake.css({"left": snake.position().left + 5 + "px"});           
        }
        if(dir == 'right') {
            snake.css({"left": snake.position().left - 5 + "px"});             
        }

        // Handle Head of snake touching food
        var snakePosition = snake.position();
        var foodPosition = food.position();
        var randomNum = Math.ceil(Math.random()*40);
        var randomNumber = randomNum*5;       
        if(snakePosition.top == foodPosition.top && snakePosition.left == foodPosition.left) {
            var index = snakeBody.length;
            $("#content").append("<div id='snakebody"+index+"' class='snakebodycss'></div>");
            snakeBody[index]=$("#snakebody"+index);
            food.css({"left": randomNumber+1+"px", "top": randomNumber+1+"px"});            
        }
    }, 200);
// update last pressed key
$(document).keydown(function(event){
    if(event.which == 40) {
        $(".snake").data('dir','top');
    } else if(event.which == 39) {
        $(".snake").data('dir','left');           
    } else if(event.which == 37) {
        $(".snake").data('dir','right');        
    } else if(event.which == 38) {
        $(".snake").data('dir','bottom');    
    } else if(event.which == 13) {
        console.log(snakeBody)
    }        
});​ 
```

Html 没有改变：

```
<div id="content">
 <div class="snake">
 </div>
 <div class="food">
 </div>
</div>​ 
```

我为身体部分添加了另一个 css 类：

```
#content {
  width: 200px;
  height: 200px;
  border: 1px solid #000;
  float: left;    
}

#content .snake {
  background: green;
  width: 5px;
  height: 5px;
  display: inline;
  position: absolute;  
  z-index: 10;
}

#content .snakebodycss {
  background: red;
  width: 5px;
  height: 5px;
  display: inline;
  position: absolute;  
  z-index: 10;
}

#content .food {
  width: 5px;
  height: 5px;
  background: orange;  
  position: absolute;    
} 
```

* * *

说明：

​</p>

好的，也许这会有所帮助，我已经修改了你的代码，所以它现在有一个名为的数组`snakeBody[]`，如果你查看新的 for 循环，它会跟踪蛇中的新段：

```
 // This for loop will run through the snakeBody array backwards, from the highest index to 0
   // This is to allow us to set each segment to the location of the next closest to the head 
   // each loop
   for (bodySeg=snakeBody.length-1;bodySeg>=0;bodySeg--){
        //We need a reference the the previous segment to set the one we are currently inspecting
        // It will either be another segment or the head of the snake
        var lastsegment;
        if (bodySeg==0) {lastsegment=snake;} else {lastsegment=snakeBody[bodySeg-1];}

        snakeBody[bodySeg].css({"top": lastsegment.position().top});
        snakeBody[bodySeg].css({"left": lastsegment.position().left});                
    } 
```

这就是将每个循环的尾部位置更新到下一个位置的原因。

```
 if(snakePosition.top == foodPosition.top && snakePosition.left == foodPosition.left) {
        // Here we get the top position (unoccupied) of our snake body array
        var index = snakeBody.length;
        // Here we are adding a new div to the content div, with a unique id (snakevody0)
        // (snakebody1) etc etc 
        $("#content").append("<div id='snakebody"+index+"' class='snakebodycss'></div>");
        // Here we are populating the array we use in the above for loop with refrences
        // to our snake segment divs.
        snakeBody[index]=$("#snakebody"+index);
        food.css({"left": randomNumber+1+"px", "top": randomNumber+1+"px"});            
    } 
```

这就是将 bodysegnts 附加到 DOM 并将它们的引用存储在数组中以供以后使用。

如果您对此有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:40:22.500

解决方案并不简单。当它改变方向时，您不应该改变蛇的高度和宽度，您需要创建第二条蛇尾，随着您增加第一条蛇尾的长度，它的尺寸会减小。所以如果你向左走，你按下，创建一个新的蛇尾，它大一个单位，向下移动，然后将旧尾巴减少 1 个单位，向下增加一个单位，向下增加一个单位，然后将旧尾巴宽度减少一个单位ETC...

这个过程可能需要跟踪几个单独的尾巴部分，你可以在你的蛇的一个长度内多次改变方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:40:26.967

我假设您的问题是“为什么我的蛇看起来不像其他蛇相关游戏中的普通蛇？”。要制作一条蛇，它不能只有一个位置（snakePosition）。一条蛇通常由几个部分组成。您将如何跟踪蛇弯曲的位置？

# javascript - 保存选项卡选择

> ID：11156229
> 
> 赞同：2
> 
> 时间：2012-06-22T12:32:12.310
> 
> 标签：javascript, twitter-bootstrap

我喜欢[Twitter Bootstrap](http://twitter.github.com/bootstrap/javascript.html#tabs)中的选项卡，但是如何保存选项卡选择以便它为用户保留？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T12:37:38.610

您可以将选项卡保存在 localStorage 中：

```
$('a[data-toggle="tab"]').on('shown', function (e) {
   localStorage['selectedTab']=$(e.target).attr('href');
}) 
```

并稍后恢复它

```
var selectedTab = localStorage['selectedTab'];
if (selectedTab) $('#myTab a[href="'+selectedTab+'"]').tab('show'); 
```

# ms-access - 在列级别恢复正确/小写的功能

> ID：11156243
> 
> 赞同：1
> 
> 时间：2012-06-22T12:32:58.090
> 
> 标签：ms-access, vba

我数据库中的所有文本字段值都已转换为大写。我想逐列将某些文本条目恢复为小写或正确的大小写。

我想到的伪代码是这样的：

```
for each entry in column x of recordset y
entry = strconv(entry,3)
end 
```

这会更容易我可以简单地在设计视图中单击我的表并更改属性，但我看不到这样的任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:39:01.923

尝试：

```
SELECT Table1.atext, 
       UCase(Left([atext],1)) & LCase(Mid([atext],2)) AS SConv
FROM Table1; 
```

UPDATE 查询 BACKUP FIRST

```
UPDATE Table1 SET atext = UCase(Left([atext],1)) & LCase(Mid([atext],2)) 
WHERE AText Is Not Null 
```

笔记

在这种情况下，似乎在表格中添加了一个强制大写的[格式。](http://msdn.microsoft.com/en-us/library/aa159684%28v=office.10%29.aspx)在大多数情况下，我认为应该避免使用表格中的格式。它们更适合查询和表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:48:03.910

**第 1 步**：Access 中没有 Proper() 函数，但 Excel 中有一个。因此，通过在 VBE 中引用 Excel 并创建一个函数来使用它：

```
Function fProper(x As Variant)
    fProper = Excel.WorksheetFunction.proper(Nz(x))
End Function 
```

**第 2 步**：通过创建与此类似的更新查询来更新您的数据：

```
UPDATE Clients SET CompanyName = fProper([companyname]); 
```

一旦成功，如果需要，您可以开始编码以自动化“每个”部分。

# jquery - 在当前选定的 jQuery-UI 选项卡中使用 jQuery-Selector

> ID：11156249
> 
> 赞同：0
> 
> 时间：2012-06-22T12:33:09.377
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我目前正在使用 jQuery-Tabs 来模拟多窗口输入掩码。因此选项卡是可变的，并且允许用户添加和删除它们，并且这些选项卡中的内容始终是相同的输入表单。

现在我需要通过 jQuery 选择其中一些字段。问题是，我需要找出当前选择了哪个选项卡并在选择器中使用此信息。

有没有办法识别当前选定的选项卡并在 jQuery 选择器中使用此信息，以便我可以操作正确的字段？

遍历选项卡并检查诸如“隐藏”之类的属性并不是一个真正的选择，因为它会显着降低应用程序的速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:39:55.517

让我们说你有标签容器`#myTabs`

您可以使用获取所选 div 的 id

```
var id = $("li.ui-tabs-selected a", "#myTabs").attr("href"); // has # as part of the href
$(".myformelement", id).val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:36:58.243

写这样的东西：

```
var activeTab=0;

$(function(){
    $( ".selector" ).tabs({
       select: function(event, ui) { activeTab=ui.index; }
    });
}); 
```

`activeTab`并在任何你想要的地方使用变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:39:11.367

查找名为“ui-state-active”的类，这将帮助您找到活动选项卡

# php - 评级暂时不可用 - FEDEX 出现错误

> ID：11156258
> 
> 赞同：0
> 
> 时间：2012-06-22T12:33:49.783
> 
> 标签：php, soap, fedex

我正在我的项目中通过 php 中的 SOAP webservice 集成 FEDEX。但现在我在过去 2 天收到此错误。此错误是否由于 FEDEX 或编码/数据中的任何其他错误而发生？以下是我在使用 FEDEX Webservice 时得到的响应。

**处理事务返回错误**

**严重性：失败**

**来源：crs**

**代码：7**

**消息：评分暂时不可用，请稍后再试。**

**LocalizedMessage：评级暂时不可用，请稍后再试。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T05:53:52.423

像 tribulant 提到的尝试使用生产凭据。我确实对测试服务器有同样的问题，并且能够通过生产凭据解决它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:59:16.320

在这里使用测试凭据也有同样的问题。我想知道问题是什么，他们是否会解决它。

看起来实时/生产服务器在线并且正在工作（如果您有生产凭据）。SOAP 的 URL 应该是[https://ws.fedex.com:443/web-services/rate](https://ws.fedex.com:443/web-services/rate)（注意“wsbeta”改为“ws”）

# python - 如何使用 python grep 大文件中两个模式之间的行

> ID：11156259
> 
> 赞同：2
> 
> 时间：2012-06-22T12:33:52.413
> 
> 标签：python, grep, lines

我有一个很大的文件，像这样：

```
[图案1]
第1行
线2
第 3 行
...
...
[结束模式]
[模式2]
第1行
线2
...
...
[结束模式]

```

我需要在另一个文件中提取变量起始模式 [PATTERN1] 和另一个定义模式 [END PATTERN] 之间的行，仅用于某些特定的起始模式。
例如：

```
[模式2]
第1行
线2
...
...
[结束模式]

```

我已经使用以下代码使用较小的文件做同样的事情：

```
FILE=open('myfile').readlines()

newfile=[]
for n in name_list:
    A = FILE[[s for s,name in enumerate(FILE) if n in name][0]:]
    B = A[:[e+1 for e,end in enumerate(A) if 'END PATTERN' in end][0]]
    newfile.append(B) 
```

其中 'name_list' 是一个包含我需要的特定启动模式的列表。

有用！！但我想有更好的方法来处理大文件，而不使用 .readlines() 命令。
任何人都可以帮助我吗？

多谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:51:19.523

考虑：

```
# hi
# there
# begin
# need
# this
# stuff
# end
# skip
# this

with open(__file__) as fp:
    for line in iter(fp.readline, '# begin\n'):
        pass
    for line in iter(fp.readline, '# end\n'):
        print line 
```

打印“需要这个东西”

更灵活（例如允许重新模式匹配）是使用 itertools drop- and takewhile：

```
with open(__file__) as fp:
    result = list(itertools.takewhile(lambda x: 'end' not in x, 
        itertools.dropwhile(lambda x: 'begin' not in x, fp))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T12:51:37.620

使用类似的东西

```
import re

START_PATTERN = '^START-PATTERN$'
END_PATTERN = '^END-PATTERN$'

with open('myfile') as file:
    match = False
    newfile = None

    for line in file:
        if re.match(START_PATTERN, line):
            match = True
            newfile = open('my_new_file.txt', 'w')
            continue
        elif re.match(END_PATTERN, line):
            match = False
            newfile.close()
            continue
        elif match:
            newfile.write(line)
            newfile.write('\n') 
```

这将迭代文件而不将其全部读入内存。它还直接写入您的新文件，而不是附加到内存中的列表。如果您的来源足够大，那也可能成为问题。

显然，您可能需要对此代码进行大量修改；可能不需要正则表达式模式来匹配开始/结束行，在这种情况下，将其替换为`if 'xyz' in line`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:58:01.593

我是一个新的 python 程序员，所以我几乎不理解你的解决方案，但似乎有很多不必要的迭代正在进行。首先你读入文件，然后对文件中的每个项目迭代一次`name_list`。另外，我不知道您是否打算`newfile`稍后进行迭代以将其实际写入文件。

这就是我的做法，尽管我意识到这不是看起来最像 Python 的解决方案。不过，您只会对文件进行一次迭代。（作为免责声明，我没有对此进行测试。）

```
patterns = {'startPattern1':"endPattern1", 'startPattern2':"endPattern2", 'startPattern3':"endPattern3"}

fileIn = open(filenameIn, 'r')
fileOut = open(filenameOut, 'w')
targetEndPattern = None

for line in fileIn:
   if targetEndPattern is not None:
       if line == targetEndPattern:
           targetEndPattern = None
       else:
           fileOut.write(line + "\n")
   elif line in patterns:
       targetEndPattern = patterns[line] 
```

编辑：如果您期望模式按特定顺序排列，则必须修改此解决方案。我在假设模式的顺序无关紧要但每个开始模式都匹配特定的结束模式的假设下编写了这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T12:44:38.093

我认为这与您的代码所做的相同：

```
FILE=open('myfile').readlines()

newfile=[]

pattern = None
for line in FILE:
    if line[0] == "[" and line[-1] == "]":
        pattern = line[1:-1]
        if pattern == "END PATTERN":
            pattern = None
        continue
    elif pattern is not None and pattern in name_list:
        newfile.append(line) 
```

这样，您只需遍历所有行一次，并在您进行时填写您的列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T16:22:56.470

我会选择基于生成器的解决方案

```
#!/usr/bin/env python    
start_patterns = ('PATTERN1', 'PATTERN2')
end_patterns = ('END PATTERN')

def section_with_bounds(gen):
  section_in_play = False
  for line in gen:
    if line.startswith(start_patterns):
      section_in_play = True
    if section_in_play:
      yield line
    if line.startswith(end_patterns):
      section_in_play = False

with open("text.t2") as f:
  gen = section_with_bounds(f)
  for line in gen:
    print line 
```

# jquery - 点击这个或那个，然后做某事

> ID：11156260
> 
> 赞同：14
> 
> 时间：2012-06-22T12:33:59.810
> 
> 标签：jquery, selector

我想标题是不言自明的。

当用户单击覆盖或链接时，我想关闭 div。我知道你可以像这样写两个函数：

```
$("#close-search").click(function() {
    $("#branding #searchform").fadeOut("fast");
    $("#global-overlay").fadeOut("fast");
});

$("#global-overlay").click(function() {
    $(this).fadeOut("fast");
    $("#branding #searchform").fadeOut("fast");
}); 
```

或者您可以编写一个函数，如下所示：

```
function closeSearch {
    $(this).fadeOut("fast");
    $("#branding #searchform").fadeOut("fast");
}

$("#close-search").click(function() {
    closeSearch();
});

$("#global-overlay").click(function() {
    closeSearch();
}); 
```

我试过这个，但它没有用。

```
$("#close-search", "#global-overlay").click(function() {
        $("#branding #searchform").fadeOut("fast");
        $("#global-overlay").fadeOut("fast");
    }); 
```

但是有可能把它写在一行中吗？（有点像`$("#close-search" OR #global-overlay")`）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-22T12:34:46.120

逗号分隔的意思是这个或那个

```
$("#close-search, #global-overlay") 
```

多重[选择器](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T12:35:15.083

试试这个

```
$("#close-search, #global-overlay").click(function() {
      $("#branding #searchform").fadeOut("fast");
      $("#global-overlay").fadeOut("fast");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:36:10.233

未经测试：

试试这个：

```
$("#close-search, #global-overlay").click(function() {
        $("#branding #searchform").fadeOut("fast");
        $("#global-overlay").fadeOut("fast");
    }); 
```

请注意，选择器中的字符串不会像数组一样拆分，而是 - Sizzle 选择器会为您执行此操作。

# .net-4.0 - 使用 Yui.Compressor 的 msbuild 失败

> ID：11156262
> 
> 赞同：1
> 
> 时间：2012-06-22T12:34:14.820
> 
> 标签：.net-4.0, msbuild, visual-studio-2012, yui-compressor

我尝试使用 msbuild 使用 yui.compressor.net 压缩我的 js 和 css 文件。

[在http://yuicompressor.codeplex.com/](http://yuicompressor.codeplex.com/)上尝试了示例，但我无法让它运行。

我越来越 ：

> D:\Inetpub\SitecoreDev 2012\Website\MSBuild\Deploy.xml(63,5)：错误 MSB4062：无法从程序集 D:\Inetpub\SitecoreDev 2012\Website\MSBuild\Yahoo 加载“CompressorTask”任务。 Yui.Comp ressor.Build.MsBuild.dll。覆盖成员时违反了继承安全规则：“Yahoo.Yui.Compressor.Build.MsBuild.CompressorTask.Execute()”。覆盖方法的安全可访问性必须与被覆盖方法的安全可访问性相匹配。确认声明正确，程序集及其所有依赖项都可用，并且任务包含实现 Microsoft.Build.Framework.ITask 的公共类。

我试图在 Windows 8 rc 上的 VS2012 上使用 msbuild。

# javascript - Facebook 登录弹出窗口在 IE 9 中被阻止

> ID：11156271
> 
> 赞同：1
> 
> 时间：2012-06-22T12:34:50.787
> 
> 标签：javascript, facebook, internet-explorer, login, facebook-login

我有这个按钮：

```
<img src="static/img/facebook_button.png" id="login-fb" onclick="login();" /> 
```

我也有这个脚本：

```
window.fbAsyncInit = function(){
    FB.init({
        appId : 'MY_APP_ID',
        status : true,
        cookie : true,
        xfbml : false
    });
}; 
```

最后，我有这个功能：

```
function login()
{
    facebookPerms = [
        'user_photos', 'email', 'offline_access', 'user_relationships', 'read_stream',
        'user_about_me', 'user_birthday', 'user_education_history', //'publish_stream',
        'user_hometown', 'user_interests', 'user_location', 'user_likes',
        'user_religion_politics', 'user_activities', 'user_work_history'
    ];
    //Get the facebook login status
    FB.getLoginStatus(function(response) {
        if (response.session) {
            // logged in and connected user, someone you know
            ajaxLogin();
        } else {
            //Display the facebook login dialog
            FB.login(function(response) {
                if (response.authResponse) {
                    // user is logged in and granted some permissions.
                    // perms is a comma separated list of granted permissions
                    ajaxLogin();
                } else {
                    // user is not logged in, display the error dialog box
                    errorNotLogged();
                }
            }, {
                //Ask for permissions of Facebook
                scope: facebookPerms.join(',')
            });
        }
    });
} 
```

我遵循这条 Facebook 规则：

> 调用 FB.login 会导致 JS SDK 尝试打开一个弹出窗口。因此，该方法只能在用户点击事件后调用，否则弹出窗口将被大多数浏览器阻止。

而且我的网站仍然在 IE9 中被阻止其 Facebook 弹出窗口。任何想法如何解决这个问题？任何想法其他人如何在不阻止他们的脚本的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:50:37.297

尝试以下操作：

*   获取用户登录状态。
*   如果用户未登录，则显示登录按钮。
*   单击时直接调用 FB.login 函数。

在您的实现中，FB.login 不会在用户交互之后直接调用，而是作为 FB.getLoginStatus 回调函数的一部分。我猜这会导致 IE 阻止弹出窗口。

# linux - 使用 Jenkins 的嵌入式 Linux 开发模型

> ID：11156272
> 
> 赞同：12
> 
> 时间：2012-06-22T12:34:54.897
> 
> 标签：linux, build, embedded, continuous-integration, jenkins

我是一个从事嵌入式 linux 项目的小团队（4-5 人）的一员。我们正在使用 Buildroot 和 Linaro 工具链来构建我们的目标。我们使用 git 进行版本控制，使用 Jenkins 进行夜间构建。

这是我们第一次参与这样的项目，我一直未能找到任何描述这种环境下开发模型的资源。

现在，在每晚构建之后，我创建了 Buildroot“输出”目录的 tarball，其中包含 u-boot 映像和根文件系统。这可以直接从 Jenkins 的“存档”页面下载，以获取最后一次成功的构建。

我们中的一些人将从事较低级别的开发，而一些人将从事用户空间开发（QT）。我们的问题是决定什么是最有效/最精简的方法是在这样的环境中开发，因为人们将在项目范围内的不同领域工作。用户区的人可以下载包含所有内容的 tarball 并将他们的应用程序合并到 rfs 中以在板上运行和调试，但是我们应该如何处理在较低级别开发中完成的工作？基本上，我们应该如何将工件分配给团队？我非常感谢任何想法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T08:01:28.487

我最近花了一些时间为一个基于 OpenEmbedded 的 linux 项目重构构建环境。我对 Buildroot 没有直接经验，但我希望 OpenEmbedded 与您使用的足够相似。我将描述我的设置，如果幸运的话，您会在这里找到一些有用的东西......

## 问题

三个软件组件可以单独安装（即相互独立）：bootloader（u-boot）；内核（Linux）；和文件系统映像。我们的最终产品随附这三个组件的打包版本。也就是说，一个版本的 u-boot、linux 和文件系统映像已经过 QA 测试并且已知可以一起工作。但是，可以独立升级任何一个组件（例如安装新的内核映像）以创建尚未一起测试的软件组件的组合。

用户空间应用程序也存在这个问题。一旦文件系统映像安装到目标中，就可以独立于其他文件系统对象更新一个或多个用户空间二进制文件（假设您的文件系统不是只读的）。你怎么知道现在安装的用户空间应用程序的具体组合可以一起工作？我如何确定在这个特定单元中运行的二进制文件组合与经过 QA 认证的二进制文件组合相同？我怎么知道软件的“版本”是什么？

我需要解决的另一个问题，与您在问题中概述的问题相同，是如何让开发人员在软件堆栈的不同部分（内核、根文件系统、用户空间 Qt 应用程序等）上协同工作？

## 一个办法

我通过以下方式解决了这个问题和“版本”问题：

1.  将 rootfs 和 sysroot 存储在 git 存储库中。
2.  自由使用 git 子模块。

将目标的根文件系统和系统根文件存储在 git 存储库中最初让我犯了错误（将输出文件存储在版本控制中，什么！？！）但它提供了以下优点：

1.  一个 JFFS2 文件系统映像（rootfs + 我们的自定义用户空间应用程序）可以构建，只要它需要构建用户空间应用程序（即数十秒）。不再需要开发人员首先从头开始构建 rootfs（使用 OpenEmbedded 需要几个小时）。
2.  版本控制的所有其他优点（随着时间的推移可以轻松跟踪对 rootfs 的更改、发布标签、分支等）。
3.  我最初考虑将 rootfs 和 sysroot 存储为 tarball，但我喜欢 git 在每个文件的基础上跟踪更改的想法。

目录结构看起来像这样（一些名称已更改以保护无辜者）：

```
\---proj [*]             # Name of your project
    +---u-boot [*]
    +---linux [*]
    +---toolchain [*]
    \---fs [*]           # Filesystem stuff.
        +---oe [*]       # OpenEmbedded.
        +---qt [*]       # Qt framework.
        +---apps [*]     # Custom user-space applications.
        \---bin [*]      # Revision controlled binaries
            +---rootfs   # Target root filesystem, output of OpenEmbedded.
            \---sysroot  # System root, output of OpenEmbedded (headers, etc). 
```

每个星号目录 [*] 是一个 git 存储库，每个 git 存储库是其父级的子模块。

构建环境是从一个顶级 Makefile 初始化的，该 Makefile 基本上执行递归`git submodule init`和`git submodule update`. 所有开发人员都会这样做：

```
$ git clone git@your.url:proj proj
$ cd proj
$ make git-init 
```

然后，用户空间开发人员可以立即构建：

```
$ make --directory proj/fs/apps all       # Build apps
$ make --directory proj/fs install        # Create JFFS2 image 
```

文件系统维护者可以更新 rootfs：

```
$ cd proj/fs/oe
$ # Modify build recipes and other OpenEmbedded black magic stuff.
$ make
$ # Go make coffee while oe builds every package on the planet.
$ cd proj/bin    # OE writes output files here.
$ git commit     # Commit latest rootfs and sysroot. 
```

### 软件版本控制

从顶层 makefile ( `proj/Makefile`) 可以构建所有软件组件（内核、u-boot、文件系统映像）。使用以下 git 命令，makefile 向所有子 make 进程导出一个`VER_TAG`描述当前软件版本的单个环境变量（例如 ）。版本是来自 git 存储库的标签或 SHA（例如`v1.0`，`471087ec254e8e353bb46c533823fc4ece3485b4`或`471087ec254e8e353bb46c533823fc4ece3485b4-modified`）。

```
git rev-parse HEAD                 # Get current SHA
git status --porcelain | wc -c     # Is working copy modified?
git describe --exact-match HEAD    # Is the working copy a tag? 
```

如果任何项目子目录中的单个文件已被修改，那么`VER_TAG`将始终为`xxxx-modified`. 然后，这个单一`VER_TAG`变量作为编译时常量传递给所有构建（u-boot、内核、用户空间应用程序等）。

在运行时，自定义用户空间应用程序会累积`VER_TAG`来自所有组件的值，如果它们都报告相同的值，则该字符串将成为产品报告的正式版本。如果即使一个`VER_TAG`值与其他值不同，那么软件堆栈也不是从相同的顶级 SHA 构建的，并且不能发布到野外（用于测试的 QA，用于制造的生产等）。

如果软件组件不是从顶级 makefile（例如`make --directory proj/fs/apps all`）构建的，则`VER_TAG`该组件的 将未定义，并且生成的软件堆栈“仅供内部使用”。也就是说，所有软件组件的“发布”只能通过从顶级makefile构建。

作为参考，linux`VER_TAG`通过 procfs 中的自定义文件报告，u-boot 通过 linux 命令行 ( `/proc/cmdline`) 报告，每个用户空间应用程序通过进程间通信进行报告。

## 概括

一个警告。我一个月前才开发了这个构建环境，所以不能声称它的健壮性，但现在它似乎保持在一起......

如果您有需要澄清的具体问题或要点，我很乐意更新我的答案。

# c# - 避免用户代码调用 C# 中的反射

> ID：11156274
> 
> 赞同：13
> 
> 时间：2012-06-22T12:34:56.953
> 
> 标签：c#, reflection, code-security

我正在为我目前正在教授的课程实施一个自动“评估器”。总体思路是每个学生都提供一个实现了一些算法的 DLL。我的评估器使用反射加载所有这些 DLL，找到学生实现并在比赛中评估它们。所有这些算法都是黑盒优化器，它们实现了以下接口

```
public interface IContinuousMetaheuristic
{
    // ... Some unimportant properties
    Vector Evaluate(Function function, int maxEvaluations, ...);
} 
```

`Function`（至少相关部分）的类定义是：

```
public class Function:
{
    private Vector xopt; // The optimum point
    private double fopt; // The optimum value

    public double Evaluate(Vector x);
} 
```

如您所见，我需要将一个`Function`实例传递给这些元启发式。这些功能都是我自己实现的。它们中的大多数在某种意义上是随机的，即我在函数构造函数中选择了一个随机的最佳点。这就是为什么你可以`xopt`在类中看到一个字段。问题是，我不希望我的学生能够通过反射或任何其他技术访问`xopt`or`fopt`字段，因为那将是作弊，或者至少，找出他们是否这样做，以便我可以相应地惩罚他们；） .

所以，一般的问题是：有没有办法在我动态加载的一段代码中禁止使用反射，或者在任何其他意义上禁止这段代码访问私有字段（作弊）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:05:14.853

他们会给你源代码吗？编写一个单独的工具来查找“使用 System.Reflection”和“System.Reflection”。在源头。如果他们想出一个巧妙的技巧来避免这种情况，也许他们应该通过作弊获得额外的分数。:)

另外，在他们使用的代码中如何处理：

```
private double FakeOptimumPointWithAConvincingName{ get { return 12.07; } } 
```

然后在运行评估器时将其更改为：

```
private double FakeOptimumPointWithAConvincingName{ get { throw new SomeoneCheatedException(); } } 
```

沿着这条线还有很多其他聪明的事情要做。关键是您可以使用技巧而不是技术来阻止它们。如果他们想出更好的技巧，那就太棒了。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:53:52.240

简短的回答是，只要调用者完全信任，直到 .Net 4.0（有关如何创建高达 .Net.3.5 的沙盒应用程序，[请参阅此](http://msdn.microsoft.com/en-us/library/bb384237%28v=vs.90%29.aspx)内容），您无法避免私有或内部方法的反射发现。

对于 .Net 4，您是否阅读过 MSDN 上[.Net 4.0 反射的安全注意事项？](http://msdn.microsoft.com/en-us/library/stfy7tfc%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:12:00.147

如果您在需要它们的那一刻从配置文件中加载最佳值，那么在此之前很难反映它们

# javascript - 基于密码在javascript中生成RSA密钥对

> ID：11156275
> 
> 赞同：14
> 
> 时间：2012-06-22T12:35:10.020
> 
> 标签：javascript, security, cryptography, rsa, key-generator

据我了解，RSA 密钥通常是基于（强）随机生成器生成的。

相反，我想根据密码创建它们。

或者更确切地说，在它的哈希上，例如 sha512(sha512(password+salt)+password+pepper)

这需要在客户端用 JavaScript 完成。

有人知道该怎么做吗？是否有一个简单的 JavaScript 库可以根据给定的输入确定性地创建 RSA 密钥对？

（实际上，我提到了 RSA，但任何安全的非对称加密就足够了，我只需要公私加密）

* * *

另外：我需要这个，因为我正在构建一些安全的通信解决方案，不需要依赖连接甚至服务器来保证安全。

我正在使用随机密钥使用 AES 加密所有内容，并且密钥是 RSA 加密的。这个想法是 Alice 可以用 Bob 的公钥对她的内容（或者实际上是她的内容的 AES 密钥）进行 RSA 加密（因此 Bob 的公钥必须在线存储）。

稍后，当 Bob 再次输入他的密码时，他的浏览器可以确定性地当场计算他的 RSA 私钥和公钥，从 Alice 那里下载内容，并使用他的私钥在本地解密。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T12:03:31.267

当您将密码作为 RNG 的种子时，看起来[Cryptico可以帮助您。](https://github.com/phpmycoder/cryptico-node)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-06-23T13:16:33.027

## 2020 年浏览器/客户端年度答案：

如果您想在客户端使用 TypeScript 的 RSA 加密（例如在浏览器或 Ionic 混合应用程序中），请执行以下操作：

*   `npm i cryptico-js --save`
*   在您的 TypeScript (v3.4+) 代码中使用下一个导入：`import * as cryptico from 'cryptico-js/dist/cryptico.browser.js';`
*   之后，您可以使用`cryptico`此处描述的所有方法：[https ://www.npmjs.com/package/cryptico](https://www.npmjs.com/package/cryptico)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-08T00:45:36.433

我无法评论我的标点符号，但除了他所说的 +Eugene_Mayevski_'EldoS

对于纯 JavaScript：[https ://www.npmjs.com/package/cryptico](https://www.npmjs.com/package/cryptico)

对于 nodejs：[https](https://www.npmjs.com/package/cryptico) ://www.npmjs.com/package/cryptico你需要：

```
npm install cryptico 
```

并添加这一行：

```
var cryptico = require("cryptico"); 
```

创建对象：

```
function cryptoObj(passPhrase)
{
   this.bits = 1024; //2048;
   this.passPhrase = passPhrase;
   this.rsaKey = cryptico.generateRSAKey(this.passPhrase,this.bits);
   this.rsaPublicKey = cryptico.publicKeyString(this.rsaKey);

   this.encrypt = function(message){
     var result = cryptico.encrypt(message,this.rsaPublicKey);
     return result.cipher;
   };

   this.decrypt = function(message){
     var result = cryptico.decrypt(message, this.rsaKey);
     return result.plaintext;
   };
}

console.log('---------------------------------------------------------');
var localEncryptor = new cryptoObj("XXyour secret txt or number hereXX");

var encryptedMessage = localEncryptor.encrypt('new message or json code here');
var decryptedMessage = localEncryptor.decrypt(encryptedMessage);

console.log('');
console.log('>>> Encrypted Message: '+encryptedMessage);
console.log('');
console.log('>>> Decrypted Message: '+decryptedMessage); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T15:06:59.000

RSA 密钥不只是像大多数对称算法那样的随机位，它们是从大素数派生的指数和模数。因此，我看不出有任何合理的方式可以从密码中生成它们。请参阅[此维基百科文章](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Key_generation)。

你用这些密钥对做什么？为什么它们必须从密码派生？如果您想使用密码来加密某些东西，您可以使用 SHA256（密码）来派生 AES256 密钥。（如果你打算这样做，请务必阅读[关键强化）。](http://en.wikipedia.org/wiki/Key_stretching)

# thrust - 推力占位符：如何访问成员变量

> ID：11156278
> 
> 赞同：2
> 
> 时间：2012-06-22T12:35:14.483
> 
> 标签：thrust

在推力排序或过滤调用中使用占位符作为函子时，如何访问成员变量？例如以下

```
thrust::remove_if(ms.begin(), ms.end(), _1.fInf > global_min) 
```

产生错误 `"thrust::detail::functional::actor<thrust::detail::functional::argument<0U>>" has no member "fInf"`

我将如何使用 lambda 函数编写它？我有一个带有 operator() 的工作结构函子，我只是在寻找一种更优雅的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:14:09.787

不幸的是，您不能通过占位符访问参数成员。占位符表达式用于算术。

如果您需要访问参数的成员，则需要使用用户定义的函子。如果您的编译器支持，您也可以使用 lambda 表达式。

# jquery - k2.pl 中使用了哪些 jQuery 插件？

> ID：11156286
> 
> 赞同：0
> 
> 时间：2012-06-22T12:35:48.517
> 
> 标签：jquery, hover, drag

[我正在寻找正确的 jQuery 插件，用于在本网站http://www.k2.pl/#!/en/main/](http://www.k2.pl/#!/en/main/)的主页中执行可拖动滑块？

我刚刚尝试用这个[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)来做到这一点，但这并不是真正的成功......

提前感谢您的所有想法！

亚历克西斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:50:42.413

你可以从这里开始：

```
<script src="//code.jquery.com/jquery-1.7.2.min.js"></script>
<script>window.jQuery || document.write('<script src="/static/front/js/libs/jquery-1.7.2.min.js"><\/script>')</script>

<script src="/static/front/js/libs/jquery.easing.1.3.js"></script>
<script src="/static/front/js/libs/jquery.jscrollpane.min.js"></script>
<script src="/static/front/js/libs/jquery.fancybox.min.js"></script>
<script src="/static/front/js/libs/swfobject.js"></script>
<script src="/static/front/js/libs/sammy-0.7.1.min.js"></script>
<script src="/static/front/js/plugins.js"></script>
<script src="/static/front/js/script.min.js"></script> 
```

# php - 如何明智地对照片库脚本日期进行排序

> ID：11156291
> 
> 赞同：0
> 
> 时间：2012-06-22T12:35:59.333
> 
> 标签：php, sorting, photo, photo-gallery

我正在使用以下代码从文件夹生成照片库。我怎样才能明智地对缩略图日期进行排序。

```
<?php

        /* settings */
        $image_dir = 'photo_gallery/';
        $per_column = 6;

        /* step one:  read directory, make array of files */
        if ($handle = opendir($image_dir)) {
            while (false !== ($file = readdir($handle))) 
            {
                if ($file != '.' && $file != '..') 
                {
                    if(strstr($file,'-thumb'))
                    {
                        $files[] = $file;
                    }
                }
            }
            closedir($handle);
        }

        /* step two: loop through, format gallery */
        if(count($files))
        {

            foreach($files as $file)
            {
                $count++;
                echo '<a class="photo-link" rel="one-big-group" href="',$image_dir,str_replace('-thumb','',$file),'"><img src="',$image_dir,$file,'" width="100" height="100" /></a>';
                if($count % $per_column == 0) { echo '<div class="clear"></div>'; }
            }
        }
        else
        {
            echo '<p>There are no images in this gallery.</p>';
        }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:00:34.873

要直接解决您的问题，在您阅读文件的目录时，您可以使用一些本机 php 函数获取有关文件的信息......

上次访问文件的时间：fileatime - [http://www.php.net/manual/en/function.fileatime.php](http://www.php.net/manual/en/function.fileatime.php)

创建文件时：filectime - [http://www.php.net/manual/en/function.filectime.php](http://www.php.net/manual/en/function.filectime.php)

修改文件时：filemtime - [http://php.net/manual/en/function.filemtime.php](http://php.net/manual/en/function.filemtime.php)

这些返回时间，格式为 unix 时间。

为简单起见，我将使用 filectime 来查找时间，并将该值用作 $files 数组中的 KEY，如下所示： $files[filectime($file)] = $file;

然后，在开始第二步之前，您可以使用简单的数组排序函数（如 ksort()）在循环外对它们进行排序。

现在......再深入一点......我可能会使用数据库来存储这样的信息，而不是每次加载页面时都访问文件系统。在开发过程中会增加一些开销，但根据目录的大小，可以为您节省大量时间和处理能力。

测试 2012-06-23

```
 `/* settings */
    $image_dir = 'photo_gallery/';
    $per_column = 6;

    /* step one:  read directory, make array of files */
    if ($handle = opendir($image_dir)) {
        while (false !== ($file = readdir($handle))) 
        {
            if ($file != '.' && $file != '..') 
            {
                if(strstr($file,'-thumb'))
                {
                    $files[filemtime($image_dir . $file)] = $file;
                }
            }
        }
        closedir($handle);
    }

    /* step two: loop through, format gallery */
    if(count($files))
    {
        krsort($files);

        foreach($files as $file)
        {
            $count++;
            echo '<a class="photo-link" rel="one-big-group" href="',$image_dir,str_replace('-thumb','',$file),'"><img src="',$image_dir,$file,'" width="100" height="100" /></a>';
            if($count % $per_column == 0) { echo '<div class="clear"></div>'; }
        }
    }
    else
    {
        echo '<p>There are no images in this gallery.</p>';
    }

?>` 
```

# ios - 验证 uialertview 中的文本字段

> ID：11156298
> 
> 赞同：3
> 
> 时间：2012-06-22T12:36:13.210
> 
> 标签：ios, xcode, validation, textfield, alertview

我`UIAlertView`以`UIAlertViewStylePlainTextInput`风格展示。然后我尝试验证这样的空字段：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

    if (buttonIndex == 1) {
        if ([[alertView textFieldAtIndex:0].text length] > 0 ||
            [alertView textFieldAtIndex:0].text != nil ||
            [[alertView textFieldAtIndex:0].text isEqual:@""] == FALSE)
        {
            NSLog(@"error");
        }
        else
        {
            [self postToServer];
        }
    } else {
        //close alertview
    }
} 
```

但即使文本字段不为空，它也会在日志中显示一条错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:38:44.663

这是因为您的`if`声明包含

```
[[alertView textFieldAtIndex:0].text length] > 0 
```

这意味着如果有文本，那么`NSLog(@"error");` 您的 if 应该是：

```
if ((![alertView textFieldAtIndex:0].text) || [[alertView textFieldAtIndex:0].text isEqual:@""])
{
      NSLog("error");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:39:05.550

您可以使用以下

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

    if (buttonIndex == 1) {
        NSString *text = [alertView textFieldAtIndex:0].text;

        if([text isEqualToString:@""])
        {
            NSLog(@"empty");
        }
        else {
            NSLog(@"Not empty");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:40:13.160

首先你有你的 NSLog(@"error"); 如果文本字段的长度大于 0，则在代码区域中为真。这似乎与你想要的相反！！！

试试这个：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if (buttonIndex == 1){
        if ([[alertView textFieldAtIndex:0].text length] > 0 ||                   
            [[alertView textFieldAtIndex:0].text isEqual:@""] == FALSE){
            [self postToServer];
        }else{
            NSLog(@"error");
        }
    }else{
        //close alertview
    }
} 
```

在这个 if 语句中，您可能不需要大于零的长度，但是如果您以某种方式期待不可见的字符，那么保留它可能是可以的！！！

# java - 连接 modelica 模型和 Java 模型

> ID：11156299
> 
> 赞同：1
> 
> 时间：2012-06-22T12:36:13.757
> 
> 标签：java, modelica

我有一个用 Dymola 开发的模型，我必须将它与 Java 中的模型连接起来。更准确地说，在每个时间步，两个模型都为对方提供输入。

到目前为止，我发现： - Dymola 能够生成/导出 C 代码。它们提供了一个难以理解的（到目前为止）界面，但要点是导出仅适用于 Visual C++，我需要跨平台。- OpenModelica (OMC) 可以生成 C 代码，但我没有发现它是否可以用作库。

如果您对如何连接 modelica 和 Java 模型有任何建议，请分享；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:58:04.307

有几种方法可以解决您的问题。让我想到一些替代方案：

*   协同仿真。Dymola/OpenModelica 可以将模型导出为 FMU，因此如果您可以将 Java 代码导出为 FMU 或用 Java 编写主算法，则可以一起模拟它们。据我所知，这是将任一工具生成的仿真代码用作库的唯一方法。不过，我对 Dymola 的看法可能是错误的。
*   时间事件。当样本（...）...通信（）。这样做的好处是两个模型都可以使用不同的时间步长和可变步长求解器。
    *   使用外部 C + JNI (Java Native Interface) 在每个事件中调用一些 Java 函数
    *   基于套接字的同步+通信

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:17:57.750

从您的描述中不清楚此 Java 代码是否具有一些数学方面，或者您只是想将其用作计算值的函数（或在模拟期间以特定间隔调用它）。如果你能详细说明，它可以帮助你弄清楚这里真正有意义的地方。

# javascript - 努力解析 responseText

> ID：11156300
> 
> 赞同：1
> 
> 时间：2012-06-22T12:36:15.173
> 
> 标签：javascript, xmlhttprequest, redis, dart

我玩得很开心

*   雷迪斯
*   网盘
*   镖

我写了这个

```
#import('dart:html');
#import('dart:json');

class ChatClient {
  XMLHttpRequest listener;
  int parsePosition = 0;

  void connect(){
    this.listener = new XMLHttpRequest();
    this.listener.open("GET", "http://i.target.co.uk:9005/subscribe/test.json", true);
    this.listener.setRequestHeader('Accept', 'application/json');
    this.listener.on.readyStateChange.add(handleData);
    this.listener.send();
  }

  void handleData(Event event){
    print(this.listener.responseText);
    /*
    if (this.listener.responseText != ""){
      Map data = JSON.parse(this.listener.responseText);
      print(data["subscribe"]);
    }
    */
  }
}

void main(){
  ChatClient client = new ChatClient();
  client.connect();
  document.query('#status').innerHTML = 'Loaded!';
} 
```

问题是，每次我发布一些东西时，responseText 的大小都会像这样增长

```
{"subscribe":["subscribe","test",1]}
{"subscribe":["subscribe","test",1]}{"subscribe":["message","test","e"]}
{"subscribe":["subscribe","test",1]}{"subscribe":["message","test","e"]}{"subscribe":["message","test","e"]} 
```

现在你无法解析

```
{"subscribe":["subscribe","test",1]}{"subscribe":["message","test","e"]}{"subscribe":["message","test","e"]} 
```

那我该怎么办？你能清除responseText吗？冲洗缓冲区？某物？

编辑：我知道您可以迭代整个字符串或跟踪每个 json 对象的长度，但没有更清洁的方法吗？

编辑：使用新的打印语句

```
readyStat: 2 status: 200
{"subscribe":["subscribe","test",1]}
readyStat: 3 status: 200
{"subscribe":["subscribe","test",1]}{"subscribe":["message","test","e"]}
readyStat: 3 status: 200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:42:35.817

**编辑 2：** 这个堆栈溢出问题与 readyState 更改有类似的问题： [Ajax readystate 3 (Chrome / IE)](https://stackoverflow.com/questions/3256056/ajax-readystate-3-chrome-ie) - 我正在努力寻求更体面的帮助。

* * *

**编辑**：我想我已经把你带到了花园小路上——ajax 请求的响应状态（3）它仍在加载/接收信息。

这并不直接适用于您的问题，但我觉得这是问题的一部分。

我快速浏览了[http://www.w3.org/TR/2006/WD-XMLHttpRequest-20060405/](http://www.w3.org/TR/2006/WD-XMLHttpRequest-20060405/) 我发现：`readyState of type unsigned short, readonly 对象的状态。属性必须是以下值之一：

```
0 Uninitialized
    The initial value.
1 Open
    The open() method has been successfully called.
2 Sent
    The UA successfully completed the request, but no data has yet been received.
3 Receiving
    Immediately before receiving the message body (if any). All HTTP headers have been received.
What about HEAD requests?
4 Loaded
    The data transfer has been completed. 
```

所以在第 3 阶段，我们`responseText`持有部分数据。

来自[http://jszen.blogspot.co.uk/2005/03/xmlhttp-and-readystate.html](http://jszen.blogspot.co.uk/2005/03/xmlhttp-and-readystate.html)：

> ... URI /some/uri 可以建立持久连接，这意味着除非连接被脚本或服务器终止，否则 readyState 将始终为 3（交互式）。根据文档，此时我应该能够从服务器获取不完整的响应，但显然不是......

* * *

在 msdn 上，我发现了这个[http://msdn.microsoft.com/en-us/library/ie/ms534361(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms534361(v=vs.85).aspx)：

> 您不能调用 responseBody 和 responseText 属性来获取部分结果（readyState = 3）。这样做会返回错误，因为没有完全收到响应。您必须等到收到所有数据。

* * *

## 第一个答案：

```
void handleData(Event event){
  print(this.listener.responseText);

  int a = this.listener.readyState;
  int b = this.listener.status;
  print("readyStat: $a status: $b");

  if (this.listener.readyState == 4 && this.listener.status == 200) {
    if (this.listener.responseText != ""){
      Map data = JSON.parse(this.listener.responseText);
      print(data["subscribe"]);
    }
  }
} 
```

在接收器对象上，您将拥有一个 readyState 和一个状态。如果您等到这些都处于完成状态，`readyState == 4`您`status==200`的数据可能会在您完成后完成。

这是未经测试的，因为我没有合适的环境来测试它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:33:36.710

使用的最终解决方案。

```
 void connect(){
    this.listener = new XMLHttpRequest();
    this.listener.open("GET", "http://i.h.co.uk:9005/subscribe/test", true);
    this.listener.setRequestHeader('Accept', 'application/json');
    this.listener.on.readyStateChange.add(handleData);
    this.listener.send(); 
  }

  void handleData(Event event){
    try {
      Map data = JSON.parse(this.listener.responseText.substring(this.parsePosition));
      this.parsePosition = this.listener.response.length;
      var message = data['subscribe'][2];
      print("Recieved> $message");
    } catch (final e){
    }
  } 
```

# drupal - 节点模板中的图像

> ID：11156302
> 
> 赞同：-1
> 
> 时间：2012-06-22T12:36:15.053
> 
> 标签：drupal, drupal-7

我正在使用 drupal 7.x 并正在创建一个节点内容类型模板。我的内容类型有多个自定义字段，包括一个图像字段。我正在尝试将图像字段及其属性添加到节点模板。我可以使用显示图像

`print render($content['field_custom_image'][0])`

但是我也想显示文件名和标题文本。我尝试了下面的代码，但它没有显示任何内容。

```
print render($content['field_custom_image'][0]['und']['title']) 
```

在 Drupal 6 中，我可以使用：

```
print $node->field_custom_image[0]['data']['description'] 
```

我执行时`print_r($node)`的输出如下。

```
[field_reclaimer_image] => Array ( [und] => Array ( [0] => Array ( [fid] => 8 [alt] => [title] => 测试标题 [width] => 1117 [height] => 651 [uid] => 1 [文件名] => 24-1033_angle_02_1339771175.jpg [uri] => public://images/24-1033_angle_02_1339771175.jpg [filemime] =>…

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:39:30.120

你可以这样做：

`echo $node->field_custom_image['und'][0]['filename'];`

`echo $node->field_custom_image['und'][0]['title'];`

und 和 0 是错误的方式。如果你把你的`print_r()`in`<pre>`标签包装起来，你会看到一个格式更好的数组，它更容易阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:47:58.353

如果您有权访问节点对象，则应使用[field_get_items()](http://api.drupal.org/api/drupal/modules!field!field.module/function/field_get_items/7)，它根据字段将使用的语言（通常是与节点关联的语言）返回字段的值。我将使用以下代码来打印第一张图像中的信息。

```
$values = field_get_items('node', $node, $field_name);
if (!empty($values)) {
  print $values[0]['title'];
  print $values[0]['description'];
} 
```

`render()`在这种情况下，因为您正在渲染字符串，所以没有必要。在这种情况下，函数所做的只是返回作为参数传递的值。

```
function render(&$element) {
  if (is_array($element)) {
    show($element);
    return drupal_render($element);
  }
  else {
    // Safe-guard for inappropriate use of render() on flat variables: return
    // the variable as-is.
    return $element;
  }
} 
```

如果您尝试渲染的值可能是字符串或渲染数组，那么使用`render()`.

我在我的测试站点中尝试了以下代码。我正在加载的节点包含一个图像字段。

```
$node = node_load(8);
$values = field_get_items('node', $node, 'field_image');

dsm($values); 
```

显示的是`dsm()`以下内容。

![截屏](../Images/b776297319cf59e985e85d37f5c804b9.png)

返回的数组可以包含多个元素，具体取决于字段设置。准备好处理多个图像。

使用`field_get_items()`，您无需处理语言。对于某些字段，语言 ID 可以是“und”，用于具有不依赖于语言的值的字段；对于其他字段，要使用的正确值可能是节点的一组。

还要考虑一些模块可以更改与字段关联的值，并且使用“und”不一定是正确的做法，对于那些包含“und”数组索引的有效值的字段也是如此。

# android - 显示帮助消息 onFocus of Edittext android

> ID：11156304
> 
> 赞同：3
> 
> 时间：2012-06-22T12:36:25.970
> 
> 标签：android, android-edittext

我想显示一些帮助文本（就像在网页中，当一个字段被聚焦时，一个非模态弹出窗口会显示关于在该字段中输入的内容）。

我使用`android:hint`了 EditText 的属性，但如果它很长，它会剪辑文本。有没有内置或快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:42:36.267

在包含提示的 EditText 下方添加一个 TextView。默认情况下将其设置为不可见。

```
<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/>
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="your hint message..."
/> 
```

现在添加一个 onFocusChangeListener 以使 TextView 可见/不可见：

```
editText.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if(hasFocus){
            tvHint.setVisibility(View.VISIBLE);
        }else{
            tvHint.setVisibility(View.INVISIBLE);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:44:09.570

有一个`TextView`就在`EditText`. 实现`onFocusListener`edittext ，当编辑文本具有焦点时，将 textView 可见性设置为 View.VISIBLE ，它将显示帮助文本。当编辑文本失去焦点时，使文本视图不可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:44:43.093

您可以使用[自定义 Toast](https://stackoverflow.com/questions/11156304/show-help-message-onfocus-of-edittext-android)按摩或[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)进行非模态弹出窗口，如 web 看到这些喜欢帮助您创建自定义 Toast 和 popupwindow

[https://github.com/quiqueqs/Toast-Expander/blob/master/src/com/thirtymatches/toasted/ToastedActivity.java](https://github.com/quiqueqs/Toast-Expander/blob/master/src/com/thirtymatches/toasted/ToastedActivity.java)

[http://www.mobilemancer.com/2011/01/08/popup-window-in-android/](http://www.mobilemancer.com/2011/01/08/popup-window-in-android/)

`OnFocusChangeListener`并在用户单击 EditView 或离开焦点时使用 Listener 进行跟踪

```
txtEdit.setOnFocusChangeListener(new OnFocusChangeListener() {          

        public void onFocusChange(View v, boolean hasFocus) {
            if(!hasFocus)
               //show Toast massages or PopupWindow     here           
        }
    }); 
```

# html - Rotating Div -- 链接在 Chrome 的翻转侧不活动

> ID：11156309
> 
> 赞同：0
> 
> 时间：2012-06-22T12:36:48.310
> 
> 标签：html, google-chrome, css, webkit

我有一个矩形设置，当您单击主要区域时，它会执行翻转动画以显示其另一侧。这一切正常。

每边的顶部是链接，它们在 Firefox 中显示和正常工作，但在 Chrome 中，当它被翻转以显示背面时，顶部的链接不起作用（它们处于非活动状态），虽然不可见，前面的链接是活动的。在下面的小提琴中，你会看到我已经在每个链接上设置了一个 JS 警报，以明确点击了哪个链接。在 Chrome 中，您会看到“BackLeftLink”或“BackRightLink”都没有激活。但是，如果您将鼠标移到它们下方，您会看到鼠标处于活动状态，单击将从前面显示警报。出于某种原因，前面的链接从后面传来……因为在“BackRightLink”下，“FrontLeftLink”的链接是活动的，而在“BackLeftLink”下，它是“FrontRightLink”的链接。

[http://jsfiddle.net/adRP4/3/](http://jsfiddle.net/adRP4/3/)

关于是什么导致这个问题的任何想法？奇怪的是它在 FF 中工作得非常好，但在 Chrome 中却不正确......让我想知道它是否与旋转中使用的 webkit css 相关......？

任何建议将不胜感激。

谢谢！

**编辑**根据其他人的说法，它似乎在 Chrome 20 中正常工作......不幸的是，我需要确保它在 Chrome 19（及以下）中适用于那些还没有 Chrome 20 的人。关于可能导致此问题的任何建议，我可以尝试做些什么来纠正它？这是我在 Chrome 中发生的事情的快速截屏：http: [//screencast.com/t/2QgbceIDA](http://screencast.com/t/2QgbceIDA) ...急于解决这个问题，因为我需要它为 FF 和 Chrome 中的每个人工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:32:26.947

你的例子非常复杂。看看我[这里](http://jsfiddle.net/USRFobiwan/Kp6S9/2/)的例子。它具有多种 css3 效果，如模糊、翻转和增长，并带有 jquery 代码行。

# windows - 带有 Indy 组件的 SendEmail

> ID：11156310
> 
> 赞同：7
> 
> 时间：2012-06-22T12:36:49.490
> 
> 标签：windows, delphi, email, compiler-construction, indy

我尝试发送电子邮件，但遇到了问题，但是，我在网上找到了以下代码：

```
Uses
Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
Dialogs, StdCtrls, IdMessage, IdTCPConnection, IdTCPClient,
IdMessageClient, IdSMTP, IdBaseComponent, IdComponent, IdIOHandler,
IdExplicitTLSClientServerBase, IdSMTPBase

procedure SendSimpleMail;
var
Msg: TIdMessage;
DestAddr: TIdEmailAddressItem;
begin
Msg := TIdMessage.Create(Self); //error here
Msg.From.Text := 'name';
Msg.From.Address := 'username@gmail.com';
Msg.Subject := 'Test';

DestAddr := Msg.Recipients.Add;
DestAddr.Text := 'name';
DestAddr.Address := 'username@yahoo.com';
Msg.Body.Add('simple test mail.');

tIdSMTP.Host := 'smtp.gmail.com';
tIdSMTP.Port := 25;
tIdSMTP.AuthenticationType := atLogin; //error here (2 error)
tIdSMTP.Username := 'username@gmail.com';
tIdSMTP.Password := 'password';
tIdSMTP.Connect;
tIdSMTP.Authenticate;
tIdSMTP.Send(Msg);
tIdSMTP.Disconnect;
end; 
```

但是，我注意到了很多错误，并且我错过了 Indy 的一个组件。编译器错误：

```
[DCC Error] Unit1.pas(36): E2003 Undeclared identifier: 'Self'
[DCC Error] Unit1.pas(46): E2233 Property 'Host' inaccessible here
[DCC Error] Unit1.pas(47): E2233 Property 'Port' inaccessible here
[DCC Error] Unit1.pas(48): E2003 Undeclared identifier: 'AuthenticationType'
[DCC Error] Unit1.pas(48): E2003 Undeclared identifier: 'atLogin'
[DCC Error] Unit1.pas(49): E2233 Property 'Username' inaccessible here
[DCC Error] Unit1.pas(50): E2233 Property 'Password' inaccessible here
[DCC Error] Unit1.pas(51): E2076 This form of method call only allowed for class methods
[DCC Error] Unit1.pas(52): E2076 This form of method call only allowed for class methods
[DCC Error] Unit1.pas(53): E2076 This form of method call only allowed for class methods
[DCC Error] Unit1.pas(54): E2076 This form of method call only allowed for class methods
[DCC Error] Project1.dpr(5): F2063 Could not compile used unit 'Unit1.pas' 
```

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T13:47:26.793

您问题中的代码是为 Indy 9 编写的，并且您的编译器错误似乎您正在使用 Indy 10。对于您的编译器错误：

*   `Undeclared identifier: Self`-`Self`是指向类实例本身的指针，并且由于您没有将其编写`SendSimpleMail`为类方法，而只是作为一个独立的过程，`Self`因此您没有任何类，因为您没有任何类。例如，您可以为您的表单类编写类方法，例如`TForm1.SendSimpleMail`，在该方法内部，`Self`将具有`TForm1`实例的含义，即表单本身。

*   其余的错误是因为您访问的是`TIdSMTP`类，而不是对象实例。常用的做法是声明一个局部变量，创建一个将其分配给该变量的对象实例，使用该对象（变量）并释放该对象实例。

我会尝试这样的事情（使用 Delphi 2009 附带的 Indy 10 进行测试）：

```
uses
  IdSMTP, IdMessage, IdEMailAddress;

procedure SendSimpleMail;
var
  IdSMTP: TIdSMTP;
  IdMessage: TIdMessage;
  IdEmailAddressItem: TIdEmailAddressItem;
begin
  IdSMTP := TIdSMTP.Create(nil);
  try
    IdSMTP.Host := 'smtp.gmail.com';
    IdSMTP.Port := 25;
    IdSMTP.AuthType := satDefault;
    IdSMTP.Username := 'username@gmail.com';
    IdSMTP.Password := 'password';
    IdSMTP.Connect;
    if IdSMTP.Authenticate then
    begin
      IdMessage := TIdMessage.Create(nil);
      try
        IdMessage.From.Name := 'User Name';
        IdMessage.From.Address := 'username@gmail.com';
        IdMessage.Subject := 'E-mail subject';
        IdMessage.Body.Add('E-mail body.');

        IdEmailAddressItem := IdMessage.Recipients.Add;
        IdEmailAddressItem.Address := 'recipient@email.com';

        IdSMTP.Send(IdMessage);
      finally
        IdMessage.Free;
      end;
    end;
    IdSMTP.Disconnect;
  finally
    IdSMTP.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:17:00.117

对于 google smtp，您需要使用 TLS 或 SSL！ [http://support.google.com/mail/bin/answer.py?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

您的程序示例是为 INDY9 编写的，如果您使用 INDY10，则无法编译。你需要做出调整。

# spring - 在应用程序中设置 JMS 队列连接以使用 Apache Camel 连接到它

> ID：11156314
> 
> 赞同：0
> 
> 时间：2012-06-22T12:36:58.153
> 
> 标签：spring, jms, apache-camel, spring-jms

我已经提供了客户端的队列连接详细信息以使用 Camel 连接到它。在 applicationContext.xml 中设置它时，我陷入了困境。
客户端提供了 jndiNames 和队列名称来连接到这些队列。有点像

```
QueueName
com.requestQueue
com.responseQueue

JNDI Name
comRequestQueue
comResponseQueue 
```

在 POC 期间，我刚刚提供了本地队列名称以使用 Camel 连接到它。但是在这里我很困惑如何在骆驼配置中同时使用 jndiNames 和 queueNames。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:07:23.567

[在http://camel.apache.org/jms](http://camel.apache.org/jms)有一些详细信息， 请参阅有关使用不同 JMS 提供程序和使用 JNDI 查找连接工厂的部分。

应该有很多你可以用谷歌找到的例子。它本质上是如何将 Spring JMS 与 JNDI 一起使用。

# pointers - 指针 - 很多混乱

> ID：11156317
> 
> 赞同：-1
> 
> 时间：2012-06-22T12:37:21.800
> 
> 标签：pointers

当谈到指针时，我感到非常困惑。我想用一种简单的语言了解关于指针的每一个概念。我知道指针是一个变量，它保存另一个变量的内存位置。但这些是我得到的一些疑问。请帮帮我。

1.  为什么发明了指针（我听说它的主要用途是动态内存分配，但请让我理解这一点。我很困惑）。
2.  指针与栈和堆有什么关系？（我经常在书中看到他们使用堆栈和堆这个词）。
3.  指针是如何实现的（我想知道指针是如何在任何编程语言内部实现的。它是否需要编译器的知识才能理解这一点。
4.  为什么他们使用间接而不是直接使用变量本身的值？
5.  掌握指针概念的方法有哪些？需要多少练习？

我很想知道这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:42:07.450

[The Beginner's Guide to Pointers](http://www.codeproject.com/Articles/627/A-Beginner-s-Guide-to-Pointers)是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:43:49.820

问，你会收到朋友。

资料来源：[谷歌](https://www.google.com/search?aq=1&oq=cpp%20pointers&sugexp=chrome,mod=7&sourceid=chrome&ie=UTF-8&q=cpp%20pointers%20and%20references&safe=active)

*   [http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)
*   [http://www.cprogramming.com/tutorial/references.html](http://www.cprogramming.com/tutorial/references.html)
*   [http://www.oopweb.com/CPP/Documents/ThinkCScpp/Volume/chap16.htm](http://www.oopweb.com/CPP/Documents/ThinkCScpp/Volume/chap16.htm)

# git - git pull 和 git push 一口气

> ID：11156319
> 
> 赞同：9
> 
> 时间：2012-06-22T12:37:32.787
> 
> 标签：git, dvcs

是否可以在一个 git 命令中使用`git pull`和？`git push`

类似的语法`git pull & git push`并不完全适合我，因为我需要两次向服务器提供我的凭据：拉取和推送。

所以我想知道，有什么解决方法吗？我相信应该是这样，因为开发人员在推送本地更改之前拉取远程源是很常见的情况。

**编辑**：我使用的是 Windows 7/x64，msysgit-utf8 1.7.9

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T13:50:31.467

首先，您可以配置 Git 将使用的 _netrc 文件，这里是相关问题：[Git - How to use .netrc file on windows to save user and password](https://stackoverflow.com/questions/6031214/git-how-to-use-netrc-file-on-windows-to-save-user-and-password) 然后您可以为命令配置别名：

```
git config alias.publish '!git pull && git push'` 
```

只需输入：`git publish`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:09:22.743

在这种情况下，我建议做一些快速而肮脏的事情。这可能不是最有效的方法，但我会在 vim 中创建一个带有命令的 bash 脚本并运行，考虑到命令的简单程度。然后，您可以在每次想要同时拉取和推送时打开该文件。

您所要做的就是创建文件，输入您要编写的两行命令，然后在您想执行它们时在命令行中键入该文件名。

同样，这不是最有效的方法，而是快速修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T09:45:35.670

你最好使用SSH，但是如果你不能使用SSH，你可以随时使用windows凭据存储来保存你的密码，这样你就不需要填写两次了：

```
git config --global credential.helper wincred 
```

来源：[Git 文档](https://help.github.com/articles/caching-your-github-password-in-git/)

# java - 在java中使用正则表达式从字符串中提取双精度或整数？

> ID：11156320
> 
> 赞同：2
> 
> 时间：2012-06-22T12:37:32.640
> 
> 标签：java, regex

我想从一个字符串中提取一个方程常数（即整数或双精度，后跟一个像“x”这样的字母）。例如`eqn = "30.14x^2 + 55.69x + 60.1 = 100"`。到目前为止，我可以得到`x`使用的系数

```
([\\+\\-])?(\\d+(\\.\\d+)?)x 
```

`55.69x or 30.14x`在这种情况下给出。

现在我想获取常量，我尝试了下面的正则表达式来提取 +60.1 或 100

```
(?<!^)([\\+\\-])?(\\d+(\\.\\d+)?)(?!x) 
```

然而，这不起作用。任何帮助将不胜感激，因为我已经为此工作了一个月左右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:42:13.773

关于什么

```
 (?<!\^)(-|\+)?[\d.]++(?!x) 
```

?

此变体使用所有格量词（“++”），对无效数字可能不那么严格，但如果字符串在语法上是正确的，这无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:00:47.417

您的正则表达式有什么问题是您没有 escape `^`，因此它意味着字符串的开头。而且您还没有考虑以数字或小数点开头的子字符串。对于那些由一个进行的人来说也不是。因此，您的正则表达式的正确形式是：

```
(?<!(\\^|\\d|\\.))[+-]?(\\d+(\\.\\d+)?)(?!(x|\\d|\\.)) 
```

这工作正常。而且，如果您关心 x 上的指数，您可能想要这样：

```
([+-])?(\\d+(\\.\\d+)?)x(^(\d+))? 
```

顺便说一句，你不需要在`+`里面逃跑`[]`，`-` 当它在旁边`[`时`]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:47:54.660

这应该有效：

```
([\\+\\-])?(\\d+(\\.\\d+)?)(?![\\d.x]) 
```

`[\\d.x]`有效，因为它消除了部分数字。例如：对于 30.14x，30.14 不匹配 `(?!x)`，但 30.1 匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:32:05.480

这是一种在几次传递中提取这些值的方法：

```
public static void main(String[] args) {

    String eqn = "30.14x^2 + 55.69x + 60.1 = 100";

    String numberRegex = "[\\d]+(?:[\\.]{1}[\\d]+)?";
    String symbolsRegex = "=+-/\\\\*\\^";

    String coefRegex = "("+numberRegex+")([a-z]{1})";
    Pattern p = Pattern.compile(coefRegex);
    Matcher m = p.matcher(eqn);
    while (m.find()) {
        System.out.println("coefficient: " + m.group(1) + " -- " + m.group(2));
    }

    String constRegexp = "([^ " + symbolsRegex + "]" + numberRegex + "(?:[ ]{1}|$))";
    p = Pattern.compile(constRegexp);
    m = p.matcher(eqn);
    while (m.find()) {
        System.out.println("constant: " + m.group(1));
    }

} 
```

输出：

```
coefficient: 30.14 -- x
coefficient: 55.69 -- x
constant: 60.1 
constant: 100 
```

只是添加我上面使用的正则表达式的文字值：

```
String coefRegex = "([\\d]+(?:[\\.]{1}[\\d]+)?)([a-z]{1})";
String constRegexp = "([^ =+-/\\\\*\\^][\\d]+(?:[\\.]{1}[\\d]+)?(?:[ ]{1}|$))"; 
```

# javascript - 重复运行 JQuery 插件功能时内存泄漏

> ID：11156321
> 
> 赞同：1
> 
> 时间：2012-06-22T12:37:37.457
> 
> 标签：javascript, jquery, memory-leaks, jquery-plugins, jquery-events

我有一个表，我正在使用两个 JQuery 插件：
固定表头： http: [//www.mustafaozcan.net/en/page/jQuery-Fixed-Table-Header-Plugin.aspx](http://www.mustafaozcan.net/en/page/jQuery-Fixed-Table-Header-Plugin.aspx)
列管理器：[http://p .sohei.org/jquery-plugins/columnmanager/](http://p.sohei.org/jquery-plugins/columnmanager/)

这些都与最初在 document.ready 事件处理程序中运行的固定表头一起运行良好。但是，我有一个隐藏/显示表格列的复选框。因为固定表头插件的工作原理是在运行时对表头进行“截图”，因此需要再次运行以考虑此表头更改。问题是每次运行时，它似乎并没有替换函数中已经使用的数据，而是添加更多数据，导致内存泄漏。我已经尝试了各种方法来阻止这种情况的发生，包括：

```
delete header

$('document').unbind('document.ready', 'table.fixedtableheader')

$('table.fixedtableheader').replaceWith(null)

$('table.fixedtableheader').empty().remove()

header.replaceWith($('table').fixedtableheader({headerrowsize:3}))

$('table').fixedtableheader = null 
```

所有这些（除了使用replaceWith的）都试图删除函数使用的内存，然后我再次运行它。这发生在 chrome、firefox 和大概 IE 中。还有其他人有其他建议吗？

# objective-c - Facebook 内置赞操作回调

> ID：11156331
> 
> 赞同：1
> 
> 时间：2012-06-22T12:38:19.110
> 
> 标签：objective-c, facebook, facebook-like, facebook-opengraph

Facebook 最近推出了“Built-in Like”作为内置的 Open Graph 操作（请参阅[博文](https://developers.facebook.com/blog/post/2012/06/20/bringing-like-to-mobile/)和[文档](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)）。我想在我的 iOS 应用程序中实现此功能并能够在用户完成类似操作时收听事件（类似于在 JavaScript 中使用[FB.Event.subscribe](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)）。这是可能的吗？你将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:42:27.450

从您链接的文档中：

> 要在 Open Graph 对象上发布内置 Like 操作，请使用用户的访问令牌和 Open Graph 对象的 url 调用以下 HTTP POST 请求。此 Open Graph 对象可以是任何类型。
> 
> [示例截图]
> 
> 如果调用成功，它将返回内置 Like 操作实例的 ID `

您的应用程序进行的 API 调用本身将返回新创建对象的 ID，没有特殊或单独的回调 - 您自己的代码正在创建 Like 操作。

# php - 如何查看准备好的 PDO SQL 语句

> ID：11156333
> 
> 赞同：6
> 
> 时间：2012-06-22T12:38:18.937
> 
> 标签：php, mysql, sql, pdo

> **可能重复：**
> [PDO 准备好的语句](https://stackoverflow.com/questions/210564/pdo-prepared-statements)

我确信这个问题的答案很简单，但我似乎无法找到它。

我正在使用 PDO（PHP 数据对象）对 MySQL 数据库运行查询，并且会发现在对数据库执行之前显示准备好的查询很有用。

有没有办法做到这一点？例如：

```
$query = 'SELECT Id, Name, Comment FROM Users WHERE Id = :id';
$pdoStatement = $db->prepare($query);
$pdoStatement->bindValue(':id', $id);

// How can I view the actual statement that will be executed, showing the real
// value that will be used in place of ':id'

$pdoStatement->execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:43:32.083

您无法获取发送到服务器的查询，因为 PDO 不能以这种方式工作。

它将 $query 和 $id 分别发送到服务器数据库，服务器数据库在数据库加入后执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T12:43:38.453

一种常见的做法是将查询（其中包含占位符）与绑定值一起打印。当使用样式数组时，`:placeholder => value`您可以只使用`var_dump`,`print_r`或`var_export`数组。

例如，这是在 Magento SQL 调试中完成的。

“最终”查询不作为字符串存在，除非 PDO 驱动程序不支持准备好的语句并且它正在模拟它们。

本质上，您可以将准备好的语句视为存储函数或存储过程。您创建一次并使用多个参数多次执行它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T12:52:10.273

用它：

```
/**
 * Replaces any parameter placeholders in a query with the value of that
 * parameter. Useful for debugging. Assumes anonymous parameters from 
 * $params are are in the same order as specified in $query
 *
 * @param string $query The sql query with parameter placeholders
 * @param array $params The array of substitution parameters
 * @return string The interpolated query
 */
public static function interpolateQuery($query, $params) {
    $keys = array();

    # build a regular expression for each parameter
    foreach ($params as $key => $value) {
        if (is_string($key)) {
            $keys[] = '/:'.$key.'/';
        } else {
            $keys[] = '/[?]/';
        }
    }

    $query = preg_replace($keys, $params, $query, 1, $count);

    #trigger_error('replaced '.$count.' keys');

    return $query;
} 
```

来源：[查看和调试准备好的 PDO 查询而不查看 MySQL 日志](https://stackoverflow.com/questions/6961897/php-pdo-how-can-i-display-the-query-pdo-just-prepared)

# android - Android：如果存在则替换现有的apk

> ID：11156334
> 
> 赞同：0
> 
> 时间：2012-06-22T12:38:26.670
> 
> 标签：android, download, apk, download-manager

我正在将一个 Android 应用程序下载到路径：`/mnt/sdcard/download/App.apk`使用`DownloadManager`类。如果 App.apk 已经存在，则下载失败。如何替换现有的apk？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:41:01.210

`DownloadManager`不会让你这样做。您应该先删除或重命名现有文件。

```
File f = new File("/mnt/sdcard/download/App.apk");
if (f.exists()) { 
    f.delete();
    // or
    f.renameTo(...);
} 
```

# rest - TeamCity 质量指标仪表板

> ID：11156335
> 
> 赞同：10
> 
> 时间：2012-06-22T12:38:27.123
> 
> 标签：rest, teamcity, dashboard, metrics

我们使用 jetBrains **TeamCity**持续集成服务器进行构建。

我们在 TeamCity 中拥有数十个不同的项目，并希望从它们的开发质量方面了解它们的整体情况，以找出哪些项目缺乏质量以及在何种意义上。我们使用诸如单元测试覆盖率、圈复杂度\可维护性指数、重复、缺陷率等指标...

我们从测试工具收集到 TeamCity 的指标，或者：

1.  如果 TeamCity 支持作为标准指标（例如 NCover 覆盖率），则自动进行。
2.  手动，在运行测试工具时提取它们并使用服务消息将它们提供给 TeamCity：`[##teamcity[buildStatisticValue key='<valueTypeKey>' value='<value>']`

所以我们将它们放在 TeamCity 中，并且可以在每个项目图表上看到它们。我们甚至可以通过 REST 协议以 XML 或 JSON 格式将它们从 TeamCity 中取出。

我们的目标是了解所有项目的整体情况。以下是我们希望看到的 2 个**表格示例：**

*   行中的项目，列中的时间（周）以及内部单元格中的一个选定指标的值。
*   行中的项目，列中的所有指标，特定时间点（例如最新）的内部单元格中的指标值。

或者它可以是具有类似方法的二维**图表。**

所以，问题是：

是否有这样的现有仪表板工具，可以显示描述的表格和/或图表？是与 TeamCity 紧密集成的单独应用程序，还是 TeamCity 的插件？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T17:01:59.197

[这个问题与我刚刚回答](https://stackoverflow.com/questions/12844190/how-do-i-gather-teamcity-code-coverage-reports-from-multiple-projects-into-one-r)的另一个问题非常相似。

答案是使用[SonarQube](http://www.sonarqube.org/)。

# sql-server - SQL Server 分区视图和锁定

> ID：11156336
> 
> 赞同：2
> 
> 时间：2012-06-22T12:38:28.263
> 
> 标签：sql-server, partitioning

我们正在使用分区视图（SQL Server 2008 Standard，分区表不是一个选项），如果我们考虑分区消除目标，它们可以正常工作：如果我们在分区视图中运行查询，在我们选择的列上指定一个子句作为discriminator，我们从实际的执行计划中可以看出，只有与指定的 discriminator 值相关的表被命中。但是，如果有并发的 INSERT 或 UPDATE 语句，即使这些语句没有命中鉴别器选择的表，我们也会遇到锁定问题。

分析锁我可以看到，即使执行计划显示只读取了正确的一张表，IS 锁仍然会放在分区视图中的所有表上，当然如果其他人已经放了 X 锁即使根本没有读取带有 X 的表，在分区视图上运行的整个查询之一也会被锁定。

这是一般分区视图的限制，还是有办法在坚持分区视图的同时避免它？我们按照 SQL Server 联机丛书的建议创建了分区视图和相关内容。

谢谢

黄蜂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:53:28.110

这是设计使然。不要锁定 X 整个表。

# android - 算法在移动应用程序开发中的重要性？

> ID：11156337
> 
> 赞同：4
> 
> 时间：2012-06-22T12:38:30.323
> 
> 标签：android, ios, algorithm, cocoa-touch

了解构建移动应用程序的算法真的很重要吗？我对开发工具和设计模式有深入的了解，并且对 OOP 和 MVC 有深入的了解。

那么，成为一名优秀的移动应用程序开发人员是否需要了解核心算法？

* * *

我可以理解，如果您想创建游戏，那么是的，很明显我们必须了解所有与 AI 相关的算法才能胜任。但我要求的只是简单的数据驱动应用程序构建。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T12:50:55.110

您编写的每个计算机程序都实现了一个算法或一组算法。如果您关心程序的质量（故意模糊的术语），那么您必须关心算法的质量。

例如，如果您希望您的程序快速（这是程序可能具有的品质），那么对于相同的问题，最好选择快速算法而不是慢速算法。如果您希望您的程序适合少量的 RAM（另一个质量因素），最好选择一种在少量 RAM 中运行的算法，而不是用 GB 吞噬它的算法。

因此，软件开发人员的关键知识包括如何分析算法的速度、内存使用以及您可能有兴趣优化的所有其他质量因素的知识。当然，分析算法的一种方法是参考告诉你想知道什么的文本。

我的结论是，是的，*你确实需要了解核心算法才能成为一名优秀的开发人员*，我认为在移动应用程序开发方面没有任何理由改变我的信念。当然，我不希望您了解所有可能存在的算法，但是所有基本教科书中的主要算法以及特定于您的应用程序领域的算法，*地狱是的，您必须了解那些流氓！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:37:51.953

我认为这与移动领域无关。您应该始终尝试实现最佳解决方案（没有完美的解决方案）。在移动领域，尤其是性能非常重要，因为我们谈论的是小型设备，尽管近年来硬件得到了重大提升，但您应该始终特别小心。我总是使用内存泄漏来检查我所做的是否有问题。我还检查了堆内存，看看是否有东西消耗太多内存。电池也是一个问题，您还应该测试您的应用程序是否使用过多。

目前我真正专注于应用程序的架构，当前标准中的工作应用程序（至少我自己的）是不够的。了解模式是一个强大的工具，你应该阅读这些（最好的一个是[这个](https://rads.stackoverflow.com/amzn/click/com/0201633612)一）。如今，维护成本是一个主要因素，您应该尝试实现最大的代码可重用性和清洁度。始终假设客户会更改规范并始终牢记将来会有其他人维护您的代码，因此请避免使用冗长的方法和过于复杂的代码（除非您必须这样做）。还记得留下评论，即使事情真的很简单，也要谦虚......一个月后你可能不会现在那些“简单”的东西做了什么。当您从头开始一个项目时，这些事情很容易实现，但是当您需要在一周后开始考虑这些项目时，就会很痛苦。

那么对于您的问题： **是否需要了解核心算法才能成为优秀的移动应用程序开发人员？**

我的回答是：不，它有帮助，但是在开发时还有其他重要的部分，除了算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:16:14.243

好的算法可以直接影响手机的电池消耗以及它的内存占用量。每个开发人员都应该努力使用最好的算法，但这并不意味着它是绝对必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:54:25.263

平台越小，资源限制越多，了解算法就越重要。因此，在移动设备上，它会更加重要。

# objective-c - 如何访问首选窗格捆绑包？

> ID：11156340
> 
> 赞同：2
> 
> 时间：2012-06-22T12:38:38.823
> 
> 标签：objective-c, nspreferencepane

我们如何访问 Mac OS 应用程序的 Pref Pane Bundle ？？？我已将图像和其他资源放在首选项窗格包中，但我无法使用以下方法获取路径： NSString * path = [[NSBundle mainBundle] pathForResource:@"tick" ofType:@"png"];

其中 tick.png 存在于 NewPrefPane.prefPane 的资源文件夹中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T02:03:27.847

> [NSBundle 主包]

返回 System Preferences 应用程序的 NSBundle，因为它是实际运行窗格的应用程序。

如果您只在 NSPreferencePane 类中需要它，请使用**bundle方法：**

```
[self bundle] 
```

在窗格代码的其他地方使用**bundleForClass ：**

IE

```
NSString * path = [[NSBundle bundleForClass:[self class] pathForResource:@"tick" ofType:@"png"]; 
```

# java - 计算在不同时间发送数据的来源的平均值。

> ID：11156345
> 
> 赞同：0
> 
> 时间：2012-06-22T12:38:57.967
> 
> 标签：java

在我目前的项目中，我将编写一个计算平均温度的函数。

此功能的一个值得注意的点是它在不同时间接收来自多个温度源的数据。你能告诉我“我怎样才能写一个有这种行为的函数？”

例如，以下函数`tempSensorData`从多个**温度传感器接收，这些传感器在不同时间发送温度数据**。我需要编写一个计算平均温度的逻辑。

```
public void calculateRoomAvgTemp(TempStruct tempSensorData) {

   // Write logic of calculating Average Temperature.

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:44:48.383

你为什么不保持一个运行平均值？假设每次读取温度读数时都会调用您的方法，您可以执行以下操作：

```
private final List<Double> temps = Collections
        .synchronizedList(new ArrayList<Double>());
private double currentAverage = 0d;

public void calculateRoomAvgTemp(TempStruct tempSensorData) {
    synchronized (this.temps) {
        this.temps.add(tempSensorData.temp);
        this.currentAverage = 0d;

        for (Double temp : this.temps) {
            this.currentAverage += temp;       
        }

        this.currentAverage /= this.temps.size();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:46:47.967

您可以将过去的温度存储在班级的单独字段中吗？我注意到您的方法是无效的，因此不会返回任何内容。我将假设您想将平均值存储在单独的字段中。例子：

```
public class TempCalculator {
    private double totalTemp = 0;
    private int sensors = 0;
    private double averageTemp = 0;

    public void calculateRoomAvgTemp(TempStruct tempSensorData) {
        totalTemp += tempSensorData.getTemp(); // Assuming getTemp() exists
        sensors += 1;
        averageTemp = totalTemp / sensors;
    }

    public double getAvgTemp() {
        return averageTemp;
    }
} 
```

当然，如果您想存储使用的温度并根据您的需要调整形状，这可以通过列表来完成。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:49:22.470

我能想到的一种方法 - 在将值接收到 ArrayList 时将它们插入。如果您需要在收到每个数据点后计算平均温度，请运行一个 for 循环并平均 ArrayList 中的数据点以获得所需的值。可以考虑使用 memoization 来避免遍历所有值的循环。

另一种选择是使用 apache commons math，您可以使用描述性统计选项（使用滚动数组）来获得平均值（平均值）。

我假设您的代码是单线程的。如果是多线程的，您可以使用线程安全向量（或自己添加锁/同步）。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T13:55:32.450

要计算平均值而不将所有历史值保存在内存（或数据库）中，请使用“[移动平均值](http://en.wikipedia.org/wiki/Moving_average)”。这个数学工具可以为您提供上一个平均值加上当前值的新平均值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T12:44:58.820

您可以创建一个线程来计算温度，并创建许多线程来测量来自不同位置的值。完成一些测量后，线程将结果推送到例如`LinkedBlockingQueue`. 同步此操作很重要，因为许多线程可能会尝试同时推送结果。计算平均温度的线程将循环运行，从队列中弹出新结果，重新计算温度，然后再次尝试弹出另一个结果。只要队列为空，线程将在读取时被阻塞。这样，您将在线程之间进行异步通信，并且在测量完成后将立即重新计算平均温度。

# sharepoint - Sharepoint 在线文件上传与 WebClient 执行超时问题

> ID：11156362
> 
> 赞同：0
> 
> 时间：2012-06-22T12:39:50.480
> 
> 标签：sharepoint, office365

我正在尝试使用 webclient 将文件上传到共享点在线服务器。高达约 7MB 我没有问题。7 MB 后开始出现超时错误。文件大小可能因服务器状态或网络状态而异。当加载时间超过 2 分钟时会发生这种情况。有谁知道在运行时或永久配置中在线为共享点设置超时值的方法。我正在使用以下方法上传文件。

```
 public void AddFile(string fullFileUrl, Stream fileData)
    {

        WebClient _webClient = new WebClient();
        var writeStream = _webClient.OpenWrite(fullFileUrl, "Put");
        var buffer = new byte[BufferSize];
        while (true)
        {
            var bytesRead = fileData.Read(buffer, 0, BufferSize);
            if (bytesRead <= 0)
                break;
            writeStream.Write(buffer, 0, bytesRead);
        }

        writeStream.Flush();
        writeStream.Close();
    } 
```

谢谢

哈尔通贝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:37:03.340

在 HttpRuntime 元素中，您可以添加属性 'executiontimeout' 来增加它

但是，如果可能的话，您可以异步运行上传或通过 HttpHandler 来完全避免超时问题

# c# - 在.Net 中使用Oracle 而不是SQL Server？

> ID：11156364
> 
> 赞同：1
> 
> 时间：2012-06-22T12:39:53.903
> 
> 标签：c#, asp.net, oracle

在这里，`SqlHelper`我需要通过 Oracle 来执行它。有没有类似`OracleHelper`C# 的东西？如果是这样，我该如何在这里使用它

```
using Microsoft.Practices.EnterpriseLibrary.Data;
using System.Data.OracleClient;
using Microsoft.Practices.EnterpriseLibrary.Data.Oracle;
using Microsoft.ApplicationBlocks.Data;

  public DataSet GetAsdDollarsaleschangeList(String requestId,String reportCode )
  {
  try
  {
  OracleDatabase db = new OracleDatabase("Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=***)(PORT=***)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME= ***)));User Id= ***;Password= ***;Persist Security Info=True;");
  OracleParameter[] _spParams = new OracleParameter[1];
  _spParams[0] = new OracleParameter(ReportCode.requestId,requestId);
  return SqlHelper.ExecuteDataset(db, CommandType.StoredProcedure, ReportCode.PEP_1, _spParams);
  }
  catch (Exception err)
  {
  throw err;
  }
  } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:52:17.203

我建议下载并安装[ODP.Net](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)。我还建议研究他们在[此处](http://www.oracle.com/technetwork/indexes/samplecode/dotnet-sample-522126.html)提供的代码示例，这应该可以帮助您前进。

# php - Windows中的PHP，如何获取忽略时区的当前系统时间？

> ID：11156371
> 
> 赞同：0
> 
> 时间：2012-06-22T12:40:20.027
> 
> 标签：php, windows

我有下一个问题。我有几个 PHP 系统在不同的 Windows 机器上运行。这些系统集中使用当前时间。

现在，我配置了 php.ini 并将其分配给特定的时区。Windows 也配置为相同的时区，一切都按预期工作。

但是，在我国，国家决定更改夏令时。因此，有时，管理员会更改 Windows 时区而保持 php 时区不变，从而在系统中造成不一致。其他时候，是自动更改时区的窗口。

是否有任何方法可以从 PHP 获取忽略时区的当前系统时间？

**更新**：

```
function time_zone_fix($timeGiven = "H:i:s")
{
    $shell = new COM("WScript.Shell") or die("Requires Windows Scripting Host");
    $time_bias = -($shell->RegRead("HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\TimeZoneInformation\\ActiveTimeBias")) / 60;
    $timestamp_bias = 60 * 60 * $time_bias;
    return gmdate($timeGiven, strtotime($timestamp_bias . " seconds"));
} 
```

无论指定什么时区/dsl，都给出当前日期和时间。然而，创建一个新的 COM 接口绝非高效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:54:30.020

```
gmdate('Y-m-d H:i:s'); 
```

将[格式](http://cn.php.net/manual/en/function.date.php#refsect1-function.date-parameters)更改为您需要的任何内容。它返回“无时区日期和时间”。`gm`代表格林威治平均值，如GMT [（](http://en.wikipedia.org/wiki/GMT)格林威治标准时间）。GMT 已被[UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)（世界标准时间，协调）取代，因此该函数真的应该被调用`utcdate()`......

但是最便携的时间表示是[Unix 时间戳](http://en.wikipedia.org/wiki/Unix_time)，即自 1970-01-01 00:00:00 UTC 以来经过的秒数，忽略闰秒：

```
time(); 
```

的值[`time()`](http://www.php.net/manual/en/function.time.php)也是 的第二个参数的默认值[`gmdate()`](http://www.php.net/manual/en/function.gmdate.php)。

BTW，[闰秒](http://en.wikipedia.org/wiki/Leap_second)定于2012-06-30 23:59:60

注意：如果您要求获取某个时区的时间但没有夏令时校正，您可以这样做：

```
gmdate('Y-m-d H:i:s', time() + 3600 * $h); 
```

哪里`$h`是与 UTC 的小时偏移量（在美国为负数），或者，如果偏移量不是完整的小时数：

```
gmdate('Y-m-d H:i:s', time() + 60 * $m); 
```

其中`$m`是与 UTC 的分钟偏移量（例如，IST 为 330，印度标准时间）。但是，带有附加时区偏移量的 Unix 时间戳本身没有任何意义！

最后但同样重要的是，不要忘记通过网络时间协议[NTP同步您的系统。](http://en.wikipedia.org/wiki/Network_Time_Protocol)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:45:36.730

[PHP 手册支持的时区列表](http://php.net/manual/en/timezones.php)：

> ...在这里，您将找到 PHP 支持的时区的完整列表，这些时区旨在与例如`date_default_timezone_set()`. ...

然后是这个：（`UTC`来自这个[子页面](http://php.net/manual/en/timezones.others.php)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T06:07:45.833

Windows中的PHP，如何获取忽略时区的当前系统时间？我有下一个问题。我有几个 PHP 系统在不同的 Windows 机器上运行。这些系统集中使用当前时间。

# sql-server - 服务代理配置

> ID：11156376
> 
> 赞同：1
> 
> 时间：2012-06-22T12:40:39.937
> 
> 标签：sql-server, sql-server-2008, service-broker

我已经使用 Windows 身份验证配置了两个 SQL Server 2008 实例之间的 Service Broker 通信。我正在从发起者服务向目标服务发送一条消息，然后结束目标中的对话。由于目标没有向发起者发送回复消息，目标实例是否需要配置任何路由来向发起者发送系统生成的确认消息？我只能依靠 Target 实例中的对话句柄与 Initiator 进行通信吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:46:37.313

在两个方向上总是需要一条路线。即使您从未从目标*显式*发送消息，目标仍需要为收到的每条消息发送*隐式*确认。

但是在您的情况下，您*正在*发送明确的消息：`END CONVERSATION`发送`http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog`消息。

# mysql - 在 IN 子句中使用 SP 的结果

> ID：11156377
> 
> 赞同：0
> 
> 时间：2012-06-22T12:40:47.793
> 
> 标签：mysql, stored-procedures

我遇到了一个问题，甚至可能是 MySQL 的限制。

情况如下：

我有一个 SP X，根据 1 个或 2 个参数选择相关记录。SP 返回 0、1 或多个 id 的列表。我想在 IN 子句中使用该列表，如下所示：

```
SELECT
    *
FROM
    table
WHERE
    id IN (spX(y)); 
```

这给了我一个错误：

`Syntax error or access violation: 1305 FUNCTION z.spX does not exist`

该错误有点模糊：我相信这是语法错误，而不是访问冲突或 SP 本身不存在。如果我直接调用 SP，我会得到预期的结果。

这种感觉有点像死胡同。我的期望是，如果 SP 返回超过 1*列*，而不是返回超过 1*行*，MySQL 会抛出错误（在这种情况下，我可以使用 FUNCTION 代替，这将立即起作用）。

所以，问题是：有没有办法在 IN 子句中使用 SP 的结果？

附带说明：我知道我可以通过简单地加入表来获得相同的结果，然后将新的 where 子句添加到现有查询中，而不是使用 SP。然而，这里真正的问题是必须将新功能添加到应用程序中，并且不必加入大量查询，而是使用 SP 是阻力最小的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:46:30.447

```
 SELECT * FROM table WHERE id IN(SELECT spX FROM table WHERE y = ???); 
```

您需要在括号中添加一个 select 语句，否则您将不清楚您在做什么。

如果 sPx 是您的表的名称，而 y 是您要从中提取的变量，那么您需要用括号中的 select 语句说明这一点。Def只是一个语法错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:56:17.027

我实施了聊天中提出的解决方案：

[https://chat.stackoverflow.com/rooms/12910/discussion-between-robin-vg-and-hituptony](https://chat.stackoverflow.com/rooms/12910/discussion-between-robin-v-g-and-hituptony)

我一步一步做的事情：

1.  我在涉及的每个查询中都放置了一个占位符。
2.  在我的应用程序的更高级别上，我调用存储过程。澄清一下：关于 SP，我肯定知道两件事：

*   它总是以 1 个 id 作为参数。
*   它总是会返回 0 个或多个 id。

3.  我根据 SP 的结果生成 IN() 子句。
4.  我用生成的 IN() 子句替换占位符并运行我的查询。

这样我就可以随时添加或更改 SP 本身的条件，而无需更改应用程序逻辑/查询。

# java - Spring Roo 数据库逆向工程师 DBO？

> ID：11156382
> 
> 赞同：0
> 
> 时间：2012-06-22T12:41:17.263
> 
> 标签：java, database, reverse-engineering, spring-roo

我正在对 Spring Roo 中的数据库进行逆向工程。命令 database reverseengineer --schema no-schema-required （所有 roo shell 提供给我的）和 database introspect --schema no-schema-required 都返回消息

**Schema(s) 'no-schema-required' 不存在或没有任何表。请注意，某些数据库的模式名称区分大小写**

但是当我运行数据库逆向工程师 --schema dbo 或数据库自省 --schema dbo 时，我得到了预期的结果。在这种情况下，DBO 代表/做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:41:56.280

dbo 将是您的架构名称。不支持模式的数据库显示不需要模式

见[http://static.springsource.org/spring-roo/reference/html/base-dbre.html](http://static.springsource.org/spring-roo/reference/html/base-dbre.html)

# c# - 使用 wsimport 导入 .net Web 服务时出错

> ID：11156385
> 
> 赞同：4
> 
> 时间：2012-06-22T12:41:36.940
> 
> 标签：c#, java, web-services, wsdl, wsimport

我有一个用 c# 编码的 web 服务。我想在 java 应用程序中使用它，所以我尝试使用带有这些参数的 wsimport 导入它：

```
wsimport -keep -verbose -B-XautoNameResolution http://localhost:50358/WebService.asmx?wsdl 
```

我的网络服务中有这样的课程：

```
 public class ReturnClass
{
    int _returnCode;
    DataTable _outputDataDT;

    public int ReturnCode { set { _returnCode = value; } get { return _returnCode; } }
    public DataTable OutputDataDT { set { _outputDataDT = value; } get { return _outputDataDT; } }

} 
```

如果我使用 Datatable 变量，则 wsimport 会返回此错误：

> [错误] 属性“任何”已定义。使用 <jaxb:property> 来解决这个冲突。第 16 行`http://localhost:50358/WebService.asmx?wsdl`
> 
> [错误] 以下位置与上述错误第 17 行有关`http://localhost:50358/WebService.asmx?wsdl`

但是如果我删除数据表变量，它可以工作，但我需要数据表。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:40:27.493

查看您的模式，JAXB 看到两个具有相同名称的属性，并且无法确定在生成的 Java 代码中调用字段的内容。您需要创建一个外部自定义绑定文件。[在http://docs.oracle.com/javase/tutorial/jaxb/intro/custom.html](http://docs.oracle.com/javase/tutorial/jaxb/intro/custom.html)阅读有关它的更多信息wsimport 命令有一个 -b 选项，您可以使用它来指定绑定文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:47:52.623

发布您的 wsdl。

另外：这可能是类型/元素命名冲突，在这种情况下，您可以简单地使用

```
<nameXmlTransform>
  [ <typeName [ suffix="suffix" ]
              [ prefix="prefix" ] /> ]
  [ <elementName [ suffix="suffix" ]
                 [ prefix="prefix" ] /> ]
  [ <modelGroupName [ suffix="suffix" ]
                    [ prefix="prefix" ] /> ]
  [ <anonymousTypeName [ suffix="suffix" ]
                       [ prefix="prefix" ] /> ]
</nameXmlTransform> 
```

[http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html#wp148550](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html#wp148550)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:23:55.523

我已删除所有数据表，并使用 List<> 而不是 Datatable

# android - Android：无法将我的 ADT 版本更新到 17+

> ID：11156390
> 
> 赞同：1
> 
> 时间：2012-06-22T12:42:32.493
> 
> 标签：android, sdk, installation, adt, avd

我似乎在这里和网络上查看了许多解决方案，当我尝试下载最新的 Android 开发人员工具时，找不到任何与我在 Eclipse 中收到的错误相关的信息。

SDK工作正常，但eclipse的插件给了我这个错误：

```
Your original request has been modified.
  "Android DDMS" is already installed, so an update will be performed instead.
  "Android Development Tools" is already installed, so an update will be performed instead.
  "Android Hierarchy Viewer" is already installed, so an update will be performed instead.
Cannot complete the install because one or more required items could not be found.
  Software being installed: Android DDMS 18.0.0.v201203301601-306762 (com.android.ide.eclipse.ddms.feature.group 18.0.0.v201203301601-306762)
  Missing requirement: Android DDMS 18.0.0.v201203301601-306762 (com.android.ide.eclipse.ddms.feature.group 18.0.0.v201203301601-306762) requires org.eclipse.ui 3.6.2' but it could not be found 
```

当我在 Eclipse 中定位我的 SDK 时，我也收到以下消息：

> 此 Android SDK 需要 Android Developer Toolkit 版本 17.0.0 或更高版本。当前版本是 9.0.0.v201101191456-93220。请将 ADT 更新到最新版本。

谁能给我任何解决这个问题的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:51:06.197

我也有同样的问题。我通过在 Eclipse 中执行以下操作解决了它：

转到帮助 -> 检查更新 -> 安装所有可用的更新。

这将正确安装android的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:19:01.117

我已经解决了这个问题：

我使用了这个来源：[http ://www.mobitechie.com/uncategorized/eclipse-android-development-tools-requires-org-eclips](http://www.mobitechie.com/uncategorized/eclipse-android-development-tools-requires-org-eclips)

这指示我下载在这里找到的 eclipse 经典：http: [//www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)

安装经典并检查更新我获得了下载足够的 ADT 以使用 android SDK 的权限。

感谢评论的人！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T16:47:26.693

转到帮助 -> 检查更新 -> 安装所有可用的更新。只检查Android开发工具然后按下一步并接受安装它

# android - 具有多个关键字段的 Android 的 SQLiteDatabase 中的冲突解决

> ID：11156391
> 
> 赞同：0
> 
> 时间：2012-06-22T12:42:32.537
> 
> 标签：android, sqlite

我在 SQLite 数据库中有一个包含多个关键字段（“lang”和“name”）的表，我想在发生冲突时替换完整的行。

我在其他问题中读到，最简单的方法是使用以下子句，也与 API LEVEL <8 兼容：

```
UNIQUE (id) ON CONFLICT REPLACE 
```

关于表的创建。

但就我的表使用两列（“lang”和“name”）作为主键而言，我不知道该怎么做。

非常感谢提前，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:47:35.597

这将为您解决问题：

```
UNIQUE(lang, name) ON CONFLICT REPLACE 
```

# asp.net - 动态 ASP 表单发布 - 不使用 iframe

> ID：11156402
> 
> 赞同：0
> 
> 时间：2012-06-22T12:42:59.033
> 
> 标签：asp.net, forms, post, iframe

我需要修改一个 3 级下拉`<select>`菜单以直接在页面上运行，而不是在 iframe 内（我们目前就是这样做的）。

此菜单的工作原理如下：

1.  用户在第一个下拉列表中进行选择

2.  第二个下拉列表中的选择根据第一个下拉列表中的选择进行过滤；用户从这些选项之一中进行选择

3.  第三个下拉列表中的选择根据第二个中选择的内容进行过滤；用户从这些选项之一中进行选择；最后一个下拉列表提交表单并将用户重定向到另一个页面，同时传递来自所有三个下拉列表的值。

现在，这是使用`<iframe>`查询 ASP.net 数据库并在每次选择后重新加载自身来完成的。

我真的需要它在不使用 iframe 的情况下工作。不知道解决这个问题的最优雅的方法是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:50:21.607

如果您愿意使用 ASP.NET Ajax Toolkit，他们有一个[级联下拉控件](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)，可以满足您的要求。另一个好处是，因为它使用 Ajax，所以不必在下拉菜单中的每个选择后重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:51:01.710

我认为即使在 DropDownList 控件上，您也可能需要使用“onSelectIndexChanged”。就像是...

```
<asp:DropDownList id="ddl1" runat="server"  OnSelectedIndexChanged="ddl1_OnSelectedIndexChanged"></asp:DropDownList>
<asp:DropDownList id="ddl2" runat="server"  OnSelectedIndexChanged="ddl2_OnSelectedIndexChanged"></asp:DropDownList>
<asp:DropDownList id="ddl3" runat="server"  OnSelectedIndexChanged="ddl3_OnSelectedIndexChanged"></asp:DropDownList>

Page_Load()
{
    if(!IsPostBack)
    {
        ddl1.DataSource = getdata();
        ddl1.DataBind();
}

protected void ddl1_onSelectedIndexChanged(object sender, EventArgs e)
{
    ddl2.DataSource = getData(ddl1.SelectedValue);
    ddl2.DataBind()
}
protected void ddl1_onSelectedIndexChanged(object sender, EventArgs e)
{
    ddl3.DataSource = getData(ddl2.SelectedValue);
    ddl3.DataBind()
}
protected void ddl3_onSelectedIndexChanged(object sender, EventArgs e)
{
    Response.Redirect("SomePage.aspx?ddl1="+ddl1.SelectedValue+"&ddl2="+ddl2.SelectedValue+"&ddl3="+ddl3.SelectedValue, true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:53:27.947

您可以将所有 3 个都放在 UpdatePanel 中。

我确信您的更改已经使页面刷新。将它们放在更新面板中只会使面板刷新，从而导致部分页面更新。

这使用 ajax 在内部完成这项工作。

这是一个[更新面板示例](http://msdn.microsoft.com/en-us/library/bb399001.aspx)，如果您想要的话。

ps：asp.net的创建方法`<select>`是一个`DropDownList`控件。我希望您已经在使用这些，如果没有将您的选择转换为下拉列表。

# javascript - 带有 jquery 输入的输入的奇怪行为

> ID：11156403
> 
> 赞同：0
> 
> 时间：2012-06-22T12:43:00.267
> 
> 标签：javascript, jquery

我有一个带有输入的表单，Jquery 将特定输入（url 输入）表单输入链接到链接，但是我有例如两个输入的 url，HTML id 是**url0**和**url1**，当我想编辑第一个input/url0 url1 的输入变得可见，并且对 url1 而不是 url0 进行了更改，当单击输入时，它使 url1 的值与 url0 相同，您可以[在这里看到我的意思 - jsfiddle](http://jsfiddle.net/9e2X3/)

多谢

具体步骤：

1.  带输入的表单
2.  两个 url 输入 url0/url1
3.  onload 它们是链接，但在单击时在 HTML 中隐藏了输入激活输入，因此可以编辑
4.  当点击输入时，它再次转换为链接

**问题是**这两个输入（url0/url1）会混淆并在编辑时产生奇怪的行为。请检查上面的链接以查看

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:57:11.993

奇怪的行为与您如何处理事件有关

例如

```
$('#url0,#url1').val($(this).text()).show().focus(); 
```

单击任一链接即可打开两个输入。

您需要在输入和链接之间进行引用并对其进行维护或从链接到输入和返回动态更改它。

ps 没想到几天后我会看到完全相同的代码：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:05:24.997

[请参阅此处](http://jsfiddle.net/jaspermogg/9e2X3/5/)的工作 jsFiddle 。

这是修改后的 JS，当您单击链接时可以使用 -

```
$('.a0 a').click(function(e){
    e.preventDefault();
    $(this).parent().parent().find('input').val($(this).text()).show().focus();
    $(this).parent().hide();
})

$('#url0, #url1').each(
    function(index, element){
        $(element).blur(function(){
            $(this).hide().prev().show().find('a').html(this.value);
    })
    }    
); 
```

当您单击链接所在的 div 时，以下工作有效 - [jsFiddle](http://jsfiddle.net/jaspermogg/9e2X3/4/)

```
$('.a0').click(function(e){
    e.preventDefault();
    $(this).parent().find('input').val($(this).find('a').text()).show().focus();
    $(this).hide();
})

$('#url0, #url1').each(
    function(index, element){
        $(element).blur(function(){
            $(this).hide().prev().show().find('a').html(this.value);
    })
    }    
); 
```

​</p>

# java - 无法在线程中更新 gobal 变量的值

> ID：11156408
> 
> 赞同：0
> 
> 时间：2012-06-22T12:43:30.773
> 
> 标签：java, netbeans-7, smslib

我无法更新由线程连续调用的函数中的全局变量的值

功能代码为：

```
public void readMessages()
{
    if (srv.getServiceStatus() == Service.ServiceStatus.STARTED) {
        try {
            InboundMessage msg = null;
            java.util.LinkedList<InboundMessage> list = new java.util.LinkedList<InboundMessage>();
            srv.readMessages(list, InboundMessage.MessageClasses.UNREAD);

            int checkArray = list.size();

            for (int i = 0; i < list.size(); i++) {
                msg = list.get(i);
                System.out.println("New incoming message from: " + msg.getOriginator() +" : \t" + msg.getText() + "\n");
                saveSMS(msg.getOriginator(),msg.getText());

                if (checkArray == 0) {
                    messageArray = new String [4];
                    for (int j = 0 ; j<4 ; j++) {
                        messageArray[j] = "";
                    }
                }                            

                if (noOfSms < 4) {
                    messageArray[noOfSms] = msg.getText();
                    noOfSms = noOfSms + 1;
                } 
                if (noOfSms == 3) {
                    Receiver r = new Receiver ();
                    r.Processing_ReceivedSMS(msg.getText(),msg,messageArray);
                }  
            }
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

这里**noOfSms**是全局变量，但它的值不会改变。

调用 readMessage 的函数是这样的：

```
public void run(){
    while (true){
        readMessages();

        try {
            t.sleep(5000);
            user_status=2;
        } catch (InterruptedException e) {
            System.out.println("Thread Pause Exception");
        }
    }
} 
```

其背后的原因是什么以及如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-28T12:17:31.847

由于您从 thread/s 调用此方法，因此您的变量未更新有两个原因。

1.  readMessages() 中的代码可能会在您的变量更新之前抛出任何异常
2.  您的变量可能永远不会更新，因为它位于 if 块内。检查它的初始值，以便它可以通过 if 条件

# java - jMeter线程序列

> ID：11156410
> 
> 赞同：8
> 
> 时间：2012-06-22T12:43:33.987
> 
> 标签：java, multithreading, performance, jmeter

我有一个带有以下 http 请求采样器的 JMeter 测试计划。

1.  登录
2.  调用一些需要登录用户的功能
3.  登出

当我使用 5 个并行线程执行测试计划时，我看到在为某些线程调用采样器 1 之前调用了采样器 2，然后响应断言失败。

有没有办法指定要执行的采样器序列？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T15:16:24.013

这应该确保它们按顺序执行：

![在此处输入图像描述](../Images/d0df834d2e14de7cd95dd1ffd3f60cf9.png)

所以让我们从线程组开始。

线程数（用户）为 5。

因此，假设您已经为您的登录采样器制定了逻辑。只需添加额外的采样器。所以右键点击那个样本`Add > Post Processors > BSF PostProcessor`，在这个后处理器大脚本空间里面写`${__setProperty(ThreadValue,${__threadNum},)}`。

这会将线程号保存到您的名为`ThreadValue`. `beanshell`确保在下拉列表中选择您的语言。

然后在登录采样器之后添加 if 控制器。将此添加到条件字段`(${JMeterThread.last_sample_ok}==true) && (${__property(ThreadValue,,)} == ${__threadNum})`

这意味着 -> 仅在实际登录成功并且登录线程与您当前所在的线程匹配时才登录。

就是这样，您仅在 if 控制器内执行登录操作。如果您想确保注销正确的用户，请在控制器周围放置额外的位置。

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T17:23:53.560

您需要考虑的是，每个线程都是一个单独的实体，就像一个真实的用户，并且它有自己的会话，但是 JMeter 被设计为异步执行这些线程，即。在平行下。View Results Tree 侦听器显示来自所有线程*的所有活动，无论*逻辑线程顺序如何。如果您希望 1 个线程进行 5 次迭代，那么只需将线程数更改为 1 并使用 5 个循环，这将保留序列（尽管这违背了使用 JMeter 之类的负载测试工具的意义！）。

如果您确实将线程计数更改为 1，那么您可以在结果树中看到真实的逻辑执行顺序。这将显示每个采样器按顺序自上而下地执行。

现在，在您的情况下，我怀疑您遇到问题不是因为事情没有按顺序运行，而是因为服务器正在丢失请求之间的会话上下文。这很常见，而且您通常可以使用[HTTP Cookie 管理器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Cache_Manager)或使用[正则表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)来解决问题。

# tcl - 如何在 NS2 中访问当前队列大小

> ID：11156411
> 
> 赞同：0
> 
> 时间：2012-06-22T12:43:36.597
> 
> 标签：tcl, ns2

我已经使用 TCL 脚本在 NS2 中模拟了一个基于 2 节点 tcp 的双工链路和队列通信。我想在节点通信期间访问当前队列大小。那么如何访问当前队列大小并将其分配给变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T15:52:27.033

使用此代码在终端上获取 cwnd 大小。

```
proc plotWindow {tcpSource outfile} {
global ns
set now [$ns now]
set cwnd [$tcpSource set cwnd_]
puts  $outfile  "$now $cwnd"
$ns at [expr $now+0.1] "plotWindow $tcpSource  $outfile"
}
$ns  at  0.0  "plotWindow $tcp1  stdout" 
```

# javascript - JS Ext 未定义

> ID：11156414
> 
> 赞同：0
> 
> 时间：2012-06-22T12:43:41.053
> 
> 标签：javascript, javascript-events

我创建了一个网页，该网页看起来像是有标签。在我们的开发环境中，一切都很好，当我们将它移到舞台上时，它一直很有趣，直到今天早上它一直在抛出错误，而我对 JS 的了解还不够，无法修复它。

这是错误：

> Ext 未定义 [Break On This Error]
> Ext.get(newboxes[x].id+"_href").removeClass("selected");

这是脚本：

```
<script language="javascript">
function showonlyone(thechosenone) {
      var newboxes = document.getElementsByTagName("div");
            for(var x=0; x<newboxes.length; x++) {
                  name = newboxes[x].getAttribute("name");
                  if (name == 'newboxes') {
                        if (newboxes[x].id == thechosenone) {
                        newboxes[x].style.display = 'block';
                        Ext.get(newboxes[x].id+"_href").addClass("selected");
                        } else {
                        newboxes[x].style.display = 'none';
                        Ext.get(newboxes[x].id+"_href").removeClass("selected");
                        }
                    }
            }
}
</script> 
```

这是代码：

```
<!-- Tabs start -->
 <div class="fulltab">  
    <div class="tabheader">
        <ul class="tabs">
            <li><a id="tab01_href" href="javascript:showonlyone('tab01');" class="selected">Applications</a></li>
            <li><a id="tab02_href" href="javascript:showonlyone('tab02');" >Features</a></li>
            <li><a id="tab03_href" href="javascript:showonlyone('tab03');" >Testimonials</a></li>
        </ul>
    </div>
    <div style="clear:both;"></div>
<div id="contentDiv">
      <div class="tab-content-wrap" style="background: url(../images/block3.png) no-repeat;">
        <div name="newboxes" id="tab01" class="tab-content" style="display: block;">
            <br /><br />
             <img class="alignleft" style="float:left; margin:5px 11px;border:1px solid #6B6B6B;" src="../images/tt_ss.jpg" alt="" width="400px" /><br />
                        <u><b>STUFF</b></u>
                        <ul style="margin-left:440px;list-style-type:disc;padding:0;margin-top:0;">
                        <li>STUFF</li>
                        <li>STUFF</li>
                        <li>STUFF</li>
                        </ul>
        </div>

        <div name="newboxes" id="tab02" class="tab-content" style="display: none;">
        <div style="margin-left:10px; width:700px;">
            <br /><br />
            <strong>STUFF</strong><br />
            <ul style="margin-left:10px; margin-top:0px;list-style-type:disc;padding: 0;">
                    <li>STUFF</li>
                    <li>STUFF</li>
            </ul>
        </div>
        </div>
    <div name="newboxes" id="tab03" class="tab-content" style="display: none;">
         <div style="padding-right:25px;padding-top:10px;">
            <ul>
                <p>STUFF</p>
                <p>STUFF</p>
            </ul>
         </div>
        </div>
    </div>
    <div style="clear:both;"></div>
</div>
</div>
    <!-- Tabs End --> 
```

我可以使用很多帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:34:12.573

您需要在页面中包含 Ext JS。你如何做到这一点取决于你打算使用的 Ext JS 的版本。根据您的使用情况判断，可能是 Ext JS 3。尝试将其添加到您的`head`, 以连接 Ext JS 3.4 的 CDN 托管副本：

```
<script type="text/javascript" src="http://cdn.sencha.io/ext-3.4.0/ext-all.js"></script> 
```

如果您的页面在那之后可以正常工作，您可能希望阅读[Ext JS 概述](http://www.sencha.com/learn/an-overview-of-extjs/)，或升级到[Ext JS 4](http://www.sencha.com/products/extjs/)。请记住，Ext JS 带有[许可限制](http://www.sencha.com/products/extjs/license)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:54:30.797

我们能够解决这个问题。开发环境正在提取阶段没有的文件。我们能够在原始开发人员的帮助下解决此问题。谢谢大家！

# javascript - 如何将 HTML ul-li 结构保存到 javascript 对象中

> ID：11156416
> 
> 赞同：2
> 
> 时间：2012-06-22T12:43:48.807
> 
> 标签：javascript, jquery, html, html-lists

我有以下 html 结构，使用 ul 和 li。

```
<ul class="treeview" id="productTree">
   <li class="collapsable lastCollapsable">
     <div class="hitarea collapsable-hitarea lastCollapsable-hitarea"></div>
     <span id="top1" class="">top1</span>
     <ul>
       <li class="collapsable lastCollapsable">
         <span class="">mod1</span>
         <ul>
           <li class="last">
              <span>bottom1</span>
           </li>
         </ul>
       </li>
     </ul>
   </li>
   <li class="collapsable lastCollapsable">
     <span id="top2" class="">top2</span>
     <ul>
       <li class="collapsable lastCollapsable">
         <span class="">mid2</span>
           <ul>
             <li class="last">
                <span>bottom2</span>
             </li>
           </ul>
        </li>
      </ul>
    </li>
</ul> 
```

该网站允许用户在此结构下添加更多数据，并使用 jquery treeview 动态显示树结构。现在我需要将整个 ul-li 结构保存到一个 js 对象中，以备将来在网站中使用。我如何做到这一点？最后一个节点（“bottom1 and bottom2 here”）有一个类“last”，如果有帮助的话。因为我们可以动态添加数据，所以当用户点击“保存”时，我们可以确定最后有多少 ul li 级别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:37:50.603

您可以使用递归函数来保存树对象；

```
function save(obj_ul, tree){

    var obj_lis = obj_ul.find("li")

    if (obj_lis.length == 0) return;        

    obj_lis.each(function(){
        var $this = $(this);
        if($this.parent("ul").get(0) == obj_ul.get(0))
        {
            tree.push({
                name : $this.find('> span').text(),
                child : save($this.find("ul").first(), [])
            });

        }
    });
    return tree;
}

console.log(save($('#productTree'), [])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:51:55.980

如果您想逐字复制相同的内容，作为网站其他地方的 HTML 字符串，您可以这样做吗？然后`.append()`或者`.prepend()` `treeview`你喜欢的地方。

​var treeview = $('#productTree').parent().html()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:54:28.017

假设你想要 JSON：

```
function save(){
    var tmp = [];

    $('#productTree li.collapsable').each(function(){
        var $this = $(this),
            $spans = $this.find('span'),
            o = [];

            $spans.each(function(){
               o.push($(this).text())
            })

            tmp.push(o);
    });
    return tmp;
} 
```

你也可以用它`map()`来完成同样的事情。

编辑：已更新，假设您的文本将存在于`span`. 这将创建一个数组数组，每个数组都包含`span`每个列表项中 s 中的文本。

# asp.net-mvc-3 - 在 MVC 3 中指定 Tinyint

> ID：11156419
> 
> 赞同：1
> 
> 时间：2012-06-22T12:43:57.717
> 
> 标签：asp.net-mvc-3, sqldatatypes

我正在 MVC 3 中开发一个项目（第一次使用！）。我一直遇到的一个问题是如何指定数据类型。例如，当您只需要长度为 10 时，为什么有一个长度为 4000 的 Nvarchar 类型的字段。据我所知，没有明确的编译为您的数据库指定服务器数据类型。到目前为止，我已经相当成功（以下是我发现的一些），如果我错了，请纠正我。*我的主要问题是是否有办法在 MVC 3 中指定 Tinyint（1 字节）。*

以下是我发现的一些流行的：

`Smallint`: 指定字段为`Int16`

`Bigint`: 指定字段为`Int64`

`Nvarchar(n)`：`[StringLength(n)]`在您的模型中的变量上方添加

`bit`: 看起来很简单，但对于初学者来说 - 将您的字段指定为布尔值。

`DateTime`：DateTime 有很多种风格，要指定，将模型中的字段初始化为 DateTime，并通过放置`[DataType(DataType.YourPreferredFormat)]`在变量上方来指定类型，其中“YourPreferredFormat”是枚举 DataType 的日期/时间相关选项（DateTime，日期、时间、持续时间）。不过，我对此并不是 100% 清楚，所以如果有人知道它们之间的相关性，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:49:07.920

根据对[c-sharp-equivalent-of-sql-server-2005-datatypes 的](https://stackoverflow.com/questions/425389/c-sharp-equivalent-of-sql-server-2005-datatypes)[回答](https://stackoverflow.com/a/968734/2486)，您似乎需要使用.`Byte`

# version-control - 共享程序集版本控制和问题跟踪

> ID：11156424
> 
> 赞同：2
> 
> 时间：2012-06-22T12:44:15.573
> 
> 标签：version-control, mercurial, jira

我们有 3 个团队开发 3 个不同的项目 (.NET)，并且有一个项目具有通用代码和控制 SharedLibrary。每个团队都使用 Mercurial 中的子存储库引用它。每个团队都可以将更改推送到 SharedLibrary 以修复其项目中的错误。因此，修复一个项目中的错误可能会在第二个项目中引入错误。

我们使用 JIRA 进行问题跟踪，并且有 4 个项目（每个团队和 Sh​​aredLibrary）。

那么，任何人都可以提出一个工作流程，以减少集成失败（一个团队破坏另一个团队项目）的机会，并且在发生失败的情况下有助于尽快揭示它？

需要考虑的要点：

1.  我们是否需要 JIRA 中的 SharedLibrary 版本？应该如何保养？

2.  谁以及何时验证对 SharedLibrary 所做的更改？

3.  在 hg 中组织分支的最佳方法是什么？

4.  组织 JIRA 工作流程的最佳方式是什么？在 JIRA 的哪个项目中提交了 ShareLibrary 问题？

任何帮助或类似情况的工作流/解决方案示例都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:57:38.760

几个建议：

1.  是的，您应该像维护其他项目一样维护 SharedLibrary 的版本。您应该将 3 个项目中的每一个的发布与特定版本的 SharedLibrary 联系起来。如果您只是让 3 个项目团队中的任何一个更改它而不参考其他团队，那么您将面临引入不兼容更改的高风险。
2.  如果 SharedLibrary 不是由特定人员或团队维护，我建议建立一个跨职能团队，该团队由负责审查 SharedLibrary 更新的每个项目团队的代表组成。他们可以使用 JIRA 按版本跟踪问题。要验证更改不会破坏其他项目，请为每个项目设置一套全面的测试，您可以在 Jenkins 等持续集成服务器中运行这些测试。
3.  我在这里没有什么特别的建议。
4.  我会将 SharedLibrary 保留为单独的 JIRA 项目。

# java - ajax 成功函数是打印 [object Object] 而不是纯文本。为什么？

> ID：11156428
> 
> 赞同：5
> 
> 时间：2012-06-22T12:44:42.023
> 
> 标签：java, jquery, ajax, playframework-2.0

jQuery代码：

```
function ajaxsubmit(){
$.ajax({
    url: "/update",
    type: "POST",
    dataType: "html"
}).success(function(data) {
      $('#result').html(data);
  });
} 
```

和我的 Java 函数：

```
public static Result ajaxupdate() {
    String done = "very good";
    return ok("very good").as("text/plain");
} 
```

警报是给出的`[object Object]`，而不是纯文本`"very good"`。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T12:52:09.623

你想使用：

```
alert(JSON.stringify(data)); 
```

所以你的 JavaScript 看起来像：

```
function ajaxsubmit(){
$.ajax({
    url: "/update",
    type: "POST",
}).complete(function(data) {
      alert(JSON.stringify(data));
  });
} 
```

您的 Java 代码看起来像是在将字符串发送回客户端之前将其包装到一个对象中，JSON.stringify() 将向您显示正在返回的对象的结构，您可以从那里计算出返回的对象包含您的返回变量（可能类似于 data.data 或 data.return）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:56:04.603

添加 dataType: "text" 并用 success() 更改 complete()

```
function ajaxsubmit(){
    $.ajax({
        url: "/update",
        type: "POST",
        dataType: "html"
    }).success(function(data) {
          $('#result').html(data);
      });
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T13:05:35.263

jQuery 文档清楚地回答了您的问题。来自[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
complete(jqXHR, textStatus)
<...>
two arguments: The jqXHR (in jQuery 1.4.x, XMLHTTPRequest) object and a string 
```

You can find more about jqXHR in documentation. If you want to use the response string, consider opting for .success method. You may have to explicitly provide .contentType

# gwt - 在非常大的项目中使用或不使用 GWT 地点和活动

> ID：11156430
> 
> 赞同：1
> 
> 时间：2012-06-22T12:44:44.190
> 
> 标签：gwt, architecture, mvp, gwt-activities, gwt-places

想象一个非常大的 gwt 应用项目。这只是网络上某种形式的科学环境。因此，对于每个用户，它都会存储应用程序的状态，并且与浏览器历史记录或书签无关。历史甚至不能应用于应用程序本身（如 CAD 系统或其他任何东西，没有直观的“后退按钮”）。我们正在考虑是否将现代活动和地点与 MVP 一起使用。如果历史管理没有意义，活动和地点的优缺点是什么？与没有任何地点和活动的传统 MVP+DI 相比，该框架能否在代码维护和代码模块化方面提供一些优势？考虑到应用程序将为某种形式的插件提供 API

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:52:20.877

鉴于 Places 仅与应用程序内的导航有关（不一定与浏览器历史相关联，但仍然非常*相似*），而 Activities 建立在 Places 之上，这是一种模块化和解耦UI*构建块*的方式，其生命周期与 Places 相关联，那么我认为在您的情况下使用它们没有任何好处。

注意：Activity 和 Places与 MVP**完全无关**，都是关于导航的，正如官方文档所说：

> GWT 2.1 引入了一个用于浏览器历史管理的内置框架。活动和地点框架允许您在应用程序中创建可添加书签的 URL，从而允许浏览器的后退按钮和书签按用户期望的方式工作。它建立在 GWT 的历史机制之上，可以与 MVP 开发结合使用，尽管不是必需的。

*来源：* [https ://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)

# iphone - 如何在运行时更改位于 .plist 中的名为“Main nib file base name”的属性

> ID：11156436
> 
> 赞同：1
> 
> 时间：2012-06-22T12:45:06.857
> 
> 标签：iphone

如果我想在运行时通过另一个文件名 MainWindow2.xib 更改它，我已经在 .plist 文件中添加了我的 MainWindow.xib 文件名。我们如何通过代码更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:49:11.397

你不能，因为`info.plist`应用程序包是只读的。您将不得不通过代码来完成。

从 info.plist 中删除所有主窗口，这是一个示例：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *rootViewController = nil; 
    // Override point for customization after application launch.
    if (YES) { //You check here
        rootViewController = [[SomeViewController alloc] initWithNibName:@"SomeViewController" bundle:nil];
    } else {
        rootViewController = [[OtherViewContoller alloc] initWithNibName:@"OtherViewContoller" bundle:nil];
    }
    self.window.rootViewController = rootViewController;        
    [self.window makeKeyAndVisible];

    return YES;
} 
```

中的`main.m`：

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

# google-apps-script - API 配置 - 属性帐户

> ID：11156438
> 
> 赞同：0
> 
> 时间：2012-06-22T12:45:18.233
> 
> 标签：google-apps-script

朋友们

我是我的域的管理员，我很难使用配置 api 收集帐户的所有属性，如下所示。

```
function myFunction() {
  var base = "https://apps-apis.google.com/a/feeds/";
  var fetchArgs = googleOAuth_("provisioning", base);
  var url = base + "domain" + "/user/2.0"; 

  var result = UrlFetchApp.fetch(url,fetchArgs).getContentText()
  var xml = Xml.parse(result);
  //Logger.log(result)
  var users = xml.feed.entry;

  var r = [['Usuário', 'Nome Completo', 'Permissão Administrador', 'Cota', 'Conta Bloqueada']];
  for( var i in users ) 
            r.push([users[i].login.userName,
            users[i].name.givenName+' '+users[i].name.familyName,
            users[i].login.admin,
            users[i].quota.limit,
            users[i].login.suspended]);
  var s = SpreadsheetApp.getActiveSheet();
  s.clearContents();
  s.getRange(1, 1, r.length, r[0].length).setValues(r);

}

function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

**有谁知道告诉帐户属性，使用的示例配额，暂停帐户的日期。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:00:09.480

您是否尝试过 UserManager 服务？它非常易于使用，也非常完整......至少对我来说，它给我带来了我需要的东西 ;-)

这是它的工作原理（简化版，要获取更多参数，请使用自动完成功能`users[i]` ）：

```
function findUsers(s) {     
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet()
  sheet.getDataRange().clear()
  var users = UserManager.getAllUsers();
  var r = new Array();
//
  for( var i = 0 ; i < users.length ; i++ ){
    var Umail = users[i].getEmail(); 
    var UnomF = users[i].getFamilyName()
    var UnomP = users[i].getGivenName()
// here you can add other parameters
      if(users[i].getAgreedToTerms()){var Udejaconnect = 'oui'}else{var Udejaconnect = 'jamais'}
//
     r.push([UnomF,UnomP,Umail,Udejaconnect]);
  }   
  r.sort(function(x,y){
  var xp = x[0];
  var yp = y[0];
  Logger.log(xp+'   '+yp)
  return xp == yp ? 0 : xp < yp ? -1 : 1;//  sort on name ascending
}
)
  var header = ['Nom de famille','Prénom','Email','Déjà Connecté?']
    sheet.getRange(1,1,1,r[0].length).setValues([header]).setFontWeight('bold')
    .setBackground('silver').setBorder(true,true,true,true,true,true);
    sheet.getRange(2,1,r.length,r[0].length).setValues(r);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:44:17.067

这是返回意外错误的代码

```
function doGet()
{
  var domain = "sac.sulamerica.com.br";
  var date = "2012-06-24";
  var typeReport = "accounts"
  var XML = "<?xml version='1.0' encoding='UTF-8'?>"+
            "<rest xmlns='google:accounts:rest:protocol'"+
            "xmlns:xsi=' http://www.w3.org/2001/XMLSchema-instance '>"+
            "<type>Report</type>"+
            "<domain>"+domain+"</domain>"+
            "<date>"+date+"</date>"+
            //"<page>1</page>"+
            "<reportType>daily</reportType>"+
            "<reportName>"+typeReport+"</reportName>"+
            "</rest>";

  var scope = 'https://www.google.com/hosted/services/v1.0/reports/ReportingData';
  var name = 'reporting';

  var OAuth = getOAuth(name, scope);

//  var headers = {        
//    oAuthServiceName:name, 
//    oAuthUseToken:"always",
//    headers: { "Content-type":"application/xml; charset=UTF-8"},
//    method:"POST",
//    payload:XML};

  OAuth.method = 'POST';
  OAuth.payload = XML;

  var response = UrlFetchApp.fetch(scope, OAuth).getContentText();
  Logger.log(response);
  var xml = Xml.parse(response);
  Logger.log(result)
  var users = xml.feed.entry;

  var r = [['Usuário', 'Email', 'Nome Completo', 'Permissão Administrador', 'Cota', 'Conta Bloqueada', 'Cota Usada']];
  for( var i in users ) 
            r.push([users[i].login.userName,
            users[i].login.userName+'@domain.com.br',        
            users[i].name.givenName+' '+users[i].name.familyName,
            users[i].login.admin,
            users[i].quota.limit,
            users[i].login.suspended,
            users[i].accounts.quotainmb]);
  var s = SpreadsheetApp.getActiveSheet();
  s.clearContents();
  s.getRange(1, 1, r.length, r[0].length).setValues(r);
}

function getOAuth(name,scope) // gets an auth certificate from Google
{
// Logger.log('--Get OAuth--');

 var oAuthConfig = UrlFetchApp.addOAuthService(name);
 oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
 oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
 oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
 oAuthConfig.setConsumerKey("anonymous");
 oAuthConfig.setConsumerSecret("anonymous");
 return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

# email - Powershell - 编写来自 Exchange 的电子邮件

> ID：11156452
> 
> 赞同：1
> 
> 时间：2012-06-22T12:46:15.563
> 
> 标签：email, powershell, exchange-server, attachment

我已经浏览了整个网络，但找不到我正在寻找的确切内容。我正在尝试编写一个 Powershell (V2) 脚本，该脚本使用我们的内部 Exchange 服务器通过电子邮件发送文件，但不需要 Outlook。我有一个用户帐户可用于此目的，但我没有可用于运行它的服务器的 Outlook。有人可以提供允许我使用 Exchange 邮箱发送带有指定附件的电子邮件的脚本（甚至是方法）吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T13:00:01.563

您可以使用[Send-MailMessage](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/send-mailmessage?view=powershell-6) cmdlet。在您的控制台上键入此内容以获得更多帮助：

```
Get-Help Send-MailMessage -Full 
```

检查示例部分的第二个代码示例：

```
Get-Help Send-MailMessage -Examples 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:20:19.267

这应该可以解决问题，但缺少附件。这应该不难添加。

```
function submit_report_smtp{
    param($report)
    trap{return 1}
    $smtp_client = New-Object system.Net.Mail.SmtpClient
    $smtp_client.Host = $smtp_host
    $credentials = New-Object system.Net.NetworkCredential
    $credentials.UserName = $smtp_user
    $credentials.Password = $smtp_pass
    $smtp_client.Credentials = $credentials
    $smtp_client.send($smtp_from, $smtp_to, $title,$report)
    return 0
} 
```

# python - 来自csv的Python MySQL INSERT

> ID：11156459
> 
> 赞同：1
> 
> 时间：2012-06-22T12:46:40.070
> 
> 标签：python, mysql, insert

我正在编写一个脚本来解析 csv 文件并为 MySQL 表生成输入。

我通过 csv.reader 导入数据，所以每一行都是一个字符串列表。我想遍历行并将不同的条目放入数据库中。

我可以进行以下测试：

```
sql = "INSERT INTO `testSmall` (`idtestSmall`, `column1`, `column2`) VALUES (1, 'entry1', 'entry2');"
cursor.execute (sql) 
```

所以我的 SQL 连接有效，并且基本的 SQL 语法没问题。我还可以访问我想放在那里的条目，它们是正确的并且是我期望的数据类型。但是，我似乎无法在迭代中对变量使用相同的 SQL 语法：

```
allData = csv.reader(open('TestTable.csv', 'rb'), delimiter=',', quotechar='|')
for row in allData:
    sql = "INSERT INTO `testSmall` (`idtestSmall`, `column1`, `column2`) VALUES (row[0], row[1], row[2]);"
    cursor.execute (sql) 
```

这会产生一个语法错误：

```
Error 1064: You have an error in your SQL syntax; check the manual that corresponds to our MySQL server version for the right syntax to use near '[0], row[1], row[2])' at line 1 
```

但是数据类型是正确的，并且 SQL 语法与工作示例中的相同......

谁能告诉我我做错了什么以及如何使它工作？

（最后，我不仅要插入纯 csv 条目，还要插入派生值，这就是我不只是使用 mysql 批量导入的原因。）

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:51:15.270

采用：

```
sql = "INSERT INTO `testSmall` (`idtestSmall`, `column1`, `column2`) VALUES (?, ?, ?);"
cursor.execute (sql, (row[0], row[1], row[2])) 
```

问号是占位符。使用占位符的一个额外优点是，它们会自动使您的输入“安全”，通过转义 qoutes 等。
现在，您正在使用`row[0], row[1], row[2]`带有文本 "row[0], row[1], row[2 ]"，而不是告诉 python 使用这些变量的值。

* * *

此外，如果您想使用多个长度的行，或者您希望能够轻松更改输入列表的大小，您可以动态创建占位符：

```
sql = "INSERT INTO testSmall VALUES (%s);" % ', '.join('?' for _ in row)
cursor.execute (sql, row) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:53:45.363

你这样做的方式，`row[n]`s 不引用变量`row`，但它们只是发送到 MySQL 的一段字符串。（我打赌你来自 PHP 背景，并期望双引号用它们的值替换你的变量）。

您可以这样做以在字符串（任何字符串）中插入值：

```
sql = "INSERT INTO `testSmall` (`idtestSmall`, `column1`, `column2`) VALUES (%s, %s, %s);" % row # will map each %s to the `n`th element in `row` 
```

（这不起作用，要小心，因为如果 row[0] 是`abc`，该字符串将不会被引号括起来，因此 MySQL 不会将其解释为字符串）。尝试打印 sql 变量，然后将其复制/粘贴到 mysql 提示符中以查看它是否有效。

但是，当与 MySQL 一起使用时，您最好避开这些，如下所示：

```
sql = "INSERT INTO `testSmall` (`idtestSmall`, `column1`, `column2`) VALUES (%s, %s, %s);"
    cursor.execute(sql, row) 
```

[您可以在文档](http://mysql-python.sourceforge.net/MySQLdb.html#some-examples)中阅读更多内容。

# xcode4.3 - 无法在 Xcode 4.3 上播放声音

> ID：11156461
> 
> 赞同：0
> 
> 时间：2012-06-22T12:46:51.710
> 
> 标签：xcode4.3

我正在使用 Xcode 4.3，我在播放声音时遇到问题......我从我在这里找到的答案下载了这个项目，但是当我用我的[http://dl.dropbox.com/u/63377498/AudioText更改他的文件时.zip](http://dl.dropbox.com/u/63377498/AudioText.zip)我什么都听不见。可能是我的模拟器的问题？我的mac设置？我不知道...这是我使用的代码：

```
@interface ViewController ()
@property (nonatomic, strong) AVAudioPlayer *theAudio;
@end

@implementation ViewController
@synthesize theAudio = _theAudio;

- (void)viewDidLoad
{
[super viewDidLoad];

// Do any additional setup after loading the view, typically from a nib.
NSString *soundPath =[[NSBundle mainBundle] pathForResource:@"sad" ofType:@"caf"];
NSURL *soundURL = [NSURL fileURLWithPath:soundPath];

NSError *error;
self.theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:&error];
}

- (IBAction)pushBell {
[self.theAudio play];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:26:22.020

最后我自己找到了答案。我做的一切都是正确的，但我使用了从 youtube 下载的 mp3 格式的声音文件，并通过更改扩展名转换为 .caf 格式....这就是我无法播放该声音的原因！

# php - php和html上的Edittext过滤器错误

> ID：11156465
> 
> 赞同：0
> 
> 时间：2012-06-22T12:47:01.820
> 
> 标签：php, mysql, html

在浏览器的文本字段中输入数据时，它应该从数据库中获取数据并相应地显示。（例如：像谷歌）。这是我的php代码：

```
 <?php
    mysql_connect("localhost","root","MobixMySQL") or die(mysql_error());
    mysql_select_db("filter") or die(mysql_error());
    $partialStates = $_POST['partialStates'];
    $states = mysql_query("SELECT name FROM list1 WHERE name LIKE "%$partialStates%"");
    while($state = mysql_fetch_assoc($states)) {
    echo "<div>".$state['name']."</div>";
   }
   ?> 
```

下面是我的html代码：

```
 <html>
   <head>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript">
     function getStates(value){
     $.post("getStates.php",{partialStates:value},function(data){
     $("#results").html(data);
    });
    }
   </script>
    </head>
    <body>
    <input type="text" onKeyUp="getStates(this.value)" >
    <div id="results"></div>
    </body>
    </html> 
```

请建议我哪里错了....!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:51:07.857

SQL 中的引号错误......以及注入。查看[PDO](http://us3.php.net/pdo)以了解未来的发展

```
$partialStates = mysql_real_escape_string($_POST['partialStates']);
$states = mysql_query("SELECT `name` FROM list1 WHERE `name` LIKE '%$partialStates%'"); 
```

**编辑**

由于您正在使用 jQuery 尝试更改您的`onkeyup`事件。如果您仍然遇到错误，请使用[FireBug](http://getfirebug.com/)或您的浏览器 javascript 调试器来检查更多错误。尝试以下（未经测试）：

```
<script type="text/javascript">
$(document).ready(function() {
    $('input#myFilter').keyup(function(event) {
        $.post("getStates.php",{partialStates:$(this).val()},function(data){
            $("#results").html(data);
        });
    }).keydown(function(event) {
        if (event.which == 13) {
            event.preventDefault();
        }  
    });
});
</script>
</head>
<body>
<input type="text" id="myFilter">
<div id="results"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:51:47.913

试试这个

```
$states = mysql_query("SELECT name FROM list1 WHERE name LIKE '%".mysql_real_escape_strings($partialStates)."%'"); 
```

而不是这个

```
$states = mysql_query("SELECT name FROM list1 WHERE name LIKE "%$partialStates%""); 
```

# visual-c++ - 在 MFC 中更新 CMDIChildWnd 标题

> ID：11156466
> 
> 赞同：0
> 
> 时间：2012-06-22T12:47:06.053
> 
> 标签：visual-c++, mfc

当我打开文档时，我正在使用 CScrollView 中的 CMDIChildWnd 的 SetWindowText() 来设置标题。但是标题没有更新，直到我单击图像或最小化应用程序。

我曾尝试调用 Invalidate()、UpdateWindow()，但这些都不起作用，但无论如何我需要更新标题。

谁能让我知道我该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:22:35.193

使用您想要的标题调用文档的 SetTitle() 方法。SetTitle() 将调用 CDocument::UpdateFrameCounts()，UpdateFrameCounts() 将调用 CMDIChildWnd::OnUpdateFrameTitle(TRUE) 来更新您的框架。

我认为 SetWindowText() 会起作用，但可能是因为 UI 更新或其他原因，之后会调用 OnUpdateFrameTitle()，并且 OnUpdateFrameTitle() 正在将标题设置回原来的样子。尝试在 CMDIWHildWnd::OnUpdateFrameTItle() 或 CMDIFrameWnd 版本中设置断点。

# linux - EC2 损坏的管道，丢失了我的命令行控制台

> ID：11156467
> 
> 赞同：0
> 
> 时间：2012-06-22T12:47:06.743
> 
> 标签：linux, shell, ubuntu

我使用 ssh 连接到我的 EC2 ubuntu。然后我运行一个命令行服务器，它等待连接并在客户端连接、处理、断开连接时打印消息。这有助于我了解客户要求的进度。由于某种原因，ssh 连接中断，我必须重新连接。

如何让我的控制台回到我的命令行守护程​​序？我需要看看控制台打印发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:03:14.283

使用屏幕。在任何 un*x 上，而不仅仅是 EC2。例如，在此处查看[手册页。](http://www.manpagez.com/man/1/screen/)

# jquery-plugins - 使用 jQuery Hovercard 和自定义数据属性创建 Hovercard

> ID：11156471
> 
> 赞同：0
> 
> 时间：2012-06-22T12:47:22.350
> 
> 标签：jquery-plugins, hover, jquery-hover

[我需要一些关于使用这个插件](http://designwithpc.com/Plugins/Hovercard)创建更多 HoverCards 的帮助（[下载](http://dl.dropbox.com/u/40036711/jquery.hovercard.min.js)）。[我刚刚在JSFiddle](http://jsfiddle.net/love4all1080/rLwkJ/)上创建了一个代码演示。你对此有什么建议吗？

JavaScript：

```
$('.babe-hover').hovercard({ 
    detailsHTML: $(this).attr('data-control').html(),
    width:278 
}); 
```

HTML：

```
 <ul class="demo">
<li>
    <a href="#"><span class="babe-hover" data-control="control-01">William Johnson</span></a>
    <div id="control-01" style="display: none;">
        <p class="s-desc">Address: 64 Newman Street.</p>
        <ul class="s-stats">
            <li>Tweets<br><span class="s-count">1337</span></li>     
        </ul>
    </div>
</li>
<li>
    <a href="#"><span class="babe-hover" data-control="control-02">Hanson Thomas</span></a>
    <div id="control-02" style="display: none;">
        <p class="s-desc">Address: 64 Newman Street.</p>
        <ul class="s-stats">
            <li>Tweets<br><span class="s-count">1337</span></li>     
        </ul>
    </div>
</li> 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:02:33.240

现在它[在作者的帮助下工作](http://designwithpc.com/)

```
$('.babe-hover').each(function(){    
var $this = $(this),
    myControlId = $this.attr('data-control'),
    htmlForHovercard = $('#'+ myControlId).html();

$this.hovercard({ 
    detailsHTML: htmlForHovercard,
    width:278 
}); 
}); 
```

无论如何感谢@egasimus 的建议:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T22:53:04.543

我想你在问：为什么这不起作用？

您正在尝试根据返回的`.html()`内容调用该方法`$(this).attr('data-control')`。`$(this).attr('data-control')`但是，它只返回一个字符串，需要获取对应的元素才能使用`.html()`。以下代码适用于我：

```
$("#" + $(this).attr('data-control')).html() 
```

即，“选择 id 等于该元素的 data-control 属性的元素，并在其上调用 .html()。”

# c - 有没有办法从 UTF8 转换为 ISO-8859-1？

> ID：11156473
> 
> 赞同：13
> 
> 时间：2012-06-22T12:47:23.380
> 
> 标签：c, linux, utf-8, character-encoding, embedded

我的软件在 UTF8 中获取了一些字符串，而不是我需要转换为 ISO 8859 1。我知道 UTF8 域大于 ISO 8859。但是 UTF8 中的数据之前已经从 ISO 上转换，所以我不应该错过任何东西。

我想知道是否有一种简单/直接的方法可以将 UTF8 转换为 iso-8859-1。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T12:49:00.190

> iconv - 执行字符集转换
> 
> [`size_t iconv(iconv_t cd, char **inbuf, size_t *inbytesleft, char **outbuf, size_t *outbytesleft);`](http://www.kernel.org/doc/man-pages/online/pages/man3/iconv.3.html)
> 
> [`iconv_t iconv_open(const char *tocode, const char *fromcode);`](http://www.kernel.org/doc/man-pages/online/pages/man3/iconv_open.3.html)

`tocode`是`"ISO_8859-1"`和`fromcode`是`"UTF-8"`。

工作示例：

```
#include <iconv.h>
#include <stdio.h>

int main (void) {
    iconv_t cd = iconv_open("ISO_8859-1", "UTF-8");
    if (cd == (iconv_t) -1) {
        perror("iconv_open failed!");
        return 1;
    }

    char input[] = "Test äöü";
    char *in_buf = &input[0];
    size_t in_left = sizeof(input) - 1;

    char output[32];
    char *out_buf = &output[0];
    size_t out_left = sizeof(output) - 1;

    do {
        if (iconv(cd, &in_buf, &in_left, &out_buf, &out_left) == (size_t) -1) {
            perror("iconv failed!");
            return 1;
        }
    } while (in_left > 0 && out_left > 0);
    *out_buf = 0;

    iconv_close(cd);

    printf("%s -> %s\n", input, output);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-23T22:31:24.940

这是一个您可能会觉得有用的功能：`utf8_to_latin9()`. 它转换为`ISO-8859-15`（包括 EURO，它`ISO-8859-1`没有），但也适用于-> ->往返的`UTF-8`->`ISO-8859-1`转换部分。`ISO-8859-1``UTF-8``ISO-8859-1`

该函数会忽略类似于`//IGNORE`iconv 的标志的无效代码点，但不会重构已分解的 UTF-8 序列；也就是说，它不会`U+006E U+0303`变成`U+00F1`. 我不打扰重新组合，因为 iconv 也没有。

该函数对字符串访问非常小心。它永远不会扫描超出缓冲区。输出缓冲区必须比长度长一个字节，因为它总是附加字符串结尾的 NUL 字节。该函数返回输出中的字符（字节）数，不包括字符串结尾的 NUL 字节。

```
/* UTF-8 to ISO-8859-1/ISO-8859-15 mapper.
 * Return 0..255 for valid ISO-8859-15 code points, 256 otherwise.
*/
static inline unsigned int to_latin9(const unsigned int code)
{
    /* Code points 0 to U+00FF are the same in both. */
    if (code < 256U)
        return code;
    switch (code) {
    case 0x0152U: return 188U; /* U+0152 = 0xBC: OE ligature */
    case 0x0153U: return 189U; /* U+0153 = 0xBD: oe ligature */
    case 0x0160U: return 166U; /* U+0160 = 0xA6: S with caron */
    case 0x0161U: return 168U; /* U+0161 = 0xA8: s with caron */
    case 0x0178U: return 190U; /* U+0178 = 0xBE: Y with diaresis */
    case 0x017DU: return 180U; /* U+017D = 0xB4: Z with caron */
    case 0x017EU: return 184U; /* U+017E = 0xB8: z with caron */
    case 0x20ACU: return 164U; /* U+20AC = 0xA4: Euro */
    default:      return 256U;
    }
}

/* Convert an UTF-8 string to ISO-8859-15.
 * All invalid sequences are ignored.
 * Note: output == input is allowed,
 * but   input < output < input + length
 * is not.
 * Output has to have room for (length+1) chars, including the trailing NUL byte.
*/
size_t utf8_to_latin9(char *const output, const char *const input, const size_t length)
{
    unsigned char             *out = (unsigned char *)output;
    const unsigned char       *in  = (const unsigned char *)input;
    const unsigned char *const end = (const unsigned char *)input + length;
    unsigned int               c;

    while (in < end)
        if (*in < 128)
            *(out++) = *(in++); /* Valid codepoint */
        else
        if (*in < 192)
            in++;               /* 10000000 .. 10111111 are invalid */
        else
        if (*in < 224) {        /* 110xxxxx 10xxxxxx */
            if (in + 1 >= end)
                break;
            if ((in[1] & 192U) == 128U) {
                c = to_latin9( (((unsigned int)(in[0] & 0x1FU)) << 6U)
                             |  ((unsigned int)(in[1] & 0x3FU)) );
                if (c < 256)
                    *(out++) = c;
            }
            in += 2;

        } else
        if (*in < 240) {        /* 1110xxxx 10xxxxxx 10xxxxxx */
            if (in + 2 >= end)
                break;
            if ((in[1] & 192U) == 128U &&
                (in[2] & 192U) == 128U) {
                c = to_latin9( (((unsigned int)(in[0] & 0x0FU)) << 12U)
                             | (((unsigned int)(in[1] & 0x3FU)) << 6U)
                             |  ((unsigned int)(in[2] & 0x3FU)) );
                if (c < 256)
                    *(out++) = c;
            }
            in += 3;

        } else
        if (*in < 248) {        /* 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx */
            if (in + 3 >= end)
                break;
            if ((in[1] & 192U) == 128U &&
                (in[2] & 192U) == 128U &&
                (in[3] & 192U) == 128U) {
                c = to_latin9( (((unsigned int)(in[0] & 0x07U)) << 18U)
                             | (((unsigned int)(in[1] & 0x3FU)) << 12U)
                             | (((unsigned int)(in[2] & 0x3FU)) << 6U)
                             |  ((unsigned int)(in[3] & 0x3FU)) );
                if (c < 256)
                    *(out++) = c;
            }
            in += 4;

        } else
        if (*in < 252) {        /* 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx */
            if (in + 4 >= end)
                break;
            if ((in[1] & 192U) == 128U &&
                (in[2] & 192U) == 128U &&
                (in[3] & 192U) == 128U &&
                (in[4] & 192U) == 128U) {
                c = to_latin9( (((unsigned int)(in[0] & 0x03U)) << 24U)
                             | (((unsigned int)(in[1] & 0x3FU)) << 18U)
                             | (((unsigned int)(in[2] & 0x3FU)) << 12U)
                             | (((unsigned int)(in[3] & 0x3FU)) << 6U)
                             |  ((unsigned int)(in[4] & 0x3FU)) );
                if (c < 256)
                    *(out++) = c;
            }
            in += 5;

        } else
        if (*in < 254) {        /* 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx */
            if (in + 5 >= end)
                break;
            if ((in[1] & 192U) == 128U &&
                (in[2] & 192U) == 128U &&
                (in[3] & 192U) == 128U &&
                (in[4] & 192U) == 128U &&
                (in[5] & 192U) == 128U) {
                c = to_latin9( (((unsigned int)(in[0] & 0x01U)) << 30U)
                             | (((unsigned int)(in[1] & 0x3FU)) << 24U)
                             | (((unsigned int)(in[2] & 0x3FU)) << 18U)
                             | (((unsigned int)(in[3] & 0x3FU)) << 12U)
                             | (((unsigned int)(in[4] & 0x3FU)) << 6U)
                             |  ((unsigned int)(in[5] & 0x3FU)) );
                if (c < 256)
                    *(out++) = c;
            }
            in += 6;

        } else
            in++;               /* 11111110 and 11111111 are invalid */

    /* Terminate the output string. */
    *out = '\0';

    return (size_t)(out - (unsigned char *)output);
} 
```

请注意，您可以为`to_latin9()`函数中的特定代码点添加自定义音译，但仅限于一个字符替换。

正如当前编写的那样，该函数可以安全地进行就地转换：输入和输出指针可以相同。输出字符串永远不会比输入字符串长。如果您的输入字符串有空间容纳额外的字节（例如，它有 NUL 终止字符串），您可以安全地使用上述函数将其从 UTF-8 转换为 ISO-8859-1/15。我故意这样写，因为它应该在嵌入式环境中为您节省一些精力，尽管这种方法有点有限。定制和扩展。

编辑：

[我在对此答案的编辑中](https://stackoverflow.com/questions/11258019/conversion-from-iso-8859-15-latin9-to-utf-8/11260683#11260683)包含了一对转换函数，用于拉丁 1/9 到/从 UTF-8 转换（ISO-8859-1 或 -15 到/从 UTF-8）；主要区别在于这些函数返回一个动态分配的副本，并保持原始字符串不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-22T17:17:49.347

以下示例也使用了 iconv 库。即使您有一个包含混合 UTF-8 和 ISO-8859-1 字符的文件（或输入流），它也可以工作（例如，如果您有一个 UTF-8 文件并在使用 ISO 的环境中编辑它，则可能发生这种情况-8859-1)。

```
int Utf8ToLatin1(char* input, char* output, size_t size)
{
    size_t in_left = size;
    size_t out_left = size;

    char *in_buf    = input;
    char *out_buf   = output;

    iconv_t cd = iconv_open("ISO_8859-1", "UTF-8");
    if (cd == (iconv_t)-1) {
        (void) fprintf(stderr, "iconv_open() failed, msg encoding will be kept!");
        strncpy(output, input, size);
        return -1;
    }

    do {
        if (iconv(cd, &in_buf, &in_left, &out_buf, &out_left) == (size_t) -1) {
            if (errno == EILSEQ) {
                /* Input conversion stopped due to an input byte that
                 * does not belong to the input codeset.
                 */
                printf("Input conversion stopped due to an input byte that does not belong to the input codeset.\n");
                *out_buf= *in_buf;
                out_buf++   ;out_left--;
                in_buf++    ;in_left--;

            } else if (errno == E2BIG) {
                /* Input conversion stopped due to lack of space in
                 * the output buffer.
                 */
                printf("Input conversion stopped due to lack of space in the output buffer.\n");
                perror("iconv failed!, propably the encoding is already Latin, msg encoding will be kept!\n");
                strncpy(output, input, size);
                return -1;
            } else if (errno == EINVAL) {
                /* Input conversion stopped due to an incomplete
                 * character or shift sequence at the end of the
                 * input buffer.
                 */
                printf("Input conversion stopped due to an incomplete character or shift sequence at the end of the input buffer.\n");
                *out_buf= *in_buf;
                out_buf++   ;out_left--;
                in_buf++    ;in_left--;
            }

        }
    } while (in_left > 0 && out_left > 0);
    *out_buf = 0;

    iconv_close(cd);

    printf("*********************************************************\n");
    printf("ISO-8859-1:\n %s\n", input, output);
    return 0;

} 
```

# java - 如何在 HtmlUnit 2.9 中禁用导致应用程序挂起的反向 ajax 轮询？

> ID：11156478
> 
> 赞同：2
> 
> 时间：2012-06-22T12:47:59.730
> 
> 标签：java, htmlunit

我正在使用基本的***webClient.getPage***方法在身份验证后检索页面，但是该网站使用某种彗​​星/流星服务器来发出永无止境的 ajax 请求，因此*getPage*进入循环，我得到：

> 2012 年 6 月 22 日下午 3:40:15 com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知警告：遇到过时的内容类型：'application/x-javascript'。

如果我一起禁用javascript，那么我会得到源页面并且它停止挂起：

```
 webClient.setJavaScriptEnabled(false); 
```

但是我不能使用 HtmlUnit 功能，例如单击具有 javascript 事件的按钮。我想我不是第一个遇到这个问题的人，但我似乎找不到一个像样的解决方案。

我要连接的页面是 facebook，这是我的代码：

```
public static void submittingForm() throws Exception {
      //  final WebClient webClient = new WebClient();
        final WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);
        webClient.setJavaScriptEnabled(true);
        webClient.setTimeout(60000);
        webClient.setRedirectEnabled(true);
        webClient.setThrowExceptionOnFailingStatusCode(false);
        webClient.setThrowExceptionOnScriptError(false);
        webClient.setCssEnabled(false);
        webClient.setUseInsecureSSL(true);

        // Get the first page
        final HtmlPage page1 = webClient.getPage("http://www.facebook.com");

        // Get the form that we are dealing with and within that form, 
        // find the submit button and the field that we want to change.
        final HtmlForm form = page1.getHtmlElementById("login_form");

        final HtmlTextInput textFieldUsername = form.getInputByName("email");
        final HtmlPasswordInput textFieldPassword = form.getInputByName("pass");
        final HtmlSubmitInput button = form.getInputByValue("Log In");

        // Change the value of the text field
        textFieldUsername.setValueAttribute("emailhere/username");
        textFieldPassword.setValueAttribute("password here");

        // Now submit the form by clicking the button and get back the second page.
        // And get the cookie set up.
        final HtmlPage page2= button.click();

        //Go to the bob marley fan page
        HtmlPage fanPage = webClient.getPage("http://www.facebook.com/BobMarley");
        webClient.setJavaScriptEnabled(true);

        // Get the label that containes the like button from the fan page
        HtmlLabel likeLabel = fanPage.getHtmlElementById("timelineHeadlineLikeButton");

        try{
            // Get the like button
            HtmlSubmitInput likeButton = (HtmlSubmitInput)likeLabel.getLastChild();
            // Press it
            likeButton.click();
        } catch (Exception e){
            e.printStackTrace();
        }

        webClient.closeAllWindows();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T18:52:03.127

假设该线程仍处于打开状态且未解决。为了那些可能遇到此问题的人的利益：

我尝试使用 HtmlUnit 登录到内部网站（未向网络开放）。它挂起给你遇到的同样的信息。

```
Oct 09, 2013 1:39:59 PM com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify
WARNING: Obsolete content type encountered: 'application/x-javascript'. 
```

它进入了一个循环。这只是一个可以关闭的警告。您的脚本挂起的原因之一可能是因为它正在等待加载一些 javascript。

您已设置连接超时。尝试使用以下方法设置 javascript 超时：

```
webClient.setJavaScriptTimeout(45000);  //Set JavaScript Timeout to 0.75 minute 
```

我做了同样的事情，它对我有用。它超时并继续执行剩余的代码行：

我得到以下输出：

```
INFO: Caught script timeout error
com.gargoylesoftware.htmlunit.javascript.TimeoutError: Javascript execution takes too long (allowed: 45000, already elapsed: 45001)
................ 
```

如果无响应的脚本对您的登录操作并不重要，那么您的代码将可以正常工作。

# javascript - 如何使用 chrome.tabs.onUpdated.addListener？

> ID：11156479
> 
> 赞同：17
> 
> 时间：2012-06-22T12:48:01.927
> 
> 标签：javascript, google-chrome-extension

我正在为 Chrome 创建一个扩展程序。每当用户从一个选项卡移动到另一个选项卡时，或者当用户在选项卡中输入新 URL 时，我想显示带有页面 URL 的 alert()。

这不起作用：

```
chrome.tabs.onUpdated.addListener(function(integer tabId, object changeInfo, Tab tab) {
    alert(changeInfo.url);
});

chrome.tabs.onActivated.addListener(function(object activeInfo) {
    // also please post how to fetch tab url using activeInfo.tabid
}); 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-22T12:51:17.283

在函数签名中删除`integer`,`object`和。`Tab`也`.onUpdated`改成`.onActivated`

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
   alert(changeInfo.url);
}); 

chrome.tabs.onActivated.addListener(function(activeInfo) {
  // how to fetch tab url using activeInfo.tabid
  chrome.tabs.get(activeInfo.tabId, function(tab){
     console.log(tab.url);
  });
}); 
```

# algorithm - 查找数组中最小的缺失数

> ID：11156491
> 
> 赞同：2
> 
> 时间：2012-06-22T12:49:02.117
> 
> 标签：algorithm

> **可能重复：**
> [查找不在列表中的最小整数](https://stackoverflow.com/questions/1586858/find-the-smallest-integer-not-in-a-list)

我在一次采访中被问到这个问题

给定一个未排序的数组，找出丢失的最小数。假设所有数字都是正数。

输入 = {4,2,1,3,678,3432}

输出 = 5

对其进行排序是我的第一种方法。我的第二种方法是有一个布尔标志数组。第二种方法占用大量空间。

还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T12:53:19.990

假设给定数组的长度是`N`。您可以使用布尔标志方法，但您不需要考虑大于考虑的数字`N`，因为它们显然太大而不会影响答案。你也可以考虑`bitmap`节省一些空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:47:16.877

unkulunkulu 的另一种解决方案如下：

```
k := 1
Make an array of 2^k booleans, all initially set to false
For every value, V, in the array:
  if V < 2^k then:
    set the V'th boolean to true
Scan through the booleans, if there are any falses then the lowest one indicates the lowest missing value.
If there were no falses then increment k and go to step 2. 
```

这将在 O(n log s) 时间和 O(s) 空间中运行，其中 n 是输入数组的大小，s 是不存在的最小值。通过不在连续迭代中重新检查最低值可以提高效率，但这不会改变约束。

# java - 在 Android/Java 中跟踪回调结果代码的最佳实践？

> ID：11156492
> 
> 赞同：0
> 
> 时间：2012-06-22T12:49:03.437
> 
> 标签：java, android

我正在创建一个 Facebook 应用程序，该应用程序对 Facebook 的 asynchrunner 类进行了多次调用。因此，我经常使用许多回调侦听器。我有许多必须响应的类。我发现我不记得哪些类定义了哪些回调侦听器结果代码。我担心我最终会在两个不同的类中使用相同的回调结果代码，这可能会导致严重的问题。组织这个的最佳实践是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:17:29.340

我认为您的意思可能是“请求代码”，但这对于此答案的目的并不重要。我建议创建一个单独的界面来包含所有这些代码：

```
public interface FBCallbackCodes {
    public final static int AUTH_CODE = 1;
    public final static int POST_PHOTO_CODE = 2;
    ...
} 
```

然后，每当您需要引入新代码时，只需将另一个代码添加`public final static`到此接口并像使用它一样使用它，`FBCallbackCodes.AUTH_CODE`而不是在您使用它们的地方硬编码值。

这样你就实现了两件事：

1.  所有代码都保存在一个地方，您可以轻松查看要添加的其他内容，而无需引入重复。
2.  如果您的应用程序中有两个地方使用相同的功能和相同的代码，您可以很容易地看到所需的代码已经存在并重新使用它。

# android-activity - 有 sendToActivity() 方法吗？

> ID：11156496
> 
> 赞同：0
> 
> 时间：2012-06-22T12:49:15.103
> 
> 标签：android-activity, android

我有一个包含大约 8 个活动类和 1 个应用程序类的程序。我希望我的 Application 类能够与每个 Activity 进行通信，但要按照自己的条件进行。我不希望活动向应用程序询问数据，我希望应用程序发送活动数据。问题在于，根据程序的当前状态，我不确定将打开哪个 Activity。

是否有某种方法可以将信息从应用程序发送到当前活动？

* * *

Application 类与嵌入式蓝牙设备连接，需要根据用户当前所在的 Activity 接收不同的数据。我最初将它作为常规类，在我的程序的 MainMenu 中初始化并传递一个 Handler。但是，一次又一次地将 Handler 从 Activity 传递到 Activity 似乎是弱设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:11:38.920

您可以使用[回调方法](https://stackoverflow.com/questions/443708/callback-functions-in-java)

每个活动都有自己的回调方法，并`onResume()`在应用程序类中注册该方法。（就像一个`onApplicationWantsToDoSomethingWithMeListener()`;）

或者为什么不在`Service`后台？而不是`Application`, 因为你想要的听起来像`Service`. 更多细节？

编辑：我用蓝牙做了一个类似的应用程序，你应该明确地使用服务，但你可以与每个应用程序的服务进行通信。假设服务调用应用程序中的回调，[请在此处查找实现 uf 这样的事情](http://code.google.com/p/projectneo/source/browse/#svn%2FProjectNEO%2Fbranches%2Fv2%2Fsrc%2Fch%2Fbaws%2Fprojectneo%2FsendService)

# java - org.springframework.web.HttpMediaTypeNotAcceptableException：找不到可接受的表示”错误

> ID：11156497
> 
> 赞同：0
> 
> 时间：2012-06-22T12:49:16.973
> 
> 标签：java, jquery, json, jsp, spring-mvc

我称 JSON 为：

```
$(function() {
                    $("select#accountsubgroupid").change(function() {
                        alert('admin URL ----'+adminUrl);
                        $.getJSON("<%=request.getContextPath()%>/admin/jassg.htm?search=",{accountSubGroupId: $(this).val(), ajax: 'true'}, function(accountSubGroup){                          
                           alert('success---'+accountSubGroup.code);
                        });
                    });
                }); 
```

它击中控制器并根据 id 获取适当的对象。

但它给出了“ **org.springframework.web.HttpMediaTypeNotAcceptableException：找不到可接受的表示**”错误。

我的控制器类：

```
@ResponseBody
    @RequestMapping(value = "/jassg.htm")
    public AccountSubGroup getJsonObject(@RequestParam Long accountSubGroupId, HttpSession session) throws Exception
    {
        //***My code for getting object ***
        return accountSubGroup;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T21:41:06.333

把下面的requestMapping：

```
@RequestMapping(method = RequestMethod.GET, value = "/jassg.html", produces = "application/json") 
```

# java - Android 许可教程 - 最后一步

> ID：11156503
> 
> 赞同：9
> 
> 时间：2012-06-22T12:49:37.490
> 
> 标签：java, android, android-lvl

我的应用程序现在可以提交了，但我最近了解了许可。

我在网上找到了一步一步的教程：http: [//twistbyte.com/tutorial/using-the-android-licensing-service-step-by-step](http://twistbyte.com/tutorial/using-the-android-licensing-service-step-by-step)

我已将 Licensing 库导入 Eclipse 并`LicenseCheckActivity`按照教程中的说明创建了类。

我在教程的最后一步，第 7 点。教程说我的课程应该扩展`LicenseCheckActivity`. 但是，我想在其中检查许可的类已经扩展了 Activity。

我如何使用课堂上的`checkLicense()`方法`LicenseCheckActivity`？

这是我的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    // Check the license
    LicenseCheckActivity  l = new LicenseCheckActivity();
    checkLicense(); 
```

这给了我以下错误：

> 无法实例化类型 LicenseCheckActivity

这是我的`LicenseCheckActivity`课

```
public abstract class LicenseCheckActivity extends Activity {

static boolean licensed = true;
static boolean didCheck = false;
static boolean checkingLicense = false;
static final String BASE64_PUBLIC_KEY = "MY BASE KEY";

LicenseCheckerCallback mLicenseCheckerCallback;
LicenseChecker mChecker;

Handler mHandler;

SharedPreferences prefs;

// REPLACE WITH YOUR OWN SALT , THIS IS FROM EXAMPLE
private static final byte[] SALT = new byte[] { -46, 65, 30, -128, -103,
        -57, 74, -64, 51, 88, -95, -45, 77, -117, -36, -113, -11, 32, -64,
        89 };

private void displayResult(final String result) {
    mHandler.post(new Runnable() {
        public void run() {

            setProgressBarIndeterminateVisibility(false);

        }
    });
}

protected void doCheck() {

    didCheck = false;
    checkingLicense = true;
    setProgressBarIndeterminateVisibility(true);

    mChecker.checkAccess(mLicenseCheckerCallback);
}

protected void checkLicense() {

    Log.i("LICENSE", "checkLicense");
    mHandler = new Handler();

    // Try to use more data here. ANDROID_ID is a single point of attack.
    String deviceId = Settings.Secure.getString(getContentResolver(),
            Settings.Secure.ANDROID_ID);

    // Library calls this when it's done.
    mLicenseCheckerCallback = new MyLicenseCheckerCallback();
    // Construct the LicenseChecker with a policy.
    mChecker = new LicenseChecker(this, new ServerManagedPolicy(this,
            new AESObfuscator(SALT, getPackageName(), deviceId)),
            BASE64_PUBLIC_KEY);

    // mChecker = new LicenseChecker(
    // this, new StrictPolicy(),
    // BASE64_PUBLIC_KEY);

    doCheck();
}

protected class MyLicenseCheckerCallback implements LicenseCheckerCallback {

    public void allow() {
        Log.i("LICENSE", "allow");
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        // Should allow user access.
        displayResult(getString(R.string.allow));
        licensed = true;
        checkingLicense = false;
        didCheck = true;

    }

    public void dontAllow() {
        Log.i("LICENSE", "dontAllow");
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        displayResult(getString(R.string.dont_allow));
        licensed = false;
        // Should not allow access. In most cases, the app should assume
        // the user has access unless it encounters this. If it does,
        // the app should inform the user of their unlicensed ways
        // and then either shut down the app or limit the user to a
        // restricted set of features.
        // In this example, we show a dialog that takes the user to Market.
        checkingLicense = false;
        didCheck = true;

        showDialog(0);
    }

    public void applicationError(int errorCode) {
        Log.i("LICENSE", "error: " + errorCode);
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        licensed = false;
        // This is a polite way of saying the developer made a mistake
        // while setting up or calling the license checker library.
        // Please examine the error code and fix the error.
        String result = String.format(
                getString(R.string.application_error), errorCode);
        checkingLicense = false;
        didCheck = true;

        displayResult(result);
        // showDialog(0);
    }

    public void allow(int reason) {
        // TODO Auto-generated method stub

    }

    public void dontAllow(int reason) {
        // TODO Auto-generated method stub

    }

}

protected Dialog onCreateDialog(int id) {
    // We have only one dialog.
    return new AlertDialog.Builder(this)
            .setTitle(R.string.unlicensed_dialog_title)
            .setMessage(R.string.unlicensed_dialog_body)
            .setPositiveButton(R.string.buy_button,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {
                            Intent marketIntent = new Intent(
                                    Intent.ACTION_VIEW,
                                    Uri.parse("http://market.android.com/details?id="
                                            + getPackageName()));
                            startActivity(marketIntent);
                            finish();
                        }
                    })
            .setNegativeButton(R.string.quit_button,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {
                            finish();
                        }
                    })

            .setCancelable(false)
            .setOnKeyListener(new DialogInterface.OnKeyListener() {
                public boolean onKey(DialogInterface dialogInterface,
                        int i, KeyEvent keyEvent) {
                    Log.i("License", "Key Listener");
                    finish();
                    return true;
                }
            }).create();

}

@Override
protected void onDestroy() {
    super.onDestroy();
    if (mChecker != null) {
        Log.i("LIcense", "distroy checker");
        mChecker.onDestroy();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T17:08:32.403

您收到该错误是因为您正在尝试

```
 // Check the license
LicenseCheckActivity  l = new LicenseCheckActivity(); 
```

实例化一个活动。你永远不会这样做！始终使用 ActivityManager 和 Intents 来启动活动并在它们之间传递信息。

解决方案 ：

由于您希望您的起始类继续扩展 Activity 并且不能让它扩展`LicenseCheckActivity`，唯一的其他建议是在您的起始类中移动代码。

前任：

从您的所有代码中获取`LicenseCheckActivity`并将其移动到您的`MainActivity`类中，然后您可以调用您`checkLicense()`的 onCreate 方法`MainActivity`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T20:35:27.757

本教程声明扩展您的`Activity`with `LicenseCheckActivity`。

例子：

```
class ExampleActivity extends LicenseCheckActivity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        Toast.makeText(this, "Checking Application License", Toast.LENGTH_SHORT).show();
        // Check the license
        checkLicense();
    }
} 
```

因为`LicenseCheckActivity`extends ，如果你用 扩展它`Activity`，你的类`ExampleActivity`仍然会继承你的方法。`Activity``LicenseCheckActivity`

如果你需要你的`ExampleActivity`类来扩展`ListActivity`，那么你可以有`LicenseCheckActivity`扩展`ListActivity`而不是活动。

# iphone - 插入子视图时出现 EXC_BAD_ACCESS？（苹果手机）

> ID：11156504
> 
> 赞同：2
> 
> 时间：2012-06-22T12:49:38.773
> 
> 标签：iphone, ios, xcode, exc-bad-access

当我`insertSubview:atIndex:`在我的 iPhone 上使用该方法时，程序无法运行，在 main.m 文件中有 EXC_BAD_ACCESS。然而，当我使用`presentModalViewController`程序运行完美。

此外，switchToView 方法在第一次使用时工作，与不同的 to 和 from，但第二次没有。

出了什么问题？

这是我的代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{    
  ShowBookDetails *sbd = [[ShowBookDetails alloc] initWithNibName:@"ShowBookDetails" bundle:nil];
  [self switchToView:sbd from:self];
} 
```

我的方法看起来像：

```
-(void)switchToView:(UIViewController*)nextView from:(UIViewController*)currentView
{
  [currentView.view insertSubview:nextView.view atIndex:1];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T12:58:42.363

看这里的视图属性

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

它严格地说明了我在评论中所说的内容：

“每个视图控制器对象是其视图的唯一所有者。您不能将同一个视图对象与多个视图控制器对象相关联。此规则的唯一例外是容器视图控制器实现可以将此视图添加为自己的子视图视图层次结构。在添加子视图之前，容器必须首先调用它的 addChildViewController: 方法来创建两个视图控制器对象之间的父子关系。

直接来自苹果！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:10:24.363

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {    
ShowBookDetails *sbd = [[ShowBookDetails alloc] initWithNibName:@"ShowBookDetails" bundle:nil];

[self switchToView:sbd from:self.view];
}

-(void)switchToView:(UIViewController*)nextView from:(UIView*)currentView{
[currentView insertSubview:nextView.view atIndex:1];
} 
```

修改为这段代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:14:54.730

这是个问题：

```
ShowBookDetails *sbd = [[ShowBookDetails alloc] initWithNibName:@"ShowBookDetails" bundle:nil]; 
```

如果您不使用 ARC，这是内存泄漏，因为一旦包含该行的方法结束，您就无法释放该对象。

如果您使用**的是**ARC，它将自动释放`sbd`，并且在其视图中引用控制器的任何内容都将尝试使用 dealloc'd 对象。

您应该`ShowBookDetails *sbd`在此类中创建强（或保留）属性，而不是局部变量。

# assembly - 为什么循环不递减 cx 寄存器？

> ID：11156505
> 
> 赞同：2
> 
> 时间：2012-06-22T12:49:40.390
> 
> 标签：assembly, x86, infinite-loop

我正在尝试使用以下汇编代码将磁盘中的扇区加载到内存中，但正如我发现终端的一些 int 0x10 一样，它不起作用的原因是它陷入了无限循环。我认为循环会自动为我递减 cx 寄存器。下面是代码，剩下的测试 show_message 让你看看我是如何得出循环没有递减 cx 的结论的。我看到的是 msg_2 "Still in loop" 一遍又一遍，没有尽头。

另一个很好的答案是为什么读取永远不会成功（为什么进位标志永远不会清除），因为我非常有信心寄存器的值在调用时很好，但除了那些寄存器的内容不正确之外，如果有人能看到我在设置 int 0x13 时做错了什么，那也太好了。

最后一点：我知道 ch 是柱面的低八位，cl 的两个高位是柱面的两个高位，cl 的低 6 位是扇区号。我的东西在柱面 0，扇区 2，所以 [CYLNUM] 是 0x00，[SECTNUM] 是 0x02。

```
;;;Load Memory;;;

load_mem:

 mov cx, 3        ;Try to read the drive 3 times

read_loop:

  xor ah, ah        ;ah=0, reset drive

  int 0x13            ;Call drive reset

  mov ax, [SYSADDR]

  mov es, ax        ;Destination- es:bx

  mov bx, 0

  mov dl, [DRIVENUM]

  mov dh, [HEADNUM]

  mov al, [NUMKERNELSECTS]

  mov ch, [CYLNUM]

  mov cl, [SECTNUM]

  mov ah, 0x02        ;ah=2, read drive

  int 0x13            ;Call read interrupt

  jnc exit            ;If carry flag is clear, exit
;;test;;
  mov si, msg_2
  call show_message
;;test;;

  loop read_loop

  mov si, read_error    ;Failed 3 times

  call show_message

hang:

  jmp hang            ;hang for now

exit:

  ret 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T13:00:26.723

您正在循环中修改 CX：

```
 mov ch, [CYLNUM]

  mov cl, [SECTNUM] 
```

CX 寄存器由 CH（高字节）和 CL（低字节）组成。

为避免这种情况，您可以尝试在 INT 调用之前/之后（或者在循环的开始/结束时更好）对 CX（或 ECX）使用 PUSH/POP 操作。

当然，我可能错了——我已经有 10 年没有用汇编编程了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:25:50.880

“CYLNUM”和其他大写符号实际上是变量，还是它们定义的常量（常量在某些语言中是“按照惯例”大写的）。如果它们是变量，那么您的代码看起来还不错。如果它们是常量，则丢失“[]”。

（如果是变量，ds 设置是否正确？）

最好的，弗兰克

# maven - Maven 程序集 - 从存档中提取时仅复制子文件夹中的文件

> ID：11156518
> 
> 赞同：6
> 
> 时间：2012-06-22T12:50:39.560
> 
> 标签：maven, maven-assembly-plugin

我对我们的构建基础架构有一个非常具体的要求，将另一个 JAR 依赖项的一些内容复制到我的 Web 应用程序的特定子文件夹中。我们正在使用 maven-assembly-plugin，一个自然的方法是`<dependencySet>`与`<unpackOptions>`.

我的代码示例（在程序集描述符中）如下所示：

```
 <dependencySet>
        <unpack>true</unpack>
        <scope>runtime</scope>
        <useProjectArtifact>false</useProjectArtifact>
        <includes>
            <include>my.group:artifact:jar</include>
        </includes>
        <unpackOptions>
            <includes>
                <include>subfolder/config.xml</include>
            </includes>
        </unpackOptions>
        <outputDirectory>WEB-INF/otherfolder</outputDirectory>
    </dependencySet> 
```

问题是我不知道如何指定我只想将单个文件复制`artifact.jar/subfolder/config.xml`到 target `WEB-INF/otherfolder`。实际结果是`WEB-INF/otherfolder/subfolder/config.xml`。如您所见，`/subfolder`被附加到最终路径。有没有办法改变`<include>`表达式，这样`/subfolder`就不会被附加？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:24:34.757

你有没有想过[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html)对解压档案有很好的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:08:27.507

浏览源代码显示，通过 maven-assembly 插件这是不可能的。它获取程序集描述符中指定的所有包含，然后将此信息传递给通过多个阶段使用的 Plexus 归档器。包含模式也被传递给 Plexus 归档器，然后它显然会执行“解包”保存目录结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-06T08:50:14.100

正如@khmarbaise 所指出的，解决方案在于将依赖插件与程序集插件相结合：

*   在打包阶段，首先将您需要的依赖项解包到某个目标目录
*   在包上（稍后在 pom 中）使用程序集从该目录中提取特定文件到您的工件中

# java - 在 Java 的 if 块中使用逻辑运算符或按位运算符有区别吗？

> ID：11156522
> 
> 赞同：14
> 
> 时间：2012-06-22T12:50:50.433
> 
> 标签：java, operators, bitwise-operators, logical-operators

应该执行以下两个 if 块的内容：

```
if( booleanFunction() || otherBooleanFunction() ) {...}
if( booleanFunction() | otherBooleanFunction() ) {...} 
```

`|`那么 using或 using 和有什么区别`||`？

注意：我调查了这个并找到了我自己的答案，我将其包含在下面。请随时纠正我或发表您自己的看法。肯定有改进的余地！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-22T12:55:41.687

两者有不同的用途。尽管在许多情况下（在处理布尔值时）它们可能看起来具有相同的效果，但重要的是要注意逻辑或是短路的，这意味着如果它的第一个参数计算为真，则留下第二个参数未评估。位运算符无论如何都会计算它的两个参数。

类似地，逻辑与是短路的，这意味着如果它的第一个参数计算为假，那么第二个参数不计算。同样，按位与不是。

你可以在这里看到这个：

```
int x = 0;
int y = 1;
System.out.println(x+y == 1 || y/x == 1);
System.out.println(x+y == 1 |  y/x == 1); 
```

第一个打印语句工作得很好并返回真，因为第一个参数的计算结果为真，因此计算停止。第二个打印语句出错，因为它不是短路，并且遇到被零除。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-22T12:50:52.540

逻辑运算符作用于布尔值，位运算符作用于位。在这种情况下，效果将是相同的，但有两个不同之处：

1.  位运算符不是为此而设计的，这使得它更难阅读，但最重要的是
2.  逻辑 OR 运算符将评估第一个条件。如果为真，不管下一个条件的结果是什么，结果都会为真，所以*不执行第二个子句*

这里有一些方便的代码来证明这一点：

```
public class OperatorTest {

    public static void main(String[] args){
        System.out.println("Logical Operator:");
        if(sayAndReturn(true, "first") || sayAndReturn(true, "second")){
            //doNothing
        }

        System.out.println("Bitwise Operator:");
        if(sayAndReturn(true, "first") | sayAndReturn(true, "second")){
            //doNothing
        }
    }

    public static boolean sayAndReturn(boolean ret, String msg){
        System.out.println(msg);
        return ret;
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-22T13:00:09.673

对于程序员来说，只有一个区别。

1.  您的逻辑运算符是逻辑运算符，即它们仅测试一个条件并根据该条件获得结果。

**布尔函数() || 如果其中任何一个为真，则otherBooleanFunction()**将为真。同样，如果任何一个为假，则**booleanFunction() && otherBooleanFunction()**将为假。那么，为什么要测试另一个。这就是逻辑运算符所做的。

但按位检查两者。这个概念的一个常见应用如下。

```
if(someObject != null && someObject.somemethod()) 
```

所以，在这种情况下，如果你更换`&&`的话，`&`那就等一场灾难吧。你很快就会得到讨厌的 NullPointerException ......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-22T12:57:44.110

```
if( booleanFunction() || otherBooleanFunction() ) {...} 
```

在这种情况下，如果`booleanFunction()`返回`true`，则`otherBooleanFunction()`不会执行。

```
if( booleanFunction() | otherBooleanFunction() ) {...} 
```

但是在按位运算符中，这两个功能都`booleanFunction()`-`otherBooleanFunction()`无论`booleanFunction()`返回`true`还是`false`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-27T16:52:37.917

位和逻辑运算符之间的区别- 1.位运算符适用于位，而逻辑运算符适用于语句。2\. 按位与由 & 表示，而逻辑与由 && 表示。3\. 按位或由 | 表示 而逻辑或由 || 表示。

# apache-flex - 如何使用标头中的文件名作为 FileReference.download 的默认文件名？

> ID：11156523
> 
> 赞同：0
> 
> 时间：2012-06-22T12:50:51.333
> 
> 标签：apache-flex, air

在我们的 AIR 应用程序中，我希望用户能够将文件下载到他选择的位置。这可以通过以下方式轻松完成：

```
var fileReference:FileReference = new FileReference();
fileReference.download( request ); 
```

`URLRequest`指向一个`http://myserver/myapp/download`servlet 。如果我`navigateToUrl`在我们的 Web 应用程序中执行操作，浏览器将正确使用服务器放在 HTTP 标头中的文件名。但是，在 AIR 应用程序中，它会建议`download`用户作为文件名（因为这可能是 URL 的最后一部分）。

如何确保 AIR 应用程序中的下载也使用该名称？

我知道该`download`方法有一个可选的第二个参数来设置默认文件名，但我不知道 HTTP 标头中的什么是客户端编译时的文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:16:36.793

我设法用以下代码做到了：

```
 var stream:URLStream = new URLStream();
    stream.addEventListener( HTTPStatusEvent.HTTP_RESPONSE_STATUS, function ( event:HTTPStatusEvent ):void
    {
        var fileName:String;
        for each(var requestHeader:URLRequestHeader in event.responseHeaders)
        {
            if (requestHeader.name == "Content-Disposition")
            {
                fileName = requestHeader.value.substring( requestHeader.value.indexOf( "=" ) + 2, requestHeader.value.length - 1 );
                logger.info( "Found filename in HTTP headers: {0}", [fileName] );
                break;
            }
        }

        stream.close();

        logger.info("Start file download...");
        var fileReference:FileReference = new FileReference();
        fileReference.addEventListener(Event.COMPLETE, download_completeHandler );
        fileReference.addEventListener(ProgressEvent.PROGRESS, download_progressHandler );
        fileReference.download( request, fileName );
    } );

    stream.load( request ); 
```

我首先使用`URLStream`该类来获取 HTTP 标头。一旦我有了标题，我就关闭了流（因为它是一个大文件，我还不想下载实际数据）。从标题中，我提取了`Content-Disposition`部件中的文件名，并将该名称用作传递给`FileReference.download()`方法的默认名称。

# android - 从套接字读取数据花费了很多时间

> ID：11156526
> 
> 赞同：-1
> 
> 时间：2012-06-22T12:50:58.000
> 
> 标签：android, sockets, data-transfer

我正在使用套接字从一部 Android 手机和 PC 传输数据，我正在使用`DataInputStream`.

但是数据传输需要很长时间，传输一个 4 MB 的文件大约需要 10 分钟。

谁能提出更好的方法来做到这一点？

我对代码进行了一些更改，现在读取大约 1 Mb 的数据需要 15 秒。我想提高它的性能。我的代码是：

```
InputStream is= socket.getInputStream();
DataInputStream inChannel= new DataInputStream(new BufferedInputStream(in));
ByteArrayOutputStream baos = new ByteArrayOutputStream();
int oneByte;
while ((oneByte = inChannel.read()) != -1) {
        if (oneByte == 0) {
            break;
        }        
        baos.write(oneByte);
        byteCount++;
    }
byte[] inData = baos.toByteArray();
baos.close(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-22T19:24:01.903

你确定你没有在它们之间发送空包或包做其他事情吗？如果您在数据包未到达其目的地的情况下使用 TCP（在路由器或其中一个设备上的连接之间的某处，缓冲区被其他数据包填满），则必须重新发送数据包。这可能是因为您的设置。鉴于您提供给我们的信息很少，我可以给出以下建议：

研究更高级的类型，我假设您没有使用这些类型中的任何一个：

一个发送一个接收线程；发送线程将您放入队列的数据包推出：

* * *

## |P| - 数据包保存在程序的 Que 部分中

## 发送线程 <-| 磷 | 磷 | 磷 | <-应用程序/程序

## 回复 -> | 磷 | 磷 | 磷| P -> 应用程序/程序双端队列和分析数据

* * *

因为您的发送和接收队列系统彼此并肩工作，所以它们不断缓冲接收和发送的数据包。您的设置似乎发生的事情（据我假设）是您有一个循环来获取最新的数据包并分析它们。这意味着硬件（网络硬件的一部分）缓冲区充满了程序正在执行其他操作的数据包，并且当您的程序开始收集它们时，其中一些已经丢失。这导致一方去“我没有得到那些数据包，再次发送它们”，换句话说，你重新发送你应该吸进一个等待出列和分析的队列的数据包。无论程序以多快的速度返回以获取该数据并对其进行处理，队列都会增长（当然，您被限制在 RAM 中）。

* * *

另一种方法是做一个握手系统，其中一个程序等待直到最后一个数据包被传输、接收，而另一端则说“酷，给我下一个”。这会减慢您的下载/上传速度，但比从一个缓冲区末端落下的数据包要快一点（每个节点，例如您的路由器都会缓冲您的数据包，以防进入的数据包超过它可以处理的数量）循环）在网络中。

* * *

如果可以在一端或两端使用状态机，则应使用该状态机。当您的应用程序正在下载文件时，将其锁定为接收状态，这样它就不会尝试同时发送/接收其他内容。下载完成后，切换到任何其他状态（例如，打开文件状态）。如果你对状态机不太了解，我建议你看看维基百科的文章：

[http://en.wikipedia.org/wiki/Finite-state_machine](http://en.wikipedia.org/wiki/Finite-state_machine)

# c - 粘贴“HELLO”和“WORLD”时出错，未提供有效的预处理令牌

> ID：11156531
> 
> 赞同：9
> 
> 时间：2012-06-22T12:51:13.207
> 
> 标签：c, c-preprocessor

这是错误的代码

```
#include<stdio.h>

#define CAT_I(A, B)         A ## B
#define CAT(A, B)           CAT_I(A,B)

void main (void)
{
        printf(CAT("HELLO","WORLD"));
} 
```

为什么它会给出这个错误？我该如何解决？

**编辑**

这就是我想要做的

```
#define TAG                   "TAG"
#define PRE                   CAT(CAT("<",TAG),">")  
#define POS                   CAT(CAT("</",TAG),">") 

#define XML      CAT(CAT(PRE,"XML SOMETHING"),POS) 
```

然后

```
printf(XML); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T12:52:42.790

的结果`##`必须是单个标记，而`"HELLO""WORLD"`不是单个标记。要连接字符串，只需将它们并排放置：

```
printf("HELLO" "WORLD"); 
```

或更改您的宏以删除`##`.

```
#define CAT(A, B) A B 
```

当它们之间没有中间标记时，字符串文字被连接在一起。

# html - 即使关闭 Javascript，如何在页面加载时将页面居中？

> ID：11156539
> 
> 赞同：1
> 
> 时间：2012-06-22T12:51:40.543
> 
> 标签：html, css, layout

如果我正在设计一个带有中心布局的页面，有点像 Yahoo Answers，我该怎么做？我本可以使用 Javascript 在页面加载时捕获屏幕宽度，并相应地更改主 div，但用户可能关闭了 Javascript，那么在这种情况下该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:52:59.717

只需将您的内容放入 a`<div>`并将其设置为固定宽度`margin:auto`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T12:53:29.240

```
#container { 
   margin-left:50%; 
   margin-right:50%; 
} 
```

**如果您知道宽度，只需使用`margin: 0 auto;`**：

```
#container { 
   width:500px;
   margin:0 auto; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:58:42.193

这是你的答案:) [http://jsfiddle.net/eJJKf/](http://jsfiddle.net/eJJKf/)

# javascript - 从文本区域获取行并进行比较

> ID：11156540
> 
> 赞同：0
> 
> 时间：2012-06-22T12:51:43.407
> 
> 标签：javascript, html

我想要页面上的两个下一个框，然后您可以将文本复制/粘贴到其中并使用 JavaScript 比较两者。

```
<textarea id="first"></textarea>
<textarea id="second"></textarea> 
```

使用 JavaScript 然后我想用简单的东西逐行比较这两者

```
if [line X of id="first"] != [line X of id="second"] 
```

然后我想强调一下这些台词。

我不确定如何逐行访问 textarea 的值，还是需要获取整个值并将其拆分为数组？

有人可以为我提供逐行访问文本区域的语法吗？

另外，如果您认为我做错了，或者他们的方法更简单，请告诉我！

编辑：这是我的完整解决方案：

HTML

```
<!DOCTYPE html>
<html>
<head><script src="split.js?" type="text/javascript"></script>
</head>
<body>
<textarea style="float: left; width: 45%" id="first" name="comments" autocomplete="off" cols="40" rows="5" width="50%"></textarea>
<textarea style="float: right; width: 45%" id="second" name="second" autocomplete="off" cols="40" rows="5"></textarea><br>
<button onClick="compare()">Compare</button>
<br><br><br><br><br><br><br><center><div id="results"></div></center>
</body>
</html> 
```

Javascript

```
function compare() {
    document.getElementById('results').innerHTML = "";
    var first = document.getElementById("first");
    var second = document.getElementById("second");
    if(document.all) { // IE
        var f = first.value.split("\r\n");
        var s = second.value.split("\r\n");
    } else { //Mozilla
        var f = first.value.split("\n");
        var s = second.value.split("\n");
    }
    for(var i=0; i<f.length; i++) {
        if (f[i] !== s[i]) {
            var row = i;
            row++
            document.getElementById('results').appendChild(document.createTextNode("Box 1 Does not Match Box 2 on line: " + row));
            document.getElementById('results').appendChild(document.createElement('br'));
        }
    }
}; 
```

有点菜鸟，但我正在学习！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:58:40.243

```
text1 = document.getElementById("first").value.split("\n");
text2 = document.getElementById("second").value.split("\n");

var limit =  text1.length > text2.length ?  text1.length : text2.length;

for(i=0;i<limit ; i++)
{
    if(text1[i] == text2[i])
    {
        alert(true);
    }
    else
    {
        alert(false);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:18:45.013

此代码获取字符串，在换行符处将其拆分，并返回位于提供的索引处的字符串：

```
function line( n, source ) {

    var a = source,
        b = a.split( '\n' );

    return b[ n - 1 ];

}​ 
```

你可以像这样使用它：

```
if ( line(5, text) === "whatever" ) {
    // ...
} 
```

你可以在这里看到一个演示：http: [//jsfiddle.net/wFMty/](http://jsfiddle.net/wFMty/)

# delegates - 使用点表示法与括号表示法设置属性

> ID：11156542
> 
> 赞同：1
> 
> 时间：2012-06-22T12:51:48.480
> 
> 标签：delegates

这会正确设置委托，并且一切正常：

```
 UINavigationController *nc = [segue destinationViewController];
    RecipeAddViewController *rc = [nc.viewControllers objectAtIndex:0];
    rc.delegate = self; 
```

当我做：

```
 [[[[[segue destinationViewController] viewControllers]objectAtIndex:0]delegate]self]; 
```

委托方法永远不会被调用。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T15:09:39.597

这 '。' 语法将根据使用情况调用 getter 和 setter。然而，在消息语法中，我们需要像下面这样调用显式设置器。

```
 [[[[segue destinationViewController] viewControllers]objectAtIndex:0] setDelegate:self] 
```

# ios - 如何从路径字符串中提取文件名

> ID：11156545
> 
> 赞同：-2
> 
> 时间：2012-06-22T12:51:58.657
> 
> 标签：ios, nsstring

为了在 iPad 上保存文件，我需要`sites/default/files/`在以下路径字符串中获取文件名子字符串（在 之后）：

```
sites/default/files/243347_TroubleShootingSqlserver20052008.pdf 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:02:35.170

设置你的路径`NSURL *targetURL.`，然后

```
NSString *filename = [[targetURL path] lastPathComponent]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:06:36.453

```
NSArray* pathURL = [path componentsSeparatedByString: @"/"];
NSString* pdfFileName = [pathURL objectAtIndex: [pathURL length]]; 
```

# vb.net - 在richtextbox中突出显示颜色

> ID：11156546
> 
> 赞同：0
> 
> 时间：2012-06-22T12:52:09.197
> 
> 标签：vb.net, editor

```
Public Sub textcolorchanged()
    Dim searchword As String = RichTextBox2.Text.ToString.Trim

    Dim index1 As Integer = 0

    While index1 <> -1
      If (index1 < ORGFILETXT.Text.Length) Then
        index1 = ORGFILETXT.Find(searchword, index1, RichTextBoxFinds.None)
        'If (index1 <= ORGFILETXT.TextLength) Then
            If index1 <> -1 Then
                ORGFILETXT.SelectionStart = index1
                ORGFILETXT.SelectionLength = searchword.Length
                ORGFILETXT.SelectionColor = Color.Red
                index1 = index1 + searchword.Length
            End If
        'End If

      Else
          index1 = -1
      End if
    End While
End Sub 
```

我搜索了 datagridview1 行的单词并在富文本框中突出显示了搜索词。文本（它有全部文本）我在 datagridview1 鼠标单击和上键和下键事件中调用了这个方法

当我单击鼠标并在 datagridview1 行搜索词上向上和向下键时，单词在富文本框中突出显示。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:38:31.453

阅读文档`RichTextBox.Find Method (String, Int32, RichTextBoxFinds)`我怀疑，如果找不到字符串，则返回值为负数，但不是-1。
如果是这种情况，那么您的代码可能无法设置选择颜色。

您可以尝试更改此行

```
If index1 <> -1 Then 
```

和

```
If index1 >= 0 Then 
```

另请参阅他们[在 MSDN 中的示例](http://msdn.microsoft.com/en-us/library/9be0980x)

# javascript - 使用函数管理 Backbone 中的关系

> ID：11156549
> 
> 赞同：3
> 
> 时间：2012-06-22T12:52:12.770
> 
> 标签：javascript, backbone.js, backbone-relational

我正在（第一次）使用 Backbone.js 创建一个相当简单的应用程序。我目前正在与两个具有一对多关系的实体合作：

*   项目：有很多组
*   组：属于一个项目

我研究了几种表示模型之间关系的不同方式，从 Backbone 自己的建议到韧带再到 Backbone-relational。然而，我最终决定使用简单的函数调用。例如，在我的“项目”模型中，有一个名为 groups() 的函数：

```
groups: function() {
  return new Collections.Groups(groups.where({project_id: this.get('id')}));
} 
```

在 Group 模型中：

```
project: function() {
  return projects.where({id: this.get('project_id')})[0];
} 
```

这使我可以执行以下操作：

```
var foo = new Project();
var foo_groups = foo.groups();
foo_groups.at(0).get('name');

var bar = new Group();
var bar_project = bar.project();
bar_project.get('name'); 
```

对我来说，这里的权衡是维护最新关系的开销（当使用骨干关系之类的东西时）与每次想要获取项目组时调用“groups()”函数所用的处理时间。

当我以这种方式建立更多关系时，任何人都可以就我可能遇到的任何陷阱提供建议，也许会推荐一个更好的解决方案（除了上面提到的扩展）？该应用程序最终将有大约 6 个实体，具有各种一对多和多对多关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:37:07.477

### 项目组

我有一个我所说的实现`AutoUpdatedCollection`。

*我在你有一个包含一个类的每个模型的共享集合*的场景中使用它，并且这个集合用于填充在共享集合更新时必须*更新的**子集合。*

 *检查[Backbone AutoUpdatedCollection](https://gist.github.com/3288350)的实现。

按照您的示例，我想有一个名为的*公共/共享集合*`window.groups`，然后我将`Project`像这样实现模型：

```
// code simplified and no tested
var Project = Backbone.Model.extend({
  initialize: function(){
    this.groups =
      new App.AutoUpdatedCollection({
        name:             "Project-" + this.id + "-groups",
        sourceCollection: window.groups,
        filterField:      "project_id",
        filterValue:      this.id
      }).filteredCollection;

    this.groups.on( "add", this.addGroup, this );
    this.groups.on( "remove", this.removeGroup, this );
  }
}); 
```

也许没有这么简单，如果您有任何问题，请告诉我。

### 组项目

我只是`Group.project`在以下初始化属性`Group.initialize()`：

```
var Group = Backbone.Model.extend({
  this.project = window.projects.where({id: this.get('project_id')})[0];
}); 
```*

# jquery - Drupal 表单 JavaScript 延迟

> ID：11156552
> 
> 赞同：1
> 
> 时间：2012-06-22T12:52:32.860
> 
> 标签：jquery, drupal-7

谁能告诉我如何在 Drupal 的 ajax 代码完成时执行我的自定义 jQuery 代码？

上下文是一个显示表单的 Drupal 模块。其中一个表单组件是一个选择列表，其中显示了以下代码：

```
$form['selected'] = array(
'#type' => 'select',
'#title' => t('add to sequence ...'),
'#options' => $types,
'#default_value' => $types['select'],
'#description' => t('Select an option.'),
'#ajax' => array(
    'callback' => '_ajax_selected_node_callback',
),
); 
```

`_ajax_selected_node_callback`每次选择一个选项时，Drupal 都会正确调用。我需要在选择列表 AJAX 回调完成后立即执行我的自定义 jQuery 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:30:59.720

一种方法是在 AJAX 回调完成后使用 Drupal.settings 将信息传递给您的自定义 JS 文件。因此，在您的表单中，您将添加如下内容：

```
if (isset($form_state['values']['selected'])) {
  drupal_add_js(array('MODULENAME' => array('selected' => $form_state['values']['selected'])), 'setting');
} 
```

在您的自定义 JS 文件中，您将拥有如下内容：

```
(function ($) {

Drupal.behaviors.MODULENAME = {
  attach: function(context, settings) {
    // listen for select to change and get the value if it does
    if (typeof settings.MODULENAME != "undefined" && typeof settings.MODULENAME.selected != "undefined") {
      $value = settings.MODULENAME.selected;
      // do something
    }
  }
};

})(jQuery); 
```

我没有检查上面的错误，但我的意思是使用 Drupal.settings。

# c# - AJAXToolkit 动态隐藏选项卡？

> ID：11156553
> 
> 赞同：2
> 
> 时间：2012-06-22T12:52:33.950
> 
> 标签：c#, asp.net

我知道如何隐藏标签：

```
MyTabContainerID.Tabs[1].Visible = false; 
```

这样可行。我遇到的问题是更改由 radioButtonList selectedIndexChanged 事件的回发触发的选项卡的可见性。

当页面到达我的 selectedIndexChanged 事件处理程序时，选项卡已经从 ViewState 加载了 Visible=True。我可以在我的 selectedIndexChanged 事件中整天将其更改为 false，它不会隐藏它已经加载的选项卡 b/c。

**ASPX**

```
<asp:RadioButtonList ID="rblMyRadioButtonList" runat="server" AutoPostBack="true" OnSelectedIndexChanged="rblMyRadioButtonList_SelectedIndexChanged">                                                        
<asp:ListItem Text="Yes" Value="True" Selected="True"></asp:ListItem>
<asp:ListItem Text="No" Value="False"></asp:ListItem> 
```

**澳交所**

```
protected void Page_Init(object sender, EventArgs e)
{
    try
    {
        MyTabContainerID.Tabs[1].Visible = Tab1Visibility;
    }
    catch (Exception ex)
    {
        common.alert("Error in PageName.Page_Init.<br>ERROR=" + ex.Message);
    }
}
protected void rblMyRadioButtonList_SelectedIndexChanged(object sender, EventArgs e)
{
    try
    {       
        Tab1Visibility = Convert.ToBoolean(((RadioButtonList)sender).SelectedValue);
        MyTabContainerID.Tabs[1].Visible = Tab1Visibility;  //BY THE TIME THIS HAPPENS IT'S ALREADY ON THE PAGE WITH VISIBLE=TRUE                   
    }
    catch (Exception ex)
    {
        common.alert("Error in PageName.rblMyRadioButtonList_SelectedIndexChanged.<br>ERROR=" + ex.Message);
    }
}

protected bool Tab1Visibility
{
    get { return (bool)Session["ses_bTab1Visibility"]; }
    set { Session["ses_bTab1Visibility"] = value; }
} 
```

想法？建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:08:44.853

您应该能够在 `rblMyRadioButtonList_SelectedIndexChanged`方法中设置选项卡控件的可见性。即使此时选项卡控件的状态已经从 ViewState 加载，它仍然可以被覆盖。

我有一个类似的问题，无法设置 Visibilty。它快把我逼疯了。解决方案是在**容器（父）控件**中明确设置可见性。这将覆盖子控件的设置。会不会是你的问题。

除此之外，照常做。断点`rblMyRadioButtonList_SelectedIndexChanged`和观察值。另外-您可以手动强制打开可见性`Page_PreRender`-仍然在下游。

**编辑**

可能影响它的另一件事是更新面板。如果单选按钮列表位于更新面板中并且选项卡位于其外部，则更新将不起作用，因为带有选项卡的页面部分不会被刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:38:29.277

这就是我最终做的事情：

* **.ASPX**

```
<script type="text/javascript">
    function disableTab1() {
            $find('<%=MyTabContainer.ClientID%>').get_tabs()[1].set_enabled(false);
        }
    function enableTab1() {
        $find('<%=MyTabContainer.ClientID%>').get_tabs()[1].set_enabled(true);
    }
</script>

<!--THESE RADIOBUTTONS LEVERAGE THE TAB CONTAINER'S CLIENTSIDE set_enabled METHOD
<asp:RadioButtonList ID="rblMyRadioButtonList" runat="server" RepeatDirection="Horizontal" RepeatLayout="Flow">
    <asp:ListItem Text="Yes" Value="True" Selected="True" onClick="enableTab1();"></asp:ListItem>
    <asp:ListItem Text="No" Value="False" onClick="disableTab1();"></asp:ListItem>
</asp:RadioButtonList> 
```

* **Page_Load 上的 .ASCX**

```
//I RUN A SQL QUERY TO DETERMINE WHETHER OR NOT TO DISABLE TAB1 HERE 
//IF IT SHOULD BE DISABLED I REGISTER THIS STARTUP SCRIPT
ClientScriptManager cs = Page.ClientScript;
Type cstype = this.GetType();
String csScriptName = "Tab1_Visibility";
if (!cs.IsStartupScriptRegistered(cstype, csScriptName))
{
    cs.RegisterStartupScript(this.Page.GetType(), csScriptName, "setTimeout(function() { disableTab1()}, 0);", true);
} 
```

# c# - 在 finally 块中测试返回值

> ID：11156554
> 
> 赞同：2
> 
> 时间：2012-06-22T12:52:35.830
> 
> 标签：c#, try-finally

所有，这是一个简单的。`finally`有没有一种方法可以在不做的情况下测试块内的返回值

```
bool result = false;
try
{
    if (someCondition)
    {
        result = true;
        return result;
    }
    return result;
}
finally
{
    if (result)
     // Do something mind-blowing.
} 
```

我是否必须使用变量`result`是否有更清洁的方法？

*注意：我知道这不是我现在正在做的很多工作。我对 .NET 世界的复杂性很好奇。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:00:20.803

简短的回答是：不，这是不可能的。我认为您最感兴趣的是代码的良好可读性。

有时您实际上需要在 finally 块中引用其他变量，即使您的函数正在返回某些内容。例如，如果您正在使用一些 IDisposable 实现并且您不想或不能（为了保持可读性）使用`using`块，那么您需要`Dispose()`在`finally`块中使用它们。

因此，拥有额外的声明并不是什么大不了的事，特别是如果它只有一个。代码仍然可读。

对于多个嵌套的 try/catch 语句，一个好的设计决策是将每个 try/catch 块以及与其相关的所有逻辑放在一个单独的函数中，该函数返回 true/false 或在调用者的上下文中有用的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:13:27.030

如果是我，我会有另一个变量来指示 finally 块中需要一些东西。

你在另一条评论中提到了 SqlConnection 所以你可以这样做

if (myConnection != null) { myConnection.Dispose(); }

虽然 pukka .net 方式会在 using 块中建立连接，但最终不需要摆脱它。

如果你想坚持结果，那么

```
bool result = false;
try
{     
  if (someCondition)     
  {         
    result = true;         
  }     
} 
finally 
{     
  if (result)      // Do something mind-blowing. 
} 
return result; 
```

对我来说会更有意义，尽管对其他人来说可能不是......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:12:14.383

由于 C# 没有等效于 D 的[范围](http://dlang.org/statement.html#ScopeGuardStatement)，因此您几乎只能使用`try..finally`.

另请参阅：[D 异常安全](http://dlang.org/exception-safe.html)。

# list - 根据列表中的现有原子生成新原子

> ID：11156556
> 
> 赞同：3
> 
> 时间：2012-06-22T12:52:36.843
> 
> 标签：list, prolog, iso-prolog

我想知道如何根据另一个列表中的现有原子在列表中生成一个新原子。给定列表：

```
L=[a,b,c,d] 
```

我想生成一个新列表，例如：

```
P=[a_,b_,c_,d_] 
```

换句话说，类似于字符串加法的东西，例如

```
String str1 = str2 + "_"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:46:28.000

内置的 ISO`atom_concat/3`是在这里使用的：

```
?- atom_concat(a,'_',A)。
A = a_。

```

但是现在如何映射整个列表元素呢？`maplist/3`服务于这个目的，

```
?- maplist(atom_concat('_'), [a,b,c,d], Xs)。％ 错误的！
Xs = ['_a','_b','_c','_d']。

```

……或者差不多。我们在前面加了下划线！`maplist/3`像许多其他高阶谓词一样*，在末尾*添加了额外的参数。在函数式编程语言中，这称为部分应用程序。但在我们的例子中，最好在前面添加一个参数，在末尾添加一个参数。你可以自己定义，比如

```
suffix_prefix_concat(S,P,C) :-
   atom_concat(P,S,C)。

```

虽然这很好用，

```
?- maplist(suffix_prefix_concat('_'),[a,b,c,d], Xs)。
Xs = [a_,b_,c_,d_]。

```

...它有它自己的缺点：发明一个新的定义往往很麻烦：想想看，你必须想出一个新的名字供一次性使用！一个通用的解决方案[`library(lambda)`](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/ISO-Hiord)是预装在 YAP 中，你也可以为 SWI 下载它。请参阅适用于任何符合 ISO 标准的系统（如 GNU、B、SICStus）[的通用 ISO 定义的链接。](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/ISO-Hiord#implementation)

```
?- maplist(\P^C^atom_concat(P,'_',C),[a,b,c,d],Xs)。
Xs = [a_,b_,c_,d_]。

```

并且由于可以避免最后一个参数，与`suffix_prefix_concat`上面类似，我们可以写得更紧凑：

```
?- maplist(\P^atom_concat(P,'_'),[a,b,c,d],Xs)。
Xs = [a_,b_,c_,d_]。

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:14:28.903

不知道它是否适用于所有 Prolog 系统，但`concat_atom/2`可以解决问题：

```
?- concat_atom([a,'_'], A).
A = a_. 
```

# c# - HTML 屏幕抓取 - 并非所有元素都在 HttpWebResponse 中

> ID：11156558
> 
> 赞同：2
> 
> 时间：2012-06-22T12:52:39.900
> 
> 标签：c#, screen-scraping

我目前正在尝试使用以下代码进行屏幕抓取：

```
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
HttpWebResponse theResponse = (HttpWebResponse) request.GetResponse();
using (StreamReader reader = new StreamReader(theResponse.GetResponseStream(), Encoding.UTF8))
{
    string s = reader.ReadToEnd();
} 
```

但是，我关心的数据（HTML 表格）不是结果的一部分。当我右键单击页面和 ViewSource 时，我也看不到我关心的 HTML 表 - 但是当我使用 Firebug 检查它时，我确实在 DOM 中看到它。

它似乎也不是通过 ajax 加载的。

那么 - 是否有另一种方法，使用 C# 来获取开发者工具视图中存在的 DOM，而不是 ViewSource 结果？

不幸的是，此页面不公开，因此我无法粘贴 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:02:52.020

> 它似乎也不是通过 ajax 加载的。

您不需要使用 AJAX 来将数据动态添加到 DOM。你可以完美地使用标准的javascript。

要抓取此类页面，您需要一个处理 javascript 的抓取器。WinForms 中的[WebBrowser控件就是这样做的。](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)它允许您加载网页并浏览 DOM，就像您在 FireBug 中所做的一样（除了快照来自 IE，因为 WebBrowser 只是 IE 的包装器）。

但由于 WebBrowser 控件并非设计用于多线程环境（例如 Web 应用程序），您将不得不使用第三方库来完成该抓取任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:50:04.983

您是否使用过 Fiddler 或 Ethereal 来查看在后台连接了哪些 URL？如果您在后台调用的某个 URL 的响应中找到 HTML 表，则可以从该 URL 中抓取数据。您要解析哪个 URL/表？

# amazon-ec2 - 对于 Amazon Web Services 上极短的流量峰值，正确的 Cloudwatch/Autoscale 设置是什么？

> ID：11156560
> 
> 赞同：6
> 
> 时间：2012-06-22T12:52:43.300
> 
> 标签：amazon-ec2, amazon-web-services, amazon-elastic-beanstalk, autoscaling, amazon-cloudwatch

我有一个在亚马逊弹性豆茎上运行的网站，其流量模式如下：

*   通常约 50 个并发用户。
*   发布到 Facebook 页面时，约 2000 个并发用户 1/2 分钟。

亚马逊网络服务声称能够快速扩展以应对此类挑战，但 cloudwatch 的“大于 x 超过 1 分钟”设置对于这种流量模式似乎不够快？

通常在几秒钟内所有 ec2 实例崩溃，杀死所有 cloudwatch 指标，整个站点停机 4/6 分钟。到目前为止，我还没有找到适用于这个场景的配置。

这是一个较小的事件的图表，该事件也杀死了该站点： ![在此处输入图像描述](../Images/078d81d61ec44dbcd79a3b539ecc03cc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:46:37.087

这些链接是否可以按预期发布？如果是这样，您可以使用[按计划扩展](http://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/scaling_plan.html#schedule_time)或作为替代方案，您可以更改 Auto Scaling 组的 DESIRED-CAPACITY 值，甚至`as-execute-policy`在链接发布之前触发直接扩展。

您知道您可以在一个组中拥有多个扩展策略吗？因此，您可能有针对您的案例的特殊 Auto Scaling 策略，`SCALE_OUT_HIGH`例如一次增加 10 个实例。看看`as-put-scaling-policy`命令。

此外，您需要检查您的代码并找到瓶颈。

您使用什么 HTTPD？考虑切换到 Nginx，因为它比 Apache 更快且资源消耗更少的软件。尝试使用 Memcache ... 像 Redis 这样的 NoSQL 进行高度读写也是不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:33:55.763

AWS 的建议如下：

> 我们一直在努力使我们的系统更具响应性，但是根据您的用例似乎需要，以几秒钟的响应时间自动配置虚拟服务器是一项挑战。也许有一种解决方法可以更快地响应，或者在请求开始增加时更具弹性。
> 
> 您是否观察过如果您使用更大的实例类型或在稳定状态下使用更多的实例，站点的性能是否更好？这可能是一种应对入站请求快速增长的方法。虽然我承认它可能不是最具成本效益的，但您可能会发现这是一个快速解决方案。
> 
> 另一种方法可能是调整您的警报以使用可以更快反映（或预测）您的需求增长的阈值或指标。例如，如果您将警报设置为在超过 75 或 100 个用户后添加实例，您可能会看到更好的性能。您可能已经在这样做了。除此之外，您的用例可能还有另一个预测需求增长的指标，例如，您的 Facebook 页面上的帖子可能会先于请求的显着增加几秒钟甚至一分钟。使用 CloudWatch 自定义指标来监控该值，然后将警报设置为 Auto Scale 也可能是一种潜在的解决方案。

所以我认为最好的答案是以较低的流量运行更多实例，并使用自定义指标来预测来自外部来源的流量。例如，我将尝试监控 Facebook 和 Twitter 中带有网站链接的帖子并立即扩大规模。

# google-apps-script - 如何在事件处理程序中使用全局变量

> ID：11156562
> 
> 赞同：3
> 
> 时间：2012-06-22T12:52:47.843
> 
> 标签：google-apps-script

我有一个全局变量contacts， *var contacts = ContactsApp.getContacts();*

我的文本框有一个名为 search() 的 KeyUphandler。

在 search() 中，contacts[0].getPrimaryEmail() 给出一个错误，“ **Cant call method getPrimaryEmail of undefined** ”

但是 contacts[0].getPrimaryEmail() 在其他正常功能中工作正常。

我们不能在事件处理程序中使用全局变量吗？

代码如下，

//代码开始

```
 var contacts = ContactsApp.getContacts();

function ShowAuto() {

    var app = UiApp.createApplication().setTitle('Simple Autocomplete');

    var Panel = app.createVerticalPanel().setId('mainPanel').setWidth('555px');

    var textBox = app.createTextBox().setName('textBox').setWidth('330px').setId('textBox');

    var tBoxHandler = app.createServerKeyHandler('search');
    tBoxHandler.addCallbackElement(textBox);
    textBox.addKeyUpHandler(tBoxHandler);

    var listBox =    app.createListBox().setName('list').setWidth("330px").setId('list').setVisibleItemCount(5)
               .setStyleAttribute("border", "1px solid white")
               .setStyleAttribute("background", "white").setVisible(false);

   Panel.add(app.createLabel().setId('label'));

   Panel.add(textBox);
   Panel.add(listBox);

   app.add(Panel);

   var ownerEmail  = Session.getActiveUser().getEmail();

   // I used this method first.. It din work.
   // var contacts = ContactsApp.getContacts();
   // for (var i in contacts) 
   // {
   //  var emailStr = contacts[i].getPrimaryEmail();
   //  conts[i]=emailStr;
   // Browser.msgBox(emailStr);
   // }

   //These two calls are just to test, the contacts Array, They work fine :)

   getContact(0);
   getContact(1);

   var ss = SpreadsheetApp.getActiveSpreadsheet();
   ss.show(app);

   }

   function getContact(n)
   {

    // Browser.msgBox(contacts[n].getPrimaryEmail());
     Logger.log(contacts[n].getPrimaryEmail());  //works  fine 
     return contacts[n].getPrimaryEmail();
   }

   function search(e)
   {
      var app = UiApp.getActiveApplication();

   //Logger.log(contacts[0].getPrimaryEmail()); //Not working

     app.getElementById('label').setText(e.parameter.textBox.toString());
    // app.getElementById('label').setText(conts[0]);
     app.getElementById('list').setVisible(true);

     var searchKey = new RegExp(e.parameter.textBox.toString(),"gi");
     if (searchKey == "") 
       app.getElementById('textBox').setValue('');

     var listBoxCount = 0;

     for (i=0;i<5;i++){

       //Here is where i get error
        if(contacts[i].indexOf(e.parameter.textBox)!=-1 && listBoxCount < 5)
        {
          app.getElementById('list').addItem(conts[i]);
          listBoxCount++;
        }
     }

     } 
```

对不起，如果我不清楚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T16:27:39.013

好吧，我已经使用了[`UserProperties.setProperty`](https://developers.google.com/apps-script/reference/properties/user-properties#setProperty(String,String) "用户属性.setProperty")和`getProperty`函数来避免使用全局变量。

每当调用服务器处理程序时，将按照[https://developers.google.com/apps-script/class_serverhandler](https://developers.google.com/apps-script/class_serverhandler)中给出的方式重新计算全局变量，因此我的工作不正常。

感谢你们的支持 ：）

# mysql - 在另一列中使用别名

> ID：11156563
> 
> 赞同：3
> 
> 时间：2012-06-22T12:52:56.557
> 
> 标签：mysql, alias

这个问题是我之前的问题的扩展部分， ***[Finding number position in string](https://stackoverflow.com/questions/11135464/finding-number-position-in-string/11155594#11155594)。***

我有如下表`myTable`（myWord ==> varchar（10））

```
++++++++++++
+ myWord   +    
++++++++++++
+ AB123    +
+ A413     +
+ X5231    +
+ ABE921   +
+ 15231    +
+ 523      +
+ ABC      +
++++++++++++ 
```

我想要的是如下。

```
++++++++++++++++++++++++++++++++
+ myWord   + myPos + NewString +
++++++++++++++++++++++++++++++++
+ AB123    + 3     + AB        +
+ A413     + 2     + A         +
+ X5231    + 2     + X         +
+ ABE921   + 4     + ABE       +
+ 15231    + 1     +           +
+ 523      + 1     +           +
+ ABC      + 999   + ABC       +
++++++++++++++++++++++++++++++++ 
```

为了获得以上输出，我使用了以下查询。

```
SELECT 
  myWord, 
  LEAST (
    if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999)
  ) as myPos,
  if (LEAST (
    if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999)
  )=999,myWord,SUBSTR(myWord,1,LEAST (
    if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999)
  )-1)) as NewString
FROM myTable; 
```

## 我的问题是

在为列命名为**MyPos**之后，为什么我不能在另一列中使用该名称，如下面的查询所示？

```
SELECT 
  myWord, 
  LEAST (
    if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999)
  ) as myPos,
  if (myPos=999,myWord,SUBSTR(myWord,1,myPos-1)) as NewString
FROM myTable; 
```

但是，这给了我错误

```
Unknown column 'myPos' in 'field list': 
```

## [请参阅此处了解更多详细信息](http://sqlfiddle.com/#!2/53542/11)

***请建议我如何通过使用别名来缩短此查询***。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:07:13.907

尝试将最少的部分作为子选择。你可以别名。

像这样的东西：

```
SELECT 
  mytable.myWord, 
  myPos.l,
  if (l=999,mytable.myWord,SUBSTR(mytable.myWord,1,l-1)) as NewString
FROM myTable, 
(select myword, LEAST (
    if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999)
  ) as l from mytable)
as myPos
where myPos.myword = mytable.myword 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/53542/24)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:27:23.380

Based on @juergend answer, I also tried with below and its working too.

```
SELECT 
  t1.myWord, t2.l as MyPos, if (t2.l=999,t1.myWord,SUBSTR(t1.myWord,1,t2.l-1)) as NewString
FROM myTable t1 JOIN  
(select id, LEAST (
    if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999)
  ) as l from mytable) as t2
 ON t1.id=t2.id; 
```

**NOTE** : For this I have added `id` in table to JOIN two tables.

## [Demo](http://sqlfiddle.com/#!2/ea7e3/9)

# ios - 恢复购买选项 iOS

> ID：11156567
> 
> 赞同：4
> 
> 时间：2012-06-22T12:53:21.200
> 
> 标签：ios, in-app-purchase

我的问题是恢复我的购买。

我使用本教程将 IAP 集成到我的应用[教程](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

但是在我将二进制文件上传到应用商店后，Apple 拒绝了我的应用，因为它不使用恢复选项。

现在我尝试将此方法集成到应用程序中

```
- (void)restorePurchases {
    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
} 
```

但我觉得还是需要做点什么，因为还是不行。

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T12:59:44.137

您需要实现这些委托方法才能完成恢复

```
- (void)restoreTransaction:(SKPaymentTransaction *)transaction
-(void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
-(void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue 
```

# php - 在 PHP 中，我如何阅读不可靠的网页？

> ID：11156573
> 
> 赞同：0
> 
> 时间：2012-06-22T12:53:31.890
> 
> 标签：php, curl

我正在尝试在 PHP 中使用 Curl 来读取不可靠的网页。由于服务器错误，该页面通常不可用。但是，如果它可用，我仍然需要阅读它。此外，我不希望网页的不可靠性影响我的代码。我希望我的 PHP 能够优雅地失败并继续前进。这是我到目前为止所拥有的：

```
<?php
    function get_url_contents($url){
        $crl = curl_init();
        $timeout = 2;
        curl_setopt ($crl, CURLOPT_URL,$url);
        curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
        $ret = curl_exec($crl);
        curl_close($crl);
        return $ret;
    }
    $handle = get_url_contents ( 'http://www.mydomain.com/mypage.html' );
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:59:39.173

改用它，CURL 不再像我听说的那样被超级推荐，因为 PHP 包装器提供了更好的性能，并且随时随地都可以使用：

```
$currentcontext = stream_context_get_default();
stream_context_set_default(stream_context_create(array('timeout' => 2)));
$content = file_get_contents('url', $context);
stream_context_set_default($currentcontext); 
```

这会将默认流上下文设置为 2 秒后超时，并通过流包装器获取 url 的内容，该流包装器应该存在于 5.2 及更高版本的所有 php 版本中；

您没有义务根据您网站的代码恢复默认上下文，但这始终是一件好事。如果你不这样做，那么这个操作只需要 2 行代码就可以实现......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T04:09:19.377

您可以通过测试 HTTP 响应代码来测试 HTTP 代码以查看页面是否成功检索。我不记得 >200 和 <302 是否是正确的代码范围，如果您使用此方法，请在[http 响应代码处快速达到峰值。](http://www.helpwithpcs.com/courses/html/html_http_status_codes.htm "http状态码")

```
<?php
    function get_url_contents($url){
        $crl = curl_init();
        $timeout = 2;
        curl_setopt ($crl, CURLOPT_URL,$url);
        curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
        $ret['pagesource'] = curl_exec($crl);
        $httpcode = curl_getinfo($crl, CURLINFO_HTTP_CODE);
        curl_close($crl);

        if($httpcode >=200 && $httpcode<302) {
         $ret['response']=true;
        } else {
         $ret['response']=false;
        }

        return $ret;
    }
    $handle = get_url_contents ( 'http://192.168.1.118/newTest/mainBoss.php' );
    if($handle['response']==false){
          echo 'page is no good';
    } else {
             echo 'page is ok and here it is:' . $handle['pagesource'] . 'DONE.<br>';
    }

?> 
```

# javascript - Javascript 使用有效负载导航

> ID：11156581
> 
> 赞同：0
> 
> 时间：2012-06-22T12:54:00.150
> 
> 标签：javascript, http

HTTP 请求可以包含不一定来自 HTML 表单的有效负载。我的意思是不是经典的键/值格式。

我想在 JavaScript 中实现这一点：当用户点击一个按钮时，会调用一个函数，该函数将发出一个带有文本有效负载的 HTTP PUT 请求。

XMLHttpRequest 在接收服务器应答时似乎不允许页面的完整页面重新加载。另一方面，JavaScript Navigate 方法不允许添加有效负载。

你能帮我吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:57:14.950

如果您需要使用 PUT 动词，那么 XMLHttpRequest 是您唯一的选择。您不能使用隐藏（或非隐藏）表单执行 PUT，也无法使用表单设置内容传输编码。

但是，当 XMLHttpRequest 成功时，您可以使用文档对象模型根据服务器返回的内容更改页面内容。

例如，您可以删除所有现有元素，并将它们替换为服务器返回的 HTML。或者您可以将用户重定向到不同的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:56:53.333

您需要`<form>`使用 s 创建一个隐藏标签，`<input>`其中包含您的有效负载，然后`submit()`是它。

# javascript - 特定锚链接的平滑滚动

> ID：11156582
> 
> 赞同：0
> 
> 时间：2012-06-22T12:54:08.093
> 
> 标签：javascript, jquery, html, scroll, smooth-scrolling

我将 Google 的平滑滚动脚本用于特定的锚链接`#tothetop`，而不仅仅是任何`#`一个。我在 example.js 文件（您使用脚本下载）中完成了此操作：

改变：

```
$('a[href*=#]').click(function() { ... }); 
```

至：

```
$('a[href*=#tothetop]').click(function() { ... }); 
```

所以现在它只将平滑滚动应用于`#tothetop`，但我如何将它应用于其他不同的锚链接？例如：`#tothetop`, `#tothebottom`, `#gotothepub`, 等？（不要问我为什么不使用“#”，因为这是一个很长的故事，但简而言之 - 它与页面上的另一个脚本冲突）我试过了：

```
$('a[href*=#tothetop]','a[href*=#tothebottom]').click(function() { ... }); 
```

但这不起作用。我对 Javascript 和 PHP 不太了解，但我确信有一种简单的方法可以做到这一点？

example.js 的完整代码如下：

```
$(function(){

$('a[href*=#tothetop]').click(function() {

if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
    && location.hostname == this.hostname) {

        var $target = $(this.hash);

        $target = $target.length && $target || $('[name=' + this.hash.slice(1) +']');

        if ($target.length) {

            var targetOffset = $target.offset().top;

            $('html,body').animate({scrollTop: targetOffset}, 1000);

            return false;

        }

    }

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:09:39.150

我会使用它，因为显然您将滚动锚点都命名为“toTheAnchor”：

```
$('body').on('click', 'a[href^=#][href*=to]', function() {}); 
```

这应该选择所有以“#”开头并在单词中包含“to”的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:55:48.693

尝试

```
$('a[href^="#"]').click(...); 
```

此选择器将匹配`href`属性以 . 开头的所有锚点`#`。

你的例子是有效的，但它应该这样写

```
$('a[href*="#tothetop"], a[href*="#tothebottom"]') 
```

注意值周围的引号和单引号（仅使用一次）。

# javascript - javascript中的hasEventListener

> ID：11156585
> 
> 赞同：4
> 
> 时间：2012-06-22T12:54:24.630
> 
> 标签：javascript

JavaScript 没有`hasEventListener`函数。我可以用什么代替它？

我正在做：

```
someForm.addEventListener( "submit", _submitHandler, false ); 
```

而且我有一个“表单控制器”，它应该测试哪些表单具有提交事件的侦听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-12T18:58:07.883

如果您认为特定元素上有一个侦听器（并且您必须具有对侦听器的引用），那么只需使用事件类型和侦听器引用调用 removeEventListener()。如果没有侦听器（或引用不正确），该调用将不会执行任何操作，因此它并不是性能最佳的选择，但它确实有效。

# android - 在两个活动之间我想设置进度条

> ID：11156587
> 
> 赞同：0
> 
> 时间：2012-06-22T12:54:28.543
> 
> 标签：android, android-activity, progress-bar

```
Intent s = new Intent(getApplicationContext(), MainmusicActivity.class);
s.putExtra("tid",tid1);             
s.putExtra("songlist",r);
s.putExtra("position", position);
System.out.println(tid1);           
//s.putStringArrayListExtra("list",r);              
startActivity(s); 
```

//上面的代码一个activity到另一个activity的连接，在去其他activity的时候显示黑屏这里song is streaming time是黑屏。所以我想在这里设置进度条如何？请帮助我..........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:00:36.733

开始新活动时使用播放音乐和更新进度条的服务。

# c# - 如何在 WPF 中检索 DataGrid 内容的总高度？

> ID：11156592
> 
> 赞同：3
> 
> 时间：2012-06-22T12:54:44.147
> 
> 标签：c#, .net, wpf

我有一个数据网格：

```
<DataGrid x:Name="Foo" ... /> 
```

我想将元素的高度绑定到数据网格的高度。简单地做`{Binding ElementName=Foo, Path=ActualHeight}`是行不通的，因为它需要`ScrollViewer`' 高度，而不是数据网格内容的总高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:12:33.047

您需要找到 DataGrid 的 internal `ScrollViewer`，并绑定到它的`ViewportHeight`

根据您对该值的用途以及您需要它的位置，可以通过多种方式完成此操作。

通常这种事情对于仅查看目的是必需的，所以我会将代码放在 CodeBehind 中查找 ViewPort 高度

例如，使用一些[VisualTreeHelpers](http://rachel53461.wordpress.com/2011/10/09/navigating-wpfs-visual-tree/)，您可以执行以下操作：

```
// Find first child of type ScrollViewer in object Foo
var scrollViewer = VisualTreeHelpers.FindChild<ScrollViewer>(Foo);

// If object is found, set other control's height to ViewportHeight
if (scrollViewer != null)
{
    MyControl.Height = scrollViewer.ViewportHeight;
} 
```

我不记得是否有超过一个`ScrollViewer`......`DataGrid`你必须使用像[Snoop](http://snoopwpf.codeplex.com/)这样的东西才能确定。如果有，则按`.FindChild()`名称查找您应该能够使用的元素的重载。这个名字也可以通过像 Snoop 这样的东西来获得。

这也可以在 a 中完成`Converter`，您将在其中传递`DataGrid`给 Converter，并让它在 Converter 中找到`ScrollViewer`and`ViewportHeight`

```
<Grid Height="{Binding ElementName=Foo, 
                       Converter={StaticResource GetDataGridContentHeight}}" /> 
```

**编辑**

我实际上做了一些测试，DataGrid`ScrollViewer`处理大小的方式有点不同，可能是由于`Virtualization`. 它似乎使用基于行数的相对大小。

`DataGrid`我正在使用的测试有 23 行。`ScrollViewer.ExtentHeight`等于 23，并且是 3，这`ScrollViewer.ViewportHeight`意味着总共有 23 行，并且显示了 3 个完整的行。等于 20，这`ScrollViewer.ScrollableHeight`意味着我可以从 0 滚动到 20（因为显示了 3 个项目，所以不需要转到 23），并且`ScrollViewer.VerticalOffset`被设置为我当前滚动到的任何项目。

因此，要获得 virtualized 中项目的实际内容高度`ScrollViewer`，我认为您将必须获得`ActualHeight`其中一个可见行的 ，并将其乘以`ScrollViewer.ExtentHeight`以获得内容的实际大小。这仅在`Height`您的所有项目都相同的情况下才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:16:32.610

您可以将其包装`DataGrid`在另一个中`ScrollViewer`，然后 DataGrid 的实际高度将是正确的。

但是，这会带来性能损失，即无法*利用*`DataGrid`. 您必须进行测试，看看这是否会对您的用例产生重大负面影响。

# java - 分配值的困惑

> ID：11156603
> 
> 赞同：1
> 
> 时间：2012-06-22T12:55:43.240
> 
> 标签：java

以下两者之间是否有区别：

```
ArrayList list = getData();

public ArrayList getData(){
    return otherList;
} 
```

和

```
ArrayList list = someOtherArrayList; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:58:19.527

没有区别。在这两种情况下，您都在分配对`list`现有`ArrayList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:00:47.647

不，List 只是对内存中对象的**引用。**这意味着如果你这样做：

```
list1 = list2;
list1.add("abc"); 
```

`list2.get(list2.size()-1)`也将是“abc”。

在方法中，您返回相同的引用，因此它的行为相同。如果您在方法中返回列表的**副本**，那么两种方法不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:04:23.940

```
ArrayList list = someOtherArrayList; 
```

在这种情况下，直接将 someOtherArrayList 的地址分配给列表。

```
ArrayList list = getData();

public ArrayList getData() {   
    return otherList;
} 
```

在这种情况下，返回列表的地址被复制到临时变量中，然后将临时变量复制到列表中。这里地址复制到临时变量中，因为：当函数返回时，它在堆栈上的所有数据都被释放/删除，所以 otherList 对象引用也被删除。但在此之前，它是引用/地址被复制到临时变量中。当临时变量的地址被复制到列表变量中时。它也被删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:02:22.507

这很奇怪：

```
ArrayList list = getData();

public ArrayList getData(){
    return list;
} 
```

您将 list 设置为其自己的值，即最初的`null`.

因此，如果`someotherlist`不为空，则有所不同，因为您 1 什么也不做。

**编辑：**看到你的编辑。现在两个分配是相同的。没有区别。我们可以争辩说，其中一个在调用函数时可能会慢一些，但在这种情况下，JIT 编译器会快速内联它。

# parsing - 读取特定行并为我提供路径所用的平均、最低和最高时间的解析工具（批处理）

> ID：11156604
> 
> 赞同：0
> 
> 时间：2012-06-22T12:55:46.300
> 
> 标签：parsing, batch-file

所以我有一个 .log ，我需要读出这些行，例如：

"

2012-06-22 03:06:25 信息 Mohd Tahar，Azrul Haza ExecuteSingleContext 持续时间：251.9628 - Page_Load\RefreshGridAction\GetOrderObjectByOrderID

2012-06-22 03:06:25 信息 Mohd Tahar，Azrul Haza ExecuteSingleContext 持续时间：195.32 - Page_Load\RefreshGridAction\GetOrderListByOrderID

"

并将它们放入一个单独的 .txt 文件中，该文件按“Page_Load ...”之类的指令排序，但只有那些指令所用时间最长、最低和平均时间的指令。（数字如 251.9628）我是这个东西的新手，我也只是学徒，但我的老板想让我这样做......我不知道如何编码，我也没有任何其他经验.. :D 我什至不知道该怎么做。另一个问题是我什至不需要很多行，例如：

"

2012-06-22 03:06:23 错误系统帐户对象引用未设置为对象的实例。

或者

TSystems.CE.Contes.Data.EntityService.Person.getPersonID（字符串 samAccountName

或者

2012-06-22 03:04:02 INFO 系统帐户 GetWorkOrderListByOrderIdWoTypeIdPreCompiled - 需要编译：假：2.9298

或者

2012-06-22 03:04:02 INFO 系统帐户--预热完成--

"

谁能帮我？谢谢丹尼斯=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:06:32.247

阅读这些工具：grep、sed 或 GNU awk。其中之一可用于提取您需要的数据而无需大量工作。网上有很多教程。祝你好运 ：）

对于您的特殊需要（计算平均值等），我可能会选择 GNU awk。

# android - 如何在具有多个列表视图的单个屏幕中适应大型布局

> ID：11156609
> 
> 赞同：0
> 
> 时间：2012-06-22T12:56:16.047
> 
> 标签：android, listview, scrollview

![在此处输入图像描述](../Images/c5c494683bc5d649577433c698be0cfe.png)我正在处理一个项目，其中我必须做的是有两个列表并且布局非常大，您可以说它只是普通布局的两倍。我必须添加滚动视图以显示整个布局，但问题是如果我这样做，滚动视图中不能有列表，那么如果它是列表或滚动视图，编译器就会有歧义。现在我该怎么做才能帮助我提前谢谢...

我还附上了一张占我布局一半的图片....

![在此处输入图像描述](../Images/60aa0a5c12206b913508109200328191.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:36:11.243

根据您的查询，我设计了一个示例 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="#ffffff" >
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="#ffffeabc" >
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

在上面，您将拥有更大高度视图的滚动视图，并且您拥有相同比例的列表视图。你必须集中精力的事情`android:layout_weight`，你应该检查如何使用**权重**属性

**编辑 ：**

好的，您可以做的一件事是，我们可以使用**列表视图的页眉页脚概念**-*将 ImageView 和 2nd List View 作为第一个 List View 的页脚，以便 ImageView 和 2nd ListView 将始终低于 1st List View* ..

[对于页眉页脚概念，请检查此链接](https://www.google.co.in/#hl=en&output=search&sclient=psy-ab&q=add+footer+in+listview+android&oq=footer+in+List+View+andri&aq=1lmK&aqi=g-lK1g-lmK2g-blK2&aql=&gs_l=hp.3.1.0i13i30j0i13i5i30l2j0i8i13i30l2.614.11590.1.13566.40.31.7.2.2.0.312.5146.0j28j2j1.31.0...0.0.y4xk-lB-BIA&psj=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=e60f6c2a0919fb7f&biw=1440&bih=812)。

# c# - 来自 TcpClient DataReadAsyncCallback 的 UI 操作

> ID：11156615
> 
> 赞同：1
> 
> 时间：2012-06-22T12:56:30.770
> 
> 标签：c#, multithreading, asynchronous, tcpclient

TcpClient DataReadAsyncCallback 是否在主 UI 线程中执行？我正在从该处理程序创建 Windows 窗体，并且在几次调用和窗口显示应用程序之后，应用程序就会终止，而 .NET 没有任何异常。

```
...
ns.BeginRead(client.RxPacket, 0, client.RxPacket.Length, new AsyncCallback(TcpClientDataReadAsyncCallback), client);
...

private void TcpClientDataReadAsyncCallback(IAsyncResult ar)
{
    Client client = (Camera)ar.AsyncState;

    // read data 
    // create window form with that data recieved

    MyForm form = new MyForm(/*read data passed*/);
    form.Show(); 
} 
```

或者我应该使用委托来跟踪来自另一个线程的 UI 访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:06:34.073

最好的方法是检查是否需要调用：

```
 MyForm form = new MyForm(/*read data passed*/);
        if (form.InvokeRequired)
            form.Invoke(new MethodInvoker(() => form.Show()));
        else
            form.Show(); 
```

# javascript - getElementsByTagName 为 null 或未定义，仅在 IE 中 - 并且仅在函数中的一个特定位置

> ID：11156622
> 
> 赞同：3
> 
> 时间：2012-06-22T12:56:56.710
> 
> 标签：javascript, getelementsbytagname

> **可能重复：**
> [IE 中的 getElementById.contentDocument 错误](https://stackoverflow.com/questions/1477547/getelementbyid-contentdocument-error-in-ie)

下面列出的是我的 javascript 代码。它所做的是在整个文档中搜索所有 iframe，然后在 iframe 中搜索所有图像。父框架和子框架都是我在同一个域上的代码。该代码在 chrome、FF 和 safari 中运行良好，但在 IE 中运行良好。这是我得到的错误。

```
Microsoft JScript runtime error: Unable to get value of the property 'getElementsByTagName': object is null or undefined 
```

这是我的代码。

```
<script language="javascript">
var IMGmatches = [];
var IMGelems = document.getElementsByTagName("img");
var iframes = document.getElementsByTagName('iframe');
var l = IMGelems.length;
var m = iframes.length;
var i;
var j;
for (i = 0; i < l; i++) IMGmatches[i] = IMGelems[i];
for (j = 0; j < m; j++) {
    IMGelems = iframes[j].contentDocument.getElementsByTagName("img");
    l = IMGelems.length;
    for (i = 0; i < l; i++) {
        IMGmatches.push(IMGelems[i]);
        document.getElementById("HM").src = IMGelems[i].src;
        alert('IMGelems[i].src : ' + IMGelems[i].src);
    }
} 
```

错误发生在以下行：

```
IMGelems = iframes[j].contentDocument.getElementsByTagName("img"); 
```

有谁看到或知道为什么这只会发生在 IE 中？感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:00:14.017

来自[MDN 文档](https://developer.mozilla.org/en/DOM/HTMLIFrameElement#Properties)：

> 内联框架的嵌套浏览上下文中的活动文档。Internet Explorer 7 及更早版本不支持；改为使用`contentWindow.document`。

# ruby - 是否可以检查 Ruby 中迭代器的位置？

> ID：11156623
> 
> 赞同：1
> 
> 时间：2012-06-22T12:56:58.853
> 
> 标签：ruby, foreach, iterator, ruby-1.9.2

有没有办法获得迭代器的位置（它迭代了多少次）？

```
values = (1..100)
values.each do |value|
  if ... % 10 == 1 then puts iterator.count end
end 
```

还是您必须明确计算：

```
values = (1..100)
counter = 0
values.each do |value|
  if counter % 10 == 1 then puts counter end
  counter += 1
end 
```

有更清洁的方法吗？

红宝石 1.9.2

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T12:58:39.040

利用[`each_with_index`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_index)

```
values.each_with_index do |value, idx|
  puts idx if idx % 10 == 1
  # do something else
end 
```

或者您可以使用更凉爽的替代品

```
values.each.with_index do |value, idx|
  # work
end 
```

我称它为更酷，因为`#with_index`它相对鲜为人知，并且可以与`map`（和其他方法）结合以产生有趣的结果。

# ruby-on-rails - Rake db:test:prepare 任务删除开发数据库中的数据

> ID：11156627
> 
> 赞同：12
> 
> 时间：2012-06-22T12:57:13.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, ruby-on-rails-3.2, travis-ci

在我的**config/database.yml**中为 Rails 3.2.6 应用程序使用一个[简单的 Rails sqlite3 配置示例](https://github.com/mhartl/sample_app_rails_3_2/blob/master/config/database.yml)，我曾经通过执行以下操作来重置我的开发数据库、重新播种并准备我的测试数据库：

 **```
$ rake db:reset
$ rake db:test:prepare 
```

在看了这篇关于在不同数据库引擎上使用[Travis CI](https://travis-ci.org/)测试 Rails 应用程序的[博客文章](https://web.archive.org/web/20120924203633/http://matthew.mceachen.us:80/blog/howto-test-your-rails-application-with-travis-ci-on-different-database-engines-1220.html)之后，我想我会尝试一下，所以我使用[Homebrew](https://brew.sh/)安装了 mysql 和 postgresql （我在 OSX Snow Leopard 上），设置它们按照说明。我安装了相关的gem，并配置了数据库和Travis文件如下：`brew info`

**宝石文件**

```
# ...
group :development, :test do
  # ...
  gem 'sqlite3', '1.3.6'
end

group :test do
  # ...
  # Test mysql on Travis CI
  gem 'mysql2', '0.3.11'
end

group :test, :production do
  # ...
  # Test postgres on Travis CI and deploy on Heroku
  gem 'pg', '0.13.2'
end 
```

**配置/数据库.yml**

```
sqlite: &sqlite
  adapter: sqlite3
  database: db/<%= Rails.env %>.sqlite3

mysql: &mysql
  adapter: mysql2
  username: root
  password:
  database: my_app_<%= Rails.env %>

postgresql: &postgresql
  adapter: postgresql
  username: postgres
  password:
  database: my_app_<%= Rails.env %>
  min_messages: ERROR

defaults: &defaults
  pool: 5
  timeout: 5000
  host: localhost
  <<: *<%= ENV['DB'] || "sqlite" %>

development:
  <<: *defaults

test: &test
  <<: *defaults

production:
  <<: *defaults

cucumber:
  <<: *test 
```

**.travis.yml**

```
language: ruby
rvm:
  - 1.9.2
  - 1.9.3
env:
  - DB=sqlite
  - DB=mysql
  - DB=postgresql
script:
  - RAILS_ENV=test bundle exec rake --trace db:migrate
  - bundle exec rake db:test:prepare
  - bundle exec rspec spec/
before_script:
  - mysql -e 'create database my_app_test'
  - psql -c 'create database my_app_test' -U postgres
bundler_args: --binstubs=./bundler_stubs 
```

但是，现在，当我运行时，在成功创建开发数据库之前`rake db:reset`收到一条`Couldn't drop db/development.sqlite3`错误消息。所以，现在似乎有多个调用来删除同一个数据库（？）。跟踪的输出如下所示：

```
$ rake db:reset --trace
** Invoke db:reset (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:reset
** Invoke db:drop (first_time)
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:drop
Couldn't drop db/development.sqlite3 : #<Errno::ENOENT: No such file or directory - my_app/db/development.sqlite3>
** Invoke db:setup (first_time)
** Invoke db:schema:load_if_ruby (first_time)
** Invoke db:create (first_time)
** Invoke db:load_config 
** Execute db:create
db/development.sqlite3 already exists
# ... 
```

这很奇怪，但至少开发数据库被创建和播种。当我运行时，真正的问题出现了`rake db:test:prepare`：虽然没有错误消息，并且没有创建测试数据库，但开发数据库中的数据被吹走了（不过，模式仍然完好无损）。我尝试直接为命令指定 Rails 环境并得到：

```
$ rake db:test:prepare RAILS_ENV=test
You have 7 pending migrations:
20120503193649 CreateUsers
# ...
Run `rake db:migrate` to update your database then try again. 
```

运行后`rake db:migrate RAILS_ENV=test`，我可以再次运行我的 rspec 测试。因此，我获得相同结果的 rake 命令现在已更改为：

```
$ rake db:reset # (with an error)
$ rake db:migrate RAILS_ENV=test 
```

*如果我将我的* **config/database.yml** *文件改回一个简单的仅 sqlite3 配置，* `db:reset` *并按* `db:test:prepare` *预期工作。*

那么，这是否意味着我的 mysql 和/或 postgres 设置导致 rake 任务重复和/或它们与 Rails 环境设置混淆？我应该在哪里确认我的环境是否真的设置为可以与这 3 个数据库引擎一起正常工作？

### 编辑

[查看 Rails 3.2.8.rc2](https://weblog.rubyonrails.org/2012/8/3/ann-rails-3-2-8-rc2-has-been-released/)的发行说明，我发现`ActiveRecord`可能与此问题相关的更改：

*   使用和相关的 rake 任务`RAILS_ENV`时不要设置。这导致在使用 RSpec 时截断开发数据库数据。在 RC2 中使用时再次修复`development``db:test:prepare``config.active_record.schema_format = :sql`

**config/application.rb**有如下解释：

```
# Use SQL instead of Active Record's schema dumper when creating the database.
# This is necessary if your schema can't be completely dumped by the schema dumper,
# like if you have constraints or database-specific column types
# config.active_record.schema_format = :sql 
```

我的模式没有约束或特定于数据库的列类型，所以我没有取消注释这一行，但是，鉴于发行说明的内容，我打赌`RAILS_ENV`默认为`development`可能是开发环境中删除数据的原因。所以，我尝试了一些事情并通过我之前所做的事情得到了预期的结果（在将 Rails 升级到 3.2.8.rc2 之后）：

```
$ rake db:reset # (with an error)
$ rake db:test:prepare RAILS_ENV=test # (with no "pending migrations" issue) 
```

这有点好，但对我来说仍然是错误的，因为仍然存在错误，并且在运行专门为测试数据库定制的 rake 命令时`rake db:reset`必须设置对我来说没有意义。`RAILS_ENV=test`

## 更新

由于以下修复，升级到 Rails 3.2.9 似乎解决了这个问题：

*   修复`rake db:test:prepare`尝试将 structure.sql 加载到开发数据库中的错误。修复 #8032。

*Grace Liu + Rafael Mendonça França*

我现在可以再次重置我的开发数据库，​​重新播种并准备我的测试数据库，只需执行以下操作：

```
$ rake db:reset
$ rake db:test:prepare 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T19:18:34.323

正在清除您的开发数据库，​​因为 ActiveRecord::Base.configurations 将测试数据库设置为“development.sqlite3”。当 rake 任务运行时，yaml 配置被评估到 ActiveRecord::Base.configurations 哈希中，此时 Rails.env 设置为开发。

如果 RAILS_ENV=development，则 test 的数据库值将设置为

```
database: db/development.sqlite3 
```

或对于不同的适配器：

```
database: my_app_development 
```

您可以通过简单的仅使用 sqlite 的配置来重现这一点，购买将 database.yml 中的测试块更改为以下内容：

```
test:
  adapter: sqlite3
  database: db/<%= Rails.env %>.sqlite3
  pool: 5
  timeout: 5000 
```

如果您检查完整的 ActiveRecord::Base.configurations 哈希，您会看到如果未指定 RAILS_ENV，则测试设置为使用开发数据库。如果您要指定“生产”或“分期”，它将被设置为那个。从控制台：

```
# rails c
> ActiveRecord::Base.configurations['test']['database']
  => "db/development.sqlite3" 
```

和....相比：

```
# RAILS_ENV=test rails c
> ActiveRecord::Base.configurations['test']['database']
  => "db/test.sqlite3" 
```

**更新**

您在 db:reset 中看到的问题也是因为您的 yaml 文件被解释一次，然后设置了配置。

db:reset 将为给定环境调用 db:drop 和 db:setup。但是，如果环境是开发环境，它也会为测试环境执行这些任务。所以它在开发环境下成功drop，然后在执行测试时，配置的数据库key与开发部分相同，因此它不能删除不再存在的东西。这是 Rails.env == 'development' 时 ActiveRecord::Base.configurations 哈希的样子

```
"development" => {
    "adapter" => "sqlite3",
    "database" => "db/development.sqlite3", 
    "pool" => 5, 
    "timeout" => 5000
}, 
"test" => {
    "adapter" => "sqlite3", 
    "database" => "db/development.sqlite3",
    "pool" =>5, 
    "timeout"=>5000
}, 
"production" => {
    "adapter" => "sqlite3", 
    "database" => "db/development.sqlite3",
    "pool"=>5, 
    "timeout"=>5000
} 
```

一旦它在那个哈希中，它就不会返回并重新读取 database.yml 文件。该哈希是给定这个**database.yml生成的**

```
development:
  adapter: sqlite3
  database: db/<%= Rails.env %>.sqlite3
  pool: 5
  timeout: 5000

test:
  adapter: sqlite3
  database: db/<%= Rails.env %>.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/<%= Rails.env %>.sqlite3
  pool: 5
  timeout: 5000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:10:36.963

同样的问题，即开发数据库在“rake”后被破坏。

我的出路“耙 RAILS_ENV=test”。

使用 ruby​​ 1.9.3p194 Rails 3.2.7 sqlite3。**

# extjs - 当我尝试 store.load() 时，ExtJS 4 URL 未定义

> ID：11156632
> 
> 赞同：0
> 
> 时间：2012-06-22T12:57:23.273
> 
> 标签：extjs, extjs4

我有一个带有多个网格的面板。我正在尝试制作某种全局刷新按钮，我的意思是，该按钮将刷新所有网格并打开选项卡，而不会像按下 F5 时那样丢失数据。使用其中两个网格很容易获取商店并加载它，但第三个会出现问题。当我尝试与前两个相同的工作时，我得到了`URL is undefined`。这是我的代码：

```
reloadInstructionsStore: function() {
    var reloadInstructionSt = this.getStore('Instructions');
    var activeCat = this.getActiveCategory();
    reloadInstructionSt.clearFilter(true);
    reloadInstructionSt.filter({
        filterFn: function(item)    {
            return item.get('category_id') == activeCat;
        }
    }),
    reloadInstructionSt.load();
}, 
```

我能想到的唯一原因是我在这里使用的商店的定义与其他 2 不同。它不是 PROXY 和 CRUD，而是看起来像这样：

```
Ext.define('MY.store.Instructions', {

    extend: 'Ext.data.Store',
    model: 'MY.model.InstructionRecord',

    autoLoad: true,

    data: g_settings.instructionsApi.initialData

}); 
```

问题在这里吗？有没有办法让事情像这样工作？

谢谢

勒龙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:34:33.347

您无需重新加载此商店，数据在初始页面加载时提供。该变量`g_settings.instructionsApi.initialData`告诉我数据在页面上可作为静态数据使用。在这种情况下，您需要做的就是重置过滤器，然后删除`reloadInstructionSt.load();`呼叫。

如果您确实希望从服务器重新加载数据，则需要为您的商店提供一个**url**，它可以从中获取数据，并且服务器必须能够提供这些数据。

# android - 如何在应用程序图标单击时制作启动画面？

> ID：11156641
> 
> 赞同：0
> 
> 时间：2012-06-22T12:58:25.970
> 
> 标签：android

在我的应用程序中，当我运行应用程序时，我的启动画面即将到来。启动画面不是来自图标点击。当我从应用程序图标打开我的应用程序而不运行应用程序时，我想显示启动画面。这是 SplasScreen.java 类中的 onCreate() 方法代码。这是我清单文件中的第一类。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainpage);
    mLogo = (ImageButton)findViewById(R.id.logo);
    context = this;
    new Handler().postDelayed(new Runnable() {
        public void run() {
            Intent j = new Intent();
            j.setClass(context, Login.class);
            startActivity(j);
            finish();
        }
    }, 2000);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:25:06.310

我同意蒂姆的观点，他们无缘无故地浪费用户时间，除非有什么在后台工作。无论如何，也许本教程会有用： [http ://www.youtube.com/watch?v=NuS_airZgKM](http://www.youtube.com/watch?v=NuS_airZgKM)

这些视频在过去对我有很大帮助:)

# javascript - 在 Bootstrap 中切换区域

> ID：11156649
> 
> 赞同：0
> 
> 时间：2012-06-22T12:58:52.503
> 
> 标签：javascript, css, twitter-bootstrap

在 Bootstrap 中，如何创建一个切换区域的链接（按钮）。

我的意图是显示/隐藏保存在`<div>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:36:34.130

这与引导无关；它是基本的 JavaScript。

将 ID 添加到链接和`<div />`要切换的链接，然后使用 jQuery[`toggle()`](http://api.jquery.com/toggle)方法（因为 jQuery 包含在引导程序中）。

```
$('#your_link_id').on('click', function () {
    $('#your_div_id').toggle();
}); 
```

如果你想要一个很酷的滑动效果，你甚至可以使用[`slideToggle()`](http://api.jquery.com/slideToggle)而不是。`toggle()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:25:30.583

您可以使用引导折叠插件。更多信息[在这里](http://twitter.github.com/bootstrap/javascript.html#collapse)。

它所需要的只是参考`Bootstrap.js`和`bootstrap.css`

# c++ - 在转换为 std::function 的函数对象中获取状态

> ID：11156651
> 
> 赞同：2
> 
> 时间：2012-06-22T12:58:55.363
> 
> 标签：c++, c++11, function-object, std-function

我想从函数对象中检索状态。但是函数对象已被转换为`function<>`模板。我该怎么做？

我是说：

功能对象：

```
class Counter {
private:
    int counter_;
public:
    Counter():counter_(0) {cout << "Constructor() called" << endl;}
    Counter(int a):counter_(a) {cout << "Constructor(a) called" << endl;}

    void operator()(int sum) {
        cout << counter_++ + sum << endl;
    }

int getCounter() { return counter_;}
}; 
```

在主要。我的第一步是直接使用对象：

```
int main() {
    Counter a(10);
    a(0);
    a(0);

    cout << "Counter: " << a.getCounter() << endl; 
```

它的节目：

> 构造函数（a）调用
> 
> 10
> 
> 11
> 
> 计数器：12

没关系，这是我所期望的。

但在

```
Counter b(10);
function<void(int)> f = b;
f(0);
f(0);
cout << "Counter: " << b.getCounter() << endl; 
```

表明

> 构造函数（a）调用
> 
> 10
> 
> 11
> 
> 计数器：10

啊！，我认为 f 是真实对象的包装器，所以修改`f`我们真的修改了`b`. 否：`f`有 的副本`b`，但我无法调用`f.getCounter()`我如何从 中获取 State (counter_var) `f`？

我不能直接使用`Counter`类（在这个例子中），因为我有一些其他类似的具有相同签名“void（int）”的类，我想在调用者函数中模糊地使用它们。

我可以完全避免`std::function`为我的所有函数对象使用公共基类的模板，但我认为有一个解决方案更 C++11 与 STL 和模板......

那么，有没有解决方案？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:12:19.253

从引用包装器创建函数：

```
function<void(int)> f = std::ref(b); 
```

给出结果：

```
Constructor(a) called
10
11
Counter: 12 
```

当然，您需要确保在销毁计数器后不调用该函数。

如果您需要从函数对象访问计数器，请使用其`target`成员：

```
if (Counter * c = f.target<Counter>()) {
    std::cout << "Counter: " << c->getCounter() << '\n';
} else {
    std::cout << "Not a counter.\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:22:34.027

这不是演员表：

```
function<void(int)> f = b; 
```

A`std::function`已被构造，以您的函数对象的副本作为其目标。

您可以使目标成为对您的函数对象的引用：

```
function<void(int)> f = std::ref(b); 
```

或者让`f`包含一个副本，然后从以下位置检索该副本`f`：

```
Counter* c = f.target<Counter>();
cout << "Counter: " << c->getCounter() << endl; 
```

让`f`包含副本通常更安全，因为您不必担心`b`.

# directshow.net - 文字叠加问题？

> ID：11156654
> 
> 赞同：0
> 
> 时间：2012-06-22T12:59:15.390
> 
> 标签：directshow.net

通过使用directshow.net，我可以录制视频，并且通过录制，我正在为此进行文本叠加，我配置了样本采集器，并且在buffercb方法中我正在处理帧，这里是代码..

```
int ISampleGrabberCB.BufferCB(double SampleTime, IntPtr pBuffer, int BufferLen)
    {
        Graphics g;
        String s;
        float sLeft;
        float sTop;
        SizeF d;

        g = Graphics.FromImage(bitmapOverlay);
        g.Clear(System.Drawing.Color.Transparent);
        g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;

        // Prepare to put the specified string on the image
        g.DrawRectangle(System.Drawing.Pens.Transparent, 0, 0, 240 - 1, 176 - 1);
        g.DrawRectangle(System.Drawing.Pens.Transparent, 1, 1, 240 - 3, 176 - 3);

        d = g.MeasureString(m_String + "\n" + DateTime.Now.ToString("G"), fontOverlay);

        sLeft = (240 - d.Width) / 2;
        sTop = (176 - d.Height) / 2;

        g.DrawString(m_String + "\n" + DateTime.Now.ToString("G"), fontOverlay, System.Drawing.Brushes.Black,
            sLeft, sTop, System.Drawing.StringFormat.GenericTypographic);

        // need to flip the bitmap so it's the same orientation as the
        // video buffer
        bitmapOverlay.RotateFlip(RotateFlipType.RotateNoneFlipY);

        // create and copy the video's buffer image to a bitmap
        Bitmap v;
        v = new Bitmap(240, 176, 1056,
            PixelFormat.Format24bppRgb, pBuffer);
        g = Graphics.FromImage(v);
        g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
        // draw the overlay bitmap over the video's bitmap
        g.DrawImage(bitmapOverlay, 0, 0, bitmapOverlay.Width, bitmapOverlay.Height);
        // dispose of the various objects
        g.Dispose();
        v.Dispose();
        // Increment frame number.  Done this way, frame are zero indexed.
        m_Count++;
        return 0;
    } 
```

**我的问题是，当我启动程序时，它会在预览窗口中显示文本叠加，但是当我打开录制的文件时，文本叠加不会继续..我想我错过了一些框架..在某些框架上叠加是他们的，但它不会继续..它的轻弹。有人可以帮忙吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:59:42.917

好的，我有问题！

在上面的代码中，BufferCB处理当前视频帧的时间太长了。就像让帧A在处理完成帧B进来之前还在中间处理一样。

因此，为了最小化 BufferCB 中的处理，我删除了设置位图图像的位置，我将这行代码放入一个函数中

```
g = Graphics.FromImage(bitmapOverlay);
    g.Clear(System.Drawing.Color.Transparent);
    g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;

    // Prepare to put the specified string on the image
    g.DrawRectangle(System.Drawing.Pens.Transparent, 0, 0, 240 - 1, 176 - 1);
    g.DrawRectangle(System.Drawing.Pens.Transparent, 1, 1, 240 - 3, 176 - 3);

    d = g.MeasureString(m_String + "\n" + DateTime.Now.ToString("G"), fontOverlay);

    sLeft = (240 - d.Width) / 2;
    sTop = (176 - d.Height) / 2;

    g.DrawString(m_String + "\n" + DateTime.Now.ToString("G"), fontOverlay, System.Drawing.Brushes.Black,
        sLeft, sTop, System.Drawing.StringFormat.GenericTypographic);

    // need to flip the bitmap so it's the same orientation as the
    // video buffer
    bitmapOverlay.RotateFlip(RotateFlipType.RotateNoneFlipY); 
```

并且在调用 media.run 之前调用此函数。

# jsp - Strut：自定义 fielderror 标签

> ID：11156657
> 
> 赞同：0
> 
> 时间：2012-06-22T12:59:28.397
> 
> 标签：jsp, struts2

在我的 jsp 文件中，我有以下行：

```
<tr><td><s:fielderror/></td></tr> 
```

这会以默认黑色显示错误。知道如何将字段错误消息的颜色更改为红色并以突出显示的格式显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:05:36.183

尝试这个：

```
<tr>
    <td style="color:blue;background-color:yellow;">
        <s:fielderror/>
    </td>
</tr> 
```

[http://www.w3schools.com/html/html_css.asp](http://www.w3schools.com/html/html_css.asp)

# c# - WCF 工具和配置服务端点绑定

> ID：11156663
> 
> 赞同：2
> 
> 时间：2012-06-22T13:00:07.867
> 
> 标签：c#, wcf, castle-windsor, wcf-binding

我在配置 WCF 的服务端时遇到了一些问题 - > MVC3 解决方案。

配置如下：

```
.Register(
      Component.For<IFileDownloadService>()
         .ImplementedBy<FileDownloadService>()
         .Named("FileDownloadService")
         .AsWcfService(new DefaultServiceModel()
              .Hosted()
              .PublishMetadata(x => x.EnableHttpGet())
              .AddEndpoints(
                    WcfEndpoint.BoundTo(new BasicHttpBinding
                         {
                              TransferMode = TransferMode.Streamed
                         })
                    )
              )) 
```

但是 WCFTestClient 向我显示生成的配置是：

![在此处输入图像描述](../Images/e756c456f29e237f7f0c8c719fb90778.png)

谁能指出我解决为什么 TransferMode 保持缓冲的方向？实际上，我想为此端点配置许多其他设置，但我认为我会保持简单的开始。

在此先感谢您的帮助！

# c - 为什么读/写锁需要锁？

> ID：11156666
> 
> 赞同：2
> 
> 时间：2012-06-22T13:00:11.193
> 
> 标签：c, linux, multithreading, pthreads

我得到了一种读/写锁的实现，如下所示。请注意，在函数的开头，有一个`pthread_mutex_lock`调用。如果它仍然使用`pthread_mutex_lock`一次，那么使用读/写锁有什么好处。它比简单地使用更好`pthread_mutex_lock`吗？

```
int pthread_rwlock_rlock_np(pthread_rwlock_t *rwlock)
{
    pthread_mutex_lock(&(rwlock->mutex));
    rwlock->r_waiting++;
    while (rwlock->r_wait > 0)
    {
        pthread_cond_wait(&(rwlock->r_ok), &(rwlock->mutex));
    }
    rwlock->reading++;
    rwlock->r_waiting--;
    pthread_mutex_unlock(&(rwlock->mutex));
    return 0;
}

int pthread_rwlock_wlock_np(pthread_rwlock_t *rwlock)
{
    pthread_mutex_lock(&(rwlock->mutex));
    if(pthread_mutex_trylock(&(rwlock->w_lock)) == 0)
    {
        rwlock->r_wait = 1;
        rwlock->w_waiting++;
        while (rwlock->reading > 0)
        {
            pthread_cond_wait(&(rwlock->w_ok), &(rwlock->mutex));
        }
        rwlock->w_waiting--;
        pthread_mutex_unlock(&(rwlock->mutex));
        return 0;
    }
    else
    {
        rwlock->wu_waiting++;
        while (pthread_mutex_trylock(&(rwlock->w_lock)) != 0)
        {
            pthread_cond_wait(&(rwlock->w_unlock), &(rwlock->mutex));
        }
        rwlock->wu_waiting--;
        rwlock->r_wait = 1;
        rwlock->w_waiting++;
        while (rwlock->reading > 0)
        {
            pthread_cond_wait(&(rwlock->w_ok), &(rwlock->mutex));
        }
        rwlock->w_waiting--;
        pthread_mutex_unlock(&(rwlock->mutex));
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:08:03.787

`rwlock->mutex`互斥锁用于保护结构本身的`rwlock`状态，而不是保护目标程序中读/写锁可能保护的任何状态。该互斥锁仅在获取或释放锁期间保持。它只是简单地进入，以避免破坏读取器/写入器锁本身的“簿记”所需的状态。相反，读取器/写入器锁可能会被调用者在锁保护的结构上执行实际读取和写入而持有一段延长的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:07:59.820

在这两个函数中，`rwlock->mutex`在返回之前被释放。这意味着仅仅因为您持有 rwlock 作为读取器或写入器，并不意味着您持有互斥锁。

rwlock 的一半要点是多个读取器可以同时操作，因此与仅使用互斥锁相比，这是直接的优势。这些读者只是短暂地持有互斥锁，以获取读者锁。他们在进行实际工作时不会持有互斥锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:07:54.017

它将允许一次**多次**读取或一次写入，这比一次读取一次或一次写入操作要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:10:10.990

> 它比简单地使用 pthread_mutex_lock 更好吗？

1.  即使使用此实现，阅读器也会在临界区同时运行。
2.  可能会有一个更好（不太便携）的实现，它将在“快速路径”中使用原子（等待时仍然需要锁定）。

# alfresco - 在称为 webscript 的内部获取当前用户名

> ID：11156671
> 
> 赞同：4
> 
> 时间：2012-06-22T13:00:18.543
> 
> 标签：alfresco

在露天有什么办法可以在网络脚本中获取当前用户名？我正在调用一个网络脚本，并想访问他在其中登录的当前用户名和密码。这是我的描述符：

```
<webscript>
  <shortname>Save Document </shortname>
  <description>Save description</description>
  <url>/alfresco/save</url>
  <format default="">argument</format>
  <family>Active document</family>
</webscript> 
```

我的网络脚本代码：

```
public void execute(WebScriptRequest req, WebScriptResponse res)
            throws IOException {
        String nodeRefString = null;
        try {
            nodeRefString = req.getParameter("nodeRef");

            if(nodeRefString != null && !nodeRefString.isEmpty()) {
                AuthenticationUtil.runAs(new RunAsWork<String>() {
                    public String doWork() throws Exception {

                        String userName = AuthenticationUtil.getFullyAuthenticatedUser();
                        System.out.println("user name =" + userName);
                        if(personService != null) {
                            System.out.println("personService initialized successfully");
                            NodeRef personNode = personService.getPerson("mahesh");
                            System.out.println("password =" + nodeService.getProperty(personNode, ContentModel.PROP_PASSWORD));
                        } else {
                            System.out.println("person service is null");
                        }
                        NodeRef nodeRef = new NodeRef(nodeRefString);
                        setNodeRef(nodeRef);
                        setFileName((String) nodeService.getProperty(nodeRef,ContentModel.PROP_NAME));
                        return null;
                    }
                }, AuthenticationUtil.getSystemUserName());
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

我应该将身份验证标签添加到我的网络脚本描述符中吗？我尝试了 AuthenticationUtil.getFullyAuthenticatedUser(); 和 AuthenticationUtil.getRunAsUser()。两者都返回“系统”作为用户名。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:50:27.360

如果您使用的是[Javascript](http://wiki.alfresco.com/wiki/4.0_JavaScript_API#Root_Scope_Objects)控制器或[Freemarker](http://wiki.alfresco.com/wiki/Template_Guide#Default_Model)模板：

```
person.properties["user:username"] 
```

如果您在 Java 控制器中：

```
/**
 * Get the user that is currently in effect for purposes of authentication.  This includes
 * any overlays introduced by {@link #setRunAsUser(String) runAs}.
 * 
 * @return              Returns the name of the user
 * @throws AuthenticationException
 */
org.alfresco.repo.security.authentication.AuthenticationUtil.getRunAsUser() 
```

* * *

编辑：根据您的评论，您正在使用`AuthenticationUtil.runAs`家庭。在这种情况下，您应该使用以下内容忽略对当前身份验证上下文的任何暂时更改：

```
/**
 * Get the fully authenticated user. 
 * It returns the name of the user that last authenticated and excludes any overlay authentication set
 * by {@link #runAs(org.alfresco.repo.security.authentication.AuthenticationUtil.RunAsWork, String) runAs}.
 * 
 * @return              Returns the name of the authenticated user
 * @throws AuthenticationException
 */
org.alfresco.repo.security.authentication.AuthenticationUtil.getFullyAuthenticatedUser() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T14:06:45.950

您应该放在innerClass`AuthenticationUtil.getFullyAuthenticatedUser()`之外以检索实际的用户名，因为一旦进入您将获得“系统”。`RunAsWork`

所以你的代码会是这样的

```
public void execute(WebScriptRequest req, WebScriptResponse res)
        throws IOException {
    String nodeRefString = null;
    try {
        nodeRefString = req.getParameter("nodeRef");
        final String userName = AuthenticationUtil.getFullyAuthenticatedUser();

        if(nodeRefString != null && !nodeRefString.isEmpty()) {
            AuthenticationUtil.runAs(new RunAsWork<String>() {
                public String doWork() throws Exception {

                    System.out.println("user name =" + userName);
                    if(personService != null) {
                        System.out.println("personService initialized successfully");
                        NodeRef personNode = personService.getPerson("mahesh");
                        System.out.println("password =" + nodeService.getProperty(personNode, ContentModel.PROP_PASSWORD));
                    } else {
                        System.out.println("person service is null");
                    }
                    NodeRef nodeRef = new NodeRef(nodeRefString);
                    setNodeRef(nodeRef);
                    setFileName((String) nodeService.getProperty(nodeRef,ContentModel.PROP_NAME));
                    return null;
                }
            }, AuthenticationUtil.getSystemUserName());
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# xml - 如何从 Java 中的 XML 模式生成 XML 并在其中提供数据？

> ID：11156675
> 
> 赞同：7
> 
> 时间：2012-06-22T13:00:24.493
> 
> 标签：xml, jaxb, xmlbeans, jibx

我正在开发一个 Web 应用程序的一部分，它以 XML 模式作为输入来生成 XML 文件。还有一些数据要以有序的方式放入 XML 标记中。

例如，如果我有一个包含 100 个数字的 ArrayList，例如 1 到 100，则`.xsd`看起来像以下示例：

```
xs:element name="elt1"

xs:complexType

xs:sequence

  xs:element name="elt1-1"

  xs:element name="elt1-2"

  xs:element name="elt1-3"

  xs:element name="elt1-4"

  xs:element name="elt1-5"

xs:sequence

xs:complexType

xs:element name="elt1" 

......other elements 
```

如何生成如下 XML 文件：

```
< elt1>

   < elt1-1>1< elt1-1>

   < elt1-2>2< elt1-2>

   < elt1-2>3< elt1-3>

   < elt1-4>4< elt1-4>

   < elt1-5>3< elt1-5>

< elt1> 
```

那么每个tag中的数据就是arraylist中对应的数字，和arraylist中的数据顺序一致？

我真的很感激任何建议或例子。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:48:47.750

您可以使用 XMLBeans 中的[xsd2inst](http://xmlbeans.apache.org/docs/2.4.0/guide/tools.html#xsd2inst)工具从模式生成 xml 文档。如果你好奇 XMLBeans 是如何做到这一点的，你可以看看 xsd2inst 工具是如何实现的：

[http://svn.apache.org/viewvc/xmlbeans/trunk/src/tools/org/apache/xmlbeans/impl/xsd2inst/](http://svn.apache.org/viewvc/xmlbeans/trunk/src/tools/org/apache/xmlbeans/impl/xsd2inst/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:39:44.543

可能是以下副本：

> [如何从他们的 dtd 或 xsd 生成示例 xml 文档](https://stackoverflow.com/questions/17106/how-to-generate-sample-xml-documents-from-their-dtd-or-xsd/730208#730208)

和/或

> [从 XML 模式 (xsd) 生成 XML 实例](https://stackoverflow.com/questions/307616/xml-instance-generation-from-xml-schema-xsd)

另外，我建议您解释您是否真的想使用 JAXB（因为您已标记它），并明确说明您是否希望在您的应用程序中自动执行此行为，或者是否可以通过手动步骤/使用外部工具（例如 xml 编辑器）。

# php - 使用 Jquery Mobile 的数据库

> ID：11156676
> 
> 赞同：0
> 
> 时间：2012-06-22T13:00:24.657
> 
> 标签：php, jquery, mysql, mobile, jquery-mobile

我有几个关于在 Jquery Mobile 中使用数据库的问题。

在构建 Jquery Mobile 应用程序时，您是否使用常规 PHP/MYSQL 登录和联系表单？

如果用户没有连接到互联网会发生什么？

有没有办法“缓存”数据库？

抱歉，如果这些问题看起来很愚蠢，我是 Jquery Mobile 的新手。

谢谢朋友。

编辑：联系表格将只有 3 或 4 个输入。该表格只是一个小的反馈表格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:19:38.760

你可以使用任何你想要的后端技术，PHP 和 MySQL 非常适合。我更喜欢 PostgreSQL 而不是 MySQL，但这是另一个争论。

至于客户端数据库，您可以使用 HTML5 本地存储（更多内容请参见[此处](http://diveintohtml5.info/storage.html)），但对于任何服务器端身份验证/交互，您都需要 Internet 连接。

对于没有互联网连接恕我直言，我会向最终用户显示错误信息，例如“服务不可用”或“请检查您的互联网连接”。

对于离线应用程序使用，您可以查看这些（我没有尝试过任何这些）

*   [http://www.html5rocks.com/en/features/offline](http://www.html5rocks.com/en/features/offline)
*   [http://gazpo.com/2011/08/html5-offline-applications/](http://gazpo.com/2011/08/html5-offline-applications/)
*   [http://html5doctor.com/go-offline-with-application-cache/](http://html5doctor.com/go-offline-with-application-cache/)

如何检查互联网连接（其他人尝试过的）

*   [检查是否连接到网络；jQuery](https://stackoverflow.com/questions/9526647/check-if-connected-to-a-network-jquery)
*   [如果有互联网连接，则检测到 JQuery Mobile](https://stackoverflow.com/questions/5626832/jquery-mobile-detected-if-theres-internet-connection)
*   [用于检测 Internet 连接的 Jquery 插件](https://stackoverflow.com/questions/10945759/jquery-plugin-for-detecting-internet-connection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:19:01.383

这实际上取决于您存储的数据类型。是否需要大量的查询和存储过程？您是否需要触发器和规则来验证数据库中的数据？

要问的主要问题是：

**你需要建立一个模式吗？还是您主要使用 JSON 对象？**

如果您计划在数据库中花费大量时间来管理模式和其他规则，那么请使用 a`MySQL`或 a`SQL Server Express`选项。这两个数据库引擎都是免费的，可以让您轻松管理数据。

但是，如果您的数据基于 JSON 对象并且并不真正遵循关系模型，我会使用面向文档的数据库，例如`CouchDB`.

[http://couchdb.apache.org/](http://couchdb.apache.org/)

`CouchDB`确实是为不想使用特定模式但需要某种存储系统的网站而设计的。您可以将 JSON 文档存储在数据库中，并使用简单的 HTTP 查询和检索数据。

而不是面向模式`SQL databases`，而是面向`CouchDB`文档。CouchDB 数据库是文档的平面集合。

既然您提到您使用`PHP`的是`CouchDB`.

[http://wiki.apache.org/couchdb/Getting_started_with_PHP](http://wiki.apache.org/couchdb/Getting_started_with_PHP)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T13:03:17.840

我有一个很好的建议。如果您想创建 jquery mobile，请使用电话间隙。

它完全基于 jquery 和 html。

它易于开发且易于与数据库连接。

# java - 时间同步

> ID：11156681
> 
> 赞同：0
> 
> 时间：2012-06-22T13:00:42.080
> 
> 标签：java, javascript, jakarta-ee, time, timer

我正在用 Java 创建一个 Web 应用程序，我需要在客户端浏览器上运行一个反向计时器。我计划将剩余时间从服务器发送到客户端，然后使用 javascript 勾选计时器。
我的问题是：
1\. 时钟滴答率是否因不同系统而异？
2.有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:19:42.060

### *时钟滴答率是否因不同系统而异？*

是的，这是芯片组中使用的石英频率非常非常小的差异的结果。因此，如果你不时不时同步你的时钟，它们就会发散。

但是，如果你不是在设计卫星、弹道导弹遥控器或生命支持设备，你真的不应该在意。

### *有没有更好的方法来做到这一点？*

是的，如果：

*   你的倒计时从一年或*至少*一个月开始倒计时，或者
*   您在时钟损坏/非常不准确的设备上运行您的客户端

您可以使用 a`NTP protocol`来确保客户端和服务器时钟同步。有可用于[JavaScript](http://jehiah.cz/a/ntp-for-javascript)和[Java](http://support.ntp.org/bin/view/Support/JavaSntpClient)的 NTP 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:51:06.093

@npe -s 使用 NTP 的解决方案可以，但理论上是不正确的：

即使时钟完全同步，您也会将**剩余时间**发送给客户端。但是该消息需要在网络上传播，所以当客户收到它时，它就不再正确了。

更好的方法是将**结束时间**发送给客户端，这是一个绝对值，因此不受网络延迟的影响，并对客户端进行倒计时，计算那里的剩余时间。

*也就是说，关于NTP的其他答案当然也是必要的*

# asp.net - 登录控件不会将用户重定向到另一个页面

> ID：11156682
> 
> 赞同：0
> 
> 时间：2012-06-22T13:00:45.970
> 
> 标签：asp.net

我正在开发VS2010。这是我的问题：我有一个验证用户的表单，然后将它们重定向到另一个页面。重定向不起作用如果我写用户名和密码系统什么也不说，两个文本框为空：

这是我的登录控件的一部分

```
<asp:Login ID="LoginUser" runat="server" EnableViewState="false" 
        RenderOuterTable="false" DestinationPageUrl="~/verwaltung.aspx" MembershipProvider="AspNetSqlMembershipProvider"> 
```

而且在我的 web.config 我有：

```
<membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
      </providers>
    </membership> 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:01:35.593

你说你的代码隐藏是空的，实际上当你使用登录控件时，你需要像这样编写登录处理程序。

```
protected void Login1_Authenticate1(object sender, AuthenticateEventArgs e)
        {
            SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Online"].ConnectionString);
            SqlCommand cmd = new SqlCommand("SELECT FirstName, LastName FROM Account WHERE Username=@Username AND Password=@Password", conn);
            SqlDataReader rdr = null;
            SqlParameter Username = new SqlParameter();
            Username.SqlDbType = SqlDbType.VarChar;
            Username.ParameterName = "Username";
            Username.Value = Login1.UserName.ToString().ToLower().Trim();

            SqlParameter Password = new SqlParameter();
            Password.SqlDbType = SqlDbType.VarChar;
            Password.ParameterName = "Password";
            Password.Value = Login1.Password;

            cmd.Parameters.Add(Username);
            cmd.Parameters.Add(Password);

            try
            {
                conn.Open();
                rdr = cmd.ExecuteReader();
                while (rdr.Read())
                {
                    e.Authenticated = true;//User was found in the database
                    Session["Username"] = Login1.UserName.ToString();
                    Session["Name"] = rdr[0].ToString() + " " + (rdr[1].ToString() == null ? "" : rdr[1]);
                }
            }
            finally
            {
            if (conn != null)
                conn.Close();
            if (rdr != null)
                rdr.Close();
            if (e.Authenticated)
                Response.Redirect("profile.aspx");//Do whatever needs to be done when user gets authenticated
            }
        } 
```

# c# - 编辑列表，然后将其发布到 httprequest

> ID：11156685
> 
> 赞同：0
> 
> 时间：2012-06-22T13:00:52.757
> 
> 标签：c#, list

现在我有一个 foreach 循环，它使用 img 标签抓取第一个链接。

我希望能够编辑我获得的此链接，然后将其放入请求中。

例如，假设我返回“http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif”，我只想保留“p-c1rF4kxgLUzNc”部分，然后将其放入 httprequest 中的新 url。

该链接将是随机的，因此我不能简单地放置一个静态 url，我想要列表中的那个。

```
List<string> imgtags = new List<string>();

foreach(HtmlNode link in doc.DocumentNode.SelectNodes("//img[@src]"))
{
    HtmlAttribute att = link.Attributes["src"];
    imgtags.Add(att.Value);
    break;
}

//edit the url the list gets

HttpWebRequest request1 = (HttpWebRequest)WebRequest.Create("http://google.com/" + *editedurl*); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:11:44.667

这可能不是最好的方法，但是您可以对原始链接进行拆分，如下所示：

```
 var link = originalLink.split('/'); 
```

然后你可以计算出链接数组的最后一个元素是什么，并对其进行拆分。我在这里以 7 为例。

```
 var newLink = link[7].split('.'); 
```

然后你只需要使用 newLink[0] 就可以得到你想要的名字。

正如我所说，这不是一种很好的方法，但如果您没有得到更好的答案，它是一种解决方法。

# javascript - 我必须按两次才能打开该 DIV

> ID：11156686
> 
> 赞同：0
> 
> 时间：2012-06-22T13:00:55.330
> 
> 标签：javascript, toggle

我正在使用它假设显示隐藏 DIV 的 JavaScript 代码，但不知何故，我必须按两次才能显示该 DIV。

JavaScript 代码：

```
 function AddComp() {
    HideComp();

    $("#Add-Com").click(function () {
        $("#hide").toggle("fast", function () {

            $('#hide').css({ visibility: "visible", height: "auto" });
        });
    });
    var a = document.getElementById("divSave");
    a.onclick = InsertComp; 
}

function HideComp() { 
  $('#hide').css({ visibility: "hidden", height: "0" }); 
  $("#Name").val(""); 
  $("#Address").val(""); 
  $("#Email").val(""); 
} 
```

在 HTML 中我有这个：

```
<div id="Add-Com" onclick="AddCom()">
        <span>Add Company</span></div>
<div id="hide" style="visibility: hidden; height: 0px;"> .....the code 
```

谁能帮我？

默认状态为隐藏。我想通过单击一次来切换它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:06:37.923

```
 if ($("#hide").is(":visible")) $("#hide").hide(); 
else $("#hide").toggle("slow", function () 
{ $('#hide').css({ visibility: "visible", height: "auto" }); 
```

似乎这是我想要的方式

# facebook - 无法审核评论

> ID：11156688
> 
> 赞同：2
> 
> 时间：2012-06-22T13:01:14.570
> 
> 标签：facebook, comments

我的 Facebook 评论框已经工作了很长时间，但我需要审核一些包含个人信息的评论和一些垃圾评论。

这是放置评论框的位置：

[http://coaching.jamesfrancis.com/first-1000-online/](http://coaching.jamesfrancis.com/first-1000-online/)

我在标题中添加了两个正确的元属性（“app_id”和“admins”），但“中等”链接仍然没有出现。

另外，奇怪的是，虽然我有很多评论，但没有一个出现在：

[https://developers.facebook.com/tools/comments](https://developers.facebook.com/tools/comments)

......所以我也不能从那里缓和它们。

任何想法如何解决这一问题？

谢谢！- 詹姆士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T01:50:51.623

在您的元标记中，将“名称”更改为“属性”，并确保包含其他必需的元标记以使审核正常工作。来自 fb:admins 之一。

```
<meta **property**="og:url"                content="..." />
<meta **property**="og:type"               content="..." />
<meta **property**="og:title"              content="..." />
<meta **property**="og:description"        content="..." />
<meta **property**="og:image"              content="..." />
<meta **property**="og:admins"             content="..." /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T07:38:04.337

有同样的问题，我通过简单地将应用程序公开来解决它。为此，请转到 facebook 应用程序管理页面，单击状态，右侧有一个开关。

好的，干杯，电子线

# c# - 按钮可见性保持默认值的奇怪问题

> ID：11156689
> 
> 赞同：0
> 
> 时间：2012-06-22T13:01:17.230
> 
> 标签：c#

我在 C# 中有一个非常大的 ASP.NET 应用程序。

这个问题很简单但很困难/很奇怪。无论我在代码中的哪个位置尝试更改按钮的可见性，无论我将其设置为 true 还是 false，它都会保留其默认值。

我不确定是什么原因造成的，所以我想我可能会在这里征求意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:05:32.987

该`Visible`属性从父控件继承它的状态。

例如：

```
<asp:Panel ID="Panel1" Visible="false" runat="server">
   <asp:Button ID="Button1" runat="server" Text="click me" />
</asp:Panel> 
```

`Button`只要容器控件不可见，它就永远不`Panel1`可见。

实施`Control.Visible`：

```
public virtual bool Visible
{
    get
    {
        return !this.flags[16] 
        && (this._parent == null || this.DesignMode || this._parent.Visible);
    }
    set
    {
        // ...
    }
} 
```

所以当 时`parent != null && !visible`，子控件是不可见的。

# javascript - JQuery 在单击时附加到所选项目

> ID：11156690
> 
> 赞同：0
> 
> 时间：2012-06-22T13:01:17.387
> 
> 标签：javascript, jquery, html

简而言之，我将在具有这种结构的页面上有一系列 div：

```
<div id="statuses">
   <p><?php echo $status; ?></p>
   <div id="statuscom">
      <a id="comment" href="#">Comment</a>
   </div>
</div> 
```

当单击评论href时，我希望它将另一个div附加到已单击的div上，并且只有那个div。

我有这个：

```
$(function {
    $("a#comment").click(function() {  
        $(this).append("<div id=\"statuscomadd\"</div>");
    });
}); 
```

这似乎没有做任何事情，再次，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:07:38.857

首先，您不应该在具有相同 ID（注释）的同一页面上有多个标签。

话虽如此，您的代码存在一些问题：在 HTML 中缺少括号`function`、附加到`<a>`标记和语法问题。总的来说，它应该是这样的：

```
$(function() {
    $("a#comment").click(function() {  
        $("<div id=\"statuscomadd\"></div>").insertAfter(this);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:05:16.740

1.  您的语法错误（该函数没有参数，也没有简单的`()`）
2.  您的 HTML 错误（`div`未关闭）
3.  如果您想在页面加载时创建点击处理程序，请使用`$(document).ready(...)`或`$(function () {...})`
4.  您在 A 标签旁边附加了一个空 DIV，这就是您想要的吗？
5.  `statuscomadd`正如另一位用户所说，当您可以单击并添加多个 div 时，为什么要使用 id ( )？最好使用一个类。或者，如果您只需要添加一个 div，请使用`.one()`处理程序。

尝试：

```
$(function () {
    $("a#comment").click(function() {  
        $(this).append("<div class=\"statuscomadd\"></div>");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:05:48.557

您不应该将 div 附加到标签。相反，您应该在该标签之后（或之前，也许）附加它

```
$(function() {
    $("a#comment").click(function() {  
        $('<div id="statuscomadd"></div>').insertAfter(this);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:06:21.993

语法错误 div 未关闭

```
$(function {
    $("a#comment").click(function() {  
    $(this).append("<div id=\"statuscomadd\"></div>");
   });
 }); 
```

# r - 如何根据R中的参数集成功能？

> ID：11156691
> 
> 赞同：1
> 
> 时间：2012-06-22T12:53:47.453
> 
> 标签：r, integral, integrate

我估计正常的逆高斯最大似然。`optim()`我得到后

> “错误 в 积分（f2，下 = 0，上 = Inf，z = z）：函数评估给出了错误长度的结果”。

有bug的部分代码是

```
f2 <- function (t, z) {
    exp(-t)*t^(1-1/2)*(1+t/2*z)^(1-1/2)
}
int2 <- function (z) { 
    integrate(f2,  lower=0, upper=Inf, z=z)$value 
} 
```

R站点上的类似推荐仍然有相同的错误：

```
int2 <- function (z) { 
    integrate(f2,  lower=0, upper=Inf, z=z) 
} 
```

所以问题是如何根据 R 中的参数 z（不是数字而是符号）将 f2 与 t 积分？

整个代码如下

```
#NIG
library(stats) 
unibubble_nig_ur <- function(x){
    #mu
    x1 <- x[1]
    #nu
    x2 <- x[2]
    #alpha
    x3 <- x[3]
    #beta
    x4 <- x[4]
    #kappa
    k <- x[5]
    #sigma_sq
    x6 <- x[6]
    H <- log((x3^x4+t2^x4)/(x3^x4+t1^x4))
    #mu_t
    x7 <- x1+(x2-x2^2/2)*H*k
    #alpha_t
    x8 <- sqrt(1/((x6-x2^2*H))*k+1/4)
    #beta_t
    x9<--c(1/2)
    #delta_t
    x10 <- sqrt((x6-x2^2*H)/k)
    zval <- x8*sqrt(x10^2+(yobs-x7^2))

    f = function (t) exp(-t)*(1)^(t-1)
    gamma = integrate(f, lower=0, upper=Inf)

    #Bessel function of 2nd kind
    f2 <- function (t, z) {
        exp(-t)*t^(1-1/2)*(1+t/2*z)^(1-1/2)
    }
    int2 <- function (z) { 
        integrate(f2,  lower=0, upper=Inf, z=z)$value 
    }

    K1 <- exp(-zval)*sqrt(pi/2*zval)*int2(zval)/gamma
    n <- length(logprice)
    t1 <- seq(1, n-1)
    t2 <- 1+t1
    yobs <- diff(logprice,1)

    # Probability Density Function 
    dnig <- x8*x10*exp(x10*sqrt(x8^2-x9^2)+x9*(yobs-x7))/(pi*sqrt(x10^2+(yobs-x7^2)))
    loglklhd<--sum(log(dnig))
    loglklhd
}

out_nig_ur <- optim(unibubble_nig_ur, p=c(60,40,80,80,80,80), hessian=TRUE)
out_nig_ur 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T08:35:31.403

例如：

```
F2 <- function(z){
    f2 <- function(t){
       exp(-t)*t^(1-1/2)*(1+t/2*z)^(1-1/2)
   }
return(f2)
}
int2 <- function (z) { 
    integrate(F2(z),  lower=0, upper=Inf)$value 
}
> int2(1)
[1] 1.156935 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:17:34.703

如果`yobs`长度大于1，`zval`也会，并且`f2`在调用中的返回值也`int2`将在行`K1 <- exp(-zval)*sqrt(pi/2*zval)*int2(zval)/gamma`中，这搞砸了`integrate`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T18:49:20.557

要将 int2 应用于向量参数，您可以引入新函数`int2vec`并使用它而不是`int2`在您的公式中：

```
int2vec<-function(t) sapply(t,int2) 
```

# php - 将会话变量添加到自身

> ID：11156695
> 
> 赞同：0
> 
> 时间：2012-06-22T13:01:38.370
> 
> 标签：php, session-variables

如果客户购买不止一种产品，我需要添加金额。如何使用会话变量添加。我将金额存储为

```
$amount=$_POST['amount']
$_SESSION['amount']=$amount; 
```

做以下事情并不能解决问题

```
$_SESSION['amount']+=$amount; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:04:44.320

嗯，你确定你在脚本的开头调用了 session_start() 函数。

如果你有你为什么不试着打破它。

```
$currentAmount = $_SESSION['amount']
$amount = $_POST['amount']
$_SESSION['amount'] = $currentAmount + $amount; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:41:43.207

使用以下代码，您将`$_SESSION['amount']`使用 的当前值覆盖 的内容`$_POST['amount']`：

```
$amount=$_POST['amount']
$_SESSION['amount']=$amount; 
```

你应该这样做：

```
$currentAmount      = $_POST['amount']
$_SESSION['amount'] += $currentAmount; 
```

不要忘记检查您是否`session_start()`在脚本开头调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:12:58.653

不需要一次又一次地设置会话。

```
$amount=$_POST['amount'];
//$_SESSION['amount']=$amount;
$_SESSION['amount']+=$amount; 
```

# jquery - 确定由 ENTER 触发的表单元素

> ID：11156696
> 
> 赞同：0
> 
> 时间：2012-06-22T13:01:41.973
> 
> 标签：jquery

我正在尝试使用 jquery 来检测何时按下 ENTER 键并且我需要知道哪个表单元素触发了该事件。我找到了用于检测何时按下 ENTER 键的代码，但我无法确定触发它的表单元素的 ID。

```
 $(document).keypress(function(e) {
    if( e.which == 13 )
        {
        alert( $(this) );               //This shows an object is accessible
        alert( $(this).attr("id") );    //This displays "undefined". Why? How do I determine the id of the object?
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:04:05.753

使用事件委托，您可以尝试以下代码：

```
$(document).on('keypress', 'input', function(e) {
    if( e.keyCode === 13 ) {
       console.log(this.id);
    }
}); 
```

在您的示例中，您`$(this)`是`document`对象本身（而不是触发事件的元素）

另请注意，如果您的所有`input`字段都`id`定义了属性，则此代码有效（否则`this.id`不会为某些元素定义）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:35:30.340

我终于发现 $(this).attr("id") 永远不会返回一个 id，因为它是由按键触发的，而不是由在按键之前具有焦点的表单字段触发的，这就是我的情况真的在找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:28:54.083

你可以这样做

```
$('form input, form select, form radio').keypress(function(e) {
  if(e.which == 13) {
   $form = $(this).closest('form');
   alert($form.attr('id'))
   console.log($form);
  }
}); 
```

[http://jsfiddle.net/bmmq9/1/](http://jsfiddle.net/bmmq9/1/)

如果你有一个带有控制台的浏览器（比如带有 DevTools 的 Chrome 或带有 Firebug 的 Firefox），你可以使用它`console.log`而不是`alert`它会给你提供比它是一个对象的事实更多的信息。但请务必在测试后将其删除，否则 IE 会抛出 javascript 错误。

# android - 以编程方式查找外部 USB 存储设备路径？

> ID：11156702
> 
> 赞同：7
> 
> 时间：2012-06-22T13:02:16.950
> 
> 标签：android

我是 android 新手，我正在做一些项目规划。

我需要访问/存储一些文件到外部存储设备（ pendrive ）。如何查找外部存储设备路径（pendrive）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:10:22.117

最近有人[在这里](https://stackoverflow.com/q/11119016/1105376)问这个问题。

基本上，SDK 只支持一个“外部存储”，即 SD 卡，而不是“笔式驱动器”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-08T04:07:58.300

USB 设备在以下情况下被识别为`Mass Storage`设备：

```
usbInterface.getInterfaceClass() == UsbConstants.USB_CLASS_MASS_STORAGE
             || usbInterface.getInterfaceSubclass() == INTERFACE_SUBCLASS // int 6
             || usbInterface.getInterfaceProtocol() == INTERFACE_PROTOCOL // int 80 
```

和

```
usbInterface.getEndpointCount() == 2 
```

其中端点之一必须满足以下条件：

```
endPoint direction == 0
endPoint type = UsbConstants.USB_ENDPOINT_XFER_BULK //int 2 
```

有关更多详细信息，请参阅这些链接：

*   [USB检测存储设备](https://stackoverflow.com/questions/41890251/usbdevice-recognise-as-storage-device-and-find-path?noredirect=1&lq=1)

*   [未找到 USB 设备接口](https://stackoverflow.com/questions/42088660/usbinterface-null-for-except-1-device?noredirect=1&lq=1)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-22T19:32:35.967

您将需要一根 OTG 电缆和一部有根电话。从 Play 商店安装 Stick mount。您可以访问 pendrive

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-22T13:22:32.880

这确实为您提供了外部存储：

```
File root = Environment.getExternalStorageDirectory(); 
```

> 获取用于放置特定类型文件的顶级公共外部存储目录。这是用户通常放置和管理他们自己的文件的地方，因此您应该小心放在这里的内容，以确保您不会删除他们的文件或妨碍他们自己的组织。

请参阅文档： http: [//developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory](http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory(java.lang.String) (java.lang.String )

# opengl - GLSL sampler2DRect 和单通道 (GL_RED) 数据

> ID：11156703
> 
> 赞同：1
> 
> 时间：2012-06-22T13:02:17.637
> 
> 标签：opengl, glsl, opengl-3

我有像素图数据 1 通道，8 位。我有像素图的宽度和高度。

我正在尝试将像素图数据提交到片段着色器。我将**ogl3**与 VAO 和 VBO 一起使用。

我的设置：

```
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_RECTANGLE, texture);
glTexParameteri(GL_TEXTURE_RECTANGLE, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_RECTANGLE, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_RECTANGLE, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_RECTANGLE, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
glTexImage2D(GL_TEXTURE_RECTANGLE, 0, GL_RED, width, height, 0, GL_RED, GL_UNSIGNED_BYTE, data);
glGenVertexArrays(1, &vao);
glBindVertexArray(vao);
glGenBuffers(1, &vbo);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glBufferData(GL_ARRAY_BUFFER, ..., vertices, GL_STATIC_DRAW);
...create program...
glUseProgram(program);
glUniform1i(glGetUniformLocation(program, "image"), 0);
glDrawArrays(GL_TRIANGLE_FAN, 0, ...); 
```

和片段着色器：

```
uniform sampler2DRect image;

varying vec2 varying_texcoord;

void main() {
    vec4 sample = texture2DRect(image, varying_texcoord);
    gl_FragColor = vec4(1.0, 0.0, 0.0, sample.a);
} 
```

gl_FragColor 应该根据 sample.a 的值将像素绘制成浅红色和深红色，但是 sample.a 似乎**总是 1.0** - 我得到的是纯红色#ff0000。我认为问题出在 glTexImage2D 中，不是吗？

请假设程序和数据是有效的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:53:25.907

我相信您正在寻找的答案在[glTexImage2D](http://www.opengl.org/sdk/docs/man4/xhtml/glTexImage2D.xml)的文档中。它说

" **GL_RED**：每个元素都是一个红色分量。GL 将其转换为浮点数并将其组装成一个 RGBA 元素，方法是为绿色和蓝色附加 0，为 alpha 附加 1。然后每个分量乘以带符号的比例因子 GL_c_SCALE，添加到有符号偏差 GL_c_BIAS，并钳制在 [0,1] 范围内。”

您要求 .a 组件，该组件始终为 1。您需要使用纹理实际包含数据的组件 - 即 .r

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-30T14:55:54.387

这个问题很老，但答案可以帮助其他人。

如果您使用`sampler2DRect`. 我假设您将顶点着色器中的传入纹理坐标复制到您的`varying_texcoord`.

如果这样做，则需要计算坐标：

```
vec2 coords = varying_texcoord * imageSize(image); 
```

然后传递坐标：

```
vec4 sample= texture(image, coords); 
```

# php - 是否总是需要在 foreach 之前使用“is_array()”？

> ID：11156708
> 
> 赞同：15
> 
> 时间：2012-06-22T13:02:40.967
> 
> 标签：php, arrays, foreach

我想知道是否总是有必要`is_array()`在每次`foreach`我做之前使用类似的东西。

如果变量不是数组，则会引发错误。所以我总是使用：

```
if(is_array($users))   {
    foreach($users as $user){

    }
} 
```

你会推荐我什么？谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-22T13:05:27.327

好吧，如果您对代码足够**了解，则****没有**理由必须检查它是否是数组。

否则，如果变量经常更改类型**，**我建议您稍微调整一下您的代码，这样它就不会那样做。

除此之外，使用该 if 语句是要走的路。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T13:05:24.533

如果您确定某个东西是一个数组或以其他方式实现 Iterable，那么您显然不需要额外的`if`条件。如果您不确定，那么显然检查类型将使您的代码更可靠。

我见过的一些技巧包括将变量转换为数组：(array)$users。但是不推荐这样做，最好明确检查类型。

此外，如果这是函数内的代码，您可以使用参数类型：

```
function mycode(array $users)
{
    foreach ($users as $user) { }
} 
```

当使用错误的类型调用函数时，将触发错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T13:05:12.653

假设这发生在一个函数中：

```
function doSomethingWithUsers($users)
{
    if(!is_array($users))
    {
        throw new Exception('$users is expected to be an array');
    }

    foreach($users as $user){
        ...
    }
} 
```

这样，无论何时使用错误的参数调用它，您都会立即看到。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-20T05:47:49.943

一般来说，最好**不要**。

编程中一个好的一般原则是不要隐藏或忽略错误。

如果一个变量*应该*是一个数组，那么如果它不是一个数组，那么你就不会专门​​忽略这种情况。相反，最好通知您内置错误处理的问题。否则，你没有解决问题，只是隐藏了它的影响。这会使调试后续问题变得困难。

但是，这里有许多假设：

*   这是假设变量应该是一个数组。如果您在其上使用 foreach ()，我认为是这种情况。如果您在*可能合法地不是数组*的东西上运行 foreach () ，则可能表明您的代码可能需要重新工作。

*   您的错误报告和/或日志记录（在开发服务器上报告，在生产环境中记录）需要正确设置，以便从 PHP 错误告诉您的内容中受益。具体来说，忽略 PHP 警告几乎从来都不是一个好主意——尽管它们被称为“警告”，但它们通常表示失败（在我看来）应该停止执行。

也就是说，在 foreach() 前面使用 an不一定是*错误的。*`is_array()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T13:04:25.910

> 你会推荐我什么？

是的，这是个好主意，这样的考虑让你成为一个[防御性程序员](http://en.wikipedia.org/wiki/Defensive_programming):)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-18T09:19:13.383

这对我来说更好：

```
foreach (is_array($arr) ? $arr : array() as $key=>$val) {
  //..
} 
```

# java - 从 SP 到复杂对象的映射结果

> ID：11156713
> 
> 赞同：3
> 
> 时间：2012-06-22T13:03:00.607
> 
> 标签：java, mapping, resultset, ibatis, mybatis

我正在尝试在我的工作项目中实现 MyBatis。它是一个遗留系统，它使用 vanilla JDBC 仅通过存储过程来访问数据库。我知道要调用存储过程，MyBatis 需要一个包含存储过程输入参数的对象和另一个保存结果集的对象。不确定这是否完全正确。

为了防止在系统中创建太多数据实体，我想重用现有的。这就是问题出现的地方。让我解释一下我所面临的典型情况/场景，然后我将如何解决它。

假设我在系统中有以下数据实体：

```
class Account {
    private int accountID;
    private String accountName;
    private OrganizationAddress address;
    // Getters-Setters Go Here
}
class OrganizationAddress extends Address {
    // ... some attributes here
    // Getters-Setters Go Here
}
class Address {
    private String address;
    private String city;
    private String state;
    private String country;
    // Getters-Setters Go Here
} 
```

我正在使用注释，所以我的`Mapper`班级有这样的事情：

```
@Select(value = "{call Get_AccountList(#{accountType, mode=IN, jdbcType=String})}")
@Options(statementType = StatementType.CALLABLE)
@Results(value = {
    @org.apache.ibatis.annotations.Result
        (property = "accountID", column = "Account_ID"),
    @org.apache.ibatis.annotations.Result
        (property = "accountName", column = "Organization_Name"),
    @org.apache.ibatis.annotations.Result
        (property = "state", column = "State", javaType=OrganizationAddress.class)
    })
List<Account> getAccountList(Param param); 
```

*问题：*当我调用存储过程时，`Account`对象`state`总是有`null`.

雪上加霜的是，我无权访问上述数据实体的来源。所以我也无法尝试此链接上提供的解决方案 - [Mybatis select with nested objects](https://stackoverflow.com/questions/9717500/mybatis-select-with-nested-objects)

我的查询：

*   我是否可以使用系统中已经存在的数据实体，或者我必须创建新的，然后将数据映射到现有的？
    *   如果是，我该怎么做？任何参考，如果有的话。
    *   如果不是，有没有办法减少我为调用存储过程而创建的数据实体的数量（对于 in 和 out 参数）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T00:41:24.183

我认为适合您情况的最佳解决方案（如果我理解正确的话）是使用 MyBatis TypeHandler 将状态列映射到 OrganizationAddress 对象。

我根据您提供的信息整理了一个示例，并且它有效。这是修改后的带注释的映射器：

```
// Note: you have an error in the @Select line => maps to VARCHAR not "String"
@Select(value = "{call Get_AccountList(#{accountType, mode=IN, jdbcType=VARCHAR})}")
@Options(statementType = StatementType.CALLABLE)
@Results(value = {
  @org.apache.ibatis.annotations.Result
      (property = "accountID", column = "Account_ID"),
  @org.apache.ibatis.annotations.Result
      (property = "accountName", column = "Organization_Name"),
  @org.apache.ibatis.annotations.Result
      (property = "address", column = "State", typeHandler=OrgAddressTypeHandler.class)
  })
List<Account> getAccountList(Param param); 
```

您需要将 Account 的地址字段映射到“state”列，并使用 TypeHandler 创建一个填写其“state”属性的 OrganizationAddress。

我创建的 OrgAddressTypeHandler 如下所示：

```
import java.sql.CallableStatement;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import org.apache.ibatis.type.BaseTypeHandler;
import org.apache.ibatis.type.JdbcType;

public class OrgAddressTypeHandler extends BaseTypeHandler<OrganizationAddress> {

  @Override
  public OrganizationAddress getNullableResult(ResultSet rs, String colName) throws SQLException {
    OrganizationAddress oa = new OrganizationAddress();
    oa.setState(rs.getString(colName));
    return oa;
  }

  @Override
  public OrganizationAddress getNullableResult(ResultSet rs, int colNum) throws SQLException {
    OrganizationAddress oa = new OrganizationAddress();
    oa.setState(rs.getString(colNum));
    return oa;
  }

  @Override
  public OrganizationAddress getNullableResult(CallableStatement cs, int colNum) throws SQLException {
    OrganizationAddress oa = new OrganizationAddress();
    oa.setState(cs.getString(colNum));
    return oa;
  }

  @Override
  public void setNonNullParameter(PreparedStatement arg0, int arg1, OrganizationAddress arg2, JdbcType arg3) throws SQLException {
    // not needed for this example
  }
} 
```

如果您需要比这更完整的工作示例，我很乐意发送更多。或者，如果我误解了您的示例，请告诉我。

使用此解决方案，您无需修改​​即可使用域对象。您只需要 TypeHandler 来进行映射，而不需要 XML 映射器文件。

我也在 MySQL 中使用 MyBatis-3.1.1 进行了此操作。这是我为测试它而创建的简单模式和存储过程：

```
DROP TABLE IF EXISTS account;
DROP TABLE IF EXISTS organization_address;

CREATE TABLE account (
  account_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
  organization_name VARCHAR(45) NOT NULL,
  account_type VARCHAR(10) NOT NULL,
  organization_address_id SMALLINT UNSIGNED NOT NULL,
  PRIMARY KEY  (account_id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE organization_address (
  organization_address_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
  address VARCHAR(45) NOT NULL,
  city VARCHAR(45) NOT NULL,
  state VARCHAR(45) NOT NULL,
  country VARCHAR(45) NOT NULL,
  PRIMARY KEY  (organization_address_id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO organization_address VALUES(1, '123 Foo St.', 'Foo City', 'Texas', 'USA');
INSERT INTO organization_address VALUES(2, '456 Bar St.', 'Bar City', 'Arizona', 'USA');
INSERT INTO organization_address VALUES(3, '789 Quux Ave.', 'Quux City', 'New Mexico', 'USA');

INSERT INTO account VALUES(1, 'Foo',  'Type1', 1);
INSERT INTO account VALUES(2, 'Bar',  'Type1', 2);
INSERT INTO account VALUES(3, 'Quux', 'Type2', 3);

DROP PROCEDURE IF EXISTS Get_AccountList;

DELIMITER $$

CREATE PROCEDURE Get_AccountList(IN p_account_type VARCHAR(10))
READS SQL DATA
BEGIN
     SELECT a.account_id, a.organization_name, o.state
     FROM account a
     JOIN organization_address o ON a.organization_address_id = o.organization_address_id
     WHERE account_type = p_account_type
     ORDER BY a.account_id;
END $$

DELIMITER ; 
```

# xml - 具有环境概念的自动打包和部署工具

> ID：11156715
> 
> 赞同：1
> 
> 时间：2012-06-22T13:03:01.840
> 
> 标签：xml, deployment, automation, teamcity, environment

我们大量使用**TeamCity**进行构建\测试。

据我所知，TeamCity 不是**打包和部署**的合适工具。当然，任何命令行进程都可以由 TeamCity 发起，但我们缺少的是“**环境**”的概念，即部署在哪里。

像 Nolio 这样的一些工具有任意格式。例如，我们可以为项目定义环境类型：

```
 1 app server:
  - IIS web site with:
     - Virtual Dir \ Web Application:
        - App Pool
        - .NET Framework version
  - Windows service with:
    - Name
    - Description

 1 db server:
  - db name
  - db user
  - db password 
```

所以所有的环境（Dev、QA、PreProd、Prod）都会有这些部分的不同参数。在打包步骤（例如通过 Wix 到 MSI）期间，我们可以使用这些参数为特定环境创建 MSI，例如更新 Web.config 中的 connectionString。

其他项目可以有不同的环境定义。XML 格式可能是描述这种结构和值的最佳方式。

我们在 NAnt 脚本中实现了类似的功能，其中每个环境都有 .build 文件，其中包含平面值列表。然后我们`<xmlpoke>`将值写入`Web.config`文件。但这很难维持。

所以现在我们正在寻找一些可以与 TeamCity 集成的工具（以获取构建工件），将它们打包到可安装的 MSI 中，然后可以轻松地将其部署到环境中。这样的工具必须有“环境”这个概念，允许轻松定义结构（见上例），允许添加\修改\删除环境实例，然后在打包\部署时自动使用它们。

有什么想法或经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:15:13.887

我对不同环境的自动和手动部署实际上是通过 Team City 和 MSDeploy 并使用 Config Transformations 完成的。

这是我使用的分步指南，由 Troy Hunt 撰写：[http ://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity.html](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity.html)

以下是有关转换语法的附加信息：http: [//msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

在此设置中，每个环境将是您解决方案中不同的构建配置，以及特定的配置转换。

# objective-c - 将 Short Zulu 格式日期转换为 NSDate

> ID：11156717
> 
> 赞同：0
> 
> 时间：2012-06-22T13:03:04.117
> 
> 标签：objective-c, ios, nsstring, nsdate

我在将短 Zulu 日期格式转换为 NSDate 对象时遇到了麻烦。我找到了一些转换祖鲁字符串的答案，但我的看起来像：

```
20111210T1000 
```

根据我的研究，我正在尝试做：

```
NSDateFormatter *f = [[NSDateFormatter alloc] init];
[f setDateFormat:@"yyyyMMdd'T'HHmmss Z"];
NSDate *date = [f dateFromString:[str stringByReplacingOccurrencesOfString:@"Z" withString:@" +0000"]];
[f release]; 
```

我已经尝试了很多方法，但我的约会仍然为零......

我应该如何设置我的 NSDateFormatter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:43:32.520

这是一个快速修复，在您的日期字符串中，您错过了格式中的时区，您应该将（此处为巴黎）附加到您的字符串中，它应该可以工作。还有格式不对。

```
 NSDateFormatter* df = [[NSDateFormatter alloc]init];
 [df setDateFormat:@"yyyyMMdd'T'SSSZ"];
 NSString* str = @"20111210T1000-0100";   // NOTE -0100, GMT +1 Paris zone
 NSDate* date = [df dateFromString:str];
 NSLog(@"%@", date); 
```

# macos - 终端中的命令

> ID：11156718
> 
> 赞同：0
> 
> 时间：2012-06-22T13:03:07.123
> 
> 标签：macos, terminal

我有一个关于终端的简单问题（在 os x 上）当我在终端中收到错误时，光标不会出现，并且我输入的每个命令都不会继续。

我得到的最后一行是：

```
2012-06-22 14:35:36.905 firefox-bin[65232:d07] CFPropertyListCreateFromXMLData(): Old-style plist parser: missing semicolon in dictionary. 
```

我必须重新启动终端还是有办法通过低谷？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:28:01.187

您可以退出使用 < Ctrl-C > 启动的程序（对于其他应用程序 < Ctrl-D > 可能会起作用）

# c - C中的动态大小数组

> ID：11156719
> 
> 赞同：3
> 
> 时间：2012-06-22T13:03:08.840
> 
> 标签：c, pointers

我正在尝试使用[http://c.learncodethehardway.org/](http://c.learncodethehardway.org/)学习 C，但我遇到了第 18 章中的一个额外的学分问题（http://c.learncodethehardway.org/book/learn-c- the-hard-waych18.html），我希望有人可以帮助我。

我遇到的具体问题是有几个这样定义的结构：

```
#define MAX_ROWS = 500;
#define MAX_DATA = 512;

struct Address {
    int id;
    int set;
    char name[MAX_DATA];
    char email[MAX_DATA];
};

struct Database {
    struct Address rows[MAX_ROWS];       
};     

struct Connection {
    FILE *file;
    struct Database *db;
}; 
```

挑战在于对其进行返工，以便`rows`可以具有不依赖于该常数的可变大小。

因此，在我的 Database_create 方法中，我尝试`rows`使用以下内容进行初始化：

```
conn->db->rows = (struct Address*) malloc(max_rows * sizeof(struct Address)); 
```

where`conn->db`指向 Database 的一个实例，并且`max_rows`是一个传递给函数的 int。我还将数据库结构更改为

```
struct Database{
    struct Address* rows;
} 
```

那段代码似乎运行正常，但如果我尝试访问其中的任何成员，`rows`我会遇到分段错误，我相信这意味着我正在尝试访问未使用的内存位。

我在这上面花了好几个小时，我相信我不会离得太远，但我真的很感激任何能让我走上正轨的指导。

* * *

编辑：只是想在使用 Valgrind 运行它之后添加更多细节，这会引发错误：

```
==11972== Invalid read of size 4
==11972==    at 0x100001578: Database_set (ex18.c:107)
==11972==    by 0x100001A2F: main (ex18.c:175)
==11972==  Address 0x7febac00140c is not stack'd, malloc'd or (recently) free'd 
```

它指向的代码行是：

```
struct Address *addr = &conn->db->rows[id];
if(addr->set) die("Already set, delete it first"); 
```

我认为第 107 行`if(addr->set)`意味着它正在尝试读取它无法读取的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:04:50.413

你`sizeof(struct Address)`不想`sizeof(struct Address*)`

`sizeof(struct Address*)`可能返回 4 的大小（完全取决于目标平台），而`Address`结构的实际大小更接近 1040（假设每个 char 1 个字节，每个 int 4 个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:19:30.167

**编辑**：好吧，看起来（使用您的最新编辑），您实际上正在正确地完成这部分。

您实际上没有为地址结构分配足够的大小。你需要的是这样的：

```
struct Database{
    struct Address** rows;
}
//create array of pointers to Address structures
// (each element has size of the pointer)
conn->db->rows = (struct Address**) malloc(max_rows * sizeof(struct Address*));
for(int i=0; i < max_rows; i++) {
    conn->db->rows[i] = (struct Address*) malloc(sizeof(struct Address));
} 
```

或这个：

```
struct Database{
    struct Address* rows;
}
//create array of Address structures
// (each element has size of the structure)
conn->db->rows = (struct Address*) malloc(max_rows * sizeof(struct Address)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:16:17.703

当你加载

```
void Database_load(struct Connection *conn)
{
        int rc = fread(conn->db, sizeof(struct Database), 1, conn->file);
        if(rc != 1) die("Failed to load database");
} 
```

或者写数据库，

```
void Database_write(struct Connection *conn)
{
        rewind(conn->file);

        int rc = fwrite(conn->db, sizeof(struct Database), 1, conn->file);
        if(rc != 1) die("Failed to write database");

        rc = fflush(conn->file);
        if(rc == -1) die("Cannot flush database.");
} 
```

您不是在读取或写入内容（`struct Address`es），而只是指向内存位置的指针。在读取以前编写的数据库时，该指针不指向任何特定的东西，它是一个野指针。然后当然尝试取消引用它很可能会导致分段错误，如果没有，您将得到无意义的伪数据。

如果您更改您的`struct Database`so that `rows`is a `struct Address*`，您需要保留项目计数并更改您的读写代码以处理指向的数据`rows`。先写下你有多少个项目，然后写剩下的（`max_data`和`max_rows`项目）；阅读时，阅读你有多少项目，为它们分配空间，阅读`max_data`和`max_rows`项目。

# android - ListView 中的可选 TextView（缺少动画）

> ID：11156720
> 
> 赞同：1
> 
> 时间：2012-06-22T13:03:12.380
> 
> 标签：android, android-layout, android-listview, textview

我用自定义适配器构建了一个 ListView，这样我就有了一个 Checkbox（当时不可见）和一个 TextView 来显示一些文本。

现在我想在列表中选择一个项目时有漂亮的动画（当你触摸元素时背景是蓝色的）。这可能吗？

我已经添加了一个 OnLongTouchListener 并且它工作但没有动画！

得到一些帮助会很酷:)

布局-XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <CheckBox
        android:id="@+id/list_checkbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="false"
        android:visibility="gone"
        android:text="" 
        android:focusable="false"
        android:clickable="false">
    </CheckBox>

    <TextView
        android:id="@+id/list_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:text=""
        android:clickable="true"
        android:longClickable="true" >
    </TextView>

</LinearLayout> 
```

Java代码：

```
private class CommunityListAdapter extends ArrayAdapter<Community> {

    private List<Community> items;
    private Context context;

    public CommunityListAdapter(Context context, List<Community> communities) {
        super(context, R.layout.list_item, communities);
        this.items = communities;
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.list_item, null);
        }

        Community item = items.get(position);
        if(item != null) {
            TextView textView = (TextView) view.findViewById(R.id.list_text);
            if(textView != null) {
                textView.setText(item.getName());
                textView.setOnLongClickListener(new OnLongClickListener() {

                    public boolean onLongClick(View view) {
                        startActionMode(new MultiChoiseCABListener());
                        Toast.makeText(context, "TEST", 10).show();
                        return false;
                    }

                });
            }
        }

        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:24:05.307

在您的可绘制对象中创建按下状态 xml，您可以在其中设置不同的位图以在不同的点击状态下显示，并将该 xml 设置为您的主要布局背景。

示例状态 xml。

list_item_bg_state.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item  android:state_pressed="true" android:drawable="@drawable/blue_bg" />
    <item android:drawable="@drawable/white_bg"/>
</selector> 
```

其中 blue_bg 和 white_bg 是可绘制对象中的两个.png 图像。

注意上面的 xml 应该在你的 drawables 文件夹中。现在将此 xml 设置为列表项主布局的背景。喜欢，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/list_item_bg_state"
    android:orientation="horizontal" >
</LinearLayout> 
```

问候， Aqif

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:19:12.603

您尚未定义动画，请定义动画并与此视图关联。

```
 Animation a = new AlphaAnimation(1.00f, 0.00f);
        a.setDuration(1000);
        YOURTEXTVIEW.startAnimation(a); 
```

# c - 为什么 last_rx 总是 0？

> ID：11156724
> 
> 赞同：1
> 
> 时间：2012-06-22T13:03:17.867
> 
> 标签：c, linux-kernel

我需要在结构中获取字段`last_rx`的值...但由于某种原因始终为 0（具有有效值）...这是为什么呢？是否有另一个字段给出这个值？`trans_start``net_device``dev->last_rx``trans_start`

这是一个片段

```
struct net_device *dev;
dev = first_net_device(&init_net);

while (dev)
{

        printk(KERN_ALERT "last received time is %li\n", dev->last_rx );
        printk(KERN_ALERT "last transmit time is %li\n", dev->trans_start );
        dev = next_net_device(dev);
} 
```

我正在使用 linux kernel 2.6.35 编写内核模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:54:42.073

我只是添加了 `dev->last_rx = jiffies;` 它，它起作用了！:D

```
struct net_device *dev;
dev = first_net_device(&init_net);

while (dev)
{

        dev->last_rx = jiffies;
        printk(KERN_ALERT "last received time is %li\n", dev->last_rx );
        printk(KERN_ALERT "last transmit time is %li\n", dev->trans_start );
        dev = next_net_device(dev);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:10:11.163

对您的问题的简短回答是更新驱动程序。驱动程序负责更新值。在 for 提到的文档中，它声明该值未使用并且内核未使用它，但还有其他东西会使用它。如果您想将 arp 轮询与绑定驱动程序一起使用，则它是必需的。

来自[http://www.makelinux.net/ldd3/chp-17-sect-3](http://www.makelinux.net/ldd3/chp-17-sect-3)

无符号长 trans_start；

无符号 long last_rx;

包含 jiffies 值的字段。驱动程序负责分别在传输开始和接收到数据包时更新这些值。网络子系统使用 trans_start 值来检测发射机锁定。last_rx 当前未使用，但驱动程序无论如何都应维护此字段以备将来使用。

* * *

在此处查看绑定驱动程序中对 last_rx 的引用：http: [//www.kernel.org/doc/Documentation/networking/bonding.txt](http://www.kernel.org/doc/Documentation/networking/bonding.txt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:42:35.330

根据[这些文档](http://www.makelinux.net/ldd3/chp-17-sect-3)，`last_rx`当前未使用，因此驱动程序可能没有更新该值。

# java - 带有通配符的 java 泛型

> ID：11156725
> 
> 赞同：2
> 
> 时间：2012-06-22T13:03:52.640
> 
> 标签：java, generics, effective-java

有人可以用通配符向我解释 Java 泛型中扩展和超级之间的区别吗？

我已阅读相关帖子并没有完全理解。如果你能用实时的例子来解释我，那对我会有很大的帮助。

PECS（生产者你扩展，消费你使用超级）是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:11:05.563

如果您有 A、B 和 C 类，其中

A 扩展 B

和

B 扩展 C

然后

A和B匹配：

? 扩展 B

和

B和C匹配：

? 超级乙

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:27:56.080

类型参数 <? extends T> 表示 T 或 T 的任何子类。

类型参数 <? super T> 表示 T 或 T 的任何超类。

例如：

*   可迭代<? extends T> 支持任何 next() 方法返回 T 的迭代器。这包括返回 T 的子类的迭代器。
*   收藏<? super T> 支持任何可以放置 T 的集合。这包括可以保存 T 的任何超类的对象的集合。

在*Effective Java*中，Joshua Bloch 推荐了助记符**PECS——**代表“Producer-Extends, Consumer-Super”。

> “如果参数化类型代表 T 生产者，则使用`<? extends T>`；如果它代表 T 消费者，则使用`<? super T>`。”

这也称为*Get 和 Put 原则，*来自Maurice Naftalin 和 Philip Wadler 的*Java Generics*。

> “`extends`当你只从结构中*获取*值时使用`super`通配符，当你只*将值放入结构时使用通配符，当你**同时*获取和放置时不要使用通配符。”

# jquery-tabs - 重定向后保留 jquery 选项卡

> ID：11156727
> 
> 赞同：1
> 
> 时间：2012-06-22T13:03:58.183
> 
> 标签：jquery-tabs

我在父菜单中有 jquery 选项卡，我想在页面重定向后保留打开的选项卡。

```
HttpContext.Current.Response.Redirect("~/HRMS/PayrollHome.aspx", false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:07:56.530

您可以随时存储在会话中打开和关闭选项卡的时间。然后，当再次访问该页面时，您可以检查每个选项卡是否在会话中列为打开状态以及是否重新打开它。

**编辑**

很难给你完整的代码片段来完全回答你的问题，因为我没有访问你的代码库。但它会是这样的。

```
<ul id="tabs">
  <li onclick="$.get("SaveTab.ashx?tab=1");">Tab 1</li>
  <li onclick="$.get("SaveTab.ashx?tab=2");">Tab 2</li>
</ul> 
```

然后在 SaveSession 处理程序中

```
<%@ WebHandler Language="C#" Class="SaveTab" %>

using System;
using System.Web;

public class SaveTab: IHttpHandler, System.Web.SessionState.IRequiresSessionState
{

    public void ProcessRequest (HttpContext context) {
        context.Response.ContentType = "text/plain";
        if (HttpContext.Current.Request.QueryString["tab"] != null)
        {
            HttpContext.Current.Session["OpenTab"] =         HttpContext.Current.Request.QueryString["tab"];
        }
}

    public bool IsReusable {
        get {
            return false;
        }
    }
} 
```

然后在 ASPX 输出中选择选项卡的一些 Javascript。请注意，我正在输出会话值。

```
$(document).ready(function() {
  $('#tabs').tabs('select', <%= SESSION["OpenTab"]%>);
}); 
```

我希望这足以让您了解总体思路，我不能清楚地告诉您确切的操作，只是向您展示一个好的方法。

# php - 最后插入 ID 未返回

> ID：11156735
> 
> 赞同：4
> 
> 时间：2012-06-22T13:04:35.593
> 
> 标签：php, mysql, pdo

我有以下代码用于使用 PDO 将数据插入数据库。

它将数据插入数据库，但不返回最后插入的 ID。

这`userid`是主键

```
 try {
        $dbh = new PDO('mysql:host=localhost;dbname=crud_demo', "username", "password");

        $sqlQuery = "INSERT INTO users(userid,first_name,last_name,email,password)
            VALUES(:userid,:first_name,:last_name,:email,:password)";

        $statement = $dbh->prepare($sqlQuery);
        $bind = array(
            ":userid" => "bhavik",
            ":first_name" => "Bhavik",
            ":last_name" => "Patel",
            ":email" => "bhavitk@live.in",
            ":password" => "1234567"
        );
        $statement->execute($bind);
        echo $dbh->lastInsertId();
    } catch (PDOException $e) {
        echo $e->getMessage();
    } 
```

`$dbh->lastInsertId();`无论我为用户 ID 插入什么值，总是返回 0

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T13:11:51.800

`lastInsertId()``AUTO_INCREMENT`仅返回在列中自动生成的 ID 。您`PRIMARY KEY`显然是一个字符串（或者至少您在其中插入了一个字符串）。由于您要插入一个已知值，因此您实际上不需要找出插入的 ID — 您自己指定了它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T13:11:06.250

您的数据库`userid`中没有`auto_increment`属性，因此`lastInsertId()`永远不会返回任何有用的东西。

只有`lastInsertId()`当您的领域是：

1.  主键
2.  不为空
3.  整数类型（int、bigint 等）
4.  自动递增

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:07:08.977

首先你需要检查插入查询。

如果运行正常，则使用 mysql_insert_id() 之类的 mysql 函数。

如果这个函数是运行属性，那么你的 $dbh->lastInsertId() 可能会出错

这个功能。

# jquery - jQuery：如何在单击事件中定义 $(this) 作为参数传递给函数

> ID：11156736
> 
> 赞同：0
> 
> 时间：2012-06-22T13:04:41.603
> 
> 标签：jquery, events, this, arguments

好的，这就是交易。我调用了这个初始化函数一次。它贯穿该函数，它还触发了我的 region.prototype.load(); 和我的 region.prototype.edit(); 功能一次。在 init 函数的中间，我将 click 和 touchstart 事件绑定到 .myElement

这是问题所在。$ths 未定义为具有 region.prototype.edit() 的值；当它第一次加载函数时。在您单击 .myElement 之前，不会定义 $ths。但我需要将 $ths 传递给另一个函数。但我不能放 region.prototype.edit(); 在单击事件内部，因为它在文档级别将事件绑定到 HTML 元素，如果我这样做，那么每次单击 .myElement 时，都会将另一个单击事件附加到元素上，它基本上会导致递归。因此，每单击一次，我就会触发 3 个或更多事件。

我如何设置它以便我的 region.prototype.edit() 只触发一次，并且在我单击 .myElement 并定义 $ths 后它只触发一次？

```
 region.prototype.init = function() {
region.prototype.load();        
var chfTxt;
var $ths;

$(document).on("click", ".myElement", function (e, $ths) {
    e.stopPropagation();        
    $ths = $(this);

    $ths.each(function () {
        var options = {
            splitScreen: true,
            titleTxt: "Test"
        }
        $ths.openPopUp(options);

        if ($ths.data("x") == "yes") {
            chfTxt = $ths.text();
            $('#thing').text(chfTxt);
            $('#thing2').addClass("selected");      
        } else if($ths.data("y") == "yes") {
            $('#thing3').addClass("selected");
        }
    });
    return $ths;
});
region.prototype.edit(compPages, chfTxt, $ths); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:40:48.887

我解决了这个问题。

我给了我的第一次点击一个像这样的命名空间：

```
$(document).on("click.myElement", ".myElement", function (e) {}) 
```

我把我的 region.prototype.edit(); jQuery .one() 方法中的函数，如下所示：

```
$(document).one("click", ".myElement", function (e) {
    region.prototype.edit(compPages, chfTxt, $ths);
}); 
```

所以现在它们都在点击时触发，并且 $ths 正在为我的函数定义，但我的 edit() 函数只会触发一次并且不会传播。

我还删除了那个回电，因为那是非常错误的

# python - 将字典划分为变量

> ID：11156739
> 
> 赞同：50
> 
> 时间：2012-06-22T13:04:45.570
> 
> 标签：python, python-2.7

我正在学习 Python，目前正在通过字典进行更多学习。

我在想;

如果我有一个像这样的字典：`d = {'key_1': 'value_a', 'key_2': 'value_b'}`并且我想将此字典分离/划分为变量，其中每个变量是字典中的一个键，每个变量值是字典中该键的值。

实现这一目标的最佳pythonic方法是什么？

```
d = {'key_1': 'value_a', 'key_2': 'value_b'}
#perform the command and get
key_1 = 'value_a'
key_2 = 'value_b' 
```

我试过了：`key_1, key_2 = d`但它没有用。

基本上，我正在寻求专家的智慧，以了解是否有更好的方法将 2 行代码减少为 1 行。

注意：这不是动态变量创建。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2018-03-16T05:53:22.613

现有的答案将起作用，但它们本质上都是在重新实现 Python 标准库中已经存在的函数：[`operator.itemgetter()`](https://docs.python.org/2/library/operator.html#operator.itemgetter)

从[文档](https://docs.python.org/2/library/operator.html#operator.itemgetter)：

> 返回一个可调用对象，该对象使用操作数的 __getitem__() 方法从其操作数中获取项目。如果指定了多个项目，则返回查找值的元组。例如：
> 
> 在 f = itemgetter(2) 之后，调用 f(r) 返回 r[2]。
> 
> 在 g = itemgetter(2, 5, 3) 之后，调用 g(r) 返回 (r[2], r[5], r[3])。

* * *

换句话说，你的解构 dict 分配变成了这样：

```
from operator import itemgetter

d = {'key_1': 'value_a', 'key_2': 'value_b'}
key_1, key_2 = itemgetter('key_1', 'key_2')(d)

# prints "Key 1: value_a, Key 2: value_b"
print("Key 1: {}, Key 2: {}".format(key_1, key_2)) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-22T13:11:00.693

问题是 dicts 是无序的，所以你不能使用简单的`d.values()`. 您当然可以首先按键对字典进行排序，然后解压缩值：

```
# Note: in python 3, items() functions as iteritems() did
#       in older versions of Python; use it instead
ds = sorted(d.iteritems())
name0, name1, name2..., namen = [v[1] for v in ds] 
```

你也可以，至少在一个对象内，做类似的事情：

```
for k, v in dict.iteritems():
    setattr(self, k, v) 
```

此外，正如我在上面的评论中提到的，如果您可以将需要解压字典的所有逻辑作为变量放入函数中，您可以这样做：

```
def func(**kwargs):
    # Do stuff with labeled args

func(**d) 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-06-22T13:51:37.923

以前没有提到的解决方案是

```
dictget = lambda d, *k: [d[i] for i in k] 
```

然后使用它：

```
key_1, key_2 = dictget(d, 'key_1', 'key_2') 
```

其优点是即使要检索更多变量，它也具有很强的可读性。

然而，更具可读性的是一个“真正的”函数，例如

```
def dictget(d, *k):
    """Get the values corresponding to the given keys in the provided dict."""
    return [d[i] for i in k]
    # or maybe
    return (d[i] for i in k) # if we suppose that we have bigger sets of result
    # or, equivalent to this
    for i in k:
        yield d[i] 
```

它也支持使用文档字符串进行评论，并且是首选。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-27T12:53:17.333

```
var1, var2 = (lambda key1, key2: (key1, key2))(**d) 
```

如果你想让任何阅读你的代码的人头疼，你可以使用匿名函数来解包这样的值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-22T13:15:47.297

如果你够勇敢，你可以这样做：

```
for k, v in d.items():
    locals()[k] = v 
```

但是勇敢可能还不够——你可能还必须鲁莽等等。

如果你想成为像@ecatmur 一样鲁莽的英雄，你可以这样做：

```
locals().update(d) 
```

但是现在 OP 更新了他的问题并回答了评论，看来这不是他真正想做的。仅作记录：动态创建变量有充分的理由——即使这里的每个人都同意它不是 Pythonic。很多解释器风格的问题都可以通过动态改变你的范围来解决。只需以受控方式执行此操作即可。而且......呃，不要将它部署到一些生产站点;）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-22T13:15:00.937

我实际上有一个用例，在其中我将`__init__`方法的所有参数拉入对象构造的 self 命名空间中：

```
vars(self).update(somedict) 
```

[vars](http://docs.python.org/library/functions.html#vars)函数为您提供与传递的对象关联的“命名空间”的字典。但是，由于 CPython 的实现细节，这不适用于函数中的局部变量。所以它不应该适用于所有的口译员。

对于全局命名空间，您可以替换`vars(self)`为`globals()`，但这确实表明您的逻辑有问题。如前所述，对于局部变量，这无论如何都不起作用（`NameError`即使您为字典分配了值也会如此）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-22T17:38:06.447

我认为这应该可以解决您的问题

```
d = {'key_1': 'value_a', 'key_2': 'value_b'}
for k,v in d.items():
    exec '%s=%s'%(k,v) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-30T07:40:10.380

@glglgl 的回答不是最多票，这个回答对我有用，

```
solution1={'variable': np.array([75, 74]), 'function': 0}

def dict_get(d, *k):
    for i in k:
        yield d[i]

variables, obj_func = dict_get(solution1, 'variable', 'function')

a, b=variables

print(a) 
```

参考：[@glglgl](https://stackoverflow.com/users/296974/glglgl)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-22T13:14:30.667

不建议动态声明变量，因为很难找到变量名的来源。也就是说，可以[在 python 中组合一个解决方案动态变量名，](https://stackoverflow.com/questions/2564140/dynamic-variable-name-in-python)但我不推荐它。使用普通的旧字典可能会更好。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-04-12T05:34:31.270

这是一个解决方案，它在调用堆栈帧上使用 Python 的检查模块来确定如何从提供的字典中提取正确的值。现在唯一的检查是确保每个输出变量都有一个可用的值，但如果需要，可以随意添加额外的检查。

```
import inspect
def update(src):
    result = []
    cprev = inspect.currentframe().f_back
    #print(cprev.f_code.co_names)
    for v in cprev.f_code.co_names[1:]:
        if src is cprev.f_locals[v]: continue
        if v in src:
            result.append(src[v])
        else:
            raise NameError(v + " has no source for update")
    return result 
```

用法如下所示：

```
src={'a': 1, 'b': 2, 'c': 3}
a,b,c = update(src) 
```

# performance - 如何提高 IDEA 性能？

> ID：11156742
> 
> 赞同：4
> 
> 时间：2012-06-22T13:04:54.753
> 
> 标签：performance, ide, intellij-idea, pycharm

我喜欢 JetBrains 的大多数其他 IDE 的 IDE。我经常使用 IDEA 和 PyCharm，在使用它们的同时，我会花很多时间等待 IDEA 的不同任务。那么有没有什么技巧可以提高 IDEA 和 PyCharm 的性能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:02:16.520

如果您在使用 IntelliJ IDEA 时遇到性能问题，请参阅[CPU 快照](https://intellij-support.jetbrains.com/hc/en-us/articles/207241235)和[线程转储](https://intellij-support.jetbrains.com/hc/en-us/articles/206544899)说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-27T10:34:30.490

就我而言，那个 IDE 之前太慢了。

然后，我尝试做一些改变......

**在设置页面：文件 - 设置...**

[![设置](../Images/d096f12a71ea3de46a5934387587ddf3.png)](https://i.stack.imgur.com/GZvKP.jpg)

在外观上，这是我的配置：

[![外观](../Images/bdd78ee49c97262a7a1731b768b6e475.png)](https://i.stack.imgur.com/sSGN7.jpg)

在插件上，尝试停用未使用的插件：

[![插件](../Images/17df055a05663f96144d82d531611cb5.png)](https://i.stack.imgur.com/RBrzi.jpg)

在更新时，我关闭更新：

[![更新](../Images/7b493ca59cb0687f6263df266b7f31ed.png)](https://i.stack.imgur.com/BNQyz.jpg)

**[配置 JVM 选项](https://www.jetbrains.com/help/idea/tuning-the-ide.html)**

我使用 64 位 Windows 7。

我去 ：`C:\Program Files\JetBrains\IntelliJ IDEA 2018.2.4\bin`

`idea64.exe.vmoptions`使用文本编辑器打开，并更改`-Xmx`和的值`-Xms`

这是我的新`idea64.exe.vmoptions`配置：

```
-Xms1024m
-Xmx2048m
-XX:ReservedCodeCacheSize=240m
-XX:+UseConcMarkSweepGC
-XX:SoftRefLRUPolicyMSPerMB=50
-ea
-Dsun.io.useCanonCaches=false
-Djava.net.preferIPv4Stack=true
-Djdk.http.auth.tunneling.disabledSchemes=""
-XX:+HeapDumpOnOutOfMemoryError
-XX:-OmitStackTraceInFastThrow 
```

说明（官方）：

**-Xmx** 限制 JVM 可以为运行 IntelliJ IDEA 分配的最大内存堆大小。默认值取决于平台。如果您遇到速度变慢的情况，您可能需要增加此值，例如，要将值设置为 2048 兆字节，请将此选项更改为 -Xmx2048m。

**-Xms** 指定 JVM 为运行 IntelliJ IDEA 分配的初始内存。默认值取决于平台。它通常设置为最大允许内存 (-Xmx) 的一半左右，例如 -Xms1024m。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:24:49.303

更改内存大小

```
<YOUR IDEA HOME>/bin/idea.vmoptions 
```

或在

```
<YOUR IDEA HOME>/bin/idea64.vmoptions 
```

如果您的 IDEA 在 64 位机器上运行。

# perl - 提取由预定义的多行字符序列包围的部分

> ID：11156743
> 
> 赞同：2
> 
> 时间：2012-06-22T13:04:59.750
> 
> 标签：perl, awk, grep, nawk

希望 AWK 大师可以为我的问题提供解决方案。

我有一个像这样的文件：

```
cat cat cat cat cat cat dog rat ate dog tit 
dog cat dog dog dog rat dog pat ate cat dog 
```

我必须使用 AWK 来提取第一个出现的**c**和 a **d**之间的模式。从第一个**c**开始，计数应该保持在**c**和**d**的数量上，这样当计数匹配时，第一个**c**和匹配的**d**应该被输出到一个文件中，其中包括匹配 d 的行**号**。

在此特定示例中，匹配发生在第七只狗上，因此输出必须是：

```
cat cat cat cat cat cat dog rat ate dog tit 
dog cat dog dog dog rat d 
```

比赛可以超越两条线！*输出可以或不能包括**c**和**d***。文本中存在包括特殊字符在内的各种字符！为了进行打印，计数必须匹配。

提前感谢您的回复。建议总是受欢迎的。

编辑：只要满足条件并获得出口**d的行号，就可以破坏****c**和**d**之间模式的捕获:)

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:39:43.140

一些提示，但没有给出完整的解决方案：

默认情况下，awk 将每一行视为一条记录。默认记录分隔符是`RS="\n"`.

根据您的 awk 版本，您可以将`RS`记录分隔符设置为与`c`或匹配的正则表达式`d`。然后，对于每条记录，您可以检查`RT`变量，该变量将包含`c`或`d`，具体取决于**实际**匹配的内容。从那里开始，使用递增 on `c`，递减 on的变量，`d`当它达到 0 时，您将能够找到匹配的结束。

然后，您可以使用包含到目前为止匹配项的变量，并继续`RT`将新记录连接到它，直到完成。

如果您需要知道匹配结束的行号，您可以设置为匹配,`RS`的正则表达式，如前所述，但也添加匹配的可能性。通过维护另一个计数器变量，每次递增告诉您已匹配，您将获得行号。`c``d``\n``RT``\n`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:46:51.250

这是一个`sed`有趣的解决方案：

```
sed -rne ':r;$!{N;br};s/^[^c]*(.*d)[^d]*$/\1/;:a;h;s/[^cd]//g;' \
-e ':s;s/d(.*)c/c\1d/;ts;s/cd/c\nd/;T;y/c/d/;/^(d+)\n\1$/{g;i -------' \
-e 'p};g;s/d[^d]*d$/d/;ta' 
```

这将打印从最长到最短的所有令人满意的序列。**

# vba - 如何将所选项目保存在列表框中？

> ID：11156744
> 
> 赞同：1
> 
> 时间：2012-06-22T13:05:01.630
> 
> 标签：vba, listbox, ms-word, word-2003

我为 Word 表单编写了一个简单的列表框。我写了这个简单的代码：

```
Private Sub ListBox1_Click()
     Me.ListBox1.AddItem "ZZ"
     Me.ListBox1.AddItem "yy"
End Sub 
```

列表框工作，但我有一个问题：因为这个文件是一个表单，我需要编写什么代码来保存用户选择的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:29:47.913

`Me.ListBox1.Value`将返回在 ListBox 控件中选择的值。

# java - MySQL JDBC日期问题与不同时区的数据库服务器

> ID：11156745
> 
> 赞同：1
> 
> 时间：2012-06-22T13:05:11.567
> 
> 标签：java, mysql, jdbc, timezone

我在“欧洲/伦敦”时区有一个数据库服务器，在“欧洲/布鲁塞尔”有一个 Web 服务器。由于现在是夏季时间，我的应用程序服务器有 2 小时的差异。

我创建了一个测试来重现我的问题：

```
Query q = JPA.em().createNativeQuery("SELECT UNIX_TIMESTAMP(startDateTime) FROM  `Event`  WHERE  `id` =574");
BigInteger unix = (BigInteger) q.getSingleResult();
System.out.println(unix + "000 UNIX_TIMESTAMP to BigInteger");

Query q2 = JPA.em().createNativeQuery("SELECT startDateTime FROM  `Event`  WHERE  `id` =574");
Timestamp o = (Timestamp) q2.getSingleResult();
System.out.println(o.getTime() + " Timestamp"); 
```

startDateTime 列被定义为“日期时间”（但与“时间戳”相同的问题）我得到的输出是这样的：

```
1340291591000 UNIX_TIMESTAMP to BigInteger
1340284391000 Timestamp 
```

读取 java 日期对象会导致时区偏移，我该如何解决？我希望 jdbc 驱动程序仅在 Date 对象中设置它从服务器获取的“unix 时间”值。

（适当的解决方案应该适用于任何时区组合，不仅适用于 GMT 中的 db）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T14:08:47.393

您可以设置 MySQL Timestamp 列类型和：

```
<bean id="dataSource" class="com.jolbox.bonecp.BoneCPDataSource" destroy-method="close">
    <property name="driverClass" value="com.mysql.jdbc.Driver"/>
    <property name="jdbcUrl" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.user}"/>
    <property name="password" value="${jdbc.pass}"/>
    <property name="idleConnectionTestPeriodInMinutes" value="60"/>
    <property name="idleMaxAgeInMinutes" value="240"/>
    <property name="maxConnectionsPerPartition" value="30"/>
    <property name="minConnectionsPerPartition" value="10"/>
    <property name="partitionCount" value="3"/>
    <property name="acquireIncrement" value="5"/>
    <property name="statementsCacheSize" value="100"/>
    <property name="initSQL" value="SET time_zone='${database.timezone}'"/> 
```

这是我的bonecp dataSource -> 查看initSQL 这个查询是在每个mysql 连接的init 上执行的。如果您的网络服务器位于欧洲/布鲁塞尔，则将此时区设置为 ${database.timezone} 这对我有用。如果你的 mysql 有空的时区表，你需要从 Linux 语言环境中导入它，例如：

> mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:12:43.197

JDBC 驱动程序使用运行它的 JVM 中的时区设置。如果您在欧洲/布鲁塞尔运行您的应用程序，它假定该时区。如果您的数据库服务器在另一个时区运行，则使用 Java 进行的计算结果可能与使用 SQL 进行的计算结果不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T14:09:47.170

我能够使用连接字符串参数解决此问题

```
useJDBCCompliantTimezoneShift=true&useSSPSCompatibleTimezoneShift=true 
```

但我对此不是 100% 满意，因为当数据库不在 UTC/GMT 时区时，它会导致更多麻烦。

# c - 取消引用双指针并使用索引运算符

> ID：11156750
> 
> 赞同：1
> 
> 时间：2012-06-22T13:05:17.173
> 
> 标签：c, string, pointers

我将 char ** 类型的双指针传递给函数。在该函数内部，我需要取消引用指针，然后通过字符数组进行索引。

不幸的是，当我尝试将大写字母分配回数组时，我得到了一个核心转储。

我需要有关如何执行此操作的帮助。（这不是作业，只是个人项目。）

```
void buffer(char **ppline);

int main()
{
  char *line="The redcoats are coming!";

  buffer(&line); 
  printf("\nline = %s\n",line);

  return(0);
}

void buffer (char **ppline)
{

 int i=0;
 char a;

  for (i=0; i < strlen(*ppline); i++)
  {
    a = toupper( (*ppline)[i] );   /* THIS LINE CAUSES THE CORE DUMP  */
    ((*ppline)[i]) = a;
  }

  return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:12:07.110

字符串文字 in`""`是常量。你不能像你正在做的那样修改它，因为那是未定义的行为。试试这个，它分配存储并将字符串文字复制到其中：

```
void buffer(char **ppline);

int main()
{
  char line[] = "The redcoats are coming!";

  buffer(&line); 
  printf("\nline = %s\n",line);

  return(0);
}

void buffer (char **ppline)
{

 int i=0;
 char a;

  for (i=0; i < strlen(*ppline); i++)
  {
    a = toupper( (*ppline)[i] );   /* THIS LINE CAUSES THE CORE DUMP  */
    ((*ppline)[i]) = a;
  }

  return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:30:39.407

堆栈、堆、数据段（和 BSS）和文本段是进程内存的四个段。定义的所有局部变量都将在堆栈中。使用 malloc 和 calloc 动态分配的内存将在堆中。所有的全局变量和静态变量都在数据段中。文本段会有程序的汇编代码和一些常量。

在这 4 个段中，文本段是 READ ONLY 段，而在所有其他三个段中，都是用于 READ 和 WRITE。

`char []a="The redcoats are coming!";`- 此语句将在堆栈中分配 25 个字节的内存（因为局部变量），并将保留所有 24 个字符加上 NULL 字符（\0）在最后。

`char *p="The redcoats are coming!";`- 该语句将在堆栈中分配 4 个字节（如果是 32 位机器）的内存（因为这也是一个局部变量），它将保存常量字符串的指针，其值为“The redcoats are come！”。这个字节的常量字符串将在文本段中。这是一个常数值。指针变量 p 只是指向该字符串。

现在`a[0]`（索引可以是 0 到 24）意味着，它将访问堆栈中该字符串的第一个字符。所以我们也可以在这个位置写。`a[0] = 'x'`允许此操作是因为我们在堆栈中具有 READ WRITE 访问权限。

但是`p[0] = 'x'`会导致崩溃，因为我们对文本段只有 READ 访问权限。如果我们对文本段进行任何写入，就会发生分段错误。

但是你可以改变变量 p 的值，因为它在栈中的局部变量。像下面

```
char *p = "string";
printf("%s", p);
p = "start";
printf("%s", p); 
```

这是允许的。这里我们将存储在指针变量 p 中的地址更改为字符串 start 的地址（同样 start 也是文本段中的只读数据）。如果要修改 *p 中存在的值，则意味着使用动态分配的内存。

```
char *p = NULL;
p = malloc(sizeof(char)*7);
strcpy(p, "string"); 
```

现在`p[0] = 'x'`允许操作，因为现在我们在堆中写入。

# c# - “mklink /J”的 C# 等价物是什么？

> ID：11156754
> 
> 赞同：43
> 
> 时间：2012-06-22T13:05:24.860
> 
> 标签：c#, windows, batch-file, mklink

我知道如何在 .bat 脚本中的窗口中创建符号链接：

```
mklink /J <LinkPath> <OriginalResourcePath> 
```

如何在 C# 中做同样的事情？

我对谷歌搜索不满意，因为我是 C# 的初学者，我可能没有使用正确的术语。任何人都可以指出要使用的API吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-22T13:11:59.357

**警告**：问题不清楚，因为它指的是**符号链接**，但同时指的是用于创建联结的**/J开关。**这个答案是指“如何在 c# 中创建符号链接”（没有 /J）。相反，对于创建**联结**，请参阅[在 .NET 中，如何在 NTFS 中创建联结，而不是符号链接？](https://stackoverflow.com/questions/1400549/in-net-how-do-i-create-a-junction-in-ntfs-as-opposed-to-a-symlink).

这是创建符号链接的方式：

```
using System.Runtime.InteropServices;
using System.IO;

namespace ConsoleApplication
{
    class Program
    {
        [DllImport("kernel32.dll")]
        static extern bool CreateSymbolicLink(
        string lpSymlinkFileName, string lpTargetFileName, SymbolicLink dwFlags);

        enum SymbolicLink
        {
            File = 0,
            Directory = 1
        }

        static void Main(string[] args)
        {
            string symbolicLink = @"c:\bar.txt";
            string fileName = @"c:\temp\foo.txt";

            using (var writer = File.CreateText(fileName))
            {
                writer.WriteLine("Hello World");
            }

            CreateSymbolicLink(symbolicLink, fileName, SymbolicLink.File);
        }
    }
} 
```

这将在 C: 驱动器上创建一个名为 bar.txt 的符号链接文件，该文件链接到存储在 C:\temp 目录中的 foo.txt 文本文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-28T20:41:18.173

这是一个具有用于创建联结的 PInvoke 签名的项目：http: [//www.codeproject.com/Articles/15633/Manipulating-NTFS-Junction-Points-in-NET](http://www.codeproject.com/Articles/15633/Manipulating-NTFS-Junction-Points-in-NET)。代码复制如下：

```
using System;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;
using Microsoft.Win32.SafeHandles;

namespace Util {
    /// <summary>
    /// Provides access to NTFS junction points in .Net.
    /// </summary>
    public static class JunctionPoint {
        /// <summary>
        /// The file or directory is not a reparse point.
        /// </summary>
        private const int ERROR_NOT_A_REPARSE_POINT = 4390;

        /// <summary>
        /// The reparse point attribute cannot be set because it conflicts with an existing attribute.
        /// </summary>
        private const int ERROR_REPARSE_ATTRIBUTE_CONFLICT = 4391;

        /// <summary>
        /// The data present in the reparse point buffer is invalid.
        /// </summary>
        private const int ERROR_INVALID_REPARSE_DATA = 4392;

        /// <summary>
        /// The tag present in the reparse point buffer is invalid.
        /// </summary>
        private const int ERROR_REPARSE_TAG_INVALID = 4393;

        /// <summary>
        /// There is a mismatch between the tag specified in the request and the tag present in the reparse point.
        /// </summary>
        private const int ERROR_REPARSE_TAG_MISMATCH = 4394;

        /// <summary>
        /// Command to set the reparse point data block.
        /// </summary>
        private const int FSCTL_SET_REPARSE_POINT = 0x000900A4;

        /// <summary>
        /// Command to get the reparse point data block.
        /// </summary>
        private const int FSCTL_GET_REPARSE_POINT = 0x000900A8;

        /// <summary>
        /// Command to delete the reparse point data base.
        /// </summary>
        private const int FSCTL_DELETE_REPARSE_POINT = 0x000900AC;

        /// <summary>
        /// Reparse point tag used to identify mount points and junction points.
        /// </summary>
        private const uint IO_REPARSE_TAG_MOUNT_POINT = 0xA0000003;

        /// <summary>
        /// This prefix indicates to NTFS that the path is to be treated as a non-interpreted
        /// path in the virtual file system.
        /// </summary>
        private const string NonInterpretedPathPrefix = @"\??\";

        [Flags]
        private enum EFileAccess : uint {
            GenericRead = 0x80000000,
            GenericWrite = 0x40000000,
            GenericExecute = 0x20000000,
            GenericAll = 0x10000000,
        }

        [Flags]
        private enum EFileShare : uint {
            None = 0x00000000,
            Read = 0x00000001,
            Write = 0x00000002,
            Delete = 0x00000004,
        }

        private enum ECreationDisposition : uint {
            New = 1,
            CreateAlways = 2,
            OpenExisting = 3,
            OpenAlways = 4,
            TruncateExisting = 5,
        }

        [Flags]
        private enum EFileAttributes : uint {
            Readonly = 0x00000001,
            Hidden = 0x00000002,
            System = 0x00000004,
            Directory = 0x00000010,
            Archive = 0x00000020,
            Device = 0x00000040,
            Normal = 0x00000080,
            Temporary = 0x00000100,
            SparseFile = 0x00000200,
            ReparsePoint = 0x00000400,
            Compressed = 0x00000800,
            Offline = 0x00001000,
            NotContentIndexed = 0x00002000,
            Encrypted = 0x00004000,
            Write_Through = 0x80000000,
            Overlapped = 0x40000000,
            NoBuffering = 0x20000000,
            RandomAccess = 0x10000000,
            SequentialScan = 0x08000000,
            DeleteOnClose = 0x04000000,
            BackupSemantics = 0x02000000,
            PosixSemantics = 0x01000000,
            OpenReparsePoint = 0x00200000,
            OpenNoRecall = 0x00100000,
            FirstPipeInstance = 0x00080000
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct REPARSE_DATA_BUFFER {
            /// <summary>
            /// Reparse point tag. Must be a Microsoft reparse point tag.
            /// </summary>
            public uint ReparseTag;

            /// <summary>
            /// Size, in bytes, of the data after the Reserved member. This can be calculated by:
            /// (4 * sizeof(ushort)) + SubstituteNameLength + PrintNameLength + 
            /// (namesAreNullTerminated ? 2 * sizeof(char) : 0);
            /// </summary>
            public ushort ReparseDataLength;

            /// <summary>
            /// Reserved; do not use. 
            /// </summary>
            public ushort Reserved;

            /// <summary>
            /// Offset, in bytes, of the substitute name string in the PathBuffer array.
            /// </summary>
            public ushort SubstituteNameOffset;

            /// <summary>
            /// Length, in bytes, of the substitute name string. If this string is null-terminated,
            /// SubstituteNameLength does not include space for the null character.
            /// </summary>
            public ushort SubstituteNameLength;

            /// <summary>
            /// Offset, in bytes, of the print name string in the PathBuffer array.
            /// </summary>
            public ushort PrintNameOffset;

            /// <summary>
            /// Length, in bytes, of the print name string. If this string is null-terminated,
            /// PrintNameLength does not include space for the null character. 
            /// </summary>
            public ushort PrintNameLength;

            /// <summary>
            /// A buffer containing the unicode-encoded path string. The path string contains
            /// the substitute name string and print name string.
            /// </summary>
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 0x3FF0)]
            public byte[] PathBuffer;
        }

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern bool DeviceIoControl(IntPtr hDevice, uint dwIoControlCode,
            IntPtr InBuffer, int nInBufferSize,
            IntPtr OutBuffer, int nOutBufferSize,
            out int pBytesReturned, IntPtr lpOverlapped);

        [DllImport("kernel32.dll", SetLastError = true)]
        private static extern IntPtr CreateFile(
            string lpFileName,
            EFileAccess dwDesiredAccess,
            EFileShare dwShareMode,
            IntPtr lpSecurityAttributes,
            ECreationDisposition dwCreationDisposition,
            EFileAttributes dwFlagsAndAttributes,
            IntPtr hTemplateFile);

        /// <summary>
        /// Creates a junction point from the specified directory to the specified target directory.
        /// </summary>
        /// <remarks>
        /// Only works on NTFS.
        /// </remarks>
        /// <param name="targetDir">The target directory to create</param>
        /// <param name="sourceDir">The source directory to alias</param>
        /// <param name="overwrite">If true overwrites an existing reparse point or empty directory</param>
        /// <exception cref="IOException">Thrown when the junction point could not be created or when
        /// an existing directory was found and <paramref name="overwrite" /> if false</exception>
        public static void Create(string sourceDir, string targetDir, bool overwrite) {
            sourceDir = Path.GetFullPath(sourceDir);

            if (!Directory.Exists(sourceDir))
                throw new IOException($"Source path does not exist or is not a directory.");

            if (Directory.Exists(targetDir))
                throw new IOException($"Directory '{targetDir}' already exists.");

            Directory.CreateDirectory(targetDir);

            using (SafeFileHandle handle = OpenReparsePoint(targetDir, EFileAccess.GenericWrite)) {
                byte[] sourceDirBytes = Encoding.Unicode.GetBytes(NonInterpretedPathPrefix + Path.GetFullPath(sourceDir));

                REPARSE_DATA_BUFFER reparseDataBuffer = new REPARSE_DATA_BUFFER();

                reparseDataBuffer.ReparseTag = IO_REPARSE_TAG_MOUNT_POINT;
                reparseDataBuffer.ReparseDataLength = (ushort)(sourceDirBytes.Length + 12);
                reparseDataBuffer.SubstituteNameOffset = 0;
                reparseDataBuffer.SubstituteNameLength = (ushort)sourceDirBytes.Length;
                reparseDataBuffer.PrintNameOffset = (ushort)(sourceDirBytes.Length + 2);
                reparseDataBuffer.PrintNameLength = 0;
                reparseDataBuffer.PathBuffer = new byte[0x3ff0];
                Array.Copy(sourceDirBytes, reparseDataBuffer.PathBuffer, sourceDirBytes.Length);

                int inBufferSize = Marshal.SizeOf(reparseDataBuffer);
                IntPtr inBuffer = Marshal.AllocHGlobal(inBufferSize);

                try {
                    Marshal.StructureToPtr(reparseDataBuffer, inBuffer, false);

                    int bytesReturned;
                    bool result = DeviceIoControl(handle.DangerousGetHandle(), FSCTL_SET_REPARSE_POINT,
                        inBuffer, sourceDirBytes.Length + 20, IntPtr.Zero, 0, out bytesReturned, IntPtr.Zero);

                    if (!result)
                        ThrowLastWin32Error($"Unable to create junction point '{sourceDir}' -> '{targetDir}'.");
                } finally {
                    Marshal.FreeHGlobal(inBuffer);
                }
            }
        }

        /// <summary>
        /// Deletes a junction point at the specified source directory along with the directory itself.
        /// Does nothing if the junction point does not exist.
        /// </summary>
        /// <remarks>
        /// Only works on NTFS.
        /// </remarks>
        /// <param name="junctionPoint">The junction point path</param>
        public static void Delete(string junctionPoint) {
            if (!Directory.Exists(junctionPoint)) {
                if (File.Exists(junctionPoint))
                    throw new IOException("Path is not a junction point.");

                return;
            }

            using (SafeFileHandle handle = OpenReparsePoint(junctionPoint, EFileAccess.GenericWrite)) {
                REPARSE_DATA_BUFFER reparseDataBuffer = new REPARSE_DATA_BUFFER();

                reparseDataBuffer.ReparseTag = IO_REPARSE_TAG_MOUNT_POINT;
                reparseDataBuffer.ReparseDataLength = 0;
                reparseDataBuffer.PathBuffer = new byte[0x3ff0];

                int inBufferSize = Marshal.SizeOf(reparseDataBuffer);
                IntPtr inBuffer = Marshal.AllocHGlobal(inBufferSize);
                try {
                    Marshal.StructureToPtr(reparseDataBuffer, inBuffer, false);

                    int bytesReturned;
                    bool result = DeviceIoControl(handle.DangerousGetHandle(), FSCTL_DELETE_REPARSE_POINT,
                        inBuffer, 8, IntPtr.Zero, 0, out bytesReturned, IntPtr.Zero);

                    if (!result)
                        ThrowLastWin32Error("Unable to delete junction point.");
                } finally {
                    Marshal.FreeHGlobal(inBuffer);
                }

                try {
                    Directory.Delete(junctionPoint);
                } catch (IOException ex) {
                    throw new IOException("Unable to delete junction point.", ex);
                }
            }
        }

        /// <summary>
        /// Determines whether the specified path exists and refers to a junction point.
        /// </summary>
        /// <param name="path">The junction point path</param>
        /// <returns>True if the specified path represents a junction point</returns>
        /// <exception cref="IOException">Thrown if the specified path is invalid
        /// or some other error occurs</exception>
        public static bool Exists(string path) {
            if (!Directory.Exists(path))
                return false;

            using (SafeFileHandle handle = OpenReparsePoint(path, EFileAccess.GenericRead)) {
                string target = InternalGetTarget(handle);
                return target != null;
            }
        }

        /// <summary>
        /// Gets the target of the specified junction point.
        /// </summary>
        /// <remarks>
        /// Only works on NTFS.
        /// </remarks>
        /// <param name="junctionPoint">The junction point path</param>
        /// <returns>The target of the junction point</returns>
        /// <exception cref="IOException">Thrown when the specified path does not
        /// exist, is invalid, is not a junction point, or some other error occurs</exception>
        public static string GetTarget(string junctionPoint) {
            using (SafeFileHandle handle = OpenReparsePoint(junctionPoint, EFileAccess.GenericRead)) {
                string target = InternalGetTarget(handle);
                if (target == null)
                    throw new IOException("Path is not a junction point.");

                return target;
            }
        }

        private static string InternalGetTarget(SafeFileHandle handle) {
            int outBufferSize = Marshal.SizeOf(typeof(REPARSE_DATA_BUFFER));
            IntPtr outBuffer = Marshal.AllocHGlobal(outBufferSize);

            try {
                int bytesReturned;
                bool result = DeviceIoControl(handle.DangerousGetHandle(), FSCTL_GET_REPARSE_POINT,
                    IntPtr.Zero, 0, outBuffer, outBufferSize, out bytesReturned, IntPtr.Zero);

                if (!result) {
                    int error = Marshal.GetLastWin32Error();
                    if (error == ERROR_NOT_A_REPARSE_POINT)
                        return null;

                    ThrowLastWin32Error("Unable to get information about junction point.");
                }

                REPARSE_DATA_BUFFER reparseDataBuffer = (REPARSE_DATA_BUFFER)
                    Marshal.PtrToStructure(outBuffer, typeof(REPARSE_DATA_BUFFER));

                if (reparseDataBuffer.ReparseTag != IO_REPARSE_TAG_MOUNT_POINT)
                    return null;

                string targetDir = Encoding.Unicode.GetString(reparseDataBuffer.PathBuffer,
                    reparseDataBuffer.SubstituteNameOffset, reparseDataBuffer.SubstituteNameLength);

                if (targetDir.StartsWith(NonInterpretedPathPrefix))
                    targetDir = targetDir.Substring(NonInterpretedPathPrefix.Length);

                return targetDir;
            } finally {
                Marshal.FreeHGlobal(outBuffer);
            }
        }

        private static SafeFileHandle OpenReparsePoint(string reparsePoint, EFileAccess accessMode) {
            SafeFileHandle reparsePointHandle = new SafeFileHandle(CreateFile(reparsePoint, accessMode,
                EFileShare.Read | EFileShare.Write | EFileShare.Delete,
                IntPtr.Zero, ECreationDisposition.OpenExisting,
                EFileAttributes.BackupSemantics | EFileAttributes.OpenReparsePoint, IntPtr.Zero), true);

            if (Marshal.GetLastWin32Error() != 0)
                ThrowLastWin32Error("Unable to open reparse point.");

            return reparsePointHandle;
        }

        private static void ThrowLastWin32Error(string message) {
            throw new IOException(message, Marshal.GetExceptionForHR(Marshal.GetHRForLastWin32Error()));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-06T03:51:20.847

使用 mklink 的另一种方式。原来 mklink 是一个内部命令，所以你需要 cmd.exe 来调用它：

```
var psi=new ProcessStartInfo("cmd.exe"," /C mklink \""+link_name+"\" \""+ target_name + "\"");
psi.CreateNoWindow = true;
psi.UseShellExecute = false;
Process.Start(psi).WaitForExit(); 
```

您可以根据需要添加 /J 或 /d 等。

ref:[运行命令提示符命令](https://stackoverflow.com/questions/1469764/run-command-prompt-commands)

# java - 如何将来自外部服务调用的响应与骆驼中的原始消息合并

> ID：11156758
> 
> 赞同：1
> 
> 时间：2012-06-22T13:05:26.247
> 
> 标签：java, apache-camel, apache-servicemix

从逻辑的角度来看，这是我希望实现的路由行为：

![路由信息的逻辑视图](../Images/59354c6045a9a080b11ef4bc4eee9873.png)

我希望能够将外部服务的响应与原始请求合并。

我已经能够使用多播、聚合器和模拟端点来实现这一点，但我想知道是否有更清洁的方法。我当前的实现如下所示：

```
 <multicast strategyRef="serviceAggregator" stopOnException="false">
            <to uri="mock:foo" />
            <to uri="http://0.0.0.0:9999/service/?throwExceptionOnFailure=false" />
        </multicast>
        <camel:to uri="log:uk.co.company.aggregated?showAll=true" />
        <to uri="http://0.0.0.0:9999/anotherService/ 
```

我特别不喜欢的部分是使用模拟端点，但我也不认为这是表达上图的一种非常易读的方式。所以我想知道是否有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:56:29.460

我建议阅读 EIP 模式，例如内容丰富器 [http://camel.apache.org/content-enricher.html](http://camel.apache.org/content-enricher.html)

您可以在其中将回复消息与请求消息合并。

Mind the Content Enricher 有 2 种模式 - 丰富 - pollEnrich

请务必注意上面链接中的文档中的差异。

```
<route>
  <from uri="...">
  <enrich uri="http://0.0.0.0:9999/service/?throwExceptionOnFailure=false" strategyRef="serviceAggregator"/>
  <to uri="log:uk.co.company.aggregated?showAll=true" />
  <to uri="http://0.0.0.0:9999/anotherService/>
  ...
</route> 
```

是的，您的图表显示了拆分器，但示例代码使用了多播 EIP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:49:46.387

您可以简单地将原始消息存储在标头或属性中，然后在 bean 中进行一些合并。使用标题和当前正文。

.setHeader("orig", body()) .to("externalService") .bean(new MyMergeBean())

# python - 在Tkinter python中相对于父窗口放置子窗口

> ID：11156766
> 
> 赞同：7
> 
> 时间：2012-06-22T13:05:42.863
> 
> 标签：python, window, tkinter, coordinates

我有一个包含按钮的父小部件。当按下按钮时，我想直接在与左侧对齐的父小部件下方打开一个无边框（即没有 Windows 装饰按钮）窗口。我很困惑，设置窗口位置的唯一方法（似乎）是使用`.geometry()`，但更糟糕的是，我似乎无法获得父小部件的绝对坐标 - 我需要它`.geometry()`，只有来自父小部件的偏移量父母。到目前为止，我的代码是：

```
# This is the child which appears when the button is pressed.
class ChildPopUpWindow(Frame):
    def __init__(self, parentWgdt):
        win = Toplevel(parentWgdt)
        geom = str(parentWgdt.winfo_x()) + '+' + str(parentWgdt.winfo_y() + parentWgdt.winfo_height())
        win.overrideredirect(1) # No win decoration.
        win.bd = 10
        win.relief = GROOVE
        win.geometry( geom )
        Frame.__init__(self, win)
        # etc. etc.

     # ... and this is the handler for the button being pressed.
     def onDropDown(self):
        popUp = ChildPopUpWindow(self) 
```

这确实会弹出一个窗口，但相对于桌面，而不是相对于父小部件。据我所知，它似乎也没有考虑边界厚度和浮雕。任何人都可以提供一种可以做到这一点的方法吗？是`.geometry()`要走的路还是有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T18:57:28.027

简短的回答是，使用`winfo_rootx`和`winfo_rooty`获取相对于屏幕的坐标。是的，这`wm_geometry`是精确放置顶层窗口的方法。

例如：

```
 x = parentWgdt.winfo_rootx()
    y = parentWgdt.winfo_rooty()
    height = parentWgdt.winfo_height()
    geom = "+%d+%d" % (x,y+height) 
```

作为一个友好的建议，我建议不要使用 abbrev var nms。它使代码难以阅读，尤其是当缩写错误时（Wgdt 至少应该是 Wdgt）。`geom`和`geometry`和`Wgdt`和之间的代码大小差异`Widget`很小，但可读性差异很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-23T21:25:12.530

为了使模态窗口围绕其父窗口居中，我这样做：

```
 alto_modal = 100
    ancho_modal = 250
    alto_parent = parent.winfo_height()
    ancho_parent = parent.winfo_width()
    x = (ancho_parent - ancho_modal) // 2
    y = (alto_parent - alto_modal) // 2
    self.geometry('{}x{}+{}+{}'.format(ancho_modal, alto_modal, x, y)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T01:20:19.753

根据 Tk 手册“ [https://www.tcl.tk/man/tcl8.4/TkCmd/winfo.htm#M52](https://www.tcl.tk/man/tcl8.4/TkCmd/winfo.htm#M52) ” **如果您在创建小部件后立即需要真实宽度，请调用更新**以强制几何管理器安排它，或使用 winfo reqwidth 来获取窗口的请求宽度而不是其实际宽度。

```
# This code works perfectly
self.update()

self.geometry("+%d+%d" % (self.parent.winfo_rootx()+50,
                          self.parent.winfo_rooty()+50
                         )
             ) 
```

# java - 如何在矩阵中找到 A 到任何 B 的最近路径？

> ID：11156767
> 
> 赞同：0
> 
> 时间：2012-06-22T13:05:44.833
> 
> 标签：java, path, shortest

例如：

`m_array = new int[6][6];
m_array[0] = new int[]{2, 0, 0, 0, 0, 0};
m_array[1] = new int[]{0, 2, 0, 0, 0, 2};
m_array[2] = new int[]{2, 0, 0, 1, 0, 0};
m_array[3] = new int[]{0, 0, 0, 0, 0, 0};
m_array[4] = new int[]{0, 2, 0, 0, 2, 0};
m_array[5] = new int[]{0, 0, 2, 0, 0, 0};` 

我怎样才能找到最接近的 2 到 1？

我想要一个函数，它返回一个数组路径，包括数组点。例如，我将“m_array”给我的函数，它会返回给我最近的 2 换 1，一个数组路径，如 [2,3][3,4][4,4]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:30:17.550

这些是您让我们猜测的事情：

*   只有一个 1，但有很多个 2；
*   路径允许对角台阶；
*   您正在寻找连接 1 和某些 2 的所有路径中最短的路径。

我目前的想法是，可以为任意两点之间的路径长度定义一个度量标准，因此“a 2 with the shortest path to 1”的概念等同于“the 2最接近1”的概念。度量标准可以定义为中心 1 周围的“环”数，必须经过才能达到 2：

```
0 0 0
0 1 0
0 0 2  --> the 2 is in the first ring

0 0 0 0 0
0 0 0 0 0
0 0 1 0 0
0 0 0 0 0
0 2 0 0 0 --> the 2 is in the second ring. 
```

如果我所有的假设都是正确的，那么你需要一个函数来给出第一个环、第二个环等的所有成员，以及另一个在环中搜索 2 的函数。最后，你需要一个算法2.我希望你意识到路径不是唯一的。一个简单的算法将沿对角线移动直到与 2 对齐（水平或垂直），然后继续非对角线到目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:20:59.147

不确定您的意思，因为您似乎在问两个不同的事情。在路径方面我真的无能为力，因为您没有指定太多关于我们如何移动的标准。您似乎也在问如何找到最接近的 2 到 1。虽然不是最有效的，但您可以简单地遍历矩阵并使用 Pythagoras' 根据索引计算出每个 2 到 1 的距离。或者，您可以从 1 开始，向外以正方形遍历矩阵。这可能会更快，因为您将在找到 2 的第二个停止，而不是必须使用第一个解决方案遍历整个矩阵检查 2，尽管第一个解决方案更容易实现并且不应该有那么大的区别你的矩阵很小（我相信两者都是 O(n)，

我希望这是有道理的。

澄清后编辑：这是一种我希望满足您要求的方法。首先是一个类来总结点以便于访问。

```
public class Point {
    private int x, y;
    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() { return x; }
    public int getY() { return y; }
    public int setX(int x) { this.x = x; }
    public int setY(int y) { this.y = y; }

} 
```

现在方法本身：

```
public ArrayList<Point> getPath(int[][] matrix) {
    Point closestTwo = getClosestTwo(matrix); // Implement this as you wish
    Point onePosition = getOnePosition(matrix);

    ArrayList<Point> pointList = new ArrayList<Point>();

    Point currentlyOn = onePosition;

    while (currentlyOn.getX() != closestTwo.getX() && currentlyOn.getY() != closestTwo.getY()) {
        currentlyOn = oneStep(currentlyOn, closestTwo);
        pointList.add(currentlyOn);
    }

    return pointList;
} 
```

这是一个可以用来靠近的 oneStep 方法的示例。它会返回一个点，该点会在您只执行一步的同时使您获得最大的进步（对角线优先）。

```
public Point oneStep(Point from, Point goal) {
    int x = from.getX() - goal.getX();
    int y = from.getY() - goal.getY();
    Point nextStep = new Point (from.getX(), from.getY());

    if (x > 0) {
        nextStep.setX(nextStep.getX() + 1)
    } else if (x < 0) {
        nextStep.setX(nextStep.getX() - 1)
    }

    if (y > 0) {
        nextStep.setY(nextStep.getY() + 1)
    } else if (y < 0) {
        nextStep.setY(nextStep.getY() - 1)
    }

    return nextStep;
} 
```

我相信这应该可以正常工作。如果你使用它，你应该得到一个 Point 的 ArrayList。getClosestTwo 方法的一个例子可能是这样的（使用毕达哥拉斯的）。记得导入 java.lang.Math；

```
public Point getClosestTwo(int[][] matrix) { // Assumes matrix is initialized, non-empty etc.
    int x, y;
    double smallestDistance = matrix.size() * matrix[0].size(); // bigger than possible
    Point onePosition = getOnePosition(matrix);

    for (int i = 0; i < matrix.size(); i++) {
        for (int j = 0; j < matrix[0].size(); j++) {
            double tmp = (double)(Math.abs(i - y) + Math.abs(j - x))
            double distance = Math.sqrt(tmp);
            if (distance < smallestDistance) {
                y = i;
                x = j;
                smallestDistance = distance;
            }
        }
    }

    return new Point(x, y);
} 
```

getOnePosition(int[][] matrix) 可以像这样简单地实现：

```
// Return null if no 1 in matrix
public Point getOnePosition(int[][] matrix) {
    for (int i = 0; i < matrix.size(); i++) {
        for (int j = 0; j < matrix[0].size(); j++) {
            if (matrix[i][j] == 1) {
                return new Point(j, i);
            }
        }
    }
    return null;
} 
```

希望这有帮助。请记住检查空值，编写安全代码等。您可能可以将它们放在一起。我希望此代码没有任何您无法修复的拼写错误或错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T06:50:09.707

此函数将我的矩阵数组拼接为环半径。

```
public static int[][] SpliceMatrix(int orginX, int orginY, int ringRadius, int[][] map){

    int[][] tempMap = new int[ringRadius * 2 + 1][ringRadius * 2 + 1];

    int tempY = -ringRadius;
    for(int i = 0; i < (ringRadius * 2 + 1); i++){
        int tempX = -ringRadius;

        for(int j = 0; j < (ringRadius * 2 + 1); j++){
            try{
                tempMap[i][j] = map[orginY + tempY][orginX + tempX];
            }catch(ArrayIndexOutOfBoundsException e){
                tempMap[i][j] = 1;
            }

            tempX++;
        }

        tempY++;
    }

    return tempMap;
} 
```

我在这个函数中使用了 A* 算法：

```
private static Point findNext2(int orginX, int orginY, int[][] map){

    //Find "2"s
    ArrayList<Point> ends = new ArrayList<Point>();

    for(int i = 0; i < map.length; i++){
        for(int j = 0; j < map[0].length; j++){
            if(map[i][j] == 2){
                ends.add(new Point(j, i));

                map[i][j] = 0;//Clear for A*
            }
        }
    }

    //Find the closest
    if(ends.size() > 0){
        Point p = null;
        int distance = 100;

        for(int i = 0; i < ends.size(); i++){
            int tempDistance = APlus.go(orginX, orginY, ends.get(i).x, ends.get(i).y, map).size();
            System.out.println(tempDistance);
            if(tempDistance != 0 && tempDistance < distance){
                distance = tempDistance;
                p = new Point(ends.get(i).x, ends.get(i).y);
            }

        }

        if(p == null){
            System.out.println("2 is not accesible");

            return null;
        }

        return p;

    }else{
        System.out.println("There is no 2 in ring");

        return null;
    }

} 
```

然后我用

```
public static void main(String args[]){

    int[][] m_array = new int[6][6];
    m_array[0] = new int[]{1, 1, 0, 0, 2, 0};
    m_array[1] = new int[]{0, 0, 0, 0, 0, 1};
    m_array[2] = new int[]{1, 1, 1, 0, 1, 0};
    m_array[3] = new int[]{1, 0, 1, 0, 1, 0};
    m_array[4] = new int[]{0, 0, 0, 0, 1, 0};
    m_array[5] = new int[]{0, 0, 0, 0, 0, 0};

    int[][] c = SpliceMatrix(2, 2, 2, m_array);//int x, int y, ringRadius, matrix

    Point p = findNext2(3, 3, c);//orginX, orginY, matrix
    System.out.println(p + " is the closest 2");
 } 
```

我希望那是描述性的。我还不能正确使用 HTML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T07:13:39.733

我更喜欢快速图来找到更近的点或路径；所以，请看这个链接： http: [//www.codeproject.com/Articles/5603/QuickGraph-A-100-C-graph-library-with-Graphviz-Sup](http://www.codeproject.com/Articles/5603/QuickGraph-A-100-C-graph-library-with-Graphviz-Sup)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-27T19:40:24.997

这是我的一段代码。似乎比我在这里看到的任何东西都简单，所以决定发布：

```
public static boolean isWithinRadius(int[] position, int[] centerPosition, int radius) {

        int xCenterPoint = centerPosition[0];
        int yCenterPoint = centerPosition[1];
        int zCenterPoint = centerPosition[2];

        int xPoint = position[0];
        int yPoint = position[1];
        int zPoint = position[2];

        boolean xMatch = (xPoint - radius <= xCenterPoint) && (xPoint >= xCenterPoint - radius);
        boolean yMatch = (yPoint - radius <= yCenterPoint) && (yPoint >= yCenterPoint - radius);
        boolean zMatch = (zPoint - radius <= zCenterPoint) && (zPoint >= zCenterPoint - radius);

        return xMatch && yMatch && zMatch;

    } // public boolean isWithinRadius (int[], int) 
```

如果位置在 centerPosition 的半径内，这将返回 true。

1.  centerPosition 是环的中心。（如果您不需要 Z 值，只需将 0 放在要求的任何位置。）
2.  半径 1 == 环 1 ，半径 2 == 环 1 和环 2 等。您可以扫描半径。尝试以此为基础。如果您有兴趣，我编写了一个高级矩阵类，您可以扫描（基于散列）并在其中查找对象。我正要编写代码来返回在半径内找到的对象的 ArrayList。

如果您希望仅在特定环内查找对象（而不是半径内的所有对象），请使用以下代码：

```
public static boolean isWithinRadiusRing(int[] position, int[] centerPosition, int radius) {

        int xCenterPoint = centerPosition[0];
        int yCenterPoint = centerPosition[1];
        int zCenterPoint = centerPosition[2];

        int xPoint = position[0];
        int yPoint = position[1];
        int zPoint = position[2];

        boolean xRingMatch = (xPoint - radius == xCenterPoint) || (xPoint == xCenterPoint - radius);
        boolean yRingMatch = (yPoint - radius == yCenterPoint) || (yPoint == yCenterPoint - radius);
        boolean zRingMatch = (zPoint - radius == zCenterPoint) || (zPoint == zCenterPoint - radius);

        boolean xRadiusMatch = (xPoint - radius <= xCenterPoint) && (xPoint >= xCenterPoint - radius);
        boolean yRadiusMatch = (yPoint - radius <= yCenterPoint) && (yPoint >= yCenterPoint - radius);
        boolean zRadiusMatch = (zPoint - radius <= zCenterPoint) && (zPoint >= zCenterPoint - radius);

        boolean xMatch = xRingMatch && yRadiusMatch && zRadiusMatch;
        boolean yMatch = yRingMatch && xRadiusMatch && zRadiusMatch;
        boolean zMatch = zRingMatch && xRadiusMatch && yRadiusMatch;

        /*
            System.out.println("xRingMatch="+xRingMatch+" yRingMatch="+yRingMatch+" zRingMatch="+zRingMatch);
            System.out.println("xRadiusMatch="+xRadiusMatch+" yRadiusMatch="+yRadiusMatch+" zRadiusMatch="+zRadiusMatch);
            System.out.println("xMatch="+xMatch+" yMatch="+yMatch+" zMatch=" +zMatch);
            System.out.println("return=" + (xMatch || yMatch || zMatch));
        */

        return xMatch || yMatch || zMatch;

    } // public boolean isWithinRadiusRing(int[], int[] , int) 
```

`true`如果给定位置在 centerPosition 的给定半径环内（半径 1 == ring1，半径 2 == ring 2 等），这将返回

要找出两个位置之间的半径距离：

```
 public static int getDistanceRadius(int[] startPosition, int[] endPosition) {

            // The xyz value that streches the most the distance between two positions
            // is the radius value.
            int xDistance = Math.abs(startPosition[0] - endPosition[0]);
            int yDistance = Math.abs(startPosition[1] - endPosition[1]);
            int zDistance = Math.abs(startPosition[2] - endPosition[2]);

            int radius = (xDistance > yDistance ? xDistance : yDistance);        
            radius = (radius > zDistance ? radius : zDistance);

            return radius;

        } // public static int getDistanceRadius(int[], int[]) 
```

# android - 如何在 Android 的模型对象中实现搜索功能？

> ID：11156770
> 
> 赞同：0
> 
> 时间：2012-06-22T13:05:48.770
> 
> 标签：android, search, xml-parsing, datamodel

我正在开发 Android 应用程序。

现在我需要在对象数据模型中搜索输入的字符串字符。

这里我使用来自 webservice Xml 的数据创建对象数据模型。我正在解析 xml 数据并使用 setter 和 getter 为 xml 中的每个元素创建类变量。

现在我的意图是从创建的数据类对象内的搜索字段中搜索输入的字符串。

任何人都可以分享有关此功能的知识。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:14:16.163

通过以下方式，您可以检查您的搜索字符串是否包含在对象中的字符串值内：

```
searchString.contains(obj.getMyItem())  
// where getMyItem() is the getter method of custom class object 
```

# javascript - 改变 a 的颜色 点击时

> ID：11156773
> 
> 赞同：-2
> 
> 时间：2012-06-22T13:06:04.687
> 
> 标签：javascript

非常感谢你们！我现在可以用了，谢谢！

我有一个希望简单的问题：这个：http: [//jsfiddle.net/gSAjV/2/](http://jsfiddle.net/gSAjV/2/) 是我想要实现的，但我似乎无法让它工作。我是 javascript 的新手，所以我不确定如何正确地将脚本放入 html 文档中。我已经尝试过`<script type="text/javascript">`和其他人，但它只是不起作用。

所以我想知道是否有人会花时间把它放在一个 html 文档中并让它工作，当然还有发布整个代码。我会很高兴的！

我的医生：

```
<html>
<head>

<style>
.parentDiv{
 border:1px solid black;
 padding:10px;
 width: 80px;
  margin:5px;  
    display:relative;
}

.childDiv{
  border:1px solid blue;
 height: 50px;   
    margin:10px;
}
</style>

<script type='text/javascript'>
$('.childDiv').click(function(){
    $(this)
        .css('background-color','#00ff66')
        .siblings()
        .css('background-color','#ffffff');
});
</script>

</head>
<body>

<div id="divParent1" class="parentDiv">
    Group 1
    <div id="child1" class="childDiv">
        Child 1
    </div>
    <div id="child2" class="childDiv">
        Child 2
    </div>
</div>
<div id="divParent2" class="parentDiv">
    Group 2
    <div id="child1" class="childDiv">
        Child 1
    </div>
    <div id="child2" class="childDiv">
        Child 2
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:12:02.577

把它放在你的 html 文件中的某个地方：

```
<script type="text/javascript">                                         
    $(document).ready(function() {
        $('.childDiv').click(function(){
            $(this).parent().find('.childDiv').css('background-color','#ffffff');
            $(this).css('background-color','#ff0000');
        });
   });
</script> 
```

你可以或多或少地把它放在任何地方，但在`</body>`标签之前是个好地方。

正如@MarkK 正确指出的那样，您需要引用jQuery 库本身。

这介于`<head>`和之间`</head>`：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:14:58.843

在 jsfiddle 中，您可以右键单击结果窗格并查看源代码。这将为您提供产生结果的确切 html。

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.4.4.min.js'></script>

  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

  <style type='text/css'>
    .parentDiv{
 border:1px solid black;
 padding:10px;
 width: 80px; 
  margin:5px;  
    display:relative;
}

.childDiv{
  border:1px solid blue;
 height: 50px;   
    margin:10px;
}
  </style>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$('.childDiv').click(function(){
    $(this).parent().find('.childDiv').css('background-color','#ffffff');
    $(this).css('background-color','#ff0000');
});

});//]]>  

</script>

</head>
<body>
  <div id="divParent1" class="parentDiv">
    Group 1
    <div id="child1" class="childDiv">
        Child 1
    </div>
    <div id="child2" class="childDiv">
        Child 2
    </div>
</div>
<div id="divParent2" class="parentDiv">
    Group 2
    <div id="child1" class="childDiv">
        Child 1
    </div>
    <div id="child2" class="childDiv">
        Child 2
    </div>
</div>

</body>

</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:17:35.370

您只需要导入 jQuery（包含`$`函数的库）。这很简单，只需添加

```
<script src="http.//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

到您的 HTML，在您的其他脚本之前。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T13:18:25.503

```
<html>
  <head>
     <!--inclue jquery - change the path 'src'. the default is jquery.js is on the same location of this html-->
     <script type="text/javascript" src="jquery.js"></script>
     <sript type="text/javascript">
       jQuery().ready(function($){

          $('.childDiv').click(function(){
             $(this).parent().find('.childDiv').css('background-color','#ffffff');
             $(this).css('background-color','#ff0000');
           });

       });
     </script>
   </head>
   <body>
      <!--the content paste your html here-->
   </body>
</html> 
```

# java - 为椭圆曲线密码生成椭圆曲线的基点 ( G )

> ID：11156779
> 
> 赞同：3
> 
> 时间：2012-06-22T13:06:22.680
> 
> 标签：java, cryptography, elliptic-curve

如何在 Java 中为椭圆曲线生成基点或生成器？

我正在开发一个 Java 包，可以用来实现一些椭圆曲线密码算法，我想使用我自己的曲线。但是，我被困在必须为曲线获取生成器基点的地方，这样我才能拥有一组域参数。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:45:17.033

`u`给定“近素数”阶=的椭圆曲线`k` `r`，您应该：

1.  生成随机点`P`
2.  设置`G`=`k` `P`
3.  如果`G`= 0 转到 1
4.  验证`r` `G`不为 0（如果为 0，则曲线无序`k` `r`）。
5.  否则 G 是一个程序问题`r`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:18:18.223

这对于 java、C 或其他任何东西都是一样的......

首先让我假设您自己创建了一个具有素数组顺序 q 的 ECC 域，并希望将其用于加密。然后选择一个随机的x坐标，然后根据weierstrass形式的椭圆曲线方程计算y^2。希望您选择了一个素数模 p，它是 3 mod 4。在这种情况下，确定平方根 mod p 如果存在，那么它是微不足道的。如果它不存在，请尝试另一个 x。我很少需要超过 2 次尝试，大多数情况下第一次尝试会导致新创建的域中已经有一个有效的生成器。

为此，您可以使用我的开源程序“学术签名”。 [手册和下载页面的链接](http://www.fh-wedel.de/~an/crypto/Academic_signature_eng.html)。如果您将一个新域导入到域列表中，您可以尝试为该域使用任意生成器。生成器在导入到 Academic Signature 时进行检查。如果它不是椭圆曲线上的有效点，则增加测试点的 x 坐标，直到遇到有效的 xy 坐标对。如果您随后导出域，则新生成器将包含在域参数的纯文本文件中。

在此页面[ECC 域页面上](http://www.fh-wedel.de/~an/crypto/accessories/domains_anders.html)，您可以找到我创建的一些域，这些域是我使用上述过程获取包含一些“十六进制文字”的生成器。

如果您没有自己创建域，如果它是优先顺序的，并且如果您已经在某些实现中使用了生成器，则更容易：将旧实现生成器与随机数相乘，您就得到了一个新的生成器，您可以使用它来将您的密钥空间与其他实现的密钥空间分开。

问候迈克尔安德斯

# tomcat - 如何在不重新安装 Tomcat 的情况下安装 Tomcat Manager？

> ID：11156780
> 
> 赞同：7
> 
> 时间：2012-06-22T13:06:22.773
> 
> 标签：tomcat, tomcat-manager

操作系统：Windows XP。

我已经安装了 Tomcat 7.0.25 并且文件夹“manager”位于 webapps 文件夹中。

我已经阅读了这里的文档：http: [//tomcat.apache.org/tomcat-7.0-doc/manager-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html) 并且正在谈论已经安装的管理器。

我已经为用户设置了**manager-gui**角色。

问题是，如果我使用 访问管理器`http://localhost/manager`，我只会得到一个白页（没有内容），如果我尝试`https://localhost/manager`，我会收到 404 错误。

有什么线索吗？

下载管理器应用程序的链接也很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:59:14.287

如果要访问 GUI，则必须使用 URL `http://localhost:8080/manager/html/`。没有任何配置来响应请求，`/`这就是您看到空白屏幕的原因。使用 Manager 的 GUI 所需的 URL 清楚地记录在 Tomcat 网站上的 Manager 文档中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-30T08:57:10.653

您只需将应用程序的目录从安装包复制到`webapps`目录并设置正确的权限即可安装管理器或主机管理器而无需重新安装tomcat。

```
chown -R tomcat:tomcat apache-tomcat-xx-yy/webapps/*
cp -r apache-tomcat-xx-yy/webapps/* $APACHE_HOME/webapps/ 
```

*即使问题很老，而且@Pierpaolo 问题可能不同，我认为分享这些信息很有用，因为它是解决这个线程特定问题的可能方法。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:11:43.317

您确定您的 PC 上只有一个 tomcat 并且它的端口是 80 吗？

默认情况下，端口是 8080，所以 URL 是`http://localhost:8080/manager`.

如果您确定为 80 端口配置了 tomcat，请检查其日志：您可能有另一个进程（例如 Apache httpd）正在侦听 80 端口并阻止其启动。

# ruby - Nokogiri 中的 XPath 返回空数组 [] 而我期望有结果

> ID：11156781
> 
> 赞同：8
> 
> 时间：2012-06-22T13:06:23.077
> 
> 标签：ruby, xml, xpath, nokogiri

我正在尝试使用 Nokogiri、Ruby 和 XPath 解析 XML 文件。我通常不会遇到任何问题，但以下我无法发出任何 xpath 请求：

```
doc = Nokogiri::HTML(open("myfile.xml"))
doc.("//Meta").count 
# result ==> 0

doc.xpath("//Meta") 
# result ==> []

doc.xpath(.).count
# result => 1 
```

这是我的 XML 文件的简化版本

```
<Answer xmlns="test:com.test.search" context="hf%3D10%26target%3Dst0" last="0" estimated="false" nmatches="1" nslices="0" nhits="1" start="0">
  <time>
    ...
  </time>
  <promoted>
    ...
  </promoted>
  <hits>
    <Hit url="http://www.test.com/" source="test" collapsed="false" preferred="false" score="1254772" sort="0" mask="272" contentFp="4294967295" did="1287" slice="1">
      <groups>
        ...
      </groups>
      <metas>
        <Meta name="enligne">
          <MetaString name="value">
          </MetaString>
        </Meta>

        <Meta name="language">
          <MetaString name="value">
            fr
          </MetaString>
        </Meta>
        <Meta name="text">
          <MetaText name="value">
            <TextSeg highlighted="false" highlightClass="0">
              La
            </TextSeg>
          </MetaText>
        </Meta>
      </metas>
    </Hit>
  </hits>
  <keywords>
    ...
  </keywords>
  <groups>
    ...
  </groups> 
```

如何`<Hit>`从此 XML 中获取所有子级？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-22T14:50:51.280

调用时包含命名空间信息`xpath`：

```
doc.xpath("//x:Meta", "x" => "test:com.test.search") 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-22T14:29:47.623

您可以使用该[`remove_namespaces!`](http://rdoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Document#remove_namespaces%21-instance_method)方法并节省您的一天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T14:30:34.323

这是 XPath 最常见的问题之一——搜索“XPath 默认命名空间”。

如果无法为默认命名空间注册命名空间并使用已注册的前缀（例如`"x"`in `//x:Meta`），则使用：

```
//*[name() = 'Meta` and namespace-uri()='test:com.test.search'] 
```

如果知道`Meta`只能属于默认命名空间，那么上面可以简写为：

```
//*[name() = 'Meta`] 
```

# regex - 使用 WebDav 按模式删除文件

> ID：11156786
> 
> 赞同：0
> 
> 时间：2012-06-22T13:06:34.050
> 
> 标签：regex, webdav, cadaver

是否可以通过文件名模式使用 WebDav 删除文件？

例如，我想删除所有前缀为 hello ( `hello_*`)的文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:32:38.647

读这个：

1.  [WebDAV - 请求“显示文件夹中的文件”？](https://stackoverflow.com/questions/7399358/webdav-request-show-files-in-folder)

2.  [获取文件夹列表 (WebDAV)](http://msdn.microsoft.com/en-us/library/ms992615%28v=exchg.65%29)

3.  [删除项目 (WebDAV)](http://msdn.microsoft.com/en-us/library/ms879334%28v=exchg.65%29.aspx)

JScript 支持正则表达式，所以**YES**是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:01:57.147

不，这是不可能的。您所能做的就是检索所有名称，找到您要删除的名称，然后为每个名称提交 DELETE 请求。

# redis - 不存在密钥的 ServiceStack Redis 客户端行为

> ID：11156793
> 
> 赞同：1
> 
> 时间：2012-06-22T13:06:51.133
> 
> 标签：redis, servicestack

在 Redis 文档中，当您调用 Get 操作并且密钥不存在时，它应该返回 Nil。（来源：[http](http://redis.io/commands/get) ://redis.io/commands/get ）

ServiceStack 客户端如何处理这个问题？它是否返回 null，或者我是否需要使用 Exists、ContainsKey？

是否有另一种方法来检查键是否存在并使用一个请求返回值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:41:29.640

如果您尝试获取不存在的密钥，您将返回 null。

使用 IRedisClient 获取密钥的方法有很多，但这里有一个示例：

[获取值（）](https://github.com/ServiceStack/ServiceStack.Redis/blob/e0f01bb303f73e4811a4971c2988f1ed1b50435d/src/ServiceStack.Redis/RedisClient.cs#L132 "获取值（）")

如果您有兴趣，IRedisNativeClient 会以 1-1 命令的方式直接对抗金属。

您可以使用 pineline 或事务在一个请求中执行多项操作。例如：

```
using(var pipeline = client.CreatePipeline())
{
    pipeline.QueueCommand(r => r.GetSetCount("key1"), count => count1 = count);                
    pipeline.QueueCommand(r => r.GetSetCount("key2"), count => count2 = count);
    pipeline.QueueCommand(r => r.GetSetCount("key3"), count => count3 = count);
    pipeline.Flush();
} 
```

# javascript - 使用 Javascript/jQuery 根据 Text Value 修改 CSS

> ID：11156801
> 
> 赞同：4
> 
> 时间：2012-06-22T13:07:27.687
> 
> 标签：javascript, jquery, css, wordpress, api

OK Stackoverflowians，这是今天的谜语。

我在一个 WordPress 网站上有一个天气侧边栏小部件，它从 Google Weather API 获取所有数据。我想设置一个从 RED 到 BLUE 的渐变，然后通过 javascript 之神的魔法来查看温度值。

较高的数字 = 更接近红色
较低的数字 = 接近蓝色

有什么可以做到这一点吗？还是我必须从头开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:20:15.943

您可以使用这样的两个维度来表达颜色：

```
var max_temp = 50, // set maximum expected temperature
min_temp = -10, // set minimum temperature
temp_range = max_temp - min_temp, // calculate range
temp_rating = ((temp - min_temp) / temp_range) * 255 // express value in terms of the range multiplied by 255
red = temp_rating, // more temp = more red
blue = 255 - temp_rating; // more temp = less blue 
```

然后你的 CSS 颜色会变成：

```
rgb(red, 0, blue) 
```

不知道它是否看起来不错;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:20:24.263

您可以使用**jQuery**执行此操作：

```
$(document).ready(function(){
    $('#temp')​.change(function(){
        if($(this).val() < 47)
            $(this).removeAttr("class").addClass("cold");
        else
            $(this).removeAttr("class").addClass("hot");
    })​;
}); 
```

**CSS**

```
​.hot {background: #f00; color: #fff;}
.cold {background: #00f; color: #fff;} 
```

**HTML**

```
​&lt;input type="text" id="temp"​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ />​​​​​​​​​​​​​​​ 
```

希望这可以帮助！仅供参考，[小提琴](http://jsfiddle.net/YbL6C/)。或者，您也可以使用`.keyup()`函数！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:41:32.097

这是一个改编自我为 JavaScript 热图图表生成颜色的类似实现的[JSFiddle 。](http://jsfiddle.net/cJg84/3/)

您传入一个值、一个最小值和一个最大值来定义一个范围，然后根据脚本中定义的第一个、最后一个和中点颜色进行插值并生成一个十六进制值。这从红色变为绿色，范围为 0 - 50，但它也通过提供最极端的颜色来处理超出范围的值。也许您可以修改它以满足您的要求？

# salesforce - 回滚 Salesforce 中的更改

> ID：11156810
> 
> 赞同：5
> 
> 时间：2012-06-22T13:08:03.140
> 
> 标签：salesforce, apex-code, visualforce

我刚刚开始在 Salesforce 中为我的公司进行适度的 Web 开发工作，我正在寻找对部署过程的一些反馈/见解。现在看起来我们将使用视觉力和顶点进行大量定制工作。我想知道的是，如果我在我的生产组织（数据或元数据）中搞砸了，有没有办法回滚到我的组织的快照或以前发布的版本仍然有效？使用平庸的开发工具，我担心当确实出现错误时，我将无法快速解决问题。

我在这里阅读了有关设置源代码控制的不同方法： [多个开发人员如何有效地在一个 force.com 应用程序上工作？](https://stackoverflow.com/questions/3389334/how-can-multiple-developers-efficiently-work-on-one-force-com-application)

但是我还没有发现任何人经历过基本上还原更改集或更改分支的过程。Salesforce 内置的保护措施是否足够好，以至于我不必担心生产中的错误？我是否应该不必担心必须还原更改集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:35:08.997

处理此问题的方法之一是正确使用与您的生产组织关联的沙盒组织。当您使用另一个沙盒组织进行旨在部署到生产的主要开发时，您始终可以保留一个沙盒组织，该组织具有所有事物的“祝福”实例。如果在将开发沙箱中的新开发部署到生产环境之间发生严重错误，您可以从受祝福的沙箱前滚以恢复到之前完全正常工作的状态。

话虽如此，当您询问不担心生产中的错误时，您正在做一些事情。并不是说它们不会发生，因为它们会发生，而是你很快就会开始对破碎的含义有了不同的理解。变更集只是将变更从一个组织转移到另一个组织的一种方式，并且是平台上的一个相当新的发展。它们有一些限制，例如不移动自定义设置数据，但通常工作得很好。

但是确实，当您拥有良好的单元测试，再加上所有其他强加的参照完整性检查时，可以说“破坏构建”并希望恢复到一些全局不同时间点的所有内容的快照。更常见的是，根据我的经验，您会将孤立的单元恢复到以前的版本，并且可以使用沙箱或源代码控制通过向前推动早期版本直到找到修复程序来完成此操作。

亚当

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T21:25:00.857

我一直在研究应用程序交换上的应用程序，至少看起来它会给我想要的东西。该产品是[Dreamfactory 的快照](http://www.dreamfactory.com/download/snapshot_data_sheet.pdf)。有趣的是，我在 Dreamfactory 采访过的销售人员告诉我，salesforce 在内部使用他们的应用程序来管理变更。我发现我的许可证中不包含此功能有点不幸，但是......以下是我发现的对我的具体问题有帮助的细节：

对您的组织元数据进行快照并将其复制或部署到另一个组织的能力。这将允许我部署/回滚更改。

能够区分 2 个不同的快照（来自不同的组织）并查看更改的详细信息。这将帮助我在问题出现时找出问题的原因。

# google-maps - 地图未使用 load() 加载到页面上

> ID：11156812
> 
> 赞同：0
> 
> 时间：2012-06-22T13:08:27.893
> 
> 标签：google-maps, jquery

我的页面中有谷歌地图。当我刷新页面时，地图正在加载。但问题是当我使用 load() 加载页面时，只有地图不起作用。我从 php.ini 得到纬度和经度。

```
var fenway = new google.maps.LatLng(<?php echo $propertyValues->lat; ?>, <?php echo $propertyValues->lng; ?>);
                                                var mapOptions = {
                                                  center: fenway,
                                                  zoom: 16,

                                                  mapTypeId: google.maps.MapTypeId.ROADMAP
                                                };

                                                var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
                                                var image = '<?php echo $path;?>components/com_propertylist/images/Home.png';

                                                var beachMarker = new google.maps.Marker({
                                                    position: fenway,
                                                    map: map,
                                                    icon: image
                                                }); 
```

有任何想法吗？提前致谢

# android - 如何从 Service 获取参数到 AsyncTask

> ID：11156814
> 
> 赞同：0
> 
> 时间：2012-06-22T13:08:37.877
> 
> 标签：android, service, android-asynctask

我有一个 AsyncTask 并且在后台我想启动服务以从 url 获取文本。

我需要从服务中了解它何时完成工作并从中获取一些文本并继续使用 AsyncTask。但我不知道如何从 Service 获取参数到 AsyncTask 并知道它是否完成。

我在 AsyncTask 上的代码是：

```
 protected String doInBackground(String... params) {
    //starts service number activite
    Intent serviceIntent = new Intent();
    serviceIntent.setAction("services.conServise");
    context.startService(serviceIntent);

return null;
} 
```

服务代码：

```
 public void onStart(Intent intent, int startId) {

    // Create some random data
           try{
      URL url = new URL("http://hostname:80/index.html");

        // Read all the text returned by the server
  BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
        String str;
        while ((str = in.readLine()) != null) {
     str is one line of text; readLine() strips the newline character(s)
        }
        activitNum = Integer.parseInt(str);
        in.close();

    } catch (MalformedURLException e) {
    } catch (IOException e) {
statusCon=-1;

    }finally{stopSelf();}

    super.onStart(intent, startId);
} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:12:27.577

为什么要在方法中轻松编写`Service`代码时要启动。在非 UI 线程上运行，旨在执行此类网络活动。因此，我建议您自己完成所有从网络获取数据的活动，而不是启动.`Service``doInBackground()``doInBackground()``doInBackground()``Service`

# python - 通过 python 和 subprocess.Popen 对象运行 mpkg 安装程序

> ID：11156821
> 
> 赞同：0
> 
> 时间：2012-06-22T13:08:51.267
> 
> 标签：python

我正在尝试在 UNIX 上运行 .mpkg 安装程序，当我运行此代码时：

```
p = subprocess.Popen(['/Path/to/File.mpkg'], stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)
return p 
```

输出是这样的：

```
<subprocess.Popen object at 0x11384xxx> 
```

我的第一个问题是 - 有没有更简单的方法在 UNIX 上运行 mpkg 安装程序？其次 - 我似乎无法弄清楚如何使用 subprocess.Popen 对象对我有利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:10:03.073

Sadly I’m not sure what `mpkg` is, but there are two options.

*   Either it is a self-running package, perhaps a shell script, akin to the `.run` format sometimes used for Unix software. In this case, your invocation of `Popen` is correct, as long as you have the execute permission on `File.mpkg` (check with `ls -l /Path/to/File.mpkg`). The installer should be running fine.
*   Or, it is intended to be processed by a system tool, like `.deb` packages are handled with the `dpkg` program. In this case, you need something like this:

    ```
    p = subprocess.Popen(['/usr/bin/dpkg', '-i', '/Path/to/File.deb'], ...) 
    ```

    or, alternatively:

    ```
    p = subprocess.Popen('dpkg -i /Path/to/File.deb', ..., shell=True) 
    ```

Now, what you do with this `Popen` object depends on what you want to achieve. If you wish to get the output of the process, you need to call [`Popen.communicate`](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate), like this:

```
p = subprocess.Popen(
    ['/Path/to/File.mpkg'],
    stdout=subprocess.PIPE, stderr=subprocess.PIPE,
    stdin=subprocess.PIPE)
(out, err) = p.communicate() 
```

Now `out` contains the standard output and `err` the standard error.

If you just want to invoke the command and wait until it completes, you can also use the [`subprocess.call`](http://docs.python.org/library/subprocess.html#subprocess.call) shortcut.

# xml - BeanCreation 错误：- 无法找到默认提供程序

> ID：11156825
> 
> 赞同：0
> 
> 时间：2012-06-22T13:09:05.233
> 
> 标签：xml, web-services, hibernate, javabeans, spring-3

有谁知道如何解决这个问题？它发生在我试图运行和测试的 spring 3 rest web 服务应用程序上

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0': Invocation of init method failed; nested exception is javax.validation.ValidationException: Unable to find a default provider
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:96)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:44)
    at org.springframework.test.context.TestContext.buildApplicationContext(TestContext.java:198)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:233)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:126)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:85)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:95)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:139)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: javax.validation.ValidationException: Unable to find a default provider
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:264)
    at org.springframework.validation.beanvalidation.LocalValidatorFactoryBean.afterPropertiesSet(LocalValidatorFactoryBean.java:185)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 29 more 
```

这是我的小服务程序：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans      
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <import resource="mvc-config.xml" />

    <import resource="service-config.xml" />

    <import resource="datasource-config.xml" />

    <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>database.properties</value>
            </list>
        </property>
    </bean>

    <bean
        class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources 
        in the /WEB-INF/views directory -->
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean
        class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

    <context:component-scan base-package="com.jr.freedom.controllers"></context:component-scan>

</beans> 
```

数据源

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
   http://www.springframework.org/schema/beans 
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/tx 
   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context-3.0.xsd
      ">

    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.user}" />
        <property name="password" value="${database.password} " />
    </bean>

    <bean id="mySessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="myDataSource" />
        <property name="packagesToScan" value="com.jr.freedom"/>
        <property name="hibernateProperties" value="hibernate.config">

        </property>
    </bean>

    <!-- Declare a transaction manager -->
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager"
        p:sessionFactory-ref="mySessionFactory" />

</beans> 
```

休眠配置

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
  "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
  "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
  <session-factory>
   <!-- We're using MySQL database so the dialect needs to MySQL as well-->
    <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <!-- Enable this to see the SQL statements in the logs-->
    <property name="show_sql">true</property>
    <!-- This will drop our existing database and re-create a new one.
      Existing data will be deleted! -->
    <property name="hbm2ddl.auto">create</property>
  </session-factory>
</hibernate-configuration> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T03:10:14.377

您可以在 SO 中检查这些问题。他们可能会帮助你。

[javax.validation.ValidationException：找不到默认提供程序](https://stackoverflow.com/questions/3982950/javax-validation-validationexception-unable-to-find-default-provider)

[Spring MVC 3 验证 - 找不到默认提供程序](https://stackoverflow.com/questions/2231100/spring-mvc-3-validation-unable-to-find-a-default-provider)

[javax.validation.ValidationException：找不到默认提供程序](https://stackoverflow.com/questions/6856693/javax-validation-validationexception-unable-to-find-a-default-provider)

您是否使用默认的休眠验证器，并且您有相同的罐子。？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-31T16:59:33.987

在 lib 文件夹中添加 hibernate-validator-4.2.0.Final.jar

# json - Twitters json搜索结果返回空

> ID：11156826
> 
> 赞同：0
> 
> 时间：2012-06-22T13:09:06.877
> 
> 标签：json, twitter

我无法通过 twitters json 搜索访问推文 [https://search.twitter.com/search.json?callback=?&rpp=5&q=from:secretdreameruk](https://search.twitter.com/search.json?callback=?&rpp=5&q=from:secretdreameruk)

奇怪的是几周前它还在工作，但突然停止并且没有产生任何错误。在浏览器中查看上面的链接会显示 json 返回，但结果部分是空的（“结果”：[]），即使我最近发了推文。

起初我以为每天的使用量会受到限制，但我已经遇到这个问题大约一周了。

有谁知道为什么会这样？

谢谢你。麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:35:10.147

我不确定为什么 Twitter[自己承认](https://dev.twitter.com/docs/using-search)会发生这种情况：

> 搜索关注的是相关性而不是完整性。这意味着搜索结果中可能会丢失一些推文和用户。如果你想匹配完整性，你应该考虑使用 Streaming API。

我会改用[以下 api 格式](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)，它更可定制。

```
https://api.twitter.com/1/statuses/user_timeline.json?screen_name=secretdreameruk&count=5&callback=? 
```

# facebook - 使用参数在 facebook 上发布操作

> ID：11156827
> 
> 赞同：1
> 
> 时间：2012-06-22T13:09:09.160
> 
> 标签：facebook, facebook-opengraph

我在 facebook 上创建了一个带有一些 Open Graph 操作的应用程序。我的所有行动都被批准了。现在我对可能采取的一项行动有疑问。我的此操作的帖子网址格式为 My-App-Namespace:ActionName?ObjectName=MyURL/a/String-Value/_bn/Integer-Value

但是当它发布在 FB 上时，我的参数之一“_bn/Integer-Value”没有发布。FB 上的帖子是 My-App-Namespace:Action-Name?Object-Name=My-URL/a/String-Value

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:20:41.753

检查为对象编写元标记的代码是否忘记在`og:url`值中包含相同的参数 - 这是迄今为止最可能导致此问题的原因

# python - 如何从 csv 创建以日期为 x 轴的条形图

> ID：11156828
> 
> 赞同：0
> 
> 时间：2012-06-22T13:09:11.057
> 
> 标签：python, matplotlib

我想从 csv 文件生成条形图，我的数据如下所示：

```
06/14/12    SMB 12104560    8096373.6   1.5     1.08
06/15/12    SMB 10328540    8217192.68  1.26    1.24
06/18/12    SMB 5495294     8232792.78  0.67    0.85 
```

我希望第一列是 x 轴，最后一列是 y 轴，如果可能的话，我只想使用最后 5 行数据。这是我迄今为止尝试过的，但谢谢

编辑新代码：

```
data = numpy.loadtxt(StringIO(etf + '.csv' ,dtype= [("date", "S8"), ("value", "f8")]) , usecols=(0,-1))
x = numpy.arange(len(data))
pl1.bar(x,data["value"], width = 0.8)
p1.xticks(x+.4, data["date"])
p1.show() 
```

新错误：`TypeError: __init__() got an unexpected keyword argument 'dtype'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:30:15.440

```
import numpy as np
from StringIO import StringIO
import pylab as pl

datastr = """06/14/12    SMB 12104560    8096373.6   1.5     1.08
06/15/12    SMB 10328540    8217192.68  1.26    1.24
06/18/12    SMB 5495294     8232792.78  0.67    0.85"""

data = np.loadtxt(StringIO(datastr), 
                  dtype=np.dtype([("date", "S8"), ("value", "f8")]), 
                  usecols=(0,-1))
x = np.arange(len(data))
pl.bar(x, data["value"], width=0.8)
pl.xticks(x+0.4, data["date"])
pl.show() 
```

![在此处输入图像描述](../Images/aea55049d683fb44c07adad581bc7b49.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:12:51.287

对于任何绘图目的，我建议使用 matplotlib。

有一个简单的[示例来绘制条形图](http://matplotlib.sourceforge.net/examples/api/barchart_demo.html)- 与您使用的非常相似，但有时它有助于从头开始。

另外，你到底是从哪里得到 TypeError 的？

关于最后 5 个元素，可以随时使用 python 的列表拼接，例如`list[-5:]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:17:17.390

我不知道 matplotlib 但这可能是问题所在：

```
date.append((col[0])) # <- appending a string 
```

也许你应该尝试使用

```
ax.set_xticklabels(...) 
```

要获取字符串标签，因为它看起来“日期”列表不应该是字符串。

# c# - mvc 路由和 web 表单页面

> ID：11156832
> 
> 赞同：0
> 
> 时间：2012-06-22T13:09:34.227
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

一些背景知识：我创建了一个新的 ASP.NET MVC 3 WebApplication。然后我添加一个 Webforms 页面：`~/ASPWebforms/Test.aspx` 然后我在 Global.asax 文件中编辑路由，如下所示：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.MapPageRoute("Test", "Test/", "~/ASPWebforms/Test.aspx");
    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

现在我在浏览器中输入`http://localhost:54847/Test`，一切都按预期工作。

问题是所有其他链接看起来像这样：`http://localhost:54847/Test?action=Index&controller=Home`

我还尝试更改路线的顺序：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
    routes.MapPageRoute("Test", "Test/", "~/ASPWebforms/Test.aspx");
} 
```

但随后`http://localhost:54847/Test`将不再工作。

我期待链接`http://localhost:54874/Test`转到`~/ASPWebforms/Test.aspx` 其他链接正常工作 mvc 样式`{controller}/{action}/{id}`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:22:00.967

我可以帮助解决第二个疑问。

它不起作用的原因是因为路线顺序很重要。

[http://msdn.microsoft.com/en-us/library/cc668201.aspx](http://msdn.microsoft.com/en-us/library/cc668201.aspx)

每当找到匹配项时，将不再对该请求进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:52:54.523

我在此页面上找到了第一个问题的解决方案：

[http://forums.asp.net/p/1589809/4028028.aspx](http://forums.asp.net/p/1589809/4028028.aspx)

此页面中的一个有趣的句子：

> 请阅读 Steve 书中的“Understanding the Outbound URL-Matching Algorithm”主题。

# java - 收到参数的 CDI 验证

> ID：11156836
> 
> 赞同：1
> 
> 时间：2012-06-22T13:09:57.720
> 
> 标签：java, rest, cdi, validation, facade

我正在尝试了解 CDI，目前结果很少。:( 实际上我被这个例子所困的 web 服务门面：

```
@GET
@Path("/greeting/{name}")
@produces(mediatype.text_plain)
public String sayHello(@PathParam("name") String name)
{
    return "Hello " + name;
} 
```

因为使用 CDI 注释，我想在每次将字符串作为参数发送时在服务器端进行检查，结果如下：（注意`@NameValidator`注释）

```
@GET
@Path("/greeting/{name}")
@Produces(mediatype.text_plain)
public String sayHello( @NameValidator @PathParam("name") String name)
{
    return "Hello " + name;
} 
```

验证可以是任何类似的东西，在外部类中：

```
if (name == "Andrea") {
    throw new Exception();} 
```

它是如何工作的？可能吗？如果不是，有什么替代方案？谢谢！安德烈亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:26:42.790

您可以使用[CDI 的拦截器注释](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/interceptors.html)并执行以下操作：

```
...
@Validated
public String sayHello(@Validator(MyValidator.class) String name) {
    ... 
```

Where`@Validated`将方法绑定到一个`ValidationInterceptor`类左右，您使用`@AroundInvoke`方法及其`InvocationContext`参数来检查传递的参数并验证它们。

这种方法的一个“困难”是您必须使用反射来获取`@Validator`每个参数的注释和指定的验证器类，然后创建/检索相应的实例，然后才能最终进行实际验证。

一种稍微不同的方法是将`Instance<T>`验证器的一个公共超类/接口注入到并使用验证器限定符`ValidationInterceptor`注释参数：`sayHello`

```
// in ValidationInterceptor:

@Inject
private Instance<Validator> validatorInstance;

@AroundInvoke
public Object validate(InvocationContext context) {

    // get Annotation instances for target method parameters
    // ...

    Validator validator =
        validatorInstance.select(annotations).get();

    // ... validator.validate(parameter); ...

}

// sayHello:

...
@Validated
public String sayHello(@NameValidator String name) {
    ... 
```

要从中获取参数注释`InvocationContext`，请执行以下操作：

```
Annotation[][] annotations = context.getMethod().getParameterAnnotations(); 
```

`@AfterBeanDiscovery`您还可以考虑在事件处理程序中预处理这些注释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T15:05:20.857

对于那个验证问题，我会建议[Seam Validation](http://seamframework.org/Seam3/ValidationModule)，它将 CDI 连接到[Hibernate-Validator](http://www.hibernate.org/subprojects/validator.html)。这将您连接到 Hibernate 端定义良好的验证 API 上，使您能够编写如下代码：

```
public void registerUser(@Valid UserData data) {...}; 
```

如果您无法忍受 Seam 3 依赖项，您可以轻松获取 CDI 扩展的相关源代码，只需几十行代码。

# python - Python 的事件框架？

> ID：11156838
> 
> 赞同：8
> 
> 时间：2012-06-22T13:10:00.600
> 
> 标签：python, events, twisted, message-queue

我正在构建一个可与 Web 客户端 (Django) 和远程 API（可能是独立的守护进程）一起使用的系统。我发现将他们的工作与 JavaScript 等事件框架协调起来更容易。不幸的是，Django 信号是同步的，这会使对客户端的回复非常缓慢。此外，我可能希望能够将守护进程或其部分迁移到单独的机器上，但仍以相同的方式工作（不是 RPC，只是触发事件或发送消息）。（这听起来像是 Erlang 的方法。）

是否有一个框架可以使用经过验证且可靠的方式在进程之间进行通信（例如 RabbitMQ），并且需要最少的样板文件？

至于 André Paramés 建议的 Twisted，我更喜欢更简单的代码。这在 Twisted 中可行吗？

```
from events_framework import subscribe, trigger
from django.http import Client
http_client = Client()  # just a sample

@subscribe('data_received'):
def reply(data):
     http_client.post('http://www.example.com', data)
     trigger('data_resent', data) 
```

这里有更多细节。有一个 Django 视图文件，它使用一些模型并通知其他事件。还有一个独立的守护程序脚本，可以无限运行并对事件做出反应。

这只是**伪代码**，我只是说它应该多么容易。

```
# django_project/views.py (a Django views file)
from events_framework import publish, subscribe
from annoying import

@subscribe('settings_updated')
def _on_settings_update(event):  # listens to settings_updated event and saves the data
    Settings.object.get(user__id=event.user_id).update(event.new_settings)

@render_to('form.html')
def show_form(request):  # triggers 'form_shown' event
    publish('form_shown', {'user_id': request.user.id, 'form_data': request.GET})
    return {...}

# script.py (a standalone script)
from events_framework import publish, subscribe

@subscribe('form_shown')
def on_form_shown(event):  # listens to form_shown event and triggers another event
    pass
    result = requests.get('third party url', some_data)
    publish('third_party_requested', {'result': result}) 
```

同样，这不能仅使用 Django 信号来完成：一些事件需要通过网络发布，其他事件应该是本地的但异步的。

可能需要实例化一些东西，比如

```
from events_framework import Environment
env = Environment()  # will connect to default rabbitmq server from settings. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:08:01.593

检查[电路](https://bitbucket.org/prologic/circuits/)：用于 Python 编程语言的轻量级事件驱动和异步应用程序框架，具有强大的组件架构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T04:43:01.397

我认为[Celery](http://celeryproject.org/)和[RabbitMQ](http://www.rabbitmq.com/)是最成熟的软件组合，我会坚持使用它们。Celery 不仅允许创建事件，还允许通过[队列路由](http://www.rabbitmq.com/tutorials/tutorial-five-python.html)和[并行化](http://www.rabbitmq.com/tutorials/tutorial-two-python.html)进行灵活的专业化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T10:32:28.653

[Django ztaskd](https://github.com/dmgctrl/django-ztask)是一种通过 ZeroMQ（通过[pyzmq](https://github.com/zeromq/pyzmq)）从 Django 调用异步任务的方法。

# jquery - 使用数组作为动态 JQuery 字符串变量名

> ID：11156844
> 
> 赞同：0
> 
> 时间：2012-06-22T13:10:24.623
> 
> 标签：jquery, arrays, variables, select, dynamic

摘要：我已将 id 选择标签的名称传递到一个数组中。我想动态分配每个 Select Item 以在更改时显示所选项目的索引。这被发送到输出 div。只有第三个选择项被动态触发。为什么？

```
<script language="JavaScript" type="text/javascript">

$(document).ready(function(){

var NameOfSelect=new Array("a","b","c");

for (i=0;i<NameOfSelect.length;i++){

var sel=NameOfSelect[i];
$("#"+NameOfSelect[i]).change(function () {
           var str = "";
           $("#"+sel+" option:selected").each(function () {
            str += $(this).index() + " "+$("#"+sel).attr("id");
                  });
          $("#output").text(str);
       })
        .trigger('change');

}
</script> 
```

的HTML

```
<select id="a" >
<option value="0a" >0a</option>
<option value="1a"  >1a</option>
<option value="2a" >2a</option>

</select>

<select id="b" >
<option value="0b"  >0b</option>  
<option value="1b" >1b</option>
<option value="2b" >2b</option>
</select>

<select id="c" >
<option value="0c" >0c</option>
<option value="1c" >1c</option>
<option value="2c" >2c</option>

</select>
<div id=output></div> 
```

输出显示只有“C”在更改时被触发。为什么“a”和“b”没有被类似地动态分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:19:20.777

`c`发生这种情况是因为每次迭代都会重新分配变量。在 for 循环结束时，所有元素都会有一个适当的事件处理程序，但它们将`c`在其函数体内引用相同的变量。此变量将保存 的最后一个值`c`，即`"c"`。

一种解决方案是为您分配的每个函数处理程序在闭包中缓存 的值`c`，但在这种情况下，最好`this`在处理程序内部简单地使用来引用事件`select`所针对的元素`change`。

```
$(document).ready(function(){
    var NameOfSelect = ["a", "b", "c"];

    for (var i=0; i < NameOfSelect.length; i++) {
        $("#"+NameOfSelect[i]).change(function () {
            // this refers to the targeted select element
            var select = this;
            var str = "";
            $("option:selected", this).each(function () {
                // this refers to the selected option
                str += $(this).index() + " " + $(select).attr("id");
            });
            $("#output").text(str);
        }).trigger("change");
    }
}); 
```

此外，除非您使用s 进行多项选择，否则每个元素`select`应该只有一个。因此，您可以只使用和使用第一个（也是唯一的） selected 。`option:selected``select``find``option`

```
var str = $("option:selected", this).index() + " " + $(this).attr("id");
$("#output").text(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:20:42.573

好的 ol' javascript 关闭问题，我相信。您分配给更改事件的函数引用变量 c，该变量在 for 循环的每次迭代中都会更改并以“c”结尾。相反，将 c 传递给函数：

```
var c= NameOfSelect[i];
(function (n) {
    $("#"+NameOfSelect[i]).change(function () {
        var str = "";
        $("#"+n+" option:selected").each(function () {
            str += $(this).index() + " "+$("#"+n).attr("id");
        });

        $("#output").text(str);
    }).trigger('change')
})(c); 
```

# asp.net-mvc - MVC ViewModel 范围

> ID：11156847
> 
> 赞同：0
> 
> 时间：2012-06-22T13:10:29.883
> 
> 标签：asp.net-mvc

这可能是个人喜好问题，但在创建 ViewModel 时，最好使用如下所示的多个公共类（请记住，这 3 个类仅服务于一个视图）：

```
namespace WebApp.Areas.Commerce.Models.ViewModels
{
    public class TravellersViewModel
    {
        public TicketHolder TicketHolder { get; set; }
        public List<Traveller> TicketMembers { get; set; }
        public int MaxAge { get; set; }
        public bool ShowAddress { get; set; }
    }

    public class TicketHolder
    {
        public string EmailAddress { get; set; }
        public string TelephoneNumber { get; set; }
        public string MobileNumber { get; set; }
        public string Address1 { get; set; }
        public string Postcode { get; set; }
        public string Country { get; set; }
    }

    public class Traveller
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public int? Age { get; set; }
        public bool Policyholder { get; set; }
        public Traveller()
        {
            Title = "Mr";
        }
    }
} 
```

还是最好将子类嵌套在单视图模型的范围内

```
namespace WebApp.Areas.Commerce.Models.ViewModels
{
    public class TravellersViewModel
    {
        public TicketHolderDetails TicketHolder { get; set; }            
        public List<Traveller> TicketMembers { get; set; }
        public int MaxAge { get; set; }
        public bool ShowAddress { get; set; }

        public class TicketHolderDetails
        {
            public string EmailAddress { get; set; }
            public string TelephoneNumber { get; set; }
            public string MobileNumber { get; set; }
            public string Address1 { get; set; }
            public string Postcode { get; set; }
            public string Country { get; set; }
        }

        public class Traveller
        {
            public int Id { get; set; }
            public string Title { get; set; }
            public string FirstName { get; set; }
            public string LastName { get; set; }
            public int? Age { get; set; }
            public bool Policyholder { get; set; }
            public Traveller()
            {
                Title = "Mr";
            }
        }
    }
} 
```

我非常喜欢构建视图模型的第二种方式，因为它可以将所有内容保持在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:58:51.863

我制作视图模型的方法如下：

如果某个类对于一个 ViewModel 是唯一的，则它应该是嵌套的（没有理由从外部代码访问此类）。

如果此类可以以不同的方式使用（例如，不同视图模型的相同实体），则应单独放置。

# wordpress - 如何将文本格式化为类似于 stackoverflow {} 工具的 wordpress 中的代码？

> ID：11156848
> 
> 赞同：3
> 
> 时间：2012-06-22T13:10:32.727
> 
> 标签：wordpress, wordpress-theming

我需要使用 WordPress 格式化帖子中的文本，使其看起来像代码。就像在 stackoverflow 中一样，我们使用 { } 将代码与文本分开。当我在 Wordpress 中写博客时，我也需要这样做

```
Example ....
code will look like that ! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:13:36.097

你喜欢这里使用的那个：http: [//inturnets.com/2012/06/a-nice-tackling-with-jquery-and-css.html](http://inturnets.com/2012/06/a-nice-tackling-with-jquery-and-css.html)？

它是 syntaxhighlighter wp 插件[http://www.viper007bond.com/wordpress-plugins/syntaxhighlighter/](http://www.viper007bond.com/wordpress-plugins/syntaxhighlighter/)，一个非常可定制的插件，最后你使用简单的标签，如**[html] html 代码 [/html]**或**[css] css 代码[/css]**

祝你好运！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:49:32.000

Wordpress 具有预先格式化的段落样式，无需任何插件即可正常工作。只需选择文本，然后选择格式栏左侧的 Preformatted 样式：

![显示 WordPress 中预格式化段落样式的插图](../Images/1dd9e337cca5f60688ba3a27cfa4ef2c.png)

我已经安装了一个插件，但后来发现这更简单，并且可以很好地满足我的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T08:12:37.103

这可能对你有帮助

[http://textformat.in/](http://textformat.in/)

如果值得请投票

# php - 购物车和网上商店的说明

> ID：11156850
> 
> 赞同：0
> 
> 时间：2012-06-22T13:10:41.363
> 
> 标签：php, shopping-cart

我在[这里](https://stackoverflow.com/questions/11152302/shopping-cart-ideas)发布了一个关于创建购物车的问题。看来我可能误用了“购物车”这个词，或者回答的人可能没有很好地理解这个帖子。

我知道像“Magento、OpenCart、Prestashop 等”这样的开源软件被称为购物车。

我也知道像“Shopify、BigCommerce、3dCart 等”这样的付费托管服务也被称为购物车。我错了吗？

开源和付费托管服务都为您提供了用于创建自己的购物网站的管理面板。

我也明白“Yii、CakePHP、Symphony、Zend 等”是创建任何你想要的框架。

“购物车”和“网上商店”有区别吗？对我来说，我认为它们是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:16:52.377

购物车是网上商店的一个模块，用于将等待订购的商品存放在用户可以跟踪的地方。

网上商店是亚马逊、ebuyer 或其他一些购物网站。

Magento 实际上被归类为电子商务软件，它是您正在查看的内容的总称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:18:31.343

我想你回答了你自己的问题：“......*托管服务*，如“Shopify、BigCommerce、3dCart 等。”。这些是提供*购物车的***服务**。网上商店几乎是购物车的实现。你的整个在线商店是网上商店，选择产品和购买它们的机制就是购物车。像“Magento、OpenCart、Prestashop”这样的电子商务通常是包含购物车的*软件包*，您可以将其用作“网上商店”的一部分. 整个电子商务解决方案还包括订单报告、客户报告、管理功能等。

# javascript - 让子元素监听 extJS 事件

> ID：11156851
> 
> 赞同：1
> 
> 时间：2012-06-22T13:10:43.367
> 
> 标签：javascript, extjs

我是 extJS 的新手，也许我只是不知道正确的策略，所以如果你愿意，可以告诉我一个更好的解决方案。

我正在尝试：我有一个 extJS 网格。双击时，应该会出现一个 ExtJS Window 容器（用于详细设置），其中包含多个选项卡。该窗口具有设置单击元素的 ID 的功能。窗口中的每个选项卡也需要此 ID。因此，当窗口容器中的 ID 发生更改时，我想通过一个事件通知每个选项卡容器有关更改的 ID。

我的问题是，我无法从选项卡访问窗口以添加侦听器，因为窗口在第一次打开之前不会呈现。

如果您查看我的源代码，也许您可​​以更好地理解我的问题：

**窗口** （当双击网格元素时调用 setCustomerId() 和 show()）

```
Ext.define('myApp.path.view.Edit', {
extend: 'Ext.window.Window',
alias: 'widget.myEdit',

title: 'Edit',
height: 500,
width: 1000,
layout: 'fit',
closeAction: 'hide',

/**
 * Initialize my custom event
 */
initComponent: function() {
    this.addEvents('customerChanged');

    this.callParent();
},

/**
 * Sets the current customerId and fires a customerChanged event
 * @param {Number} customerId
 */
setCustomerId: function(customerId) {
    this.customerId = customerId;
    this.fireEvent('customerChanged', this.customerId);
},

/**
 * create a container for the editor tabs
 */
items: [{
    xtype: 'tabpanel',
    items: [
        {
            xtype: 'myTab'
        }
    ]
}]
}) 
```

**示例选项卡**

```
Ext.define('myApp.path.view.myTab', {
extend: 'Ext.container.Container',
alias: 'widget.myTab',

title: 'Customer',
layout: 'fit',

/**
 * Listen to my custom event 
 * PROBLEM: works, but only after the window has been displayed one time
 */
afterRender: function() {
    this.findParentByType('window').addListener("customerChanged",   this.onCustomerChanged)
    this.callParent();
},

/**
 * Listen to my custom event 
 * PROBLEM: doesn't work, findParentByType('window') is undefined
 */
initComponent: function() {
    this.findParentByType('window').addListener("customerChanged",   this.onCustomerChanged)
    this.callParent();
},

onCustomerChanged: functio() {}

}) 
```

我希望你能明白我的意图。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:37:58.007

不知道网格`itemdblclick`事件的代码（这会很有帮助），但我看到它类似于：

```
itemdblclick: function(v, m) {
    var id = m.get('id'); 

    //think you are not created a window each time, having the "closeAction: 'hide'" in the code
    //if for simplicity sake, for sure it should not be here
    if (!this.detailsWin) {
        this.detailsWin = Ext.create('myApp.path.view.Edit'); 
    }

    //you set the ID and after it shows the window
    //that is why for the first time event listener is bot working
    this.detailsWin.setCustomerId(id);

    //showing the window
    this.detailsWin.show();    
} 
```

如果是这样，您需要调用`setCustomerId`after `show`：

```
 this.detailsWin.show(); 
    this.detailsWin.setCustomerId(id); 
```

或简单地覆盖窗口内的模板方法：

```
/**
 * @template
 */
onShow: function() {
    //firing the event
    //should be checking here if the ID was really changed
    this.fireEvent('customerChanged', this.customerId);

    //call parent to show the window
    this.callParent(arguments);
} 
```

然后你可以`show` `setCustomerId`按任何顺序运行。

或者使用回调函数调用窗口的 show 方法：

```
this.detailsWin.show(null, function(){ 
    this.setCustomerId(id);
}); 
```

但请确保窗口是模态的，因为窗口不是模态的，并且显示您将单击网格的行并打开回调函数将不起作用。

*问题。*

顺便说一句，您应该注意到使用这种机制并且在窗口中有多个选项卡。例如 A、B、C，将 A 作为活动选项卡。B 和 C 选项卡在呈现之前不会监听 customerChanged 事件（没有客户 ID）。因此，当第一次打开窗口时，`onCustomerChanged`将调用 A 选项卡，并且 A 选项卡将知道 ID，但 B 和 C 选项卡对此一无所知（因为它们在您激活/打开它们之前尚未呈现，并且他们的`onCustomerChanged`事件监听器没有被使用）。这就是这种方法的问题。

显示呈现所有选项卡的窗口将起作用，但对所有呈现的选项卡进行更改并不是最好的方法，特别是在每个选项卡加载数据等上有大量组件。例如，用户可能只需要一个选项卡10 做某事，对所有已经呈现的触发事件的选项卡进行更改是过大的。

再加上 dbl 在网格中单击一个相同的记录，将使用相同的 ID 打开相同的窗口 2 次 - 因此最好检查 ID 是否在触发事件之前更改。

为了解决上述问题，我建议在标签内使用[激活](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.header.Container-event-activate)事件，每个标签内都有自己的 customerID 属性来跟踪它的变化，当然还有一种方法将当前 ID 传递给窗口。为此，您可以使用由每个选项卡类在窗口内部扩展的基本选项卡类，或使用 mixin 为选项卡提供通用功能。如果您想保存最后一个活动选项卡（从上一个时间窗口打开），则处理显示窗口上的活动选项卡（为选项卡运行相同的通用代码）选项卡，因为`activate`在打开窗口或仅设置时不会触发事件每次使用选项卡面板显示窗口时的活动选项卡`setActiveTab`方法，最好的地方是重写 onShow 模板方法。当然从选项卡中删除添加事件侦听器。

# jquery - 从 jquery get 中获取返回值？

> ID：11156852
> 
> 赞同：1
> 
> 时间：2012-06-22T13:10:49.813
> 
> 标签：jquery, get

我正在 jquery 调用 get 和 getJSON，但无法访问回调函数之外的返回值。如何访问返回的数据？

```
 var firstid;
        var nextid;

    $.get(callUrl, function(data) {  // call to add node
         var n = data.indexOf("id-");
         var m = data.indexOf("id-");
         firstid = data.substr(n+3,m - (n+3));
         nextid = data.substr(m+3);

             alert("firstid:" + firstid);  // returns correct value
    });

        alert("firstid:" + firstid);  // returns undefined for firstid 
```

如何在函数之外获取 firstid？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T13:12:46.713

**所有的 AJAX 调用都是异步的**

所以你**需要**使用回调。外面的任何东西都会返回`undefined`。

```
$.get(callUrl, function(data) {  // call to add node
     var n = data.indexOf("id-");
     var m = data.indexOf("id-");
     firstid = data.substr(n+3,m - (n+3));
     nextid = data.substr(m+3);

     doSomethingWithFirst(firstid);
});

function doSomethingWithFirst(f)   {
     //NOW do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:13:21.610

第二个`alert("firstid:" + firstid);`返回`undefined`，因为在执行时它实际上是`undefined`.

第一个`alert("firstid:" + firstid);`返回预期结果，因为它在`$.get`完成获取后触发。

**AJAX** - 代表异步 JavaScript 和 XML。异步事件是独立于主程序流发生的事件。虽然您*可以*将请求设置为同步，但**不建议**这样做。

如果您`alert("firstid:" + firstid);`以 5 秒的延迟将您的秒数包裹在超时中，它将显示预期的结果。

```
setTimeout(function() { alert("firstid:" + firstid); }, 5000); 
```

或者您可以将您的第二`alert("firstid:" + firstid);`个间隔包装为 1 秒延迟，它最终会显示预期的结果。

```
var callback_interval = setInterval(function() {
    if(typeof(firstid) == 'undefined') return;
    clearInterval(callback_interval);
    alert("firstid:" + firstid);
}, 1000); 
```

但最好直接在`$.get`成功回调中或通过该成功回调中的函数调用使用变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:13:04.670

这是因为它是异步完成的（AJAX 的基本原理之一）。您可以将[async](http://api.jquery.com/jQuery.ajax/)设置为 false 或使用其他一些回调构造来使用从 get 调用返回的值。

# c# - 如何为 PLINQ 编写线程感知扩展函数？

> ID：11156856
> 
> 赞同：8
> 
> 时间：2012-06-22T13:11:01.687
> 
> 标签：c#, plinq

有人知道如何在 PLINQ 中编写返回 ParallelQuery 的扩展函数吗？

更具体地说，我有以下问题：我想在需要引擎的 PLINQ 查询中执行转换，该引擎的创建成本很高并且不能同时访问。

我可以执行以下操作：

```
var result = source.AsParallel ().Select ( (i) => { var e = new Engine (); return e.Process(i); } ) 
```

在这里，每个项目创建一次引擎，这太昂贵了。

我希望*每个线程*创建一次引擎。

使用聚合，我可以接近我想要的东西

```
// helper class: engine to use plus list of results obtained in thread so far
class EngineAndResults {
   public Engine engine = null;
   public IEnumerable<ResultType> results;
}

var result = source.AsParallel ().Aggregate (

   // done once per block of items (=thread),
   // returning an empty list, but a new engine
   () => new EngineAndList () {
       engine = new Engine (),
       results = Enumerable.Empty<ResultType> ()
   },

   // we process a new item and put it to the thread-local list,
   // preserving the engine for further use
   (engineAndResults, item) => new EngineAndResults () {
       engine = engineAndResults.engine,
       results = Enumerable.Concat (
           engineAndResults.results,
           new ResultType [] { engineAndResults.engine.Process (item) }
       )
   },

   // tell linq how to aggregate across threads
   (engineAndResults1, engineAndResults2) => new EngineAndResults () {
       engine = engineAndResults1.engine,
       results = Enumerable.Concat (engineAndResults1.results, engineAndResults2.results)
   },

   // after all aggregations, how do we come to the result?
   engineAndResults => engineAndResults.results
); 
```

如您所见，我滥用累加器为每个线程携带一个引擎。这里的问题是 PLINQ 最终将结果聚合到单个 IEnumerable 中，这会导致线程同步。如果我想在之后附加另一个 PLINQ 扩展，这不是很好。

我会很感激像

```
 var result = source.AsParallel ()
                  .SelectWithThreadwiseInitWhichIAmLookingFor (
                       () => new Engine (),
                       (engine, item) => engine.Process (item)
              ) 
```

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:33:52.877

你可以[`ThreadLocal<T>`](http://msdn.microsoft.com/en-us/library/dd642243.aspx)用来做这个。就像是：

```
var engine = new ThreadLocal<Engine>(() => new Engine());
var result = source.AsParallel()
                   .Select(item => engine.Value.Process(item)); 
```

# sql-server-2008 - 之间的语句包括两个条件

> ID：11156857
> 
> 赞同：0
> 
> 时间：2012-06-22T13:11:02.270
> 
> 标签：sql-server-2008, tsql, between

我有一个看起来像这样的查询

```
 SELECT * from myTable WHERE Date BETWEEN @Sunday AND @Saturday 
```

我希望这个查询也包括在星期日和星期六发生的元素。我知道我可以将值更改为`Between @Saturday AND @Sunday`但假设我不想更改日期计算算法有没有办法同时包含两个日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:12:51.583

切勿`BETWEEN`用于日期/时间范围查询。如果您想要从周日午夜到周六 23:59:59.9999999 发生的任何事情，使用任何日期/时间数据类型的最安全方法是：

```
DECLARE @Sunday DATE = '20120617';

...
WHERE [Date] >= @Sunday AND [Date] < DATEADD(DAY, 7, @Sunday); 
```

请阅读这两篇文章：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

# .htaccess - htaccess，如何只允许搜索引擎或机器人访问文件

> ID：11156861
> 
> 赞同：0
> 
> 时间：2012-06-22T13:11:30.010
> 
> 标签：.htaccess, mod-rewrite, robots.txt

我有一个名为 links.txt 的站点地图文件，我只想让搜索引擎/机器人访问这个文件。

我怎样才能通过 htaccess 文件做到这一点。

# sql - SQL 空字符串和文本格式

> ID：11156862
> 
> 赞同：0
> 
> 时间：2012-06-22T13:11:35.580
> 
> 标签：sql, text-formatting

我正在尝试使用 sql (MS SQL server 2008) 进行一些文本格式化。我有三个变量，它们要么返回空字符串，要么返回某种文本，它们永远不会为空。我希望以下列方式显示文本：
@Var1='A' @Var2='B' @Var3='C' ==> A, B, C
@Var1='A' @Var2='' @ Var3='C' ==> A, C
@Var1='' @Var2='B' @Var3='C' ==> B, C
@Var1='' @Var2='' @Var3='C' ==> C
。
.
.
@Var1='' @Var2='' @Var3='' ==>
等

这是我所拥有的简化版本...

```
DECLARE @Var1 NVARCHAR(100)
DECLARE @Var2 NVARCHAR(100)
DECLARE @Var3 NVARCHAR(100)
SET @Var1 = 'A'
SET @Var2 = 'B'
SET @Var3 = 'C'
SELECT 
ISNULL(NULLIF(@Var1,''), '') 
    + 
        CASE
            WHEN NULLIF(@Var1,'') IS NOT NULL AND NULLIF(@Var2,'') IS NOT NULL THEN ', ' ELSE '' 
        END 
    +
ISNULL(NULLIF(@Var2,''),'')
    +
        CASE
            WHEN NULLIF(@Var2,'') IS NOT NULL AND NULLIF(@Var3,'') IS NOT NULL THEN ', ' ELSE '' 
        END 
    +
ISNULL(NULLIF(@Var3,''),'') 
```

我觉得我错过了一些重要的细节。让我知道是否需要任何澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:14:48.963

尝试：

```
select  case 
        when str is null then ''
        else left(str, len(str)-1) -- Remove last comma
        end
from    (
        select  case when len(@Var1) > 0 then @Var1 + ', ' else '' end + 
                case when len(@Var2) > 0 then @Var2 + ', ' else '' end + 
                case when len(@Var3) > 0 then @Var3 + ', ' else '' end as str
        ) as SubQueryAlias 
```

或者用一个`reverse`技巧来避免子查询：

```
select  reverse(stuff(reverse(
        case when len(@Var1) > 0 then @Var1 + ', ' else '' end +
        case when len(@Var2) > 0 then @Var2 + ', ' else '' end +
        case when len(@Var3) > 0 then @Var3 + ', ' else '' end
        ), 1, 2, '')); 
```

这里的关键点是 SQL Server 在文本格式化方面不是很擅长 :) 在 C# 等客户端语言中，你的表现会更好。

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/d41d8/2114/0)

# webmatrix - 在 Webmatrix 2.0 中响应一些 json 的简单方法？

> ID：11156868
> 
> 赞同：1
> 
> 时间：2012-06-22T13:11:52.223
> 
> 标签：webmatrix

我正在为 Microsoft Webmatrix 2.0 中的移动设备开发一个简单的 Web 项目。出于测试目的，我只想在我的项目中放置一个 .json 文件并在我的 javascript 代码中使用它。

是否可以在 Webmatrix 中为不同的文件扩展名设置 MIME 类型？我希望我的文件以 application/json 的形式响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:54:39.490

我会回答我自己的问题。我曾经将我的代码放在一个空白项目中，但为了提供具有正确 mime 类型的 json 数据，我必须启动一个启用 Razor 的新项目。然后我添加了一个带有以下代码的 .cshtml 文件：

```
@{

    HttpContext.Current.Response.ContentType = "application/json";
    HttpContext.Current.Response.Write("{\"myCollectionOfObjects\":[{...,...}]}");
} 
```

# spring - org.hibernate.TransientObjectException：给定对象的标识符为空

> ID：11156869
> 
> 赞同：2
> 
> 时间：2012-06-22T13:11:53.883
> 
> 标签：spring, hibernate

更新我的 Modelclass 时出现以下异常

```
18:27:15,203 ERROR [com.sinergia.ea.daoimpl.TypeOfArtifactDaoImpl]  ERROR Exception in updateTypeOfArtifact() : o
        at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.getUpdateId(DefaultSaveOrUpdateEventListener.
        at org.hibernate.event.def.DefaultUpdateEventListener.getUpdateId(DefaultUpdateEventListener.java:46) [:3
        at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventList
        at org.hibernate.event.def.DefaultUpdateEventListener.performSaveOrUpdate(DefaultUpdateEventListener.java
        at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListen
        at org.hibernate.impl.SessionImpl.fireUpdate(SessionImpl.java:564) [:3.2.6.ga]
        at org.hibernate.impl.SessionImpl.update(SessionImpl.java:552) [:3.2.6.ga]
        at org.hibernate.impl.SessionImpl.update(SessionImpl.java:544) [:3.2.6.ga]
        at com.sinergia.ea.daoimpl.TypeOfArtifactDaoImpl.updateTypeOfArtifact(TypeOfArtifactDaoImpl.java:67) [:] 
```

**模型类：**

```
@Entity
@Table(name="TYPE_OF_ARTIFACT")
public class TypeOfArtifactModel implements java.io.Serializable , Identifiable{

    /**
     * 
     */
    private static final long serialVersionUID = 2662289176706818360L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "TYPE_OF_ARTIFACT_SEQ")
    @SequenceGenerator(name = "TYPE_OF_ARTIFACT_SEQ", sequenceName = "TYPE_OF_ARTIFACT_SEQ")
    @Column(name="ID",unique=true, nullable=false)
    private Integer id;

    @Column(name="DESCRIPTION", nullable=true, length=400)
    private String description;

    @Column(name="NAME", nullable=false, length=50)
    private String name;

    @OneToMany(fetch = FetchType.LAZY, targetEntity = AdditionalInfoModel.class, mappedBy = "typeOfArtifactID")
    private Set<AdditionalInfoModel> additionalInfos = new HashSet<AdditionalInfoModel>(0);

    @OneToMany(cascade = CascadeType.ALL)
    @JoinTable(name = "TYPE_ARTIFACT_OPERATE_RELATION", joinColumns = { @JoinColumn(name = "TYPE_OF_ARTIFACT_ID") }, inverseJoinColumns = { @JoinColumn(name = "OPERATE_ARTIFACT_ID") })
    private Set<TypeOfArtifactModel> checkedItems = new HashSet<TypeOfArtifactModel>(0);

    @Column(name="FLAG",length=1)
    boolean editable;

    public TypeOfArtifactModel() {
    } 
```

**DaoImppl 实现：**

```
@Override
    @Transactional(readOnly = true)
    public Boolean updateTypeOfArtifact(@NotNull final TypeOfArtifactModel tipoModel,final Set<AdditionalInfoModel> additionalInfos,final Set<TypeOfArtifactModel> checkedItems) {
        try {
            System.out.println("Dao Impl Name :"+tipoModel.getName());
            System.out.println("Dao Impl Description :"+tipoModel.getDescription());
            System.out.println("Dao Impl CheckedItems :"+tipoModel.getCheckedItems());          

            if(additionalInfos !=null && !(additionalInfos.isEmpty())){             
                for(AdditionalInfoModel item : additionalInfos){
                    getSession().update(item);
                }
                tipoModel.setAdditionalInfos(additionalInfos);
            }
            getSession().update(tipoModel);
            return Boolean.TRUE;

        } catch (Exception e) {
            log.error(" ERROR Exception in updateTypeOfArtifact() ", e);
            return Boolean.FALSE;
        }
    } 
```

只有当我使用 update() 方法时，我才得到上述异常，如果我使用 saveOrUpdate() 没有异常，但是在 saveOrUpdate() 方法中创建了新记录，它没有更新记录，你能告诉我什么是错的在那里面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:23:26.730

您尝试更新实体的方法被注释为`@Transactional(readOnly = true)`. 这是故意的吗？这似乎是错误的。

问题是您已将一个对象传递给 Hibernate，该对象在数据库中没有具有匹配 id 的行。

在`DefaultSaveOrUpdateEventListener.getUpdateId`Hibernate 中，尝试从您正在更新的对象中读取标识符，但发现它为空。

您确定您尝试更新的对象以前已保存吗？@Id 在加载时是否为空？数据库中该实体的 ID 列的值是多少？有什么

# algorithm - 给定一个数字 n，找出在 0...n 范围内有多少个数字为 2 的数字

> ID：11156876
> 
> 赞同：15
> 
> 时间：2012-06-22T13:12:24.163
> 
> 标签：algorithm

是面试题。

> 给定一个数字 n，找出在 0...n 范围内有多少个数字为 2 的数字

例如 ，

> 输入 = 13 输出 = 2（2 和 12）

我给出了通常的 O(n^2) 解决方案，但有没有更好的方法。

是否有任何“技巧”公式可以帮助我立即得到答案

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-22T13:16:56.330

数一下**没有**数字 2 的数字。在小于 10 ^k的数字中，正好有 9 ^k个。然后剩下的就是处理从 10 ^k到的数字`n`，其中

```
10^k <= n < 10^(k+1) 
```

您可以通过单独处理第一个数字（必须区分案例 2 和其他案例），然后是前 2 个数字等来做到这一点。

例如，对于`n = 2345`，我们发现`9^3 = 729`在 1000 以下有没有数字 2 的数字。在 1000 到 1999 的范围内又有 729 个这样的数字。然后在 2000 到 2345 的范围内，没有，总共有 1458 个，因此包含数字 2 的数字是

```
2345 - 1458 = 887 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-10T07:14:25.767

参数 'digit' 是我们要计数的那个，而 arg 'number' 是我们要计数的位置。例如：如果我们要计算 '1' 的出现次数，从 0 到 12，调用 digit=1，number=12 的函数，它会返回 '1' 的出现次数。

```
int countOccurrences(int digit, int number)
{
    int counter = 0;
    for(int i=1; i<number; i++)
    {
        int j = i;
        while(j > 0)
        {
            if(j%10 == digit)
                counter++;
            j /= 10;
        }
    }
    return counter;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T07:35:07.263

给定带有数字 ABCDEF 的数字，您可以计算范围内“2”的数量`[0,F], [0,E9], [0,D99], [0,C999], [0,B9999]`并将`[0,A99999]`它们相加。

那么对于范围`[0, X9999...999]`，顶部的数字`T = X9999...999`可以写为`(X+1) * 10<sup>nines</sup> -1`。

该范围内“2”的数量为：

```
((X >= 2 ? 1/(X + 1)) : 0) + nines/10 ) * (T + 1); 
```

即：如果`X >= 2`，则在 9+1 位置具有 '2' 的数字的比例是 ，那么在该位置`1/(X+1)`总共有`(T+1)/(X+1)`'2'。如果`X < 2`，则 [0..T] 上的数字在该位置没有“2”。

对于其他数字位置，很容易看出，在每个数字位置，`1/10`数字都有一个'2'，所以`(T+1)/10`位置0有' 2' `(T+1)/10`，位置1有'2'，等等。总共，`(T+1) * nines / 10`。

该解决方案的复杂度为 O(logN)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T00:16:01.460

这就是我编写初稿（Python 代码）的方式

```
def count2(n) :
    return [p for p in range(n+1) if '2' in str(p)] 
```

这将返回一个包含编号的列表。

就性能而言，它并没有那么糟糕，对于 n=10,000,000，平均迭代大约需要 5.5 秒

# java - 移动 TextView 框使我的 android 应用程序崩溃

> ID：11156878
> 
> 赞同：0
> 
> 时间：2012-06-22T13:12:37.533
> 
> 标签：java, android, crash, textview

我已经遇到过几次这个问题，但我不知道为什么会发生这种情况。发生的事情是在我的 TextView 框周围移动一些东西后，最终落在了 EditText 框的顶部，这不好。所以我去把 TextView 框移到屏幕底部。当我这样做时，当我尝试访问存钱罐时，应用程序会崩溃。但是，如果我再次将 TextView 框移到顶部，它就可以正常工作了。我真的不明白。无论如何，这是我得到的错误

```
06-22 09:06:41.928: E/AndroidRuntime(10958): java.lang.RuntimeException: Unable to
 start activity ComponentInfo{net.finalexam/net.finalexam.Piggy}: 
 java.lang.ClassCastException: android.widget.RadioButton 
```

这是小猪的 xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/piggy" >

    <EditText
        android:id="@+id/txtQuarters"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="27dp"
        android:ems="10"
        android:hint="Number of quarters"
        android:inputType="number" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/txtDimes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtQuarters"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Number of dimes"
        android:inputType="number" />

    <EditText
        android:id="@+id/txtNickles"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtDimes"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Number of nickles"
        android:inputType="number" />

    <EditText
        android:id="@+id/txtPennies"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtNickles"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Number of pennies"
        android:inputType="number" />

    <EditText
        android:id="@+id/txtDollars"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtPennies"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Number of Dollars"
        android:inputType="number" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtDollars"
        android:layout_centerHorizontal="true" >

        <RadioButton
            android:id="@+id/radAdd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="Add" />

        <RadioButton
            android:id="@+id/radSubtract"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Subtract" />
    </RadioGroup>

    <Button
        android:id="@+id/btnCalculate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/radioGroup1"
        android:layout_centerHorizontal="true"
        android:text="Calculate" />

    <TextView
        android:id="@+id/txtResults"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnCalculate"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="27dp"
        android:textSize="40sp" android:textStyle="bold" android:textColor="#000000"/>

</RelativeLayout> 
```

这是 Piggy Java 文件

```
package net.finalexam;

import java.text.DecimalFormat;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.TextView;
import android.widget.Toast;

public class Piggy extends Activity
{
  double quartersValue = .25;
  double dimesValue = .10;
  double nicklesValue = .05;
  double penniesValue = .01;
  double dollarsValue = 1;
  double quartersMoney;
  double dollarsMoney;
  double dimesMoney;
  double nicklesMoney;
  double penniesMoney;
  double totalMoney;
  double newTotalMoney;
  double oldTotalMoney = 0;
  int numberOfQuarters;
  int numberOfDimes;
  int numberOfNickles;
  int numberOfPennies;
  int numberOfDollars;

  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.piggybank);
    final EditText quarters = (EditText) findViewById(R.id.txtQuarters);
    final EditText dimes = (EditText) findViewById(R.id.txtDimes);
    final EditText nickles = (EditText) findViewById(R.id.txtNickles);
    final EditText pennies = (EditText) findViewById(R.id.txtPennies);
    final EditText dollars = (EditText) findViewById(R.id.txtDollars);
    Button calculate = (Button) findViewById(R.id.btnCalculate);
    final TextView results = ((TextView) findViewById(R.id.txtResults));
    final RadioButton add = (RadioButton) findViewById(R.id.radAdd);
    final RadioButton subtract = (RadioButton) findViewById(R.id.radSubtract);

    calculate.setOnClickListener(new OnClickListener()
    {

      public void onClick(View v)
      {
        if (quarters.getText().toString().equals(""))
        {
          numberOfQuarters = 0;
        }
        else
        {
          numberOfQuarters = Integer.parseInt(quarters.getText().toString());
        }

        if (dimes.getText().toString().equals(""))
        {
          numberOfDimes = 0;
        }
        else
        {
          numberOfDimes = Integer.parseInt(dimes.getText().toString());
        }

        if (nickles.getText().toString().equals(""))
        {
          numberOfNickles = 0;
        }
        else
        {
          numberOfNickles = Integer.parseInt(nickles.getText().toString());
        }

        if (pennies.getText().toString().equals(""))
        {
          numberOfPennies = 0;
        }
        else
        {
          numberOfPennies = Integer.parseInt(pennies.getText().toString());
        }

        if (dollars.getText().toString().equals(""))
        {
          numberOfDollars = 0;
        }
        else
        {
          numberOfDollars = Integer.parseInt(dollars.getText().toString());
        }
        quartersMoney = numberOfQuarters * quartersValue;
        dimesMoney = numberOfDimes * dimesValue;
        nicklesMoney = numberOfNickles * nicklesValue;
        penniesMoney = numberOfPennies * penniesValue;
        dollarsMoney = numberOfDollars;
        totalMoney = quartersMoney + dimesMoney + nicklesMoney + penniesMoney + dollarsMoney;
        DecimalFormat currency = new DecimalFormat("$###,###.##");

        if (add.isChecked())
        {
          if (totalMoney > 0)
          {
            newTotalMoney = oldTotalMoney + totalMoney;
            oldTotalMoney = newTotalMoney;
            results.setText(currency.format(newTotalMoney));
          }
          else
          {
            Toast.makeText(Piggy.this, "You need to do more chores!!", Toast.LENGTH_LONG).show();

          }
        }
        if (subtract.isChecked())
        {
          newTotalMoney = oldTotalMoney - totalMoney;
        }
        if (newTotalMoney > 0)
        {

          oldTotalMoney = newTotalMoney;
          results.setText(currency.format(newTotalMoney));
        }
        else
        {
          Toast.makeText(Piggy.this, "Save more money kido!!", Toast.LENGTH_LONG).show();
        };
      }
    });
  }

} 
```

我一直在寻找答案，但它们似乎都是略有不同的情况。有任何想法吗？谢谢。就像我说的那样，如果 TextView 框与四分之一 EditText 框重叠，这很好用。

编辑 1 这是存钱罐前的屏幕

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <ImageView
            android:id="@+id/ic_launcher_money"
            android:layout_width="100px"
            android:layout_height="100px"
            android:layout_marginLeft="4px"
            android:layout_marginRight="10px"
            android:layout_marginTop="2px"
            android:src="@drawable/ic_launcher_money"></ImageView>

    <TextView
        android:id="@+id/bankses"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/bankses"
        android:textSize="25sp">

    </TextView>
</LinearLayout> 
```

主.java

```
package net.finalexam;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Main extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        String[] banks ={"Piggy Bank","Adult Bank"};
        setListAdapter(new ArrayAdapter<String>(this,R.layout.main, R.id.bankses, banks));
    }
    protected void onListItemClick(ListView l, View v, int position, long id){
        switch(position){
        case 0:
            startActivity(new Intent(Main.this,Piggy.class));
            break;
        case 1:
            startActivity(new Intent(Main.this,Adultbank.class));
            break;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:40:13.753

尝试在 Eclipse 上清理您的项目。它通常可以解决此类问题。

# go - 如何在 Go 中定义自己的类型转换器？

> ID：11156885
> 
> 赞同：4
> 
> 时间：2012-06-22T13:12:52.487
> 
> 标签：go

我正在定义一种类型。我注意到 Go 有一个被调用的类型`uint8`和一个被调用的函数`uint8`来创建一个`uint8`值。

但是当我尝试为自己做这件事时：

```
12:    type myType uint32

14:    func myType(buffer []byte) (result myType) { ... } 
```

我得到错误

```
./thing.go:14: myType redeclared in this block
    previous declaration at ./thing.go:12 
```

如果我将其更改为`func newMyType`可行，但感觉就像我是二等公民。我可以编写与类型类型具有相同标识的类型构造函数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:20:23.347

`uint8()`不是函数也不是构造函数，而是[类型转换](http://golang.org/doc/effective_go.html#conversions)。

对于原始类型（或其他明显的转换，但我不知道确切的规律），您不需要创建构造函数。

你可以简单地这样做：

```
type myType uint32
v := myType(33) 
```

如果您在创建价值时有操作要做，则应使用“make”函数：

```
package main

import (
    "fmt"
    "reflect"
)

type myType uint32

func makeMyType(buffer []byte) (result myType) {
    result = myType(buffer[0]+buffer[1])
    return
}

func main() {
    b := []byte{7, 8, 1}
    c := makeMyType(b)
    fmt.Printf("%+v\n", b)
    fmt.Println("type of b :", reflect.TypeOf(b))
    fmt.Printf("%+v\n", c)
    fmt.Println("type of c :", reflect.TypeOf(c))
} 
```

命名函数`newMyType`只应在返回指针时使用。

# asp.net - ASP.NET MVC 是发布模型 ID 的更好方法吗？

> ID：11156889
> 
> 赞同：8
> 
> 时间：2012-06-22T13:13:00.743
> 
> 标签：asp.net, asp.net-mvc, post

我有一个绑定到视图的 ViewModel：

```
ProductViewModel model = Mapper.Map<Product, ProductViewModel>(product);
return View(model); 
```

视图（和视图模型）用于编辑，`Product`因此`ProductViewModel`具有与数据库中的 ID 对应的 ID 属性。

并将 ID 发布回控制器，我在视图上的表单中执行此操作：

```
@Html.HiddenFor(x => x.Id) 
```

*即使这可行*- 我想知道是否有更好的方法将 ID 发布回控制器？路线值可能吗？或者这是一个相当标准的模式/方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T13:27:42.223

如果我有一个在我的路由中包含 id 的 GET 操作：`/Products/Edit/1`那么我通常将其保留为路由值：

```
[HttpPost]
public ActionResult Edit(int id, EditProductViewModel model) 
```

不过，这纯粹是我的偏好。没有正确或错误的方法来做到这一点。

这个方法的好处是你不再需要使用 Hidden 值来传递它，因为它是 URL 的一部分。实际上，如果您确实使用 Hidden 值传递它，我相信它将被忽略。

或者，由于 id 是路由的一部分，您甚至不需要单独的参数：

```
[HttpPost]
public ActionResult Edit(EditProductViewModel model)

public class EditProductViewModel 
{
    public int Id { get; set; }
} 
```

同样，这纯粹是一种偏好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:39:11.833

我认为答案是，这取决于。

您的*整个*对象是否正在被编辑和发回？如果是这样，我建议将 ID 作为模型的一部分发回：

```
[HttpPost]
public ActionResult Edit(EditProductViewModel model) 
```

我认为这是一件完全有效的事情。不过要小心。如果正在编辑的资源是受保护的资源，请确保验证用户具有正确的权限。

如果是部分编辑，也许只是通过 Ajax 调用编辑评论，我可能更想做：

```
[HttpPost]
public ActionResult Edit(int id, string comment) 
```

在那种情况下创建模型时，我会认为这是矫枉过正......特权问题仍然适用：）

说了这么多，我自己不是专家:)

顺便说一句……我不认为隐藏字段有什么问题，我一直在使用它。然而，它是一个 ajax 调用，可能不需要它，因为它是您发布 ajax 调用的一部分。

# android - Android后台网络服务

> ID：11156890
> 
> 赞同：0
> 
> 时间：2012-06-22T13:13:01.297
> 
> 标签：android, service, xmpp

我正在开发一个 XMPP 聊天客户端。我正在使用后台服务连接到网络 XMPP 服务器。但是当我启动服务器时，它会在 UI 线程上给出网络异常。当我将 Android SDK 降级到 8 时，它会给出 ANR 异常

我尝试从 SPlash 屏幕的 onCreate 方法启动服务。

```
 Runnable runnable = new Runnable() {
            @Override
            public void run() {
                Intent serviceIntent=new Intent();
                serviceIntent.setClass(getApplicationContext(), SeetiService.class);
                startService(serviceIntent);

            }
        };
        new Thread(runnable).start();
        Thread serviceThread=new Thread()
        {
            public void run()
            {
                Intent serviceIntent=new Intent();
                serviceIntent.setClass(getApplicationContext(), SeetiService.class);
                startService(serviceIntent);

            }
        };
        serviceThread.start(); 
```

但我仍然在主 UI 线程上获得相同的网络。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:20:55.323

看来您正在尝试同时启动两个服务。AFAIK 您无法使用上面的代码启动它。但我将说明您为什么面临 ANR。

```
Intent serviceIntent=new Intent();
serviceIntent.setClass(getApplicationContext(), SeetiService.class);
startService(serviceIntent); 
```

上面的代码应该在 UI 线程上运行。如果你想从另一个线程运行它，你必须将它嵌入到 runOnUiThread。所以你的块应该看起来像。

```
Runnable runnable = new Runnable()
{@Override
  public void run()
  {

    runOnUiThread(new Runnable()
    {
      public void run()
      {
        Intent serviceIntent = new Intent();
        serviceIntent.setClass(getApplicationContext(), SeetiService.class);
        startService(serviceIntent);
      }
    });

  }
};
new Thread(runnable).start(); 
```

# android - 应用程序在恢复时在android中一个小时后崩溃

> ID：11156892
> 
> 赞同：0
> 
> 时间：2012-06-22T13:13:09.350
> 
> 标签：android

当我将其发送到后台半小时然后从家里启动时，我的 android 应用程序崩溃了。

logcat 信息如下。

```
06-20 13:13:39.839: E/AndroidRuntime(23778):    ... 20 more
06-20 13:13:39.839: E/AndroidRuntime(23778): Caused by: java.lang.NullPointerException
06-20 13:13:39.839: E/AndroidRuntime(23778):    at com.globalnest.CaptureActivity.onCreate(CaptureActivity.java:116)
06-20 13:13:39.839: E/AndroidRuntime(23778):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-20 13:13:39.839: E/AndroidRuntime(23778):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
06-20 13:13:39.839: E/AndroidRuntime(23778):    ... 27 more
06-20 13:13:39.849: W/ActivityManager(255):   Force finishing activity com.globalnest/.AdminTabHost
06-20 13:13:39.869: D/dalvikvm(23778): GC_CONCURRENT freed 204K, 48% free 2898K/5511K, external 1040K/1552K, paused 3ms+14ms
06-20 13:13:40.359: W/ActivityManager(255): Activity pause timeout for HistoryRecord{2b62c908 com.globalnest/.AdminTabHost}
06-20 13:13:45.409: D/lights(255): set_light_buttons: brightness=0
06-20 13:13:46.239: D/dalvikvm(22012): GC_CONCURRENT freed 465K, 49% free 3008K/5895K, external 743K/1036K, paused 9ms+2ms
06-20 13:13:49.409: W/ActivityManager(255): Launch timeout has expired, giving up wake lock!
06-20 13:13:49.669: W/ActivityManager(255): Activity idle timeout for HistoryRecord{2b62c908 com.globalnest/.AdminTabHost}
06-20 13:13:50.389: W/ActivityManager(255): Activity idle timeout for HistoryRecord{2b59f888 com.globalnest/.Main}
06-20 13:13:55.469: D/dalvikvm(22012): GC_EXPLICIT freed 138K, 52% free 2869K/5895K, external 743K/1036K, paused 80ms
06-20 13:13:59.679: W/ActivityManager(255): Activity destroy timeout for HistoryRecord{2b62c908 com.globalnest/.AdminTabHost}
06-20 13:14:00.139: D/dalvikvm(671): GC_EXPLICIT freed 4K, 49% free 2782K/5379K, external 1404K/1557K, paused 85ms
06-20 13:14:00.199: D/dalvikvm(671): GC_EXPLICIT freed 3K, 49% free 2783K/5379K, external 1404K/1557K, paused 25ms
06-20 13:14:00.199: W/CursorWrapperInner(671): Cursor finalized without prior close()
06-20 13:14:02.419: D/lights(255): set_light_backlight: brightness=20
06-20 13:14:09.419: D/lights(255): set_light_backlight: brightness=0
06-20 13:14:09.419: I/power(255): *** set_screen_state 0
06-20 13:14:09.419: D/DASH - select(255): sensors_select_callback: select canceled by request
06-20 13:14:09.419: D/DASH - select(255): sensors_select_callback: select canceled by request
06-20 13:14:09.429: D/kernel(126): [50267.656494] request_suspend_state: sleep (0->3) at 50264074243382 (2012-06-20 07:44:09.423339839 UTC)
06-20 13:14:09.429: D/kernel(126): [50267.656616] as3676 0-0040: as3676_early_suspend
06-20 13:14:09.429: D/kernel(126): [50267.659759] cyttsp-spi spi0.0: cyttsp_suspend: Enter
06-20 13:14:09.449: D/SurfaceFlinger(255): About to give-up screen, flinger = 0x91bf8
06-20 13:14:09.919: D/kernel(126): [50268.142242] active wake lock PowerManagerService
06-20 13:14:09.919: D/kernel(126): [50268.142272] active wake lock bq24185_watchdog_lock
06-20 13:14:09.919: D/kernel(126): [50268.142272] active wake lock usb_bus_active
06-20 13:14:09.919: D/kernel(126): [50268.142272] active wake lock msm_otg
06-20 13:14:09.919: D/kernel(126): [50268.142303] wake lock msm_serial_hs_rx, expired
06-20 13:14:09.919: D/kernel(126): [50268.142303] wake lock wifi_rx_wake, expired
06-20 13:14:09.939: W/ActivityManager(255): Activity pause timeout for HistoryRecord{2b59f888 com.globalnest/.Main}
06-20 13:14:14.489: I/ActivityManager(255): Start proc com.sonyericsson.lockscreen.notifications for broadcast com.sonyericsson.lockscreen.notifications.facebook/.LockscreenReceiver: pid=23791 uid=10058 gids={3003}
06-20 13:14:14.579: I/ActivityThread(23791): Pub com.sonyericsson.lockscreen.notifications: com.sonyericsson.lockscreen.notifications.provider.NotificationProvider
06-20 13:14:14.759: D/dalvikvm(255): GC_CONCURRENT freed 499K, 39% free 8315K/13447K, external 2950K/3252K, paused 3ms+8ms
06-20 13:14:15.679: I/ActivityManager(255): Process com.sonyericsson.android.datamonitor (pid 22012) has died.
06-20 13:14:15.689: W/kernel(126): [50273.912445] select 21040 (com.aricent.mtp), adj 10, size 3198, to kill
06-20 13:14:15.689: W/kernel(126): [50273.912506] select 22012 (oid.datamonitor), adj 10, size 3567, to kill 
```

请任何人帮助我...

欺负你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:15:07.650

```
06-20 13:13:39.839: E/AndroidRuntime(23778): Caused by: java.lang.NullPointerException
06-20 13:13:39.839: E/AndroidRuntime(23778):    at com.globalnest.CaptureActivity.onCreate(CaptureActivity.java:116) 
```

有你的线索。查看 CaptureActivity.java 的第 116 行并找出可能出现的意外情况`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:36:14.500

如果您的进程在后台运行半小时，您可能会认为您的进程已被 Android 操作系统杀死。因此，当您再次启动应用程序时，Android 操作系统将重新创建进程并**仅重新启动堆栈顶部的 Activity**。

如果堆栈顶部的 Activity 依赖于其他任何东西（之前可能已经设置了其他 Activity），那么您的应用程序将崩溃。这是因为**没有重新创建**整个活动堆栈。

考虑到这一点，请查看在这种情况下可能发生的情况。

# mysql - MySQL：每天每条记录的分组结果

> ID：11156893
> 
> 赞同：0
> 
> 时间：2012-06-22T13:13:11.937
> 
> 标签：mysql, join, group-by, average

我有一个包含两列时间和登录的表格，显示用户在一天中何时发送呼叫。

在每个用户的基础上，我需要找到最大、最小和平均会话长度，其中会话长度计算为任何一天的第一次通话和最后一次通话之间的时间（以分钟为单位）。

# 桌子：

```
Time                Login
2012-05-29 20:01:26 A
2012-05-29 20:01:40 A
2012-05-29 20:02:27 A
2012-05-29 20:58:46 A
2012-05-29 20:59:50 A
2012-05-29 21:00:12 A
2012-05-29 21:00:36 A
2012-05-30 21:28:28 A
2012-05-30 21:29:08 A
2012-05-30 21:29:13 A
2012-05-30 21:29:25 A
2012-04-06 10:25:24 A
2012-04-06 10:25:53 A
2012-04-06 10:26:35 A
2012-04-27 12:05:45 A
2012-04-27 12:06:06 A 
```

所需的输出看起来像这样：

```
MaxSession Login
59         A 
```

如上所述，MinSession 和 AverageSession 需要相同的输出。

我完全被困了几个小时，真的不知道如何完成这项工作。

我所取得的是每次登录获得唯一的活跃天数。不过，我只是不知道如何实现接下来的步骤，那就是：

*   每天每次登录获得第一个条目
*   每天每次登录获取最后一个条目
*   计算每次登录的最后一个条目和第一个条目之间的分钟差，作为 SessionLength
*   选择每次登录的最大、最小和平均 SessionLenght

我将非常感谢任何类型的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:25:03.107

试试这个

按天分组

```
Select Login,Date(Time) As LoginDay,Max(Time) As LastLogin,Min(Time) As FirstLogin,Count(*) As Logins,

From LoginsTable
Group By Login,Date(Time)
Order By LoginDay,Login 
```

请将“时间”等列括在“”中

最大、最小和平均会话

```
 Select Login,Max(SessionMinutes) As MaxSessoin,Min(SessionMinutes) As MinSession,
    Avg(SessionMinutes) From
    (
        Select Login,
        LoginDay,LastLogin,FirstLogin,TotalLogins,Hour(DateDiff(LasTLogin-FirsTLogin))*60 + Minute(DateDiff(LasTLogin-FirsTLogin)) As SessionMinutes
        From
        (
            Select Login,Date(Time) As LoginDay,Max(Time) As LastLogin,Min(Time) As FirstLogin,Count(*) As Logins,
            From LoginsTable
            Group By Login,Date(Time)
        ) As Temp
    ) As Temp1 
```

目前在计算分钟时忽略秒。

# excel - 如何使用当前文件名将文件另存为 csv

> ID：11156894
> 
> 赞同：0
> 
> 时间：2012-06-22T13:13:15.000
> 
> 标签：excel, vba

我创建了一个宏来转换我的数据的日期格式，然后将文件保存为 csv 格式（文件格式最初是 Excel）。我需要在多个文件上运行这个宏，所以需要根据当前文件名更改保存名称。我有以下代码，但它不会工作：

```
Sub Conversion()
'
' Conversion Macro
'
' Keyboard Shortcut: Ctrl+Shift+C
'
Dim OutputFile As String

    Columns("F:G").Select
    Selection.NumberFormat = "m/d/yyyy"
    Range("A1").Select
    ChDir "S:\BCC\MDT Teams\Yale\AXA\Orbit Implementation\TRS\DTO Access Exports"
    ActiveWorkbook.SaveAs Filename:= _
        "S:\BCC\MDT Teams\Yale\AXA\Orbit Implementation\TRS\DTO Access Exports\DTO_" + ActiveWorkbook.FullName + ".csv", _
         FileFormat:=xlCSV, CreateBackup:=False
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:23:53.127

`ActiveWorkbook.FullName`包括完整路径。
`ActiveWorkbook.Name`只有文件名

请注意，两者的文件扩展名仍然存在，因此使用`replace(activeworkbook.Name,".xlsm","")` *（更改扩展名以满足您的需要）*应该可以解决该问题

# jakarta-ee - System.setProperty() 的范围

> ID：11156900
> 
> 赞同：1
> 
> 时间：2012-06-22T13:13:50.333
> 
> 标签：jakarta-ee, properties, scope, catalina

System.setProperty() 的范围是什么？如果我在 Java EE 应用程序的一个类中设置它，那么所有其他类和使用 System.getProperty() 或使用其他访问属性的方式的其他组件是否能够查看已设置的值？

例如，我正在使用：-

```
System.setProperty("catalina.home", "C:"); 
```

稍后，其他一些 xml 文件在 CLASSPATH 中的属性文件 catalina.home 中查找上下文。但是，这些文件找不到属性文件。所以我想知道我是否做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:24:51.063

它具有应用程序范围的范围，但它在内存中。更具体地说，它的范围是运行时。然而，一旦应用程序结束，它就消失了，也就是说，对系统属性所做的更改不会被持久化。

# java - JRuby PermGen。记不清。堆空间内存泄漏

> ID：11156901
> 
> 赞同：0
> 
> 时间：2012-06-22T13:13:54.423
> 
> 标签：java, ruby, jruby

我们正在做一个大项目。在我们的开发过程中，我们遇到了一个与 Heap 和 PermGen Space 有关的大问题。这是我们的错误消息：当前错误：java.lang.OutOfMemoryError: PermGen space。

```
System.out.println("Initialazing..");
//Spring applicaton context
WebApplicationContext wac = (WebApplicationContext) AppContext.getApplicationContext();
// prepare path to internal ruby 
String scriptsPath = wac.getServletContext().getRealPath(RUBY_PATH);
String jrubyHome = wac.getServletContext().getRealPath("WEB-INF" + File.separator + "jruby");
// Initializing Scripting container
ScriptingContainer container = new ScriptingContainer(isShared ? LocalContextScope.SINGLETHREAD
                : LocalContextScope.THREADSAFE, LocalVariableBehavior.PERSISTENT);
// Configuring scriptingcontainer to avoid memory leaks
container.setCompileMode(RubyInstanceConfig.CompileMode.OFF);
System.setProperty("org.jruby.embed.compilemode", "OFF");
System.setProperty("jruby.compile.mode", "OFF");
// Setup ruby version
container.setCompatVersion(CompatVersion.RUBY1_9);
// Set jruby home
container.getProvider().getRubyInstanceConfig().setJRubyHome(jrubyHome);
List<String> loadPaths = new ArrayList<String>();
// load path
loadPaths.add(scriptsPath);
container.getProvider().setLoadPaths(loadPaths);
// ruby dispatcher initializing and run in simple mood
String fileName = scriptsPath + File.separator + "dispatcher_fake.rb";
// run scriplet
container.runScriptlet(PathType.ABSOLUTE, fileName);
// terminate container to cleanup memory without any effects
container.terminate();
container=null; 
```

…</p>

说明：以上代码创建和配置脚本容器。此方法在单独的线程中运行。我们使用 4 个 ruby​​ 线程。如果我们使用相同的脚本容器并调用内部脚本（在 java 线程中调用 internall 方法），我们会遇到 ruby​​ 变量的问题，因为它是可见的跨线程。

JRuby 的主要问题是：不断增长的堆内存空间和 perm gen 内存空间。我们不能在 ruby​​ 代码中调用任何系统的垃圾回收。

您可以在下面找到我们 scriptlet 的简单部分：Ruby：

```
ENV['GEM_PATH'] = File.expand_path('../../jruby/1.9', __FILE__)
ENV['GEM_HOME'] = File.expand_path('../../jruby/1.9', __FILE__)
ENV['BUNDLE_BIN_PATH'] = File.expand_path('../../jruby/1.9/gems/bundler-1.0.18/bin/bundle', __FILE__)

require 'java'
require 'rubygems'
require "bundler/setup"
require 'yaml'
require 'mechanize'
require 'spreadsheet'
require 'json'
require 'rest-client'
require 'active_support/all'
require 'awesome_print'
require 'csv'
require 'builder'
require 'soap/wsdlDriver' rescue nil
ROOT_DIR = File.dirname(__FILE__)
require File.join(ROOT_DIR, "base", "xsi.rb")

import org.jsoup.Jsoup
import org.jsoup.nodes.Document
import org.jsoup.nodes.Element

module JavaListing
  include_package "com.util.listing"
end

class A
  include JavaListing
  def run
    1000.times do |index|
      puts "iterating #{index}"
      prop = JavaListing::Property.new
      prop.proNo = 111
      prop.remoteID = "1111"
      prop.ownerID = "1111"
      prop.advertiserID = "1111"
      prop.title = "Atite"
      prop.summary = "Asummury"
      prop.description = "Adescription"
      # prop.images << JavaListing::Image.new("111", "Acaption")
      prop.lat = 12.23
      prop.lng = 13.21
      #prop.address = JavaListing::Address.new("Acity", "Acountry")
      prop.location = "Alocation"
      prop.policy = JavaListing::Policy.new("AcheckinAt", "AcheckoutAt")
      prop.surfaceArea = "Asurfscearea"
      prop.notes[index] = JavaListing::Note.new("Atitle", "Atext")
      prop.order = "Aorder"
      prop.map = JavaListing::Map.new(true, 14)
      prop.units[index] = JavaListing::Unit.new("Aproptype", 2)
      obj = Nokogiri::XML "<root><elements><element>Application Error  #{index}          </element></elements></root>"

    end
  end
end

A.new.run 
```

与其他类型的 scriptlet 容器相同的 perm gen：

> 使用 JSR223 创建属性

ScripHelperBase.java

```
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine engine = manager.getEngineByName("jruby");
Reader reader = null;
String fileName = scriptsPath + File.separator + "dispatcher_java.rb";
try {
    reader = new FileReader(fileName);
} catch (FileNotFoundException ex) {
    Logger.getLogger(ScriptHelperBase.class.getName()).log(Level.SEVERE, null, ex);
}
engine.eval(reader); 
```

解决方法

1.  项目清单

2.  增加 PermGen 空间 PermGen 空间增加到 4Gb。很快也满了。

> 使用 BSF 创建属性

```
String fileName = scriptsPath + File.separator + "dispatcher_fake_ruby.rb";
String jrubyhome = "WEB-INF" + File.separator + "jruby";

BSFManager.registerScriptingEngine("jruby", "org.jruby.embed.bsf.JRubyEngine", new String[]{"rb"});
BSFManager manager = new BSFManager();
manager.setClassPath(jrubyhome);

try {
    manager.exec("jruby", fileName, 0, 0, PathType.ABSOLUTE);
} catch (BSFException ex) {
    Logger.getLogger(ScriptHelperBase.class.getName()).log(Level.SEVERE, null, ex);
} 
```

结论：这意味着仅仅增加可用空间并不能解决这个热点问题。

上述方法不允许将所需的内存清除为原始状态。这意味着每个额外的脚本运行仍然会增加填充的 PermGen 空间。

> 使用 CompileMode=OFF 运行系统

```
container.setCompileMode(RubyInstanceConfig.CompileMode.OFF);
System.setProperty("org.jruby.embed.compilemode", "OFF");
System.setProperty("jruby.compile.mode", "OFF"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:35:25.437

JRuby 为您正在使用的本机 Java 类创建 Ruby 代理 - 它们是在运行时创建的新类，默认情况下 JVM 将它们永久保存在内存中。

[这](https://stackoverflow.com/a/3334954/1155892)是解决方案。

# linux - 为什么 QProcessEnviroment 返回一个空的 QStringList？

> ID：11156905
> 
> 赞同：1
> 
> 时间：2012-06-22T13:14:21.680
> 
> 标签：linux, qt, unix, environment-variables

我使用 Ubuntu 12.04。

代码：

```
#include <QApplication>
#include <QDebug>

int main(int argc, char* argv[]){
    QApplication app(argc, argv);

    QProcessEnvironment environment;
    qDebug() << environment.toStringList();

    return app.exec();
} 
```

输出：

```
() 
```

`env`命令返回一个非空的环境变量列表。

如何解决这个问题呢？怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:21:49.177

您应该调用`QProcessEnvironment::systemEnvironment()`以获取调用进程的环境。现在你只是在创建一个空的环境。请参阅[Qt 文档](http://qt-project.org/doc/qt-4.8/qprocessenvironment.html#systemEnvironment)。

# liferay - 从 Liferay 5.2.3 CE 升级后，Liferay 6.0.6 CE 登录最多需要 25 秒才能登录

> ID：11156909
> 
> 赞同：1
> 
> 时间：2012-06-22T13:14:40.720
> 
> 标签：liferay, liferay-6

旧设置（Liferay 5.2.3）登录时间约为 3-5 秒，但对于 Liferay 6.0.0 CE，它需要大约 20 秒的时间。

我正在使用 portal-ext.properties 中的以下属性来升级我的门户：

```
permissions.user.check.algorithm=5
image.hook.impl=com.liferay.portal.image.DatabaseHook 
```

升级后，我通过使用控制面板中的数据迁移选项卡将旧权限转换为新算法，并在 portal-ext.properties 中使用以下属性重新启动它：

```
permissions.user.check.algorithm=6
image.hook.impl=com.liferay.portal.image.DatabaseHook 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T03:35:02.647

我们在从 5.2.X 升级到 Liferay 6 时遇到了类似的问题，在我们的例子中，问题是我们在升级中更改了权限算法，在版本 6 中，有一个新的权限算法可用。

如果您使用权限算法 5 运行 Liferay 6，您的登录过程会很慢。

# linux - 补丁在什么情况下无法应用？

> ID：11156913
> 
> 赞同：4
> 
> 时间：2012-06-22T13:14:54.513
> 
> 标签：linux, git, patch

`git`在由（即统一差异格式）产生和应用的补丁的上下文中......

干净地应用补丁需要什么？上下文是否必须完全匹配？如果缺少或添加了一行上下文会发生什么？它是否必须在完全相同的行号处匹配，或者`git`如果内容发生了一些变化，是否在文件中看起来很近？

当我搜索时，谷歌对此几乎没有什么可说的，手册也没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:41:40.757

这是 的信息`patch`，但 git 的行为类似：

删除的行（前面有`-`）必须完全匹配。上下文不必完全匹配；如果它不匹配，这将被报告为“fuzz”；默认情况下，外部 2 行上下文不必匹配，但内部行（紧邻更改）匹配。

更改（“hunks”）可以在文件中上下移动，但如果它们的顺序不同，补丁将无法应用。

# git - 如何在 Visual Studio 环境中与我的合作伙伴协作代码？

> ID：11156920
> 
> 赞同：1
> 
> 时间：2012-06-22T13:15:08.600
> 
> 标签：git, svn, tortoisesvn

我和我的朋友想同时为我们的项目一起编写代码。我们在 Visual Studio 2010 环境中开发。

我知道我需要一个叫做`SVN client`SVNTortoise 的东西，也许`Git`.. 我观看并阅读了一些关于如何安装它的指南，但我仍然不知道它是如何组合在一起的 .. 我怎么能`commit`和`update`？

我很想就我需要什么、我该怎么做以及它的成本有任何意见

（一些细节：我们将有大约 6 个月的开发时间，我们确实需要与一些谷歌 API 集成，所以我不知道是否可以在我的本地驱动器上安装它..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:26:58.803

您需要一个源代码管理 (SCM) 系统。

有很多可用的。颠覆是一种选择。Git 是另一个。Mercurial是另一个。Git 和 Mercurial 的相似之处在于它们是分布式的。颠覆是中心化的。每个模型都有优点和缺点。

您提到的 TortoiseSVN 等工具只是一种与 Subversion 交互的图形方式，而不是在命令行。还有 TortoiseGit 和 Visual Studio 插件，可让您在 Visual Studio 中执行此操作。

很明显你没有这方面的经验。这不是你不需要学习就可以跳进去的东西。如果你不明白你在用这些工具做什么，你只会感到沮丧，并且可能会因为使用不当而丢失代码。此外，设置您自己的共享服务器并不是一项小任务。您可能要考虑使用 github、source forge 等。

您需要阅读 git 并确定它是否适合您。然后做一些关于 Subversion 的阅读作为比较，因为它是集中式的，而不是 git 的分布式性质。

我会建议你学习 git - 慢慢来。您不仅将学习分布式工具，还将学习最流行的工具，拥有最好的社区支持和最积极的开发。但是，我当然不会假装它不需要学习。如果您以前从未使用过 SCM，所涉及的概念可能会非常混乱。观看所有可以阅读的“git 基础”教程，并阅读所有可以阅读的介绍性材料。特别要参考[Pro Git](http://git-scm.com/book)，一本优秀的书。

# java - Java 中的 SQL 查询生成器和验证

> ID：11156921
> 
> 赞同：0
> 
> 时间：2012-06-22T13:15:10.487
> 
> 标签：java, javascript, jquery, builder

我正在为用户创建一个用户界面以直观地构建查询（类似于 MS Access，但没有花里胡哨）。用户界面是用 Java、JavaScript、JQuery 和 Struts 开发的。一旦根据用户对表、字段、条件和值的选择构造查询，就应该在查询到达数据库之前对其进行验证。目前，要执行的查询的目标数据库是 MySQL，但它可能会有所不同，例如 Oracle 或 Postgres。您能否让我知道任何可以验证不同数据库查询或为我指明正确方向的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:54:22.343

添加像 ORM 这样的抽象层可能会对您有所帮助。广为人知的 ORM 是[Hibernate](http://www.hibernate.org)。

# c# - wpf blend应用程序中不显示特殊字符

> ID：11156925
> 
> 赞同：1
> 
> 时间：2012-06-22T13:15:17.983
> 
> 标签：c#, wpf, xaml, special-characters, expression-blend-4

我在 blend 4 中编写了一个 wpf 应用程序，但我遇到了特殊字符显示为菱形问号的问题。

文本在运行时来自资源字典。

有没有一种方法可以制作特殊字符，例如é，è，ê等。

我的按钮，例如

```
<Button Content="{DynamicResource 2190}"/> 
```

我的资源字典

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:system="clr-namespace:System;assembly=mscorlib">

    <system:String x:Key="2190">value</system:String> 
```

值是默认值。在创建窗口对象的程序开始时，资源被删除并用 c# 代码中的新资源替换：

```
if (File.Exists(filepath))
        {
            ResourceDictionary rd = new ResourceDictionary();
            string line = "";
            StreamReader file = new StreamReader(filepath);
            while ((line = file.ReadLine()) != null)
            {
                string[] parts = line.Split(new char[]{','},2);
                string key = parts[0];
                string value = parts[1];
                rd.Add(key,value);
                // use it
            }
            file.Close();
            Application.Current.Resources.MergedDictionaries.Clear();
            Application.Current.Resources.MergedDictionaries.Add(rd);

        } 
```

当我单击另一个按钮时，通过使用不同的文件路径调用该函数来加载一种新语言。

我宁愿不必浏览 txt 文件并更改其 ASCii 值的所有特殊字符。

加载字典后还有其他方法可以动态显示字符吗？也许使用正则表达式并在资源字典上查找和替换？

# android - 需要线程帮助

> ID：11156927
> 
> 赞同：0
> 
> 时间：2012-06-22T13:15:37.513
> 
> 标签：android

我正在尝试制作一个聊天程序，它将每 2 秒拉一次服务器以获取新的 chts。

起初我只是创建了一个线程并更新了线程上的 ui，它崩溃了。

我添加了一个 runnable，其中 run 方法调用了一个名为 SendMessge 的方法。SendMessage 通过 Internet 获取更新的信息，然后更新 ui。

我以为runnable中的run方法将在我的线程下运行，它似乎在ui线程上运行。

当我在发送消息中的网络代码出现错误时，UI 冻结了。

然后我设置了2个断点。一个在runnable之前，下一个在runnable之后。接下来，我在我的服务器中设置了一个断点，这样网络代码就会冻结。那么在android上第一个断点消失了，然后它在runnable之后进入断点而没有等待我释放服务器上的断点，因此我假设runnable在不同的线程上运行，因为代码没有不要等待，我假设它是 ui 线程。

好吧，如果我有这个权利。在创建可运行文件之前，我的网络代码将在线程中。然后将在其运行方法中更新 ui。当我获得更新ui的新信息时出现问题，我如何将它发送到runnable中的run方法？？？

**我的代码：**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.chat);
    strComment=new String("na");
    mUsers=( TextView) findViewById(R.id.viewusers);;
    mComments=( TextView) findViewById(R.id.viewchats);
    mUserChat=( EditText) findViewById(R.id.viewedit);
    mScroll=( ScrollView) findViewById(R.id.scrollcomments);
    mHome=( Button) findViewById(R.id.butHome);
    mHome.setOnClickListener(this);
    mEnter=( Button) findViewById(R.id.butEnter);
    mEnter.setOnClickListener(this);

    Thread thread = new Thread(){
        @Override
        public void run() {
            try {
               int t=0;
               flagEnter=true;
               while(true){
                  handler.post(new Runnable() {
                  // I put a break point here
                      @Override
                      public void run() {
                          SendMessage();
                      }
                  });
                  // I put another break point here, it went right here without waiting for the sendmessage to finish
                  sleep(1000*10);
                  //while(true);
               }
           }catch (InterruptedException e) {
               e.printStackTrace();
           }
       }
   };

   thread.start();
}

public void onClick(View v) {
    Intent i;
    switch(v.getId()) {
        case R.id.butEnter:
            Editable e = mUserChat.getText();
            strComment=e.toString();
            flagAdd=true;
            break;
        case R.id.butHome:
            i = new Intent(this, TellaFortuneActivity.class);
            i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(i);    
            break;
    }
} // end function

// send a uypdate message to chat server 
// return reply in string
void SendMessage(){
    //////////////////////////////////
    // handle flags
    String de=new String("");
    String strUsers=new String("");
    String strComments=new String("");
    String comment=new String("NA");

    if (flagHome){
        Intent i;
        i = new Intent(this, TellaFortuneActivity.class);
        i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(i);
        return;
    }

    String flag="update";
    if (flagAdd){
        // get new text
        Editable  text=mUserChat.getText();
        comment=text.toString();
        mUserChat.setText("");
        flag="add";
    }

    if (flagEnter)
        flag="enter";

    if (flagExit){
        flag="exit";
        flagHome=true;
    }

    // clear all flags
    try {
        URL url = new URL("http://50.63.66.138:1044/"+flag);
        System.out.println("make connection");
        String data = URLEncoder.encode("username", "UTF-8") + "=" + URLEncoder.encode("tedpottel", "UTF-8");
        data += "&" + URLEncoder.encode("comment", "UTF-8") + "=" + URLEncoder.encode( comment, "UTF-8");
        URLConnection conn = url.openConnection();
        // set timeouts to 5 seconds
        conn.setConnectTimeout(1000*5);
        conn.setReadTimeout(5*1000);
        conn.setDoOutput(true);
        OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        wr.write(data);
        wr.flush();
        wr.close();

        //    if (flagAdd==false){

        BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String line=new String();
        int state=0;

        while ((line= rd.readLine()  ) != null) {
            de=de+line;
            switch(state){
                case 0:
                    if ( line.contains("START USER"))
                        state=1;
                    if ( line.contains("START COMMENTS"))
                        state=2;
                    break;
                case 1:
                    if ( line.contains("END USER"))
                        state=0;
                    else{
                        strUsers+=line;
                        strUsers+="\n";
                    }
                    break;
                case 2:
                    // NOTE: end of comments is end, but......
                    // if we do not read in ALL the dat from server
                    // could cause connection errors
                    if ( line.contains("END COMMENTS"))
                        state=0;
                    else {
                        strComments+=line;
                        strComments+="\n";
                    }
                    break;
                } // end switch   
            } // end loop
            rd.close();
        }   
        // the next line will cause a exception
        // mUsers.setText(strUsers);
        // mComments.setText(strComments);
    } catch (Exception e) {
        i++; // use this to see if it goes here in debugger  
        System.out.println("exception");
        System.out.println(e.getMessage());
    }

    flagAdd=false;
    flagEnter=false;
    flagExit=false;
} // end methed

void Test(){
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:35:58.780

尝试使用 AsyncTask 进行线程处理。谷歌最简单的教程。

并确保您不在 UI 线程之外的线程内执行任何 UI 操作。始终为 UI 操作执行 activity.runOnUiThread()。像

// 获取新文本

```
Editable text = mUserChat.getText();
comment = text.toString();
mUserChat.setText(""); 
```

此代码必须在 UI 线程上运行，而不是在您的永恒线程上运行。我从您在线程的 run() 方法中调用的方法中获取了这种平静的代码。

在外螺纹中。您必须进行处理和数据工作。并且 UI 更新必须在 UI 线程上完成，并且要在 UI 线程上运行东西总是使用 activity.runOnUiThread() 方法。

问候， 阿基夫·哈米德

# python - 如何在按下按钮时提交对文本文件的更改？

> ID：11156928
> 
> 赞同：1
> 
> 时间：2012-06-22T13:15:39.167
> 
> 标签：python

我编写了一个小[应用程序，它创建了一个](http://www.reddit.com/r/ubuntuappshowdown/comments/vbo7y/my_app_idea_ushare_gui/)用于设置 uShare 的 GUI。目前它在很大程度上依赖于“w”（写入）和“a”（附加）函数来生成/编辑 ushare.conf 文件。但是我一直在尝试为应用程序找到一种方法来存储所有更改，直到按下保存按钮，然后才将它们提交到实际文件中。我认为这将是让用户每次更改任何字段时都按下回车的最佳方式（并且确实允许 GtkCheckButton）。

给我错误的代码，（以及我使用 StringIO 的任何代码都有相同的结果：

```
 def on_userinput_activate(self, widget):
    usrinpt = widget.get_text()
    global output
    output = StringIO.StringIO()
    output.write(usrinpt)

def on_savetofile_clicked(self, widget):
    global output
    output = StringIO.StringIO()
    global inserttofile
    inserttofile = output.getvalue()
    logfile = open('/home/boywithaxe/Desktop/test.txt', 'w')
    logfile.write(inserttofile) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:17:05.347

建立一个[`StringIO`](http://docs.python.org/library/stringio.html)“伪文件”并在完成后将其写入磁盘。

# javascript - 良性 onmousedown Javascript 错误，无论如何我都想了解/修复它

> ID：11156932
> 
> 赞同：0
> 
> 时间：2012-06-22T13:15:55.297
> 
> 标签：javascript, html, svg

在我的 SVG（您可以[**在此处的 pastebin 上看到）中**](http://pastebin.com/ew4CgBBR)，我绘制了两个相同的形状用作滑块。
首先，我预先定义了矩形（它是填充的），然后用`<use>`. ID = “slider_1”。
另一方面，我直接通过`<rect>`. ID =“slider_2”。

当我将 slider_2 提供给我的 JavaScript 时，一切都很好。
当我在slider_1上实现时，chrome控制台说我有一个未捕获的***ReferenceError：第87行没有定义selectElement***。

滑块功能似乎仍然可以正常工作，但是由于我正在尝试更加熟悉 JS，所以我想了解问题是什么，为什么，并修复它。
在该行上没有明确调用“ *selectElement* ”，但这是选择器所针对的代码行......除此之外，我不知所措:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:20:17.130

您可以调用`selectElement(evt)`第 44 行，但该函数从未在任何地方定义。

# c++ - C++：基本数组交换

> ID：11156933
> 
> 赞同：1
> 
> 时间：2012-06-22T13:16:00.540
> 
> 标签：c++, arrays, algorithm, swap

我根本不明白为什么下面的代码不起作用。**交换**操作不起作用的可能原因是什么？

```
#include <iostream>

using namespace std;

void rotateK(int* arr, int start, int finish) {
    int temp;
    for(int i=0;i<=finish;i++) {
        temp=arr[i];
        arr[i]=arr[finish-i];
        arr[finish-i]=temp;
    }
    for(int i=0;i<=finish;i++)
        cout<<arr[i]<<" ";
    cout<<endl;
}

int main(){
    int arr[5]={1,2,3,4,5};
    rotateK(arr,0,4);
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T13:19:02.300

它确实有效（尽管不是您希望它的工作方式）。但是交换元素**两次**，这就是处理后的数组与原始数组相同的原因。

你可能想要：

```
for(int i=0 ; i<=finish/2 ; i++) 
```

甚至

```
for(int i=start;i<=(finish-start)/2 + start;i++) 
```

以便您实际使用`start`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T13:27:02.123

You're swapping elements twice. You can consider this idea of flipping a segment of an array.

```
int i = start;
int j = finish;
while( i < j ) {
    temp=arr[i];
    arr[i]=arr[j];
    arr[j]=temp;
    ++i; --j;
} 
```

It's difficult to make a mistake if you write it like this.

# sql - 选择[用户权限]

> ID：11156934
> 
> 赞同：0
> 
> 时间：2012-06-22T13:16:14.130
> 
> 标签：sql, sql-server-2008

我们工作的数据库为新用户提供了一些标准权限，但有时有些用户需要的权限超出了通常的权限（其中大多数是对几个 SP 的 EXEC）。我一直在管理这些用户 GRANT。但出于管理目的，我想创建一个包含其中一些信息的个人表，以便我可以轻松快速地区分角色和用户信息。

您知道我可以在其中找到并使用这些信息的任何系统表吗？

编辑：

我们目前正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:20:24.673

```
SELECT
      dp.class_desc, dp.permission_name, dp.state_desc,
      ObjectName = OBJECT_NAME(major_id), GranteeName = grantee.name, GrantorName = grantor.name
      FROM sys.database_permissions dp
      JOIN sys.database_principals grantee on dp.grantee_principal_id = grantee.principal_id
      JOIN sys.database_principals grantor on dp.grantor_principal_id = grantor.principal_id 
```

对于角色：

```
SELECT
    p.name, p.type_desc, pp.name, pp.type_desc, pp.is_fixed_role
    FROM sys.database_role_members roles
    JOIN sys.database_principals p ON roles.member_principal_id = p.principal_id
    JOIN sys.database_principals pp ON roles.role_principal_id = pp.principal_id 
```

# sql - 将条形图间隔设置为低于 1.0 的分数

> ID：11156937
> 
> 赞同：2
> 
> 时间：2012-06-22T13:16:25.707
> 
> 标签：sql, reporting-services

我正在尝试将条形图间隔设置为小于 1 的值，例如 0.2、0.4、0.6 等。

但是，我无法让它工作：它总是从 1、2、3 等开始。我尝试重置间隔，但无法获得所需的输出。

我的 SSRS 版本是 2008 R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T16:41:40.550

右键单击要创建间隔的系列。在这种情况下，它是垂直轴。

转到垂直轴属性，在轴选项中您有轴范围和间隔。转到 Interval 属性并输入您想要达到的间隔。在上述情况下为 0.1。

我的最大数量为 2。我附上了一张图片供您参考。![在此处输入图像描述](../Images/c007b7cd06a3b63ea2acc82ec5583250.png)

--间隔可以在属性窗口的左侧看到。

# requirejs - Handlebars.js 和 require.js 的递归部分

> ID：11156938
> 
> 赞同：2
> 
> 时间：2012-06-22T13:16:30.190
> 
> 标签：requirejs, handlebars.js

我正在尝试使用 Handlebars 呈现节点层次结构。我使用 require.js 和[Handlebars 插件](https://github.com/SlexAxton/require-handlebars-plugin)来拉取相关模板。我尝试调用部分递归地失败了。

**样本数据**

```
var data = {
    nodes: [
        {
            title: "node 1",
            nodes: [
                {title: "node 1-1"},
                {title: "node 1-2"}
            ]
        },
        {
            title: "node 2"
        }
    ]
}; 
```

**需要打电话**

```
require(['hbs!templates/linker/sub'], function(tpl) {
    console.log(tpl(data));
}); 
```

**基本模板**
*模板/链接器/子*

```
{{#if nodes}}
<ul>
    {{#each nodes}}
        <li>{{title}}
        </li>
    {{/each}}
</ul>
{{/if}} 
```

**输出（成功）**

```
<ul>
   <li>node 1</li>
   <li>node 2</li>
</ul> 
```

**带有部分**
*templates/linker/sub2*的模板，将前一个模板作为部分调用

```
{{#if nodes}}
<ul>
{{#each nodes}}
    <li>{{title}}
        {{> templates_linker_sub }}
    </li>
{{/each}}
</ul>
{{/if}} 
```

**输出（成功）**

```
<ul>
    <li>node 1
        <ul>
            <li>node 1-1</li>
            <li>node 1-2</li>
        </ul>
    </li>
    <li>node 2</li>
</ul> 
```

**具有递归部分**
*模板/链接器/sub3*的模板，将自身称为部分模板

```
{{#if nodes}}
<ul>
{{#each nodes}}
    <li>{{title}}
        {{> templates_linker_sub3 }}
    </li>
{{/each}}
</ul>
{{/if}} 
```

**输出（失败）**

require.js 超时，没有输出。

假设我可以在此设置中使用递归部分，我错了吗？还是我在编写模板时遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:50:38.050

As a workaround, I defined a custom helper to apply a previously registered partial. The partial has already been compiled and is available through `Handlebars.partials`

```
define(['Handlebars', 'underscore'], function (Handlebars, _) {
    function partial(template, context, options) {
        var f = Handlebars.partials[template];
        if (!_.isFunction(f)) {
            return "";
        }

        return new Handlebars.SafeString(f(context));
    }
    Handlebars.registerHelper('recursivepartial', partial);
    return partial;
}); 
```

My modified template looks like

```
{{#if nodes}}
<ul>
{{#each nodes}}
    <li>{{title}}
        {{recursivepartial "templates_linker_sub" this}}
    </li>
{{/each}}
</ul>
{{/if}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-10T18:16:14.840

我知道这已经很老了，但我刚刚创建了一个对 require-handlebars-plugin 存储库的拉取请求，它将解决这个问题。目前，插件将解析部分并将所有引用的部分添加为依赖项（因此创建循环引用。）请参见此处：[https ://github.com/SlexAxton/require-handlebars-plugin/pull/229](https://github.com/SlexAxton/require-handlebars-plugin/pull/229)

# java - 如何在特定索引处获取 TreeMap 的键和值

> ID：11156939
> 
> 赞同：19
> 
> 时间：2012-06-22T13:16:30.980
> 
> 标签：java, treemap

我有一个带有一组“键和值”对的 TreeMap。如何在 TreeMap 的特定索引处同时获取键和值？

编辑：@TO-ALL：谢谢。但我知道如何通过使用额外的 ArrayList 来实现它。我只是想有什么方法可以在不使用额外的 ArrayList 的情况下实现这一点。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-22T13:30:51.477

如果您真的想使用 TreeMap 并按位置获取，可以使用以下内容：

```
key => treemap.keySet().toArray()[0]
value => treemap.get(key); 
```

或者（如果你只想要价值）

```
treemap.values().toArray()[0]; 
```

但我建议你使用迭代器，就像上面的方法一样，它需要在你想找到的时候创建数组（所以效率不高），而且你应该足够小心以确保索引不会超出范围。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-24T17:08:38.560

首先，我不确定为什么这里的人们如此频繁地关注问题的有效性。在许多情况下，人们认为按排序顺序维护 ArrayList 是合适的。对于大型列表，按排序顺序维护 ArrayList 效率极低。

标准 Java (Oracle) 源代码分发的 Entry 节点不保持其后代树的大小。因此，如果没有低效的顺序搜索，就不可能通过索引来识别地图中的元素。

我发现这个缺点非常严重，以至于我编写了自己的 AVL 映射，它可以通过索引有效地获取元素并计算 indexOf(E)。使这成为可能就像维护条目的每个左右分支的大小一样简单。Glazedlists 库有可能在某处嵌入了可搜索的树。您可能希望对此进行审查。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-22T13:33:01.760

您可以复制数组列表中的条目集，然后通过索引获取所需的条目：

```
list=new ArrayList<Map.Entry<K,V>>(treeMap.entrySet());
Map.Entry<K,V>=list.get(index); 
```

但是a）复制需要O（N）时间，b）当treeMap发生变化时，列表变得无效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T13:30:17.853

这可能不是最好的方法，但您将能够在特定索引处访问您的键/值。

```
TreeMap<Object, Object> foo = new TreeMap<Object, Object>();
Object key = foo.keySet().toArray(new Object[foo.size()])[YOUR_INDEX];
Object value = foo.get(key); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-25T13:47:27.553

这可能会有所帮助

```
TreeMap< String,Integer > ht=new TreeMap<>();

ht.put("12",1);
ht.put("22",2);
ht.put("32",3);
ht.put("42",4);
for(int i=0;i<ht.size();i++)
{
   System.out.println(new Vector(ht.keySet()).get(i));
   System.out.println(new Vector(ht.values()).get(i));
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-03-06T16:38:57.650

这是从值中获取密钥的另一种选择：

```
Map<String, String> map = new HashMap<String, String>();
map.put("s1", "s1Val");
map.put("s2", "s2Val");
map.put("s3", "s3Val");

    // ex: "s2Val" -> return "s2"

int index = new ArrayList<String>(map.values()).indexOf("s2Val");
System.out.println(map.keySet().toArray()[index]); // -> return "s2" 
```

# java - Java - 将数组存储到内存或从内存上传到磁盘

> ID：11156945
> 
> 赞同：2
> 
> 时间：2012-06-22T13:16:37.240
> 
> 标签：java, database

我有一个长度为 2.2 亿（固定）的 int 和 float 数组。现在，我想将这些数组存储/上传到内存和磁盘。目前，我正在使用 Java NIO 的 FileChannel 和 MappedByteBuffer 来解决这个问题。它工作正常，但需要大约 5 秒（挂钟时间）将阵列存储/上传到内存/从内存到磁盘。实际上，我想要更快的一个。任何人都可以帮助我，是否有任何内置的 java 库/数据库/任何其他方法可以更快地上传/存储数组？我特别关心从磁盘上传到内存。我想让它更快。所以，如果存储时间会增加这样做我没有问题。提前致谢。

我正在使用的代码如下（如果需要）：

```
int savenum = 220000000 ;

public void save() {
 try {
    long l = 0 ;
FileChannel channel = new RandomAccessFile(str1, "rw").getChannel();
MappedByteBuffer mbb = channel.map(FileChannel.MapMode.READ_WRITE, 0, savenum * 8);
mbb.order(ByteOrder.nativeOrder());

for(int i = 0 ; i < savenum ; i++){
l = a[i] ;
 mbb.putLong(l);
}
channel.close();

FileChannel channel1 = new RandomAccessFile(str2, "rw").getChannel();
MappedByteBuffer mbb1 = channel1.map(FileChannel.MapMode.READ_WRITE, 0, savenum * 4);
mbb1.order(ByteOrder.nativeOrder());

for(int i = 0 ; i < savenum ; i++){
 int ll = b[i] ;
 mbb1.putInt(ll);
 }
 channel1.close();
 }
  catch (Exception e){
    System.out.println("IOException : " + e);
  }
 }

 public void load(){
 try{
 FileChannel channel2 = new RandomAccessFile(str1, "r").getChannel();
  MappedByteBuffer mbb2 = channel2.map(FileChannel.MapMode.READ_ONLY, 0, channel2.size());
 mbb2.order(ByteOrder.nativeOrder());
  assert mbb2.remaining() == savenum * 8;
 for (int i = 0; i < savenum; i++) {
 long l = mbb2.getLong();
 a[i] = l ;
 }
 channel2.close();

  FileChannel channel3 = new RandomAccessFile(str2, "r").getChannel();
   MappedByteBuffer mbb3 = channel3.map(FileChannel.MapMode.READ_ONLY, 0, channel3.size());
   mbb3.order(ByteOrder.nativeOrder());
   assert mbb3.remaining() == savenum * 4;
    for (int i = 0; i < savenum; i++) {
    int l1 = mbb3.getInt();
    b[i] = l1 ;
    }
    channel3.close();
    }

    catch(Exception e){
    System.out.println(e) ;
      }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:44:22.503

如果你想加快操作，你可以改变你的代码，这样你就根本不做复制了。即使用ByteBuffer，或IntBuffer 或LongBuffer。这样做的好处是将副本保存到您已经离开堆的堆中，但您也只能在使用它时加载。即您的处理可以与加载同时进行。

使用这种方法应该可以将您的初始“加载”时间减少到 10 毫秒左右，并且没有“保存”时间，因为它已经可供操作系统使用。

# pointers - 如何在结构中使用 int*

> ID：11156946
> 
> 赞同：0
> 
> 时间：2012-06-22T13:16:41.277
> 
> 标签：pointers, struct, int

我有一个结构和一个初始化函数，如下所示：

```
struct someStruct {
    int* b, r;  // r is a pointer to an integer in b
};

someStruct* init_struct(size_t size) {
    someStruct* p = (someStruct*) malloc(sizeof(someStruct));
    p->b = (int*) malloc(size);
    p->b[0] = 16;
    p->r = &p->b;  // Here's the error, why?
    return p;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:22:11.627

在您的代码中，该`r`字段是整数，而不是指向整数的指针！此外，&(p->b) 是*指向整数*( `int**`) 的指针。如果您希望 r 指向 b 数组中的整数，则需要像这样定义结构：

```
struct someStruct {
    int *b, *r;
} 
```

并通过取消引用b ( ) 的**元素**`int`而不是指针本身 ( )来分配 r 指针`int*`：

```
p->r = &(p->b[0]); 
```

或者如果您想指向 b ，则根本不要取消引用`b[0]`：

```
p->r = p->b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:23:01.663

自从我查看 C 以来已经有 15 天了，但我有一种奇怪的感觉，你的错误行应该看起来更像：

```
p->r = &(p->b); 
```

不过，这只是一种预感。我现在没有时间测试。

这样就是说您将 b* 的地址存储到 p->r

但是对于指针，它们保存地址，而不是取消引用的值，所以你可以这样做

```
p->r = p->b; 
```

除非您试图获取该点所在的地址，而不是指针指向的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:27:49.283

`int* b, r;`- 这个语句的意思`b`是一个指向 int 变量的指针，并且`r`是一个 int 变量。如果您想将 r 也声明为指向 int 变量的指针，则必须遵循下面提到的任何一种方式。

第一种方式

```
int* b = NULL;
int* a = NULL; 
```

第二种方式

```
int *b = NULL, *a = NULL; 
```

第三种方式

```
typedef int* INT_POINTER;
INT_POINTER a = NULL, b = NULL; 
```

不要使用宏`#define`代替`typedef`

最好的方法是使用`typedef`，避免混淆。

并且赋值语句应该像`p->r = &(p->b[0]);`

# java - hsql CLOB 列是否有大小限制以及如何配置它

> ID：11156947
> 
> 赞同：2
> 
> 时间：2012-06-22T13:16:45.780
> 
> 标签：java, database-schema, hsqldb, clob

我有一个带有 CLOB 列的 HSQL 表。我使用 HSQL 2.2.8 作为测试用例的内存数据库。我试图从文本文件中插入一个 41.169 字节的数据条目，但我总是收到一个异常，告诉我“字符串数据，右截断”，我认为该条目太大而无法插入，因此被截断。所以我尝试插入较小的数据条目，效果很好，但最后我真的需要能够插入大条目。

该表是使用以下 SQL 命令创建的：

```
CREATE TABLE documents (
identifier VARCHAR(255) NOT NULL,
documentdata CLOB,
PRIMARY KEY(identifier)
); 
```

我正在尝试使用以下 SQL 命令插入数据：

```
MERGE INTO documents 
USING (VALUES(:identifier,:documentdata)) 
AS vals(identifier,documentdata) 
ON documents.identifier=vals.identifier 
WHEN NOT MATCHED THEN INSERT VALUES vals.identifier, vals.documentdata; 
```

在此查询中 :identifier 和 :documentdata 被相应的值替换。

所以我的问题是。我可能在某处配置的 HSQL 中的 CLOB 条目的大小是否存在一些限制。我无法理解这个错误，因为我认为 CLOB 可以让我保存任意大小的数据条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:41:02.740

这不是插入具有大 CLOB 或 BLOB 列的表的正确方法。将以下语句与 PreparedStatement 一起使用，然后将 CLOB 设置为字符流或字符串。

```
MERGE INTO documents 
USING (VALUES(CAST(? AS VARCHAR(255)),CAST(? AS CLOB)))
AS vals(identifier,documentdata) 
ON documents.identifier=vals.identifier 
WHEN NOT MATCHED THEN INSERT VALUES vals.identifier, vals.documentdata; 
```

# ruby-on-rails - Web 抓取 Rails 应用程序过度建模？

> ID：11156951
> 
> 赞同：1
> 
> 时间：2012-06-22T13:16:59.720
> 
> 标签：ruby-on-rails, ruby, models

我想对我是否过度建模我的应用程序提出一些意见。在这个应用程序中，我保存了从网站下载的 html 元数据。我下载元标记并使它们成为数组的一部分。对于 meta_tags 数组中的每个元素，我想保存该元素。但是我需要考虑一些情况，例如，有两个机器人元数据（一个用于索引，一个用于跟随）。所以我最初的想法是通过创建一个“meta_tags”表并将任何元标记保存到他们的表来解决这个问题。这将使网站表保持精简。我只想指定站点表有很多元标签。

但后来我意识到 meta_tags 会有很多重复的条目。例如，如果我有两个网站有两个机器人元标记（同样，一个用于索引，一个用于关注），那么当我只有两条唯一记录时，该表上有四行。所以现在我在想我应该让站点模型下载 html，然后有一个单独的模型，称为“元标记”，列出所有唯一的元标记。然后我会通过一个名为“site_meta_tags”的连接表将sites 表与meta_tags 表关联起来，该表标识哪个站点具有哪些元标记。这是最好的设置方法吗？还是我让这太复杂了？

更新：我在这里发布了一个后续问题：[Rails 应用程序在模型间保存时遇到问题](https://stackoverflow.com/questions/11159197/rails-app-has-trouble-with-inter-model-saving)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:31:41.350

模型和关联的“正确”数量取决于您的用例和约束。如果数据库空间非常宝贵，那么数据库规范化可能更有意义。如果您想要更快的查找，非规范化可能更有意义。如果您需要优化某些类型的查找，请为此安排您的模型和关系。综上所述，如果你只是在做原型，现在不要太担心——从有意义的事情开始，看看会发生什么。

如果您希望能够在两个方向上查找，您描述的方式（多对多关系）对我来说听起来不错：

1.  先找一个元标签，然后找到相关的网站
2.  首先为一个网站，然后找到相关联的元标记

（注意：不要忘记添加索引。）

顺便说一句，在 Rails 中，对于多对多连接表，Rails 约定是在将两个表名称按字母顺序排列之前将它们粘在一起。所以默认情况下它将是“meta_tags_sites”而不是“sites_meta_tags”。[请参阅A Guide to Active Record Associations](http://guides.rubyonrails.org/association_basics.html)中的“has_and_belongs_to_many”部分。

# html - 缓存，浏览器缓存，怎么加呢？

> ID：11156955
> 
> 赞同：1
> 
> 时间：2012-06-22T13:17:18.197
> 
> 标签：html, css, caching, browser-cache, cache-control

**我制作了一个 html 文件，但是当我上传和测试它时，我注意到它有 0“利用浏览器缓存”。我用谷歌搜索了几次如何修复它，发现浏览器请求中遗漏了一些东西。那里写道，然后我需要添加类似这样的内容**

HTTP/1.1 200 正常

日期：1998 年 10 月 30 日星期五 13:19:41 GMT

服务器：Apache/1.3.3 (Unix)

缓存控制：max-age=3600，必须重新验证

过期：1998 年 10 月 30 日星期五 14:19:41 GMT

最后修改时间：1998 年 6 月 29 日星期一 02:28:12 GMT

ETag：“3e86-410-3596fbbc”

内容长度：1040

内容类型：文本/html

**主要问题是：我不知道在哪里添加它？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:33:36.823

我认为您在这里有许多问题：执行您想要的操作的 Apache 模块是 mod_expire，因此需要将它安装在您使用的服务器中。它的文档可以在[这里](http://httpd.apache.org/docs/1.3/mod/mod_expires.html)找到。但是，该版本的 Apache 已经过时了。此外，服务器似乎认为它是在 1998 年运行的，这意味着您将很难`Expires`正常工作。

我的建议？获得一家新的托管公司，该公司知道他们在做什么，并提供维护良好的最新服务器。

mod_expire 将由提供托管包的人安装（在大多数情况下，您不允许自己安装 Apache 模块），如何配置它在很多地方都有说明，[这篇文章](http://www.askapache.com/htaccess/speed-up-sites-with-htaccess-caching.html)和[这篇文章](http://www.askapache.com/hacking/speed-site-caching-cache-control.html)看起来是一个不错的起点- 它只使用`.htaccess`文件，这些文件在我知道的所有托管设置中都可用。

# opengl - 使用混合和 alpha 测试渲染两个纹理

> ID：11156964
> 
> 赞同：1
> 
> 时间：2012-06-22T13:18:32.633
> 
> 标签：opengl, textures, alphablending, alpha-transparency, blending

我正在寻找的是以下内容......我在方形图像上有一个圆圈，角落的alpha为0

[http://dl.dropbox.com/u/1401029/circle.png](http://dl.dropbox.com/u/1401029/circle.png)

还有一个*方形*阴影，其他地方的 alpha 为 0

[http://dl.dropbox.com/u/1401029/image.png](http://dl.dropbox.com/u/1401029/image.png)

好吧，我希望最终结果是这两个渲染的混合，加上阴影没有被渲染到圆圈之外

我怎么能做到这一点？:)

编辑：这是我到目前为止的代码（t2 圆圈，t1 阴影）

```
gl.glTexEnvf(GL2.GL_TEXTURE_ENV, GL2.GL_TEXTURE_ENV_MODE, GL2.GL_MODULATE);
gl.glEnable(GL2.GL_ALPHA_TEST);
gl.glAlphaFunc(GL2.GL_GREATER, 0.1f);
    t2.enable(gl);     
    t2.bind(gl);

    t2.setTexParameteri(gl, GL2.GL_TEXTURE_MIN_FILTER, GL2.GL_LINEAR);
    t2.setTexParameteri(gl, GL2.GL_TEXTURE_MAG_FILTER, GL2.GL_LINEAR);

    a = 2.0f;
    gl.glColor4f(1.0f, 1.0f, 1.0f, 1.0f);

    gl.glBegin(GL2.GL_QUADS);
        gl.glTexCoord2f(0, 0);
        gl.glVertex3f(-a, -a, 0);

        gl.glTexCoord2f(0, 1);
        gl.glVertex3f(-a, a, 0);

        gl.glTexCoord2f(1, 1);
        gl.glVertex3f(a, a, 0);

        gl.glTexCoord2f(1, 0);
        gl.glVertex3f(a, -a, 0);
    gl.glEnd();   

    t2.disable(gl);
gl.glDisable(GL2.GL_ALPHA_TEST);

gl.glDisable(GL2.GL_DEPTH_TEST);

    gl.glEnable(GL2.GL_BLEND);
    gl.glBlendFunc (GL2.GL_SRC_ALPHA, GL2.GL_ONE_MINUS_SRC_ALPHA);

    t1.enable(gl);
    t1.bind(gl);

    t1.setTexParameteri(gl, GL2.GL_TEXTURE_MIN_FILTER, GL2.GL_LINEAR);
    t1.setTexParameteri(gl, GL2.GL_TEXTURE_MAG_FILTER, GL2.GL_LINEAR);

    gl.glBegin(GL2.GL_QUADS);
        gl.glTexCoord2f(0, 0);
        gl.glVertex3f(-a, -a, 0);

        gl.glTexCoord2f(0, 1);
        gl.glVertex3f(-a, a, 0);

        gl.glTexCoord2f(1, 1);
        gl.glVertex3f(a, a, 0);

        gl.glTexCoord2f(1, 0);
        gl.glVertex3f(a, -a, 0);
    gl.glEnd();   

    t1.disable(gl);
    gl.glDisable(GL2.GL_BLEND);
gl.glEnable(GL2.GL_DEPTH_TEST); 
```

但到目前为止它不起作用，阴影完全呈现在圆圈上，我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:31:55.087

非常简单，您将需要使用多重纹理并像[这样](http://www.gamedev.net/topic/13114-lightmapping-with-opengl/)调制第二个纹理。这就像光照贴图，所以混合功能（在像素与帧缓冲区内容混合之前）是

```
output.rgb = Texture1.rgb * Texture2.rgb * 2;
output.a = Texture1.a * Texture2.a; 
```

用肖恩哈格里夫斯的[话来说](http://blogs.msdn.com/b/shawnhar/archive/2010/08/04/dualtextureeffect.aspx)，

“考虑这个操作的最简单的方法是，第一个纹理定义了对象的基本颜色，然后可以通过第二个纹理进行调整：

*   第二个纹理包含 50% 灰色的地方，颜色不变
*   比 50% 深的地方，颜色变暗
*   比 50% 亮的地方，颜色变亮
*   如果第二个纹理不是单色的，则颜色会相应着色"

这将使圆形纹理成为第二个纹理的“蒙版”（反之亦然）。

希望这可以帮助！

# css - OnLoad 和 on 调整大小 css 中断

> ID：11156966
> 
> 赞同：1
> 
> 时间：2012-06-22T13:18:38.380
> 
> 标签：css, load, delay, window-resize

当我加载我的页面或调整浏览器窗口的大小时，css 有加载延迟，用户可以在没有格式化的情况下看到页面。这是我的网站：[bit.ly/MbyWss](http://bit.ly/MbyWss)

这是我的代码：

我在 html 中的原始 css 是 estilos_def.css

```
<body id="body" onresize="start();" onload="start();"> 
```

当 body 被加载或调整大小时，我调用函数 start

```
var navWidth, navHeight;
function start(){

    if (self.outerWidth != undefined)
    {
        navWidth = self.outerWidth;
        navHeight = self.outerHeight;
    } else {
        navWidth = document.documentElement.clientWidth;
        navHeight = document.documentElement.clientHeight;
    }
    //Problema com deteçao de width, resolve-o

    if(navWidth>=1600){ //1600 - 1920
        document.getElementById("estA").href="style/estilos_ws.css"
        document.getElementById("titulo_dias").style.height= "10%";

    }else if(navWidth > 1300 && navWidth <1600){ //1300 1600
        document.getElementById('estA').href="style/estilos_1920.css";
        document.getElementById("titulo_dias").style.height= "7%";

    }else if(navWidth >= 1024 && navWidth <=1300){ //1024 - 1280
        document.getElementById("estA").href="style/estilos_def.css"
        document.getElementById("titulo_dias").style.height= "7%";

    }
    lbeats();

    if(navigator.appName =='Microsoft Internet Explorer')
    {
        ie();
    }
    document.getElementById("dias").style.display="none";
    document.getElementById("gal").style.display="none";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:00:08.170

您到底想用所有这些 javascript 做什么？如果您仅使用它来调整网页大小，则无需任何脚本即可轻松完成。

只需在 css 中执行此操作：

```
body { min-width: /*Smallest window size in pixels that don't mess up page*/px; } 
```

您应该始终避免将脚本用于无需它即可轻松完成的事情。这减少了加载时间，降低了页面的内存大小，并减少了调试量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:51:42.847

我相信你可以在没有任何代码的情况下用 css 做所有事情......

但是，如果出于某种原因必须这样做，请在打开页面时预加载所有 css 文件，将它们从页面中删除，然后在调整大小时重新添加所需的文件，该文件将从未下载的缓存中使用。

另一种方法是将所有样式保存在一个 css 文件中，并将每个样式中的所有样式绑定到分配给 body 的某个类名，例如，如下所示：

```
 /* Sheet 1*/
    .bodySheet1 div.Main {}
    .bodySheet1 .img1 {}

    /* Sheet 2*/
    .bodySheet2 div.Main {}
    .bodySheet2 .img1 {}

    /* Sheet 3*/
    .bodySheet3 div.Main {}
    .bodySheet3 .img1 {} 
```

而不是激活每个工作表，只需为正文分配正确的类名

我仍然相信您根本不需要这样做，您可能可以在纯 css 中完成所有操作而无需任何技巧。

# javascript - Jquery文本动画延迟功能不起作用

> ID：11156967
> 
> 赞同：5
> 
> 时间：2012-06-22T13:18:40.463
> 
> 标签：javascript, jquery

我有以下 jquery 文本飞入动画。在我进一步解释之前，这是我的代码：

```
<script type="text/javascript">

$(document).ready(function(){

    $('.flying1 .flying-text').css({opacity:0});
    $('.flying1 .active-text').animate({opacity:1, marginLeft: "0px"}, 1200); //animate first text
    var int = setInterval(changeText, 3500);    // call changeText function every 5 seconds

function changeText(){  
    var $activeText = $(".flying1 .active-text");     //get current text    
    var $nextText = $activeText.next();  //get next text

    if ($activeText.is('.end')) {
        $activeText.stop().delay(5000);
        $('.flying1').html('<div class="flying-text active-text">Text4<div>
                                <div class="flying-text">Text5</div>
                                <div class="flying-text end2">Text6</div>');
        $('.flying1 .flying-text').css({opacity:0});
        $('.flying1 .active-text').animate({opacity:1, marginLeft: "0px"}, 1200); //animate first text
    };

    if ($activeText.is('.end2')) {
        $activeText.stop().delay(5000);
        $('.flying1').html('<div class="flying-text active-text">Text1<div>
                                <div class="flying-text">Text2</div>
                                <div class="flying-text end">Text3</div>');
        $('.flying1 .flying-text').css({opacity:0});
        $('.flying1 .active-text').animate({opacity:1, marginLeft: "0px"}, 1200); //animate first text
    };

    $nextText.css({opacity: 0}).addClass('active-text').animate({opacity:1, marginLeft: "0px"}, 1200, function(){

        $activeText.removeClass('active-text');                                           
    });
}
});
</script> 
```

HTML

```
<div class="flying-text active-text">Text1<div>
<div class="flying-text">Text2</div>
<div class="flying-text end">Text3</div> 
```

现在你可以看到，Text1-3 首先动画/飞入，然后当到达 Text3 时，它们在动画中被 Text4-6 替换，当再次到达 Text6 时，它再次循环回到 Text1-3 ......现在基本上我想要做的是在动画到达文本末尾时暂停/延迟更长的时间，即在 Text3(class="flying-text end") 和 Text6(class="flying-text end2"。所以我希望 Text3 和 Text6 的动画时间比所有其他人都长。我该怎么做？我使用的代码：

```
$activeText.stop().delay(5000); 
```

不工作...

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:57:04.183

我认为你让自己的事情变得过于复杂。

您只需要使用 normal`setTimeout`来触发下一个动画，但在动画“完成”功能中执行此操作，以确保您不会将动画计时器与普通计时器混合。

出于同样的原因，您还应该避免`setInterval`- 它会与任何动画计时器不同步，特别是当 jQuery 作者恢复使用`requestAnimationFrame`.

这是我的解决方案：

```
var text = [
    ['Text1', 'Text2', 'Text3'],
    ['Text4', 'Text5', 'Text6']
    ];

var n = 0,
    page = 0;
var $f = $('.flying-text');

function changeText() {
    $f.eq(n).text(text[page][n]).css({
        opacity: 0,
        marginLeft: '-50px'
    }).animate({
        opacity: 1,
        marginLeft: "0px"
    }, 1200, function() {
        if (++n === 3) {
            page = 1 - page;
            n = 0;
            setTimeout(function() {
                $f.empty();
                changeText();
            }, 6000);
        } else {
            setTimeout(changeText, 2000);
        }
    });
};

changeText();​ 
```

[在http://jsfiddle.net/alnitak/GE2gN/](http://jsfiddle.net/alnitak/GE2gN/)工作演示

请注意，这将文本内容与动画逻辑完全分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:26:50.973

There is a similar question here:

[delay JQuery effects](https://stackoverflow.com/questions/251204/delay-jquery-effects)

In the comments of the second answer down it states that delay doesnt work with stop.

Hope this page is useful to you.

***EDIT*** OK i have found a solution. Try this and let me know if its suitable.

Replace your delay lines with this:

```
 $(this).animate('pause').delay(5000).animate('resume'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T07:28:28.037

将您的动画排入队列，并使用`.delay()`一个通用的队列对象（[demo](http://jsfiddle.net/jefferyto/pB8zp/72/)）：

```
var text = [
        [ 'Text1', 'Text2', 'Text3' ],
        [ 'Text4', 'Text5', 'Text6' ]
    ],
    reset = {
        opacity: 0,
        marginLeft: -50
    },
    flyout = {
        opacity: 1,
        marginLeft: 0
    },
    flyoutDuration = 1200,
    changeTextDelay = 5000,
    q = $({}), // can also be a common element, e.g. $('.flying1')
    pos = 0;

function changeText() {
    $('.flying1 .flying-text').each(function(i) {
        var div = $(this);

        // setup text
        div.css(reset).text(text[pos][i]);

        // queue
        q.queue(function(next) {
            div.animate(flyout, flyoutDuration, next);
        });
    });

    q.delay(changeTextDelay).queue(function(next) {
        pos = (pos + 1) % text.length;
        changeText();
        next();
    });
}

changeText(); 
```

​</p>

# c# - WinRT 中的应用程序间通信

> ID：11156968
> 
> 赞同：2
> 
> 时间：2012-06-22T13:18:44.080
> 
> 标签：c#, windows-8, windows-runtime

Windows 8 上有两个 WinRT 应用程序（C#/Xaml，如果重要的话）。第一个应用程序应该接收一些数据并将其发送到第二个应用程序。最好的方法是什么？可以使用 WCF 吗？

编辑：第一个应用程序知道第二个。实际上第二个应用程序是一个身份验证服务器，它只提供一种获取令牌的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:03:13.273

不可能，这需要环回支持。你只能打开*测试*的东西，你不能在你的用户机器上依赖它。CheckNetIsolation.exe 实用程序可用于启用它，MSDN 文章[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh780593.aspx)。

只强调*测试*，你不能发布这样的应用程序。您的身份验证服务器需要在另一台机器上运行。无论如何，考虑到它在同一台机器上运行时会受到影响的可能性，这非常重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:49:55.683

没有全貌，让身份验证服务器在以 UI 为中心的应用程序模型（如 WinRT）中运行似乎是一个相当奇怪的设计决定。它不能被认为是基于“云”的服务吗？无论如何，我宁愿这样，不必在每台设备上分发该服务器的代码。

话虽如此，请看一个[自定义共享合同解决方案](http://msdn.microsoft.com/en-us/library/windows/apps/hh758314.aspx)。您基本上应该能够将身份验证请求作为[DataRequest](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.datarequest.aspx#Y0)发送，并让“服务器”以 DataResponse 响应。

code.msdn.com 上有两个示例应用程序：

*   [共享内容源应用示例](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84)
*   [共享内容目标应用示例](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:02:02.913

我不确定它是否已被回答，但我发现使用 LaunchFileAsync 可以做到这一点。示例如下： //启动应用程序 var launchFileName = "june.kit";

```
 var folder = Windows.Storage.ApplicationData.Current.LocalFolder;
            var option = Windows.Storage.CreationCollisionOption.ReplaceExisting;

            // create file 
            var launchFile = await folder.CreateFileAsync(launchFileName, option);

            // write content
            await Windows.Storage.FileIO.WriteTextAsync(launchFile, tempChk);

            // launch file
            bool success = await Launcher.LaunchFileAsync(launchFile); 
```

其中，launchFileName 可以具有任何扩展名的任何名称，并且此扩展名应在 packager.manifest 文件中调用应用程序的 FileTypeAssociation 中提及。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T06:38:33.273

我偶然发现的一件事是：[Windows.Networking.BackgroundTransfer](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.networking.backgroundtransfer.aspx)

基本上来自这篇文章：[Transferring data in the background (Windows Store apps using C#/VB/C++ and XAML)](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh452975.aspx)

但我实际上并没有通过后台任务的洞文章和概念。也许有人可以对此发表评论？

# xcode4 - 如何从命令行查找 xcode 构建目录？

> ID：11156970
> 
> 赞同：5
> 
> 时间：2012-06-22T13:18:56.397
> 
> 标签：xcode4, automation, hudson

在从命令行构建 Xcode 项目时，有很多关于控制将“构建”目录放在哪里的问题/答案，但与其试图解决这个问题，有没有办法获取 Xcode 正在使用的路径？

我知道它将文件放在`~/Library/Developer/Xcode/DerivedData/APPNAME-xxx/Build/`xxx 是一些看起来随机的字符串的位置。我希望能够从命令行获取此目录，以便我可以归档我的`.app`和`.dSYM`文件，并重新签名和打包我的`.app`using `xcrun PackageApplication`，我目前使用它直接从构建中创建一个无线可安装版本-服务器（哈德逊）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T18:14:27.943

从命令行

```
xcodebuild -project yourproj.xcodeproj -showBuildSettings | grep TARGET_BUILD_DIR 
```

删除 grep 管道，查看所有构建设置的列表，然后选择最适合您要查找的设置

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-24T12:49:13.393

**对于工作区**

```
xcodebuild -scheme scheme-name -workspace proj.xcworkspace ONLY_ACTIVE_ARCH=NO -sdk iphonesimulator -configuration Debug -showBuildSettings | grep -m 1 "BUILT_PRODUCTS_DIR" | grep -oEi "\/.*" 
```

**对于 Proj 文件**

```
xcodebuild -project yourproj.xcodeproj ONLY_ACTIVE_ARCH=NO -sdk iphonesimulator -configuration Debug -showBuildSettings | grep -m 1 "BUILT_PRODUCTS_DIR" | grep -oEi "\/.*" 
```

# c# - 如何使用 C# Metro 应用程序从 mp4 文件中提取特定帧

> ID：11156977
> 
> 赞同：1
> 
> 时间：2012-06-22T13:19:18.063
> 
> 标签：c#, windows-8, frame, mpeg-4, applicationwindow

我没有找到从 Windows 8 应用程序 Metro 风格的 mpg4 文件中提取特定帧（例如：帧 1、2 和 13）的方法。我找到了如何提取框架并​​使用 C++ 直接将其保存在文件中。我只需要使用 C# 来提取 BitmapImage 对象中的帧以在图像中显示它。任何人都可以帮助我吗？

# vb6 - VB6 应用程序停止响应

> ID：11156978
> 
> 赞同：5
> 
> 时间：2012-06-22T13:19:20.430
> 
> 标签：vb6, windows-process

我有一个用 VB6 编写的程序，它读取一个长文本文件并执行一个很长的操作。我也实现了进度条，但我的问题是，在我的程序说“没有响应”之后，它在任务完成后再次开始响应。

如何消除此“无响应”问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T13:32:11.177

Windows/Explorer 会在进程过长而不处理任何消息时将其更改为“未响应”状态。在 VB6 中，当运行一段较长的代码而不调用`DoEvents`.

不幸的是，VB6 不容易做多线程，所以最好的选择是`DoEvents`在操作期间定期调用。理想情况下，这将是在更新进度条位置之后。

执行此操作时，您需要小心防止重新进入。通过在长时间操作开始时禁用控件并在完成后重新启用它们，这很容易。如果要让它们取消，则需要使用在取消按钮单击事件中设置的布尔值并**在**调用后检查`DoEvents`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:21:45.030

您可以调用`DoEvents`您的长期操作，但要小心，因为它有[各种相关的警告](https://stackoverflow.com/questions/11352301/how-to-use-doevents-without-being-evil)。

# json - Zend 上下文切换 json 响应

> ID：11156984
> 
> 赞同：0
> 
> 时间：2012-06-22T13:19:46.957
> 
> 标签：json, zend-framework

我在 Zend 框架中使用上下文切换来获取 json 响应

这是我在控制器的 init 函数中使用的代码

```
$this->_helper->contextSwitch()
                ->addActionContext('index', array('xml', 'json'))
                  ->setAutoJsonSerialization(true)
                    ->initContext(); 
```

在其他一些方法中，我有我想要作为 json 响应的数据的学说集合。

代码是

```
$pm = new ProfileMessage();
$flirts = $pm->fetchLastMessages($this->_member->user_id, "0,1", 
                                            Labels_MessageType::FLIRT, 5, 0);

$this->view->flirts = $flirts; 
```

但是为了响应，我得到一个空的 json 字符串。

```
{"flirts":{}} 
```

我做错了什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:42:49.013

您需要确保 $flirts 是一个数组或可序列化对象：

```
php > $user = new Model_User();
php > $user->setId(10);
php > echo json_encode($user);
{} //output is empty

/* Convert the object to array */
php > echo json_encode($user->toArray());
{"_id":10} //output not empty

/* Trying a simple object */
php > $simple = new stdClass();
php > $simple->something = 'else';
php > echo json_encode($simple);
{"something":"else"} //output not empty 
```

# iphone - iPhone - .h 文件 - 接口和 .m 文件 - 实现？

> ID：11156993
> 
> 赞同：0
> 
> 时间：2012-06-22T13:20:13.953
> 
> 标签：iphone, objective-c

我对 iPhone 开发人员很陌生（我来自 C# 背景）。据我了解 - .h 文件被视为接口（标题）& .m 文件具有相应的实现（方法）。

因此，.m 文件必须具有与 .h 文件相对应的所有实现，反之亦然。

但是当我尝试时，我可以在 .h 文件中声明一些方法，而无需在 .m 中进行任何实现，反之亦然。它正在编译和正常工作，没有任何错误。为什么是这样？

如果我的概念是错误的，请纠正我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:22:41.943

.h 文件是包含函数定义的类的头文件，在 c 和 c++ 中，函数定义可以在没有函数体的情况下存在，但是调用此函数会引发异常

.m 文件是实现，它包含您在 .h 文件中定义的函数的实现，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:25:13.187

是的，因为如果你要声明函数......那么它不是强制性的给出那个函数的实现。这就是为什么它只给出你的实现不完整的警告。因为 .h 是一个声明文件，而 .m是实现文件。