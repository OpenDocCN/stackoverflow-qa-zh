# StackOverflow 问答 000408000-000408999

# vb.net - 无法加载文件或程序集“xxxx”或其依赖项之一。该系统找不到指定的文件

> ID：408002
> 
> 赞同：10
> 
> 时间：2009-01-02T20:58:37.890
> 
> 标签：vb.net, visual-studio-2005

**在 VS2005 中，我们的整个编程人员偶尔**会收到此错误消息，并且始终在**BeneControls**项目中。此错误消息每天发生多次，并且在进入控件的设计模式时发生。通常重建**BeneControls 可以**解决问题，但有时必须重建整个解决方案。

还有其他人解决了这个问题吗？

有什么建议或网站概述了需要做什么？

有时我只是希望 MS 在错误消息屏幕上添加一个重建按钮。

我们正在使用 Visual Studio 2005、VB.NET 和 DevExpress 控件。

这是整个错误消息：

* * *

```
One or more errors encountered while loading the designer. The errors are listed below. Some errors can be fixed by rebuilding your project, while others may require code changes.

Could not load file or assembly 'BeneControls, Version=1.0.3289.23008, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.

    Hide     

    at System.Signature._GetSignature(SignatureStruct& signature, Void* pCorSig, Int32 cCorSig, IntPtr fieldHandle, IntPtr methodHandle, IntPtr declaringTypeHandle)
    at System.Signature.GetSignature(SignatureStruct& signature, Void* pCorSig, Int32 cCorSig, RuntimeFieldHandle fieldHandle, RuntimeMethodHandle methodHandle, RuntimeTypeHandle declaringTypeHandle)
    at System.Signature..ctor(RuntimeFieldHandle fieldHandle, RuntimeTypeHandle declaringTypeHandle)
    at System.Reflection.RtFieldInfo.get_FieldType()
    at System.ComponentModel.Design.InheritanceService.AddInheritedComponents(Type type, IComponent component, IContainer container)
    at System.Windows.Forms.Design.DocumentDesigner.Initialize(IComponent component)
    at System.ComponentModel.Design.DesignerHost.AddToContainerPostProcess(IComponent component, String name, IContainer containerToAddTo)
    at System.ComponentModel.Design.DesignerHost.Add(IComponent component, String name)
    at System.ComponentModel.Design.DesignerHost.System.ComponentModel.Design.IDesignerHost.CreateComponent(Type componentType, String name)
    at System.ComponentModel.Design.Serialization.DesignerSerializationManager.CreateInstance(Type type, ICollection arguments, String name, Boolean addToContainer)
    at System.ComponentModel.Design.Serialization.DesignerSerializationManager.System.ComponentModel.Design.Serialization.IDesignerSerializationManager.CreateInstance(Type type, ICollection arguments, String name, Boolean addToContainer)
    at System.ComponentModel.Design.Serialization.TypeCodeDomSerializer.Deserialize(IDesignerSerializationManager manager, CodeTypeDeclaration declaration)
    at System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager manager)
    at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager)
    at System.ComponentModel.Design.Serialization.BasicDesignerLoader.BeginLoad(IDesignerLoaderHost host) 
```

* * *

在此先感谢，格哈德

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-02T21:09:41.627

Version=1.0.3289.23008 - 这告诉我版本号在不断变化，您是否考虑过在开发过程中修复版本号？

在 AssemblyInfo.vb 上：

目前它被设置为递增：

```
[assembly: AssemblyVersion("1.0.*.*")] 
```

改成：

```
[assembly: AssemblyVersion("1.0.0.0")] 
```

你有它在一个固定的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-10-04T20:32:09.263

好吧，我不是开发人员，但我必须部署一个项目，该项目实际上使用 Windows 2008 服务器 64 位上的传真服务发送传真。该项目是在 Windows 32 位平台上开发的，我根据给定的指令设置了所有信息，但仍然出现了这个恼人的错误，然后我找到了解决方案，即将平台从 anycpu 更改为 x86 并且它工作。如需完整的设置列表，请点击以下链接： [http ://www.sizledcore.com/2011/10/could-not-load-file-or-assembly/](http://www.sizledcore.com/2011/10/could-not-load-file-or-assembly/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-07T22:48:10.647

我过去曾在控件与消费者在同一个程序集中的情况下看到过这种情况——GAC 和版本控制在那里没有帮助——这似乎与设计人员将程序集锁定在内存中的方式有​​关，并且拒绝让步。

我们的开发人员的建议是在关闭 VS 或在构建类型之间切换时不要让表单设计器保持打开状态（我认为这是由于在 VB.Net 中的构建配置之间共享相同的输出文件夹）

# pocketpc - Screen resolution VS2008 to WM6 Emulator vs Device, why is it different?

> ID：408007
> 
> 赞同：1
> 
> 时间：2009-01-02T20:59:57.997
> 
> 标签：pocketpc

When I debug a VS2008 WM project in the emulator, it all works as expected, but when I select a device as the target for testing, the entire application gets hosed, appearing in the upper left of the display, distorted. How can I make the display appear the same as in the emulator?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-04T14:38:26.767

Problem was that the device uses different screen resolution and that the controls are not scaling properly.

The solution for this was to set the main form's AutoScaleMode to Dpi (default was Inherit).

# ruby-on-rails - 在 Controller 中重构 before_filters

> ID：408012
> 
> 赞同：0
> 
> 时间：2009-01-02T21:01:01.723
> 
> 标签：ruby-on-rails, model-view-controller, aasm

我正在开发一个 Rails 应用程序，该应用程序在 users_controller 中有一大堆过滤器，这些过滤器查找由 Acts as State Machine 提供的用户的有状态角色。它们看起来像这样：

```
class UsersController < ApplicationController

before_filter :not_logged_in_required, :only => [:new, :create]
before_filter :find_user_or_current_user, :only => [:edit, :update]
before_filter :find_user, :only => [:suspend, :unsuspend, :destroy, :purge]
before_filter :admin_required, :only => [:suspend, :unsuspend, :destroy, :purge]
before_filter :check_administrator_role, :only [:index, :suspend, :destroy, :purge] 
```

通过对用户控制器控制的每个操作的所有这些状态检查，性能成为一个问题，对用户列的 SQL 查询在我的机器上花费了 5 毫秒以上。

我只是假设所有这些过滤器都在拖动性能中起作用，我想知道如何最好地重构这些过滤器以改善从数据库中读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-04T04:20:22.693

将许多特权内容抽象到您的用户模型中（可能是标志？完整的特权模型和链接表可能会过大，但也许不会）。将当前登录的用户 ID（可能还有其他一些常用的东西）存储到会话中。留下一个 before_filter，称为`:auth`，它执行 a`User.find(session[:user_id])`并将一些众所周知的类变量可能`@loggedinuser`设置为 User 对象。然后你`@loggedinuser`对权限进行查找。

# visual-studio-2008 - Visual Studio 2008 标准版和专业版有什么区别？

> ID：408022
> 
> 赞同：7
> 
> 时间：2009-01-02T21:03:44.230
> 
> 标签：visual-studio-2008, comparison, t4

Pro 有什么标准中没有的（反之亦然）？

我需要 Visual Studio 供个人使用，但我不能使用 Express 版本，因为我需要 T4。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-02T21:06:03.867

这是一个[不错的清单](http://deepdark.net/PermaLink,guid,9100f681-876b-4221-8ea9-eb7dc972be8d.aspx)：

> 调试工具：
> 
> *   附加到远程进程
> *   SQL-CLR 调试
> *   XSLT 调试器
> *   T-SQL 调试
> 
> 数据工具：
> 
> *   数据库项目
> *   SQL Server 项目
> *   服务器资源管理器
> 
> 报告：
> 
> *   用于 Visual Studio 的 Crystal Reports 应用程序和 Crystal Reports
> 
> 办公发展：
> 
> *   适用于 Office 2003 和 Office 2007 的 VSTO
> *   Sharepoint 2007 状态机工作流模板
> 
> 智能设备开发：
> 
> *   设备模拟器
> *   项目模板
> *   调试工具

[Moocha 和 Filip Ekberg 为特征矩阵](http://msdn.microsoft.com/en-us/vstudio/products/cc149003.aspx)提供了非常好的参考。

* * *

从评论：

*   [ctacke：Pro 下更好地支持智能设备开发（在功能矩阵](http://msdn.microsoft.com/en-us/vstudio/products/cc149003.aspx)中搜索“智能设备开发” ）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-04-01T16:52:26.547

Microsoft 下载中心，“Visual Studio 2008 产品比较指南” [http://www.microsoft.com/downloads/en/details.aspx?familyid=727BCFB0-B575-47AB-9FD8-4EE067BB3A37&displaylang=en](http://www.microsoft.com/downloads/en/details.aspx?familyid=727BCFB0-B575-47AB-9FD8-4EE067BB3A37&displaylang=en)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-04-01T19:03:25.060

尽管我不想让您远离给我们钱，但您会发现 T4 确实在 Express 版本中可用。

但是，缺少“添加新项目”模板，因此不是很明显。如果您创建一个文本文件，然后将其重命名为具有 .tt 扩展名，那么它应该会神奇地开始工作。

# sharepoint - 如何添加指向 SharePoint“创建”页面的链接？

> ID：408024
> 
> 赞同：1
> 
> 时间：2009-01-02T21:04:25.757
> 
> 标签：sharepoint, custom-lists

我有一个自定义功能，我想从“创建”页面上的链接链接到该功能 - 您可以从“站点操作”菜单访问的 create.aspx 页面。我很乐意在我的功能元素清单中以声明方式或在某些功能激活代码中以编程方式执行此操作，但我不知道它是否可能或如何开始。同时，我在“站点操作”菜单中有一个链接，但我想将其移动到“创建”页面中逻辑上更合适的位置。

最后，我想在“创建”页面的“自定义列表”列底部有一个链接，上面写着“克里斯的自定义列表”，该链接将指向我的自定义应用程序页面以启动此自定义列表创建过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T17:28:11.217

遗憾的是，您没有可支持的选项将自定义链接添加到“自定义列表”列。该列是从已安装的列表模板生成的，您向该列添加任何内容的唯一方法是添加一个列表模板，这不能让您控制将生成哪个链接。

在“创建”页面上，您只能将自己的自定义链接添加到“网页”列。为此，请添加具有 Location="Microsoft.SharePoint.Create" 和 GroupId="WebPages" 的 CustomAction：

```
 <CustomAction
 Location="Microsoft.SharePoint.Create"
 GroupId="WebPages"
 Title="Chris's Custom List">
      <UrlAction Url="custompage.aspx"/>
    </CustomAction> 
```

当然，如果您不关心可支持性或计划再次升级 SharePoint，您当然可以修改 create.aspx 文件。

.b

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-06T23:30:08.270

我要怪当时我发高烧，因为我的回答完全是错误的。

如果您只添加一个设置 ListTemplate 元素的 NewPage 属性的列表模板，则可以将自定义链接添加到自定义列表列。

我不知道我为什么要回答我所做的事情，但为了弥补任何困惑，我写了一篇文章来演示[自定义 SharePoint 列表创建](http://furuknap.blogspot.com/2009/01/consuming-rss-or-atom-feed-in.html)以及各种其他功能。

# .net - modopt 和 .NET 反射

> ID：408028
> 
> 赞同：5
> 
> 时间：2009-01-02T21:05:33.773
> 
> 标签：.net, reflection, c++-cli

我有一个 CLI/C++ 接口，我想通过 .NET Reflection 进行检查。这是源代码中的函数签名：

```
class ClassA;
template<typename _Type> class ClassTempA;

public interface class Test : BaseFunc {
public:
    ClassTempA<int>& SomeFunc2(ClassA inst) = 0;
}; 
```

以下是在 .NET Reflector 中检查该函数时的样子：

```
unsafe ClassTempA<int>* modopt(IsImplicitlyDereferenced) SomeFunc2(ClassA inst); 
```

有没有办法通过 .NET 反射获取 modopt 属性，还是必须使用元数据非托管 API？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-10-02T00:51:47.630

您可以通过分别调用和来获取`modopt`和`modreq`信息。为了说明您的类型，请参阅以下内容。`System.Reflection`[`ParameterInfo::GetOptionalCustomModifiers()`](http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.getoptionalcustommodifiers.aspx)[`ParameterInfo::GetRequiredCustomModifiers()`](http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.getrequiredcustommodifiers.aspx)

```
class ClassA;
template<typename _Type> class ClassTempA;

public interface class Test : BaseFunc {
public:
    ClassTempA<int>& SomeFunc2(ClassA inst) = 0;
};

array<Type^>^ GetModifiers()
{
    MethodInfo^ SomeFunc2 = Test::typeid->GetMethod("SomeFunc2");
    return method->ReturnParameter->GetOptionalCustomModifiers();
} 
```

# php - 用键内爆关联数组的最快方法

> ID：408032
> 
> 赞同：127
> 
> 时间：2009-01-02T21:06:17.720
> 
> 标签：php, arrays, query-string, associative-array, implode

我正在寻找一种将关联数组转换为字符串的快速方法。典型的结构类似于 URL 查询字符串，但具有可自定义的分隔符，因此我可以将 ' `&amp;`' 用于 xhtml 链接或使用 ' `&`' 否则。

我的第一个倾向是使用`foreach`，但由于我的方法可以在一个请求中多次调用，我担心它可能太慢了。

```
<?php
$Amp = $IsXhtml ? '&amp;' : '&';
$Parameters = array('Action' => 'ShowList', 'Page' => '2');
$QueryString = '';
foreach ($Parameters as $Key => $Value)
        $QueryString .= $Amp . $Key . '=' . $Value; 
```

有更快的方法吗？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2009-01-02T21:09:06.777

你可以用它[`http_build_query()`](http://www.php.net/http_build_query)来做到这一点。

> 从提供的关联（或索引）数组生成 URL 编码的查询字符串。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-10-12T03:12:17.033

如果您不关心*确切的*格式，但是您确实想要一些简单但没有换行符的东西，`print_r`您也可以使用`json_encode($value)`快速简单的格式化输出。（*注意它也适用于其他数据类型*）

```
$str = json_encode($arr);
//output...
[{"id":"123","name":"Ice"},{"id":"234","name":"Cake"},{"id":"345","name":"Pie"}] 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2009-02-03T14:06:21.150

顺便说一句，我正在寻找内爆关联数组的最佳方法，但使用我自己的分隔符等......

所以我使用 PHP 的 array_walk() 函数来做这个，让我将一个关联数组加入到一个参数列表中，然后可以将其应用于 HTML 标记......

```
// Create Params Array
$p = Array("id"=>"blar","class"=>"myclass","onclick"=>"myJavascriptFunc()");

// Join Params
array_walk($p, create_function('&$i,$k','$i=" $k=\"$i\"";'));
$p_string = implode($p,"");

// Now use $p_string for your html tag 
```

显然，您可以以某种方式将其保留在您自己的函数中，但它让您了解如何使用自己的方法加入关联数组。希望对某人有所帮助:)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-01-05T15:13:53.633

一种方法是使用`print_r(array, true)`，它将返回数组的字符串表示形式

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-04-29T11:41:20.383

这是我的解决方案，例如 div 数据属性：

```
<?

$attributes = array(
    'data-href'   => 'http://example.com',
    'data-width'  => '300',
    'data-height' => '250',
    'data-type'   => 'cover',
);

$dataAttributes = array_map(function($value, $key) {
    return $key.'="'.$value.'"';
}, array_values($attributes), array_keys($attributes));

$dataAttributes = implode(' ', $dataAttributes);

?>

<div class="image-box" <?= $dataAttributes; ?> >
    <img src="http://example.com/images/best-of.jpg" alt="">
</div> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-06-19T15:29:03.680

我的解决方案：

```
$url_string = http_build_query($your_arr);
$res = urldecode($url_string); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-27T18:30:22.377

用于从简单数组创建 HTML 属性字符串（带引号）的单行器：

```
$attrString = str_replace("+", " ", str_replace("&", "\" ", str_replace("=", "=\"", http_build_query($attrArray)))) . "\""; 
```

# 例子：

```
$attrArray = array("id"    => "email", 
                   "name"  => "email",
                   "type"  => "email",
                   "class" => "active large");

echo str_replace("+", " ", str_replace("&", "\" ", str_replace("=", "=\"", http_build_query($attrArray)))) . "\"";

// Output:
// id="email" name="email" type="email" class="active large" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-11-03T16:21:03.453

更短、更透明、更直观的 array_walk 怎么样？

```
$attributes = array(
  'data-href'   => 'http://example.com',
  'data-width'  => '300',
  'data-height' => '250',
  'data-type'   => 'cover',
);

$args = "";
array_walk(
    $attributes, 
    function ($item, $key) use (&$args) {
        $args .= $key ." = '" . $item . "' ";  
    }
);
// output: 'data-href="http://example.com" data-width="300" data-height="250" data-type="cover" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-28T10:25:08.310

```
function array_to_attributes ( $array_attributes )
{

    $attributes_str = NULL;
    foreach ( $array_attributes as $attribute => $value )
    {

        $attributes_str .= " $attribute=\"$value\" ";

    }

    return $attributes_str;
}

$attributes = array(
    'data-href'   => 'http://example.com',
    'data-width'  => '300',
    'data-height' => '250',
    'data-type'   => 'cover',
);

echo array_to_attributes($attributes) ; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-03T11:29:01.937

用于`array_walk`此。

```
$arr = [
    "key"  => "value",
    "key2" => "value2",
];

array_walk($arr, function(&$value, $key) {
    $value = "{$key}: {$value}";
});

implode("<br/>", $arr) 
```

**结果**

```
key: value<br/>key2: value2<br/> 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2011-03-18T02:49:33.153

这是我能想到的最基本的版本：

```
public function implode_key($glue = "", $pieces = array())
{
    $keys = array_keys($pieces);
    return implode($glue, $keys);
} 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2016-03-11T04:53:52.203

```
echo implode(",", array_keys($companies->toArray())); 
```

`$companies->toArray()`-- 这是以防万一你`$variable`是一个对象，否则只需传递 $companies。

就是这样！

# python - 防止 Python 子进程在 Windows 上传递 fds？

> ID：408039
> 
> 赞同：1
> 
> 时间：2009-01-02T21:08:42.643
> 
> 标签：python, windows, subprocess, popen

默认情况下，Python 的 subprocess 模块将所有打开的文件描述符传递给它产生的任何子进程。这意味着如果父进程正在侦听端口并被杀死，它无法重新启动并再次开始侦听（即使使用 SO_REUSEADDR），因为子进程仍然拥有该描述符。我无法控制子进程。

子进程 POpen 构造函数确实接受一个 close_fds 参数，它会关闭子进程上的描述符，就像我想要的那样。但是，仅在 Windows 上存在一个限制，如果 stdin/stdout 也被覆盖，则无法使用它，我需要这样做。

有谁知道在 Windows 上解决此问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-02T23:11:48.293

什么似乎是我能找到的最相关的信息：[本文](http://msdn.microsoft.com/en-us/library/ms682499%28VS.85%29.aspx)中引用的[SetHandleInformation](http://msdn.microsoft.com/en-us/library/ms724935%28VS.85%29.aspx)应该给你指点。

您可能需要使用 pywin32 和/或 ctypes 来完成您想要的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-01-02T21:15:14.737

我周围没有 windows 框，所以这是未经测试的，但我很想尝试 os.dup 和 os.dup2 方法；复制文件描述符并使用它们而不是父描述符。

# java - iText PDF 中的矢量图形

> ID：408042
> 
> 赞同：14
> 
> 时间：2009-01-02T21:09:21.753
> 
> 标签：java, image, pdf, vector, itext

我们使用 iText 从 Java 生成 PDF（部分基于此站点上的建议）。但是，以 GIF 等图像格式嵌入我们的徽标副本会导致人们放大和缩小时看起来有点奇怪。

理想情况下，我们希望以矢量格式嵌入图像，例如 EPS、SVG 或只是 PDF 模板。该网站声称 EPS 支持已被删除，在 PDF 中嵌入 PDF 或 PS 可能会导致错误，甚至没有提及 SVG。

我们的代码使用 Graphics2D API 而不是直接使用 iText，但如果能达到结果，我们愿意跳出 AWT 模式并使用 iText 本身。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-03T13:36:06.160

根据[文档](http://itextdocs.lowagie.com/tutorial/objects/images/index.php)， iText 支持以下图像格式：JPEG、GIF、PNG、TIFF、BMP、WMF 和 EPS。我不知道这是否有任何帮助，但我已成功使用[iTextSharp](http://itextsharp.sourceforge.net/)在 pdf 文件中嵌入矢量[WMF图像：](http://en.wikipedia.org/wiki/Windows_Metafile)

C＃：

```
using System;
using System.IO;
using iTextSharp.text;
using iTextSharp.text.pdf;

public class Program 
{

    public static void Main() 
    {
        Document document = new Document();
        using (Stream outputPdfStream = new FileStream("output.pdf", FileMode.Create, FileAccess.Write, FileShare.None))
        using (Stream imageStream = new FileStream("test.wmf", FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            PdfWriter.GetInstance(document, outputPdfStream);
            Image wmf = Image.GetInstance(imageStream);
            document.Open();
            document.Add(wmf);
            document.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T21:10:54.433

我发现了 iText 作者的几个示例，它们使用 Graphics2D API 和 Apache Batik 库在 PDF 中绘制 SVG。

[http://itextpdf.com/examples/iia.php?id=269](http://itextpdf.com/examples/iia.php?id=269)

[http://itextpdf.com/examples/iia.php?id=263](http://itextpdf.com/examples/iia.php?id=263)

出于我的目的，我需要获取一串 SVG 并在 PDF 中以特定大小和位置绘制它，同时保持图像的矢量性质（无光栅化）。

我想绕过 SAXSVGDocumentFactory.createSVGDocument() 函数中流行的 SVG 文件。我发现以下帖子有助于使用 SVG 文本字符串而不是平面文件。

[http://batik.2283329.n4.nabble.com/Parse-SVG-from-String-td3539080.html](http://batik.2283329.n4.nabble.com/Parse-SVG-from-String-td3539080.html)

> 您必须从您的 String 创建一个 StringReader 并将其传递给 SAXSVGDocumentFactory#createDocument(String, Reader) 方法。作为字符串的第一个参数传递的 URI 将是 SVG 文档的基本文档 URI。仅当您的 SVG 引用任何外部文件时，这才重要。
> 
> 最好的祝福，
> 
> 丹尼尔

源自 iText 示例的 Java 源代码：

```
// SVG as a text string.
String svg = "<svg>...</svg>";

// Create the PDF document.
// rootPath is the present working directory path.
Document document = new Document();
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(new File(rootPath + "svg.pdf")));
document.open();

// Add paragraphs to the document...
document.add(new Paragraph("Paragraph 1"));
document.add(new Paragraph(" "));

// Boilerplate for drawing the SVG to the PDF.
String parser = XMLResourceDescriptor.getXMLParserClassName();
SAXSVGDocumentFactory factory = new SAXSVGDocumentFactory(parser);
UserAgent userAgent = new UserAgentAdapter();
DocumentLoader loader = new DocumentLoader(userAgent);
BridgeContext ctx = new BridgeContext(userAgent, loader);
ctx.setDynamicState(BridgeContext.DYNAMIC);
GVTBuilder builder = new GVTBuilder();
PdfContentByte cb = writer.getDirectContent();

// Parse the SVG and draw it to the PDF.
Graphics2D g2d = new PdfGraphics2D(cb, 725, 400);
SVGDocument chart = factory.createSVGDocument(rootPath, new StringReader(svg));
GraphicsNode chartGfx = builder.build(ctx, chart);
chartGfx.paint(g2d);
g2d.dispose();

// Add paragraphs to the document...
document.add(new Paragraph("Paragraph 2"));
document.add(new Paragraph(" "));

document.close(); 
```

请注意，这会将 SVG 绘制到您正在处理的 PDF 中。SVG 显示为文本上方的浮动层。我仍在努力移动/缩放它并让它与文本内联，但希望这超出了问题的直接范围。

希望这能有所帮助。

干杯

编辑：我能够使用以下方法将我的 svg 实现为内联对象。注释行用于添加快速边框以检查定位。

```
SAXSVGDocumentFactory factory = new SAXSVGDocumentFactory(XMLResourceDescriptor.getXMLParserClassName());
UserAgent userAgent = new UserAgentAdapter();
DocumentLoader loader = new DocumentLoader(userAgent);
BridgeContext ctx = new BridgeContext(userAgent, loader);
ctx.setDynamicState(BridgeContext.DYNAMIC);
GVTBuilder builder = new GVTBuilder();
SVGDocument svgDoc = factory.createSVGDocument(rootPath, new StringReader(svg));
PdfTemplate svgTempl = PdfTemplate.createTemplate(writer, Float.parseFloat(svgDoc.getDocumentElement().getAttribute("width")), Float.parseFloat(svgDoc.getDocumentElement().getAttribute("height")));
Graphics2D g2d = new PdfGraphics2D(svgTempl, svgTempl.getWidth(), svgTempl.getHeight());
GraphicsNode chartGfx = builder.build(ctx, svgDoc);
chartGfx.paint(g2d);
g2d.dispose();
Image svgImg = new ImgTemplate(svgTempl);
svgImg.setAlignment(Image.ALIGN_CENTER);
//svgImg.setBorder(Image.BOX);
//svgImg.setBorderColor(new BaseColor(0xff, 0x00, 0x00));
//svgImg.setBorderWidth(1);
document.add(svgImg); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-08T16:13:16.930

这是我从我在这里找到的帖子和官方示例中得出的：

```
/**
 * Reads an SVG Image file into an com.itextpdf.text.Image instance to embed it into a PDF
 * @param svgPath SVG filepath
 * @param writer PdfWriter instance 
 * @return Instance of com.itextpdf.text.Image holding the SVG file
 * @throws IOException
 * @throws BadElementException
 */
private static Image getSVGImage(String svgPath, PdfWriter writer) throws IOException, BadElementException {
    SVGDocument svgDoc = new SAXSVGDocumentFactory(null).createSVGDocument(null, new FileReader(svgPath));

    // Try to read embedded height and width
    float svgWidth = Float.parseFloat(svgDoc.getDocumentElement().getAttribute("width").replaceAll("[^0-9.,]",""));
    float svgHeight = Float.parseFloat(svgDoc.getDocumentElement().getAttribute("height").replaceAll("[^0-9.,]",""));

    PdfTemplate svgTempl = PdfTemplate.createTemplate(writer, svgWidth, svgHeight);
    Graphics2D g2d = new PdfGraphics2D(svgTempl, svgTempl.getWidth(), svgTempl.getHeight());
    GraphicsNode chartGfx = (new GVTBuilder()).build(new BridgeContext(new UserAgentAdapter()), svgDoc);
    chartGfx.paint(g2d);
    g2d.dispose();

    return new ImgTemplate(svgTempl);
} 
```

Image 实例可以很容易地添加到 pdf 中（在我的情况下作为签名）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-02T21:44:22.867

我最近了解到，您可以将 Graphics2D 对象直接发送到 iText，生成的 PDF 文件与可缩放矢量图形一样好。从您的帖子中，听起来这可能会解决您的问题。

```
Document document = new Document(PageSize.LETTER);
PdfWriter writer = null;
try {
    writer = PdfWriter.getInstance(document, new FileOutputStream(your file name));
} catch (Exception e) {
    // do something with exception
}

document.open();

PdfContentByte cb = writer.getDirectContent();
PdfTemplate tp = cb.createTemplate(width, height);
Graphics2D g2 = tp.createGraphics(width, height, new DefaultFontMapper());

// Create your graphics here - draw on the g2 Graphics object

g2.dispose();
cb.addTemplate(tp, 0, 100); // 0, 100 = x,y positioning of graphics in PDF page
document.close(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-05T10:53:32.700

这对我使用 itext 7.1.3 通过 SVGConverter 渲染 SVG 图像很有用。

```
PdfWriter writer = new PdfWriter(new FileOutputStream("/home/users/Documents/pdf/new.pdf"));

        PdfDocument pdfDoc = new PdfDocument(writer);

        Document doc = new Document(pdfDoc);

        URL svgUrl = new File(svg).toURI().toURL();

        doc.add(new Paragraph("new pikachu"));                      

        Image image = SvgConverter.convertToImage(svgUrl.openStream(), pdfDoc);                 
        doc.add(image);

        doc.close(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-23T06:06:48.027

新版本的 iText 也支持 SVG 文件。请参阅[此](https://itextpdf.com/en/resources/releases/release-itext-712)页面。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-25T00:22:46.357

我可以使它工作的唯一方法是**将矢量 SVG 文件转换为矢量 PDF 文件**，然后将其插入我的 itext/openpdf PDF。

你没看错：我在我的 PDF 中插入了一个矢量 PDF，效果很好。您可以放大，一切正常。

我在 Spring Boot 应用程序中使用此代码：

```
public void addVectorToPDF(PdfWriter writer) throws IOException {

    // My SVG image that I converted to PDF format, keeping the vectorial format.
    URL resource = this.getClass().getResource("/resources/my-vectorial-image-pdf-format.pdf");

    PdfReader reader = new PdfReader(resource);

    // Getting the page 01 of the PDF. The PDF has only the
    // SVG image inside, so the page 01 is everything.
    PdfImportedPage page = writer.getImportedPage(reader, 1);

    float posX = 50;
    float posY = 300;
    float scale = 0.75F;
    PdfContentByte canvas = writer.getDirectContent();

    // adding vectorial image pdf to my pdf
    canvas.addTemplate(page, scale, 0, 0, scale, posX, posY);

} 
```

您可以使用 zamzar.com 将矢量 SVG 转换为 PDF。它对我来说效果很好。

在我的例子中，使用 Batik 和 Graphics2D 的解决方案没有保留矢量格式。

# mysql - MySql 5.1 版准备好用于生产了吗？

> ID：408044
> 
> 赞同：1
> 
> 时间：2009-01-02T21:09:54.997
> 
> 标签：mysql

我们目前在我们的应用程序中使用 Mysql 5.0 版，并且正在考虑迁移到 5.1 版 5.1.30 版有多稳定？

编辑

5.0 版本发布时，需要很长时间才能稳定

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-02T21:18:48.397

MySQL 5.1 最近进入了[GA](http://dev.mysql.com/downloads/mysql/5.1.html)，所以显然开发团队认为它已经准备好了。我阅读了[很多](http://mysql-qa.blogspot.com/2008/12/mysql-51-ga-is-of-good-quality.html) [关于此版本质量](http://blog.internetnews.com/skerner/2008/12/mysql-51-goes-ga-monty-not-hap.html)[的](http://infosecurity.us/?p=3985) [对比](http://www.mysqlperformanceblog.com/2008/12/10/mysql-51-went-to-ga-was-it-a-good-move/) [意见](http://www.xaprb.com/blog/2008/12/20/today-i-recommended-mysql-51/) - 总体感觉是它优于当时的 5.0，但您最好检查一下您是否不受某些尚未解决的边缘情况的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-02T21:27:42.027

不幸的是，围绕 MySQL 5.1 GA 版本存在一些 FUD，谴责不够完美的质量流程和开放错误列表。一旦尘埃落定，普遍的看法是肯定的，它并不完美，但仍然比 MySQL 5.0 好。

即使每个人都称赞它是完美的，您仍然应该在部署任何升级之前彻底测试您的应用程序。您的应用程序对 MySQL 的使用可能不会遇到任何已知的开放错误，但可能会遇到未知的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T21:35:45.333

以前的 MySQL 版本还不够成熟，但已被主要和次要站点成功使用。然而，由于 MySQL 的出处不断发展，人们对 MySQL 的期望值正在提高。

我一直发现在使用 MySQL 时牢记三件事至关重要。

1.  坚持上一版本的主流最佳实践。现有特征很少退化。

2.  彻底测试（对于任何产品都是如此）——你永远无法确定你对某个特性的理解是否与供应商的实现相匹配。

3.  以自己的方式接近 MySQL；不要将其与其他 RDBMS 产品进行比较。它对产品职责和开发人员职责的看法与其他主要商业供应商的 RDBMS 产品不同。

# python - Python Outlook 2007 COM 入门

> ID：408046
> 
> 赞同：7
> 
> 时间：2009-01-02T21:12:50.827
> 
> 标签：python, com, outlook, outlook-2007

我受到了[从 Python 修改 Microsoft Outlook 联系人的](https://stackoverflow.com/questions/405724/modifying-microsoft-outlook-contacts-from-python)启发——我希望尝试使用该`win32com`包编写一些更烦人的 Outlook 使用脚本。我是一个被困在 Windows 用户隔间里的 Linux 用户，所以我对 COM 了解不多。

我正在寻找有关 COM 是否允许通过反射`win32com`或是否有关于 Outlook 2007 COM 对象的文档的信息。欢迎您认为有帮助的任何其他指针！

我找到了[Programming Outlook With Python](http://wiki.exchange4linux.org/e4lwiki/n-h.support.wiki/uploads/programming_outlook_with_python.pdf)，但我使用的是 Outlook 2007，所以我想了解更多关于 Outlook 2000 信息中有多少仍然适用的信息。

蒂亚！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-02T21:26:31.173

回答您有关文档的问题。这是我在开发 Outlook 宏时经常访问的两个链接。虽然这些网站主要专注于使用 MS 技术进行开发，但一旦您了解了如何使用 COM，大部分代码都可以很容易地转换为 python。

*   [http://msdn.microsoft.com/en-us/library/bb176619.aspx]](http://msdn.microsoft.com/en-us/library/bb176619.aspx]) [1](http://www.outlookcode.com/)
*   [http://www.outlookcode.com/](http://www.outlookcode.com/)
*   交易 Outlook 安全[http://www.outlookcode.com/article.aspx?ID=52](http://www.outlookcode.com/article.aspx?ID=52)
*   赎回[http://www.dimastr.com/redemption/](http://www.dimastr.com/redemption/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-02T21:50:56.210

一般来说，考虑到 Microsoft 对向后兼容性的关注，对对象模型的旧引用可能仍然有效。

至于您是否能够在 Python 中使用 win32com for Outlook，是的，您应该能够使用它来对 Outlook 对象模型进行后期绑定调用。这是一个描述如何使用 Excel 进行操作的页面：

[http://oreilly.com/catalog/pythonwin32/chapter/ch12.html](http://oreilly.com/catalog/pythonwin32/chapter/ch12.html)

您应该注意的一个问题是，当外部程序尝试访问对象模型并在 Outlook 中执行操作时，Outlook 会弹出一个安全对话框。您将*无法*取消此对话框。

如果您想避免该对话框，最好在 VBA for Outlook 中创建在会话中加载的宏，并将按钮放在新的 CommandBar 上以执行它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-22T04:52:47.243

这是我几年前的实现。我用它来自动接收和发送电子邮件。不确定这是否适用于 2010。这也取决于 Redemption。

```
import win32com.client,os,re
from utils.autoencode import autoencode 
generated='2D5E2D34-BED5-4B9F-9793-A31E26E6806Ex0x4x7.py'
mapi_utils=win32com.client.Dispatch('Redemption.MAPIUtils')
olFolderDeletedItems=3
olFolderOutbox=4
olFolderSentItems=5
olFolderInbox=6
olFolderCalendar=9
olFolderContacts=10
olFolderJournal=11
olFolderNotes=12
olFolderTasks=13
class Attachment:
    def __init__(self,CreationTime,attachement):
    self.CreationTime=CreationTime
    self.attachement=attachement
    self.FileName=attachement.FileName
    self.FileSize=attachement.FileSize
    self.text=self.attachement.AsText

    def Save(self,folder,filename=None,group=True):
    if group:
        folderGroup=re.sub('\\W','',str(self.CreationTime))
        subfolder=os.path.join(folder,folderGroup)
        if not os.path.isdir(subfolder):
        os.mkdir(subfolder)
    else:
        folderGroup=''
    if filename:
        path=os.path.join(folder,folderGroup,filename)
    else:
        path=os.path.join(folder,folderGroup,self.FileName)
    if os.path.isdir(folder):
        self.attachement.SaveAsFile(path.replace('/','\\'))
        return path

class Attachments:
    def __init__(self,CreationTime,Attachments):
    self.CreationTime=CreationTime
    self.Attachments=Attachments
    def __iter__(self):
    return self.next()
    def next(self):
    for idx in range(self.Attachments.Count):
        idx+=1
        yield Attachment(self.CreationTime,self.Attachments.Item(idx))

class Message:
    def __init__(self,store,folder,msg):
    self.store=store
    self.folder=folder
    self.msg=msg
    self.Attachments=Attachments(self.msg.CreationTime,msg.Attachments)
    self.body=msg.Body
    self.body_format=msg.BodyFormat
    self.html=msg.HTMLBody
    self.subject=msg.Subject
    self.unread=msg.UnRead
    self.id=msg.EntryID
    def __str__(self):
    return str('%s-%s-%s'%(self.store.Name,self.folder, self.msg))
    def read(self,bool=True):
    status=bool==False
    self.msg.UnRead=status
class Inbox:
    def __init__(self,session,store,folder,wantedFolder=None):
    self.session=session
    self.store=store
    self.folder=folder
    self.wantedFolder=wantedFolder
    self.Name=folder.Name
    def __getitem__(self,name):
    self.wantedFolder=name
    return self.next()    
    def __str__(self):
    return '%s-%s'%(self.store.Name,self.Name)

    def __iter__(self):
    return self.next()
    def subFolder(self,name):
    self.wantedFolder=name
    return self.next()
    def next(self):
    if self.wantedFolder:
        subFolders=self.folder.Folders
        for idx in range(subFolders.Count):
        idx+=1
        subfolder=subFolders.Item(idx)
        if subfolder.Name==self.wantedFolder:
            for msg in subfolder.Items:
            yield Message(self.store,self.folder,msg)
    else:
        for msg in self.folder.Items:
        yield Message(self.store,self.folder,msg)

class Store:
    def __init__(self,session,store):
    self.session=session
    self.store=store
    self.Name=store.Name
    self.Inbox=Inbox(self.session,self.store,self.session.GetDefaultFolder(olFolderInbox))
    def __str__(self):
    return self.Name
    def __iter__(self):
    return self.next()
    def next(self,folder=None):
    pass 

class rdo:
    def __init__(self):
    '''Outlook Redemption RDO wrapper'''
    self.session = win32com.client.gencache.EnsureDispatch("Redemption.RDOSession")

    self.session.Logon()
    self.stores={}
    for store in self.session.Stores:
        self.stores[store.Name]=Store(self.session,store)
    self.default_store=self.session.Stores.DefaultStore.Name
    def __getitem__(self,name):
    if self.stores.has_key(name):
        return self.stores[name]
    def __iter__(self):
    return self.next()
    def next(self):
    stores=self.stores.keys()
    yield self.stores[stores.pop(stores.index(self.default_store))]
    for store in stores:
        yield self.stores[store]
    def getStore(self,name):
    if self.stores.has_key(name):
        return self.stores[name]
    else:
        return False
    def getSharedMailbox(self,name):
    try:
        return Store(self.session,self.session.GetSharedMailbox(name))
    except Exception,e:
        if 'Could not resolve in GAL' in  e.args[2][2]:
        raise Exception('Mailbox could not be found')
        else:
        raise Exception ('Unknown error: %s'%e.args[2][2])

if __name__=='__main__':
    r=rdo()
    inbox = r.getStore('Mailbox - Foo').Inbox
    for msg in inbox.subFolder('test'):
    print msg.subject,msg.id 
```

# java - JPA查询中子对象的排序返回

> ID：408051
> 
> 赞同：9
> 
> 时间：2009-01-02T21:15:22.473
> 
> 标签：java, hibernate, jpa

因此，如果我的 JPA 查询是这样的： Select distinct p from Parent p left join fetch p.children order by p.someProperty

我正确地得到了由 p.someProperty 排序的结果，并且我正确地得到了我的 p.children 集合急切地获取和填充。但我想让我的查询类似于“按 p.someProperty，p.children.someChildProperty 排序”，以便填充在每个父对象中的集合由 someChildProperty 子排序。

当我考虑为这些调用实际生成的 sql 时，这似乎很直观，但当它尝试映射回分层对象时，我猜想更少。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-03T02:52:47.207

为了保持顺序，请使用[TreeSet](http://java.sun.com/javase/6/docs/api/java/util/TreeSet.html)。就 parent 内部集合的排序而言，只需在代码中使用[Comparator](http://java.sun.com/javase/6/docs/api/java/util/Comparator.html)即可。

好吧，在你的父实体类中的集合定义上试试这个。我希望你明白我的意思。

您可以使用此 JPA 注释，

```
@javax.persistence.OrderBy(value = "fieldName") 
```

或者这个 Hibernate 特定的，

```
@org.hibernate.annotations.OrderBy(clause = "FIELD_NAME asc") 
```

你也可以使用这个，

```
@org.hibernate.annotations.Sort(type = SortType.NATURAL) 
```

或者

```
@org.hibernate.annotations.Sort(type = SortType.COMPARATOR) 
```

在比较器的情况下，必须有一个比较器。其他可能仅适用于字符串集合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-05-14T17:44:08.513

如果您使用的是 springboot 和 jpa 这是示例

在父类中添加如下代码

```
@OneToMany(mappedBy = "user")
@OrderBy(value = "position desc ")
private List<UserAddresses> userAddresses; 
```

在上面的代码中， position 是**UserAddresses**类中的字段名称，而**desc**是顺序。您可以像 sql order by 一样传递**asc**或**desc 。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T04:48:46.693

Adeel 基本上做到了这一点。如果您的集合多次包含相同的实体，您还可以将它们与 List 一起使用，这可能很重要。

# javascript - 如何使用Javascript在asp.net页面中显示是/否按钮

> ID：408053
> 
> 赞同：2
> 
> 时间：2009-01-02T21:17:50.800
> 
> 标签：javascript, asp.net, button, confirmation

我必须在我的 asp.net 页面上的某些条件下显示是/否按钮，我使用 windows.confirm() 来显示，但 windows.confirm 显示确定/取消按钮，有什么方法可以显示是/否按钮asp.net 页面而不是使用 Javascript 的 Ok/Cancel ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-02T21:54:50.100

如果您想保持简单，只需检查一些 jQuery 或 YUI 插件，您可以通过几行代码来启动并运行它。

例如，[这个](http://www.ericmmartin.com/simplemodal/)使用 jQuery，而[这个](http://developer.yahoo.com/yui/examples/container/simpledialog-quickstart.html)使用 YUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-02T21:20:20.747

[http://bytes.com/groups/javascript/149838-yes-no-dialog-box-javascript](http://bytes.com/groups/javascript/149838-yes-no-dialog-box-javascript)

在那里阅读:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T21:21:33.897

您无法更改 JavaScript 警报上的按钮文本，虽然您无法更改 VBScript 消息框上的按钮文本，但它具有不同的文本。我解决这个问题的方法是开发一个自定义 div，其中包含带有正确文本的按钮，这些按钮使用绝对定位和阴影效果显示，以呈现消息框的外观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-02T21:21:42.400

如果不创建自定义模式拨号或使用已构建的模式，请勿跨浏览器。如果你可以使用 ms ajax 那么它有一个你可以使用的模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-02T21:23:40.693

你不能使用提示来做到这一点，你可以显示一个隐藏的 div，其中包含 html 控件和连接到按钮的 javascript。当你想问问题时，显示以前隐藏的 div。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-01T18:10:48.923

试试这个。

JS代码：`if(confirm('Are you sure???')){ {

}别的{

}`

# prolog - 与自变量的析取应该返回什么？

> ID：408055
> 
> 赞同：2
> 
> 时间：2009-01-02T21:19:29.597
> 
> 标签：prolog

以下内容会导致什么结果：

```
p(X,Y) :- q(X).
p(X,Y) :- r(Y).
q(a).
r(b). 
```

我手边没有 Prolog 编译器，所以我无法测试如果你再问会发生什么`p(X,Y)`。代码甚至可以编译吗？会`p`返回两个答案，每个答案都有一个未绑定的变量吗？

在现实世界的场景中，我认为`p(X,Y)`这没有多大意义（人们可能更愿意`p(X)`遵循其中一个`q(X)`or `r(X)`），但我对这里实际发生的事情以及外围情况感兴趣，在这种退化的情况下*应该*发生什么.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T10:10:20.210

*p 会返回两个答案，每个答案都有一个未绑定的变量吗？*

是的。您需要输入一个 ; 查看更多解决方案：

| ?- p(X,Y)。

X = 一个？;

Y = b

是的 | ?-

这与理论一致，其中未绑定的变量意味着任何值都可以替换该变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T06:12:37.413

so.p 包含：

```
p(X,Y) :- q(X).
p(X,Y) :- r(Y).
q(a).
r(b). 
```

* * *

```
$ gprolog
GNU Prolog 1.3.0
By Daniel Diaz
Copyright (C) 1999-2007 Daniel Diaz
| ?- consult('so.p').
compiling /home/jboker/Desktop/so.p for byte code...
/home/jboker/Desktop/so.p:1: warning: singleton variables [Y] for p/2
/home/jboker/Desktop/so.p:2: warning: singleton variables [X] for p/2
/home/jboker/Desktop/so.p compiled, 5 lines read - 506 bytes written, 8 ms

yes
| ?- p(X,Y).

X = a ?

yes 
```

# select - Boost Message Queue 不是基于 POSIX 消息队列？无法选择（2）？

> ID：408059
> 
> 赞同：8
> 
> 时间：2009-01-02T21:21:12.087
> 
> 标签：select, boost, message-queue, interprocess, epoll

我想我会使用 Boost.Interprocess 的[消息队列](http://www.boost.org/doc/libs/1_37_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.message_queue)代替套接字在一个主机内进行通信。但是在深入研究之后，似乎这个库出于某种原因避开了 POSIX 消息队列工具（我的 Linux 系统支持），而是在 POSIX 共享内存之上实现。界面非常相似，您可能不会马上猜到，但似乎确实如此。

对我来说不利的是，`shm_open(3)`与`select(2)`通过`mq_open(3)`.

在这种情况下，Boost 的库似乎丢失了。有谁知道为什么会这样？即使 POSIX 消息队列仅在某些系统上可用，我希望 Boost 在可用的地方使用该工具，并仅在必要时重新实现它。POSIX 系统是否存在一些我还不认识的缺陷？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-08T12:53:11.203

前几天我在使用 Boost.Interprocess 的同步类时遇到了类似的情况：即条件类。它以“通用”方式实现，但它的实现方式是使用效率*非常*低的自定义自旋锁（至少在 OS X 上）。出于所有意图和目的，它使同步类毫无用处。

以我的经验，Interprocess 库还很不成熟。我将它用于共享内存，它确实工作得很好，但有一些粗糙的边缘，我不得不修改一些“缺失的功能”，例如动态调整共享内存的大小等。

总之，不要指望这个库是灵丹妙药。这很好，但目前并不例外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T23:46:49.497

是的，不幸的是它没有。在挖掘资源后意识到这一点时，我也很失望。

但这是这个事实的另一个（好的）方面：如果您的程序使用`boost::asio`，您可以将 POSIX 消息队列 API 包装为**另一个*数据报*数据源**`boost::interprocess`，如果它是...的一部分，这个（恕我直言）会更好用。这将是非常重要的，但是（恕我直言）绝对值得这样做，所以你可以以统一的方式使用 MQ 并使用其他东西的*力量......*`boost::asio`

...在我的下一个项目中，如果我再次需要 POSIX MQ，我肯定会采用这种方式 :)

# unicode - 自动检测字符编码 (UTF-16) 的 findstr 或 grep

> ID：408079
> 
> 赞同：13
> 
> 时间：2009-01-02T21:28:17.987
> 
> 标签：unicode, windows-xp, windows-vista, utf-16, findstr

我想做这个：

```
 findstr /s /c:some-symbol * 
```

或 grep 等价物

```
 grep -R some-symbol * 
```

但我需要该实用程序来自动检测以 UTF-16（和朋友）编码的文件并适当地搜索它们。我的文件中甚至还有字节排序标记 FFEE，所以我什至不寻找英雄的自动检测。

有什么建议么？

* * *

我指的是 Windows Vista 和 XP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:58:25.197

一种解决方法是将 UTF-16 转换为 ASCII 或 ANSI

```
TYPE UTF-16.txt > ASCII.txt 
```

然后你可以使用 FINDSTR。

```
FINDSTR object ASCII.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-04T13:55:54.217

感谢您的建议。我指的是 Windows Vista 和 XP。

我还使用免费的[Sysinternals`strings.exe`](http://technet.microsoft.com/en-us/sysinternals/bb897439.aspx)发现了这种解决方法：

```
C:\> strings -s -b dir_tree_to_search | grep regexp 
```

`Strings.exe`提取它找到的所有字符串（来自二进制文件，但也适用于文本文件）并在每个结果前面加上文件名和冒号，因此在正则表达式中考虑到这一点（或使用 cut 或管道中的其他步骤）。这`-s`使它进行递归提取并`-b`仅抑制横幅消息。

最终，我仍然对旗舰搜索实用程序 Gnu`grep`并且`findstr`不原生处理 Unicode 字符编码感到惊讶。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T19:23:45.013

```
findstr /s /c:some-symbol * 
```

可以用以下字符编码感知命令替换：

```
for /r %f in (*) do @find /i /n "some-symbol" "%f" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-07-21T20:31:56.060

在 Windows 上，您还可以使用 find.exe。

```
find /i /n "YourSearchString" *.* 
```

唯一的问题是这会打印文件名，然后是匹配项。您可以通过管道过滤它们到 findstr

```
find /i /n "YourSearchString" *.* | findstr /i "YourSearchString" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-02T22:22:45.943

根据 Damon Cortesi 的这篇[博客文章](http://dcortesi.com/2008/07/16/unicode-grep/)，您发现 grep 不适用于 UTF-16 文件。但是，它提出了这种解决方法：

```
for f in `find . -type f | xargs -I {} file {} | grep UTF-16 | cut -f1 -d\:`
        do iconv -f UTF-16 -t UTF-8 $f | grep -iH --label=$f ${GREP_FOR}
done 
```

这显然适用于 Unix，不确定 Windows 上的等价物是什么。那篇文章的作者还提供了一个 shell 脚本来执行上述操作，您可以在 github 上[找到](http://github.com/dacort/ugrep/tree/master)。

这只 greps 是 UTF-16 的文件。您还可以以正常方式 grep ASCII 文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-24T22:46:41.620

在更高版本的 Windows 中，UTF-16 支持开箱即用。`chcp`如果没有，请尝试通过命令更改活动代码页。

在我的情况下，`findstr`单独使用 UTF-16 文件失败，但它适用于`type`：

```
type *.* | findstr /s /c:some-symbol 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-03T14:50:27.477

您没有说要在哪个平台上执行此操作。

在 Windows 上，您可以使用[PowerGREP](http://www.powergrep.com)，它会自动检测以字节顺序标记开头的 Unicode 文件。（还有一个选项可以自动检测没有 BOM 的文件。自动检测对于 UTF-8 非常可靠，但对于 UTF-16 是有限的。）

# matlab - MATLAB中有foreach吗？如果是这样，如果基础数据发生变化，它会如何表现？

> ID：408080
> 
> 赞同：177
> 
> 时间：2009-01-02T21:28:47.877
> 
> 标签：matlab, syntax

MATLAB中有foreach结构吗？如果是这样，如果底层数据发生变化（即，如果对象被添加到集合中）会发生什么？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2009-01-02T22:40:09.730

MATLAB 的**FOR**循环本质上是静态的；**与其他语言中的for(initialization;condition;increment)**循环结构不同，您不能在迭代之间修改循环变量。这意味着无论 B 的值如何，以下代码始终打印 1、2、3、4、5。

```
A = 1:5;

for i = A
    A = B;
    disp(i);
end 
```

如果您希望能够在迭代期间响应数据结构的变化，[**WHILE**循环](https://www.mathworks.com/help/matlab/ref/while.html?s_tid=doc_ta)可能更合适 --- 您将能够在每次迭代时测试循环条件，并设置循环变量的值（ s) 如您所愿：

```
n = 10;
f = n;
while n > 1
    n = n-1;
    f = f*n;
end
disp(['n! = ' num2str(f)]) 
```

顺便说一句，当在迭代期间修改数据结构时[，Java（可能还有其他语言）中的](http://java.sun.com/j2se/1.5.0/docs/guide/language/foreach.html)**for-each**循环会产生未指定的行为。如果您需要修改数据结构，则应使用适当的**[Iterator](http://java.sun.com/javase/6/docs/api/java/util/Iterator.html)**实例，该实例允许在您正在迭代的集合中添加和删除元素。好消息是 MATLAB 支持 Java 对象，因此您可以执行以下操作：

```
A = java.util.ArrayList();
A.add(1);
A.add(2);
A.add(3);
A.add(4);
A.add(5);

itr = A.listIterator();

while itr.hasNext()

    k = itr.next();
    disp(k);

    % modify data structure while iterating
    itr.remove();
    itr.add(k);

end 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2009-01-03T04:43:42.630

Zach 对这个问题的直接回答是正确的。

一个有趣的旁注是，以下两个循环的执行方式不同：

```
for i=1:10000
  % do something
end
for i=[1:10000]
  % do something
end 
```

第一个循环创建一个`i`标量变量，并像 C for 循环一样对其进行迭代。请注意，如果您`i`在循环体中进行修改，修改后的值将被忽略，正如 Zach 所说。在第二种情况下，Matlab 创建一个 10k 元素数组，然后遍历数组的所有元素。

这意味着

```
for i=1:inf
  % do something
end 
```

有效，但是

```
for i=[1:inf]
  % do something
end 
```

不会（因为这需要分配无限内存）。有关详细信息，请参阅[Loren 的博客](http://blogs.mathworks.com/loren/2006/07/19/how-for-works/)。

另请注意，您可以迭代元胞数组。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-10-05T11:08:55.887

MATLAB [for](http://www.mathworks.co.uk/help/matlab/ref/for.html)循环基本上提供了巨大的灵活性，包括[foreach](/questions/tagged/foreach "显示标记为“foreach”的问题")功能。这里有一些例子：

1) 定义开始、增量和结束索引

```
for test = 1:3:9
   test
end 
```

2）循环向量

```
for test = [1, 3, 4]
   test
end 
```

3）循环字符串

```
for test = 'hello'
   test
end 
```

4) 循环一维元胞数组

```
for test = {'hello', 42, datestr(now) ,1:3}
   test
end 
```

5) 循环二维元胞数组

```
for test = {'hello',42,datestr(now) ; 'world',43,datestr(now+1)}
   test(1)   
   test(2)
   disp('---')
end 
```

6) 使用结构体数组的字段名

```
s.a = 1:3 ; s.b = 10  ; 
for test = fieldnames(s)'
   s.(cell2mat(test))
end 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2009-06-26T11:25:31.670

如果您尝试循环遍历单元格数组并将某些内容应用于单元格中的每个元素，请查看`cellfun`. 还有`arrayfun`, `bsxfun`,`structfun`可以简化你的程序。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-01-02T21:38:21.303

哦！整洁的问题。

Matlab 的 for 循环将矩阵作为输入并遍历其列。Matlab 还按值处理几乎所有内容（没有通过引用），所以我希望它会拍摄 for 循环输入的快照，因此它是不可变的。

这是一个可能有助于说明的示例：

```
>> A = zeros(4); A(:) = 1:16

A =

     1     5     9    13
     2     6    10    14
     3     7    11    15
     4     8    12    16

>> i = 1; for col = A; disp(col'); A(:,i) = i; i = i + 1; end;
     1     2     3     4

     5     6     7     8

     9    10    11    12

    13    14    15    16

>> A

A =

     1     2     3     4
     1     2     3     4
     1     2     3     4
     1     2     3     4 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-07-28T19:55:00.233

当迭代字符串元胞数组时，循环变量（我们称它为`f`）变成一个单元素元胞数组。必须到处写`f{1}`会变得乏味，而修改循环变量提供了一个干净的解决方法。

```
% This example transposes each field of a struct.
s.a = 1:3;
s.b = zeros(2,3);
s % a: [1 2 3]; b: [2x3 double]
for f = fieldnames(s)'
    s.(f{1}) = s.(f{1})';
end
s % a: [3x1 double]; b: [3x2 double]

% Redefining f simplifies the indexing.
for f = fieldnames(s)'
    f = f{1};
    s.(f) = s.(f)';
end
s % back to a: [1 2 3]; b: [2x3 double] 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2011-10-27T13:05:55.010

假设您有一个数据数组：

```
n = [1    2   3   4   6   12  18  51  69  81  ] 
```

然后你可以像这样'foreach'它：

```
for i = n, i, end 
```

这将回显 n 中的每个元素（当然，用更有趣的东西替换 i 也是可能的！）

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-10-28T02:49:37.497

我认为这是OP真正想要的：

```
array = -1:0.1:10

for i=1:numel(array)
    disp(array(i))
end 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-02-27T16:12:52.507

截至今天（2 月 27 日），[MATLAB File Exchange 上有一个新的 For-Each 工具箱，](http://blogs.mathworks.com/pick/2015/02/27/for-each/)它实现了`foreach`. `foreach`不是 MATLAB 语言的一部分，但使用此工具箱使我们能够模拟`foreach`将要做什么。

# vb.net - 哪个更快？ByVal 还是 ByRef？

> ID：408101
> 
> 赞同：39
> 
> 时间：2009-01-02T21:45:44.020
> 
> 标签：vb.net, performance, byref, byval

在 VB.NET 中，哪个更快用于方法参数，`ByVal`或者`ByRef`？

此外，哪个在运行时（RAM）消耗更多资源？

* * *

我通读了[这个问题](https://stackoverflow.com/questions/290189/best-practice-byref-or-byval-in-net)，但答案并不适用或不够具体。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2009-01-02T22:02:03.830

Byval 和 ByRef 参数应该根据需求和关于它们如何工作的知识而*不是*速度来使用。

[http://www.developer.com/net/vb/article.php/3669066](http://www.developer.com/net/vb/article.php/3669066)

*回应斯劳的评论——*

**哪个在运行时消耗更多资源？**

参数在堆栈上传递。堆栈非常快，因为它的内存分配只是一个指针增量，用于保留新的“帧”或“分配记录”。如果使用任何“堆栈”空间来传递参数，大多数 .NET 参数不会超过机器寄存器的大小。事实上，基本类型和指针都是在堆栈上分配的。.NET 中的堆栈大小限制为 1 MB。这应该让您了解参数传递消耗的资源有多少。

您可能会发现这一系列文章很有趣：

*[通过堆栈分配提高性能（.NET 内存管理：第 2 部分）](http://www.atalasoft.com/cs/blogs/rickm/archive/2008/04/15/improving-performance-through-stack-allocation-net-memory-management-part-2.aspx)*

**哪个更快？ByVal 或 ByRef。**

准确和准确地测量充其量是困难的 - 取决于您测量的上下文，但我编写的一个基准测试调用了 1 亿次方法得出以下结果：

*   参考类型 - ByRef 传递：420 毫秒
*   参考类型 - 通过 ByVal：382 毫秒
*   值类型 - ByRef 传递：421 毫秒
*   值类型 - 通过 ByVal：416 毫秒

```
Public Sub Method1(ByRef s As String)
    Dim c As String = s
End Sub

Public Sub Method2(ByVal s As String)
    Dim c As String = s
End Sub

Public Sub Method3(ByRef i As Integer)
    Dim x As Integer = i
End Sub

Public Sub Method4(ByVal i As Integer)
    Dim x As Integer = i
End Sub

Sub Main()

    Dim s As String = "Hello World!"
    Dim k As Integer = 5

    Dim t As New Stopwatch

    t.Reset()
    t.Start()
    For i As Integer = 0 To 100000000
        Method1(s)
    Next
    t.Stop()

    Console.WriteLine("Reference Type - ByRef " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()
    For i As Integer = 0 To 100000000
        Method2(s)
    Next
    t.Stop()

    Console.WriteLine("Reference Type - ByVal " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()
    For i As Integer = 0 To 100000000
        Method3(i)
    Next
    t.Stop()

    Console.WriteLine("Value Type - ByRef " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()
    For i As Integer = 0 To 100000000
        Method4(i)
    Next
    t.Stop()

    Console.WriteLine("Value Type - ByVal " & t.ElapsedMilliseconds)

    Console.ReadKey()

End Sub 
```

注释掉每种方法中的变量和赋值 -

*   参考类型 - ByRef 传递：389 毫秒
*   参考类型 - 通过 ByVal：349 毫秒
*   值类型 - ByRef 传递：416 毫秒
*   值类型 - 通过 ByVal：385 毫秒

可以得出结论，通过 ByVal 传递引用类型（字符串、类）将节省一些时间。您也可能会说传递值类型（整数、字节）- ByVal 会节省一些时间。

再一次，时间在宏伟的计划中可以忽略不计。更重要的是正确使用 ByVal 和 ByRef 并了解“幕后”发生的事情。在您的例程中实现的算法肯定会多倍地影响您的程序的运行时间。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-01-02T22:03:03.517

如果您使用的是非常大的值类型（例如，Guid 非常大），通过引用传递参数可能会稍微快一些。在其他情况下，当您通过引用而不是通过值传递时，可能会有*更多的*复制等 - 例如，如果您有一个字节参数，那么一个字节显然小于指针将占用的四个或八个字节如果您通过引用传递它。

在实践中，您几乎不应该担心这一点。尽可能编写*可读性*最强的代码，这几乎总是意味着按值而不是引用传递参数。我很少使用 ByRef。

如果您想提高性能并认为 ByRef 会帮助您，*请*在提交之前仔细（在您的确切情况下）对其进行基准测试。

编辑：我在对另一个（以前接受，现在已删除）答案的评论中注意到，在值类型方面，对于 ByRef 与 ByVal 的含义存在很多误解。我有[一篇关于参数传递](http://pobox.com/~skeet/csharp/parameters.html)的文章，多年来证明它很受欢迎——它使用 C# 术语，但同样的概念也适用于 VB.NET。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-02T21:55:26.263

这取决于。如果您正在传递一个对象，那么它已经在传递一个指针。这就是为什么如果你传入一个 ArrayList（例如）并且你的方法向 ArrayList 添加了一些东西，那么调用代码也会在传入的 ArrayList 中有相同的对象，因为它是相同的 ArrayList。唯一不传递指针的情况是，当您将具有内在数据类型（如 int 或 double）的变量传递给函数时。此时，它会创建一个副本。但是，这些对象的数据量非常小，无论是在内存使用量还是执行速度方面，它几乎都不会产生影响。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-02T22:12:43.357

如果传入引用类型，ByRef 会更慢。

这是因为传入的是指向指针的指针。对对象上字段的任何访问都需要取消引用一个额外的指针，这将需要几个额外的时钟周期才能完成。

如果你传递的是值类型，那么如果结构有很多成员，那么 byref 可能会更快，因为它只传递一个指针，而不是复制堆栈上的值。在访问成员方面，byref 会慢一些，因为它需要做一个额外的指针解引用（sp->pValueType->member vs sp->member）。

大多数情况下，在 VB 中您不必担心这一点。

在 .NET 中，很少有具有大量成员的值类型。它们通常很小。在这种情况下，传入一个值类型与将多个参数传入一个过程没有什么不同。例如，如果您的代码按值传入 Point 对象，则其性能与将 X 和 Y 值作为参数的方法相同。看到 DoSomething(x as integer, y as integer) 可能不会引起性能问题。事实上，你可能永远不会三思而后行。

如果您自己定义大值类型，那么您可能应该重新考虑将它们转换为引用类型。

唯一的另一个区别是执行代码所需的指针间接次数增加。您很少需要在该级别进行优化。大多数时候，您可以解决算法问题，或者您的性能瓶颈与 IO 相关，例如等待数据库或写入文件，在这种情况下，消除指针间接对您没有太大帮助。

因此，与其关注 byval 还是 byref 哪个更快，我建议您真正关注的是什么为您提供了所需的语义。通常，除非您特别需要 byref，否则使用 byval 是个好主意。它使程序更容易理解。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-03T00:25:07.600

虽然我对 .NET 的内部了解不多，但我将讨论我对编译语言的了解。这*不适用于引用类型*，并且对于值类型可能并不完全准确。如果您不知道值类型和引用类型之间的区别，则不应阅读此内容。我假设是 32 位 x86（带有 32 位指针）。

*   传递小于 32 位的值仍然使用堆栈上的 32 位对象。该对象的一部分将是“未使用”或“填充”。传递这样的值不会比传递 32 位值使用更少的内存。
*   传递大于 32 位的值将使用比指针更多的堆栈空间，并且可能会花费更多的复制时间。
*   如果对象是按值传递的，则被调用者可以从堆栈中获取该对象。如果一个对象是通过引用传递的，被调用者必须首先从堆栈中获取对象的地址，然后从其他地方获取对象的值。价值意味着少取一次，对吧？好吧，实际上提取需要由调用者完成 - 但是调用者可能已经因为不同的原因不得不提取，在这种情况下会保存提取。
*   显然，对按引用值所做的任何更改都必须保存回 RAM，而按值参数可以被丢弃。
*   最好按值传递，而不是仅通过引用传递将参数复制到局部变量中而不再次触摸它。

判决：

了解 ByVal 和 ByRef 实际为您做了什么以及了解值类型和引用类型之间的区别比考虑性能要重要得多。第一条规则是**使用更适合您的代码的方法**。

对于大值类型（超过 64 位），按引用传递，除非按值传递有优势（例如更简单的代码、“它才有意义”或接口一致性）。

对于较小的值类型，传递机制对性能没有太大影响，而且无论如何很难预测哪种方法会更快，因为它取决于对象大小、调用者和被调用者如何使用对象，甚至缓存注意事项. 只需为您的代码做任何有意义的事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-02T21:47:39.927

`ByVal`创建变量的副本，同时`ByRef`传递一个指针。因此，我会说这`ByVal`更慢（由于复制需要时间）并且使用更多内存。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-15T10:26:48.937

我的好奇心是根据对象和内存使用情况检查不同的行为

结果似乎表明 ByVal 总是获胜，资源取决于是否收集内存或更少（仅限 4.5.1）

```
Public Structure rStruct
    Public v1 As Integer
    Public v2 As String
End Structure

Public Class tClass
    Public v1 As Integer
    Public v2 As String
End Class

Public Sub Method1(ByRef s As String)
    Dim c As String = s
End Sub

Public Sub Method2(ByVal s As String)
    Dim c As String = s
End Sub

Public Sub Method3(ByRef i As Integer)
    Dim x As Integer = i
End Sub

Public Sub Method4(ByVal i As Integer)
    Dim x As Integer = i
End Sub

Public Sub Method5(ByVal st As rStruct)
    Dim x As rStruct = st
End Sub

Public Sub Method6(ByRef st As rStruct)
    Dim x As rStruct = st
End Sub

Public Sub Method7(ByVal cs As tClass)
    Dim x As tClass = cs
End Sub

Public Sub Method8(ByRef cs As tClass)
    Dim x As tClass = cs
End Sub
Sub DoTest()

    Dim s As String = "Hello World!"
    Dim cs As New tClass
    cs.v1 = 1
    cs.v2 = s
    Dim rt As New rStruct
    rt.v1 = 1
    rt.v2 = s
    Dim k As Integer = 5

    ListBox1.Items.Add("BEGIN")

    Dim t As New Stopwatch
    Dim gt As New Stopwatch

    If CheckBox1.Checked Then
        ListBox1.Items.Add("Using Garbage Collection")
        System.Runtime.GCSettings.LargeObjectHeapCompactionMode = System.Runtime.GCLargeObjectHeapCompactionMode.CompactOnce
        GC.Collect()
        GC.WaitForPendingFinalizers()
        GC.Collect()
        GC.GetTotalMemory(False)
    End If

    Dim d As Double = GC.GetTotalMemory(False)

    ListBox1.Items.Add("Free Memory:   " & d)

    gt.Start()
    t.Reset()
    t.Start()
    For i As Integer = 0 To 100000000
        Method1(s)
    Next
    t.Stop()

    ListBox1.Items.Add("Reference Type - ByRef " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()
    For i As Integer = 0 To 100000000
        Method2(s)
    Next
    t.Stop()

    ListBox1.Items.Add("Reference Type - ByVal " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()
    For i As Integer = 0 To 100000000
        Method3(i)
    Next
    t.Stop()

    ListBox1.Items.Add("Value Type - ByRef " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()
    For i As Integer = 0 To 100000000
        Method4(i)
    Next
    t.Stop()

    ListBox1.Items.Add("Value Type - ByVal " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()

    For i As Integer = 0 To 100000000
        Method5(rt)
    Next
    t.Stop()

    ListBox1.Items.Add("Structure Type - ByVal " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()

    For i As Integer = 0 To 100000000
        Method6(rt)
    Next
    t.Stop()

    ListBox1.Items.Add("Structure Type - ByRef " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()

    For i As Integer = 0 To 100000000
        Method7(cs)
    Next
    t.Stop()

    ListBox1.Items.Add("Class Type - ByVal " & t.ElapsedMilliseconds)

    t.Reset()
    t.Start()

    For i As Integer = 0 To 100000000
        Method8(cs)
    Next
    t.Stop()
    gt.Stop()

    ListBox1.Items.Add("Class Type - ByRef " & t.ElapsedMilliseconds)
    ListBox1.Items.Add("Total time " & gt.ElapsedMilliseconds)
    d = GC.GetTotalMemory(True) - d
    ListBox1.Items.Add("Total Memory Heap consuming (bytes)" & d)

    ListBox1.Items.Add("END")

End Sub

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    DoTest()

End Sub 
```

# java - 如何将 SVN 项目作为 Java 项目签出到 Eclipse 中？

> ID：408110
> 
> 赞同：35
> 
> 时间：2009-01-02T21:49:28.287
> 
> 标签：java, eclipse, svn, ant, subversive

我试图使用 Eclipse 从 SVN 签出一个项目。我尝试使用“Checkout As”将其变成“来自现有 Ant 脚本的 Java 项目”，但项目向导要求该文件已经下载。有没有办法将项目作为 Java 项目签出到 Eclipse 中，而无需先在其他地方下载？

（我正在使用带有 Subversive 的 Eclipse Ganymade 3.4.1。）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-01-02T23:14:40.330

以下是步骤：

*   安装 subclipse 插件（在 eclipse 中提供 svn 连接）并连接到存储库。此处的说明：http: [//subclipse.tigris.org/install.html](http://subclipse.tigris.org/install.html)
*   转到 File->New->Other->在 SVN 类别下，选择 Checkout Projects from SVN。
*   选择项目的根文件夹，然后选择 checkout 作为工作区中的项目。

您似乎正在将 .project 文件检入源存储库。我建议不要签入 .project 文件，以便用户可以拥有自己的文件版本。此外，如果您使用 subclipse 插件，它允许您检出源文件夹并将其配置为 java 项目。此过程为您创建正确的 .project（具有 java 特性），

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-01-02T22:56:42.143

如果它没有作为 Java 项目签入，您可以添加 java 特性，如此[处所示](http://enarion.net/programming/tools/eclipse/changing-general-project-to-java-project/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-01T19:27:02.443

[http://ajmoore.blogspot.com/2007/11/svn-java-project-with-eclipse.html](http://ajmoore.blogspot.com/2007/11/svn-java-project-with-eclipse.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T20:32:47.973

我也必须添加 .classpath，形成一个 java 项目。我创建了一个虚拟 java 项目，并在工作区中查看了这个虚拟 java 项目以查看需要什么。我转移了这两个文件。profile 和 .claspath 到我的已签出，并与我的颠覆服务器断开连接。从那时起，它从一个普通的旧项目变成了一个 java 项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-26T07:20:58.657

如果它们被检查为插件项目，那么您只需要检查它们。但是不要选择“主干”（例如）来加速它。您必须选择所有要签出的项目并继续。Eclipse 会这样识别它们。

# .net - 更改 Compact Framework DataGrid 中的行颜色

> ID：408113
> 
> 赞同：4
> 
> 时间：2009-01-02T21:49:57.757
> 
> 标签：.net, compact-framework, windows-ce

如何在 Windows CE 紧凑框架应用程序的 DataGrid 控件中使用非默认颜色？

我需要用颜色 X 着色一行，用颜色 Y 着色一行（基本上是交替行颜色）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-02T22:04:53.140

您必须手动进行自定义绘图。CF 团队的 Ilya 在[此处的团队博客上](http://blogs.msdn.com/netcfteam/archive/2006/04/25/583542.aspx)有一个简单的示例。

# bash - 在 Unix/Linux 中使用命令行计算日期和时间以跟踪时间

> ID：408116
> 
> 赞同：9
> 
> 时间：2009-01-02T21:50:48.737
> 
> 标签：bash

我正在寻找一种简单的方法来跟踪我使用命令行在项目上工作的时间。我愿意

```
echo "$(date) : Start" >>worktime.txt 
```

当我开始工作并且

```
echo "$(date) : End" >>worktime.txt 
```

当我停止工作时。结果是以下形式的文件：

```
kent@rat:~/work$ cat worktime.txt 
Fri Jan  2 19:17:13 CET 2009 : Start
Fri Jan  2 19:47:18 CET 2009 : End
Fri Jan  2 21:41:07 CET 2009 : Start
Fri Jan  2 22:39:24 CET 2009 : End 
```

“开始”和“结束”作为描述，可以是*任何*其他文本。**可以肯定**的是，每一个*奇数*行都包含一个开始日期和时间，而每一个*偶数*行都包含一个结束日期和时间。

我想做的是通过使用 bash、tr、sed、awk 和其他常见的 Unix/Linux 工具解析文本文件来总结我的工作时间。我更喜欢使用这种方法，而不是使用 Python、Perl、Haskell、Java 等。

欢迎所有想法！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-02T22:02:13.660

假设您使用的是 GNU coreutils，请`date +%s`改为运行。

```
echo $(date +%s) : Start 
```

%s 占位符不符合 POSIX，并且特定于 GNU 日期。它被自纪元以来经过的秒数所取代。接下来编写一个脚本，对差异进行总结。你会做类似的事情

```
#!/bin/bash

total=0
while read LINE; do
  t1=$(echo $LINE |cut -d' ' -f1)
  read LINE
  t2=$(echo $LINE |cut -d' ' -f1)
  total=$(($total+$t2-$t1))
done
echo "$(echo "scale=2; $total/(60*60)" |bc -l)" hours 
```

如果你调用脚本 sum_time.sh 那么你可以调用脚本

`~$ ./sum_time.sh <worktime.txt`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-02T22:41:07.637

wilhelmtell 有一个很棒的脚本，如果您需要使用稍微修改过的版本以便您可以继续使用，`$(date)`而不是`$(date +%s)`这将以相同的方式工作，只需添加一行来重新格式化时间使用`+%s`

```
#!/bin/bash
total=0
while read LINE; do
  d1=$(echo $LINE |cut -c1-28);
  t1=$(date -d "$d1" +%s);
  read LINE
  d2=$(echo $LINE |cut -c1-28);
  t2=$(date -d "$d2" +%s);
  total=$(($total+$t2-$t1));
done
echo $(($total/(60*60))) hours 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-02T22:15:06.753

下面的 awk 脚本应该这样做（虽然没有测试）：

```
BEGIN {
    total_secs = 0
    FS = OFS = ":"
}

function snip_it() {
    $NF = ""; $0 = substr($0, 1, length($0)-1);
}

!(NR % 2) {
    snip_it();
    ("date -d \"" $0 "\" +%s") | getline start_secs
}

NR % 2 {
    snip_it();
    ("date -d \"" $0 "\" +%s") | getline end_secs
    total_secs += (end_secs - start_secs)
}

END {
    print "Total work time of " total_secs " seconds"
} 
```

关键是`date +%s`返回自 1970 年以来的秒数，并`-d`指定替代时间/日期，而不是`now`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-02T23:08:20.703

或者你可以使用已经存在的东西：

[http://fossies.org/linux/misc/old/tt-1.0.tar.gz](http://fossies.org/linux/misc/old/tt-1.0.tar.gz)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T17:47:18.003

由于目标是进行总体计算，例如：

```
total= (FirstEnd - FirstStart ) + (ScndEnd - ScndStart) 
```

可以写成：

```
total= - FirstStart + FirstEnd - ScndStart + ScndEnd ... 
```

唯一的要求是其中只有完成的对`worktime.txt`（每个开始都有相应的结束）。

有一个非常快速的方法：

```
echo $(sed <worktime.txt 's/ : .*$//g'|date -f - +%s|xargs printf "-%s+%s")|bc
5302 
```

这个解决方案真的非常快，因为根本只有 3 个分叉，而不取决于必须处理多少日期。所有分叉只完成 1 次。

这可以写成：

```
echo $(
    sed <worktime.txt 's/ : .*$//g' |
        date -f - +%s |
        xargs printf "-%s+%s"
  ) | bc 
```

# django - 在单个请求中组合多个 Django 模板

> ID：408133
> 
> 赞同：18
> 
> 时间：2009-01-02T22:02:20.773
> 
> 标签：django, django-templates

我想知道是否有人可以帮助我找出解决以下问题的最佳方法。我正在构建一个使用 Django 模板来构建其 Web UI 组件的 Web 应用程序。有许多常见的 HTML 元素，例如页眉/页脚、HTML 标题、标头等。我想对这些进行一次编码，然后将它们与代表核心应用程序功能的其他模板“包含/组合”。

这可能使用 Django 模板吗？如果是这样，我该怎么做呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-01-02T22:24:58.293

您可以使用 django 的`extends`标签。假设您有页眉和页脚。你可以制作一个模板，比如说，foo.django：

```
<h1>My HTML Header</h1>
<!-- an so on -->

{% block content %}
{% endblock %}

<!-- html footer --> 
```

然后，您可以制作另一个模板，例如 bar.django：

```
{% extends "foo.django" %}

{% block content %}
This overrides the content block in foo.django.
{% endblock %} 
```

...然后将呈现：

```
<h1>My HTML Header</h1>
<!-- an so on -->

This overrides the content block in foo.django.

<!-- html footer --> 
```

[在http://www.djangobook.com/en/1.0/chapter04/](http://www.djangobook.com/en/1.0/chapter04/)上有关于 django 模板的很好的说明。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-20T09:57:52.407

`{% extends %}`和`{% include %}`方法适用于在上下文中不需要额外信息的页面元素。

只要您需要将更多内容从数据库中插入到上下文中，模板标签就会派上用场。例如，Django 包含的[`contrib.comments`应用程序](http://docs.djangoproject.com/en/dev/ref/contrib/comments/#ref-contrib-comments-index)`{% get_comment_list %}`定义了一个模板标签，用于检索附加到给定模型实例的注释。以下是您将如何使用它：

```
<div>
{% load comments %}
{% get_comment_list for my_instance as comment_list %}
{% for comment in comment_list %}
  <p><a href="{{ comment.url }}">{{ comment.name }}</a> wrote:</p>
  {{ comment.comment }}
{% endfor %}
</div> 
```

您可以将其保存在单独的模板中，并将`{% include %}`其保存在其他模板中。

对于您自己的内容，您可以编写自己的自定义模板标签。按照[文档](http://docs.djangoproject.com/en/dev/howto/custom-template-tags/#howto-custom-template-tags)。[只要有可能，使用简单标签](http://docs.djangoproject.com/en/dev/howto/custom-template-tags/#shortcut-for-simple-tags)机制编写标签会很方便。[您可以在djangosnippets.org](http://www.djangosnippets.org/tags/templatetag/)和[blogosphere](http://www.djangoproject.com/community/)上找到方便的现成模板标签。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-02T22:22:33.803

试试`{% include %}`标签。

[http://docs.djangoproject.com/en/dev/ref/templates/builtins/#include](http://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)

# apache-flex - 每当将数据添加到其 dataProvider 时，如何刷新 Flex Chart？

> ID：408139
> 
> 赞同：0
> 
> 时间：2009-01-02T22:04:27.460
> 
> 标签：apache-flex, air, charts

现在我必须在这里遗漏一些东西，因为这似乎是一个非常基本的问题，可以在任何“Flex 图表入门”教程中解决。但是，我所能找到的只是提示图表应在 dataProvider 更改时自动更新。请注意，提示。

这是我的标记：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" title="econemon Sensor Simulator">
    <!-- ... -->
    <mx:Script source="SimulatorFunctions.as" />
    <mx:HDividedBox left="0" top="0" bottom="0" right="0">
        <!-- ... -->
        <mx:VDividedBox width="75%" height="100%">
            <mx:PlotChart width="100%" height="33%" dataProvider="{xmlDataTest}">
                <mx:horizontalAxis>
                    <mx:DateTimeAxis dataUnits="seconds" displayLocalTime="true" parseFunction="dtFromUnixtime"/>
                </mx:horizontalAxis>
                <mx:series>
                    <mx:LineSeries xField="dt" yField="fltValue" displayName="Testkurve" />
                </mx:series>
            </mx:PlotChart>
            <mx:Panel width="100%" height="66%">
                <mx:Button label="Start" click="vDataStart()" />
                <mx:Button label="Stop" click="vDataStop()" />
            </mx:Panel>
        </mx:VDividedBox>
    </mx:HDividedBox> 
</mx:WindowedApplication> 
```

这是我的 ActionScript 的一部分：

```
[Bindable]
public var xmlDataTest:Array = [
        { dt: "1230908694", fltValue: "50.4" },
        // ...
        { dt: "1230909594", fltValue: "35.4" }
]

public var dflt:Number = 10.0;
public var timData:Timer = new Timer(3000);

// ...

public function vDataStart():void
{
    if (!timData.running) {
        timData.addEventListener(TimerEvent.TIMER, vAppendDatum);
        timData.start();
    }
}

public function vDataStop():void
{
    if (timData.running) {
        timData.stop();
    }
}

public function vAppendDatum(evt:Event):void
{
    var dtNew:String;
    var fltNew:String;
    var fltT: Number;
    dtNew = String(Number(xmlDataTest[xmlDataTest.length - 1].dt) + 100);
    fltT = Number(xmlDataTest[xmlDataTest.length - 1].fltValue);
    if (fltT < 10.0 || fltT > 70) {
        dflt *= -1;
    }
    fltNew = String(fltT + dflt);
    xmlDataTest.push({ dt: dtNew, fltValue: fltNew });
    //trace("Datenpunkte: " + xmlDataTest.length);
} 
```

单击“开始”按钮后，数据数组每 3 秒扩展一次，但屏幕上的图表保持不变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-02T22:21:04.713

看看[这个](http://livedocs.adobe.com/flex/3/langref/mx/collections/ArrayCollection.html)。在 Flex 中，所有数据结构类（例如`Array`）都有相应的 Collection（或 CollectionView）类，它们充当包装器。当您使用诸如 之类的包装函数时`addItem()`，它会向任何监听的对象发送一个事件，以通知它们集合已更改。您需要将 dataProvider 设置为`ArrayCollection`wraps的实例`xmlDataTest`。

**编辑**：另外，由于我最初不太清楚，您需要通过 ArrayCollection 包装器对数组进行*所有*操作。对未通过该接口的基础数据所做的任何更改，系统的其余部分都无法知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-02T22:25:15.483

我相信将其设为像 rmeador 描述的 ArrayCollection 是正确的。

您可以通过`refreshBindings()`像这样调用 PlotChart 的方法来解决此问题：`idOfPlotChart.refreshBindings();`在您的`vAppendDatum`函数中更新数据之后。

# cocoa - Cocoa NSDocument：让自动保存工作

> ID：408159
> 
> 赞同：5
> 
> 时间：2009-01-02T22:13:50.907
> 
> 标签：cocoa, nsdocument, nsdocumentcontroller

文档只是说明`setAutosavingDelay`在共享文档控制器上设置为任何 > 0 都应该这样做，但是在调用之后

```
[[NSDocumentController sharedDocumentController] setAutosavingDelay:2.0]; 
```

在我的控制器中，自动保存似乎不起作用：我既没有看到任何东西`~/Library/Autosave Information/`，也没有看到

```
[[[NSDocumentController sharedDocumentController] currentDocument] autosavedContentsFileURL] 
```

初始化。

请注意，在我的应用程序中，正常加载和保存工作正常（keyedarchivers、我的文档的基于 nscoding 的类等）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-03T17:37:22.273

您是否覆盖了 -updateChangeCount: ？我很确定 Apple 的实现是启动自动保存计时器的代码。另外，如果您尝试使用更长的计时器怎么办？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-08-01T04:24:40.790

有些人发现目录~/Library/Autosave Information 是root 拥有的，所以无法写入文件。参见例如 [http://discussions.apple.com/thread.jspa?threadID=2252306](http://discussions.apple.com/thread.jspa?threadID=2252306)

我不知道这个错误是如何产生的，但我被它咬住了——该目录是在 2010 年 6 月 17 日 12:19 创建的，我认为从那一刻起权限是错误的。

# c# - 使用 .NET 反射器的示例

> ID：408167
> 
> 赞同：4
> 
> 时间：2009-01-02T22:18:26.357
> 
> 标签：c#, .net

作为一个不熟悉 .NET 和 C# 的程序员，我发现使用 .NET Reflector 是一个令人难以置信的实用程序，可以用来查看“专业人士”如何编写他们的代码。

任何人都可以建议好的基于 .NET 的应用程序在桌面应用程序上使用 Reflector - 任何应用程序示例都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-02T23:21:16.760

当我对一段代码在文档未涵盖的情况下的作用有疑问时，我最常使用它。例如，当我第一次尝试为旧的 ASP.NET webforms 模型创建复杂的 web 控件时，我曾经反映过很多。整个调用堆栈非常复杂，文档不是最友好的......

我现在使用反射器的第一个原因可能是查看调用可能引发的异常。.net 文档的最大缺点之一是它通常只告诉您当前方法以异常方式引发的内容。例如，如果方法 A 可能抛出异常 1，而方法 A 调用可能抛出异常 2 的方法 B，那么您只会在方法 A 的文档中被告知异常 1。有时您甚至不会通过 ArgumentNullExceptions 得到它。

我使用反射器的最酷的原因之一是我想创建一个 DynamicMethod。DynamicMethods 允许您通过 IL 调用构造方法；它介于反射（慢）和在内存中编译自己的程序集（执行快但启动慢）之间。我想创建一个小类来检查是否在测试期间触发了事件......无论如何，我不知道如何编写 IL，所以我所做的是创建一个程序集，其中包含一个完全符合我要求的类在DynamicMethod中做，编译它，然后在Reflector中查看IL。这本身就是一个令人满意的练习，我可能会使用相同的技术来做一些更复杂的语句解析/编译......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T10:46:30.607

我在开发过程中使用反射器来检查编译器如何将 C# 转换为 IL，因为我对 Reflection.Emit 和[Expression](http://marcgravell.blogspot.com/2008/10/express-yourself.html)之类的东西做了很多工作。我也用它来快速查看我的代码；当您有一个大型 dll 库时，我发现将 dll + xml 从构建服务器拖到反射器中比将每个项目加载到 VS 中更快，特别是如果我不能 100% 确定代码在哪里...

您还可以使用 with 插件（如[snippy](http://msmvps.com/blogs/jon_skeet/archive/2008/11/23/the-snippy-reflector-add-in.aspx)）作为代码片段的测试平台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-02T22:29:39.703

想不出手头的任何东西，但您可能想要获取一些开源的东西并编译它。这样，如果 MSIL 变得混乱，您将有参考来源。

我发现[Code Project](http://www.codeproject.com/)有很多很好的示例程序可用于各种不同的目的。虽然，我主要将它用于 C++ 应用程序，但我还没有研究过 .NET 程序。我的猜测是它们也一样好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-08T14:53:21.830

Since our app uses several licensed components, I use Reflector to see exactly what licenses get embedded into the executable. Based on what I expect to see via Reflector, I also wrote unit tests to ensure the required licenses are present, even when built on the build server.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-02T23:59:05.467

我使用它的主要原因是探索本质上做同样事情的各种 .NET 方法的效率。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-02T22:50:28.460

我通常使用反射器来获得基于效率/性能的问题的答案。例如，我想知道在比较字符串时是否最好使用 == 运算符或 .Equals() ......或者它是否重要。在 Reflector 中打开 System.String 程序集，您将通过检查发生的方法调用和操作得到答案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-02T22:55:51.320

我认为它主要对 .NET 核心和补充程序集有用。例如，如果你想知道它是如何`Parallel.Invoke`工作的，只需打开 Reflector 并变得有点聪明。但请注意，它`mscorlib`有很多 P/invoke 引用，由于显而易见的原因，您将无法对其进行反汇编。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-03T13:22:20.417

我最近倾向于使用 Reflector 来查找一个类都使用了哪些接口。有时，分析一个类在命名空间的其他部分中的使用位置以及弄清楚如何实现它会很有帮助。

如果源代码不可用，查看 Reflector 中的代码可能会有所帮助，但大多数情况下最好找到代码本身，因为这至少可以让您了解代码的实际编写方式。因为 Reflector 正在查看 IL，所以代码是针对计算机“优化”的，而不是人类可读性。此外，如果开发人员花时间在代码中添加任何注释（我知道这很少见，但确实会发生），Reflector 不会有这些，因此任何能够从它们中收集到的见解都不会存在。

# apache-flex - 使用 Flex 3 在资源模块中嵌入资源的位图资源

> ID：408169
> 
> 赞同：1
> 
> 时间：2009-01-02T22:19:23.687
> 
> 标签：apache-flex

我非常感谢我能在我发现的这个问题上获得的所有帮助。

我使用属性文件使用 MXMLC 工具创建了几个资源模块。

文件可以正确生成，我可以使用 resourceManager.loadResourceModule() 函数加载它们。

现在问题来了。

在这些文件中，我嵌入了几张图片。

使用该应用程序，我对这些图像进行了一些修改，只要它们是 BitmapAssets。

问题是，如果我尝试以下操作，我会收到错误或空引用。

```
// With this one I get null.
var image:BitmapAsset = resourceManager.getClass( 'myResourceBundle', 'mainImage' ) as BitmapAsset;

// With this one an error.
var image2:BitmapAsset = BitmapAsset( resourceManager.getClass( 'myResourceBundle', 'mainImage' ) ); 
```

有没有办法可以使该演员表正常工作？

再次，我非常感谢我能得到的所有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-03T10:19:58.350

`resourceManager.getClass`返回一个类，而不是一个实例。将您的代码重写为如下内容：

```
var imageResource : Class = resourceManager.getClass('myResourceBundle', 'mainImage');

var image : BitmapAsset = new imageResource(); 
```

这应该可以解决问题，尽管如果编译器抱怨你可能需要这样做，但`BitmapAsset(new imageResource())`现在不记得它是怎么回事。

# sql-server - SQL 2005 查询帮助

> ID：408170
> 
> 赞同：0
> 
> 时间：2009-01-02T22:19:52.233
> 
> 标签：sql-server, sql-server-2005

我有一个包含 50 个条目的表（具有姓名、姓氏位置等详细信息的用户）

我想创建一个查询，给我从第 1 行到第 10 行的用户。然后是另一个给我从 11 到 20 的用户的查询，依此类推。

有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-02T22:23:37.203

[http://www.singingeels.com/Articles/Pagination_In_SQL_Server_2005.aspx](http://www.singingeels.com/Articles/Pagination_In_SQL_Server_2005.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T07:50:56.857

对于那些不想点击的人：解决方案是将行号添加到结果集中（使用`"ROW_NUMBER() OVER (...)"`语法），然后在 WHERE 子句中引用该行号列。像：

```
SELECT 
    *,
    ROW_NUMBER() OVER (ORDER BY LastName, FirstName) AS RowNumber
  FROM
    Table
  WHERE
    RowNumber > 10 
    AND RowNumber <= 20 
```

然后 10 和 20 可以作为开始和停止记录的参数。

# c# - 为什么我的班级不能有“public static const string S = “stuff”;？

> ID：408192
> 
> 赞同：397
> 
> 时间：2009-01-02T22:35:43.000
> 
> 标签：c#, constants

尝试编译我的类时出现错误：

> 常量`'NamespaceName.ClassName.CONST_NAME'`不能标记为静态。

在线：

```
public static const string CONST_NAME = "blah"; 
```

我可以一直在 Java 中做到这一点。我究竟做错了什么？为什么它不让我这样做？

* * *

## 回答 #1

> 赞同：706
> 
> 时间：2009-01-02T22:37:34.243

一个`const`对象总是`static`。

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2009-01-02T22:40:21.633

从[C# 语言规范](http://www.ecma-international.org/publications/standards/Ecma-334.htm) *（PDF 第 287 页或 PDF 第 300 页）：*

> 即使常量被认为是静态成员，常量声明既不需要也不允许静态修饰符。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2009-01-02T22:41:47.930

编译器认为 const 成员是静态的，并且意味着常量值语义，这意味着对常量的引用可能会编译到使用代码中作为常量成员的值，而不是对成员的引用。

换句话说，包含值 10 的 const 成员可能会被编译为将其用作数字 10 的代码，而不是对 const 成员的引用。

这与静态只读字段不同，静态只读字段将始终编译为对该字段的引用。

请注意，这是预 JIT。当 JIT'ter 发挥作用时，它可能会将这两者作为值编译到目标代码中。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-20T00:39:30.137

C#`const`与 Java 完全相同`final`，只是它绝对总是`static`. 在我看来，一个变量并不是真的必须`const`是 non- `static`，但是如果你需要访问一个`const`变量 non- `static`，你可以这样做：

```
class MyClass
{    
    private const int myLowercase_Private_Const_Int = 0;
    public const int MyUppercase_Public_Const_Int = 0;

    /*        
      You can have the `private const int` lowercase 
      and the `public int` Uppercase:
    */
    public int MyLowercase_Private_Const_Int
    {
        get
        {
            return MyClass.myLowercase_Private_Const_Int;
        }
    }  

    /*
      Or you can have the `public const int` uppercase 
      and the `public int` slighly altered
      (i.e. an underscore preceding the name):
    */
    public int _MyUppercase_Public_Const_Int
    {
        get
        {
            return MyClass.MyUppercase_Public_Const_Int;
        }
    } 

    /*
      Or you can have the `public const int` uppercase 
      and get the `public int` with a 'Get' method:
    */
    public int Get_MyUppercase_Public_Const_Int()
    {
        return MyClass.MyUppercase_Public_Const_Int;
    }    
} 
```

好吧，现在我意识到这个问题是 4 年前提出的，但是由于我在这个答案中投入了大约 2 个小时的工作，包括尝试各种不同的回答方式和代码格式，所以我仍然在发布它。:)

但是，为了记录，我还是觉得有点傻。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-09-30T11:21:38.537

来自 MSDN：http: [//msdn.microsoft.com/en-us/library/acdd6hb7.aspx](http://msdn.microsoft.com/en-us/library/acdd6hb7.aspx)

...此外，虽然**const 字段是编译时常量**，但 readonly 字段可用于运行时常量...

因此，在 const 字段中使用静态就像试图在 C/C++ 中创建一个已定义的（使用#define）静态......因为它在编译时被其值替换，当然它为所有实例启动一次（=静态） .

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-07T07:10:35.793

const 类似于 static 我们可以使用类名访问两个变量，但 diff 是静态变量可以修改而 const 不能。

# c++ - 在 C++ 中重写 delete 应该如何表现？

> ID：408196
> 
> 赞同：9
> 
> 时间：2009-01-02T22:36:03.497
> 
> 标签：c++, memory

我遇到的问题是，据我所知，删除运算符应该是静态函数，但有时编译器（VC++）似乎将其视为动态函数。

鉴于：

```
class Base
{
public:
  void* operator new(size_t size) { /* allocate from custom heap */ }
  void operator delete(void *p) { customFree(p, sizeof(Base)); }

  Base() {}
  virtual ~Base() {}
};

class Derived: public Base
{
public:
  void* operator new(size_t size) { /* allocate from custom heap */ }
  void operator delete(void *p) { customFree(p, sizeof(Derived)); }

  Derived() {}
  virtual ~Derived() {}
} 
```

我看到发生的是删除基指针将导致调用`Derived::opeator`删除。

```
Base *p = new Derived();
delete p; //calls Derived::operator delete 
```

如果我没有定义任何**析构函数**，那么我会得到预期的结果：调用 Base::operator delete。这似乎正在发生，因为编译器在定义析构函数时将一个名为“标量删除**析**构**函数**”的函数插入到**vtable**中。然后该函数将调用.**`Derived::delete`**

 **所以我必须提出问题：1）这是标准行为吗？2）我应该什么时候使用

```
void operator delete( void *, size_t ); 
```

对比

```
void operator delete( void * ); 
```

如果以上是标准行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-02T22:45:04.900

这当然是标准行为。如果使用了派生类的操作符 new，*它的*操作符 delete 也将被使用（还要注意，即使您没有明确告诉编译器这些函数是静态的，它们*也是*隐式声明的）。在派生类中有一个操作符 new，但相应的操作符 delete 在基类中，可能会出现这种情况。我认为这是有效的，但我会避免这样做。依赖基操作符delete，而在派生类中定义自己的操作符new，难免会出事。

> 如果我没有定义任何析构函数，那么我会得到我期望发生的事情：

你会得到未定义的行为 :) 一切都可能发生，包括你所期望的（错误地）。通过指向另一种类型对象的基指针进行删除需要虚拟析构函数。隐式声明的析构函数不是虚拟的。

> 我什么时候应该使用 void 运算符 delete( void *, size_t );

如果您希望在运算符中知道分配的大小，请删除。我在这里写了它的含义： [除了分配和 ctor 调用之外，C++ 的 new 运算符还有什么作用？](https://stackoverflow.com/questions/377178/how-does-the-standard-new-operator-work-in-c#390585). 如果您使用（在您的重载成员操作员 delete/new 中）全局操作员 new & delete 来获取您的内存并释放它，或者甚至是 malloc / free，则您不需要该大小信息。但它可能对日志记录有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-02T22:49:01.553

（嘿，我应该先发帖，然后再查找:)）

以下是该标准的相关摘录：

1 delete-expression 运算符销毁由 new-expression 创建的 **最派生对象** ( *intro.object* ) 或数组。delete-expression: ::opt delete cast-expression ::opt delete [ ] cast-expression 第一个选项用于非数组对象，第二个选项用于数组。操作数应具有指针类型，或具有单个转换函数（*class.conv.fct*）到指针类型的类类型。结果类型为 void。

3 在第一种选择（删除对象）中，如果操作数的静态类型与其动态类型不同，**则静态类型应为操作数动态类型的基类，且静态类型应具有虚拟析构函数，否则行为为不明确的。** 在第二种选择（删除数组）中，如果要删除的对象的动态类型与其静态类型不同，则行为未定义。19）

# .net - 企业库中异常处理块的使用

> ID：408207
> 
> 赞同：0
> 
> 时间：2009-01-02T22:42:47.570
> 
> 标签：.net, enterprise-library

我们有一个 ASP.NET 应用程序，它使用异常处理应用程序块将我们的异常记录到数据库（间接使用日志记录块）。这一切都很完美。然而，由于它使用异常处理块来记录数据，所以每次我们想要记录时，我们都必须新建一个 System.Exception 对象。由于我们没有抛出异常，因此没有性能问题。但是，每次我们想要记录一些东西时，我们都必须创建一个新的异常对象。这是一个糟糕的设计吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-02T23:56:49.620

您可以独立于异常处理策略定义日志记录策略，它们不必一起使用。

异常处理和日志记录通过侦听器的链接多次一起使用。例如，您可以在 catch 块中捕获特定错误并引用您的异常处理策略，这也可能包括通过 logCategory 记录操作。

另一方面，要仅记录某些事件/操作，只需指定一个未从异常处理策略引用的日志跟踪侦听器。使用 Trace.Write 语句输出您的日志消息。

无论如何，如果您创建不同的策略，您可以在需要时链接侦听器以获得更大的灵活性。

**更新：** 在您的 loggingConfiguration 部分，配置另一个跟踪侦听器。然后，您需要在 web.config 的 categorySources 部分下添加侦听器。下面显示的是记录到两个源，事件日志和 xml 文件。

```
<categorySources>       
<add switchValue="All" name="Database Events">
    <listeners>
        <add name="Formatted EventLog TraceListener"/>
        <add name="XML TraceListener"/>
    </listeners>
</add></categorySources> 
```

在您的 exceptionHandling 部分下，确保将“数据库事件”categorySource 连接到您的策略：（为了便于阅读，省略了一些细节）

```
<exceptionHandling>
<exceptionPolicies>
    <add name="Data Access Policy">
            <exceptionTypes>
                <add type="System.OverflowException, mscorlib, ... postHandlingAction="NotifyRethrow" name="OverflowException">
                    <exceptionHandlers>
                        <add logCategory="Database Events" eventId="100" ... severity="Critical" name="Logging Handler"/>
                        <add exceptionMessage="Overflow Exception caught." ... >
                    </exceptionHandlers>
                </add>
            </exceptionTypes>
    </add>  
</exceptionPolicies></exceptionHandling> 
```

因此，这种情况下的最终结果是链接从单个策略引用的两个侦听器。请注意，它是从 system.overflow 异常类型处理的——只是一个示例，说明如何为不同的异常指定不同的处理程序。

当然，您可以添加一个日志文件侦听器，并在需要记录事件/操作时从代码中调用它，而不必依赖异常处理。如果您想了解更多详情，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-02T23:29:11.847

由于您已经在使用日志记录应用程序块和 EL（即使它是间接的），您应该能够通过它登录到数据库，而不是仅仅为了记录目的而新建一个异常。

我也喜欢 ELMAH 用于异常处理。我将它用于未处理的异常日志记录，并将 log4net 用于所有其他日志记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T23:03:53.940

我不会这么说的。它是一个异常处理块，而不是一个日志记录块。也许您应该改用 EL 的 LAB？

顺便说一句，我喜欢并使用 ELMAH 作为异常处理块。它也不是为记录而设计的，只是为了处理异常并将它们记录下来以供以后检查。但是，我认为有一种方法可以引发异常事件而无需新建 Exception 对象。

# ruby - Ruby - 不可变对象

> ID：408208
> 
> 赞同：8
> 
> 时间：2009-01-02T22:43:21.890
> 
> 标签：ruby, multithreading, immutability

我有一个用 Ruby 编写的高度多线程的应用程序，它共享一些实例变量。对这些变量的写入很少 (1%)，而读取非常常见 (99%)。**确保这些线程始终看到所涉及的最新值的最佳方式是什么（在您看来或以惯用的 Ruby 方式）？**到目前为止，这是我的一些想法（尽管在我大修之前我希望得到您的意见）：

*   在读取或写入任何这些变量之前拥有一个最常用的锁（来自[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)）。这样做的缺点是它`synchronize`在我的代码中放置了很多块，而且我没有看到一个简单的方法来避免它。
*   使用 Ruby 的`freeze`方法（请参阅[此处](http://rubylearning.com/satishtalim/mutable_and_immutable_objects.html)），尽管它看起来同样繁琐，并且没有给我任何第一个选项所提供的同步优势。

这些选项看起来都非常相似，但希望那里的任何人都会有一个更好的想法（或者可以为其中一个想法辩护）。我也可以使对象不可变，这样它们就不会在操作过程中被破坏或改变，但是我对 Ruby 的了解不够，无法自己进行调用，[这个问题](https://stackoverflow.com/questions/213312/can-ruby-really-be-used-as-a-functional-language)似乎认为对象是高度可变的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-03T17:08:28.620

使用锁是最合适的方法。你可以看到 Jim Weirich 的这个主题演讲：[所有 Rubyist 都应该知道的关于线程](http://rubyconf2008.confreaks.com/what-all-rubyist-should-know-about-threads.html)的知识。

此外，冻结对象在这里对您没有帮助，因为您想修改这些变量。将它们冻结在适当的位置意味着**不会对它们进行进一步的修改**（因此您的 1% 的写入将不起作用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-04-03T03:56:41.550

我自己没有使用过，但您可能想查看[Dataflow](http://ilikestuffblog.com/2009/04/26/dataflow-erlang-style-thread-safety-in-ruby/)。它使所有变量都写入一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T22:53:04.307

读写锁是一个常见的问题，有一个定义明确的解决方案：

[读写锁](http://en.wikipedia.org/wiki/Readers-writer_lock)

它有很多实现：

[写锁模式](http://en.wikipedia.org/wiki/Read/write_lock_pattern)

您不想为每次读/写加锁

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-02T23:11:07.903

您必须使用 Mutex 来同步对共享状态的访问。真的没有办法避免这样做。

在现代多核机器上，您无法对如何访问内存或内存访问将如何与缓存交互做出任何假设。

# wcf - WCF 的例外情况

> ID：408211
> 
> 赞同：0
> 
> 时间：2009-01-02T22:44:01.797
> 
> 标签：wcf, exception

处理 WCF 服务异常的最佳方法是什么？如何从 WCF 服务中抛出异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T18:00:23.083

FaultContract 是要走的路。其他响应中给出的 MSDN 链接是一个很好的地方。然而，需要注意的一件事是：

抵制将异常派生类放在你的错误合同中的诱惑

不要做`FaultContract<ArgumentException>`

而是创造`FaultContract<NameCanNotHaveDigitsFault>`

您的领域特定类在哪里`NameCanNotHaveDigitsFault`，不依赖于特定框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-02T22:50:57.087

使用故障契约。

[http://msdn.microsoft.com/en-us/library/ms752208.aspx](http://msdn.microsoft.com/en-us/library/ms752208.aspx)

或者

[让-保罗·斯密茨博客](http://bloggingabout.net/blogs/jpsmit/archive/2007/03/21/wcf-fault-contracts.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T11:38:03.517

您可以从 wcf 服务抛出 FaultExceptions，它们将被传输回客户端。

任何其他类型的异常都会使您的通信通道进入故障模式，这将使其无法使用。

因此，在 wcf 服务中引发异常的最简单（快速且肮脏）的方法是将它们包装/更改为 FaultExceptions。

# visual-studio-2008 - Visual Studio 2008 是否使用 SvcUtil.exe，如果“否”，使用 svcutil 有什么缺点吗？

> ID：408217
> 
> 赞同：4
> 
> 时间：2009-01-02T22:48:22.550
> 
> 标签：visual-studio-2008, wcf, svcutil.exe

谷歌搜索了一下后，没有明确的答案是否 Visual Studio 2008 使用 svcutil.exe 与否？Visual Studio 2005 确实使用了它，但是 Visual Studio 2008 的 RTM 版本使用 svcutil 吗？一些博客说它没有（并让它看起来令人惊讶）

*   [SVCUtil & VS2008](http://blog.donnfelker.com/2008/12/02/svcutil-vs2008/)
*   [VS2008 添加服务参考的等效 svcutil.exe 命令](http://geekswithblogs.net/DavidBarrett/archive/2008/06/30/equivalent-svcutil.exe-command-for-vs2008-add-service-reference.aspx)
*   [SVCUtil 生成 WCF 客户端和指定字段的问题](http://blogs.microsoft.co.il/blogs/oshvartz/archive/2008/09/06/svcutil-generating-wcf-client-and-the-is-field-specified-issue.aspx)

和其他网站说有。

我要问的原因是我们正在使用自定义端点行为扩展（IWsdlExportExtension/IEndpointBehavior 的实现）来展平我们的 WCF wsdl，并通过 Visual Studio 2008 的添加引用使用展平的 wsdl 给我们编译错误，因为它正在复制类型/类。引用已添加，没有任何错误。另一方面，SvcUtil 将重复的类扔到一个单独的命名空间中，从而解决了构建问题。

所以 SvcUtil 可以工作，但是 Visual Studio 2008 在我们的一些扁平化 wsdls 上没有。如果 Visual Studio 中的添加服务引用不起作用，我们可以继续使用 svcutil，但想知道是否有人知道这样做是否有任何影响。我找不到任何证据表明我们“不应该”使用 svcutil，只是它不像在 Visual Studio 2008 中使用添加服务引用那么容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-07-22T13:20:06.573

svcutil 和 VS2008 最终调用了相同的 WCF 代码。它是否使用实际的 exe 或调用 dll 是一个次要细节。如果有的话，我更喜欢命令行工具，因为它允许更大的灵活性（或者我可能只是喜欢命令行；-p）。

请注意，WCF 可以通过 IDE 和命令行 (/r?) 重用现有类型。但是这种类型的命名空间问题只是我喜欢使用命令行版本的许多事情之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-07T11:18:19.083

这是一个老问题，当我在寻找类似的东西时出现了，所以我会提到我发现的。

[这篇博](http://geekswithblogs.net/DavidBarrett/archive/2008/06/30/equivalent-svcutil.exe-command-for-vs2008-add-service-reference.aspx)文断言 VS2008 不使用 svcutil 来生成代理。我同意他的观点，因为当您添加服务引用时，svcutil 不会出现在任务管理器进程列表中。它们还会产生明显不同的输出 - 例如 svcutil 不会产生可在 Silverlight 应用程序中使用的代理，您必须从中修剪出合理数量的东西（如程序集中不可用的接口或对象引用）银光可以使用*）。

尽管如此，编写一个调用 svcutil 的小应用程序来完成繁重的工作然后对生成的文件进行清理并不难。

*可以通过使用`/targetClientVersion`开关指定不同的框架版本来避免这个问题，但我还没有尝试过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-22T13:20:38.087

我从来没有看到有任何理由相信 Visual Studio 调用了 svcutil.exe 或 wsdl.exe。在这两种情况下，控制台应用程序和 Visual Studio 都使用相同的 .NET Framework 代码来完成它们的工作。

考虑在“添加服务引用”命令期间发生的一些错误显示在 Visual Studio“错误”窗口中，而不是在“输出”窗口中。必须调用 Visual Studio API 才能将消息放入错误窗口，而 svcutil.exe 无法做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-22T13:14:14.740

我宁愿说 Visual Studio 2008 没有使用 svcutil.exe。好吧，至少不是直接的。

我使用 Process Monitor 查看在我的机器上执行了哪些应用程序，同时向我的项目添加新的服务引用，并且在日志中找不到“svcutil”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-04T21:23:27.590

我会说 Visual Studio 2008 确实使用 svcutil 来生成代理代码。

作为证明，只需使用 Visual Studio 生成代理代码，然后打开 Reference.cs（假设它是用 C# 生成的）文件，您将在文件中看到这个头文件：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:2.0.50727.3053
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------ 
```

现在，使用 svcutil 命令行生成代理代码。打开生成的文件，您将看到完全相同的标题。

此外，当您在添加服务引用时查看 Visual Studio 2008 中的可用选项时，每个选项都对应一个 svcutil 参数。

# javascript - 如何让这个 jQuery 函数更优雅？

> ID：408225
> 
> 赞同：0
> 
> 时间：2009-01-02T22:51:17.350
> 
> 标签：javascript, jquery, html, forms, html-select

在我的页面上，我有一个下拉选择框，默认值为（空）。当用户选择一个条目时，会显示该条目类型的相应表单。

几个问题..

1.  代码不是 DRY 并且看起来比它需要的更冗长，因此不容易维护/扩展。
2.  当用户选择某些内容，填写表单，进入下一页，然后点击后退按钮时，选择字段已预先选择了他们的选择，但由于没有`.change()`事件，因此不会显示表单框。他们必须选择不同的`<option>`，然后单击返回原来的选择以恢复他们的论坛。

这是代码：

```
<script type="text/javascript">
    $(document).ready(function(){

        $('#select_type').change(function () {
            $('fieldset').css('display','none'); # hide all the forms on the page
            var selectval = $('#select_type').val();
            if (selectval == 'instance')
            {
                $('#instance').toggle();
            }
            if (selectval == 'mob')
            {
                $('#mob').toggle();
            }
            if (selectval == 'dailyquest')
            {
                $('#dailyquest').toggle();
            }
            if (selectval == 'repeatablequest')
            {
                $('#repeatablequest').toggle();
            }
            if (selectval == 'zonequest')
            {
                $('#zonequest').toggle();
            }
            if (selectval == 'reward')
            {
                $('#reward').toggle();
            }
        });

    });
</script> 
```

求助 JS 高手的 SO！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-02T22:53:45.520

您可以迭代一个值数组，而不是多个 IF 子句。但在这种情况下，如果没有其他要求，那么只需：

```
$(document).ready(function(){
     var select = $('#select_type');
     $('#' + select.val()).toggle(); // Toggle the preset value
     select.change(function () {
         $('fieldset').css('display','none');
         $('#' + $(this).val()).toggle();
     });
}); 
```

应该够了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-02T23:01:07.643

```
$(document).ready(function() {
  $("#select_type").change(function () {
    $("fieldset").css("display", "none");
    $("#" + $(this).val()).toggle();
  }).change();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T22:59:41.030

1.  您可以将所有这些 if 语句更改为一些 or(||) 表达式。
2.  在 ready() 上，您可以检查字段是否具有默认值。如果没有，那么您可以手动触发 change()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-03T00:10:03.277

我可能不会使用选择框，因为只有当用户在下拉选项之前就知道这些选项时，选择框才是一个不错的选择。不允许使用神秘肉。这是一篇关于[选择依赖输入](http://uxmatters.com/MT/archives/000172.php)的好文章。

我对这个问题的看法： * 应该只显示链接到所选选项的部分，所以我不想使用切换。

```
$(function(){
  var sel = $("#select_type");
  $("#"+sel.val()).show();
  sel.change(function(){
    $(this).children("option").each(function(){
      $("#"+this.value)[this.selected ? "show" : "hide"]();
    });
  });
}); 
```

# apache - 将 IIS 与 Tomcat 集成是个好主意，还是忘记它并坚持使用 Apache HTTP 和 Tomcat

> ID：408234
> 
> 赞同：0
> 
> 时间：2009-01-02T22:55:41.507
> 
> 标签：apache, http, iis, tomcat

你认为有可能在**["Apache Http"-"Tomcat"]**中找到与**["IIS"-"Tomcat"]**相同的性能吗？

只想知道您对 IIS-Tomcat 组合的看法（性能方面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-29T22:13:35.150

可以做到，但这不是一个好主意。只需使用众所周知的组合 [“Apache Http”-“Tomcat”]，就可以避免一系列集成问题。

# .net - ASP.NET VB - 一些使用 .NET 的数学

> ID：408255
> 
> 赞同：1
> 
> 时间：2009-01-02T23:04:54.453
> 
> 标签：.net, algorithm, math

我需要你的帮助，

例如，我有一个十进制类型变量，我想以这种方式四舍五入。

例如

3.0 = 3

3.1 = 4

3.2 = 4

3.3 = 4

3.4 = 4

3.5 = 4

3.6 = 4

3.7 = 4

3.8 = 4

3.9 = 4

4.0 = 4

4.1 = 5

4.2 = 5

ETC....

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-02T23:06:56.710

数学.天花板

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-02T23:12:34.470

```
dim rounded as int = Math.Ceiling(4.1) 
```

*（VB 语法有点生疏，所以它可能不是完美的、可编译的语法）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T16:31:46.273

也许您必须解析为 char 并且必须检查 desimal 值... a=3.4 stra=cstr(a) b=substring(stra,0,1) c=substring(stra,2,1)

d=cint(c) e=cint(b)

如果 d>0 则 e+=1 结束 if

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-12T19:13:42.020

很简单，诀窍是大多数编程提供的天花板功能。例如在 C# 中，它是 Math 命名空间中的静态方法；

命名空间 ConsoleDebugger { 类程序 { 静态无效 Main(string[] args) { int lowerLimit = 3; 整数上限 = 10；

```
 int index = 0;
        for (int i = lowerLimit; i < upperLimit; i++)
        {
            for (int j = 0; j < 10; j++)
            {
                string value = i + "." + j;
                Console.WriteLine( value + "  " + Round(double.Parse(value)));
            }

            if (index == 10)
                index = 0;
        }
        Console.ReadLine();
    }

    private static double Round(double number)
    {
        return Math.Ceiling(number);
    }
} 
```

}

# javascript - 带有动态 id 的 jQuery 选择

> ID：408265
> 
> 赞同：12
> 
> 时间：2009-01-02T23:09:56.173
> 
> 标签：javascript, jquery

我有一个动态生成的表单，并且动态生成了 id（和潜在的类）。表格是相同的，但它们的最后都附加了相关的 ID。

如何选择每组输入并将代码应用于每个输入？

我正在试验 $('input[id^=@id_airline_for_]') 但无法让它飞起来。我怀疑我错过了一些阻碍我的基本 jQuery 知识，因为我确信这是动态表单的常见问题。

```
<form method='POST'>
    <label for="id_airline_for_8">Airline</label>:
    <input id="id_airline_for_8" class="arrival_transfer_toggle_8" type="text" maxlength="30" name="airline_for_8"/>
    <label for="id_flight_number_for_8">Flight Number</label>:
    <input id="id_flight_number_for_8" class="arrival_transfer_toggle_8" type="text" maxlength="30" name="flight_number_for_8"/>

    <label for="id_airline_for_17">Airline</label>:
    <input id="id_airline_for_17" class="arrival_transfer_toggle_17" type="text" maxlength="30" name="airline_for_17"/>
    <label for="id_flight_number_for_17">Flight Number</label>:
    <input id="id_flight_number_for_17" class="arrival_transfer_toggle_17" type="text" maxlength="30" name="flight_number_for_17"/>

    -- snip --

</form> 
```

编辑：我应该更新我希望能够在单击输入时执行一些操作，但仅适用于最后具有匹配 id 的类。

为了方便起见，假设我希望在#id 末尾具有匹配 id 的所有输入在单击一个时消失（仅出于参数考虑）。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-01-02T23:18:27.687

```
$("input[id^='id_airline_for_']").each(function() {
  var id = parseInt(this.id.replace("id_airline_for_", ""), 10);
  var airline = $("#id_airline_for_" + id);
  var flightNumber = $("#id_flight_number_for_" + id);
  // do stuff with airline and flightNumber <input>s
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-02T23:12:18.383

您可以使用`$("input#id_airline_for" + id)`（`id`您的号码在哪里，例如 8），但如果您删除标签名称并使用以下命令会更快：

```
$("#id_airline_for" + id); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-02T23:18:01.197

以下将为您提供`id_airline_for`名称中包含的所有输入。

```
$("input[id^='id_airline_for']") 
```

如果您需要在每个表单的基础上执行此操作，您需要为每个表单提供自己的 ID 并以这种方式分组选择它们。

```
$("#formJetBlue input[id^='id_airline_for']")
$("#formNwa input[id^='id_airline_for']")
$("#formOceanic input[id^='id_airline_for']") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-02T23:18:51.647

我认为您不应该使用 @ 符号并且您缺少一些引号：

而不是这个： $('input[id^=@id_airline_for_]')

试试这个： $("input[id^='id_airline_for_']")

也看到这个：

[http://docs.jquery.com/Selectors/attributeStartsWith#attributevalue](http://docs.jquery.com/Selectors/attributeStartsWith#attributevalue)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-09-20T14:00:01.710

选择具有指定属性且值包含给定子字符串的元素

```
$('input[id *= id_airline_for]').attr('checked', headerChecked); 
```

它将选择“id”属性中包含“id_airline_for”字符串的所有元素

# iphone - 动画 UIProgressView 的变化

> ID：408269
> 
> 赞同：31
> 
> 时间：2009-01-02T23:11:44.487
> 
> 标签：iphone, cocoa-touch

是否可以对 a 的变化进行动画处理，以`UIProgressView`使显示平滑地移动到新值？

有点像 NSProgressIndicator 做的。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-01-03T15:18:09.917

如果您对此感兴趣，请填写错误报告 Duplicate/5883058：

标题：**`UIProgressView setProgress:(float)value animated:(BOOL)animated`**

**问题描述：** `UIProgressView should`有一个`setProgress:(float)value animated:(BOOL)animated`喜欢`UISlider`能够动画进度的功能。

[https://bugreport.apple.com](https://bugreport.apple.com)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-30T00:42:06.523

`setProgress:animated:`iOS 5 中添加了UIProgressView 方法：

```
[progressView setProgress:1.0 animated:YES]; 
```

[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIProgressView_Class/index.html](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIProgressView_Class/index.html)

```
- (void)setProgress:(float)progress animated:(BOOL)animated 
```

> **动画**- 如果更改应该动画，则为 YES，如果更改应立即发生，则为 NO。
> 
> 在 iOS 5.0 及更高版本中可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-11T14:53:16.247

**（斯威夫特版）**

UIProgressView 方法`setProgress:animated:`：

```
self.progressView.setProgress(1, animated: true) 
```

[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIProgressView_Class/index.html](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIProgressView_Class/index.html)

```
open func setProgress(_ progress: Float, animated: Bool) 
```

> **animated** -如果更改应该是动画的，则为**TRUE ，如果更改应立即发生，则为****FALSE**。

# regex - 正则表达式添加填充零

> ID：408278
> 
> 赞同：5
> 
> 时间：2009-01-02T23:15:00.983
> 
> 标签：regex, padding, yahoo-pipes

我正在研究这个雅虎管道正则表达式，我发现了一个我无法解决的错误。

我有一个 URL，我从中提取数字，对它们进行分类并制作一个 img html 标记并将其嵌入。问题是，URL 以非填充方式呈现，但链接的图像具有零。因此，当一天或一个月有个位数时，正则表达式将停止工作。

这是我到目前为止所拥有的：

```
The URL: http://www.penny-arcade.com/comic/2009/1/2/patently-ridiculous/
The RegEx: (\d{4})/(\d+)/(\d+)
The Replacement: <img src="http://www.penny-arcade.com/images/$1/$1$2$3.jpg" />

What should appear: <img src="http://www.penny-arcade.com/images/2009/20090102.jpg" />
What appears: <img src="http://www.penny-arcade.com/images/2009/200912.jpg"/> 
```

我如何解析这些零以使这件事起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-02T23:24:55.240

如果您可以使用多个正则表达式，这里有一个解决方法：

```
搜索：(\d{4})/(\d)/
替换：$1/0$2/
搜索：(\d{4})/(\d{2})/(\d)/
替换：$1/$2/0$3/
搜索：(\d{2})/(\d{2})/(\d{2})/(.+)/
替换：<img src="http://www.penny-arcade.com/images/$1/$2$3.jpg" />

```

# linux - Linux 文件创建时间戳竞争条件

> ID：408286
> 
> 赞同：3
> 
> 时间：2009-01-02T23:19:06.453
> 
> 标签：linux, find, timestamp

我正在尝试做我认为在 Linux 下很简单的事情。我有一个运行各种测试程序的 bash 脚本，我想确定当前目录中的哪些文件是由测试程序创建的。所以我正在做这样的事情：

```
触摸时间戳文件
运行测试
查找 -newer 时间戳文件 -type f > 文件列表
rm -f 时间戳文件

```

原来 find -newer 的粒度很差，所以通常发生的情况是测试程序生成的一些文件显示为比时间戳文件更旧。所以我尝试了这个：

```
ls -tr1 | sed '1,/时间戳文件/d'

```

生成相同的列表。这*通常*有效，但并非总是如此。我仍然会遇到测试生成的文件显示为比时间戳文件更旧的情况。

谢谢！

PS我可以通过拍摄目录的两个快照来完成此操作，一个是在测试程序运行之前，一个是之后，然后比较它们。第二个列表中不在第一个列表中的任何文件都必须由测试程序创建（我不关心后台作业或其他用户写入目录）。但是这种方法不是我想要的，因为如果在运行测试之前没有删除输出文件（它们应该是，但在某些情况下可能不是），这种方法会说它不是由测试程序，因为它在运行测试程序之前就在目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-02T23:35:16.763

您实际上可以使用 touch 将目录中所有当前文件的时间戳强制为过去，例如：

```
touch -t 200801010000.00 * 
```

`find -newer`如果您在运行测试之前执行此操作，那么 " " 拾取它的时间应该有足够的差异。如果粒度是两分钟，您可以将所有当前文件设置为十分钟前，时间戳文件设置为 5 分钟前，然后运行您的测试。

所以你的脚本变成：

```
touch -t (current time - 10 minutes) *
touch -t (current time -  5 minutes) timestamp-file
run the test
find -newer timestamp-file -type f > list-of-files
rm -f timestamp-file 
```

假设您已经安装了一个不错的 Perl，您可以执行以下操作以在 5 分钟前（或使用 -600 10 分钟）以正确的格式获取“ `date -t`”：

```
use Date::Manip;
print UnixDate(DateCalc(ParseDateString("now"),"-300"),"%Y%m%d%H%M.%S") . "\n"; 
```

如果由于某种原因不允许您更改时间戳，请使用：

```
sleep 300
touch timestamp-file
sleep 300
run the test
find -newer timestamp-file -type f > list-of-files
rm -f timestamp-file 
```

它具有相同的效果，但让你有十分钟的时间去喝咖啡（如果你不是喝咖啡的人，你可以选择毒药）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-03T10:18:01.893

如果您考虑如何`find(1)`实施，就会很清楚为什么有时这可能无法按您的预期工作。这里有一个提示：

```
 $ touch timestamp ; touch newer ; find . -newer timestamp 
  $ rm timestamp newer
  $ touch timestamp ; sleep 1 ; touch newer ; find . -newer timestamp
  .
  ./newer
  $ 
```

`find(1)`使用系统调用获取文件 mtime/ctime/atime 值`stat(2)`。以下是`struct stat`from `<sys/stat.h>`(Linux) 的元素：

```
 time_t    st_atime;   /* time of last access */
  time_t    st_mtime;   /* time of last modification */
  time_t    st_ctime;   /* time of last status change */ 
```

在 Linux（通常是 unices）`time_t`上是一个整数，表示“从 1970 年开始的秒数”。所以`-newer`能领悟到的最细粒度也不过是一秒而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T01:32:18.290

在运行之前获取所有文件的文件名，但包括它们的时间戳：

```
find -printf '%p %T@\n' | sort > file1 
```

[如果您没有可用的 find 选项，您也可以使用 stat 来完成该工作：]

```
find -print0 | xargs -0 stat -c "%n %Y" | sort > file1 
```

并且跑到之后`file2`。然后使用

```
comm -1 -3 file1 file2 
```

它会向您显示唯一的行`file2`，如果我没记错的话，这些行必须是新文件。如果它们以前存在，它们的修改时间将会改变，这由`%T@`东西来处理（打印出自 1970 年以来的秒数）：

```
[js@HOST2 cpp]$ find -printf '%p %T@\n' | 排序>文件1
[js@HOST2 cpp]$ echo foo>bar
[js@HOST2 cpp]$ echo foo>baz
[js@HOST2 cpp]$ find -printf '%p %T@\n' | 排序>文件2
[js@HOST2 cpp]$ comm -1 -3 file1 file2
. 1230947309.0000000000
./bar 1230947308.0000000000
./baz 1230947309.0000000000
./file2 1230947315.0000000000
[js@HOST2 cpp]$ find -printf '%p %T@\n' | 排序>文件1
[js@HOST2 cpp]$ echo lol>bar
[js@HOST2 cpp]$ find -printf '%p %T@\n' | 排序>文件2
[js@HOST2 cpp]$ comm -1 -3 file1 file2
./bar 1230947359.0000000000
./file2 1230947362.0000000000
[js@HOST2 cpp]$`

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-02T23:47:37.753

为什么不创建一个临时目录来运行测试？在目录上使用基于时间戳的名称来帮助跟踪何时发生的结果，并在完成后简单地删除整个目录。

# jquery - 该示例使用 RoR ajax 原型助手 - 如何在 JQuery 中执行此操作？

> ID：408287
> 
> 赞同：1
> 
> 时间：2009-01-02T23:19:14.830
> 
> 标签：jquery, ruby-on-rails, rjs

这个页面展示了如何使用 RoR+Prototype 来做相关的下拉菜单。想知道是否有人会在 JQuery insteaad 中展示如何做

[http://pullmonkey.com/2008/3/30/dynamic-select-boxes-ruby-on-rails](http://pullmonkey.com/2008/3/30/dynamic-select-boxes-ruby-on-rails)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T01:29:53.460

jRails actually has done most of the work of rewriting the rails javascript helpers in jQuery. You can just install it as a gem..

[http://ennerchi.com/projects/jrails](http://ennerchi.com/projects/jrails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-02T23:29:03.733

您需要摆脱所有 RJS 并在 jQuery 中重新编码。更改此示例有点困难，但这应该可以帮助您入门：

[使用 jQuery 和 AJAX 自动填充选择框](https://remysharp.com/2007/01/20/auto-populating-select-boxes-using-jquery-ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-07T17:55:29.020

丹是对的。只需使用 Jrails。这是你最容易的赌注。

如果你想自己用 jQuery 编写代码，你可以在[这个好的 railscast](http://railscasts.com/episodes/136-jquery)学习如何用你自己的 jQuery 代码替换 rjs 模板。

# php - 通过 google maps API 查找经销商区域

> ID：408291
> 
> 赞同：3
> 
> 时间：2009-01-02T23:21:29.130
> 
> 标签：php, api, google-maps, geocoding

我有一个全国性的客户，他们目前正在通过向每个经销商出售一个区域并收取一定的费用来招募经销商。他们希望在他们的网站上有一个“寻找经销商”功能，该功能应该将客户指向购买了访客进入区域的经销商。起初我们打算列出主要城市，希望访问者点击他们认识的最近的城市名称，但我想到必须可以使用地图 API 将邮政编码或城镇名称映射到特定区域.

问题在于，由于他们销售特定区域的方式，这并不是一个“找到我最近的经销商”的场景——您所在地区的经销商可能不是离您的邮政编码/城镇最近的经销商。我过去使用过谷歌地图 API，但主要是为了在地图上动态绘制东西，而不是使用它来计算一些地理信息以获取数据库查询的帮助——有人可以帮忙吗？如果这有什么不同，我将使用 PHP API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-03T17:36:49.187

1.  使用 KML 或任何格式在 Google 地图中创建多边形。

2.  使用 Google 地图对用户输入的位置进行地理编码（换句话说，将邮政编码和城市转换为纬度/经度）。

3.  在每个多边形中使用 GLatLngBounds 对象的 contains 或 containsLatLng 方法来确定纬度/经度是否在其中一个多边形内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-02T23:24:40.340

听起来您将需要代表经销商特定区域的多边形区域。您可以使用 Google Maps API 制作多边形，然后您应该能够让用户单击或将鼠标悬停在这些多边形上...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T17:16:36.853

Urbanware 有一个[社区 API](http://developer.urbanmapping.com/docs/Neighborhoods)，也许你可以使用它？我不确定它是否是*免费*的（因为他们也提供溢价，而且我还没有阅读他们的 TOS），但无论如何这听起来像是一个商业项目，你也许可以证明成本是合理的。

**编辑：**刚刚注意到只有高级版才能访问欧洲数据库，所以听起来你无论如何都需要它。

# c# - 从“使用”语句的范围内返回？

> ID：408310
> 
> 赞同：6
> 
> 时间：2009-01-02T23:34:56.593
> 
> 标签：c#, .net

我有一些看起来像这样的代码：

```
using (DBDataContext dc = new DBDataContext(ConnectionString))
{
    Main main = new Main
    {
        ClientTime = clientTime
    };
    dc.Mains.InsertOnSubmit(main);
    dc.SubmitChanges();
    return main.ID;
} 
```

如果我从“使用”内部返回，使用仍然会清理吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-01-02T23:36:05.543

是的，这是它的一大优势`using`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-01-02T23:37:34.310

是的。它实际上只是一个`try/finally`语句的等价物——无论是通过异常、返回语句还是只是到达块的末尾，`finally`块都会被执行，但是块会退出。`try`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-02T23:37:13.873

是的，它会。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-02T23:41:35.410

是的，在 using 语句的资源获取部分中初始化的所有对象实例都将自动调用它们的`Dispose()`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-03T01:51:16.690

是的，它会清理干净。[我认为这是 C# 支持资源获取即初始化](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)模式的糟糕尝试。

# intentional-programming - 有意和面向语言的编程有什么用处？

> ID：408316
> 
> 赞同：1
> 
> 时间：2009-01-02T23:37:16.837
> 
> 标签：intentional-programming

有意或“面向语言”的编程有什么有用的东西吗？

这不是一个修辞问题。我正在寻找尝试过这些工具的人（即，以某种“更高级别”的格式表示程序，而不是单纯的文本，并为不同的域特定子集使用不同的编辑器）并对它的方式提出一些意见，或者提出好的建议工具。

（[http://www.onboard.jetbrains.com/is1/articles/04/10/lop/](http://www.onboard.jetbrains.com/is1/articles/04/10/lop/)，[究竟什么是意向编程](https://stackoverflow.com/questions/201386/what-exactly-is-intentional-programming)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-03T18:54:40.533

“纯文本”一词让我想在这里插话。

语言是具有句法、语义和意义的符​​号系统。它可以采用键盘点击、鼠标点击、听觉信号或任何能够携带信息的形式。

它的适用性不是它的传播方式的功能，而是它映射到它用来表达的心理概念的直接性。

当你改变主意时，会发现一个简单的直接衡量标准：在不引入“错误”的情况下更改“代码”有多难？

[看看这个。](https://stackoverflow.com/questions/520079/when-is-it-reasonable-to-create-my-own-programming-language/528212#528212)

补充：刚刚看了西蒙尼的东西，也许我可以就它的有用之处发表意见。

不利的一面是，我对所见即所得和非编码人员能够构建应用程序的强调没有留下深刻的印象。人们喜欢像素，尤其是彩色移动像素，尤其是在加利福尼亚的情况下。当然，在玩具领域可以做一些事情，但是一旦你想解决*你的*问题，你就会失望。这是一个人工智能问题，值得为之努力。声称接近实现它是不诚实的。

从积极的方面来说，[我写了一本书](https://rads.stackoverflow.com/amzn/click/com/0442017405)，其中我谈到了听起来很像面向语言的编程的*语言方法。*我喜欢以理论为基础，所以我的方法松散地基于[算法信息论](http://szabo.best.vwh.net/kolmogorov.html)。这听起来可能很可怕，但它基本上是关于如何处理信息单元的最紧凑（但仍然有意义）的表示，其中包括程序。

我从中得出了一个切线。我没有寻找紧凑的程序（很好），而是寻找从人脑通过手指/眼睛到计算机的最紧凑的编辑流。这不仅包括程序的编写，还包括在需求变化的整个生命周期中对其进行维护。

我的想法是，基本上，如果您寻求最小化维护编辑流，则必须将语言改进到可以称为特定领域的程度。这是值得积极去做的，并且愿意逆流而上，因为*流行*的东西阻碍了我们。

我举了很多例子，我继续举，但它们都是首先实用的，然后是漂亮的。它们是完成特定工作的方法，但它们并不擅长启动程序员似乎非常渴望的华而不实的潮流之一。

所以我真的不打算按喇叭，因为那是在浪费时间，但也许我已经给出了一些理由，说明面向语言的编程，在我看来，将是一个有用的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-03T00:13:09.870

它是一种非常有用的用法，可以使测试用例更清晰，不仅对业务分析师而且对你自己/你的团队也是如此。

当时间流逝而您忘记了确切的测试用例的全部内容时，使用 LOP 非常有帮助。您可以手头有规范，甚至可以在源代码注释中记录规则，但这些工件不会被执行。代码是！

您还可以使程序非常清晰，但比“面向语言”的描述更清晰几乎是不可能的。

考虑这个虚构的片段。

**注意**不是说 java 是 LOP，而是有些框架的目的是做类似以下的事情，也就是说，使测试用例更容易遵循。

```
package a;
import static a.Help.*;

public class Test { 

    public void test(){
        Object value = "";
        Object obtained = "";
        assert that( expected( value , isEqualTo( obtained ) ) );
    }
} 
```

这是一个非常简单的例子。此代码中的值是被执行的行，说明了测试的全部内容：

```
 assert that( expected( value , isEqualTo( obtained ) ) ); 
```

很清楚，上面写着：

> *断言期望值等于得到*

这很简单。但是您可以拥有任何类型的业务规则，只需逐字阅读即可。

> 断言客户抵押在达到...等时被处理

Martin Fowler 对此进行了解释，并提到[Hamcrest](http://code.google.com/p/hamcrest/)是一个框架来执行此操作。

这是[链接](http://www.infoq.com/presentations/domain-specific-languages) *（我不完全确定这是他在谈论 Hamcrest 还是另一个：P 抱歉）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T00:16:35.150

我不确定这是否是您要问的问题，但是尝试了 AppleScript 几次后，我对此感到非常沮丧。在英语中，有*很多*表达方式，我发现即使是基本结构也很难记住语法。

我认为好的编程语言感觉很自然，但仍然像你被限制在一个结构中一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-07T13:37:14.960

## 这只是未来

使用高级编程语言，我们已经看到相当聪明（但像我这样的心理僵化不宽容）的人开始编写有趣的工具，因为他们能够专注于编程的内容，而不是如何编程。

借助 HTML，我们已经看到任何具有一点形式逻辑的人都可以进行基本但大量的通信。

通过 CMS，我们已经看到人力资源经理能够以低成本快速构建合理可用的 Intranet。

通过 mashup，我们已经看到富有想象力的业余爱好者创造了令人难以置信的服务，包括数据交叉、地理网络等，而他们的预算还不到微软的 1/100000。

每次你排除困难，你就为那些没有你能力但有别人的人打开了一扇新的大门。你把你的经验和他们的总结。

明天，我们将看到每个人的女士和先生在不知不觉中编写一些疯狂酷的东西，因为他们需要以这种方式看待它。你永远不会做的事情，*因为你不是他们。*

现在这是真的，我们离它还很远，因为工具还不够好。但是我们每年都在接近，我敢打赌，我们会看到传入的语义 Web 有所改进；-) 下一步可能是自然语言的高级搜索，或者类似[Ubiquity](http://fr.wikipedia.org/wiki/Ubiquity)项目。然后谁知道呢？

Eventually, I agree with you : for now, they are not really useful. Automatically generated GUI are not so good (quite usefully for prototyping or small apps, but not good when you want to "be in business"), natural programming is, well, let's say limited... But thing about what you could do with a computer 20 years ago (mine was not even in black and white, but black and GREEN), and you'll understand how promising it is.

# c# - 如何获取 ListBox 中项目的索引？

> ID：408320
> 
> 赞同：3
> 
> 时间：2009-01-02T23:39:10.547
> 
> 标签：c#, listbox

我正在向`ListBox`这样的项目添加项目：

```
myListBox.Items.addRange(myObjectArray); 
```

我还想通过以下方式选择我添加的一些项目：

```
foreach(MyObject m in otherListOfMyObjects) 
{
    int index = myListBox.Items.IndexOf(m);
    myListBox.SelectedIndices.Add(index);
} 
```

然而`index`总是`-1`。

有没有不同的方法来获取 a 中对象的索引`ListBox`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-02T23:45:25.760

您应该确保`MyObject`overrides `Equals()`，`GetHashCode()`以便`ToString()`该`IndexOf()`方法可以正确找到对象。

从技术上讲，`ToString()`相等性测试不需要重写，但它对调试很有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-02T23:47:11.887

您可以对列表框中的值使用某种键，例如 GUID。然后您可以轻松地使用它`myListBox.Items.FindByValue(value)`来找到合适的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T23:52:19.567

IndexOf 检查引用，因此如果 otherListOfMyObjects 中的项目没有引用内存中与 myListBox.Items 完全相同的对象，那么 IndexOf 将不起作用。

你可以做的是使用 linq。这是一些看起来像 C# 的伪代码，可以编译并且可以实际工作：

```
var items =  from x in myListBox.Items where otherListOfMyObjects.Any(y => y == x /*SEE NOTE*/) select x;
foreach(item i in items)
  myListBox.SelectedItems.Add(i); 
```

显然，这不会起作用，因为 y==x 将始终返回 false （这就是您当前的方法不起作用的原因）。您需要替换 y==x 来执行相等比较，这将在您为 MyObject 定义相等时确定相等。您可以按照 Fallen 的建议添加一个 ID，或者按照 Neil 的建议覆盖一系列方法（两者都为 +s），或者只需确定要检查 MyObject 的哪些属性以将它们识别为完全相同的对象.

# python - 在 Windows 中，如何从另一个窗口的控件中枚举和获取文本？

> ID：408334
> 
> 赞同：1
> 
> 时间：2009-01-02T23:49:34.347
> 
> 标签：python, windows, winapi, controls

更具体地说 - 我有另一个正在运行的应用程序的窗口句柄。此应用程序在某处包含一个`TListControl.UnicodeClass`控件（我从 Winspector 知道这一点）。如何使用 Windows API 和该窗口句柄浏览该列表控件中的所有项目并从所有项目中获取文本？

您可以假设该语言是 C/C++，但我实际上将使用 win32all 用于 python。对适当的 API 调用的引用会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-03T00:27:24.910

您需要 EnumWindows 和 EnumChildWindows 进行枚举。有关示例和使用信息/警告，请参见[此处](http://support.microsoft.com/kb/183009)。

对于窗口文本，一旦您拥有适当的 HWND，您通常需要[GetWindowText](http://msdn.microsoft.com/en-us/library/ms633520(VS.85).aspx)，如果文本存储在不同的位置（例如：列表控件），则需要特定于控件的 API。对于特定的控件，您需要知道特定的 API，并且它可能仅通过 Windows API 调用不可用（例如，具有所有者绘制项的控件可以将其文本存储在应用程序中，Windows 无法访问）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-03T14:37:35.973

以上答案是完全错误的，甚至不知道什么是PAS。20 年来，在 Usenet 上已经回答了数百次。你当然必须使用 IPC (RPM)

在 news://comp.os.ms-windows.programmer.win32 上询问代码。

# c++ - 具体类型还是接口？

> ID：408336
> 
> 赞同：1
> 
> 时间：2009-01-02T23:52:14.623
> 
> 标签：c++

我有以下用例，大量代码紧密耦合在具体类型（比如 Concrete1）上。后来发现具体类型需要改，所以定义了一个接口。例如

```
Class ABC {

 virtual int foo() = 0;
 virtual int getType() = 0;

}

class Concrete1 : public ABC {

    int foo() {
    ... }
    int getType() {
      return 1;
    }  

} 
class Concrete2 : public ABC {
    int foo() {
    ... }
    int getType() {
      return 2;
    }
 } 
```

静态工厂模式用于创建对象。因此，所有创建对象 new Concrete1 的地方都被替换为 ABCFactory::createType()。

现在代码中有很多地方我需要检查 createType 返回的对象是 Concrete1 还是 Concrete2 并相应地执行相关逻辑（所以代码中有很多 if else :( ）。

作为此更改的一部分，我想避免代码中出现很多 if else 。有什么建议么？

让我很困扰的是

```
if (abc.getType() == 1) {
    ...
} else if (abc.getType() ==2) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-03T00:12:58.513

使用接口的全部意义在于您可以使用多态性，这意味着您永远不必检查实例的类型。这样做会产生很大的代码异味（请参阅 Fowlers Refacotring）。将条件逻辑移动到具体类，并将处理它的函数添加到接口

编辑（添加代码示例，因为最初的帖子是从手机完成的）：

您正在尝试执行以下操作：

```
void Main(string[] args)
{
   Bird bird = BirdFactory.GetPigeon();
   if (bird.GetType().Equals(typeof(Duck)))
   {
      Console.WriteLine("quack");
   }
   else if (bird.GetType().Equals(typeof(Pigeon)))
   {
      Console.WriteLine("coo coo");
   }
} 
```

相反，请尝试：

```
interface Bird
{
    void Speak();
}

class Duck : Bird
{
    void Speak()
    {
        Console.Write("quack");
    }
}

class Pigeon : Bird
{
    void Speak()
    {
        Console.Write("coo coo");
    }
}

void Main(string[] args)
{
    Bird bird = BirdFactory.GetPigeon();
    bird.Speak();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-03T00:27:56.080

`...`将另一个虚拟方法的实现放入内部：

```
if (abc.getType() == 1) {
    ... // A
} else if (abc.getType() == 2) {
    ... // B
} 
```

把 A 和 B 像这样：

```
class ABC {
 virtual int foo() = 0;
 virtual void doIt() = 0; // choose a proper name
};

class Concrete1 : public ABC {
    int foo() {
    ... }
    void doIt() {
    ... // A
    }
};

class Concrete2 : public ABC {
    int foo() {
    ... }
    void doIt() {
    ... // B
    }
 }; 
```

并将您的 if 更改为

```
abc.doIt(); 
```

正如另一个人所说，这正是动态调度的重点！除了更简洁之外，它也永远不会“忘记”处理类型。进行切换时，您可能会默默地不处理特定类型，因为在引入新实现时您错过了更新该位置的代码。还记得在 ABC 中有一个虚拟析构函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T00:23:26.213

与其他答案一致，在我看来，至少 if/else 块中的一些代码需要作为新的虚函数移到具体类中。这将允许您利用多态性，而不是使用自制反射模式打开类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-03T00:00:27.693

你能把你在类外检测对象类型的地方移到类中吗？这样功能（显然取决于特定类）实际上与适当的类相关联吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-03T00:20:36.843

如果您在运行时检查和/或打开类型，您可能需要考虑使用运行时类型信息（如果它可用于您的编译器）。它确实增加了一些开销，但它完成了您正在尝试做的事情，而无需创建或维护自定义方法。

与纯粹主义者不同，我并不是一个真正的“将功能放入类中以便您可以使用多态性来绕过类型切换”的人。不过，两者都是有效的方法（尽管“在类中”方法并不总是可行的，和/或在概念上是干净的）。

# internet-explorer - IE后台显示问题

> ID：408342
> 
> 赞同：1
> 
> 时间：2009-01-02T23:56:27.343
> 
> 标签：internet-explorer, margin

我正在为我的教会创建一个网站，但无法在 IE 中正确显示。似乎我的 div “sidebox” 的背景位置被 “margin: 0 auto;” 覆盖了 因为背景显示居中而不是右侧，这使站点向右移动。

这是代码：

```
.sidebox {
margin: 0 auto;
background-image: url(images/bg-container-right.jpg);
background-repeat: no-repeat;
background-position: bottom right !important;
position: absolute;
left: 0px;
width: 960px; 
```

}

```
.boxhead {
    background-image: url(images/bg-container-top.jpg);
    background-repeat: no-repeat;
    background-position: top right;
    height: 37px;
}

.boxbody {
    background-image: url(images/bg-container-left.jpg);
    background-repeat: no-repeat;
    background-position: bottom left !important;
    width: 25px !important;
}

.boxtopcorner {
    background-image: url(images/bg-container-top-right.jpg);
    background-repeat: no-repeat;
    background-position: top left;
    width: 25px;
    height: 37px;
}

<div class='sidebox' style='border: 1px solid;'>
I'm in the box
    <div class='boxhead'>
        <div class='boxtopcorner'></div>
    </div>
    <div class='boxbody' style='height: 750px;'>
        <!-- Content Goes Here -->
    </div>
</div> 
```

下面是运行站点的链接。您可以看到它在 FF 和 Safari 中运行良好，但在 IE 中却不行。我上面的代码没有内容，删除它并不能解决问题。 [运行页面](http://victoryregina.com/newSite/church.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T00:11:33.930

对于如何分割背景图像，我会采取完全不同的方法。

1.  为带有圆角的阴影创建顶部和底部图像。使用这些作为顶部和底部的背景（好像这还不明显）。
2.  为两边的阴影创建一个“长”1px 高的图像。将其用于页面的整个内容区域的背景。
3.  尽量不要使用绝对定位。可以使用浮动创建相同的布局。例如：

> .container { 宽度：960px; 边距：0 自动；}

```
.header { width: 960px; height: 20px; background: url(top.jpg) no-repeat; }

.footer { width: 960px; height: 20px; background: url(bottom.jpg) no-repeat; }

.body { width: 960px; background: url(body.jpg) repeat-y; }

<div class='container'>

  <div class='header'>&nbsp;</div>

  <div class='body'> 
```

内容放在这里...使用浮动来创建列而不是绝对定位。

```
 </div>

  <div class='footer'>&nbsp;</div>

</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T00:28:16.860

通过 IE 开发人员工具栏查看它，它使 .sidebox 居中对齐。将其更改为向左似乎可以解决它。

```
.sidebox {
  ...
  text-align: left;
} 
```

# wpf - 动态添加控件的初始验证

> ID：408353
> 
> 赞同：1
> 
> 时间：2009-01-03T00:01:58.910
> 
> 标签：wpf, validation, adorner, adornerlayer

WPF 验证系统执行对象的初始验证（我的意思是 - 当数据绑定项更改时验证所有字段，结果显示在 ui 上）。但是当我动态添加控件时，它不会像这样工作。在这种情况下会发生初始验证，但结果不会显示在 ui 上。只有在数据绑定对象的某些属性发生更改后，一切才开始正常工作。这是一个粗略的样本。

假设我们有 MyObject 类

```
 public class MyObject : INotifyPropertyChanged, IDataErrorInfo
 {
    public string Name { /*get, set implementation */}        

    // IDataErrorInfo
    public string this[string columnName]
    {
        get
        {
            if (String.IsNullOrEmpty(Name)) return "Name can't be empty!";
            return String.Empty;
        }
    }
    /* etc. */
} 
```

还有一些用户控件，比如 MyUserControl，它允许编辑 MyObject 对象。它可能看起来像这样：

```
<UserControl x:Class="Test.MyUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="Name: "/>
            <TextBox Text="{Binding Name, ValidatesOnDataErrors=True}" Width="200"/>
        </StackPanel>
</UserControl> 
```

现在，当将此控件添加到 xaml 中的主窗口（或在构造函数或窗口加载事件中的代码中）时，比将 MyCustomControl.DataContext 设置为 MyObject 类的新实例时，名称字段会立即验证并发出错误通知使用验证错误模板显示。但是当动态添加 MyCustomControl 时（例如，单击按钮之后），会发生初始验证，但 ui 不显示结果（没有红色边框等）

假设应用程序窗口由一个停靠面板（dockPanel）和一个按钮组成：

```
public Window1()
        {
            InitializeComponent();

            button.Click +=new RoutedEventHandler(OnButtonClick);

            /*
            // in this case validation works correctly,
            // when window is shown Name textbox already got a red border etc.
            var muc = new MyUserControl();
            dockPanel.Children.Add(muc);
            muc.DataContext = new MyObject(); 
            */
        }

        private void OnButtonClick(object sender, RoutedEventArgs e)
        {
            // in this case validatation works, but no results are shown on the ui
            // only after Name property is changed (then removed again) red border appears
            var muc = new MyUserControl();
            dockPanel.Children.Add(muc);
            muc.DataContext = new MyObject(); 
        } 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-03T22:06:39.967

好的，我找到了答案。这是装饰层的问题。我们的 WPF 专家已经遇到过它并提供了一些解决方案。请参阅[Karl Shifflett 的帖子](http://karlshifflett.wordpress.com/2008/02/19/wpf-validation-errors-disappear-inside-tabcontrol-when-switching-tabitems/)。

# actionscript-3 - 在 2D 位图上查找质心

> ID：408358
> 
> 赞同：10
> 
> 时间：2009-01-03T00:04:59.667
> 
> 标签：actionscript-3, algorithm, language-agnostic

我正在编写游戏，我希望能够在黑白位图上找到任意形状的质心，例如：

```
012345678
0.XX……
1..XXX....
2...XXX...
3..XXXXXX
4...XXX...

```

所有“细胞”具有相同的重量。对角相邻的单元格不被认为是连接的，并且形状将始终是单个单元格，因为在此之前它已经被另一个函数拆分。

它只会用于相当低的分辨率（最多可能是 50x50）图像，并且不需要非常精确，速度更可取。

我觉得有一种正确的方法可以做到这一点，但我真的不知道该谷歌搜索什么。

我在 Actionscript 3 中对此进行了编码，但是任何语言的示例都会受到赞赏，如果它们被人类理解的话。

编辑：随意假设数据存储在您认为对您的示例最方便的任何数据结构中。我使用的是位图，但二维数组甚至单个数组也可以！

编辑：这是我最终使用的代码，它很可能可以更快地完成，但我发现这非常易读：

```
// _bmp is a private BitmapData instance
public function getCenterOfMass():Point {
    var avg     :Point  = new Point(0, 0);
    var points  :uint   = 0;

    for (var ix:uint = 0; ix < _bmp.width; ix++) {
        for (var iy:uint = 0; iy < _bmp.height; iy++) {
            if (_bmp.getPixel(ix, iy) == ACTIVE_COLOR) {
                avg.x += ix;
                avg.y += iy;
                points++;
            }
        }
    }

    avg.x /= points;
    avg.y /= points;

    return avg;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-03T00:17:03.073

这个基于布尔矩阵的算法（伪代码）怎么样，比如你的例子：

```
xSum = 0
ySum = 0
points = 0

for point in matrix
    if point is marked
        xSum += pointX
        ySum += pointY
        points++

return (xSum/points, ySum/points) 
```

没什么太复杂的，计算 X 出现最多的位置，Y 也一样，除以你计算的点数，你就得到了质心。您可以通过在平均中赋予某些点不同的权重来进一步复杂化，但这应该是您的主要方向。

* * *

这个问题让我想到了这个问题的扩展，我找不到一个好的答案。我在这里发布了问题：[Finding clusters of mass in a matrix/bitmap](https://stackoverflow.com/questions/411837/finding-clusters-of-mass-in-a-matrix-bitmap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-03T05:27:07.770

您可以计算相邻单元格的数量，然后以具有最高邻居数的单元格为中心。

```
012345678
0 XX |
1 XXX |
2 XXX |
3 XXXXXXX|
4 XXX |

 012345678
0 23 |
1 454 |
2 775 |
3 3686421|
4 454 |

```

在此示例中，您可以使用唯一带有`8`, 作为中心点的单元格。

如果您想出了多个具有相同数量邻居的单元格，您只需再次运行计数程序，但这次只使用高数量的单元格。

例如，假设具有 、 和 的单元格`6`都有`7`八个`8`邻居。

```
012345678
0 23 |
1 454 |
2 885 |
3 3888421|
4 454 |

 012345678
0 -- |
1 --- |
2 XX- |
3 -XXX----|
4 --- |

 012345678
0 -- |
1 --- |
2 34- |
3 -342---|
4 --- |

 012345678
0 -- |
1 --- |
2 -X- |
3 --X----|
4 --- |

```

如果是简单的领带，我会选择靠近中心的那个。在这种情况下，它将是两者中的上一个。

*注意：我假设您没有将其用于精确的物理模拟。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T00:33:08.767

根据您的动作脚本解释器的性质和对形状进行的预处理，您可能会看到速度提高（相对于 Yuval 指出的直接方法），首先创建对角镜像的位图/数组的第二个副本，然后使用行或字符串操作函数以单步求和每行和列上的点。这将是 O(2m *n) 而不是 O(n* n) [见下文]，但开销更大。

```
xSum = 0
ySum = 0
points = 0

for row in matrix
  ySum += rowX * countpoints(row)
  points += countpoints(row)
for row in mirroredmatrix
  xSum += rowX * countpoints(row)

return (xSum/points, ySum/points) 
```

其中 countpoints() 连续计算 on 点。这依赖于计数点（其具有 O(n) 运行时）具有比天真的方法的运行时更低的常数乘数（因此在上面，“m”是计数点的运行时间，“n”是解释器循环遍历一行的时间）。countpoints() 的性质取决于您的存储方法，这可能涉及对字符串中的字符或位域中的位进行计数。

# asp.net - UpdatePanel 中的 Gridview 不在 DOM 中呈现

> ID：408378
> 
> 赞同：3
> 
> 时间：2009-01-03T00:20:03.817
> 
> 标签：asp.net, ajax, gridview, updatepanel

我正在使用 ASP 网络 Ajax 工具包，并且在`GridView`内有一个`UpdatePanel`，一切正常。

当我尝试`JQuery`对应该生成的表运行一些操作时，返回的 DOM 中没有任何`GridView`（或 table ）的迹象。`HTML`我假设这都是由 ASP 生成的`Javascript`？

如何对`GridView`位于 a 内的a 执行任何操作`UpdatePanel`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T01:02:49.770

ASP.NET 在特定条件下会破坏控件的名称。您可能需要查看生成的源代码，以确保您引用的是由 ASP.NET 在生成时为其指定的名称的控件。它可能不是您在标记中给出的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T20:24:34.770

如果您可以在代码隐藏中生成您的 javascript，在 Page_Load 中进行坚持，那么您可以将您的 GridView1.ClientID 等注入您的 javascript。（例如，我在这里使用了 TextBox，但它遵循相同的概念。）

```
protected void Page_Load(object sender, EventArgs e)
{
    string js = "$(document).ready(function(){$(\"#" + this.TextBox1.ClientID + "\").text('hello world');});";
    HtmlGenericControl script = new HtmlGenericControl("script");
    script.Attributes.Add("type", "text/javascript");
    script.InnerHtml = js;
    Page.ClientScript.RegisterStartupScript(this.GetType(), "key", js, true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T20:38:43.907

我能想到三个解决方案。第一个，如 Dave 建议的那样，使用 ClientID 从服务器注入 javascript，虽然有效，但很快就会变得非常混乱。我这样做了一段时间，但是服务器端和客户端的这种紧密耦合会导致问题。

第二种是提供另一种识别实体的方法，例如 css 类。这比第一个选项要好，但是会给您留下很多无关的类定义，您必须保持直截了当。

我更喜欢的解决方案是使用像 jQuery 这样的具有选择器引擎的 javascript 框架。这样，您可以通过一些巧妙的选择和 DOM 遍历来绕过 UniqueID 垃圾。

假设您有一个名为 myControl 的控件。ASP.Net 会在此之前生成一个巨大的命名空间，因此在渲染时不会有任何 id 冲突。但是您可以通过执行 $('[id$=myControl]') 来选择每个 myControl，它会选择 ID 以 myControl 结尾的每个对象。在其他框架中可能有类似的方法可以做到这一点，但我对它们还不够熟悉，无法举个例子。

# grails - Dreamweaver + Grails

> ID：408394
> 
> 赞同：8
> 
> 时间：2009-01-03T00:33:27.737
> 
> 标签：grails, dreamweaver, gsp

有人试过用 Adob​​e Dreamweaver CS4 做 GSP 设计吗？它支持 JSP，但它不识别 gsp 扩展，即使它识别了，我认为关于它无法识别的 gsp 标签也会有问题。我在这里找到了一本小食谱 ( [http://www.bitwalker.nl/blog/using-groovyserver-pages-in-dreamweaver](http://www.bitwalker.nl/blog/using-groovyserver-pages-in-dreamweaver) )，用于让 GSP 部分使用 Dreamweaver CS3，但它引用的许多文件和目录不再出现存在于 CS4 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-01-12T10:45:03.553

我想我在搞砸了一段时间后让它为 CS5 工作了。您需要执行的步骤与上述[文章](http://www.bitwalker.nl/blog/using-groovyserver-pages-in-dreamweaver)类似，但对 Dreamweaver CS5 略有更改。所以要完成五个步骤，请在每个步骤之后进行测试，以确保您走在正确的道路上。

1.  **将 *.gsp 文件扩展名添加到打开对话框。** 编辑 %APPDATA%\Adobe\Dreamweaver CS5\en_US\Configuration\Extensions.txt 以将“GSP:Groovy Server Pages”（无引号）添加到文件底部，并将 GSP 扩展名添加到第一行之前：All文件。现在重新启动 Dreamweaver CS5 并测试“文件”>“打开...”对话框是否在列表中具有 GSP 扩展名。
2.  现在我们需要**添加正确的文档类型，以便 Dreamweaver CS5 了解 GSP。**编辑 %DreamweaverInstallationDirectory%\configuration\DocumentTypes\MMDocumentTypes.xml 以添加以下文档类型作为最后一个节点。

    `<documenttype id="GSP" servermodel="JSP" internaltype="Dynamic" winfileextension="gsp" macfileextension="gsp" file="Default.gsp" writebyteordermark="false" mimetype="text/html"> <TITLE>GSP</TITLE> <description>Groovy Server Pages (GSP) document</description> <dtdcontext>html</dtdcontext> </documenttype>`

如果您想提供标题和描述作为本地化字符串，请参阅[本文](http://help.adobe.com/en_US/dreamweaver/cs/extend/WS5b3ccc516d4fbf351e63e3d117f53d6108-7ffd.html)。

1.  **为新文档创建模板。**将 %DreamweaverInstallationDirectory%\configuration\DocumentTypes\NewDocuments\Default.jsp 复制到 Default.gsp，编辑它以删除第一行。（您可以根据需要编辑此文件，因为它充当新创建文件的模板）。现在重新启动 Dreamweaver CS5 并测试“文件”>“新建...”对话框是否包含带有您的描述的 GSP 页面类型。测试新文件的创建。
2.  **设置 GSP 标签库。**下载并解压缩[Dreamweaver 的 GspTagLibrary](http://www.bitwalker.nl/wp-content/uploads/2007/09/gsptaglibrary.zip)。将包含大量 *.vtm 文件的 GSP 文件夹复制到 %DreamweaverInstallationDirectory%\configuration\TagLibraries。编辑 %APPDATA%\Adobe\Dreamweaver CS5\en_US\Configuration\TagLibraries\TagLibraries.vtm 以将 gspTagLibrary.vtm 的内容添加为最后一个节点。将第一行替换为以下内容：

    `<taglibrary name="GSP tags" doctypes="GSP" id="DWTagLibrary_GSP" prefix="&lt;g:">`

还将 GSP 添加到 id="DWTagLibrary_html" 的 <taglibrary> 的文档类型中（应该是第一个节点）。为以防万一，对 %DreamweaverInstallationDirectory%\configuration\TagLibraries\TagLibraries.vtm 进行相同的更改。重新启动 Dreamweaver CS5 并确保您可以在 Edit > Tag Libraries... 中看到 GSP 标签库，并带有正确的标签前缀 (g:)。检查是否为“GSP 标签”和“HTML 标签”勾选了“用于：GSP”复选框。

1.  作为最后一步，我们必须启用代码着色。编辑 %APPDATA%\Adobe\Dreamweaver CS5\en_US\Configuration\CodeColoring\CodeColoring.xml 以搜索并替换 ',JSP,' 为 ',JSP,GSP,'（不要加引号并注意逗号）。还找到行 <sampleText doctypes="JSP"> 并在那里添加 GSP doctype，例如 <sampleText doctypes="JSP,GSP"> （如果你真的想要，你可以创建自己的 GSP 代码示例，就像 JSP 的一样）。以防万一，在 %DreamweaverInstallationDirectory%\configuration\CodeColoring\CodeColoring.xml 中进行相同的更改。

重新启动 Dreamweaver CS5 并测试编辑 > 首选项... > 代码着色是否具有 GSP 文档类型。单击“编辑着色方案”以测试 Preview 是否具有带有代码着色的代码示例以及“样式”列表中提到的 GSP 标签。最后打开任何 GSP 文件并检查它是否具有 HTML、CSS、JavaScript 和 GSP 标签的代码着色。

就是这样！希望这对某人有帮助！并感谢 Harald Walker 为我撰写研究所依据的[文章。](http://www.bitwalker.nl/blog/using-groovyserver-pages-in-dreamweaver)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-20T01:07:19.867

同意，在 intelliJ 中编码是前进的方向，但 HTML 和 css 设计最好在另一个更适合该目的的工具中完成，就像 intelliJ 对于 java 和 groovy 一样。欢迎任何想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T02:04:59.347

我不会直接回答您的问题，但实际上，像 NetBeans 或 Eclipse 这样的 IDE 更适合 Groovy/Grails 开发。Dreamweaver 从未打算成为开发人员编辑器，而是更多地成为设计师编辑器。因此，它缺少更多以开发人员为中心的 IDE 所具有的许多功能。

我假设您使用 Dreamweaver 是因为它以设计为中心的行为。NetBeans 和 Eclipse 都具有预览模式，您可以在其中以近乎即时的方式查看更改，就像我猜您喜欢 Dreamweaver 一样。

长话短说，使用更合适的 IDE。

# c# - c# 的磁盘支持字典/缓存

> ID：408401
> 
> 赞同：11
> 
> 时间：2009-01-03T00:37:48.820
> 
> 标签：c#, caching, disk-based

我正在寻找一种用于缓存大量数据的解决方案。

相关问题，但针对不同语言：

*   [Python 基于磁盘的字典](https://stackoverflow.com/questions/226693/python-disk-based-dictionary)
*   [磁盘支持的 STL 容器类？](https://stackoverflow.com/questions/149488/disk-backed-stl-container-classes)

用不同的术语关闭问题：

*   [在 C# 中寻找一个简单的独立持久字典实现](https://stackoverflow.com/questions/100235/looking-for-a-simple-standalone-persistant-dictionary-implementation-in-c)

我不需要（或不想为此支付任何费用）持久性、事务、线程安全等，并且想要使用不比 List<> 或 Dictionary<> 复杂得多的东西。

如果我必须编写代码，我会将所有内容保存为临时目录中的文件：

```
string Get(int i)
{
   File.ReadAllText(Path.Combine(root,i.ToString());
} 
```

在我的情况下，索引将是一个`int`（并且它们应该是连续的或足够接近）并且数据将是一个`string`，因此我可以摆脱同时处理[POD](http://en.wikipedia.org/wiki/Plain_Old_Data_Structures)并且宁愿超轻并做到这一点。

用法是我有一个 3k 文件序列（如文件 #1 到 #3000），总计 650MB，需要为序列中的每个步骤做一个差异。我希望总数大致相同或更多，我不想将所有这些都保存在内存中（更大的情况可能会出现在我无法做到的情况下）。

* * *

许多人为我的问题提出了不同的解决方案。然而，似乎没有一个针对我的小利基。我正在查看磁盘支持缓存的原因是因为我预计我当前的使用将占用我可用地址空间的 1/3 到 1/2。我担心更大的箱子会完全耗尽空间。我不担心踩踏、持久性或复制。我正在寻找的是使用最少代码、最少占用空间、最少内存开销和最低复杂性的最小解决方案。

我开始认为我过于乐观了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-03T02:07:24.960

What you really want is a B-Tree. That's the primary data structure that a database uses. It's designed to enable you to efficiently swap portions of a data structure to and from disk as needed.

I don't know of any widely used, high quality standalone B-Tree implementations for C#.

However, an easy way to get one would be to use a Sql Compact database. The Sql Compact engine will run in-process, so you don't need a seperate service running. It will give you a b-tree, but without all the headaches. You can just use SQL to access the data.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-04T22:20:54.197

这与我的问题非常相似

[在 C# 中寻找一个简单的独立持久字典实现](https://stackoverflow.com/questions/100235/looking-for-a-simple-standalone-persistant-dictionary-implementation-in-c)

我认为不存在完全符合您想要的库，也许是时候在 github 上创建一个新项目了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-03T02:06:09.173

Disclaimer - I am about to point you at a product that I am involved in.

I'm still working on the web site side of things, so there is not a lot of info, but [Serial Killer](http://www.thinkbottomup.com.au/site/Products/SerialKiller) would be a good fit for this. I have examples that use .Net serialization (can supply examples), so writing a persistent map cache for .Net serializable objects would be trivial.

Enough shameless self promotion - if interested, use the contact link on the website.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-03T04:56:27.117

这是 .net 的 B-Tree 实现：http: [//bplusdotnet.sourceforge.net/](http://bplusdotnet.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-03T01:19:53.743

you can use the [MS application block](http://www.codeproject.com/KB/database/MS_Application_Blocks.aspx) with disk based cache solution

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-03T02:00:42.430

Try looking at NCache [here](http://www.alachisoft.com/ncache/caching_topology.html) also.

I am not affiliated with this company. I've just downloaded and tested their free express version.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-03T04:39:02.860

我已将 EhCache Java 应用程序部分弹出到 .NET 尚未实现分布式缓存，但在单个节点上，所有原始单元测试都通过了。完全开源：

[http://sourceforge.net/projects/thecache/](http://sourceforge.net/projects/thecache/)

如果您需要，我可以创建一个二进制文件（现在只有源代码可用）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-03T23:33:33.317

鉴于您最近对该问题进行了编辑，我建议您实施问题中提到的解决方案，因为您不太可能找到包含在库中供您重用的如此幼稚的解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-03T05:48:53.733

I'd take the embedded DB route (SQLite, Firebird), but here are some other options:

*   [Berkeley DB](http://sourceforge.net/projects/libdb-dotnet): not your standard SQL embedded DB, but seems to be the right choice for this kind of task, although [not easily usable from .net](http://ayende.com/Blog/archive/2008/07/03/In-search-of-an-embedded-DB.aspx)
*   [db4o](http://www.db4o.com): an OODB, very simple interface

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-03T06:19:55.230

I recommend the Caching Application block in the Enterprise Library from MS. That was recommended as well, but the link points to an article on the Data Access portion of the Enterprise Library.

Here is the link to the Caching Application Block:

[http://msdn.microsoft.com/en-us/library/cc309502.aspx](http://msdn.microsoft.com/en-us/library/cc309502.aspx)

And specifically, you will want to create a new backing store (if one that persists to disk is not there):

[http://msdn.microsoft.com/en-us/library/cc309121.aspx](http://msdn.microsoft.com/en-us/library/cc309121.aspx)

# php - 在 PHP 中测试 404 的 URL 的简单方法？

> ID：408405
> 
> 赞同：161
> 
> 时间：2009-01-03T00:44:25.593
> 
> 标签：php, http, validation, http-headers, http-status-code-404

我正在自学一些基本的抓取，我发现有时我输入到我的代码中的 URL 会返回 404，这会弄乱我的所有其余代码。

所以我需要在代码顶部进行测试，以检查 URL 是否返回 404。

这似乎是一项非常简单的任务，但谷歌没有给我任何答案。我担心我在寻找错误的东西。

一个博客推荐我使用这个：

```
$valid = @fsockopen($url, 80, $errno, $errstr, 30); 
```

然后测试看看 $valid 是否为空。

但我认为给我带来问题的 URL 上有一个重定向，所以 $valid 对于所有值都是空的。或者也许我做错了什么。

我还研究了一个“头部请求”，但我还没有找到任何我可以玩或尝试的实际代码示例。

建议？这和 curl 有什么关系？

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2009-01-03T00:56:06.710

如果您使用的是 PHP 的[`curl`bindings](http://us3.php.net/manual/en/ref.curl.php)[`curl_getinfo`](http://us3.php.net/manual/en/function.curl-getinfo.php) ，您可以使用如下方式检查错误代码：

```
$handle = curl_init($url);
curl_setopt($handle,  CURLOPT_RETURNTRANSFER, TRUE);

/* Get the HTML or whatever is linked in $url. */
$response = curl_exec($handle);

/* Check for 404 (file not found). */
$httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
if($httpCode == 404) {
    /* Handle 404 here. */
}

curl_close($handle);

/* Handle $response here. */ 
```

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2009-01-03T01:01:18.383

如果您正在运行 php5，您可以使用：

```
$url = 'http://www.example.com';
print_r(get_headers($url, 1)); 
```

或者使用 php4，用户贡献了以下内容：

```
/**
This is a modified version of code from "stuart at sixletterwords dot com", at 14-Sep-2005 04:52\. This version tries to emulate get_headers() function at PHP4\. I think it works fairly well, and is simple. It is not the best emulation available, but it works.

Features:
- supports (and requires) full URLs.
- supports changing of default port in URL.
- stops downloading from socket as soon as end-of-headers is detected.

Limitations:
- only gets the root URL (see line with "GET / HTTP/1.1").
- don't support HTTPS (nor the default HTTPS port).
*/

if(!function_exists('get_headers'))
{
    function get_headers($url,$format=0)
    {
        $url=parse_url($url);
        $end = "\r\n\r\n";
        $fp = fsockopen($url['host'], (empty($url['port'])?80:$url['port']), $errno, $errstr, 30);
        if ($fp)
        {
            $out  = "GET / HTTP/1.1\r\n";
            $out .= "Host: ".$url['host']."\r\n";
            $out .= "Connection: Close\r\n\r\n";
            $var  = '';
            fwrite($fp, $out);
            while (!feof($fp))
            {
                $var.=fgets($fp, 1280);
                if(strpos($var,$end))
                    break;
            }
            fclose($fp);

            $var=preg_replace("/\r\n\r\n.*\$/",'',$var);
            $var=explode("\r\n",$var);
            if($format)
            {
                foreach($var as $i)
                {
                    if(preg_match('/^([a-zA-Z -]+): +(.*)$/',$i,$parts))
                        $v[$parts[1]]=$parts[2];
                }
                return $v;
            }
            else
                return $var;
        }
    }
} 
```

两者的结果都类似于：

```
Array
(
    [0] => HTTP/1.1 200 OK
    [Date] => Sat, 29 May 2004 12:28:14 GMT
    [Server] => Apache/1.3.27 (Unix)  (Red-Hat/Linux)
    [Last-Modified] => Wed, 08 Jan 2003 23:11:55 GMT
    [ETag] => "3f80f-1b6-3e1cb03b"
    [Accept-Ranges] => bytes
    [Content-Length] => 438
    [Connection] => close
    [Content-Type] => text/html
) 
```

因此，您只需检查标头响应是否正常，例如：

```
$headers = get_headers($url, 1);
if ($headers[0] == 'HTTP/1.1 200 OK') {
//valid 
}

if ($headers[0] == 'HTTP/1.1 301 Moved Permanently') {
//moved or redirect page
} 
```

[W3C 代码和定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html "W3C 代码和定义")

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2011-01-03T13:31:35.610

使用 strager 的代码，您还可以检查 CURLINFO_HTTP_CODE 以获取其他代码。有些网站不报告 404，而是简单地重定向到自定义 404 页面并返回 302（重定向）或类似的东西。我用它来检查服务器上是否存在实际文件（例如 robots.txt）。显然，这种文件如果存在就不会导致重定向，但如果不存在，它会重定向到 404 页面，正如我之前所说，它可能没有 404 代码。

```
function is_404($url) {
    $handle = curl_init($url);
    curl_setopt($handle,  CURLOPT_RETURNTRANSFER, TRUE);

    /* Get the HTML or whatever is linked in $url. */
    $response = curl_exec($handle);

    /* Check for 404 (file not found). */
    $httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
    curl_close($handle);

    /* If the document has loaded successfully without any redirection or error */
    if ($httpCode >= 200 && $httpCode < 300) {
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2009-01-03T00:59:16.750

正如 strager 建议的那样，研究使用 cURL。您可能也有兴趣使用[curl_setopt](http://php.net/manual/en/function.curl-setopt.php)设置 CURLOPT_NOBODY以跳过下载整个页面（您只需要标题）。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2011-05-12T14:43:14.843

如果您正在寻找一种最简单的解决方案，并且您可以在 php5 上一次性尝试

```
file_get_contents('www.yoursite.com');
//and check by echoing
echo $http_response_header[0]; 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-01-03T00:55:07.583

[我在这里](http://robert.arlesnet.com/2008/01/20/betwittered-php-and-file_get_contents/)找到了这个答案：

```
if(($twitter_XML_raw=file_get_contents($timeline))==false){
    // Retrieve HTTP status code
    list($version,$status_code,$msg) = explode(' ',$http_response_header[0], 3);

    // Check the HTTP Status code
    switch($status_code) {
        case 200:
                $error_status="200: Success";
                break;
        case 401:
                $error_status="401: Login failure.  Try logging out and back in.  Password are ONLY used when posting.";
                break;
        case 400:
                $error_status="400: Invalid request.  You may have exceeded your rate limit.";
                break;
        case 404:
                $error_status="404: Not found.  This shouldn't happen.  Please let me know what happened using the feedback link above.";
                break;
        case 500:
                $error_status="500: Twitter servers replied with an error. Hopefully they'll be OK soon!";
                break;
        case 502:
                $error_status="502: Twitter servers may be down or being upgraded. Hopefully they'll be OK soon!";
                break;
        case 503:
                $error_status="503: Twitter service unavailable. Hopefully they'll be OK soon!";
                break;
        default:
                $error_status="Undocumented error: " . $status_code;
                break;
    } 
```

本质上，您使用“文件获取内容”方法来检索 URL，它会自动使用状态代码填充 http 响应标头变量。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-03-23T11:36:58.340

如果 url 不返回 200 OK，这将为您提供 true

```
function check_404($url) {
   $headers=get_headers($url, 1);
   if ($headers[0]!='HTTP/1.1 200 OK') return true; else return false;
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-01-22T16:05:59.580

附录；考虑性能测试了这 3 种方法。

结果，至少在我的测试环境中：

**卷曲获胜**

此测试是在考虑只需要标头（noBody）的情况下完成的。测试自己：

```
$url = "http://de.wikipedia.org/wiki/Pinocchio";

$start_time = microtime(TRUE);
$headers = get_headers($url);
echo $headers[0]."<br>";
$end_time = microtime(TRUE);
echo $end_time - $start_time."<br>";

$start_time = microtime(TRUE);
$response = file_get_contents($url);
echo $http_response_header[0]."<br>";
$end_time = microtime(TRUE);
echo $end_time - $start_time."<br>";

$start_time = microtime(TRUE);
$handle = curl_init($url);
curl_setopt($handle,  CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($handle, CURLOPT_NOBODY, 1); // and *only* get the header 
/* Get the HTML or whatever is linked in $url. */
$response = curl_exec($handle);
/* Check for 404 (file not found). */
$httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
// if($httpCode == 404) {
    // /* Handle 404 here. */
// }
echo $httpCode."<br>";
curl_close($handle);
$end_time = microtime(TRUE);
echo $end_time - $start_time."<br>"; 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-04-14T10:21:20.533

此函数返回 PHP 7 中 URL 的状态码：

```
/**
 * @param string $url
 * @return int
 */
function getHttpResponseCode(string $url): int
{
    $headers = get_headers($url);
    return substr($headers[0], 9, 3);
} 
```

例子：

```
echo getHttpResponseCode('https://www.google.com');
//displays: 200 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-08-14T14:01:43.047

作为公认答案的附加提示：

使用建议解决方案的变体时，由于 php 设置“max_execution_time”而出现错误。所以我做了以下事情：

```
set_time_limit(120);
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_NOBODY, true);
$result = curl_exec($curl);
set_time_limit(ini_get('max_execution_time'));
curl_close($curl); 
```

首先，我将时间限制设置为更高的秒数，最后我将其设置回 php 设置中定义的值。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-08-26T01:38:34.047

这是一个简短的解决方案。

```
$handle = curl_init($uri);
curl_setopt($handle,  CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($handle,CURLOPT_HTTPHEADER,array ("Accept: application/rdf+xml"));
curl_setopt($handle, CURLOPT_NOBODY, true);
curl_exec($handle);
$httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
if($httpCode == 200||$httpCode == 303) 
{
    echo "you might get a reply";
}
curl_close($handle); 
```

在您的情况下，您可以更改`application/rdf+xml`为您使用的任何内容。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-06-24T06:48:45.293

```
<?php

$url= 'www.something.com';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, true);   
curl_setopt($ch, CURLOPT_NOBODY, true);    
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.4");
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_TIMEOUT,10);
curl_setopt($ch, CURLOPT_ENCODING, "gzip");
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
$output = curl_exec($ch);
$httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

echo $httpcode;
?> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-03-26T12:29:04.637

您也可以使用此代码来查看任何链接的状态：

```
<?php

function get_url_status($url, $timeout = 10) 
{
$ch = curl_init();
// set cURL options
$opts = array(CURLOPT_RETURNTRANSFER => true, // do not output to browser
            CURLOPT_URL => $url,            // set URL
            CURLOPT_NOBODY => true,         // do a HEAD request only
            CURLOPT_TIMEOUT => $timeout);   // set timeout
curl_setopt_array($ch, $opts);
curl_exec($ch); // do it!
$status = curl_getinfo($ch, CURLINFO_HTTP_CODE); // find HTTP status
curl_close($ch); // close handle
echo $status; //or return $status;
    //example checking
    if ($status == '302') { echo 'HEY, redirection';}
}

get_url_status('http://yourpage.comm');
?> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-11-12T23:05:40.573

这里有办法！

```
<?php

$url = "http://www.google.com";

if(@file_get_contents($url)){
echo "Url Exists!";
} else {
echo "Url Doesn't Exist!";
}

?> 
```

这个简单的脚本只是向 URL 发出请求以获取其源代码。如果请求成功完成，它将输出“URL Exists！”。如果没有，它将输出“URL 不存在！”。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-01-03T01:01:01.847

这只是一段代码，希望对你有用

```
 $ch = @curl_init();
            @curl_setopt($ch, CURLOPT_URL, 'http://example.com');
            @curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1");
            @curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            @curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
            @curl_setopt($ch, CURLOPT_TIMEOUT, 10);

            $response       = @curl_exec($ch);
            $errno          = @curl_errno($ch);
            $error          = @curl_error($ch);

                    $response = $response;
                    $info = @curl_getinfo($ch);
return $info['http_code']; 
```

# silverlight - Silverlight 2：文字发光效果？

> ID：408406
> 
> 赞同：6
> 
> 时间：2009-01-03T00:45:03.347
> 
> 标签：silverlight, graphics

我想在 Silverlight 中的文本块上创建外发光（或光晕）效果。

（对于 PS3 用户，类似于该系统上菜单文本周围的发光）。

我似乎对其他形状（例如矩形）进行了内部和外部发光的示例，但这不会转化为文本。

只是想知道是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-05-16T13:41:56.317

迟到总比不到好。看看这个潜在的解决方案：

[http://puremsil.wordpress.com/2010/05/16/glow-effect-in-silverlight/](http://puremsil.wordpress.com/2010/05/16/glow-effect-in-silverlight/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-06T14:26:53.873

Take a look at the Blacklight project at [http://www.codeplex.com/blacklight](http://www.codeplex.com/blacklight). They have support for inner and outer glows.

# asp.net - ASP.Net 中的图像浏览器

> ID：408412
> 
> 赞同：1
> 
> 时间：2009-01-03T00:54:52.907
> 
> 标签：asp.net

我有一些使用 .Net（Win Forms 和 WPF）的经验，但在 ASP.Net 中我非常绿色。我的任务是构建一个简单的、基于文件系统的图片浏览器，我希望得到您的帮助，指导我如何完成这项工作。图像应该存储在运行应用程序的 Web 服务器中，位于主应用程序目录下名为“Images”的文件夹中。

这是我到目前为止所拥有的：

我正在使用 DataList，DataList 的 ItemTemplate 包含 1 个 img（用于实际缩略图）和 1 个标签（用于图片名称）。

在后面的代码中，我将目录和图像文件列表绑定到 DataList，如下所示：

```
//Class property:
public List<FileSystemInfo> filesAndDirs;

//Page load:
if (filesAndDirs == null)
{
    filesAndDirs = new List<FileSystemInfo>();
}
DirectoryInfo di = new DirectoryInfo(MapPath("Images"));
filesAndDirs.AddRange(di.GetDirectories());
filesAndDirs.AddRange(di.GetFiles("*.jpg"));
DataList1.DataSource = filesAndDirs;
DataList1.DataBind(); 
```

在 aspx 文件中，我有以下内容：

```
<asp:DataList ID="DataList1" runat="server" RepeatColumns="4" ...>
    <ItemTemplate>
        <img src='~/Images/<%#Eval("Name") %>' width="100" />
        <asp:Label ID="Label3" Text='<%#Eval("Name") %>' runat="server" ></asp:Label>
    </ItemTemplate>
</asp:DataList> 
```

标签正确显示文件的名称，但到目前为止，图像没有显示任何内容。我究竟做错了什么？

您将如何构建这样的图像浏览器？

如果您有图像浏览器的“入门工具包”或可以分享的代码，我将不胜感激！

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T01:27:50.000

Add runat="server" to your img tag. The tilde "~" only works for server based controls. With the code in its current state it sends "~/Images/img.jpg" to the client. Making it a server control will have it resolve the image path.

I would recommend checking out this project as a starter [http://www.jigar.net/applications/album/index.aspx](http://www.jigar.net/applications/album/index.aspx)

# c# - 为什么要显式接口实现？

> ID：408415
> 
> 赞同：9
> 
> 时间：2009-01-03T00:55:14.340
> 
> 标签：c#, interface

我最近实现了一个类，如：

```
class TestClass : IDisposable
{
    RegistryKey m_key;
    public TestClass()
    {
        m_key = Registry.CurrentUser.OpenSubKey("Software", false);
    }

    public void Dispose()
    {
        // m_key.Dispose();
        IDisposable disp = m_key;
        disp.Dispose();
    }
} 
```

如果我取消对 Dispose 的直接调用的注释，我会收到错误 CS0117（“'Microsoft.Win32.RegistryKey' 不包含 'Dispose' 的定义”）。一些谷歌搜索把我带到了[这个线程](http://bytes.com/groups/net-c/521478-interface-implementation)，在那里我了解了发生了什么，所以我现在了解了它的机制。[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.system.idisposable.dispose(VS.80).aspx)文档建议作者更喜欢我调用 Close() 而不是 Dispose()，但没有解释原因。

这种模式的目的是什么（我想我在 IO 类中也看到过）？鉴于这是类作者的有意决定，上面的代码有多糟糕（通过 IDisposable 接口调用 Dispose）？不会太糟糕 - 毕竟，这是在 using 语句中会发生的事情，对吧？

[编辑：1）将标题从“非公开”更改为“显式”2）从我的代码中删除了显式实现，不小心从实验中遗留下来]

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-03T01:05:40.980

这称为**显式接口实现**。在您的示例中，由于您将 Dispose() 方法定义为“void IDisposable.Dispose()”，因此您也明确地实现了 IDisposable 接口。

通常这样做是为了避免碰撞。如果 Microsoft 想要添加另一个对 RegistryKey 执行其他操作的 Dispose() 方法，除非他们使用该接口的显式实现，否则他们将无法做到。

这通常使用通用 IEnumerable<T> 接口来完成。它还要求您实现非泛型接口 IEnumerable。这两个接口中唯一的成员是GetEnumerator，泛型的更有用，所以它通常是这样实现的：

```
public clas SomeClass : IEnumerable<SomeOtherClass>
{
    public IEnumerator<SomeOtherClass> GetEnumerator ()
    {
        ...
    }

    IEnumerator IEnumerable.GetEnumerator ()
    {
        return GetEnumerator ();
    }
} 
```

这样，当您调用 SomeClass 的 GetEnumator 方法的对象时，它会调用泛型版本，因为另一个是显式实现的，允许我们获得强类型泛型允许。

**请参阅 Jesse Liberty 的Programming C#**第 166-169 页（我有第四版）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2009-01-03T02:34:40.053

大多数人不同意我的观点，但**我喜欢对*所有*接口**使用显式接口实现。我想弄清楚我是在编写要在我的对象还是在我的界面上调用的方法。

如果你有一个对象的引用并且想要调用一个接口方法（如上面的例子），这会很痛苦，但我通过编写来缓解它：

```
class C : IDisposable
{
    public IDisposable IDisposable { get { return this; } }
    void IDisposable.Dispose() { }
} 
```

这意味着在 C 上调用该方法如下所示：

```
C c = ...
c.IDisposable.Dispose(); 
```

编译器将其解析为“调用`IDisposable`C 上的属性，然后调用`Dispose()`结果上的方法”，但我将其读作“调用上的`IDisposable.Dispose()`方法`C`”，这在这里看起来很自然。

不幸的是，这种方法在使用泛型接口时会变得很丑陋。

# security - SSL 客户端如何验证服务器的证书？

> ID：408431
> 
> 赞同：1
> 
> 时间：2009-01-03T01:11:27.800
> 
> 标签：security, ssl, cryptography, openssl, ssl-certificate

我正在构建一个应用程序，并计划使用 OpenSSL 来保护数据传输。

我打算只让客户端验证服务器的证书。我对如何保护服务器证书感到困惑。我想加密包含私钥的服务器证书，但我不想为此加密使用任何硬编码密钥。

使用 SSL 的应用程序遵循哪些常见做法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-03T02:03:15.730

只是为了确保我们的术语是直截了当的，通常用语中的“SSL 证书”实际上由两个组件组成：

*   公开证书
*   一个私钥

公共证书组件由您选择的 CA（证书颁发机构）签名，之后可以自由分发。它不需要被保护或加密，实际上它将作为 SSL 协商的一部分发送到连接到您的服务器的客户端。

私钥组件应该受到保护。在大多数情况下，这只是作为加密文件存储在服务器上。高档解决方案使用专用的“防篡改”加密硬件（HSM——硬件安全模块）来存储私钥。这些范围从基于智能卡的解决方案到具有 m/n 控件等的多密钥、网络支持设备等。与 HSM 相关的风险（更不用说成本）我不会在这里讨论。

许多应用程序只是将私钥保留在磁盘上。有几个选项可以保护密钥文件：

*   依赖系统和文件权限安全（即不加密私钥）。例如，大多数 ssh 守护进程都会这样做。
*   使用您的服务器提供的任何机制来加密文件 - 受密码保护的加密是大多数 Web 服务器的标准功能。（如果您使用 OpenSSL API 自行开发，请选择一种明显的本机密钥格式​​）。

与往常一样，存在安全权衡。特别是，如果您在私钥文件上使用受密码保护的加密，并且遇到应用程序意外重启（例如断电），则需要有人在应用程序重启时提供密码。将密码存储在由系统初始化脚本读取的文件中（至少有两家 Web 服务器供应商鼓励）在真正的安全性方面几乎没有增加。很难建议不加密私钥文件，但如果您是一家小商店的唯一管理员/技术人员，您绝对应该考虑如果服务器在您不可用时重新启动可能会发生什么，以及您的业务可能会产生什么成本.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T01:57:12.810

不太确定你想问什么。服务器证书发送给您，即客户端；您通过检查其签名来验证证书（使用 SHA-1 而不是 MD5，MD5 已被破解。）您从 CA 获得的密钥是公共方面；CA 和服务器证书持有者将他们的私钥保留给自己。您可以验证证书，因为公钥足以*解密*已使用私钥*加密的消息。*因此，在 cient 方面，您不必担心完全加密证书。

查看[有关 SSL/TLS 的 Wikipedia 文章](http://en.wikipedia.org/wiki/Transport_Layer_Security#TLS_handshake_in_detail)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T03:56:23.447

> 我对如何保护服务器证书感到困惑。

您不必保护服务器的证书。这是公开文件

> 我想加密包含私钥的服务器证书

服务器的证书不包含私钥。

> 但我不想为此加密使用任何硬编码密钥。

您无需进行任何加密。您需要保护的唯一服务器资产是它的私钥，它与它的证书完全不同。对于 OpenSSL，它甚至可以是不同的文件。

# linux - What is the best folder distribution on Linux for user private folders?

> ID：408437
> 
> 赞同：2
> 
> 时间：2009-01-03T01:18:48.287
> 
> 标签：linux, apache, directory

In our site, users can have many private files. We are thinking what could be the best distribution so as to avoid destroying the server's performance, These files are served through Apache and should be listed each time the user needs to manage them.

Our first approach right now is:

```
var first_level = (int) $user_id/100;
var files_folder = /uf/$first_level/$user_id 
```

This gives us a first level of 100 folders and many second level folders. Since not all users have files and right now we are at about ~80k users, this means about 800 folders per *second level folder*.

What do you think about this approach?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-03T02:03:50.723

If your user ID values are fairly uniformly distributed and the number will continue to increase, then you should probably balance up the tree a bit more. What's best depends in part on where you think you'll end up in terms of numbers. Big directories are slower to search than small ones. While 800 files is not awful, it isn't great either. If you want to stick with 2 tiers and you have *N* users (as your target population), then you should aim for *sqrt(N)* folders in the first tier, with *sqrt(N)* folders in each second tier directory. For *N* = 80,000, that means about 300 folders per level. If you want to consider a 3 tier arrangement, replace the square root with the cube root. You might also find that using modulo arithmetic gives you a smoother distribution. That is, the first level might be better calculated as:

```
var first_level = (int) ($user_id % 300); 
```

Assuming your unidentified language uses % for its modulo operator.

CPAN uses a system based on 3 tiers: first tier is the first letter of the user's login ID; the second tier is the first two letters, and the third tier is the full login ID.

I read somewhere that some site (university-based, IIRC) found that first and last letter of name gave a good system.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T02:12:49.940

A popular scalable folder naming scheme if you don't care about readability is something like that squid uses: `<4-bit>/<8-bit>/<remaining-116-bit-of-md5-of-whatever-lookup-key>` or `<whatever-unique-key-you-have>`, so for user-id 1 the folder path can be /c4/ca42/1.

In this case, the first level is up to 16 directory and second level is up to 256 directories.

The big advantage of this approach is that the distribution of the folders are statistically uniform, regardless whether you have holes or clusters in your userids/usernames (smaller user ids tend to get unused due to attrition.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T02:39:26.063

您没有说使用什么文件系统来存储文件。您应该很容易创建具有您期望的实际负载特征的随机目录树。然后，您可以**进行实验**，告诉您正在考虑的各种策略的性能。

我无法轻松找到有关哪些文件系统使用高效数据结构（如大型目录的 B 树）的信息。我确实找到了 MacOS HFS 的说法。我会研究 XFS 或其他高性能的日志文件系统。

# google-maps - Google Maps API - 使用 getLatLng 方法的 GClientGeocoder 不一致？

> ID：408444
> 
> 赞同：0
> 
> 时间：2009-01-03T01:24:35.433
> 
> 标签：google-maps

我注意到我的地理编码器在下面显示的代码中不一致，因为在调用“getLatLng”方法之前我显示了 10 个有效位置，但是在这行代码之后，每次搜索时实际显示的点数都不同（相同搜索条件 - 仅供参考）随机在 5 到 10 之间.. 很奇怪

有人有类似的问题吗？如果是这样，你是如何解决它们的？

```
geocoder = new GClientGeocoder();
geocoder.getLatLng(address, function(point) {
if (point) {
        var icon = new GIcon();
        var marker = new GMarker(point, { icon: icon });
        GEvent.addListener(marker, 'click', function() { marker.openInfoWindowHtml(html); });
        map.addOverlay(marker); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-03T01:49:49.940

我在我的 ASP.NET 应用程序中看到了这一点。我的问题是我在显示地址之前验证了地址

1.  我的一些地址不正确。

2.  他们的地址验证系统只能在客户每次呼叫时处理一定数量的请求。

最好在地理编码（IMO）之前清理地址。

尝试验证您的地址，并尝试限制您发送的地址数量，以测试每个请求是否连续。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-06T13:33:47.850

像这样试一试，像这样我一次跑就超过 34 分：

```
function addAddress(address,runde) {
  geocoder.getLatLng(
    address,
    function(point) {
      if (!point) {
        //alert(address + " not found");
        if (runde<5) { // rekursiv, try adress 5 times to get
            window.setTimeout(function() {addAddress(address,runde+1);}, 1000); // wait 1 second bevor next try
            }
      } else {
        var marker_add = new GMarker(point);
        //alert(marker.getLatLng());
        leftClick(0, marker_add.getLatLng()); // function, add marker to map
      }
    }
  );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-01-24T15:38:09.117

我不确定它的`addPreCount()`作用。但我认为很明显超时应该是指数乘以实际超时常数。

因此，假设定义的超时常量为 225。要传递给地理编码器包装器的超时将是：

```
var timeout = [index_of_each_xaddr] * 225;
window.setTimeout(function() { geoCodeLookup(_xaddr, _xid, _xindex, _xhtml, _xstatus); }, timeout); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T18:18:29.293

我实际上发现导致这种不一致的不是“验证地址”代码，而是 - 只是地图 api 不想要大量地理编码器调用的事实，所以我在每个请求之间添加了一个简单的 225 毫秒超时和这成功了

```
function preGeoCodeLookup(_xaddr, _xid, _xindex, _xhtml, _xstatus) {
        addPreCount();

        //don't change this timeout as it was the lowest timeout that still worked w/ the api
        var timeout = parseInt(precount) * 225;

        window.setTimeout(function() { geoCodeLookup(_xaddr, _xid, _xindex, _xhtml, _xstatus); }, timeout);
    } 
```

# c# - 为什么 Enumerable.Range 比直接 yield 循环快？

> ID：408452
> 
> 赞同：11
> 
> 时间：2009-01-03T01:41:32.640
> 
> 标签：c#, performance, ienumerable, range, enumerable

下面的代码正在检查执行相同解决方案的三种不同方法的性能。

```
 public static void Main(string[] args)
    {
        // for loop
        {
            Stopwatch sw = Stopwatch.StartNew();

            int accumulator = 0;
            for (int i = 1; i <= 100000000; ++i)
            {
                accumulator += i;
            }

            sw.Stop();

            Console.WriteLine("time = {0}; result = {1}", sw.ElapsedMilliseconds, accumulator);
        }

        //Enumerable.Range
        {
            Stopwatch sw = Stopwatch.StartNew();

            var ret = Enumerable.Range(1, 100000000).Aggregate(0, (accumulator, n) => accumulator + n);

            sw.Stop();
            Console.WriteLine("time = {0}; result = {1}", sw.ElapsedMilliseconds, ret);
        }

        //self-made IEnumerable<int>
        {
            Stopwatch sw = Stopwatch.StartNew();

            var ret = GetIntRange(1, 100000000).Aggregate(0, (accumulator, n) => accumulator + n);

            sw.Stop();
            Console.WriteLine("time = {0}; result = {1}", sw.ElapsedMilliseconds, ret);
        }
    }

    private static IEnumerable<int> GetIntRange(int start, int count)
    {
        int end = start + count;

        for (int i = start; i < end; ++i)
        {
            yield return i;
        }
    }
} 
```

结果是：

```
time = 306; result = 987459712
time = 1301; result = 987459712
time = 2860; result = 987459712 
```

“for 循环”比其他两个解决方案更快并不奇怪，因为 Enumerable.Aggregate 需要更多的方法调用。然而，让我感到惊讶的是，“Enumerable.Range”比“自制的 IEnumerable”要快。我认为 Enumerable.Range 会比简单的 GetIntRange 方法有更多的开销。

可能的原因是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-03T02:19:35.527

为什么`Enumerable.Range`要比你自制的慢`GetIntRange`？事实上，如果`Enumerable.Range`被定义为

```
public static class Enumerable {
    public static IEnumerable<int> Range(int start, int count) {
        var end = start + count;
        for(var current = start; current < end; ++current) {
            yield return current;
        }
    }
} 
```

那么它应该和你自制的一样快`GetIntRange`。这实际上是 的参考实现`Enumerable.Range`，没有编译器或程序员的任何技巧。

您可能希望将您的`GetIntRange`和`System.Linq.Enumerable.Range`与以下实现进行比较（当然，正如 Rob 指出的那样，在发布模式下编译）。对于编译器从迭代器块生成的内容，此实现可能会稍微优化。

```
public static class Enumerable {
    public static IEnumerable<int> Range(int start, int count) {
        return new RangeEnumerable(start, count);
    }
    private class RangeEnumerable : IEnumerable<int> {
        private int _Start;
        private int _Count;
        public RangeEnumerable(int start, int count) {
            _Start = start;
            _Count = count;
        }
        public virtual IEnumerator<int> GetEnumerator() {
            return new RangeEnumerator(_Start, _Count);
        }
        IEnumerator IEnumerable.GetEnumerator() {
            return GetEnumerator();
        }
    }
    private class RangeEnumerator : IEnumerator<int> {
        private int _Current;
        private int _End;
        public RangeEnumerator(int start, int count) {
            _Current = start - 1;
            _End = start + count;
        }
        public virtual void Dispose() {
            _Current = _End;
        }
        public virtual void Reset() {
            throw new NotImplementedException();
        }
        public virtual bool MoveNext() {
            ++_Current;
            return _Current < _End;
        }
        public virtual int Current { get { return _Current; } }
        object IEnumerator.Current { get { return Current; } }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-03T08:47:44.480

我的猜测是您正在调试器中运行。这是我的结果，使用“/o+ /debug-”从命令行构建

```
time = 142; result = 987459712
time = 1590; result = 987459712
time = 1792; result = 987459712 
```

还是有细微的差别，但不是很明显。迭代器块的实现不如量身定制的解决方案那么有效，但它们非常好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-03T02:16:35.673

假设这是一个正在运行的发布版本，否则所有比较都将关闭，因为 JIT 将无法正常工作。

您可以查看带有[反射器](http://www.red-gate.com/products/reflector/)的组件，并查看“产量”声明也正在扩展。编译器将创建一个类来封装迭代器。也许在生成的代码中进行的内务处理比 Enumerable.Range 的实现要多，这可能是手工编码的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-05-28T22:48:04.937

反射器输出的细微差别（以及参数检查和额外的内部化水平在这里绝对不相关）。基本代码更像是：

```
public static IEnumerable<int> Range(int start, int count) {
    for(int current = 0; current < count; ++current) {
        yield return start + current;
    }
} 
```

也就是说，它们不是另一个局部变量，而是为每个产量应用一个额外的加法。

我试图对此进行基准测试，但我无法停止足够多的外部流程来获得可以理解的结果。我还尝试了每个测试两次以忽略 JIT 编译器的影响，但即使这样也有“有趣”的结果。

这是我的结果示例：

```
运行 0：
时间 = 4149; 结果 = 405000000450000000
时间 = 25645; 结果 = 405000000450000000
时间 = 39229; 结果 = 405000000450000000
时间 = 29872; 结果 = 405000000450000000

时间 = 4277; 结果 = 405000000450000000
时间 = 26878; 结果 = 405000000450000000
时间 = 26333; 结果 = 405000000450000000
时间 = 26684; 结果 = 405000000450000000

运行 1：
时间 = 4063; 结果 = 405000000450000000
时间 = 22714; 结果 = 405000000450000000
时间 = 34744; 结果 = 405000000450000000
时间 = 26954; 结果 = 405000000450000000

时间 = 4033; 结果 = 405000000450000000
时间 = 26657; 结果 = 405000000450000000
时间 = 25855；结果 = 405000000450000000
时间 = 25031; 结果 = 405000000450000000

运行 2：
时间 = 4021; 结果 = 405000000450000000
时间 = 21815; 结果 = 405000000450000000
时间 = 34304; 结果 = 405000000450000000
时间 = 32040; 结果 = 405000000450000000

时间 = 3993; 结果 = 405000000450000000
时间 = 24779; 结果 = 405000000450000000
时间 = 29275; 结果 = 405000000450000000
时间 = 32254; 结果 = 405000000450000000

```

和代码

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Diagnostics;

namespace RangeTests
{
  class TestRange
  {
    public static void Main(string[] args)
    {
      for(int l = 1; l <= 2; ++l)
      {
        const int N = 900000000;
        System.GC.Collect(2);
        // for loop
        {
            Stopwatch sw = Stopwatch.StartNew();

            long accumulator = 0;
            for (int i = 1; i <= N; ++i)
            {
                accumulator += i;
            }

            sw.Stop();

            Console.WriteLine("time = {0}; result = {1}", sw.ElapsedMilliseconds, accumulator);
        }
        System.GC.Collect(2);

        //Enumerable.Range
        {
            Stopwatch sw = Stopwatch.StartNew();

            var ret = Enumerable.Range(1, N).Aggregate(0, (long accumulator,int n) => accumulator + n);

            sw.Stop();
            Console.WriteLine("time = {0}; result = {1}", sw.ElapsedMilliseconds, ret);
        }
        System.GC.Collect(2);

        //self-made IEnumerable<int>
        {
            Stopwatch sw = Stopwatch.StartNew();

            var ret = GetIntRange(1, N).Aggregate(0, (long accumulator,int n) => accumulator + n);

            sw.Stop();
            Console.WriteLine("time = {0}; result = {1}", sw.ElapsedMilliseconds, ret);
        }
        System.GC.Collect(2);

        //self-made adjusted IEnumerable<int>
        {
            Stopwatch sw = Stopwatch.StartNew();

            var ret = GetRange(1, N).Aggregate(0, (long accumulator,int n) => accumulator + n);

            sw.Stop();
            Console.WriteLine("time = {0}; result = {1}", sw.ElapsedMilliseconds, ret);
        }
        System.GC.Collect(2);
        Console.WriteLine();
    } }

    private static IEnumerable<int> GetIntRange(int start, int count)
    {
        int end = start + count;

        for (int i = start; i < end; ++i)
        {
            yield return i;
        }
    }

    private static IEnumerable<int> GetRange(int start, int count)
    {
        for (int i = 0; i < count; ++i)
        {
            yield return start + i;
        }
    }
} } 
```

编译

```
csc.exe -optimize+ -debug- RangeTests.cs 
```

# ms-access - MS Access 链接表权限

> ID：408455
> 
> 赞同：1
> 
> 时间：2009-01-03T01:47:04.047
> 
> 标签：ms-access, permissions

有谁知道在 ms access 2003 中刷新或连接到链接表需要哪些权限？

我基本上有两个用户级安全组设置；1 个管理员和 1 个用户级别。管理员拥有完全权限，刷新链接表没有问题。用户组具有数据的读取/更新/删除权限以及宏的表单和报告的打开/运行权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T01:53:36.703

抱歉，我应该先阅读 MS Access 帮助文件；）

一般来说，如果您希望用户能够访问链接表（链接表：存储在开放数据库之外的文件中的表，Access 可以从中访问记录。您可以在链接表中添加、删除和编辑记录，但是你不能改变它的结构。），授予他们对后端数据库中表的Read Data和Read Design权限，以及对前端数据库中定义的表链接的修改设计权限，以便他们可以方便地重新链接桌子。如果您想限制对后端表的所有访问但仍允许用户查看数据并重新链接表，请删除后端表的所有权限并使用前端数据库中的查询及其 RunPermissions 属性设置为所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-02-08T12:37:04.493

如果您想通过 VBA 刷新或连接访问链接表，可以从 -> [Access Linked Table VBA add-in下载一个 VBA 插件](http://www.access-linked-table.com/ "访问链接表")

这使您或您的用户可以在您需要时链接到多个数据库，并在必要时链接到多个数据库

# performance - 具有空值的 JPA/Hibernate 查询优化

> ID：408456
> 
> 赞同：3
> 
> 时间：2009-01-03T01:48:28.710
> 
> 标签：performance, hibernate, jpa, jakarta-ee, hql

我正在使用 Hibernate 的 JPA 实现，并且看到性能很差，因为为每个获取的实体发出了多个 SQL 查询。如果我使用连接的 JPA 查询，它只会生成一个 SQL 查询，但找不到行将为空关系。

例如，考虑这个简单的模式。一个人住在一个​​地址并受雇于一家公司。地址和雇主都是可选的，因此可以为空。

```
@Entity
public  class Person {
    public name;

    @ManyToOne
    @Column(nullable=true)
    public Address address

    @ManyToOne
    @Column(nullable=true)
    public Company employer
}

@Entity
public  class Address {
    address attributes ...
}

@Entity
public  class Company {
    company attributes ...
} 
```

上面没有显示的是每个 JPA 实体都有某种 ID（键）：

```
@Id
public Integer id; 
```

我看到的问题是对 Person 的单个 JPA 查询会导致对数据库的多个 SQL 查询。例如，以下 JPA 查询：

```
select p from Person p where ... 
```

导致 SQL 查询：

```
select ... from Person where ... 
```

以及**每个**检索到的人的以下一对 SQL 查询：

```
select ... from Address a where a.id=xxx
select ... from Company c where c.id=yyy 
```

这对性能有很大的影响。如果查询结果集为 1000 人，则生成 1+1000+1000=2001 条 SQL 查询。

所以我尝试通过强制加入来优化 JPA 查询：

```
select p from Person p join p.address a join p.employer e where ... 
```

或者：

```
select p, a, e from Person p join p.address a join p.employer e where ... 
```

这会导致一个带有一堆连接的 SQL 查询。问题是如果地址或雇主为空，则连接查询将找不到它。

所以我要么使用慢的无连接查询，要么使用不检索行的快速连接查询将使关系为空。我一定在这里遗漏了一些东西。肯定有一种快速和完整查询的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T02:44:54.320

我的猜测是你需要一个左连接，即

```
SELECT p FROM Person p LEFT JOIN p.address a LEFT JOIN p.employer e WHERE... 
```

[有关示例，](http://depressedprogrammer.wordpress.com/2007/11/20/performing-a-left-outer-join-using-jpql-and-jpa/)请参阅此博客条目

请注意，我实际上并没有在 JPA 中尝试过，但它在 HQL 中运行良好，这在许多方面都是 JPA 标准的基础。

它不能使用普通连接的原因是默认是内部连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-04T09:58:38.313

尝试在 Address 和 Company 实体上设置批处理大小 (@BatchSize)。它不会在连接中加载它们（这就是你所追求的吗？），但每次加载时它都会加载一堆。批量大小表示当它发现需要一个时应该加载多少。

如果您的批量大小为 1（默认值），并加载 10 个人。然后遍历他们，读取他们的地址和公司项目，然后 hibernate 将为这 10 个人进行一次查询，然后每次需要其中一个人的地址或公司时，它都会查询该人的地址。

如果您在 Address 实体上设置了 7 的批量大小，那么当您读取第一个地址时，它会看到当前代理的地址超过 7 个，并且会去获取其中的 7 个地址。

如果您的 Address 和 Company 的 BatchSize 为 7，并且您正在迭代 10 个人，那么这将导致 5 个查询，而不是目前的 21 yo。仍然不是一个连接将给你的 1。但是，在您只想要 Person 对象并且不会触及嵌入其中的 Address/Company 实体的情况下（例如，您只想获取人员 id 的列表，或计算有多少是男/女）

看看： [http ://hibernate.org/hib_docs/v3/reference/en/html/performance.html](http://hibernate.org/hib_docs/v3/reference/en/html/performance.html)

# math - Outline of cubic bezier curve stroke

> ID：408457
> 
> 赞同：16
> 
> 时间：2009-01-03T01:48:40.737
> 
> 标签：math, bezier

By stroke of the cubic bezier curve I mean rendering a curve 'A' with a specific line width 'w'.

How can I derive other cubic bezier curves that describe the outline of the stroke of bezier 'A' ?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-03T02:18:19.960

Ohhh. You want to get the offset-curves of an bezier curve.

Bad news. this is hard because these curves can't be simply derived numerical. They contain all kinds of intersections, loops and other nasty stuff.

There are some approximations though. The best approach I've read so far is from a paper by Thomas F. Hain ([Fast, Precise Flattening of Cubic Bézier Path and Offset Curves](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.106.5344&rep=rep1&type=pdf)).

He does flattening, so his paper is mostly about decomposes the offset curves into line-segments and circular arc-segments, but you can merge them back to beziers later.

For better understanding you may want to read his other bezier related papers as well.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-06-01T15:33:37.490

Qt 的 QPainterPathStroker（它是开源且可读性强的代码）使用上述论文中描述的算法来做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-20T20:11:58.473

要准确地做到正如其他人所解释的那样非常困难。偏移曲线不是三次贝塞尔曲线，非常难以处理。然后，比偏移更深的凹面会导致相交问题。

好消息是，通常您要计算笔画偏移以进行渲染，因此只需要像素精度。此外，如果您遵守多边形填充的缠绕规则，则各种交叉点仍会创建填充多边形。所以你先把曲线弄平，然后以线性方式偏移，它就变成了一个直线多边形问题。

这里的一些代码可以作为参考实现： [https ://github.com/memononen/nanosvg](https://github.com/memononen/nanosvg)

# mysql - 向 MySQL 表添加索引

> ID：408467
> 
> 赞同：1
> 
> 时间：2009-01-03T02:00:19.200
> 
> 标签：mysql, indexing

MySQL 文档对此不是很清楚。我想为现有表添加索引。该表是具有登录 ID 和密码的用户表，我想为此创建一个索引以优化登录。

这就是我想我会尝试的方式：

```
mysql> ALTER TABLE `users` ADD INDEX(`name`,`password`); 
```

这创造了：

```
mysql> show index from karmerd.users;
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+   
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |    
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+    
| users |          0 | PRIMARY  |            1 | id          | A         |           2 |     NULL | NULL   |      | BTREE      |         |     
| users |          1 | name     |            1 | name        | A         |           2 |     NULL | NULL   |      | BTREE      |         |     
| users |          1 | name     |            2 | password    | A         |           2 |     NULL | NULL   | YES  | BTREE      |         |     
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

这是否实现了我想要做的事情？（优化登录？）以前我只有一个名为“id”的字段的主键。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-03T02:09:02.070

是的，这实现了创建索引。索引被命名为“ `name`”（如果您不给索引命名，它会尝试使用您在索引中指定的第一列）。索引是两列的组合： `name`位置 1 和`password`位置 2。

至于这是否会优化日志记录，这取决于您的查询可能会或可能不会使用索引。您还应该了解如何使用[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.1/en/explain.html).

* * *

您还应该阅读有关存储密码的更多信息。

这是一个关于这个主题的好博客：“[你可能错误地存储了密码](http://www.codinghorror.com/blog/archives/000953.html)”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T15:29:21.407

除非用户名在您的应用程序中不是唯一的，否则我认为索引“密码”是没有意义的；索引会更大，插入会更慢，因为没有附加值。

# awk - 保持原始格式 POST 通过 AWK

> ID：408469
> 
> 赞同：3
> 
> 时间：2009-01-03T02:00:48.530
> 
> 标签：awk, whitespace, field

我在使用 AWK 从流中简单地删除字段时遇到问题，如下所示：

```
 1 int blah (void)
  2 {
  3         if (foo) {
  4                 printf ("blah\n");
  5         }       
  6         return 0;
  7 } 
```

我使用以下代码删除第一个字段：

$ awk '{ $1=""; 打印}'example.out

```
 int blah (void)
 {
 if (foo) {
 printf ("blah\n");
 }
 return 0;
 } 
```

为什么会这样？这是因为 AWK 删除了所有空格 - 这可以防止吗？

提前致以亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T02:06:02.887

[http://awk.freeshell.org/RangeOfFields](http://awk.freeshell.org/RangeOfFields)

包含如何操作的描述。它还链接到[http://student.northpark.edu/pemente/awk/awktail.txt](http://student.northpark.edu/pemente/awk/awktail.txt)，其中包含问题的 3 个解决方案。据我所知，如果您分配给一个字段，则输出字段分隔符用于将所有字段连接在一起。就这么`" "+`一下子崩塌成一个空间。不过，我不是 awk 专家。例如，尝试分配`:`给变量`OFS`，冒号而不是空格将导致输出中的字段之间：

```
echo a b c | awk 'BEGIN{ OFS = ":" } { $1=""; print }'
$ :b:c 
```

如果您使用**g** awk，那么您可以使用它的`gensub`扩展名，我觉得使用起来非常简单：

```
print gensub($1 "[\t ]*(.*)", "\\1", 1); 
```

# .net - Microsoft 异常处理块 - 这不是过度工程的完美示例吗？

> ID：408480
> 
> 赞同：19
> 
> 时间：2009-01-03T02:11:36.463
> 
> 标签：.net, exception-handling, enterprise-library, application-blocks

自从 Microsoft 推出应用程序块以来，我一直在遇到使用[异常处理应用程序块](http://msdn.microsoft.com/en-us/library/dd203116.aspx)的人。我最近仔细观察了自己，并将基本功能总结如下（如果您已经知道它的作用，请跳过以下块）：

> 异常处理应用程序块旨在集中并使用配置文件完全可配置以下[关键异常处理任务](http://msdn.microsoft.com/en-us/library/dd203198.aspx)：
> 
> *   记录异常
> *   替换异常
> *   包装异常
> *   传播异常
> *   等等
> 
> 该库通过让您修改 try catch 块来做到这一点，如下所示：
> 
> ```
> try
> {
>   // Run code.
> }
> catch(DataAccessException ex)
> {
>     bool rethrow = ExceptionPolicy.HandleException(ex, "Data Access Policy");
>     if (rethrow)
>     {
>         throw;
>     }
> } 
> ```
> 
> 根据 app.config 中为策略名称指定的内容（[请参阅此处的文档](http://msdn.microsoft.com/en-us/library/dd139868.aspx)），HandleException 将...
> 
> *   抛出一个全新的异常（替换原来的异常）
> *   将原始异常包装在一个新异常中并抛出该异常
> *   吞下异常（即什么都不做）
> *   你有没有重新抛出原来的异常
> 
> 此外，您还可以预先对其进行配置以执行更多操作（例如记录异常）。

现在这是我的问题：我完全看不出无论是替换、包装、吞下还是重新抛出异常，使其可配置有什么好处。根据我的经验，这个决定必须在您编写代码时做出，因为当您更改异常处理行为时，您通常必须更改周围或调用代码。

例如，当您重新配置时，您的代码可能会开始出现不正确的行为，使得在特定点抛出的特定异常现在被吞没而不是重新抛出（catch 块之后可能有代码在发生异常时不得执行）。异常处理中所有其他可能的更改也是如此（例如，替换 -> 重新抛出，吞下 -> 包装）。

所以，对我来说，最重要的是异常处理块解决了实际上不存在的问题。异常记录和通知位很好，但不是所有其他的东西只是过度工程的完美例子吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-03T02:32:25.377

如果您将异常用于控制流，那么您将希望远离基于策略的异常处理。

但是对于您希望将其视为不可恢复的异常（后台任务失败、套接字断开连接、文件已删除等），您可能希望进行可配置的、基于策略的异常处理。

例如，如果您正在开发 API，您可能希望 API 中的每个函数只抛出标准异常（`ArgumentException`等），以及在内部非标准异常的情况下，您自己的库特定异常（例如一个`MyLibraryException`）。在这种情况下，重要的是某些东西不能正常工作。您没有挑选异常并找出问题所在。你只是承认*有些*事情出了问题，你现在应该做*一些*事情。

*有些*东西应该是可配置的，因为你做什么并不重要。向用户显示消息框？模态还是非模态？记录异常？你想如何记录异常？调用日志记录 Web 服务？追加到日志文件？写入 Windows 事件日志？在数据库中插入一个条目？在两个数据库中插入一个条目？这对您的应用程序的其余部分并不重要。如何处理异常的选择与应用程序的其余部分完全正交。

（顺便说一句，这不是我处理可配置的基于策略的异常处理的方式。我更倾向于 AOP 风格，例如在容器中注册异常记录器拦截器。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-03T03:24:18.097

我在开发没有可恢复状态的函数时遇到了这个问题。我相信这种策略驱动的异常处理实际上是有用的，并确保作为该项目一部分的所有其他开发人员实际上都遵守不可恢复异常的标准。

我同意上面的海报，如果您将它们用于控制流，您可能希望远离基于策略的异常。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-01-21T08:36:02.650

我不得不同意“异常处理块解决了实际上不存在的问题”的说法。自从它发布以来，我一直在使用它，我很少觉得我实际上通过使用它获得了很多。好吧，也许有点头疼。:)

在开始之前，我承认我确实喜欢[WCF 服务边界处的异常屏蔽](http://msdn.microsoft.com/en-us/library/cc309233.aspx)功能。然而，这是最近才添加的，不涉及编码——只涉及属性和配置，而不是通常出售块的方式。这是微软在[http://msdn.microsoft.com/en-us/library/cc309250.aspx上展示的方式](http://msdn.microsoft.com/en-us/library/cc309250.aspx)

[![替代文字](https://i.stack.imgur.com/Ldh2E.gif)](https://i.stack.imgur.com/Ldh2E.gif)

在我看来，以上是流量控制。

```
try
{
  // Run code.
}
catch(DataAccessException ex)
{
    bool rethrow = ExceptionPolicy.HandleException(ex, "Data Access Policy");
    if (rethrow)
    {
        throw;
    }
} 
```

当您将流控制方面与上面的代码结合起来时，您肯定不会[让错误的代码看起来不正确](http://www.joelonsoftware.com/articles/Wrong.html)。（不要介意 if (rethrow) 构造并没有提供太多抽象。）对于不熟悉策略定义的开发人员来说，这会使维护变得更加困难。如果`postHandlingAction`配置文件中的 更改（它可能会在某个时候发生），您可能会发现应用程序以从未测试过的意想不到的方式运行。

如果该块不处理流控制，而只是允许您将处理程序链接在一起，也许我不会觉得它令人反感。

但也许不是。我实际上不记得曾经被要求：

*   在处理异常时添加一项新功能（例如，除了记录到事件日志之外，还可以发送电子邮件。实际上，如果您自己已经记录了异常，则记录块可以自行完成。:)）
*   在整个“策略”中更改异常处理行为（吞下、重新抛出或抛出新的）。

我并不是说它不会发生（我敢肯定有人有故事！）；我只是觉得异常处理应用程序块使程序更难理解和维护，这通常超过了块提供的功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-03T03:38:07.273

我认为这根本不是过度工程。实际上。异常可以通过中央处理程序这一事实在我的工作中是一件好事。我有开发人员会吃掉每一个异常 - 处理或不处理，这样它就不会冒泡到顶部并在最终用户面前提出一些令人担忧的事情，或者在未被捕获时严重搞砸服务/守护进程。

现在有了这个策略，我们可以随时开始记录，而无需重新启动或在整个应用程序中不必要地添加记录逻辑。现在我们可以在不让应用离线的情况下查看异常等。

如果你问我，智能编程......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-03T02:16:42.537

很简单：如果您希望发布代码中的异常处理与调试代码中的不同，那么它会很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-03T03:04:33.643

在我看来，使用异常处理块的一个真正价值始于你的 catch 块中的一行代码：

bool rethrow = ExceptionPolicy.HandleException（例如，“数据访问策略”）；

一行代码——你能做到多简单？在一行代码的背后，策略，因为它的配置，使得对策略的分配/更新很容易执行，所有这些都不需要重新编译源代码。

如前所述，异常策略实际上可以执行许多操作——无论您的策略中定义了什么。隐藏在 catch 块中显示的一行代码背后的复杂性是我看到真正价值的地方。

我会说复杂，但不是过度设计。所以我的想法是，当您需要通过灵活地轻松更改配置来改变处理/记录异常的方式时，在维护期间将会看到巨大的红利，并且仍然拥有相同的一行源代码。

# .net - 正则表达式捕获输入块中间的可选组

> ID：408482
> 
> 赞同：1
> 
> 时间：2009-01-03T02:13:26.927
> 
> 标签：.net, regex

我被困在一个看似非常简单的 RegEx 问题上，但我无法让它工作。

假设我有这样的输入：

```
Some text %interestingbit% lots of random text lots and lots more %anotherinterestingbit%
Some text %interestingbit% lots of random text OPTIONAL_THING lots and lots more %anotherinterestingbit%
Some text %interestingbit% lots of random text lots and lots more %anotherinterestingbit% 
```

输入中有许多重复的块，在每个块中我想捕捉一些总是存在的东西（%interestingbit% 和 %anotherinterestingbit%），但也有一些文本可能会或可能不会出现在它们之间（OPTIONAL_THING），如果它在那里，我想捕捉它。

像这样的 RegEx 仅匹配其中包含 OPTIONAL_THING 的块（并且命名的捕获有效）：

```
%interestingbit%.+?((?<OptionalCapture>OPTIONAL_THING)).+?%anotherinterestingbit% 
```

所以看起来这只是让整个团队可选的问题，对吧？这就是我尝试过的：

```
%interestingbit%.+?((?<OptionalCapture>OPTIONAL_THING))?.+?%anotherinterestingbit% 
```

但我发现虽然这匹配所有 3 个块，但命名捕获（OptionalCapture）在所有块中都是空的！我怎样才能让它工作？

请注意，每个块中可能有很多文本，包括换行符，这就是我输入“.+？”的原因。而不是更具体的东西。我正在使用 .NET 正则表达式，使用 The Regulator 进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T21:28:29.217

我的想法与 Niko 的想法相似。但是，我建议放置第二个 .+? 在可选组而不是第一个组内，如下所示：

```
%interestingbit%.+?(?:(?<optionalCapture>OPTIONAL_THING).+?)?%anotherinterestingbit% 
```

这避免了不必要的回溯。如果第一个 .+? 位于可选组内并且 OPTIONAL_THING 在搜索字符串中不存在，正则表达式在到达字符串末尾之前不会知道这一点。然后它需要回溯，也许相当多，以匹配%anotherinterestingbit%，正如你所说的那样，它将永远存在。

此外，由于 OPTIONAL_THING 存在时，它总是在 %anotherinterestingbit% 之前，因此它之后的文本实际上也是可选的，并且更自然地适合可选组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T02:55:21.507

为什么你有额外的括号？

试试这个：

```
%interestingbit%.+?(?<OptionalCapture>OPTIONAL_THING)?.+?%anotherinterestingbit% 
```

或者也许这会起作用：

```
%interestingbit%.+?(?<OptionalCapture>OPTIONAL_THING|).+?%anotherinterestingbit% 
```

在此示例中，该组捕获 OPTIONAL_THING，或者什么都不捕获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T12:02:33.463

试试这个：

```
%interestingbit%(?:(.+)(?<optionalCapture>OPTIONAL_THING))?(.+?)%anotherinterestingbit% 
```

`.+OPTIONAL_THING`首先有一个匹配或不匹配的非捕获组。如果找到匹配项，则里面有一个命名组，它会`OPTIONAL_THING`为您捕获。其余的被捕获`.+?%anotherinterestingbit%`。

[编辑]：我为其他捕获组添加了几个括号，因此现在捕获的组与以下内容匹配：

*   $1 : OPTIONAL_THING 之前的文本或什么都没有
*   $2 或 $optionalCapture : OPTIONAL_THING 或什么都没有
*   $3 : OPTIONAL_THING 之后的文本，或者如果没有找到 OPTIONAL_THING，则为 %interestingbit% 和 %anotherinterestingbit% 之间的全文

这是你要找的三场比赛吗？

# mysql - 有人知道一个像样的免费数据库模式逆向工程工具吗？

> ID：408489
> 
> 赞同：7
> 
> 时间：2009-01-03T02:17:43.877
> 
> 标签：mysql, database, schema, reverse-engineering

寻找一种工具，可以自动从实时数据库创建 MySQL DB 模式的图形表示，显示表、列和关系（ER 图）。理想情况下，可以在 OS X 上运行的东西会很棒，但如果有必要，我会尽我所能在另一台机器上运行它。

我检查了谷歌和 del.icio.us。似乎大多数这样做的产品都是商业的。我猜他们的开发成本很高？

MySQL 有[Workbench](http://dev.mysql.com/workbench/)，但它需要额外的逆向工程功能。

这个开源工具[SchemaSpy](http://schemaspy.sourceforge.net/)看起来很有前途，但安装和使用可能有点尴尬。在我深入研究之前，我想我会检查是否有人知道更“即时满足”的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-03T02:21:33.557

看看[松鼠](http://squirrel-sql.sourceforge.net/)。

您需要右键单击表格并选择“添加到图表”选项。然后它将打开一个新选项卡。切换到该选项卡后，您将看到以框表示的表格。只需右键单击该框并选择“添加所有子项”和“添加所有父项”。它将包括完整的层次结构、实体和关系。所以，你可以说它会生成一个 ERD。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T09:06:32.673

如果您有 Microsoft Visio Professional，则可以使用内置功能对现有数据库进行逆向工程。您需要使用 Visio 提供的相应驱动程序。它还允许您在反向工程数据库模型中选择所需的表。

请检查 [http://office.microsoft.com/en-us/visio-help/reverse-engineer-an-existing-database-into-a-database-model-HA010115485.aspx](http://office.microsoft.com/en-us/visio-help/reverse-engineer-an-existing-database-into-a-database-model-HA010115485.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T02:30:50.823

看看 dbdesigner 就觉得是这个名字。如果您有数据库登录，它会登录。并下载并制作漂亮。你有服务器登录吗？

或者 phpmyadmin，Php 包在 db 屏幕上有它。

# ruby-on-rails - Eclipse 用户：你们也使用 Aptana 吗？

> ID：408498
> 
> 赞同：8
> 
> 时间：2009-01-03T02:25:38.400
> 
> 标签：ruby-on-rails, eclipse, ide, aptana

这家 San Mateo 开发公司为 Eclipse 制作了一个可免费下载的方便打包的名为[Aptana](http://www.aptana.com/)的插件。我最近在一个预先安装了 Aptana 的环境中。它不仅是一个很好的 RoR IDE，它还为 PHP、Python、HTML、CSS 和 Javascript 做了一些不错的工作（没有调试）。根据他们自己的网站，他们的 IDE 还支持 Adob​​e Air 和 iPhone。

如果您当前正在使用 Eclipse，那么您是否也使用 Aptana？使用 Aptana 有哪些缺点（如果有）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-05T10:40:02.303

我有 Aptana 和 Eclipse，但是因为我也做很多 Java 编程，所以将它们分开。如果您有一个 Eclipse 将所有内容组合在一起，那么它会变得有点占用内存（比平时更多）并且需要很长时间才能启动。此外，Aptana 似乎在启动时会向您推送时事通讯，因此如果您将 Eclipse 用于 Aptana 以外的其他东西，那么这是保持它独立的另一个原因，因为一段时间后它会有点烦人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-03T03:10:44.270

我使用 Eclipse 和[PyDev](http://pydev.sourceforge.net/)进行 Python 编程，但我不使用 Aptana。

Aptana 只是使用 PyDev 来支持它的 Python，所以真的没有激励我添加额外的包袱，我不会像 Javascript 支持那样使用。如果您确实需要所有这些东西，那看起来不错，但我更愿意根据需要单独获取每个插件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-05T19:00:12.963

我曾经使用 Aptana 进行 Rails 开发（以及 Eclipse 用于我的 Java 开发），但我发现它在我的开发 PC 上时不时地导致 10 秒的停顿，这太烦人了。我尝试了 Netbeans（我曾经在 Eclipse 之前将它用于我的 Java 开发），更喜欢 Rails 工具，并且没有切换回追踪暂停的原因。

Aptana (RadRails) 绝对是几年前最好的 Windows Rails IDE，但在我看来已经落伍了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-05T09:27:38.283

我在windows上做rails开发时经常使用它。虽然在 OS XI 上仍然更喜欢好的 ol' TextMate。Aptana 对各种网络语言都有很好的支持和集成。为 rails 控制台、rails 服务器管理、rake 任务、ruby gem 和 rails 插件提供内置工具也很方便。我开始使用独立版本，但后来转而使用它作为 Eclipse 插件。独立版本使用较旧的 Eclipse 基础。对我来说，使用 Eclipse 更新版本的好处之一是我可以使用 eclipse Git SCM 插件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-05T10:13:58.250

我将 Zend Studio for Eclipse 用于 php，将 Eclipse 用于 Flex Builder，将 Aptana 用于 javascript 和 Air Apps。
我还使用了 Aptana Eclipse 插件，它运行良好，但需要 Eclipse Ganymead，而 Flex Builder 需要 Europa。

我的情况可能有点不同，因为我使用的是 Linux 桌面，但我希望我的所有工作都只有一个 Eclipse。哼哼……

我不得不说 Aptana 太棒了——尽管 Zend 更适合 PHP。我还没有尝试过 Jaxter 的东西，但我喜欢它处理 javascript 库的方式——比 JSEclipse 好得多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-05T10:23:44.940

我为 PHP 使用 Eclipse PDT

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-05T21:25:55.400

我主要做web开发，所以我选择使用Aptana。Aptana 是一个很棒的基于 Eclipse 的 Web 开发平台。它带有一些废话（比如 Jaxer 和所有你不需要的东西），但这很容易忽略。我在 Windows 和 Linux (Ubuntu) 上都使用 Aptana。

如果我要进行 C/C++、Eclipse 插件或 Java 开发，我可能只会使用 vanilla Eclipse（必要时使用 Java EE 扩展）。但是对于web开发来说还是相当不错的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-08T01:34:39.670

不，我不使用 Aptana。我只是抓住我正在做的任何事情所需的 Eclipse 插件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-05-25T21:17:10.153

我只使用 Aptana，因为我不需要 Java 透视图。还有一个用于 Java Script 开发的 Eclipse Helios 项目，但它仍然不如 Aptana。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-01-12T15:56:52.163

我喜欢 Eclipse，因此在很多方面我也喜欢 Aptana。但我一直发现它在版本 3（在 Windows 7 上）非常不稳定。足够了，以至于我不再使用它了。只是想知道是否有其他用户看到过同样的事情。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-01T09:55:51.097

> 如果您当前正在使用 Eclipse，那么您是否也使用 Aptana？

我将 Aptana 与 Juno、Kepler 和 Luna 一起使用了一段时间。然而随着问题的增多。

> 使用 Aptana 有哪些缺点（如果有）？

首先，Aptana 发布了自己的 PyDev 版本，可以追溯到几年前。[在 Luna 上，它在很大程度上是非功能性的](https://stackoverflow.com/questions/30500732/is-it-possible-to-update-the-pydev-plug-in-bundled-with-aptana)。如果您需要使用 Python 进行开发，建议您不要安装 Aptana。

Aptana 打破了核心 IDE 中的各种内容：[颜色主题](https://www.eclipse.org/forums/index.php/m/1649329/#msg_1649329)、[当前行高亮](https://www.eclipse.org/forums/index.php/m/1448861/#msg_1448861)是我记得的两个问题。

只有当您不打算将 Eclipse 用于其他任何事情时，我才会建议您安装 Aptana（现在也称为 RadRails）。否则，您可能最好使用[轻量级设置](https://stackoverflow.com/a/31158046/2066215)。

# .net - What is the codedom that I need to write to generate this code?

> ID：408501
> 
> 赞同：2
> 
> 时间：2009-01-03T02:27:01.033
> 
> 标签：.net, codedom

I need to do this.

```
public class MyClass{

    private static IDictionary<String, Type> databaseAccessClasses
                              = new Dictionary<String, Type>();

    private static IDictionary<String, Type> DatabaseAccessClasses
    {
        get { return DataAccessFactory.databaseAccessClasses; }
        set { DataAccessFactory.databaseAccessClasses = value; }
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-04T13:57:20.250

使用以下代码：

```
CSharpCodeProvider codeProvider = new CSharpCodeProvider();
CodeCompileUnit compileUnit = new CodeCompileUnit();
CodeNamespace nameSpace = new CodeNamespace("xy");

compileUnit.Namespaces.Add(nameSpace);

CodeTypeDeclaration myClass = new CodeTypeDeclaration("MyClass");
nameSpace.Types.Add(myClass);
myClass.TypeAttributes = System.Reflection.TypeAttributes.Class | System.Reflection.TypeAttributes.Public;

CodeTypeReference dictionaryType = new CodeTypeReference("IDictionary", new CodeTypeReference(typeof(string)), new CodeTypeReference(typeof(Type)));

CodeMemberField myClass_databaseAccessClasses = new CodeMemberField(dictionaryType, "databaseAccessClasses");
myClass_databaseAccessClasses.Attributes = MemberAttributes.Static;
myClass.Members.Add(myClass_databaseAccessClasses);

CodeMemberProperty myClass_DatabaseAccessClasses = new CodeMemberProperty();
myClass_DatabaseAccessClasses.Name = "DatabaseAccessClasses";
myClass_DatabaseAccessClasses.Type = dictionaryType;
myClass_DatabaseAccessClasses.Attributes = MemberAttributes.Static;
myClass_DatabaseAccessClasses.GetStatements.Add(new CodeMethodReturnStatement(new CodeFieldReferenceExpression(new CodeTypeReferenceExpression(new CodeTypeReference("DataAccessFactory")), "databaseAccessClasses")));
myClass_DatabaseAccessClasses.SetStatements.Add(new CodeAssignStatement(new CodeFieldReferenceExpression(new CodeTypeReferenceExpression(new CodeTypeReference("DataAccessFactory")), "databaseAccessClasses"), new CodeArgumentReferenceExpression("value")));
myClass.Members.Add(myClass_DatabaseAccessClasses);

StringWriter writer = new StringWriter();
codeProvider.GenerateCodeFromCompileUnit(compileUnit, writer, new System.CodeDom.Compiler.CodeGeneratorOptions());
// writer.ToString() contains the C# code 
```

吕迪格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-24T06:24:57.627

Rudiger 的答案很接近，但需要进行一些小的修改才能实际生成请求的代码：

```
 CSharpCodeProvider codeProvider = new CSharpCodeProvider();
        CodeCompileUnit compileUnit = new CodeCompileUnit();
        CodeNamespace nameSpace = new CodeNamespace( "xy" );

        compileUnit.Namespaces.Add( nameSpace );

        CodeTypeDeclaration myClass = new CodeTypeDeclaration( "MyClass" );
        nameSpace.Types.Add( myClass );
        myClass.TypeAttributes = System.Reflection.TypeAttributes.Class | System.Reflection.TypeAttributes.Public;

        CodeTypeReference dictionaryType = new CodeTypeReference( "IDictionary", new CodeTypeReference( typeof( string ) ), new CodeTypeReference( typeof( Type ) ) );

        CodeMemberField myClass_databaseAccessClasses = new CodeMemberField( dictionaryType, "databaseAccessClasses" );
        myClass_databaseAccessClasses.Attributes = MemberAttributes.Static | MemberAttributes.Private;
        myClass_databaseAccessClasses.InitExpression = new CodeObjectCreateExpression(dictionaryType);
        myClass.Members.Add( myClass_databaseAccessClasses );

        CodeMemberProperty myClass_DatabaseAccessClasses = new CodeMemberProperty();
        myClass_DatabaseAccessClasses.Name = "DatabaseAccessClasses";
        myClass_DatabaseAccessClasses.Type = dictionaryType;
        myClass_DatabaseAccessClasses.Attributes = MemberAttributes.Static | MemberAttributes.Private;
        myClass_DatabaseAccessClasses.GetStatements.Add( new CodeMethodReturnStatement( new CodeFieldReferenceExpression( new CodeTypeReferenceExpression( new CodeTypeReference( "DataAccessFactory" ) ), "databaseAccessClasses" ) ) );
        myClass_DatabaseAccessClasses.SetStatements.Add( new CodeAssignStatement( new CodeFieldReferenceExpression( new CodeTypeReferenceExpression( new CodeTypeReference( "DataAccessFactory" ) ), "databaseAccessClasses" ), new CodeArgumentReferenceExpression( "value" ) ) );
        myClass.Members.Add( myClass_DatabaseAccessClasses );

        StringWriter writer = new StringWriter();
        codeProvider.GenerateCodeFromCompileUnit( compileUnit, writer, new System.CodeDom.Compiler.CodeGeneratorOptions() ); 
```

# survey - What development tools do you carry on your USB drive?

> ID：408511
> 
> 赞同：59
> 
> 时间：2009-01-03T02:38:30.887
> 
> 标签：survey, portability, usb-drive, portable-applications

I've just bought a new 4GB USB thumb drive and I'm trying to decide what to put on it. I'm thinking about one of the webserver on a stick packages, a C/C++ IDE (leaning toward Code::Blocks; had Dev-C++ on my old USB drive) and Python.

What development related tools do you carry around with you on yours?

**Update**

I've added categories.

## IDEs

[Code::Blocks](http://www.codeblocks.org/) Open source, cross platform C/C++ IDE

*   Supports several compilers (that you must supply) but you can also download a version that includes MingW.
*   (There's [a FAQ question](http://wiki.codeblocks.org/index.php?title=FAQ#Q:_How_do_I_make_Code::Blocks_portable.3F) on their website explaining how to make it portable)

[Codelite](http://codelite.org/Main/ReadMore) -- Open-source, cross platform C/C++ IDE
[Eclipse](http://eclipse.org/) -- Open-source, cross platform Java IDE
[NetBeans](http://www.netbeans.org) -- Open-source, cross platform Java IDE
[JCreator](http://www.jcreator.com/) -- Java IDE
[MSVC6](https://stackoverflow.com/questions/352600/how-to-run-msvc-6-0-off-a-usb-drive-as-a-portable-app) -- Microsoft's pre-.NET C/C++ environment

## Languages & Compilers

[Portable Python](http://www.portablepython.com/) -- Interpreter for the Python programming language

*   Includes SciTE (editor) and [Django](http://www.djangoproject.com/) (web framework)

[Strawberry Perl](http://strawberryperl.com/) -- "A 100% Open Source CPAN-capable Perl for Windows® computer that works exactly the same as Perl everywhere else."
[Py3k](http://python.org/) -- Newest version of the Python programming language
[Stackless Python](http://www.stackless.com/)
[Lua](http://www.lua.org/) -- Scripting language
[MinGW](http://www.mingw.org/) -- Sort of a Windows port of GCC

*   "MinGW provides a complete Open Source programming tool set which is suitable for the development of native Windows programs that do not depend on any 3rd-party C runtime DLLs."

## Editors

[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm) (after so many recommendations, I had to try it)
[UltraEdit](http://www.ultraedit.com/) -- "text, hex, HTML, PHP, Java, Javascript, Perl, and programmer's editor."
[VIM](http://www.vim.org/) -- "highly configurable text editor built to enable efficient text editing"

*   Major rival to emacs

[HEdit](http://www.yurisw.com/HEdit.htm) -- Hex editor
[XVI32](http://www.chmaas.handshake.de/delphi/freeware/xvi32/xvi32.htm) (Hex Editor)
[e text editor](http://www.e-texteditor.com/) -- "The Power of Textmate on Windows"
[Intype text editor](http://intype.info/home/index.php) -- Code editor for Windows
[ConTEXT](http://www.contexteditor.org/) -- Code and text editor
[Editpad Pro](http://www.editpadpro.com/) -- "powerful and versatile text editor or word processor."

## Discovery

[Dependency Walker](http://www.dependencywalker.com/) -- Allows you to see what DLLs a program or DLL depends on and what functions they export.
[Reflector](http://www.red-gate.com/products/reflector/) -- Allows you to look into and decompile .Net assemblies
Spy++
[DbWin32](http://grantschenck.tripod.com/dbwinv2.htm) -- Lets you see Windows debug and trace messages

*   Similar to DebugView

DebugView -- Lets you see Windows debug and trace messages

## Web & Network

[Firefox Portable](http://portableapps.com/apps/internet/firefox_portable) (with [Firebug](http://https://addons.mozilla.org/en-US/firefox/addon/1843))
[OperaUSB](http://www.opera-usb.com/operausben.htm) -- Web browser
[XamppLite](http://www.apachefriends.org/en/xampp-windows.html#646) -- Package that includes Apache, PHP, MySQL, phpMyAdmin, OpenSSL & SQLite
[PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/) -- telnet and SSH client
[Wireshark](http://www.wireshark.org/) -- network protocol analyzer (packet sniffer)
[WinSCP](http://winscp.net/) -- SFTP, FTP and SCP client for Windows

## Diff/Merge

[SourceGear DiffMerge](http://www.sourcegear.com/diffmerge/) -- Compare two files side by side and merge if needed.
[WinDiff](http://www.grigsoft.com/download-windiff.htm) -- File comparison tool
[Winmerge](http://winmerge.org) -- "Open Source differencing and merging tool for Windows."

## Unix-like Tools

[GNU Utilities for Win32](http://unxutils.sourceforge.net/) -- Windows version of several Unix/Linux tools
[Cygwin](http://www.cygwin.com/) -- Port of a Unix type environment to Windows
[PowerGREP](http://www.powergrep.com/) -- GREP tool

## Visual Studio & .NET

[NUnit](http://www.nunit.org/) -- Unit testing for .NET
[TestDriven.NET](http://www.testdriven.net/) -- Easily run your unit tests from Visual Studio
[AnkSVN](http://ankhsvn.open.collab.net/) -- Subversion plugin for Visual Studio
[LINQPad](http://www.linqpad.net) -- Tool to interactively develop [Linq](http://en.wikipedia.org/wiki/Language_Integrated_Query) queries.

*   "lets you interactively query SQL databases in a modern query language: LINQ"

## Regular Expression Tools

[Expresso](http://www.ultrapico.com/Expresso.htm) -- Regular Expression tool
[RegexBuddy](http://www.regexbuddy.com/) -- Regular Expression tool

## Misc

[The Sysinterals Suite](http://technet.microsoft.com/en-us/sysinternals/0e18b180-9b7a-4c49-8120-c47c5a693683.aspx) (includes [DebugView](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx), [Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx), & more)
[WinZip](http://www.winzip.com/)
DosHere
[7-zip](http://www.7-zip.org) -- Open source file archiver
[Scrollbar fix for VB6](http://www.joebott.com/vb6scrollwheel.htm)
[puretext](http://www.stevemiller.net/puretext/) -- Paste w/ formatting removed
[VirtualBox](http://virtualbox.org/) -- Open source virtualization product.

*   Similar to VMWare or VirtualPC

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-07T12:54:11.917

假设一台 Windows 机器：

*   [WinMerge](http://winmerge.org/)
*   [记事本++](http://notepad-plus.sourceforge.net/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-07T12:51:32.813

[系统内部工具](http://technet.microsoft.com/en-us/sysinternals/default.aspx)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-05-07T13:24:19.973

我使用一个 16GB 的 USB 棒（可提供更大的容量）作为 Linux 系统，其中包含我完整的工作环境。我使用的每台计算机都从这个驱动器引导到我的系统中。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2009-01-03T02:43:44.900

我喜欢[便携式应用程序](http://portableapps.com/)。我使用 NotePad++、OpenOffice 应用程序等。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-05-07T13:30:28.773

我推荐[.NET Reflector](http://www.red-gate.com/products/reflector/)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2009-01-03T11:13:52.937

对于 Windows，有很多[sysinternal](http://sysinternals.com)工具。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2009-05-07T13:19:51.263

[Portable Apps](http://portableapps.com/)网站有许多可能有用的应用程序，例如 WinMerge、Notepad++ 和Gimp [。](http://portableapps.com/apps)

如果您进行大量 Web 开发，我相信[Aptana](http://www.aptana.com/)将适合拇指驱动器。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2009-10-04T13:04:10.917

*   [Visual C# 和 Visual C++ 2008 Express 版本](http://www.microsoft.com/express/download/)（从“离线安装”DVD 映像中提取）
*   [.NET Framework 3.5 完全可再发行](http://download.microsoft.com/download/6/0/f/60fc5854-3cb8-4892-b6db-bd4f42510f28/dotnetfx35.exe)（和 Windows Installer 3.1 来安装它）
*   7zip 便携式和安装程序
*   [Windows Sysinternals](http://technet.microsoft.com/en-us/sysinternals/default.aspx)的进程监视器和网络监视器
*   火狐安装程序
*   [IEInspector](http://www.ieinspector.com/)安装程序
*   [Code Architect 的正则表达式测试器](http://www.dotnet2themax.com/blogs/fbalena/permalink,guid,13bce26d-7755-441e-92b3-1eb5f9e859f9.aspx)
*   Windows Live Messenger 静默安装程序（[从引导网络安装程序中提取的](http://www.mydigitallife.info/2008/10/21/retrieve-windows-live-messenger-2009-standalone-individual-setup-installer-msi-from-web-download/)Contacts.msi 和 Messenger.msi ）、[A-patch](http://apatch.org/)和 A-patch 设置文件，用于关闭所有我不想要的东西并按照我的方式进行设置喜欢它。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-01-03T03:47:49.687

Ubuntu Linux

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-05-07T14:58:06.737

我的一把钥匙上有很多东西，主要是asm相关的。

*   [OllyDbg](http://www.ollydbg.de/)
*   [WinHex](http://www.winhex.com/winhex/)
*   [马斯姆32](http://www.masm32.com/)
*   [放射学](http://www.oby.ro/rad_asm/)
*   [油灰](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)
*   [psftp](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)
*   [便携式歌剧](http://www.opera-usb.com/operausben.htm)
*   [.Net 反射器](http://www.red-gate.com/products/reflector/)
*   [便携式火狐](http://portableapps.com/apps/internet/firefox_portable)

我也有

*   [红外线记录仪](http://infrarecorder.org/)
*   [媒体编码器](http://mediacoder.sourceforge.net/)
*   [GnuCash](http://www.gnucash.org/)

还有一些我不记得的东西，因为我没有它:'(

我还有一个带有[backtrack3](http://www.remote-exploit.org/backtrack_download.html)的 USB 密钥和一个带有 Windows 映像的 USB 密钥，我可以使用它来非常快速地将其安装到我的上网本上。我认为[这](http://weblogzz.blogspot.com/2008/01/install-windows-from-pen-drive.html)是一个很好的指南。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-01-03T12:01:45.010

注意：我是一名 Windows 开发人员。这会为您在下面阅读的内容着色。

*   依赖行者 (Depends.exe)
*   WinZip
*   记事本++ (v5)
*   数据库Win32
*   进程浏览器
*   HEdit - 十六进制编辑器
*   温差
*   Ripper - 我共同编写的一个应用程序，用于从日志文件中删除冗余行。
*   DelSub - 我编写的一个应用程序，用于删除文件夹树中具有给定扩展名的文件。便于在备份前移除 NCB 和 PCH 等。
*   DosHere - 一个资源管理器扩展，用于在任何文件夹的上下文菜单中添加“命令提示符”条目。这是我放在任何我必须使用的 Windows 盒子上的第一件事。
*   DeTab - 我为从源文件中剥离标签而编写的应用程序。自我注意 - 需要为 Unicode 更新这个。

请注意这里对调试本机代码的强调，因为如果我在现场，那通常就是我正在做的事情。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-01-03T02:39:30.963

1.  火狐
2.  记事本++
3.  Python
4.  一些音乐（它让我在编码工作之间平静下来！）

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-01-03T03:24:13.010

拥有[http://unxutils.sourceforge.net/（grep/cut/sh](http://unxutils.sourceforge.net/) 等）很方便。您可能需要一些比 cmd 更好的环境来运行它。尝试 FAR - [http://www.farmanager.com/index.php?l=en](http://www.farmanager.com/index.php?l=en) （使用开源之一）。

丹佛全在一个网络服务器包中（也支持 USB-flash 安装）： [http ://translate.google.com/translate?hl=uk&ie=UTF-8&u=http%3A%2F%2Fwww.denwer.ru% 2F&sl=ru&tl=en&history_state0=](http://translate.google.com/translate?hl=uk&ie=UTF-8&u=http%3A%2F%2Fwww.denwer.ru%2F&sl=ru&tl=en&history_state0=)

但它是为俄罗斯观众准备的。

另外： http: [//www.makeuseof.com/tag/portable-software-usb/](http://www.makeuseof.com/tag/portable-software-usb/)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-05-07T12:56:58.027

当我在某人的机器上调试某些东西时，我要做的第一件事就是安装**Vim**。加入我们，这是一种生活方式。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-01-03T11:31:45.413

PortableApps.com 拥有我的便携式 USB 驱动器上的大部分内容：

*   Filezilla
*   火狐
*   记事本++
*   油灰
*   线鲨

除此之外，我的 USB 驱动器上还有 Beyond Compare。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-05-07T13:41:44.597

*   [片段编译器](http://www.sliver.com/dotnet/SnippetCompiler/)
*   [7 拉链](http://www.7-zip.org/)

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2009-05-07T13:44:48.643

我过去常常随身携带 UnixUtils。

UnixUtils是一组移植到windows的Unix命令，所以我只需要在windows路径中添加一个目录，然后我就可以在windows机器的shell中使用大部分常见的linux命令，让我的工作更轻松.

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2009-05-07T14:46:01.103

我会将[LINQPad](http://www.linqpad.net/)添加到此列表中。如果您必须对 LINQ 查询做任何事情，那么它是必备软件。它有一个独立的可执行文件，因此如果您愿意，您可以完全从拇指驱动器上运行它。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2009-01-09T16:44:45.707

我携带了一个 VirtualBox 硬盘驱动器文件，其中包含我们项目的整个开发环境。

在熟悉的环境中设置任何新机器以进行开发大约需要一分钟。

安装VirtualBox，新建虚拟机，插入U盘，将虚拟机指向硬盘文件，从虚拟机启动进入开发环境。VirtualBox 的下载时间大约需要一分钟。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2009-01-03T03:34:35.423

我的 VPN 客户端软件 ;)

MMmm Sweet Sweet 远程桌面。*流口水*

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2009-05-07T12:57:47.057

*   emacs
*   tucan（用于 Windows 备份）
*   油灰
*   wincp
*   SVN 存储库

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2009-01-03T03:46:33.137

未提及的：

*   WinSCP（适用于所有 S/FTP 等连接）
*   LINQPad（用于所有 .NET 代码测试）
*   油灰

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2009-05-07T13:08:57.793

grep, definatly gotta have a grep tool of some kind.

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2009-05-07T13:12:29.423

I recommend [WinDbg](http://www.microsoft.com/whdc/devtools/debugging/default.mspx).

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2009-01-03T13:06:14.690

*   油灰
*   WinSCP
*   记事本++ - 必备。
*   Firefox - 另一个必须拥有。
*   XAMPP - 有一个独立版本，特别适用于记忆棒，效果很好。
*   网豆

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2009-05-07T13:29:18.493

和 FTP 程序，如 WinFTP 和[crossloop](http://www.crossloop.com/)

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2009-01-07T13:41:41.233

我有我的手机号码作为 USB 驱动器的名称，所以如果我丢失了它，一个诚实的人可以打电话给我并归还它。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2009-01-03T03:04:45.547

apache、php5 和 mysql（以及 notepad++）

我还有一些脚本可以将 php.ini 文件复制到 C:\windows 文件夹等。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2009-05-07T13:02:21.117

[MemTest](http://www.memtest.org/)如果是硬件故障排除？

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2009-01-03T03:45:30.097

我正要说：“没什么”，我决定仔细检查我的 USB，我发现了[VIM](http://www.vim.org/)以及我的 .vimrc 和[ProcessXP](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

我通常不从那里使用它，但有时（3 -6 个月）我会进入一台新机器并从 USB 复制它们。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2009-01-09T09:25:53.620

我无处可去[`puretext.exe`](http://www.stevemiller.net/puretext/)。它只是一个 28 Kb 的可执行文件，它为您提供`Windows+V`（或您想要的任何键）我在点击某个地方后会经常手动执行的操作`Ctrl+C`：

*   `Windows+R`
*   `N`, `O`, `T`, `E`, `P`, `A`, `D`（如果需要，通常仍在我的“运行”对话框中...）
*   `Enter`
*   `Ctrl+V`
*   `Ctrl+A`
*   `Ctrl+C`
*   `Alt+F4`
*   `N`（对于否）
*   `Alt-Tab`（需要正确的次数，如果有的话......）
*   `Ctrl+V`

换句话说：它从剪贴板粘贴“纯文本”，没有任何可能已与文本一起复制到剪贴板上的标记。

任何我工作超过一个小时的电脑——我有权`puretext.exe`进入并运行——我把它放进去`C:\WINDOWS\`，双击它一次，在其设置中将它设置为自动启动，并始终隐藏任务栏中的图标。

太值得了**。**;-)

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2009-01-08T17:18:31.683

我很惊讶 JGsoft 的优秀工具套件还没有被提及，特别是考虑[到作者是我们中的一](https://stackoverflow.com/users/33358/jan-goyvaerts)员：

*   [EditPad Pro](http://www.editpadpro.com/)（IMO，最好的文本编辑器）
*   [RegexBuddy](http://www.regexbuddy.com/)（正**则**表达式调试器）
*   [PowerGREP](http://www.powergrep.com/) （如果你随身携带 Cygwin可能并不*重要，但它比“真正的”grep 更有特色，并且有一个很好的引导 GUI）*

当然，它们都不是免费的，但它们都获得了合理的许可，并且都支持便携式安装。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2009-01-07T21:50:11.230

除了已经列出的大多数工具...

```
Process Explorer
Process Monitor
AutoRuns
Expresso
KeePass
ReNamer
TrueCrypt 
```

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2009-01-03T11:05:20.613

*   [Strawberry Perl](http://strawberryperl.com/)，我不得不编辑一些批处理文件以使用 USB e: 而不是硬盘驱动器 c:
*   [MinGW](http://www.mingw.org/)，用于 GCC、G++ 并添加了 GDB，当我开始使用它时可能是 MSYS
*   [MSVC6](https://stackoverflow.com/questions/352600/how-to-run-msvc-6-0-off-a-usb-drive-as-a-portable-app)，目前仅适用于控制台应用程序，尚未尝试包含 MSDN
*   [Codelite](http://codelite.org/Main/ReadMore)，对于 IDE，比 Code::Blocks 更好，比 Eclipse 更轻
*   Ultraedit v9，较新的版本太臃肿太慢，可能无法从 USB 运行
*   还有很多其他有用的实用程序，例如 grep、[ssed](http://sed.sourceforge.net/grabbag/ssed/)、批处理文件来设置环境变量和启动 Perl、GCC 或 VC 等。

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2009-09-30T13:02:57.557

[Expresso](http://www.ultrapico.com/Expresso.htm)是设计和测试正则表达式的必备工具

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2009-01-03T13:01:32.360

我会将这个适用于 Windows 的出色 OSS 添加到列表中：

*   [7 压缩包](http://www.7-zip.org/)。它不仅可以处理 zip、gzs、bz2s、rars 或 arjs，甚至还可以处理 rpm 或 iso。
*   [温默格](http://winmerge.org/)。始终需要目录/文件比较工具。

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2009-05-18T14:07:46.073

这是我的清单。所有实用程序都适用于 MS Windows，在 XP 上测试。

```
CSVed - 编辑逗号分隔的文件
EasyCleaner - 注册表清理器，应用程序卸载器
FolderSize - 文件夹的大小，以漂亮的条形图显示
Foxit Reader - 快速、轻量级的 PDF 阅读器
Fsplit - 文件拆分器
GlovePIE - 高级输入脚本（鼠标、键盘、游戏控制器）
JkDefrag - 碎片整理程序
NiftyWindows - 一堆窗口管理功能
PowerOff - 安排系统动作
Process Hacker - 高级任务管理器
PSpad - 最好的免费文件编辑器
PyScripter - Python 的最佳 GUI
Reflector - .NET 应用程序检查器
ResHacker - 查看和编辑可执行资源
Speq - 最好的计算器，小巧而强大
UniExtract - 提取大约 95% 的档案和安装程序
VLCplayer - 具有独立编解码器的视频播放器
Wheeler - 没有事先聚焦的鼠标滚动
WikidPad - 用于知识存储的个人 wiki
WinMerge - GUI 差异工具
xint - 超轻量级编辑器
XML Notepad 2007 - 来自 M$ 的 XML 编辑器
XYplorer - 不错的双窗格文件浏览器
zDump - 类似于 Spy++
Zzoom - 屏幕放大镜
```

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2010-01-12T20:28:46.607

我有一个来自西部数据的 160 GB 便携式硬盘驱动器——所以我随身携带了*很多*东西。

没有特别的顺序：

*   XAMPP
*   便携式 Python

*   7-Zip

*   系统内部套件
*   DOS盒子
*   腻子和 PSFTP

*   MySQL GUI 工具

*   记事本++
*   正则表达式好友 3
*   LINQPad

每个主要 Web 浏览器、Komodo Edit、Cygwin、Git 和我最喜欢的 Python 模块的安装程序。

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2009-05-07T14:21:00.087

作为 WPF/Silverlight 开发人员，我会添加[Kaxaml](http://www.kaxaml.com/)和[MS Blend](http://www.microsoft.com/Expression/products/Overview.aspx?key=blend)

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2009-01-03T02:47:29.043

便携式应用程序也是如此。我玩过一些 Linux-on-a-sticks，包括[Slax](http://www.slax.org/)（它是一个很棒的小发行版！），但我学校的电脑似乎不再允许从 USB 启动:'(

我还设法在我的 USB 上安装了 Cygwin，但这有点奇怪，而且我不经常使用它。Eclipse 也是如此，但只有当你绝对需要它时，它才会像糖蜜一样缓慢运行。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2009-05-07T12:56:19.570

如果你有空间，AutoPatcher（你在你的电脑上运行它来下载所有可用的 Windows 更新，然后把它带到他们的地方并用它来修补他们的 Windows 安装）。

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2009-05-07T12:57:42.003

调试工具或分析器。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2010-03-11T16:11:41.037

I keep my acme-sac (inferno-based vm) builds for all platforms I interact with - Win, Mac, Linux, BSD. That way I *always* have my preferred work environment with me. For Win, I also throw in cdb.exe so I can have a real debugger instead of that DevStudio monster.

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2009-05-07T13:17:05.420

I can run Delphi5 on my USB, using some custom script to properly setup registry. It's pretty handy since it allow me to:

1.  Debug (Assembly or Delphi)
2.  Instantly create some mini native utility, or create some adhoc report for my user.
3.  Fine text editor

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2009-01-08T17:11:50.857

对于 Windows：

*   腻子（[腻子托盘](http://www.xs4all.nl/~whaa/putty/)）
*   Xming - X11服务器
*   紧的vnc.exe

这些让我可以通过 SSH 和 VNC 访问真正的开发工具所在的 Linux 系统。

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2009-01-09T16:50:06.710

目前：Python + Python Stackless Lua JCreator ConTEXT

我的大部分 USB 都是由安装程序/源代码组成的 :)

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2009-01-03T11:38:18.643

XamppLite Web-Server 让我可以随时随地工作和测试任何 PHP、CGI 或脚本[。](http://www.apachefriends.org/en/xampp-windows.html#646)

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2009-10-04T13:08:08.530

我已将 ubuntu linux 安装到我的 USB 闪存中：GIMP Eclipse NetBeans

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2009-01-05T18:21:17.393

我的一个 USB 闪存驱动器有我从 Safari Online 购买的 PDF 格式的书籍。能够携带十到二十本关于 .NET、HTML、CSS、SQL、Active Directory、安全性、WPF 或我碰巧在其中拥有的任何书籍，并且在不伤到我的情况下将其拉出来，这是无价的。

另一个有 NUnit、TestDriven.NET、WinMerge、VB6 的滚动条修复、AnkSVN、C# 规范的副本，以及一些自制工具。

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2009-01-05T18:21:43.523

当我开始使用它时，我将[Windows Home Server PC 恢复映像放在 USB 驱动器上](http://www.wegotserved.co.uk/wiki/index.php?title=Turn_your_USB_Flash_Drive_Into_a_Windows_Install_Disk)。它不仅比 CD 更适合恢复家庭服务器 CD，而且您还可以启动到 CMD 提示符或运行磁盘管理器。

我不喜欢缓存可下载软件的副本，因为重新下载通常会带来最新的更新。例外是我必须跳过箍才能获得的软件（注册等）

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2009-05-07T13:52:01.170

我不得不赞同 Sean 对 PortableApps 的建议，因为从您的示例中听起来，您可能正在做 pc 故障排除而不是开发工作。PortableApps 提供了许多您可能需要的重要工具的便携版本，这些工具可以完全从拇指驱动器运行，包括 Firefox（浏览器）、Thunderbird（电子邮件）、FileZilla（ftp）和 Open Office（文字处理、电子表格、数据库等） .)、7-Zip（zip 文件管理）等。如果您碰巧是 .NET 开发人员解决应用程序问题，您可能需要查看[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/Default.aspx)，它将完全从[拇指驱动器](http://community.sharpdevelop.net/blogs/laputa/archive/2008/08/16/sharpdevelop-on-a-memory-stick.aspx)运行。

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2009-01-05T18:00:01.463

我使用以下工具在一个分区（ext2，因此 Windows 看不到它）上完整安装了[Fedora 9（Sulphur）（LiveUSB 版本的持久性中断）：](http://fedoraproject.org)

*   带有[vim](http://vim.org)的终端！:D
*   [VirtualBox](http://virtualbox.org)，用于运行本地 Windows VM
*   [GCC](http://gnu.org)、[Python](http://python.org)、[Ruby on Rails](http://rubyonrails.org)等。
*   [Eclipse](http://eclipse.org) 3.4 Ganymede，带有[Aptana](http://www.aptana.com/) RadRails 和 Pydev 插件
*   [Compiz Fusion](http://compizfusion.org)（摇摆不定的窗口和动画菜单帮助我集中注意力！）

在另一个分区上，我的数据和以下 Windows 工具：

*   [再次使用 Eclipse](http://eclipse.org) 3.4
*   [便携式Python](http://www.portablepython.com/)
*   我自己的[Py3k](http://python.org)安装
*   [Notepad++](http://notepad-plus.sourceforge.net/) , [e](http://www.e-texteditor.com/)文本编辑器和[Intype](http://intype.info/)文本编辑器
*   [SuperTux](http://supertux.berlios.de)不稳定
*   [超级TuxKart](http://supertuxkart.sourceforge.net/)
*   Vim（命令行！）
*   [Nethack](http://nethack.org)，加上我的助手（非常好的游戏，与黑客网络无关！）

**编辑**：我现在有 Fedora 10。速度稍慢，需要`vga=`新启动才能工作，但新功能值得。

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2009-01-03T13:04:12.980

我的只有音乐，还有我的[GTD 项目](http://www.omnigroup.com/applications/omnifocus/)。哦，还有几场比赛的中间时间;-)

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2009-05-07T13:32:49.687

如果您携带**敏感数据**，我会推荐像 Toucan 这样的加密工具。

可以在[portableapps.com](http://portableapps.com/)找到其他出色的便携式应用程序。

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2009-05-06T19:28:34.893

我的 USB 驱动器上必须有[Directory Opus 。](http://www.gpsoft.com.au/)我主要将它用于搜索功能，这比 Windows 提供的要好得多。

另外，这里已经提到了 Keepass。

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2009-05-07T13:49:06.387

[虚拟机](http://portableapps.com/node/2952)

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2009-06-11T14:26:33.857

到目前为止提到的一切都很棒。

但是，如果您像我一样，并且很多人因为他们不是精明的用户而要求您从他们的 PC 中传送恶魔，那么您还需要一份免费的病毒防护软件，例如[AVG](http://free.avg.com/)。

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2010-11-04T22:40:12.430

[PicPick](http://picpick.wiziple.net/features)用于图像捕捉和编辑

# .net - 从 SWF（版本 7）向 Flex 3 应用程序发送数据

> ID：408523
> 
> 赞同：1
> 
> 时间：2009-01-03T02:53:19.983
> 
> 标签：.net, apache-flex, actionscript-3, flash

有谁知道如何获取 swf（版本 7）并使用 SwfLoader 或类似的东西从 Flex 应用程序访问 swf 中的根变量？我尝试了很多事情都没有成功。我不想因为所有失败的尝试而使这篇文章变得混乱，但是如果我发现需要它们作为示例，我稍后会发布它们。

只是一些背景知识：我在 .NET 中生成 swf 文件，而我使用的库只能生成最高版本 7 的 swf。Flex 应用程序是使用 Flex 3 构建的。我需要访问 swf 中的变量。我不在乎它是如何做到的，只要我能做到。不管我是在冒泡一个事件还是使用 LocalConnection 或直接访问变量，到目前为止我都没有运气做任何事情。（虽然 swf 确实加载了......并显示在我的 Flex 应用程序中）。

哦，swf 没有嵌入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-03T03:12:06.637

ExternalInterface 自 as1.0 以来一直可用，因此这可能是您问题的解决方案。用ExternalInterface 类actionscript 可以与javascript 通信，反之亦然。因此，您可以将变量从 swf 传递给 javascript 函数，并让该 javascript 函数将相同的变量传递给 FLEX 应用程序中的函数。我不想编写所有代码，除非这听起来可能是您正在寻找的答案，在这种情况下，请告诉我，我会为您编写代码，或者只是......

看看：[外部接口](http://www.actionscript.org/resources/articles/638/1/Basics-of-using-the-ExternalInterface/Page1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T04:43:08.780

当您加载面向 FP8 或更早版本的 SWF 时，它会作为 AVM1Movie 的实例加载。从文档：

“AVM1Movie 对象可以使用从 DisplayObject 类继承的方法和属性（例如 x 、 y 、 width 等）。但是，AVM1Movie 对象和 AVM2 对象之间不允许互操作（例如调用方法或使用参数） 。”

这是因为 FlashPlayer 9+ 实际上有两个不同的虚拟机，它们不能直接相互通信。

LocalConnection 肯定会在这种情况下工作：我已经将 v7 SWF 与 Flex 2 应用程序一起使用，并且通过 v7 -> Flex2 和 Flex2 -> v7 进行了通信（通过方法调用）。我会研究你是如何设置它的，因为它肯定会起作用。

# c# - C#：重构雷诺数计算器

> ID：408530
> 
> 赞同：1
> 
> 时间：2009-01-03T03:01:33.400
> 
> 标签：c#, refactoring

我正在尝试在周末学习一些 C#，并遵循此处找到的 15 个练习：[http ://www.jobsnake.com/seek/articles/index.cgi?openarticle&8533](http://www.jobsnake.com/seek/articles/index.cgi?openarticle&8533)

昨天我问了一个关于 Fibonacci 序列的类似问题，并收到了一些很好的回复，这些回复向我介绍了我以前没有遇到过的 C# 元素： [重构 Fibonacci 算法](https://stackoverflow.com/questions/406446/refactoring-fibonacci-algorithm)

今天我想看看 C# Jedi 如何重构以下代码：

```
static string Reynolds(int d, int v, int rho, int mu)
{
    int number = (d*v*rho) / mu;
    if (number < 2100) return "Laminar Flow";
    else if (number < 2100 && number < 4000) return "Transient Flow";
    else return "Turbulent Flow";
} 
```

比昨天简单多了，但是有什么好方法来处理多个条件吗？

问候，

克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-03T03:21:23.967

我认为您的代码中有错误，但我做了一个假设。您的第二个“如果”永远不会评估树，因为 number < 2000 已经使第一个分支为真。

我会创建一个枚举：

```
enum FlowType
{
    Laminar
    , Transient
    , Turbulent
};

static FlowType Reynolds(int d, int v, int rho, int mu)
{
    int n = (d*v*rho) / mu;

    if(n < 2000)
    {
        return FlowType.Laminar;
    }
    else if(n < 4000)
    {
        return FlowType.Transient;
    }
    else
    {
        return FlowType.Turbulent;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-03T03:18:32.803

使用 C# 三元运算符，

```
 static string Reynolds(int d, int v, int rho, int mu)
    {        
       int number = (d*v*rho) / mu; 
       return number <  2100? "Laminar Flow":
              number >= 4000? "Turbulent Flow":
                              "Transient Flow";
    } 
```

或者，（给我讽刺的一面），如果你觉得这***不可读***，你可以添加评论，使其***更具***可读性，

```
static string Reynolds(int d, int v, int rho, int mu)
{        
   int number = (d*v*rho) / mu; 
   return /*IF*/ number <  2100? /*Then*/ "Laminar Flow":
          /*IF*/ number >= 4000? /*Then*/ "Turbulent Flow":
                                 /*Else*/ "Transient Flow";
} 
```

真的有人认为这有帮助吗？

# python - 如何在 Django 中生成 303 Http 响应？

> ID：408541
> 
> 赞同：19
> 
> 时间：2009-01-03T03:20:07.963
> 
> 标签：python, django, http, rest

最近几天，我们在[另一个问题](https://stackoverflow.com/questions/401191/how-to-return-random-items-restfully)上讨论了以 RESTful 方式管理随机性的最佳方式；今天我在Django中玩了一些想法，结果发现没有简单的标准方法可以返回303响应（也不是300，顺便说一句），也就是说，里面似乎不存在HttpResponseSeeOther django.HTTP 或其他地方。

您知道实现这一目标的任何方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-01-03T03:25:12.273

您可以像其他响应一样覆盖 HttpResponse：

```
class HttpResponseSeeOther(HttpResponseRedirect):
    status_code = 303

return HttpResponseSeeOther('/other-url/') 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-01-03T03:54:35.880

通用 HttpResponse 对象可让您指定所需的任何状态代码：

```
response = HttpResponse(content="", status=303)
response["Location"] = "http://example.com/redirect/here/" 
```

如果您需要可重复使用的东西，那么杰拉德的回答绝对是有效的；只需创建自己的 HttpResponseSeeOther 类。Django 只为一些最常见的状态码提供这些特定的类。

# .net - 当底层 SQL 视图数据发生变化时，保持 GUI 更新的最佳方法是什么？

> ID：408554
> 
> 赞同：4
> 
> 时间：2009-01-03T03:33:15.627
> 
> 标签：.net, sql-server, winforms

假设您有一个带有组件的表单，该组件显示来自 SQL 服务器上的视图的数据。该组件类似于 ListView 或 DataGrid - 基本上可以以 2D 网格格式显示数据。另一个应用程序更改 SQL 视图描述的数据，并定期执行此操作，但间隔未定义。

**问题是这样的：表单需要用最新的数据来保持自己的更新，在它改变和它显示之间的延迟最小。**

平台限制是您必须使用 .NET 2.0 和 Microsoft 的 SQL Server。**假设您可以完全控制该系统的所有其他部分，并且可以按照您想要的任何方式进行设计 - 最好的方法是什么？**

目前我想到的那些：

*   定期轮询数据并进行比较以查看发生了什么变化。或者通过：

    *   从 SQL Server 读取整个视图并将其与当前显示的数据逐行进行比较，同时更新显示的数据，或者
    *   以某种方式记录视图的更改表（使用触发器或应用程序逻辑），每次读取其中的新项目，并将其应用于显示的数据。
*   在 SQL Server 与表单和更新应用程序之间添加一个层，因此来自主应用程序的任何更新都会转到此处，并且可以实时通知表单应用程序的更改。不过，我不确定这将如何在实践中完成。

*   将触发器放在以某种方式导致通知表单的表上 - 可能调用一些自定义扩展存储过程？

有做过这方面的人，请提供您的见解！

如果您知道任何已经完成所有这些工作的现有库，也请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T04:10:34.133

一般来说，如果您希望您的应用程序可扩展，#2 是您想要的方式。查询通知通常不起作用，因为您必须保持与数据库的连接。

触发器是一个坏主意，因为数据库并不总是准确表示您拥有的模型。*可能会*，但这不是必需的。

这就是为什么通过另一层汇集更新是一个好主意的原因，该层可以在模型更改时发送回通知（并且以不需要持久连接和扩展的方式）。

您还可以通过让客户端订阅他们想要的通知来减少流量，因此服务器最终不会向不关心的客户端发送太多通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T03:55:23.757

在我们的小型内部应用程序中，每当用户对数据库中的数据进行更改时，都会通过网络发送一个 UDP 广播，告诉每个人哪些类型的数据已被修改。如果用户打开了与已广播内容匹配的部分 gui，则重新加载他们打开的表单。

由于我们系统的用户打开相同位的数据并不太常见，因此这种情况并不太常见。我们确实会在有人查看他们打开的相同数据时发出警报 - 让他们知道可能导致他们正在查看的数据发生变化的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T03:38:48.707

阅读查询通知。如果没有太多的查询或需要监控的客户端，它可能是一个很好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-03T06:39:37.857

SQL Server 确实提供了通知客户端特定表的更新。根据发生的更新量，这可能是采取的方法。我认为它需要 SQL 2005 或更高版本，但我无法确定。

如果您对源表有大量更新，您的第二个建议可能会奏效。一种方法是利用 WCF，并利用回调机制。该服务必须是单例或会话的，但它会通过让每个客户端在打开代理时向其注册回调来跟踪连接到它的客户端。然后，您将让客户端通过服务提交更新，并且作为更新事务中的最后一个操作到数据库，您将让服务循环通过所有客户端并通知他们更新（我假设更新数据，这样您就不会重新查询数据库）。这当然意味着中间层的额外负载，但它绝对可以工作。

# c# - 是否通过存储库/服务/其他持久化 XML/CSV/其他

> ID：408556
> 
> 赞同：4
> 
> 时间：2009-01-03T03:34:53.800
> 
> 标签：c#, .net, design-patterns, architecture, oop

我有一个从 CSV 文件或数据库中导入信息并将其导出为 XML 的应用程序。此 XML 当前正在保存到文件中。然而，由于项目需要，我决定将这个 XML 保存到数据库中可能会更好。

目前我有处理导入/导出数据的 CSV、XML 和 SQL 存储库。XML 存储库将传入的对象保存到文件中。它目前是存储对象到 XML 的映射的地方，因此它是唯一知道这种结构的地方（同样，它们各自结构的其他存储库）。

现在我想将 XML 存储在数据库中，我开始质疑这种架构。为了插入数据库，必须可以从 SQL 存储库访问 XML 的结构（其他列中的 nb 数据可以与 XML 一起插入到数据库中）。这让我想知道 XML 表示是否应该存储在对象本身中，或者存储在服务层或其他地方。

解决此问题的最佳方法是什么？

更新：澄清我的问题。XML 存储库当前保存在一个文件中。在我看来，保持 XML 结构知识的水平是错误的，因为这样我就无法灵活地将 XML 表示形式保存到我想要的任何介质上。让对象了解它的 XML 表示（或 CSV 表示等）是糟糕的设计吗？该结构的知识是否应该保持在另一个层次，那将是什么层次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-03T21:41:35.087

您不只是将您的 XML 存储库更改为具有 SQL 后端。yopur 存储库做什么并不重要，它们只是用于存储和检索数据的“黑匣子”。将您的秘密 XML 知识保存在 XML 存储库中，并使用 SQL 对其进行后端处理。

您可以将其链接到您的 SQL 存储库或将其分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T02:11:51.163

虽然许多数据库支持直接存储 XML，但我认为尝试这样做会受到伤害（根据经验）。如果架构发生更改，那么您需要将每条记录更新为新架构。

我建议，如果您要将其存储在数据库中，则将数据存储在更易于修改和管理的表中。

此外，您应该质疑为什么要将数据存储在数据库中。如果您不打算查询数据，那么存储在平面文件中也一样好。

我并不是说您的所作所为是错误的，而是仔细考虑您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-19T18:19:23.083

在我看来，convert-object-to-text-format 和 store-text-somewhere 的过程可以而且应该是可分离的。我猜这些东西中的哪一个是“主要的”取决于你的应用程序的结构。也就是说，无论你

1.  告诉对象，“自己去存储”，应用程序的配置决定这意味着 X 格式和 Y 存储。
2.  告诉对象，“将自己存储在数据库中”，数据库存储会询问对象的文本格式（或将对象传递给返回该文本的服务层）。
3.  告诉对象，“去存储你的 XML”，然后序列化过程就知道选择哪种存储机制。

当我说“配置”时，它可以像应用程序设置中的某些东西一样简单，也可以像应用程序启动时实例化特定组件的 IoC 容器一样复杂/强大。

您应该能够封装序列化和存储过程，以便改变您对它们如何连接在一起或添加新选项的想法，而不需要您重写太多应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-14T22:50:02.520

如果 XML 的结构是不变的，您可以查看我关于[Easy Xml Serialization](http://blog.decayingcode.com/2009/01/xml-serialization-made-easy.html)的博文。它允许编写 XML，但主要是读取它。一旦为 XML 创建了所有类，您就可以通过代码轻松访问对象并直接从代码中制作/运行批处理脚本，同时确保数据有效并遵守特定模式。

当然，如果可能的话，最好的方法仍然是直接使用一些 DTO 执行 CSV > Database。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-06T04:02:21.730

持久性可以被认为是一个横切关注点，这意味着对象不应该关心持久性是如何进行的，只关心它应该被执行；例如，您可以定义一个 PersistentStoreFactory 来创建实现 PersistentStore 接口的对象，该接口具有单个 Generic Persist 方法。

然后，您可以使用 Persist 属性装饰该类，该属性将使用工厂创建 PersistentStore，然后调用传递对象实例的 Persist 方法。如果您将来决定要为不同类型的类提供不同的持久性机制，您可以扩展您的属性以具有字符串类型的参数以公开 PersistanceMedia 即数据库、文件系统、云、URL 等

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-03T10:30:55.753

如果您希望 SQL 存储库能够使用现有的 xml 层，那么我确信某种基于接口的抽象（提供程序/IoC/DI/等）是可能的，以便 SQL 存储库可以使用 xml 堆栈无需明确知道。

当然，如果对象模型本身定义了 xml 结构（通过`XmlSerializer`etc 的属性），那么这更简单，并且 xml 存储库变得相当简单。

至于知道db*里面*的结构：看你是否需要查询数据库里面的数据。如果是这样，您可以在 SQL Server 中做很多事情 - 例如，您可以将 xml 列绑定到 xsd，或者您可以将部分 xml（通过 udf/xquery）提升为持久的索引列。但是，如果您*只是*使用数据库进行存储，那么这不是必需的 - 事实上，如果您需要在以后更改 xsd（这不是微不足道的），那么在数据库中使用 xsd 是一个主要的 PITA。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-03T13:12:26.660

您还可以尝试使用原生 XML 数据库，例如[eXist](http://exist.sourceforge.net/)，它可以满足您对 XML 存储和检索的需求。

**更新**：另一个解决方案可能是使用 DBMS 的 XML 功能。几乎所有现代 DBMS 都支持 XML 类型，因此最好的方法应该是这种方式（对要存储数据的列使用 XML 类型）。

**更新 2**：如果您只需要存储结构化信息（从 CSV 导入并将其存储在单个 XML 文件中，如果我没记错的话），为什么不使用普通的旧 RDMBS？我发现将数据存储在可以不受控制地增长的 XML 文件中没有任何优势。当您想从该文件中检索一些数据（无论是否汇总）时会发生什么？它越大，完成工作所需的时间和计算机资源就越多。如果您使用 SAX，您将需要处理整个文件，因此访问文件末尾的数据将比访问文件开头花费更多的时间。使用 DOM 会更糟，因为文件越大，处理它所需的内存就越多。

另一方面，如果我理解错了，并且您需要保留许多 XML 文件，并且每个 XML 文件本身作为一条信息都是有意义的（您必须交付 XML 文件或 XML 文件的一部分作为结果），我会采用原生 XML 数据库方式，因为它是存储和访问这些数据的最自然方式。

# c# - 解析JSON对象数组的正则表达式？

> ID：408570
> 
> 赞同：11
> 
> 时间：2009-01-03T03:53:06.947
> 
> 标签：c#, .net, regex, json

我正在尝试将 JSON 对象数组解析为 C# 中的字符串数组。我可以从 JSON 对象中提取数组，但不能将数组字符串拆分为单个对象的数组。

我所拥有的是这个测试字符串：

```
string json = "{items:[{id:0,name:\"Lorem Ipsum\"},{id:1,name" 
            + ":\"Lorem Ipsum\"},{id:2,name:\"Lorem Ipsum\"}]}"; 
```

现在我正在使用以下正则表达式将项目拆分为单个对象。现在它们是 2 个单独的正则表达式，直到我用第二个解决问题：

```
Regex arrayFinder = new Regex(@"\{items:\[(?<items>[^\]]*)\]\}"
                                 , RegexOptions.ExplicitCapture);
Regex arrayParser = new Regex(@"((?<items>\{[^\}]\}),?)+"
                                 , RegexOptions.ExplicitCapture); 
```

正`arrayFinder`则表达式按我期望的方式工作，但是由于我不明白的原因，`arrayParser`正则表达式根本不起作用。我想要做的就是将各个项目拆分成它们自己的字符串，所以我得到一个这样的列表：

> `{id:0,name:"Lorem Ipsum"}`
> `{id:1,name:"Lorem Ipsum"}`
> `{id:2,name:"Lorem Ipsum"}`

这个列表是`string[]`数组还是`Group`集合`Match`都无关紧要，但我对如何拆分对象感到困惑。使用上面声明的`arrayParser`和`json`字符串，我尝试了这段代码，我认为它不会成功：

```
string json = "{items:[{id:0,name:\"Lorem Ipsum\"},{id:1,name" 
            + ":\"Lorem Ipsum\"},{id:2,name:\"Lorem Ipsum\"}]}";

Regex arrayFinder = new Regex(@"\{items:\[(?<items>[^\]]*)\]\}"
                                 , RegexOptions.ExplicitCapture);
Regex arrayParser = new Regex(@"((?<items>\{[^\}]\}),?)+"
                                 , RegexOptions.ExplicitCapture);

string array = arrayFinder.Match(json).Groups["items"].Value;
// At this point the 'array' variable contains: 
// {id:0,name:"Lorem Ipsum"},{id:1,name:"Lorem Ipsum"},{id:2,name:"Lorem Ipsum"}

// I would have expected one of these 2 lines to return 
// the array of matches I'm looking for
CaptureCollection c = arrayParser.Match(array).Captures;
GroupCollection g = arrayParser.Match(array).Groups; 
```

谁能看到我做错了什么？我完全坚持这一点。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-01-03T05:11:47.987

平衡括号实际上是无法用正则表达式处理的语言的教科书示例。JSON本质上是平衡的括号加上一堆其他东西，大括号被括号代替。在[形式语言的层次结构中](http://en.wikipedia.org/wiki/Chomsky_hierarchy)，JSON 是一种上下文无关的语言。正则表达式无法解析上下文无关语言。

一些系统提供对正则表达式的扩展，可以处理平衡的表达式。然而，它们都是丑陋的黑客，它们都是不可移植的，而且它们最终都是错误的工具。

在专业工作中，您几乎总是会使用现有的 JSON 解析器。如果您想出于教育目的自己动手，那么我建议您从支持 + - * / ( ) 的简单算术语法开始。（JSON 有一些转义规则，虽然并不复杂，但会使您的第一次尝试比需要的更难。）基本上，您需要：

1.  将语言分解为符号字母表
2.  根据识别语言的符号编写上下文无关语法
3.  将语法转换为乔姆斯基范式，或足够接近使第 5 步变得容易
4.  编写一个词法分析器，将原始文本转换为您的输入字母表
5.  编写一个递归下降解析器，获取词法分析器的输出，解析它，并产生某种输出

这是几乎任何一所大学的典型三年级 CS 作业。

下一步是找出在递归解析器中触发堆栈溢出所需的 JSON 字符串有多复杂。然后看看可以编写的其他类型的解析器，你就会明白为什么在现实世界中任何必须解析上下文无关语言的人都使用 yacc 或 antlr 之类的工具，而不是手动编写解析器。

如果这比您所寻找的要多，那么您应该随意使用现成的 JSON 解析器，并满足于您学到了一些重要且有用的东西：正则表达式的限制。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-08-23T09:52:09.257

> 平衡括号实际上是无法用正则表达式处理的语言的教科书示例

bla bla bla ...看看这个：

```
arrayParser = "(?<Key>[\w]+)":"?(?<Value>([\s\w\d\.\\\-/:_]+(,[,\s\w\d\.\\\-/:_]+)?)+)"? 
```

这对我有用

如果要匹配空值，请将最后一个 '+' 更改为 '*'

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-03T04:00:48.787

您使用的是 .NET 3.5 吗？如果是这样，您可以使用[`DataContractJsonSerializer`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)来解析它。没有理由自己这样做。

如果您不使用 .NET 3.5，则可以使用[Jayrock](http://jayrock.berlios.de/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-01-22T13:57:40.640

```
public Dictionary<string, string> ParseJSON(string s)
{
    Regex r = new Regex("\"(?<Key>[\\w]*)\":\"?(?<Value>([\\s\\w\\d\\.\\\\\\-/:_\\+]+(,[,\\s\\w\\d\\.\\\\\\-/:_\\+]*)?)*)\"?");
    MatchCollection mc = r.Matches(s);

    Dictionary<string, string> json = new Dictionary<string, string>();

    foreach (Match k in mc)
    {
        json.Add(k.Groups["Key"].Value, k.Groups["Value"].Value);

    }
    return json;
} 
```

该函数实现 Lukasz 正则表达式。我只将 inclide + char 添加到值组（因为我正在使用它来解析实时连接身份验证令牌）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-03T05:13:53.273

JSON 通常不能用正则表达式解析（某些极其简化的 JSON 变体可以，但它们不是 JSON，而是其他东西）。

您需要一个实际的解析器来正确解析 JSON。

无论如何，您为什么要尝试解析 JSON？有许多库可以为你做这件事，而且比你的代码要好得多。为什么要重新发明轮子，拐角处就有一家轮子厂，门上写着 FOSS 字样？

# javascript - 在 Safari 中设置跨域 cookie

> ID：408582
> 
> 赞同：66
> 
> 时间：2009-01-03T04:08:15.980
> 
> 标签：javascript, safari, cookies, cross-domain, cross-site

我必须从域 B.com 调用域 A.com（它使用 http 设置 cookie）。我在域 B.com 上所做的只是（javascript）：

```
var head = document.getElementsByTagName("head")[0];
var script = document.createElement("script");
script.src = "A.com/setCookie?cache=1231213123";
head.appendChild(script); 
```

这会在我测试过的每个浏览器（Safari 除外）上设置 A.com 上的 cookie。令人惊讶的是，即使没有 P3P 标头，这也适用于 IE6。

有什么办法可以在 Safari 中完成这项工作吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-01-28T05:29:29.813

来自[`Safari Developer FAQ`](http://developer.apple.com/internet/safari/faq.html#anchor6)：

> Safari 附带了一个保守的 cookie 策略，该策略将 cookie 写入仅限于用户选择（“导航到”）的页面。此默认保守策略可能会混淆尝试写入 cookie 并失败的基于框架的网站。

我发现没有办法解决这个问题。

如果值得的话，如果您使用`<script`> 附加方法，Chrome 也不会设置 cookie，但如果您有一个`<img`具有相同来源的隐藏 >，Chrome 可以与其他浏览器一起工作（再次，Safari 除外）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2010-02-18T12:30:19.007

这是一个有效的解决方案：

[http://anantgarg.com/2010/02/18/cross-domain-cookies-in-safari/](http://anantgarg.com/2010/02/18/cross-domain-cookies-in-safari/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-11-05T15:50:34.987

这可能不适用于所有人，但我遇到了这个问题，因为我从与 API 不同的主机提供 React 应用程序，最终可行的解决方案是使用 DNS：

我们的客户从 www.company-name.com 获得服务，我们的 API 在 company-name.herokuapp.com 上。通过创建**CNAME**记录 api.company-name.com --> company-name.herokuapp.com，并让我们的客户使用该子域进行 API 调用，Safari 不再将其视为“第三方”cookie。

好处是涉及的代码很少，而且都使用了成熟的东西......缺点是如果您要使用 https，您需要对 API 主机进行一些控制/所有权 - 他们需要一个有效的证书对于客户端域，否则用户将收到证书警告 - 因此，如果有问题的 API 不是您的或合作伙伴的，这将不起作用（至少不适用于面向最终用户的东西）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-11-17T06:39:04.037

2014-2016工作方法：

您必须对域执行 window.open / 分配 cookie / 关闭弹出窗口，该域现在已列入安全列表。

原帖[@PHP 多个 cookie 在 iPad / iPhone 浏览器上不起作用](https://stackoverflow.com/questions/16703176/php-multiple-cookies-not-working-on-ipad-iphone-browser)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-04T13:09:14.603

假设他们安装了闪存，那就有点邪恶了。

我不确定它是否仍然有效，但 Flash 的“本地共享对象”又名**Flash Cookie**可以帮助您绕过 Safari 的同域策略。

[本地共享对象教程](http://www.permadi.com/tutorial/flashSharedObject/index.html)

但是，至少可以说，实施起来可能很复杂。

*   [关于 LSO 的 Wiki 文章](http://en.wikipedia.org/wiki/Local_Shared_Object)

此外，LSO 正在成为一场安全噩梦：

*   [LSO 的电子隐私信息中心](http://epic.org/privacy/cookies/flash.html)
*   [Flash Cookies：沉默的隐私杀手](http://www.imasuper.com/66/technology/flash-cookies-the-silent-privacy-killer/)

所以在使用它们之前要仔细考虑。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-10-01T07:51:38.503

隐藏的帖子`<iframe>`可以让您绕过 Safari 中的此限制 - [http://gist.github.com/586182](http://gist.github.com/586182)：

```
<?php
  header('P3P: CP=HONK');
  setcookie('test_cookie', '1', 0, '/');
?>
<div id="test_cookie" style="position: absolute; top: -10000px"></div>
<script>
  window.setTimeout(function() {
    if (document.cookie.indexOf('test_cookie=1') < 0) {
      var      
        name = 'test_cookie',
        div = document.getElementById(name),
        iframe = document.createElement('iframe'),
        form = document.createElement('form');

      iframe.name = name;
      iframe.src = 'javascript:false';
      div.appendChild(iframe);

      form.action = location.toString();
      form.method = 'POST';
      form.target = name;
      div.appendChild(form);

      form.submit();
    }
  }, 10);
</script> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-06-12T13:05:26.687

在 2015 年有一个适当的解决方法。假设有一个网站 y.com，其中包括 iframe 和网站 x.com。x.com iframe 想要存储一个 cookie。Safari 政策不允许这样做，但是 y.com 可以存储它。所以 y.com 必须监听来自 x.com 的消息，然后存储 cookie 本身。

```
var _cookieEvMth = window.addEventListener ? "addEventListener" : "attachEvent";
var _cookieEvAction = window[_cookieEvMth];
var _cookieEv = _cookieEvMth == "attachEvent" ? "onmessage" : "message";
_cookieEvAction(_cookieEv, function(evt){
  if(evt.data.indexOf('cookieset')!=-1){
    var datack = evt.data.split('|');
    YOUR_CUSTOM_COOKIE_SAVE_METHOD(datack[1],datack[2],datack[3]);
  }
},false); 
```

当 x.com 需要存储 cookie 时，它​​必须向 y.com 发布消息：

```
window.parent.postMessage('cookieset|'+ckName+'|'+ckVal+'|'+days,'*'); 
```

如果您想阅读 cookie，您也可以按照自己的方式将消息发布到 iframe。或者您可以使用 javascript 将其作为参数包含在 x.com iframe url 中：

```
iframe.setAttribute('url','x.com/?cookieval='+YOUR_COOKIE_GET_METHOD('cookiename')); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-08T19:53:24.653

我们刚刚在我的工作中提出的一个解决方法是通过 window.open() 设置 cookie - 它可能对你来说不是最佳的（因为你会打开一个丑陋的屁股弹出窗口），但它对我们很有效. 我们必须为 OAuth 身份验证打开一个弹出窗口。

所以我们所做的主要是：

1.  用户点击来自 B.com 的链接
2.  弹出窗口打开到 A.com/setCookie
3.  A.com 设置它的 cookie，然后在适当的位置重定向到 B.com

同样，并非在所有解决方案中都有效，但它在我们的解决方案中有效。希望这可以帮助。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-07-27T08:57:45.650

我知道这个问题相当老了，但这帮助我解决了 cookie 问题：

```
var cookieForm = document.createElement("form");
cookieForm.action = "A.com/setCookie?cache=1231213123";
cookieForm.method = "post";
document.body.appendChild(cookieForm);

cookieForm.submit(); 
```

在设置 cookie 的页面上发布表单的想法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-01-26T02:03:51.997

****编辑**** 此解决方法已报告在 WebKit 中关闭。

卢卡，

好的，所以这个答案已有两年历史了，但是......如果您将表单发布到隐藏的 iframe，您可以从 iframe 设置 cookie。您可以通过创建一个表单来做到这一点：

```
<form id="myiframe" action="http://yourdomain.com" method="POST" target="iframe_target"> 
```

然后在 Javascript 中，获取对表单的引用并调用提交：

```
document.getElementsByTagName('form')[0].submit(); 
```

您可以收听 iframe 的 onload，或者您可以让 iframe 操作页面发出一些 javascript 来发出负载信号。我已经在 Safari 和 Chrome 中对此进行了测试，并且可以正常工作。

干杯。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-28T05:50:09.290

也许务实地创建并单击带有`href="A.com/setCookie?cache=1231213123"`指向隐藏 iframe 的目标属性的链接。这*可能会*绕过 Safari 设置 cookie 的用户导航策略（我没有 Safari 方便测试。）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-04T05:55:47.677

当我试图部署一个使用 Windows Live ID 的站点时，我对此进行了一些广泛的调查，这取决于能够设置 3rd 方 cookie 以注销的能力。只是……没用。我们无能为力。Live ID 团队也进行了广泛的调查，他们的回答是“不能让它工作”。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-07-28T01:24:11.930

注意这一行：

```
script.src = "A.com/setCookie?cache=1231213123"; 
```

在我添加 http 之前，我无法让它工作，即

```
script.src = "http://A.com/setCookie?cache=1231213123"; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-29T22:15:05.347

我找到了一个简单的解决方案。您只需要第一次设置 cookie 来检查请求是否来自同一个来源，如果不是像往常一样，您需要向 iframe 返回一个将重复此请求的脚本，已经有权分配 cookie。之后，您可以直接通过 iframe 访问此 cookie 进行其他请求。这对我的跟踪系统有所帮助。试试看，这个效果很好。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-08T11:39:01.730

值得注意的是，Safari 中的此限制不适用于子域。因此，如果您直接访问 sitea.com，那么您可以从 subdomain.sitea.com 设置 cookie，而无需直接用户交互 (iframe/JavaScript)。

这与我在开发 API 时的情况有关。如果您的访问者正在访问 mysite.com，然后您希望一些 JavaScript 与您的 API 进行交互，那么如果 API 托管在 api.mysite.com，那么它将在 Safari 上运行。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-08-13T20:12:59.577

将此 JavaScript 放在发出跨域请求的页面[http://example1.com/index.html](http://example1.com/index.html)上：

```
 <script>
  var gup = function(name, url) {
     if(!url) url = location.href;
     name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
     var regexS = "[\\?&]"+name+"=([^&#]*)";
     var regex = new RegExp( regexS );
     var results = regex.exec( url );
     return results == null ? null : results[1];
  }
  var isSafari = navigator.vendor && navigator.vendor.indexOf('Apple') > -1 && navigator.userAgent && !navigator.userAgent.match('CriOS');
  var n = gup("activated");
  if(isSafari && n == null) {
     //browser is Safari and cookies have not yet been activated
     var current_url = location.protocol + '//' + location.host + location.pathname;
     var query_string = '?callback=' + encodeURIComponent(current_url + '?activated=1');
     var new_url = 'http://example2.com/activate.php' + query_string;
     window.location.href = new_url;
  }
  //the rest of your code goes here, and you can now set cross-domain cookies on Safari
  </script> 
```

然后在另一台服务器上创建一个需要设置cookies的文件，[http](http://example2.com/activate.php) ://example2.com/activate.php ：

```
 <?php
  if(isset($_GET['callback'])) {
     header('Location: '.$_GET['callback']);
     exit();
  } else {
     //in case callback param is not set, simply go back to previous page
     echo "<script>";
     echo "window.history.back();";
     echo "</script>";
     exit();
  }
  ?> 
```

这是它的工作原理：

1.  当第一次访问[http://example1.com/index.html](http://example1.com/index.html)时，会检查浏览器是否为 Safari，以及名称“激活”的 GET 参数是否不存在。如果满足这两个条件（这将在 Safari 浏览器的第一次访问时发生），则浏览器将重定向到[http://example2.com/activate.php](http://example2.com/activate.php)并带有 GET 参数“回调”，其中包含附加的调用 URL带有“激活”参数。

2.  [http://example2.com/activate.php](http://example2.com/activate.php)只是重定向回 GET 参数“回调”中包含的 URL。

3.  当[http://example1.index.html](http://example1.index.html)在被重定向到后第二次被点击时，GET 参数“激活”现在将被设置，因此步骤 1 中的条件将不会执行，从而允许脚本继续执行。

这满足了 Safari 的要求，即让浏览器至少访问第 3 方域一次以开始设置 cookie。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2009-02-02T16:16:03.543

尝试类似：

```
var w = window.open("A.com/setCookie?cache=1231213123");
w.close(); 
```

它可能会绕过 Safari 的安全策略。

* * *

## 回答 #18

> 赞同：-13
> 
> 时间：2009-01-03T11:31:28.767

这不是让您烦恼的缺少的类型属性吗？-)

```
<script type="text/javascript">
  var head = document.getElementsByTagName("head")[0];
  var script = document.createElement("script");
  script.setAttribute("type","text/javascript");
  script.src = "A.com/setCookie?cache=1231213123";
  head.appendChild(script);
</script> 
```

# asp.net - 在 ASP.NET MVC 中等效的 Django 应用程序？

> ID：408588
> 
> 赞同：6
> 
> 时间：2009-01-03T04:16:26.557
> 
> 标签：asp.net, asp.net-mvc, django, plugins

我目前使用 Django 进行开发，但希望在未来的客户不可避免地请求使用 ASP.NET MVC 完成的站点时做好准备。虽然 ASP.NET MVC 的大部分结构和流程都或多或少与 Django 和 RoR 相同，但我不确定的一个部分是 Django 用来简化代码重用的应用程序方法。

ASP.NET MVC 中是否有与 Django 应用程序等效的应用程序？也就是说，我是否可以创建一个功能，如标记、评论、事件日历、简单博客等，并将其捆绑起来，使其可移植到其他项目，只需最少的胶水代码即可集成它？也许某种插件或模块系统？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-04T12:18:52.273

Django 不遵循传统的 MVC 模式，因为他们主张在 Web 世界中，他们的 MTV 更适合。总的来说，由于 django 应用程序，我更喜欢 Django 而不是 Rails。您可以使用 Rails 供应商插件在 RoR 中执行几乎相同的操作，但不一样。

ASP.NET 遵循 RoR 结构，因此您没有可重用的应用程序。如果您检查 MVC 项目中的文件夹结构，您甚至找不到 RoR 的插件文件夹，所以我敢打赌您应该像 VisualStudio 那样做。

创建一个可重用的应用程序，作为一个单独的项目，在你的主项目中包含对该项目的引用，在你的 Route 文件中，只需重定向到另一个项目的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-04T13:26:57.270

这可能也很有趣：[App Areas](http://blog.codeville.net/2008/11/05/app-areas-in-aspnet-mvc-take-2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T02:35:31.933

我们试图做类似的事情，尽管从不同的角度。我们使用组合控制器来增加[bistro](http://bistroframework.org)中的可重用性，并使用[ndjango](http://ndjango.org)作为模板语言。我们开始看到的是控制器变得更加细化，因此更少依赖于它们所在的位置 - 更加可组件化。

# c - C中的一种自修改程序

> ID：408592
> 
> 赞同：0
> 
> 时间：2009-01-03T04:21:11.943
> 
> 标签：c, heap-memory, machine-code

是否可以编写执行以下操作的 C 函数？

1.  在堆中分配一堆内存
2.  在其中写入机器代码
3.  执行那些机器指令

当然，我必须将堆栈的状态恢复到手动执行这些机器指令之前的状态，但我想知道这是否可行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-03T05:10:13.700

这当然是*可能的*。出于各种原因，我们在过去 30 到 40 年里付出了很多努力，试图让它变得尽可能困难，但这是可能的。在现在的大多数系统中，都有试图保护数据空间不被执行的硬件和软件机制。

不过，基础非常简单：您构建一段代码，然后手动或通过编译器4 组装它。然后你需要一段代码空间，所以你将代码插入到你的程序中

```
unsigned int prgm[] = { 0x0F, 0xAB, 0x9A ... };  // Random numbers, just as an example 
```

因为你想使用*堆*，所以你需要 malloc 空间

```
void * myspace ;
if((myspace= malloc(sizeof(prgm))) != NULL) {
     memcpy(myspace, pgrm, sizeof(pgrm));
} else { // allocation error
} 
```

现在，您需要一种让*程序计数器*指向该数据块的方法，该数据块也是您的代码块。这就是你需要一点技巧的地方。设置程序计数器没什么大不了的；这只是底层机器的 JUMP 指令。但是怎么做呢？

最简单的方法之一是故意弄乱堆栈。再次从概念上讲，堆栈看起来像这样（细节取决于您的操作系统和编译器对，以及您的硬件）：

```
    | 子程序返回地址 |
    | 参数... |
    | 自动变量 |

```

这里的基本技巧是偷偷地将你的代码地址放入返回地址；当一个例程返回时，它基本上会跳转到那个返回地址。如果您可以伪造它，PC 将被设置到您喜欢的位置。

所以，你需要的是一个例程，我们称之为“goThere()”

```
void goThere(void * addr){
    int a ;     // observe above; this is the first space 
                // on the stack following the parameters
    int * pa;   // so we use it's address

    pa = (&a - (sizeof(int)+(2*sizeof(void*))) ;  // so use the address
                // but back up by the size of an int, the pointer on the
                // stack, and the return address
    // Now 'pa' points to the routine's return add on the stack.
    *pa = addr; // sneak the address of the new code into return addr
    return ;    // and return, tricking it into "returning"
                // to the address of your special code block
} 
```

它会起作用吗？好吧，也许，取决于硬件和操作系统。大多数现代操作系统将保护堆（通过内存映射或类似方法）免受 PC 移动到其中。出于安全目的，这很有用，因为我们*也不*会让您完全控制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-03T04:26:27.597

[这与这个问题](https://stackoverflow.com/questions/397064/calling-code-stored-in-the-heap-from-vc)非常相似:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-03T04:28:10.353

从 vc++读取[存储在堆中的调用代码](https://stackoverflow.com/questions/397064?sort=newest)。在 posix 上，`mprotect`似乎是合适的（查看`man mprotect`）：

```
char *mem = malloc(sizeof(code));
mprotect(mem, sizeof(code), PROT_READ|PROT_WRITE|PROT_EXEC);
memcpy(mem, code, sizeof(code));
// now arrange some code to jump to mem. But read the notes here on casting 
// from void* to a function pointer:
// http://www.opengroup.org/onlinepubs/009695399/functions/dlsym.html 
```

但是，它说：

> PROT_EXEC 是否具有与 PROT_READ 不同的效果取决于体系结构和内核版本。在某些硬件架构（例如 i386）上，PROT_WRITE 意味着 PROT_READ。

所以更好，首先检查您的操作系统是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-03T04:34:57.580

RE：手动恢复堆栈

如果您在生成的机器代码中遵循平台/编译器使用的调用约定，那么您不必进行任何手动堆栈恢复。当您这样做时，编译器会为您执行此操作

*pfunc(参数)

它应该添加任何必要的适当的调用前或调用后堆栈操作步骤。

但是，请确保您在生成的代码中遵循正确的约定。

# scala - 惯用的 Scala Map upsert

> ID：408602
> 
> 赞同：29
> 
> 时间：2009-01-03T04:35:12.960
> 
> 标签：scala, scala-collections

我正在使用 Scala 中的地图并执行通常的“如果没有与键关联的值，则创建它，将其放入地图并返回它”：

```
def alphaMemory(key : AlphaMemoryKey) = {
    var am = map.getOrElse(key, null)
    if(am == null) {
        am = new AlphaMemory(key)
        map.put(key, am)
    }
    am
} 
```

对我来说，这不像是惯用的 Scala 代码。感觉像Java。有没有更简洁的写法？看起来也许我可以覆盖 Map.default() 以插入新值并返回它。不过不确定。

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-01-03T04:46:00.257

[`mutable.Map`](http://www.scala-lang.org/docu/files/api/scala/collection/mutable/Map.html)has [`getOrElseUpdate`](http://www.scala-lang.org/api/current/scala/collection/mutable/Map.html#getOrElseUpdate(key:K,op:=>V):V)which 正是你想要的，不需要成语。

# c# - 为什么即使数据表没有更改，GetChanges 也会返回一些东西（当绑定到属性时）？

> ID：408607
> 
> 赞同：1
> 
> 时间：2009-01-03T04:41:26.770
> 
> 标签：c#, data-binding, properties

当绑定到 a 的属性时， Bound`GetChanges`总是返回一些东西`UserControl`（即使是简单的）

我做了 a `UserControl`，出于某种我不知道的原因，当我将 a 绑定`DataColumn`到我的控件的属性时，`dataSet1.GetChanges()`总是返回一些东西，即使绑定到我的控件的列也没有改变。

为什么`GetChanges`总是返回一些东西的可能原因是什么？

这是重现绑定/GetChanges 问题的简单片段：

* * *

```
using System;

using System.Data;

using System.Windows.Forms;

namespace BindingBug
{

    public partial class Form1 : Form
    {

        DataSet _ds = new DataSet();

        void GetData()
        {           
            var t = new DataTable
            {
                TableName = "beatles",
                Columns =
                {
                    {"lastname", typeof(string)},
                    {"firstname", typeof(string)},
                    {"middlename", typeof(string)}
                }
            };

            t.Rows.Add("Lennon", "John", "Winston");
            t.Rows.Add("McCartney", "James", "Paul");

            _ds.Tables.Add(t);            
        }

        public string Hey { set; get; }

        public Form1()
        {
            InitializeComponent();

            var tLastname = new TextBox { Top = 100 };
            var tFirstname = new TextBox { Top = 130 };

            this.Controls.Add(tLastname);
            this.Controls.Add(tFirstname);

            GetData();

            tLastname.DataBindings.Add("Text", _ds.Tables["beatles"], "lastname");
            tFirstname.DataBindings.Add("Text", _ds.Tables["beatles"], "firstname");

            // if the following line is commented 2nd:Has Changes == false
            this.DataBindings.Add("Hey", _ds.Tables["beatles"], "middlename");

            _ds.AcceptChanges();

            MessageBox.Show("1st:Has Changes = " + _ds.HasChanges().ToString()); 

            var bDetectChanges = new Button { Top = 160, Text = "Detect Changes" };
            bDetectChanges.Click += 
                delegate 
                {
                    this.BindingContext[_ds.Tables["beatles"]].EndCurrentEdit();
                    MessageBox.Show("2nd:Has Changes = " +  (_ds.GetChanges() != null).ToString()); 
                };

            this.Controls.Add(bDetectChanges);

        }    
    }
} //namespace BindingBug 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T12:53:29.523

我今天能够解决问题，关键是让 BindingContext 的 EndCurrentEdit 知道值是否*真的*改变了。为此，我们必须在我们的控件上实现 System.ComponentModel.INotifypropertychanged。我刚刚从这里看到了解决方案：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)

希望这可以帮助其他人实现自己的控件，这些控件在 GetChanges() 上标记错误的*更改*状态

```
public partial class Form1 : Form, System.ComponentModel.INotifyPropertyChanged
{
    //----------- implements INotifyPropertyChanged -----------

    // wish C# has this VB.NET's syntactic sugar
    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged; // implements INotifyPropertyChanged.PropertyChanged 

    //----------- start of Form1  ----------

    DataSet _ds = new DataSet();

    void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
    }

    void GetData()
    {

        var t = new DataTable
        {
            TableName = "beatles",
            Columns =
            {
                {"lastname", typeof(string)},
                {"firstname", typeof(string)},
                {"middlename", typeof(string)}
            }
        };

        t.Rows.Add("Lennon", "John", "Winston");
        t.Rows.Add("McCartney", "James", "Paul");

        t.Columns["middlename"].DefaultValue = "";

        _ds.Tables.Add(t);            
    }

    string _hey = "";
    public string Hey 
    { 
        set 
        {
            if (value != _hey)
            {
                _hey = value;
                NotifyPropertyChanged("Hey");
            }
        } 
        get 
        {                

            return _hey;  
        } 
    }

    public Form1()
    {
        InitializeComponent();

        var tLastname = new TextBox { Top = 100 };
        var tFirstname = new TextBox { Top = 130 };

        this.Controls.Add(tLastname);
        this.Controls.Add(tFirstname);

        GetData();

        tLastname.DataBindings.Add("Text", _ds.Tables["beatles"], "lastname");
        tFirstname.DataBindings.Add("Text", _ds.Tables["beatles"], "firstname");

        this.DataBindings.Add("Hey", _ds.Tables["beatles"], "middlename");

        _ds.AcceptChanges();

        MessageBox.Show("1st:Has Changes = " + _ds.HasChanges().ToString());

        var bDetectChanges = new Button { Top = 160, Text = "Detect Changes" };
        bDetectChanges.Click +=
            delegate
            {
                this.BindingContext[_ds.Tables["beatles"]].EndCurrentEdit();
                MessageBox.Show("2nd:Has Changes = " + (_ds.GetChanges() != null).ToString());

            };

        this.Controls.Add(bDetectChanges);

    }

} 
```

# excel-2003 - Excel file to be restricted from opening with any other formats

> ID：408618
> 
> 赞同：2
> 
> 时间：2009-01-03T04:53:14.810
> 
> 标签：excel-2003

I would like to know that i have an excel file with 18 sheets and it should be opend with any other versions.

for example if i right click on the file and select open with open office the same is being opened. i would like to lock this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-03T23:31:45.397

这并不完全正确。您可以创建一个与`Workbook_Open`检查正在使用的 Excel 版本（即`Application.Version`）的事件相关联的宏。例如，您可以尝试执行以下操作：

```
Private Sub Workbook_Open()
    If Int(Application.Version) <> 11 Then 
       Workbook.Saved = True
       Workbook.Close
    End If
End Sub 
```

但是，如果用户禁用了宏并且我不知道它是否也适用于 OpenOffice，这将不起作用。我知道 OpenOffice 有一个等效的 VBA，但对对象模型的了解还不够，无法说明 Excel 宏在 OpenOffice 中的行为方式是否完全相同。

我怀疑最好的选择是用密码保护您的工作簿并包含一个宏来检查正在使用的版本。不是万无一失的方法，但可能是您将获得的最接近的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T05:03:17.677

not possible. The user or OS decides which programs to invoke.

The best you can do is to obfuscate the data from being read, except with the correct program.

# python - 将 CVS/SVN 转换为编程片段站点

> ID：408621
> 
> 赞同：2
> 
> 时间：2009-01-03T04:53:31.800
> 
> 标签：python, svn, web-applications, rest, cvs

我使用 cvs 来维护我所有的 python 片段、注释、c、c++ 代码。由于托管服务提供商还提供公共网络服务器，我想我应该将 cvs 自动转换为编程片段网站。

1.  [cvsweb](http://www.freebsd.org/projects/cvsweb.html)不是我的意思。
2.  [doxygen](http://www.doxygen.org)是一个完整的项目，可以在线浏览自引用代码。我认为 doxygen 更像是基于 web 的 ctags。

我尝试使用[rest2web](http://www.voidspace.org.uk/python/rest2web/)，它要求我将 /restweb 头文件和文件编写为 .txt 文件，它会干扰编程语言语法。

我想到的一种方法是：1）运行 source-hightlight 并为所有脚本创建 .html 页面。2) 现在编写一个脚本来索引这些脚本 .htmls 并创建网页。3) 创建这些页面的网站。

在继续之前，我想我会在这里讨论，如果成员们有任何建议。当您想在 cvs 中维护您的片段和注释并自动将其生成到一个好的网站时，该怎么办。我喜欢 rest2web 将笔记转换为 html。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T05:14:15.067

在链接到 (svn) 存储库的服务器上运行[Trac 。](http://trac.edgewall.org/)Trac wiki 可以方便地引用文件和变更集。您也可以获得 TODO 票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T05:32:58.787

enscript 或 pygmentize（pygments 的一部分）可用于将代码转换为 HTML。您可以使用自定义页眉或页脚链接到实际代码以供下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T10:22:30.410

我终于安顿下来了[rest2web](http://www.voidspace.org.uk/python/rest2web/)。我必须做以下事情。

1.  使用单独的 python 脚本递归地将 CVS 中的文件复制到单独的目录中。
2.  将额外的文件 index.txt 和 template.txt 添加到我想在网页中的所有目录中。
3.  rest2web**最好的一点**是它支持在 template.txt 中编写 python 脚本，所以我只是运行了一个内容循环并在页面中将它们编入索引。
4.  要使整个过程自动化，还有很多工作要做。例如。在线观看节目和着色，我认为可以通过更多试验来完成。

我这里有完整的网站，叫做[uthcode](http://uthcode.sarovar.org)。

# macos - Mac OS X 上的 llv8call - 第二次尝试

> ID：408627
> 
> 赞同：2
> 
> 时间：2009-01-03T04:56:10.670
> 
> 标签：macos

我在上一个问题中没有提供很多信息。

我已经从[http://code.google.com/p/llv8call/](http://code.google.com/p/llv8call/)， v0.4 构建了 llv8call。我已经安装了已知的依赖项，即 libxml-2.0 和 libreadline。我的开发系统是 Mac OS X 10.5。llv8call 是用 Scons 构建的。

当我尝试通过 ./llv8call 运行 llv8call 时，出现以下错误：

```
library loading error: org.coderepos.env is not found in : (loadBinary) 
```

我不确定如何解决此错误。作者还没有回复我。我需要一些关于如何解决这个问题的提示，而不是一个明确的答案，但如果有人有一个，这是非常受欢迎的。

这些文件安装到 /usr/local/llv8call。llv8call/lib/llv8call/org/coderepos 下有一个目录结构，但它不包含“env”目录。我的第一个猜测是，它在 org.coderepos.env 中寻找的任何库都应该在此路径中，但“env”不存在。如果这听起来合理，那可能是我应该开始关注的地方，但我需要确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-03T05:21:57.017

你的直觉似乎是对的。做一个grep：

```
grep -r "org.coderepos" *|less 
```

我看到它检查 org.coderepos 下的许多“库”。此外，在 preload_builtin_classes 函数的 src/main.cc 中，我们看到：

```
Handle<Value> args[1];
args[0] = String::New("org.coderepos.fs");
loadBinary->Call(v8ext, 1, args);
args[0] = String::New("org.coderepos.env");
loadBinary->Call(v8ext, 1, args);

if (try_catch.HasCaught()) {
    String::Utf8Value error(try_catch.Exception());
    fprintf(stderr, "library loading error: %s\n", *error);
    exit(2);
} 
```

我的朋友，那是你的确凿证据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-27T06:21:26.343

它正在目录/org/coderepos 中寻找一个名为env 的库（即libenv.so）。

要么制作 /org/coderepos 并将库复制到其中，要么让您的动态链接器在其他地方查找 /org/coderepos 内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-07T17:28:44.360

我通过从我的 llv8call 源目录的顶级目录执行以下操作来解决此问题（在运行 scons 构建所有内容之后）：

```
mkdir -p out/lib/llv8call/org/coderepos
find ext -name \*.dylib -exec cp {} out/lib/llv8call/org/coderepos \; 
```

“dtruss -f test.sh”有助于找到 v8 在哪里寻找库。

# c# - 如何使两个图像与 WPF 重叠？

> ID：408646
> 
> 赞同：3
> 
> 时间：2009-01-03T05:16:58.790
> 
> 标签：c#, wpf, .net-3.5

我有以下 XAML 代码，它显示*图片*（边框内的图像）和徽标。现在，徽标出现在图片下方。这是意料之中的，但是**我的目标是将徽标放在图片顶部**（正好在右下角）。**有人知道怎么做吗？**我们在 WPF 中有图层吗？

注意：我绝对需要保留 WrapPanel。

```
<WrapPanel>
    <Border BorderBrush="Gray" BorderThickness="1" Margin="3">
        <Border BorderBrush="White" BorderThickness="3">
            <Border BorderBrush="LightGray" BorderThickness="0.5">
                <Image Source="http://farm1.static.flickr.com/2/1703693_687c42c89f_s.jpg" Stretch="Uniform" />
            </Border>
        </Border>
    </Border>
    <Image Source="http://l.yimg.com/g/images/flickr_logo_gamma.gif.v59899.14" Height="10" />
</WrapPanel> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-03T09:24:56.980

您应该能够按照以下方式做一些事情：

```
<WrapPanel>
    <Grid>
        <Border BorderBrush="Gray" BorderThickness="1" Margin="3">
            <Border BorderBrush="White" BorderThickness="3">
                <Border BorderBrush="LightGray" BorderThickness="0.5">
                    <Image Source="http://farm1.static.flickr.com/2/1703693_687c42c89f_s.jpg" Stretch="Uniform" />
                </Border>
            </Border>
        </Border>
        <Image Margin="5" HorizontalAlignment="Right" VerticalAlignment="Bottom" Source="http://l.yimg.com/g/images/flickr_logo_gamma.gif.v59899.14" Height="10" />
    </Grid>
</WrapPanel> 
```

通过不指定任何行或列，我们的网格将 2 项放在第 0 行第 0 列中，并将它们堆叠在一起。第二张图片设置了水平和垂直对齐以使其显示在右下角，我在第二张图片上添加了一个边距以使其稍微向上一点，否则它位于边框上，我认为这不是您想要的?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T05:23:47.073

将您的图片和徽标放入 Canvas 元素并根据需要定位它们（​​Canvas.Top、Canvas.Left 等）。

# eclipse - 在 textmate 中，我如何像在 eclipse 中一样制作 javadoc 风格的注释？

> ID：408652
> 
> 赞同：2
> 
> 时间：2009-01-03T05:25:33.623
> 
> 标签：eclipse, comments, textmate, bundles

在 Eclipse 中，当我想记录一个函数（在 java 或 javascript 源代码中）时，我可以输入 /**，然后按 Enter，我会得到这样的评论

```
 /**
 *
 * Fluctuates all variables to more compatibly foo all the bars
 *
 * @PARAM {int} foo 
 */  

function flucvar (foo) {

} 
```

在注释中按回车时，eclipse 会自动在每行的开头添加额外的 *。

现在我刚刚进入我的文本伙伴状态，发现自己缺少这一点功能。是否有等效的捆绑包或命令或可以让我在 textmate 中产生类似评论的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-03T11:29:09.817

您需要创建两个片段（我在 Source bundle 中有它们）。

首先创建一个用于插入 JavaDoc 注释的片段。该片段包含以下内容：

```
/**
* $0
*/ 
```

我将片段 Activation 设置为*Tab Trigger*，`/**`用作激活字符串。每次我编写`/**`并按 Tab 键时，都会收到一个 JavaDoc 注释块。如果您愿意，也可以使用键盘快捷键。

第二个片段用于继续现有的 JavaDoc 注释。片段内容为：

```
* $0 
```

请注意，该行之前有一个空`* $0`行。将激活设置为*等效*键，将触发键设置为*返回*键。将*范围选择器*字符串设置为`comment.documentation`。

现在，如果您的语言包支持`comment.documentation`范围（就像所有包含的包似乎一样），您应该有 JavaDoc 注释的工作快捷方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T06:33:47.887

我查看了 TextMate 的 Java 包，没有看到任何关于插入 JavaDoc 注释的内容。但是，将这样的功能添加到您的 Java 包中应该不难。它可能是一个片段，您可以在 TextMate 手册的第 7 章中阅读它（从 访问`Help -> TextMate Help`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T06:50:08.773

谢谢你的回答。我刚刚在macromates网站上找到了这篇文章

[http://blog.macromates.com/2006/customization-screencast/](http://blog.macromates.com/2006/customization-screencast/)

这似乎有一个视频/邮件列表帖子，准确地解释了如何做到这一点。

# c# - WinForms：将动作捆绑在一起

> ID：408654
> 
> 赞同：1
> 
> 时间：2009-01-03T05:27:07.007
> 
> 标签：c#, .net-2.0

我记得当我使用 C++ Builder 应用程序时，您可以创建一个操作，然后将一个菜单项或上下文菜单项等关联到该操作。这样，如果您禁用诸如禁用操作之类的东西，则关联的菜单项将全部被禁用。.net 2 winforms 应用程序中有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T05:36:30.607

您指的是命令模式。在 .NET 2.0 for Windows Forms 中确实没有开箱即用的东西。

在 Google 上搜索“命令模式窗口表单”会出现一些博客条目，这些条目指出了您可以如何自己实现它，但我没有看到任何以库的形式或有助于实现这一点的东西。

如果您使用的是 .NET 3.0，则可以切换到内置命令模式功能的 WPF。

# c# - C# 类型名称而不是 CLR 类型名称

> ID：408659
> 
> 赞同：4
> 
> 时间：2009-01-03T05:31:13.097
> 
> 标签：c#, system.type

```
typeof(int).Name 
```

将返回 System.Int32 有人知道返回“int”的方法吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-03T05:38:44.830

没有多少类型是 C# 关键字（int、double、string）......所以也许您可以编写自己的映射函数，从系统类型名称到相应的 C# 关键字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-03T05:46:05.437

是的，你可以写一个映射函数。无论如何，这只是一个别名。

这是一个列表：

[http://msdn.microsoft.com/en-us/library/86792hfa(VS.71).aspx](http://msdn.microsoft.com/en-us/library/86792hfa(VS.71).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-15T22:25:18.257

使用反射，您可以使用`CSharpCodeProvider`（也存在于 .NET Core 2 中）获取“int”、“string”等，而不是完整的 CLR 类型名称。

还有其他 SO 帖子为此提供了代码示例：

[如何在 C# 中获取类型的原始名称？](https://stackoverflow.com/questions/4369737/how-can-i-get-the-primitive-name-of-a-type-in-c?noredirect=1&lq=1)

[C# - 通过反射获取简单类型的用户友好名称？](https://stackoverflow.com/questions/4615553/c-sharp-get-user-friendly-name-of-simple-types-through-reflection?noredirect=1&lq=1)

或者，您必须自己映射这些类型。如果您不介意第三方库，有一些库可以为您执行此操作。不要忘记可以为空的变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-13T23:34:18.493

可以使用一个简单的扩展方法来映射到 C# 关键字。这是代码：

[GetType 的 Ext 方法返回 Int 而不是 System.Int32](https://stackoverflow.com/a/56352803/1402498)

# java - 编译器为自动装箱生成什么代码？

> ID：408661
> 
> 赞同：32
> 
> 时间：2009-01-03T05:32:02.317
> 
> 标签：java, autoboxing

当 Java 编译器将原语自动装箱到包装类时，它会在幕后生成什么代码？我想它会调用：

*   包装器上的 valueOf() 方法
*   包装器的构造函数
*   还有什么魔法？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-01-03T05:40:09.367

您可以使用该`javap`工具亲自查看。编译以下代码：

```
public class AutoboxingTest
{
    public static void main(String []args)
    {
        Integer a = 3;
        int b = a;
    }
} 
```

编译和反汇编：

```
javac AutoboxingTest.java
javap -c AutoboxingTest 
```

输出是：

```
Compiled from "AutoboxingTest.java"
public class AutoboxingTest extends java.lang.Object{
public AutoboxingTest();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   iconst_3
   1:   invokestatic    #2; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
   4:   astore_1
   5:   aload_1
   6:   invokevirtual   #3; //Method java/lang/Integer.intValue:()I
   9:   istore_2
   10:  return

} 
```

因此，如您所见，自动装箱调用静态方法`Integer.valueOf()`，自动拆箱调用`intValue()`给定`Integer`对象。真的没有别的了——它只是语法糖。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-04T07:21:31.690

我想出了一个单元测试，证明调用 Integer.valueOf() 而不是包装器的构造函数。

```
import static org.junit.Assert.assertNotSame;
import static org.junit.Assert.assertSame;

import org.junit.Test;

public class Boxing {
    @Test
    public void boxing() {
        assertSame(5, 5);
        assertNotSame(1000, 1000);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-04T08:44:26.390

如果您查找[Integer#valueOf(int)](http://java.sun.com/javase/6/docs/api/java/lang/Integer.html#valueOf(int))的 API 文档，您会看到它是在 JDK 1.5 中添加的。所有包装器类型（还没有）都添加了类似的方法来支持自动装箱。如 JLS 中所述，对于某些类型有额外的要求：

> If the value *p* being boxed is `true`, `false`, a `byte`, a `char` in the range `\u0000` to `\u007f`, or an `int` or `short` number between `-128` and `127`, then let *r1* and *r2* be the results of any two boxing conversions of *p*. It is always the case that *r1* == *r2*. [§5.1.7](http://java.sun.com/docs/books/jls/third_edition/html/conversions.html#190697)

It's interesting to note that `long`s aren't subject to the same requirement, although Long values in the `-128..127` range are cached in Sun's implementation, just like the other integral types.

I also just discovered that in my copy of [The Java Programming Language](http://www.informit.com/title/0321349806?aid=9f15cdfa-4e22-40dc-bfc9-cdc6322be0fd), it says `char` values from `\u0000` to `\u00ff` are cached, but of course the upper limit per the spec is `\u007f` (and the Sun JDK conforms to the spec in this case).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-03T06:03:13.593

我建议您大量使用[jad](http://www.kpdus.com/jad.html)和反编译代码。你可以学到很多关于 java 实际在做什么的知识。

# c++ - C++ 中的堆栈、静态和堆

> ID：408670
> 
> 赞同：175
> 
> 时间：2009-01-03T05:41:58.270
> 
> 标签：c++, static, garbage-collection, stack, heap-memory

我搜索过，但我对这三个概念不是很了解。我什么时候必须使用动态分配（在堆中），它的真正优势是什么？静态和堆栈的问题是什么？我可以编写整个应用程序而不在堆中分配变量吗？

我听说其他语言包含“垃圾收集器”，因此您不必担心内存。垃圾收集器是做什么的？

你能做些什么来自己操作内存，而使用这个垃圾收集器是做不到的？

曾经有人用这个宣言对我说：

```
int * asafe=new int; 
```

我有一个“指向指针的指针”。这是什么意思？它是不同的：

```
asafe=new int; 
```

?

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2009-01-03T14:08:09.277

[有人问了一个类似的问题](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)，但没有问静力学。

## 什么是静态、堆和堆栈内存的总结：

*   静态变量基本上是全局变量，即使您无法全局访问它。通常在可执行文件本身中有一个地址。整个程序只有一个副本。无论您进入函数调用（或类）多少次（以及在多少个线程中！），该变量都指向相同的内存位置。

*   堆是一堆可以动态使用的内存。如果你想要一个 4kb 的对象，那么动态分配器将查看它在堆中的可用空间列表，挑选出一个 4kb 的块，然后给你。通常，动态内存分配器（malloc、new 等）从内存末尾开始并向后工作。

*   解释堆栈如何增长和缩小有点超出了这个答案的范围，但只要说你总是只从最后添加和删除就足够了。堆栈通常从高位开始并向下增长到较低的地址。当堆栈在中间某处遇到动态分配器时，您会耗尽内存（但指的是物理内存与虚拟内存和碎片）。多个线程将需要多个堆栈（进程通常为堆栈保留最小大小）。

## 当您想使用每一个时：

*   静态/全局对于您知道您将始终需要并且您知道您永远不想释放的内存很有用。（顺便说一句，嵌入式环境可能被认为只有静态内存......堆栈和堆是由第三种内存类型共享的已知地址空间的一部分：程序代码。程序通常会从它们的当他们需要链表之类的东西时使用静态内存.但无论如何,静态内存本身(缓冲区)本身并不是“分配的”,而是其他对象为此目的从缓冲区持有的内存中分配出来.你可以这样做在非嵌入式中也是如此，主机游戏会经常避开内置的动态内存机制，转而使用预设大小的缓冲区来严格控制分配过程。）

*   当您知道只要函数在范围内（在某处的堆栈上）时，堆栈变量很有用，您将希望变量保留。堆栈非常适合您所在的代码所需的变量，但在该代码之外不需要。当您访问资源（如文件）并希望资源在您离开该代码时自动消失时，它们也非常有用。

*   当您想要比上述更灵活时，堆分配（动态分配的内存）很有用。通常，调用函数来响应事件（用户单击“创建框”按钮）。正确的响应可能需要分配一个新对象（一个新的 Box 对象），该对象在函数退出后应该保留很长时间，因此它不能在堆栈上。但是你不知道在程序开始时你想要多少个盒子，所以它不能是静态的。

## 垃圾收集

我最近听到很多关于垃圾收集器有多棒的消息，所以也许有点反对的声音会有所帮助。

当性能不是一个大问题时，垃圾收集是一种很好的机制。我听说 GC 越来越好，越来越复杂，但事实是，您可能被迫接受性能损失（取决于用例）。如果你很懒惰，它仍然可能无法正常工作。在最好的情况下，垃圾收集器会意识到，当它意识到不再有对它的引用时，你的记忆就会消失（参见[引用计数](http://en.wikipedia.org/wiki/Reference_counting)）。但是，如果你有一个引用自身的对象（可能通过引用另一个引用回来的对象），那么单独的引用计数并不能表明内存可以被删除。在这种情况下，GC 需要查看整个参考汤，并确定是否存在任何仅由它们自己参考的岛。顺便说一句，我猜这是一个 O(n^2) 操作，但不管它是什么，如果你完全关心性能，它可能会变得很糟糕。（编辑：Martin B[指出](http://www.hpl.hp.com/personal/Hans_Boehm/gc/complexity.html)，对于相当有效的算法来说，它是 O(n)。如果您关心性能并且可以在没有垃圾收集的情况下在恒定时间内解除分配，那仍然是 O(n) 太多。）

就我个人而言，当我听到人们说 C++ 没有垃圾收集时，我认为这是 C++ 的一个特性，但我可能是少数。人们学习 C 和 C++ 编程最难的事情可能是指针以及如何正确处理它们的动态内存分配。其他一些语言，比如 Python，如果没有 GC，会很糟糕，所以我认为这归结为你想要从一种语言中得到什么。如果你想要可靠的性能，那么没有垃圾收集的 C++ 是我能想到的 Fortran 这边唯一的东西。如果您想要易于使用和训练轮子（以使您免于崩溃，而无需您学习“正确的”内存管理），请选择带有 GC 的东西。即使您知道如何很好地管理内存，它也会节省您可以花在优化其他代码上的时间。真的没有太多的性能损失了，但是如果你真的需要可靠的性能（并且能够准确地知道发生了什么，什么时候，在幕后），那么我会坚持使用 C++。我听说过的每个主要游戏引擎都使用 C++（如果不是 C 或汇编），这是有原因的。Python 等适用于脚本编写，但不适用于主游戏引擎。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2009-01-03T06:12:01.470

以下当然不是很精确。当你阅读它时，请带着一粒盐：）

嗯，你说的三件事是**自动的、静态的和动态的存储时长**，这与对象的寿命以及它们何时开始寿命有关。

* * *

### 自动存储时间

**您对短期**和**小**数据使用自动存储持续时间，这仅在某个块内**本地需要：**

```
if(some condition) {
    int a[3]; // array a has automatic storage duration
    fill_it(a);
    print_it(a);
} 
```

生命周期在我们退出块后立即结束，并在对象定义后立即开始。它们是最简单的存储持续时间，并且比特定的动态存储持续时间快得多。

* * *

### 静态存储时间

您对自由变量使用静态存储持续时间，如果它们的范围允许这样使用（命名空间范围），任何代码都可以随时访问这些自由变量，并且对于需要在其范围退出时延长其生命周期的局部变量（本地范围），以及对于需要由其类的所有对象（类范围）共享的成员变量。它们的生命周期取决于它们所处的范围。它们可以具有**命名空间范围**和**本地范围**以及**类范围**。他们俩的真实情况是，一旦他们的生命开始，生命**就在程序结束时结束**。这里有两个例子：

```
// static storage duration. in global namespace scope
string globalA; 
int main() {
    foo();
    foo();
}

void foo() {
    // static storage duration. in local scope
    static string localA;
    localA += "ab"
    cout << localA;
} 
```

程序打印`ababab`, 因为`localA`在退出其块时不会被破坏。您可以说具有本地范围的对象**在控制达到其定义时**开始生命周期。对于`localA`，它发生在输入函数的主体时。对于命名空间范围内的对象，生命周期从**程序启动**开始。对于类范围的静态对象也是如此：

```
class A {
    static string classScopeA;
};

string A::classScopeA;

A a, b; &a.classScopeA == &b.classScopeA == &A::classScopeA; 
```

如您所见，`classScopeA`它并不绑定到其类的特定对象，而是绑定到类本身。上面三个名字的地址都是一样的，都表示同一个对象。关于何时以及如何初始化静态对象有一些特殊的规则，但我们现在不用担心。这就是术语*静态初始化顺序惨败*的意思。

* * *

### 动态存储时长

最后的存储持续时间是动态的。如果您想让对象存在于另一个岛上，并且您想在该引用周围放置指针，则可以使用它。如果您的对象**很大**，并且如果您想创建只有在**运行**时才知道大小的数组，您也可以使用它们。由于这种灵活性，具有动态存储持续时间的对象是复杂且管理缓慢的。当发生适当的*新*运算符调用时，具有该动态持续时间的对象开始生命周期：

```
int main() {
    // the object that s points to has dynamic storage 
    // duration
    string *s = new string;
    // pass a pointer pointing to the object around. 
    // the object itself isn't touched
    foo(s);
    delete s;
}

void foo(string *s) {
    cout << s->size();
} 
```

只有当您为它们调用*delete*时，它​​的生命周期才会结束。如果您忘记了这一点，这些对象将永远不会结束生命周期。定义用户声明的构造函数的类对象不会调用它们的析构函数。具有动态存储持续时间的对象需要手动处理它们的生命周期和相关的内存资源。图书馆的存在是为了便于使用它们。可以使用智能指针为**特定对象建立****显式垃圾收集：**

 **```
int main() {
    shared_ptr<string> s(new string);
    foo(s);
}

void foo(shared_ptr<string> s) {
    cout << s->size();
} 
```

您不必关心调用 delete：如果引用该对象的最后一个指针超出范围，则共享 ptr 会为您执行此操作。共享 ptr 本身具有自动存储持续时间。因此*它的*生命周期是自动管理的，允许它检查是否应该删除其析构函数中指向的动态对象。有关 shared_ptr 参考，请参阅 boost 文档： http: [//www.boost.org/doc/libs/1_37_0/libs/smart_ptr/shared_ptr.htm](http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/shared_ptr.htm)

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2009-01-05T22:46:16.547

就像“简短的回答”一样，它已经被详细地说出来了：

*   **静态变量（类）**
    生命周期 = 程序运行时 (1)
    可见性 = 由访问修饰符确定（私有/受保护/公共）

*   **静态变量（全局范围）**
    生命周期 = 程序运行时 (1)
    可见性 = 在 (2) 中实例化它的编译单元

*   **堆变量**
    生存期 = 由您定义（新删除）
    可见性 = 由您定义（无论您将指针分配给什么）

*   **堆栈变量**
    可见性=从声明到退出范围
    生命周期=从声明到退出声明范围

* * *

(1) 更准确地说：从编译单元（即C/C++文件）的初始化直到反初始化。标准未定义编译单元的初始化顺序。

(2) 注意：如果在头文件中实例化一个静态变量，每个编译单元都会得到自己的副本。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-03T06:06:29.673

我敢肯定其中一位学究很快会提出更好的答案，但主要区别在于速度和大小。

堆

分配速度大大加快。它在 O(1) 中完成，因为它是在设置堆栈帧时分配的，因此它基本上是免费的。缺点是如果你用完了堆栈空间，你就会被束缚。您可以调整堆栈大小，但 IIRC 有大约 2MB 可供使用。此外，一旦您退出该函数，堆栈上的所有内容都会被清除。因此，稍后引用它可能会有问题。（指向堆栈分配对象的指针会导致错误。）

堆

分配速度要慢得多。但是你有GB可以玩，并指向。

垃圾收集器

垃圾收集器是一些在后台运行并释放内存的代码。当你在堆上分配内存时，很容易忘记释放它，这就是所谓的内存泄漏。随着时间的推移，您的应用程序消耗的内存会不断增长，直到崩溃。让垃圾收集器定期释放您不再需要的内存有助于消除此类错误。当然，这是有代价的，因为垃圾收集器会减慢速度。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-03T06:12:21.110

> 静态和堆栈的问题是什么？

“静态”分配的问题在于分配是在编译时进行的：您不能使用它来分配一些可变数量的数据，这些数据的数量直到运行时才知道。

在“堆栈”上分配的问题是，一旦执行分配的子例程返回，分配就会被破坏。

> 我可以编写整个应用程序而不在堆中分配变量吗？

也许但不是一个重要的、正常的、大型应用程序（但所谓的“嵌入式”程序可能在没有堆的情况下使用 C++ 的子集编写）。

> 垃圾收集器做什么？

它会持续监视您的数据（“标记和扫描”）以检测您的应用程序何时不再引用它。这对应用程序来说很方便，因为应用程序不需要释放数据……但垃圾收集器的计算成本可能很高。

垃圾收集器不是 C++ 编程的常见功能。

> 你能做些什么来自己操作内存，而使用这个垃圾收集器是做不到的？

了解确定性内存释放的 C++ 机制：

*   '静态'：从不释放
*   'stack'：一旦变量“超出范围”
*   'heap'：当指针被删除时（由应用程序显式删除，或在某个或其他子例程中隐式删除）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-03T06:09:58.293

当堆栈太“深”并且溢出可用于堆栈分配的内存时，堆栈内存分配（函数变量、局部变量）可能会出现问题。堆用于需要从多个线程或整个程序生命周期访问的对象。您可以在不使用堆的情况下编写整个程序。

如果没有垃圾收集器，您可以很容易地泄漏内存，但您也可以指定何时释放对象和内存。我在运行 GC 时遇到了 Java 的问题，并且我有一个实时进程，因为 GC 是一个独占线程（没有其他线程可以运行）。因此，如果性能至关重要并且您可以保证没有泄漏的对象，那么不使用 GC 是非常有帮助的。否则，当您的应用程序消耗内存并且您必须追踪泄漏源时，它只会让您讨厌生活。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-03T06:36:24.260

如果您的程序不知道要分配多少内存（因此您不能使用堆栈变量）怎么办。说链表，列表可以在不知道它的大小的情况下增长。因此，当您不知道要向其中插入多少元素时，在堆上分配对于链表来说是有意义的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-22T13:06:52.037

GC 在某些情况下的优势是在其他情况下令人烦恼。对 GC 的依赖鼓励不要过多考虑它。从理论上讲，等到“空闲”时间或绝对必须等到它会窃取带宽并导致您的应用程序响应延迟。

但你不必“不去想它”。就像多线程应用程序中的其他所有内容一样，当您可以让步时，您就可以让步。例如，在 .Net 中，可以请求 GC；通过这样做，您可以更频繁地运行较短的 GC，而不是较不频繁地运行较长时间的 GC，并分散与此开销相关的延迟。

但这违背了 GC 的主要吸引力，它似乎“鼓励不必考虑太多，因为它是自动的”。

如果您在 GC 流行之前第一次接触编程并且对 malloc/free 和 new/delete 感到满意，那么您甚至可能会发现 GC 有点烦人和/或不信任（因为有人可能不信任 '优化”，它有一个曲折的历史。）许多应用程序容忍随机延迟。但是对于那些随机延迟不太可接受的应用程序，一个常见的反应是避开 GC 环境并朝着纯非托管代码的方向发展（或者上帝保佑，一种长期垂死的艺术，汇编语言）。

前段时间我在这里有一个暑期学生，一个实习生，聪明的孩子，在 GC 上断了奶。他非常坚信 GC 的优越性，以至于即使在非托管 C/C++ 中进行编程时，他也拒绝遵循 malloc/free new/delete 模型，因为引用的话，“你不应该在现代编程语言中这样做。” 而且你知道？对于小型、短时间运行的应用程序，您确实可以摆脱这种情况，但对于长时间运行的高性能应用程序则不行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-06T04:50:32.443

堆栈是编译器分配的内存，当我们编译程序时，默认编译器会从 OS 分配一些内存（我们可以从 IDE 中的编译器设置中更改设置），而 OS 是为您提供内存的内存，这取决于在系统上的许多可用内存和许多其他事情上，当我们声明他们复制的变量（作为形式引用）时分配到堆栈内存，这些变量被推送到堆栈默认情况下它们遵循一些命名约定它在 Visual Studios 中的 CDECL例如：中缀表示法：c=a+b；堆栈推入是从右到左推入，b 到堆栈，运算符，a 到堆栈和那些 i,ec 到堆栈的结果。在前缀表示法中： =+cab 这里所有的变量都被推送到第一个堆栈（从右到左），然后进行操作。编译器分配的内存是固定的。因此，假设为我们的应用程序分配了 1MB 内存，假设变量使用了 700kb 内存（所有局部变量都被推送到堆栈，除非它们是动态分配的），所以剩余的 324kb 内存分配给堆。而且这个栈的生命周期更短，当函数的作用域结束时，这些栈就会被清除。

# asp.net - 如何在没有 SqlDataSource 的情况下将 mysql 连接到 DevExpress ASPxScheduler

> ID：408675
> 
> 赞同：1
> 
> 时间：2009-01-03T05:51:12.807
> 
> 标签：asp.net, mysql, devexpress, sqldatasource

我有一个我正在查看的 ASP.net 项目，他们想使用 MySQL。我习惯了 SQL 服务器，但使用 mySQL 应该不是问题。

通常，该控件希望绑定到 SqlDataSource，但 MySQL 不提供该控件（来自此站点上的其他帖子）。

连接 MySQL 和 DevExpress ASPxScheduler 以便创建约会的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T06:05:36.240

为什么不使用 ObjectDataSource 并编写数据层？或者使用 LLBLGen，我认为它适用于 MySQL。我看到的一个警告是 MySQL ODBC 和 ADO 驱动程序存在元数据问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-07T03:35:09.367

我最终使用了 objectdatasource 和 ObjectCreated 方法，并编写了数据层以将记录插入 mysql 数据库。我已经包含了我的代码，以防有人需要一些逻辑帮助。

```
protected void appointmentsDataSource_ObjectCreated(object sender, ObjectDataSourceEventArgs e)
    {
        e.ObjectInstance = new CustomEventDataSource(GetCustomEvents());
    }

  public void InsertAppointment()
    {

        //need to reformat the dates
        string tempStartDate;
        string tempStartMinutes;

        if (appointmentobject.Start.Minute.ToString().Length == 1)
        {
            tempStartMinutes = "0" + appointmentobject.Start.Minute.ToString();
        }
        else
        {
            tempStartMinutes = appointmentobject.Start.Minute.ToString();
        }

        tempStartDate = AppointmentObject.Start.Year + "-"
            + AppointmentObject.Start.Month + "-"
            + appointmentobject.Start.Day + " "
            + appointmentobject.Start.Hour + ":"
            + tempStartMinutes;

        string tempEndDate;
        string tempEndMinutes;

        if (appointmentobject.End.Minute.ToString().Length == 1)
        {
            tempEndMinutes = "0" + appointmentobject.End.Minute.ToString();
        }
        else
        {
            tempEndMinutes = appointmentobject.End.Minute.ToString();
        }

        tempEndDate = AppointmentObject.End.Year + "-"
            + AppointmentObject.End.Month + "-"
            + appointmentobject.End.Day + " "
            + appointmentobject.End.Hour + ":"
            + tempEndMinutes;

        //TODO Add CustomField : Need to add to this Insert Statement

        //Change the appointment subject
        string NewSubject = AppointmentObject.CustomFields["fldFirstName"]
            + ", " + AppointmentObject.CustomFields["fldLastName"]
            + ", " + AppointmentObject.CustomFields["fldClassID"]
            + ", " + AppointmentObject.CustomFields["fldPhoneNumberDay"];

        string mySQLQueryString = @"INSERT INTO appointment (StartDate,EndDate,Subject,Status,Description,label,location,Type,FirstName,
            LastName,PhoneNumberDay,PhoneNumberEvening,DriversLicenseNumber,Email,RentalCar,Payment,ConfirmationNumber,
            PermitNumber,ClassID,CreateDate,CreateUser,NoticeToReport) 
            VALUES('" + tempStartDate + "','"
            + tempEndDate + "', '"
            //+ AppointmentObject.Subject + "',"
            + NewSubject + "',"
            + AppointmentObject.StatusId + ",'"
            + AppointmentObject.Description + "',"
            + AppointmentObject.LabelId + ", '"
            + AppointmentObject.Location + "',"
            + "0, '" //type
            + AppointmentObject.CustomFields["fldFirstName"] + "','" 
            + AppointmentObject.CustomFields["fldLastName"] + "','"
            + AppointmentObject.CustomFields["fldPhoneNumberDay"] + "','"
            + AppointmentObject.CustomFields["fldPhoneNumberEvening"] + "','"
            + AppointmentObject.CustomFields["fldDriversLicenseNumber"] + "','"
            + AppointmentObject.CustomFields["fldEmail"] + "',"
            + AppointmentObject.CustomFields["fldRentalCar"] + ","
            + AppointmentObject.CustomFields["fldPayment"] + ",'"
            + AppointmentObject.CustomFields["fldConfirmationNumber"] + "','"
            + AppointmentObject.CustomFields["fldPermitNumber"] + "',"
            + AppointmentObject.CustomFields["fldClassID"] + ", '"
            //ignore create date for now.
            //+ AppointmentObject.CustomFields["fldCreateDate"] + "', '"
            + "2009-01-01 12:00', '"
            + AppointmentObject.CustomFields["fldCreateUser"] + "', "
            + AppointmentObject.CustomFields["fldNoticeToReport"] + ")";

        MySqlConnections test = new MySqlConnections();
        test.InsertRow(mySQLQueryString);

    }

public class MySqlConnections
{
    private static string DriverConnectionString = "Database=driverexam;Data Source=localhost;User Id=ART;Password=art01";

    public DataSet SelectRows(DataSet dataset, string query, string tablename)
    {
        MySqlConnection conn = new MySqlConnection(DriverConnectionString);

        MySqlDataAdapter adapter = new MySqlDataAdapter();
        adapter.SelectCommand = new MySqlCommand(query, conn);
        adapter.Fill(dataset, tablename);

        conn.Close();
        return dataset;
    }

    public bool InsertRow(string query)
    {
     //   MySqlConnection conn = new MySqlConnection(DriverConnectionString);

        MySqlConnection conn = new MySqlConnection();
        MySqlCommand cmd = new MySqlCommand();

        conn.ConnectionString = DriverConnectionString;

        try
        {
            conn.Open();
            cmd.Connection = conn;
            cmd.CommandText = query;
            cmd.ExecuteNonQuery();
            conn.Close();
            Console.WriteLine("Success Occurred ");
        } //end of try
        catch(Exception ex)
        {
            Console.WriteLine("Error Occurred - " + ex.Message);
        }

        return true;
    }
} 
```

# ruby-on-rails - 弄清楚什么是 Ruby on Rails

> ID：408703
> 
> 赞同：1
> 
> 时间：2009-01-03T06:18:15.310
> 
> 标签：ruby-on-rails, frameworks

RoR 对 Ruby 是否等同于 .NET 框架对 VB.NET？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-03T06:20:40.517

不。

RoR 是一个快速的 Web 应用程序开发框架。

.NET 是一种公共语言运行时，VB.NET 编译为 VB 代码的 CLR。

RoR 相当于 ASP.NET MVC 框架（具有大量时间和魔法以及一种非常灵活的语言）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T06:20:15.090

RoR 是一个用于制作网站的框架（一组库）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T07:39:28.580

没有！

你可以通过这个问题来了解[什么是 Ruby on Rails，为什么它如此出名？](https://stackoverflow.com/questions/323083)

[此答案](https://stackoverflow.com/questions/323083/what-is-ruby-on-rails-and-why-is-it-so-famous#323211)包含著名的“使用 Ruby on Rails 在 15 分钟内创建博客”的链接，观看起来非常有趣。展示了 RoR 的全部内容以及它用于构建应用程序的方式。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-01-03T10:02:19.320

RoR 用于开发动态 Web 应用程序 - 否则将需要 php。但是使用 RoR，它非常容易为大型 Web 应用程序编写代码，包括对其进行 ajaxifying。我说它非常简单和快速，因为 RoR 是面向对象的。

# winapi - How do you retrieve stylus pressure information on windows?

> ID：408712
> 
> 赞同：6
> 
> 时间：2009-01-03T06:31:45.610
> 
> 标签：winapi, tablet, stylus-pen

Is anyone aware of a sane way to get tablet/stylus pressure information on Windows?

It's possible to distinguish stylus from mouse with ::GetMessageExtraInfo, but you can't get any more information beyond that. I also found the WinTab API in a out of the way corner of the Wacom site, but that's not part of windows as far as i can tell, and has a completely distinct event/messaging system from the message queue.

Given all I want is the most basic pressure information surely there is a standard Win32/COM API, is anyone aware of what it might be?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-20T16:11:34.433

**更新：**
*自从我最初提供这个答案以来已经有很多年了，但是 wintab 已经成为事实上的标准，并且 Ntrig 或多或少地折叠了，最终构建了一个包装器以允许通过这个数字化仪访问 wintab API。
( [http://www.tabletpcbuzz.com/showthread.php?37547-N-trig-Posts-WinTAB-Support-Driver](http://www.tabletpcbuzz.com/showthread.php?37547-N-trig-Posts-WinTAB-Support-Driver) )*

这是一个相当晚的回应，但最近我和我的妻子购买了一台戴尔 XT 平板电脑，事实证明它实际上使用了 NTrig，这是一套使用 Ink 的界面，Windows XP 平板电脑版附带的公认的新 Windows API，然后是 SP 2 和之后的所有版本。

许多 Wacom 平板电脑和其他平板电脑使用 Wintab API，该 API 当前未开放，也未真正允许使用。据我所知，维护它的人非常高兴。

所以这取决于你使用的是什么类型的平板电脑，以及你为它安装的驱动程序。在我的偏见中，您应该使用 Ink，因为它提供（或至少通过 NTrig 和 Windows 7 将提供）多点触控功能，并且很可能成为平板电脑界面的新标准。但截至目前，NTrig 设备并未将其压力和角度信息转换为常见的基于 Wintab 的应用程序，例如 Photoshop 或 Corel Painter。这些应用程序往往需要至少对 Microsoft 的 Tablet API 提供一些支持才能正常运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-09T02:06:07.057

您需要使用 Tablet PC Pen/Ink API。API 的 COM 版本位于 InkObj.dll 中。这是文档的起点：http: [//msdn.microsoft.com/en-us/library/ms700664.aspx](http://msdn.microsoft.com/en-us/library/ms700664.aspx)

如果我没记错的话，InkObj.dll 在 Windows XP SP2 和所有更高版本的 Windows 客户端操作系统上都可用，无论机器是否是 Tablet PC。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-08T15:49:37.997

当前执行此操作的方法是处理 WM_POINTERnnn 消息。请注意，这适用于 Win 8 及更高版本。

请注意，您将获得触摸和笔的这些消息，因此您需要知道指针类型才能测试笔。WNDPROC 收到的 WM_POINTERnnnn 消息（例如 WM_POINTERUPDATE 和其他消息）的 WPARAM 包含指针 id，您需要它来请求更多信息。根据经验，我发现 WM_POINTERUPDATE 会导致包含压力数据的信息，而如果指针标志指示向下/向上，则没有压力信息。

```
const WORD wid = GET_POINTERID_WPARAM(wParam);
POINTER_INFO piTemp = {NULL};
GetPointerInfo(wid, &piTemp);
if (piTemp.pointerType == PT_PEN
{
    UINT32 entries = 0;
    UINT32 pointers = 0;

    GetPointerFramePenInfoHistory(wid, &entries, &pointers, NULL); // how many
    // TODO, allocate space needed for the info, process the data in a loop to retrieve it, test pointerInfo.pointerFlags for down/up/update.

} 
```

一旦你知道你正在处理笔，你可以从 POINTER_PEN_INFO 结构中获取压力信息。

这类似于处理触摸，但对于触摸，您需要手势识别和惯性。有一个 Microsoft 示例说明如何使用这些函数。

这是构建谈话的一部分： [https ://channel9.msdn.com/Events/Build/2013/4-022](https://channel9.msdn.com/Events/Build/2013/4-022)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-24T22:40:59.163

如果使用[UWP](https://en.wikipedia.org/wiki/Universal_Windows_Platform) [Windows 运行时](https://en.wikipedia.org/wiki/Windows_Runtime)，那么它非常简单。PointerEventArgs事件似乎包含所有必要的数据[。](https://docs.microsoft.com/en-us/uwp/api/windows.ui.core.pointereventargs?view=winrt-19041)

来自 Visual Studio 2019 的已修改[核心应用 (C++/WinRT)](https://docs.microsoft.com/en-us/windows/uwp/cpp-and-winrt-apis/intro-to-using-cpp-with-winrt#core-app-cwinrt)模板项目片段：

```
void OnPointerMoved(IInspectable const &, PointerEventArgs const &args)
{
    if (m_selected)
    {
        float2 const point = args.CurrentPoint().Position();

        m_selected.Offset(
            {
                point.x + m_offset.x,
                point.y + m_offset.y,
                0.0f
            });

        // (new!) Change sprite color based on pen pressure and tilt
        auto sprite = m_selected.as<SpriteVisual>();

        auto const props = args.CurrentPoint().Properties();
        auto const pressure = props.Pressure();
        auto const orientation = props.Orientation() / 360.0f;
        auto const tiltx = (props.XTilt() + 90) / 180.0f;
        auto const tilty = (props.YTilt() + 90) / 180.0f;

        Compositor compositor = m_visuals.Compositor();
        sprite.Brush(compositor.CreateColorBrush({
            (uint8_t)(pressure * 0xFF),
            (uint8_t)(tiltx * 0xFF),
            (uint8_t)(tilty * 0xFF),
            (uint8_t)(orientation * 0xFF)
            }));
    }
} 
```

类似的代码可能适用于 C#、JavaScript 等。

# objective-c - How can I get a value from UITextField in UIAlertView?

> ID：408713
> 
> 赞同：2
> 
> 时间：2009-01-03T06:33:40.757
> 
> 标签：objective-c, cocos2d-iphone

I have Used in cocos2d game engine. this is my code:

```
-(void)timed1: (id)sender {
    UIAlertView *dialog = [[[UIAlertView alloc] init] retain];
    [dialog setDelegate:self];
    [dialog setTitle:@"Enter Time:"];
    [dialog setMessage:@" "];
    UITextField *nameField = [[UITextField alloc] initWithFrame:CGRectMake(20.0, 45.0, 245.0, 25.0)];
    [dialog addSubview:nameField];
    [nameField setBackgroundColor:[UIColor whiteColor]];
    CGAffineTransform moveUp = CGAffineTransformMakeTranslation(0.0, 70.0);
    [dialog setTransform: moveUp];
    [dialog addButtonWithTitle:@"Done"];
    [dialog addButtonWithTitle:@"Cancel"];

    nameField.clearButtonMode = UITextFieldViewModeWhileEditing;
    nameField.keyboardType = UIKeyboardTypeNumbersAndPunctuation;

        //timeStatus is a int type global variable //   
     timeStatus =[nameField.text intValue];  //** this line not working**//  

    [nameField release];
    [dialog show];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T08:37:00.787

您无法获得值的原因是该函数将在用户键入任何内容之前退出！当您调用 [dialog show] 时，对话框会显示给用户，然后他们可以在其中输入文本。

您应该等到用户选择一个按钮，这将触发您的委托功能，然后访问文本字段属性。

请注意，要执行此操作，您需要保留指向您添加的 UITextField 对象的指针（最简单），或者在子视图中再次找到它并进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T06:40:33.037

Release nameField later, and get the text property from there.

# mod-rewrite - 关于 mod_rewrite 表达式的一点帮助

> ID：408734
> 
> 赞同：1
> 
> 时间：2009-01-03T06:50:16.073
> 
> 标签：mod-rewrite

我需要快速修复我们拥有的 drupal 的 mod_rewrite 表达式

```
 RewriteCond %{REQUEST_URI} !(\.gif)|(\.jpg)|(\.png)|(\.css)|(\.js)|(\.php)$ 
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

但是我也需要在 get 中重定向子域的值，所以我需要一些可以提供的东西：

```
 RewriteCond %{REQUEST_URI} !(\.gif)|(\.jpg)|(\.png)|(\.css)|(\.js)|(\.php)$ 
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?subdomain=THE SUBDOMAIN HERE&q=$1 [L,QSA] 
```

不知道怎么弄，求大神帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-03T07:50:35.280

再试一次，由于某种原因，我的代码无法正确呈现。

```
RewriteCond %{REQUEST_URI} !(\.gif)|(\.jpg)|(\.png)|(\.css)|(\.js)|(\.php)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteCond %{HTTP_HOST} ^(.*)\.mydomain\.com$
RewriteRule ^(.*) index.php?subdomain=%1&q=1 [L,QSA] 
```

[根据我在这里](http://forums.digitalpoint.com/showthread.php?t=33868)找到的一些论坛帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T06:55:17.343

您实际上并不需要查询字符串中的子域。

子域可以在 PHP 中的 $_SERVER['SERVER_NAME'] 中找到。

[PHP 文档](http://no.php.net/manual/en/reserved.variables.server.php)说：

```
'SERVER_NAME'
    The name of the server host under which the
    current script is executing. If the script
    is running on a virtual host, this will be
    the value defined for that virtual host. 
```

# javascript - Javascript file uploads

> ID：408735
> 
> 赞同：8
> 
> 时间：2009-01-03T06:52:17.473
> 
> 标签：javascript

Any alternate thing in JavaScript to make a file upload control ?

* * *

actually the problem was, i am creating file upload control dynamically using htmlwriter, and when i use `request.form[fileuplodctrl].tostring()` , i am getting only the file name not path...

can any one suggest me any other ways to get full file path :)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-03T06:54:46.393

以下是一些替代方案：

*   [YUI 上传器](http://developer.yahoo.com/yui/uploader/)
*   [jqUploader](http://www.pixeline.be/experiments/jqUploader/)（jQuery 插件）
*   [jQuery 多文件上传器](http://www.fyneworks.com/jquery/multiple-file-upload/)（jQuery 插件）
*   [道场文件上传器](https://user.sitepen.com/~mwilcox/dojotoolkit/demos/uploader/demo.html)
*   [j上传](http://jupload.sourceforge.net/)（小程序）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T15:05:40.003

据我所知，不可能使用纯 JavaScript 上传文件。您总是需要一些像 swf 电影或 java 小程序（可能它也适用于 silverlight 应用程序）。如果您不喜欢自己编写，请使用上一个答案中的现有答案（[Javascript 文件上传](https://stackoverflow.com/questions/408735/javascript-file-uploads#408736)）。

# visual-studio-2008 - 如何让 F12 进入带有 VS 2008 的 Vista x64 上的调试器？

> ID：408744
> 
> 赞同：5
> 
> 时间：2009-01-03T07:10:30.900
> 
> 标签：visual-studio-2008, 64-bit, windows-vista

F12 是跟踪 UI 阻塞操作的奇迹，但我不知道如何使它与 VS 2008 和托管代码一起工作。

帮助！或不...

编辑：事实证明它在Vista x64上的VS 2005中都不起作用，所以我猜它要么扩大要么缩小，这取决于你的观点:(

微信

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-15T14:36:41.377

这是一种替代解决方案，即使应用程序“咬”，也可以随时保持按 F12 的便利性，而无需根据我的第一个答案切换到 Visual Studio 并调用“全部中断”命令。

不幸的是，这个解决方案需要向我们想要使用 F12 闯入的应用程序添加一些额外的代码。这个特殊的调试代码可以使用例如 DEBUG 符号有条件地编译，这样 F12 功能在发布版本中不可用。

该解决方案通过创建后台线程来工作；然后线程注册一个全局键盘钩子并启动一个无格式消息循环。下面的示例应用程序在主 UI 线程上创建了一个带有单个按钮“Sleep”的表单。单击按钮时，主 UI 线程将通过休眠 10 秒（Thread.Sleep）来锁定，以模拟应用程序“咬”。

要测试 F12 功能，首先单击“睡眠”按钮，然后按 F12 - 即使主 UI 线程被阻塞，程序也会立即进入调试器。以下屏幕截图显示了 F12 之后我的机器 (Vista x64) 上当前正在运行的线程：

[F12 上的活动线程 http://img242.imageshack.us/img242/5189/f12threadsre9.png](http://img242.imageshack.us/img242/5189/f12threadsre9.png)

如您所见，主程序仍然在“GoToSleep”方法中，而在我们创建的后台线程中调用了全局钩子。

全局挂钩代码基于[Stephen Toub 的文章](http://blogs.msdn.com/toub/archive/2006/05/03/589423.aspx)。

现在实现：

```
using System;
using System.Diagnostics;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Threading;
using System.Windows.Forms;

namespace KeyboardHook
{

    public sealed class SimpleKeyboardHook : IDisposable
    {
        public SimpleKeyboardHook(Action<Keys> handler)
        {
            if (null == handler) { throw new ArgumentNullException("handler"); }
            this._handler = handler;
            var t = new Thread(this.ListenerThread) { IsBackground = true, Name = "KeyboardListener" };
            t.Start();
        }

        public void Dispose()
        {
            if (!this._disposed)
            {
                UnhookWindowsHookEx(this._id);
                this._disposed = true;
                GC.SuppressFinalize(this);
            }
        }

        public static void BreakOnF12(Keys keys)
        {
            if (keys == Keys.F12)
            {
                Debugger.Break();
            }
        }

        private void ListenerThread()
        {
            using (var currentProcess = Process.GetCurrentProcess())
            using (var mainModule = currentProcess.MainModule)
            {
                if (null == mainModule) { throw new InvalidOperationException("Unable to determine main module for the current process"); }

                this._id = SetWindowsHookEx(
                    WH_KEYBOARD_LL,
                    this.HookCallback,
                    GetModuleHandle(mainModule.ModuleName), 0);
            }

            Application.Run();
        }

        private IntPtr HookCallback(int nCode, IntPtr wParam, IntPtr lParam)
        {
            if (nCode >= 0 && wParam == (IntPtr)WM_KEYDOWN)
            {
                var vkCode = Marshal.ReadInt32(lParam);
                this._handler((Keys)vkCode);
            }
            return CallNextHookEx(this._id, nCode, wParam, lParam);
        }

        private delegate IntPtr LowLevelKeyboardProc(int nCode, IntPtr wParam, IntPtr lParam);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr SetWindowsHookEx(int idHook,
            LowLevelKeyboardProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
            IntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);

        private const int WH_KEYBOARD_LL = 13;
        private const int WM_KEYDOWN = 0x0100;
        private IntPtr _id;
        private readonly Action<Keys> _handler;
        private volatile bool _disposed;
    }

    static class Program
    {
        private static void GoToSleep(object sender, EventArgs args)
        {
            Thread.Sleep(10000);
        }

        [STAThread]
        static void Main()
        {
            using (new SimpleKeyboardHook(SimpleKeyboardHook.BreakOnF12))
            {
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);

                var form = new Form { Text = "Sleepy form", Size = new Size(160,80), Padding = new Padding(6) };
                var btn = new Button { Dock = DockStyle.Fill, Text = "Sleep", Location = new Point(10, 10) };
                btn.Click += GoToSleep;
                form.Controls.Add(btn);
                Application.Run(form);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-14T16:51:51.290

虽然我不知道 x86 Windows XP 中的 F12 功能，但以下说明描述了我如何闯入已经运行的程序（该技术适用于 x86 和 x64 Windows 操作系统）。

首先，运行 Visual Studio（2008、2005、2003... 并不重要，因为它们都支持附加到正在运行的进程；它们从终极调试器 WinDbg 继承了此功能，可在[Debugging Tools for Windows](http://www.microsoft.com/whdc/devtools/debugging/default.mspx)中获得）

从工具菜单中，选择“附加到进程...”命令：

[附加到处理菜单 http://img297.imageshack.us/img297/2369/attachmenuhe7.png](http://img297.imageshack.us/img297/2369/attachmenuhe7.png)

我发现此功能非常有用，我什至将此命令添加到 Visual Studio 主工具栏：

[附加到工具栏中的进程 http://img440.imageshack.us/img440/1232/vstoolbarmainaw4.png](http://img440.imageshack.us/img440/1232/vstoolbarmainaw4.png)

将显示“附加到进程”对话框。它将列出所有当前正在运行的进程（如果您的进程未列出，请尝试在对话框底部启用“显示所有用户的进程”或“显示所有会话中的进程”复选标记）。只需选择您想要进入的进程并点击“附加”按钮：

[附加到进程对话框 http://img231.imageshack.us/img231/8415/vsdialogattachoq5.png](http://img231.imageshack.us/img231/8415/vsdialogattachoq5.png)

*注意：调试器可以在不同的模式下工作，调试本机代码、托管代码、脚本（在 Internet Explorer 中）甚至 T-SQL 和 WF 工作流。无论您选择什么，“附加到进程”对话框都会在您下次打开时记住它们。*

在 Visual Studio 成功附加到您尝试闯入的进程后，使用 Debug -> Break All 命令停止此进程中的所有线程：

[打破所有菜单 http://img297.imageshack.us/img297/8579/vsmenubreakallrb1.png](http://img297.imageshack.us/img297/8579/vsmenubreakallrb1.png)

此命令也可从调试工具栏中获得：

[打破所有工具栏 http://img440.imageshack.us/img440/248/vstoolbardebugwt4.png](http://img440.imageshack.us/img440/248/vstoolbardebugwt4.png)

中断后，您可以探索所有当前正在运行的线程、它们的堆栈、内存、局部和全局变量等。这应该允许您对长时间运行的操作进行故障排除，即使是在您使用的 F12 功能不可用的 x64 操作系统中.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T06:57:48.490

我很确定您必须安装并运行内核模式调试器才能使其正常工作。我已经在许多不同的机器上安装了各种版本的 Visual Studio，而且我从来没有让`F12`密钥做任何特别的事情。我认为它与 VS 本身没有任何关系，您只是将其关联起来，因为您碰巧在机器上*也*安装了 VS。

我建议下载并安装作为[Windows 软件开发工具包 (SDK)](http://msdn.microsoft.com/en-US/windows/hardware/hh852363)一部分的“Windows 调试工具”包。（或者，如果您是驱动程序开发人员，您可能更喜欢下载 Windows 驱动程序工具包 (WDK)，其中还包括这些工具。）确保在安装过程中选择“调试工具”框。如果这是您要安装的唯一工具，您可以选中该框并取消选中所有其他工具；它们不是必需的组件。

这将确保您的机器上安装了内核调试器 (KD) 和 NTKD 变体，以及 WinDbg GUI。这些工具都可用于 x86 和 x64 处理器。

在此处查看更多信息：[Windows 调试](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551063.aspx)。

# multithreading - 忙碌的游标 - 为什么？

> ID：408747
> 
> 赞同：9
> 
> 时间：2009-01-03T07:21:33.217
> 
> 标签：multithreading, user-interface, asynchronous, busy-cursor

谁能给我一个他们认为繁忙的游标是合理的场景？我觉得*从用户的角度来看*它们总是一个坏主意。澄清：繁忙的光标是指当用户无法再与应用程序交互时，他们只能移动沙漏鼠标指针并吹口哨。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-03T18:58:13.483

总之，我认为只有在等待间隔非常短（2 秒或更短）并且执行多线程的认知开销可能会导致应用程序不太稳定时，才应该阻止用户在您的应用程序中执行操作。有关更多详细信息，请参见下文。

对于持续时间**少于 0.1 秒**的操作，您通常不需要进行异步操作，甚至不需要显示沙漏。

对于持续时间**在 0.1 到 2 秒之间**的操作，您通常不需要进行异步操作。只需将光标切换到沙漏，然后进行内联工作。视觉提示足以让最终用户满意。

如果最终用户启动一个只需要几秒钟的操作，他就处于一种“专注”的思维模式，在这种模式下，他在潜意识里等待他的行动结果，而且他还没有把他的有意识的大脑关掉那个特别的焦点。因此，在如此短的时间内阻止用户界面（使用视觉指示器表明已发生这种情况）是完全可以接受的。

对于持续**时间超过 2 秒**的操作，您通常应该采用异步方式。但即便如此，您也应该提供某种进度指示器。人们发现在没有刺激的情况下很难集中注意力，而 2 秒的时间足以让最终用户自然地从有意识的“专注”活动转移到有意识的“等待”活动。

当他们处于等待模式时，进度指示器为他们提供了一些东西来占据他们，并且还提供了确定他们何时将切换回他们的“专注”上下文的方法。视觉提示为大脑提供了一些东西来构建这些上下文切换，而不需要太多有意识的思考。

混乱的地方是您的操作通常**在 X 时间内完成，但偶尔需要 Y**，其中 Y 远大于 X。这可能发生在远程操作中，例如通过网络到达。那时您可能需要上述操作的组合。例如，考虑在前 2 秒显示一个鸡蛋计时器，然后才引入进度指示器。这避免了在没有中间步骤的情况下将最终用户从“集中”上下文直接切换到“等待”上下文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-03T13:11:14.603

重要的并不是繁忙的光标，但绝对重要的是，*始终*向用户反馈正在发生的事情以响应他们的输入。重要的是要意识到，没有忙碌的光标、进度条、颤动器、闪烁的按钮、旋转的指挥棒、跳舞的小丑……什么都没有关系——如果你没有它，而电脑只是坐在那里无所事事，计算机在用户看来已损坏。

每个用户操作的即时反馈非常重要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-03T07:27:53.923

当用户在操作完成之前不能做任何事情时，您会显示一个忙碌的光标 - 包括退出应用程序。

我觉得有趣的是，您在 Web 浏览器中看不到繁忙的光标——也许这就是人们如此喜欢它们的原因。

不，等等，我有更好的答案。 **当计算机正在思考时，您会显示一个忙碌的光标**。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-03T09:01:23.453

我认为您可能是对的：在一个体面的异步应用程序中，您永远不需要显示忙碌的光标。即使大的最后操作正在完成，用户也总是可以**做某事。**

也就是说，**有时**像 Netbeans 或 Eclipse 甚至 Visual Studio 这样的 Java 应用程序会挂起，没有忙碌的光标，也没有希望。但在这种情况下，繁忙的光标可能也无济于事......但我认为你是对的：繁忙的光标来自应用程序的非多线程时代。例如，在 Flex 应用程序中，一切都是自动事件驱动的回调，因此设置繁忙的光标毫无意义（当然，尽管可能）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-03T07:38:29.830

当一个人在网络浏览器上点击刷新按钮时，忙碌的光标必须立即出现，告诉用户让他们知道页面正在加载。

我认为是[Don't Make Me Think](http://www.sensible.com/)说人类可容忍的加载时间为零秒。

[谷歌](http://code.google.com/intl/en/android/toolbox/philosophy.html)说：

> **响应式**
> 
> 编写赢得世界上所有性能测试的代码是可能的，但是当用户尝试使用它时，仍然会激怒他们。这些是响应不够快的应用程序——那些感觉迟钝、长时间挂起或冻结，或者处理输入时间过长的应用程序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-03T08:51:02.023

它有两个目的：

1.  向用户指示正在发生的事情。
2.  向用户表明现在什么都不能做。

忙碌的光标是比没有更好的操作信号。对于更持久的操作，应该使用更好的东西。例如，在检索页面时浏览器仍然可以运行，甚至还有一个按钮可以停止操作。由于用户界面功能齐全，因此无需使用忙碌光标。然而，即使在过渡阶段的这种情况下，例如开始操作或停止操作时，也可以使用繁忙光标。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-03T07:26:18.543

我尝试将它们用于可能需要 0.5 到 3 秒的任何操作，对于更长的操作，我认为应该使用具有足够信息的进度指示器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-03T14:01:30.557

我至少在 Fedora 8 中注意到，当应用程序设置“忙碌”光标时，实际上会显示“忙碌互动”光标。我猜这是因为系统仍然响应鼠标输入（如拖动窗口等）。顺便说一句，在 linux 上明确选择“忙碌的交互”光标很棘手： [http ://www.pixelbeat.org/programming/x_cursors/](http://www.pixelbeat.org/programming/x_cursors/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-03T15:18:59.620

我相信繁忙的光标唯一能做的就是告诉用户......

> 我并没有完全无视你，我只是在做其他可能需要一段时间的事情

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-03T15:30:28.207

我只会将它们用于快速完成任务，比如在半秒内完成。如果有任何事情需要更长的时间，那么应该弹出一个进度对话框，或者一个进度条应该出现在状态栏或界面的其他地方。

如果需要太长时间才能完成，用户应该始终能够取消操作。

作为对评论的回应，忙碌光标仅在半秒左右可见，因为一旦进度对话框启动，它应该变为那些“半忙碌”光标之一，或者只是普通的箭头光标。

除非在极端情况下，否则您应该避免使用繁忙的光标，如果您认为需要一个，那么请三思而后行重新设计。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-03T20:06:39.087

虽然绝对有必要提醒用户您的应用程序正在执行某些操作，但繁忙的光标仅在处理的前几秒钟有用。对于超过 15-20 秒的延迟，必须显示其他内容，例如进度条、状态消息、消息框等。人们认为您的软件在一分钟左右后已锁定，并会尝试终止它。有时，整体视觉提示与忙碌的光标一样重要。

例如，具有在选项卡中的操作完成之前不以适当的突出显示响应的选项卡的应用程序可以通过临时更新选项卡直到所有操作完成来修复。有时，只需一点优化或重构就可以清除诸如此类的糟糕的用户界面响应。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-01-03T07:25:33.960

例如，表示您单击了一个按钮，即使它还没有完成对事件的处理。如果没有任何指示，用户可能会尝试再次单击该按钮，从而导致各种不良情况。

# mysql - 在两个表中强制执行唯一值

> ID：408749
> 
> 赞同：16
> 
> 时间：2009-01-03T07:26:07.780
> 
> 标签：mysql, indexing

是否可以在 MySQL 中的两个表之间强制执行唯一性？

我有两张表，都描述了用户。这些表中的用户以前用于两个不同的系统，但是现在我们正在合并我们的身份验证系统，我需要确保这两个表中有唯一的用户名。（现在将它们全部放在一张桌子上的工作量太大了）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-03T19:30:32.997

您不能跨多个表声明 UNIQUE 约束，并且 MySQL 根本不支持 CHECK 约束。但是您可以设计一个触发器来搜索另一个表中的匹配值。这是一个测试 SQL 脚本：

```
DROP TABLE IF EXISTS foo;
CREATE TABLE FOO (username VARCHAR(10) NOT NULL);

DROP TABLE IF EXISTS bar;
CREATE TABLE BAR (username VARCHAR(10) NOT NULL);

DROP TRIGGER IF EXISTS unique_foo;
DROP TRIGGER IF EXISTS unique_bar;

DELIMITER //

CREATE TRIGGER unique_foo BEFORE INSERT ON foo
FOR EACH ROW BEGIN
  DECLARE c INT;
  SELECT COUNT(*) INTO c FROM bar WHERE username = NEW.username;
  IF (c > 0) THEN
    -- abort insert, because foo.username should be NOT NULL
    SET NEW.username = NULL;
  END IF;
END//

CREATE TRIGGER unique_bar BEFORE INSERT ON bar
FOR EACH ROW BEGIN
  DECLARE c INT;
  SELECT COUNT(*) INTO c FROM foo WHERE username = NEW.username;
  IF (c > 0) THEN
    -- abort insert, because bar.username should be NOT NULL
    SET NEW.username = NULL;
  END IF;
END//

DELIMITER ;

INSERT INTO foo VALUES ('bill');  -- OK

INSERT INTO bar VALUES ('bill');  -- Column 'username' cannot be null 
```

对于每个表，您还需要类似的 ON UPDATE 触发器，但您不需要任何 ON DELETE 触发器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-02-10T06:50:49.160

最好的方法是声明另一个具有唯一列的表，并让多个表引用这些表

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-03T10:48:28.573

也许不是直接回答您的问题，但是：

您应该考虑重写代码并重组数据库以将这两个表合并为一个。

您现在尝试实施的设计将使您的代码和数据库架构复杂化，并且会使进一步升级到其他数据库软件或框架变得更加困难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-03T08:33:44.320

您可以添加一个带有单列的额外表作为主键。然后在每个旧用户表上创建一个触发器，以将 id 插入到这个额外的表中。

```
create table users1 (
    user_id integer primary key,
    username varchar(8) not null unique
);
create table users2 (
    user_id integer primary key,
    username varchar(8) not null unique
);
create table all_usernames (
    username varchar(8) primary key
);
create trigger users1_insert before insert on users1 for each row
    insert into all_usernames values(new.username);
create trigger users2_insert before insert on users2 for each row
    insert into all_usernames values(new.username);
create trigger users1_update before update on users1 for each row
    update all_usernames set username = new.username
    where username = old.username;
create trigger users2_update before update on users2 for each row
    update all_usernames set username = new.username
    where username = old.username;
create trigger users1_delete before delete on users1 for each row
    delete from all_usernames where username = old.username;
create trigger users2_delete before delete on users2 for each row
    delete from all_usernames where username = old.username; 
```

然后，您可以使用

```
insert into all_usernames select username from users1;
insert into all_usernames select username from users2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-03T11:21:19.880

更改 ID 列的类型是否可以负担得起？然后，您可以选择在任意数量的表中都是唯一的 GUID。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-03T07:28:56.900

显然，如果两个表中已经存在重复项，则必须手动解决该问题。展望未来，您可以编写一个触发器来检查两个表以查看值是否已存在，然后将其应用于两个表。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-01-03T07:35:06.653

我不知道 MySQL，但这是你可以在 Oracle 中做到的，我相信 MySQL 也支持物化视图。

您在这两个表上创建一个物化视图。你在这个视图上添加了一个唯一的约束。

每次提交对两个基表之一的更改时，都需要刷新此视图。

# c# - 显示启动画面时播放声音？

> ID：408766
> 
> 赞同：1
> 
> 时间：2009-01-03T07:43:14.780
> 
> 标签：c#, audio, splash-screen

我想在启动画面从服务器获取数据时播放声音。

声音文件不是太大。我希望你在启动计算机时听到 MSWinXP 欢迎声，以及在建立帐户时听到的声音。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T08:36:41.803

使用[`System.Media.SoundPlayer`](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx). 您可能需要将此代码放在 Form_Load 中。

```
 private void button1_Click(object sender, EventArgs e)
    {
        System.Media.SoundPlayer player = new System.Media.SoundPlayer();
        player.SoundLocation = @"C:\Windows\Media\chimes.wav";
        player.Play();
    } 
```

# linq - Linq to SQL：在相关表中按值排序

> ID：408779
> 
> 赞同：4
> 
> 时间：2009-01-03T08:30:24.593
> 
> 标签：linq, linq-to-sql

我有 2 个简化形式的表格，如下所示：

```
Products(
   id: int,
   name: varchar
);

ProductSpecs(
   product_id: int,
   spec_name: varchar,
   spec_value: int
); 
```

现在我需要按一些规范项的值（例如“价格”）对产品（在 linq to sql 中）进行排序。所以我做这样的事情

```
var products = from p in db.Products
               from ps in p.ProductsSpecs
               where ps.spec_name == "price"
               orderby ps.spec_value
               select p; 
```

问题是，如果没有带有 spec_name "price" 的 ProductSpec，则根本不包括该产品。我可以使用 Union 或 Concat 添加这些产品，但这样不会保留第一部分的排序。

处理这个问题的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-03T10:27:02.860

首先，我建议您在纯 SQL 中作为函数或存储过程执行此操作，然后通过 linq 访问它，或者在您的产品表中添加价格列。即使价格为 NULL，价格似乎也是添加到所有产品的正常属性。

SQL：

```
select p.*
from products p
left outer join productspecs ps on
    p.id = ps.product_id
    and ps.spec_name = 'Price'
order by ps.spec_value 
```

话虽如此，这是应该在您的表上工作的奇怪的 LINQ 位（我可能有一些列名拼写错误）：

```
var products = from p in db.Products
               join ps in (from pss in db.ProductSpecs
                           where pss.spec_name== "Price"
                           select pss
                           ) on p.id equals ps.product_id into temp
               from t in temp.DefaultIfEmpty()
               orderby t.spec_value
               select p; 
```

我在上面的一些表设置上对此进行了测试，并创建了 5 个产品，其中三个具有不同价值顺序的价格，这个 LINQ 就像上面的 SQL 一样对它们进行排序，并返回空结果行。

希望这有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T09:19:04.183

在普通 SQL 中，您将使用 LEFT OUTER JOIN。这会保留出现在左侧表中的行（第一个列出的行），即使右侧表中没有匹配的行（列出的第二个，以及外部连接的行）。对于右侧表格中应该存在但不存在的值，您最终会得到空值。因此，那些缺少价格的商品的价格将显示为 NULL。

在 LINQ to SQL 中转换为什么是另一回事。

您可能会关心考虑拥有没有价格的产品是否合理。您正在模拟称为[EAV](http://en.wikipedia.org/wiki/Entity-Attribute-Value_model)的东西- 实体、属性、值 - 表，它们通常被认为是“不是一件好事”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T10:18:40.520

你不能只做一个简单的加入吗？

var products = from p in db.Products join ps in db.ProductSpecs on p.id 等于 ps.product_id 其中 ps.spec_name == "price" orderby ps.spec_value select p;

# python - 捕获 MainLoop 异常并在 MessageDialogs 中显示它们

> ID：408810
> 
> 赞同：4
> 
> 时间：2009-01-03T09:22:50.773
> 
> 标签：python, exception-handling, wxpython, wxwidgets

我有一个依赖于外部配置文件的 wxPython 应用程序。如果有任何配置错误，我想提供友好的消息对话框。我试图通过将我的 app.MainLoop() 调用包装在 try/except 语句中来完成这项工作。

下面的代码适用于我的 MainWindow 框架类中的初始化代码，但不会捕获 MainLoop 中发生的任何异常。我怎样才能捕捉到这些异常呢？

```
if __name__ == '__main__':
    app = MyApp(0)
    try:
        MainWindow(None, -1, 'My Cool App')
        app.MainLoop()
    except ConfigParser.Error, error_message:
        messagebox = wx.MessageDialog(None, error_message, 'Configuration Error', wx.OK | wx.ICON_ERROR)
        messagebox.ShowModal() 
```

我读过一些关于可以在 wx.App 类中覆盖的 OnExceptionInMainLoop 方法的提及，但是我读到的源代码必须是过时的（2004 年），因为 wx.App 似乎不再具有该名称的方法。

**编辑：**

我需要能够在我的主循环期间捕获未处理的异常，以便我可以进一步处理它们并将它们显示在错误对话框中，而不是静默传递，也不会终止应用程序。

sys.excepthook 解决方案级别太低，与 wxPython 主循环线程不兼容。虽然指向另一个答案的链接执行相同的尝试/除了环绕主循环，但由于 wxPython 再次为应用程序 / ui 生成不同的线程而无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T16:04:33.753

不知道这是否适用于 wxPython 应用程序，但在 sys 模块中，您可以覆盖 exceptionhook 属性，这是一个使用 3 个参数调用的函数`(type, value, traceback)`，当捕获到未捕获的异常时。您可以在其中安装自己的函数，只处理您想要的异常，并为所有其他异常调用原始函数。

咨询：[http ://docs.python.org/library/sys.html#sys.excepthook](http://docs.python.org/library/sys.html#sys.excepthook "系统模块")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T19:36:01.280

我为[Chandler](http://chandlerproject.org/)编写了类似的代码，其中任何未处理的异常都会弹出一个包含堆栈和其他信息的窗口，用户可以添加额外的评论（当它发生时他们做了什么等）并将其提交给 Chandler 开发人员。如果你愿意的话，有点像[Mozilla Talkback](https://wiki.mozilla.org/QA/Talkback)（我相信[现在](https://developer.mozilla.org/en/Crash_reporting)他们使用 Breakpad）功能。

要在 wxPython 中执行此操作，您需要向 wx.App 提供重定向参数。这将弹出[wx.PyOnDemandOutputWindow](http://www.wxpython.org/docs/api/wx.PyOnDemandOutputWindow-class.html)（您可能希望覆盖它以提供更好看的实现）。

Chandler 中的相关源文件在这里：

*   [Chandler.py](http://svn.osafoundation.org/chandler/trunk/chandler/Chandler.py)启动应用程序并设置重定向属性，并尝试捕获并显示错误对话框以防正常应用程序启动失败
*   [Application.py](http://svn.osafoundation.org/chandler/trunk/chandler/application/Application.py)自定义应用对象，包括设置我们自定义的 wx.PyOnDemandOutputWindow
*   [feedback.py](http://svn.osafoundation.org/chandler/trunk/chandler/application/feedback.py)具有自定义 wx.PyOnDemandOutputWindow 的实现；它还需要 feedback.xrc 和 feedback_xrc.py

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T18:24:54.767

也许[这个](https://stackoverflow.com/questions/166198/how-can-i-capture-all-exceptions-from-a-wxpython-application)问题可能有一些用处，它试图捕获所有异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:44:48.130

发布对我有用的解决方案有一个非常相似的问题。

```
import wx
import sys
import traceback

class Frame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)
        panel = wx.Panel(self)
        m_close = wx.Button(panel, -1, "Error")
        m_close.Bind(wx.EVT_BUTTON, self.OnErr)
    def OnErr(self, event):
        1/0

def handleGUIException(exc_type, exc_value, exc_traceback):
    err_msg = ''.join(traceback.format_exception(exc_type, exc_value, exc_traceback))
    err_msg += '\n Your App will now terminate'
    # Here collecting traceback and some log files to be sent for debugging.
    # But also possible to handle the error and continue working.
    dlg = wx.MessageDialog(None, err_msg, 'Termination dialog', wx.OK | wx.ICON_ERROR)
    dlg.ShowModal()
    dlg.Destroy()
    sys.exit()

sys.excepthook = handleGUIException

if __name__ == '__main__':
    app = wx.App(redirect=False) 
    top = Frame()
    top.Show()
    app.MainLoop() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-25T12:50:41.710

使用`sys.excepthook`对我来说非常好。

我发现以下文章很有帮助：**[wxPython：Catching Exceptions from Anywhere](https://www.blog.pythonlibrary.org/2014/03/14/wxpython-catching-exceptions-from-anywhere)**。

# c# - WPF 数据模板化 ItemsControl

> ID：408815
> 
> 赞同：1
> 
> 时间：2009-01-03T09:30:21.243
> 
> 标签：c#, wpf, datatemplate, itemscontrol

我有一个`ItemsControl`who在运行时`ItemsSource`绑定到一个。`ObservableCollection<Component>`我已经为类型定义了一个可以正常工作的数据模板`Component`。

现在`Component`有一个`ObservableCollection<Control>`，我想`ItemsControl`在我的内部添加另一个`Component` `Datatemplate`来呈现所有控件。`Control`这是我自己的与 wpf 控件无关的自定义对象。

有不同类型的控件，因此我尝试使用`ItemTemplateSelector`为每种类型选择正确的模板。在下面的示例中，为了保持较小，我只显示了一个`"RWString"`使用`FindResource`in`MyControlTemplateSelector`覆盖的模板`SelectTemplate`。但是`SelectTemplate`永远不会被调用（使用断点检查）。我的 xaml 有问题吗？

```
<ItemsControl.Resources>
    <src:MyControlTemplateSelector x:Key="XSelector" />
    <DataTemplate DataType="{x:Type src:Component}"  >
        <Expander Visibility="{Binding Path=Show}">
                <ItemsControl ItemsSource="{Binding Path=Contrls}" 
                          ItemTemplateSelector="{StaticResource XSelector}">
                <ItemsControl.Resources>
                    <DataTemplate x:Key="RWstring" >
                        <TextBlock Text="{Binding Path=Label}"/>
                    </DataTemplate>
                </ItemsControl.Resources>
                <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate><WrapPanel /></ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </Expander>
    </DataTemplate>
</ItemsControl.Resources> 
```

**更新：** `Contrls`不是错字，只是我使用了一个愚蠢的命名系统。`Contrls`是 Component 类型的属性`ObservableCollection<Control>`。另外，我尝试使用 the 的原因`ItemsTemplateSelector`是`ObservableCollection<Control>` 包含泛型类型的对象，例如`Control<int>` `Control<string>`etc 都派生自`Control`，显然您无法创建引用泛型类型的数据模板。

**更新 3 ：**删除更新 2，因为它不相关。我`ItemTemplateSelector`通过更改`StaticResource`为`DynamicResource`. 但我不知道为什么会这样......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-04T15:12:10.333

我猜这不适用于 StaticResource，因为 Resource 位于 ItemsControl 内部，在评估 StaticResources 时可能尚未在加载时创建。

加载时的动态资源在加载时被评估为表达式，然后在请求时被评估为正确的值。

尝试将资源移到 ItemsControl 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T10:25:21.537

在绑定嵌套 ItemsControl 的行中，路径是否正确？当前是“控件”，应该是“控件”吗？

# java - Swing 和 AWT 有什么区别？

> ID：408820
> 
> 赞同：241
> 
> 时间：2009-01-03T09:43:05.350
> 
> 标签：java, swing, awt

有人可以解释一下 Swing 和 AWT 之间的区别吗？

在任何情况下，AWT 比摇摆更有用/建议使用，反之亦然？

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2009-01-03T09:51:31.433

AWT 是操作系统中存在的本机系统 GUI 代码的 Java 接口。尽管它会尝试，但它不会在每个系统上都以相同的方式工作。

Swing 或多或少是一个纯Java GUI。它使用 AWT 创建一个操作系统窗口，然后将按钮、标签、文本、复选框等的图片绘制到该窗口中，并响应您的所有鼠标单击、键输入等，自行决定要做什么而不是让操作系统处理它。因此，Swing 是 100% 可移植的，并且跨平台是相同的（尽管它是可换肤的并且具有“可插入的外观和感觉”，可以使其看起来或多或少像本机窗口和小部件的外观）。

这些是 GUI 工具包的完全不同的方法，并且会产生很多后果。您的问题的完整答案将尝试探索所有这些。:) 这里有几个：

AWT 是一个跨平台接口，因此即使它使用底层操作系统或本机 GUI 工具包来实现其功能，它也不提供对这些工具包可以做的所有事情的访问。一个平台上可能存在的高级或更新的 AWT 小部件在另一个平台上可能不受支持。在每个平台上都不相同的小部件的功能可能不受支持，或者更糟糕的是，它们在每个平台上的工作方式可能不同。人们过去常常投入大量精力来使他们的 AWT 应用程序能够跨平台一致地工作——例如，他们可能会尝试从 Java 调用本机代码。

因为 AWT 使用本机 GUI 小部件，您的操作系统知道它们并处理将它们放在彼此前面等，而从操作系统的角度来看，Swing 小部件是窗口内无意义的像素。Swing 本身处理您的小部件的布局和堆叠。混合 AWT 和 Swing 是非常不受支持的，并且可能会导致荒谬的结果，例如本机按钮会掩盖它们所在的对话框中的其他所有内容，因为其他所有内容都是使用 Swing 创建的。

因为 Swing 试图在 Java 中做所有可能的事情，而不是原生 GUI 窗口提供的非常原始的图形例程，所以与 AWT 相比，它过去会招致相当大的性能损失。不幸的是，这使得 Swing 难以流行起来。然而，由于更优化的 JVM、更快的机器和（我认为）对 Swing 内部结构的优化，这在过去几年中急剧缩小。今天，Swing 应用程序可以运行得足够快，可以服务甚至是 zippy，并且与使用本机小部件的应用程序几乎没有区别。有人会说达到这一点花了太长时间，但大多数人会说这是非常值得的。

最后，您可能还想查看 SWT（用于 Eclipse 的 GUI 工具包，是 AWT 和 Swing 的替代品），这在某种程度上回归了 AWT 通过 Java 访问本机小部件的想法。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2009-01-03T10:48:19.540

大家已经提到的基本区别是，一个是**重**的，一个是**轻**的。让我解释一下，重量级这个词的基本含义是，当您使用 awt 组件时，用于获取视图组件的本机代码**是由操作系统生成的**，这就是为什么它的外观**从操作系统到操作系统会发生变化。**在摆动组件中，**JVM 负责为组件生成视图。**我看到的另一个说法是，**swing 是基于 MVC 的，而 awt 不是。**

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-01-03T09:48:58.943

[摇摆与 AWT](http://dn.codegear.com/article/26970)。基本上，AWT 先出现，并且是一组重量级的 UI 组件（意味着它们是操作系统对象的包装器），而 Swing 建立在 AWT 之上，具有一组更丰富的轻量级组件。

任何严肃的 Java UI 工作都是在 Swing 而不是 AWT 中完成的，后者主要用于 applet。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-07-07T02:56:50.523

至于 AWT 何时可能比 Swing 更有用 -

*   您可能针对的是不支持 Swing 的旧 JVM 或平台。如果您正在构建 Applets，这曾经真正发挥作用 - 您希望以最低公分母为目标，这样人们就不必安装更新的 Java 插件。我不确定当前安装最广泛的 Java 插件版本是什么——今天可能会有所不同。
*   有些人更喜欢 AWT 的原生外观，而不是 Swing 的“不完全存在”平台外观。（有比 Swing 的实现更好的 3rd 方原生外观 BTW）很多人更喜欢使用 AWT 的 FileDialog 而不是 Swing 的 FileChooser，因为它提供了大多数人习惯的平台文件对话框，而不是“奇怪的”自定义 Swing 对话框。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-05-29T09:35:21.627

AWT 和 Swing 之间的这种差异导致了几个后果。

AWT 是操作系统之上的一层薄薄的代码，而 Swing 则要大得多。Swing 还具有非常丰富的功能。使用 AWT，您必须自己实现很多东西，而 Swing 内置了它们。对于 GUI 密集型工作，与 Swing 相比，使用 AWT 感觉非常原始。因为 Swing 自己实现 GUI 功能而不是依赖于主机操作系统，所以它可以在 Java 运行的所有平台上提供更丰富的环境。AWT 在所有平台上提供相同功能方面受到更多限制，因为并非所有平台都以相同的方式实现相同外观的控件。

Swing 组件被称为“轻量级”，因为它们不需要本机 OS 对象来实现其功能。`JDialog`并且`JFrame`是重量级的，因为他们确实有同行。因此，像`JButton`, `JTextArea`等组件是轻量级的，因为它们没有 OS 对等体。

> 对**等**点是操作系统提供的小部件，例如按钮对象或输入字段对象。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-02-21T15:18:57.990

**摇摆：**

1.  Swing 是 java 基础类的一部分。
2.  Swing 组件与平台无关。
3.  Swing 组件是轻量级组件，因为 Swing 位于 awt 之上。

**AWT：**

1.  AWT 被称为抽象窗口工具。
2.  AWT 组件是平台相关的。
3.  AWT 组件是重量级组件。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-01-31T13:51:30.347

*   swing 组件提供了非常灵活的用户界面，因为它遵循模型视图控制器（mvc）。
*   awt 不是基于 mvc 的。
*   挥杆动作更快。
*   awt 不能更快地工作。
*   摆动组件重量轻。
*   awt 组件很重。
*   swing占用更少的内存空间。
*   awt 占用更多的内存空间。
*   swing 组件独立于平台。
*   awt 依赖于平台。
*   swing 需要 javax.swing 包。
*   awt 需要 javax.awt 包。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-11T13:37:45.203

**AWT** 1。AWT 占用更多的内存空间 2 。AWT 依赖于平台 3 。AWT 需要 javax.awt 包

**摆动** 1 . Swing 占用更少的内存空间 2 。Swing 组件独立于平台 3 。Swing 需要 javax.swing 包

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-27T13:12:25.383

爪哇 8

# 摇摆

*   它是 Java 基础类的一部分
*   Swing 建立在 AWT 之上
*   Swing 组件是轻量级的
*   Swing 支持可插拔的外观和感觉
*   独立于平台
*   使用 MVC：模型-视图-控制器架构
*   包：javax.swing
*   与 Swing 的其他轻量级组件不同，顶级容器是重量级的。

# AWT - 抽象窗口工具包

*   平台相关
*   AWT 组件是重量级的
*   package java.awt

# coding-style - 这种特殊缩进样式的名称是什么？（“大括号堆叠”）

> ID：408821
> 
> 赞同：6
> 
> 时间：2009-01-03T09:43:06.317
> 
> 标签：coding-style, indentation, braces

我在[这里](https://stackoverflow.com/questions/159366/is-there-a-best-coding-style-for-identations-same-line-next-line)看到了这个问题。我想知道是否存在以下缩进样式的正式名称：

```
void fooBar(String s)
{
    while (true)
    {
        // ... do something
    }
} 
```

当左大括号与控制语句在同一行，其中的语句缩进并且右大括号与控制语句在同一缩进级别上时，该样式称为K&R-Style。那么上面这个代码示例的缩进样式有名称吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-03T09:47:23.890

Allman 风格（Emacs 中的 bsd）参见维基百科文章[http://en.wikipedia.org/wiki/Indent_style](http://en.wikipedia.org/wiki/Indent_style)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-03T09:49:11.640

是的，这就是 ANSI 样式，之所以这样称呼，是因为它出现在 ANSI C 文档中。流行的自动格式化工具[astyle](http://astyle.sourceforge.net/astyle.html)将其称为`ansi`

AFAIK，它也是 Visual C++ 中默认使用的一种。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-03T09:53:55.610

它被称为[KNF](http://en.wikipedia.org/wiki/KNF)或内核范式。更多信息可以在[man 9 style](http://leaf.dragonflybsd.org/cgi/web-man?command=style&section=9)中找到。

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2009-01-03T11:37:47.507

它应该被命名为 WSRE（Waste of Screen Real Estate）。

# sql-server - 如何在不删除带有查询的列的情况下更改列的数据类型？

> ID：408825
> 
> 赞同：62
> 
> 时间：2009-01-03T09:47:03.033
> 
> 标签：sql-server

我有一个具有数据类型的列：日期时间。但现在我想将其转换为数据类型 varchar。我可以在不删除列的情况下更改数据类型吗？如果是，那么请解释一下如何？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2009-01-03T10:55:51.383

[MSDN 说](http://msdn.microsoft.com/en-us/library/ms190273.aspx)

```
ALTER TABLE mytable ALTER COLUMN mycolumn newtype 
```

注意文章中列出的 ALTER COLUMN 子句的限制

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-01-03T13:54:45.530

*如果 ALTER COLUMN 不起作用。*

alter column 失败并不罕见，因为它无法进行您想要的转换。在这种情况下，解决方案是创建一个虚拟表 TableName_tmp，使用批量插入命令中的专门转换复制数据，删除原始表，并将 tmp 表重命名为原始表的名称。您必须删除并重新创建外键约束，并且为了提高性能，您可能希望在填充 tmp 表后创建键。

*听起来工作量很大？*事实上，它不是。

如果您使用的是 SQL Server，则可以让 SQL Server Management Studio 为您完成工作！

*   调出表格结构（右键单击表格列并选择“修改”）
*   进行所有更改（如果列转换是非法的，只需添加新列 - 稍后您将对其进行修补）。
*   右键单击修改窗口的背景并选择“生成更改脚本”。在出现的窗口中，您可以将更改脚本复制到剪贴板。
*   取消修改（毕竟您需要测试脚本），然后将脚本粘贴到新的查询窗口中。
*   根据需要进行修改（例如，在从 tmp 表声明中删除字段的同时添加您的转换），您现在拥有进行转换所需的脚本。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-11-12T11:31:20.043

```
ALTER TABLE [table name] MODIFY COLUMN [column name] datatype 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-01-03T09:55:40.113

```
ALTER TABLE YourTableNameHere ALTER COLUMN YourColumnNameHere VARCHAR(20) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-12-06T12:37:38.273

键入以下查询：

```
alter table table_Name alter column column_name datatype 
```

例如

```
alter table Message alter column message nvarchar(1024); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-01-03T13:42:35.647

```
ALTER TABLE YourTableNameHere ALTER COLUMN YourColumnNameHere VARCHAR(20) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-06-22T01:18:04.127

对于 SQL Server 2008 及更高版本，使用此查询：

```
ALTER TABLE [RecipeInventorys] ALTER COLUMN [RecipeName] varchar(550) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-09-26T07:46:26.263

这项工作适用于 postgresql 9.0.3

```
 alter table [table name] ALTER COLUMN [column name] TYPE [character varying]; 
```

[http://www.postgresql.org/docs/8.0/static/sql-altertable.html](http://www.postgresql.org/docs/8.0/static/sql-altertable.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-03-22T03:29:26.033

```
ALTER TABLE [table_name] ALTER COLUMN [column_name] varchar(150) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-08-04T07:41:51.847

ALTER TABLE YourTableNameHere ALTER COLUMN YourColumnNameHere VARCHAR(20) 这非常适合更改数据类型

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-06T15:23:40.063

ORACLE - 更改表 table_name modify(column_name new_DataType);

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-02T20:00:34.717

ALTER TABLE yourtable MODIFY COLUMN yourcolumn 数据类型

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-02-18T05:42:39.730

```
ALTER TABLE table_name
MODIFY (column_name data_type); 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2009-01-03T09:56:10.333

```
ALTER tablename MODIFY columnName newColumnType 
```

我不确定它将如何处理从 datetime 到 varchar 的更改，因此您可能需要重命名该列，添加一个具有旧名称和正确数据类型 (varchar) 的新列，然后编写一个更新查询来填充从旧的新列。

[http://www.1keydata.com/sql/sql-alter-table.html](http://www.1keydata.com/sql/sql-alter-table.html)

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2013-08-15T18:57:14.843

```
alter table [table name] remove [present column name] to [new column name. 
```

# php - 从数据库中检索保存的复选框的名称和值

> ID：408834
> 
> 赞同：1
> 
> 时间：2009-01-03T09:56:35.917
> 
> 标签：php, forms

我有一个带有复选框的表单，每个都有一个值。当注册用户选择任何复选框时，值会增加（总和），然后注册用户保存他的

如果他对汇总到数据库的结果感到满意，则选择复选框所有这些工作都很好...我想让注册用户通过检索并显示他在具有其值的页面中选择的复选框来查看他的选择历史...如何我能做到吗？

我只能将选定的复选框保存为选项 1、选项 2，例如..

我想查看保存在数据库中的选定复选框，当用户第一次选择它们时出现在页面中：例如，如果注册用户选择这 3 个选项

*   铅深龙骨 (1825)
*   完全压条的主帆 (558)
*   柚木侧甲板 (2889)

它们将被保存为例如（choice1、choice2、choice3）。

但是，如果他想查看选定的复选框，则与他选择它们时完全一样：

*   铅深龙骨 (1825)
*   完全压条的主帆 (558)
*   柚木侧甲板 (2889)

这是我的用户表：

```
$query="CREATE TABLE User( 
user_id      varchar(20), 
password     varchar(40),
user_type    varchar(20),
firstname    varchar(30),
lastname     varchar(30),
street   varchar(50),
city         varchar(50),
county   varchar(50),
post_code    varchar(10),
country      varchar(50),
gender   varchar(6),
dob      varchar(15),
tel_no   varchar(50),
vals         varchar(50),
email        varchar(50))"; 
```

以及将选择的选项插入数据库的代码

```
<?php

include("databaseconnection.php");

$str = '';

foreach($_POST as $key => $val)

if (strpos($key,'choice') !== false)
 $str .= $key.',';

$query = "INSERT INTO User (vals) VALUES('$str')";
$result=mysql_query($query,$conn);
if ($result)
{
     (mysql_error();
}
else
{  
echo " done";      
}

?> 
```

这是我的表格：

函数 checkTotal() { document.listForm.total.value = ''; 变量总和 = 0; 对于 (i=0;i

```
<form name="listForm" method="post" action="insert_options.php" >
<TABLE cellPadding=3 width=600 border=0>
        <TBODY>

        <TR>
          <TH align=left width="87%" bgColor=#b0b3b4><SPAN 
            class=whiteText>Item</SPAN></TH>
          <TH align=right width="13%" bgColor=#b0b3b4><SPAN 
            class=whiteText>Select</SPAN></TH></TR>
        <TR>
          <TD  bgcolor="#9da8af"colSpan=2><SPAN class=normalText><B>General</B></SPAN></TD></TR>
        <TR>
          <TD  bgcolor="#c4c8ca"><SPAN class=normalText >TEAK SIDE DECKS (2889)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="2889" type="checkbox" onchange="checkTotal()" /></TD></TR>
        <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>LEAD DEEP KEEL (1825)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="1825" type="checkbox" onchange="checkTotal()"></TD></TR>

        <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>FULLY BATTENED MAINSAIL (558)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="558"  type="checkbox"  onchange="checkTotal()"></TD></TR>

        <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>HIGH TECH SAILS FOR CONVENTIONAL RIG (1979)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="1979" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>IN MAST REEFING WITH HIGH TECH SAILS (2539)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="2539" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>SPlNNAKER GEAR (POLE LINES DECK FITTINGS) (820)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="820" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>SPINNAKER POLE VERTICAL STOWAGE SYSTEM (214)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="214" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>GAS ROD KICKER (208)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="208" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>SIDE RAIL OPENINGS (BOTH SIDES) (392)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="392" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>SPRING CLEATS MIDSHIPS -ALUMIMIUM (148)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="148" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>ELECTRIC ANCHOR WINDLASS (1189)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="1189" type="checkbox" onchange="checkTotal()"> </TD></TR>

          <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>ANCHOR CHAIN GALVANISED (50m) (202)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="202" type="checkbox" onchange="checkTotal()"> </TD></TR>

          <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>ANCHOR CHAIN GALVANISED (50m) (1141)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="1141" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TR>
          <TD  bgcolor="#9da8af"colSpan=2><SPAN class=normalText><B>NAVIGATION & ELECTRONICS</B></SPAN></TD></TR>
        <TR>
          <TD  bgcolor="#c4c8ca"><SPAN class=normalText >WIND VANE (STAINLESS STEEL)(41)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="41" type="checkbox" onchange="checkTotal()" /></TD></TR>
        <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>RAYMARINE ST6O LOG & DEPTH (SEPARATE UNITS)(226)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="226" type="checkbox" onchange="checkTotal()"></TD></TR>

      <TR>
          <TD  bgcolor="#9da8af"colSpan=2><SPAN class=normalText><B>ENGINES & ELECTRICS</B></SPAN></TD></TR>
        <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>SHORE SUPPLY (220V) WITH 3 OUTLETS (EXCLUDJNG SHORE CABLE) (327)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="327"  type="checkbox"  onchange="checkTotal()"></TD></TR>

        <TR>
          <TD bgColor=#c4c8ca><SPAN class=normalText>3rd BATTERY(14OA/H)(196)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="196" type="checkbox" onchange="checkTotal()"></TD></TR>

         <TD bgColor=#c4c8ca><SPAN class=normalText>24 AMP BATTERY CHARGER (475)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="475" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TD bgColor=#c4c8ca><SPAN class=normalText>2 BLADED FOLDING PROPELLER (UPGRADE)(299)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="299" type="checkbox" onchange="checkTotal()"></TD></TR>

         <TR>
          <TD  bgcolor="#9da8af"colSpan=2><SPAN class=normalText><B>BELOW DECKS/DOMESTIC</B></SPAN></TD></TR>

          <TD bgColor=#c4c8ca><SPAN class=normalText>WARM WATER (FROM ENGINE & 220V)(749)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="749" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TD bgColor=#c4c8ca><SPAN class=normalText>SHOWER IN AFT HEADS WITH PUMPOUT(446)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="446" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TD bgColor=#c4c8ca><SPAN class=normalText>DECK SUCTION DISPOSAL FOR HOLDINGTANK(166)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="166" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TD bgColor=#c4c8ca><SPAN class=normalText>REFRIGERATED COOLBOX (12V)(666)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="666" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TD bgColor=#c4c8ca><SPAN class=normalText>LFS SAFETY PACKAGE (COCKPIT HARNESS POINTS STAINLESS STEEL JACKSTAYS)(208)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="208" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TD bgColor=#c4c8ca><SPAN class=normalText>UPHOLSTERY UPGRADE IN SALOON (SUEDETYPE)(701)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="701" type="checkbox" onchange="checkTotal()"></TD></TR>

          <TR>
          <TD  bgcolor="#9da8af"colSpan=2><SPAN class=normalText><B>NAVIGATION ELECTRONICS & ELECTRICS</B></SPAN></TD></TR>

          <TD bgColor=#c4c8ca><SPAN class=normalText>VHF RADIO AERIAL CABLED TO NAVIGATION AREA(178)</SPAN></TD>
          <TD align=right bgColor=#c4c8ca><input  name="choice" value="178" type="checkbox" onchange="checkTotal()"></TD></TR>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T10:58:31.797

在 html 表单中，而不是

```
<input type="checkbox" name="choice" value="123"> 
```

做：

```
<input type="checkbox" name="choice[]" value="123"> 
```

这将使选择作为数组提供给您。

然后将用于将选项插入数据库的 php 代码更改为：

```
<?php

$str='';
foreach ($_POST['checked'] as $val)
{
    $str.=$val.',';
}

$str=substr($str,0,-1);//Remove the final comma from the end

$sql="UPDATE users SET vals='$str' WHERE user_id='$user_id'";
mysql_query($sql) or die(mysql_error());

?> 
```

然后在向用户显示选项时，执行以下操作：

php：

```
<?php

$checked=array();
$sql="SELECT vals FROM users WHERE user_id='$user_id'";
$result=mysql_query($sql) or die(mysql_error());

$row=mysql_fetch_assoc($row);
$vals=explode(',',$row['vals']);

foreach ($vals as $val)
{
    if ($val !='' && is_numeric($val))
        $checked[$val]='checked';
}

function set_checked($value)
{
    global $checked;
    if (isset($checked[$value]))
        return 'checked';
    else
        return '';
}

?> 
```

在 html 中：

```
<input type="checkbox" name="choice[]" value="123" <? echo set_checked('123');?>> 
```

**PS。**确保将 $user_id 替换为用户的用户 ID 或在查询中识别他的其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T10:05:32.373

要将设置保存到您必须使用的数据库中`UPDATE`，而不是`INSERT`. 首先你必须知道`user_id`. 然后你必须发出如下查询：

```
$query = "update User set val = '" . mysql_real_escape_string($str)
       . "' where user_id = $user_id"; 
```

您可以使用 PHP 的[explode](http://php.net/manual/en/function.explode.php)函数从字符串中获取值数组。

```
$values = explode(',', $val); 
```

# c++ - 为什么在两个内部进程之间使用 Web 服务而不是 RPC？

> ID：408844
> 
> 赞同：6
> 
> 时间：2009-01-03T10:15:55.910
> 
> 标签：c++, web-services, rpc

谁能提出一个很好的理由来使用 Web 服务而不是 RPC（不是 xml-rpc）作为两个 C++ 进程之间的通信通道，这两个进程都将由同一个团队开发？注意：网络服务不保证按订单发货！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-03T10:49:19.117

当人们有一把锤子时，他们倾向于将所有问题都视为钉子。这就是为什么人们倾向于将 Web 服务放在任何地方，就好像它是两个进程进行通信的唯一方式一样。

在您的情况下，RPC 似乎是一个更好的选择，更高的性能，更少的内存使用，更易于实现（在 C++ 中）......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-03T10:48:19.510

当您需要时，Web 服务非常有用：

*   支持多种语言和平台
*   基于 SOA 的应用程序
*   分布式服务

如果您不需要这些中的任何一个，或者永远不需要，那么 RPC 就没有任何问题。如果您的应用程序的进程都存在于同一台机器上并且您需要在它们之间进行通信，那么 RPC 是一个完全可以接受的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-03T12:59:34.423

如果您不需要做任何超出本地 RPC 可以处理的事情并且确信您永远不会做，那么没有理由不使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-03T03:05:36.833

由于有许多技术可以轻松提供 SOA 架构、多语言支持、多平台支持，并且不需要 Web 服务器，如果您不使用任何一端作为 UI 前端交付机制，那么确实对 Web 服务器没有任何要求。事实上，像 IBM 的 Websphere 这样的庞然大物，将需要大量的资源成本。更好的架构选择是 CORBA。请参阅 TAO 以获得一个很好的例子。

# user-interface - 高效的用户界面

> ID：408853
> 
> 赞同：5
> 
> 时间：2009-01-03T10:23:44.880
> 
> 标签：user-interface

速度和易学性并不直接相互冲突，但设计这样一个缺少两者之一（或两者）的 GUI 似乎很容易。GUI 设计师在大多数情况下似乎更喜欢“易于学习”，即使“快速应用”会更明智。

只有少数 UI 概念或程序侧重于最大化您对程序所做的任何事情的最高效率。他们中的大多数还没有变得普遍。

普通人更喜欢 gedit 而不是 vim。对于普通人来说，已经有足够好的 GUI，因为 20 年前对它们进行了大量研究。

我想得到一些关于做 UI 的建议，这些建议从“易于学习”而不是“快速应用”进行权衡。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-03T13:29:08.217

我们的产品阵容中有一款产品赢得了无数奖项，这主要是因为它能够以比我们的任何竞争对手更简单的界面提供更大的功率。在贝尔实验室的一个人机界面研究小组任职几年后，我设计了界面，所以当我接触它时，我对什么是“成功”有一个非常清晰的概念。对于创建简单但功能强大的界面，我有四个设计建议。

首先，选择一个在他们的环境中有意义的比喻，并尽力坚持下去。这不一定是一个物理隐喻，尽管如果与不精通技术的人一起工作会有所帮助。这在 Windows 的早期很流行，但它的价值仍然存在。我们使用了“文件夹和页面”的比喻，允许我们组织范围广泛的任务，同时又不影响高级用户的风格。

其次，在数据显示和任务之间提供一致的布局关系。在我们的界面中，每个“页面”在完全相同的位置显示一组操作按钮，并且尽可能使用相同的实际按钮。因此，一旦学习了一个页面，用户就可以开始学习其余页面。其中一个按钮，总是放置在一个独特的位置，是一个“帮助”按钮……这让我想到了第 3 点。更一般的规则是：找到利用一个领域的学习来帮助学习其他领域的方法。

第三，提供上下文相关的帮助并确保它解决了用户的主要问题（通常是“我现在做什么”？）您多久看到一次技术帮助，这些帮助只是向您显示继承树、构造函数语法和字母顺序方法清单？这不是帮助，这是滥用。我们将所有帮助都集中在引导人们完成示例任务上。在特别困难的领域，我们还提供了多媒体教程。

第四，为用户提供自定义界面的能力。我们的用户通常在他们的工作中没有使用特定的“页面”（分析类型）。因此，我们让关闭它们变得非常简单，这样用户就可以看到一个不会比它必须的更复杂的界面。我们的应用程序通常由高级用户安装，然后由多名员工使用，所以这对我们来说是一个胜利，因为我们通常可以依靠高级用户来了解要关闭*什么。*但是，我认为这是一个很好的建议。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-03T10:40:48.573

Autocad 有一个控制台模式。当您使用鼠标和工具栏执行操作时，这些命令的等效文本将写入控制台。您可以在其中直接键入命令。这提供了一种很好的方法来学习命令的高级用户名称（它们非常短，就像 unix 命令），这极大地帮助了从初学者到生产高级用户的过程。一般来说，一个主要重点必须是尽量减少鼠标和键盘之间的移动，因此将许多功能放入鼠标或键盘中，因为当您必须像那样移动手时，尝试确实会延迟找到合适的地方放置它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-03T10:49:46.153

除了避免[愤怒的水果沙拉](http://catb.org/jargon/html/A/angry-fruit-salad.html)之外，尽量让它尽可能直观。通常，具有非常令人沮丧的 UI 的程序有一个共同的问题，即在与 UI 设计结合之前，开发人员并没有明确定义程序实际上会做什么。

这不是一个“简单”的问题，有些人直接进入 UI 并开始编写支持界面的东西，而不是编写计划程序的核心，然后规划一个界面来使用它。

这适用于 Web 应用程序、桌面应用程序……甚至是命令行程序。一个好的设计意味着在您确定“[范围蔓延](http://en.wikipedia.org/wiki/Kitchen_sink_syndrome)”不再可能之后（并且仅在之后）编写用户界面。

当然，您需要一些接口来测试您的程序，但要准备好在发布程序之前丢弃它并做一些更好的事情。否则，UI 很有可能只对您有意义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-05T19:54:00.483

*咆哮（或者，我认为你应该记住的东西）：*

速度和易学性**确实**相互冲突。一个菜单项告诉你它做了什么，这样你就不必记住了。但它比您必须记住才能从中受益的键盘快捷键慢得多。解决这种冲突的一般技术似乎允许不止一种做事方式。虽然做某事的一种方法通常不能既快速又容易学习，但您通常可以提供两种方法来完成相同的任务：一种快速，另一种显而易见。

有各种各样的人**。**学习差距是兴趣、动机、智力等的结果。有一类人甚至不会费心去了解哪个菜单提供了他们想要的操作，他们每次都会擦洗菜单栏。还有一类（少数）人认为 vim（或 emacs）是自切片面包以来最好的东西。大多数人可能介于这两个极端之间。

*我对实际问题的回答：*

我想你是在问如何争取一个快速的用户界面。你的问题不是特别清楚（对我来说）。

*   首先，要保持一致。这有助于速度和可学习性。自我一致性是最重要的，但与您的环境的一致性也可能很重要。

*   对于真正的速度，需要尽可能少的注意力和动作。键盘快捷键很快，因为有经验的用户知道他们在哪里（他们不必看），并且他们的手已经在键盘上。尤其要避免强迫用户改变他们在计算机前的位置（例如，在鼠标和键盘之间移动一只手）。

*   键盘几乎总是比鼠标快。

*   自定义（尤其是编写自定义脚本的能力）将让高级用户使界面以最适合他们特定习惯的方式工作。

*   无需最强大的功能就可以过关。为了在 vim 中生存，你只需要知道 "i, ESC, :wq, :q!"。有了它，你可以像很多人使用记事本一样使用 vi。但是一旦你开始学习“h,j,k,l,w,b,e,d,c”（等等），你就会变得更有效率。所以有一个陡峭的学习曲线，但你可以熬过，直到你克服它。

*   请记住，如果您专注于界面效率，您可能会限制您的用户群。Vim 在程序员中很流行，但很多程序员使用其他工具，在非程序员中几乎不为人知。大多数人想要轻松，而不是快速。有些人想要平衡。极少数人只想快点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-03T11:18:04.270

我想向您介绍 Kathy Sierra 的旧博客，了解关于“易于学习”和“快速应用”的想法——我不一定同意需要在两者之间进行权衡。

三个帖子让你开始：

1.  [用户应该有多少控制权？](http://headrush.typepad.com/creating_passionate_users/2007/02/how_much_contro.html)这篇文章思考“快速申请”是否是我们应该努力的理想。
2.  [高分辨率用户体验](http://headrush.typepad.com/creating_passionate_users/2005/12/the_hires_user_.html)谈论的是您对“普通人”与其他人的看法。与其说有不同类型的人，不如说是学习/专业知识/参与程度不同。有些人满足于少，有些人需要更多。*对于每个人来说，你如何*从少到多可以说几乎是一样的。
3.  最后，[Featuritis 与快乐用户高峰](http://headrush.typepad.com/creating_passionate_users/2005/06/featuritis_vs_t.html)讨论了@tinkertim 指出的*范围蔓延。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-03T12:36:57.043

你见过[Gimp 快捷方式](http://www.novell.com/coolsolutions/feature/11192.html)吗？使用漂亮的视觉控件并在悬停控件时为它们显示键盘快捷键 - 这将有助于学习快速模式。如果您的软件复制了其他程序的某些行为 - 从它们复制映射的快捷方式（例如复制/粘贴/新选项卡/关闭窗口/等），但允许动态重新映射它们，如 Gimp 所示。对于收获的操作，您可以实现 Action recoder。但这取决于软件的类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-03T12:58:19.060

需要注意的主要事情是将 UI 元素放在该环境中其他应用程序最常放置的位置。例如，如果您要使用菜单系统，人们习惯于默认情况下它位于桌面应用程序的窗口顶部。如果您在网络浏览器中，网页上的菜单系统似乎不合适，因为它不是一个一致的功能。如果您将有一个选项/首选项配置窗口，人们习惯于在“工具”菜单选项下找到它，偶尔在“编辑”菜单下找到它。保持 UI“易于学习”的主要问题是，您的 UI 元素不应过多地破坏它们在其他应用程序中的使用方式。

如果您还没有机会观看 Mark Miller 关于出色用户体验的科学的演讲，我建议您观看 DNR 电视剧集[第 1](http://www.dnrtv.com/default.aspx?showNum=112)部分和[第 2 部分](http://www.dnrtv.com/default.aspx?showNum=123)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-31T09:05:31.993

虽然我一直在编写[自己的 UI](http://bitbucket.org/cheery/vai/) ，但我自己也了解了几件事。

我模仿了vim，但同时也意识到为什么用它来编辑文本这么快。这是因为它承认一件事：人们更喜欢一次做一件事（插入文本、导航、选择文本），但他们可能会经常切换任务。

这意味着如果您保持模式切换方案简单，您可以将不同的活动打包到不同的模式中。它为更多命令提供了空间。用户也有更好的机会学习完整的界面，因为它们已经被合理地分组了。

Vim 实际上塞满了命令，键盘上的每个字母都在 vim 中执行某些操作，具体取决于模式。我仍然记得其中的大部分。这都是因为模式。

我知道一堆嘲笑依赖模式的行为的项目。主要论点是不确定您处于哪种模式。在 vim 中，我从不不确定自己所处的模式。因此，如果受过训练的用户无法识别界面在哪种模式下运行，我会说界面设计是失败的在这一刻。

# python - 如何有效地比较和搜索整数列表？

> ID：408855
> 
> 赞同：4
> 
> 时间：2009-01-03T10:23:46.190
> 
> 标签：python, postgresql

我有一个填充了 100 万个对象的数据库。每个对象都有一个“标签”字段——一组整数。

例如：

```
object1: tags(1,3,4)
object2: tags(2)
object3: tags(3,4)
object4: tags(5) 
```

等等。

查询参数是整数集，让我们试试 q(3,4,5)

```
object1 does not match ('1' not in '3,4,5')
object2 does not match ('2' not in '3,4,5')
object3 matches ('3 and 4' in '3,4,5' )
object4 matches ('5' in '3,4,5' ) 
```

如何有效地选择匹配的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T10:54:49.950

鉴于您使用的是 PostgreSQL，您可以使用其[数组](http://www.postgresql.org/docs/8.2/static/functions-array.html)数据类型及其包含/重叠运算符。

当然，这会将您的应用程序与 PostgreSQL 紧密联系在一起，这可能是不希望的。另一方面，它可以节省您在真正需要时的编码（即，当您最终必须将其移植到另一个数据库时）

虽然，鉴于在 Python 中您拥有该组操作的[set 数据类型](http://docs.python.org/library/sets.html)，但使用 PostgreSQL 可能是矫枉过正（取决于性能要求）

```
>>> a = set([1,2,3])
>>> a
set([1, 2, 3])
>>> 1 in a
True
>>> set([1,2]) in a
False
>>> set([2,3]) & a
set([2, 3])
>>> set([8,9]) & a
set([])
>>> set([1,3]) & a
set([1, 3])
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-03T19:09:27.203

通过存储以逗号分隔的标签 ID 列表，您在数据库设计中犯了一个常见错误。对此执行有效查询对您来说是一个障碍，这并不奇怪。

您需要在单独的表中对对象和标签之间的映射进行建模。

```
CREATE TABLE Tagged (
  object_id  INT NOT NULL,
  tag_id     INT NOT NULL,
  PRIMARY KEY (object_id, tag_id),
  FOREIGN KEY (object_id) REFERENCES Objects(object_id),
  FOREIGN KEY (tag_id) REFERENCES Tags(tag_id)
); 
```

为每个对象/标签对插入一行。当然，这意味着每个 都有几行`object_id`，但这没关系。

您可以查询具有标签 3、4、5 的所有对象：

```
SELECT DISTINCT object_id
FROM Tagged
WHERE tag_id IN (3, 4, 5); 
```

但这与您不想要的 object1 匹配。您想要排除具有不在 3、4、5 中的其他标签的对象。

```
SELECT DISTINCT t1.object_id
FROM Tagged t1 
 LEFT OUTER JOIN Tagged t2
 ON (t1.object_id = t2.object_id AND t2.tag_id NOT IN (3, 4, 5))
WHERE t1.tag_id IN (3, 4, 5)
 AND t2.object_id IS NULL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-03T11:32:13.680

如果我理解正确，它类似于：

`Post-> posttags <-tags`

一种模式。

我想知道你为什么要这样做？

这是您遇到的问题，因为您正在使用 ORM 检索对象和其他延迟加载的关联对象中的数据。

就像 SQLAlchemy 中的 Post 和 Tag 类一样，Post 映射器有一个名为“tags”的属性，可以为给定的 Post 对象加载一组 Tag 对象。

如果是这样，这些操作在 ORM 中通常非常昂贵，应该使用 ORM 的 SQL 语句支持或使用像 psycopg2 这样的直接 dbapi 来完成。同样，如果从查询中加载的对象数量很大（请记住您的 100 万），您需要具有大量资源的机器（或者可能根本没有 -不推荐*纯*ORM）。

如果它不是 ORM 并且您的标签仍然像（集）一样存储，那么我认为架构有问题。

`posttags`正如我所见，它是一个多对多的关系，它本身是一个不同的表（很容易查询），而不是帖子表中的“集合”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-03T10:30:03.197

您还没有说明您想使用 SQL 的天气，或者您是否在这样做之前将数据读入应用程序。您正在寻找基于代码的解决方案？

在 .NET 中，您可以让一个类实现 ICompare 接口并编写自己的方法来比较两个返回 0 或 1 的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-03T10:44:04.853

这是基本的集合论。将这两个集合相交，如果结果与原始集合相同，则结果为“匹配”。否则不是。

您可以使用多种语言应用此原则。大多数都有用于处理集合的库。您甚至可以使用 SQL 来执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-03T12:13:02.757

在我看来，[集合](http://docs.python.org/library/sets.html)`issubset()`的方法是您正在寻找的：

```
tags(1, 2, 3).issubset(q(1, 2, 3, 4)) 
```

如果两者`tags`都是`q`类的子`set`类。但我同意其他答案，即在数据库中解决这个问题将是一个更好的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-04T10:35:55.587

对不起。看起来我很难很好地解释这个问题:)

这里的“postgresql”标签比“python”更有意义。具有 IS NULL 条件的自联接 TAG 表是我真正需要的。

SQLalchemy 也是很好的建议。

谢谢你们。

# python - 如何以人类可读的格式序列化 Python 对象？

> ID：408866
> 
> 赞同：26
> 
> 时间：2009-01-03T10:30:40.077
> 
> 标签：python, serialization

我需要将由列表/字典、元组组成的 Python 结构存储为人类可读的格式。这个想法就像使用类似于[pickle](http://docs.python.org/library/pickle.html)的东西，但 pickle 对人类不友好。我想到的其他选项是[YAML](http://en.wikipedia.org/wiki/Yaml)（通过[PyYAML](http://pyyaml.org/)和[JSON](http://www.json.org/)（通过[simplejson](http://pypi.python.org/pypi/simplejson/)））序列化程序。

您想到的还有其他选择吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-03T10:52:05.757

对于简单的情况，我们会想到 pprint() 和 eval()。

使用您的示例：

```
>>> d = {'age': 27,
...  'name': 'Joe',
...  'numbers': [1, 
...              2, 
...              3,
...              4,
...              5],
...  'subdict': {
...              'first': 1, 
...              'second': 2,
...               'third': 3
...              }
... }
>>> 
>>> from pprint import pprint
>>> pprint(d)
{'age': 27,
 'name': 'Joe',
 'numbers': [1, 2, 3, 4, 5],
 'subdict': {'first': 1, 'second': 2, 'third': 3}}
>>> 
```

我会三思而后行地用同一个工具来解决两个需求。您是否考虑过使用 pickle 进行序列化，然后使用 pprint() （或更花哨的对象查看器）供人们查看对象？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-01-03T11:04:55.343

如果它**只是**Python 列表、字典和元组对象。- **JSON**是要走的路。它是人类可读的，非常容易处理并且与语言无关。

注意：元组将被转换为 simplejson 中的列表。

```
In [109]: simplejson.loads(simplejson.dumps({'d':(12,3,4,4,5)}))
Out[109]: {u'd': [12, 3, 4, 4, 5]} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-02-28T04:05:10.253

您应该查看 jsonpickle ( [https://github.com/jsonpickle/jsonpickle](https://github.com/jsonpickle/jsonpickle) )。它将任何 python 对象写入 json 文件。然后，您可以将该文件读回 python 对象。好消息是中间文件非常可读，因为它是 json。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-06T01:50:05.773

如果您需要的表示比 JSON 所涵盖的更多，我强烈建议您查看[PyON](http://code.google.com/p/pyon/wiki/GettingStarted)（Python 对象表示法）……尽管我相信它仅限于 2.6/3.0 及更高版本，因为它依赖于**ast**模块。它处理自定义类实例和递归数据类型以及其他功能，这比 JSON 提供的要多。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-04T20:06:59.913

你是什​​么意思这不是人类可读的？？？;)

```
>>> d = {'age': 27, 
...   'name': 'Joe',
...   'numbers': [1,2,3,4,5],
...   'subdict': {'first':1, 'second':2, 'third':3}
... }
>>> 
>>> import pickle
>>> p = pickle.dumps(d)      
>>> p
"(dp0\nS'age'\np1\nI27\nsS'subdict'\np2\n(dp3\nS'second'\np4\nI2\nsS'third'\np5\nI3\nsS'first'\np6\nI1\nssS'name'\np7\nS'Joe'\np8\nsS'numbers'\np9\n(lp10\nI1\naI2\naI3\naI4\naI5\nas." 
```

好吧，好吧，也许这需要一些练习……或者你可以作弊……

```
>>> import pickletools 
>>> pickletools.dis(p)
    0: (    MARK
    1: d        DICT       (MARK at 0)
    2: p    PUT        0
    5: S    STRING     'age'
   12: p    PUT        1
   15: I    INT        27
   19: s    SETITEM
   20: S    STRING     'subdict'
   31: p    PUT        2
   34: (    MARK
   35: d        DICT       (MARK at 34)
   36: p    PUT        3
   39: S    STRING     'second'
   49: p    PUT        4
   52: I    INT        2
   55: s    SETITEM
   56: S    STRING     'third'
   65: p    PUT        5
   68: I    INT        3
   71: s    SETITEM
   72: S    STRING     'first'
   81: p    PUT        6
   84: I    INT        1
   87: s    SETITEM
   88: s    SETITEM
   89: S    STRING     'name'
   97: p    PUT        7
  100: S    STRING     'Joe'
  107: p    PUT        8
  110: s    SETITEM
  111: S    STRING     'numbers'
  122: p    PUT        9
  125: (    MARK
  126: l        LIST       (MARK at 125)
  127: p    PUT        10
  131: I    INT        1
  134: a    APPEND
  135: I    INT        2
  138: a    APPEND
  139: I    INT        3
  142: a    APPEND
  143: I    INT        4
  146: a    APPEND
  147: I    INT        5
  150: a    APPEND
  151: s    SETITEM
  152: .    STOP
highest protocol among opcodes = 0
>>> 
```

您仍然需要从文件中读取腌制对象，但您不需要`load`它。所以，如果它是一个“危险”的对象，你仍然可以在做`load`. 如果你被困住了`pickle`，它可能是破译你所拥有的东西的好选择。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-03T11:05:32.127

首先使用 simplejson **easy_install simplejson**：

```
import simplejson
my_structure = {"name":"Joe", "age":27, "numbers":[1,2,3,4,5], "subdict":{"first":1, "second":2, "third": 3}}
json = simplejson.dumps(my_structure) 
```

结果 json 为：

```
{"age": 27, "subdict": {"second": 2, "third": 3, "first": 1}, "name": "Joe", "numbers": [1, 2, 3, 4, 5]} 
```

请注意，它几乎没有改变字典的格式，但您应该通过这一步运行它以确保有效的 JSON 数据。

您可以进一步漂亮地打印结果：

```
import pprint
pprint.pprint(my_structure) 
```

结果是：

```
{'age': 27,
 'name': 'Joe',
 'numbers': [1, 2, 3, 4, 5],
 'subdict': {'first': 1, 'second': 2, 'third': 3}} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-04T19:46:32.477

[AXON](https://intellimath.bitbucket.io/axon) （文本）格式结合了JSON、XML 和 YAML 的优点**。**AXON 格式可读性强，相对紧凑。

python (2.7/3.3-3.7) 模块[pyaxon](https://pypi.python.org/pypi/pyaxon)支持`load(s)`/`dump(s)`功能，包括迭代`loading`/ `dumping`。它足够快以便有用。

考虑一个简单的例子：

```
>>> d = {
     'age': 27, 'name': 'Joe', 
     'numbers': [1, 2, 3, 4, 5], 
     'subdict': {'first': 1, 'second': 2, 'third': 3}
    }
# pretty form
>>> axon.dumps(d, pretty=1)
{ age: 27
  name: "Joe"
  numbers: [1 2 3 4 5]
  subdict: {
    first: 1
    second: 2
    third: 3}}
# compact form
>>> axon.dumps(d)
{age:27 name:"Joe" numbers:[1 2 3 4 5] subdict:{first:1 second:2 third:3}} 
```

它还可以处理消息中的多个对象：

```
>>> msg = axon.dumps([{'a':1, 'b':2, 'c':3}, {'a':2, 'b':3, 'c':4}])
>>> print(msg)
{a:1 b:2 c:3} 
{a:2 b:3 c:4}
{a:3 b:4 c:5} 
```

然后迭代地加载它们：

```
for d in axon.iloads(msg):
   print(d) 
```

# reporting-services - SSRS 引擎

> ID：408868
> 
> 赞同：1
> 
> 时间：2009-01-03T10:37:06.303
> 
> 标签：reporting-services

这是关于 SSRS 引擎的。对于我的项目，我们不会购买 SQL Server 软件。而不是我只想知道的，是否有可能只使用 SSRS 引擎。这样我就可以拥有参考。(DLL) 然后我可以在任何我想要的地方使用。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-03T10:59:08.583

如果我们不考虑让 SSRS 在没有 SQL Server 的情况下运行的技术方面，您仍然需要 SQL Server 的许可。SSRS 是 SQL Server 的集成部分，而不是独立组件。

所以不，如果不购买 SQL Server 许可证，你就不能使用 SSRS，即使你在技术上能够做到这一点，无论如何我对此表示怀疑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-08T20:20:31.987

SQL Server Express 是免费的，随 Reporting Services 一起提供。无需为完整的 SQL Server 掏腰包。

[http://www.microsoft.com/Sqlserver/2005/en/us/express.aspx](http://www.microsoft.com/Sqlserver/2005/en/us/express.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T10:54:21.447

SQL Server 报告服务引擎不仅仅是一个 dll。所以它不会像添加一个 ref 一样简单。

您通常必须将报告部署到网络服务器并在那里调用报告。

我建议你看这里：[http ://en.wikipedia.org/wiki/SQL_Server_Reporting_Services](http://en.wikipedia.org/wiki/SQL_Server_Reporting_Services)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T17:50:53.773

如果这就是您的意思，您可以创建不存储在数据库中的本地报告。

[http://msdn.microsoft.com/en-us/library/ms252067(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms252067(v=vs.80).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-08T14:59:46.123

您需要在 Visual Studio 中使用 BIDS 创建本地报告 (.RDLC)。要呈现这些报告，您需要编写代码来传递参数和数据集值。您需要添加 Report Viewer 的引用并使用 LocalReport 调用 Render 方法。它将返回您呈现报告的字节数组。

```
 using (Microsoft.Reporting.WebForms.LocalReport report = new LocalReport())
            {
                string appPath = AppDomain.CurrentDomain.BaseDirectory;

                report.ReportPath = System.IO.Path.Combine(appPath, "Reports", RDLName.ToString());

                foreach (KeyValuePair<string, object> dataSource in ReportDataSource)
                {
                    report.DataSources.Add(new ReportDataSource(dataSource.Key, dataSource.Value));
                }

                if (ReportParameters != null)
                {
                    foreach (KeyValuePair<string, object> parameter in ReportParameters)
                    {
                        report.SetParameters(new ReportParameter(parameter.Key, (parameter.Value == null ? null : parameter.Value.ToString())));
                    }
                }

                result = report.Render(Format);

                report.Dispose();

                return result;
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-11T01:19:09.850

SSRS 需要 SQL Server，因为 ReportServer 和 ReportServerTempDB 数据库必须托管在 SQL Server 上。SSRS 服务也使用 SQL 代理： [https ://msdn.microsoft.com/en-us/library/ms156421.aspx](https://msdn.microsoft.com/en-us/library/ms156421.aspx)

如果您不打算购买 SQL Server 软件许可证，您可以尝试将 PowerBI 作为您项目的替代解决方案： [https ://powerbi.microsoft.com/en-us/](https://powerbi.microsoft.com/en-us/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-07T10:37:21.530

[使用从 microsoft](https://www.microsoft.com/de-de/download/details.aspx?id=45496) [教程](https://www.codeproject.com/Articles/607382/Running-a-RDL-RDLC-SQL-Report-in-ASP-NET-without-S)下载的报表查看器运行时 来使用它， 您可以在本地呈现 rdl 文件和 rdlc 文件，您只需要自己执行查询

# ruby-on-rails - Rails has_many ：通过连接模型中的额外属性查找

> ID：408872
> 
> 赞同：71
> 
> 时间：2009-01-03T10:39:46.703
> 
> 标签：ruby-on-rails, ruby, has-many, has-many-through

Ruby 和 Rails 都是新手，但我现在受过书本教育（这显然没有任何意义，哈哈）。

我有两个模型，事件和用户通过表 EventUser 加入

```
class User < ActiveRecord::Base
  has_many :event_users
  has_many :events, :through => :event_users
end

class EventUser < ActiveRecord::Base
  belongs_to :event
  belongs_to :user

  #For clarity's sake, EventUser also has a boolean column "active", among others
end

class Event < ActiveRecord::Base
  has_many :event_users
  has_many :users, :through => :event_users
end 
```

这个项目是一个日历，我必须在其中跟踪人们注册并为给定事件刮掉他们的名字。我认为多对多是一个好方法，但我不能这样做：

```
u = User.find :first
active_events = u.events.find_by_active(true) 
```

因为事件实际上没有额外的数据，所以 EventUser 模型有。虽然我可以做到：

```
u = User.find :first
active_events = []
u.event_users.find_by_active(true).do |eu|
  active_events << eu.event
end 
```

这似乎与“铁轨方式”相反。谁能启发我，今晚（今天早上）这一直困扰着我很长时间？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2009-01-03T11:05:04.703

在你的用户模型中添加这样的东西怎么样？

```
has_many  :active_events, :through => :event_users, 
          :class_name => "Event", 
          :source => :event, 
          :conditions => ['event_users.active = ?',true] 
```

之后，您应该能够通过调用为用户获取活动事件：

```
User.first.active_events 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-11-19T17:19:39.933

Milan Novota 有一个很好的解决方案——但`:conditions`现在已被弃用，而且该`:conditions => ['event_users.active = ?',true]`位似乎也不是很正常。我更喜欢这样的东西：

```
has_many :event_users
has_many :active_event_users, -> { where active: true }, class_name: 'EventUser'
has_many :active_events, :through => :active_event_users, class_name: 'Event', :source => :event 
```

之后，您应该仍然可以通过调用来获取用户的活动事件：

```
User.first.active_events 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-01-03T12:43:10.790

即使您的 u.events 没有*显式*调用 user_events 表，由于必要的连接，该表仍*隐式*包含在 SQL中。因此，您仍然可以在查找条件中使用该表：

```
u.events.find(:all, :conditions => ["user_events.active = ?", true]) 
```

当然，如果您打算经常进行此查找，那么可以确定，按照 Milan Novota 的建议给它一个单独的关联，但*您*不需要这样做

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-11-10T10:06:29.437

好吧，`User`模型中的责任比实际需要的要多，而且没有充分的理由这样做。

我们可以首先在`EventUser`模型中定义范围，因为它实际上属于哪里，例如：

```
class EventUser < ActiveRecord::Base
  belongs_to :event
  belongs_to :user

  scope :active,   -> { where(active: true)  }
  scope :inactive, -> { where(active: false) } 
end 
```

现在，用户可以同时拥有两种事件：活动事件和非活动事件，因此我们可以在`User`模型中定义如下关系：

```
class User < ActiveRecord::Base
  has_many :active_event_users,   -> { active },   class_name: "EventUser"
  has_many :inactive_event_users, -> { inactive }, class_name: "EventUser"

  has_many :inactive_events, through: :inactive_event_user,
                             class_name: "Event",
                             source: :event
  has_many :active_events,   through: :active_event_users,
                             class_name: "Event",
                             source: :event
end 
```

这种技术的美妙之处在于，作为活动或非活动事件的功能属于`EventUser`模型，如果将来需要修改功能，只需在一个地方修改：`EventUser`模型，所做的更改将反映在所有其他型号。

# c# - 海量存储器默认目录

> ID：408880
> 
> 赞同：0
> 
> 时间：2009-01-03T10:47:29.917
> 
> 标签：c#

在我的应用程序中，我想同时支持大容量内存和存储卡。但是大容量存储器的默认驱动器名称是“F：”吗？

或者它可能会改变。我怎么知道它是否改变了？！？

注：Lang是C#，windows应用，Mobile系列：S60

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T10:53:02.417

我想你的意思是大容量存储设备？没有默认驱动器号，用户可以随时更改它们。最好不要依赖将分配给设备的驱动器号，而是弹出一个可能的设备列表（以 Google 的 picasa 为例）

# php - 通过 PHP 连接到 SQL Server mdf 文件

> ID：408896
> 
> 赞同：1
> 
> 时间：2009-01-03T10:57:02.707
> 
> 标签：php, asp.net, sql-server

我目前有一个涉及 PHP 和 asp.net 的学校作业。现在的任务是我用 PHP 做一个电子商务网站，它是用 asp.net 做的 CMS。因此，两个网站都连接到 SQL Server 中的同一个数据库。

目前使用 Visual Studio 的 SQL Server Express，我已经生成了一个 mdf 文件作为数据库。我正在使用 xampplite 作为 Web 服务器和 notepad++ 来编写 PHP 代码，并且我正在尝试连接到 mdf 文件。

是否可以？如果是这样，我应该使用什么作为连接字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T11:30:42.967

在手册中，这一切都得到了解释。也看看用户评论。

[http://www.php.net/manual/en/function.mssql-connect.php](http://www.php.net/manual/en/function.mssql-connect.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T11:36:58.367

您将需要连接到附加了 mdf 文件的正在运行的 SQL Server 实例，而不是“连接到 mdf 文件”。正如 Vinko 所说，它包含在 mssql_ 函数的 PHP 手册中。您可能需要首先在 SQL Server 中创建一个可用于连接的用户名/密码。

# asp.net - 为 ASPX 生成的 HTML 中的损坏引号

> ID：408898
> 
> 赞同：1
> 
> 时间：2009-01-03T10:58:22.953
> 
> 标签：asp.net

简介：我很确定这是我的错。但我只是没有看到它，在撕掉我的头发之前，我想我应该在这里问一下；）

我的 ASPX 中有一个如下所示的按钮：

```
<input onClick="ELB_ClearSelection('DropDownList___00178');"
type="Button" value="Clear" /> 
```

生成的 HTML 说：

```
<input onClick="ELB_ClearSelection("DropDownList___00178");"
type="Button" value="Clear" /> 
```

...这显然不起作用:(

我通过 HTML Validator 运行了这个东西，除了“通常”的抱怨（与它不完全“理解”ASPX 相关）我没有看到任何特别的东西，我已经以编程方式检查了平衡的引号并且没有看到任何可疑的东西，所以我有不知道在哪里进一步寻找:(

如果有帮助，这里是完整的 ASPX：

```
<%@ Register tagPrefix="des" assembly="PeterBlum.DES" namespace="PeterBlum.DES" %>
<%@ Register tagPrefix="despval" assembly="PeterBlum.DES.NativeToDES" namespace="PeterBlum.DES.NativeToDES" %>
<%@Page Language="apl" Debug="true" Inherits="COPA" src="COPA_MS.dws" %>
<%@ Register TagPrefix="mbcbb" Namespace="MetaBuilders.WebControls" Assembly="MetaBuilders.WebControls.ComboBox" %>
<%@ Register TagPrefix="ELB" Namespace="ELB" Assembly="EasyListBox" %>
<html><head>
    <meta name="date"      content="2009-01-03T10:55:39" />
    <meta name="generator" content="COPA_MS.DWS" defs="(11)(13)(14)" />
    <meta name="publisher" content="Dynamic Logistics Systems GmbH" />
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
    <title>
      COPA_MS  - Dispogruppen
      </title>   <link rel="stylesheet" type="text/css" href="./copa.css" />   <script language="javascript" type="text/javascript" src="custom-form-elements.js"></script>
    </head><body>
    <h1>
      <span class="copa">COPA-</span><span class="ms">MS:</span> Dispogruppen
      </h1>
    <form runat=server><des:PageSecurityValidator id="PageSecurityValidator1" runat="server" >
        </des:PageSecurityValidator>

      <input runat="server" type="hidden" NAME="SelMaskeId" value="11" ID=SelMaskeID>
        <input runat="server" type="hidden" NAME="TreffId" value="13" ID=TreffID>
          <table>
            <tr>
              <td valign="top"><asp:Label runat="server" ID="Label__________00176" Text="Code Dispogruppe" /> </td><td><elb:EasyListBox runat="server" ID="ComboBox_______00176"  Text="" MaxLength="6" Width="100"   SelectQuery="***" ConnectionStringSqlServer="xxx"  DataValueField="code" DataTextField="code" DisplayMode="Combo" LimitToList="false" ></elb:EasyListBox></td>
              </tr><tr>
              <td valign="top"><asp:Label runat="server" ID="Label__________00177" Text="Bezeichnung" /> </td><td><elb:EasyListBox runat="server" ID="ComboBox_______00177"  Text="" MaxLength="50" Width="210"  SelectQuery="***" ConnectionStringSqlServer="xxx"  DataValueField="bez" DataTextField="bez" DisplayMode="Combo" LimitToList="false" ></elb:EasyListBox></td>
              </tr><tr>
              <td valign="top"><asp:Label runat="server" ID="Label__________00178" Text="Lieferant" /> </td><td><elb:EasyListBox runat="server" ID="DropDownList___00178"  Text="" MaxLength="0" Width="210" SelectQuery="***" ConnectionStringSqlServer="xxx"  DataValueField="id" DataTextField="bez"></elb:EasyListBox>
                 <input type="Button" value='Auswahl entfernen' onClick='ELB_ClearSelection("DropDownList___00178");' />
               </td>
              </tr><tr>
              <td valign="top"><asp:Label runat="server" ID="Label__________00182" Text="Dispo-Verfahren" /> </td><td><elb:EasyListBox runat="server" ID="DropDownList___00182"  Text="" MaxLength="0" Width="280       " Tref_Width="280" Tref_MaxLength="200" s_left="" s_top="" s_position="" css_sl="" css_tl="" css_dt=""  SelectQuery="***" ConnectionStringSqlServer="xxx"  DataValueField="id" DataTextField="bez"></elb:EasyListBox>
                  <input type="Button" value="Auswahl entfernen" onClick="ELB_ClearSelection('DropDownList___00182');" /></td>
              </tr>
            </table><br /><br />
          <asp:Button runat="server" ID="Button_Suchen"  Text="Suchen"  onClick="CatchAll_onClick" />

          </form>
        </body>
      </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-03T11:12:21.287

改变这个：

```
onClick='ELB_ClearSelection("DropDownList___00178")' 
```

对此：

```
onClick="ELB_ClearSelection('DropDownList___00178')" 
```

在你的 ASPX.

我将避免评论在您的标记中为您的数据库选择查询和登录信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T22:16:27.280

Well, I finally changed this little input to asp:Button which behaves better. Seems it's not a good idea to mix HTML-Controls and ASP-Controls. Anyway, thanks for your help, I learned a lot more than that. Embarrassing lesson, as expected ;) :(

# c# - 条件编译取决于 C# 中的框架版本

> ID：408908
> 
> 赞同：25
> 
> 时间：2009-01-03T11:03:34.253
> 
> 标签：c#, c-preprocessor, conditional-compilation

是否有任何预处理器符号允许类似

```
#if CLR_AT_LEAST_3.5
// use ReaderWriterLockSlim
#else
// use ReaderWriterLock
#endif 
```

或其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-03T11:10:11.213

我认为没有任何预定义的“预处理器”符号。但是，您可以像这样实现您想要的：

1.  为您的项目创建不同的配置，为您想要支持的每个版本的 CLR 配置一个。

2.  为每个 CLR 版本选择一个符号`VERSION2`，例如 等。`VERSION3`

3.  在每个配置中，定义一个与之关联的符号并取消定义所有其他符号。

4.  在条件编译块中使用这些符号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-03T11:24:38.063

没有任何内置的，但您可以提供自己的。

对于这个特定的场景，您可能希望将逻辑封装在（例如）一个包装器（锁）类中，这样您就不会`#if`分散所有代码；当然，如果你只是做一点锁定，那可能不值得麻烦。

我使用不同的配置和/或项目为各种平台构建 - 即使用此技巧为 .NET 2.0、.NET 3.0、mono、CF 2.0、CF 3.5 构建[protobuf-net 。](http://code.google.com/p/protobuf-net/)该代码具有`#if`基于不同符号的块来控制逻辑 - 例如，`BinaryFormatter`在 CF 上不可用，`WCF`仅在 .NET 3.0上可用，`Delegate.CreateDelegate`在 CF 2.0 上不可用，等等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-03T11:13:55.340

您可以使用反射来动态检查 ReaderWriterLockSlim 等特定类型是否可用（而不是使用预处理器）。

这将为您提供一个优势，即您可以部署产品的单个版本，并且拥有（或更新到）.NET 3.5 的用户将从优化的代码中受益。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-03T11:10:48.030

[您可以使用/define 编译器开关](http://msdn.microsoft.com/en-gb/library/0feaad6z.aspx)手动设置此符号。然后为每个所需的 clr 版本创建不同的构建配置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-04T17:04:53.367

如果这就是你需要做的，我想你*可以*使用 Environment.Version，但就像[divo 的](https://stackoverflow.com/questions/408908/conditional-compilation-depending-on-the-framework-version-in-c#408923)解决方案一样，它似乎确实留下了很多不必要的代码。

# iphone - 我需要有关动画回调 (iPhone) 的帮助

> ID：408917
> 
> 赞同：6
> 
> 时间：2009-01-03T11:08:47.860
> 
> 标签：iphone, animation

我正在 iPhone 中创建一个应用程序，其中有几个 UIView 和图层。我正在使用 CAKeyframeAnimation 类制作一些动画，并且由于必须链接动画，因此我已经覆盖了 UIView 中的 animationDidStop 方法。

我得到了正确的回调，但是我不知道如何找到结束的动画，以便我可以开始下一个。只有回调函数的参数是 CAAnimation 对象和布尔值。

我可以通过在类中设置一个属性并为我使用的各种动画使用枚举来解决这个问题。但是我只是想知道回调中是否有任何内置属性，我可以在 CAKeyframeAnimation 对象中设置这些属性，然后在回调中引用相同的属性。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-03T20:23:45.247

您可以为动画指定名称并在您的委托方法中读取它。

```
[animation setValue:"firstAnimation" forKey:@"name"]; 
```

...

```
- (void)animationDidStop:(CAAnimation*)animation finished:(BOOL)finished {
  if([[animation valueForKey:@"name"] isEqual:@"firstAnimation"] && finished) {
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-03T20:08:38.973

我知道您说您正在使用 CAKeyframeAnimations，但是如果您想要 UIView 属性（原点、边界、alpha 等）的简单动画，您可以将属性或属性的更改包装在开始/提交块中并指定动画完成时调用的委托方法。只要委托方法接受三个参数，您就可以随意调用它。例如：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:ANIMATIONDURATIONINSECONDS];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(yourAnimationHasFinished:finished:context:)];
// Change property or properties here
[UIView commitAnimations]; 
```

会导致方法

```
- (void)yourAnimationHasFinished:(NSString *)animationID finished:(BOOL)finished context:(void *)context; 
```

被称为。这允许的任意命名将为您提供一种分离处理以完成不同动画的方法。对于简单的动画，我更喜欢这个。

为了处理直接与 CALayers 交互的更复杂的动画，animationDidStop:finished: 委托方法确实返回已完成的动画对象。如果您正在创建一个实例作为多个动画的委托，您可以创建动画和 NSNumbers 的 NSMutableDictionary 以在 animationDidStop:finished: 方法中的 switch 语句中使用。在创建 CAKeyframeAnimation 时，使用 setObject:forKey: 将其分配给其匹配编号，然后使用 objectForKey: 在完成方法中找到与该动画对应的编号，并将其输入到 switch 语句中。

# ruby - 您如何监控您的 Ruby 编程效率？

> ID：408951
> 
> 赞同：0
> 
> 时间：2009-01-03T11:38:22.433
> 
> 标签：ruby, monitoring

Ruby 编码员：您如何监控您的生产力？

我很想知道你用什么来跟踪你做了多少以及做得如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-03T12:34:54.270

对于任何编程任务，跟踪生产力的最佳方法是跟踪交付的需求/功能。每种敏捷方法都强调交付工作软件[阅读满足每个 sprint 的部分要求]。因此，诸如行数等指标是没有实际意义的[当您有一个人在大部分时间进行编程并使用其他人的登录名签入代码时]。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-04T07:18:02.490

与语言一样，您必须为项目设定目标/里程碑。然后，您将这些目标分解为个人任务。任务越小越具体，就越容易跟踪您的进度。我使用一个名为[Redmine](http://www.redmine.org/wiki/redmine)的项目管理 Web 应用程序来跟踪这些任务。在我设计了测试之后，我开始创建代码测试，这些测试将概述每个测试的代码标准。我对 Ruby 的主要使用是使用 Ruby on Rails，它对测试有很好的支持。完成测试后，我开始编写应用程序。当应用程序通过给定任务的所有测试时，可以将其标记为已完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-07T21:47:04.607

在项目开始时，您可以通过相关性和测试次数来判断。之后，通过测试的数量。

*当然，相关性*是关键词。如果代码还没有*做*任何事情，或者没有提供任何价值，那么达到这一点是您对生产力的第一个测试。

# algorithm - A* 算法的正确表述

> ID：408952
> 
> 赞同：14
> 
> 时间：2009-01-03T11:38:39.267
> 
> 标签：algorithm, artificial-intelligence, path-finding, a-star, dijkstra

我正在查看 A* 寻路算法的定义，它在不同地方的定义似乎有所不同。

不同之处在于遍历节点的后继节点时执行的操作，并发现后继节点在封闭列表中。

*   一种方法（由[Wikipedia](https://en.wikipedia.org/wiki/A*_search_algorithm)和[本文](https://web.archive.org/web/20171022224528/http://www.policyalmanac.org:80/games/aStarTutorial.htm)建议）说：如果继任者在封闭列表中，则忽略它
*   另一种方法（例如，在[此处](https://www.gamedeveloper.com/pc/features-gdctv-the-near-future-of-media-distribution-)和[此处](https://web.archive.org/web/20091026121432/http://geocities.com/jheyesjones/pseudocode.html)建议）说：如果继任者在封闭列表中，请检查其成本。如果它高于当前计算的分数，则从封闭列表中删除该项目以供将来检查。

我很困惑 - 哪种方法是正确的？直觉上，第一个对我来说更有意义，但我想知道定义上的差异。其中一个定义是错误的，还是它们在某种程度上是同构的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-03T12:22:08.727

只有当通往任何重复状态的最优路径总是首先被遵循时，第一种方法才是最优的。如果启发式函数具有**一致性**属性（也称为**单调性**），则此属性成立。启发式函数是一致的，如果对于每个节点`n`和 的每个后继者`n'`，`n`到达目标的估计成本`n`不大于到达目标的步骤成本加上到达目标的估计`n'`成本。`n``n`

如果启发式函数仅仅是可接受的，则第二种方法是最优的，也就是说，它永远不会高估达到目标的成本。

每个一致的启发式函数也是可接受的。尽管一致性是比可接纳性更严格的要求，但必须非常努力地构造可接纳但不一致的启发式函数。

因此，即使第二种方法更通用，因为它适用于严格更大的启发式函数子集，但第一种方法在实践中通常就足够了。

参考：*A* 搜索小节：最小化总估计解决方案成本在《**人工智能：现代方法*》一书的第*4.1 节知情（启发式）搜索策略*中。

 *# api - 如何动态查找到给定 URL 的入站链接？

> ID：408954
> 
> 赞同：2
> 
> 时间：2009-01-03T11:40:22.417
> 
> 标签：api, screen-scraping, tracking, hyperlink

Technorarati 有他们的[Cosmos api](http://technorati.com/developers/api/cosmos.html)，它工作得相当好，但限制了您用于非商业用途，并且每天不超过 500 个查询。

Yahoo 有一个[Site Explorer InLink Data API](http://developer.yahoo.com/search/siteexplorer/V1/pageData.html)，但它从字面上定义了任务，从博客中的侧边栏小部件返回链接，而不仅仅是来自博客内容内部的链接。

是否有任何其他替代方法可以跟踪谁链接到给定 URL（想想[Techmeme.com](http://www.techmeme.com)上故事下方运行的讨论链接）？还是我必须自己动手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-05T11:25:20.053

这是针对您控制下的 URL 的链接吗？

如果是这样，您可以快速创建一些在 Referrer HTTP 标头中记录条目的内容。

如果您想在不更改应用程序代码的情况下对整个网站执行此操作，则可以为您选择的 Web 服务器实现 ISAPI 过滤器或等效项。

从网络爬虫公开获得的信息总是不完整和不可靠的（并不是说我的解决方案不是......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T09:02:36.680

好吧，它不是一个 API，但如果你用谷歌搜索（例如）：“link:nytimes.com”，返回的搜索结果会显示指向该站点的入站链接。

我还没有尝试实现您想要的功能，但[Google 搜索 API](http://code.google.com/apis/ajaxsearch/documentation/)几乎可以肯定内置了该功能。

# visual-studio - Visual Studio“转到定义”菜单选项行为 - 为什么 C# 和 VB 项目之间不一致

> ID：408959
> 
> 赞同：4
> 
> 时间：2009-01-03T11:59:34.840
> 
> 标签：visual-studio, visual-studio-2008, visual-studio-2005

在使用 C# 项目在 VS2005+ 中进行开发时，我右键单击框架方法/属性/类型并选择“转到定义”，默认情况下，我们会得到一个新的锁定选项卡，其中包含从框架生成的代码，适当标记 [来自元数据]。

但是，当我们在 VB.NET 项目中执行相同操作时，您会被带到一个带有相关对象浏览器视图的新选项卡。

这一直让我觉得很奇怪，并希望这背后有一个很好的理由。IMO 对象浏览器更好。

**默认视觉工作室行为的差异是否存在合乎逻辑的原因？如果是这样，它是什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-03T15:16:13.913

这是每个团队根据他们认为各自客户希望看到的内容做出的选择。VB 用户对对象浏览器有一个历史附件，并且许多 VB 功能都集成到其中（Go To Def 就是其中之一）。C# 在 VS2005 中进行了切换，以便为他们的 GoTo def 版本动态生成元数据，因为他们相信他们的客户会更喜欢这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-04T14:33:56.273

您可以为此安装 Resharper。

它允许您在单击“转到定义”时选择默认行为。

# console - 控制台打印无滚动

> ID：408965
> 
> 赞同：5
> 
> 时间：2009-01-03T12:02:50.000
> 
> 标签：console, printing

我看到控制台应用程序打印颜色，并看到诸如 ffmpeg 之类的应用程序在自身上打印文本而不是换行。如何在现有行上打印？我想在我的控制台应用程序的最顶部或最底部显示 fps，并让常规 printfs 去那里并正常滚动。

我需要这个用于 Windows，但这是跨平台的，所以我最终会有一个 linux 和 mac 实现。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-03T12:16:27.710

有两种简单的可能性适用于 linux 和 windows，但仅适用于一行：

*   `printf("\b");`将返回一个字符，因此您可以计算要退格的字符数并在循环中触发它，或者您知道您只写 n 个数字并这样做
    `printf("\b\b\b\b\b\b\b\b\b\b");`
*   `printf("text to be overwritten by next printf\r");`这会将光标返回到行首，因此任何下一个 printf 都会覆盖它。确保写入相同长度或更长的字符串，以便完全覆盖它。

如果你想重写几行，没有什么比[ncurses](http://en.wikipedia.org/wiki/Ncurses)更便携的了，几乎每个操作系统都有它的库，你不必照顾 ANSI 差异。

编辑：添加到 ncurses 维基百科页面的链接，提供了很好的概述和介绍，以及链接列表，可能还有您首选语言的翻译

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-03T12:15:45.120

查看 ncurses。它具有大多数脚本语言的绑定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-03T12:30:28.087

您可以使用`'\r'`而不是`'\n'`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-03T12:06:56.293

ASCII 字符编号 8（AKA Ctrl-H、BS 或 Backspace）可让您备份一个字符。ASCII 字符号 13（也称为 Ctrl-M、CR 或回车）将光标返回到行首。

如果您在 C 中工作，请`putchar(8);`尝试`putchar(13);`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-03T12:50:07.673

颜色的魔力、光标定位和闪烁等都在[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)中。任何能够处理 ANSI 代码的文本控制台都可以使用它们，只需将它们打印到控制台（即通过 bash 脚本中的 echo 或 C 中的 printf() 函数）。

Unix 终端支持 ANSI 转义序列，Windows 世界在旧的 MS-DOS 时代曾经支持它们，但多字节控制台支持结束了这一点。[这里](http://wapedia.mobi/en/ANSI_escape_code)有更多信息。[但是，除了在 Windows 上可用](https://stackoverflow.com/questions/77744/how-can-i-change-the-text-color-in-the-windows-command-prompt)的 ANSI 序列打印之外，还有其他方法。此外，如果您在 Windows 上安装了 Cygwin，则处理 ANSI 代码的效果与在任何 Unix 终端上一样好。

许多人提到 Ncurses 库，它是任何基于 gui 的基于文本的应用程序的事实上的标准。这个库的作用是隐藏所有终端差异（Windows/Unix 风格）以在所有平台上表示尽可能相同的相同信息，尽管根据我自己的经验我告诉你这并不总是正确的（即典型的文本窗口框架更改，因为特殊字符并非在所有字符编码下都可用）。使用 ncurses 的对应物是它是一个完整的 API，与简单地为简单的事情（例如更改字体颜色、清洁屏幕或将光标移回随机位置）编写一些 ANSI 转义序列相比，开始使用它要困难得多位置。

For the sake of completeness I paste an example of use of ANSI sequence under Linux that changes the prompt to blue and shows the date:

```
PS1="\[\033[34m\][\$(date +%H%M)][\u@\h:\w]$ " 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-03T12:17:13.947

您可以使用[Ncurses](http://web.cs.mun.ca/~rod/ncurses/ncurses.html) -

> `ncurses`包是一个子程序库，用于独立于终端的屏幕绘制和输入事件处理，它向程序员提供高级屏幕模型，隐藏终端类型之间的差异并自动优化输出以将一个满屏文本更改为另一个

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-03T12:45:50.647

根据您正在开发的平台，您可能会使用更强大的 API，而不是旧的 ASCII 控制代码。

例如，如果您在 Win32 上工作，您实际上可以直接操作控制台屏幕缓冲区。

一个好的起点可能是这里 [http://msdn.microsoft.com/en-us/library/ms683171(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms683171(VS.85).aspx)

我一直在寻找类似的功能/API，它允许我将控制台作为其他平台的文本流之外的东西来访问。还没有找到任何东西，但话说回来，我并没有那么努力地寻找。

希望能帮助到你。

# c++ - IOCP，跨平台库？

> ID：408970
> 
> 赞同：2
> 
> 时间：2009-01-03T12:11:28.280
> 
> 标签：c++, iocp

我最近在 windows 平台上遇到了一个叫做 IOCP 的东西，更准确地说：输入/输出控制端口。当服务器软件需要同时容纳数千名用户时，这似乎是编写服务器软件*的最有效方式。*（如果我错了，请纠正我，但是每个套接字的线程、轮询和异步回调（每个回调上的线程）都不够有效。）

我想知道是否有任何 3rd 方库可以实现这个概念。我知道 win32 api 为我们提供了 CreateIoCompletionPort，FreeBSD 有 kqueue，而 linux 通常可以使用 /dev/epoll，它们的工作方式有点相似......但是没有一个跨平台库（比如 boost::thread）来处理这些东西为了我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-03T12:26:16.380

你看过 boost::asio 吗？我不确定它是否具有所有这些功能，但我相信这是它的目的之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:09:51.300

我知道这是对该主题的较晚回复，但对于那些对在 Linux/UNIX 和 Windows 上支持异步 IO 的 x 平台库感兴趣的人，您可能想看看[libuv](https://github.com/joyent/libuv)。

[libuv](https://github.com/joyent/libuv)最初是作为 node.js 的基础构建的，但它已经发展成为一个强大的抽象库，用于许多低级的 x 平台问题，包括异步 IO、非阻塞 TCP 套接字和命名管道、UDP、计时器、子进程生成、高分辨率时间、线程池调度等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-12T08:06:14.373

[libevent](http://monkey.org/~provos/libevent/)可以在许多 *nix 操作系统上运行，也可以在 Windows 上运行。

# linux - 比较 bash 中的整数，需要一元运算符

> ID：408975
> 
> 赞同：138
> 
> 时间：2009-01-03T12:18:34.397
> 
> 标签：linux, bash, shell

下面的代码给出

> [：-ge：应为一元运算符

什么时候

```
i=0

if [ $i -ge 2 ]
then
    #some code
fi 
```

为什么？

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2009-03-03T04:41:42.377

您的问题源于`$i`您的语句失败时具有空白值的事实。 如果其中一个可能为空，则在执行比较时**始终引用您的变量，例如：**

```
if [ "$i" -ge 2 ] ; then
  ...
fi 
```

这是因为 shell 如何处理变量。假设原来的例子，

```
if [ $i -ge 2 ] ; then ... 
```

执行特定代码行时，shell 所做的第一件事就是替换 的值`$i`，就像您最喜欢的编辑器的*搜索和替换*功能一样。所以假设它`$i`是空的，或者，甚至更说明，假设它`$i`是一堆空格！外壳将替换`$i`如下：

```
if [     -ge 2 ] ; then ... 
```

现在变量替换已经完成，shell 继续进行比较并且.... 失败，因为它看不到.*左侧*的任何可理解的内容`-gt`。但是，引用`$i`：

```
if [ "$i" -ge 2 ] ; then ... 
```

变成：

```
if [ "    " -ge 2 ] ; then ... 
```

shell 现在看到双引号，并且知道您实际上是在将四个空格与 2 进行比较，并将跳过`if`.

您还可以选择为`$i`if`$i`为空白指定默认值，如下所示：

```
if [ "${i:-0}" -ge 2 ] ; then ... 
```

这将替换值 0 而不是`$i`未定义`$i`。我仍然保留引号，因为如果`$i`是一堆空白，那么它不算为*undefined*，它不会被 0 替换，您将再次遇到问题。

有空时请阅读[本文。](https://web.archive.org/web/20140116143717/http://partmaps.org/era/unix/shell.html)许多人将 shell 视为一个黑盒子，但它使用非常少且非常简单的规则运行 - 一旦您知道这些规则是什么（其中之一是变量在 shell 中的工作方式，如上所述），shell 将没有更多的秘密给你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T09:47:39.700

我需要加上我的 5 美分。我看到每个人都使用`[`or `[[`，但值得一提的是它们不是 if 语法的一部分。

对于算术比较，请`((...))`改用。

> ((...)) 是一个算术命令，如果表达式非零，则返回退出状态 0，如果表达式为零，则返回 1。如果需要副作用（分配），也用作“让”的同义词。
> 
> 请参阅：[算术表达式](http://mywiki.wooledge.org/ArithmeticExpression)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-03T12:31:02.140

从错误消息来看，执行时 i 的值是空字符串，而不是 0。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-03T12:23:02.220

你的剧本效果很好。您确定在 if 之前没有将其他任何内容分配给“i”吗？

一个常见的错误也是不要在方括号前后留下空格。

# javascript - 任何以基于标准的跨平台 JS 和 DOM 为目标的 JavaScript 框架？

> ID：408978
> 
> 赞同：1
> 
> 时间：2009-01-03T12:22:09.070
> 
> 标签：javascript, dom, frameworks

我试图找到任何 JavaScript 框架，其唯一目的是在所有浏览器中标准化 DOM 和 JavaScript。

我不是在寻找创建自己的 API 来解决这些常见问题的框架。我想要一些允许我在 Internet Explorer 中调用例如 myElement.dispatchEvent("click") 的东西。不是用自己的 API 创建自己的观察者模式的东西。

目前我能找到的最接近的东西是 www.flowjs.com，它看起来不错，涵盖了很多，但缺少 document.createEvent 和其他一些功能，并且没有提供作者的联系信息。

问候，

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-03T12:40:45.913

[Dean Edwards 的 Base2](http://code.google.com/p/base2/)可能正是您想要的。您可能会发现[Diego Perini 的 NWEvents](http://code.google.com/p/nwevents/)也很有趣……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T14:14:56.660

尽管它有自己的 API，但 Prototype 试图做到这一点（至少部分如此）。如果您使用 Firebug，您会注意到在 DOM 中添加了许多方法，以使 DOM 在所有浏览器中均等。

我知道这不是您正在寻找的，但它是一个中途的解决方案。

此外，在某些浏览器中，可能无法覆盖 DOM 的某些元素。尝试这样做`window.alert = function(i) {};`，它会在某些浏览器中引发错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T16:15:59.893

有包含 DOM-Events / DOM-Core 和许多其他标准实现的[Ample SDK框架。](http://www.clientside.ru)虽然，它还不太为人所知，但我强烈建议您研究一下。

另外，请注意， myElement.dispatchEvent("click") 不是标准的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-30T03:54:30.177

跨浏览器标准化 JS 和 DOM 的 JS 库的全面总结：

1.  base2
    创建者：Dean Edwards - [http://dean.edwards.name/](http://dean.edwards.name/)
    项目页面：[http ://base2.googlecode.com/](http://base2.googlecode.com/)

2.  flowjs
    创建者：Richard Herrera - [http://http://doctyper.com/](http://http://doctyper.com/)
    主页： http: [//flowjs.com/](http://flowjs.com/)
    项目页面： http: [//flowjs.googlecode.com/](http://flowjs.googlecode.com/)

3.  JDC
    创作者：Tavs Dokkedahl?? - [http://www.jslab.dk/](http://www.jslab.dk/)
    项目页面： http: [//www.jslab.dk/projects.php](http://www.jslab.dk/projects.php)

4.  SLAB
    创建者：Sean Hogan（就是我）- [http://meekostuff.net/](http://meekostuff.net/)
    项目页面： http: [//meekostuff.net/projects/SLAB](http://meekostuff.net/projects/SLAB)

警告：这些库可能比您预期的要大。IE6 / IE7 实际上需要相当多的代码。

# c# - 问题：使用 C# 获取移动驱动器大小会引发异常 - 已评论

> ID：408985
> 
> 赞同：0
> 
> 时间：2009-01-03T12:29:39.180
> 
> 标签：c#

当我运行此代码时：

```
CONADefinitions.CONAPI_FOLDER_INFO2 FolderInfo;
int iResult = 0;
IntPtr Buffer =  Marshal.AllocHGlobal(Marshal.SizeOf(typeof(CONADefinitions.CONAPI_FOLDER_INFO2)));                
iResult = CONAFileSystem.CONAFindNextFolder(hFindHandle, Buffer);
while (iResult == PCCSErrors.CONA_OK )
{
 FolderInfo = (CONADefinitions.CONAPI_FOLDER_INFO2)Marshal.PtrToStructure(Buffer,typeof(CONADefinitions.CONAPI_FOLDER_INFO2));                                                             
    //......................... i got an error msg here as follows:
    // Error Messege: 
       FatalExecutionEngineError was detected Message: The runtime has encountered a 
       fatal error. The address of the error was at 0x7a0ba769, on thread 0x1294\. The
       error code is 0xc0000005\. This error may be a bug in the CLR or in the unsafe 
       or non-verifiable portions of user code. Common sources of this bug include 
       user marshaling errors for COM-interop or PInvoke, which may corrupt the stack. 
```

如何使用 CONADefinitions.CONAPI_FOLDER_INFO2，因为当我使用 CONADefinitions.CONAPI_FOLDER_INFO 时它只给了我设备的名称和标签，但是什么时候使用 CONADefinitions.CONAPI_FOLDER_INFO2 它给了我 freeSize 和 TotalSize

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T13:34:13.887

我不确定那个错误是什么意思，但如果你想获得驱动器的大小，你可以使用

```
 DriveInfo di = new DriveInfo("f");  //Put your mobile drive name
        long totalBytes = di.TotalSize;
        long freeBytes = di.TotalFreeSpace; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-04T12:18:23.587

当您尝试将缓冲区中的数据转换为与最初由 CONAFileSystem.CONAFindNextFolder 创建的不同类型的结构时，出现异常是正确的。

您正试图将 CONADefinitions.CONAPI_FOLDER_INFO 类型的数据结构强制转换为 CONADefinitions.CONAPI_FOLDER_INFO2 类型的结构。它们几乎肯定有不同的长度等等，所以这种方法极不可能奏效。

根据在 Symbian OS 上进行 C++ 开发的经验，诺基亚很可能在这里使用的模式是，他们随后开发了更新版本的 API，因此创建了更新版本的 CONADefinitions.CONAPI_FOLDER_INFO 结构（即 CONADefinitions.CONAPI_FOLDER_INFO2 ）。

假设这是正确的，则有 3 种可能性：
1）第一个函数有一个枚举参数，它指定要创建哪个版本的输出结构。
2) 有一个返回新结构的新函数，例如 CONAFileSystem.CONAFindFirstFolder2, CONAFileSystem.CONAFindNextFolder2
3) 诺基亚内部开发了新版本，但尚未公开发布。

# c# - C# 4.0 规范测试版？

> ID：408987
> 
> 赞同：4
> 
> 时间：2009-01-03T12:30:41.363
> 
> 标签：c#, c#-4.0, specifications

谁能澄清微软是否已经发布了 C# 4.0 的 [draft] 规范？如果是这样，我在哪里可以找到/下载它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T17:43:03.713

C# 4.0 草案规范[位于此处](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=DFBF523C-F98C-4804-AFBD-459E846B268E)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-03T12:37:54.797

试试这里[C# 4.0 Documentation](http://code.msdn.microsoft.com/csharpfuture/Release/ProjectReleases.aspx?ReleaseId=1686)它可能对你来说太高了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-03T13:37:01.697

尚无规范，但[CTP](http://www.microsoft.com/downloads/details.aspx?FamilyId=922B4655-93D0-4476-BDA4-94CF5F8D4814&displaylang=en)可用于玩 - 但请注意，这还不包括（初步）[文档](http://code.msdn.microsoft.com/csharpfuture/Release/ProjectReleases.aspx?ReleaseId=1686)中讨论的所有功能 - 特别是，许多`dynamic`功能（特别是运营商支持）缺失（含义：使用的 C# 语言/编译器功能`dynamic`；据我所知，运行时支持它们，但语言还不支持）。

在编译 lambda 时，看看该语言支持多少[新`Expression`方法也会很有趣。](http://marcgravell.blogspot.com/2008/11/future-expressions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-11T09:05:54.833

[在此处](http://www.microsoft.com/downloads/en/details.aspx?familyid=DFBF523C-F98C-4804-AFBD-459E846B268E)查找 C# 语言规范 4.0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-03T12:39:59.160

还没有，尽管许多功能已经公布。DLR（动态语言运行时）扩展是 4.0 的最大新功能，以预发布 beta 形式提供。我的公司[www.thinkbottomup.com.au](http://www.thinkbottomup.com.au)已广泛使用它们，以防您需要任何帮助 :)

哦...有关详细信息，请参见[此处](http://blogs.msdn.com/mmaly/archive/2008/03/23/dlr-beta-1.aspx)

# java - Java(Swing)：影响GridBagLayout中JList的高度

> ID：408989
> 
> 赞同：0
> 
> 时间：2009-01-03T12:31:14.280
> 
> 标签：java, swing

我想用 Java 构建一个对话框，里面有一个 List 和几个按钮。该列表最终与按钮的高度相同（大约一行），整个对话框大约有两行高度。

但是，我希望对话框更高（可能 10 行）并且 JList 占用大部分空间.. 我已经玩过参数，但它无法让它工作. 有任何想法吗？

这是我当前的代码：

```
//layout
setLayout(new GridBagLayout());
GridBagConstraints gbc = new GridBagConstraints();
gbc.fill = GridBagConstraints.BOTH;

int y = 0;
//List
gbc.gridx = 0;
gbc.gridy = y;
gbc.weighty = 3;
gbc.weightx = 1;
gbc.gridwidth= 3;
add(new JScrollPane(_myList), gbc);
_myList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

// Buttons
gbc.gridx = 1;
gbc.gridy = ++y;
gbc.gridwidth = 1;
gbc.weighty = 0;
add(_Save, gbc);
gbc.gridx = 2;
add(_Cancel, gbc); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-03T14:04:03.047

对于列表，设置 weightY=1 而不是 3。设置为 3 将使列表的空间大于列表本身。99.9% 的时间使用 GridBagLayout，weightX/Y 值应始终为 0 或 1。此外，gridWidth 可能应为 2 而不是 3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-05T01:24:52.470

您不妨考虑调用`_myList.setVisibleRowCount(n)`强制列表的首选大小（可见行数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-03T14:01:36.890

我做了更多的论证，显然这种行为是由 _myList 的 ListModel 中的项目数引起的。当我用比我当前使用的一两个项目更多的项目填充它时，列表就会正确显示。希望这有助于确定问题并找到解决方案..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-03T14:13:17.863

发现问题..和布局代码无关。

我正在向 ListModel 添加一个空值，这似乎使 LayoutManager 感到困惑。会结束这个问题，但还没有足够的魔力......

# tinymce - tinyMCE - 在文本区域中编辑源代码

> ID：408998
> 
> 赞同：14
> 
> 时间：2009-01-03T12:40:38.643
> 
> 标签：tinymce

我正在玩 MCE，我想知道是否有可能让用户在帖子中输入源代码，就像这种形式的 101010 按钮一样。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-01-09T16:48:30.983

您需要将 plugins: "code" 添加到初始化代码中，如下所示：

```
tinymce.init({
    plugins: "code"
}); 
```

[https://www.tinymce.com/docs/plugins/code/](https://www.tinymce.com/docs/plugins/code/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-03T14:49:54.857

该选项存在。其中一个可选按钮上写有“html”，可用于进入 HTML 编辑模式。您可以在[这个功能齐全的示例](https://www.tinymce.com/docs/demo/full-featured/)中看到它- 右上角左侧 6 个位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-06T00:34:23.077

尝试使用“代码”插件和 tinymce.min.js

例如

```
<script src="~/Scripts/tinymce/tinymce.min.js"></script>
<script src="~/Scripts/tinymce/plugins/code/plugin.min.js"></script>
<script>
    tinymce.init({
        selector: 'textarea',
        plugins: "code",
        toolbar: "code" });
</script> 
```*****