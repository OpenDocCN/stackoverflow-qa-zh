# StackOverflow 问答 11362000-11362999

# c++ - 找到集合并集的最快方法

> ID：11362002
> 
> 赞同：14
> 
> 时间：2012-07-06T12:13:46.577
> 
> 标签：c++, algorithm, stl, stl-algorithm

我有成对的 int 像 `set<pair<int,int> > x1, x2, ... xn`（ n 可以在 2 到 20 之间）。找到这些集合的最快方法是什么？

对不起，如果我一开始没有说清楚，我的意思是性能快，内存分配不是问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T12:24:48.133

假设结果也需要是一个集合，那么您别无选择，只能将每个元素的每个元素`x_i`插入该结果集中。所以明显的实现是：

```
set<pair<int,int>> x(x1);
x.insert(x2.begin(), x2.end());
// etc 
```

剩下的问题是这是否可以在速度上被击败。

单个元素`insert`需要一个`position`提示，*如果正确*，它会加快插入速度。所以结果*可能*是这样的事情比`x.insert(x2.begin(), x2.end());`：

```
auto pos = x.begin()
for (auto it = x2.begin(); it != x2.end(); ++it) {
    pos = x.insert(pos, *it);
} 
```

不过，这取决于数据：该位置可能准确，也可能不准确。您可以通过在开始之前将所有元素按顺序排列来确保它是最好的工具可能是`set_union`. 最好将其命名为`merge_and_dedupe_sorted_ranges`，因为它的作用与它没有特别的关系`std::set`。您可以`set_union`进入中间向量，也可以进入这样的集合：

```
set<pair<int,int>> x;
set_union(x1.begin(), x1.end(), x2.begin(), x2.end(), inserter(x, x.end()); 
```

我对使用的担忧`set_union`是，为了获得以递增顺序将元素添加到集合中的好处，每次调用它时都需要创建一个新的空容器（因为如果它不是空的，那么添加的元素需要与已经在其中的值）。这些容器的开销可能高于以任意顺序插入集合的开销：您必须对其进行测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T12:27:43.290

首先找到最小集合的并集。也就是说，按集合长度对集合进行排序，计算两个最小集合的并集，删除这些集合，根据其大小将并集插入集合列表中。

如果您测量了两个集合的相似程度，那么您最好先找到最相似集合的并集。那是更喜欢尽早消除重复的联合操作。

编辑：对于两组之间的每个联合操作 - 将较小的集合合并到较大的集合中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-06T12:23:37.913

不幸的是，我相信您仅限于线性`O(N)`解决方案，因为所有联合都是两个集合中元素的组合。

```
template<typename S>
S union_sets(const S& s1, const S& s2)
{
     S result = s1;

     result.insert(s2.cbegin(), s2.cend());

     return result;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-06T12:23:00.723

我假设*快速*你的意思是*快速实施*。

然后：[std::set_union](http://www.cplusplus.com/reference/algorithm/set_union/) (*)

两组示例：

```
#include <set>
#include <algorithm>
#include <iterator>
using namespace std;

int main () {
    set<pair<int,int> > a, b, uni;
    set_union (a.begin(), a.end(),
               b.begin(), b.end(),
               inserter(uni, uni.begin()));

} 
```

对于 n 个集合，手写它可能是最易于维护的解决方案：

```
#include <set>
#include <vector>
using namespace std;

int main () {
    vector<set<pair<int,int>>> sets;
    set<pair<int,int>> uni;

    for (const auto &s : sets)
        for (const auto &elem : s)
            uni.insert (elem);
} 
```

虽然一般来说，人们应该更喜欢标准算法并从它们的质量实施中获益。

如果您所说的*快速*是指性能，我们将无能为力，因为我们没有要求。对于不同的情况，不同的方法可能会给出不同的结果。

* * *

(*) 注意：该网站有时会因为与标准相比不是 100% 准确而令人不悦

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-06T12:38:38.587

为了节省内存分配并改善局部性，最好使用单个`vector<T>`作为工作内存。

构造 a`vector<T>`并保留所有 s 中的元素总数（计算重复项）。然后，从空范围开始，`[v.begin(), v.begin())`通过附加每个集合的内容、合并和唯一化，将其扩展到类似集合（唯一、排序）的范围：

```
vector<T> v;
v.reserve(<total size>);
for (set<T> &s: sets) {
    auto middle = v.insert(v.end(), s.begin(), s.end());
    inplace_merge(v.begin(), middle, v.end());
    v.erase(v.unique(v.begin(), v.end()), v.end());
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-06T12:20:47.833

尝试头部算法中的 set_union。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-06T12:21:33.067

您可以递归使用[std::set_union](http://en.cppreference.com/w/cpp/algorithm/set_union) 或简单地将所有集合插入结果集中（重复项被集合消除）。如果项目的数量非常少，您可以尝试将其全部插入向量中，对其进行排序并在向量上使用 [std::unique](http://en.cppreference.com/w/cpp/algorithm/unique)。

# c# - 通过 C# 连接到 Cisco VPN

> ID：11362007
> 
> 赞同：0
> 
> 时间：2012-07-06T12:14:19.213
> 
> 标签：c#, asp.net, .net, vpn, cisco

我们有一台可以通过**Cisco VPN**连接的服务器。我们需要从该服务器获取数据到我们的本地客户端。VPN 连接在认证后建立。我想让这个 VPN 连接过程自动化并获取数据。这可以使这个过程自动化吗？我们可以为此使用 C#.net 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:48:51.903

需要一些工作，但您可以通过命令行使用 Cisco VPN，所以您想要的应该是可行的。必须找出东西安装在哪里等。但主要是驴工作。

有关在命令行中可以做什么和不可以做什么的信息，我搜索了 Cisco VPN 命令行并找到了这个。 [Cisco VPN 通过命令行](http://www.cisco.com/en/US/docs/security/vpn_client/cisco_vpn_client/vpn_client46/administration/guide/vcAch5.html)

# c++ - 将抽象基类作为成员处理时的所有权问题

> ID：11362014
> 
> 赞同：0
> 
> 时间：2012-07-06T12:15:08.430
> 
> 标签：c++, pointers, constructor, virtual, ownership

在构造函数中将类作为参数传递时，在大多数情况下，我最终会传递指针。主要原因是我必须传递无法实例化的抽象类，并且作为引用不能为空，我真的没有选择......

这是一个例子：

```
// Abstract class A
class A { 
    virtual void foo() = 0;
};

class B : public A {
    void foo();
};

class C {
public:
    C(A* a) : _a(a) {};
private:
    A* _a;
}; 
```

在某些情况下，我想`C`处理指向的`A`对象`_a`（删除时删除它），在其他情况下，我想`C`删除`_a`而不删除`A`对象。

拥有完善的编程方法的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:21:15.967

用于`shared_ptr`表示共享所有权，以及`unique_ptr`表示唯一所有权。如果您确定 的生命`C`周期受`A`对象（或另一个拥有的对象`A`）的生命周期的限制，那么您可以使用引用，或`shared_ptr`带有 nil 删除器的 a 。

# javascript - HTML解析和方法调用

> ID：11362019
> 
> 赞同：-2
> 
> 时间：2012-07-06T12:15:28.333
> 
> 标签：javascript, iphone, ios

更新：在 iPhone 中解析 HTML 有多少种方法以及如何使用 javascript 调用方法。任何链接都会很明显。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:26:19.770

您需要在 a 中打开页面，在页面`UIWebView`上完成加载后，您需要使用一些 Javascript 来做一些事情，例如：-

```
[WebView stringByEvaluatingJavaScriptFromString:strCode]; 
```

strCode 将是单击按钮的 Javascript 代码

```
NSString *strCode = @"document.getElementById('submit').click()"; 
```

或者您可以更改文本字段的值

```
NSString *strCode = @"document.getElementById('textfield').value = 'Hello World'"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T12:23:08.347

是否有可能在 iframe 中加载外部页面，然后使用 Jquery 提取字段？

# jquery - 在 jqgrid 中添加自定义按钮和动作格式化程序

> ID：11362020
> 
> 赞同：0
> 
> 时间：2012-07-06T12:15:31.883
> 
> 标签：jquery, asp.net-mvc, jqgrid

我有一个像这样的jqgrid

```
colNames: ['Name','Actions'],

 colModel: [

        { name: 'name', index: 'name', align: 'right', editable: true},
{ name: 'act', index: 'act', width: 75, align: 'center', sortable: false, formatter: 'actions',formatoptions: {keys: true,delbutton:false}}
], 
```

现在我想添加一个自定义按钮以及动作格式化程序的编辑按钮。

我试过这个，似乎没有工作，任何猜测为什么？

```
gridComplete: function(){
    var ids = $("#grid").jqGrid('getDataIDs');
    for(var i=0;i < ids.length;i++){
        var cl = ids[i];
        alert(cl);
        be = "<input style='height:22px;' type='button' value='Edit' onclick=\"window.location.href='editItem.asp?ID="+cl+"'\"  />";

        $("#grid").jqGrid('setRowData',ids[i],{act:be});
    }   
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:27:46.890

如果我理解正确您的要求，您将在[这个](https://stackoverflow.com/a/10179993/315935)和[这个](https://stackoverflow.com/a/6627201/315935)旧答案中找到您问题的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:53:44.717

这是一个自定义格式化程序的示例（假设您使用您的项目 ID 设置“Actions”列的值）：

```
<script>
    var myCustomFormatter = function(cellVal,options,rowObject) {
        return "<input style='height:22px;' type='button' value='Edit' onclick=\"window.location.href='editItem.asp?ID="+cellVal+"'\"  />";  
    };

    $("#yourTableID").jqGrid({
        ....
        colNames: [....,'Actions'],
        colModel: [
            ....
            { name: 'act', index: 'act', width: 75, align: 'center', sortable: false, formatter:myCustomFormatter}
        ],
        ....
    });

</script> 
```

阅读有关自定义格式化程序的[jqGrid 文档。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)

# twilio - twilio 获取拨打的号码

> ID：11362021
> 
> 赞同：0
> 
> 时间：2012-07-06T12:15:32.857
> 
> 标签：twilio, twilio-twiml

我从数据库中填充了以下数字。

```
<Dial callerId="+266696687">
    <Number>8018xxxxxx</Number>
    <Number>8012xxxxxx</Number>
    <Number>8013xxxxxx</Number>
</Dial> 
```

如何获取拨打的号码？

* * *

好的，澄清这个问题。[2012 年 7 月 8 日更新]

在上面的细节上，3个号码会同时响起，对吧？

因此，当其中一个接听电话时。我们怎样才能得到号码？

例如，如果**8018xxxxxx**接听电话，我该如何接听电话？通过**$_REQUEST['Number']**？绝对不是**$_REQUEST['Dial']**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:16:03.373

您可以在 TWIML 上指定一个 URL。然后，您可以在该 URL 上获取号码并进行所需的任何处理。

请参阅 Twilio 文档：[https ://www.twilio.com/docs/api/twiml/number](https://www.twilio.com/docs/api/twiml/number)

# fortify - “生成中间文件”时 Fortify 是否需要很长时间

> ID：11362037
> 
> 赞同：3
> 
> 时间：2012-07-06T12:17:17.400
> 
> 标签：fortify

我正在使用 Fortify 对我们的 cSharp 应用程序之一进行安全扫描，并且在“生成中间文件”时需要数小时，我不确定它是否挂起或真的在做某事。真的需要这么长时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T11:45:12.647

在 .NET 构建开始时生成中间文件通常是在 SCA 为使用的库函数创建 NST 文件时。这应该只需要在每台机器的每个项目中发生一次，尽管在第一个项目之后它不应该花费那么长时间。`${fortify.ProjectRoot}/sca<version>/build/Libraries/`然后，只要不删除它们，它们就会被存储（并且您不运行`sourceanalyzer -clean`（如在没有构建 ID 的情况下进行清理），那么它们应该在此处进行后续扫描。增加内存选项可能会对您有所帮助，但我会建议让它运行，然后看看它在后续扫描中的运行情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:33:53.130

不幸的是，如果没有关于您的扫描设置和 Fortify 版本的具体细节，很难具体说明导致扫描时间长的原因。但是，某些因素确实会影响 Fortify 的扫描时间：

*   代码库的复杂性。大型、复杂的代码库肯定比琐碎的代码需要更长的时间来翻译和分析
*   分配给 Fortify 扫描进程的内存。Fortify sourceanalyzer 扫描可能会占用大量内存
*   本地系统负载

您是否有任何其他可以分享的有关扫描的详细信息？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:06:23.593

添加以下选项以显着减少持续时间：

```
"-Xmx20g" (or mot if you have more memory) and "-64" for 64-bit processor 
```

# ruby-on-rails - 在 Squeel 中加入子查询

> ID：11362039
> 
> 赞同：1
> 
> 时间：2012-07-06T12:17:34.593
> 
> 标签：ruby-on-rails, ruby, squeel

我正在尝试制作某种关键表，将其中一个模型表（主）与它的多对多关系（rel1，rel2，...）连接起来，聚合相关模型的数量。我希望它产生类似于以下的 SQL：

```
SELECT 
  masters.id, 
  rel1.rel1_count, 
  rel2.rel2_count,
  ...
FROM
  masters
LEFT JOIN
  (SELECT
     masters.id,
     count(rel1s_masters.*) as rel1_count
   FROM
     masters
   LEFT OUTER JOIN
     rel1s_masters
   ON
     rel1s_masters.master_id = master.id
   GROUP BY
     masters.id) rel1
ON
  rel1.id = masters.id
LEFT JOIN
  (SELECT
    ...
   ...) rel2
ON
  rel2.id = masters.id
... 
```

我可以使用 Squeel 轻松创建内部查询：

```
rel1_subq = Master \
  .joins{ rel1s_masters.outer } \
  .select{ masters.id.as id } \
  .select{ rel1s_masters.count.as rel1_count } \
  .group{ masters.id }

rel2_subq = Master \
  .joins{ ... } \
  .select{ ... } \
  ... 
```

但是现在，我不确定如何以一种好的方式将这些列子查询组合成一个汇总表。我得到的最接近的使用将子查询转换为 sql 并以这种方式处理它们：

```
stats = Master \
  .select{ masters.id } \
  .joins{ ... } \
  .joins{ ", (#{rel1_subq.to_sql}) as rel1" } \
  .where{ rel1.id == masters.id } \
  .select{ rel1.rel1_count.as rel1_count } \
  .joins{ ", (#{rel2_subq.to_sql}) as rel2" } \
  .where{ ... } \
  .select{ ... } 
```

有没有更好的方法来获得相同的结果？

**UPD**：看起来在这种情况下，采用 Counter Cache 方法是个好主意：

[http://railscasts.com/episodes/23-counter-cache-column](http://railscasts.com/episodes/23-counter-cache-column)

但问题仍然有效：是否有一种平滑自然的方式来使用 squeel 进行子查询连接？

# windows - 如何抑制 Windows cmd 输出中的特定行？

> ID：11362041
> 
> 赞同：2
> 
> 时间：2012-07-06T12:17:37.997
> 
> 标签：windows, cmd, filtering

在 Windows 上，我编写了一个调用另一个工具的简单 bat 脚本。但是，此工具在使用某些选项时会输出一些特定的调试行（似乎是原始代码中的错误，我不能/不想修改）。

有没有办法抑制与特定模式匹配的命令输出的行（例如以 开头`DEBUG:`）？

*（仅供参考：工具是，并且[perl 源代码](http://mirrors.ctan.org/support/latexdiff/latexdiff)`latexdiff.exe`中的某些`print STDERR "DEBUG:...`行不是以变量为条件的，并且每次使用该选项时都会打印出来。我也不想完全抑制 stderr。）`debug``--flatten`*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:32:16.193

您可以尝试以下方法：

```
latexdiff.exe 2>&1| findstr /v /b "DEBUG:" 
```

该`/v`选项基本上改变了模式，即`findstr.exe`让一切都通过，而不是匹配模式。该`/b`选项只是说模式应该出现在一行的开头。

将`2>&1`STDERR 重定向到 STDOUT 并且是必需的，因为正如您所说，这些行被写入 STDERR，而不是 STDOUT。请注意，作为“副作用”，现在所有输出都写入 STDOUT。

**如果您需要在 STDOUT 上有其他输出，请更新**，您可以执行以下操作

```
latexdiff.exe old.tex new.tex > diff.tex 2> latexdiff.stderr
type latexdiff.stderr | findstr /v /b "DEBUG:" 
```

也就是说，将 STDOUT 重定向到您的差异文件，将 STDERR 重定向到某个文件。之后，您只需键入文件即可查看错误消息。

您可能希望将其放入它自己的批处理文件中，如下所示：

```
@echo off
setlocal
REM determine a suitable temporary filename
set error_file=%TEMP%\latexdiff.%RANDOM%.stderr
REM run actual diff and save its exit code for later
latexdiff.exe "%~1" "%~2" > "%~3" 2> "%error_file%"
set error_level=%ERRORLEVEL%
REM dump error messages
type "%error_file%" | findstr /v /b "DEBUG:"
REM remove temporary error file and exit with latexdiff's exit code.
del /q "%error_file%"
exit /b %error_level% 
```

然后你可以这样称呼它：`latexdiff_wrapper.cmd old.tex new.tex diff.tex`. 除了使用临时文件，缺点是在处理时不会出现错误消息，而是在最后出现。如果这不是问题，则不应该因为差异应该很快，您可能会发现该解决方案很有用。

# android-viewpager - 如何在 Viewpager 上实现缩放、平移和拖动？

> ID：11362044
> 
> 赞同：-1
> 
> 时间：2012-07-06T12:17:40.227
> 
> 标签：android-viewpager

> **可能重复：**
> [如何在 Android 中的 Viewpager 上实现缩放、平移和拖动？](https://stackoverflow.com/questions/11306037/how-to-implement-zoom-pan-and-drag-on-viewpager-in-android)

我已经实现了一个 viewpager，其中包含不同的视图，例如，`imageview`然后`videoview`等等。我试图实现的是捏缩放、平移和拖动，`viewpager`以便与内部的任何特定视图无关`viewpager`。我可以执行捏缩放，平移和拖动它。

另一个挑战是默认情况下`viewpager`有一个触摸事件，它通过它执行内部视图的切换。如果有人经历过这个或对这个案例有想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:08:43.630

我们可能经历过类似的事情。我们有一个 ViewPager，其中包含带有 ImageViews 的布局。ImageViews 支持平移、捏合、拖动等。我们的挑战是如何确定 ViewPager 何时应该滚动和何时在 ImageView 上平移/拖动。

您可以在我们的应用程序 Brilliance: 500px Image Viewer 中看到一个行为示例。

我们的解决方案是在 ViewPager 类中覆盖 onTouchEvent 和 onInterceptTouchEvent。新方法通过中介询问事件是应该由当前项目还是由 ViewPager 本身处理。

例如，如果用户滑动缩放的图像，图像将平移。如果用户滑动普通图像，ViewPager 将滚动下一个或上一个项目。

# wordpress - 在 wordpress 中删除文件之前挂钩

> ID：11362045
> 
> 赞同：0
> 
> 时间：2012-07-06T12:17:41.037
> 
> 标签：wordpress

几天前，我被分配到 wordpress 中的任务。此任务是限制每个用户的媒体文件夹容量。例如，每个用户只能上传 100MB 的文件。我发现了一个非常好的帖子，它解释并使用了名为`wp_handle_upload_prefilter`and的钩子`wp_handle_upload`来检索文件大小并在上传之前存储它们。

现在，当用户在媒体文件夹中按下“永久删除”时，我需要知道或挂钩一些功能，以便我可以重新计算特定用户的媒体文件夹的容量。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-26T22:28:53.403

如果其他人需要对已删除的媒体做出反应，这是我解决没有删除媒体操作的问题的解决方案：

```
function get_media_item_args( $args ) {

    if ($args["delete"] && $_GET["action" == "delete-post"])
    {
        $current_post_id = !empty( $_GET['id'] ) ? (int) $_GET['id'] : 0;

        if ($current_post_id > 0)
        {
            //Do your thing here.
        }
    }

    return $args;
}
add_filter( 'get_media_item_args', 'get_media_item_args', 10, 1 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:44:59.143

也许您可以为此使用[delete_attachment](http://codex.wordpress.org/Plugin_API/Action_Reference/delete_attachment)挂钩。但是，这仅影响已附加到帖子的文件。

# c# - 为什么 appSettings 文件属性不允许指向父目录的路径？

> ID：11362046
> 
> 赞同：3
> 
> 时间：2012-07-06T12:17:44.790
> 
> 标签：c#, configuration-files, appsettings

我正在尝试部署具有多个可执行文件的项目，其中一些使用通用配置文件。我想在它自己的目录中有这个通用配置文件。问题是它一直被忽视。我有标签：

```
<appSettings file="..\Common Configs\Common.config"> 
```

在一些特定于可执行文件的配置文件中。如果我将 Common.config 文件复制到与特定配置文件相同的目录，并从标签中删除路径，一切正常。如果我执行以下操作，它甚至可以工作：

```
<appSettings file="..\App1\Common.config"> 
```

`App1`可执行文件所在的文件夹在哪里。

[此页面](http://connect.microsoft.com/VisualStudio/feedback/details/93626/configsource-attribute-on-config-sections-doesnt-support-parent-or-absolute-config-paths)建议`ConfigSource`不允许指向父级的路径，但该`file`属性允许。

更复杂的是，我正在部署到文件共享，因此我无法在 exe 文件夹中创建硬链接。

有谁知道为什么这不起作用？我还能如何使用共享配置文件部署它？

文件夹结构具有以下形式：

解决方案

*   常用配置

    *   通用配置
*   应用程序1

    *   应用程序1.exe

    *   App1.exe.config

*   应用程序2

    *   应用程序2.exe

    *   App2.exe.config

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:27:10.747

如果所有项目都在同一个解决方案中，您可以将配置文件添加到解决方案项目区域。然后可以与解决方案中的所有 exe 共享此文件。

您将需要选择需要配置文件的每个项目并选择添加现有项目。从那里选择文件，然后添加为链接。

这将允许您维护一个配置文件并将其与每个 exe 并排部署。

然后，当您通过 appSettings 部分引用它时，您可以直接引用该文件。

# magento - 在magento的主页上设置自定义页面标题

> ID：11362050
> 
> 赞同：0
> 
> 时间：2012-07-06T12:17:56.297
> 
> 标签：magento

我在主页上只显示一个产品。我想在页面标题中显示产品名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T14:55:16.497

您有多种方法可以做到这一点：

1.  **在模块的布局 xml 文件中（位于 app/design/frontend/[package]/[theme]/layout/{your_file_name}.xml）：**

    ```
    <reference name="head">
        <action method="setTitle"><title>Title text here</title></action>
    </reference> 
    ```

    这里的坏处是您不能“即时”设置标题。

2.  **在您的块文件中**（`_prepareLayout()`方法是一个好地方）**：**

    ```
    public function _prepareLayout() 
    {
        $headBlock = $this->getLayout()->getBlock('head');
        $headBlock->setTitle('Title text here');
        return parent::_prepareLayout();
    } 
    ```

3.  **其他任何地方：**

    ```
    Mage::app()->getLayout()->getBlock('head')->setTitle('Title text here'); 
    ```

**有用的链接 -** [布局、块和模板](http://alanstorm.com/layouts_blocks_and_templates)

# c# - How do I add an audio clip in Unity3d?

> ID：11362057
> 
> 赞同：0
> 
> 时间：2012-07-06T12:18:27.697
> 
> 标签：c#, unity3d

```
public class water : MonoBehaviour {
    public AudioClip drown;

    void OnTriggerEnter(Collider otherObject)
    {
        if (otherObject.gameObject.tag == "Player")
        {
            Destroy(otherObject.gameObject, 0.3f);
            audio.Play();
            PauseScript.playerLives--;
            if (PauseScript.playerLives > 0)
            {
                Application.LoadLevel(Application.loadedLevel);
            }
            else
            {
                Application.LoadLevel(0);
            }
        }
    }
} 
```

After the above script I drag and drop my wav file on to the audioclip variable drown in Unity interface. But when I play the game I get this error -- there is no audiosource attached to the game object, but a script is trying to access it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:27:33.797

I figured that out. I was not adding an AudioSoure component to the game object

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T15:20:26.187

```
var myClip : AudioClip;
function Start () {
    AudioSource.PlayClipAtPoint(myClip, transform.position);
} 
```

# java - SQLite (JDBC) 不写入数据

> ID：11362058
> 
> 赞同：3
> 
> 时间：2012-07-06T12:18:34.817
> 
> 标签：java, sqlite, jdbc

我有一个应用程序可以读取和写入数据到 sqlite 数据库。在某些情况下，我必须写入一些数据，并在数据库中读取这些数据。请参见下面的示例。

```
 public void read() throws SQLException {
    Connection c = DriverManager.getConnection("jdbc:sqlite:C:\\test.sqlite");
    c.setAutoCommit(false);
    try {
        PreparedStatement p = c.prepareStatement("SELECT * FROM test");
        try {
            ResultSet rs = p.executeQuery();
            try {
                while (rs.next()) {
                    System.out.println(rs.getInt("val"));
                }
            } finally {
                rs.close();
            }
        } finally {
            p.close();
        }
    } finally {
        c.close();
    }
}

public void write() throws SQLException {
    Connection c = DriverManager.getConnection("jdbc:sqlite:C:\\test.sqlite");
    c.setAutoCommit(false);
    try {
        PreparedStatement p = c.prepareStatement("INSERT INTO test (val) VALUES (?)");
        try {
            p.setDouble(1, Math.random());
            p.executeUpdate();
            c.commit();
        } finally {
            p.close();
        }

    } finally {
        c.close();
    }
}

public void demonstrate() {
    write();
    read();
} 
```

如果我调用该`demonstrate`方法，数据会毫无例外地写入，但读取方法不会在标准输出上输出任何内容。如果我重新启动应用程序，我可以看到上次运行中写入的数据。上面显示的示例已简化。在实际应用程序中，每个查询要写入更多数据。

那么为什么 SQLite 看不到当前会话中写入的数据呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:40:26.503

我注意到您正在使用驱动程序管理器来获取 SQLConnection。您可能忘记在驱动程序管理器中注册 SQL 驱动程序。你的代码中应该有这样的东西（你只需要做一次）：

```
 DriverManager.registerDriver(new org.sqlite.JDBC()); 
```

编辑：

您的代码中有一个小错误：您正在编写双精度数并读取整数。为了测试，我创建了一个表“test”，其中包含 double 类型的列“val”。

每次我运行程序时，都会在输出中写入一个新行：

```
0
0
0 
```

这是程序运行 3 次后的输出。数据库有 3 行，每次我运行程序时都会添加一个（0 值是因为您正在从双精度值读取整数，并且随机返回一个介于 0 和 1 之间的值）。

我唯一的解释可能是您的 SQLite 驱动程序中的错误。

[在此处查看我的答案以获取驱动程序更新](https://stackoverflow.com/questions/11361500/issues-registering-sqlite-driver-in-java/11361877#11361877)

# python - “从……进口……”是什么意思？

> ID：11362061
> 
> 赞同：7
> 
> 时间：2012-07-06T12:18:53.333
> 
> 标签：python

```
from sys import argv
from os.path import exists

script, from_file, to_file = argv

print "Copying from %s to %s" % (from_file, to_file)

# we could two on one line too, how?
input = open(from_file)
indata = input.read()

print "The input file is %d bytes long" % len(indata)
print "Does the output file exist? %r" % exists(to_file)
print "Ready, hit return to continue, CTRL-C to abort."

raw_input()

output = open(to_file, 'w')
output.write(indata)

print "Alright, all done."

output.close()
input.close() 
```

在前两行中，我对正在发生的事情有所了解，但想确保我完全理解它，因为这似乎很重要。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T12:27:04.467

如果这样做`import sys`，您将可以通过`sys.foo`或访问模块 sys 中的函数和变量`sys.bar()`。这可能会导致大量输入，尤其是在使用子模块中的某些内容时（例如，我经常需要访问`django.contrib.auth.models.User`）。为了避免这种冗余，您可以将一个、多个或所有变量和函数带入全局范围。`from os.path import exists`允许您使用该功能`exists()`，而不必一直添加它`os.path.`。

如果你想从 os.path 导入多个变量或函数，你可以做 `from os.path import foo, bar`.

理论上，您可以使用 导入所有变量和函数`from os.path import *`，但通常不鼓励这样做，因为您最终可能会覆盖局部变量或函数，或隐藏导入的变量或函数。请参阅[“import foo”和“from foo import *”有什么区别？](http://effbot.org/pyfaq/tutor-whats-the-difference-between-import-foo-and-from-foo-import.htm)解释一下。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-06T12:27:11.427

```
from module import x 
```

方法：

加载名为 的模块`module`，但仅获取`x`到当前命名空间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-03T05:13:28.133

用白痴的话来说，这意味着，

```
from USA import iPhone # instead of importing the whole USA for an iPhone you now will just import the iPhone into your program, 
```

你为什么需要这样的东西？

考虑一下，如果没有 from ... import 语句，您的代码将如下所示

```
import USA

variableA = USA.iPhone() 
```

使用 from ... import 语句看起来像，

```
from USA import iPhone

variableA = iPhone() 
```

# list - 从 Haskell 函数中删除 'take'

> ID：11362062
> 
> 赞同：1
> 
> 时间：2012-07-06T12:18:57.353
> 
> 标签：list, haskell

我是 Haskell 的新手，正在尝试解决如何阻止我的程序在列表末尾爆炸。

例如，我有一个函数可以镜像关于 XY 轴的字符列表。

如果没有 ，我该如何重写`take`？

```
mirrorXY' :: [[a]] -> [[a]]
mirrorXY' m = (map head m) : mirrorXY' (map tail m)
mirrorXY m = take (length $ m!!0) $ mirrorXY' m 
```

PS我刚刚找到`transpose`，但我仍然想要一个答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:30:15.033

首先，您`mirrorXY'`可以使用高阶函数`map`而`iterate` 不是直接递归来编写：

```
mirr m = map (map head) . iterate (map tail) $ m 
```

...正如您所发现的，这会在点击空列表时爆炸：

```
*Main> map (map head) . iterate (map tail) $ [[1..4],[2..5],[3..6]]
[[1,2,3],[2,3,4],[3,4,5],[4,5,6],[*** Exception: Prelude.head: empty list 
```

让我们在没有第一部分的情况下尝试一下：

```
*Main> iterate (map tail) $ [[1..4],[2..5],[3..6]]
[[[1,2,3,4],[2,3,4,5],[3,4,5,6]],[[2,3,4],[3,4,5],[4,5,6]],[[3,4],[4,5],[5,6]],[
[4],[5],[6]],[[],[],[]],[*** Exception: Prelude.tail: empty list
*Main> 
```

所以很容易解决：我们只需要`[]`在输入列表中停止点击：

```
*Main> takeWhile (not.null.head) . iterate (map tail) $ [[1..4],[2..5],[3..6]]
[[[1,2,3,4],[2,3,4,5],[3,4,5,6]],[[2,3,4],[3,4,5],[4,5,6]],[[3,4],[4,5],[5,6]],[
[4],[5],[6]]] 
```

所以，函数是

```
mirr xs = map (map head) . takeWhile (not.null.head) . iterate (map tail) $ xs 
```

这假定所有子列表的长度相同（或者至少第一个是最短的），但这很容易通过调整测试来解决`takeWhile`：

```
mirr xs = map (map head) . takeWhile (all (not.null)) . iterate (map tail) $ xs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:31:15.060

您需要处理空列表，例如

```
mirrorXY [] = []
mirrorXY ([]:_) = []
mirrorXY m = (map head m) : mirrorXY (map tail m) 
```

这假设列表具有统一的长度。

更强大的是，像

```
safeHead [] = Nothing
safeHead (a:_) = Just a

mirrorXY [] = []
mirrorXY m = case mapM safeHead m of
               Nothing -> []
               Just a -> a : mirrorXY (map tail m) 
```

它停在第一个太短的列表上。请注意，这使用s monad 实例通过线路`Maybe`进行短路。`mapM safeHead m`

* * *

甚至可以更紧凑地编写最后一个版本，使用[`maybe`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3amaybe)：

```
mirrorXY [] = []
mirrorXY m = maybe [] (: mirrorXY (map tail m)) $ mapM safeHead m 
```

但这不一定更清楚。

# c# - C# ASP.NET 打开一个新窗口并在按钮单击事件中重定向

> ID：11362063
> 
> 赞同：-1
> 
> 时间：2012-07-06T12:19:06.213
> 
> 标签：c#, response.redirect

如何重定向到另一个页面并单击一个按钮打开一个新窗口？

```
protected void ASPxButton_save_Click(object sender, EventArgs e)
{
     try
     {
         //do other stuff

         if (oSoins.DEVENIR_ECVAC_PAR != 0)
         {
             string AdrUrl = "Print_DosSoin.aspx?SoinId=" + Soin_Id;
             ClientScript.RegisterStartupScript(this.GetType(), "newWindow", String.Format("<script>window.open('{0}');</script>", AdrUrl));
          }

          Response.Redirect("DossierSoin_Liste.aspx");
       }
       catch (ThreadAbortException) {/* do nothing, it might be a response.Redirect exception */}
       catch (Exception excThrown)
       {
          lbl_err.Text = excThrown.Message;
          if (excThrown.InnerException != null) lbl_err.Text += "-->" + excThrown.InnerException.Message;
          string TempMsg = "DosSoin Fiche " + Appel_ID + "-- ASPxButton_save_Click -->" + lbl_err.Text;
          Outils.SendingEmail(TempMsg);
        } 
```

使用上面的脚本，它会重定向但不会打开新窗口。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:46:55.910

您应该将您的 javascript 修改为以下内容：

```
string script = default(string)

if (oSoins.DEVENIR_ECVAC_PAR != 0)
{
    string AdrUrl = "Print_DosSoin.aspx?SoinId=" + Soin_Id;
    script = string.Format("window.open('{0}'); ", AdrUrl);
}

script += " window.location.href = 'DossierSoin_Liste.aspx';";

ClientScript.RegisterStartupScript(this.GetType(), "newWindow", script, true); 
```

这将创建一个新窗口，然后在客户端上重定向。

# c++ - Boost Statechart - 局部转换

> ID：11362065
> 
> 赞同：7
> 
> 时间：2012-07-06T12:19:06.543
> 
> 标签：c++, boost, boost-statechart

我希望有人可以帮助我解决这个问题，或者至少指出我的方式的错误......

作为我的问题的简单说明，请考虑应用程序的一部分，您可以在其中进入“功能模式”操作状态。然后根据用户按下的功能键 F1-F4 可以使用四种子模式。默认进入 F1 模式。状态图开始如下：

![图1](../Images/adbaf13868256fc75fc3372ecfbd0ff9.png)

用户可以随时按F1-F4切换到相应的模式。将这些转换添加到内部状态会导致以下结果：

![图 2](../Images/337ac9dd42b2e90408bd4a1099276535.png)

显然，这是（a）一团糟，（b）需要定义很多转换。如果在某个时候我想添加一个 F5Mode 那么......好吧，你明白了。为避免这种情况，我想做以下事情：

![图 3](../Images/f909a9335a08dd584efddd5c5433105f.png)

Boost Statechart 允许我定义从 FunctionMode 到任何内部状态的转换，但结果不是我所期望的。实际结果如下：

![图4](../Images/cdd56585abc9d7e966e511674e52a833.png)

即按 F1-F4 切换模式会导致外部 FunctionMode 状态退出并重新进入，同时触发不需要的退出和进入动作。

早在 2006 年，图书馆作者和用户之间的[这个线程](http://boost.2283326.n4.nabble.com/statechart-UML2-0-local-transitions-and-history-td2557450.html)似乎描述了同样的问题。我认为作者建议执行以下操作作为解决方法：

![图 5](../Images/9eb87e24f12e4695f64030d10f507c2a.png)

然而，这种变通方法对我来说似乎不是很吸引人：它添加了一个额外的状态级别来编译，代码变得不那么可读了，必须使用深度历史来返回任何功能模式 sub -states 和中间状态对象被不必要地再次破坏和构造。

所以......我哪里错了？或者有什么替代方案？我已经简要了解了 Boost Meta State Machine (msm)，但从我目前所见的情况来看，我更喜欢 Statechart 的外观。

我很惊讶更多的用户没有遇到同样的问题......这让我觉得也许我的方法是完全错误的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:45:19.770

你看过状态[图教程](http://www.boost.org/doc/libs/1_50_0/libs/statechart/doc/tutorial.html)中解释的[状态反应](http://www.boost.org/doc/libs/1_50_0/libs/statechart/doc/tutorial.html#InStateReactions)吗？它似乎正在做你正在寻找的东西。

由于您正在寻求替代方案，因此在此期间，我正在评估各种 C++ Harel 状态图实现。我查看了 Boost 状态图和 Boost MSM。我用两者都写了代码。他们伤害了我虚弱的大脑:-)

然后我发现了[Machine Objects (Macho)](http://ehiti.de/machine_objects/)，非常简单和小巧，我喜欢它。它支持分层状态机、进入/退出操作、历史记录、状态机快照、守卫、内部转换、事件延迟、状态本地存储（具有可选的持久性），所以对我来说这是一个令人满意的 Harel 状态图实现。

此代码使用 Macho 实现状态图的 FunctionMode 部分：

```
#include "Macho.hpp"

#include <exception>
#include <iostream>
using namespace std;

namespace FunctionMode {

struct FunctionMode;
struct F1Mode;
struct F2Mode;

// The Top state, containing all the others.
TOPSTATE(Top) {
    STATE(Top)
    // All the events of the state machine are just virtual functions.

    // Here we throw to mean that no inner state has implemented the event
    // handler and we consider that an error. This is optional, we could
    // just have an empty body or log the error.
    virtual void evF1() { throw std::exception(); }
    virtual void evF2() { throw std::exception(); }
    // evF3 and so on...
private:
    void init() { setState<FunctionMode>(); } // initial transition
};

SUBSTATE(FunctionMode, Top) {
    STATE(FunctionMode)
    virtual void evF1() { setState<F1Mode>(); }
    virtual void evF2() { setState<F2Mode>(); }
    // evF3, ...
private:
    void entry() { cout << "FunctionMode::entry" << endl; }
    void exit() { cout << "FunctionMode::exit" << endl; }
    void init() { setState<F1Mode>(); } // initial transition
};

SUBSTATE(F1Mode, FunctionMode) {
    STATE(F1Mode)
    virtual void evF1() {} // make the event an internal transition (by swallowing it)
private:
    void entry() { cout << "F1Mode::entry" << endl; }
    void exit() { cout << "F1Mode::exit" << endl; }
};

SUBSTATE(F2Mode, FunctionMode) {
    STATE(F2Mode)
    virtual void evF2() {} // make the event an internal transition (by swallowing it)
private:
    void entry() { cout << "F2Mode::entry" << endl; }
    void exit() { cout << "F2Mode::exit" << endl; }
};

} // namespace FunctionMode

int main() {

    Macho::Machine<FunctionMode::Top> sm;
    // Now the machine is already in F1Mode.

    // Macho has 2 methods for synchronous event dispatching:
    // First method:
    sm->evF1(); // <= this one will be swallowed by F1Mode::evF1()
    // Second method:
    sm.dispatch(Event(&FunctionMode::Top::evF2));

    return 0;
} 
```

运行它，输出是：

```
FunctionMode::entry
F1Mode::entry
F1Mode::exit
F2Mode::entry
F2Mode::exit
FunctionMode::exit 
```

这表明转换是内部的。

在我看来，干净、简单和紧凑的代码:-)

[EDIT1] 代码的第一个版本没有执行初始转换`FunctionMode`-> `F1Mode`。现在确实如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-14T11:30:36.287

我知道这是一个老问题，这些退出->进入相同状态很烦人。

似乎要防止重新进入自我，您需要： 1\. 在“自我状态”中编写自定义处理程序 2\. 在触发重新进入子状态的父处理程序中编写守卫。

恕我直言，这是 StateChart 中的一个缺陷，我还没有找到一个好的解决方案 - 在状态机对象上调用“跳过重入状态转换”的属性会很棒。

# sql-server - SSRS 报告向不同的用户显示不同的记录。如何实现？

> ID：11362066
> 
> 赞同：0
> 
> 时间：2012-07-06T12:19:10.783
> 
> 标签：sql-server, reporting-services, role-based

我最近遇到了一个要求，上面写着“经理应该查看所有记录，但只查看适当的子集。我将通过下面的示例解释我的要求。

我有一张桌子。

```
CREATE TABLE [dbo].[Empolyee](
    [EmpID] [int] NOT NULL,
    [Name] [nvarchar](50) NOT NULL,
    [Salary] [int] NULL,
    [Grade] [char](1) NULL
) 
```

和一些数据

```
insert into Empolyee values(1, 'John', 200, 'C')

insert into Empolyee values(2, 'Jim', 100, 'D')

insert into Empolyee values(3, 'Jane', 500, 'A')

insert into Empolyee values(4, 'Jack', 150, 'C')

insert into Empolyee values(5, 'Jil', 300, 'B')

insert into Empolyee values(6, 'Josh', 350, 'B') 
```

**A**是最高等级，**D**是最低等级。

我想在 SSRS 中进行员工详细报告

简单地展示

从员工中选择 *。

现在的要求是用户应该能够看到他/她的记录和低年级的人。

例如，如果 Jane 看到她看到的报告应该看到所有 6。如果 Jack 看到她看到的报告应该只看到 2（他和 Jim 的）

我可以看到这是基于角色的安全案例，但如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:49:33.047

```
Select B.[Name] AS [Name2],B.[Salary] AS [Salary2],B.[Grade] AS [Grade2] 
from Empolyee A
Cross jOIN Empolyee B
WHERE A.Grade <= B.Grade
and A.Name like 'Jack' -- mention your user here
AND B.EmpID NOT IN (Select EmpID FROM Empolyee C 
 WHERE C.Grade = A.Grade and C.Name <> A.Name) 
```

# android - ListView 设置背景颜色

> ID：11362072
> 
> 赞同：0
> 
> 时间：2012-07-06T12:19:24.653
> 
> 标签：android, background-color

我的 ArrayAdapter 中有这段代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View row = super.getView(position, convertView, parent);

    Toast.makeText(getApplicationContext(), getItem(position).getString("text") + " = " + getItem(position).getString("my"), Toast.LENGTH_SHORT).show();

    if(getItem(position).getString("my") == "0") {
        row.setBackgroundColor(getResources().getColor(R.color.ekvi));
    }
    TextView tv = (TextView) row.findViewById(android.R.id.text1);
    tv.setText(getItem(position).getString("text"));
    tv.setTextColor(Color.BLACK);

    return row;
} 
```

虽然没有应用背景颜色。我检查了“我的”字符串，它有时真的是“0”，所以它必须工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:25:24.880

利用`.equals() to compare Strings objects.`

*   `== compares Strings Refrences(memory location)`

*   `.equals() compares Strings characters(value)`

**喜欢**

```
if(getItem(position).getString("my").equals("0")) { 
```

# perl - 具有非 unicode 内容的 Perl unicode 文件

> ID：11362073
> 
> 赞同：0
> 
> 时间：2012-07-06T12:19:40.647
> 
> 标签：perl, file, unicode, utf-8

软件正在生成 UTF-8 文件，但将内容写入非 unicode 文件。我无法更改该软件，必须按现在的样子获取输出。不知道这是否会正确显示在此处，但德语变音符号“ä”在文件中显示为“Ã¤”。

如果我在 Notepad++ 中打开文件，它会告诉我文件是 UTF-8（无 BOM）编码的。现在，如果我在记事本中说“转换为 ANSI”，然后将文件编码切换回 UTF-8（不转换），则文件中的德语变音符号是正确的。如何在 Perl 中实现完全相同的行为？无论我到现在为止尝试过什么，变音符号都变得更糟了。

要重现，请为自己创建一个 UTF-8 编码文件并将内容写入其中：

好，我会试试。创建自己的 UTF-8 文件并将其写入：MÃ¤nner SchÃ¼le VÃ¶ogel SÃ¼Ã

然后，在 UTF-8 mysql 数据库上，创建一个带有 varchar 字段和 UTF8_unicode 编码的表。现在，使用这个脚本：

```
use utf8;
use DBI;
use Encode;
if (open FILE, "test.csv") {
  my $db = DBI->connect(
    'DBI:mysql:your_db;host=127.0.0.1;mysql_compression=1', 'root', 'Yourpass',
    { PrintError => 1 }
  );
  my $sql="";
  my $sql = qq{SET NAMES 'utf8';};
  $db->do($sql);
  while (my $line = <FILE>) {
    my $sth = $db->prepare("INSERT IGNORE INTO testtable (testline) VALUES (?);");
    $sth->execute($line);
  }
} 
```

文件的确切内容将被写入数据库。但是，我期望在数据库中的输出是德语变音符号：

Männer Schüler Vögel Süß

那么，我怎样才能正确转换呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:42:42.033

具有讽刺意味的是：在我看来，您所说的软件不是在编写“非 unicode 内容”（这是无意义的）-它对其进行了*两次*UTF-8 编码。让我们以这个`ä`字符为例：它在 UTF-8 中由两个字节表示，`%C3 %A4`. 但是随后该程序中的某些内容决定将这些字节视为 Latin-1 编码：因此它们成为两个单独的字符（最终将被编码为 UTF-8，这就是将保存到文件中的内容）。

我想扭转这种情况的最简单方法是让 Perl 在处理从文件中读取的字符串时认为它使用一系列字节（而不是字符序列）。它可以做得很简单（也很丑陋）...

```
open my $fh, '<:utf8', $file_name or die $!;
my $string = <$fh>;              # a sequence of characters            
$string = utf8::decode($string); # ... will be considered a sequence of octets 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:35:24.837

听起来有些东西正在第二次转换它，假设它类似于 ISO 8859-15，然后将其转换为 UTF-8。您可以通过将 UTF-8 转换为 ISO 8859-15（或任何似乎对您的数据有意义的编码）来扭转这种情况。

如[http://www.fileformat.info/info/unicode/char/E4/index.htm](http://www.fileformat.info/info/unicode/char/E4/index.htm)所示，字节 0xC3 0xA4 是`ä`. 当被视为 ISO 8859-15（或 8859-1，或 Windows-1252，或许多其他 8 位编码）时，它们显示字符串`Ã¤`。

# api - 无需用户干预的 flickr api 身份验证

> ID：11362075
> 
> 赞同：2
> 
> 时间：2012-07-06T12:19:52.693
> 
> 标签：api, oauth, flickr

我想使用我自己的凭据以编程方式查询 Flickr API，只是为了经常从那里获取一些数据。Flickr API 现在似乎更倾向于 OAuth。我的问题是：我应该如何在没有用户干预的情况下只为我自己验证 API？还有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:09:08.247

收到 oauth_token（访问令牌）后，您可以将其用于多个后续 API 调用。您应该能够将令牌保存在数据存储中（我自己没有这样做）并且即使在您的应用程序重新启动后也可以使用它。当然，第一次获取Access Token还是需要写代码。

如果您的应用程序已经使用旧的身份验证 API 进行编码，那么您似乎可以进行一次性调用来获取新样式的访问令牌。见[http://www.flickr.com/services/api/auth.oauth.html#transition](http://www.flickr.com/services/api/auth.oauth.html#transition)

即使您没有编码的应用程序，您也可以将 API Explorer 用于任何需要身份验证的调用（例如[flickr.activity.userComments](http://www.flickr.com/services/api/explore/flickr.activity.userComments)）以获取 api_sig 和 auth_token。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T18:35:58.867

您所描述的场景有时被称为 2-legged OAuth。( [https://developers.google.com/identity/protocols/OAuth2ServiceAccount](https://developers.google.com/identity/protocols/OAuth2ServiceAccount) )
Google API 通过“服务帐户”支持这一点。

不幸的是，Flickr 似乎不支持这种交互。

对于公共数据交互（例如从您的帐户下载您的公共照片（照片流）），无需进行身份验证。您可以仅使用 Flickr 用户 ID 获取数据。

对于其他交互（例如从您的帐户下载私人照片（相机胶卷）），您需要至少执行一次完整的 OAuth 程序。

# android - 如果我的安卓手机有两张 SIM 卡，如何获取手机号码？

> ID：11362080
> 
> 赞同：7
> 
> 时间：2012-07-06T12:20:07.620
> 
> 标签：android, serial-number, dual-sim

我已经实现了一个应用程序，用于从我的 Google Ebony QWERTY 触摸屏获取 SIM 卡手机号码。在这个设备中，我有两张 SIM 卡。我使用 TelephonyManager 从设备获取手机号码，如下所示

```
TelephonyManager tMgr = (TelephonyManager) arTnewActivity.getSystemService(Context.TELEPHONY_SERVICE);
String getSimSerialNumber = tMgr.getLine1Number();
Log.v("Device mobile numbers",getSimSerialNumber); 
```

从上面的代码中，它将返回一个手机号码，但如果我在 Ebony QWERTY 双卡手机的情况下运行，那么我可以获得两个 sim 卡序列号吗？

请任何人帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:41:18.713

据我了解，默认 SDK 不支持处理双卡。从这个[线程](https://stackoverflow.com/questions/9626575/dual-sim-change-default-sim-card)听起来你必须询问制造商是否有可以提供这个的特殊 SDK。

如果是谷歌，他们可能会在某个地方塞进一些额外的 SDK？:-)

# javascript - jquery - 获取没有子文本的元素的文本

> ID：11362085
> 
> 赞同：26
> 
> 时间：2012-07-06T12:20:31.020
> 
> 标签：javascript, jquery

例如我们有这个文件

```
<div id="mydiv">
    some text here 
    <div id="inner div">
         text for inner div
    </div>
</div> 
```

我只需要使用如下代码获取`#mydiv`文本：

```
alert($('#mydiv').text());  // will alert "some text here" 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-06T12:26:18.577

嘿，请试试这个”：http: [//jsfiddle.net/MtVxx/2/](http://jsfiddle.net/MtVxx/2/)

此处针对您的具体案例的好链接：http: [//viralpatel.net/blogs/jquery-get-text-element-without-child-element/](http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/)（这只会获取元素的文本）

希望这可以帮助，`:)`

**代码**

```
jQuery.fn.justtext = function() {

    return $(this).clone()
            .children()
            .remove()
            .end()
            .text();

};

alert($('#mydiv').justtext());​ 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-12-31T04:26:23.067

目前[接受的答案](https://stackoverflow.com/a/11362182/1338292)在性能方面非常糟糕，所以我觉得有必要写一个更轻量级的答案：

```
$.fn.mytext = function() {
    var str = '';

    this.contents().each(function() {
        if (this.nodeType == 3) {
            str += this.textContent || this.innerText || '';
        }
    });

    return str;
};

console.log($('#mydiv').mytext());​ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-15T14:28:47.780

像[Ja͢ck 的回答](https://stackoverflow.com/a/20851691/2885620)一样，但不需要显式迭代（通过 .each()）和收集`textContent`s：

```
$('#mydiv').contents().filter(function(){return this.nodeType === 3}).text() 
```

或者，如果您可以使用**箭头函数：**

```
$('#mydiv').contents().filter((i, el) => el.nodeType === 3).text() 
```

# xml - 在 XSLT 输出中放置断线

> ID：11362087
> 
> 赞同：0
> 
> 时间：2012-07-06T12:20:39.947
> 
> 标签：xml, xslt

XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<ProcessData>
    <SOAPAction>urn:echo</SOAPAction>
    <Content_Type>text/xml;charset=UTF-8</Content_Type>
    <uname>sarah_brcm</uname>
    <pwd>BRCM_UVLwNhjrA5fbgqkUNdxQXMfcCDJ</pwd>
</ProcessData> 
```

XSLT：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
    <xsl:copy-of select="ProcessData/SOAPAction/text()"/>
    <br/>
    <xsl:copy-of select="ProcessData/Content_Type/text()"/>
</xsl:template>
</xsl:stylesheet> 
```

但输出不包含前两行之间的断线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:31:24.463

我已经在 xslttest.appspot.com 上检查了您的代码，并且可以正常工作。你如何进行转型？在浏览器中？libxslt？……撒克逊人？你也可能需要“html”输出方法，而不是“xml”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:40:18.610

`<br/>`用于输出 HTML。`&#13;`如果您想在数据节点中插入换行符，我建议您使用。

**html:**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes"/>
<xsl:template match="/">
    <xsl:copy-of select="ProcessData/SOAPAction/text()"/>
    <br/>
    <xsl:copy-of select="ProcessData/Content_Type/text()"/>
</xsl:template>
</xsl:stylesheet> 
```

**XML:**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
    <xsl:copy-of select="ProcessData/SOAPAction/text()"/>
       <xsl:text>&#13;</xsl:text>
       <xsl:text>&#13;</xsl:text>
    <xsl:copy-of select="ProcessData/Content_Type/text()"/>
</xsl:template>
</xsl:stylesheet> 
```

# javascript - jQuery高亮效果不起作用？

> ID：11362088
> 
> 赞同：0
> 
> 时间：2012-07-06T12:20:41.740
> 
> 标签：javascript, jquery, html, jquery-ui

这是我嵌入 javascript 的 ascx 页面。

当视图更改时，我想突出显示包含在 div 标记（用于测试目的的 div2）中的视图。

截至目前，观点变化良好，但我无法让亮点发挥作用。

我的javascript有问题还是我错过了其他东西？

谢谢

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<asp:MultiView ID="MultiView1" runat="server">

<asp:View ID="View1" runat="server">
   <p>This is View 1</p>
   <asp:Button ID="Button1" runat="server" Text="Next" onclick="Button1_Click" />
 </asp:View>

 <asp:View ID="View2" runat="server">
    <div id="div2" style="height:auto; width:auto;">
    <p>This is View 2</p>
    <asp:Button ID="Button2" runat="server" Text="Previous" 
        onclick="Button2_Click" />  
    <asp:Button ID="Button3" runat="server" Text="Next" onclick="Button3_Click" /> 
    </div>

    <script type="text/javascript">
    $(document).ready(function () {
    $("#Button1").click(function () {
    $("#div2").effect("highlight", {}, 3000);
    });
    });
    </script>

 </asp:View>

 <asp:View ID="View3" runat="server">
    <p>This is View 3</p>
    <asp:Button ID="Button4" runat="server" Text="Previous" 
        onclick="Button4_Click1" />

 </asp:View>

 </asp:MultiView>

  </ContentTemplate>
 </asp:UpdatePanel> 
```

代码背后：

```
namespace Multiview1.Multiview1
{
public partial class Multiview1UserControl : UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        MultiView1.SetActiveView(View1);
    }

   protected void Button1_Click(object sender, EventArgs e)
    {
        MultiView1.SetActiveView(View2);
        UpdatePanel1.Update();
    }

    protected void Button3_Click(object sender, EventArgs e)
    {
        MultiView1.SetActiveView(View3);
        UpdatePanel1.Update();
    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        MultiView1.SetActiveView(View1);
        UpdatePanel1.Update();
    }

    protected void Button4_Click1(object sender, EventArgs e)
    {
        MultiView1.SetActiveView(View2);
        UpdatePanel1.Update();
    }
  }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:05:25.773

问题似乎是加载多个版本的 jquery。

我已经设置了一个小提琴来显示这个问题。当第二个 jquery 库被注释掉时，它可以正常工作，而不是它根本不起作用。

[提琴手](http://jsfiddle.net/aTX4F/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:08:33.470

像这样使用你的按钮点击

```
$("#<%=Button1.ClientID%>").click(function () {
    $("#div2").effect("highlight", {}, 3000);
   });
}); 
```

因为它是一个 asp.net 控件。

编辑：你走错了方向，jquery点击没有问题，这里的问题是你的div标签在更新面板里面检查这个[链接](https://stackoverflow.com/questions/5098228/jquery-effect-highlight-not-working-in-asp-net-update-panel)

# android - 自动滚动水平滚动视图

> ID：11362095
> 
> 赞同：0
> 
> 时间：2012-07-06T12:21:00.100
> 
> 标签：android, horizontal-scrolling, horizontalscrollview

我在其中有水平滚动视图视图（按钮）是动态添加的。

我想要的是当活动开始时水平滚动视图自动从右到左滚动。

我被这个问题困住了。任何人都知道我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:26:56.793

如果你想在最右边滚动：

```
int w = myHorizontalScroll.getWidth();
myHorizontalScroll.scrollTo( w, 0 ); 
```

如果你想在最左边滚动：

```
 myHorizontalScroll.scrollTo( 0, 0 ); 
```

如果你想要一个平滑的滚动，你可以使用

```
myHorizontalScroll.smoothScrollTo( w, 0 ); 
```

# java - 随机数生成器覆盖集合中的所有数字

> ID：11362097
> 
> 赞同：2
> 
> 时间：2012-07-06T12:21:13.440
> 
> 标签：java, random, generator

我正在编写一个 Android 应用程序，我想生成随机数。

但是，Java 的 RandomGenerator 只给了我伪随机数。数字重复，并非所有数字都被覆盖。

我想要一些能给我非重复数字并覆盖所有数字的东西。我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T12:26:57.353

您可以将所需的所有随机值放入 List 并随机播放。

```
List<Integer> numbers = ...
Collections.shuffle(numbers); 
```

这将以随机顺序为您提供唯一编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:24:30.910

您可以用要循环的数字填充数据结构，然后随机化结构中元素的顺序并将它们一一拉出。或者，您可以随机选择索引，并在这些索引处检索元素。无论你做什么（你会为特定的数据结构选择一个更有效的），你一定要在你抓住它时*删除它。*随着您继续前进，您的数据结构将变得越来越小，直到您收到所有元素并且什么都没有。这也确保您永远不会两次击中相同的数字，因为您已将其从可能的数字池中删除。

# javascript - HTML 'Title' 属性显示单词 'undefined' - 例如。'主页未定义'

> ID：11362098
> 
> 赞同：0
> 
> 时间：2012-07-06T12:21:15.493
> 
> 标签：javascript, html, css, flash

我目前的网站“标题”有问题。这目前显示不正确，如“Kush Koutureundefined”，应显示“Kush Kouture”（请参阅​​屏幕截图链接 - [http://imageshack.us/photo/my-images/38/screenshotnpe.jpg/](http://imageshack.us/photo/my-images/38/screenshotnpe.jpg/)）。

我的网站由嵌入到 index.html 中的 .swf (index.swf) 组成

这是我的代码...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<meta name="author" content="Kush Kouture" /> 
<meta name="keywords" content="Kush Kouture" /> 
<meta name="description" content="Kush Kouture" /> 

<title>Kush Kouture</title> 

<script type="text/javascript" src="swfobject.js"></script> 
<script type="text/javascript" src="swfaddress.js"></script> 
<script type="text/javascript" src="swffit.js"></script> 
<script type="text/javascript"> 
var flashvars = {}; 
flashvars.url_config = "xml/configuration_site.xml"; 
flashvars.initServices = true; 
var params = {}; 
params.allowfullscreen = true; 
params.allowScriptAccess = "always"; 
var attributes = {}; 
attributes.id = 'flashObject'; 
attributes.bgcolor = '#000000'; 

swfobject.embedSWF("flash/index.swf", "Alternative", "100%", "100%", "8", "flash/index.swf", flashvars, params, attributes); 
</script> 

<style type="text/css"> 
/* hide from ie on mac \*/ 
html { 
height: 100%; 
overflow: hidden; 
} 

#flashcontent { 
height: 100%; 
} 
/* end hide */ 

body { 
height: 100%; 
margin: 0; 
padding: 0; 
background-color: #ffffff; 
} 
p { 

font-size: 10px; 
font-family: Verdana; 
line-height:17px; 
color:#ffffff; 

}  
.style1 { 
font-size: 11px; 
font-family: Verdana; 
color:#ffffff; 
text-transform:uppercase; 
} 
</style> 

</head> 
<body> 

<div id="flashContent> 
<object id="flashObject" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=11,0,0,0" width="100%" height="100%"> 
<param name="movie" value="flash/index.swf" /> 
<param name="wmode" value="transparent" /> 
<param name="width" value="100%" /> 
<param name="height" value="100%" /> 
<param name="scale" value="noscale" /> 
<object type="application/x-shockwave-flash" data="flash/index.swf" align=""      scale="noscale" wmode="transparent" width="100%" height="100%"> 
</object> 
</object> 
</div> 

<div id="Alternative">  
<p style="color:#999999">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kush Kouture | You require the latest version of Adobe Flash Player in order to view this site. Please use the button below to download the latest version.</p> 
<p><a href="http://get.adobe.com/flashplayer/"><img src="flash.jpg" alt="Get Adobe Flash player" /></a></p> 
</div> 

</body> 
</html> 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:30:46.817

似乎您可以从 Flash 中更改页面标题：

[从 SWF 设置页面标题](https://stackoverflow.com/questions/87909/setting-page-title-from-a-swf)

这将是我最有可能的候选人。你写了Flash应用程序吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:59:21.017

好吧，看起来有些东西正在改变（添加）到您当前的标题标签。可能是 swf 或一些 js。我建议您一次取出一个组件，找出哪个文件正在执行此操作，然后从那里开始。

# c++ - 这是在 C++ 中创建单例类的正确方法吗？

> ID：11362102
> 
> 赞同：0
> 
> 时间：2012-07-06T12:21:18.710
> 
> 标签：c++

> **可能重复：**
> [单例有什么不好的？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)
> [C++ 中的单例模式](https://stackoverflow.com/questions/4084087/singleton-pattern-in-c)

我想创建一个单例类。为此，我创建了一个类，其所有成员和方法都是静态的。像这样的东西。

```
class a
{
    static int a;
    static GetA();
} 
```

现在所有想要使用我的单例类的类都不能为我的类创建任何对象，并且也将获得相同的值。我只想知道这个实现是否能解决所有目的并满足创建单例类的所有标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:24:49.020

我更喜欢：

```
GlobalObjectMgr& GlobalObjectMgr::instance()
{
    static GlobalObjectMgr objMgr;
    return objMgr;
} 
```

不需要类成员变量，它仅在需要时创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T13:17:58.923

传统的单例（反）模式不是静态变量的集合；相反，它是一个具有非静态成员的对象，其中只能存在一个实例。

In C++, this allows you to avoid the biggest problem with static variables: the "initialisation order fiasco". Because the initialisation order is unspecified for static variables in different translation units, there's a danger that the constructor of one might try to access another before it is initialised, giving undefined behaviour. However, it introduces other problems (a similar "destruction order fiasco", and thread safety issues in older compilers), so it's still something to avoid.

If you want a collection of static variables and functions, then put them in a namespace rather than a class:

```
namespace stuff {
    int a;
    void do_something();
} 
```

If you think you want a singleton, then think again; you're generally better avoiding globally accessible objects altogether. If you still want one, then you would make a class with a private constructor, and a public accessor that returns a reference to the single instance, along the lines of:

```
class singleton {
public:
    singleton & get() {
        static singleton instance;
        return instance;
    }

    int a;
    void do_something();

private:
    singleton() {}
    ~singleton() {}
    singleton(singleton const &) = delete;
}; 
```

# java - 使用jackson解码json时的验证

> ID：11362104
> 
> 赞同：6
> 
> 时间：2012-07-06T12:21:21.160
> 
> 标签：java, json, jackson

我收到一个 json 编码的字符串，然后将其解码为 pojo，如下所示：

```
String json = ...

final ObjectMapper mapper = new ObjectMapper();
MyPojo obj  = mapper.readValue(json, MyPojo.class); 
```

我希望能够验证这个输入，但我不确定这样做的“正确方法”是什么。
假设 MyPojo 的定义如下：

```
@JsonIgnoreProperties(ignoreUnknown=true)
class MyPojo {
    public static enum Type {
        One,
        Two,
        Three;

        @JsonValue
        public String value() {
            return this.name().toLowerCase();
        }
    }

    private String id;
    private Type type;
    private String name;

    public String getId() {
        return this.id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Type getType() {
        return this.type;
    }

    public void setType(Type type) {
        this.type = type;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

我想验证三件事：

1.  所有成员都有价值观
2.  枚举值是枚举的一部分
3.  根据某些标准测试部分或全部值（即：最小或最大长度、最小或人数值、正则表达式等）

如果验证失败，我想返回一个有意义且可读的消息。

对于第一个和第三个问题，我可以简单地检查对象的所有成员，看看是否有任何成员为空，如果不根据标准测试它们，但是当有很多字段时，这种方法会变得冗长而复杂。

至于第二个问题，如果输入中的值与枚举值之一不匹配，`JsonMappingException`则抛出 a，因此我设法做到了：

```
try {
    MyPojo obj  = mapper.readValue(json, MyPojo.class);
}
catch (JsonMappingException e) {
    return "invalid value for property: " + e.getPath().get(0).getFieldName();
} 
```

但是如何获取输入中的值以便我可以返回：`invalid value: VALUE for property: PROPERTY`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:22:01.237

我建议使用[**JSR-303 Bean Validation**](http://jcp.org/en/jsr/detail?id=303)的实现。该规范定义了一组注释和 XML 配置文件，用于指定您希望在域对象上验证的约束。参考实现可在此处获得：

*   [http://www.hibernate.org/subprojects/validator.html](http://www.hibernate.org/subprojects/validator.html)

# javascript - 如何在没有 jQuery 或任何其他库的情况下捕获 CTRL-S？

> ID：11362106
> 
> 赞同：19
> 
> 时间：2012-07-06T12:21:24.370
> 
> 标签：javascript, dom

如何在网页中捕获`CTRL`+`S`事件？

我不想使用 jQuery 或任何其他特殊库。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2020-02-18T10:52:08.873

**2020年的最新答案。**

由于键盘事件对象最近发生了变化，并且它的许多旧属性现在已被弃用，这里有一个现代化的代码：

```
document.addEventListener('keydown', e => {
  if (e.ctrlKey && e.key === 's') {
    // Prevent the Save dialog to open
    e.preventDefault();
    // Place your code here
    console.log('CTRL + S');
  }
}); 
```

请注意新[`key`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)属性，其中包含有关描边键的信息。此外，某些浏览器可能不允许代码覆盖系统快捷方式。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-06T12:30:57.820

如果您只是使用本机/香草 JavaScript，这应该可以达到您所追求的结果：

```
var isCtrl = false;
document.onkeyup=function(e){
    if(e.keyCode == 17) isCtrl=false;
}

document.onkeydown=function(e){
    if(e.keyCode == 17) isCtrl=true;
    if(e.keyCode == 83 && isCtrl == true) {
        //run code for CTRL+S -- ie, save!
        return false;
    }
} 
```

**发生了什么？**

**onkeydown**方法检查是否是 CTRL 键被按下（键码17 **）**。如果是这样，我们将**isCtrl**值设置为**true**以将其标记为已激活并正在使用中。我们可以在**onkeyup**函数中将此值恢复为**false 。**

 **然后我们查看是否有任何其他键与 ctrl 键一起被按下。在此示例中，键代码**83**用于 S 键。您可以在此函数中添加自定义处理/数据操作/保存方法，我们返回**false**以尝试阻止浏览器对按 CTRL-S 键本身进行操作。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-06T12:27:33.283

```
document.onkeydown = function(e) {
    if (e.ctrlKey && e.keyCode === 83) {
        alert('hello there');

        // your code here
        return false;
    }
}; 
```

您需要替换`document`为您的实际输入字段。

## [演示](http://jsbin.com/obixav/2)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T12:28:56.760

```
document.onkeydown = function(e) {
    if (e.ctrlKey && e.keyCode === 83) {
        alert('strg+s');
    }
    return false;
}; 
```

有些事件无法被捕获，因为它们是由系统或应用程序捕获的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T12:27:04.840

糟糕，您想要同时更改代码以反映您的场景

```
function iskeyPress(e) {
          e.preventDefault();
            if (e.ctrlKey&&e.keyCode == 83) {
               alert("Combination pressed");

               }
              return false;//To prevent default behaviour         
              } 
```

将此添加到正文

```
 <body onkeyup="iskeypress()"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T08:23:34.553

添加 Shortcuts JS 库并执行以下代码：

```
<script src="js/libs/shortcut/shortcut.js" type="text/javascript"></script> 
```

然后

```
shortcut.add("Ctrl+S", function() {
            alert("لقد قمت بالصغط على مراقبة مع حرف السين");
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-08T19:10:46.733

[Mousetrap](https://github.com/ccampbell/mousetrap)是一个很棒的图书馆（Github 上有 8,000 多颗星）。

**文档**：[https ://craig.is/killing/mice](https://craig.is/killing/mice)

```
// map multiple combinations to the same callback
Mousetrap.bind(['command+s', 'ctrl+s'], function() {
    console.log('command s or control s');

    // return false to prevent default browser behavior
    // and stop event from bubbling
    return false;
}); 
```**

# javascript - Mongodb动态like运算符

> ID：11362113
> 
> 赞同：6
> 
> 时间：2012-07-06T12:21:42.860
> 
> 标签：javascript, node.js, mongodb

在 mongodb 中，相当于 sql "like" 运算符是

```
db.users.find({"shows": /m/}) 
```

使用 nodejs/javascript 我想根据 url 参数动态更改字母。

我试过了

```
letter = req.params.letter;

db.users.find({"shows": '/' + letter + '/'}) 
```

这不起作用，我猜是因为斜杠现在是字符串的解释不同。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T12:25:51.573

根据[文档页面，一种方法是：](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)

```
db.users.find( { shows : { $regex : letter } } ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T20:07:36.910

+1 for mindandmedia 的语法。但是，请记住，如果您希望查询**有效**地使用索引，您必须使用前缀查询（也称为根正则表达式），例如 /^prefix/

否则，您的查询可能会非常缓慢 - 请参阅此处文档中的注释：

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-05T04:48:32.267

你可以试试这个：

```
let filter = "Dynamic";

let str = /.*Raj.*/;
console.log(str);
console.log(typeof(str));

let stra = eval(`/.*${filter}+.*/`);
console.log(stra);
console.log(typeof(stra)); 
```

# java - 停止位置管理器在按钮中不起作用

> ID：11362114
> 
> 赞同：1
> 
> 时间：2012-07-06T12:21:43.617
> 
> 标签：java, android, locationmanager

您好，有人可以帮我解决我做错的事情。

我希望这个应用程序在后台工作，我只想在一个按钮中停止位置管理器。当我使用 removeUpdates 时，它不起作用。我不能在那里调用那个函数。

```
public class LbsGeocodingActivity extends Activity {

private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 60000; // Minuten(van milliseconden) * aantal

protected LocationManager locationManager;
protected LocationListener locationListener;

protected Button retrieveLocationButton;
protected Button stopLocationButton;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);
    stopLocationButton = (Button) findViewById(R.id.stop_location_button);

    LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            MINIMUM_TIME_BETWEEN_UPDATES, 
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
    );

    retrieveLocationButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            showCurrentLocation();
        }
    }); 

    retrieveLocationButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
   LocationManager.removeUpdates(locationListener)  ;       }
    });      
} 

protected void showCurrentLocation() {

    Location location =    locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    if (location != null) {
        String message = String.format(
                "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude()
        );
        Toast.makeText(LbsGeocodingActivity.this, message,
                Toast.LENGTH_LONG).show();
    }

}   

public class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        String message = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude()
        );
        Toast.makeText(LbsGeocodingActivity.this, message, Toast.LENGTH_LONG).show();
    }

    public void onStatusChanged(String s, int i, Bundle b) {
        Toast.makeText(LbsGeocodingActivity.this, "Provider status changed",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderDisabled(String s) {
        Toast.makeText(LbsGeocodingActivity.this,
                "Provider disabled by the user. GPS turned off",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderEnabled(String s) {
        Toast.makeText(LbsGeocodingActivity.this,
                "Provider enabled by the user. GPS turned on",
                Toast.LENGTH_LONG).show();
    }

} 
```

我真的很需要这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:44:56.150

从此更改代码（*** 表示更改的内容 ***）：

```
***retrieveLocationButton***.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    locationManager.removeUpdates(locationListener)  ;       
    }
}); 
```

对此：

```
stopLocationButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        locationManager.removeUpdates(locationListener)  ;       
    }
}); 
```

**编辑：**

对函数使用`locationManager`“以小写字母开头的全局变量”而不是`LocationManager`“以大写字母开头的类”`removeUpdates()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:43:07.997

```
locationManager.removeUpdates(MyLocationListener); 
```

尝试这个。

# c# - 使用 .NET 运行 C# 应用程序 - MONO

> ID：11362115
> 
> 赞同：0
> 
> 时间：2012-07-06T12:21:46.043
> 
> 标签：c#, .net, mono

我有一个使用 C# 制作的简单应用程序。

现在我该如何制作它，使其在所有系统上运行。如果 PC 没有安装 .NET 框架 - 它应该只安装程序所需的最低要求。安装 .NET 框架 - 与许多只有几千字节的程序相比，它的大小太大了。也应该保持沉默，只有在需要时才可以。基本上，应用程序应该是轻量级的并且能够在所有 Windows 系统中运行。对接触 Linux 用户不感兴趣。

我应该使用 Mono 项目吗？否则有一种方法可以选择性地预装最小的 .NET 框架。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:53:19.083

看看[mkbundle](http://www.mono-project.com/Guide%3aRunning_Mono_Applications#Bundles)。它将创建一个独立的可执行文件，没有其他依赖项。特别是它既不需要安装 Mono 运行时也不需要安装 .NET 即可执行。

大小可能仍然是一个问题（它可能是几兆字节，甚至是压缩的），因此还有另一个工具可以从程序集中删除您不需要的所有内容：[monolinker](http://www.mono-project.com/Linker)。

请注意，即使完成所有这些操作，大小也可能不会达到千字节范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:48:44.047

您可以通过大量工作和 Mono 框架的帮助来做到这一点。有关更多信息，请参阅[嵌入 Mono](http://www.mono-project.com/Embedding_Mono)。

![嵌入单声道](../Images/2bdc5d4dd75616f1c115aa2cd7fdeb3a.png)

综上所述，使用 boostrapper 安装 .NET Client Framework 版本会容易得多。但是您将失去静默安装或“千字节”占用空间的能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:37:26.343

要运行 .net 应用程序，您需要安装 .net 框架，它应该是完整版或受限客户端配置文件版。

最简单的方法是从 VS 创建一个安装项目并需要您想要的 .net 版本...安装程序应该能够从 Internet 安装 .net 框架，因此您不需要随应用程序一起提供它可以从安装程序的方式。

Mono 不会有什么不同，因为它仍然需要安装在系统上。然而，Mono 具有完整的 AOT 支持，但我不知道这是否会对您有所帮助......无论如何，它仍然是一个巨大的矫枉过正。

如果您需要您的应用程序很小并且在没有任何依赖关系的任何窗口上运行，您应该在 c/c++ 或 vb6 中执行，其运行时随大多数 Windows 版本一起提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:27:20.470

不幸的是，您不能在没有安装 .NET 框架的机器上运行 .NET 程序，并且可以使程序的安装程序自动下载框架，但不能在 .NET 中下载。

# spring - org.springframework.web.servlet.DispatcherServlet 在 VMWare vFabric tc Server 和 maven 中找不到

> ID：11362118
> 
> 赞同：5
> 
> 时间：2012-07-06T12:22:03.373
> 
> 标签：spring, maven, spring-mvc, sts-springsourcetoolsuite, pom.xml

我知道之前发布的一个问题与这个问题非常相似。但该解决方案不适用于我的问题。

我正在尝试使用 Maven 启动一个基本的 Spring 项目。这是我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>es.indra</groupId>
  <artifactId>springappUV</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <properties>
    <org.springframework.version>3.1.1.RELEASE</org.springframework.version>
  </properties>
  <packaging>war</packaging>
  <dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
  </dependencies>
</project> 
```

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>springappUV</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>springapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
       <param-name>contextConfigLocation</param-name>
       <param-value>/WEB-INF/spring/app-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>springapp</servlet-name>
    <url-pattern>*.htm</url-pattern>
  </servlet-mapping>
</web-app> 
```

我正在使用 VMWare vFabric tc Server Developer Edition v2.6（STS 附带的那个）。当我使用它运行 webapp 时，出现以下错误：

```
GRAVE: El Servlet /springappUV lanzó excepción de load()
java.lang.ClassNotFoundException: org.springframework.web.servlet.DispatcherServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:415)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:397)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1099)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1043)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4957)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5284)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5279)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
06-jul-2012 14:06:56 org.apache.catalina.startup.HostConfig deployDirectory 
```

我知道它必须与依赖项有关，但是在 Maven 依赖项中，jar spring-webmvc-3.1.1.RELEASE.jar 包含错误说丢失的类。所以似乎服务器不知道图书馆在那里。

有谁知道会发生什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T12:37:45.630

在项目选项中，您应该在部署程序集中包含 Maven 依赖项 ![在此处输入图像描述](../Images/65b521a7e4ce4e20e99a1273107cb148.png)

1.  *项目属性*->*部署程序集*->**添加..**

2.  *Java 构建路径条目*-> *Maven 依赖项*

3.  **结束**

**upd：**还请注意，您应该`war`在项目 pom.xml 中 设置打包`<packaging>war</packaging>`，然后使用*Maven->Update Project..*如果您使用 eclipse maven 插件定期更新 STS 项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T12:24:00.850

您必须在部署程序集中包含 Maven 依赖项——它们不会被部署到 Web 服务器。这就是您在 Eclipse 中修复该错误的方式，我猜 STS 会类似。

# c# - 以通用方法从字典中获取键和值类型

> ID：11362119
> 
> 赞同：1
> 
> 时间：2012-07-06T12:22:08.260
> 
> 标签：c#, generics

我希望能够在通用方法中使用字典。我正在寻找一种从发送到通用扩展方法 LoadProperty 的字典的键和值中获取类型的方法。

这是我到目前为止所做的。

我将该方法称为扩展

```
entityObject.LoadProperty<Dictionary<string, int>>("CartonThreshold")
//entityObject.LoadProperty<Dictionary<string, double>>("CartonThreshold")

// ... 

public static T LoadProperty<T>(this EntityObject entity, string name) where T : new()
{
    EntityObjectProperty prop = entity.Properties.Single(x => x.Name.Equals(name));

    // If request dictionary
    if (typeof(T).GetInterface(typeof(IDictionary<,>).Name) != null || typeof(T).Name.Contains("IDictionary"))
    {
        var dictionaryInstance = (IDictionary)new T();

        // Just for testing
        var a = dictionaryInstance.Keys.GetType().Name;
        var b = dictionaryInstance.Values.GetType().Name;

        var key = (T) Convert.ChangeType(prop.Name, typeof (T));
        var value = (T) Convert.ChangeType(prop.Value, typeof (T));
        dictionaryInstance.Add(key, value);
        return (T) dictionaryInstance;
    }

    // default
    return (T)Convert.ChangeType(prop.Value, typeof(T));
} 
```

目标是返回正确类型的字典

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:15:55.367

我正在寻找的是 GetType() 的 GetGenericArguments() 扩展

下面的方法将返回我需要的东西。

```
public static T LoadProperty<T>(this EntityObject entity, string name) where T : new()
{
    EntityObjectProperty prop = entity.Properties.Single(x => x.Name.Equals(name));

    try
    {
        // If request dictionary
        if (typeof(T).GetInterface(typeof(IDictionary<,>).Name) != null || typeof(T).Name.Contains("IDictionary"))
        {
            var dictionaryInstance = (IDictionary)new T();

            var typing = dictionaryInstance.GetType().GetGenericArguments();
            Type keyType = typing[0];
            Type valueType = typing[1];

            // dictionary fallback, set to default of the valuetype if null
            object value = prop.Value != null ? Convert.ChangeType(prop.Value, valueType) : Activator.CreateInstance(valueType);
            var key = Convert.ChangeType(prop.Name, keyType);
            dictionaryInstance.Add(key, value);
            return (T)dictionaryInstance;
        }

        if (prop.Value != null)
        {
            // default
            return (T)Convert.ChangeType(prop.Value, typeof(T));
        }
    }
    catch { }
    return default(T);
} 
```

这样我可以像这样调用方法

```
// Will return a typed dictionary with the EntityObjectProperty name as key and the EntityObjectProperty Value as value
entityObject.LoadProperty<Dictionary<string, int>>("CartonThreshold")

// Will return a string of the EntityObjectProperty Value
entityObject.LoadProperty<string>("CartonThreshold")

// Will return an Int of the EntityObjectProperty Value
entityObject.LoadProperty<int>("CartonThreshold") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:15:48.250

你为什么不像这样定义你的方法：

```
public static IDictionary<K, V> LoadProperty<K, V>(this EntityObject entity, string name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:11:28.733

如果我正确理解了您的问题，您想要做的是这样定义您的方法：

```
public static T LoadProperty<T,TKey,TValue>(this EntityObject entity, string name) 
    where T : IDictionary<TKey,TValue>, new() {
    EntityObjectProperty prop = entity.Properties.Single(x => x.Name.Equals(name));
    T t = new T();
    t.Add((TKey)prop.Name, TValue(prop.Value));
    return t;
} 
```

然后调用它

```
Dictionary<string,int> property = entityObject.LoadProperty<Dictionary<string,int>, string, int>("test"); 
```

坏事是你每次都必须指定所有的通用参数......
如果你的具体情况没问题，它会像这样简单得多：

```
public static IDictionary<TKey,TValue> LoadProperty<TKey,TValue>(this EntityObject entity, string name) {
    EntityObjectProperty prop = entity.Properties.Single(x => x.Name.Equals(name));
    var dict = new Dictionary<TKey,TValue>();
    dict.Add((TKey)prop.Name, TValue(prop.Value));
    return dict;
} 
```

**编辑**：在您澄清之后，如何通过通用参数的数量来区分这两种情况？

```
public static IDictionary<TKey,TValue> LoadProperty<TKey,TValue>(this EntityObject entity, string name) {
    var d = new Dictionary<TKey,TValue>();
    // add value from EntityObject 
    return t;
}

public static TValue LoadProperty<TValue>(this EntityObject entity, string name) {
    TValue ret;
    // get value from EntityObject 
    return ret;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T13:29:26.213

为了让它与几乎任何东西一起工作，你可以传递一个函数来创建你想要的任何返回类型：

```
public static T LoadProperty<TKey,TValue,T>(this EntityObject entity, string name,  Func<TKey,TValue,T> createWhatever) 
{
    EntityObjectProperty prop = entity.Properties.Single(x => x.Name.Equals(name));
    return createWhatever((TKey)prop.Name, (TValue)prop.Value);
} 
```

不过，这在调用时会更加冗长。

# ruby-on-rails - ActionMailer::Base.deliveries 返回具有重复值的数组

> ID：11362120
> 
> 赞同：1
> 
> 时间：2012-07-06T12:22:21.147
> 
> 标签：ruby-on-rails, actionmailer, delayed-job

ActionMailer::Base.deliveries 返回具有重复值的数组。我正在使用rails 3.0.9 ruby​​ 1.9.2 和delayed_job3.0.pre。在测试环境中，它返回不重复的值，但在生产中它们是重复的。你能帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:03:39.737

`ActionMailer::Base.deliveries`用于测试目的。你不应该在生产中使用它。

# c - 斯坦福大学的指针和内存

> ID：11362124
> 
> 赞同：0
> 
> 时间：2012-07-06T12:22:36.667
> 
> 标签：c, pointers

我正在阅读斯坦福 CS 图书馆的文章[http://cslibrary.stanford.edu/102/](http://cslibrary.stanford.edu/102/)

> 最常见的指针错误类型的错误指针示例代码看起来像上面的正确代码，但没有为指针分配指针的中间步骤。错误的代码可以正常编译，但在运行时，每次使用错误指针的取消引用都会以某种方式破坏内存。程序迟早会崩溃。程序员有责任确保在使用每个指针之前为其分配一个指针。以下示例显示了错误代码的简单示例以及内存可能如何反应的图形...

```
void BadPointer() {
   int* p;     // allocate the pointer, but not the pointee
   *p = 42;    // this dereference is a serious runtime error
} 
```

// 当坏指针被取消引用时，运行时会发生什么...

但我记得 char* 应该这样定义

```
char *const name_ptr = "Test"; 
```

这样一来，如果大家想一想这个char*是不是一个不好的定义呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:36:23.973

线

```
char *const name_ptr = "Test"; 
```

很好；您正在使用字符串字面量的地址初始化指针，该地址`"Test"`是一个存储数组`char`，其内存在程序启动时分配并保持到程序终止。

关于`const`预选赛的快速题外话：

在 C 中，声明形式

```
const T foo = expr; 
```

或者

```
T const foo = expr; 
```

表示`foo`可能无法写入；它在创建时被分配了*expr的值，并且该值在*^(1))`foo`的剩余生命周期内可能不会更改。使用指针变量，它变得有点复杂：

```
const T *p = expr;
T const *p = expr; 
```

两者都声明`p`为指向*const*数据的*非 const*指针；IOW，您可以更改(可以指向不同的对象) 的值，但不能更改 ( 您不能更改指向的值) 的值。*`p``p``*p``p`*

 *```
T * const p = expr; 
```

声明`p`为指向*非 const*数据的*const*指针；您可以更改指向 ( ) 的值，但不能更改为指向不同的对象。 *`p``*p = ...``p`*

 *```
const T * const p = expr;
T const * const p = expr; 
```

两者都声明`p`为指向*const*数据的*const*指针；您无法更改的值或指向的内容。 *`p``p`*

 *在 C 中，字符串文字如`"Test"`存储为 的数组`char`，但尝试修改字符串文字的内容是未定义的行为（取决于平台，您可能会遇到访问冲突）。为了安全起见，通常最好将指向字符串文字的指针声明为`const char *`or `char const *`，而不是`char * const`像上面的示例中那样。

据，直到...为止

```
void BadPointer() {
   int* p;     // allocate the pointer, but not the pointee
   *p = 42;    // this dereference is a serious runtime error
} 
```

是`p`一个`auto`变量，它没有被初始化为任何特定的值；它将包含一个随机位串，该位串可能对应也可能不对应于可写地址。正因为如此，语句的行为`*p = 42;`是*未定义*的——你可能会遇到访问冲突，你可能会覆盖一些重要的东西并使程序处于错误状态，或者它可能看起来“工作”没有问题（写给一些可访问且不重要的随机内存区域）。

^(通常，仅从指针值2))无法判断给定指针值是有效还是无效。一个例外是特殊的指针值 NULL，它是一个定义明确的“无处”，可以保证与任何有效的指针值进行比较不相等。在文件范围（在任何函数之外）或使用`static`限定符声明的指针变量被隐式初始化为 NULL。非静态的块范围指针变量应始终使用 NULL 或有效地址显式初始化。这样，您可以轻松检查指针是否已分配有效值：

```
int *p = NULL;
...
if (p != NULL) // or simply if (p)
{
  *p = 42;
}
else
{
  // p was not assigned a valid memory location
} 
```

* * *

^(1) 请注意，在 C 中，`foo`不是*编译*时常量；它是一个常规的运行时变量，你不能写入它。您不能在需要编译时常量的上下文中使用它。

2) 如果您非常熟悉您的平台的内存模型，您可以做出一些有根据的猜测，但即使这样也不能保证。) 

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:26:28.057

在第二种情况下：

`char *const name_ptr = "Test";`

您正在创建一个放在只读内存中的字符串文字。因此，您可以有一个合法的指针。

在第一种情况下：

```
void BadPointer() {
   int* p;     // allocate the pointer, but not the pointee
   *p = 42;    // this dereference is a serious runtime error
} 
```

你会得到一个未定义的行为（UB）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T12:31:01.153

`char *const name_ptr`表示这`name_ptr`是一个指向 char 的常量指针（它是常量指针）。

您可能的意思是`const char * name_ptr = "Test"` (`name_ptr`是一个指向常量*字符的指针)*

问题是这`"Test"`是一个字符串，它是一个字符数组，存储在（可能）常量内存中的某个位置。由于分配了内存，因此可以初始化指向它的指针。

`int *p;` 是一个未初始化的指针。它有一些未定义的值，可能会或可能不会解析为合理的内存位置——很可能它不会，但你永远不知道。说`*p = 42;`将用 覆盖该任意内存位置`42`，然后您的程序的所有赌注都将关闭。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T12:56:05.947

在这种情况下，它有助于记住指针只不过是一个保存**值**的普通变量- 关于它的唯一“神奇”部分是值表示内存中的一个位置，您可以取消引用该位置以访问那里存储了什么。

想象一下这样的代码：

```
void BadPrinter() {
   int p;
   printf("%d\n", p);
} 
```

它会打印什么？谁知道？也许是 0，也许是垃圾，也许是 Styx 的“Come Sail Away”的歌词编码为整数。

现在我们回到您的指针代码：

```
void BadPointer() {
   int* p;     // allocate the pointer, but not the pointee
   *p = 42;    // this dereference is a serious runtime error
} 
```

`p`以完全相同的方式未初始化 - 它可以**包含**任何内容。因此，当您这样做时`*p`，您是在要求编译器允许您访问**由`p`.**

因此，如果`p`碰巧包含`0`，您现在正试图将值填充`42`到内存位置`0x0`：您的程序可能会崩溃。如果`p`碰巧在可写内存中包含一个位置，您的程序可能会继续愉快地进行，因为您将被允许存储`42`在该位置。

现在这种情况有点不同：

```
char *const name_ptr = "Test"; 
```

在这里，您要求编译器分配足够的内存空间来存储字符串`"Test"`并将**该内存的位置存储**在`name_ptr`. 回到我们的第一个例子，它类似于：

```
void GoodPrinter() {
   int p = 4;
   printf("%d\n", p);
} 
```***

# windows - 需要在没有用户访问权限的情况下 FTP windows 服务器

> ID：11362125
> 
> 赞同：0
> 
> 时间：2012-07-06T12:22:38.523
> 
> 标签：windows, unix, command-line, ftp, automation

我可以在我的报告所在的浏览器中访问服务器 ftp:// 172.155.58.78/Util。我可以右键单击并下载它们。

但是我想自动化这些报告文件的 FTP。所以我尝试通过 CMD 提示进行 FTP，这要求我提供我没有的用户/密码。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:26:56.587

您的浏览器可能在您不知情的情况下为 FTP 服务器提供了默认的匿名帐户凭据。

尝试使用用户名匿名和无密码从您的 cmd 登录，或使用您的电子邮件地址作为密码。

# javascript - 当用户点击重置缩放按钮时，Highcharts 图表触发点或图表点击事件

> ID：11362128
> 
> 赞同：0
> 
> 时间：2012-07-06T12:22:41.463
> 
> 标签：javascript, jquery, highcharts

这很令人困惑，因为在我们的图表中，当用户单击图表或点时会弹出一个弹出窗口，而当用户单击重置缩放按钮时会打开弹出窗口。我该如何解决这个问题？任何想法？

# c# - 如何使用以下代码将值从下拉框中传递到 SQL 数据库... [代码错误]？

> ID：11362131
> 
> 赞同：0
> 
> 时间：2012-07-06T12:22:54.903
> 
> 标签：c#, asp.net, event-handling, code-behind

我正在尝试传递 Drop1.text (DropDownList) 的 selectedItem 以保存在 Emp_Name 字段中的 SQL 表 (TimeSheetDtls) 中，目前，下面的代码不起作用。当我单击按钮（button1_click 已添加到按钮）时，页面会发回，但不会更新表格或写出感谢声明。错误在哪里？

```
protected void button1_Click(object sender, EventArgs e)
{
    string name = Drop1.Text; // Scrub user data

    string connString = ConfigurationManager.ConnectionStrings["TimesheetDtlsConnectionString1"].ConnectionString;
    SqlConnection Conn = null;
    try
    {
        Conn = new SqlConnection(connString);
        Conn.Open();

        using (SqlCommand cmd = new SqlCommand())
        {
            cmd.Connection = Conn;
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "INSERT INTO TimeSheetDtls VALUES (@Emp_Name)";
            cmd.Parameters.AddWithValue("@Emp_Name", Drop1.SelectedItem);
            int rowsAffected = cmd.ExecuteNonQuery();
            if (rowsAffected == 1)
            {
                Response.Write("Thank you very much, " + Drop1.SelectedItem); //Success notification
            }
            else
            {
                Response.Write("There was an error, please try again."); //Error notification
            }
        }
    }
    catch (Exception ex)
    {
        //log error 
        //display friendly error to user
    }
    finally
    {
        if ( Conn != null)
        {
           Conn.Close(); //cleanup connection i.e close 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:32:08.960

有两种可能。

1.  如果要插入所选文本，请`dropdownlist`使用：

    ```
    Drop1.SelectedItem.Text 
    ```

2.  如果要插入所选文本的值，请使用：

    ```
    Drop1.SelectedItem.Value 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:23:47.180

尝试`Drop1.SelectedValue`改用...

要在本地工作，请为您的连接字符串尝试以下格式：

```
<add name="LocalSqlServer" 
    connectionString="Initial Catalog=MyDB;Data Source=MyMachineName;Integrated Security=SSPI;"
        providerName="System.Data.SqlClient" /> 
```

对于远程服务器使用：

```
<remove name="MyConn" />
    <add name="MyConn" 
        connectionString="server=MyServerName;database=MyDB;uid=MyAdmin;pwd=MyPwd"
            providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:24:47.500

或者 `Drop1.SelectedItem.Text`，如果您真的想要文本。

# c# - 添加间隔时 HttpWebRequest 变慢

> ID：11362136
> 
> 赞同：1
> 
> 时间：2012-07-06T12:23:08.883
> 
> 标签：c#, .net, httpwebrequest, gzip, deflate

测试下载网页源代码的不同可能性我得到了以下结果（以毫秒为单位的平均时间到 google.com、9gag.com）：

*   普通 HttpWebRequest：169、360
*   Gzip HttpWebRequest：**143、260**
*   WebClient 获取流： **132、295**
*   WebClient 下载字符串：143、389

因此，对于我的 9gag 客户端，我决定采用 gzip HttpWebRequest。问题是，在我的实际程序中实现后，请求花费了两倍以上的时间。
仅在两个请求之间添加 Thread.Sleep 时也会出现问题。

**编辑：**
只是稍微改进了代码，仍然是同样的问题：在循环中运行时，当我在请求之间添加延迟时，请求需要更长的时间

```
for(int i = 0; i < 100; i++)
{
    getWebsite("http://9gag.com/");
} 
```

每个请求大约需要 250 毫秒。

```
for(int i = 0; i < 100; i++)
{
    getWebsite("http://9gag.com/");
    Thread.Sleep(1000);
} 
```

每个请求大约需要 610 毫秒。

```
 private string getWebsite(string Url)
    {
        Stopwatch stopwatch = Stopwatch.StartNew();

        HttpWebRequest http = (HttpWebRequest)WebRequest.Create(Url);
        http.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
        string html = string.Empty;

        using (HttpWebResponse webResponse = (HttpWebResponse)http.GetResponse())
        using (Stream responseStream = webResponse.GetResponseStream())
        using (StreamReader reader = new StreamReader(responseStream))
        {

            html = reader.ReadToEnd();
        }

        Debug.WriteLine(stopwatch.ElapsedMilliseconds);
        return html;
    } 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T23:07:47.320

也许试一试，尽管它可能只会帮助您处理单个请求，并且在执行多线程版本时实际上会使事情变得更糟。

```
ServicePointManager.UseNagleAlgorithm = false; 
```

[这是 MSDN 文档对HttpWebRequest 类](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)的引用

> 另一个可能影响性能的选项是使用 UseNagleAlgorithm 属性。当此属性设置为 true 时，TCP/IP 将尝试对 HTTP 连接使用 TCP Nagle 算法。Nagle 算法在发送 TCP 数据包时聚合数据。在通过网络发送数据之前，它将小消息序列累积成较大的 TCP 数据包。使用 Nagle 算法可以优化网络资源的使用，尽管在某些情况下性能也会降低。通常对于恒定的大容量吞吐量，使用 Nagle 算法实现性能改进。但是对于较小吞吐量的应用程序，可能会看到性能下降。
> 
> 应用程序通常不需要更改设置为 true 的 UseNagleAlgorithm 属性的默认值。但是，如果应用程序正在使用低延迟连接，则将此属性设置为 false 可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:35:39.447

我认为您可能会泄漏资源，因为您没有在每个方法调用中处理所有 IDisposable 对象。

给出这个版本并尝试看看它是否给你一个更一致的执行时间。

```
public string getWebsite( string Url )
  {
     Stopwatch stopwatch = Stopwatch.StartNew();

     HttpWebRequest http = (HttpWebRequest) WebRequest.Create( Url );
     http.Headers.Add( HttpRequestHeader.AcceptEncoding, "gzip,deflate" );

     string html = string.Empty;
     using ( HttpWebResponse webResponse = (HttpWebResponse) http.GetResponse() )
     {
        using ( Stream responseStream = webResponse.GetResponseStream() )
        {
           Stream decompressedStream = null;

           if ( webResponse.ContentEncoding.ToLower().Contains( "gzip" ) )
              decompressedStream = new GZipStream( responseStream, CompressionMode.Decompress );
           else if ( webResponse.ContentEncoding.ToLower().Contains( "deflate" ) )
              decompressedStream = new DeflateStream( responseStream, CompressionMode.Decompress );

           if ( decompressedStream != null )
           {
              using ( StreamReader reader = new StreamReader( decompressedStream, Encoding.Default ) )
              {
                 html = reader.ReadToEnd();
              }

              decompressedStream.Dispose();
           }
        }
     }

     Debug.WriteLine( stopwatch.ElapsedMilliseconds );

     return html;
  } 
```

# java - 在 Spring MVC 中，我有一个 @ModelAttribute 并且它正在引发异常。如果我得到这个异常，我想显示一个页面。如何？

> ID：11362143
> 
> 赞同：2
> 
> 时间：2012-07-06T12:23:50.233
> 
> 标签：java, spring, spring-mvc

是的，基本上是这个问题。在我的一些处理程序中，我有一个@ModelAttribute，在极端情况下@ModelAttribute 可以抛出异常。发生这种情况时，我想显示一个错误页面。我想在 @ModelAttribute 方法中完成这一切，因为我想避免不同请求处理程序中的冗余代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:03:35.680

你试过@ExceptionHandler 吗？

```
@ExceptionHandler(YourException.class)
public ModelAndView handleException(YourException e, HttpServletRequest request) {
    // Handle it
    return yourView;
} 
```

# java - 使用 JLabel 显示所选图像文件的问题

> ID：11362146
> 
> 赞同：0
> 
> 时间：2012-07-06T12:23:56.510
> 
> 标签：java, swing, jlabel, imageicon

我在单击按钮并在“选择文件对话框”中选择图像文件后尝试显示图像时遇到问题。

最初，我设法在 中显示所选图像`JLabel`，但后来我创建了一个单独的`ActionListener`，我认为从那时起它开始出错。无论我选择什么图像，`JLabel`都不会显示它。

我对其进行了调试，并确保文件选择器确实将图像传递给`ImageIcon`，`JLabel`确实从 获取值，但即使在和`ImageIcon`之后也不显示图像。`revalidate()``repaint()`

在这里，我附上了我的代码供您参考！

（我修剪了代码以使外观干净，所以可能有一些括号没用）

```
package com.xxx.LoyalCardManager;

import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.sql.SQLException;
import java.util.ArrayList;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JSeparator;
import javax.swing.JTextField;
import javax.swing.filechooser.FileFilter;

public class LoyalCardManagerMain implements ActionListener{

private JFrame frame;
private DatabaseHandler db = new DatabaseHandler();

private JLabel labelPic;

private JButton buttonPic;

private File picFile = new File("");
private BufferedImage image;

/**
 * Launch the application.
 * @throws SQLException 
 * @throws ClassNotFoundException 
 */
public static void main(String[] args) throws SQLException, ClassNotFoundException {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                LoyalCardManagerMain window = new LoyalCardManagerMain();
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });

}

}

/**
 * Create the application.
 */
public LoyalCardManagerMain() {

    // Database initialisation
    initDatabase();

    // Draw GUI
    frame = new JFrame();
    frame.setBounds(100, 100, 619, 487);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(null);

    buttonPic = new JButton("Click to Choose Pic");
    buttonPic.setBounds(415, 252, 166, 29);
    frame.getContentPane().add(buttonPic);
    buttonPic.setEnabled(false);
    buttonPic.setActionCommand("ChoosePic");
    buttonPic.addActionListener(this);

    labelPic = new JLabel();
    labelPic.setBounds(415, 30, 167, 210);
    frame.getContentPane().add(labelPic);

}

public void actionPerformed(ActionEvent event) {
    String command = event.getActionCommand();

     if (command.equals("ChoosePic")) {
        //TODO Label now cannot display images.
        JFileChooser chooser = new JFileChooser();
        chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
        chooser.setAcceptAllFileFilterUsed(false);
        chooser.setFileFilter(new FileFilter() {
            public boolean accept (File f) {
                String extension = Utils.getExtension(f);
                if(extension != null) {
                    if (extension.equals(Utils.gif) ||
                        extension.equals(Utils.jpeg) ||
                        extension.equals(Utils.jpg) ||
                        extension.equals(Utils.png) ||
                        extension.equals(Utils.tif) ||
                        extension.equals(Utils.tiff)) {
                        return true;
                    }else{
                        return false;
                    }
                }
                return false;
            }

            public String getDescription() {
                return "Image File (*.gif, *.jpeg, *.jpg, *.png, *.tif, *.tiff)";
            }

        });

        int retVal = chooser.showOpenDialog(frame);
        if (retVal == JFileChooser.APPROVE_OPTION) {
            picFile = chooser.getSelectedFile();
            try {
                image = ImageIO.read(picFile);
            } catch (IOException e) {

                e.printStackTrace();
            }

            // Calculate the pic's ratio and do re-scale

            double ratio = (double) labelPic.getWidth() / (double) labelPic.getHeight();
            // Do image scale, scaledW is the new Width, and LabelPic.getHeight is the new Height.
            int scaledW = (int) (image.getHeight() * ratio);
            image = new BufferedImage(scaledW, labelPic.getHeight(), BufferedImage.SCALE_FAST);
            ImageIcon icon = new ImageIcon(image);

            labelPic.setVisible(true);
            labelPic.setIcon(icon);
            labelPic.revalidate();
            labelPic.repaint();

        }

    }
}
} 
```

我还参考了其他类似的问题：

[使用 JFileChooser 将图像加载到 JFrame](https://stackoverflow.com/questions/10737029/image-loading-using-a-jfilechooser-into-a-jframe)

[图像不会在 JLabel 中显示](https://stackoverflow.com/questions/8883937/image-wont-display-in-jlabel)

[更新 JLabel 中包含的图像 - 问题](https://stackoverflow.com/questions/10051638/updating-an-image-contained-in-a-jlabel-problems)

外部站点：[JFIleChooser 将图像打开到 JLabel](http://www.dreamincode.net/forums/topic/253216-jfilechooser-opening-image-to-jlabel/)

以及 Java 教程文档 [如何使用按钮、复选框和单选按钮](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

但我仍然无法弄清楚为什么 JLabel 不显示所选图像。

感谢热心帮忙的小伙伴们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:23:48.587

好的，我终于弄清楚了代码有什么问题：

如果我打算使用`BufferedImage`调整大小（对不起，在我的问题中我误解了使用 的方法`scale`）`resize`，我需要使用`drawImage`方法来“重绘”图像。否则图像将不会显示。

我在这里做了修改：

```
double ratio = (double) labelPic.getWidth() / (double) labelPic.getHeight();
        // Do image scale, scaledW is the new Width, and LabelPic.getHeight is the new Height.
        int scaledW = (int) (image.getHeight() * ratio);
        image = new BufferedImage(scaledW, labelPic.getHeight(), BufferedImage.SCALE_FAST);// Edit here
        ImageIcon icon = new ImageIcon(image);

        labelPic.setVisible(true);
        labelPic.setIcon(icon);
        labelPic.revalidate();
        labelPic.repaint(); 
```

从“在此处编辑”标记，我使用以下代码：

```
BufferedImage imageTemp = new BufferedImage(resizedW, resizedH, BufferedImage.TYPE_INT_RGB);
            imageTemp.getGraphics().drawImage(image,0,0, scaledW, scaledH, null);
            image = imageTemp; 
```

`imageTemp`首先传递值然后传递到`image`和直接传递值之间有区别`image`。如果我`new BufferedImage`直接将 传递给`image`，它将显示纯黑色而不是您选择的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:54:52.180

尝试使用它来显示图像：

```
 JfileChooser getImage = new JFileChooser();
        ..........

        ImageIcon imagePath= new ImageIcon(getImage.getPath());

        JLabel imageLabel= new JLabel() {

            @Override
            public void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.drawImage(imagePath.getImage(), 0, 0, width, height, null);
            }
        };
        imageLabel.setLocation(10, 40);
        imageLabel.setBorder(viewAnimalPanelBorder);
        imageLabel.setSize(200, newHeight);
        panel.add(imageLabel); 
```

如果您需要更多帮助，请告诉我。

此外，尝试在不使用 JFileChooser 的情况下显示图片，可能会硬编码测试路径。

# ruby-on-rails-3 - Rails 迁移中没有自动增量主键 ID

> ID：11362151
> 
> 赞同：2
> 
> 时间：2012-07-06T12:24:09.867
> 
> 标签：ruby-on-rails-3

标记 -> 这是一个菜鸟问题！

在 Rails 迁移文件中是否可以创建列 ID primary_key no auto_increment？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T08:46:46.373

我通过运行以下 change_column 方法成功删除了 auto_increment。

```
class DropAutoIncrement < ActiveRecord::Migration
  def change
    change_column :my_table, :id, :integer
  end
end 
```

我使用了活动记录 4.0.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-29T10:22:08.413

看来，Yuki 的回答太老了？它对我不起作用。但以下工作：

```
class CreateNoAutoincrement < ActiveRecord::Migration[4.2]
  def up
    create_table( :my_table, :id => false ) {|t|
      t.integer :id,    null: false ;
      t.string  :token, null: false ;
    }
    add_index :my_table, :id,    unique: true ;
    add_index :my_table, :token, unique: true ;
  end
  def down
    drop_table :my_table ;
  end
end 
```

在 MariaDB 上，表格如下所示：

```
MariaDB [foo_devel]> describe my_table ;
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| id    | int(11)      | NO   | PRI | NULL    |       |
| token | varchar(255) | NO   | UNI | NULL    |       |
+-------+--------------+------+-----+---------+-------+
2 rows in set (0.001 sec) 
```

很好，我仍然得到一个主键，而不仅仅是两个唯一索引（可能是因为列名是 'id'）

# objective-c - NSURLRequest 出现错误的 URL 错误

> ID：11362153
> 
> 赞同：0
> 
> 时间：2012-07-06T12:24:19.160
> 
> 标签：objective-c, ios, cocoa-touch, url, nsurlrequest

我有一个 NSURLRequest 创建下一个方式：

```
NSString *url=[NSString stringWithFormat:@"http://myserveradress.com/api/users/register?register_password=%@&register_password_confirm=%@&register_email=%@&register_terms=1&register_user=%@&process_registration=1&register_name=%@"
                   ,
                   [password stringByReplacingOccurrencesOfString:@" " withString:@"%"],[confirm stringByReplacingOccurrencesOfString:@" " withString:@"%"],[email stringByReplacingOccurrencesOfString:@" " withString:@"%"],[user stringByReplacingOccurrencesOfString:@" " withString:@"%"],[realName stringByReplacingOccurrencesOfString:@" " withString:@"%"]
                   ];
    NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:url]];
    NSError *error;
    NSData *data=[NSURLConnection sendSynchronousRequest:request returningResponse:nil error:&error];
    NSString *result_string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    return result_string; 
```

结果字符串是`http://myserveradress.ru/api/users/register?register_password=password&register_password_confirm=password&register_email=myname@mail.com&register_terms=1&register_user=myname&process_registration=1&register_name=Artem%Kulikov`并且错误状态

```
Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x71e62b0 {NSUnderlyingError=0x71e6470 "bad URL", NSLocalizedDescription=bad URL} 
```

在浏览器中，链接工作正常。问题仅在应用程序中。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T12:36:54.250

这不是逃避字符串的正确方法，有一种方法，`stringByAddingPercentEscapesUsingEncoding:`. 所以改成：

```
NSString *url = [NSString stringWithFormat:@"http://myserveradress.com/api/users/register?register_password=%@&register_password_confirm=%@&register_email=%@&register_terms=1&register_user=%@&process_registration=1&register_name=%@"
                   , password, confirm, email, user, realName];
NSString *properlyEscapedURL = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:properlyEscapedURL]]; 
```

更不用说空格的正确转义码`%20`不是`%`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:34:24.073

@user1506704，您没有使用 register_name 中的编码方法，register_name 中是否有空格或其他特殊字符？使用`NSString`方法 `stringByAddingPercentEscapesUsingEncoding:.`

您可以尝试转义 URL：

```
- (NSString *)stringByAddingPercentEscapesUsingEncoding:(NSStringEncoding)encoding` 
```

# android - 在 adt 20 中关闭 logcat 中的换行

> ID：11362154
> 
> 赞同：10
> 
> 时间：2012-07-06T12:24:19.890
> 
> 标签：android, logcat

有没有办法在最新的 logcat (ADT 20) 中禁用换行？堆栈跟踪现在阅读起来很痛苦。

Logcat 随着更新变得越来越糟糕 - 现在首先[暂停问题](https://stackoverflow.com/questions/9928453/how-to-disable-logcat-pause-completly)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:02:15.110

如果需要，您仍然可以使用已弃用的旧版 Logcat。您可以使用以下路径在 Eclipse 中启动它，

窗口 --> 显示视图 --> 其他 --> Android --> LogCat（已弃用）

# openerp - 制造订单内的 BOM 结构。（模型内的树视图）openerp

> ID：11362159
> 
> 赞同：1
> 
> 时间：2012-07-06T12:24:41.800
> 
> 标签：openerp

我需要在制造订单中添加一个新页面，显示主要产品的 bom 树视图。如下图所示 ![在此处输入图像描述](../Images/182300bffdfc1a7e489fcfafe25ded5f.png)

有人知道吗？我在 6.0.3 中需要它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:36:52.887

如果您使用的是新的网络客户端，即 6.1+ 这个功能，您要求“在制造订单中添加一个显示 bom 树视图的新页面”不起作用，

纯解决方案是使用 GTK 客户端或在 Web 客户端中实现缺少的功能。

或者您可以做的是您可以提供一些右侧快捷操作窗口，这将打开您所期望的新视图。

如果我没有遗漏任何东西，那么这与您的旧帖子相匹配：[如何在 openerp 6.1 中将 one2many 列表视图分组到另一个模型中？](https://stackoverflow.com/questions/11153743/how-to-group-one2many-list-view-inside-another-model-in-openerp-6-1) ;)

谢谢你

# php - 使用js删除数据库条目

> ID：11362163
> 
> 赞同：-2
> 
> 时间：2012-07-06T12:24:49.250
> 
> 标签：php

我有三个文件...第一个 index.tpl.php 代码是

```
<td>
<input type="button" name="checkbox" value="delete" onclick="selectAccess('<?php echo __('are you sure you want to delete data')?>','<?php echo $sGroups['id_user']; ?>')">
</td> 
```

第二个是 common.js

```
function selectAccess(message,AccessId){

   var answer = confirm(message)
   alert(AccessId);
   if (answer)
   {
     $.ajax({
      url: SITE_URL + '/users/delete',
      type: 'POST',
      data: { 
                'ID':AccessId

            },

      success: function(data){
          alert(data);
      }
     });
   }
} 
```

在这里它不起作用......请告诉我错误在哪里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:28:31.203

*   你看到确认框了吗？（然后点击事件被正确处理和处理）
*   SITE_URL 是否在某处定义，您是否看到 XHR 请求触发？（那么ajax调用就好了）

# javascript - 表单提交仅运行 Javascript 函数一秒钟

> ID：11362166
> 
> 赞同：0
> 
> 时间：2012-07-06T12:24:56.853
> 
> 标签：javascript, html, forms, function

我这里有两个表格，第一个是一个选择下拉选择，它在发布时会生成另一个表格，根据所选数字创建一个金额输入框。然后，第二种形式将输入框中的数据放入 2 个数组中。所有这一切都完美无缺，但我正在尝试向第二个表单上的提交按钮添加额外的功能。我创建了一个函数“showcontet()”来显示和隐藏 id 为“table”的 div 中的内容。当在表单外的按钮上使用时，这非常有效。在表单内的提交按钮上使用时，您可以看到内容大约 1 秒钟，然后再次消失。

```
 <head>
      <script type="text/javascript">
           showcontent = function(){
              var content = document.getElementById('tabl');
              content.style.display = 'inline';
           }

      </script>
        <?php 
    $userkey = array();
    $userval = array();
    $usernum = $_POST['usernum'];
    $total = 0;
    ?>

        <form action='MYPIE.PHP' method='POST'>
                HOW MANY SECTIONS?
                    <select name="usernum" value="<?php echo $usernum;?>">
                          <option>1</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5</option>
                          <option>6</option>
                          <option>7</option>
                          <option>8</option>
                          <option>9</option>
                    </select>
                <input type="submit" name="submitnum" value="submit selection" />
        </form>

    <form action='MYPIE.PHP' method='POST'>     
        <?php 
            for ($i=1; $i<$usernum+1; $i++){
                echo '<input type="hidden" value="' .$usernum.'" name="usernum" />';
                echo "<br>insert key:   <input name='key".$i."' value='".$userkey[$i]."'>   insert value:   <input name='val".$i."' >";

            $userkey[$i] = $_POST["key".$i];
            $userval[$i] = $_POST["val".$i];
            }

        ?>
        </br>
        <input type="submit" value="submit" name="submit keys" onclick="showcontent()" />
    </form>

    </table>

    <div id="tabl" style="display:none;">
    content
    </div> 
```

抱歉缩进不好，我对此很陌生，感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:26:34.593

您需要`return false`从事件处理程序中阻止浏览器提交表单并加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:27:57.360

使您的第二个按钮不是“提交”按钮，而是常规“按钮”，否则它将触发表单的提交...

或者

在表单 'onsubmit' 事件上设置 'showcontent()' 函数并让该函数返回 false：

```
onsubmit="return showcontent()"

function showcontent(){
    var content = document.getElementById('tabl');
    content.style.display = 'inline';

    $.ajax({
        type: "POST",
        url: "MYPIE.PHP",
        data: { usernum: $("select[name='usernum'] option:selected").val() }
        }).done(function() {
            alert('data posted');
    });

    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:31:39.737

您需要添加 e.preventDefault(); 到事件处理程序以防止浏览器提交表单和加载页面。

不要使用 return false ，因为这是您可能不想要的其他副作用。见[http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)

# java - 使用 JWI 和 Wordnet 获取词干

> ID：11362168
> 
> 赞同：4
> 
> 时间：2012-07-06T12:25:18.337
> 
> 标签：java, wordnet, jwi

如何正确使用 MIT 的 JWI（WordNet 的 Java API）中实现的[词干分析器方法](http://projects.csail.mit.edu/jwi/api/edu/mit/jwi/morph/WordnetStemmer.html)来获取词干？我不确定如何初始化词干分析器并使用 findStems 方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-15T16:25:32.433

您不需要额外的库，但确实需要字典。您可以从普林斯顿下载一个： [https ://wordnet.princeton.edu/wordnet/download/current-version/](https://wordnet.princeton.edu/wordnet/download/current-version/)

我建议只从“WordNet 3.1 DATABASE FILES ONLY”部分下载字典 提取档案。假设 PATH/dict 是输出的位置，您可以使用以下代码：

```
Dictionary dict = new Dictionary(new File("PATH/dict"));
dict.open();
WordnetStemmer stemmer = new WordnetStemmer(dict);

List<String> test = stemmer.findStems("feet", POS.NOUN);
for (int i = 0; i < test.size(); i++) {
    System.out.println(test.get(i));
} 
```

这个例子的输出是“foot”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:32:30.280

这是对 sakthi 答案的评论：在调用该`findStems`方法（JWI v2.2.3）时，您实际上必须准确说明您要查找的 POS（名词、形容词、动词等）： [http://projects.csail .mit.edu/jwi/api/edu/mit/jwi/morph/IStemmer.html](http://projects.csail.mit.edu/jwi/api/edu/mit/jwi/morph/IStemmer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:38:23.570

使用的 jar 文件是 edu.mit.jwi_2.1.4.jar 和 edu.sussex.nlp.jws.beta.11.jar

```
JWS ws = new JWS("C:/Program Files/WordNet","2.1");  
WordnetStemmer stem =  new WordnetStemmer(ws.getDictionary());
System.out.println("test" + stem.findStems("reading") ); 
```

# android - 为什么在 CTS 案例中关闭 udp6 端口时断言：android.net.cts.ListeningPortsTest::testNoListeningUdp6Ports

> ID：11362174
> 
> 赞同：0
> 
> 时间：2012-07-06T12:25:35.323
> 
> 标签：android, cts

当我运行 CTS case:`android.net.cts.ListeningPortsTest:: testNoListeningUdp6Ports`时，它失败了，痕迹如下：

> android.net.cts.ListeningPortsTest$ListeningPortsAssertionError: 在 android.net.cts.ListeningPortsTest.assertNoListeningPorts(ListeningPortsTest.java:130) 的 /proc/net/udp6 中找到监听端口

本例从文件：/proc/net/udp6 中获取 udp6 端口信息，但是如果 udp6 端口的状态为“07”，表示已关闭（如 include/net/tcp_states.h 所定义），为什么`isPortListening()`返回“true” “ 全部都一样。然后case认为udp6端口正在监听，并抛出异常。

所以，我认为在这种情况下可能有问题，有人可以解释一下吗？谢谢。

**附录：**

```
private static boolean isPortListening(String state, boolean isTcp) {
    // 0A = TCP_LISTEN from include/net/tcp_states.h
    String listeningState = isTcp ? "0A" : "07";
    return listeningState.equals(state);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:04:51.497

`isTcp`参数在方法中设置为，`false`但 `testNoListeningUdp6Ports`在`testNoListeningTcp6Ports`其中`true`

# c# - 处理控制灵活性

> ID：11362176
> 
> 赞同：0
> 
> 时间：2012-07-06T12:25:41.157
> 
> 标签：c#, winforms, visual-web-gui

我有更多关于“良好编程实践”的问题。我刚刚开始了一个非常大的项目。我正在使用 WebGui（长话短说……它是 Web 中的 WinForms）——但这并不重要。

我正在创建数以百万计的表单，其中包含数以百万计的控件，如、`TextBox`等。这可能会发生，我将不得不改变一些行为或外观。在每个控件中都无法更改它。我希望我的项目灵活，所以我有一个想法..`NumericUpDown``DateTimePicker``DateTimePicker`

我为每种类型（字符串、数字、日期、字节）做单独的自定义控件。例如，我将在其中放置 TextBox。在每个表单上，我不会放置 TextBox，而是 MyTextBox。实际上，那个 MyTextBox 将只是 TextBox，但是当我在那里更改某些内容时，每个控件都会更改。

它是一种好的、流行的编程实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:04:00.570

在 WPF 的情况下，这可以很容易地使用样式和模板来实现。在 Winforms 中这是不可能的，因此我想说您从控件派生并在 UI 上使用您自己的自定义控件的方法是一种很好的实用方法，有助于集中管理更改。

如果控件是在程序中手动创建的，或者您可以使用工厂类并让工厂创建控制器对象，而不仅仅是更新。但是，当通过拖放控件创建 UI 时，这可能是不可能的，因为开发人员无法控制控件的创建。

无论您选择哪种方法，基本目标都应该是集中控件的创建逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:52:05.877

是的，如果标准控件不能满足您的要求，这对于 GUI 开发来说是完全正常的编程实践。

大多数开发人员获得了 3rd 方控制套件以获得额外的灵活性。购买的好处远远超过了自己建立核心控制的好处。

我曾在一个有 companyTextBox、companyDatePicker 的地方工作过，它工作正常。一些控件在 .Net 版本上进行了改进，因此这些基类控件需要一些手术。任何折旧的控件都保留为依赖于框架版本。

[对于特殊的事情，我对CodeProject](http://www.codeproject.com/Articles/43181/A-Serious-Outlook-Style-Navigation-Pane-Control) 、 CodePlex 、 Code.Google.com 等良好的自定义控件进行了大量研究，并将它们实施到我正在处理的项目中。否则，请使用我正在工作的公司的库存标准控件或第 3 方控件套件。

我的建议是获取第 3 方控件套件，并基于第 3 方控件制作大量可重复使用的用户控件。这样，您可以通过将用户控件拖放到表单上来构建 200 个表单中的大部分。使用 Create、Retrieve、Update 和 Delete 方法使每个用户控件实现一个接口，以使表单与您的用户控件一起工作。

# c++ - 如何 OR Xor 和内存块

> ID：11362181
> 
> 赞同：-1
> 
> 时间：2012-07-06T12:26:03.103
> 
> 标签：c++, c, bit-manipulation, xor

我们有两个位图，例如 bitmap1，bitmap2。都用 malloc（相同的参数）初始化。Bitmap1 被赋值为 0010 0110，bitmap2 被赋值为 1000 0001。我们如何在 bitmap 之间进行 OR 运算以得到 1010 0111。另一方面，我们想在 bit2 的相应条目中设置 bitmap1 的位为 1。

我们不想使用一些方法，例如：

```
for(i=0;i<n;i++) bitmap1[i] ||= bitmap2[i]; 
```

因为这些方法比某些函数（例如 memset、memcpy）慢。任何指导都会很有用。编程语言是 C/C++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:40:15.477

您可以直接使用按位`or`和`xor`命令。

`or_result = bitmap1 | bitmap2`

`xor_result = bitmap1 ^ bitmap2`

如果由于您如何定义 bitmap1 和 bitmap2 而这不起作用（尚不清楚，它是 a`struct`或 an`int`还是 a`char`或不太有用的东西，如数组或奇怪的东西，如已`operator[]`定义的类？我们需要更多信息）那么您可能必须更改存储数据的方式。

# facebook-graph-api - Graph API：在我的墙上分享朋友的帖子

> ID：11362183
> 
> 赞同：1
> 
> 时间：2012-07-06T12:26:18.553
> 
> 标签：facebook-graph-api, permissions, facebook-wall

使用 Graph API，我如何在自己的墙上分享朋友的帖子？我不想复制原始帖子的文字并创建新帖子，因为我需要我的朋友看到​​我分享了他的帖子。

我墙上的帖子应该是这样的[![](../Images/ade5cf607dbde63c34517c50060617a5.png)](https://i.stack.imgur.com/GkoLW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:23:50.720

无法从 API 共享帖子 - 您只能使用相同的信息重新发布它，但它实际上是一个新帖子并且不会说明它是从谁共享的（除非您在标题中手动添加它，例如某人共享...通过某人）。

# visual-studio - 如何在 Visual Studio 2012 中每次构建后执行命令？

> ID：11362187
> 
> 赞同：1
> 
> 时间：2012-07-06T12:26:30.613
> 
> 标签：visual-studio, visual-studio-2012

无论我的解决方案中的哪个项目发生了变化，我都想在每次构建后执行一个 postbuild 命令。

为了在 Visual Studio 2010 中实现这一点，我创建了一个空项目依赖于其他所有项目，所以它总是被构建，执行它的 postbuild 命令。但是，Visual Studio 2012 (RC) 似乎认识到依赖关系不是真实的，并且不会自动构建这个空项目。

我看不到任何在解决方案设置中指定解决方案构建后脚本的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:41:27.303

我通过使我的构建后脚本也删除这个“空”项目的输出（bin**）来解决这个问题，每次都强制重建这个项目。到目前为止，它似乎工作得令人满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-12T06:53:15.507

这有效（有关详细信息，请参阅原始[帖子](https://ironmansoftware.com/running-pre-and-post-build-events-in-powershell-projects-in-visual-studio/)）：

[![在此处输入图像描述](../Images/514d900df6a6ad39d13478b3261759fa.png)](https://i.stack.imgur.com/Gw3wD.png)

[![在此处输入图像描述](../Images/9c662f045505e9311e76594a14f0745b.png)](https://i.stack.imgur.com/LFqVs.png)

您可能需要更改安全设置（风险自负），例如：[https ://stackoverflow.com/a/60284384/2705777](https://stackoverflow.com/a/60284384/2705777)

# android - 停止广播接收器中的服务并更新 SQLite DB 中的条目

> ID：11362192
> 
> 赞同：0
> 
> 时间：2012-07-06T12:26:47.610
> 
> 标签：android, broadcastreceiver, android-manifest, android-service

我想在我的应用程序中检查我们是否已连接到 Internet。我正在使用广播接收器。如果连接丢失，我想更改我的数据库 SQLite 中的条目并停止每分钟在另一个线程中执行 htpp 请求的服务。Log.i 不显示任何内容，当我尝试更新我的数据库或停止服务时，我的应用程序崩溃并且我在 logcat 中没有错误消息，也没有异常。

```
public class InternetConnection extends BroadcastReceiver {

private AccountBDD accountBdd;

@Override
public void onReceive(Context context, Intent intent) {

    ConnectivityManager connectivityManager = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
    if (networkInfo != null) {
        State networkState = networkInfo.getState();
        if (networkState.compareTo(State.CONNECTED) == 0)
            Log.i("INTERNET CONNEC", "connection retrieved");
        Toast.makeText(context, "RETRIEVED CONNECTION ", Toast.LENGTH_LONG)
                .show();
    }

    Toast.makeText(context, "CONNECTION LOST", Toast.LENGTH_LONG).show();
    Log.i("INTERNET CONNEC", "loss of connection");

    // context.stopService(new Intent(context, PeriodicSync.class));
    // accountBdd.updateSyncUtility(syncUtility);
    // Log.i(" Value ", " offlineWork = "
    // + accountBdd.getSyncUtility().getOfflineWork());
}
} 
```

清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android"
android:versionCode="1"
android:versionName="1.0">

<uses-sdk android:minSdkVersion="13" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<application
    android:label="@string/app_banner" 
    android:name="SQLiteApplication">

    <service android:name="PeriodicSync" /> 

    <receiver android:enabled="true" android:name="com.android.InternetConnection">
     <intent-filter>
         <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
     </intent-filter>
 </receiver>

</application> 
```

有人有想法吗？谢谢

# c# - 如何加载 System.Runtime.Remoting dll？

> ID：11362201
> 
> 赞同：0
> 
> 时间：2012-07-06T12:27:08.007
> 
> 标签：c#, load, startup, .net-assembly, ui-automation

如何加载 C:\WINDOWS\assembly\GAC_MSIL\System.Runtime.Remoting\2.0.0.0__b77a5c561934e089\System.Runtime.Remoting.dll？当然，我想使用最终会加载的适当（取决于要求）版本。

在此处加载意味着我在 Visual Studio 的调试器窗口中看到了程序集已加载的消息 - 就像我加载任何依赖程序集时一样，例如我自己的程序集。（您最常在启动时看到它们。）

如果可能的话，我希望它在启动时运行。

尝试了几件事但没有成功，例如：

```
string dummy = System.Runtime.Remoting.RemotingConfiguration.ProcessId; // force load of remoting dll
GC.KeepAlive(typeof(System.Runtime.Remoting.RemotingServices));
GC.KeepAlive(Assembly.Load("System.Runtime.Remoting.dll, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")); 
```

# java - 具有透明度的java全屏窗口

> ID：11362210
> 
> 赞同：9
> 
> 时间：2012-07-06T12:27:46.313
> 
> 标签：java, swing, jframe, transparency, fullscreen

我正在尝试使用 Java 创建一个覆盖整个屏幕的全屏窗口。此窗口还必须具有一定的透明度（大约 30%-50% 透明）。当说整个屏幕时，我的意思是它涵盖了所有内容（包括 OSX/Linux/Windows 中的停靠栏/任务栏/菜单栏），当我说透明时，我的意思是实时透明，而不仅仅是被黑的屏幕截图。这是我知道/尝试过的：

*   使用 Java Fullscreen API：虽然它创建了一个真正的全屏，但你不能让它有一些透明度（只有不透明的颜色）。一种技巧是截取整个桌面并将其设置为窗口的背景，但这意味着它不是实时透明的。
*   设置窗口大小以匹配屏幕尺寸：当它填满整个屏幕时，在某些操作系统（例如 Mac OS X）中，窗口将呈现在停靠栏/菜单栏的后面，而不是在其上方。但是，透明度在这里确实有效。
*   使用 setWindowOpacity API：它适用于第二种情况，但不适用于第一种情况（全屏 API）
*   使用带有 alpha 的 setBackground：它像 setWindowOpacity 一样工作，但仅在某些操作系统中。但也不适用于全屏 API。
*   使用 JFrame/JWindow/JDialog/Frame/Window：我尝试了所有的窗口模型，但没有任何运气

所以我问这是否可以通过另一个我不知道的黑客来实现，那么我很乐意听到。

目标是在桌面上覆盖一个半透明的全屏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T12:57:13.320

*   只有可见的 TaskBar ei 才有可能

.

```
GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds(); 
```

*   否则你有异常

.

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: 
The effects for full-screen windows are not supported. 
```

或者通过`brutte_force`两次`DirectX`冻结我的电脑，只有 power_off 来保存电脑的 GPU

```
import com.sun.awt.AWTUtilities;
import java.awt.Dimension;
import java.awt.GraphicsEnvironment;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class JFrameOpacityExample {

    private JFrame myFrame = new JFrame("Test Frame");
    private boolean opacity = true;
    private boolean resize = true;
    private JButton button = new JButton("Opacity");
    private JButton button1 = new JButton("Resize");

    public JFrameOpacityExample() {
        button.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent evt) {
                Object src = evt.getSource();
                if (opacity) {
                    AWTUtilities.setWindowOpacity(myFrame, 0.50f);
                    opacity = false;
                } else {
                    AWTUtilities.setWindowOpacity(myFrame, 1.0f);
                    opacity = true;
                }
            }
        });
        button1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent evt) {
                Object src = evt.getSource();
                if (resize) {
                    Rectangle dim = GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds();
                    int h = dim.height;
                    int w = dim.width;
                    myFrame.setBounds(00, 00, w, h);
                    resize = false;
                } else {
                    myFrame.setBounds(100, 100, 400, 400);
                    resize = true;
                }
            }
        });
        JPanel panel = new JPanel();
        panel.add(button);
        panel.add(button1);
        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myFrame.add(panel);
        myFrame.setSize(400, 400);
        myFrame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                JFrameOpacityExample jFrameOpacityExample = new JFrameOpacityExample();
            }
        });
    }
} 
```

# c# - C# 字符串从结构中消失

> ID：11362211
> 
> 赞同：1
> 
> 时间：2012-07-06T12:27:50.970
> 
> 标签：c#, .net, winforms, string, dictionary

好的.. 我有一个非常尴尬的问题，我认为这与 C# 如何处理值类型与引用类型有关，但我只是不确定究竟是什么错误。

```
public partial class LogicSimulationViewerForm : Form
    {

    private Dictionary<string, PointStruct> pointValues;

private void SearchPoint(string code)
    {
        ReadDefaultPointValuesResponse result = ddcdao.ReadDefaultPoint(points);
        pointValues = new Dictionary<string, PointStruct>();

        for (int j = 0; j < result.pointidentifier.Length; j++)
        {
            if (!pointValues.ContainsKey(result.pointidentifier[j]))
            {
                PointStruct ps = new PointStruct();
                ps.name = "Random String"; 
                ps.pointidentifier = result.pointidentifier[j];
                ps.outofservice = result.outofservice[j];

                pointValues.Add(result.pointidentifier[j], ps);
                ... 
```

pointValues 存储为类中的私有字段。如果我尝试执行以下操作，现在在同一个班级但在不同的功能中：

```
PointStruct ps = pointValues[s];
MessageBox.Show(ps.name);
MessageBox.Show(ps.pointidentifier);
MessageBox.Show(ps.outofservice); 
```

ps.pointidentifier 和 ps.outofservice 显示正确，但无论我做什么，ps.name 始终返回为 null。我该如何解决这个问题？

编辑：根据要求，我正在添加更多代码以进一步说明问题：

```
public struct PointStruct
{
    public string pointidentifier;
    public string affect;
    public string outofservice;
    public string priorityarray;
    public string pointtype;
    public string alarmstate;
    public string correctvalue;
    public string presentvalue;
    public string name;
    public string test;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:43:22.530

只要没有伏都教（显式字段布局、属性间接等），就绝对没有理由让字段自行擦除，无论它是 a`class`还是 a `struct`。

如果它是`class`，我们也许可以将其归结为其他地方的粗心更新，即

```
var foo = pointValues[key];
// snip 2000 lines
foo.name = newValue; // which happens to be null 
```

这当然会更新与字典引用的相同的基本对象。但这**不适**用于 a `struct`，因为副本是分开的（除非直接在数组中更新）。

鉴于您声明`pointValues.Add(...)`仅在一个地方使用，我能看到导致这种情况的唯一方法是您正在通过索引器在其他地方覆盖它：

```
pointValues[key] = newValueWithANullName; 
```

尽管如此；除非您有一些非常具体的原因，否则`PointStruct`成为`struct`. 在我看来，它应该是一个`class`. 对于一个`struct`. 还; 在大多数情况下，`struct`s 应该是不可变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:29:20.570

对于存储`Dictionary`在. 你的名字实际上是一个字面量，还是你用那个字面量来表示其他功能？您是否确认有问题的功能确实有效？`string``Dictionary``"Random String"`

与这里的一些人不同，我非常喜欢可变结构，尽管 .net 对它们的支持存在限制，因为它们允许结构的所有者控制谁可以改变它。相比之下，如果对可变类对象的引用曾经暴露给外部代码，则不知道何时或由谁更改它。这是一个结构的事实`PointStruct`意味着您从中检索的结构的字段内容有 99.44% 的机会与该`Dictionary`结构在存储时所具有的字段内容相同。添加检查以确保该`Name`字段在存储到`Dictionary`你几乎肯定会发现你的问题。比使用可变类更好的情况，您必须检查外部代码以确保没有任何东西改变它。

**附录**

可变结构有一件坏事，那就是如果你有任何结构成员，除了构造函数或属性设置器，它 mutate `this`，尝试在只读上下文中使用这样的成员将生成虚假代码，但不会生成任何编译器诊断。正确支持值类型语义的语言和框架要求对发生变异的成员`this`进行标记，并禁止在只读上下文中使用此类成员，但不幸的是 .net 没有这样的标记。它只是猜测构造函数和属性设置器会改变底层结构，而 getter 和其他方法不会。如果 `Name 字段是用 struct 方法填充的，例如

```
无效计算名称（无效）
{
  名称 = someRandomString();
}

```

我强烈建议您用静态方法替换它：

```
无效计算名称（参考结构）
{
  theStruct.Name = someRandomString();
}

```

如果在 的只读实例上调用前一个函数`PointStruct`，则编译器将（如前所述）毫无怨言地编译，但生成的代码将不起作用。但是，尝试将只读实例传递`PointStruct`给后者会导致编译器错误。

# android - Android如何保存cookies？

> ID：11362212
> 
> 赞同：0
> 
> 时间：2012-07-06T12:27:53.570
> 
> 标签：android, cookies

我正在尝试使用登录名和密码登录到远程服务器，并且已经完成。但是，当我使用密码删除请求并登录并重新启动我的应用程序时，我无法登录到同一台服务器。有人告诉我可以这样做，因为 cookie 必须自动存储。我做错了什么？

例如，我们有 DefauktHttpClient。如何在那里存储cookie？存储它们的周期是什么？如果我理解正确，cookie 可以帮助用户在服务器上保持登录状态。（我们正在谈论从移动设备登录）。我的目标不是发送用户的登录名/密码来进行每项操作。如何正确执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:14:06.537

Cookie 是 HTTP 标头中的值，格式为 key:value。而关于登录用户的信息通常以一些生成的登录密钥的形式存储在这里。例如 cookie 将是 userID:1234

您也可以编写自己的简单 cookie 管理器。将登录请求使用`HttpURLConnection`方法（或类似方法）发送到`getHeaderFields().get("set-cookie")`. 在下次请求使用之前保存所有 cookie 或您需要的那些`setRequestProperty("Cookie", savedCookies)`。为了保存，您可以使用 SharedPreferences。

# java - 如何在服务器 java.nio 中读取 Charset UTF-8 编码缓冲区

> ID：11362223
> 
> 赞同：1
> 
> 时间：2012-07-06T12:28:32.860
> 
> 标签：java, character-encoding, nio, decoding, utf8-decode

在服务器中，我的消息被编码

```
 `Charset charset = Charset.forName("UTF-8");
          CharsetDecoder decoder = charset.newDecoder();
          CharsetEncoder encoder = charset.newEncoder();
          readBuffer=encoder.encode(CharBuffer.wrap(SAY_HELLO));
          readBuffer.flip();
          channel.write(readBuffer);` 
```

并写入频道，但在服务器上我无法读取我试图读取的数据

```
 `int count = channel.read(buffer);
         CharBuffer cbuf = decoder.decode(buffer);
         String s1 = cbuf.toString();` 
```

有人知道如何在服务器中读取此编码数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:38:47.500

`readBuffer=encoder.encode(CharBuffer.wrap(SAY_HELLO));` 当我更改为时，我可以在这条线上发送数据`readBuffer.PUT(encoder.encode(CharBuffer.wrap(SAY_HELLO)));`

# c - 在函数“APR_DECLARE”中：错误：“apr_strerror”之前的预期声明说明符

> ID：11362226
> 
> 赞同：0
> 
> 时间：2012-07-06T12:28:43.833
> 
> 标签：c, apr

我在 C 程序中使用 apr，我包含 appr_error.h 头文件，但在构建过程中出现错误：

> 在函数“APR_DECLARE”中：错误：“apr_strerror”之前的预期声明说明符</p>

这是头文件中的违规行：

```
 /**
  * Return a human readable string describing the specified error.
  * @param statcode The error code the get a string for.
  * @param buf A buffer to hold the error string.
  * @param bufsize Size of the buffer to hold the string.
  */
 APR_DECLARE(char *) apr_strerror(apr_status_t statcode, char *buf, 
                                  apr_size_t bufsize); 
```

此头文件包含一个头文件，该头文件具有 APR_DECLARE 的#define 如下：

```
#if !defined(WIN32)
368 /**
369  * The public APR functions are declared with APR_DECLARE(), so they may
370  * use the most appropriate calling convention.  Public APR functions with 
371  * variable arguments must use APR_DECLARE_NONSTD().
372  *
373  * @deffunc APR_DECLARE(rettype) apr_func(args);
374  */
375 #define APR_DECLARE(type)            type 
```

我对为什么收到此错误消息感到困惑-有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:42:07.627

您的编译器标志可能已关闭，尤其是在哪里搜索包含文件。

apr 附带`apr-config`工具（或可能是 apr-1-config），您应该运行该工具并将其用于编译器和链接器标志

例如

```
# apr-config --cflags --includes
  -pthread -I/usr/include/apr-0

```

`-pthread -I/usr/include/apr-0`告诉我在编译使用 APR 的 C 代码时我必须通过。

[这里](https://people.freedesktop.org/~dbn/pkg-config-guide.html)有关于 pkg-config 的更多信息。

# android - pl.polidea.coverflow 刷新特定项目

> ID：11362227
> 
> 赞同：1
> 
> 时间：2012-07-06T12:28:44.693
> 
> 标签：android, gallery, coverflow

我正在使用 pl.polidea.coverflow ( [http://code.google.com/p/android-coverflow/](http://code.google.com/p/android-coverflow/)，它扩展了 android.widget.Gallery ) 来显示一些从互联网下载的图像。

由于下载和缓存封面流中的所有图像有点长，我使用占位符图像创建封面流，并且当我异步下载图像时，我调用适配器将下载的位图放入 bitmapMap

```
public void replaceBitmap(TMP_CoverflowItem item)
{
    Bitmap bitmap = item.bmpData;
    bitmapMap.put(item.position, new WeakReference<Bitmap>(bitmap));  

} 
```

它有效..但仅适用于从未显示的图像。我认为其他缓存，我正在寻找一种方法来刷新封面流中的特定项目

# java - Android：无法显示当前位置

> ID：11362231
> 
> 赞同：0
> 
> 时间：2012-07-06T12:29:09.137
> 
> 标签：java, android, map

我的 Android 应用程序中有以下 onCreate() ：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.customer_map);

        context=getApplicationContext();

        mapView = (MapView) findViewById(R.id.map);
        mapView.setBuiltInZoomControls(true);
        mapView.setEnabled(true);
        mapOverlays = mapView.getOverlays();

        //set my location marker
        myLocationOverlay = new MyLocationOverlay(context, mapView);
        myLocationOverlay.disableCompass();
        myLocationOverlay.enableMyLocation();
        mapOverlays.add(myLocationOverlay);

        myLocationOverlay.runOnFirstFix(new Runnable() {
            public void run() {
                mapView.getController().animateTo(myLocationOverlay.getMyLocation());
            }
        });

        //and zoom to current location
        MapController mc=mapView.getController();
        GeoPoint centre=new GeoPoint((int)(getBestLocation().getLat()*1e6),(int)(getBestLocation().getLng()*1e6));
        mc.setCenter(centre);
        mc.animateTo(centre);
        mc.setZoom(12);
    } 
```

如您所见，我正在尝试显示当前位置。但它根本行不通！我想我在做一些愚蠢的事情，但在过去的一个小时里我无法弄清楚。

任何见解都非常感谢。提前谢谢了，

ps这里是getBestLocation：

```
private Coords getBestLocation() {
        Coords returnCoords=new Coords();

        Criteria criteria=new Criteria();
        //criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAccuracy(Criteria.POWER_LOW);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);

        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        String provider=lm.getBestProvider(criteria, true);
        if(provider!=null){
            lm.requestLocationUpdates(provider, 2000, 1, this);
            List<String> providers = lm.getProviders(false);
            //Loop over the array backwards, and if you get an accurate location, then break out the loop
            Location l = null;
            for (int i=providers.size()-1; i>=0; i--) {
                l = lm.getLastKnownLocation(providers.get(i));
                if (l != null ){
                    returnCoords.setLat(l.getLatitude());
                    returnCoords.setLng(l.getLongitude());
                    break;
                    //Log.i("EOH",String.valueOf(l.getLatitude()));
                }
            }
        }else{
            Toast.makeText(context, "Location not available", 3000).show();
        }
        return returnCoords;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:07:38.713

好的，它现在正在工作。愚蠢的是，我正在这样做：

```
@Override
    protected void onPause() {
        super.onPause();
        if(myLocationOverlay!=null){
            myLocationOverlay.disableMyLocation();
            myLocationOverlay.disableCompass();
        }
    }
    @Override
    protected void onResume() {
        super.onResume();
        if(myLocationOverlay!=null){
            **myLocationOverlay.disableLocation();**
            myLocationOverlay.disableCompass();
        }
    } 
```

我是个笨蛋！

# python-3.x - Python 变量在不应该发生变化时发生变化

> ID：11362232
> 
> 赞同：1
> 
> 时间：2012-07-06T12:29:15.270
> 
> 标签：python-3.x

我正在处理的代码正在更改我的临时变量，我不知道如何停止它。本质上，这就是问题所在：

```
def example(array):
    temp = array
    for i in range whatever:
        #change array 
```

我需要更改数组，但保持温度不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T12:31:06.677

线

```
temp = array 
```

不复制的内容`array`——它只是将另一个名称绑定到同一个对象。如何实际复制对象取决于对象的类型。对于 NumPy 数组，您可以执行

```
temp = array.copy() 
```

对于 Python 列表，您可以使用从 Python 3.3 开始的上述行；在早期版本中，您可以使用

```
temp = array[:] 
```

也有通用的复制功能`copy()`和`deepcopy()`模块`copy`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:31:21.233

`temp = array`仅表示这`temp`是`array`变量内容的另一个名称。

一般来说，如果你想要一个副本，你可以使用该`copy`模块并执行以下操作：

```
import copy

temp = copy.copy(arr)  # or copy.deepcopy(arr), depending on the situation 
```

# android - SyncAdapter & SyncResult

> ID：11362233
> 
> 赞同：9
> 
> 时间：2012-07-06T12:29:16.917
> 
> 标签：android, synchronization

我想知道我们在操作过程中`SyncManager`使用对象时的默认行为是什么`SyncResult``onPerformSync()`

例如，当由于 导致同步错误时`IOException`，我们设置

```
syncResult.stats.numIoExceptions++ 
```

然后`SyncManager`必须管理重新发送同步，直到系统指定的延迟。

`IOException`但是，如果每次同步都准确，那么同步会被重新调用多少次？每次同步之间的默认延迟设置是多少？是否可以定义自己的行为？我在哪里可以找到这方面的文档？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-27T23:18:33.217

该`SyncResult`对象有一个`delayUntil`字段，您可以从同步适配器设置该字段，该字段将延迟每个后续同步指定的秒数。也许这是您正在寻找的领域。

否则，同步将被重新安排，如果

`SyncResult.madeSomeProgress()`返回 true - 即同步成功完成了一些工作（对应于`stats.numDeletes`, `stats.numInserts > 0`, `stats.numUpdates > 0`）

`SyncResult.hasSoftError()`返回真 - 即它由于一个`IOException`或因为`SyncResult.syncAlreadyInProgress`是真而失败。

因此，要回答您的问题，如果`IOException`s 在每次同步时都发生，`SyncManager`则将无限重试 - 具有指数退避。

需要注意的是，同步适配器可以设置`SyncResult.tooManyRetries = true`这将指示`SyncManager`同步不会重新安排。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T21:05:57.777

初始重试时间：

```
/**
 * When retrying a sync for the first time use this delay. After that
 * the retry time will double until it reached MAX_SYNC_RETRY_TIME.
 * In milliseconds.
 */
private static final long INITIAL_SYNC_RETRY_TIME_IN_MS = 30 * 1000; // 30 seconds 
```

`SyncResult#tooManyRetries`您可以通过设置来告诉框架停止重试同步`true`。

来源：[SyncManager.java](https://android.googlesource.com/platform/frameworks/base/+/master/services/core/java/com/android/server/content/SyncManager.java)

# c# - 如何阻止 MDI 子窗体被拖到父窗体的边缘之外？

> ID：11362237
> 
> 赞同：1
> 
> 时间：2012-07-06T12:29:31.780
> 
> 标签：c#

![在此处输入图像描述](../Images/1332da42781126c50d43671302eae709.png)

“人”是 MDI 父窗体 “新建”是 MDI 子窗体

如何阻止“新”被拖到“人”边缘之外？

我发现该代码运行良好

```
 protected override void OnMove(EventArgs e)
    {
        //
        // Get the MDI Client window reference
        //
        MdiClient mdiClient = null;
        foreach (Control ctl in MdiParent.Controls)
        {
            mdiClient = ctl as MdiClient;
            if (mdiClient != null)
                break;
        }
        //
        // Don't allow moving form outside of MDI client bounds
        //
        if (Left < mdiClient.ClientRectangle.Left)
            Left = mdiClient.ClientRectangle.Left;
        if (Top < mdiClient.ClientRectangle.Top)
            Top = mdiClient.ClientRectangle.Top;
        if (Top + Height > mdiClient.ClientRectangle.Height)
            Top = mdiClient.ClientRectangle.Height - Height;
        if (Left + Width > mdiClient.ClientRectangle.Width)
            Left = mdiClient.ClientRectangle.Width - Width;
        base.OnMove(e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:36:51.840

将子窗体 StartPosition 设置为 CenterParent

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:03:15.900

隐藏 mdi 容器的滚动条，示例代码：

```
internal sealed class NonScrollableWindow : NativeWindow
{
    private readonly MdiClient _mdiClient;

    public NonScrollableWindow(MdiClient parent)
    {
        _mdiClient = parent;
        ReleaseHandle();
        AssignHandle(_mdiClient.Handle);
    }
    internal void OnHandleDestroyed(object sender, EventArgs e)
    {
        ReleaseHandle();
    }
    private const int SB_BOTH = 3;
    [DllImport("user32.dll")]
    private static extern int ShowScrollBar(IntPtr hWnd, int wBar, int bShow);
    protected override void WndProc(ref Message m)
    {
        ShowScrollBar(m.HWnd, SB_BOTH, 0);
        base.WndProc(ref m);
    }
} 
```

用法（在 mdi 父加载事件中），

```
 foreach (MdiClient control in Controls.OfType<MdiClient>())
        {
            if (control != null)
            {
                new NonScrollableWindow(control);
                break;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:35:33.667

MDI 父窗体重新定位新窗体，类似于显示多个窗体级联。要重新定位窗口，您必须在`Form_Loading`事件处理程序中设置位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T13:18:41.170

在孩子的移动事件中，您可以使用代码来检测当前位置是否超出您想要的位置。您需要事先建立父窗口的顶部、左侧、底部和右侧边缘。

代码如：

```
BufferWidth = 10; // 10 pixel buffer to edge
// ParentTop is the top Y co-ordinate of the parent window

if (this.location.Y > (ParentTop-BufferWidth))
{
    int LocX = this.Location.X;
    this.location = new Point(LocX, (ParentTop-BufferWidth));
} 
```

您需要对每一面重复此操作。通过提前计算带有缓冲区的边缘，可以更简化代码，因为它们只会在父窗口移动时发生变化。

# mysql - SQL 查看所有重复项？

> ID：11362238
> 
> 赞同：0
> 
> 时间：2012-07-06T12:29:35.020
> 
> 标签：mysql, sql

我有一张有数千行的大桌子。每一行都有一个唯一的路径。例如：

```
electronics/samsung/tv/lcd-23384
electronics/philips/tv/lcd-12ger
etc... 
```

问题是，最近的查询执行不正确，导致某些字段具有重复的路径。所以，我想知道的是，有没有可以执行的查询来显示所有重复项？换句话说，如果我有这个：

```
ID     | PATH 
1      | path_1
2      | path_2
3      | path_3
4      | path_3
5      | path_3
6      | path_4
7      | path_4
8      | path_5
9      | path_6 
```

我想要这个结果：

```
ID     | PATH 
3      | path_3
4      | path_3
5      | path_3
6      | path_4
7      | path_4 
```

请注意，所有非重复项已被删除。即....这些：

```
ID     | PATH 
1      | path_1
2      | path_2
8      | path_5
9      | path_6 
```

什么 SQL 查询可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:32:04.673

```
SELECT * FROM mytable NATURAL JOIN (
  SELECT PATH FROM mytable GROUP BY PATH HAVING COUNT(*) > 1
) dupes 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/2b757/1/0)上查看。

* * *

要执行您在以下评论中请求的更新：

```
UPDATE mytable NATURAL JOIN (
  SELECT PATH FROM mytable GROUP BY PATH HAVING COUNT(*) > 1
) dupes, (SELECT @r:=0) init
SET mytable.PATH = CONCAT(PATH, '-', @r:=@r+1); 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/73d10/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:34:24.140

试试这个，替换所需的表和列值：

```
SELECT YourColumn, COUNT(*) TotalCount
  FROM YourTable
 GROUP BY YourColumn
HAVING COUNT(*) > 1
 ORDER BY COUNT(*) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:35:10.450

您可以使用此类查询查看所有重复项

```
SELECT * FROM YourTable WHERE Path in
  (SELECT PATH
   FROM YourTable
   GROUP BY PATH
   HAVING COUNT(*)>1) 
```

你想删除什么样的行？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:41:48.140

它会给你所有重复的结果

```
select column_name, count(column_name) occurrence from table_name 
group by column_name having count(column_name) > 1; 
```

如果你想得到所有不重复的结果..

```
select column_name, count(column_name) occurrence from table_name 
group by column_name having count(column_name) = 1; 
```

# mysql - Mysql 语法错误：删除记录

> ID：11362246
> 
> 赞同：1
> 
> 时间：2012-07-06T12:30:57.070
> 
> 标签：myisam表，另一个是, innodb, mysql, syntax-error, sql-delete

我已经在 servlet 中编写了这段代码，以从三个表中删除某些记录。

注意：其中两个表是用于全文搜索的[myisam表，另一个是](/questions/tagged/myisam "显示标记为“myisam”的问题")[innodb](/questions/tagged/innodb "显示标记为“innodb”的问题")表。

```
int id = Integer.parseInt(request.getParameter("id"));
try {
  Statement stmt = conn.createStatement();
  stmt.executeUpdate("DELETE FROM proposal, suitable_for,skill_need WHERE proposal_id="
                     +id); 
```

我收到以下错误。我在我写的查询中看不到任何语法错误

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: 
  You have an error in your SQL syntax; 
  check the manual that corresponds to your MySQL server version for the 
  right syntax to use near 'where proposal_id=12' at line 1
at sun.reflect.GeneratedConstructorAccessor14.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.Util.getInstance(Util.java:386)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1748)
at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1665)
at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeUpdate(DelegatingStatement.java:228)
at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeUpdate(DelegatingStatement.java:228)
at Lucene.Core.indexer.Action.doDelete(Action.java:184)
at Lucene.Core.indexer.Action.doGet(Action.java:48)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:36:05.657

删除可以像这样从表中删除数据，但我不知道是否可以删除像你发布的数据。

```
"DELETE  FROM proposal WHERE    proposal_id="+id
"DELETE  FROM suitable_fo WHERE    proposal_id="+id
"DELETE  FROM skill_need WHERE    proposal_id="+id 
```

在调用它之前，请确保检查参数 id 以避免 sql 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:33:05.900

您是否尝试过分别从三个表中删除（可能在事务中？）

从多个表中删除需要表引用（例如 JOIN）。它是为删除链接记录而诞生的。

所以你应该试试

```
 DELETE FROM proposal, suitable_for, skill_need
 FROM proposal JOIN suitable_for ON (proposal.proposal.id = suitable_for.proposal_id)
 JOIN skill_need ON (skill_need.proposal.id = proposal.proposal.id)
 WHERE proposal.proposal_id = ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:43:00.993

尝试使用 executeQuery 而不是 executeUpdate。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:52:47.213

我没有一个 mySql 数据库来测试它，但我认为问题可能是它无法确定它应该使用哪个 proposal_id（有 3 个表）。您是否尝试过显式连接并在proposal_id 之前指定表名？

就像是 `"DELETE FROM proposal, suitable_for,skill_need WHERE proposal.proposal_id= suitable_for.proposal.proposal_id AND proposal.proposal_id=skill_need.proposal_id and proposal.proposal_id="+id`

不过，我同意其他人的观点，3 个单独的删除将是一个更好的选择..

# php - xlsx 不使用 SimpleXLSX 返回空单元格

> ID：11362248
> 
> 赞同：-1
> 
> 时间：2012-07-06T12:30:59.160
> 
> 标签：php, xlsx

![样品 xlsx](../Images/93fdb9e7447dbe1dfed0a1525a29aacb.png)

**解决** 了嗨，目前我正在使用 SimpleXLSX 解析 xlsx（excel 文件），在返回数组值时删除所有空单元格值，但我需要在返回值中保留任何单元格的空/NULL 值

```
 $xlsx = new SimpleXLSX($uploadfile);
     $j =1;
     //list($num_cols, $num_rows) = $xlsx->dimension();  //Previous
       $items = array();
        list($cols,) = $xlsx->dimension($j);        

    print_r($xlsx->rows());
    //foreach ($xlsx->rows() as $r) { //Previous 
     foreach( $xlsx->rows($j) as $k => $r) {  //fixed
        // if ($i != 0) {
     // for( $i=0; $i < $num_cols; $i++ )//Previous 
       for( $i = 0; $i < $cols; $i++) //fixed
    if(!empty($r[$i]))
                            {
                                $v = $r[$i];
                            }else{

                                $v = '&nbsp;';
                            }
                           // echo $v;
                             $items[$i]  = $v;
                        //   

    }
           $val = implode('|', $items);
 O/P:

 Array
(
[0] => Array
    (
        [0] => Name of the Candidate
        [1] => phone number
        [2] => Postal Address 
        [3] => mobilenumber
        [4] => country
    )

[1] => Array
    (
        [0] => abc
        [2] => 123, 
        [4] => india
    )

[2] => Array
    (
        [0] => fsdfsf
        [1] => 23423423
        [3] => 3223423423
        [4] => us
    )

 ) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T15:06:20.637

未经测试的代码：

```
<?php

$xlsx = new SimpleXLSX($uploadfile);
list($num_rows, $num_cols) = $xlsx->dimension();

$values = [];
foreach ($xlsx->rows() as $r)
{
    $rowValue = '';

    for ($j = 0; $j < $num_cols; $j++)
    {
        $rowValue .= !empty($r[$j]) && $r[$j] != '' ? $r[$j] : 'null';
    }

    $values[] = $rowValue;
}

var_dump($values);

?> 
```

# bash - 在 Bash 中，如何测试变量是否以“-u”模式定义

> ID：11362250
> 
> 赞同：60
> 
> 时间：2012-07-06T12:31:05.460
> 
> 标签：bash

我刚刚`set -u`在 bash 中发现，它帮助我找到了几个以前看不见的错误。但我也有一个场景，我需要在计算一些默认值之前测试是否定义了变量。我为此想出的最好的方法是：

```
if [ "${variable-undefined}" == undefined ]; then
    variable="$(...)"
fi 
```

哪个有效（只要变量没有字符串值`undefined`）。我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-06T20:40:11.187

这是我发现最适合我的方法，从其他答案中汲取灵感：

```
if [ -z "${varname-}" ]; then
  ...
  varname=$(...)
fi 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-07-06T12:38:27.177

### 什么不起作用：测试零长度字符串

您可以通过几种方式测试未定义的字符串。使用标准测试条件如下所示：

```
# Test for zero-length string.
[ -z "$variable" ] || variable='foo' 
```

但是，这不适用于`set -u`。

### 什么有效：条件分配

或者，您可以使用条件赋值，这是一种更类似于 Bash 的方法。例如：

```
# Assign value if variable is unset or null.
: "${variable:=foo}" 
```

由于 Bash 处理此表达式扩展的方式，您可以安全地使用它`set -u`而不会出现“bash: variable: unbound variable”错误。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-05T17:59:03.697

在 bash 4.2 和更新版本中，有一种明确的方法来检查是否设置了变量，即使用 -v。然后可以像这样实现问题中的示例：

```
if [[ ! -v variable ]]; then
   variable="$(...)"
fi 
```

请参阅[http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions)

如果您只想设置变量，如果尚未设置，则最好按照以下方式进行操作：

`variable="${variable-$(...)}"`

请注意，这不处理已定义但为空的变量。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-09T08:48:53.077

上面的答案不是动态的，例如，如何测试定义了名称为“dummy”的变量？尝试这个：

```
is_var_defined()
{
    if [ $# -ne 1 ]
    then
        echo "Expected exactly one argument: variable name as string, e.g., 'my_var'"
        exit 1
    fi
    # Tricky.  Since Bash option 'set -u' may be enabled, we cannot directly test if a variable
    # is defined with this construct: [ ! -z "$var" ].  Instead, we must use default value
    # substitution with this construct: [ ! -z "${var:-}" ].  Normally, a default value follows the
    # operator ':-', but here we leave it blank for empty (null) string.  Finally, we need to
    # substitute the text from $1 as 'var'.  This is not allowed directly in Bash with this
    # construct: [ ! -z "${$1:-}" ].  We need to use indirection with eval operator.
    # Example: $1="var"
    # Expansion for eval operator: "[ ! -z \${$1:-} ]" -> "[ ! -z \${var:-} ]"
    # Code  execute: [ ! -z ${var:-} ]
    eval "[ ! -z \${$1:-} ]"
    return $?  # Pedantic.
} 
```

相关：[如何检查是否在 Bash 中设置了变量？](https://stackoverflow.com/q/3601515/257299)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-11T10:35:02.613

不幸`[[ -v variable ]]`的是，旧版本的 bash 不支持（至少在 Debian Squeeze 上的 4.1.5 版本中不支持）

您可以改为使用子外壳，如下所示：

```
if (true $variable)&>/dev/null; then
    variable="$(...)"
fi 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T12:34:33.387

在脚本的开头，您可以使用空值定义变量

```
variable_undefined="" 
```

然后

```
if [ "${variable_undefined}" == "" ]; then
    variable="$(...)"
fi 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-04T00:49:55.483

```
if [ "${var+SET}" = "SET" ] ; then
    echo "\$var = ${var}"
fi 
```

我不知道 ${var+value} 支持多远，但它至少可以追溯到 4.1.2。旧版本没有 ${var+value}，只有 ${var:+value}。不同之处在于 ${var:+value} 只有在 $var 设置为非空字符串时才会计算为“value”，而如果 $var 设置为**空**字符串，${var+value} 也会计算为“value”细绳。

如果没有 [[ -v var ]] 或 ${var+value} 我认为您必须使用另一种方法。可能是先前答案中描述的子shell测试：

```
if ( set -u; echo "$var" ) &> /dev/null; then
    echo "\$var = ${var}
fi 
```

如果您的 shell 进程已经激活了“set -u”，那么它也将在子 shell 中处于活动状态，而无需再次使用“set -u”，但是如果将它包含在子shell 命令中，则如果父进程也可以使用该解决方案没有启用“set -u”。

（您也可以使用另一个进程，如“printenv”或“env”来测试变量是否存在，但只有在导出变量时才会起作用。）

# java - Dom4 1.6.1j：返回非节点类型值的 XPath 可能吗？

> ID：11362252
> 
> 赞同：0
> 
> 时间：2012-07-06T12:31:07.067
> 
> 标签：java, xml, dom4j

例如，我想返回一个节点的名称，即一个字符串，因此

/Mxml/trades/trade/tradeBody/*[1]/local-name()

但是，当我尝试使用 doc.valueOf 或 doc.selectSingleNode 或其他任何尝试评估它时，我会收到此错误：

org.dom4j.InvalidXPathException：无效的 XPath 表达式：/MxML/trades/trade/tradeBody/*[1]/local-name() 预期的节点类型

我知道它在说什么，我返回的是一个字符串而不是一个节点，那么我该如何请求这个字符串呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:37:21.120

你确定它适用于 JAXP 吗？我的表情看起来不太好；local-name() 不是节点步骤。

这对 dom4j 很好：

```
 Document doc = DocumentHelper
            .parseText("<x:fish xmlns:x='42'>Goodbye, and thanks for all the fish</x:fish>");
    XPath xpath = new DefaultXPath("local-name(/*[1])");
    Object result = xpath.evaluate(doc);
    System.out.printf("Type: %s, Value: %s\n", result.getClass()
            .getSimpleName(), result); 
```

印刷

`Type: String, Value: fish`

# iphone - 在 iOS 中添加多个子视图的动画

> ID：11362253
> 
> 赞同：0
> 
> 时间：2012-07-06T12:31:14.410
> 
> 标签：iphone, ios, xcode, core-animation

我在 UIVIew 中以编程方式添加 20 个 UIButton，我要做的是在这些按钮上添加动画，以便第一个按钮出现在时间 't' 之后，第二个按钮将出现在时间 't+1' 等等。我曾尝试在延迟一段时间后添加按钮，但它不工作所有按钮将一次显示以查看。
如果有解决方案，请告诉我。

> ```
> for(int i = 0; i<20;i++)
> {
>     UIButton *button = [UIButton buttonWithType: UIButtonTypeCustom]; 
>     [button setBackgroundImage:[UIImage imageNamed:@"i_setting30.png"] forState:UIControlStateNormal];  
>     [button setImage:[UIImage imageNamed:@"threadmenu.png"] forState:UIControlStateNormal];
>     [button addTarget: self action:@selector(threadmenu) forControlEvents:UIControlEventTouchUpInside]; 
>     [self.view performSelector:@selector(addSubview:) withObject:button afterDelay:1];
>     button.frame = CGRectMake(0+i*20, 0, 20, 20);
> } 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:22:06.267

您可以使用它`NSTimer`来实现这一点。

您可以安排一个计时器，该计时器将在每个“t”时间后调用所需的方法，直到视图上添加了所有 20 个按钮。

```
NSTimer* timer = [NSTimer scheduledTimerWithTimeInterval:t target:self selector:@selector(addButton:) userInfo:nil repeats:YES];

(void) addButton:(NSTimer*)timer{
   //Your code for adding button goes here 
   buttonCount++;
   if(buttonCount==20)
   {
          [timer invalidate];
          timer = nil;
          buttonCount = 0;
   }
} 
```

这里' **buttonCount** '是一个整数变量，它将跟踪添加到视图中的按钮数量。您可以在头文件中声明它。

# iphone - 从 NSMutableArray 中的元素中删除一个字符？

> ID：11362256
> 
> 赞同：2
> 
> 时间：2012-07-06T12:31:20.120
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

在我的应用程序`NSMutableArray`中是这样的，

```
 Activity:(
"0-1",
"2-4",
"3-5",
"1-2"
) 
```

我想要`NSMutableArray`喜欢的数据，

```
Activity:(
"1",
"4",
"5",
"2"
) 
```

拜托，有人建议我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:41:28.363

首先，我同意理查德的评论。此外，将您的 ivars 大写是一个坏习惯。也就是说，您可以通过以下方式完成所需的操作：

```
NSMutableArray *cleanArray = [[NSMutableArray alloc] initWithCapacity:0];  

// Here 'Activity' is your NSArray. A better name would be 'activity'
// (save capitalized names for classes)
for (NSString *item in Activity)
{
    [cleanArray addObject:[[item componentsSeparatedByString:@"-"] lastObject]];
} 
```

现在你得到了一个在'-'之后带有子字符串的数组，所以你可以用新数组替换原来的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:40:14.963

你可以用一个循环来做到这一点：

```
NSMutableArray *arr = ...
for (int i = 0 ; i != arr.count ; i++) {
    NSString *str = [arr objectAtIndex:i];
    str = [str substringFromIndex:2];
    [arr replaceObjectAtIndex:i withObject:str];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:43:05.200

使用此代码...

```
NSMutableArray *arra = [[NSMutableArray alloc] init]; 
```

假设活动数组具有您的初始数组；

```
for(NSString *str in Activity){
     str  = [str substringFromIndex:str.length-1];
     [arra addObject:str];
}
[Activity removeAllObjects];
[Activity addAllObjectsFromArray:arra ];
[arra release];//If you are not using ARC
NSLog(@"Now your Activity array =%@",Activity ); 
```

如果您不想只替换数组中的“-”，那么您可以使用此代码..

```
str = [str stringByReplacingOccurrencesOfString:@"-"
                                 withString:@""]; 
```

这可能会帮助你..

# coffeescript - 构建一个使用 requirejs 的消费库？

> ID：11362259
> 
> 赞同：5
> 
> 时间：2012-07-06T12:31:39.610
> 
> 标签：coffeescript, javascript, requirejs

我有一个问题，我似乎无法找到答案。我目前正在构建一个消费库，我想使用 requirejs 使其更加模块化。我有以下项目结构......

```
- example
    - scripts
        - otter
            - libs
                - signals
                    signals.js
            - modules
                subModule1.js
                subModule2.js
            otter.js
    index.htm

- src
    - libs (copied to example folder at build time)
        - signals
            signals.js
    - modules
        subModule1.coffee
        subModule2.coffee
    - otter.coffee 
```

我想要做的是能够从我的任何其他文件中获取signals.js文件和我的任何模块，而无需在require中设置路径，或者我不必知道项目是如何设置的在开发时。

例如，我试图在我的 otter.coffee 文件中做的是：

```
define ['/libs/signals/signals'], (signals) ->
    # I've also tried './libs/signals/signals' and 'libs/signals/signals' 
```

这似乎不起作用，因为 require 找不到 signals.js 文件。

如何让 requirejs 加载相对于当前文件的模块？我读过我可以要求 require 作为依赖项，并且该 require 的路径将设置为文件的路径，但这似乎也不起作用。它会引发一个尚未加载的错误，即：e -

```
define (require) ->
    signals = require './libs/signals/signals' 
```

有什么想法可以做到这一点吗？我需要改变图书馆的结构吗？我必须强制一个特定的结构吗？我是否要求那些使用它的人在他们的需求配置中包含某些路径？

提前谢谢了！

**编辑**-

我注意到，如果我在 main.js 文件中为我的库命名为 require，则信号的 require（通过 require 或 define）不起作用（一直找不到 404）。但是，如果我不给我的图书馆起别名，一切都很好..

例如，如果我的 require main.js 文件有..

```
...
paths: {
    'otter': 'scripts/otter/otter'
}
... 
```

then the require of signals fails. However, if I don't have the path and I require otter through it's direct path, the require of signal works. I'm requiring signal like this in otter.js ...

```
define (require) ->
    signals = require './libs/signals/signals' 
```

It this a bug with require.js?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:33:25.627

RequireJS uses two functions to do its job: `define()` and `require()`.

My understanding is that `define()` lists dependencies and only loads modules; loading dependencies that are not modules (*those who not use `define()`*) is done with `require()`.

Because only modules can load modules, there have to be someone else to load the first module. In your case, to use `signals.js` in `otter.js` the first has to be a module and the second has to use `require()`. I guess that a `require()` is always needed before any `define()` uses.

**otter.js:**

```
require.config({
  paths: {
    'signals': 'libs/signals/signals',
    'module1': 'modules/subModule1'
  }
});

require(['signals'], function(signals) {
  signals.initialize();
}); 
```

**signals.js:**

```
define(['module1'], function(module) {
  return {
    initialize: function() {
      module.doStuff();
    }
  }
}); 
```

**subModule1.js:**

```
define([], function() {
  return {
    doStuff: function() {
      console.log('hello world');
    }
  }
}); 
```

*ps. Loading modules relative to the current file do not seems to be allowed: [a `baseUrl` property](http://requirejs.org/docs/api.html#config-baseUrl) is used to configure every modules paths in `requirejs.config()`.*

# css - 将查询字符串附加到所有 .js 和 .css 文件以防止缓存？

> ID：11362261
> 
> 赞同：7
> 
> 时间：2012-07-06T12:31:41.943
> 
> 标签：css, caching

阅读有关构建 Web 应用程序的教程，并建议始终将查询字符串“？v = 1”附加到所有 .css 和 .js 文件以防止缓存。

这是“最佳实践”吗？

查询字符串是否应该仅在生产开发期间使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:52:55.670

我认为这很好，但就最佳实践而言，这确实是主观的。

最流行、最广泛使用的 CMS 使用这种方法，所以我认为这是要走的路。

人们不明白的是，这种方法并不是向浏览器发出可以缓存此文件的信号的最简单方法，而是仅在版本更改时才重新缓存。

第一个问题的简短回答，**是**的。

至于第二个问题“生产-开发”是矛盾的。它是生产还是开发？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:57:45.760

如果您在服务器端做某事，那么在文件更改时很容易防止缓存：

PHP：

```
<script src="<?= $file.’?’.filemtime($file); ?>"> 
```

节点.js

```
res.write('<script src="' + file + '?' + new Date(fs.statSync(file).mtime).getTime()); 
```

这会将修改后的时间戳附加到文件中，因此它只会在文件被修改时阻止缓存。

# objective-c - 需要可变变量

> ID：11362264
> 
> 赞同：1
> 
> 时间：2012-07-06T12:32:01.133
> 
> 标签：objective-c, xcode, ios5, nsmutablearray

这行代码的可变变体是什么：

```
self.dsSearch = [self.ds filteredArrayUsingPredicate:resultPredicate]; 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:34:15.617

`[NSArray filteredArrayUsingPredicate]`返回一个`NSArray`so 以使其成为一个`NSMutableArray`用途：

```
self.dsSearch = [[NSMutableArray alloc] initWithArray:[self.ds filteredArrayUsingPredicate:resultPredicate]]; 
```

或者，如果您想要一个自动释放的对象，请使用：

```
self.dsSearch = [NSMutableArray arrayWithArray:[self.ds filteredArrayUsingPredicate:resultPredicate]]; 
```

# c# - c#中的文件读写

> ID：11362267
> 
> 赞同：1
> 
> 时间：2012-07-06T12:32:07.927
> 
> 标签：c#, file

我的代码是

```
 try
        {
            string mtellThemePath = ConfigurationManager.AppSettings["mtellThemePath"] == null ? Server.MapPath("~/App_Themes/") : ConfigurationManager.AppSettings["mtellThemePath"].Contains("%%") ? Server.MapPath("~/App_Themes") : ConfigurationManager.AppSettings["mtellThemePath"];

            string[] folderPaths = Directory.GetDirectories(mtellThemePath);
            string currentSurveyThemeName = hfSurveyName.Value + "_" + hfClientId.Value;
            string cloneSurveyThemeName = lstSurvey[0].SurveyName + "_" + Identity.Current.UserData.ClientId;
            string cloneSurveyThemePath = mtellThemePath + "\\" + lstSurvey[0].SurveyName + "_" + Identity.Current.UserData.ClientId;

            string cssFile = cloneSurveyThemePath + "\\" + cloneSurveyThemeName + ".css";
            string skinFile = cloneSurveyThemePath + "\\" + cloneSurveyThemeName + ".skin";

            string FileContentCSS = string.Empty;
            string FileContentSkin = string.Empty;

            foreach (string oFolder in folderPaths)
            {
                if (oFolder.Split('\\')[5] == currentSurveyThemeName)
                {
                    string[] cssSkinFiles = Directory.GetFiles(oFolder);
                    foreach (string objFile in cssSkinFiles)
                    {
                        if (objFile.Split('\\')[6].Split('.')[1] == "css")
                        {
                            FileContentCSS = File.ReadAllText(objFile);
                        }
                        if (objFile.Split('\\')[6].Split('.')[1] == "skin")
                        {
                            FileContentSkin = File.ReadAllText(objFile);
                        }
                    }
                }
            }
            Directory.CreateDirectory(cloneSurveyThemePath);
            File.Create(cssFile);
            File.Create(skinFile);
            if (FileContentCSS != string.Empty)
            {
                File.WriteAllText(cssFile, FileContentCSS);
            }
            if (FileContentSkin != string.Empty)
            {
                File.WriteAllText(skinFile, FileContentSkin);
            }
            return lstSurvey[0].SurveyGuid;
        }
        catch (Exception ex)
        {
            throw ex;
        } 
```

它给出的错误如下：

> 该进程无法访问文件“D:\Projects\Mtelligence\Mtelligence.Web\App_Themes\Clone_ForCloneTest_-1\Clone_ForCloneTest_-1.css”，因为它正被另一个进程使用。

请帮助我..........如何解决这个问题

我正在尝试从一个文件夹中读取 .css、.skin 文件并将这些相同的文件写入另一个具有不同名称的文件夹中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T12:39:41.183

看看这个：

```
File.Create(cssFile);
File.Create(skinFile);
if (FileContentCSS != string.Empty)
{
    File.WriteAllText(cssFile, FileContentCSS);
    // ...
} 
```

实际上`File.Create`不只是创建一个文件，而是创建文件并向它返回一个打开的流。您随后的调用`File.WriteAllText`将尝试编写自己打开的文件。在您的情况下（因为您不使用返回的流`File.Create`）只需删除它们：

```
if (FileContentCSS != string.Empty)
{
    File.WriteAllText(cssFile, FileContentCSS);
    // ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T12:39:04.950

从您收到的错误中，我想您没有关闭您正在操作的文件的流。可能是以下几行：

> ```
> > File.Create(cssFile);
> > File.Create(skinFile); 
> ```

它们返回一个 FileStream 对象，您可能应该在完成后刷新并关闭它。

记住不冲水是不礼貌的:)

因此，为您的创建文件执行此操作：

```
using (var stream = File.Create(cssFile))
{
    // do your tasks here
    stream.Flush();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T12:42:17.430

你有什么理由不使用`File.Copy`吗？

```
 // To copy a file to another location and 
    // overwrite the destination file if it already exists.
    System.IO.File.Copy(sourceFile, destFile, true); 
```

# wordpress - 如何在当前目录中提取 .tar.gz？（无子文件夹）

> ID：11362273
> 
> 赞同：4
> 
> 时间：2012-07-06T12:32:39.283
> 
> 标签：wordpress, bash, ssh

目前，当从 shell 中提取 Wordpress latest.tar.gz 文件时，它会将其提取到一个`/wordpress/`文件夹中。

我将如何得到它，所以它只是将文件放在实际的当前目录中？

制作一个自动脚本，我正在考虑这样做`mv /wordpress/* ./*` ，但这行得通吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T12:36:19.497

`--strip-components=1`在您的 tar 提取命令中使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T13:05:51.880

来自`man tar`：

```
--strip-components NUMBER, --strip-path NUMBER
strip NUMBER  of    leading  components  from  file  names  before
extraction

(1) tar-1.14 uses --strip-path, tar-1.14.90+ uses --strip-compo-
nents 
```

所以首先做

```
tar --version 
```

然后

```
tar zxvf --strip-components 1 YOURTARFILE.tar.gz 
```

对于版本 1.14.90+，或

```
tar zxvf --strip-path 1 YOURTARFILE.tar.gz 
```

对于旧版本。

或者，您当然可以创建一个简单的命令链：

```
tar zxvf YOURTARFILE.tar.gz && mv wordpress/* . && rmdir wordpress 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T13:07:01.717

第一步 gunzip 文件：

```
gunzip latest.tar.gz 
```

latest.tar 文件仍然存在。要将其提取到工作文件夹，请使用

```
tar -x --xform s/wordpress// -f latest.tar 
```

# jquery - 如何使用 JQuery 在 ASP.Net CheckBoxList 中查找是否未选中任何复选框

> ID：11362274
> 
> 赞同：-1
> 
> 时间：2012-07-06T12:32:40.050
> 
> 标签：jquery, asp.net, checkboxlist

我需要确定是否在客户端未选中 CheckBoxList 中的任何复选框（*重复**未**选中*），以便我可以使用 JQuery 将顶部的“全选”选项更改为选中/未选中。

其他操作（选中/取消选中所有选项和取消选中“全选”检查的任何选项）都可以正常工作，但最好让“全选”反映所有其他复选框的状态。

假设我已经有`var cbs = $('#myCheckBoxList :checkbox')`什么我必须应用到它来找到选择 == false 的任何复选框？

我找到的所有示例都是关于查找单个复选框的选中状态，但我需要知道是否有任何未选中。

尝试过`cbs.find(':[checked="false"]')`等，但我找不到`find()`仅按属性过滤的好例子。

## 我正在编写的全选切换行为的完整代码

**（包括从下面Chandu的答案得出的最终解决方案）：**

```
 $(window).load(function () {
        var cbs = $('.myCheckBoxList :checkbox');
        cbs.eq(0).click(function () {
            var toggle = this.checked;
            cbs.attr('checked', toggle);
        });
        cbs.slice(1).click(function () {
            if (!this.checked) {
                cbs.eq(0).attr('checked', false);
            } else {
                cbs.eq(0).attr('checked', cbs.slice(1).filter(':not(:checked)').length == 0);
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:35:32.477

您需要将`:not`选择器与`:checked`

尝试这个：

~~cbs.find(':not(:checked)')~~

```
cbs.filter(':not(:checked)') 
```

或者

```
$('#myCheckBoxList :not(:checked)') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:35:50.210

试试这个

```
$('#myCheckBoxList input:not(:checked)') 
```

有关更多信息，请检查[`not`](http://api.jquery.com/not-selector/)和[`checked`](http://api.jquery.com/checked-selector/)选择器

# objective-c - 语音开始时自动录音，语音停止时自动播放

> ID：11362275
> 
> 赞同：1
> 
> 时间：2012-07-06T12:32:50.630
> 
> 标签：objective-c, ios

任何人都可以帮我解决以下问题：

自动录制语音，并在静音时播放，就像说话的汤姆一样。谁能帮我确定会说话的汤姆背后的逻辑。当用户开始说话时，它应该自动录制，当用户停止说话时，应该播放录制的语音。这怎么可能？请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T06:02:56.617

```
float peakPowerForChannel = pow(10, (0.05 * [soundRecorder peakPowerForChannel:0]));
float averagePowerForChannel = pow(10, (0.05 * [soundRecorder averagePowerForChannel:0]));
lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;  
averagePassResults = ALPHA * averagePowerForChannel + (1.0 - ALPHA) * averagePassResults;

if (peakPowerForChannel > 0.08f) {
    [soundRecorder recordForDuration:5];
} else {
    NSLog(@"not audible");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:57:52.170

我会说你必须分析你的音频流，当一个定义为“信号”的峰值被击中并保持一段时间时，你就会开始录制。

当另一个定义为“静音”的值出现一段时间后，您需要停止录制并开始播放。

实际上是一个纯粹的信号处理任务。理论上不复杂。不过，从来没有在 iPhone 上这样做过。

希望这可以帮助，

最好的，

弗洛

# iphone - 在散点图上显示图像作为核心绘图 iOS 中的绘图符号

> ID：11362277
> 
> 赞同：1
> 
> 时间：2012-07-06T12:33:08.643
> 
> 标签：iphone, xcode, graph, core-plot

我需要在散射图中的绘图符号处显示图像。现在我正在使用 CPTPlotSymbol 在图表上绘制符号。但我能得到的只是预定义的对象。例如。ellipsePlotSymbol、dashPlotSymbol、trianglePlotSymbol。

但我需要改为绘制图像。

你能帮我实现这个目标吗？非常感谢。

![在此处输入图像描述](../Images/f0127b9bf1d5d515993ff7ae4b0c817f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T07:45:35.347

尝试了一下后得到了答案。

首先，我构建了一个自定义 CPTLayer，并在其中使用要填充的图像。

**CustomImageForScatterPlot.h 文件**

```
 #import "CPTLayer.h"

 @interface CustomImageForScatterPlot : CPTLayer
 {    
     UIImage *_image;

 }
 -(id)initWithImage:(UIImage *)image;

 @end 
```

**CustomImageForScatterPlot.m 文件**

```
#import "CustomImageForScatterPlot.h"
#import "CPTLayer.h"

@implementation CustomImageForScatterPlot

-(void)dealloc{

    [_image release];
    [super dealloc];
}
-(id)initWithImage:(UIImage *)image{

    CGRect f = CGRectMake(0, 0, image.size.width, image.size.height);

    if (self = [super initWithFrame:f]) {

        _image = [image retain];
    }

    return self;

}

-(void)drawInContext:(CGContextRef)ctx{

    CGContextDrawImage(ctx, self.bounds, _image.CGImage);

}
@end 
```

现在，在散点图图形文件中，我使用以下委托方法返回图像

```
- (CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index
{       
     CustomImageForScatterPlot* layer = [[CustomImageForScatterPlot alloc] initWithImage:[UIImage imageNamed:@"dots.png"]];
     layer.frame = CGRectMake(2, 0, 34, 6);

     return layer;        
} 
```

享受编码.... :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T23:39:49.740

使用`-symbolForScatterPlot:recordIndex:`数据源方法并为突出显示的点返回不同的符号。带有图像的标准矩形符号`fill`将满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:51:39.540

我看到了两种不同的方法，第一种是使用一个默认符号，然后遍历您的数据并添加一个 CPTPlotSpaceAnnotation 和一个 CPTLayer，每个点都包含一个图像。另一种方法是创建 CPTPlotSymbol 的子类并覆盖 renderAsVectorInContext 以绘制图像。

可能有一种我不知道的直接方法可以做到这一点。

# javascript - Windows 8 Metro UI HTML 应用程序中的自定义可重用 UI 组件

> ID：11362286
> 
> 赞同：0
> 
> 时间：2012-07-06T12:33:33.287
> 
> 标签：javascript, html, windows-8, microsoft-metro

在通过 HTML/JS/CSS 为 Metro 创建应用程序的过程中，我注意到（与 Web 类型的应用程序一样）存在跨站点共享的通用 UI 组件。为了快速完成它，我一直在复制和粘贴，例如，从一个页面到另一个页面的导航 AppBar（它在某些但不是所有页面中都是必需的，否则我会将它放在导航父级中）。

由于以下几个原因，这种方法开始困扰我：

*   如果我在导航中添加元素，这在开发的这个阶段经常发生，我必须将导航元素的 HTML + JS 复制并粘贴到每个具有导航的页面中。
*   我个人页面的 HTML 和 JS 文件被与页面目的无关的代码污染了。
*   任何开发人员都可能提出许多其他原因说明这不是一个好方法。

我希望能够定义我自己的自定义控件，它将导航功能封装到它自己的一组 HTML/JS/CSS 中（类似于导航器将子页面加载到默认 html 页面中的方式）。将选项传递给这样的控件也很好（我想是通过“data-win-options”属性）。这或多或少等同于 ASP.Net User Controls 或 ASP.Net MVC Partials（以及任何其他 Web 客户端框架，我敢肯定）。

不幸的是，在这个阶段，并没有太多的文档来指导我应该如何去做这样的事情——或者如果我还没有看到它（我找到了与C# 和 XAML 方法，而不是 HTML）。

因此，考虑到这一点，我的问题是：

*   这是解决问题的好方法吗？（我相信是，但如果有其他意见，我很想听听）。
*   是否有任何现有的在线示例可以证明该问题的合理优雅的解决方案 - 如果有，这些示例在哪里？当然，如果您有答案，欢迎您在此处发布解决方案 - 我敢肯定，如果您这样做，Stack Overflow 会喜欢它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:43:12.300

这里有一个示例演示如何创建自定义控件：

[http://code.msdn.microsoft.com/windowsapps/SemanticZoom-for-custom-4749edab](http://code.msdn.microsoft.com/windowsapps/SemanticZoom-for-custom-4749edab)

该示例旨在说明在自定义控件中实现语义缩放，但从向您展示示例自定义控件的角度来看，它至少应该有所帮助。

就应用栏而言，是否有理由不能将应用栏托管在 default.html 中，并在加载子页面时根据需要在子页面中添加/删除按钮？对于不需要应用栏的页面，您可以禁用它。

希望有帮助。

# php - 在 PHP 中获取句子的第一个单词和第二个单词的两个字符？

> ID：11362291
> 
> 赞同：1
> 
> 时间：2012-07-06T12:33:57.257
> 
> 标签：php

```
$myvalue = 'Test some more';
$arr = explode(' ',trim($myvalue));
echo $arr[0]; // will print Test 
```

我使用上面的代码来回显句子中的第一个单词。现在我还想回显第二个单词的前两个字符。这样上面的回声就会导致： **测试所以**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:36:39.307

```
$myvalue = 'Test some more';
$pos = stripos($myvalue, ' ');
echo substr($myvalue, 0, $pos + 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:35:46.033

```
echo $arr[0] . " " . substr($arr[1],0,2); 
```

您可能应该添加一个签入以确保 $arr 包含足够的单词来执行此操作

```
if(count($arr) >= 2)
{
    // do stuff here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:35:57.917

使用这条线：

```
echo $arr[0] . substr($arr[1],0,2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:36:34.383

子字符串怎么样？

```
$myvalue = 'Test some more';
$arr = explode(' ',trim($myvalue));
echo $arr[0] . ' ' . substr($arr[1], 0, 2); // will print Test so 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T12:36:49.530

```
<?php
    $myvalue = 'Test some more';

    $arr = explode(' ',trim($myvalue));
    echo $arr[0]; // will print Test

    # first two simbols!
    echo ' ' . substr( $arr[1], 0, 2 );
?> 
```

# python - ffmpeg 子进程问题

> ID：11362292
> 
> 赞同：0
> 
> 时间：2012-07-06T12:34:06.253
> 
> 标签：python, ffmpeg, subprocess

当通过 Maya 中的 python 脚本编辑器尝试时，这工作正常。即使通过脚本运行，如何确保它成功运行

```
oneImage = "D:/imagesequence/dpx/brn_055.0000.jpg"
firstImage = "c:/users/nishith/appdata/local/temp/firstImage.jpg"
thumbnai = "c\:/users/nishith/appdata/local/temp/thumbnail.jpg"

paramf = "movie='%s' [watermark]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/3[water];[water] drawtext=fontsize=32:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text='shotName':x=(w)/2:y=(h)-50,drawtext=fontsize=28:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text='Notes \:':x=(w)/5:y=(h)-90,drawtext=fontsize=28:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text='Frame Range \:':x=(w)/5:y=(h)-130,drawtext=fontsize=28:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text='Lens \:':x=(w)/5:y=(h)-170,drawtext=fontsize=28:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text='Undistortion \:':x=(w)/5:y=(h)-210,drawtext=fontsize=28:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text='Image Sequence \:':x=(w)/5:y=(h)-250,drawtext=fontsize=28:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text='Date \:':x=(w)/5:y=(h)-290,drawtext=fontsize=28:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text='Element Name \:':x=(w)/5:y=(h)-330,drawtext=fontfile=/Windows/Fonts/arial.ttf:text='FIREWORKS':x=130:y=200:fontsize=54:fontcolor=White[out]" % thumbnai

d = subprocess.check_call(["ffmpeg", "-threads", "8", "-i", firstImage , "-vf", paramf , oneImage], shell=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:24:13.207

知道了。虽然在命令行上它有效。drawtext 中缺少子进程命令“C\:/Windows/Fonts/arial.ttf”。现在它适用于这些变化。

# erlang - ejabberd gen_mod 开发问题

> ID：11362295
> 
> 赞同：2
> 
> 时间：2012-07-06T12:34:16.943
> 
> 标签：erlang, ejabberd

在这个[stackoverflow 问题](https://stackoverflow.com/questions/1954402/ejabberd-supervisor-module)和[本教程系列](http://anders.conbere.org/blog/2008/08/06/building_ejabberd_modules_-_part_4_-_xmpp_bots/)之后，我实现了 mod_test 模块，它实现了 gen_mod 和 gen_server 行为。现在它非常愚蠢，因为它只是将自身添加到 ejabber_sup 中。

我的问题是我不确定该模块是否由 ejabberd_sup 启动，因为我在以下提供的列表中找不到它：

```
supervisor:which_children(ejabberd_sup). 
```

鉴于我在同一个目录中有 gen_mod.beam 和 mod_test.erl，我使用以下代码编译了我的代码：

```
erlc -pa ./ mod_test.erl 
```

这没有错误。编译后，我将文件复制到 ejabberd 安装的 ebin 文件夹中，并更改 ejabberd.cfg 添加：

```
....
{mod_test, []},
.... 
```

我的代码如下：

```
-module(mod_test).

-behaviour(gen_server).
-behaviour(gen_mod).

-export([start/2, stop/1]).

-export([start_link/2]).
-export([init/1, handle_call/3, handle_cast/2, handle_info/2,
         terminate/2, code_change/3]).

-record(state, {}).

start(Host, Opts) ->
    Proc = gen_mod:get_module_proc(Host, ?MODULE),
    ChildSpec = {Proc,
                 {?MODULE, start_link, [Host, Opts]},
                 permanent,
                 1000,
                 worker,
                 [?MODULE]},
    supervisor:start_child(ejabberd_sup, ChildSpec).

stop(Host) ->
    Proc = gen_mod:get_module_proc(Host, ?MODULE),
    supervisor:terminate_child(ejabberd_sup, Proc),
    supervisor:delete_child(ejabberd_sup, Proc).

start_link(_Host, _Opts) ->
    gen_server:start_link({local, ?MODULE}, ?MODULE, [], []).

init([]) ->
    {ok, #state{}}.

handle_call(_Request, _From, State) ->
    Reply = ok,
    {reply, Reply, State}.

handle_cast(_Msg, State) ->
    {noreply, State}.

handle_info(_Info, State) ->
    {noreply, State}.

terminate(_Reason, _State) ->
    ok.

code_change(_OldVsn, State, _Extra) ->
    {ok, State}. 
```

我的方法有问题吗？如何确定模块已正确启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:30:58.597

我重新安装了 ejabberd (vsn 2.1.11)，现在它可以工作了。我在这个答案中添加了与 questoin 中的代码不同的代码部分。在[mod_echo.erl之后进行了更改](http://svn.process-one.net/ejabberd/tags/ejabberd-1.1.2/src/mod_echo.erl)

```
-define(PROCNAME, ejabberd_mod_test).

start_link(Host, Opts) ->
    Proc = gen_mod:get_module_proc(Host, ?PROCNAME),
    gen_server:start_link({local, Proc}, ?MODULE, [Host, Opts], []).

start(Host, Opts) ->
    Proc = gen_mod:get_module_proc(Host, ?PROCNAME),
    ChildSpec =
    {Proc,
     {?MODULE, start_link, [Host, Opts]},
     temporary,
     1000,
     worker,
     [?MODULE]},
    supervisor:start_child(ejabberd_sup, ChildSpec).

stop(Host) ->
    Proc = gen_mod:get_module_proc(Host, ?PROCNAME),
    gen_server:call(Proc, stop),
    supervisor:terminate_child(ejabberd_sup, Proc),
    supervisor:delete_child(ejabberd_sup, Proc). 
```

希望这对其他人也有帮助。

# java - @GuardedBy , @ThreadSafe ,@NotThreadSafe

> ID：11362298
> 
> 赞同：44
> 
> 时间：2012-07-06T12:34:26.800
> 
> 标签：java, concurrency, java.util.concurrent

我看到上面的注释在 JCIP 书中被广泛使用。我认为它非常有用，因为即使没有适当的文档，它也说明了一些关于同步策略的内容。我还看到[Intellij Idea](http://jetbrains.dzone.com/tips/concurrency-hot-try-jcip)使用了这些注释它们现在实际上是 Java 语言本身的一部分吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-06T12:51:05.213

这些是不属于标准 JDK 的自定义注解。为了能够在您的代码中使用它们，您需要添加一个依赖项。

在[jcip.net ，在页面底部“](http://jcip.net)*并发注释：jar、javadoc、源*”有一个指向库及其源的链接。

直接链接：

*   [罐](http://jcip.net.s3-website-us-east-1.amazonaws.com/jcip-annotations.jar)
*   [文档](http://jcip.net.s3-website-us-east-1.amazonaws.com/annotations/doc/index.html)
*   [来源](http://jcip.net.s3-website-us-east-1.amazonaws.com/jcip-annotations-src.jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-23T08:48:15.877

您可以从 Maven 存储库添加依赖项

> 《Java 并发实战》图书注解 » 1.0

[jcip-注释-1.0](https://mvnrepository.com/artifact/net.jcip/jcip-annotations/1.0)

# java - WebRenderer Swing 和服务器版

> ID：11362300
> 
> 赞同：0
> 
> 时间：2012-07-06T12:34:30.747
> 
> 标签：java, browser

我正在使用[WebRenderer](http://www.webrenderer.com/)将 HTML5 页面导出到服务器上的图像。问题是唯一支持 HTML5 的版本是 swing 版本。但是，我可以使用 swing 版中的 jar 文件并创建一个新`IMozillaBrowserCanvas`对象，而不是将其链接到 JFrame/JPanel 并让它在没有 GUI 的情况下转换 html5 页面。

刚使用的swing版和服务器版有什么区别`IMozillaBrowserCanvas`吗？我能找到的唯一信息是：

> 由于不在 Swing Thread 上执行渲染，WebRenderer Server Edition 4.0 在服务器和无头环境中的扩展性比任何其他 Java 浏览器 SDK 都更好。保持渲染脱离 Swing 线程，多线程渲染导致可伸缩性的重大改进。[[来源](http://www.java.net/node/667832)]

`spawnMozilla()`另外，当从类中调用方法时，后端发生了什么`BrowserFactory`？据我所知，这只是一个纯 Java 浏览器，并没有在后台运行 xserver。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:26:11.157

我已经从 WebRenderer 联系了开发人员。他说：

> WebRenderer 的服务器版和 Swing 版之间主要存在内部架构差异。服务器版主要是为创建页面图像而设计的，而 Swing 版是一个功能齐全的浏览器。但是，这并不妨碍 Swing 版被有效地用于生成页面图像。
> 
> API 是类似的，尽管 Server 具有用于生成不同大小/类型的图像的便捷方法，并且 Swing 版具有更多可用功能。底层 Mozilla 浏览器的版本在 Swing 版中更新得多，因此它能够呈现使用 HTML5 等技术的页面。
> 
> 虽然渲染都是在 Java 中完成的，但 Mozilla 组件需要为每个平台本地处理。它不运行 xserver，但 spawnMozilla() 调用将设置这些本地组件，默认情况下它们被提取到用户主目录中的 .webrendererswing6 目录中。

# asp.net - 我必须用 ssl 保护所有页面，而不是几个页面？

> ID：11362304
> 
> 赞同：0
> 
> 时间：2012-07-06T12:34:48.153
> 
> 标签：asp.net, .net, ssl

我有 SSL 证书，但我不希望整个网站都在 SSL 中加密，但是结帐页面和付款页面等少数页面被设置为安全 SSL 页面，那么我该怎么做呢？

我的网站是在 .net 中开发的，所以我应该在 web.confing 和代码页中进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:49:33.073

[Matt Sollars](http://www.codeproject.com/Articles/5523/Switching-Between-HTTP-and-HTTPS-Automatically)有一个不错的项目，您可以使用 Web 表单在 https 和 http 之间导航。只需放入 dll 并使用相关设置更改 web.config。

显然，您还需要在 IIS 中设置证书！

# iphone - cocos2d - 在后台处理数据

> ID：11362305
> 
> 赞同：0
> 
> 时间：2012-07-06T12:34:52.270
> 
> 标签：iphone, cocos2d-iphone

我正在用 cocos2d 开发一个 iphone 应用程序，我需要一个更新内容的功能。如何启动一个新的工作线程，它将在后台发送一些请求并且不会暂停主应用程序/gui 线程？我在网上搜索过，找不到一个像样的例子。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:07:51.427

您可以为此使用 NSOperation 和 NSOperationQueue 。

# java - Spring项目冗余类

> ID：11362306
> 
> 赞同：2
> 
> 时间：2012-07-06T12:34:59.547
> 
> 标签：java, spring

我是第一次构建一个 SpringMVC 项目，只是想要一些关于我的设计的反馈。

目前我有以下 UserDao

```
package org.myproj.com.dao;

import org.myproj.com.entity.User;

public interface UserDao {
    public User getById(Long id);
} 
```

这是由 UserDaoImpl 实现的

```
package org.myproj.com.dao;

import org.myproj.com.entity.User;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

@Repository("userDao")
public class UserDaoImpl implements UserDao{

    @Autowired
    private SessionFactory sessionFactory;

    public User getById(Long id) {
        return (User) sessionFactory.getCurrentSession().get(User.class, id);
    }

} 
```

然后我有一个服务层，UserService

```
package org.myproj.com.service;

import org.myproj.com.entity.User;

public interface UserService {
    public User getById(Long id);
} 
```

使用 impl，UserServiceImpl

```
package org.myproj.com.service;

import org.myproj.com.dao.UserDao;
import org.myproj.com.entity.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

@Service("userService")
@Transactional
public class UserServiceImpl implements UserService {

    @Autowired
    private UserDao userDao;

    public UserServiceImpl() {
    }

    @Transactional
    public User getById(Long id) {
        return userDao.getById(id);
    }

} 
```

然后由我的 servlet 访问它...

```
@Autowired
    private UserService userService;

User user = userService.getById(1L); 
```

不禁觉得我的Dao和我的Service都复制了很多。我正在考虑使用服务层来添加角色等内容，而 Dao 则执行业务逻辑。

你觉得这个设计怎么样？可以接受吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:45:33.587

恕我直言，最好将业务事务的语义放入服务层，将数据端构建块放入 dao 层。dao 层是服务使用的数据 API。所以，虽然 dao 层可能有`UserDao`方法`findByName(String username)`，但服务层没有。相反，服务层将有一个`SecurityService`带有 a 的`authenticateUser(String username)`，除其他外，它会调用`userDao.findByName(username)`. 如果你有 a `UserDetailService`，`addEmailAddressToUser(String username)`那将调用相同的 dao 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:49:42.130

你是对的，当你展示一个简单的例子时它看起来有点重复，但是一旦你的服务层开始变得更复杂（协调多个服务/DAO）并且你的 DAO 有更复杂的查询，业务逻辑和数据的分离访问逻辑将开始变得更有意义......

服务和 DAO 接口看起来并不总是那么相似。一个应该是粗粒度和基于事务的，而另一个应该是基于实体和数据库查询的。

# python - 通过 python 2.4 向 pidgin 发送通知

> ID：11362308
> 
> 赞同：0
> 
> 时间：2012-07-06T12:35:12.913
> 
> 标签：python, pidgin

在我的应用程序中，我想使用 python 2.4 通过他们的 pidgin Internet messanger 向用户发送通知。

有没有人可以说明如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:43:16.590

这是一个使用 dbus 的示例代码（使用 Python 2.7，无法使用 2.4 对其进行测试），但问题是它打开了一个对话窗口。我还没有找到隐藏/关闭/最小化窗口的方法。

```
import dbus
session_bus = dbus.SessionBus()
purple_obj = session_bus.get_object("im.pidgin.purple.PurpleService",
                                    "/im/pidgin/purple/PurpleObject")
purple_int = dbus.Interface(purple_obj, 
                            "im.pidgin.purple.PurpleInterface")
my_account_id = purple_int.PurpleAccountsGetAllActive()[0] # or some other account from yours
conv = purple_int.PurpleConversationNew(1, my_account_id, "recipient's email")
conv_im = purple_int.PurpleConvIm(conv)
purple_int.PurpleConvImSend(conv_im, "This is your message") 
```

# perl - perl 中的重载运算符

> ID：11362311
> 
> 赞同：3
> 
> 时间：2012-07-06T12:35:29.883
> 
> 标签：perl, operator-overloading

假设我有一个受祝福的引用/对象`$a`和`$b`，每个内部都存储为 hashref 并具有：

```
$a->{_x}
$b->{_x} 
```

是否可以重载算术运算，所以当我这样做时：

```
my $c = $a + $b; 
```

我将有一个有福的参考`$c`，`$c->{_x}`等于`$a->{_x} + $b->{_x}`??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T12:37:49.250

当然。只需将您通常的构造函数用于重载子中所需类的新对象，`+`并将其值设置为该总和（或您想要的任何其他值）。

假设您有`new`将初始值作为参数的构造函数，则类似于：

```
sub plus {
   my $self = shift;
   my $right = (shift or 0);
   return MySuperNumberObject->new($self->{_x} + $right);
};

use overload '+' => \&plus; 
```

# c# - 将对象序列化为 XML 时以不同方式表示 Null 值

> ID：11362313
> 
> 赞同：2
> 
> 时间：2012-07-06T12:35:31.820
> 
> 标签：c#, xml

我使用以下代码将对象序列化为 XML：

```
using System.IO;
using System.Xml.Serialization;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            MyClass thisClass = new MyClass() { One = "Foo", Two = string.Empty, Three = "Bar" };
            Serialize<MyClass>(thisClass, @"C:\Users\JMK\Desktop\x.xml");
        }

        static void Serialize<T>(T x, string fileName)
        {
            XmlSerializer v = new XmlSerializer(typeof(T));
            TextWriter f = new StreamWriter(fileName);
            v.Serialize(f, x);
            f.Close();
        }
    }

    public class MyClass
    {
        public string One { get; set; }
        public string Two { get; set; }
        public string Three { get; set; }
    }
} 
```

这会产生以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<MyClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <One>Foo</One>
  <Two />
  <Three>Bar</Three>
</MyClass> 
```

这一切都很好，除了一件事。如果我的值之一为空，我不能从 XML 中省略它，它必须存在，我不能将它表示为`<Two />`，而是我需要将它表示为`<Two></Two>`。

这可以使用我目前的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:55:39.287

使用

```
[XmlElement(IsNullable = true)]
public string Two { get; set; } 
```

您可以将其表示为`<Two xsi:nil="true" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:40:47.187

我相信这篇文章中的人也有同样的问题？也许它可以为您提供解决方案？

[C# xml 序列化](https://stackoverflow.com/questions/5817160/c-sharp-xml-serialization)

# matlab - 为什么 matbugs 永远不会停止运行？

> ID：11362322
> 
> 赞同：-1
> 
> 时间：2012-07-05T18:36:40.583
> 
> 标签：matlab, winbugs

我可以在 WinBUGS14 中毫无问题地运行模型并获得结果，但是当我从 MatLab 运行相同的 WinBUGS 模型（如下所示）时出现问题。它看起来程序永远不会停止运行并且没有结果返回。

谁能帮我。任何建议将不胜感激。谢谢。

1) 我的 WinBUGS 代码 --- CHK_model.txt

```
model {
for(i in 1: N) {
CF01[i] ~ dnorm(0, 20)
CF02[i]  ~ dnorm(0, 1)
h[i] ~ dpois (lambda [i])
log(lambda [i]) <- beta0 + beta1*CF03[i] + beta2*CF02[i] + beta3*CF01[i] + beta4*IND[i]
}
beta0 ~ dnorm(0.0, 1.0E-6)
beta1 ~ dnorm(0.0, 1.0E-6)
beta2 ~ dnorm(0.0, 1.0E-6)
beta3 ~ dnorm(0.0, 1.0E-6)
beta4  <- log(p)
p ~ dunif(lower, upper)
} 
```

2) 我的 MatLab 代码

```
dataStruct = struct( ... 
    'N', 155, ...
    'lower', 0.80, ...
    'upper', 0.95, ...    
    'h',[1, 4, 1, 2, 1, 2, 1, 1, 1, 3, 3, 0, 0, 0, 2, 0, 1, 0, 4, 2, ...
         3, 0, 2, 1, 1, 2, 2, 2, 3, 4, 2, 3, 1, 0, 1, 3, 3, 3, 1, 0, 1, ...
         0, 5, 2, 1, 2, 1, 3, 3, 1, 1, 0, 2, 2, 0, 3, 0, 0, 3, 2, 2, 2, ...
         1, 0, 3, 3, 1, 1, 1, 2, 1, 0, 1, 2, 1, 2, 0, 2, 1, 0, 0, 2, 5, ...
         0, 2, 1, 0, 2, 1, 2, 2, 2, 0, 3, 2, 1, 3, 3, 3, 3, 0, 1, 3, 3, ...
         3, 1, 0, 0, 1, 2, 1, 0, 1, 4, 1, 1, 1, 1, 2, 1, 3, 0, 0, 1, 1, ...
         1, 1, 0, 2, 1, 0, 0, 1, 1, 5, 1, 1, 1, 3, 0, 1, 1, 1, 0, 2, 1, ...
         0, 3, 3, 0, 0, 1, 2, 6, nan], ...               
    'CF03',[-1.575, 0.170, -1.040, -0.010, -0.750, ...
         0.665, -0.250, 0.145, -0.345, -1.915, -1.515, ...
         0.215, -1.040, -0.035, 0.805, -0.860, -1.775, ...
         1.725, -1.345, 1.055, -1.935, -0.160, -0.075, ...
         -1.305, 1.175, 0.130, -1.025, -0.630, 0.065, ...
         -0.665, 0.415, -0.660, -1.145, 0.165, 0.955, ...
         -0.920, 0.250, -0.365, 0.750, 0.045, -2.760, ...
         -0.520, -0.095, 0.700, 0.155, -0.580, -0.970, ...
         -0.685, -0.640, -0.900, -0.250, -1.355, -1.330, ...
         0.440, -1.505, -1.715, -0.330, 1.375, -1.135, ...
         -1.285, 0.605, 0.360, 0.705, 1.380, -2.385, -1.875, ...
         -0.390, 0.770, 1.605, -0.430, -1.120, 1.575, 0.440, ...
         -1.320, -0.540, -1.490, -1.815, -2.395, 0.305, ...
         0.735, -0.790, -1.070, -1.085, -0.540, -0.935, ...
         -0.790, 1.400, 0.310, -1.150, -0.725, -0.150, ...
         -0.640, 2.040, -1.180, -0.235, -0.070, -0.500, ...
         -0.750, -1.450, -0.235, -1.635, -0.460, -1.855, ...
         -0.925, 0.075, 2.900, -0.820, -0.170, -0.355, ...
         -0.170, 0.595, 0.655, 0.070, 0.330, 0.395, 1.165, ...
         0.750, -0.275, -0.700, 0.880, -0.970, 1.155, 0.600, ...
         -0.075, -1.120, 1.480, -1.255, 0.255, 0.725, ...
         -1.230, -0.760, -0.380, -0.015, -1.005, -1.605, ...
         0.435, -0.695, -1.995, 0.315, -0.385, -0.175, ...
         -0.470, -1.215, 0.780, -1.860, -0.035, -2.700, ...
         -1.055, 1.210, 0.600, -0.710, 0.425, 0.155, -0.525, ...
         -0.565], ...
    'CF02',[nan, nan, nan, nan, nan, nan, nan, nan, nan, ...
         nan, nan, nan, nan, nan, nan, 0.38, 0.06, -0.94, ...
         -0.02, -0.28, -0.78, -0.95, 2.33, 1.43, 1.24, 1.26, ...
         -0.75, -1.5, -2.09, 1.01, -0.05, 2.48, 2.48, 0.46, ...
         0.46, -0.2, -1.11, 0.52, -0.37, 0.58, 0.86, 0.59, ...
         -0.12, -1.33, 1.4, -1.84, -1.4, -0.76, -0.23, ...
         -1.78, -1.43, 1.2, 0.32, 1.87, 0.43, -1.71, -0.54, ...
         -1.25, -1.01, -1.98, 0.52, -1.07, -0.44, -0.24, ...
         -1.31, -2.14, -0.43, 2.47, -0.09, -1.32, -0.3, ...
         -0.99, 1.1, 0.41, 1.01, -0.19, 0.45, -0.07, -1.41, ...
         0.87, 0.68, 1.61, 0.36, -1.06, -0.44, -0.16, 0.72, ...
         -0.69, -0.94, 0.11, 1.25, 0.33, -0.05, 0.87, -0.37, ...
         -0.2, -2.22, 0.26, -0.53, -1.59, 0.04, 0.16, -2.66, ...
         -0.21, -0.92, 0.25, -1.36, -1.62, 0.61, -0.2, 0, ...
         1.14, 0.27, -0.64, 2.29, -0.56, -0.59, 0.44, -0.05, ...
         0.56, 0.71, 0.32, -0.38, 0.01, -1.62, 1.74, 0.27, 0.97, ...
         1.22, -0.21, -0.05, 1.15, 1.49, -0.15, 0.05, -0.87, ...
         -0.3, -0.08, 0.5, 0.84, -1.67, 0.69, 0.47, 0.44, ...
         -1.35, -0.24, -1.5, -1.32, -0.08, 0.76, -0.57, ...
         -0.84, -1.11, 1.94, -0.68], ...               
    'CF01',[nan, nan, nan, nan, nan, nan, nan, nan, nan, ...
         nan, nan, nan, nan, nan, nan, nan, nan, nan, nan, ...
         nan, -0.117, -0.211, -0.333, -0.229, -0.272, ...
         -0.243, -0.148, 0.191, -0.263, -0.239, -0.168, ...
         -0.381, -0.512, -0.338, -0.296, 0.067, 0.104, ...
         -0.254, -0.167, -0.526, -0.096, -0.43, 0.013, ...
         -0.438, -0.297, -0.131, -0.098, -0.046, -0.063, ...
         -0.194, -0.155, -0.645, -0.603, -0.374, -0.214, ...
         -0.165, -0.509, -0.171, -0.442, -0.468, -0.289, ...
         -0.427, -0.519, -0.454, 0.046, -0.275, -0.401, ...
         -0.542, -0.488, -0.52, -0.018, -0.551, -0.444, ...
         -0.254, -0.286, 0.048, -0.03, -0.015, -0.219, ...
         -0.029, 0.059, 0.007, 0.157, 0.141, -0.035, 0.136, ...
         0.526, 0.113, 0.22, -0.022, -0.173, 0.021, -0.027, ...
         0.261, 0.082, -0.266, -0.284, -0.097, 0.097, -0.06, ...
         0.397, 0.315, 0.302, -0.026, 0.268, -0.111, 0.084, ...
         0.14, -0.073, 0.287, 0.061, 0.035, -0.022, -0.091, ...
         -0.22, -0.021, -0.17, -0.184, 0.121, -0.192, ...
         -0.24, -0.283, -0.003, -0.45, -0.138, -0.143, ...
         0.017, -0.245, 0.003, 0.108, 0.015, -0.219, 0.09, ...
         -0.22, -0.004, -0.178, 0.396, 0.204, 0.342, 0.079, ...
         -0.034, -0.122, -0.24, -0.125, 0.382, 0.072, 0.294, ...
         0.577, 0.4, 0.213, 0.359, 0.074, 0.388, 0.253, 0.167], ...         
    'IND',[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ...
         1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ...
         1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
         0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
         0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
         0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
         0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
         0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);

Nchains = 3;
clear initStructs;

for i=1:Nchains
    S.beta0 = 0;
    S.beta1 = 0;
    S.beta2 = 0;
    S.beta3 = 0;
    S.P     = 0.9;  
    initStructs(i) = S;
end

bugsFolder = 'C:\Program Files\winbugs14\WinBUGS14';
[samples, stats] = matbugs(dataStruct, ...
        fullfile(pwd, 'CHK_model.txt'), ...
        'init', initStructs, ...
        'view', 0, 'nburnin', 1000, 'nsamples', 5000, ...
        'thin', 10, ...
        'monitorParams', {'theta', 'mu_theta', 'sigma_theta'}, ...
        'Bugdir', bugsFolder); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:20:28.883

@N t，非常感谢您的帮助。我不知道为什么我无法使用“发布您的答案”来回复您。所以我在这里回复：

我从一个网站 (http://code.google.com/p/matbugs/) 下载了 matbugs.m，根本没有碰过这个程序。

当我运行 Matlab 代码时（如我的帖子所示），计算转到 WinBUGS 接口并停在那里。弹出三个WinBUGS窗口：第一个是WinBUGS License窗口，第二个是Log窗口，第三个是Trap窗口。

1）这里是日志窗口；.... 数据加载 compile(3) 模型编译 inits(1,

2) 这里是Trap Wind ... (pc=764962F9H, fp=0028FB3CH) (pc=76496D39H, fp=0028FBB4H) (pc=764977C3H, fp=0028FC14H) (pc=76497BC9H, fp=0028FC24H) HostMenus.Loop [ 00003BDEH] .done BOOLEAN FALSE .f SET {0..5} .n INTEGER 0 .res INTEGER 0 .w HostWindows.Window NIL Kernel.Start [00002B8CH] .code PROCEDURE HostMenus.Loop

3) matbugs.m 的程序太长，无法在此处发布，但我使用的程序与此完全相同[http://code.google.com/p/matbugs/source/browse/trunk/matbugs.m](http://code.google.com/p/matbugs/source/browse/trunk/matbugs.m)

再次感谢您的宝贵时间和建议！

博

# android - 图像和文本居中的按钮

> ID：11362331
> 
> 赞同：5
> 
> 时间：2012-07-06T12:36:09.460
> 
> 标签：android, image, button

我需要中间带有文本的按钮和文本左侧的图标。

我的按钮：

```
<Button
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:onClick=""
            android:text="@string/search_button"
            android:textColor="@drawable/button_text"
            android:layout_weight="1"
            android:background="@drawable/button"
            android:drawableLeft="@drawable/new_star_nonactive" /> 
```

我需要宽度为 fill_parent 的按钮（所有屏幕宽度）

但我有这个： ![在此处输入图像描述](../Images/522d9eabcbc69e3dc28258206ec8e440.png)

如何在文本附近设置图像位置中心？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T12:39:29.077

那么唯一的方法就是使用填充。在您的情况下，您希望图像向右移动，因此请使用`android:paddingLeft="50dp"`或您想要移动的下降量。

编辑：还添加`android:gravity="left | center"`以使文本与图像正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:42:55.263

试试这个你肯定会得到结果：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     >

    <Button 
        android:id="@+id/btn"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="hi"
        android:textSize="24sp"
        android:background="@drawable/wood"/>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/btn"
        android:layout_alignBottom="@+id/btn"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="90dp"
        android:background="@drawable/ic_launcher"
        android:gravity="center" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:55:53.547

试试这个，

```
<Button 
    android:background="@null"
    android:layout_marginLeft="0dp" 
    android:text="HOME"
    android:layout_width="62dp"
    android:marqueeRepeatLimit="marquee_forever"
    android:textColor="#ffffff" 
    android:layout_height="50dp" 
    android:ellipsize="marquee" 
    android:drawableLeft="@drawable/icon_home" 
    android:id="@+id/homebtn" 
    android:singleLine="true"
    android:textSize="10dp"
   android:paddingTop="6dp"
    android:layout_alignParentLeft="true">
  </Button> 
```

# javascript - 标签上的jQuery重新聚焦

> ID：11362332
> 
> 赞同：0
> 
> 时间：2012-07-06T12:36:10.287
> 
> 标签：javascript, jquery, browser

当用户返回网页时，我将如何检测使用 JQuery。例如，用户在一个选项卡中打开网页，然后切换到另一个选项卡以浏览不同的网站。有没有办法检测到用户已经返回到你的网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:40:09.873

这个问题有一个类似的问题，在这里得到了回答。希望这可以帮助你：

[jquery如何检查选定的浏览器选项卡/窗口是否在我们的页面上？](https://stackoverflow.com/questions/6559640/jquery-how-to-check-if-browser-tab-window-the-selected-is-on-our-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:38:06.683

此示例使用 Dojo，但两个库都标准化事件并可以绑定侦听器：

[http://www.sitepen.com/blog/2008/10/13/the-cross-browser-window-focus-blues/](http://www.sitepen.com/blog/2008/10/13/the-cross-browser-window-focus-blues/)

# macos - OS X 调用约定返回值

> ID：11362335
> 
> 赞同：0
> 
> 时间：2012-07-06T12:36:23.447
> 
> 标签：macos, calling-convention, disassembly

我看到了一个主函数的 gdb 反汇编输出，它没有做任何特别的事情，它看起来像这样：

```
1  push    %rbp
2  mov     %rsp, %rbp
3  sub     $0x10,%rsp
4  movl    $0x0, -0x8(%rbp)    ;
5  mov     -0x8(%rbp), %eax    ;
6  mov     %eax, -0x4(%rbp)    ;
7  mov     -0x4(%rbp), %eax    ;
8  add     $0x10, %rsp
9  pop     %rbp
10 retq 
```

我不是 Mac 用户，但我很好奇，从 4 到 7 的行到底在做什么？.不应该是这样的：

```
push    %rbp
mov     %rsp, %rbp
sub     $0x10, %rsp
xor     %eax, %eax
add     $0x10, %rsp
pop     %rbp
retq 
```

***注意***：请随时改进问题标题，我找不到更好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:55:12.367

从这个汇编代码的外观来看，看起来你有一台 64 位机器。

```
 4  movl    $0x0, -0x8(%rbp)    ;
 5  mov     -0x8(%rbp), %eax    ;
 6  mov     %eax, -0x4(%rbp)    ;
 7  mov     -0x4(%rbp), %eax    ; 
```

它们是正确的指示。此处的`%rbp`寄存器包含对`Stack segment`. 该符号`-08x(%rbp)`指的是内存位置，特别是堆栈指针的第 8 个索引。
那么第 4 - 5 行说：

```
4 put 0 in the 8th index of the stack segment
5 put the value of the 8th index of the stack segment in %eax 
```

第 6 - 7 行也是如此。
如果我没记错的话，初始程序仅由分配组成...

# php - 评级星级插件，用于存储来自多个评级的数据

> ID：11362339
> 
> 赞同：2
> 
> 时间：2012-07-06T12:36:47.057
> 
> 标签：php, jquery, forms

我正在使用来自该站点的评级星级 jQuery 插件：[http](http://www.wbotelhos.com/raty/) ://www.wbotelhos.com/raty/由 Washington Botelho 提供。
我在我的单一表单中使用多个评级。不同的评分是这样的：

```
<div id='star1' class='star'></div>
<input name='score1' type='hidden' id='score-target' />

<div id='star2' class='star'></div>
<input name='score2' type='hidden' id='score-target' />

<div id='star3' class='star'></div>
<input name='score3' type='hidden' id='score-target' /> 
```

现在我对 jQuery 不太熟悉，但我尝试了很多来了解它的 js 文件。我写了这样的javascript代码：

```
<script type="text/javascript">
        $(function() {

            $('.star').raty({
            cancel      : true,
            targetKeep  : true,
            targetType  : 'number',
            targetText  : '0',
            target      : '#score-target'
            });

            $('#score').raty({
                score: function() {
                    return $(this).attr('data-rating');
                }
            });
    });
</script> 
```

问题是只有最后一次评分的分数存储在我的输入中，前 2 个输入存储空值。我不使用 Ajax，因为我不熟悉它。我正在使用 php 从表单中获取数据，然后将其存储在表中。任何人都可以帮助我使用 javascript 代码将不同的值存储在不同的隐藏输入字段中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:08:44.237

检查您的代码并观察“on-stars”的 src 属性对我来说，on-stars 的 src 属性包含 star-on 。

```
 score: function() {
            return $('img[src*="star-on"]',$(this)).length;
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T12:51:06.263

问题在这里：

```
target      : '#score-target' 
```

您正在使用选择器`#`，这意味着一个名为“score-target”的**ID 。**在 html 中，**ID**是唯一的，这就是为什么每次第一次引用该 ID 时它都会返回。

你应该这样写：

```
<div id='star1' class='star' rel="score-target1"></div>
<input name='score1' type='hidden' id='score-target1' />
...

...
target      : $(this).attr('rel')
... 
```

# php - 在 Opencart 中修改 Category.tpl - 或创建一个动态工作的副本

> ID：11362340
> 
> 赞同：0
> 
> 时间：2012-07-06T12:36:47.347
> 
> 标签：php, opencart

我目前正在制作一个 Opencart 网站。我想要一些不同的东西。最初我的计划是仅使用 html 和 css 对其进行硬编码 - 但后来我想尝试并了解如何使用模型视图控制器动态完成此操作。

* * *

如果您查看下面照片的链接，请查看 8 个带有标题和图像的灰色框：

[http://www.flickr.com/photos/82026997@N04/7514113014/in/photostream](http://www.flickr.com/photos/82026997@N04/7514113014/in/photostream)

这些将成为类别。我尝试查看模型视图和控制器文件，看看是否可以将类别图像之类的信息提取到 category.tpl 中，但我真的很挣扎，因为我对这一切仍然很陌生。

不仅如此，我只希望它显示在主页上，并且类别默认工作，所以我认为编辑类别 tpl 是错误的做法，因为这会更改整个站点的模块。

所以简而言之，我希望类别能够动态地提取类别名称信息以及图像信息。（但仅在主页上）

有人有解决办法吗？？？如果你能简单地解释一下为什么这样我就可以理解一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:35:04.173

这对你来说很容易。转到您的管理部分，然后单击扩展/模块，如果尚未安装，请单击类别上的“安装”。接下来点击“编辑”。

单击“添加模块”，选择布局主页，您想要的位置，状态选择“启用”。
单击“添加模块”，选择布局类别，您想要的位置，为状态选择“启用”。

**要将图像添加到模块：**

编辑目录/控制器/模块/category.php

你在哪里看到这样的东西：

```
$this->data['categories'][] = array(
    'category_id'       => $category['category_id'],
    'name'              => $category['name'],
    'children'          => $children_data,
    'href'              => $this->url->link('product/category', 'path=' . $category['category_id'])
); 
```

添加图像行：

```
$this->data['categories'][] = array(
    'category_id'       => $category['category_id'],
    'name'              => $category['name'],
    'image'             => $category['image'],
    'children'          => $children_data,
    'href'              => $this->url->link('product/category', 'path=' . $category['category_id'])
); 
```

然后在 view/*your_template*/module/category.tpl 你可以参考它（改变宽度）：

```
<img src="image/<?php echo $category['image']; ?>" title="<?php echo $category['name']; ?>" alt="<?php echo $category['name']; ?>" width="300"/> 
```

# java - 解码位图图像时出现空指针异常

> ID：11362342
> 
> 赞同：1
> 
> 时间：2012-07-06T12:36:48.203
> 
> 标签：java, android

我正在尝试执行以下任务：

1.  拍照
2.  将其存储在 sd 卡中并将路径保存在字符串中。

代码：

```
public synchronized void onActivityResult(final int requestCode, int resultCode, final Intent data) 
    {
       if (resultCode == Activity.RESULT_OK) 
       {
           if (requestCode == RESULT_CAMERA_SELECT)
           {
               try 
               {
                   photo = null;
                   saveImage();
               }
               catch (IOException e) 
               {
                   e.printStackTrace();
               }
           }
       }

public static int calculateInSampleSize(
                BitmapFactory.Options options, int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {
            if (width > height) {
                inSampleSize = Math.round((float)height / (float)reqHeight);
            } else {
                inSampleSize = Math.round((float)width / (float)reqWidth);
            }
        }
        return inSampleSize;
    }

 public void saveImage() throws IOException
        {
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            FileInputStream is2 = new FileInputStream(new File(myReceipt.filename));
            BitmapFactory.decodeStream(is2 ,null, options);
            // Here is2 get file with width of pic as 2000*1500 etc

            options.inSampleSize = calculateInSampleSize(options, 100, 100);

            options.inJustDecodeBounds = false;

// PROBLEM EXISTS AT THIS POINT. imageBitmap is returned as null.....

  Bitmap imageBitmap = BitmapFactory.decodeStream(is2 ,null, options);
            imageBitmap = Bitmap.createScaledBitmap(imageBitmap, 100, 100, false);

            try{

                        photo = this.createFile(fileName, ".jpg");
                        thumbFileName = photo.getAbsolutePath();
                        Uri uri = Uri.fromFile(photo);

                        try {
                               FileOutputStream out = new FileOutputStream(photo);
                               imageBitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
                                } catch (Exception e) {
                               e.printStackTrace();
                                }
                                is2.close();
                                photo = null;
                                imageBitmap = null;
                                imageView.setImageURI(uri);
                            }catch(Exception e)
                            {
                                displayAlert("Can't create file to take picture!","SD Card Error");
                            }

        } 
```

根据代码，我正在拍摄一张图片，然后制作一个缩略图以在图像视图中显示它并存储这个 thumbImage。但错误发生在

```
 Bitmap imageBitmap = BitmapFactory.decodeStream(is2 ,null, options); 
```

它返回空值。谁能解释发生了什么//？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:43:31.123

您只能使用`InputStream`一次！

你打电话时

```
BitmapFactory.decodeStream(is2 ,null, options); 
```

它会“消耗” `is2`。要得到

```
Bitmap imageBitmap = BitmapFactory.decodeStream(is2 ,null, options); 
```

工作，你必须`InputStream`为它创建一个新的，并在那里明确地使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:48:43.683

尝试这个。

ContentResolver cr = mContext.getContentResolver();

将 is2 替换为 cr.openInputStream(uri);

位图 imageBitmap = BitmapFactory.decodeStream(cr.openInputStream(uri) ,null, options);

它对我来说很好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T12:54:59.660

`NullPointerException`s 在程序中使用的变量中没有数据/值时发生。因此，请查看您的图像 URL 或位置是否正确，因为有时 JRE 无法找到图像或使用图像并给出`NullPointerException`. 它一直发生在我身上。

# linux - 合并两个 ls 命令的输出除以 a ; （分号）

> ID：11362347
> 
> 赞同：1
> 
> 时间：2012-07-06T12:36:55.663
> 
> 标签：linux, ls

我一直在尝试查看各种命令，但似乎找不到正确的语法；

我想组合`ls`除以`;`（分号）的两个命令的输出并将输出写入文件。

我的 ls 命令是：

```
ls *.lst
ls -d -1 $PWD/*.lst 
```

它应该看起来像：

```
filename1.lst; /tmp/filename1.lst 
```

并且应该将输出行添加到名为 files.dat ( `> files.dat`?)的文本文件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:26:28.900

您所要求的可以通过`paste`.

```
 FILE1="$(mktemp)"
 ls *.lst > $FILE1
 ls -d -1 *.lst | paste -d ";" $FILE1 - >> files.dat 
```

BTW`$PWD`是当前目录，因此`$PWD/something`与仅编写`something`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:57:06.420

尝试这个：

```
find $(pwd) -name '*.lst' -printf '%f; %p\n' >>files.dat 
```

添加（附加）到 files.dat。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:50:02.427

如果我理解正确，你可以试试

```
echo "$(command1); $(command2)" 
```

# java - Gwt 不适用于 com 端口 rxtx

> ID：11362350
> 
> 赞同：-2
> 
> 时间：2012-07-06T12:37:12.533
> 
> 标签：java

com2 - 它是与 com 端口（rxtx 库）一起使用的类。当我在 gwt 上运行我的网站并按下按钮时，运行此功能并出现错误：

```
public String greetServer(String input)  {

    try {
        comm2 COM = new comm2("COM3", "$KE,WR,6,1\n");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return input;

}

  Caused by: java.lang.NoClassDefFoundError: Could not initialize class gnu.io.CommPortIdentifier
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:69)
        at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
        at com.aaa.server.comm2.<init>(comm2.java:17)
        at com.aaa.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:18)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
        at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
        ... 34 more 
```

在第一次运行时我看到错误

```
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission loadLibrary.rxtxSerial) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:43:06.323

GWT 主要是一个交叉编译器，它将 Java 代码转换为完全在浏览器内部运行的 Javascript。这意味着你不能做任何不能在浏览器内完成的事情，比如任何类型的 IO 或访问 COM 端口

更新1：

* * *

实际上，在查看您的问题之后，您的代码似乎是在服务器而不是客户端上运行的。你的问题让我很困惑。您的问题应该是关于通过嵌入式码头上的 gwt rpc 或其他方式执行库。

我可以看到您的堆栈跟踪列出了谷歌应用程序引擎，您打算在应用程序引擎上运行该应用程序吗？如果是，那么您打算如何访问硬件？如果没有，您应该删除应用引擎依赖并直接在网络服务器上运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T04:08:40.663

这是因为您在正确的目录或路径中没有所有 RxTx 本机依赖项。

为避免此错误，请使用“Neuron Robotics Java Serial Library”一个 RxTx fork。

与原始 RxTx 相比的一些优势

*   本机库的自我部署（所有本机代码都存储在 jar 中并在运行时部署）。不再需要手动安装本机代码
*   一个名为 NRSerialPort 的简化串行端口类，用于：打开、读取、写入

从下载“.Jar”

*   [http://code.google.com/p/nrjavaserial/](http://code.google.com/p/nrjavaserial/) -

或者，如果您使用 Maven，请使用

```
<dependency>
    <groupId>com.neuronrobotics</groupId>
    <artifactId>nrjavaserial</artifactId>
    <version>3.7.5.1</version>
</dependency> 
```

在此处检查 Maven 的最新版本

*   [http://mvnrepository.com/artifact/com.neuronrobotics/nrjavaserial/](http://mvnrepository.com/artifact/com.neuronrobotics/nrjavaserial/)

PS：Google-code 中的最后一个版本是 3.8.4，mvnrepository 是 3.7.5.1。

# c# - 单例模式如何在 Web 环境中工作？

> ID：11362353
> 
> 赞同：22
> 
> 时间：2012-07-06T12:37:26.520
> 
> 标签：c#, asp.net, design-patterns, singleton

所以，一个使用单例模式的对象只能有一个实例。这在网站上如何工作？

**问题：**

1.  单例对象对网站的每个客户/访问者来说都是唯一的吗？即单例对象每个客户端都获得一个实例吗？
2.  Web 应用程序中的对象仅持续几秒钟，因此如果两个客户端同时访问一个网站，则两个客户端都将尝试创建一个单例对象。这是否意味着会抛出一个访问者会看到的异常？我尝试谷歌搜索，但找不到直接的答案。我只是想澄清一下。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T13:17:39.513

史蒂夫，我会尽力回答你的每一个问题：

1) 对于 Web 开发，将对象限定为 Web 请求是很常见的（有时这也称为“每个请求上下文”或“每个 http 上下文”），但我们通常不将这些称为单例那个确切的原因。事实上，大多数 IOC 容器都内置了一个开箱即用的“每个 Web 请求”范围以及一个“单例”。

2) Web 应用程序有时也有真正的单例（由所有请求访问）是很常见的。如上所述，这并不完全正确，因为它将被限定在应用程序池中，并且在/如果重新启动应用程序池时会被吹走。但对于 Web 应用程序而言，这是一个单例。正如 Jigar 所提到的，有时以这种方式设置诸如日志记录等“横切关注点”。这些通常不会在每个 Web 请求中初始化，而是在 global.asax 中或依靠 IOC 容器为您执行此操作。您只需确保在执行对​​象创建时使用标准锁定模式之一来防止两个线程/客户端/等...同时创建对象。这是来自 Microsoft 的链接，但也有其他实现： [http://msdn.microsoft.com/en-us/library/ff650316.aspx](http://msdn.microsoft.com/en-us/library/ff650316.aspx) 如果您使用的是流行的 IOC 容器之一，它将为您解决这个问题（Structuremap、Windsor、Autofac、Unity、Ninject...和许多其他人）。

您需要询问您的同事他们指的是哪种方法，因为这两种方法在某些情况下都有效并且非常常见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T13:18:19.243

这完全取决于您的单例实现。在这里，我假设您将单例创建为在静态构造函数中初始化的静态字段。

理论上，根据其设置，IIS 可能会为您的应用程序创建多个进程，并且每个进程可以创建多个线程来处理请求。每个进程都有自己的单例，可以共享多个线程（和多个请求）。但是同时在一台服务器上可以有多个“单例”实例（每个进程一个）（但是，如果我理解正确，可以在 IIS 设置中禁止多个进程）。

如果您使用静态构造函数，那么将在第一次访问您的类时以线程安全的方式创建单例。请参阅[C# 静态构造函数线程是否安全？](https://stackoverflow.com/questions/7095/is-the-c-sharp-static-constructor-thread-safe)

但是，尽管单例创建是线程安全的，但您仍然必须以线程安全的方式实现单例类的内部。

当您的应用程序进程存在且未重新启动时，单例将存在。应用程序进程的生命周期由 IIS 管理，因此它可以是很长的时间，也可以是很短的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:42:25.467

单例由 IIS 维护，因此单例只持续与 IIS 应用程序池一样长。一旦它被回收或 IIS 被重置，那么单例就会消失。您需要锁定单例以进行多次访问。就像您在任何其他客户端服务器应用程序中一样。

一般来说，我会尽量避免它，因为它有点违背网站本质上是无状态客户端服务器应用程序的想法。为什么不直接使用 Session 来存储任何共享数据呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:44:54.560

对于记录器和共享资源，我们肯定可以在 Web 应用程序中使用单例。正如 Liam 所提到的，只要您的应用程序池没有被清除，它们就会一直存在。

为了更好地理解，请访问...http://www.oodesign.com/singleton-pattern.html

谢谢

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-02-08T08:15:04.983

```
public class SingletonContext<TContext>
    where TContext: DbContext,new()
{
    private static TContext _context;

    private SingletonContext()
    {

    }
    public static TContext GetInstance()
    {
        if (_context == null)
        {
            _context = new TContext();
        }
        return _context;
    }

} 
```

# asp.net - 在 SSRS 报告中导出到 excel 时出错

> ID：11362354
> 
> 赞同：1
> 
> 时间：2012-07-06T12:37:30.987
> 
> 标签：asp.net, reporting-services, export-to-excel

我有 SSRS 报告，我正在尝试导出为 excel 格式。我可以这样做，但是在成功保存后打开一个特定报告时，会出现丢失文件（css）的错误。可能的问题和解决方案是什么？我只被困在一份报告中。其余的工作正常。这是正在使用的代码：

```
 Response.Clear();
            Response.ClearHeaders();
            Response.Charset = "";
            Response.ContentType = "Application/vnd.xls";
            Response.Cache.SetCacheability(HttpCacheability.NoCache);

            Response.AddHeader("content-disposition", "attachment;filename=SkillwiseHeadCount.xls");
            Response.AddHeader("Cache-Control", "max-age=0");
            Response.BinaryWrite(result);
            Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:43:31.680

以下为我在类似项目中的工作：

```
Response.ContentType = "text/csv";
string attachment = "attachment;filename=Report_" + DateTime.Now.ToString() + ".csv";   
Response.AddHeader("content-disposition", attachment);
Response.AddHeader("Pragma", "no-cache");
Response.AddHeader("Expires", "0"); 
```

我使用了 DataReader。

# jquery - 为什么 jQuery FullCalendar 在超过一个月时不要求重新获取周视图中的事件？

> ID：11362359
> 
> 赞同：2
> 
> 时间：2012-07-06T12:37:53.700
> 
> 标签：jquery, ajax, fullcalendar

我正在使用[jQuery Fullcalendar 插件](http://arshaw.com/fullcalendar/docs/)，它在月视图中效果很好。我现在正在玩周视图。问题是，当我每周来回移动时，它似乎只会在一周的开始是新的一个月时重新获取事件。因此，如果有一个周视图是一个月的 1/2 和新月的 1/2（例如，2012 年 7 月的最后一周，从 7 月 29 日开始但在 8 月 4 日结束），那么它不会t 请求重新获取事件。只有当我再次单击前进并且我在（8 月 5 日 - 8 月 11 日）的那一周时，它才会重新获取事件。

问题是我只在服务器上加载 1 个特定月份的事件（所以我没有加载下个月的前几天）。请参阅下面我在月份和年份中传递的代码，以便我的服务器知道要查询哪些数据。

```
$.ajax({
  url: '/EventCalendar/GetCalEvents/',
  dataType: 'json',
  data: {
    month: $('#calendar').fullCalendar('getDate').getMonth() + 1,
    year: $('#calendar').fullCalendar('getDate').getUTCFullYear(),
  },
  success: function (data) {
    callback(data.Events);
  }
}); 
```

这是设计使然，我真的应该在下个月的第一周返回活动，还是这是一个错误？为什么完整日历不触发事件请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:16:25.330

那是因为您的默认视图设置为**Month**。加载日历时，它会加载整个月的事件。现在，当您切换到**周视图**时，它不会加载事件，因为它已经拥有整个月的事件。FullCalendar 智能地获取事件。如果您将默认视图设置为星期或天，如下所示：

```
defaultView: 'agendaWeek', 
```

您会看到它会分别加载每周的事件。我希望这有帮助。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:26:21.863

你试过使用`$('#calendar').fullCalendar('getView')`吗？

这将返回一个包含开始和结束时间的[视图对象。](http://arshaw.com/fullcalendar/docs/views/View_Object/)您可以传递这些值，而不是传递单个月份和年份，并返回在视图显示的时间范围内发生的所有事件。

更好的是，您可以使用完整日历的功能[直接从 json feed](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)中提取。start 和 end 值作为 url 参数自动传递，并且在视图更改时更新事件（例如从一周到一周、一个月到一个月、一天到一天或从任何主视图移动时）。

编辑：重新阅读后，您可能还想尝试将[lazyFetching](http://arshaw.com/fullcalendar/docs/event_data/lazyFetching/)设置为false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T00:36:00.843

而不是定义自己的`$.ajax(...)`功能和设置自己的范围（通过解析`.fullCalendar('getDate')`）使用内置数据源。然后，您将拥有*可见*的日历范围作为 ajax 服务器端事件获取的输入。

初始化时设置源`.fullCalendar(...)`。请参阅有关[设置 EventSource`$.ajax(...)`选项以获取 JSON 日历事件数据](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)的文档。

```
$('#calendar').fullCalendar({
    // Put your other fullCalendar options here too
    eventSources: [
        {
            url: '/EventCalendar/GetCalEvents/',
            dataType: 'json',
            error: function(jqXHR, textStatus, errorThrown) {
                // Logging any error that occured fetching the events
                if(console && console.error){ console.error(arguments); }

                alert("Couldn't fetch events, check the javascript console error log.");
            }
        }
    ]
}); 
```

请求`/EventCalendar/GetCalEvents/`将包含两个[UNIX 时间戳](http://en.wikipedia.org/wiki/Unix_time)（自 1970 年以来的秒数）：

*   [`start`](http://arshaw.com/fullcalendar/docs/event_data/startParam/): 第一个可见日的开始（包括）
*   [`end`](http://arshaw.com/fullcalendar/docs/event_data/endParam/)：最后一个可见日的结束（不包括）
*   [`_`](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/#caching): 一个可选的非静态数字，用作[ajax 缓存破坏技术](https://www.google.com/search?q=cache+busting+ajax)。忽略这一点。

对您的服务器的示例请求

```
/EventCalendar/GetCalEvents/?start=1262332800&end=1265011200&_=1263178646 
```

`start`只需解析日期值，并返回与-`end`范围的任何部分重叠的任何日历事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-19T04:42:51.000

我认为将数据传递到后端并没有错……数据已传递，这就是我所做的……我是 Fullcalendar 的新手……这对我有用……

```
 eventSources:
       [

           // your event source
               {

                   url: '/ajax-load-holidays',// use the `url` property
                   type: 'POST',
                   datatype: "JSON",
                   data : function()
                   { // a function that returns an object
                       var date =  new Date($('#calendar').fullCalendar('getDate'));
                       month_integer = date.getMonth();
                       year_integer = date.getFullYear();
                          return {
                              month: month_integer,
                              year: year_integer
                          }
                   },

                   error: function() {
                       alert('there was an error while fetching eventsin hol!');
                   },
                   color: 'yellow',   // a non-ajax option
                   textColor: 'blue' // a non-ajax option

               },

        ],
    eventRender: function(event, element, view) {
        // lets test if the event has a property called holiday.
        // If so and it matches '1', change the background of the correct day

        if (event.holiday == '1') {
            var dateString1 = event.start.format("YYYY-MM-DD");

            $(view.el[0]).find('.fc-day[data-date=' + dateString1 + ']')
                .css('background-color', '#FAA732','.fc-time','disable');
        }

    } 
```

//这是我的控制器...我在 laravel(MVC-repository) 中做了这个

 `````
public function LoadHoliday(Request $request)
{

    $this->year = $request['year'];
    $month = $request['month'];

        $month++;
        $this->month=$month; 
```

$Rowdata1 = ($this->holidayFixed->getValueMonth("monthOfTheYear",$this-month)); $Rowdata2 = $this->holidayMovable->getValueMonth("monthID",$this->month);

```
 $x=0;
    $data1[] = 0;
    $data2[] = 0;
    if($Rowdata1==null && $Rowdata2==null)
    {
        return 0;
    }
    else {

       foreach($Rowdata1 as $value){

            $mon = $value->monthOfTheYear;
            $day = $value->dayOfTheMonth;

            $dateD =  $this->year. '-' . $mon . '-' . $day;

            $data1[$x] = [
                'title' => $value->description,
                'start' => $dateD,
                'holiday' => '1'

            ];
           $x++;

        }

        foreach($Rowdata2 as $value){
            $year = ($value->yearID);
            $mon = $value->monthID;
            $day = ($value->dateID);

            $dateD = $year . '-' . $mon . '-' . $day;

            $data2[$x] = [
                'title' => $value->description,
                'start' => $dateD,
                'holiday' => '1'

            ];
            $x++;

        }
        if($data1==['0'] && $data2==['0'])
        {

          return 0;
        }
        elseif($data1==['0'])
        {

            return $data2;
        }
        elseif($data2==['0'])
        {

            return $data1;
        }
        else
        {
            unset($data2['0']);
            $data3 = array_merge($data1, $data2);

            return $data3;

        }

    }

} 
`````

# ruby - 如何创建虚拟打印机并将文件重定向到应用程序服务器

> ID：11362360
> 
> 赞同：1
> 
> 时间：2012-07-06T12:37:58.723
> 
> 标签：ruby, printing, virtual, driver, port

我已经有几天了，研究如何通过远程 JSON 服务创建虚拟打印机驱动程序、端口监视器和文件重定向到应用程序服务器。

我偶然发现了[Windows Driver Kit](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)以及使用 GhostScript 构建虚拟打印机的[指南。](http://www.stat.tamu.edu/~henrik/GSPSprinter/GSPSprinter.html)我实际上遵循了本指南，但最终没有设法打印测试页（最后一步），并且实际上不知道我是否应该继续尝试。

我觉得令人印象深刻的是，有这么多人已经问过这个或类似的问题，但没有人写过关于如何真正做到这一点的指南，这就是我打算在这篇文章中呼吁的内容。我发现的只是商业司机，以及试图从司机身上赚钱的人。我也打算在商业服务上使用它，但它完全是关于服务的最终价值，而不是它用来运行的部分。

我现在呼吁社区，如果有人可能已经解决了这个问题，或者只是其中的一部分，或者想尝试一下，以便他/她可以分享。我将继续我的研究，并打算在此过程中分享它……但我觉得必须在这里重新发明轮子……

我想知道我们是否只能使用 c 或 vb 来做到这一点......用 ruby​​ 来做这件事是否合理？

# c# - Can i add Multi dimensional List of properties in the property grid

> ID：11362363
> 
> 赞同：0
> 
> 时间：2012-07-06T12:38:22.073
> 
> 标签：c#, wpf

I'd like to set up a multidimensional list. For reference, I am creating control with property grid for changing its properties.

I am adding controls dynamically. For example, I am adding example no.of stack panels dynamically. Inside the stack panel i am adding no.of elements for example textbox control with property grid.

If i am adding all textbox in 1 stack panel means i can use List and i can get it based on index. But i want to add the property considering the stack panel also.

Here is the data I want to Add:

```
List
(
 [0] => List
  (
    ([0] => List
     (
       [0] => FillColor
       [1] => BorderColor
       [2] => BorderWidth
       [3] => Text
       [4] => FontSize
       [5] => FontFamily
      )
   )
[1] => List
    (
 And so on.... 
```

I can get the textbox properties collections based on the following.

```
internal class PropertiesCollection : List<textBoxPropertiesProperties>
{
}

internal class textBoxProperties
{
}

PropertiesCollection collection = new PropertiesCollection ();
textBoxProperties properties=new textBoxProperties();
collection.Add(textBoxProperties);

textBox1 properties---> collection[0]
textBox2 properties ....> collection[1] 
```

But i want to get it based on in which stack panel its placed. I need something like

```
textBoxProperties[stackpanel1][textbox1]
textBoxProperties[stackpanel1][textbox2]
textBoxProperties[stackpanel2][textbox1]
textBoxProperties[stackpanel2][textbox2]. 
```

How can i get this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:05:59.307

Rather than creating your own hierarchy, you could just use the built in tree structures in WPF - look up the VisualTreeHelper class or see this article: [http://www.codeproject.com/Articles/21495/Understanding-the-Visual-Tree-and-Logical-Tree-in](http://www.codeproject.com/Articles/21495/Understanding-the-Visual-Tree-and-Logical-Tree-in)

# actionscript-3 - AS3 垃圾收集 - 非动态子代是否获得 this.parent 参考？

> ID：11362367
> 
> 赞同：0
> 
> 时间：2012-07-06T12:38:32.783
> 
> 标签：actionscript-3, garbage-collection

“非动态子代”是指另一个库符号预编译的子代，例如，其中一个库符号 MC_1 包含一个实例 MC_2 - MC_1 是为动作脚本导出的，而 MC_1 是通过使用它的实例名称来寻址的（比如说 instance_1 ）。在这种情况下，MC_2 是否仍会获得对 MC_1 的 this.parent 引用，这会束缚它并阻止垃圾收集器执行其业务？我是否必须（在 MC_1 的 AS3 文件中）removeChild(instance_1) 并将 instance_1 设置为 null？即使 MC_2 没有在代码中给出任何引用？

我对垃圾收集的了解（在我读过的 20 多篇文章中无济于事）告诉我答案可能是我不必删除这些引用，但我问是因为这是我唯一的事情没试过。

我在游戏中有一个 DocumentClass current_screen 变量，它通过每个类级联一个 destructor() 函数（大多数类都有自己的 destructor()），只要屏幕发生变化（也从显示列表中删除 current_screen 并将其设置为 null）。级联析构函数删除一个类的子级、所有它的侦听器并将其所有对象变量引用设置为 null（包括数组中的那些）。然而，每次创建新屏幕时内存使用量仍会稳步增加（current_screen = new Screen()），这表明它没有被正确地垃圾收集（最终导致滞后）。我不知道在析构函数类中我还能做什么，除了出于绝望开始删除纯图形的非动态子代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:24:21.213

老实说，我在按照您的描述时遇到了一些麻烦，但希望我能提供一些我在垃圾收集方面的经验。

我的经验是使用 Flash Builder 分析器。

正如您可能在您阅读的所有文章中发现的那样，闪存中有效垃圾收集的关键是确保对象被取消引用。这是通过以下方式实现的：

*   将对象设置为`null`
*   确保没有其他对象持有对该对象的引用，例如。`array`
*   删除任何`event listeners`附加到这个对象
*   正确销毁任何`timers`或`intervals`
*   销毁任何`tweens`在你的对象上工作的东西

**上述内容也适用于嵌套在相关对象中的任何对象。**

使用 Flash Builder，我的工作流程将涉及运行分析器，然后在特定时间点进行快照，然后单击运行垃圾收集器按钮。在等待图表更新通常证明垃圾收集已经运行后，我会再次快照。

接下来，您可以查看这两个快照并比较它们，您将能够看到哪些对象仍然存在。如果是，您可以检查它们并尝试找出它们的存在。

您可以过滤所有对象的类路径以更轻松地找到您创建的对象，如果需要，如果内置类不在您尝试访问的对象中，请删除它们。

还有一个查找游荡对象按钮，但我从未依赖过它。

由于您无法控制 GC 的运行时间（至少不在浏览器中），因此您无法保证它何时运行。因此，当 GC 决定时，内存可能会增加并被收集，但是如果您使用 flash builder 进行分析，您可以使用这种方法向自己证明，如果在运行 garbagbe 收集时收集了对象，那么当您允许 GC 时它也将起作用在自己的时间处理它。

# java - 泛型类的方法调用

> ID：11362370
> 
> 赞同：1
> 
> 时间：2012-07-06T12:38:51.420
> 
> 标签：java, generics, methods

下一个代码

```
public class FilterState<T>{
   Map<String, Object> getProperties(){return null;} // null for shorteness
}

....
public test(FilterState filterState){
    Map<String, Object> map = filterState.getProperties();
} 
```

产生警告

```
Unchecked assignment: 'java.util.Map' to 'java.util.Map<java.lang.String, java.lang.Object> 
```

但是，如果我将过程定义替换为

```
public <T> test(IFilterState<T> filterState) 
```

警告消失。我不知道类泛型与地图分配有什么关系。快速搜索通用文档并没有帮助。知道在哪里看，有人吗？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:34:00.913

如果您放弃泛型类型参数，则*整个类*将被视为使用原始类型，并且该类的所有泛型类型信息都将被忽略。这就是这里发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:44:08.347

我记得当您使用原始类型时，具体化会失败，因此它的编译器可以自由地抱怨通用的属性/方法。但我可能错了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:46:41.430

我不确定到底是什么问题，但您可能想看看规范的第 4.8 节“原始类型”。

> 仅允许使用原始类型作为对遗留代码兼容性的让步。强烈反对在将泛型引入 Java 编程语言之后编写的代码中使用原始类型。Java 编程语言的未来版本可能不允许使用原始类型。为了确保始终标记可能违反类型规则的行为，对原始类型成员的某些访问将导致编译时未经检查的警告。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T13:26:40.747

根据类泛型，定义的类型将是类行为的一部分，因此这里方法返回类型（映射）泛型具有字符串。我认为这就是我们收到此警告的原因！！！由于您在后面添加了部分，这意味着您被迫使用，因此警告不存在......

您可以使用 Annotation @suppresswarning 抑制警告

# python - 将额外信息附加到 Pandas 中的系列

> ID：11362376
> 
> 赞同：1
> 
> 时间：2012-07-06T12:39:18.057
> 
> 标签：python, pandas

是否可以从 pandas 自定义 Serie（以一种简单的方式，顺便说一下 DataFrame ：p）以在显示屏和绘图中附加额外信息？一件很棒的事情是可以附加诸如“单位”、“原点”或与用户相关的任何在计算过程中不会丢失的信息，例如“名称”参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:14:55.913

目前还没有一种简单的方法可以跨计算维护 pandas 对象的元数据。

维护元数据已经在 github 上公开讨论了一段时间，但我们不必花时间编写代码。

我们欢迎您提供任何其他反馈（请参阅 github 上的 pandas），如果您有兴趣自行开发，我们很乐意接受拉取请求。

# php - 为什么需要在php的调用函数中给成功的变量名加上'_'？

> ID：11362377
> 
> 赞同：0
> 
> 时间：2012-07-06T12:39:20.987
> 
> 标签：php

假设当我将变量传递`$company`给另一个静态函数时，传递这样的含义是什么？有什么独特的重要性吗？

```
CompanyMaster::getRowfromCompany($company_); 
```

而不是`$company`，为什么它被赋予`$company_`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:52:17.790

脚本中的下划线没有特殊含义。

`$company`并且`$company_`不是同一个变量，**但**它们具有相同的含义，我的意思是 - 下划线没有任何特别之处。

但不要混淆——**也有[魔法常数](http://www.php.net/manual/en/language.constants.predefined.php)**——它们不是变量，但它们确实包含双下划线，并提供特殊信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:42:00.667

> 假设当我将变量 $company 传递给另一个静态函数时，传递这样的（如下）是什么意思？有什么独特的重要性吗？？

不，添加的下划线没有特殊含义。如果你不喜欢它，请删除它:)

# jpa - hql 和 @EmbeddedId

> ID：11362384
> 
> 赞同：0
> 
> 时间：2012-07-06T12:39:47.580
> 
> 标签：jpa

是否可以从查询中查询 Embeddable 对象？这是我的实体：

```
 @Entity
 @Table(name = "A")
 public class UnitParam implements Serializable {
    ...
    @EmbeddedId
    private UnitParamId unitParamId;
    ....
 }

 @Embeddable
 public class UnitParamId implements Serializable {

    @Column(name = "PcID", nullable = false)
    private short pcId;

    @Column(name = "UnitID", nullable = false)
    private short unitId;

    @Column(name = "ParamID", nullable = false)
    private int paramId;
    ...
 }

 @Entity
 @Table(name = "B")
 public class ParameterMapping extends BasicEntity {

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumns(value = {
        @JoinColumn(name = "PcID", referencedColumnName = "PcID"),
        @JoinColumn(name = "UnitID", referencedColumnName = "UnitID"),
        @JoinColumn(name = "ParamID", referencedColumnName = "ParamID") })
    private UnitParam unitParam;
 ...
 } 
```

这是失败的查询：

```
 select p.id, p.name as name, 
   p.unitParam.unitParamId.pcId as processCell,
   p.unitParam.unitParamId.unitId as unit,
   p.unitParam.unitParamId.paramId as paramId 
   from ParameterMapping p 
```

异常：由： **org.hibernate.QueryException：无法解析属性：unitParamId：ParameterMapping [SELECT p.id，p.name 作为名称，p.unitParam.unitParamId.pcId 作为 processCell，p.unitParam.unitParamId。 unitParam.unitId 作为单位，p.unitParam.unitParamId.paramId 作为 paramId FROM de.koehl.mes.model.ParameterMapping p]**

提前谢谢你。

我发现了问题：第一个问题是混合字段/属性访问。修复后，ManyToOne 生成列，但没有外键！但是不知道为什么！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:18:09.700

中没有`unitParam`字段`UnitParamId`，因此路径`p.unitParam.unitParamId.unitParam.unitId`无效。将您的查询更改为

```
select p.id, p.name as name, 
       p.unitParam.unitParamId.pcId as processCell,
       p.unitParam.unitParamId.unitId as unit,
       p.unitParam.unitParamId.paramId as paramId 
from ParameterMapping p 
```

甚至更好：

```
select p.id, p.name as name, 
       unitParam.unitParamId.pcId as processCell,
       unitParam.unitParamId.unitId as unit,
       unitParam.unitParamId.paramId as paramId 
from ParameterMapping p
inner join p.unitParam unitParam 
```

# ruby-on-rails - 当我尝试使用“rails s”时，rails 服务器停止

> ID：11362389
> 
> 赞同：0
> 
> 时间：2012-07-06T12:40:11.490
> 
> 标签：ruby-on-rails

我正在尝试学习 Ruby on Rails。当我构建我的应用程序并尝试运行服务器时，`rails s`我得到以下信息：

```
**radu@radu ~/rails_projects/first_app $ rails s
=> Booting WEBrick

=> Rails 3.2.6 application starting in development on http:// 0.0.0.0:3000

=> Call with -d to detach

=> Ctrl-C to shutdown server

[2012-07-06 15:30:09] INFO  WEBrick 1.3.1

[2012-07-06 15:30:09] INFO  ruby 1.8.7 (2011-06-30) [i686-linux]

[2012-07-06 15:30:14] INFO  WEBrick::HTTPServer#start: pid=8179 port=3000** 
```

然后它无缘无故地停止，T 不能做任何事情，只能用 ctrl+c 关闭它。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:11:14.713

`rails s` **运行Rails 附带**的 Web 服务器。**所做的只是作为一个进程坐在后台，并在 localhost 的端口 3000 上侦听传入的 Web 请求。再次运行它并转到`http://localhost:3000`.**

 ****您是否期待更多**可以与应用程序交互的控制台？如果是这样，您想要的是`rails console`允许您与您的应用程序交互。您可以编写和运行代码——这对于在将它们提交到应用程序中的代码之前即时尝试非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:54:54.953

你真的在期待一个魔术师吗？打开浏览器打开localhost:3000，回到这里查看日志。您需要访问服务器才能获取日志，这就是它的工作原理。**

# gps - 如何计算不同加速度的平均速度？

> ID：11362392
> 
> 赞同：0
> 
> 时间：2012-07-06T12:40:19.070
> 
> 标签：gps, velocity, acceleration

我想计算使用 gps 信号行进距离的平均速度。

这个公式是否计算正确的平均速度？

`avgspeed = totalspeed/count`

其中 count 是 gps 信号的数量。

如果有错误，请任何人告诉我正确的公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:45:50.190

虽然这应该可行，但请记住，如果您在不同的地形中，GPS 信号很容易混淆。因此，我不会使用算术平均值，而是计算中位数，因此异常值（快速跳跃）不会对结果产生如此大的影响。

来自维基百科（n 是信号的数量）：

> 如果 n 是奇数，则中位数 (M) = 第 ((n + 1)/2) 项的值。
> 
> 如果 n 是偶数，则中位数 (M) = [((n)/2)th item term + ((n)/2 + 1)th item term ]/2 的值

# google-maps - 生成编号标记

> ID：11362393
> 
> 赞同：2
> 
> 时间：2012-07-06T12:40:21.470
> 
> 标签：google-maps

我正在寻找编号标记。并且手动创建编号为 1-1000 的标记非常费力。

有没有更好的方法来上传图片，程序从 1 到 1000 生成了 1000 张图片

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T12:51:42.157

您可以使用的[动态图标](https://google-developers.appspot.com/chart/infographics/docs/dynamic_icons)，`Google Chart API`并为您的地图获取自定义标记。

例如，您可以将此模式用于标记的图标：

```
https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=*number*|FF776B|000000 
```

用法可能是这样的：

```
var number = 15; //
var marker = new google.maps.Marker({  
    position: latlngOfMarker,   
    map: map,  
    icon: 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld='+number+'|FF776B|000000'
}); 
```

图标将如下所示：![在此处输入图像描述](../Images/4a5957061a609b4c53a890090edb1017.png)

但是，请注意，该*服务已被弃用*，并且不适合长期项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T13:36:04.233

以下是一些选项：

*   [带标签的标记](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.5/)

*   [从 0 到 300 的编号标记](http://mapicons.nicolasmollet.com/numbers-letters/)（通过谷歌搜索找到）

*   [从 0 到 999 的编号标记](http://silverpeaks.de/blog/?p=387)（更多谷歌搜索）

# c++ - 在 C++ 中使用多个函数嵌套按值返回向量

> ID：11362397
> 
> 赞同：0
> 
> 时间：2012-07-06T12:40:35.260
> 
> 标签：c++, stl, stdvector

出于某种原因，我想返回 my::Vector 的一个对象（它基本上是一个在内部使用 STL 向量进行实际存储的包装类，并且确实提供了一些额外的功能）。我按值返回向量，因为函数每次都在本地创建一个向量。

```
my::Vector<int> calcOnCPU()
{
  my::Vector<int> v....
  return v;
} 
```

现在我可以有多个嵌套的函数调用（考虑到库设计），所以简而言之，如下所示：

```
my::Vector<int> calc()
{
    if(...)
      return calcOnCPU();
} 
```

AFAIK，按值返回将调用 my::Vector 类的复制构造函数，它是：

```
Vector<int>::Vector(const Vector& c)
{
   ....
   m_vec = c.m_vec; // where m_vec is std::vector<int>
} 
```

几个问题： 1）在复制构造函数中，它是否调用 std::vector 的复制构造函数？或赋值运算符，只是为了确认，std::vector 创建深层副本（意味着复制考虑基本整数类型的所有元素）。2) 在 calc() 中嵌套 calcOnCPU() 每个返回的向量 int: 2 或 1 个 Vector 副本会被创建吗？在这种简单的方法嵌套的情况下，如何避免多个副本？内联函数还是存在另一种方式？

**更新 1：**对我来说很明显，我需要保留自己的复制构造函数，因为有一些自定义要求。但是，我在 main 函数中做了一个简单的测试：

```
int main() {
   ...
   my::Vector v = calc();
   std::cout<<v;
} 
```

我在复制构造函数中使用“std::cerr”打印了一些内容，以查看它何时被调用。有趣的是，对于上述程序，它甚至没有被调用一次（至少没有打印任何内容）。是复制省略优化吗？我在 Linux 上使用 GNU C++ 编译器 (g++) v4.6.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:05:08.240

> 在复制构造函数中，是否调用 std::vector 的复制构造函数？或赋值运算符

在您的情况下，它正在创建一个空的`std::vector`，然后复制分配它。使用初始化列表将直接复制构造它，这更简洁，可能更有效：

```
Vector<int>::Vector(const Vector& c) : m_vec(c.m_vec) {
    ....
} 
```

> 只是为了确认， std::vector 创建深层副本

是的，复制 a`std::vector`将分配一个新的内存块并将所有元素复制到其中。

> 通过在 calc() 中嵌套 calcOnCPU() 每个返回的 int 向量：将创建 2 个或 1 个 Vector 副本？

这取决于编译器。它*应该*应用“返回值优化”（*复制省略*的特殊情况），在这种情况下，它不会创建本地对象并返回副本，而是会直接在为返回对象分配的空间中创建它。在某些情况下无法做到这一点 - 例如，如果您有多个 return 语句可能会返回几个本地对象之一。

此外，现代编译器还将支持*移动语义*，即使无法删除副本，向量的内容也会被移动到返回的对象而不是复制；也就是说，它们将通过设置向量的内部指针来快速传输，无需内存分配或元素复制。但是，由于您将向量包装在自己的类中，并且您已经声明了一个复制构造函数，因此您必须为该类提供一个移动构造函数才能使其工作 - 只有当您是使用 C++11。

> 在这种简单的方法嵌套的情况下，如何避免多个副本？内联函数还是存在另一种方式？

确保您的函数结构足够简单，以便复制省略工作。如果可以的话，给你的类一个移动向量的移动构造函数（或者删除复制构造函数，如果有赋值运算符，则允许隐式生成）。内联不太可能产生影响。

# c# - 动态确定要转换为的类型（C#）

> ID：11362399
> 
> 赞同：0
> 
> 时间：2012-07-06T12:40:52.477
> 
> 标签：c#, dynamic, casting, compile-time

我的函数接收对象类型的参数“值”。我想将它分配给一个对象的成员，但转换不会隐式发生，所以我需要明确指定它。但是，我不想在对象中实际指定该成员的当前类型，所以我可以这样做：

```
positiveOrder.OrderID = (int)value; 
```

但是，如果业务需求发生变化，并且 OrderID 以不同的方式生成和存储，例如 GUIDS 的字符串类型更改，我将不得不回到这里进行更改，这是不合需要的凝聚力。我已经尝试过各种代码排列，例如

```
positiveOrder.OrderID = value as thisOrder.OrderID.GetType(); 
```

或者

```
positiveOrder.OrderID = (typeof(thisOrder.OrderID)) value; 
```

但似乎没有任何效果。关于以编程方式指定要转换为的类型的任何想法？它可以在编译时或运行时完成，因为 Order 类不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:49:05.323

如果`positiveOrder.OrderID`将始终为整数（即​​使以字符串表示），请勿将成员更改为整数以外的任何内容。相反，公开一些可以处理不同源类型的方法。

例如：

```
public void SetOrderID(object value)
{
    this.OrderID = Convert.ToInt32(value);
} 
```

见[`Convert.ToInt32()`](http://msdn.microsoft.com/en-us/library/23511zys)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:48:55.743

就像是：

```
using System.Reflection;

receiver.GetType().GetProperty(propName).SetValue(receiver, value, null); 
```

# wordpress - 自定义字段选择框 Wordpress

> ID：11362400
> 
> 赞同：3
> 
> 时间：2012-07-06T12:41:12.220
> 
> 标签：wordpress, wordpress-theming

我想要一个带有选择框选项的自定义字段。例如，我在左侧选择“联赛”，在右侧我可以从选择框中选择一些值。这可能吗？你有一个例子吗？我不能使用插件，因为我在 WP 管理面板中创建了自定义菜单。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T13:52:03.247

我在这里找到了很棒的教程，所以如果有人需要这里是： [http ://wp.tutsplus.com/tutorials/plugins/how-to-create-custom-wordpress-writemeta-boxes/](http://wp.tutsplus.com/tutorials/plugins/how-to-create-custom-wordpress-writemeta-boxes/)

# vba - 将所有 excel 插件模块导出到 .bas 文件的最快方法是什么？

> ID：11362404
> 
> 赞同：4
> 
> 时间：2012-07-06T12:41:26.377
> 
> 标签：vba, module, export, excel-addins

我正在开发一个包含许多模块的大型 excel 插件。我需要将它们导出到 .bas 文件以使用 SVN 管理它们。我知道快速导出它们的**热键 Ctrl+E**。但是我的模块数量太多，我仍然会浪费太多时间来导出它们。有谁知道更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:03:52.013

这是一个很棒的工具，应该可以满足您的需要

[http://www.appspro.com/Utilities/CodeCleaner.htm](http://www.appspro.com/Utilities/CodeCleaner.htm)

从他们的网站：

> 导出代码文件 - 此功能允许您将项目中的所有代码文件导出到您指定的目录，而无需执行项目清理。

如果您在查找菜单选项时遇到问题，请参阅以上页面了解信息：

> 您必须将安全设置为信任对 Visual Basic 项目的访问才能使用代码清理器。
> 
> 在 Excel 2007 中，代码清理器只能从 VBE 工具菜单运行。将无法从新的 Excel 2007 功能区用户界面运行代码清理程序。

# linux - haproxy - 将当前端口添加到标头

> ID：11362406
> 
> 赞同：1
> 
> 时间：2012-07-06T12:41:28.547
> 
> 标签：linux, proxy, apache, haproxy

我想将当前端口号添加到标题中。我试过了：

```
reqadd      port:\ dst_port 
```

但它添加`dst_port`而不是数字。

有没有办法添加变量 dst_port 做标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T15:16:23.947

尝试：

http-request set-header X-Port %[dst_port]

（应该与 haproxy 1.5 一起使用）

# c# - 通过事件实现的析构函数

> ID：11362408
> 
> 赞同：1
> 
> 时间：2012-07-06T12:41:32.560
> 
> 标签：c#, destructor, unmanaged

我的框架中有几个对象，根据要求需要提供事件 ObjectTerminated。框架的用户可以订阅此事件并清理他正在使用的一些非托管内容。这些对象被设计为在应用程序的整个生命周期中都存在，我不会控制它们的生命周期。您可以将它们视为单例数组。

我想写这样的代码：

```
class SomeWorkflowControlObject
{
     public event EventHandler<> ObjectTerminated;

     ~SomeWorkflowControlObject()
     {
          if (ObjectTerminated != null) ObjectTerminated(this, null);         
     }
} 
```

我不确定，我是否允许这样做。这种解决方案可能会出现什么问题？

**更新：**

Process.GetCurrentProcess().Exited 怎么样？我可以以这种方式使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:47:35.550

你不应该这样做。基本上，C# 中不存在析构函数。您编写的是终结器，终结器唯一应该做的就是释放非托管资源。

根本不允许您访问任何其他托管对象，因为垃圾收集器可能已经将其删除。我认为您的`null`支票不足以防范这种情况；该对象引用可能仍指向您的（事件）委托，即使它已经消失了。

所以简而言之，不要这样做。

**备择方案：**

1.  如果您有 Windows 窗体应用程序，请订阅该[`Application.ApplicationExit`事件。](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.applicationexit.aspx)

2.  您可能需要考虑实现`IDisposable`接口，然后执行以下操作：

    ```
    public class SomethingVeryLongLived : IDisposable
    {
        …
    }

    …

    public static void Main()
    {
        using (var sth = new SomethingVeryLongLived(…))
        {
            Application.Run(new SomeForm(…));
        } // <-- at this point, foo.Dispose() is guaranteed to be called.
    } 
    ```

    请注意，即使在 using 的情况下，`IDisposable`触发正在释放的对象内部的事件可能也不是一个好主意/设计，因为不应再访问已释放的对象。

    出于这个原因，我建议您执行以下操作：

3.  **使用`try…finally`块**：

    ```
    public static void Main()
    {
        var sth = new SomethingVeryLongLived(…);
        try
        {
            Application.Run(new SomeForm(…));
        }
        finally
        {
            SomethingVeryLongLived.Terminate();
        }
    } 
    ```

    这对我来说似乎是最好的，因为您没有[滥用`IDisposable`界面](https://stackoverflow.com/a/2103158/240733 "Eric Lippert 对 StackOverflow 的回答")，而且代码的作用非常清楚......没有隐藏的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:50:31.377

我认为该框架的设计存在固有缺陷。让我解释：

> **1\.** *[...] 我们框架中的几个对象，根据要求需要提供 event `ObjectTerminated`。*

这没有意义。如果一个对象已被终止，正如事件的名称所暗示的那样，那么我会假设它已经消失并且我无法再访问它。这提出了两个问题：

*   死了的东西如何触发事件？就像一具尸体在坟墓里对你说：“我死了。” 你*真的*想要这个吗？

*   如果事件发送者不再应该在那里，为什么其他人会对这样的事件做出反应？尸体埋了之后还有什么要清理的？

> **2.** *我没有控制他们的生活。*

那么谁*在*控制他们的一生呢？为什么他们没有责任在适当的时候进行或触发必要的清理工作？让我进一步详细说明这一点：

> **3\.** *[...] 可以订阅此事件并清理一些非托管的东西 [...]*

这个非托管的东西在哪里，哪个对象负责处理它？如果它是您自己的对象，那么为什么您的对象不处置它 - 为什么您要触发一个事件，以便其他人可以处置这些东西？这就像我在搬运邻居的垃圾，而不是他自己做。（我不是在说那里的老太太。）

如果它看起来像这样，您的课程会更有意义：

```
class SomeWorkflowControlObject : IDisposable
{
     // the following event doesn't make sense, sorry.
     // public event EventHandler<> ObjectTerminated;

     private IntPtr _handleToUnmanagedResource;

     ~SomeWorkflowControlObject()
     {
         Dispose(explicitly: false);         
     }

     public void Dispose()
     {
         Dispose(explicitly: true);
         GC.SuppressFinalize(this);
     }

     protected virtual void Dispose(bool explicitly)
     {
         if (explicitly)
         {
             // free managed resources here; perhaps trigger an event 'Disposing'.
         }
         DisposeUnmanagedResource(_handleToUnmanagedResource);
     }
} 
```

也就是说，它是一些非托管资源的包装器，它自己负责处理这些资源，而不是其他人。因此，不再需要触发事件，以便其他人可以处置非托管资源，无论如何这些资源都应该隐藏在您的对象中。

# .net - Common.Logging 与多个工厂适配器

> ID：11362410
> 
> 赞同：6
> 
> 时间：2012-07-06T12:41:40.530
> 
> 标签：.net, common.logging

我目前正在将一个大型项目转移到使用 Common.Logging 并且我希望能够将日志记录事件输出到多个第 3 方日志记录实现。

我们目前有一个内部开发的跟踪库，我们希望继续使用它来跟踪和调试消息。我还想开始使用 log4net 将一些消息发送到数据库以进行报告或在某些级别发送电子邮件通知。

我正在寻找的是这样的：

```
<common>
<logging>
  <factoryAdapter type="CustomTraceFactoryAdapter, MyAssembly">
    <arg key="configType" value="INLINE"/>
  </factoryAdapter>
  <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net">
    <arg key="configType" value="INLINE"/>
  </factoryAdapter>
</logging>
</common> 
```

有没有办法使用开箱即用的配置选项来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:04:25.417

AFAIK，Common.Logging 中没有任何内容可以满足您的需求。这里有几个选择。

1) 开发几个自定义记录器工厂适配器，如[http://netcommon.sourceforge.net/docs/2.1.0/reference/html/ch01.html#logging-advanced-customfactoryaadapter](http://netcommon.sourceforge.net/docs/2.1.0/reference/html/ch01.html#logging-advanced-customfactoryadapter)所述。您似乎已经开发了一个自定义工厂，用于您的内部跟踪库。第二个自定义工厂将通过组合来自一个或多个其他工厂的记录器来创建复合记录器对象。

2) 为您的跟踪库开发自定义 log4net appender ( [http://logging.apache.org/log4net/release/faq.html#custom-appender](http://logging.apache.org/log4net/release/faq.html#custom-appender) ) 并将 Common.Logging 配置为仅使用 log4net 工厂。

我觉得第二个选项最简单，因为它不涉及更改 Common.Logging 的配置行为，因此它可以从其他配置的工厂构成复合工厂。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-20T21:41:26.853

现在有一种内置的方式来支持多个适配器，请查看[Common.Logging.MultipleLogger](https://www.nuget.org/packages/Common.Logging.MultipleLogger/)。[这里](https://github.com/net-commons/common-logging/blob/master/test/Common.Logging.MultipleLogger.Tests/App.config)有一个例子`App.config`说明如何使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-21T13:22:44.593

我知道这个问题很老了，但显然仍然没有开箱即用的解决方案，所以这里有一个适合我的自定义记录器（灵感来自[https://github.com/ramonsmits/common-logging](https://github.com/ramonsmits/common-logging)但我最终几乎改变了一切）。使用 Common.Logging 3.1.0 版测试。

工厂适配器

```
/// <summary>
/// Adapter hub for Common.Logging that can send logs to multiple other adapters
/// </summary>
public class MultiLoggerFactoryAdapter : AbstractCachingLoggerFactoryAdapter
{
    private readonly List<ILoggerFactoryAdapter> LoggerFactoryAdapters;

    /// <summary>
    /// Initializes a new instance of the <see cref="MultiFactoryLoggerFactoryAdapter"/> class.
    /// </summary>
    public MultiLoggerFactoryAdapter(CommonLogging.Configuration.NameValueCollection properties)
    {
        LoggerFactoryAdapters = new List<ILoggerFactoryAdapter>();

        foreach(var factoryAdapter in properties.Where(e => e.Key.EndsWith(".factoryAdapter")))
        {
            string adapterName = factoryAdapter.Key.Substring(0, factoryAdapter.Key.Length - 15);
            string adapterType = factoryAdapter.Value;

            var adapterConfig = new CommonLogging.Configuration.NameValueCollection();
            foreach(var entry in properties.Where(e1 => e1.Key.StartsWith(adapterName + ".")))
            {
                adapterConfig.Add(entry.Key.Substring(adapterName.Length + 1), entry.Value);
            }

            var adapter = (ILoggerFactoryAdapter)Activator.CreateInstance(Type.GetType(adapterType), adapterConfig);
            LoggerFactoryAdapters.Add(adapter);
        }
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="MultiFactoryLoggerFactoryAdapter"/> class.
    /// </summary>
    /// <param name="factoryAdapters">The factory adapters.</param>
    public MultiLoggerFactoryAdapter(List<ILoggerFactoryAdapter> factoryAdapters)
    {
        LoggerFactoryAdapters = factoryAdapters;
    }

    protected override ILog CreateLogger(string name)
    {
        var loggers = new List<ILog>(LoggerFactoryAdapters.Count);

        foreach (var f in LoggerFactoryAdapters)
        {
            loggers.Add(f.GetLogger(name));
        }

        return new MultiLogger(loggers);
    }
} 
```

记录器

```
/// <summary>
/// Adapter hub for Common.Logging that can send logs to multiple other adapters
/// </summary>
public class MultiLogger : AbstractLogger
{
    private readonly List<ILog> Loggers;

    public static readonly IDictionary<LogLevel, Action<ILog, object, Exception>> LogActions = new Dictionary<LogLevel, Action<ILog, object, Exception>>()
    {
        { LogLevel.Debug, (logger, message, exception) => logger.Debug(message, exception) },
        { LogLevel.Error, (logger, message, exception) => logger.Error(message, exception) },
        { LogLevel.Fatal, (logger, message, exception) => logger.Fatal(message, exception) },
        { LogLevel.Info, (logger, message, exception) => logger.Info(message, exception) },
        { LogLevel.Trace, (logger, message, exception) => logger.Trace(message, exception) },
        { LogLevel.Warn, (logger, message, exception) => logger.Warn(message, exception) },
    };

    /// <summary>
    /// Initializes a new instance of the <see cref="MultiLogger"/> class.
    /// </summary>
    /// <param name="loggers">The loggers.</param>
    public MultiLogger(List<ILog> loggers)
    {
        Loggers = loggers;
    }

    public override bool IsDebugEnabled { get { return Loggers.Any(l => l.IsDebugEnabled); } }
    public override bool IsErrorEnabled { get { return Loggers.Any(l => l.IsErrorEnabled); } }
    public override bool IsFatalEnabled { get { return Loggers.Any(l => l.IsFatalEnabled); } }
    public override bool IsInfoEnabled { get { return Loggers.Any(l => l.IsInfoEnabled); } }
    public override bool IsTraceEnabled { get { return Loggers.Any(l => l.IsTraceEnabled); } }
    public override bool IsWarnEnabled { get { return Loggers.Any(l => l.IsWarnEnabled); } }

    protected override void WriteInternal(LogLevel level, object message, Exception exception)
    {
        List<Exception> exceptions = null;
        foreach(var logger in Loggers)
        {
            try
            {
                LogActions[level](logger, message, exception);
            }
            catch(Exception e)
            {
                if(exceptions == null)
                    exceptions = new List<Exception>();
                exceptions.Add(e);
            }
        }

        if(exceptions != null)
            throw new AggregateException("One or more exceptions occured while forwarding log message to multiple loggers", exceptions);
    }
} 
```

你可以像这样配置它：

```
<common>
  <logging>
    <factoryAdapter type="MultiLoggerFactoryAdapter, YourAssemblyName">
      <arg key="Log4Net.factoryAdapter" value="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net1213" />
      <arg key="Log4Net.configType" value="INLINE" />

      <arg key="Debug.factoryAdapter" value="Common.Logging.Simple.TraceLoggerFactoryAdapter, Common.Logging" />
    </factoryAdapter>
  </logging>
</common> 
```

也就是说，对于每个记录器，您添加一行 key `LoggerName.factoryAdapter`，然后您可以为该记录器添加属性，方法是为该键使用相同的名称，例如`LoggerName.someProperty`.

# sql - SQL - 链接信息

> ID：11362411
> 
> 赞同：-2
> 
> 时间：2012-07-06T12:41:41.113
> 
> 标签：sql

我有一个数据库表，程序即将更新。我在程序运行之前拍摄了表格的快照，然后拍摄了快照。以下是数据示例：

更新前：

```
JoinReference   User
1               User 1
1               User 2
1               User 3
2               User 4
2               User 5
2               User 6 
```

更新后：

```
JoinReference   User
3               User 1
3               User 2
3               User 3
4               User 4
4               User 5
5               User 6 
```

我正在尝试查找更新后未链接在一起的所有用户。例如，用户 1；用户 2 和用户 3 在更新前后链接（即使他们有不同的加入引用）。用户 4 和用户 5 更新后仍然链接。用户 6 更新后未链接。我正在尝试在更新后返回用户 6。我尝试过使用派生表，但没有奏效。

这是一个非常大的数据库。我给出的示例使用我编写的字段来解释问题。该示例的数据库结构如下所示：

CREATE TABLE JoinedUsers（JoinReference int，用户）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:48:12.437

你想要一些类似的东西

```
SELECT *
  FROM myTable
 WHERE (row_was_updated)
   AND JoinReference IN
       (SELECT JoinReference
          FROM myTable
         GROUP BY JoinReference
        HAVING COUNT(*) = 1) 
```

您可能需要也可能不需要，如果需要`WHERE (row_was_updated)`，您必须自己填写该逻辑。

可能会有一种更有效的方法来做到这一点，但如果没有模式，就只能提供一般指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:55:52.537

```
SELECT b1.user AS user1
     , b2.user AS user2
FROM BeforeTable AS b1                          --- user1 and
  JOIN BeforeTable AS b2                        --- user2 were linked
    ON  b1.JoinReference = b2.JoinReference     --- before the update
WHERE b1.user < b2.user
  AND NOT EXISTS                                --- and are not linked
      ( SELECT *
        FROM AfterTable AS a1                   --- after the update
          JOIN AfterTable AS a2
            ON  a1.JoinReference = a2.JoinReference 
        WHERE a1.user = b1.user
          AND a2.user = b2.user
      ) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:49:54.127

```
select     UnpairedBefore.userid
from 
           (select    main.*
           from       tableBefore main
           left join  tableBefore ref
           on         main.joinreference = ref.joinreference
           and        main.userid <> ref.userid
           where      ref.userid null) UnpairedBefore
inner join
           (select    main.*
           from       tableAfter main
           left join  tableAfter ref
           on         main.joinreference = ref.joinreference
           and        main.userid <> ref.userid
           where      ref.userid null) UnpairedAfter
on         UnpairedBefore.userid = UnpairedAfter.userid 
```

**或者**

```
select  [user]
from    tblBefore
where   JoinReference in 
    (
    select  JoinReference
    from    tblBefore
    group by    JoinReference
    having  COUNT(*) = 1
    )
and [user] in 
    (
    select  [user]
    from    tblAfter
    where   JoinReference in 
        (
        select  JoinReference
        from    tblAfter
        group by    JoinReference
        having  COUNT(*) = 1
        )
    ) 
```

# api - 是否有在 Google Play 开发者控制台上获取静态信息的 API？

> ID：11362412
> 
> 赞同：9
> 
> 时间：2012-07-06T12:41:42.977
> 
> 标签：api, statistics, google-play

是否有可以从 google play 获取应用程序统计信息的 api，例如：活动安装、Android 版本、设备、国家/地区……？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:53:46.293

这可能是您的起点： [http ://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

或者这个对于 PHP [https://github.com/splitfeed/android-market-api-php](https://github.com/splitfeed/android-market-api-php)

# c# - 将类型传递给未知的类库泛型方法 - 为什么它有效

> ID：11362414
> 
> 赞同：4
> 
> 时间：2012-07-06T12:41:52.993
> 
> 标签：c#, .net, visual-studio, generics

我正在开发具有大量可重用程序集的 C# .NET 解决方案。其中三个是：

*   一个 WinForms 程序集
*   一个 webclient 类库
*   包含数据模型类的程序集

我在类库中有一个通用方法，如下所示：

```
namespace Company.WebClient {
  public class GetData<T>()
  {
    ...
  }
} 
```

但是，当我从 WinForms 程序集中调用该方法时，我传入了一个类库不知道的类型，因为它包含在数据模型程序集中：

```
namespace Company.WinFormsApp {
  public class App 
  {
    public void Main()
    {
      Company.WebClient.GetData<TypeFromTheDataModel>();
    }
  }
} 
```

令人惊讶的是，它似乎有效。但为什么它会起作用？webclient 程序集没有对数据模型程序集的硬编码引用，所以我很惊讶它没有报告“找不到类型”或一些此类错误。这是一种安全的工作方式，还是我应该向我的项目添加更多引用（即从类库到数据模型）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:47:45.870

库不需要知道任何关于类型的信息——毕竟它没有尝试使用该类型的任何成员。在执行时`GetData` *可以*发现`T`- 但在编译时不需要。

试想一下 - 如果这*不起作用*，那么 LINQ to Objects 将完全被破坏，因为您只能将它用于系统类型的序列！

基本上，这样做是完全安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:48:24.137

基本上，这就是泛型的重点。**CLR**在运行时知道定义您要用于的类型的特定类`T`；并且您编写的代码`GetData`说明了如何处理 type 的对象`T`。**CLR**提供拼接，因此您不必考虑它。

请注意，在此示例中，您没有设置任何约束**（**`T`没有`where`子句）。这意味着您对 -type 对象所能做的`T`就是将它们视为`object`，这并不是那么有用。如果你限制他们，比如说，实现一个接口`IMoreInteresting`，那么库和调用者肯定都需要访问`IMoreInteresting`.

# c# - LINQ - 转列表 进入字典

> ID：11362415
> 
> 赞同：6
> 
> 时间：2012-07-06T12:41:55.187
> 
> 标签：c#, linq, dictionary, tuples

我只是在午餐时间做一个卡塔，我已经解开了……

这是我要遵循的步骤：

*   给定一个输入字符串，用换行符分割字符串
*   给定上一步的字符串数组结果，跳过数组中的第一个元素
*   给定上一步产生的字符串集合，创建一个由每 2 个元素组成的集合

在最后一个语句中，我的意思是，给定 4 个字符串的集合：

```
{
    "string1",
    "string2",
    "string3",
    "string4"
} 
```

我最终应该得到这个对集合（“元组”是正确的术语吗？）：

```
{
    { "string1","string2" },
    { "string3","string4" }
} 
```

我开始查看 ToDictionary，然后转到选择匿名类型，但我不确定如何说“将接下来的两个字符串作为一对返回”。

在撰写本文时，我的代码与此类似：

```
public void myMethod() {

    var splitInputString = input.Split('\n');

    var dic = splitInputString.Skip(1).Select( /* each two elements */ );
} 
```

为帮助干杯！

詹姆士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:44:13.703

好吧，您可以使用（未​​经测试）：

```
var dic = splitInputStream.Zip(splitInputStream.Skip(1),
                               (key, value) => new { key, value })
                          .Where((pair, index) => index % 2 == 0)
                          .ToDictionary(pair => pair.key, pair => pair.value); 
```

该`Zip`部分将结束：

```
{ "string1", "string2" }
{ "string2", "string3" }
{ "string3", "string4" } 
```

...并且`Where`使用索引的对将跳过所有其他条目（这将是“带有下一个键的值”）。

当然，如果你*真的*知道你有一个`List<string>`开始，你可以通过索引访问这些对，但这很*无聊*......

# android - 如何检查 etTexthb 对象的当前值

> ID：11362416
> 
> 赞同：0
> 
> 时间：2012-07-06T12:41:57.097
> 
> 标签：android

我正在使用两个`textWatcher`对象，它们被分配给两个`edittext`. 在我的 Android 应用程序中，当一个`editTextPer`可聚焦时，我调用这两种方法

```
editTextHb.removeTextChangedListener(etTexthb);
editTextPer.addTextChangedListener(etTextper); 
```

在这一点上，`etTexthb`价值`null`与否？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:48:02.077

您可以使用以下检查

```
if(etTexthb  == null) {
  // etTexthb  is null do needfull
}
else {
//etTexthb is not null
} 
```

# c# - 如何将任何文件夹更改投影到新文件夹并保持原始不变？

> ID：11362424
> 
> 赞同：2
> 
> 时间：2012-07-06T12:42:23.520
> 
> 标签：c#, .net, filesystems, directory

在我的程序中，我正在调用对文件夹内容进行大量更改的方法，包括：

```
deleting files/folders,
changing files/folders,
adding files/folders,
adding/deleting symboliclinks/junctions. 
```

到目前为止，这没有问题。但是我想出了将文件夹的最终状态（在所有操作完成后）选择性地投影到另一个文件夹的想法，以便原始文件夹保持不变。

仅在应用操作之前复制文件夹是不合适的，因为操作可能会删除大量数据，而这些数据必须事先进行不必要的复制。所以我想到，一个专业的程序员肯定不会这样处理它。

理想情况下，我会写这样的东西（伪代码）：

originalFolder.Delete（很多文件）.Add（其他一些东西，可能会更改一些权限等）.ProjectTo（newFolder）

是否有某种设计模式或其他方式可以实现这样的目标？也许一些虚拟文件系统我可以在将其具体化到单独的文件夹之前对其进行处理？

我知道如何编写扩展方法，并且我已经编写了很多琐碎的方法，但我真的需要走上正确的道路才能实现这样的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:02:14.433

如果添加和删除将通过您的 api 完成，那么您可以修改内存中的文件列表，而无需接触物理文件，并且当您设置好后，使用最终文件夹上的副本进行更改。

当然，这假设您不需要更改任何文件，因此您不需要在提交之前通过文件系统读取新结构，我的意思是它完全在您的应用程序中。

如果这是在 linux 上，我会建议另一种解决方案，即使用硬链接并将文件硬链接到许多文件夹，因此实际上对第一个文件夹执行任何您想要的操作，而无需触及第二个文件夹。我不确定 NTFS 是否支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:54:59.493

如果您只想延迟对原始文件夹的更改，直到您确定要提交它们，那么工作单元模式可能会解决问题。将要应用于文件夹的所有操作存储在容器中，然后按顺序提交。

不过，这听起来有点危险，因为在更改提交之前对原始文件夹的更改很容易搞砸。在这种情况下，您必须实施某种并发检查以尽可能确保所有操作都会成功。

# json - 记录私有 Web API

> ID：11362428
> 
> 赞同：1
> 
> 时间：2012-07-06T12:42:30.817
> 
> 标签：json, rest, asp.net-web-api, iodocs, swagger

我们为项目内部使用设置了一个 Web API。我正在寻找一种记录我们 API 的好方法。我已经在网上搜索并找到了

*   [IO 文档](https://github.com/mashery/iodocs/)
*   [昂首阔步](http://swagger.wordnik.com/)

这些工具读取可以自动创建的 JSON 文件，例如用于 Java。我们的 API 已经增长，我喜欢手动创建 JSON，而不是在文本编辑器中手动创建。是否有工具或前端可以减轻手动创建描述性 JSON 的负担？

另一方面，对于 Web API 的文档，有哪些值得推荐的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:20:37.883

我在 .NET (C#) 商店工作，我们使用 swagger 来记录我们的 api。我们找不到任何工具来满足您的要求……所以我们只是创建了自己的工具。我认为 swagger 还不够成熟，无法产生这样的公用事业项目……但是。

创建类来表示 swagger 文档描述的 json 对象并不难。我们只需获取这些实例化的类并通过 JSON 序列化程序运行它们，以获取描述端点的单独 json 文件。

祝你好运！

# javascript - 使用 CSS 或 JavaScript 更改背景图像一次

> ID：11362430
> 
> 赞同：3
> 
> 时间：2012-07-06T12:42:35.683
> 
> 标签：javascript, html, css

一位朋友要求我设置一个网页，其背景仅在单击任何链接时更改一次。我尝试了这个网站上给出的一些例子，并在谷歌上查看了一些例子，但它们几乎都是画廊式的周期性变化。也许我只是很沮丧，没有看到森林的树木......

页面是@mysite/julie 图片是@mysite/julie/images/blogbka.png 和/images/blogbk.png

我使用了下面的解决方案（[https://stackoverflow.com/a/11362465/1506620](https://stackoverflow.com/a/11362465/1506620)）

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:44:51.907

```
var is=true;
document.body.onclick = function( e ) {
    if ( e.target.tagName === 'A' ) {
if(is){
document.body.style.background='url(http://adultdave.co.uk/julie/images/blogbka.png)';is=false;}
}
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:58:55.373

我希望这是你想要的，即只改变一次图像。如果没有，请告诉我。

```
var ischange=true;
document.onclick=function(e){
if( e.target.tagName === 'A' &&ischange)
{
document.body.style.background='url(/*Image url*/)';
ischange=false;
}
} 
```

**[演示](http://jsfiddle.net/vy37j/5/)**

这里在每个页面加载时，变量 ischange 被初始化为 true，当点击任何链接时，背景会发生变化，并且 ischange 设置为 false，因此不允许再进行背景更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:22:34.337

一种方法是使用包装另一个函数的函数，仅在第一次调用时执行内部函数。这是一个相当通用的版本：

```
var once = function(fn, thisObj) {
    var called = false;
    var val;
    return function() {
        if (called) {return val;}
        called = true;
        val = fn.apply(thisObj || null, arguments);
        return val;
    };
}; 
```

然后你可以将你的 MooTools 事件监听器封装在一个调用中，`once()`并且知道它只会被调用一次。对于此类问题，这可能是一个相当优雅的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T13:29:09.910

我已经完成了使用 jQuery 单击每个链接时随机更改页面背景的垃圾箱。因此，请按照以下步骤操作：

1) 在标题中包含最新的 Jquery java 脚本文件。

2）HTML：

```
 <div>
  <p>
    When you click on following paragraph link, every time it will be changed random background of the page
  </p>

  <p>
    You have a present that was really memorable. It could have been given for an 
    <a href="#">
      important occasion
    </a>
    or just for no reason at all. Tell us about the present and why it was memorable. Include the reason it was given, a 
    <a href="#">
      description
    </a>
    of it, and how you felt when you got it.

    The objective is to write a 
    <a href="#">
      narrative essay
    </a>
    about this present you were given

    The subject is a 
    <a href="#">
      memorable present
    </a>
    The three main subtopics are:
    <ul>
      <li>
        <a href="#">
          the reason it was given
        </a>
      </li>
      <li>
        <a href="#">
          a description of it and
        </a>
      </li>
      <li>
        <a href="#">
          how you felt when you got it
        </a>
      </li>
  </ul>
</p>
</div> 
```

CSS：

```
body{
  background:url("http://www.freeppt.net/background/modern-pink-floral-backgrounds-for-powerpoint.jpg");
} 
```

查询：

```
var items = new Array();
items[0] = "http://www.publicdomainpictures.net/pictures/10000/nahled/abstract-orange-background-29541280675430Trj9.jpg";
items[1] = "http://www.psdgraphics.com/wp-content/uploads/2011/03/red-flowing-background.jpg";
items[2] = "http://www.dvd-ppt-slideshow.com/images/ppt-background/background-3.jpg";
items[3] = "http://www.purplebackgrounds.net/wp-content/uploads/2011/10/purple-heart-background-680x544.jpg";
items[4] = "http://www.freeppt.net/background/beautiful-on-green-backgrounds-for-powerpoint.jpg";

$(function() {
    var bg_img = '',
        last_bg = '';
    $("a").click(function() {
        bg_img = items[Math.floor(Math.random() * items.length)];
        if (last_bg == bg_img) bg_img = items[Math.floor(Math.random() * items.length)];
        last_bg = bg_img;
        $("body").css('backgroundImage', 'url(' + bg_img + ')');
    });
}); 
```

[在http://codebins.com/codes/home/4ldqpbc](http://codebins.com/codes/home/4ldqpbc)上试用 DEMO

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T13:30:47.350

正如我所看到的，您需要为用户的浏览器提供一个 cookie 来咀嚼并跟踪页面上所有锚标记的点击事件。您可以执行以下操作：

**模拟 HTML**

```
<ul id="ActionLinks">
    <li><a href="#" class="tracked-click">Click Me!</a></li>
    <li><a href="#" class="action-clear-cookie">Clear Cookie!</a></li>
</ul> 
```

**jQuery 代码**

```
<script type="text/javascript">
    $(document).ready(function () {
        // Array to store options 
    var settings = {
        getRadomImage: function () {
            //Update this with your different images.
            var items = [
                "http://adultdave.co.uk/julie/images/blogbka.png",
                "http://adultdave.co.uk/julie/images/blogbka.png",
                "http://adultdave.co.uk/julie/images/blogbka.png", 
            ];
            var img = items[Math.floor(Math.random() * items.length)];
            return img;
        },
        cookieName: "tracker",
        cookieOpts: { expires: 1} //cookie plug-in options
    }

    //Capture all tracked clicks
    $(".tracked-click").click(function (e) {
        //Check to see if there is a cookie for the user.
        if ($.cookie(settings.cookieName) != "true") {
            var img = document.createElement('img');
            img.src = settings.getRadomImage();
            //Load up the new image and show it once it's loaded.
            img.onload = function () {
                //Fade out the body and fade back 
                /*
                $("body").fadeOut(function() {
                $(this).css({ 'background-image': 'url(' + img.src + ')' }).fadeIn(4000);
                });
                */
                $("body").css({ 'background-image': 'url(' + img.src + ')' });

            };
            //Set the cookie for the client for tracking.
            $.cookie(settings.cookieName, true);
        }
    });

        //Action for clearing cookie.
        $(".action-clear-cookie").click(function () {
            $.cookie(settings.cookieName, null)
        });
    });
</script> 
```

**代码参考**

*   [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-06T12:46:10.753

设置一个 jQuery 脚本：

```
$("a").click(function(evt) {
  $('body').css("background-image", "url(/myimage.jpg)");
} 
```

如果您希望它在页面之间更改，请使用会话 cookie（我使用“更简单”的功能，请参阅（this）[http://jquery-howto.blogspot.fr/2010/09/jquery-cookies-getsetdelete-plugin .html] 例如）：

```
if (getCookie('isAlreadyVisited') == 1) {
   $('body').css("background-image", "url(/myimage.jpg)");
}
setCookie('isAlreadyVisited', 1); 
```

您还可以通过在服务器端设置 cookie 并为您的主体添加一个类来处理此问题，这会改变背景（您不会以这种方式获得 Unstyles 内容的 Flash）。

```
body {
   background-image: url(img1.jpg);
}

body.visited {
   background-image: url(img2.jpg);
} 
```

# java - Java 巨大的数据存储

> ID：11362432
> 
> 赞同：-1
> 
> 时间：2012-07-06T12:42:38.523
> 
> 标签：java

我需要在 Java/collection API 中存储大量数据。哪个适合该 Array 或 Arraylist。以及为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:50:41.190

`Arrays`是类型化的安全集合，一旦你创建它就不能增长或缩小，所以更好地使用`ArrayList`，但如果你知道集合是固定长度并且对象类型相同，那么你可以更喜欢`Array`。

`LinkedList`如果您经常修改您的收藏，您也可以使用。

这完全取决于您的要求和要存储的数据类型。

# database - 授予 db SYBASE 中所有表的权限

> ID：11362435
> 
> 赞同：3
> 
> 时间：2012-07-06T12:42:43.820
> 
> 标签：database, permissions, sybase

为这个问题道歉，但我在网上找不到正确的答案。我正在寻找授予对 db（tables、sps、sys 表）中所有对象的所有权限的查询。我尝试了将所有...授予 user_name 的多种组合，但找不到合适的短语。我正在研究 SYBASE。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T12:54:04.827

得到了答案：

```
select 'grant all on ' + name + ' to <user_name>' from sysobjects where type = 'U' or type = 'P'
go 
```

并使用查询输出为 db 中的所有表和 sps 授予所有必要的权限。如果你有更好的答案，请分享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-05T14:27:29.210

将选择任何表授予“user_name”；---适用于 SAP(Sybase) IQ

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:15:14.817

如果您是为高级用户执行此操作，您还可以将用户名别名为“dbo”

```
use DATABASE_NAME
go
sp_dropuser user_name
go
sp_addalias user_name,dbo
go 
```

# css - gwt 如何使用 setStyleName(String style, boolean add) - 用于 gwt 标准小部件

> ID：11362442
> 
> 赞同：0
> 
> 时间：2012-07-06T12:43:05.800
> 
> 标签：css, gwt, uibinder

我想在 GWT MenuBar 中设置/标记 MenuItem 的样式。所以我有一些逻辑可以为菜单项添加样式名称（逻辑工作正常）。

```
mItem.setStyleName("menuItemMarked", true); 
```

使用此设置 getStyleName 按预期产生“gwt-MenuItem menuItemMarked”。

但是如何在 css 中使用/应用这种样式（目前我将 css 放在 uibinder.xml 中）？（如您所见，我不是 CSS 专家）

更新：我试过的[是](http://webdesign.about.com/od/css/qt/tipcssmulticlas.htm)。

```
.menuItemMarked{background-color: yellow} 
```

这是行不通的。如果我调用“检查元素”（chrome）我可以看到“class =”gwt-MenuItem menuItemMarked”但我在应用样式列表中找不到样式“menuItemMarked”？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:10:49.373

你在哪里指定你的 CSS？

如果您的代码位于您的代码包中，那么它很可能被 GWT 编译器混淆了。这适用`<ui:style>`于文件中的块`.ui.xml`，以及`.css`ClientBundles 中包含的文件。

在这种情况下，您需要查看GWT 文档中的[Programmatic Access to Inline Styles](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Programmatic_access)。这将允许您将代码更改为：

```
mItem.setStyleName(style.menuItemMarked(), true); 
```

或者，您可以告诉 GWT 不要混淆某些 CSS 类。[这是对类似问题的详细回答](https://stackoverflow.com/a/9355640/770346)

* * *

最后，如果 GWT 没有触及您的 CSS 文件（它像其他文件一样从您的服务器提供），那么您需要确保您的文件正确地包含在您的页面中。您的浏览器的开发工具应该能够提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T02:08:53.613

确保在 CSS 中指定正确的选择器名称。在这种情况下，您需要具备以下条件：

```
.gwt-MenuItem.menuItemMarked {
    background-color: yellow;
} 
```

由于`gwt-MenuItem`仍然是列表中的第一个类名，因此它优先`background-color`于后续类中定义的任何样式（包括 ）。推翻这一点的唯一方法是使用更具体的选择器定义样式，如上面。查看[此链接](http://www.maxdesign.com.au/articles/multiple-classes/)以获取更详细的说明。

# jquery - 如何使用jqPagination

> ID：11362445
> 
> 赞同：3
> 
> 时间：2012-07-06T12:43:06.237
> 
> 标签：jquery, pagination, jquery-pagination, jqpagination

请帮助我，我不知道如何使用**jqPagination** ( [http://beneverard.github.com/jqPagination/](http://beneverard.github.com/jqPagination/) )。我会每个页面都有其他内容。例如，第 1 页，内容是一个段落，第 2 页是其他段落。而且我不想点击显示/隐藏来显示内容。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T08:00:06.207

对，我只能假设你有类似这样的代码：

```
<div class="some-container">
    <p>My first paragraph</p>
    <p>My second paragraph</p>
    <p>My third paragraph</p>
</div>

<div class="pagination">
    <a href="#" class="first" data-action="first">&laquo;</a>
    <a href="#" class="previous" data-action="previous">&lsaquo;</a>               
    <input type="text" readonly="readonly" />
    <a href="#" class="next" data-action="next">&rsaquo;</a>
    <a href="#" class="last" data-action="last">&raquo;</a>
</div> 
```

并且您想使用 jqPaginaton 按顺序显示/隐藏每个段落，请尝试以下代码：

```
$(document).ready(function() {

    // hide all but the first of our paragraphs
    $('.some-container p:not(:first)').hide();

    $('.pagination').jqPagination({
        max_page    : $('.some-container p').length,
        paged        : function(page) {

            // a new 'page' has been requested

            // hide all paragraphs
            $('.some-container p').hide();

            // but show the one we want
            $($('.some-container p')[page - 1]).show();

        }
    });

});​ 
```

看看这个[有效的 jsFiddle 示例](http://jsfiddle.net/beneverard/2HLZF/)，它演示了使用插件能够显示和隐藏一系列段落。当然，这个例子也可以扩展到其他元素/场景。

请务必评论这是否解决了您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:10:27.190

我正在使用 jPages。这工作正常。

只需给您的页面一个ID。并放置一个不需要此信息的 div。

在你的jQuery中，你可以添加这个：

```
$(".holder").jPages({
    containerID: "pageDivId",
    perPage: 3
}); 
```

持有者是您创建的新 div。而containerId 是你整个pagediv 的id。

[你可以在这里](http://luis-almeida.github.com/jPages/)查看 jPages

# css-position - 固定 div 框在左下角

> ID：11362453
> 
> 赞同：0
> 
> 时间：2012-07-06T12:43:38.310
> 
> 标签：css-position

我希望我的绿色 div 框位于页面左下角的固定位置。但它与左侧导航重叠。我希望绿色 div 框在左侧导航项结束后开始其固定位置。以下是我上传的代码。

[http://jsfiddle.net/awaises/remqf/](http://jsfiddle.net/awaises/remqf/)

它在大屏幕分辨率下工作正常，但在小分辨率下，绿色框与左侧导航重叠。是否有可能在导航结束后以 50 像素的间隙限制绿色框，当我们向下滚动页面时，它也固定在每个分辨率的左下角？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:52:59.647

你能通过添加一个顶部 50px 的边框来给人一种绿色框上方有间隙的印象吗？[http://jsfiddle.net/Y3qWu/](http://jsfiddle.net/Y3qWu/)

# android - 灰色应用程序图标拼图

> ID：11362458
> 
> 赞同：0
> 
> 时间：2012-07-06T12:44:04.123
> 
> 标签：android, process, icons

我使用这些代码将 RunningAppProcessInfo 的图标变灰，但会导致其他列表中的所有图标也变灰的副作用！支持？有什么解决办法吗？

```
 ImageView icon = (ImageView) view.findViewById(R.id.icon);
        if (_isChecked) {
            ColorMatrix cm = new ColorMatrix();
            cm.setSaturation(0);
            icon.setColorFilter(new ColorMatrixColorFilter(cm));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:50:41.820

如果您在这里谈论 ListView 或其他内容，请执行以下操作：

```
ImageView icon = (ImageView) view.findViewById(R.id.icon); 
if (_isChecked) { 
    ColorMatrix cm = new ColorMatrix(); 
    cm.setSaturation(0); 
    icon.setColorFilter(new ColorMatrixColorFilter(cm)); 
} 
else {
    // Reset saturation to normal here
} 
```

这样做的原因是视图在 ListView 中被重用以提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:36:19.130

是的，我按照你在 list1 中说的做了，但在 list2 中仍然有副作用： 事实：似乎所有 RunningAppProcessInfo 只共享同一个图标。

```
 if (_isChecked) {

            ColorMatrix cm = new ColorMatrix();
            cm.setSaturation(1);
            icon.setColorFilter(new ColorMatrixColorFilter(cm));

        } else {
            appName.setTextColor(Color.GRAY);
            whitelist_item_type_tv.setTextColor(Color.GRAY);

            ColorMatrix cm = new ColorMatrix();
            cm.setSaturation(0);
            icon.setColorFilter(new ColorMatrixColorFilter(cm));

        } 
```

# xml - 报告可变嵌套 XML 数据的位置

> ID：11362461
> 
> 赞同：3
> 
> 时间：2012-07-06T12:44:16.380
> 
> 标签：xml, perl, xml-parsing

我试图解析一个试图找到特定值的 XML 文件。这是 XML：

```
<?xml version="1.0"?>
<dump>
 <folder id="A0">
  <folder id="A1">
   <setting id="setting0">
    <sequence id="sequence0">
     <group name="info">
      <variable name="foo" value="15"/>
     </group>
    </sequence>
   </setting>
  </folder>
 </folder>
</dump> 
```

数据::Dumper 生产

```
$VAR1 = {
          'folder' => {
                      'id' => 'A0',
                      'folder' => {
                                  'setting' => {
                                               'sequence' => {
                                                             'group' => {
                                                                        'variable' => {
                                                                                      'value' => '15',
                                                                                      'name' => 'foo'
                                                                                    },
                                                                        'name' => 'info'
                                                                      },
                                                             'id' => 'sequence0'
                                                           },
                                               'id' => 'setting0'
                                             },
                                  'id' => 'A1'
                                }
                    }
        }; 
```

我的目标是一份报告，上面写着：“foo 在 A0/A1/setting0/sequence0 处的值为 15”。请注意，我想使用`id`s 将“面包屑”路径指向`foo`.

目前我在这个示例 XML 中访问值“15”

```
use strict;
use warnings;
use XML::Simple;

my $xml = new XML::Simple;
my $data = $xml -> XMLin('test1.xml');
print $data -> {folder}{folder}{setting}{sequence}{group}{variable}{value}; 
```

（但是，如果有多个 ，这将不起作用`<variable>`，并且会有......但这不是我的主要挑战......）

问题是 XML 将包含不可预测的`<folder>`s 嵌套，我不知道如何找到 a`<variable>`存在的位置`name="foo"`，因为我不知道它会有多深。将发生多个实例`foo`，但每个实例只有一个`sequence`。

最后一点是我只能访问 XML::Simple 和 XML::Parser！没有 SAX/Twig/LibXML 等。并且 XML 数据文件的大小可能高达 100MB。

所有这些现在听起来都相当复杂，所以我将重申我的目标：遍历 XML 以找到`<variable>`存在的任何地方，`name="foo"`并报告它`value`在树中的位置。感谢您对此的任何帮助。

* * *

**编辑：**使用下面的mirod方法，这是有效的：

```
use strict;
use warnings;
use Twig;

my $twig = new XML::Twig( 
                twig_handlers =>
                   { 'variable[@name="foo"]' => \&variable,
                     group => sub { $_->purge; }  }
                        );
$twig->parsefile( "test.xml");

sub variable
  { my( $t, $var)= @_;
    my $location= join '/', grep { $_ } map { $_->id } reverse $var->ancestors;
    print $var->att( 'name'), " has value ", $var->att( 'value'), " at $location\n";
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:42:15.323

有什么理由不能安装 XML::Twig？它是一个纯 Perl 模块（它依赖于您已安装的 XML::Parser），因此您始终可以像在代码目录中`Twig.pm`一样从发行版中复制文件，然后瞧。`myTwig.pm``use myTwig;`

那么代码就很简单了：

```
#!/usr/bin/perl

use myTwig;

XML::Twig->new( twig_handlers => { 'variable[@name="foo"]' => \&variable,
                                   # next line if you need to reduce memory footprint
                                   group => sub { $_->purge; }, 
                                 }
         ->parse( \*DATA); # replace with parsefile( 'my.xml') for the real data

sub variable
  { my( $t, $var)= @_;
    my $location= join '/', grep { $_ } map { $_->id } reverse $var->ancestors;
    print $var->att( 'name'), " has value ", $var->att( 'value'), " at $location\n";
  }

__DATA__
<?xml version="1.0"?>
<dump>
 <folder id="A0">
  <folder id="A1">
   <setting id="setting0">
    <sequence id="sequence0">
     <group name="info">
      <variable name="foo" value="15"/>
     </group>
    </sequence>
   </setting>
  </folder>
 </folder>
</dump> 
```

# arm - Keil arm startup.s 汇编代码

> ID：11362462
> 
> 赞同：0
> 
> 时间：2012-07-06T12:44:23.927
> 
> 标签：arm, keil

我试图理解 keil 启动汇编代码，因为它初始化最小硬件以使用 C 语言。我被困在这条线上：

```
 IF      PLL_SETUP <> 0 
```

上面那一行是什么意思？具体来说，`<>`符号？请有人帮我弄清楚这个组装说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:11:39.187

该行本身不是汇编，而是[控制指令](http://www.keil.com/support/man/docs/armasmref/armasmref_cacbjgdb.htm)。<> 表示[“不等于”](http://www.keil.com/support/man/docs/armasm/armasm_Cacbhgfh.htm)。因此，如果预处理器符号 PLL_SETUP 不为 0，则将以下块（直到 ELSE 或 ENDIF）传递给汇编器，否则将被跳过。

# c# - 在发布版本中反映堆栈跟踪是否危险？

> ID：11362468
> 
> 赞同：4
> 
> 时间：2012-07-06T12:44:58.933
> 
> 标签：c#, .net, clr

在 C# 中考虑以下语句：

```
string operation = new StackTrace(false).GetFrame(0).GetMethod().Name; 
```

这是发布版本中的危险构造，其中帧可能被编译为本机代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T12:47:34.690

不，这并不危险，但是您可能无法从没有调试符号的发布版本中获得所需的所有信息。[以下是来自MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)的一些信息：

> > StackTrace 信息将在 Debug 构建配置中提供最丰富的信息。默认情况下，Debug 版本包含调试符号，而 Release 版本不包含。调试符号包含用于构造 StackFrame 和 StackTrace 对象的大部分文件、方法名称、行号和列信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:07:45.047

CLR 对堆栈遍历提供了非常有力的保证。必然如此，它们对于使垃圾收集器和代码访问安全工作非常重要。但是，您不能指望 GetFrame(0) 为您提供方法的堆栈帧。内联代码是一个重要的抖动优化。至少在没有使用 [MethodImpl] 显式抑制优化的情况下，在您的方法上指定 MethodImplOptions.NoInlining。

堆栈遍历和优化抑制都很昂贵，因此请确保此代码不在您的关键路径上。

对此功能的编译器支持将添加到 C# 的下一个版本，即版本 5，带有[[CallerMemberName] 属性](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute%28v=vs.110%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:47:18.693

AFAIK 没有。

无论如何，一切都编译为 IL。方法将是已知的，您只需要一个 pdb 文件 - 即使您进行发布构建。

您可以在项目属性的高级选项中进行设置

![在此处输入图像描述](../Images/fd95eba48f5f0e4e4a4224ed5a3e86f5.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T04:52:00.507

感谢您的答复。

我的问题是我遇到了包含列出语句（访问冲突）的代码的零星崩溃，但是如果没有该语句，代码一直是稳定的。但由于这些回复，我似乎必须另辟蹊径。

# graphics - （流行的）网站上使用的 SVG 的任何示例？

> ID：11362475
> 
> 赞同：2
> 
> 时间：2012-07-06T12:45:24.487
> 
> 标签：graphics, svg

我正在为我正在开发的网站评估 SVG 的使用，我希望看到一些有效使用它的页面示例。我不是指“示例 SVG 页面”或特定部分（例如显示字符），而是指任何通过将 SVG 用于其部分或全部图形来传达良好图形体验的出色网站（不是专门关于 SVG），作为替代使用 PNG/GIF 等对其进行样式设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:46:12.703

这个问题实际上与编程无关，因此很可能会被关闭。无论如何，这里有几个例子：

*   [http://www.uefa.com/uefaeuro/season=2012/tournament-calendar/index.html](http://www.uefa.com/uefaeuro/season=2012/tournament-calendar/index.html)
*   [http://hitmo-studio.com](http://hitmo-studio.com)
*   [http://beta.visualize.yahoo.com/core/](http://beta.visualize.yahoo.com/core/)
*   [http://evolutionofweb.appspot.com/](http://evolutionofweb.appspot.com/)
*   [http://www.wheredidmytaxdollarsgo.com/](http://www.wheredidmytaxdollarsgo.com/)

# sql-server - 选择没有光标的列的总和

> ID：11362477
> 
> 赞同：6
> 
> 时间：2012-07-06T12:45:34.147
> 
> 标签：sql-server, stored-procedures, sql-server-2008-r2

我的数据如下：

```
ID   LENGTH_IN_CM
1        1.0
2        1.0
3        9.0
4        5.0
5        15.0
6        3.0
7        5.0 
```

我知道一页有 20 厘米长，并且想计算每个项目将在哪些页面上。

例如，id 为 1、2、3 和 4 的项目将位于第一页 (1.0 + 1.0 + 9.0 + 5.0 < 20.0)，但 5 和 6 将位于第二页，7 位于第三页。

是否可以在不使用光标的情况下计算页码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T13:37:38.127

好吧，我这样做更多是为了挑战，而不是因为我认为这是个好主意。我倾向于相信 Aaron 光标可能更合适。无论如何：

```
declare @Items table (ID int not null,LENGTH_IN_CM decimal(5,1) not null)
insert into @Items(ID,LENGTH_IN_CM) values
(1,1.0),
(2,1.0),
(3,9.0),
(4,5.0),
(5,15.0),
(6,3.0),
(7,6.0)

;With PossiblePages as (
    select ID as MinID,ID as MaxID,LENGTH_IN_CM as TotalLength from @Items
    union all
    select MinID,MaxID + 1,CONVERT(decimal(5,1),TotalLength + LENGTH_IN_CM)
    from
        PossiblePages pp
            inner join
        @Items it
            on
                pp.MaxID + 1 = it.ID
    where
        TotalLength + LENGTH_IN_CM <= 20.0
), LongPages as (
    select MinID,MAX(MaxID) as MaxID,MAX(TotalLength) as TotalLength from PossiblePages group by MinID
), FinalPages as (
    select MinID,MaxID,TotalLength from LongPages where MinID = 1
    union all
    select lp.MinID,lp.MaxID,lp.TotalLength
    from
        LongPages lp
            inner join
        FinalPages fp
            on
                lp.MinID = fp.MaxID + 1
), PageNumbers as (
    select MinID,MaxID,ROW_NUMBER() OVER (ORDER BY MinID) as PageNo
    from FinalPages
)
select * from PageNumbers 
```

结果：

```
MinID       MaxID       PageNo
----------- ----------- --------------------
1           4           1
5           6           2
7           7           3 
```

如果您想为每一行分配一个页码，这应该很容易加入到原始表中。

`PossiblePages`计算每个可能的页面 - 对于每一行，它就像该行是该页面上的第一行一样，然后计算出可以附加多少额外的行，以及该行范围代表的总长度（可能有更简洁的方法来计算这个表达式，目前不确定）。

`LongPages``PossiblePages`然后为每个起始行号找到计算的最长值。

最后，`FinalPages`从第一页开始（从逻辑上讲，它必须是从 1 开始的`ID`——如果你不能保证从 1 开始，你总是可以引入另一个计算，并且需要找到最早的）。然后，下一页是从比上一行高一个的行 ID 开始的页面。

你*不需要* `PageNumbers`，但正如我所说，我正在考虑加入原来的表。

* * *

正如评论者所预测的那样，我认为这不会很好 - 仅在样本上，我看到至少 4 个表扫描来计算它。

* * *

奖励精神错乱。这个只扫描表 3 次：

```
;With PageRows as (
    select ID as MinID,ID as MaxID,LENGTH_IN_CM as TotalLength from @Items where ID=1
    union all
    select MinID,MaxID + 1,CONVERT(decimal(5,1),TotalLength + LENGTH_IN_CM)
    from
        PageRows pr
            inner join
        @Items ir
            on
                pr.MaxID = ir.ID-1
    where
        TotalLength + LENGTH_IN_CM <= 20.0
    union all
    select ir.ID as MinID,ir.ID as MaxID,ir.LENGTH_IN_CM as TotalLength
    from
        PageRows pr
            inner join
        @Items ir
            on
                pr.MaxID = ir.ID-1
    where
        TotalLength + LENGTH_IN_CM > 20.0
), PageNumbers as (
    select MinID,MAX(MaxID) as MaxID,ROW_NUMBER() OVER (ORDER BY MinID) as PageNo
    from PageRows
    group by MinID
)
select * from PageNumbers 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:58:15.960

这也奏效了。告诉我为什么这些方法不能满足您的需求

```
declare @mytable as table(id int, LENGTH_IN_CM int)

insert into @mytable values
(1,1),
(2,1),
(3,9),
(4,5),
(5,15),
(6,3),
(7,6);

Select t.id ,
(select floor(SUM(LENGTH_IN_CM)/20.0)+1 page from @myTable  where id<=t.id) 
from @mytable t 

id          Page
----------- ---------------------------------------
1           1
2           1
3           1
4           1
5           2
6           2
7           3

(7 row(s) affected) 
```

# javascript - 使用 jquery 确定 height:auto 并将其应用于另一个 div

> ID：11362479
> 
> 赞同：0
> 
> 时间：2012-07-06T12:45:45.387
> 
> 标签：javascript, jquery

我在这个 div 上自动设置了高度：

```
div#new-menu-lower ul li ul li ul 
```

我需要一些 jquery 来将相同的高度应用于以下 div：

```
div#new-menu-lower ul li ul 
```

这甚至可能吗？如果你能演示一个很棒的例子。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T12:46:39.903

试试这个：

```
$('div#new-menu-lower ul li ul').height($('div#new-menu-lower ul li ul li ul').height()) 
```

看[演示](http://jsfiddle.net/antyrat/XJVmR/)

# java - 在哪里可以找到和了解编程问题的 COTS 解决方案？

> ID：11362480
> 
> 赞同：0
> 
> 时间：2012-07-06T12:45:46.343
> 
> 标签：java, projects-and-solutions, cots

我是一名高级 Java 程序员，我习惯于从头开始构建解决方案。不过，更多时候，我听到人们——经理、客户和其他程序员——建议我们寻找 COTS（现成商业）解决方案。

问题是，我知道编程，但我不知道哪些 COTS 解决方案可用或适用于我正在做的事情。

我的问题是，我应该如何最好地寻找“COTS”解决方案？是否有专门为程序员检查“COTS”解决方案的社区或网站，或者它只是像其他任何东西一样，你在谷歌上搜索现有产品并希望找到一个满足你需要的软件应用程序？

非常感谢任何帮助或建议！

谢谢，罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:52:11.903

关于使用 COTS 产品，我可以肯定地说的一件事是您必须有权访问 API 和文档。很多时候，人们会遇到为一个包支付 X 费用然后没有正确使用它的问题。另一种方法是开源，因为它是免费的，您可以根据需要对其进行修改。通常，您需要在谷歌上搜索您想要的细节，并且您可以找到类似产品的并排比较，但是这些应该与一粒盐一起使用。获取产品列表并在您的环境中设置测试平台，看看哪些产品最适合您当前的工具和程序，然后从那里开始。出于这个原因，供应商通常会为其软件提供 30-60 天的免费试用期。

# cakephp-2.1 - Cakephp 使用返回的数组值

> ID：11362488
> 
> 赞同：1
> 
> 时间：2012-07-06T12:46:17.390
> 
> 标签：cakephp-2.1

我想这应该很简单，但我已经坚持了一段时间，所以我需要帮助。我有一个 cakephp 应用程序，我得到以下数组：

```
chratSortedMean= array(
    'totalAucFourHour' => array(
        'Screening Visit-1 (scr)' => array(
            'MmttFourthHour' => array(
                'totalAucs' => array(
                    (int) 0 => (float) 0,
                    (int) 1 => (float) 220
                )
            )
        ),
        'Month12' => array(
            'MmttFourthHour' => array(
                'totalAucs' => array(
                    (int) 0 => (float) 263.25,
                    (int) 1 => (float) 16.25
                )
            )
        )
    ),
    'totalAucTwoHour' => array(
        'Day0' => array(
            'MmttSecondHour' => array(
                'totalAucs' => array(
                    (int) 0 => (float) 0,
                    (int) 1 => (float) 112.125
                )
            )
        ),
        'DayD2' => array(
            'MmttSecondHour' => array(
                'totalAucs' => array(
                    (int) 0 => (float) 97.375,
                    (int) 1 => (float) 4.5
                )
            )
        ),
        'Month3' => array(
            'MmttSecondHour' => array(
                'totalAucs' => array(
                    (int) 0 => (float) 8.53125,
                    (int) 1 => (float) 8.75
                )
            )
        )
    )
) 
```

我想分别为 totalAucFourHour 和 totalAucTwoHour 分别计算每个时间点（Screening Visit-1 (scr)、Month12、Day0 等）的 totalAucs 值的平均值。

所以我想要的结果有点如下形式：

```
'totalAucFourHour' => array(
        'Screening Visit-1 (scr)' => array(
            'MmttFourthHour' => array(
                'totalAucMean' => (float) 110
                )
            )
        ),
                'Month12' => array(
            'MmttFourthHour' => array(
                'totalAucMean' => (float) 139.75

                )
            )
        )
    ), 
```

等等。我不想使用多个 for 循环，因为我希望数据在未来会增长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T04:15:03.843

CakePHP 具有核心实用程序类，其中之一名为[Set](http://api20.cakephp.org/class/set)。Set 是数组操作类。您可以从应用程序的任何位置调用它：

```
Set::methodNane(); 
```

您需要的是[`extract();`](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set%3a%3aextract)or[`classicExtract();`](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set%3a%3aclassicExtract)方法。用法相当简单：

```
$Day0path = '/chratSortedMean/totalAucTwoHour/Day0/MmttSecondHour'
$arrayOfDay0s = Set::extract($Day0path, $data); 
```

检查[蛋糕书](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)上的其他可能性。此外，从 CakePHP 2.2 开始，有一个新的数组操作类[Hash](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html)，它更快。由于该版本 Set 实际上已被弃用，但[直到 Cake 3.0 才会被删除](http://bakery.cakephp.org/articles/lorenzo/2012/07/01/cakephp_2_2_and_2_1_4_released)。

# facebook-graph-api - 删除页面选项卡

> ID：11362496
> 
> 赞同：0
> 
> 时间：2012-07-06T12:47:15.290
> 
> 标签：facebook-graph-api, tabs, facebook-php-sdk, http-delete

当我尝试删除页面选项卡时，facebook 向我抛出一个错误。

```
$facebook->api('/PAGE_ID/tabs/TAB_ID', 'post', array(
    'method' => 'delete',
    'access_token' => PAGE_TOKEN
)); 
```

**致命错误：未捕获的 GraphMethodException：不支持的发布请求。**

* * *

```
$facebook->api('/PAGE_ID/tabs/TAB_ID', 'get', array(
    'method' => 'delete',
    'access_token' => PAGE_TOKEN
)); 
```

**致命错误：未捕获的 GraphMethodException：不支持的获取请求。**

* * *

```
$facebook->api('/PAGE_ID/tabs/TAB_ID', 'delete', array(
    'access_token' => PAGE_TOKEN
)); 
```

**致命错误：未捕获的 GraphMethodException：不支持的删除请求。**

* * *

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:49:35.843

它应该是一个 HTTP DELETE 请求。

将“post”更改为“delete”并删除不必要的“method => delete”或将“post”更改为“get”并保留“method => delete”

# eclipse - 将 perforce 项目从插件导入 eclipse

> ID：11362499
> 
> 赞同：1
> 
> 时间：2012-07-06T12:47:24.800
> 
> 标签：eclipse, plugins, perforce, eclipse-plugin

我正在尝试将一堆已经签出的 perforce 项目导入到 eclipse 中。它们都有必要的 .project 和 .classpath 文件。为此，我使用 psf 导入文件。我可以手动执行 File>Import>Team Project Set，在设置文件的位置后，perforce 插件就会启动，并完成所有艰苦的工作。

现在，我希望通过我自己的插件自动执行此操作。目前我的这个插件只动态创建一个临时的 psf 文件。

理想情况下，我想以某种方式将 psf 文件的位置传递给 perforce 插件，完全跳过“导入团队项目集”对话框，并使其导入项目。

或者，如果这被证明是不可能的，我希望能够从我的插件中打开“导入团队项目集”窗口，自动设置临时 psf 文件的位置，然后希望“点击”完成按钮，以便 perforce 插件可以再次启动，并为我完成工作。

这两天我一直在寻找解决方案。有没有人可以帮我解决这个问题？提前致谢。

# matlab - 如何在 MATLAB 中将 '1*1 char' 转换为逻辑向量？

> ID：11362504
> 
> 赞同：2
> 
> 时间：2012-07-06T12:47:36.543
> 
> 标签：matlab

实际上我正在尝试将十六进制转换为 bin。

```
a=hex2dec('ab32');  
a=dec2bin(a);
%now I have a 1to1 char array of for example 1010101...
%I want to have an 1*16 array of 1 and 0's 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T12:54:23.453

你可以这样做：

```
a=logical(a-'0') 
```

例子：

```
octave:224> a=hex2dec('ab32')
a =  43826
octave:225> a=dec2bin(a)
a = 1010101100110010
octave:226> a=logical(a-'0')
a =

   1   0   1   0   1   0   1   1   0   0   1   1   0   0   1   0

octave:227> whos a
Variables in the current scope:

   Attr Name        Size                     Bytes  Class
   ==== ====        ====                     =====  ===== 
        a           1x16                        16  logical

Total is 16 elements using 16 bytes

octave:228> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:57:52.203

这为您提供了一个 1*16 实数向量，全部为 0 或 1：

```
(dec2bin(hex2dec('ab32'))-'0') 
```

虽然这给了你一个 1*16 的逻辑向量，要么是假的要么是真的（看起来像 0 和 1）

```
(dec2bin(hex2dec('ab32'))-'0')==1 
```

# objective-c - Google Drive API - 目标 C - 示例？

> ID：11362505
> 
> 赞同：3
> 
> 时间：2012-07-06T12:47:39.767
> 
> 标签：objective-c, google-drive-api

我找不到任何使用 Objective-C 访问 Google Drive API 的代码示例。有谁知道在哪里可以找到一些？我已将 Google 客户端库合并到我的项目中，但我不知道如何从代码开始。

我对身份验证的工作方式特别感兴趣，因为重定向到授权 url，然后像您对 Web 应用程序所做的那样返回到应用程序，这似乎不适用于本机 iOS 应用程序。

谢谢！克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:57:39.647

对 Objective C 的支持[显然只处于 alpha 阶段](https://developers.google.com/drive/downloads)。

您可以在 google 代码上找到示例驱动应用程序：[http ://code.google.com/p/google-api-objectivec-client/source/browse/trunk/Examples/DriveSample/](http://code.google.com/p/google-api-objectivec-client/source/browse/trunk/Examples/DriveSample/)

对于身份验证，您使用 GTMOAuth2Authentication 和 OAuth 令牌，通常存储在钥匙串中：

```
// Load the OAuth token from the keychain, if it was previously saved
NSString *clientID = [clientIDField_ stringValue];
NSString *clientSecret = [clientSecretField_ stringValue];

GTMOAuth2Authentication *auth;
auth = [GTMOAuth2WindowController authForGoogleFromKeychainForName:kKeychainItemName
                                                          clientID:clientID
                                                      clientSecret:clientSecret]; 
```

# qt - QTableWidget cellClicked 信号不起作用

> ID：11362507
> 
> 赞同：0
> 
> 时间：2012-07-06T12:47:54.017
> 
> 标签：qt, qt-signals

我的应用程序中有一个 QTableWidget，并且我已将 cellClicked(int,int) 信号连接到一个插槽。但是当单击单元格时，插槽中的这段代码根本不会被调用。请让我知道如何解决这个问题。这是我的代码：

```
connect(ui.tableWidget, SIGNAL(cellClicked(x,y)), this, SLOT(myCellClicked(x,y))); 
```

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:58:11.733

`SIGNAL`and宏只处理类型名称，而`SLOT`不是变量名称，所以它应该是：

```
connect(ui.tableWidget, SIGNAL(cellClicked(int,int)), this, SLOT(myCellClicked(int,int))); 
```

# python - 在其他产品中为开发人员和用户分发 python 助手应用程序

> ID：11362508
> 
> 赞同：0
> 
> 时间：2012-07-06T12:47:54.813
> 
> 标签：python, distribution

主要产品有几个 python 脚本，可帮助用户和开发人员使用主要应用程序。

我想找到通过以下方式分发具有依赖关系的脚本的方法：

*   产品的开发人员应该只获取存储库的副本，构建它并获得可行的解决方案。没有root权限，不接受下载。
*   产品的用户应该得到一份 tar.gz 的副本，解压并使用。没有 root 访问权限，没有下载，没有额外的构建步骤可以接受。
*   产品的用户应该得到一个 rpm/deb 包，安装它，然后使用它。不接受额外下载。

所有python分发方式都需要运行额外的脚本（tar.gz被拒绝），然后经常下载依赖项。

因此，对于我的任务，我需要具有所有依赖项的 python-fabric。现在脚本是用标准的python库编写的，非常难看，我想把它切换到fabric。

如何正确支持所有这些要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:16:33.483

1.  `pip`可以从本地 tarball 安装。[您可以在需求文件](http://www.pip-installer.org/en/latest/requirements.html#requirements-files)中枚举它们；然后安装，从 virtualenv 中运行：

    ```
    pip install -r requirements.txt 
    ```

    如果依赖项中有 C 扩展，那么您的开发人员应该安装了编译器和 python 头文件。

2.  [PyInstaller](http://www.pyinstaller.org/)可以帮助您为用户捆绑二进制分发。如果没有 C 扩展；很容易创建包含所有依赖项的存档，以供手动使用。

3.  [pkgme](http://pkgme.net/)​​ 可能会帮助您为 Ubuntu 自动打包。您还可以使用[stdeb](http://pypi.python.org/pypi/stdeb)手动生成 .deb 文件。

有意义的`setup.py`描述依赖关系、脚本入口点等是上述所有内容的先决条件。

# html - 在 IE 中打印带有分页符的表格

> ID：11362510
> 
> 赞同：1
> 
> 时间：2012-07-06T12:48:02.690
> 
> 标签：html, css, internet-explorer, html-table, page-break

我有一个包含很多行的简单表格，我想在页面末尾的行之间自动插入分页符。默认情况下，这在 Firefox 中似乎可以正常工作，但 Internet Explorer (7-9) 不会破坏表格。如果表格对于一页来说太长，则表格的其余行会丢失。

所以我尝试以许多不同的方式使用 CSS 属性 page-break-* 来解决这个问题，但没有任何帮助。我发现[http://www.w3schools.com/cssref/pr_print_pagebb.asp](http://www.w3schools.com/cssref/pr_print_pagebb.asp)说

> “...避免在表格中出现分页属性...”

为什么这么说？我的表如下所示：

```
<table class="formatted tablesorter">
    <caption>Some caption</caption>
    <thead>
        <tr>
            <th rowspan="1" colspan="1">Header 1</th>
            <th rowspan="1" colspan="1">Header 2</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td rowspan="1" colspan="1">Value 1</td>
            <td rowspan="1" colspan="1">Value 2</td>
        </tr>
        <!-- many more rows... -->
    </tbody>
</table> 
```

有没有办法让分页符在 Internet Explorer 的表中工作？没关系，如果我不得不使用一些 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:38:26.290

桌子周围的元素有`overflow-x: auto; overflow-y: hidden;`。这就是为什么桌子没有破裂的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:07:07.530

IE 不支持该`avoid`值，因此在 Firefox 中可以正常工作，但 IE 不会显示相同的值。你有你正在使用的 CSS 的例子吗？

# python - 使用 scrapyd 部署项目时出错

> ID：11362511
> 
> 赞同：7
> 
> 时间：2012-07-06T12:48:04.683
> 
> 标签：python, scrapy, scrapyd

我的项目文件夹中有多个蜘蛛，并且想一次运行所有蜘蛛，所以我决定使用 scrapyd 服务运行它们。[我已经通过看到这里](http://scrapy.readthedocs.org/en/0.7/topics/scrapyd.html)开始这样做了

首先我在当前项目文件夹中

1.  我打开了`scrapy.cfg`文件并在之后取消了对 url 行的注释

    [部署]

2.  我有运行`scrapy server`命令，工作正常，scrapyd 服务器运行

3.  我试过这个命令`scrapy deploy -l`

    结果 ： `default http://localhost:6800/`

4.  当我尝试这个命令时，`scrapy deploy -L scrapyd`我得到了以下输出

结果：

```
Usage
=====
  scrapy deploy [options] [ [target] | -l | -L <target> ]

deploy: error: Unknown target: scrapyd 
```

当我尝试使用此命令部署项目时`scrapy deploy scrapyd -p default`出现以下错误

```
Usage
=====
  scrapy deploy [options] [ [target] | -l | -L <target> ]

deploy: error: Unknown target: scrapyd 
```

我真的无法识别乳清 scrapyd 是否显示上述错误，可以引导我找到如何将项目部署到 scrapyd 的正确方法

提前致谢..........

**编辑代码**：

在看到 Peter Kirby 的回答后，我在 scrapy.cfg 中命名了 target 并在我的项目文件夹中尝试了以下命令，

**命令**：

```
scrapy deploy ebsite -p ebsite 
```

然后我收到以下错误

```
Building egg of ebsite-1341808241
'build/lib' does not exist -- can't clean it
'build/bdist.linux-x86_64' does not exist -- can't clean it
'build/scripts-2.7' does not exist -- can't clean it
zip_safe flag not set; analyzing archive contents...
Deploying ebsite-1341808241 to http://localhost:6800/addversion.json
Deploy failed: <urlopen error [Errno 111] Connection refused> 
```

这个怎么解决。。。。。。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T05:28:23.770

来自 scrapyd 服务文档：（http://scrapy.readthedocs.org/en/latest/topics/scrapyd.html?highlight=scrapyd）

> 您可以通过将目标添加到项目的 scrapy.cfg 文件中来定义目标...这是一个通过 HTTP 基本身份验证定义访问受限的新目标 scrapyd2 的示例：

```
[deploy:scrapyd2]
url = http://scrapyd.mydomain.com/api/scrapyd/
username = john
password = secret 
```

本质上，您的错误意味着您的“目标”名称不正确。如果我没记错的话，scrapy.cfg 文件将初始目标名称设置为“默认”。您应该输入的内容类似于：

```
scrapy deploy default -p project_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:20:21.777

`scrapy deploy`如果您没有命名目标并保留默认设置，只需键入！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:38:33.500

这是scrapyd proc没有权限！您需要杀死 proc，然后使用 root 用户，只需键入：

```
scrapy server 
```

然后新的scrapyd将运行。然后你可以按照[scrapyd文档](http://doc.scrapy.org/en/0.16/topics/scrapyd.html)所说的那样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-29T04:15:43.827

当我尝试在没有运行scrapyd的情况下部署我的项目时出现此错误，所以运行简单

```
scrapyd 
```

在另一个终端上修复了错误

# java - 从生产者到消费者的可靠文件传递

> ID：11362513
> 
> 赞同：1
> 
> 时间：2012-07-06T12:48:16.280
> 
> 标签：java, file-io, ext3

我有两个独立的 Java 进程，一个生产者和一个消费者，它们的行为如下：

制片人：

```
write data file
close data file
write hash file
close hash file 
```

消费者：

```
wait until hash file exists
read data file
act on data file
close data file
delete data file
delete hash file 
```

此代码仅使用哈希文件来表示数据文件已完成。此处未验证哈希值。在正常负载下，应该每 3 秒切换一次。在非常重的负载下，速率可能会增加到每 100 ms 一次切换。文件系统是 ext3，data=ordered。

如何确保消费者永远不会看到不完整的文件？

一种选择是根据散列验证数据文件的内容，但这似乎不必要地昂贵。我考虑过使用`java.nio.channels.FileLock`，但我担心它不会消除对哈希检查的需要，因为如果生产者崩溃，即使文件可能仍然不完整，操作系统也会释放其所有锁。这实际上很可能会产生不完整的文件。也许一个锁加上一个消费者仍在运行的检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:00:12.780

生产者可以在开始新文件之前关闭文件。

消费者可以在开始前一个文件之前等待下一个文件。

# java - 带有竖线的 Java 正则表达式

> ID：11362518
> 
> 赞同：1
> 
> 时间：2012-07-06T12:48:33.873
> 
> 标签：java, regex

我想知道以下正则表达式是否返回错误。我看不到“|” 不应该匹配。有任何想法吗？以及如何让模式匹配“|”？

```
Pattern pattern = Pattern.compile("([^\\*|\\\\|\\{|\\}|\\[|\\]|=|>|<])*");
boolean valid = pattern.matcher("|").matches(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:54:37.757

该`[^ ]`表达式匹配任何不在括号中的字符。由于`|`在括号中，因此不匹配。所有字符（除了少数字符，比如`\`和`]`）都在`[^ ]`表达式中按字面意思表示。

我想你的意思是这样说的：

```
([^*\\{}[\]=><])* 
```

这匹配除了这些字符之外的任何内容：

```
*\{}[]=>< 
```

要将其放入字符串中，您可以这样做：

```
"([^*\\\\{}[\\]=><])*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:54:43.517

我认为您误解了正则表达式中字符类的概念：`[^...]`将所有字符`^`视为普通字符，而不是*元字符*。因此，您不需要`|`类内的“OR”管道。

由于`|`存在于字符类中，并且由于您`^`用于反转集合，因此您的正则表达式不匹配单个管道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:25:41.420

这个打印`true`：

```
 System.out.println(Pattern
            .compile("([\\||^\\*|\\||\\{|\\}|\\[|\\]|=|>|<])*")
            .matcher("|")
            .matches()); 
```

但是其他地方的*管道查找器* `\\||`（代替`\\\\|`）不起作用。

Kendall Frey 向您解释如何`^`扰乱您的正则表达式

# visual-studio-2010 - 在 Visual Studio 设置项目中将连接字符串作为参数添加到 setup.msi

> ID：11362524
> 
> 赞同：1
> 
> 时间：2012-07-06T12:48:46.943
> 
> 标签：visual-studio-2010, windows-installer, custom-action

我有一种情况将连接字符串作为参数传递给 msi 文件，以便安装程序选择它并替换 .exe.config 文件中的连接字符串。

通过使用自定义操作来做同样的事情，我可以轻松地实现这一点。但我不想使用它，因为我有一些不使用它们的限制。那么是否可以在不使用自定义操作的情况下进行此类操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:08:39.477

Windows Installer 中没有任何用于转换 XML 文件的本机支持。您必须使用某种自定义操作或删除安装程序执行更新的要求。

在仍然使用（主要）Visual Studio 设置和部署项目的同时，最简洁的方法是编写一个 WiX 合并模块来封装 XML 更改部分并在安装程序中使用该模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:53:11.240

您好，您对我在几个项目上所做的没有任何限制。我所做的是我还在环境变量（其他解决方案）上索引我的连接，以避免部署多个版本的软件。

# java - 在 powermock 中模拟具有可能 null 值的方法

> ID：11362525
> 
> 赞同：0
> 
> 时间：2012-07-06T12:48:51.863
> 
> 标签：java, junit, tdd, mockito, powermock

我有一个方法，它作为操作的一部分执行以下操作：

```
URL resourceUrl = new File(sampleString1.concat("/")
                .concat(sampleString2)).toURI().toURL(); 
```

SampleString1 和 SampleString2 由类的构造函数填充，该类是一个抽象类。我使用下面的行来测试这个类：

```
servlet = PowerMockito.mock(MyServlet.class, Mockito.CALLS_REAL_METHODS); 
```

通过这个，我无法设置属性 sampleString1 和 sampleString2 的值，因为我没有将它们传递给构造函数。现在，当我在 servlet 中调用我的测试方法时，由于 sampleString1 和 sampleString2 的值为空，我在上述行中得到 NullPointerExceptions。我尝试通过以下方式模拟该部分：

```
 PowerMockito.whenNew(File.class).withParameterTypes(String.class).
                     withArguments(Matchers.anyString()).thenReturn(sampleFile); 
```

但是当新文件调用完成并引发异常时，它仍然会通过字符串连接。我该如何测试这种方法？我只想在调用新文件操作时返回 resourceUrl 的示例值，并继续执行方法中的逻辑并测试输出。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:27:58.637

您可以使用在以下位置记录的 Whitebox API：

*   [http://code.google.com/p/powermock/wiki/BypassEncapsulation](http://code.google.com/p/powermock/wiki/BypassEncapsulation)
*   [http://powermock.googlecode.com/svn/docs/powermock-1.4.12/apidocs/org/powermock/reflect/Whitebox.html](http://powermock.googlecode.com/svn/docs/powermock-1.4.12/apidocs/org/powermock/reflect/Whitebox.html)

它使用反射来设置对象的值，如下所示：

```
MyServlet servlet = PowerMockito.mock(MyServlet.class, Mockito.CALLS_REAL_METHODS);
Whitebox.setInternalState(servlet, "sampleString1", "foo");
Whitebox.setInternalState(servlet, "sampleString2", "bar");
//Test code... 
```

# php - 银行链接的签名创建问题

> ID：11362530
> 
> 赞同：0
> 
> 时间：2012-07-06T12:49:07.573
> 
> 标签：php, openssl

我被困在完成银行链接中，我得到回应，我的签名是错误的。

这是银行寄来的签名部分手册

> 数字签名 MAC 是 XML 数据哈希值，使用发送者私钥加密。
> 哈希值计算使用 SHA-1 算法，但签名计算使用 RSA 算法。数字签名使用 BASE64 编码转换为文本格式并放置在 MAC 字段中。

我已经建立了什么：

```
// the key is loaded succesfull
private function setPrivateKey ( $key_name ) {
  $fp = fopen( $this -> getKeyLocation() . '/' . $key_name, "r" );
  $priv_key = fread( $fp, 8192 );
  fclose( $fp );
  $this -> private_key = openssl_get_privatekey( $priv_key );
}

// signature is created, but not the way bank expects it
private function setSignature () {
  // also tried sha1( $data, true );
  // signature contains no special chars ( meaning no UTF8 specific coding )
  $pre_mac = sha1( $this -> getXMLData() );
  openssl_sign( $pre_mac, $signature, $this -> getPrivateKey() );
  $this -> signature = $signature;
}

// can't be a problem here
private function setMac () {
  $this -> mac = base64_encode( $this -> getSignature() );
}

// this is set correctly
private function setXMLData () {
    $bank_xml = '<?xml version="1.0" ?>
    <bl>
    <snd>PHP_COMPANY</snd>
    <query>NEW</query>
    <type>PHP_TYPE</type>
    <data>
        <client_id>A71045</client_id>
        <amount>PHP_AMOUNT</amount>
        <ccy_name>PHP_CURR</ccy_name>
        <ccy_code>1</ccy_code>
        <bnf_name>PHP_COMPANY</bnf_name>
        <bnf_account>PHP_ACCOUNT</bnf_account>
        <bnf_id>PHP_CID</bnf_id>
        <residence_id>LV</residence_id>
        <residence_name>LV-LATVIA</residence_name>
        <details>PHP_DETAILS</details>
    </data>
    <date>PHP_DATE</date>
    <time>PHP_TIME</time>
    <reply>
        <session_id>PHP_SESSION</session_id>
    </reply>
    <reply_url>PHP_REPLY</reply_url>
    </bl>';

    $this -> bank_xml = $bank_xml;
} 
```

在我看来，我没有正确加密它。有什么建议可能是错的吗？我相信我已经完成了银行要求的每一步。

我已经把这个寄给银行了，但他们会在一周左右的时间内回复。

PS：get 函数都设置了返回 set 变量，我只是认为没有必要发布它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:46:10.060

好的，解决了问题。银行手册似乎不正确（尽管仍在等待银行的答复）。

将 sha1 替换为 md5 并全部生效。

```
$pre_mac = md5( $this -> getXMLData() ); 
```

[谢谢raina77ow](https://stackoverflow.com/users/1229023/raina77ow)，您的评论为我指明了正确的方向：

> 您是否尝试完全省略该中间散列？

# android - 使用 Android 的谷歌云消息 (GCM) 基础知识

> ID：11362533
> 
> 赞同：0
> 
> 时间：2012-07-06T12:49:17.623
> 
> 标签：android, google-cloud-messaging

我想使用 GCM 制作一个聊天应用程序。实际上我是使用 GCM 的新手。我已经阅读了 GCM 的官方文档。如果有人可以使用基本代码解释我，我需要知道如何通过服务器发送和接收数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:32:45.177

实际上 api 已经从上一个改变了，下面的链接会帮助你..

[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

# android - Android：如何在 SAX Parser 中解析相同的标签？

> ID：11362534
> 
> 赞同：1
> 
> 时间：2012-07-06T12:49:32.270
> 
> 标签：android, web-services, parsing, xml-parsing, saxparser

我正在尝试从 Web 服务解析和获取值。问题是 Web 服务具有相同的元素名称标签，这些标签正在创建要解析的问题，因为我想获取它们的值但它们具有相同的名称所以我很难将它们作为本地名称提及。

```
 <countryBean>
        <id>236</id>
        <name>United State</name>
    </countryBean>
    <secutiryQuestion1>
        <id>2</id>
        <question>What was your dream job as a child?</question>
    </secutiryQuestion1>
    <secutiryQuestion2>
        <id>4</id>
        <question>What is the name, breed, and color of your pet?</question>
    </secutiryQuestion2>
    <stateBean>
        <country>236</country>
        <id>5</id>
        <name>California</name>
    </stateBean>
    <statusBean>
        <id>1</id>
        <name>Active</name>
    </statusBean> 
```

我想在不同的变量中获取 ID 标签和其他相邻标签（如名称、问题）的值。这里有 5 个 ID 标签。

我的课程代码就像

```
public class XmlParser extends DefaultHandler {

        public RestfullResponse tempResponse = null;
        String currentValue = null;
        int ServiceType =0;

        @Override
        public void startElement(String uri, String localName, String qName,
                Attributes attributes) throws SAXException {
            if(localName.equalsIgnoreCase("countryBean")){
                tempResponse=new RestfullResponse();

                }           

        }

        /* (non-Javadoc)
         * @see org.xml.sax.helpers.DefaultHandler#endElement(java.lang.String, java.lang.String, java.lang.String)
         */
        @Override
        public void endElement(String uri, String localName, String qName)
                throws SAXException {
            if(ServiceType == 1)
            {
                if(localName.equalsIgnoreCase("id")){
                    tempResponse.setCountryId(currentValue);
                }
                if(localName.equalsIgnoreCase("name")){
                    tempResponse.setCountryName(currentValue);
                }

                if(localName.equalsIgnoreCase("id")){
                    tempResponse.setStateId(currentValue);
                }
                if(localName.equalsIgnoreCase("question")){
                    tempResponse.setstateBean(currentValue);
                }

                if(localName.equalsIgnoreCase("Id")){
                    tempResponse.setStatusId(currentValue);
                }
                if(localName.equalsIgnoreCase("requestSuccess")){
                    tempResponse.setStatus(currentValue);
                }
            }
        }

        @Override
        public void characters(char[] ch, int start, int length)
                throws SAXException {
            currentValue = new String(ch, start, length);
        }

        public RestfullResponse getResponse(){
            return tempResponse;
        }
} 
```

请帮助将它们存储在

```
String CountryName= "";
String CountryId = "";
String Statename = "";
String StateId ="";
String Status = "";
String StatusId = "";
String Username ="";
String SecurityQuestion = "";
String SecurityQuestionId = ""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:53:10.563

添加布尔变量isCountryBean；

```
boolean isCountryBean = false , isSecurityQuestion1 = false; 
```

在 startElement(....) 中写：

```
if(localName.equalsIgnoreCase("countryBean")){
    isCountryBean = true;
    // other stuff
} else if (localName.equalsIgnoreCase("secutiryQuestion1")){
    isSecurityQuestion1 = true;
    isCountryBean = false;
} 
```

在 endElement(...) 检查：

```
if(localName.equalsIgnoreCase("id")){
    if(isCountryBean){
        tempResponse.setCountryId(currentValue); 
     }
}
if(localName.equalsIgnoreCase("name")){
    if(isCountryBean){
        isCountryBean = false;
        tempResponse.setCountryName(currentValue);

     }
} 
```

为其他最外向的标签执行此操作。希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:15:48.707

您需要维护`stack of root nodes`.

取一个类型的变量`String root`并维护一个`stack of root element`.

**内部 startElement 方法：**

```
public void startElement(String namespaceURI, String localName, String qName, Attributes atts) throws SAXException,
            IllegalArgumentException
{

   // call to abstract method
   onStartElement(namespaceURI, localName, qName, atts);

   // Keep the trace of the root nodes
   if (root.length() > 0)
   {
    root= root.concat(",");
   }
   root= root.concat(localName);
} 
```

**内部 endElement 方法：**

```
public void endElement(String namespaceURI, String localName, String qName) throws SAXException
{
   // remove the end element from stack of root elements
   int index = root.lastIndexOf(',');
   if (index > 0)
   {
    root= root.substring(0, index);
   }
   onEndElement(namespaceURI, localName, qName);
} 
```

# java - 从流中读取 PNG 文件

> ID：11362535
> 
> 赞同：2
> 
> 时间：2012-07-06T12:49:32.503
> 
> 标签：java, android

我试图在服务器端为 android mobile.so 构建 RDP 应用程序，我正在发送带有机器人类的 png 图像，但在客户端我无法读取该消息并将它们打印在我的 android 设备上。

我正在使用以下代码读取 JPEG 文件正文数据，并且能够显示这些图像

```
InputStream in = sock.getInputStream();
while(true)
{
byte[] bytes = new byte[1024*1024];
int count = 0;
do
{
count+= in.read(bytes,count,bytes.length-count);
}
while(!(count>4&&bytes[count-2]==(byte)-1 && bytes[count-1]==(byte)-39));

} 
```

任何人都可以帮助我如何从输入流中读取 png 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:01:11.747

尝试这个

```
 BufferedInputStream in = new BufferedInputStream(sock.getInputStream()); 
 BufferedImage image = ImageIO.read(in); 
```

# java - 如何将 Eclipse RCP 插件 JAR 转换为插件目录，反之亦然？

> ID：11362541
> 
> 赞同：0
> 
> 时间：2012-07-06T12:49:46.497
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, rcp

我拥有的是一个 RCP 应用程序，以及其中的一个插件目录：

```
my-rcp-app/
  ...
  plugins/
    ...
    com.mycompany.myproduct.ui_1.0.1/
      com/
      META-INF/
      plugin.xml 
```

然后我制作了一个与插件目录内容相同的 JAR `com.mycompany.myproduct.ui_1.0.1.jar`，并将其放入`plugins/`而不是`com.mycompany.myproduct.ui_1.0.1`文件夹中。

令人惊讶的是，该应用程序没有启动。这是来自日志：

```
 !SUBENTRY 2 com.mycompany.root.bundle 2 0 2012-07-05 20:01:17.511
 !MESSAGE Missing required bundle com.mycompany.myproduct.ui_1.0.1. 
```

所以，这里有两个问题：

1.  如果我有一个包含类、配置等的目录，如何在 JAR 中部署插件。
2.  将 JAR 解压到插件中是否足以让应用程序继续工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:25:32.450

1.  从清单编辑器的主页，您可以打开一个导出向导。它将创建一个包含您的插件的 jar 文件。如果要指定应导出哪些文件，请转到清单编辑器中的构建选项卡。

2.  无论您的插件是解压缩的还是在 Jar 文件中，这都无关紧要。Equinox 能够处理这两种情况。请注意，如果您不想通过 Eclipse 更新站点机制管理插件，建议使用 dropins 文件夹而不是 plugins 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:57:07.640

正如@TobiasWillig 已经指出的那样，插件目录和 JAR 确实是完全可以互换的。

但在这种特定情况下，我必须编辑`configuration/org.eclipse.equinox.simpleconfigurator/bundles.info`文件，替换

```
com.mycompany.myproduct.ui,1.0.1,plugins/com.mycompany.myproduct.ui_1.0.1/,4,false 
```

与

```
com.mycompany.myproduct.ui,1.0.1,plugins/com.mycompany.myproduct.ui_1.0.1.jar,4,false 
```

即，需要手动指定插件的路径。

# java - IMAP IDLE 库

> ID：11362542
> 
> 赞同：4
> 
> 时间：2012-07-06T12:49:46.763
> 
> 标签：java, email, imap, hmail-server

我正在寻找一个可以帮助我使用 IMAP 并且最好是 IDLE 的 Java 库。

我需要编写一个 Java 应用程序，使用 SSL 通知并检索新电子邮件。该应用程序将检查由 hMailServer 托管的帐户的收件箱。

到目前为止，我已经看过：

[Apache Commons Imap](http://commons.apache.org/net/api-3.1/org/apache/commons/net/imap/package-summary.html)但它似乎没有实现 IDLE。

[JavaPushMail](https://github.com/mofirouz/JavaPushMail)，但它没有足够的文档记录（我也许可以解决它，但我不确定我的继任者会不会很高兴）。

[Javamail](http://www.oracle.com/technetwork/java/javamail/index.html)，他们的 IMAPFolder 似乎是一个不错的选择，但我的时间很短，为此编写一个稳定的库需要时间。

[Chilkatsoft](http://www.chilkatsoft.com/java-imap.asp)是一个 199 美元的库，它有点贵（我知道，免费且可靠的代码总是很容易获得 :) 另外，我不确定它是否能处理 IDLE。

如果记录在案且稳定，我可以寻求一个轮询收件箱的解决方案。

我会很感激一些示例代码、一个库或朝着正确的方向推进。

对不起所有的“我”，并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T07:11:40.773

我继续使用[Javamail](http://www.oracle.com/technetwork/java/javamail/index.html)。只是觉得奇怪的是还没有为它编写好的包装器/客户端。好吧，不能拥有一切。感谢您的回答，康纳·谢尔曼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T13:53:43.913

除了 Javamail，我没有使用过您提到的任何库，但我可以保证。我必须编写一个应用程序来轮询交换服务器并解析收件箱中的所有新邮件。这是该项目中使用的代码片段。我在应用程序内进行了所有投票，所以我没有查看来自服务器或任何东西的推送通知。我知道这不正是您所要求的，但我希望这是朝着正确方向迈出的一步。

```
import java.util.Properties;
import javax.mail.*
import javax.mail.search.FlagTerm;

public class Driver {
    public static void main(String[] args){
        // Create properties (disable security checks on server)
        Properties props = new Properties();
        props.put("mail.imaps.ssl.checkserveridentity", "false");
        props.put("mail.imaps.ssl.trust", "*");

        // Get session
        Session session = Session.getDefaultInstance(props, null);

        try{
            // Get the store
            Store store = session.getStore("imaps");
            store.connect("servername", "username", "password");

            //connection configuration
            Folder folder = store.getFolder("INBOX");
            folder.open(Folder.READ_WRITE);

            //get all unread messages in the inbox
            FlagTerm ft = new FlagTerm(new Flags(Flags.Flag.SEEN), false); 
            Message[] messages = folder.search(ft);

            for (int i = messages.length -1; i>=0; i--) {
                messages[i].setFlag(Flags.Flag.SEEN, true);
            }
            // Close connection 
            folder.close(false);
            store.close();
        }
        catch(Exception e){
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-05T20:39:01.280

我自己没有使用过，但是这个库看起来不错：

[https://github.com/MailCore/mailcore2](https://github.com/MailCore/mailcore2)

> MailCore 2 提供了一个简单的异步 API 来处理电子邮件协议 IMAP、POP 和 SMTP。API 已从头开始重新设计。

# c++ - 多次使用相同的 C++ 访问说明符

> ID：11362543
> 
> 赞同：4
> 
> 时间：2012-07-06T12:49:48.620
> 
> 标签：c++

当下一行就在它的正下方或它下面的几行时，一遍又一遍地声明多个“公共”说明符的目的是什么。当代码修改某些标识符的属性时，我可以理解这是要求，即隐藏在宏中的那些（因此更改宏中的访问属性，因此我们需要从宏中“重新定义”），或者当我们每个访问说明符部分有许多标识符时。但是一遍又一遍地使用“public”，“public”的目的是什么？

代码 ...

```
class CDrawMFCView : public CView
{
protected: // create from serialization only
    CDrawMFCView();
    DECLARE_DYNCREATE(CDrawMFCView)

// Attributes
public:
    CDrawMFCDoc* GetDocument() const;

// Operations
public:

// Overrides
public:
    virtual void OnDraw(CDC* pDC);  // overridden to draw this view
    virtual BOOL PreCreateWindow(CREATESTRUCT& cs);
protected:
  // etc.,

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:59:25.247

对于初学者来说，现在不需要代码，因为代码部分可能：

*   变得更长
*   被剪切和粘贴到不同的顺序，甚至到不同的类，或复制到一个新的类
*   让某些部分更改访问说明符而不改变前面或后面的部分

如果您依赖与前一部分具有相同访问规范的部分，那么您（或您，从现在起六个月后，或其他人）经常会在代码更改时忘记更改它，然后代码就会出错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T12:52:53.113

在查看具有比屏幕上的行更多的方法的类时，它可能很有用，所以你只需看看，说

```
...
void f();
void g();
void h();
... 
```

通过重复`public:`几次，您可以提醒人们所有这些都是公共的（当然，终端中的方法多于行意味着您的终端有点小或类太大）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T14:20:44.553

只有一个*正式*的原因：访问说明符之间的数据成员在内存中按顺序排列，但访问说明符之间的数据成员可能在内存中重新排序。

```
class Foo {
  public:
    int a;
    int b; // Must come after a
  public:
    int c; // Does not have to come after a and b.
}; 
```

第二个`public:`为优化器提供了更多空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:55:15.323

这样做没有语言目的。我认为这是不好的风格。但是有些人喜欢将特定种类的所有内容划分为一个部分，然后将该部分划分为公共/保护/私人区域。然后，当它们碰巧只有公共元素之外的任何东西时，公共关键字就会重复重复。

我认为它愚蠢。但是有些人发现以这种方式组织他们的代码很有用。

# android - 一个片段显示在前一个片段之上

> ID：11362546
> 
> 赞同：2
> 
> 时间：2012-07-06T12:49:54.207
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我有两个**片段**：

```
public class FirstFragment extends Fragment{
   ...
}

public class SecondFragment extends Fragment{
   ...
} 
```

我的应用程序首先显示`FirstFragment`，通过按下上的**按钮**`FirstFagment`，`SecondFragment`正在显示。那`FirstFragment`就是按下按钮时，将运行以下代码：

```
fragmentTransaction.replace(R.id.fragment_placeholder, firstFragment, secondFragment);
fragmentTransaction.addToBackStack(null); 
```

我想要的是，当显示 时`SecondFragment`，我**仍然可以看到**它`FirstFragment`下面（`FirstFragment`被 覆盖`SecondFragment`），所以，我想**我**的`SecondFragment`.

我`android:background="@android:color/transparent"`在`SecondFragment`布局文件中设置了，但它不透明，为什么？如何达到我的要求？

# java - 如何添加 Java 多线程

> ID：11362547
> 
> 赞同：0
> 
> 时间：2012-07-06T12:49:54.673
> 
> 标签：java, multithreading

在工作培训中，我正在编写一个应满足以下条件的 Java（我有 0 经验）程序：

> 编写一个复制分布式计算应用程序的程序
> 
> 创建包含 M 个随机数列表的中央“调度程序”对象
> 
> 创建 N 个处理器线程，从调度程序中检索一个数字，然后在请求另一个数字之前循环多次
> 
> 如果调度程序没有可用的号码，请等待请求另一个号码。
> 
> 如果没有更多的数字，则所有线程都应该结束。

到目前为止，我创建了一个包含随机数数组的对象，但我真的不知道如何进行多线程处理。有人可以指导我完成吗？这是我到目前为止所拥有的，以及指示伪代码的注释。

```
public class ThreadDemo extends Thread
{
    //create new array of arbitrary size 5
    static int SIZE = 5;
    static int[] myIntArray = new int[SIZE];

    public ThreadDemo()
    {
        start();
    }

    class RunnableThread implements Runnable {

        Thread runner;
        public RunnableThread() {
        }
        public RunnableThread(String threadName) {
            runner = new Thread(this, threadName); // (1) Create a new thread.
            System.out.println(runner.getName());
            runner.start(); // (2) Start the thread.
        }
        public void run() {
            //Display info about this particular thread
            System.out.println(Thread.currentThread());
        }
    }

    public static void main(String[] args)
    {
        for(int i=0; i<SIZE; i++)
        {
            myIntArray[i] = (int)(Math.random() * 10);
        }

        ThreadDemo scheduler = new ThreadDemo();

        //create M processor threads that retrieve number from scheduler
            //for(int i=0; i<SIZE; i++)
                //

        //if no threads available
            //make the scheduler thread wait() ??

        //if empty
            //stop() the scheduler thread ??

    }

    } 
```

谁能引导我朝着正确的方向前进？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:54:02.383

[这是一个很好的起点](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。IT 也将有助于查看[executor 服务](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)。[这](http://sunels.wordpress.com/category/executorservice-example/)是一个例子。

您可能还想看看[一些并发集合](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)。使用队列而不是数组可能值得使用，这样可以更清晰地判断何时从其中拉出某些内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T13:11:36.200

作为第一个指针：不要在构造函数中启动线程，也不要使用`Runnable`对象来启动使用自身的线程。对于阅读代码的人来说，这非常令人困惑。

这是我对这个问题的看法（希望我没有得意忘形）：

```
class Scheduler {
    private int[] numbers;
    private AtomicInteger current = new AtomicInteger();

    public Scheduler(int count) {
        Random rand = new Random();
        numbers = new int[count];
        for(int i = 0; i < count; i++) {
            numbers[i] = rand.nextInt();
            if(numbers[i] < 0) numbers[i] *= -1;
        }   
    }

    public int getNextNumber() {
        int local = current.incrementAndGet();
        if(local >= numbers.length) {
            return -1;
        }
        return numbers[local];
    }
} 
```

首先，我们定义了一个`Scheduler`类，它包含一个随机（正）整数数组，并根据一个原子递增的计数器从数组中按需返回一个数字。

```
class Task implements Runnable {

    private Scheduler scheduler;  

    public Task(Scheduler scheduler) {
        this.scheduler = scheduler;     
    }

    public void run() {
        while(true) {           
            int limit = scheduler.getNextNumber(); // get next number
            if(limit == -1) return; // no more numbers
            System.out.println(limit);
            for(int i = 0; i < limit; i++) {
                // spin
            }
        }
    }       
} 
```

该类`Task`包含每个线程执行的代码。每个线程无限循环地从 请求数字`Scheduler`，直到数组耗尽。

```
public class Test {

    public static void main(String[] args) throws InterruptedException {

        Scheduler s = new Scheduler(100);
        ExecutorService exec = Executors.newFixedThreadPool(4);
        for(int i = 0; i < 4; i++) {
            exec.submit(new Task(s));
        }

        exec.shutdown();
        exec.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);       
    }
} 
```

在主类中，我们设置了一个线程池，并执行了 4 个线程来完成上述任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:53:51.227

您可能想看看 te [ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

你应该最终得到这样的东西。

```
public static void main(){
    ThreadPoolExecutor tpe = new ThreadPoolExecutor(...);
    List<Integer> numbers = getNumberList();
    for(Integer i : numbers){
    tpe.submit(new MyRunnable(i) {
            Integer i;
            public MyRunnable(Integer i){
              this.i=i;
            }
        @Override
        public void run() {
         dosomethingWith(i);
        }
      }
   } 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T12:58:14.863

根据我对您的作业的理解，您需要创建一个生产者和工作线程单元。请参考以下链接，这将适合您的要求。

[http://www.exampledepot.com/egs/java.lang/WorkQueue.html](http://www.exampledepot.com/egs/java.lang/WorkQueue.html)

谢谢塔尼卡查兰

# graph - 在 jRuby 中绘制时间序列图

> ID：11362550
> 
> 赞同：1
> 
> 时间：2012-07-06T12:50:04.133
> 
> 标签：graph, plot, jruby

为了在 jRuby 中绘制时间序列图，最简单的绘图工具是什么？目前我只需要它在例如数组中绘制数据。我正在寻找几乎与 Matlab 的代码一样简单的东西......

```
plot(array) 
```

我意识到有一些可用于 Ruby 的选项，但我不确定是否可以让它们在 JRuby 上工作。

谢谢！

# c# - 无法在 IE 8 中导出到 Excel

> ID：11362560
> 
> 赞同：0
> 
> 时间：2012-07-06T12:50:41.857
> 
> 标签：c#, .net, internet-explorer-8, export-to-excel

我无法在 IE 8 中导出到 excel。我不断收到以下信息：“IE 无法从 url 下载 filename.aspx。” “IE 无法打开此 Internet 站点。请求的站点不可用或找不到。请再试一次”

在我看来，它忽略了 https，并试图打开 http，但我可能是错的。根据这篇文章：http: [//support.microsoft.com/kb/323308](http://support.microsoft.com/kb/323308)

我的代码是：

```
 StringWriter sw = new StringWriter();
                HtmlTextWriter htw = new HtmlTextWriter(sw);
                gvResources.RenderControl(htw);

                Response.ClearContent();
Response.ClearHeaders()
                Response.AddHeader("Content-Disposition", "attachment; filename=AdHocReport.xls");
                Response.ContentType = "application/vnd.ms-excel";
                Response.Write(sw.ToString());
                Response.End(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:03:14.340

我发现一条线索建议您需要禁用缓存控制标头。

试一试：

```
 Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

来源：[随机论坛对话](http://download.hkvstore.com/forums/viewtopic.php?f=24&t=15477)| [另一个可能的线索](http://apache-wicket.1842946.n4.nabble.com/Problem-with-setCacheable-false-No-Cache-Header-in-WebResource-td3765955.html)

另外：[SetCacheability](http://msdn.microsoft.com/en-us/library/system.web.httpcachepolicy.setcacheability(v=vs.71).aspx)

...我希望能发现一些更深层次的理解，但这就是我发现的全部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:34:38.860

尝试摆脱内容配置中的空间，也尝试在文件名周围添加引号：

```
 Response.AddHeader("Content-Disposition", "attachment;filename=\"AdHocReport.xls\""); 
```

您是否有理由使用带有写入功能的字符串写入器而不是带有二进制写入的流？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:22:32.373

问题出在 IIS 应用程序池上。解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T18:26:30.957

我只是能够解决这个问题。`response.clear()`我在...之后添加了以下几行

```
 Response.ClearHeaders()
    Response.AddHeader("Cache-Control", "no-store, no-cache ") 
```

# objective-c - 如何在 UIWebview 中调整图像大小？

> ID：11362563
> 
> 赞同：3
> 
> 时间：2012-07-06T12:50:50.113
> 
> 标签：objective-c, ios, xcode, uiwebview

我在 UIWebview 中加载了一个 html 文件。我正在尝试在 UIWebview 中调整图像的大小并完成加载。在这个 webview 中，根据设备大小将 html 内容拆分为页数（下面的代码显示）。对于分页，我使用了滑动手势。在此之前它可以正常工作。在这个 html 文件中，我几乎没有大小不同的图像。有些图像超过了设备宽度。我需要修复图像的宽度，使其适合屏幕。我不想滚动 webview，因为我使用滑动手势进行分页。那么如何根据设备宽度重新调整图像的大小。

我使用以下代码

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{

     NSString *varMySheet = @"var mySheet = document.styleSheets[0];";

     NSString *addCSSRule =  @"function addCSSRule(selector, newRule) {"
     "if (mySheet.addRule) {"
     "mySheet.addRule(selector, newRule);"                              // For Internet Explorer
     "} else {"
     "ruleIndex = mySheet.cssRules.length;"
     "mySheet.insertRule(selector + '{' + newRule + ';}', ruleIndex);"   // For Firefox, Chrome, etc.
     "}"
     "}";

     NSString *insertRule1 = [NSString stringWithFormat:@"addCSSRule('html', 'padding: 0px; height: %fpx; -webkit-column-gap: 0px; -webkit-column-width: %fpx;')", webview4epub.frame.size.height, webview4epub.frame.size.width];
     NSString *insertRule2 = [NSString stringWithFormat:@"addCSSRule('p', 'text-align: justify;')"];

     [webview4epub stringByEvaluatingJavaScriptFromString:varMySheet];
     [webview4epub stringByEvaluatingJavaScriptFromString:addCSSRule];
     [webview4epub stringByEvaluatingJavaScriptFromString:insertRule1];
     [webview4epub stringByEvaluatingJavaScriptFromString:insertRule2];
     NSString* foundHits = [webview4epub stringByEvaluatingJavaScriptFromString:@"results"];
     NSMutableArray* objects = [[NSMutableArray alloc] init];

     NSArray* stringObjects = [foundHits componentsSeparatedByString:@";"];
     for(int i=0; i<[stringObjects count]; i++){
         NSArray* strObj = [[stringObjects objectAtIndex:i] componentsSeparatedByString:@","];
         if([strObj count]==3){
             [objects addObject:strObj];   
            }
        }

    int totalWidth = [[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.scrollWidth"] intValue];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T11:17:16.547

这会将第一张图片的大小设置为 webViews 高度的 90%：

```
 NSString *imgHeightJSString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('img')[0].style.maxHeight = '%fpx'", webView.bounds.size.height*0.90];
[webView stringByEvaluatingJavaScriptFromString:imgHeightJSString]; 
```

无论 view.size 是什么，这都是 90% imageSize：

```
 [webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('img')[0].style.maxHeight = '90%%'"] ; 
```

要设置宽度，只需使用 maxWidth 而不是 maxHeight。

# sql - sql server 计算多个表中的列

> ID：11362564
> 
> 赞同：0
> 
> 时间：2012-07-06T12:50:52.393
> 
> 标签：sql, sql-server

```
select s.part_no
    ,s.part_name
    ,s.uom
    ,i.Invoice_Quantity
    ,r.Return_Quantity
    ,p.Issue_Quantity
    ,sr.Quantity
    ,rp.Return_Quantity
    ,er.Quantity 
from dbo.dri_Stock as s 
left join 
(
    select part_no,sum(Invoice_Quantity) as Invoice_Quantity 
    from dbo.dri_InwardEntry 
    where month(_date)=6 and year(_date)=2012 
    group by part_no 
) as i 
    on s.part_no=i.part_no
left join 
(
    select part_no,sum(Return_Quantity) as Return_Quantity 
    from dbo.dri_ReturnToCustomer 
    where month(date)=6 and year(date)=2012 
    group by part_no
) as r 
    on s.part_no=r.part_no 
left join 
(
    select part_no,sum(Issue_Quantity) as Issue_Quantity 
    from dbo.dri_IssueToProd 
    where month(date)=6 and year(date)=2012 
    group by part_no
)as p 
    on s.part_no=p.part_no 
left join 
(
    select part_no,sum(Quantity) as Quantity 
    from dbo.dri_ShortReceipt 
    where month(date)=6 and year(date)=2012 
    group by part_no
)as sr 
    on s.part_no=sr.part_no 
left join 
(
    select part_no,sum(Return_Quantity) as Return_Quantity  
    from dbo.dri_ReceiptFromProd 
    where month(date)=6 and year(date)=2012 
    group by part_no
)as  rp 
    on s.part_no=rp.part_no 
left join 
(
    select part_no,sum(Quantity) as Quantity 
    from dbo.dri_ExcessReceipt 
    where month(date)=6 and year(date)=2012 
    group by part_no 
)as er 
    on s.part_no=er.part_no 
where i.invoice_quantity>0 
```

我想在我的输出中添加一个列，即**stockBalance**

我怎样才能做到这一点：

计算 StockBalance 的公式为**(i.Invoice_Quantity + rp.Return_Quantity + er.Quantity) - (r.Return_Quantity + p.Issue_Quantity + sr.Quantity)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:16:31.687

只需将您的计算添加到选择中。我会`ISNULL`在每个值周围添加一个，以防它们由于您的左连接而为空。

```
select s.part_no,s.part_name,
    s.uom,i.Invoice_Quantity,
    r.Return_Quantity,
    p.Issue_Quantity,sr.Quantity,
    rp.Return_Quantity,er.Quantity,
    ISNULL(i.Invoice_Quantity, 0) + ISNULL(rp.Return_Quantity, 0)
        + ISNULL(er.Quantity, 0)) - (ISNULL(r.Return_Quantity, 0)
        + ISNULL(p.Issue_Quantity, 0) + ISNULL(sr.Quantity, 0)) AS StockBalance
from dbo.dri_Stock as s
left join (
    select part_no,sum(Invoice_Quantity) as Invoice_Quantity
    from dbo.dri_InwardEntry
    where month(_date)=6 and year(_date)=2012
    group by part_no ) as i on s.part_no=i.part_no
left join (
    select part_no,sum(Return_Quantity) as Return_Quantity
    from dbo.dri_ReturnToCustomer
    where month(date)=6 and year(date)=2012
    group by part_no) as  r on s.part_no=r.part_no
left join (
    select part_no,sum(Issue_Quantity) as Issue_Quantity
    from dbo.dri_IssueToProd
    where month(date)=6 and year(date)=2012
    group by part_no) as p on s.part_no=p.part_no
left join (
    select part_no,sum(Quantity) as Quantity
    from dbo.dri_ShortReceipt
    where month(date)=6 and year(date)=2012
    group by part_no) as sr on s.part_no=sr.part_no
left join (
    select part_no,sum(Return_Quantity) as Return_Quantity
    from dbo.dri_ReceiptFromProd
    where month(date)=6 and year(date)=2012
    group by part_no) as  rp on s.part_no=rp.part_no
left join (
    select part_no,sum(Quantity) as Quantity
    from dbo.dri_ExcessReceipt
    where month(date)=6 and year(date)=2012
    group by part_no ) as er on s.part_no=er.part_no
where i.invoice_quantity>0 
```

# node.js - Node.js 混淆每个循环的输出

> ID：11362565
> 
> 赞同：4
> 
> 时间：2012-07-06T12:50:53.440
> 
> 标签：node.js, loops, response

我想知道是否有人可以帮助我理解以下行为。如果我在 node.js 服务器上有一个 app.js 文件，如下所示：

```
var http = require('http');
var _ = require('underscore');

http.createServer(function(request, response) {
var x = '';
    _.each([1, 2, 3], function(num){
    x +=" underscore.js says " + num;
});
    response.writeHead(200, {
        'Content-Type': 'text/html'
    })

    response.end(x);

      }).listen(3000, null); 
```

然后每次我请求页面时，我都会看到文本“underscore.js say x”3 次。我希望这是因为循环中有 3 个数字，并且每次请求都会重置 x。但是，如果我有以下内容（x 移动到 createServer 的回调之外）：

```
var http = require('http');
var _ = require('underscore');
var x = ''; // Note x is moved outside the createserver callback
http.createServer(function(request, response) {

    _.each([1, 2, 3], function(num){
    x +=" underscore.js says " + num;
});
    response.writeHead(200, {
        'Content-Type': 'text/html'
    })

    response.end(x);

      }).listen(3000, null); 
```

第一次加载产生 3 个结果（如预期的那样），但后续请求总是将循环附加两次（所以 6 个“underscore.js 说 x”行。我可以理解它每次都附加到同一个变量，但我希望它能够每次以 3 的倍数打印结果，因此第一次调用总共打印 3 行，第二次打印 6，第三次打印 9，依此类推。

我对 node.js 很陌生，所以如果有人能解释这种行为或这个循环如何以我不期望的方式工作，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:06:23.497

这可能是一个令人失望的答案，但仍然如此。

您的浏览器将向 发出 HTTP 请求，该请求将访问您的脚本，并为每个请求`/favicon.ico`在您的变量中添加额外的 3 行。`x`

1.  您刷新页面并看到 3 行。
2.  您的浏览器请求`/favicon.ico`，并添加了 3 行
3.  您刷新页面，并看到 6 行 + 3 附加。
4.  您的浏览器请求`/favicon.ico`，并添加了 3 行

... ETC。

您可以通过检查以;`request.url`结尾的参数来解决此问题。`favicon.ico`

```
if (/\/favicon.ico$/.test(request.url)) {
    // don't incremement
} 
```

[...或者你可以用这个模块](http://nodejs.org/api/http.html#http_request_url)做的更时髦；[`url()`](http://nodejs.org/api/http.html#http_request_url)

```
if (require('url').parse(request.url).pathname === '/favicon.ico') {
    // don't incremement.
} 
```

# jquery - AjaxUpload 脚本在文件名中留下空格

> ID：11362572
> 
> 赞同：0
> 
> 时间：2012-07-06T12:51:25.127
> 
> 标签：jquery, ajax-upload

我已经搜索了这个网站，但似乎找不到答案。我有一个简单的 AjaxUpload 脚本，用于上传 10 秒的音频样本，然后将上传的文件显示为 BBCode 和 Flash 播放器（在同一页面上）。通过`uploadSample.php`用下划线替换文件名中的空格来处理它们，但是`<input type="text"/>`即使 PHP 脚本删除了它们，生成的代码中的文件名中仍然有空格，因此 BBCode 是错误的并且 flashplayer 找不到该文件。

该脚本显然在 PHP 脚本去除空格之前抓取了原始文件名，那么有没有办法在上传后抓取正确的文件名，并带有下划线？

**jQuery**

```
$(function() {
        var url = "uploads/samples/";
        var btnUpload = jQuery('#up');
        var status = jQuery('#status');
        new AjaxUpload(btnUpload, {
            action: 'uploadSample.php',
            name: 'uploadfile',
            onSubmit: function(file, ext) {
                status.html('<img src="public/upload/ajax-loader.gif">');
            },
            onComplete: function(file, response) {
                if (response === "success") {
                    $("#status").fadeOut();
                    $("#bb").val('[sample=' + url + file + ']');
                    $("#flash").html("<embed width='400' height='27' quality='best' src='public/upload/player.swf' flashvars='audioUrl=" + url + file + "' type='application/x-shockwave-flash'>");
                } else {

                    // run error code
                }
            }
        });

    }); 
```

小提琴（如果需要）：http: [//jsfiddle.net/Nn5gG/1/](http://jsfiddle.net/Nn5gG/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:14:36.547

将输出链接的代码行更改为以下内容：

```
$("#flash").html("<embed width='400' height='27' quality='best' src='public/upload/player.swf' flashvars='audioUrl=" + url + file.replace(' ', '_') + "' type='application/x-shockwave-flash'>"); 
```

它告诉 javascript 用下划线替换 filenme 中的任何空格。

另一种解决方案是确保 PHP 传回的文件名在返回输出之前已经进行了空格替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:15:39.013

文件名仍然是原始文件名，因为您的 php 对您的 js 没有影响。您可以在响应中返回文件名，也可以替换 js 中的空格。

# c++ - 在字符串中查找所有想要的单词

> ID：11362576
> 
> 赞同：0
> 
> 时间：2012-07-06T12:51:43.227
> 
> 标签：c++, string, search

我有一个太长的字符串，我想找到并定位所有想要的单词。例如，我想查找字符串中所有“apple”的位置。你能告诉我我是怎么做到的吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:53:55.687

[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)如果您使用的是 C++ 字符串，或者您使用的是 C 字符串，请重复应用[`std::strstr`](http://en.cppreference.com/w/cpp/string/byte/strstr)；在这两种情况下，每次迭代都会在最后一次匹配后开始搜索 n 个字符，其中 n 是单词的长度。

```
std::string str="one apple two apples three apples";
std::string search="apple";
for(std::string::size_type pos=0; pos<str.size(); pos+=search.size())
{
    pos=str.find(search, pos);
    if(pos==std::string::npos)
        break;
    std::cout<<"Match found at: "<<pos<<std::endl;
} 
```

（[链接](http://ideone.com/j2J2s)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:54:36.620

使用重复调用的循环`std::string::find`；在每次迭代中，您开始发现超出最后一次命中：

```
std::vector<std::string::size_type> indicesOf( const std::string &s,
                                               const std::string &needle )
{
  std::vector<std::string::size_type> indices;
  std::string::size_type p = 0;
  while ( p < s.size() ) {
    std::string::size_type q = s.find( needle, p );
    if ( q == std::string::npos ) {
      break;
    }
    indices.push_back( q );
    p = q + needle.size(); // change needle.size() to 1 for overlapping matches
  }
  return indices;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:58:06.603

```
void findApples(const char* someString)
{
   const char* loc = NULL;
   while ((loc = strstr(someString, "apple")) != NULL) {
      // do something
      someString = loc + strlen("apple");
   }
} 
```

# windows-8 - html 中嵌套的 WinJS.UI.Listviews（地铁应用程序）

> ID：11362579
> 
> 赞同：2
> 
> 时间：2012-07-06T12:51:52.300
> 
> 标签：windows-8, microsoft-metro, winjs

这是html：

```
<div class="itemtemplate" data-win-control="WinJS.Binding.Template">
    <h4 class="title" data-win-bind="textContent: title"></h4>
    <div class="list" data-win-control="WinJS.UI.ListView" data-win-options="{ selectionMode: 'none' }"></div>
</div>

<div class="groupeditemslist" data-win-control="WinJS.UI.ListView" data-win-options="{ selectionMode: 'none' }"></div> 
```

我如何添加`data-win-options`完整的 html（没有像“ [Metro: Dynamically Switching Templates with a WinJS ListView](http://stephenwalther.com/archive/2012/05/23/metro-dynamically-switching-templates-with-a-winjs-listview.aspx) ”这样的嵌套`WinJS.UI.ListView`绑定数据的 javascript templateSelector？

对于主数据中的每个项目，我添加一个`WinJS.Binding.List`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:01:14.713

假设您的数据格式为：

```
var firstLevelDataSource = new WinJS.Binding.List(
    [{title: "t1", secondLevelBinding: new WinJS.Binding.List([1])},
     {title: "t2", secondLevelBinding: new WinJS.Binding.List([2])}]);

// then you expose firstLevelDataSource as Data.firstLevelDataSource 
```

那么，这样不行吗？

```
<div class="itemtemplate" data-win-control="WinJS.Binding.Template">
    <h4 class="title" data-win-bind="textContent: title"></h4>
    <div class="list" data-win-control="WinJS.UI.ListView" data-win-options="{ selectionMode: 'none', itemDataSource: secondLevelBinding.dataSource }"></div>
</div>

<div class="groupeditemslist" data-win-control="WinJS.UI.ListView" data-win-options="{ selectionMode: 'none', itemDataSource: Data.firstLevelDataSource.dataSource }"></div> 
```

# linq - 将表达式传递给 Linq to SQL

> ID：11362580
> 
> 赞同：0
> 
> 时间：2012-07-06T12:51:53.803
> 
> 标签：linq, linq-to-sql

我正在尝试使以下方法起作用：

```
private static IQueryable<TObject> ApplyOrderBy<TObject, TKey>(IQueryable<TObject> query, OrderByDirection orderByDirection,
                                                        Expression<Func<TObject, TKey>> sortExpression, ref bool first)
{
    if (orderByDirection == OrderByDirection.None || sortExpression == null) return;
    if (orderByDirection != OrderByDirection.Ascending && orderByDirection != OrderByDirection.Descending)
        throw new Exception(string.Format("Should never get here! Unknown OrderByDirection enum - '{0}'.", orderByDirection));

    if (first)
    {
        first = false;
        query = orderByDirection == OrderByDirection.Ascending
                    ? query.OrderBy(sortExpression)
                    : query.OrderByDescending(sortExpression);
    }
    else
    {
        query = orderByDirection == OrderByDirection.Ascending
                    ? ((IOrderedQueryable<TObject>)query).ThenBy(sortExpression)
                    : ((IOrderedQueryable<TObject>)query).ThenByDescending(sortExpression);
    }

    return query;
} 
```

如果你这样称呼它，这个方法效果很好：

```
ApplyOrderByToGet(ref query, OrderByDirection.Ascending, x => x.StartDateTime, ref first); 
```

然后，排序表达式具有强类型 DateTime 作为类型，并且 LINQ to SQL 很高兴。但是，如果您想传递这些具有不同类型的表达式的数组，您最终需要一个以“对象”作为类型的列表。问题是 LINQ to SQL 没有弄清楚类型不是对象，而是日期时间。这适用于使用 LINQ to 对象的常规列表。鉴于可以导航表达式树并找出类型是什么，是否可以在调用 ApplyOrderBy 之前转换/转换表达式？

从以下位置投射或转换：

```
Expression<Func<T, object>> 
```

至：

```
Expression<Func<T, DateTime>> 
```

# batch-file - 仅在连接到域时映射网络驱动器

> ID：11362582
> 
> 赞同：0
> 
> 时间：2012-07-06T12:52:07.090
> 
> 标签：batch-file, dns, windows-7-x64, network-drive, group-policy

我环顾四周，并没有找到完全符合我需求的解决方案。我有一台笔记本电脑，用于工作和在家中个人使用。在工作中，我们在一个域上运行，并且有几个我经常使用的网络存储位置。所以我决定要映射这些驱动器。但是，当我在家时，我不想收到弹出消息，也不想看到这些驱动器已断开连接，并且没有与这些服务器的连接。是否有内置的方法可以在 Windows 7 中完成此任务，或者我需要求助于启动脚本。如果我需要脚本，如何检查计算机是否连接到域，然后根据该选项映射驱动器。如果需要脚本，我更愿意使用 .bat 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:09:07.330

如果没有更多细节，我相信如果 Windows 变量 USERDOMAIN 的值等于 COMPUTERNAME 的值，那么您的主机不在域中

```
If %USERDOMAIN% <> %COMPUTERNAME% SET indomain="y" 
```

或者，您可以通过尝试在属于域的计算机上执行诸如 WINDOWS 之类的文件夹的 DIR 之类的操作来“破解”它。如果您被拒绝，那么您就不是该域的一部分。

# bash - 如何根据要求伪造键盘输入到 bash？

> ID：11362583
> 
> 赞同：0
> 
> 时间：2012-07-06T12:52:09.367
> 
> 标签：bash

我在 bash 脚本中运行序列化的 bash 命令以使用流通过子脚本下载（合法！）一些视频。下标以询问要下载的质量开始（按 keyb 1-4），然后继续下载几分钟。

如何在提问后假装按 2，以便在完成之前无需任何进一步输入就可以让计算机继续运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:54:13.827

这将像您在键盘上`2`键入一样发送到脚本`2`

```
./the-script.sh <<EOF
2
EOF 
```

# javascript - 未捕获的 ReferenceError：未定义 ExtensionSettings（匿名函数）

> ID：11362587
> 
> 赞同：3
> 
> 时间：2012-07-06T12:52:26.997
> 
> 标签：javascript, google-chrome, google-chrome-extension

从 chrome 加载扩展页面时出现错误：

```
Uncaught ReferenceError: ExtensionSettings is not defined
   (anonymous function) 
```

从页面：

```
chrome://chrome/extensions/ 
```

这仅在我的扩展程序处于活动状态时发生，而不是在它被禁用时发生（始终最多只有 1 个扩展程序处于活动状态，并且只有这个扩展程序）。

我应该提到我没有触及 ExtensionSettings 变量或对象中的整个代码。

失败的调用如下所示：

```
ExtensionSettings.returnExtensionsData({"developerMode":true,"extensions":[{"allowFileAccess":true,"allow_activity":f... 
```

显现：

```
{
  "name": "Example Chrome pluggin",
  "version": "1.0",
  "manifest_version": 2,
  "browser_action": {
    "default_icon": "icons/icon1.png",
    "default_popup" : "default_popup.html"
  },
  "background": {
    "scripts" : ["jquery-1.7.2.min.js","background.js"]
  },
  "content_scripts": [ 
    {
      "matches": ["http://*/*", "https://*/*"],
      "js": ["jquery-1.7.2.min.js","tracker.js"],
      "run_at" : "document_end"
    }   
  ],

  "permissions": ["tabs", "http://www.example.com/", "https://www.example.com/"]
} 
```

# c# - 从 linq 查询中选择新类型

> ID：11362594
> 
> 赞同：4
> 
> 时间：2012-07-06T12:52:51.107
> 
> 标签：c#, linq

我正在尝试使用 Linq 转换从存储库中选择的一些数据。

到目前为止我的代码：

```
Repository<Result> _repository = new Repository<Result>();

var disciplines = _repository.Query()
    .Select(d => new Discipline
    {
        DisciplineCode = d.DisciplineCode,
        Name = d.DisciplineName
    })
    .Distinct()
    .ToList(); 
```

结果类如下所示：

```
public class Result
{
    public virtual int ResultId { get; set; }
    public virtual string DisciplineCode { get; set; }
    public virtual string DisciplineName { get; set; }
    public virtual int CompetitorId { get; set; }
    //other stuff
} 
```

当它运行时，我得到

> 无法确定表达式的序列化信息：< MemberInitExpression >

知道出了什么问题吗？

**编辑：**

根据克里斯的建议，我在 ToList 之后尝试了 Select，如下所示：

```
var disciplines = _repository.Query()
                .Select(d => new
                {
                    DisciplineCode = d.DisciplineCode,
                    Name = d.DisciplineName
                })
                .Distinct()
                .ToList()
                .Select(d => new Discipline { DisciplineCode = d.DisciplineCode, Name = d.Name }); 
```

但是，这一次，类似的错误，但它与匿名类型有关：

> 无法确定表达式的序列化信息：new __AnonymousType(d.DisciplineCode, d.DisciplineName)。

**编辑2：**

澄清一下， .Query 正在返回 IQueryable
底层数据库是 MongoDB（使用 C# 驱动程序）

如果我这样做：

```
var disciplines = _repository.Query()
    .Select(d => d.DisciplineName)
    .Distinct()
    .ToList() 
```

有用。通过作品，我的意思是我得到一个`distinct`DisciplineNames 列表

我需要能够选择更多的属性，而不仅仅是名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T02:20:35.130

我怀疑您的问题是 MongoDB 驱动程序不知道如何创建`Discipline`对象（或就此而言的匿名对象）。

您需要离开`IQueryable<>`并进入`IEnumerable<>`才能完成这项工作。

试试这个：

```
var disciplines =
    _repository
        .Query()
        .ToArray()
        .Select(d => new Discipline
            {
                DisciplineCode = d.DisciplineCode,
                Name = d.DisciplineName
            })
        .Distinct()
        .ToList(); 
```

这`.ToArray()`就是这里的魔力。让我知道这个是否奏效。

您的自定义类型上的调用可能仍然存在问题`.Distinct()`，因此您可能需要尝试以下操作：

```
var disciplines =
    _repository
        .Query()
        .ToArray()
        .Select(d => new
            {
                d.DisciplineCode,
                d.DisciplineName
            })
        .Distinct()
        .Select(d => new Discipline
            {
                DisciplineCode = d.DisciplineCode,
                Name = d.DisciplineName
            })
        .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:36:18.323

不知道为什么您的第一个示例没有运行，看起来还可以，请[在此处](https://stackoverflow.com/questions/706866/linq-to-dataset-distinct-by-multiple-columns)查看相关问题。可能它可能是您的数据库驱动程序中的错误？

您可以尝试使用 GroupBy 来获得相同的结果：

```
 var disciplines = _repository.Query()     
    .GroupBy(d => new Discipline     
        {         
             DisciplineCode = d.DisciplineCode,         
             Name = d.DisciplineName     
        }
    ) 
    .ToList(); 
```

# sql - 可选报告参数（有更好的方法吗？）

> ID：11362597
> 
> 赞同：1
> 
> 时间：2012-07-06T12:52:55.700
> 
> 标签：sql, database, tsql, reporting-services

我有一个包含 4 个参数的报告。我想让它们不是必需的。问题是执行此操作的常规方法，创建 16 个 OR/AND 语句。如果我有 10 个不需要的参数，那么 SOL 语句就会失控。这可行，但有更简单的方法吗？

这是我所拥有的：

**主要数据集：**

```
select * 
from table 
where 
     table.one = @param1 OR @param1 IS NOT NULL 
     AND.....(etc.etc..) 
```

**@param1、@param2、@param3、@param4：（默认值空/空白）**

```
Select some_column from any_table UNION SELECT '' as Nothing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:57:08.093

我一直这样做的方式是

```
WHERE 
  col1 = isnull(@col1, col1) 
  and col2 = isnull(@col2, col2)
  ...etc 
```

差不多就是你所拥有的，还有一些语义更正。

# c# - C# 检索引号中的字符串的最佳方法？

> ID：11362600
> 
> 赞同：-1
> 
> 时间：2012-07-06T12:53:04.190
> 
> 标签：c#, .net, regex, string

假设我得到以下文本（在字符串数组中）

```
engine.STEPCONTROL("00000000","02000001","02000043","02000002","02000007","02000003","02000008","02000004","02000009","02000005","02000010","02000006","02000011");
    if("02000001" == 1){
        dimlevel = 1;
    }
    if("02000001" == 2){
        dimlevel = 3;
    } 
```

我想提取引号之间的字符串并将其放入单独的字符串数组中。例如，提取的 string[] 将包含 00000000, 02000001, 02000043....

最好的方法是什么？我应该使用正则表达式以某种方式解析这些行并将其拆分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:59:48.693

那可能是

```
 string data = "\"00000000\",\"02000001\",\"02000043\"".Replace("\"", string.Empty);
    string[] myArray = data.Split(','); 
```

或在 1 行

```
 string[] data = "\"00000000\",\"02000001\",\"02000043\"".Replace("\"", string.Empty).Split(','); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:25:01.187

我个人认为不需要正则表达式。如果您可以确定输入字符串始终如所描述的那样，并且其中没有任何转义序列或以任何其他方式变化，您可以使用如下内容：

```
 public static string[] ExtractNumbers(string[] originalCodeLines)
    {
        List<string> extractedNumbers = new List<string>();

        string[] codeLineElements = originalCodeLines[0].Split('"');
        foreach (string element in codeLineElements)
        {
            int result = 0;
            if (int.TryParse(element, out result))
            {
                extractedNumbers.Add(element);
            }
        }

        return extractedNumbers.ToArray();
    } 
```

它不一定是最有效的实现，但它很短并且很容易看到它的作用。

# ios - 在 Objective C (iOS) 中解析 JSON

> ID：11362603
> 
> 赞同：-1
> 
> 时间：2012-07-06T12:53:12.753
> 
> 标签：ios, json, nsjsonserialization

我在解析目标 C 中的 JSON 字符串时遇到问题：我的 JSON：

```
{"messages":[{"nick":"Tim","message":"Hallo","time":"06.07.2012 13:26:41"}]} 
```

我的目标 C 代码：

```
NSError *error = nil;
NSData *data = [NSData dataWithContentsOfURL:@"..URL.."];
NSArray *messages = [data objectForKey:@"messages"];
NSDictionary *json = [NSJSONSerialization
                           JSONObjectWithData:messages
                                      options:NSJSONReadingMutableLeaves
                                        error:&error];
NSString *nick = [json objectForKey:@"nick"];
NSString *message = [json objectForKey:@"message"]; 
```

但这不起作用，我不知道该怎么办！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:00:39.423

您的 JSON 是字典数组的字典，即 {[{}]}

```
NSArray *messages = [json objectForKey:@"messages"];
NSString* nick = [[messages objectAtIndex:0]objectForKey:@"nick"] 
```

# c# - IValueConverter 不只是“使用辅助类进行转换”的示例吗

> ID：11362604
> 
> 赞同：2
> 
> 时间：2012-07-06T12:53:16.887
> 
> 标签：c#

一位同事和我在讨论 .NET 中的转换时指出，有四种方法可以转换类型，起初我只能想出两种，隐式和显式，然后他指出用户定义的转换和使用辅助类，所以我决定在这里查看[http://msdn.microsoft.com/en-us/library/ms173105.aspx](http://msdn.microsoft.com/en-us/library/ms173105.aspx)读到我突然意识到我做了很多 WPF 并且经常使用 IValueConverter 接口。

我的问题开始于 - IValueConverter 不只是使用辅助类进行转换的一个示例（当然，当你实现它时）？然后我很好，用户定义的转换和使用辅助类的转换之间的真正区别是什么？如果您按照上面提到的 MSDN 页面中的链接进行操作，那么文档会很精简。就像这是转换运算符页面中的示例。

```
class SampleClass
{
    public static explicit operator SampleClass(int i)
    {
        SampleClass temp = new SampleClass();
        // code to convert from int to SampleClass...

        return temp;
    }
} 
```

它并没有说得那么清楚。对我来说，它看起来像一个静态类，需要在 ctor 中添加一个 int？

无论如何 - 希望一些 C# ninja 可以阐明这个主题。最后一个想法是，我通常会尽量避免转换内容，除非在常规日常代码中有真正的充分理由（即解析电子表格），我倾向于将其视为代码异味，这被认为是最佳实践吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:03:22.107

这不是您问题的完整答案，但是该代码片段覆盖了该类的“显式转换*”*，这不是真正直观的方法签名。基本上它可以让你做：

```
int one = 1;
SampleClass x = (SampleClass)one; 
```

常识说演员应该失败，因为并且`int`不是，`SampleClass`而是你问题中的代码片段开始发挥作用，并使演员成为可能。

另一种补充方法是：

```
public static implicit operator SampleClass(int i) 
```

注意这里的关键字是`implicit`代替`explicit`，这个版本将允许隐式转换，所以这会起作用：

```
int one = 1;
SampleClass x = one; 
```

请注意，您不再需要指定演员表。

# java - 我可以在 getter 中调用 RequestDispatcher 吗？

> ID：11362606
> 
> 赞同：0
> 
> 时间：2012-07-06T12:53:21.820
> 
> 标签：java, jsp, servlets, pojo, jspinclude

我有一个基于 JSP 的框架，我想从 Java 中的 JSP 中移动逻辑，因此我使用 POJO

```
<jsp:useBean id="myBean" class="myClass" scope="page"/> 
<c:set var="myVariable" scope="request" value="${myBean.myGetter}"/> 
```

我在`myClass`. 我的问题是，如果我可以根据请求设置一些属性，对`RequestDispatcher.include`JSP 执行一个将使用我设置的属性的 JSP，当调用返回时，使用包含的 JSP 在请求中放置的一些属性。

我只在 servlet/filter 中使用了 RequestDispatcher，而不是在 getter 中的 POJO 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:56:23.857

是的，如果你有参考，`request` 你可以做到。最终，`JSP`代码被翻译为`Servlet`，调用 include in`Bean`将与从 code within 调用它一样`servlet`。

# ruby-on-rails - Rails 3 和 RSpec：错误消息中的可点击文件路径（在 OSX 终端中）？

> ID：11362607
> 
> 赞同：1
> 
> 时间：2012-07-06T12:53:22.923
> 
> 标签：ruby-on-rails, macos, rspec, terminal

在使用 RSpec 测试我的 Rails3 应用程序时，有这么多关于失败规范的信息很好，但让它们可点击会更好：

`2) Project Failure/Error: create(:project) # Needed for validate_presence_of ActiveRecord::RecordInvalid: Validation failed: Name has already been taken # ./spec/models/project_spec.rb:6:in `block (2 levels) in <top (required)>'`

因此，当单击`./spec/models/project_spec.rb:6`它时，会在 TextMate 中打开文件并跳转到第 6 行。有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:09:59.190

我已经在终端上寻找一种方法来做到这一点，但我没有找到。

您可以使用[RubyMine](http://www.jetbrains.com/ruby/)。它是一个真正的 IDE，支持代码片段、调试等等。

![RubyMine - 点击文件路径打开它](../Images/4037a6e6dd39467d5102910477226cf1.png)

我尊重 Textmate，我不时使用它。但是对于一个真正的开发者环境来说，RubyMine 是迄今为止最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:46:05.337

不确定它是否仍然相关，但我已经为此编写了一个 gem。与 textmate 和 sublime 一起使用（后者需要额外的软件）

[https://github.com/tadast/rspec_clickable_output](https://github.com/tadast/rspec_clickable_output)

# java - 错误：用于编码 UTF8 的不可映射字符

> ID：11362608
> 
> 赞同：1
> 
> 时间：2012-07-06T12:53:24.653
> 
> 标签：java, compiler-construction, utf-8

当我尝试编译 java 项目时收到此错误。不幸的是，该错误存在于超过 262 个文件中，我无法花时间在每个文件中进行更正。是否存在更快的方法来解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:59:44.963

找出你的源文件有什么编码，并将它作为 -encoding 参数传递给 javac。

# wcf - 从 RPG 使用 WCF 服务

> ID：11362609
> 
> 赞同：0
> 
> 时间：2012-07-06T12:53:24.667
> 
> 标签：wcf, ibm-midrange, rpgle

谁能给我一些关于从 ILERPG 使用 WCF 服务的信息？我已经编写并运行了该服务，但我能找到的唯一信息可以追溯到 2008 年。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:45:46.020

Scott Klement 有一个演示文稿和示例：[http ://www.scottklement.com/presentations/#HTTPAPI](http://www.scottklement.com/presentations/#HTTPAPI)

# delphi - DLL调用期间奇怪的AV

> ID：11362615
> 
> 赞同：0
> 
> 时间：2012-07-06T12:53:51.940
> 
> 标签：delphi, delphi-7

我在 D7 中创建了一个示例项目来演示这个奇怪的问题。它在这里： [http ://speedy.sh/n9Etr/OpenCV-BugTest.zip](http://speedy.sh/n9Etr/OpenCV-BugTest.zip)

我有一个看起来像这样的程序：

```
function Rec (image: PIplImage): String;
begin
  DLL_CALL;
end; 
```

当我调用 Rec 时，我在 DLL_CALL 上得到了 AV，但是......如果我向函数添加第二个参数：

```
function Rec (image: PIplImage; Something: String): String;
begin
  DLL_CALL;
end; 
```

然后 DLL_CALL 成功。

变量：“某事”是无关紧要的，不会被带到任何地方......

真的，我不知道发生了什么……

## 编辑：

我使用 openCV 库的 cvSaveImage。

```
function cvSaveImage(const filename: PAnsiChar; const image: pointer): integer; 
    cdecl; external CV_HIGH_GUI_DLL; 
```

我所有的方法都使用 cdecl 参数的调用约定导出。

完整的程序是：

```
function TCVR.Rec(image: PIplImage): String;
const
  THRESH = 50;
var
  imgDisorted: PIplImage;
  Storage: PCvMemStorage;
  Squares: PCvSeq;

begin
  imgDisorted := nil;
  result := '';

  Storage := cvCreateMemStorage(0);

  cvSetImageROI(image, cvRect(0, 0, image^.width and -2, image^.height and -2));
  PyrDownUp(image);
  cvSetImageROI(image, cvRect(0, 0, image^.width and -2, image^.height and -2));

  imgDisorted := cvCreateImage(cvSize(image^.width and -2, image^.height and -2), 8, 1);
  cvSaveImage('c:\test.jpg', image); <--- AV here only when I have 1 parameter in my Rec.
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:32:45.987

您将 1.0 函数定义与 2.4.1 DLL 版本一起使用。函数定义发生了变化，所以你已经过时了将近三年。特别是，[`cvSaveImage`需要三个参数](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=cvsaveimage#imwrite)，而不仅仅是两个。[2.0 版本](http://opencvlibrary.svn.sourceforge.net/viewvc/opencvlibrary/tags/2.0/opencv/include/opencv/highgui.h?revision=2218&view=markup#l210)的摘录：

```
CVAPI(int) cvSaveImage( const char* filename, const CvArr* image,
                        const int* params CV_DEFAULT(0) ); 
```

更新您的 DLL 导入单元以匹配您正在使用的 DLL（或切换到旧版本的库）。我会像这样将该函数翻译为Delphi：

```
function cvSaveImage(filename: PAnsiChar; image: PCvArr; params: PInteger = nil); cdecl; 
```

* * *

这就是为什么你会看到你看到的特定失败：

DLL 不知道您只传递了两个参数，因此它从它认为是第三个参数的内容中读取数据，并将其解释为指向整数数组的指针。真正存在的东西可能根本就没有指针，因此您会遇到访问冲突。

向函数添加另一个参数`Rec`会使其具有四个参数（`Self`、`image`、`Something`和`Result`），这会将其中一个参数强制到堆栈中。由于堆栈稍大一些，因此 DLL 最终会从不同的位置读取。该位置可能包含一个空指针，因此 DLL 不会尝试读取任何数组元素，因此代码可以按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:17:14.163

检查您的 dll 的导入声明。可能此 dll 的接口已更改，但您的代码并未反映这一点。

# c# - 当它发生时获取 MouseButton 事件，而不是在它被释放时

> ID：11362633
> 
> 赞同：0
> 
> 时间：2012-07-06T12:55:26.333
> 
> 标签：c#, xna, mouseevent, mouseclick-event, registerhotkey

简而言之，我希望能够在用户单击按钮时获得鼠标单击（特别是 MiddleButton）的事件——而不是在它被释放之后。

我想我以前做过一次，但我忘记了。

这是为了能够在 XNA 项目中用户单击按钮时导航 3D 视图。

除了鼠标，有没有类似的方法来注册热键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:57:06.103

这不只是`MouseDown`事件吗？

# php - 通过替换 GET 变量缩短 URL

> ID：11362635
> 
> 赞同：0
> 
> 时间：2012-07-06T12:55:28.137
> 
> 标签：php, .htaccess

我有一个显示新闻内容的网页。页面的 URL 类似于 `example.com/news.php?newsid=iphone4-releases`. 我希望可以通过这样的 URL 访问该页面：`example.com/news/iphone4-releases`

我在我的`.htaccess`文件中进行了这些更改

```
RewriteCond %(REQUEST_FILENAME) !-d [OR]
RewriteCond %(REQUEST_FILENAME) !-f [OR]
RewriteCond %(REQUEST_FILENAME) !-l

RewriteRule .* - [L]

RewriteRule ^(.*)$ http://example.com/news.php?newsid=$1 [NC] 
```

此代码实际上替换了 URL，但我想保留没有 GET 变量的相同 URL。另外，使用这种方法，URL 变成了`example.com/iphone4-releases`，但我想要`example.com/news/iphone4-releases`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:02:34.933

假设您只在文章名称中使用 aZ、数字和破折号，这将是可行的：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^news/([a-zA-Z0-9\-]*)$ /news.php?newsid=$1 [NC] 
```

**编辑：**

此链接解释了参数： [http ://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)

关于-l：

> '-l' （是符号链接） 将 TestString 视为路径名并测试它是否存在，并且是符号链接。

并且数字将在此示例中起作用（例如/news/iphone2003-new-launch）

对不起，但我很着急:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:14:47.930

您不能期望忽略 GET 变量并使用 .htaccess 进行 303 重定向，因为重定向会丢失您的变量。您可以做的是将带有 POST 的表单提交到您将重定向到的页面，并创建从该页面到真正 PHP 脚本的符号链接，*然后*创建一个重写规则来重定向客户端的浏览器。

这是您的上述重定向，包含添加的`/news/`部分：

```
RewriteEngine On
RewriteBase /
RewriteCond %(REQUEST_FILENAME) !-d [OR]
RewriteCond %(REQUEST_FILENAME) !-f [OR]
RewriteCond %(REQUEST_FILENAME) !-l

RewriteRule .* - [L]

RewriteRule ^(.*)$ news/news.php?newsid=$1 [NC] 
```

您也可以仅使用 PHP 进行重定向：

```
header("Location: http://www.redirecthere.com"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:00:22.093

也许您需要删除两者，`[OR]`因为您希望请求的文件不是文件，也不是目录，也不是符号链接

```
RewriteCond %(REQUEST_FILENAME) !-d
RewriteCond %(REQUEST_FILENAME) !-f
RewriteCond %(REQUEST_FILENAME) !-l

RewriteRule ^/(\w+)/(.*?)/?$      $1.php?newsid=$2 [NC,L] 
```

而且您不需要整个域都在您的规则内

# c# - 基于字符串保存设置

> ID：11362637
> 
> 赞同：0
> 
> 时间：2012-07-06T12:55:32.470
> 
> 标签：c#, settings

我需要根据输入字符串保存到不同的设置。为什么这条线不起作用？

```
Properties.Settings.Default + colorOptionNametoSave = selectedIndexString;
Properties.Settings.Default.Save(); 
```

其中`colorOptionNametoSave`是不同的颜色设置，`selectedIndexString`是要保存的值。但是我收到消息：

> 错误 2：赋值的左侧必须是变量、属性或索引器。

我能想到的唯一解决方法是`switch`声明，但我有很多颜色，所以这会很长。关于更有效的解决方案的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:57:52.920

`if`/`else`或 a`switch`是您要查找的内容。

您**不能连接**变量名！

因此，您的解决方案将是这样的（如果`colorOptionNametoSave`是字符串）：

```
if(colorOptionNametoSave == "Blue")
{
    Properties.Settings.Default.Blue = selectedIndexString;
}
else if(colorOptionNametoSave == "Red")
{
    Properties.Settings.Default.Red = selectedIndexString;
} 
```

# tomcat - 错误 404，Tomcat 找不到 servlet

> ID：11362638
> 
> 赞同：0
> 
> 时间：2012-07-06T12:55:33.143
> 
> 标签：tomcat, servlets, maven

我想在我的 maven 项目中编写一个简单的 servlet，但我收到此错误，在此服务器上找不到请求的 url (/src/main/java/web.servlets.FunctionalTestServlet)。

这是我的代码：

Servlet：位于 src/main/java 包 web.servlets；

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class FunctionalTestServlet extends HttpServlet
  {

public void doGet(HttpServletRequest request,HttpServletResponse response)throws  
    ServletException, IOException {

     PrintWriter out = response.getWriter();
     out.println( "SimpleServlet Executed" );
     out.flush();
     out.close();
    }

public void doPost(HttpServletRequest request,  HttpServletResponse response)
          throws IOException, ServletException{
          response.setContentType("text/html");
          PrintWriter out = response.getWriter();  
          String fileName = request.getParameter("testfile");
           out.println("<b><font color='blue'>The File name is 
                     :</font></b>" 
          + "<b>"+ fileName +"</b>" + "<br>");
        }
          } 
```

jsp页面：在src/main/webapp下

```
 <html:file properties="tonFichier" name="tonForm"/>

  <form action="/src/main/java/web.servlets.FunctionalTestServlet"   
  enctype="multipart/form-data" method="post">
    <p>
   Type some text (if you like):<br>
   <input type="text" name="textline" size="30">
   </p>
   <p>
    Please specify a Test , or a set of tests:<br>
   <input type="file" name="testfile" size="40" >
   </p>
   <div>
  <input type="submit" value="Execute Test">

  </div>
 </form>
 </body>
 </html> 
```

这是我的 web.xml：在 /WebTestAutomatisation/src/main/webapp/WEB-INF/web.xml

```
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
"http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
<display-name>Archetype Created Web Application</display-name>

<servlet>
<servlet-name>FunctionalTestServlet</servlet-name>
 <servlet-class>web.servlets.FunctionalTestServlet.java</servlet-class>
</servlet> 
<servlet-mapping>
<servlet-name>FunctionalTestServlet</servlet-name>
 <url-pattern>/*</url-pattern>
</servlet-mapping>

  </web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-18T14:01:39.190

我意识到这是一个旧线程，但我一直在努力解决一个非常相似的问题，并且刚刚找到了解决方案。我以为我会分享...

我对 Maven 比较陌生，并且一直在使用 maven 3.1、tomcat 7.0.37、java 1.7 和 Eclipse Juno 解决非常类似的问题。我将使用 maven-archetype-webapp 创建一个 maven 项目，然后使用动态 Web 模块将项目转换为分面形式，将我的内容目录设置为 /src/main/webapp。

我将创建我的 servlet 类并确保将 servlet-api.jar 包含到 java 构建路径中。我还更新了我的 pom.xml，它依赖于 javax.servlet-api，范围为“提供”：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.1-b05</version>
    <scope>provided</scope>
</dependency> 
```

我将项目包含到 tomcat 服务器中，当访问 servlet url 时，我会收到 404 错误 - 请求的资源不可用。

我为此苦苦挣扎了两天，就在今天早上发现了解决方案。我缺少的部分是进行“maven 安装”。由于我使用的是 Eclipse，因此需要右键单击项目，选择“运行方式”，然后选择“Maven 安装”。之后，我停止/重新启动了本地 tomcat 服务器，然后我能够成功地让 servlet 工作。

我注意到的另一件事是，在查看 java 构建路径中的库选项卡时，开箱即用配置的 JRE 系统库是 J2SE-1.5。我将我的更改为 JavaSE-1.7 (jdk1.7.0_13)。

最终在这个问题上对我帮助最大的是这个视频：

[http://www.youtube.com/watch?v=8Waf4jBbino](http://www.youtube.com/watch?v=8Waf4jBbino)

我希望这可以帮助别人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:01:16.807

```
<servlet-name>FunctionalTestServlet</servlet-name>
 <servlet-class>web.servlets.FunctionalTestServlet.java</servlet-class>
</servlet> 
```

你需要把类名放在那里。最后删除“.java”。

```
<servlet-mapping>
<servlet-name>FunctionalTestServlet</servlet-name>
 <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

使用此映射，您的 servlet 将获得*所有*请求。所以URL可以是'/'，不需要'/src/main/java/web.servlets.FunctionalTestServlet'。你可能想要一个`/FunctionalTest`.

此外，Web 服务器通常甚至无法访问源文件，只能访问已编译的类文件。URL 路径映射在 web.xml 中，与包名或类名完全无关。

# php - Magento 1.7.0.2 升级（从 1.6.2 开始）

> ID：11362640
> 
> 赞同：1
> 
> 时间：2012-07-06T12:55:39.833
> 
> 标签：php, sql, magento

我最近听说了 Magento 所依赖的固有 Zend 问题。我主动将我的网站从 1.6.2 升级到最新的 1.7.0.2 以解决这个问题。我的所有网站都升级得很漂亮，除了 1。所有文件现在在服务器上都是最新的，但是当我尝试访问我的网站并运行升级时，我将以下报告保存在我的报告文件夹中，而无法访问我的网站。

```
a:5:{i:0;s:216:"Error in file: "/home/xxxxx/public_html/app/code/core/Mage/Sales/data/sales_setup/data-upgrade-1.6.0.4-1.6.0.5.php" - SQLSTATE[42S22]: Column not found: 1054 Unknown column 'main.base_tax_refunded' in 'field list'";i:1;s:883:"#0 /home/xxxxx/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(645): Mage::exception('Mage_Core', 'Error in file: ...')
#1 /home/xxxxxx/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(407): Mage_Core_Model_Resource_Setup->_modifyResourceDb('data-upgrade', '1.6.0.4', '1.6.0.7')
#2 /home/xxxxxx/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(286): Mage_Core_Model_Resource_Setup->_upgradeData('1.6.0.4', '1.6.0.7')
#3 /home/xxxxxx/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(269): Mage_Core_Model_Resource_Setup->applyDataUpdates()
#4 /home/xxxxxx/public_html/app/code/core/Mage/Core/Model/App.php(351): Mage_Core_Model_Resource_Setup::applyAllDataUpdates()
#5 /home/xxxxxx/public_html/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#6 /home/xxxxxx/public_html/index.php(87): Mage::run('', 'store')
#7 {main}";s:3:"url";s:1:"/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:7:"default";} 
```

或者，如果我尝试通过下载器进行升级，我会得到：

```
Exception during cache and session cleaning: Error in file: "/home/xxxxxx/public_html/app/code/core/Mage/Sales/data/sales_setup/data-upgrade-1.6.0.4-1.6.0.5.php" - SQLSTATE[42S22]: Column not found: 1054 Unknown column 'main.base_tax_refunded' in 'field list' 
```

这是我在管理 magento 的许多个月中还没有遇到的问题。查看该 php 的代码，一切似乎都是标准的，并且与我安装了升级的其他站点相匹配。

有人遇到这样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:22:47.910

Ben，我现在已经将四个 Magento 商店从 1.5.1.0 和 1.6.2.0 升级到 1.7.0.2。不完全相同的问题，但两个有某种形式的缺失表（一个是验证码，另一个是 sales_order_tax_item。一旦我创建了“缺失”表，每次安装都很好。不知道为什么它们会丢失或丢失。你可能只是添加缺少的列或将表替换为正确的版本？base_tax_refunded 在 sales_flat_order 表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:17:29.883

我的问题解决了。

原来我的 index.php 文件设置为 666。运行 chmod 将其更改为 755，一切都好起来了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:23:03.620

我遇到了同样的问题，但是该字段在我的主订单表中，并且更改文件的权限没有效果，所以最终在查看了更仔细地给出错误的文件之后（即 data-upgrade-1.6.0.4-1.6 .0.5.php）我在下表中添加了以下列，最后我可以回到我的管理面板。

添加的列：base_tax_refunded、discount_refunded、base_discount_refunded

到表：sales_flat_creditmemo、sales_flat_creditmemo_item、sales_flat_order_item

这种事情肯定会由升级脚本自动完成吗？除非我错过了一些步骤...

# python - 将 MainFolder 中的 python 脚本导入 MainFolder/file 中的另一个脚本

> ID：11362641
> 
> 赞同：0
> 
> 时间：2012-07-06T12:55:44.867
> 
> 标签：python, python-2.7

我编写了一个应用程序来记录用户提供的数据，计算和打印账单。我在 MainFolder 中编写了一个脚本 usage.py 并想在 MainFolder/file/MainFile.py 中提取它的方法或函数。MainWin.py中usage.py中的方法或函数我已经用过 3个py扩展中的脚本粘贴[在这里](http://bpaste.net/show/S0kvBcniHvEQbgaMCfqu/)

如何在 MainFolder/file/MainFile.py 的 MainFolder/usage.py 的方法中使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:10:47.927

如果您将文件夹设为允许您在任一位置使用方法的包。但是，为了提供进一步的建议，从设计的角度来看，将 usage.py 中的方法移到 MainFile.py 中会更有意义。在嵌套文件的顶级文件中使用函数没有多大意义。

如果你把它做成一个模块，你可以使用：

```
from some.package.usage import policySize 
```

模块文档： [http ://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)

# simplexml - SimpleXml tar.gz

> ID：11362649
> 
> 赞同：0
> 
> 时间：2012-07-06T12:56:08.943
> 
> 标签：simplexml, tar

我正在使用 SimpleXml 来解析 xml。遗憾的是，我已经接近了压缩到 tar.gz 中的 XML。

当我尝试加载此 XML 时出现错误

> 警告：SimplexmlElement::__construct() [simplexmlelement.--construct]：实体：第 1 行：解析器错误：需要开始标记，在 /home/ 中找不到“<”

有没有办法处理去皮重的文件？如果不是，如何解压并处理它（它是外部服务器上的 12 MB tared 文件）？

最亲切的问候

# regex - mod_rewrite - 直接从主 URL 传递变量不起作用

> ID：11362650
> 
> 赞同：2
> 
> 时间：2012-07-06T12:56:09.643
> 
> 标签：regex, apache, mod-rewrite, rewrite

我已经创建了一个规则，允许用户传递这样的变量：**somepage.com/database/12345**在内部将其更改为**somepage.com/database/?db_index=12345**并且它工作正常。代码如下所示：

```
RewriteBase /
RewriteRule ^database/([0-9]+)/?$ /database/?db_index=$1 
```

现在我需要做同样的事情，但不需要在变量之前传递“database/”。所以用户可以像这样传递变量：**somepage.com/12345**。它必须是一个附加选项，而不是替代前一个选项。我试图这样做：

```
RewriteRule ^([0-9]+)/?$ /database/?db_index=$1 [L] 
```

但我就是无法让它发挥作用，我也不知道为什么。上面的附加代码直接插入到前面的工作规则之前。

对于我的方法不起作用的任何帮助和解释，我将非常高兴。

更新：整个 .htaccess 文件如下所示：

```
# Block the include-only files.
RewriteEngine On
RewriteBase /
RewriteRule ^wp-admin/includes/ - [F,L]
RewriteRule !^wp-includes/ - [S=3]
RewriteRule ^wp-includes/[^/]+\.php$ - [F,L]
RewriteRule ^wp-includes/js/tinymce/langs/.+\.php - [F,L]
RewriteRule ^wp-includes/theme-compat/ - [F,L]

# direct url rewrite
RewriteEngine On
RewriteBase /
RewriteRule ^([0-9]+)/?$ /database/?db_index=$1 [L]
RewriteRule ^database/([0-9]+)/?$ /database/?db_index=$1

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:00:50.987

你的对我来说看起来不错，但试试：`RewriteRule ^/?([0-9]+)/?$ /database/?db_index=$1 [R=301]`

# javascript - 以编程方式分析 .xpi Firefox 扩展中的网络流量

> ID：11362652
> 
> 赞同：0
> 
> 时间：2012-07-06T12:56:21.510
> 
> 标签：javascript, firefox, xpi

有谁知道如何以编程方式从 xpi Firefox 扩展程序访问浏览器窗口中的文档引起的网络流量（请求和响应）？

我想使用您将在当前浏览器开发工具（如 Firebug 或 Chrome 开发工具）中的“网络”选项卡上看到的信息。基本上，我想构建一个 Firefox 扩展来跟踪一些特殊的网络错误并对这些数据进行更多分析。

我检查了 Firefox Addon SDK 的 API 文档，但找不到我要查找的信息。

谁能告诉我如何使用 Firefox Addon SDK 来实现这一点？

感谢您的任何提示。

# mysql - 为什么这个查询总是返回一个空行？

> ID：11362654
> 
> 赞同：4
> 
> 时间：2012-07-06T12:56:30.083
> 
> 标签：mysql, sql

我对这个问题感到非常疯狂，想知道是否有一个天才，对他来说这只是一个孩子的游戏......？

此查询应建议随机用户登录用户，而登录用户和建议用户之间的关系不得以下列方式之一被阻止：

*   按大洲
*   按国家
*   按年龄段
*   按性别
*   按 id (blocker<->blockee)

# 表结构

## 用户

```
id | username | country_id_home | timestamp_lastonline | gender | birthdate | allow_gender | age_min | age_max | ... 
```

*注释：`birthdate`是 mysql-date 格式 ( `YYYY-MM-DD`), `gender`(0=female,1=male), `allow_gender`(0=both, 1=female, 2=male)*

## 国家

```
country_id | name | continent_id | ... 
```

## 城市

```
id | city_real | ... 
```

*评论：`loc_id_home`在表中`user`匹配`id``cities`*

## 封锁国家

```
id | user_id | country_id | ... 
```

## 被封锁的大陆

```
id | user_id | continent_id | ... 
```

## 阻塞用户

```
id | user1_id | user2_id | ... 
```

*评论：user1 是“blocker”，user2 是“blockee”*

我到目前为止的查询是：

```
SELECT u.id AS user_id, u.username, u.fname, u.country_id_home, u.timestamp_reg, u.timestamp_upd, u.timestamp_lastonline, u.online_status, u.gender, u.birthdate, u.prof_pic,

(SELECT name FROM countries co WHERE co.country_id=u.country_id_home) AS country_name,
(SELECT city_real FROM cities ci WHERE ci.id=u.loc_id_home) AS city ,
(SELECT region_name FROM regions r WHERE r.id=u.region_id_home) AS region,
(SELECT region_short FROM regions r WHERE r.id=u.region_id_home) AS region_short

FROM user_d1 u 

LEFT JOIN (
SELECT DISTINCT user2_id AS blockee_id
FROM blocked_user
WHERE user1_id = :user1_id1
)this_user_blocked ON u.id = this_user_blocked.blockee_id

LEFT JOIN (
SELECT DISTINCT user1_id AS blocker_id
FROM blocked_user
WHERE user2_id = :user1_id2
)blocked_this_user ON u.id = blocked_this_user.blocker_id

WHERE 

(allow_gender=0 OR allow_gender=:user1_allow_gender)

AND age_min<=:user1_age1
AND age_max>=:user1_age2

AND prof_status<>2

AND this_user_blocked.blockee_id IS NULL AND blocked_this_user.blocker_id IS NULL 

AND NOT EXISTS (SELECT 1 FROM blocked_countries bc WHERE bc.user_id=u.id AND bc.country_id =:user1_country)
AND NOT EXISTS (SELECT 1 FROM blocked_countries bc WHERE bc.user_id=:user1_id3 AND bc.country_id = u.country_id_home)

AND EXISTS (
    SELECT 1 FROM user_d1 u2 
    WHERE u2.id=:user1_id4
    AND (u2.allow_gender=0 OR u2.allow_gender=(u.gender+1))
    AND age_min<=(DATEDIFF(NOW(),u.birthdate))
    AND age_max>=(DATEDIFF(NOW(),u.birthdate))
    AND prof_status<>2
    )

LIMIT 0,6 
```

没有最后`AND EXISTS...`一个结果集不是空的，但是像这样它总是不返回任何结果。然而被大陆封锁不包括在内，它还没有被`timestamp_lastonline`...订购

我最后做错了`AND EXISTS...`什么？应该用 a 来完成`JOIN`吗？我也试过了，但它也给出了一个空的结果......

我已将登录用户的所有必要变量存储在 SESSION-variables 中......如果您在查询中发现可以以更好的方式完成的任何其他内容，我也很乐意为您提供帮助！

非常感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T13:06:33.647

我认为这是因为`DATEDIFF`，它返回两个日期之间的**天**数而不是年数。因此`DATEDIFF`可能总是大于age_max。

编辑：你可以这样做：

```
...
AND DATE_SUB(NOW(), INTERVAL age_max YEAR) <= u.birthdate
AND DATE_SUB(NOW(), INTERVAL age_min YEAR) >= u.birthdate
... 
```

# mysql - MySQL时间戳错误

> ID：11362655
> 
> 赞同：0
> 
> 时间：2012-07-06T12:56:39.093
> 
> 标签：mysql, sql, phpmyadmin

我正在为我的应用程序创建一个数据库。我收到此错误：MySQL 说：文档

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '(14) NOT NULL 附近使用的正确语法，

```
 PRIMARY KEY  (UserID))' at line 4 . 
```

这是我的sql语句：

```
CREATE TABLE sitheloChat_Users (
  UserID int(10) unsigned NOT NULL auto_increment,
  Username varchar(15) NOT NULL default '',
  PreviousUpdate timestamp(14) NOT NULL,
  PRIMARY KEY  (UserID)
); 
```

我必须添加或编辑什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:59:52.263

从时间戳中删除 (14)

```
 mysql> CREATE TABLE sitheloChat_Users 
( UserID int(10) unsigned NOT NULL auto_increment,
 Username varchar(15) NOT NULL default '', 
PreviousUpdate timestamp NOT NULL, PRIMARY KEY (UserID) );
    Query OK, 0 rows affected (0.03 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:02:08.737

TimeStamp 不需要像 String (varchar/varchar2) 这样的*长度。*

```
CREATE TABLE sitheloChat_Users ( UserID int(10) unsigned NOT NULL auto_increment,
Username varchar(15) NOT NULL default '', PreviousUpdate timestamp NOT NULL, 
PRIMARY KEY (UserID) ); 
```

# android - Android 打开软键盘时向上移动整个屏幕？

> ID：11362657
> 
> 赞同：1
> 
> 时间：2012-07-06T12:57:02.987
> 
> 标签：android

当用户单击编辑文本时，我只想将我的整个活动屏幕向上移动...我的意思是屏幕将向上移动，在它下方我们可以看到软键盘...我尝试使用 android:windowSoftInputMode="adjustPan |adjustResize”在我的清单文件中，但它没有任何意义..提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:58:56.120

在您的 xml 布局中。使滚动视图成为根父级，它将起作用！

试试这个来检测键盘是否启动，然后向下滚动（你需要你的滚动是 xml 中的根）：

```
final View activityRootView = findViewById(R.id.scroll);
activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        int heightDiff = activityRootView.getRootView().getHeight() - activityRootView.getHeight();
        //keyboard is visible
        if (heightDiff > 100) {
            scroll.fullScroll(ScrollView.FOCUS_DOWN);
        }
    }
}); 
```

# ruby-on-rails - 对应用程序和 CMS 使用单用户模型时如何限制对 activeadmin 仪表板的访问？

> ID：11362661
> 
> 赞同：3
> 
> 时间：2012-07-06T12:57:07.843
> 
> 标签：ruby-on-rails, ruby, cancan, activeadmin

我正在使用单个`User`模型`adtiveadmin`和应用程序本身。我找到了一种[解决方案](https://gist.github.com/1264060)`CanCan`，可以使用和限制对 activeadmin 模型页面的访问`rolify`。请注意，在上面的示例中，他们使用常量来创建角色，而我使用`rolify`gem。不过，我可以轻松访问 activeadmin 的仪表板。当我尝试访问 CMS 中的模型时，我被重定向到应用程序的根页面，并显示一条错误消息，指出我无权访问此页面。

有没有办法限制对 activeadmin 的仪表板和模型的访问，以便我被重定向到 activeadmin 的授权页面？

这是我的 active_admin_resource 初始化程序

```
#config/initializers/active_admin_resources.rb
ActiveAdmin::ResourceController.class_eval do
protected
  def current_ability
    @current_ability ||= AdminAbility.new(current_user)
  end
end 
```

能力等级定义如下：

```
#app/models/admin_ability.rb
class AdminAbility < ActiveRecord::Base
include CanCan::Ability

def initialize(user)
  user ||= User.new
  if user.has_role? :admin
    can :manage, :all
  end
end 
```

结尾

Activeadmin 的模型是这样定义的：

```
#app/admin/some_model.rb
ActiveAdmin.register SomeModel do
  controller.authorize_resource
end 
```

最后activeadmin的路由定义如下：

```
#config/routes.rb
Rallypoint::Application.routes.draw do
  ActiveAdmin.routes(self)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T15:29:19.290

> ..我被重定向到应用程序的根页面..

如 wiki 页面[Exception Handling](https://github.com/ryanb/cancan/wiki/Exception-Handling)`rescue_from(CanCan::AccessDenied)`中所述，大多数应用程序都有一个。`ApplicationController`

> 【我想被】重定向到activeadmin的授权页面

尝试`rescue_from`在 activeadmin 中覆盖它。

# jasper-reports - JasperReport 参数在 iReport 中有效，但在带有输入控制的 JasperServer 上失败

> ID：11362665
> 
> 赞同：1
> 
> 时间：2012-07-06T12:57:18.117
> 
> 标签：jasper-reports, ireport, jasperserver

由于某种未知原因，JasperServer 没有将参数从输入控件传递到报告。

我使用在 iReport 中工作的输入参数定义了一个带有 iReport 4.6 的 jrxml 报告（甚至尝试了兼容模式 4.0.1）。

**当我在jasperserver 4.5**上部署报告时，我得到的响应是“报告为空”。

没有参数的相同报告也可以正常工作。

自然地，我使用单选查询定义并附加了输入控件。

输入控件中的值列和可见列与我在 jrxml 中用作参数的 DB 字段相同。

作为可能输入的查询值显示得很好，但是当我选择一个时......“报告为空”！

我尝试简化报告，但输入控件中的参数不会被传递以呈现报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T00:13:19.527

您也必须在 jasperserver 中创建具有相同名称的参数（不仅在 iReport 中）。

在 JasperServer 中，编辑您的报告，使用相同的 id 定义“输入控件”并通过向导，它现在应该可以工作了。

如果您想先测试，请选择“始终要求在 Emergin 窗口中”。

您也可以在这里查看答案[http://jasperforge.org/node/543148](http://jasperforge.org/node/543148)

# rest - Doctrine Mongo ODM 合并外部修改数据

> ID：11362666
> 
> 赞同：1
> 
> 时间：2012-07-06T12:57:23.070
> 
> 标签：rest, doctrine-odm, symfony-2.1

我正在编写一个 Symfony2 应用程序，它允许移动用户通过 REST 服务创建和更新“家庭”。我使用 MongoDB 作为存储层，使用 Doctrine MongoDB ODM 进行文档处理。

和方法工作正常`GET /homes/{key}`。`POST /homes`当我尝试使用`PUT /homes/{key}`.

这是当前代码：

```
/**
 * PUT /homes/{key}
 *
 * Updates an existing Home.
 *
 * @param Request $request
 * @param string $key
 * @return Response
 * @throws HttpException
 */
public function putHomeAction(Request $request, $key)
{
    // check that the home exists
    $home = $this->getRepository()->findOneBy(array('key' => (int) $key));

    // disallow create via PUT as we want to generate key ourselves
    if (!$home) {
        throw new HttpException(403, 'Home key: '.$key." doesn't exist, to create use POST /homes");
    }

    // create object graph from JSON string
    $updatedHome = $this->get('serializer')->deserialize(
        $request->getContent(), 'Acme\ApiBundle\Document\Home', 'json'
    );

    // replace existing Home with new data
    $dm = $this->get('doctrine.odm.mongodb.document_manager');
    $home = $dm->merge($updatedHome);
    $dm->flush();

    $view = View::create()
        ->setStatusCode(200)
        ->setData($home);

    $response = $this->get('fos_rest.view_handler')->handle($view);
    $response->setETag(md5($response->getContent()));
    $response->setLastModified($home->getUpdated());

    return $response;
} 
```

JMSSerializer 将传递给操作的 JSON 字符串成功反序列化为我的 Document 对象图，但是当我尝试合并和刷新时，出现错误：

```
Notice: Undefined index:  in ..../vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/Mapping/ClassMetadataInfo.php line 1265 
```

我一直在尝试遵循此处的文档：http: [//docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/working-with-objects.html#merging-documents](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/working-with-objects.html#merging-documents)

在尝试合并之前，我需要对反序列化的 Home 做些什么吗？合并是错误的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:49:34.247

我发现这样做的唯一方法是在您的文档类中创建一个方法，该方法将更新的文档（例如`$updatedHome`）作为参数，然后将所需的字段复制到现有文档中（例如`$home`）。

所以上面，代码：

```
// replace existing Home with new data
$dm = $this->get('doctrine.odm.mongodb.document_manager');
$home = $dm->merge($updatedHome);
$dm->flush(); 
```

可以替换为：

```
// replace existing Home with new data
$home->copyFromSibling($updatedHome);
$this->getDocumentManager()->flush(); 
```

然后它将起作用。

# python - 在 Python 中读取 csv 文件时获取“字符串中的换行符”？

> ID：11362667
> 
> 赞同：8
> 
> 时间：2012-07-06T12:57:30.130
> 
> 标签：python, django, csv, python-2.7

我在 Django Architecture 中有这个 utils.py 文件：

```
def range_data(ip):
    r = []
    f = open(os.path.join(settings.PROJECT_ROOT, 'static', 'csv ', 
                          'GeoIPCountryWhois.csv'))
    for num,row in enumerate(csv.reader(f)):
        if row[0] <= ip <= row[1]:
            r.append([r[4]])
            return r
        else:
            continue
    return r 
```

这里的 ip 参数只是 IPv4 地址，我使用的是开源 MAXMIND`GeoIPCountrywhois.csv`文件。

的一些起始内容`GeopIOCountrywhois.csv`：

```
"1.0.0.0","1.0.0.255","16777216","16777471","AU","Australia"
"1.0.1.0","1.0.3.255","16777472","16778239","CN","China"
"1.0.4.0","1.0.7.255","16778240","16779263","AU","Australia"
"1.0.8.0","1.0.15.255","16779264","16781311","CN","China"
"1.0.16.0","1.0.31.255","16781312","16785407","JP","Japan"
"1.0.32.0","1.0.63.255","16785408","16793599","CN","China"
"1.0.64.0","1.0.127.255","16793600","16809983","JP","Japan"
"1.0.128.0","1.0.255.255","16809984","16842751","TH","Thailand" 
```

我也读过这个问题，但没有发现这么多可以理解的。你能帮我解决这个错误吗？

根据我在 utils 中的方法，我正在检查`IP`该方法的参数地址的国家名称。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-05T22:01:50.947

今天早些时候有类似的问题，一行中缺少一个结束引号，解决方案是指示`reader`对引号字符（`quoting=csv.QUOTE_NONE`）不进行特殊处理。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T13:18:26.823

1.  您可以通过删除换行符来预处理 csv，如下所示。

    ```
    import csv

    content = open("GeoIPCountryWhois.csv", "r").read().replace('\r\n','\n')

    with open("GeoIPCountryWhois2.csv", "w") as g:
        g.write(content) 
    ```

    然后将 GeoIPCountryWhois2 用于 csv 阅读器。

2.  使用 lineterminator 的疯狂猜测可能会解决您的问题

    ```
    for num,row in enumerate(csv.reader(f,lineterminator='\n')) 
    ```

    另见：[http ://docs.python.org/lib/csv-fmt-params.html](http://docs.python.org/lib/csv-fmt-params.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T13:31:56.447

您必须将文件作为二进制文件打开：

```
def range_data(ip):
    r = []
    f = open(os.path.join(settings.PROJECT_ROOT, 'static', 'csv ', 
                          'GeoIPCountryWhois.csv'), 'rb')
    for num,row in enumerate(csv.reader(f)):
        # Your things. 
```

注意`'rb'`那里的模式；否则文件可能会以本机行结尾打开，并且 CSV 阅读器不能很好地处理各种形式。`GeoIPCountryWhois.csv`当然，*我*下载的副本有干净的`\n`行尾。

这是为[.reader() 方法](http://docs.python.org/library/csv.html#csv.reader)记录的：

> 如果 csvfile 是文件对象，则必须在不同的平台上使用 'b' 标志打开它。

但是，如果您的 csv 文件严重损坏，以至于在意外的地方仍然包含意外的换行符，请使用此`file`子类作为权宜之计：

```
class CleanlinesFile(file):
    def next(self):
        line = super(CleanlinesFile, self).next()
        return line.replace('\r', '').replace('\n', '') + '\n' 
```

这个类保证在返回的结果中除了最后一个字符之外没有换行符（就像 csv 模块想要的那样）。用它代替`open`调用；在这种情况下，`'rb'`模式修饰符变为可选：

```
def range_data(ip):
    r = []
    f = CleanlinesFile(os.path.join(settings.PROJECT_ROOT, 'static', 'csv ', 
                          'GeoIPCountryWhois.csv'))
    for num,row in enumerate(csv.reader(f)):
        # Your things. 
```

# android - 更改 android.util.Log 日志文本格式

> ID：11362673
> 
> 赞同：0
> 
> 时间：2012-07-06T12:57:51.283
> 
> 标签：android

我想改变日志文本的格式，

当前使用 android.util.Log 记录时

```
Log.d("tag", "this is the text I added"); 
```

它是

```
<!>com.appname.android.classname 1286<!> this is the text I added 
```

我想将其输出为

```
[com.appname.android.classname:1286] this is the text I added 
```

知道我们该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:06:57.740

默认登录不能这样工作。实际上，日志将始终以特定格式（二进制）打印。

然后，你看到的是另一个程序的结果——通常是 logcat 或可能也使用 logcat 的 eclipse 插件——它将读取二进制日志，解析它并向你展示你想要看到的内容（哪些字段和格式）。

例如，尝试在命令行中输入

```
 adb logcat 
```

现在输入

```
 adb logcat -v time 
```

**那些打印完全相同的日志，但您看到它们的格式非常不同。**

你可以做的是有一个程序以不同的格式打印日志。我不认为 logcat 可以让你完全控制格式，但其他一些程序可能会给你。

更多信息：

```
adb logcat --help 
```

# git - 如何在 Git 中导入并保持更新的 CVS 存储库？

> ID：11362676
> 
> 赞同：38
> 
> 时间：2012-07-06T12:57:53.890
> 
> 标签：git, cvs, git-svn, git-cvs

CVS 中有一个中央存储库，我想在本地与 Git 一起使用它，然后将我的更改发送回 CVS。

我每天可以完成什么？

我想完成的任务是：

*   导入分支，
*   以类似 GIT 的格式获取历史记录，以及
*   将我的更改/提交导出回中央服务器

顺便说一句，我还查看[了将 git 与 CVS 结合使用的最佳实践](https://stackoverflow.com/questions/595106/best-practices-for-using-git-with-cvs)。但它没有用，我无法弄清楚我错过了什么或做错了什么。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-15T07:05:11.873

我过去所做的是：

## 导入 CVS 存储库

使用：

```
$ git cvsimport -C target-cvs -r cvs -k -vA authors-file.txt -d $CVSROOT module 
```

在哪里：

*   `target-cvs`是保存我的存储库本地副本的目录。
*   `cvs`是用于引用远程存储库的名称。因此，我将在本地使用`cvs/master`,`cvs/HEAD`等指向`master`。
*   `authors-file.txt`是包含 CVS 帐户和 Name+email 之间的匹配项的文件，每行包含`userid=User Name <useremail@hostname>`
*   `$CVSROOT`是 CVS 存储库服务器。如果我使用来自某个 sourceforge 存储库的匿名克隆，那么我将使用：`:pserver:anonymous@project_name.cvs.sourceforge.net:/cvsroot/project_name`
*   `module`是我要克隆的存储库内的模块。如果存储库只有一个模块，则可能与`project_name`.

## 更新存储库

可以重复我之前写的命令。在该特定示例中，它应该在`target-cvs`. 为了以后更方便，您可能需要配置一些变量（您可以在 *“[如何将修订历史从 mercurial 或 git 导出到 cvs？](https://stackoverflow.com/questions/584522/how-to-export-revision-history-from-mercurial-or-git-to-cvs/586225#586225) ”*的答案中阅读更多详细信息）

```
$ git cvsimport 
```

这足以使本地存储库`git`与 CVS 中的远程存储库保持同步。

## 日常工作

从现在开始，每个更改都应该在本地 git 分支中进行。一个功能，一个分支。为此，我使用“*[一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)*”中描述的工作流程。唯一的区别是*master*指向 CVS，但概念上相同的工作流程可以在这里应用。这只是一个约定。

一旦你的提交被推送到 CVS 中，它将在下一次更新 ( `git cvsimport`) 中返回到 master。然后，您可以删除实现该功能的本地分支。

对于正在进行的工作（在本地分支机构中），您应该将`rebase`它们与 master 对抗。因为您将功能分开，所以应该更容易解决冲突。棘手的部分是当一些分支依赖于其他分支时，但仍然可以管理。微提交有很大帮助（就像在任何 git 工作流程中一样）。

如果每个本地分支都被重新设置并且 master 从未接触过（更新除外），那么`git cvsexportcommit`应该可以正常工作。请记住，它适用于一次提交。这有点乏味，但总比没有好。鉴于前面的例子，命令应该是这样的：

```
$ git cvsexportcommit -vc commit-id 
```

如果您只有远程 CVS 的只读访问权限，那么您可以通过电子邮件发送补丁或公开您的 git 存储库，以便提交者可以获取您的补丁以应用它们。在这种情况下，与 CVS 的正常工作流程没有什么不同。同样，在下一次更新中，您将看到*master*中的更改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-18T13:46:18.520

[由于工具不兼容](https://stackoverflow.com/q/9609943/55075)，最新版本`git cvsimport`已损坏。`cvsps`

所以你必须安装`cvsps-2.1`.

在 OSX 上，您可以（拥有`brew`）：

```
brew tap homebrew/versions
brew install cvsps2
brew unlink cvsps
brew link --overwrite cvsps2 
```

并像往常一样导入空的 git 存储库，例如：

```
git cvsimport -C RepoName -r cvs -o master -k -v -d:pserver:anonymous@reponame.cvs.sourceforge.net:/cvsroot/path ModuleName 
```

* * *

您还可以使用[`cvs2git`](http://cvs2svn.tigris.org/cvs2git.html)可以将 CVS 存储库转换为 git 的工具。但是，您需要有权访问 CVSROOT 目录。

查看[cvs2git 文档](http://cvs2svn.tigris.org/cvs2git.html)了解安装步骤。

示例用法：

```
cvs2git --blobfile=git-blob.dat --dumpfile=git-dump.dat --username=cvs2git /path/to/cvs/repo 
```

这将创建两个 git 快速导入格式的输出文件。这些文件的名称由您的选项文件或命令行参数指定。在示例中，这些文件被命名`cvs2git-tmp/git-blob.dat`为`cvs2git-tmp/git-dump.dat`.

这些文件可以通过以下方式导入到空的 git 存储库中：

```
cat git-blob.dat git-dump.dat | git fast-import 
```

然后删除`TAG.FIXUP`分支并运行`gitk --all`查看转换结果。

通过运行检查更多信息：`cvs2git --help`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T13:46:52.070

我相信在你的情况下没有现成的食谱。但是，您可以尝试以下操作：

*   手动将 CVS 数据与 Git 同步，或为此编写脚本。他们将从 CVS 获取信息并将其放入 Git。这会给你一些 Git 的历史。不完全清洁，不完全可用，但仍然。
*   使用. [_](http://cvs2svn.tigris.org/cvs2git.html) _ `git cvsimport`并要求 Git 伪装成其他开发人员的 CVS，使用`git cvsserver`.

# android - 安卓直播视频

> ID：11362677
> 
> 赞同：0
> 
> 时间：2012-07-06T12:57:54.240
> 
> 标签：android, video, video-streaming, android-camera, live-streaming

我正在尝试制作一个可以将视频（实时）从设备相机流式传输到另一台设备的 Android 应用程序。我怎样才能做到这一点？任何人都可以给我提示或某种教程/代码？我真的需要一些帮助，因为我不知道如何解决这个问题。我读了很多关于此的内容，我尝试了一些示例，但直到现在都没有成功。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:03:40.987

这里已经讨论过这个了。希望能帮助到你：

[将视频从 Android 相机流式传输到服务器](https://stackoverflow.com/questions/2550847/streaming-video-from-android-camera-to-server)

编辑：[http](http://code.google.com/p/ipcamera-for-android/) ://code.google.com/p/ipcamera-for-android/ <= 这是一个可以做你想做的项目，你只需要适应你的需要:)

# objective-c - 仪器泄漏/奇怪的内存泄漏

> ID：11362679
> 
> 赞同：2
> 
> 时间：2012-07-06T12:57:57.440
> 
> 标签：objective-c, ios, xcode, memory-leaks, instruments

我正在 Instruments -> Leaks 上测试我的应用程序

而且我有一个无法消除的泄漏，因为我无法理解它的根源。

我应该怎么办？

PS这些泄漏出现在这些步骤之后：

1.  应用程序使用可见键盘进入后台。

2.  应用程序进入前台。

3.  我在键盘上输入任何字母。

如果在进入后台之前键盘是不可见的 = 没有泄漏 [一个 http://iwheelbuy.com/leak.png](http://iwheelbuy.com/leak.png) [两个 http://iwheelbuy.com/leak1.png](http://iwheelbuy.com/leak1.png) [三个 http://iwheelbuy.com/leak2.png](http://iwheelbuy.com/leak2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:39:04.757

我会在 AppDelegate.h 中的 applicationWillEnterBackground 中建议，只需辞去第一响应者。

# java - 大数据文件输出

> ID：11362681
> 
> 赞同：0
> 
> 时间：2012-07-06T12:58:08.443
> 
> 标签：java, file-io

我正在尝试使用 FileWriter 和 PrintWriter 在 java 中输出一个文件，并面临一些相同的问题。当我在文件中写入数据时，只有大约 85% 的数据被写入文件中，而当我使用计数器检查并打印数据时，它显示该过程 100% 完成。从逻辑上讲，所有数据都应该已写入文件，但这并没有发生。我试图到处寻找答案，我发现这可能是由于我正在编写的大量数据（大约 11 mb）。

那么有什么有效的方法可以让我完成我的任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:08:47.637

您需要关闭 FileWriter 对象并刷新 PrintWriter 对象。

```
objFileWriter.close();
ibjPrintWriter.flush(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:01:46.837

11 MB 非常小，因此如果您没有正确关闭文件，文件的末尾可能会被缓冲并丢弃。在Java 中，您可以编写多TB 文件，即文件系统可以处理的大小。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:05:25.463

```
try {
        FO1 = new FileWriter("ProximityPoint.txt");
        out=new PrintWriter(FO1);
    } catch (IOException e) {
        System.out.println("Exception 2");
    }
    for (int i=0;i<10;i++){
        for (int j=0 ;j<10;j++){
            for (int k =0; k<10 ;k++){
                /*Process is done here*/
                out.println(i+ ", " +j+ ", " +k+ ", "+ a variable);

            }
        }
    } 
```

这是我用于写入文件的代码。我省略了实际代码，因为我认为它不会影响写入文件。

* * *

bestsss 在这里的编辑：你 `out.close()`在循环之后错过了。

# c - 为什么在 C 中可以访问越界数组？

> ID：11362682
> 
> 赞同：2
> 
> 时间：2012-07-06T12:58:11.067
> 
> 标签：c, arrays

> **可能的重复：**
> [C 中的数组索引超出](https://stackoverflow.com/questions/671703/array-index-out-of-bound-in-c)
> [范围可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)
> [C 没有越界错误](https://stackoverflow.com/questions/9137157/c-no-out-of-bounds-error)

我正在尝试这个代码片段，

```
#include <stdio.h>

main(){
int a[2],i;
a[5] = 12;
for(i=0;i<10;i++){
    printf("%d\n", a[i]);
}
return 0;
} 
```

它给了我输出：

```
1053988144
32767
0
3
0
12
-1267323827
32716
0
0 
```

为什么 a[5] 是可访问的？不应该通过运行时错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:02:39.627

C 对数组访问没有边界检查，所以不应该。语言中没有什么可以阻止您尝试读取您可以想象的每个（虚拟）地址，尽管操作系统和/或计算机本身通常会抗议，这可能会产生某种异常。请注意，仅仅因为您“可以”（它编译并运行，似乎没有任何不良影响），并不意味着该程序是有效的或它“有效”。无效内存访问的结果是*未定义的行为*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T13:08:15.583

`int a[2];`意思是“分配内存`2 * sizeof(int)`”

`a[5]`是句法糖`*(a + 5)`，它指向一个内存区域`a + (5 * sizeof(int))`。所以`3 * sizeof(int)`过了你的数组的末尾。哪里是？谁知道？

一些语言会做边界检查，我听说一些 C 编译器也能做到这一点，但大多数都没有。为什么不做边界检查？表现。性能是首先使用 C 的主要原因。但这没关系，因为 C 程序员是优秀的程序员，*永远不会*超出数组的范围。（希望）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:03:44.963

不对索引范围执行任何控制。这就是 C 的工作方式。

# java - 使用 flex + servlet + jasper 在新的浏览器选项卡中显示 PDF 时出现问题

> ID：11362683
> 
> 赞同：1
> 
> 时间：2012-07-06T12:58:10.893
> 
> 标签：java, apache-flex, servlets, jasper-reports

我正在使用我的 reportService 类来生成包含我的报告的 JasperPrint 对象，然后将其发送到 Servlet 并生成 PDF。问题是这个 servlet 没有在新选项卡中打开 PDF（这就是我想要的），实际上它甚至没有提示我下载它或任何东西。

Servlet 调用者：

```
 try {
        URL url = new URL("http://" + serverName + ":" + serverPort + path
                + "/reportgenerator");

        HttpURLConnection connection = (HttpURLConnection) url
                .openConnection();

        connection.setRequestMethod("POST");
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);
        connection.setDefaultUseCaches(false);
        connection.setRequestProperty("Content-Type",
                "application/octet-stream");

        ObjectOutputStream out = new ObjectOutputStream(
                connection.getOutputStream());

        //This "jasperPrint" is my generated report from my service
        out.writeObject(jasperPrint);
        out.close();

        connection.getInputStream();

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

我的 Servlet 中的 doPost 方法：

```
@Override
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    JasperPrint jasperPrint = null;
    ObjectInputStream resultStream = null;
    ServletOutputStream out = response.getOutputStream();       

    try {

        resultStream = new ObjectInputStream(request.getInputStream());
        jasperPrint = (JasperPrint) resultStream.readObject();
        resultStream.close();

        byte[] rel = JasperExportManager.exportReportToPdf(jasperPrint);            
        out.write(rel,0, rel.length);

       //JasperExportManager.exportReportToPdfStream(jasperPrint, out);

        response.setContentLength(rel.length);          
        response.setContentType("application/pdf");
        response.setHeader("Content-Disposition",
                "attachment; filename=\"report.pdf\"");
        response.setHeader("Cache-Control", "no-cache");                        

        System.err.println(rel.length);

    } catch (JRException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } finally {                 
        out.flush();
        out.close();    
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:21:33.070

假设您有要在应用程序的 flex 端打开的文件的字节 []，您应该能够将文件写入临时位置然后打开它。它看起来类似于：

```
//create a temp dir in the system temp directory to place all the temp files for you app.
private static var tempDir:File=File.createTempDirectory();    

/**
 * bytes - the byte array of the pdf you want to open
 * filename - the name to use for the temp file, you may need to create some type of
 *            counter to add to the beginning of the filename so that you always get
 *            a unique name 
 */
public static openFile(bytes:ByteArray,filename:String):void{
   //create a file in the system temp directory to write the file to
   var tempFile:File = tempDir.resolvePath(filename);

   //create a filestream to write the byte array to the file
   var fileStream:FileStream = new FileStream(); 
   fileStream.open(tempFile, FileMode.WRITE); 
   fileStream.writeBytes(bytes,0,bytes.length);
   fileStream.close();

   //open the temp file with default application
   tempFile.openWithDefaultApplication();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:30:10.893

我已经解决了将 JasperPrint 作为 byte[] 返回到我的 flex 应用程序的问题，在 flex 中它将被视为 ByteArray（因为在我的情况下，它是由 graniteds 转换的）然后我只是调用我的 servlet 发送这个 ByteArray .

我正在寻找另一种解决方案，但它可以帮助其他人。

# php - PHP 代码清理

> ID：11362690
> 
> 赞同：-3
> 
> 时间：2012-07-06T12:58:58.223
> 
> 标签：php, mysql

我正在运行以下代码以从我的页面收集一些数据并将其存储在我的数据库中，但是，我需要为其添加一些额外的功能，但我似乎无法正确完成。

编码：

```
// Get Referrer and Page
if (isset($_GET["ref"])) 
{
// from javascript
$referer = $_GET["ref"];
$page = ((isset($_SERVER['HTTP_REFERER'])) ? (parse_url($_SERVER['HTTP_REFERER'], PHP_URL_PATH)) : (''));  
} 
else 
{
// from php
$referer = ((isset($_SERVER['HTTP_REFERER'])) ? ($_SERVER['HTTP_REFERER']) : (''));
$page = $_SERVER['PHP_SELF']; // with include via php       
} 

// Cleanup
if (basename($page) == basename(__FILE__)) $page = "" ; 
```

例如，此脚本将 $page 存储为“/site/index.php 或 /site/about.php”。我有点希望它在没有整个 /site/ 和 .php 部分的情况下将其存储为“索引或关于”。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:13:30.067

使用[pathinfo()](http://www.php.net/manual/en/function.pathinfo.php)，例如：

```
<?php
$page = "/site/index.php";
$page_info = pathinfo($page);
$page_name = $page_info['filename'];
echo $page_name; //output: index
?> 
```

# javascript - 奇怪的 JavaScript 范围行为

> ID：11362691
> 
> 赞同：0
> 
> 时间：2012-07-06T12:59:04.743
> 
> 标签：javascript, jquery, scope

Latey 我遇到了一些奇怪的 javascript 行为的麻烦。我想做这样的事情：

```
var lang = null;

function getLang() {
    if (browserLanguageIsGerman) {
        lang = 'de';
    }
    else {
        lang = 'en';
    }
    // alert(lang) shows "de"

    $('#someID').load(someValidUrl, null, 
        function(response, status, xhr) {
            if(languageSettingsOnFacebookIsGerman) {
                lang = 'de';
            }
            else {
                lang = 'en';
            }
            // alert(lang) show "en"
    );
    // alert(lang) shows "de"
} 
```

第一个和第二个警报显示预期值 1) "de" 2) "en"。第三个警报显示“de”但不应该是“en”吗？在第三个警报之后还会弹出第二个警报。

有人可以请我脑海中有明显的错误吗？:)

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T13:01:14.400

这不是范围的问题。该[`load`](http://api.jquery.com/load/)方法是异步的。第三个`alert`在您传递给的回调之前执行`load`。将依赖于该异步调用结果的任何代码移动到回调中。

或者，您可以查看[jQuery 延迟对象 API](http://api.jquery.com/category/deferred-object/)。请注意，如果您要使用延迟对象 API，则需要将 call to 更改为`load`对[`jQuery.get`](http://api.jquery.com/jQuery.get/)or的调用[`jQuery.ajax`](http://api.jquery.com/jQuery.ajax/)，因为`.load`它返回一个不实现 Promise 接口的 jQuery 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:04:23.637

不，不应该。“加载”不会等待从您的“someValidUrl”获取信息。相反，它会将您的内部函数推迟到稍后执行，当信息可用时，并立即返回而无需等待。它被称为“异步”。

# python - 来自新手的 Web.Py 中的 Python 错误

> ID：11362692
> 
> 赞同：1
> 
> 时间：2012-07-06T12:59:04.527
> 
> 标签：python, python-2.7, web.py

我是 Python 和 web.py 的新手，所以请原谅我的无知。我有一个正在运行的网页脚本，然后随机停止工作。我已经在这几天了，似乎无法解决这个问题。

我不断收到以下错误：

> 127.0.0.1:49664 - - [05/Jul/2012 23:58:42] “HTTP/1.1 GET /” - 500 内部服务器错误 127.0.0.1:49664 - - [05/Jul/2012 23:58:43] “HTTP/1.1 GET /favicon.ico” - 404 Not Found Traceback（最近一次调用最后一次）：文件“C:\Python27\lib\site-packages\web\application.py”，第 239 行，处理中返回 >self .handle() 文件“C:\Python27\lib\site-packages\web\application.py”，第 230 行，在句柄中返回 >self._delegate(fn, self.fvars, args) 文件“C:\Python27\ lib\site-packages\web\application.py"，第 419 行，在 _delegate cls = >fvars[f] KeyError: u'index'

这是我的 Python 脚本：

```
import web
from web import form
db = web.database(dbn='mysql', user='dbuser', pw='dbuser', db='database')
render = web.template.render('templates/')
urls = (
    '/', 'index',
    '/update/(\d+)', 'update'
)
app = web.application(urls, globals())
myform = form.Form(
    form.Radio('sentiment',[('1','Positive'),('3','Neutral'),('2','Negative'),('4','SPAM')],description='Sentiment',))

def insert_sentiment(id, sentimentvar):
    db.update('tweets', sentiment=sentimentvar, where="tweet_id=$id", vars=locals())

class update:
    def GET(self):
        tweets_index = db.select('tweets', where='sentiment is null', order='RAND()', limit=1)
        form = myform()
        return render.index(form, tweets_index)
        raise web.seeother('/')

    def POST(self, id):
        form = web.input()
        insert_sentiment(id, form.sentiment)
        raise web.seeother('/')

if __name__=="__main__":
    web.internalerror = web.debugerror
    app.run() 
```

模板存储在“模板”文件夹中，如下所示：

```
$def with (form,tweets_index)
$for tweets in tweets_index:
        $tweets.tweet
        $tweets.normalized_tweet
<form action="/update/$tweets.tweet_id" method="post">
    $:form.render()
    <input type="submit" value="update"/>
</form> 
```

如果我将索引页面的名称更改为其他名称，那么这就是错误中显示的内容。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:22:22.883

你没有一个`class index`with `GET`方法

# delphi - Delphi - 一个固定的 __llmulo (system.pas) 过程或类似的函数，它通过溢出检查实现 Int64 乘法

> ID：11362693
> 
> 赞同：2
> 
> 时间：2012-07-06T12:59:05.287
> 
> 标签：delphi, delphi-7

基于问题：[“Delphi - Detect Int64 Overflow Error”](https://stackoverflow.com/questions/11344263/delphi-detect-int64-overflow-error)。

是否有人拥有（或链接到）__llmulo 过程（system.pas），它正确地实现了 Int64 乘法和**正确的溢出检查**？或者也许是一个做类似事情的过程。

我发现[http://qc.embarcadero.com/wc/qcmain.aspx?d=34049](http://qc.embarcadero.com/wc/qcmain.aspx?d=34049)但它似乎（从页面中的评论）它有错误。

（我使用的是德尔福 7）

# api - 在进行 REST API 调用时，是否可以在 url 中包含授权密钥，就像在 GET 请求中一样？

> ID：11362702
> 
> 赞同：2
> 
> 时间：2012-07-06T12:59:42.763
> 
> 标签：api, rest, get, kettle, commission-junction

更具体地说，我正在查看 Commission Junction 的 Web 服务（[http://help.cj.com/en/web_services/web_services.htm#Commission_Detail_Service.htm](http://help.cj.com/en/web_services/web_services.htm#Commission_Detail_Service.htm)）并且授权密钥应该是“标题”的一部分为请求。

我可以仅使用 url 发送请求吗？例如（使用他们网站上的 URI）：https://publisher-lookup.api.cj.com/v2/joined-publisher-lookup? **授权=[开发者密钥]** &url=http%3A%2F%2Fwww.cj.com

此外，如果有人熟悉 Pentaho Data Integration v4.3（PDI 或 Kettle），将非常感谢使用 PDI 进行此 API 调用的帮助（这最终是我想要实现的）。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:00:36.860

对于 Firefox，有一个附加组件可以使用标头进行 REST API 调用：[https ://addons.mozilla.org/en-US/firefox/addon/modify-headers/](https://addons.mozilla.org/en-US/firefox/addon/modify-headers/)

Commission Junction 概述了如何使用它：[http ://www.cj.com/webservices/quick-start-guide](http://www.cj.com/webservices/quick-start-guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:57:16.427

这 100% 取决于佣金交界处，因为他们会在一个地方或另一个地方期待钥匙。他们可能已经允许在 URL 中传递它的方法，但它在他们这边的实现决定了这一点并且应该在他们的文档中。不会使 REST 模式本身无效。

听起来您无论如何都发现了如何在标头中传递参数 - 所以这可能是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T12:50:44.400

您应该将开发人员密钥作为 http 标头发送。这是 PHP 中的佣金连接 (CJ) 的示例代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://commission-detail.api.cj.com/v3/commissions?date-type=posting&start-date=" . date('Y-m-d', (time()-(24*3600))) . "&end-date=" . date('Y-m-d'));
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_GET, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("authorization: " . $yourdeveloperkey));
$result = curl_exec($ch);
curl_close($ch);
print_r($result); 
```

# php - htaccess - 可以阻止目录查看，但文件仍然可以直接查看

> ID：11362707
> 
> 赞同：4
> 
> 时间：2012-07-06T12:59:54.240
> 
> 标签：php, .htaccess

> **可能的重复：**
> [热链接我的级联样式表](https://stackoverflow.com/questions/6563721/hotlinking-my-cascading-style-sheets)

这是对这个问题的一点跟进[。htaccess 不允许用户查看没有 index.php 的文件夹文件，](https://stackoverflow.com/questions/7845315/htaccess-dont-allow-user-to-view-my-folder-files-that-dont-have-index-php)这非常适合阻止目录级别访问，但它仍然不会阻止直接访问如果有人知道网址

即 domain.com/css/ 是禁止的，但是 domain.com/css/main.css 显示的是css文件

我将如何阻止对该文件的直接访问？这似乎是一个标准的东西，但我找不到任何东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:06:51.687

您可以像这样设置限制：

```
Order Deny, Allow
Deny from all #everyone will not be allowed except the following line
Allow from 127.0.0.1 123.123.123.123 #allowed hosts separated by space 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:06:36.540

在`.htaccess`for目录下，可以写：

```
Deny from All 
```

这样，任何人都无法远程访问目录中的任何内容。

# ios - xcode：屏幕旋转仅适用于某些视图

> ID：11362708
> 
> 赞同：0
> 
> 时间：2012-07-06T12:59:55.367
> 
> 标签：ios, xcode, orientation

我创建了一个具有纵向和横向方向的项目。我应该怎么做才能只保持几个屏幕可旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:16:52.507

玩：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

如果您有`UITabBarController`，那么您将遇到问题，因为要么全部旋转，要么不旋转。虽然我认为有一些解决方法。

# ios - Core Audio (iOS 5.1) Reverb2 属性不存在，错误代码 -10877

> ID：11362709
> 
> 赞同：7
> 
> 时间：2012-07-06T12:59:59.770
> 
> 标签：ios, core-audio

我正在玩 Apple 的示例项目“LoadPresetDemo”。我已将混响音频单元添加`AudioUnit kAudioUnitSubType_Reverb2`到图表中，这是唯一可用的 iOS 混响。在 CoreAudio 头文件“AudioUnitParameters.h”中，它声明 Reverb2 应该响应这些参数：

```
enum {
    // Global, CrossFade, 0->100, 100
    kReverb2Param_DryWetMix = 0,
    // Global, Decibels, -20->20, 0
    kReverb2Param_Gain = 1,
    // Global, Secs, 0.0001->1.0, 0.008
    kReverb2Param_MinDelayTime = 2,
    // Global, Secs, 0.0001->1.0, 0.050
    kReverb2Param_MaxDelayTime = 3,
    // Global, Secs, 0.001->20.0, 1.0
    kReverb2Param_DecayTimeAt0Hz = 4,
    // Global, Secs, 0.001->20.0, 0.5
    kReverb2Param_DecayTimeAtNyquist = 5,
    // Global, Integer, 1->1000
    kReverb2Param_RandomizeReflections = 6,
}; 
```

在 AUGraph 初始化并启动后，一切都编译好了，我听到了声音。

接下来，我更改 kReverb2Param_DryWetMix 参数（更改为完全湿混）：

```
AudioUnitSetParameter(_reverbUnit, kAudioUnitScope_Global, 0, kReverb2Param_DryWetMix, 100.0f, 0); 
```

一切都好，我听到的声音带有完整的湿混合混响。

现在听到的是我遇到问题的地方。尝试更改除`kReverb2Param_DryWetMix`错误代码以外的任何参数时`-10877`。似乎头文件中列出的这些其他参数实际上并不存在。

例如，调用

```
AudioUnitSetParameter(_reverbUnit, kAudioUnitScope_Global, 0, kReverb2Param_DecayTimeAtNyquist, 20.0f, 0) 
```

抛出`-10877`错误。

这是一个错误吗？我是否省略了任何音频框架？我没有导入特定的音频头吗？

当前包含的音频框架是 AVFoundation 和 AudioToolbox。当前的音频导入是

```
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVFoundation.h>
#import <CoreAudio/CoreAudioTypes.h> 
```

我已经搜索了谷歌没有解决方案。我知道当 Google 路由失败时我会遇到问题。任何帮助将不胜感激。

注意：我用模拟器和 iPhone 4S 设备测试过，同样的问题。

**更新：**我试过了

```
AudioUnitGetParameter(_reverbUnit, kReverb2Param_DecayTimeAtNyquist, kAudioUnitScope_Global, 0, &value) 
```

它返回一个值`0.500000`，这意味着该属性确实存在。那么我在设置值时做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T15:00:48.970

嗬！我意识到我`AudioUnitSetParameter`对`AudioUnitSetProperty`, 包括它们的参数感到困惑。人，微妙而邪恶。

# php - 将 2 个表中的数据放入 mysql 视图中

> ID：11362711
> 
> 赞同：-1
> 
> 时间：2012-07-06T13:00:16.850
> 
> 标签：php, mysql

我正在尝试将一个表中的一些列合并到一个包含另一个表中所有数据的视图中。到目前为止，我失败了，这是我到目前为止所拥有的：

```
$create = "CREATE VIEW filter AS SELECT `".$db."`.`leads`.*, (`".$db."`.applicants.name AS lead_fname, `".$db."`.applicants.email AS lead_email, `".$db."`.applicants.appdate AS lead_added ) FROM `".$db."`.`leads`, `".$db."`.`applicants` WHERE ".$filterTerms." AND `lead_status` = '1' ORDER BY `lead_added`"; 
```

任何帮助，将不胜感激

我认为这就是我想要实现的目标：

视图 = 表 1 + 表 2

```
ID | email | name | appdate
1    data   data   data
2    data   data   data
3    data   data   data
4    data   data   data
5    data   data   data 
```

表格1

```
 ID | email | name | appdate
  1    data   data   data
  2    data   data   data 
```

表 2

```
 ID | s_email | s_name | s_appdate
 1    data      data   data
 2    data      data   data
 3    data      data   data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:15:34.570

根据更新的信息，您需要一个 UNION：

```
select email, name, appdate from table1
UNION
select s_email as email, s_name as name, s_appdate as appdate from table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:16:01.530

您需要在潜在客户表中有一列将其**连接**到申请者表（外键）。例如，如果潜在客户表中的 application_id 列与申请人表中的申请人 ID 列匹配：

```
CREATE VIEW filter AS
SELECT L.*, A.name as lead_fname, A.email as lead_email, A.appdate as lead_added
FROM leads L, applications A
WHERE L.application_id=A.applicant_id; 
```

您在数据库中创建视图（使用 phpMyAdmin 或类似的工具），而不是在 PHP 脚本中动态创建。

然后，您的 PHP 脚本可以像查询表格一样查询视图。

```
$sql = "SELECT * FROM filter WHERE " . $filterTerms . "AND lead_status = '1' ORDER BY lead_added"; 
```

# ios - 在不嵌套视图控制器的情况下组合用户界面

> ID：11362712
> 
> 赞同：0
> 
> 时间：2012-07-06T13:00:20.050
> 
> 标签：ios

我对 IOS 很陌生，但已经完成了几个简单的应用程序。我读过很多书，这些书帮助我入门，但我缺少一些关于如何最好地构建应用程序的更一般的建议——尤其是关于 UI 的建议。

我知道这是一个非常笼统的问题，所以我会尝试提出一个具体的问题。关于如何构建这个特定应用程序的建议.. 或关于类似主题的好读物的指针将不胜感激。

现在这个特定 iPad 应用程序的 UI 将如下所示：

主屏幕水平分为两部分。上三分之二是一种画布/工作空间下三分之一是带有各种项目的工具箱，可以拖动到工作空间。该工具箱具有不同的视图，其中包含各种类别的项目。可以说：一个视图具有各种几何图形，一个视图具有各种颜色。用户可以选择要在工具箱中显示的类别。最后在屏幕顶部是一个带有单个按钮的工具栏。

我对如何构建我的视图/视图控制器有点困惑。也许我的很多麻烦源于我没有完全理解 Apple 关于如何使用各种 UI 元素的指南——如果是这种情况，请随意说。

这就是我开始的方式。我将构建一个控制主视图的主 ViewController。主视图将包含上部工具栏。对于这个视图，我将添加两个子视图。一个用于工作空间，一个用于工具箱。工具箱视图让我有点困惑。我的想法是使它成为一个选项卡式视图，每个类别的项目都有一个选项卡。但是，据我了解，嵌套视图控制器势必会造成很多麻烦，情况就是如此。这是否意味着使用 tabviewcontroller 只控制屏幕的一部分是违反准则的？组成我自己的“标签栏”并在标签被标签时简单地在子视图之间切换会更好吗？

这是否也意味着，有一个弹出视图，只覆盖屏幕的一部分，导航控制器同样是不好的做法？或者这必须是一个模态视图？一个视图只占屏幕一部分的 tableviewcontroller 怎么样？如果没有有效地嵌套视图控制器，我看不到如何完成这些事情。

我确定我得到了完全颠倒的东西？

最好的问候托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:26:58.500

嵌套 ViewController 不是问题。事实上，在 iOS 5 中引入了 View Controller Containment 以使这更加容易。但是，在新的收容功能之前，它仍然是可能的。

嵌套两个 ViewController 的最简单方法如下：

```
SubViewController *theSubView = [[SubViewController alloc] init];
[self.view addSubview:theSubView.view]; 
```

然后子视图将由主视图控制器控制，`SubViewController`并将“嵌套”在主视图控制器中。（此代码将是主 ViewController 的一部分。）

要使用新的（er）视图控制器包含方法，您将创建主视图控制器的`SubViewController`a `childViewController`。

WWDC 2011 上有一段很棒的视频，介绍了 View Controller Containment。您需要成为开发人员才能[在此处](https://developer.apple.com/videos/wwdc/2011/)访问它。它被称为“实现 UIViewController 包含”。

我不建议以嵌套格式使用 TabBarController，您可以更轻松地构建自己的视图切换方法，甚至使用`UIScrollView`with `pagingEnabled`。

至于带有`NavigationController`s 的弹出视图，这是一种常见的做法。`NavigationController`创建一个包含其中的弹出窗口以执行诸如访问应用程序设置或从您的调色板配置工具或访问已保存的项目之类的操作，无论您能想象到什么，都没有错。

我希望这能让你有个好的开始。

# javascript - 在 web 视图中执行 JavaScript

> ID：11362714
> 
> 赞同：1
> 
> 时间：2012-07-06T13:00:25.783
> 
> 标签：javascript, android, webview

我有一个应用程序可以使用此代码在 web 视图中执行 JavaScript，它工作正常：

```
ivWeb.loadUrl(url); 
```

我将收到一些 JavaScript 代码作为文本字符串。有什么方法可以执行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:01:16.427

称呼：

```
ivWeb.getSettings().setJavaScriptEnabled(true); 
```

# android - 未捕获的 ReferenceError：PhoneGap 未在文件中定义

> ID：11362716
> 
> 赞同：0
> 
> 时间：2012-07-06T13:00:27.927
> 
> 标签：android, cordova

这是我的 downloader.js 文件内容：

```
function Downloader() {}

Downloader.prototype.downloadFile = function(fileUrl,dirName,fileName,overwrite,win,fail) {

    //Make params hash optional.
    if (!fail) win = params;
    PhoneGap.exec(win, fail, "Downloader", "downloadFile", [fileUrl, params]);
};

PhoneGap.addConstructor(function() {
    PhoneGap.addPlugin("downloader", new Downloader());
    PluginManager.addService("Downloader", "com.phonegap.plugins.downloader.Downloader");
}); 
```

我已将此集成到 android 项目中。但是当我运行该项目时，我得到了`Uncaught ReferenceError: PhoneGap is not defined at file:///android_asset/www/js/downloader.js:10`。谁能告诉可能是什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:19:02.810

将 cordova.js 文件放在 downloader.js 文件之前，它应该可以工作。

```
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="downloader.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T00:18:19.807

我遇到了同样的问题，正如 Zoltan 所说，不能保证在 deviceready 事件中加载cordova.js 文件。所以我也处理了 onload 事件（或使用 jquery `$(document).ready()`）。确保两个事件都被触发，然后尝试获取 FileSystem。

# asp.net - Asp.net 到 Facebook 应用程序（任何按钮工作）

> ID：11362717
> 
> 赞同：-1
> 
> 时间：2012-07-06T13:00:30.737
> 
> 标签：asp.net, html, facebook, facebook-c#-sdk

我试图在 facebook 和 All(.net button html button javascript button ) 按钮上做应用程序不起作用。我寻找了另一个按钮，但它不再使用了！我可以使用哪个按钮，或者如何将工作按钮 asp.net 添加到 facebook 应用程序？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:49:23.087

如果您的 Facebook 应用程序位于 iframe 中，则支持包括 asp.net 在内的所有按钮/控件。我的建议是在您的页面所在服务器上的 Facebook iframe 之外测试您的应用程序，并确保事件处理程序按预期触发。

如果这在您的服务器上按预期工作，那么我将使用浏览器开发工具 [F12 -IE/Chrome/Firefox] 查看是否存在任何错误，这会阻止页面正确加载并解决这些问题，您应该美好的。

# performance - 使用单列 order by 子句时视图查询慢

> ID：11362718
> 
> 赞同：0
> 
> 时间：2012-07-06T13:00:38.630
> 
> 标签：performance, sql-server-2008-r2, sql-order-by

我有一个连接 24 个表（除了 1 个是左外连接）和 83 列的视图。当我从没有 order by 子句的视图中选择 * 时，它会在大约 4:27 秒内返回 27k 行所有列。如果我执行相同的选择但添加了“order by requestId”子句，则需要 83 分钟才能完成。被排序的列在原始表中被索引。

我尝试按 requestId 将它包装在 Select * from (.......) 顺序中，但得到相同的结果。

关于在哪里看的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:27:37.323

如果您对某列进行排序，则该列必须属于以下任何一项： - 只有该列存在的它自己的索引 - 或者在具有 WHERE 子句中的字段和 ORDER BY 中的字段的索引中子句的确切顺序。

最好告诉我查询。然后我可以和你一起头脑风暴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:30:02.640

如果您有时间浏览它，Explain 可能会告诉您更多信息，但我猜我会说它正在对所有 27,000 行进行完整排序，因为它找不到有用的有序索引来避免额外的排序。

在你所拥有的东西中很难发现，但一个简单的场景是

TableA KeyColumn,DataColumn，其中键列为主键

`Select * From TableA Order By KeyColumn`, 将使用有序的 PK 索引，因此不需要排序。

`select * From TableA Order By DataColumn`，将读取表格，然后进行排序。

为 Datacolumn 添加一个索引，并且不需要排序。

一旦你遇到更复杂的场景，可能你有一个有用的排序索引，但它不是最好的连接，所以它会快速连接，然后把所有时间都花在排序上。

如果我正在看这个并且该做什么并没有突然出现在我身上，例如。requestid 根本没有索引，然后我会开始从查询中删除表，直到我停止出现不良行为。然后放回去取回它，然后使用这个希望不那么费力的查询，`explain`看看我是否可以得到一个有用的索引或重述查询以使用更有用的索引。

祝你好运。

# c# - WCF Restful 端点配置以传递多个值

> ID：11362722
> 
> 赞同：1
> 
> 时间：2012-07-06T13:01:08.117
> 
> 标签：c#, asp.net, wcf

我创建了一个 WCF restful 服务，它以基本上是一个字符串的 xml 格式返回组信息。要获取此信息，我需要传递两个参数，例如 PersonId 和 GroupId - 都是字符串。在这里，一个人可以拥有多个组。逻辑是，如果我同时传递 - PersonId 和 GroupId，那么它将仅返回该组的特定信息，但如果我不传递 GroupId，则该方法将返回该人的所有组。到目前为止，我通过 get 方法使用此服务，例如

```
localhost/service/service.svc/getGroupInfo?PersonId=A100&GroupId=E100

or 

localhost/service/service.svc/getGroupInfo?PersonId=A100&GroupId= 
```

界面如下：

```
[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
string getGroupInfo(string PersonId, string GroupId); 
```

它给了我预期的准确结果。然后我尝试使其成为 RESTFull 并`UriTemplate`在`webInvoke`. 例如

```
[OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare,UriTemplate = "getGroupInfo/{PersonId}/{GroupId}")]
    string getGroupInfo(string PersonId, string GroupId); 
```

让我的服务像 RESTfull

```
localhost/service/service.svc/getGroupInfo/A100/E100 
```

它工作正常。但现在我的问题已经开始了。如果我没有设置 GroupId，它会给出服务未找到或错误请求错误。我想选择设置 groupId 。例如

对于单组

```
localhost/service/service.svc/getGroupInfo/A100/E100 
```

对于所有组

```
localhost/service/service.svc/getGroupInfo/A100 
```

可能吗？

等待您的宝贵回复..

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:27:45.010

您可以将模板更改为“getGroupInfo/{PersonId}/{GroupId=null}”，但我相信在查询所有组时，您的 URL 中仍需要尾部反斜杠

```
localhost/service/service.svc/getGroupInfo/A100/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:43:43.460

您必须创建 2 个方法：

```
[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare,UriTemplate = "getGroupInfo/{PersonId}")]
string getGroupInfo(string PersonId)
{
    return getGroupInfo(PersonId, null);
}

[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare,UriTemplate = "getGroupInfo/{PersonId}/{GroupId}")]
string getGroupInfo(string PersonId, string GroupId)
{
} 
```

要使用可选参数，您必须使用“？”

```
[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare,UriTemplate = "getGroupInfo/{PersonId}?GroupId={GroupId}")]
string getGroupInfo(string PersonId, string GroupId)
{
} 
```

# c# - 需要对这些代码进行解释

> ID：11362729
> 
> 赞同：0
> 
> 时间：2012-07-06T13:01:29.707
> 
> 标签：c#, sliding-tile-puzzle

我最近偶然发现了一个项目（使用 A* alg 的 8 谜题求解器），其中一些代码对我来说很奇怪，因为我以前从未见过类似的代码。

这条线是什么意思？这是什么 ？！

```
this[StateIndex] 
```

这是什么符号？我根本无法理解！我发布了该课程的示例，以便您几乎可以一起看到它。还有一个问题，像 StateNode 这样实现一个类是不是错了？它仅使用构造函数来初始化其字段，更糟糕的是，将它们全部声明为 public ！他/她应该没有为此任务实施Propertise吗？

```
public enum Direction 
{
    Up = 1, Down = 2, Left = 3, Right = 4, UpUp = 5, DownDown = 6, LeftLeft = 7, RightRight = 8, Stop = 9
}

class StateNode
{
    public int Parent;
    public List<int> Childs;
    public Direction Move;
    public Direction ParentMove;
    public byte[,] State;
    public byte Depth;
    public byte NullRow;
    public byte NullCol;
public StateNode()
{ }
public StateNode(int NewParent, Direction NewMove, Direction ParentMove, byte NewDepth, byte NewNullRow, byte NewNullCol)
{
    this.Parent = NewParent;
    this.State = new byte[5, 5];
    this.Move = NewMove;
    this.ParentMove = ParentMove;
    this.Depth = NewDepth;
    this.NullRow = NewNullRow;
    this.NullCol = NewNullCol;
    this.Childs = new List<int>();
}
}

class StateTree : List<StateNode>
{
    public static long MakedNodes;
    public static long CheckedNodes;
    public static byte MaxDepth;

    public List<int> Successor1(int StateIndex)
    {
        List<int> RetNodes = new List<int>();
        StateNode NewState = new StateNode();

        //Up
    if (this[StateIndex].NullRow + 1 <= 3 && this[StateIndex].ParentMove != Direction.Up)
    {
        NewState = ChangeItemState(this[StateIndex], StateIndex, Direction.Up, Direction.Down, Convert.ToByte(this[StateIndex].Depth + 1), this[StateIndex].NullRow, this[StateIndex].NullCol, Convert.ToByte(this[StateIndex].NullRow + 1), this[StateIndex].NullCol);

        this.Add(NewState);
        RetNodes.Add(this.Count - 1);
        StateTree.MakedNodes++;
        this[StateIndex].Childs.Add(this.Count - 1);
        if (NewState.Depth > StateTree.MaxDepth)
            StateTree.MaxDepth = NewState.Depth;

    }
    //Down
    //Left
    //Right

    return RetNodes;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:03:34.153

在您的*具体情况下*，它只是访问元素，因为它在**派生**自`List<T>`

但它也可以是[索引器](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)，它可以对您的类对象进行索引访问。

例如像这样声明类：

```
public class ListWrapper
{
    private List<int> list = ...

    public int this[int index]
    {
        return list[index];
    }
} 
```

并在使用后像

```
var lw = new ListWrapper(); 
//fill it with data 

int a = lw[2]; //ACCESS WITH INDEX EVEN IF THE TYPE IS NOT COLLECTION BY ITSELF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T13:05:37.740

它`Indexed Properties`在 C# .net 中。

您可以查看教程： http: [//msdn.microsoft.com/en-us/library/aa288464](http://msdn.microsoft.com/en-us/library/aa288464(v=vs.71).aspx) (v=vs.71).aspx在这里查看

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T13:18:33.987

`this[StateIndex]`正在使用当前类的索引器属性。indexer 属性允许您像访问数组一样访问集合或列表对象中的元素。例如：

```
List<string> strings = new List<string>();
strings.Add("Item 1");
strings.Add("Item 2");
strings.Add("Item 3");
string x = strings[0];  // Returns the first item in the list ("Item 1") 
```

但是，当您想要访问您自己的类的索引器属性时，您必须在它前面加上`this`关键字。您会注意到，在您的示例中，`StateTree`该类没有实现索引器属性，因此这可能会增加您的困惑。它起作用的原因是因为`StateTree`继承自`List<StateNode>`which 确实实现了索引器属性。

但是不要混淆具有索引器属性的类和数组。数组是完全不同的东西，尽管语法相似。数组是可以通过索引访问的对象列表。索引器属性是充当数组的单个对象的未命名属性。例如，`List<string>`有一个 indexer 属性，因此您可以使用与数组索引相同的语法访问它包含的项目（如上例所示）。但是，您仍然可以创建对象数组`List<string>`。例如：

```
List<string> strings1 = new List<string>();
strings1.Add("Item 1.1");
strings1.Add("Item 1.2");

List<string> strings2 = new List<string>();
strings2.Add("Item 2.1");
strings2.Add("Item 2.2");

List<string>[] stringsArray = new List<string>[] { strings1, strings2 };
object result;
result = stringsArray[0];  // Returns strings1
result = stringsArray[0][1];  // Returns "Item 1.2"
result = stringsArray[1][0];  // Returns "Item 2.1" 
```

就目前`StateNode`而言，它在技术上没有任何问题，并且拥有一个初始化所有字段值的构造函数并不罕见，但使用属性而不是公共字段总是更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T13:04:19.457

`this[StateIndex]`指向类中的一个元素。因为`StateTree`继承自 a `List<T>`，所以您有一个可以通过索引访问的集合（在这种情况下`this[N]`，`N`元素的 index.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T13:16:17.310

this[StateIndex] 是您提供类和索引属性的方式，例如

```
public class IndexedClass
{
  private List<String> _content;
  public IndexedClass()
  {
     _content = new List<String>();
  }
  public Add(String argValue)
  {
     _content.Add(argValue);
  }

  public string this[int index]
  {
     get
     {
        return _content[index];
     }
     set
     {
         _content[Index] = value;
     }
  }
} 
```

所以现在你可以做

```
IndexedClass myIndex = new IndexedClass();
myIndex.Add("Fred");
Console.Writeline(myIndex[0]);
myIndex[0] = "Bill";
Console.Writeline(myIndex[0]); 
```

至于 statenode，如果它是班级的本地节点（助手），那么您可以认为它还可以，但我不喜欢它，再过十分钟的工作就可以正确完成。如果它在议会中公开，那么我认为这是不可接受的。但这是一种意见。

# java - 处于等待状态的 HTTP 线程数量非常多

> ID：11362730
> 
> 赞同：0
> 
> 时间：2012-07-06T13:01:30.343
> 
> 标签：java, multithreading, performance, tomcat, jboss

使用 Java Visual VM：我可以看到将近 100 个线程处于 WAIT 状态。

在 JBoss Server.xml 我有：

```
 <!-- A HTTP/1.1 Connector on port 8080 -->
  <Connector port="8080" address="${jboss.bind.address}"
     maxThreads="250" strategy="ms" maxHttpHeaderSize="8192"
     emptySessionPath="true"
     enableLookups="false" redirectPort="8443" acceptCount="100"
     connectionTimeout="20000" disableUploadTimeout="true"/> 
```

我在 Jboss-Service.xml 中有一个 ThreadPool，如下所示：

```
 <mbean code="org.jboss.util.threadpool.BasicThreadPool"
      name="jboss.system:service=ThreadPool">
      <attribute name="Name">JBoss System Threads</attribute>
      <attribute name="ThreadGroupName">System Threads</attribute>
      <attribute name="KeepAliveTime">60000</attribute>
      <attribute name="MaximumPoolSize">10</attribute>
      <attribute name="MaximumQueueSize">1000</attribute>
      <attribute name="BlockingMode">run</attribute>
   </mbean> 
```

在 Thread Dump 中，大多数线程处于以下状态：

```
 "http-0.0.0.0-8180-97" - Thread t@7296
       java.lang.Thread.State: WAITING
        at java.lang.Object.wait(Native Method)
        - waiting on <23791834> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
        at java.lang.Object.wait(Object.java:485)
        at org.apache.tomcat.util.net.MasterSlaveWorkerThread.await(MasterSlaveWorkerThread.java:81)
        at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:107)
        at java.lang.Thread.run(Thread.java:619) 
```

Java Visual VM 还列出了非常高的 Daemon Threads Live: 176 Daemon: 171

我正在使用 JBoxx 4x

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:10:00.030

当一个工作线程空闲时，它通常在一个空队列中等待一些新的工作。

我怀疑这些线程正在等待更多的工作。

# codeigniter - 如何在加载之前检查控制器名称？

> ID：11362733
> 
> 赞同：0
> 
> 时间：2012-07-06T13:01:49.020
> 
> 标签：codeigniter, hmvc

我正在从事一项使用 HMVC 的任务。在其中，我必须在每次加载之前检查每个控制器名称并将其与数据库值进行比较。有什么办法可以完成这个任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:07:44.603

您可以使用**钩子**在创建控制器之前拦截执行。有关详细信息，请参阅[Hooks - 扩展框架核心](http://codeigniter.com/user_guide/general/hooks.html)。

这将在每个请求上执行，因此如果您确实需要将其与数据库值进行比较，请考虑使用[APC](http://php.net/manual/en/book.apc.php)之类的缓存来存储数据库条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:04:53.073

您可以使用获取控制器名称：

```
 $this->uri->segment(1); 
```

但是，如果您的控制器位于子文件夹结构中，这将不起作用。

# c# - 页面更新时清除bt-click方法功能

> ID：11362735
> 
> 赞同：0
> 
> 时间：2012-07-06T13:02:00.563
> 
> 标签：c#, asp.net

这是我的按钮：

```
protected void Button_Click(object sender, EventArgs e)
{
     ...//things it does
} 
```

当我更新页面时，谷歌浏览器（例如）询问我是否要重做上述操作。外行人会按下继续，动作会发生，但它不会发生。我怎样才能从“记忆”中清除这个动作，因为它不会再次发生？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:16:04.403

当您单击`F5`浏览器重新发送到服务器最后一个请求时。如果最后一个请求是一个`POST`，它将显示一个弹出窗口，询问用户是否要重新发送信息。这是每个浏览器的标准行为，您无法更改它。

避免此问题的现有模式是[`/Post/Redirect/Get`](http://en.wikipedia.org/wiki/Post/Redirect/Get)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:21:43.080

在按钮单击事件中完成处理后，您可以执行 Response.Redirect 回到同一页面。

# c# - 让 FileHelpers 2.0 处理带有多余逗号的 CSV 文件

> ID：11362742
> 
> 赞同：4
> 
> 时间：2012-07-06T13:02:30.657
> 
> 标签：c#, c#-4.0, csv, filehelpers

我目前正在使用 FileHelpers 库 (v2.0.0.0) 来解析 CSV 文件。CSV 文件映射到具有少量公共属性的类，假设有**N**。问题在于，默认情况下，FileHelpers 似乎无法正确处理用户指定的 CSV 文件包含**N-1**个以上逗号的情况。剩余的逗号只是附加到最后一个属性值。

我认为这必须可以通过[FileHelpers 的属性](http://filehelpers.sourceforge.net/attributes.html)进行配置，但我没有看到任何会忽略记录中没有匹配属性的字段的内容。

我查看了[RecordCondition](http://filehelpers.sourceforge.net/FileHelpers.RecordCondition.html) s，但是使用 ExcludeIfEnds(",") 之类的东西，如果它以逗号结尾，它看起来会完全跳过该行，但我只是希望它们被剥离。

我唯一的办法可能是预处理文件并去除任何尾随逗号，*这完全*没问题，但我想知道 FileHelpers 是否也可以这样做，也许我只是在文档中没有看到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:14:39.997

只是一个黑客/解决方法的想法：您可以创建一个名为“ExtraCommas”的属性并将其添加到您的类中，以便额外的逗号在那里序列化，而不是在对象的真实属性中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:09:17.830

如果逗号的数量不同，我认为你不走运，必须进行后期处理。但是，如果有固定金额，您可以在班级中设置空白字段。

```
[FieldOrder(5)] 
public string Blank1;

[FieldOrder(6)]
public string Blank2; 
```

这并没有真正咬我，因为我不使用 FileHelpers 类作为业务类，我将它用作构建业务类的对象。我存储它以供审核。我想有一次我尝试将 Blanks 的字段设为私有，但不知道结果如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-22T08:59:06.620

这是您可以使用的自定义方法，它可能不是最好的解决方案，但它会解决最后一个逗号问题。代码肯定可以更优化，这只是为了让您了解如何解决此类问题。

```
 int main(){
    StreamReader sr = new StreamReader(@"C:\Users\musab.shaheed\Desktop\csv.csv");
     var lineCount=File.ReadLines(@"C:\Users\musab.shaheed\Desktop\csv.csv").Count();
            for (int i = 0; i < lineCount;i++ ) {

            String fileText = sr.ReadLine();

            fileText=fileText.Substring(0, fileText.Length - 1);

            //store your data in here
            Console.WriteLine(fileText);

            };

            sr.Close();

} 
```

# xml - 由 magento 中的另一个站点提供的实时定价提要

> ID：11362743
> 
> 赞同：1
> 
> 时间：2012-07-06T13:02:33.870
> 
> 标签：xml, magento, feed

我们正在研究magento。但在这里我们必须使用 xml 提要从另一个网站获取产品价格。

实际上，我们正在使用 magento 开发珠宝网站。我们正在从后端添加产品。但黄金价格的涨跌取决于市场价值。那么我如何为产品分配价格。有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:43:37.330

您可以使用 magento api 根据黄金价格更新价格。你会

获取物品的当前价格并根据黄金计算新价格。

假设您有一件价格为 100 美元的物品，而该价格是基于每盎司 1,200 美元的黄金。现在黄金价格为每盎司 1,300 美元

所以你会做 1300/1200 = 1.083333333 1.083333333 * 100 = 108.3333333

所以你的新价格是 108.33 美元

# android - 如何编写像 Android ContentValues 这样的类？

> ID：11362747
> 
> 赞同：2
> 
> 时间：2012-07-06T13:02:59.677
> 
> 标签：android

我的问题是：Android SDK 有一个名为 ContentValues 的类。该类保留我们的值以轻松将它们保存到数据库。

但它有这些方法：

```
put(String key, Integer value)
put(String key, Float value)
put(String key, Byte value)  etc 
```

所以这意味着它可以获取并保留 Integer、Byte、Float、Double 等。

我想知道这个类如何保留所有这些不同类型的变量？

我知道如何使用它。我想知道我们怎样才能写出这样的课程

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:07:34.430

你的意思[是它是如何实现的](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/content/ContentValues.java)？或者它是如何使用的？为此，请查看 SDK 附带的 NotePad 示例应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:22:45.287

我还没有阅读整个教程，但我认为它可能会对您有所帮助：

[Java 序列化教程](http://www.tutorialspoint.com/java/java_serialization.htm)

# java - Swing 应用程序框架中的窗口关闭

> ID：11362750
> 
> 赞同：1
> 
> 时间：2012-07-06T13:03:06.680
> 
> 标签：java, swing, swingx, swing-app-framework

我正在为基于 Swing 的 Java 应用程序使用 Swing 应用程序框架 JSR(296)。

与 AboutBox 类似，我遵循了@Action 的用法，并在我的项目中添加了一些 JDialog 类。

问题是，当我关闭主框架时，我的应用程序仍然在后台运行。为了克服这个问题，我在主应用程序类的 configureWindow() 中添加了以下代码：

```
protected void configureWindow(java.awt.Window root) {

    root.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent e) {
        // write your code here
            Application.getInstance(MyApp.class).exit();
        }
    });
} 
```

但是，每当我关闭对话框（包括 AboutBox）时，通过此修改，它也会关闭主框架。

我应该怎么做才能防止整个应用程序退出并关闭对话框？

**更新：** 我正在使用允许创建 Swing 应用程序框架项目的 NetBeans IDE 7.01。它会生成一个项目骨架，如下所示：

```
MyApp 
|--myapp 
|   |--MyApp.java
|   |--MyAppAboutBox.java
|   |--MyAppView.java
|
|--myapp.resources
    |--MyApp.properties
    |--MyAppAboutBox.properties
    |--MyAppView.properties 
```

NetBeans IDE 允许从*Window->Properties 菜单*添加操作。

MyApp 类扩展了我的主类 org.jdesktop.application.SingleFrameApplication。

`MyAppView extends FrameView`这是我的主要观点。

的实现类`javax.swing.JDialog`在`myapp.view`包中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:33:35.400

[WindowEvent](http://docs.oracle.com/javase/6/docs/api/java/awt/event/WindowEvent.html)类有一个方法调用[getWindow()](http://docs.oracle.com/javase/6/docs/api/java/awt/event/WindowEvent.html#getWindow%28%29)，它返回正在关闭的窗口。

在您的`windowClosing`方法中，您可以检查：如果窗口是主应用程序窗口，请使用您当前拥有的代码。如果不是，只需调用[Window.dispose()](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#dispose%28%29)

**编辑**：我没有注意到您在应用程序中创建自定义对话框。也许您忘记处理它们？您应该在自动生成的关于框中添加类似代码：

```
@Action public void closeAboutBox() {
    dispose();
} 
```

并在对话框关闭时调用此操作。如果这不是问题，线程转储可能会帮助您在关闭主窗口时找出正在运行的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:39:06.743

我认为您真正要寻找的是`setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`. 看看[JavaDoc API](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29) ...

# optimistic-locking - 如何使用 JPA 注释获得乐观并发

> ID：11362757
> 
> 赞同：1
> 
> 时间：2012-07-06T13:03:30.773
> 
> 标签：optimistic-locking

我正在使用 JPA 3，带有注释（无映射文件）和提供者 org.hibernate.ejb.HibernatePersistence

我需要有乐观的并发性。

1）我试图依赖名为的标签，它没有工作。

2）所以我决定用java代码来做。我有一个 mergeServiceRequest 方法和一个 Request 类型的对象，如下所示：我启动一个事务，锁定请求对象，然后尝试从数据库中获取一个 Request 对象 newRequest，将其时间戳与当前一个请求进行比较。如果它们不匹配，我会抛出异常；如果它们匹配，那么我`enter code here`用当前时间更新当前请求并将其保存到数据库中。

我需要手动锁定对象，因为通过从会话启动事务，它不会锁定数据库中的行。我写了一些java代码，显示事务不会自动锁定数据库中的记录。

这种方法的问题是查询

```
Request newRequest=entityManager.createQuery("select r  from Request r where serviceRequestId =  " + request.getServiceRequestId()); 
```

总是返回与请求相同的对象。“请求”在会话 entityManger 中，查询总是返回会话中缓存的内容。我尝试了所有五个 query.setHint 行，我仍然得到相同的结果：没有执行数据库查询，结果直接来自会话缓存。

```
@Transactional
    public void mergeServiceRequest(Request request) {
        System.out.println("ServiceRequestDao.java line 209");
        EntityTransaction transaction = entityManager.getTransaction();
        transaction.begin();
        entityManager.lock(request, LockModeType.WRITE); // use to lock the database row

        Query query = entityManager.createQuery("select r  from Request r where serviceRequestId =  " + request.getServiceRequestId());
        //query.setHint("javax.persistence.cache.retrieveMode", "BYPASS");
        //query.setHint("org.hibernate.cacheMode", CacheMode.REFRESH);
        //query.setHint("javax.persistence.cache.retrieveMode", CacheMode.REFRESH);
        //query.setHint("javax.persistence.retrieveMode", CacheMode.REFRESH);
        //query.setHint(QueryHints.CACHE_USAGE, CacheUsage.DoNotCheckCache);

        Request newRequest=(Request)query.getSingleResult();

        if (! newRequest.getLastUpdatedOn().equals(request.getLastUpdatedOn())) {
            throw new StaleObjectStateException(request.getClass().toString(), request.getServiceRequestId());
        }

        request.setLastUpdatedOn(new Date(System.currentTimeMillis()));     
        entityManager.persist(request);
        entityManager.flush();      
        transaction.commit();   
    } 
```

3）所以我也尝试使用另一个会话获取查询newRequest，如果我这样做，newRequest 将与请求不同。但是由于某种原因，如果我这样做了，那么即使在事务提交之后，请求对象上的锁定也不会被释放。代码如下所示

```
@Transactional
    public void mergeServiceRequest(Request request) {
        System.out.println("ServiceRequestDao.java line 209");
        EntityTransaction transaction = entityManager.getTransaction();
        transaction.begin();
        entityManager.lock(request, LockModeType.WRITE); // use to lock the database row

        Request newRequest=findRequest(request.getServiceRequestId()); // get it from another session                   

        if (! newRequest.getLastUpdatedOn().equals(request.getLastUpdatedOn())) {
            throw new StaleObjectStateException(request.getClass().toString(), request.getServiceRequestId());
        }

        request.setLastUpdatedOn(new Date(System.currentTimeMillis()));     
        entityManager.persist(request);
        entityManager.flush();      
        transaction.commit();   
//lock on the database record is not released after this, and even after entityManager is closed
    } 
```

有人可以帮我吗？

谢谢。

丹尼尔

# objective-c - 如何获取以下数组的大小

> ID：11362763
> 
> 赞同：3
> 
> 时间：2012-07-06T13:03:45.587
> 
> 标签：objective-c, c, arrays

```
int first[] = {1, 4};
int second[] = {2, 3, 7};

arrayOfCPointers[0] = first;
arrayOfCPointers[1] = second;

NSLog(@"size of %lu", sizeof(arrayOfCPointers[0]) / sizeof(int)); 
```

我想要一个子数组数组。每个子数组需要有不同的大小。但我需要能够找出每个子数组的大小？

日志不断返回 1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:05:17.927

您需要将尺寸*存储*在某处。该语言不适用于裸 C 数组。您所拥有的只是第一个元素的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T15:02:38.660

我会编写一个包装类或结构来保存数组及其元数据（如长度）。

```
typedef struct tag_arrayholder
{
    int* pArray;
    int  iLen;
}ArrayHolder;

    int first[] = {1, 4};

    ArrayHolder holderFirst;
    holderFirst.pArray = first;
    holderFirst.iArrayLen = sizeof(first) / sizeof(int);

    arrayOfCPointers[0] = holderFirst;

    NSLog(@"size of %lu", arrayOfCPointers[0].iLen); 
```

或者，就像 trojanfoe 所说，存储标记最后位置的特殊值（正是以零结尾的字符串使用的方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:34:51.287

“sizeof”指令可用于了解数组使用的字节数，但它仅适用于静态数组，动态一则返回指针大小。因此，对于静态数组，您可以使用以下公式：sizeof(tab)/sizeof(tab[0]) 来了解数组的大小，因为第一部分为您提供以字节为单位的制表符大小，第二部分为元素的大小，所以结果是您数组中的元素数量！但是对于动态数组，唯一的方法是将大小存储在某处或在数组末尾放置一个“sentinal value”并编写一个为您计算元素的循环！

（对不起我的英语我是法语：/）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T14:58:40.627

该`NSLog`语句正在打印该值`1`，因为您使用的表达式是将数组第一个元素的大小（即 an 的`int`大小）除以 an 的大小`int`。

所以你目前拥有的是：

```
NSLog(@"size of %lu", sizeof(arrayOfCPointers[0]) / sizeof(int)); 
```

如果删除数组括号，您将获得所需的值：

```
NSLog(@"size of %lu", sizeof(arrayOfCPointers) / sizeof(int)); 
```

正如其他答案所指出的那样，如果将数组传递给另一个方法或函数，这将不起作用，因为在这种情况下传递的只是一个地址。上述工作的唯一原因是数组的定义在本地范围内，因此编译器可以使用类型信息来计算大小。

# c++ - 列出目录 C++ 中的文件

> ID：11362771
> 
> 赞同：2
> 
> 时间：2012-07-06T13:04:57.087
> 
> 标签：c++, winapi

我正在尝试使用[此示例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365200%28v=vs.85%29.aspx) 创建一个程序，该程序将列出`Windows::Forms::ListBox`.

由于用户不会进行任何输入，因此我不需要该 `void DisplayErrorBox(LPTSTR lpszFunction)`功能以及其他错误检查。

当我单击触发事件的按钮时，这就是列表框中显示的内容。

```
o //&#o/
/ //
/ //
/ //
/ //
/ //
/ //
/ // 
```

此外，每次单击按钮时只会出现一行。它应该找到目录中的所有文件并列出它们，而不是每次单击按钮时都找到下一个文件。

我也想使用相对的strPath，而不是绝对的......到目前为止，这就是我对代码所做的：

```
private:
    void List_Files()
    {
        std::string strPath =   "C:\\Users\\Andre\\Dropbox\\Programmering privat\\Diablo III DPS Calculator\\Debug\\SavedProfiles";     
        TCHAR* Path = (TCHAR*)strPath.c_str();

        WIN32_FIND_DATA ffd;
        LARGE_INTEGER filesize;
        TCHAR szDir[MAX_PATH];
        size_t length_of_arg;
        HANDLE hFind = INVALID_HANDLE_VALUE;

        // Prepare string for use with FindFile functions.  First, copy the
        // string to a buffer, then append '\*' to the directory name.

        StringCchCopy(szDir, MAX_PATH, Path);
        StringCchCat(szDir, MAX_PATH, TEXT("\\*"));

        // List all the files in the directory with some info about them.

        do
        {
          if (ffd.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
          {
              //If it's a directory nothing should happen. Just continue with the next file.

          }
          else
          {
                //convert from wide char to narrow char array
                char ch[260];
                char DefChar = ' ';

                WideCharToMultiByte(CP_ACP,0,(ffd.cFileName),-1, ch,260,&DefChar, NULL);

                //A std:string  using the char* constructor.
                std::string str(ch);
                String ^ sysStr = gcnew String(str.c_str());

              MessageBox::Show("File Found", "NOTE");
              ListBoxSavedFiles->Items->Add (sysStr);

          }
        }
        while (FindNextFile(hFind, &ffd) != 0);

        FindClose(hFind);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:11:23.960

[`FindFirstFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)永远不会被调用，你需要在调用之前调用它`FindNextFile()`：

```
HANDLE hFind = FindFirstFile(TEXT("C:\\Users\\Andre\\Dropbox\\Programmering privat\\Diablo III DPS Calculator\\Debug\\SavedProfiles\\*"), &ffd);

if (INVALID_HANDLE_VALUE != hFind)
{
    do
    {
        //...

    } while(FindNextFile(hFind, &ffd) != 0);
    FindClose(hFind);
}
else
{
    // Report failure.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:23:15.680

如果您不介意使用[Boost](http://www.boost.org/)，可以使用[`directory_iterator`](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#Class-directory_iterator)：

```
using boost::filesystem;

path p("some_dir");
for (directory_iterator it(p); it != directory_iterator(); ++it) {
    cout << it->path() << endl;
} 
```

它也可以在 Windows 上运行，而且看起来肯定要简单得多。当然，您需要稍微调整一下您当前的代码，但我认为从长远来看，这是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:11:26.453

演员阵容`(TCHAR*)strPath.c_str();`错了。从您的使用中`WideCharToMultiByte`我知道这`(TCHAR*)strPath.c_str();`是将 a`char const*` 转换为`wchar_t*`. 这不仅会丢失 a `const`，而且宽度也是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T13:39:38.427

如果您使用的是 Visual Studio，则将配置设置更改为`Use Multibyte Character set`. 这将使您的 TCHAR 东西无需任何转换即可编译。

# php - 反应式站点不适用于 IE

> ID：11362781
> 
> 赞同：0
> 
> 时间：2012-07-06T13:05:51.090
> 
> 标签：php, html, internet-explorer

我一直在使用[骨架反应页面模型构建](http://getskeleton.com)[个人网站](http://konecny.dyndns.biz)。我一直在使用 Chrome 来测试该网站，因为它是我的主要浏览器。在 Chrome 中一切正常，然而，昨天我第一次在 IE 8 和 IE 9 中打开它，该网站看起来很糟糕，但更重要的是，除了页脚之外，它已经失去了反应性功能。

在过去的几天里，我一直在努力弄清楚为什么 IE 拒绝动态调整页面大小，试图在页面的其他部分使用页脚 div。谁能指出导致问题的原因或如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:20:27.990

好吧，[文档](http://getskeleton.com/#support)中说：

> 不过有一个小问题 - 旧的非 CSS3 浏览器不会响应媒体查询，因此即使调整大小也会使用标准的 960 网格。

是的，IE8 可以被认为是一个“旧的非 CSS3”浏览器。

# android - 在android中使用phonegap的mysql连接

> ID：11362784
> 
> 赞同：0
> 
> 时间：2012-07-06T13:06:03.997
> 
> 标签：android, mysql, cordova

我想知道如何使用 PHP 和使用 web 服务的 Phonegap android 应用程序显示来自 Mysql 数据库的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:12:07.190

您不能直接将 php 页面放入 phonegap 应用程序。首先，您必须创建一个 Web 服务来获取您的数据。然后创建一个 html 页面，其中包含 javascript 代码来调用您的 Web 服务并显示数据。您可以使用 jQuery 调用比原始 javascript 更简单的 Web 服务。

# function - 有没有办法在 powershell 中捕获所有命名参数

> ID：11362785
> 
> 赞同：6
> 
> 时间：2012-07-06T13:06:03.633
> 
> 标签：function, powershell, arguments

考虑一下：

```
Function Foo 
{
    param(
        #????
    )
} 
```

我想这样称呼 Foo ：

```
Foo -Bar "test" 
```

没有它爆炸，我没有指定 $bar 参数。那可能吗？:)

更新：

我希望这个工作：

```
Function IfFunctionExistsExecute
{
    param ([parameter(Mandatory=$true)][string]$func, [parameter(Mandatory=$false)][string]$args)
    begin 
    {
        # ...
    }
    process
    {
        if(Get-Command $func -ea SilentlyContinue)
        {
            & $func $args   # the amperersand invokes the function instead of just printing the variable
        }
        else
        {
            # ignore
        }       
    }
    end
    {
        # ...
    }
}

Function Foo
{
    param([string]$anotherParam)
    process 
    {
        $anotherParam
    }
}

IfFunctionExistsExecute Foo -Test "bar" 
```

这给了我：

```
IfFunctionExistsExecute : A parameter cannot be found that matches parameter name 'Test'.
At C:\PSTests\Test.ps1:35 char:34
+ IfFunctionExistsExecute Foo -Test <<<<  "bar"
    + CategoryInfo          : InvalidArgument: (:) [IfFunctionExistsExecute], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,IfFunctionExistsExecute 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T18:49:51.990

我会建议两种选择。

首先：您可能需要考虑将整个函数 + 它的参数作为脚本块参数传递给您的 ifFunction ...

或：使用 ValueFromRemainingArguments：

```
function Test-SelfBound {
param (
    [Parameter(
        Mandatory = $true,
        HelpMessage = 'Help!'
    )]
    [string]$First,
    [Parameter(
        ValueFromRemainingArguments = $true
    )]
    [Object[]]$MyArgs
)

$Arguments = foreach ($Argument in $MyArgs) {
    if ($Argument -match '^-([a-z]+)$') {
        $Name = $Matches[1]
        $foreach.MoveNext() | Out-Null
        $Value = $foreach.Current
        New-Variable -Name $Name -Value $Value
        $PSBoundParameters.Add($Name,$Value) | Out-Null
    } else {
        $Argument
    }
}
    $PSBoundParameters | Out-Default
    "Positional"
    $Arguments

}

Test-SelfBound -First Test -Next Foo -Last Bar Alfa Beta Gamma 
```

在这种情况下，我使用 $MyArgs 来存储除了我的强制参数“First”之外的所有内容。比一些简单的 if 会告诉我它是命名参数（-Next，-Last）还是位置（Alfa，Beta，Gamma）。这样，您可以同时拥有高级函数绑定（整个 [Parameter()] 装饰）的优势，并为 $args 样式的参数留出空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:38:14.247

您可以在函数中使用 $args 变量，它是传递给函数的参数数组，例如

```
function Foo()
{
    Write-Output $args[0];
    Write-Output $args[1];
}

Foo -Bar "test" 
```

输出：

```
-Bar
test 
```

# c# - 在 WPF MVVM 中验证和保存数据如何正常工作？

> ID：11362786
> 
> 赞同：5
> 
> 时间：2012-07-06T13:06:19.877
> 
> 标签：c#, wpf, database, mvvm

我是 MVVM（和一点 WPF）的新手，在过去的几天里，我阅读了许多 Code Project 文章、博客文章和 Stackoverflow 问题。我的印象是，一旦从数据源（数据库）加载数据，数据绑定就可以很好地显示数据，并使模型与视图保持同步，同时更新视图中模型数据的所有其他外观。

但是我仍然不知道如何保存以及在验证之前应该如何正常工作。我有很强的 Windows 窗体和 ADO.NET 背景。我非常熟悉数据库访问层和视图更新的编码。那时，您有临时的临时数据，正在编辑，仅在视图中，以及模型类和数据库中数据的最后保存版本。模型类通常与数据库同步。它是包含尚未保存的数据的视图。

您还有一个保存按钮，它可以从控件中读取所有数据，在代码中对其进行验证，然后接受并将其保存到模型和数据库中，或者不更新模型并改为显示错误消息。如果出现错误，用户输入会保留在 UI 中以供用户更正。但是应用程序的其他部分无法看到它。并且您有一个取消按钮，它只会丢弃包含编辑控件的视图部分 - 模型仍然有效且未更改。

现在，数据绑定和 ViewModels 只是从模型类中公开数据，在 TextBox 中输入的内容会立即进入模型，无论它是否正确。IDataErrorInfo 仅此而已 - 提供信息。你可以看它或忽略它。唯一强制执行的硬验证是类型转换：您永远不能将非数字字符串更新为数字模型字段。但仅此而已。我将通过让 ViewModel 进行所有验证并从属性设置器对无效数据抛出异常来解决这个问题。这是实现已知行为的唯一方法。

但是数据的保存和丢弃到哪里去了？我什么时候才能真正将数据写回数据库？TextBox 的每次离开都会导致数据库写入，因此我不再需要显式的 Save 命令（并且只能通过 Undo 恢复）？我什么时候验证整条数据记录？我将如何处理模型和数据库不同步，由于数据绑定而导致无效输入立即传播到整个应用程序和所有视图？何时以及如何使用取消按钮丢弃任何用户输入，保持模型不变 - 或将其恢复到打开编辑器对话框之前的状态？

我觉得 MVVM 并没有为这些基本问题提供解决方案。我只是想念他们还是他们真的不存在？如果 MVVM 不能解决这个问题，那是什么？或者 MVVM 最好不要用于 WPF 中的数据编辑应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T13:36:27.483

MVVM 不会为您解决这些问题——您有灵活性（权力？负担？）以您选择的任何方式解决数据库写入问题。如果您需要在保存回数据库之前收集所有数据，您可以这样做 - 只需在 ViewModel 上添加一个绑定到 SaveCommand 的 Save 按钮，该按钮执行您的数据访问存储过程/实体框架更新方法/无论什么。如果您想单独记录每一位数据，那么您需要在其他地方调用数据访问过程（可能是视图模型上的属性设置器？）

本质上，MVVM 并不是一个完整的端到端软件模式。它只关注用户所看到的（列表框、文本框和按钮）与应用程序本身之间的通信。您的数据访问代码、序列化、存储、持久性，无论您在使用什么，以及无论您如何使用它，都保存在应用程序的 MVVM 端，在您的应用程序代码（模型）中。你可以随心所欲地写这个。

我目前正在编写一个应用程序，用户填写表格并点击保存或取消。保存和取消都是绑定到 ViewModel 上的命令的按钮。在 ViewModel 构造函数中，模型对象的属性被复制到 ViewModel 的属性中。保存时，ViewModel 的属性被复制回模型的属性并启动数据访问代码。在取消时，模型的属性被复制回 ViewModel 的属性。

```
class MyViewModel
{
   public MyViewModel(MyModel model)
   {
      this.Name = model.Name;
      this.Colour = model.Colour;
   }

   public string Name {get;set;}
   public string Colour {get;set;}

   // commands here that connect to the following methods

   public void Save()
   {
      model.Name = this.Name;
      model.Colour = this.Colour;
      model.SaveToDatabase();
   }

   public void Cancel()
   {
      this.Name = model.Name;
      this.Colour = model.Colour;
   }

} 
```

这是一种简单的方法 - 当然，您需要投入`INotifyPropertyChanged`其中的其余部分，还有其他选择。但是我发现这种方法很容易理解正在发生的事情，并且是添加您可能需要添加的任何其他内容的良好基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:42:13.433

使用 MVVM，您可以将视图中的控件绑定到 ViewModel 中的属性和命令。模型代表您的数据库。

可以通过多种方式验证用户输入。您可以限制文本框只接受某些数据，您可以在属性设置器等中验证数据等。

我不是数据库专家，但我会在我的 VM 中收集信息并在视图中的某处添加一个保存按钮，该按钮验证数据并将其写入数据库。取消按钮可以用模型（数据库）中的（未更改的）值覆盖 VM 属性。

（编辑：皮特说的话：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:41:43.493

我认为您将 ViewModel 与数据库混淆了，您的视图绑定到 ViewModel 中的对象，当离开 TextBox 时，TextBox 中的任何内容都将分配给仍在内存中的 ViewModel 对象。您将需要一个保存按钮，MVVM 只是一种将传统视图和代码分离的模式，用于解耦和简单的单元测试。单击保存按钮后，您仍然需要执行数据验证。要丢弃用户输入并恢复到以前的状态，您可以在编辑之前保存 ViewModel 数据，或者使用实体框架来跟踪和管理数据更改。

# visual-c++ - 带有不透明控件的 wxWidgets 透明框架

> ID：11362793
> 
> 赞同：1
> 
> 时间：2012-07-06T13:06:38.863
> 
> 标签：visual-c++, wxwidgets

当我使用 wxTopLevelWindow::SetTransparent() 使框架半透明时，我有一个带有 wxStaticBitmap 的框架，staticbitmap 也变得透明。有没有办法只使框架透明而不使控件透明？（类似于 Windows 7 的任务栏和开始菜单）。

提前致谢，

祝你今天过得愉快！拉詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:34:42.220

您是否尝试过使用适合框架客户区域的面板，然后使面板而不是框架成为控件的父级？这在许多不同的方面效果更好，所以我怀疑它可能会在这里解决你的问题。您可以将框架设置为透明，但强制面板不透明，这应该级联到面板的所有子窗口。

（我自己没有尝试过 - 恕我直言透明框架很难看）

# grails - 如何更改gsp中的数字模式？

> ID：11362794
> 
> 赞同：0
> 
> 时间：2012-07-06T13:06:40.027
> 
> 标签：grails, groovy, gsp

我有一个域类，它有一个数字字段。默认脚手架生成它。当我输入一个超过 3 位的数字时，例如：- 1234，然后在 show.gsp 和 list.gsp 中显示为 1,234。我的要求是显示不带逗号的数字。我不能使用 g:formatNumber，因为我有超过 50 个域并且不能为每个 gsp 页面使用这个标签。我能做些什么来改变全球的数字模式吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:58:07.880

也许[这里](https://stackoverflow.com/a/4440299/584392)建议的解决方案可能有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:32:24.373

直接获取字段，如：

```
<td valign="top" class="value">${formulationTypeInstance?.id}</td> 
```

当然，您可能会失去一些标签的功能，例如在发生验证错误时突出显示字段。但是你在 show.gsp 中，它不应该有文本字段或要提交的东西，所以你什么都不会丢失！简单是去这里的方法。=)

# ios - NSNumberFormater 在 Cocoa 中工作，但在 iOS 中不工作

> ID：11362801
> 
> 赞同：1
> 
> 时间：2012-07-06T13:07:06.210
> 
> 标签：ios

在我的 Cocoa 应用程序中，我使用以下内容在标签中设置数字格式

```
NSNumberFormatter *numberFormatter =
      [[[NSNumberFormatter alloc] init] autorelease];
     NSMutableDictionary *newAttrs = [NSMutableDictionary dictionary];

    [numberFormatter setFormat:@"###,##0;(###,##0)"]; 
     [newAttrs setObject:[UIColor redColor] forKey:@"NSColor"];
     [numberFormatter setTextAttributesForNegativeValues:newAttrs];

     [[datacellR1C2 cell] setFormatter:numberFormatter]; 
```

当我使项目适应 iOS 时，我在使用它时遇到错误。我收到错误消息“未找到 setFormat”</p>

我应该在使用 UIKit.h 构建的 iOS 应用程序中使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:23:51.960

该`setFormat:`方法在 iOS 中不可用（请参阅[NSNumberFormatter 类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003705)）。
请改用`setPositiveFormat:`and`setNegativeFormat:`方法。

# c# - C# - exe [进程 ID] 中出现未处理的 Win 32 异常

> ID：11362804
> 
> 赞同：-1
> 
> 时间：2012-07-06T13:07:14.037
> 
> 标签：c#, windows, winforms

我的 c# windows 应用程序突然崩溃，DR.watson 记录了以下应用程序异常

发生应用程序异常：应用程序：C:\Program Files\InstalltionFolder\Application.exe (pid=296) 时间：5/24/2012 @ 11:13:00.141 异常编号：e0434f4d ()

您的帮助将不胜感激。

Rgds P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:11:50.023

你可以检查你的注册基地

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AeDebug\Debugger

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\DbgManagedDebugger 
```

并且您必须获得许可

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:12:09.803

您需要在 Visual Studio 中调试您的应用程序。加载它，在 Debug 模式下构建它，然后按 F5 或从菜单中选择 Debug -> Start Debugging。

然后做你之前做的事情以获得异常。Visual Studio 将“捕获”异常，并希望向您显示有关该问题的更多信息。

在不知道异常代码的情况下，无法提供更多帮助。

# html - 一个表单中的两个提交按钮执行两个不同的 servlet

> ID：11362811
> 
> 赞同：0
> 
> 时间：2012-07-06T13:07:57.083
> 
> 标签：html, servlets

我有一个有两个提交按钮的表单。一个用于创建用户，另一个用于登录现有用户。我怎样才能从这两个按钮中触发两个不同的 servlet，使它们保持在一个单一的形式中？

就像如果单击创建按钮然后执行 create.java 并且如果触发登录按钮然后执行 login.java

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:15:02.447

如果您想使用 JavaScript，这是一个使用 jQuery ajax 的示例：

```
$(document).ready(function() {

    $('#id_of_your_button').click(function() {

            // do some stuff here, e.g.
            var str = $("#your_html_form").serialize();

            $.ajax({
          type: "POST",
          url: "url_to_your_file",
          data: str,
          success: function(msg) {

                      //...

              }
        }); 
        }

        // prevent the default action, e.g., following a link
        return false;
    });
}); 
```

编辑：

如果你想在没有 JavaScript 的情况下这样做，你可以这样做`<a href="page-to-register-new-user"><input type="button" value="register"></a>`

否则，如果您希望立即提交表单，则只能采用两个表单，或使用 JavaScript（也可以通过其他方式，例如，您可以根据用户单击的按钮等使用 JavaScript 更改操作 URL）。 .

...但每个 HTML 表单只允许一个“提交”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:11:02.217

查看本教程关于 HTML 按钮的 onclick 事件：[这里](http://www.w3schools.com/jsref/event_onclick.asp)

例子：

```
<script type="text/javascript">
function copyText()
{
document.getElementById("field2").value=document.getElementById("field1").value;
}
</script>

<button onclick="copyText()">Copy Text</button> 
```

[资源](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onclick)

# string-matching - 模糊/弹性/分散字符串匹配

> ID：11362813
> 
> 赞同：1
> 
> 时间：2012-07-06T13:08:05.053
> 
> 标签：string-matching, fuzzy-search, scatter

每个人都见过 Textmate 通过输入文件的部分路径/名称（可能不输入全名）来搜索文件（也通过 emacs 的 ido/icicles、vim 的 Command-T、Sublime Text 2、XCode 等）使用的“模糊”字符串匹配，只是一些部分）。这也被 QuickSilver、LaunchBar 和 Alfred 等应用程序推广。

所以我想知道是否有任何想法如何建立一个索引来加速这种匹配？我有数千个字符串的列表（现在大约 7k - 来自 iTunes 的歌曲列表），我想快速匹配它们。现在我刚刚采用了 QuickSilver 评分算法，在某些查询上可能需要 5 秒才能执行。

欢迎任何想法如何加快速度。

# c# - NHibernate Map-by-Code ComponentAsId 中的列无效

> ID：11362816
> 
> 赞同：2
> 
> 时间：2012-07-06T13:08:09.917
> 
> 标签：c#, nhibernate, nhibernate-3

我有下表

tblChild

父代号子号名称

`FatherCode`并且`ChildNumber`是表的主键。

由于在这个数据库中经常发生这样的事情（我对它有零控制），我为我创建了以下类来映射 Id：

```
public class ComposedId {
   public virtual int FatherId {get;set;}
   public virtual int ChildId {get;set;}
   //More code implementing Equals and GetHashCode
} 
```

现在，映射是这样的：

```
aMapper.Class<Child>(aClassMapper => aClassMapper.ComposedId(aComposedIdMapper =>
                {
                    aComposedIdMapper.Property(aChild => aChild.Id); //Id's implementation is: public virtual ComposedId Id {get;set;}
                }));

aMapper.Class<Child>(aClassMapper => aClassMapper.ComponentAsId(aChild => aChild.Id, aComponentAsIdMapper =>
    {
        aComponentAsIdMapper.Property(aComposedId => aComposedId.FatherId, aPropertyMapper => aPropertyMapper.Column("FatherCode"));
        aComponentAsIdMapper.Property(aComposedId => aComposedId.ChildId, aPropertyMapper => aPropertyMapper.Column("ChildNumber"));
    })); 
```

但是当我尝试查询表时，NHibernate 会尝试将 Id 作为列获取。

我不知道我做错了什么，我尝试了很多方法来用这种结构映射它，但没有任何效果:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T01:41:57.467

映射中的第一行不正确。

我使用了这个，这只是您的代码的简化版本：

```
mapper.Class<Child>(cm => cm.ComponentAsId(
    x => x.Id,
    caim =>
    {
        caim.Property(x => x.FatherId, pm => pm.Column("FatherCode"));
        caim.Property(x => x.ChildId, pm => pm.Column("ChildNumber"));
    })); 
```

它正确地生成了这个映射（XML序列化）：

```
<composite-id class="ComposedId" name="Id">
  <key-property name="FatherId" column="FatherCode" />
  <key-property name="ChildId" column="ChildNumber" />
</composite-id> 
```

...这反过来会产生正确的 SQL。

您在评论中说您尝试不使用第一行，但您可能在测试时忘记编译、部署或重新启动服务器。

附带说明一下，如果您重命名 的属性`ComposedId`以匹配 db 并使用`ConventionModelMapper`，您甚至不必手动映射 Id。

* * *

为了获得 XML 映射，我使用了这个：

```
var mappingDocument = mapper.CompileMappingForAllExplicitlyAddedEntities();
new XmlSerializer(typeof(HbmMapping)).Serialize(Console.Out, mappingDocument); 
```

# c# - DbDataReader、NextResult() 和填充多个表

> ID：11362821
> 
> 赞同：3
> 
> 时间：2012-07-06T13:08:37.263
> 
> 标签：c#, sql, ado.net, dataset, datareader

这个问题是我[上](https://stackoverflow.com/questions/11345761/how-to-fill-dataset-with-multiple-tables)一个问题的延续。在不涉及太多细节的情况下，我将使用 2 个相关的一对多表填充数据集。所以，我现在的问题是 - 为什么这段代码运行良好

```
public DataAgencyR_DataSet SelectOne(int id)
{
    DataAgencyR_DataSet result = new DataAgencyR_DataSet();
    using (DbCommand command = Connection.CreateCommand())
    {
        try
        {               
            command.CommandText = SqlStrings.SelectDataAgencyR_SelectOne();

            var param = ParametersBuilder.CreateByKey(command, "ID_DeclAgenc", id, "ID_DeclAgenc");
            command.Parameters.Add(param);
            Connection.Open();
            using (DbDataReader reader = command.ExecuteReader())
            {
                while (reader.Read())
                {
                    System.Diagnostics.Trace.WriteLine(String.Format("{0}-{1}", reader[0], reader[1]));
                }
                System.Diagnostics.Trace.WriteLine("-------------");
                reader.NextResult();
                while (reader.Read())
                {
                    System.Diagnostics.Trace.WriteLine(String.Format("{0}-{1}", reader[0], reader[1]));
                }
            }

        }
        catch (DbException e)
        {
            Logger.Error(e.Message, e);
            throw new DataAccessException("Error occurs while SelectOne method porcessed", e);
        }
        finally
        {
            if (Connection.State != ConnectionState.Closed)                     Connection.Close();
        }
    }
    return result;
}

public static string SelectDataAgencyR_SelectOne()
{
    return "SELECT a.* FROM t0_DataAgency_R a WHERE a.SetToPartners = 1 AND a.ID_DeclAgenc = @ID_DeclAgenc;" +
                   "SELECT c.* FROM t01_ChoiceParam_R c JOIN t0_DataAgency_R a on a.ID_DeclAgenc = c.ID_DeclAgenc WHERE SetToPartners = 1 AND a.ID_DeclAgenc = @ID_DeclAgenc";
} 
```

这不是

```
public DataAgencyR_DataSet SelectOne(int id)
{
    DataAgencyR_DataSet result = new DataAgencyR_DataSet();

    using (DbCommand command = Connection.CreateCommand())
    {
        try
        {               
            command.CommandText = SqlStrings.SelectDataAgencyR_SelectOne();             
            var param = ParametersBuilder.CreateByKey(command, "ID_DeclAgenc", id, "ID_DeclAgenc");
            command.Parameters.Add(param);
            Connection.Open();
            using (DbDataReader reader = command.ExecuteReader())
            {
                result.t0_DataAgency_R.Load(reader);
                reader.NextResult();
                result.t01_ChoiceParam_R.Load(reader);
            }
        }
        catch (DbException e)
        {
            Logger.Error(e.Message, e);
            throw new DataAccessException("Error occurs while SelectOne method porcessed", e);
        }
        finally
        {
            if (Connection.State != ConnectionState.Closed) Connection.Close();
        }
    }
    return result;
}

public static string SelectDataAgencyR_SelectOne()
{
    return "SELECT a.* FROM t0_DataAgency_R a WHERE a.SetToPartners = 1 AND a.ID_DeclAgenc = @ID_DeclAgenc;" +
                   "SELECT c.* FROM t01_ChoiceParam_R c JOIN t0_DataAgency_R a on a.ID_DeclAgenc = c.ID_DeclAgenc WHERE SetToPartners = 1 AND a.ID_DeclAgenc = @ID_DeclAgenc";
} 
```

在第二个示例之后，我只填写了 result.t0_DataAgency_R 表 - 但没有填写 result.t01_ChoiceParam_R。为什么会这样？

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T13:10:46.363

`DataTable.Load`自动将阅读器推进到下一个结果。因此，您应该删除对`NextResult`.

意义：

```
using (DbDataReader reader = command.ExecuteReader())
{
    result.t0_DataAgency_R.Load(reader);
    result.t01_ChoiceParam_R.Load(reader);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T15:02:03.397

添加数据集...我们曾经使用 SqlDataAdapter 并返回一个数据集，但没有利用任何离线功能等，因此 SqlDataReader 更适合。这是填充数据集的代码。发现这总体上快了大约 10%。

```
 Dim s As DataSet = New DataSet()

                Using reader As SqlDataReader = command.ExecuteReader()
                    Dim tables As New List(Of DataTable)
                    Do
                        Dim table As New DataTable()
                        table.Load(reader)
                        tables.Add(table)
                        s.Tables.Add(table)
                    Loop While Not reader.IsClosed

                    s.Load(reader, LoadOption.OverwriteChanges, tables.ToArray())
                End Using 
```

# jquery - 如何将 jQuery 库正确添加到 Spring MVC 项目？

> ID：11362822
> 
> 赞同：1
> 
> 时间：2012-07-06T13:08:37.410
> 
> 标签：jquery, spring, spring-mvc

我想问一下如何将 jQuery 库正确添加到 Spring MVC 项目中。在`src/webapp`目录中我有`resources`文件夹。我已经创建了内部`js`目录。然后我粘贴了下载的 jQuery 库。但是 Eclipse 发现了一些错误，现在我无法运行我的项目。那么在 Spring MVC 项目中添加和正确使用 jQuery 库的方法是什么？也许使用 Maven 添加一些依赖项`POM.xml`？

我已经创建了这个问题[How to include the jQuery library in a Spring-MVC Eclipse project](https://stackoverflow.com/questions/4137128/how-to-include-the-jquery-library-in-a-spring-mvc-eclipse-project)但它没有解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:24:46.957

```
<script type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

只需将其放在您的 jsp 页面的头部即可。从[这里](https://developers.google.com/speed/libraries/devguide)。或者，如果您想手动提供自己的 jquery 文件，请将其添加到应用程序上下文中（并在 yr webapp 文件夹中创建 javascript 目录）：

```
<mvc:resources location="/javascript/" mapping="/javascript/**" /> 
```

然后在jsp中

```
<c:url var="jq" value="/javascript/jquery.js" />
<script type="text/javascript" src="${jq}"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:29:44.593

使用谷歌 CDN：

```
<script type="text/javascript src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script> 
```

# java - 在java中调用带有超时的阻塞方法调用

> ID：11362823
> 
> 赞同：1
> 
> 时间：2012-07-06T13:08:43.230
> 
> 标签：java, java.util.concurrent, concurrent-programming

我想在java中调用一个由于某种原因而阻塞的方法。我想等待该方法 X 分钟，然后我想停止该方法。

我在 StackOverflow 上阅读了一个解决方案，它给了我第一个快速入门。我在这里写：-

```
ExecutorService executor = Executors.newCachedThreadPool();
    Callable<Object> task = new Callable<Object>() {
       public Object call() {
          return something.blockingMethod();
       }
    };
    Future<Object> future = executor.submit(task);
    try {
       Object result = future.get(5, TimeUnit.SECONDS); 
    } catch (TimeoutException ex) {
       // handle the timeout
    } catch (InterruptedException e) {
       // handle the interrupts
    } catch (ExecutionException e) {
       // handle other exceptions
    } finally {
       future.cancel(); // may or may not desire this
    } 
```

但现在我的问题是，我的函数可以抛出一些异常，我必须捕获并相应地执行一些任务。因此，如果在代码中函数 blockingMethod() 引发了一些异常，我如何在 Outer 类中捕获它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:14:20.027

在您提供的代码中，您已经完成了所有设置。只需更换

```
// handle other exceptions 
```

与您的异常处理。
如果您需要获取您的具体信息`Exception`，您可以通过以下方式获得它：

```
Throwable t = e.getCause(); 
```

为了区分您的异常，您可以这样做：

```
if (t instanceof MyException1) {
  ...
} else if (t instanceof MyException2) {
  ...
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:11:57.650

我想在[ExecutionException](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutionException.html)实例中`cause`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:14:27.493

在`ExecutionException`catch 块中：`e.getCause()`

[https://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getCause](https://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getCause)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T13:14:59.660

thread.sleep(x millisecods) 将停止线程 x 毫秒，然后它将恢复。另一种方法是调用 thread.wait(x)（x 具有超时值），然后调用 thread.notify() 以“唤醒”睡眠线程。

# qt - 通过 qlineedit 在表中搜索特定条目？

> ID：11362827
> 
> 赞同：0
> 
> 时间：2012-07-06T13:09:00.477
> 
> 标签：qt

我想要的是，如果我在文本框中输入一个 ID，然后按 Enter，那么如果该 ID 存在，那么它会显示在表格上，表格的值会在地图的帮助下插入到另一个窗口中，该窗口来自该窗口Box1 作为地图打开。所以据我所知，我们必须运行 map 的 find 命令，然后使用 if 循环，如果文本框中输入的值存在则将以与显示虚拟数据相同的方式显示它。使用的代码

```
Box1::Box1(QWidget *parent)
        :QDialog(parent)
    {
    searchgroup = new QGroupBox(tr("Data Search"));

    QHBoxLayout *layout2 = new QHBoxLayout;
    text = new QLineEdit(this);
    searchh = new QLabel(tr("&Enter ID:"));
    searchh->setBuddy(text);
    layout2->addWidget(searchh);
    layout2->addWidget(text);
    searchgroup->setLayout(layout2);
    tableegroup = new QGroupBox(tr("Searched Data"));
    QVBoxLayout *layout1 = new QVBoxLayout;
    tablee = new QTableView(this);
    mode1 = new QStandardItemModel(1,2,this);
    mode1->setHorizontalHeaderItem(0, new QStandardItem(QString("ID")));
    mode1->setHorizontalHeaderItem(1, new QStandardItem(QString("DATA")));
    map<int,QString>::iterator itt;
    itt=dataa.begin();
            for (int colu = 0; colu < 2; colu++)
            {
                    item1 = new QStandardItem();

                    if (colu == 0)
                    {
                            item1->setData(((*itt).first), Qt::DisplayRole);
                            mode1->setItem(0,0,item1);
                    } else
                    {
                            item1->setData(((*itt).second), Qt::DisplayRole);
                            mode1->setItem(0,1,item1);
                    }
            }

    tablee->setModel(mode1);
    layout1->addWidget(tablee);
    tableegroup->setLayout(layout1);

    QVBoxLayout *mainlayout1 = new QVBoxLayout;
    //mainlayout1->addWidget(menubarr);
    mainlayout1->addWidget(searchgroup);
    mainlayout1->addWidget(tableegroup);
    setLayout(mainlayout1);
} 
```

感谢您提前提供任何帮助 **编辑** 我想要的

```
void Box1::textReturn()
{
        bool ok;
        int id = text->text().toInt(&ok);
//      map<int,QString>::iterator itt;
        if (ok && dataa.contains(id))
        {

        //      add row (id, data[id] to table
        }
        else
        {
                QMessageBox msgbox = new QMessagebox();
                msgbox->setWindowTitle("Alert");
                msgbox->setText("No such ID present!");
                msgbox->show();
        }
} 
```

**编辑2**

```
void Box1::textReturn()
{
        int id = (text->text()).toInt();
        map<int,QString>::iterator itt;
        itt = dataa.find(id);
        if(itt != dataa.end())           //returns 1 if we found something
        {
                QList<QStandardItem *> items;
                items << new QStandardItem(QString("%1").arg(id));
                items << new QStandardItem((*itt).second);
                mode1->appendRow(items);
                tablee->update();
        }
        else
        {
                QMessageBox *msgbox = new QMessageBox();
                msgbox->setWindowTitle("Alert");
                msgbox->setText("INVALID  ID  ENTERED");
                msgbox->show();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:50:36.360

据我了解你的问题。您需要在 Box1 类中创建一个新插槽。我们称之为 textReturnPressed()。然后你必须将它连接到`returnPressed()`来自的信号`text`

```
connect(text, SIGNAL(returnPressed()), this, SLOT(textReturnPressed()); 
```

这是 textReturnPressed （我希望它编译）

```
void textReturnPressed()
{
     bool ok;
     int id = text->text().toInt(&ok);
     if (ok && dataa.count(id) > 0) {
         QList<QStandardItem *> items;
         items << new QStandardItem(QString("%1").arg(id));
         items << new QStandardItem(dataa[id]);
         mode1.appendRow(items);
     }
} 
```

您不需要迭代器来检查项目是否在地图中。只需调用`map.count()`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:09:34.170

正如@KCiebiera 所说，您必须进行此连接

```
connect(text, SIGNAL(returnPressed()), this, SLOT(textReturnPressed()); 
```

然后你需要使用在表中找到你的密钥

```
QList<QStandardItem *> QStandardItemModel::findItems ( const QString & text, 
                     Qt::MatchFlags flags = Qt::MatchExactly, int column = 0 ) 
```

由于您有地图，因此元素不应重复，您的 QList 应为 NULL 或仅包含一个元素。当你得到你的元素（作为 QStandardItem）时，你只需要调用

```
tablee->showColumn ( int column )
tablee->showRow ( int row ) 
```

您的列将是 QStandardItem->column() 和行 QStandardItem->row();

编辑

```
void Box1::textReturnPressed()
{
     int id = (test->text()).toInt();
     map<int, string>::iterator it;
     it = dataa.find(id);
     if(it != dataa.end())           //we found something
     {
         QList<QStandardItem *> items;
         items << new QStandardItem(QString("%1").arg(id));
         items << new QStandardItem((*it).second);
         mode1->appendRow(items);
     }
     else
         QMessageBox::information(this, "Info", "ID not found!", QMessageBox::ok);
} 
```

像这样的东西；

# jquery - 在 webapp 中嵌入推文

> ID：11362828
> 
> 赞同：0
> 
> 时间：2012-07-06T13:09:01.860
> 
> 标签：jquery, twitter

我目前正在开发一个网络应用程序（Django + Jquery），用户可以在其中提交（链接）到推文：例如，我存储

```
 https://twitter.com/BarackObama/status/2651151366 
```

在我的数据库中并将其作为链接嵌入到网站中。现在我想知道是否存在允许我将上述推文的内容直接嵌入我的网站并检索提交的推特提要链接的属性的工具（例如 Jquery 插件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:23:06.123

您还可以使用此 REST 方法检索推文的详细信息：`GET http://api.twitter.com/statuses/1/show.json?id=<id_of_the_tweet>`并显示您想要的结果。更多信息在这里：[https ://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid](https://dev.twitter.com/docs/api/1/get/statuses/show/%3aid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:10:52.557

Twitter 现在使用 oembed 协议：

[https://dev.twitter.com/docs/api/1/get/statuses/oembed](https://dev.twitter.com/docs/api/1/get/statuses/oembed)

因此，如果您想手动管理它，您可以通过 Twitter API 调用 oembed 状态请求方法，以准备好显示的正确内容。

还有一个 jQuery oembed 插件，在这里可用：

[https://github.com/starfishmod/jquery-oembed-all](https://github.com/starfishmod/jquery-oembed-all)

还有一个 Django oemned 补充可以帮助你：

[http://code.google.com/p/django-oembed/](http://code.google.com/p/django-oembed/)

需要考虑的一件事是 Twitter 显示指南，他们对此非常感兴趣：（此链接还包含有关其 oembed 功能的详细信息）

[https://dev.twitter.com/docs/embedded-tweets](https://dev.twitter.com/docs/embedded-tweets)

# image - 预缓存/预加载目录

> ID：11362829
> 
> 赞同：0
> 
> 时间：2012-07-06T13:09:12.823
> 
> 标签：image, caching, load, onload, preload

一直在寻找预加载图像目录的方法，发现这是这里提供的最好的脚本：http: [//perishablepress.com/3-ways-preload-images-css-javascript-ajax/](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/) 我最喜欢这个在预加载之前等待当前文档加载，但我想让这个人加载图像目录，而不是必须指定每个文件，并且对 javascript 非常陌生，任何帮助表示赞赏。

```
function preloader() {
if (document.images) {
    var img1 = new Image();
    var img2 = new Image();
    var img3 = new Image();

    img1.src = "http://domain.tld/path/to/image-001.gif";
    img2.src = "http://domain.tld/path/to/image-002.gif";
    img3.src = "http://domain.tld/path/to/image-003.gif";
    }
}
function addLoadEvent(func) {
    var oldonload = window.onload;
    if (typeof window.onload != 'function') {
    window.onload = func;
} else {
    window.onload = function() {
        if (oldonload) {
            oldonload();
        }
        func();
        }
    }
}
addLoadEvent(preloader); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:39:08.500

没有通用的方法可以做到这一点。您需要某种方式从服务器检索目录的内容，并且不能保证您的 Web 服务器会提供列表。通常，大多数 Web 服务器不允许客户端列出服务器端目录的内容。

如果您控制 Web 服务器，则可以对其进行配置，以便显示目录列表，例如，当您要求“http://domain.tld/path/to/”时。但即便如此，返回响应的格式也可能会有所不同，具体取决于 Web 服务器。

但是，如果您能够从服务器获取给定目录中的图像列表，您仍然需要使用诸如 AJAX 或隐藏的 IFRAME 之类的技术来加载这些图像名称。然后，您可以使用 JavaScript 遍历文件名，构造 URL，并为每个文件创建一个 Image 对象。

# ios - OpenGL ES 渲染到 UIImage，图像是黑色的

> ID：11362831
> 
> 赞同：1
> 
> 时间：2012-07-06T13:09:17.723
> 
> 标签：ios, image, opengl-es, processing

在 OpenGL ES 的帮助下，我在图像处理方面遇到了一些问题。我创建了一个纹理，加载着色器，并将它们附加到程序中，当我想将我的纹理渲染到 UIImage 时，图像是全黑的:(

纹理初始化：

```
glActiveTexture(GL_TEXTURE0);
glGenTextures(1, &_name);
glBindTexture(self.format, _name);
glTexParameteri(self.format, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(self.format, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(self.format, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(self.format, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glBindTexture(self.format, 0); 
```

纹理加载代码：

```
self.pixelSize = CGSizeMake(self.size.width * self.scale, self.size.height * self.scale);

    BOOL shouldScale = NO;

    if (self.limitedSize.width < self.pixelSize.width ||
        self.limitedSize.height < self.pixelSize.height) {
        self.pixelSize = self.limitedSize;
    }

    if (shouldScale) {
        CGFloat normalizedWidth = ceil(log2(self.pixelSize.width));
        CGFloat normalizedHeight = ceil(log2(self.pixelSize.height));

        self.pixelSize = CGSizeMake(pow(2.0, normalizedWidth), powf(2.0, normalizedHeight));
        self.data = (GLubyte *)calloc(1, self.bytes);

        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
        CGBitmapInfo bitmapInfo = kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst;
        CGContextRef context = CGBitmapContextCreate(self.data, normalizedWidth, normalizedHeight, 8, normalizedWidth * 4, colorSpace, bitmapInfo);
        CGContextDrawImage(context, CGRectMake(0, 0, normalizedWidth, normalizedHeight), image.CGImage);
        CGContextRelease(context);
        CGColorSpaceRelease(colorSpace);
    }
    else {
        CFDataRef dataRef = CGDataProviderCopyData(CGImageGetDataProvider(image.CGImage));
        self.data = (GLubyte *)CFDataGetBytePtr(dataRef);
        CFRelease(dataRef);
    }

    glBindTexture(self.format, self.name);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexImage2D(self.format, 0, GL_RGBA, self.pixelSize.width, self.pixelSize.height, 0, GL_BGRA, self.type, self.data);
    glGenerateMipmap(GL_TEXTURE_2D); 
```

帧缓冲区：

```
glActiveTexture(GL_TEXTURE1);
glGenFramebuffers(1, &_buffer);
glBindFramebuffer(GL_FRAMEBUFFER, _buffer); // self.format is GL_TEXTURE_2D
glBindTexture(self.texture.format, self.texture.name);
glTexImage2D(self.texture.format, 0, GL_RGBA, self.width, self.height, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, self.texture.format, self.texture.name, 0);

GLint status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
if (status != GL_FRAMEBUFFER_COMPLETE) {
    NSLog(@"GLBuffer: Failed to make framebuffer object");
}

glBindTexture(self.texture.format, 0); 
```

使成为：

```
[self.buffer bind];
[self.program use];

glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT);

glActiveTexture(GL_TEXTURE2);
[self.texture bind];

glUniform1i([self.texture uniformForKey:@"inputImageTexture"], 2);
glUniform1f([self.texture uniformForKey:@"red"], 1.0);
glUniform1f([self.texture uniformForKey:@"green"], 0.0);
glUniform1f([self.texture uniformForKey:@"blue"], 0.0);

glVertexAttribPointer([self.texture attributeForKey:@"position"], 2, GL_FLOAT, 0, 0, [self.texture vertices]);
glEnableVertexAttribArray([self.texture attributeForKey:@"position"]);

glVertexAttribPointer([self.texture attributeForKey:@"inputTextureCoordinate"], 2, GL_FLOAT, 0, 0, [self.texture coordinates]);
glEnableVertexAttribArray([self.texture attributeForKey:@"inputTextureCoordinate"]);

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

[self.buffer unbind];
[self.texture unbind]; 
```

纹理到图像：

```
 [self.buffer bind];
   GLubyte *rawPixels = (GLubyte *)malloc([self.texture bytes]);

glReadPixels(0, 0, [self.texture width], [self.texture height], GL_RGBA, GL_UNSIGNED_BYTE, rawPixels);
CGDataProviderRef dataProvider = CGDataProviderCreateWithData(NULL, rawPixels, [self.texture bytes], NULL);

NSUInteger bytesPerRow = [self.texture pixelWidth] * 4;
CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault | kCGImageAlphaLast;
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

CGImageRef cgImage = CGImageCreate([self.texture pixelWidth], 
                                   [self.texture pixelHeight], 
                                   8,
                                   32, 
                                   bytesPerRow, 
                                   colorSpace, 
                                   bitmapInfo, 
                                   dataProvider,
                                   NULL, 
                                   NO, 
                                   kCGRenderingIntentDefault);

UIImage *image = [UIImage imageWithCGImage:cgImage];

CGImageRelease(cgImage);
CGDataProviderRelease(dataProvider);
CGColorSpaceRelease(colorSpace); 
```

* * *

从我的渲染方法中删除 glClear(GL_COLOR_BUFFER_BIT) 后，纹理在模拟器上正确渲染，但在真实设备上不正确。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:40:07.490

**将纹理转换为 UIImage**

```
`#pragma mark - Convert GL image to UIImage`
-(UIImage *) glToUIImage
{

    imageWidth = 702;
    imageHeight = 962;

    NSInteger myDataLength = imageWidth * imageHeight * 4;

    // allocate array and read pixels into it.
    GLubyte *buffer = (GLubyte *) malloc(myDataLength);
    glReadPixels(0, 0, imageWidth, imageHeight, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    // gl renders "upside down" so swap top to bottom into new array.
    // there's gotta be a better way, but this works.
    GLubyte *buffer2 = (GLubyte *) malloc(myDataLength);
    for(int y = 0; y < imageHeight; y++)
    {
        for(int x = 0; x < imageWidth * 4; x++)
        {
            buffer2[((imageHeight - 1) - y) * imageWidth * 4 + x] = buffer[y * 4 * imageWidth + x];
        }
    }

    // make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2, myDataLength, NULL);

    // prep the ingredients
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * imageWidth;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    // make the cgimage
    CGImageRef imageRef = CGImageCreate(imageWidth, imageHeight, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    // then make the uiimage from that
    UIImage *myImage = [UIImage imageWithCGImage:imageRef];
    return myImage;
} 
```

只需像这样调用此方法即可获取您的图像 -

```
UIImage *yourImage = [self glToUIImage]; 
```

**来源 =** [http://www.bit-101.com/blog/?p=1861](http://www.bit-101.com/blog/?p=1861)

# android - 跨平台开发，具有适用于 Android、iOs 的接口并与 Windows 7 同步

> ID：11362833
> 
> 赞同：1
> 
> 时间：2012-07-06T13:09:18.780
> 
> 标签：android, ios, windows, html, cross-platform

我正在研究如何最好地创建一个可以在多个移动平台（需要 Android 和 iOS）以及装有 Windows 7 和可能的 Linux 的 PC 上运行的程序。该程序将需要编辑一个文件，并能够将该文件上传到 PC 或通过 USB 上传到设备。

我是否需要开发两个程序——一个用于 PC，一个用于移动平台？或者有没有一种简单的方法可以让该程序适用于所有平台？* 并且移动应用程序必须能够在设备离线时运行。* 移动应用程序必须更新 PC 和移动设备之间的共享文档。* 性能不是大问题。

先谢谢了！

# performance - IPV6 的 SVN 性能问题

> ID：11362834
> 
> 赞同：4
> 
> 时间：2012-07-06T13:09:21.360
> 
> 标签：performance, svn, ipv6

我正在使用 SlikSVN 的 64 位颠覆服务器进行源代码控制。前几天我注意到一些应用程序需要很长时间才能对存储库执行简单的操作，例如浏览存储库、提交等，我认为这是应用程序本身的问题。

但是，我尝试了通过 VPN 登录到我的网络的相同操作，它们都非常快速。唯一的区别是我通过 IP 地址 (v4) 而不是主机名连接到颠覆服务器。经过几次测试，我发现问题似乎与IPV6有关。

禁用 IPV6 使大部分性能问题消失了，但我不确定我是否希望这是解决方案......

SlikSVN 似乎支持 IPV6 - 它甚至有一个 -6 参数（我已经尝试过）以使 svnserve 更喜欢 ipv6 连接，但它似乎对这个问题没有太大帮助。我还在使用有问题的应用程序的最新版本（AnkhSVN 就是其中之一），并且相信它们也支持 IPv6。

我很想在 hosts 文件中添加一个条目，以便 SVN 主机的名称解析始终解析为 IPv4 地址，但这对我来说仍然感觉有点 hacky。

有没有人对这类问题有任何经验？

非常感谢，尼克

# html - 带有两个水平 div 的 html5 部分

> ID：11362835
> 
> 赞同：0
> 
> 时间：2012-07-06T13:09:25.493
> 
> 标签：html, alignment

我需要一个`<section></section>`由左右部分组成的。左边部分只是一个字符串——日期。右侧部分应包含以下内容：

```
<span>title</span>
<p>a lot of text of variable lenght</p> 
```

我应该`<div>`在一个部分中使用 s 吗？右侧的文字应该只保留在右侧（所以我不能`float:left;`单独在左侧使用）。

这是我没有`<section>`s 的解决方案，但它不适用于 100%，文本在 10px 的高度之后向左移动（参见下面的代码）。

```
 <div style="overflow: hidden; border: 1px solid red; padding:5px; ">
        <div style="float: left; width: 100px; height: 10px; color:blue;">right</div>
        <div style="">
            <span style="color:blue;">Lorem ipsum</span>
            <p>a lot of text of variable lenght</p>
        </div>
    </div> 
```

如果发现一些错误，我如何优化代码并使其成为 HTML5 且没有错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:31:06.907

只需`margin-left:100px;`在右侧使用，并摆脱左侧的高度（[示例](http://jsfiddle.net/tbtq4/)）：

```
<section style="display:block; overflow: hidden; border: 1px solid red; padding:5px; ">
    <aside style="display:block; float: left; width: 100px; color:blue;">right</aside>
    <div style="margin-left:100px;">
        <span style="color:blue;">Lorem ipsum</span>
        <p>a lot of text of variable lenght</p>
    </div>
</section> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:27:13.353

如果您`float: left'`是其中之一`div`，则应该`float: right;`在某些版本的 Internet Explorer 和其他浏览器中正确显示此内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T13:49:05.050

现代风格将使用 CSS3 盒子模型（[示例](http://jsfiddle.net/AMe6k/)）：

```
<style type="text/css">
#horbox {
    display: -webkit-box;
    display: -khtml-box;
    display: -moz-box;
    display: -ms-box;
    display: -o-box;
    display: box;
    -webkit-box-orient: horizontal;
    -khtml-box-orient: horizontal;
    -moz-box-orient: horizontal;
    -ms-box-orient: horizontal;
    -o-box-orient: horizontal;
    box-orient: horizontal;
}
</style>
<div id="horbox" style="border: 1px solid red; padding:5px;">
    <div style="width: 100px; color:blue;">right</div>
    <div>
        <span style="color:blue;">Lorem ipsum</span>
        <p>a lot of text of variable lenght</p>
    </div>
</div> 
```

但是 CSS3 盒子模型实际上还没有被所有浏览器支持。使用 Firefox 13，例如，显示是所希望的。

# web-services - 是否有带有 LDIF 识别语法的 pastebin 服务？

> ID：11362844
> 
> 赞同：-2
> 
> 时间：2012-07-06T13:10:15.273
> 
> 标签：web-services, ldap, pastebin

正如问题所问的那样，我想知道是否有一个可以识别 LDAP 的 LDIF 语法的 pastebin 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:47:40.027

在四处寻找 yonks 之后，最终的答案是暂时没有。

# php - 用于解析 JSON 并添加到数据库 mysql 的 PHP

> ID：11362846
> 
> 赞同：3
> 
> 时间：2012-07-06T13:10:39.990
> 
> 标签：php, cordova, json

我正在使用 phonegap 和 jquery mobile 制作一个网络应用程序（android）。

我正在尝试将 html 表单中的三个字段作为 json 发送到 php 页面，该页面将解码 json 字符串/对象（我是 json、ajax、jquery 的新手）并将这三个字段作为 mysql 查询添加到我的数据库中本地主机。

我的 html 页面如下所示：

```
<script type="text/javascript">
$(document).ready(function(){  
$('#btn').bind('click', addvalues);
});
  function addvalues(){
  $.ajax({  
  url: "connection.php",
  type: "POST",  
  data: "id=" + $("#id").val()+"&name=" + $("#name").val() + "&Address=" + $("#Address").val(),
   datatype:"json",
   success: function(status)
  {  
    if(status.success == false) 
    {  
        //alert a failure message
    } 
    else { 
          //alert a success message
        }  
   }  
 });  
} 
</script> 
</head> 
<body> 

<div data-role="header">
<h1>My header text</h1>
</div><!-- /header -->
<div data-role="content">
<form id="target" method="post">
<label for="id">
<input type="text" id="id" placeholder="ID">
</label>
<label for="name">
<input type="text" id="name" placeholder="Name">
</label>
<label for="Address">
<input type="text" id="Address" placeholder="Address">
</label>
<input type="submit" id "btn" value="Add record" data-icon="star" data-theme="e">
</form>
</div>
</body> 
```

## 问题是：

如何从我发送到我的 php 文件 (connection.php) 的字符串中提取三个字段（ID、名称、地址）？connection.php 由我的本地服务器托管。

我熟悉与数据库建立连接，以及向 mysql 添加查询。我只需要提取三个字段的帮助，因为我是 ajax 和 jquery 和 json 的新手。

到目前为止，这就是我在 connection.php 中所做的一切：

```
<?php
$server = "localhost";
$username = "root";
$password = "";
$database = "jqueryex";
$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);

//I do not know how to use the json_decode function here

//And this is how, i suppose, we will add the values to my table 'sample'
$sql = "INSERT INTO sample (id, name, Address) ";
$sql .= "VALUES ($id, '$name', '$Address')";
if (!mysql_query($sql, $con)) {
die('Error: ' . mysql_error());
} else {
echo "Comment added";
}
mysql_close($con);
?> 
```

请在此文件中添加相关代码并帮助我。我将非常感激。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:42:42.860

你想做什么这个

```
 $(document).ready(function () {
        $('#btn').on('click', function () {
            $.ajax({
                url: "connection.php",
                type: "POST",
                data: {
                    id: $('#id').val(),
                    name: $('#name').val(),
                    Address: $('#Address').val()
                },
                datatype: "json",
                success: function (status) {
                    if (status.success == false) {
                        //alert a failure message
                    } else {
                        //alert a success message
                    }
                }
            });
        });
    }); 
```

然后在您的 php 中执行此操作

```
 //set variables from json data
    $data = json_decode($_POST); // Or extract(json_decode($_POST) then use $id without having to set it below.
    $id = $data['id'];
    $name = $data['name'];
    $Address = $data['Address'];

    //And this is how, i suppose, we will add the values to my table 'sample'
    $sql = "INSERT INTO sample (id, name, Address) ";
    $sql .= "VALUES ($id, '$name', '$Address')";
    if (!mysql_query($sql, $con)) {
        die('Error: ' . mysql_error());
    } else {
        echo "Comment added";
    }
    mysql_close($con); 
```

不过，请确保在插入这些输入之前对其进行清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:13:57.820

采用：

```
$id = json_decode($_POST['id']);
$name = json_decode($_POST['name']);
$Address = json_decode($_POST['Address']);

$sql .= "VALUES ($id, '$name', '$Address')"; 
```

代替：

```
$sql .= "VALUES ($id, '$name', '$Address')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:33:01.947

使用 $id_json_encoded = json_encode($_POST['id']); 对表单的帖子进行编码，然后像这样使用 jquery 脚本

```
<script type="text/javascript"> 
```

$(文档).ready(函数() {

```
 $("#audit").click(function(){
            $.post("/audit_report/"+$('#branch').val()+"/"+$('#ttype').val()+"/"+$('#from').val()+"/"+$('#to').val(),

                    {
                        targetDiv:"divswitcher"
                    }
                ,
                    function(data){

                     $("#imagediv").html('<img src="/public/images/spinner_white.gif"> loading...');  
                //alert(data);
                $("#bodydata").html(data);
                 $("#imagediv").html('');  
                    //  $("#divswitcher").html(data);
        });                 
        });     
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T05:27:45.287

```
this is the complete code that encodes form data and send it to the server using ajax

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <script type="text/javascript" charset="utf-8" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="jquery-ui-1.8.16.custom.min.js"></script> 

    <script type="text/javascript">
$(document).ready(function()
  { 

            $("#btn").click(function(){

            var encoded = json_encode("/audit_report/"+$('#id').val()+"/"+$('#name').val()+"/"+$('#Address').val());
                $.post(encoded,

                        {
                            targetDiv:"divswitcher"
                        }
                    ,
                        function(data){

                         $("#imagediv").html('<img src="spinner_white.gif"> loading...');  
                    //alert(data);
                    $("#bodydata").html(data);
                     $("#imagediv").html('');  
                        //  $("#divswitcher").html(data);
            });                 
            });     
            });     
</script>

</head>
<body>

    <div data-role="header">
<h1>My header text</h1>
</div><!-- /header -->
<div data-role="content">
<form id="target" method="post">
<label for="id">
<input type="text" id="id" name="id" >
</label>
<label for="name">
<input type="text" id="name" name="name" >
</label>
<label for="Address">
<input type="text" id="Address" name="Address" >
</label>

<input type="button" id="btn" name="btn" value="Add record" />
</form>
</div>

</body>
</html>

<div id="bodydata" class="class">

</div> 
```

# c# - 使用字符串作为控制对象

> ID：11362859
> 
> 赞同：0
> 
> 时间：2012-07-06T13:11:19.127
> 
> 标签：c#, .net, winforms

对于我当前的项目，我用“menuStrip”和几个“ToolStripMenuItem”制作了一个 MDIform。几个按钮和一个 devexpress“NavbarControl”

目的是用户使用用户 ID 登录，应用程序将获得该行中特定“控件”的数据行，如果其为 true，则项目必须可见，否则项目必须不可见。

Datarow 还包含项目的名称。

所以我使用：

```
this.Controls[item].Visible = true; 
```

*项目 = 字符串（项目名称）*

如果我用它来隐藏菜单条本身，如果我在 MenuStipItems 上尝试它，它会工作，它会给出一个空引用异常。

**我怎样才能控制MenuStip里面的项目，只有项目的名字？？？**

代码：

```
 DataTable dt = GetData();
    foreach (DataRow row in dt.Rows)
    {
        string item = row["ItemNaam"].ToString();
        foreach (string rol in Rollen)
        {
            DataRow dr = GetDataByItemNaam(item);
            if (Convert.ToBoolean(dr[rol]) == true)
            {
                this.Controls[item].Visible = true; //Show Item
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:16:14.037

MenuStrip 控件有它自己的集合。因此，要引用菜单条项目，请引用菜单条父项中的项目：

```
if (this.menuStrip1.Items.ContainsKey(item))
  this.menuStrip1.Items[item].Visible = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:27:52.170

我已经解决了这个问题：

我在一个`foreach`循环中创建了一个`foreach`循环，其中每个循环查找项目的名称，然后在前一个项目中查找项目的名称。如果名称与给定名称匹配，则将可见性设置为 true。

这是 2 个级别，我创建了额外的两个额外`foreach`循环以更深入*（初始）*到菜单中的 4 个级别的项目。

也许它不是正确/最快的方式，但它应该像它一样工作。

# android - 如何将位图图像存储在 sdcard 的文件中？

> ID：11362861
> 
> 赞同：0
> 
> 时间：2012-07-06T13:11:24.223
> 
> 标签：android

```
 bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);

    if(android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
    {
        cacheFile = new File(android.os.Environment.getExternalStorageDirectory(), "Android/data/"+this.getPackageName()+"/cache/");
        if(!cacheFile.exists())
        {
            cacheFile.mkdir();
        }
        try {
            fileOutputStream = new FileOutputStream(cacheFile);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fileOutputStream);
            fileOutputStream.flush();
            fileOutputStream.close();
        } catch (Exception e) {
            Log.i("Error", e.getMessage());
        }
    } 
```

但我收到 mnt/sdcard/Android/data/com.android.linegame/cache 文件不存在的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:17:37.817

你用的是哪个版本的安卓？？因为 Android 2.2 在 mnt/sdcard 中包含文件夹“Android”。但 Android 4.0 版本不包含文件夹“Android”。

添加以下代码：

```
cacheFile = new File(Environment.getExternalStorageDirectory(), "/Android/data/"+this.getPackageName()+"/cache/");
if(!cacheFile.exists()) {
    cacheFile.mkdirs();
} 
```

# c# - 我该如何处理这个 Xml 解析错误？

> ID：11362863
> 
> 赞同：3
> 
> 时间：2012-07-06T13:11:27.407
> 
> 标签：c#, xml-parsing

考虑以下 C# 代码：

```
using System.Xml.Linq;

namespace TestXmlParse
{
    class Program
    {
        static void Main(string[] args)
        {
            var testxml = 
            @"<base>
                <elem1 number='1'>
                    <elem2>yyy</elem2>
                    <elem3>xxx   <yyy zzz aaa</elem3>
                </elem1>
            </base>";
            XDocument.Parse(testxml);
        }
    }
} 
```

我在解析时得到一个 System.Xml.XmlException，当然，抱怨 elem3。错误信息是这样的：

```
System.Xml.XmlException was unhandled
  Message='aaa' is an unexpected token. The expected token is '='. Line 4, position 59.
  Source=System.Xml
  LineNumber=4
  LinePosition=59 
```

显然这不是真正的 XML（我们从第三方获取 xml），虽然最好的答案是第三方在将其发送给我们之前清理他们的 xml，但有没有其他方法可以修复这个 xml在我把它交给解析器之前？我设计了一种破解方法来解决这个问题；捕获异常并使用它来告诉我需要在哪里查找应该转义的字符。我希望有一些更优雅和全面的东西。

欢迎任何建议。

如果这是一个骗局，请指出其他问题；我会自己关闭这个。我对答案比任何业力增益更感兴趣。

编辑：

我想我的问题没有像我希望的那样清楚。我知道 elem3 中的“<”不正确；在尝试解析*之前，*我试图找到一种优雅的方法来检测（并纠正）任何格式错误的 xml 。正如我所说，我从第三方获得了这个 xml，我无法控制他们给我的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:15:37.700

我建议您**不要操纵**收到的数据。如果它无效，那是您的客户的问题。

编辑输入使其成为有效的 xml 可能会导致严重的问题，例如，您最终可能会处理错误的数据，而不是抛出错误（因为您已尽力使 xml 有效，但这可能会导致不同的数据）。

* * *

**[编辑]** 我仍然认为这不是一个好主意，但有时你必须做你必须做的事情。

这是一个非常简单的类，它解析输入并替换无效的开始标签。您可以使用**正则表达式**（我不擅长）来执行此操作，但此解决方案并不完整，例如，根据您的要求（或者说您得到的坏 xml）您将不得不采用它（例如扫描完整的 xml 元素而不是只有“<”和“>”括号，将 CDATA 放在节点的内部文本周围等等）。

我只是想说明你是如何做到的，所以如果它很慢/有错误，请不要抱怨（正如我所提到的，我不会这样做）。

```
class XmlCleaner
    {

        public void Clean(Stream sourceStream, Stream targetStream)
        {
            const char openingIndicator = '<';
            const char closingIndicator = '>';
            const int bufferSize = 1024;
            long length = sourceStream.Length;
            char[] buffer = new char[bufferSize];
            bool startTagFound = false;
            StringBuilder writeBuffer = new StringBuilder();

            using(var reader = new StreamReader(sourceStream))            
            {
                var writer = new StreamWriter(targetStream);

                try
                {
                    while (reader.Read(buffer, 0, bufferSize) > 0)
                    {
                        foreach (var c in buffer)
                        {
                            if (c == openingIndicator)
                            {
                                if (startTagFound)
                                {
                                    // we have 2 following opening tags without a closing one                                
                                    // just replace the first one
                                    writeBuffer = writeBuffer.Replace("<", "&lt;");

                                    // append the new one
                                    writeBuffer.Append(c);
                                }
                                else
                                {
                                    startTagFound = true;
                                    writeBuffer.Append(c);
                                }
                            }
                            else if (c == closingIndicator)
                            {
                                startTagFound = false;
                                // write writebuffer...
                                writeBuffer.Append(c);
                                writer.Write(writeBuffer.ToString());
                                writeBuffer.Clear();
                            }
                            else
                            {
                                writeBuffer.Append(c);
                            }
                        }
                    }
                }
                finally
                {
                    // unfortunately the streamwriter's dispose method closes the underlying stream, so e just flush it
                    writer.Flush();
                }                
            }
        } 
```

要测试它：

```
var testxml =
            @"<base>
                <elem1 number='1'>
                    <elem2>yyy</elem2>
                    <elem3>xxx   <yyy zzz aaa</elem3>
                </elem1>
            </base>";

            string result;

            using (var source = new MemoryStream(Encoding.ASCII.GetBytes(testxml)))
            using(var target = new MemoryStream()) {

                XmlCleaner cleaner = new XmlCleaner();
                cleaner.Clean(source, target);

                target.Position = 0;
                using (var reader = new StreamReader(target))
                {
                    result = reader.ReadToEnd();
                }
            }

            XDocument.Parse(result);

            var expectedResult = 
                @"<base>
                <elem1 number='1'>
                    <elem2>yyy</elem2>
                    <elem3>xxx   &lt;yyy zzz aaa</elem3>
                </elem1>
            </base>";
            Debug.Assert(result == expectedResult); 
```

# css - jquery移动按钮的自定义透明css样式

> ID：11362867
> 
> 赞同：1
> 
> 时间：2012-07-06T13:11:40.823
> 
> 标签：css, html, jquery-mobile

我在这边看到了那个按钮（[http://letsgo.gorizia.it/](http://letsgo.gorizia.it/)），想知道如何实现这种风格？

有没有有用的教程，或者你能给我一个提示，我应该使用哪个 css？

![在此处输入图像描述](../Images/03184d4e31ad64b625baf6f44b5e14bd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:16:54.250

我想你可以看看[StackOverflow 上的这篇文章：](https://stackoverflow.com/questions/637921/opacity-of-background-but-not-the-text)

你应该像帖子中所说的那样使用 rgba

```
.alpha60 {

    /* Fallback for web browsers that don't support RGBa */
    background-color: rgb(0, 0, 0);

    /* RGBa with 0.6 opacity */
    background-color: rgba(0, 0, 0, 0.6);

    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    /* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
    } 
```

还有这个网站：

[http://robertnyman.com/2010/01/11/css-background-transparency-without-affecting-child-elements-through-rgba-and-filters/](http://robertnyman.com/2010/01/11/css-background-transparency-without-affecting-child-elements-through-rgba-and-filters/)

这应该会给你你想要的效果。

您可能仍然需要寻找圆角，但现在使用 css3 不应该那样找到。

[W3schools 也有一个关于它的页面](http://www.w3schools.com/css/css_image_transparency.asp)。我知道它不是最可靠的网站，但对于一些您无法轻易找到的小提示或技巧来说，它可以派上用场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:18:15.753

使用 RGBA 作为背景颜色应该可以解决问题：

```
.ui-btn { background-color: rgba(0,0,0,.25); } 
```

类似的东西应该可以，但你会想要使用颜色（前三个值）和不透明度本身（最后一个值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:10:24.813

当我将 alpha60 类作为一个类添加到分配了 data-role = button 的按钮或锚标记时，我无法获得任何效果。我猜 JQM 框架覆盖了那个 css（但我不知道……如果有人这样做，学习起来会很有趣）。

对我有用的是这样的 ui-btn-up-a （或 b 或 c 或任何你的 css 主题）（对于带有 data-theme='b' 的蓝色按钮）

```
.ui-btn-up-b {
    background: rgba(0, 0, 255, 0.2); /* set the alpha to taste...*/
} 
```

我认为特别好的是按钮在悬停时变得不透明并保持其单击（按钮向下）属性，因此用户确实知道他们正在与按钮交互，否则他们可以阅读按钮后面的任何内容.

当然，关于不支持 rgba 的浏览器的所有注意事项仍然适用，因此如果您的用户群包括较旧的浏览器，您应该使用后备 css 使其健壮。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T13:18:40.243

在您的代码中添加一个锚标记并将其 HREF 设置为您想要的任何内容。然后转到 Photoshop 并为该按钮生成图像。

如果您尝试在 CSS 中执行此操作，并设置包含锚点的容器的不透明度，则不透明度也会过滤到锚点的文本。不好所以...

您的最终锚标记应如下所示：

```
<a href="whereever.com"><img src="myButton.png" /></a> 
```

（确保您的图像是 .PNG，因为 .JPEG 不支持透明度）

# android - 在 android 中查找设备类型（智能手机/平板电脑）

> ID：11362874
> 
> 赞同：2
> 
> 时间：2012-07-06T13:12:16.300
> 
> 标签：android

如何通过我的程序找到设备是智能手机或桌子？我尝试了 android.os.Build 类的所有字段。我得到的信息是

操作系统版本：2.6.35.7(DXKL2)
操作系统 API 级别：10
设备：GT-S5360
型号（和产品）：GT-S5360 (GT-S5360)
主板：totoro
品牌：samsung
CPU_ABI：armeabi
显示器：GINGERBREAD.DXKL2
指纹：samsung /GT-S5360/GT-S5360:2.3.6/GINGERBREAD/DXKL2:user/release-keys
主机：DELL152
Id：GINGERBREAD
制造商：samsung
类型：user
用户：root

这些信息对我没有帮助。有人可以告诉我如何找到它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:27:22.107

你真正想知道什么？您想知道设备是否可以拨打电话吗？你想知道屏幕有多大吗？有一些 API 可以找出这些东西。

“智能手机”和“平板电脑”是营销标签——它们在技术层面上并没有真正的意义，因为一个人可以制造平板电脑大小的设备，通过手机网络拨打电话，一个人可以制造手机大小的设备除了wi-fi之外没有任何网络！

告诉我们您真正想知道的内容，我们可以为您指出正确的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T13:27:00.270

您可以调用此代码检查屏幕密度：

```
int screen_density = (getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK);

if (screen_density == Configuration.SCREENLAYOUT_SIZE_LARGE || screen_density == Configuration.SCREENLAYOUT_SIZE_XLARGE) {
     //The device is a tablet or at least has the screen density of a tablet
} 
```

您还可以使用以下代码获取屏幕尺寸：

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth();
int height = display.getHeight(); 
```

最后，请记住 android Honeycomb(3.+) 仅在平板电脑上运行，因此您可以使用以下命令检查 Android 版本：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;

if(currentapiVersion == android.os.Build.VERSION_CODES.HONEYCOMB ||
   currentapiVersion == android.os.Build.VERSION_CODES.HONEYCOMB_MR1 || 
   currentapiVersion == android.os.Build.VERSION_CODES.HONEYCOMB_MR2) {

  //The device is a tablet
} 
```

**编辑**：为了澄清起见，上面的代码假设您对设备屏幕尺寸和密度感兴趣，以便将设备分类为平板电脑。正如 Michael Kohne 的回答所述，有许多技术方面使这种分类变得困难（如果不是不可能的话）。

希望这可以帮助：）

# android - 适用于 Android 的在线平板电脑模拟器

> ID：11362876
> 
> 赞同：4
> 
> 时间：2012-07-06T13:12:21.837
> 
> 标签：android, tablet

你能推荐我一些在线安卓平板电脑模拟器吗？我搜索了很多，我发现[http://tablet-emulator.org/](http://tablet-emulator.org/)但它在我这边无法正常工作。你能给我推荐一些好的在线平板电脑网站吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:21:23.057

三星支持三星设备远程测试实验室：http: [//innovator.samsungmobile.com/bbs/lab/view.do ?platformId=1](http://innovator.samsungmobile.com/bbs/lab/view.do?platformId=1)

您可以参考此链接以获取更多选项： [Android 远程测试实验室 (RTL)](https://stackoverflow.com/questions/6139241/remote-test-laboratory-rtl-for-android)

# if-statement - if 语句，比较列表，python

> ID：11362879
> 
> 赞同：0
> 
> 时间：2012-07-06T13:12:34.000
> 
> 标签：if-statement, python-3.x

如果我的 if 语句无法识别 a 中的元素是否等于 0，我做错了什么？我试图打印的是程序打印的永远 0`.`和永远 1 `#`。干杯。

```
a=[0,0,1,0,1,1,0,1,1,0,0,0,0,1]
print(a)
for i in range(len(a)):
    if a[i]==[0]:
        print('.', end='')
    else:
        print('#', end='')
print() 
```

重击：

```
[0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1]
############## 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:13:50.493

你可能想要

```
if a[i] == 0: 
```

代替

```
if a[i] == [0]: 
```

您希望将项目与整数值进行比较`0`，而不是与单元素列表进行比较`[0]`。

# spring - jspx - 如何在 jspx 文件中添加自动换行？

> ID：11362880
> 
> 赞同：0
> 
> 时间：2012-07-06T13:12:34.660
> 
> 标签：spring, spring-roo, word-wrap, jspx

使用 Spring ROO - 我的 JSPX 文件中有一个字段，我在其中将字符范围设置为 15 到 200。因此，当用户输入一个包含 200 个字符的值时 - 在显示时它以直线而不是自动换行功能出现. 谁能告诉我如何将自动换行添加到 JSPX 文件中。以下是我现有的代码

```
<table:column id="c_Text" property="queryText" render="false" z="user-managed"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:29:24.897

我不了解 JSPX，但这可以通过 CSS 轻松完成，因为它将显示在浏览器中。

# java - 打开失败，E ACCESS 权限被拒绝？

> ID：11362881
> 
> 赞同：0
> 
> 时间：2012-07-06T13:12:36.760
> 
> 标签：java, android, permissions

我们已经`external SD card File`从 android 加密了一个。

当我尝试加密文件时，我收到错误消息

`Open Failed! E-Access permission denied!`

这个问题怎么解决的。

错误信息截图

![在此处输入图像描述](../Images/b068490b6d5bfae9965b6cb066760cad.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:48:08.570

也许失踪了

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在你的清单中？

# git - NetBeans 会忽略我的 Git 预提交挂钩吗？

> ID：11362883
> 
> 赞同：8
> 
> 时间：2012-07-06T13:12:41.313
> 
> 标签：git, netbeans, pre-commit-hook

我正在尝试为 Git 使用预提交挂钩。钩子如下所示：

```
#!/bin/bash
echo "fail"
exit 1 
```

因此，它总是会失败，即我的 Git 提交应该失败。

如果我用 git 添加一些东西然后在命令行中提交它，我很可能会失败并且我的提交失败。

但是，如果我使用 NetBeans 提交，我的预提交钩子不会被执行。它似乎只是忽略它。

我正在使用[Ubuntu](https://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)和 NetBeans 7.1。预提交钩子的权限是 -rwxrwxrwx （只是为了测试目的将其更改为 777）。

这怎么可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T13:20:50.263

看起来是这样的。是的。

如果您查看[NetBeans Git 集成计划](http://netbeans.org/projects/versioncontrol/pages/Git_plan)，您会注意到根本没有计划对挂钩的支持。

除此之外，我不会依赖 Git 的任何 IDE 集成，而是[使用命令行](https://stackoverflow.com/a/5645910/520162)。如果您决定明天放弃 NetBeans 并改用 Eclipse 会怎样？还是 Visual Studio？还是[KDevelop](https://en.wikipedia.org/wiki/KDevelop)？您将不得不学习一个新的 IDE，并再次将 Git 集成到 IDE 中。而且您必须希望 IDE 插件的开发人员确实实现了您需要的 Git 子集。这是浪费时间。

此外，NetBeans 中的 Git 实现还远未完成。命名为*nice-to-have* ( [`stash`](http://linux.die.net/man/1/git-stash), [`cherry-pick`](http://linux.die.net/man/1/git-cherry-pick), [`rebase`](http://linux.die.net/man/1/git-rebase)) 的功能非常有用。甚至没有提到其他**杀手级**功能（[`git bisect`](http://linux.die.net/man/1/git-bisect)有人吗？）。

[走命令行](https://stackoverflow.com/a/5645910/520162)。学习使用 Git。节省您的时间。

* * *

查看[NetBeans Git 集成计划的](http://netbeans.org/projects/versioncontrol/pages/Git_plan)**M2**，可以看到 Git 的目标后端不应是 Git 的本机（即特定于平台）实现，而是. 这完全是脑残的做法。几乎你要开发的每个平台都有 Git 的本机实现。JNI 存在。为什么不采用特定于平台的二进制文件（肯定比从头开始的命令的纯 Java 实现更好地测试），放一个小的 JNI 包装器，你就完成了？是的，你将失去一次编写，到处运行，但稳定性和代码质量会提高。`jgit`

# apache - Mod用特定页面重写

> ID：11362884
> 
> 赞同：0
> 
> 时间：2012-07-06T13:13:00.293
> 
> 标签：apache, mod-rewrite, url-rewriting

嘿，我的 modrewrite 工作得很好

```
RewriteEngine On
RewriteRule ^([^/\.]+)/?$ index.php?cCategory=$1 [L] 
```

所以 www.studybuddy.at/impressum 将是 www.studybuddy.at/index.php?cCategory=impressum

但我怎样才能防止这个网址被重写：

> `http://www.studybuddy.at/?` `state=a8089ccb4ba0631bc8f3fc2a6ac42a7a&code=AQDnf9prmi9nn0q5uisgOeey-` `7LJOKDe0DNqCLpi9qevTJIT6eD1PB__rizVpP-` `39TH2hhLAoah18pXIcLLZy76Vs8LOQp_2ElS1m5O2daJ6FdO2M5rkteqx5ckbFsezBWuQk7hNL2B-` `PpkW2Pqgnu4Rc1umZrBrvr8rTeoWigwHk0Gtq8ToZ1inAxrlKEK652s#_=_`

这以无限循环结束......

请帮助...我只是这个重写的新手

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:21:07.957

您可以添加字符“？”的排除规则。?

我认为它类似于：^[^?]

# database - 在表级别复制 postgres 数据库

> ID：11362885
> 
> 赞同：2
> 
> 时间：2012-07-06T13:13:24.257
> 
> 标签：database, postgresql, postgresql-9.1, postgresql-9.0, postgresql-9.2

我只是想知道是否可以*仅将 postgres 数据库中的表*与另一个数据库实例复制。例如，假设我有一个在 hostA 上运行的 postgres 实例和在 hostB 上运行的另一个实例。假设我在 hostA 中名为“database1”的数据库中有一个名为“user”的关系，我想用 hostB 上的另一个名为“database2”的数据库复制它。我们该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T13:24:24.337

Slony-我可以这样做：[http ://slony.info/documentation/2.1/preface.html#INTRODUCTION](http://slony.info/documentation/2.1/preface.html#INTRODUCTION)

但如果 Slony 真的只有一张桌子，它可能会产生相当大的开销。

对于单个表，您可以编写一个触发器，通过[DbLink](http://www.postgresql.org/docs/current/static/dblink.html)更新另一台主机上的表。

# android - 自定义搜索对话框

> ID：11362887
> 
> 赞同：2
> 
> 时间：2012-07-06T13:13:31.390
> 
> 标签：android, search, styles, themes, drawable

我正在尝试向我的应用程序添加一致的选择器。类似于`drawable/list_selector`. 我可以对应用程序中的所有列表元素和按钮执行此操作。但是当涉及到菜单和搜索等系统任务时，我找不到设置样式的方法。我已经阅读了设置菜单样式的技巧，所以这个问题更适合搜索对话框。

**我的目标：**
我想设置按下搜索按钮时出现的搜索对话框的样式。具体来说，我想更改文本框的轮廓颜色，并在文本框处于按下状态时更改文本框的颜色。

任何想法都会有所帮助。

没有尝试任何代码，我的想法是在`searchable.xml`文件中添加样式，但我觉得它不像那样工作。

# php - Symfony 1.4 后端添加一列图片

> ID：11362894
> 
> 赞同：0
> 
> 时间：2012-07-06T13:14:09.340
> 
> 标签：php, symfony1, symfony-1.4, backend

在我的应用程序中，我在数据库中有一个列，其中包含为用户上传的图像的 url。

我希望看到对应图像的拇指，但我只能看到图像的名称。

怎么可能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:00:08.337

您应该为此使用部分（如[文档中所述](http://www.symfony-project.org/reference/1_4/en/06-Admin-Generator#chapter_06_sub_fields)- 或[此处用于其他解释](http://www.symfony-project.org/book/1_2/14-Generators#chapter_14_sub_fields)（向下滚动到“部分编辑”））

在你的`generator.yml`：

```
generator:
  param:
    config:
      list:
        display: [ _image] 
```

然后，在同一模块`_image.php`的文件夹中创建一个名为的部分，其中包含以下内容：`templates`

```
<?php echo image_tag($object->getImage()); ?> 
```

您需要更新：

*   `$object`将对象变量的名称提供给模板
*   `getImage`在表格中使用您的字段名称

# c#-4.0 - 编辑网格视图记录时出错

> ID：11362895
> 
> 赞同：-1
> 
> 时间：2012-07-06T13:14:10.097
> 
> 标签：c#-4.0, c#-3.0

当我单击 2 页网格视图上的编辑按钮时出现以下错误

```
 System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index 
```

你能指定我应该怎么做才能消除这个错误吗

以下是编辑命令的代码，当我在第一页时它运行良好，但如果我在网格视图中转到另一个任何页面，则会出错

```
protected void GVviewReminder_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        lblError.Text = "";
        if (e.CommandName == "Edit")
        {
            GridViewRow selectedRow = GVviewReminder.Rows[Convert.ToInt32(e.CommandArgument)];

            string ID = selectedRow.Cells[1].Text;

            Response.Redirect("edit_health_reminder.aspx?HealthReminderIsOpen=true&id=" + ID);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:22:18.330

错误日志显示索引超出范围，因此请查看集合。

```
GVviewReminder.Rows[Convert.ToInt32(e.CommandArgument)]

selectedRow.Cells[1].Text 
```

# c++ - 二维数组中的逐行和逐列总计

> ID：11362896
> 
> 赞同：0
> 
> 时间：2012-07-06T13:14:12.820
> 
> 标签：c++, c

你好，我想编写一个程序，显示二维数组的逐行和逐列相加。

例如

```
如果我们输入 1 1
            2 3

结果应该是
            1 1 2
            2 3 5
            3 4 7

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:34:04.833

因为这闻起来像家庭作业，即使你没有表现出任何解决问题的努力，我也会给你一些基本的步骤。

1.  拿一本关于您选择的语言的书并学习它
2.  查找数组的大小（行和列）
3.  在两个维度上分配一个更大的数组
4.  复制`array`到`big_array`
5.  循环遍历行
    *   循环列
        *   计算`array[row][column]`in 的总和`big_array[row][last]`
6.  循环列
    *   循环遍历行
        *   计算`array[row][column]`in 的总和`big_array[last][column]`

# windows-7 - 如何让 cmd.exe 在没有管理员帐户密码的情况下调用“以管理员身份运行”命令？

> ID：11362900
> 
> 赞同：0
> 
> 时间：2012-07-06T13:14:34.327
> 
> 标签：windows-7, command-line, powershell-2.0, uac

我的问题与这个未回答的问题基本相同：[如何从命令提示符以“以管理员身份运行”运行应用程序？](https://stackoverflow.com/questions/8249705/how-to-run-an-app-as-run-as-administrator-from-command-prompt)

我在 Oracle 企业管理器中工作，设置“用户定义的指标”，并使用“执行主机命令”功能来测试事物。在这两种情况下，都提供了一条线，该线将馈送到远程机器（Windows 7）上的命令处理器。远程机器上的帐户是管理员用户组中的机器级帐户，但不是“管理员”。我无权访问“管理员”帐户密码。（我是在客户管理的环境中工作的顾问。）

在远程机器上以交互方式登录，我使用的帐户可以“以管理员身份运行”命令窗口而无需提供管理员密码，并且可以成功运行我的脚本。我查看了“runas”命令并进行了尝试，但如果不提供我没有的“管理员”帐户密码，我找不到使用它的方法。发布另一个问题（上图）的人说他尝试了 /NOUAC 和 /elevate 选项但没有成功。我还没有尝试过。

FWIW，我尝试运行的命令是一个 PowerShell v 2 单行程序，它获取一个 WMI 值。

无论如何，我试图做的可能是设计上在 UAC 世界中是不可能的——要执行这些操作，要么是管理员组用户以交互方式工作，要么*是*管理员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-29T15:46:29.473

create a batch file with following lines

```
start 
```

and save it an a location of your choice.

Then right click on the batch file and select "Run as administrator" This would create a command prompt as administrator

# jpa - JPA 在一列中只选择一个值

> ID：11362906
> 
> 赞同：0
> 
> 时间：2012-07-06T13:14:54.163
> 
> 标签：jpa, jpql

我有一个类似的列表：

```
Name       Age
Charles    18
Anna       20
Anna       19
Tomas      44
Karla      13
Charles    88 
```

我会写一个 JPQL 语句给我：

```
Charles    18
Anna       20
Tomas      44
Karla      13 
```

换句话说，我怎样才能得到一个不关心年龄的具有唯一名称的列表？

此致

卡尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:06:58.380

如果实在不在意年龄，就不要选了：

```
select distinct u.name from User u 
```

如果您想获得每个用户的有效年龄，但不在乎哪一个，请选择年龄的最小值或最大值：

```
select u.name, max(u.age) from User u group by u.name 
```

# c# - 如何使用 jquery 获取 DotNetNuke ModuleID？

> ID：11362907
> 
> 赞同：5
> 
> 时间：2012-07-06T13:14:57.087
> 
> 标签：c#, jquery, asp.net, dotnetnuke

全部，

我正在开发一个 dnn 6 模块，但似乎找不到使用 JQuery 获取 ModuleID 的任何方法。ModuleID 不在查询字符串中，似乎存储在上下文中。如果查询字符串中未显示 ModuleID，有谁知道如何使用 JQuery 获取 ModuleID？

我尝试执行此操作的一种方法是使用 asp:label 控件并在页面加载中将 ModuleID 分配给标签，然后使用 JQuery 获取该标签的 .val() 。但是，我不想让 ModuleID 只显示在页面上 - 这很愚蠢！:)

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T13:24:22.903

您可以简单地在 View.ascx 中的 <script> 标记内呈现 ModuleId：

```
<script>
    var moduleId = <%= ModuleId %>;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:34:30.137

那将是唯一的方法，如果你不想要页面中的 id 你也可以有一个隐藏的跨度给那个类 moduleid 然后将 moduleid 添加到数据属性 data-moduleid 然后使用 jquery 读出它

```
<span class="moduleid" data-moduleid="<%=ModuleControl.ModuleContext.ModuleId%>"></span> 
```

# html - 将 HTML 文件上传到 iOS 中的 Web 服务器

> ID：11362910
> 
> 赞同：0
> 
> 时间：2012-07-06T13:14:59.893
> 
> 标签：html, objective-c, ios

我需要能够将通过我的 iPhone 应用程序生成的 HTML 文件上传到我的网络服务器。

我确信这是可能的，但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:04:13.867

这是一些使用 iOS 上传图片的代码。更改要上传的文件类型并使其与 HTML 文件一起使用应该很简单。

```
NSString *urlString = @"http://yourserver.com/upload.php";
NSString *filename = @"filename";
request= [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];
NSMutableData *postbody = [NSMutableData data];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@.jpg\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[NSData dataWithData:YOUR_NSDATA_HERE]];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:postbody];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"%@", returnString); 
```

取自这个[较早的线程](https://stackoverflow.com/questions/936855/file-upload-to-http-server-in-iphone-programming)。

# java - JSP{ - HTML 表单 - 提交操作 - 如何发送到 Java 类进行处理

> ID：11362914
> 
> 赞同：1
> 
> 时间：2012-07-06T13:15:13.730
> 
> 标签：java, html, jsp, forms

我有一个基于 JSP html 的表单。我想通过我的 java 代码来发帖，即 HttpURLConnection、OutputStreamWriter 等。

如何使我的表单操作过程指向我的 Java 类来做这篇文章？

我的目标是：

1.  具有表单的 JSP 页面，
2.  提交表格
3.  处理和响应调用了我的 java 代码，它将生成响应（这工作正常）
4.  响应返回到调用 JSP 页面。

真的我的问题是提交表单，并将处理发送到我的 java 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:29:16.167

好的，这是一个关于如何使用 servlet 的简单示例。你真正需要的是一个 Servlet。servlet 实际上是一个 java 类。[检查此示例](http://www.servletworld.com/servlet-tutorials/simple-servlet-example.html)，替换`form.html`为您的`jsp` ，如果您有问题，请告诉我。[这是对什么是 servlet 的简要](http://en.wikipedia.org/wiki/Java_Servlet)说明。

# r - r中的线性距离数据中的条件过滤/子集数据

> ID：11362915
> 
> 赞同：6
> 
> 时间：2012-07-06T13:15:14.373
> 
> 标签：r, filter, conditional-statements

这是我的小例子：......

```
Mark <- paste ("SN", 1:400, sep = "") 
highway <- rep(1:4, each = 100)
set.seed (1234)
MAF <- rnorm (400, 0.3, 0.1)
PPC <- abs (ceiling( rnorm (400, 5, 5)))

set.seed (1234)
Position  <- round(c(cumsum (rnorm (100, 5, 3)), 
cumsum (rnorm (100, 10, 3)), cumsum (rnorm (100, 8, 3)),
  cumsum (rnorm (100, 6, 3))), 1)

mydf <- data.frame (Mark, highway, Position, MAF, PPC) 
```

我想为 PPC 过滤小于 10 的数据，同时为 MAF 过滤大于 0.3 的数据。

```
 # filter PPC < 10 & MAF > 0.3 
 filtered <-  mydf[mydf$PPC < 10  & mydf$MAF > 0.3,] 
```

我有分组变量 - 高速公路，每个标记在高速公路上都有位置。例如前五个标记的高速公路 1：

```
 1.4     7.2      15.5 13.4 19.7
 |-----|.......|.......|.....|.....|
      "SN1" "SN2"   "SN3"  "SN4" "SN5" 
```

现在我想根据每条高速公路上的位置（考虑不同的高速公路长度）选择任何 ~ 30 个标记，以便它们在每条高速公路上分布良好，并且两个选择之间的最小距离不小于 10。

编辑：想法（粗略） ![在此处输入图像描述](../Images/f6554a9ad59ef5b4b6181e3ea161eed4.png)

我可以考虑一下如何解决这个问题。帮助表示赞赏。

**编辑：**这是我能想到的：

```
# The maximum (length) of each highway is: 
out <-  tapply(mydf$Position, mydf$highway, max)
out 
     1      2      3      4 
 453.0 1012.4  846.4  597.6 

min(out)
[1] 453

 #Total length of all highways 
totallength <- sum(out)

# Thus average distance at which mark need to be placed:
totallength / 30 
[1] 96.98 
```

对于 1 号高速公路，理论标记可能位于：

```
 96.98, 96.98+ 96.98, 96.98+96.98+ 96.98, ........till it is less
    than maximum (length )for highway 1. 
```

因此理论上我们需要在每 96.98 处选择标记。但是放在高速公路上的标记可能不会被发现

**注意：分数选择的总结果不必正好是30（大约30）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:04:35.493

由于我们不关心任何其他列，因此如果我们使用 split 来获取位置列表，代码会更容易一些。

```
filtered$highway <- factor(filtered$highway)
positions <- with(filtered, split(Position, highway)) 
```

使用每条高速公路的相对长度可以找到每条高速公路中合适数量的标记。

```
highway_lengths <- sapply(positions, max)
total_length <- sum(highway_lengths)
n_marks_per_highway <- round(30 * highway_lengths / total_length) 
```

我们可以使用分位数函数来获得沿每条高速公路均匀分布的目标点。

```
target_mark_points <- mapply(
  function(pos, n)
  {
    quantile(pos, seq.int(0, 1, 1 / (n - 1)))
  },
  positions,
  n_marks_per_highway
) 
```

对于每个目标点，我们在高速公路上找到最近的现有标记。

```
actual_mark_points <- mapply(
  function(pos, target)  
  {
    sapply(target, function(tgt) 
    {
      d <- abs(tgt - pos)
      pos[which.min(d)]
    })
  },
  positions,
  target_mark_points
) 
```

只是为了看看它是否有效，您可以可视化标记。

```
is_mark_point <- mapply(
  function(pos, mark)
  {
    pos %in% mark
  },
  positions,
  actual_mark_points
)

filtered$is.mark.point <- unsplit(is_mark_point, filtered$highway)

library(ggplot2)    
(p <- ggplot(filtered, aes(Position, highway, colour = is.mark.point)) +
  geom_point()
) 
```

# javascript - 如何将 CSS 添加到 CKEDITOR？

> ID：11362917
> 
> 赞同：0
> 
> 时间：2012-07-06T13:15:22.797
> 
> 标签：javascript, css, ckeditor

CKEDITOR 用于在现场添加新闻。

我想在文本文本编辑器的部分添加类，并像在现场一样查看此文本。

我写了这个。

在 plugins/styles/styles/default.js

```
CKEDITOR.stylesSet.add(
'default',
[
    {
        name:'style',
        element:'span',
        attributes: { 'class': 'test' }
    }
    ]); 
```

配置.js

```
CKEDITOR.editorConfig = function( config )
{
  config.contentsCss = '/tpl/index/css/main.css';
  config.bodyClass = 'test';
} 
```

main.css

```
test {
    font-size: 30px;
} 
```

所以我想突出显示文本并将 class='test' 设置为该文本。但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:19:28.180

也许你想要

```
.test {
    font-size: 30px;
} 
```

# objective-c - 创建 iOS 应用程序时主循环在哪里？

> ID：11362918
> 
> 赞同：4
> 
> 时间：2012-07-06T13:15:25.070
> 
> 标签：objective-c, ios, main

我正在 Xcode 中为 iPhone 编写一个 iOS 应用程序，我在各自的 .h 和 .m 文件中创建了一些类及其方法（这是两个类，所以基本上我有两对 .h 和 .m 文件）

我现在想开始编写我的**主循环**，只要用户点击播放按钮就会执行，但我到底在哪里做呢？

我在 ViewController.m 中这样做吗？例如在这个方法里面：

```
- (IBAction)playPressed:(UIButton *)sender 
{
    // main loop executed in here ?
    // or simply message to the main loop to start executing is *sent* from here ?
} 
```

我在这里读到了一个类似的问题，有人建议 AppDelegate。现在是 AppDelegate.m 还是 AppDelegate.h ？如果是这种情况，我是开始编写代码还是将所有内容都包含在以下内容中：

```
int main(int argc, char **argv)
{
   ....
} 
```

在 Appdelegate 文件中？

我试图在我创建的 game.m 文件中简单地开始实例化类并声明泛型方法（不属于任何特定的类），我一尝试就得到一个***初始化元素不是编译时常量***警告实例化任何东西

有什么帮助吗？来自 c++ 它真的会帮助我一劳永逸地澄清在哪个文件中编写我的主循环以及我是否应该将它包装在某种 int main() 函数中。

谢谢！

PS：

以防万一，我的 ViewController 将仅包含一个播放按钮，该按钮将在按下时开始执行我的主循环，以及一个将终止执行主循环的停止按钮

我在 ViewController.m 中创建了它们各自的方法：

```
- (IBAction)playPressed:(UIButton *)sender 
{
    // 
}

- (IBAction)stopPressed:(UIButton *)sender 
{
    //  ??
} 
```

暂时是空的:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:38:22.993

iOS 上的编程方法与 C++ 方法不同。实际上，在 C++ 中，您必须进行无限循环并在每一帧进行触摸、绘制所有内容等。直到玩家按下“退出”并打破循环。在 iOS 上，情况有所不同：您已经有一个 main.m 文件，其中有一个 main 函数。这将启动应用程序委托。该应用程序委托会告诉您应用程序何时完成启动、进入后台、进入前台等。当应用程序完成启动时，您将进入您的第一个实际屏幕。在那里，您添加子视图。您不会在每一帧都绘制它们。一旦您将视图添加到父视图，这将自动为您完成。iOS 上的编程是基于事件的。你不 不必检查触摸并查看触摸位置是否在按钮上，然后调用该按钮的方法。相反，您为按钮设置了一个回调方法，一旦按下按钮，它就会自动为您调用。当然，您首先需要分配按钮并将其添加到父视图。

一旦你习惯了这种基于事件的编程模型，你肯定会喜欢它。一开始它可能会很不一样，也许它对你没有意义，但不要担心。来自 C++ 背景肯定是一个好的开始。

干杯，

乔治

编辑：在这种情况下，我可以提供更具体的信息：所以，您从第一个屏幕中的 AppDelegate 开始。我们称之为 MainAppScreen。现在，您需要添加这 2 个按钮并为它们设置选择器（回调方法）。我可以看到你已经这样做了。

现在 ：

```
- (IBAction)playPressed:(UIButton *)sender
{
    running = TRUE;
    [self performSelectorInBackground:@selector(myLoop) withObject:nil];
}
- (IBAction)stopPressed:(UIButton *)sender 
{
    running = FALSE;
}
- (void) myLoop
{
    while(running)
    {
       //this is your loop. You can code in here.
    }
} 
```

其中 running 是 MainAppScreen 类中的一个实例变量。

希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:29:40.817

每个 iOS 应用程序以及每个可执行文件都有一个入口点 - 这是 main()。一个可执行文件的入口点不能超过一个。如果您仔细查看该项目，您会发现Xcode 的导航`main.m`器中的组中有一个自动生成的文件，`Supporting Files`如下所示：

```
#import <UIKit/UIKit.h>

#import "MyAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([MyAppDelegate class]));
    }
} 
```

你想要做什么还不够清楚，但这是一个很好的开始阅读 iOS 应用程序的结构和生命周期、objective-c 语法、熟悉`UIKit`Apple 提供的框架和至少一些框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:29:56.010

您在 iOS 应用程序中没有 a `main`（好吧，从技术上讲，您确实有一个 main，但您不必担心编写它）。这一切都为你处理好了。运行循环也为您完成。你所要做的就是创建你的按钮，然后告诉它（通过 addTarget 方法）当它被按下时运行哪个方法。

更新：这是你需要做的伪（ish）代码......

```
[startButton addTarget:@selector(startPressed:)];
[stopButton addTarget:@selector(stopPressed:)];

-(void)startPressed {
  backgroundThread = [[NSThread alloc] initWithWhateverYouWantToRun];
  [backgroundThread start];
}

-(void)stopPressed {
  [backgroundThread stop];
} 
```

在您的后台线程中，如果您想更新 UI，您会调用`sendMessageOnMainThread`（或类似的东西 - 目前不记得确切的细节！）

# iphone - XCode 中的 Facebook SDK 信息

> ID：11362921
> 
> 赞同：0
> 
> 时间：2012-07-06T13:15:37.723
> 
> 标签：iphone, objective-c, xcode, facebook

我外包了一些应用程序开发工作，其中包括安装 Facebook SDK。用户按下一个按钮，他们的分数就会发布在他们的 Facebook 页面上。我可以访问 Facebook Developer 管理工具，但我认为他们没有使用正确的 App ID 或 App Secret。有谁知道我可以在 XCode 文件中的哪里找到这些来确认？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:22:22.840

在源代码搜索 [[Facebook alloc] 然后找到用于 initWithAppId api 的密钥字符串。

```
 facebook = [[Facebook alloc] initWithAppId:@"254214584659950" andDelegate:self]; 
```

# android - 如何将文件保存在 android MotorolaARTIX2 设备上的外部 SDCARD 上？

> ID：11362927
> 
> 赞同：3
> 
> 时间：2012-07-06T13:16:00.673
> 
> 标签：android, file, save, external, sd-card

我想在外部 SD 卡上保存一个文件。我已经实现了一个在外部 sdcard 上保存文件的应用程序。但是我的 Android MotorolaARTIX2 设备包含内部 sdcard。当我试图将文件保存在外部 sdcard 上时，它总是保存到内部 sdcard我的设备。

我已按如下方式实现了我的应用程序：

```
 try {
        File root = Environment.getExternalStorageDirectory();
        if (root.canWrite()){
            File file = new File(root, "myfile.txt");
            FileWriter gpxwriter = new FileWriter(file);
            BufferedWriter out = new BufferedWriter(gpxwriter);
            out.write("Hello world");
            out.close();
        }
    } catch (IOException e) {
        Log.e("Exception", "Could not write file " + e.getMessage());
    } 
```

从上面的代码中，我的应用程序总是将 myfile.txt 文件保存在内部 sdcard 而不是外部 sdcard-ext 上。我的应用程序支持所有具有相同代码的设备。

如何将 myfile.txt 保存在设备的 sdcard-ext（外部）而不是 sdcard（内部）上？

请任何人帮助我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:23:43.943

看看[这个问题](https://stackoverflow.com/questions/5694933/find-an-external-sd-card-location)的答案，[尤其是男爵的答案](https://stackoverflow.com/a/29107397/2823516)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:27:50.413

摩托罗拉为此提供了一个 API。看这里： http: [//developer.motorola.com/docs/motorola-external-storage-api/](http://developer.motorola.com/docs/motorola-external-storage-api/)但这不是一个好的通用解决方案。您可能需要扫描文件系统以找到适用于所有设备的更通用的解决方案。

# haskell - 我如何实际执行 StateT monad 和 IO？

> ID：11362930
> 
> 赞同：5
> 
> 时间：2012-07-06T13:16:03.153
> 
> 标签：haskell, monads, monad-transformers

我正在尝试遵循将[状态与 IO 操作结合](https://stackoverflow.com/questions/3640120/combine-state-with-io-actions)起来构建 AppState 和 IO monad 中给出的建议。我得到的是这样的：

```
module Main where

import Control.Monad.State
import Control.Monad.Trans

data ST = ST [Integer] deriving (Show)
type AppState = StateT ST IO

new = ST []

append :: Integer -> State ST ()
append v = state $ \(ST lst) -> ((), ST (lst ++ [v]))

sumST :: State ST Integer
sumST = state $ \(ST lst) -> (sum lst, ST lst)

script = do
    append 5
    append 10
    append 15
    sumST

myMain :: AppState ()
myMain = do
    liftIO $ putStrLn "myMain start"
    let (res, st) = runState script new
    liftIO $ putStrLn $ show res
    liftIO $ putStrLn "myMain stop"

main = runStateT myMain (ST [15]) 
```

这其中的某些部分我没有得到。`script`我有and`myMain` *和* 让我很困扰`main`。它还困扰着我，我必须在`runState`内部执行，并且我必须在我的主函数中`myMain`输入初始状态。`runStateT`我想要我的“脚本”，可以这么说，直接在 myMain 函数中，因为 myMain 的全部意义在于能够直接在 myMain 和打印操作旁边运行追加和求和。我想我应该能够做到这一点，而不是：

```
myMain :: AppState ()
myMain = do
    liftIO $ putStrLn "myMain start"
    append 5
    append 10
    append 15
    r <- sumST
    liftIO $ putStrLn $ show res
    liftIO $ putStrLn "myMain stop"

main = runState myMain 
```

我曾认为 monad 转换器的目的是让我可以在函数中执行我的 State monad 操作（如上所示）并将 IO 操作提升到该函数中。设置所有这些以便我可以删除其中一个间接层的正确方法是什么？

* * *

除了 Daniel 的解决方案（我已经标记了该解决方案），我还发现了一些变体，它们也可能对这种情况有所帮助。一、myMain和main的最终实现：

```
myMain :: AppState ()
myMain = do
    liftIO $ putStrLn "myMain start"
    append 5
    append 10
    append 15
    res <- sumST
    liftIO $ putStrLn $ show res
    liftIO $ putStrLn "myMain stop"

main = runStateT myMain new 
```

现在，append 和 sumST 的各种实现，除了 Daniel 的：

```
append :: Integer -> AppState ()
append v = state $ \(ST lst) -> ((), ST (lst ++ [v]))

sumST :: AppState Integer
sumST = state $ \(ST lst) -> (sum lst, ST lst) 
```

和（注意只有类型声明改变；事实上你可以完全省略类型声明！）

```
append :: MonadState ST m => Integer -> m ()
append v = state $ \(ST lst) -> ((), ST (lst ++ [v]))

sumST :: MonadState ST m => m Integer
sumST = state $ \(ST lst) -> (sum lst, ST lst) 
```

我突然想到 AppState/StateT monad*与*基本的 State monad 不同，我正在为 State monad 编写 sumST 和 append 代码。从某种意义上说，它们也必须被提升到 StateT monad 中，尽管正确的思考方式是它们必须在 monad 中*运行*（因此，`runState script new`）。

我不确定我是否完全理解它，但我会使用它一段时间，阅读 MonadState 代码，并在它最终在我脑海中运行时写一些关于它的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T13:27:28.503

问题是你让你的`append`和`sumST`函数太单态了！与其直接使用`state`函数，不如使用更多的多态`get`和`put`函数，这样才能赋予它们更精彩的类型

```
append :: MonadState ST m => Integer -> m ()
append v = do
    ST lst <- get
    put (ST (lst ++ [v]))

sumST :: MonadState ST m => m Integer
sumST = do
    ST lst <- get
    return (sum lst) 
```

然后你可以准确地写出`myMain`你提议的内容（尽管你仍然需要在 中给出一个初始状态`main`）。

作为一种风格上的东西，我建议不要定义新`ST`类型：有很多函数可以用列表做一些方便的事情，并且通过`ST`在你和列表之间强加一个构造函数来使它们无法使用可能会很烦人！如果您`[Integer]`改为使用状态类型，则可以进行如下定义：

```
prepend :: MonadState [Integer] m => Integer -> m ()
prepend = modify . (:)

sumST :: MonadState [Integer] m => m Integer
sumST = gets sum 
```

看起来很不错，不是吗？=)

# java - FilterInputStream 不执行

> ID：11362933
> 
> 赞同：1
> 
> 时间：2012-07-06T13:16:14.790
> 
> 标签：java, io

我正在尝试使用 FilterInputStream 但我无法使其工作。如果我编写一个 FilterReader 一切顺利：

```
import java.io.*;

class Filter extends FilterReader {
  Filter(Reader in) {
    super(in);
  }

  public int read() throws IOException {
    return 'A';
  }
}

public class TestFilter {
  public static void main(String[] args) throws IOException {
    Reader in = new Filter(new InputStreamReader(System.in));
    System.out.println((char)in.read());
  }
} 
```

执行是 A

但如果我使用 FiterInputStream，执行块读取：

```
import java.io.*;

class Filter extends FilterInputStream {
  Filter(InputStream in) {
    super(in);
  }

  public int read() throws IOException {
    return 'A';
  }
}

public class TestFilter {
  public static void main(String[] args) throws IOException {
    Reader in = new InputStreamReader(new Filter(System.in));
    System.out.println((char)in.read());
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:01:51.953

在第一种情况下 in.read() 直接调用 Filter.read() 方法。在第二种情况下，in.read() 调用 InputStreamReader.read()。
现在我们可能期望它将调用委托给 Filter.read()。但是 InputStreamReader.read() 实现做了别的事情——我不明白它在做什么。
但最终调用了**FilterInputStream.read(byte[], int, int)**方法，等待用户输入。所以为了得到你期望的行为——我猜——我们需要重写这个读取方法——如下所示。

导入java.io.*；

```
class Filter extends FilterInputStream {
  Filter(InputStream in) {
    super(in);
  }

  public int read() throws IOException {
    return 'A';
  }

  @Override
    public int read(byte[] b, int off, int len) throws IOException {
      if(len == 0) {
          return 0;
      }
      b[off] = (byte) read();
      return 1;
     }

}

public class TestFilter {
  public static void main(String[] args) throws IOException {
    Reader in = new InputStreamReader(new Filter(System.in));
    System.out.println((char)in.read());
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T13:29:46.787

在第一个代码中，您的 Reader 是：

```
new Filter(new InputStreamReader(System.in)); 
```

它的`read`方法是您已覆盖的方法：

```
public int read() throws IOException {
    return 'A';
} 
```

在第二个代码中，您的 Reader 是：

```
new InputStreamReader(new Filter(System.in)); 
```

并且`read`没有使用您的过滤器的方法。阅读器会等待，`System.in`因此您必须输入某些内容 (+ ENTER) 才能读取某些内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:37:36.817

在你的第二次`TestFilter`更换

```
Reader in = new InputStreamReader(new Filter(System.in)); 
```

和

```
InputStream in = new Filter(System.in); 
```

这将`Filter.read()`在您创建的发送“A”到的类上执行`System.out`。

# devexpress - Devexpress 中的可折叠面板，没有浏览器问题

> ID：11362934
> 
> 赞同：0
> 
> 时间：2012-07-06T13:16:17.520
> 
> 标签：devexpress

DevExpress 是否有可折叠面板而不会出现浏览器问题？

恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:08:52.383

您可以自定义 ASPxRoundPanel 或使用 ASPxNavbar。我使用 ASPxNavBar，尽管我读到它可能是这项任务的开销。
[可折叠的 ASPxRoundPanel 示例。](http://www.devexpress.com/Support/Center/e/E143.aspx)
[ASPxNavBar 演示。](http://demos.devexpress.com/ASPxperienceDemos/NavBar/DataBinding.aspx)

# objective-c - 自定义 ABPeoplePickerNavigationController，如 viber、whatsapp

> ID：11362936
> 
> 赞同：3
> 
> 时间：2012-07-06T13:16:21.173
> 
> 标签：objective-c, ios

如何像 viber 一样显示 ABPeoplePickerNavigationController，其中 viber 图标出现在那些已经在使用它的联系人面前。请检查屏幕截图。这是我正在尝试做但面临问题的代码...

```
ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];

    picker.navigationBar.tintColor = [UIColor colorWithRed:33.0f/255.0f green:54.0f/255.0f blue:63.0f/255.0f alpha:0.20f];

    picker.peoplePickerDelegate = self;

    [self presentModalViewController:picker animated:YES];

    UIView *view = picker.topViewController.view; 
    UITableView *tableView = nil;
    for(UIView *uv in view.subviews)
    {
        if([uv isKindOfClass:[UITableView class]])
        {
            tableView = (UITableView*)uv; 

            UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"logoIcon"]];

            NSLog(@"NumberOfSection<--->%d",[tableView numberOfSections]);

            NSLog(@"NumberOfRows=%dInSection=%d",[tableView numberOfRowsInSection:i], i);

            for (int i = 0; i < [tableView numberOfSections]; i++)
            {
                for (int j = 0; j < [tableView numberOfRowsInSection:i]; j++)
                {
                    UITableViewCell *celll = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:j inSection:i]];

                    celll.accessoryView = imageView;

                    NSLog(@"currentIndex=>%@",celll.accessoryView);

                    celll = nil;
                }
            }

            break;
        }
    } 
```

![在此处输入图像描述](../Images/b663110645dcc101f35c8082f4f7ce31.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:10:55.073

我不认为你可以`ABPeoplePickerNavigationController`用来做你想做的事。我建议只创建自己的自定义`UIViewController`并自己制作联系人表格视图。这很容易做到，这样您就可以自定义单元格，`cellForRowAtIndexPath`而无需进行任何黑客攻击。

# c# - 制作应用程序窗口的透明背景

> ID：11362938
> 
> 赞同：0
> 
> 时间：2012-07-06T13:16:26.543
> 
> 标签：c#, vb.net, visual-c++

我想使用 c# 或 vc++ 使任何应用程序窗口而不是其内容透明。例如，如果我打开我的计算机，那么它会使该窗口对我的应用程序而不是文件夹透明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:31:47.097

设置表单属性

```
this.BackColor = System.Drawing.Color.Lime;
this.TransparencyKey = System.Drawing.Color.Lime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:30:18.790

对谷歌：

[http://www.intowindows.com/make-windows-7-transparent-with-system-transparency-tool/](http://www.intowindows.com/make-windows-7-transparent-with-system-transparency-tool/)

您可以在 Windows 7 中轻松完成此操作，无需代码。对于 Win 200/XP，再次到 Google 机器：

[http://www.codeproject.com/Articles/4473/Making-any-application-transparent-in-Windows-2000](http://www.codeproject.com/Articles/4473/Making-any-application-transparent-in-Windows-2000)

> 布尔 m_b 跟踪；// 当鼠标被跟踪时为真 HWND m_hCurrWnd; // 处理 // 鼠标最后出现的窗口 HCURSOR m_hCursor; // 魔杖光标
> 
> // 全局定义 typedef BOOL (WINAPI *lpfn) (HWND hWnd, COLORREF cr, BYTE bAlpha, DWORD dwFlags); lpfn g_pSetLayeredWindowAttributes;
> 
> BOOL CWinTransDlg::OnInitDialog() { .... // 获取 SetLayeredWindowAttributes 的函数指针 // 在 User32.dll HMODULE hUser32 = GetModuleHandle(_T("USER32.DLL")); g_pSetLayeredWindowAttributes = (lpfn)GetProcAddress(hUser32, "SetLayeredWindowAttributes"); if (g_pSetLayeredWindowAttributes == NULL) AfxMessageBox ("这个版本的 Windows 不支持分层", MB_ICONEXCLAMATION);
> 
> ```
> //  Load the wand cursor
> HINSTANCE hInstResource = AfxFindResourceHandle(
>      MAKEINTRESOURCE(IDC_WAND), RT_GROUP_CURSOR);
> m_hCursor = ::LoadCursor( hInstResource, MAKEINTRESOURCE(IDC_WAND) );
> ... } 
> ```
> 
> void CWinTransDlg::OnLButtonDown(UINT nFlags, CPoint point) { ... SetCapture(); // 使鼠标移动事件 // 被定向到这个窗口 m_hCurrWnd = NULL; // 目前没有要透明的窗口 m_bTracking = true; // 设置跟踪标志 ::SetCursor(m_hCursor); // 将鼠标指针变成魔杖光标 ... }
> 
> void CWinTransDlg::OnMouseMove(UINT nFlags, CPoint point) { ... if (m_bTracking) { ... // 将鼠标坐标转换为屏幕 ClientToScreen(&point); ... // 获取鼠标坐标处的窗口 m_hCurrWnd = ::WindowFromPoint(point); ... // 显示窗口的详细信息，如类、标题等 ... } ... }
> 
> void CWinTransDlg::OnLButtonUp(UINT nFlags, CPoint point) { ... // 停止跟踪鼠标 ReleaseCapture(); m_bTracking = 假；
> 
> ```
> //  If the window under the mouse is not of this 
> //  application we toggle its
> //  layer style flag and apply the alpha as set by the slider control
> if (g_pSetLayeredWindowAttributes && m_hCurrWnd != m_hWnd)
> {
>     ::SetWindowLong(m_hCurrWnd, GWL_EXSTYLE,
>                     GetWindowLong(m_hCurrWnd, 
>                     GWL_EXSTYLE) ^ WS_EX_LAYERED);
>     g_pSetLayeredWindowAttributes(m_hCurrWnd, 0,
>                     (BYTE)m_slider.GetPos(), LWA_ALPHA);
> 
>     ::RedrawWindow(m_hCurrWnd, NULL, NULL,
>                    RDW_ERASE | RDW_INVALIDATE | 
>                    RDW_FRAME | RDW_ALLCHILDREN);
> }
> ... } 
> ```

# php - 一组Facebook上的PHP自动发帖

> ID：11362939
> 
> 赞同：1
> 
> 时间：2012-07-06T13:16:31.250
> 
> 标签：php, facebook

我有一个网站，人们可以在上面发帖，我需要这些帖子直接进入 Facebook 中某个群组的订阅源。（我是群主）

是否可以？我需要什么？它应该如何工作？

我找到了这个[https://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk)，但我不知道它是否是我需要的，并且无法弄清楚它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:21:25.033

为此，您需要：

*   [创建一个应用程序](https://developers.facebook.com/apps)将您的网站连接到 Facebook。创建应用程序后，您需要获取令牌和密码以通过 Facebook 服务器对您的应用程序进行身份验证。
*   捕捉您网站上的评论。
*   `POST`[使用Graph API](https://developers.facebook.com/docs/reference/api/)将这些评论发送到您的 Facebook 群组。

此外，为了防止垃圾邮件，您可能希望在用户发表评论之前通过 Facebook对其进行[身份验证。](https://developers.facebook.com/docs/authentication)

如果您在 PHP 中执行此操作，[PHP SDK](https://developers.facebook.com/docs/reference/php)可以为您节省大量编码。要使用它，您的 php 环境必须安装并启用[cURL 。](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:58:05.770

我的应用程序中有一个类似的功能[- wootube](http://wootube.woolei.com)，我使用 fb.api 添加了一个“分享到 WooTube 页面和组”按钮。

用户点击链接后会自动发布到[wootube群组](http://www.facebook.com/groups/wootube)和[wootube页面](http://www.facebook.com/wootubes)。

如果你想看看它的样子，这里是屏幕截图。 [https://fbcdn-sphotos-ha.akamaihd.net/hphotos-ak-ash4/383568_191076937694203_922285357_n.jpg](https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash4/383568_191076937694203_922285357_n.jpg)

```
 function Promote(){
           var lnk = 'http://www.wootube.woolei.com?v=<?php echo $_GET["id"] ?>';  

        FB.login(function(response)
        {
            if (response.authResponse)
            {
                 //Post To WooTube Group
                 FB.api('/271691796276524/feed', 'post', { 
                 message: lnk,
                 link: lnk, 

                 }, 
                 function(response) {
                   if (!response || response.error) {
                     //alert('You have to join the group first!');

                  } else {
                     //alert("Successfully Posted to WooTube Group!");

                   }
                 });

                 //Post to Wootube Page
                 FB.api('/173724382762792/feed', 'post', { 
                 message: lnk,
                 link: lnk

                 }, 
                 function(response) {
                   if (!response || response.error) {
                     //alert('You have to like http://www.facebook.com/WooTubes first!');

                  } else {
                     //alert("Successfully Posted to WooTube Page!");

                   }
                 });

            }
            else
            {
                alert('Not logged in');
            }
        }, { scope : 'publish_stream' });

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-26T13:26:48.390

```
 function Promote(){
           var lnk = 'http://www.wootube.woolei.com?v=<?php echo $_GET["id"] ?>';  

        FB.login(function(response)
        {
            if (response.authResponse)
            {
                 //Post To WooTube Group
                 FB.api('/271691796276524/feed', 'post', { 
                 message: lnk,
                 link: lnk, 

                 }, 
                 function(response) {
                   if (!response || response.error) {
                     //alert('You have to join the group first!');

                  } else {
                     //alert("Successfully Posted to WooTube Group!");

                   }
                 });

                 //Post to Wootube Page
                 FB.api('/173724382762792/feed', 'post', { 
                 message: lnk,
                 link: lnk

                 }, 
                 function(response) {
                   if (!response || response.error) {
                     //alert('You have to like http://www.facebook.com/WooTubes first!');

                  } else {
                     //alert("Successfully Posted to WooTube Page!");

                   }
                 });

            }
            else
            {
                alert('Not logged in');
            }
        }, { scope : 'publish_stream' });

      } 
```

# javascript - 悬停图像以在其他 div 中显示文本

> ID：11362941
> 
> 赞同：-4
> 
> 时间：2012-07-06T13:16:34.527
> 
> 标签：javascript, css, html, hover

我在一个单独的 div 中有一系列 5 个不同的图像。在这些下方，我有另一个 div，我打算根据悬停的任何图像填充文本。

这个想法是每个图像在悬停时都会用相关信息填充这个文本 div。我还希望这个 div 动画，以便它以高度 0 开始并将其扩展为 150px，然后添加文本，当鼠标移出图像时它应该折叠。

这个区域下面有一个页脚，所以我不能隐藏它然后在悬停时显示。

有没有一种巧妙的方法可以用 JavaScript / JQuery 做到这一点？

谢谢

编辑：

我自己整理了一些东西来尝试解决这个问题，但是有几个问题

```
$(document).ready(
    function(){    
        $("#upper").hover(
            function(){
                $('#caption').animate({'height': '150px'}, 1500);
                $('#caption').html('Tesrtssadwa');
            }, 
            function(){
                $('#caption').stop().animate({'height': '0px'}, 1500);
            }
        );
}
); 
```

所以这几乎可以解决我想要的几个问题。如果我快速将鼠标悬停在 div 上几次，它将对动画进行排队。我希望这不会发生。有没有一种简单的方法可以做到这一点，还是会比它的价值更麻烦？

此外，在某一时刻，我设法让 div 折叠但文本仍在显示。我无法重现这一点，但有没有办法让文本在 div 折叠时消失？

```
$('#caption').html(''); 
```

看起来有点糟糕

编辑：我可以重现它。将鼠标悬停在图像上直到它完全展开，然后离开它会折叠 div 并且文本将重新出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:22:17.603

您可能会对[mouseover](http://api.jquery.com/mouseover/)、[mouseout](http://api.jquery.com/mouseout/)、[slideDown](http://api.jquery.com/slideDown/)和[slideUp](http://api.jquery.com/slideUp/)函数感兴趣。如果我理解正确，那么您正在寻找这样的东西：

```
$("#picture1").mouseover(function() {
        $("#textdiv").slideDown().html("This is information about picture 1\. It is the first picture."
}).mouseout(function() {
        $("#textdiv").slideUp();
});

$("#picture2").mouseover(function() {
        $("#textdiv").slideDown().html("This is information about picture 2\. It is the second picture."
}).mouseout(function() {
        $("#textdiv").slideUp();
});

$("#picture3").mouseover(function() {
    $("#textdiv").slideDown().html("This is information about picture 3\. It is the last picture."
}).mouseout(function() {
    $("#textdiv").slideUp();
}); 
```

# python - Python中的高效协整测试

> ID：11362943
> 
> 赞同：22
> 
> 时间：2012-07-06T13:16:37.917
> 
> 标签：python, pandas, linear-regression

我想知道是否有比以下方法更好的方法来测试两个变量是否协整：

```
import numpy as np
import statsmodels.api as sm
import statsmodels.tsa.stattools as ts

y = np.random.normal(0,1, 250)
x = np.random.normal(0,1, 250)

def cointegration_test(y, x):
    # Step 1: regress on variable on the other 
    ols_result = sm.OLS(y, x).fit() 
    # Step 2: obtain the residual (ols_resuld.resid)
    # Step 3: apply Augmented Dickey-Fuller test to see whether 
    #        the residual is unit root    
    return ts.adfuller(ols_result.resid) 
```

上述方法有效；但是，它不是很有效。当我运行时`sm.OLS`，会计算很多东西，而不仅仅是残差，这当然会增加运行时间。我当然可以编写自己的代码来计算残差，但我认为这也不会非常有效。

我正在寻找一个直接测试协整的内置测试。我在想`Pandas`，但似乎找不到任何东西。或者，也许有一个聪明的方法可以在不运行回归的情况下测试协整，或者一些有效的方法。

我必须运行很多协整测试，并且改进我当前的方法会很好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-08-18T08:36:48.017

您可以尝试以下方法：

```
import statsmodels.tsa.stattools as ts 
result=ts.coint(x, y) 
```

编辑：

```
import statsmodels.tsa.stattools as ts
import numpy as np
import pandas as pd
import pandas.io.data as web

data1 = web.DataReader('FB', data_source='yahoo',start='4/4/2015', end='4/4/2016')

data2 = web.DataReader('AAPL', data_source='yahoo',start='4/4/2015', end='4/4/2016')

data1['key']=data1.index

data2['key']=data2.index

result = pd.merge(data1, data2, on='key')

x1=result['Close_x']

y1=result['Close_y']

coin_result = ts.coint(x1, y1) 
```

代码不言自明：- 1）导入必要的包 2）获取 Facebook 和 Apple 股票一年的数据 3）根据日期列合并数据 4）选择收盘价 5）进行协整检验 6）变量 coin_result 有协整检验的统计量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-22T12:49:43.853

您要求的“更好的测试方法”是 johansens 测试。

Johansens 检验消除了为协整检验变量对的需要，因为您可以一次检验所有变量对。

这将显着加快您的程序，因为根据定义，循环是 N 阶复杂度，通过删除循环，它变为 1 阶复杂度，这意味着缩放到许多变量不是问题（从而能够更快地计算协整的内容）。

欲了解更多信息，关于测试的原始文章是：Estimation and Hypothesis Testing of Cointegration Vectors in Gaussian Vector Autoregressive Models Søren Johansen Econometrica Vol. 59, No. 6 (Nov., 1991), pp. 1551-1580 Published by: The Econometric Society DOI: 10.2307/2938278 Stable URL: [http://www.jstor.org/stable/2938278](http://www.jstor.org/stable/2938278)页数: 30

statsmodels 有 vecm 模块，其中包括 johansens 协整检验。要得到它，你必须 git 它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-20T03:57:10.817

残差可以很容易 地用 线性代数`y`计算`n x 1``X``n x m``residuals = y-X(X'X)^-1X'y`

但更有效的方法是使用 Johansen 测试[https://en.m.wikipedia.org/wiki/Johansen_test](https://en.m.wikipedia.org/wiki/Johansen_test)

我在这里找到了一个 python 实现： [https ://github.com/iisayoo/johansen](https://github.com/iisayoo/johansen)

我还没有测试过。

# ruby-on-rails - 从 mixin 设置控制器会话值

> ID：11362945
> 
> 赞同：0
> 
> 时间：2012-07-06T13:16:40.260
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, session, mixins

我有一个需要跨多个 Rails 控制器使用的方法。为了使我的代码保持干燥，我将此方法拆分为一个扩展模块，然后我可以将其包含到任何需要使用它的控制器中，如下所示：

```
# app/controllers/jobs_controller.rb
require "extensions/job_sorting_controller_extensions"

class JobsController < ApplicationController
  include Extensions::JobSortingControllerExtensions

  def index
    @jobs = Job.order(job_sort_order)
  end
end

# lib/extensions/job_sorting_controller_extensions.rb
module Extensions
  module JobSortingControllerExtensions
    # Prevent sql injection and control the direction of the sort depending
    # on which option is selected. Remember the sort by storing in session.
    def job_sort_order
      if params[:job_sort].present?
        job_sort = case params[:job_sort]
                   # This makes jobs which have no due date at all go to the bottom
                   # of the list. INFO: http://stackoverflow.com/a/8949726/574190
                   # If due_date ever becomes required then this can be simplified.
                   when "due_date" then "coalesce(due_date, '3000-12-31') asc"
                   when "created_at" then "created_at desc"
                   end
        session[:job_sort] = job_sort
      end

      # Set the session :job_sort to a default if it's empty at this point.
      session[:job_sort] ||= "created_at desc"
    end
  end
end 
```

如您所见，这`job_sort_order`需要访问会话。问题是我似乎无法从 mixin 访问会话。我没有收到错误或任何东西，会话永远不会设置。

我相当确定该`job_sort_order`方法可以正常工作，因为如果我将整个方法复制/粘贴回控制器而不是从 mixin 中使用它，那么一切都会按我的意愿工作。

有没有办法从 mixin 访问会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:55:58.047

有几种方法可以掌握正在发生的事情。使用愚蠢的 puts 来检查您的会话对象。使用调试器或撬来进入您的实现。

从我在您的代码中看到的，我认为您的模块实际上可以访问会话。否则它会抛出一个名称错误，因为会话将是未知的，因为它没有在你的模块中定义。

如果您的会话对象的值在请求之间不存在，那么我猜您的会话处理有问题。您的会话中是否还有其他内容？

# zsh - 安装 oh-my-zsh 时出错

> ID：11362951
> 
> 赞同：3
> 
> 时间：2012-07-06T13:17:00.047
> 
> 标签：zsh

安装 oh-my-zsh 时出现错误，执行以下操作：

```
wget --no-check-certificate https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh 
```

但最后我得到：

```
/usr/bin/env: zsh: No such file or directory
sh: source: not found 
```

我究竟做错了什么 ？

机器：**Ubuntu 10.10**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T16:17:59.313

对于在 ubuntu 上使用 oh-my-zsh 可能有问题的其他人，这里是从这个要点中获取的解决方案：[https ://gist.github.com/1498393](https://gist.github.com/1498393)

首先安装 zsh ：

```
apt-get install zsh 
```

然后使用 zsh 安装 oh-my-zsh ：

```
wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | zsh 
```

然后你把你的shell改成zsh

```
chsh -s `which zsh` 
```

然后确保重新启动终端会话，无需重新启动

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T23:02:06.590

您（可能）没有安装 zsh 。您应该`sudo apt-get install zsh`在运行脚本之前运行。

如果您安装了 zsh，您应该执行以下操作：

```
sudo ln -s /bin/zsh4 /bin/zsh 
```

这是因为 Ubuntu 在安装时不会这样做，所以你必须自己动手™。

无论如何，您应该更新到[Ubuntu 12.04LTS Precise Pangolin](http://www.ubuntu.com/download/desktop/upgrade)，因为您的版本不再支持。

# r - 在 R 中对数据进行排序

> ID：11362952
> 
> 赞同：2
> 
> 时间：2012-07-06T13:07:34.767
> 
> 标签：r, dataset

我有一个数据集，需要按参与者 (RECORDING_SESSION_LABEL) 和 trial_number 进行排序。但是，当我使用 R 对数据进行排序时，我没有尝试将变量按我想要的正确数字顺序排列。参与者变量输出正常，但试用 ID 变量以错误的顺序输出，无法满足我的需要。

使用： `fix_rep[order(as.numeric(RECORDING_SESSION_LABEL), as.numeric(trial_number)),]`

参与者 ID 显示为：

118 118 118 等 211 211 211 等 306 306 306 等（没关系）

trial_number 出来为：

1 1 10 10 11 11 12 12 13 13 14 14 15 15 16 16 17 17 18 18 19 19 2 2 20 20 ....（这不是我想要的 - 它似乎是按词汇排序而不是按数字排序）

我想要的是在每个参与者编号中像这样订购 trial_number：

1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9 10 10 11 11 ....

我已经检查过这些变量不是因子并且是数字的，并且在没有'as.numeric'的情况下也尝试过，但没有任何乐趣。环顾四周，我看到了一些建议，`sort()`并且`mixedsort()`可能会代替“订单”来解决问题，但都会出现错误。我正在慢慢地把头发拉出来，因为我认为这应该是一件简单的事情。任何人都可以帮助阐明如何做到这一点以获得我需要的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:20:22.230

即使您声称它不是一个因素，但它的行为确实就像它是一个因素一样。测试某个东西是否是一个因素可能会很棘手，因为一个因素只是一个具有级别属性和类标签的整数向量。如果这是一个因素，您的代码需要调用`as.character()`嵌套在`as.numeric()`：

`fix_rep[order(as.numeric(RECORDING_SESSION_LABEL), as.numeric(as.character(trial_number))),]`

为了确定这是否是一个因素，我推荐该`str()`功能： `str(trial_number)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:26:47.073

我认为在这种情况下设计自己的功能可能是值得的。不会*太*很难，基本上你可以设计一个冒泡排序算法，做一些改动。这些更改可以将每个数字更改为一个字符串，并首先将具有不同位数的数字分类到不同的 bin 中（通过查找哪些数字（现在是字符串）具有最大数量的索引来轻松完成）。然后，以类似的方式，可以通过将最低有效位转换为数字类型并检查哪些是最大/最小来对这些箱中的数字进行排序。如果你有兴趣，我可以为此想出一些代码，但是，看起来我上面的两个已经用一些内置函数打败了我。我从未使用过这些功能，所以我不确定它们是否会按您的意愿工作，但是重新发明轮子没有用。

# sql-server - 解析搜索字符串减去停用词

> ID：11362955
> 
> 赞同：2
> 
> 时间：2012-07-06T13:17:19.747
> 
> 标签：sql-server, full-text-search

我的任务是在一个新应用程序上创建一个“google-esque”搜索机制，并且我在存储过程中遇到了一些困难，该存储过程旨在在 SQL Server 数据库中运行实际搜索。

本质上，该过程是在从用户输入中获取的字符串中传递的，然后使用以下替换将其解析为包含语句。

```
SELECT @SearchString = '"'+ REPLACE(REPLACE(@SearchKeyword,'"',''), ' ', '" AND "') +'"' 
```

除非 @SearchKeyword 变量包含停用词，否则这非常有效，此时，将其作为链接 AND 语句的一部分包含会导致找不到结果的错误。

（例如，使用“Something Somewhere”搜索用户会返回正确的结果集，但Something of Somewhere 由于未包含在全文索引目录中而不会返回任何内容）。

我知道我可以采用 nuke-from-orbit 方法从停止列表中删除所有条目，但理想情况下，我想简单地修改原始替换以不链接到停止列表中包含的和语句单词。

不幸的是，这把我带到了我知识的边缘，我找不到从哪里提取这些信息以便将其用于替换的目的。

我是否走在正确的轨道上，或者删除停止列表（虽然很混乱）是最好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:40:48.730

找到了这个问题的答案，所以将其留在这里以供参考。

您可以通过将文本传递到 sys.dm_fts_parser 来识别输入中的哪些词是默认停用词

```
DECLARE @Keywords VARCHAR(200)
SET @Keywords = '"Web Designer"'

SELECT * 
FROM sys.dm_fts_parser(@Keywords, 1033, 0, 0) 
WHERE special_term <> 'Noise Word' AND display_term IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:46:28.720

手动删除所有停用词，虽然不是最好的解决方案！

# automapper - AutoMapper 有模块吗？

> ID：11362967
> 
> 赞同：2
> 
> 时间：2012-07-06T13:18:17.120
> 
> 标签：automapper

我的 AutoMapper 配置类分布在它们所属的不同项目中，即 Business.SalesDtoAutomaps 与 Presentation.SalesViewModelAutomaps 并设置如下：

```
public sealed SalesDtoAutomaps {
 public static void Configure()
 {
    Mapper.CreateMap<...>()
    Mapper.CreateMap<...>()
    Mapper.CreateMap<...>()
 }
} 
```

在应用启动时，所有 *Automaps 都会在 Global.asax 中被调用。实际上是否有正确的方法来做到这一点，类似于[Autofac 模块](http://code.google.com/p/autofac/wiki/StructuringWithModules)？

如果有一种模块式的方法，是否还有一种方法可以轻松地将依赖项注入其中，因为这很快成为我的配置器的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:47:04.920

对于映射的集中配置，请查看 Automapper 配置文件。只需创建一个继承自 Automapper.Profile 的类并覆盖 Configure 方法。把你所有的 CreateMap 调用放在那里（好吧，不是全部，而是那些与该配置文件有关的调用）。

# html - 网站图标不起作用

> ID：11362968
> 
> 赞同：18
> 
> 时间：2012-07-06T13:18:17.350
> 
> 标签：html, favicon

我试图插入我的网页的网站图标不起作用。有人可以告诉我我需要插入它的代码和样式吗？

```
<html>
    <head>
        <title>Welcome to Crash - Login or Signup</title>
        <link rel="stylesheet" type="text/css" href="crash_styling.css"></link>
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">      
    </head> 

    <body  link="#336666" alink="red" vlink="red">

        <div id="header_title">
            <h1 id="title">crash</h1>
            <p id="motto">Keep track of all your assignments and projects.</p>
        </div>  

        <form name="input" action="html_form_action.asp" method="get" id="user_passEntry">
            Username:<input type="text" name="username" placeholder="Your Username" /> <br />
            Password:<input type="password" name="password" placeholder="Your Password" />
            <input type="submit" value="submit">
        </form>

        <p id="description">Crash is a way students can keep track of their projects and assignments on the computer or on their devices. With crash, you can be sure you'll never turn in something late again.</p>

                <div class="make"><a href="crash_styling" style="text-decoration:none"/>Make a New Assignment</div>
                <div class="edit"><a href="crash_styling" style="text-decoration:none"/>Edit an Assignment</div>
                <div class="check"><a href="crash_styling" style="text-decoration:none"/>Check off an Assignment</div>
    </body> 

</html> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-06T13:23:48.000

要在您的网站上放置 Favicon，您可以在`<head>`标签中使用以下内容

```
<link rel="shortcut icon" href="http://yourwebsitepath/favicon.ico" /> 
```

您需要确保图标的路径正确。如果路径不正确，则不会出现。我还看到缓存问题使图标看起来不起作用。清除缓存后，请务必尝试重新启动浏览器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T13:24:07.827

很可能您的*图标**路径不好*。确认您的*文件路径*。尝试使用

 **```
href="favicon.ico" 
```

代替

```
href="/favicon.ico" 
```

也许它会起作用。或者，如果您在某个*文件夹*中有图标，例如在*图像中*

```
href="images/favicon.ico" 
```

你做得对，但如果你*的路径不好*，*图标*就不会出现。

所以你的`CSS`作品，如果你的*图标*与文件处于*同一级别*`CSS`，那么删除`/`它应该可以工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-21T09:35:52.743

如果使用 Chrome：清除缓存，关闭 Chrome，然后重新启动。这对我有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-04-13T14:45:41.627

有时[强制重新加载](https://en.wikipedia.org/wiki/Wikipedia:Bypass_your_cache)可以解决问题。您需要重新加载浏览器的缓存内存。

*   火狐：ctrl + shift + R
*   Chrome： ctrl + 右键单击​​ Chrome 的重新加载按钮
*   Edge：与 Chrome 相同，或 ctrl + F5

其他组合可以在上面提供的链接中找到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-03T19:48:08.543

1.  制作一个PNG文件

2.  将其设置为 index.html 页面中的图标，以便覆盖缓存：

有用。**

# r - glmnet 套索 ROC 图表

> ID：11362974
> 
> 赞同：0
> 
> 时间：2012-07-06T13:18:33.433
> 
> 标签：r, roc, glmnet, lasso-regression

我在`glmnet`（实现套索回归）中使用了 k 折交叉验证，但我无法从中制作 ROC 图表。

```
library(glmnet)
glm_net <- cv.glmnet(dev_x_matrix,dev_y_vector,family="binomial",type.measure="class")
phat <- predict(glm_net,newx=val_x_matrix,s="lambda.min") 
```

这让我得到了一个看起来像拟合值对数的向量。在此之后我试图生成一些 ROC 图表，但它没有工作。我认为这是因为 x 和 y 对象的性质进入`glmnet`. 你有什么想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-03T04:58:44.720

```
require("glmnet") 
```

只需更改度量，您将获得 AUC。它不是 ROC 曲线，但提供等效信息。

```
glm_net <- cv.glmnet(x, y, family="binomial", type.measure="auc")
plot(glm_net) 
```

这是我正在训练的模型中的一个示例，只是为了展示它的外观。顺便提一句。该算法非常快！

![在此处输入图像描述](../Images/bf2a649ef45e00b3ae1a49398d281161.png)

有关更多模型可视化技术，请查看[ROCr 包](http://cran.r-project.org/web/packages/ROCR/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:26:38.390

我假设您在集合 {0,1} 中有二元观察。

您可以使用 logit 函数将 phat 变量中的预测值转换为 [0, 1] 范围：

```
phat_new = exp(phat)/(1+exp(phat)) 
```

现在，您知道预测值 phat_new、观察值的真实值 val_y_matrix 以及验证数据集中 1 的百分比 p 是多少。绘制 ROC 的一种方法如下：

修复 t。这是模型的截止阈值（在 [0,1] 中）。计算以下内容：

```
# percentage of 1 observations in the validation set, 
p = length(which(val_y_matrix==1))/length(val_y_matrix)

# probability of the model predicting 1 while the true value of the observation is 0, 
p_01 = sum(1*(phat_new>=t & val_y_matrix==0))/dim(val_x_matrix)[1] 

# probability of the model predicting 1 when the true value of the observation is 1, 
p_11 = sum(1*(phat_new>=t & val_y_matrix==1))/dim(val_x_matrix)[1]

# probability of false-positive, 
p_fp = p_01/(1-p)

# probability of true-positive, 
p_tp = p_11/p

# plot the ROC, 
plot(p_fp, p_tp) 
```

我想知道是否有更好的方法来做到这一点。例如，如果您使用分类树，您可以将损失矩阵作为模型的输入，您将获得的模型将根据损失矩阵的成本比而有所不同。这意味着通过改变成本比，你会得到不同的模型，不同的模型将是 ROC 曲线上的不同点。

# bash - Shell 脚本因目录中的大量文件而失败

> ID：11362978
> 
> 赞同：1
> 
> 时间：2012-07-06T13:18:46.157
> 
> 标签：bash, sh

操作系统：aix，外壳：bsh

我在一个目录中有大约 20k 个文件，这些文件名为 filename.pdf.marker 和 filename.pdf，我们使用以下代码段复制目录内容

```
ls ${WORKING_DIR}/*.pdf.marker 2> /dev/null | while read FILEMARKER;
do
    FILENAME=${WORKING_DIR}/$(basename ${FILEMARKER} .marker)
        mv ${FILENAME} ${LOG_DIR}/.  
        mv ${FILENAME}.marker ${LOG_DIR}/.  
    done 
```

但问题是并非所有文件都被复制，因为**ls**不会返回工作目录中的完整文件列表，因为文件列表太长了。

您能给我一些建议如何在不删除循环的情况下升级脚本吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:21:15.377

请改用 shell glob。例如：

```
for file in ${WORKING_DIR}/*.pdf.marker; do
    : # do something with "$file"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:57:52.760

尝试`find`代替`ls`：

```
find ${WORKING_DIR} -name \*.pdf.marker | while read FILENAME; do
  ...
done 
```

为了简单起见，我故意忽略了文件名中可能出现的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:06:04.433

我不想从 CodeGnome 窃取正确答案的荣誉，但要弄清楚会发生什么：`ls "$WORKING_DIR"/*.pdf.marker`导致 shell 分叉一个新进程，进程映像`ls`带有 #num_matching_files 参数（不像在 Windows 上，每个命令都必须包含自己的globbing 代码，在 Unix 上，glob在命令被调用之前由**shell扩展）。**

大多数（如果不是所有）系统都对命令行的长度/参数数量有限制，而您只是在这里碰壁（因为在您的情况下#num_matching_files 是 20000）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T13:23:28.697

如果文件列表太长，glob 会失败。过滤结果而不是 glob：

```
ls ${WORKING_DIR} | grep '\.pdf\.marker$'  | while read FILEMARKER
do
    ...
done 
```

强制性免责声明：如果您的文件名包含特殊字符（例如任何空格），这将失败。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-06T13:24:25.150

尝试关闭`ls`（`-f`或`-U`，我认为）的排序，或使用其他程序，如`find`

# text - 删除 Applescript 中的重复文本

> ID：11362983
> 
> 赞同：1
> 
> 时间：2012-07-06T13:19:09.837
> 
> 标签：text, applescript, duplicates, duplicate-removal

## Applescript：删除文本文件中的重复项

我有一个我创建的 .txt 文件，我正在尝试删除某些重复的文本行。

我给这个文件起的名字是 today.txt，它位于我的桌面上，它包含一个 NYtimes Today's Paper 的 URL 列表。但是，通过解析 html 文件，我收到了几个重复的 url，如下所示：

```
http://www.nytimes.com/2012/07/06/education/no-child-left-behind-whittled-down-under-obama.html
http://www.nytimes.com/2012/07/06/business/global/markets-look-to-europes-central-bank-for-action.html
http://www.nytimes.com/2012/07/06/business/global/markets-look-to-europes-central-bank-for-action.html
http://www.nytimes.com/2012/07/06/nyregion/3-children-killed-in-long-island-boating-accident.html
http://www.nytimes.com/2012/07/06/nyregion/3-children-killed-in-long-island-boating-accident.html
http://www.nytimes.com/2012/07/06/world/americas/earthquake-relief-where-haiti-wasnt-broken.html
http://www.nytimes.com/2012/07/06/world/americas/earthquake-relief-where-haiti-wasnt-broken.html
http://www.nytimes.com/2012/07/06/us/politics/journal-critique-of-romney-shows-murdoch-doubt-on-candidacy.html
http://www.nytimes.com/2012/07/06/us/politics/journal-critique-of-romney-shows-murdoch-doubt-on-candidacy.html
http://www.nytimes.com/2012/07/06/technology/at-hacker-hostels-living-on-the-cheap-and-dreaming-of-digital-glory.html
http://www.nytimes.com/2012/07/06/technology/at-hacker-hostels-living-on-the-cheap-and-dreaming-of-digital-glory.html 
```

我一直在尝试通过 Applescript 中的*do shell 脚本*删除重复项，但我无法使其工作。这是我的代码：

```
set delDups to do shell script "sort /Users/paolob/Desktop/today.txt | uniq -u"
return delDups 
```

**所以我的问题**是：如何删除*today.txt*文件中的重复项，然后将结果保存到同一个*today.txt*文件中

任何帮助将不胜感激。先感谢您。

**编辑**
如果实际上 shell 脚本或您建议的任何重复删除器直接在 Applescript 编辑器中读取文本，然后将新文本设置为 *new_text* 变量，这将更加经济和快捷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:25:20.350

试试这个...

```
set filePath to (path to desktop as text) & "today.txt"
set theText to read file filePath
set textList to paragraphs of theText

set uniqueList to {}
repeat with i from 1 to count of textList
    set thisParagraph to item i of textList
    if thisParagraph is not in uniqueList then set end of uniqueList to thisParagraph
end repeat

set {tids, text item delimiters} to {text item delimiters, return}
set uniqueText to uniqueList as text
set text item delimiters to tids

set openFile to open for access file filePath with write permission
set eof of openFile to 0
write uniqueText to openFile starting at eof as text
close access openFile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:32:00.227

这可以仅使用 shell 脚本来完成。你真的不需要任何applescript，除非它是更大程序的一部分。

以下将排序并强制唯一性并将其保存回同一文件。

```
sort -u -o /Users/paolob/Desktop/today.txt /Users/paolob/Desktop/today.txt 
```

这可以像这样用applescript包装：

```
do shell script "sort -u -o /Users/paolob/Desktop/today.txt /Users/paolob/Desktop/today.txt" 
```

如果您想在手后进行更多处理，则可以使用以下方法：

```
set myText to do shell script "sort -u /Users/paolob/Desktop/today.txt" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:40:14.150

这可以在红宝石中完成。在您的文件所在的文件夹中从终端打开“irb”，并在交互式 shell 中执行以下操作：

> > file = File.new("test.txt", 'r') #这会打开“test.txt”（替换你自己的文件名）
> > 
> > array = [] #创建一个新数组。
> > 
> > file.lines.each{|k| array << k.to_s} #将文件中的行放入数组中
> > 
> > 数组.uniq！#使这些行独一无二
> > 
> > File.open("outfile.txt", "w"){|file| s = String.new(); 数组.each{|k| s << k}; file.puts(s)} # 创建一个文件（outfile.txt）并将唯一的行写入文件
> > 
> > 退出#关闭irb

# svn - 永久删除文件夹

> ID：11362984
> 
> 赞同：7
> 
> 时间：2012-07-06T13:19:19.337
> 
> 标签：svn

我知道 SVN 的全部意义在于永远无法永久删除任何内容，而我的问题与“永久删除”功能或类似功能无关。

我注意到代码已意外提交到我们的 SVN 存储库。这是属于另一家公司的代码，在产生任何法律影响之前，我需要想办法永久删除此代码，包括它曾经存在的所有痕迹。

注 1：此后还有其他代码修订。

注2：需要删除的所有代码都包含在一个文件夹下

注 3：SVN 托管在云端（Atlassian）中的第三方。

我现在的想法是：

*   对所有修订进行 SVN 转储并在本地恢复
*   “删除”托管 SVN 中的所有数据（我该怎么做？）
*   然后在每个文件夹的基础上同步修订，其中我排除了有问题的文件夹。我过去根据文件夹导入了修订历史记录，所以我知道这是可能的。

如果没有更简单的方法，我如何删除/清空整个 SVN 服务器或创建一个新服务器来替换当前服务器？同样，由于我们的 SVN 是由第三方托管的，我无法访问服务器本身的文件结构，但需要依赖 SVN 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:45:01.667

> [svndumpfilter](http://svnbook.red-bean.com/en/1.7/svn.ref.svndumpfilter.html)是一个命令行实用程序，用于通过排除或包含以一个或多个命名前缀开头的路径来从 Subversion 转储文件中删除历史记录。

基本上，您需要对存储库进行完整转储，从中过滤掉不需要的文件夹，然后将其余文件夹作为新存储库导入。但是由于您的存储库是由第三方托管的，我想您需要首先安排这种存储库访问（除非他们已经为此提供了一些接口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:07:51.593

对于您计划中的 #1 和 #3，您可能会发现有用的 svnrdump 实用程序。它像 svnadmin 一样具有“转储”和“加载”命令，但可以与远程存储库一起使用。

# asp.net - 什么数据格式交换使用 * 和 # 而不是标签括号？

> ID：11362986
> 
> 赞同：1
> 
> 时间：2012-07-06T13:19:34.573
> 
> 标签：asp.net, xml, json, asp-classic, data-exchange

有一个 Web 服务会返回这个 XML 作为 GET 的结果。我想知道这是一种著名的数据交换格式吗？还是只需要正常解析？或者我应该用普通括号替换 * 和 # 并将其作为普通 XML 处理？

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">Count=56,*ProjectDataSet#
  *Project#
    *PROJ_UID#f6f08258-52dd-481a-83a5-013cce51d901*/PROJ_UID#
    *PROJ_NAME#5-2 Disaster Recovery site*/PROJ_NAME#
    *DVI#0*/DVI#
  */Project#
  *Project#
    *PROJ_UID#7abd8857-2a9a-4d2d-82c3-139fdac26994*/PROJ_UID#
    *PROJ_NAME#4-1 Automated Land Releasing System Phase II*/PROJ_NAME#
    *DVI#0*/DVI#
  */Project#
*/ProjectDataSet# ###Duration: 00:00:24.5568479</string> 
```

# java - JXTreeTable Substance L&F 绘制问题

> ID：11362987
> 
> 赞同：3
> 
> 时间：2012-07-06T13:19:42.110
> 
> 标签：java, swing, swingx, substance, jxtreetable

使用实体外观时，JXTreeTable 的第一列不会在悬停时绘制。当同一列也被拖动到另一个位置时，问题仍然存在。

边框也没有画好。有什么解决方法吗？

我正在使用物质业务 l&f。我也包括了物质 Swingx 插件。

![在此处输入图像描述](../Images/490998313fab10e36c9159b91e246c89.png)

环境：Windows 7、JDK 1.6、SwingX 1.6.3、Substance 7.1

```
public class SwingXExample extends JFrame {
private JTabbedPane tabs = new JTabbedPane();
private JXTreeTable treeTable;
public SwingXExample() {
    JPanel treeTablePanel = new JPanel(new BorderLayout());
    treeTable = new JXTreeTable(new MyTreeTableModel());
    treeTablePanel.add(new JScrollPane(treeTable));
    tabs.addTab("JXTreeTable", treeTablePanel);
    add(tabs);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(new SubstanceBusinessBlueSteelLookAndFeel());
            } catch (UnsupportedLookAndFeelException e) {
                e.printStackTrace();
            }
            SwingXExample frame = new SwingXExample();
            frame.setSize(400, 300);
            frame.setVisible(true);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
    });
}
} 
```

树表模型

```
public class MyTreeTableModel extends AbstractTreeTableModel {
    private MyTreeNode myroot;

public MyTreeTableModel() {
    myroot = new MyTreeNode("root", "Root of the tree");
    myroot.getChildren().add(
            new MyTreeNode("Empty Child 1", "This is an empty child"));

    MyTreeNode subtree = new MyTreeNode("Sub Tree",
            "This is a subtree (it has children)");
    subtree.getChildren().add(
            new MyTreeNode("EmptyChild 1, 1",
                    "This is an empty child of a subtree"));
    subtree.getChildren().add(
            new MyTreeNode("EmptyChild 1, 2",
                    "This is an empty child of a subtree"));
    myroot.getChildren().add(subtree);

    myroot.getChildren().add(
            new MyTreeNode("Empty Child 2", "This is an empty child"));
}

@Override
public int getColumnCount() {
    return 3;
}

@Override
public String getColumnName(int column) {
    switch (column) {
    case 0:
        return "Name";
    case 1:
        return "Description";
    case 2:
        return "Number Of Children";
    default:
        return "Unknown";
    }
}

@Override
public Object getValueAt(Object node, int column) {
    // System.out.println( "getValueAt: " + node + ", " + column );
    MyTreeNode treenode = (MyTreeNode) node;
    switch (column) {
    case 0:
        return treenode.getName();
    case 1:
        return treenode.getDescription();
    case 2:
        return treenode.getChildren().size();
    default:
        return "Unknown";
    }
}

@Override
public Object getChild(Object node, int index) {
    MyTreeNode treenode = (MyTreeNode) node;
    return treenode.getChildren().get(index);
}

@Override
public int getChildCount(Object parent) {
    MyTreeNode treenode = (MyTreeNode) parent;
    return treenode.getChildren().size();
}

@Override
public int getIndexOfChild(Object parent, Object child) {
    MyTreeNode treenode = (MyTreeNode) parent;
    for (int i = 0; i > treenode.getChildren().size(); i++) {
        if (treenode.getChildren().get(i) == child) {
            return i;
        }
    }
    return 0;
}

public boolean isLeaf(Object node) {
    MyTreeNode treenode = (MyTreeNode) node;
    if (treenode.getChildren().size() > 0) {
        return false;
    }
    return true;
}

@Override
public Object getRoot() {
    return myroot;
}
} 
```

# web-services - 使用 Grails 的 SOAP 客户端请求

> ID：11362990
> 
> 赞同：0
> 
> 时间：2012-07-06T13:20:03.573
> 
> 标签：web-services, grails, soap, groovy

我尝试使用 SOAP for ipayment（德国）创建支付系统，并在其文档中描述，通过以下 SOAP 请求，我可能会得到第二个代码示例中显示的响应。

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
 xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
 <SOAP-ENV:Body> 
  <capture> 
    <accountData> 
     <accountId>99999</accountId> 
     <trxuserId>99999</trxuserId> 
     <trxpassword>0</trxpassword> 
     <adminactionpassword> 
       5cfgRT34xsdedtFLdfHxj7tfwx24fe</adminactionpassword> 
    </accountData> 
    <origTrxNumber>1-25949395</origTrxNumber> 
    <transactionData> 
     <trxAmount>119</trxAmount> 
     <trxCurrency>EUR</trxCurrency> 
    </transactionData> 
  </capture> 
 </SOAP-ENV:Body> 
</SOAP-ENV:Envelope> 
```

来自服务器的示例响应是

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
<SOAP-ENV:Envelope 
 xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
 xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
 <SOAP-ENV:Body> 
  <ns1:captureResponse 
    xmlns:ns1="https://ipayment.de/service_v3/binding"> 
    <ipaymentReturn> 
     <status>SUCCESS</status> 
     <successDetails> 
      <retTransDate>25.07.08</retTransDate> 
      <retTransTime>17:08:08</retTransTime> 
      <retTrxNumber>1-25949407</retTrxNumber> 
      <retAuthCode></retAuthCode> 
     </successDetails> 
     <addressData> 
      <addrStreet>Ernst-Frey-Str. 9</addrStreet> 
      <addrCity>Karlsruhe</addrCity> 
      <addrZip>76135</addrZip> 
      <addrCountry>DE</addrCountry> 
     </addressData> 
     <addresscheckResult>UNCHECKED</addresscheckResult> 
     <paymentMethod>VisaCard</paymentMethod> 
     <trxPaymentDataCountry>US</trxPaymentDataCountry> 
    </ipaymentReturn> 
  </ns1:captureResponse> 
 </SOAP-ENV:Body> 
</SOAP-ENV:Envelope> 
```

但我不知道如何创建请求，如 grails 所示。我尝试使用 Spring WS 插件，但文档中的示例代码根本没有帮助。你知道一些例子或任何想法的任何来源吗？WSDL 模式可以在[https://ipayment.de/service/3.0/?wsdl](https://ipayment.de/service/3.0/?wsdl)找到。 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:38:54.883

如果 WS 的身份验证不需要 cookie（它们不应该 :-)），[groovy-wslite](https://github.com/jwagenleitner/groovy-wslite)是一个很好的库，可用于创建 SOAP 请求。

另一种方法是使用[HTTPBuilder](http://groovy.codehaus.org/modules/http-builder/doc/index.html)，它允许您创建确切的游览请求并在需要时处理 cookie（您可以使用 wslite 做到这一点，但需要做更多的工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:12:38.890

如果您正在编写脚本，则提示可能是直接从 groovy 中使用 curl（如果有的话）。它非常强大，易于处理，您可以在单线中完成。

例如： "curl -d \"${payload}\" -H \"Content-Type: text/xml\" ${wsUrl}".execute.text 其中有效负载是请求（包括肥皂信封）。

# asp.net - 诊断文件上传失败 ASP.NET

> ID：11362991
> 
> 赞同：0
> 
> 时间：2012-07-06T13:20:17.200
> 
> 标签：asp.net, networking, file-upload

在 ASP.NET 应用程序中，用户很难尝试上传文件。该应用程序由大约 30 人通过 1Mb 光纤专线访问服务器。

文件上传实现似乎没有问题，因为问题不会经常发生，只是偶尔出现。另外我已经尝试上传更大的文件（最大 50 Mb），我没有任何问题。

所以我认为问题一定出在网络连接上，有些日子一定有某种带宽问题。

如何有效诊断问题的根本原因？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:29:52.513

你记录你的异常吗？ASP.NET 的日志记录模块

*   [http://code.google.com/p/elmah/](http://code.google.com/p/elmah/)
*   [http://www.codeproject.com/Articles/14819/How-to-use-log4net](http://www.codeproject.com/Articles/14819/How-to-use-log4net)

如果没有，您可以查看 Web 服务器事件日志。

错误可能来自网络服务器的上传限制和安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:53:26.803

fileupload 模块充满了大量的 try catch 块，所以 log4net 日志文件上显示的消息是开发人员提供的错误消息。在逐步尝试重现问题后，我们得到了错误消息来自系统的部分“文件无法保存，因为它超过 50 个字符”，但文件大约 40 个字符。开发人员在文件名上使用函数 Server.HTMLEncode 将名称存储在数据库中，但是当文件具有特殊字符时，由于文本编码，文件名有时会超过 50 个字符。解决方案是将文件名的大小增加一些字符，并且在验证文件名时，我们使用 HTML.Encode 长度进行验证，并警告用户减少超过 x 的字符数以使文件有效。

# python - 关于在其他语言和工具中使用 lucene

> ID：11362995
> 
> 赞同：0
> 
> 时间：2012-07-06T13:20:25.667
> 
> 标签：python, r, lucene, full-text-search, nlp

是否可以使用 R 或 Python 导入 Lucene 索引？就文本挖掘的目的而言，Lucene 索引的性能是否比传统的文本特征构建方法（例如词袋）好得多？