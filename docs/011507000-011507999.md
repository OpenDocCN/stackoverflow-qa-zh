# StackOverflow 问答 11507000-11507999

# javascript - 鼠标悬停功能不起作用

> ID：11507001
> 
> 赞同：-1
> 
> 时间：2012-07-16T15:01:26.100
> 
> 标签：javascript, jquery, css, raphael, mouseover

我正在使用 Raphael 图形和动画，这是一个 javascript 库。我希望用户将鼠标悬停在底行中间列的蓝色方块上。当他们将鼠标悬停时，我希望蓝色框发光（拉斐尔函数）黑色。我正在尝试在 rec8 上使用此功能，但我认为我做得不对。有人可以更正我的代码或帮助我。谢谢。：） 健康长寿·繁荣昌盛。

```
<html>
<head><title></title>
<script src="raphael-min.js"></script>
<script src="jquery-1.7.2.js"></script>

<style type="text/css"> 
#input
{
margin-top:-200px;

}
</style>

</head>

<body>

<div id="draw-here-raphael" style="height: 400px; width: 400px; background: #666; z-index:0;">
</div>

<div id="input" style="z-index:99;" >
  <input type="text" value="0"; style="text-align:right;" /><br />
</form> 
  </div>

<script type="text/javascript">
//all your javascript goes here
$(function() {
var r = new Raphael("draw-here-raphael"),

    // Store where the box is
    position = 'left',

    // Make our pink rectangle
    rec = r.rect(20, 20, 250, 300, 10).attr({"fill": "#fbb"});

    $("rect").mouseover(function(e) {
        $(this).attr({"fill": "red"});
        });
    $("rect").mouseout(function(e) {
        $(this).attr({"fill": "#fbb"});
    }); 
    //first column
    rec2 = r.rect(30, 80, 50, 40, 5).attr({"fill": "blue"});
    rec3 = r.rect(30, 130, 50, 40, 5).attr({"fill": "blue"});
    rec4 = r.rect(30, 180, 50, 40, 5).attr({"fill": "blue"});
    rec5 = r.rect(30, 240, 50, 40, 5).attr({"fill": "blue"});
    //second column
    rec6 = r.rect(90, 80, 50, 40, 5).attr({"fill": "blue"});
    rec2 = r.rect(90, 130, 50, 40, 5).attr({"fill": "blue"});
    rec7 = r.rect(90, 180, 50, 40, 5).attr({"fill": "blue"});
    rec8 = r.rect(90, 240, 50, 40, 5).attr({"fill": "blue"});
        $("rec8").mouseover(function(e) {
        $(this).glow({width:10});
        });
    $("rec8").mouseout(function(e) {
        $(this).glow({width:0});
    }); 
    //third column
    rec9 = r.rect(150, 80, 50, 40, 5).attr({"fill": "blue"});
    rec10 = r.rect(150, 130, 50, 40, 5).attr({"fill": "blue"});
    rec11 = r.rect(150, 180, 50, 40, 5).attr({"fill": "blue"});
    rec12 = r.rect(150, 240, 50, 40, 5).attr({"fill": "blue"});
});

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:04:44.097

这个选择器：

```
$("rec8") 
```

是任何`<rec8 />`标签的 jQuery 选择器。那些可能不存在。您应该将鼠标事件附加到返回的 raphael 元素：

```
rec8 = r.rect(90, 240, 50, 40, 5).attr({"fill": "blue"});
rec8.mouseover(function(e) {
    this.glow({width:10});
    });
rec8.mouseout(function(e) {
    this.glow({width:0});
}); 
```

> 但是由于某种原因，当我鼠标退出时它并没有消失

那是因为`glow`返回一个代表发光的新集合，因此您需要将其删除。从[拉斐尔文档](http://raphaeljs.com/reference.html#Element.glow)：

> 注意：辉光未连接到元素。如果您更改元素属性，它不会自行调整。

您需要跟踪`set`Raphael 作为辉光的一部分给您的返回，并将其删除。或许是这样的：

```
var rec8 = r.rect(90, 240, 50, 40, 5).attr({"fill": "blue"});
var rect8glow;
rec8.mouseover(function(e) {
    rect8glow = this.glow({width:10});
    });
rec8.mouseout(function(e) {
    rect8glow.remove();
}); 
```

[你可以在这里](http://jsfiddle.net/vcsjones/WYHmp/)看到一个工作演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:16:58.147

请参阅此小提琴以获取实时解决方案：http: [//jsfiddle.net/zhj2r/3/](http://jsfiddle.net/zhj2r/3/)
正如 vcsjones 所说，您正在结合 jquery 和 raphael，但它们不相关。
通过`$(this)`将 raphael 对象包装在 jquery 函数调用中，这是错误的，并且`$('rec4')`不是有效的 jquery 选择器。
此外，该`glow`函数返回一组显示目标对象轮廓的 svg 路径，因此通过调用`glow({width : 0})`，您不会修改实际发光的宽度，而是生成另一个宽度为 0 的发光元素。
这是我在为了让您的代码工作：

```
rec.mouseover(function(e) {
    this.attr({"fill": "red"});
});
rec.mouseout(function(e) {
    this.attr({"fill": "#fbb"});
}); 
// ...
rec8.mouseover(function(e) {
    // keep a reference to the glow object so you can remove it later
    this.theGlow = this.glow({width:10});
});
rec8.mouseout(function(e) {
    this.theGlow.remove();
}); 
```

# php - 使用 PHP 将注册商标符号/版权符号插入 MySQL

> ID：11507002
> 
> 赞同：9
> 
> 时间：2012-07-16T15:01:26.673
> 
> 标签：php, html, mysql, sql, database

我很难理解如何使用 php 将注册商标 sybol 和版权符号插入我的 mySQL 数据库。

当我插入注册商标符号的正常字符时，当我尝试检索它时它会返回一些随机值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T15:03:25.797

您可以考虑将版权/商标符号从 HTMLEntity 转换为 HTMLEntity，以简化向数据库的数据传输。

**参考**：[http ://www.php.net/manual/en/function.htmlentities.php](http://www.php.net/manual/en/function.htmlentities.php)

**参考**：[http ://www.php.net/manual/en/function.htmlspecialchars.php](http://www.php.net/manual/en/function.htmlspecialchars.php)

© 版权符号：`&#169`;

™ 商标符号：`&#153`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:05:01.773

我的猜测是您正在查看 BOM 并显示诸如 '\xEF\xBF\xBD' 之类的值（有关背景信息，请参见[http://en.wikipedia.org/wiki/Byte_Order_Mark ）](http://en.wikipedia.org/wiki/Byte_Order_Mark)

您可能需要检查您的字符集以确保它包含这些值，尝试使用 UTF8 而不是 latin 或您正在使用的任何内容，看看它是否有所作为。

# jquery - 移动开发——不同的浏览器高度

> ID：11507007
> 
> 赞同：0
> 
> 时间：2012-07-16T15:01:36.563
> 
> 标签：jquery, mobile

我正在使用 jquery mobile 开发简单的移动应用程序。我遇到了奇怪的行为——每次刷新/发布时，HTML 的呈现方式都不同。我检测到可能是原因的以下症状：当我浏览地址栏和刷新按钮时，alert($(window).height()) 给了我不同的值。如果我通过相同的方法重新访问页面（例如尝试通过地址栏访问同一页面 10 次），它也会给出不同的值有什么想法吗？谢谢

# c# - 如何更新或刷新选项卡容器中的面板或控件

> ID：11507010
> 
> 赞同：2
> 
> 时间：2012-07-16T15:01:40.947
> 
> 标签：c#, asp.net, tabs, panel

我正在处理一个选项卡式页面（4 个选项卡 - 选项卡容器），其中 2 个使用相同的控件并具有不同的 gridview 和不同的数据源，可以编辑和添加项目。

编辑和添加项目工作正常，但是当我添加项目时，gridview 或页面需要刷新或更新以显示新项目。使用 Response.Redirect 只会刷新页面并重定向到第一个选项卡。我正在处理选项卡 2 和 3，并且重定向需要指向相关选项卡，而不总是指向第一个选项卡。

关于如何做到这一点的任何建议？

我正在使用 Visual Studio 2010、C# ASP.Net

代码：

页：

```
<asp:Content ID="Content2" ContentPlaceHolderID="pnlMainContent" runat="server">
<div style="padding: 10px">
    <cc1:TabContainer ID="tbMain" runat="server" ActiveTabIndex="0" Width="100%" AutoPostBack="true"
        OnActiveTabChanged="tbMain_ActiveTabChanged">
        <cc1:TabPanel runat="server" ID="tbpgWFTypes" HeaderText="Work Flow Types">
            <ContentTemplate>
                <table style="width: 100%">
                    <tr>
                        <td align="center">
                             <uc1:ctrlWorkflowTypeControl ID="ctrlWorkflowTypeControl" runat="server" />
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </cc1:TabPanel>
        <cc1:TabPanel runat="server" ID="tbpgWFStatus" HeaderText="Work Flow Status">
            <ContentTemplate>
                <table style="width: 100%">
                    <tr>
                        <td align="center">
                            <uc2:ctrlStatusControl ID="ctrlStatusControl" runat="server" />
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </cc1:TabPanel>
        <cc1:TabPanel runat="server" ID="tbpgWFActions" HeaderText="Work Flow Actions">
            <ContentTemplate>
                <table style="width: 100%">
                    <tr>
                        <td align="center">
                            <uc3:ctrlActionControl ID="ctrlActionControl" runat="server" />                                
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </cc1:TabPanel>
        <cc1:TabPanel runat="server" ID="tbpgWFRouting" HeaderText="Work Flow Routing">
            <ContentTemplate>
                <table style="width: 100%">
                    <tr>
                        <td align="center">
                           <uc4:ctrlWorkflowRoutingControl ID="ctrlWorkflowRoutingControl" runat="server" />
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </cc1:TabPanel>
    </cc1:TabContainer>
</div> 
```

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
    {
        tbpgWFTypes.Focus();
        if (!IsPostBack)
        {
            tbMain_ActiveTabChanged(tbMain, null);                                       
        }           
    }

protected void tbMain_ActiveTabChanged(object sender, EventArgs e)
{
    try
    {
        if (tbMain.ActiveTabIndex == 1)
        {
            ctrlActionControl.ActionPanelMode = true;
            ctrlStatusControl.StatusPanelMode = false;
        }

        if (tbMain.ActiveTabIndex == 2)
        {
            ctrlStatusControl.StatusPanelMode = true;
            ctrlActionControl.ActionPanelMode = false;
        }                
    }
    catch (Exception ex)
    {
        Support.ExceptionHandler.HandleException(ex);
    }
  }
} 
```

控制：

```
 <table>
    <tr>
        <td align="left" colspan="2">
            <asp:DropDownList ID="ddlWFStatus" runat="server" Width="400px" DataSourceID="dsStatus" DataTextField="Description" Visible="false"></asp:DropDownList>
            <asp:DropDownList ID="ddlWFAction" runat="server" Width="400px" DataSourceID="dsAction" DataTextField="Description" Visible="false"></asp:DropDownList>
        </td>
    </tr>
    <tr>
        <td  colspan="2"></td>
    </tr>
    <tr>
        <td align="left"  colspan="2">
        <asp:Panel ID="pnlStatus" runat="server" Visible="false">
            <asp:GridView ID="gvStatus" runat="server" DataSourceID="dsStatus"
                AutoGenerateColumns="False" CellPadding="4" DataKeyNames="WFStatusID"
             ForeColor="#333333" EnableSortingAndPagingCallbacks="True" AllowPaging="True" 
                AllowSorting="True" onselectedindexchanged="gvStatus_SelectedIndexChanged">
               <Columns>
                <asp:BoundField DataField="WFStatusID" HeaderText="WFStatusID" SortExpression="WFStatusID" Visible="false">
                    <ItemStyle HorizontalAlign="Left" Width="400px" /> 
                </asp:BoundField>
                <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description">
                    <ItemStyle HorizontalAlign="Left" Width="400px" /> 
                </asp:BoundField>
               <asp:CommandField  ButtonType="Button" EditText="Edit" ShowEditButton="true" />
               </Columns>
              <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <EditRowStyle BackColor="#999999" />
                <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            </asp:GridView>
            </asp:Panel>
             <asp:Panel ID="pnlAction" runat="server" Visible="false">
            <asp:GridView ID="gvAction" runat="server" DataSourceID="dsAction"
                AutoGenerateColumns="False" CellPadding="4" DataKeyNames="WFActionID"
             ForeColor="#333333" EnableSortingAndPagingCallbacks="True" AllowPaging="True" 
                AllowSorting="True" onselectedindexchanged="gvAction_SelectedIndexChanged">
               <Columns>
                <asp:BoundField DataField="WFActionID" HeaderText="WFActionID" SortExpression="WFActionID" Visible="false">
                    <ItemStyle HorizontalAlign="Left" Width="400px" /> 
                </asp:BoundField>
                <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description">
                    <ItemStyle HorizontalAlign="Left" Width="400px" /> 
                </asp:BoundField>
               <asp:CommandField  ButtonType="Button" EditText="Edit" ShowEditButton="true" />
               </Columns>
              <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <EditRowStyle BackColor="#999999" />
                <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            </asp:GridView>
            </asp:Panel>
        </td>
    </tr>
    <tr>
        <td align="left"  colspan="2">
            <asp:Button ID="btnShowAddSection" runat="server" Text="" onclick="btnShowAddSection_Click"/>
        </td>
    </tr>
    <tr id="divAddEditRow" runat="server" visible="false">       
        <td><asp:Label ID="lblAdd" runat="server" Text="New Item: " />  
            <asp:TextBox ID="txtEdit" runat="server" ></asp:TextBox>
        </td>
        <td>
            <asp:Button ID="btnAdd" runat="server" Text="Add" onclick="btnAdd_Click" style="float: right; padding-right:5px; margin-right:8px"/>
        </td>
    </tr>    
</table>

<asp:ObjectDataSource ID="dsStatus" runat="server" SelectMethod="FillWFStatus" UpdateMethod="UpdateWFStatus"
 TypeName="***.**.Services.WorkflowDataService" onupdating="dsStatus_Updating">
 <UpdateParameters>
    <asp:Parameter Type="Int32" Name="WFStatusID" />
    <asp:Parameter Type="String" Name="Description" />
 </UpdateParameters>
</asp:ObjectDataSource>

 <asp:ObjectDataSource ID="dsAction" runat="server" SelectMethod="FillWFAction" UpdateMethod="UpdateWFAction"
 TypeName="***.**.Services.WorkflowDataService" onupdating="dsAction_Updating">
 <UpdateParameters>
    <asp:Parameter Type="Int32" Name="WFActionID" />
    <asp:Parameter Type="String" Name="Description" />
 </UpdateParameters>
</asp:ObjectDataSource> 
```

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
    {  
    }

protected void gvStatus_SelectedIndexChanged(object sender, EventArgs e)
{
    WorkflowDataService.InsertWFStatus(0, txtEdit.Text);
}

protected void gvAction_SelectedIndexChanged(object sender, EventArgs e)
{
    WorkflowDataService.InsertWFAction(0, txtEdit.Text);
}

public bool StatusPanelMode
{
    set { pnlStatus.Visible = !value;
    btnShowAddSection.Text = "Add New Status";
    ddlWFStatus.Visible = !value;
    }           
}

public bool ActionPanelMode
{
    set
    {
        pnlAction.Visible = !value;
        btnShowAddSection.Text = "Add New Action";
        ddlWFAction.Visible = !value;
    }
}

protected void btnShowAddSection_Click(object sender, EventArgs e)
{
    this.divAddEditRow.Visible = true;
    btnShowAddSection.Visible = false;
}

protected void dsStatus_Updating(object sender, ObjectDataSourceMethodEventArgs e)
{
    var test = gvStatus.SelectedIndex;
    var test2 = dsStatus.UpdateParameters[0];
}

protected void dsAction_Updating(object sender, ObjectDataSourceMethodEventArgs e)
{
    var test = gvStatus.SelectedIndex;
    var test2 = dsAction.UpdateParameters[0];
}

protected void btnAdd_Click(object sender, EventArgs e)
{
    this.divAddEditRow.Visible = false;
    btnShowAddSection.Visible = true;

    if (pnlStatus.Visible == true)
    {
        WorkflowDataService.InsertWFStatus(0, txtEdit.Text);
        //Response.Redirect("ManageRoutingPage.aspx?tab=2");   <--- This Doesnt Work                
    }
    if (pnlAction.Visible == true)
    {
        WorkflowDataService.InsertWFAction( 0, txtEdit.Text);
        Response.Redirect("ManageRoutingPage.aspx");  // <-- This goes back to tab 1 instead of 3
    }
  }            
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:24:28.850

毕竟，我只需要 databind(); 像这样......

```
protected void btnAdd_Click(object sender, EventArgs e)
    {

        this.divAddEditRow.Visible = false;
        btnShowAddSection.Visible = true;

        if (pnlStatus.Visible == true)
        {               
            WorkflowDataService.InsertWFStatus(0, txtEdit.Text);
            gvStatus.DataBind();
        }

        if (pnlAction.Visible == true)
        {
            WorkflowDataService.InsertWFAction( 0, txtEdit.Text);
            gvAction.DataBind();
        }   
    } 
```

# python - 比较 Django POST 数据

> ID：11507015
> 
> 赞同：0
> 
> 时间：2012-07-16T15:01:52.953
> 
> 标签：python, django, http-post

我期待`POST`数据，并希望创建一个自定义字典，以便在根据发布的内容创建表单时使用。我似乎在尝试比较 POST 数据中的内容时遇到了问题。我在 Ubuntu 12.04 上使用 Django 1.4 和 Python 2.7。

假设我有一个`POST`名为的字段`return_method`，它将告诉我客户期望的返回方法类型。他们要么发送值`post`，要么发送`get`. 现在，我想根据我得到的值以不同的方式创建字典。

```
if (request.POST.get('return_method') == 'get'):
    cust_dict = { 'key1' : value1,
                  'key2' : value2,
                  'key3' : value3,
                }

elif (request.POST.get('return_method') == 'post'):
    cust_dict = { 'key1' : value1,
                  'key2' : value2,
                  'key3' : another_value,
                } 
```

这是行不通的。我正在填充该字段，`get`并且没有创建任何字典。

你会建议我做什么呢？

编辑：看来我的问题是我的更改没有在 Django 服务器上更新。（必须重新启动 Apache）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:08:42.597

```
 cust_dict = { 'key1' : value1,
               'key2' : value2,
             }

if request.POST.get('return_method') == 'get'): 
  cust_dict['key3'] = value3
elif request.POST.get('return_method') == 'post):
  cust_dict['key3'] = another_value 
```

如果`key3`没有被添加到您的`cust_dict`然后值`return_method`既不是`get`也不是`post`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:10:30.913

这是我将如何处理它。

```
custom = {
  "get" : {
    'key1' : value1,
    'key2' : value2,
    'key3' : value3,
  },

  "post" : {
    'key1' : value1,
    'key2' : value2,
    'key3' : another_value,
  },
}

try:
    cust_dict = custom[request.POST.get('return_method').strip()]
except KeyError:
    # .. handle invalid value 
```

也就是说，您的版本没有理由不起作用。你检查过你看到的价值`request.POST.get('return_method')`吗？也许值中有空格会阻碍您的字符串匹配（请注意`.strip()`上面的示例代码）。

# c# - 从 ListBox 获取 ObservableCollection

> ID：11507017
> 
> 赞同：1
> 
> 时间：2012-07-16T15:01:57.363
> 
> 标签：c#, wpf, data-binding, listbox, observablecollection

有没有办法从 ListBox 以编程方式确定关联的 ObservableCollection？

我将 ItemsSource 绑定到我的 XAML 中的 ListBox 并且当用户从其中选择一个项目时，我希望程序不仅可以找到该项目来自哪个 ListBox（我已经设法做到了），而且还可以获取关联的 ObservableCollection用它。

我认为通过使用 sourceContainer.ItemsSource.ToString() （其中 sourceContainer 是通过编程找到的 ListBox），我将能够确定它背后的 DataBound ObservableCollection。然而，事实并非如此。我错过了什么？

谢谢！

编辑：这里有一些与 ObservableCollections 的创建以及我如何确定选择哪个框有关的代码。（我知道这可能不是最好的方法，我还在学习......）

首先，XAML（每个 ListBox 都有这一行用于常规绑定）：

```
ItemsSource="{Binding Path=ListOneItems}" 
```

现在创建 ObservableCollections 的代码：

```
 private ObservableCollection<DataItem> listOneItems;

    public ObservableCollection<DataItem> ListOneItems
    {
        get
        {
            if (listOneItems == null)
            {
                listOneItems = new ObservableCollection<DataItem>();
            }
            return listOneItems;
        }
    } 
```

这是程序确定所选项目的父项的地方：

```
//Finds the name of the container that holds the selected SLBI (similar to finding the initial touched object)
FrameworkElement determineSource = e.OriginalSource as FrameworkElement;
SurfaceListBox sourceContainer = null;

while (sourceContainer == null && determineSource != null)
{
    if ((sourceContainer = determineSource as SurfaceListBox) == null)
    {
        determineSource = VisualTreeHelper.GetParent(determineSource) as FrameworkElement;
    }
}

//Name of the parent container
strParentContainer = sourceContainer.Name;

//Name of the ObservableCollection associated with parent container? 
```

如果还需要什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:08:15.640

如果您已直接绑定到一个 属性`ObservableCollection<T>`，您应该可以这样做：

```
var col = (ObservableCollection<MyClass>)sourceContainer.ItemsSource; 
```

如果不是这种情况，您需要发布相关的 XAML 和代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:20:31.243

[Eren 的回答](https://stackoverflow.com/questions/11507017/get-observablecollection-from-listbox/11507135#11507135)是正确的，您可以通过将`ItemsSource`属性转换为正确的集合类型来获取实际集合。

```
ObservableCollection<DataItem> sourceCollection = 
    sourceContainer.ItemsSource as ObservableCollection<DataItem>; 
```

如果您只想要评论中建议的 Name 属性，则可以获取`Binding`for the`ItemsSourceProperty`并查看该`Path`属性

```
var binding = soureContainer.GetBindingExpression(ListBox.ItemsSourceProperty);
var sourceCollectionName = binding.ParentBinding.Path.Path; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:11:58.400

您与列表框关联的集合是 ObservableCollection？因为如果你设置了一个数组 - 它不会在后台将魔术转换为 ObservableCollection。

告诉你为什么需要这个逻辑。假设 smth 在其他逻辑中是错误的。

# winapi - 如何从进程 ID 中获取服务名称？

> ID：11507021
> 
> 赞同：1
> 
> 时间：2012-07-16T15:02:07.523
> 
> 标签：winapi, visual-c++, windows-services

我使用下面的代码以及进程名称获得了正在运行的服务的进程 ID，但我真正想要的是服务名称/密钥。有没有办法从进程 ID 或进程名称中获取它？使用 C++

```
 DWORD aProcesses[1024], cbNeeded, cProcesses;
unsigned int i;

if ( !EnumProcesses( aProcesses, sizeof(aProcesses), &cbNeeded ) )
{
    return 1;
}

// Calculate how many process identifiers were returned.

cProcesses = cbNeeded / sizeof(DWORD);

// Print the name and process identifier for each process.

for ( i = 0; i < cProcesses; i++ )
{
    if( aProcesses[i] != 0 )
    {
        PrintProcessNameAndID( aProcesses[i] );
    }

} 
```

和..

```
void tt_coreutils_ns::PrintProcessNameAndID( DWORD processID )
{
 TCHAR szProcessName[MAX_PATH] = TEXT("<unknown>");

// Get a handle to the process.

HANDLE hProcess = OpenProcess( PROCESS_QUERY_INFORMATION |
    PROCESS_VM_READ,
    FALSE, processID );

// Get the process name.

if (NULL != hProcess )
{
    HMODULE hMod;
    DWORD cbNeeded;

    if ( EnumProcessModules( hProcess, &hMod, sizeof(hMod), 
        &cbNeeded) )
    {
        GetModuleBaseName( hProcess, hMod, szProcessName, 
            sizeof(szProcessName)/sizeof(TCHAR) );
    }
}

// Print the process name and identifier.

_tprintf( TEXT("%s  (PID: %u)\n"), szProcessName, processID );

// Release the handle to the process.

CloseHandle( hProcess ); 
```

}

更新代码

```
 DWORD pId=GetCurrentProcessId();
SC_HANDLE hSCM    = NULL;
PUCHAR  pBuf    = NULL;
ULONG  dwBufSize   = 0x00;
ULONG  dwBufNeed   = 0x00;
ULONG  dwNumberOfService = 0x00;

LPENUM_SERVICE_STATUS_PROCESS pInfo = NULL;

hSCM = OpenSCManager(NULL, NULL, SC_MANAGER_ENUMERATE_SERVICE | SC_MANAGER_CONNECT);

if (hSCM == NULL)
{
    printf_s("OpenSCManager fail \n");
    return 0xffff0001;
}

EnumServicesStatusEx(
    hSCM,
    SC_ENUM_PROCESS_INFO,
    SERVICE_WIN32, // SERVICE_DRIVER
    SERVICE_STATE_ALL,
    NULL,
    dwBufSize,
    &dwBufNeed,
    &dwNumberOfService,
    NULL,
    NULL);

if (dwBufNeed < 0x01)
{
    printf_s("EnumServicesStatusEx fail ?? \n");
    return 0xffff0002;
}

dwBufSize = dwBufNeed + 0x10;
pBuf  = (PUCHAR) malloc(dwBufSize);

EnumServicesStatusEx(
    hSCM,
    SC_ENUM_PROCESS_INFO,
    SERVICE_WIN32,  // SERVICE_DRIVER,
    SERVICE_ACTIVE,  //SERVICE_STATE_ALL,
    pBuf,
    dwBufSize,
    &dwBufNeed,
    &dwNumberOfService,
    NULL,
    NULL);

pInfo = (LPENUM_SERVICE_STATUS_PROCESS)pBuf;
for (ULONG i=0;i<dwNumberOfService;i++)
{
    cout<<"display name "<<pInfo[i].lpDisplayName<<"\t service name: ";
    cout<< pInfo[i].lpServiceName<<"\tid: "<<pInfo[i].ServiceStatusProcess.dwProcessId<<endl<<endl;

    if(pId==pInfo[i].ServiceStatusProcess.dwProcessId)
    {
        cout<<pInfo->lpServiceName;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:23:51.213

[使用EnumServicesStatusEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682640%28v=vs.85%29.aspx)枚举所有服务（`SERVICE_WIN32`作为服务类型传递）。在输出中，您将获得`ENUM_SERVICE_STATUS_PROCESS`包含服务名称的`SERVICE_STATUS_PROCESS`结构和另一个具有`DWORD dwProcessId`字段的结构。

通过这种方式，您可以将进程 ID 映射到服务名称/键。

# python - 拟合高斯函数

> ID：11507028
> 
> 赞同：27
> 
> 时间：2012-07-16T15:02:17.373
> 
> 标签：python, matplotlib, scipy, histogram, curve-fitting

我有一个直方图（见下文），我试图找到平均值和标准偏差以及适合我的直方图曲线的代码。我认为 SciPy 或 matplotlib 中有些东西可以提供帮助，但我尝试过的每个示例都不起作用。

```
import matplotlib.pyplot as plt
import numpy as np

with open('gau_b_g_s.csv') as f:
    v = np.loadtxt(f, delimiter= ',', dtype="float", skiprows=1, usecols=None)

fig, ax = plt.subplots()

plt.hist(v, bins=500, color='#7F38EC', histtype='step')

plt.title("Gaussian")
plt.axis([-1, 2, 0, 20000])

plt.show() 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-16T15:42:02.027

看看[这个答案](https://stackoverflow.com/a/10143572/623518)，以将任意曲线拟合到数据中。基本上你可以使用[`scipy.optimize.curve_fit`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html)你想要的任何函数来适应你的数据。下面的代码显示了如何将高斯拟合到一些随机数据（归功于[此](http://mail.scipy.org/pipermail/scipy-user/2011-January/028177.html)SciPy-User 邮件列表帖子）。

```
import numpy
from scipy.optimize import curve_fit
import matplotlib.pyplot as plt

# Define some test data which is close to Gaussian
data = numpy.random.normal(size=10000)

hist, bin_edges = numpy.histogram(data, density=True)
bin_centres = (bin_edges[:-1] + bin_edges[1:])/2

# Define model function to be used to fit to the data above:
def gauss(x, *p):
    A, mu, sigma = p
    return A*numpy.exp(-(x-mu)**2/(2.*sigma**2))

# p0 is the initial guess for the fitting coefficients (A, mu and sigma above)
p0 = [1., 0., 1.]

coeff, var_matrix = curve_fit(gauss, bin_centres, hist, p0=p0)

# Get the fitted curve
hist_fit = gauss(bin_centres, *coeff)

plt.plot(bin_centres, hist, label='Test data')
plt.plot(bin_centres, hist_fit, label='Fitted data')

# Finally, lets get the fitting parameters, i.e. the mean and standard deviation:
print 'Fitted mean = ', coeff[1]
print 'Fitted standard deviation = ', coeff[2]

plt.show() 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-16T15:35:31.823

您可以尝试 sklearn 高斯混合模型估计，如下所示：

```
import numpy as np
import sklearn.mixture

gmm = sklearn.mixture.GMM()

# sample data
a = np.random.randn(1000)

# result
r = gmm.fit(a[:, np.newaxis]) # GMM requires 2D data as of sklearn version 0.16
print("mean : %f, var : %f" % (r.means_[0, 0], r.covars_[0, 0])) 
```

参考：[http ://scikit-learn.org/stable/modules/mixture.html#mixture](http://scikit-learn.org/stable/modules/mixture.html#mixture)

请注意，通过这种方式，您无需使用直方图估计样本分布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-28T16:37:32.517

有点老问题，但对于任何只想绘制适合系列的密度的人，您可以尝试 matplotlib 的`.plot(kind='kde')`. 文档[在这里](http://pandas.pydata.org/pandas-docs/stable/visualization.html#other-plots)。

熊猫的例子：

```
mydf.x.plot(kind='kde') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T15:29:15.990

我不确定您的输入是什么，但可能您的 y 轴刻度太大（20000），请尝试减少此数字。以下代码适用于我：

```
import matplotlib.pyplot as plt
import numpy as np

#created my variable
v = np.random.normal(0,1,1000)

fig, ax = plt.subplots()

plt.hist(v, bins=500, normed=1, color='#7F38EC', histtype='step')

#plot
plt.title("Gaussian")
plt.axis([-1, 2, 0, 1]) #changed 20000 to 1

plt.show() 
```

编辑：

如果您想要 y 轴上的实际值计数，您可以设置`normed=0`. 并且会摆脱`plt.axis([-1, 2, 0, 1])`.

```
import matplotlib.pyplot as plt
import numpy as np

#function
v = np.random.normal(0,1,500000)

fig, ax = plt.subplots()

# changed normed=1 to normed=0
plt.hist(v, bins=500, normed=0, color='#7F38EC', histtype='step')

#plot
plt.title("Gaussian")
#plt.axis([-1, 2, 0, 20000]) 

plt.show() 
```

# asp.net - 实体框架和 Oracle 公共数据库链接

> ID：11507029
> 
> 赞同：3
> 
> 时间：2012-07-16T15:02:23.913
> 
> 标签：asp.net, vb.net, oracle, entity-framework

我最近一直在研究在我的 .Net 页面中使用 EF，但是在尝试访问已设置的公共数据库时我有点挣扎。

因此，例如在我的 Oracle SQL 开发人员中，我将访问这样的公共数据库

```
SELECT name FROM users@publicserver 
```

我正在尝试通过以下方式使用它

```
Using myEntities As New TestEntities()
    Dim allNames = From name In myEntities.users@publicserver
                     Select name
    GridView1.DataSource = allNames
    GridView1.DataBind()
End Using 
```

显然这不起作用，因为我的 EF 不包含公共服务器表，因为我不确定如何将它添加到 EF（如果这有意义？）

我很想知道是否有可能实现这一目标，如果没有，是否有人对访问它的最佳方法有任何想法？

**编辑**

理想情况下，如果可能的话，我希望能够将 LINQ 与我的公共数据库链接一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:30:04.667

如果您只是从另一个数据库中选择数据，则创建一个视图并将其包含在您的表和视图列表中。如果你想更新、插入或删除数据库，那么你需要考虑几个问题：

*   两个数据库是否通过快速可靠的链接连接？慢速链接会减慢您的应用程序响应时间。众所周知，不耐烦的用户会一直点击，直到发生某些事情......
*   如果链接数据库上的事务失败，会有什么后果？整个事务应该失败还是足以记录失败？
*   当写入不同的数据库时，我更喜欢使用 Oracle 高级队列，以便完成初始数据库上的事务，并且可以单独处理和记录链接数据库上的事务。这不会满足即时同步的要求，但通常要求是很快的一致性，而不是立即的一致性
*   无论哪种方式，数据库链接上的更新、插入和删除操作都最好在封装链接并将其隐藏在实体框架中的包中处理。

编辑：如果您的连接不像您希望的那样稳定，那么使用高级队列更有意义。有关基础知识，请参阅这篇有些[过时的文章](http://www.akadia.com/services/ora_advanced_queueing.html)。通过使用队列，您可以获得以下功能：

*   通过将插入/删除/更新放在队列中，应用程序中的操作可以完成，而无需等待确认链接数据库上的辅助事务已成功。
*   设置队列以跟踪数据库之间的事务尝试了多少次
*   操作的潜在复杂性不需要由应用程序代码处理。您可以让 EF 做它最擅长的事情：提供数据库接口，而您的其他需求（链接到另一个数据库）由数据库处理。

所有 CRUD 操作都可以封装在 EF 可以使用的数据库包中。

如果您在 11g 数据库上使用[最新版本，则可以在没有实体框架的情况下使用 LINQ 和 Oracle。](http://www.oracle.com/technetwork/topics/dotnet/whatsnew/index.html)到目前为止，这个版本仍然是新的，所以在生产平台上采用它之前，您可能需要寻找其他用户的意见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T18:13:15.903

您是否尝试过使用同义词？

```
CREATE SYNONYM [dbo].[MyTable] FOR [AnotherDatabase].dbo.[MyTable] 
```

然后你可以写：

```
SELECT name FROM MyTable 
```

同义词有效，但不会自动检测到逆向工程，因此您需要手动编辑 .edmx 文件以使其正常工作。[这是如何做到的](http://forums.asp.net/t/1771938.aspx/1)。

另一种选择是采用 Code First 方法，并使用 [Table] 注释，只需简单地写同义词的名称而不是表的名称

# android - 如何使用 apache.Http 工具或 Android.Http 工具获取 TTFB（首字节时间）？

> ID：11507030
> 
> 赞同：2
> 
> 时间：2012-07-16T15:02:26.520
> 
> 标签：android, http

我正在研究网络性能，我必须通过 Http 协议与远程服务器通信。我想做的事情是使用来自 Apache API 或 Android API 或其他 lib/api 的 Http 工具（HttpClient/Response/Handler/Interceptor...）获取 TTFB（第一个字节时间）**安卓。

有没有办法用这些类做到这一点？到目前为止，我一直在观看网络/论坛，我发现的所有主题都是关于减少 TTFB，但从来没有关于**如何**获得它。

任何帮助将不胜感激:)提前感谢，我希望我的英语是可以理解的:)
问候

** ：对应于请求结束和收到响应之间的延迟，因为我们在这里谈论的是网络，它将是浏览器收到第一个字节的时候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:00:16.500

W3C 提出了关于[导航计时](http://www.w3.org/TR/navigation-timing/)的建议。

PerformanceTiming 接口公开了一个 responseStart 属性，该属性是“在用户代理从服务器、相关应用程序缓存或本地资源接收到响应的第一个字节后立即返回时间”所必需的。

我*认为*TTFB 将等于

```
performance.timing.responseStart - performance.timing.navigationStart 
```

但我可能错了。链接的文档包括一个有效的 html + javascript 示例。

# jquery - django中关于json请求的403消息

> ID：11507032
> 
> 赞同：2
> 
> 时间：2012-07-16T15:02:33.353
> 
> 标签：jquery, django, json, django-urls, http-status-code-403

我正在运行 django 服务器，当我发帖时收到 403 消息。我的问题是，要进行如下所示的 json 调用，我应该运行 apache 吗？否则，我做错了什么？

在 html 页面中，我只包含了最新的 jquery 文件。

```
 var snddata = {};
  snddata["username"] = username;
  snddata["firstname"] = firstname;
  snddata["lastname"] = lastname;
  snddata["usertype"] = $("#usertype").val();
  snddata["address"] = address;
  snddata["emailid"] = emailid;
  snddata["empid"] = empid;
  $.post("/home/", snddata, 
     function callbackHandler(data, textstatus) 
     {
     if (data.status == 1)
     {
        alert("User added successfully");
     }
     else 
     {
        alert(data.msg);
     }
     }, 
     "json"
     ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:16:31.390

Django 具有 csrf 保护，您必须为每个 POST 请求放置“csrfmiddlewaretoken”。尝试添加这行代码：

```
snddata["csrfmiddlewaretoken"] = $('input[name=csrfmiddlewaretoken]').val(); 
```

你必须在你的表单中插入这个标签，它会返回一个带有 csrf_token 的隐藏输入字段：

```
{% csrf_token %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T19:30:55.477

补充一下阿拉斯代尔所说的话。

`{% csrf_token %}`在 html 页面上的某处添加。并添加`snddata["csrfmiddlewaretoken"] = $("#csrfmiddlewaretoken").val();`到上面的 javascript 中。

这应该添加一个以 CSRF 令牌作为值的“输入”元素。js 部分将在表单中提交。

POST 请求需要 CSRF 令牌，除非视图具有`@csrf_exempt`装饰器或 CSRF 已被禁用。

响应代码 403 是 Forbidden 请求代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:12:39.540

403 错误是因为 Django 的跨站点请求伪造保护 (CSRF) 保护。

有关更多详细信息，请参阅[Django CSRF 文档页面](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)，其中包括一个有用的片段，您可以使用它来使 jQuery ajax 请求工作。

# c# - OpenLDAP LDAP 服务器不可用

> ID：11507036
> 
> 赞同：0
> 
> 时间：2012-07-16T15:02:49.033
> 
> 标签：c#, asp.net, solaris, openldap, su

在过去的四天里，我一直在尝试从 asp.net 连接到我们的 OpenLDAP 服务器，但没有成功。就在我脱掉头发之前，任何人都可以有一个可行的解决方案（即使用 c# asp.net 连接到 OpenLDAP 服务器）。显然我可以从 putty.exe 访问 ldap 服务器并进行搜索。此外，我可以使用 LDAP 服务器通过本地安装的 Drupal CMS 进行身份验证，而不会出现任何问题——因为我已经添加了 LDAP 模块。我的问题是在 asp.net 中做同样的事情。具体详情如下：

Ldap 服务器托管在 sun solaries 上。我的开发机器正在运行 Win XP Service Pack 3。当我尝试使用已成功使用 putty 的用户名和密码调用 bind 时出现错误。

```
 string hostNameAndSSLPort = "ipaddress";
    string userName = "username";
    string password = "password";

    // establish a connection
    LdapConnection connection = new LdapConnection(hostNameAndSSLPort);

    // create an LdapSessionOptions object to configure session
    // settings on the connection.
    LdapSessionOptions options = connection.SessionOptions;

    options.ProtocolVersion = 3;

    options.SecureSocketLayer = true;

    connection.AuthType = AuthType.Basic;

    connection.Credential =
    new NetworkCredential(userName , password );

    try
    {
        connection.Bind();
    }
    catch(Exception e){
         lblSecurity.Text = e.Message;
    } 
```

我什至尝试使用 options.StartTransportLayerSecurity(null); 启动 TLS；在通过相同的错误调用绑定之前仍然存在。我可能做错了什么？请帮忙！！！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-20T20:41:35.830

我遇到过同样的问题。我的修复与上面的答案非常相似。问题是 LDAP 服务器发回了一个证书，而客户端（我们的代码）不接受它。因此，通过添加以下代码行，让我庆祝并撕破衬衫！

```
connection.SessionOptions.VerifyServerCertificate = new VerifyServerCertificateCallback((con, cer) => true); 
```

或者用vb术语：

```
connection.SessionOptions.VerifyServerCertificate = New VerifyServerCertificateCallback(Function(con, cer) True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:00:49.760

像这样的代码：

```
LdapConnection connection = new LdapConnection(new LdapDirectoryIdentifier(this._domain,     Convert.ToInt32(this._port)));
connection.SessionOptions.VerifyServerCertificate = new VerifyServerCertificateCallback((con, cer) => true);
connection.SessionOptions.ProtocolVersion = 3;
connection.AuthType = AuthType.Basic;       
connection.SessionOptions.SecureSocketLayer = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T18:39:34.627

请参阅此答案以获取一些有效的示例代码。 [如何连接到本地安装的 OpenLDAP 服务？](https://stackoverflow.com/questions/9172017/how-do-i-connect-to-a-locally-installed-openldap-service/9184696#9184696)

你提到使用XP。我相信有一个热修复程序可以解决 XP 上 winldap 的 TLS 实现中的问题。您必须在 microsoft 网站上进行一些搜索。我记得它被埋在某处的technet页面中。

也不要将 TLS 与 .net/winldap 一起使用。您会想知道为什么您的网站会随机锁定 cpu 直到它被杀死。上面的答案有解释。只需使用 SSL。

# .htaccess - 从 htaccess 中识别变量

> ID：11507037
> 
> 赞同：0
> 
> 时间：2012-07-16T15:02:49.547
> 
> 标签：.htaccess, variables

我正在使用 htaccess 传递 2 个变量。主题和品牌

```
RewriteRule ^([A-Za-z0-9_-]+)/?$ ?subject=$1 [NC,L]
RewriteRule ^([A-Za-z0-9_-]+)/?$ ?brand=$1 [NC,L] 
```

在我的函数文件中，我使用页面检测来包含相应的模块。

```
if (!empty($_REQUEST['subject']))
{
    include_once("templates/pages.php");

}

else if (!empty($_REQUEST['brand']))
{
    include_once("templates/brands_content.php");

} 
```

问题：我无法检测到变量....它总是加载“templates/pages.php” 谁能指导我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:01:16.227

第二条规则`RewriteRule ^([A-Za-z0-9_-]+)/?$ ?brand=$1 [NC,L]`永远不会匹配，因为您请求的任何 URL 都与第一个规则匹配（对于主题）。主题或品牌的 URL 显示方式显然没有区别。

```
http://yourdomain.com/12345 
```

“12345”是品牌还是主题？您需要使正则表达式匹配主题和品牌互斥（或者如果不是，主题，第一条规则将始终首先匹配），或者您可以通过将其添加到您的 URI 来明确说明什么是品牌或主题：

```
http://yourdomain.com/subject/12345
http://yourdomain.com/brand/12345 
```

因此，您的规则将是：

```
RewriteRule ^subject/([A-Za-z0-9_-]+)/?$ ?subject=$1 [NC,L]
RewriteRule ^brand/([A-Za-z0-9_-]+)/?$ ?brand=$1 [NC,L] 
```

# python - 在'def'，'if'等之后自动插入冒号

> ID：11507039
> 
> 赞同：9
> 
> 时间：2012-07-16T15:02:50.800
> 
> 标签：python, vim

在 Sublime Text 2 决定它不相信模块已安装之后，我最近应朋友的要求切换到 Vim，即使它是......我离题了。

我已经设法设置了一些东西来使编辑 Python（目前我唯一的语言）更容易。但是，Sublime 缺少一个功能。它会自动在需要它们的行的末尾添加一个冒号（函数定义的开头，if 语句等）。这避免了无数恼人的错误，我想念它：P

我想知道是否可以在 .vimrc 中输入某种命令来执行此操作。

一个例子：如果要键入`def`，我希望 vim 自动插入一个冒号，`def :`并将光标放在冒号之前，以便我输入我的函数名。

如果我以任何方式愚蠢，请欢呼并道歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T17:53:36.720

与其像@CG Mortion 的回答所建议的那样使用`imap`s，我强烈建议您使用`iabbr`s 来进行这些小修复。

使用 an时，`imap`您将永远无法在插入模式下键入“define”，除非您在按“d”、“e”或“f”之间暂停，或者做了许多其他骇人听闻的事情之一来阻止映射的发生。仅在`iabbr`按下非关键字字符后才会扩展缩写。 `iabbr def def:<left>`完全按照您的预期工作，并且没有`imap`s 的缺点。

* * *

正如其他答案中提到的，一旦您决定想要更复杂的东西，我还建议您继续使用片段引擎。它们非常强大，可以为您节省大量时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T15:08:57.030

看看[旧的 snipmate](https://github.com/msanders/snipmate.vim/)、[新的 snipmate](https://github.com/garbas/vim-snipmate/)和[ultisnips](http://www.vim.org/scripts/script.php?script_id=2715)。这些插件提供了与 TextMate 系统大致相似的“片段扩展”机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T16:39:55.393

此[代码段](http://tech.groups.yahoo.com/group/vim/message/16157)不能完全按照您的要求执行，但它可能仍然对您有用。

基本上，当您按 时，它会在行尾放置一个分号（如果该行以预定义的单词开头，并且冒号还没有）`Enter`。

```
inoremap <cr> <c-r>=ColonCheck()<cr><cr>

fun! ColonCheck()
  if getline(".") =~ '^\s*\(if\|else\|elif\|while\|for\|try\|except\|finally\|class\|def\)\>.*[^:]\s*$'
    return ":"
  else
    return ""
  endif
endfun 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T16:58:45.250

这是一个相当老套的答案，但你可以做一个简单的映射，如：

```
inoremap def def :<Esc>i 
```

这将完全符合您的要求。也就是说，当您键入“def”时，它会将其解释为“def :”，然后转义回正常模式（在这里您可以移动一点），然后返回插入。

这也有效：

```
inoremap def def :<Left> 
```

当然，问题在于它会在 defs 出现时替换它们，这并不理想。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T19:03:48.497

类似问题：[https ://stackoverflow.com/a/6950427/875064](https://stackoverflow.com/a/6950427/875064)

```
augroup PythonProgramming
   au BufNewFile,BufRead,BufEnter   *.py   iabbr def def:<left>
augroup END 
```

# android - Android：OpenGL ES 2.0 - 纹理总是黑色

> ID：11507040
> 
> 赞同：2
> 
> 时间：2012-07-16T15:02:51.707
> 
> 标签：android, opengl-es-2.0, texture-mapping

我正在尝试使用顶点和片段着色器在 OpenGL ES 2.0（Android 4.0.4，Galaxy Nexus）中显示一个简单的纹理作为全屏背景。最终结果应该是在那里显示相机图像，但首先，来自文件的简单纹理就足够了。我测试了很多东西，并且在我使用 OpenGL ES 1.x 时它工作了很短一段时间，但由于我计划使用着色器进行 YUV->RGB 转换，所以我必须使用 2.0。

我有以下顶点着色器：

```
attribute vec4 position;
attribute vec4 inputTextureCoordinate;

varying vec2 textureCoordinate;

void main() {
    gl_Position = position;
    textureCoordinate = inputTextureCoordinate.xy
} 
```

这个片段着色器：

```
varying highp vec2 textureCoordinate;

uniform sampler2D videoFrame;

void main() {
    gl_FragColor = texture2D(videoFrame, textureCoordinate);
} 
```

这样的着色器创建应该没问题，因为当我编写`gl_FragColor=vec4(1,0,0,0)`它时它工作得非常好并且向我显示红色背景。

`OnSurfaceCreated`我执行以下操作：

```
 a = makeFloatBuffer(squareVertices);
 b = makeFloatBuffer(textureVertices); 
```

和`squareVertices`如下`textureVertices`：

```
static float squareVertices[] = { -1.0f, -1.0f, 1.0f, -1.0f, -1.0f, 1.0f,
        1.0f, 1.0f, };

static float textureVertices[] = { 1.0f, 1.0f, 1.0f, 0.0f, 0.0f, 1.0f,
        0.0f, 0.0f, }; 
```

`OnSurfaceChanged`我执行以下操作：

```
GLES20.glViewport(0, 0, width, height);
Bitmap bitmap = BitmapFactory.decodeResource(mContext.getResources(), R.raw.htc);
GLES20.glGenTextures(1, textures, 0);
GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0); 
```

R.raw.htc 是 128x128 像素 png。

并且`OnDrawFrame`：

```
 GLES20.glUseProgram(program);

    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textures[0]);

    GLES20.glUniform1i(GLES20.glGetUniformLocation(program, "videoFrame"),0);

    GLES20.glClearColor(0.0f, 0.0f, 1.0f, 0.0f);
    GLES20.glClearDepthf(1.0f);
    GLES20.glClear(GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);

    int x = GLES20.glGetAttribLocation(program, "position");
    int y = GLES20.glGetAttribLocation(program, "inputTextureCoordinate");

    GLES20.glEnableVertexAttribArray(x);        
    GLES20.glVertexAttribPointer(x, 2, GLES20.GL_FLOAT, false, 0, a);
    GLES20.glEnableVertexAttribArray(y);
    GLES20.glVertexAttribPointer(y, 4, GLES20.GL_FLOAT, false, 0, b);

    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4); 
```

我唯一看到的是一个完全黑屏，我不知道为什么。我在这里看到了一些其他类似问题的帖子，但没有一个建议的解决方案帮助我，或者根本没有给出解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:54:02.070

如上所述，我们可以找到该问题的解决方案，尽管我们不知道它现在工作的确切原因，而不是以前没有的原因（我们改变了几件事，突然它工作了）。尽管如此，我还是想分享我们的工作版本：

着色器现在也完成了 YUV->RGB 转换： 顶点着色器：

```
attribute vec4 position;
attribute vec4 inputTextureCoordinate;

varying vec2 textureCoordinate;

 void main() {
      gl_Position = position;
      textureCoordinate = inputTextureCoordinate.xy;
 }; 
```

片段着色器：

```
varying highp vec2 textureCoordinate;
uniform sampler2D videoFrame;
uniform sampler2D videoFrame2;

void main(void) {
    highp float nx,ny,r,g,b,y,u,v;
    highp vec2 uv;
    highp vec4 txl,ux,vx;"
    nx=(textureCoordinate.x)/1024.0*720.0;
    ny=(textureCoordinate.y)/1024.0*480.0;
    y=texture2D(videoFrame,vec2(nx,ny)).r;
    uv=texture2D(videoFrame2,vec2(nx,ny)).ag;
    y=1.1643*(y-0.0625);
    u=uv[0]-0.5;
    v=uv[1]-0.5;
    r=y+1.5958*v;
    g=y-0.39173*u-0.81290*v;
    b=y+2.017*u;

    gl_FragColor=vec4(r,g,b,1);
}; 
```

`OnSurfaceCreated`仍然是相同的，但顶点的定义发生了一些变化：

```
static float squareVertices[] = { -1.0f, -1.0f, 1.0f, -1.0f, -1.0f, 1.0f,
        1.0f, 1.0f, };

private float textureVertices[] = { 0.0f, 1.0f, 1.0f, 1.0f, 0.0f, 0.0f,
        1.0f, 0.0f, }; 
```

`OnSurfaceChanged`：

```
 buffer = new int[2];
    GLES20.glGenTextures(2, buffer, 0);
    for (int i = 0; i < 2; i++) {
        int texture = buffer[i];
        Log.v("Texture", "Texture is at " + texture);
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, texture);
        GLES20.glPixelStorei(GLES20.GL_UNPACK_ALIGNMENT, GLES20.GL_TRUE);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D,
                GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D,
                GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D,
                GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D,
                GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);
    }

    buf = new byte[1024 * 1024];
    for (int i = 0; i < 1024 * 1024; i++) {
        buf[i] = 0;
    }
    buf2 = new byte[1024 * 1024];
    for (int i = 0; i < 1024 * 1024; i++) {
        buf2[i] = -128;
    }

    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, buffer[0]);

    GLES20.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_LUMINANCE, 1024,
            1024, 0, GL10.GL_LUMINANCE, GL10.GL_UNSIGNED_BYTE,
            ByteBuffer.wrap(buf));

    GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, buffer[1]);

    GLES20.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_LUMINANCE_ALPHA,
            512, 512, 0, GL10.GL_LUMINANCE_ALPHA, GL10.GL_UNSIGNED_BYTE,
            ByteBuffer.wrap(buf2)); 
```

`OnDrawFrame`：

```
 GLES20.glViewport(0, 0, mWidth, mHeight);

    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, buffer[0]);

    GLES20.glTexSubImage2D(GL10.GL_TEXTURE_2D, 0, 0, 0, Util.CAMWIDTH,
            Util.CAMHEIGHT, GL10.GL_LUMINANCE, GL10.GL_UNSIGNED_BYTE,
            ByteBuffer.wrap(mBuffer, 0, Util.CAMWIDTH * Util.CAMHEIGHT));

    GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, buffer[1]);

    GLES20.glTexSubImage2D(
            GL10.GL_TEXTURE_2D,
            0,
            0,
            0,
            Util.CAMWIDTH / 2,
            Util.CAMHEIGHT / 2,
            GL10.GL_LUMINANCE_ALPHA,
            GL10.GL_UNSIGNED_BYTE,
            ByteBuffer.wrap(mBuffer, Util.CAMWIDTH * Util.CAMHEIGHT,
                    Util.CAMWIDTH / 2 * Util.CAMHEIGHT).slice());

    GLES20.glClearColor(1.0f, .0f, .0f, .0f);

    GLES20.glUseProgram(program);

    GLES20.glUniform1i(GLES20.glGetUniformLocation(program, "videoFrame"),
            0);
    GLES20.glUniform1i(GLES20.glGetUniformLocation(program, "videoFrame2"),
            1);

    GLES20.glClearDepthf(1.0f);
    GLES20.glClear(GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);

    int x = GLES20.glGetAttribLocation(program, "position");
    int y = GLES20.glGetAttribLocation(program, "inputTextureCoordinate");

    GLES20.glEnableVertexAttribArray(x);
    GLES20.glVertexAttribPointer(x, 2, GLES20.GL_FLOAT, false, 0, a);
    GLES20.glEnableVertexAttribArray(y);
    GLES20.glVertexAttribPointer(y, 2, GLES20.GL_FLOAT, false, 0, b);

    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:02:11.077

您将纹理坐标声明为 4 个组件，而不是看起来应该是 2。否则代码看起来很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T20:28:28.047

```
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST); 
```

这两行代码对我有用

```
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE); 
```

我还需要这 2 个才能显示 PNG 文件

# extjs - 如何在 ExtJS 4.1 中更改 Ext.tree.Panel 的存储？

> ID：11507047
> 
> 赞同：1
> 
> 时间：2012-07-16T15:03:04.840
> 
> 标签：extjs, extjs4.1

我想在`Ext.tree.Panel`满足某些条件时更改存储。但不知何故，ExtJS 4.1 的文档没有显示任何方法来做到这一点。我读到过`reconfigure()`，但这会引发一个奇怪的错误（`Object [object Object] has no method indexOf`）。

关注的对象似乎是`me.store`，而`me`是`Ext.tree.Panel`。

由于这`Ext.tree.Panel`是我的主要观点，我不能简单地破坏和重新创建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:18:49.977

这方面的文档确实不清楚。重新配置仅适用于网格。尝试使用`Ext.tree.Panel.setRootNode()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:20:48.643

就我而言，我将 Ext.tree.Panel 放在 Ext.panel.Panel 的项目中。当我需要更改树时，请使用新的 Ext.tree.Panel。帮助功能是

```
函数getTreePanel（存储）
{
    返回新的 Ext.tree.Panel({
        边框：假，
        身体边框：假，
        自动渲染：真，
        根可见：假，
        商店：商店，
    });
}

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-16T11:54:52.353

您可以先设置存储，然后设置根节点。

```
Ext.tree.Panel.setStore('page.SearchPage');
Ext.tree.Panel.setRootNode(NodeInterface); 
```

# ruby-on-rails - 如何使用 Rails 发送大量付款？

> ID：11507048
> 
> 赞同：-1
> 
> 时间：2012-07-16T15:03:09.497
> 
> 标签：ruby-on-rails, controller, paypal, masspay

我正在使用 Rails，需要向我的用户汇款。

这是我的功能：

```
 def self.send_money(to_email, how_much_in_cents, options = {})
credentials = {
  "USER" => API_USERNAME,
  "PWD" => API_PASSWORD,
  "SIGNATURE" => API_SIGNATURE,
}

params = {
  "METHOD" => "MassPay",
  "CURRENCYCODE" => "USD",
  "RECEIVERTYPE" => "EmailAddress",
  "L_EMAIL0" => to_email,
  "L_AMT0" => ((how_much_in_cents.to_i)/100.to_f).to_s,
  "VERSION" => "51.0"
}

endpoint = RAILS_ENV == 'production' ? "https://api-3t.paypal.com" : "https://api-3t.sandbox.paypal.com"
url = URI.parse(endpoint)
http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
all_params = credentials.merge(params)
stringified_params = all_params.collect { |tuple| "#{tuple.first}=#{CGI.escape(tuple.last)}" }.join("&")

response = http.post("/nvp", stringified_params)
 end 
```

我应该放入一些帮助文件吗？

我想在我的视图中使用它，例如：

```
 <%@merchants each do%>
   <%@merchant(current_user.email, 100)%>
 <%end%> 
```

或者只是在控制器中传输用户数组。

我应该把这个功能放在哪里使它正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:47:58.400

您应该在您的控制器中分配并在您的助手中`@merchants`创建一个函数，如下所示：`show_merchant`

```
def show_mercant(merchant, email, value)
  ...
end 
```

并像这样在您的视图中使用它：

```
<% @merchants.each do |merchant| %>
  <%= show_merchant(merchant, current_user.email, 100) %>
<% end %> 
```

我认为您的功能`send_money`与这里无关，对吧？

# sql-server - SQL Server 设计中的疑惑

> ID：11507057
> 
> 赞同：0
> 
> 时间：2012-07-16T15:03:41.430
> 
> 标签：sql-server

我有一个表格组件，其中包含可在机器中使用的部件的一般信息（参考、制造......）。但我可以有非常不同类型的部件，例如阀门、发动机……等等。所以每种类型的工件都有不同类型的规格数据。

例如，阀门具有有关其直径的信息，但发动机具有有关其功率的信息。获得有关阀门功率的信息是没有意义的。

我正在考虑两种选择。首先，要有一个包含所有规格数据的唯一表，所以我有很多字段`ValveDiamter`, `ValveMaterial`.... `EnginePower`,`EngineType`等。在这种情况下，问题是对于一块，我将拥有所有`null`值较小的字段带有图片类型信息的少数字段。

其他解决方案是为每种类型的零件设置一个规格表。所以我会有一张桌子`ValveSpecificaionts`，`EngineSpecifications`等等。这让我有很多桌子，但只有根据作品类型我需要的信息。

我想知道什么是最好的选择。还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:10:47.327

听起来您要在 1 个具有许多字段的表（其中大多数字段将不会用于任何一条记录）和许多具有少数字段的表（几乎总是使用大多数字段）之间做出决定。这里有几个问题可能会有所帮助：

1.  “Valve”数据会被不同的查询使用而不是“Engine”数据，还是会同时使用它们？如果您使用多表方法，那么您将不得不在联合查询中不断地将这些表串在一起，这可能很麻烦。
2.  将存储多少数据以及访问频率如何？出于速度目的，使用较少数量的表可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:06:07.243

有几种不同的方法可以处理这样的事情：

1.  正如你所说的是有一个大表和空未使用的属性。如果有一组共同属性和相对少量的异常值，则此方法效果很好。
2.  为每个项目类型创建一个单独的属性表。
3.  创建单个属性表并存储属性名称和值，并将项目 id 作为外键。
4.  创建一个 xml 列并将属性集存储为 xml。

最好的取决于属性的总数、共有属性的数量以及属性是否需要可搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T16:32:31.717

为了做出充分知情的决定，我们需要更多信息（主要是关于如何使用它，以及各个部分如何相互关联，如果有的话），但作为一般规则，我建议使用更多表，其中仅包含适用于的列每一块。

这样做的好处是更适合于更易于使用且对许多（但不是全部！）典型使用模式更有效的作品。如果您故意对表格进行规范化，这也可能是您会看到的模式，这通常是值得的。

除此之外，它可能有助于防止某些类型的不一致（例如确保一块不接收不适用于它的属性）。

# java - 从两个不同的按钮播放两个不同的声音文件？

> ID：11507062
> 
> 赞同：0
> 
> 时间：2012-07-16T15:03:54.003
> 
> 标签：java, android, file, audio, button

我尝试在很多地方搜索这个，但找不到答案。我正在制作一个带有一组带有字母的图像按钮的应用程序。我希望能够单击字母A，并听到声音文件A。如果单击字母B，我想听到声音文件B。到目前为止，我只有字母A和B，以及声音文件A和B。当我运行我的代码，我只能听到按钮 A 的声音，当我按下字母 B 时，什么也没有发生。这是我的代码：

```
 package com.android.nishad.learn.hindi;

    import android.app.Activity;
    import android.media.MediaPlayer;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.ImageButton;

    public class AlphabetActivity extends Activity implements OnClickListener {
       /** Called when the activity is first created. */
       MediaPlayer mp;

       @Override
       public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_alphabet);

          ImageButton btn = (ImageButton)findViewById(R.id.imageButton1);
          btn.setOnClickListener(this);

       }

       public void onClick(View v) {
          // TODO Auto-generated method stub

          mp = MediaPlayer.create(this, R.raw.lettera);
          mp.start();
          while (mp.isPlaying()) { 
             // do nothing 
          };
          mp.release();
       }

       public void onCreate1(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_alphabet);

          ImageButton btn2 = (ImageButton)findViewById(R.id.imageButton2);
          btn2.setOnClickListener(this);

       }

       public void onClick1(View v) {
          // TODO Auto-generated method stub

          mp = MediaPlayer.create(this, R.raw.letterb);
          mp.start();
          while (mp.isPlaying()) { 
             // do nothing 
          };
          mp.release();
       }
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:13:53.737

方法`onCreate1`和`onClick1`是无用的，因为它们永远不会被调用。相反，您应该将所有初始化代码放入您的`onCreate`方法中：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_alphabet);

    findViewById(R.id.imageButton1).setOnClickListener(this);
    findViewById(R.id.imageButton2).setOnClickListener(this);

}

public void onClick(View v) {

    // TODO Auto-generated method stub
    int rawid = 0;
    switch(v.getId()) {
        case R.id.imageButton1: rawid = R.raw.lettera; break;
        case R.id.imageButton2: rawid = R.raw.letterb; break;

        defalt: return;    //do nothing if none of our buttons;
    }

    mp = MediaPlayer.create(this, rawid);
    mp.start();
    while (mp.isPlaying()) { 
        // do nothing 
    };
   mp.release();
} 
```

但是请注意，这是一种非常低效的处理方式。相反，您应该拥有一个 MediaPlayer 实例，然后根据需要使用它来播放各种声音。每次按下按钮时都创建一个新的 MediaPlayer 是一种资源浪费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:14:17.937

尝试这个：

```
 public void onClick(View v) {

  switch(v.getId()){

  case R.id.R.id.imageButton1:
          mp = MediaPlayer.create(this, R.raw.lettera);
          break;

  case R.id.R.id.imageButton2:
          mp = MediaPlayer.create(this, R.raw.letterb);
          break;
  }
          mp.start();
          while (mp.isPlaying()) { 
             // do nothing 
          };
          mp.release();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:14:28.300

```
package com.android.nishad.learn.hindi;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;

public class AlphabetActivity extends Activity implements OnClickListener {
   /** Called when the activity is first created. */
   MediaPlayer mp;

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_alphabet);

      ImageButton btn = (ImageButton)findViewById(R.id.imageButton1);
      btn.setOnClickListener(this);

      ImageButton btn2 = (ImageButton)findViewById(R.id.imageButton2);
      btn2.setOnClickListener(this);

   }

   public void onClick(View v) 
   {
       switch(v.getId()) 
       {
         case R.id.imageButton1:
             mp = MediaPlayer.create(this, R.raw.lettera);
             break;
         case R.id.imageButton2:
             mp = MediaPlayer.create(this, R.raw.letterb);
             break;
         default:
             return;
       }

      mp.start();
      while (mp.isPlaying()) { 
         // do nothing 
      }
      mp.release();
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:16:56.167

首先，删除那些`onCreate1()`和`onClick1()`方法。`onClick()`方法足以接收布局中所有按钮的点击事件。您可以使用该`view.getId()`方法执行此操作。对于播放声音，我建议使用[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)类，它有一个非常清晰的接口用于此类目的。希望这可以帮助。

# ruby-on-rails - Rails 在解析 json 多部分表单时遇到问题？

> ID：11507068
> 
> 赞同：2
> 
> 时间：2012-07-16T15:04:23.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, curl, multipart

我在理解为什么 Rails 3.2.6 解析包含 json 的多部分 POST 请求时遇到了一些麻烦。

'违规' curl 命令：

```
curl -i -X POST --silent http://localhost:3000/foo.json --form foo='{"name":"bar"};type=application/json' 
```

Rails 解释为：

```
p params[:foo] #=> "{\"name\":\"bar\"}" 
```

请注意该值如何是字符串，而不是（解析的 JSON）哈希。

curl 发送的标头似乎是正确的：

```
> POST /foo.json HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: localhost:3000
> Accept: */*
> Content-Length: 208
> Expect: 100-continue
> Content-Type: multipart/form-data; boundary=----------------------------959d0620faa3 
```

多部分的类型似乎也正确：

```
------------------------------959d0620faa3
Content-Disposition: form-data; name="foo"
Content-Type: application/json

{"name":"bar"}
------------------------------959d0620faa3-- 
```

有人可以帮助我了解到达 params[:foo] 返回解析的 json 哈希而不是其字符串表示的地方的最佳方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:37:32.583

默认情况下，Rails 不解析 json 参数，您必须手动进行。

# mongodb - GridFS 使用文件名作为索引

> ID：11507070
> 
> 赞同：5
> 
> 时间：2012-07-16T15:04:30.843
> 
> 标签：mongodb, tomcat, monitoring, gridfs

我目前正在使用 Replica Set 和 GridFS 使用 mongoDB 开发一个“简单”的照片系统。

原理很简单，我用GridFS放了很多照片，客户端知道文件名，从文件名中我可以检索文件。

GridFS 是否使用文件名作为索引？希望是的，我在任何官方文档中都找不到它。

**我的统计数据是：**

```
 {
        "ns" : "photos.socialphotos.files",
        "count" : 758086,
        "size" : 168295128,
        "avgObjSize" : 222.00004748801587,
        "storageSize" : 220647424,
        "numExtents" : 15,
        "nindexes" : 2,
        "lastExtentSize" : 43311104,
        "paddingFactor" : 1,
        "flags" : 1,
        "totalIndexSize" : 125084624,
        "indexSizes" : {
            "_id_" : 22925504,
            "filename_1_uploadDate_1" : 102159120
        },
        "ok" : 1
    } 
```

**编辑**：通过 reIndex() 收藏，我赢了 30 围棋，但它仍然太高了..

**我的索引是：**

```
{
    "v" : 1,
    "key" : {
        "_id" : 1
    },
    "ns" : "photos.socialphotos.files",
    "name" : "_id_"
},
{
    "v" : 1,
    "key" : {
        "filename" : 1,
        "uploadDate" : 1
    },
    "ns" : "photos.socialphotos.files",
    "name" : "filename_1_uploadDate_1"
} 
```

**索引大小：**

```
"keysPerIndex" : {
    "photos.socialphotos.files.$_id_" : 758086,
    "photos.socialphotos.files.$filename_1_uploadDate_1" : 758086
} 
```

我从不使用`_id_`，因为我不存储它，可以删除它吗？索引大小为 125084624，这意味着我应该将几乎所有照片都放在 RAM 中，这有点奇怪？

**附加问题：**

1.  统计： mongostats 是基础，还有其他好的监控工具，还是我必须创建自己的工具？

2.  故障：当我进行大量插入时，我可以看到很多（大约每秒 100 次），控制台上什么都没有……我应该在哪里调查？

3.  带有 JAVA/Tomcat 的连接池：我正在使用一个简单的 Tomcat webapp 连接到 MongoDB，您是否建议为每个请求打开一个到 mongoDB 的新连接（我猜不是），或者将引用保留为 Mongo 对象上的单例（以持有人为例）或使用一个好的游泳池，但我没有找到一个标准的？

非常感谢你 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T22:24:57.320

为了解决您的问题：

1) 当您使用 Java 驱动程序初始化 GridFS 集合时，该驱动程序将自动在 .files 和 .chunks 集合上创建索引。

2) MongoDB 要求您有一个 '_id' 字段和一个唯一的 '_id' 索引。默认的“_id”只有 12 个字节长——它确实没有显着的开销。

参考：[http ://www.mongodb.org/display/DOCS/Object+IDs](http://www.mongodb.org/display/DOCS/Object+IDs)

3) "filename_1_uploadDate_1" 索引上的统计信息仅表示索引的***大小***。该索引仅包含文件名和上传数据字段的内容 - 它不包含任何照片数据本身。出于性能原因，您希望索引的活动部分适合 RAM。

参考：

*   [http://www.mongodb.org/display/DOCS/Indexes](http://www.mongodb.org/display/DOCS/Indexes)
*   [http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ)

4）如果您想拥有高级统计和监控，请将您的系统注册到10gen提供的免费彩信监控系统中。有关更多信息，请从此处开始：[https ://mms.10gen.com/help/](https://mms.10gen.com/help/)

5) 加载新数据时出现页面错误是正常的。MongoDB 使用内存映射文件，因此每次您写入数据文件中的新位置时，操作系统都需要在该页面中出错。

有关内存映射文件的更多信息，请查看此处：[http ://docs.mongodb.org/manual/faq/storage/](http://docs.mongodb.org/manual/faq/storage/)

6）MongoDB Java驱动提供了自己的连接池。除非您正在做一个真正高性能的应用程序，否则您最好将 Mongo 对象用作单例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T19:25:17.337

看起来您必须在每个“常规”文档中都有 _id 字段：

[http](http://www.mongodb.org/display/DOCS/Object+IDs)

://www.mongodb.org/display/DOCS/Object+IDs 如果您不指定它的生成方式，MongoDB 将使用自动生成它BsonObjectId 数据类型并自动在其上创建索引。这是因为 Mongo 确信该字段的唯一性。但是，如果您不想使用它..就像您的情况一样，您可以将文件名+日期上传放在 _id 字段中，让 Mongo 处理其上的索引..

另外，您提到的.. 125084624 的事情，就是这样_id 上的索引大小。照片的总大小可能要大得多。RAM 中的 125MB 对我来说似乎无害。
我不知道您如何才能更好地调查故障，但是..我假设您使用的是 64 位。如果它是 32 位，则数据库大小限制为 2GB ..您的插入将在此之前的某个时候开始失败..

无论如何，关于连接，请尝试使用一些请求进行测试，一次使用单个连接，一次使用单例。我我猜单身应该表现更好。要测试性能或进行负载测试，您可以使用 Jmeter：http:

[//jmeter.apache.org/](http://jmeter.apache.org/)

# jquery - 如何将单个字母链接到一个单词？

> ID：11507072
> 
> 赞同：3
> 
> 时间：2012-07-16T15:04:30.980
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-draggable, jquery-ui-droppable

我正在创建一个文字游戏，您必须通过从侧面拖动字母来拼写网格中的单词。

此代码从“listOfWords”中随机生成 12 个单词并动态创建一个 6x6 表。这些单词也被分成单个字符（“P”“I”“T”），因此可以放置可拖动的字母来拼写单词......

```
var listOfWords = ["mat", "cat", "dog", "pit", "pot", "fog", "log", "pan", "can", "man", "pin", "gag", "sat", "pat", "tap", "sap", "tag", "gig", "gap", "nag", "sag", "gas", "pig", "dig", "got", "not", "top", "pop", "god", "mog", "cot", "cop", "cap", "cod", "kid", "kit", "get", "pet", "ten", "net", "pen", "peg", "met", "men", "mum", "run", "mug", "cup", "sun", "mud", "rim", "ram", "rat", "rip", "rag", "rug", "rot", "dad", "sad", "dim", "dip", "did", "mam", "map", "nip", "tin", "tan", "nap", "sit", "tip", "pip", "sip", "had", "him", "his", "hot", "hut", "hop", "hum", "hit", "hat", "has", "hug", "but", "big", "bet", "bad", "bad", "bed", "bud", "beg", "bug", "bun", "bus", "bat", "bit", "fit", "fin", "fun", "fig", "fan", "fat", "lap", "lot", "let", "leg", "lit"];

var shuffledWords = listOfWords.slice(0).sort(function () {
return 0.5 - Math.random();
}).slice(0, 12);

var tbl = document.createElement('table');
tbl.className='tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length; i += wordsPerRow) {
var row = document.createElement('tr');

for (var j=i; j < i + wordsPerRow; ++ j) {
    var word = shuffledWords[j];

    for (var k = 0; k < word.length; k++){
        var cell = document.createElement('td');

        cell.textContent = word[k];
        // IF FIREFOX USE cell.textContent = word[j]; INSTEAD
        row.appendChild(cell);
    }
}
tbl.appendChild(row);    
}

 document.body.appendChild(tbl); 
```

这是拖放到网格上以拼写单词的可拖动字母的代码。

```
<div class="squares">

        <div id="drag1" class="drag ui-widget-content box-style2" tabindex="0">
        <p>a</p>
        </div>

        <div id="drag2" class="drag ui-widget-content box-style" tabindex="0">
        <p>b</p>
        </div>

        <div id="drag3" class="drag ui-widget-content box-style" tabindex="0">
        <p>c</p>
        </div>

        <div id="drag4" class="drag ui-widget-content box-style" tabindex="0">
        <p>d</p>
        </div>

        <div id="drag5" class="drag ui-widget-content box-style2" tabindex="0">
        <p>e</p>
        </div>

        <div id="drag6" class="drag ui-widget-content box-style" tabindex="0">
        <p>f</p>
        </div>

        <div id="drag7" class="drag ui-widget-content box-style" tabindex="0">
        <p>g</p>
        </div>

        <div id="drag8" class="drag ui-widget-content box-style" tabindex="0">
        <p>h</p>
        </div>

        <div id="drag9" class="drag ui-widget-content box-style2" tabindex="0">
        <p>i</p>
        </div>

         <div id="drag10" class="drag ui-widget-content box-style" tabindex="0">
        <p>j</p>
        </div>

        <div id="drag11" class="drag ui-widget-content box-style" tabindex="0">
        <p>k</p>
        </div>

        <div id="drag12" class="drag ui-widget-content box-style" tabindex="0">
        <p>l</p>
        </div>

        <div id="drag13" class="drag ui-widget-content box-style" tabindex="0">
        <p>m</p>
        </div>

        <div id="drag14" class="drag ui-widget-content box-style" tabindex="0">
        <p>n</p>
        </div>

        <div id="drag15" class="drag ui-widget-content box-style2" tabindex="0">
        <p>o</p>
        </div>

        <div id="drag16" class="drag ui-widget-content box-style" tabindex="0">
        <p>p</p>
        </div>

        <div id="drag17" class="drag ui-widget-content box-style" tabindex="0">
        <p>r</p>
        </div>

        <div id="drag18" class="drag ui-widget-content box-style" tabindex="0">
        <p>s</p>
        </div>

        <div id="drag19" class="drag ui-widget-content box-style" tabindex="0">
        <p>t</p>
        </div>

        <div id="drag20" class="drag ui-widget-content box-style2" tabindex="0">
        <p>u</p>
        </div> 
```

当单词放在顶部时，如何使单词识别正确的字母？

沿着这些路线的东西......

```
if ("mat" == drag13 + drag1 + drag19) {
            return true;
        }
        else {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:42:20.997

I've made you a simplified version with drag and drop enabled. Note that, in this example, it is useless (and inadvisable) to split the words into letters.

I've used HTML5 custom data attributes, but you can also use the id to store the words and letters.

Example: [jsFiddle](http://jsfiddle.net/7nsPB/1/) (drag 3 letters to a word)

You should also read [docs](http://jqueryui.com/demos/droppable/) on droppable and draggable.

# jasper-reports - 如何使用查询对 iReport 中的特定行求和？

> ID：11507084
> 
> 赞同：5
> 
> 时间：2012-07-16T15:05:09.617
> 
> 标签：jasper-reports, ireport

我正在尝试使用 iReport 创建一个汇总表。我的数据集正在返回一份购买清单和价格。就像是

`Milk, $1.23`

`Chicken, $5.45`

`Milk, $1.44`

等等。我希望我的表能够按产品细分我的项目。我想要一个有列的表：

*   购买产品的次数（#rows where product milk），
*   在产品上花费的总金额（产品为牛奶的价格总和），
*   和产品的平均价格（第 2 栏除以第 1 栏）。

我怎样才能做到这一点？我一直在玩变量，我可以得到所有价格的总和，但我不知道如何使用更复杂的查询来处理数据的子集。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T14:43:40.330

这很容易。您可以在**产品**字段上创建组，并在该组上创建两个变量：用于计算结果总和和平均总和。借助内置变量，您可以计算并显示该组中的元素数量。

这是工作样本：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="group_average2" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <queryString>
        <![CDATA[]]>
    </queryString>
    <field name="product" class="java.lang.String"/>
    <field name="price" class="java.lang.Integer"/>
    <sortField name="product"/>
    <variable name="totalSum" class="java.lang.Double" resetType="Group" resetGroup="productGroup" calculation="Sum">
        <variableExpression><![CDATA[$F{price}]]></variableExpression>
        <initialValueExpression><![CDATA[0]]></initialValueExpression>
    </variable>
    <variable name="averageSum" class="java.lang.Double" resetType="Group" resetGroup="productGroup" calculation="Average">
        <variableExpression><![CDATA[$F{price}]]></variableExpression>
        <initialValueExpression><![CDATA[0]]></initialValueExpression>
    </variable>
    <group name="productGroup">
        <groupExpression><![CDATA[$F{product}]]></groupExpression>
        <groupFooter>
            <band height="20">
                <textField>
                    <reportElement x="0" y="0" width="122" height="20"/>
                    <box leftPadding="10" rightPadding="10">
                        <topPen lineWidth="1.0"/>
                        <leftPen lineWidth="1.0"/>
                        <bottomPen lineWidth="1.0"/>
                        <rightPen lineWidth="1.0"/>
                    </box>
                    <textElement/>
                    <textFieldExpression><![CDATA[$F{product}]]></textFieldExpression>
                </textField>
                <textField pattern="###0.00;-###0.00">
                    <reportElement x="244" y="0" width="122" height="20"/>
                    <box leftPadding="10" rightPadding="10">
                        <topPen lineWidth="1.0"/>
                        <leftPen lineWidth="1.0"/>
                        <bottomPen lineWidth="1.0"/>
                        <rightPen lineWidth="1.0"/>
                    </box>
                    <textElement textAlignment="Right"/>
                    <textFieldExpression><![CDATA[$V{totalSum}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="122" y="0" width="122" height="20"/>
                    <box leftPadding="10" rightPadding="10">
                        <topPen lineWidth="1.0"/>
                        <leftPen lineWidth="1.0"/>
                        <bottomPen lineWidth="1.0"/>
                        <rightPen lineWidth="1.0"/>
                    </box>
                    <textElement/>
                    <textFieldExpression><![CDATA[$V{productGroup_COUNT}]]></textFieldExpression>
                </textField>
                <textField pattern="###0.00;-###0.00">
                    <reportElement x="366" y="0" width="149" height="20"/>
                    <box leftPadding="10" rightPadding="10">
                        <topPen lineWidth="1.0"/>
                        <leftPen lineWidth="1.0"/>
                        <bottomPen lineWidth="1.0"/>
                        <rightPen lineWidth="1.0"/>
                    </box>
                    <textElement textAlignment="Right"/>
                    <textFieldExpression><![CDATA[$V{averageSum}]]></textFieldExpression>
                </textField>
            </band>
        </groupFooter>
    </group>
    <pageHeader>
        <band height="19">
            <staticText>
                <reportElement x="0" y="-1" width="122" height="20"/>
                <box leftPadding="10" rightPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Product]]></text>
            </staticText>
            <staticText>
                <reportElement x="122" y="-1" width="122" height="20"/>
                <box leftPadding="10" rightPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Number of orders]]></text>
            </staticText>
            <staticText>
                <reportElement x="244" y="-1" width="122" height="20"/>
                <box leftPadding="10" rightPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Total sum]]></text>
            </staticText>
            <staticText>
                <reportElement x="366" y="-1" width="149" height="20"/>
                <box leftPadding="10" rightPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Average sum of order]]></text>
            </staticText>
        </band>
    </pageHeader>
</jasperReport> 
```

此示例将 CSV 文件作为数据源。您可以编辑查询 - 用于使用 SQL 查询获取数据。

*iReport*中的报表设计为：

![报告设计](../Images/4b4ab1b2fac92f8dd6a787117bd48764.png)

结果将是（通过*iReport*中的预览）：

![iReport 中的结果](../Images/5b585a5687bf8b57068a7bac5fcdc8c3.png)

你应该阅读这篇关于在[*JasperReports*](http://jasperforge.org/uploads/publish/ireportwebsite/IR%20Website/ir_using_variables.html)[中使用变量的](http://jasperforge.org/uploads/publish/ireportwebsite/IR%20Website/ir_using_variables.html)*文章和这篇关于在[*JasperReports*](http://jasperreports.sourceforge.net/sample.reference/jasper/index.html#groups)[中使用组的](http://jasperreports.sourceforge.net/sample.reference/jasper/index.html#groups)*文章。**

 **请**记住**，您应该在分组使用之前对数据进行排序。来自*jasperforge.org*的关于分组和排序的帖子的引用：

`In order to get an accurate data representation, the data in the data source should be already ordered according to the group expressions used in the report. One can either perform data sorting through the report query, or use the <sortField/> element.`**

# ibm-midrange - 如何在由作业库列表控制的两个不同库之一中创建 DTAQ？

> ID：11507092
> 
> 赞同：1
> 
> 时间：2012-07-16T15:05:31.010
> 
> 标签：ibm-midrange, environment

在我们的 as/400 上，我们有一个测试环境和一个生产环境。一旦我们测试了我们的程序是否正常工作，我们就可以将它们置于生产环境中。两种环境都包含一组类似的库。

告诉我们的程序，它们在哪个环境中工作的基本机制是用于它们运行的​​作业的 liblists。这对某些事情很有效，但对其他事情则不然。因此，我们经常在提交作业时将参数传递给程序，告诉程序在测试或生产环境中工作。这让我很恼火，因为我的程序在整个执行过程中总是必须携带这个参数，甚至经常将它传递给其他程序。有时初始程序本身甚至不需要信息，但仍然必须将其作为参数，因为它调用了一个确实需要它的程序。

提出我面临的具体问题：更大流程的各个部分之间的通信通常通过我们系统中的数据队列完成。根据 liblist 读取特定的 DTAQ 就像一个魅力，只需调用`RCVDTAQ`DTAQ 的名称，liblist 会负责选择正确的库。写入 DTAQ 也是如此。

但有时程序必须在收听或写入之前创建一个新的 DTAQ。现在这不适用于我们的布局和库列表。可以这样想：

产品库列表：

```
PPGMLIB1
PPGMLIB2
PDFILELIB1
PDTAQLIB1
P...
... 
```

测试库列表

```
TPGMLIB1
TPGMLIB2
TDFILELIB1
TDTAQLIB1
T...
... 
```

现在我的程序应该在 中创建 DTAQ `?DTAQLIB1`，其中`?`应该是`P`or `T`。

我的第一个想法是通过 liblist 并查找条目`PDTAQLIB`or `TDTAQLIB`，并取先到者 - 但我无法弄清楚如何做到这一点（因此我的相关问题：[如何从内部读取 liblist一个 ILE 程序？（最好是 RPG 或 CL）](https://stackoverflow.com/questions/11506488/how-can-i-read-the-liblist-from-within-an-ile-program-preferably-rpg-or-cl)）。

我知道我可以通过检查哪个用户拥有当前工作来实现我的目标，但这会破坏我们通过 liblists 选择库的逻辑（就像我们当前的解决方法一样）。

有什么我想念的吗？我正在尝试编写一些特殊的调用方式`CRTDTAQ`，或者一些特殊的 api 来进行这个 liblist 比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:11:04.820

Warren 的配置文件想法很好，但听起来比您需要的要多得多。只使用数据区怎么样？

例如，确保您的 ?DFILELIB1 库中始终有一个名为 MODE 的数据区域。该模式只有一个字符“P”或“T”。

Or even simpler (though perhaps less clear): you could test for the presence or absence of a TESTMODE data area, and proceed accordingly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:53:59.740

要阅读 CL 中的库列表，请使用 RTVJOBA。要在 ILE RPG 中阅读它，我建议使用 QUSRJOBI API，格式为 JOBI0700。 [http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2Fqusrjobi.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2Fqusrjobi.htm)
我认为扫描库列表的想法可能是最适合您的环境的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T23:09:44.763

我通常会尽量避免在我的程序中的任何地方硬编码库名称。如果您正在扫描特定的名称或名称模式，现在这可能工作得很好，但是当创建新环境时会发生什么，可能使用新的命名方案。因此，我会将环境设置存储为配置数据。

我有两种方法。

你可以建立一个通用的配置值表，各种程序都可以使用它来查找各种配置值。在我们的商店中，我们将其称为通用值文件。它具有主键字段，第一个通常用于程序名称，第二个用于正在配置的值的名称。我们还经常将表名作为第一个键，将列名作为第二个键，每条记录都为该列定义一个有效值及其描述。

在我使用数据队列实现 SOA 服务的地方，我有一个表专门用于定义有关服务的信息。这包括诸如库和数据队列名称之类的信息，以及客户端界面、执行服务的作业或管理我的服务作业的作业使用的其他信息。

在任何一种情况下，配置文件都位于特定于环境的数据库中，其值适用于该特定环境。我已经注释了包含所有配置记录的 INSERTS 的 SQL 脚本成员，以便源扫描可以轻松找到库或对象名称引用。我建议将特定于环境的配置与将被测试并转移到生产环境的其他应用程序配置数据分开。

# sql-server - SQL Server 2008 中的 Server.DataBase 别名

> ID：11507093
> 
> 赞同：2
> 
> 时间：2012-07-16T15:05:56.643
> 
> 标签：sql-server, alias

我已经在很多领域搜索过这个问题，但还没有找到一个非常明确的答案。

我正在使用多个数据库服务器，并且一直在写出 [ServerName].[databasename].dbo.TableName。我知道你可以给表起别名，但我在服务器和数据库上找不到明确的答案。

是否可以创建一个允许我调用别名而不是调用整个 [ServerName].[databasename].dbo.TableName 的别名？

例如： 服务器名称：SQL01 数据库名称：客户端 所需别名：客户端

SQL01.Client 上的示例表名：联系人

从 SQL02 开始，我可以调用 Client.Contact`SELECT * FROM Client.Contact`而不必编写`SELECT * FROM [SQL01].Client.dbo.Contact`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:15:02.037

如果您还没有遇到过，您正在寻找的关键词是“同义词”，并且[文档](http://msdn.microsoft.com/en-us/library/ms187552%28v=sql.100%29.aspx)准确地描述了您感兴趣的场景。所以是的，这是可能的。

# iphone - 仅在 Xcode 中为打开的选项卡执行查找/替换

> ID：11507094
> 
> 赞同：0
> 
> 时间：2012-07-16T15:05:58.903
> 
> 标签：iphone, xcode, ide

有没有办法仅在选项卡中打开的源文件中查找/替换而不是任何其他文件？还是与 Visual Studio 相比，它是 Xcode 的另一个障碍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:05:22.017

不，你不能这样做。我不认为很多人在 Xcode 中使用标签。查找和替换栏会记住您输入的内容，因此您可以从左侧菜单中一次选择一个文件，在键盘上按 alt+command+f，然后全部替换。

# c++ - 一个引擎 (boost::mt19937) 多个分布 (随机质量)

> ID：11507100
> 
> 赞同：0
> 
> 时间：2012-07-16T15:06:23.803
> 
> 标签：c++

我正在使用 boost_1_31_0 并且我正在尝试创建 beta 分布随机数（我正在使用 beta(alpha, beta) = gamma(alpha) / (gamma(alpha) + gamma(beta))）I' m 每次使用这个创建 16 个随机数（见下文）：问题是随机生成的不遵守大数定律：对于每个分布，当我计算生成数的平均值时，它与分布。结论是我们不能对很多发行版使用相同的引擎吗？我的代码如下：

```
//this engine is created in the top of my code.
boost::mt19937 eng;

//MyVector.size() is equal to 8, this boucle is called 100 000 times

for (int i = 0; i<MyVector.size(); i++)
{
    MyObject seedPtr = MyVector[i];
alpha = m_map_alpha.find(seedPtr)->second ;
boost::gamma_distribution<> gamma_alpha(alpha);
boost::variate_generator< boost::mt19937&,boost::gamma_distribution<>> generator_gamma_alpha(eng, gamma_alpha);
alpha_random = generator_gamma_alpha();
boost::gamma_distribution<> gamma_beta(beta);
boost::variate_generator< boost::mt19937&, boost::gamma_distribution<>> generator_gamma_beta(eng, gamma_beta);
beta_random = generator_gamma_beta();   
random = alpha_random / (alpha_random + beta_random ) ;
pair<myObject, double> graine(seedPtr, random);
mapRandoms.insert(graine);
} 
```

# python - 如何使用 cython 编译和链接多个 python 模块（或包）？

> ID：11507101
> 
> 赞同：22
> 
> 时间：2012-07-16T15:06:23.443
> 
> 标签：python, compilation, package, cython

我有几个 python 模块（组织成包），它们**相互依赖**。例如

*   模块1
*   模块 2：导入模块 1
*   模块3
*   模块 4：导入模块 3、模块 2、模块 1

假设开发应用程序的相关接口在 Module4 中，我想使用 cython 生成一个**Module4.so**。如果我以天真的方式进行，我会得到一个扩展 Module4.so 我可以导入**但**扩展**依赖于**Module1、Module2、Module3 的 python 源代码。

有没有办法编译，以便模块 1、模块 2、模块 3 也被**编译并链接**到模块 4？我想**避免手动做所有事情**，例如先编译Module1.so然后在Module2中更改导入声明，以便导入Module1.so而不是Module1.py，然后将Module2编译成Module2.so等等......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T15:50:07.460

编辑。前两个选项指的是 Cython 的特定代码，我错过的是问题是关于纯 python 模块的，所以选项 3 是解决方案。

有几个选项：

1.参见这篇“如何在包中创建模块的层次结构”： [https ://github.com/cython/cython/wiki/PackageHierarchy](https://github.com/cython/cython/wiki/PackageHierarchy)

2\. 我更喜欢“include”语句： [http](http://docs.cython.org/src/userguide/language_basics.html#the-include-statement) : //docs.cython.org/src/userguide/language_basics.html#the-include-statement 我有很多 .pyx 文件，它们都包含在 main.pyx 中，它是都在一个命名空间中。结果是一个大模块：[http ://code.google.com/p/cefpython/source/browse/cefpython.pyx](http://code.google.com/p/cefpython/source/browse/cefpython.pyx)

3\. 您可以通过添加多个“扩展”使用 setup 一次编译所有模块：

```
setup(
    cmdclass = {'build_ext': build_ext},
    ext_modules = [Extension("example", sourcefiles), Extension("example2", sourcefiles2), Extension("example3", sourcefiles3)]
) 
```

4\. 更高效的编译 - 见[这里](https://github.com/cython/cython/wiki/enhancements-distutils_preprocessing)。

```
setup (
    name = 'MyProject',
    ext_modules = cythonize(["*.pyx"]),
) 
```

# c# - 如何使用 viewmodellocator 在视图模型之间发送参数

> ID：11507105
> 
> 赞同：6
> 
> 时间：2012-07-16T15:06:31.803
> 
> 标签：c#, .net, wpf, mvvm, viewmodellocator

我正在使用 MVVMLight 创建一个 WPF 应用程序。我使用 ViewModelLocator 创建视图模型。我的问题是在它们之间传递参数。

例如我们有一个情况：

我们有一个包含一些实体的网格，当其中一个被双击时，我需要创建一个包含该实体详细信息的新视图。如何将选定的项目 id 发送到新视图的 ViewModel？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T16:27:59.240

通常，您会使用某种消息传递系统，例如 Prism 的[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)或 MVVM Light 的[Messenger](http://www.galasoft.ch/mvvm/)。

这两个系统都让我想起了一个分页系统：应用程序的任何部分都可以广播消息，而应用程序的任何部分都可以订阅并收听消息。

因此，您的 DoubleClick 命令将广播`LoadItemMessage`包含所选项目的 a `Id`，并且负责显示该项目的任何内容都将订阅接收`LoadItemMessages`并在听到 a 时加载该项目`LoadItemMessage`。

如果您有兴趣，我的博客上有一篇关于[Viewmodels 与 MVVM 之间通信](http://rachel53461.wordpress.com/2011/06/05/communication-between-viewmodels-with-mvvm/)的简短文章，它提供了事件系统的高级概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:02:39.100

这是 ViewModelLocator 的一个问题（将参数从 View xaml 传递给 ViewModel）。您可以做的是在 ViewModelLocator 类中创建类型对象或（类型为您的 SelectedItem）的属性参数。将此绑定到 Grid 的 SelectedItem，然后将其传递给新的 ViewModel。我希望这将有所帮助。**注意：**如果您创建类型 object 的属性，请不要忘记强制转换它。

# asp.net-4.0 - 为什么 MetaTable 没有拾取一些关联列？

> ID：11507107
> 
> 赞同：1
> 
> 时间：2012-07-16T15:06:39.553
> 
> 标签：asp.net-4.0, asp.net-dynamic-data

我有一个相当复杂的 Web 表单，它使用带有一堆自定义 FieldTemplate 的 DynamicData。在 .NET 3.5 SP1 下一切正常...然后我转换为 .NET 4.0 并且某些字段拒绝加载，出现如下错误：

System.InvalidOperationException：表 'Tickets' 没有名为 'Contact' 的列。

堆栈跟踪显示 System.Web.DynamicData.MetaTable.GetColumn(String columnName) 抛出实际异常，因此认为该函数发生了一些变化。不知道是什么，但是... :(

我已经验证了这些列在那里（我可以使用 Eval() 等访问，但 DynamicControl 找不到这些列。）更糟糕的是，有几个字段可以工作，我看不到有效的列和无效的列之间有什么真正不同。所有不起作用的都是关联，但也有一些关联也有效。

编辑：刚刚更改了问题标题...我使用 System.Web.DynamicData.MetaTable.GetTable() 跟踪并抓取了 MetaTable 本身，果然 MetaTable 缺少该列。我只是不明白为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T01:21:02.293

终于想通了……

关联使用不是主键的列。因此，通过将 Child 表中涉及的所有列设置为主键，它可以在 .NET 4 中再次运行。

# c# - 自动重命名类以匹配文件名

> ID：11507108
> 
> 赞同：5
> 
> 时间：2012-07-16T15:06:41.120
> 
> 标签：c#, resharper, resharper-5.1

我`A`在文件中有一个类`B.cs`。现在我想重命名这个类以匹配文件名（`B`）。

VS 或 ReSharper 中是否有重构或上下文操作可以**自动**为我执行此重命名，**而无需输入**与文件名匹配的新名称？

## 例子

**改名前：**

文件 B.cs：

```
class A {} 
```

**自动重命名后：**

文件 B.cs：

```
class B{} 
```

## 更新

**相反**（自动重命名文件以匹配类名）**不是一个选项**，因为所有这些文件重命名都是作为 DELETE+ADD 实现的。但是我**会在 Perforce 中丢失该文件的更改历史记录**，因为 VS-Perforce-connection 的所有 VS-Plug-ins 都不支持重命名的*移动/添加+移动/删除*操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:08:33.750

在 Visual Studio 中，您可以右键单击 .cs 文件中的类名并通过选择“重构 --> 重命名”来重命名它。它将为您提供重构它的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-02T14:07:28.740

We recently did a large refactor of several files, changing them from "Controllers" to "Services". After plodding through a few of them with ReSharper, I decided I should rename "BaseController" to "BaseService". Ding! ReSharper offered to rename all subclasses and replace "Controller" with "Service".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:12:23.120

使用 Resharper，您可以使用 Ctrl+R,O

![enter image description here](../Images/e4a784286d984749eb8fc4982a7ac534.png)

PS我使用Resharper 6.1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-02T12:13:50.907

> Is there a refactoring or context action in VS or ReSharper which **automatically** can do this renaming for me **without typing in the new name** matching file name?

With ReShaper 8.1 it is possible. Just put a cursor on the class name, hit `alt + Enter` to bring up the options then Select '`Rename file to match type name`' and you are good.

[![enter image description here](../Images/d09b880cf9f7412d86de46d4409495ad.png)](https://i.stack.imgur.com/KvrgJ.gif)

# java-ee-6 - 有没有办法在不捕获 ContextNotActiveException 的情况下知道状态是否处于活动状态？

> ID：11507109
> 
> 赞同：7
> 
> 时间：2012-07-16T15:06:49.993
> 
> 标签：java-ee-6, cdi, jboss-weld

我想知道`RequestScoped`上下文当前是否在方法中处于活动状态。

目前，这就是我所做的：

```
@Inject private BeanManager beanManager;

public boolean isRequestScopeActive() {
    try {
        if (beanManager.getContext(RequestScoped.class).isActive()) {
            return true;
        } else {
            return false;
        }
    } catch (final ContextNotActiveException e) {
        return false;
    }
} 
```

我认为抓住一个`ContextNotActiveException`只是为了知道一个范围是否处于活动状态有点沉重。

您有更好的方法来了解 CDI 中上下文的状态（活动与否）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T14:57:45.340

不，我们在 CDI 1.0 中的唯一选择是捕获 ContextNotActiveException。

您的解决方案应该有效。

这实际上最终成为一个问题，因为范围实现不可用于注入。

例如，您不能只`@Inject RequestScopedContextImpl rq;`检查`rq.isActive()`方法，因为我们无法在不知道 CDI 本身的实现细节的情况下访问该类。

# c# - 如何在另一个 AppDomain 中从内存中运行可执行文件？

> ID：11507110
> 
> 赞同：0
> 
> 时间：2012-07-16T15:06:49.823
> 
> 标签：c#, .net, appdomain

我试图找到一个这样的例子，但我什么也没找到。似乎 CreateInstanceAndUnwrap 和类似的没有汇编或字节数组的重载。有人可以告诉我该怎么做吗？

编辑：

[这](https://stackoverflow.com/questions/11504817/how-can-i-catch-the-unhandled-exceptions-of-another-process)是我的另一个问题的链接。我的想法是制作一个包装器可执行文件来运行我的主要可执行文件并记录其错误。但是如果我不将它作为另一个 AppDomain 运行，我不知道如何捕获 AppDomain.FirstChanceException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:09:19.807

您不能在另一个 AppDomain 中运行可执行文件。可执行文件意味着进程，进程意味着不同的 AppDomain。考虑将可执行文件作为`Process.Start`. 因此，您可以做的是加载此*可执行文件*表示的 .NET 程序集，并在另一个 AppDomain 上对其调用某些方法。您可以在调用项目中引用此可执行文件或在运行时动态加载程序集。

# android - 如何将视频录制到内部存储？

> ID：11507111
> 
> 赞同：3
> 
> 时间：2012-07-16T15:06:52.630
> 
> 标签：android, video, storage, internal

当我的测试手机录制视频并且没有外部 sd 卡时，我遇到了问题。我收到记录错误，因为：

```
Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES) 
```

指向外部 sd 卡，由于外部 sd 不存在，手机不够智能，无法指向内部存储。

1.  这个问题有解决方案吗？

2.  如果没有，我如何直接记录到内部存储？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:36:28.690

如果要测试 SD 卡是否存在，请阅读[Environment.getExternalStorageState() 上的文档](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)。这包括演示如何测试 SD 卡是否已安装、可读和/或可写的代码。如果在您的应用程序运行时移除卡，它甚至会注册一个 BroadcastReceiver。

只要 SD 卡不可用，您就可以将保存的文件转移到内部存储中。

**评论中的补充**

您没有提供有关当前如何测试 SD 卡可用性的任何详细信息，因此我概括了该过程。

```
MediaRecorder mediaRecorder = new MediaRecorder();
...

String state = Environment.getExternalStorageState();
if(Environment.MEDIA_MOUNTED.equals(state))
    mediaRecorder.setOutputFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES) + "/video.mp4");
else
    mediaRecorder.setOutputFile(getFilesDir().getAbsolutePath() + "/video.mp4"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T16:04:11.760

试试这篇[文章](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。

你基本上想打电话给`openFileOutput(String fileName, MODE_PRIVATE)`. 这将返回一个`FileOutputStream`供您使用。调用`write()`写入文件，然后调用`close()`清理。请注意，这`MODE_PRIVATE`将使文件对您的应用程序私有。

# html - 对齐不同高度的浮动元素

> ID：11507123
> 
> 赞同：4
> 
> 时间：2012-07-16T15:07:34.020
> 
> 标签：html, css

我有几个 div `.photo_box`，其中包含一个`.photo_stats_title`包含一些文本的 div。当文本开始占用超过 1 行时，其父 div 的高度会`.photo_box`发生变化。这会导致各种`.photo_box`div 按其底部对齐。

**问题：**我们怎样才能让它们在顶部对齐？*最好不使用 jQuery/Javascript*

**JSfiddle：http:** [//jsfiddle.net/ySbjQ/](http://jsfiddle.net/ySbjQ/)

![在此处输入图像描述](../Images/d8e2a52c122dc41e2549c2559a493ce3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T15:08:39.480

使用`display: inline-block;`和`vertical-align: top`对齐这些。

```
.photo_box {
    background: #fff;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px; 
    display: inline-block;
    position: relative;
    margin-bottom: 15px;  
    border: 1px solid #ddd;
    vertical-align: top;
} 
```

[http://jsfiddle.net/ySbjQ/1/](http://jsfiddle.net/ySbjQ/1/)

此外，如果您需要对某些旧版浏览器的支持，请查看这里的一些修复程序[http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:10:50.103

添加“位置：绝对；” 到 CSS 中的 .photo_stats_title 。

[http://jsfiddle.net/ySbjQ/4/](http://jsfiddle.net/ySbjQ/4/)

# javascript - Javascript 多级嵌套引号

> ID：11507124
> 
> 赞同：1
> 
> 时间：2012-07-16T15:07:38.307
> 
> 标签：javascript, coldfusion, escaping, quotes

我正在使用 JQWidgets 网格做一些工作，这需要用图像替换列中的值。为此，我需要将一个字符串返回给 cellsrenderer。此外，单击图标将执行 Javascript 函数调用，并传递几个参数。其中一个参数是字符串值，我在设置返回字符串时遇到了困难。

我正在调用的 Javascript 函数需要 4 个变量 - 三个整数和一个字符串。这是返回的代码：

```
return "<span style='margin:4px; display:block;'><a href='javascript:;' onclick='unenroll(" + courseID + ", \"courseName\", " + progress + ", " + userID + ")' class='delete-icon' title='<cfoutput>#APPLICATION.LC.getValue("UnassignFrom")#</cfoutput> ' + courseName + '?'><cfoutput>#APPLICATION.LC.getValue("UnassignFrom")#</cfoutput> ' + courseName + '?</a></span>"; 
```

courseID、courseName、progress 和 userID 都是 Javascript 变量；courseName 是一个字符串。

如您所见，我尝试用斜杠转义 courseName 周围的引号，但这是行不通的。编码 Unicode 或 HTML 实体版本的引号也不行。我什至尝试过切换所有引号（即从单引号到双引号和从双引号到单引号），但仍然没有。

**编辑 -**这是我从 Firebug 得到的：语法错误 unenroll(2333, "Exam Automation", 50, )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:13:14.263

您刚刚错过了“UnassignFrom”附近的一些转义引号，这是正确的版本：

```
return "<span style='margin:4px; display:block;'><a href='javascript:;' onclick='unenroll(" + courseID + ", \"courseName\", " + progress + ", " + userID + ")' class='delete-icon' title='<cfoutput>#APPLICATION.LC.getValue(\"UnassignFrom\")#</cfoutput> ' + courseName + '?'><cfoutput>#APPLICATION.LC.getValue(\"UnassignFrom\")#</cfoutput> ' + courseName + '?</a></span>" 
```

# html - html 固定标头 firefox 最新浏览器兼容

> ID：11507130
> 
> 赞同：0
> 
> 时间：2012-07-16T15:08:04.953
> 
> 标签：html, css, firefox

我想要一个固定的标题，它可以在 Firefox 3.6 中工作，但不能在 Firefox 13 中工作。

css 也喂了，感觉 ID 也得做点什么`scrollTableContainer`。

**桌子**

```
<thead>

    <tr>

        <th>Rendering engine</th>
        <th>Browser</th>
        <th>Platform(s)</th>
        <th>Engine version</th>
        <th>CSS grade</th>
    </tr>

</thead>
<tbody>
    <tr class="odd gradeX">
        <td>Trident</td>
        <td>Internet
             Explorer 4.0</td>
        <td>Win 95+</td>
        <td class="center">4</td>

        <td class="center">X</td>
    </tr>
    <tr class="odd gradeC">
        <td>Trident</td>
        <td>Internet
             Explorer 5.0</td>
        <td>Win 95+</td>
        <td class="center">5</td>

        <td class="center">C</td>
    </tr>

         </tbody>
      </table>
   </div>

            **CSS BELOW** 

     div.scrollTableContainer 
    {
        height: 485px;
        overflow: auto;
        width: auto;
        margin: 10px -75px 1px -50px;
        position: relative;
    }

    /* The different widths below are due to the way the scroll bar is implimented */

    /* All browsers (but especially IE) */
    div.scrollTableContainer table 
    {
    width: 1000px;

    }

    /* Modern browsers (but especially firefox ) */
    html>/**/body div.scrollTableContainer table 
    {
    width: 1000px;
    }

    /* Modern browsers (but especially firefox ) */
    html>/**/body div.scrollTableContainer table>tbody 
    {
    overflow: auto;
    height: 365px;
    overflow-x: hidden;
    max-width:100px;

    }

             div.scrollTableContainer thead tr {
      position:relative;
      background-color:#3366FF;
      width:auto;
      text-align:left;
      top: expression(offsetParent.scrollTop); /*IE5+ only*/
      /* fixes the header being over too far in IE, doesn’t seem to affect FF */
      left: 0px;   
      }

      /*prevent Mozilla scrollbar from hiding cell content*/
      div.scrollTableContainer td:last-child {padding-right: 20px;}
      /*********************************************************************************/
      /* Used specifically for View Announcements page in Samo */
      div.scrollTableContainerAnn 
      {
        height:485px;
        overflow: auto;
        width: auto;
        margin: 10px -225px 1px -50px;
        position: relative;
      }

      /* The different widths below are due to the way the scroll bar is implemented */

      /* All browsers (but especially IE) */
      div.scrollTableContainerAnn table 
      {
        width: 1000px;
      }

      /* Modern browsers (but especially firefox ) */
      html>/**/body div.scrollTableContainerAnn table 
      {
        width: 1000px;
      }

      /* Modern browsers (but especially firefox ) */
      html>/**/body div.scrollTableContainerAnn table>tbody 
      {
        overflow: auto;
        height: 365px;
        overflow-x: hidden;
        max-width:100px;
      }

      div.scrollTableContainerAnn thead tr 
      {
        position:relative;
        background-color:#3366FF;
        width:auto;
        text-align:left;

        top: expression(offsetParent.scrollTop); /*IE5+ only*/
        /* fixes the header being over too far in IE, doesn't seem to affect FF */
        left: 0px;
      }

      /*prevent Mozilla scrollbar from hiding cell content*/
      div.scrollTableContainerAnn td:last-child 
      {
        padding-right: 20px;
      }
      /*********************************************************************************/

      /* CSS Document */
      div.scrollTableContainerB {
      height: 500px;
      overflow: auto;
      width: auto;
      margin: 10px -75px 1px -75px;
      position: relative;
      }

      /* The different widths below are due to the way the scroll bar is implimented */

      /* All browsers (but especially IE) */
      div.scrollTableContainerB table {
      width: 1110px;

      }

      /* Modern browsers (but especially firefox ) */
      html>/**/body div.scrollTableContainerB table {
      width: 900px;
      }

      /* Modern browsers (but especially firefox ) */
      html>/**/body div.scrollTableContainerB table>tbody {
      overflow: auto;
      height: 365px;
      overflow-x: hidden;   
      max-width:100px;

      }

      div.scrollTableContainerB thead tr {
      position:relative;
      background-color:#3366FF;
      width:800px;
      text-align:left;
      top: expression(offsetParent.scrollTop); /*IE5+ only*/
      /* fixes the header being over too far in IE, doesn’t seem to affect FF */
      left: 0px;
      }

      /*prevent Mozilla scrollbar from hiding cell content*/
      div.scrollTableContainerB td:last-child {padding-right: 20px;} 
```

# java - 增加java中单个工作线程的堆栈空间

> ID：11507133
> 
> 赞同：7
> 
> 时间：2012-07-16T15:08:11.207
> 
> 标签：java, jvm, stack, stack-overflow

在我的 java web 应用程序中，我有一个后台工作线程，它需要大量的堆栈空间，因为它使用 activiti 工作流引擎和 groovy 脚本任务运行一个非常复杂的工作流。

目前我需要在 64 位 Java 和 Tomcat 上将 JVM Xss 设置设置为 16MB，以规避任何 StackOverflowErrors。如果发生错误，堆栈跟踪真的很大（几百行长），但它都发生在引擎内部，所以我真的无能为力。

现在我的问题是：有没有办法在运行时增加单个线程的堆栈大小？

我想将应用程序中所有线程的 JVM 默认 Xss 设置降低到 512k，我知道这已经足够了，并且只运行 16M 的工作线程。

Java API 为 Thread 类的构造函数提供了有关此主题的一些信息：

```
public Thread(ThreadGroup group,
              Runnable target,
              String name,
              long stackSize) 
```

但它提到，不能保证这种行为（[1]），我没有找到任何信息，如果它可以在 Windows 上工作。

另外，如果一个线程的堆栈空间不能增加，我必须指定16MB作为默认值，那么设置这么高会有什么后果呢？这是否意味着每个新线程在初始化时都会保留 16MB 的内存（即 200 个线程 * 16MB：3.2 GB）？

据我从 jconsole 和 taskmgr 可以看出，自 Xss 设置增加以来，内存占用似乎没有太大变化，但也许我遗漏了一些东西。

任何帮助或澄清将不胜感激。

[1]：[http](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#Thread(java.lang.ThreadGroup) ://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#Thread (java.lang.ThreadGroup, java.lang.Runnable, java.lang.String,长）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:44:45.110

在 HotSpot 上指定最大尺寸而不是`-Xss`它将使用的尺寸毫无价值。使用的大小基于使用情况，因此如果您指定这个不合理的大，它将浪费虚拟内存（这在 32 位 JVM 上可能是一个问题），但不会浪费物理内存。如果您有一个 64 位 JVM，那么将任何线程设为您想要的最大线程并没有什么缺点。

> 另外，如果一个线程的堆栈空间不能增加，我必须指定16MB作为默认值，那么设置这么高会有什么后果呢？这是否意味着每个新线程在初始化时都会保留 16MB 的内存（即 200 个线程 * 16MB：3.2 GB）？

每个线程将使用这么多虚拟内存。在 32 位 JVM 上，即使您实际上使用的内存很少，也会用完地址空间。在 64 位 JVM 上，您的限制在 TB 中，只有实际使用的堆栈才会使用主内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:13:14.700

如果相关线程是进程密集型的。将此线程的逻辑实现为另一个应用程序，并使用队列传递信息和流程变量。您可以根据需要增加此应用程序的内存参数。

从文档链接：

> 虚拟机可以自由地将 stackSize 参数视​​为建议。如果平台的指定值过低，虚拟机可能会使用一些特定于平台的最小值；如果指定的值过高，则虚拟机可能会改为使用某些特定于平台的最大值。同样，虚拟机可以随意向上或向下舍入指定的值（或完全忽略它）。

# grails - Grails 中的分页

> ID：11507140
> 
> 赞同：6
> 
> 时间：2012-07-16T15:08:38.650
> 
> 标签：grails, pagination

我想在我的 grails 应用程序中添加一些分页内容。我有列表操作，并在其中执行了此操作：

```
if(!params.max){
params.max = 3
}
    def query = Profile.where {
        userType == "F"
    }
    def freelancers = query.list(sort:"firstName", max:params.max)
    if(freelancers) {
        def freelancersCount = query.count()
        return[freelancer:freelancers, fCount:freelancersCount]
    } else {
        response.sendError(404)
    } 
```

在 gsp 中我写了这个：

```
<div id="paginate">
    <g:paginate controller="freelancers" action="list" total="${fCount}"/>
</div> 
```

一切正常，我的数据库中有 5 个对象，在浏览器中打开 gsp 页面时我只能看到 3 个，但是当我单击下一步打开其他 2 个对象时，我看到了相同的 3 个。出了什么问题，我必须做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T15:12:02.537

您需要将偏移量传递到对[list](http://grails.org/doc/1.3.x/ref/Domain%20Classes/list.html)的调用中：

```
def freelancers = query.list(sort:"firstName", offset:params.offset, 
max:params.max) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T10:54:09.767

1）如果您使用的是标准查询，那么：

```
 params.max = Math.min(max ?: 10, 100)
 Integer offset = params.offset as Integer ?: 0
 List userInstanceList = User.createCriteria().list(max:params.max,offset:offset) {
            or {
                ilike('name', "%${name}%")
                ilike('email', "%${email}%")
            }
            order('dateCreated', 'desc')
        } 
```

2）如果您使用的是 GORM 查询，那么：

```
 params.max = Math.min(max ?: 10, 100)
 Integer offset = params.offset as Integer ?: 0
 List<User> userList=User.list(max:params.max,offset:offset) 
```

# ms-access - 在 Access 2007/2010 中启用和禁用连续子表单上的控件

> ID：11507151
> 
> 赞同：6
> 
> 时间：2012-07-16T15:09:03.893
> 
> 标签：ms-access, ms-access-2007, vba, continuous-forms

我需要启用或禁用连续子表单上的控件，这取决于另一个字段。[我凭直觉编写的初始代码与此处](http://www.dbforums.com/microsoft-access/1654808-continuous-form-making-button-visible-invisible.html#post6453487)建议的非常相似，但不是只禁用那些标记为“子”的控件，而是禁用所有这些控件-实际上，它似乎只是在寻找最后一条记录并影响所有行。

有没有办法可以实现这一点，还是我在吠叫错误的树？下面的代码：

```
If Me.Record_Type = "Child" Then 'Disable subsidiary records
Me.Record_Type.SetFocus
Me.Prospect_Name.Enabled = False
End If 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T15:10:51.863

以连续形式明智地处理行的唯一方法是使用[条件格式](http://office.microsoft.com/en-us/infopath-help/apply-conditional-formatting-to-a-form-template-HA010024057.aspx)。应用的任何代码都引用活动行，因此它似乎会影响所有行。

**条件格式，Access 2010**

选择启用/禁用

![条件格式，Access 2010](../Images/d0b8789a3f91c101225156c6392fd7ca.png)

# php - 具有未知数量参数的方法可以调用具有未知数量参数的另一个方法吗？

> ID：11507152
> 
> 赞同：2
> 
> 时间：2012-07-16T15:09:05.610
> 
> 标签：php

> **可能重复：**
> [PHP，如何将 func-get-args 值作为参数列表传递给另一个函数？](https://stackoverflow.com/questions/2126778/php-how-to-pass-func-get-args-values-to-another-function-as-list-of-arguments)

我在基类中有一个可以接受任意数量参数的方法。此方法需要调用第三方对象的方法，该方法可以使用传递给第一个方法的参数来获取任意数量的参数。

我提到它是一个第三方对象，它被调用以加强被调用方法的签名不能被修改以接受数组或对象的约束。

例子：

```
<?php
class Example {     

    private $thirdPartyObject = null;

    public function methodOne() {
        $arguments = func_get_args();

        $this->thirdPartyObject = new ThirdPartyObject();
        $this->externalObject->methodName(/* pass on variable number of arguments here */);
    }
}

$exampleObject = new Example();
$exampleObject->methodOne('a', 'b', 'c'); 
```

如果我们事先知道传递给的参数数量，`Example->methodOne()`那么我们可以将相同数量的参数传递给`ThirdPartyObject->methodName()`.

如果我们事先不知道传递给的参数的数量`Example->methodOne()`，我们可以将这些参数传递给`ThirdPartyObject->methodName()`吗？

在这种情况下，`ThirdPartyObject->methodName()`使用一个或多个参数调用，例如：

```
<?php
$thirdPartyObject = new ThirdPartyObject();
$thirdPartyObject->methodName('a');
$thirdPartyObject->methodName('a', 'b');
$thirdPartyObject->methodName('a', /* ... */, 'N'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:12:23.197

我认为您正在谈论[call_user_func_array](http://php.net/call_user_func_array) ()。但使用它不是一个好习惯。它很慢。

```
call_user_func_array(array($this->externalObject, "methodName"), $arguments); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:13:50.703

是的，使用[`call_user_func_array()`](http://php.net/call_user_func_array)，像这样：

```
$this->thirdPartyObject = new ThirdPartyObject();
call_user_func_array( array( $this->externalObject, 'methodName'),  $arguments); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:12:07.250

您可以使用**[`call_user_func_array`](http://il.php.net/manual/en/function.call-user-func-array.php)**.

但是，您应该简单地传递参数数组 ( `$arguments`) 并在您的其他方法中使用它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T15:13:24.030

尝试使用类 Example extends ThirdPartyObject 然后为要传递的变量设置默认值。

# ruby-on-rails - 在开发中消失 的线程，而不是生产？

> ID：11507154
> 
> 赞同：0
> 
> 时间：2012-07-16T15:09:07.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用线程来拆分单个（每封电子邮件一个线程）生成的电子邮件（每个 Web 请求 1-4 个）。一切正常，如果我不线程。一切都在生产中。但在开发中，只处理前 1-2 封电子邮件，其余的从不发送。正如线程所预期的那样，不会引发任何错误，但同样，这在生产中非常有效。

任何想法为什么会发生这种情况？

[更新] 使用 Rails 3.2.6

# .net - KCV 值 - 3DES 加密

> ID：11507155
> 
> 赞同：2
> 
> 时间：2012-07-16T15:09:08.597
> 
> 标签：.net, security, encryption

3-DES 加密中的 KCV（密钥校验值）是什么？是否有关于什么是 KCV 以及如何在 3-DES 加密中使用它的良好文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T15:22:06.907

"6.15 密钥校验值
目的：数据用于证明卡/处理器可以访问特定的 DES 密钥值。
格式：二进制，3 个字节
内容：DES 加密 8 个字节的 0 的结果的最左边三个字节相关密钥”（[来源](http://www.scribd.com/doc/19132766/EMV-CPS-v11-20070720)）
__
“任何 DES 密钥的密钥检查值将通过使用 ECB 3DES 和相关密钥加密 8 个字节的“00”来计算”（[来源](https://forums.oracle.com/forums/thread.jspa?messageID=6503685)）
__
“DES/3DES 密钥的密钥校验值（缩写为 KCV 或 CV）是使用该密钥加密 16 个十六进制零的结果。例如，单长度 DES 密钥 0123456789ABCDEF 的密钥校验值等于 D5D44FF720683D0D。这信息在以加密方式传输 DES/3DES 密钥时很有用，通常由发送方发送，以确保接收方正确接收到密钥。” （[来源](http://eftcalculator.codeplex.com/wikipage?title=key%20check%20value)）
__
对我来说，这似乎是某种[校验和](http://en.wikipedia.org/wiki/Checksum)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T18:37:40.380

KCV 用于硬件安全设备的例如 PKCS#11 标准中。想象一下，您需要导入密钥，可能分多个部分。然后您需要验证导入是否成功。您只需对照先前计算的 KCV 值检查全零（或其最左侧部分）的块加密。由于对称算法应该对已知的纯文本/密文攻击无懈可击，因此您不会泄漏有关密钥的任何信息。

对于硬件安全设备，密钥通常不可提取；因此它们可能不适用于散列方法，或者散列方法本身甚至可能不可用。因此，对全零执行密钥加密是创建安全校验和的好方法。对于其他密钥，例如 RSA 密钥，通常使用散列 (SHA-1) 而不是加密来识别密钥（的值）。

在软件中，您可以简单地创建一个仅包含零的块，然后执行 ECB 加密或将 IV 设置为全零的 CBC 加密。然后取 x 个字节作为 KCV。KCV 中的字节数取决于使用的标准。如果您使用少于 3 个字节，即使是意外，您也可能会遇到具有相同值的键。

请注意，KCV 确实会泄露一些信息。它显示了全零块的密文加密是什么样的。如果您使用随机 IV 执行 CBC 加密，那应该没什么大不了的。另一方面，如果您使用具有零 IV 的 CTR 模式加密，您可能会泄漏密钥流的前 3 个字节（因此是明文）。

让我们与 RobIII 保持一致：[来源](ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-11/v2-30/pkcs-11v2-30b-d6.pdf)（注：FTP）

# tcl - Tcl/tk：如何设置写入jpeg文件的质量

> ID：11507159
> 
> 赞同：2
> 
> 时间：2012-07-16T15:09:28.773
> 
> 标签：tcl, jpeg, tk

考虑这个 tcl/tk 代码：它采用 PPM 格式的 RGB 数据并将其保存到 JPG 文件中

```
image create photo tmpImg -data $Data -width $Width -height $Height -format ppm
tmpImg write $FName -format jpeg
image delete tmpImg 
```

我的问题是：如何设置生成的 JPEG 图片的质量？Img::jpeg 中是否有“-quality”选项？我在可用的稀疏文档中找不到任何东西......

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:47:34.057

文档相当稀疏，但在读取和写入 JPEG 图像时似乎支持这些选项：`-optimize`、`-progressive`、`-quality`和`-smooth`. 编写图像时传递它们的方式有点时髦：

```
# Write with 90% quality
tmpImg write $FName -format {jpeg -quality 90} 
```

是的，它们在选项*内部*`-format`传递。（嘿，这个奇怪的黑客不是我发明的！）

# google-app-engine - MapReduce 作业永远运行

> ID：11507167
> 
> 赞同：1
> 
> 时间：2012-07-16T15:10:13.827
> 
> 标签：google-app-engine, google-cloud-storage

我正在使用 Michael Manoochehri 的示例 (http://stackoverflow.com/a/10969900/1387380) 使用 Pipeline 和 Mapreduce API 将数据从 DataStore 传输到 Google Cloud Storage，但我的工作一直在运行并且永远不会完成。在过去的 7 天里，我有一些工作在运行，我什至无法从 MapperPipeline 控制台界面停止。

如何手动或以编程方式停止它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:15:36.007

我认为这种行为是由于当前版本的 App Engine MapReduce 库如何处理 Cloud Storage 输出写入器错误造成的。如果发生这种情况，如上所述，请查看 GAE 日志以了解涉及云存储（或您当前使用的任何输出编写器）的权限或 API 错误。

我们的库的下一次迭代应该会有改进，但目前如果有这样的问题，快速的解决方法是清除你的任务队列，纠正导致错误的问题，然后再次启动管道。

# c++ - 使用 Visual Studio Express 2010 环境

> ID：11507169
> 
> 赞同：0
> 
> 时间：2012-07-16T15:10:18.937
> 
> 标签：c++, visual-studio-2010

我刚开始使用 Visual Studio Express 2010 环境，但我错过了一些我在使用 Netbeans 进行 Java 编程时所了解和喜爱的东西。我想知道如何使用/如果视觉工作室有一些功能是：

“购买期权”：在 Netbeans 中，当我键入“Sting”时。出现一个弹出菜单，让我知道接下来可以放置的所有选项。有没有办法在工作室得到这个？

错误突出显示：当语法错误时，Net bean 可以用红色下划线，并在一定程度上解释原因。有没有办法在工作室得到这个？

自动格式化：Netbeans 可以通过快速单击修复所有缩进和内容，Visual Studio 可以做到这一点吗？

非常感谢任何这些问题的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:16:55.700

我通常按​​：

```
 ctrl + space 
```

用于自动完成，或写入后。您还将获得自动完成组合框

错误突出显示：

我的 VSC++ 2010 Express 确实用红色强调了任何可能的错误

自动格式化：

编辑 -> 格式选择

# ios - 调整 UITableViewCell 高度会导致更新结束时崩溃

> ID：11507170
> 
> 赞同：0
> 
> 时间：2012-07-16T15:10:20.947
> 
> 标签：ios, uitableview

我正在尝试根据显示的文本调整 UITableViewCell 的高度。我希望完全显示文本。

我在 cellForRowAtIndexPath 中创建了一个带有特定 TEXT_CELL 标签的单元格

```
if ([rowType isEqualToString:kTextCell] ) {

        cell = [[[MyTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

        // Create a text view;
        UITextView *newText = [[UITextView alloc] initWithFrame:CGRectZero];
        newText.backgroundColor = [UIColor blueColor];
        newText.tag = kNotesTag;
        newText.editable = NO;
        newText.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

        cell.contentView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        [cell.contentView addSubview:newText];

        [newText release];
} 
```

当我显示单元格时，我会使用 sizeOfFont 函数计算出显示所有文本所需的大小。然后我将该大小设置为一个变量，该变量在 heightOfCell 函数中使用。

```
 UITextView *notes = (UITextView*) [cell viewWithTag:kNotesTag];

    if (notes != nil) {
        notes.text = [self.managedObject dispalyValueForKeyPath:rowKey];

        // resize it to the right height          
        CGRect contentFrame = cell.contentView.frame;

        CGSize textSize = [notes.text sizeWithFont:[UIFont systemFontOfSize:[UIFont systemFontSize]] 
                                 constrainedToSize:CGSizeMake(contentFrame.size.width, CGFLOAT_MAX) 
                                     lineBreakMode:UILineBreakModeWordWrap];   

        CGFloat newHeight = textSize.height + (CELL_CONTENT_MARGIN*2); //some space at the bottom

        CGFloat textHeight = self.storedTextHeight;            

        if (textHeight != newHeight) {

            [notes setFrame:CGRectMake(contentFrame.origin.x, 
                                       CELL_CONTENT_MARGIN+contentFrame.origin.y, 
                                       contentFrame.size.width, newHeight)];

            self.storedTextHeight = newHeight;

            // we reset the height fo the row, so reload it
            [tView beginUpdates];
            [tView endUpdates];  

        } 
```

计算按预期进行，调用 heightForRow 并更新单元格高度。但是，我总是在 [tView endUpdates] 行获得 SIGABT。

错误消息如下。我用谷歌搜索了一堆，但不清楚为什么会这样。不创建或添加单元格。

***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新 (1) 后现有节中包含的行数必须等于其中包含的行数更新前的那个节 (2)，加上或减去从该节插入或删除的行数（0 插入，0 删除），加上或减去移入或移出该节的行数（0 移入，0搬出）。'

感谢您对此的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:12:51.197

您的崩溃报告表明问题可能不是源于您的调整大小策略。它说行数正在改变，但您自己并没有改变行数。这是因为您重新加载表格的方式。

要重新加载表格视图，您应该只调用 [tView reloadData] 而不是`-beginUpdates`and `-endUpdates`。

如果您使用`-beginUpdates`and `-endUpdates`，表格视图会认为您正在手动更改表格，即使用`-deleteRowsAtIndexPaths:withRowAnimation:`和批次。如果您不这样做（如果您自己实际上并没有进行任何更新，而实际上您不是），那么您应该调用`-reloadData`. 如果要使用`-beginUpdates`and `-endUpdates`，则可以在两个调用之间插入：

```
[tView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:firstIndexPathToDelete, 
    someOtherIndexPathToDelete, maybeOneMoreIndexPathToDelete, nil] 
    withRowAnimation:UITableViewRowAnimationFade]; 
```

在调用`-beginUpdates`和之间`-endUpdates`。

编辑：

为了提高 的性能`-reloadData`，您需要确保您没有在 中做很多繁重的工作`-cellForRowAtIndexPath:`，并且您正在重用单元格。网上有很多关于表格视图性能的文章：

[UITableView 的 reloadData 有多贵？](https://stackoverflow.com/questions/595471/how-expensive-is-uitableviews-reloaddata)

[tableView 中的 reloadData 使性能变慢](https://stackoverflow.com/questions/8844788/reloaddata-in-tableview-makes-performance-slow)

[在这里](http://www.cocoabuilder.com/archive/cocoa/116805-reloaddata-but-less-expensive.html)讨论

# php - PHP Heroku：如何添加子目录？

> ID：11507171
> 
> 赞同：0
> 
> 时间：2012-07-16T15:10:29.047
> 
> 标签：php, facebook, heroku

我正在尝试在我的 Heroku 网站上创建一个 ajax 子目录。

问题是，我无法让它工作。我可以去[https://myherokusite.com/images](https://myherokusite.com/images)和[https://myherokusite.com/stylesheets](https://myherokusite.com/stylesheets)，但我无法让[https://myherokusite.com/ajax](https://myherokusite.com/ajax)工作 - 我收到 404 not found 错误！

任何见解都非常感谢。

这是我正在使用的代码：

```
//0.js
var params={
      type: "POST",
      url: "./ajax/getAllRanks.php",
      data: "",
       complete: function(xhr, status){
    var msg=xhr.responseText;
    var ranks=jQuery.parseJSON(msg);
    addRanks2(ranks);
      }
    };
var result=$.ajax(params); 
```

`0.js`我包括`index.php`以下内容：

```
//index.php
<script src="./ajax.0.js"></script> 
```

我根本无法向heroku 添加子目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:06:54.090

我认为这可能是重复的……您可以在[git FAQ 页面](https://git.wiki.kernel.org/index.php/GitFaq#Can_I_add_empty_directories.3F)或下面的链接中获得更多信息。

[如何将空目录添加到 Git 存储库？](https://stackoverflow.com/questions/115983/how-do-i-add-an-empty-directory-to-a-git-repository)

# amazon-s3 - 上传缩略图

> ID：11507173
> 
> 赞同：3
> 
> 时间：2012-07-16T15:10:32.027
> 
> 标签：amazon-s3, plupload

我正在做一个项目，必须将文件上传到 s3。这是我的代码：

```
config = $.extend(Photo.Plupload.config, config);
var uploader = new plupload.Uploader({
            runtimes:'flash,silverlight',
            browse_button:config.select_button,
            max_file_size:config.max_file_size,
            url:'http://' + Photo.Album.Form.bucket + '.s3.amazonaws.com/',
            flash_swf_url:'/assets/plupload/js/plupload.flash.swf',
            silverlight_xap_url:'/assets/plupload/js/plupload.silverlight.xap',
            init:{
                FilesAdded:function (up, files) {
                    /*plupload.each(files, function (file) {
                     if (up.files.length > 1) {
                     up.removeFile(file);
                     }
                     });
                     if (up.files.length >= 1) {
                     $('#' + config.select_button).fadeOut('slow');
                     }*/
                },
                FilesRemoved:function (up, files) {
                    /*if (up.files.length < 1) {
                     $('#' + config.select_button).fadeIn('slow');
                     }*/
                }
            },
            multi_selection:true,
            multipart:true,
            multipart_params:{
                'key':config.key + '/${filename}',
                'Filename':'${filename}', // adding this to keep consistency across the runtimes
                'acl':config.acl,
                'Content-Type':config.content_type,
                'success_action_status':'201',
                'AWSAccessKeyId':Photo.Album.Form.access_key_id,
                'policy':Photo.Album.Form.policy,
                'signature':Photo.Album.Form.signature
            },
            filters:[
                {
                    title:config.filter_title,
                    extensions:config.filter_extentions
                }
            ],
            file_data_name:'file'
        });

        // instantiates the uploader
        uploader.init();

        // shows the progress bar and kicks off uploading
        uploader.bind('FilesAdded', function (up, files) {
            // add pseudofile to the sheet
            console.log(files);
            $.each(files, function (index, value) {
                value.name = "thumb_" + value.name;
            });
            console.log(files);
            console.log(up);
            uploader.start();
        });

        // binds progress to progress bar
        uploader.bind('UploadProgress', function (up, file) {
            /*if (file.percent < 100) {
             $('#progress_bar .ui-progress').css('width', file.percent + '%');
             }
             else {
             $('#progress_bar .ui-progress').css('width', '100%');
             $('span.ui-label').text('Complete');
             }*/
        });

        // shows error object in the browser console (for now)
        uploader.bind('Error', function (up, error) {
            // unfortunately PLUpload gives some extremely vague
            // Flash error messages so you have to use WireShark
            // for debugging them (read the README)

            alert('Что-то непонятное произошло. Firebug в помощь.');
            console.log('Expand the error object below to see the error. Use WireShark to debug.');

            console.log(error);
        });

        // when file gets uploaded
        uploader.bind('FileUploaded', function (up, file) {
            //console.log(up);
            //console.log(file);
            // save file location in the database
            Photo.Album.Form.post(file)
            up.refresh();
        }); 
```

该代码有效。我将一个文件上传到 S3 并得到一个有效的响应，我发送给服务器处理。在客户端调整图像大小也可以。

我现在要做的是将缩略图与原始文件一起发送到服务器。据我所知，无法在 plupload 初始化程序中输入多个调整大小选项。我能做些什么，以便不仅将原始文件，而且将其调整大小的版本发送到 S3？是否也可以直接在亚马逊上调整文件大小？

我试图避免选择下载文件并使我的服务器调整大小并以不同的分辨率再次上传。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T02:25:51.900

`QueueChanged`更好的解决方案是在处理程序中触发`FileUploaded`，然后调用`refresh`. 这将再次启动同一文件的上传，您可以设置在`BeforeUpload`处理程序中读取的属性以调整文件大小。

**警告＃1：**您应该在全尺寸图像之后上传缩略图，否则全尺寸图像可能会出现一些缓冲区问题并被截断。

**警告#2：**这仅在`bind`调用`FileUploaded`发生在之后才有效`uploader.init()`，否则上传者自己的处理程序`FileUploaded`将覆盖`file.status`回`DONE`处理程序之后。

```
uploader.bind('BeforeUpload', function(up, file) {
    if('thumb' in file)
      up.settings.resize = {width : 150, height : 150, quality : 100};
    else
      up.settings.resize = {width : 1600, height : 1600, quality : 100};
}

uploader.bind('FileUploaded', function(up, file) {
    if(!('thumb' in file)) {
        file.thumb = true;
        file.loaded = 0;
        file.percent = 0;
        file.status = plupload.QUEUED;
        up.trigger("QueueChanged");
        up.refresh();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T23:30:28.873

以防万一有人感兴趣，我找到了一个（可能是临时的）解决方案来解决这个问题。

```
 uploader.bind('UploadComplete', function (up, files) {
        console.log(uploader);
            // renew the file object
            if (config.complete == true) {
                // remove all files
                files = [];
                up.settings.multipart_params.key = config.key + '/${filename}';
                up.settings.resize = null;
            } else {
                up.settings.multipart_params.key = config.key + '/thumbs/${filename}';
                up.settings.resize = {width:100, height:100};
                $.each(files, function(index, value){
                    value.percent = 0;
                    value.status = 1;
                });
                config.complete = true;
                up.start();
            }
        }); 
```

所以，1\. 你使一个信号量变量“完成”最初是假的。2.如果不完整->更改设置以生成缩略图并重新启动plupload。将完成设置为真。3\. 如果完成 -> 清空文件队列并重置设置。

丑陋但能胜任。我仍在寻找...更漂亮的解决方案。

# thumbnails - 获取帖子缩略图功能不起作用？

> ID：11507181
> 
> 赞同：0
> 
> 时间：2012-07-16T15:11:08.867
> 
> 标签：thumbnails

我正在使用此功能获取子页面缩略图

```
 <a href="<?php echo get_page_link($page->ID) ?>" title="<?php echo $page->post_title ?>"><?php echo get_the_post_thumbnail($post->ID, 'thumbnail', 'alt="' . $page->post_title . '"'); ?></a> 
```

请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T01:50:17.597

`array`在第三个参数中使用

```
<a href="<?php echo get_page_link($page->ID); ?>" title="<?php echo $page->post_title; ?>"><?php echo get_the_post_thumbnail($post->ID, 'thumbnail', array( 'alt' => $page->post_title , 'title' => $page->post_title ) ); ?></a> 
```

[http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail](http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail)

# sql - 表定义中的列别名？

> ID：11507182
> 
> 赞同：3
> 
> 时间：2012-07-16T15:11:15.763
> 
> 标签：sql, sql-server-2008

我有一个名称不佳的列，我想重命名它。列名是隐藏“陷阱”的责任，因为它的名称具有误导性。

问题是存在使用该列的现有程序。有没有办法在数据库中重命名它并在数据库中创建某种别名，以便现有程序可以使用旧名称查询（不更新或插入）表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T15:15:13.987

您可以创建一个添加列的非常基本的视图：

```
CREATE VIEW dbo.tablename_v
AS
  SELECT a, oldname, newname = oldname FROM ... 
```

或者，如果您真的只需要添加一个计算列`SELECT`：

```
ALTER TABLE dbo.tablename ADD newname AS CONVERT(datatype, oldname); 
```

请注意，在这两种情况下，可更新性都可能是一个问题，INSTEAD OF 触发器可以帮助您解决这些问题。

不过，理想情况下，您会修复架构和代码。您还可以使用一些工具（例如[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)或[Red-Gate 的 SQL Refactor](http://www.red-gate.com/supportcenter/content/SQL_Refactor/help/1.3/SRF_SmartRename)）执行智能重命名，但如果您的程序在其编译代码中引用列，这将变得更加复杂。（使用存储过程的原因之一可能是比在应用程序中嵌入 SQL 更好的选择。）

# php - 在当前日期添加小时

> ID：11507183
> 
> 赞同：0
> 
> 时间：2012-07-16T15:11:16.293
> 
> 标签：php

我正在尝试构建一个具有登录功能的简单系统，其中当用户登录系统时，用户的出勤记录在数据库中。

此外，在此我想添加一个功能，例如当用户延迟登录系统时（我的意思是，如果他/她应该在上午 9 点登录，如果他/她在上午 9 点之后登录，他需要给出原因因为迟到）。

我已经完成了出勤部分，但我陷入了理性的一部分！我实际上不能减去日期，并且可能我也缺乏业务逻辑，任何人都可以指导我完成这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:16:39.240

使用[`date`](http://php.net/date)功能：

```
$h = (int)date("H");
$m = (int)date("i");
if($h>9 || $h==9 && $m>0) {
  // do what you have to do
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:17:43.830

你可以试试：

```
if ( time() > strtotime("07/17/2010 9:00AM") ) {
    // Do something
} 
```

这将检查当前时间是否在 2010 年 7 月 17 日上午 9:00 之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:17:51.983

那是可能的。一个新的出勤表，然后使用让我们说出勤_id 将其与用户表相关联。之后，创建新表以记录出勤名称，如出席_log

# php - 一个mysql操作中的三个WHERE语句作为更好的过滤器是否可能？

> ID：11507184
> 
> 赞同：0
> 
> 时间：2012-07-16T15:11:19.337
> 
> 标签：php, mysql, database, where

我正在尝试比较两个表并处理此操作的结果。

```
SELECT * FROM table1
WHERE table1.czlowiek_id NOT IN (
    SELECT table2.czlowiek_id
    FROM table2
    WHERE table1.czlowiek_id=table2.czlowiek_id
)  
OR table1.czlowiek_id IN (
    SELECT table2.czlowiek_id
    FROM table2
    WHERE table1.czlowiek_id=table2.czlowiek_id
    AND table2.szkolenie_id IN ('$selected_one')
    AND table1.instruktor IN ('$selected_two')
) 
```

是否有一些选项可以处理此查询的结果添加另一个 WHERE 语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:21:11.310

您也许可以使用`LEFT JOIN`. 这将允许您从 table1 中提取 table2 中不存在的所有结果，并从 table1 中提取 table2 中的结果并匹配请求的过滤器。

```
SELECT
    *
FROM
    table1
    LEFT JOIN table2 ON table1.czlowiek_id=table2.czlowiek_id
WHERE
    table2.czlowiek_id IS NULL
    OR (
        table2.szkolenie_id IN ('$selected_one')
        AND table1.instruktor IN ('$selected_two')
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:16:05.333

您可以将您的语句包装在一组括号中，并为其分配一个别名（在关闭的父级之后），并像使用表格一样使用它。（我们称之为内联视图。）

```
SELECT q.*
  FROM (
         SELECT * FROM table1 ... /*your whole query here*/
       ) q
 WHERE ... 
```

您可以在 WHERE 子句中引用内联视图返回的任何列。（这种方法对于返回较小（合理大小）结果集的内联视图可以相对较好地工作。但是对于较大的结果集，在外部查询可以运行之前，需要做很多繁重的工作来“实现”该视图. 这是一个有用的模式，但也有可能滥用这种模式，并编写比不使用内联视图的等效语句执行得更可怕的语句。

但我不确定这是你要问的问题。

您可以在 WHERE 子句中添加另一个谓词吗？

当然你可以......只需添加另一个`AND`或`OR`关键字，然后添加你的条件测试。请注意 AND 和 OR 之间的优先级。使用括号来指定您期望的顺序是一种很好的做法，这是有区别的......

```
( a OR b ) AND c  
a OR ( b AND c) 
```

但我不确定这是否能回答你所问的问题。

您的相关子查询可以使用`EXISTS`and `NOT EXISTS`，而不是`IN`and`NOT IN`

我相信这将返回一个等效的结果：

```
SELECT *
  FROM table1
 WHERE NOT EXISTS 
       ( SELECT 1 FROM table2
          WHERE table2.czlowiek_id=table1.czlowiek_id
       )
    OR EXISTS 
       ( SELECT 1 FROM table2
          WHERE table2.czlowiek_id=table1.czlowiek_id
            AND table2.szkolenie_id IN ('$selected_one')
            AND table1.instruktor IN ('$selected_two')
       ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T16:00:39.450

有另一种表达方式。这个想法是在 czlowiek_id 级别聚合来自 Table2 的信息，保留有关 szkolenie_id 的信息，因为它可能需要。

这会将查询更改为一个组，然后是一个传统的连接和一个相当正常的 where 子句：

```
select table1.*
from table1 left outer join
     (select czlowiek_id,
             (case when table2.szkolenie_id IN ('$selected_one') then 1
                   else 0
              end) as flag
      from table2
      group by czlowiek_id
     ) t2
     ON table1.czlowiek_id = t2.czlowiek_id
WHERE t2.czlowiek_id IS NULL OR
      (t2.flag = 1  AND table1.instruktor IN ('$selected_two') ) 
```

# python - Python Virtualenv - 没有名为 virtualenvwrapper.hook_loader 的模块

> ID：11507186
> 
> 赞同：80
> 
> 时间：2012-07-16T15:11:22.757
> 
> 标签：python, virtualenv, virtualenvwrapper

我正在运行 Mac OS 10.6.8。除了 python 2.6 之外，还想安装 python 2.7 并在新的 virtualenv 中使用 python 2.7。我执行了以下步骤：

我下载了python 2.7并安装了它：

```
http://www.python.org/ftp/python/2.7.3/python-2.7.3-macosx10.6.dmg 
```

然后我运行命令来使用 python2.7 设置一个新的 virtualenv：

```
mkvirtualenv --python=python2.7 mynewenv 
```

我的 .bash_profile 如下所示：

```
# needed for virtualenvwrapper
export WORKON_HOME=$HOME/.virtualenvs
export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python
export VIRTUALENVWRAPPER_VIRTUALENV=/usr/local/bin/virtualenv
source /usr/local/bin/virtualenvwrapper.sh

# Setting PATH for Python 2.7
# The orginal version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH 
```

现在，当我打开控制台时，我收到以下错误消息。

```
ImportError: No module named virtualenvwrapper.hook_loader
virtualenvwrapper.sh: There was a problem running the initialization hooks. If Python could not import the module virtualenvwrapper.hook_loader, check that virtualenv has been installed for VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python and that PATH is set properly. 
```

我还在另一篇文章中发现我应该升级 virtualenvwrapper。那没有帮助。

```
sudo pip install virtualenvwrapper --upgrade 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-16T21:06:47.767

该问题已按照以下步骤解决：

```
#switch the /usr/bin/python link to point to current python link
cd /usr/bin
sudo mv python python.bak
sudo ln -s /Library/Frameworks/Python.framework/Versions/Current/bin/python python 
```

重新排列导出命令，使其位于我的 .bash_profile 文件中的 virtualenv 命令之前：

```
PATH=/Library/Frameworks/Python.framework/Versions/2.7/bin:$PATH
export PATH

# needed for virtualenvwrapper
export WORKON_HOME=$HOME/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh 
```

重新安装 setuptools，轻松安装和 PIP。为了使它们与新的 python 版本正常工作，这显然是必需的：

```
sudo sh setuptools-0.6c11-py2.7.egg

sudo easy_install-2.7 pip

pip install virtualenv 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-09-05T05:00:25.877

此外，如果您有 macports，请确保在 PATH之前和中`/opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin`列出。然后在你中设置以下内容：`/Library/Frameworks/Python.framework/Versions/2.7/bin``/usr/local/bin``.profile`

```
export VIRTUALENVWRAPPER_PYTHON=`which python`
export VIRTUALENVWRAPPER_VIRTUALENV=`which virtualenv`
source `which virtualenvwrapper.sh` 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-01-07T01:10:53.600

对于任何使用**Ubuntu 18.04**和**Python 3+**的人来说，这对我有用：

```
which python3 # outputs /usr/bin/python3 
export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3  
source `which virtualenvwrapper.sh` 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-04-21T18:03:48.693

就我而言，将此行添加到我的 .zshrc 文件中就可以了，

```
export VIRTUALENVWRAPPER_PYTHON=/usr/local/Cellar/python/2.7.13/bin/python2.7 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-21T03:58:32.473

这发生在我身上，我通过重新安装解决了它`pip`。结果是`which pip`给`/usr/bin/pip`了，而`which python`给了`/usr/local/bin/python`。的路径`pip`应该是`/usr/local/bin/pip`。当我更新我的 Python 安装时，这可能会坏掉。

如果您[遵循 pip 文档](https://pip.pypa.io/en/latest/installing.html)，您可以轻松地`pip`为当前工作的 Python 设置重新安装。你需要：

1.  下载[get-pip.py](https://bootstrap.pypa.io/get-pip.py)脚本（直接从`pip`的文档链接）。
2.  运行`python get-pip.py`。

这为我解决了这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-27T16:30:46.410

There are a number of things that can cause this error. If your environment is

*   CentOS 7, with `python3` installed from `epel-release`
*   `pip3` installed with `python3.4 get-pip.py`
*   `virtualenvwrapper` installed with `pip3`
*   A python virtual environment made with `mkvirtualenv -p /usr/bin/python3.4`

Then, for whatever reason, the virtual environment is created without the virtualenvwrapper library. You can solve it by simply installing it again, but this time from within the virtlualenv

```
[user@localhost ~] $ mkvirtualenv -p /usr/bin/python3.4 venv
Using base prefix '/usr'
New python executable in /home/user/.virtualenvs/venv/bin/python3.4
Also creating executable in /home/user/.virtualenvs/venv/bin/python
Installing setuptools, pip, wheel...done.
virtualenvwrapper.user_scripts creating /home/user/.virtualenvs/venv/bin/predeactivate
virtualenvwrapper.user_scripts creating /home/user/.virtualenvs/venv/bin/postdeactivate
virtualenvwrapper.user_scripts creating /home/user/.virtualenvs/venv/bin/preactivate
virtualenvwrapper.user_scripts creating /home/user/.virtualenvs/venv/bin/postactivate
virtualenvwrapper.user_scripts creating /home/user/.virtualenvs/venv/bin/get_env_details
/home/user/.virtualenvs/venv/bin/python3.4: Error while finding spec for 'virtualenvwrapper.hook_loader' (<class 'ImportError'>: No module named 'virtualenvwrapper')
/home/user/.virtualenvs/venv/bin/python3.4: Error while finding spec for 'virtualenvwrapper.hook_loader' (<class 'ImportError'>: No module named 'virtualenvwrapper')

# the virtualenv should now activated
(venv)[user@localhost ~] $ pip install virtualenvwrapper 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-13T22:14:54.547

我只需要确保 /usr/local/bin/python 存在。

对我来说，这很简单：

```
ln -s /usr/local/bin/python2.7 /usr/local/bin/python 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-27T08:07:26.250

我犯了同样的错误 。发现我有旧版本的 pip 。我通过简单地升级 pip 来修复错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-28T09:32:13.593

刚刚在 Centos 7.4 上遇到了这个问题。

以上答案都不适合我的情况。经过相当多的挖掘后，我发现这是因为 python 库中的文件权限过于严格（我猜 Centos 上的 python 安装与其他 POSIX 系统有点不同）。

因此，如果其他一切都失败了，您可能需要检查您的 python 库是否可以被您尝试运行 virtualenvwrapper 的用户读取。

特别检查：（ `/usr/lib/python3.6 /usr/lib64/python3.6` 修改不同python版本的路径）。

如果您看到它`group`并且`others`在那里缺少读取和执行权限，请添加它们： `sudo chmod og+rx -R /usr/lib/python3.6 sudo chmod og+rx -R /usr/lib64/python3.6`

注意：我不确定这是否违反 Centos 安全策略，但只要您不提供权限，它可能是安全的`write`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-15T18:15:25.757

在我的情况下（OS X 10.13.6），这样做了

```
brew install python2 --upgrade 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-30T09:06:28.823

我遇到了与这个问题相同的问题，并且花了很多时间来配置问题所在。我终于发现出了什么问题。

首先，我寻找 virtualenvwrapper 文件夹存在的位置。在我的情况下 /usr/local/lib/python3.7/site-packages。文件夹内是导致错误的 hook_loader.py。

接下来，我使用了python脚本。

```
python3

import sys;print('\n'.join(sys.path)) 
```

我找不到 /usr/local/lib/python3.7/site-packages 目录所以，最后我写了，

```
export PYTHONPATH=$PYTHONPATH:/usr/local/lib/python3.7/site-packages 
```

到 .bashrc 文件。完毕。

[Python 路径的含义](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH)

正如您在上面的链接中看到的，PYTHONPATH 增加了模块的默认搜索路径。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-18T05:33:28.710

Try to uninstall your `virtualenv` and `virtualenvwrapper` and install it again using `pip` in version 2.7 (I think).

I encountered the same error and I just did this and solved my problem.

I using U

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-07-06T19:43:58.480

**卸载**`virtualenvwrapper`软件包后我遇到了这个问题。当我登录到任何用户（或其他用户`su`）时，我会得到：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named virtualenvwrapper.hook_loader                                                                                                                                                                       
virtualenvwrapper.sh: There was a problem running the initialization hooks.                                                                                                                                                      

If Python could not import the module virtualenvwrapper.hook_loader,                                                                                                                                                             
check that virtualenv has been installed for                                                                                                                                                                                     
VIRTUALENVWRAPPER_PYTHON=/usr/bin/python and that PATH is                                                                                                                                                                        
set properly. 
```

~~解决方案是删除该`/etc/bash_completion.d/virtualenvwrapper`文件。~~

**编辑：**

请勿删除上述文件，否则重新安装不会重新创建`virtualenvwrapper`。相反，您需要做的是卸载它时`purge`的包。`virtualenvwrapper`像这样在 Debian 上：

```
apt-get remove --purge virtualenvwrapper 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-23T20:54:10.967

我刚刚安装了 python 3.5，尝试了 virtualenvwrapper，然后遇到了这个问题。我开始意识到 python3.5 安装在`/usr/local/bin/python3.5`而不是`/usr/bin/python3.5`. 所以，我修改了我的 .bash_profile 脚本，如下所示，现在一切似乎都正常了

```
# Setting PATH for Python 3.5
# The orginal version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/3.5/bin:${PATH}"
export PATH
export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python3.5
export WORKON_HOME=$HOME/.virtualenvs
source /Users/bentaub/.virtualenvs/djangodev/bin/virtualenvwrapper.sh 
```

我已经够新手了，不确定从长远来看，python3.5 路径中的“本地”会如何影响我，但就目前而言，它是有效的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-01-22T15:45:22.367

安装 Conda/Anaconda 项目后遇到类似问题。这个问题对解决我在 MAC 上的问题很有帮助。解决这个问题后，我的`.zshrc`相关部分如下所示：

```
export VIRTUALENVWRAPPER_PYTHON=$HOME/Applications/conda/bin/python
source $HOME/Applications/conda/bin/virtualenvwrapper.sh 
```

这取决于我安装 conda 的位置，您必须根据自己的情况来计算。要根据安装 anaconda 的位置获取给定环境的详细信息，可以使用以下命令：

```
$  ~/ -name virtualenvwrapper.sh # to see where you have this. May already be prefilled in your shell profile[.zshrc or .profile]

$ which python   # to know the default python your project or rather where conda has installed python for you 
```

不要忘记卸载和安装 virtualenv 和 virtualenvwrapper，如其他答案中突出显示的那样。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-08-23T14:55:47.423

即使有一个公认的答案，我想我会为我解决这个问题。

首先，我安装了 Python 并刚刚**通过 Homebrew**对其进行了升级。我也在使用 ZSH，所以如果某些位与您的输出不完全匹配，那么这可能就是原因。

通过运行**brew info python**并查看输出，我发现了以下不错的信息：

```
If you wish to have this formula's python executable in your PATH then add
the following to ~/.zshrc:
    export PATH="/usr/local/opt/python/libexec/bin:$PATH" 
```

所以我将它添加到我的终端启动脚本中，如图所示，错误 n 不再显示。

注意：我将它插入到我的 PATH 的另一部分，并且错误在启动时仍然存在。

# javascript - 使用 api v3 将 infowindow 添加到谷歌地图上的循环标记数组

> ID：11507187
> 
> 赞同：3
> 
> 时间：2012-07-16T15:11:26.937
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个在 js 中循环遍历的数组，用于在谷歌地图上放置自定义标记。我需要为每个标记添加一个隐藏的信息窗口，以便在单击它时显示相关的信息窗口。目前我正在做以下事情：

```
for(var i=0; i<google_map_item.length; i++)
    {
        latlon = new google.maps.LatLng(google_map_item[i].lat, google_map_item[i].lon)
        bounds.extend(latlon);
        var iconcolor = google_map_item[i].iconColor;
        marker = new google.maps.Marker({
            map: map,
            position: latlon,
            icon: "https://chart.googleapis.com/chart?chst=d_map_pin_letter_withshadow&chld=" + (i + 1) + "|"+iconcolor+"|000000",
            type: 'flat',
            icon_color: '#ff0000', 
            label_color: '#ffffff', 
            width: '20', 
            height: '20', 
            label_size: '11',
                            clickable: true
        });

        marker.info = new google.maps.InfoWindow({
                        content: '<b>Speed:</b> knots'
                    });

                    google.maps.event.addListener(marker, 'click', function() {
                        marker.info.open(map, marker);
                    });

        map.fitBounds(bounds);
    } 
```

但是，这只会创建 1 个信息框，无论您单击哪个点都会显示。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T15:19:45.057

看看这篇博文：

> [http://you.arenot.me/2010/06/29/google-maps-api-v3-0-multiple-markers-multiple-infowindows/](http://you.arenot.me/2010/06/29/google-maps-api-v3-0-multiple-markers-multiple-infowindows/)

基本上，您正在用新的标记对象覆盖每个标记对象。您需要使每个标记特定于上下文，使用`this`.

您的事件侦听器应如下所示：

```
google.maps.event.addListener(marker, 'click', function() {
    marker.info.open(map, this);
}); 
```

您可能需要进行更多更改以确保为每次迭代创建新对象。试试这个，让我们知道！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:20:55.337

根据右侧的建议： [Google Maps API v3 为每个标记添加 InfoWindow](https://stackoverflow.com/questions/3158598/google-maps-api-v3-adding-an-infowindow-to-each-marker?rq=1)

似乎是您正在寻找的答案（使用函数闭包）。

[工作示例，来自 xml 的信息窗口内容](http://www.geocodezip.com/v3_MW_example_map3.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T22:56:28.040

啊啊啊*这个*问题……

如果您不知道自己在寻找什么，这将是一个艰难的过程。几个月前我遇到了这个问题，无论是在 StackOverflow 上还是在 Google 地图文档中，都很难找到正确的答案。

我不声称知道为什么这段代码比下一个人更有效，但它对我有用，并且通过你的一些调整以适应你的项目，它也应该对你有用。

这是我使用的代码。我的项目中有一些关于变量名的工件，但我试图尽可能地去除其中的大部分，并注释掉你不需要或可以根据你的需要更改的部分InfoWindows 所需的行为。

```
function initMap(){

    bldgNo =     new Object();  // YOU CAN GET
    bldgName =   new Object();  // RID OF ANY
    bldgAddr =   new Object();  // OF THESE...
    bldgGfx =    new Object();  // 
    mainMeter =  new Object();  // JUST REPLACE
    alarmCount = new Object();  // THEM WITH
    latitude =   new Object();  // WHAT YOU'LL
    longitude =  new Object();  // NEED INSTEAD.
    markersArray = [];

    google.maps.Map.prototype.clearOverlays = function() {
        if (markersArray) {
            for (i in markersArray) {
                markersArray[i].setMap(null);
            }
            markersArray.length = 0;
        }
    }

    location1 = new google.maps.LatLng(22.413543,-137.075743);  // IN CASE YOU'LL NEED MORE
    location2 = new google.maps.LatLng(22.628202,-137.426432);  // THAN ONE LOCATION? I DID.
    myOptions = {
        zoom:15,            // BEST IS BETWEEN 12-15
        scrollwheel:false,  // EITHER TRUE OR FALSE
        center:location1,   // ONE OF THE ABOVE LAT/LNG LOCATIONS
        mapTypeId: google.maps.MapTypeId.HYBRID // ROADMAP, SATELLITE, HYBRID, or TERRAIN (all-caps)
    };
    map =       new google.maps.Map(document.getElementById("map_canvas"),myOptions);
    icon =      new google.maps.MarkerImage('images/YOUR-IMAGE-HERE.png',new google.maps.Size(20,34),new google.maps.Point(0,0),new google.maps.Point(10,34));
    shadow =    new google.maps.MarkerImage('images/YOUR-SHADOW-IMG.png',new google.maps.Size(37,34),new google.maps.Point(0,0),new google.maps.Point(10,34));

    infowindow=new google.maps.InfoWindow();

    var i=1;

    $(".building").each(function(i){

        bldgNo[i] =     $(this).children(".bldg-no").html();        // YOU CAN GET
        bldgName[i] =   $(this).children(".bldg-name").html();      // RID OF ANY
        bldgAddr[i] =   $(this).children(".bldg-address").html();   // OF THESE...
        bldgGfx[i] =    $(this).children(".bldg-graphic").html();   // 
        mainMeter[i] =  $(this).children(".main-meter").html(); // JUST REPLACE
        alarmCount[i] = $(this).children(".alarm-count").html();    // THEM WITH
        latitude[i] =   $(this).children(".latitude").html();       // WHAT YOU'LL 
        longitude[i] =  $(this).children(".longitude").html();      // NEED INSTEAD.

        marker=new google.maps.Marker({
            position:new google.maps.LatLng(
                latitude[i],                        // (DEFINED ABOVE)
                longitude[i]                        // (DEFINED ABOVE)
            ),
            map:map,                                // THE DEFAULT
            shadow:shadow,                          // JUST MY NAME FOR IT (DEFINED ABOVE)
            icon:icon,                              // JUST MY NAME FOR IT (DEFINED ABOVE)
            title:bldgName[i]+" \n"+bldgAddr[i],    // FEEL FREE TO CHANGE THIS BASED ON WHAT YOU NEED
            optimized:false                         // YOU MAY OR MAY NOT NEED THIS
        });
        marker.setAnimation(google.maps.Animation.NULL); // NULL, DROP, or BOUNCE (all-caps)

        markersArray.push(marker);

        google.maps.event.addListener(marker,'click',(function(marker,i){
            return function(){
                infowindow.setContent('

                    //
                    // INSERT INFOWINDOW CONTENT HERE
                    //

                ');infowindow.open(map,marker);
            }
        })(marker,i));

        i++;

    });

}
function updateMap(){

    map.clearOverlays();
    infowindow=new google.maps.InfoWindow();
    var i=1;
    $(".building").each(function(i){

        bldgNo[i] =     $(this).children(".bldg-no").html();        // YOU CAN GET
        bldgName[i] =   $(this).children(".bldg-name").html();      // RID OF ANY
        bldgAddr[i] =   $(this).children(".bldg-address").html();   // OF THESE...
        bldgGfx[i] =    $(this).children(".bldg-graphic").html();   // 
        mainMeter[i] =  $(this).children(".main-meter").html(); // JUST REPLACE
        alarmCount[i] = $(this).children(".alarm-count").html();    // THEM WITH
        latitude[i] =   $(this).children(".latitude").html();       // WHAT YOU'LL 
        longitude[i] =  $(this).children(".longitude").html();      // NEED INSTEAD.

        marker=new google.maps.Marker({
            position:new google.maps.LatLng(
                latitude[i],                        // (DEFINED ABOVE)
                longitude[i]                        // (DEFINED ABOVE)
            ),
            map:map,                                // THE DEFAULT
            shadow:shadow,                          // JUST MY NAME FOR IT (DEFINED ABOVE)
            icon:icon,                              // JUST MY NAME FOR IT (DEFINED ABOVE)
            title:bldgName[i]+" \n"+bldgAddr[i],    // FEEL FREE TO CHANGE THIS BASED ON WHAT YOU NEED
            optimized:false                         // YOU MAY OR MAY NOT NEED THIS
        });
        marker.setAnimation(google.maps.Animation.NULL); // NULL, DROP, or BOUNCE (all-caps)

        markersArray.push(marker);
        google.maps.event.addListener(marker,'click',(function(marker,i){
            return function(){
                infowindow.setContent('

                    //
                    // INSERT UPDATED INFOWINDOW CONTENT HERE
                    //

                ');infowindow.open(map,marker);
            }
        })(marker,i));

        i++;

    });

} 
```

我确信需要解决一些问题，但我电脑上的代码（未为您的利益编辑的版本）就像一个魅力。如果我在复制和编辑代码时错误地中断了代码以方便您使用，请告诉我，我会更新我的答案。

干杯!

**编辑：**顺便说一句，这段代码既创建了隐藏的信息窗口（`initMap`函数）又更新了隐藏的信息窗口（`updateMap`函数）。如果您按`updateMap`设定的时间间隔调用该函数，它会更新地图中的信息，这对我的项目来说是必需的。

因此，有些代码块非常相似/重复，因为每次页面的 InfoWindows 更新时，我都需要删除隐藏的块并创建新的块。

您可以通过删除`updateMap`仅`initMap`用于在`updateMap`. 然后只需调用该`initMap`函数，一切就绪！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:41:26.443

我相信处理 InfoWindow 时的常见做法是创建一个全局窗口并将其绑定到每个标记的单击事件，而不是为每个标记创建一个。我用谷歌标记制作了一个简单的应用程序，这就是我使用的。希望这可以帮助！

```
 var globalInfoWindow = new google.maps.InfoWindow();
    var offset = new google.maps.Size(17,-10);
    globalInfoWindow.setOptions({pixelOffset: offset});

    .
    .
    .        

    for(var i in data.locations)
    {
      var latlng = data.locations[i];

      var lat = Number(latlng[0]);
      var lng = Number(latlng[1]);

      var marker_latlng = new google.maps.LatLng(lat, lng);
      var marker = new google.maps.Marker({
        position: marker_latlng,
        icon: markerImg,
        map: map
      });

    // binds the showing of infowindow with click event.

      google.maps.event.addListener(marker, 'click', viewLocPic);
    }

    .
    .
    .
    // 'this' in the function refers to the marker itself.
    function viewLocPic()
    {
      console.log("this refers to " + this);
      globalInfoWindow.setPosition(this.getPosition());
      globalInfoWindow.setContent("<img src='cycling.png'/>");
      globalInfoWindow.open(map, this);
    } 
```

# android - 我应该使用哪个平台来编写移动应用程序？

> ID：11507190
> 
> 赞同：0
> 
> 时间：2012-07-16T15:11:45.357
> 
> 标签：android, iphone, mobile, ipod-touch

我想编写一个移动应用程序，需要一些指导。我想编写一个可以执行以下操作的应用程序；

1.  拍张照片。
2.  将图片分成9个图块
3.  在屏幕上随机放置瓷砖。
4.  让用户解读图片。

现在我对移动编码一无所知。所以我想知道任何这样做的人，什么是最好的平台/框架来编写这个代码，还有一种简单的方法可以在 iphone/ipod touch 和 android 上进行这项工作吗？

感谢您给我的任何建议和指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:15:32.223

[从这里](http://developer.android.com/training/index.html)开始为 android 或[这里](https://developer.apple.com/devcenter/ios/index.action)为 mac。因为android在java中工作而mac在objective-c中工作，所以跨平台是不可能的。你可以很好地转移你的算法，但你必须将你的代码从一个平台重写到另一个平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:16:49.873

Android 应用程序是用 Java 编写的，iPhone 应用程序是用 Objective C 编写的。有一些交叉编译器，但它们通常不是很可靠。分别编写两个独立应用程序的最佳方式。可以使用 NDK 用 C 或 C++ 编写 Android 应用程序，但这仍然需要您编写单独的应用程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:23:16.407

除了你想做的事情之外，还有更多的因素需要考虑。例如，如果您对某些编程语言或您愿意支付开发费用更满意。通常，iOS 开发者帐户需要付费（尽管您可以免费下载 sdk）。如果您对 C 或任何 C 变体感到满意，我建议您使用 iOS。如果您最熟悉 Java 或 OOP（面向对象的编程），那么请使用 Android。

至于处理图像，这在 iOS 上要简单得多（许多直接使用位图的 Android 开发人员很快就会耗尽内存。iOS 在这里有一些更好的内置方法，并且没有堆大小限制）。

最后，你应该考虑你的听众。iOS 上有更好的游戏市场，Android 上有更多实用应用。但很明显，好游戏就是好游戏，如果你做得好，人们就会买它。至于跨平台，您可以使用许多工具或联合语言，但对于如此简单的事情，我建议不要在这些工具上浪费您的时间，并为这两个操作系统提供原生支持。

# c++ - 通过 3d 方库回调成员函数

> ID：11507193
> 
> 赞同：0
> 
> 时间：2012-07-16T15:11:54.250
> 
> 标签：c++, function, callback, member

我正在使用粒子模拟库。通过以下库函数将交互添加到粒子的方式：

```
AddInteraction(ParticleSet particleSet, void(*interaction)(xyz* p, xyz* v)) 
```

我现在想将成员函数传递给 AddInteraction。我已经明白，如果不更改库函数，这是不可能做到的。我想避免更改库，但如果更改很小，我可以邮寄库的作者并要求实施。

我想写一个简单的例子来说明它是如何完成的。不同的解决方案是可能的：

*   Lambda 表达式。这些将是完美的，但是该库使用 CUDA 和 NVCC，它们还不支持 Lamda 表达式。

*   函子。我认为函子可以完成这项工作。但是，我还没有设法让他们按照我想要的方式工作。例如，我无法获得工作的函子列表。这个问题在[http://www.tutok.sk/fastgl/callback.html](http://www.tutok.sk/fastgl/callback.html)中的*Parameterize the Caller*中有所描述：

' 如果一个组件有很多回调关系，那么将它们全部参数化很快就会变得不可行。考虑一个 Button，它想要维护一个动态的被调用者列表，以便在点击事件时得到通知。由于被调用者类型内置于 Button 类类型中，因此该列表必须是同质的或无类型的。

我不得不承认我不理解该网站上写的所有内容，因此那里可能会有答案。

*   使用 3d 派对库。例如[http://www.tutok.sk/fastgl/callback.html](http://www.tutok.sk/fastgl/callback.html)上描述的“使用模板函子库的回调” ，或使用 Boost::Function。但是，这些可能需要对我正在使用的粒子库进行重大更改，对吧？

有没有其他选择？或者有没有办法让上述解决方案之一起作用？

非常感谢！

编辑：

感谢您的建议。他们有帮助，但我看不到他们如何为我的问题提供完整的解决方案。具体来说，我正试图让它发挥作用：

```
std::vector<void(*)(xyz*,xyz*)> interactionList;

void AddInteraction(void(*func)(xyz*,xyz*))
{
    interactionList.push_back(func);
}

void Simulate()
{
    for(size_t i = 0; i < interactionList.size(); i++)
    {
        interactionList[i](0,0); //Would normally be called for every particle
    }
}

class Cell {
public:
    void UpdateParticle(xyz* p, xyz* v);
    Cell()
    {
        AddInteraction(this->UpdateParticle); //Does not work
    }
};

int main()
{
    Cell cell1;
    Cell cell2;

    for(int i = 0; i < 100; i++)
    {
        Simulate();
    }

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T15:45:39.577

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:28:56.810

您描述的内容是不可能的，因为库不知道它必须将`this`参数传递给您的成员函数。如果`interaction`接受为用户保留的参数，您可以这样做。如果您在任何给定时间调用单个对象实例`AddInteraction`，则可以存储指向该实例的指针：

```
Object *Object::only_instance;

void Object::AddInteractionCaller() {
   only_instance = this;
   AddInteraction(set, interaction_fn); 
}

void interaction_fn(xyz* p, xyz* v) {
  only_instance->interaction(p, v);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:40:49.310

通常，回调函数有一个 void * 参数，它允许客户端代码作为它可能需要的任何其他信息的占位符。

这样，客户端代码可以传入他们想要的任何内容，并在调用回调时将其重新转换回原始类型。请注意，调用代码知道原始类型。

这种类型的接口只允许 C 代码工作，但如果需要，可以很容易地将其包装在 C++ 对象中。至少，图书馆作者应该提供这个。

**编辑回答 OPs 评论**
下面我已经适当地修改了 Cell 类。

```
class Cell  
{ 
public:
  static void UpdateParticle(void *stuff, xyz* p, xyz* v)  // this has to be static as others have mentioned, note the additional void * argument
  {
      Cell * c = (Cell *) stuff;
      // do work
  }  

  Cell()
  {
      AddInteraction(this, UpdateParticle); // note this takes a two items, both of which have to be saved for future use by AddInteraction and utilized by Simulate
  }
}; 
```

# wget - wget - 下载子目录

> ID：11507198
> 
> 赞同：45
> 
> 时间：2012-07-16T15:12:06.857
> 
> 标签：wget

如何使用 wget 仅下载子目录？我可以指定我需要下载的子目录吗？

谢谢！

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-11-18T14:48:35.217

你可以做：

`wget -r -l1 --no-parent http://www.domain.com/subdirectory/`

在哪里：

```
-r: recursive retrieving
-l1: sets the maximum recursion depth to be 1
--no-parent: does not ascend to the parent; only downloads from the specified subdirectory and downwards hierarchy 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-19T08:46:20.307

```
$ wget -m -p -E -k -K -np {URL Address} 
```

您可以使用手册页了解选项的详细信息。

**注意：**使用之前的选项，将下载文件索引！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-19T21:14:05.507

我能够使用的好信息。我试过：

```
wget -r -l1 --no-parent http://www.domain.com/subdirectory/

```

在包含多个格式为 name.subname.subname2.etc.htm 或 .html 的文件的站点上。为了捡起这些，我跑了：

```
wget -r --no-parent http://www.domain.com/subdirectory/

```

这很好用。

# tabs - 将自定义选项卡添加到 crm 主页而不是 crm 2011 中的实体

> ID：11507201
> 
> 赞同：1
> 
> 时间：2012-07-16T15:12:17.240
> 
> 标签：tabs, custom-controls, customization, dynamics-crm-2011

我已经搜索并看到仅指南如何将选项卡添加到主页和所有实体或仅添加到某些特定实体，如下所示：[http ://dynamicscrm2011.wordpress.com/tag/add-a-custom-button-to -自定义选项卡/](http://dynamicscrm2011.wordpress.com/tag/add-a-custom-button-to-custom-tab/)

知道如何将自定义选项卡添加到我的主页而不出现在任何其他实体中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:52:33.903

只有这样，您才需要将其添加到仪表板实体中。

[http://social.microsoft.com/Forums/en/crmdevelopment/thread/e9b407f4-2234-425b-9977-b0bae7f8e457](http://social.microsoft.com/Forums/en/crmdevelopment/thread/e9b407f4-2234-425b-9977-b0bae7f8e457)

# drupal - Drupal 7 从 CKEditor 浏览媒体

> ID：11507204
> 
> 赞同：2
> 
> 时间：2012-07-16T15:12:30.540
> 
> 标签：drupal, drupal-7, drupal-modules

在我们的 Drupal 7 安装中使用 CKEditor 中的添加媒体按钮，然后单击 Library 选项卡时，我们得到以下对话框：

![浏览媒体](../Images/f1a19c28ebcbfce57865b0e30bd6aa37.png)

我们想要的是能够拥有过滤器等，就像 Drupal 媒体模块页面的截图一样：

![在 Drupal 媒体模块中查看库](../Images/9d8e0c9d9a4c4da6902485d80800397f.png)

到目前为止，我们无法弄清楚如何配置媒体模块以拥有这个额外的 View Library 选项。

当用户单击 CKEditor 中的链接按钮时，我们还想要一个类似的功能。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T17:00:57.000

屏幕截图来自（不稳定的）2.x 分支。[此处](http://groups.drupal.org/node/215218)记录了 1.x 和 2.x 之间的更改，其中之一是：

> 媒体浏览器中的库选项卡正在转换为默认启用的名为“视图库”的视图驱动选项卡。已弃用的旧库选项卡名为“库”。这意味着 Views 现在也是 2.x 的依赖项。

底线，如果你想要这个功能，你需要安装模块的不稳定分支（虽然我真的不建议这样做，没有很多模块被标记为“不稳定”，所以你应该使用任何一个极其谨慎）。

我认为没有任何（现有）方法可以强制标准 CKEditor 链接按钮使用媒体弹出窗口，因为它是由 CKEditor 模块本身提供的。我认为您需要为 CKEditor 和 Media 编写一个自定义插件才能获得该功能。

# cakephp-1.3 - 在 cakephp 中选择复选框值

> ID：11507205
> 
> 赞同：0
> 
> 时间：2012-07-16T15:12:34.233
> 
> 标签：cakephp-1.3

我正在从另一个模型加载我的表单的默认值并像这样加载它们

```
<?=$this->Form->input('TimeAlgo.association', array('type' => 'text','value'=>$defaults['TimeAlgoDefault']['association']))?> 
```

但我有复选框以默认值加载我有它在我的形式像这样

```
<?=$this->Form->input('TimeAlgo.day_time', array('type' => 'radio','options'=>array('day'=>'Day','time'=>'Time')))?> 
```

请告诉我如何加载它的一个值，即日期，时间

```
`$defaults['TimeAlgoDefault']['dayTime']` 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:12:56.480

我没有得到打开右括号的“”，也没有得到缺少的“；” 最后，但默认选项设置如下：

```
$this->Form->input('TimeAlgo.day_time', array(
                                  'type' => 'radio',
                                  'options'=>array('day'=>'Day','time'=>'Time'),
                                  'default' => 'Day'
                   )); 
```

[检查文档](http://api13.cakephp.org/class/form-helper#method-FormHelperinput)。

例如，如果您想为选择字段设置 emtry 选择，您可以使用

```
empty 
```

钥匙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:55:35.913

总是尝试从控制器级别设置默认值

```
if (!empty($this->data)) {
    //process form
} else {
    $this->data['ModelName']['fieldName'] = 'defaultvalue';
} 
```

这比在视图中做的更干净——尤其是对于更动态的表单

# c - RTNL 是什么意思？

> ID：11507206
> 
> 赞同：13
> 
> 时间：2012-07-16T15:12:37.380
> 
> 标签：c, linux, networking, kernel, connman

我正在查看 Connection Manager (ConnMan) 源代码，它是 Linux（类）系统管理网络的工具。（未记录的）源文件之一具有模糊的命名`rtnl.c`. 有人知道，RTNL 是什么意思吗？谷歌搜索它不是很有效。每个真正连接到网络和 RTNL 的站点似乎都是由已经知道这意味着什么的人编写的。

因为在一个答案中，有一些关于一些不同的 ConnMan 来源的讨论，所以我使用的来源是：

git://git.kernel.org/pub/scm/network/connman/connman.git

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T15:21:16.813

如果您查看源代码，它说它是用于“Routing Netlink”的。netlink 手册页说“Netlink 用于在内核和用户空间进程之间传输信息。”

rtnl.c 的源代码只有 50 行，阅读它的用途似乎很明显......

# java - 为什么我没有从我的纪元值中获得正确的人类可读的日期和时间值？

> ID：11507208
> 
> 赞同：2
> 
> 时间：2012-07-16T15:12:49.877
> 
> 标签：java, datetime, epoch

我想将我的纪元值批量转换为人类可读的日期和时间值。取值 1342179766，我在[epoch-converter](http://www.epochconverter.com/)上将其转换并得到 Fri, 13 Jul 2012 11:42:46 GMT 作为我知道是正确的答案。现在我使用他们网站上提供的 java 代码将其转换为日期和时间格式，但我得到了错误的答案。代码：

```
String date = new java.text.SimpleDateFormat("MM/dd/yyyy HH:mm:ss").format(new java.util.Date (1342179766*1000));
System.out.println(date); 
```

输出：

```
12/07/1969 09:40:02 
```

我查看了有关 stackoverflow 的其他问题，但大多数情况下此代码随处可见。我发现了 2-3 个其他代码，但它们都给了我相同的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:17:40.573

我想你应该使用`1342179766L*1000L`而不是`1342179766*1000`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T15:18:09.517

您的问题来自于 Java 正在尝试进行整数乘法`1342179766*1000`然后将*其*转换为 long 的事实。如果您明确地将其设为 long，则它可以工作：

```
String date = new java.text.SimpleDateFormat("MM/dd/yyyy HH:mm:ss").format(new java.util.Date (1342179766L*1000));
System.out.println(date); 
```

# php - Magento，新订单电子邮件模板总数

> ID：11507210
> 
> 赞同：1
> 
> 时间：2012-07-16T15:12:53.147
> 
> 标签：php, magento

我正在为商店创建一些新的电子邮件模板。

我有 95% 的模板工作我唯一的问题是，在显示订单项目的表格中，我似乎无法找到提取总计的文件，链接到显示以下问题的图像。

![在此处输入图像描述](../Images/3427a958881c950fb05b2a0a1078681f.png)

自然，我希望能够在该区域添加一些内联代码，因为它是用于电子邮件的，并且还可以更改左侧的标签。我已经设法将总计区域跟踪到以下文件

> 模板/销售/订单/totals.phtml

我不知道这会调用什么文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:20:42.933

如果你看

```
layout/sales.xml:268 
```

您将看到布局句柄 sales_email_order_items。里面有一个块“order_totals”，它有那个模板。要向电子邮件中添加新总数，您只需将其添加为该电子邮件的子项即可。在第 275 行，您可以看到他们添加了一个名为“tax”的块。

在 totals.phtml 文件中，您可以看到它调用 $this->getTotals() 作为 foreach 的一部分。该方法定义在

```
Mage/Sales/Block/Order/Totals.php:281 
```

这只是返回已经定义的总数。此数据由已定义的 config.xml 文件填充：

```
<global><sales><quote><totals>... 
```

跳回到totals.phtml，它检查totals 是否有为它定义的块。这将是 config.xml 文件中的一个字段。如果您有一个要自定义的总计模型，您可以这样做。

否则，在呈现页面之前（在第 44 行调用 _beforeToHtml()），它会在子块上进行交互，如果它们响应方法“initTotals”，则调用该方法。该方法应该创建一个代表您的总数的对象并将其添加到父级。例如，这是我最近编写的总计块的代码（基于我无法公开发布的代码）：

```
public function initTotals()
{
    if ((float)$this->getParentBlock()->getSource()->getMytotalAmount() == 0) {
        return $this;
    }
    $total = new Varien_Object(array(
        'code'      => $this->getNameInLayout(),
        'block_name'=> $this->getNameInLayout(),
        'area'      => $this->getArea()
    ));
    $after = $this->getAfterTotal();
    if (!$after) {
        $after = 'subtotal';
    }
    $this->getParentBlock()->addTotal($total, $after);
    return $this;
} 
```

我希望这会有所帮助。

# jpa-2.0 - JPA/Hibernate、Spring Roo：Repository 和 ActiveRecord 可以共存吗？

> ID：11507212
> 
> 赞同：0
> 
> 时间：2012-07-16T15:12:56.503
> 
> 标签：jpa-2.0, spring-roo, spring-data-jpa

我有以下 Spring MVC 控制器，它同时使用存储库和活动记录。我系统地得到以下异常：

```
Caused by: javax.persistence.EntityNotFoundException: Unable to find trc.suivi.domain.Destinataire with id 892
    at org.hibernate.ejb.Ejb3Configuration$Ejb3EntityNotFoundDelegate.handleEntityNotFound(Ejb3Configuration.java:137)
    at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:233)
    at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:285)
    at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)
    at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)
    at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:1038)
    at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:630)
    at org.hibernate.type.EntityType.resolve(EntityType.java:438)
    at org.hibernate.engine.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:139)
    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:982)
    at org.hibernate.loader.Loader.doQuery(Loader.java:857)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2542)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:459)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:365)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:246)
    ... 78 more 
```

**请注意，该行确实存在于数据库中！**

这是我的控制器代码：

```
@RequestMapping("/plis")
@Controller
@RooWebScaffold(path = "plis", formBackingObject = Pli.class)
@RooWebFinder
public class PliController {

    @Autowired
    private PliRepository pliRepository;

    @RequestMapping(params = { "find=ByMultiField", "form" }, method = RequestMethod.GET)
    public String findPlisByMultiFieldForm(Model uiModel) {
        populateMultiFieldForm(uiModel);
        return "plis/findPlisByMultiField";
    }

    @RequestMapping(params = "find=ByMultiField", method = RequestMethod.GET)
    public String findPlisByMultiField(@RequestParam("identifiant") String identifiant, Model uiModel) {
        uiModel.addAttribute("plis", pliRepository.findPlisByMultiFieldQuery(identifiant, null, false, false, null, false, null, null).getResultList());//REPOSITORY USAGE
        return "plis/list";
    }

    void populateMultiFieldForm(Model uiModel) {
        uiModel.addAttribute("pli_datereception_date_format", DateTimeFormat.patternForStyle("M-", LocaleContextHolder.getLocale()));
        uiModel.addAttribute("conteneurnums", ConteneurNum.findAllConteneurNums());//ACTIVE RECORD USAGE
        uiModel.addAttribute("statutplis", Arrays.asList(StatutPli.values()));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:38:51.670

简短的回答是肯定的：存储库和 ActiveRecord 可以共存。我的问题可能是由于某些版本问题。

# php - Symfony2 - 如何将复选框/收音机的标签和输入放在同一行？

> ID：11507217
> 
> 赞同：20
> 
> 时间：2012-07-16T15:13:16.887
> 
> 标签：php, symfony, twig

在我的表单中，我有一些复选框，但默认情况下，**我有**：

*   第一个收音机小部件
*   第一个标签
*   第二个收音机小部件
*   标签

这是 SYmfony2 生成的 html 代码：

```
 <div>
    <input ...>
    <label ...></label>
    <input ...>
    <label ...></label>
  </div> 
```

我**想要**的是：

第一个收音机小部件第一个标签
第二个收音机小部件第二个标签

html代码将是：

```
 <label .....><input ....></label> 
```

我想我必须覆盖choice_widget，但不知道如何将输入和标签放在同一行

这是我可能需要覆盖的choice_widget：

```
 {% block choice_widget %}
        {% spaceless %}
            {% if expanded %}
                <div {{ block('widget_container_attributes') }}>
                   {% for child in form %}
                      {{ form_widget(child) }}  {{ form_label(child) }}
                   {% endfor %}
                </div>
            {% else %}
                <select {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
                {% if empty_value is not none %}
                     <option value="">{{ empty_value|trans }}</option>
                {% endif %}
                {% if preferred_choices|length > 0 %}
                    {% set options = preferred_choices %}
                    {{ block('widget_choice_options') }}
                        {% if choices|length > 0 and separator is not none %}
                            <option disabled="disabled">{{ separator }}</option>
                       {% endif %}
                {% endif %}
                {% set options = choices %}
                {{ block('widget_choice_options') }}
                </select>
           {% endif %}
      {% endspaceless %}
   {% endblock choice_widget %} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-19T23:12:28.923

我有同样的问题，我无法找到解决方案，所以我自己解决了。您是正确的，您确实需要覆盖该`{% block choice_widget %}`块。第一步是从打印出单独标签`{{ form_label(child) }}`的部分中删除该行。`{% if expanded %}`

```
{% block choice_widget %}
{% spaceless %}
    {% if expanded %}
        <div {{ block('widget_container_attributes') }}>
        {% for child in form %}
            {{ form_widget(child) }}
        {#  {{ form_label(child) }} <--------------------- remove this line #}  
        {% endfor %}
        </div>
    {% else %}
    <select {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
        {% if empty_value is not none %}
            <option value="">{{ empty_value|trans }}</option>
        {% endif %}
        {% if preferred_choices|length > 0 %}
            {% set options = preferred_choices %}
            {{ block('widget_choice_options') }}
            {% if choices|length > 0 and separator is not none %}
                <option disabled="disabled">{{ separator }}</option>
            {% endif %}
        {% endif %}
        {% set options = choices %}
        {{ block('widget_choice_options') }}
    </select>
    {% endif %}
{% endspaceless %}
{% endblock choice_widget %} 
```

现在您只需要处理打印`{% block checkbox_widget %}`块中的标签。

```
{% block checkbox_widget %}
{% spaceless %}
    <label  for="{{ id }}"><input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans }}</label>
{% endspaceless %}
{% endblock checkbox_widget %} 
```

您将需要这样做，`{% block radio_widget %}`因为它现在不会有标签。

```
{% block radio_widget %}
{% spaceless %}
    <label  for="{{ id }}"><input type="radio" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans }}</label>
{% endspaceless %}
{% endblock radio_widget %} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-22T10:00:37.397

在 Alberto Gaona 和 James 的帮助下，Symfony 2.4 集成 BS3 收音机和复选框的正确解决方案如下：

在您看来，您有：

```
{% form_theme form 'AcmeDemoBundle:Form:fields.html.twig' %}

// A radio or checkbox input
{{ form_widget(form.example) }} 
```

然后在你的 fields.html.twig （覆盖[https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig)；见[http： //symfony.com/doc/current/cookbook/form/form_customization.html](http://symfony.com/doc/current/cookbook/form/form_customization.html) )

```
{# src/Acme/DemoBundle/Resources/views/Form/fields.html.twig #}

{% block choice_widget_expanded %}
{% spaceless %}
    <div {{ block('widget_container_attributes') }}>
    {% for child in form %}
        {% if multiple %}
            <div class="checkbox">
        {% else %}
            <div class="radio">
        {% endif %}

        {{ form_widget(child) }}
        </div>
    {% endfor %}
    </div>
{% endspaceless %}
{% endblock choice_widget_expanded %}

{% block checkbox_widget %}
{% spaceless %}
{% if label is empty %}
    {% set label = name|humanize %}
{% endif %}
    <label  for="{{ id }}">
        <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans({}, translation_domain) }}
    </label>
{% endspaceless %}
{% endblock checkbox_widget %}

{% block radio_widget %}
{% spaceless %}
{% if label is empty %}
    {% set label = name|humanize %}
{% endif %}
    <label  for="{{ id }}">
        <input type="radio" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans({}, translation_domain) }}
    </label>
{% endspaceless %}
{% endblock radio_widget %} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-15T14:24:20.683

注意：更新了 Symfony 2.3 的 Bob F 解决方案（参见[https://github.com/symfony/symfony/blob/2.3/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig](https://github.com/symfony/symfony/blob/2.3/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig)）：

覆盖choice_widget_expanded：

```
{% block choice_widget_expanded %}
{% spaceless %}
    <div {{ block('widget_container_attributes') }}>
    {% for child in form %}
        {{ form_widget(child) }}
    {% endfor %}
    </div>
{% endspaceless %}
{% endblock choice_widget_expanded %} 
```

覆盖复选框（引导样式）：

```
{% block checkbox_widget %}
{% spaceless %}
    <label  for="{{ id }}" class="checkbox {% if checked %}checked{% endif %}" ><span class="icons"><span class="first-icon fui-checkbox-unchecked"></span><span class="second-icon fui-checkbox-checked"></span></span><input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans }}</label>
{% endspaceless %}
{% endblock checkbox_widget %} 
```

覆盖单选按钮

```
{% block radio_widget %}
{% spaceless %}
    <label  for="{{ id }}"><input type="radio" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans }}</label>
{% endspaceless %}
{% endblock radio_widget %} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T07:26:37.857

呈现标签时，它将包含一个`for`属性 - 这将链接`label`到`input`-[请参阅`label`此处](https://developer.mozilla.org/en/HTML/Element/label)的文档将输出更改为您建议的内容只是链接`label`和的另一种方式`input`

如果您希望标签显示在输入的左侧，您需要将模板更改为：

```
{% for child in form %}
   <div>
      {{ form_label(child) }}  {{ form_widget(child) }} 
   </div>
{% endfor %} 
```

渲染`label`之前`input`，然后创建以下输出

```
<div>
  <div>
    <label ...></label>
    <input ...>
  </div>
  <div>
    <label ...></label>
    <input ...>
  </div>
</div> 
```

然后，您可以应用一些 CSS 样式使其显示为内联：

```
​div label {
    display: inline-block;
    width: 200px;
}​ 
```

默认情况下 - 没有任何 CSS`label`将在`input`此 HTML 布局之前对齐 - 但`inline-block`允许您也使用该`width`属性来确保所有字段都正确排列 - 无论标签文本的长度如何

[这里的工作示例](http://jsfiddle.net/MjhAR/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T18:17:05.293

~~将表单输入放在标签标签内会导致 HTML 损坏。~~

你的目标是什么？如果您只是想让标签和输入显示在浏览器的同一行，那么您可以使用 css：

```
input, label {
 display: inline;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-06T10:14:33.830

在 Symfony 3+ 中，您可以简单地通过 label_attr 将 radio-inline 类传递给您的表单：

```
$builder->add('type', ChoiceType::class, [
    'expanded' => true, 
    'label_attr' => ['class' => 'radio-inline']
]); 
```

无需创建自定义小部件等等...

您可以通过查看供应商目录（src/Symfony/Bridge/Twig/Resources/views/Form/bootstrap_4_layout.html.twig）中 Symfony 提供的 bootstrap_4_layout.html.twig 来猜测这些内容

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-04T02:00:31.857

在 Symfony 2.4 中，这并不像预期的那样工作。

```
{% block checkbox_widget %}
{% spaceless %}
  <label  for="{{ id }}"><input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans }}</label>
{% endspaceless %}
{% endblock checkbox_widget %} 
```

...标签不可用。您需要添加以下内容：

```
{% if label is empty %}
  {% set label = name|humanize %}
{% endif %} 
```

所以一个完整的解决方案是：

```
{% block checkbox_widget %}
{% if label is empty %}
  {% set label = name|humanize %}
{% endif %}
{% spaceless %}
  <label  for="{{ id }}"><input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans }}</label>
{% endspaceless %}
{% endblock checkbox_widget %} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-25T16:53:16.373

标签非常简单，所以我个人更喜欢手动渲染它。

在你的树枝上又快又脏：

```
<label for="field">
    {{ form_widget(form.field) }} Field Label
</label> 
```

如果 Symfony 有一个更简单的解决方案，我会很高兴的。

当然，上面的答案可能更优雅，什么不是。;)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-08-02T14:23:06.883

您可以像这样覆盖 form_row 函数（修改为适合 twitter bootstrap 的寺庙标签/复选框）：（在该示例中它是“复选框”，但我认为使用“收音机”它的工作原理相同）

```
{% extends 'form_div_layout.html.twig' %}

{% block field_row %}
{% spaceless %}
    {% if 'checkbox' in types %}
        {% if not compound %}
            {% set label_attr = label_attr|merge({'for': id}) %}
        {% endif %}
        {% if required %}
            {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
        {% endif %}
        {% if label is empty %}
            {% set label = name|humanize %}
        {% endif %}
        <label class="checkbox" {% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>{{ label|trans({}, translation_domain) }}
           {{ block('checkbox_widget') }}
        </label>
    {% else %}
        {{ parent() }}
    {% endif %}
{% endspaceless %}
{% endblock field_row %} 
```

# .net - 我可以将我的控制台构建为“任何 cpu”，但使其在开发中以 32 位的形式运行吗？

> ID：11507218
> 
> 赞同：0
> 
> 时间：2012-07-16T15:13:20.313
> 
> 标签：.net, console, x86, 64-bit, edit-and-continue

我这个有点奇怪的问题的原因很简单。我想在我的开发盒上以 32 位的方式运行我的控制台，仅仅是因为编辑和继续的便利，这可以节省愚蠢错误的时间——只需当场修复它们并继续。

但我也不想更改构建配置，因为它处于源代码控制之下，我会忘记将其设置回“任何 cpu”，如果我将其设置为，我们最终会部署错误的映像版本“x86”。

有没有办法让我两全其美？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:47:37.407

您可以为调试和发布设置单独的项目配置，也可以创建自己的。我将创建第三个名为 Local 的项目配置并将该平台设置为 32 位 (x86)。您可以使用该配置进行工作。当您需要在构建之前创建可部署版本时切换到发布。

作为额外的保护措施，您可以将您的 SVN 设置为“忽略”您之前创建的本地构建文件夹，以确保它不会进入您的 SVN。

可以在 Visual Studio 中绿色“播放”按钮旁边的下拉菜单中访问项目配置设置。它默认读取“Debug”，或者有时会说“Release”。

有什么帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:07:37.717

最后，我选择了以下解决方案：

在我的解决方案中添加一个名为 32bitLauncher 的新控制台应用程序项目。将此构建配置设置为仅针对 x86。然后将我的各种批处理类及其主要方法公开，并在启动器中定义多个入口点，如下所示：

```
class Prefill
{
    static void Main(string[] args)
    {
        PrefillBatch.Main(args);
    }
}

class Correspondence
{
    static void Main(string[] args)
    {
        CorrespondenceBatch.Main(args);
    }
} 
```

现在我可以在批量切换时在启动器的属性页中选择启动对象，实际上比更改启动项目更方便（因为我无论如何都需要进入属性页设置命令行参数）。即使在 64 位硬件上，这也会强制执行 32 位，你瞧，我可以编辑并继续！

# tfs - TFS - 我的 PC 已更改，分配给源代码管理的工作区也已更改

> ID：11507220
> 
> 赞同：1
> 
> 时间：2012-07-16T15:13:23.463
> 
> 标签：tfs

最近我从 TFS 源代码控制下载了我正在开发的应用程序。我现在正在使用一台新 PC，工作区的默认名称似乎是 PC 的名称。因此，之前在我以前的 PC 上签出代码的地方，源代码表明该代码已被另一个用户签出，并已分配给以前的工作空间。如何将源代码分配更改为我的新工作区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:36:46.460

尝试打开 Visual Studio 命令提示符并键入：

```
tf workspaces /updateComputerName:OLDCOMPUTERNAME /s:”addressoftfsserver” 
```

您可能需要管理员权限，我不完全确定。

# c++ - C++：内存映射/缓存库？

> ID：11507222
> 
> 赞同：1
> 
> 时间：2012-07-16T15:13:33.007
> 
> 标签：c++, caching, memory-management, mmap, hpc

**任何人都可以推荐一个使缓存/内存映射易于使用的库吗？**

内存管理*不是*我项目的重点 - 这是我遇到的最后一分钟问题。因此，我正在寻找一个相对快速和简单的解决方案，而不是尝试学习缓存和内存映射的所有细节。

我正在寻找一个可以自动（在后台）从文件中写入和加载（缓存）的库。

* * *

理想情况下，我正在寻找以下内容：我可以简单地从“地图”访问/插入/删除，而无需从文件中保存/加载。如果 my`std::map`比较小，那么这是直接来自堆的。如果我`map`变得很大，那么它是内存映射的，并且所有加载/保存（来自 mmap 文件）功能都是“在后台”执行的，所以我仍然只需要做 `mymap.find(whatever)`等等。

（我的多处理器程序中的每个节点都会产生大量计算。当我尝试时`all_gather`，程序崩溃。没有一个节点有足够的内存来保存所有节点组合的结果。因此，我正在寻找某种内存映射/缓存策略。）

* * *

这是在超级计算机上运行的（因此，OS = UNIX）。每个节点有 16GB 内存。有一个使用 eSATA 的暂存空间（用于写入临时文件的巨大空间）。（我设想将有效的内存映射到这个暂存空间作为解决方案）

# maps - 谷歌地图：定位地面覆盖

> ID：11507223
> 
> 赞同：0
> 
> 时间：2012-07-16T15:13:42.133
> 
> 标签：maps, overlay, positioning

我有一些图片要叠加在 Google 地图的顶部。

我的问题是我不知道图像左上角和右下角的确切纬度/经度。我也必须知道旋转。

有没有一种工具可以让我通过 GUI 在谷歌地图上放置一个图像并告诉必要的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:57:15.247

现在我为此使用 Google 地球

# opencv - OpenCV：改变深度和对数变换

> ID：11507224
> 
> 赞同：3
> 
> 时间：2012-07-16T15:13:43.500
> 
> 标签：opencv, depth

我正在尝试学习 OpenCV，我想应用这个简单的公式： ![在此处输入图像描述](../Images/ef3b83582413fb01a48c59ca5ab8ff60.png)

这是一个逐像素操作，将像素从*r*转换为*s*。

这是我的代码：

```
int main(int /*argc*/, char** /*argv*/) {

    Mat _img = imread("lena.jpg"); 
    cvtColor(_img, img, CV_32F);

    cout << "original image size: " << img.rows << " " << img.cols << endl;
    cout << "original type: " << img.type() << endl;
    cout << "original depth: " << img.depth() << endl;

    Mat _src = img.clone();
    _src += 1;
    log(_src, logContrast);
    logContrast *= log_c;

    /// ... 
```

我得到这个错误：

```
OpenCV Error: Assertion failed (depth == CV_32F || depth == CV_64F) in log, file /home/user/Documents/Code/OpenCV-2.3.1/modules/core/src/mathfuncs.cpp, line 1772
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/alberto/Documents/Code/OpenCV-2.3.1/modules/core/src/mathfuncs.cpp:1772: error: (-215) depth == CV_32F || depth == CV_64F in function log 
```

我尝试使用灰色和彩色图像，并使用`cvtColor`,`CV_8U`和`CV_32F`, `C1`，`C3`但我总是**将 0 作为深度**..

我在 OpenCV 手册和*OpenCV-2.3.1/modules/core/include/opencv2/core/types_c.h*上花费了数小时，但是……我找不到解决方案。我想我对如何转换`Mat`对象的深度有些困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T15:43:58.633

**您确定将图像转换为 float32**吗？

请检查下面的代码，我刚刚写的。不知道输出是否正确，但它没有抛出任何错误。

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <iostream>
using namespace std;

int main ()
{
    cv::Mat binary = cv::imread("kick.jpg",0);

    cv::Mat fg;
    binary.convertTo(fg,CV_32F);
    fg = fg + 1;
    cv::log(fg,fg);
    cv::convertScaleAbs(fg,fg);
    cv::normalize(fg,fg,0,255,cv::NORM_MINMAX);
    cv::imshow("a",fg);
cv::waitKey(0);
} 
```

下面是我得到的输出：

![在此处输入图像描述](../Images/878c6466e62e98bcbbfbbd12c311672e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T14:55:57.823

交换以下行以获得更好的结果：

```
 cv::normalize(fg,fg,0,255,cv::NORM_MINMAX);
    cv::convertScaleAbs(fg,fg); 
```

# android - Android：解析具有大属性且内存使用率低的 JSON 文件

> ID：11507231
> 
> 赞同：3
> 
> 时间：2012-07-16T15:13:56.663
> 
> 标签：android, json, jackson

我想知道是否有一种“正确”的方法来使用 Jackson 解析 JSON 文件，其中 JSON 文件包含一个巨大的属性，而无需将整个流加载到内存中。我需要保持低内存，因为它是一个 Android 应用程序。我不是在这里问如何使用[Android：解析大型 JSON 文件](https://stackoverflow.com/questions/11104171/android-parsing-large-json-file)，而是一个属性非常大，而其他属性无关紧要。

例如，假设我有以下内容：

```
{
    "filename": "afilename.jpg",
    "data": "**Huge data here, about 20Mb base64 string**",
    "mime": "mimeType",
    "otherProperties": "..."
} 
```

如果需要（通过输出流或其他含义），可以将数据属性提取到一个新文件中，但我无法使用 Jackson 来实现这一点。我愿意使用其他库我只是认为杰克逊将是理想的，这要归功于它的流 API。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:18:46.890

最后，我设法像这样恢复我的大量数据，`in`我想从中解析数据的 json 文件的输入流在哪里，并且是我要将数据`out`写入的文件：

```
public boolean extrationContenuDocument(FileInputStream in, FileOutputStream out, FileInfo info) 
throws JsonParseException, IOException {

    SerializedString keyDocContent = new SerializedString("data");
    boolean isDone = false;

    JsonParser jp = this.jsonFactory.createJsonParser(in);

    // Let's move our inputstream cursor until the 'data' property is found
    while (!jp.nextFieldName(keyDocContent)) {
        Log.v("Traitement JSON", "Searching for 'data' property ...");
    }

    // Found it? Ok, move the inputstream cursor until the begining of it's
    // content
    JsonToken current = jp.nextToken();

    // if the current token is not String value it means u didn't found the
    // 'data' property or it's content is not a correct => stop
    if (current == JsonToken.VALUE_STRING) {
        Log.v("Traitement JSON", "Property 'data' found");

        // Here it gets a little tricky cause if the file is not big enough
        // all the content of the 'data' property could be read directly
        // insted of using this
        if (info.getSize() > TAILLE_MIN_PETIT_FICHER) {
            Log.v("Traitement JSON", "the content of 'data' is too big to be read directly -> using buffered reading");

            // JsonParser uses a buffer to read, there is some data that
            // could have been read by it, i need to fetch it
            ByteArrayOutputStream debutDocStream = new ByteArrayOutputStream();
            int premierePartieRead = jp.releaseBuffered(debutDocStream);
            byte[] debutDoc = debutDocStream.toByteArray();

            // Write the head of the content of the 'data' property, this is
            // actually what as read from the inputstream by the JsonParser
            // when did jp.nextToken()
            Log.v("Traitement JSON", "Write the head");
            out.write(debutDoc);

            // Now we need to write the rest until we find the tail of the
            // content of the 'data' property
            Log.v("Traitement JSON", "Write the middle");

            // So i prepare a buffer to continue reading the inputstream
            byte[] buffer = new byte[TAILLE_BUFFER_GROS_FICHER];

            // The escape char that determines where to stop reading will be "
            byte endChar = (byte) '"';

            // Fetch me some bytes from the inputstream
            int bytesRead = in.read(buffer);
            int bytesBeforeEndChar = 0;

            int deuxiemePartieRead = 0;
            boolean isDocContentFin = false;

            // Are we at the end of the 'data' property? Keep writing the
            // content of the 'data' property if it's not the case
            while ((bytesRead > 0) && !isDocContentFin) {
                bytesBeforeEndChar = 0;

                // Since am using a buffer the escape char could be in the
                // middle of it, gotta look if it is
                for (byte b : buffer) {
                    if (b != endChar) {
                        bytesBeforeEndChar++;
                    } else {
                        isDocContentFin = true;
                        break;
                    }
                }

                if (bytesRead > bytesBeforeEndChar) {
                    Log.v("Traitement JSON", "Write the tail");
                    out.write(buffer, 0, bytesBeforeEndChar);
                    deuxiemePartieRead += bytesBeforeEndChar;
                } else {
                    out.write(buffer, 0, bytesRead);
                    deuxiemePartieRead += bytesRead;
                }

                bytesRead = in.read(buffer);
            }

            Log.v("Traitement JSON", "Bytes read: " + (premierePartieRead + deuxiemePartieRead) + " (" + premierePartieRead + " head,"
                    + deuxiemePartieRead + " tail)");
            isDone = true;
        } else {
            Log.v("Traitement JSON", "File is small enough to be read directly");
            String contenuFichier = jp.getText();
            out.write(contenuFichier.getBytes());
            isDone = true;
        }
    } else {
        throw new JsonParseException("The property " + keyDocContent.getValue() + " couldn't be found in the Json Stream.", null);
    }
    jp.close();

    return isDone;
} 
```

它不漂亮，但就像一个魅力！@staxman 让我知道你的想法。

## 编辑 ：

* * *

现在这是一个已实现的功能，请参阅：[https](https://github.com/FasterXML/jackson-core/issues/14) ://github.com/FasterXML/jackson-core/issues/14 和[JsonParser.readBinaryValue()](http://fasterxml.github.io/jackson-core/javadoc/2.2.0/com/fasterxml/jackson/core/JsonParser.html#readBinaryValue(com.fasterxml.jackson.core.Base64Variant,%20java.io.OutputStream))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T17:47:12.787

**编辑**：这不是这个问题的好答案——如果子树是要绑定的对象，它会起作用，但当问题是单个大的 Base64 编码字符串时则不会。

* * *

如果我正确理解了这个问题，是的，如果您的输入由一系列 JSON 对象或数组组成，您可以增量读取文件，但仍然可以进行数据绑定。

如果是这样，您可以使用`JsonParser`推进流以指向第一个对象（其 START_OBJECT 标记），然后使用`JsonParser`( `JsonParser.readValueAs()`) 或`ObjectMapper`( `ObjectMapper.readValue(JsonParser, type)`) 中的数据绑定方法。

就像是：

```
ObjectMapper mapper = new ObjectMapper();
JsonParser jp = mapper.getJsonFactory().createJsonParser(new File("file.json"));
while (jp.nextToken() != null) {
   MyPojo pojo = jp.readValueAs(MyPojo.class);
   // do something
} 
```

（注意：根据 JSON 的确切结构，您可能需要跳过一些元素——在调用 readValueAs() 时，解析器必须收到启动 JSON 对象绑定的 START_ELEMENT）。

`readValues`或者，更简单的是，您可以使用以下方法`ObjectReader`：

```
ObjectReader r = mapper.reader(MyPojo.class);
MappingIterator<MyPojo> it = r.readValues(new File("file.json"));
while (it.hasNextValue()) {
   MyPojo pojo. = it.nextValue();
  // do something with it
} 
```

在这两种情况下，Jackson 数据绑定器仅读取生成单个对象（MyPojo 或您拥有的任何类型）所需的尽可能多的 JSON 令牌。`JsonParser`本身只需要足够的内存来包含有关单个 JSON 令牌的信息。

# java - 我的 Applet 中的 SecurityException

> ID：11507233
> 
> 赞同：0
> 
> 时间：2012-07-16T15:13:58.840
> 
> 标签：java, applet, digital-certificate

我不擅长 Java，但是当我在简单的 HTML 页面中运行 Applet 时，出现以下错误

> SecurityException：受信任的加载程序试图从文件加载沙盒资源：C：/Users/lucas/teste.jar

**编辑：政策工具**

我按照[教程](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html)进行操作，但在第 7 步中，出现以下错误

![在此处输入图像描述](../Images/894828dfd45cb73edbed996ecd9f53c3.png)

翻译：

> 无法打开文件策略 C:\Program Files\Java\jdk1.7.0_05\bin\raystore: sun.security.provider.PolicyParser$ParsingException line 1: expected [;] found[pípí]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:19:05.860

小程序在具有有限权限的沙箱中运行。

[http://docs.oracle.com/javase/tutorial/deployment/applet/security.html](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)

如果您想覆盖这些默认权限，您可以按照以下详细说明对您的 Applet 进行签名。

[http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:24:41.890

jarsigner 在 JDK 中，而不是在 JRE 中。检查你的路径中是否有它。

或者编写所有命令路径，例如 %PROGRAMFILES%\Java\jdk1.7.0_01\bin\jarsigner.exe

# php - 如何在 PHP / PDO 中创建动态文本字段？

> ID：11507234
> 
> 赞同：1
> 
> 时间：2012-07-16T15:14:02.373
> 
> 标签：php, mysql, pdo, textfield, dynamic-data

我有一个网站，我需要用户与其他用户互动。到目前为止，所有工作都是在 JQuery / Jquery Mobile 和 PHP 中使用 MySQL 数据库完成的。

用户需要在游戏中选择其他用户进行对战，但可能不知道他们的确切用户名。

我想要的是一个动态文本字段，它在数据库中搜索用户表，并拉回与搜索字段中的字母匹配的用户名，例如用户类型：

SAM 和文本字段从 DB、SamSmith、SamJones、SamBlah 返回所有相关用户，然后作为用户类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:17:48.513

您要查找的内容称为“自动完成”

你可以自己做，但是已经开发了一些插件来帮助你。

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

您仍然需要对查询进行编码以获取服务器端的用户列表。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:28:49.093

这个 PHP 代码对于那个 Jquery 库“autocomplete.php”很有用

```
<?php
    $q=$_GET['q'];
    $my_data=mysql_real_escape_string($q);

    $mysqli=mysqli_connect($host,$user,$password,$db) or die("Database Error");
    $sql="SELECT name FROM products WHERE name LIKE '%$my_data%' ORDER BY name";
    $result = mysqli_query($mysqli,$sql) or die(mysqli_error());

    if($result)
    {
        while($row=mysqli_fetch_array($result))
        {
            echo $row['name']."\n";
        }
    } else {
        echo "No Result!";
    }
?> 
```

和

```
<script>
$(document).ready(function(){
 $("#tag").autocomplete("autocomplete.php", {
        selectFirst: true
    });
});
</script>

<input id="tag" name="product_name" type="text"  size="12"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:21:24.617

1.  进行查询以返回用户数组。
2.  然后将用户循环到 HTML 并用 Jquery Autocomplete 的 javascript 代码将它们括起来。

    ```
    $query = "SELECT id,username FROM users";
    $result = mysql_query($query) or die(mysql_error());

    while($row = mysql_fetch_array($result))
    {
       $users[]  = $row;
    } 
    ```

然后在jquery自动完成可用标签中循环用户名

# excel - 将 WebResponse 保存为 excel 到服务器

> ID：11507238
> 
> 赞同：1
> 
> 时间：2012-07-16T15:14:10.257
> 
> 标签：excel, screen-scraping, httpwebresponse

我需要将内容类型为“application/vnd.ms-excel”的响应保存为具有随机文件名的服务器的 excel。我正在使用以下代码通过屏幕报废获得响应，我需要将其保存为 excel 到我的服务器路径。

```
StreamWriter writer = new StreamWriter(webRequest.GetRequestStream());
writer.Write(postData);
writer.Close();
try
{
   responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream());

   //Save the response as Excel to the server
   string responseData = responseReader.ReadToEnd();
}
catch
{
} 
```

请建议将响应保存为 excel 到服务器路径

# c# - 带有字符串操作和正则表达式的 LINQ 查询结果

> ID：11507239
> 
> 赞同：1
> 
> 时间：2012-07-16T15:14:11.643
> 
> 标签：c#, regex, string, linq, entity-framework

# 语境

我从这样的数据库中检索网站列表：

```
DashboardEntities dashboardDB = new DashboardEntities();

var sites = dashboardDB.Instances
    .Select(attr => new SiteModel
        {
            server = attr.server,
            pool = attr.pool,
            url = attr.url,
            version = attr.version,
            client = ???
        })
    .ToList();

return sites; 
```

对于`client`，我需要从 url 中获取一个子字符串，如下所示：

```
String client = "";

Regex rgx = new Regex(@"\.[a-z-./]+");
client = rgx.Replace(attr.url, "");

rgx = new Regex("formation-");
client = rgx.Replace(client, ""); 
```

# 问题

如何使用正则表达式对我的 LINQ 查询进行此字符串操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:27:34.003

您甚至不需要第二次替换的正则表达式。您可以使用静态重载将其作为单个表达式执行：

```
client = Regex.replace(attr.url, @"\.[a-z-./]+", "").Replace("formation-", "") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:03:19.540

根据 Guffa 和 RePierre 的说法：

```
DashboardEntities dashboardDB = new DashboardEntities();

var sites = dashboardDB.Instances
    .Select(attr => new SiteModel
        {
            url = attr.url,
            server = attr.server,
            pool = attr.pool,
            version = attr.version,
            client = attr.url
        })
    .ToList();

sites.ForEach(attr => attr.client = Regex.Replace(attr.client, @"\.[a-z-./]+", "").Replace("formation-", "")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:24:47.990

你不能以目前的形式拥有它。正则表达式部分不会有已知的 SQL 翻译。但是，您可以在`.ToList()`调用 后将其添加为后续选择。

```
...   .ToList()
      .Select(
          z => z.client = new Regex(@"\.[a-z-./]+")
               .Replace(z.attr.url, "").Replace("formation-", "")
      ) 
```

将其视为伪代码，但一般方法应该能够完成它。然后你只需要`client = ""`在初始选择中进行设置。

*编辑：作为旁注，“形成”部分真的不需要是正则表达式。一个简单的字符串替换就足够了，而且会更快。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T15:25:36.280

不幸的是，您将无法将正则表达式处理逻辑直接发送到数据库；您需要从数据库中获取 url，然后遍历列表以从 url 获取客户端数据。

```
DashboardEntities dashboardDB = new DashboardEntities();  
var sites = dashboardDB.Instances 
    .Select(attr => new SiteModel 
    { 
        server = attr.server, 
        pool = attr.pool, 
        url = attr.url, 
        version = attr.version, 
        client = attr.url    // load the url for further processing
    }) 
    .ToList();
// iterate over the list and get client data from the url
sites.ForEach(ite => item.client = GetSubstring(item.client)); 
return sites; 
```

该方法`GetSubstring`封装了正则表达式处理逻辑。

```
private string GetSubstring(string url)
{
    String client = "";        
    Regex rgx = new Regex(@"\.[a-z-./]+");        
    client = rgx.Replace(attr.url, "");        
    rgx = new Regex("formation-");        
    client = rgx.Replace(client, ""); 
    return client;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T15:27:01.723

可能有更好的方法，但是：

```
Regex rgx1 = new Regex(@"\.[a-z-./]+");
Regex rgx2 = new Regex("formation-");

DashboardEntities dashboardDB = new DashboardEntities();

var sites = dashboardDB.Instances
    .Select(attr => new SiteModel
        {
            server = attr.server,
            pool = attr.pool,
            url = attr.url,
            version = attr.version,
            client = rgx2.Replace(rgx1.Replace(attr.url,""),"")
        })
    .ToList();

return sites; 
```

# c# - C# WPF 中的 TextRange 和 RichTextBox

> ID：11507240
> 
> 赞同：2
> 
> 时间：2012-07-16T15:14:15.207
> 
> 标签：c#, wpf, visual-studio

我一直在尝试编写一个程序来搜索richTextBox 中的单词。我已经做了大部分，但看起来我错过了一些东西。我想为找到的单词着色，所以我写了以下内容：

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        richTextBox1.SelectAll();
        string words = richTextBox1.Selection.Text; // to get the the whole text

        int length = words.Length;                  // length of text

        string search = textBox1.Text;              // the word being searched for
        int search_length = search.Length;

        int index =0;                               // to go through the text
        int endIndex = 0;                           // the end of the got word

         // pointer to the begining and the ending of the word which will be colored.
        TextPointer start_pointer, end_pointer;   

        if(length>0 &&search_length>0)              // text exists
        while(index<length-search_length)  
        {
            index = words.IndexOf(search, index);
            if (index < 0) // not found
                break;
             endIndex = index+search.Length-1;       // last char in the word
             start_pointer = richTextBox1.Document.ContentStart.GetNextInsertionPosition(LogicalDirection.Forward).GetPositionAtOffset(index, LogicalDirection.Forward);
             end_pointer = richTextBox1.Document.ContentStart.GetNextInsertionPosition(LogicalDirection.Forward).GetPositionAtOffset(endIndex + 1, LogicalDirection.Forward);

            TextRange got = new TextRange(start_pointer, end_pointer);

 //just for debugging
            MessageBox.Show("start =" + index + " end =" + endIndex + " " + got.Text);

            got.ApplyPropertyValue(TextElement.ForegroundProperty, new SolidColorBrush(Colors.Blue));
            index =endIndex+1;
        } 
```

第一个词是彩色的。但接下来的单词不是（即如果文本是“去上学，我会去市场”，要搜索“去”这个词，然后我按下搜索按钮，结果会为第一个“go”着色，但第二个不会着色）。

我估计这是因为 textRange 工作不正常，或者 TextPointer 出了问题。此外， index 和 endIndex 是正确的 - 我已经测试过它们。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-16T10:24:15.243

试试这个代码：

```
 TextRange rangeText = new TextRange(richTextBox.Document.ContentEnd, richTextBox.Document.ContentEnd);
 rangeText.Text = "Text1 ";
 rangeText.ApplyPropertyValue(TextElement.ForegroundProperty, Brushes.Blue);
 rangeText.ApplyPropertyValue(TextElement.FontWeightProperty, FontWeights.Bold);

 TextRange rangeWord = new TextRange(richTextBox.Document.ContentEnd,        richTextBox.Document.ContentEnd);
 rangeWord.Text = "word ";
 rangeWord.ApplyPropertyValue(TextElement.ForegroundProperty, Brushes.Red);
 rangeWord.ApplyPropertyValue(TextElement.FontWeightProperty, FontWeights.Regular);

 TextRange rangeTextOne = new TextRange(richTextBox.Document.ContentEnd,     richTextBox.Document.ContentEnd);
 rangeTextOne.Text = "Text2 ";
 rangeTextOne.ApplyPropertyValue(TextElement.ForegroundProperty, Brushes.Blue);
 rangeTextOne.ApplyPropertyValue(TextElement.FontWeightProperty, FontWeights.Bold); 
```

# php - Meaning of this if statement [if (condition) : something; endif;]

> ID：11507241
> 
> 赞同：3
> 
> 时间：2012-07-16T15:14:17.123
> 
> 标签：php, joomla

I've been reading some `joomla` code today and I'm often encountering statements like the following:

```
<?php if ( intval($this->item->modified) != 0 && $this->item->params->get('show_modify_date')) : ?>
            <tr>
                <td colspan="2"  class="modifydate"><?php echo JText::sprintf('LAST_UPDATED2', JHTML::_('date', $this->item->modified, JText::_('DATE_FORMAT_LC2'))); ?> </td>
            </tr>
<?php endif; ?> 
```

The way I read it, it seems to translate to the following syntax:

```
if (condition) :
    // do something here
endif; 
```

I'm not familiar with this syntax (`:` after the `if` statement). Can anyone point me to the right place?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T15:15:54.793

Check this [Alternative syntax for control structures](http://php.net/manual/en/control-structures.alternative-syntax.php):

> PHP offers an alternative syntax for some of its control structures; namely, if, while, for, foreach, and switch. In each case, the basic form of the alternate syntax is to change the opening brace to a colon (:) and the closing brace to endif;, endwhile;, endfor;, endforeach;, or endswitch;, respectively.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T15:15:05.993

See PHP documentation:

**Reference**: [http://php.net/manual/en/control-structures.elseif.php](http://php.net/manual/en/control-structures.elseif.php)

`Note: Note that elseif and else if will only be considered exactly the same when using curly brackets as in the above example. When using a colon to define your if/elseif conditions, you must not separate else if into two words, or PHP will fail with a parse error.`

The colon is simply syntactic, and is similar to the functionality of curly braces `{}`.

# backbone.js - 骨干（木偶）异步模块化模板加载

> ID：11507244
> 
> 赞同：0
> 
> 时间：2012-07-16T15:14:27.810
> 
> 标签：backbone.js, requirejs, marionette

目前在我正在处理的 Backbone 项目中，我已经按模块组合了所有模板。就像是：

*   `users.html`
    *   `#profileTemplate`
    *   `#changePasswordTemplate`
    *   ...
*   `something.html`
    *   `#someTemplate`
    *   `#anotherTemplate`

然后我根据需要按模块加载模板`$.get`。我打算使用 Backbone Marionette 来加载这些模板，建议的方法是：[link](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.async.md)

```
Backbone.Marionette.TemplateCache.loadTemplate = function(templateId, callback){
  var that = this;
  var url = templateId + ".html";

  $.get(url, function(templateHtml){
    var template = $(templateHtml).find(templateId);
    callback(template);
  });
} 
```

这意味着我必须将我的模板分解成更多的文件，这意味着更多的网络请求。我想知道这样做的推荐方法是什么？将所有内容组合成一个大文件或许多小文件或模块之间的某个地方？如果按模块，那么我将需要添加一个参数以`loadTemplate(moduleUrl, templateSelector, callback)`尚未尝试过，明天会这样做，但即使它不会破坏任何东西，是否也推荐这样做？我正在覆盖第 3 方框架方法，更糟糕的是，更改其方法签名？那么推荐的解决方案是什么？

也许因为我使用的是 RequireJS，所以我的模板可以通过 Require 加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T17:00:01.343

> 我想知道这样做的推荐方法是什么？

推荐的方法是不异步加载文件。尽可能立即加载您需要的所有内容。

"Async does not make things go fast. Async is what you do when you CAN'T make something go fast enough." - [https://twitter.com/izs/status/216954021926285313](https://twitter.com/izs/status/216954021926285313)

> Maybe since I am using RequireJS, my templates can be loaded via Require?

Yes.

Let RequireJS optimize your template by pre-compiling them, and concatenating them in to your app's file w/ the r.js plugin. This will significantly improve the performance of your app.

...

In the off-chance that you really do need to do async loading of templates and modules, group things in to the smallest number of files possible the way you have been thinking. You would need to modify the code you referenced to handle this.

# javascript - 在渲染之前使用 javascript 设置样式

> ID：11507248
> 
> 赞同：1
> 
> 时间：2012-07-16T15:14:38.857
> 
> 标签：javascript, css, javascript-events

我有一个图像列表，每个图像都显示在一个 div 中。div 的宽度会有所不同，因为它们被指定为容器的百分比。这样做的目的是获得灵活的设计。

图像比它们包含的 div 宽，但所有图像的宽度都不相同。我想通过在图像上设置负边距来移动图像，并以这种方式将图像置于其容器中。

由于负边距取决于图像的宽度，因此我需要在设置边距之前检查宽度。

```
function marginsOfImages() {
    var images = document.getElementsByTagName('img');
    for (i = 0; i < images.length; i++) {
        var parent = images[i].parentNode;
        var parentWidth = window.getComputedStyle(parent, null).getPropertyValue("width");
        /*In order to remove the "px" from the style: */
        var indexOfPx = parentWidth.search("px");
        parentWidth = parseInt(parentWidth.substring(0, indexOfPx));
        var imageWidth = window.getComputedStyle(images[i], null).getPropertyValue("width");
        indexOfPx = imageWidth.search("px");
        imageWidth = parseInt(imageWidth.substring(0, indexOfPx));
        var value = parentWidth + 90; //Want to shift the image 90px to the left
        if (imageWidth > value) {
            images[i].style.marginLeft = (value * (-1)).toString() + "px";
        }
    }
}
window.onload = marginsOfImages; 
```

问题是图像首先呈现时没有任何边距，然后在一秒钟左右后，当javascript完成时，它们将根据宽度获得边距；页面显然已经加载后，图像的外观将发生变化。

如何在显示任何图像之前设置正确的边距？我需要在确定它们的尺寸之前加载所有图像，对吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:33:06.317

我支持@Prescott，因为添加一个显示图像的类可能是要走的路。然而，一种更通用的方法是向`html`元素添加一个“js-loaded”类，然后你就可以随时使用它。我也总是使用“js”或“no-js”类来设置不同的样式：

```
<script>
    var html = document.getElementsByTagName('html')[0];

    html.className = html.className.replace('no-js', 'js');

    window.onload = function () {
        html.className += ' js-loaded';
    };
</script> 
```

然后你可以简单地：

```
<style>
    html.js #images img {visibility: hidden}
    html.js-loaded #images img {visibility: visible}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:19:02.367

您可以将所有图像设置为`visibility:hidden`（或替代`display:none`）样式，然后在您的 javascript 中删除该 css 属性（或类），以便在应用边距后显示

# asp.net-mvc-4 - Can't find namespace

> ID：11507252
> 
> 赞同：1
> 
> 时间：2012-07-16T15:14:47.210
> 
> 标签：asp.net-mvc-4

When I create new mvc4 project "Internet application" the `AccountController` has a reference to `mvc4.Models`. When I create "basic application" and copy above controller to it I can't resolve said namespace. What did I misunderstand ? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:20:56.500

There is no such thing as a basic application. Do you mean an empty application?

An empty application does not create any Model classes. The `/Model` folder is empty, so the classes the Account Controller is referencing (`LoginModel`, `RegisterModel`, etc) do not exist. You need to copy them over as well. (Although if you're just going to copy all of the files, just use an Internet Application project instead of an empty one...)

# mysql - 合并sqlite查询的行

> ID：11507253
> 
> 赞同：0
> 
> 时间：2012-07-16T15:14:51.973
> 
> 标签：mysql, sql, sql-server, sqlite

我的表灌溉中有以下行：

```
CodeIrrigation |CodeSecteur|Date_Irrigation | Cubage |
---------------|-----------|----------------|--------| 
     1         |    2      | 12/04/2012     | 1300   |
---------------|-----------|----------------|--------|
     2         |    3      | 12/04/2012     | 1500   |
---------------|-----------|----------------|--------| 
```

我想要的结果是：

```
 CodeIrrigation |CodeSecteur1|CodeSecteur2|Date_Irrigation | 
    ---------------|------------|------------|----------------| 
         1         |    2       |    3       | 12/04/2012     | 
```

有没有可以返回类似内容的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:19:42.833

试试这个：

```
SELECT 
    MIN(CodeIrrigation) AS 'CodeIrrigation', 
    MIN(CodeSecteur) AS 'CodeSecteur1', 
    MAX(CodeSecteur) AS 'CodeSecteur2'
FROM table
GROUP BY Date_Irrigation 
```

# spring - ServiceMix + Spring + CXF + Aegis = NullPointerException

> ID：11507255
> 
> 赞同：1
> 
> 时间：2012-07-16T15:14:58.417
> 
> 标签：spring, osgi, cxf, apache-servicemix, aegis

我正在尝试在 ServiceMix 中创建一个基于 Spring 和 CXF 与 Aegis 数据绑定的 Web 服务。该服务在 Tomcat 中作为战争运行没有问题，但是当我在 ServiceMix 中部署它时，我得到一个 NullPointerException。

```
Caused by: java.lang.NullPointerException
    at org.apache.cxf.aegis.type.basic.BeanTypeInfo$1.compare(BeanTypeInfo.java:309)
    at org.apache.cxf.aegis.type.basic.BeanTypeInfo$1.compare(BeanTypeInfo.java:308)
    at java.util.Arrays.mergeSort(Arrays.java:1270)
    at java.util.Arrays.mergeSort(Arrays.java:1282)
    at java.util.Arrays.mergeSort(Arrays.java:1281)
    at java.util.Arrays.mergeSort(Arrays.java:1281)
    at java.util.Arrays.sort(Arrays.java:1210)
    at org.apache.cxf.aegis.type.basic.BeanTypeInfo.initializeProperties(BeanTypeInfo.java:307)
    at org.apache.cxf.aegis.type.basic.BeanTypeInfo.<init>(BeanTypeInfo.java:75) 
```

我的春豆是：

```
<bean id="clientFactory" class="org.apache.cxf.jaxws.JaxWsProxyFactoryBean">
    <property name="serviceClass" value="com.company.ServiceSEI" />
    <property name="address" value="${ws.url}" />
    <property name="dataBinding" ref="aegisBean" />
</bean>
<bean id="aegisBean" class="org.apache.cxf.aegis.databinding.AegisDatabinding"
    scope="prototype" /> 
```

我也在 MANIFEST.MF 中声明：

```
<Import-Package>
    META-INF.cxf,
    META-INF.cxf.osgi,
    org.apache.cxf,
    org.apache.cxf.binding,
    org.apache.cxf.ws.security,
    org.apache.cxf.jaxws,
    org.apache.cxf.aegis,
    org.apache.cxf.aegis.databinding,
    org.apache.cxf.aegis.type,
    org.springframework.beans.factory.config,
</Import-Package> 
```

我找不到这个问题的解决方案，如果使用 JAXB 没有问题，但我需要使用 Aegis。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:49:31.313

看起来这是一个已知的错误，现在似乎是开放的。[https://issues.apache.org/jira/browse/CXF-3613](https://issues.apache.org/jira/browse/CXF-3613)

# c# - 发送字节[254]以什么形式发送

> ID：11507256
> 
> 赞同：0
> 
> 时间：2012-07-16T15:15:02.143
> 
> 标签：c#, byte, ascii

我在 c# 中有这段代码，它运行良好，将正确的数字发送到继电器以打开/关闭继电器。我正在尝试使用 Arduino 程序和微控制器来控制继电器，并且正在努力从继电器中获得任何响应。我正在检查的选项之一是查看该程序以什么格式发送字节（二进制、ascii 字符代码、ascii 字符等），以尝试在其他程序中模仿这一点。

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;
 using System.IO.Ports;
 using System.Threading;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
        Console.WriteLine("hello world");
        LightRelayBoard lrb = new LightRelayBoard("COM1");
        lrb.WorkspaceLight(4);
        Thread.Sleep(100);

        lrb.Query();

        Thread.Sleep(5000);

        lrb.WorkspaceLight(0);
        Thread.Sleep(100);

        lrb.Query();

        Console.Read();
    }
}

public class LightRelayBoard
{
    SerialPort sp;
    byte[] relay1Off = new byte[2];
    byte[] relay2Off = new byte[2];
    byte[] relay3Off = new byte[2];
    byte[] relay4Off = new byte[2];
    byte[] relay1On = new byte[2];
    byte[] relay2On = new byte[2];
    byte[] relay3On = new byte[2];
    byte[] relay4On = new byte[2];
    byte[] relay1query = new byte[2];

    int currentState = 0;

    public LightRelayBoard(string portName) // constructor
    {
        relay1Off[0] = (byte)254;
        relay1Off[1] = 0;
        relay2Off[0] = (byte)254;
        relay2Off[1] = 1;
        relay3Off[0] = (byte)254;
        relay3Off[1] = 2;
        relay4Off[0] = (byte)254;
        relay4Off[1] = 3;
        relay1On[0] = (byte)254;
        relay1On[1] = (byte)8;
        relay2On[0] = (byte)254;
        relay2On[1] = (byte)9;
        relay3On[0] = (byte)254;
        relay3On[1] = (byte)10;
        relay4On[0] = (byte)254;
        relay4On[1] = (byte)11;
        relay1query[0] = (byte)254;
        relay1query[1] = (byte)16;

        sp = new SerialPort(portName, 9600);

        sp.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);

        try { sp.Open(); }
        catch
        {
            Console.WriteLine("Couldn't open light relay board: port ({0})", portName);
        }

        for (int i = 0; i <= 4; i++)
        {
            WorkspaceLight(i);
            Thread.Sleep(100);
        }

        for (int i = 3; i >= 0; i--)
        {
            WorkspaceLight(i);
            Thread.Sleep(100);
        }

    }

    public void WorkspaceLight(int command)
    {
        if (command > 4)
            command = 4;
        else if (command < 0)
            command = 0;

        if (command > currentState)
        {
            for (int i = (currentState + 1); i <= command; i++)
            {
                executeRelay(i, true); //turn on ith relay
                //Console.WriteLine("{0} on", i);
            }
            currentState = command;
        }
        else if (command < currentState)
        {
            for (int i = currentState; i > command; i--)
            {
                executeRelay(i, false); //turn on ith relay// turn off ith relay
                //Console.WriteLine("{0} off", i);
            }

            currentState = command;
        }

        return;
    }

    public void Query()
    {
        if (sp.IsOpen)
        {
            try
            {
                sp.Write(relay1query, 0, 2);
            }
            catch
            {
            }
        }
    }

    private void executeRelay(int ch, bool dir)
    {
        byte[] send = relay1Off;

        if (ch == 1 && dir == true)
            send = relay1On;
        else if (ch == 1 && dir == false)
            send = relay1Off;
        else if (ch == 2 && dir == true)
            send = relay2On;
        else if (ch == 2 && dir == false)
            send = relay2Off;
        else if (ch == 3 && dir == true)
            send = relay3On;
        else if (ch == 3 && dir == false)
            send = relay3Off;
        else if (ch == 4 && dir == true)
            send = relay4On;
        else if (ch == 4 && dir == false)
            send = relay4Off;

        if (sp.IsOpen)
        {
            try
            {
                sp.Write(send, 0, 2);
            }
            catch
            {
            }
        }

        return;
    }

    void DataReceivedHandler(object sender, SerialDataReceivedEventArgs e)
    {
        SerialPort sp2 = (SerialPort)sender;
        int numBytes = sp2.BytesToRead;
        byte[] sp2buffer = new byte[numBytes];
        sp2.Read(sp2buffer, 0, sp2.BytesToRead);

        Console.WriteLine("DATA from sp: {0}", sp2buffer[0].ToString()); 
    }
} 
```

这是Arduino代码：

```
 int ledPin = 13;
    unsigned char a = B11111110;
    unsigned char b = B00001000;
    void setup()
    {
    pinMode(ledPin, OUTPUT);
    // serial communication
    Serial.begin(9600);
    Serial2.begin(9600); //serial comms with relay board
    }
    void loop()

{
if(Serial.available()>0){ //available means it is receiving data
  Serial2.print(a);
 Serial.println(a); //see what Serial is printing on the screen
 Serial2.print(b);
Serial.print(b);
}
if(Serial2.available()>0){ //check if serial 2 is recieving data 

  Serial.write("data");
      }
  else{
      Serial.print("no data");
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:23:58.123

二进制只是表示数字的一种方式。ASCII 字符和字符代码将具有整数值作为字节。

在您的情况下没有“格式”。您正在直接设置各个字节。也许问题是为什么您的其他程序没有产生相同的结果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:25:12.990

一个[字节可以保存从 0 到 255 的无符号值。除了](http://msdn.microsoft.com/en-us/library/5bdb6693%28v=vs.71%29.aspx)*您*解释它的含义之外，它没有与之关联的“格式” 。

# xcode - 升级 xcode 后 - cocos2d 的游戏无法正常工作：在 'id 类型的对象上找不到属性 'gameMode' '

> ID：11507264
> 
> 赞同：0
> 
> 时间：2012-07-16T15:15:18.427
> 
> 标签：xcode, cocos2d-iphone

使用 cocos2d 的游戏运行良好，但是使用这个新的 xcode 4.3.3 运行不佳。它显示此错误：

```
Property 'gameMode' not found on object of type 'id<UIApplicationDelegate>' 
```

在这部分代码中：

```
-(void)oneDuckClicked:(id)sender{
    [[UIApplication  sharedApplication] delegate].gameMode = [NSString stringWithFormat:@"OneDuck"];
    [[[UIApplication sharedApplication] delegate] createDifficultySelectionScene];
}

-(void)twoDucksClicked:(id)sender{
    [[UIApplication  sharedApplication] delegate].gameMode = [NSString stringWithFormat:@"TwoDucks"];
    [[[UIApplication sharedApplication] delegate] createDifficultySelectionScene];
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:24:05.283

在 appDelegate 类中添加 gameMode 成员。

```
@interface AppDelegate : NSObject
{
    NSString *gameMode;
    …..
    …..
}

@property (nonatomic, retain) MyAchievement *Achievement;

@end

@implementation AppDelegate

@synthesize gameMode;

……..
……..
……..
@end 
```

像这样访问：

```
AppDelegate *App = (AppDelegate *)[[UIApplication sharedApplication] delegate] ;
App.gameMode = @"MyGameMode"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:21:47.113

要解决您的问题，您只需将调用转换`[[UIApplication sharedApplication] delegate]`为应用程序委托的类型。因此，每次您进行该调用时，都将结果转换为：

```
((YourAppDelegateClass*)[[UIApplication sharedApplication] delegate]) 
```

然后你可以从你的委托中调用方法和访问属性：

```
((YourAppDelegateClass*)[[UIApplication sharedApplication] delegate]).gameMode = 
    @"someGameMode"; 
```

# tfs - VSDBCMD 生成错误的 SQL 更新文件

> ID：11507267
> 
> 赞同：1
> 
> 时间：2012-07-16T15:15:28.933
> 
> 标签：tfs, tfsbuild, vsdbcmd

我们有一个通过 TFS、TFS 数据库项目和 vsdbcmd 的自动化构建过程。将数据库项目部署到我们的数据库服务器时，生成的 SQL 脚本会尝试“更改”某些存储过程，即使目标数据库中尚不存在这些存储过程。相反，SQL 脚本应该包含那些存储过程的“CREATE”语句。这显然会导致数据库部署失败，因为无法“更改”不存在的存储过程。

是否有人对可能导致此问题的原因或如何解决有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:36:24.043

您是否使用 VSDBCMD 部署到目标数据库？VSDBCMD 应将 .dbschema 文件和连接字符串作为输入，并生成适当的 SQL 文件。如果您在指向不同数据库的同时生成 SQL 文件，那么它将无法在处于不同状态的数据库服务器上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T07:56:40.930

我们在 TFS 构建中使用了类似的过程，我很确定这会成功处理新插入的元素（表、列、SP、索引等）。

首先，我们通过调用 VSDBCMD 生成旧数据库的 .dbschema：

```
/a:import /dsp:sql /model:C:\PATH\old.dbschema /cs:"Server=SQLSERVER;Integrated Security=False;Pooling=False;Initial Catalog=OLDDB;User=username;Password=password; 
```

然后我们生成数据库最新状态的 .dbschema，它在较早的步骤中已经部署（通过 MSBuild）：

```
/a:import /dsp:sql /model:C:\PATH\new.dbschema /cs:"Server=SQLSERVER;Integrated Security=False;Pooling=False;Initial Catalog=NEWDB;User=username;Password=password; 
```

我们最后第三次调用 VSDBCMD，以便它生成 ALTER：

```
/a:deploy /dsp:sql /model:C:\PATH\new.dbschema /targetmodelfile:C:\PATH\old.dbschema /DeploymentScriptFile:C:\PATH\DB_Alter.sql /p:Targetdatabase="DB" 
```

生成的 DB_Alter.sql 可以应用于运行 DB 先前状态的生产 SQL，以便将其塑造成最新状态。

您所暗示的内容可以追溯到您没有正确形成 VSDBCMD 参数，或者是该工具的直接错误。在您的位置，我将手动尝试该工具，以确保两者中的哪一个适用。
据我所知，上述过程可以正常工作，因此我倾向于认为您的实施存在问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:03:24.997

找出问题所在：在 TFS 中，表定义没有架构前缀。所以而不是（例如）

```
CREATE TABLE [dbo][TableName] 
```

它是

```
CREATE TABLE [TableName] 
```

缺少指定的架构意味着当 QA 运行 vsdbcmd 时，分配给表的架构是运行 vsdbcmd 的个人的默认架构。所以实际创建的内容*就像*我们指定的一样：

```
CREATE TABLE [QAUser_SCHEMA].[TableName] 
```

这导致 vsdbcmd，当稍后由默认架构为 [dbo] 的另一个人运行时收到我们看到的错误，基本上生成一个 ALTER 语句，因为存储过程已经创建，尽管在不同的架构下。

有人会认为，即使最初指定了不正确的模式，一旦为过程指定了 [dbo] 模式，它将被视为“不同”过程，但事实并非如此。删除程序的原始版本（带有 [QAUser_SCHEMA] 的那个），然后重新运行 vsdbcmd 解决了这个问题。

TLDR；始终在数据库项目中使用模式名称为数据库对象添加前缀。

# python - python网站语言检测

> ID：11507279
> 
> 赞同：5
> 
> 时间：2012-07-16T15:16:09.483
> 
> 标签：python, scrapy, web-crawler, language-detection

我正在编写一个可以检查数千个网站的机器人，无论它们是英文还是非英文。

我正在使用 Scrapy（python 2.7 框架）来抓取每个网站的首页，

有人可以建议我检查网站语言的最佳方法吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:21:26.567

由于您使用的是 Python，因此您可以尝试 NLTK。更准确地说，您可以检查 NLTK.detect

更多信息和确切的代码片段在这里：[NLTK 和语言检测](https://stackoverflow.com/questions/3182268/nltk-and-language-detection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:18:53.577

您可以使用响应标头找出：

[维基百科](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Responses)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T15:31:15.033

如果网站是多语言的，您可以发送“Accept-Language:en-US,en;q=0.8”标头并期望响应为英文。如果不是，您可以检查“response.headers”字典，看看是否可以找到有关该语言的任何信息。

如果仍然不走运，您可以尝试将 IP 映射到国家，然后以某种方式映射到语言。作为最后一个资源，尝试检测语言（我不知道这有多准确）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T15:52:47.193

如果您使用 Python，我强烈推荐由 Marco Lui 和 Tim Baldwin 编写的独立[LangID模块。](https://github.com/saffsd/langid.py)该模型经过预训练，字符检测高度准确。它还可以处理 XML/HTML 文档。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T15:23:24.900

调查`Natural Language Toolkit`：

**NLTK**： http: [//nltk.org/](http://nltk.org/)

您要研究的是使用`corpus`以下方式提取默认词汇集`NLTK`：

nltk.corpus.words.words()

然后，使用 . 将您的文本与上面的文本进行比较`difflib`。

**参考**：[http ://docs.python.org/library/difflib.html](http://docs.python.org/library/difflib.html)

使用这些工具，您可以创建一个量表来衡量您的文本与 NLTK 定义的英文单词之间所需的差异。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-21T22:05:58.917

[您可以在http://detectlanguage.com](http://detectlanguage.com)使用语言检测 API。 它通过 GET 或 POST 接受文本字符串，并提供带有分数的 JSON 输出。有免费和优质服务。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T15:44:10.303

如果一个 html 网站使用非英文字符，它会在元标记的网页源代码中提及。这有助于浏览器知道如何呈现页面。

这是一个阿拉伯网站[http://www.tanmia.ae](http://www.tanmia.ae)的例子，它有英文页面和阿拉伯文页面

阿拉伯语页面中的元标记是：meta http-equiv="X-UA-Compatible" content="IE=edge

相同的页面，但英文是 meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /

也许让机器人查看元标记，如果它的英文然后继续，否则忽略？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-18T20:35:22.760

如果您不想相信网页告诉您的内容但想自己检查，您可以使用统计算法进行语言检测。基于三元组的算法很健壮，应该适用于主要使用另一种语言但有一点英语的页面（足以愚弄诸如“检查单词*the, and,* or *with*是否在页面上）谷歌“ngram语言分类”，你会发现很多关于它是如何完成的参考资料。

为英语编译自己的三元表很容易，但[自然语言工具包](http://nltk.org/)附带了一组用于几种常见语言的集合。他们在`NLTK_DATA/corpora/langid`. 您可以在没有 nltk 库本身的情况下使用 trigram 数据，但您可能还想查看该`nltk.util.trigrams`模块。

# .htaccess - 重定向无限循环

> ID：11507282
> 
> 赞同：0
> 
> 时间：2012-07-16T15:16:23.643
> 
> 标签：.htaccess, redirect, wordpress

编辑 htaccess 文件后，我的 wordpress 网站出现问题。

这是我从浏览器得到的错误：

```
ERR_TOO_MANY_REDIRECTS 
```

我认为它是一种重定向无限循环。这是我的 .htaccess 文件，有人可以帮忙吗？

```
RewriteEngine on 

# BEGIN WordPress
RewriteBase /
# uploaded files
# add a trailing slash to /wp-admin
# END WordPress
rewriterule ^index\.php$ - [L]
rewriterule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]
rewriterule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin [R=301,L]
rewritecond %{REQUEST_FILENAME} -f [OR]
rewritecond %{REQUEST_FILENAME} -d
rewriterule ^ - [L]
rewriterule . index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:02:18.803

不确定您要使用此规则做什么，但这不会导致重定向循环：

```
rewriterule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin [R=301,L] 
```

原始请求：/foo/wp-admin

1.  URI =`foo/wp-admin`
2.  URI 匹配`^([_0-9a-zA-Z-]+/)?wp-admin$`，反向引用 $1 =`foo/`
3.  目标=`foo/wp-admin`
4.  将浏览器重定向到`foo/wp-admin`
5.  从步骤 1 开始重复。

# html - 将 html 表单与贝宝集成

> ID：11507288
> 
> 赞同：1
> 
> 时间：2012-07-16T15:16:47.450
> 
> 标签：html, forms, paypal

我创建了一个`website`用于销售自定义 Xbox 控制器。在我拥有的网站上，您可以通过列表等`form`选择和自定义控制器的不同部分......`drop-down``radio-buttons`

我的问题如下：

`Is there some way in which I can link the information from the input methods discussed above to the PayPal button?`

我知道我可以访问 PayPal 网站并`buttons`从那里创建，这将为 a 生成代码，`button`但这不会从上述`input`方法中获取信息。

谢谢，对不起，如果这令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:13:14.140

您应该执行以下操作：

**在您这边：在***axis2*
上开发一个小型Java Web 服务，这非常容易。 将您的 Web 应用程序连接到您的服务，以便每当用户选择和自定义控制器的不同部分时，它将在服务端保留控制器规范的输出。

 ***在 PayPal 方面：**
在 PayPal 网站上创建按钮，然后在按钮下的代码中调用您的 Web 服务来检索数据并对其进行任何操作。*

# sitecore - 错误：Sitecore 中的 TargetInvocationException

> ID：11507289
> 
> 赞同：0
> 
> 时间：2012-07-16T15:16:47.897
> 
> 标签：sitecore

我在 Windows 2003 服务器上安装了全新（干净）的 Sitecore 5.3.1。设置数据库 (SQL) 并授予网络服务对数据、数据库和网站文件夹的完全访问权限。

当我进入后端时，我可以登录，查看菜单等，但几乎所有时候，每当我尝试做某事时，比如安装一个包，它就会冻结，并出现错误（例如不能为 null ）。当我查看服务器上的事件查看器时，我看到了这个；

```
Exception type: TargetInvocationException 
Exception message: Exception has been thrown by the target of an invocation. 

Thread information: 
    Thread ID: 1 
    Thread account name: NT AUTHORITY\NETWORK SERVICE 
    Is impersonating: False 
    Stack trace:    at System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
   at System.RuntimeMethodHandle.InvokeMethodFast(Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Sitecore.Shell.Framework.Commands.MethodCommandProcessor.Invoke(PipelineArgs args)
   at Sitecore.Nexus.Pipelines.NexusPipelineApi.Resume(PipelineArgs args, Pipeline pipeline)
   at Sitecore.Pipelines.Pipeline.Resume()
   at Sitecore.Pipelines.Pipeline.DoStart(PipelineArgs args)
   at Sitecore.Pipelines.Pipeline.Start(PipelineArgs args, Boolean atomic)
   at Sitecore.Shell.Framework.Commands.MethodCommand.Execute(CommandContext context)
   at Sitecore.Web.UI.Sheer.ClientPage.Dispatch(String command)
   at Sitecore.Web.UI.Sheer.ClientPage.RaiseEvent()
   at Sitecore.Web.UI.Sheer.ClientPage.OnPreRender(EventArgs e)
   at System.Web.UI.Control.PreRenderRecursiveInternal()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

我不知道我错过了什么？

# date - VBScript：需要根据创建日期和文件名中的字符串设置变量

> ID：11507291
> 
> 赞同：0
> 
> 时间：2012-07-16T15:16:49.857
> 
> 标签：date, vbscript, wildcard

我正在创建一个需要一些 VBScript 的 SQL Server 集成包。基本上，每隔几天就会有一个文件上传到我电脑上的文件夹中。该文件始终具有不同的名称，但始终包含相同的字符串。

例如，昨天的文件可能是“John J July 15.xlsx”，明天的文件可能是“John Jones Jul 17 2012.xlsx”。他们都包含“约翰”，他们总是会。我总是想将我的变量设置为等于包含“John”并且 DateCreated 属性等于今天的文件的文件名。

我的代码有问题吗？我无法让它工作。“Today.Date”是否也在返回时间？我只希望它返回一个日期。Name 属性是否也返回扩展名？

```
 Public Sub Main()
    Dim f, fl, fs As Object
    Dim filedate As Date = Microsoft.VisualBasic.Today.Date
    Dim firstFileName As String

    fs = CreateObject("Scripting.FileSystemObject")
    fl = fs.GetFolder("E:\myFolder")

    For Each f In fl.Files
        If f.DateCreated = filedate And f.Name = "John*" Then
            firstFileName = f.Name
            Dts.Variables("ExcelSource").Value = "E:\myFolder\" & firstFileName
        End If
    Next
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:21:50.833

我不相信你上面的 IF 语句中的通配符会像你在这里想要的那样工作。它将文件名与*文字*“*”字符进行比较，并且不匹配。我可能会提出类似的建议：

****编辑****： DateCreated 属性确实解析为第二个，因此您上面的比较也不起作用。这是一个非常粗略且未经测试的说明，说明您可以修改以测试正确日期（省略秒分辨率）的一种方法。**

```
...
If Year(fileDate)=Year(f.DateCreated) and _
   Month(fileDate)=Month(f.DateCreated) and _ 
   Day(fileDate)= Year(f.DateCreated) and  _
   Left(f.Name,4)="John" Then
... 
```

# git - Git 可以处理这些用例吗？

> ID：11507298
> 
> 赞同：4
> 
> 时间：2012-07-16T15:17:13.607
> 
> 标签：git, version-control, migration, git-submodules

我目前正在从 SVN 迁移到 Git。代码库是一个 10-15 个模块的大型 Maven 项目。我们曾经为每个模块都有一个 repo。

我想知道*我的 Git 存储库应该使用什么架构来处理以下用例*：

*   用户可以签出 1..N 个模块。
*   John 提交并推入模块 M。Emma 从超级文件夹中提取更改。
*   John 从超级文件夹提交并推送模块 M 的更改。Emma 从模块文件夹中提取更改。
*   John 将（使用 git mv）文件 A 从 M1 移动到 M2，提交并推送。Emma 在提交前编辑文件 A 更新。该文件已随着 Emma 的更改而移动。

我想到了“单一存储库”架构，但没有处理 UC#1。'submodule'、' [subtree](https://github.com/apenwarr/git-subtree/) ' 和以前的 'one-module-one-repo' 无法处理 UC#4。

此外，如果大多数用例都由“子模块”架构处理，我想引入尽可能少的复杂性。子模块引入了分离头之类的概念，并且在更频繁的错误后可能会导致痛苦的修复。

我进行了广泛的搜索，我不确定在不引入太多复杂性的情况下是否可能，但我希望你们中的一些人一定找到了解决方法。

*备注：我们当前的 SVN 架构无法处理这种用例。*

非常感谢，马克西姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:18:40.930

你的分析是正确的；没有明显的方法可以一次解决所有这些用例。我建议以下两种方法之一：

1.  实际上可能不需要单独检查模块的第一个要求。使用 git，您在进行初始克隆时只需支付一次结帐费用，但之后增量更新非常快。
2.  如果您正在处理 Maven 模块，也许每个模块都有自己的发布周期，那么模块真的需要源级关系吗？如果不是，那么模块依赖关系可以仅在 Maven 中表示。

确实，您可能应该从单个存储库开始，然后如果您发现有必要，稍后再将其拆分。但你可能不会。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T02:40:37.927

你不能拥有这一切。不在 GIT 上，也不在 SVN 上。

您已经意识到您的需求相互冲突，甚至承认您当前的设置并未涵盖所有情况，因此您应该改变处理此问题的方式。

与其要求工具的某些功能，不如尝试解释需要解决的实际问题并允许人们提出解决问题的方法，这些可能不是您已经考虑过的事情。

我现在将尝试回答您在评论中显示的问题，并完全忽略您的初始请求，希望它对您所处的实际情况有所帮助。

> 我们无法承受每个（10-15）个模块的提交消息显示在同一个地方的时间线

与 SVN 不同，在 GIT 中，您有分支（真正的分支），并且每个分支都有自己的历史记录，因此只要您的开发人员使用分支并将它们合并而不是使用 rebase，您应该能够使用适当的命令隔离每个分支日志，看`git log --graph`明白了。

> 目前合并是焦虑的，因此开发人员尽量避免合并

对此没有真正的解决方案，但有办法缓解这个问题。

一种方法是在主副本中复制几个 repo，如果您的团队大约有 40 人并且您有 10-15 个模块，那么我猜您那里有专注于特定领域/模块的小团队；如果是这种情况，那么每个子团队都应该有自己的 repo 克隆并在本地合并，然后再合并回主副本。

这种方法有效地将合并过程（和职责）分为两个阶段，一个涉及子团队内部的更改，另一个处理与其余模块的交互。

> 但我必须保留用例 4（移动和编辑），以使 Git 在开发人员眼中具有明确的领先地位，并驯服对合并的恐惧

老实说，UC#4 是不可能的*。特别是在 GIT 上，`mv`操作实际上是`rm`和的组合`add`。

也许如果添加发生在运动之前，一些 (d)VCS 可以解决，但我不认为 GIT 就是这种情况，即使如此我认为你采取了错误的方式来“驯服对合并的恐惧”让我解释。

** @sleske 建议检查[此线程](https://stackoverflow.com/questions/2701790/git-merge-with-renamed-files)以了解执行 UC#4 的方法*

人们害怕合并的原因是因为他们不理解它并且 SVN 迫使您合并上游（即在服务器上）这增加了压力，您的方法的问题在于，通过尝试帮助他们避免它，您是强化合并是应避免的晦涩和危险的想法，不要那样做。

如果你想让他们克服恐惧，你需要训练他们，让他们拥有处理这种情况的工具，换句话说，不要帮助他们避免问题，强迫他们解决问题，教他们所有的合并和冲突风格，告诉他们`rerere`，甚至教他们章鱼合并，我从来没有用过，但他也教他们什么！然后让他们练习，让它成为他们*知道*并且*可以*处理的东西。

GIT 中的合并不像 SVN 那样压力大，因为它们也是本地的，因此您可以根据需要多次执行它们，而不必担心会破坏其他人的环境，只有在您完全确定它们时才会推动它们重新确定。

暂时就这些了，如果您还有其他问题，请添加评论，我会看看我是否有想法，祝您好运！

# .net - 从 windows azure worker 角色连接到 CRM 2011 on Premise

> ID：11507302
> 
> 赞同：1
> 
> 时间：2012-07-16T15:17:33.683
> 
> 标签：.net, azure, dynamics-crm-2011, azure-connect

我正在尝试从 Windows azure worker 角色连接到本地 CRM 2011。我能够将它连接到 CRM2011 在线并且工作正常。但是，当我尝试从 azure worker 角色在本地连接它时，我收到错误消息，因为“**元数据包含无法解析的引用**”：'http://myorganization/targetdata/XRMServices/2011/Organization.svc? wsdl'

有任何想法吗？？如果您能就此提供任何想法，我将不胜感激。过去一周我一直在搜索这个..请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:49:29.583

我将首先检查您的 IFD 配置并确保一切都在那里正确解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:18:16.367

您是否尝试将用户名输入为 **administrator@domain.com** 而不是**domain.com\administrator**？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T18:51:38.000

您是否设置了公共证书并授予异步服务读取访问权限？

有一个[描述该过程的 MSDN 演练](http://msdn.microsoft.com/en-us/library/gg328249.aspx)。

# android - 从资源加载图像时，SkImageDecoder 工厂返回 null

> ID：11507315
> 
> 赞同：1
> 
> 时间：2012-07-16T15:18:14.207
> 
> 标签：android

我正在尝试使用以下代码行将图像加载到我的图像视图中：

```
iv_flagged.setImageResource(R.drawable.not_flagged); 
```

但是，当我运行这行代码时，我得到了调试日志 cat 消息 '07-16 16:12:03.610: D/skia(21114): --- SkImageDecoder::Factory returned null'

not_flagged 图像肯定在 drawable 文件夹中。

我之前已经多次将图像加载到图像视图中，在这里，我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:23:02.820

哎呀，我认为是 .png 的文件实际上是一个 .psd 文件，但具有 .png 文件扩展名。因此图像解码器认为它是无效的。笨蛋！

# php - 会话未正确清除，请帮助我

> ID：11507317
> 
> 赞同：0
> 
> 时间：2012-07-16T15:18:19.573
> 
> 标签：php, javascript, session

我做了一个小申请来开具发票。但有一个小问题。它像这样工作 1）在文本框中键入项目代码或名称，然后单击一个按钮将该项目添加到二维会话变量中 2）然后我将该会话数组项目回显到屏幕中的表格中。

现在问题出在哪里，如果我想取消整个账单。我试图通过单击一个按钮来取消设置会话数组。但它没有像我希望的那样工作。我只能清除一次会话。我的意思是在添加了一些项目后，我清除了会话并尝试再次添加相同的项目，所以我可以毫无问题地做到这一点。但我再次尝试清除会话并添加相同的项目。现在它说“您尝试添加相同的项目两次”（我在尝试添加相同的项目而不取消账单时弹出此错误）

这是我的代码

```
?>
<script type="text/javascript">
function clearsessin() {
     var actualkey = "y";
     location.href="biling.php?cmd="+actualkey;
    }
</script>
<?php if(isset($_GET['cmd'])){
session_unset();
session_destroy();
$_SESSION["bill_array"] = array();
header('location:biling.php') ;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:28:45.100

在分配会话数组之前使用`unset($_SESSION["your_var"]);`并尝试这样做

# c# - 在 C# 中，有没有办法将 DataGridView 单元格的内容拖到另一个单元格？

> ID：11507321
> 
> 赞同：2
> 
> 时间：2012-07-16T15:18:47.187
> 
> 标签：c#, datagridview, drag-and-drop

我有`DataGridView dgv`。在 dgv 的一个单元格中，我有一个带有数字的灰色阴影单元格（其余单元格为空白和白色）。我希望能够将该阴影单元格正确并拖动到该列中的另一个单元格，并从前一个单元格的位置、值、行#、列#等以及新单元格的位置、值、行/列中获取信息。这可能吗？这与棋盘非常相似，其中“棋子”通过拖动从一个单元格移动到另一个单元格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T18:40:04.640

下面的代码可以工作，尽管几乎可以肯定可以稍微整理一下。它基于[DataGridViewFAQ](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=http://windowsclient.net/Samples/Go%2520To%2520Market/DataGridView/DataGridView%2520FAQ.doc&ei=cl8EUM_-PMKXsgaf24TkBg&usg=AFQjCNFxVe3EWtsJNP7xXxENGfV6dxU0EQ)中的示例。在那个例子中，他们拖动行，所以我稍微改变了一些东西来移动单元格值并使用鼠标右键。

我没有开始工作的一件事（尽管我没有花很长时间）是使用`DoDragDrop`参数传递拖动的单元格。该对象是通过 null 来的，所以我只是将它放在表单级变量中。

```
private DataGridViewCell drag_cell;

private Rectangle dragBoxFromMouseDown;

public Form1()
{
    InitializeComponent();
    dataGridView1.AllowDrop = true;
    dataGridView1.MouseDown += new MouseEventHandler(dataGridView1_MouseDown);
    dataGridView1.MouseMove += new MouseEventHandler(dataGridView1_MouseMove);
    dataGridView1.DragOver += new DragEventHandler(dataGridView1_DragOver);
    dataGridView1.DragDrop += new DragEventHandler(dataGridView1_DragDrop);
}

private void dataGridView1_MouseMove(object sender, MouseEventArgs e)
{
    if ((e.Button & MouseButtons.Right) == MouseButtons.Right)
    {
        // If the mouse moves outside the rectangle, start the drag.
        if (dragBoxFromMouseDown != Rectangle.Empty &&
            !dragBoxFromMouseDown.Contains(e.X, e.Y))
        {

            // Proceed with the drag and drop, passing in the list item.                    
            DragDropEffects dropEffect = dataGridView1.DoDragDrop(
            dataGridView1.Rows[rowIndexFromMouseDown],
            DragDropEffects.Move);
        }
    }
}

private void dataGridView1_DragOver(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Move;
}

private void dataGridView1_DragDrop(object sender, DragEventArgs e)
{
    // The mouse locations are relative to the screen, so they must be 
    // converted to client coordinates.
    Point clientPoint = dataGridView1.PointToClient(new Point(e.X, e.Y));

    // Get the row index of the item the mouse is below. 
    DataGridView.HitTestInfo hti = dataGridView1.HitTest(clientPoint.X, clientPoint.Y);
    DataGridViewCell targetCell = dataGridView1[hti.ColumnIndex, hti.RowIndex];

    // If the drag operation was a move then remove and insert the row.
    if (e.Effect == DragDropEffects.Move)
    {
        targetCell.Value = drag_cell.Value;
        dataGridView1.Refresh();
    }
}

void dataGridView1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Right)
    {
        DataGridView.HitTestInfo hti = dataGridView1.HitTest(e.X, e.Y);
        drag_cell = dataGridView1[hti.ColumnIndex, hti.RowIndex];
        // Proceed with the drag and drop, passing in the list item.                    
        DragDropEffects dropEffect = dataGridView1.DoDragDrop(
        drag_cell,
        DragDropEffects.Move);
    }
} 
```

# html - HTML 表格 - 100% 宽度的表格，固定宽度和 UNIFORM 流体列的组合

> ID：11507326
> 
> 赞同：8
> 
> 时间：2012-07-16T15:19:14.703
> 
> 标签：html, css, html-table, fluid

我正在尝试用 HTML 和 Javascript 构建一个自定义日历，您可以在其中将任务从一天拖放到另一天。我想将第一列和最后两列设为固定宽度，并让剩余的列（周一到周五）保持流动，以便表格始终填满其父级的 100%。

我遇到的问题是，流体 TD 会根据其中的内容量自动调整自身大小，这意味着当我将一项任务从一天拖到另一天时，列宽会调整大小。我希望周一到周五的大小完全相同，无论内容如何，​​并且不设置 text-overflow:hidden; （因为任务总是需要可见）

即我希望灰色列固定宽度和红色列流动但彼此一致，无论它们中的内容如何。

> **编辑：**我将 jQuery 用于拖放功能，因此 JavaScript 解决方案也可以（尽管不是优选的）。

[JSFiddle 现场示例](http://jsfiddle.net/T6YNK/6/)

**HTML：**

```
<table>
  <tr>
    <th class="row_header">Row Header</th>
    <th class="fluid">Mon</th>
    <th class="fluid">Tue</th>
    <th class="fluid">Wed</th>
    <th class="fluid">Thurs</th>
    <th class="fluid">Fri</th>
    <th class="weekend">Sat</th>
    <th class="weekend">Sun</th>
  </tr>
  <tr>
    <td>Before Lunch</td>
    <td>This col will be wider than the others because it has lots of content...</td>
    <td></td>
    <td></td>
    <td></td>
    <td>But I would really like them to always be the same size!</td>
    <td></td>
    <td></td>
  </tr>
</table> 
```

**CSS：**

```
 table {
        width: 100%;
    }       

    td, th {
        border:1px solid black;
    }  

    th {
        font-weight:bold;            
        background:red;
    }

    .row_header {
        width:50px;
        background:#ccc;
    }

    .weekend {
        width:100px;
        background:#ccc;
    }

    .fluid {
        ???
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T16:04:23.020

丹尼，

我想这就是你正在寻找的。

在这里[摆弄 http://jsfiddle.net/T6YNK/22/](http://jsfiddle.net/T6YNK/22/)

在 Chrome 中检查。

**代码**

```
 <table>
      <tr>
        <th class="row_header">Row Header</th>
        <th class="fluid">Mon</th>
        <th class="fluid">Tue</th>
        <th class="fluid">Wed</th>
        <th class="fluid">Thurs</th>
        <th class="fluid">Fri</th>
        <th class="weekend">Sat</th>
        <th class="weekend">Sun</th>
      </tr>
      <tr>
        <td>Before Lunch</td>
        <td>This col will be wider than the others because it has lots of content...</td>
        <td></td>
        <td></td>
        <td></td>
        <td>But I would really like them to always be the same size!</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
    </table>

    <style type="text/css">

        table {
            width: 100%;
        }        

        td, th {
            border:1px solid black;
        }   

        th {
            font-weight:bold;            
            background:red;
        }

        .row_header {
            width:50px;
            background:#ccc;
        }

        .weekend {
            width:100px;
            background:#ccc;
        }

        td,
        th        {
            overflow:hidden;
        }
    .fluid {

}
.weekend,
.row_header{
width:50px !important;

}

table{
    border: 1px solid black;
    table-layout: fixed;
    width:100%;

}
    </style>​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:56:19.437

使用 jQuery（也可以用普通的 JS 来完成，但我更喜欢这种工作）：

（*注意：我给了表格一个 ID，所以它会更容易选择，可以在没有它的情况下通过一些修补来完成*）

```
 $(function() {
        var $my_table = $("#my_table")
            ,current_width = $my_table.width()
            ,fluid_columns = $("table .fluid")
            ,spread_width = (current_width - 150) / fluid_columns.length;

        fluid_columns.width(spread_width);

        $(window).on("resize", function() {
            current_width = $my_table.width();
            spread_width = (current_width - 150) / fluid_columns.length;
            fluid_columns.width(spread_width);
        })
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:25:20.243

你能做到吗：

```
.fluid {
    width:10%;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T15:57:02.220

仅使用 CSS 怎么样？

[http://jsfiddle.net/T6YNK/16/](http://jsfiddle.net/T6YNK/16/)

# asp.net - ASP.NET (MVC) 项目的多文件程序集

> ID：11507334
> 
> 赞同：0
> 
> 时间：2012-07-16T15:19:44.260
> 
> 标签：asp.net, .net, asp.net-mvc, visual-studio-2010, msbuild

我想调整我的 MVC 项目，以便我可以[构建一个多文件程序集](http://msdn.microsoft.com/en-us/library/226t7yxe.aspx)。作为概念证明，我的意图是使根 web.config 成为 MVC 程序集的一部分。这样做的基本原理是防止篡改 web.config 文件。

MVC 项目的假定“我必须修改”部分在这里：

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" />
<Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
  <AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
</Target> 
```

我不记得我如何“影响”进口。例如，我可以设置一个属性来使`csc`构建步骤生成模块而不是程序集吗？即使我做到了，我也需要一个结果模块的列表（即 itemGroup），以便我可以将其输入链接器（“csc /out”或“al /out /target”）。

以前有人做过吗？指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:43:54.990

您可以将 web.config 中的所有数据拆分为可以加密的单独数据文件。您的 web.config 将如下所示：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web" type="System.Web.Configuration.SystemWebSectionGroup, System.Web, Version=%ASSEMBLY_VERSION%, Culture=neutral, PublicKeyToken=%MICROSOFT_PUBLICKEY%">
            <section name="authentication" type="System.Web.Configuration.AuthenticationSection, System.Web, Version=2.0.3600.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" allowDefinition="MachineToApplication" />
            <!-- Other system.web sections -->
        </sectionGroup>
  </configSections>
  <system.web configSource="OtherFile.config"/>
</configuration> 
```

然后，您可以加密“其他文件”，使其无法被篡改。

```
<?xml version="1.0" encoding="utf-8" ?>    
<system.web>   
     <machineKey validationKey="D61B3C89CB33A2F1422FF158AFF7320E8DB8CB5CDA1742572A487D94018787EF42682B202B746511891C1BAF47F8D25C07F6C39A104696DB51F17C529AD3CABE"
       decryptionKey="FBF50941F22D6A3B229EA593F24C41203DA6837F1122EF17" />
   </system.web> 
```

请参阅有关加密部分数据的 MS 文档：http: [//msdn.microsoft.com/en-us/library/dtkwfdky.aspx](http://msdn.microsoft.com/en-us/library/dtkwfdky.aspx)

它不会被嵌入，而是在人类可读文本之外被混淆。希望有帮助！

# javascript - 如何从左到右构建 HighCharts 条形图？

> ID：11507336
> 
> 赞同：-2
> 
> 时间：2012-07-16T15:19:52.280
> 
> 标签：javascript, jquery, highcharts

请参阅这个[**jsFiddle**](http://jsfiddle.net/5CVk6/)示例，数据系列

```
series: [{
    name: 'John',
    data: [5, 3, 4, 7, 2]  // the right most part
}, {
    name: 'Jane',
    data: [2, 2, 3, 2, 1]  // the middle part
}, {
    name: 'Joe',
    data: [3, 4, 4, 2, 5]  // the left most part
}] 
```

从右到左创建图表，我正在寻找一种方法，以便可以从左到右完成图表。谢谢！

我的数据：

```
[
    {
        "day": "2009-07-13",
        "work": ["11:16:35-12:03:12", "12:32:48-13:26:28", "13:39:09-13:39:12", "13:41:03-13:41:05", "14:18:09-24:00:00"]
    }, {
        "day": "2009-07-14",
        "work": ["00:00:00-07:22:25", "07:22:25-07:22:28", "10:10:04-10:10:31", "10:10:32-10:15:33", "10:18:07-10:21:19", "11:04:49-11:06:15", "11:12:50-11:19:05", "11:19:11-11:19:19", "11:45:50-11:51:42", "11:51:43-11:53:55", "14:03:13-14:13:04", "14:23:55-14:31:28", "14:31:28-14:38:00", "14:38:00-14:49:04", "16:34:56-16:44:33", "16:46:37-16:48:10", "16:48:11-24:00:00"]
    }, {
        "day": "2009-07-15",
        "work": ["00:00:00-08:16:23", "09:57:57-10:15:05"]
    }
] 
```

**编辑**：对不起我的英语和困惑，[**另一个 jsFiddle 示例**](http://jsfiddle.net/tVnSB/7/)可以更好地解释我在说什么。我想创建一个图表来表示我的引擎开关状态，以便条形图的**输入数据**是从左到右，而不是在小提琴中从右到左。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:46:12.020

很大的假设，但我认为您正在寻找[甘特](http://en.wikipedia.org/wiki/Gantt_chart)图。有关想法，请参阅HighCharts 论坛上的[这篇文章。](http://highslide.com/forum/viewtopic.php?f=9&t=19043)

# javascript - 在 PhoneGap 中可以看到 slideDown 之前的 slideDown-callback 触发

> ID：11507340
> 
> 赞同：0
> 
> 时间：2012-07-16T15:20:36.500
> 
> 标签：javascript, jquery, cordova, prompt

我正在为 Android 手机构建一个 PhoneGap-App。我使用这样的机制让用户向 Web 服务提交数据：

```
$('#backdrop').slideDown('fast',function(){
  var data = prompt('Please enter your data');
  if (data){
    //process data
  } else {
   //go on
  }
}); 
```

然而，在我的手机上进行测试时，有时会在元素实际可见*之前*`$('#backdrop')`显示提示（在大约 80% 的情况下） ，并等待元素显示，直到提示消失（由于它阻塞性质）。

我觉得这可能是由于我的手机非常旧且速度慢（600MHz 的 HTC Wildfire S），但我可能不是唯一一个使用旧且慢的手机的人，所以很高兴知道是否有是解决此问题的一种方法。

我真的可以通过 jQuery-means 来解决这个问题，还是意味着我不能使用标准提示并且必须自己构建一些东西（使用`prompt`s 是个好主意）？或者这是我现在不知道的完全不同的东西？

jQuery 版本是 1.7.1，Phonegap/Cordova 版本是 1.9.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:59:48.317

您的代码看起来正确。确认应该等到幻灯片动画完成，然后显示。

但是我想会发生什么是动画渲染太糟糕了，`slideUp`功能是完整的，但用户还看不到。然后`confirm`出现并停止执行。

众所周知，Javascript 动画在移动设备上很糟糕并且不鼓励使用。特别是在旧设备中，它们令人难以忍受。您可以尝试改用 CSS3 动画。有一个名为[jQuery Transit](http://ricostacruz.com/jquery.transit/)的 jQuery 插件，它的语法与 jQuery 的`animate`函数相同，但使用 CSS3 制作动画。

另一个建议：如果您使用的是 Phonegap，您可能更喜欢`navigator.notification.confirm`而不是 old-plain `confirm`，因为它使用设备的本机确认对话框（更好的用户体验）并且它是非阻塞的。

# php - 查找否：在表中出现两次或多次的字段

> ID：11507348
> 
> 赞同：0
> 
> 时间：2012-07-16T15:21:10.993
> 
> 标签：php, mysql, sql

我有一个`data`列名的表`number, start, end`

我现在需要选择出现两次或更多的数字（列的字段`number`），然后计算它们出现的次数。

有什么简单的方法可以做到这一点吗？

示例：-number--------开始--------结束----

```
 191            x          x
      123            x          x
      45             x          x
      191            x          x
      37             x          x
      191            x          x
      45             x          x 
```

所以现在结果应该是：2（191和45 - 都重复两次或更多次）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:23:40.293

```
SELECT `number`, COUNT(`number`) AS count
FROM `data`
GROUP BY `number`
HAVING COUNT(`number`) > 1
ORDER BY COUNT(`number`) DESC; 
```

对于给定的一组输入值，输出应为：

```
------------------
| number | count |
------------------
|   191  |   3   |
------------------
|   45   |   2   |
------------------ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:22:32.883

```
SELECT number, COUNT(1)
FROM table
GROUP BY number
HAVING COUNT(1) >= 2; 
```

# vb.net - 这种情况下的代码组织和可重用性？

> ID：11507353
> 
> 赞同：0
> 
> 时间：2012-07-16T15:21:24.867
> 
> 标签：vb.net, organization, reusability

我有 3 个表格，每个表格都有自己的网格。以下代码当前是在 form1 上编写的，但被所有 3 个表单使用。它可以工作，但非常混乱且耗时很长，因为它必须适用于使用不同数据库并包含不同列的 3 个表单。将下面的代码拆分为 3 个单独的函数并放置在每个表单的背面，仅包含该特定表单所需的数据是否被认为更合适？

```
Public Class Form1

Public sFilter as string
Public sQuery as string

Public Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load    

Public Sub buildFilter(ByVal form as string)
  select case form 
    Case "form1"
    sFilter = "control_no > 0 and control_no < 10000" 
    Case "form2"
    sFilter = "quantity > 0 and quantity < 7849"
    Case "form3"
    sFilter = "store_id > 10000"
  end select
End Sub

Public Sub buildQuery(form)
  Select case form
    Case "form1"
    sQuery = "Select * FROM dataBase1 WHERE " & sFilter 
    Case "form2"
    sQuery = "Select quantity, first_name, last_name FROM database2 WHERE " & sFilter
    Case "form3"
    sQuery = "Select * FROM dataBase3 WHERE " & sFilter
  End Select
End Sub

End  Class 
```

有人告诉我，最好将上面的代码放在每个表格的背面，并且只让它与它所在的表格一起工作。我觉得这不是最好的方法，但我也觉得它目前的设置方式也不好。什么是好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:33:29.000

以三种形式拥有所有这些代码是没有意义的。

一种选择是将一个表单与您已有的代码一起使用，并根据您使用的连接设置表单的属性。

如果这三种表单的设计不同并且连接到不同的数据库，那么为什么不使用三种不同的表单以及三组不同的查询和过滤代码呢？

旁注：您还应该查看[参数化查询](https://stackoverflow.com/questions/542510/how-do-i-create-a-parameterized-sql-query-why-should-i)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:36:29.387

将这些方法构建成一个通用的继承形式，然后由您的其他形式继承：

```
Public MustInherit Class MyInheritedForm
    Inherits System.Windows.Forms.Form

    Public sFilter as string
    Public sQuery as string

    Public Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load    

    Public Sub buildFilter(ByVal form as string)
      select case form 
        Case "form1"
        sFilter = "control_no > 0 and control_no < 10000" 
        Case "form2"
        sFilter = "quantity > 0 and quantity < 7849"
        Case "form3"
        sFilter = "store_id > 10000"
      end select
    End Sub

    Public Sub buildQuery(form)
      Select case form
        Case "form1"
        sQuery = "Select * FROM dataBase1 WHERE " & sFilter 
        Case "form2"
        sQuery = "Select quantity, first_name, last_name FROM database2 WHERE " & sFilter
        Case "form3"
        sQuery = "Select * FROM dataBase3 WHERE " & sFilter
      End Select
    End Sub

End  Class 
```

那么你只需要：

```
Public Class Form1
    Inherits MyInheritedForm

End Class 
```

而且您的方法与继承一起出现。

# c++ - visual c++ 2010 可再发行版

> ID：11507355
> 
> 赞同：1
> 
> 时间：2012-07-16T15:21:28.973
> 
> 标签：c++, visual-studio-2010

我应该为我的程序提供哪个视觉工作室可再发行产品？它是一个用 Visual c++ 2010 编写的控制台应用程序。在关于 Visual Studio 的帮助部分中，我得到了这个版本：10.0.30319.1。我编译为 64 位。这个想法是把 .exe 连同我需要的一些第三方 dll 和可视化 c++ 可再发行文件一起提供。这个对吗？我可以为控制台应用程序创建安装程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:23:25.533

这个（VCPP 2010 x64）：

[http://www.microsoft.com/en-us/download/details.aspx?id=14632](http://www.microsoft.com/en-us/download/details.aspx?id=14632)

请注意，当您发布 64 位软件时，您还需要发布 32 位版本的软件（假设您支持 32 位）。相反的情况不一定正确。

显然，您将使用 32 位版本的软件链接到可再发行（或发布）的 32 位版本。32 位的正确可再发行组件是[http://www.microsoft.com/en-us/download/details.aspx?id=5555](http://www.microsoft.com/en-us/download/details.aspx?id=5555)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:27:37.010

首先，它取决于您链接的 microsoft 运行时版本。

有些静态链接到您的应用程序，在这种情况下您不需要将运行时重新分发到目标机器，有些是动态链接的，迫使您重新分发一组 DLL。

为了不出错，请使用[Dependency Walker](http://www.dependencywalker.com/)工具查看您的可执行文件需要的实际 DLL。

请参阅[http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx](http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx)和[http://social.msdn.microsoft.com/Forums/da-DK/Vsexpressvc/thread/3a007184-80e9-4e25-b5ad -ff31b028c051](http://social.msdn.microsoft.com/Forums/da-DK/Vsexpressvc/thread/3a007184-80e9-4e25-b5ad-ff31b028c051)以获得更多解释。

# java - 可以使用 cronj4 设置开始日期吗？

> ID：11507357
> 
> 赞同：0
> 
> 时间：2012-07-16T15:21:43.967
> 
> 标签：java, scheduled-tasks, cron4j

使用 cron4j，可以设置在未来某个时间运行的作业

```
 Scheduler s = new Scheduler();
    s.schedule("5 10 * * *", job);
    s.start(); 
```

使用 cron4j，作业可以安排在“下周六”开始，还是在“2012 年 12 月 21 日”开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:30:22.707

```
*     *     *   *    *        command to be executed
-     -     -   -    -
|     |     |   |    |
|     |     |   |    +----- day of week (0 - 6) (Sunday=0)
|     |     |   +------- month (1 - 12)
|     |     +--------- day of        month (1 - 31)
|     +----------- hour (0 - 23)
+------------- min (0 - 59) 
```

这是命令结构的基本分解。开始一些 21 看起来像的东西

0 0 21 12 *

但这只会在每年 12 个月的 21 日运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:25:16.577

我不确定您是否可以定义年份，但由于字段是，`minute hour day month day_of_week (year)`您至少应该能够使用以下表达式让作业在 2012 年 12 月 21 日运行`0 0 21 12 ? 2012`：

编辑：cron4j 似乎不支持可选的年份表达式，因此您似乎可以定义`0 0 21 12 *`并让作业在每年 12 月 21 日运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:32:43.283

是的。例如：

```
0 0 21 12 * 
```

这表示在 12 月 21 日凌晨 12:00 运行。

Chron 语法并不有限地支持年份设置，但如果您今天设置此作业，它将在下一次跨过该日期时运行。

注意：另一个答案建议添加一个年份列。如果您确实包含此内容，则行为并非完全可预测——这取决于您使用的 chron 实现。

# z3 - t>=1 或 t>=2 => t>=1

> ID：11507360
> 
> 赞同：2
> 
> 时间：2012-07-16T15:21:48.437
> 
> 标签：z3

使用 Z3，是否有可能以某种方式合并/简化

```
t>=2 or t>=1 
```

进入

```
t>=1 
```

其中 t 是一个整数？

我们希望保持对 t 的约束尽可能简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T16:32:11.060

Z3可以通过使用战术来做到这一点`ctx-solver-simplify`。请注意，这种策略可能非常昂贵。这种策略`ctx-simplify`更便宜，因为它只“传播”平等。

这是使用此策略的脚本链接： [http ://rise4fun.com/Z3/F7Q](http://rise4fun.com/Z3/F7Q)

# bash - cat 打不开文件

> ID：11507365
> 
> 赞同：1
> 
> 时间：2012-07-16T15:22:21.670
> 
> 标签：bash, ksh

在一个脚本（比如 myScript.ksh）中，我有一个包含文件路径的变量。

```
file=/home/vikas/input.ksh 
```

在我的代码中需要该文件中的某些内容，因此我正在通过执行类似这样的操作对该文件执行普通的 cat 和 grep

```
myVariable=`cat $file | grep "on this line" | cut -d"'" -f2` 
```

现在每次启动 myScript.ksh 时，都会出现错误

```
cat: cannot open /home/vikas/input.ksh 
```

但是如果我直接在终端上做同样的事情，我可以看到文件 input.ksh 的内容

我不知道我做错了什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:24:05.783

尝试翻转你的斜线，Linux 使用`/`而不是`\`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T15:24:22.133

使用正斜杠，而不是反斜杠

```
file=/home/vikas/input.ksh 
```

编辑：好的，所以这不是问题。

这是我们目前所知道的：

*   他使用了正确的斜线。
*   如果他对文件名进行硬编码，脚本就可以工作。
*   脚本以不同的用户身份运行（我认为？）。

请指出脚本以哪个用户身份运行，并发布以下输出：

```
ls -l /home/vikas/input.ksh 
```

另外，输出是`file myScript.ksh`什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:03:03.600

是的，问题终于解决了，尽管我发现这个解决方案很奇怪并且无法理解它为什么会起作用。实际上我正在从其他文件中读取这个变量，它是这样的

```
file=$HOME/vikas/input.ksh 
```

问题出在 $HOME 我做了什么我从变量文件中删除了 $HOME 并通过这样做再次添加

```
file=`echo $file | awk 'BEGIN { FS="/"; OFS="/" } {$1=""; print $0}'`

file=$HOME$file 
```

之后我做了 cat $file 并且它起作用了

# android - Android SQLite 大量行

> ID：11507371
> 
> 赞同：3
> 
> 时间：2012-07-16T15:23:04.397
> 
> 标签：android, sqlite, xamarin.android

需要在 SQLite 数据库中本地存储大约 20,000 行信息。只有两列包含短文本字符串，因此实际数据量很小，但我很难在设备上 3-5 分钟内插入行。我试过直接循环遍历数据集并调用一个简单的 WritableDatabase.Insert，但这需要很长时间。所以我做了一些研究，并被引导到[InsertHelper 类](http://www.outofwhatbox.com/blog/2010/12/android-using-databaseutils-inserthelper-for-faster-insertions-into-sqlite-database/)，作者以大约 900 行/秒的速度处理行（这应该让我在 20-30 秒）。我仍然无法让数据处理速度超过 3-5 分钟。我错过了什么？性能是否因设备而异？使用中兴 Optik Android 3.2.1。

```
public class SqLiteHelper : SQLiteOpenHelper
{
    private const string DATABASE_NAME = "NAME";
    private const int DATABASE_VERSION = 1;
    private readonly Context _context;

    public SqLiteHelper(Context context)
        : base(context, DATABASE_NAME, null, DATABASE_VERSION)
    {
        _context = context;
    }

    public override void OnCreate(SQLiteDatabase db)
    {
        try
        {
            db.ExecSQL("Create Table Inventory (ItemNumber Text Primary Key Not Null, ItemDescription Text);");
        }
        catch (SQLiteException ex)
        {
            Toast.MakeText(_context, ex.Message, ToastLength.Long).Show();
        }
    }

    public override void OnUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
    }
}

class InventoryRepository : AsyncTask
{
    private SqLiteHelper Helper { get; set; }
    private Context Context { get; set; }

    public InventoryRepository(SqLiteHelper helper, Context context)
    {
        Helper = helper;
        Context = context;
    }

    protected override Java.Lang.Object DoInBackground(params Java.Lang.Object[] @params)
    {
       WS ws = new WS();
       DataTable parts = ws.GetInventory();  //Web service getting inventory items from Server

        Helper.WritableDatabase.Delete("Inventory", null, null);

        DatabaseUtils.InsertHelper ih = new DatabaseUtils.InsertHelper(Helper.WritableDatabase, "Inventory");

        Helper.WritableDatabase.SetLockingEnabled(false);

        int partColumn = ih.GetColumnIndex("ItemNumber");
        int partDescColumn = ih.GetColumnIndex("ItemDescription");

        Helper.WritableDatabase.BeginTransaction();

        try
        {

            foreach (DataRow part in parts.Rows)
            {
                try
                {
                    ih.PrepareForInsert();

                    ih.Bind(partColumn, part[0].ToString().Replace("'", "''"));
                    ih.Bind(partDescColumn, part[1].ToString().Replace("'", "''"));

                    ih.Execute();
                }
                catch (SQLiteException ex)
                {
                    if (ex.Message.Contains("constraint"))
                        continue;
                    throw;
                }
                catch (NullReferenceException e)
                {
                    continue;
                }
            }
            Helper.WritableDatabase.SetTransactionSuccessful();

        }
        finally
        {
            Helper.WritableDatabase.EndTransaction();
            Helper.WritableDatabase.SetLockingEnabled(true);
            ih.Close();
        }

        return "Done";
    }

    protected override void OnPostExecute(Java.Lang.Object result)
    {
        PreferenceManager.GetDefaultSharedPreferences(Context).Edit().PutString("LastInventoryUpdate", DateTime.Today.ToShortDateString()).Commit();
        Intent intent = new Intent(Context, typeof(Login));
        intent.AddFlags(ActivityFlags.NewTask);
        Context.StartActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T15:48:04.950

将整个插入循环包装在事务中。这将使事情加快一个数量级。

```
db.beginTransaction();
try {
    // your insertion loop goes here
    db.setTransactionSuccessful();
} finally {
    db.endTransaction();
} 
```

# php - 样式 php 输出页面

> ID：11507381
> 
> 赞同：-2
> 
> 时间：2012-07-16T15:23:29.277
> 
> 标签：php, html, css, styles

我已经创建了一个带有 html 模板的网站，但需要能够设置输出页面的样式，我已在所有其他页面上附加了 style.css 表，但输出页面上唯一出现的是我的背景。我想显示整个 html 页面，并且输出页面出现在 html 页面的一个部分中。

我对css或php一无所知，但是html我可以这样做，如果有人能提供帮助，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:25:47.100

当您开始使用 时`html`，您应该研究基本的布局设计。首先，阅读 a`divider`是什么以及它在当今现代布局中的使用方式。

**参考**：[https ://developer.mozilla.org/en/HTML/Element/div](https://developer.mozilla.org/en/HTML/Element/div)

享受和好运！

# java - 使用 Apache POI 的 MS Word 样式表

> ID：11507383
> 
> 赞同：1
> 
> 时间：2012-07-16T15:23:31.773
> 
> 标签：java, excel, ms-word, apache-poi

我正在做一个小项目，我需要使用 Java 在 MS Word 中创建一个动态生成的表。我一直在摆弄 Apache POI，虽然我相当确定这是适合这项工作的 API，但我很难找到用于设置表格样式的文档/示例。我不需要复杂的表格，但我至少需要能够更改各个列的宽度、边距、边框类型等。

在我看来，POI 的 XSSF (Excel) 部分中有更多的表格功能。尝试在 excel 中生成表格然后将其导出到 MS Word 是否更有意义？

我的另一个想法是在 MS Word 中创建实际表，然后以某种方式使用 POI 重现 XML，但我不是最有经验的程序员，这种方式似乎相当复杂。

任何帮助将不胜感激，谢谢！

# html - Mailto：正文格式

> ID：11507387
> 
> 赞同：40
> 
> 时间：2012-07-16T15:23:42.373
> 
> 标签：html, email, mailto

> **可能重复：**
> [mailto 链接多个正文行](https://stackoverflow.com/questions/10356329/mailto-link-multiple-body-lines)

只是一个快速的问题。我正在为一家慈善机构创建一个网站，他们在网站上有一个部分，人们可以在其中就如何为他们的事业筹集更多资金提出一些建议。他们的网站只是简单的 HTML、JS 和 CSS，以保持轻量级。我添加了一个`mailto:`允许人们向他们发送电子邮件，但他们想要更多信息，例如他们的姓名和联系方式。我想知道是否有办法格式化正文以便有新行：

```
name: 
email:
tel:
postal address: 
```

谢谢你！

这是我`mailto`现在的样子。欢迎任何帮助或建议：

```
<a href="mailto:someone@example.com?subject=Suggestions&body=Your%20suggestions%20are%20really%20important%20to%20us%20,thanks!">Send suggestions!</a> 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-16T15:27:13.323

用于`%0D%0A`身体换行

*   [如何在 mailto body 命令中输入换行符](http://www.cubetoon.com/2008/how-to-enter-line-break-into-mailto-body-command/)（Christian Petters；2008 年 4 月 1 日）

示例（[演示](http://jsfiddle.net/JqH3r/)）：

```
<a href="mailto:someone@example.com?subject=Suggestions&body=name:%0D%0Aemail:">test</a>​
                                                                  ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T15:26:01.017

从谷歌上的第一个结果：

```
mailto:name@domain.e_t?subject=Header&body=This%20is...%20the%20first%20line%0D%0AThis%20is%20the%20second 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:28:27.517

忘了它; 这可能适用于 Outlook，甚至可能适用于 GMail，但您将无法使其正常工作，以支持大多数其他 E-mail 客户端（并且有很多它们）。

您最好使用简单的 PHP 脚本（查看[PHPMailer](http://phpmailer.worxware.com/)）或使用托管解决方案（谷歌“[电子邮件表单托管](https://www.google.com/search?q=email%20forml%20hosted)”、“[免费电子邮件表单托管](https://www.google.com/search?q=free%20email%20form%20hosting)”或类似的东西）

顺便说一句，您正在寻找术语“[百分比编码](http://en.wikipedia.org/wiki/Percent-encoding)”（也称为[url-encoding](http://php.net/manual/en/function.urlencode.php)和 Javascript 使用[encodeUri](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURI) / [encodeUriComponent](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)（确保您了解差异！））。您需要编码的不仅仅是换行符。

# drawing - 如何在 Corona SDK 中删除部分图像？

> ID：11507388
> 
> 赞同：0
> 
> 时间：2012-07-16T15:23:48.407
> 
> 标签：drawing, coronasdk

我正在尝试制作一个小游戏，我需要能够删除用户触摸的图像像素。

因此，假设您有一个覆盖整个屏幕的图像。用户可以在屏幕内滑动，无论用户触摸到哪里，图像的像素都会被移除，从而显示原始图像下方的任何内容。

该请求类似于电晕 X 射线示例 ( [http://developer.coronalabs.com/sample-code/x-ray](http://developer.coronalabs.com/sample-code/x-ray) )，但我们需要能够根据用户滑动的位置更改遮罩。因此，我们不能使用遮罩（如 X 射线示例），因为删除的像素不会形成矩形。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:54:51.797

在 Corona 中无法从图像中删除像素，但是您可以使用 Satheesh 创建的裁剪库进行一些创造性的遮罩；[http://web-c2.anscamobile.com/code/useful-crop-library](http://web-c2.anscamobile.com/code/useful-crop-library)

# php - 如何获取访问令牌的持续时间？

> ID：11507390
> 
> 赞同：0
> 
> 时间：2012-07-16T15:23:56.430
> 
> 标签：php, facebook, facebook-access-token

我想我已经获得了一个持续时间很长的页面访问令牌。当我为我的用户获得长令牌时，（[https://developers.facebook.com/roadmap/offline-access-removal/#extend_token](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)）它会返回令牌和持续时间（60 天）。但是当我使用该令牌获取用户的页面时，我只是得到页面令牌，不知道它的持续时间。

我只想检查页面令牌并查看它的持续时间，只是进行健全性检查以了解我做的事情是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:27:50.607

通过使用 a 进行的查询获得的页面访问令牌：

*   短暂的用户访问令牌也是短暂的
*   长期访问令牌永不过期。

您链接的文档涵盖了这两种情况：

> 启用迁移后，当使用短期用户访问令牌查询此端点时，获得的页面访问令牌也是短期的。
> 
> ...
> 
> 通过使用长期用户访问令牌，查询`[User ID]/accounts`端点现在将为用户管理的页面提供不会过期的页面访问令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T19:20:48.583

您可以直接在[Facebook 调试器](https://developers.facebook.com/tools/debug)中检查您的访问令牌。只需插入您的令牌，您就应该获得到期时间。

# sql - SQL - 右连接或子查询中的存在/位置

> ID：11507391
> 
> 赞同：2
> 
> 时间：2012-07-16T15:23:57.270
> 
> 标签：sql, tsql, join

我有一个表，其架构如下：

**tbl 记录**：

```
RecordID | ResultID | RecordName 
```

另一个表是**tblResults**：

```
ResultID | ResultTime | Result Date 
```

`tblRecords`包含一些`ResultID`不在`tblResults`.

我正在尝试做的是从其中获取所有`tblRecords`值。`ResultID``tblResults`

加入有可能吗？
还是我必须使用子查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:25:46.720

是的，它可以做到。试试下面的查询：

```
SELECT tRec.* 
FROM tblRecords tRec
INNER JOIN tblResults tRes
ON tRec.ResultId = tRes.ResultId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:27:28.987

> 从 tblRecords 中获取 ResultID 在 tblResults 中的所有值

然后试试这个：

```
SELECT * 
FROM tblRecords
WHERE ResultID IN (SELECT DISTINCT ResultID FROM tblResults) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:26:21.647

是的。使用表连接。

```
tblRecords.RecordID = tblResults.ResultID 
```

# android - Android - 在没有清单声明的情况下启动 Activity

> ID：11507393
> 
> 赞同：2
> 
> 时间：2012-07-16T15:23:59.470
> 
> 标签：android, android-intent

我正在尝试实现一个具有与 MinimalisticText 在单击小部件时启动特定活动的能力类似的功能的应用程序。我正在制作一个应用程序，我可以在其中选择设备上的任何应用程序，然后从中选择任何活动并按下按钮启动它。但是，由于没有在清单中声明所述活动，我遇到了获取 ActivityNotFoundException 的障碍。

我所有的研究都表明这是不可能的。然而，像 Minimalistic Text 这样的应用程序能够以某种方式实现该功能。为了能够启动意图，我的应用程序缺少什么：

这是我如何启动活动的相关代码片段：

```
 private Intent getLaunchIntent(ActivityInfo ainfo) {
        Intent launch = new Intent(ctx, ainfo.getClass());
        launch.addCategory(Intent.CATEGORY_LAUNCHER);
        if(DBG) { Log.i(TAG, "Got launch intent:" + launch.toString()); }

        return launch;
     } 
```

编辑：解决了！对于任何想知道如何做我正在做的事情的人，请看这里：

[从您自己的（意图）打开另一个应用程序](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:30:14.850

特别是从清单的角度来看，重要的是要注意，仅仅因为您拥有 Activity 并不**一定**意味着您实际上可以进入该特定 Activity。这些细节由 和 的 Intent Filter 定义`MAIN`，`Launcher Intent`一些活动将或不具有。

需要注意的一点是，如果一个活动没有`MAIN`，您不能通过该包之外的意图直接进入该活动。被拒绝访问此活动**正在按预期工作，**因为它是一种安全措施，可防止进入设计方案之外的特定屏幕。

详情参考：http: [//developer.android.com/reference/android/content/Intent](http://developer.android.com/reference/android/content/Intent)

同样作为**提示**，您可以使用 PackageManager 来解决直接从另一个应用程序启动应用程序的问题（在上述范围内）

# resharper - ReSharper 配置

> ID：11507400
> 
> 赞同：0
> 
> 时间：2012-07-16T15:24:19.743
> 
> 标签：resharper

好的，我正在尝试对如何设置 ReSharper 进行一些研究。我的公司有兴趣在员工指向的网络驱动器上设置 DotSettings 文件，以便 resharper 可以工作，而不必告诉员工删除新的更新。关于我可以在哪里看或者这是否可能的任何建议？

仅供参考我们目前使用的是 ReSharper 6.1 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:27:42.063

在设置下你会去管理。从那里您将在网络驱动器上导入保存的配置文件。设置的方式是级联的，因此本地设置更改不会影响公司设置文件

# facebook-graph-api - 在 Facebook 页面上安排封面照片更改

> ID：11507401
> 
> 赞同：-1
> 
> 时间：2012-07-16T15:24:20.447
> 
> 标签：facebook-graph-api, facebook-page, facebook-timeline, cover

想法是每天自动交换封面照片以播放不同的电视节目。

我能做到吗？如果是这样，你能解释一下怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:08:04.837

有一个免费的 facebook 应用程序允许用户在不同的时间间隔安排封面照片的更改。它被称为页面覆盖。自 2018 年 5 月起，此应用程序已停产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:26:26.780

您不能以编程方式更改封面照片（在此阶段）。

同样，您不能通过应用程序更改某人的个人资料图片。

* * *

但是，您**将**能够将照片上传到 cover_photo 的相册 - 因此您可以这样做，然后简单地指导您的用户如何选择它作为他们选择的封面照片。

# crystal-reports - 如何对字母表变化的水晶报表进行分页。

> ID：11507407
> 
> 赞同：0
> 
> 时间：2012-07-16T15:25:04.277
> 
> 标签：crystal-reports

我有一个包含名字和公司名称的访问数据库。我有一份长达 100 页的报告。我想知道有没有一种方法可以分页并在新页面上开始公司的新字母，例如

```
----A----

Automobile company 1 
Auto company 2 

-----B------

Bike co 1 
Bike co 2 
```

等等...目前报告将所有字母显示在一起，我手动将它们分开，这非常乏味。此外，使用公司名称的首字母向 access 数据库添加新列也是不可行的。

请让我知道是否有其他方法可以做到这一点。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:40:47.700

创建一个公式来计算字母分组：

```
//{@first_letter}
Left({table.company_name}, 1) 
```

在这个公式上插入一个组；确保它是 G1。

格式化组的页脚，然后检查“新页面之后”属性。

# sql-server-2008 - 使用 EXECUTE sp_executesql 在存储过程中设置变量

> ID：11507413
> 
> 赞同：0
> 
> 时间：2012-07-16T15:25:21.640
> 
> 标签：sql-server-2008, variables, stored-procedures, sp-executesql

我正在尝试构建一个 SQL 字符串来执行，`sp_executesql`但我似乎无法为传入的 sql 字符串中的声明变量赋值。

所以下面是我的程序的一个例子

```
ALTER PROCEDURE [dbo].[selectRecords]
@psID INT --parameter passed in
AS   
DECLARE @existingRecordCount INT=0

DECLARE @sql NVARCHAR(1000)
DECLARE @paramDefinitions NVARCHAR(1000)

SET @paramDefinitions=
    '@psID INT,    
    @existingRecordCount INT OUTPUT'

SET @sql='  
SELECT 
@existingRecordCount=COUNT(Name)
FROM dbo.Asset_Log
WHERE ID=@psID
GROUP BY Name'

EXECUTE sp_executesql @sql, @paramDefinitions, @psID, @existingRecordCount 
```

所以，我希望我的记录计数在`@existingRecordCount`变量中，但我收到以下错误：

> “输出”附近的语法不正确。
> 必须声明标量变量“@existingRecordCount”。

我究竟做错了什么？

提前致谢。我正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T15:39:36.273

虽然这不需要是动态 SQL：

```
ALTER PROCEDURE [dbo].[selectRecords]
  @psID INT
AS
BEGIN
  SET NOCOUNT ON; 

  DECLARE @rc INT;

  SELECT @rc = COUNT(Name) 
    FROM dbo.Asset_Log
    WHERE ID = @psID;
END
GO 
```

我假设这里还有其他你没有分享的逻辑，这使它成为必要。如果是这样的话：

```
ALTER PROCEDURE [dbo].[selectRecords]
  @psID INT
AS
BEGIN
  SET NOCOUNT ON; 

  DECLARE 
    @rc     INT = 0,
    @sql    NVARCHAR(1000),
    @params NVARCHAR(1000);

  SET @params = N'@psID INT, @rc INT OUTPUT';

  SET @sql = N'SELECT @rc = COUNT(Name)
    FROM dbo.Asset_Log
    WHERE ID = @psID;';

  EXEC sp_executesql @sql, @params, @psID, @rc OUTPUT;
END
GO 
```

我也看不出有什么理由`GROUP BY Name`。您是否观察到如何将查询从单个结果更改为每个名称一行？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:40:45.430

删除`Dynamic Query`语法和`Group By Clause`

```
ALTER PROCEDURE [dbo].[selectRecords]
@psID INT --parameter passed in
AS       
SET NOCOUNT ON;
SELECT COUNT(Name) as existingRecordCount FROM dbo.Asset_Log WHERE ID=@psID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T12:05:16.713

**试试这个，它的工作**

```
CREATE PROCEDURE [dbo].[deleteItem]
    @ItemId int = 0,
    @status bit OUT

AS
Begin
   DECLARE @cnt int;
   SET @status =0;  --Set value to variable 
   return @status;
End 
```

**执行存储过程**

我们在执行存储过程时将 ItemId 传递为 6

输出将收到“@statuss”变量

```
DECLARE @statuss bit;
EXECUTE  [dbo].[deleteItem] 6, @statuss output;
PRINT @statuss; 
```

# wordpress - 在 Wordpress 中使用自定义 PHP 函数文件

> ID：11507415
> 
> 赞同：0
> 
> 时间：2012-07-16T15:25:35.377
> 
> 标签：wordpress

我写了一堆功能（3 个功能文件，search.php、query.php 和 vcard.php） 我试图将它们的功能带入我的 Wordpress 主题。进入 WordPress 主题根文件夹后，无论我做什么，当我尝试像在测试站点上所做的那样调用函数时，都会收到 404 错误。即../、/、./等。

我必须把我的函数放在functions.php中吗？我必须注册我的函数文件吗？任何帮助都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:55:56.473

您可以包含来自functions.php 的文件。您根据您是在子主题还是父主题中定义常量 OF_FILEPATH，然后使用它来加载包含的 php 文件，这些文件放置在主题根目录的“包含”目录中；

在functions.php中；

```
if ( STYLESHEETPATH == TEMPLATEPATH ) {
define('OF_FILEPATH', TEMPLATEPATH);
} else {
define('OF_FILEPATH', STYLESHEETPATH);
}

require_once (OF_FILEPATH . '/includes/search.php');        
require_once (OF_FILEPATH . '/includes/query.php');
require_once (OF_FILEPATH . '/includes/vcard.php'); 
```

那应该对你有用。

# c# - 你能做一个枚举值数组吗？

> ID：11507416
> 
> 赞同：0
> 
> 时间：2012-07-16T15:25:36.780
> 
> 标签：c#, arrays, enums

我正在使用带有我正在使用的方法的范围，并且我的经理要求我使用 Enum 而不是整数，所以而不是这样：

```
public virtual int MyMethod(int value)
    {
        int result = 0;

        if (value >= 0 && value <= 3333)
        {
            result = 1;
        }
        else if (value >= 3334 && value <= 6666)
        {
            result = 2;
        }
        else if (value >= 6667 && value <= 10000)
        {
            result = 3;
        }
        return result;
    } 
```

我使用这样的东西：

```
public virtual int MyMethod(int value)
    {
        int result = 0;

        if (value >= (int)EnumClass.Range.Low.Min && value <= (int)EnumClass.Range.Low.Max)
        {
            result = 1;
        }
        else if (value >= (int)EnumClass.Range.Medium.Min && value <= (int)EnumClass.Range.Medium.Max)
        {
            result = 2;
        }
        else if (value >= (int)EnumClass.Range.High.Min && value <= (int)EnumClass.Range.High.Max)
        {
            result = 3;
        }
        return result;
    } 
```

EnumClass 有其他 Enum 用于其他方法（即 Rating、Priority），所以我希望 Range 保持它自己的变量，有点像这样：

```
public static enum Rating
    {
        Low = 1,
        Medium,
        High
    };

public static enum[] Range =
    {
        enum Low
        {
            Min = 0,
            Max = 3333
        },

        enum Medium
        {
            Min = 3334,
            Max = 6666
        },

        enum High
        {
            Min = 6667,
            Max = 10000
        }  
    }; 
```

但是，在初始化该数组时出现错误，还有其他方法可以实现吗？如果可能，我想避免将它们设为三个 Enum，但如果不可避免，我将使用以下方法：

```
public static enum Rating
    {
        Low = 1,
        Medium,
        High
    };
public static enum RangeLow
    {
        Min = 0,
        Max = 3333
    };
public static enum RangeMedium
    {
        Min = 3334,
        Max = 6666
    };
public static enum RangeHigh
    {
        Min = 6667,
        Max = 10000
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:44:15.297

我认为静态常量方法非常简单，但它也消耗大量代码，并且很难立即接受。这是一种更紧凑的替代方法——静态列表将比一堆 else-if 语句更简单、更清晰：

```
// The various thresholds from your previous if statement.
var list = new List<int>() { 0, 3333, 6666, 10000 };
var min  = list.First();
var max  = list.Last(); 
```

现在你可以这样做：

```
return (value >= min && value <= max) ?
  list.TakeWhile(p => p < value).Count() :
  0; 
```

（PS 为什么你的经理要决定是否使用枚举之类的实现决策，尤其是当它是一个非常有问题的用法时？除非你做的事情非常错误，否则这感觉就像是一些非常严厉的微观管理。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:36:38.113

你被要求（或更糟的是，被告知）用扳手敲钉子。它会起作用，但令人不快，正如已经提到的，这不适合用于枚举。

我建议，如果这是一个常见的应用程序，定义了一个范围并对其进行检查，那么您将 Range 封装在一个类中（这可能只是一对最小值和最大值的属性，以及检查值的方法反对范围等等），然后使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:31:09.327

听起来您想要常量或静态只读，而不是枚举。下面未经测试的代码，但这应该如下工作：`var foo = Range.Low.Min;`

```
public static class EnumClass 
{
    public static class Range
    {
        public static class Low
        {
            public static readonly int Min = 0;
            public static readonly int Max = 3333;
        }

        public static class Medium
        {
            public static readonly int Min = 3334;
            public static readonly int Max = 6666;
        }

        public static class High
        {
            public static readonly int Min = 6667;
            public static readonly int Max = 10000;
        }  
    }
} 
```

也就是说，类似于[此 CodeProject 文章](http://www.codeproject.com/Articles/19028/Building-a-Generic-Range-class)中描述的 Range 类将更适合您的用例。

# magento - 事件/观察者输入数据库

> ID：11507420
> 
> 赞同：0
> 
> 时间：2012-07-16T15:25:48.433
> 
> 标签：magento

从管理部分下订单后，我有一个事件观察者创建一个日志。如何将其插入数据库而不是日志文件？谁能提供一个好的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:48:58.803

[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-b​​asics/](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-basics/)

首先，您需要将 setup/read/write 部分添加到您的 config.xml。假设您的模块是测试/演示，那么您的设置部分可能看起来像这样：

```
 <models>
     <demo>
        <class>Test_demo_Model</class>
        <resourceModel>Demo_mysql4</resourceModel>
     </demo>
     <demo_mysql4>
        <class>Test_Demo_Model_Mysql4</class>
        <entities>
           <demo>
              <table>test_demo</table>
           </demo>
        </entities>
     </demo_mysql4>
  </models>
  <resources>
     <demo_setup>
        <setup>
           <module>Test_demo</module>
           <class>Test_Demo_Model_Resource_Mysql4_Setup</class>
        </setup>
        <connection>
           <use>core_setup</use>
        </connection>
     </demo_setup>
     <demo_write>
        <connection>
           <use>core_write</use>
        </connection>
     </demo_write>
     <demo_read>
        <connection>
           <use>core_read</use>
        </connection>
     </demo_read>
  </resources> 
```

此时我们需要创建初始化模型以便 magento 加载它。'demo/ **_** ' 可以是 'demo/whateveryouwant' 只要你在整个模块中保持whateveryouwant 相同。'id' 是 magento 用于此模型的主键和标识符。

```
//Test/Demo/Model/Mysql4/Comment.php
class Test_Demo_Model_Mysql4_Comment extends Mage_Core_Model_Mysql4_Abstract
{
    protected function _construct()
    {
        $this->init('demo/________', 'id');
    {
} 
```

从这里您将需要创建数据库安装脚本。这可以通过简单地创建文件 Test/Demo/sql/demo_setup/mysql4-install-0.1.0.php 来完成，其中 0.1.0 是配置文件中使用的版本号。它看起来像这样：

```
$installer = $this;
$installer->startSetup()
$installer->run("
    #your create table goes here
");
$installer->endSetup(); 
```

这将做的是创建你的表，你可以使用

```
CREATE TABLE {$installer ->getTable('demo/_____') as defined in your configuration file to create the table name used in the file. This will also create an entry in the table core_resource that will specify the name and version number. In order to make a modification to the table you'll need to delete the original table as well as it's entry in core_resource. At this point you'll want to create a model to manage the data. Here's an example of that for a table that looks like: 

//comment  -String
//poster   -String
//Id       -int autoincrement
public function addComment($comment, $poster)
{
    $comment = Mage::getModel('Demo/______');
    $comment->setComment($comment);
    $comment->setPoster($poster);
    $comment->save();
} 
```

对于诸如 poster_id 之类的列名，您将使用 setPosterId。使用驼峰式，每个大写字母在手前表示一个下划线。

海报_ID -> 海报ID 海报ID -> 海报ID

从数据库中获取值：

```
//using the same database example as above
public function getAllByPoster($poster)
{
    $collection = Mage::getModel('Demo/________')->getCollection();
    $collection->addFilter('poster', $poster);
    return collection;
} 
```

这将返回特定海报的所有帖子。但是有一个问题，尚未为此类定义获取集合。在我们可以看到如何从 getAllByPoster 显示这些结果之前，我们要创建最后一个文件。

```
//Test/Demo/Model/Mysql4/Comment/Collection.php
class Test_Demo_Model_Mysql4_Comment_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract
{
    protected function _construct()
    {
        $this->_init('comments/comment');
    }
} 
```

至此，我们拥有了使用 magento 的类读取和写入数据库所需的一切。要打印一个集合，我们只需：

```
foreach (Mage::getModel('demo/_____')->getAllByPoster($id) as $something) 
```

并显示我们希望从中获得的各个属性。

# windows-phone-7 - 是否可以在 Windows Phone 的应用程序中启动另一个应用程序？

> ID：11507422
> 
> 赞同：1
> 
> 时间：2012-07-16T15:26:05.143
> 
> 标签：windows-phone-7, windows-phone-7.1

是否可以在 Windows Phone 的应用程序中以编程方式启动另一个应用程序？

[我看到这里](https://stackoverflow.com/q/7076940/252398)已经问过一个关于是否可以在另一个应用程序中启动安装在手机中的第三方应用程序的问题。

我看到这是一个老问题（在 Windows Phone 7.0 时代），希望 7.5 版是否引入了这个功能。我搜索了很多，但我发现大部分是外部功能列表，而不是 Mango 的开发人员友好功能列表。

谁能确认它仍然不可能？如果是这样，是否有任何可行的方法或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:31:38.240

我确认这是不可能的，并且没有已知的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:51:15.237

不幸的是，目前无法启动第三方应用程序，我觉得这是一个非常好的决定。作为用户，这可能会导致非常侵入性的行为（开发人员可能会搞砸我的工作流程），尽管我了解此类功能的好处和**积极**用途。不幸的是，对于您的情况，您必须朝着不同的方向前进。

但是，您可以启动任务 - 操作系统的一部分，如浏览器、电话、消息传递等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:09:10.257

它目前是不可能的。

我想这在 windows phone 8 中是可能的。因为 Win8 有一些内置功能可以帮助你做到这一点。

否则，如果您想使用 pdf 查看器等内置应用程序在网络上打开文件，只需在 webbrosertask 中提供指向 webbrowser 的链接，剩下的事情就会完成。

# c - 为什么使用“extern”创建变量是声明而不是定义？

> ID：11507423
> 
> 赞同：3
> 
> 时间：2012-07-16T15:26:06.743
> 
> 标签：c, declaration, definition

我在阅读时遇到了以下问题......只是无法理解这背后的逻辑。

```
auto int c;
static int c;
register int c;
extern int c; 
```

假设前三个是定义，最后一个是声明..怎么来的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:29:26.030

最后一个`extern`没有为`c`. 它仅表明`c`存在某处，并且链接器应该能够将其解析为在`c`其他地方定义的某个全局。

如果您编译并链接了单个 .c 文件并尝试使用最后一个文件，`c`则会出现链接器错误。对于前 3 `c`s，您不会因为它们在当前编译单元中具有实质内容（它们已被*定义）。*

如果您想了解有关`extern`声明与定义的更多信息，这里有一篇关于该主题的[好文章。](http://www.geeksforgeeks.org/archives/840)引用那篇文章：

> 变量/函数的声明只是声明变量/函数存在于程序中的某处，但没有为它们分配内存

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T15:29:43.773

关键字`extern`引用了变量（或可能函数）的定义在别处的事实；然后编译器将此声明链接到单独文件中定义的主体。前面的三个关键字声明了一个声明——变量没有在别处定义，因此也没有`prototypes`。

例如，假设您有一个像这样的项目结构：

```
..
-- main.c
-- client.c
-- client.h
-- server.c
-- server.h 
```

当`gcc`使用头文件编译这些时，头文件通常`define`是程序所需的变量。这会分配一个链接到`declaration`.c 文件中的符号的符号。这就是编译器如何将各种项目文件与`.o`对象链接起来。`objdump -d`通过使用（假设您在 Linux 上）调试程序的实际反汇编结构，您可能会对这一切如何出现更感兴趣。

享受和好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T15:29:52.133

前 3 个语句实际上为`int`.

最后一个没有。它告诉编译器的只是在另一个编译单元的某个地方，将定义一个`int`被调用的。`c`

如果未定义，稍后您将收到链接器错误。不出所料，链接器会说`c`未定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T15:30:06.067

四句是声明，但前三句也是定义。

阅读[此处](http://en.wikipedia.org/wiki/Declaration_(computer_programming))了解声明和定义之间的区别。

[auto](http://msdn.microsoft.com/en-us/library/6k3ybftz(v=vs.80).aspx)、[static](https://stackoverflow.com/questions/572547/what-does-static-mean-in-a-c-program)和[register](https://stackoverflow.com/questions/578202/register-keyword-in-c)是变量的修饰符。阅读有关它们的文档。

[extern](http://en.wikipedia.org/wiki/External_variable)只是声明，因为您告诉编译器变量或函数的定义在其他地方-在另一个`C`模块中-。

希望能帮助到你！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-16T15:30:39.450

前三个是定义，因为它将为变量留出存储空间。

最后一个不会为`int c`. 它只会使用在别处分配和命名的存储空间。

# mupdf - 是否可以使用 MuPDF 保存修改后的 PDF？

> ID：11507424
> 
> 赞同：6
> 
> 时间：2012-07-16T15:26:07.343
> 
> 标签：mupdf

我使用一些 MuPDFs 修改 API 编辑了一个 PDF，但我不知道如何将修改后的 PDF 保存到磁盘。这可能吗？如果是这样，我该如何保存此 PDF？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T07:18:59.820

您需要调用 pdf_write_document。但是，这是在 1.0 版发布之后添加的，因此如果您想使用它，您需要从 Git 存储库中获取最新的源代码。

有人告诉我 mupdfclean.c 中有代码演示了该函数的使用。

# java - JTable - 无法将值添加到新创建的列

> ID：11507426
> 
> 赞同：1
> 
> 时间：2012-07-16T15:26:12.620
> 
> 标签：java, swing, jtable

我有一个要求，根据 a 的内容`HashMap<String, String>`，我必须从表中添加/删除列。虽然我可以添加/删除列，但我的问题是，由于某种原因，当我创建新列时，没有在相应的列中设置值。我无法弄清楚为什么。

发布[SSCCE](http://sscce.org/)供您参考。你能告诉我我做错了什么吗？

```
import java.util.HashMap;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.JTableHeader;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

public class TableTest extends javax.swing.JFrame {

    /**
     * Creates new form TableTest
     */
    public TableTest() {
        initComponents();
    }

    private void resetTable(){
        TableColumnModel tableColumnModel = infoTable.getColumnModel();
        DefaultTableModel  tableModel = (DefaultTableModel) infoTable.getModel();

        JTableHeader tableHeader = infoTable.getTableHeader();
        tableColumnModel.getColumn(0).setHeaderValue("");

        for(int columnIndex = 0; columnIndex < tableColumnModel.getColumnCount(); columnIndex++){
           if(columnIndex > 3){
               infoTable.removeColumn(tableColumnModel.getColumn(columnIndex));
           }else{
                tableModel.setValueAt("", 0, columnIndex);
                tableModel.setValueAt("", 1, columnIndex);
           }
        }

        tableHeader.repaint();
        infoTable.revalidate();
        infoTable.repaint();
    }

    private void createTable(HashMap<String, String> parameterMap){

        resetTable();
        TableColumnModel tableColumnModel = infoTable.getColumnModel();
        DefaultTableModel  tableModel = (DefaultTableModel) infoTable.getModel();

        if(!parameterMap.isEmpty()){
            int columnCount = 1;
            for (String key : parameterMap.keySet()) {
                if(columnCount >= tableColumnModel.getColumnCount()){
                    tableModel.addColumn("");
                    tableColumnModel.addColumn(new TableColumn());
                }
                columnCount++;
            }
        }
        infoTable.revalidate();
        infoTable.repaint();
    }

    private void updateInformationTable(HashMap<String, String> parameterMap){

        createTable(parameterMap);

        TableColumnModel tableColumnModel = infoTable.getColumnModel();
        DefaultTableModel  tableModel = (DefaultTableModel) infoTable.getModel();

        JTableHeader tableHeader = infoTable.getTableHeader();

        if(!parameterMap.isEmpty()){
            tableColumnModel.getColumn(0).setHeaderValue(parameterMap.get("timer"));

            int columnCount = 1;
            for (String key : parameterMap.keySet()) {

                tableModel.setValueAt((key.contains("unknown") ? "" : key), 0, columnCount);
                tableModel.setValueAt(parameterMap.get(key), 1, columnCount);
                columnCount++;
            }
        }

        tableHeader.repaint();
        infoTable.revalidate();
        infoTable.repaint();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        infoTable = new javax.swing.JTable();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        infoTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
            },
            new String [] {
                "Title 1", "", "", ""
            }
        ));
        infoTable.setAutoscrolls(false);
        infoTable.setShowHorizontalLines(false);
        infoTable.setShowVerticalLines(false);
        infoTable.setAutoCreateColumnsFromModel(false);
        jScrollPane1.setViewportView(infoTable);

        jButton1.setText("3 Columns");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setText("5 Columns");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(jButton1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 577, Short.MAX_VALUE)
                .addComponent(jButton2))
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 739, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(243, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jButton2))
                .addContainerGap())
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(0, 25, Short.MAX_VALUE)))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("param1", "value1");
        map.put("param2", "value2");
        map.put("param3", "value3");

        updateInformationTable(map);
    }

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("param1", "value1");
        map.put("param2", "value2");
        map.put("param3", "value3");
        map.put("param4", "value4");
        map.put("param5", "value5");

        updateInformationTable(map);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            javax.swing.UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel" /*
                     * UIManager.getSystemLookAndFeelClassName()
                     */);
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TableTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TableTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TableTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TableTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new TableTest().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTable infoTable;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:13:20.880

更新表格的代码很多。尝试更新模型。表将重新呈现自己。我不得不再改一行：

infoTable.setAutoCreateColumnsFromModel(true);

而且，Hashmap 不适合模型数据。如何从 HashMap 轻松获取第 3 行第 2 列的值？

```
import java.util.HashMap;
import java.util.Map;

import javax.swing.table.DefaultTableModel;

public class TableTest extends javax.swing.JFrame {

    /**
     * Creates new form TableTest
     */
    public TableTest() {
        initComponents();
    }

    private void updateInformationTable(HashMap<String, String> parameterMap){

        infoTable.setModel(new MyTableModel(parameterMap));
    }

    private class MyTableModel extends DefaultTableModel{

        private Map<String, String> data;

        public MyTableModel(Map<String, String> data){
            this.data = data;
        }

        public int getRowCount() {

            return 1;
        }

        public int getColumnCount() {
            return data != null ? data.size() : 0;
        }

        public Object getValueAt(int rowIndex, int columnIndex) {

            //FIXME : Return the value here 
            return rowIndex + "," + columnIndex;
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        infoTable = new javax.swing.JTable();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        infoTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
            },
            new String [] {
                "Title 1", "", "", ""
            }
        ));
        infoTable.setAutoscrolls(false);
        infoTable.setShowHorizontalLines(false);
        infoTable.setShowVerticalLines(false);
        infoTable.setAutoCreateColumnsFromModel(true);
        jScrollPane1.setViewportView(infoTable);

        jButton1.setText("3 Columns");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setText("5 Columns");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(jButton1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 577, Short.MAX_VALUE)
                .addComponent(jButton2))
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 739, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(243, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jButton2))
                .addContainerGap())
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(0, 25, Short.MAX_VALUE)))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("param1", "value1");
        map.put("param2", "value2");
        map.put("param3", "value3");

        updateInformationTable(map);
    }

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("param1", "value1");
        map.put("param2", "value2");
        map.put("param3", "value3");
        map.put("param4", "value4");
        map.put("param5", "value5");

        updateInformationTable(map);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            javax.swing.UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel" /*
                     * UIManager.getSystemLookAndFeelClassName()
                     */);
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TableTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TableTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TableTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TableTest.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new TableTest().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTable infoTable;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    // End of variables declaration
} 
```

# jquery - jquery 在 IE8 上无法正常运行

> ID：11507430
> 
> 赞同：0
> 
> 时间：2012-07-16T15:26:25.470
> 
> 标签：jquery, internet-explorer, computability

我已经构建了一个页面，它从数据库动态加载数据并使用 jQuery 向页面添加 html 标签和类

html是

```
 <fieldset>
        <legend>msgs</legend>
            <div id="maya">
                <!--Here will come the maya msgs-->
            </div>
    </fieldset>
<fieldset>
    <legend>recommendation</legend>

    <div id="recommendText"></div>

    <div id="rate" class="rating">
        <div id="star1"></div>
        <div id="star2"></div>
        <div id="star3"></div>
        <div id="star4"></div>
        <div id="star5"></div>
    </div>
</fieldset> 
```

js是

```
 date = '<label id="tbDate" for="tbMessage" class="label_info">'+data[i++]+'</label>';
            link = '<label id="tbMessage" class="label_info_text" ><a href="'+data[i++]+'" target="_blank">'+data[i++]+'</label>';

      $("#maya").append('<div class="label_maya_info">'+date+link+'</div>'+clear);
      $('#stars1').addClass("star");
     $('#stars2').addClass("halfStar"); 
```

它适用于 FF 和 chrome，但不适用于 IE8。

页面链接是[http://www.s-maof.com/PRO/index.php?fkapp=9](http://www.s-maof.com/PRO/index.php?fkapp=9) （在搜索框中查找“649012” - 只有一个）。

高图表也不起作用（仅在 IE 上）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:33:00.420

谢谢大家，我想通了。问题不在于 jquery。它的语法是：

```
link = '<label id="tbMessage" class="label_info_text" ><a href="'+data[i++]+'" target="_blank">'+data[i++]+'</a></label>';  //added closing </a> 
```

addClass 不起作用，因为我没有正确“css”这些元素。

# iphone - 按下 UIButton 时允许 UIScrollView 滚动

> ID：11507433
> 
> 赞同：4
> 
> 时间：2012-07-16T15:26:34.140
> 
> 标签：iphone, objective-c, ios, ipad

我在 UIScrollView 中有一个 UIView，在 UIView 里面是一个按钮。问题是当我按下该按钮时，按住它（在这种情况下按钮状态被按下）并尝试滚动，我的滚动视图不会滚动。它应该在其中。UIView 中有一个手势识别器，如果我的手按下 UIButton 并滚动，我正在尝试使用它的一个委托来允许滚动滚动视图。我该怎么做呢？

基本上总结一下，如果按下/按住按钮，我需要将触摸事件传递给滚动视图。如果它是来自按钮的触摸事件，那么显然它应该触发按钮的动作而不是滚动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T20:58:15.450

老问题，但我刚遇到这个问题，并认为人们会从答案中受益。如果在 UIScrollView 中有 UIControl，默认情况下滚动不会取消触摸事件。解决方案是像这样子类化 UIScrollView：

```
@implementation PaginationScrollView {}

- (id)init {
    self = [super init];
    if (self) {
        self.canCancelContentTouches = YES;
    }
    return self;
}

- (BOOL)touchesShouldCancelInContentView:(UIView *)view {
    return YES;
}

@end 
```

如果视图是 UIControl，则 touchesShouldCancelInContentView 的默认实现返回 NO。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-21T16:01:33.217

确保设置

```
yourScrollView.canCancelContentTouches = YES; 
```

还是行不通？因为它只取消触摸而不是**UIControlEventTouchUpInside**等**UIControlEvents**

怎么解决？将此添加到`.m`文件顶部

```
@implementation UIScrollView (TouchesShouldCancelInContentView)

- (BOOL)touchesShouldCancelInContentView:(UIView *)view {
    return YES;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:34:21.403

您不需要为 UIButton 的简单 TouchUpInside 操作添加 UIGestureRecognizer，只需执行以下操作：

```
[button addTarget:self action:@selector(buttonSelect:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后创建选择器：

```
-(IBAction)buttonSelect:(id)sender{//do stuff here} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T17:49:23.613

您可以尝试使 UIButton 不可交互：

```
button.userInteractionEnabled = NO; 
```

然后将 UITapGestureRecognizer 添加到按钮：

```
UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(buttonPressed)];
[button addGestureRecognizer:recognizer]; 
```

这样，如果点击按钮，按钮只会对触摸事件做出反应，所有其他事件都将转到滚动视图。

设置 userInteractionEnabled = NO 可能会阻止 UITapGestureRecognizer 触发其事件，在这种情况下，您可以将按钮设置为 UIView 或 UIImageView。

# magento - 如何在 Magento 控制器中运行模型？

> ID：11507434
> 
> 赞同：0
> 
> 时间：2012-07-16T15:26:38.637
> 
> 标签：magento

这是我的控制器。

```
public function mockcron_newmatchAction(){
    $task = Mage::getModel('showdown/cron::makematch');
    var_dump($task);
} 
```

这是位于的 cron 函数`app/code/local/Desbest/Showdown/Model`

```
<?php
class Desbest_Showdown_Model_Cron
{
    public function makematch(){
        $var = "apples";
        return $var;
    }
} 
```

问题是它`$task = Mage::getModel('showdown/cron::makematch');`不运行，我希望该模型运行。我该怎么办？

`false`无论我是否选择了现有模型，变量都会打印为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:36:35.773

`::`仅当您在`system.xml`XML中提供源模型时，该语法才有效。

```
ex. 
#File: app/code/core/Mage/Paypal/etc/system.xml
<source_model>paypal/config::getApiAuthenticationMethods</source_model> 
```

当您编写常规 PHP 代码时，它不起作用。你想要的语法是

```
$task = Mage::getModel('showdown/cron')->makematch(); 
```

调用`Mage::getModel('showdown/cron')`实例化您的模型对象，然后`->makematch();`根据标准 PHP 调用方法。当你说

```
Mage::getModel('showdown/cron::makematch'); 
```

您要求 magento 使用别名来实例化该类`showdown/cron::makematch`。由于这是一个无效的别名，这将始终返回 false。

# php - 带有进度条错误 php 的 HTML5 AJAX 文件上传器

> ID：11507437
> 
> 赞同：2
> 
> 时间：2012-07-16T15:26:44.160
> 
> 标签：php, jquery, ajax, html, upload

我从这里制作了一个脚本，但现在我在获取 $_POST['file'] 时遇到了问题

她是关键

索引.php

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="jquery.min.js" type="text/javascript"></script>
<script src="ajax.js" type="text/javascript"></script>
<style>
progress
{
    background-color:#FF0000;
    width:250px;
    min-height:2px;
    height:4px;
    border:none;
}
progress::-webkit-progress-bar-value, progress::-webkit-progress-value, progress::-moz-progress-bar, progress::progress-bar
{
    background-color:#0F0;
}
</style>
</head>

<body>
<form enctype="multipart/form-data" method="post">
    <input name="file" type="file" id="file" />
    <input type="button" value="Upload" />
</form>
<div id="prc"></div>%<br>
<progress value="0" min="0" max="100"></progress>
<div id="det"></div>
</body>
</html> 
```

ajax.js

```
// JavaScript Document
$(function(){
    $(':file').change(function(){
        var file = this.files[0];
        name = file.name;
        size = file.size;
        type = file.type;
        $("#det").html("NAME: "+name+"<br/>SIZE: "+size+"<br/>TYPE: "+type);
        //your validation
    });

    $(':button').click(function(){
        var formData = new FormData($('form')[0]);
        $("#data").html(formData);
        $.ajax({
            url: 'upload.php',  //server script to process data
            type: 'POST',
            xhr: function() {  // custom xhr
                myXhr = $.ajaxSettings.xhr();
                if(myXhr.upload){ // check if upload property exists
                    myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
                }
                return myXhr;
            },
            //Ajax events
            //beforeSend: beforeSendHandler,
            success: function(html) {
                $("#mess").html(html);
            },
            error:function(html) {
                $("#mess").html(html);
            },
            enctype: 'multipart/form-data',
            // Form data
            data: formData,
            //Options to tell JQuery not to process data or worry about content-type
            cache: false,
            contentType: false,
            processData: false
        });
    });
    function progressHandlingFunction(e){
        if(e.lengthComputable){
            $('progress').attr({value:e.loaded,max:e.total});
            $('#prc').html(e.loaded);
        }
    }
}); 
```

以及当我收到错误时的“upload.php”脚本

```
<?php
if(isset($_POST['file'])){
    echo $_POST['file'];
}else{
    echo 'file is not set';
}
?> 
```

结果

```
NAME: ALISON LIMERICK - Where love lives.mp3
SIZE: 16584832
TYPE: audio/mp3

> file is not set 
```

progresbarr 运行良好，但在 php 中出现问题

来人帮帮我？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:30:38.343

`$_FILES`在处理使用 Post 上传的文件时需要使用。您可以在`$_FILES` [此处](http://php.net/manual/en/reserved.variables.files.php)找到有关信息。

可以在此[链接中找到有关处理文件上传的更多信息](http://www.php.net/manual/en/features.file-upload.php)

# c# - Hybrid Asynchronous / Synchronous Architecture

> ID：11507438
> 
> 赞同：2
> 
> 时间：2012-07-16T15:26:44.897
> 
> 标签：c#, .net

This question has been obsessing me for a few weeks but I was too much in rush to tackle it with sensible hindsight. I finally delivered a quick and dirty solution to the agog customer to relieve his fragile nerves (& also mine, as a matter of consequence). I am now finally taking time to examine this with a free mind.

Basically, I am facing the challenge of processing Synchronous Data (Time-Ordered Series) as fast as possible (<5ms). After trying to play around with many Rube-Goldberg-style designs, such as ordered thread pools and hybrid solutions involving parallel worker queues and other wonky far-fetched ideas, a thorough hands-on bench-work proved that sticking to a plain' old single threaded chain process was by far the best choice for data integrity and performance.

However, at some point in the bottom of the app, this gets to a certain limit. I need to broadcast data in a parallel fashion to different processors. And this is where my headache starts again. When I make the Data Hub (see below) send data to processors in an Asynchronous way (via a thread & a binary ring buffer), it is received in a scrambled order by the receiving party, and data order is corrupted.

So I am looking for a way to send data in a a parallel fashion to all processors, and keep order straight. My other concern is asynchronicity : If the Data Hub's `SendEvent` delegate is subscribed to by processes' `Receive` Method in a plain classical way (via `+=`) , how is this going to behave ?
First off, I don't want the subscriptions to be called "one by one". I am sure there is a way to parallelize this. Secondly, and above all, I do certainly not want processor A to lock the whole chain until it finishes its work.

SO here it is folks. To make a long story short I want to find a sensible way to keep sending data to processors without waiting for it to be processed, but in the same time I need each Data processor to receive the data in an ordered fashion. This might sound incompatible, but I am sure there is a smart & pretty simple way to do this (But I went so deep into this I got really confused, that's why I am asking for your help, good people)

![enter image description here](../Images/06e066fa5de32b35a8d74b274ed16e55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:23:05.517

If you are talking about a single machine in which you need to distribute the ordered series to all processors on the same machine, I would have *Data Hub*, continuing with your single-thread idea, enqueue **serially** to *N* private queues (relatively fast, so I wouldn't worry about blocking, and you get the benefit of knowing the item got enqueued to *all* the queues).

Each of these private queues would only allow dequeue from one and only processor. The likely slower "*Data Hub --> Processors*" will be called in parallel, yet not hold up the whole chain as you put it because...

You can then configure a 1-processor/queue/thread (simple to manage) or 1 queue/N-queues/similar stateless processors (this would take additional downstream work to do reordering).

In a more distributed system (e.g. multi-machine) you typically have something like *Data Hub* sending a message to a messaging "Topic", and then let the messaging infrastructure send to all the consumers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:34:54.460

It sounds like you are looking for a [Service Bus](http://en.wikipedia.org/wiki/Enterprise_service_bus "Enterprise Service Bus"). In your diagram, that would be the DATA HUB. Microsoft provides a service called [MSMQ](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx "MSMQ") that can be used for something like this, and I like to use a library called [NServiceBus](http://nservicebus.com/ "NServiceBus") to simplify things.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:30:48.243

Not sure if it is the best fit, but [zeromq](http://www.zeromq.org/) might work for you here. You can have queues that are all in-memory (fast), you can fan-out and then condense messages to multiple configurations (and I think it take care of order etc).

I have no experience using zeromq on a project, however, it does have some compelling features and seems well supported (with many client languages, C# included).

[The manual page](http://www.zeromq.org/intro%3aread-the-manual) has a good introductory video showing what the tool can achieve.

# cuda - -use-fast-math 选项是否将 SP 乘法转换为内在函数？

> ID：11507440
> 
> 赞同：5
> 
> 时间：2012-07-16T15:26:50.093
> 
> 标签：cuda, nvcc, fast-math

我快速浏览了 CUDA 编程指南 wrt -use-fast-math optimizations，虽然附录 C 提到了要转换为内在函数的除法，但没有提到乘法。我问这个问题的原因是，我的内核有很多乘法。我知道 NVCC 会尝试融合乘法和加法（当使用常规的“*”和“+”运算符时，并且内在函数永远不会合并到 FMAD 操作中）。但是，如果我的代码是乘法繁重的，那么如果使用舍入 SP 内在函数会有好处`__fmul_rn`吗？

所以有两个问题：

1.  -use-fast-math 选项是否将使用“*”运算符的乘法转换为像 __fmul_rn 这样的 SP 内在函数？

2.  手动编码乘法以显式使用 __fmul_rn 是否会带来性能优势？一个例子或一些数字可以帮助我理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T17:07:15.390

“独立”单精度乘法始终编译为硬件指令（“内在”）。没有其他类型的浮点乘法指令。nvcc 中的 -use_fast_math 选项对为计算能力 1.x 目标发出的浮点乘法指令没有影响。在计算 2.x 和 3.x 目标上，它将编译器置于兼容模式，所有单精度乘法指令将`mul.ftz.f32`（刷新为零）。

您提到的浮点内在函数 ( `__fmul_{rm,rn,rp,rz,ftz,sat}`) 仅提供对 IEEE 舍入行为的显式控制。我不相信它们在 Fermi 或 Kepler GPU 上的吞吐量差异。

# spring - 当从 SimpleMappingExceptionResolver 映射异常时，拦截器中的 ModelAndView 为空

> ID：11507448
> 
> 赞同：3
> 
> 时间：2012-07-16T15:27:10.107
> 
> 标签：spring, spring-mvc, exception-handling, interceptor

好的，所以我在一个我们使用 spring 的项目中，据我所知，何时引发运行时异常并由 SimpleMappingExceptionResolver 处理，然后当我们注册的拦截器的 postHandle 方法被调用时，它是一个空模型和看法。

我不太了解spring MVC如何挂在一起，但我认为SimpleMappingExceptionResolver将异常类型映射到ModelAndView。并且这个 ModelAndView 对象可用于拦截器将内容填充到模型中。如果不是这种情况，请随时告诉我为什么，如果是，为什么我在拦截器中看到 null ModelAndView？

干杯，克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T12:52:37.557

我正在扩展@masted 的评论。真正的拦截器没有被调用，当请求由 ExceptionResolver 处理时，根据[文档](http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html#afterCompletion%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse,%20java.lang.Object,%20java.lang.Exception%29)，该`HanlerInterceptor#afterCompletion`方法是在视图渲染之后调用的，所以它也对我们没有帮助。

我对此的解决方案是创建我自己的**ExceptionHandler**来扩展`AbstractHandlerMethodExceptionResolver`和自动连接我的拦截器。然后在将视图名称设置为我`ModelAndView`并将异常放在那里之后，我调用我的拦截器的`postHandle()`方法。

它相对干净，是我让它工作的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T08:59:01.430

我不确定我们是否有相同的情况，但是对于我的情况，当系统因为 ModelAndView 为空而无法解析 View 时，我想显示一个页面，通知“未找到 404 请求”。最初我尝试使用 SimpleMappingExceptionResolver 并将“404 请求未找到”的视图名称放入地图（视图名称称为“/404NotFound”）。但我找不到正确的例外。

最后，我为解决我的问题所做的是修改 web.xml 并将其放入：

```
 <error-page>
    <error-code>404</error-code>
    <location>/404NotFound</location>
    </error-page> 
```

而且由于我们不需要任何控制器来处理 404NotFound（直接渲染它），我将这段代码放在 mvc 的应用程序上下文中。

```
 <mvc:view-controller path="/404NotFound"/> 
```

# asp.net-mvc - 级联下拉列表 - 值不能为空。参数名称：字符串错误

> ID：11507450
> 
> 赞同：0
> 
> 时间：2012-07-16T15:27:16.947
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我希望有人可以帮助我解决以下问题，这可能非常基础，但我仍在学习 MVC 3.0（以及一般的编码）。

我得到的**值不能为空。**参数名称：尝试根据状态 DropDownList 中的值将数据加载到我的城市 DropDownList 时，我的控制器中出现**字符串错误。**

我希望我只是缺少一些基本的东西。**JsonResult getCity**调用中的**int id = int.Parse(state_id)**行引发错误。

 **这是我的控制器：

```
public ActionResult Create()
    {
        ViewBag.sessionName = HttpContext.Session["SPCompanyName"].ToString();
        var compID = HttpContext.Session["SPCompanyAccountID"].ToString();
        ViewBag.companyID = compID;

        List<SelectListItem> list = new List<SelectListItem>();
        list.Add(new SelectListItem { Text = "Select State", Value = "Default State" });
        var states = (from c in simpleDB.simpleState select c).ToArray();
            for (int i = 0; i < states.Length; i++)
            {
                list.Add(new SelectListItem { Text = states[i].stateFull, Value = states[i].Id.ToString() });
            }
        ViewData["states"] = list;//data for DropdownList State

        List<SelectListItem> list1 = new List<SelectListItem>();
        list1.Add(new SelectListItem { Text = "Select City", Value = "Default City" });
        ViewData["cities"] = list1;//data for Dropdownlist City
        return View();

    }

    [AcceptVerbs(HttpVerbs.Get)]
    public JsonResult getCity(string state_id)
    {
        int id = int.Parse(state_id);
        var myData = (from m in simpleDB.simpleCity where m.simpleStateId == id select new { text = m.cityFull, value = m.Id });

        return this.Json(myData, JsonRequestBehavior.AllowGet);
    } 
```

这是我的视图的完整代码：

```
@using (Html.BeginForm(FormMethod.Post)) 
```

{

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function () {
    $('#StateId').change(function () {
        var state_id = $(this).val(); //get State ID when select value change

        $.getJSON("/SPServiceLocation/getCity/" + state_id, {},

    function (myData) {
        var options = '';
        for (var i = 0; i < myData.length; i++) {
            options += '<option value="' + myData[i].value + '">' + myData[i].text + '</option>';
        }
        $("#CityId").html();
        $("#CityId").html(options);
    });
    });
});
</script>  

@Html.ValidationSummary(true)
<fieldset>
    <legend>Step 4: Service Areas</legend>

    @Html.HiddenFor(model => model.SPCompanyAccountID, new { @Value = ViewBag.companyID })

    <div class="editor-label">
        @Html.LabelFor(model => model.state)
    </div>
    <div class="editor-field">
        @Html.DropDownList("state", (IEnumerable<SelectListItem>)ViewData["states"], new { id = "StateId", @class = "chzn-select" })
        @Html.ValidationMessageFor(model => model.state)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.city)
    </div>

    <div class="editor-field" id="SP_SelectCity">
        @Html.DropDownList("city", (IEnumerable<SelectListItem>)ViewData["cities"], new { id = "CityId", @class = "chzn-select" })
        @Html.ValidationMessageFor(model => model.city)
    </div>

    <p>
        <input type="submit" value="Submit" />
    </p>
</fieldset> 
```

我已经查看了这个控制器和视图代码几个小时了，只是不知道问题可能是什么。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:04:15.860

我不知道从哪里开始。看着这段代码，我真的不知道从哪里开始。我可以编写有关此代码有多糟糕的书籍库。但对于初学者：

```
public JsonResult getCity(string state_id) 
```

应该：

```
public JsonResult getCity(string id) 
```

这应该可以解决您的错误。或者可能不是。谁知道。尝试。

让我列举一些当我查看您的代码时直接打动我的事情（我只是看了一眼）：

*   `@using (Html.BeginForm(FormMethod.Post))`- 嗯，你这是什么意思？没有这样的超载。您正在调用此重载：`public static MvcForm BeginForm(this HtmlHelper htmlHelper, object routeValues);`. 可能你的意思是`@using (Html.BeginForm())`？
*   返回视图而不将模型传递给它：`return View();`但似乎使用强类型视图
*   `ViewBag.XXX`而不是使用视图模型
*   `list.Add(new SelectListItem { Text = "Select State", Value = "Default State" });`而不是使用 DropDownListFor 帮助器的适当重载，允许您添加默认值作为第三个参数
*   javascript 中一个可怕的硬编码 url：`$.getJSON("/SPServiceLocation/getCity/" + state_id`而不是使用 Url 助手
*   用于操作 DOM 的字符串连接：`options += '<option value="' + myData[i].value + '">' + myData[i].text + '</option>';`
*   `@Html.HiddenFor(model => model.SPCompanyAccountID, new { @Value = ViewBag.companyID })`不做你认为它做的事。您不能覆盖 value 属性。这只会在您的隐藏字段上生成 2 个值属性：一个带有大写`V`字母，一个带有小写字母`v`。
*   一行只有作者才能理解的 javascript 代码：`$("#CityId").html();`
*   不遵守 C#/.NET 属性命名约定：`model => model.state`. 在 .NET 标准约定中，属性名称应以大写字母开头
*   ...

* * *

是的，基本上我会从头开始。这是我推荐的另一种方法，使用视图模型：[https ://stackoverflow.com/a/4459084/29407](https://stackoverflow.com/a/4459084/29407)**

# java - 上传到服务器时从 APK 获取信息

> ID：11507451
> 
> 赞同：2
> 
> 时间：2012-07-16T15:27:17.590
> 
> 标签：java, php, android, .net, jakarta-ee

有没有办法从 Android .apk 文件中获取信息？当我将 apk 上传到我自己的服务器或使用 php、java 或其他任何东西上传时，诸如包名称、应用程序名称和版本号之类的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:29:09.233

是的，您可以使用[apktool](http://code.google.com/p/android-apktool/)来获取 AndroidManifest.xml 文件并提取您想要的信息。

apk 实际上只是一个 zip 文件，在使用其他工具之前，您可能需要先尝试解压缩它，看看是否有您想要的信息。

# php - 用户搜索引擎 - 来回走动

> ID：11507459
> 
> 赞同：0
> 
> 时间：2012-07-16T15:27:36.390
> 
> 标签：php, sql, caching, search

我正在研究一个搜索引擎。用户可以根据特定参数（例如年龄、性别、城市、头发颜色）搜索其他用户。他还能够以不同的方式对结果进行排序。

在搜索结果页面上，您可以看到 10 个配置文件，如果单击它们，您将进入另一个页面（配置文件页面），您可以在其中获得有关该单个用户的更多信息。

现在在个人资料页面上查看特定用户的用户现在应该可以从搜索结果中来回切换到下一个或上一个用户。因此，您必须存储用户选择的特定参数，并且随着用户继续从一个用户转到下一个用户，您还必须一遍又一遍地运行整个搜索查询。这对我来说看起来不太好，我考虑将所有用户 ID 临时存储在会话中（以前的用户最多 200 个，即将到来的用户最多 200 个）以避免存储参数并在用户每次访问另一个配置文件时运行搜索查询页。

这是一个好方法还是您有其他解决方案？

最好的问候和提前感谢您的帮助，

弗雷迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:31:04.570

您可以简单地将 id 作为数组存储在会话中，然后将下一个/上一个链接放置到数组中的下一个/上一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:33:07.377

总匹配数很少（例如，低于 200），在会话中存储 ID 是非常好的。如果您可能期望搜索中有大量结果（以千计），那么更好的解决方案可能是为搜索实现一个临时表。执行搜索时，匹配项的 ID 和名称将根据用户的会话 ID 存储在临时表中。您还需要有一个定期运行并清理此旧数据表的脚本。

# ruby-on-rails - ActionMailer 无法识别路由

> ID：11507461
> 
> 赞同：0
> 
> 时间：2012-07-16T15:27:37.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, actionmailer

我有一个名为“settings_redirect”的路由，我定义如下：

**路线.rb**

```
match "/settings/redirect" => "settings#redirect", :via => "get" 
```

我想在电子邮件模板中链接到这条路线：

**mymail.html.erb**

```
<%= link_to "Manage Settings", settings_redirect_url %> 
```

然而，当我让 ActionMailer 发送电子邮件时，我得到了错误

```
{undefined local variable or method `settings_redirect_url' for #<#:0x007ffa1153de38> 
```

相同的链接在任何常规视图中都可以正常工作，只是在我尝试通过电子邮件发送时不行。同一模板中的所有其他链接也不会造成任何问题。

关于什么可能导致错误的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:38:30.837

您可以使用此表格：

```
get "settings/redirect" => "settings#redirect", :as => :settings_redirect 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:45:49.603

查看此文档，[http ://guides.rubyonrails.org/action_mailer_basics.html#generating-urls-in-action-mailer-views](http://guides.rubyonrails.org/action_mailer_basics.html#generating-urls-in-action-mailer-views)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:50:52.097

```
match "/settings_redirect" => "settings#redirect", :via => "get" 
```

# logic - 插入if逻辑有问题

> ID：11507463
> 
> 赞同：2
> 
> 时间：2012-07-16T15:27:40.247
> 
> 标签：logic, expression

我在解决这个问题时遇到了一些麻烦——也许是因为时间太晚了！

首先，我只是简单地这样做，所以这就是我所拥有的：

用户有 4 个属性修改到他们的个人资料（或者您可以将其视为数据库）：

*   年龄
*   预算
*   性别
*   运输

第一个条件是：

如果这四个属性之一不为空，那么我会显示一个图像。我已经这样做了：

```
If not empty age Then IMG or If not empty Budget then IMG 
```

等等。

我只需要一些指导：

*   如果四个中的任何 2,3 或 4 个不为空，如何显示 IMG

似乎无法理解逻辑。我想我可以做到，但它最终会变成一个很大的表达。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:06:16.890

代替

```
if (age not empty) then
    IMG
else if (budget not empty) then
    IMG
... 
```

我建议你把它写成

```
if (!(age empty && budget empty && gender empty && transport empty)) then
    IMG 
```

# php - =& 是什么意思？

> ID：11507467
> 
> 赞同：0
> 
> 时间：2012-07-16T15:27:47.820
> 
> 标签：php, operators

> **可能重复：**
> [php =& 中的引用赋值运算符](https://stackoverflow.com/questions/1768343/reference-assignment-operator-in-php)

我看到了这个例子：

```
function __construct() {
        $this->ci =& get_instance();
    } 
```

=& 是什么意思？它与“设置”或其他内容相同吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T15:28:20.700

[就是把函数返回的](http://php.net/manual/en/language.references.return.php)值作为引用赋值。

# java - 在 jsqlparser 中向 sql 查询添加语句

> ID：11507469
> 
> 赞同：2
> 
> 时间：2012-07-16T15:27:50.523
> 
> 标签：java, sql, sql-parser

我想知道是否可以使用 jsqlparser 向 sql 查询添加表达式。例如，我想在 sql 语句中添加一个列和一个值：

原始查询：“INSERT INTO `frontend`( `in_reply_to`) VALUES ( `email`);”

修改后的查询：“INSERT INTO `frontend`( `in_reply_to`, `user_id`) VALUES ( `email`, 123)”

我设法修改了一个列名，但没有添加一个。

这是我拥有的代码：

```
 ExtendedItemsListVisitor visitor = new ExtendedItemsListVisitor() {
            private List expressions = null;

            public List getExpressions() {
                return this.expressions;
            }

            public void setExpressions(ExpressionList expressionList) {
                this.expressions = expressionList.getExpressions();
            }

            public void visit(SubSelect subSelect) {
            }

            public void visit(ExpressionList expressionList) {
                this.expressions = expressionList.getExpressions();
            }
        };

        ItemsList itemsList = ((Insert)statement).getItemsList();
        itemsList.accept(visitor);
        ExpressionList expressions = (ExpressionList)visitor1.getExpressions();

        Expression expression = new StringValue(newValue);
        ExpressionVisitor visitor = new SetValueExpressionVisitor(newValue); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T23:09:51.953

我知道有点晚了。但这里有一个解决方案。首先我们创建一个测试插入语句：

```
Insert insert = (Insert)CCJSqlParserUtil.parse("insert into mytable (col1) values (1)");
System.out.println(insert.toString()); 
```

现在变体使用访问者模式添加一个新值：

```
insert.getColumns().add(new Column("col2"));
insert.getItemsList().accept(new ItemsListVisitor() {

        public void visit(SubSelect subSelect) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        public void visit(ExpressionList expressionList) {
            expressionList.getExpressions().add(new LongValue(5));
        }

        public void visit(MultiExpressionList multiExprList) {
            throw new UnsupportedOperationException("Not supported yet.");
        }
});
System.out.println(insert.toString()); 
```

但是使用访问者模式来实现它有点矫枉过正。这是简单的解决方案：

```
insert.getColumns().add(new Column("col3"));
((ExpressionList)insert.getItemsList()).getExpressions().add(new LongValue(10));
System.out.println(insert.toString()); 
```

所以是的，可以修改 JSQLParser 的 SQL 层次结构。我正在使用 JSQLParser 0.8.9 SNAPSHOT。正在进行修改以提高这种可修改性。

# javascript - 是否可以检测何时设置了内联样式属性？

> ID：11507472
> 
> 赞同：0
> 
> 时间：2012-07-16T15:28:00.677
> 
> 标签：javascript, debugging, firebug, google-chrome-devtools

我有一个错误，其中某个 div 的 style.height 属性被 Javascript 设置为 0px，但我不知道是什么代码在做这个不需要的设置。

**是否有告诉调试器在设置内联高度属性时停止执行，或者在发生这种情况时至少让我触发事件？**

问题发生在一个棘手的内部循环中，除非我真的必须这样做，否则我不想手动进行“二进制搜索”。（特别是因为罪魁祸首有可能来自事件或超时，并且很难手动查明）

编辑：在将相关元素插入主文档之前，我还需要能够执行此操作。当我可以对元素选项卡进行检查时，该错误已被触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:40:06.630

在 Chrome Dev Tools 的 Elements 选项卡中，我相信您可以右键单击该元素，并且应该有一个“Break on attribute modify”选项。

[https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#dom](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#dom)

# android - 我们如何以编程方式添加样式？

> ID：11507476
> 
> 赞同：1
> 
> 时间：2012-07-16T15:28:14.010
> 
> 标签：android, android-layout, android-styles

我已经为 TextView 编写了一种样式，并将该样式设置为我`TextView`的`style="@style/popup_window_text_style"`工作正常，没有问题。

现在我希望以编程方式为我的文本视图执行相同的样式

```
TextView textView = new TextView(mContext); 
```

有没有办法在 Java 中以编程方式完成它？

我在styles.xml 中的风格

```
<style name="popup_window_text_style">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:minWidth">60dp</item>
        <item name="android:padding">10dp</item>
        <item name="android:layout_marginLeft">1dp</item>
        <item name="android:layout_marginRight">1dp</item>
        <item name="android:background">@drawable/ctxmenu_btn_selector</item>
        <item name="android:textColor">@android:color/black</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">16sp</item>
        <item name="android:gravity">center_vertical</item>
        <item name="android:singleLine">true</item>
    </style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:41:31.463

这应该适合你：

```
textView.setTextAppearance(getApplicationContext(), R.style.popup_window_text_style); 
```

[但请注意，某些属性可能不会受到影响，可能必须按照 Android 开发人员文档中的说明](http://developer.android.com/reference/android/widget/TextView.html#setTextAppearance%28android.content.Context,%20int%29)手动设置。

不幸的是，当前的 SDK 似乎缺少任何形式的 setStyle() 方法。

# java - spring web flow：如何处理请求？

> ID：11507477
> 
> 赞同：3
> 
> 时间：2012-07-16T15:28:14.407
> 
> 标签：java, spring, servlets, spring-mvc, spring-webflow

在配置文件中，有很多元素：flow-executor、flow-registry、flow-builder-services、viewFactoryCreator、FlowHandlerAdapter、FlowHandlerMapping等。

它们按什么顺序工作？

当一个请求进来时，servlet 会将它分派给一个处理程序，然后我猜 spring web 流框架会以某种方式解析流并返回一个视图。但是spring web flow框架究竟是如何处理请求的呢？配置文件中定义的这些元素以什么顺序工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T16:07:08.227

这是从[链接](http://forum.springsource.org/showthread.php?21639-Spring-MVC-Request-Lifecycle-Diagram.)获取的请求生命周期的精美图像。[这里](http://www.javastuff.in/2011/08/lifecycle-of-request-in-spring-mvc.html)还有一篇文章为您提供生命周期事件。

![Spring MVC 请求生命周期](../Images/cfd659bc61823c8f0fdeccb8e1140678.png).

# android - 页面未在 Android 浏览器中显示

> ID：11507479
> 
> 赞同：0
> 
> 时间：2012-07-16T15:28:15.160
> 
> 标签：android, html, css

我真的很感谢这个客户端的任何和所有帮助，因为我已经查看了源代码并且无法弄清楚为什么我正在开发的这个网页中只显示其中的任何内容。

这是网址：the-irf.com/mob

此外，如果它有帮助，我注意到这发生在 Android 浏览器中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:58:55.383

好的，我使用 Moto Droid 用户代理复制了它。问题是您的样式代码：

```
<style type="text/css">footer nav{ background:transparent url(assets/images/nav.png) no-repeat center center; } @media only screen and (-moz-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5), only screen and (-o-min-device-pixel-ratio: 3/2), only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min-device-pixel-ratio: 1.5){ footer nav{ background:transparent url(assets/images/retina/1.5/nav@1.5x.png) no-repeat center center; background-size:100%; } } @media only screen and (-moz-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){ footer nav{ background:transparent url(assets/images/retina/2/nav@2x.png) no-repeat center center; } }</style><style type="text/css">.contentBox{ background:#ff0000; } 
```

这有点乱，我不确定你在做什么，但是删除这个代码然后它就可以工作了。我猜里面的东西不想在早期版本的Android上玩得很好。

另请注意，我看到您的 html 代码存在语法问题，您缺少`>`.`nav`

# css - CSS：悬停在其他元素上？

> ID：11507481
> 
> 赞同：10
> 
> 时间：2012-07-16T15:28:23.347
> 
> 标签：css, hover

简短的问题：为什么当我悬停时`background-color`of`.b`不会改变？`.a`?

**CSS**

```
.a {
    color: red;
}

.b {
    color: orange;
}

.a:hover .b {
    background-color: blue;
} 
```

**HTML**

```
<div id="wrap">
    <div class="a">AAAA</div>
    <div class ="b">BBBB</div>
</div> 
```

[http://jsfiddle.net/2NEgt/](http://jsfiddle.net/2NEgt/)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-16T15:33:19.530

你需要有`.a:hover + .b`而不是`.a:hover .b`

`.a:hover .b`将适用于像这样的结构

```
<div class="a">AAAA
  <div class ="b">BBBB</div>
</div> 
```

*如果在某些时候*你需要在 .a 和 .b 之间有一些元素，那么你需要使用`.a:hover ~ .b`，它适用于*所有后继的兄弟姐妹`.a`*，而不仅仅是下一个。

演示[http://jsfiddle.net/thebabydino/EajKf/](http://jsfiddle.net/thebabydino/EajKf/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T15:33:05.350

你不能做类似的事情`a:hover + b`吗？见[http://meyerweb.com/eric/articles/webrev/200007a.html](http://meyerweb.com/eric/articles/webrev/200007a.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-16T15:34:02.947

您可以使用 + 选择器

```
.a:hover + .b {
    background-color: blue;
} 
```

为兄弟元素应用 css，或

```
.a:hover > .b {
    background-color: blue;
} 
```

对于嵌套类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-16T15:30:33.367

因为 .b 不是 .a 的子级，所以选择器没有找到任何东西。使用 javascript 做你想做的事。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-16T15:34:17.970

你可以做两件事。

要么更改您的 HTML 以使其`.b`成为`.a`

```
<div id="wrap">
    <div class="a">AAAA
       <div class ="b">BBBB</div>        
    </div>
</div> 
```

或者

更改您的 css 以使用相邻的选择器

```
.a:hover + .b {
    background-color: blue;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T15:34:32.053

不需要 js [http://jsfiddle.net/2NEgt/3/](http://jsfiddle.net/2NEgt/3/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T15:30:48.710

当事件发生在不同的元素上时，您不应该更改兄弟的样式。它脱离了 CSS 的上下文。

使用 JavaScript 来实现这一点，例如：

```
var wrap = document.getElementById("wrap");
var aDiv = wrap.getElementsByClassName("a")[0];
var bDiv = wrap.getElementsByClassName("b")[0];
aDiv.onmouseover = function() {
    bDiv.style.backgroundColor = "red";
};
aDiv.onmouseout = function() {
    bDiv.style.backgroundColor = "white";
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-14T14:55:42.400

试着理解这个例子：
html代码

```
<p>Hover over 1 and 3 gets styled.</p>
<div id="one" class="box">1</div>
<div id="two" class="box">2</div>
<div id="three" class="box">3</div> 
```

```
<!--css-->
#one:hover ~ #three{
background-color: black;
color: white;
}
.box {
cursor: pointer;
display: inline-block;
height: 30px;
line-height: 30px;
margin: 5px;
outline: 1px solid black;
text-align: center;
width: 30px;
} 
```

当您将鼠标悬停在框 1 上时，框 3 将变为黑色

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-03T23:25:28.507

Jquery 是一个很好且简单的解决方案：

**html:**

```
<div class="a">AAA</div>
<div class="b">BBB</div> 
```

**脚本：** 如果需要，可以将此脚本放入您的 html 中。就这样。

```
<script>
      $(".a").mouseover(function(){
        $(".b").css("color", "blue"); 
      });
      $(".a").mouseleave(function(){
        $(".b").css("color", "red");
      });
</script> 
```

# android - Android OpenGL ES 应用中不同密度的分辨率

> ID：11507489
> 
> 赞同：0
> 
> 时间：2012-07-16T15:28:49.743
> 
> 标签：android, opengl-es, textures, dpi

我正在使用 OpenGL ES 为 Android 开发游戏，直到现在我只使用文件夹 drawable-hdpi 作为纹理。我最大的纹理是 1024x512。我应该为文件夹 mdpi 和 ldpi 使用哪些分辨率？或者我应该只留下 1 个文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:37:33.837

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

> 要生成这些图像，您应该从矢量格式的原始资源开始，并使用以下大小比例为每个密度生成图像：
> 
> xhdpi：2.0 hdpi：1.5 mdpi：1.0（基线）ldpi：0.75

我猜Android会缩放图像，但缩放是消耗资源的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:17:48.470

Android 内置的密度位图缩放解决方案对 GLES 应用程序并没有真正的帮助，有时甚至会破坏一些东西（例如非二次幂位图缩放）。出于这个原因（和其他原因），像[libgdx](http://libgdx.badlogicgames.com/)这样的库有自己的资产加载基础设施。

如果您想真正继续使用从 加载位图`R.drawable`，则应将图像放在 drawable-nodpi 文件夹中，以便不执行预缩放。否则，最好将其放在资产文件夹下。

如果您想针对不同的屏幕密度（或更可能的屏幕分辨率）进行缩放，您应该在代码中执行此操作。

# java - 当另一个线程启动时终止一个线程

> ID：11507492
> 
> 赞同：0
> 
> 时间：2012-07-16T15:29:01.350
> 
> 标签：java, multithreading, synchronization, thread-safety

基本上，我有一个很长的任务，由一堆序列子任务组成，如下所示：

```
class Task implements Runnable
{
    private Foo foo;

    public Task(Foo foo)
    {
        this.foo = foo;
    }

    @Override
    public void run()
    {
        doTask1(foo);
        doTask2(foo);
        doTask3(foo);
        doTask4(foo);
        // ...
        doTaskN(foo);
    }
} 
```

我需要的是只运行 s 的一个实例`Task`，如果一个实例`Task`开始，另一个`Task`s （如果有的话）应该立即终止。

我使用了一个单线程执行器：

```
Executor executor = Executors.newSingleThreadExecutor(); 
```

我将任务运行为：

```
executor.execute(new Task(foo)); 
```

这保证了一次只执行一个任务，但不幸的是它不会终止之前的任务。

* * *

但是，我决定在每 2 个子任务之间使用一个布尔标志，如下所示：

```
class BooleanHolder
{
    boolean terminate = false;
}

class Task implements Runnable
{
    private Foo foo;
    private BooleanHolder bh;

    public Task(Foo foo, BooleanHolder bh)
    {
        this.foo = foo;
        this.bh = bh;
    }

    @Override
    public void run()
    {
        bh.terminate = false;
        doTask1(foo);
        if(bh.terminate) return;
        doTask2(foo);
        if(bh.terminate) return;
        doTask3(foo);
        if(bh.terminate) return;
        doTask4(foo);
        // ...
        if(bh.terminate) return;
        doTaskN(foo);
    }
} 
```

并像这样使用它：

```
BooleanHolder bh = new BooleanHolder();

// ...

bh.terminate = true;
executor.execute(new Task(foo, bh)); 
```

但是，这似乎是低效的解决方案并且不是线程安全的。您建议更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:04:28.523

您应该使用`ExecutorService`接口，而不是`Executor`，如下所示：

```
ExecutorService executor = Executors.newSingleThreadExecutor();
Future<?> future = executor.submit(new Task(foo)); 
```

然后，您可以通过以下方法中断正在运行的任务以执行另一个任务`cancel`：

```
future.cancel(true); 
```

但是，正如@RPT 所说，您应该以响应中断的方式构建任务，否则中断信号将不会产生任何影响。如果您的任务没有抛出 的操作`InterruptedException`，您应该不时手动检查中断标志（类似于您已经做过的）：

```
@Override
public void run()
{
    ....
    if (Thread.interrupted()) {
        // Release resources and end task
    }
    ....
} 
```

顺便说一句，这解决了您的问题，但实际上并没有终止 ExecutorService 中的线程。

# c# - SQL Server 停止响应并且服务器冻结

> ID：11507494
> 
> 赞同：2
> 
> 时间：2012-07-16T15:29:06.380
> 
> 标签：c#, sql-server, asp.net-mvc-3, sql-server-2008, nhibernate

我们有一台 2008 年的 SQL Server 机器，由于某种我们仍然没有弄清楚的原因，每两周这台服务器大约在同一时间和同一天停止响应，无论是星期日还是星期六，我们检查了日志和唯一的消息我们发现是这个

> sql server 进程内存的很大一部分已被分页。

在操作系统日志中，我们发现了一条消息

> 应用程序弹出窗口：Windows - Virtual Memory Minimum Too Low：您的系统虚拟内存不足。Windows 正在增加您的虚拟内存分页文件的大小。在此过程中，可能会拒绝某些应用程序的内存请求。有关详细信息，请参阅帮助。

所以看起来操作系统的物理内存不足，我们不明白为什么每两周会发生一次，似乎内存永远不会被释放，而两周是充满所需的时间。有没有办法更好地诊断这个？我们还想知道这是否与我们使用 NHibernate 的方式有关？还是有其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-26T10:04:08.993

SQL Server 随着时间的推移消耗越来越多的内存，这是正常的。在服务器运行了几个月后，我们遇到了这个问题。SQL 的内存消耗高达数 GB，Windows 最终将其减少了……

**为您的 SQL Server 设置“最大服务器内存”应该会有所帮助。**在我们的 8 GB 服务器上，我们将其设置为 5.5 GB。

PS。设置“内存不足”电子邮件警报是一种很好的做法。它会在事情即将搞砸**之前通知。**这篇博文解释了你是如何做到这一点的[。](http://www.jitbit.com/news/194-setting-up-a-lowmemory-email-alert-on-a-windows-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:41:48.593

1）识别消耗内存的进程。使用[Process 对象](http://msdn.microsoft.com/en-us/library/ms804621.aspx)并识别消耗内存的进程（大`Private Bytes`和`Virtual Bytes`）

2)**如果**进程结果是 SQL Server，请按照 SQL Server 内存诊断步骤进行操作。请参阅[监控内存使用情况](http://msdn.microsoft.com/en-us/library/ms176018%28v=sql.105%29.aspx)和[使用 DBCC MEMORYSTATUS 监控 SQL Server 内存使用情况](http://support.microsoft.com/kb/271624)

根据已识别的内存使用者进程和可能已识别的 SQL Server 内存管理员，可以推荐适当的操作和补救措施，但在您进行尽职调查并找到原因之前，可能无法给出任何建议。

# asp.net-mvc - asp.net-mvc 中的 HTTP 模块与操作过滤器

> ID：11507496
> 
> 赞同：21
> 
> 时间：2012-07-16T15:29:09.543
> 
> 标签：asp.net-mvc, httpmodule, action-filter

我正在用 asp.net MVC3 开发一个应用程序，我有以下问题：什么时候应该写一个 HTTP 模块，什么时候应该写一个动作过滤器？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-16T16:09:57.647

1.  过滤器是更多的 MVC 做事方式，而 Http Module 是更多的 ASP.NET 做事方式。两者都通过在处理管道中提供挂钩来达到类似的目的。

2.  HttpModule 更通用，当您希望在每个请求上处理某些事情时。过滤器对于添加特定于操作的行为很有用。

3.  如果您希望每个 Http 请求仅执行一次某些操作，则应使用 HttpModule。ActionFilter 可能会在请求期间执行多次，除非您检查 IsChildActionOn。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-21T18:12:38.173

**HttpModule**在请求处理程序执行之前和之后被调用。它们旨在使开发人员能够拦截、参与或修改每个请求。可以订阅 22 个可用事件，使模块能够在流程的各个阶段处理请求。这些事件对于希望在引发关键请求管道事件时运行代码的页面开发人员很有用。如果您正在开发自定义模块并且希望针对管道的所有请求调用该模块，它们也很有用。

**过滤器**旨在在 MVC 请求生命周期之间注入逻辑。特别是在调用 de 动作之前和之后，以及在处理结果之前和之后。过滤器为用户提供了强大的方法来检查、分析、捕获和检测 MVC 项目中发生的一些事情。从 MVC5 开始，有 5 种类型的过滤器：

*   验证
*   授权
*   行动
*   结果
*   例外

因此，如果您想拦截、参与或修改[http 请求管道中的 22 个事件中](http://www.dotnetcurry.com/aspnet/747/http-request-lifecycle-events-iis-pipeline-aspnet)的特定事件，请选择**modules**。如果您的逻辑与操作方法严格相关，则最好在服务器上覆盖以下 ActionFilterAttribute 方法之一：

*   OnAction执行
*   OnActionExecuted
*   OnResultExecuting
*   OnResultExecuted

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-01T03:12:09.750

**HttpModule**是 IIS 允许 Web 应用程序通过让您将事件处理程序附加到**HttpApplication**事件来覆盖默认行为或添加自定义逻辑的方式。不同的 IIS 模式（集成或经典）甚至使用有不同的 Web.config 设置。
参考： http:
[//msdn.microsoft.com/en-us/library/ms227673 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms227673(v=vs.100).aspx)

示例：将非 www 重定向到 www URL

```
public void Init(HttpApplication application)
{
    application.PreRequestHandlerExecute += this.Application_PreRequestHandlerExecute;
}

private void Application_PreRequestHandlerExecute(object sender, EventArgs e)
{
    Uri requestUrl = HttpContext.Current.Request.Url;
    string host = requestUrl.Authority.ToLower();
    if (!host.StartsWith("www"))
    {
        HttpContext.Current.Response.Redirect(requestUrl.Scheme + "://www." + host + requestUrl.PathAndQuery);
        HttpContext.Current.Response.End();
    }
} 
```

**动作过滤器**是装饰控制器或动作方法的属性。它是 MVC 路由和操作方法之间的抽象层。使用动作过滤器，我们可以将相同的逻辑应用于多个控制器或动作方法。例如，自定义日志记录。

# matlab - Matlab中非线性方程的交叉特性

> ID：11507500
> 
> 赞同：0
> 
> 时间：2012-07-16T15:29:17.683
> 
> 标签：matlab, nonlinear-functions

我想根据施加的电流创建一个螺旋桨角速度的 Matlab 图。关键是，这需要结合两组相互依赖的数据。

首先，阻力系数`c_d`取决于角速度`omega`（我没有公式，只有数据），如下图所示 - 特征`c_d(omega)`可以很容易地线性化为`c_d(omega) = p*omega + p_0`。

其次，`omega`不仅取决于施加的电流`i`，还取决于阻力系数`c_d(omega)`。

解决这种情况的脚本，`c_d`下面是常量。必须以某种方式使用 Matlab 命令将这两者结合起来。谢谢你的帮助。

```
%%Lookup table for drag coefficient c_d
c_d_lookup = [248.9188579 0.036688351; %[\omega c_d]
    280.2300647 0.037199094;
    308.6091183 0.037199094;
    338.6636881 0.03779496;
    365.8908244 0.038305703;
    393.9557188 0.039156941;
    421.9158934 0.039667683;
    452.2846224 0.040348674;
    480.663676  0.041199911;
    511.032405  0.042051149;
    538.9925796 0.042561892;
    567.2669135 0.043242882;
    598.4734005 0.043668501;
    624.1297405 0.044264368;
    651.9851954 0.044604863;
    683.6105614 0.045200729];

subplot(2,1,1)
plot(c_d_lookup(:,1), c_d_lookup(:,2))
title('This is how c_d depends on \omega')
ylabel('c_d')
xlabel('\omega [rad/s]')

%%Calculate propeller angular speed in terms of applied current. omega
%%depends on c_d, which in turn depends on omega. The formula is:

% omega(i) = sqrt(a*i / (b * c_d(omega)))

% Where:
% i - applied current
% omega - propeller angular velocity
% a,b - coefficients

i = [1:15];
a = 0.0718;
b = 3.8589e-005;

%If c_d was constant, I'd do:
omega_i = sqrt(a .* i / (b * 0.042));

subplot(2,1,2)
plot(i, omega_i)
ylabel({'Propeller ang. vel.', '\omega [rad/s]'})
xlabel('Applied current i[A]')
title('Propeller angular velocity in terms of applied current') 
```

![在此处输入图像描述](../Images/d15469f24394033705f7e94afe485a4e.png)

**编辑：**

试图遵循**bdecaf 的**解决方案。所以我创建了一个函数`c_d_find`，如下所示：

```
function c_d = c_d_find(omega, c_d_lookup)
    c_d = interp1(c_d_lookup(:,1), c_d_lookup(:,2), omega, 'linear', 'extrap');
end 
```

我对 Matlab 函数句柄一无所知，但似乎理解这个想法......在 Matlab 命令窗口中，我键入：

```
f = @(omega) omega - sqrt(a .* i / (b * c_d_find(omega, c_d_lookup))) 
```

我希望创建正确的函数句柄。接下来我该怎么做？执行以下不起作用：

```
>> omega_consistent = fzero(f,0)
??? Operands to the || and && operators must be convertible to logical scalar
values.

Error in ==> fzero at 333
    elseif ~isfinite(fx) || ~isreal(fx) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:46:13.510

嗯……

想知道我是否理解正确 - 但看起来您正在寻找一致的解决方案。

你的方程看起来并不复杂，我会这样概述解决方案：

1.  写一个`function c_d = c_d_find(omega)`做一些插值的函数
2.  制作一个函数句柄`f = @(omega) omega - sqrt(a .* i / (b * c_d_find(omega)))`- 对于一致的欧米茄，这是零
3.  计算一个一致的欧米茄`omega_consistent =fzero(f,omega_0)`

# arrays - Matlab读取csv字符串数组

> ID：11507501
> 
> 赞同：0
> 
> 时间：2012-07-16T15:29:20.390
> 
> 标签：arrays, string, matlab, file-io, csv

我有一个名为 Book2.csv 的逗号分隔数据集，我想提取内容。内容是一个 496024x1 的字符串数组（正常、海王星、蓝精灵）。

我试过了：

```
 [text_data] = xlsread('Book2.csv'); 
```

但它只是输出了一个 text_data 空数组？

尝试 csvread 时

```
M = csvread('Book2.csv')
??? Error using ==> dlmread at 145
Mismatch between file and format string.
Trouble reading number from file (row 1, field 1) ==>
norma

Error in ==> csvread at 54
    m=dlmread(filename, ',', r, c); 
```

我得到这个错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:49:35.887

在我的脑海中，这应该可以完成工作。但可能不是最好的方法。

```
fid = fopen(your file);  //open file
 //read all contents into data as a char array 
 //(don't forget the `'` to make it a row rather than a column).
data = fread(fid, '*char')';
fclose(fid);
//This will return a cell array with the individual
//entries for each string you have between the commas.
entries = regexp(data, ',', 'split'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:41:22.973

尝试类似：[textread](http://www.mathworks.com/help/techdoc/ref/textread.html)

```
data = textread('data.csv', '', 'delimiter', ',', ... 
            'emptyvalue', NaN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:03:34.453

对我来说最简单的方法是：

```
path='C:\folder1\folder2\';
data = 'data.csv';
data = dataset('xlsfile',sprintf('%s\%s', path,data)); 
```

当然，您还可以执行以下操作：

```
[data,path] = uigetfile('C:\folder1\folder2\*.csv');
data = dataset('xlsfile',sprintf('%s\%s', path,data)); 
```

现在您将数据加载为数据集。例如，获取第 1 列的一种简单方法是

```
 double(data(1)) 
```

# java - 应用程序提供的未捕获异常处理程序在打印堆栈跟踪中的作用是什么？

> ID：11507504
> 
> 赞同：3
> 
> 时间：2012-07-16T15:29:29.513
> 
> 标签：java

我的第一个问题是谁实际打印堆栈跟踪的打印件？是 JVM 还是其他实体？打印堆栈跟踪时幕后会发生什么？如果有应用程序提供了 UncaughtExceptionhandler，我正在专门寻找一个答案，告诉我 Uncaught 异常处理程序在打印堆栈跟踪中的作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:32:57.103

**1.**当异常发生时，它被**抛出到JVM**。

**2.** JVM 然后打印 StackTrace。

**3.** StackTrace 包括**方法**名、**类**名、**文件**名和**行号。**

**4.** `fillInStackTrace()`调用方法重新初始化新创建的 throwable 中的堆栈跟踪数据。将有助于在**尝试访问 API 时屏蔽有关异常的信息。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:49:38.600

您是在谈论未捕获的异常吗？如果您捕获到异常，您可以使用该[`Throwable.printStackTrace`](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#printStackTrace%28%29)方法自己打印堆栈跟踪。如果您想知道它如何准确地打印堆栈跟踪，您可以查看[源代码](http://www.docjar.com/html/api/java/lang/Throwable.java.html)。

对于未捕获的异常，堆栈跟踪由抛出异常的线程的“未捕获的异常处理程序”打印。如果线程没有自己的未捕获异常处理程序，则使用[线程组的处理程序](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html#uncaughtException%28java.lang.Thread,%20java.lang.Throwable%29)，该处理程序又委托给父线程组或“默认未捕获异常处理程序”。如果没有父处理程序也没有默认处理程序，则会发生这种情况：

> 否则，此方法确定`Throwable`参数是否为`ThreadDeath`. 如果是这样，没有什么特别的。否则，一条包含线程名称的消息（从线程的`getName`方法返回）和使用`Throwable`'`printStackTrace`方法的堆栈回溯将打印到标准错误流。

您可以使用[`Thread.setUncaughtExceptionHandler`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29). 要设置默认的未捕获异常处理程序以捕获任何未捕获异常，请使用[`Thread.setDefaultUncaughtExceptionHandler`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:49:33.220

A`Throwable`及其所有子类（如 Exception 和 RuntimeException）是`try-catch`and`throw`关键字所必需的，处理它们的是 JVM 的 Java 部分。

唯一不是纯 Java 的`fillInStackTrace()`方法是*本机*方法，这意味着该方法是由 Java 部分“外部”的 JVM 提供的。如果变量中有 Throwable，则可以检查堆栈跟踪的所有部分。

[http://www.docjar.com/html/api/java/lang/Throwable.java.html](http://www.docjar.com/html/api/java/lang/Throwable.java.html)

请注意，在“过去”中，异常是昂贵的对象（我相信这是因为堆栈跟踪是在构造异常时计算的，无论是否使用它），但这已经通过延迟堆栈进行了相当多的优化跟踪生成，直到实际需要为止。

# jquery-ui - 固定元素上的 Jquery UI .position()

> ID：11507505
> 
> 赞同：2
> 
> 时间：2012-07-16T15:29:32.190
> 
> 标签：jquery-ui, positioning

Jquery UI 的 .position() 函数似乎在滚动时固定的元素上损坏了。例如，我试图在页面顶部的固定元素（如页眉）的“中心顶部”放置一个新元素（下面演示中的蓝色块）。我预计 .position() 中的碰撞检测会将元素翻转到“中心底部”。它第一次工作，但如果有人滚动到他的页面的一部分，它就完全坏了。

这是一个演示：http: [//jsfiddle.net/lrocksmashtime/MJwdP/](http://jsfiddle.net/lrocksmashtime/MJwdP/)

要查看效果，请在未滚动结果窗口时尝试单击“单击”，然后在滚动一点后再次单击它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T18:38:26.600

你的代码：

```
my: "bottom",
at: "top", 
```

可以读作：定位“我的”元素底部“在”目标元素顶部

正确的代码是：

```
my: "top",
at: "bottom", 
```

可以读作：将“我的”元素顶部“在”目标元素底部

这可以按您的预期工作：http: [//jsfiddle.net/MJwdP/18/](http://jsfiddle.net/MJwdP/18/)

# c# - 创建一个由软件而不是操作系统支持的文件夹？

> ID：11507506
> 
> 赞同：1
> 
> 时间：2012-07-16T15:29:34.333
> 
> 标签：c#, .net, windows-7, directory

我最近参加了一个项目，他们遇到了文件夹中的文件过多会降低访问速度的问题。我相信一个文件夹中有 10,000 多个文件，Windows 开始减慢访问速度，我们有大约 50,000 个文件。所有文件都很小，大多数时候我们只需要通过 Windows 文件和打印共享访问其中最新的 0.1-2.%。我会考虑将文件分成子文件夹，除了有一堆只能查看单个文件夹的遗留代码。

我的想法——我不知道这是否可能甚至是否合理——是创建一个小程序来缓冲内存中最新的 .1-.2% 文件，并根据需要从磁盘中检索其余文件。

1.  几年前，我曾以为我读过一种可以模拟硬盘驱动器上的文件夹的协议。是否可以？

2.  有什么东西已经这样做了吗？在不对系统进行重大更改的情况下，是否有更好的选择？

3.  其他系统使用什么来提供大量文件？是否有其他产品可以提供我们可以映射为网络驱动器的文件？或者以某种方式混合 2 个文件夹，使它们看起来像一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:10:20.570

暂时搁置*“解决此问题的正确方法”*，您正在寻找的内容称为“ [Shell 命名空间扩展](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144095%28v=vs.85%29.aspx)”。有几个 .NET 资源可用于编写这些资源管理器扩展。

*   [http://namespaceextension.codeplex.com/](http://namespaceextension.codeplex.com/)
*   [http://www.codeproject.com/Articles/1649/The-Complete-Idiot-s-Guide-to-Writing-Namespace-Ex](http://www.codeproject.com/Articles/1649/The-Complete-Idiot-s-Guide-to-Writing-Namespace-Ex)
*   [http://www.codeproject.com/Articles/13515/A-Namespace-Extension-Toolkit](http://www.codeproject.com/Articles/13515/A-Namespace-Extension-Toolkit) 也许还有更多。

当然 - 我们必须[记住](http://blogs.msdn.com/b/oldnewthing/archive/2006/12/18/1317290.aspx)为什么在 .NET 中编写资源管理器扩展不是一个好主意。

希望这可以帮助。

# jquery - 如何动态设置 bootstrap-datepicker 的日期值？

> ID：11507508
> 
> 赞同：84
> 
> 时间：2012-07-16T15:29:44.443
> 
> 标签：jquery, datepicker, twitter-bootstrap

我正在使用 bootstrap datepicker 和一个 line highchart。

我希望在缩放图表时更新日期选择器日期。一旦该事件触发，我将更新日期选择器的值。值更新正常，但单击日历时，弹出日历上的日期仍然是旧日期。

这是我的日期选择器：

```
<div class="input-append date pull-right" id="dpStartDate" data-date="@DateTime.Now.AddMonths(-1).ToString("dd/MM/yyyy")" data-date-format="dd/mm/yyyy">
    <input class="span2" id="startDateText" size="16" type="text" value="@DateTime.Now.AddMonths(-1).ToString("dd/MM/yyyy")" readonly="">
    <span class="add-on"><i class="icon-th"></i></span>
</div> 
```

我尝试使用以下代码更新值：

```
$('#dpStartDate').attr('data-date', startDate);
$('#startDateText').attr('value', startDate); 
```

它可以很好地更新日期，但不设置日历。

我也尝试触发 onChange 事件，它也更新日期但不更新日历：

```
$('#dpStartDate').trigger('changeDate', startDate);

$('#dpStartDate').datepicker()
    .on('show', function (ev) {
        ev.stopPropagation();
    })
    .on('changeDate', function (ev, date) {
        var startDate = new Date();
        if (date != undefined) {
            startDate = date;
            $('#dpStartDate').attr('data-date', startDate);
            $('#startDateText').attr('value', startDate);
        }
        else {
            startDate = ev.date;
            $('#dpStartDate').attr(startDate.getDate() + '/' + (startDate.getMonth() + 1) + '/' + startDate.getFullYear());
            $('#startDateText').attr(startDate.getDate() + '/' + (startDate.getMonth() + 1) + '/' + startDate.getFullYear());
        }
        $('#dpStartDate').datepicker('hide');
        ev.stopPropagation();
    }); 
```

有谁知道是否可以像这样更新日历？

谢谢

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-11-13T12:32:09.040

这对我有用

```
$(".datepicker").datepicker("update", new Date()); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-11-15T14:59:24.200

```
var startDate = new Date();

$('#dpStartDate').data({date: startDate}).datepicker('update').children("input").val(startDate); 
```

另一种方式

```
$('#dpStartDate').data({date: '2012-08-08'});
$('#dpStartDate').datepicker('update');
$('#dpStartDate').datepicker().children('input').val('2012-08-08'); 
```

1.  在属性数据日期上设置日历日期
2.  需要更新）
3.  设置输入值（记住输入是 datepicker 的子项）。

这样，您将日期设置为“2012-08-08”

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-08-09T09:31:33.833

```
$("#datepicker").datepicker("setDate", new Date); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-06-07T05:12:31.097

试试这个代码，

```
$(".endDate").datepicker({
    format: 'dd/mm/yyyy',
    autoclose: true
}).datepicker("update", "10/10/2016"); 
```

这也将更新日期和应用格式`dd/mm/yyyy`。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-08-24T02:29:39.057

更好用：

```
$("#datepicker").datepicker("setDate", new Date); 
```

代替

```
$("#datepicker").datepicker("update", new Date); 
```

如果您使用更新，则不会触发事件 changeDate。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-01-22T07:16:48.643

这对我有用，

```
$('#datepicker').datepicker("setValue", '01/10/2014' );
$('#datepicker').datepicker("setValue", new Date(2008,9,03)); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-01-30T14:46:17.450

我必须做'setValue'和'update'才能让它完全工作

```
$('#datepicker').datepicker('setValue', '2014-01-29').datepicker('update'); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-06-13T10:28:23.717

当使用其他答案的方法时，配置的选项会丢失，要更正它，可以使用全局配置：

```
$('.datepicker').datepicker();
$.fn.datepicker.defaults.format = 'dd/mm/yyyy';
$.fn.datepicker.defaults.startDate = "0";
$.fn.datepicker.defaults.language = "es";
$.fn.datepicker.defaults.autoclose = true;
$.fn.datepicker.defaults.todayHighlight = true;
$.fn.datepicker.defaults.todayBtn = true;
$.fn.datepicker.defaults.weekStart = 1; 
```

现在您可以使用更新方法而不会丢失选项：

```
$(".datepicker").datepicker("update", new Date("30/11/2018")); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-04-04T06:40:43.887

这真的有效。

简单的，

容易理解，

设置和更新对我有用的插件的单一方法。

```
$(".datepicker").datepicker("update", new Date()); 
```

其他更新方式

```
$('.datepicker').data({date: '2015-01-01'});
$('.datepicker').datepicker('update'); 
```

`update`不要忘记手动调用。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-03-12T07:19:06.323

使用代码：

```
var startDate = "2019-03-12"; //Date Format YYYY-MM-DD

$('#datepicker').val(startDate).datepicker("update"); 
```

解释：

日期选择器（输入字段）选择器#datepicker。

更新输入字段。

使用选项更新调用 datepicker。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-04-13T10:36:14.110

对于**引导程序 4**

如果您在 Bootstrap 中使用输入组，则需要将新日期附加到文本框的父级，否则如果单击日历图标并单击外部日期将被清除。

```
<div class="input-group date" id="my-date-component">
   <input type="text" />
    <div class="input-group-append">
      <span class="input-group-text"><i class="fa fa-calendar"></i></span>
    </div>
</div> 
```

您需要将日期设置为`input-group.date`.

```
$('#my-date-component').datepicker("update", new Date("01/10/2014")); 
```

还要检查 datepicker[更新](https://bootstrap-datepicker.readthedocs.io/en/latest/methods.html#update)方法

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-07-05T08:49:50.367

对于 datetimepickers 使用这个为我工作

```
$('#lastdate1').data({date: '2016-07-05'});
$('#lastdate1').datetimepicker('update');
$('#lastdate1').datetimepicker().children('input').val('2016-07-05'); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-09-09T15:38:04.077

请注意，如果您使用自定义格式启动日期选择器，则可以将简单字符串日期作为第二个参数传递。这样可以节省几行。

```
$('.selector').datepicker({
    format:'dd/mm/yyyy',
});

$('.selector').datepicker('update', '13/09/2019'); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-10-05T13:27:01.470

`$('#DateDepenseInput').val("2020-12-28")`
格式应该像年月日
对我来说效果很好......

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-05-25T05:48:26.603

这对我有用：

```
$('#dpStartDate').data("date", startDate); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-03-17T04:54:30.057

像这样的简单方法（一行）

```
$('#startDateText').val(startDate).datepicker("update"); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-09-12T05:22:53.213

如果您使用的是[Bootstrap DatePicker 版本 4+](http://eonasdan.github.io/bootstrap-datetimepicker/)

> 注意 所有函数都通过数据属性访问，例如 $('#datetimepicker').data("DateTimePicker").FUNCTION()

要设置日期值，您的代码应该类似于

```
$("#datetimepicker").data("DateTimePicker").date(new Date()); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-05-24T08:26:42.790

```
$('#datetimepicker1').data("DateTimePicker").date('01/11/2016 10:23 AM') 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-11-24T11:51:23.323

你也可以这样做：

```
 $("#startDateText").datepicker({
                toValue: function (date, format, language) {
                    var d = new Date(date);
                    d.setDate(d.getDate());
                    return new Date(d);
                },
                autoclose: true
            }); 
```

[http://bootstrap-datepicker.readthedocs.org/en/latest/options.html#format](http://bootstrap-datepicker.readthedocs.org/en/latest/options.html#format)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-05-15T07:00:10.553

尝试

```
$("#datepicker").datepicker('setDate','25-05-2020').datepicker('fill'); 
```

`setDate`当不更新浏览器上的日期选择器文本字段值时，这对我有用。“附加”为由方法设置的新日期`.datepicker('fill');`重新填充引导程序。`datepicker``setDate`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-01-20T16:07:47.710

这对我来说非常有效。简单的说下一个。

```
$('.className').datepicker('setDate', 'now'); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-05-11T06:36:53.850

You can use this simple method like :

```
qsFromDate = '2017-05-10';
$("#dtMinDate").datepicker("setDate", new Date(qsFromDate));
$('#dtMinDate').datepicker('update'); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-02-22T14:55:31.220

@Imran 答案适用于文本框

将 datepicker 应用于 div 使用：

```
$('#div_id').attr("data-date", '1 January 2017');
$('#div_id').datepicker("update"); 
```

逗号分隔多个日期：

```
$('#div_id').attr("data-date", '1 January 2017,2 January 2017,3 January 2017'); 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-05-28T07:20:23.197

如果参考[https://github.com/smalot/bootstrap-datetimepicker](https://github.com/smalot/bootstrap-datetimepicker) 需要设置日期值： $('#datetimepicker1').data('datetimepicker').setDate(new Date(value));

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-05-15T16:24:54.357

如果您不想触发我没有的 changeDate 事件，则在页面加载时

```
$('#calendarDatePicker').data("date", new Date());
$('#calendarDatePicker').datapicker(); 
```

# javascript - 这个 for-in 循环检测片段会产生不需要的误报吗？

> ID：11507509
> 
> 赞同：7
> 
> 时间：2012-07-16T15:29:46.407
> 
> 标签：javascript, loops

我们都知道数组上的[for-in-loop](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)[绝对是邪恶](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)的。尽管如此，它们仍然经常被使用，并且导致的错误很难追踪，尤其是当发生依赖于浏览器的情况时，例如由于`indexOf`-shims 等。

所以，我编写了这个简单的代码片段，它为“ `error`”属性添加了一个可枚举的getter `Array.prototype`（不用于生产代码）：

```
Object.defineProperty(Array.prototype, "error", {
    enumerable: true,
    get: function() {
        if (this === Array.prototype) // that looks OK
            return undefined;
        if (window.confirm("Somebody who coded the site you're viewing runs through an Array with a for-in-loop.\nShame on him!\n\nDo you want to raise an Error to trace the origin?"))
            throw new SyntaxError("Array traverse with for-in-loop, touching Array.prototype's 'error' property :-)");
    }
}); 
```

您可以将其添加为所有域的greasemonkey 脚本，并且您将在几乎每个站点上看到警报:-) 它们中的大多数是由`jQuery.extend`带有可疑参数的调用引起的，顺便说一句。

我现在的问题是：**是否有任何情况可以使这种“错误”循环合法化**，或者**其他任何导致误报警报的情况？**

我想知道这将如何影响我的代码的有用性。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T17:57:05.173

是的。合法性通常是主观的，但是......

举个例子，也许我有一个稀疏数组，我只在索引处设置了带有数据的值：

```
var a = [];
a[123123] = "foo";
a[1233123] = "bar"; 
```

如果我想遍历我在这个数组中定义的元素，那么我将使用该`for...in`构造。即使我对其进行防御性编码，您的脚本仍会触发（误报）...

```
for (var prop in a) {
  if (a.hasOwnProperty(prop)) {
    // this is a legitimate array element
  }
} 
```

另请参阅[为什么在数组迭代中使用“for...in”不是一个好主意？](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)了解更多信息和意见。

# javascript - jQuery Toggle 隐藏所有其他点击页面隐藏所有

> ID：11507510
> 
> 赞同：1
> 
> 时间：2012-07-16T15:29:50.770
> 
> 标签：javascript, jquery, dom

我试图让以下行为，以便当单击过滤器名称列表项之一时，它会显示其下方的 ul（默认情况下隐藏所有带有 .filter-options 的 ul）并隐藏任何其他 ul 列表打开。再次单击相同的过滤器名称列表项也会隐藏该 ul。如果您单击所有 ul (.filter-options) 将隐藏的任何其他位置，那将是非常棒的。

```
<ul class="all-filters" id="narrow-by-list">
    <li class="filter-name" id="Colour-filter">Colour
        <ul class="filter-options" id="Colour-options-list">
            <li>Black</li>
            <li>Red</li>
            <li>Green</li>
         </ul>
    <li>
    <li class="filter-name" id="Material-filter">Material
        <ul class="filter-options" id="Material-options-list">
            <li>Glass</li>
            <li>Wax</li>
            <li>Resin</li>
        </ul>
    </li>
    <li class="filter-name" id="Size-filter">Material
        <ul class="filter-options" id="Size-options-list">
            <li>1</li>
            <li>2</li>
            <li>3</li>
        </ul>
    </li>
</ul> 
```

这是我当前的 jQuery，其中一些有效...

```
jQuery.noConflict();
        jQuery(document).ready(function(){
        jQuery('#narrow-by-list .filter-name').click(function(event) {
          jQuery('ul.filter-options').not('> ul', this).hide("fast");
          jQuery('ul.filter-options', this).toggle("fast");
          event.stopPropagation();
        });
    }); 
```

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:42:15.337

您有 html 错误（您放置了打开标签而不是关闭标签并忘记关闭您的 ul，这主要是为什么没有任何工作），这是更正后的版本：

```
<ul class="all-filters" id="narrow-by-list">
<li class="filter-name" id="Colour-filter">Colour
    <ul class="filter-options" id="Colour-options-list">
        <li>Black</li>
        <li>Red</li>
        <li>Green</li></ul>
</li>
<li class="filter-name" id="Material-filter">Material
    <ul class="filter-options" id="Material-options-list">
        <li>Glass</li>
        <li>Wax</li>
        <li>Resin</li></ul>
</li>
<li class="filter-name" id="Size-filter">Material
    <ul class="filter-options" id="Size-options-list">
        <li>1</li>
        <li>2</li>
        <li>3</li></ul>
</li>
</ul>​ 
```

这是有效的js：

```
jQuery.noConflict();
  jQuery(document).ready(function() {
  jQuery('#narrow-by-list .filter-name').click(function(event) {
    jQuery(this).find('ul.filter-options').toggle("fast").end().siblings().find('ul').hide('fast');
    event.stopPropagation();
  });
});​ 
```

[在这里查看小提琴](http://jsfiddle.net/V5CP2/)。它在 this 上下文中找到过滤器选项，显示它们，转到其兄弟姐妹并隐藏其中的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:47:53.470

试试这个 -[**演示**](http://jsfiddle.net/BAYPb/1/)

```
$("li.filter-name").on("click", function() {
    if ( $("ul", this).is(":visible") ) {
        $("ul", this).slideUp("fast");
    } else {
        $("li.filter-name ul").slideUp("fast");
        $("ul", this).slideDown("fast");
    }
});

$("body").on("click", function(e) {
    if ( !$(e.target).is("li") ) {
        $("li.filter-name ul").slideUp("fast");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:38:28.813

您有一些缺少 html 的声明，我更正了它们并更改了您的 jQuery 方式：

[这是演示](http://jsfiddle.net/ExU5S/10/)

jQuery：

```
$(document).ready(function(){
    $('.filter-options').slideUp('fast');//hide all filters at the begining
    //you can use fast/slow or time declarations with miliseconds

    $('#narrow-by-list .filter-name').click(function() {
        $('.filter-options').slideUp(500);//hide all filters
        $(this).children('.filter-options').slideDown(500);//show clicked ele's filters
        //you can use other animations instead of slideUp/Down, like fadeIn() and fadeOut(), or pure hide() / show()
    });
});​ 
```

并注意 $ === jQuery

html:

```
<ul class="all-filters" id="narrow-by-list">
    <li class="filter-name" id="Colour-filter">Colour
        <ul class="filter-options" id="Colour-options-list">
            <li>Black</li>
            <li>Red</li>
            <li>Green</li>
        </ul>
    <li>
    <li class="filter-name" id="Material-filter">Material
        <ul class="filter-options" id="Material-options-list">
            <li>Glass</li>
            <li>Wax</li>
            <li>Resin</li>
        </ul>
    </li>
    <li class="filter-name" id="Size-filter">Numbers
        <ul class="filter-options" id="Size-options-list">
            <li>1</li>
            <li>2</li>
            <li>3</li>
        </ul>
    </li>
</ul>​ 
```

# ios - 禁用自动滚动 UITableView

> ID：11507521
> 
> 赞同：0
> 
> 时间：2012-07-16T15:30:35.987
> 
> 标签：ios, uitableview

我想禁用自动滚动到顶部。我都试过了

```
 tableview.scrollsToTop=NO;
    [tableview setScrollsToTop:NO]; 
```

但这不起作用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:36:53.243

自动滚动代码驻留在 tableViewController 中，因此无法禁用自动滚动。您可以从 UIViewController 子类化并在其中使用 tableView，而不是从 UITableViewController 子类化。

如果你愿意使用 UITableViewController 本身，你可以重写 viewWillAppear 并且不要调用 [super viewWillAppear]。

# c# - jQuery Get() 到 WebMethod 不起作用

> ID：11507525
> 
> 赞同：1
> 
> 时间：2012-07-16T15:30:39.107
> 
> 标签：c#, jquery, webmethod

我正在尝试调用 jQuery 函数`$.get()`来调用 my`WebMethod`但它只是`Page_Load`在后面的代码中触发事件。我可以看到请求在 firebug 中发送到，`/admin/manage-users.aspx/deleteUser?u=user1`但它从未命中 WebMethod。

jQuery

```
$('#delete').each(function () {
    $(this).click(function () {
        var userName = $(this).closest('tr').find('span.userName').text();
        $.get('/admin/manage-users.aspx/deleteUser', { u: userName });
    });
}); 
```

aspx.cs

```
[WebMethod]
public void deleteUser() {
    string userName = Request.QueryString["u"];
    if(!string.IsNullOrEmpty(userName)) {
        if(Membership.DeleteUser(userName))
            Response.Redirect(Request.Url.ToString());
    }
} 
```

**解决方案**

我把下面的 bugz 归功于他，因为他为我指明了正确的方向。

> 为了让你`[WebMethod]`在aspx中工作你的方法必须是静态的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:56:06.223

这是获取更多信息的链接

[更多信息](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

```
 $.ajax({
                    type: "POST",
                    url: "'/admin/manage-users.aspx/deleteUser'",
                    data: "{'userName ' : '" + userName + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(data) {
        //do something on success

                    },
                    error: function(ex) {
       //do something on failure

                    }
                }); 
```

如果您要返回数据或变量，请确保在使用 jquery/ajax 时出于某种原因使用 data.d 微软希望在变量末尾使用 .d 。这花了我时间弄清楚。

试试这个我猜当你调试 deleteUser 方法时永远不会被调用。

```
var jqxhr = $.get("admin/manage-users.aspx/deleteUser",  { userName: userName }  function() {
    alert("success");
  })
  .success(function() { alert("second success"); })
  .error(function() { alert("error"); })
  .complete(function() { alert("complete"); }); 
```

# python - Gcc、Python和谷歌计算器中大浮点数的计算错误

> ID：11507535
> 
> 赞同：1
> 
> 时间：2012-07-16T15:31:29.023
> 
> 标签：python, c, gcc, floating-point

为什么这两个表达式的结果应该不同？
同样的事情发生在 gcc 和 python 中。这里发生了什么？有什么办法可以预防吗？

![在此处输入图像描述](../Images/f7ae2090f8f1a84ea6a1fe5765af6d2e.png)

![在此处输入图像描述](../Images/4612f678d160e1c2c4db78369f3d96b1.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T15:33:17.173

浮点数的精度有限。如果将小数 (3) 与大数 (1e20) 相加，结果通常与大数相同。这里就是这种情况，因此

```
(3 + 1e20) - 1e20 = 1e20 - 1e20 = 0 
```

的精度`double`大约是 15 位十进制数字，`float`s 大约有 7 位十进制数字的精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T15:42:28.200

# objective-c - 如何打印对象的保留计数？

> ID：11507537
> 
> 赞同：0
> 
> 时间：2012-07-16T15:31:30.183
> 
> 标签：objective-c, nslog, retaincount

我正在尝试使用 NSLog 打印出终端中对象的保留计数。这是我的代码：

```
NSNumber *myInt=[[NSNumber alloc] initWithInteger: 100];
NSLog(@"myInt retain count=%d",[myInt retainCount]); 
```

结果应该是1，但我在终端得到的是-1。我尝试使用 %u 而不是 %d 并最终得到 4294967295 结果。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:33:50.643

在@bbum 来到这里之前，我要说的是：

**不要依赖`-retainCount`你的代码**

它不会给你你期望的答案。事实证明，答案-1在这里是正确的，你认为它不正确的事实是因为框架在背后做着你不知道的事情。使用自动引用计数 (ARC)，或者如果您必须使用手动保留/释放，则只需遵循内存管理指南而不使用该`-retainCount`方法。

# java - 从 java 中重用 PrepareStatement 中的参数

> ID：11507542
> 
> 赞同：3
> 
> 时间：2012-07-16T15:31:54.053
> 
> 标签：java, sql, prepared-statement

```
private String QUERY = "(SELECT * FROM tab1 WHERE year = ? and month = ?) UNION (SELECT * FROM tab2 WHERE year = ? and month = ?) UNION (SELECT * FROM tab3 WHERE year = ? and month = ?");

aPreparedStatement = connection.prepareStatement(QUERY);
aPreparedStatement.setString(1, "2012");
aPreparedStatement.setString(2, "july");
aPreparedStatement.setString(3, "2012");
aPreparedStatement.setString(4, "2012");
aPreparedStatement.setString(5, "july");
aPreparedStatement.setString(6, "2012"); 
```

而不是一次又一次地设置“？” 相同的参数，有什么方法可以避免使用多个 setString 方法来替换 PreparedStatement 中的相同参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T16:07:19.200

您可以编写一个辅助方法，如下所示：

```
void setString(PreparedStatement pstmt, String s, Integer... indices) {
    for (Integer index : indices) {
        pstmt.setString(index, s);
    }
} 
```

然后调用：

```
setString(aPreparedStatement, "2012", 1, 3, 4, 6);
setString(aPreparedStatement, "july", 2, 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:51:56.773

据我所知，你不能用标准的 PreparedStatements 来做到这一点。但是我[从 Java World](http://www.javaworld.com/javaworld/jw-04-2007/jw-04-jdbc.html)中找到了一篇文章，可以帮助您创建自己的类（NamedParameterStatement）来实现这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T15:42:43.760

您可以尝试使用循环。

```
for (int i=0; i < 3; i++) {
  aPreparedStatement.setString(2*i+1, "2012");
  aPreparedStatement.setString(2*i+2, "july");
} 
```

# javascript - 如何使用循环为许多元素构建我的 Javascript/Jquery？

> ID：11507543
> 
> 赞同：0
> 
> 时间：2012-07-16T15:31:56.520
> 
> 标签：javascript, jquery, html, asp.net-mvc-3, loops

而不是在我的 js 文件中一遍又一遍地重复相同的代码，唯一的区别是元素名称，我希望构建一个循环来构建我的 js。

我正在尝试向页面上的某些按钮添加切换功能，这些按钮可以更改它们的颜色并在页面的其他位置设置值。这是我的代码：

```
 var className;

        var idName;

        var i;

        for (i = 0; i < 11; i++) {
            className = ".feedbackq";
            idName = "#feedbackq";

            className = className + i.ToString();
            idName = idName + i.ToString();

            $(className).toggle(
            function () {
                $(className).each(function () {
                    $(className).css("background-color", "");
                });
                $(this).css("background-color", "red");
                var value = $(this).val();
                $(idName).val(value);
            },
            function () {
                $(this).css("background-color", "");
                $(idName).val("");
            });

        } 
```

不幸的是，这没有做任何事情。当不在循环中时，使用硬编码的变量名，代码可以工作，但我需要它是动态的并通过循环构造。显示的 11 个计数最终将是一个动态变量，所以我不能进行硬编码....

谢谢您的帮助！

更新：根据要求，这里是不在循环代码中：

```
 $(".feedbackq0").toggle(
                    function () {
                        $(".feedbackq0").each(function () {
                            $(".feedbackq0").css("background-color", "");
                        });
                        $(this).css("background-color", "red");
                        var value = $(this).val();
                        $("#feedbackq0").val(value);
                    },
                    function () {
                        $(this).css("background-color", "");
                        $("#feedbackq0").val("");
                    });
                   $(".feedbackq1").toggle(
                    function () {
                        $(".feedbackq1").each(function () {
                            $(".feedbackq1").css("background-color", "");
                        });
                        $(this).css("background-color", "red");
                        var value = $(this).val();
                        $("#feedbackq1").val(value);
                    },
                    function () {
                        $(this).css("background-color", "");
                        $("#feedbackq1").val("");
                    });
                    $(".feedbackq2").toggle(
                    function () {
                        $(".feedbackq2").each(function () {
                            $(".feedbackq2").css("background-color", "");
                        });
                       $(this).css("background-color", "red");
                        var value = $(this).val();
                        $("#feedbackq2").val(value);
                    },
                    function () {
                        $(this).css("background-color", "");
                        $("#feedbackq2").val("");
                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:40:10.717

执行此操作的一种方法（无需查看您的 HTML 以进行进一步简化）是在事件处理程序使用之前将索引号放在对象上，`.data()`以便稍后可以根据需要检索它，而与`for`届时将运行的循环索引无关：

```
 var className, idName, i;

    for (i = 0; i < 11; i++) {
        className = ".feedbackq" + i;
        $(className).data("idval", i).toggle(
        function () {
            var idVal = $(this).data("idval");
            $(".feedbckq" + idVal).css("background-color", "");
            $(this).css("background-color", "red");
            var value = $(this).val();
            $("#feedbackq" + idVal).val(value);
        },
        function () {
            var idVal = $(this).data("idval");
            $(this).css("background-color", "");
            $("#feedbackq" + idVal).val("");
        });
    } 
```

注意：我也做了很多其他的简化：

1.  我用一个语句声明了多个变量`var`。
2.  `toString(i)`不需要在字符串的末尾添加数字并且您也拼错了（大写错误）
3.  `.each()`不需要将 .css() 应用于 jQuery 集合中的每个项目

我怀疑如果我们可以看到您的 HTML，我们可以进一步简化这一点，因为项目之间可能存在可以被利用来减少代码的关系，但是如果没有 HTML，我们无法就此提供任何建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:37:49.813

您可能成为了closures-inside-for-loops 错误的受害者。您需要循环内的代码位于单独的函数中，因此每次迭代都会获得自己的 className 变量，而不是共享变量。

您可以通过创建命名函数或使用带有回调而不是 for 循环的 jQuery 迭代器函数来做到这一点

```
var toggle_stuff = function(i){
   var className = ".feedbackq" + i; //The variables are local to just this iteration now
   var idName = "#feedbackq" + i; //No need to call toString explicitly.

   //And so on...
}

for(var i=0; i<11; i++){
   toggle_stuff(i)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:43:10.880

我有点怀疑你调用了错误的函数，应该是`.toString()`而不是`.ToString()`.

请注意，JavaScript 区分大小写。

但是，如果我无论如何都编写代码，我将忽略该`.toString()`部分并直接使用数值......

# javascript - 从选择选项中读取值

> ID：11507545
> 
> 赞同：0
> 
> 时间：2012-07-16T15:32:04.960
> 
> 标签：javascript, jquery, drop-down-menu, portlet

我有以下情况，

```
<select id="dropDown" onChange="this.options[this.selectedIndex].onclick();>
<c:forEach items="" var="...">
<c:choose>
<c:when test="">
<option id="<portlet:namespace />..." value="red" onclick="<portlet:namespace />SomeFunction(this.id, 'Contants.SOME_ID', '<c:out value="${some_value}"/>)">red</option>
</c:when>
<c:when test="">
<option id="<portlet:namespace />..." value="yellow" onclick="">yellow</option>
</c:when>
<c:when test="">
<option id="<portlet:namespace />..." value="blue" onclick="">blue</option>
</c:when>
</c:choose>
</c:forEach>
</select> 
```

当我选择值说黄色时，根本没有警报，只有当页面第一次加载或者我按 F5 刷新页面时，我才会看到一个警告说“红色”。我无法提醒所选值。

```
var selected_item = $('#dropDown').val();
alert(selected_item); 
```

有什么我想念的吗？

**编辑**

我已经为 onClick 添加了示例函数，这就是我在选项字段中使用 onClick 的原因。因此，对于其中的每一个，我都会调用不同的函数。无论如何要获得所选选项的值。

```
<portlet:namespace />SomeFunction(id, some_id, some_value) {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:34:32.593

您`onclick`在选项中什么也不做。由于您使用的是 jQuery，因此您根本无法使用内联 javascript。

删除`onChange="this.options[this.selectedIndex].onclick();`所有`onclick=""`，然后尝试

```
$(function() {
  $('#dropDown').change(function() {
     alert($(this).val());
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:38:49.250

由于您使用的是 jQuery，因此您不需要`onclick`每个都删除它们`option`并尝试使用事件。`onChange``select.`**[`.on()`](http://api.jquery.com/on)**`change`

```
$('#dropDown').on('change', function() {
   var selected_item = this.value;
   alert( selected_item );
}); 
```

如果您尝试`selected_item`在页面加载时更新变量的值，则可以触发更改事件，如下所示：

```
$('#dropDown').on('change', function() {
   var selected_item = this.value;
   alert( selected_item );
}).change(); // trigger the change event at page load 
```

# ruby - 在ruby1.8.6上安装路边

> ID：11507547
> 
> 赞同：0
> 
> 时间：2012-07-16T15:32:18.080
> 
> 标签：ruby, windows, curl, curb

我无法使用 ruby​​1.8.6 p111 在 Windows 7 x64 上安装遏制：

```
ruby extconf.rb install curb-0.8.1.gem -- --with-curl-dir=C:\curl-7.26.0
checking for curl-config... no
checking for main() in curl.lib... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --srcdir=.
    --curdir
    --ruby=C:/Ruby186/bin/ruby
    --with-curl-dir
    --with-curl-include
    --without-curl-include=${curl-dir}/include
    --with-curl-lib
    --without-curl-lib=${curl-dir}/lib
    --with-curllib
    --without-curllib
extconf.rb:18:   Can't find libcurl or curl/curl.h (RuntimeError)

Try passing --with-curl-dir or --with-curl-lib and --with-curl-include options to extconf. 
```

为了澄清，`C:\curl-7.26.0`是一个带有文件夹的[libcurl v7.26.0](http://curl.haxx.se/gknw.net/7.26.0/dist-w32/curl-7.26.0-devel-mingw32.zip)`lib/bin/include`。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:30:37.407

我在此处提供的相同答案适用于您的问题：

[https://stackoverflow.com/a/11484346/117298](https://stackoverflow.com/a/11484346/117298)

但我强烈建议您至少升级到 Ruby 1.8.7，因为不再维护 1.8.6 并且已经宣布 1.8.7 终止。

# c++ - 内联模板函数

> ID：11507550
> 
> 赞同：0
> 
> 时间：2012-07-16T15:32:31.153
> 
> 标签：c++, templates, inline

我正在尝试为一个项目编写一些数学代码，但偶然发现了一个有趣的问题：

```
template<class T> class Radian;
template<class T> class Degree;

template <class T>
class Radian
{
public:
    T mRad;
public:
    Radian(const Degree& d);
};

template <class T>
class Degree
{
public:
    T mDeg;
public:
    Degree(const Radian& d);
};

inline Radian::Radian ( const Degree& d ) 
{

}

inline Degree::Radian ( const Radian& d )
{

} 
```

请注意，代码更大，但我删除了不必要的功能，以便您更好地理解它。

我了解模板的工作原理，我知道它们是在编译时生成的，但是对于这个特定的示例，我并不真正了解应该使用什么语法。我知道在构造函数中 Degree 应该有一个模板参数，但我不知道如何编写它。从我看到的情况来看，我可能必须使用另一个模板，但最好为两者使用相同的 T，因为我不会从 Degree_float 转换为 Radian_double。

任何人都可以对此有所了解吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T15:34:38.017

这是声明的语法：

```
template <typename T>
class Radian
{
public:
    Radian(Degree<T> const& degree);
    …
}; 
```

这是定义的语法：

```
template <typename T>
inline Radian<T>::Radian(Degree<T> const& degree) {
    …
} 
```

也就是说，由于您的类是模板，因此您需要指定其类型参数。构造函数*不是*模板，因此您可以像编写普通构造函数一样编写它，只需为其类名添加前缀。

# asp.net - ASP.NET 网站在 debug=false 时太慢

> ID：11507554
> 
> 赞同：1
> 
> 时间：2012-07-16T15:32:47.143
> 
> 标签：asp.net, asp.net-mvc-3

我的 ASP.NET MVC3 应用程序存在性能问题，我注意到当在 web.config 文件中放置 debug="false" 时，页面的检索速度非常慢（每个请求约 30 秒）。如果我保持 debug="true" 加载和导航一点也不慢。这听起来很奇怪，我在网上没有发现类似的问题。

这是 web.config 的编译部分：

```
<compilation targetFramework="4.0">
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
  </assemblies>
</compilation> 
```

我在本地机器上使用 IIS Express 7.0，在生产服务器上使用 IIS 6（同样的问题）

# url - Google TTS API 返回断开的链接

> ID：11507567
> 
> 赞同：1
> 
> 时间：2012-07-16T15:33:40.587
> 
> 标签：url, mp3, google-api, text-to-speech

此解决方案在 IE 返回 MP3 文件但不是 Chrome 或 FF 时工作正常

```
<div class="ttslink" onclick='
$("#please").text("please be patient!").css("color","green").fadeIn(300).delay(1400).fadeOut(300);
var kor = encodeURI($("#base").text());
window.open("http://translate.google.com/translate_tts?tl=ko&q="+kor,"mywindow","location=no,status=no,scrollbars=no,width=0,height=0");'> 
```

# python - 将 XML 文档导入 Django 的（postgres）数据库

> ID：11507568
> 
> 赞同：1
> 
> 时间：2012-07-16T15:33:42.290
> 
> 标签：python, django

我有一个 XML 文档，我需要将它导入 Django 的数据库 (postgres)。我想首先这是可能的，如果是这样，我该怎么做？

我是 Python / Django 的新手，我记得不久前在 python shell 中运行命令时将大量模型导入数据库，并且想知道是否有类似的东西？

我有一个要输入的内容的模型设置。我只想能够导入 XML 文档，因为要添加数千个项目。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:37:20.047

您是否为存储在 XML 文档中的数据编写了模型？假设是这种情况，django 文档中的这个页面应该会有所帮助：

[https://docs.djangoproject.com/en/1.2/howto/initial-data/#providing-initial-data-with-fixtures](https://docs.djangoproject.com/en/1.2/howto/initial-data/#providing-initial-data-with-fixtures)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:42:43.020

Django 不是数据库。

基本上，您的选择是：

1.  如果 XML 是 django 用于固定装置的格式，请编写与该数据匹配的模型，并将其加载为固定装置：[https ://docs.djangoproject.com/en/dev/howto/initial-data/#providing-initial -数据与夹具](https://docs.djangoproject.com/en/dev/howto/initial-data/#providing-initial-data-with-fixtures)
2.  如果您几乎可以做 1，您可以使用 XSLT 或其他一些转换器来修复它。
3.  创建您自己的自定义程序以提取数据，并创建模型作为结果。您仍然需要创建模型。
4.  使用 XML 数据库，并将其连接到 django。

# eclipse - 如何使用 Ant 编辑 XML 参数

> ID：11507569
> 
> 赞同：1
> 
> 时间：2012-07-16T15:33:41.357
> 
> 标签：eclipse, ant, build, context.xml

我正在尝试在执行 Ant 脚本时将时间戳作为上下文参数写入我的 context.xml 中。

我正在尝试以下操作：

我的 context.xml

```
<Parameter name="deployingTimeStamp" 
    value="16.07.2012" <!-- shall be changed! -->
    override="true" /> 
```

我的 build.xml

```
<tstamp>
    <format property="time" pattern="dd.MM.yyyy"
    unit="hour"/>
</tstamp>

<replace file="${conf.dir}/dev/context.xml" >
    <replacefilter token="deployingTimeStamp" value="${time}" />
</replace> 
```

不幸的是，它不会替换该值，它只是替换名称“deployingTimeStamp”本身并将其更改为当前日期。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:40:33.567

replacefilter 令牌将替换您定义的令牌。为什么不在 XML 中添加一个占位符值（即 [[buildTimeStamp]] ），然后使用：

```
<replace file="${conf.dir}/dev/context.xml" >
    <replacefilter token="[[buildTimeStamp]]" value="${time}" />
</replace> 
```

所以你原来的 xml 将是

```
<Parameter name="deployingTimeStamp" 
value="[[buildTimeStamp]]" <!-- shall be changed! -->
override="true" /> 
```

* * *

**基于评论讨论的其他提示：**

您可能没有做的是将主要源文件复制到构建目录中以首先执行替换。这在构建脚本中是相当标准的，这就是为什么我提到你首先检查你的文件脱离源代码控制。如果您没有使用源代码管理并且在您的计算机上有一个文件夹，那么您需要先将该文件夹中的文件复制到另一个文件夹，然后再执行应用程序的替换和其他打包。

```
 <copy todir="../dest/dir">
    <fileset dir="src_dir" excludes="**/*.java"/>
  </copy> 
```

类似于上面的内容，您将源代码复制到工作目录。然后你对它执行你的操作，然后当你有一个包时删除它（即jar文件或war文件或者如果是java的话）。您也可以在 Ant 的文档中查看删除功能：

*   [http://ant.apache.org/manual/Tasks/copy.html](http://ant.apache.org/manual/Tasks/copy.html)

# python - Gmail 不显示内嵌图片

> ID：11507574
> 
> 赞同：3
> 
> 时间：2012-07-16T15:34:05.323
> 
> 标签：python, django, email, gmail, mime

我有以下功能（Django）来发送邀请：

```
def send_invitation(self, request): 
    t = loader.get_template('email/invitation.html')
    html_content = t.render(Context(context))
    message = EmailMessage('Hi there', html_content, 'to@some.com',
            [self.profile_email],
            headers={'Reply-To': 'Online <online@online.nl>'})
    message.content_subtype = 'html'
    localize_html_email_images(message)
    message.send() 
```

我正在使用一个函数将本地提供的链接图像替换为附加图像。

```
def localize_html_email_images(message):
    import re, os.path
    from django.conf import settings

    image_pattern = """<IMG\s*.*src=['"](?P<img_src>%s[^'"]*)['"].*\/>""" % settings.STATIC_URL

    image_matches = re.findall(image_pattern, message.body)
    added_images = {}

    for image_match in image_matches:
        if image_match not in added_images:
            img_content_cid = id_generator()
            on_disk_path = os.path.join(settings.STATIC_ROOT, image_match.replace(settings.STATIC_URL, ''))
            img_data = open(on_disk_path, 'r').read()
            img = MIMEImage(img_data)
            img.add_header('Content-ID', '<%s>' % img_content_cid)
            img.add_header('Content-Disposition', 'inline')
            message.attach(img)

            added_images[image_match] = img_content_cid

    def repl(matchobj):
        x = matchobj.group('img_src')
        y = 'cid:%s' % str(added_images[matchobj.group('img_src')])

        return matchobj.group(0).replace(x, y)

    if added_images:
        message.body = re.sub(image_pattern, repl, message.body) 
```

一切都很完美。但不知何故，Gmail 并没有像 Hotmail 和 Outlook 那样立即显示图像。

当我检查电子邮件的来源时，它确实添加了正确的标题：

```
Content-Type: multipart/mixed; boundary="===============1839307569=="
#stuff
<IMG style="DISPLAY: block" border=0 alt="" src="cid:A023ZF" width=600 height=20 />
#stuff
Content-Type: image/jpeg
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Content-ID: <A023ZF>
Content-Disposition: inline 
```

**如何让 Gmail 在打开电子邮件时立即显示图像，就像 Hotmail 和 Outlook 一样？**

PS。我查看了很多关于内联图片的主题，但它仍然无法在 Gmail 中使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:50:37.023

出于安全原因，Gmail 将不支持自动加载图片。旨在限制电子邮件中包含的图像数量，因为它们通常会导致`spam-trapped`.

电子邮件客户端通常允许显示图像（特别是如果它们以 base-64 之类的方式编码）。浏览器端电子邮件（例如 Gmail）根本不是这种情况。如果您非常关心显示图像，则可以使用`base64`编码嵌入它。这将显着增加电子邮件的文件大小（您是按值包含它，而不是按引用包含它），因此请谨慎使用（否则您将被垃圾邮件陷阱过滤掉）。

**参考**：[http ://docs.python.org/library/base64.html](http://docs.python.org/library/base64.html)

享受和好运！

# python - 底图和密度图

> ID：11507575
> 
> 赞同：4
> 
> 时间：2012-07-16T15:34:05.883
> 
> 标签：python, numpy, matplotlib, python-2.7, matplotlib-basemap

我想使用底图创建密度图。我拥有的数据是无网格的并且是重复的或彼此非常接近。我尝试对数据进行网格化，然后使用 pcolor 绘制 bin 的数量，但即使所有数据集的长度相同，我仍然会收到缓冲区大小错误。我最初的想法是使用下面的底图脚本，但我只能让 scatter 工作，尽管这并没有给我一个密度图。

```
m = Basemap(resolution='f',projection='merc',                                        
            lon_0=160,                                                               
            llcrnrlat=-30.0,                                                         
            urcrnrlat=30.0,                                                          
            llcrnrlon=100.,                                                          
            urcrnrlon=270.0,                                                         
            lat_ts=0.0) 

m.drawmapboundary(fill_color='white')                                                
m.fillcontinents(color='#F5DEB3',lake_color='#85A6D9')                               
m.drawcoastlines(color='black', linewidth=.4)                                        
m.drawcountries(color='#6D5F47', linewidth=.4)                                       
m.drawmeridians(np.arange(0, 360, 20),                                               
                labels=[0,0,0,1],                                                    
                color='black',                                                       
                dashes=[1,0],                                                        
                labelstyle='+/-',                                                    
                linewidth=0.2)         
m.drawparallels(np.arange(-90, 90, 10),                                              
                labels=[1,0,0,0],                                                    
                color='black',                                                       
                dashes=[1,0],                                                        
                labelstyle='+/-',                                                    
                linewidth=0.2) 
lats = 
array([ 14.375,  14.125,  14.125,   9.375,  13.625,  14.375,   5.625,
    13.875,  14.625,   5.875,   8.875,   5.625,   8.875,  13.375,
    11.125,   8.375,  12.375,   6.125,   5.375,   8.375,   7.375,
     7.875,  14.375,  14.875,   9.875,  11.125,  14.875,   7.875,
     9.125,  11.625,   5.125,  10.875,   5.125,  12.125,  12.625,
     8.625,   5.125,   8.375,  11.625,  11.375,  12.875,  14.375,
     8.875,   8.375,   6.375,   8.625,   5.875,   8.125,   9.375,
     5.875,   8.125,   8.875,   5.375,   8.875,   5.625,  11.875,
     9.875,   9.875,  10.875,  11.375,   9.875,   9.375,  13.125,
    14.125,   8.125,  14.875,   9.875,   9.625,  10.625,  12.125,
     9.375,   5.625,  13.625,   6.375,  10.125,  14.875,   8.875,
     5.125,   6.125,   8.625,   6.875,   9.375,   9.125,   9.375,
    13.625,   6.125,   6.125,   6.875,  11.375,  13.375,  10.375,
     6.875,   7.625,   7.625,  13.875,   5.125,   6.125,  14.125,
     7.375,   5.375])
lons = array([ 122.125,  125.875,  122.375,  132.125,  124.375,  122.625,
    206.125,  122.625,  120.375,  187.625,  243.625,  161.625,
    220.375,  121.875,  125.625,  130.125,  219.625,  223.875,
    223.375,  190.125,  132.875,  185.875,  122.625,  120.875,
    259.375,  125.875,  204.875,  131.875,  130.875,  125.375,
    234.375,  241.375,  188.125,  124.375,  124.375,  140.375,
    205.625,  130.875,  256.875,  239.375,  124.125,  123.125,
    131.625,  126.375,  241.125,  130.875,  233.625,  184.375,
    205.125,  169.375,  150.375,  183.375,  168.875,  239.625,
    180.125,  241.375,  131.375,  244.875,  244.375,  125.625,
    131.375,  150.125,  203.625,  122.125,  243.125,  159.125,
    125.625,  243.375,  125.875,  127.375,  130.125,  146.625,
    203.125,  185.125,  204.625,  120.625,  130.125,  233.875,
    131.875,  258.625,  130.125,  173.375,  258.125,  129.125,
    137.875,  215.625,  214.125,  234.625,  125.375,  136.625,
    231.125,  145.625,  128.625,  232.875,  125.125,  145.125,
    239.875,  138.625,  241.375,  169.625])
data = 
array([ 84.8125 ,  81.6875 ,  79.75   ,  78.5625 ,  70.8125 ,  70.75   ,
    69.0625 ,  69\.     ,  67.3125 ,  63.65625,  63.375  ,  62.5625 ,
    62.46875,  61.09375,  60.4375 ,  59.21875,  58.84375,  58.8125 ,
    58.75   ,  58.4375 ,  57.8125 ,  57.375  ,  57.1875 ,  57.15625,
    57.15625,  57.09375,  56.96875,  56.875  ,  56.3125 ,  56.28125,
    56.1875 ,  55.59375,  55.5    ,  55.46875,  55.4375 ,  55.375  ,
    55.3125 ,  55.21875,  55.21875,  55.15625,  54.90625,  54.75   ,
    54.6875 ,  54.65625,  54.625  ,  54.59375,  54.4375 ,  54.34375,
    54.21875,  54.0625 ,  53.9375 ,  53.75   ,  53.65625,  53.21875,
    53.15625,  53.0625 ,  52.78125,  52.75   ,  52.4375 ,  52.25   ,
    52.0625 ,  51.71875,  51.71875,  51.59375,  51.4375 ,  51.3125 ,
    51.28125,  51.28125,  51.25   ,  51.03125,  51\.     ,  50.96875,
    50.9375 ,  50.875  ,  50.8125 ,  50.75   ,  50.71875,  50.6875 ,
    50.5    ,  50.4375 ,  50.4375 ,  50.28125,  50.21875,  50.125  ,
    50\.     ,  49.5    ,  49.5    ,  49.40625,  49.21875,  49.21875,
    49.0625 ,  48.96875,  48.53125,  48.46875,  48.375  ,  48.28125,
    48.21875,  48.0625 ,  47.875  ,  47.84375]) 
```

关于如何获得这些数据的密度图的任何想法？感谢帮助。/米

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T20:45:33.157

如果您有兴趣对网格框中的每个纬度进行频率计数，可以使用 numpy 函数 histogram2d。

以下代码可能是您正在寻找的：

```
nx, ny = 10, 3

# compute appropriate bins to histogram the data into
lon_bins = numpy.linspace(lons.min(), lons.max(), nx+1)
lat_bins = numpy.linspace(lats.min(), lats.max(), ny+1)

# Histogram the lats and lons to produce an array of frequencies in each box.
# Because histogram2d does not follow the cartesian convention 
# (as documented in the numpy.histogram2d docs)
# we need to provide lats and lons rather than lons and lats
density, _, _ = numpy.histogram2d(lats, lons, [lat_bins, lon_bins])

# Turn the lon/lat bins into 2 dimensional arrays ready 
# for conversion into projected coordinates
lon_bins_2d, lat_bins_2d = numpy.meshgrid(lon_bins, lat_bins)

# convert the xs and ys to map coordinates
xs, ys = m(lon_bins_2d, lat_bins_2d)

plt.pcolormesh(xs, ys, density)
plt.colorbar(orientation='horizontal')

# overlay the scatter points to see that the density 
# is working as expected
plt.scatter(*m(lons, lats))

plt.show() 
```

![在此处输入图像描述](../Images/a53c6f620da6f3570ea61990e0a2aed8.png)

**编辑**：我添加了更多内联注释以帮助理解/可读性。

# migration - 如何在 Redmine 的所有项目中列出所有“紧急”优先级错误？

> ID：11507579
> 
> 赞同：0
> 
> 时间：2012-07-16T15:34:17.487
> 
> 标签：migration, workflow, redmine, bugzilla

我们正在从 Bugzilla 迁移到 Redmine，并且我不确定如何在 Redmine 中复制 bugzilla 的一个功能。

有没有办法列出所有项目中特定优先级的所有错误/功能？

我们曾经使用这种机制来确定要分配给开发人员的错误/功能。如果列出所有紧急错误在 Redmine 中不起作用，也许可以使用另一种工作方式来代替？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T18:42:45.050

这很简单：

*   转到[https://your.redmine.domain/issues?set_filter=1](https://your.redmine.domain/issues?set_filter=1)：这应该清除所有当前过滤条件并显示当前登录用户有权访问的所有项目中的所有未解决问题。
*   选择您的过滤器 - 在这种情况下，添加一个过滤器`Priority`，然后点击应用
*   您可以通过单击[保存此过滤器](http://www.redmine.org/projects/redmine/wiki/RedmineIssueList#Applying-and-saving-filters)`Save`：这将允许您快速访问此过滤器，而无需每次都对其进行配置。您还可以选择分组标准以及要显示的列。

# php - 锂 PHP 全局变量

> ID：11507587
> 
> 赞同：1
> 
> 时间：2012-07-16T15:34:42.870
> 
> 标签：php, variables, global, lithium

我到处看了看，但仍然无法弄清楚如何在 PHP（锂框架）中设置全局变量。

我的目标是让服务器根始终可在任何地方访问，而不必每次都编写此代码，以使我的应用程序独立于它运行的主机名：

```
<?php echo "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?> 
```

请不要告诉我只使用绝对路径或相对路径，因为我已经尝试过所有方法，而且它太混乱了（除了大部分时间都不起作用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T17:27:00.887

看起来您上面的代码在模板中。所以你可以`$this->request()->to('url')`用来获取当前的url。或者来自控制器，它将是`$this->request->to('url')`. 您也可以传递`'absolute' => true`给`Router::match`. 不幸的是，html 链接助手 - 即`$this->html->link(...)`- 不会将`'absolute' => true`选项传递给 ，`Router::match`但您可以调用`$this->url()`传递给`Router::match`. 所以它会`$this->url('/relative/url', array('absolute' => true))`。

请参阅[Router::match 的文档](http://li3.me/docs/lithium/net/http/Router%3a%3amatch)

该`Request`对象还提供对 http 主机和请求 uri 等内容的访问。请参阅[文档`Request::env()`](http://li3.me/docs/lithium/action/Request%3a%3aenv)

但是，就您关于全局变量的原始观点而言，我认为应该使用[Environment类。](http://li3.me/docs/lithium/core/Environment)您可以将任意数据放入其中 - 甚至在您的引导程序中将其设置为针对不同环境（即开发与登台与生产）具有不同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:43:19.883

抱歉，但使用相对路径并使用链接生成器帮助程序，它*不会*得到你试图做错的事情。

请参阅[文档](http://lithify.me/docs/lithium/template/helper/Html%3a%3alink%28%29)。

# c# - 以编程方式获取 SPList 中复选框的值

> ID：11507592
> 
> 赞同：0
> 
> 时间：2012-07-16T15:35:00.993
> 
> 标签：c#, sharepoint-2010

有谁知道如何获取 SPList 中每一行关联的复选框的值？我所指的复选框是您可以在表格视图中启用的复选框。

我似乎找不到任何引用来访问以下类中的复选框：

SPListItem SPListItemCollection SPView SPList

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:36:52.847

尝试 ：

```
SPListItem listItem = // retrieve your list ;

var YourStringValue = listItem["YourYesNoField"].ToString().ToLower(); 
```

返回“true”或“false”字符串值

或者

```
var YourBooleanValue = (bool)listItem["YourYesNoField"]; 
```

返回 True 或 False 布尔值

# javascript - 我需要将两个元素传递给 onclick 事件处理函数 javascript 而不仅仅是它们的 id

> ID：11507595
> 
> 赞同：1
> 
> 时间：2012-07-16T15:35:10.560
> 
> 标签：javascript, javascript-events

假设我的代码中有 2 个元素，并且我想将它们各自的 id 传递给事件处理函数。（在下面的示例中，我有一个 div 和一个按钮）

```
<div id="div1">
  <input type="button" id="button1" onclick="doSomething(this, [here comes id of div])" />
</div> 
```

对于按钮，我没有编写“button1”的id，而是使用“this”关键字简单地传递了元素本身。现在我的问题是，有没有一种方法可以让我在函数中传递 div 元素本身，而不仅仅是它的 id，就像我对 button 元素所做的那样？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:38:44.190

您可以使用该[`parentNode`属性](https://developer.mozilla.org/En/DOM/Node.parentNode)；

```
this.parentNode 
```

由于这返回一个`DOMElement`（类似于`this`），您可以通过相同的方式访问 ID；

```
this.parentNode.id 
```

...如果你想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:38:11.010

只需在回调中从父级获取它：

```
function clickHandler(e){
    console.log(e.target.parentNode.id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:38:27.560

为什么你首先需要通过它？通过 访问 div [`parentNode`](https://developer.mozilla.org/En/DOM/Node.parentNode)。

```
onclick="doSomething(this);" 
```

和

```
function doSomething(btn) {
   var div = btn.parentNode;
} 
```

# svn - 在 Tortoise SVN 中使用分支进行编写和测试

> ID：11507599
> 
> 赞同：2
> 
> 时间：2012-07-16T15:35:17.660
> 
> 标签：svn, tortoisesvn

我目前已经切换到 SVN (Tortoise)。这是我第一次接触SVN。所以像我这样的新手，像往常一样，会出现很多问题，有些我们在互联网上找到了令人信服的答案，有些则没有。我属于我们尝试编写代码、使用它、测试它然后将其添加到主项目中的那种开发人员。您可能会说这就是 SVN 中的分支（我同意，但仍有一些问题）。我读过通常人们在分支部分进行开发部分，然后在将其提交到存储库之前合并来自分支->主干的内容。

我有几个问题：

1.  有人可以向我解释如何使我的分支/分支文件夹成为我当前的工作文件夹，以便我可以测试我的书面代码和类似的东西，在此之前我曾经在我的本地主机上工作，在将其上传到主服务器之前重新检查所有内容，我希望有人能理解我的问题。现在主干文件夹作为我当前的目录工作。

2.  如何将内容从主干传输到我的分支/分支文件夹，只需复制和粘贴，或者是否有其他复杂的方法可以做到这一点。

我最近从我的本地目录结构看起来像的存储库更新了我的本地目录

```
Project/
       Code/
            /trunk   /branches (both in same directory) 
```

所有必要的数据现在都在主干中，并且分支文件夹是空的。使用分支/分支文件夹的更好方法是什么，在分支目录中创建一个新文件夹分支或将主干的内容获取到分支并从那里开始工作。

任何帮助或任何有用的链接将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:38:40.370

> 如何使我的分支/分支文件夹成为我当前的工作文件夹

在 SVN 中，这称为“切换”您的工作副本。右键单击工作副本的根目录，然后选择“Tortoise SVN”、“Switch”。

> 如何将内容从主干传输到我的分支/分支文件夹

最简单的方法是创建分支作为主干的副本。您可以使用[复制（分支/标签）功能](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-branchtag.html)：'Tortoise SVN'、'分支/标签'。您也可以选中底部的框以自动切换到该分支。

git 问题：有人刚刚发表了关于“更现代的 VCS”的评论，然后将其删除。IMO Subversion 可以很好地进行分支，并且可能比 git 更平易近人，但现在似乎每个人都在使用 git。一旦您对 VCS 总体感到满意，那么看看 git 可能符合您的兴趣。

# sql - 将 FETCH NEXT 提取到类似表的结构中

> ID：11507602
> 
> 赞同：2
> 
> 时间：2012-07-16T15:35:53.223
> 
> 标签：sql, sql-server, sql-server-2005

我发现的所有`FETCH NEXT`获取`INTO`预定义变量的示例。所以：

```
DECLARE @Whatever Int
FETCH NEXT FROM my_cursor INTO @Whatever 
```

有没有办法 FETCH 或以其他方式处理游标，以便可以访问整行（如在表中）而无需定义每个变量？所以也许我可以获取除标量以外的东西？或者我可以直接查询游标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:39:11.437

是否可以用表变量替换光标？您将能够处理整行并且可能会提高性能。

发布更多您正在尝试做的事情，也许我们可以提供更多帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:50:04.037

你不能。您可以`UPDATE`或`DELETE`从光标使用`WHERE CURRENT OF`，但如果您选择它需要进入变量

# tfs - 上传流程模板时获取TF201006

> ID：11507603
> 
> 赞同：0
> 
> 时间：2012-07-16T15:35:57.263
> 
> 标签：tfs

我使用依赖关系添加了一个带有 Forward=Task 和 Reverse=User Story 的链接类型。我成功地将它上传到我的收藏中。

现在我删除链接类型并再次成功上传模板。

当我现在想创建一个包含“任务”作为转发的新链接类型时，我收到错误：

> TF201006: 链接类型 NEWNAME 与链接类型 OLDNAME 冲突。名称 Task 已被使用。（类型 ProvisionValidationException）

我看不到如何删除 TFS 上的 OLDNAME.xml，因为我不知道这些上传的模板存储在哪里。显然，即使您删除了链接类型，ProcessEditor 也会保留这些文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:54:39.537

我得到了它。LinkTypes 作为 SQL-Server-Database 上 LinkTypes 表中的条目上传，该数据库负责您将模板上传到的团队集合。因此，如果您遇到同样的问题，请继续从该表中删除您自己添加的所有项目。

# javascript - SmoothDivScroll; 左热点太快，右热点什么都不做

> ID：11507606
> 
> 赞同：1
> 
> 时间：2012-07-16T15:36:05.897
> 
> 标签：javascript, jquery, jquery-ui

我目前正在使用 SmoothDivScroll 来实现滚动的图像流。但是，左侧热点速度过快，而右侧热点似乎没有正确响应。

我设置了一个展示问题的小提琴：http: [//jsfiddle.net/gUewB/4/](http://jsfiddle.net/gUewB/4/)

我猜这与计算偏移量的方式有关，但我找不到解决问题的好方法。我的 JavaSkills 并不是那么好。：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-18T13:02:53.637

我知道这个线程有点旧。但我有完全相同的问题！即使我更新到最新版本（这是发布版本 1.3 的时刻）

不幸的是，Pieter Mathys 的解决方案对我不起作用。

我发现如果所有共同图像的宽度小于scrollableArea-div，就会出现滚动问题。所以你所要做的就是检查是否有足够的图像来填充可滚动区域。如果没有，则无论如何您都不需要 SmoothDivScroll。我有一些示例代码：

```
... html is already in in DOM ...

imagesLoaded( '#myScrollable', function( element )
{
    var $myScrollable = $(element.elements); // just one #myScrollable
    var imgWidths = 0;
    var images = $myScrollable.find('img');
    for(var loop=0; loop < images.length; loop++)
        imgWidths += $(images[loop]).width();
    if( imgWidths > $myScrollable.width() )
    {
        $myScrollable.smoothDivScroll(
        {
            manualContinuousScrolling: true
        });
        $myScrollable.smoothDivScroll("recalculateScrollableArea");
    }
}); 
```

但我不得不说，我使用了来自[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)的插件（imagesLoaded），以便在加载所有图像时发生事件。否则所有图像的大小为“0”；

我希望这对任何人都有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:18:57.217

发生错误的原因如下：`margin: 0 auto;`

用以下方法修复它：

设置向右滚动的事件：

```
var x = e.pageX - (this.offsetLeft + el.data("scrollerOffset").left); 
```

变成

```
var x = el.data("hotSpotWidth") + (e.pageX - el.data("scrollerOffset").left - 960); 
```

设置向左滚动的事件：

```
var x = ((this.offsetLeft + el.data("scrollerOffset").left + el.data("hotSpotWidth")) - e.pageX); 
```

变成

```
var x = el.data("hotSpotWidth") - (e.pageX - el.data("scrollerOffset").left); 
```

# c++ - C++ -- ' ' 之前的预期主表达式

> ID：11507607
> 
> 赞同：23
> 
> 时间：2012-07-16T15:36:06.663
> 
> 标签：c++, string, function, variables

我是 C++ 和编程的新手，遇到了一个我无法弄清楚的错误。当我尝试运行该程序时，我收到以下错误消息：

```
stringPerm.cpp: In function ‘int main()’:
stringPerm.cpp:12: error: expected primary-expression before ‘word’ 
```

在将变量分配给函数之前，我还尝试在单独的行上定义变量，但最终得到相同的错误消息。

任何人都可以提供一些建议吗？提前致谢！

请参见下面的代码：

```
#include <iostream>
#include <string>
using namespace std;

string userInput();
int wordLengthFunction(string word);
int permutation(int wordLength);

int main()
{
    string word = userInput();
    int wordLength = wordLengthFunction(string word);

    cout << word << " has " << permutation(wordLength) << " permutations." << endl;

    return 0;
}

string userInput()
{
    string word;

    cout << "Please enter a word: ";
    cin >> word;

    return word;
}

int wordLengthFunction(string word)
{
    int wordLength;

    wordLength = word.length();

    return wordLength;
}

int permutation(int wordLength)
{    
    if (wordLength == 1)
    {
        return wordLength;
    }
    else
    {
        return wordLength * permutation(wordLength - 1);
    }    
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-16T15:39:10.577

在调用`wordLengthFunction()`.

`int wordLength = wordLengthFunction(string word);`

应该

`int wordLength = wordLengthFunction(word);`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T15:39:03.470

改变

```
int wordLength = wordLengthFunction(string word); 
```

至

```
int wordLength = wordLengthFunction(word); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-16T15:39:19.650

`string`发送参数时不应重复该部分。

```
int wordLength = wordLengthFunction(word); //you do not put string word here. 
```

# mysql - 如何将字符串连接到 MySQL 结果集

> ID：11507608
> 
> 赞同：1
> 
> 时间：2012-07-16T15:36:08.127
> 
> 标签：mysql

考虑下表：

```
id  foo
-----------
1   bar
2   baz
3   bat 
```

所需的输出（来自 SQL 查询）：

```
id str_id foo
--------------
1  str1   bar
2  str2   baz
3  str3   bat 
```

在这种情况下，“str”连接到每个 id。这是否可能，如果可以，在 MySQL 中如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:38:40.610

使用[CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)在 MySQL中*连接字符串。*

```
SELECT id, CONCAT("str", id) AS str_id, foo FROM yourtable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:38:21.170

```
SELECT `id`, CONCAT('str', `id`) AS `str_id`, `foo`
FROM `tbl`
ORDER BY `id` ASC; 
```

# css - 在后台浮动div

> ID：11507610
> 
> 赞同：1
> 
> 时间：2012-07-16T15:36:12.480
> 
> 标签：css, html

试图制作一个浮动div，始终在背景中使用-1 z-index，但是当我将其设为绝对位置时，它就会消失。还想用 y-repeat 图像将它放在中间。

```
.perchament{
    position:absolute;
    margin:0 auto;
    height:100%;
    background: url("image_assets/parchment.png") repeat-y;
    margin-top:25px;
    z-index:-1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:40:18.543

它消失了，因为里面没有内容，也没有指定宽度。

将此添加到您的 CSS 中：

```
left: 50%;
width: 100px;
margin-left: -50px; 
```

需要设置宽度，左边距总是一半。

[演示](http://jsfiddle.net/XJp8u/)

正如其他人所说，为什么不在身体上做一个背景图像呢？

```
body {
    background: url("image_assets/parchment.png") center repeat-y;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:40:31.027

在这种特殊情况下，您需要为您的 div 添加一个宽度（因为它是绝对定位的）。

但是，关于元素的`background`规则或类似的东西有什么问题？`body`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:42:23.137

绝对定位元素应该使用“顶部”和其他此类定位控件而不是边距等，并设置宽度和高度。

```
 .perchament{
        position:absolute;
    top: 0;
    left: 0;
width: 500px;
        margin:0 auto;
        height:100%;
        background: url("image_assets/parchment.png") repeat-y;
        margin-top:25px;
        z-index:-1;
    } 
```

这有帮助吗？

我也会避免使用负 z-index。相反，您可以将此项目设置为 z-index: 1，然后将其上方的容器（包含其他所有内容）设置为 z-index: 2。

或者，如果它只是您想要的背景图像，您可以简单地将其放在文档的 BODY 标记而不是 div 上。BODY 或 HTML 元素始终位于堆栈的底部。

# r - 给出答案时求函数的系数

> ID：11507613
> 
> 赞同：-4
> 
> 时间：2012-07-16T15:36:27.453
> 
> 标签：r

我正在尝试解决 R 中以下函数的逆问题。

```
x + 2 (C1 * y) + C1 * C1 * z = d2 
```

我目前可以进入`C1`并获取`d2`，但需要进入`d2`并获取`C1`。变量`x`,`y`和`z`都是已知的并且永远不会改变。

我已经有一些已知`C1`的`d2`值可以使用。

```
 C1     d2 
 5   0.000316
 0   0.000193
-5   0.000123 
```

是否有一个`R`函数可以让我输入函数、先前的结果和一个`d2`值并返回`C1`系数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T16:03:43.173

你有一个形式的二次方程：

```
(x - d2)*C1^0 + (2*y)*C1^1 + (z)*C1^2 = 0 
```

您可以使用 R 中的函数求解二次方程（实际上是任何多项式方程）`polyroot()`：

```
x <- 1
y <- 2
z <- 3

d <- 0

polyroot(c(x-d, 2*y, z))
[1] -0.3333333+0i -1.0000000+0i 
```

（如您所料，这提供了两种解决方案）

要解决一系列输入值，您需要将其放入您喜欢的`apply`函数中，在这种情况下`sapply()`：

```
d <- seq(0, 1, 0.2)

sapply(d, function(dd)polyroot(c(x-dd, 2*y, z)))

              [,1]          [,2]          [,3]          [,4]           [,5]         [,6]
[1,] -0.3333333+0i -0.2450296+0i -0.1722534-0i -0.1088933-0i -0.05203037+0i  0.000000+0i
[2,] -1.0000000+0i -1.0883037+0i -1.1610799+0i -1.2244400+0i -1.28130296+0i -1.333333+0i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:50:44.950

你有

```
d2 = x + 2 C1 y + C1^2 z 
```

您可以重新排列以获得

```
z C1^2 + 2 y C1 + x - d2 = 0 
```

这是 C1 中的[二次方程](http://en.wikipedia.org/wiki/Quadratic_equation)，您可以使用二次公式求解，也可以将其代入[Wolfram Alpha](http://www.wolframalpha.com/input/?i=solve+z++c_1%5E2+%2B+2+y+c_1+%2B+x+-+d_2+%3D+0+for+c_1)得到

```
C1 = (-sqrt( d2 * z - x * z + y^2 ) - y) / z 
```

# vector-graphics - 图形的RGB亚像素渲染？

> ID：11507619
> 
> 赞同：20
> 
> 时间：2012-07-16T15:36:42.670
> 
> 标签：vector-graphics, subpixel

我想知道是否有任何图形库支持通用图形的 RGB 亚像素渲染（如 ClearType），*而不仅仅是文本*。这将允许将水平分辨率提高三倍，并将图形放在第三个像素的 x 位置上。

虽然我认为这将非常有用，但我在互联网上找不到太多关于它的信息，除了以下内容：

*   [亚像素字体渲染的工作原理](http://www.grc.com/ct/ctwhat.htm)（中间有一些线条图像）
*   [亚像素渲染和图像大小调整](http://entropymine.com/imageworsener/subpixel/)（关于应用亚像素渲染来调整位图大小的一些有趣想法）

例如，是否有任何图书馆实现了这一点，或者是否有努力将这样的东西带到开罗图书馆？

* * *

更新：

我特别指的是考虑到当前 LCD 屏幕使用不同颜色的子像素的渲染技术。要制作白点，请将所有子像素设置为 'on' 或 255。白线将是多个子像素相互叠加：

```
...RGB...
...RGB...
...RGB...
...RGB...
...RGB...
...111... 
```

（其中`.`是全黑子像素，`R`或`G`是`B`全亮红色、绿色或蓝色子像素）。因为我们的眼睛无法分辨子像素，所以它们混合在一起形成一条白线。但是，我也可以从以下内容中划出一条白线：

```
....GBR..
....GBR..
....GBR..
....GBR..
....GBR..
....111.. 
```

请注意，它非常清晰，但位于 x = 1 1/3 像素处。这对于绘制略微模糊的白线的传统渲染技术是不可能的。这里例如`R`=70% 点亮，`r`=30% 点亮。我没有计算出数学，这只是为了让你明白：

```
...RGBrgb...
...RGBrgb...
...RGBrgb...
...RGBrgb...
...RGBrgb...
...777333... 
```

另一个示例是斜率，您可以 a) 使用全像素，b) 抗锯齿，或 c) 使用子像素渲染：

```
a)  RGB......  b)  RGB......  c)  RGB......
    RGB......      RGBrgb...      .GBR.....
    ...RGB...      rgbRGB...      ..BRG....
    ...RGB...      ...RGB...      ...RGB...
    ...RGB...      ...RGBrgb      ....GBR..
    ......RGB      ...rgbRGB      .....BRG.
    ......RGB      ......RGB      ......RGB 
```

同样，请注意，这只是一个粗略的示例，可以为您提供一般概念，但您会看到 a) 锯齿或锯齿，b) 模糊，c) 与 LCD 上的清晰度一样高。

字体显示的实际实现（Windows 上的 ClearType 和 FreeType 中的子像素渲染）具有更复杂的算法。它们考虑到各个子像素会相互渗透或发光，它们保留了总的颜色强度或能量。他们还考虑到子像素间距不均匀（R和G之间的间距，或者G和B（像素中）的间距可能小于B和R之间的间距），最后一些显示器具有完全不同的像素布局。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-28T12:12:19.987

据我所知，不存在具有亚像素 RGB 渲染的图形库。

以下是一些可能的原因：

*   微软在 RGB 亚像素渲染技术方面拥有[多项专利。](http://en.wikipedia.org/wiki/ClearType#Patents)我不知道这些专利是否仅适用于字体光栅化，但如果不是，这可能是其他图形库不使用它的一个很好的理由。
*   就像问题中指出的那样，亚像素渲染依赖于硬件实现。它适用于通过并排放置 3 个颜色单元（例如 LCD 监视器）来组成颜色的显示器。对于所有其他显示器类型（等离子、投影仪、旧 CRT），它不起作用。
*   亚像素渲染仅增加水平分辨率。这种限制对于字体光栅化来说不是问题，因为通常水平方向的字体需要更高的分辨率（请参阅粗体和斜体字符和字距调整）。使用“自定义”图形在每个轴上具有不同的分辨率会很奇怪。
*   子像素渲染不适用于旋转显示。例如，移动设备必须同时使用 RGB 子像素渲染和抗锯齿。
*   子像素渲染仅适用于显示器的原始分辨率。
*   看起来色盲的人在亚像素渲染方面有问题。有关更多信息，请参阅[本文](http://www.w3.org/WAI/RD/2012/text-customization/p7.html)。
*   子像素渲染在白底黑字或黑底白字的情况下效果很好。对于其他背景，“渲染器”必须知道背景颜色才能调整子像素效果。由于这个原因，Office 2013 停止使用 ClearType。
*   这更主观，但亚像素渲染和抗锯齿之间的区别非常微妙。子像素渲染的缺点和增加的复杂性可能不值得。

恕我直言，更好的图形的未来是更高的[像素密度](http://en.wikipedia.org/wiki/Pixel_density)，如 Apple Retina 显示器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-19T02:29:43.563

有人设法使用 ImageMagick 获得了一些有趣的结果。方法和结果，以及有趣的讨论，都在这里公开：[https ://www.imagemagick.org/discourse-server/viewtopic.php?t=19120](https://www.imagemagick.org/discourse-server/viewtopic.php?t=19120)

有趣的话题，确实。但问题仍然存在：这项技术有多大用处，因为这样的过程只会使未缩放的图像在特定类型的显示器上受益？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T01:11:35.807

通过定义您自己的转换管道将输出映射到设备像素，antigrain.com 上的 AGG 似乎是可能的。见[https://sourceforge.net/p/vector-agg/mailman/search/?q=LCD](https://sourceforge.net/p/vector-agg/mailman/search/?q=LCD)

# android - Android Webview - 自定义 HTML

> ID：11507621
> 
> 赞同：1
> 
> 时间：2012-07-16T15:36:57.287
> 
> 标签：android, html, android-webview, android-websettings

如果手机上没有数据连接，如何显示我的自定义 HTML 代码？

**自定义 HTML 代码：**

```
String customHtml = "<html><body>Hello, WebView</body></html>";
webView.loadData(customHtml, "text/html", "UTF-8"); 
```

**这是我的完整代码：**

```
package com.webbrowser.android;

import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

private WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    webView = (WebView) findViewById(R.id.webView1);
    webView.setWebViewClient(new WebViewClient()); 
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://domain.com");
} 
```

}

**编辑：**

这是正确的吗？它在模拟器上不起作用。请您再看一遍好吗？

**编辑2：**

添加了括号。

```
public class MainActivity extends Activity {

    private WebView webView;

    public boolean isConnected() {
        ConnectivityManager cm =
            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

        return (cm.getActiveNetworkInfo() != null && 
           cm.getActiveNetworkInfo().isConnectedOrConnecting());
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.webView1);
        webView.setWebViewClient(new WebViewClient()); 
        webView.getSettings().setJavaScriptEnabled(true);

        if(!isConnected()) {
            String customHtml = "<html><body>Hello, WebView</body></html>";
            webView.loadData(customHtml, "text/html", "UTF-8");
        } else {
            webView.loadUrl("http://domain.com");
            }   

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:45:03.523

首先使用以下命令检查连接性：

```
public boolean isConnected() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    return (cm.getActiveNetworkInfo() != null && 
       cm.getActiveNetworkInfo().isConnectedOrConnecting())
} 
```

然后根据结果调用适当的方法：

```
if(!isConnected()) {
    String customHtml = "<html><body>Hello, WebView</body></html>";
    webView.loadData(customHtml, "text/html", "UTF-8");
} else {
    webView.loadUrl("http://domain.com");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:43:36.537

由于您正在加载特定的 html 代码（基本），它将在没有数据连接的情况下加载...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T09:38:26.623

请使用 webviewclients 函数 onReceivedError。这将适用于任何连接类型。

```
public void onReceivedError(WebView view, int errorCod,String description, String failingUrl) {
        // Load custom data into webview depending on errorcode
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-30T09:57:12.153

嘿，你可以试试这个代码，它工作得很好

```
public class SudhirAwesome extends Activity {
WebView webView;
String html = "<!DOCTYPE html>\n" +
        "<html>\n" +
        "<head>\n" +
        "</head>\n" +
        "<body>\n" +
        "\n" +
        "<h1>Can you please check your Internet Connection</h1>\n" +
        "\n" +
        "</body>\n" +
        "</html>\n";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sportee);

    webView = (WebView) findViewById(R.id.webview_sportee);
    webView.getSettings().setLoadsImagesAutomatically(true);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    webView.setWebViewClient(new MyBrowser());
    if(haveNetworkConnection()){
        webView.loadUrl("http://blah.blah.com");
    }
    else{
        webView.loadData(html,"text/html", "UTF-8");

        Toast.makeText(getApplicationContext(),"Please Check your Internet Connection",Toast.LENGTH_LONG).show();
    }

    //This acts like browser only
}

private class MyBrowser extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        try {
            view.loadUrl(url);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return true;
    }
}
private boolean haveNetworkConnection() {
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
} 
```

你也必须给予这些权限

```
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

# rest - 什么是最简单、最少的 Backbone.js 代码来做 REST（假设服务器端是正确的）？

> ID：11507622
> 
> 赞同：0
> 
> 时间：2012-07-16T15:37:04.947
> 
> 标签：rest, grails, jqgrid, backbone.js, gsp

我重写了一个 grails 应用程序，以便它的 3 个域都可以在我认为（大部分）正确/Restful URL 上使用。这些域的每个控制器都有一个索引操作，根据使用的 request.method 以及是否传递了 id，我已经准备好发送 json 回复或保存/删除/等。

在 gsp 方面，我已经加载了 jquery、主干和下划线。我已经仔细检查过，这些加载正确，并且相应的 API 似乎可以从我粘贴到脚本元素中的任何代码中获得。

然而，尽管如此，我似乎无法让 Backbone.js 做任何有用的事情。我已经阅读了 Stackoverflow 上的文档、至少十几个教程/示例以及大约 100 个与主干相关的问题。我唯一可以肯定的是，路由器功能在这个特定项目中几乎没有兴趣。

有人告诉我，我可以选择是否使用 DataTables 或 jqGrid 作为此应用程序的网格小部件。无论哪种方式，我都没有偏好，但如果考虑到 Backbone.js，一个比另一个更容易，我会很乐意选择它。我有一些运气将数据加载到数据表中，但只能通过直接将其写入 GSP 表。

我知道 Backbone 可能不是最好的选择，但我在这件事上别无选择。老实说，我不太确定 Backbone.js 想要实现什么。

将 Backbone 和 REST 的东西联系在一起的最简单、最小的代码是什么，这样当在网格小部件的行中单击一个按钮时，相关的记录就会被删除？因此，相关数据也首先被加载到网格小部件中？这样我就可以从网格底行的任意 html 输入中添加/插入记录，或者编辑那里列出的现有记录？

我可以提供所需的任何代码，但似乎不需要...我认为我将 Grails 的一面朝下，非常接近所需的代码，并认为它只会使页面变得混乱。提前为漫无边际的道歉，在我把它写成一个你们有机会回答的问题时试图完善它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:52:39.417

为每个模型和集合定义`url`-attribute 以表示对应于该模型或集合的 RESTful url。这可以只是一个字符串，也可以是一个返回字符串的函数：

```
url: 'path/to/my/collection-or-model' // string

url: function() { // function
  return 'type-of-collection-or-model/' + this.identifyingAttribute 
} 
```

现在您已经完成了后端的跟踪。接下来是 CRUD（创建、读取、更新、删除）-时间！

```
model.save() // Saves your model, if it is new this will be a POST request, otherwise PUT

model.fetch() // Retrieves your model from the backed, this will be a GET request

model.destroy() // Destroys your model and removes it from the backed as well, a DELETE 
```

您还可以使用`collection.fetch()`-function 获取整个集合。获取有关 Backbone 和 CRUD 操作的准确信息的最佳位置是[backbone.org](http://backbonejs.org/#Sync)，如果您想要更多示例丰富的教程，我会参考Backbone[的 Wine-Cellar 教程的 CRUD 部分。](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-2-crud/)

希望这可以帮助！

# ruby - 根据 Ruby 中的列删除重复项

> ID：11507624
> 
> 赞同：3
> 
> 时间：2012-07-16T15:37:14.487
> 
> 标签：ruby, csv, duplicate-removal

我的问题与[此](https://stackoverflow.com/questions/7156825/remove-rows-in-file-ruby/7157395#7157395)类似。基本上有一个 CSV 文件，但有重复的 PID，但我不能这样做`.uniq`：

```
File.open("new.csv", "w+") { |file| file.puts File.readlines("old.csv").uniq } 
```

因为线条不同。我是 Ruby 新手，想知道是否有一种优雅的方法可以仅基于第一列删除整行？还是我必须遍历每一行并查找重复的 PID？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T15:54:55.697

您可以传递`uniq`一个块来指定它将删除重复元素的要求。

```
File.open("old.csv", "w+") do |file|
  file.puts File.readlines("csv.csv").uniq! { |s| s[/^\d+/ ] }
end 
```

如[`uniq`文档](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-uniq)中所述。

`/^\d+/`用适合您的任何人替换正则表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T05:23:37.603

假设 pid 是第二列：

```
CSV.open('new.csv', 'w') do |csv|
  CSV.read('old.csv').uniq{|x| x[1]}.each do |row|
    csv << row
  end
end 
```

# android - Android 缩放和裁剪

> ID：11507627
> 
> 赞同：0
> 
> 时间：2012-07-16T15:37:31.057
> 
> 标签：android

我需要裁剪一张图片。我想要做的是通过缩放图片然后保存屏幕上可见的任何内容来裁剪它。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-15T15:17:14.390

我推荐图像裁剪库。

[https://github.com/naver/android-imagecropview](https://github.com/naver/android-imagecropview)

请试试这个:)

# c# - Silverlight4.0：在 MainPage 中设置子窗口字段不起作用

> ID：11507630
> 
> 赞同：0
> 
> 时间：2012-07-16T15:37:36.567
> 
> 标签：c#, .net, silverlight

我想将一些数据从 MainPage 传递到其子窗口，如下所示：

```
public MainPage()
{
  InitializeComponents();
  ChildWindow childwind = new ChildWindow();
  childwind.textblk1.Text += "Test!";
  //break point here
  ContentFrame.Content = childwind;  
} 
```

textblk1 是 ChildWindow 中 TextBlock 的名称。但是没有文字“测试！” 当我运行它时显示在页面中。虽然我只是通过读取 App 中添加的属性直接在 ChildWindow 的构造函数中设置文本来解决这个问题，但我仍然想知道为什么上述方法失败了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:35:38.667

我不明白你正在尝试的用法，但如果你想在 ChildWindow 中设置任何东西，下面应该足够了。

```
public MainPage()
{
    InitializeComponent();

    ChildWindow childwind = new ChildWindow();
    childwind.Content = "Test!";       
    childwind.Show();  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:00:56.297

```
public MainPage()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            label1.Content = "Button is hit";
            ChildWindow1 objchld = new ChildWindow1();
            objchld.label1.Content = "I am child window";
            objchld.Show();
        } 
```

希望这对你有用

# c# - .NET 对象事件和处置/GC

> ID：11507632
> 
> 赞同：9
> 
> 时间：2012-07-16T15:37:43.650
> 
> 标签：c#, .net, events, garbage-collection, dispose

**编辑：**在 Joel Coehoorns 出色的回答之后，我明白我需要更具体，所以我修改了我的代码以更接近我想要理解的东西......

**事件：**据我了解，在后台，事件是 EventHandlers aka Delegates 的“集合”，将在事件引发时执行。所以对我来说这意味着如果对象**Y**有事件 E 并且对象 X 订阅了事件**YE**，那么**Y**将引用 X，因为**Y**必须执行位于 X 中的方法，这样，**X 就不能被收集**，并且我明白的事情。

```
//Creates reference to this (b) in a.
a.EventHappened += new EventHandler(this.HandleEvent); 
```

**但这不是乔尔·科霍恩所说的……**

> 但是，事件存在一个问题，有时人们喜欢将 IDisposable 与具有事件的类型一起使用。问题是当一个类型 X 订阅另一个类型 Y 中的事件时，X 现在有一个对 Y 的引用。这个引用将阻止 Y 被收集。

我不明白**X**将如何引用 Y ???

我修改了一些我的例子来更接近地说明我的情况：

```
class Service //Let's say it's windows service that must be 24/7 online
{       
    A _a;

    void Start()
    {
       CustomNotificationSystem.OnEventRaised += new EventHandler(CustomNotificationSystemHandler)
       _a = new A();

       B b1 = new B(_a);
       B b2 = new B(_a);
       C c1 = new C(_a);
       C c2 = new C(_a);
    }

    void CustomNotificationSystemHandler(args)
    {

        //_a.Dispose(); ADDED BY **EDIT 2***
        a.Dispose();

        _a = new A();
        /*
        b1,b2,c1,c2 will continue to exists as is, and I know they will now subscribed
        to previous instance of _a, and it's OK by me, BUT in that example, now, nobody
        references the previous instance of _a (b not holds reference to _a) and by my
        theory, previous instance of _a, now may be collected...or I'm missing
        something???
        */
    }

}  

class A : IDisposable
        {
           public event EventHandler EventHappened;
        }

        class B
        {          
           public B(A a) //Class B does not stores reference to a internally.
           {
              a.EventHappened += new EventHandler(this.HandleEventB);
           }

           public void HandleEventB(object sender, EventArgs args)
           {
           }
        }

        class C
        {          
           public C(A a) //Class B not stores reference to a internally.
           {
              a.EventHappened += new EventHandler(this.HandleEventC);
           }

           public void HandleEventC(object sender, EventArgs args)
           {
           }
        } 
```

**编辑2：**好的，现在很清楚，当订阅者订阅发布者事件时，它**不会**在订阅者中创建对发布者的引用。仅创建从发布者到订阅者的引用（通过EventHandler）......在这种情况下，当GC在订阅者之前收集发布者（订阅者生存期大于发布者）时，没有问题。

**但是**......据我所知，不能保证 GC 何时会收集发布者，所以理论上，即使订阅者的生命周期长于发布者，订阅者可能会合法收集，但发布者仍然没有被收集（我不不知道是否在最近的 GC 周期内，GC 会足够聪明地先收集发布者，然后再收集订阅者。

无论如何，在这种情况下，由于我的订阅者没有直接引用发布者并且无法取消订阅事件，我想让发布者实现 IDisposable，以便在删除对他的所有引用之前将其处理（参见 CustomNotificationSystemHandler 中的我的例子）。

**再一次，**我应该在发布者处理方法中写什么以清除对订阅者的所有引用？应该是 EventHappened -= null; 或 EventHappened = null; 或者没有办法以这种方式做到这一点，我需要做类似下面的东西？？？

```
public event EventHandler EventHappened
   {
      add 
      {
         eventTable["EventHappened"] = (EventHandler)eventTable["EventHappened"] + value;
      }
      remove
      {
         eventTable["EventHappened"] = (EventHandler)eventTable["EventHappened"] - value; 
      }
   } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T16:34:38.313

> 对象 B 的生命周期比 A 长，所以 A 可能会被更早地处理掉

听起来您将“处置”与“收集”混淆了？释放对象与内存或垃圾回收**无关。**为了确保一切都清楚，让我们分解两个场景，然后我将继续讨论最后的事件：

**收藏：**

**您所做的任何**事情都不会允许在其父 B 之前收集 A。只要 B 是*可访问*的，A 也是如此。即使 A 是私有的，它仍然可以从 B 中的任何代码访问，并且只要 B 是可访问的， A 被认为是可达的。这意味着垃圾收集器不确定您是否已经完成了它，并且在收集 B 也是安全的之前永远不会收集 A。即使您明确调用 GC.Collect() 或类似方法也是如此。只要一个对象是可达的，它就不会被收集。

**处理：**

我什至不确定你为什么在这里实现 IDisposable （它与内存或垃圾收集*无关*），但我会暂时让你怀疑我们只是看不到非托管资源。

没有什么能阻止您随时处置 A。只需调用 a.Dispose()，就完成了。.Net 框架自动为您调用 Dispose() 的唯一方法是在`using`块的末尾。垃圾回收期间不会调用 Dispose()，除非您将其作为对象终结器的一部分（稍后将详细介绍终结器）。

在实现 IDisposable 时，您正在向程序员发送一条消息，即这种类型应该（甚至“必须”）被及时处理。任何 IDisposable 对象都有两种正确的模式（模式有两种变体）。第一种模式是将类型本身包含在 using 块中。如果这是不可能的（例如：类型是另一种类型的成员的代码），第二种模式是父类型也应该实现 IDisposable 以便它本身可以包含在 using 块中，它是Dispose() 可以调用你的类型的 Dispose()。这些模式的变化是使用 try/finally 块而不是 using 块，在 finally 块中调用 Dispose()。

现在到终结者了。唯一需要实现终结器的情况是针对*源自*非托管资源的 IDisposable 类型。因此，例如，如果您上面的类型 A 只是包装像 SqlConnection 这样的类，它不需要终结器，因为 SqlConnection 本身中的终结器将负责任何需要的清理工作。但是，如果您的类型 A 正在实现与一种全新类型的数据库引擎的连接，您将需要一个终结器来*确保*在收集对象时关闭您的连接。但是，您的类型 B 不需要终结器，即使它管理/包装您的类型 A，因为类型 A 将负责终结连接。

**事件：**

从技术上讲，事件仍然是托管代码，不需要处理。但是，事件存在一个问题，有时人们喜欢将 IDisposable 与具有事件的类型一起使用。问题是当一个类型 X 订阅另一个类型 Y 中的事件时，Y 现在有了对 X 的引用。这个引用可以防止 X 被收集。如果您希望 Y 的寿命比 X 长，那么您可能会遇到问题，特别是如果 Y 相对于随着时间的推移来来去去的许多 X 而言非常长寿。

为了解决这个问题，有时程序员会让 Y 类型实现 IDisposable，而 Dispose() 方法的目的是取消订阅任何事件，以便也可以收集订阅对象。从技术上讲，这不是 Dispose() 模式的目的，但它工作得很好，我不打算争论它。将此模式与事件一起使用时，您需要了解两件事：

1.  如果这是实现 IDisposable 的唯一原因，则不需要终结器
2.  您的类型的实例仍然需要 using 或 try/finally 块，或者您没有获得任何东西。否则 Dispose() 将不会被调用并且您的对象仍然无法被收集。

在这种情况下，您的类型 A 对类型 B 是私有的，因此只有类型 B 可以订阅 A 的事件。由于 'a' 是类型 B 的成员，因此在 B 不再可访问之前，两者都没有资格进行垃圾收集，此时两者都将不再可访问并且事件订阅引用将不计算在内。这意味着 A 的事件在 B 上持有的引用不会阻止 B 被收集。但是，如果您在其他地方使用 A 类型，您可能仍希望 A 实现 IDisposable 以确保您的事件被取消订阅。如果您这样做，请确保遵循整个模式，以便将 A 的实例包含在 using 或 try/finally 块中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T11:58:39.540

我在您的示例代码中添加了我的评论。

```
class A : IDisposable
{
   public event EventHandler EventHappened
   {
      add 
      {
         eventTable["EventHappened"] = (EventHandler)eventTable["EventHappened"] + value;
      }
      remove
      {
         eventTable["EventHappened"] = (EventHandler)eventTable["EventHappened"] - value; 
      }
   }

   public void Dispose()
   {
      //Amit: If you have only one event 'EventHappened', 
      //you can clear up the subscribers as follows

      eventTable["EventHappened"] = null;

      //Amit: EventHappened = null will not work here as it is 
      //just a syntactical sugar to clear the compiler generated backing delegate.
      //Since you have added 'add' and 'remove' there is no compiler generated 
      //delegate to clear
      //
      //Above was just to explain the concept.
      //If eventTable is a dictionary of EventHandlers
      //You can simply call 'clear' on it.
      //This will work even if there are more events like EventHappened          
   }
}

class B
{          
   public B(A a)
   {
      a.EventHappened += new EventHandler(this.HandleEventB);

      //You are absolutely right here.
      //class B does not store any reference to A
      //Subscribing an event does not add any reference to publisher
      //Here all you are doing is calling 'Add' method of 'EventHappened'
      //passing it a delegate which holds a reference to B.
      //Hence there is a path from A to B but not reverse.
   }

   public void HandleEventB(object sender, EventArgs args)
   {
   }
}

class C
{          
   public C(A a)
   {
      a.EventHappened += new EventHandler(this.HandleEventC);
   }

   public void HandleEventC(object sender, EventArgs args)
   {
   }
}

class Service
{       
    A _a;

    void Start()
    {
       CustomNotificationSystem.OnEventRaised += new EventHandler(CustomNotificationSystemHandler)

       _a = new A();

       //Amit:You are right all these do not store any reference to _a
       B b1 = new B(_a);
       B b2 = new B(_a);
       C c1 = new C(_a);
       C c2 = new C(_a);
    }

    void CustomNotificationSystemHandler(args)
    {

        //Amit: You decide that _a has lived its life and must be disposed.
        //Here I assume you want to dispose so that it stops firing its events
        //More on this later
        _a.Dispose();

        //Amit: Now _a points to a brand new A and hence previous instance 
        //is eligible for collection since there are no active references to 
        //previous _a now
        _a = new A();
    }    
} 
```

> b1,b2,c1,c2 将继续存在，我知道他们现在将订阅 _a 的前一个实例，我可以，但在那个例子中，现在，没有人引用 _a 的前一个实例（b 不是持有对 _a) 的引用，根据我的理论，以前的 _a 实例现在可以被收集......或者我错过了什么？？？

正如我在上面代码中的评论所解释的那样，你在这里没有遗漏任何东西:)

> 但是...据我所知，不能保证 GC 何时会收集发布者，所以理论上，即使订阅者的生命周期长于发布者，订阅者可能会合法收集，但发布者仍然没有被收集（我不不知道是否在最近的 GC 周期内，GC 会足够聪明地先收集发布者，然后再收集订阅者。

由于发布者引用订阅者，因此订阅者在发布者之前获得收集资格的情况永远不会发生，但反过来可能是正确的。如果发布者在订阅者之前被收集，那么正如您所说，没有问题。如果订阅者属于比发布者更低的 GC 代，那么由于发布者持有对订阅者的引用，GC 会将订阅者视为可访问的并且不会收集它。如果两者都属于同一代，它们将被收集在一起。

> 由于我的订阅者没有直接引用发布者并且不能取消订阅事件，我想让发布者实现 IDisposable

与某些人的建议相反，如果您在任何时候确定不再需要该对象，我建议您实施 dispose。简单地更新对象引用可能并不总是导致对象停止发布事件。

考虑以下代码：

```
class MainClass
{
    public static Publisher Publisher;

    static void Main()
    {
        Publisher = new Publisher();

        Thread eventThread = new Thread(DoWork);
        eventThread.Start();

        Publisher.StartPublishing(); //Keep on firing events
    }

    static void DoWork()
    {
        var subscriber = new Subscriber();
        subscriber = null; 
        //Subscriber is referenced by publisher's SomeEvent only
        Thread.Sleep(200);
        //We have waited enough, we don't require the Publisher now
        Publisher = null;
        GC.Collect();
        //Even after GC.Collect, publisher is not collected even when we have set Publisher to null
        //This is because 'StartPublishing' method is under execution at this point of time
        //which means it is implicitly reachable from Main Thread's stack (through 'this' pointer)
        //This also means that subscriber remain alive
        //Even when we intended the Publisher to stop publishing, it will keep firing events due to somewhat 'hidden' reference to it from Main Thread!!!!
    }
}

internal class Publisher
{
    public void StartPublishing()
    {
        Thread.Sleep(100);
        InvokeSomeEvent(null);
        Thread.Sleep(100);
        InvokeSomeEvent(null);
        Thread.Sleep(100);
        InvokeSomeEvent(null);
        Thread.Sleep(100);
        InvokeSomeEvent(null);
    }

    public event EventHandler SomeEvent;

    public void InvokeSomeEvent(object e)
    {
        EventHandler handler = SomeEvent;
        if (handler != null)
        {
            handler(this, null);
        }
    }

    ~Publisher()
    {
        Console.WriteLine("I am never Printed");
    }
}

internal class Subscriber
{
    public Subscriber()
    {
        if(MainClass.Publisher != null)
        {
            MainClass.Publisher.SomeEvent += PublisherSomeEvent;
        }
    }

    void PublisherSomeEvent(object sender, EventArgs e)
    {
        if (MainClass.Publisher == null)
        {
            //How can null fire an event!!! Raise Exception
            throw new Exception("Booooooooommmm");
            //But notice 'sender' is not null
        }
    }
} 
```

如果您运行上述代码，您通常会收到“Boooooooooommmmm”。因此想法是，当我们确定事件发布者的生命已经结束时，事件发布者必须停止触发事件。

这可以通过 Dispose 方法完成。

有两种方法可以实现这一点：

1.  设置一个标志“IsDisposed”并在触发任何事件之前对其进行检查。
2.  清除事件订阅者列表（如我在代码中的评论中所建议的那样）。

2 的好处是您释放对订阅者的任何引用，从而启用那里的收集（正如我之前解释的那样，即使发布者是垃圾但属于更高代，那么它仍然可能会延长对较低代订阅者的收集）。

虽然，诚然，由于发布者的“隐藏”可达性，您很少遇到这种行为，但正如您所见，2 的好处是显而易见的，并且对所有事件发布者都有效，尤其是长期存在的发布者（单身人士！ ！）。这本身使得实现 Dispose 并使用 2 是值得的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T17:24:35.510

与其他一些答案声称的相反**，发布者的 GC 生命周期可能超过订阅者的有用生命周期的事件应被视为非托管资源**。短语“非托管资源”中的“非托管”一词并不意味着“完全在托管代码的世界之外”，而是与对象是否需要在托管垃圾收集器提供的清理之外进行清理有关。

例如，一个集合可能会暴露一个`CollectionChanged`事件。如果订阅此类事件的其他类型的对象被重复创建和放弃，则集合可能最终持有对每个此类对象的委托引用。如果这种创建和放弃例如每秒发生一次（如果所讨论的对象是在更新 UI 窗口的例程中创建的可能发生的），那么在程序运行的每一天，这种引用的数量可能会增加超过 86,000 次。对于一个从不运行超过几分钟的程序来说不是一个大问题，但对于一个可以一次运行几周的程序来说绝对是一个杀手。

很遗憾微软没有在 vb.net 或 C# 中提出更好的事件清理模式。很少有任何理由说明订阅事件的类实例在被放弃之前不应该清理它们，但微软没有采取任何措施来促进这种清理。在实践中，放弃订阅事件足够频繁的对象（因为事件发布者将与订阅者大约在同一时间超出范围）可以逃脱惩罚，确保事件得到正确清理所需的烦人程度的努力并没有似乎不值得。不幸的是，预测事件发布者的寿命可能比预期长的所有情况并不总是那么容易。如果许多课程让事件悬而未决，它'

**回应编辑的附录**

如果`X`要订阅一个事件`Y`，然后放弃对 的所有引用`Y`，并且如果`Y`符合收集条件，则`X`不会阻止`Y`被收集。那将是一件好事。如果为了能够处理它`X`而保留一个强引用，则该引用将阻止被收集。这可能不是一件好事。在某些情况下，最好保留一个长的（用第二个参数设置为 构造的）而不是直接引用；如果 d 时的目标非空，则必须取消订阅`Y``Y``X``WeakReference``true``Y``WeakReference``X``Dispose``Y`的事件。如果目标为空，它不能取消订阅，但没关系，因为到那时`Y`（以及它对 的引用`X`）将完全不存在。请注意，在`Y`死后复活的不太可能的事件中，`X`仍将要取消订阅其事件；使用 long`WeakReference`将确保仍然可以发生。

虽然有些人会争辩`X`说不应该保留对 的引用`Y`，并且`Y`应该简单地编写为使用某种弱事件调度，但这种行为在一般情况下是不正确的，因为没有办法`Y`判断是否`X`会做任何其他事情即使*只有`Y`对`X`*. 完全有`X`可能持有对某个强根对象的引用，并可能在其事件处理程序中对其他对象执行某些操作。`Y`拥有唯一引用的事实`X`不应暗示没有其他对象对`X`. 唯一普遍正确的解决方案是让不再对其他对象的事件感兴趣的对象通知后面的对象该事实。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T15:49:14.013

我会让我的 B 类也实现 IDisposable 并且在它的处置例程中，我会首先检查 A 是否不为空，然后处置 A。通过使用这种方法，您必须确保处置最后一个类和内部将处理所有其他处置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T22:22:07.670

[MSDN 参考](http://msdn.microsoft.com/en-us/library/ms366768%28v=vs.100%29.aspx)

“为了防止在引发事件时调用您的事件处理程序，请取消订阅该事件。为了防止资源泄漏，您应该在处理订阅者对象之前取消订阅事件。在您取消订阅事件之前，多播委托发布对象中事件的基础具有对封装订阅者事件处理程序的委托的引用。只要发布对象持有该引用，垃圾收集就不会删除您的订阅者对象。

“当所有订阅者都取消订阅事件时，发布者类中的事件实例设置为空。”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T16:47:54.560

在处理对象时，您*不需要*取消挂钩事件处理程序，尽管您可能*想*要这样做。我的意思是，GC 会很好地清理事件处理程序，而无需您进行任何干预，但是根据情况，您可能希望在 GC 之前删除这些事件处理程序，以防止在您不在时调用处理程序。期待它。

在您的示例中，我认为您的角色颠倒了-类`A`实际上不应该取消订阅其他人添加的事件处理程序，也不需要删除事件处理程序，因为它可以停止引发这些事件！

然而，假设情况相反

```
class A
{
   public EventHandler EventHappened;
}

class B : IDisposable
{
    A _a;
    private bool disposed;

    public B(A a)
    {
        _a = a;
        a.EventHappened += this.HandleEvent;
    }

    public void Dispose(bool disposing)
    {
        // As an aside - if disposing is false then we are being called during 
        // finalization and so cannot safely reference _a as it may have already 
        // been GCd
        // In this situation we dont to remove the handler anyway as its about
        // to be cleaned up by the GC anyway
        if (disposing)
        {
            // You may wish to unsubscribe from events here
            _a.EventHappened -= this.HandleEvent;
            disposed = true;
        }
    }

    public void HandleEvent(object sender, EventArgs args)
    {
        if (disposed)
        {
            throw new ObjectDisposedException();
        }
    }
 } 
```

如果即使在已处置后仍有可能`A`继续引发事件，并且事件处理程序可能会执行一些可能导致异常或其他意外行为的事情，那么首先取消订阅此事件可能是个好主意。`B``B``B`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T13:23:07.400

对象 A 通过 EventHandler 委托引用 B（A 有一个 EventHandler 的实例，它引用 B）。B 没有对 A 的任何引用。当 A 设置为 null 时，它将被收集并释放内存。所以在这种情况下你不需要清除任何东西。

# java - vlcj mlr 特殊字符

> ID：11507633
> 
> 赞同：4
> 
> 时间：2012-07-16T15:37:44.347
> 
> 标签：java, encoding, vlcj

多年来，我一直在跟踪这个伟大的网站。今天，当我遇到问题时，我终于决定创建一个帐户。

我的问题是相当基本的 vlcj 执行。我有一个作为音频播放器运行的程序。这一切都完成了，除了一个我似乎无法弄清楚的问题。

当有人试图在文件路径中播放带有“é”（带有锐音的 e）的歌曲时，它似乎将错误地转换为 vlcj 的系统。

示例：我运行：

```
mediaPlayerComponent.getMediaPlayer().playMedia("file:///C:\\test.mp3");
  //(where mediaPlayerComponentis my is my local instantiated 
  // EmbeddedMediaPlayerComponent) 
```

这玩得很好。但是如果我运行：

```
mediaPlayerComponent.getMediaPlayer().playMedia("file:///C:\\é.mp3"); 
```

它不运行任何东西。

*   如果我调用 startMedia 而不是 playMedia，则布尔返回值为 false。

*   我还尝试了它前面没有'file:///'，这在功能上没有改变，除非我杀死程序，然后我得到一个'libdvdread'错误消息，例如：

    ```
    libdvdread: Could not open C:\?.mp3 with libdvdcss. 
    ```

所以为了让这个问题简短而有趣：我如何提供正确的“mrl”来让 vlcj 播放我的“é.mp3”。和/或需要哪些 MediaOptions 来解析正确的编码（我假设我的错误在这里？）

很抱歉没有提供 SSCCE，我认为这无关紧要。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:31:50.797

经过一段插曲后，我终于发现出了什么问题。显然，在 Windows 下，国际字符并没有真正很好地解析为 VLCJ。通过增加：

```
<jvmarg value="-Dvlcj.log=DEBUG> 
```

对于我的 ANT 运行脚本，我突然可以用 e-acute 播放文件。显然，JVM 的解码器在初始化时已完成。

希望这可以帮助某人:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T17:15:16.637

这在 vlcj 2.4.0 及更高版本中通过检测包含 Unicode 字符的本地文件名并将这些文件名转换为百分比编码的文件 URL 来透明地处理。

因此，使用当前版本的 vlcj，您应该能够简单地将包含国际字符的文件名直接传递给 mediaPlayer.playMedia(...)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T09:04:00.973

我在这里找到了解决方案：

[https://github.com/caprica/vlcj/issues/415](https://github.com/caprica/vlcj/issues/415)

这适用于我在 mac 和 windows (vlcj-3.7.0) 上：

```
 public void play(String mrlPathFile) {
    // URI encode for avoid non ascii character problem in windows!!!
    mrlPathFile = new File(mrlPathFile).toURI().toASCIIString().replace("file:/", "file:///");
    mediaPlayer.playMedia(mrlPathFile);
} 
```

我这可以帮助任何人:)

# django - 带有 Django 的 Heroku 上的 Memcached：无法安装 pylibmc / memcacheify

> ID：11507639
> 
> 赞同：15
> 
> 时间：2012-07-16T15:37:52.917
> 
> 标签：django, heroku, memcached, libmemcached

我在这方面花了很多时间，这显然超出了我的新手理解/技能范围。我尝试使用 pip install 安装[django-heroku-memcacheify](https://github.com/rdegges/django-heroku-memcacheify)，这会引发错误。我将问题追踪到[pylibmc](https://github.com/lericson/pylibmc)，这导致了所有问题。这是错误日志中有趣的部分之一：

**_pylibmcmodule.h:42:36：错误：libmemcached/memcached.h：没有这样的文件或目录**

**这是（几乎）完整的回溯：**

```
-----> Heroku receiving push
-----> Fetching custom buildpack... done
-----> Python app detected
-----> Preparing Python interpreter (2.7.2)
-----> Creating Virtualenv version 1.7.2
 !     CLEAN_VIRTUALENV set, rebuilding virtualenv.
       Running virtualenv with interpreter /usr/local/bin/python2.7
       New python executable in .heroku/venv/bin/python2.7
       Not overwriting existing python script .heroku/venv/bin/python (you must
use .heroku/venv/bin/python2.7)
       Installing         distribute..................................................................................................................................................................................................done.
   Installing pip................done.
-----> Activating virtualenv
-----> Installing dependencies using pip version 1.1
       Requirement already satisfied (use --upgrade to upgrade): Django==1.4 in
./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 2))
       Requirement already satisfied (use --upgrade to upgrade): gunicorn==0.14.3 in     ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line   3))
       Requirement already satisfied (use --upgrade to upgrade): PIL==1.1.7 in    ./.heroku/venv/lib/python2.7/site-packages/PIL (from -r requirements/common.txt (line 4))
       Requirement already satisfied (use --upgrade to upgrade): South==0.7.5 in    ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 5))
       Requirement already satisfied (use --upgrade to upgrade): boto==2.1.1 in
./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 6))
       Downloading/unpacking distribute==0.6.10 (from -r requirements/common.txt (line 7))
         Using download cache from /app/tmp/repo.git/.cache/pip_downloads/http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2Fd%2Fdistribute%2Fdistribute-0.6.10.tar.gz
         Running setup.py egg_info for package distribute

       Requirement already satisfied (use --upgrade to upgrade): python-dateutil==1.5 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 8))
       Requirement already satisfied (use --upgrade to upgrade): six==1.1.0 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 9))
       Requirement already satisfied (use --upgrade to upgrade): django-appconf==0.5 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 10))
       Requirement already satisfied (use --upgrade to upgrade): dj-database-url==0.2.0 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 11))
       Downloading/unpacking django-compressor==dev (from -r requirements/common.txt (line 12))
         Using download cache from /app/tmp/repo.git/.cache/pip_downloads/http%3A%2F%2Fgithub.com%2Fjezdez%2Fdjango_compressor%2Ftarball%2Fdevelop
         Cannot determine compression type for file /app/tmp/repo.git/.cache/pip_downloads/http%3A%2F%2Fgithub.com%2Fjezdez%2Fdjango_compressor%2Ftarball%2Fdevelop
         Running setup.py egg_info for package django-compressor

         Requested django-compressor==dev (from -r requirements/common.txt (line 12)), but installing version 1.2a2
       Requirement already satisfied (use --upgrade to upgrade): django-crispy-forms==1.1.2 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 13))
       Requirement already satisfied (use --upgrade to upgrade): django-extensions==0.9 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 14))
       Requirement already satisfied (use --upgrade to upgrade): django-facebook==4.0.9 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 15))
       Requirement already satisfied (use --upgrade to upgrade): django-floppyforms==1.0 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 16))
       Requirement already satisfied (use --upgrade to upgrade): django-guardian==1.0.4 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 17))
       Requirement already satisfied (use --upgrade to upgrade): django-image-cropping==0.5 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 18))
       Requirement already satisfied (use --upgrade to upgrade): django-ratings==0.3.6 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 19))
       Requirement already satisfied (use --upgrade to upgrade): django-smuggler==0.3 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 20))
       Requirement already satisfied (use --upgrade to upgrade): django-storages==1.1.4 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 21))
       Requirement already satisfied (use --upgrade to upgrade): django-subdomains==1.2.1 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 22))
       Requirement already satisfied (use --upgrade to upgrade): django-s3-folder-storage==0.1 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 23))
       Requirement already satisfied (use --upgrade to upgrade): django-userena==1.1.0 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 24))
       Requirement already satisfied (use --upgrade to upgrade): Whoosh==2.4.0 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 25))
       Requirement already satisfied (use --upgrade to upgrade): brabeion==0.1 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 26))
       Requirement already satisfied (use --upgrade to upgrade): versiontools==1.9.1 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 27))
       Obtaining django-haystack from git+https://github.com/toastdriven/django-haystack.git@25bd361d3c64cc22a1090a5053465939647d973d#egg=django_haystack-dev (from -r requirements/common.txt (line 28))
         Updating ./.heroku/src/django-haystack clone (to 25bd361d3c64cc22a1090a5053465939647d973d)
         Could not find a tag or branch '25bd361d3c64cc22a1090a5053465939647d973d', assuming commit.
         Running setup.py egg_info for package django-haystack

       Obtaining django-taggit from git+git://github.com/shacker/django-taggit.git@7987beaf357f8d3621c7fbce3b6753dd21962ee7#egg=django_taggit-dev (from -r requirements/common.txt (line 29))
         Updating ./.heroku/src/django-taggit clone (to 7987beaf357f8d3621c7fbce3b6753dd21962ee7)
         Could not find a tag or branch '7987beaf357f8d3621c7fbce3b6753dd21962ee7', assuming commit.
         Running setup.py egg_info for package django-taggit

       Obtaining django-generic-aggregation from git+git://github.com/coleifer/django-generic-aggregation.git@c76408c2c002dcab6bfc3148760ee58a19cbe05e#egg=django_generic_aggregation-dev (from -r requirements/common.txt (line 30))
         Updating ./.heroku/src/django-generic-aggregation clone (to c76408c2c002dcab6bfc3148760ee58a19cbe05e)
         Could not find a tag or branch 'c76408c2c002dcab6bfc3148760ee58a19cbe05e', assuming commit.
         Running setup.py egg_info for package django-generic-aggregation

       Requirement already satisfied (use --upgrade to upgrade): easy-thumbnails==1.0.3 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 31))
       Requirement already satisfied (use --upgrade to upgrade): docutils==0.9 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 32))
       Requirement already satisfied (use --upgrade to upgrade): httplib2==0.7.4 in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt
(line 33))
       Requirement already satisfied (use --upgrade to upgrade): reportlab==2.5
in ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/common.txt (line 34))
       Requirement already satisfied (use --upgrade to upgrade): wsgiref==0.1.2
in /usr/local/lib/python2.7 (from -r requirements/common.txt (line 35))
       Downloading/unpacking django-pylibmc-sasl==0.2.4 (from -r requirements/prod.txt (line 3))
         Downloading django-pylibmc-sasl-0.2.4.tar.gz
         Storing download in cache at /app/tmp/repo.git/.cache/pip_downloads/http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2Fd%2Fdjango-pylibmc-sasl%2Fdjango-pylibmc-sasl-0.2.4.tar.gz
         Running setup.py egg_info for package django-pylibmc-sasl

       Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.4.5 in     ./.heroku/venv/lib/python2.7/site-packages (from -r requirements/prod.txt (line 4))
       Downloading/unpacking pylibmc==1.2.3 (from -r requirements/prod.txt (line 5))
         Storing download in cache at /app/tmp/repo.git/.cache/pip_downloads/http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2Fp%2Fpylibmc%2Fpylibmc-1.2.3.tar.gz
         Running setup.py egg_info for package pylibmc

       Downloading/unpacking django-heroku-memcacheify==0.3 (from -r requirements/prod.txt (line 6))
         Downloading django-heroku-memcacheify-0.3.tar.gz
         Storing download in cache at /app/tmp/repo.git/.cache/pip_downloads/http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2Fd%2Fdjango-heroku-memcacheify%2Fdjango-heroku-memcacheify-0.3.tar.gz
         Running setup.py egg_info for package django-heroku-memcacheify

   Installing collected packages: distribute, django-compressor, django-haystack, django-taggit, django-generic-aggregation, django-pylibmc-sasl, pylibmc, django-heroku-memcacheify
     Found existing installation: distribute 0.6.27
       Uninstalling distribute:
         Successfully uninstalled distribute
     Running setup.py install for distribute
       Before install bootstrap.
       Scanning installed packages
       Setuptools installation detected at /tmp/build_vk3edwx3xe4q/.heroku/venv/lib/python2.7/site-packages
       Non-egg installation
       Removing elements out of the way...
       Already patched.
       /tmp/build_vk3edwx3xe4q/.heroku/venv/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info already patched.

       Installing easy_install script to /tmp/build_vk3edwx3xe4q/.heroku/venv/bin
       Installing easy_install-2.7 script to /tmp/build_vk3edwx3xe4q/.heroku/venv/bin
       After install bootstrap.
       /tmp/build_vk3edwx3xe4q/.heroku/venv/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info already exists
     Found existing installation: django-compressor 1.2a2
       Uninstalling django-compressor:
         Successfully uninstalled django-compressor
     Running setup.py install for django-compressor

     Running setup.py develop for django-haystack

       Creating /tmp/build_vk3edwx3xe4q/.heroku/venv/lib/python2.7/site-packages/django-haystack.egg-link (link to .)
       django-haystack 2.0.0-beta is already the active version in easy-install.pth

       Installed /tmp/build_vk3edwx3xe4q/.heroku/src/django-haystack
     Running setup.py develop for django-taggit

       Creating /tmp/build_vk3edwx3xe4q/.heroku/venv/lib/python2.7/site-packages/django-taggit.egg-link (link to .)
       django-taggit 0.9.4 is already the active version in easy-install.pth

       Installed /tmp/build_vk3edwx3xe4q/.heroku/src/django-taggit
     Running setup.py develop for django-generic-aggregation

       Creating /tmp/build_vk3edwx3xe4q/.heroku/venv/lib/python2.7/site-packages/django-generic-aggregation.egg-link (link to .)
       django-generic-aggregation 0.3.1 is already the active version in easy-install.pth

       Installed /tmp/build_vk3edwx3xe4q/.heroku/src/django-generic-aggregation
     Running setup.py install for django-pylibmc-sasl

     Running setup.py install for pylibmc
       building '_pylibmc' extension
       gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DUSE_ZLIB -I/usr/local/include/python2.7 -c _pylibmcmodule.c -o build/temp.linux-x86_64-2.7/_pylibmcmodule.o -fno-strict-aliasing
       In file included from _pylibmcmodule.c:34:
       _pylibmcmodule.h:42:36: error: libmemcached/memcached.h: No such file or directory
           _pylibmcmodule.c: In function â?~init_pylibmcâ?T:
           _pylibmcmodule.c:2140: error: â?~LIBMEMCACHED_VERSION_STRINGâ?T undeclared  (first use in this function)
           _pylibmcmodule.c:2140: warning: passing argument 3 of â?~PyModule_AddStringConstantâ?T from incompatible pointer type
       /usr/local/include/python2.7/modsupport.h:42: note: expected â?~const char *â?T but argument is of type â?~struct PylibMC_Behavior *â?T
       error: command 'gcc' failed with exit status 1
       Complete output from command /tmp/build_vk3edwx3xe4q/.heroku/venv/bin/python2.7 -c "import setuptools;__file__='/tmp/build_vk3edwx3xe4q/.heroku/venv/build/pylibmc/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-Y7MRuY-record/install-record.txt --install-headers /tmp/build_vk3edwx3xe4q/.heroku/venv/include/site/python2.7:
       running install

   running build

   running build_py

   creating build

   creating build/lib.linux-x86_64-2.7

   creating build/lib.linux-x86_64-2.7/pylibmc

   copying pylibmc/__main__.py -> build/lib.linux-x86_64-2.7/pylibmc

   copying pylibmc/pools.py -> build/lib.linux-x86_64-2.7/pylibmc

   copying pylibmc/__init__.py -> build/lib.linux-x86_64-2.7/pylibmc

   copying pylibmc/client.py -> build/lib.linux-x86_64-2.7/pylibmc

   copying pylibmc/consts.py -> build/lib.linux-x86_64-2.7/pylibmc

   copying pylibmc/test.py -> build/lib.linux-x86_64-2.7/pylibmc

   running build_ext

   building '_pylibmc' extension

   creating build/temp.linux-x86_64-2.7

   gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DUSE_ZLIB -I/usr/local/include/python2.7 -c _pylibmcmodule.c -o build/temp.linux-x86_64-2.7/_pylibmcmodule.o -fno-strict-aliasing

   In file included from _pylibmcmodule.c:34:

   _pylibmcmodule.h:42:36: error: libmemcached/memcached.h: No such file or
directory

   In file included from _pylibmcmodule.c:34:

   _pylibmcmodule.h:75: error: expected declaration specifiers or â?~...â?T before â?~*â?T token

...Lots of errors...

   _pylibmcmodule.c: In function â?~init_pylibmcâ?T:

   _pylibmcmodule.c:2140: error: â?~LIBMEMCACHED_VERSION_STRINGâ?T undeclared (first use in this function)

   _pylibmcmodule.c:2140: warning: passing argument 3 of â?~PyModule_AddStringConstantâ?T from incompatible pointer type

   /usr/local/include/python2.7/modsupport.h:42: note: expected â?~const char *â?T but argument is of type â?~struct PylibMC_Behavior *â?T

   error: command 'gcc' failed with exit status 1

   ----------------------------------------
   Command /tmp/build_vk3edwx3xe4q/.heroku/venv/bin/python2.7 -c "import setuptools;__file__='/tmp/build_vk3edwx3xe4q/.heroku/venv/build/pylibmc/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-Y7MRuY-record/install-record.txt --install-headers /tmp/build_vk3edwx3xe4q/.heroku/venv/include/site/python2.7 failed with error code 1 in /tmp/build_vk3edwx3xe4q/.heroku/venv/build/pylibmc
   Storing complete log in /app/.pip/pip.log
 !     Heroku push rejected, failed to compile Python app

To git@heroku.com:crowdcademy.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:crowdcademy.git' 
```

**所以这是交易**

我无法在我的本地环境 b/c 中对其进行测试，我正在 Windows 上运行。但是从我读过的内容来看，[libmemcached](http://libmemcached.org/libMemcached.html)已经[安装](https://github.com/rdegges/django-heroku-memcacheify/issues/1)在 heroku 上。而且似乎没有其他人对 pylibmc 有任何问题，因为我在谷歌上找不到任何东西。[在这篇文章](https://groups.google.com/forum/?fromgroups#!topic/django-developers/pISp20wuu0E)中，他们正在谈论：

> 如果他们检测到您正在加载 pylibmc，他们将为您引导 libmemcached

这可能是问题所在，要么没有提供，要么路径错误。任何帮助表示赞赏！如果这不起作用，我将不得不使用 Redis，这似乎要困难得多……不知道我是否足够先进。

**编辑** 可能无关紧要，但我使用的是带有 init 的设置文件夹而不是 settings.py 文件。我听说这会导致一些奇怪的行为，因为 heroku 并不总是记得这是可能的。

**编辑 2**

由于有数百人在 heroku 上运行 memcached 和 django 没有任何问题，我认为 heroku 用户不应该使用某种 hack 来安装 libmemcached。当 heroku 在您的需求文件中检测到 pylibmc 时，文档会谈论它，就好像它是为您引导的一样。这使我得出结论：**A）**我的设置或我使用的其中一个应用程序有问题，或者**B）** heroku 最近更改了某些内容并破坏了 libmemcached for django 的自动引导。我尝试使用 heroku config:add CLEAN_VIRTUALENV=true 进行全新安装，但这[现在也不起作用](https://stackoverflow.com/questions/8937905/how-to-pip-uninstall-with-virtualenv-on-heroku-cedar-stack/11055852#comment14662980_11055852)。我希望它是**A**并且有人遇到了同样的问题。如果是**B**我不知道如何解决它。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-20T21:25:10.590

我已经与 Heroku 的友好人士交谈过，似乎我的 requirements.txt 设置造成了所有破坏。不要在根目录中使用从另一个需求文件导入的需求文件！至少对于 pylibmc 不起作用，因为如果根需求文件中没有明确的 pylibmc 行，libmemcached 不会被引导。我希望这将帮助其他人避免浪费我在这个问题上花费的 10 个小时。耶！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-17T07:43:05.097

你需要`libmemcached`安装。

您不需要开发标头或任何东西，常规的就足够了！

如果不能安装libmemcached，就不能安装pylibmc。对此感到抱歉，但没有什么可做的。

有一种方法可以解决这个问题，但这是一个废话，所以如果你想了解详细信息，请给我发消息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T20:35:00.060

您是否尝试过 libmemcached-dev、memcached-dev 之类的东西？您需要 libmemcached 的来源！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-06T01:44:26.707

试试这个：

```
sudo apt-get install libmemcached-dev 
```

# android - 如何每分钟运行一次 AsyncTask？

> ID：11507641
> 
> 赞同：-1
> 
> 时间：2012-07-16T15:38:08.823
> 
> 标签：android, sqlite, google-maps-api-3

我试图通过使用处理程序每​​ 1 分钟运行一次 AsyncTask，但它不起作用:( 在 AsyncTask 中，我正在从 Sqlite DB 读取数据并在 mapview 中绘制结果，这样做的目的是每 1 次更新我的 Sqlite 的另一项服务min 通过从服务器获取真实数据，我也希望保持 mapview 更新。有没有任何可能的方法可以每分钟调用 AsyncTask 而不是使用 Handler？

```
public Runnable getData; 
        private final Handler _handler = new Handler();
        private static int DATA_INTERVAL = 60 * 1000;
  getData = new Runnable()
            {
                public void run()
                {
                    getDataFrame();
                }

                private void getDataFrame() {
                    // TODO Auto-generated method stub
                     _handler.postDelayed(MapViewActivity.this.getData, DATA_INTERVAL);
                     new DrawFromDataTask();

                }
            };

DrawFromDataTask is described below:
private class DrawFromDataTask extends AsyncTask<Void, Integer, FriendItemizedOverlay> {

            @Override
            protected FriendItemizedOverlay doInBackground(Void... params) {
                // TODO Auto-generated method stub
                mDbAdapter.open();
                List<Refresher> nearFriends = mDbAdapter.getAllRecords();

                for(Refresher friend : nearFriends)
                {
                    double lat = Double.parseDouble(friend.Latitude);
                    double lon = Double.parseDouble(friend.Longitude);
                    OverlayItem item = new OverlayItem(new GeoPoint((int)(lat * 1000000),
                                                                    (int)(lon* 1000000)),
                                                                    "" + friend.name,
                                                                    "" + friend.type);

                    mFriendOverlay.addOverlay(item);
                }

                return mFriendOverlay;
            }

             protected void onProgressUpdate(Integer... progress) {
                 setProgress(progress[0]);
             }

             protected void onPostExecute(FriendItemizedOverlay result) {
                 System.out.println("in AsyncTask execution!");
                 Location loc = get_location();
                    final double mLatitude = loc.getLatitude();
                    final double mLongitude = loc.getLongitude();

                    // get the last location from the database
                    GeoPoint lastLocation = new GeoPoint(
                                     (int) (mLatitude * 1E6),
                                     (int) (mLongitude * 1E6));
                    Drawable marker = getResources().getDrawable(R.drawable.arrow);     
                    int amountOFplayers = result.size()-1;
                    for (int j=0; j<amountOFplayers; j++) {

                        result.getItem(amountOFplayers).setMarker(marker);  

                    }
                    //System.out.println("Number of overlays -- "+amountOFplayers);

                    mMapView.postInvalidate();
                    //mMapView.invalidate();
                    // animate to last location
                    mMapController.animateTo(lastLocation);
                    // zoom to the required level
                    mMapController.setZoom(ZOOM_LEVEL);

             }

         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:23:28.487

使用按分钟运行的广播意图，然后执行异步任务。它更准确。

[http://developer.android.com/reference/android/content/Intent.html#ACTION_TIME_TICK](http://developer.android.com/reference/android/content/Intent.html#ACTION_TIME_TICK)

确保`new`每次都创建实例，因为除非创建新实例，否则无法重用/重新启动线程对象。

[http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:55:29.217

只需使用`Timer`,`TimerTask`并以固定速率运行`scheduleAtFixedRate()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T18:18:38.960

与其使用服务每分钟轮询一次服务器，不如使用适用于 android 的 Google Cloud Messaging（以前称为 C2DM）。这样，您可以向您的应用发送一些通知，表明服务器上的数据已更改，然后如果需要，引导您更改数据库中的一些数据，然后启动线程。但是，是的，我真的对您的实际要求一无所知

# ios - iOS：是否可以获得特定的时区名称？

> ID：11507643
> 
> 赞同：0
> 
> 时间：2012-07-16T15:38:19.713
> 
> 标签：ios, timezone

我是我的应用程序，我正在阅读时区

[[NSTimeZone] 本地化名称]

它适用于大多数情况。但是，显示的 iOS 不一定是从设置中读取的 iOS。例如，如果我们将时区设置为“美国凤凰城”，当我们阅读时，它是“山地标准时间”。

问题是：有没有办法获取显示时区名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:16:49.790

有一个 [NSTimeZone isDaylightSavingTime] 可以用来区分 2 个时区。

# objective-c - 重用 UIAlertView 的内存管理

> ID：11507646
> 
> 赞同：2
> 
> 时间：2012-07-16T15:38:24.533
> 
> 标签：objective-c, ios, memory-management, uialertview

假设我有多个使用相同 UIAlertView *alertView 的视图控制器类。*alertView 的委托设置为集中委托。

我这样做是因为想使用 .tag 基于它做不同的事情。

问题是每次我调用警报视图或关闭它时，我必须做些什么来防止内存泄漏？

我不应该每次都释放吗？或者这是一个非常糟糕的主意？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:48:21.563

UIAlertView 可以从您应用程序的任何位置“显示”。我有一个应用程序，它的主 UIViewController 有一个计时器，每隔一段时间就会显示一个 UIAlertView。当该计时器关闭时，即使显示的主视图来自完全不同的 UIViewController（因此视图），警报也会出现在前面。

如果您真的想“主动”从您的任何 UIViewControllers 中调出 UIAlertView（可以说是基于用户操作），那么我会做两件事之一。

1）使用在那里实现的 UIAlertView 设置我的应用程序委托对象，并使用用于调用（显示）警报视图的访问器方法，从而也从那里释放它，或者

2) 生成一个类似单例的对象，在那里实现了 AlertView ！！！

在任何一种情况下，您都可以在为这些位置中的任何一个编写的 dealloc 例程中简单地解除 UIAlertView 一次，并在初始化对象时仅分配一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:47:27.493

就像对待任何其他对象一样对待它。如果您想保留它，请将其分配给保留属性，例如：self.myAlert。您仍然需要像通常在创建它时那样释放它。保留的财产将为您保管。

始终保持您的保留（分配、副本等）和发布平衡。

# .net - 在对象浏览器中找到命名空间，但在参考库中缺失

> ID：11507651
> 
> 赞同：2
> 
> 时间：2012-07-16T15:38:29.557
> 
> 标签：.net, vb.net, reference

我正在导入一个旧项目，并且在构建时遇到了一堆错误。大多数错误都是相似的，说“命名空间等中不存在类型或命名空间”

我遇到了一个关于缺少命名空间“System.Windows.Forms.Design.Behavior”的特定错误。我可以在对象浏览器中看到这个命名空间：

![对象浏览器](../Images/961c1036ddf304a7e52fa47497dd6ce5.png)

但不在“添加参考”窗口中：

![在此处输入图像描述](../Images/9f6ef15d3b890536b68bd9f7e0c58580.png)

我在此文件夹下也找不到任何具有该名称的文件。

```
G:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\ 
```

此命名空间存在于[msdn](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.FORMS.DESIGN.BEHAVIOR%29;k%28BEHAVIOR%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)中。

如何在我的代码中使用这个命名空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:42:51.493

您找不到完全具有该名称的文件，因为名称空间不必与包含它的程序集具有相同的名称。你提到的那个可能定义在`System.Design.dll`

# iphone - 系统是否使用 NSOperationQueue mainQueue 进行自己的调用？

> ID：11507658
> 
> 赞同：3
> 
> 时间：2012-07-16T15:38:58.500
> 
> 标签：iphone, ios, nsoperation

我想添加很多`NSBlockOperations`，`mainQueue`并可能调用`[mainQueue cancelAllOperations];`我的问题是，类方法`mainQueue`是否只有我可以添加到它的操作，或者系统是否添加了它自己的任何操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:00:34.197

好吧，文档并没有说任何一种方式，如果 Apple 的任何人可以绝对地告诉您，我会感到非常惊讶。我猜它没有，但有一个关于如何自己确定的建议。

在当前应用中，发送“- (void)setSuspended:YES;” 到 mainQueue，然后在 dispatch_main_queue 中添加一个 dispatch_after 块，并记录 mainQueue 的 operationCount。事实上，您可以在启动时在 appDelegate 中暂停它，并提供一个打印计数的按钮，这样您就可以真正锻炼您的应用程序。如果有任何 UIKit 框架使用它，我会感到非常惊讶。

我只是尝试了一个我的 iOS 应用程序，但从未找到任何应​​用程序：

```
// in one place
[((NSOperationQueue *)[NSOperationQueue mainQueue]) setSuspended:YES];
// Eons later
NSLog(@"[NSOperationQueue mainQueue] %d", ((NSOperationQueue *)[NSOperationQueue mainQueue]).operationCount); 
```

值为0；

# windows-installer - 多目录安装

> ID：11507661
> 
> 赞同：2
> 
> 时间：2012-07-16T15:39:05.040
> 
> 标签：windows-installer, installshield, custom-action, installscript, installscript-msi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:57:14.517

只需这样做：

在安装程序中创建两个目录：

INSTALLDIR = [ProgramFilesFolder]公司\产品 LOGDIR = [INSTALLDIR]日志

然后查看目标文件夹对话框。克隆为 INSTALLDIR 制作各种图标、文本和浏览按钮的所有控件。

将显示文本从 [INSTALLDIR] 更改为 [LOGDIR]。接下来复制 Browse 按钮​​上的控件事件并将 [_BrowseProperty] 值更改为 LOGDIR 而不是 INSTALLDIR。

就是这样。LOGDIR 将从 INSTALLDIR 的一个子节点开始，但如果用户按下 Browse 并更改它，那么这种关系就会中断。然后您可以更改 INSTALLDIR，它不会更改 LOGDIR。

# c# - 查询多个实体的天蓝色表

> ID：11507662
> 
> 赞同：4
> 
> 时间：2012-07-16T15:39:06.770
> 
> 标签：c#, .net, azure, azure-storage, azure-table-storage

我正在写天蓝色的应用程序。我的问题涉及查询特定实体的天蓝色表。

应用程序存储用户使用的单词的统计信息。在表中，partitionkey 是语言，row key 是单词。

我需要查询多个单词。为了加快这个过程，我想在一个查询中提取所有相关实体。

我知道如何“批量插入”具有相同分区键的实体组。如何查询具有相同分区键但行键不同的 50 个不同实体。

是否有可能将查询指定为字符串？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:44:40.797

您可以在 中指定最多 15 个匹配`$filter`项，因此如果您沿着这条路线走，那么基本上是 15 个特定的行键。注意：这将导致分区扫描。查询的细节在[这篇文章中](http://msdn.microsoft.com/en-us/library/windowsazure/dd894031)。

[此 StackOverflow 问题](https://stackoverflow.com/q/10694904/272109)和相关答案中有更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T20:07:33.580

但是一个查询不一定会加快速度。发出 5 个查询，每个查询 10 个单词（可能并行）并合并结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T23:23:52.603

这不是您提出的问题，但您可能会发现，如果您颠倒 RowKey 和 PartitionKey，您将从该特定查询中获得更好的性能。我猜一种语言中可能有很多单词，所以这意味着您将拥有相当大的分区。如果您尝试按照其他人的建议并行化您的查询（这是一个好主意），所有这些查询都将使用您当前的密钥计划访问同一个分区。

如果您确实反转了键，但这意味着获取特定语言的单词列表将非常低效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T16:28:33.723

我不知道有什么简单的方法可以做到这一点，但是您可以使用一些动态 LINQ 查询库。

你可能想看看这个问题：
[Parsing a string C# LINQ expression](https://stackoverflow.com/questions/3782538/parsing-a-string-c-sharp-linq-expression)

还有这些库：
[使用自定义属性动态生成 LINQ 查询](http://www.codeproject.com/Tips/352004/Dynamically-generate-a-LINQ-query-with-a-custom-pr)
[发明您自己的动态 LINQ 解析器](http://www.codeproject.com/Tips/355513/Invent-your-own-Dynamic-LINQ-parser)

本教程：
[动态 LINQ（第 1 部分：使用 LINQ 动态查询库）](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

# android - 使字体在更大的屏幕上变大

> ID：11507669
> 
> 赞同：5
> 
> 时间：2012-07-16T15:39:15.897
> 
> 标签：android, android-layout

我已经搜索了 Stackoverflow 和 google，我找到的答案是那些希望字体保持相同大小但我希望它们在屏幕变大时变大的人的答案。

具体来说，我想在我的应用程序中使用非常大的字体。在我的手机上，它们有 1/2 英寸高——完美。我的问题是，在我的 7 英寸平板电脑上，它们也是 1/2 英寸高，我希望它们按比例放大并达到 1 英寸高。我尝试过 sp 和 dp 模式，两者都只是保持字体相同的物理高度，这不是我想要的。我看到 3.2 及更高版本的平板电脑有一些新东西，但我想支持 2.3 及更高版本的设备。我见过复杂的代码，它说它会自动缩放字体以适应文本的宽度，但这不是我需要的。我希望字体相当于手机上的 100sp 和平板电脑上的 200sp。我没有图形和简单的相对布局，屏幕上的元素很少。我只需要为大屏幕制作几个更大的文本大小。我认为这很简单，但我可以

这是一个典型的文本视图条目

```
 <TextView
    android:id="@+id/textDistance"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/labelDistance"
    android:layout_centerHorizontal="true"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ffffff"
    android:textSize="100sp" /> 
```

有没有一种相对简单直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T15:53:00.627

'dp' 或 'dip' 尺寸 - 专为在不同屏幕上相同而设计。因此，您的任务没有任何特殊维度。

为了实现不同的文本大小，您必须创建几种样式，并将它们放在文件夹`values-xlarge`、`values-large`和.`values-normal``values-small`

一种样式如下所示：

```
<style name="BigTextStyle">
    <item name="android:textSize">50dp</item> <!-- different values in different folders  -->
</style> 
```

在您的文本视图中，只需提供样式参考：

```
<TextView 
    style="@style/BigTextStyle"
    ...
/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T20:29:07.113

我采用了这里的方法：http: [//developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)并在dimens.xls文件中添加了一行：

```
<resources>

<dimen name="padding_small">8dp</dimen>
<dimen name="padding_medium">16dp</dimen>
<dimen name="padding_large">16dp</dimen>
<dimen name="font_size">200sp</dimen> 
```

以上是views-large中的文件。在视图文件中，我有 100sp 而不是 200sp。

现在我的平板电脑上的字体很大。根据文档，这可能是一些新手机（5 英寸手机）的问题，这就是为什么在较新版本的 Android 中有一些方法可以解决这个问题，但因为我希望这适用于旧手机和7英寸的平板电脑，这将解决我的问题。上面的解决方案导致我这样做，我相信它也可以工作，我只是选择了这个，因为它看起来更简单并且谷歌有很好的记录。

在我的布局文件中，我只是将字体大小的特定标注更改为：

```
 <TextView
    android:id="@+id/textDistance"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/labelDistance"
    android:layout_centerHorizontal="true"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ffffff"
    android:textSize="@dimen/font_size" /> 
```

# actionscript-3 - Box2D Flash - 完美的角色碰撞？(AS3)

> ID：11507673
> 
> 赞同：2
> 
> 时间：2012-07-16T15:39:43.213
> 
> 标签：actionscript-3, flash, box2d

我想知道是否有可能使用 Box2D (Flash) 获得几乎完美的角色碰撞？我知道 Actionscript 3 的基础知识，但对 Box2D 知之甚少。我可以使用 Actionscript 3 创建角色碰撞以阻止角色通过平台等运行，但由于角色不是简单的形状，因此非常有问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:43:07.543

一句话，是的。[**请参阅Box2DFlash 主页**](http://box2dflash.sourceforge.net/)上的交互式布娃娃示例。您可以从同一页面下载示例的源代码，以了解它们是如何工作的。

# c++ - __memcpy_ssse3() 分段错误

> ID：11507675
> 
> 赞同：4
> 
> 时间：2012-07-16T15:39:48.317
> 
> 标签：c++, opencv, segmentation-fault

我正在使用 Opencv，试图复制从网络摄像头捕获的一些帧。复制帧时，我在`__memcpy_ssse3()`第 160 行或第 1675 行出现分段错误。

gdb 显示：

> 0 __memmove_ssse3 () 在 ../sysdeps/i386/i686/multiarch/memcpy-ssse3.S:1675
> 
> 1 0xb75ec6d0 in cv::Mat::copyTo (this=0xbfca3450, _dst=...) at /home/david/opencv/OpenCV-2.4.2/modules/core/src/copy.cpp:181
> 
> 2 0xb75984f6 in cv::Mat::Mat (this=0xbfca358c, img=0xb1300c90, copyData=true) at /home/david/opencv/OpenCV-2.4.2/modules/core/src/matrix.cpp:510

调用它的函数是`cv::MAt::Mat(IplImg *I, bool copy)`.

当我打开 USB 摄像头或文件时，一切都很完美，但是当我尝试通过 IP 从网络摄像头读取视频流时，它会在一分钟后崩溃。

我尝试在没有 ssse3 支持的情况下构建 ffmpeg 和 opencv，并且我的应用程序`-mno-seee3`也使用标志编译。

Opencv vesion 是 2.4.2，但问题也存在于 2.3.1。ffmpeg 版本是 11.1，在 8.X 中同样的问题。gcc 版本是 4.6.3，Ubuntu 的分支。处理器是 Intel core2。

有什么提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T18:37:35.920

SSE 操作中的分段错误是由于内存未对齐造成的。尝试通过`-mpreferred-stack-boundary=4 -mstackrealign`，看看是否可以清除它。如果是这样，那么您需要检查您的堆栈以找出哪些代码未对齐它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T15:22:19.423

谢谢大家，解决了。线程之间的锁定出现错误，并且不知何故，内存在其他线程中被覆盖或释放。修复锁依赖后，段错误的问题解决了。

# network-programming - 设置通过网络传输的数据包的优先级

> ID：11507677
> 
> 赞同：1
> 
> 时间：2012-07-16T15:39:51.280
> 
> 标签：network-programming

我正在开展一个项目，其中我正在实施 MAC 协议。我的第一个任务是实现基于优先级的数据包调度。更具体地说，我想安排数据包的传输，以便为某些比其他数据包更重要的数据包类型分配比其余数据包更高的优先级。

从现在开始，我一直在尝试建立这一点，并使用了各种方法来实现这一点。

IP 标头中的某些位被分配用于设置正在传输的数据包的优先级。我已经使用套接字编程来实现相同的目标。我也尝试过使用原始套接字，但它导致了一些问题并且没有按照我想要的方式工作。

所以我转回正常的 SOCK_DGRAM 和 SOCK_STREAM。但我仍然面临一些问题。

任何人都可以帮我解决这个问题吗？

# cognos - 无论提示选择如何，都列出值

> ID：11507679
> 
> 赞同：1
> 
> 时间：2012-07-16T15:39:56.547
> 
> 标签：cognos

我目前有一份 3 页的 cognos 报告：

*   每月总结
*   每月详细
*   全年趋势

月份由值提示确定。我的问题是：如何才能使第三个报告页面忽略 Month 参数值并显示所有 12 个月，而不管值提示如何？因此，例如，如果选择 6 月，前两个报告将仅显示 6 月，但全年趋势将显示 1 月至 12 月。

目前，提示适用于其他两个报告，但我无法弄清楚如何让第三页每次都显示相同的数据。

谢谢，

迷失实习生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:51:23.063

它会在年末/年初变得棘手，但无论如何......从提示中提取 Year 的值并将其用作第三页查询的过滤器。

# css - Webkit：不使用 3D CSS 属性的 2D 变换的 CSS 强制硬件加速

> ID：11507683
> 
> 赞同：6
> 
> 时间：2012-07-16T15:40:17.387
> 
> 标签：css, 3d, hardware-acceleration, css-transforms

无论如何在不使用 3D 的情况下使用 webkit 中的 CSS 强制对 2D 变换进行硬件加速（例如`translateZ(0)`）（根据[移动 Safari 中的 2D 变换硬件加速吗？](https://stackoverflow.com/questions/9824824/are-2d-transforms-hardware-accelerated-in-mobile-safari)）。

我发现元素的问题`position: fixed`，其中元素设置为等效于`position: absolute`，因此没有相对于视口定位，而是最终相对于父容器定位（如本文所述[http://meyerweb.com /eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/](http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/)）。

我选择硬件加速，因为在 iOS 中，背景往往会在过渡时闪烁白色，与此错误概述[https://github.com/jquery/jquery-mobile/issues/2856](https://github.com/jquery/jquery-mobile/issues/2856)的方式类似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:50:26.817

除了 2d 变换值之外，您还可以将 3d 变换值添加到 null ：

```
el {
    transform: 2DValue(val) 3DValueSetToNull(0);
    transform: 2DValue(val);
} 
```

在真正的 CSS 中可以做出类似的东西：

```
div {
    /* translateZ(0) will not interfere with the rotate value */
    /* Also with -webkit-, -moz-, -o- */
    transform: rotate(90deg) translateZ(0);
    /* Compatibility for older (yep) browsers */
    /* Also with -webkit-, -moz-, -ms-, -o- */
    transform: rotate(90deg);
} 
```

请务必使用不会干扰您的 2D 变换值的 3D 变换值。

PS：3d 变换值是：

*   translate3d(x, y, z)
*   平移Z(z)
*   scale3d(sx, sy, sz)
*   尺度Z(sz)
*   旋转X（角度）
*   旋转Y（角度）
*   旋转3d（x，y，z，角度），
*   透视(p)
*   矩阵3d(…)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T13:58:50.687

看起来设置`backface-visibility: hidden`可以解决问题。我已使用[fps-counter](http://www.thechromesource.com/how-to-activate-the-frames-per-second-counter-in-google-chrome/)仅针对 chrome 确认了这一点。

```
.3d-accelerate {  
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
} 
```

FPS 计数器不只显示`transition`. 添加时会显示`translate: transform3d(0, 0, 0)`。我也出现了`backface-visibility`。

# regex - CakePHP 正则表达式问题

> ID：11507685
> 
> 赞同：0
> 
> 时间：2012-07-16T15:40:18.667
> 
> 标签：regex, cakephp

我对 CakePHP 中的路由有一个简单的正则表达式要求，这给我带来了麻烦。

路由代码：

```
Router::connect('/tees/:id', array('controller' => 'tees', 'action' => 'view'), array('id' => "^.*[0-9].*[-][a-z].*$"));

regex: "^.*[0-9].*[-][a-z].*$" 
```

匹配案例：340764-test-tee 失败案例：test 失败案例：anysingleword

关于我做错了什么的任何想法？

谢谢！

编辑：

我最终使用的解决方案如下：

```
".*[0-9].*[a-z-].*" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:55:30.707

根据正则表达式语法，您要求每个匹配项都包含一个“-”字符（正则表达式中的 [-]），因此任何没有“-”的单词都不会匹配。
如果您打算这样做，那么 [-] 不是通常的方式，请使用 \- 如果您不打算始终匹配“-”，也许您想将其添加到 [az]，那么正确的语法是：

```
^.*[0-9].*[a-z-].*$ 
```

但请注意 [az-] 将仅匹配 1 个字符，您可能的意思是

```
^.*[0-9].*[a-z-]*$ 
```

或者

```
^.*[0-9]*[a-z-]*$ 
```

# jenkins - 如何管理需要针对多个分支运行的詹金斯作业？

> ID：11507686
> 
> 赞同：3
> 
> 时间：2012-07-16T15:40:18.463
> 
> 标签：jenkins, jenkins-plugins

假设您有 5 个在不同条件下执行（触发）的不同 jenkins 作业，但现在您想将使用范围扩展到其他分支。

只是复制作业会造成真正的维护混乱，因为分支的数量很大并且处于永久更改状态，但您仍然希望能够编辑作业模板。

作业之间唯一不同的是针对您运行它们的源代码控制分支。

因此，将它们作为不同的作业运行确实有意义，但您仍然希望能够在一个地方重新配置作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:58:48.400

对于不需要由 SCM 更改触发的构建，最简单的方法是使用带有*BRANCH*轴的多配置（矩阵）构建，该轴在您的分支名称上运行。

对于由 SCM 更改触发的构建，请添加*BRANCH*参数并编写一个提交后挂钩，该挂钩将触发带有适当实例化*BRANCH的构建。*或者，编写简短的触发作业 - 每个分支一个 - 这将轮询 SCM 并使用适当的*BRANCH*参数调用您的主要作业。除了将分支名称设置为默认值的*BRANCH*参数之外，触发器作业应该相同。

最大的缺点是您**无法立即区分失败的分支和没有失败的分支**，但这是一个很小的代价。

很可能迟早您需要区分分支。如果差异相对较小，您可以使用[Run Condition Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Run+Condition+Plugin)。

# actionscript-3 - Flash as3 的增强现实

> ID：11507688
> 
> 赞同：0
> 
> 时间：2012-07-16T15:40:28.433
> 
> 标签：actionscript-3, flash, augmented-reality

我是 as3 的新手增强现实。我已经在 as3 工作了大约 2 年，但我从来没有工作过增强现实。我想做这样的 swf：

[http://cdn.eyewonder.com/100125/adWdrDemos/56254654/Game.swf](http://cdn.eyewonder.com/100125/adWdrDemos/56254654/Game.swf)

我将用于增强现实的最佳课程或教程是什么？我真的需要尽快学习增强现实。

谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T22:00:24.013

我看不到您的 SWF 示例中的增强现实在哪里。但也许 FLAR Toolkit 会对您有所帮助。它是 ARToolkit 的 AS3 版本。它适用于许多 Flash 3D 引擎，如 Papervision、Away3D 或 Sandy。您将在 Google 上看到一些示例。

在这里找到官方项目页面：[http ://www.libspark.org/wiki/saqoosha/FLARToolKit/en](http://www.libspark.org/wiki/saqoosha/FLARToolKit/en)

还有一个很好的教程：http: [//www.marcpelland.com/2009/03/26/getting-started-with-augmented-reality-flartoolkit/](http://www.marcpelland.com/2009/03/26/getting-started-with-augmented-reality-flartoolkit/)

祝你好运 ！

# javascript - 在 Javascrtip 中使用 timeOffset 验证 DateTime 字符串

> ID：11507695
> 
> 赞同：0
> 
> 时间：2012-07-16T15:40:48.127
> 
> 标签：javascript, regex, date

我想通过使用这个小功能来测试 ISO 时间戳是否有效：

```
function isValidDateTime = function (datetime) {
    return !isNaN(new Date(datetime).getTime());
} 
```

*像2012-12-31T12:00:00*的魅力一样工作。

但是，某些字符串具有这样的偏移量，这不适用于 Javascript: *2012-12-31T12:00:00+01*中的 Date() 。

因此我调整了我的功能：

```
function isValidDateTime(datetime) {
    // Javascript's date does not like offsets ...
    datetime = datetime.replace('/\+[0-2]{1}[0-9]{1}/', '');
    return !isNaN(new Date(datetime).getTime());
} 
```

正则表达式是正确的（http://regexpal.com/?flags=g®ex=%5C%2B%5B0-2%5D%7B1%7D%5B0-9%5D%7B1%7D&input=2012-12-31T12%3A00 %3A00%2B01) 并且我已经在 PHP 中尝试使用 preg_replace - 有效。

为什么不在 JS 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:47:26.830

删除`'`：

```
datetime = datetime.replace(/\+[0-2]{1}[0-9]{1}/, ''); 
```

# c# - 当失败的原因不重要时，捕获 System.Exception 是一种好的形式吗？

> ID：11507696
> 
> 赞同：4
> 
> 时间：2012-07-16T15:40:48.317
> 
> 标签：c#, .net, exception-handling

我有一个复杂的程序，它遍历一堆输入文件进行大量解析和计算，然后输出其他几个文件。

```
void ParseFiles(string[] files, ProcessingDescription description) {
  foreach(string file in files) {
    try {
      DoComplicatedProcessing(file, description);
    }
    catch(Exception e) {
      LogFailure(file, e);
    }
  }
  DisplayResult();
} 
```

我在这种情况下捕获的原因`System.Exception`是，这可能由于多种原因而失败，解析/计算中的错误，输入文件中的非法值，权限问题甚至内存不足错误，如果我假设所有必要的数据都适合记忆中的结果是错误的。

但最后我不在乎它为什么失败。如果程序针对特定文件失败，我希望它记录该失败并继续下一个文件。

在会话结束时，用户可能会回来查看哪些文件失败以及抛出了哪些错误消息，当然在许多情况下错误消息可能对用户没有帮助，但它比程序在第一个坏文件上崩溃要好。

我一直听到“永远不会捕获 System.Exception”，但我真的看不出有任何其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:45:20.813

您应该只捕获那些您可以处理的异常。在这种情况下，您可以处理任何异常，因此这段代码没有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:44:41.180

就个人而言，我认为这没有什么问题。您已经清楚地考虑了问题并有合适的解决方案。每当有人在软件开发中说“从不……”时，通常情况正好相反。我想这就是为什么其他人会说“最好……”和“通常……”之类的话。:)

如果您知道通过捕获`Exception`您将松散异常的粒度并且您可能会遇到奇怪的边缘情况（内存等），那么您是否承担风险取决于您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T15:46:33.353

在我看来，这是一个非常合理的案例，捕获 Exception 是有意义的，因为它完成了**您**在问题空间中需要的**东西。**我对诸如“永远不要这样做，总是那样做......”这样的通用规则非常谨慎，这些规则中的一点灵活性和常识肯定会对我有所帮助。我认为你的代码很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T15:52:04.700

一般来说，我不喜欢抛出异常（除非应用程序处理被迫停止），因为它们会导致性能开销。[这篇](http://msdn.microsoft.com/en-us/library/ms229009.aspx)MSDN 文章给出了很好的概述。

根据您的处理复杂程度以及您只想记录故障，我会评估尽可能添加更多“健全性检查”。像这样的东西：

```
void ParseFiles(string[] files, ProcessingDescription description) {
  foreach(string file in files) {
    if(!file.IsValid()) { //uses an extension method
      LogFailure(file, "Your Message"); //use the appropriate API
      continue;
    }

    try {    
      DoComplicatedProcessing(file, description);
    }
    catch(Exception e) {
      LogFailure(file, e);
    }
  }
  DisplayResult();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T15:52:04.770

对于您的应用程序来说，满足解决您要解决的问题的要求是一种很好的形式，如果按照您的方式进行操作是方便且功能正确的，那么就这样做。

绝对忽略上下文，并且没有最佳实践之类的东西——只有“这段时间适合我们上下文的最佳实践”。

# java - 我的 ConcurrentHashmap 的值类型是 List，如何使附加到该列表线程安全？

> ID：11507698
> 
> 赞同：0
> 
> 时间：2012-07-16T15:40:50.493
> 
> 标签：java, scala, concurrency, thread-safety

我的课程从 ConcurrentHashmap[String,immutable.List[String]] 扩展

它有两种方法：

```
 def addEntry(key: String, newList: immutable.List[String]) = {
    ...
    //if key exist,appending the newList to the exist one 
    //otherwise set the newList as the value
  }

  def resetEntry(key: String): Unit = {
    this.remove(key)
  } 
```

为了使 addEntry 方法线程安全，我尝试了：

```
this.get(key).synchronized{
  //append or set here
} 
```

但是如果 key 不存在会引发空指针异常，并且在同步之前使用 putIfAbsent(key, new immutable.List()) 将不起作用，因为在 putIfAbsent 和之前进入同步块之后，key 可能会被 resetEntry 删除。

使 addEntry 和 resetEntry 都同步方法可以工作，但锁太大

那么，我能做些什么呢？

ps.这篇文章与[如何在 ConcurrentHashMap 线程安全中更新 BigDecimal](https://stackoverflow.com/questions/8567596/how-to-make-updating-bigdecimal-within-concurrenthashmap-thread-safe)类似，同时请帮助我弄清楚如何编写除一般指南之外的代码

--update-- checkout [https://stackoverflow.com/a/34309186/404145](https://stackoverflow.com/a/34309186/404145)，在将近 3 年后解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:11:06.760

除了删除条目，您可以简单地清除它吗？您仍然可以使用同步列表并确保原子性。

```
 def resetEntry(key: String, currentBatchSize: Int): Unit = {
    this.get(key).clear();
  } 
```

这适用于每个键都有一个条目的假设。例如，如果`this.get(key)==null`您想插入一个新的`sychronizedList`也应该作为清除的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T10:12:34.530

3年多后，我想现在我可以回答我的问题了。

原来的问题是：

我得到一个`ConcurrentHashMap[String, List]`，许多线程正在向它附加值，我怎样才能使它成为线程安全的？

使`addEntry()`同步将起作用，对吗？

```
synchronize(map.get(key)){
  map.append(key, value)
} 
```

在大多数情况下是的，除非`map.get(key)`为 null，这将导致 NullPointerException。

那么`map.putIfAbsent(key, new List)`像这样添加呢：

```
map.putIfAbsent(key, new List)
synchronize(map.get(key)){
  map.append(key, value)
} 
```

现在好多了，但是如果在`putIfAbsent()`另一个线程调用之后`resetEntry()`，我们将再次看到 NullPointerException。

使 addEntry 和 resetEntry 两个同步方法都可以工作，但是锁太大了。

那么追加时的MapEntry Level Lock和重置时的Map Level Lock呢？

ReentrantReadWriteLock 来了：在调用时`addEntry()`，我们获取映射的共享锁，这使得追加尽可能并发，在调用时`resetEntry()`，我们获取排他锁，以确保没有其他线程同时更改映射。

代码如下所示：

```
class MyMap extends ConcurrentHashMap{
  val lock = new ReentrantReadWriteLock();  

  def addEntry(key: String, newList: immutable.List[String]) = {
    lock.readLock.lock()

    //if key exist,appending the newList to the exist one 
    //otherwise set the newList as the value
    this.putIfAbsent(key, new List())
    this(key).synchronized{
        this(key) += newList
    }

    lock.readLock.unlock()
  }

  def resetEntry(key: String, currentBatchSize: Int): Unit = {
    lock.writeLock.lock()

    this.remove(key)

    lock.writeLock.unlock()
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T17:13:56.673

您可以尝试受 CAS（比较和交换）过程启发的方法：

（在伪 java-scala 代码中，因为我的 Scala 仍处于起步阶段）

```
def addEntry(key: String, newList: immutable.List[String]) = {
    val existing = putIfAbsent(key, newList); 
    if (existing != null) {
       synchronized(existing) {
           if (get(key) == existing) { // ask again for the value within the synchronized block to ensure consistence. This is the compare part of CAS
                return put(key,existing ++ newList); // Swap the old value by the new
           } else {
               throw new ConcurrentModificationException(); // how else mark failure?
           }
       }
    }
    return existing;
} 
```

# actionscript-3 - 如何将 3 个影片剪辑中的 1 个带到前面并使其停留在那里？（闪存 CS5，AS 3.0）

> ID：11507699
> 
> 赞同：0
> 
> 时间：2012-07-16T15:40:51.993
> 
> 标签：actionscript-3, actionscript, flash-cs5, movieclip

当我单击关联的标签时，我想将三个影片剪辑放在前面。Flash cs5 和 actionscript 3.0。每个的编码如下所示：

status_mc.status_btn.addEventListener(MouseEvent.CLICK, callFunction_stat);

函数调用Function_stat(e:MouseEvent): void {

if (getChildIndex(status_mc) == 0) {setChildIndex(status_mc, 1) } else {setChildIndex(status_mc, 0)} ; }

这会发送影片剪辑 /back/ 而不是转发，尽管它确实允许我查看顶部的每个剪辑。我的问题是，当我单击它时，如何将 3 个影片剪辑中的每一个都放在前面，如果 /is/ 在前面，单击时使其保持不变/不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:05:07.367

要将显示对象放在前面（IE：在所有其他显示对象的顶部），您只需`addChild(status_mc)`

# javascript - 更改图像加载

> ID：11507704
> 
> 赞同：2
> 
> 时间：2012-07-16T15:41:13.270
> 
> 标签：javascript, image, onload, fade

我有一个简单的网页，主页上的 div 中有一个图像，并且想在页面加载（仅一次）后使用 javascript 将图像更改为替代图像，我目前正在使用动画 gif这样做，但更愿意使用 javascript。

我的 JavaScript 技能有限。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:59:00.100

我假设您不会使用 jQuery，所以我创建了简单的 js 示例，该示例在页面加载后淡出一个图像并淡入另一个图像。您可以在此处查看示例[http://jsfiddle.net/rJzPV/7/](http://jsfiddle.net/rJzPV/7/)

```
function fadeOut(elem, time, callbackFn) {
    var startOpacity = elem.style.opacity || 1;
    elem.style.opacity = startOpacity;

    (function go() {
        elem.style.opacity -= startOpacity / (time / 100);

        // for IE
        elem.style.filter = 'alpha(opacity=' + elem.style.opacity * 100 + ')';

        if (elem.style.opacity > 0.11)
            setTimeout(go, 100);
        else {
            elem.style.display = 'none';
            if (callbackFn)
                callbackFn();
        }
    })();
}

function fadeIn(elem, time) {
    var startOpacity = 0.1;
    elem.style.opacity = startOpacity;
    elem.style.display = "";
    (function go() {
        elem.style.opacity -= -startOpacity / (time / 1000);

        // for IE
        elem.style.filter = 'alpha(opacity=' + elem.style.opacity * 100 + ')';

        if (elem.style.opacity < 1)
            setTimeout(go, 100);
    })();
}

window.addEvent('load', function () {
    function changePicture() {
        var _myImg = document.getElementById("myImage");
        _myImg.src = "http://www.google.com/logos/2012/klimt12-hp.jpg";
        fadeIn(_myImg, 1000);
    }

    var _myImg = document.getElementById("myImage");
    fadeOut(_myImg, 1000, changePicture);

}); 
```

# javascript - 如何根据行单元格值隐藏/显示表格列？

> ID：11507705
> 
> 赞同：1
> 
> 时间：2012-07-16T15:41:14.493
> 
> 标签：javascript, jquery, css, html-table

我有这张桌子：

```
<table class="mytbl">
 <thead>
  <tr>
    <th>dyn-tbl-hdr-1</th>  <----these actually are timestamps.
    <th>dyn-tbl-hdr-2</th>
    <th>dyn-tbl-hdr-3</th>
    <th>dyn-tbl-hdr-4</th>
    <th>dyn-tbl-hdr-5</th>
    <th>dyn-tbl-hdr-6</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>20</td>
   <td>50</td>
   <td>60</td>
   <td>20</td>
   <td>50</td>
   <td>60</td>
  </tr>
  <tr>
   <td>33</td>
   <td>5455</td>
   <td>4550</td>
   <td>245</td>
   <td>50566</td>
   <td>5678</td>
  </tr>
  <tr>
   <td>33433</td>
   <td>598455</td>
   <td>894550</td>
   <td>96245</td>
   <td>7050566</td>
   <td>4325678</td>
  </tr>
 </tbody>
</table> 
```

我只想显示第一行值为 20（或 20 和 60）的那些“列”。我想根据任何行的单元格值显示/隐藏列。目标是仅显示给定行中单元格值匹配的那些列。（所以在上面的例子中只显示第 1 行包含 20 的那些列（如果用户想看到 20）。我可以只显示 ro1 包含 20 和 50 的那些列吗？我想我需要先选择一行，然后单元格值，然后根据该行和选定的单元格值隐藏列。但我不确定如何在 jquery 中对此进行编码。感谢所有帮助。

在我的应用程序表中是动态生成的。表头不是恒定的，它们实际上是时间戳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:48:37.540

您可以使用`.each`jQuery 中的函数来处理这个问题。

**参考**：[http ://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

**jQuery** :

```
$("td").each(function() {
    if ($(this).html() != 20) {
        $(this).css("opacity", "0");
    }
});​ 
```

**JsFiddle**：http: [//jsfiddle.net/d2arY/](http://jsfiddle.net/d2arY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:55:12.160

试试这个：

```
var col = new Array();
$('tr').eq('1').find('td').each(function() {
    if ($(this).text() == 20 || $(this).text() == 50) {
        col.push($(this).index());
    }

});
$('th,td').each(function() {
    if ($.inArray($(this).index(), col)==-1) $(this).hide();
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/r73nB/1/)**

这会在表的第一个非标题行中搜索 20 或 50 的值，并隐藏没有这些值的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T16:35:06.907

```
$('.mytbl tbody tr:first td').map(function(index, el) {

    if ($(el).text() == 60) 

             return $(el).index();  // get index of td that contain 60

}).each(function(i, val) {  // loop over those index

    $('.mytbl tbody td, .mytbl thead th').each(function() {

        $(this).parent().find('td, th').eq(val).hide(); // hide th and td with
                                                        // similar index
    });
}); 
```

**[工作样本](http://jsfiddle.net/QStkd/608/)**

# javascript - 更改 Divs 中动态生成的文本框的内容

> ID：11507708
> 
> 赞同：0
> 
> 时间：2012-07-16T15:41:22.153
> 
> 标签：javascript, jquery, html

我有一个系统，当按下按钮时，会在屏幕左侧创建一个文本框并用 div 包围。每个新文本框都被命名为 textbox1,2 等。我想要做的是当用户单击它周围的 div 时，文本框会替换屏幕右侧的按钮，并且用户可以输入新生成的文本框它也应填充屏幕左侧的文本框。我想这样做的原因是因为左侧的文本框不可编辑，除非用户单击 div 并编辑右侧的框。我似乎无法弄清楚该怎么做。

请原谅缺少标签等的任何错误，因为这是一个经过严格编辑的版本。此外，在查看下面的代码之前，您可能需要查看我设置的演示。[http://jsfiddle.net/JHmaV/335/](http://jsfiddle.net/JHmaV/335/)。

这是HTML代码

```
 <html>
<body>
    <table width ="100%" alight="right">
        <td width ="51.5%"></td>
        <td> <div id="addField" class="tabOptions">Add field</div></td>
    </table>

    <table align ="left"style="background-color: white" width="100%">

    </tr>
    <td width ="50%">
        <ul id ="firstColumn">
            <div id="identifier">
            </div>
        </ul>
    </td>
    <td>
        <ul id ="secondColumn" width="5%">
            <div id="placeholder">
                <div id="mainPanel">
                    <li><input type="button" class="formCreationButton" id="textAdd" value="Single line text" /></li>

                </div>
            </div>
        </ul>
    </td>
    <tr>
</table> 
```

这是jQuery

```
 var counter = 0;
var textBoxCounter = 1;
var tempStorage = $('div#placeholder').html();

function setValue(target) {

    $("textBox1").replaceWith("<h2><input type='text' onkeydown='setValue(this)' value='"+ target.value +"' id='" + target.id +"' name='" + target.id +"')'></h2>");

    target.value = target.value;
}
function changeHeader(target) {

    if(target.id == "formNameChange"){
        $('h2').replaceWith('<h2>' +target.value + '</h2>');
    }
    else{
        $('h4').replaceWith('<h4>' +target.value + '</h4>');
    }
}

$(document).ready(function() {

     $("#addField").live('click','div',function(){            
        $('div#placeholder').html(tempStorage);
    });

    $('#textBox1').live('keyup',function() {

        alert("TESTING");
    });
    $('#textBox1').live('keypress',function ()
    {
        $('textBox1').val('Changed Value');
        alert('test');
    });
    $('#textBox1').live('onFocus',function ()
    {

        alert('test');
    });
    $(".container").live('click','div',function(){

        var divID = this.id;
        if(divID != ""){
            var lastChar = divID.substr(divID.length - 1);
            var content = document.getElementById(divID).outerHTML;
            var text = document.getElementById(divID).innerHTML;
            var textboxId = $('div.container')
            .find('input[type="text"]')[lastChar]
            .id;
            $('div#placeholder').html(content);
                                alert(textboxId);
        }
        else{

        }
    });

    $('#textAdd').live('click',function() {
        var newdiv = document.createElement('div');
        newdiv.innerHTML = "Textbox " + textBoxCounter + " <br><div id='container " + counter + "' class='container'><li><input type='text' onkeydown='setValue(this)'  id='textBox " + textBoxCounter +"' name='textBox " + textBoxCounter +"')'></li></div></br>";
        document.getElementById("identifier").appendChild(newdiv);
        textBoxCounter++
        counter++;
    });
});​ 
```

请注意，我使用的是 jQuery 1.4.4。我对此进行了多次尝试，但无法正确完成。任何帮助将不胜感激，在此先感谢您。保罗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:17:23.163

你发的帖子有很多问题。我不明白您在解决这一切方面做得不够好，但我发现这可能至少会导致您的一些（如果不是全部）问题：

1.  元素 ID 中不能有空格。那不是有效的 HTML。
2.  您最终会得到两个具有相同 id 的输入（一个在左侧，然后一个在您单击左侧文本框时显示在右侧）。这将导致您通过 $('#myId').live 设置的任何事件也绑定到这个新创建的文本框。
3.  如果您的元素具有相同的 id（如上所述）。这不是有效的 HTML。

编辑：

这是一个 jsFiddle，它可以满足您的需求（我认为！哈哈）。我稍微修改了您的代码以使其正常工作，但它应该是不言自明的。当您聚焦一个文本框时，我会创建一个新文本框，设置一些链接回原始文本框的数据属性，然后为文本框设置一个实时事件侦听器。当按键发生时，我会找出与您正在输入的文本框相关的文本框并更新它的值。

说得通？

应该注意的是，这不是最干净的解决方案，因为代码有点乱（可以清理）。但是，这应该让您开始走上一条可行的道路。我将把重构留给你:)

[http://jsfiddle.net/JHmaV/338/](http://jsfiddle.net/JHmaV/338/)

# jquery - Firefox 中的 jQuery mousemove 不稳定动作和跳跃结果

> ID：11507710
> 
> 赞同：0
> 
> 时间：2012-07-16T15:41:24.167
> 
> 标签：jquery, jquery-ui, firefox, mousemove

我有以下代码：

[http://jsfiddle.net/atlchris/CC53T/](http://jsfiddle.net/atlchris/CC53T/)

它的作用是使用 jQuery UI 滑块并为其添加悬停和预览支持。它在大多数浏览器上运行良好，但在 Firefox for Mac 上，我得到了跳跃的结果和不稳定的动作。

有人对我如何在所有浏览器中更好地工作有任何建议吗？

在 Mac 版 Chrome、Firefox 和 Safari 上测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:52:40.117

感谢另一个资源，我能够通过使用`mouseleave`事件而不是`mouseout`. `mouselease`不会触发内部元素。

# c# - C#保存GIF或JPG....如何提高质量？

> ID：11507719
> 
> 赞同：-4
> 
> 时间：2012-07-16T15:41:50.640
> 
> 标签：c#, gif, jpeg

我截取了桌面并保存为 jpg 和 gif

png 文件的质量是完美的。但是，jpg和gif的质量似乎有点低...有没有办法改善这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:45:30.227

不，gif 不支持与 png 一样多的色彩空间，而 jpeg 是有损的，因此您无法匹配 png。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:47:48.790

您应该研究 GIF 和 JPG 的技术方面：

[http://en.wikipedia.org/wiki/GIF](http://en.wikipedia.org/wiki/GIF)

[http://en.wikipedia.org/wiki/JPG](http://en.wikipedia.org/wiki/JPG)

最简单的答案可能是：GIF 在很大程度上限制为 256 种颜色，因此如果您的屏幕截图包含的颜色超出此范围（即现代桌面或应用程序），您将看到某种抖动，这会降低感知质量。JPEG 是一种针对照片优化的有损压缩方法，因此非照片（即桌面）的屏幕截图偶尔会显示出不和谐的压缩伪影。

# javascript - 如何将基于浏览器的 HTML5 和 Javascript 代码迁移到 Xcode？

> ID：11507721
> 
> 赞同：0
> 
> 时间：2012-07-16T15:41:54.383
> 
> 标签：javascript, html, xcode

我有一个包含 JavaScript 代码的 HTML 文件，可由 PC 浏览器（如 IE）读取。现在我想“迁移”这些代码，使其成为我 iOS 应用程序的一部分。

是否有捷径可寻？我现在使用 Titanium 是一个好方法，但如果我打算使用 Xcode 怎么办？（此外，HTML 包含一些 JQuery 代码。）

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:43:55.487

使用[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)，您可以按原样运行它。

# cakephp - cakePhp 重定向和身份验证在服务器上不起作用

> ID：11507727
> 
> 赞同：1
> 
> 时间：2012-07-16T15:42:17.370
> 
> 标签：cakephp

我在登录 www 服务器时遇到问题。在 wamp（本地）上，一切都很好。当我在服务器上上传我的网站时，登录不起作用，我也看到了重定向。我有登录表单，点击登录后，它会转到用户控制器进行登录操作。登录操作如下所示：

```
 public function login(){
        if($this->request->is('post')){
            if($this->Auth->login()){
                $this->redirect($this->referer());
            }
            else{

                $this->Session->setFlash(__('Wrong username or password'));
                $this->redirect($this->referer());
            }
        }
    } 
```

无论成功与否，它都应该重定向。它停留在：用户/登录页面。有什么问题？

应用控制器：

```
public $components = array(
    'Session',
    'Auth'=>array(
        'logoutRedirect'=>array('controller'=>'main', 'action'=>'index')
    )
);

public function beforeFilter(){
    $this->Auth->allow();

} 
```

形式：

```
<?php

    echo $this->Form->create('User',  array('action' => 'login'));
    echo $this->Form->input('username', array('label'=>__('Username:')));
    echo $this->Form->input('password', array('label'=>__('Password:')));
    echo $this->Form->end(__('Login'));

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T18:50:11.973

一个文件后有一个空格`?>`.... 3小时后我发现那很糟糕:)

# iphone - iOS 客户端、Facebook API 和服务器之间的安全通信

> ID：11507729
> 
> 赞同：16
> 
> 时间：2012-07-16T15:42:25.827
> 
> 标签：iphone, ios, facebook, security, facebook-graph-api

我想实现一个带有 Facebook 登录的 iOS 应用程序。我希望我的应用程序的用户能够与他们的社交图进行交互（即发布到他们的信息流）。为此，我将使用 Facebook iOS SDK。
当用户已经通过 Facebook 进行身份验证时，他们也应该能够在我的应用程序的服务器端使用一些服务。如何根据服务器上的服务验证用户？

在我的 iOS 应用程序中，我可以使用 iOS Facebook SDK 查询访问令牌（用于我的 Facebook 应用程序）。我应该将该访问令牌与 facebook 用户 ID 一起发送到我的服务器吗？服务器能否验证访问令牌是否有效？还是应该只有我的 iOS 应用程序与 Facebook API 通信？服务器可以发布到我的 Facebook 墙上，还是应该只通过 iOS 应用程序完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T19:37:52.543

**更新：**

Facebook 现在提供安全文档/清单： [https ://developers.facebook.com/docs/facebook-login/security/](https://developers.facebook.com/docs/facebook-login/security/)

* * *

你至少有两个选择：

1.  将访问令牌发送到您的服务器并使用该令牌处理对 Facebook 的所有请求（如果令牌无效，您会收到错误并将其传递给客户端）。=> 安全但（有点）复杂。

2.  分离之间的通信

    *   您的客户端（iOS 应用程序）和 Facebook API 以及
    *   您的客户端和服务器。

    您的应用程序将通过 Facebook iOS SDK 处理对 Facebook API 的所有请求，然后将生成的数据（如各种 Facebook id）传送到您的服务器。如果没有某种加密，这种方法是完全不安全的；您可以向您的服务器发送一些加密哈希函数，并使用存储在您的服务器和 iOS 应用程序上的密钥对其进行验证。=> 这种方法（有点）更容易实现，但安全性较低，因为密钥可以通过逆向工程被盗。此外，在将您的应用提交到应用商店时，您必须选中“我正在使用加密”复选标记。

这实际上取决于你愿意承担多大的风险，你提出什么样的要求，你有什么样的服务等等。

> 服务器能否验证访问令牌是否有效？

是的，看这里：[iPhone 应用程序的 Facebook 访问令牌服务器端验证](https://stackoverflow.com/questions/5406859/facebook-access-token-server-side-validation-for-iphone-app)

# javascript - 我想要对象键来检查重复项，但我也想稍后对对象进行排序，我该怎么办？

> ID：11507733
> 
> 赞同：0
> 
> 时间：2012-07-16T15:42:31.850
> 
> 标签：javascript, jquery

我有一个名为的数组`newposts`

我遍历它，如果它满足某些条件，我将它添加到另一个数组中：

```
for (newpost in newposts){
    if (!(  newposts[newpost][0] in currentposts )){
        var triploc1 = locations[newposts[newpost][1]].location;
        var triploc2 = locations[newposts[newpost][2]].location;
        var detour_distance = fourpoint_distance(newloc1, triploc1, triploc2, newloc2);
        if (worthwhile_detour(original_distance,detour_distance)){
            currentposts.push(posts[newposts[newpost][0]])
        }
    }
} 
```

第二行用于检查重复项（`newposts[newpost][0]`）是一个 ID。当我写它时，我忘记了 currentposts 是一个数组。显然，这是行不通的。我需要 currentposts 是一个数组，因为就在下面我对它进行排序。选择完成后，我当然可以将其转换为数组。但我是 javascript 新手，相信有人可能知道更好的方法来做到这一点。

```
function sortposts(my_posts){
    my_posts.sort(function(a, b) {
        var acount = a.sortvar;
        var bcount = b.sortvar;
        return (bcount-acount);
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:03:38.823

我不确定你想要的目标是什么，但我可以尝试为你清理它。请注意，我正在使用 underscore.js 库，因为它使处理数组变得非常容易:) 如果您不能将[underscore.js](http://underscorejs.org/)包含到您的项目中，请告诉我，我会在“纯”javascript :)

```
_.each(newposts, function(item) {
    if ( _.indexOf(currentposts, posts[item[0]]) >= 0 ) {
        var triploc1 = locations[item[1]].location;
        var triploc2 = locations[item[2]].location;

        var detour_distance = fourpoint_distance(newloc1, triploc1, triploc2, newloc2);

        if (worthwhile_detour(original_distance, detour_distance)){
            currentposts.push(posts[item[0]])
        }
    }
});

_.sortBy(currentposts, function(item) {
    return item.sortvar;
}); 
```

但是，我不得不质疑，为什么您要使用这么多数组（newposts、locations、posts 等）？他们都需要吗？

# silverlight - 如何绑定到自定义 silverlight 控件？

> ID：11507734
> 
> 赞同：0
> 
> 时间：2012-07-16T15:42:33.377
> 
> 标签：silverlight, binding, controls, metadata

我在绑定到我的控件时遇到问题。我希望我的控件中的标签（lblLabel）显示来自绑定到字段属性的任何内容的元数据。它当前将“字段”显示为标签。如何让它显示“客户名称：”，它是视图模型中属性 CustomerName 的名称？

**我的控件 XAML**

```
<UserControl x:Name="ctlRowItem" x:Class="ApplicationShell.Controls.RowItem"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
    xmlns:my="clr-namespace:SilverlightApplicationCore.Controls;assembly=SilverlightApplicationCore"
    xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="g_required" Width="15" />
            <ColumnDefinition x:Name="g_label" Width="200" />
            <ColumnDefinition x:Name="g_control" Width="auto" />
            <ColumnDefinition x:Name="g_fieldEnd" Width="*" />
        </Grid.ColumnDefinitions>

        <sdk:Label x:Name="lblRequired" Grid.Column="0" Grid.Row="0" />
        <sdk:Label x:Name="lblLabel" Grid.Column="1" Grid.Row="3" Target="{Binding ElementName=txtControl}" PropertyPath="Field" />

        <TextBox x:Name="txtControl" Grid.Column="2" Grid.Row="3" MaxLength="10" Width="150" Text="{Binding Field, Mode=TwoWay, ElementName=ctlRowItem}" />     
    </Grid>
</UserControl> 
```

**我的控件代码隐藏**

```
using System.Windows;<BR>
using System.Windows.Controls;<BR>
using System.Windows.Data;<BR>
using ApplicationShell.Resources;<BR>

namespace ApplicationShell.Controls
{
    public partial class RowItem : UserControl
    {

        #region Properties

        public object Field
        {
            get { return (string)GetValue(FieldProperty); }
            set { SetValue(FieldProperty, value); }
        }

        #region Dependency Properties

        public static readonly DependencyProperty FieldProperty = DependencyProperty.Register("Field", typeof(object), typeof(RowItem), new PropertyMetadata(null, Field_PropertyChangedCallback));

        #endregion

        #endregion

        #region Events

        #region Dependency Properties

        private static void Field_PropertyChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            if (e.OldValue != e.NewValue)
                return;

            var control = (RowItem)d;
            control.Field = (object)e.NewValue;
        }

        #endregion

        #endregion

        #region Constructor

        public RowItem()
        {
            InitializeComponent();
        }

        #endregion

    }
} 
```

**查看模型**

```
namespace ApplicationShell.Web.ViewModel
{
    [Serializable]
    public class Customers
    {
        [Display(AutoGenerateField = false, ShortName="CustomerName_Short", Name="CustomerName_Long", ResourceType = typeof(LocaleLibrary))]
        public override string CustomerName { get; set; }
    }
} 
```

**调用 My Control 的 XAML**

此页面数据上下文设置为客户类型的属性（视图模型）。

```
<controls:ChildWindow x:Class="ApplicationShell.CustomerWindow"
           xmlns:my="clr-namespace:SilverlightApplicationCore.Controls;assembly=SilverlightApplicationCore"
HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
           Title="Customer View">

<my:RowItem x:name="test" Field="{Binding CustomerName,Mode=TwoWay}" />
</controls:ChildWindow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:24:54.650

有一种方法可以获取绑定到的属性的显示名称，但遗憾的是，这并非易事，我们必须对所使用的属性路径做出假设。

我知道[Silverlight Toolkit ValidationSummary](http://msdn.microsoft.com/en-us/library/system.windows.controls.validationsummary(v=vs.95).aspx)能够自动找出绑定的属性名称，但是当我查看它的源代码时，我发现它是通过对绑定路径进行自己的评估来做到这一点的。

所以，这就是我将在这里采取的方法。

我修改了您的`RowItem`用户控件的代码隐藏，这就是我想出的：

```
using System;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Reflection;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

public partial class RowItem : UserControl
{
    public RowItem()
    {
        InitializeComponent();
        Dispatcher.BeginInvoke(SetFieldLabel);
    }

    public string Field
    {
        get { return (string)GetValue(FieldProperty); }
        set { SetValue(FieldProperty, value); }
    }

    public static readonly DependencyProperty FieldProperty =
        DependencyProperty.Register("Field", typeof(string), typeof(RowItem),
                                    null);

    /// <summary>
    /// Return the display name of the property at the end of the given binding
    /// path from the given source object.
    /// </summary>
    /// <remarks>
    /// <para>
    /// The display name of the property is the name of the property according
    /// to a <see cref="DisplayAttribute"/> set on the property, if such an
    /// attribute is found, otherwise the name of the property.
    /// </para>
    /// <para>
    /// This method supports dot-separated binding paths only.  Binding
    /// expressions such <c>[0]</c> or <c>(...)</c> are not supported and will
    /// cause this method to return null.
    /// </para>
    /// <para>
    /// If no suitable property could be found (due to an intermediate value
    /// of the property-path evaluating to <c>null</c>, or no property with a
    /// given name being found), <c>null</c> is returned.  The final property
    /// in the path can have a <c>null</c> value, as that value is never used.
    /// </para>
    /// </remarks>
    /// <param name="binding">The binding expression.</param>
    /// <param name="source">
    /// The source object at which to start the evaluation.
    /// </param>
    /// <returns>
    /// The display name of the property at the end of the binding, or
    /// <c>null</c> if this could not be determined.
    /// </returns>
    private string GetBindingPropertyDisplayName(BindingExpression binding,
                                                 object source)
    {
        if (binding == null)
        {
            throw new ArgumentNullException("binding");
        }

        string bindingPath = binding.ParentBinding.Path.Path;
        object obj = source;
        PropertyInfo propInfo = null;
        foreach (string propertyName in bindingPath.Split('.'))
        {
            if (obj == null)
            {
                // Null object not at the end of the path.
                return null;
            }

            Type type = obj.GetType();
            propInfo = type.GetProperty(propertyName);
            if (propInfo == null)
            {
                // No property with the given name.
                return null;
            }

            obj = propInfo.GetValue(obj, null);
        }

        DisplayAttribute displayAttr = 
            propInfo.GetCustomAttributes(typeof(DisplayAttribute), false)
            .OfType<DisplayAttribute>()
            .FirstOrDefault();

        if (displayAttr != null)
        {
            return displayAttr.GetName();
        }
        else
        {
            return propInfo.Name;
        }
    }

    private void SetFieldLabel()
    {
        BindingExpression binding = this.GetBindingExpression(FieldProperty);
        string displayName = GetBindingPropertyDisplayName(binding,
                                                           DataContext);
        if (lblLabel != null)
        {
            lblLabel.Content = displayName;
        }
    }
} 
```

有几点需要注意：

*   要使用此代码，您的项目需要引用`System.ComponentModel.DataAnnotations`. 但是，这应该不是问题，因为这是使用该`Display`属性所需的相同参考。

*   调用该函数`SetFieldLabel`来设置字段的标签。我发现最可靠的称呼是 from `Dispatcher.BeginInvoke`。直接从构造函数或`Loaded`事件处理程序中调用此方法不起作用，因为那时尚未设置绑定。

*   仅支持由点分隔的属性名称列表组成的绑定路径。类似的东西`SomeProp.SomeOtherProp.YetAnotherProp`很好，但`SomeProp.SomeList[0]`不受支持且无法正常工作。如果无法确定绑定属性的显示名称，则不会显示任何内容。

*   `Field`依赖属性上不再有 PropertyChangedCallback 。我们对用户更改控件中的文本时会发生什么并不真正感兴趣。它不会更改绑定到的属性的显示名称。

出于测试目的，我敲开了以下视图模型类：

```
public class ViewModel
{
    // INotifyPropertyChanged implementation omitted.

    [Display(Name = "This value is in a Display attribute")]
    public string WithDisplay { get; set; }

    public string WithoutDisplay { get; set; }

    [Display(Name = "ExampleFieldNameKey", ResourceType = typeof(Strings))]
    public string Localised { get; set; }

    public object This { get { return this; } }

    public object TheVerySame { get { return this; } }
} 
```

（Resources 集合`Strings.resx`包含一个带有 name`ExampleFieldNameKey`和 value的键`This value is in a Resources.resx`。该集合的 Access Modifier 也设置为 Public。）我使用以下 XAML 测试了我对控件的修改，并`DataContext`设置为 view-model 的实例上面介绍的类：

```
<StackPanel>
    <local:RowItem Field="{Binding Path=WithDisplay, Mode=TwoWay}" />
    <local:RowItem Field="{Binding Path=WithoutDisplay, Mode=TwoWay}" />
    <local:RowItem Field="{Binding Path=Localised, Mode=TwoWay}" />
    <local:RowItem Field="{Binding Path=This.This.TheVerySame.This.WithDisplay, Mode=TwoWay}" />
</StackPanel> 
```

这给了我四个`RowItems`，带有以下标签：

```
此值在显示属性中
无显示
该值在 Resources.resx 中
此值在显示属性中

```

# c# - 从列表中添加项目

> ID：11507736
> 
> 赞同：1
> 
> 时间：2012-07-16T15:42:39.340
> 
> 标签：c#, list, listview

对不起，我的英语不好 ：（。

嗨，如何将项目添加到已放入 List 的 ListView 中？

我试过这个：

```
listView1.Items.Add(pluginContainer); 
```

但这似乎不起作用:(。

我无法进行 foreach 循环，因为这样 ListView 将需要大约 10 秒才能被填充（我说的是 5000 多个项目）。

这修复了它：

```
listView1.Items.AddRange(pluginContainer.ToArray()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:50:45.293

如果列表中的项目都是 ListViewItem 类型，则可以使用[AddRange](http://msdn.microsoft.com/en-us/library/bfzz668s.aspx)。如果不是，您将不得不使用它们制作 ListViewItems，或者使用 for 循环。

在任何一种情况下，您都应该努力提高 ListView 在添加项目期间的性能，方法是首先在其上调用[SuspendLayout](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.suspendlayout.aspx)。添加所有项目后，调用[ResumeLayout](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resumelayout.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T18:01:20.750

尝试这个：

```
public enum State
{
    AL, GA, FL, SC, TN, MI
}

public class Person
{
    public int ID { get; set; }
    public string Name { get; set; }
    public State State { get; set; }
    // Converts properties to string array
    public string[] ToListViewItem()
    {
        return new string[] {
            ID.ToString("00000"),
            Name,
            State.ToString() };
    }
}

public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();
        //Setup list view column headings and widths
        listView1.Columns.Add("ID", 48);
        listView1.Columns.Add("Name", 300);
        listView1.Columns.Add("State", 48);
    }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        // Create a list
        List<Person> list = new List<Person>();
        // Fill in some data
        list.Add(new Person() { ID=1001, Name="John", State=State.TN });
        list.Add(new Person() { ID=1002, Name="Roger", State=State.AL });
        list.Add(new Person() { ID=1003, Name="Samantha", State=State.FL});
        list.Add(new Person() { ID=1004, Name="Kara", State=State.MI});

        // Fill in ListView from list
        PopulateListView(list);
    }

    void PopulateListView(List<Person> list)
    {
        listView1.SuspendLayout();
        for(int i=0; i<list.Count; i++)
        {
            // create a list view item
            var lvi = new ListViewItem(list[i].ToListViewItem());
            // assign class reference to lvi Tag for later use
            lvi.Tag = list[i];
            // add to list view
            listView1.Items.Add(lvi);
        }
        //This adjust the width of 1st column to fit data.
        listView1.AutoResizeColumn(0, ColumnHeaderAutoResizeStyle.ColumnContent);
        listView1.ResumeLayout();
    }
} 
```

![列表视图示例](../Images/f4de680d22bb383434dfa8a3f93533ee.png)

# java - UIDefaults.getUI() 失败：将 JFrame 加载到另一个项目时出错

> ID：11507739
> 
> 赞同：0
> 
> 时间：2012-07-16T15:42:50.570
> 
> 标签：java, swing, look-and-feel

我发现[这个项目](http://www.crionics.com/public/swing_examples/JSliderExamples1.html)在独立运行时工作得很好。但是，当我尝试将其添加到另一个项目中的 JPanel 时（已经在完全相同的项目中执行此操作，但使用我自己的 JFrame 并且工作正常），会出现此错误：

```
 UIDefaults.getUI() failed: no ComponentUI class for: doubleslider.MThumbSlider[,0,0,0x0,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=0,maximumSize=,minimumSize=,preferredSize=,isInverted=false,majorTickSpacing=0,minorTickSpacing=0,orientation=HORIZONTAL,paintLabels=false,paintTicks=false,paintTrack=true,snapToTicks=false,snapToValue=true]
    java.lang.Error
        at javax.swing.UIDefaults.getUIError(UIDefaults.java:729)
        at javax.swing.MultiUIDefaults.getUIError(MultiUIDefaults.java:130)
        at javax.swing.UIDefaults.getUI(UIDefaults.java:759)
        at javax.swing.UIManager.getUI(UIManager.java:1002)
        at javax.swing.JSlider.updateUI(JSlider.java:323)
        at doubleslider.MThumbSlider.updateUI(MThumbSlider.java:44)
        at javax.swing.JSlider.<init>(JSlider.java:275)
        at javax.swing.JSlider.<init>(JSlider.java:182)
        at doubleslider.MThumbSlider.<init>(MThumbSlider.java:24)
        at doubleslider.DoubleSlider.<init>(DoubleSlider.java:29)
        at com.einge.scadaremotecontrol.Ventana.<init>(Ventana.java:227)
        at com.einge.scadaremotecontrol.ScadaRemoteControl.<init>(ScadaRemoteControl.java:92)
        at com.einge.scadaremotecontrol.ScadaRemoteControl.main(ScadaRemoteControl.java:197)
    UIDefaults.getUI() failed: no ComponentUI class for: doubleslider.MThumbSlider[,0,0,0x0,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=0,maximumSize=,minimumSize=,preferredSize=,isInverted=false,majorTickSpacing=0,minorTickSpacing=0,orientation=HORIZONTAL,paintLabels=false,paintTicks=false,paintTrack=true,snapToTicks=false,snapToValue=true]
    java.lang.Error
        at javax.swing.UIDefaults.getUIError(UIDefaults.java:729)
        at javax.swing.MultiUIDefaults.getUIError(MultiUIDefaults.java:130)
        at javax.swing.UIDefaults.getUI(UIDefaults.java:759)
        at javax.swing.UIManager.getUI(UIManager.java:1002)
        at javax.swing.JSlider.updateUI(JSlider.java:323)
        at doubleslider.MThumbSlider.updateUI(MThumbSlider.java:44)
        at doubleslider.MThumbSlider.<init>(MThumbSlider.java:26)
        at doubleslider.DoubleSlider.<init>(DoubleSlider.java:29)
        at com.einge.scadaremotecontrol.Ventana.<init>(Ventana.java:227)
        at com.einge.scadaremotecontrol.ScadaRemoteControl.<init>(ScadaRemoteControl.java:92)
        at com.einge.scadaremotecontrol.ScadaRemoteControl.main(ScadaRemoteControl.java:197) 
```

我的第一个猜测是 MultiTumbSlider 类试图设置与我的 JFrame 不同的外观。有什么解决办法吗？我想不通，我真的需要两个滑块才能有一个时间范围

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:13:38.230

我不认识这个非常古老的[示例](http://www.crionics.com/public/swing_examples/JSliderExamples1.html)中使用的加载方法；它似乎基于当前的外观和感觉。您可以尝试`javax.swing.plaf.metal.MetalLookAndFeel`显式设置。展望未来，请参阅 Kirill Grouchnikov 的[*如何编写自定义 Swing 组件*](http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html)，以获取有关现代化代理管道的指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-12T17:38:19.793

在 Marc Loy 等人的“Java Swing，第 2 版”一书中。al.，在“创建你自己的组件”部分（第 28 章：在引擎盖下摆动），我们在`main()`方法中有代码行：

```
UIManager.put(JogShuttleUI.UI_CLASS_ID, "BasicJogShuttleUI"); 
```

这将`UIDefaults`通过通知`UIManeger`自定义组件的基本 UI 委托的类名。但是请注意，您必须提供*完全限定的类名*，因为它将由类加载机制定位。

例如，当我使用

```
UIManager.put(DiagramUI.UI_CLASS_ID, "BasicDiagramUI"); 
```

我收到您的问题报告的相同错误。但是，当我将其更改为

```
UIManager.put(DiagramUI.UI_CLASS_ID, BasicDiagramUI.class.getName()); 
```

事情运作良好。编码不错！

# c# - 如何使用图片框模仿按钮控件，其行为与按钮完全一样？

> ID：11507744
> 
> 赞同：1
> 
> 时间：2012-07-16T15:42:59.470
> 
> 标签：c#, winforms, button, controls, picturebox

按钮这样做：如果用户在按钮控件上按住鼠标左键并将光标移出控件，则按钮控件将其外观更改为默认值，并且如果仍然按住鼠标按钮，并且光标输入一个按钮控件，控件将其外观更改为按下的版本。我正在尝试使用 PictureBox 模仿按钮，但是当鼠标在释放鼠标左键之前离开 PictureBox 时，PictureBox 的图片在释放鼠标按钮之前不会改变。

我正在尝试这样做，因为按钮控件看起来不像我想要的那样。

如何使用图片框模仿按钮控件，其行为与按钮完全一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:34:46.790

这是设计使然，控件将 Capture 属性设置为 true，因此当您将鼠标移到控件矩形之外时，它会在按住按钮的同时继续接收鼠标消息。

当您看到它移出时，您可以将其关闭：

```
 private void pictureBox1_MouseMove(object sender, MouseEventArgs e) {
        var box = (PictureBox)sender;
        if (!box.DisplayRectangle.Contains(e.Location)) box.Capture = false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:24:26.840

尝试使用 DragLeave 事件而不是 MouseLeave 事件。

# c# - 如何通过电子邮件发送 TableAdapter 结果

> ID：11507749
> 
> 赞同：0
> 
> 时间：2012-07-16T15:43:10.923
> 
> 标签：c#, sql, vb.net, visual-studio-2008

我有一个简单的 VB 应用程序，它与数据集联系，并在加载时将信息吐出给报表查看器。我想获取 tableadapter 信息（存储的查询）并将该信息作为电子邮件的正文发送......现在在负载中我有：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
                Me.Paid_Out_TbTableAdapter.Fill(Me.DataDeliveryServiceDataSet.Paid_Out_Tb)

        Me.ReportViewer1.RefreshReport()
    End Sub 
```

我将如何让程序通过电子邮件发送该信息？

我认为这将类似于删除 Me.reportviewer1 并使用 System.Net.Mail？但是我如何将 Body 指定为 tableadapter？

我包含了 C#，因为如果需要，我可以轻松切换到 C#...

谢谢。

# ssrs-2008 - SSRS-文本框边框宽度属性在保存表达式后恢复为 1pt

> ID：11507750
> 
> 赞同：9
> 
> 时间：2012-07-16T15:43:13.413
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

在过去的几个小时里，我一直在研究这个。我将以下代码放入文本框边框宽度属性**（这适用​​于表格而不是矩阵）**：

```
=IIF(Fields!SortOrder.Value = 2,"3pt","1pt") 
```

在表达式编辑器上单击“确定”并在“文本框属性”编辑器上单击“确定”后，我可以返回属性，并且“边框宽度”属性再次设置为默认值 1pt。

在玩了很长时间之后，我终于开始让文本框按照我想要的方式运行，但该属性仍然设置不正确。然而，报告的 XML 显示它是使用上述表达式设置的。所以 SSRS 直到报告运行时才正确解析 XML（至少这是我假设的）。我已经能够在同一文本框和该行中的所有其他文本框上设置 Bold 属性。但是，TextBox 属性列表的 Border 部分中的所有属性似乎都会自行重置。我只是在报告发生时实际做了我想要的（如上所述），但通过 SSRS 显示的属性仍然不正确。我想我需要一种方法来触发 SSRS 来重新处理 XML。

我尝试过的事情：

-关闭和重新打开报告

-关闭和重新打开解决方案

- 关闭并重新打开 Visual Studio

- 重新启动计算机

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T18:51:13.827

我找到了答案！

我通过右键单击文本框并选择“文本框属性”来访问属性。但是，如果我打开属性侧窗口（View->Properties Window... 或按 F4），我会看到我通过 XML 设置的所有属性。

基本上，有两个地方可以找到属性，你想用侧边栏一个。右键单击菜单似乎是一组简化的属性。

我能够专门为一组文本框设置顶部边框的宽度，并且得到了我想要的外观。感谢任何看过这个的人，我希望这可以帮助其他有类似问题的人。

# foursquare - 如何将特色位置添加到附近列表的顶部？

> ID：11507751
> 
> 赞同：0
> 
> 时间：2012-07-16T15:43:17.380
> 
> 标签：foursquare

Foursquare api：如何将特色位置添加到附近结果列表的顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:10:06.317

我试图理解你的问题，如果我错了，请纠正我。但这是您的两个选择：

您希望将您自己定义的特色场所添加到从 API 检索到的场所列表中。在这种情况下，您必须手动执行与 API 无关的操作。

或者您想要一个由foursquare定义的特色场所列表，这将是探索端点： [https ://developer.foursquare.com/docs/venues/explore](https://developer.foursquare.com/docs/venues/explore)

# c++ - 使用 C++ API 开发 Google Pepper Trusted Plugin 时如何设置链接器标志

> ID：11507754
> 
> 赞同：0
> 
> 时间：2012-07-16T15:43:30.383
> 
> 标签：c++, c, google-chrome, google-nativeclient

**大家好，**

我正在尝试在 Linux 上使用 Pepper API（版本 16）构建 Chromium Trusted Plugin（无沙盒 NaCl-Plugin）。“受信任的插件”意味着我在启动 Chrome 时将路径传递给我的插件，插件获取在特定的自定义应用程序类型的上下文中加载。

使用 C-API 一切正常，因为插件不必与任何 Google 库链接。但是当我使用 Pepper 的 C++-API 时，缺少一些符号；解构例如..

`pp::Instance::Init(unsigned int, char const**, char const**)`)

...但我根本不知道哪些库必须链接到我的共享库。当然，我下载了 Pepper SDK，但其中的所有内容似乎都准备好开发 NaCl-Plugins 并因此进行交叉编译（我不必交叉编译）。

[我试图在这里](https://stackoverflow.com/questions/4675661/how-do-i-build-a-ppapi-plugin-on-linux)问一个后续问题，因为发行人在他的 Makefile 中使用了“-lppapi_cpp -lppapi_cpp_objects”，但他无能为力。

**所以我的问题是：**如何设置链接器标志？还是我错过了其他东西？在哪里可以找到丢失的库？

*提前致谢并致以最诚挚的问候！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:47:34.753

不鼓励编写受信任的 PPAPI 插件。这就是为什么没有 Pepper SDK 的原因。如果您想构建一个受信任的插件，您需要构建 chrome 并从or目录中获取`libppapi_cpp.a`和`libppapi_cpp_objects.a`（可能更多）库。`out/Debug/obj/ppapi``out/Release/obj/ppapi`

请注意，不受信任的 PPAPI 插件也可以与 MIME 类型相关联。

# powershell - 获取 ISO 的挂载并将设备类型更改为客户端

> ID：11507755
> 
> 赞同：2
> 
> 时间：2012-07-16T15:43:30.960
> 
> 标签：powershell, virtual-machine, iso, powercli

我正在尝试使用 PowerCLI 来获取安装在 VM 中的 ISO 列表并将设备类型更改为“客户端设备”。最初我认为使用 get-datastore 可以找到 ISO，但是我很难找到 ISO，并在进行一些搜索时遇到了这行代码：

```
(Get-VM | Get-View | Where {$_.Runtime.ToolsInstallerMounted}) | % {$_.Name} 
```

我试过这个，但是我没有得到安装的 ISO 列表。想知道这里是否有人可能知道如何获取安装在 VM 上的 ISO 列表并通过脚本将设备类型更改为客户端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T16:15:47.177

试试这个，删除 WhatIf 以删除 ISO：

```
Get-VM | 
Get-CDDRive | 
Where-Object {$_.IsoPath} | 
Set-CDDrive -NoMedia -Confirm:$false -WhatIf 
```

# python - Python argparse 切换标志

> ID：11507756
> 
> 赞同：9
> 
> 时间：2012-07-16T15:43:32.303
> 
> 标签：python, argparse

argparse 中有什么方法可以解析像这样的标志`[+-]a,b,c,d`吗？

```
foo.py +s -b 
```

应该在 of 中存储 True ，在`dest`of 中存储`s`False `dest`，`b`就像 Windows`attrib`或 Linux所做的那样`chmod`。

目前，我分别使用 2 个单独的参数`+s`和`-s`with`store_true`和`store_false`。但是它创建了一个丑陋的帮助，它列出了每个标志两次（+a & -a）

另一种解决方法是使用正则表达式手动解析扩展的 arg（这似乎更容易并使用自定义描述，*但*在此之前，我只想看看是否有任何东西可以使用 argparse 本身执行相同的操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T18:49:58.167

您可以通过将`-s`和传递`+s`给单个`add_argument`调用并使用自定义操作来执行此操作：

```
class ToggleAction(argparse.Action):
    def __call__(self, parser, ns, values, option):
        setattr(ns, self.dest, bool("-+".index(option[0])))
ap = ArgumentParser(prefix_chars='-+')
ap.add_argument('-s', '+s', action=ToggleAction, nargs=0)

ap.parse_args(['+s'])
Namespace(s=True)

ap.parse_args(['-s'])
Namespace(s=False) 
```

# mysql - 创建触发器以更新排序/排序列

> ID：11507758
> 
> 赞同：1
> 
> 时间：2012-07-16T15:43:45.400
> 
> 标签：mysql, function, triggers, insert

我创建了这个触发器来更新 seq 列。我必须跟踪表中某些项目的顺序，但前提是责任类别 ID = 1,2。所以我的订购很棘手，因为任何具有责任类别 ID = 3 的项目我都不需要跟踪。

在我的触发器中，我正在查询以查找最后输入的 seq 编号（使用 max(seq)），然后转身并使用 seq + 1 更新新条目。

```
DELIMITER $$

USE `analysisdb`$$

DROP TRIGGER /*!50032 IF EXISTS */ `trigger_liability_detail_after_insert`$$

CREATE
/*!50017 DEFINER = 'admin'@'%' */
TRIGGER `trigger_liability_detail_after_insert` AFTER INSERT ON `liability_detail` 
    FOR EACH ROW BEGIN
    DECLARE SortOrder INT;
    IF NEW.liability_category_id = 1 OR NEW.liability_category_id = 2 THEN

    SET SortOrder = (SELECT MAX(seq) FROM liability_detail WHERE analysis_id = new.analysis_id AND liability_category_id IN (1, 2));
    UPDATE liability_detail SET seq = (SortOrder + 1) WHERE id = NEW.id;
    END IF;
    END;
$$

DELIMITER ; 
```

但是，当输入新项目时，我收到此错误：**无法更新存储函数/触发器中的表“liability_detail”，因为它已被调用此存储函数/触发器的语句使用。**

有没有更好的方法来控制这些项目的排序？我最初的想法是简单地设置第一个 seq = 1，然后 seq = 2，等等。不过，每个新的 analysis_id 都会重置排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:00:10.387

我认为解决方法是将此作为前触发器并在插入之前更新正在插入的记录。

所以

```
CREATE
/*!50017 DEFINER = 'admin'@'%' */
TRIGGER `trigger_liability_detail_after_insert` BEFORE INSERT ON `liability_detail` 
    FOR EACH ROW BEGIN
    DECLARE SortOrder INT;
    IF NEW.liability_category_id = 1 OR NEW.liability_category_id = 2 THEN

    SET NEW.seq = 1 + IFNULL((SELECT MAX(seq) FROM liability_detail WHERE analysis_id = new.analysis_id AND liability_category_id IN (1, 2)), 0);
    END IF;
    END;
$$ 
```

那是一个快速的复制/粘贴，但它应该是这样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:00:15.533

这将很难处理。

简单的答案是，如果可以将其更改为`BEFORE INSERT FOR EACH ROW`触发器，那么您可以：

```
SET NEW.seq = (SortOrder + 1); 
```

在将行插入表之前设置行上的值。但是您不能在 AFTER INSERT FOR EACH ROW 触发器中执行此操作。

使用触发器存在一些性能和并发问题。（您不能保证`seq`在并发插入运行时不会为该列生成“重复”值；但这对您来说可能不是一个显示停止问题。）

我更喜欢对`AUTO_INCREMENT`整个表使用简单列的方法。

对于所有行，其中的值将是“按顺序”的，因此查询如下

```
... WHERE liability_category_id = 1 ORDER BY seq 
```

将“按顺序”返回这些行被插入的行。给定的 序列号中会有“间隙” `liability_category_id`，但插入的序列（顺序）将被保留。

（注意：MyISAM 有一个 AUTO_INCREMENT 列的漂亮特性，让我们为索引中前导列的不同值分别“递增”。但这仅适用于 MyISAM 引擎，它不适用于 InnoDB。）

除了 AUTO_INCREMENT 列之外，我还会考虑使用一`TIMESTAMP DEFAULT CURRENT_TIMESTAMP`列来记录插入行时的日期/时间。

```
... WHERE liability_category_id = 1 ORDER BY timestamp_default_current ASC 
```

这两种方法都是简单的列定义，不需要编写或维护任何程序代码。

# c#-4.0 - 在c#中使用构造函数

> ID：11507759
> 
> 赞同：1
> 
> 时间：2012-07-16T15:43:54.190
> 
> 标签：c#-4.0

我有一个具有 2 个属性和一个构造函数的类：

```
public class Card
{
    public int CardName {get;set;}
    public bool IsActive {get;set;}

    public Card (int cardName, bool isActive)
    {
        CardName = cardName;
        IsActive = isActive;
    }
} 
```

如何强制开发人员使用构造函数而不是执行以下操作：

```
var card = new Card{ CardName = "blab", IsActive = true }; 
```

顺便说一句，上面的语句叫什么？这是一个延迟加载语句吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:46:47.210

你已经有了。

由于没有空的构造函数，您已经删除了使用对象初始化方法创建对象的能力。

这个：

```
var card = new Card{ CardName = "blab", IsActive = true }; 
```

和这个一样

```
var card = new Card() { CardName = "blab", IsActive = true }; 
```

在这种情况下`new Card()`是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:03:00.007

这取决于您为什么要阻止有问题的语法。

对象初始值设定项语法是在构造后立即设置一堆属性的简写。也就是说，这个：

```
var c = new Card { CardName = "foo", IsActive = true }; 
```

在语义上与此相同：

```
var c = new Card();
c.CardName = "foo";
c.IsActive = true; 
```

在这两种情况下，构造*函数*都会运行，但紧随其后的是一系列属性初始化程序以应用于新对象。

在您的情况下，由于没有无参数构造函数，因此您不能按照您发布的方式使用对象初始值设定项语法。但是，将构造函数参数与对象初始化器一起传递*是合法的，因此以下内容对于您**的*类是合法的：

```
var c = new Card("", false) { CardName = "foo", IsActive = true }; 
```

（有人可能会争辩说，这种语法比简单地将值传递给构造函数更清楚地说明了值的含义；有人也可能会争辩说它过于固执：）我可以选择任何一种方式）

您可以通过删除这些属性的公共设置器来阻止第二种语法工作。例如，如果您的目标是防止用户更改传递给构造函数的值`Card`，例如创建一个不可变对象，那将是可行的方法。

不过，我应该指出，如果我的一个晚辈在工作中问我这个问题，我真的很想知道为什么他们发现有必要阻止使用对象初始化。当然，有正当的理由，但它们通常不是问题的根源。对象初始化器是一件好事——在某些情况下这种语法非常方便（尤其是使用 LINQ）并且我一直都在使用它。

如果您根据初始值在构造函数中进行某种设置，但这些属性是可公开设置的，那么您已经不得不处理用户在构造后更改这些值的情况。如果您的目标只是确保在第一次构造对象时发生一些“设置”代码，则将该代码放入默认构造函数并将它们链接在一起：

```
public class Card
{
  public string CardName { get; set; }
  public bool IsActive { get; set; }

  public Card() 
  { 
    // setup code here. 
  }

  public Card ( string name, bool active ) 
    : this()
  {
    this.CardName = name;
    this.IsActive = active;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:46:53.573

将属性的 getter 声明为“Private”。类似的东西`Public int CardName {private get; set;}`。

# visual-studio-2010 - 在 Excel 加载项、模板和工作簿之间进行选择？

> ID：11507762
> 
> 赞同：6
> 
> 时间：2012-07-16T15:44:02.380
> 
> 标签：visual-studio-2010, excel, ms-office, vba

我正在寻找一些高级帮助来确定用于 Excel 自定义应用程序的最佳 Visual Studio 2010 项目类型。

我将开发一个程序，要求用户以特定方式输入数据集。不使用表单本身，而是在列中，程序需要对项目进行一些自定义验证以准备数据。从那里，用户将能够通过自定义功能区和相关选项对数据进行各种操作。该程序还将通过网络服务传输数据。

我玩弄了加载项项目，这给了我很多我需要的东西，但我想知道模板或工作簿项目在数据输入和能够“指导”用户方面是否更好再来一点。

您如何选择要使用的项目类型？是否所有项目类型都支持自定义功能区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:09:43.870

对不起，如果这离主题太远了。我指的是 VBA，而不是 Visual Studio，但它可能仍然相关。

与工作簿相比，使用加载项，您可以将代码与用户数据分开。因此，如果代码很复杂，并且您需要将其与用户工作簿的数据分开更新，那么这不是一个坏主意。

使用插件，您可以添加按钮来执行检查以确保用户数据工作簿正常，或以某种方式对其进行处理。但是，每次用户打开任何 Excel 工作表时，都会加载 AddIn 自定义按钮。这听起来不太好，但在实践中，并没有那么糟糕。您可以对您的插件进行编码，因此只要没有人使用按钮，它就什么也不做，因此它几乎不会影响加载时间等...

如果您需要真正指导用户，工作簿可能会很有用 - 也就是说，您不能依赖用户点击按钮来验证某些内容，而是需要验证每个更改，例如。但是，工作簿解决方案将用户数据和您的代码合并到同一个工作簿中，因此如果您需要更新现有用户数据的代码，那就更难了。

我将 AddIn (.xlam) 与按钮和模板（仅包含最少的自描述数据）结合使用。

我不确定仅模板选项，因此不会对此发表评论。

# gpx - Microsoft Mappoint 为 .gpx 导出设置图钉名称

> ID：11507764
> 
> 赞同：0
> 
> 时间：2012-07-16T15:44:06.423
> 
> 标签：gpx, pushpin, mappoint

我正在尝试从 microsoft MapPoint 中导出大量图钉及其纬度/经度数据。正常导出到 excel 不包括纬度/经度信息，所以我试图通过 gpx 导出来规避这个问题。遗憾的是，图钉的名称似乎是“随机的”（使用门牌号），因此生成的 gpx 文件的可用性为零。

有没有办法在导入数据集时根据字段定义图钉的名称？

Hepl 非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:08:41.453

不确定最后一句是什么意思，但可以使用数据导入向导使用名称和名称 2 导入字段设置每个图钉的名称。

至于您的更大问题，您在一个编程站点上，所以我认为这是一个选项。您可以编写自己的导出器。经度和纬度信息可通过图钉的位置字段（属性：经度、纬度）获得。

或者，支持 PC 销售图钉工具，可以将图钉信息导出到 Excel 完成经度，纬度信息。

# c# - 使用嵌套循环正确加载数组时遇到问题

> ID：11507769
> 
> 赞同：1
> 
> 时间：2012-07-16T15:44:20.100
> 
> 标签：c#, xna

此 while 循环未将所需的值正确存储到矩形数组中。矩形用于从精灵表中拉出精灵。下面注释掉的代码完美运行。内循环非常适合设置第一行，但添加外循环会搞砸一切。sizeOfEachSpriteX 和 sizeOfEachSpriteY 的值都是 32（精灵是方形的）。spritesheet 大小为 96 宽 x 128 高。它是 4 行和 3 列的精灵。目标是将矩形声明为 Rectangles [哪一行，哪一列]，正如注释掉的代码所实现的那样。似乎后面的迭代会覆盖第一次迭代的数据，并破坏整个过程。我很困惑！

```
int n = 0;
int n2 = 0;
while (n2 < 5)
        {
            while (n < 4)
            {
                Rectangles[n2, n] = new Rectangle
                     (sizeOfEachSpriteX * n2, 
                      sizeOfEachSpriteY * n, 
                      sizeOfEachSpriteX, 
                      sizeOfEachSpriteY);
                n++;
            }
            n2++;
        }

/*   This code works perfectly.
        Rectangles[0,0] = new Rectangle(0,0,32,32);
        Rectangles[0,1] = new Rectangle(0,32,32,32);
        Rectangles[0,2] = new Rectangle(0,64,32,32);
        Rectangles[0,3] = new Rectangle(0,96,32,32);
        Rectangles[1,0] = new Rectangle(32,0,32,32);
        Rectangles[1,1] = new Rectangle(32,32,32,32);
        Rectangles[1,2] = new Rectangle(32,64,32,32);
        Rectangles[1,3] = new Rectangle(32,96,32,32);
        Rectangles[2,0] = new Rectangle(64,0,32,32);
        Rectangles[2,1] = new Rectangle(64,32,32,32);
        Rectangles[2,2] = new Rectangle(64,64,32,32);
        Rectangles[2,3] = new Rectangle(64,96,32,32);
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:47:57.417

您需要在每个内部 while 循环之前将 n 变量重置为 0，现在它达到 4，并且您的内部 while 循环将永远不会再次进入。

```
int n = 0;
int n2 = 0;
while (n2 < 5)
{
    n = 0;
    while (n < 4)
    {
        Rectangles[n2, n] = new Rectangle
                     (sizeOfEachSpriteX * n2, 
                      sizeOfEachSpriteY * n, 
                      sizeOfEachSpriteX, 
                      sizeOfEachSpriteY);
        n++;
    }
    n2++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:48:59.037

完成每个内部循环后，您需要将 n 重置为 0

```
int n = 0;
int n2 = 0;
while (n2 < 5)
    {
        n = 0;
        while (n < 4)
        {
            Rectangles[n2, n] = new Rectangle
                 (sizeOfEachSpriteX * n2, 
                  sizeOfEachSpriteY * n, 
                  sizeOfEachSpriteX, 
                  sizeOfEachSpriteY);
            n++;
        }
        n2++;
    } 
```

发生的情况是，对于 n2 > 0，n 已经是 4，因此永远不会执行内部循环。

# android - Android Lint：忽略库项目

> ID：11507771
> 
> 赞同：16
> 
> 时间：2012-07-16T15:44:33.923
> 
> 标签：android, android-lint

我有一个使用 ActionBarSherlock 库的项目。当我在我的项目上运行 Lint 时，我在 ActionBarSherlock 中收到很多错误和警告，我并不关心这些。

如何仅在我的项目上运行 Lint，而不是它使用的库？（注意：我正在使用“检查我的项目”选项）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T05:38:18.500

我假设您将 ActionBarSherlock 作为工作区中的一个单独的 Android 项目。如果是这样，您可以打开该项目的上下文菜单，使用*Properties -> Android -> Android Lint -> Ignore all*。

可以为整个工作区（使用*Window -> Preferences*）和单个项目（如上）设置 Eclipse 中的许多首选项，然后项目首选项会覆盖该特定项目的工作区首选项。

# android - Eclipse 显示错误，直到我清理

> ID：11507772
> 
> 赞同：0
> 
> 时间：2012-07-16T15:44:35.763
> 
> 标签：android, eclipse, adt

![在此处输入图像描述](../Images/49ec77bf1b4e6c2d02e82753da3b3bc3.png)

这开始让我发疯了。我正在开发一个 android 项目，正如人们所料，我每隔一段时间就会出错。Eclipse 向我显示了“标记”面板中的错误。问题是，当我修复错误时，它们不会从面板中消失。如果我尝试调试，它会告诉我我的应用程序有错误，我需要修复它们。

如果我选择 Project -> Clean，所有错误都会消失。然而，当我必须每隔几分钟做一次时，这开始成为一种真正的痛苦。

我已经检查了自动构建，当我保存时，我等待几秒钟以确保一切都有时间调整，但错误仍然存​​在。

还有其他人有这个问题吗？有人知道修复吗？

版本：Juno 发布版本 ID：20120614-1722 ADT：20.0.0.v201206242043-391819

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T18:03:41.637

编辑：这已在 ADT 20.0.1 中修复，因此请更新您的 Eclipse 插件。

* * *

这是ADT 20[中 Android Lint](http://code.google.com/p/android/issues/detail?id=33985)中的一个错误。如果您在出现 Java 语法错误时点击保存按钮，它会“保存”来自 JDT 的 Java 相关错误。

您可以点击 Android Lint 视图中的“删除所有警告”按钮来消除那些错误的警告。Lint 将在下次运行期间重新创建正确的警告。如果你真的每隔几分钟就会遇到这个问题，最好的办法是在下一个版本之前禁用 Android Lint（该错误已在 ADT 开发人员构建中修复）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:45:36.173

我一直有这个问题。我可以按照您的建议进行操作 - 或者 - 右键单击​​项目并选择 Android 工具 > 运行 Lint - 或者 - 我可以剪断该行并重新粘贴它。所以很明显这是 Lint 集成的一个问题。我会尝试你关于更新 Android 开发者工具的建议。我目前有 20.0.0，所以可能就是这样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T15:48:29.617

也许您的项目已损坏。尝试生成一个新文件并再次将所有文件添加到其中。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-16T15:46:56.817

是的，这是eclipse的常见问题。有时您需要清理项目。但是在重新启动/安装 eclipse 后问题可以被克服.. 但这是常见的问题。

# android - 在选项卡布局中使用两窗格片段

> ID：11507779
> 
> 赞同：3
> 
> 时间：2012-07-16T15:44:53.323
> 
> 标签：android, tabs, fragment

我正在尝试制作这个东西 2 天，但我不知道如何解决它。解释：

我重新制作了应用程序的导航界面，并且我想最好地使用 Google UI 指南。所以我想在片段标签导航中包含一个两窗格片段（又名“主/详细信息流”）！这就是问题所在。

我使用最新的 ADT 插件提供的示例进行了尝试（对于简单的选项卡活动和主/详细信息。我也尝试使用 ActionBarSherlock 库。但我的尝试都没有功能活动。

我从 4 或 5 个小时开始浏览网络，寻找接近我正在寻找的解决方案的东西。有人对两个如何使它成为可能有一点想法吗？

提前感谢您的时间！

**编辑：** 这是可以渲染的内容的安装。选项卡管理两个或多个片段，并且在一个片段的选项卡中，还有另外两个片段。

![在此处输入图像描述](../Images/b588b8350d2e2c6f841f4153835d1070.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T16:50:01.967

我之前尝试过做类似的事情。不幸的是，Android 不支持嵌入式片段。

当您单击一个选项卡时，它会启动一个片段。在这个单一片段内部，您还有两个片段（主（侧导航）片段和详细片段）。这不是 Android 原生支持的，每个片段的生命周期会相互冲突，并给您运行时（强制关闭）错误。

有两种解决方法。

首先，您可以通过显式保存和恢复其状态来操纵每个嵌入片段的生命周期，但这很复杂，并且可能会导致更多错误和麻烦。

第二个优选的解决方案是用单个片段内的框架布局替换两个嵌入的片段。每个框架都将包含一个视图，您可以在框架外交换视图。如果使用太多视图，这将损害性能。如果视图保持相对简单，那么它不会减慢太多。

可能您可以重新考虑整个设计并简化它。IE 只需使用 Tabs+一级片段或使用不带标签的主从布局。

希望这可以帮助！

# xml - 从具有空父元素的 xml 元素创建元素

> ID：11507781
> 
> 赞同：0
> 
> 时间：2012-07-16T15:44:55.297
> 
> 标签：xml, xslt

我正在尝试使用 xslt 创建一个 xml。

这是将要转换的 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <document>
        <document_head>
            <title>This is the title</title>
            <version>This is the title</version>
        </document_head>
        <document_body>
            <paragraph id="TDKR">
                <text>
                    Oh no!, you're not Silvia, you're one of the kung fu creatures on the rampage... Two!
                </text>
                <properties>
                    <size>13px</size>
                    <color>#000000</color>
                </properties>
                <author>Current user</author>
            </paragraph>
            <paragraph id="AAHD">         
                <properties></properties>       
            </paragraph>
        </document_body>
    </document> 

```

这就是我需要的：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <document>
        <document_head>
            <title>This is the title</title>
            <version>This is the title</version>
        </document_head>
        <document_body>
            <paragraph>           
                <properties id="TDKR">
                    <size>13px</size>
                    <color>#000000</color>
                </properties>         
            </paragraph>
            <paragraph>           
                <properties id="AAHD">
                    <size></size>
                    <color></color>
                </properties>
            </paragraph>
        </document_body>
    </document> 

```

这是我拥有的 XSLT：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
        <xsl:output method="xml" indent="yes" omit-xml-declaration="no" />

        <!--START Identity transformation-->
            <xsl:template match="@*|node()">
                <xsl:copy>
                    <xsl:apply-templates select="@*|node()"/>
                </xsl:copy>
            </xsl:template>
        <!--END__ Identity transformation-->

        <!--START Copy of paragraph ID Attribute-->
            <xsl:template match="paragraph/properties" >
                <xsl:copy>
                    <xsl:apply-templates select="../@id | @* | node()"/>
                </xsl:copy>
            </xsl:template>
            <xsl:template match="paragraph">              
                <xsl:copy>
                    <xsl:apply-templates select="node()"/>
                </xsl:copy>
            </xsl:template>
        <!--END__ Copy of paragraph ID Attribute-->

        <!--START Filter of undesired elements--> 
            <xsl:template match="paragraph/text" />
            <xsl:template match="paragraph/author" />
        <!--END__ Filter of undesired elements--> 

        <!--START Creation of empty elements-->
            <xsl:variable name="empty" select="''"/> 

            <xsl:template match="*[not(node())]">
                <xsl:copy>
                    <xsl:apply-templates select="@* | node()" />
                    <xsl:value-of select="$empty"/>
                </xsl:copy>
            </xsl:template>
        <!--END__ Creation of empty elements-->
    </xsl:stylesheet> 

```

这就是转换产生的结果：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <document>
        <document_head>
            <title>This is the title</title>
            <version>This is the title</version>
        </document_head>
        <document_body>
            <paragraph>           
                <properties id="TDKR">
                    <size>13px</size>
                    <color>#000000</color>
                </properties>         
            </paragraph>
            <paragraph>           
                <properties/>     
            </paragraph>
        </document_body>
    </document> 

```

谁能告诉我我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:04:40.197

轻松一...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="text|author|paragraph/@id" />

<xsl:template match="properties">
 <xsl:copy>
   <xsl:apply-templates select="@*"/>
   <xsl:attribute name="id"><xsl:value-of select="../@id" /></xsl:attribute>
   <xsl:apply-templates select="node()[not(self::size|self::color)]"/>
   <size>
     <xsl:apply-templates select="size/@*|size/node()" /> 
   </size>
   <color>
     <xsl:apply-templates select="color/@*|color/node()" /> 
   </color>
 </xsl:copy>  
</xsl:template>

</xsl:stylesheet> 
```

# c++ - direct x 11 智能地创建顶点缓冲区

> ID：11507782
> 
> 赞同：3
> 
> 时间：2012-07-16T15:45:02.410
> 
> 标签：c++, directx-11

我有一个难题，简直把我难住了。假设我有几个着色器，它们都具有不同的顶点类型，如下所示：

```
// light shader
struct vertexInputType
{
    float4 position : POSITION;
    float2 tex : TEXCOORD0;
    float3 normal : NORMAL;
};

// color shader
struct vertexInputType
{
    float4 position : POSITION;
    float4 color : COLOR;
};

// bump mapping shader
struct vertexInputType
{
    float4 position : POSITION;
    float2 tex : TEXCOORD0;
    float3 normal : NORMAL;
    float3 binormal : BINORMAL;
    float3 tangent : TANGENT;
}; 
```

现在假设我有一个包含所有这些数据的模型。我不能完全将它们全部放在同一个缓冲区中并按照我选择的所有 3 个进行渲染，因为数据没有为所有这些缓冲区正确布局。我只看到两个选项可以使这成为可能，它们都一样痛苦。

1）我可以在 ram 中有一个大缓冲区来保存所有数据，然后每次绘制调用，我从着色器对象中获取顶点类型并创建一个具有正确信息的新顶点缓冲区。如您所见，这将非常缓慢。

或者...

2) 我可以在模型初始化时创建多个 ID3D11Buffers，其中一个缓冲区具有位置和颜色，一个具有位置、texcoord 和法线，一个具有位置、texcoord、法线、副法线和切线，以及所需的尽可能多的缓冲区对于模型具有信息的任何其他顶点类型。相比之下，这会抹杀您可用的 vram，也使其成为 nog​​o。

我看不出有任何其他方法可以做到这一点。你们其他 d3d 人是如何做到这一点的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:00:22.783

您在 DX11 上下文中询问此问题是一件好事 - [ID3D11InputLayout](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476575%28v=vs.85%29.aspx)与以前的版本相比，大大简化了这个概念。您可以使用[CreateInputLayout](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476512%28v=vs.85%29.aspx)创建顶点数据的多个布局（一个用于您上面提供的每个结构），并在您希望以不同方式解释相同顶点缓冲区的点处使用正确的布局调用[IASetInputLayout 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476454%28v=vs.85%29.aspx)

编辑：[在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205117%28v=vs.85%29.aspx#Create_the_Input_Layout)查看创建 Input-Layout 对象的示例。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:58:42.550

诀窍是将数据分成流：P、T、A。

流 P 包含位置和法线。需要此数据来渲染带有光照的顶点。您还可以包括副法线和顶点颜色数据。

流 T 包含纹理信息，因此最多可以是 8 个 TU 通道。应注意存储在此流中编码的通道数，以确保不会浪费内存带宽在 GPU 总线上复制空通道。

流 A 包含动画信息、骨骼权重等。

根据渲染管道的架构，您可以拥有更多或更少的通道。这里的诀窍是使用 FVF 动态定义您的数据布局。这种架构的一个优点是优化内存带宽使用。当需要多个渲染通道但并非每个通道都需要所有数据时，这尤其重要。

# sql - 显示引用名称而不是同一表中的 ID

> ID：11507783
> 
> 赞同：2
> 
> 时间：2012-07-16T15:45:02.310
> 
> 标签：sql

我有一个名为employee 的表，其主键列ID 和一个名为supervisorID 的列，它是对引用一个人的同一个表的引用。我想将 supervisorID 显示为其引用的人名而不是 ID。

我想从表employee 中选择*，但将SupervisorID 引用为同一张表中的人名。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T15:58:53.933

```
SELECT e.ID, e.name AS Employee, s.name AS Supervisor 
FROM employee e 
  INNER JOIN employee s 
  ON s.ID = e.supervisorID 
ORDER BY e.ID; 
```

* * *

这里有更多关于如何测试的颜色：

```
mysql> CREATE TABLE employee (ID INT NOT NULL AUTO_INCREMENT, supervisorID INT NOT NULL DEFAULT '1', name VARCHAR(48) NOT NULL, PRIMARY KEY (ID));
Query OK, 0 rows affected (0.01 sec)

mysql> INSERT INTO employee VALUES (1, 1, "The Boss"), (2,1, "Some Manager"), (3,2, "Some Worker"), (4,2, "Another Worker");
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> SELECT e.ID, e.name AS Employee, s.name AS Supervisor
FROM employee e INNER JOIN employee s
ON s.ID = e.supervisorID ORDER BY e.ID;
+----+----------------+--------------+
| ID | Employee       | Supervisor   |
+----+----------------+--------------+
|  1 | The Boss       | The Boss     |
|  2 | Some Manager   | The Boss     |
|  3 | Some Worker    | Some Manager |
|  4 | Another Worker | Some Manager |
+----+----------------+--------------+
4 rows in set (0.01 sec)

mysql> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:46:52.033

就像是：

```
SELECT e.name as 'employee name', supervisors.name as 'supervisor name'
FROM employee e
INNER JOIN employee supervisors ON e.ID = supervisors.supervisorID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:46:55.753

根据 ID 进行自加入

```
select e.*, s.name
from 
  employee e
  inner join employee s
    on e.supervisorid = s.id 
```

# c++ - 线程包装器实现问题

> ID：11507787
> 
> 赞同：0
> 
> 时间：2012-07-16T15:45:26.823
> 
> 标签：c++, multithreading

我正在围绕 win32 线程和 pthreads 做一个包装类，其风格类似于 c++11 线程 api。我的问题是关于在实际线程退出时更新线程对象实例。以下是我的解决方案，但我不确定它是否安全。

```
/* Thread wrapper class */
    class Thread
    {
    public:
        enum ThreadState
        {
            DETACHED = 0,
            RUNNING
        };

        Thread();
        Thread(void* (*start) (void*), void* arg);
        ~Thread();

        Thread& operator=(Thread& other);
        void Join();
        int32_t SetPriority(int32_t priority);
        void Detach();
        ThreadHandle GetNativeHandle();
        ThreadState GetThreadState();

    private:
        ThreadHandle mHandle;
        ThreadState mState;
        void* (*mFunctionPointer) (void*);
        void* mArg;

        static void* Run(void* arg);
        ThreadHandle _CreateThread(void* (*start) (void*), void* arg);
        void _JoinThread(ThreadHandle& handle);

    }; 
```

第二个构造函数启动一个线程。这是实现：

```
 Thread::Thread(void* (*start) (void*), void* arg)
    {
        mFunctionPointer = start;
        mArg = arg;
        mState = Thread::RUNNING;

        mHandle = _CreateThread(&Run, (void*)this);
        if (!mHandle)
            mState = Thread::DETACHED;
    } 
```

它创建一个运行 Run 方法的线程，并传递一个指向该对象实例的指针。原因是一旦线程执行了函数，它就会将状态设置为 DETACHED 以表示它已完成。

这是运行方法

```
 void* Thread::Run(void* arg)
    {
        Thread* thread = static_cast<Thread*>(arg);

        if (thread && thread->mFunctionPointer && thread->mArg && thread->mState == Thread::RUNNING)
            thread->mFunctionPointer(thread->mArg);

        if (thread && thread->mFunctionPointer && thread->mArg && thread->mState == Thread::RUNNING)
            thread->Detach();

        return NULL;
    } 
```

这也是 Detach()，它也在线程析构函数中调用：

```
 void Thread::Detach()
    {
        mState = Thread::DETACHED;
        mHandle = NULL;
        mArg = NULL;
        mFunctionPointer = NULL;
    } 
```

我觉得这根本不安全。例如，如果 Thread 对象是在堆栈上构造的，并且在其线程运行时超出范围。Thread 对象析构函数将其状态和数据成员设为 NULL，但内存位置可能会被覆盖，不是吗？

有什么好的方法可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:54:10.183

如果 Thread 实例超出范围而之前没有加入线程，那么你注定要失败。使 Run() 成为一个免费或静态函数并复制所有数据，该函数需要运行到动态分配的内存中并让 Run() 释放该内存。

在 Run() 中不需要进行如此多的测试。由于您的 c'tor 参数已经与 CreateThread() 兼容，只需将函数和参数传递给 CreateThread 就可以了。

亲切的问候

托尔斯滕

# sql-server - 在 SSIS 中，当定义一个固定的平面文件长度平面文件连接时，有没有办法以编程方式定义列？

> ID：11507791
> 
> 赞同：6
> 
> 时间：2012-07-16T15:45:40.857
> 
> 标签：sql-server, ssis

昨天我不能和我四岁的孩子一起玩。你为什么不问？

因为我有一个 150 列的固定长度文件，我需要在 SSIS 中配置它以导入 SQL Server 数据库。

我知道如何做到这一点，但无法以编程方式定义列让我发疯。这比看美国偶像重播还要糟糕。

在“Flat File Connection Manager Editor”中，我将格式设置为“Ragged right”，勾选“Column names in the first data row”。

然后在列选项卡中有定义列的界面。

我在 excel 电子表格中有列定义。我知道列名和确切长度。

但是为什么以宙斯的名义，我必须手动点击那个愚蠢的小尺子150次

我应该能够编写脚本。

我的意思是坐在那里绝对令人麻木地点击列。本来应该花一个小时的事情却花了我三个小时，因为每三列左右，编辑器就会把我弹回到行首，迫使我滚动回到原来的位置（啊！！！！！！）。

我什至打开了 SSIS package.dtsx 文件，看看是否可以在 Visual Studio 之外对其进行编辑，但是 DTSID 属性旁边的 GUID 值否定了这个绝妙的想法。

所以我亲爱的 StackOverFlow 社区有没有办法以编程方式定义固定长度的平面文件连接，从而跳过手动单击 150 列的乐趣？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T23:32:52.680

是：http: [//blogs.msdn.com/b/mattm/archive/2008/12/30/samples-for-creating-ssis-packages-programmatically.aspx](http://blogs.msdn.com/b/mattm/archive/2008/12/30/samples-for-creating-ssis-packages-programmatically.aspx)

您通常会使用 Microsoft.SqlServer.Dts.* 类通过 .NET 打开现有（模板）包，添加连接管理器和列，然后保存包以供进一步手动调整。

# java - 为什么我们不能在 Map(Java) 上使用迭代器？

> ID：11507794
> 
> 赞同：3
> 
> 时间：2012-07-16T15:45:52.550
> 
> 标签：java

我知道要遍历 a `Map`，我需要使用该`entrySet()`方法，然后`Iterator`在结果上使用`Set`。我觉得这个问题可能很愚蠢，但是，究竟是如何`Map`实现的`Iterator`，所以直接使用它是不可能的？据我了解，`Map`它不是一个集合，`Iterator`而是用于集合。但从逻辑上讲，不`Map`也是键值对的集合吗（虽然它没有实现`Collection`接口）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T15:49:23.297

AFAIK，您不能直接迭代 Map，因为 Map 支持三种类型的迭代，并且没有明确的理由选择其中一种。做同样`entrySet().iterator()`的事情可能是合理的，但这不是做出的选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T15:47:52.417

您要迭代条目（键+值）还是仅迭代键或仅迭代值？这就是您获取特定集合并获取迭代器的原因。

由于键/条目是唯一的（不存在重复的元素），因此您可以通过`entrySet()`and获得一个集合`keySet()`。而且由于值可以有重复项，因此您可以通过获取集合`values()`，然后从中获取迭代器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T15:52:10.737

Collection 实现了 Iterator，Map 虽然**不属于** `java.util.Collection`，但仍然在 Collection 框架中考虑。

这就是我用来迭代地图的方法

```
for (Map.Entry<Integer, Integer> entry : map.entrySet()) {
    System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-25T14:22:49.970

这取决于程序员寻求迭代的价值。要么只是键或值，要么两者兼而有之。基于此，我们可以迭代三个不同的对象。示例：`mapObject.keySet().iterator()`; 或`mapObject.values().iterator()`；或`mapObject.entrySet().iterator()`。唯一要记住的是，当我们遍历`values()`集合时，我们不会以任何方式获得相应的键。

# c# - 适当的类结构c#

> ID：11507795
> 
> 赞同：1
> 
> 时间：2012-07-16T15:45:54.110
> 
> 标签：c#, oop, inheritance

我需要一些关于为一个应用程序构建类的建议，该应用程序模拟 6 种不同但相似的类型。这 6 种类型都有一些属性和方法，它们都将共享。还有一些属性和方法，它们中的 3、4 或 5 个将共享但对其他人没有意义。

目前，我有一个抽象基类：

*   所有子类将使用的属性和方法，已经实现。
*   一些子类将使用的方法标记为抽象，在子类中实现。
*   一些子类将使用的属性标记为可为空，以便不使用该属性的子类可以为空。

不过，这似乎不是最好的解决方案。我觉得我已经提供了足够的细节，但如果这没有意义，请告诉我，我会尽力提供更好的描述。

**编辑——添加代码示例**

```
public abstract class BaseClass
{
    //all classes inheriting from BaseClass would use these properties
    public string Property1{ get; set; }
    public string Property2{ get; set; }

    public void Method1() {
        //all classes inheriting from BaseClass would use this method
    }

    //more than one class (but not all classes) 
    //  inheriting from BaseClass would use these properties
    public int? Property3 { get; set; }
    public bool? Propert4 { get; set; }

    public abstract void Method2() {
        //more than one class (but not all classes) 
        //  inheriting from BaseClass would use this method

        //those not using this method would have empty getters and setters maybe?
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:49:20.253

> 不过，这似乎不是最好的解决方案。我觉得我已经提供了足够的细节，但如果这没有意义，请告诉我，我会尽力提供更好的描述。

细节很少，但听起来你最好在你的类层次结构中拥有一个单独的“层”。

类 3、4 和 5 可以派生自一个单独的抽象类，而后者又继承了您的“基”类。这将消除类 1 和 2 在其中包含“未使用”的方法和属性的需要。

基本上，“某些子类将使用的属性标记为可空，以便不使用该属性的子类可以为空”不会在基类中，而是添加到子类中，而子类又是3、4 和 5 的子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:49:58.460

您应该详细说明层次结构以避免使用可空值。你应该创建

1.  包含其他公共属性的中间子类或
2.  声明一个实现公共属性的接口，并让这些类实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:51:36.540

你知道你可以这样继承吗？

```
 ****************************                          
                *                          *                          
                *         FooBase          *                          
                *                          *                          
                ****************************                          
                    .                 .
                   .                   .
                  .                     .
          **************            *****************                 
          *            *            *               *                 
          *   FooA     *            *    FooB       *                 
          *            *            *               *                 
          *            *            *               *                 
          **************            *****************                 
           .       .                           .                      
          .         .                           .                     
         .           .                           .                    
        .             .                           .                   
  **************   **************            **************           
  *            *   *            *            *            *           
  *            *   *            *            *            *           
  *  FooA_a    *   *   FooA_b   *            *  FooB_a    *           
  *            *   *            *            *            *           
  *            *   *            *            *            *           
  *            *   *            *            *            *           
  **************   **************            ************** 
```

那么，当您可以在 FooA 而不是 FooBase 中实现它们时，为什么还要添加可为空的属性呢？

**编辑**
所以[Reed Copsey](https://stackoverflow.com/a/11507848/215042)和[Felice Pollano](https://stackoverflow.com/a/11507861/215042)打败了我，因为我在画东西：P

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T15:52:00.410

为什么要使用子类化？让您的抽象基类仅具有所有类型共享的方法。将其他方法拉入单独的类中，让需要该功能的类与提取的类协作。这创造了更好的内聚和更松散的耦合。

# java - 在 Java GUI 中使用 Python

> ID：11507800
> 
> 赞同：2
> 
> 时间：2012-07-16T15:46:18.557
> 
> 标签：java, python, swing, user-interface

我在 java swing 中制作了一个 GUI，但是我为该 GUI 的功能制作了许多 python 脚本，无论如何我可以使用我的 python 脚本在 Java Swing GUI 界面中显示内容吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:48:39.490

查看 Jython ( [http://www.jython.org/](http://www.jython.org/) )

这是Java中的python实现。

理论上你不应该改变你的python代码（如果它“质量好”），但实际上我建议你必须在这里和那里做一些改变。我个人不使用 Jython，但所有各种 python 实现通常或多或少兼容，但并不完全相同。您将无法使用依赖于 C ABI 的 python 库，但纯 python 脚本应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:15:51.340

您可能不想为您的应用程序的最终版本执行此操作，但为了快速而肮脏的方法，您可以在 java 中运行外部程序并捕获输出。（我之前在将程序从 python 移植到 java 的过程中使用过这个，想在 java 后端完成之前查看 java 前端是否工作，而不用担心替换 CPython 模块。）这个示例程序运行 python 程序`test.py`并打印输出：

```
import java.io.*;

class Jexec{
    public void Jexec(){}

    private String exec(String execStr){
    try{
        // run process and capture stdout
        Process p = Runtime.getRuntime().exec(execStr);
        InputStream s = p.getInputStream();

        // convert stdout to a string
        BufferedReader br = new BufferedReader(new InputStreamReader(s));  
        StringBuffer sb = new StringBuffer(); 
        String line;  
        while ((line = br.readLine()) != null) {  
        sb.append(line).append("\n");  
        }  
        String output = sb.toString();  

        p.destroy();
        return output.toString();

    }catch(Exception e){
        //actually handle the error here
        e.printStackTrace();
        return String.format("*** Running \"%s\" failed. ***",execStr);
    }
    }

    public static void main(String[] args){
    Jexec je = new Jexec();
    System.out.println(je.exec("python test.py")); //in your case, you would use the output instead of just printing it
    }
} 
```

这是超级不完整的，所以，再次，我只会将它用于临时测试目的。但对于这些情况，它确实很有帮助。

# c++ - C++ 模板主题观察者继承/转换冲突

> ID：11507802
> 
> 赞同：0
> 
> 时间：2012-07-16T15:46:30.867
> 
> 标签：c++, templates, inheritance, shared-ptr

我正在使用示例[http://www.codeproject.com/Articles/3267/Implementing-a-Subject-Observer-pattern-with-templ](http://www.codeproject.com/Articles/3267/Implementing-a-Subject-Observer-pattern-with-templ)来实现模板化的主题/观察者模式。但是，我遇到了令人讨厌的编译错误，看起来继承不起作用，或者奇怪的演员表。任何帮助都会很棒。帖子底部是导致问题的行。

错误

```
FooManager.h: In member function
    'ReturnEnum FooManager::AddBar(BarPtr)':

Foo.h:150: error: no matching function for call to
    'Bar::attach(FooManagerPtr)'

Subject.h:23: note: candidates are: 
    void Subject<T>::attach(Observer<T>) [with T = boost::shared_ptr<Bar>] 
```

编码

类型.h

```
class Bar;
typedef boost::shared_ptr<Bar> BarPtr;

class FooManager;
typedef boost::shared_ptr<FooManager> FooManagerPtr; 
```

观察者.h

```
#include "types.h"
template <class T>
class Observer
{
    public:
        Observer(){}
        virtual ~Observer() {}
        virtual void update(T subject) = 0;
}; 
```

主题.h

```
#include "types.h"
template <class T>
class Subject
{
    private:
        vector< Observer<T> > m_observers;

    public:
        Subject() {}
        virtual ~Subject() {}
        void attach(Observer<T> observer)
        {
            m_observers.push_back(observer);
        }

        void notify()
        {
            for(vector< Observer<T> >::iterator it = m_observers.begin(); it != m_observers.end(); ++it)
            {
                (*it)->update(static_cast<T>(this));
            }
        }
}; 
```

酒吧.h

```
#include "types.h"
class Bar             : public Subject<BarPtr>
{
}; 
```

FooManager.h

```
#include "types.h"
class FooManager                : public Observer<BarPtr>
{
    public:
        ReturnEnum AddBar(BarPtr pBar)
        {
            pBar->attach( FooManagerPtr(this, boost_null_deleter()) );
        }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:59:03.767

根据您想要实现的目标，您可以尝试更改（警告，未经测试的代码！）：

```
 void attach(Observer<T> observer)
    {
        m_observers.push_back(observer);
    } 
```

到

```
 void attach(boost::shared_ptr<Observer<T>> observer)
    {
        m_observers.push_back(observer);
    } 
```

和

```
vector< Observer<T> > m_observers; 
```

到

```
vector< boost::shared_ptr<Observer<T> > > m_observers; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:00:52.710

`pBar`指向`Bar`实例，所以`attach()`期望`Observer<BarPtr>`，而您通过`shared_ptr<Observer<BarPtr> >`。

（顺便说一句，如果您已经使用了 boost，那么使用 Boost.Signals2 不是更好吗？）

# java - 链接列表到文件

> ID：11507806
> 
> 赞同：-1
> 
> 时间：2012-07-16T15:46:42.987
> 
> 标签：java

所以基本上我需要制作一个存储 cd 信息的程序，我需要将它写入文件。我需要能够：

添加、编辑或删除信息

所以我使用了链接列表，但是当写入文件时，内容有点粗制滥造。

另外，每次我想添加更多信息时，它都会覆盖信息。

这就是我迄今为止所拥有的。

```
 public class Project1
{
    static String userIn;   //Determines what the user wants to do in the application

    static String[] info = new String[] {};     //Stores album info

    static LinkedList <String> list = new LinkedList<String> ();        //Array that stores the info to file

    static Scanner scan = new Scanner(System.in);                       //Takes input from keyboard

    static String album;                //Takes in the album name

    static String artist;               //Takes in the artist name

    static String date;                 //Takes in the release date of the album

    static  FileWriter fstream;         //Used to write to file

    static BufferedWriter out;          //Used to write to file

    static String file_name ;           //The name of the file is stored 

    static String search ;              //Takes input 

    public void welcome()           //Main menu of the program where user makes selection

            {//Method will be used as a main menu asking the user what he/she would like to do

                System.out.println("*****MAIN MENU*****");
                System.out.println("");
                System.out.println("To add your album to the system please enter the word add");
                System.out.println("");
                System.out.println("To edit a album in your collection please insert the word edit");
                System.out.println("");
                System.out.println("If you would like to delete a album please insert the word delete");
                System.out.println("");
                System.out.println("To search for a particular album by the CD name please insert the word cd");
                System.out.println("");
                System.out.println("To search for your album by artist name insert the word artist");

                userIn = scan.next();       //Takes user input to decide what action to take

            }//Close of welcome method (Serving as main menu)

        public void adding()                //Used to add info to the linked list
            {//Start of adding method
                if(userIn.equals("add"))    //Starts the add method
                {//Start of if statement

                    System.out.println("*****ADD MENU*****");
                    System.out.println("Please enter the name of the artist");
                    artist = scan.next();   //Stores the artist name
                    System.out.println("Please enter the album name");
                    album = scan.next();    //Stores the album name
                    System.out.println("Please enter the release date");
                    date = scan.next();     //Stores the release date

                    list.add(artist);       //Adds the artist variable to file
                    list.add(album);        //Adds album variable to file
                    list.add(date);         //Adds the date variable to file

                    System.out.println("Album name,Artist Name,Date of release " + list);   //Displays the linked list

                    System.out.println();   //Prints Blank Line

                    file_name = "output.txt";       //File where info is stored to

                     try 
                    {//Start of try and catch method to catch fileNotFound Exception

                         fstream = new FileWriter(file_name);       //Creates an instance of the fileWriter class

                         out = new BufferedWriter(fstream);         //Creates instance of the BufferedWriter class

                         out.write(artist);                 //Adds artist variable to file

                         out.write(album);                  //Adds album variable to file

                         out.write(date);                   //Adds date variable to file

                         out.close();                       //Closes the input stream
                    } 
                     catch (IOException e)                  //Catches FileNotFoundException
                    {
                        e.printStackTrace();

                    }//End of try/catch

                }//End of if statement              

            }//End of adding method

                public void edit()
                    {//Starts the edit method
                        if(userIn.equals("edit"))
                        {//Start of if statement which searches for the album through a matching word

                            System.out.println("*****EDIT MENU*****");

                            System.out.println("Please enter the name you would like to edit");

                            search = scan.next();       //Takes input to match files that need to be edited

                            if(search.equals(album))    //Matches the name the user wants edited to the name in the list
                            {//Start the if statement that 

                                System.out.println(list);       //Displays the list containing the info

                                list.removeAll(list);           //Removes all the input to allow user to edit

                                System.out.println("Please enter new name of the artist ");     
                                artist = scan.next();   //Allows user to add a new artist
                                System.out.println("Please enter new album name ");
                                album = scan.next();    //Allows user to add a new album
                                System.out.println("Please enter new release date");
                                date = scan.next();     //Allows user to add a new release date

                                list.add("," + artist);     //Adds the artist variable to the linked list
                                list.add("," + album);      //Adds the album variable to the linked list
                                list.add( date);            //Adds the date to the variable to the linked list

                                System.out.println("Album name,Artist Name,Release Date" + list);       //Displays the Linked List

                                  try 
                                    {//Start of try and catch method to catch fileNotFound Exception

                                         fstream = new FileWriter(file_name);       //Creates an instance of the fileWriter class

                                         out = new BufferedWriter(fstream);         //Creates instance of the BufferedWriter class

                                         out.write(artist);                 //Adds artist variable to file

                                         out.write(album);                  //Adds album variable to file

                                         out.write(date);                   //Adds date variable to file

                                         out.close();                       //Closes the input stream
                                    } 
                                     catch (IOException e)                  //Catches FileNotFoundException
                                    {
                                        e.printStackTrace();

                                    try 
                                    {//Start
                                        out.close();        //Closes the stream 
                                    }//End 
                                    catch (IOException z) 
                                    {//Start of catch statement
                                    z.printStackTrace();
                                    }//End of try catch

                                    }

                                    }//End of if statement
                                    else
                                    {//Start of 

                                    System.out.println("Album not found");      //Displays if the user input could not be linked to info in the linked list

                                }//End of if else statement

                        }//End of if statement     

                }//End of method

                public void delete()        //Used to delete info from the linked list
                {//Start of delete method
                    if(userIn.equals("delete"))
                    {//Matches user input to verify if correct method

                        System.out.println("*****DELETE MENU*****");

                        System.out.println("Please enter the name to delete");

                        search = scan.next();   //Takes in the name to match with linked list   

                        System.out.println("To continue insert 1");

                        int uSure = scan.nextInt(); //Takes input to verify if deletion is desired

                        if(uSure==1)
                        {//Starts 

                            System.out.println("Please enter the name of the album you would like to delete");  //Displays the file contents to the user
                            list.removeAll(list);       //Deletes the contents of the list

                        }//End of second if statement

                        if(search.equals(album))
                        {//Searches for info in linked list according to user input.
                            System.out.println(list);
                            list.remove();  //Removes info from the linked lists
                            System.out.println("Album deleted");

                          try 
                            {//Start of try and catch method to catch fileNotFound Exception

                                 fstream = new FileWriter(file_name);       //Creates an instance of the fileWriter class

                                 out = new BufferedWriter(fstream);         //Creates instance of the BufferedWriter class

                                 out.write(artist);                 //Adds artist variable to file

                                 out.write(album);                  //Adds album variable to file

                                 out.write(date);                   //Adds date variable to file

                                 out.close();                       //Closes the input stream
                            } //end of try 
                             catch (IOException e)                  //Catches FileNotFoundException
                            {
                                e.printStackTrace();

                            }//End of try/catch
                    }
                    else
                    {
                        System.out.println("Album not found");
                    }//End of if statement

                }//End of first if statement

            }//End of method    

            public void search()
            {//Start of search method

                if(userIn.equals("search"))                     
                {//Matches user input to verify if correct method
                    System.out.println("*****SEARCH MENU*****");

                    System.out.println();               //Prints out a blank line

                    System.out.println("Please insert the name of the album");

                    search = scan.next();               //Takes user input

                    if(album.equals(search))            //Matches user input to info in linked list
                    {
                    System.out.println(list);       //Matches user search to info in linked list
                    }
                    else
                    {//Ends the if statement

                    System.out.println("Album name could not be found");  //Displayed if user input could not be matched with info in the linked list

                }//End of second if statement

              }//End of first if statement

         }//End of search method

            public static void main(String [] args) throws IOException 
            {//Starts the main method which runs the application

            Project1 cd = new Project1();       //Making an instance of the class

            cd.welcome();   //Runs the welcome method
            cd.adding();    //Runs the adding method
            cd.edit();      //Runs the edit method
            cd.delete();    //Runs the edit method
            cd.search();    //Runs the search method

        }//End Of Main method

}//End Of Class 
```

如果有更多帮助，我还尝试使用数组列表进行一些尝试

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:49:58.667

如果文件不需要人工编辑或有性能限制，您可以使用[Java 的序列化](http://www.tutorialspoint.com/java/java_serialization.htm)将数组写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:53:23.013

如果要编辑或删除，则必须覆盖所有内容。您只添加一个条目。有一个方法可以在添加、编辑或删除条目后将 LinkedList 的所有内容重新写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T16:00:40.277

**1.**如果是**同一个java程序写入和读取**的信息，则使用**序列化**。

**2.**其他使用文件。

**3.** 您需要追加数据而不是在文件中覆盖它。

```
 File f = new File("d:\\viv.txt");
  FileWriter fw = new FileWriter(f, true);  // true is to enable appending
  BufferedWriter bw = new BufferedWriter(fw);

  bw.append("hello"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T16:03:22.703

除了已经提到的文件内容之外，您还有几个问题。这些字符串通过引用添加到列表中。当您更改字符串时，您也在列表中更改它。当您将它们添加到列表时，它们需要是字符串的新实例。

第二，我会创建一个类来封装专辑的数据。所有字符串都不应该是静态的。然后将专辑类的（新）实例添加到您的列表中。然后，重写 Album 类中的 ToString() 方法，以您需要的方式打印信息。

此外，如果您总是附加到列表，则没有真正的理由在这里使用链表，基于普通数组的列表会很好（特别是如果您需要快速访问每个元素）。在链表上搜索将是 big-Oh(n)，它们在基于数组的列表上是恒定的。唯一需要链表的地方是您需要在链表末尾以外的地方进行有效插入，并且您将经常重新分配大小。并不是所有这些在现代计算机和小型应用程序中都很重要。

# csv - 使用 sed 搜索和替换管道分隔文件中的连续匹配项

> ID：11507808
> 
> 赞同：2
> 
> 时间：2012-07-16T15:46:51.067
> 
> 标签：csv, sed

我有一个以管道分隔的数据文件，我想通过 LOAD DATA INFILE 将其加载到 Mysql 中。

就像是：

```
a|||d|e
x|y|z|0|1
... 
```

我想替换一个空字段，`\N`以便将数据识别为 NULL 值。

正在做

> sed 's/||/|\\N|/g'

几乎可以工作，但不完全 - 在第一个数据行中，第二个管道被 sed 吃掉了，因此第二个连续的空字段不被解析！！！

*我的 hacky 解决方法是将第一次 sed 的结果通过管道进行另一次相同的搜索并第二次替换以摆脱那些连续的空字段。*

**我的问题是，在 sed 中解决这个问题的更优雅的方法是什么（最好一次性完成）？**

TIA。

**附加说明**

如果您打算使用 sed 处理数据文件，还请注意以下行尾情况：

> h|i|j|k|

您将需要管道到

> sed 's/|$/|\\N/g'

处理那些终端案件。

此外，如果您要从 DOS 转到 UNIX 系统，您可能希望使用 sed 搜索和替换从数据文件中删除“\r”。

我建议您在使用 LOAD DATA INFILE 时考虑来自 Mysql 的所有警告——它们将帮助您抓住邪恶的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:50:34.373

您可以使用重复 ( `t`) 命令：

```
echo 'a|||d|e' | sed ':repeat; s/||/|\N|/g; t repeat' 
```

# wpf - 在 XAML WPF 中创建和打开无模式窗口/弹出窗口

> ID：11507813
> 
> 赞同：-1
> 
> 时间：2012-07-16T15:47:03.597
> 
> 标签：wpf, popup, window, modeless

可以创建一个无模式的窗口/弹出窗口，可以通过在 XAML 中单击按钮来打开它。我需要能够并排看到父窗口和子无模块窗口。无模窗口最初需要适合我的网格，并且需要在单击它时扩展到父级别。

弹出控件有多个错误。展开时弹出控件的高度不是 100% 的屏幕高度，它只适用于 75% 的屏幕高度。此外，弹出控件需要太多时间来加载数据。

这是我如何设置具有 Popup 的扩展器控件的样式。

```
 <Style TargetType="Expander" x:Key="NotesSlider">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Expander" >
                    <Grid  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                           Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Grid}} ,Path=ActualWidth}" 
                           Height="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Grid}} ,Path=ActualHeight}"
                           x:Name="GridMain">
                        <Border x:Name="popupBorder" BorderBrush="White">
                            <!--<Popup IsOpen="True" PopupAnimation="Slide" x:Name="SlideOut" StaysOpen="True"
                            Placement="Relative" AllowsTransparency="True" Grid.Column="0" Width="Auto" Height="Auto">-->
                            <controls:PopupNonTopmost IsOpen="True" PopupAnimation="None" Placement="Relative" AllowsTransparency="True" StaysOpen="True"
                                             Topmost="False"  x:Name="SlideOut" Panel.ZIndex="10000" >

                                <Grid Margin="0 0 0 10" x:Name="gridContainer">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" x:Name="NoteHeaderRow"/>
                                        <RowDefinition Name="NotesContentRow" Height="0"/>
                                    </Grid.RowDefinitions>

                                    <Border 
                                Name="NoteBorder" 
                                Grid.Row="0" 
                                Background="{StaticResource NormalBrush}"
                                BorderBrush="{StaticResource NormalBorderBrush}"
                                BorderThickness="1" 
                                CornerRadius="0" >
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <ContentPresenter 
                            Grid.Column="0"
                            Margin="4" 
                            ContentSource="Header" 
                            RecognizesAccessKey="True" />

                                            <ToggleButton
                            IsChecked="{Binding Path=IsExpanded,Mode=TwoWay,
                            RelativeSource={RelativeSource TemplatedParent}}"
                            OverridesDefaultStyle="True" 
                            Grid.Column="1"
                            Template="{StaticResource VerticalExpanderToggleButton}" 
                            Background="{StaticResource NormalBrush}" />

                                            <ToggleButton  x:Name="toggleMax"
                            OverridesDefaultStyle="True" 
                            Grid.Column="2"
                            Template="{StaticResource SliderToggleButton}" 
                            Background="{StaticResource NormalBrush}" />

                                        </Grid>
                                    </Border>

                                    <Border 
                    Name="NoteContent" 
                    Grid.Row="1" 
                    Background="{StaticResource WindowBackgroundBrush}"
                    BorderBrush="{StaticResource SolidBorderBrush}" 
                    BorderThickness="1,0,1,1" 
                    CornerRadius="0" >
                                        <ContentPresenter Margin="4" x:Name="content"/>
                                    </Border>

                                </Grid>

                            </controls:PopupNonTopmost>
                            <!--</Popup>-->
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True" SourceName="toggleMax">
                            <Setter TargetName="SlideOut" Property="PlacementTarget" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Window}}}"/>
                            <Setter TargetName="SlideOut" Property="Width" Value="{Binding Source={x:Static SystemParameters.WorkArea}, Path=Width,Converter={StaticResource PopupWidthConverter}}"/>
                            <Setter TargetName="SlideOut" Property="Height" Value="{Binding Source={x:Static SystemParameters.WorkArea}, Path=Height,Converter={StaticResource PopupHeightConverter}}"/>
                            <Setter TargetName="popupBorder" Property="BorderBrush" Value="Black"/>
                            <!--<Setter TargetName="SlideOut" Property="Width" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Window}},Path=Width}"/>
                            <Setter TargetName="SlideOut" Property="Height" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Window}},Path=ActualHeight}"/>-->

                        </Trigger>

                        <Trigger Property="IsChecked" Value="False" SourceName="toggleMax">
                            <Setter TargetName="SlideOut" Property="PlacementTarget" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Grid}}}"/>
                            <Setter TargetName="SlideOut" Property="Width" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Grid}},Path=Width}"/>
                            <Setter TargetName="SlideOut" Property="Height" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Grid}},Path=Height}"/>

                        </Trigger>

                        <Trigger Property="IsExpanded" Value="True">
                            <Setter TargetName="NotesContentRow" Property="Height" Value="{Binding ElementName=Content,Path=DesiredHeight}" />

                        </Trigger>

                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="NoteBorder" Property="Background"
                                    Value="{StaticResource DisabledBackgroundBrush}" />
                            <Setter TargetName="NoteBorder" Property="BorderBrush"
                                    Value="{StaticResource DisabledBorderBrush}" />
                            <Setter Property="Foreground"
                                    Value="{StaticResource DisabledForegroundBrush}"/>
                        </Trigger>

                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:47:24.533

我认为这是 Popup 的已知问题。它已记录在这里：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.primitives.placementmode%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.placementmode%28VS.85%29.aspx)

所以我必须想办法在不使用弹出控件的情况下做另一种方式。

# c# - 试图加载格式不正确的程序。（仅在 IIS 中，在 VS Web 服务器中工作正常）

> ID：11507818
> 
> 赞同：1
> 
> 时间：2012-07-16T15:47:48.750
> 
> 标签：c#, .net, iis

我收到臭名昭著的“无法加载文件或程序集‘MyProject’或其依赖项之一。试图加载格式不正确的程序。”

System.BadImageFormatException

我不知道如何找出问题所在。当我将项目中的所有引用更改为 x86、x64 和 Any CPU 时，我仍然遇到此问题。这很奇怪，因为我只在 dll 引用之间存在平台差异时才看到此错误。就我而言，似乎没有。

当我使用 Visual Studio Web 服务器时，这可以正常工作。我最近切换到在本地使用 IIS，现在开始运行我的应用程序时遇到了这个问题。这是一个 silverlight/ASP.NET 应用程序。

关于这如何与 IIS 相关的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:13:10.907

我有一个像这样的模糊问题的实例，发现问题是一个（很多）较低级别的依赖程序集，特别是一个 X64 程序集，而我的程序集被标记为 AnyCPU。您可能会破坏 CORFLAGS 实用程序并开始检查程序集以确保它们确实是您期望它们成为的平台。

# c# - SerializationException 类型“未标记为可序列化” - 但它是

> ID：11507819
> 
> 赞同：15
> 
> 时间：2012-07-16T15:47:50.023
> 
> 标签：c#, winforms, serialization

在 Windows 窗体、.NET Framework 4.0 中，我试图序列化我编写的类的实例。

该类被标记为可序列化，但使用该类的形式（显然）不是。

我不想序列化表单的实例。我想序列化我在课堂上的数据。

我班级中的所有内容都标记为可序列化，那么为什么我仍然收到 SerializationException？

![序列化异常.png](../Images/4d31e5c9b16d1ab69caaef16a924b1d0.png)

（点击[>> HERE <<](https://i.stack.imgur.com/zdN4e.png)在新窗口中打开全尺寸图片）

**更新：**

这是我的`BrazierCuttoff`课程和相关部分：

```
[Serializable()]
public class BrazierCuttoff : IEquatable<BrazierCuttoff> {
  private int qty;
  private int[] joint, pass, shift;
  private float mult;
  private BrazierPay a, b, c, d, e;
  public event EventHandler BrazierCuttoffChanged;
  public const int MAXIMUMSMALLQUANTITY = 20;
  EnumeratedLevel[,] eLvArray;
  /// <summary>
  /// Gets or Sets the Brazier Matrix values
  /// </summary>
  /// <param name="passRatioIndex">0=100%,1=95,2=90,3=85,4=80,5=75,6=70,7=65</param>
  /// <param name="minJointIndex">0=900,1=1200,2=1400,3=1600,4=1800,5=2000,6=2100,=2200</param>
  /// <returns>Brazier Matrix value</returns>
  public EnumeratedLevel this[int passRatioIndex, int minJointIndex] {
    get { return eLvArray[passRatioIndex, minJointIndex]; }
    set { eLvArray[passRatioIndex, minJointIndex] = value; }
  }
  /// <summary>
  /// Initializes a new Form Values object using default values
  /// </summary>
  public BrazierCuttoff() {
    A = new BrazierPay(5.0f);
    B = new BrazierPay(4.0f);
    C = new BrazierPay(3.0f);
    D = new BrazierPay(2.0f);
    E = new BrazierPay(1.0f);
    NA = new BrazierPay(0.0f);
    ShiftMinimum = new int[] { 12, 12, 12 };
    PassRatio = new int[] { 100, 95, 90, 85, 80, 75, 70, 65 };
    JointMinimum = new int[] { 900, 1200, 1400, 1600, 1800, 2000, 2100, 2200 };
    eLvArray = new EnumeratedLevel[8, 8];
    EnumeratedLevel level = EnumeratedLevel.NA_Silver;
    for (int y = 0; y < 8; y++) {
      for (int x = 0; x < 8; x++) {
        switch (y) {
          case 0: level = (x < 2) ? EnumeratedLevel.B_Blue : EnumeratedLevel.A_Violet; break;
          case 1: level = (x == 0) ? EnumeratedLevel.C_Green : (x < 3) ? EnumeratedLevel.B_Blue : EnumeratedLevel.A_Violet; break;
          case 2: level = (x < 2) ? EnumeratedLevel.C_Green : (x < 5) ? EnumeratedLevel.B_Blue : EnumeratedLevel.A_Violet; break;
          case 3: level = (x == 0) ? EnumeratedLevel.D_Yellow : (x < 4) ? EnumeratedLevel.C_Green : (x < 6) ? EnumeratedLevel.B_Blue : EnumeratedLevel.A_Violet; break;
          case 4: level = (x < 2) ? EnumeratedLevel.D_Yellow : (x < 5) ? EnumeratedLevel.C_Green : EnumeratedLevel.B_Blue; break;
          case 5: level = (x == 0) ? EnumeratedLevel.E_Orange : (x < 3) ? EnumeratedLevel.D_Yellow : (x < 6) ? EnumeratedLevel.C_Green : EnumeratedLevel.B_Blue; break;
          case 6: level = (x < 2) ? EnumeratedLevel.E_Orange : (x < 5) ? EnumeratedLevel.D_Yellow : EnumeratedLevel.C_Green; break;
          default: level = (x == 0) ? EnumeratedLevel.NA_Silver : (x < 5) ? EnumeratedLevel.E_Orange : EnumeratedLevel.D_Yellow; break;
        }
        eLvArray[x, y] = level;
      }
    }
  }

  private void broadcast() {
    if (BrazierCuttoffChanged != null) {
      BrazierCuttoffChanged(this, new EventArgs());
    }
  }
  /// <summary>
  /// Gets or Sets the A Pay Level data
  /// </summary>
  public BrazierPay A { get { return a; } set { if (a != value) { a = value; broadcast(); } } }
  /// <summary>
  /// Gets or Sets the B Pay Level data
  /// </summary>
  public BrazierPay B { get { return b; } set { if (b != value) { b = value; broadcast(); } } }
  /// <summary>
  /// Gets or Sets the C Pay Level data
  /// </summary>
  public BrazierPay C { get { return c; } set { if (c != value) { c = value; broadcast(); } } }
  /// <summary>
  /// Gets or Sets the D Pay Level data
  /// </summary>
  public BrazierPay D { get { return d; } set { if (d != value) { d = value; broadcast(); } } }
  /// <summary>
  /// Gets or Sets the E Pay Level data
  /// </summary>
  public BrazierPay E { get { return e; } set { if (e != value) { e = value; broadcast(); } } }
  /// <summary>
  /// Gets or Sets the N/A Pay Level data
  /// </summary>
  public BrazierPay NA { get; private set; }

  public void Refresh() {
    const float delta = 0.01f;
    while (A.Dirty || B.Dirty || C.Dirty || D.Dirty || E.Dirty) {
      if (A.Dirty) {
        if (A.Value <= B.Value) B.Value = A.Value - delta;
        A.Dirty = false;
      } else if (B.Dirty) {
        if (B.Value <= C.Value) C.Value = B.Value - delta;
        if (A.Value <= B.Value) A.Value = B.Value + delta;
        B.Dirty = false;
      } else if (C.Dirty) {
        if (C.Value <= D.Value) D.Value = C.Value - delta;
        if (B.Value <= C.Value) B.Value = C.Value + delta;
        C.Dirty = false;
      } else if (D.Dirty) {
        if (D.Value <= E.Value) E.Value = D.Value - delta;
        if (C.Value <= D.Value) C.Value = D.Value + delta;
        D.Dirty = false;
      } else if (E.Dirty) {
        if (D.Value <= E.Value) D.Value = E.Value + delta;
        E.Dirty = false;
      }
    }
  }
  /// <summary>
  /// Gets the minimum Average Joints requirement
  /// </summary>
  public int AverageJoints { get { return JointMinimum[0]; } }
  /// <summary>
  /// Gets the minimum Chamber Pass Ratio requirement
  /// </summary>
  public int FirstTimePassRate { get { return PassRatio[PassRatio.Length - 1]; } }
  /// <summary>
  /// Gets or sets the Minimum Average Joints requirements (Range: 0 @ 900 to 7 @ 2200)
  /// </summary>
  public int[] JointMinimum { get { return joint; } set { if (joint != value) { joint = value; broadcast(); } } }
  /// <summary>
  /// Gets or Sets the Chamber Pass Ratio levels (Range: 0 @ 100% to 7 @ 65%)
  /// </summary>
  public int[] PassRatio { get { return pass; } set { if (pass != value) { pass = value; broadcast(); } } }
  /// <summary>
  /// Gets or Sets the Integral Array of minimum shifts required to qualify for a bonus
  /// </summary>
  public int[] ShiftMinimum { get { return shift; } set { if (shift != value) { shift = value; broadcast(); } } }
  /// <summary>
  /// Gets or Sets the Small Workorder Multiplier (1 is default/disable)
  /// </summary>
  public float SmallWoMulti { get { return mult; } set { if (mult != value) { mult = value; broadcast(); } } }
  /// <summary>
  /// Gets or Sets the Small Workorder Quantity value (0 is disable)
  /// </summary>
  public int SmallWoQty { get { return qty; } set { if (qty != value) { qty = value; broadcast(); } } }

  #region IEquatable<BrazierCuttoff> Members

  public bool Equals(BrazierCuttoff other) {
    if (other != null) {
      if ((A == other.A) && (B == other.B) && (C == other.C) && (D == other.D) && (E == other.E) && (NA == other.NA)) {
        if ((ShiftMinimum == other.ShiftMinimum) && (PassRatio == other.PassRatio) && (JointMinimum == other.JointMinimum)) {
          return (eLvArray == other.eLvArray);
        }
      }
    }
    return false;
  }

  #endregion

} 
```

这是`BrazierPay`上面类中使用的对象：

```
[Serializable()]
public class BrazierPay {
  float pay;
  public BrazierPay(float payLevel) {
    Dirty = false;
    pay = payLevel;
  }
  public float Value {
    get { return pay; }
    set {
      if (pay != value) {
        Dirty = true;
        pay = value;
      }
    }
  }
  public bool Dirty { get; set; }
  public string DollarValue { get { return string.Format("{0:C}", pay); } }
  public string Formatted { get { return string.Format("{0:F}", pay); } }
  public override string ToString() { return Formatted; }
} 
```

我什至将此枚举类型标记为可序列化（尽管它不应该需要它）：

```
[Serializable()]
public enum EnumeratedLevel {
  NA_Silver = Clicker.NA_Silver, // Color.Silver
  E_Orange = Clicker.E_Orange, // Color.Orange
  D_Yellow = Clicker.D_Yellow, // Color.Yellow
  C_Green = Clicker.C_Green, // Color.Lime
  B_Blue = Clicker.B_Blue, // Color.DodgerBlue
  A_Violet = Clicker.A_Violet, // Color.Violet
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-16T16:47:50.797

## 解决

我需要[`NonSerializedAttribute`](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute%28v=vs.90%29.aspx)为*EventHandler*设置一个。

无法在类中序列化事件委托（请参阅[委托和序列化](http://msdn.microsoft.com/en-us/magazine/cc163902.aspx#S1)）。

标记字段就像[`NonSerializedAttribute`](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute%28v=vs.90%29.aspx)听起来一样简单。

在我的代码中，我只是添加了这一行：

```
[field:NonSerializedAttribute()]
public event EventHandler BrazierCuttoffChanged; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-09T18:38:53.123

这是任何 JSON 序列化都可能遇到的问题，包括 MVC 4 中的 Web API。

当我获得序列化时，我发现这篇文章非常有帮助，除了 const int 值。任何 const 值都需要使用与 Nick Freeman 的回答中相同的属性进行标记：

```
[field: NonSerializedAttribute]
const int iCantBeSerialized = 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-20T14:32:50.323

```
[field:NonSerializedAttribute()]
public event EventHandler BrazierCuttoffChanged; 
```

有同样的问题，我的可序列化 NotifyObject 基类的 PropertyChanged EventHandler 被一些视图模型订阅，因此这些视图模型进入了序列化队列。将 NonSerializedAddtribute 添加到此 EventHandler 节省了我的时间。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:55:23.277

标记`BrazierMatrix2`为`[Serializable]`

# c# - 如何在 C# 应用程序中验证用于 WP7 的 SQL SERVER CE 数据库？

> ID：11507834
> 
> 赞同：0
> 
> 时间：2012-07-16T15:48:44.027
> 
> 标签：c#, windows-phone-7, sql-server-ce

如果我们无法访问引擎，如何在 WP7 中验证数据库的状态？

本质上，此代码的电话等效项是什么：

```
public void VerificarFileBD()
{
    try 
    {
        var engine = new SqlCeEngine("Data Source = AdventureWorks.sdf");

        if (false == engine.Verify())
        {
            MessageBox.Show("Database is corrupted.");
            engine.Repair(null, RepairOption.RecoverCorruptedRows);
        }   
    }
    catch (Exception)
    {
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:57:39.220

在 Windows Phone 上没有公共 API 可以执行此操作

# java - 基于 GWT 的开源电子商务解决方案

> ID：11507835
> 
> 赞同：2
> 
> 时间：2012-07-16T15:48:46.613
> 
> 标签：java, gwt, e-commerce

嗯，我做了很多研究。但我什么也找不到。只是[Broadleaf Commerce](http://www.broadleafcommerce.org)，但他们仅将 GWT 用于管理模块。

**编辑：**

好吧，我知道 GWT 对 SEO 不友好，但是有一些方法可以使 GWT 应用程序对 SEO 友好......

**为什么要基于GWT？..**

*   因为，我在 Java 世界已经 12 年多了。我的雇主也选择并大力投资 Java 技术。
*   我确实喜欢并且更喜欢强类型编程语言。因此 JavaScript 不是一种选择……我不想进入强类型语言与弱类型语言之间的战争。这是我的偏好，因为我的经验......
*   与 GWT 应用程序相比，JSF 或其他基于服务器的 Java Web 框架需要每个用户更多的服务器 CPU 和内存资源……而且，它们对云不友好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T20:07:53.837

您找不到广泛采用的基于 GWT 的电子商务解决方案的最大原因是因为 GWT 本身对 SEO 不太友好。由于都是 Javascript，爬虫无法以与用户相同的方式查看 DOM。这对电子商务网站来说是一个巨大的损失，因为 SEO 是业务的巨大驱动力。

但是，有一些[方法可以让您的 GWT 应用程序可抓取](https://developers.google.com/webmasters/ajax-crawling/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:29:46.637

我在 Broadleaf Commerce 工作。不久前有人问过这个问题，但我认为对于任何考虑使用 GWT 技术构建电子商务网站前端的人来说，这可能是一个很好的回应。

如问题中所述，Broadleaf Commerce 确实在我们的管理员中使用了 GWT（或更具体地说是 SmartGWT）。因此，我们开发了许多 JPA 和组件交互，这些交互也可以在使用 GWT 的前端中加以利用。

总的来说，我们更喜欢管理员的 GWT，因为它支持我们需要以可扩展方式提供丰富功能的范例。

我们不建议在 GWT 中构建面向客户的电子商务 UI，因为这些 UI 的外观和感觉是高度定制的。我们的客户发现将 GWT 用于面向客户的前端是有限且复杂的。我们建议在前端使用 Thymeleaf（与 Broadleaf 无关），因为它提供了一种在开发人员和设计人员之间共享 HTML 代码的方式，而无需典型 JSP 开发所需的翻译/返工步骤。

话虽如此，如果您希望在 GWT 中构建您的前端 UI，那么您可以从 BLC 管理员那里利用大量的中间层代码。

# android - android json解析-如何根据列表视图中的标签获取值

> ID：11507836
> 
> 赞同：0
> 
> 时间：2012-07-16T15:48:47.463
> 
> 标签：android, json, parsing

以下是我从 api 获得的 json 数据

```
{
     "list": {
        "items": [
            "About Us",
            "Services",
            "Working With",
            "Officehours",
            "Useful Links",
            "Terms & Conditions",
            "Go to Website"
        ]
    },
    "data": 
    {
        "about us": {  "description": " Aaaaaaaa"   },
        "services": {  "description": " Baaaaaaa."  },
        "working with": { "description": "Caaaaaa"  },
        "officehours": {   "title": "Office Hours:","timing": "09:00am - 06:00pm"},
        "useful links": {  "description": [ 
                 {
                    "name": "One",
                    "link": "http://www.google.com/"
                },
                {
                    "name": "Two",
                    "link": "http://www.yahoo.com"
                }]},
        "terms & conditions": { "description": "Daaaaaaaaa" },
        "go to website": { "link": "http: //www.amazon.com/"  },
    }
} 
```

在上述 json 数据中，json 数组中的“列表”值将显示在列表视图中。我已将它们添加到数组列表中，并显示在列表视图中。

现在，当用户单击列表视图时，与它们对应的数据将显示在下一个活动中。例如，如果用户点击`About US text of listview`然后我如何`description Aaaaaaa`在下一个活动中显示。

像这样对于列表视图中的每个项目，我必须打开不同的活动。如果内部标签是`description`我必须打开`activity1` 如果内部标签是`title`我必须打开`activity2` 如果内部标签是`link`我必须打开`activity3` 如果内部标签是`description`JSON 数组类型，则必须打开`activity4`

我不应该对代码中的标签进行热`"about us", "services","working with","officehours","useful links","terms & conditions", "go to website"`编码。

在我的 OnItemClickListener 中，我正在执行以下操作

```
try
  {
     JSONObject locarray = new JSONObject(Appconstant.dataObj.get(0).toString());        
     String txt_data = locarray.getJSONObject(about.get(arg2).toLowerCase()).getString("description");
  }
  catch(Exception e)
  {
      Log.e("Exception @ json 1",""+e);
  } 
```

在某些情况下，我收到一个异常，说“描述”没有 JSOn 值

如何做到这一点，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:14:06.210

一种方法是通过

```
JSONObject jobj = new JSONObject(content); // the content you have above
JSONObject data = jobj.getJSONObject("data");
JSONObject aboutUs = data.getJSONObject("about us");
String desc = aboutUs.getString("description:); 
```

不知道这是否有帮助:)如果有一个案例是描述是空白的

```
aboutUs.optString("description"); 
```

# c - 编译和链接 C 代码，输出文件中没有任何附加数据

> ID：11507840
> 
> 赞同：3
> 
> 时间：2012-07-16T15:48:54.687
> 
> 标签：c, gcc, operating-system, ld, osdev

由于缺乏使用 GCC 和 ld 的知识，我正在寻求专业人士的帮助。我正在为教育目的编写操作系统，并且在编译和链接 C 代码时遇到问题。老实说，这没有任何问题，但我对 GCC 和 LD 生成的输出文件中的不必要数据感到困惑，比如

```
GCC: (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 symtab..strtab..shstrtab..text..eh_frame..data..comment
.ELF..| 
```

等等。我真的需要知道哪些参数同时用于 gcc 和 ld 以减少这种无用的（对于我的操作系统）数据

我之前使用的参数： -c -nostdlib -nostdinc -fno-builtin -fno-stack-protector -fstrength-reduce -finline-functions 我也使用链接描述文件来组织段。

我尝试使用 objcopy 来减少输出中的 .comment 和 .note 等块，对我来说这是最好的解决方案

```
objcopy -R .note -R .comment -S -O binary kernel.o kernel.bin 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T16:11:02.660

拆分编译和链接阶段。使用 GCC 的“-s”选项来减少 .o 文件。（pmg 评论中的链接特别有趣，但与链接器脚本无关）

此处描述了用于简单内核的链接器脚本[（使用 LD 构建内核的教程）](http://www.osdever.net/bkerndev/Docs/basickernel.htm)。

使用

```
ld -T <yourscript> <objectfilelist> -o kernel.bin 
```

命令以获取所需的二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-25T13:19:30.630

问题可以通过链接描述文件解决。使用`/DISCARD/`块。ld 手册说这个块从最终输出中排除了其中列出的所有内容。

所以我在`.text`,`.data`和块之后插入了这个`.bss`块

```
/DISCARD/ : 
{
    *(.comment)
    *(.eh_frame)
    *(.note.GNU-stack)
} 
```

以及我的链接器脚本最开始的这一行，以输出平面二进制文件。

```
OUTPUT_FORMAT("binary") 
```

因此，我不需要再使用`objcopy`了。

# c# - Selenium WebDriver - 找不到 Chrome 二进制文件

> ID：11507844
> 
> 赞同：10
> 
> 时间：2012-07-16T15:49:06.720
> 
> 标签：c#, google-chrome, selenium, webdriver

我正在尝试使用 Chrome 运行 Selenium 测试。我正在使用 C#。

```
var options = new OpenQA.Selenium.Chrome.ChromeOptions();
options.BinaryLocation = @"C:\Users\Vilem\AppData\Local\Google\Chrome\Application\";

using (IWebDriver driver = new OpenQA.Selenium.Chrome.ChromeDriver(options))
{
... 
```

似乎找到了 chromedriver.exe，但它可以找到 Chrome 二进制文件。自动搜索失败后，我明确设置了 chrome.exe 的路径。我什至在最后尝试了“chrome.exe”。我总是得到相同的结果：

**在以下位置找不到 Chrome 二进制文件：**

**C:\Users\Vilem\AppData\Local\Google\Chrome\Application**

* * *

仅供参考：我有一个关于 3 selenium webdrivers 的问题。我试图将问题分成多个，以便讨论更容易。原文：[Selenium WebDriver - 没有驱动程序为我工作](https://stackoverflow.com/questions/11456416/selenium-webdriver-no-driver-is-working-for-me)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-14T01:14:01.547

这是一些**本地化的 Windows XP**发行版中的典型问题。

我为**Python**描述了一个解决方案，因为它是不同的，没有 CamelCase 属性 BinaryLocation 标识符，而且文档较少。是的，一个通用的解决方案是创建一个新的 ChromeOptions 实例，但是可以简单地通过 ChromeOptions 直接通过某些首先在某处启动的代码来动态修复错误：

```
from selenium import webdriver
webdriver.ChromeOptions.binary_location = ur"c:\Documents and Settings\user name\Local Settings\Data aplikací\Google\Chrome\Application\chrome.exe" 
```

并保持所有其他代码不变：

```
from selenium import webdriver
browser = webdriver.Chrome() 
```

在 Python中使用 unicode 原始字符串文字很重要`ur"..."`（如果路径包含国际字符，则不是字节字符串），如果完整路径是硬编码的并且用户名以like`u"..."`之后的某些特殊字符开头，则不正常。`\``\n \r \t`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T22:31:34.827

问题不是你在`chrome.exe`路径的尽头错过了吗？

换句话说，路径应该包括**可执行文件**，而不仅仅是可执行文件所在的文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:05:53.850

我在 php web 驱动程序中遇到了同样的问题。

请将 chrome 安装到默认目录，chrome 安装会自动将应用程序安装到默认文件夹：

> %HOMEPATH%\Local Settings\Application Data\Google\Chrome\Application\chrome.exe

请查看此 wiki 页面以获取更多信息。 [http://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-09T17:41:26.873

[![在此处输入图像描述](../Images/b613811fe3166a01e126cbbe27195f31.png)](https://i.stack.imgur.com/QlhD7.png)

1.  我重新安装了 chrome 并确保它存在于给定的文件夹中。
2.  确保 selenium 项目在 repos 中，而不是在桌面上
3.  使用管理 Nuget 包更新了所有驱动程序

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-21T15:50:54.390

你应该已经在你的机器上安装了 chrome

并且您的 chromedriver.exe 版本应相应于 chrome 下载表格

[https://chromedriver.chromium.org/downloads](https://chromedriver.chromium.org/downloads)

并为您的脚本提供了新的 chromedriver.exe 路径..

这对我很有效

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-28T14:28:48.177

在您为 Chrome 二进制文件提供的路径中，请同时指定`chrome.exe`。它会起作用的！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-15T10:21:28.053

下载“chromedriver_win_22_0_1203_0b.zip”解压并设置路径如下：（我已经设置了我的路径）

```
options.BinaryLocation = @"F:\\Software Download_Ripon\\WebDriver\\chromedriver_win_22_0_1203_0b\\chromedriver.exe"; 
```

以上应该很好用

# java - 使用 SimpleDateFormat 时出错

> ID：11507845
> 
> 赞同：3
> 
> 时间：2012-07-16T15:49:07.930
> 
> 标签：java, parsing, simpledateformat

我正在尝试使用 SimpleDateFormat 类从该字符串中解析 DateTime ：

2012 年 7 月 5 日上午 11:38:02,442 UTC

我尝试了以下格式字符串：

```
SimpleDateFormat dateformatYYYYMMDD = new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss,SSS z a");

Date temp = dateformatYYYYMMDD.parse(time); 
```

但它会产生错误：

错误：无法解析的日期：“”

如果我使用 zZ，我会得到：错误：无法解析的日期：“05-Jul-2012 11:38:02,442 UTC AM”

关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T15:52:17.197

您提供的代码对我来说很好用。也许问题是您的语言环境？尝试在创建时指定它`SimpleDateFormat`：

```
SimpleDateFormat format =new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss,SSS z a",
                                              Locale.US); 
```

这样，它将尝试查找美国月份和 am/pm 指示符名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:53:00.723

当我尝试运行时，这对我来说很好：

```
String time = "05-Jul-2012 11:38:02,442 UTC AM";
SimpleDateFormat dateformatYYYYMMDD = new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss,SSS z a");
Date temp = dateformatYYYYMMDD.parse(time); 
```

你确定`time`要设置什么吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:54:16.523

试试这个...

```
System.out.println(new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss,SSS z a",
                                              Locale.US).format(new Date())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:55:12.643

我无法重现您的错误。你确定你在使用：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date; 
```

# nunit - 使用 Nunit GUI 运行单元测试

> ID：11507847
> 
> 赞同：0
> 
> 时间：2012-07-16T15:49:16.637
> 
> 标签：nunit, watin

我正在通过试验样本及其站点来学习 watin 和 Nunit。

[**watin 入门**](http://example.com "瓦廷")
使用 VS2010，我在我的项目中创建了一个类库，添加了对 watin 和 nunit 框架的引用。然后我安装了 Nunit GUI。我构建了我的类库。在文件菜单上打开 GUI 打开新项目并浏览到位置类库的dll。当我运行类（dll）时，我收到了错误：

Volotrust_watin.Class1.Start_google：
System.IO.FileNotFoundException：无法加载文件或程序集“Interop.SHDocVw，Version=1.1.0.0，Culture=neutral，PublicKeyToken=db7cfd3acb5ad44e”或其依赖项之一。该系统找不到指定的文件。
这是我的代码：

使用系统；

```
using System.Collections.Generic;
using System.Linq;
using System.Text;
using WatiN.Core;
using NUnit.Framework;

namespace Volotrust_watin
{    
[TestFixture]
[RequiresSTA]
public class Class1
{
[Test]
public void Start_google()
{
using (var browser = new IE("www.google.com"))
{
browser.TextField(Find.ByName("q")).TypeText("watin");
browser.Button(Find.ByName("btnG")).Click();
Assert.IsTrue(browser.ContainsText("watin"));

} 
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:13:46.073

我终于通过从我的项目中删除 Interop.SHDocVw.dll 解决了我的问题。

# java - 使用 Quartz-scheduler 的 Jobs 中的自定义对象参数

> ID：11507850
> 
> 赞同：1
> 
> 时间：2012-07-16T15:49:30.853
> 
> 标签：java, scheduled-tasks, quartz-scheduler, job-scheduling

我正在测试 Quartz 以安排工作。但是，该作业包含 3 个不可序列化的参数。

我在下面创建了一个示例应用程序，指示我如何实现该功能。有谁知道如何使用 Quartz 将自定义对象用作参数？

下面是安排工作的触发器，我已经评论了给我带来问题的区域。

```
public class Trigger {

public void run() throws Exception {

    SchedulerFactory sf = new StdSchedulerFactory();
    Scheduler sched = sf.getScheduler();
    Date startTime = DateBuilder.nextGivenSecondDate(null, 15);

    JobDetail job = newJob(SimpleJob.class)
            .withIdentity("job6", "group1")
            .build();

    SimpleTrigger trigger = newTrigger()
            .withIdentity("trigger6", "group1")
            .startAt(startTime)
            .withSchedule(simpleSchedule()
                    .withIntervalInSeconds(60)
                    .repeatForever())
            .build();

    Date ft = sched.scheduleJob(job, trigger);

    TestObject testObject = new TestObject();

    // This is the part giving trouble!
    job.getJobDataMap().put(SimpleJob.test,testObject);

    sched.start();
} 
```

}

这是我要安排的工作。

```
public class SimpleJob implements Job {

public static final TestObject test = null;

public SimpleJob() {

}

public void execute(JobExecutionContext context) throws JobExecutionException {

    test.saySomething();
} 
```

}

最后是 TestObject 类。

```
public class TestObject {

public TestObject() {

}

public void saySomething() {

    System.out.println("Test Object initialized");
} 
```

}

请注意，我只是在寻找一种让 Quartz 允许将不可序列化的对象用作参数的方法（请不要评论上面正在执行的实际任务或工作）

我也尝试过为 TestObject 实现 Serializable 接口，但没有任何乐趣。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-07T17:56:14.690

实现你自己的[JobFactory](http://quartz-scheduler.org/api/2.2.0/org/quartz/spi/JobFactory.html)。它将自定义底层作业注入您需要的任何属性。

```
class MyJobFactory extends SimpleJobFactory {
    @Override
    public Job newJob(TriggerFiredBundle bundle, Scheduler Scheduler) throws SchedulerException {
        SimpleJob job = (SimpleJob) super.newJob(bundle, Scheduler);
        job.setTestObject(testObject);
        return job;
    }
} 
```

您仍然需要使用 JobDetails 来通知您的作业的类，并且您需要修改调度程序以使用您的工厂。

```
Scheduler scheduler = new StdSchedulerFactory().getScheduler();
scheduler.setJobFactory(new MyJobFactory());
scheduler.scheduleJob(jobDetail, trigger);
scheduler.start(); 
```

# ruby-on-rails - ruby 1.9.3 的更快CSV？

> ID：11507851
> 
> 赞同：4
> 
> 时间：2012-07-16T15:49:31.877
> 
> 标签：ruby-on-rails, export-to-csv, fastercsv

我正在尝试以 CSV 格式的文档导出我的报告。为此，我使用了 fastCSV 但是，我面临

```
Please switch to Ruby 1.9's standard CSV library.
It's FasterCSV plus support for Ruby 1.9's m17n encoding engine. 
```

错误。谁能帮我解决这个错误？我的代码如下

```
csv_string = FasterCSV.generate do |csv|
  csv << ["Client_name", "Created_at", "User type"]
  @client_reports.each do |client_reports|
    csv << [client_reports.email, client_reports.created_at,client_reports.role_name]
  end
end
send_data csv_string,
  :type => 'text/csv; charset=iso-8859-1; header=present',
  :disposition => "attachment; filename=product_stock.csv" 
```

所以请帮助我在 Ruby 1.9.3 中解决这个问题。它在 Ruby 1.8.7 中运行良好。

或者，如果您可以建议我任何其他资源，请帮我解决这个例子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T16:03:21.487

从 Ruby 1.9.2 开始，FasterCSV 已经作为标准库的 CSV 包含在内。只需将应用程序中的引用从 FasterCSV 更改为 CSV，它应该可以工作。查看[文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)和这个新的[Railscast](http://railscasts.com/episodes/362-exporting-csv-and-excel?autoplay=true)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T15:57:29.633

这意味着您应该使用`CSV`而不是`FasterCSV`：

```
csv_string = CSV.generate do |csv|
   # ... 
```

您可能必须添加`require 'csv'`到您的文件中。

# javascript - 使用jquery将html字符串加载到div中

> ID：11507856
> 
> 赞同：2
> 
> 时间：2012-07-16T15:49:40.847
> 
> 标签：javascript, jquery, html

我正在尝试将一大块 html 加载到我的 div 中，并且我遇到了 html 字符串中的 javascript 仅加载大约 50% 的时间的一些问题。

我知道我可以使用 jQuery's: `$(div).html(htmlString);` 将 html 加载到必要的 div 中。导致问题的 html 是在文档就绪块中完成的，我很好奇在使用 .html(..) 时是否执行了文档就绪代码，因为页面作为一个整体已经就绪，而加载的 html 内部（主要jquery-ui js）可能不是？

```
<html>
   <head>
     <script src="..../jquery-ui.min.js"></script>
     <script type="text/javascript"> $(function() {  $("#tabs").tabs(); }); </script>
   </head>
   <body>
      <div>......</div>
   </body>
</html> 
```

我尝试在添加的 html 中应用超时以尝试添加 jquery-ui 脚本加载的时间：

```
$(function(){  setTimeout(function(){ $("#tabs").tabs(); }, 300); }); 
```

但这仍然不是 100% 可靠，因为加载必要的 javascript 所需的时间可能会有所不同。有没有办法确保加载的 html 的文档就绪状态一直等到 jquery ui 脚本加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:02:45.810

您应该始终将您的脚本和 js 文件放在正文的末尾。原因是任何放入头部的东西都必须在加载主体之前完成，因此将 javascript 放在那里通常是个坏主意。最好是安全的并将其添加到底部。

延迟也不会提高您在这里的机会。

```
<html>
  <head>
     <title>hey you</title>
  </head>
  <body>
    <div>......</div>
   <script src="..../jquery-ui.min.js"></script>
   <script type="text/javascript">
       $(function(){  
            $("#tabs").tabs(); 
       }); 
   </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:13:53.130

发现了这个问题，John Doe 在这个问题中的帖子有助于找到答案 - [JavaScript Load Order](https://stackoverflow.com/questions/19035/javascript-load-order)。

jquery-ui.min.js 在 insite 脚本之后加载，无论它们在页面上的哪个位置（在头部或`</body>`标签之前）。我最终做的是使用检查 jquery ui`$.ui`并将`async`属性添加到 script 标签

```
<script async src=".../jquery-ui.min.js"></script> 
```

加载 jquery ui 后，我就可以继续`$("#tabs).tabs();`通话了。

感谢您的评论和帖子！

# capistrano - Capistrano 网关仅用于某些服务器，但不是全部

> ID：11507860
> 
> 赞同：1
> 
> 时间：2012-07-16T15:49:54.217
> 
> 标签：capistrano

我正在使用 capistrano 进行部署，在此过程中我需要访问网关后面的一些服务器，以及一些不使用此网关的服务器。

如何指定哪个服务器使用网关（以及哪个网关）而哪个不使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:41:46.760

我以前遇到过这个问题，但从未找到“正确”的解决方案。我想它就在那里，但作为一种解决方法，您可能会使用[多级](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)功能。

假设您有两台服务器要运行 Cap 任务，但只有一台需要网关。把它们放在不同的阶段，一个有网关设置，另一个没有。

缺点是你必须运行你的任务两次 - 每个阶段设置一次，但这是一个相当微不足道的成本。

# plugins - NSIS - PLUGINSDIR 中的文件不执行

> ID：11507866
> 
> 赞同：1
> 
> 时间：2012-07-16T15:50:05.997
> 
> 标签：plugins, nsis

```
Function .onInit
  InitPluginsDir
  ; check registry for installed version...
Function End
Section "other" OTHER
  !define SOME_FILE "file.exe"
  SetOutPath "$PLUGINSDIR"
  File /nonfatal "${SOME_FILE}"
  ExecWait '"$PLUGINSDIR\${SOME_FILE}" /q /norestart'
SectionEnd 
```

我已经用 PLUGINSDIR 替换了 TEMP（我将在最后删除），因为使用 NSIS 自己的临时目录是有意义的。

但它不起作用，执行不会发生。

我做对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:13:28.863

在我看来是正确的。

你确定文件存在吗？删除 /nonfatal 可能。

也许防病毒妨碍了？尝试[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)以​​查看进程创建失败的原因...

# java - 在 Java 中使用 Hibernate 的 DetachedCriteria 来限制结果的最佳方法是什么？

> ID：11507868
> 
> 赞同：3
> 
> 时间：2012-07-16T15:50:11.963
> 
> 标签：java, hibernate, orm, detachedcriteria

我在 Java 中使用 Hibernate 3.5.6-Final。由于我无权访问 Hibernate [Session](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html)，因此我使用的是[DetachedCriteria](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/criterion/DetachedCriteria.html)。所以，我想知道**限制 DetachedCriteria 结果的最佳方法是什么**（在我的情况下，我只想获得第一行）。

*附加信息：*

[Criteria](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Criteria.html)类有一些方法可以实现这一点，例如setMaxResults [(int maxResults)](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Criteria.html#setMaxResults%28int%29)或[setFirstResult(int firstResult)](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Criteria.html#setFirstResult%28int%29)，但 DetachedCriteria 两者都没有。同样，我不能使用 Criteria，因为我无权访问 Hibernate 的会话。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T06:54:36.167

我就是这样做的，您必须将结果包装到执行块中。下面示例中的 EntityMAnager 是`org.springframework.orm.hibernate3.HibernateOperations`object ：

```
final DetachedCriteria criteria = DetachedCriteria.forClass(ActivePropertyView.class);
criteria.add(Restrictions.eq("featured", true));
List<ActivePropertyView> result = entityManager.execute(
     new HibernateCallback<List<ActivePropertyView>>() {
         @Override
         public List<ActivePropertyView> doInHibernate(Session session) 
                                         throws HibernateException,SQLException {
                 return criteria.getExecutableCriteria(session).setMaxResults(5).list();
         }
     });
return result; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T01:25:55.370

您可以使用[Restrictions.sqlRestriction()](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/criterion/Restrictions.html#sqlRestriction%28java.lang.String%29)将纯 SQL 表达式添加到 DetachedCriteria。尝试这个：

```
DetachedCriteria criteria = DetachedCriteria.forClass(Domain.class)
  .add(Restrictions.sqlRestriction("LIMIT 1")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-23T15:35:27.860

如果您使用的是休眠模板，则有一个`findByCriteria(criteria, firstResult, maxResults)`. 不鼓励使用模板，但对于那些使用遗留代码的人来说，这是可用的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T15:52:04.730

如果我正确地阅读了 javadoc，那么在您最终将 DetachedCriteria 转换为真正的 Criteria 之前，您无法限制（当您确实有会话时）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-23T22:28:36.460

扩展 yorkw 的答案，Oracle 等价物是：

```
DetachedCriteria criteria = DetachedCriteria.forClass(Domain.class)
  .add(Restrictions.sqlRestriction("rownum < 1")); 
```

它将行限制添加到子查询中的“where”子句。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-29T15:57:49.390

```
detachedCriteria.getExecutableCriteria(getSession()).setMaxResults(1); 
```

# android - 如何在不扩展Activity的情况下在android中动态创建按钮

> ID：11507869
> 
> 赞同：0
> 
> 时间：2012-07-16T15:50:30.067
> 
> 标签：android, button, dynamic, android-activity, dynamically-generated

我在 android 中有一个扩展 Fragment 的类。我需要动态创建一个按钮。我不能使用新按钮（这个）。因为我没有扩展活动。我该怎么做呢？

```
public class Tab2Fragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    LinearLayout theLayout =  (LinearLayout) inflater.inflate(R.layout.tab2, container, false);

    Context mFragmentContext=getActivity().getApplicationContext(); 
    Button btn=new Button(mFragmentContext);
    btn.setText("Hello Button");
    RelativeLayout.LayoutParams paramsd = new RelativeLayout.LayoutParams(150,30);
    paramsd.height = 600;
    paramsd.width = 60;
    btn.setLayoutParams(paramsd);
    addContentView(btn,paramsd); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T16:08:02.960

//尝试使用下面的代码

**溶胶1：**

```
Button myButt=new Button(YourFragmentClass.this); 
```

**溶胶2：**

```
Button myButt=new Button(getApplicationContext()); 
```

//你也可以像这样获取上下文

```
 private Context mFragmentContext=getActivity().getApplicationContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T13:49:53.683

```
/* getActivity() will give you the Activity this fragment belongs
to, you can use this as 'Context' */

Button button = new Button(getActivity())

/* getView() will give you the root layout for this fragment 
(Relative, Linear or whatever you used in xml) and you must cast it
to a ViewGroup to access the getView() method*/

RelativeLayout.LayoutParams paramsd = new RelativeLayout.LayoutParams(150,30);
paramsd.height = 600;
paramsd.width = 60;

ViewGroup viewGroup = (ViewGroup) getView();
viewGroup.addView(button, paramsd); 
```

有关 getView() 的更多信息，请参见此处：[Android add button to Fragment without id](https://stackoverflow.com/questions/18913604/android-add-button-to-fragment-without-id)

快乐的编码...

# publish - VS2012 Express 中没有“发布” - 无法配置 Web One Click Publish

> ID：11507870
> 
> 赞同：3
> 
> 时间：2012-07-16T15:50:30.830
> 
> 标签：publish, visual-studio-2012

根据下面的链接，我应该能够配置 Web One Click Publish。甚至还有截图展示了如何实现这一点。但是，我在我的解决方案资源管理器中找不到该选项。我是智障还是盲人？！

我很乐意提供我的安装截图，以防有人质疑我的理智和在菜单上找到项目的能力...... :)

[MSDN 配置说明](http://msdn.microsoft.com/en-us/library/dd465337%28v=vs.110%29.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:29:34.230

我认为您正在尝试发布**Web Site**，但您发布的链接说：

> 如何：在 Visual Studio 中使用一键发布部署**Web 应用程序项目**
> 
> 本主题说明如何创建发布配置文件以及如何发布（部署）**Web 应用程序项目**

网站不同于 Web 应用程序项目。

[Web 应用程序项目与网站项目 (MSDN)](http://msdn.microsoft.com/en-us/library/dd547590.aspx)解释了它们之间的区别。此外，它还讨论了要在 Visual Studio 中进行的配置。

首选 Web 应用程序项目的场景包括：

*   您希望使用 Visual Studio 2010 中提供的自动部署工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-07T00:13:57.247

确保选择 web 项目作为启动项目

# c# - 将英国日期时间转换为美国日期时间

> ID：11507876
> 
> 赞同：0
> 
> 时间：2012-07-16T15:50:51.330
> 
> 标签：c#, datetime

我的 Windows XP 机器上的当前区域设置是*English (United Kingdom)*。使用我的 C# 应用程序，如何将`DateTime`值为 31/05/2012 的对象转换为美国`DateTime`对象，即。2012 年 5 月 31 日？没有设置这可能`Thread.CurrentThread.CurrentCulture`吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T15:54:18.083

`DateTime`价值观没有文化——他们*对*自己的格式化一无所知。您在解析和格式化它们时指定文化信息。目前尚不清楚您从哪里获得价值，但要根据美国文化对其进行*格式化*，您只需使用以下内容：

```
CultureInfo us = CultureInfo.GetCultureInfo("en-US");
string text = dateTime.ToString("d", us); // d=short date format 
```

请注意，只有在必须向用户显示信息时才应执行此格式设置 -`DateTime`尽可能长时间地将值保留为 a。例如，如果您需要将其插入数据库，请将其用作参数化 SQL 语句中的参数值，而不是在 SQL 本身中包含文本表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:55:49.330

```
DateTime ukDateTimeFormat = DateTime.Parse("10/26/2009 06:47",      
System.Globalization.CultureInfo.GetCultureInfo("en-us")); 
```

从英国格式到美国格式，使用以下代码片段

```
DateTime usDateTimeFormat = DateTime.Parse("26/10/2009 06:47", 
System.Globalization.CultureInfo.GetCultureInfo("en-gb")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:51:57.057

使用文化。

见这里 - [http://msdn.microsoft.com/en-us/library/5hh873ya.aspx](http://msdn.microsoft.com/en-us/library/5hh873ya.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:53:42.313

```
DateTime dt = DateTime.Now;
string dtStringInUSFormat=dt.ToString(CultureInfo.GetCultureInfo("en-US")) 
```

您需要导入`System.Globalization`才能访问`CultureInfo`该类。

# javascript - 声明式创建 dojox.form.CheckedMultiSelect 和属性“title” (Dojo 1.4)

> ID：11507879
> 
> 赞同：0
> 
> 时间：2012-07-16T15:51:14.450
> 
> 标签：javascript, html, dojo

我使用 Dojo 1.4 并尝试创建`dojox.form.CheckedMultiSelect`

```
<select id="sel1" class="soria" dojoType="dojox.form.CheckedMultiSelect" multiple="true"
size="23" style="width:267px; height:260px;">
<option value="1" title="1">1</option>
<option value="2" title="2">2</option>
<option value="3" title="3">3</option>
</select> 
```

但我没有`title`在生成的复选框中看到属性。我做错了什么？

**UPD。** 有什么方法可以获取在 object(CheckedMultiSelect) 中定义的所有 html 属性？

# c# - ThreadStatic 和同步

> ID：11507881
> 
> 赞同：3
> 
> 时间：2012-07-16T15:51:19.583
> 
> 标签：c#, multithreading

我有以下代码。这可能是个愚蠢的问题，但我不确定是否需要同步。

```
 class MyClass
{
  [ThreadStatic]
  private static object _staticObject;
  private static readonly LockStaticField = new object();

  public static object StaticObject
  {
     get
     {
        lock(LockStaticField)
        {
           return _staticObject ?? (_staticObject = new object());
        }
     }
  }
} 
```

我知道`ThreadStatic`字段不需要任何同步，因为状态不是共享的。但是静态 getter 和初始化呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T15:52:37.897

> 我知道 ThreadStatic 字段不需要任何同步，因为状态不是共享的。但是静态 getter 和初始化呢？

这也不需要锁定来同步，因为每个线程的数据（支持字段）将是唯一的。您可以在这里安全地移除锁。

请注意，从 .NET 4 开始，您可能还需要考虑使用[`ThreadLocal<T>`](http://msdn.microsoft.com/en-us/library/dd642243.aspx)而不是`[ThreadStatic]`保存任何本地线程数据。在使用方面（即：）和清理方面都有一些优势，[`IsValueCreated`](http://msdn.microsoft.com/en-us/library/dd642279.aspx)因为您可以调用`Dispose()`以直接清理所有线程上的所有实例。

# java - LibGDX Box2D 不渲染

> ID：11507885
> 
> 赞同：0
> 
> 时间：2012-07-16T15:51:31.877
> 
> 标签：java, libgdx, box2d

我是 Box2D 和 LibGDX 的新手，我正在尝试进行一个简单的测试。该代码应该呈现一个 2x2 框，但它没有这是我的代码：

```
public class PhysicsDemo implements ApplicationListener {
World world = new World(new Vector2(0, -20), true);
Box2DDebugRenderer debugRenderer;
private OrthographicCamera camera;

@Override
public void create() {      

    camera = new OrthographicCamera();
    camera.position.set(0, 0, 0);

    //Ground body
    BodyDef groundBodyDef =new BodyDef();
    groundBodyDef.position.set(0.0f, -20f);
    Body groundBody = world.createBody(groundBodyDef);
    PolygonShape groundBox = new PolygonShape();
    groundBox.setAsBox(50.0f, 10.0f);
    groundBody.createFixture(groundBox, 0.0f);

    //Dynamic Body
    BodyDef bodyDef = new BodyDef();
    bodyDef.type = BodyType.DynamicBody;
    bodyDef.position.set(0.0f, 4.0f);
    Body body = world.createBody(bodyDef);
    PolygonShape dynamicBox = new PolygonShape();
    dynamicBox.setAsBox(1.0f, 1.0f);
    FixtureDef fixtureDef = new FixtureDef();
    fixtureDef.shape = dynamicBox;
    fixtureDef.density = 1.0f;
    fixtureDef.friction = 0.3f;
    body.createFixture(fixtureDef);

    debugRenderer = new Box2DDebugRenderer();

}

@Override
public void dispose() {

}

@Override
public void render() {      

    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    debugRenderer.render(world, camera.combined);

}

@Override
public void resize(int width, int height) {
}

@Override
public void pause() {
}

@Override
public void resume() {
}
} 
```

我似乎无法显示任何东西，我得到的只是黑屏。有谁知道出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T03:34:28.547

我有同样的问题。您在评论部分提到了解决方案，但我想对此给出官方答案。

在你的代码（和我的）中没有`camera.viewportWidth`和`camera.viewportHeight`设置......只需通过构造函数显式设置这两个值`camera.viewportWidth = Gdx.graphics.getWidth()` 或通过构造函数传递值，如下所示：

```
OrthographicCamera camera = new OrthographicCamera(Gdx.graphics.getWidth(), 
                                                   Gdx.graphics.getHeight()); 
```

（对于那些不知道我正在使用 Gdx 方法获取屏幕分辨率的人，因为 box2d 通常在 Java 中与 libGDX 一起使用，您可以`Gdx.graphics.getWidth()`用您正在使用的任何屏幕分辨率替换）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:56:09.587

像这样设置你的相机位置

> camera.position.set(camera.viewportWidth * .5f, camera.viewportHeight * .5f, 0f);

并添加这个

> 相机.更新（）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-07T16:07:18.273

我有同样的问题，我已经解决了调用所有 super()

超级暂停（）；

超级调整大小（宽度，高度）；

超级渲染（）；

super.dispose();

超级简历（）；

# c# - C# SqlDataAdaptor 更新不更新数据库

> ID：11507886
> 
> 赞同：0
> 
> 时间：2012-07-16T15:51:34.220
> 
> 标签：c#

我的大脑中有一个相对简单的任务，但它比预期的要困难得多，因为我无法让它发挥作用。我在 C# 中工作，试图将 csv 文件中的数据解析为 DataTable，然后我想将其插入 SQL 数据库。我想这样做，以便将来可以从数据库文件中工作（我希望它比 CSV 文件更快、更容易，但请告诉我这是否是一个错误的假设）。

我可以将数据放入数据表中。然后我重命名列以匹配数据库文件中的内容。然后我创建一个数据集并将数据表添加为数据集的“Table1”。

但是，当我从 SqlDataAdaptor 调用“更新”方法时，代码运行良好，只是数据库中的数据似乎没有更新！我猜我只是犯了一些愚蠢的小错误，所以我道歉，因为我是 C# 和 OOP 的新手。

以下是我尝试使用的代码：

```
 SqlConnection con;
    DataTable dt1;
    SqlDataAdapter da;

    private void Form1_Load(object sender, EventArgs e)
    {
        con = new SqlConnection();
        con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=C:\\dbTestCSV.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
        con.Open();

        string sql = "SELECT * FROM tblTestCSV";
        da = new SqlDataAdapter(sql, con);

        SqlCommandBuilder cb;
        cb = new SqlCommandBuilder(da);

        dt1 = ParseCSV("C:\\testcsv2.csv");

        dt1.Columns[0].ColumnName = "Numbers";
        dt1.Columns[1].ColumnName = "Col1";
        dt1.Columns[2].ColumnName = "Col2";
        dt1.Columns[3].ColumnName = "Col3";
        dt1.Columns[4].ColumnName = "Col4";
        dt1.Columns[5].ColumnName = "Col5";

        foreach (DataRow dr in dt1.Rows)
        {
            dr.SetModified();
        }

        DataSet ds1 = new DataSet();
        ds1.Tables.Add(dt1);

        da.Fill(ds1);
        da.Update(ds1,"Table1");

        dataGridView1.DataSource = dt1;

        con.Close();
        da.Dispose();

        MessageBox.Show("sql server table data updated!");
    } 
```

我浏览了互联网和 stackoverflow，但我遇到的所有解决方案要么不理解，要么不起作用。谢谢你的时间。

编辑：我已经改变了一些代码，所以我不会在命令生成器之后重新声明数据适配器。但是，它仍然没有更新数据库，尽管代码运行时没有抛出任何东西，并且最后的消息框弹出，然后是我的表单，其中包含来自 dt1 的数据。

澄清一下，我没有从数据库中获取数据。我正在尝试从 CSV 文件中获取数据并将其移动到数据库中。感谢你目前的帮助。还有其他建议吗？

编辑2：DataTable“dt1”的结构如下：

标题：数字 Col1 Col2 Col3 Col4 Col5

数据类型：int32 Str Str Str Str Str

有 25 行。

dbTestCsv.mdf文件中的表如下：

标题：数字 Col1 Col2 Col3 Col4 Col5

数据类型：int nvarchar(50) -->

还没有行/数据。

编辑3：嘿哟！！得到它的工作。它本质上是这里建议的混合体，所以谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:27:28.647

我认为您最好通过使用通用代码创建 DataTable 来填充您的数据集，然后添加 csv 文件中的值，以便他可以根据他的第一个状态检测到新的值，然后在这种情况下更新将起作用。
希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:08:33.053

您需要先使用 SqlDataAdapter 填充 DataSet，然后调用更新方法

```
e.g. ds1.Fill(da); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:16:22.440

所以这是最终起作用的代码。数据现在有大约 24000 行（只是为了测试），它会相应地更新数据库（尽管编译/运行大约需要 4 秒）。感谢您所有的帮助！

```
 SqlConnection con;
    DataTable dt1;
    SqlDataAdapter da;

    private void Form1_Load(object sender, EventArgs e)
    {
        con = new SqlConnection();
        con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=C:\\dbTestCSV.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
        con.Open();

        string sql = "SELECT * FROM tblTestCSV";
        da = new SqlDataAdapter(sql, con);

        SqlCommandBuilder cb;
        cb = new SqlCommandBuilder(da);

        dt1 = ParseCSV("C:\\testcsv3.csv");

        dt1.Columns[0].ColumnName = "Numbers";
        dt1.Columns[1].ColumnName = "Col1";
        dt1.Columns[2].ColumnName = "Col2";
        dt1.Columns[3].ColumnName = "Col3";
        dt1.Columns[4].ColumnName = "Col4";
        dt1.Columns[5].ColumnName = "Col5";

        DataSet ds2 = new DataSet();

        da.Fill(ds2);

        // THIS IS THE KEY BIT!! This adds the rows from the datatable to the dataset one by one.
        // I guess the "Update" command in the dataadapter needs this to happen, rather than just 
        // adding the table "dt1" to the dataset all at once. Can anyone explain why?

        foreach (DataRow dRow in dt1.Rows)
        {
            DataRow dsRow = ds2.Tables["Table"].NewRow();
            dsRow.ItemArray = dRow.ItemArray;
            ds2.Tables["Table"].Rows.Add(dsRow);
        }

        da.Update(ds2,"Table");

        dataGridView1.DataSource = dt1;

        con.Close();
        da.Dispose();
    } 
```

# java - java向量警告

> ID：11507888
> 
> 赞同：4
> 
> 时间：2012-07-16T15:51:36.620
> 
> 标签：java, vector

我不确定我的代码有什么问题......

```
 public Vector blob (Pixel px)
{
    Vector v = new Vector();

    Point p = new Point(px.getX(), px.getY());
    v.add(p);

    return v;
} 
```

我得到以下信息：警告：[unchecked] unchecked call to add(E) as a member of raw type Vector

v.添加（p）；

其中 E 是一个类型变量：E 扩展了在类 Vector 中声明的 Object。

浏览 API，add 函数将一个对象作为参数，我之前清楚地做了这一行，想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T15:54:37.833

从 Java-5 开始，[`java.util.Vector<E>`](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)它是一个*通用*容器，这意味着（用非常简单的术语）您可以指定您计划存储的元素的类型，并让编译器自动为您检查该类型。在没有元素类型的情况下使用它是可以的，但它会触发警告。

这应该消除警告，并提供额外的类型安全检查：

```
public Vector<Point> blob (Pixel px) {
    Vector<Point> v = new Vector<Point>();
    Point p = new Point(px.getX(), px.getY());
    v.add(p);
} 
```

关于向量的另一件事是它们是同步容器。如果您不打算使用它们同步的事实，那么使用[`ArrayList<E>`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)容器可能会更好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T15:53:16.540

泛型！！！您必须为向量的内容指定对象类型。要删除警告，矢量代码应该是这样的

```
Vector<Point> v=new Vector<Point>() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T15:53:44.323

这是因为`generics`. `Generics`允许类型安全，编译器在编译时检查类型。当您使用`raw types`泛型参数类/方法时，您将收到此警告。

原始类型是那些不为泛型参数提供具体实现的类型。

在这种情况下，向量类的 add 方法是“通用的”，它允许告诉 add 方法接受的具体实现类型。

为了允许向后兼容，java 仍然允许您定义“原始类型”。阅读本[文档](http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:55:48.240

您忘记使用 Java 泛型。

**简短回答：**声明 `Vector<Pixel > v = new Vector<Pixel >()` *而不是*
`Vector v = new Vector()`

**长答案：** [阅读泛型](http://docs.oracle.com/javase/tutorial/java/generics/)并了解其用法

此外，您可能需要重新考虑对 Vectors 的使用。这是一个解释原因[的 SO 链接。](https://stackoverflow.com/q/1386275/1168372)

# c# - 从 C# 问题在浏览器中使用查询字符串调用 htm 文件

> ID：11507889
> 
> 赞同：0
> 
> 时间：2012-07-16T15:51:41.423
> 
> 标签：c#, browser, query-string

我们正在尝试从 C# 控制台应用程序在 Firefox 浏览器中打开一个 htm 文件。htm 文件应该将视频文件的名称作为查询字符串参数，以便可以在浏览器中播放该文件。现在视频文件和 htm 都是 C# 控制台应用程序的本地文件。

我们使用了以下代码：

```
var playerFile = Path.Combine(folderPath, "player.htm");
var medianame = Path.GetFileNameWithoutExtension(mediaFilename) + ".theora.ogv";
var url = string.Format("{0}?name={1}", playerFile, medianame);
System.Diagnostics.Process.Start(@"C:\Program Files (x86)\Mozilla Firefox\firefox.exe", url); 
```

网址应采用以下形式

file:///D:/Projects/Tester/bin/Debug/Content/player.htm?name=Promo[39171369900].theora.ogv

但是当Firefox浏览器打开时，它在地址栏中有以下内容：

file:///D:/Projects/Tester/bin/Debug/Content/player.htm%3Fname=Promo%5B39171369900%5D.theora.ogv

自从? 并且 [ ] 在浏览器中打开时正在获取 url 编码，它无法播放视频。如果 %3F 和 %5B %5D 被替换，文件可以正常播放。

任何人都可以提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:56:45.273

请使用 Server.UrlDecode 方法来解码您的 url

或尝试使用[System.Uri.UnescapeDataString](http://msdn.microsoft.com/en-us/library/system.uri.unescapedatastring%28v=vs.110%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:48:38.687

为了回答我自己的问题，我终于解决了这个问题，使用批处理文件打开 htm 文件并从 C# 应用程序调用批处理，将文件名作为参数传递给批处理。感谢你的帮助。

# c# - 将 CSV 文件复制到 MS Access 表

> ID：11507890
> 
> 赞同：2
> 
> 时间：2012-07-16T15:51:44.250
> 
> 标签：c#, ms-access, csv, import

使用 C# 我正在尝试创建一个控制台应用程序，该应用程序从特定文件夹位置读取 CSV 文件并将这些记录导入 MS Access 表。成功导入文件中的记录后，我将删除 .csv 文件。

到目前为止，这就是我所拥有的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Configuration;
using System.Data;
using System.Data.OleDb;
using System.Globalization;

namespace QuantumTester
{
class Program
{
    static void Main(string[] args)
    {        
       CsvFileToDatatable(ConfigurationManager.AppSettings["CSVFile"], true);
    }

    public static DataTable CsvFileToDatatable(string path, bool IsFirstRowHeader)//here Path is root of file and IsFirstRowHeader is header is there or not
    {
        string header = "Yes"; //"No" if 1st row is not header cols
        string sql = string.Empty;
        DataTable dataTable = null;
        string pathOnly = string.Empty;
        string fileName = string.Empty;

        try
        {

            pathOnly = Path.GetDirectoryName(ConfigurationManager.AppSettings["QuantumOutputFilesLocation"]);
            fileName = Path.GetFileName(ConfigurationManager.AppSettings["CSVFilename"]);

            sql = @"SELECT * FROM [" + fileName + "]";

            if (IsFirstRowHeader)
            {
                header = "Yes";
            }

            using (OleDbConnection connection = new OleDbConnection(
                    @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + pathOnly +
                    ";Extended Properties=\"Text;HDR=" + header + "\""))
            {
                using (OleDbCommand command = new OleDbCommand(sql, connection))
                {
                    using (OleDbDataAdapter adapter = new OleDbDataAdapter(command))
                    {
                        dataTable = new DataTable();
                        dataTable.Locale = CultureInfo.CurrentCulture;
                        adapter.Fill(dataTable);
                    }
                }
            }
        }
        finally
        {

        }
        return dataTable;
    }
}
} 
```

我可以继续将数据表保存到我在 Access DB 中创建的表中吗？我该怎么做呢？任何帮助都会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:55:43.780

您可以针对从 CSV 文件创建新表或追加到现有表的 Access 连接运行查询。

创建表的 SQL 类似于：

```
SELECT * INTO NewAccess 
FROM [Text;FMT=Delimited;HDR=NO;DATABASE=Z:\Docs].[Table1.csv] 
```

要附加到表：

```
INSERT INTO NewAccess 
SELECT * FROM [Text;FMT=Delimited;HDR=NO;DATABASE=Z:\Docs].[Table1.csv] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T15:33:18.220

终于让它工作了，这就是我所拥有的 - 希望它在未来对其他人有所帮助：

```
public static DataTable CsvFileToDatatable(string path, bool IsFirstRowHeader)//here    Path is root of file and IsFirstRowHeader is header is there or not
    {
        string header = "Yes"; //"No" if 1st row is not header cols
        string query = string.Empty;
        DataTable dataTable = null;
        string filePath = string.Empty;
        string fileName = string.Empty;

        try
        {
            //csv file directory
            filePath = Path.GetDirectoryName(ConfigurationManager.AppSettings["QuantumOutputFilesLocation"]);
            //csv file name
            fileName = Path.GetFileName(ConfigurationManager.AppSettings["CSVFilename"]);

            query = @"SELECT * FROM [" + fileName + "]";

            if (IsFirstRowHeader) header = "Yes";

            using (OleDbConnection connection = new OleDbConnection((@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + filePath + ";Extended Properties=\"Text;HDR=" + header + "\"")))               
            {
                using (OleDbCommand command = new OleDbCommand(query, connection))
                {
                    using (OleDbDataAdapter adapter = new OleDbDataAdapter(command))
                    {                                                     
                        dataTable = new DataTable();
                        adapter.Fill(dataTable);

                        //create connection to Access DB
                        OleDbConnection DBconn = new OleDbConnection(ConfigurationManager.ConnectionStrings["Seagoe_QuantumConnectionString"].ConnectionString);
                        OleDbCommand cmd = new OleDbCommand();
                        //set cmd settings
                        cmd.Connection = DBconn;
                        cmd.CommandType = CommandType.Text;
                        //open DB connection
                        DBconn.Open();
                        //read each row in the Datatable and insert that record into the DB
                        for (int i = 0; i < dataTable.Rows.Count; i++)
                        {
                            cmd.CommandText = "INSERT INTO tblQuantum (DateEntered, Series, SerialNumber, YearCode, ModelNumber, BatchNumber, DeviceType, RatedPower, EnergyStorageCapacity," +
                                                                      "MaxEnergyStorageCapacity, User_IF_FWRevNo, Charge_Controller_FWRevNo, RF_Module_FWRevNo, SSEGroupNumber, TariffSetting)" +
                                             " VALUES ('" + dataTable.Rows[i].ItemArray.GetValue(0) + "','" + dataTable.Rows[i].ItemArray.GetValue(1) + "','" + dataTable.Rows[i].ItemArray.GetValue(2) +
                                             "','" + dataTable.Rows[i].ItemArray.GetValue(3) + "','" + dataTable.Rows[i].ItemArray.GetValue(4) + "','" + dataTable.Rows[i].ItemArray.GetValue(5) +
                                             "','" + dataTable.Rows[i].ItemArray.GetValue(6) + "','" + dataTable.Rows[i].ItemArray.GetValue(7) + "','" + dataTable.Rows[i].ItemArray.GetValue(8) +
                                             "','" + dataTable.Rows[i].ItemArray.GetValue(9) + "','" + dataTable.Rows[i].ItemArray.GetValue(10) + "','" + dataTable.Rows[i].ItemArray.GetValue(11) +
                                             "','" + dataTable.Rows[i].ItemArray.GetValue(12) + "','" + dataTable.Rows[i].ItemArray.GetValue(13) + "','" + dataTable.Rows[i].ItemArray.GetValue(14) + "')";

                            cmd.ExecuteNonQuery();
                        }
                        //close DB.connection
                        DBconn.Close();
                    }
                }
            }
        }
        finally
        {

        }
        return dataTable;
    } 
```

# google-maps-api-3 - 对 Google Maps v3 进行编程的理想程序是什么？

> ID：11507894
> 
> 赞同：-2
> 
> 时间：2012-07-16T15:52:00.553
> 
> 标签：google-maps-api-3

我不知道我是否使用正确的程序在谷歌中制作地图。

我使用 Dreamweaver 对我的网站进行编程。

我将在页面上使用 HTML，使用 javacript，我想用 mysql 和 php 保存航点数据库。

我不知道使用 Dreamweaver 是不是最好的方法，你怎么看？=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T01:51:22.197

[这](https://stackoverflow.com/questions/209126/good-javascript-ide-with-jquery-support)应该回答你的问题。

我将 Eclipse 与用于 HTML、javascript、CSS 和 Python 的[Aptana](http://aptana.com/products/studio3)插件一起使用。我知道你也可以将它用于 PHP。这个很不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:00:41.107

这取决于您要在页面上显示的内容。考虑到最简单的情况，您可以使用简单的 html 和 javascript。如果需要解析 JSON，请添加 jQuery。如果您的航点（我假设这将是一些静态的完全限定地址位置）不经常更改，那么您根本不需要 MySQL DB。我希望它有所帮助。

# c# - 是否有任何工具可以从 xml 自动生成 C# 类？

> ID：11507899
> 
> 赞同：1
> 
> 时间：2012-07-16T15:52:08.420
> 
> 标签：c#, xml, deserialization

我们有来自 REST API 的 xml，目前正在为他们手写 POCO。我隐约记得在 Visual Studio 中有自动执行此操作的工具。

从 XML 生成 POCO 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:58:11.207

您可以使用 xsd.exe 来执行此操作。

要创建 xsd 文件：

```
xsd file.xml /outputdir:"C:\Temp" 
```

要从 xsd 文件创建类：

```
xsd file.xsd /classes /outputdir:"C:\Temp" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:58:20.203

[xsd.exe](http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.71).aspx)可能是您正在寻找的。

这篇文章展示了如何从生成的模式中创建 c# 类： [https ://stackoverflow.com/a/1133052/353147](https://stackoverflow.com/a/1133052/353147)

# python - 在python中for循环的最后一次迭代期间执行操作

> ID：11507901
> 
> 赞同：3
> 
> 时间：2012-07-16T15:52:14.230
> 
> 标签：python, for-loop

我有一个解析文本文件行的循环：

```
for line in file:
    if line.startswith('TK'):
        for item in line.split():
            if item.startwith('ID='):
                *stuff*
            if last_iteration_of_loop
                *stuff* 
```

我需要做一些作业，但直到第二个 for 循环的最后一次迭代才能完成。有没有办法检测到这一点，或者有办法知道我是否在最后一项`line.split()`？请注意，`item`第二个 for 循环中的 s 是字符串，它们的内容在运行时是未知的，所以我不能寻找特定的字符串作为标志来让我在最后知道我。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T15:55:09.243

只需参考 for 循环外的最后一行：

```
for line in file:
    if line.startswith('TK'):
        item = None
        for item in line.split():
            if item.startwith('ID='):
                # *stuff*

        if item is not None:
            # *stuff* 
```

该`item`变量在 for 循环之外仍然可用：

```
>>> for i in range(5):
...     print i
... 
0
1
2
3
4
>>>  print 'last:', i
last: 4 
```

请注意，如果您的文件为空（循环中没有迭代），`item`则不会设置；这就是为什么我们`item = None`在循环之前设置并在`if item is not None`之后进行测试的原因。

如果您必须拥有*与您的 test 匹配的最后一项，*请将其存储在一个新变量中：

```
for line in file:
    if line.startswith('TK'):
        lastitem = None
        for item in line.split():
            if item.startwith('ID='):
                lastitem = item
                # *stuff*

        if lastitem is not None:
             # *stuff* 
```

第二个选项的演示：

```
>>> lasti = None
>>> for i in range(5):
...     if i % 2 == 0:
...         lasti = i
...
>>> lasti
4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:54:47.983

试试这个：

```
for line in file:
    if line.startswith('TK'):
        items = line.split()
        num_loops = len(items)
        for i in range len(items):
            item = items[i]
            if item.startwith('ID='):
                *stuff*
            if i==num_loops-1: # if last_iteration_of_loop
                *stuff* 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T16:26:44.670

不知道为什么你不能只在最终循环之外修改，但你可以利用这个 - 它适用于任何迭代器，而不仅仅是那些已知长度的......

**未经广泛测试，可能效率不高**

```
from itertools import tee, izip_longest, count

def something(iterable):
    sentinel = object()
    next_count = count(1)

    iterable = iter(iterable)
    try:
        first = next(iterable)
    except StopIteration:
        yield sentinel, 'E', 0 # empty

    yield first, 'F', next(next_count) # first

    fst, snd = tee(iterable)
    next(snd)
    for one, two in izip_longest(fst, snd, fillvalue=sentinel):
        yield one, 'L' if two is sentinel else 'B', next(next_count) # 'L' = last, 'B' = body 
```

# c# - 浏览文件 WP7

> ID：11507903
> 
> 赞同：0
> 
> 时间：2012-07-16T15:52:18.537
> 
> 标签：c#, windows-phone-7

我正在为 Windows Phone 7 开发一个应用程序。用户需要从他的手机中选择一个文件（图像、办公文件、来自 skydrive 的文件等）。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:05:45.920

此时您无法浏览 WP7 设备的根文件系统。但是，您**可以浏览并允许用户**[从 Skydrive](http://wp7skydrive.codeplex.com/)中选择文件和从媒体库中选择[图片。](http://msdn.microsoft.com/en-us/library/hh394019%28v=vs.92%29.aspx)

# iphone - iphone将字符串传递给项目中的另一个.m文件

> ID：11507906
> 
> 赞同：0
> 
> 时间：2012-07-16T15:52:24.537
> 
> 标签：iphone, objective-c, xml, string, smtp

当用户按下按钮并在文本视图中键入时，ViewController.m 将组装电子邮件的正文。读取电子邮件的程序要求它是 XML 格式的。最终消息将如下所示：

```
NSString *sendMessage = [[NSString alloc]initWithFormat:@"<?xml version = \"1.0\" ?>\n<?commitcrmxml version = \"1.0\" ?>\n<CommitCRMTransaction>\n<ExternalApplicationName>Myapp</ExternalApplicationName>\n<SendResponseToEmail>err@mysite.com</SendResponseToEmail>\n<Password>pass</Password>\n<ReturnTransactionID>CRDOWV34HL53J543GENDYDH92BSF</ReturnTransactionID>\n<DataKind>TICKET</DataKind>\n<RecordData>\n<FLDTKTCARDID>%@</FLDTKTCARDID>\n<FLDTKTPROBLEM>%@\n%@\n%@\n%@\n%@\n%@</FLDTKTPROBLEM>\n<FLDTKTSTATUS>100</FLDTKTSTATUS>\n<FLDTKTKIND>General</FLDTKTKIND>\n<FLDTKTPRIORITY>10</FLDTKTPRIORITY>\n<FLDTKTSOURCE>Myapp</FLDTKTSOURCE>\n<FLDTKTSCHEDLENESTIM>60</FLDTKTSCHEDLENESTIM>\n<FLDTKTFORDISPATCH>N</FLDTKTFORDISPATCH>\n</RecordData>\n</CommitCRMTransaction>", cardID, tempStoreCompany, tempStoreLocation, tempStoreName, tempStorePhone, tempStoreEmail, descriptionMessage]; 
```

我的第二个实现文件 MailSend.m 将使用 (SKP)SMTP 发送消息。MailSend.m 需要访问 sendMessage 字符串（在 ViewController.m 中）中的文本，以便可以正确发送消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:10:30.023

做一个属性

```
@property (nonatomic,retain) NSString *sendText; 
```

在 .h 文件中并在 .m 文件中合成为

```
@synthesize sendText; 
```

然后将其设置在您分配`MailSend`对象的位置，例如

```
MailSend *ms = [[MailSend alloc] init....];
ms.sendText = sendMessage;
[self present...];
//or self.navigationController pushVie...]; 
```

`sendText`并使用in访问此字符串`MailSend.m`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:59:23.820

您可以通过三种简单的方法来执行此操作。

* * *

第一个是 Inder 如何说明您创建和设置属性的位置。

* * *

第二种方法是在您的 SecondViewController 中创建一个接受 NSString 作为 s 参数的方法。

SecondViewController.h

```
- (void)setTextBody:(NSString*)_body; 
```

第二视图控制器.m

```
- (void)setTextBody:(NSString*)_body {
localBodyString = _body;
} 
```

第一视图控制器.m

```
SecondViewController *second = [[SecondViewController alloc] init...];
[second setTextBody:sendMessage];
//Push the view controller 
```

* * *

另一种方法是向接受 NSString 的 SecondViewController 类添加一个新的 init 方法。

SecondViewController.h

```
- (id)initWithString:(NSString*)_body; 
```

第二视图控制器.m

```
- (id)initWithString:(NSString*)_body {
if (self)
 localBodyString = _body;
return self;
} 
```

第一视图控制器.m

```
SecondViewController *second = [[SecondViewController alloc] initWithString:sendMessage];
//Push view controller 
```

现在，如果这两个都需要在头文件中定义一个 NSString *localBodyString 变量。

# objective-c - 如何检查对象是否为 UIButton

> ID：11507908
> 
> 赞同：2
> 
> 时间：2012-07-16T15:52:34.120
> 
> 标签：objective-c, uibutton

我有一个`if`语句需要知道对象类型是否是按钮。

到目前为止，我有：

```
NSLog(@" %@ ",[myObject class]); 
```

返回`UIButton`，所以我知道这是有效的。

接下来是`if`声明：

```
if([myObject isMemberOfClass:_______]) 
```

这是我遇到问题的地方，因为我不允许`UIButton`作为`isMemberOfClass:`. 我尝试使用`UIButtonTypeCustom`，但它不满足`if`声明。

有什么建议么 ？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T16:30:26.723

其他答案和评论已经在这一点上得到了解决，但它可能会变得更清楚。

使用`isMemberOfClass:`时，参数必须是`Class`对象。您可以使用选择器为任何类获取其中之一`class`。因此：

```
if ([myObject isMemberOfClass:[UIButton class]])
    NSLog(@"It's a UIButton");
else
    NSLog(@"It's not a UIButton"); 
```

现在，`isMemberOfClass:`只有`YES`当对象具体是`UIButton`. 然而，更常见的是对对象是否*继承*自特定类感兴趣——尤其是在这里，因为 UIKit 可能`UIButton`在幕后使用私有子类。为此，您需要`isKindOfClass:`：

```
if ([myObject isKindOfClass:[UIButton class]])
    NSLog(@"It's a UIButton or some subclass");
else
    NSLog(@"It's not a UIButton"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:26:59.630

对于 is-a UIButton 检查，这是首选方法，因为它将检查它是否是作为 UIButton 的 NSProxy。尽管有人会这样做是值得怀疑的。

```
[myObject isMemberOfClass:[UIButton class]] 
```

或（如果 myObject 是代表 UIButton 的 NSProxy 将失败）

```
if([myObject class] == [UIButton class]) 
```

对于 UIbutton 的 is-a 或子类

```
[myObject isKindOfClass:[UIButton class]] 
```

通常，您可能希望使用`[myObject respondsToSelector:@selector(someSelector:)]`或`[myObject conformsToProtocol:@protocol(someProtocol)]`在使用特定功能时使用，因为 myObject 可能不是您想要的类，但可以实现所需的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:55:16.557

最简单的是

```
if([myObj class] == [UIButton class]) 
```

根据您的代码，您缺少

```
if([myObject isMemberOfClass:[UIButton class]]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:56:29.083

```
if ([myObject isMemberOfClass:[UIButton class]]) {

} 
```

或者

```
if ([myObject isKindOfClass:[UIButton class]]) {

} 
```

# java - 在 JTable Java 中更改行背景

> ID：11507913
> 
> 赞同：0
> 
> 时间：2012-07-16T15:52:44.973
> 
> 标签：java, swing

我的项目中有一个名为`tasktable`. 它从数据库（oracle）中检索数据。如何更改单元格中具有颜色的行的颜色 ex。(i,8) 当我点击刷新按钮时自动？

我已经尝试了很多次将该源代码放在特定行上，但它最终为所有表格着色：

```
 int count;      
          count = tasktable.getRowCount();
         for (int i=0;i<count;i++)
            { 
                  rr = new Object ();
                   rr = tasktable.getModel().getValueAt(i,8);
                   if(rr.equals("GREEN"))
                   {
                 setBackground(Color.GREEN);
                   }
                    if(rr.equals("red"))
                   {
                       setBackground(Color.red);
                   }
                     if(rr.equals("BLUE"))
                   {
                      setBackground(Color.BLUE);
                   }
                      if(rr.equals("yellow"))
                   {
                     setBackground(Color.yellow);
                   }
                       if(rr.equals("pink"))
                   {
                     setBackground(Color.pink);
                   }
                       if(rr.equals(null))
                   {
                     setBackground(null);
                   } 
```

如何帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:58:17.183

将自定义[TableCellRenderer](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableCellRenderer.html)添加到您的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:58:54.453

`setBackground()`设置 的背景颜色，而`JTable`不是每行或单元格的背景颜色。`TableCellRenderer`正如@Recursed 所说，您需要一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T16:03:07.587

如果您所做的只是更改行颜色，请将您的子类`JTable`化并覆盖该[`prepareRenderer`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JTable.html)方法：

```
public Component prepareRenderer(TableCellRenderer renderer,
                             int row,
                             int column) {    
     Component c = super.prepareRenderer(renderer, row, column);
     if (row == HIGHLIGHT_ROW) {
          c.setBackground(BG_COLOR); 
     }
     return c;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T16:00:13.143

```
 Component comp = super.getTableCellRendererComponent(
                  table,  value, isSelected, hasFocus, row, col);

 String s =  table.getModel().getValueAt(row, VALIDATION_COLUMN ).toString();
 comp.setForeground(Color.red); 
```

> [http://www.java-forums.org/awt-swing/541-how-change-color-jtable-row-having-particular-value.html](http://www.java-forums.org/awt-swing/541-how-change-color-jtable-row-having-particular-value.html)

# android - 如何将事件添加到 android calendarview

> ID：11507914
> 
> 赞同：3
> 
> 时间：2012-07-16T15:52:45.260
> 
> 标签：android, events, add, calendarview

我开始使用 CalendarView 来显示日历。这工作正常，但现在我想在某些特定日子展示一些事件。我正在开发一个演示，所以只想在我的日历中硬编码一些假事件以显示功能，但不知道该怎么做。是的，已经看过de文档了。我应该使用 CalendarProvider 吗？那么如何从我的 CalendarView 中获取 id？

谢谢！！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-22T07:33:15.983

是的，在某个特定日期添加事件非常容易。您可以在 calendar.java 文件中添加以下代码并添加该特定日期的事件。

```
public Runnable calendarUpdater = new Runnable() {

    @Override
    public void run() {
        items.clear();

        // Print dates of the current week
        DateFormat df = new SimpleDateFormat("yyyy-MM-dd", Locale.US);
        String itemvalue;
        for (int i = 0; i < 7; i++) {
            itemvalue = df.format(itemmonth.getTime());
            itemmonth.add(Calendar.DATE, 1);
            items.add("2013-09-12");
            items.add("2013-10-07");
            items.add("2013-10-15");
            items.add("2013-10-20");
            items.add("2013-11-30");
            items.add("2013-11-28");

        }

        adapter.setItems(items);
        adapter.notifyDataSetChanged();
    }
}; 
```

# .htaccess - 将旧域重定向到新域的ROOT？

> ID：11507915
> 
> 赞同：2
> 
> 时间：2012-07-16T15:52:46.857
> 
> 标签：.htaccess, redirect

所以我有一个旧域和一个新域。现在我想将整个旧域重定向到我的新域。所以我有这个 .htaccess;

```
Options +FollowSymLinks
RewriteEngine on
Redirect 301 / http://www.newdomain.com/ 
```

这适用于 olddomain 的根目录，当我导航到`olddomain.com/somepage.php/`我被重定向到`NEWdomain.com/somepage.php/`并且我想始终将访问者发送到 newdomain.com 的根目录时。

根据我从这里的其他问题中了解到的情况，它对其他人来说效果很好（它总是发送根域）有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:57:56.153

尝试使用`RedirectMatch`a

```
RedirectMatch 301 / http://www.newdomain.com/ 
```

这告诉 apache 专门匹配某些东西（在这种情况下，任何带有 a`/`的东西）并专门重定向到目标。

# php - 当 $str 不为空时，mysql_real_escape_string($str) 是否可能为空

> ID：11507916
> 
> 赞同：1
> 
> 时间：2012-07-16T15:52:48.630
> 
> 标签：php

我试图了解`mysql_real_escape_string($str)`如果不为空是否可以为`$str`空（`$str`我的意思是空的`empty($str)`是`true`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:12:12.950

> `mysql_real_escape_string`
> 
> 返回转义的字符串，否则返回`FALSE`错误。

所以返回值要么`false`是有错误（比如没有连接到数据库），要么算作“空”。或者它是转义字符串，这意味着字符串中还有*额外*的转义字符。`mysql_real_escape_string`不会*减少*字符串。

所以如果字符串有内容并且你连接到数据库，如果输入不是“空的”，输出也不会是。如果有错误，输出将为“空”。

# debugging - 如何在 MATLAB 调试器中单步执行函数调用？

> ID：11507920
> 
> 赞同：2
> 
> 时间：2012-07-16T15:52:57.757
> 
> 标签：debugging, matlab

在调试 MATLAB 代码时，如果我`dbstep`在下一条语句是函数调用时调用，则调试器会跳过函数调用到当前 m 文件中的下一行代码。如何进入函数调用？我正在寻找像`next`gdb 中的函数。

**例子**

源文件：

```
=> b = foo(a);
   c = bar(b); 
```

我打电话`dbstep`：

```
 b = foo(a);
=> c = bar(b); 
```

我想要的是：

```
 function out = foo (a)
=>     out = baz(a); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T15:55:23.307

`next`gdb命令的 MATLAB 替代方法是`dbstep in`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T20:39:42.253

如果您使用 GUI，另一种选择是学习键盘快捷键，这对我逐步执行代码非常有帮助。

进入调试模式后，使用 F10 将逐行浏览当前文件。如果您想单步执行某个功能，只需使用 F11。跳出是shift+F11，F5会跑到最后。

# objective-c - Objective-C / iOS：为自定义视图子类化 UITableViewController

> ID：11507921
> 
> 赞同：1
> 
> 时间：2012-07-16T15:52:59.667
> 
> 标签：objective-c, ios, cocoa-touch

众所周知，Cocoa Touch 中的表格视图是最漂亮的框架元素之一。为方便起见，Apple 为我们提供了一个很好的视图控制器类，用于将表格视图的功能封装在 vc 中，`UITableViewController`.

同时，有时我们希望利用表格视图的功能而不让它占据整个屏幕。但是，似乎没有办法通过子类化来做到这一点`UITableViewController`。相反，我必须连接一个表格视图并手动订阅`UITableViewDelegate`and `UITableViewDataSource`。如果我尝试子类`UITableViewController`化，我的应用程序在它甚至可以将视图放在屏幕上之前就崩溃了......

我的问题是，我有什么遗漏吗？子类化时`UITableViewController`，我将我的自定义表格视图连接到中的 tableView 属性`UITableViewController`。我还有其他事情要做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T16:37:12.607

`UITableViewController`只是增加了一些小便利`UIViewController`：它创建和定位表视图，连接委托和数据源（通常与自身），将视图控制器`editing`属性传递给表，并在视图出现时执行一些有用的 UI 位。（有关详细信息，请参阅 [the docs][1]。）

几乎所有上述内容都是 A）您需要更改以拥有非全屏表格的事情，或 B）您可以在一行或两行中做的事情，这`UITableViewController`只是为了您的方便. 对于这种情况，您最好使用自己的`UIViewController`子类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T17:59:45.143

第1步：子类`UIViewController`而不是`UITableViewController`

```
MyTableViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

第 2 步：使用界面生成器删除 tableView 和自定义 View

`IBOutlet`第 3 步：在头文件中声明 tableView 属性`MyTableViewController`并将其绑定到界面构建器中的 tableView

恕我直言，这个过程会给你更多的灵活性。

# jquery - 滑动切换不起作用

> ID：11507924
> 
> 赞同：1
> 
> 时间：2012-07-16T15:53:06.313
> 
> 标签：jquery, slidetoggle

我在其他元素中有以下脚本。但是，仅子国家/地区，如果再次单击`expands`则不会。`collapse`相反，无论您点击多少次，它们都会再次展开。

有人可以帮忙吗？

```
<div id="loginContainer">
<a href="#" id="loginButton"><span style="background: #EBEBEB url('/Images/Flags/united_kingdom.jpg') right no-repeat;">United Kingdom</span><em></em></a>
<div style="clear:both"></div>
 <div id="loginBox">
  <!-- Countries Accordion starts here -->
  <ul class="the_menu">
      <li><a href="#" style="background: url('/Images/Flags/USA.gif') left no-repeat;" >United States</a></li>      
      <li>
      <a href="#" class="expand" title="Switzerland" style="background: url('/Images/Flags/USA.gif') left no-repeat;" >Switzerland ..</a>
          <ul class="submenu">
              <li><a href="#" title="Switzerland (German)" style="background: url('/Images/Flags/USA.gif') left no-repeat;;">Switzerland (German)</a></li>
              <li><a href="#" title="Switzerland (French)" style="background: url('/Images/Flags/USA.gif') left no-repeat;;">Switzerland (French)</a></li>
              <li><a href="#" title="Switzerland (Italian)" style="background: url('/Images/Flags/USA.gif') left no-repeat;;">Switzerland (Italian)</a></li>
          </ul>
      </li>
      <li><a href="#" title="Germany" style="background: url('/Images/Flags/Germany.gif') left no-repeat;;">Germany</a></li>
      <li><a href="#" class="expand" title="Canada" style="background: url('/Images/Flags/Germany.gif') left no-repeat;;">Canada ..</a>
          <ul class="submenu">
              <li><a href="#" title="Canada (English)" style="background: url('/Images/Flags/Germany.gif') left no-repeat;;">Canada (English)</a></li>
              <li><a href="#" title="Canada (French)" style="background: url('/Images/Flags/Germany.gif') left no-repeat;;">Canada (French)</a></li>
          </ul>
      </li>
      <li><a href="#" title="Turkey" style="background: url('/Images/Flags/Germany.gif') left no-repeat;">Turkey</a></li>
      <li><a href="#" title="Sweden" style="background: url('/Images/Flags/Germany.gif') left no-repeat;"> Sweden</a></li>
  </ul>
  </div> 
</div> 
```

并且 JQuery 脚本是（请注意下面的新脚本）：

```
$(document).ready(function () {

 var countriesContainer = $('#loginContainer');
var button = $('#loginButton');
var box = $('#loginBox');
//var form = $('#loginForm');
//button.removeAttr('href');

countriesContainer.hover(function() {
    box.toggle();
    button.toggleClass('active');
});
box.mouseup(function() { 
    return false;
});

$(this).mouseup(function(login) {
    if(!($(login.target).parent('#loginButton').length > 0)) {
        button.removeClass('active');
        box.hide();
        $('ul.submenu').hide();
    }
});

 $('ul.submenu').hide();
    $('.expand').click( function(){
        $(this).siblings('.submenu').slideToggle('normal');
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:58:49.243

你的标记有问题，在一个地方`.submenu`是兄弟，`.expand`在另一个地方不是：

```
<a href="#" class="expand" title="Switzerland" style="background: url('/Images/Flags/USA.gif') left no-repeat;" >Switzerland ..</a>
          <ul class="submenu"> 
```

```
<li><a href="#" class="expand" title="Canada" style="background: url('/Images/Flags/Germany.gif') left no-repeat;;">Canada ..</a>
          <ul class="submenu"> 
```

```
$(document).ready(function () {
 $('ul.submenu').hide();
    $('.expand').click( function(){
        $(this).parent().next('.submenu').slideToggle('normal');
        return false;
    });
}); 
```

# android - 循环播放 ogg 声音

> ID：11507929
> 
> 赞同：1
> 
> 时间：2012-07-16T15:53:20.947
> 
> 标签：android, audio, loops, media-player, ogg

我在 res/raw 文件夹中有一个 ogg 声音。我尝试**用循环播放这个声音**（没有停止声音或切割声）。我创建了 OGG 文件并使用 winamp 或其他音乐播放器播放并完美重复。此外，我在 OGG 声音文件中创建了值为 true 的**元数据 ANDROID_LOOP 。**

代码是基本的：

```
...
mp = MediaPlayer.create(this, R.raw.sound);
mp.setLooping(true);
mp.setVolume(0, 0); // for initial fader, irrelevant
mp.start();
... 
```

在 Android 1.5、1.6、.....、2.3.X 中运行良好！

但在我更新到 Android ICS (4.0.3) 的三星 Galaxy S2 中，我在循环之间听了一小段时间。

有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T15:49:48.000

自动回答：在 Android 4.0.4 中无需更改即可正常工作。我认为这是 Android [3.2, 4.0.3] 上的问题？可能的错误？

[http://code.google.com/p/android/issues/detail?id=18756](http://code.google.com/p/android/issues/detail?id=18756)

# php - 防止多个设备同时登录到单个用户帐户

> ID：11507933
> 
> 赞同：1
> 
> 时间：2012-07-16T15:53:29.380
> 
> 标签：php, zend-framework, session, login

我的在线软件应用程序有一个功能正常的身份验证、ACL 和会话管理系统。由于这是基于每个用户帐户的付费服务，因此我需要确保用户帐户不能以与 PayPal 管理企业帐户相同的方式在员工之间共享。

我的斗争是找到一种方法来实现这样的功能，一个有能力的技术用户无法通过修改 Javascript 或使用客户端代理来规避。

目前，每个公司帐户在我的服务器上都有一个数据库，其中包含一个由`session_id (PK), session_user, session_data, client_ip, timestamp_created`和`timestamp_updated`列组成的“会话”表。每当用户登录时，该`session_user`列都会更新为他们的登录名。如果另一个人在另一台机器上登录该帐户，则先前访问的帐户的 session_user 列将设置为`NULL`。结果是任何两行都不应该具有相同的值`session_user`。可能值得注意的是，客户没有对其数据库的管理访问权限。

客户端应用程序每 5 秒在计时器上运行一个 Javascript 函数，该函数执行对 Zend 控制器的 AJAX 调用。该控制器`session_user`使用 . 通过 DB 查询检查活动会话的列`Zend_Session::getId();`。此方法`echo`是 JSON 编码的响应，`success`如果`TRUE`在数据库中`session_id`有关联，或者列中没有值，则设置为。如果该方法返回，Javascript 函数会继续提醒用户另一台机器已登录到他们的帐户，然后将他们重定向到登录页面。`session_user``FALSE``session_user``FALSE`

这种方法的问题在于，任何对 Chrome 的检查器或 Mozilla 的 FireBug 有经验的人都可以删除执行 AJAX 调用的 Javascript 并继续在许多机器上使用该应用程序。更糟糕的是，这种简单的方法只是漏洞的开始。

我有一种感觉，我需要研究 Zend 的插件架构，也许在此期间实施检查`preDispatch()`以确保当前`session_id`具有在相应`session_user`表中设置的值。此检查将与我当前的结构相辅相成，因为我觉得我的大多数用户本身并不精通基本的“黑客”，并且会发现以防止帐户共享。如果这种服务器端检查失败，因为它发生在请求资源时，可能会抛出错误并且请求的数据不会被推送到前端（例如用于查看产品的数据）。

这种方法看起来会起作用吗，还是有更好的方法来实现这种功能？我已经阅读了一堆 SO 帖子，这些帖子引发了关于最终用户如此繁琐是否是一个好主意的争论。我们已经决定，由于收入主要基于购买额外用户帐户的公司帐户，因此非常需要防止任何形式的帐户共享。我想避免阻止用户使用现有会话登录帐户。信不信由你，我宁愿让用户被另一台登录的设备从他们的活动会话中引导出来而烦恼，因为我觉得这会鼓励购买额外的用户许可证。

请随时询问您是否需要任何其他信息，或者需要澄清我在帖子中描述的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:44:39.277

1.  每次在您的网站上执行操作时，将用户的 IP 存储为使用`$_SERVER['REMOTE_ADDR']`.
2.  检查 IP 是否与上一个条目中的会话数据一起更改 - 如果是，让他们注销并重新登录。

这样一来，单独的设备就不能同时运行而不必重新登录。

# android - 什么 API 可用于将 Android 应用程序与 Windows 应用程序同步

> ID：11507936
> 
> 赞同：1
> 
> 时间：2012-07-16T15:53:42.340
> 
> 标签：android, windows

我想在 Android 和 Windows 上编写一个行为有点像 dropbox 或 evernote 的应用程序。我需要实现的功能基本上允许某人从 Android 应用程序上传数据并更新运行所述 Windows 应用程序的远程用户。这是一个简单的用例/示例：

1.  移动设备用户使用所述Android应用程序来指示他/她的全球定位坐标。
2.  这些坐标由 Android 应用程序发送到某处的服务器。
3.  服务器更新已注册的 Windows 客户端应用程序，说明移动设备用户已提交新坐标。
4.  然后，Windows 客户端应用程序可以在地图上查看这些坐标。

更重要的是，这个想法是实现一些功能，移动设备用户可以提交数据并让运行 Windows 的某种远程控制中心访问这些数据。另外请不要提及 GPS 特定的 API，因为我提到的示例只是一个示例。

非常感谢！

# c# - 增加整个桌面上的光标大小

> ID：11507945
> 
> 赞同：1
> 
> 时间：2012-07-16T15:54:25.353
> 
> 标签：c#, .net, pinvoke, mouse-cursor

首先，请抛开“您的应用程序不应该这样做”的概念。这正是购买该软件的人们所期望的。

如何在系统范围内增加鼠标光标的大小？我也必须增加所有鼠标光标，所以我认为[SetCursor](http://www.pinvoke.net/default.aspx/user32.setcursor)不会起到作用，至少不会以任何漂亮、干净的方式。

而且我不能使用[此处详述](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.size%28v=vs.85%29.aspx)的表单光标大小，因为这只会在光标在表单上处于活动状态时影响光标。

我看到 Windows 的“轻松访问中心”中有“超大”鼠标光标，所以一定有办法......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:45:27.233

由于两件事，对此的任何解决方案都会变得非常棘手：1.任何应用程序都可以自行将光标更改为其他任何东西2.光标最多为32x32像素

如果应用程序将光标更改为 32x32 像素，则无法将其放大。

超大光标只是使用了光标可以使用的更多 32x32 像素。默认的只是使用 32x32 的左上角或多或少象限。

您可以使用 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms648388(v=vs.85).aspx不断检索当前光标](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648388(v=vs.85).aspx)

然后通过拉伸图像在光标大小加倍的所有窗口上绘制，然后将光标设置为某个空光标文件。这是非常骇人听闻的，可能会导致大量闪烁和兼容性问题。

# ios - 故事板xcode上令人困惑的坐标系？

> ID：11507957
> 
> 赞同：0
> 
> 时间：2012-07-16T15:54:50.537
> 
> 标签：ios, xcode, coordinate

我正在尝试将我放入 Xcode 中的图像视图放在 0、0 右上角，320 460 因此它跨越整个屏幕，在尺寸检查器中，我确保原点带有红色箭头左上角所以它是正确的坐标，但是由于某种原因，当我将图像视图放在确切的中心时，它告诉我中心是 20x 160 y 为什么要这样做，当我点击我的视图时它说中心是0x 0y 应该是这样，这让我很生气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:09:29.410

我不确定“当我将图像视图放在确切的中心”是什么意思，但无论您是否使用尺寸检查器，并将原点设置为（0,0），尺寸为（320,460），它都会跨越整个视图。

除此之外，您将图像视图加载到其中的视图需要起源于 (0,0) 并且大小为 (320,460)。

听起来您将图像视图放入的视图定位不正确，因为坐标系与父视图相关。

# c++ - 为什么在 C++ 中明确声明“内联”

> ID：11507959
> 
> 赞同：14
> 
> 时间：2012-07-16T15:54:59.143
> 
> 标签：c++, optimization, inline

> **可能重复：**
> [我应该何时为函数/方法编写关键字“内联”？](https://stackoverflow.com/questions/1759300/when-should-i-write-the-keyword-inline-for-a-function-method)

所以这是一个困扰我一段时间的问题，我无法得到明确的答案。我的理解是，一个好的编译器通常会意识到内联函数既安全又有利，如果打开优化，它将内联所有此类函数，因为它们被明确标识为内联函数由程序员决定。此外，编译器将识别何时内联函数不安全/不明智，并且在这种情况下将简单地忽略程序员对内联函数的请求。

因此，我想知道将函数明确声明为内联函数有什么好处？只要打开优化，编译器就会内联它认为内联的所有函数，并且只内联那些函数。

由于嵌套的 h 文件，我发现了一些关于内联保护免受多个定义的讨论，但肯定 #ifdefine'ing 标头源代码是更好的做法，并且再次使关键字内联无效？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T15:57:06.180

您对编译器优化很了解。你对什么`inline`是错误的假设是错误的。尽管名称`inline`不是为了优化。`inline`主要是“违反”[*单一定义规则*](https://stackoverflow.com/questions/4192170/what-exactly-is-one-definition-rule-in-c)而不受惩罚。基本上，它告诉链接器许多翻译单元可以看到该定义，因此它不应该在多个翻译单元上找到它。

一些编译器可能会将其视为内联函数的提示，但这完全取决于编译器，并且完全可以忽略该提示。

标头保护仅防止同一翻译单元上的多个定义。它们不适用于翻译单元。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T15:56:55.030

标头保护不能防止多个定义错误。

链接器会遇到多个定义，并且当相同的定义包含在单独的编译单元中时会发生。

# r - R：警告：通过因子级别编号将 data.frame 强制转换为矩阵

> ID：11507960
> 
> 赞同：2
> 
> 时间：2012-07-16T15:55:01.197
> 
> 标签：r, matrix, dataframe

我使用 read.table 函数从 CSV 文件中读取了一些数据帧。我给了 read.table 函数

```
stringsAsFactors = FALSE 
```

争论。

我还将每个数据框的行名设置为：`rownames(A) <- seq(1: nrow(A)).`

我使用一系列 cbind 合并了这些数据帧。

```
C = cbind(A,B)
E = cbind(C,D)
F = cbind(C,E) 
```

我使用以下方法创建了一个大矩阵（ bigmemory 包）：

```
result <- as.big.matrix ( F , type="double", backingfile = "final.bin", 
backingpath = getwd(), descriptorfile = "final.desc") 
```

这实际上效果很好，但它给了我以下警告信息：

> **通过因子级别编号将 data.frame 强制转换为矩阵**

为什么它给了我这个警告信息？当我读入数据框时，我输入了`stringsAsFactors = FALSE`为什么这些因素？

# c - MS CryptoAPI - 错误 0x80090016 (NTE_BAD_KEYSET) 的机器密钥库，带有 certreq 创建的密钥

> ID：11507961
> 
> 赞同：2
> 
> 时间：2012-07-16T15:55:04.010
> 
> 标签：c, openssl, cryptoapi

# 概括

我创建了一个 PKCS#10 CSR[`certreq`](http://technet.microsoft.com/en-us/library/cc736326%28v=ws.10%29.aspx)并设置了选项`Exportable=TRUE`。这成功地在 location 下创建了一个密钥`REQUEST`。我也有一个有效的证书，其中包含`MY`. 如果我尝试访问其中任何一个，CryptoAPI 会报告错误代码`0x80090016`。

在不同的访问权限下运行目前还不能解决这个问题。

# 目标

我的目标是把钥匙`MY`和`REQUEST`. 如果我调用`CryptAcquireContextA()`其中任何一个，它就会失败。

# 系统

视窗 7 x64

# 示例源代码

我的完整代码如下所示：

```
hStore = CertOpenStore(CERT_STORE_PROV_SYSTEM_A, 0, 0, CERT_SYSTEM_STORE_LOCAL_MACHINE, "REQUEST");
pCert = CertFindCertificateInStore(hStore, X509_ASN_ENCODING, 0, CERT_FIND_SUBJECT_STR_A, "CERTIFICATE_SUBJECT", NULL);

CertGetCertificateContextProperty(pCert, CERT_KEY_PROV_INFO_PROP_ID, NULL, &len);
pinfo = (CRYPT_KEY_PROV_INFO *) malloc(len);
CertGetCertificateContextProperty(pCert, CERT_KEY_PROV_INFO_PROP_ID, pinfo, &len);

provname = wide_to_asc(pinfo->pwszProvName);
contname = wide_to_asc(pinfo->pwszContainerName);

if(!CryptAcquireContextA(&hCryptProv, contname, provname, pinfo->dwProvType, 0)) {
    err = GetLastError();
    fprintf(stderr, "Error: 0x%x\n", err);
}
CryptGetUserKey(hCryptProv, pinfo->dwKeySpec, &hUserkey); 
```

这段代码大部分是从*OpenSSL capi engine*复制而来的。由于引擎出现故障，我创建了尽可能小的代码来搜索错误。

# 错误

如果我运行它，它会以输出失败`Error: 0x80090016`。根据[微软](http://support.microsoft.com/kb/238187)的说法，这意味着三件事之一：

*   密钥容器不存在。
*   您无权访问密钥容器。
*   受保护的存储服务未运行。

# 到目前为止我做了什么？

*   启动服务“受保护的存储”
*   已验证的容器存在 MMC 和证书管理单元`Local Computer`
*   在用户上下文中的用户存储上运行相同的代码 - 它有效

## 文件系统权限

经过一番谷歌搜索后，我尝试更改文件系统的权限。我通过查看`contname`代码的变量并搜索文件找到了这些文件。我更改了它们的权限（更准确地说，我更改了父文件夹的权限）。虽然这解决了问题`MY`，但似乎我无法更改它`REQUEST`。

这里的一个注意事项是我的容器`MY`似乎在这里：

```
%APPDATA%\Microsoft\Crypto\RSA\S-1-5-21-1650336054-1974872081-316617838-545102 
```

因为`REQUEST`我在另一个地址下找到了它：

```
%ALLUSERSPROFILE%\Microsoft\Crypto\RSA\MachineKeys 
```

我不确定这里的工作原理，所以我无法解释为什么它将它们放在不同的位置（一个是以用户为中心，另一个是系统文件夹）。该`MY`商店是使用常规管理员提示和命令创建的`certreq -new inf_file.inf cert-csr.csr`，在我收到证书后，我发布了`certreq -accept cert.pem`. 然后我用相同的命令创建了一个新的 csr。

## 不同的权限级别

我尝试使用以下权限执行我的程序：

*   我的本地用户帐户
*   管理员提示符（cmd->以管理员身份启动）
*   nt 权限\系统（`whoami`输出）

为了收到服务提示，我`psexec.exe –ids cmd.exe`根据[MaaSters 中心的提示执行了](http://www.maas360.com/maasters/forums/laptop-management/show/177/starting-a-process-in-system-context)

# 最后的话

任何有关如何进一步缩小此问题的帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:24:27.703

我终于能够解决这个问题，它比我想象的要简单得多。我确信我会收到一个明确的容器名称，不需要更具体，但`CryptAcquireContext`实际上需要我传递一个标志`CRYPT_MACHINE_KEYSET`。

所以我的函数调用必须如下所示：

```
CryptAcquireContextA(&hCryptProv, contname, provname, pinfo->dwProvType, CRYPT_MACHINE_KEYSET) 
```

不幸的是，OpenSSL 引擎不支持此功能，因此您必须自己在引擎中进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T20:48:44.720

请参阅 MSDN：“由非管理员用户创建的没有此标志的密钥容器只能由创建密钥容器的用户和本地系统帐户访问。”

在此处完成详细信息：[https ://msdn.microsoft.com/en-us/library/windows/desktop/aa379886(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa379886(v=vs.85).aspx)

# wcf - 无法将图像上传到 WCF Rest 服务

> ID：11507963
> 
> 赞同：3
> 
> 时间：2012-07-16T15:55:10.133
> 
> 标签：wcf, rest, post, image-upload

我正在创建一个 WCF Rest 服务以从移动应用程序上传图像。但我收到远程服务器返回错误：（400）错误请求。谁能指出我做错了什么。以下是我的定义：

```
 [OperationContract]
    [WebInvoke(BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = "/PostImage",Method ="POST")]

 PublicMessage PostImage(Upload obj);

[DataContract]
    public class Upload
    {
        [DataMember]
        public Stream File { get; set; }
    } 
```

服务定义：

```
public PublicMessage PostImage(Upload obj)
    {
        byte[] buffer = StreamToByte(obj.File);   //Function to convert the stream to byte array
     FileStream fs = new FileStream(@"D:\ShopMonkeyApp\Desert.jpg", FileMode.Create, FileAccess.ReadWrite);
        BinaryWriter bw = new BinaryWriter(fs);

        bw.Write(buffer);

        bw.Close();

        return new PublicMessage { Message = "Recieved the image on server" };
    } 
```

客户端应用：

```
string filePath = @"D:\ShopMonkeyApp\Desert.jpg";

        string url = "http://localhost:50268/shopmonkey.svc/PostImage/"; // Service Hosted in IIS

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

        request.Accept = "text/xml";

        request.Method = "POST";

        request.ContentType = "image/jpeg";

        using (Stream fileStream = File.OpenRead(filePath))

        using (Stream requestStream = request.GetRequestStream())
        {

            int bufferSize = 1024;

            byte[] buffer = new byte[bufferSize];

            int byteCount = 0;

            while ((byteCount = fileStream.Read(buffer, 0, bufferSize)) > 0)
            {

                requestStream.Write(buffer, 0, byteCount);

            }

        }

        string result;

        using (WebResponse response = request.GetResponse())

        using (StreamReader reader = new StreamReader(response.GetResponseStream()))
        {

            result = reader.ReadToEnd();

        }

        Console.WriteLine(result); 
```

网络配置：

```
 <system.serviceModel>
        <services>
      <service name="ShopMonkey.ShopMonkey" behaviorConfiguration="ServiceBehaviour">
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="webHttpBinding" contract="ShopMonkey.IShopMonkey" behaviorConfiguration="web">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.behaviorConfiguration="web"
          -->
        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
          <dataContractSerializer maxItemsInObjectGraph="10000000"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

谢谢

维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:46:23.800

增加 web.config 中的消息队列长度可以解决我的问题。

```
<webHttpBinding>
        <binding name="streamWebHttpbinding" transferMode="Streamed"  maxReceivedMessageSize="1000000000000" receiveTimeout="01:00:00" sendTimeout="01:00:00" />
      </webHttpBinding> 
```

谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:34:07.667

如果您在 Upload 类上没有任何其他属性，则将 WCF 服务方法更改为具有 Stream 参数，而不是将其包装在一个类中，如下所示：

```
[OperationContract]
[WebInvoke(UriTemplate = "/PostImage",Method ="POST")]
PublicMessage PostImage(Stream obj); 
```

然后就可以使用WebClient类直接上传文件了，如下图：

```
var c = new System.Net.WebClient();
c.OpenWrite(string.Concat("http://localhost:50268/shopmonkey.svc", "/PostImage"), "POST");
c.Headers[HttpRequestHeader.ContentType] = "image/jpeg";            
return c.UploadFile(string.Concat(serviceBaseUrl, resourceUrl), filePath); 
```

另请参阅此[链接](https://stackoverflow.com/questions/9451141/uploading-an-image-using-wcf-restful-service-full-working-example/9464778#9464778)。

**更新**：

请在下面找到示例以使您的代码正常工作：

```
[OperationContract]
[WebInvoke(UriTemplate = "/PostImage",Method ="POST")]
PublicMessage PostImage(Upload obj);

[DataContract]
public class Upload
{
    [DataMember]
    public MemoryStream FileContent { get; set; }
} 
```

现在实现 PostImage 的方法如下所示：

```
public PublicMessage PostImage(Upload obj)
{
        byte[] buffer = new byte[obj.FileContent.Length];
        using (FileStream ms = new FileStream(@"D:\ShopMonkeyApp\Temp\Desert.jpg", FileMode.OpenOrCreate))
        {
            obj.FileContent.Position = 0;
            int read = fileInfo.Content.Read(buffer, 0, buffer.Length);
            ms.Write(buffer, 0, read);
        }

    return new PublicMessage { Message = "Recieved the image on server" };
} 
```

现在，由于我们的服务器端代码已经完成，现在移动到将文件上传到服务器的客户端部分，如下所示：

```
 private string ClientSample()
    {
            var uploadObject = new Upload();
            Image image = Image.FromFile(@"D:\ShopMonkeyApp\Desert.jpg");
            MemoryStream ms = new MemoryStream();
            uploadObject.FileContent = new MemoryStream();
            image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
            ms.WriteTo(uploadObject.FileContent);
            ms.Close();

        string responseMessage = null;            
        var request = WebRequest.Create(http://localhost:50268/shopmonkey.svc/PostImage) as HttpWebRequest;
        if (request != null)
        {
            request.ContentType = "application/xml";
            request.Method = method;
        }

        if(method == "POST" && requestBody != null)
        {
            byte[] requestBodyBytes;
            requestBodyBytes = ToByteArrayUsingDataContractSer<Upload>(requestBody);
            request.ContentLength = requestBodyBytes.Length;
            using (Stream postStream = request.GetRequestStream())
                postStream.Write(requestBodyBytes, 0, requestBodyBytes.Length);                    
        }

        if (request != null)
        {
            var response = request.GetResponse() as HttpWebResponse;
            if(response.StatusCode == HttpStatusCode.OK)
            {
                Stream responseStream = response.GetResponseStream();
                if (responseStream != null)
                {
                    var reader = new StreamReader(responseStream);

                    responseMessage = reader.ReadToEnd();                        
                }
            }
            else
            {   
                responseMessage = response.StatusDescription;
            }
        }
    }

    private static byte[] ToByteArrayUsingDataContractSer<T>(T requestBody)
    {
        byte[] bytes = null;
        var serializer1 = new DataContractSerializer(typeof(T));            
        var ms1 = new MemoryStream();            
        serializer1.WriteObject(ms1, requestBody);
        ms1.Position = 0;
        var reader = new StreamReader(ms1);
        bytes = ms1.ToArray();
        return bytes;            
    } 
```

注意：确保客户端和服务器上的 Upload 对象定义了相同的命名空间和属性，以避免任何反序列化问题。

# git - Git - 对文件进行了本地更改，但是，需要从远程存储库取回原始副本？

> ID：11507966
> 
> 赞同：3
> 
> 时间：2012-07-16T15:55:13.713
> 
> 标签：git, github

我在一个文件上对我的本地主机进行了更改。我从另一个分支检查了它。

```
I am in master branch
git checkout development /foo/file1.txt 
```

我需要恢复到原始文件。我试图做 git pull 但它说我已经是最新的了。我没有添加或提交更改。

我使用什么命令从存储库中获取文件的干净/原始副本？还是我本地存储库的原始副本？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T16:43:49.960

如果我理解正确，您有一个尚未添加或提交的本地修改文件。如果你跑步`git status`，你应该会看到

```
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   foo/file1.txt
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

如果是这样的话，git 实际上是在状态输出中给你一个提示。你需要做的就是`git checkout -- foo/file1.txt`。这将丢弃您在本地所做的更改，并返回您签入的内容。由于 git 告诉您您在使用遥控器时是最新的`git pull`，因此这应该与遥控器的版本相同。
希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-24T07:02:26.300

1.  在单个文件上从远程存储库进行 git pull 是一种不好的做法（除非特别需要，这非常罕见）。
2.  如果您只想获取文件的干净副本（或恢复对文件所做的更改），请执行以下操作：

    git checkout 文件名

这不仅从您的本地 repo 获取副本，而且从同一个分支获取副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-27T23:52:27.500

由于 git v2.23 这样做的首选方法是：

```
git restore <filename> 
```

# node.js - 基本的 socket.io 身份验证

> ID：11507970
> 
> 赞同：1
> 
> 时间：2012-07-16T15:55:21.357
> 
> 标签：node.js, socket.io

我有以下代码允许用户加入房间开始聊天。

```
server.on('connect', function(data) {
  nickname = prompt('What is your name?');
  server.emit('join', {name : nickname, room : $('#roomid').val()});
  $('#events').append('<li>Welcome, ' + nickname + '!</li>');
}); 
```

但是，我担心的一个问题是：是什么阻止了用户使用数百个用户名发出“加入”，向聊天室发送垃圾邮件？我是实时编程的新手，所以我想知道我可以使用什么样的技术来防止这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:26:28.193

默认情况下阻止用户执行此操作并没有什么实际意义。您需要构建服务器端安全性来处理此类事情；一个很好的例子是 IRC，其中一些服务器设置了系统，可以限制或断开发送过多垃圾邮件的用户。考虑这些选项以获得服务器端的附加逻辑：

1.  如果用户在一段时间内发出超过一定数量的事件，则限制用户（即在他们发送的事件被忽略的地方）；如果他们经常或特别过度这样做，请断开他们/将他们列入黑名单。
2.  忽略在不允许的状态下发出的事件；例如，在某处跟踪连接的套接字的用户名（即[使用`socket.set`](https://github.com/LearnBoost/socket.io#storing-data-associated-to-a-client)），如果他们发送另一个`join`事件，则丢弃它。

# xml - 在 XML 文档中创建图像路径列表

> ID：11507974
> 
> 赞同：0
> 
> 时间：2012-07-16T15:55:30.203
> 
> 标签：xml, xslt, xinclude

我有 xml 文档，其中 xinclude 其他 xml 文件。所有这些 xml 文件都包含位于不同源位置的图像的相对路径。

```
<chapter xml:id="chapter1">
    <title>First chapter in Main Document</title>
    <section xml:id="section1">
        <title>Section 1 in Main Document</title>
        <para>this is paragraph<figure>
                <title>Car images</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/image1.jpg"/>
                    </imageobject>
                </mediaobject>
            </figure></para>
    </section>
    <xi:include href="../doc/section2.xml"/>
    <xi:include href="../doc/section3.xml"/>
</chapter> 
```

这是 section2 和 section3 xml 文档的样子。

```
<section xml:id="section2"  
        <title>Main Documentation Section2</title>
        <para>This is also paragraph <figure>
                <title>Different Images</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/image2.jpg"/>
                    </imageobject>
                </mediaobject>
            </figure></para>
    </section> 
```

我想创建 XSLT 1.0 样式表，它将在所有 xml 文档中生成图像路径列表。我要将位于不同源位置的图像复制到单个图像文件夹中。然后我将能够使用该图像路径列表来复制这些图像。如果该图像路径列表保存在可以由 java 类访问的结构中，那就太好了。

目前我正在使用从另一个问题中得到的 XSLT。但是这个 XSLT 提供了其他节点的值以及图像路径。我尝试通过更改模板值来过滤它们。

```
<xsl:template match="*">
<xsl:copy>
<xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>

<xsl:template match="xi:include[@href][@parse='xml' or not(@parse)]">
<xsl:apply-templates select="document(@href)" />
</xsl:template> 
```

预期的结果列表会是这样的，

/home/vish/test/images/image1.jpg

/home/vish/test/doc/other/images/image2.jpg

/home/vish/test2/other/images/image3.jpg

提前致谢..！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:29:34.747

怎么样 ...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      exclude-result-prefixes="xsl xi">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="/">
 <image-paths>
  <xsl:apply-templates select="*" />
 </image-paths>
</xsl:template>

<xsl:template match="*">
 <xsl:apply-templates select="*" />
</xsl:template>

<xsl:template match="imagedata">
 <imagedata fileref="{@fileref}" />
</xsl:template>

<xsl:template match="xi:include[@href][@parse='xml' or not(@parse)]">
<xsl:apply-templates select="document(@href)" />
</xsl:template>

</xsl:stylesheet> 
```

你应该得到像...这样的输出

```
<image-paths>
 <imagedata fileref="path1/image1.jpg" />
 <imagedata fileref="path2/image2.jpg" />
 <imagedata fileref="path3/image3.jpg" />
</image-paths> 
```

# python - 如何在 Python 中使用 JSONDecoder？仅获取内部 dict 进行解码

> ID：11507983
> 
> 赞同：4
> 
> 时间：2012-07-16T15:55:51.407
> 
> 标签：python, json

我有一个 JSONEncoder 和 JSONDecoder：

```
class SimpleTargetJSONEncoder(json.JSONEncoder):
    """
    converts a SimpleTarget to a Dict so it can be JSONified
    """

    def default(self, o):
        if isinstance(o, SimpleTargetItem):
            return {
                'x': o.x(),
                'y': o.y(),
                'status': o.status,
                'imageSet': o.imageSet}

class SimpleTargetJSONDecoder(json.JSONDecoder):
    def __init__(self):
        json.JSONDecoder.__init__(self, object_hook=self.dict_to_object)

    def dict_to_object(self, d):
        t = SimpleTargetItem(imageSet=d['imageSet'])
        t.setX(d['x'])
        t.setY(d['y'])
        return t 
```

编码器写出这样的文件：

```
[
    {
        "y": 2514.0, 
        "x": 2399.0, 
        "status": "default", 
        "imageSet": {
            "default": ":/images/blue-circle.png", 
            "active": ":/images/green-circle.png", 
            "removed": ":/images/black-circle.png", 
        }
    }, 
    {
        "y": 2360.0, 
        "x": 2404.0, 
        "status": "default", 
        "imageSet": {
            "default": ":/images/blue-square.png", 
            "active": ":/images/green-square.png", 
            "removed": ":/images/black-square.png", 
        }
    }
] 
```

但是当我调用解码器时，我得到：

```
/Library/Frameworks/Python.framework/Versions/2.7/bin/python /Users/dmd/Documents/inmotion/py/targetlayoutdesigner/designer.py
Traceback (most recent call last):
  File "/Users/dmd/Documents/inmotion/py/targetlayoutdesigner/targetlayoutwindow.py", line 131, in loadLayout
    for t in SimpleTargetJSONDecoder().decode(open(fname).read()):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 382, in raw_decode
    obj, end = self.scan_once(s, idx)
  File "/Users/dmd/Documents/inmotion/py/targetlayoutdesigner/targetitem.py", line 113, in dict_to_object
    t = SimpleTargetItem(imageSet=d['imageSet'])
KeyError: 'imageSet' 
```

如果我当时看 d ， d 就是这样：

```
{u'active': u':/images/green-circle.png',
 u'default': u':/images/blue-circle.png',
 u'removed': u':/images/black-circle.png'} 
```

即，内部字典。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:59:19.630

你假设你只会得到你想要的字典，而不是*所有*的字典。

```
class SimpleTargetJSONDecoder(json.JSONDecoder):
    def __init__(self):
        json.JSONDecoder.__init__(self, object_hook=self.dict_to_object)

    def dict_to_object(self, d):
        if 'x' not in d or 'y' not in d:
            return d
        t = SimpleTargetItem(imageSet=d['imageSet'])
        t.setX(d['x'])
        t.setY(d['y'])
        return t 
```

# coffeescript - 为什么一个类不是其父类的“实例”？

> ID：11507986
> 
> 赞同：0
> 
> 时间：2012-07-16T15:56:07.490
> 
> 标签：coffeescript

咖啡脚本代码：

```
class Animal
  constructor: (@name) ->

  move: (meters) ->
    alert @name + " moved #{meters}m."

class Snake extends Animal
  move: ->
    alert "Slithering..."
    super 5

alert Snake instanceof Animal 
```

这是[一个链接](http://coffeescript.org/#try%3aclass%20Animal%0A%20%20constructor%3A%20%28%40name%29%20-%3E%0A%0A%20%20move%3A%20%28meters%29%20-%3E%0A%20%20%20%20alert%20%40name%20%2B%20%22%20moved%20%23%7Bmeters%7Dm.%22%0A%0Aclass%20Snake%20extends%20Animal%0A%20%20move%3A%20-%3E%0A%20%20%20%20alert%20%22Slithering...%22%0A%20%20%20%20super%205%0A%0Aalert%20Snake%20instanceof%20Animal)。

我真的认为这个结果是真的。我的原因是`__extends`编译后的 JavaScript 中的这种方法：

```
__extends = function (child, parent) {
    for(var key in parent) {
        if(__hasProp.call(parent, key)) child[key] = parent[key];
    }function ctor() {
        this.constructor = child;
    }
    ctor.prototype = parent.prototype;
    child.prototype = new ctor();
    child.__super__ = parent.prototype;
    return child;
}; 
```

`child.prototype.prototype`是父母。

有人能告诉我为什么吗？我知道以下是正确的：

```
alert new Snake('a') instanceof Animal 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T16:17:44.770

你`Snake`是一个子类`Animal`：

```
class Snake extends Animal 
```

这意味着`Snake`(a "class") 实际上是 的实例`Function`，而不是`Animal`。`Snake`另一方面，对象将是 的实例`Animal`：

```
alert Snake instanceof Function     # true
alert (new Snake) instanceof Animal # true 
```

如果你试图让一个`Snake`实例移动：

```
(new Snake('Pancakes')).move() 
```

您会看到调用了正确的方法。

演示：http: [//jsfiddle.net/ambiguous/3NmCZ/1/](http://jsfiddle.net/ambiguous/3NmCZ/1/)

# javascript - .toggle() 函数

> ID：11507989
> 
> 赞同：1
> 
> 时间：2012-07-16T15:56:16.537
> 
> 标签：javascript, jquery

我想将切换功能分别应用于两个按钮。但是，当我使用下面的代码时，它会切换每个按钮下的两个内容。如何将它们分开，以便当我单击第一个按钮时，只有它下面的内容会被切换？

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <button>Toggle</button>
<p>Hello</p>
<p style="display: none">Good Bye</p>

<button>Toggle</button>
<p>Hello</p>
<p style="display: none">Good Bye</p>

<script>
$("button").click(function () {
$("p").toggle();
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:11:43.833

**很简单：**使用`nextUntil()`.
将选择所有下一个元素，直到达到匹配的元素（在您的情况下为 next `button`）：

## *[jsFiddle 演示](http://jsbin.com/eroyas/edit#javascript,html,live)*

```
$("button").click(function () {
     $(this).nextUntil('button').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:01:10.260

试试这个：

```
$("button").click(function () {
  $(this).nextAll("p:lt(2)").toggle();
}); 
```

[http://jsbin.com/orujav](http://jsbin.com/orujav)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T16:08:42.393

为什么有两个段落标签呢？制作您的 HTML：

```
<button>Toggle</button>
<p>Hello</p>

<button>Toggle</button>
<p>Hello</p> 
```

和你的 jQuery：

```
$("button").click(function () {
    $(this).next('p').html( ($(this).next('p').html()=='Hello')?'Good Bye':'Hello');
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/jHSfH/)**

# mongodb - MongoDB中的SQL视图

> ID：11507995
> 
> 赞同：7
> 
> 时间：2012-07-16T15:56:31.767
> 
> 标签：mongodb

我目前正在为我已经开始的项目评估 mongodb，但我找不到任何关于 mongodb 中的 SQL 视图等价物的信息。SQL 视图提供的我需要的是将来自不同表（集合）的数据集中到一个集合中。

我只想将一些文档聚集在一起并将它们标记为单个文档。这是一个例子：

我有以下文件： cc_address us_address billing_address shipping_address

但在我的应用程序中，我希望查看我的所有地址并能够在单个文档中管理它们。

在其他情况下，我可能只需要集合中的几个字段：

我有以下文件： fb_contact twitter_contact google_contact reddit_contact

这些文档中的每一个都有对齐的字段，例如 firstname lastname 和 email，但它们也有不对齐的字段。我希望能够将它们编译成一个仅包含对齐字段的文档。

这可以通过 SQL 中的 Views 来完成吗？我可以在 MongoDb 中完成这种功能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-21T13:40:15.273

这个问题已经很老了。但是，从 mongodb v3.2 开始，只要集合未分片，您就可以使用[$lookup将不同集合的数据连接在一起。](https://docs.mongodb.com/v3.4/reference/operator/aggregation/lookup/#pipe._S_lookup)从 mongodb v3.4 开始，您还可以[创建只读视图](https://docs.mongodb.com/v3.4/core/views/#reference-views)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T16:56:25.273

MongoDB 中没有“连接”。正如 JonnyHK 所说，您可以规范化数据或使用嵌入式文档或执行多个查询

但是，您也可以使用[Map-Reduce](http://www.mongodb.org/display/DOCS/MapReduce)。

或者如果您准备使用开发分支，您可以测试新的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation)，尽管它可能太多了？这个新框架将在即将发布的[2.2](http://www.mongodb.org/display/DOCS/2.2+Release+Notes)中，与 2.1.x 不同的是，它是生产就绪的。

这里还有[SQL-Mongo 图表](http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart)，可能对你的学习有所帮助。

更新：根据您的重新编辑，您不需要 Map-Reduce 或聚合框架，因为您只是在查询。

您实际上是在进行连接、查询多个文档并合并结果。执行此操作的位置在客户端的应用程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T16:34:12.103

MongoDB 查询永远不会跨越一个集合，因为不支持连接。因此，如果您需要在查询结果中提供相关数据，则必须将该相关数据添加到您正在查询的集合中（即非规范化您的数据），或者从另一个集合中对其进行单独查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-18T23:17:28.270

> 我目前正在为我已经开始的项目评估 mongodb，但我找不到任何关于 mongodb 中的 SQL 视图等效的信息

除了[这个答案](https://stackoverflow.com/a/40721600/1628984)，mongodb 现在还有[按需物化视图](https://www.mongodb.com/blog/post/coming-in-mongodb-42--ondemand-materialized-views)。简而言之，此功能允许您使用`aggregate`和[`$merge`](https://docs.mongodb.com/manual/reference/operator/aggregation/merge/)（在 4.2 中）创建/更新可以更快查询的快速视图集合。该策略用于在主集合发生记录更改时更新快速视图集合。与 SQL 不同，这具有增加数据存储大小的副作用。但是根据您的查询需求，好处可能是巨大的。

# php - 条件语句中的概率

> ID：11507996
> 
> 赞同：2
> 
> 时间：2012-07-16T15:56:39.143
> 
> 标签：php, if-statement, conditional-statements

让我们取一个名为 someInt 的变量，它可能有任何数值。我们需要检查它是否为0。

```
if($someInt!=0) {
  // someInt is not 0, this is the most probable
} else {
  // someInt is 0.
}

//VS

if($someInt==0) {
  // highly unlikely... perform a jump
} else {

} 
```

哪种方式更优？有什么区别（除了可读性）？

我想知道的另一种相关的事情：我有一个习惯检查数组是否有这种方式：

```
if($myArray.length != 0) {

}
 // instead of
if($myArray.length > 0) {

} 
```

注意“！=”。由于 array.length 只能为 0 或大于 0，“！=”检查是否更优化？我问这个是因为我一直在 Visual Basic 6 中这样做，它显然在那里工作得更快。其他语言呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:59:27.983

最可能的条件应该在顶部。这样，解析器会跳过不太可能的情况，并且您会得到一个过度优化的应用程序。

您的第二个问题是微优化。我怀疑它会在性能方面以一种或另一种方式产生影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:59:14.157

对于 if 语句来说，这种情况越有可能在 if 语句中越靠前，从可读性的角度来看，这更有意义，从性能的角度来看也是如此。至于数组部分 $array.length > 0 更具可读性。但是，性能应该不是问题，因为不应该经常调用它，缓存结果比不断检查数组长度要好。

# ruby - Sinatra 执行/系统“捆绑程序执行”

> ID：11507998
> 
> 赞同：2
> 
> 时间：2012-07-16T15:56:45.700
> 
> 标签：ruby, shell, sinatra, bundler

我正在尝试组合一个快速的 Sinatra 应用程序来调用一些需要自己的 Bundler env 运行的测试 ruby​​ 脚本。

在我的 Sinatra 应用程序中形成一个方法，我想运行类似的东西

```
system("cd /test_app/; bundle exec ruby some_file.rb") 
```

由于捆绑程序设置其环境的方式，这不起作用。有没有办法启动一个新的 shell 会话来执行我的脚本，以便它可以从 Sinatra 工作？

还是有其他方法可以做到这一点？基本上我唯一的要求是可以从网页上的链接触发这些脚本，以便一些团队成员可以启动测试过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:51:01.990

发现这个片段可以很好地清理捆绑器环境。- [http://johnbintz.github.com/blog/2012/02/02/the-cleanest-bundler-env/](http://johnbintz.github.com/blog/2012/02/02/the-cleanest-bundler-env/)

```
Bundler.with_sparkling_clean_env do
  system("cd /test_app; bundle --gemfile ./Gemfile exec ruby #{cmd}")
end

module Bundler
  class << self
    def with_sparkling_clean_env
      oenv = ENV.to_hash

      %w{BUNDLE_GEMFILE RUBYOPT GEM_HOME GIT_DIR GIT_WORK_TREE}.each { |key| ENV.delete(key) }

      yield

      ENV.replace(oenv)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T17:33:19.050

这似乎有效：

```
Dir.chdir "/test_app"
`bundle exec ruby some_file.rb` 
```

`rvm use ruby-1.9.2-p320`在我开始使用 sinatra 之前，我还需要获得正确的红宝石。rvm 不喜欢被告知在 ruby​​ 进程中改变自己。（这是有道理的！）

（使用反引号而不是 system() 您可以返回输出，以便您可以打印它或诸如此类。）

# android - 在 onActivityResult 之前和之后调用 onCreate

> ID：11507999
> 
> 赞同：4
> 
> 时间：2012-07-16T15:56:46.053
> 
> 标签：android, android-activity, android-camera

我尝试以下方式打开相机：

```
...
    private void runCamera() {
        String storageState = Environment.getExternalStorageState();
        if (storageState.equals(Environment.MEDIA_MOUNTED)) {

            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            File imageFile = new File(Singleton.instanse.mPushFilePath);
            mImageFileUri = Uri.fromFile(imageFile);
            intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
                    mImageFileUri);
            startActivityForResult(intent, CAMERA_RESULT);
    }
... 
```

如果我运行这个方法运行下一个方法：

```
07-16 19:46:22.264: I/System.out(6875): -onPause
07-16 19:46:26.104: I/System.out(6875): -onStop 
```

我制作照片，结束运行下一个方法：

```
07-16 19:46:41.217: I/System.out(6875): -onDestroy
07-16 19:46:41.284: I/System.out(6875): -onCreate
07-16 19:46:41.291: I/System.out(6875): -onStart
07-16 19:46:41.295: I/System.out(6875): -onActivityResult
07-16 19:46:41.295: I/System.out(6875): -onResume
07-16 19:46:41.295: I/System.out(6875): -onPostResume
07-16 19:46:41.522: I/System.out(6875): -onPause
07-16 19:46:41.522: I/System.out(6875): -onStop
07-16 19:46:41.522: I/System.out(6875): -onDestroy
07-16 19:46:41.604: I/System.out(6875): -onCreate
07-16 19:46:41.612: I/System.out(6875): -onStart
07-16 19:46:41.616: I/System.out(6875): -onResume
07-16 19:46:41.616: I/System.out(6875): -onPostResume 
```

为什么 onDestroy 运行两次？如何解决？这个问题在 Android 2.2 中发现。在 Android 2.3.3 onDestroy 从未调用过！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T12:30:30.563

实际上，相机会导致您的活动方向发生变化，这就是您的活动被销毁和重新创建的原因。

将此添加到您的清单文件中，它将防止方向更改，并且您的活动不会被破坏和重新创建。

```
<activity
    android:name=".YourActivity"
    android:configChanges="orientation|keyboardHidden"
    android:screenOrientation="portrait" >
</activity> 
```

[通过意图拍照后调用的活动被杀死/ onCreate](https://stackoverflow.com/questions/10411009/activity-killed-oncreate-called-after-taking-picture-via-intent/10411504#10411504)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T16:00:55.373

`onDestroy`不保证被调用。确保将持久状态保存在`onPause`而不是`onStop`and`onDestroy`中。你永远不应该依赖任何一个`onStop`或被`onDestroy`调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:59:29.880

onDestroy 不能保证在任何 android 版本上执行，如果确实如此，您应该快速执行一些操作并返回

还看到这个[Activity OnDestroy 从未调用过吗？](https://stackoverflow.com/questions/4449955/ondestroy-never-called)